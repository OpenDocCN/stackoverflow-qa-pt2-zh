# StackOverflow 问答 15702000-15702999

# android - 在 XML 文件中接收 Inflate 异常

> ID：15702001
> 
> 赞同：1
> 
> 时间：2013-03-29T11:05:42.880
> 
> 标签：android, xml, android-layout

刚才我将一个现有的 android 应用程序导入我的系统。它会在以下 xml 文件的行中导致 InflateExceotion

```
<ImageView 
```

我不知道为什么会发生这个错误。因为，它正在另一个系统中成功运行

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent" android:layout_height="fill_parent">
<ImageView 
    android:id="@+id/image1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerVertical="true"
    android:layout_alignParentLeft="true"
    android:background="@drawable/svs"
/>

</RelativeLayout> 
```

日志猫：

```
03-29 10:55:37.621: E/AndroidRuntime(941): FATAL EXCEPTION: main
03-29 10:55:37.621: E/AndroidRuntime(941): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.app/com.app.ScreenActivity}: android.view.InflateException: Binary XML file line #4: Error inflating class <unknown>
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.app.ActivityThread.access$600(ActivityThread.java:141)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.os.Looper.loop(Looper.java:137)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.app.ActivityThread.main(ActivityThread.java:5041)
03-29 10:55:37.621: E/AndroidRuntime(941):  at java.lang.reflect.Method.invokeNative(Native Method)
03-29 10:55:37.621: E/AndroidRuntime(941):  at java.lang.reflect.Method.invoke(Method.java:511)
03-29 10:55:37.621: E/AndroidRuntime(941):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
03-29 10:55:37.621: E/AndroidRuntime(941):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
03-29 10:55:37.621: E/AndroidRuntime(941):  at dalvik.system.NativeStart.main(Native Method)
03-29 10:55:37.621: E/AndroidRuntime(941): Caused by: android.view.InflateException: Binary XML file line #4: Error inflating class <unknown>
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.view.LayoutInflater.createView(LayoutInflater.java:613)
03-29 10:55:37.621: E/AndroidRuntime(941):  at com.android.internal.policy.impl.PhoneLayoutInflater.onCreateView(PhoneLayoutInflater.java:56)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.view.LayoutInflater.onCreateView(LayoutInflater.java:660)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:685)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
03-29 10:55:37.621: E/AndroidRuntime(941):  at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.app.Activity.setContentView(Activity.java:1881)
03-29 10:55:37.621: E/AndroidRuntime(941):  at com.app.ScreenActivity.onCreate(ScreenActivity.java:19)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.app.Activity.performCreate(Activity.java:5104)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
03-29 10:55:37.621: E/AndroidRuntime(941):  ... 11 more
03-29 10:55:37.621: E/AndroidRuntime(941): Caused by: java.lang.reflect.InvocationTargetException
03-29 10:55:37.621: E/AndroidRuntime(941):  at java.lang.reflect.Constructor.constructNative(Native Method)
03-29 10:55:37.621: E/AndroidRuntime(941):  at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.view.LayoutInflater.createView(LayoutInflater.java:587)
03-29 10:55:37.621: E/AndroidRuntime(941):  ... 24 more
03-29 10:55:37.621: E/AndroidRuntime(941): Caused by: java.lang.OutOfMemoryError
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.graphics.BitmapFactory.nativeDecodeAsset(Native Method)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:502)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.graphics.BitmapFactory.decodeResourceStream(BitmapFactory.java:355)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.graphics.drawable.Drawable.createFromResourceStream(Drawable.java:785)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.content.res.Resources.loadDrawable(Resources.java:1965)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.content.res.TypedArray.getDrawable(TypedArray.java:601)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.view.View.<init>(View.java:3330)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.widget.ImageView.<init>(ImageView.java:114)
03-29 10:55:37.621: E/AndroidRuntime(941):  at android.widget.ImageView.<init>(ImageView.java:110)
03-29 10:55:37.621: E/AndroidRuntime(941):  ... 27 more 
```

有人可以帮我避免这个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:08:57.937

您收到内存不足错误。“svs”图像有多大？不同的手机有不同的规格以及运行不同的东西。两个设备之间的 OOM 是完全合理的。

减小 svs 的大小。

# java - 高级 SWT 浏览器小部件

> ID：15702003
> 
> 赞同：0
> 
> 时间：2013-03-29T11:05:50.277
> 
> 标签：java, browser, widget, swt

是否有高级 SWT 浏览器[小部件](http://www.eclipse.org/swt/widgets/)？

文件[说](http://help.eclipse.org/juno/index.jsp?topic=/org.eclipse.platform.doc.isv/reference/api/org/eclipse/swt/browser/Browser.html)

> 重要提示：这个类不打算被子类化。

更新。[我们](http://github.com/nodeclipse/)正在开发[基于 Eclipse 的 Node.js IDE](https://github.com/Nodeclipse/nodeclipse-blog#repositories)，我正在研究周围有什么好的新事物。因为该项目是新项目，所以我们不必支持类似 3.4 的 Eclipse 版本。我希望找到一些高级组件和框架来使用。但当然，它们应该可以自由开发和分发。

这个特殊的问题重点是尝试集成一些正在出现的纯 JavaScript 工具。有些是 Node.js 应用程序或 Web 资源。

# ruby-on-rails - 如何在与自身关联的 Ruby on Rails 模型中声明关联？

> ID：15702004
> 
> 赞同：1
> 
> 时间：2013-03-29T11:05:50.917
> 
> 标签：ruby-on-rails, associations, model-associations

在我的 Ruby on Rails 应用程序中，我有一个带有father_id 属性的 Idea 模型。模型定义声明了以下关联：

```
class Idea < ActiveRecord::Base
    belongs_to :father, :class_name => "Idea", :foreign_key => "idea_id"
    has_many :children, :class_name => "Idea", :foreign_key => "father_id", :dependent => :destroy 
```

我想我弄错了，因为当我使用 rails 控制台时，我可以调用一个想法的孩子而不是它的父亲。例如 ：

```
irb(main):008:0> i = Idea.find(75)
=> #<Idea id: 75, father_id: 66>

irb(main):009:0> i.children
=> [#<Idea id: 98, father_id: 75>, #<Idea id: 99, father_id: 75>] 
```

这意味着通过协会打电话给孩子们工作正常。但是调用父亲返回 nil ：

```
irb(main):010:0> i.father
=> nil 
```

虽然有一个 id = 66 的想法。

我显然不确定在将模型链接到自身的关联中使用 :foreign_key 的正确方法。有人可以给点建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:15:02.453

摆脱`:foreign_key => "idea_id"`上`belongs_to`：

```
belongs_to :father, :class_name => "Idea"
has_many :children, :class_name => "Idea", :foreign_key => "father_id", :dependent => :destroy 
```

（您可以将其更改为`"father_id"`，这是您想要的，但这是默认设置，因此实际上不需要指定它）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:38:04.680

删除两个 foreign_key 规范

```
belongs_to :father, :class_name => "Idea"
has_many :children, :class_name => "Idea", :dependent => :destroy 
```

并且，确保您有一个添加`father_id`了`ideas`.

# linux - bash - 自动化编译的正确方法

> ID：15702012
> 
> 赞同：0
> 
> 时间：2013-03-29T11:06:12.440
> 
> 标签：linux, bash

我正在尝试在 CentOS 下自动编译 Mono，为此我正在编写一个 bash 脚本。但我对此很陌生，我不确定这里的最佳做法是什么。

这就是我的脚本现在的样子：

```
# Variables
monoRepoUrl='http://download.mono-project.com/sources/mono'

monoPackageName='mono-2.10.8'
monoSubdir=$monoPackageName
srcDirectory='/usr/local/src'/$monoSubdir

monoUrl=$monoRepoUrl'/'$monoSubdir'/'$monoPackageName".tar.bz2"

# Prepare environment
echo ''
echo 'Installing pre-requisites packages'
echo ''
yum -y install gcc-c++ make httpd-devel gettext bison

######### Mono core stuff #########
echo ''
echo 'Getting Mono'
echo ''
wget $monoUrl
tar jxvf $monoPackageName.tar.bz2

$srcDirectory/configure -prefix=/opt/$monoPackageName; $srcDirectory/make; $srcDirectory/make install
echo export PKG_CONFIG_PATH=/opt/$monoPackageName/lib/pkgconfig:$PKG_CONFIG_PATH>>~/.bash_profile
echo export PATH=/opt/$monoPackageName/bin:$PATH>>~/.bash_profile
source ~/.bash_profile

echo ''
echo 'End of Mono installation'
echo '' 
```

但是，我在这里遇到的问题是目录的更改不起作用-脚本似乎有自己的进程。这样做的更优雅的方式是什么，保持简单（例如，除非绝对必要，否则我宁愿不使用函数）？

到处使用绝对路径会起作用吗？bash 中这种情况的最佳实践是什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-29T11:23:54.370

如果您正在编写 bash 脚本，请确保始终使用绝对路径，bash 不接受或读取相对路径。由于您是新手，请确保您还指定了命令的绝对路径，例如，有时 yum 可能不起作用。检查哪个 yum 首先获取 yum 的绝对路径，并在 bash 脚本中指定绝对路径。确保您同时也授予了脚本的执行权限

# java - Java：如何扩展使用泛型但限制类型的对象

> ID：15702018
> 
> 赞同：2
> 
> 时间：2013-03-29T11:06:24.017
> 
> 标签：java, generics, arraylist, extends, implements

很抱歉，但我不确定我是否使用或正在使用正确的术语，但基本上我想创建一个名为`EntityList`扩展 ArrayList 的类，但我想要它，以便我创建的接口`EntityInterface`基本上用于 E in`EntityList`所以我没有手动声明的所有瞬间。

代码方面我希望能够把它放进去

```
 EntityList entityList = new EntityList(); 
```

并得到等效的结果

```
 EntityList<EntityInterface> entityList = new EntityList<EntityInterface>(); 
```

我真的不确定如何从这里开始。这是我对这个问题的尝试。

```
 import java.util.ArrayList;

//right now just a class that extends ArrayList designed to hold Entities.
public class EntityList<EntityInterface> extends ArrayList<EntityInterface> {

    EntityList(){

    }
} 
```

我可以显示问题的最好方法是显示 arraylist 是一个即时变量。

```
 import java.util.ArrayList;

//right now just a class that extends ArrayList designed to hold Entities.
public class EntityList<EntityInterface>  {

    ArrayList al = new ArrayList();

    EntityList(){

    }
} 
```

然而，这基本上是我想要的，再次以可变形式而不是扩展形式。

```
 import java.util.ArrayList;

//right now just a class that extends ArrayList designed to hold Entities.
public class EntityList<EntityInterface>  {

    ArrayList<EntityInterface> al = new ArrayList<EntityInterface>();

    EntityList(){

    }
} 
```

我相信如果我做这样的事情，

```
 public class EntityList<? implements EntityInterface> extends ArrayList<?>  { 
```

它应该基于这个线程工作。 [通用：ArrayList 的？在 Java 中扩展 ISomeInterface](https://stackoverflow.com/questions/7821064/generic-arraylist-of-extends-isomeinterface-in-java)

但是，在 eclipse 上尝试了我的代码的这个修改之后：

```
public class EntityList<E implements EntityInterface> extends ArrayList<E> { 
```

和 public class EntityList extends ArrayList { 两者都在 Eclipse 中抛出错误。我正在使用 Java 6。我不确定我使用的是什么子版本。如果可以纠正错误，我确实有 Java 7，我会尝试一下。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T11:08:55.960

`public class EntityList extends ArrayList<EntityInterface> {`

# iphone - Sprite.rotation 在 box2d 中不起作用

> ID：15702024
> 
> 赞同：3
> 
> 时间：2013-03-29T11:06:49.377
> 
> 标签：iphone, ios, objective-c, xcode, box2d

我有一组 Sprite，允许用户移动在 ccTouchesMoved 中处理。

当用户选择了其中一个精灵（通过触摸它）时，他们可以选择使用 ccTouchesMoved 方法旋转精灵，直到他们取消选择旋转功能。

精灵可以正确旋转，但是我有另一种方法可以在精灵周围创建边缘，这样它们就有了碰撞的能力，什么没有。

调用此方法时，它会重置我所有 Sprite 的旋转，将它们设置回 0，我不知道为什么。

```
 for (CCSprite *sprite in bounceBarriers)
    {
        curBarrier = sprite;
        curBarrier.rotation = 20;
        [self bounceCreator];
    }

//bounceCreator:

b2BodyDef barrierBodyDef;
barrierBodyDef.type = b2_staticBody;
barrierBodyDef.position.Set(curBarrier
                            .position.x/PTM_RATIO, curBarrier.position.y/PTM_RATIO);
barrierBodyDef.userData = curBarrier; //the userData is set to the current sprite

_body2 = _world->CreateBody(&barrierBodyDef);
barrierBodyDef.position.Set(0,0);

b2Body *barrierBody;
barrierBody = _world->CreateBody(&barrierBodyDef);

b2EdgeShape barrierEdge;
b2FixtureDef barrierShapeDef;
barrierShapeDef.shape = &barrierEdge;
barrierShapeDef.friction = 1.0f;
barrierShapeDef.restitution = 1.0f;
barrierEdge.Set(b2Vec2((curBarrier.position.x-70)/PTM_RATIO, (curBarrier.position.y+10)/PTM_RATIO),
                b2Vec2((curBarrier.position.x-70)/PTM_RATIO, (curBarrier.position.y-10)/PTM_RATIO));
barrierBody->CreateFixture(&barrierShapeDef);
barrierEdge.Set(b2Vec2((curBarrier.position.x-70)/PTM_RATIO, (curBarrier.position.y-10)/PTM_RATIO),
                b2Vec2((curBarrier.position.x+70)/PTM_RATIO, (curBarrier.position.y-10)/PTM_RATIO));
barrierBody->CreateFixture(&barrierShapeDef);
barrierEdge.Set(b2Vec2((curBarrier.position.x+70)/PTM_RATIO, (curBarrier.position.y-10)/PTM_RATIO),
                b2Vec2((curBarrier.position.x+70)/PTM_RATIO, (curBarrier.position.y+10)/PTM_RATIO));
barrierBody->CreateFixture(&barrierShapeDef);
barrierEdge.Set(b2Vec2((curBarrier.position.x+70)/PTM_RATIO, (curBarrier.position.y+10)/PTM_RATIO),
                b2Vec2((curBarrier.position.x-70)/PTM_RATIO, (curBarrier.position.y+10)/PTM_RATIO));
barrierBody->CreateFixture(&barrierShapeDef); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:13:56.483

同时更新 b2body 的旋转。

```
 body->SetTransform([self toB2Meters: sprite.position], -1*CC_DEGREES_TO_RADIANS(20)); 
```

# paypal - 在新的 PayPal 开发者账户中，我可以在哪里获得 API 凭据？

> ID：15702026
> 
> 赞同：1
> 
> 时间：2013-03-29T11:06:59.377
> 
> 标签：paypal, paypal-sandbox

有谁知道在新的 PayPal 开发人员（Beta）帐户中我可以在哪里获得 API 凭据（不是 REST API 凭据）。正如您在这篇文章中看到的那样，旧开发者网站的左侧导航中曾经有一个链接[沙盒的 PayPal API 凭据](https://stackoverflow.com/questions/7769876/paypal-api-credentials-for-sandbox)我要查找的确切信息是“API 用户名”、“API 密码”和“API 证书”文件”或“API 签名”。在普通 PayPal 账户中，您可以通过“我的账户”>“个人资料”页面上的链接获取此信息（此页面：[https](https://www.evernote.com/shard/s141/sh/ec645865-2d05-4a7e-99b2-8f616d20384f/74642340d102c67e0e250806d3fed007) ://www.evernote.com/shard/s141/sh/ec645865-2d05-4a7e-99b2-8f616d20384f/74642340d102c67e0e250806d3fed007 ） 谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:12:33.920

单击所需沙盒帐户左侧的箭头（即展开该行）。

单击配置文件 -> API 凭据选项卡。这将显示 API 凭据。

希望有帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:59:39.170

由于新开发者网站中的一些问题，Chirag B 提供的步骤对某些帐户不起作用。这些是 Chirag 列出的正确步骤，但如果它们没有显示，还有另一种解决方法。那将是登录到您想要凭据的实际测试沙盒卖家帐户，然后转到您的个人资料并在那里请求/查看您的 API 凭据。

# row - 在janus gridex行定位中允许新行

> ID：15702027
> 
> 赞同：0
> 
> 时间：2013-03-29T11:07:00.703
> 
> 标签：row, janus, gridex

`AllowAddNew`我有一个按钮，允许我通过将参数设置为 true在 Janus GridEx 中插入新行。

新行添加到底部。

我面临的问题是，当我有很多行所以有滚动条时，我无法将焦点放在该行上，即使我将光标设置到最后一行并将确保可见参数设置为 true。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T03:22:29.800

在行添加的末尾添加以下代码：

```
 if (grdEx.RowCount > 0)
            grdEx.Row = grid.RowCount - 1; 
```

# c# - 在 C# 中获取视频文件的缩略图

> ID：15702031
> 
> 赞同：39
> 
> 时间：2013-03-29T11:07:30.577
> 
> 标签：c#, .net

我想显示我网站上列出的视频的缩略图，我想从视频中（从特定时间）获取单个帧并将它们显示为缩略图。

我试过这个[http://ramcishna.blogspot.com/2008/09/playing-videos-like-youtube-and.html](http://ramcrishna.blogspot.com/2008/09/playing-videos-like-youtube-and.html)但不工作。

这可能使用.NET C#吗？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-11-26T11:52:27.593

FFMpeg 是一个正确的工具，可用于在某个位置提取视频帧。您可以如上所述调用 ffmpeg.exe 或仅使用现有的 .NET 包装器（例如[.NET 的视频转换器](http://www.nrecosite.com/video_converter_net.aspx)（它是免费的），只需一行代码即可获取缩略图：

```
var ffMpeg = new NReco.VideoConverter.FFMpegConverter();
ffMpeg.GetVideoThumbnail(pathToVideoFile, thumbJpegStream,5); 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-03-29T13:13:03.057

您可以以编程方式执行[FFmpeg](http://www.ffmpeg.org/)以生成缩略图图像文件。然后打开图像文件以根据需要使用它。

这是一些示例代码：

```
public static Bitmap GetThumbnail(string video, string thumbnail)
{
    var cmd = "ffmpeg  -itsoffset -1  -i " + '"' + video + '"' + " -vcodec mjpeg -vframes 1 -an -f rawvideo -s 320x240 " + '"' + thumbnail + '"';

    var startInfo = new ProcessStartInfo
    {
        WindowStyle = ProcessWindowStyle.Hidden,
        FileName = "cmd.exe",
        Arguments = "/C " + cmd
    };

    var process = new Process
    {
        StartInfo = startInfo
    };

    process.Start();
    process.WaitForExit(5000);

    return LoadImage(thumbnail);
}

static Bitmap LoadImage(string path)
{
    var ms = new MemoryStream(File.ReadAllBytes(path));
    return (Bitmap)Image.FromStream(ms);
} 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2018-08-19T10:35:17.630

[Xabe.FFmpeg](https://github.com/tomaszzmuda/Xabe.FFmpeg) - 免费（用于非商业用途）、开源和跨平台库。为 FFmpeg 提供流畅的 API。从 Xabe.F 中的视频生成缩略图

```
 string output = Path.Combine(Path.GetTempPath(), Guid.NewGuid() + FileExtensions.Png);
    IConversionResult result = await Conversion.Snapshot(Resources.Mp4WithAudio, output, TimeSpan.FromSeconds(0))
                                               .Start(); 
```

它需要像其他答案一样的 FFmpeg 可执行文件，但您可以通过以下方式下载它

```
 FFmpeg.GetLatestVersion(); 
```

此处提供完整文档 - [Xabe.FFmpeg 文档](https://xabe.net/product/xabe-ffmpeg/)

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2020-02-27T02:30:59.010

因为人们不想在商业软件中使用 FFMpeg 作为它的麻烦。我在这里有一个旧的解决方案：

```
ShellFile shellFile = ShellFile.FromFilePath(VideoFileName);
Bitmap bm = shellFile.Thumbnail.Bitmap; 
```

然后您将获得一个可用于绘图的 Bitmap 对象。如果你想要一个文件，只需执行以下操作：

```
bm.Save(fileName, System.Drawing.Imaging.ImageFormat.Jpeg); 
```

如果你想要一个可以在 Xaml 绑定中使用的 BitmapImage。只需将 Bitmap 传输到 BitmapImage。这是一个例子：

```
public static BitmapImage ConvertBitmapToBitmapImage(Bitmap bitmap)
        {
            MemoryStream ms = new MemoryStream();
            bitmap.Save(ms, System.Drawing.Imaging.ImageFormat.Bmp);
            BitmapImage image = new BitmapImage();
            image.BeginInit();
            ms.Seek(0, SeekOrigin.Begin);
            image.StreamSource = ms;
            image.EndInit();

            return image;
        } 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-08-09T12:57:44.207

```
 [HttpPost]
        [Route("UploadImages")]
        public HttpResponseMessage Post()
        {
            HttpResponseMessage response = new HttpResponseMessage();
            var httpRequest = HttpContext.Current.Request;
            if (httpRequest.Files.Count > 0)
            {
                var docfiles = new List<string>();
                foreach (string file in httpRequest.Files)
                {
                    var postedFile = httpRequest.Files[file];
                    var filePath1 = HttpContext.Current.Server.MapPath("~/ImgFolder/" + postedFile.FileName);

                    Stream strm = postedFile.InputStream;

                    CreateThumbnail(strm, postedFile.FileName);

                    Compressimage(strm, filePath1, postedFile.FileName);

                }
                response = Request.CreateResponse(HttpStatusCode.Created, docfiles);
            }
            else
            {
                response = Request.CreateResponse(HttpStatusCode.BadRequest);
            }
            return response;
        }
        public static void **CreateThumbnail**(Stream sourcePath, string filename)
        {
            Image image = Image.FromStream(sourcePath);
            Image thumb = image.GetThumbnailImage(120, 120, () => false, IntPtr.Zero);
             var filePath1 = HttpContext.Current.Server.MapPath("~/Thumbnail/" + filename);

             thumb.Save(filePath1 + filename);

        }

        public static void Compressimage(Stream sourcePath, string targetPath, String filename)  
        {  

            try  
            {  
                using (var image = Image.FromStream(sourcePath))  
                {  
                    float maxHeight = 900.0f;  
                    float maxWidth = 900.0f;  
                    int newWidth;  
                    int newHeight;  
                    string extension;  
                    Bitmap originalBMP = new Bitmap(sourcePath);  
                    int originalWidth = originalBMP.Width;  
                    int originalHeight = originalBMP.Height;  

                    if (originalWidth > maxWidth || originalHeight > maxHeight)  
                    {  

                        // To preserve the aspect ratio  
                        float ratioX = (float)maxWidth / (float)originalWidth;  
                        float ratioY = (float)maxHeight / (float)originalHeight;  
                        float ratio = Math.Min(ratioX, ratioY);  
                        newWidth = (int)(originalWidth * ratio);  
                        newHeight = (int)(originalHeight * ratio);  
                    }  
                    else  
                    {  
                        newWidth = (int)originalWidth;  
                        newHeight = (int)originalHeight;  

                    }  
                    Bitmap bitMAP1 = new Bitmap(originalBMP, newWidth, newHeight);  
                    Graphics imgGraph = Graphics.FromImage(bitMAP1);  
                    extension = Path.GetExtension(targetPath);  
                    if (extension == ".png" || extension == ".gif")  
                    {  
                        imgGraph.SmoothingMode = SmoothingMode.AntiAlias;  
                        imgGraph.InterpolationMode = InterpolationMode.HighQualityBicubic;  
                        imgGraph.DrawImage(originalBMP, 0, 0, newWidth, newHeight);  

                        bitMAP1.Save(targetPath, image.RawFormat);  

                        bitMAP1.Dispose();  
                        imgGraph.Dispose();  
                        originalBMP.Dispose();  
                    }  
                    else if (extension == ".jpg")  
                    {  

                        imgGraph.SmoothingMode = SmoothingMode.AntiAlias;  
                        imgGraph.InterpolationMode = InterpolationMode.HighQualityBicubic;  
                        imgGraph.DrawImage(originalBMP, 0, 0, newWidth, newHeight);  
                        ImageCodecInfo jpgEncoder = GetEncoder(ImageFormat.Jpeg);  
                        Encoder myEncoder = Encoder.Quality;  
                        EncoderParameters myEncoderParameters = new EncoderParameters(1);  
                        EncoderParameter myEncoderParameter = new EncoderParameter(myEncoder, 50L);  
                        myEncoderParameters.Param[0] = myEncoderParameter;  
                        bitMAP1.Save(targetPath, jpgEncoder, myEncoderParameters);  

                        bitMAP1.Dispose();  
                        imgGraph.Dispose();  
                        originalBMP.Dispose();  

                    }  

                }  

            }  
            catch (Exception)  
            {  
                throw;  

            }  
        }  

        public static ImageCodecInfo GetEncoder(ImageFormat format)  
        {  

            ImageCodecInfo[] codecs = ImageCodecInfo.GetImageDecoders();  

            foreach (ImageCodecInfo codec in codecs)  
            {  
                if (codec.FormatID == format.Guid)  
                {  
                    return codec;  
                }  
            }  
            return null;  
        } 
```

# mingw - 无法将 Mingw 集成到 Notepad++

> ID：15702035
> 
> 赞同：0
> 
> 时间：2013-03-29T11:07:42.987
> 
> 标签：mingw, integration, notepad++, nppexec

我尝试将我的记事本 ++ 集成到以前成功安装的 mingw 应用程序中。我从这个网站得到了帮助：

[http://iitdu.forumsmotion.com/t108-gcc-compiler-in-notepad](http://iitdu.forumsmotion.com/t108-gcc-compiler-in-notepad)

我从该网站获取代码：

```
 // The script code, C source code compiling with GNU CC (GCC) in notepad++ (by                "NppExec" plug-in) and compressing with UPX...
//
// Enable? "//" signs remove in code line.
// Sample: C:\Program Files\CodeBlocks\MinGW\bin\gcc.exe "$(FULL_CURRENT_PATH)" -o $(NAME_PART)

YOUR_GCC\BIN\_PATH_HERE\gcc.exe "$(FULL_CURRENT_PATH)" -o $(NAME_PART)

// UPX Compress (with "--best, --ultra-brute" options)
// Enable? "//" signs remove in code line.
// Sample: C:\WINDOWS\system32\upx.exe --best --ultra-brute $(NAME_PART).exe

YOUR_UPX_PATH_HERE\upx.exe --best --ultra-brute $(NAME_PART).exe 
```

并将其更改为：

```
// The script code, C source code compiling with GNU CC (GCC) in notepad++ (by "NppExec" plug-in) and compressing with UPX...
//
// Enable? "//" signs remove in code line.
// Sample: C:\MinGW\bin\gcc.exe "$(FULL_CURRENT_PATH)" -o $(NAME_PART)

C:\MinGW\bin\gcc.exe "$(FULL_CURRENT_PATH)" -o $(NAME_PART)

// UPX Compress (with "--best, --ultra-brute" options)
// Enable? "//" signs remove in code line.
// Sample: C:\upx.exe --best --ultra-brute $(NAME_PART).exe
C:\upx.exe --best --ultra-brute $(NAME_PART).exe 
```

在我的 Notepad++ 中的 Nppexec 插件中

然后当我尝试执行上面的代码时，我收到了这样的消息：

```
C:\MinGW\bin\gcc.exe "C:\Program Files\Notepad++\new  3.txt" -o new  3
Process started >>>
**gcc.exe: hata: 3: No such file or directory**
<<< Process finished.
C:\upx.exe --best --ultra-brute new  3.exe
Process started >>>
                       Ultimate Packer for eXecutables
                          Copyright (C) 1996 - 2013
UPX 3.09w       Markus Oberhumer, Laszlo Molnar & John Reiser   Feb 18th 2013

        File size         Ratio      Format      Name
   --------------------   ------   -----------   -----------
upx: new: FileNotFoundException: new
upx: 3.exe: FileNotFoundException: 3.exe

Packed 0 files.
<<< Process finished.
================ READY ================ 
```

在我的 mingw 文件夹中：

C:\mingw\bin\gcc.exe 没问题

所以为什么找不到它我不明白......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-15T04:09:40.367

我在 Notepad++ 中编译的 nppexec 代码是

```
gcc $(FULL_CURRENT_PATH) -o $(CURRENT_DIRECTORY)\$(NAME_PART).exe 
```

编译文件，在同一文件夹中创建一个 .exe 文件。

希望有帮助。

# c++ - C++ 遍历 wstring 的每个字符并替换它

> ID：15702037
> 
> 赞同：0
> 
> 时间：2013-03-29T11:07:48.023
> 
> 标签：c++, wstring

我想“验证”一个 wstring 并删除不需要的字符。

这就是我想做的：

```
wstring wsInput=L"Some Text $$!$§";

wstring wsNew=L"";

for (int i=0;i<wsInput.size();i++)
{
    wstring wsChar=wsInput.CharacterAt(i);
    wsChar = ToValidWString(wsChar); // ToValidWString will return L"" if the character is not among the valid characters
    wsNew.append(wsChar); 
}

return wsNew; 
```

但是 wstring 没有这样的函数“.CharacterAt()”。我想这是有原因的，但无论如何我都需要它。

有人可以帮忙吗？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:09:57.277

您可以使用运算符`[]`。这将返回一个`wchar`，而不是字符串，但在我看来这将使您的代码更简单。所以为了让事情更清楚：

```
for (int i=0;i<wsInput.size();i++)
{
    wchar_t wc =wsInput[i]; // sorry for the name it comes from wchar ;)
    ... do stuff...
} 
```

编辑：要获得由字符串中第 i 个字符组成的 wstring，请使用`substr`：

```
for (int i=0;i<wsInput.size();i++)
{
    wstring ws = wsInput.substr(i, 1);
    ... do stuff...
} 
```

# ios - 将静态单元格与动作连接起来

> ID：15702038
> 
> 赞同：9
> 
> 时间：2013-03-29T11:07:50.623
> 
> 标签：ios, objective-c, storyboard

我想使用情节提要将静态单元与动作连接起来。问题是您无法将单元格与操作连接，因此我尝试了另一种方式。因此，在我的头文件中，我使用情节提要将此属性与静态单元格连接起来：

```
@property (nonatomic, strong) IBOutlet UITableViewCell *theStaticCell; 
```

和

```
 UITableViewCell *theCellClicked = [self.tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:1]];
if (theCellClicked == _theStaticCell) {
    NSLog(@"Static cell clicked");
} 
```

所以我想使用“更新”单元格，当你点击它时，上面的代码就会被执行。

![在此处输入图像描述](../Images/5b804889e47eebcb9c05959b08564830.png)

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-29T11:17:11.680

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    if (indexPath.section ==1 && indexPath.row == 0)
    {
        //Do what you want to do.
    }
} 
```

**或者**

```
-(void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath 
{
    // Cell will be deselected by following line.
    [self.tableView deselectRowAtIndexPath:indexPath animated:YES];

    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];
    UITableViewCell *staticCell = [tableView cellForRowAtIndexPath:[NSIndexPath indexPathForRow:0 inSection:1]];

    if (cell == staticCell)
    {
        //Do what you want to do.
    }
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T11:17:41.090

我认为您应该使用 TableView 委托方法，而不是将其与静态单元格连接

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
// Put your action logic here by using its index "indexPath.row".
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T11:29:42.373

```
#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if([tableView cellForRowAtIndexPath:indexPath] == self.theStaticCell){
        NSLog(@"Static cell clicked");
    }
} 
```

# php - 如何将文章存储在mysql数据库中

> ID：15702043
> 
> 赞同：5
> 
> 时间：2013-03-29T11:07:58.817
> 
> 标签：php, mysql

我需要存储我的网站用户提交的文章。

1.文章长度为100到200行。

2.文章会有html标签。例如：

```
"<br>" 
```

告诉我在 MYSQL 数据库中创建列时应该选择哪个“类型”，并告诉我“长度”。

我尝试了 VARCHAR 但它不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T11:12:21.393

使用 TEXT 或 MEDIUMTEXT 或 LONGTEXT 列类型

TEXT 列可存储 65,535 个字符 MEDIUMTEXT 可存储 16,777,215 个字符 LONGTEXT 可存储 4,294,967,295 个字符

请注意，如果字符是多字节字符（如 UTF-8），那么这些数字会更少。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T11:09:36.963

`TEXT`存储长文本时使用类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T11:13:29.287

与其让用户输入 HTML 文本，不如让他们使用 markdown 语法。类似于 SO 提供的东西。

您可以将它们存储在`TEXT`类型字段中，然后使用客户端脚本将它们解析为 HTML。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T11:13:08.713

你可以使用`TEXT`或`MEDIUMTEXT`或`LONGTEXT`

看到这个[http://dev.mysql.com/doc/refman/5.0/en/blob.html](http://dev.mysql.com/doc/refman/5.0/en/blob.html)

# ruby-on-rails - 在我的 Rails 应用程序中实现一个全局队列数据结构

> ID：15702054
> 
> 赞同：0
> 
> 时间：2013-03-29T11:09:00.513
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2, global-variables

我有一个 Ruby on Rails 应用程序，我需要在其中维护一个 id 队列。我尝试使用全局数组作为队列，但是如果我的应用程序的多个实例运行，则 Web 应用程序中的全局变量不再是全局的。那么如何维护应用程序范围的队列？

这是我的 ApplicationController 的外观：

```
class ApplicationController < ActionController::Base
  protect_from_forgery

  helper_method :update_queue, :get_next_free_agent
  $agent_queue = []
  def update_queue(agent)
    if agent.status == "AVAILABLE"
        if agent_queue.find_index(agent.reg_id) == nil
            $agent_queue.push(agent.reg_id)
        end
    else
        $agent_queue.delete(agent.reg_id)
    end
  end

  def get_next_free_agent
    return agent_queue.shift
  end
end 
```

这也不起作用，在阅读了关于全局变量如何成为坏主意之后，我也不想再使用它了。请提供替代解决方案。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:46:00.610

从远处看，您的问题似乎可以通过像 Resque 这样的消息队列系统来解决。

如果您不想走这条路，请将数组存储在键值存储中，该存储提供原子弹出并推送数组（如redis），这样您就不必担心只有一个进程访问数组

# ruby-on-rails - 花式网格问题导轨

> ID：15702057
> 
> 赞同：0
> 
> 时间：2013-03-29T11:09:08.693
> 
> 标签：ruby-on-rails

在宝石文件中

```
gem 'fancygrid', '2.0.1', :path => 'lib/fgrid' 
```

将源代码从[https://github.com/giniedp/fancygrid](https://github.com/giniedp/fancygrid)复制到 lib/fgrid

在控制器中：

```
 @contacts = current_user.contacts.where(:status => 0).page(params[:page]).per_page(15).search(params[:search])
fancygrid_for :contacts, :builder => ContactsGridBuilder, :persist => true do |g|       
  # specify attributes to display  
  # g.attributes :email_id, :name
  # specify the callback url for ajax loading
  g.ajax_url = contacts_path
  # finally call find to query the data
  g.find do |query|
    query.where("user_id = ?", current_user.id).order(:name)
  end 
```

得到错误

```
ActionView::Template::Error (Missing template fancygrid/fancygrid with {:handlers=>[:erb, :builder, :slim, :arb, :coffee], :formats=>[:html], :locale=>[:en, :en]}. Searched in:
* "/home/love/rails/odbf11/app/views"
* "/home/love/.rvm/gems/ruby-1.9.3-p194/gems/activeadmin-0.5.1/app/views"
* "/home/love/.rvm/gems/ruby-1.9.3-p194/gems/kaminari-0.14.1/app/views"
* "/home/love/.rvm/gems/ruby-1.9.3-p194/gems/devise_invitable-1.1.6/app/views"
* "/home/love/.rvm/gems/ruby-1.9.3-p194/gems/devise-2.2.3/app/views"
* "/home/love/.rvm/gems/ruby-1.9.3-p194/gems/maktoub-0.2.5/app/views"
* "/home/love/rails/odbf11/lib/fgrid/app/views"
):
  28: 
29: <span id="contact_list">
30: 
31: <%= fancygrid :contacts %>
32:     
33:     
34:   
lib/fgrid/lib/fancygrid/view/helper.rb:10:in `fancygrid'
app/views/contacts/index.html.erb:31:in `_app_views_contacts_index_html_erb__33025325_105720290'
app/controllers/contacts_controller.rb:27:in `block (2 levels) in index'
app/controllers/contacts_controller.rb:26:in `index'
config/initializers/quiet_assets.rb:7:in `call_with_quiet_assets' 
```

请建议我该怎么做

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:26:33.113

我已经解决了这个问题，

在gem文件中我需要添加haml

```
 gem 'haml' 
```

这解决了这个问题

# c# - 如何阅读这一小段 XML？

> ID：15702058
> 
> 赞同：1
> 
> 时间：2013-03-29T11:09:14.130
> 
> 标签：c#, xml, windows-phone-7

我一直卡在这个 XML 文件上。我的 XAML 中有 12 个 TextBlock，我想将每个节点放在相应的 TextBlock 中

```
<Producten>
  <Tariefeenheden>52</Tariefeenheden>
  <Product naam="Enkele reis">
     <Prijs korting="vol tarief" klasse="2">9.00</Prijs>
     <Prijs korting="reductie_20" klasse="2">7.20</Prijs>
     <Prijs korting="reductie_40" klasse="2">5.40</Prijs>
     <Prijs korting="vol tarief" klasse="1">15.30</Prijs>
     <Prijs korting="reductie_20" klasse="1">12.20</Prijs>
     <Prijs korting="reductie_40" klasse="1">9.20</Prijs>
  </Product>
  <Product naam="Dagretour">
     <Prijs korting="vol tarief" klasse="2">18.00</Prijs>
     <Prijs korting="reductie_20" klasse="2">14.40</Prijs>
     <Prijs korting="reductie_40" klasse="2">10.80</Prijs>
     <Prijs korting="vol tarief" klasse="1">30.60</Prijs>
     <Prijs korting="reductie_20" klasse="1">24.40</Prijs>
     <Prijs korting="reductie_40" klasse="1">18.40</Prijs>
  </Product>
</Producten> 
```

我怎样才能做到这一点？

亲切的问候，尼尔斯

**编辑：**我想获得 .. 的值。因此，例如“9.00”、“7,20”等。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:18:37.073

这样你就可以读取所有的字符串值`klasse`

```
XmlDocument xml = new XmlDocument();
xml.Load(YOUR XML FILE PATH);

XmlNodeList xnList = xml.SelectNodes("Producten/Product/Prijs");
List<string> values = new List<string>();

foreach (XmlNode xn in xnList)
{
    var result = xn.Attributes["klasse"].InnerText;
}

//textBlock1.Text = values[0];
//textBlock2.Text = values[1];
//textBlock3.Text = values[2]; 
```

**编辑：**如果您在**WindowPhone**中执行此操作，则可以使用`XDocument`. 这是代码：

```
var doc = System.Xml.Linq.XDocument.Load(YOUR XML FILE PATH);
List<string> values = new List<string>();
foreach (System.Xml.Linq.XElement item in doc.Descendants("Prijs"))
{
     values.Add(item.Attribute("klasse").Value);
}

//textBlock1.Text = values[0];
//textBlock2.Text = values[1];
//textBlock3.Text = values[2]; 
```

# c++ - 需要一个好的同步读写解决方案

> ID：15702064
> 
> 赞同：0
> 
> 时间：2013-03-29T11:09:43.643
> 
> 标签：c++, synchronization

当传入数据到达时，我有一个线程（WRITER）不断填充缓冲区（在我的例子中是一个向量）。而且我有另一个线程（阅读器）定期检查缓冲区的传入数据并在处理数据完成后清除缓冲区。一旦我看到一个建议改为使用两个缓冲区（A 和 B）的实现。WRITER 写入缓冲区 A，当读取数据的时间到了，READER 接管缓冲区 A，WRITER 开始读取 B ......并且这种翻转继续。

我用谷歌搜索了参考或示例代码，但找不到任何东西。你能给我推荐一个参考吗？另外，这是最好和最简单的方法吗？

谢谢你

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:33:27.323

最简单的解决方案是在 Boost 库的帮助下使用*同步队列。*

在 CodeProject 上有一篇关于这个的文章[，](http://www.codeproject.com/Articles/442452/Thread-Synchronization-Queue-with-Boost)在 Google 上有无数的例子。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:47:28.940

您可以找到许多实现同步队列的示例和提示：

[使用条件变量实现线程安全队列](http://www.justsoftwaresolutions.co.uk/threading/implementing-a-thread-safe-queue-using-condition-variables.html)

[C++11 并发教程 - 第 3 部分：高级锁定和条件变量](http://www.baptiste-wicht.com/2012/04/c11-concurrency-tutorial-advanced-locking-and-condition-variables/)

# c++ - Qt 应用程序中未定义的引用错误

> ID：15702071
> 
> 赞同：0
> 
> 时间：2013-03-29T11:10:08.243
> 
> 标签：c++, qt, ld, undefined-reference, vtable

我有一个由 CMake 驱动的库和示例应用程序。所以，有一个类，我在库中使用：

**源编辑器.h**

```
#ifndef SOURCEEDITOR_H
#define SOURCEEDITOR_H

#include <QWidget>
#include "novile_export.h"

namespace Novile
{

class SourceEditorPrivate;
class NOVILE_EXPORT SourceEditor : public QWidget
{
    Q_OBJECT
public:
    explicit SourceEditor(QWidget *parent = 0);
    ~SourceEditor();

private:
    SourceEditorPrivate * const d;

};

} // namespace Novile

#endif // SOURCEEDITOR_H 
```

**源编辑器.cpp**

```
#include <QtCore>
#include <QVBoxLayout>
#include <QWebView>
#include "novile_debug.h"
#include "sourceeditor.h"

namespace Novile
{

class SourceEditorPrivate
{
public:
    SourceEditorPrivate(SourceEditor *p = 0) :
        parent(p),
        aceView(new QWebView(p)),
        layout(new QVBoxLayout(p))
    {
        parent->setLayout(layout);
        layout->addWidget(aceView);
    }

    ~SourceEditorPrivate()
    {
    }

    void loadAceView()
    {
        aceView->load(QUrl("qrc:/ace.html"));
    }

private:
    SourceEditor *parent;
    QWebView *aceView;
    QVBoxLayout *layout;
};

SourceEditor::SourceEditor(QWidget *parent) :
    QWidget(parent),
    d(new SourceEditorPrivate(this))
{
    mDebug() << "Source Editor has been started";

    d->loadAceView();
}

SourceEditor::~SourceEditor()
{
}

} // namespace Novile 
```

和例子：

**主文件**

```
#include <QApplication>
#include "../src/sourceeditor.cpp"

int main(int argc, char *argv[])
{
    QApplication app(argc, argv);

    Novile::SourceEditor editor;
    editor.setGeometry(100, 50, 600, 300);
    editor.show();

    return app.exec();
} 
```

然后我收到很多`ld`错误：

```
CMakeFiles/example.dir/main.cpp.o: In function `Novile::SourceEditor::SourceEditor(QWidget*)':
../src/sourceeditor.cpp:39: undefined reference to `vtable for Novile::SourceEditor'
../src/sourceeditor.cpp:39: undefined reference to `vtable for Novile::SourceEditor'
CMakeFiles/example.dir/main.cpp.o: In function `Novile::SourceEditor::~SourceEditor()':
../src/sourceeditor.cpp:46: undefined reference to `vtable for Novile::SourceEditor'
../src/sourceeditor.cpp:46: undefined reference to `vtable for Novile::SourceEditor'
collect2: error: ld returned 1 exit status 
```

该文件 (main.cpp) 代表示例应用程序，它应该测试库的核心功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:24:08.117

问题很可能是由于您正在`#include`输入`.cpp`文件：

```
#include "../src/sourceeditor.cpp" 
```

你不应该那样做，你也不需要它。只需包含相应的标题`sourceeditor.h`，如果需要，还包含`novile_debug.h`标题。

然后，确保两者`main.cpp`和`sourceeditor.cpp`都是您项目的一部分，以便编译器将处理这两个翻译单元，并且链接器最终会将相应的目标代码合并到您的程序的可执行文件中。

# java - 去掉 toString 中的某些逗号等

> ID：15702078
> 
> 赞同：0
> 
> 时间：2013-03-29T11:10:29.740
> 
> 标签：java, string, arraylist, tostring

这是我目前的 toString 方法

```
StringBuilder string = new StringBuilder();

    for (int i = 0; i < knowledgeD.size(); i++ ){

            w = knowledgeD.get(i).get(0);
            y = knowledgeD.get(i).get(1);

        string.append("{true@" +  w + ","+" " +"false@"  + w.complement() + "}" + "@" + y);
           string.append("" +","+" ");
         //{{true@1/4, false@3/4}@1/2, {true@2/3, false@1/3}@3/16, {true@4/5, false@1/5}@5/16}    
         //{{true@1/4, false@3/4}@1/2, {true@2/3, false@1/3}@3/16, {true@4/5, false@1/5}@5/16, }

    }
    String s = string.toString();
    String g = "{" + s + "}";
    return g; 
```

这将返回 g，它是 string.append 下的第二条评论，我需要它来返回上面的评论，但我终生无法弄清楚如何摆脱对最后一个字符串的评论而只是拥有一个括号代替，因为这个 Arraylist 是可更新的，所以字符串的最后一部分，即

```
{true@4/5, false@1/5}@5/16, } 
```

也被添加了它需要有一个逗号并遵循 toString 的模式。

我不知道如何在最后一个字符串部分去掉这个逗号，任何人都可以解释一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:13:39.410

不是在每次迭代*之后*附加逗号，而是在每次迭代*之前附加，**除了第一个*：

```
for (int i = 0; i < knowledgeD.size(); i++ ){
       if (i != 0) {
           string.append(", ");
       }
       w = knowledgeD.get(i).get(0);
       y = knowledgeD.get(i).get(1);
       string.append("{true@" +  w + ","+" " +"false@"  + w.complement() + "}" + "@" + y);
} 
```

此外，正如其他人指出的那样

```
string.append("{true@" +  w + ... 
```

最好写成

```
string.append("{true@").append(w).append(... 
```

# android - 无法从 Android 中的 xml 获取 ImageView

> ID：15702088
> 
> 赞同：-1
> 
> 时间：2013-03-29T11:11:03.330
> 
> 标签：android, android-layout, imageview

我有小问题

我在 java 文件中编写代码，在 oncreate() 方法下我将 contentview 设置为

```
setContentView(R.layout.main) 
```

但在此我需要从另一个 xml 文件名 listview 访问一个 imageview

像这样

```
ImageView img = (ImageView)findViewbyid(R.id.img) 
```

但是这个 img id 不存在于 main.xml 它存在于 listview.xml 那么我如何访问它。

请给出解决方案.....谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:15:34.293

对 liveview.xml 进行膨胀，然后找到具有膨胀布局的视图。

# ios - 我的绑定出现“本机类尚未加载”错误

> ID：15702089
> 
> 赞同：10
> 
> 时间：2013-03-29T11:11:04.243
> 
> 标签：ios, binding, xamarin.ios, gpuimage

我正在尝试为[GPUImage](https://github.com/BradLarson/GPUImage/blob/master/framework/Source)项目创建绑定，但绑定的类都不起作用。例如，GPUImageView：

在 ObjC 中，它是这样声明的（[git 中的标头](https://github.com/BradLarson/GPUImage/blob/master/framework/Source/GPUImageView.h)）：

```
@interface GPUImageView : UIView <GPUImageInput>
//then some fields, properties and methods I'm not interested in 
```

所以，我的 ApiDefinition.cs 看起来像这样：

```
namespace GPUImage
{
    [BaseType (typeof(NSObject))]
    [Model]
    interface GPUImageInput {
    }

    [BaseType (typeof(UIView))]
    interface GPUImageView : GPUImageInput {
        [Export ("initWithFrame:")]
        IntPtr Constructor(RectangleF frame);
    }
} 
```

链接属性：

```
[assembly: LinkWith ("libGPUImage.a", LinkTarget.Simulator | LinkTarget.ArmV7 | LinkTarget.ArmV7s, ForceLoad = true, Frameworks = "CoreMedia CoreVideo OpenGLES QuartzCore AVFoundation UIKit Foundation")] 
```

它可以构建并创建 dll。但是当我尝试在我的项目中使用它时：

```
var iv = new GPUImageView (new RectangleF (0, 0, 100, 100)); 
```

抛出异常：

> 无法创建“GPUImage.GPUImageView”类型的本机实例：尚未加载本机类。可以通过将 Class.ThrowOnInitFailure 设置为 false 来忽略此条件。

[堆栈跟踪](http://pastie.org/7160314)

之后`MonoTouch.ObjCRuntime.Class.ThrowOnInitFailure == false` `iv`被创建，但无法使用（例如`AddSubview(iv)`什么都不显示）。

我想 GPUImage.a 文件有问题，但我不知道如何以任何方式对其进行测试。

[这是 7z](http://rghost.net/44867526)，其中包含 2 个项目： TryingBindings -- 绑定本身；TryingGPUImage -- 正在使用的绑定；

提前致谢。

PS[这是xamarin论坛上这篇文章的链接。](http://forums.xamarin.com/discussion/2749/the-native-class-hasnt-been-loading-error-with-my-bindings)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T08:18:19.440

感谢 Rolf Bjarne Kvinge

> 有两个问题：
> 
> 1）带有LinkWith属性的文件（libGPUImage.linkwith.cs）没有被编译。只需右键单击 TryingBindings 项目，添加，添加文件并选择它。
> 
> 2）本机库不包含i386（模拟器）的代码，只有arm（设备）。如果您自己构建本机库，您可以创建一个包含所有架构代码的通用库，或者您可以使用多个本机库，每个库都支持一组不同的架构，并且每个本机库只具有一个 LinkWith 属性.

[错误 11497](https://bugzilla.xamarin.com/show_bug.cgi?id=11497)

# css - 溢出-y：滚动不适用于 iframe

> ID：15702095
> 
> 赞同：0
> 
> 时间：2013-03-29T11:11:31.297
> 
> 标签：css, internet-explorer, iframe

我有一个`iframe`使用 CSS 的垂直滚动条。

我正在使用以下 CSS：

```
.subject iframe {
    border:medium none;
    height: 40px !important;
    overflow-y: scroll;
    -ms-overflow-y: scroll;
} 
```

该代码适用于 Firefox 和 IE8，但不适用于 IE9 和 Chrome。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:42:19.230

我不知道你的问题，但这在 IE9 上运行良好。`height`设置为 40。和垂直`scroll` 它是相同的代码。没有`-ms-overflow-y`

[http://jsfiddle.net/btevfik/WY8DP/](http://jsfiddle.net/btevfik/WY8DP/)

# objective-c - 为什么单个 UIBarButton 不能同时用于 Trigger segue 和 Sent Action？

> ID：15702098
> 
> 赞同：0
> 
> 时间：2013-03-29T11:11:45.730
> 
> 标签：objective-c, cocoa-touch

我在几分钟前发布了一个问题。

[将 UIBarButtonItem 的操作发送到 IBAction 未触发](https://stackoverflow.com/questions/15699478/sent-action-of-uibarbuttonitem-to-ibaction-not-fired)

在那个问题中，当我在 Connection Inspector 中从 UIBarButton 中删除 Trigger segue 时，它​​非常适用于 Sent Action。为什么会这样？

可能存在许多问题场景，其中单个条形按钮应该适用于两者。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:06:51.053

当您需要将动作与转场结合时，请仅使用该动作。在 IB 中创建 segue，但不要将其与按钮连接，而是与视图控制器连接。（单击背景中的某个位置，而不是按钮等。）然后从您与按钮连接的 IBAction 方法以编程方式执行 segue。

# javascript - DIV 没有得到鼠标事件

> ID：15702100
> 
> 赞同：0
> 
> 时间：2013-03-29T11:12:02.623
> 
> 标签：javascript, css, html, mouseevent

我在 z-index 顶部有一个不可见的 div，我想将其用作 clicktag 按钮。但它没有得到我尝试与之关联的任何鼠标事件。它也不显示用 css 指定的手形指针。

这是一个例子： http: [//www.miguelrivero.net/test/MS-20_mini/index.html](http://www.miguelrivero.net/test/MS-20_mini/index.html)

如您所见，我正在使用这个简单的代码（只关注console.log）：

```
function bgExitHandler(e) {
    Enabler.exit("Background Exit");
    console.log("click");
}

function onMouseHandler(e) {
    console.log("click");
}

document.getElementById("bg-exit").addEventListener("click", bgExitHandler, false);
document.getElementById("bg-exit").addEventListener("onmouseover", onMouseHandler, false); 
```

这是CSS：

```
#bg-exit {
    position: absolute;
    width: 100%;
    height: 100%;
    top: 0px;
    left: 0px;
    cursor: pointer;
    opacity: 0;
} 
```

请问这个有什么亮点吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:15:52.373

如果您正在使用`addEventListener`，则事件的名称只是`mouseover`，而不是`onmouseover`：

IE

```
document.getElementById("bg-exit").addEventListener("mouseover", onMouseHandler, false); 
```

# java - GregorianCalendar 在 Java 中返回错误的 DAY_OF_WEEK

> ID：15702101
> 
> 赞同：3
> 
> 时间：2013-03-29T11:12:16.877
> 
> 标签：java, calendar, dayofweek, gregorian-calendar, weekday

这段代码：

```
Calendar calendar;
calendar = GregorianCalendar.getInstance();
calendar.set(year, month, day);
week_day = calendar.get(Calendar.DAY_OF_WEEK); 
```

返回错误的值。

例如

> *   年= **2013**，月= **3**，日= **31**

返回相同的值

> *   年= **2013**，月= **4**，日= **1**。

我怎样才能正确地做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T11:17:29.273

在`Java`，月从 开始`0`。

`Month 3 day 31`是`April 31`, 那不存在, 那么它会被移到`May`1,

`Month 4 day 1`即`May 1`，与上述同一天。

# django - 如何在模板中访问此查询集中的元素？

> ID：15702106
> 
> 赞同：1
> 
> 时间：2013-03-29T11:12:27.310
> 
> 标签：django, templates, distinct, django-queryset

这是查询集：

```
researches = Graph.objects.filter(subject=subject_object).exclude(type='infografik').values_list('name', flat=True).distinct() 
```

当我做：

```
{% for research in researches %} 
```

在我的模板中，中间的代码执行了正确的次数，但例如`{{ research.name }}`不起作用。

如何访问对象的属性？

谢谢。

编辑：

图模型

```
name = models.CharField(max_length=100)
research = models.ForeignKey('Research')
explanation = models.TextField(max_length=1000)
path_to_file = models.CharField(max_length=100)
type = models.CharField(max_length=30, choices=type, null=True, blank=True)
subject = models.ManyToManyField(Subject)
thumbnail = models.ImageField(upload_to='thumbnails/', null=True, blank=True)
slug = models.SlugField(max_length=120, unique=True) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T11:16:55.257

从[文档](https://docs.djangoproject.com/en/dev/ref/models/querysets/#values-list)：

> 每个元组包含传递给 values_list() 的相应字段的值

所以要打印研究名称，只需：

```
{% for research in researches %}
{{ research  }}
{% endfor %} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:28:38.653

因为您要求的是一个平面的值列表，所以没有要访问的属性。如果您想访问所有属性，请使用此查询，该查询`researches = Graph.objects.filter(subject=subject_object).exclude(type='infografik').distinct()`将返回一个可以迭代的查询集，或者此查询将返回一个`researches = Graph.objects.filter(subject=subject_object).exclude(type='infografik').values().distinct()`字典列表。在 django 的模板语言中，您可以像这样访问两者的属性：

```
{% for research in researches %}
    {{ research.name }}
    {{ research.author }}
    ...
{% endfor %} 
```

* * *

我知道获得不同对象的唯一方法是使用原始 sql：

```
researches = Graph.objects.raw('SELECT * FROM appname_graph WHERE subject_id = %s AND type <> %s GROUP BY name', [subject_object.id, 'infografik']) 
```

# c# - DateTime.ParseExact 的更快替代方案

> ID：15702123
> 
> 赞同：10
> 
> 时间：2013-03-29T11:13:29.523
> 
> 标签：c#, parsing, datetime

我将一个字符串解析为 DateTime 数百万次：

```
public static CultureInfo ci = CultureInfo.InvariantCulture;
while (!reader.EndOfStream)
{      
      line = reader.ReadLine();
      string[] fields = line.Split(' ');
      DateTime newDT = DateTime.ParseExact(fields[0], "yyyyMMddTHHmmssfff", ci);
} 
```

我的分析器强调 ParseExact 是花费大量时间的一部分。是否有任何其他方法/方法可以将字符串解析为更快的 DateTime？

跟进1：

1）我试过这个 - 但速度是一样的

```
bool OK = DateTime.TryParseExact(fields[0], "yyyyMMddTHHmmssfff", null, System.Globalization.DateTimeStyles.None,out DT); 
```

2)

我尝试编写自己的解析器 - 但这也很慢：

```
public static DateTime fastParse(ref string s)
{
           return new DateTime(int.Parse(s.Substring(0,4)), int.Parse(s.Substring(4,2)),int.Parse(s.Substring(6,2)), int.Parse(s.Substring(9,2)),int.Parse(s.Substring(11,2)),int.Parse(s.Substring(13,2)),int.Parse(s.Substring(15, 3)));
} 
```

跟进2

我尝试了 Master117 存储值的建议-再次没有更快-也许问题出在构造上？

```
 public class fastParseData
        {
            int year;
            int mon;
            int day;
            int hour;
            int min; 
            string previousSlice = "";

            public DateTime fastParse(ref string s)
            {
                if (previousSlice != s.Substring(0, 12))
                {
                     year=int.Parse(s.Substring(0,4));
                     mon=int.Parse(s.Substring(4,2));
                     day=int.Parse(s.Substring(6,2));
                     hour= int.Parse(s.Substring(9,2));
                     min = int.Parse(s.Substring(11,2));
                     previousSlice = s.Substring(0, 12);
                }

                return new DateTime(year, mon, day, hour,min, int.Parse(s.Substring(13, 2)), int.Parse(s.Substring(15, 3)));
            }

        } 
```

跟进3

```
 public class fastParseData
                {
                    int year;
                    int mon;
                    int day;
                    int hour;
                    int min; 
                    string previousSlice = "";
                    DateTime previousDT;

                    public DateTime fastParse(ref string s)
                    {
                        if (previousSlice != s.Substring(0, 12))
                        {
                             year=int.Parse(s.Substring(0,4));
                             mon=int.Parse(s.Substring(4,2));
                             day=int.Parse(s.Substring(6,2));
                             hour= int.Parse(s.Substring(9,2));
                             min = int.Parse(s.Substring(11,2));
                             previousSlice = s.Substring(0, 12);
                            previousDT = new DateTime(year, mon, day, hour,min,0,0);
                        }
                        return previousDT.AddMilliseconds((int.Parse(s.Substring(13, 2))*1000)+int.Parse(s.Substring(15, 3)));
                    }

                } 
```

跟进4

从我的分析器看来，症结似乎是

```
int.Parse(s.Substring(13, 2)) 
```

Parse 位比子字符串更昂贵。

我试过了

```
int.TryParse(s.Substring(13, 2),NumberStyles.None,ci, out secs)
Convert.ToInt32(s.Substring(13, 2)); 
```

但同样 - 速度没有差异。

有没有更快的方法来解析 int？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-06-04T14:42:37.697

拆分字符串的想法在正确的轨道上，但是子字符串很慢。每当我拆分字符串时，我都会使用字符访问器。yyyyMMddTHHmmssfff 免责声明：T

```
public class DateParser1
{
    private static System.String DateFormat="yyMMddTHHmmssfff";

    public static System.DateTime GetDate(System.String SourceString, int Offset=0) // Offset eliminates need for substring
    {
        int Year=0;
        int Month=0;
        int Day=0;
        int Hour=0;
        int Minute=0;
        int Second=0;
        int HourOffset=0;
        int MS=0;
        if(SourceString.Length+Offset<DateFormat.Length) throw new System.Exception(System.String.Format("Date Too Short {0} For {0}",SourceString.Substring(Offset),DateFormat));
        for(int i=0;i<DateFormat.Length;i++)
        {
            System.Char c=SourceString[Offset+i];
            switch(DateFormat[i])
            {
                  case 'y':
                      Year=Year*10+(c-'0');
                      break;
                  case 'M':
                      Month=Month*10+(c-'0');
                      break;
                  case 'd':
                      Day=Day*10+(c-'0');
                      break;
                  case 'T':
                      if(c=='p'||c=='P')
                           HourOffset=12;
                      break;
                  case 'h':
                      Hour=Hour*10+(c-'0');
                      if(Hour==12) Hour=0;
                      break;
                  case 'H':

                      Hour=Hour*10+(c-'0');
                      HourOffset=0;
                      break;
                  case 'm':
                      Minute=Minute*10+(c-'0');
                      break;
                  case 's':
                      Second=Second*10+(c-'0');
                      break;
                  case 'f':
                      MS=MS*10+(c-'0');
                      break;
            }

        }
        if(Year>30) //Change For Your Business Rules
        {
               Year+=1900;
        }
        else
        {
               Year+=2000;
        }
        try
        {
            return new System.DateTime(Year,Month,Day,Hour+HourOffset,Minute,Second,MS);
        }
        catch(System.Exception)
        {
            throw new System.Exception(System.String.Format("Error In Date: {0}/{0}/{0} {0}:{0}:{0}.{0} - {0} {0}",Year,Month,Day,Hour+HourOffset,Minute,Second,MS,DateFormat,SourceString.SubString(Offset,DateFormat.Length)));
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T11:20:56.897

您可以编写自己的解析算法，首先将字符串拆分为数组/列表/任何内容，然后使用日期时间构造函数创建日期时间，

```
DateTime newDT = DateTime(Int32, Int32, Int32, Int32, Int32, Int32, Int32); 
```

由于年/月/日的变化不会那么快，因此您可以对它们进行缓冲，因此字符串操作的数量较少。

[http://msdn.microsoft.com/de-de/library/vstudio/system.datetime.aspx](http://msdn.microsoft.com/de-de/library/vstudio/system.datetime.aspx)

一种简单的方法是存储前 8 个字母，例如 string a = fields[0].slice(0,8) （目前不知道正确的操作），现在您解析它们并制作整数，但是在下一次运行中，您再次对它们进行切片并测试 a = new a，如果是，则使用上次的整数而不是再次解析它们，自然为此您需要存储 a 和整数

因此，由于现在问题似乎是构造时间，您应该尝试添加经过的时间，通过使用 addSecond 等检查您的整数是否比以前更高/更低，或者您可以使用您的构造并将值设置为您的新时间.

尝试这个：

```
 public class fastParseData
            {
                int year;
                int mon;
                int day;
                int hour;
                int min; 
                string previousSlice = "";
                DateTime previousDT;

                public DateTime fastParse(ref string s)
                {
                    if (previousSlice != s.Substring(0, 12))
                    {
                         year=int.Parse(s.Substring(0,4));
                         mon=int.Parse(s.Substring(4,2));
                         day=int.Parse(s.Substring(6,2));
                         hour= int.Parse(s.Substring(9,2));
                         min = int.Parse(s.Substring(11,2));
                         previousSlice = s.Substring(0, 12);
                         previousDT = new DateTime(year, mon, day, hour,min,0,0);
                    }
                    return previousDT.ParseExact(year, mon, day, hour,min, int.Parse(s.Substring(13, 2)), int.Parse(s.Substring(15, 3));
                }

            } 
```

这样，您只有创建一个 DT，然后将时间设置为新的

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-04-11T15:50:20.417

This is the code used to benchmark [James's code](https://stackoverflow.com/a/16920747/289992) against the framework code (in reference to my comment there). I run this in Release mode, .Net 4.5.2, 32bit console

```
static void Main(string[] args)
{
    const string date = "2015-04-11T12:45:59";
    const string format = "yyyy-MM-ddTHH:mm:ss";

    var reference = FrameworkParse(date, format);
    var method1 = JamesBarrettParse(date, format);

    if (reference != method1)
    {
        throw new Exception(string.Format("reference date {0} does not match SO date {1}",reference.ToString("s"),method1.ToString("s")));
    }

    const int iterations = 1000000;
    var sw = new Stopwatch();

    //FRAMEWORK PARSE
    Console.Write("Starting framework parse for {0} iterations...", iterations);
    sw.Start();
    DateTime dt;
    for (var i = 0; i < iterations; i++)
    {
        dt = FrameworkParse(date, format);
        if (dt.Minute != 45)
        {
            Console.WriteLine("duh");
        }
    }
    sw.Stop();
    Console.WriteLine("DONE in {0} millis",sw.ElapsedMilliseconds.ToString("F2",CultureInfo.InvariantCulture));

    //James Barrett parse
    Console.Write("Starting JB parse for {0} iterations...", iterations);
    sw.Restart();
    for (var i = 0; i < iterations; i++)
    {
        dt = JamesBarrettParse(date, format);
        if (dt.Minute != 45)
        {
            Console.WriteLine("duh");
        }
    }
    sw.Stop();
    Console.WriteLine("DONE in {0} millis",sw.ElapsedMilliseconds.ToString("F2",CultureInfo.InvariantCulture));

    Console.Write("press any key to exit");
    Console.ReadKey();
}

private static DateTime FrameworkParse(string s, string format, CultureInfo info = null)
{
    var time = DateTime.ParseExact(s, format,
        info ?? CultureInfo.InvariantCulture,
        DateTimeStyles.AdjustToUniversal | DateTimeStyles.AssumeUniversal);
    return time;
} 
```

Output is

> Starting framework parse for 1000000 iterations...DONE in 2058.00 millis
> Starting JB parse for 1000000 iterations...DONE in 324.00 millis
> press any key to exit

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-11-08T14:07:07.647

不确定这是否会更快，但是您可以将日期字符串转换为长字符串，然后像这样算术地将其拆分：

```
string dateStr = "20131108134701234"; //yyyyMMddHHmmssfff
long dateLong = long.Parse(dateStr);

int f = (int) (dateLong % 1000);
int s = (int) ((dateLong % 100000 - f) / 1000);
int mi = (int) ((dateLong % 10000000 - s - f) / 100000);
int h = (int) ((dateLong % 1000000000 - mi - s - f) / 10000000);
int d = (int) ((dateLong % 100000000000 - h - mi - s - f) / 1000000000);
int mo = (int) ((dateLong % 10000000000000 - d - h - mi - s - f) / 100000000000);
int y = (int) ((dateLong % 100000000000000000 - mo - d - h - mi - s - f) / 10000000000000);

DateTime dateDT = new DateTime(y, mo, d, h, mi, s, f); 
```

（天真，未优化的实现）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-01-30T05:51:23.077

类似于詹姆斯巴雷特的回复，但我认为更快，因为它更直接：

假设您有一个格式为 yyMMdd 的日期。

我发现转换它的最快方法是：

```
var d = new DateTime(
(s[0] - '0') * 10 + s[1] - '0' + 2000, 
(s[2] - '0') * 10 + s[3] - '0', 
(s[4] - '0') * 10 + s[5] - '0') 
```

只需根据您选择的日期格式选择索引。如果您需要速度，您可能不介意函数的“非通用”方式。

此方法大约需要以下 10% 的时间：

```
var d = DateTime.ParseExact(s, "yyMMdd", System.Globalization.CultureInfo.InvariantCulture); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-29T15:00:56.223

这可能是使用并行化的好地方。Parallel.ForEach 可能是一个很好的用途，但您可能想测试其他进行并行化的方法

```
private static IEnumerable<string> GetLines(TextReader reader)
{
    while (!reader.EndOfStream)
    {
         yield return reader.ReadLine();
    }
}

private static CultureInfo ci = CultureInfo.InvariantCulture;

public static ConcurrentBag ProcessData(TextReader reader)
{
    ConcurrentBag <DateTime> results = new ConcurrentBag <DateTime>();
    char[] seperators = {' '};

    Parallel.ForEach(GetLines(reader), line =>
    {
        //We only need the first field so limit the split to 2
        string[] fields = line.Split(seperators, 2);
        results.Enqueue(DateTime.ParseExact(fields[0], "yyyyMMddTHHmmssfff", ci));
    });

    return results
} 
```

这样做的缺点是您的顺序松散，如果这对您很重要，那么有一个版本 Parallel.ForEach[将从 IEnumerable 传入索引](http://msdn.microsoft.com/en-us/library/dd783359.aspx)。您需要将行号与日期一起存储（可能是 a`ConcurrentDictionary<long,DateTime>`或将 a 存储`Tuple<long,DateTime>`在包中），然后稍后对数据进行排序。

# android - 当我从 Apple 和 Android App Store 中“删除”付费应用程序时会发生什么？

> ID：15702127
> 
> 赞同：4
> 
> 时间：2013-03-29T11:13:47.147
> 
> 标签：android, iphone, app-store, google-play, google-play-services

假设我在 iTunes Store 和 Google Play Store 中有两套应用程序，已获批准且目前正在销售：一个叫做 Foo Free，另一个叫做 Foo Paid。

Foo Free 是一个免费的应用程序，适用于 iOS 和 Android。Foo Paid 是同一个应用程序，只是它比免费版本具有更多的功能，并且成本为 5 美元。

出于慷慨，我决定从两家商店逐步淘汰 Foo Paid，并在 Foo Free 中提供与 Foo Paid 相同的功能，从现在开始，它成为唯一可用的 Foo 应用程序。

所以，问题：

*   如何从每个商店中删除 Foo 支付？我知道我应该在我的 iTunes Connect 中取消选择所有可用的国家/地区，并且这些应用程序将停止销售。对 Google Play 商店采取的等效措施是什么？

*   一旦我从每个商店中删除付费应用程序，付费应用程序的用户会发生什么？应用程序会从他们的设备中消失吗？或者他们只是保留应用程序而不再获得任何更新？Apple App Store 和 Google Play 商店在这方面有什么区别吗？

*   对于每家商店，有没有办法让这种过渡“优雅”？即：我可以让购买了 Foo Paid 的用户自动过渡到 Foo Free，而无需手动下载 Foo Free 吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:21:36.087

> 如何从每个商店中删除 Foo 支付？我知道我应该在我的 iTunes Connect 中取消选择所有可用的国家/地区，并且这些应用程序将停止销售。对 Google Play 商店采取的等效措施是什么？

在 Android 上，您只需从控制台取消发布该应用程序。该应用将从 Playstore 中消失

> 一旦我从每个商店中删除付费应用程序，付费应用程序的用户会发生什么？应用程序会从他们的设备中消失吗？或者他们只是保留应用程序而不再获得任何更新？Apple App Store 和 Google Play 商店在这方面有什么区别吗？

不，该应用不会从他们的设备中删除，但永远不会再次更新。从 AppStore 到 Playstore 没有区别

> 对于每家商店，有没有办法让这种过渡“优雅”？即：我可以让购买了 Foo Paid 的用户自动过渡到 Foo Free，而无需手动下载 Foo Free 吗？

不，不同的捆绑包/包意味着 2 个不同的应用程序。您可以对付费版本进行更新（在删除之前）以将用户重定向到免费版本（商店链接）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T11:24:18.517

你为什么不反过来做呢？逐步淘汰免费版本，给它一个最终更新，这只是将应用程序剥离成一条解释您的情况的消息和一个带有指向付费版本链接的按钮，这样他们就可以安装那个。

只需将付费更新为免费。

Like this, your paying customers have the upper hand of at least not having to do anything for it, while your free users will probably not mind to do a download to get more options they normally would have to pay for.

# c# - ExecuteNonQuery() 返回意外的受影响的行数 C#

> ID：15702131
> 
> 赞同：2
> 
> 时间：2013-03-29T11:13:59.647
> 
> 标签：c#, sql, sql-server

这是我的代码

```
 // SqlCommand query = new SqlCommand("INSERT INTO devis (idProposition, identreprise, tauxHoraire, fraisGenerauxMO, fraisGenerauxPiece, beneficeEtAleas, idStatut, prixUnitaireVenteMO ) VALUES(@idproposition,  @identreprise, @tauxHoraire, @fraisGenerauxMO, @fraisGenerauxPiece, @beneficeEtAleas, 1, @prixUnitaireVenteMO) ", Tools.GetConnection());
     SqlCommand query = new SqlCommand("INSERT INTO devis (idProposition, identreprise, tauxHoraire, fraisGenerauxMO, fraisGenerauxPiece, beneficeEtAleas, idStatut, prixUnitaireVenteMO, alerteEntrepriseEnvoyee,fraisDeplacement ) VALUES(1051,  85, 20, 2, 2, 2.2, 1, 88,0,-1) ", Tools.GetConnection());

    //query.Parameters.AddWithValue("idproposition", this.ID);
    //query.Parameters.AddWithValue("identreprise", competitor.ID);
    //query.Parameters.AddWithValue("tauxHoraire", competitor.CoefTauxHoraire);
    //query.Parameters.AddWithValue("fraisGenerauxMO", competitor.CoefFraisGenerauxMO);
    //query.Parameters.AddWithValue("fraisGenerauxPiece", competitor.CoefFraisGenerauxPiece);
    //query.Parameters.AddWithValue("beneficeEtAleas", competitor.CoefBeneficeEtAleas);
    //query.Parameters.AddWithValue("prixUnitaireVenteMO", Math.Round(competitor.CoefTauxHoraire * competitor.CoefFraisGenerauxMO * competitor.CoefBeneficeEtAleas, 2));
 bool insertOK = (query.ExecuteNonQuery() == 1);
 if (insertOK)
 {
    // DO SOMETHING
 } 
```

`insertOk`为假，但在数据库中插入的行包含我指定的所有信息

我手动重建查询以查看问题是否来自查询。参数，它再次无错误地插入数据库但 insertOk 仍然是错误的！我什至添加了另外两个不应该为空但活动在两种情况下相同的字段

有任何想法吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-29T11:18:59.403

`ExecuteNonQuery`它声称要返回`The number of rows affected.`。这是不正确的，因为客户端无法知道受影响的行数。文档错误地假设引擎将报告受影响的行数，但这取决于会话[`SET NOCOUNT`](http://msdn.microsoft.com/en-us/library/ms189837.aspx)状态。不要编写假定 NOCOUNT 始终打开的代码。如果您需要知道受影响的行数，请使用该[`OUTPUT`子句](http://msdn.microsoft.com/en-us/library/ms177564.aspx)。依赖`@@ROWCOUNT`或`SET NOCOUNT`状态会受到许多极端情况的影响，其中从一个或另一个角度来看，值是不正确的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T11:16:56.003

对于 UPDATE、INSERT 和 DELETE 语句，返回值是受命令影响的行数。

当正在插入或更新的表上存在触发器时，返回值包括受插入或更新操作影响的行数以及受一个或多个触发器影响的行数。对于所有其他类型的语句，返回值为 -1。如果发生回滚，则返回值也是 -1。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T11:20:51.270

[`ExecuteNonQuery`](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.executenonquery.aspx)方法返回[`System.Int32`](http://msdn.microsoft.com/en-us/library/system.int32.aspx)

> 针对连接执行 Transact-SQL 语句并返回受影响的行数。

```
Return Value
Type: System.Int32
The number of rows affected. 
```

既然你的`query.ExecuteNonQuery()`回报`2`，那就太明显的`2 == 1`回报了`false`。

您的查询将是；

```
bool insertOK = (2 == 1); 
```

[`DEMO`](http://ideone.com/3W5Uzy).

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T11:33:45.347

尝试使用`SqlDataAdapter` 这样的：

```
SqlDataAdapter Adabter = new SqlDataAdapter();
 Adabter.InsertCommand = new SqlCommand("INSERT INTO devis values(@idProposition, @identreprise), Tools.GetConnection());

 Adabter.InsertCommand.Parameters.Add("@idproposition",SqlDbType.Int).Value = yorID;
 Adabter.InsertCommand.Parameters.Add("@identreprise", SqlDbType.Int).Value = yorID;

 Tools.OpenConnection();
 int result = Adabter.InsertCommand.ExecuteNonQuery();
 Tools.CloseConnection();

if( result  > 0 )
{
                MessageBox.Show("Information Added");
}else
{
                  MessageBox.Show("Error");
} 
```

# authentication - 为什么 qtnetworkaccessmanager 不去 authenticationRequired

> ID：15702133
> 
> 赞同：1
> 
> 时间：2013-03-29T11:14:13.213
> 
> 标签：authentication, qnetworkaccessmanager, owncloud

我正在创建一个应用程序，该应用程序提到连接到 owncloud 服务器上的一个实例，但我找不到它为什么不连接到服务器。而不是回复我到登录屏幕，我得到了 html 代码为了它

这是负责连接的代码

```
//the network request and reply
          QNetworkAccessManager * manager = new QNetworkAccessManager();
          QUrl url (url1);
          manager->get(QNetworkRequest(url));
          connect(manager, SIGNAL(authenticationRequired(QNetworkReply*,QAuthenticator*)),
                      SLOT(provideAuthenication(QNetworkReply*,QAuthenticator*)));
          connect(manager, SIGNAL(finished(QNetworkReply *)),
                  this, SLOT(result(QNetworkReply *))); 
```

回复代码

```
void Login::result(QNetworkReply *reply)
{
    reply->deleteLater();

     if(reply->error() == QNetworkReply::NoError) {
         // Get the http status code
         int v = reply->attribute(QNetworkRequest::HttpStatusCodeAttribute).toInt();
         if (v >= 200 && v < 300) // Success
         {
             qDebug()<<"Here we got the final reply";
             QString replyText = reply->readAll();
             qDebug()<<replyText;
         }
         else if (v >= 300 && v < 400) // Redirection
         {
             qDebug()<<"Get the redirection url";
             QUrl newUrl = reply->attribute(QNetworkRequest::RedirectionTargetAttribute).toUrl();
             // Because the redirection url can be relative,
             // we have to use the previous one to resolve it
             newUrl = reply->url().resolved(newUrl);

             QNetworkAccessManager *manager = reply->manager();
             QNetworkRequest redirection(newUrl);
             QNetworkReply *newReply = manager->get(redirection);
             QString replyText = newReply->readAll();
             qDebug()<<replyText;
             return; // to keep the manager for the next request
         }
     }
     else
     {
         // Error
         qDebug()<<reply->errorString();
     }

     reply->manager()->deleteLater();
 } 
```

你能帮我弄清楚为什么我得到登录屏幕而不是身份验证吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-19T15:54:59.853

尝试在调用`connect()`之前调用，`manager->get()`否则当触发需要身份验证的信号时，可能没有任何插槽可以调用来处理该信号。

试试这个：

```
QNetworkAccessManager * manager = new QNetworkAccessManager();
QUrl url (url1);
connect(manager, SIGNAL(authenticationRequired(QNetworkReply*,QAuthenticator*)),
    SLOT(provideAuthenication(QNetworkReply*,QAuthenticator*)));
connect(manager, SIGNAL(finished(QNetworkReply *)),
    this, SLOT(result(QNetworkReply *)));
manager->get(QNetworkRequest(url)); 
```

# iphone - 如何以编程方式捕获 iPhone 控制台日志？

> ID：15702134
> 
> 赞同：3
> 
> 时间：2013-03-29T11:14:21.057
> 
> 标签：iphone, ios, ipad, ios6

我在 Appstore 中看到了两个名为 Console ( [Console](https://itunes.apple.com/us/app/console/id317676250?mt=8) ) 和 System Console ( [System Console](https://itunes.apple.com/in/app/system-console/id431158981?mt=8) ) 的应用程序来捕获 iPhone 控制台日志。有谁知道他们是如何做到的？如果是这样，您可以指导我，以便我可以以编程方式捕获它们。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T11:25:32.197

是的，您可以使用 ASL（Apple 系统日志工具）访问它们（通过 HockeyApp 看到）

[http://www.cocoanetics.com/2011/03/accessing-the-ios-system-log/](http://www.cocoanetics.com/2011/03/accessing-the-ios-system-log/)

# php - 明智地显示数据类别

> ID：15702138
> 
> 赞同：1
> 
> 时间：2013-03-29T11:14:40.653
> 
> 标签：php

我们有六个类别示例：-a、b、c、d、e、f。

在每个类别中，我们都有产品。

在一个类别中我有 2 个产品，在 b 类别中我有 1 个产品。

我正在从数据库中获取这些数据。

```
product_id category_id
1                1
2                1
3                2 
```

显示记录的最佳逻辑应该是什么，因此旁边不会显示两个类别。

输出产品 id，如：- 1,3,2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:28:29.807

我不认为这样的功能存在。即使您使用`DISTINCT`它，它也只会选择不重复的部分而将其余部分排除在外，这不是您需要的。所以，我想我会同时运行两个查询，第一个将选择所有不同的查询，比如 1、2、3、4，然后，您可以创建第二个查询来正常查询所有产品。这样，假设.. 如果您有类似的产品类型`1,1,2,3,3,3,4,4,4,4,5,5,5,`，第一个 sql 查询将列出`1,2,3,4,5`，第二个查询将正常查询，但您的客户仍然会首先看到不同的产品。

```
SELECT DISTINCT type FROM table ORDER by id 
```

# c++ - c++ 非本地静态对象在不同翻译单元中交互的示例

> ID：15702139
> 
> 赞同：4
> 
> 时间：2013-03-29T11:14:44.917
> 
> 标签：c++, static, initialization

我正在阅读 Scott Meyer 的 Effective C++ 一书。在其中，他提到非本地静态对象在不同翻译单元中的相对顺序是未定义的。为了演示，他举了下面的例子。在一个文件中，

```
class FileSystem {
   public: 
   std::size_t numDisks() const;
};
extern FileSystem tfs; 
```

在另一个文件中，

```
class Directory {
  public:
  Director() {
    std::size_t disks = tfs.numDisks();
  }
};
Directory tempDir(); 
```

我理解为什么如果初始化顺序不确定，这可能会很糟糕，因为在调用其构造`tfs`函数之前可能不会初始化。`tempDir`

但是，我不明白为什么初始化顺序是不确定的；特别是为什么有两个翻译单元。要`tfs`在第二个文件中使用，是否必须包含第一个文件，因此将两个文件放在同一个翻译单元中？

所以我的问题是：我刚才所说的有什么问题，或者静态非本地对象在不同翻译单元中交互的另一个例子是什么，这可能由于初始化顺序而导致问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T11:18:55.217

请注意，在第一个文件中，只有 的声明`tfs`，而不是它的定义（它使用`extern`关键字）。

这意味着`tfs`在不同的翻译单元中定义，因此未指定初始化顺序。

# c++ - 什么时候一个模板比另一个模板更专业？'And'/'Or' 与逻辑混淆。

> ID：15702143
> 
> 赞同：14
> 
> 时间：2013-03-29T11:15:03.610
> 
> 标签：c++, c++11, partial-ordering

在 C++11 草案的 14.8.2.4p10 中，有这样写

> 如果对于每个被考虑的类型，一个给定的模板至少对所有类型都是专门化的，并且对某些类型集更专门化，而另一个模板对任何类型都没有更专门化，或者至少对任何类型都没有专门化，那么给定模板比其他模板更专业。

为什么有一个“或至少不像任何类型那样专门化”？据我所知，如果我们有一个类型列表

```
T1, T2, T3
U1, U2, U3 
```

如果所有 T 至少都一样专业化，而有些则更专业化。并且没有一个 U 比 U 更特化，那么在我看来，从逻辑上讲，T 的集合作为一个整体比 U 的集合更特化。当我们没有一个至少比相应的 T 专业化时，为什么会有提到的后备？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T20:24:08.557

更新：现在已将其添加为[官方 C++ 问题](http://www.open-std.org/jtc1/sc22/wg21/docs/cwg_active.html#1705)

* * *

我终于弄清楚了如何阅读有问题的段落。下面我已经打了它

> 如果对于被考虑的每种类型，给定模板至少对所有类型都是专用的，并且
> 
> *   对某些类型更专业化，而另一个模板对任何类型都没有更专业化，或者
> *   {the other template} 至少不适合任何类型，
> 
> 那么给定的模板比另一个模板更专业。

这样，下面的第一个模板也比第二个模板更专业

```
template<typename T> void f(T*);
template<typename T> void f(T); 
```

请注意，第一个模板的参数至少与第二个模板一样特化，但并未定义为“更特化”——该术语仅适用于两个参数都是引用且适用某些条件的情况（参见 14.8.9 的第 9 段。 2.4) 。这些规则显然*并不*意味着遵循任何正式的订购法。第二个模板至少不像第一个模板那样专门化。这意味着第二个项目符号适用，而不是第一个项目符号。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T15:51:52.660

*此答案基于对标准段落的抽象语法树的错误解析。“回到标准”部分中假设的条件分组结果不是预期的。预期的分组是 Johannes Schaub 在他的回答中显示的分组。*

* * *

> 当我们没有一个至少比相应的 T 专业化时，为什么会有提到的后备？

我同意你的观点，第二部分（实际上是整个第二个条件）是多余的。

* * *

**一些参考词汇：**

让我们玩一些逻辑的乐趣，并为一对对应的参数介绍两个模板之间的 3 个基本关系：

*   *比*: 对于参数`Ti`和`Ui`分别更专业，一个模板匹配另一个模板，反之则**不然。**我将其表示为`Ti < Ui`；
*   *同样专业化*：对于参数`Ti`和`Ui`分别，一个模板匹配另一个模板**，**反之亦然。我将其表示为`Ti == Ui`；
*   *Specialization-incomparable*：对于参数`Ti`和，对于特定参数`Ui`，**没有一个模板与另一个模板匹配。**我将其表示为`T1 ~ U1`。

例如，在下面的代码片段中：

```
template<typename X> struct A { };
template<typename X> struct B { };

template<typename X> void foo(A<X>, X, A<X>) { } // 1
template<typename X> void foo(X,    X, B<X>) { } // 2 
```

对于第一个参数，(1) 比 ( `<`) (2) 更专业；对于第二个参数， (1) 与 (或 "*与*", `==`) (2) 一样特化；对于第三个参数，(1) 与 ( `~`) (2) 是特化不可比的。

现在让我们定义一个派生关系：

*   对于各个参数，模板(1)*至少与*另一个模板(2)一样特化`Ti`，并且`Ui`当`(Ti < Ui)`或时`(Ti == Ui)`，即当(1) 比(2) 更特化时，或者(1) 与(2) 一样特化。因此，在上面的示例中，`T1 <= U1`、`T2 <= U2`和`U2 <= T2`。

* * *

**回到标准：**

在几个括号的帮助下，上面的引用变为 (A && (B1 || B2))：

> [...] 对于正在考虑的每种类型：
> 
> **（**一个给定的模板至少对所有类型都是专门化的，并且对某些类型更加专门化**）**
> 
> ```
>  AND 
> ```
> 
> **（**另一个模板不是更专业于任何类型
> 
> ```
>  OR 
> ```
> 
> 至少不适合任何类型**）**

`T1, ..., Tn`给定两个要根据参数类型和的相应序列排序的模板`U1, ..., Un`，条件 (A)：

> [...] 一个给定的模板*至少*对所有类型都是专用的，并且对某些类型集更专业 [...]

意味着对于每个`i = 1..n`,`Ti <= Ui`和某些`j`s in `1..n`，它应用更严格的条件`Tj < Uj`. 删除 index `i`，这意味着对于每个参数：

```
(T < U) || (T == U) // (A) 
```

该条件与另一个条件 (B) 进行逻辑合取 (“and”)，而后者又是两个子条件 (B1) 和 (B2) 的逻辑合取 (“or”)。让我们开始检查子条件（B1）：

> [...] 另一个模板不是更专业于任何类型 [...]

这意味着对于 any `i`，永远不会是 that `Ui < Ti`，这意味着：

*   `Ti`比`Ui`( `Ti < Ui`) 更专业；或者
*   `Ti`并且`Ui`同样专业化（`Ui == Ti`）；或者
*   `Ti`并且`Ui`是专业化不可比的 ( `Ui ~ Ti`)：

更正式地说：

```
!(U < T) <==> (T < U) || (T == U) || (T ~ U) // (B1) 
```

现在让我们看看第二个子条件 (B2)，它与 ​​(B1) 进行逻辑分离：

> [...] 至少不适合任何类型 [...]

这是 的否定`U <= T`，这意味着：

```
!(U <= T) <==> !((U == T) || (U < T)) ==> !(U == T) && !(U < T) 
```

换句话说，`T`and`U`不是同等专业的，也不`U`是比 更专业的`T`。因此，剩下的唯一可能是：

```
(T < U) || (T ~ U) // (B2) 
```

现在很明显，(B2) 蕴含 (B1)，因为 (B2) 更具限制性。因此，它们的析取 (B) 将与 (B1) 重合，并且 (B2) 是多余的：

```
(T < U) || (T ~ U) || (T == U) // (B) 
```

但是这里同样明显的是（A）比（B）更严格，所以（A）和（B）的合取等价于（A）。

* * *

**结论：**

整个条件（B）是多余的。

# c++ - 策略继承和不可访问的受保护成员

> ID：15702146
> 
> 赞同：6
> 
> 时间：2013-03-29T11:15:14.780
> 
> 标签：c++, inheritance, visibility, protected, policy

似乎无法访问模板策略类中的受保护成员，即使类层次结构似乎正确。

例如，使用以下代码片段：

```
#include <iostream>
using namespace std;

template <class T>
class A {
  protected:
    T value;
    T getValue() { return value; }
  public:
    A(T value) { this->value = value; }
};

template <class T, template <class U> class A>
class B : protected A<T> {
  public:
    B() : A<T>(0) { /* Fake value */ }
    void print(A<T>& input) {
      cout << input.getValue() << endl;
    }
};

int main(int argc, char *argv[]) {
  B<int, A> b;
  A<int> a(42);
  b.print(a);
} 
```

编译器（在 OS X 上是 clang，但 gcc 返回相同类型的错误）返回以下错误：

```
Untitled.cpp:18:21: error: 'getValue' is a protected member of 'A<int>'
      cout << input.getValue() << endl;
                ^
Untitled.cpp:25:5: note: in instantiation of member function 'B<int, A>::print' requested here
  b.print(a);
    ^
Untitled.cpp:8:7: note: can only access this member on an object of type 'B<int, A>'
    T getValue() { return value; }
      ^
1 error generated. 
```

奇怪的是，编译器的最后一条注释是完全正确的，但已经应用了，因为`b`对象是 type `'B<int, A>'`。这是编译器错误还是代码有问题？

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T11:46:14.980

您误解了受保护访问的含义。

受保护的成员可由派生类调用。但仅限于类本身包含的基础对象。

例如，如果我简化问题，使用：

```
class A {
protected:
    void getValue(){}
};

class B : protected A
{
public:
    void print(A& input)
    {
        input.getValue(); //Invallid
    }
}; 
```

不能在类本身内部的“A”对象以外的“A”对象上调用 getValue。例如，这是有效的。

```
 void print()
    {
        getValue(); //Valid, calling the base class getValue()
    } 
```

正如 Dan Nissenbaum 和 shakurov 所指出的那样。然而，这也是有效的：

```
void print(B& input)
{
    input.getValue();
} 
```

这是因为我们明确地说输入是 B 的对象。编译器知道 B 的所有对象都具有对 getValue 的受保护访问。在我们传递 A& 的情况下，对象也可能是 C 类型，它可以从具有私有访问权限的 A 派生。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T11:55:10.323

让我们暂时忘记模板，看看这个：

```
 class A {
   protected:
     int value;
     int getValue() { return value; }
   public:
     A(int value) { this->value = value; }
 };

 class B : protected A {
   public:
     B() : A(0) { /* Fake value */ }
     void print(A& input) {
       cout << input.getValue() << endl;
     }
 }; 
```

该`print()`方法的实现是错误的，因为**您无法访问`A`inside的非公共成员`B`。**原因如下：从 内部`B`，您只能访问 的非公共成员`B`。这些成员可能是继承的，也可能不是——没关系。

另一方面，`A& input`可能不是对`B`. 它可能是对另一个子类的引用（很可能`getValue()`无法访问）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T11:40:48.483

不要被模板分心。它与错误无关。`main`编译器抱怨的行创建了一个类型的对象`B<int, a>`并尝试访问受保护的成员。无论类型如何，这都是不合法的。您只能在成员函数或友元函数**内部使用受保护的成员。**例如：

```
struct S {
protected:
    void f();
};

int main() {
    S s;
    s.f(); // error: attempts to call a protected member function
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T13:05:47.943

派生类的成员函数可以访问作为参数传递的其类型的任何对象内的受保护基类成员，**只要作为参数传递的对象的显式声明类是派生类**（或进一步派生类）。

**作为基**类类型显式传递的对象不能在派生类的成员函数中访问其受保护的成员。

换句话说，如果我们有：

```
class A
{
protected:
    int x;
}

class B : public A
{
    void foo(B b)
    {
        b.x; // allowed because 'b' is explicitly declared as an object of class B
    }
    void goo(A a)
    {
        a.x; // error because 'a' is explicitly declared as having *base* class type
    }
}; 
```

...然后该行`a.x`是不允许的，因为参数的显式类型是`A`，但受保护访问的规则仅适用于显式定义为与尝试访问该成员的类**相同的类的对象。**（...或派生自它的类；即，如果`class C`派生自`B`，则传递显式声明为类对象的对象`C`也`x`可以在`B`成员函数中访问。）

沙库罗夫在写作时给出了原因（释义）

> A& 输入可能不是对 B 实例的引用。它可能是对另一个子类的引用（很可能 getValue() 不可访问）

这里也给出了这个答案的一个很好的解释：[在另一个子类中访问一个基类的受保护成员](https://stackoverflow.com/questions/11631777/accessing-a-protected-member-of-a-base-class-in-another-subclass)。

有趣的是，我相信这来自这里的 C++ 标准：

> 11.4 受保护成员访问 [class.protected] 1 当非静态数据成员或非静态成员函数是其命名类 (11.2)115 的受保护成员时，将应用第 11 条中所述之外的附加访问检查早些时候，由于引用发生在某个类 C 的朋友或成员中，因此授予对受保护成员的访问权限。如果访问要形成指向成员的指针（5.3.1），则嵌套名称说明符应表示 C 或从 C 派生的类。所有其他访问都涉及（可能是隐式的）对象表达式（5.2.5）。在这种情况下，对象表达式的类应为 C 或从 C 派生的类。

# sql-server-2012-express - AdventureWorks2012：对于每个客户，确定 2007 年创建的订单数。显示 0 表示该客户没有订单。

> ID：15702150
> 
> 赞同：-1
> 
> 时间：2013-03-29T11:15:29.673
> 
> 标签：sql-server-2012-express

AdventureWorks2012：Sql 对于每个客户，确定 2007 年创建的订单数。如果客户在 2004 年没有创建任何订单，则为该客户显示 0。显示：客户 ID，2007 年创建的订单数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:03:39.280

与我的其他回复相同的方法 - 使用 CTE（通用表表达式）来确定 2007 年每个客户的销售数量：

```
-- determine the number and total of all sales in 2007
;WITH SalesPerCustomer AS 
(
    SELECT 
        c.CustomerID,
        NumberOfSales = ISNULL(COUNT(soh.SalesOrderID), 0)
    FROM 
        Sales.Customer c 
    INNER JOIN 
        Sales.SalesOrderHeader soh ON soh.CustomerID = c.CustomerID
                                   AND soh.OrderDate >= '20070101' 
                                   AND soh.OrderDate < '20080101'
    GROUP BY    
        c.CustomerID    
)
SELECT 
    CustomerID ,
    NumberOfSales
FROM 
    SalesPerCustomer
ORDER BY 
    NumberOfSales DESC 
```

按销售额降序排列输出，因此您将首先获得销售额最多的客户

# ios - iOs 绘制交互式地图

> ID：15702153
> 
> 赞同：1
> 
> 时间：2013-03-29T11:15:45.140
> 
> 标签：ios, opengl-es, core-graphics

我需要为 iOs 应用程序绘制交互式地图。例如，它可以是显示各州的美国地图。它需要以不同的颜色显示所有状态（我会从一个代表那里得到这个`colorForStateNo`: ) 它需要允许用户通过触摸它来选择一个状态，当颜色会改变时，应该显示一个“伸出”效果，甚至可能是一个动画符号出现在选定的状态上。此外，某些状态的颜色将需要根据外部事件而改变。这种颜色变化将意味着一个动画，就像一个从状态中间开始向边缘前进的圆圈，将颜色从当前颜色更改为圆圈内的颜色。这可以在核心图形中轻松完成吗？还是只有 Open GL ES 才有可​​能？最简单的方法是什么？我使用过核心图形，但它似乎不能很好地处理动画，我只是在需要移动某些东西时重绘整个屏幕...... 另外我怎么能使用外部图像来绘制地图？设置很多 drawLineToPoint 似乎，只绘制一个状态需要做很多工作，更不用说整个地图了......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T19:09:14.533

您可以使用矢量图形创建地图，然后将其转换为 OpenGL 调用。 [在没有中间光栅的情况下在 OpenGL 中显示 SVG](https://stackoverflow.com/questions/1027179/displaying-svg-in-opengl-without-intermediate-raster)

编辑：该链接适用于 C++，但您可能会找到类似的解决方案。

# php - 将一些表单数据传递给 php 控制器（OpenCart）

> ID：15702156
> 
> 赞同：0
> 
> 时间：2013-03-29T11:15:55.893
> 
> 标签：php, html

我坚持使用以下代码：

```
 <?php if ($orders) { ?>
        <?php foreach ($orders as $order) { ?>
        <tr>
          <td style="text-align: center;"><?php if ($order['selected']) { ?>
            <input type="checkbox" name="selected[]" value="<?php echo $order['order_id']; ?>" checked="checked" class="trigger"/>
            <?php } else { ?>
            <input type="checkbox" name="selected[]" value="<?php echo $order['order_id']; ?>" class="trigger" />
            <?php } ?></td>
          <td class="right"><?php echo $order['order_id']; ?></td>
          <td class="left"><?php echo $order['customer']; ?></td>
          <td class="left"><?php echo $order['status']; ?></td>
          <td class="right"><?php echo $order['total']; ?></td>
          <td class="left"><?php echo $order['date_added']; ?></td>
          <td class="left"><?php echo $order['date_modified']; ?></td>
          <td class="right"><?php foreach ($order['action'] as $action) { ?>
            [ <a href="<?php echo $action['href']; ?>"><?php echo $action['text']; ?></a> ]
            <?php } ?></td>
        </tr>

        <tr class="eph-row" style="" >
          <td colspan="8" style="background-color: #EBF6FF; height: 50px;">
            <div style="">
              <label for="eph-dobierka" style="display: table-row;">Dobierka</label>
                <input type="text" name="eph-dobierka" id="eph-dobierka" value="" size="7" placeholder="Dobierka"/>
            </div>
          </td>
        </tr>

        <?php } ?>
        <?php } else { ?> 
```

![订单信息](../Images/748cbbc0145db8e3aaecf9e49906ae5a.png)

这是控制器的代码：

```
 public function eph() {
        $this->load->model('sale/order');

        $this->data['orders'] = array();

        $orders = array();

        if (isset($this->request->post['selected'])) {
            $orders = $this->request->post['selected'];
        } elseif (isset($this->request->get['order_id'])) {
            $orders[] = $this->request->get['order_id'];
        }

$xml = "<?xml version='1.0'?>";
    $xml .= "<EPH>\n";
        $xml .= "<Zasielky>\n";

                foreach ($orders as $order_id) {
                $order_info = $this->model_sale_order->getOrder($order_id); 
                $xml .= "<Zasielka>\n";
                    $xml .= "<Adresat>\n";  
                        $xml .= "<Meno>".$order_info['shipping_firstname']." ".$order_info['shipping_lastname']."</Meno>\n";
                        $xml .= "<Organizacia>".$order_info['shipping_company']."</Organizacia>\n";
                        $xml .= "<Ulica>".$order_info['shipping_address_1']."</Ulica>\n"; 
                        $xml .= "<Mesto>".$order_info['shipping_city']."</Mesto>\n"; 
                        $xml .= "<PSC>".$order_info['shipping_postcode']."</PSC>\n"; 
                        $xml .= "<Telefon>".$order_info['telephone']."</Telefon>\n"; 
                        $xml .= "<Email>".$order_info['email']."</Email>\n"; 
                        $xml .= "<sum>".$this->request->post['eph-dobierka']."</sum>\n"; 
                    $xml .= "</Adresat>\n";   
                $xml .= "</Zasielka>\n";
                }

        $xml .= "</Zasielky>\n";            
    $xml .= "</EPH>\n";

        libxml_use_internal_errors(true);
        $xmls = simplexml_load_string($xml);

        if ($xmls === false) {
            echo "Failed loading XML\n";
            foreach(libxml_get_errors() as $error) {
                echo "\t", $error->message;
            }
        }

        Header('Content-type: text/xml');
        //Header('Content-disposition: attachment; filename="eph.xml"');
        print($xmls->asXML());

    } 
```

如您所见，根据 selected[] 值从数据库中查询所选行。

我将`<tr class="eph-row">...</tr>`部分添加到原始代码中，我想将一些值传递给控制器​​，根据选择的行=>：`$xml .= "<sum>".$this->request->post['eph-dobierka']."</sum>\n";` 在控制器的“order foreach”中（**这不起作用**）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:31:42.650

此代码似乎`name="eph-dobierka"`为每个订单创建了一个输入元素。这不是您想要的，因为`$_POST`它是一个数组（内部），并且只能有一个具有特定名称的索引。我想你想把

```
<label for="eph-dobierka<?php echo $order['order_id']; ?>" style="display: table-row;">Dobierka</label>
<input type="text" name="eph-dobierka[<?php echo $order['order_id']; ?>]" id="eph-dobierka<?php echo $order['order_id']; ?>" value="" size="7" placeholder="Dobierka" /> 
```

代替

```
<label for="eph-dobierka" style="display: table-row;">Dobierka</label>
<input type="text" name="eph-dobierka" id="eph-dobierka" value="" size="7" placeholder="Dobierka"/> 
```

在标记中。

和

```
$xml .= "<sum>" . $this->request->post['eph-dobierka'][$order_id] . "</sum>\n"; 
```

代替

```
$xml .= "<sum>" . $this->request->post['eph-dobierka'] . "</sum>\n"; 
```

在控制器中。

这假设您要在 UI 中为每个订单手动输入“Dobierka”的值。

# c# - 错误的红线文本字段

> ID：15702158
> 
> 赞同：-2
> 
> 时间：2013-03-29T11:16:01.923
> 
> 标签：c#, html

在我的应用程序中，我有一个包含值的文本字段。当用户单击提交按钮并输入无效值时，将显示错误消息：

在我的模型中：

```
 [DisplayName("Length")]
    [Range(4, 64, ErrorMessage = "You are using a invalid length")]
    public int Length { get; set; } 
```

我的观点：

```
 @Html.LabelFor(m => m.Length):

            @Html.TextBoxFor(m => m.Length) (4 - 64 chars)
            @Html.ValidationMessageFor(m => m.Length) 
```

我也想要它，以便文本字段因错误而红线。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:24:31.913

您可以定义`.input-validation-error`CSS 规则：

```
.input-validation-error {
    border: 1px solid #e80c4d;
} 
```

如果出现验证错误，TextBoxFor 助手会自动将此类添加到相应的输入字段中。

# push-notification - 无法通过 Web 服务 (php API) 调用 Apple 推送通知服务 (APNS)。这里的APNS服务是通过代理服务器调用的吗？

> ID：15702162
> 
> 赞同：1
> 
> 时间：2013-03-29T11:16:09.847
> 
> 标签：push-notification, apple-push-notifications, apns-php

无法通过 Web 服务 (php API) 调用 Apple 推送通知服务 (APNS)。这里通过代理服务器调用 APNS 服务。我正在 Web 服务（php API）中进行 APNS 调用。这里通过代理服务器调用 APNS 服务。因为我无法与苹果服务器直接连接。我们有无法直接从我们的实时服务器连接其他服务器/ URI 的限制。所以，我只能在代理的帮助下调用其他服务器。我在调用 Web 服务时收到以下错误消息，

```
Please find the error message to the API call.

stream_socket_client(): php_network_getaddresses: getaddrinfo failed: Temporary failure in name resolution

Please provide perfect solution to this issue. 
```

# crystal-reports - 在水晶报表中计算总和

> ID：15702163
> 
> 赞同：1
> 
> 时间：2013-03-29T11:16:13.753
> 
> 标签：crystal-reports

我正在处理 Crystal 报告 2010，我为每个 Bill 详细信息设置了 Header 组。它工作正常，但如何计算水晶报表中每个组的总和？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-09T05:24:18.213

右键单击您要求和的字段，然后插入摘要，然后在摘要 Loaction 字段中，选择组，这样您就可以解决您的问题

# mono - 使用什么 Mono 版本

> ID：15702165
> 
> 赞同：0
> 
> 时间：2013-03-29T11:16:19.703
> 
> 标签：mono

我正在开始一个需要 Mono 和 mod_mono 在 CentOS 下运行的新项目。Mono 有两个版本：发布版本为 2.10.8，以及开发分支，截至今天为 3.0.7。

我想知道什么是正确的开始版本。显然，稳定版本是我的选择，但我不确定 Mono 3.0 增加了哪些可能会从 2.10 中丢失。请注意，该项目将是 ASP.NET 4.0，使用 MVC4。

推荐什么版本？稳定但较旧的（可追溯到 2011 年 12 月 19 日！）还是较新的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:23:03.090

Mono 2.10 支持 ASP.NET MVC3，既然要使用 MVC4，就必须使用更高版本。
Mono 的最新版本在 2.10 中解决了很多问题，包括与 ASP.NET 相关的问题。

所以你可能想去一个更新的版本。我认为稳定性不会成为问题，但您必须执行适当的测试以确定您使用的版本是否支持您在应用程序中尝试执行的所有操作。

不要在没有测试的情况下部署到生产环境。

更新：更正，2.10 中有“部分”MVC4 支持，不支持异步。因此，虽然您可能能够使用 2.10，但您的里程可能会有所不同，具体取决于您的应用使用的功能

# osgi - fsresource - 通过 xml 存储在 crx 中的运行模式配置

> ID：15702166
> 
> 赞同：0
> 
> 时间：2013-03-29T11:16:36.443
> 
> 标签：osgi, aem, crx

在处理 JSP、JS、CSS 等时，我使用 fsresource sling 扩展来访问文件系统。当只是将捆绑包拉入 crx 并通过 OSGi 控制台对其进行配置时，一切都按预期工作。但是当我尝试添加新的运行模式（配置）时，结果并不令人满意。

```
config/src/main/content/jcr_root/apps/samples/config/org.apache.sling.fsprovider.internal.FsResourceProvider.factory.config.xml 
```

是主要配置的路径，我在本地实例上使用它来弄清楚如何达到预期的结果，但我能得到的最好的结果是显示在

```
system/console/configMgr 
```

XML 文件的内容：

```
<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:sling="http://sling.apache.org/jcr/sling/1.0"     
          xmlns:jcr="http://www.jcp.org/jcr/1.0"
          jcr:primaryType="sling:OsgiConfig"
          provider.roots="/apps/ui-samples"
          provider.file="/Volumes/samples/ui/src/main/content/jcr_root/apps/ui-samples"
          provider.checkinterval="1000"/> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:09:35.697

显然，我只是觉得文件名太复杂了。

```
org.apache.sling.fsprovider.internal.FsResourceProvider-samples.xml 
```

例如做这项工作。

# java - Intellij IDEA 12 无法编译简单代码

> ID：15702173
> 
> 赞同：1
> 
> 时间：2013-03-29T11:17:07.493
> 
> 标签：java, compiler-errors, intellij-idea

我是 Java 新手，我正在尝试编译最简单的代码：**hello world**，

```
package com.ninet.first;

public class Test {
    public static void main(String[] param) {
        System.out.println("test");
    }
} 
```

当我运行它时，它说：

```
COMPILATION COMPLETED WITH 1 ERROR 0 WARNINGS
ERROR: FAILED TO CREATE A SELECTOR 
```

没有创建类。我遵循了几个视频教程如何使用 intellij，按照教程中的所有内容进行操作，尝试重新安装 IDE 多次，没有任何变化！项目**SDK**已设置，我使用的是**1.6**

顺便说一句，我在 Eclipse 中没有问题。我还可以在命令行中编译和运行我的类。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T11:22:04.630

看看[IDEA-98407](http://youtrack.jetbrains.com/issue/IDEA-98407)，这能解决你的问题吗？引用：

> 然后你必须关闭设置| 编译器 | 使用外部构建。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:03:08.983

请[查看此知识库文档](http://intellij-support.jetbrains.com/entries/23403071)以了解与网络相关的问题。

还要[在这里查看我的答案](https://stackoverflow.com/a/15653836/104891)。

编译器在一个单独的进程中工作，因此需要 IPC 的网络连接，但是默认情况下，您的防火墙阻止本地接口 (127.0.0.1) 上的连接是不正常的。

# javascript - 渲染多个视图/控制器对

> ID：15702176
> 
> 赞同：1
> 
> 时间：2013-03-29T11:17:26.167
> 
> 标签：javascript, list, view, controller, ember.js

我目前正在呈现视图列表：

```
 <ul>
    {{#each newsItem in controller}}
      {{view App.NewsItemView contentBinding="newsItem" class="news-item" }}
    {{/each}}
  </ul> 
```

但我想在每个视图中注入一个 NewsItemController。

我试过使用`render`，但这似乎只支持一个视图，给出了例外：

> 未捕获的错误：车把错误：在对象上找不到属性“控件”。

我发现了一个关于使用的简短提及`control`，但这似乎不再包括在内。

**那么如何渲染同一个视图的多个版本，为每个视图注入一个单独的控制器呢？**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:10:23.423

`{{render}}`应该在当前主服务器中修复（如果你从 Github 构建它）。如果你传递一个模型，你应该可以多次使用它：

```
<ul>
 {{#each controller}}
   {{render "newsItem" this}}
 {{/each}}
</ul> 
```

`{{control}}`仍然存在但隐藏在标志后面（因为它仍然是实验性的）。要使用它，您需要执行 :`ENV.EXPERIMENTAL_CONTROL_HELPER = true`在包含`ember.js`文件之前。如果你能避免使用它，那就更好了。

但是我认为最简单的方法是使用`itemController`：

```
<ul>
  {{#each controller itemController="newsItem"}}
    {{view App.NewsItemView class="news-item" }}
  {{/each}}
</ul> 
```

我认为您可以将它们组合起来以使其更简单（我还没有尝试过）：

```
<ul>
  {{each controller itemController="newsItem" itemViewClass="App.NewsItemView"}}
</ul> 
```

# java - 我在我的电脑上找不到 Android SDK

> ID：15702180
> 
> 赞同：24
> 
> 时间：2013-03-29T11:17:57.357
> 
> 标签：java, android, eclipse, sdk

几个月前我在我的电脑上安装了 Android SDK，现在我终于激励自己开始开发了。

目前，我正在尝试为 Eclipse 安装插件，我需要在我的计算机上设置 SDK 的位置，但是......我找不到它。
我知道它已经安装，因为 SDK 管理器说它是，但我不知道在哪里！

Program Files 或 C:\ 中没有 Android 文件夹 在资源管理器中搜索 Android 没有产生任何相关信息。

所以..有人知道我在哪里可以找到SDK吗？
它似乎不在默认位置。
谢谢

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-03-29T11:35:13.857

如果您在 OP 中对 SDK Manager 的说法是正确的，并且您可以访问 SDK Manager，那么它会显示 SDK 当前所在的位置。

![在此处输入图像描述](../Images/03fefba11ac11db83f78ba810afe5d65.png)

在 Package and Tools 菜单的正下方，它显示了 SDK 路径。

但是，如果您无法访问 SDK 管理器，那么您很可能下载了 ADT Bundle 或 SDK 安装程序。

如果是较早的，那么您下载的文件名为：**adt-bundle-windows-x86.zip**。如果是后者，并且如果您记得安装它，那么安装的默认路径是在您的`Program Files\Android....`. 安装程序的名称如下：**installer_r21.1-windows.exe**（这是当前可用的版本）

如果此页面上的任何建议都没有帮助，那么最后的手段是重新下载 SDK。在连接良好的情况下，您应该在大约 15 分钟内完成。 [下载源](http://developer.android.com/sdk/index.html)

祝你编码好运。;-)

# iphone - 在现有项目中添加导航栏

> ID：15702183
> 
> 赞同：1
> 
> 时间：2013-03-29T11:18:21.077
> 
> 标签：iphone, integration, uinavigationbar

我有三个 viewController v1 v2 v3，从 v1 到 v2 我使用导航控制器的 pushViewController 属性，但从 v2 到 v3 我使用 presentviewController 。在 v3 中，我需要右侧带有按钮的导航栏，以便我可以执行方法。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:41:49.807

在您的视图控制器 V2 中，使用以下代码展示您的 V3

```
V3 *obj_V3=[[V3 alloc]initWithNibName:@"V3" bundle:nil];
UINavigationController *navBar=[[UINavigationController alloc]initWithRootViewController:obj_V3];
[self.navigationController presentModalViewController:navBar animated:YES];
[navBar release];
[obj_V3 release]; 
```

并在您的 V3 中添加

```
self.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(performMethod)] autorelease]; 
```

和你的执行方法

```
-(void)performMethod {
//your code
} 
```

# sql - 从维度表设置事实表中的 ID

> ID：15702185
> 
> 赞同：0
> 
> 时间：2013-03-29T11:18:29.780
> 
> 标签：sql, sql-server, join, data-warehouse, fact-table

在我的废弃呼叫维度表中，我有 ID 1 代码 NO ， ID 2 代码 YES 我想根据呼叫是否使用连接被放弃，将这些 ID 加载到事实表中。

我遇到的问题是，我的数据库中的 Abandoned 值为 NULL 表示 NO 和 1 表示 YES。

所以当我加入

```
 INNER JOIN datamartend.dbo.Abandoned_Call_Dim 
         ON incoming_measure.Abandoned = Abandoned_Call_Dim.abandoned_code 
```

没有结果？

有什么想法吗？

基本上需要的是：

如果度量中的废弃值为 null，我希望废弃维度中的废弃 ID 为 2，如果不为 null，则废弃 id 为 2

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:22:19.817

您可以使用 CASE WHEN 子句来解决这个问题（或 ISNULL，但 case when 在不同的数据库引擎中更便携）

```
 INNER JOIN datamartend.dbo.Abandoned_Call_Dim 
         ON case when incoming_measure.Abandoned is null then '0' 
                 else  incoming_measure.Abandoned end 
          = case when Abandoned_Call_Dim.abandoned_code is null then '0' 
                 else Abandoned_Call_Dim.abandoned_code end 
```

这将用 0 替换空值。只要你没有 0 代码，你应该没问题。如果这样做，请尝试 -1，或您知道的其他值不在可能的代码集中。

如果你有一组未知的代码要做的另一件事是加入并添加：

```
 OR (incoming_measure.Abandoned is null and Abandoned_Call_Dim.abandoned_code is null) 
```

从技术上讲，它不加入 - 它交叉加入空记录（只要只有一个空值对废弃的呼叫暗淡很重要，你就可以了）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:13:28.310

您能否在加入之前检查是否可以对 ID 使用解码功能。

解码（值）= 加入列

或尝试使用 COALESCE(REPLACE(COL, VAL_TO_B_REPLACE_IF_NOT_NULL), VALUE_TO_REPLCE_WHEN_NULL)

# ruby - 红宝石。裂纹宝石。-- 在` ': nil:NilClass (NoMethodError) 的未定义方法 `[]' --

> ID：15702189
> 
> 赞同：0
> 
> 时间：2013-03-29T11:18:40.887
> 
> 标签：ruby, xml-parsing, nomethoderror

亲爱的 stackoverflow 社区，

初学者的问题：为什么会出现以下错误？

```
scraper_sample_2.rb:7:in `<main>': undefined method `[]' for nil:NilClass (NoMethodError)
>Exit code: 1 
```

这是我的代码（从 ruby​​ 的介绍指南中复制）：

```
require "rubygems"
require "crack"
require "open-uri"

URL = "http://www.recovery.gov/pages/GetXmlData.aspx?data=recipientHomeMap"

Crack::XML.parse(open(URL).read)["totals"]["state"].each do |state|
    puts ["id", "awarded", "received", "jobs"].map{|f| state[f]}.join(",")
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:20:51.810

因为`Crack::XML.parse(open(URL).read)["totals"]`是`nil`。尝试将您在第 7 行进行的调用拆分为几行，并分别调试每个调用。也许你得到的答案不是你所期望的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T07:45:19.910

鉴于从[您的源](http://www.recovery.gov/pages/GetXmlData.aspx?data=recipientHomeMap)`Crack::XML.parse(open(URL).read)["totals"]`返回的 xml 格式，正如 Ivaylo 所说，将返回`nil`。xml 的格式必须已更改，就像`totals`现在在`/map/view`.

要获得预期的输出，请将您的代码更改为：

```
Crack::XML.parse(open(URL).read)["map"]["view"]["totals"]["state"].each do |state|
    puts ["id", "awarded", "received", "jobs"].map{|f| state[f]}.join(",")
end 
```

# eclipse - 突出显示格式不正确的行 [Eclipse]

> ID：15702190
> 
> 赞同：0
> 
> 时间：2013-03-29T11:18:52.113
> 
> 标签：eclipse, coding-style, eclipse-plugin

所以我有一些格式规则要遵循，例如：

```
Space on each side of operator (*, =, +, %, etc)
No space at the end of a line
No more than 80 chars per line 
```

有没有办法在包含格式错误的红线中突出显示？eclipse 自动格式化工具不好，因为：

它会变成多行（旧代码不是我写的）或者不会（只有我的代码）

因为我必须遵循一些“colorfull”指南：

```
You must change formating error relative to operators in old code but nothing else
Your code must be correctly formated. 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T15:43:39.827

您可以选择要格式化的代码行。Eclipse 格式化工具不必遍历整个文件。为此：选择要格式化的行，然后按 Ctrl-Shift-F。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:40:43.087

您可以尝试使用[Eclipse Checkstyle Plugin](http://eclipse-cs.sourceforge.net/)。

您需要仅使用您需要的规则对其进行配置（默认配置非常严格，因此只需使用您关心的规则创建一个新配置）。

这将突出显示所有有格式问题的行。我认为使用插件无法忽略旧代码。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T18:57:11.343

与创建该编码指南的人交谈。从长远来看，这没有意义，因为在 Eclipse 中编辑代码将始终应用所有当前的格式化规则（这违反了该准则），或者如果您禁用格式化程序（这会导致您编写错误的代码），则不会应用。

如果确实无法绕过该指南，那么您应该将您的工作流程分为两个阶段：一次重新格式化*所有*现有代码以符合该操作员指南。您可以使用任何您喜欢的工具，即使只是正则表达式搜索和替换也可以。

完成后，将 Eclipse 配置为仅自动格式化更改的行，但始终将所有格式应用于每个更改的行。如果您已经接触了其中的 5 个字符，则没有充分的理由不重新格式化现有代码行中的其他 75 个字符。

# zend-framework - 将值从 IFrame 传递到基于 zend 框架的应用程序集成了另一个站点

> ID：15702193
> 
> 赞同：0
> 
> 时间：2013-03-29T11:19:09.490
> 
> 标签：zend-framework, iframe, zend-route

我一直面临一个奇怪的问题。

我有一个基于 zend 框架的应用程序，我需要使用来自另一个域的 IFrame 加载此应用程序。加载时，我需要将 IFrame 中的值传递给基于 Zend Framework 的应用程序。我尝试了以下方式，但它不起作用。它给出了页面未找到异常。

1.  在引导程序中创建 _initRouting() 方法
2.  使用 IFrame 集成应用程序

**_initRouting()**

```
public function _initRouting()
{
    $router = Zend_Controller_Front::getInstance()->getRouter();
    $router->addRoute(
            'deal',
            new Zend_Controller_Router_Route('/deal/:q', array(
                'module' => 'default',
                'controller' => 'index',
                'action' => 'index'
            ))
    );
} 
```

**IFrame 集成**

```
<iframe src="http://www.example.com/deal/123" width="1022px" height="710px"></iframe> 
```

默认模块->索引控制器->索引操作

```
public function indexAction()
{
    echo $this->_request->getParam('q');
} 
```

想不通问题所在。您的帮助将不胜感激。

# java - Java：如何将openstreetmap区域导出到图像文件？

> ID：15702195
> 
> 赞同：0
> 
> 时间：2013-03-29T11:19:32.080
> 
> 标签：java, api, export, openstreetmap

我现在正在寻找更长的时间，但没有任何成功。目前，我正在寻找一种 Java 解决方案，用于导出或打印基于纬度和经度的开放街道地图区域。

是否有任何 Java API / 框架可用于将 OSM 地图的区域转换为 PNG、PDF、JPEG 或其他格式，以便之后可以打印？

例如，Openstreetmaps 提供出口服务，这符合我的需求，但我希望更加灵活。

[http://parent.tile.openstreetmap.org/cgi-bin/export?bbox=11.xxxxxx,48.xxxxxx,11.xxxxxx,48.xxxxxx&scale=1439&format=png](http://parent.tile.openstreetmap.org/cgi-bin/export?bbox=11.xxxxxx,48.xxxxxx,11.xxxxxx,48.xxxxxx&scale=1439&format=png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:14:36.477

开放的街道地图图块已经是 256 x 256 .png 图像。这是缩放级别 8、文件夹 61、图像 103 中的一个图块

![美国路易斯安那州什里夫波特](../Images/8abfcea51f9c5ad7771a37d40916d6ef.png)

在 Java 中，您将它们组装成一张地图，通常使用 BufferedImage。您可以将此 BufferedImage 保存为 JPEG 或 PNG 文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-30T15:03:34.153

经过更长时间的研究，我发现了一个很棒的 AP​​I，它似乎是可靠的 :-)

[http://ojw.dev.openstreetmap.org/StaticMap/](http://ojw.dev.openstreetmap.org/StaticMap/)

这个 API 有很多很棒的配置可能性......

# javascript - 如何测量两个圆之间的距离，然后检查碰撞？

> ID：15702196
> 
> 赞同：2
> 
> 时间：2013-03-29T11:19:41.097
> 
> 标签：javascript, jquery, collision-detection

我正在用 jquery/javascript 制作游戏。游戏是用鼠标点击屏幕来击中一个移动的物体。我的检测位有问题。是否有一个 jQuery/javascript 函数可以随时测量两个对象中心之间的距离？因为那时我可以轻松地控制检查两个中心的距离。和 se 是否发生碰撞。他们都是两个圈子。

```
<div id="box">
        <div id="prepend">
            <div id="hero"></div>
        </div>

        <div id="enemy"></div>
</div> 
```

其中“盒子”是游戏发生的区域，“英雄”是你要击中“敌人”的子弹。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T11:25:41.580

要获得距离，请使用公式 ![在此处输入图像描述](../Images/5fbb0621f13fea28ab4f65d537a067af.png)

```
function getDistance(obj1,obj2){
    Obj1Center=[obj1.offset().left+obj1.width()/2,obj1.offset().top+obj1.height()/2];
    Obj2Center=[obj2.offset().left+obj2.width()/2,obj2.offset().top+obj2.height()/2];

    var distance=Math.sqrt( Math.pow( Obj2Center[0]-Obj1Center[0], 2)  + Math.pow( Obj2Center[1]-Obj1Center[1], 2) )

    return distance;
} 
```

调用使用

```
getDistance($("#obj1"),$("#obj2")); 
```

检查碰撞：

```
function hasCollision(obj1,obj2){    
    return getDistance(obj1,obj2)<obj1.width()/2+obj2.width()/2;
} 
```

这是一个展示两者的[jsfiddle 示例](http://jsfiddle.net/opherv/BrHUN/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:21:48.597

您可以使用以下内容：

```
var $this = $(this);
var offset = $this.offset();
var width = $this.width();
var height = $this.height();

var centerX = offset.left + width / 2;
var centerY = offset.top + height / 2; 
```

对两者都执行此操作，然后计算这些值之间的差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:23:14.713

没有，但实际上很简单：

1.  获取当前项目的绝对坐标以及宽度和高度
2.  计算中心点 (x + width/2, y + height/2)
3.  对两个圈子都这样做
4.  使用三角函数计算这两个点之间的距离：x 平方差加上 y 平方差，取其平方根 = 距离
5.  如果距离减去两个圆的半径大于0，则没有碰撞。如果为0：他们接触，如果小于0，他们碰撞。

# php - 使用 mod-xsendfile 下载 PHP 文件不会下载整个文件

> ID：15702201
> 
> 赞同：1
> 
> 时间：2013-03-29T11:20:06.630
> 
> 标签：php, download, varnish, x-sendfile

我在从我们的网站提供下载时遇到问题。大文件不会完整下载。下载将在两者之间停止...示例[此文件](http://dewesoft.com/download?file=DEWESoft_FULL_7_0_5.exe)（大小 cca 172MB）不会以全尺寸下载（还有其他文件）。

我从 Kohana 框架中包含的完全基于 PHP 的下载脚本切换：

`return download::force($filePath);`

到 mod-xsendfile 解决方案。我正在阅读基于 PHP 的下载脚本和大文件可能存在的问题，而 mod-xsendfile 上的 cam 是正确的解决方案……看起来不像，我用这两种技术得到了相同的结果。我当前使用 mod-xsendfile 标头的下载实现如下：

```
header("X-Sendfile: $filePath");
header("Content-type: application/octet-stream");
header('Content-Disposition: attachment; filename="' . basename($filePath) . '"'); 
```

我究竟做错了什么？

更新：

我使用[这个 HTTP 嗅探器](http://web-sniffer.net/)来检查响应头，如果它有助于解决这个问题，这就是结果。

```
Status: HTTP/1.1 200 OK
Server: Apache  
Set-Cookie: dewesoftsession=63ms5j67kc231pr4bpm8cmg1f7; expires=Sat, 30-Mar-2013 11:36:59 GMT; path=/   
Expires: Thu, 19 Nov 1981 08:52:00 GMT  
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0   
Pragma: no-cache    
Set-Cookie: dewesoftsession=63ms5j67kc231pr4bpm8cmg1f7; expires=Sat, 30-Mar-2013 11:36:59 GMT; path=/   
Content-Disposition: attachment; filename="DEWESoft_FULL_7_0_5.exe" 
Last-Modified: Mon, 24 Sep 2012 12:50:12 GMT    
ETag: "25814de-ac291e9-4ca7207c7fcd9"   
Content-Type: application/octet-stream  
Content-Length: 180523497   
Date: Sat, 30 Mar 2013 09:37:01 GMT 
X-Varnish: 294312007    
Age: 2  
Via: 1.1 varnish    
Connection: close   
X-Varnish-Cache: MISS 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-05T16:32:19.793

几天后，我们设法找到了导致问题的原因。Varnish 有一个启动参数`send_timeout`，默认设置为 600s。对于大文件下载，您可能会遇到此超时，这将导致您的下载中断。

所以增加 Varnish 的`send_timeout`参数会帮助你解决这类问题。

# function - 如何添加 smtp 支持？

> ID：15702210
> 
> 赞同：0
> 
> 时间：2013-03-29T11:20:57.707
> 
> 标签：function, smtp, php

首先，我是新来的 PHP :)。

我的问题是关于 SMTP 支持。我的代码正在发送恢复密码。但我的主机需要 smtp 支持。我没有添加它。我读了很多帖子，但我的知识基础。如何添加 smtp 支持？

```
 function sendRecover($to, $title, $url, $from, $username, $salt) {

$headers  = 'MIME-Version: 1.0' . "\r\n";
$headers .= 'Content-type: text/html; charset=iso-8859-1' . "\r\n";
$headers .= 'From: '.$title.' <'.$from.'>' . "\r\n";
$subject = 'Password Recovery - '.$title;
$message = 'A password recover was requested, if you didn\'t make this action please ignore this email. <br /><br />Your Username: <strong>'.$username.'</strong><br />Your Reset Key: <strong>'.$salt.'</strong><br /><br />You can reset your password by accessing the following link: <a href="'.$url.'/index.php?a=recover&r=1" target="_blank">'.$url.'/index.php?a=recover&r=1</a>';

return @mail($to, $subject, $message, $headers); 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:26:04.973

使用[PHPMailer](https://github.com/Synchro/PHPMailer.)

当前“官方”版本的 PHPMailer 可通过 Github 获得： [https ://github.com/Synchro/PHPMailer](https://github.com/Synchro/PHPMailer)

对于实施，您可以参考以下链接： [http ://www.htmlgoodies.com/beyond/php/article.php/3855686/PHP-Mailer-Script-Step-by-Step.htm](http://www.htmlgoodies.com/beyond/php/article.php/3855686/PHP-Mailer-Script-Step-by-Step.htm)

```
or 
```

[http://phpmailer.worxware.com/index.php?pg=examplebsmtp](http://phpmailer.worxware.com/index.php?pg=examplebsmtp)

如果您有权编辑 php.ini，那么您可以执行以下操作：

```
[mail function]
SMTP = ssl://smtp.gmail.com
smtp_port = 465
username = info@Mmydomainname.com
password = myemailpassword
sendmail_from = info@mydomainname.com 
```

# php - 如何在cms页面中获取类别名称

> ID：15702212
> 
> 赞同：0
> 
> 时间：2013-03-29T11:20:59.367
> 
> 标签：php, magento, magento-1.7, magento-1.4

我创建了两个页面，第一个是“伦敦”，另一个是“牛津”。我还创建了两个具有相同名称的类别。“Oxford”类别具有标识符（ID：2），“London”具有标识符（ID：4）。我把这个

```
{{block type="catalog/product_list" category_id="2" template="catalog/product/list.phtml"}} 
```

牛津内容部分中的代码。和

```
{{block type="catalog/product_list" category_id="4" template="catalog/product/list.phtml"}} 
```

伦敦内容部分的代码。

**我想在 list.phtml 上获取当前类别 ID**。

我尝试了一些代码，例如

```
<?php echo $this->getLayer()->getCurrentCategory()->getId();?> 
```

但无论我是在牛津页面还是伦敦页面上，它总是显示类别 id=2

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:35:58.203

由于 category_id 作为变量传递，因此您可以使用 list.phtml 文件中的以下代码来获取当前的类别 ID。

```
$current_catid=$this->getCategoryId(); // this will give your current category id 
```

我们可以在实例化任何块类时传递变量，因为每个块类都是 Varien_Object 的派生类，并且在 Varien_Object 类构造函数中，构造函数中传递的每个变量都设置为类属性。如需进一步参考，请查看 lib/Varian/Varian_Object 类。

# c - 字符串操作，下面的函数是做什么的？

> ID：15702213
> 
> 赞同：0
> 
> 时间：2013-03-29T11:21:00.640
> 
> 标签：c, string

试图弄清楚下一个功能的确切目的是什么？

我知道它正在对字符串进行一些操作 - 获取 char 指针 - 命令，检查是否有空格或制表符空间......但最后我不明白这个函数在做什么？

```
void FixCommand(char* command)
{
    char newCommand[MAX_COMMAND_SIZE + 1];
    char* currChar = command;
    int lastConfirmed = 0;
    int inputIndex = 0;
    while ((*currChar == ' ') || (*currChar == '\t'))
    {
        ++currChar;
    }
    while (*currChar != 0)
    {
        if (*currChar != '\n')
        {
            newCommand[inputIndex] = *currChar;
            ++inputIndex;
            if ((*currChar != ' ') && (*currChar != '\t'))
            {
                lastConfirmed = inputIndex;
            }
        }
        ++currChar;
    }
    newCommand[lastConfirmed] = 0;
    strcpy(command, newCommand);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:29:53.443

程序跳过字符串中的初始空格/制表`command`符，然后将所有字符复制到`newCommand[]`中，跳过“换行”`\n`字符。它还查找`command`字符串中的中断（空格或制表符），记下它看到的最后一个非空白字符，并标记其位置。最后，`command`从第一个非空白到最后一个非空白的部分将被复制回`command`，并`\n`删除字符。

例如，如果传入的命令字符串如下所示：

```
"    quick brown\nfox\tjumps over the\tlazy dog\t " 
```

那么输出将如下所示：

```
"quick brownfox\tjumps over the\tlazy dog" 
```

它的目的可能是在将命令字符串传递给不允许`\n`和前导/尾随空格的外部系统之前“清理”命令字符串。

# php - fullCalendar "events: 'somepage.php'" JSON 结果未显示

> ID：15702214
> 
> 赞同：0
> 
> 时间：2013-03-29T11:21:02.730
> 
> 标签：php, jquery, json, fullcalendar

我正在尝试使用内置功能的“事件（作为 JSON 提要）”为我的 fullCalendar 实现获取事件。

...事件：'calendarFill.php'，...

php 文件返回以下 JSON 数据：

```
[{"id":"40","title":"test four","services":"Reflexology (40), foot-soak","start":"Tue Mar 26 2013 13:00:00","end":"Tue Mar 26 2013 13:40:00","color":"#e56b15","customerId":"21","phone":"555-0404","email":"test4","notes":"test two of update. this sentence added at update.","seat":"Side Couch 9","vip":"yes","confirmed":"yes","knows_policies":"yes","customer_here":"0","allDay":"false"},{"id":"41","title":"test four","services":"Foot-Soak, ","start":"Wed Mar 27 2013 19:00:00","end":"Wed Mar 27 2013 19:15:00","color":"#e56b15","customerId":"21","phone":"555-0404","email":"test4","notes":"test of addslashes. what's going to happen?","seat":"Front Chair 2","vip":"yes","confirmed":"yes","knows_policies":"yes","customer_here":"0","allDay":"false"}] 
```

以上不起作用 - 事件不会显示在日历上。我在我的 Javascript 代码中剪切并粘贴了代码目录：

```
events: {"id":"40","title":"test four","services":"Reflexology (40), foot-soak","start":"Tue Mar 26 2013 13:00:00","end":"Tue Mar 26 2013 13:40:00","color":"#e56b15","customerId":"21","phone":"555-0404","email":"test4","notes":"test two of update. this sentence added at update.","seat":"Side Couch 9","vip":"yes","confirmed":"yes","knows_policies":"yes","customer_here":"0","allDay":"false"},{"id":"41","title":"test four","services":"Foot-Soak, ","start":"Wed Mar 27 2013 19:00:00","end":"Wed Mar 27 2013 19:15:00","color":"#e56b15","customerId":"21","phone":"555-0404","email":"test4","notes":"test of addslashes. what's going to happen?","seat":"Front Chair 2","vip":"yes","confirmed":"yes","knows_policies":"yes","customer_here":"0","allDay":"false"}], 
```

而且，它不显示。但是，如果我编辑上面的内容以删除所有不在文本值周围的引号（如下所示），它就可以了。

```
events: [{id:40,title:"test four",services:"Reflexology (40), foot-soak",start:"Tue Mar 26 2013 13:00:00",end:"Tue Mar 26 2013 13:40:00",color:"#e56b15",customerId:21,phone:"555-0404",email:"test4",notes:"test two of update. this sentence added at update.",seat:"Side Couch 9",vip:"yes",confirmed:"yes",knows_policies:"yes",customer_here:0,allDay:false},{id:41,title:"test four",services:"Foot-Soak, ",start:"Wed Mar 27 2013 19:00:00",end:"Wed Mar 27 2013 19:15:00",color:"#e56b15",customerId:21,phone:"555-0404",email:"test4",notes:"test of addslashes. what's going to happen?",seat:"Front Chair 2",vip:"yes",confirmed:"yes",knows_policies:"yes",customer_here:0,allDay:false}], 
```

我正在使用此链接上的文档：http: [//arshaw.com/fullcalendar/docs/event_data/events_json_feed/](http://arshaw.com/fullcalendar/docs/event_data/events_json_feed/)

我究竟做错了什么？我应该从我的 php 中删除 'json_encode' 并返回一个格式如上的字符串吗？我想以“正确”的方式来做，而不是一些变通方法。

根据要求添加了php：

```
// for connection to db
include("../includes/config.php");
include("../includes/mysql_functions.php");

// connection with db
$linkID = db_connect();

$returnValue = array();

$getEventData = mysql_query("SELECT apt_num, services, apt_date_start, apt_date_end, therapist, customer_num, notes, seat, confirmed, knows_policies, here FROM appointments", $linkID);

if ($getEventData != FALSE && mysql_num_rows($getEventData) > 0)
{
    while ($theEventData = mysql_fetch_array($getEventData))
    {
        $getCustomerString = "SELECT first_name, middle_name, last_name, phone, email, vip FROM customer WHERE customer_num = ".$theEventData['customer_num'];
        $getCustomerData = mysql_query($getCustomerString, $linkID);

        if ($getCustomerData != FALSE && mysql_num_rows($getCustomerData) > 0)
        {
            while($theCustomerData = mysql_fetch_array($getCustomerData))
            {
                $customerName = $theCustomerData['first_name']." ".$theCustomerData['middle_name']." ".$theCustomerData['last_name'];
                $customerPhone = $theCustomerData['phone'];
                $customerEmail = $theCustomerData['email'];
                $customerVip = $theCustomerData['vip'];
            }
        }
        else
        {
            $customerName = "error";
            $customerPhone = "error";
            $customerEmail = "error";
            $customerVip = "error";
        }

        $rowArray['id'] = $theEventData['apt_num'];
        $rowArray['title'] = $customerName;
        $rowArray['services'] = $theEventData['services'];
        $rowArray['start'] = date("D", $theEventData['apt_date_start'])." ".date("M", $theEventData['apt_date_start'])." ".date("d", $theEventData['apt_date_start'])." ".date("Y", $theEventData['apt_date_start'])." ".date("H", $theEventData['apt_date_start']).":".date("i", $theEventData['apt_date_start']).":".date("s", $theEventData['apt_date_start']);
        $rowArray['end'] = date("D", $theEventData['apt_date_end'])." ".date("M", $theEventData['apt_date_end'])." ".date("d", $theEventData['apt_date_end'])." ".date("Y", $theEventData['apt_date_end'])." ".date("H", $theEventData['apt_date_end']).":".date("i", $theEventData['apt_date_end']).":".date("s", $theEventData['apt_date_end']);
        $rowArray['color'] = $theEventData['therapist'];
        $rowArray['customerId'] = $theEventData['customer_num'];
        $rowArray['phone'] = $customerPhone;
        $rowArray['email'] = $customerEmail;
        $rowArray['notes'] = $theEventData['notes'];
        $rowArray['seat'] = $theEventData['seat'];
        $rowArray['vip'] = $customerVip;
        $rowArray['confirmed'] = $theEventData['confirmed'];
        $rowArray['knows_policies'] = $theEventData['knows_policies'];
        $rowArray['customer_here'] = $theEventData['here'];
        $rowArray['allDay'] = "false";

        array_push($returnValue, $rowArray);
    }
}
else
{
    $returnValue[0] = "error";
}

print json_encode($returnValue); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T00:00:19.677

Markus Vetter（来自 Google+）发现了问题。在从我的 php 文件返回的原始代码中，有一个“'”会导致问题。在将其返回到 jQuery/Javascript 之前，我需要在我的 php 中添加斜杠。一旦完成，jQuery / fullCalendar 代码就能够按预期呈现我的事件。

第二双眼睛创造奇迹！谢谢马库斯维特！

返回的原始代码：

```
[{"id":"40","title":"test four","services":"Reflexology (40), foot-soak","start":"Tue Mar 26 2013 13:00:00","end":"Tue Mar 26 2013 13:40:00","color":"#e56b15","customerId":"21","phone":"555-0404","email":"test4","notes":"test two of update. this sentence added at update.","seat":"Side Couch 9","vip":"yes","confirmed":"yes","knows_policies":"yes","customer_here":"0","allDay":"false"},{"id":"41","title":"test four","services":"Foot-Soak, ","start":"Wed Mar 27 2013 19:00:00","end":"Wed Mar 27 2013 19:15:00","color":"#e56b15","customerId":"21","phone":"555-0404","email":"test4","notes":"test of addslashes. what's going to happen?","seat":"Front Chair 2","vip":"yes","confirmed":"yes","knows_policies":"yes","customer_here":"0","allDay":"false"}] 
```

在我的 php 中对所有文本字段使用“addslashes”后：

```
[{"id":"40","title":"test four","services":"Reflexology (40), foot-soak","start":"Tue Mar 26 2013 13:00:00","end":"Tue Mar 26 2013 13:40:00","color":"#e56b15","customerId":"21","phone":"555-0404","email":"test4","notes":"test two of update. this sentence added at update.","seat":"Side Couch 9","vip":"yes","confirmed":"yes","knows_policies":"yes","customer_here":"0","allDay":"false"},{"id":"41","title":"test four","services":"Foot-Soak, ","start":"Wed Mar 27 2013 19:00:00","end":"Wed Mar 27 2013 19:15:00","color":"#e56b15","customerId":"21","phone":"555-0404","email":"test4","notes":"test of addslashes. what\'s going to happen?","seat":"Front Chair 2","vip":"yes","confirmed":"yes","knows_policies":"yes","customer_here":"0","allDay":"false"}] 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T21:57:37.023

这次真的解决了！在我的 php 文件中，添加到 $rowArray 的最后一个值是：$rowArray['allDay'] = "false"。它不是文本值，而是实际的布尔值。这个 "$rowArray['allDay'] = false" 解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-02T04:24:14.897

我有同样的问题，这对我来说也是一个格式化问题。

这就是我的 json 现在返回的方式，它终于可以正常工作了。

```
[{"title":"Coke Trade Show","start":"2014-12-03"},{"title":"Michigan Show","start":"2014-12-04"}] 
```

将您的 json 返回直接粘贴到 JS 中以确保它正常工作绝对是个好主意。

# mongodb - pymongo全文搜索如何仅返回统计信息？

> ID：15702227
> 
> 赞同：0
> 
> 时间：2013-03-29T11:22:14.540
> 
> 标签：mongodb, full-text-search, pymongo, freetext

我正在使用带有 pymongo 的 mongo2.4 的自由文本搜索。我想要的是获得包含一些文本的文档数量。在 mongo shell 中，增加限制是一个很好的转变，但是从 python 中它变得非常慢，因为必须发送所有文档。作为指示，与 mongo shell 相比，pymongo 中的查询要慢约 50 倍。

我使用类似这样的命令：

```
>>>res=db.command('text','mytable',search='eden',limit=100000)
>>>numfound = res['stats']['nfound'] 
```

但正如我所说，由于所有文件都返回，所以它真的很慢。是否有命令指定您不需要文档，只需要统计信息？所有可用选项的列表是什么？

谢谢，科林

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-15T16:13:56.833

我找不到此功能的服务器票证 - 所以请将功能请求添加到：[jira.mongodb.org](http://jira.mongodb.org)，然后您将从核心服务器开发人员那里获得更新和反馈。

您可以在进行文本查询时进行投影，这样您就可以减少通过网络发送的数量 - 但仍会发送一些信息，例如：

```
db.mytable.runCommand( "text", { search: "eden", project: {_id: 0, b: 1}}) 
```

# java - 如何使用 JAXB 输出对象集合？

> ID：15702230
> 
> 赞同：1
> 
> 时间：2013-03-29T11:22:23.403
> 
> 标签：java, jaxb

无法按预期从 java 类生成所需的 XML。

这是一个定义 zoo 属性的类

```
**//Modal Class**
 public class Zoo 
{
private String name;
private String place;
    //Getters Setters

} 
```

带有动物园类列表的动作类在 XML 中

**//具有动物园类多个对象的动作类**

```
@ManagedBean
@XmlRootElement
public @SessionScoped class zoos implements Serializable {
   private String name;
   private String place;
   private static final ArrayList<Zoo> zoo_list
= new ArrayList<Zoo>();

    @XmlElement
public ArrayList<Zoo> getZoo_list()
{
  return zoo_list;

}
    public void xmleg()
    {

        File file = new File("C:\\file.xml");   
        for(Zoo add: zoo_list)
        {
         try 
         {
            JAXBContext jaxbContext = JAXBContext.newInstance(Zoos.class);
            Marshaller jaxbMarshaller = jaxbContext.createMarshaller();

            jaxbMarshaller.setProperty(Marshaller.JAXB_FORMATTED_OUTPUT, true);

            jaxbMarshaller.marshal(new JAXBElement<Zoo>(new QName("","Zoo"),zoo.class,add),file);
            jaxbMarshaller.marshal(new JAXBElement<Zoo>(new QName("","Zoo"),zoo.class,add),System.out);

              } catch (JAXBException e) {
            e.printStackTrace();
              }
         }
        } 
```

生成的输出是：

```
 <?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<zoo>
    <linkId>0</linkId>
    <name>gfdsgdgtretr</name>
    <place>gdfg</place>
</zoo>
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<zoo>
   <linkId>0</linkId>
    <name>gfdsgdgtretr</name>
    <place>gdfg</place>
</zoo> 
```

**但预期输出应该是：**

```
 <zoos>
   <zoo>
     <linkId>0</linkId>
     <name>gfdsgdgtretr</name>
     <place>gdfg</place>
  </zoo>
  <zoo>
    <linkId>0</linkId>
    <name>gfdsgdgtretr</name>
    <place>gdfg</place>
  </zoo>     
  </zoos> 
```

也尝试过使用 @XMLElementWrapper 注释，但它也不起作用。已经阅读了许多教程，但没有找到解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:33:59.280

**更新**

我刚刚重读了你的问题，你已经`Zoos`上课了。您应该编组该实例而不是`zoo_list`属性中的单个项目。`@XmlElement`您可以使用注释更改属性映射到的元素名称。

```
@XmlElement(name="zoo")
public ArrayList<Zoo> getZoo_list() 
```

* * *

JAXB (JSR-222) 实现需要一个根对象。最简单的做法是创建一个名为的对象，该对象`Zoos`保存在`Zoo`对象列表中并对其进行编组。

```
@XmlRootElement
public class Zoos {

    private List<Zoo> zoo;

    public List<Zoo> getZoo() {
        return zoo;
    }

    public void setZoo(List<Zoo> zoo) {
        this.zoo = zoo;
    }

} 
```

或者，您可以`FileWriter`为`File`. 然后你可以自己写开始元素。`Zoo`然后使用 JAXB 将每个实例编组到`FileWriter`（您将需要利用以下属性让 JAXB 排除 XML 标头。

```
marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true); 
```

最后，您需要关闭根元素。

# asp.net-mvc - MefContrib：如何导出合成容器

> ID：15702234
> 
> 赞同：1
> 
> 时间：2013-03-29T11:22:34.227
> 
> 标签：asp.net-mvc, mef

我需要调用`CompositionContainer.GetExportedValue<>`控制器操作。我使用`MefContrib`并且我需要知道我应该如何以及在何处将其`CompositionContainer`自身添加到目录中，以便我可以将其导入我的控制器中。

**更新** 这是“AppStart_MefContribMVC3.cs”的内容，我相信 MefContrib 正在配置它的目录。在这里没有任何关于 CompositionContainer 的标志！

```
public static class AppStart_MefContribMVC3
{
    public static void Start()
    {
        // Register the CompositionContainerLifetimeHttpModule HttpModule.
        // This makes sure everything is cleaned up correctly after each request.
        CompositionContainerLifetimeHttpModule.Register();

        // Create MEF catalog based on the contents of ~/bin.
        //
        // Note that any class in the referenced assemblies implementing in "IController"
        // is automatically exported to MEF. There is no need for explicit [Export] attributes
        // on ASP.NET MVC controllers. When implementing multiple constructors ensure that
        // there is one constructor marked with the [ImportingConstructor] attribute.
        var catalog = new AggregateCatalog(
            new DirectoryCatalog("bin"),
            new ConventionCatalog(new MvcApplicationRegistry())); // Note: add your own (convention)catalogs here if needed.

        // Tell MVC3 to use MEF as its dependency resolver.
        var dependencyResolver = new CompositionDependencyResolver(catalog);
        DependencyResolver.SetResolver(dependencyResolver);

        // Tell MVC3 to resolve dependencies in controllers
        ControllerBuilder.Current.SetControllerFactory(
            new CompositionControllerFactory(
                new CompositionControllerActivator(dependencyResolver)));

        // Tell MVC3 to resolve dependencies in filters
        FilterProviders.Providers.Remove(FilterProviders.Providers.Single(f => f is FilterAttributeFilterProvider));
        FilterProviders.Providers.Add(new CompositionFilterAttributeFilterProvider(dependencyResolver));

        // Tell MVC3 to resolve dependencies in model validators
        ModelValidatorProviders.Providers.Remove(ModelValidatorProviders.Providers.OfType<DataAnnotationsModelValidatorProvider>().Single());
        ModelValidatorProviders.Providers.Add(
            new CompositionDataAnnotationsModelValidatorProvider(dependencyResolver));

        // Tell MVC3 to resolve model binders through MEF. Note that a model binder should be decorated
        // with [ModelBinderExport].
        ModelBinderProviders.BinderProviders.Add(
            new CompositionModelBinderProvider(dependencyResolver));
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T18:10:03.017

`I need to know how`

`CompositionContainer`就像任何其他的一样`object`，您可以使用以下语句添加它：

```
CompositionContainer.ComposeExportedValue(CompositionContainer); 
```

`and where should I add the CompositionContainer`

就这一点而言，我需要查看更多代码，以便就应该添加的位置以及导出您的代码是否`CompositionContainer`是最佳策略提供建议。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T14:22:06.567

事实证明，使用 MefContrib，您不需要 CompositionContainer 来解析导出的类型。这是如何完成的：

```
DependencyResolver.Current.GetService<SomeTypeName>() 
```

# c++ - 在抛出 'std::length_error' what(): basic_string::_S_create 的实例后调用终止

> ID：15702235
> 
> 赞同：1
> 
> 时间：2013-03-29T11:22:36.907
> 
> 标签：c++, exception, runtime, mingw

我有下面给出的数据类型

```
typedef struct {
    string t;
    string r;
    string c;
    string val;
} cellProperty;

class Fl_Input__: public Fl_Input {
    public:
        explicit Fl_Input__ (int x, int y, int w, int h) : Fl_Input(x,y,w,h) {}
        cellProperty getProperty() { return ownProperty; }
        void setProperty(string t,string r,string c, string val);
    private:
        cellProperty ownProperty;
}; 
```

我正在通过 for 循环绘制 GUI。每个文本输入框都是 2d 数组的成员`Fl_Input__`。一切都很好，直到循环到达点`r=4 & c=7`并抛出异常

> 在抛出 'std::length_error' 的实例后调用终止
> 
> 什么（）：basic_string::_S_create`

代码在linux下编译并运行良好，我为win32（mingw）重新编译但有这个运行时问题。代码在我调用 setProperty() 的地方失败

```
Fl_Box *tab2ColLabelBox[COLNUM];
Fl_Box *tab2RowLabelBox[ROWNUM];
int t = 1;

for (int r=0 ; r < (ROWNUM + 1) ; r++)
    for (int c=0 ; c < COLNUM ; c++)
    {
        stringstream ss_t, ss_r, ss_c;
        int i_v;

        ss_t << t;
        ss_r << (r-1);
        ss_c << c;

        valueString = readSettings(ss_t.str(), ss_r.str(), ss_c.str());
        SplitString(valueString, v, ",");
        stringstream(v.at(0)) >> i_v;

        tab2OffsetInput[r][c] = new Fl_Input__(
                (CELLWIDTH) * (c+2) + ((c+1) * SIDESPACE) - TXTINWIDTH,
                (r+3) * CELLHEIGHT,
                TXTINWIDTH,
                CELLHEIGHT);
        tab2OffsetInput[r][c]->align(
                FL_ALIGN_LEFT + FL_ALIGN_INSIDE + FL_ALIGN_TOP);
        tab2OffsetInput[r][c]->value(v.at(1).c_str());
        tab2OffsetInput[r]c]->setProperty(
                std::string("1"), ss_r.str(), ss_c.str(), v.at(1));
        tab2OffsetInput[r][c]->maximum_size(3);
        tab2OffsetInput[r][c]->callback(
                callback_modSettings_tab1_txtInput, this);
        v.clear();
    } 
```

任何指导将不胜感激！提前致谢...

# android - Android应用设计起点

> ID：15702236
> 
> 赞同：0
> 
> 时间：2013-03-29T11:22:37.473
> 
> 标签：android, performance, android-widget, android-preferences

我刚刚开始学习Android开发。我熟悉 Java 和 Adob​​e Flex UI。我对android开发有基本的设计好奇心。

1.  开发应用程序的理想设计可能是什么。（可以说，我有 4-6 个不同的选项卡）我有所有可用的线框。这可能是我的起点。
2.  我想使用 JSON 和 mongoDB 进行连接？
3.  是否有任何可用于 android 开发 (MVC) 的框架？
4.  广义的功能主义者很高兴拥有。例如。应用程序通知的电子邮件或更新。

我目前正在阅读本教程，但这对于设计整个应用程序并没有真正的帮助。

请帮我。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:29:25.030

我认为您首先需要花一些时间在 Google 自己的网站上好好阅读一下。 [http://developer.android.com/index.html](http://developer.android.com/index.html)

教程的另一个好地方是 [http://www.vogella.com/articles/Android/](http://www.vogella.com/articles/Android/)

1.  没有理想的设计。您的出发点是上面的网站。
2.  您的应用程序和服务器之间的通信主要通过 JSON 或 XML 完成。您不能直接访问远程数据库（也许您可以通过一些技巧，但您不想这样做。）
3.  Android是一个框架，它基于MVC。
4.  不知道你在这里问什么。

祝你好运，并尝试使任何未来的问题更加具体到编程问题。

# javascript - 我可以创建一个在调用任何 get 或 post 方法（包括 Ajax 请求）时触发的 JavaScript 吗？

> ID：15702239
> 
> 赞同：0
> 
> 时间：2013-03-29T11:22:44.390
> 
> 标签：javascript, jquery, ajax, post, get

每当我点击我网站上执行/调用 GET 或 POST（Ajax 和非 Ajax）的任何地方的链接/按钮时，如果需要几秒钟以上的时间，我想显示一个加载 gif。我知道如何单独执行此操作，但我想知道是否可以创建一个自动执行此操作的函数，然后在完成时隐藏 gif（假设它不会重定向到新页面）。

我发现[了这一点](https://stackoverflow.com/questions/3596583/javascript-detect-an-ajax-event)，但这不适用于例如 spring security 的 post 方法。

这可能是不可能的情况，或者需要付出比其价值更多的努力。我只想知道这是否可能，如果可能，如何处理。

唯一的限制是任何调用 post 或 get 的方法都不需要知道这个所谓的“监听器”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T11:26:47.130

这被标记为 jQuery，所以为了简单起见，我给出了一个 jQuery 答案。没有它，这也可以以相对简单的方式解决。

### 钩住每个请求：

假设您的方法被调用`myMethod`。

`GET/POST`可以通过以下方式触发请求：

*   表单提交，在这种情况下您可以选择表单`$("#formID").submit(myMethod);`。请注意，如果`myMethod`返回 false 将导致您的表单无法提交
*   `AJAX`在这种情况下，您可以[`$.ajaxStart`](http://api.jquery.com/ajaxStart/) 使用`$.ajaxStart(myMethod)`
*   “a”标签点击和其他点击处理程序，在这种情况下您可以执行`$("a[href]").click(myMethod)`，请注意，这会选择`a`具有`href`属性的所有标签，您可能需要更改选择器以满足您的需要
*   `Image`[您可以像这个问题](https://stackoverflow.com/questions/280049/javascript-callback-for-knowing-when-an-image-is-loaded)中解释的那样处理的负载。
*   `Script`[您可以像这个问题](https://stackoverflow.com/questions/1293367/how-to-detect-if-javascript-files-are-loaded)中解释的那样检测到的负载。
*   `Stylesheet/Link`负载，这在[此博客文章](http://blog.rjzaworski.com/2011/08/firing-events-when-a-stylesheet-finishes-loading/)中进行了解释。您可以向 CSS 添加隐藏元素并检查样式是否在间隔中应用，以及何时调用`myMethod`

你不能做什么：

*   如果你的页面有一个像 Flash 这样的插件，或者任何你的 JavaScript 无法访问的东西，你就不能钩住它发出的请求。

## 显示“正在加载”的 gif 的情况。

根据您的要求，您似乎只关心图像请求和 AJAX 请求（如果我错了，请纠正我），因为在 AJAX 请求中加载 NOT 需要很长时间的外部页面可以（应该）实现`.gif`新页面上的逻辑。这可以像我上面解释的那样处理。

虽然你可以钩住每一个案例，但我不会这样做。我会创建一个方法，将“正在加载”的 gif 加载到一个地方并接受一个 url。如果该 url 是一个图像（例如，如果您的映射可以通过文件扩展名）使用`image load detect` 链接问题中的逻辑，如果它是 AJAX，则将加载 gif 加载到将加载数据的位置，并将其替换为上的数据一个`.done()`处理程序。

Here is [a question about how to do this for an image](https://stackoverflow.com/questions/2499022/how-to-display-a-wait-gif-until-image-is-fully-loaded), [here is how to do it for AJAX](https://stackoverflow.com/questions/6134110/how-to-display-ajax-loading-image) . The two can be easily combined into a `method` which is what I believe you should use.

# iphone - UITableViewCell(s) 默认图像在滚动时被其他图像覆盖

> ID：15702242
> 
> 赞同：3
> 
> 时间：2013-03-29T11:23:09.250
> 
> 标签：iphone, uitableview, uiimageview, accessoryview

糟糕，我正面临一个表格视图单元格没有图像的问题，即具有默认图像的单元格。滚动时默认图像消失，单元格中的一些图像出现在其上。我已经实施了 Mr.Rckoenes 的[建议](https://stackoverflow.com/questions/8093267/uitableview-icons-duplicated-after-scrolling)。即使那样我也无法解决这个问题。这是我理解的实现代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{    
    ReminderClass *reminderToDisplay = [self.remindersArray objectAtIndex:indexPath.row];

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:kCellIdentifier];

    // Now create the cell to display the data
    if (cell == nil) 
    {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:kCellIdentifier] autorelease];
        cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
        cell.textLabel.numberOfLines = 0;
        cell.textLabel.font = [UIFont fontWithName:kHelvetica size:17.0];
        cell.textLabel.adjustsFontSizeToFitWidth = YES;
        cell.backgroundColor = [UIColor clearColor];
    }

    ......

    if (Image != nil) 
    {
        UIImageView *imageView=[[UIImageView alloc] initWithFrame:CGRectMake(240, 3, 70, 63)];
        imageView.backgroundColor=[UIColor clearColor];
        [imageView setImage:Image];
        cell.accessoryView = imageView;
        [imageView release];
    }
    else
    {
        UIImageView *imageView=[[UIImageView alloc] initWithFrame:CGRectMake(240, 3, 70, 63)];
        imageView.backgroundColor=[UIColor clearColor];
        UIImage *defaultImage = [UIImage imageNamed:kDefaultImage];
        [imageView setImage:defaultImage];
        cell.accessoryView = imageView;
        [imageView release];
    }
    cell.textLabel.text = reminderDetailsString;
    return cell;
} 
```

任何人都可以帮助我，在此先感谢:)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:25:39.847

刚刚设置`dequeueReusableCellWithIdentifier`并喜欢下面`nil`的..`reuseIdentifier``nil`

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:nil]; 
```

和

```
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:nil] autorelease]; 
```

并在此`if (cell == nil)`if 条件下添加您的其他代码..

**更新：**

```
-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    NSString *CellIdentifier = [NSString stringWithFormat:@"Cell%d%d",indexPath.section,indexPath.row]; 
    if (cell == nil) {
        cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:CellIdentifier] autorelease];
        cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
        cell.textLabel.numberOfLines = 0;
        cell.textLabel.font = [UIFont fontWithName:kHelvetica size:17.0];
        cell.textLabel.adjustsFontSizeToFitWidth = YES;
        cell.backgroundColor = [UIColor clearColor];

        tableView.backgroundColor = [UIColor clearColor];

    NSDateFormatter *dateFormat = [[[NSDateFormatter alloc]init]autorelease];
    [dateFormat setDateFormat:kDateFormat];
    NSDate *reminderDate = [dateFormat dateFromString:reminderToDisplay.Date]; 
    [dateFormat setDateFormat:kMinDateFormat]; 
    NSString *dateString = [dateFormat stringFromDate:reminderDate];

    NSString *valueString = [NSString stringWithFormat:kNameEvent,reminderToDisplay.Name,reminderToDisplay.Event];
    NSString *onString = [NSString stringWithFormat:kOn,dateString];
    NSString *reminderDetailsString = [valueString stringByAppendingString:onString];

    ABAddressBookRef addressbook = ABAddressBookCreate();
    CFArrayRef allPeople = ABAddressBookCopyArrayOfAllPeople(addressbook);
    CFIndex numPeople = ABAddressBookGetPersonCount(addressbook);
    for (int i=0; i < numPeople; i++)
    {
        ABRecordRef person = CFArrayGetValueAtIndex(allPeople, i);

        NSString *firstName=(NSString *)ABRecordCopyValue(person, kABPersonFirstNameProperty);
        NSString *lastName=(NSString *)ABRecordCopyValue(person, kABPersonLastNameProperty);

        NSMutableDictionary *contactsDictionary = [[[NSMutableDictionary alloc]init]autorelease];

        if(firstName != nil && firstName != NULL)
        {
            [contactsDictionary setObject:firstName forKey:kFirstName];
            CFRelease(firstName);
        }
        else
        {
            [contactsDictionary setObject:@"" forKey:kFirstName];
        }
        if(lastName != nil && lastName != NULL)
        {
            [contactsDictionary setObject:lastName forKey:kLastName];
            CFRelease(lastName);
        }
        else
        {
            [contactsDictionary setObject:@"" forKey:kLastName];
        }

        //Get the first name and last name added to dict and combine it to form contact name
        firstName = [[[NSString alloc]initWithString:[contactsDictionary objectForKey:kFirstName]]autorelease];
        lastName = [NSString stringWithFormat:@" %@",[contactsDictionary objectForKey:kLastName]];
        self.contactName = [firstName stringByAppendingString:lastName];

        //Now check whether the contact name is same as your reminderToDisplay.Name
        if([reminderToDisplay.Name isEqualToString:contactName] && ABPersonHasImageData(person))
        {
            CFDataRef imageData = ABPersonCopyImageData(person);
            self.reminderImage = [UIImage imageWithData:(NSData *)imageData];
            CFRelease(imageData);
        }
    }

    CFRelease(allPeople);
    CFRelease(addressbook);

    if ([reminderToDisplay.reminderGroup isEqualToString:kFacebook])
    {
        NSString *imageName = [NSString stringWithFormat:kImageName,reminderToDisplay.Name];
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString *reminderString=[documentsDirectory stringByAppendingPathComponent:[NSString stringWithString:imageName]];
        self.reminderImage = [UIImage imageWithContentsOfFile:reminderString];
    }

    if (reminderImage != nil) 
    {
        UIImageView *imageView=[[UIImageView alloc] initWithFrame:CGRectMake(240, 3, 70, 63)];
        imageView.backgroundColor=[UIColor clearColor];
        [imageView setImage:reminderImage];
        cell.accessoryView = imageView;
        [imageView release];
    }
    else
    {
        UIImageView *imageView=[[UIImageView alloc] initWithFrame:CGRectMake(240, 3, 70, 63)];
        imageView.backgroundColor=[UIColor clearColor];
        UIImage *defaultImage = [UIImage imageNamed:kDefaultImage];
        [imageView setImage:defaultImage];
        cell.accessoryView = imageView;
        [imageView release];
    }
    cell.textLabel.text = reminderDetailsString;
        }
    return cell;
} 
```

# c# - 在应用程序中加载 dll 时在 web.config 中生成连接字符串

> ID：15702244
> 
> 赞同：0
> 
> 时间：2013-03-29T11:23:10.337
> 
> 标签：c#, asp.net, class-library

我编写了一个类库文件并在 Web 应用程序中使用该文件的 dll

我在这个 dll 中编写了一些代码，例如在 web.config 文件中生成连接字符串和 appSettings

但问题是......我想在 Web 应用程序中添加这个 dll 而不是运行应用程序时生成这个连接字符串和 appsettings 数据

所以请帮助我....

我认为有些 frnz 不明白我的问题，我在下面详细说明..

当我在我的应用程序中添加 dll 时，它成功添加了没有问题。当我运行我的应用程序时，连接字符串会在 web.config 中生成

bt 这会发生什么...所有会话都被清除

因此我想在应用程序中添加这个 dll 时生成这个连接字符串

那么是否有任何可用的事件处理程序或加载程序可以帮助我获得结果

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:29:13.870

如果我正确理解了您的问题，那么您需要将该类库作为参考添加到您的 Web 应用程序中。只需右键单击解决方案 > 添加引用 > 浏览到类库并将其添加到项目中。然后，您可以在 Web 应用程序中使用您的类库。

希望能帮助到你...

# android - 在 sqlite 数据库中存储单选按钮值

> ID：15702255
> 
> 赞同：0
> 
> 时间：2013-03-29T11:24:30.033
> 
> 标签：android, radio-button

我有一个带有两个单选按钮的单选组。我想获取单选按钮的值，然后将其存储在数据库中..我该怎么做？请帮忙！我搜索了它，但一切都是徒劳的！我尝试了此代码，但使用它后我的活动停止工作

```
rg=(RadioGroup)findViewById(R.id.radioGroup2);
if(rg.getCheckedRadioButtonId()!=-1)
    {
        int id=rg.getCheckedRadioButtonId();
        View radioButton=rg.findViewById(id);
        int radioid=rg.indexOfChild(radioButton);
        RadioButton btn = (RadioButton) rg.getChildAt(radioid);
        Father_spouse=(String)btn.getText();
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:37:54.373

1.  如果你想存储你的文本标签`RadioButton`然后使用这个：

    ```
    // get selected radio button from radioGroup
    int selectedId = radioGroup.getCheckedRadioButtonId();

    if(selectedId != -1) {    
       // find the radiobutton by returned id
       selectedRadioButton = (RadioButton) findViewById(selectedId);

       // do what you want with radioButtonText (save it to database in your case)
       String radioButtonText = selectedRadioButton.getText();
    } 
    ```

2.  如果您想保存一个布尔值，请测试`selectedId`您的`RadioButtons`并将 0 或 1 保存到您的数据库列（*启用/禁用更新的两个单选按钮的示例*）：

    ```
    // get selected radio button from radioGroup
    int selectedId = radioGroup.getCheckedRadioButtonId();
    boolean isAllowUpdate = false;
    switch(selectedId) {
        case R.id.radioAllowUpdate : isAllowUpdate = true; break;
        case R.id.radioDisableUpdate : isAllowUpdate = false; break;
    }

    //save it to database 
    if(isAllowUpdate)
       // true ==> save 1 value
    else 
       // false ==> save 0 value 
    ```

**编辑 ：**

如果您应该控制所选值并将其发送到数据库，请参阅本[教程](http://www.android-ios-tutorials.com/android/custom-android-checkbox-radiobutton/)

# android - 如何在android中以编程方式锁定文件夹？

> ID：15702259
> 
> 赞同：0
> 
> 时间：2013-03-29T11:24:33.007
> 
> 标签：android, directory, file-permissions

可以以编程方式将文件夹锁定为密码保护吗？

[http://developer.android](http://developer.android)提供**文件锁定**，但我想**锁定文件夹**而不是文件。

Android 操作系统完全基于 Linux 内核，Linux 内核提供访问文件夹或文件的权限。但是如何更改锁定文件夹的权限。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:28:36.977

您无法更改 SD 卡上文件或文件管理器的权限。您可以在使用 ext2 或 romfs 或类似文件系统的位置更改 root 手机上的文件或文件夹的权限。但我不认为这是你想要的。在 Linux 上，您也不能修改 nfts 或 fat 文件系统的权限。

# python - 除某些匹配项外的所有内容的正则表达式

> ID：15702262
> 
> 赞同：0
> 
> 时间：2013-03-29T11:25:13.603
> 
> 标签：python, regex

我正在尝试创建一个重定向正则表达式脚本，它将用户转发到另一个具有完整路径的域，除非路径与特定内容匹配。

IE

`http://www.a.com/anything/foo/bar -> http:www.b.com/anything/foo/bar`

但是如果路径以特殊的开头，则不要重定向：

`http://www.a.com/special/1/2/3 -> no redirect`

我的重定向应用程序是这样工作的：我逐行输入条目（这工作正常）：

```
"^/(?P<path>[-\w]+)/(?P<foo>[-\w]+)/(?P<bar>[-\w]+)/$","%(path)s/%(bar)s/%(foo)s/"
"^/(?P<path>.*)$","http://www.b.com/%(path)s" 
```

所以像这样的东西（不起作用）：

`"^/(?P<path>!(special).*)$","http://www.b.com/%(path)s"`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:28:47.910

`http://www.a.com/(?!special).*` will match anything which starts with `http://www.a.com/` but not `http://www.a.com/special`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:27:29.923

您正在寻找负前瞻：

```
"^/(?P<path>(?!special/).*)$","http://www.b.com/%(path)s" 
```

`(?!...)`语法意味着：

> `(?!...)`
> 如果`...`下一个不匹配，则匹配。这是一个否定的前瞻断言。例如，仅当它后面没有. 时`Isaac (?!Asimov)`才会匹配。`'Isaac '``'Asimov'`

因此，如果路径以 . 开头`/`但后面*没有*`special/`.，则表达式匹配。

演示：

```
>>> import re
>>> re.search(r"^/(?P<path>(?!special/).*)$", '/special/path') is None
True
>>> re.search(r"^/(?P<path>(?!special/).*)$", '/not-so-special/path').groupdict()
{'path': 'not-so-special/path'} 
```

# c++ - 这是哪个标准容器行为？

> ID：15702268
> 
> 赞同：3
> 
> 时间：2013-03-29T11:25:35.480
> 
> 标签：c++, stl, containers, std, stdvector

我正在尝试“破解”使用 Visual Studio 2005 编译的游戏（红色警报 3，封闭源代码..）（需要 MSVCR80.dll 才能玩），

我尝试制作一个程序来显示我的对手的单位列表。至于那我首先需要找到一个指向我自己的列表的（静态）指针，我可以在单人游戏中做到这一点。

我有一些问题，因为我无法弄清楚我的静态指针是否真的指向我想要的。

我注意到了这种行为：（通过查看 add_unit 代码更改了哪些地址）：

*   如果尚未构建单元，请为其创建一个新地址（随机？）并将值设置为 1（该类型的单元数量），但对于先前添加的单元，所有其他地址保持不变，所以如果一个单元类型 A 的地址为 0x12345678，它告诉有多少类型 A 的单位，然后它不会改变并且在整个游戏会话期间保持可访问。

所以其他地址没有失效还是什么？

这是添加地址的示例，突出显示的地址是添加的第一个地址： ![](../Images/d0707843f8d9bc02d67c62a463e75faf.png)

哪些类型的 std::containers 可以用于此？它当然不是向量，因为向量会在插入新元素时使所有其他地址无效，或者不是？

* * *

编辑/更新：至于现在我已经能够重建这个结构：

```
struct UnitsInfo
{
    DWORD * someptr_1_to_other_UnitsInfo_struct;
    DWORD * someptr_2_to_other_UnitsInfo_struct;
    DWORD * someptr_3_to_other_UnitsInfo_struct;
    int unkown_1;
    unsigned int Type;
    unsigned int Amount;
}; 
```

并且 some_ptr 东西指向所有其他单元地址，我需要找出它是如何工作的。然后我可以有效地创造一切。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-07T17:09:22.110

似乎在升序地址中。这看起来像是通过分配器将东西添加到任何容器中。我会猜测和侵入式链接列表，其中对象位于某种分配器上。

我希望这有帮助。

# asp.net-mvc - Asp.Net MVC 使用类库中的 web api

> ID：15702275
> 
> 赞同：2
> 
> 时间：2013-03-29T11:26:08.357
> 
> 标签：asp.net-mvc, plugins, asp.net-web-api, class-library

我想知道是否有一种方法可以创建一个包含 Web API 的类库，这样我就可以使用 dll 作为插件来注入 MVC 应用程序。

预先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:18:19.527

Web API 方法通过 HTTP 调用，因此调用 Web API 服务需要将其托管在某处并使用合适的客户端调用，如[@David 的链接](http://www.asp.net/web-api/overview/web-api-clients/calling-a-web-api-from-a-net-client)中所述。您*可以* [自托管 Web API](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api)，因此理论上您可以在 MVC 应用程序本地有一个程序集，其中包含一个类，该类设置然后调用自托管 Web API 服务。

您将在接口后面注入 Web API 服务，如下所示：

```
public interface IProductsService
{
    IEnumerable<Product> GetAllProducts();
} 
```

...实现了这样的事情：

```
public class SelfHostedWebApiProductsService
{
    public SelfHostedWebApiProductsService()
    {
        // Set up a self-hosted Web API service
    }

    public IEnumerable<Product> GetAllProducts()
    {
        // Call your self-hosted WebApi to get the products
    }
} 
```

[Configure your DI container](http://www.dotnetcurry.com/ShowArticle.aspx?ID=786) to use `SelfHostedWebApiProductsService` for the `IProductsService` interface, and away you go. [This article](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api) details how to set up and call a self-hosted Web API.

As the `SelfHostedWebApiProductsService` sets up the self-hosted Web API in its constructor - a relatively expensive operation - you might want to consider giving this class a singleton lifetime in your DI container.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T02:11:58.620

You could Self-Host a Web API: [http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api](http://www.asp.net/web-api/overview/hosting-aspnet-web-api/self-host-a-web-api)

You can put all your controllers in a Class Library project.

Then use Autofac to resolve the dependencies in your host project: [https://code.google.com/p/autofac/wiki/WebApiIntegration](https://code.google.com/p/autofac/wiki/WebApiIntegration)

# css - 使用 css 创建真正的粗体文本

> ID：15702277
> 
> 赞同：2
> 
> 时间：2013-03-29T11:26:10.917
> 
> 标签：css

有没有办法让我的字体比下面的例子更粗？我尝试`font-weight`从 900 增加到 1500，但我没有看到任何区别。

```
#step-1 div {
    font-weight: bolder;
    font-weight: 900;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T11:29:00.757

您只能使用以下属性**之一：**

```
font-weight: normal
font-weight: bold

font-weight: lighter
font-weight: bolder

font-weight: 100
font-weight: 200
font-weight: 300
font-weight: 400
font-weight: 500
font-weight: 600
font-weight: 700
font-weight: 800
font-weight: 900

font-weight: inherit 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T11:34:29.043

用来`text-shadow`让它看起来更大胆。

```
.really-bold {
    text-shadow: 
        -1px 0 black, 0 1px black, 1px 0 black, 0 -1px black, 
        -1px -1px black, 1px 1px black, -1px 1px black, 1px -1px black;
} 
```

见[演示](http://jsfiddle.net/laucheukhim/KeyEG/1/)。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T11:27:00.173

编号`font-weight: 900`是最大值。您可以使用其他字体。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T11:52:09.260

设置`font-weight`意味着要求给定重量的*字体*。预计不会使浏览器人为地使用粗体字符，尽管当粗体字体不可用时，*可能会*发生这种情况。`font-weight: bold`

因此，使用比粗体更粗的字体的方法是找到具有合适字体的字体并使用它。这实际上意味着您需要使用可下载的字体（网络字体，`@font-face`），因为人们计算机中常用的字体没有这种字体。

特别是对于 Arial，有 Arial Black，但许多浏览器将其视为一个单独的字体系列，而不是 Arial 系列的重字体。因此，获得它的最佳机会是申报`font-family: Arial Black; font-weight: normal`。

使用`text-shadow`文本颜色或其他技巧永远不会使字体更粗；它只会产生一种大胆的错觉，而且它在印刷上是一个禁忌。

# java - 如何为我的游戏创建计时器？

> ID：15702278
> 
> 赞同：1
> 
> 时间：2013-03-29T11:26:33.610
> 
> 标签：java, android

我正在 Android 2.2 中构建游戏，但我很难在游戏过程中在屏幕上显示计时器并在游戏结束时将时间保存到排行榜。

我有一个游戏循环，并且我扩展了 SurfaceView 以显示我的图形。

我不认为我的游戏`loop`每毫秒都能准确运行，所以我发现很难抓住时间。

我想拥有一个名为`time`存储毫秒的存储变量和一个名为的方法，该方法`getFormattedTime()`将获取时间为`Minutes:Seconds:Milliseconds`

最好的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T11:32:59.447

您可以通过调用获取自 1970 年 1 月 1 日以来的当前时间（以毫秒为单位）`System.currentTimeMillis()`。然后，您可以获取存储的值和新的 currenTimeMillis 之间的差异，以确定已经过去的毫秒数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:38:02.193

如果没有如您所愿，请尝试上述方法，您可以尝试此方法，但它会四舍五入

```
Calendar c = Calendar.getInstance(); 
int seconds = c.get(Calendar.SECOND);
int min= c.get(Calendar.MINUTE);
String time=min+":"+seconds 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T14:14:57.587

我自己解决了这个问题，方法是创建一个`Timer`and`TimerTask`并将它们用作一个单独的循环来进行计时。无论如何，感谢大家的帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-30T04:26:13.513

Java中有一个名为[TimerTask的类。](http://developer.android.com/reference/java/util/TimerTask.html)它允许在一定的时间间隔内执行活动。您可以使用此类为您的游戏应用程序创建一个计时器。

# ios - 使用原型单元格刷新 UITableView

> ID：15702280
> 
> 赞同：-3
> 
> 时间：2013-03-29T11:26:36.343
> 
> 标签：ios, objective-c, uitableview

我有一个带有原型单元的 UITableView。如何使用下拉刷新重新加载它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:30:25.653

您可以尝试将 UIRefreshControll 添加到您的应用中：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Initialize Refresh Control
    UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
    // Configure Refresh Control
    [refreshControl addTarget:self action:@selector(refresh:) forControlEvents:UIControlEventValueChanged];
    // Configure View Controller
    [self setRefreshControl:refreshControl];
} 
```

然后是这样的：

```
- (void)refresh:(id)sender
{
    [self.tableView reloadData];
    [(UIRefreshControl *)sender endRefreshing];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:30:21.743

对于拉刷新，使用[STableViewController](http://www.cocoacontrols.com/controls/stableviewcontroller)

“下拉刷新”和“更多加载”非常简单。

# php - wordpress 菜单 - 将特定类别的列表分配给锚点

> ID：15702285
> 
> 赞同：0
> 
> 时间：2013-03-29T11:26:47.243
> 
> 标签：php, wordpress, wordpress-theming

我想将菜单列表中的特定类分配给它的子锚。

例如：

```
<li class="icon-home list-item">
    <a href="index.php">Home</a>
</li> 
```

我想将上面的输出转换为此（从列表中删除类 icon-home 并将其分配给它的子锚点）：

```
<li class="list-item">
    <a class="icon-home" href="index.php">Home</a>
</li> 
```

**我想做的事 ？？** 在 wordpress 菜单数组中搜索匹配的类`icon-`，然后将其设置为其子锚点，然后从列表中取消设置。

我正在使用一个代码`divider`在菜单数组中搜索一个类，然后将其转换为一个带有 class="divider" 的新列表。这是该代码：

```
// managing divider: add divider class to an element to get a divider before it.
$divider_class_position = array_search('divider', $classes);
if($divider_class_position !== false){
    $output .= "<li class=\"divider\"></li>\n";
    unset($classes[$divider_class_position]);
} 
```

这是我的wordpress菜单覆盖的所有代码，请在回答之前看看：

```
<?php

/**
 * Extended Walker class for use with the
 * Twitter Bootstrap toolkit Dropdown menus in Wordpress.
 * Edited to support n-levels submenu.
 * @author johnmegahan https://gist.github.com/1597994, Emanuele 'Tex' Tessore https://gist.github.com/3765640
 */
class NavMenuWalker extends Walker_Nav_Menu {

    function start_lvl( &$output, $depth ) {

        $indent = str_repeat( "\t", $depth );
        $submenu = ($depth > 0) ? ' sub-menu' : '';
        $output    .= "\n$indent<ul class=\"dropdown-menu$submenu depth_$depth\">\n";

    }

    function start_el( &$output, $item, $depth = 0, $args = array(), $id = 0 ) {

        $indent = ( $depth ) ? str_repeat( "\t", $depth ) : '';

        $li_attributes = '';
        $class_names = $value = '';

        $classes = empty( $item->classes ) ? array() : (array) $item->classes;

        // managing divider: add divider class to an element to get a divider before it.
        $divider_class_position = array_search('divider', $classes);
        if($divider_class_position !== false){
            $output .= "<li class=\"divider\"></li>\n";
            unset($classes[$divider_class_position]);
        }

        $classes[] = ($args->has_children) ? 'dropdown' : '';
        $classes[] = ($item->current || $item->current_item_ancestor) ? 'active' : '';
        $classes[] = 'menu-item-' . $item->ID;
        if($depth && $args->has_children){
            $classes[] = 'dropdown-submenu';
        }

        $class_names = join( ' ', apply_filters( 'nav_menu_css_class', array_filter( $classes ), $item, $args ) );
        $class_names = ' class="' . esc_attr( $class_names ) . '"';

        $id = apply_filters( 'nav_menu_item_id', 'menu-item-'. $item->ID, $item, $args );
        $id = strlen( $id ) ? ' id="' . esc_attr( $id ) . '"' : '';

        $output .= $indent . '<li' . $id . $value . $class_names . $li_attributes . '>';

        $attributes  = ! empty( $item->attr_title ) ? ' title="'  . esc_attr( $item->attr_title ) .'"' : '';
        $attributes .= ! empty( $item->target )     ? ' target="' . esc_attr( $item->target     ) .'"' : '';
        $attributes .= ! empty( $item->xfn )        ? ' rel="'    . esc_attr( $item->xfn        ) .'"' : '';
        $attributes .= ! empty( $item->url )        ? ' href="'   . esc_attr( $item->url        ) .'"' : '';
        $attributes .= ($args->has_children)        ? ' class="dropdown-toggle" data-toggle="dropdown"' : '';

        $item_output = $args->before;
        $item_output .= '<a'. $attributes .'>';
        $item_output .= $args->link_before . apply_filters( 'the_title', $item->title, $item->ID ) . $args->link_after;
        $item_output .= ($depth == 0 && $args->has_children) ? ' <b class="caret"></b></a>' : '</a>';
        $item_output .= $args->after;

        $output .= apply_filters( 'walker_nav_menu_start_el', $item_output, $item, $depth, $args );
    }

    function display_element( $element, &$children_elements, $max_depth, $depth=0, $args, &$output ) {
        //v($element);
        if ( !$element )
            return;

        $id_field = $this->db_fields['id'];

        //display this element
        if ( is_array( $args[0] ) )
            $args[0]['has_children'] = ! empty( $children_elements[$element->$id_field] );
        else if ( is_object( $args[0] ) )
            $args[0]->has_children = ! empty( $children_elements[$element->$id_field] );
        $cb_args = array_merge( array(&$output, $element, $depth), $args);
        call_user_func_array(array(&$this, 'start_el'), $cb_args);

        $id = $element->$id_field;

        // descend only when the depth is right and there are childrens for this element
        if ( ($max_depth == 0 || $max_depth > $depth+1 ) && isset( $children_elements[$id]) ) {

            foreach( $children_elements[ $id ] as $child ){

                if ( !isset($newlevel) ) {
                    $newlevel = true;
                    //start the child delimiter
                    $cb_args = array_merge( array(&$output, $depth), $args);
                    call_user_func_array(array(&$this, 'start_lvl'), $cb_args);
                }
                $this->display_element( $child, $children_elements, $max_depth, $depth + 1, $args, $output );
            }
            unset( $children_elements[ $id ] );
        }

        if ( isset($newlevel) && $newlevel ){
            //end the child delimiter
            $cb_args = array_merge( array(&$output, $depth), $args);
            call_user_func_array(array(&$this, 'end_lvl'), $cb_args);
        }

        //end this element
        $cb_args = array_merge( array(&$output, $element, $depth), $args);
        call_user_func_array(array(&$this, 'end_el'), $cb_args);

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T14:10:00.597

你必须寻找：

```
$item_output .= '<a'. $attributes .'>'; 
```

并将其替换为：

```
$item_output .= '<a'. $attributes .' class="'.$classes[0].'">'; 
```

现在它`<li class="icon-home list-item">`变为`<a href="index.php" class="icon-home">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T08:51:33.150

On $attributes just display Link active and hover effect no one specific class define in link .

# jpa - JPA @PostPersist 用法

> ID：15702288
> 
> 赞同：5
> 
> 时间：2013-03-29T11:27:07.943
> 
> 标签：jpa, callback, lifecycle

我有一个持久化实体对象的方法 persistData()。我有另一种方法 findData() 对同一实体类执行 find() 操作，以获取持久的主键值。当我在实体类的 @PostPersist 中调用 findData() 时，我得到一个空指针异常。这在我的脑海中提出了几个问题：

1.  为什么会出现空指针错误？
2.  @PostPersist 在现实中有什么用？
3.  何时实际调用@Postpersist？提交之后，提交期间还是提交之前？

任何进一步的见解也将不胜感激。请在下面找到相关代码和堆栈跟踪：

```
public void persistData(){
        EntityManagerFactory fac= Persistence.createEntityManagerFactory("test");
        EntityManager man = fac.createEntityManager();

        Employee e = new Employee();
        e.setEmpId(500);
        e.setEmpName("Emp5");
        e.setSalary(5000);
        man.getTransaction().begin();
        man.persist(e);
        man.getTransaction().commit();
        man.close();

    }

public void findData(){
        EntityManagerFactory fac= Persistence.createEntityManagerFactory("test");
        EntityManager man = fac.createEntityManager();

        Employee e=man.find(Employee.class, 500);
        System.out.println(e.getEmpName());
        man.close();    
    }

@PostPersist
public void getData(){
    new Service().findData();
} 
```

堆栈跟踪（部分）：

```
Exception in thread "main" javax.persistence.RollbackException: java.lang.NullPointerException
    at oracle.toplink.essentials.internal.ejb.cmp3.transaction.base.EntityTransactionImpl.commit(EntityTransactionImpl.java:120)
    at oracle.toplink.essentials.internal.ejb.cmp3.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:60)
    at Service.persistData(Service.java:18)
    at Service.main(Service.java:34)
Caused by: java.lang.NullPointerException
    at Service.findData(Service.java:28)
    at Employee.getData(Employee.java:33) 
```

***注意**：我使用的是 JPA 1.0*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T12:46:47.063

要回答您的问题1：

（需要代码和堆栈跟踪）

要回答您的问题 2：

@PostPersist 表示 JPA 回调方法。它允许您通过实体生命周期事件触发一些代码。

一个真实的例子？

假设您有一个 User 表，并且您希望在每次持久化新用户时生成一封确认电子邮件：您可以在*PostPersist*方法中执行此操作。

要回答您的问题 3：

规格的相关部分是血淋淋的。

从 JPA-2.0 规范：

> PostPersist 和 PostRemove 回调方法在实体被持久化或删除后被调用。这些回调也将在这些操作级联到的所有实体上调用。PostPersist 和 PostRemove 方法将分别在数据库插入和删除操作之后调用。**这些数据库操作可能在调用持久化、合并或删除操作后直接发生，也可能在刷新操作发生后直接发生（可能在事务结束时）。生成的主键值在 PostPersist 方法中可用。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-02-05T21:10:29.413

我正在使用的@PostPersist 的一个真实示例是——我正在创建一个任务管理系统。在这个任务管理系统中，任务被分配给一个代理。但是，在某些情况下，任务没有得到源系统自动分配的代理。在这种情况下，每当任务被持久化并且任务分配引擎侦听该事件并进行处理时，我都会触发一个事件。我敢肯定还有其他方法可以做同样的事情，但我认为这种异步方式从性能角度使系统变得更好。

# php - Yii的关系困难

> ID：15702289
> 
> 赞同：0
> 
> 时间：2013-03-29T11:27:11.433
> 
> 标签：php, yii, relational-database

所以问题是我有一个包含的模型 -`Post`字段`User`包含 - 所以 我需要的是发布帖子时，它显示字段而不是字段。我正在努力解决这个问题，请问您能帮我做什么吗？`Post``id, title, body and user_id``User``id, name``user_id``name`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:51:00.817

首先检查您是否在 Post 模型中定义了关系 - 如下所示：

```
public function relations() {
    return array(
        'user' => array(self::BELONGS_TO, 'User', 'user_id')
    );
} 
```

现在您应该以这种方式获取帖子作者（用户名）：

```
$post->user->name; 
```

# joomla - 将静态 javascript 添加到 joomla 的每个页面

> ID：15702296
> 
> 赞同：0
> 
> 时间：2013-03-29T11:27:58.047
> 
> 标签：joomla

我对 Joomla 开发完全陌生。我需要开发 Joomla 插件，将静态 javascript 添加到 Joomla 网站所有页面的页脚。此外，插件需要在数据库中保存 2 个字段，并以每页为基础访问这些字段。此外，还需要管理面板。

现在，我的问题是，我从哪里开始？Joomla 插件开发是一项艰巨的任务，所以如果我能得到一些关于从哪里开始的指示，那将是非常支持的。

我不要求直接的代码，但只是正确的开始方向。

提前谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:40:20.323

Joomla 有三种类型的扩展（你所说的插件）：组件、模块和插件，每一种都有不同的用途。

如果您需要将 javascript 添加到所有页面，最好的地方是您的模板。如果您无权访问模板，只是构建一个扩展，那么您必须创建一个**内容[插件](http://docs.joomla.org/Plugin)**。

如果您需要使用也适用于数据库的管理面板创建扩展，则需要创建一个**组件**。最好的入门是教程[为 Joomla 2.5 开发 MVC 组件](http://docs.joomla.org/Developing_a_Model-View-Controller_%28MVC%29_Component_for_Joomla!2.5)

# c - 动态跳转到 C 中的标签

> ID：15702297
> 
> 赞同：8
> 
> 时间：2013-03-29T11:28:05.843
> 
> 标签：c

我想显示输出 - 数字 1 到 5，然后是 4-5 无限。有什么方法可以传递 i(4) 的值而不是 goto1 中的字符 i。或者是否有任何其他有效的方法来实现这一点，而无需像 switch 中那样说明所有选项（即案例 1：goto1(c1) 等）。

主要目的是跳转到在程序中计算其标签的语句。

```
#define goto1(i) \
goto c##i

int main(){    
    c1 : printf(" num is 1 \n");
    c2 : printf(" num is 2 \n");
    c3 : printf(" num is 3 \n");
    c4 : printf(" num is 4 \n");
    c5 : printf(" num is 5 \n");

    int i=4;
    goto1(i);
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-01T02:28:54.697

如果您...喜欢冒险（或者我的意思是傻？），您可以使用 GCC 扩展[Labels as Values](http://gcc.gnu.org/onlinedocs/gcc-4.8.0/gcc/Labels-as-Values.html#Labels-as-Values)。

> ### 6.3 作为值的标签
> 
> 您可以使用一元运算符 '<code>&&' 获取当前函数（或包含函数）中定义的标签的地址。该值具有类型`void *`。该值是一个常量，可以在该类型的常量有效的任何地方使用。例如：
> 
> ```
>  void *ptr;
>  /* ... */
>  ptr = &&foo; 
> ```
> 
> 要使用这些值，您需要能够跳转到一个。这是通过计算的 goto 语句¹ ,完成的`goto *exp;`。例如，
> 
> ```
>  goto *ptr; 
> ```
> 
> 任何类型的表达式`void *`都是允许的。
> 
> 使用这些常量的一种方法是初始化一个用作跳转表的静态数组：
> 
> ```
>  static void *array[] = { &&foo, &&bar, &&hack }; 
> ```
> 
> 然后您可以选择带有索引的标签，如下所示：
> 
> ```
>  goto *array[i]; 
> ```
> 
> 请注意，这不会检查下标是否在范围内——C 中的数组索引从不这样做。
> 
> 这样一个标签值数组的用途很像 switch 语句的用途。switch 语句更简洁，所以使用它而不是数组，除非问题不适合 switch 语句。
> 
> 标签值的另一个用途是在线程代码的解释器中。解释器函数中的标签可以存储在线程代码中，以实现超快速调度。
> 
> 您不能使用此机制跳转到不同函数中的代码。如果你这样做，就会发生完全不可预测的事情。避免这种情况的最佳方法是将标签地址仅存储在自动变量中，并且永远不要将其作为参数传递。
> 
> 编写上述示例的另一种方法是
> 
> ```
>  static const int array[] = { &&foo - &&foo, &&bar - &&foo,
>                               &&hack - &&foo };
>  goto *(&&foo + array[i]); 
> ```
> 
> 这对共享库中的代码更友好，因为它减少了所需的动态重定位次数，因此允许数据为只读。
> 
> `&&foo`如果包含函数是内联或克隆的，则相同标签的表达式可能具有不同的值。如果一个程序依赖于它们始终相同，`__attribute__((__noinline__, __noclone__))`则应使用它们来防止内联和克隆。如果`&&foo`在静态变量初始化器中使用，则禁止内联和克隆。
> 
> * * *
> 
> 脚注
> 
> ^([1]) Fortran 中的类似功能称为分配的 goto，但该名称在 C 中似乎不合适，在 C 中，人们可以做的不仅仅是将标签地址存储在标签变量中。

在任何情况下都不应将此视为使用该功能的建议。计算`goto`最终从 Fortran 中删除；最好丢在历史的垃圾箱里。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-29T14:12:20.547

你要跳台吗？如果你使用 gcc：它有一个跳转表机制。

```
#include <stdio.h>

int main()
{
    unsigned char data[] = { 1,2,3,4,5,4,5,0 };
    // data to "iterate" over, must be 0-terminated in this example

    void *jump_table[] = { &&L00, &&L01, &&L02, &&L03, &&L04, &&L05 };
    // you should fill this with all 256 possible values when using bytes as p-code

    unsigned char *p = data;

    begin:
        goto *jump_table[ *p ];

    L00:
        return 0; // end app
    L01:
        printf("num %i\n", (int)*p);
        goto next;
    L02:
        printf("num %i\n", (int)*p);
        goto next;
    L03:
        printf("num %i\n", (int)*p);
        goto next;
    L04:
        printf("num %i\n", (int)*p);
        goto next;
    L05:
        printf("num %i\n", (int)*p);
        goto next;
    L06:
    L07:
    // ...
    LFF:
        goto next;

    next:
        ++p;            // advance the data pointer to the next byte
        goto begin;     // start over

    return 0;
} 
```

这种方法的优点是你省去了大的 switch 语句。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-03-29T11:31:21.343

为什么不这样做呢？

```
#include <stdio.h>
#include <stdlib.h>

int main(void)
{
    printf(" num is 1 \n");
    printf(" num is 2 \n");
    printf(" num is 3 \n");

    for (;;){
        printf(" num is 4 \n");
        printf(" num is 5 \n");
    }

    /* Not reachable, but will silence any compiler warnings about main
     * not returning a value. */
    return EXIT_SUCCESS;
} 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-03-29T12:04:56.163

既然你想以错误的方式（又名*创意*）来做这件事，你有没有考虑过蹦床？

```
#include <stdio.h>

typedef void (*generic)(void);
typedef generic (*continuation)(void);

generic first(void);
generic second(void);

int main(void) {
    continuation fubar = first;
    for (;;) {
        fubar = (continuation) fubar();
    }
}

generic first(void) {
    printf(" num is 1 \n"
           " num is 2 \n"
           " num is 3 \n");
    return (generic) second;
}

generic second(void) {
    printf(" num is 4 \n"
           " num is 5 \n");
    return (generic) second;
} 
```

*继续*使用函数指针的想法（看看我在那里做了什么？Giggity！），您可以使用函数指针数组：

```
#include <stdio.h>

typedef size_t (*function)(size_t);

size_t first(size_t);
size_t second(size_t);

int main(void) {
    function function[] = { first, first, first, first, second };
    size_t index = 0;

    for (;;) {
        index = function[index](index);
    }
}

size_t first(size_t index) {
    printf(" num is %d \n", ++index);
    return index;
}

size_t second(size_t index) {
    printf(" num is %d \n", index+1);
    return index-1;
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-29T17:13:18.670

开关不会完成同样的事情吗？

```
int main()
{
    int i = 1;
    while (1)
    {
        switch (i)
        {
            case 1:
                printf(" num is 1 \n");
            case 2:
                printf(" num is 2 \n");
            case 3:
                printf(" num is 3 \n");
            case 4:
                printf(" num is 4 \n");
            case 5:
                printf(" num is 5 \n");
            default:
                break;
        }

        // code to calculate i
        i = 4;
        // end code to calculate i
    }
    return 0;
} 
```

# xml - 从xml文件中提取数据

> ID：15702302
> 
> 赞同：1
> 
> 时间：2013-03-29T11:28:33.553
> 
> 标签：xml, perl, sed, awk, text-processing

我有一个包含数千个条目的 xml 文件，例如：

```
<gml:featureMember>
<Feature>
<featureType>JCSOutput</featureType>
<property name="gml2_coordsys"></property>
<gml:PointProperty>
                <gml:Point>
                  <gml:coordinates>4048313.294966287,5374397.792158723 </gml:coordinates>
                </gml:Point>

</gml:PointProperty>
<property name="BEZEICHNUN">Anton-Bosch-Gasse</property>
<property name="WL_NUMMER">68</property>
</Feature>
</gml:featureMember>

<gml:featureMember>
<Feature>
<featureType>JCSOutput</featureType>
<property name="gml2_coordsys"></property>
<gml:PointProperty>
                <gml:Point>
                  <gml:coordinates>4044355.0231338665,5365146.95116724 </gml:coordinates>
                </gml:Point>

</gml:PointProperty>
<property name="BEZEICHNUN">Anschützgasse</property>
<property name="WL_NUMMER">67</property>
</Feature>
</gml:featureMember> 
```

脚本应搜索列表中给出的名称（例如 Anton-Bosch-Gasse）并将整个段落复制`<gml:featureMember>`到一个新文件中

你会为此目的使用什么——awk、sed、perl？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T11:41:58.537

Sed 和 awk 不是解析 XML 的正确工具。达到 Perl：

```
#!/usr/bin/perl
use warnings;
use strict;

use XML::LibXML;

my $search = 'Anton-Bosch-Gasse';

# Put your real values here!
my $file = '1.xml';
my $uri  = 'http://1.2.3';

my $xpc = XML::LibXML::XPathContext->new;
$xpc->registerNs('gml', $uri);

my $xml = XML::LibXML->load_xml(location => $file);
my $r = $xml->find("//property[.='$search']/ancestor::gml:featureMember");
print $_->serialize for @$r; 
```

或者，如果你觉得上面的例子太冗长，你可以使用[xsh](http://p3rl.org/XML%3a%3aXSH2)：

```
my $search = 'Anton-Bosch-Gasse' ;
register-namespace gml http://1.2.3 ; # Insert the real URI.
open 1.xml ;                          # Insert the real path.
ls //property[.=$search]/ancestor::gml:featureMember ; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T12:06:01.583

使用[XML::Twig](http://search.cpan.org/perldoc/XML%3a%3aTwig)[`xml_grep`](http://search.cpan.org/perldoc/xml_grep2)附带的，您可以编写

```
$ xml_grep --root 'gml:featureMember' \
--cond 'property[string()="Anton-Bosch-Gasse"]' \
to_grep.xml > extract.xml
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T21:19:09.233

这是一个类似于 choroba 的解决方案，但使用的是[Mojolicious](http://mojolicio.us)套件。它的模块[Mojo::DOM](https://metacpan.org/module/Mojo%3a%3aDOM)使用 css3 选择器而不是 xpath 来遍历 XML。

在这里，我首先找到所有`gml:featureMember`元素，然后提取第一个具有匹配后代的元素。

```
#!/usr/bin/env perl

use strict;
use warnings;

use Mojo::DOM;
use Mojo::Util qw/slurp spurt/;

my $dom = Mojo::DOM->new->xml(1);

# read in from file
# $dom->parse( slurp 'myfile.xml' );
# but for the demo ...
$dom->parse(do{ local $/; <DATA> });

my $found = 
  $dom->find('gml\:featureMember')
      ->first(sub{ 
        $_->find('property[name="BEZEICHNUN"]')
          ->first( qr/\QAnton-Bosch-Gasse/ )
      });

spurt "$found", 'output.xml';

__DATA__
<gml:featureMember>
<Feature>
<featureType>JCSOutput</featureType>
<property name="gml2_coordsys"></property>
<gml:PointProperty>
                <gml:Point>
                  <gml:coordinates>4048313.294966287,5374397.792158723 </gml:coordinates>
                </gml:Point>

</gml:PointProperty>
<property name="BEZEICHNUN">Anton-Bosch-Gasse</property>
<property name="WL_NUMMER">68</property>
</Feature>
</gml:featureMember>

<gml:featureMember>
<Feature>
<featureType>JCSOutput</featureType>
<property name="gml2_coordsys"></property>
<gml:PointProperty>
                <gml:Point>
                  <gml:coordinates>4044355.0231338665,5365146.95116724 </gml:coordinates>
                </gml:Point>

</gml:PointProperty>
<property name="BEZEICHNUN">Anschützgasse</property>
<property name="WL_NUMMER">67</property>
</Feature>
</gml:featureMember> 
```

对于此示例，我从 DATA 部分获取 XML。您可以使用注释代码从文件中解析。

如果您确定该属性在结构中始终处于两个深度，则您也可以提高一点效率。

```
my $found = 
  $dom->find('gml\:featureMember property[name="BEZEICHNUN"]')
      ->first( qr/\QAnton-Bosch-Gasse/ )
      ->parent
      ->parent; 
```

# java - 使用 FragmentActivity 中的事件侦听器在 Android 应用程序类中实现侦听器

> ID：15702308
> 
> 赞同：4
> 
> 时间：2013-03-29T11:28:50.620
> 
> 标签：java, android, listener, event-listener

刚开始编程，我正在编写我的第一个应用程序。我已经为此绞尽脑汁已经够久了。我从教程中选择了这个，其中监听器在 ListFragment 中实现，事件监听器位于托管 ListFragment 的 FragmentActivity 中。以下是示例中的情况（仅显示相关部分）：

MyList 类：

```
public class MyList extends ListFragment{

   OnSomeItemSelectedListener mCallback;

   public interface OnSomeItemSelectedListener {
      public void onSomeItemSelectedListener(int position, long id);
    }

   @Override
   public void onAttach(Activity activity) {
      super.onAttach(activity);
      // This makes sure that the container activity has implemented
      // the callback interface. If not, it throws an exception.
      try {
         mCallback = (OnSomeItemSelectedListener) activity;
      } catch (ClassCastException e) {
         throw new ClassCastException(activity.toString()
         + " must implement OnSomeItemSelectedListener");
      }
   }

   @Override
   public void onListItemClick(ListView l, View v, int position, long id) {
      super.onListItemClick(l, v, position, id);
      mCallback.onSomeItemSelectedListener(position, id);
   }
} 
```

MainActivity 类：

```
public class MainActivity extends FragmentActivity implements
        MyList.OnSomeItemSelectedListener{

    @Override
    public void onSomeItemSelectedListener(int position, long id) {
       //some stuff done here when clicked on a item from the listfragment
    }
} 
```

以上工作完美无缺。

我正在尝试在应用程序类中实现这一点，以在 AsyncTask 完成时通知事件侦听器（FragmentActivity）。这是我在应用程序类中所做的：

我的应用程序类：

```
public class MyApplication extends Application {

    OnFetchCompleteListener mCallback;

    public interface OnFetchCompleteListener {
        public void onFetchCompleteListener();
    }

    public synchronized void fetchUpdates() {
        String[] mURLs = getURLs();
        new DownloadDataAsyncTask().execute(mURLs[0], mURLs[1]);
    }

    private class DownloadDataAsyncTask extends
            AsyncTask<String, Void, JSONObject[]> {

        @Override
        protected JSONObject[] doInBackground(String... params) {
            //Some stuff
            return mJSON;
        }

        @Override
        protected void onPostExecute(JSONObject[] result) {
            // Informing listeners on fetchData complete
            mCallback.onFetchCompleteListener();
        }
    }
} 
```

如何`mCallback`在应用程序类中实例化？没有这个，

```
 mCallback = (OnSomeItemSelectedListener) activity; 
```

我从应用程序类中得到一个空指针异常。

非常感谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:43:22.733

我认为您可以从 Activity 而不是从应用程序实例化 mCallback。

在您的活动的 onCreate() 或 onResume() 方法中，您可以编写：

```
MyApplication myApplication = getApplication();
myApplicaton.mCallback = this; 
```

但请确保您的活动已实现 OnFetchCompleteListener （我不知道您为什么在最后一段代码中键入 OnSomeItemSelectedListener。）

# php - 在将数据从 Excel 上传到数据库后的 PHPExcel 中，控件没有退出循环

> ID：15702309
> 
> 赞同：1
> 
> 时间：2013-03-29T11:28:52.450
> 
> 标签：php

我正在尝试使用 PHPExcel 将数据从 excel 上传到 MySQL 数据库。我的代码在 localhost 中运行良好，但是在服务器中它正在将数据从 excel 更新到数据库，但控件没有退出循环（没有终止进程）。相同的代码适用于 3000 行但不适用于 40000 行的 excel 文件。请帮我

```
foreach($sheetData as $str)
    {

        if($z == $chunk_s)
        {
            break;
        }
        $z++;
        if($i == 1)
        {
            $i++;
            $val1 = $str['A'];
            $val2 = $str['B'];
            $val3 = $str['C'];
            $val4 = $str['D'];
            $val5 = $str['E'];
            $val6 = $str['F'];
            $val7 = $str['G'];
            $val8 = $str['H'];
            $val9 = $str['I'];
            $val10 = $str['J'];
            //$val11 = $str['K'];
            $val12 = $str['K'];
            $val13 = $str['L'];
            $val14 = $str['M'];
            $val15 = $str['N'];
            $val16 = $str['O'];
            $val17 = $str['P'];
            $val18 = $str['Q'];
            $val19 = $str['R'];
            $val20 = $str['S'];
            $val21 = $str['T'];

            if($val1 == "Order Date" && $val2 == "No" && $val3 == "Customer No." && $val4 == "Bill-to Name" && $val5 == "Bill-to Contact" && $val6 == "Phone No." && $val7 == "Bill-to City" && $val8 == "E-Mail" && $val9 == "Item No." && $val10 == "Description" && $val12 == "Maximum Agreed Repair Amount" && $val13 == "Status" && $val14 == "Your Reference" && $val15 == "Fault Code" && $val16 == "Resolution Code" && $val17 == "CHAWAGO Code" && $val18 == "Expected Finishing Date" && $val19 == "Amount Including VAT" && $val20 == "Posted Invoice No." && $val21 == "AirWay Bill No.")
            {
            }
            else
            {
                echo "Invalid Excel File.";
                break;
            }
        }
        else
        {       
            $i++;   
            $val1 = $str['A'];
            $val2 = $str['B'];
            $val3 = $str['C'];
            $val4 = $str['D'];
            $val5 = $str['E'];
            $val6 = $str['F'];
            $val7 = $str['G'];
            $val8 = $str['H'];
            $val9 = $str['I'];
            $val10 = $str['J'];
            $val11 = "";
            $val12 = $str['K'];
            $val13 = $str['L'];
            $val14 = $str['M'];
            $val15 = $str['N'];
            $val16 = $str['O'];
            $val17 = $str['P'];
            $val18 = $str['Q'];
            $val19 = $str['R'];
            $val20 = $str['S'];
            $val21 = $str['T'];

            if($val1 == "END OF THE RECORD")
            {
                echo "End of the record is reached!<br /><br />";

                echo "<br />Number of New Records Added : " . $j . "<br />";
                echo "<br />Number of Updated Records  : " . $l . "<br />";
                echo "<br /><a href=''>Click here to go home.</a></pre>";
                exit;

                //break;
            }

            if($val1 == "" && $val2 == "" && $val3 == "" && $val4 == "" && $val5 == "" && $val6 == "" && $val7 == "" && $val8 == "" && $val9 == "" && $val10 == "" && $val12 == "" && $val13 == "" && $val14 == "" && $val15 == "" && $val16 == "" && $val17 == "" && $val18 == "" && $val19 == "" && $val20 == "" && $val21 == "")
            {
                echo "Blank row occurred. Please remove all the blank rows and start uploding the file.<br /><br />";
                echo "<br />Number of New Records Added : " . $j . "<br />";
                echo "<br />Number of Updated Records  : " . $l . "<br />";
                echo "<br /><a href=''>Click here to go home.</a></pre>";
                exit;
            }
            else
            {
                $res1 = mysql_query("select * from servicedetails where Number = '$val2' and Customer_No = '$val3'");
                $num = mysql_num_rows($res1);
                if($num == 0)
                {                
                    $res = mysql_query("INSERT INTO servicedetails (Order_Date, Number, Customer_No, Bill_to_Name, Bill_to_Contact, Phone_No, Bill_to_City, EMail, Item_No, Description, Repair_Status_Code, Maximum_Agreed_Repair_Amount, Status, Your_Reference, Fault_Code, Resolution_Code, CHAWAGO_Code, Expected_Finishing_Date, Amount_Including_VAT, Posted_Invoice_No, AirWay_Bill_No) VALUES ('$val1', '$val2', '$val3', '$val4', '$val5', '$val6', '$val7', '$val8', '$val9', '$val10', '$val11', '$val12', '$val13', '$val14', '$val15', '$val16', '$val17', '$val18', '$val19', '$val20', '$val21')");         
                    $j++;
                    if($j > $chunk_s)
                    {
                        echo "<br />Number of New Records Added : " . $j . "<br />";
                        echo "<br />Number of Updated Records  : " . $l . "<br />";
                        echo "<br /><a href=''>Click here to go home.</a></pre>";
                        exit;
                    }
                }
                else
                {
                    $res = mysql_query("update servicedetails set Status = '$val13' where Number = '$val2' and Customer_No = '$val3'");
                    $l++;
                    if($l > $chunk_s)
                    {
                        echo "<br />Number of New Records Added : " . $j . "<br />";
                        echo "<br />Number of Updated Records  : " . $l . "<br />";
                        echo "<br /><a href=''>Click here to go home.</a></pre>";
                        exit;
                    }
                }
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:30:43.310

很难说。

*   可能数据太多？
*   脚本超出 php 内存？
*   MySQL 因调用过多而终止？
*   您的任何行都有价值`$val1 == "END OF THE RECORD`吗？
*   说什么`$sheetdata.size();`？

你说

> 控制没有退出循环（没有终止进程）

你说的*控制*是什么意思？

# c# - ElapsedEventHandler 未引发

> ID：15702310
> 
> 赞同：1
> 
> 时间：2013-03-29T11:28:54.993
> 
> 标签：c#, events

我正在尝试按照 ac#tutorial 中的示例在经过一定时间后触发计时器类的事件，但它似乎不起作用。
这是代码：

```
class Program
{
    static void Main(string[] args)
    {
        System.Timers.Timer tmr = new System.Timers.Timer();
        tmr.Elapsed += new ElapsedEventHandler(TimerTickHandler);
        tmr.Interval = 1000;
        tmr.Enabled = true;
        Console.ReadKey();
    }

    public static void TimerTickHandler(object sender, ElapsedEventArgs e)
    {
        Console.Write("\rprinting: {0}", e.SignalTime.ToString());
    }

} 
```

我将 TimerTickHandler 附加到 elapsed 事件上，每秒后它应该将时间打印到屏幕上，但我没有得到任何输出。
关于我哪里出错的任何线索？
谢谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T11:34:20.137

通过更改`Console.ReadKey()`为来解决此问题`Console.ReadLine()`。

这是[一个讨论为什么`Console.ReadKey()`对控制台应用程序中的多线程产生奇怪影响的线程](https://stackoverflow.com/questions/15143931/strange-behaviour-of-console-readkey-with-multithreading)。

本质上，`Console.ReadKey()`已经锁定了一个内部对象，该对象`Console.Write()`也试图锁定。因此，当计时器关闭时，`Console.Write()`您用来报告它的那个会阻塞，因为`Console.ReadKey()`已经锁定了`Console.Write()`想要使用的同一个对象。

我认为这是`Console.ReadKey()`. 在等待 I/O 时持有锁总是一个错误，恕我直言。

另请注意，如果您更改`Console.Write()`to`Debug.WriteLine()`并附加调试器，即使您离开它也可以工作`Console.ReadKey()`。

# php - PHP Ming SWFPrebuiltClip 未知标签 74

> ID：15702312
> 
> 赞同：0
> 
> 时间：2013-03-29T11:29:09.430
> 
> 标签：php, libming

只需尝试将预建剪辑添加到 PHP Ming 项目中：

```
$clip = new SWFPrebuiltClip('test.swf');
$m->add($clip); 
```

在这样做时，我遇到了以下错误，我似乎找不到任何有关的文档：

> 致命错误：SWFPrebuiltClip::__construct(): unknown tag 74 in ... on line 10

任何有关导致此问题的帮助将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:05:05.523

在生成将使用`SWFPrebuiltClip`. 这真的很奇怪，因为根据 libming 的[文档](http://www.libming.net/docs/libming/Ming_useSWFVersion.html)，PHP Ming 可以输出最高版本 8 。

应该注意，只有在加载的 SWF 中有文本字段时，这才会出现问题。

# java - 未处理的异常类型 JSONException

> ID：15702315
> 
> 赞同：6
> 
> 时间：2013-03-29T11:29:19.810
> 
> 标签：java, android

```
JSONObject login = new JSONObject();
login.put("Key1", "Value1"); 
```

我只是想用键值对创建一个简单的 JSON 对象。我得到这个例外“ `Unhandled exception type JSONException`”。

```
Map<String,String> map = new HashMap<String,String>
map.put("key1", "value1"); 
```

它们都是用键值对创建对象的等效方式吗？在创建需要发送到服务的对象时，这是首选方式。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-29T11:31:15.477

> 未处理的异常类型 JSONException

您需要将代码包装到 try-catch 块中。这是你的警告。

```
JSONObject login = new JSONObject();
    try {
        login.put("Key1", "Value1");
    } 
    catch (JSONException e) {... } 
```

> 它们都是用键值对创建对象的等效方式吗？在创建需要发送到服务的对象时，这是首选方式。

`JSONObject.put()`抛出 JSONException 而`Map.put()`不是。

两者都作为**键值对**工作，但它们是不同的。

`JSON`是通常用于数据交换的特定轻量级格式，如果您创建它，您可以轻松地通过网络传递其字符串表示。

使用`Map`作为数据结构是不可能的（直接转换为字符串），或者换句话说，`KeySet()`如果你想实现几乎相同的事情，你必须在 Map 和每个键存储键的值到 String（例如使用 StringBuilder）中进行与`JSON`.

所以如果你想通过网络在“不同的机器”之间传递数据，`JSON`直接为它指定。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:39:07.443

去 JSONObject：

*   当您想要创建 JSON 或对其进行操作时

*   如果您传递数据的服务接受 JSONObject

    去收藏

*   如果特定的数据结构适合您

*   如果您传递数据的服务接受 Collection 对象

# c++ - 如何以特定格式将数字打印到字符串的中间？

> ID：15702318
> 
> 赞同：-5
> 
> 时间：2013-03-29T11:29:30.677
> 
> 标签：c++, string, string-formatting, c-strings

我有这样的事情：

```
 count++;
 sprintf(buf, "%d", count);
 char * wyn1 = " <span font='26'><b>buf</b></span>";
 gtk_label_set_markup( GTK_LABEL( wynik1 ), wyn1 ); 
```

但它的值`count`永远不会打印到`wyn1`.

如何按照这种特定格式打印值`buf`？`wyn1`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:37:18.570

`<span font='26'><b>`= 19 个字符
`</b></span>`= 11 个字符
`'\0'`= 1 个字符
，可以说`count`不需要超过 3 个数字。然后您可以直接将其打印到`wyn1`该格式的变量中（`buf`可以省略）：

```
char * wyn1 = malloc(19 + 3 + 11 + 1);
sprintf(wyn1, "<span font='26'><b>%3d</b></span>", count); 
```

但由于这实际上被标记为[c++](/questions/tagged/c%2b%2b "显示标记为“c++”的问题")，你应该简单地使用[`std::ostringstream`](http://www.cplusplus.com/reference/sstream/ostringstream/)：

```
std::ostringstream os;
os << "<span font='26'><b>" << count << "</b></span>"; 
```

之后`os.str().c_str()`就可以像`wyn1`以前的代码一样使用了，但更好的是，这个 C 字符串的生命周期将与`std::string`从流中检索到的对象的临时副本相关联，因此您不需要对您的内存进行内存管理自己的。

# javascript - 使用jquery从url中提取值

> ID：15702319
> 
> 赞同：0
> 
> 时间：2013-03-29T11:29:40.820
> 
> 标签：javascript, jquery

我正在拦截用户对分页链接的点击，我只需要从该链接中提取页码，该链接始终设置在页面变量中。

所以在我的js里面我有....

```
var a = $a.attr("href"); 
```

.. 输出这个

```
/Home/GetTabData?page=2&activeTab=House 
```

**那么我怎样才能从page=**之后只提取这个数字

 **如果重要，请记住这个数字可以是两位或三位长，并且 activeTab 是动态值。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:31:50.523

使用一些*regex*，您可以像这样提取它：

```
var num = +(a.match(/page=(\d+)&/)[1]); 
```

在上面的代码中：

1.  `/page=(\d+)&/`是匹配 和 之间的数字（一个或多个数字字符）的正则`"page="`表达式`"&"`。请注意，我们已经分组了`(\d+)`这是我们之后的数字

2.  `+`前缀用于将提取的字符串转换为数字。这类似于使用`parseInt()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:35:59.237

获得链接后，在本例中为 a，您只需使用 indexOf() 在字符串中搜索“page=”，然后从那里创建一个子字符串到下一个 & 字符。

```
var start, end, value;
start = a.indexOf("page=");
end = a.indexOf("&", start);
value = a.substring(start+5, end); 
```

有关 IndexOf() 的更多信息 [http://www.w3schools.com/jsref/jsref_indexof.asp](http://www.w3schools.com/jsref/jsref_indexof.asp)**

# javascript - 单击一个元素突出显示其他元素

> ID：15702323
> 
> 赞同：3
> 
> 时间：2013-03-29T11:29:55.950
> 
> 标签：javascript, jquery, html, css

单击另一个元素时，有什么方法可以更改元素的属性？例如，考虑这种方法，我有这样的链接：

```
<a href="#100">Click me!</a> 
```

然后靠近它我有这个：

```
<span id="100" class="clickTarget">Important text</span> 
```

然后在我的css文件上我有这个：

```
.clickTarget:target {
    color: #4f8dd5;
} 
```

这意味着每当单击链接时，都会`Important text`更改其颜色。这种方法的问题是页面也会滚动，即使只是一点点。还有其他不滚动页面的方法吗？

如果您认为合适，您可以使用 jQuery。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T11:44:09.487

这将适用于多个链接：

将您的CSS更改为：

```
.clickTarget.target {
    color: #4f8dd5;
} 
```

给你的链接一个共同的类，即`link`

```
$('a.link').on('click', function() {
   $('.target').removeClass('target');
   var id = $(this).attr('href');
   $(id).addClass('target');
   return false;
}); 
```

[http://jsfiddle.net/8S5mD/2/](http://jsfiddle.net/8S5mD/2/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:44:56.663

向您的链接添加一个属性`data-id`（或其他名称）`a`以指定关联的 id `span`。

```
<a href="#100" data-id="100">Click me!</a> 
```

这是javascript：

```
window.onload = function () {
    var alinks = document.getElementsByTagName('a');
    for (var i = 0; i < alinks.length; i++) {
        alinks[i].addEventListener('click', function () {
            var id = this.getAttribute('data-id');
            var span = document.getElementById(id);
            span.style.color = '#4f8dd5';
        });
    }
} 
```

请参阅[jsFiddle上的示例](http://jsfiddle.net/ArieShout/cJm8r/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:45:03.410

假设这样的事情应该适合你：

CSS：

```
 .target{
       color:#4f8dd5;
    } 
```

HTML：

```
<a href="#" data-target="#100">click me<a> 
```

JS：

```
$(document).on("click", "a", function(e) {
   if($(this).data("target")) {
     e.preventDefault(); //just to avoid # appearing in address after click.
     $(".target").removeClass("target");
     $($(this).data("target")).addClass("target");
   }
}) 
```

这样任何（即使它是在执行上面的代码之后添加的）链接都将运行一个函数，如果它具有 data-target 属性，它将用作 jquery 选择器以查找应突出显示的元素。

**升级版：**

更改以反映 David Fregoli 指出的目标行为（一次只能突出显示一个元素）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T12:01:23.820

试试这个

```
 $("a").bind('click',function(e){
          if(!$("span.clickTarget").hasClass('changeTextColor')){
             $("span.clickTarget").addClass('changeTextColor');
           }
     }); 
```

CSS：

```
 .changeTextColor {
         color: #4f8dd5;
    } 
```

# sql - 通过标准 sql 从 1 亿条记录中选择 1000 个不同的名称

> ID：15702324
> 
> 赞同：5
> 
> 时间：2013-03-29T11:29:58.933
> 
> 标签：sql, sql-server, standards, ansi-sql

我有一张`tb_FirstName`有一个字段的表`FirstName`。该表有 1 亿条非空记录，有很多重复，例如 John 出现了 200 万次。的独特计数`FirstName`超过 200 万。

如何使用**标准**sql尽快选择 1000 个*不同的名称？*

 **我目前正在使用以下内容，但这是

*   tSQL
*   也许没有它可能的效率。

    ```
    SELECT x.FirstName
    FROM (
        SELECT  FirstName,
                rnk = RANK() OVER (ORDER BY Firstname)
        FROM    WHData.dbo.tb_DimUserAccount A
        GROUP BY FirstName
        ) x
    WHERE rnk <=1000 
    ```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T11:40:09.217

似乎您可以使用`TOP 1000`with `DISTINCT`：

```
SELECT DISINCT TOP 1000 FirstName
FROM WHData.dbo.tb_DimUserAccount
ORDER BY FirstName 
```

[精简的 SQL Fiddle 演示](http://sqlfiddle.com/#!3/d0437/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T11:43:33.783

试试这个

```
SELECT TOP 1000 FirstName FROM 
(SELECT 
ROW_NUMBER() OVER(PARTITION BY FirstName ORDER BY FirstName) NO,
 FirstName FROM WHData.dbo.tb_DimUserAccount )
  AS T1 WHERE no =1 
```

或者

```
SELECT DISINCT TOP 1000 FirstName
FROM WHData.dbo.tb_DimUserAccount ORDER BY FirstName 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T11:39:28.197

确保在 FirstName 上定义了索引。

```
SELECT TOP 1000 FirstName
FROM (SELECT DISTINCT FirstName
FROM dbo.tb_DimUserAccount) N
ORDER BY FirstName 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-29T11:41:12.583

在对 FirstName 字段的结果进行排序后，您需要数据。

如果未创建索引，则需要全表扫描。如果在 FirstName 上创建索引，则唯一索引扫描可以缩短时间。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-29T11:53:22.077

带有 GROUP BY 子句的选项

```
SELECT TOP 1000 FirstName
FROM WHData.dbo.tb_DimUserAccount
GROUP BY FirstName
ORDER BY FirstName 
```**

# iphone - 如何使用 Youtube API (GTLYoutube) 在 iPhone sdk 上搜索视频？

> ID：15702336
> 
> 赞同：4
> 
> 时间：2013-03-29T11:30:27.300
> 
> 标签：iphone, ios, objective-c, youtube-api, google-oauth

我已经工作了大约 10 个小时，我完全 100% 迷失了方向。我试图简单地查询 youtube，比如“iPad”。然后 youtube 应该返回一个搜索结果列表......但我遇到了各种各样的问题。这是我的代码：

```
 // Create a service object for executing queries
GTLServiceYouTube *service = [[GTLServiceYouTube alloc] init];
// Services which do not require sign-in may need an API key from the
// API Console
service.APIKey = @"AIzaSyD9pvsUtnegJvwv5z5XrBO5vFTBVpErYN8";
// Create a query
GTLQueryYouTube *query = [GTLQueryYouTube queryForSearchListWithPart:@"video"];
query.q = @"hiking boots";
//query.country = @"US";
// Execute the query
GTLServiceTicket *ticket = [service executeQuery:query
                               completionHandler:^(GTLServiceTicket *ticket, id object, NSError *error) {
                                   // This callback block is run when the fetch completes
                                   if (error == nil) {
                                       //I'VE NEVER GOTTEN TO HERE, I ALWAYS GET AN ERROR
                                       }
                                   }else{
                                       NSLog(@"Error: %@", error.description);
                                   }
                               }]; 
```

如果我这样做，我会收到以下错误：

```
 Error Domain=com.google.GTLJSONRPCErrorDomain Code=403 "The operation couldn’t be completed. (Access Not Configured)" UserInfo=0x1edab4c0 {error=Access Not Configured, GTLStructuredError=GTLErrorObject 0x1eda3f80: {message:"Access Not Configured" code:403 data:[1]}, NSLocalizedFailureReason=(Access Not Configured)} 
```

我该怎么办？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T17:34:04.673

“未配置访问”错误可能是因为您尚未在 Google API 控制台中启用 Youtube 数据 API。

您可以在此处访问：[https ://code.google.com/apis/console](https://code.google.com/apis/console)

单击服务并确保 Youtube 数据 API 已打开。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-10-10T20:05:22.497

有一个已知的 google 问题 ( [https://code.google.com/p/gdata-issues/issues/detail?id=5770](https://code.google.com/p/gdata-issues/issues/detail?id=5770) ) 使得即使您打开了正确的 API 它仍然会失败， bypass 是从项目的 google 控制台中删除 bundleID。

# django - Windows 上 Django 1.5 静态文件的正确配置是什么？

> ID：15702339
> 
> 赞同：2
> 
> 时间：2013-03-29T11:30:30.933
> 
> 标签：django, file, url, static, root

我正在使用 Django 1.5 并且我遇到了静态文件的问题。

静态设置：

```
STATIC_ROOT =''
STATIC_URL = '/static/'
STATICFILES_DIRS = ('C:/Python33/Django-1.5/django/bin/pollbooth/templates/files/static',) 
```

我在 INSTALLED APPS 中包含了 django.contrib.staticfiles

之后`manage.py runserver`，当我打开 localhost 或 127.0.0.1:8000 时，我的主页会加载所有静态文件。但是当我单击另一个链接时，该页面不会加载静态文件。

您可以从此链接查看命令框图像 [http://farm9.staticflickr.com/8238/8599256147_aa6875d657_b.jpg](http://farm9.staticflickr.com/8238/8599256147_aa6875d657_b.jpg)

你能告诉我哪里出错了吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:35:26.307

您的静态网址是`/static/`. about 页面在 处查找静态文件`/about/static`，当然不会找到。更改关于页面中的静态引用。

在您的模板中参考下面给出的示例中的静态文件：

```
{{ STATIC_URL }}js/application.js
{{ STATIC_URL }}css/app.css
{{ STATIC_URL }}appname/js/app.js 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T12:00:12.877

在您的模板中，将链接更改为：

```
<link rel="stylesheet" href="{{ STATIC_URL }}js/bootstrap.min.js" /> 
```

现在你可能有以下内容（注意前面缺少斜杠`static/`）：

```
<link rel="stylesheet" href="static/js/bootstrap.min.js" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:34:41.383

您如何在模板中加载静态文件？我猜你的目录结构可能是错误的。

```
/project_root/
manage.py
    /project/
        /static/
            /css/
            /js/
            /img/
        /media/
        settings.py
        urls.py
    /app/
        /static/
            /app/ <-- important when using app specific static files
                /css/
                /js/
                /img/ 
```

# php - PHP5 SoapClient 消耗 WCF - 但返回的对象是空的，没有错误

> ID：15702340
> 
> 赞同：0
> 
> 时间：2013-03-29T11:30:35.067
> 
> 标签：php, xml, soap, wsdl

**目标**：使用一个简单的 WCF4 服务。WCF 采用 2 个参数，DateStart 和 DateEnd 作为 yyyy-MM-dd。返回的结果应包含每个具有大约 16 个属性值的对象。WCF 服务已设置并由其他人管理。他向我保证一切正常，因为他编写了一个 C# 测试实用程序来从电线的另一侧进行测试。（即模拟像我这样的外部客户端调用）。他使用下面我的日期范围取回了大约 1400 个对象。

**问题：** SOAP 调用完成后没有任何错误，我可以看到。我可以在 WSDL 上调用**__getFunctions()**，所以看起来通信正常。但是，通话很快结束。太快了，这告诉我我的查询有问题。结果的大小应该在 1-2 MB 左右。但我的结果对象似乎是空的。他的结果对象包含 1400 个对象。浏览器报告退出状态 200。因此没有连接错误。

**问题：**我是否正确地进行了查询，我是否正确地阅读了结果，还是应该完全做其他事情？我不是新手 PHP 程序员，但绝不是专家。这是我第一次使用 SOAP、WSDL 和 WCF。我已经研究了近3天了。SO和谷歌一直提供答案。我发现了如何做到这一点的各种例子，而且，看起来很简单。然而我一定是错过了什么。我筋疲力尽，不知所措。这个让我难住了。

**这就是我正在做的事情：** 为了测试，我还没有写入文件。只是做一个**var_dump()**来测试。这可以很好地从**__getFunctions()**调用中获取结果。但它似乎不适用于实际的 WSDL 函数调用。我应该在这里做什么？我也在尝试下载 SOAPUI，但我的下载量一直在下降。不知道那里发生了什么。编码：

```
define('NEWLINE', "<br />\n");
define('DUMPFILE','/wcf.xml');

// SOAP client
ini_set('soap.wsdl_cache_enabled', '1'); 
//ini_set('soap.wsdl_cache_ttl', '0'); 

$wsdl = $url.'?wsdl';

$soapClient = new SoapClient($wsdl, array('cache_wsdl' =>   WSDL_CACHE_NONE,'keep_alive'=>1));

var_dump($soapClient->__getFunctions()); 
// SOAP call
////DATE FORMAT yyyy-MM-dd
$args->DateStart    = "2013-03-28";
$args->DateEnd  = "2013-03-29";
try
{
    $result = $soapClient->GetScheduleData($args);
}
catch (SoapFault $fault)
{
    echo "Fault code: {$fault->faultcode}" . NEWLINE;
    echo "Fault string: {$fault->faultstring}" . NEWLINE;
    if ($soapClient != null){
        $soapClient = null;
    }
    exit();
}
$soapClient = null;

var_dump($result);
//file_put_contents(DUMPFILE,$result); 
```

# jquery - jQueryRotate 不工作

> ID：15702341
> 
> 赞同：0
> 
> 时间：2013-03-29T11:30:35.027
> 
> 标签：jquery, mobile

我正在使用 jQuery Rotate 来旋转图像，但我无法弄清楚它不起作用的原因。我在代码中包含了所有内容，但没有运气。我正在FF上测试它。

```
<html>
    <head>
        <script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="http://jqueryrotate.googlecode.com/svn/trunk/jQueryRotate.js"></script>
        <script type="text/javascript">
            $(document).ready(function() {
                $("#image").rotate(180);
            });
        </script>
        <title></title>
    </head>
    <body>
        <img src="https://www.google.com/images/srpr/logo3w.png" id="image" style="margin: 100px 100px">
    </body>
</html> 
```

即使我从这个线程粘贴代码也[无法让 jqueryrotate 正常工作](https://stackoverflow.com/questions/13886980/having-trouble-getting-jqueryrotate-to-work)，但没有运气。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-02T06:21:09.257

我是 jqueryrotate 的作者，不得不说......好吧......我在处理许多浏览器的边距时遇到了一些问题，我建议您将 IMG 放入 DIV 并将此边距添加到 DIV 容器中。不幸的是，它是 CANVAS/VML 解决方案大量变通办法的结果，这使得很难考虑所有可能的情况（例如保证金）。

# javascript - 未显示可视化图表

> ID：15702351
> 
> 赞同：0
> 
> 时间：2013-03-29T11:31:29.157
> 
> 标签：javascript, visualforce

我有下面的代码。我正在尝试创建每个栏包含多个数据点的 google 可视化柱形图。但是没有显示可视化图表。我收到类似**ReferenceError: convertToISO is not defined**的错误是错误。请帮我。

```
<script type="text/javascript" src="http://google.com/jsapi"></script>    
<script src="/soap/ajax/19.0/connection.js" type="text/javascript" />  
<script type="text/javascript">      
formatCurrencyLabel = function( value )    
{  
    return "$" +     String(value); 
}
google.load("visualization" , "1" , {package:["ColumnChart"]});
google.setOnLoadCallback(Chart); 

function Chart() 
{
     data.addColumn(‘string’, ‘Timeframe’);        
     data.addColumn(‘number’, ‘Gold’);   
     data.addColumn(‘number’, ‘Platinum’); 
     data.addColumn(‘number’, ‘Millinium’);                         
     sforce.connection.sessionId = ‘{!$Api.Session_ID}’;  
     var date = new Date();
     var dateMin = date.setMonth(date.getMonth() -13);                  
     var  date = new Date();                  
     var dateMax = date.setMonth(date.getMonth() +1);                 
     var soql = "Select id,name,GOLD_Policies_InForce__c, MNS_Policies_InForce__c, 
         PLAT_Policies_InForce__c, Producer_Name__c, Type__c, Producer_Code__c  from
         Analytics__c where Producer_Name__c ='TestABC2' and Period__c ='21' and CreatedDate <"
       + convertToISO(dateMax) + " and convertToISO(CreatedDate) > " + dateMin + " Order by   
        CreatedDate asc ";                  //console.log(soql);         

  result = sforce.connection.query(soql);                
  var it = new sforce.QueryResultIterator(result);        
      while(it.hasNext())
  {                 
   var record = it.next();   
           data.addRow(['record.CreatedDate',
   {v:parseFloat(record.PLAT_Policies_InForce__c), f:
  formatCurrencyLabel(record.PLAT_Policies_InForce__c)},    
 {v:parseFloat(record.PLAT_Policies_InForce__c), f: 
 formatCurrencyLabel(record.PLAT_Policies_InForce__c)},         
 {v:parseFloat(record.GOLD_Policies_InForce__c), f:
 formatCurrencyLabel(record.GOLD_Policies_InForce__c)}         ]);                                    
  }   
  var options = {'title':'Policies Inforce Rolling 13 Months' , legend: 'left' ,                         
 'width':560,                       'height':228,                       'colors' :  
   ['green','orange','#B5C5D7']                  
 }; 
    var chart = new google.visualization.ColumnChart(document.getElementById('chart'));
     chart.draw(data , options);  
};    
</script>       
  <body><div id="chart"></div></body> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-01T13:48:57.187

问题在于，在以下代码行中，您尝试`convertToISO(dateMax)`作为 javascript 函数调用运行，而不是 SQL 查询的一部分。您尚未定义任何此类函数，因此 JavaScript 引擎抱怨您正在尝试运行未定义的函数

```
var soql = "Select id,name,GOLD_Policies_InForce__c, MNS_Policies_InForce__c, 
     PLAT_Policies_InForce__c, Producer_Name__c, Type__c, Producer_Code__c  from
     Analytics__c where Producer_Name__c ='TestABC2' and Period__c ='21' and CreatedDate <"
   + convertToISO(dateMax) + " and convertToISO(CreatedDate) > " + dateMin + " Order by   
    CreatedDate asc "; 
```

应该：

```
var soql = "Select id,name,GOLD_Policies_InForce__c, MNS_Policies_InForce__c, 
     PLAT_Policies_InForce__c, Producer_Name__c, Type__c, Producer_Code__c  from
     Analytics__c where Producer_Name__c ='TestABC2' and Period__c ='21' and CreatedDate < 
     convertToISO(" + dateMax + ") and convertToISO(CreatedDate) > " + dateMin + " Order by       
     CreatedDate asc "; 
```

# operating-system - 固件和操作系统有什么区别？

> ID：15702355
> 
> 赞同：20
> 
> 时间：2013-03-29T11:32:06.270
> 
> 标签：operating-system, embedded, embedded-linux, firmware, web-operating-system

在打印机、交换机等嵌入式设备中，我很困惑固件和操作系统之间的区别是什么。嵌入式设备的操作系统是否类似于 PC（Linux 和 Windows）？

例如，我有一台打印机，它有一个嵌入式 Web 服务器，允许我远程管理打印机。打开厂商网站，发现操作系统是：OS 9.86。这是什么操作系统？请参阅：[Phaser 8560 支持和驱动程序](http://www.support.xerox.com/support/phaser-8560/downloads/enus.html?operatingSystem=win7x64)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T11:41:53.423

固件是指驻留在非易失性存储器中的一小段代码。在当今办公室常见的硬件外围设备（例如打印机、VoIP 电话等）中，固件通常负责加载（例如操作系统代码签名验证）和管理（例如在恢复模式下刷新操作系统）操作系统，即安装在机器上。执行实际任务（例如打印）是操作系统的工作。

硬件供应商通常使用 Linux 的衍生产品（例如 Cisco IOS）或实时操作系统（例如[VxWorks](https://en.wikipedia.org/wiki/VxWorks)）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-30T06:03:39.290

正如其他人指出的那样，固件位于设备的非易失性存储器中。它包含设备从断电或复位启动时执行的指令。这可能是设备上的全部软件，或者它可能包含跳转到某些其他组件上的指令的指令，例如当 PC 的 BIOS 导致处理器读取硬盘驱动器（或软盘或 CD 上的第一个扇区时） -ROM) 来发现接下来要运行的代码。

操作系统是运行在设备上的代码，它为应用程序提供访问设备功能的服务。例如，它可以提供处理器的时间片、用于访问、输入和输出的文件系统等。

嵌入式设备不需要为应用程序提供操作系统，但这可能是制造商在编写软件时使用的合适模型。可以想象，一台打印机可以将其所有固件放在一个带有一些中断处理程序的运行程序中，而无需将 Web 服务器与操作系统分开。我不知道那个特定的模型。

关键是操作系统可以存在于固件中，而固件可以没有操作系统而存在。它们是独立的概念。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2016-09-01T19:29:53.260

用最简单的话来说：

**操作系统**

包含内核、图形用户界面 (GUI) 或至少一个利用硬件进行文件管理的命令行界面 (CLI)

**核心**

操作系统软件的一部分，操作系统和硬件之间的门卫和翻译器。

换句话说（来自维基百科），内核的主要功能是调解对计算机资源的访问：

*   -中央处理器
*   -内存
*   -I/O
*   - 系统调用

**固件**

*   根据定义，固件是存储在 ROM 上的任何指令。
*   固件是软件和硬件之间的文字游戏，参考“易于修改”的频谱
*   固件独立*于*OS
*   固件通常包含加载操作系统内核的引导程序
*   固件是协调多个通用硬件组件的最低限度指令
*   如果您使用 VLSI 完全自定义/打印逻辑/指令到您自己的电路上，则不需要固件（我认为在谈论固件时要意识到这一点很重要）
*   [固件在遥控](http://en.wikipedia.org/wiki/Radio-controlled_model)车等消费产品上，操作系统不是
*   固件在所有/大部分电子产品中，操作系统不是
*   固件中的病毒可能永远不会被检测到或删除。可以通过全新安装清除操作系统上的病毒

**打开计算机电源时：**

固件 → 内核 → 完整操作系统

基本上

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-07-26T00:18:21.703

### 固件：

对于任何要开始运行的设备（计算机、打印机、扫描仪、数码相机等），它应该有一个在开机/启动时运行的初始程序。这个初始程序称为**固件**。它也称为**引导程序**，也称为**BIOS**。它安装在**ROM**（一种非易失性存储器，其内容是永久性的）中。

固件定位操作系统的内核（请记住，内核是操作系统的一部分）并在启动时将其加载到主内存 (RAM) 中。固件通常用汇编语言或高级语言（如 C/C++）编写。

### 操作系统：

操作系统是一个完整的软件堆栈，它管理计算机的硬件并设置应用程序运行的环境。换言之，操作系统执行设备的指定任务。**内核**位于此软件堆栈的底部，只要您的设备启动并运行，它就会一直运行。当我说操作系统管理硬件时，实际上是内核管理对硬件资源（CPU、内存、输入和输出）的任何请求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-07-26T05:57:19.093

与其他人发布的内容相吻合：

**固件**不仅仅是引导程序或 BIOS，尽管这是大多数消费类设备中该术语的常见用法。

在更复杂的应用中，现场可编程门阵列 (FPGA)、复杂可编程逻辑器件 (CPLD) 和其他类似技术提供了一种用于创建可配置逻辑电路的机制，该机制可以超越由微控制器或更大处理器运行的线性可执行代码. 这通常是专用集成电路 (ASIC) 的替代方案，在放置芯片后无法更改。

在这样的应用程序中，固件不仅仅是加载代码来启动任务。应用程序可以设计为处理多个并行操作，包括但不限于地址路由、信号处理、数学协处理、定时器、电源和复位排序，甚至 LED 和继电器控制。

创建定制设备的可能性是无穷无尽的，对于 FPGA 和 CPLD，可以重新编程。

上述类型的固件（通常）用 VHDL 编程，它描述了同步或异步并行逻辑以表示所需的功能。这些设计通常被布置为可通过内​​存映射地址范围或通过一些其他协议（例如，PCI/PCI-X/PCIe）访问的软件。固件设计创建的寄存器代表所需功能的一组控制和状态。

另一方面，操作系统为软件提供在某些处理环境中运行的接口（即，提供上下文和“规则”以利用处理器和任何软件可访问的硬件或固件）**。**操作系统既可以作为固件中的处理规则制定，也可以（更常见地）它只是从 ROM、闪存或其他媒体加载的软件。

操作系统的机器独立部分与硬件之间的接口有多种形式：[板卡支持包](https://en.wikipedia.org/wiki/Board_support_package)(BSP)、驱动程序等。BSP 通常用于设置处理器地址和特定于板卡的外围设备等. 许多实时操作系统 (RTOS) 供应商提供了一些基本的 BSP 设置和/或工具来帮助您开始工作。

一些设计人员会保持 BSP 设计简单以使事情顺利进行，并编写许多接口以独立于 RTOS BSP 协议来访问硬件或固件；这在定制固件中更为普遍。

是的，嵌入式设备操作系统与个人电脑“相似”。这些区别是在一定范围内的，但它们基本上都是相同的，并为应用程序提供了一个执行上下文，以便在某些外围设备上运行。至于打印机中实际使用的是什么类型的操作系统？如果没有更多信息，就无法真正知道（他们只发布版本是 9.86 ......可以是自定义的，可以是许多 RTOS 或 GPOS 中的任何一个）；此外，还不清楚固件列出的操作系统是否实际上在该下载中，或者只是与兼容性相关的符号。

我希望这会有所帮助！

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2018-05-08T21:51:08.210

固件是占用整个硬件资源的应用程序。换句话说，没有操作系统能够在系统上动态加载应用程序。应用程序是操作系统本身。该应用程序操纵硬件的所有资源。因此，应用程序与硬件高度集成，几乎无法跨硬件。这就是应用程序被称为固件的原因：软件固定到指定的硬件。

例如，空调上的固件控制指定的压缩机和指定的控制面板。因此，固件将无法在其他空调型号上使用。（当然，固件在其他设备上无法使用）固件非常依赖硬件。

最初，固件被定义为“固件保存在非易失性存储设备中，例如 ROM、EPROM 或闪存”。但是定义已经过时了：如果您在该计算机上使用固态磁盘（SSD），您的整个计算机将仅在固件内，但没有任何软件。

在我看来，没有基于嵌入式 Linux 的固件，或者你应该在使用 SSD 时将所有软件都称为固件。

# android - 选中 CCMenuItemToggle cocos2d-x

> ID：15702367
> 
> 赞同：1
> 
> 时间：2013-03-29T11:33:03.107
> 
> 标签：android, c++, android-ndk, cocos2d-x, cocos2d-android

我的代码：

```
 CCMenuItem *soundItem = CCMenuItemImage::create(
                                            "menu/and_sound.png",
                                            "menu/and_sound.png",
                                            this,
                                            NULL );
    CCMenuItem *soundOnItem = CCMenuItemImage::create(
                                            "menu/and_soundon.png",
                                            "menu/and_soundon.png",
                                            this,
                                            NULL );

    CCMenuItemToggle* soundMenu = CCMenuItemToggle::createWithTarget(this,NULL,soundItem,soundOnItem,NULL);
    soundMenu->setPosition(ccp(550,66));
    this->addChild(soundMenu,1); 
```

按钮正常显示，但当我按下它时不会将状态和图像更改为选定状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-28T11:48:09.423

这是一个工作代码示例，您忘记使用 CCMenu

```
CCMenuItem *itemOn = CCMenuItemImage::create("on.png", "on.png", this, NULL);
CCMenuItem *itemOff = CCMenuItemImage::create("off.png", "off.png", this, NULL);

CCMenuItemToggle* itemToggle = CCMenuItemToggle::createWithTarget(this, NULL, itemOff, itemOn, NULL);

CCMenu* menu = CCMenu::create(itemToggle, NULL);
addChild(menu, 1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-08-01T21:01:42.913

我知道现在可能为时已晚，但对于仍在寻找答案的人来说：

代替

```
this->addChild(soundMenu,1); 
```

使用 CCMenu 并在 CCMenu 中添加 soundMenu。

# ios - 在选择器中编写方法？

> ID：15702369
> 
> 赞同：0
> 
> 时间：2013-03-29T11:33:12.750
> 
> 标签：ios, objective-c, xcode, methods, performselector

这可能很疯狂，但我想知道我们是否可以在选择器中编写实际方法。原因是，我的方法只有一个简单的 1-liner。

```
-(void)doThat {
    loadedPhoto.alpha = 1.0;
}

-(IBAction)revealPickers:(id)sender {

    loadedPhoto.alpha = 0.7;
    [self performSelector:@selector(doThat) withObject:nil afterDelay:1.0];
} 
```

所以我想知道是否有这样的捷径（显然这行不通）：

```
[self performSelector:@selector(^(void){loadedPhoto.alpha=1.0;}) withObject:nil afterDelay:1.0]; 
```

可能还是只是愚蠢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:40:17.357

扩展和更正我的评论：

我的评论是错误的，我误读了您的代码并认为您在做`[self performSelectorOnMainThread:etc:]`.

我的实际解决方案（经过快速谷歌搜索 - 并不难找到）：

```
// Delay execution of my block for 10 seconds.
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 10 * NSEC_PER_SEC), dispatch_get_current_queue(), ^(void){
    loadedPhoto.alpha = 1.0;
}); 
```

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:51:03.590

最简单的解决方案是使用`dispatch_after`，但您也可以定义`NSObject`使用块适配器的方法。

```
@interface BlockAdapter

@property (nonatomic, copy, readwrite) void (^block)();

- (void)call;

@end

@implementation BlockAdapter

- (void)call {
    self.block();
}

@end 
```

```
@interface NSObject (PerformBlocks)

- (void)performBlock:((void)^())block afterDelay:(NSTimeInterval)delay;

@end

@implementation NSObject (PerformBlocks)

- (void)performBlock:((void)^())block afterDelay:(NSTimeInterval)delay {
   BlockAdapter* adapter = [[BlockAdapter alloc] init];
   adapter.block = block;

   [adapter performSelector:@selector(call) withObject:nil afterDelay:delay];
}

@end 
```

# django - 如果用户配置文件允许，django model post_save 发送电子邮件

> ID：15702371
> 
> 赞同：0
> 
> 时间：2013-03-29T11:33:26.790
> 
> 标签：django, django-models, django-views

保存对象后，我正在尝试向用户发送电子邮件。但是在发送之前无法让用户个人资料找到是否允许。

模型.py

```
class UserProfile(models.Model):
    user = models.OneToOneField(User)
    ...
    notifications = models.BooleanField(default=True)
    ...

class Follow(models.Model):
    who = models.ForeignKey(User, related_name='he_follow')
    whom = models.ForeignKey(User, related_name='him_follow')

    ...

    def send_notification(sender, created, **kwargs):
        if created:
            obj = kwargs['instance']
            check_it = obj.whom.get_profile().notifications
            if check_it == True:
                #rest code for sending emails works
            else:
                pass

    post_save.connect(send_notification) 
```

这返回错误`'LogEntry' object has no attribute 'whom'` ，所以我认为这是因为 post_save 中没有发件人。但是在我将 post_save 行更改为 `

```
 post_save.connect(send_notification, sender=Follow) 
```

django 因错误而崩溃`NameError: name 'Follow' is not defined`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:15:38.503

真正的问题是您的功能的对齐方式。你把它放在跟随模型下，它必须在模型之外。

```
class Follow(models.Model):
    who = models.ForeignKey(User, related_name='he_follow')
    whom = models.ForeignKey(User, related_name='him_follow')

    ...

//align with Follow model don't put it inside

def send_notification(sender, created, **kwargs):
    if created:
        obj = kwargs['instance']
        check_it = obj.whom.get_profile().notifications
        if check_it == True:
            #rest code for sending emails works
        else:
            pass

post_save.connect(send_notification, sender=Follow) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:47:18.057

检查您需要/发送到的参数`send_notification`。

使用 post_save 信号发送的参数（[Django Docs 中的 post_save](https://docs.djangoproject.com/en/dev/ref/signals/#post-save)）：

*   发件人：模型类。
*   **instance**：正在保存的实际实例。
*   创建：一个布尔值；如果创建了新记录，则为真。
*   raw：一个布尔值；如果模型完全按照呈现方式保存（即加载夹具时），则为真。不应查询/修改数据库中的其他记录，因为数据库可能尚未处于一致状态。
*   using：正在使用的数据库别名。

您的`send_notification`方法在`signals.py`文件中应如下所示：

```
from yourproject.yourapp.models import Follow

... 

def send_notification(sender, **kwargs):
    if kwargs['created']:
        check_it = kwargs['instance'].whom.get_profile().notifications
        if check_it == True:
            #rest code for sending emails works
        else:
            pass

post_save.connect(send_notification, sender=Follow) 
```

# c# - 一次拍摄后图像拍摄失败

> ID：15702373
> 
> 赞同：1
> 
> 时间：2013-03-29T11:33:32.627
> 
> 标签：c#, opencv, image-processing, emgucv

我正在做我的项目，即机器人空气曲棍球运动员；

在项目中，我使用 Microsoft lifecam 来识别“球”的位置。那行得通。

问题是当我以主窗体运行项目时 - 如果在进入游戏之前我正在检查相机（一张图片），它是按钮内的代码：

```
 Capture capture = new Capture(0);
 Image<Emgu.CV.Structure.Bgr,byte>  temp = capture.QueryFrame();
 picture pic = new picture(temp);
 pic.ShowDialog(); 
```

并且在我盯着玩游戏的检查之后停止给我这个错误：

```
An unhandled exception of type 'System.AccessViolationException' 
occurred in Emgu.CV.dll
Additional information: Attempted to read or write protected memory. 
This is often an indication that other memory is corrupt. 
```

图像处理代码为：

```
 class C_Camera
    {
        public Capture capWebCam = null;
        public bool binCapturingInProgress = false;
        public Image<Bgr, byte> imgOriginal;
        public Image<Gray, byte> imgProcessed;
        public ImageBox imageBox1 = new ImageBox();
        public TextBox textBox1;
        public List<PointF> centerList;
        CircleF[] circles;

        public void newCapture(bool b, List<PointF> centers)
        {
            centerList = centers;
            binCapturingInProgress = b;

            try
            {
                capWebCam = new Capture();
            }
            catch (NullReferenceException except)
            {
                MessageBox.Show(except.Message);
                return;
            }

            Application.Idle += processFrameAndUpdateGUI;//add process image function to the applicationlist in tasks
            binCapturingInProgress = true;
        }

        public void processFrameAndUpdateGUI(object sender, EventArgs arg)
        {
            imgOriginal = capWebCam.QueryFrame();
            if (imgOriginal == null) 
            {
                return;
            }
            imgProcessed = imgOriginal.InRange(new Bgr(0, 0, 150)/*min filter*/, new Bgr(80, 80, 256));
         //   imgProcessed = imgOriginal.InRange(new Bgr(0, 0, 175)/*min filter*/, new Bgr(100, 100, 256));

            imgProcessed = imgProcessed.SmoothGaussian(9);//9
            circles = imgProcessed.HoughCircles(new Gray(100), //canny threshhold
                                                          new Gray(50), //accumolator threshold
                                                          2,//size of image 
                                                          imgProcessed.Height / 4, //min size in pixels between centers of detected circles
                                                          15, //min radios
                                                          43)[0];//max radios and get circles from first channel
            foreach (CircleF circle in circles)
            {

                centerList.Add(circle.Center);
                //     circlesOfBalls.Add(circle);

                if (textBox1.Text != "") textBox1.AppendText(Environment.NewLine);
                textBox1.AppendText("ball position = x" + centerList[centerList.Count - 1].X +
                                    ", y = " + centerList[centerList.Count - 1].Y.ToString().PadLeft(4)
                                    + "centerList.Count= " + centerList.Count);

                // + ", radios = " + centerList[centerList.Count - 1].Radius.ToString("###,000").PadLeft(7))

                textBox1.ScrollToCaret();// scrolls the textBox to last line

                // draw a small green circle in the center
                CvInvoke.cvCircle(imgOriginal, // draw on the original image
                                  new Point((int)circle.Center.X, (int)circle.Center.Y),//center point of circle
                                  3, // radios of circle,
                                  new MCvScalar (0, 255, 0), // draw in green color
                                  -1, //indicates to fill the circle
                                  LINE_TYPE.CV_AA, //smoothes the pixels
                                  0);// no shift 

                //draw a red circle around the detected object
              //  if (imgOriginal.Data != null) 
                    imgOriginal.Draw(circle,    //current circle
                                new Bgr(Color.Red), // draw pure red
                                3);
            } // end of for each

           // if(imgOriginal.Data != null)
                imageBox1.Image = imgOriginal;
        } 
```

我试图在谷歌和这里搜索答案，但找不到任何答案。如果我没有进入相机检查它工作得很好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:54:44.197

从外观上看，您只有在我看到您应该在系统空闲时捕获图像时才捕获图像，但这可能太频繁或不够频繁。

尝试添加 DispatcherTimer 并为其提供渲染优先级和 1000/60（每秒 60 帧）的频率。

```
 DispatcherTimer UpdateTimer; 
    public Capture capWebCam = null;
    public bool binCapturingInProgress = false;
    public Image<Bgr, byte> imgOriginal;
    public Image<Gray, byte> imgProcessed;
    public ImageBox imageBox1 = new ImageBox();
    public TextBox textBox1;
    public List<PointF> centerList;
    CircleF[] circles;

    public void newCapture(bool b, List<PointF> centers)
    {
        centerList = centers;
        binCapturingInProgress = b;

        try
        {
            capWebCam = new Capture();
        }
        catch (NullReferenceException except)
        {
            MessageBox.Show(except.Message);
            return;
        }

        binCapturingInProgress = true;

        //Start the timer after the device is ready to be captured (this looks like a good place to do it)
        UpdateTimer = new DispatcherTimer(DispatcherPriority.Render);
        UpdateTimer.Interval = TimeSpan.FromMilliseconds(1000 / 60);
        UpdateTimer.Tick += processFrameAndUpdateGUI;
        UpdateTimer.Start();
    }

    private void processFrameAndUpdateGUI(object o, EventArgs e)
    {
       //Capture new image, render it and display it.

        imgOriginal = capWebCam.QueryFrame();
        if (imgOriginal == null) 
        {
            return;
        }
        imgProcessed = imgOriginal.InRange(new Bgr(0, 0, 150)/*min filter*/, new Bgr(80, 80, 256));
     //   imgProcessed = imgOriginal.InRange(new Bgr(0, 0, 175)/*min filter*/, new Bgr(100, 100, 256));

        imgProcessed = imgProcessed.SmoothGaussian(9);//9
        circles = imgProcessed.HoughCircles(new Gray(100), //canny threshhold
                                                      new Gray(50), //accumolator threshold
                                                      2,//size of image 
                                                      imgProcessed.Height / 4, //min size in pixels between centers of detected circles
                                                      15, //min radios
                                                      43)[0];//max radios and get circles from first channel
        foreach (CircleF circle in circles)
        {

            centerList.Add(circle.Center);
            //     circlesOfBalls.Add(circle);

            if (textBox1.Text != "") textBox1.AppendText(Environment.NewLine);
            textBox1.AppendText("ball position = x" + centerList[centerList.Count - 1].X +
                                ", y = " + centerList[centerList.Count - 1].Y.ToString().PadLeft(4)
                                + "centerList.Count= " + centerList.Count);

            // + ", radios = " + centerList[centerList.Count - 1].Radius.ToString("###,000").PadLeft(7))

            textBox1.ScrollToCaret();// scrolls the textBox to last line

            // draw a small green circle in the center
            CvInvoke.cvCircle(imgOriginal, // draw on the original image
                              new Point((int)circle.Center.X, (int)circle.Center.Y),//center point of circle
                              3, // radios of circle,
                              new MCvScalar (0, 255, 0), // draw in green color
                              -1, //indicates to fill the circle
                              LINE_TYPE.CV_AA, //smoothes the pixels
                              0);// no shift 

            //draw a red circle around the detected object
          //  if (imgOriginal.Data != null) 
                imgOriginal.Draw(circle,    //current circle
                            new Bgr(Color.Red), // draw pure red
                            3);
        } // end of for each

       // if(imgOriginal.Data != null)
            imageBox1.Image = imgOriginal;
    } 
```

# ios - ios比较两个NSStrings

> ID：15702374
> 
> 赞同：-1
> 
> 时间：2013-03-29T11:33:36.910
> 
> 标签：ios, nsstring, udp

我有这个功能来检查来自 udp 连接的数据

```
- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag 
{    
 NSString *response = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
NSString *hello = @"hello";
if(response == hello){
    [self debugPrint:[NSString stringWithFormat:@"ok"]];
}
else{
    [self debugPrint:[NSString stringWithFormat:@"Read:  \n%@",response]];
}

    [response release];

} 
```

我发送了一个“hello”，但它从不返回“ok”消息，它跳转到 else{}

任何人都可以帮忙吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:37:55.320

为了进行比较，您必须使用 isEqualToString 函数：

```
NSString * str = @"oranges";
BOOL res = [str isEqualToString:@"apples"]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:35:44.023

这行代码 if(response == hello) 应该是 if([response isEqualToString:hello]) 因为 "==" 比较对象 "response" 和对象 "hello" 的地址

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:53:10.443

"isEqualToString:" 是一个方法，它接受一个指向 NSString 对象的指针 ("aString") 并将它与调用它的 NSString 对象进行比较。

`if ([thing1 isEqualToString: thing2])`

这里“thing1”是一个指向 NSString 对象的指针，我们使用它的成员方法“isEqualToString:”来与 NSString 对象“thing2”进行比较。

所以“thing1”不是一个参数，而是一个对象，它有一个名为“isEqualToString:”的成员方法（或者更简单的函数）

```
- (void)socket:(GCDAsyncSocket *)sock didReadData:(NSData *)data withTag:(long)tag 
{    
   NSString *response = [[NSString alloc] initWithData:data encoding:NSUTF8StringEncoding];
  NSString *hello = @"hello";
// check like this
  if(response isEqualToString:hello){
    [self debugPrint:[NSString stringWithFormat:@"ok"]];
    }
  else{
    [self debugPrint:[NSString stringWithFormat:@"Read:  \n%@",response]];
    }

    [response release];

} 
```

# php - Highcharts dataLabels 格式

> ID：15702375
> 
> 赞同：0
> 
> 时间：2013-03-29T11:33:38.447
> 
> 标签：php, highcharts

我有一个创建折线图的功能。我给它一个布尔参数来告诉我是否想要十进制。然后我做：

```
if($decimal)
    $format = "{point.y:.2f}";
else
    $format = "{y}"; 
```

并在创建图表时：

```
 plotOptions: {
            line: {
                dataLabels: {
                    enabled: true, 
                    format: ".$format."
            }
     } 
```

但它不起作用。如果不是`".$format."`我举的例子：`'{point.y:.2f}'`它有效

我需要指出“..” 不是问题，因为我将它用于其他一些选项。

请问我的错在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T16:28:57.787

我猜你需要在包含变量之前将值括在引号中。

所以这：

```
plotOptions: {
            line: {
                dataLabels: {
                    enabled: true, 
                    format: ".$format."
            }
     } 
```

变成这样：

```
plotOptions: {
            line: {
                dataLabels: {
                    enabled: true, 
                    format: '".$format."'
            }
     } 
```

不过，您应该会遇到某种 javascript 错误……是吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T12:30:46.930

看看如何在 php [http://docs.highcharts.com/#preprocessing-data-from-a-database](http://docs.highcharts.com/#preprocessing-data-from-a-database)中使用它，以防使用双引号时，不需要使用点，所以它应该是“$格式”。此外，如果您尝试将“{point.y:.2f}”粘贴为字符串，它将不起作用，因为它不是 JSON。我建议使用格式化程序来定义带前缀的返回函数。

[http://api.highcharts.com/highcharts#tooltip.formatter](http://api.highcharts.com/highcharts#tooltip.formatter)

# mysql - 如何在 Ruby on Rails 中将会话值转换为字符串？

> ID：15702377
> 
> 赞同：0
> 
> 时间：2013-03-29T11:33:40.970
> 
> 标签：mysql, ruby-on-rails

我想将购物车项目存储在我的表中，但是当我使用以下代码存储它时：

```
@order.items=@cart.items OR @order.items = session[:cart] 
```

它存储像`#<....>`. 我希望存储项目名称。这怎么可能？订单是我的带有项目列的表。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:01:45.693

尝试

`@cart.items.collect {|cart| cart.value_you_want_to_collect}`

ActiveRecord 不仅返回值，还返回关联，因此在有多个值的情况下，您需要单独收集它们。

如果您想加入多个项目，您可以`.join`在决赛后致电`}`

# php - 如何使用潮汐dk + php 检索表单变量？

> ID：15702381
> 
> 赞同：0
> 
> 时间：2013-03-29T11:33:55.417
> 
> 标签：php, forms, tidesdk

我正在为我的项目使用 TideSdk + PHP，但我无法使用 $_POST 检索帖子变量。
有什么办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:23:11.677

这个例子有点陈旧，但向您展示了如何使用表单内容：

[http://www.sanisoft.com/blog/2011/01/03/introduction-to-creating-desktop-applications-with-php-and-titanium/](http://www.sanisoft.com/blog/2011/01/03/introduction-to-creating-desktop-applications-with-php-and-titanium/)

# ruby-on-rails-3 - 在 ruby on rails 循环中依次替换每个字符串

> ID：15702388
> 
> 赞同：0
> 
> 时间：2013-03-29T11:34:26.790
> 
> 标签：ruby-on-rails-3, gsub

我有以下字符串`'foo bar baz'`。

我想遍历这个字符串并每次删除一个空格，以便我最终得到：

```
foo bar baz
foobar baz
foo barbaz 
```

我希望它与`gsub`检查有多少空格有关，因此它知道循环字符串的次数。

[https://stackoverflow.com/a/6718895/1116573](https://stackoverflow.com/a/6718895/1116573)可能会有所帮助，但我还不太清楚如何根据需要应用它。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:14:42.087

要获得您给出的输出，您可以使用以下内容（这只适用于 ruby​​ >= 1.9）：

```
s = "foo bar baz"

s.chars.each_with_index do |ch, idx|
  if ch == ' '
    s1 = s.dup
    s1[idx] = ''
    puts s1
  end
end 
```

# qt - Qwt Plot 不是从原点开始的

> ID：15702390
> 
> 赞同：0
> 
> 时间：2013-03-29T11:34:31.327
> 
> 标签：qt, qwt

我使用 Qwtplot 来绘制一些数据。现在，轴是 0-50 和 0-100。不幸的是，画布的左下角并不完全位于 (0,0) 处，而是位于 (-0.1,-0.1) 或接近的位置。有没有办法把它精确地放在（0,0）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T16:48:40.243

[http://qwt.sourceforge.net/class_qwt_plot.html#acef5ea818944b93b8695d0c16924eed6](http://qwt.sourceforge.net/class_qwt_plot.html#acef5ea818944b93b8695d0c16924eed6)

```
void QwtPlot::setAxisScale  (   int     axisId,
    double  min,
    double  max,
    double  stepSize = 0 
    ) 
```

尝试在没有正确对齐的两个轴上使用上述功能。如果它仍然有某种差距，您可以尝试将最小值设置为略大于零，看看它是否排列得更好。

希望有帮助。

# c - 简单的字符设备驱动程序/模块 - Linux RedHat 8 (2.4.18) 在 ./module_unload 之后出现 VM 分段错误

> ID：15702391
> 
> 赞同：2
> 
> 时间：2013-03-29T11:34:31.387
> 
> 标签：c, linux-kernel, linux-device-driver, redhat

**编辑**：我修复了代码并将其转换为关于内存分配的更紧凑的代码，现在一切正常。如果我做错了什么，你可能会意识到我

我不确定 Write&Read 的实现是否完美....

```
#define ARRAY_LENGTH 128
#define MY_DEVICE "my_device" 
MODULE_LICENSE("GPL");  MODULE_AUTHOR("Anonymous");
/* globals */
  int my_major = 0; /* will hold the major # of my device driver */
  int g_index=0;    /*index of elements we will act on*/

typedef struct _my_array_elem{
    char* string;
    int size;
} my_array_elem;

    my_array_elem my_array [ARRAY_LENGTH] ;   //global array of strings 

int init_module(void)
{
    int i;
    //no need to malloc&free for this string?
    char* our_names = "333333333 \n222222222";

    my_major = register_chrdev(0,MY_DEVICE,&my_fops);
    if (my_major < 0) {
        printk(KERN_WARNING "can't get dynamic major\n");
        return my_major;
    }

    my_array[0].string=our_names;   
    my_array[0].size=strlen(our_names);

    for (i=1; i<ARRAY_LENGTH; i++)  {                       
        my_array[i].string=NULL;
        my_array[i].size=-1;
    }
   return 0;
}

void cleanup_module(void)
{
    int i;
    int ret = unregister_chrdev(my_major, MY_DEVICE);
    if (ret < 0){
        printk("Error in unregister_chrdev: %d\n", ret);
        }

        //CHECK!!: do I need to free the names string? (index 0)?
        for (i=1; i<ARRAY_LENGTH; i++){
            kfree(&my_array[i].string);
        }       
    return;
}

ssize_t my_read(struct file *filp,char *buf,size_t count,loff_t *f_pos)
   {    

    int bytes_read = count;
    if (g_index<0 || g_index>ARRAY_LENGTH-1) {
        return -EINVAL;   //illegal index   
        }

    if (my_array[g_index].size < count){
        bytes_read = my_array[g_index].size;
        }

    if (copy_to_user(buf, my_array[g_index].string, bytes_read)!=0){
        return -ENOMEM;     
        }

    return bytes_read;   
}

ssize_t my_write(struct file *filp, const char *buf, size_t count, loff_t *f_pos)
{

    if (g_index<1 || g_index>ARRAY_LENGTH-1){
        return -EINVAL;
        }   

    if ((my_array[g_index].size) != -1){
        kfree(&my_array[g_index].string); 
    }

    char* temp_string=kmalloc(count, GFP_KERNEL);
    if (temp_string == NULL){                         
            return -ENOMEM; //Out of memory
        }

    if (copy_from_user((void*)temp_string, buf, count)){                                                              
            kfree(temp_string);       
            return -ENOMEM; //Out of memory
        }

    my_array[g_index].string=temp_string;     
    my_array[g_index].size=count;       
    return count;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-06T15:43:19.033

初读时：

```
my_array_elem* temp_elem=kmalloc(sizeof(my_array_elem), GFP_KERNEL);         
....
copy_from_user((void*)temp_elem->string, buf, count) 
```

您正在从用户那里复制数据，`buf`但`string`尚未分配地址。

你需要类似的东西：

```
temp_elem->string = kmalloc(count, GFP_KERNEL); 
```

老实说，您对动态内存的处理有点令人困惑......您可能应该编写一些处理它的函数，而不是在读/写函数中编写所有字节处理代码。

# postsharp - 在 postsharp 中创建全局方面

> ID：15702395
> 
> 赞同：0
> 
> 时间：2013-03-29T11:35:05.087
> 
> 标签：postsharp, aop

我正在寻找一种方法，在我的项目中的许多地方，所有方面都可以在方法上运行，而不必手动将属性标记添加到每个方法或类中。

我的整个解决方案包含大约 20 个单独的项目。我创建了一个名为 myname.space.Attributes 的文件，其中包含我的属性声明，以及一个名为 GlobalAspects 的文件，其中包含以下内容：

```
using PostSharp.Patterns.Diagnostics;
using PostSharp.Extensibility;
using myname.space.Attributes;

// This file contains registration of aspects that are applied to several classes of this project.
[assembly: TraceLoggingAttribute(AttributeTargetTypes = "myname.space.Controllers.*", 
                            AttributeTargetTypeAttributes = MulticastAttributes.AnyVisibility, 
                            AttributeTargetMemberAttributes = MulticastAttributes.AnyVisibility)
]

[assembly: TraceLoggingAttribute(AttributeTargetTypes = "myname.space.Repositories.*",
                            AttributeTargetTypeAttributes = MulticastAttributes.AnyVisibility,
                            AttributeTargetMemberAttributes = MulticastAttributes.AnyVisibility)
] 
```

这样做的目的是将我的 TraceLoggingAttribute 添加到其他 2 个项目（控制器和存储库）中的所有方法中。

我已经设置了这两个其他项目来引用 Attributes 项目，如果我将 [TraceLoggingAttribute] 标记放在 Controller 和 Repositories 项目中的类和方法上，该属性就可以正常工作。

有没有一种方法可以让我的 GlobalAspects.cs 以我正在寻找的方式工作？如果我在这里没有很好地解释这个问题，请提问

出于兴趣，TraceLoggingAttribute 定义为：

```
namespace myname.space.Attributes
{
    [MulticastAttributeUsage(MulticastTargets.Method, TargetMemberAttributes = MulticastAttributes.Instance)]
    [Serializable]
    public class TraceLoggingAttribute : OnMethodBoundaryAspect
    { 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:31:17.803

不幸的是，您只能将属性应用于当前编译的程序集（或通过 TargetAssembly 属性调用其他程序集，但这也只影响当前编译的程序集）。

我认为最简单的解决方案是将 GlobalAspects.cs 链接到您希望受其影响的所有项目中。这应该可以按您的预期工作并且不会引起任何问题。

希望有帮助。

# java - 用于使用访问令牌和秘密获取朋友列表的 Twitter api

> ID：15702397
> 
> 赞同：1
> 
> 时间：2013-03-29T11:35:25.160
> 
> 标签：java, jakarta-ee, twitter, access-token

我在 StackOverFlow 上的第一个问题！如果我错了，请原谅我，我的问题没有任何意义或伤害了社区。

我使用 OAuth 为我的 Android 应用程序获得了**Twitter 访问令牌**和**Twitter 密码。**（非常感谢这里的人）

现在我想获取该特定用户帐户的朋友列表。

我将它们都发送到我需要访问该帐户的朋友列表的服务器应用程序。

如何获取好友列表？有什么图书馆吗？

任何见解都将受到高度赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T14:18:20.430

从此 stackoverflow 链接检查最佳 Twitter 共享库：

[Android Twitter 连接？](https://stackoverflow.com/questions/4967625/android-twitter-connectivity/11240243#11240243)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:40:03.200

Temboo库使与 Twitter API 的交互变得简单[。](http://temboo.com)这是您询问的朋友列表查询的链接：

[https://www.temboo.com/library/Library/Twitter/FriendsAndFollowers/GetFriendsByID/](https://www.temboo.com/library/Library/Twitter/FriendsAndFollowers/GetFriendsByID/)

您可以在浏览器中与它进行交互，然后生成您需要将该行为嵌入到您的应用程序中的 Java 源代码。

（完全披露：我在 Temboo 工作）。

# android - 将android包组合到单个项目中

> ID：15702399
> 
> 赞同：0
> 
> 时间：2013-03-29T11:35:28.390
> 
> 标签：android, package, android-manifest, directory-structure

朋友我在 Eclipse 中有 3 个 android 项目，比如 App1、App2、App3，我想将所有这些组合到另一个 android 项目中，比如 AppStarter，它只有按钮来启动这 3 个项目中的每一个项目的主要活动。那么如何结合AppStarter下的App1,2,3的所有文件以及我必须在每个项目的android清单中进行哪些更改？

不要避免详细说明，我真的很困惑。虽然指出我正确的方式也很有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:47:55.387

做你想做的最简单的方法是使用 App1、2 和 3 作为 Android 库项目并将它们链接到你的主项目。你要做的就是在[这里](http://developer.android.com/tools/projects/projects-eclipse.html#SettingUpLibraryProject)。[在那里](http://developer.android.com/tools/projects/index.html#LibraryProjects)你可以找到一些对图书馆项目有帮助的东西。

只需点击几下鼠标。

# database - LibreOffice Base 中的数据库层次结构、聚合、关系

> ID：15702400
> 
> 赞同：2
> 
> 时间：2013-03-29T11:35:35.973
> 
> 标签：database, libreoffice, libreoffice-base

我正在做一个家庭作业项目，我们为商店设计一个网站，我被分配了数据库。这是我第一次尝试数据库。我使用 LibreOffice Base 进行设计，找不到任何关于如何制作子类型的指南。例如，对于库存中的每件衬衫，它都会有一组不同的颜色，并且对于每种不同的颜色，都有一个单独尺寸的列表以及每种尺寸的库存数量。但是，我在“表关系”中的任何地方都找不到聚合。所以我用基本信息（品牌、价格等）为衬衫制作了一个表格，然后是一个只有 2 列（尺寸和库存单位数量）的单独表格——我们让多种颜色的可能性等待现在）。然后，我为衬衫制作了一个包含基本信息的表单和一个包含 2 列的子表单：尺寸和数量可用。这两种形式都是表格而不是带标签的文本框。但是，衬衫尺寸的子表单不会为主表单中的每一行（即具有衬衫基本信息的那一行）维护单独的信息。我该怎么做？

最后，由于这是我对数据库的第一次破解，如果我做错了，我一点也不感到惊讶，如果是这样，我会很高兴推动正确的方向或解释如何做到这一点的网页，我由于未输入正确的搜索词而未找到。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-01-28T04:48:04.033

您需要在主表中创建链接字段。衬衫表有一个主键；请参阅从属表中的内容。或者，在从属表中创建一个主键并在主表中引用它。然后在子表单 --> 属性中，指定主从字段之间的适当链接。[LibreOffice Base 手册 (p.105)](https://wiki.documentfoundation.org/images/e/e8/BH40-BaseHandbook.pdf#105)中描述了该功能

# android - 引起：java.lang.ArrayIndexOutOfBoundsException

> ID：15702407
> 
> 赞同：-3
> 
> 时间：2013-03-29T11:36:10.353
> 
> 标签：android

```
public class CodeMainActicity extends Activity
{
private ExpandListAdapter ExpAdapter;
private ArrayList<ExpandListGroup> ExpListItems;
private ExpandableListView ExpandList;
public String[] groups = null;
public String[][] headers = null;
DisplayMetrics metrics;
int width;

public int GetDipsFromPixel(float paramFloat)
{
  return (int)(0.5F + paramFloat * getResources().getDisplayMetrics().density);
}

public ArrayList<ExpandListGroup> SetStandardGroups()
{
ArrayList<ExpandListGroup> localArrayList1 = new ArrayList<ExpandListGroup>();
int i = 0;
if (i >=groups.length){
  return localArrayList1;
}
ExpandListGroup localExpandListGroup = new ExpandListGroup();
localExpandListGroup.setName(groups[i]);
ArrayList<ExpandListChild> localArrayList2 = new ArrayList<ExpandListChild>();
for (int j = 0; ; j++)
{
  if (j > 11){

  while (headers[i][j] == null)
  {
    localExpandListGroup.setItems(localArrayList2);
    localArrayList1.add(localExpandListGroup);
    i++;
    break;
  }
  }

  ExpandListChild localExpandListChild = new ExpandListChild();
  localExpandListChild.setName(headers[i][j]);
  localExpandListChild.setTag(null);
  localArrayList2.add(localExpandListChild);
}
}

  public void onCreate(Bundle paramBundle)
{
this.groups = new String[11];
this.headers = ((String[][])Array.newInstance(String.class, new int[] { 14, 10 }));
this.groups[0] = "Data Types";
this.groups[1] = "Date Time";
this.groups[2] = "Regular Expressions";
this.groups[3] = "Class";
this.groups[4] = "Collections";
this.groups[5] = "Generics";
this.groups[6] = "Reflection";
this.groups[7] = "Security";
this.groups[8] = "Design Patterns";
this.groups[9] = "Thread";
this.groups[10] = "File Stream";
this.headers[0][0] = "Boxing and Unboxing";
this.headers[0][1] = "Complex Type";
this.headers[0][2] = "Enum";
this.headers[0][3] = "Tuple type";
this.headers[0][4] = "Hex to Int";
this.headers[0][5] = "Nullable Integer";
this.headers[0][6] = "Custom ToString()";
this.headers[0][7] = "Checked() and Unchecked()";
this.headers[0][8] = "Overflow";
this.headers[0][9] = "Char  methods";
this.headers[1][0] = "Get between Days";
this.headers[1][1] = "Add one week to current date";
this.headers[1][2] = "DateTime Compare";
this.headers[2][0] = "Email Validation";
this.headers[2][1] = "URL validation";
this.headers[2][2] = "Zipcode validation";
this.headers[3][0] = "Access modifiers";
this.headers[3][1] = "Inheritance";
this.headers[3][2] = "Interface";
this.headers[3][3] = "Method Overloading";
this.headers[3][4] = "Overriding";
this.headers[3][5] = "Abstract class";
this.headers[4][0] = "Array List";
this.headers[4][1] = "Hash Table";
this.headers[4][2] = "Dictionary";
this.headers[5][0] = "Simple Generic hierarchy";
this.headers[5][1] = "Generic IEnumerable";
this.headers[5][2] = "Generic Collection class";
this.headers[6][0] = "AppDomain Setup";
this.headers[6][1] = "Type.GetMethods";
this.headers[6][2] = "Assembly Version Information";
this.headers[7][0] = "MD5 encode";
this.headers[7][1] = "File Checksum";
this.headers[7][2] = "Password Encryption";
this.headers[8][0] = "Facade Pattern";
this.headers[8][1] = "Factory Pattern";
this.headers[8][2] = "Observer Pattern";
this.headers[8][3] = "Singleton Pattern";
this.headers[8][4] = "Adapter Pattern";
this.headers[9][0] = "Creating Thread";
this.headers[9][1] = "Asynchronous Calls";
this.headers[9][2] = "Mutex";
this.headers[10][0] = "Display File contents";
this.headers[10][1] = "Write to a file";
this.headers[10][2] = "Append to File";
super.onCreate(paramBundle);
requestWindowFeature(1);
setContentView(R.layout.codemainscreen);
Button localButton = (Button)findViewById(R.id.btnhome);
this.ExpandList = ((ExpandableListView)findViewById(R.id.ExpList));
ExpListItems = SetStandardGroups();
this.ExpAdapter = new ExpandListAdapter(this, this.ExpListItems);
this.metrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(this.metrics);
this.width = this.metrics.widthPixels;
this.ExpandList.setIndicatorBounds(this.width - GetDipsFromPixel(50.0F), this.width - GetDipsFromPixel(10.0F));
this.ExpandList.setAdapter(this.ExpAdapter); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:40:57.367

你在这个循环中没有条件

```
for (int j = 0; ; j++) 
```

这意味着在一段时间后这必须崩溃。

```
for (int j = 0; /* add condition here */ ; j++) {
  if (j > 11){
    while (headers[i][j] == null) ... // or here ArrayIndexOutOfBoundsException 
```

干杯!

# c# - 如何访问匿名控件的结果？

> ID：15702408
> 
> 赞同：0
> 
> 时间：2013-03-29T11:36:12.187
> 
> 标签：c#, events, anonymous-function

我有这个代码

```
 textBox1.MouseDown += (o, em) => 
if (new FolderBrowserDialog
    { 
        RootFolder = Environment.SpecialFolder.Desktop 
    }.ShowDialog() == System.Windows.Forms.DialogResult.OK) 
    {   
        textBox1.Text =  // how do I know HERE, that what was the selected folder in the dialog box?
        // something like
        // textBox1.Text = thisDialogBox.SelectedFolder; 
    } 
```

我知道还有很多其他方法，我可以为这个对话框创建一个变量，然后做我需要的事情，或者不使用匿名函数等。但这不是重点，我想知道的是

鉴于其匿名性，我如何在这种情况下访问此控件？

**编辑：**好的，正如格兰特指出的那样，它不是关于匿名性，而是我没有对它的引用，那么有没有一种可能的方法来获取它的访问权限*而不存储它的引用*？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:38:10.023

```
textBox1.MouseDown += (o, em) =>
{
    var dialog = new FolderBrowserDialog
    { 
        RootFolder = Environment.SpecialFolder.Desktop 
    };
    if (dialog.ShowDialog() == System.Windows.Forms.DialogResult.OK) 
    {   
        textBox1.Text = dialog.SelectedFolder;
    }
} 
```

好的，可能不是问题的确切答案，但这是唯一明智的方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T14:10:57.923

如果不存储对`FolderBrowserDialog`. 在您的示例中，一旦`ShowDialog`终止，`FolderBrowserDialog`则超出范围。您唯一的选择是存储参考：

```
textBox1.MouseDown += (o, em) =>
{
    using (var dialog = new FolderBrowserDialog())
    {
        dialog.RootFolder = Environment.SpecialFolder.Desktop;

        if (dialog.ShowDialog() == System.Windows.Forms.DialogResult.OK)
            textBox1.Text = dialog.SelectedPath;
    }
}; 
```

# java - java.util.date 的值自己改变了

> ID：15702409
> 
> 赞同：0
> 
> 时间：2013-03-29T11:36:16.860
> 
> 标签：java, linux, tomcat

当我启动 tomcat 时，打开一个 Jsp 页面

`new java.util.date()`

一开始，日期是正确的，喜欢它

`date : Fri Mar 29 19:06:07 GMT 2013`

很快它就变成了另一个没有 timezone 的值。

`date : Fri Mar 29 11:06:07 GMT 2013`

我的服务器是linux centos6.4，tomcat版本是7，jdk1.6，服务器时钟配置是：

![在此处输入图像描述](../Images/e58525abbb706e6140d71790286d990c.png)

我修改了我的 tomcat catalina.sh ，添加了用户区：

`JAVA_OPTS="$JAVA_OPTS $LOGGING_MANAGER -Duser.timezone=GMT+08"`

我怀疑我的应用程序可能有一些错误，但是哪些错误可以做出`date`改变。我在这个问题上花了几个小时并没有解决。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:49:54.900

Java 的 Calendar 类有管理时区的方法。

```
Calendar calendar = Calendar.getInstance();
calendar.setTimeZone(TimeZone.getDefault());
String monthString = calendar.getDisplayName(Calendar.MONTH, Calendar.LONG, Locale.US); 
```

还有一个`DateFormat`类可以帮助您从日历中获取完整的日期字符串。

# javascript - NodeJs 捕获异步方法中发生的未处理错误

> ID：15702410
> 
> 赞同：2
> 
> 时间：2013-03-29T11:36:22.367
> 
> 标签：javascript, node.js, error-handling

本来想问一个问题，关于如何基于Node.js创建robuts web server。但是，这可能是一个非常大且模棱两可的问题。因此，我将其分解为创建 robuts Web 服务器时所面临的小而具体的问题或挑战。

所以，我面临的挑战之一是如何在 Node.js 中捕获所有未处理的错误？我想这样做是因为我不希望任何未处理的错误阻止 Node.js 运行，从而导致 Web 服务器停机。

想到的解决方案是将服务器运行的代码块放在 try-catch 块中，以捕获所有未处理的错误。但是，如果异步方法发生任何错误，这将不起作用。例如，我的 Web 服务器可能如下代码所示：

```
var fs = require('fs');
var http = require('http');

try {

    // Here is my main web server, it could happen errors by adding
    // more and more modules and functionalities to my server.
    // I need to catch all unhandled errors to prevent server from crashing
    // So, I put my whole server running in a try-catch block, but any error from
    // an async method could not be caught!
    http.createServer(function(req, res) {
        throw Error("An unhandled error happens!");
    }).listen(1234);

}catch (e){
    console.log("An unhandled error caught!")
}

console.log('Server is listening to port 1234'); 
```

那么，我是否处于正确的错误处理方向以确保服务器不会停止？还是有其他机制可以使服务器从错误中恢复？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T13:42:13.417

您需要使用[域](http://nodejs.org/api/domain.html)。

一个包含所有服务器的全局域和每个请求一个域。如果您在初始化期间遇到错误，全局域将捕获该错误，然后您可以记录它，执行一些清理任务并终止服务器。如果您从请求中收到错误，请以最高优先级记录它并继续为其他请求提供服务。这就是 node.js 希望我们编写健壮的 Web 服务器的方式。

主要问题是尝试尽可能优雅地关闭。优雅退出意味着当您需要终止服务器（从 ctrl-c 或 sigint 或错误或其他）而不是执行简单`process.exit(1)`操作时，您必须清理资源，例如关闭数据库连接、关闭文件、通知某人等。您不能使用`process.on("exit", ...)`，因为当调用处理程序时，事件循环不起作用并且您无法执行异步任务。

另外，如果您使用工作人员，当服务器需要关闭时，您如何优雅地关闭它们？

你如何处理快速错误？

所有这些东西似乎都很难实现以始终保证正常关闭。这就是我做[node-grace](https://github.com/Gagle/Node-Grace)的原因。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T12:20:37.677

在回调函数中使用 try/catch：

```
var fs = require('fs');
var http = require('http');

try {
    http.createServer(function(req, res) {
        try{
            // some code trowing erors
        }catch(e){
             console.log("error: " + e);
        }
}).listen(1234);

}catch (e){
    console.log("An unhandled error caught!")
}

console.log('Server is listening to port 1234'); 
```

为什么会这样？异步 http 回调不会与设置 http 服务器回调函数的代码在同一滴答声中运行（此外，每次服务器收到请求时都会调用该函数）。试试你自己：

```
 try{
      throw Error("An unhandled error happens!");
 }catch(e){
     console.log(e)
 } 
```

和：

```
 try{
     process.nextTick(function(){
        throw Error("An unhandled error happens!")
     });
 }
 catch(e){
     console.log(e)
 } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T11:57:23.210

如果您可以选择使用 Express，我建议您使用它而不是相当低级的`http`模块。使用 Express，您可以很好地处理错误：

```
var express = require('express');
var app     = express();

app.get('/', function(req, res) {
  throw Error("An unhandled error happens!");
});

app.use(function(err, req, res, next) {
  console.log('error', err);
  res.send(500); // send a proper HTTP 500 message back to the client
});

app.listen(1234);

console.log('Server is listening to port 1234'); 
```

不然看看Node的[domain模块](http://nodejs.org/api/domain.html)

# angularjs - 将 ngInclude 绑定到不同的模型

> ID：15702411
> 
> 赞同：0
> 
> 时间：2013-03-29T11:36:28.270
> 
> 标签：angularjs, angularjs-scope

是否可以为 ngInclude 指定模型，以便在包含的模板内完成的任何更改都反映在指定的模型上。例如：

我有一个模型，例如：

```
$scope.member = {

    name: "Member1",
    children:[
    {
        name:"Child1"
    },
    {
        name:"Child2"
    }
    ]
}; 
```

和模板：

```
<script type="text/ng-template" id="name.html">
    <input type="text" ng-model="member.name"/>
</script> 
```

现在是否可以传递 ngInclude “成员”或任何子项并修改其各自的名称属性？我尝试将 ng-model 传递给 ng-template 但它不起作用。我尝试使用预期模型动态加载范围，但如果模型被删除，我会留下一个孤立模板。以下是jsfiddle代码：

[http://jsfiddle.net/vaibhavgupta007/p7E5K/](http://jsfiddle.net/vaibhavgupta007/p7E5K/)

我希望重用模板，而不是为不同的模型复制相同的模板。我已经提到了这个问题：

[如何在 AngularJS 中为 ngInclude 指令指定模型？](https://stackoverflow.com/questions/13422966/how-to-specify-model-to-a-nginclude-directive-in-angularjs)

但是这里的模型没有被删除。

**编辑**

到目前为止，我还没有掌握创建自定义指令的概念。但是是否会结合 ng-include 帮助创建一个新指令？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:24:44.470

你最后一个问题的答案是：是的。在指令中，您还定义了模板和范围。范围的内容完全掌握在您手中。

见这里：http: [//jsfiddle.net/vgWQG/1/](http://jsfiddle.net/vgWQG/1/)

用法：

```
Member: <member model="member"></member>
<ul>
    <li ng-repeat="child in member.children">
        Child {{$index}}: <member model="child"></member>   
    </li>
</ul> 
```

指令：

```
app.directive('member', function(){
return {
    template : '<input type="text" ng-model="member.name"/>',
    replace : true,
    restrict: 'E',
    scope : {
        'member' : '=model'
    },
    link: function(scope, element, attr) {}
}; 
```

});

我已将模板移动到内联变体中，因为我无法让模板缓存在 jsfiddle 中工作。在现实世界中，*templateUrl: 'name.html'*应该没问题。

这就是你想要的？

# javascript - 如何让鼠标事件在被另一个元素遮挡的元素上触发？

> ID：15702414
> 
> 赞同：2
> 
> 时间：2013-03-29T11:36:43.007
> 
> 标签：javascript, jquery, jquery-ui

我有一个元素在正常的 css 流中位置不正确（它具有绝对位置）。这意味着它会掩盖其他元素的区域。

**我想要的是让*位于*下方的元素在发生在遮蔽元素上时接收鼠标事件。**

注意：我不想使用 css `pointer-events: none`，因为我仍然需要在模糊对象上查看鼠标事件。

参见示例：

[http://jsfiddle.net/7ZpAp/6/](http://jsfiddle.net/7ZpAp/6/)

我希望“三”元素接收鼠标事件。

* * *

**附加信息/动机：**我正在尝试使用 Jquery UI 实现拖放功能。“二”元素从“一”拖到“三”型元素。

一个元素（例如元素“二”）的删除应该发生在被遮挡的元素（“三”）上。可能有多个元素“二”可以放入 - 我希望事件检测它已放入哪个元素。

该`mouseup`事件是我正在检测的事件，并且处理程序附加到元素“三”。当前，当“三”出现在 dom 中的“一”之前而不是之后出现时，行为似乎发生了变化！我不知道为什么会这样。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:13:09.790

尝试在“三”元素上设置 position: relative 。

# go - `append` 复杂性

> ID：15702419
> 
> 赞同：12
> 
> 时间：2013-03-29T11:37:08.550
> 
> 标签：go

Go 编程语言中这个循环的计算复杂度是多少？

```
var a []int
for i := 0 ; i < n ; i++ {
  a = append(a, i)
} 
```

`append`是在线性时间内运行（重新分配内存并在每次追加时复制所有内容），还是在摊销的常数时间内运行（就像许多语言中向量类的实现方式）？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-03-29T12:39:49.657

[Go 编程语言规范](http://golang.org/ref/spec)说，`append`如果需要，内置函数会重新分配。

> [追加和复制切片](http://golang.org/ref/spec#Appending_and_copying_slices)
> 
> 如果 s 的容量不足以容纳附加值，则 append 分配一个新的、足够大的片，该片既适合现有的片元素又适合附加值。因此，返回的切片可能引用不同的底层数组。

必要时，为追加增长目标切片的精确算法取决于实现。当前的`gc`编译器算法见`growslice`Go`runtime`包[`slice.go`](https://github.com/golang/go/blob/master/src/runtime/slice.go)源文件中的函数。它是摊销的常数时间。

在某种程度上，增长量切片计算如下：

```
 newcap := old.cap
    doublecap := newcap + newcap
    if cap > doublecap {
        newcap = cap
    } else {
        if old.len < 1024 {
            newcap = doublecap
        } else {
            for newcap < cap {
                newcap += newcap / 4
            }
        }
} 
```

附录

[Go 编程语言规范](http://golang.org/ref/spec)允许语言的实现者以多种`append`方式实现内置函数。

例如，新分配只需“足够大”。分配的数量可以是 parsimonius，分配最小必要的量，也可以是慷慨的，分配超过最小必要量以最小化多次调整大小的成本。Go`gc`编译器使用慷慨的动态数组摊销常数时间算法。

以下代码说明了`append`内置函数的两种合法实现。`gc`慷慨的常量函数实现了与 Go编译器相同的分摊常量时间算法。parsimonius 变量函数，一旦初始分配被填满，每次都会重新分配和复制所有内容。Go`append`函数和 Go`gccgo`编译器用作控件。

```
package main

import "fmt"

// Generous reallocation
func constant(s []int, x ...int) []int {
    if len(s)+len(x) > cap(s) {
        newcap := len(s) + len(x)
        m := cap(s)
        if m+m < newcap {
            m = newcap
        } else {
            for {
                if len(s) < 1024 {
                    m += m
                } else {
                    m += m / 4
                }
                if !(m < newcap) {
                    break
                }
            }
        }
        tmp := make([]int, len(s), m)
        copy(tmp, s)
        s = tmp
    }
    if len(s)+len(x) > cap(s) {
        panic("unreachable")
    }
    return append(s, x...)
}

// Parsimonious reallocation
func variable(s []int, x ...int) []int {
    if len(s)+len(x) > cap(s) {
        tmp := make([]int, len(s), len(s)+len(x))
        copy(tmp, s)
        s = tmp
    }
    if len(s)+len(x) > cap(s) {
        panic("unreachable")
    }
    return append(s, x...)
}

func main() {
    s := []int{0, 1, 2}
    x := []int{3, 4}
    fmt.Println("data    ", len(s), cap(s), s, len(x), cap(x), x)
    a, c, v := s, s, s
    for i := 0; i < 4096; i++ {
        a = append(a, x...)
        c = constant(c, x...)
        v = variable(v, x...)
    }
    fmt.Println("append  ", len(a), cap(a), len(x))
    fmt.Println("constant", len(c), cap(c), len(x))
    fmt.Println("variable", len(v), cap(v), len(x))
} 
```

输出：

GC：

```
data     3 3 [0 1 2] 2 2 [3 4]
append   8195 9152 2
constant 8195 9152 2
variable 8195 8195 2 
```

gccgo：

```
data     3 3 [0 1 2] 2 2 [3 4]
append   8195 9152 2
constant 8195 9152 2
variable 8195 8195 2 
```

总而言之，根据实现，一旦初始容量被填满，`append`内置函数可能会或可能不会在每次调用时重新分配。

参考：

[动态数组](http://en.wikipedia.org/wiki/Dynamic_array)

[摊销分析](http://en.wikipedia.org/wiki/Amortized_analysis)

> [追加和复制切片](http://golang.org/ref/spec#Appending_and_copying_slices)
> 
> 如果 s 的容量不足以容纳附加值，则 `append`分配一个新的、足够大的片，该片既适合现有的片元素又适合附加值。因此，返回的切片可能引用不同的底层数组。
> 
> [附加到切片规范讨论](https://groups.google.com/d/topic/golang-nuts/o5rFNqd0VjA/discussion)
> 
> 规范（在提示和 1.0.3 中）指出：
> 
> “如果 s 的容量不足以容纳附加值，则`append`分配一个新的、足够大的切片，该切片既适合现有切片元素又适合附加值。因此，返回的切片可能引用不同的底层数组。”
> 
> 这应该是“当且仅当”吗？例如，如果我知道我的 slice 的容量足够长，我能保证不会更改底层数组吗？
> 
> [罗布·派克](https://groups.google.com/d/msg/golang-nuts/o5rFNqd0VjA/HzJHwgl1y6MJ)
> 
> 是的，你很放心。

运行时[slice.go](https://go.googlesource.com/go/+/master/src/runtime/slice.go)源文件

[数组、切片（和字符串）：“追加”的机制](http://blog.golang.org/slices)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-29T11:44:03.927

它不会在每个追加时重新分配，并且在[文档](http://golang.org/ref/spec#Appending_and_copying_slices)中非常明确地说明：

> 如果 s 的容量不足以容纳附加值，则 append 分配一个新的、足够大的片，该片既适合现有的片元素又适合附加值。因此，返回的切片可能引用不同的底层数组。

因此，摊销的常数时间是所问的复杂性。

# sql-server-2012 - AdventureWorks2012：识别自 2008 年初以来销售额低于 100,000 美元的销售人员。显示：销售人员登录 ID

> ID：15702425
> 
> 赞同：0
> 
> 时间：2013-03-29T11:37:44.797
> 
> 标签：sql-server-2012

AdventureWorks2012：识别自 2008 年初以来销售额低于 100,000 美元的销售人员。显示：销售人员登录 ID。

我猜桌子会是

*   `HumanResources.Employee`
*   `Sales.SalesPerson`

有人可以帮助我吗？我已经花了足够的时间

```
SELECT 
    E.LoginID 
FROM 
    HumanResources.Employee AS E 
JOIN 
    Sales.SalesPerson AS SP ON E.BusinessEntityID = SP.BusinessEntityID 
WHERE 
    E.BusinessEntityID IN (SELECT BusinessEntityID 
                           FROM Sales.SalesPerson 
                           WHERE SalesQuota < 100000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:56:30.907

您已经接近了 - 但您并没有真正查看每个销售人员在过去几年中的**销售额**......`SalesQuota`您在表格中查看的列`SalesPerson`通常是一个定义为**目标**的数字年份 - 这不是所有销售额的实际总和。

我会尝试这样的事情：

```
-- determine the SUM of all sales, for all salespeople, since Jan 1, 2008
-- SUM the total of all sales (their TotalDue value) from the SalesOrderHeader table 
;WITH SalesPerPerson AS 
(
    SELECT 
        sp.BusinessEntityID, 
        TotalSales = SUM(soh.TotalDue)  -- SUM of all sales total amounts
    FROM 
        Sales.SalesOrderHeader soh
    INNER JOIN 
        Sales.SalesPerson sp ON soh.SalesPersonID = sp.BusinessEntityID
    WHERE 
        soh.OrderDate >= '20080101'   -- on all sales since Jan 1, 2008
    GROUP BY
        sp.BusinessEntityID
)
-- from that CTE, select the sales people who have had less than 100'000$ in 
-- sales since Jan 1, 2008, and display those. Show LoginID and first and
-- last name (just for information purposes)
SELECT
    p.FirstName, p.LAstName, 
    e.LoginID,
    spp.*
FROM 
    SalesPerPerson spp
INNER JOIN 
    Person.Person p ON spp.BusinessEntityID = p.BusinessEntityID
INNER JOIN 
    HumanResources.Employee e ON p.BusinessEntityID = e.BusinessEntityID
WHERE 
    TotalSales < 100000.0 
```

因此，如果您真的只需要`LoginID`，则可以将 JOIN 省略到`Person.Person`表中并从输出中删除`p.FirstName, p.LastName`列。

# ios - iOS cURL：无法获取本地颁发者证书

> ID：15702436
> 
> 赞同：0
> 
> 时间：2013-03-29T11:38:10.227
> 
> 标签：ios, ssl, curl, certificate

我正在尝试在 iOS 上使用 curl 设置与 HTTPS 服务器的安全连接（应用程序是用 C++ 编写的）

我发现我需要为 CURLOPT_CAPATH 选项设置 cacert.pam ( [http://curl.haxx.se/ca/cacert.pem ) 文件路径：](http://curl.haxx.se/ca/cacert.pem)

```
curl_easy_setopt (curl, CURLOPT_CAPATH, "/var/mobile/Applications/811DEF2E-DE1D-4C86-A1FD-129478C8318D/MyApp.app/ca/cacert.pem");
curl_easy_setopt (curl, CURLOPT_SSL_VERIFYPEER, 1L);
curl_easy_setopt (curl, CURLOPT_SSL_VERIFYHOST, 2L); 
```

但这只会生成以下详细日志（ip 和 url 已更改）：

```
libcurl/7.29.0 OpenSSL/1.0.1e zlib/1.2.5
* About to connect() to myserver.com port 443 (#0)
*   Trying 128.128.128.128...
* Connected to myserver.com (128.128.128.128) port 443 (#0)
* successfully set certificate verify locations:
*   CAfile: none
  CApath: /var/mobile/Applications/171CA93F-15F2-42A1-938B-01812AF1E555/MyApp.app/ca/cacert.pem
* SSL certificate problem: unable to get local issuer certificate
* Closing connection 0 
```

如果我将 CURLOPT_CAPATH 设置为“../MyApp.app/ca”文件夹，也会发生同样的情况。文件存在并且可以读取。

似乎缺少有关此错误的信息..我做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T09:31:22.293

好的，经过一番烦人的搜索，我找到了问题和解决方案。

这似乎不适用于文件夹和文件路径：

```
curl_easy_setopt (curl, CURLOPT_CAPATH, caCertPath); 
```

但这在提供 PEM 文件的完整路径时有效：

```
curl_easy_setopt (curl, CURLOPT_CAINFO, caCertPath); 
```

希望这对将来的人有所帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-14T13:53:14.863

从手册：

> 由于 openssl 的一些限制，CURLOPT_CAPATH 函数显然在 Windows 中不起作用

[http://curl.haxx.se/libcurl/c/curl_easy_setopt.html](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html)

CURLOPT_CAINFO 选项有效

# php - 使用 foreach 的 PHP 循环

> ID：15702440
> 
> 赞同：0
> 
> 时间：2013-03-29T11:38:36.963
> 
> 标签：php, loops

这是问题所在：-

我有一个名为“MatchResults”的体育比赛结果表，其中包含以下字段

Player1 Player2 Player1GamesWon Player2GamesWon Player1Pts Player2Pts League_id

首先，我正在运行一个查询，该查询将使用我已经拥有的存储变量过滤此表，从而为我提供更短的行集合：-

```
$qry = "SELECT * FROM BadmintonMatchResults WHERE league_id = '$leagueid'"; 
```

我需要遍历上述查询生成的每一行，并使用这些值来更新另一个名为“LeagueTable”的表。LeagueTable的结构如下：-

member_id Played Won Lost GamesWon GamesLost Difference Points

这些更新采用几个 SQL 查询的形式，例如：-

```
$qry = mysql_query("UPDATE LeagueTable SET Played = Played + 1 WHERE member_id = '$p1id'");
$qry = mysql_query("UPDATE LeagueTable SET Played = Played + 1 WHERE member_id = '$p2id'");

if($p1pts > $p2pts) {
    $qry = mysql_query("UPDATE LeagueTable SET Won = Won + 1 WHERE member_id = '$p1id'");
    $qry = mysql_query("UPDATE LeagueTable SET Lost = Lost + 1 WHERE member_id = '$p2id'"); 
}
else if($p2pts > $p1pts) {
    $qry = mysql_query("UPDATE LeagueTable SET Won = Won + 1 WHERE member_id = '$p2id'");
    $qry = mysql_query("UPDATE LeagueTable SET Lost = Lost + 1 WHERE member_id = '$p1id'"); 
}

$qry = mysql_query("UPDATE LeagueTable SET GamesWon = GamesWon + '$p1won' WHERE member_id = '$p1id'");
$qry = mysql_query("UPDATE LeagueTable SET GamesWon = GamesWon + '$p2won' WHERE member_id = '$p2id'");  
$qry = mysql_query("UPDATE LeagueTable SET GamesLost = GamesLost + '$p1won' WHERE member_id = '$p2id'");
$qry = mysql_query("UPDATE LeagueTable SET GamesLost = GamesLost + '$p2won' WHERE member_id = '$p1id'");

$qry = mysql_query("UPDATE LeagueTable SET Difference = GamesWon - GamesLost");
$qry = mysql_query("UPDATE LeagueTable SET Points = Points + '$p1pts' WHERE member_id = '$p1id'");
$qry = mysql_query("UPDATE LeagueTable SET Points = Points + '$p2pts' WHERE member_id = '$p2id'"); 
```

忽略我拥有的任何 $variables，因为我目前正在对表单中输入的数据执行此操作，但想要更改它以便它使用来自另一个数据库的行。我也知道我的查询可以被压缩和组合，我的主要问题是针对不同的值集多次循环这个查询集合。

我的问题是：-

1.  如何在需要运行的查询中引用第一个表中的字段？显然，仅列出字段名称“Player1”是行不通的。
2.  如何遍历每一行并运行上述 2 个查询以及 8 个类似的查询。

注意：其中一些查询已经嵌套在 IF 语句中，因此任何循环都必须超出该语句。

任何帮助将非常感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:10:46.733

如果您打算这样做，那么请告诉我您正在清理数据，然后再将其用于 SQL 语句。如果我键入“ 0' or 1=1 ”作为我的输入，并且您使用 SQL 不会执行您期望它执行的操作。

要 lop 然后通过引用名称从一个到下一个使用数据，您只需执行以下操作：

```
if(mysql_num_rows($result)>0){
    while($row = mysql_fetch_assoc($result)){

        // ... your loop here code here
        mysql_query("UPDATE LeagueTable SET Played = Played + 1 WHERE member_id = '" . $row['Player1'] . "'");

    }
} 
```

老实说，这看起来仍然是一种非常低效的做事方式，因为您正在使 MySQL 套接字非常努力地工作。我会考虑您需要存储多少计算以及在聚合 SQL 查询中可以计算出多少。

# c# - 如何检索通过扫描插入的 C# Key(*)Event 中的字符串？(Windows CE 5)

> ID：15702441
> 
> 赞同：1
> 
> 时间：2013-03-29T11:38:39.213
> 
> 标签：c#, windows-ce, keypreview

我正在开发一个 Win CE 5 应用程序，该应用程序捕获通过条形码扫描仪扫描的数据。应用程序应该支持一些“系统条形码”，即触发应用程序功能的预定义条形码。

这些条形码必须在整个主机中工作。所以我将主机的“KeyPreview”属性设置为true，并在主机的KeyDown事件上注册了一个KeyEventHandler。

我的问题是，我不知道如何获取完整的扫描字符串。该字符串长度为 12 个字符，并以换行符结尾。是否有可能在 EventHandler 中获取整个字符串？

预先感谢您的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:01:26.770

大多数（如果不是全部的话）基于 Windows CE 的条形码扫描仪将扫描数据作为键盘数据注入到设备驱动程序中。在您的应用程序中拦截该数据的最简单方法是使用键盘挂钩，您不必将处理程序连接到每个表单并担心控件在处理逻辑之前获取键。它就像在桌面上一样工作，因此您找到的适用于桌面上的键盘挂钩的任何代码都是有效的（除了包含 WinCE 中的 API 的 DLL 是 coredll.dll）。

CodeProject 上有一个[用于 Windows Mobile 的键盘挂钩示例，](http://www.codeproject.com/Articles/49881/Hooking-the-keyboard-message-queue-in-compact-fram)它可能会为您提供所需的一切基础。从那里开始，它只是挂钩处理程序中的字符串解析。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T15:55:03.370

通过设置 Form.KeyPreview 属性使用任何 Key 事件应该允许您查看来自扫描仪的数据。但是您一次只能看到一个“键”或字符。这些事件在每次调用时仅处理单个字符或键。就您的应用程序而言，它看起来与用户敲击键盘上的键没有什么不同。

如果您可以选择，并且可以将您的扫描仪置于非键盘仿真模式并直接挂钩扫描事件，那么您可能会对它在使用时如何独立于 GUI 工作的结果更满意方式。通常使用可以执行此操作的设备，您将收到整个扫描作为单个事件。

我建议包括有关您正在使用的设备的详细信息，以便有人可以为您提供可能与相关硬件相关的更具体的建议。

# android - 我怎样才能将我的密码值传递给我的包的其他类

> ID：15702443
> 
> 赞同：0
> 
> 时间：2013-03-29T11:38:43.130
> 
> 标签：android

在这里，我想在 myclass.java 中发送“我们的密码”的值，那么我该怎么做呢？

```
public class SetPassword extends Activity{  
@Override  
protected void onCreate(Bundle savedInstanceState) {  
// TODO Auto-generated method stub  
super.onCreate(savedInstanceState);  
setContentView(R.layout.set_password);

    final EditText ed=(EditText)findViewById(R.id.setpass);
    Button submit=(Button)findViewById(R.id.button1);

    submit.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub
        String  ourpassword=ed.getText().toString();

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:42:10.747

```
Create object of this class and get the value as

Define string as static
Object.String; 
```

您也可以使用使用数据库。这是存储和检索密码的更好方法

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:49:47.927

如果 myclass.java 是另一个 Activity 类，您可以将密码设置为 Intent 中的参数。例如：

```
Intent intent = new Intent(getApplicationContext(),myclass.class);
intent.putExtra("password", ourpassword);
startActivity(intent); 
```

...然后您可以从 myclass.java 中的 onCreate() 方法中获取值，如下所示：

```
String password = "";
if (getIntent().getStringExtra("password") != null) password = getIntent().getStringExtra("password"); 
```

**编辑**：您将 Intent 代码放在提交按钮的 onClick() 方法中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:50:16.757

要在活动之间传递数据，请使用意图。

```
 Intent i= new Intent("com.example.myclass");
   i.puExtra("mypassword",ourpassword);
   startActivtiy(i); 
```

在我的班级

```
 Bundle extras = getIntent().getExtras();
 if (extras != null) {
 String password = extras.getString("mypassword");
} 
```

您还可以通过将值传递给类的构造函数来将值传递给另一个类

```
 myClass mc= new myClass(ourPassword);
   mc.doSomething(); //call some method in another class 
```

在你的课堂上

```
 class myClass{
       String pwd;
        public myclass(String password)
        {
               pwd =password;

        } 
        publidc void doSomething()
        {

        }
    } 
```

假设您想将值传递给 asynctask 之类的类

```
 //pass value as a parameter to the class constructor
MyAsyncTask my= new MyAycTask(ourpassword).execute(); 
```

在我的异步任务中

```
class MyAsyncTask extends AsyncTask<Void,Void,Void>
{
       public M(String password)//receive value here
       {

       }
    other methods....
} 
```

# jquery - jQuery UI 手风琴：一次打开多个面板

> ID：15702444
> 
> 赞同：21
> 
> 时间：2013-03-29T11:38:43.660
> 
> 标签：jquery, jquery-ui, accordion

我正在尝试创建一个能够一次扩展多个面板的手风琴。我试图在 jQuery UI API 中找到它，但我还没有找到正确的方法。

如果有使用 jQuery UI 手风琴的方法，请告诉我。

* * *

## 回答 #1

> 赞同：50
> 
> 时间：2013-03-29T14:02:20.483

正如其他人所指出的，`Accordion`小部件没有直接执行此操作的 API 选项。但是，如果您*必须*使用小部件，则可以通过使用[`beforeActivate`](http://api.jqueryui.com/accordion/#event-beforeActivate)事件处理程序选项来颠覆和模拟小部件的默认行为来实现这一点。

例如：

```
$('#accordion').accordion({
    collapsible:true,

    beforeActivate: function(event, ui) {
         // The accordion believes a panel is being opened
        if (ui.newHeader[0]) {
            var currHeader  = ui.newHeader;
            var currContent = currHeader.next('.ui-accordion-content');
         // The accordion believes a panel is being closed
        } else {
            var currHeader  = ui.oldHeader;
            var currContent = currHeader.next('.ui-accordion-content');
        }
         // Since we've changed the default behavior, this detects the actual status
        var isPanelSelected = currHeader.attr('aria-selected') == 'true';

         // Toggle the panel's header
        currHeader.toggleClass('ui-corner-all',isPanelSelected).toggleClass('accordion-header-active ui-state-active ui-corner-top',!isPanelSelected).attr('aria-selected',((!isPanelSelected).toString()));

        // Toggle the panel's icon
        currHeader.children('.ui-icon').toggleClass('ui-icon-triangle-1-e',isPanelSelected).toggleClass('ui-icon-triangle-1-s',!isPanelSelected);

         // Toggle the panel's content
        currContent.toggleClass('accordion-content-active',!isPanelSelected)    
        if (isPanelSelected) { currContent.slideUp(); }  else { currContent.slideDown(); }

        return false; // Cancel the default action
    }
}); 
```

## 查看[**jsFiddle 演示**](http://jsfiddle.net/soboaz/3gHrv/)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-05-21T08:39:07.877

您可以编写多个堆叠的手风琴，每个手风琴只有一个面板。这样，面板可以单独切换。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-03-29T12:54:26.717

根据定义，手风琴是一组以某种方式切换的扩展元素。你不想要那个。您只需要一组扩展元素。使用 jQuery 构建它非常容易。它通常只需要这样：

```
$('.my-heading-class').on('click', function() {
   $(this).next('.my-content-class').slideToggle();
});

<div class="my-heading-class">My Heading</div>
<div class="my-content-class">My Content</div> 
```

# active-directory - 如何使用 Active Directory 域服务设置 collabnet Edge 颠覆？

> ID：15702448
> 
> 赞同：1
> 
> 时间：2013-03-29T11:39:08.517
> 
> 标签：active-directory, subversion-edge

我已经安装了 Windows Server 2008，并在此添加了 Roll“Active Directory 域服务”。现在我在这个域下添加了一台计算机（windows 7）并安装了 collabnetEdge subversion。现在我正在尝试连接“针对 LDAP 服务器的 LDAP 身份验证”，但它给出错误“服务器无法绑定到端口 '3343'。检查使用端口的权限，以及另一个进程没有使用该端口。”</p>

在域下的 Server Pc 中，我创建了一个名为 OrgUnit 的 OU，并在此 OU 下创建了一个用户。

现在我的设置如下：

服务器设置： ![在此处输入图像描述](../Images/605cad6cad0709973ebffeffaa77e2d0.png)

验证 ：

![在此处输入图像描述](../Images/d33858b9e14d98e506bfc3a1e57fe387.png)

现在这两个设置已成功保存，但是当我启动 collabnetEdge 服务器时，它给出错误“服务器无法绑定到端口 '3343'。检查使用该端口的权限，并且另一个进程没有使用该端口”。我更改了端口，但发生了同样的错误。请帮帮我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T18:22:13.620

您的 LDAP 设置看起来不错，但无法确定。

您的问题出在您指定端口 3343 的第一页上。您不能这样做。您指定的端口号是您希望 Apache Subversion 服务器使用的端口号。这必须是未使用的端口。通常，您希望它是端口 80 或 443，具体取决于您是否使用 SSL。

由于您将使用 AD 凭据，因此使用 SSL 是一个好主意。所以我会选中 Apache 加密复选框并使用端口 443。

端口 3343 是 SVN Edge 控制台正在使用的端口。所以它会一直在用，不能用。

# dart - Dart 编辑器/调试器中是否有“立即窗口”？

> ID：15702450
> 
> 赞同：1
> 
> 时间：2013-03-29T11:39:15.697
> 
> 标签：dart, dart-editor

有没有办法在调试断点中尝试 Dart 表达式并执行命令？

就像在 Chrome 开发者栏、Firebug 或 Visual Studio 即时窗口中一样。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:42:12.230

不幸的是还没有。星[http://dartbug.com/3293](http://dartbug.com/3293)以跟踪其进度。

[通过http://dartbug.com/4409](http://dartbug.com/4409)跟踪一个类似的功能，REPL (read-eval-print-loop) 。

# java - 从 Vaadin 6.8 迁移到 Vaadin 7 编译小部件集

> ID：15702468
> 
> 赞同：0
> 
> 时间：2013-03-29T11:40:24.970
> 
> 标签：java, gwt, compilation, vaadin

我们有一个使用 Vaadin 6.8 创建的大型项目我们最近决定升级到版本 7。重构导致它与框架更改一致的代码。有一个问题：我们无法编译 widgetset ...

该项目是在 Netbeans IDE 中创建的，它是使用 Ant 脚本生成的编译。

这是一个错误：

![编译错误](../Images/786d89ede67d1cbc5d1bf3fc552ef409.png)

这是蚂蚁脚本：

```
<import file="nbproject/build-impl.xml"/>

<target name="widgetset-init">
    <property name="widgetset" value="user_interface.ApplicationWidgetSet"/>
    <property name="widgetset-path" value="user_interface"/>
    <property name="client-side-destination" value="web/VAADIN/widgetsets" />
    <property name="generate.widgetset" value="1"/>
</target>

<target name="generate-widgetset" depends="widgetset-init, compile" if="generate.widgetset">
    <echo>Updating ${widgetset}...</echo>

    <mkdir dir="${src.dir}/${widgetset-path}"/>

    <java classname="com.vaadin.server.widgetsetutils.WidgetSetBuilder" failonerror="yes" fork="yes" maxmemory="512m">
        <arg value="${widgetset}"/>
        <jvmarg value="-Xss1024k"/>
        <jvmarg value="-Djava.awt.headless=true"/>
        <classpath>
            <pathelement path="${src.dir}" />
            <pathelement path="${javac.classpath}" />
            <pathelement path="${build.web.dir}/WEB-INF/classes" />
        </classpath>
    </java>
</target>

<target name="compile-widgetset" depends="init, widgetset-init, generate-widgetset">
    <echo>Compiling ${widgetset} into ${client-side-destination} directory...</echo>

    <java classname="com.google.gwt.dev.Compiler" failonerror="yes" fork="yes" maxmemory="512m">
        <arg value="-war" />
        <arg value="${client-side-destination}" />
        <arg value="${widgetset}" />
        <jvmarg value="-Xss1024k"/>
        <jvmarg value="-Djava.awt.headless=true"/>
        <classpath>
            <pathelement path="${src.dir}" />
            <pathelement path="${javac.classpath}" />
            <pathelement path="${build.web.dir}/WEB-INF/classes" />
        </classpath>
    </java>
</target> 
```

# python - 如何让一个窗口在不最大化的情况下占据全屏？

> ID：15702470
> 
> 赞同：6
> 
> 时间：2013-03-29T11:40:42.937
> 
> 标签：python, qt, pyqt, pyside

我正在使用 Qt 在 python 中编写

我想创建应用程序窗口（带有装饰）以占据全屏大小。目前这是我的代码：

```
avGeom = QtGui.QDesktopWidget().availableGeometry()
self.setGeometry(avGeom) 
```

问题是它忽略了窗户装饰，所以框架更大......我用谷歌搜索了什么，发现了这个：

[http://harmattan-dev.nokia.com/docs/library/html/qt4/application-windows.html#window-geometry](http://harmattan-dev.nokia.com/docs/library/html/qt4/application-windows.html#window-geometry)

这似乎表明我需要将 frameGeometry 设置为`avGeom`但是我还没有找到一种方法来做到这一点。此外，在上面链接的评论中，它说我所追求的可能甚至不可能，因为程序无法在运行之前设置 frameGeometry ...如果是这种情况，我只想确认我的问题无法解决.

编辑：

所以我玩了一下代码，这给出了我想要的......但是数字24基本上是通过反复试验直到窗口标题可见......我想要一些更好的方法来做到这一点......是独立于窗口管理器的..

```
avGeom = QtGui.QDesktopWidget().availableGeometry()
avGeom.setTop(24)
self.setGeometry(avGeom) 
```

现在我可以做我想做的事，但纯粹是出于反复试验

运行 Ubuntu，使用 Spyder 作为 IDE

谢谢

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-29T13:07:29.340

用于[`QtGui.QApplication().desktop().availableGeometry()`](http://doc-snapshot.qt-project.org/4.8/qdesktopwidget.html#availableGeometry)窗口大小：

```
#!/usr/bin/env python
#-*- coding:utf-8 -*-

from PyQt4 import QtGui, QtCore

class MyWindow(QtGui.QWidget):
    def __init__(self, parent=None):
        super(MyWindow, self).__init__(parent)

        self.pushButtonClose = QtGui.QPushButton(self)
        self.pushButtonClose.setText("Close")
        self.pushButtonClose.clicked.connect(self.on_pushButtonClose_clicked)

        self.layoutVertical = QtGui.QVBoxLayout(self)
        self.layoutVertical.addWidget(self.pushButtonClose)

        titleBarHeight = self.style().pixelMetric(
            QtGui.QStyle.PM_TitleBarHeight,
            QtGui.QStyleOptionTitleBar(),
            self
        )

        geometry = app.desktop().availableGeometry()
        geometry.setHeight(geometry.height() - (titleBarHeight*2))

        self.setGeometry(geometry)

    @QtCore.pyqtSlot()
    def on_pushButtonClose_clicked(self):
        QtGui.QApplication.instance().quit()

if __name__ == "__main__":
    import sys

    app = QtGui.QApplication(sys.argv)
    app.setApplicationName('MyWindow')

    main = MyWindow()
    main.show()

    sys.exit(app.exec_()) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-11T21:38:45.053

我一直发现从 QMainWindow 类继承特别有用。像这样：

```
import sys
from PySide.QtGui import *
from PySide.QtCore import *

class Some_APP(QMainWindow):

    def __init__(self):
        super().__init__()
        self.initUI()

    def initUI(self):
        ### this line here is what you'd be looking for
        self.setWindowState(Qt.WindowMaximized)
        ###
        self.show()

def main():
    app = QApplication(sys.argv)
    some_app = Some_APP()
    sys.exit(app.exec_())

if __name__ == "__main__":
    main() 
```

# javascript - 如何找到这两个时间 06:34:23 和 02:45:55 之间的差异

> ID：15702480
> 
> 赞同：1
> 
> 时间：2013-03-29T11:41:17.137
> 
> 标签：javascript, jquery, html

用户可以选择输入时间。这是一个示例，找出这两个时间 06:34:23 和 02:45:55 之间的差异。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T11:44:34.787

您可以使用**[Date.parse](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/parse)**将日期解析为自 epoc 以来的毫秒数并找出差异。

```
// gives you the difference in seconds
var diff = (Date.parse("1-1-1 06:34:23") - Date.parse("1-1-1 02:45:55")) / 1000; 
```

*请注意，我在上面给出了 1-1-1 的虚拟日期，以使日期格式合理。*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:46:25.630

```
 var timeStart = new Date("01/01/2007 " + "06:34:23 ");
    var timeEnd = new Date("01/01/2007 " + "02:45:55.");
    var hourdif = timeEnd.getHours() - timeStart.getHours();
    var mindif = timeEnd.getMinutes() - timeStart.getMinutes(); 
```

# c++ - 如何在 Qt 中获取驱动器的格式详细信息

> ID：15702481
> 
> 赞同：2
> 
> 时间：2013-03-29T11:41:19.310
> 
> 标签：c++, macos, qt, qt4, file-format

我正在开发一个需要显示驱动器文件格式（NTFS 或 FAT32）的应用程序。现在我做了一点研究，发现没有 Qt API 可以让我轻松获取格式细节。所以我遇到了一个 Windows API，当我连接驱动器（外部或内部）并在 Windows 上运行应用程序时，它可以让我获取格式详细信息。这是代码：

```
TCHAR volumeName[MAX_PATH + 1] = { 0 };
TCHAR fileSystemName[MAX_PATH + 1] = { 0 };
DWORD serialNumber = 0;
DWORD maxComponentLen = 0;
DWORD fileSystemFlags = 0;

LPCWSTR path = deviceData->m_strPath.utf16(); //deviceData->m_strpath gives me the drive path

if (GetVolumeInformation(
    path,
    volumeName,
    ARRAYSIZE(volumeName),
    &serialNumber,
    &maxComponentLen,
    &fileSystemFlags,
    fileSystemName,
    ARRAYSIZE(fileSystemName)))
{
         newData.strFileSystem = QString::fromUtf16(fileSystemName);
}   

    QList m_SDInfoList;
    m_SDInfoList.append(newData); 
```

当我在 MAC 操作系统中运行我的 Qt 应用程序时，有没有办法可以获得相同的格式详细信息？一个可以帮助我获取文件格式的 MAC API。请帮忙 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:06:41.563

您将需要使用底层系统调用。OS X 特别是基于 Unix (BSD)。因此，您可以利用底层的 Unix 系统调用来获取信息。由于 OS X 完全符合 POSIX，请使用 POSIX 系统调用。[在此处](http://www.makelinux.net/books/ulk3/understandlk-CHP-10-SECT-1)查看概述，[在此处](http://cplus.kompf.de/posixlist.html)查看文件系统调用。
由于 Cocoa 和 Objective-C 主要用于纯 OS X 应用程序，它们对你没有多大用处。

# java - 在随机字符串中查找单词

> ID：15702486
> 
> 赞同：-4
> 
> 时间：2013-03-29T11:41:46.390
> 
> 标签：java, string

假设我有一个看起来像这样的字符串：

《拉赫德沃坡》

我知道我正在寻找的词，例如：

“单词”

如果我可以用“RAHDTWUOPO”之类的字符串组成“WORD”，最好的方法是什么

编辑：

由于这个问题不清楚，我认为我提出了更多细节。我想要实现的是找到一个我事先知道的单词是否可以由一个随机的字母串组成。不确定如何使用循环或是否有其他方法来解决此问题。

我很快就想到了一些东西，但我知道这很费力，但我会把它放在这里让这个问题更清楚地说明我想要实现的目标。

```
public class MyLetterObject {
    private String letter;
    private Boolean used;

    public String getText() {
        return letter;
    }

    public void setLetter(String letter) {
        this.letter = letter;
    }

    public Boolean getUsed() {
        return used;
    }

    public void setUsed(Boolean used) {
        this.used = used;
    }
}

boolean ContainsWord(String Word, String RandomLetterString) {
    List<MyLetterObject> MyLetterList = new ArrayList<MyLetterObject>();
    for (char ch : RandomLetterString.toCharArray()) {
        MyLetterObject mlo = new MyLetterObject();
        mlo.setLetter(String.valueOf(ch));
        mlo.setUsed(false);
        MyLetterList.add(mlo);
    }

    String sMatch = "";

    for (char Wordch : Word.toCharArray()) {

        for (MyLetterObject o : MyLetterList) {

            if (o.getUsed() == false
                    && String.valueOf(Wordch).equals(o.getText())) {

                o.setUsed(true);
                sMatch = sMatch + String.valueOf(Wordch);
                break;
            }

        }
    }

    if (sMatch.equals(Word)) {
        return true;
    } else {
        return false;
    }
} 
```

如您所见，付出了很多努力。Evgeniy Dorofeev 的答案要好得多，只是为了找出一个单词是否可以由随机顺序的字母组成的字符串组成。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T11:48:47.720

尝试

```
boolean containsWord(String s, String w) {
    List<Character> list = new LinkedList<Character>();
    for (char c : s.toCharArray()) {
        list.add(c);
    }
    for (Character c : w.toCharArray()) {
        if (!list.remove(c)) {
            return false;
        }
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:50:07.463

您在第一个字符串中逐个搜索每个字母。

```
 String randomString = "RAHDTWUOPO";
 String word = "WORD";

 for(int i=0;i<word.length; i++){
      if(randomString.contains(word.charAt(i))){

         // Yey, another letter found
      }
 } 
```

然后您只需测试是否`i`确实找到了每个字母，如果没有，则该单词不包含在 randomString 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:50:50.317

您需要发现，您的单词“WORD”中的所有字母都存在于列表中的输入字符串中。简单的循环会为你做，但性能不会是最好的。您可以使用番石榴库多集： [http ://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained](http://code.google.com/p/guava-libraries/wiki/NewCollectionTypesExplained)

Multiset wordsMultiset = HashMultiset.create();wordsMultiset.addAll(words);// 现在我们可以使用 wordsMultiset.count(String) 来计算一个单词的计数

这个例子是关于单词的，将它用于输入字符串的字符。

# c# - 将数据导入 Outlook.com

> ID：15702492
> 
> 赞同：3
> 
> 时间：2013-03-29T11:42:00.653
> 
> 标签：c#, imap, exchange-server, activesync, outlook.com

我目前的任务是将大量电子邮件从专有邮件系统导入 Outlook.com 帐户（是的，Web 服务不是桌面应用程序）。

由于源系统的专有性质以及所有电子邮件在将它们导入 Outlook.com 之前都需要自定义预处理这一事实，因此任何商业服务都不是一种选择。将数据导入本地 Outlook 数据库，然后将其导出到 Outlook.com 可能也不是一种选择，因为这意味着在服务器端运行。

什么是我实施实际导入步骤的最佳选择，该步骤保留实际电子邮件时间戳，就像最初收到邮件时一样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-01T17:31:04.213

这不适用于大量帐户，但这是您为单个帐户执行此操作的方式。我建议您联系 Microsoft 寻求支持，特别是如果您是需要导入此数据的付费客户。

根据 Outlook.com IMAP 尚不支持。Outlook.com 确实支持[ActiveSync](http://www.microsoft.com/en-us/download/details.aspx?id=15)。我不确定您使用的是哪个专有邮件系统，但似乎唯一的方法是在桌面（Outlook）上设置 ActiveSync，然后通过 IMAP 添加第二个帐户（专有邮件系统），然后将内容拖放到两个帐户。这是迁移电子邮件数据的常用方法。

其次，您可以登录您的 Outlook 帐户并将其设置为导入第 3 方电子邮件。这是一篇展示如何做到这一点的文章，[将您的邮件移动到 Outlook](http://howto.cnet.com/8301-11310_39-57487047-285/move-your-mail-to-outlook.com/)文章。

# matlab - matlab中的音频模式匹配

> ID：15702493
> 
> 赞同：0
> 
> 时间：2013-03-29T11:42:02.027
> 
> 标签：matlab, spectrogram

有人可以在matlab中给我一个关于这个问题的想法吗？

我有 4 个包含鸟鸣的 .wav 文件。每个 .wav 文件代表不同的鸟。给定一个输入 .wav 文件，我需要确定它是哪只鸟。我知道我必须进行频谱比较才能找到解决方案。但不太清楚我应该如何使用频谱图来帮助我到达那里。

PS我知道频谱图是怎么做的，并且已经用它绘制了很多.wav文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-04T12:21:05.243

您可以尝试使用**Deep Belief Networks解决问题**

以下是一些可能有帮助的文章：

*   [受限玻尔兹曼机的音频特征提取](http://www.liacs.nl/~dmus/paper.pdf)
*   [用于音频分类的无监督特征学习](http://papers.nips.cc/paper/3674-unsupervised-feature-learning-for-audio-classification-using-convolutional-deep-belief-networks.pdf)

总结一下这个想法，不是手动调整特征，而是使用[RBM](http://en.wikipedia.org/wiki/Restricted_Boltzmann_machine)或自动[编码](http://en.wikipedia.org/wiki/Autoencoder)器来提取代表观察到的音频样本的特征（基础），然后运行学习算法。

为了训练 DBN，您将需要 4 个以上的音频样本，但值得一试，因为该方法在过去已显示出可喜的结果。

[这个教程](http://ufldl.stanford.edu/wiki/index.php/UFLDL_Tutorial)可能也有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T17:02:17.247

有几种方法可以解决模式识别问题，就像您正在谈论的那样。

您可以将 FFT 之类的频率分析与 matlab 函数一起使用
`S = SPECTROGRAM(X,WINDOW,NOVERLAP)`

您需要在`SPECTROGRAM`变量中定义要分析的信号的时间窗口`WINDOW`。`WINDOW = [1 1 1 1 1 1 1 ... 1]`您可以使用值数等于​​所需长度的矩形窗口（示例）。有很多窗口可以使用：hanning、hamming、blackman。您应该使用对您的问题更好的一种。这`NOVERLAP`是您的窗口一步移动的点数。

除了这种方法，小波变换也是解决问题的好技术。Matlab 也有一个很好的工具箱来应用离散和连续小波。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T12:31:31.807

这可能被证明是一个复杂的问题。作为一个起点，我建议您将每条记录分成一些固定长度的帧，例如 20ms 和 10ms 重叠，然后提取这些帧的 fft 并获得一些最大能量频率。每个帧的值。作为最后一步，将帧频率相互比较，并通过选择最大相关性来确定结果

# azure - 远程桌面拒绝 Windows Azure Web 角色的凭据

> ID：15702496
> 
> 赞同：4
> 
> 时间：2013-03-29T11:42:12.897
> 
> 标签：azure, remote-desktop, azure-web-roles

我在 VS 2012 上使用 .net 4.5 创建了一个云项目。这包括两个 Web 角色，一个 API 和一个前端网站。

我已按照此处的说明进行操作：http: [//msdn.microsoft.com/en-gb/library/windowsazure/gg443832.aspx](http://msdn.microsoft.com/en-gb/library/windowsazure/gg443832.aspx)以设置远程桌面并部署服务。

当我尝试连接时（我对凭据进行了两次和三次检查），我被告知“用于连接的凭据不起作用。请输入新凭据。

我的网络角色都是可操作的，我可以在浏览器中访问它们。

我尝试在部署后等待一段时间以传播更改，但这没有什么区别。我唯一能想到的是，除了下载适当的位以便从 Visual Studio 部署之外，我还没有对证书做任何事情。我找不到任何说明我需要的文档。

我还尝试将各种域添加到用户名，但没有任何效果。

我是否遗漏了什么，或者目前是否有可能存在 azure 的错误？

编辑：现在已尝试从 Visual Studio 中删除云项目，在 azure 中删除云服务并仅使用单个 Web 角色重新部署。还是看到了问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:47:25.167

只是检查完整性，

您是否使用网站上的按钮进行首次访问？

[http://blogs.msdn.com/b/avkashchauhan/archive/2011/04/03/how-to-login-into-windows-azure-virtual-machine-using-remote-desktop.aspx](http://blogs.msdn.com/b/avkashchauhan/archive/2011/04/03/how-to-login-into-windows-azure-virtual-machine-using-remote-desktop.aspx)

另一方面，这是对我们有用的链接，它也包括如何设置所需的证书。

[http://geekswithblogs.net/MagnusKarlsson/archive/2012/12/03/connect-to-running-web-role-from-remote-desktop-connection-and.aspx](http://geekswithblogs.net/MagnusKarlsson/archive/2012/12/03/connect-to-running-web-role-from-remote-desktop-connection-and.aspx)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-02-15T19:52:24.773

我通过从 .csdef 中删除`<Import moduleName="RemoteAccess" />`和行，然后`<Import moduleName="RemoteForwarder" />`删除对 .cscfg文件的所有引用来解决此问题。然后，我能够从较新的 Azure 门户部署和启用远程桌面访问。`Microsoft.WindowsAzure.Plugins.RemoteAccess``Microsoft.WindowsAzure.Plugins.RemoteForwarder`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-23T16:32:59.907

将用户添加到 Azure Active Directory 域（例如 smith@mydomain.onmicorosft.com）后，我尝试以其中一个用户的身份登录，但得到“您的凭据不起作用”。经过反复试验，我发现我必须将用户（例如 smith）添加为 VM 上的本地用户。一旦我这样做并分配了密码，用户就可以进入 RDP。

# c# - 获取复选框 ID 服务器端 C#

> ID：15702501
> 
> 赞同：0
> 
> 时间：2013-03-29T11:42:25.263
> 
> 标签：c#, checkbox, server-side

我创建了一个动态创建表的 asp.net (C#) 网页。表中的一列是具有 ID(int) 的复选框。我想使用 SQL 查询中所有复选框的 ID，如下所示：

```
select *
from table
where ID in (1,2,3,4) 
```

有没有办法可以从服务器端的所有复选框中获取 ID 列表？

这是我用来生成复选框的代码片段：

```
foreach (DataRow dr in dt.Rows)
{
   string Compatible_Controls = (
       "<tr>" +
        "<td><input type='CheckBox' ID='" +(dr["id"]) + "' /></td>" +
        "<td>" + (dr["Control_Name"]) + "</td>" +
        "<td>" + (dr["Control_Statement"]) + "</td>" +
        "<td>" + (dr["Regulation_type"]) + "</td>" +
       "</tr>" ); 
```

这是生成的内容：

```
<tr>
    <td><input type='CheckBox' ID='3' /></td>
    <td>xxxxxx</td>
    <td>xxxxxxxxx</td>
    <td>xxxxxxxx</td>
</tr> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:49:03.857

不，该`id`属性不会发布到服务器。但是，您可以使用该`name`属性来区分`input`元素。像这样的东西：

```
<input type='CheckBox' name='3' /> 
```

或者，如果您仍然希望`id`在 CSS/JavaScript 中使用该属性，您可以同时拥有：

```
<input type='CheckBox' name='3' ID='3' /> 
```

然后在服务器端代码中，表单集合将包含`name`发布在那里的所有不同值的键。（当然，请确保`name`s 在您的客户端表单上是唯一的。）您没有提及您使用的是 WebForms 还是 MVC，因此当这些信息发布到服务器时，您可以通过多种方式访问​​这些信息. 如果是 WebForms，[`Request.Form`将包含键/值对](http://msdn.microsoft.com/en-us/library/system.web.httprequest.form.aspx)。如果是 MVC，只需向控制器操作添加[一个`FormCollection`参数](http://msdn.microsoft.com/en-us/library/system.web.mvc.formcollection)，它将具有键/值对。

# android - 解析时的Android性能getJSONObject

> ID：15702511
> 
> 赞同：0
> 
> 时间：2013-03-29T11:43:21.423
> 
> 标签：android, json, performance, parsing, overhead

我目前正在解析 JSON 并得到以下代码：

```
boolean suf = list.getJSONObject(i).getBoolean("sufficient");
String grade = list.getJSONObject(i).getString("grade");
String id= list.getJSONObject(i).getString("id"); 
```

我想知道多次调用 getJSONObject 是否会产生开销，从而导致处理时间增加。

例如，这会更快和/或更好吗？

```
JSONObject object = list.getJSONObject(i);
boolean suf = object.getBoolean("sufficient");
String grade = object).getString("grade");
String id= object.getString("id"); 
```

这确实引入了一个新对象，但接下来的 3 次调用是否值得权衡？

由于我正在显示一个对话框来通知用户正在加载某些内容（因此他们无法采取任何行动），我想尽量减少用户的等待时间。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:51:45.967

第二个选项是我通常的做法。但是您几乎不会在性能上看到任何通知。list.getJSONObject(i).getBoolean("足够"); 创建一个临时对象并获取值。现在，编译器足够聪明，可以存储临时对象以防万一。即使他们没有，除非您在“列表”中处理数百万个 jsonobj，否则我在这里看不到任何性能影响。

# python - 打印一个花哨的字符串并在打印后更新它以模拟 GUI

> ID：15702518
> 
> 赞同：1
> 
> 时间：2013-03-29T11:43:47.207
> 
> 标签：python, string, printing, command-line-interface, curses

我不知道这是否可以做到，但我确定我在一些脚本中看到了这一点，这就是我问的原因。

我需要打印一个像这样的字符串：

```
++++++++++++++++++++++++++++++     +++++++++++++++
+     A 1     ++     A 2     +     +     A n     +
+-------------++-------------+     +-------------+
+     B 1     ++     B 2     + ... +     B n     +
+-------------++-------------+     +-------------+
+     C 1     ++     C 2     +     +     C n     +
++++++++++++++++++++++++++++++     +++++++++++++++ 
```

其中 n 是列数，它取决于用户的输入。A 行是固定的，而 B 和 C 必须在程序运行时更改。

所以，首先我需要一种打印这种字符串的方法，知道 A 和 B 是长度为 8 的字符串，但 C 从 8 变为 1 个字符。

我查看了各种“格式化程序”解决方案，`ppretty`但它们似乎离我需要的太远了（而且我没有找到很多例子！）。（我刚刚尝试过`ppretty`，因为其他解决方案在我获取数据时需要数据源之类的东西，`class.getData()`因为我来自 Java！）

现在，在打印这个字符串之后，我希望它随着 B 和 C 的变化而更新，而不是再次打印它以避免大量打印的东西，并使所有内容更整洁，更容易阅读。

有没有办法做到这一点？

编辑：

这是我尝试过的（没有成功）

```
def printCrackingState(threads):
info_string = '''
++++++++++++++++++++++++++++++++++
+ Starting password = s.%08d +
+--------------------------------+    
+ Current pin       = s.%08d +
++++++++++++++++++++++++++++++++++
+ Missing pins      =   %08d +
++++++++++++++++++++++++++++++++++
              '''
while 1:
    for t in threads:
        printed_string = info_string % (t.starting_pin, t.testing_pin, t.getMissingPinsCount())
        sys.stdout.write(printed_string)
    time.sleep(3500) 
```

这是结果：

```
++++++++++++++++++++++++++++++++++
+ Starting password = s.00000000 +
+--------------------------------+    
+ Current pin       =   00000523 +
++++++++++++++++++++++++++++++++++
+ Missing pins      =   01249477 +
++++++++++++++++++++++++++++++++++

++++++++++++++++++++++++++++++++++
+ Starting password = s.01250000 +
+--------------------------------+    
+ Current pin       =   01250491 +
++++++++++++++++++++++++++++++++++
+ Missing pins      =   01249509 +
++++++++++++++++++++++++++++++++++

++++++++++++++++++++++++++++++++++
+ Starting password = s.02500000 +
+--------------------------------+    
+ Current pin       =   02500465 +
++++++++++++++++++++++++++++++++++
+ Missing pins      =   01249535 +
++++++++++++++++++++++++++++++++++

++++++++++++++++++++++++++++++++++
+ Starting password = s.03750000 +
+--------------------------------+    
+ Current pin       =   03750564 +
++++++++++++++++++++++++++++++++++
+ Missing pins      =   01249436 +
++++++++++++++++++++++++++++++++++

++++++++++++++++++++++++++++++++++
+ Starting password = s.05000000 +
+--------------------------------+    
+ Current pin       =   05000592 +
++++++++++++++++++++++++++++++++++
+ Missing pins      =   01249408 +
++++++++++++++++++++++++++++++++++

++++++++++++++++++++++++++++++++++
+ Starting password = s.06250000 +
+--------------------------------+    
+ Current pin       =   06250579 +
++++++++++++++++++++++++++++++++++
+ Missing pins      =   01249421 +
++++++++++++++++++++++++++++++++++

++++++++++++++++++++++++++++++++++
+ Starting password = s.07500000 +
+--------------------------------+    
+ Current pin       =   07500577 +
++++++++++++++++++++++++++++++++++
+ Missing pins      =   01249423 +
++++++++++++++++++++++++++++++++++

++++++++++++++++++++++++++++++++++
+ Starting password = s.08750000 +
+--------------------------------+    
+ Current pin       =   08750555 +
++++++++++++++++++++++++++++++++++
+ Missing pins      =   01249445 +
++++++++++++++++++++++++++++++++++ 
```

我曾经`sys.stdout.write()`将它们放在同一条线上，但它不起作用！

编辑2：

正如回复中所建议的，我的第二次尝试是诅咒。

我可以在同一行写东西，但它们不会更新。

这是我的代码：

```
import curses
import time
import threading

class CursesPrinter(threading.Thread):
    windows = []
    screen = None 
    processes = []   

    info_string = '''
    +++++++++++++++++++++++++
    + Starting = s.%08d +
    +-----------------------+    
    + Current  = s.%08d +
    +-----------------------+
    + Missing  =   %08d +
    +++++++++++++++++++++++++
                  '''            

    def _makeWindows(self, numWindows):
        x = 0
        y = 0
        height = 15
        width = 30        
        for i in range(numWindows):
            win = curses.newwin(height, width, x, y)
            #win.border(1)
            y+=width
            if y>self.screen.getmaxyx():
                #This should make a new line if we reach the end of the terminal
                y = 0
                x+=height
            self.windows.append(win) 

    def run(self):
        while 1:
            for i in range(len(self.processes)-1):
                print_string = self.info_string % (self.processes[i].starting_pin, self.processes[i].testing_pin, self.processes[i].getMissingPinsCount())                
                self.windows[i].addstr(0,0, print_string)
                self.windows[i].refresh()
        #time.sleep(60)                            

    def __init__(self, threads, processes):
        super(CursesPrinter, self).__init__()
        self.screen = curses.initscr()
        curses.curs_set(0)
        self.processes = processes
        self._makeWindows(threads)       
        #curses.endwin() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:32:13.187

依靠终端处理[VT100 转义序列](http://www.termsys.demon.co.uk/vtansi.htm)的一种快速而简单的方法是清除屏幕，然后在打印输出之前将光标移动到起始位置。

快速演示：

```
import sys
import time
import random

ESC = "\x1b"

def home():
    sys.stdout.write(ESC + '[0;0H')
    sys.stdout.flush()

def cls():
    sys.stdout.write(ESC + '[2J')
    sys.stdout.flush()

def print_status():
    w = 8
    print('+' + '-'*w + '+')
    for row in range(3):
        fmt = '|%%%dd |' % (w - 1)
        print(fmt % random.randint(0, 1000))
        print('+' + '-'*w + '+')
    sys.stdout.flush()

if __name__ == "__main__":
    cls()
    for k in range(16, 0, -1):
        home()  # or use cls()
        print_status()
        time.sleep(0.5) 
```

您可以跟踪打印的行数，而不是使用“home”序列，并在打印下一个更新之前打印那么多“cursor up”转义序列。

如果您想变得更高级，请查看 python [curses 模块](http://docs.python.org/2/library/curses.html)、[blessings](https://pypi.python.org/pypi/blessings/)或[urwid](http://excess.org/urwid/)。

我认为这些都不能在常规的 Windows 终端中工作。这就是为什么我询问您所针对的操作系统的原因。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-07T03:19:57.593

您可以打印出许多换行符，使其看起来像屏幕已被清除。它也易于实现并且有助于调试。

代码将类似于：

`print "\n"*100`

# jsf - org.primefaces.context.RequestContext.getCurrentInstance 处的 java.lang.NullPointerException

> ID：15702519
> 
> 赞同：2
> 
> 时间：2013-03-29T11:43:50.310
> 
> 标签：jsf, jsf-2, primefaces, managed-bean

我在托管 bean 方法中使用了 RequestContext 的 primeFaces 对象，以便从服务器端执行一些 javascript。我曾经在一个 Listener 处理程序方法（一个使用 AjaxBehaviourEvent 参数处理来自`f:ajax`标签的请求的方法）中执行此操作，它可以工作，但这次我使用了一个没有任何参数的方法。

问题是我用 jquery .append() 附加了一些 html 并且必须使用 jquery ajax 从添加的元素向服务器发送请求（我不能附加任何 jsf 组件，因为它们不会工作，因为它们不是由 jsf 生成的本身）所以我不得不使用不带参数的 bean 方法，并从处理 ajax comming resquests 的 servlet 调用该方法。

为了更详细地解释这一点，假设我以这种方式使用 jquery 添加 html 代码：

```
$('#substartmenudiv').append('<div id="congesdiv" />'); 
```

然后添加单击新添加的 div 后必须执行的代码：

```
$('#congesdiv').click(function(){
 $.post('AjaxRelaisServlet',{action:"setstrtmenustatus",startmenuisopen:startmenuisopen});
}); 
```

并从 servlet 我捕获 ajax 请求发送的参数并调用 bean 方法：

```
protected void doPost(HttpServletRequest request, HttpServletResponse response) throws ServletException, IOException {

boolean startmenuisopen= Boolean.valueOf(request.getParameter("startmenuisopen"));

        UserBean.testcmdlink(startmenuisopen); 
```

被调用的 testcmdlink bean 方法包含 RequestContext 对象，它看起来像这样：

```
public static void testcmdlink(boolean startmenuisopen){        

        RequestContext context = RequestContext.getCurrentInstance();
        if(!startmenuisopen){
        context.execute("$('#substartmenudiv').append('<div id="+"gestprofdiv"+" />');");
        context.execute("displaymenuitems();");
        context.execute("console.log('more elements are appended !!');");
        startmenuisopen=true;

        }else{
            context.execute("$('#substartmenudiv').empty();");
            context.execute("window['bottomvalue'] =30;");
            context.execute("console.log('start menu div is emptied !!');");
            startmenuisopen=false;
        }

    } 
```

有没有办法让它在任何地方工作？

干杯！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T16:48:07.880

你不能那样做。在引擎盖下，`RequestContext`依赖于`FacesContext`对象。此对象[在 JSF 生命周期处理之外不可用](https://stackoverflow.com/a/14394992/1530938)。

您*可以*通过找到一种方法在适当的 JSF 请求期间将`Constants.REQUEST_CONTEXT_ATTR`对象填充到一般对象`ServletContext`中，然后在 servlet 中检索对象来欺骗这一点。我将基于`RequestContext.getCurrentInstance()`PF 源中的实现进行这种信念的飞跃

```
public static RequestContext getCurrentInstance(){
 return (RequestContext)FacesContext.getCurrentInstance().getAttributes().get(Constants.REQUEST_CONTEXT_ATTR);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:58:36.420

你可以在你的问题中找到答案。我假设您有一个侦听器处理程序方法，它侦听请求并使用参数处理它们。因此，您需要传递一些参数，或者您需要创建一个不接受任何参数的新方法来处理您的请求。当没有参数时，它会抛出 NullPointerException。

希望能帮助到你！！！

# java - 如何回显字符而不是在 JTextField 中按下的键

> ID：15702527
> 
> 赞同：0
> 
> 时间：2013-03-29T11:44:12.300
> 
> 标签：java, swing

我需要回显一个特定的字符而不是按下的键`JTextField`。产生的效果就像我`k`按键但`*`出现在文本字段中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:46:48.230

改用 a 怎么样[`JPasswordField`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JPasswordField.html)？它是一个子类`JTextField`

> 允许编辑单行文本，其中视图指示输入了某些内容，但不显示原始字符。

（引自 Javadoc）

关于字符需要动态转换的附加内容，您可能需要查看[Javadoc for](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextField.html)`UpperCaseField`中带有 an`UpperCaseField`的示例。它可以很容易地转换为某种逻辑，将每个字符转换为另一个字符。[`JTextField`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JTextField.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:47:17.017

您需要[`JPasswordField`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JPasswordField.html)为此使用。使用[`setEchoChar(char)`](http://docs.oracle.com/javase/7/docs/api/javax/swing/JPasswordField.html#setEchoChar%28char%29)您可以回显您想要的任何字符。

**更新**根据[OP 评论](https://stackoverflow.com/questions/15702527/how-to-echo-a-char-instead-of-key-pressed-in-jtextfield#comment22299457_15702572)，如果要求是根据用户按下的不同键来回显不同的字符，`keyTyped`可以使用事件，如下所示：

```
sampleTextBox.addKeyListener(new KeyAdapter() {
        @Override
        public void keyTyped(KeyEvent event) {
            event.setKeyChar(getCharToEcho(event.getsetKeyChar())); 
                            // getCharToEcho(char inputKey) will return the key to
                            // echo depending upon the key entered by the user
        }
    }); 
```

# html - 在 CSS3 按钮上居中文本时出错

> ID：15702537
> 
> 赞同：3
> 
> 时间：2013-03-29T11:44:59.650
> 
> 标签：html, css, centering

我试图在我的 CSS3 按钮上将文本“verksamheter”居中，但我无法让它工作。

HTML：

```
<a href="#" class="verksamheter"><span>Verksamheter</span></a> 
```

CSS：

```
.verksamheter {
  width: 220px;
  height: 44px;
  font-style: italic;
  font-size: 18px;
  display: inline-block;
  text-align: center;   
  -webkit-border-radius: 22px;
  -moz-border-radius: 22px;
  border-radius: 22px;
  background-color: #ebebeb;
  -webkit-box-shadow: 0 1px rgba(0,0,0,.13), inset 0 2px rgba(255,255,255,.75);
  -moz-box-shadow: 0 1px rgba(0,0,0,.13), inset 0 2px rgba(255,255,255,.75);
  box-shadow: 0 1px rgba(0,0,0,.13), inset 0 2px rgba(255,255,255,.75);
  border: solid 1px #4f4d6a;
  background-image: -webkit-linear-gradient(top, #6e6c8a, #4f4d6a);
  background-image: -moz-linear-gradient(top, #6e6c8a, #4f4d6a);
  background-image: -o-linear-gradient(top, #6e6c8a, #4f4d6a);
  background-image: -ms-linear-gradient(top, #6e6c8a, #4f4d6a);
  background-image: linear-gradient(to bottom, #6e6c8a, #4f4d6a);   
}

.verksamheter span {
  vertical-align: middle;
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:47:03.157

的高度`<a>`是 44 像素，所以也制作`line-height`文本的高度`44px`。

[http://jsfiddle.net/s4KJd/](http://jsfiddle.net/s4KJd/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T11:47:05.733

只需`line-height`根据元素的高度和使用的字体大小设置属性。例如：

```
.verksamheter {
    line-height: 44px;
} 
```

这是一个[jsFiddle 演示](http://jsfiddle.net/9tKYf/)。

# css - SCSS 从子级附加到根选择器

> ID：15702538
> 
> 赞同：2
> 
> 时间：2013-03-29T11:45:00.077
> 
> 标签：css, css-selectors, sass

我知道在 SCSS 中我可以做到这一点：

```
.foo {
    color: blue;
    a {
        color: red;
        .bar & { color: green; }
    }
} 
```

得到这个：

```
.foo { color: blue; }
.foo a { color: red; }
.bar .foo a { color: green; } 
```

但是有没有办法附加该选择器，从而导致：

```
.foo { color: blue; }
.foo a { color: red; }
.foo.bar a { color: green; } 
```

***请注意**，这是一个简单的示例，在我的用例中，规则的嵌套比这要深得多。*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T14:28:06.637

唯一的`&`作品向上一级。在您的代码示例中，您将无法获得您期望的代码。您需要以不同的方式处理它。

```
.foo {
    color: blue;
    a {
        color: red;
    }
    &.bar {
       a {
          color:green;
       }
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T18:50:55.593

**显然这[仅使用 phpsass 编译器呈现](http://www.phpsass.com/try/)，因此它是特定**于编译器的。

只需在以下内容之前摆脱您的空间`&`：

```
.foo {
    color: blue;
    a {
        color: red;
        .bar& { color: green; }
    }
} 
```

编译为：

```
.foo {
  color: blue;
}

.foo a {
  color: red;
}

.bar.foo a {
  color: green;
} 
```

请注意，`.foo.bar`and`.bar.foo`是等效的选择器（仅当两个类都在项目上时它们才会进行选择），因此在这种情况下顺序无关紧要。现在，这是否可以在更深的嵌套结构（你声明你拥有）中工作，这一切都取决于你试图定位的目标，但基本上这会将一个类添加到*最外层*（你的`.foo`等价物），无论结构有多深.

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-03-29T16:57:46.903

你有一个[XY 问题](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem)。您需要覆盖 的颜色`a`，但不是要求最佳方式来做到这一点，而是发明了一些奇怪的结构并询问为什么它不起作用。

问题是您不需要放入`a`内部`.foo`来覆盖颜色。An`a`不是直接从自己的属性中获取颜色`.foo`，而是从`a`自己的`color`属性中获取颜色。

默认`color`设置为`inherit`，它自然地从父级继承。因此，要覆盖`a`的颜色，您可以将其`color`属性从更改`inherit`为您想要的任何内容。为此，您无需将 parent 放入选择器！

**UPD**：由于**cimmanon**在下面纠正了我，颜色`a`不是从父级继承的，而是使用自己的默认值。

所以一个最佳的解决方案是这样的：

```
.foo {
  color: blue; }

a {
  color: red;

  .foo.bar & {
    color: green; } } 
```

此外，您想要完全覆盖 for 的事实`.foo.bar a`表明您将事情复杂化了。

仅`.foo.bar a`当您需要处理四种不同的情况时才需要： `a`、`.foo a`和。你真的有那么多不同的链接颜色吗？为什么？`.bar a``.foo.bar a`

当然，您可以重构您的 HTML 结构，使其更具语义化，并对这样的代码感到满意：

```
a {
  color: red; }

#header {
  color: blue; }

.cart-item 
   & a {
    color: green; } } 
```

使用此代码，链接只能是两种不同的颜色：绿色表示购物车项目，红色表示其他所有项目。

如果您确实有充分的理由拥有多种颜色，请考虑使用 mixin：

```
@mixin link-with-color($color: red) {
  a {
    color: $color; } }

#header {
  @include link-with-color(blue); }

.cart-item {
  @include link-with-color(green); } 
```

# java - ImageView 旋转而不重新创建位图

> ID：15702539
> 
> 赞同：1
> 
> 时间：2013-03-29T11:45:01.057
> 
> 标签：java, android, matrix, bitmap, android-imageview

我想旋转 ImageView 图像。这是我的代码：

```
Matrix mat = new Matrix();
mat.preRotate(90, ivImage.getWidth()/2, ivImage.getHeight()/2);
ivImage.setScaleType(ScaleType.MATRIX);
ivImage.setImageMatrix(mat); 
```

但是当我点击旋转按钮时，不仅图像旋转，而且它也被缩放，因为位图比`ImageView`.

我知道我可以使用

```
b = Bitmap.createBitmap(b, 0, 0, b.getWidth(), b.getHeight(), mat, true);
ivImage.setImageBitmap(b); 
```

但这明显较慢，并且有一些滞后。

**所以我的问题是：**如何在不缩放且不重新创建位图的情况下旋转图像？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T11:52:47.950

这是我用于将图像旋转到 90 度的代码。

```
 if(oldAngle == 0){
              newAngle = oldAngle + 90;
            }
            else if(oldAngle == 90)
                newAngle = oldAngle - 90;
              LinearLayout.LayoutParams layoutParams = (LinearLayout.LayoutParams) view.getLayoutParams();
              int centerX = layoutParams.leftMargin + (view.getWidth()/2);
              int centerY = layoutParams.topMargin + (view.getHeight()/2);
              RotateAnimation animation = new RotateAnimation(oldAngle, newAngle, centerX, centerY);
              animation.setDuration(0);
              animation.setRepeatCount(2);
              animation.setFillAfter(true);
              view.startAnimation(animation);

              oldAngle = newAngle; 
```

希望它会帮助你...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:51:59.653

使用 XML 动画怎么样？

```
<?xml version="1.0" encoding="utf-8"?>
    <rotate
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="0"
    android:interpolator="@android:anim/linear_interpolator"
    android:toDegrees="360"
    android:pivotX="50%"
    android:pivotY="50%"
    android:duration="1000"
    android:startOffset="0"
    android:repeatCount="infinite"
    /> 
```

然后将它与类似的东西一起使用；

```
 rotation = AnimationUtils.loadAnimation(this, R.anim.clockwise_rotation);
 buttonRefresh.startAnimation(rotation); 
```

附言。这无限旋转。所以需要一些调整。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T12:23:06.530

用这个

```
final Random generator = new Random();
        int n = 10000;
        n = generator.nextInt(n);
        final Matrix mtx = new Matrix();
        mtx.postRotate(n);
        rotator = Bitmap.createBitmap(all, 0, 0,
                all.getWidth(), all.getHeight(), mtx,
                true);
        view.setImageBitmap(rotator); 
```

这将随机旋转图像。只是改变`.nextInt(n)`它`.nextInt(AnyNumberYouLife)` 的快:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-09T07:18:58.027

我发现就我的目的而言，它是最好的解决方案，`Canvas`而不是`ImageView`. 对于图像的旋转，我选择使用可以在[此处找到的另一个库](https://github.com/lvillani/android-cropimage/tree/master/src/com/android/camera)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-27T08:30:16.430

这是为 imageView 放置旋转可绘制对象的一个​​很好的解决方案：

```
Drawable getRotateDrawable(final Bitmap b, final float angle) {
    final BitmapDrawable drawable = new BitmapDrawable(getResources(), b) {
        @Override
        public void draw(final Canvas canvas) {
            canvas.save();
            canvas.rotate(angle, b.getWidth() / 2, b.getHeight() / 2);
            super.draw(canvas);
            canvas.restore();
        }
    };
    return drawable;
} 
```

用法：

```
Bitmap b=...
float angle=...
final Drawable rotatedDrawable = getRotateDrawable(b,angle);
root.setImageDrawable(rotatedDrawable); 
```

另一种选择：

```
private Drawable getRotateDrawable(final Drawable d, final float angle) {
    final Drawable[] arD = { d };
    return new LayerDrawable(arD) {
        @Override
        public void draw(final Canvas canvas) {
            canvas.save();
            canvas.rotate(angle, d.getBounds().width() / 2, d.getBounds().height() / 2);
            super.draw(canvas);
            canvas.restore();
        }
    };
} 
```

另外，如果您想旋转位图，但又怕 OOM，您可以使用我在[**此处制作的 NDK 解决方案**](https://stackoverflow.com/questions/18250951/jni-bitmap-operations-for-helping-to-avoid-oom-when-using-large-images)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-09T17:01:17.050

我发现旋转 ImageView 的最简单方法是这样做：

```
view.animate().rotationBy(degrees); 
```

非常容易实现，其余的都由 android 处理

希望这可以帮助！:)

# wpf - 边框影响窗口的 WPF 样式

> ID：15702541
> 
> 赞同：1
> 
> 时间：2013-03-29T11:45:04.907
> 
> 标签：wpf, xaml

我有一个简单的 WPF (4.0) 示例，旨在展示我在另一个项目中面临的陌生感。该示例尝试显示一些我使用 Border 元素的矩形形状。下面是标记：

```
<Window x:Class="WpfApplication1.Window3"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="Window3" Height="1000" Width="1500">
    <Window.Resources>
        <LinearGradientBrush EndPoint="0.5,1" StartPoint="0.5,0" x:Key="grad">
            <LinearGradientBrush.GradientStops>
                <GradientStop Color="Black" Offset="0"  />
                <GradientStop Color="White" Offset="1"  />
            </LinearGradientBrush.GradientStops>
        </LinearGradientBrush>

        <Style TargetType="Border">
            <Setter Property="Background" Value="{StaticResource grad}" />
            <Setter Property="HorizontalAlignment" Value="Left" />
            <Setter Property="VerticalAlignment" Value="Top" />
            <Setter Property="Width" Value="100" />
            <Setter Property="Height" Value="100" />
            <Setter Property="BorderThickness" Value="1" />
        </Style>

    </Window.Resources>
    <StackPanel Orientation="Horizontal">
        <Border />
        <Border />
        <Border />
    </StackPanel>
</Window> 
```

在设计器中，这看起来与我想象的完全一样：屏幕左上角的 3 个正方形彼此相邻。但是在运行时只显示 1 并且窗口的其余部分是黑色的。似乎窗口的内容本身受布局属性的影响。如果我使用 Rectangles 而不是 Borders，则示例工作得很好。谁能解释一下为什么我会看到这种行为（可能与继承有关）？设计时视图和运行时视图之间的区别基本上是VS错误吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:47:15.847

像这样改变它：

```
 <Style TargetType="Border" x:Key="myborder">
        <Setter Property="Background" Value="{StaticResource grad}" />
        <Setter Property="HorizontalAlignment" Value="Left" />
        <Setter Property="VerticalAlignment" Value="Top" />
        <Setter Property="Width" Value="100" />
        <Setter Property="Height" Value="100" />
        <Setter Property="BorderThickness" Value="1" />
    </Style>

</Window.Resources>
<StackPanel Orientation="Horizontal">
    <Border Style = {StaticResources myborder}/>
    <Border Style = {StaticResources myborder}/>
    <Border Style = {StaticResources myborder}/>
</StackPanel> 
```

现在好啦。

**编辑：** 每个 Winwow 的模板都是一个边框，其中有一个 AdornerDecorator。在那个装饰器中有一个`ContentPresenter`. 因此，当您为边框创建默认样式时，它也会影响 Window 的边框。

# mysql - Mysql - 当Linux服务器上的IO等待很高时查询很慢

> ID：15702542
> 
> 赞同：1
> 
> 时间：2013-03-29T11:45:09.953
> 
> 标签：mysql

IO 等待高时查询慢。

> **从 iotop 命令显示**
> 
> -- TID -- PRIO -- 用户 -- 磁盘读取 -- 磁盘写入 -- SWAPIN -- IO> -- 命令
> 
> -- 2311 -- be/4 -- mysql -- 0.00 B/s -- 0.00 B/s -- 0.00% -- 96.25% -- mysql~l.sock
> 
> -- 2311 -- be/4 -- mysql -- 0.00 B/s -- 0.00 B/s -- 0.00% -- 96.25% -- mysql~l.sock
> 
> -- 2311 -- be/4 -- mysql -- 0.00 B/s -- 0.00 B/s -- 0.00% -- 96.24% -- mysql~l.sock
> 
> **下午 6:13:28 - 下午 6:13:29（sar 命令）时开始高 IO 等待**
> 
> --------------------- CPU -- %usr -- %nice -- %sys -- %iowait -- %steal
> 
> -- 下午 6:13:28 --- 全部 ----- 2.53 --- 0.00 ---- 2.02 ----- **39.39** ------ 0.00
> 
> -- 下午 6:13:29 --- 全部 ----- 1.99 --- 0.00 ---- 1.00 ----- **49.25** ------ 0.00
> 
> **在那段时间之间查询缓慢**
> 
> 时间：130329 18:13:29
> 
> 用户@主机：wdwdwd[wdwdwd]@localhost[]
> 
> Query_time: 2.007902 Lock_time: 0.000025 Rows_sent: 0 Rows_examined: 1 SET timestamp=1364555609;
> 
> UPDATE log_product SET credit=credit+1 WHERE id_product='349721228' and id_user='2021841' LIMIT 1;
> 
> **## 问题是如何解决这个过程。真正的原因是什么？##**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:09:09.140

您是否在 (id_user, id_product) 的“Log_Product”表上有一个索引作为单个索引，而不是两个索引，每列一个。此外，如果字段是数字，则不需要引号...

# c# - C# Neo4jClient 任务取消异常

> ID：15702544
> 
> 赞同：4
> 
> 时间：2013-03-29T11:45:25.470
> 
> 标签：c#, exception, neo4j, neo4jclient

我正在使用 Neo4jClient 对 Neo4j 数据库进行相当长的查询，并得到一个非常随机发生的异常。如何解决这个问题？

```
System.AggregateException: One or more errors occurred. ---> System.AggregateException: One or more errors occurred. ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.

--- End of inner exception stack trace ---
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Neo4jClient.GraphClient.<>c__DisplayClass3.<SendHttpRequestAsync>b__2(Task`1 requestTask) in c:\TeamCity\buildAgent\work\f1c4cf3efbf1b05e\Neo4jClient\GraphClient.cs:line 149
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.Execute()
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Neo4jClient.GraphClient.<>c__DisplayClass1b`1.<Neo4jClient.IRawGraphClient.ExecuteGetCypherResultsAsync>b__1a(Task`1 responseTask) in c:\TeamCity\buildAgent\work\f1c4cf3efbf1b05e\Neo4jClient\GraphClient.cs:line 745
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.Execute()
---> (Inner Exception #0) System.AggregateException: One or more errors occurred. ---> System.Threading.Tasks.TaskCanceledException: A task was canceled.
   --- End of inner exception stack trace ---
   at System.Threading.Tasks.Task`1.GetResultCore(Boolean waitCompletionNotification)
   at Neo4jClient.GraphClient.<>c__DisplayClass3.<SendHttpRequestAsync>b__2(Task`1 requestTask) in c:\TeamCity\buildAgent\work\f1c4cf3efbf1b05e\Neo4jClient\GraphClient.cs:line 149
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.Tasks.Task.Execute()
---> (Inner Exception #0) System.Threading.Tasks.TaskCanceledException: A task was canceled.<---
<--- 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T03:18:43.357

[这在https://bitbucket.org/Readify/neo4jclient/issue/70/taskcancelledexception](https://bitbucket.org/Readify/neo4jclient/issue/70/taskcancelledexception)被跟踪为一个问题

诊断和最终的“官方”解决方案将在那里发布。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-02-10T07:59:49.843

我花了几个小时才发现并修复了这个问题。

[编辑]：不要使用`Neo4jClient.GraphClient`，使用`Neo4jClient.BoltGraphClient`- 两者都派生自`IGraphClient`- BoltGraphClient 在幕后不使用 HttpClient 并且速度更快且内存占用更少。

`var BoltGraphClient = new Neo4jClient.BoltGraphClient(url,username,password);`

我的旧答案+故事：

我将大量 Cypher 查询放入 a`List<Task>`并通过`query.ExecuteWithoutResultsAsync()`. Neo4j 服务器一次只能处理这么多，并将请求放入队列中。

我已经确认`TaskCanceledException`100 秒后被抛出，这是`HttpClient`.

阅读文档后，我想出了如何在 graphclient 的初始化期间指定无限时间跨度。希望这会节省您的时间。

```
var httpClientWrapper = new Neo4jClient.HttpClientWrapper(
        username,
        password,
        new System.Net.Http.HttpClient() {
             Timeout = System.Threading.Timeout.InfiniteTimeSpan
        });

var graphClient = new Neo4jClient.GraphClient(new Uri(url), httpClientWrapper); 
```

# c - 如何使用sqlite的外键链接三个表1->2->3不同的列

> ID：15702549
> 
> 赞同：0
> 
> 时间：2013-03-29T11:45:38.117
> 
> 标签：c, linux, sqlite

我有三个表我想将所有三个表链接在一起。例如：table1：创建主表（sr_no int,int,name text）；

table2：创建表child1（sr_no int，emplno int，last_name text，外键（sr_no）在更新级联上删除级联时引用master（sr_no））；

table3：创建表child2（Em int，电话文本，外键（Em）在更新级联上删除级联时引用child1（emplno））；

但是当将数据插入 table3 时，它的显示 ===> 错误：外键不匹配

请告诉我什么问题谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:45:46.740

[http://www.sqlite.org/foreignkeys.html#fk_indexes](http://www.sqlite.org/foreignkeys.html#fk_indexes)

如果出现以下情况，可能会报告外键 DML 错误：

*   父表不存在，或

*   外键约束中命名的父键列不存在，或者

*   **在外键约束中命名的父键列不是父表的主键，并且不受使用 CREATE TABLE 中指定的整理顺序的唯一约束**，或者

*   子表引用了父表的主键，没有指定主键列，并且父表的主键列数与子键列数不匹配。

emplno 是 child2 中的主键吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:49:12.213

[文档](http://www.sqlite.org/foreignkeys.html#fk_indexes)说：

> 父键列必须共同受 UNIQUE 约束或具有 UNIQUE 索引

`child1`向'S字段添加 UNIQUE 约束`emplno`，或在其上创建单独的索引。

# iphone - 如何在同一位置放置多个图钉

> ID：15702552
> 
> 赞同：0
> 
> 时间：2013-03-29T11:45:49.103
> 
> 标签：iphone, ios, objective-c, annotations, mkmapview

嗨，可以`MKMapView`在 Lat Long 的同一位置显示多个用户 Pin 图。看到这个波纹管图像： -

![在此处输入图像描述](../Images/88bdb96b75bffa1b615ef3b35945b06c.png)

在上图中，我可以有两个用户位置图钉，但由于相同的纬度，我只能看到一个图钉。所以我的问题是，是否可以在同一位置显示多个图钉。

如果我们不能在同一位置放置多个 Pin，则可以`AccessoryView`在一个包含相同位置用户信息的 Pin 上显示多个。

请指导我如何完成这项任务。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:50:24.723

您将需要创建一个自定义 MKAnnotation 类来执行此操作。

在同一位置放置多个引脚没有任何意义。相反，您可以在同一个 pin 中显示多个 AccessoryView 为此，您需要创建 UIView 来列出您希望显示的所有 pin 标题。

```
 [customAnnotationView.contentView addSubview:_contentView];
        customAnnotationView.contentWidth = _contentView.frame.size.width;
        customAnnotationView.contentHeight = _contentView.frame.size.height; 
```

UIView 是您设计的，因此您可以创建它

像这样的东西可以帮助你。![在此处输入图像描述](../Images/a449d4402dda97db337e353caff6cf56.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-06-29T06:51:14.197

首先过滤掉唯一的位置记录。假设您有 10 条记录要显示在地图上，其中 3 条记录具有相同的位置，其他 2 条记录具有其他相同的位置，其余 5 条具有不同的位置。所以在地图上应该总共有 1（对于 3 个相同的记录）+1（对于 2 个相同的记录）+5 = 地图上的 7 个引脚。

现在在方法中

```
- (MKAnnotationView *)mapView:(MKMapView *)mapView viewForAnnotation:(id <MKAnnotation>)annotation

check current annotation has more than 1 records same as annotation location and based on that do

if (ary.count > 1)
    {
        [annotationView setCanShowCallout:NO];
    }
    else
    {
        [annotationView setCanShowCallout:YES];
    } 
```

然后在方法中

-(void)mapView:(MKMapView *)mapView didSelectAnnotationView:(MKAnnotationView *)view

检查视图可以显示未标注。做以下

```
if (![view canShowCallout])
{
  // means annotation has more than 1 records on same location 

 now get records of same location and display the way you want.
} 
```

# jquery - bpopup 不工作 + 在页面加载时显示

> ID：15702560
> 
> 赞同：3
> 
> 时间：2013-03-29T11:46:08.827
> 
> 标签：jquery, iframe, popup, pageload, bpopup

我对 jquery 和所有关于它的东西都非常陌生。我只做一页特设，所以我迷路了。我需要将 iframe 显示为并弹出。怎么做？

我试过 bpopup：

index.html 就像：

```
<button id="my-button">POP IT UP</button>
<!-- Element to pop up -->
<div id="element_to_pop_up">
    <a class="b-close">x<a/>
    Content of popup
</div>

<script src="http://ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
<script src="js/jquery.bpopup.min.js"></script>
<script src="js/jquery.easing.1.3.js"></script>
<script src="js/scripting.min.js"></script> 
```

根据 bpopup 的主页，我修改了 jquery.bpopup.min.js

```
// Semicolon (;) to ensure closing of earlier scripting
// Encapsulation
// $ is assigned to jQuery
;(function($) {

     // DOM Ready
    $(function() {

        // Binding a click event
        // From jQuery v.1.7.0 use .on() instead of .bind()
        $('#my-button').bind('click', function(e) {

            // Prevents the default action to be triggered. 
            e.preventDefault();

            // Triggering bPopup when click event is fired
            $('element_to_pop_up').bPopup({
        content:'iframe', //'ajax', 'iframe' or 'image'
        contentContainer:'.content',
        loadUrl:'http://dinbror.dk/search' //Uses jQuery.load()
    });

        });

    });

})(jQuery); 
```

我使用了默认的 CSS 设置，例如：

```
#element_to_pop_up { 
    background-color:#fff;
    border-radius:15px;
    color:#000;
    display:none; 
    padding:20px;
    min-width:400px;
    min-height: 180px;
}
.b-close{
    cursor:pointer;
    position:absolute;
    right:10px;
    top:5px;
} 
```

现在奇怪的事情。有一个类似的默认 js 设置 `$('#element_to_pop_up').bPopup();`实际上可以工作，单击按钮后会显示简单的弹出窗口。但是当我使用 Iframe 设置（如上）时，什么都没有发生。没有什么。为什么？我很困惑。

目标是在页面加载时显示弹出窗口。我已经看到了几个提示，但没有一个有效。要修改哪个文件以及如何修改？？？？

如果您知道如何提供帮助，请告诉我。只是不要忘记我就像一个学走路的小孩。所以不要跳过任何细节，比如“系鞋带”。非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-09-29T16:27:43.863

好的。我知道这个问题的答案。问题是因为您从他们的网站复制并粘贴了代码，并且上面有问题。

仔细查看这一行的元素标识符：

```
$('element_to_pop_up').bPopup({..... 
```

他们没有在 element_to_pop_up 之前放置 #。它应该是

```
$('#element_to_pop_up').bPopup({..... 
```

之后你的代码应该可以工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-31T08:15:39.900

```
<div id="element_to_pop_up">
<a class="b-close">x<a/>

<div class="content">
    Content of popup
</div>

</div> 
```

只需添加一个带有“内容”类的额外 div。它应该工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-11-13T10:22:48.220

尝试将“jquery-1.10.2.js”库添加到您的页面或最新版本。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-12T05:10:36.183

有几件事需要检查。首先，打开 Chrome 开发工具并观察控制台。查看单击按钮时是否出现任何错误。

其次，检查网络选项卡并确保一切都正确加载。

您能否发布实际有效的代码，以便我们看到有什么不同？

# php - 将php链接替换为静态链接

> ID：15702567
> 
> 赞同：1
> 
> 时间：2013-03-29T11:46:30.840
> 
> 标签：php, html

我有在大多数区域使用绝对寻址的脚本，现在我需要将它们更改为相对寻址。但是我在这里面临的问题是，例如，如果我有一个名为

```
www.example.com
```

现在我想更改 php 中的链接

```
<link href="<?php print $theme; ?>style.css" type="text/css" rel="stylesheet" />

<link href="<?php print $theme; ?>css/colorpicker.css" type="text/css" rel="stylesheet" /> 
```

到

```
<link href="http://www.example.com/<?php print $theme; ?>style.css" type="text/css" rel="stylesheet" />

<link href="http://www.example.com/<?php print $theme; ?>css/colorpicker.css" type="text/css" rel="stylesheet" /> 
```

但我最终得到了这个结果

```
<link href="http://www.example.com/http://www.example.com/themes/in/style.css" type="text/css" rel="stylesheet" />

<link href="http://www.example.com/http://www.example.com/themes/in/css/colorpicker.css" type="text/css" rel="stylesheet" /> 
```

我知道某处有问题，但我仍然无法让它工作。任何有关正确格式的帮助将不胜感激。对不起，如果我的问题标题不合适。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:52:40.890

从 url 设置来看：

```
<?php
$path  = explode('/', $theme);
$theme = end($path);
?>
<link href="http://www.example.com/themes/<?= $theme ?>/style.css" type="text/css" rel="stylesheet" /> 
```

这会将 url 分成几部分并选择我认为是您想要的主题名称的最后一项。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T11:55:37.903

Your `$theme` contains this url '[http://www.example.com/themes/in/](http://www.example.com/themes/in/)'. So if you just want the url to be like this

`http://www.example.com/style.css` instead of

`http://www.example.com/http://www.example.com/themes/in/style.css`

then remove the `$theme` from the `href` section.

hope this helps

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:53:05.547

他们将是两种可能的解决方案，要么您删除

```
http://www.example.com/ 
```

从`<?php print $theme; ?>`OR 开始只包括主题名称而不是基础浴。

# java - 左上角和右上角三角形

> ID：15702571
> 
> 赞同：-1
> 
> 时间：2013-03-29T11:46:45.867
> 
> 标签：java, string

我想插入空格，如所需输出所示

`input string :abc`

所需输出：

```
abcabc
ab--bc
a----c 
```

但我的是：

```
abcabc
abbc
ac 
```

* * *

```
public static void triangle(String s){

    int length = s.length();

    for(int i=0;i<2*length;i++){
        System.out.println();

        for(int j=0;j<length-i;j++){
            System.out.print(" "+s.charAt(j));
        }                   
        for(int k=i;k<length;k++){
            System.out.print(" "+s.charAt(k));      
        }    
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:14:33.177

```
 public static void triangle(String s){
    int length = s.length();
    for(int i=0;i<length;i++){
        System.out.println();
        int j=0;
            while(j<length-i){
                System.out.print(s.charAt(j));
                j++;
            }
            while(j<length){
                System.out.print(" ");
                j++;
            }
        int k=0;
        while(k<i){
            System.out.print(" ");
            k++;
        }
        while(k<length){
                System.out.print(s.charAt(k));
                k++;
        }
 }} 
```

把它放在while循环下。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T16:29:45.287

或者只是for循环:)

```
for (int i = 0; i < s.length(); i++) {
    for (int j = 0; j < s.length()-i; j++) {
        System.out.print(s.charAt(j));
    }
    for (int j = s.length()-i; j < s.length(); j++) {
        System.out.print(" ");
    }
    for (int j = 0; j < i; j++) {
        System.out.print(" ");
    }
    for (int j = i; j < s.length(); j++) {
        System.out.print(s.charAt(j));

    }
    System.out.println("");
} 
```

# wordpress - 从 wordpress 页面隐藏或删除评论框

> ID：15702582
> 
> 赞同：0
> 
> 时间：2013-03-29T11:47:25.310
> 
> 标签：wordpress

我正在开发一个插件，一切都很好，但是有一个问题。
如何隐藏或删除评论框。我浪费了很多时间，但无法开发出正确的脚本。我当前的脚本是这个
`add_filter( 'comments_template', 'remove_comments_template_on_pages', 11 );`
`function remove_comments_template_on_pages( $file ) {`
`if ( is_page() )`
`comments_template('', true);`
`}`

我不知道如何开发这个脚本。任何帮助都可以让我完成我的插件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:42:04.533

将以下代码添加到您的**functions.php**文件中。

```
add_action('init', 'remove_page_feature');

function remove_page_feature() {
    remove_post_type_support( 'page', 'comments' );
} 
```

现在在执行评论模板之前提供一个检查，如下所示：

```
if ( post_type_supports( 'page', 'comments' );  )
    comments_template('', true);
} 
```

**注意：使用上面的代码将禁用页面上的*评论*。**

# ios - AVFoundation 相机变焦

> ID：15702583
> 
> 赞同：7
> 
> 时间：2013-03-29T11:47:28.677
> 
> 标签：ios, objective-c, avfoundation

我使用`AVFoundation`框架来显示来自相机的视频。

我如何使用它的代码是通常的：

```
session = [[AVCaptureSession alloc] init] ;
...   
captureVideoPreviewLayer = [[AVCaptureVideoPreviewLayer alloc] initWithSession:session];
...
[cameraView.layer addSublayer:captureVideoPreviewLayer];
... 
```

所以我想为相机添加缩放功能。

我找到了 2 个如何实现缩放的解决方案。

***首先***：是使用`CGAffineTransform`：

`cameraView.transform = CGAffineTransformMakeScale(x,y);`

***第二***：是将cameraView放在滚动视图中，设置最大和最小滚动并将此视图设置为缩放视图。

```
- (UIView *)viewForZoomingInScrollView:(UIScrollView *)scrollView
{
    return cameraView;
} 
```

使缩放性能和质量更好的最佳方法是什么？还有其他解决方案可以进行缩放吗？也许我错过了一些`AVFoundation`缩放方法。

谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-25T13:15:52.097

那么实际上有一个`GCFloat`叫`setVideoScaleandCropFactor`.

[您可以在此处](http://developer.apple.com/library/ios/#documentation/AVFoundation/Reference/AVCaptureConnection_Class/Reference/Reference.html)找到文档。

我不确定这是否仅用于静态图像输出，但我一直在努力，如果您将其设置为手势或滑块并让它控制浮动，效果会很好。

你可以在[这里](http://developer.apple.com/library/ios/#samplecode/SquareCam/Introduction/Intro.html#//apple_ref/doc/uid/DTS40011190)找到它的演示。

好东西。我试图循环它，这样我就可以创建一个带缩放的条形码扫描仪。我在做什么虽然很粗糙哈哈。

# sqlite - MsBuild 无法在 TFS 上加载 NHibernate

> ID：15702586
> 
> 赞同：1
> 
> 时间：2013-03-29T11:47:38.910
> 
> 标签：sqlite, tfs, nuget-package, mstest, ravendb

嗨，我有一组与 NHibernate、SQLLite 一起运行的 MsTest 测试。我可以从任何 DEV 机器成功加载程序集并运行测试。在 TFS 上，我们有一个放置文件夹，其中放置了所有程序集和 MsTest.exe 的副本，我们从中运行单元测试。我在 TFS 上遇到的问题如下：

> 单元测试适配器抛出异常：成员'NHibernate.HibernateException，NHibernate，版本 = 3.3.1.4000，文化 = 中性，PublicKeyToken = aa95f207798dfdb4'的类型未解析。

但是这个程序集和相关的依赖被复制到了放置位置，所以我不明白为什么 MsTest 不能加载这个程序集。我在 MsBuild 中使用此命令运行测试：

```
mstest /testcontainer:"mydll.dll" /detail:errormessage /detail:errorstacktrace 
```

但不幸的是我看不到真正的错误，我猜它与SQLLite有关。

# android - 如何解析来自webservice url的json响应并将其解析为android中的url

> ID：15702587
> 
> 赞同：0
> 
> 时间：2013-03-29T11:47:39.020
> 
> 标签：android, json, web-services, request

我有一个应用程序，我使用[此链接](http://lukencode.com/2010/04/27/calling-web-services-in-android-using-httpclient/#comment-179)调用 web服务，我有一个 web 服务 Url，另一个 Url 正在从该 url 获得响应。我需要将该 url 用作

> 公共静态最终字符串 TIME_CENTRAL_SERVER = " [http://accounts.myexample.com/Services](http://accounts.myexample.com/Services) "; 在“ [http://accounts.myexample.com/Services](http://accounts.myexample.com/Services) ”的地方，我需要解析我的 json 响应。

我已经在谷歌中检查过，但无法得到任何答案，任何人都可以帮助我解决这个问题，在此先感谢。如果有人有疑问问我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:52:55.503

第一个网络服务调用如下

```
RestClient client = new RestClient(LOGIN_URL);
client.AddParam("accountType", "GOOGLE");
client.AddParam("source", "tboda-widgalytics-0.1");
client.AddParam("Email", _username);
client.AddParam("Passwd", _password);
client.AddParam("service", "analytics");
client.AddHeader("GData-Version", "2");

try {
    client.Execute(RequestMethod.POST);
} catch (Exception e) {
    e.printStackTrace();
}

String response = client.getResponse(); 
```

解析响应后，如果您想进行另一个 Web 服务调用，只需创建另一个具有不同 URL 和参数的 RestClient 对象并调用执行方法，如下所示，

```
RestClient client1 = new RestClient(GET_INFO_URL);
client1.AddParam("userid", "123");

try {
    client1.Execute(RequestMethod.POST);
} catch (Exception e) {
    e.printStackTrace();
}

String response1 = client1.getResponse(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:44:25.493

最后，我在团队负责人的指导下解决了我的问题，下面是我们在 constants.java 类中使用的代码

```
public static final String GET_CENTRAL_SERVER = String.format("%s/AccountService/security/ValidateAccess", TIMEMACHINE_ACCOUNTS_SERVER); 
```

并在 serversync.java 类中添加代码片段

```
public String getCentralServer(Context context, String serial_number) throws Exception{
    // TODO Auto-generated method stub
    WebServiceClient client = new WebServiceClient(Constants.GET_CENTRAL_SERVER);
    client.addParam("accesscode", String.valueOf(serial_number));
    client.addParam("type", "2");
    client.Execute(RequestMethod.GET);
    String response = client.getResponse();
    if (response != null){
        response = response.replaceAll("\\\\/", "/");
        response = response.replace("\"", "");
        response = response.replace("\n","");
        response = "http://" + response;
        return response;
    }

    return null;
} 
```

# ajax - AJAX 更新指定 div 失败

> ID：15702588
> 
> 赞同：0
> 
> 时间：2013-03-29T11:47:46.503
> 
> 标签：ajax

我经常使用 AJAX。以下面的代码为例，有时更新指定的`content`div会失败。相反，整个页面都是更新的。奇怪的是，有时可以，但有时却不行。这个问题似乎是随机出现的，非常烦人。有人可以解释一下吗？谢谢。

```
<div id="content"></div>

...

<a href="/admin?arg1=systemSetting" class="adminMenu">
  <button class="adminButton">System settings</button>
</a>

<script>
$(document).ready(function() {
  $('a.adminMenu').click(function() {
    var url = $(this).attr('href');
    $('#content').load(url);
    return false;
  });
});
</script> 
```

# ruby-on-rails - 将数据从一张表复制到另一张表

> ID：15702589
> 
> 赞同：0
> 
> 时间：2013-03-29T11:47:50.840
> 
> 标签：ruby-on-rails

我有两个表，一个与我的 rails 应用程序无关，另一个`invtypes`与`items`我的应用程序关联。

表`invtypes`有 20.000 条记录，我需要移动到`items`表中。

现在我的第一次尝试是简单地对 invtypes 进行 ActiveRecord 查询以获取所有条目，然后遍历每个条目并`Item`通过实例化新的`Item model`添加属性然后调用来创建一个新条目`model.save`

然而，这也做了验证和其他一些减慢的事情，使这个任务执行了 30 分钟，`Rails Console`因为我会这样做几次，我不能让它这么慢。

所以我的第二个想法是用普通的旧查询 no Models 尝试这个，但是现在这给出了一个错误：

```
 ←[1m←[35m (27.0ms)←[0m  INSERT INTO items (typeID, name, description, volume, price, created_at, updated_at) VALUES (0, '#System', '', 0.0, 0.0, '20
13-03-29 04:06:27 +0100', '2013-03-29 04:06:27 +0100');
ActiveRecord::StatementInvalid: Mysql2::Error: Incorrect datetime value: '2013-03-29 04:06:27 +0100' for column 'created_at' at row 1: INSERT INTO ite
ms (typeID, name, description, volume, price, created_at, updated_at) VALUES (0, '#System', '', 0.0, 0.0, '2013-03-29 04:06:27 +0100', '2013-03-29 04:
06:27 +0100');
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:2
33:in `query'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:2
33:in `block in execute'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract_adapter.rb:280:in
`block in log'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/notifications/instrumenter.rb:20:in `instrume
nt'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract_adapter.rb:275:in
`log'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:2
33:in `execute'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/mysql2_adapter.rb:214:in `e
xecute'
        from (irb):21:in `block in irb_binding'
        from (irb):19:in `each'
        from (irb):19
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1/lib/rails/commands/console.rb:47:in `start'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1/lib/rails/commands/console.rb:8:in `start'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1/lib/rails/commands.rb:41:in `<top (required)>'
        from script/rails:6:in `require' 
```

由于时间.now

```
result = ActiveRecord::Base.connection.select_all( "SELECT * FROM invtypes" )
time = Time.now
result.each do |row|
 sql = "INSERT INTO items (typeID, name, description, volume, price, created_at, updated_at) VALUES (#{row["typeID"]}, '#{row["typeName"]}', '#{row["description"]}', #{row["volume"]}, #{row["basePrice"]}, '#{time}', '#{time}');"
 ActiveRecord::Base.connection.execute(sql)
end 
```

我如何使用 Ruby/Rails 来解决这个问题，或者我应该用 Java 编写应用程序吗？C 来执行这个查询？

只执行 10 行然后抛出：

```
 from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:2
33:in `query'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:2
33:in `block in execute'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract_adapter.rb:280:in
`block in log'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activesupport-3.2.1/lib/active_support/notifications/instrumenter.rb:20:in `instrume
nt'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract_adapter.rb:275:in
`log'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/abstract_mysql_adapter.rb:2
33:in `execute'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/activerecord-3.2.1/lib/active_record/connection_adapters/mysql2_adapter.rb:214:in `e
xecute'
        from (irb):7:in `block in irb_binding'
        from (irb):4:in `each'
        from (irb):4
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1/lib/rails/commands/console.rb:47:in `start'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1/lib/rails/commands/console.rb:8:in `start'
        from C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/railties-3.2.1/lib/rails/commands.rb:41:in `<top (required)>'
        from script/rails:6:in `require'
        from script/rails:6:in `<main>' 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:03:12.080

循环中的 SQL 查询和插入很慢。尝试使用`INSERT..SELECT`，该命令将插入您使用第二条语句选择的所有行。我不知道您使用的是什么数据库，但例如，如果您使用的是 MySQL，您可以查看[语句的文档](http://dev.mysql.com/doc/refman/5.1/en/insert-select.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:53:22.487

你可以试试这个：

```
time = Time.now.to_formatted_s(:db) 
```

# php - 正则表达式正在划分单个语句？

> ID：15702593
> 
> 赞同：3
> 
> 时间：2013-03-29T11:48:02.287
> 
> 标签：php, regex

我在使用正则表达式时遇到了困难，我在没有任何先前匹配的情况下获得了单独的“收入”。

```
$string = "FY2013 EPS, FQ 2012 revenue";
preg_match_all("/F[Y|Q]\s?\d{4}\sEPS|revenue/", $string, $matches);
print_r($matches); 
```

结果：

```
Array ( [0] => Array ( [0] => FY2013 EPS [1] => revenue ) ) 
```

我所期待的：

```
Array ( [0] => Array ( [0] => FY2013 EPS [1] => FQ 2012 revenue ) ) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T11:53:43.567

试试这个

```
 $string = "FY2013 EPS, FQ 2012 revenue";
preg_match_all("/F[Y|Q]\s?\d{4}\s(?:EPS|revenue)/", $string, $matches);
print_r($matches); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-29T11:52:05.157

它读作*OR 收入*- 你想使用：

```
"/F[Y|Q]\s?\d{4}\s(?:EPS|revenue)/" 
```

其中`?:`表示非捕获组

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-29T11:52:05.883

您需要对`EPS|revenue`特定的，而不是`revenue`其他所有内容进行替换。全部一起：

```
/F[Y|Q]\s?\d{4}\s(?:EPS|revenue)/ 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-29T11:52:37.560

试试这个

```
preg_match_all("/(F[Y|Q]\s?\d{4}\s(EPS|revenue))/", $string, $matches); 
```

生产

```
Array
(
    [0] => Array
        (
            [0] => FY2013 EPS
            [1] => FQ 2012 revenue
        )

    [1] => Array
        (
            [0] => FY2013 EPS
            [1] => FQ 2012 revenue
        )

    [2] => Array
        (
            [0] => EPS
            [1] => revenue
        )
) 
```

为了我

# algorithm - Shazam / soundhound 是如何工作的？

> ID：15702595
> 
> 赞同：4
> 
> 时间：2013-03-29T11:48:14.087
> 
> 标签：algorithm, audio, shazam, sound-recognition

我对 shazam 或 soundhound 的工作方式很感兴趣。

它如何记录声音并制作与他们的指纹数据库非常相似的指纹以找到匹配项？

我即将开始用 C/C++ 编写一些软件，但不确定要使用哪些库，看到有一些来自 Microsoft 的 Speech SDK。您是否有一些建议，从哪里开始“理解”分析语音和播放语音的过程？

我会感谢您分享的每一个提示或想法：]

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:56:43.980

您可以查看一些现有的软件：

**音频数据库**：C++

善变的回购：[http ://code.soundsoftware.ac.uk/projects/audiodb/](http://code.soundsoftware.ac.uk/projects/audiodb/)

**Sonic Visualiser**：SV 库是使用 Qt4 用 C++ 编写的

[https://code.soundsoftware.ac.uk/projects/sonic-visualiser](https://code.soundsoftware.ac.uk/projects/sonic-visualiser)

# javascript - 如何从jsp代码中动态添加的文本框中获取数据

> ID：15702596
> 
> 赞同：1
> 
> 时间：2013-03-29T11:48:17.843
> 
> 标签：javascript, jsp, dynamic, textbox, onclick

紧急..请任何人协助如何使用jsp代码动态访问通过javascript添加的元素中的数据。我正在使用javascript（通过在按钮的单击事件上调用以下函数）在.jsp页面上添加空记录：-

```
var cell1 = row.insertCell(0);
    var element1 = document.createElement("input");
    element1.type = "text";
    element1.value="";
    cell1.appendChild(element1);            //and so on for 5 columns too 
```

主要问题是我无法从我的 jsp 代码中访问这些动态添加的文本框值。（因为它们是由 javascript 动态创建的）

现在，我想使用jsp将这些动态添加的文本框（以表格的形式）从.jsp页面保存到数据库中......（根据用户输入可以生成几行）或者建议我创建代码它们是动态的，以便我可以从 jsp 页面上添加的动态文本框中获取数据。并且请..我不想使用 servlet 概念...只想使用 jsp ..

谢谢....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:52:30.517

为什么不为要添加的文本框提供唯一的 ID 和名称？

```
var cell1 = row.insertCell(0);
    var element1 = document.createElement("input");
    element1.type = "text";
    element1.value="";
    element1.id="empName[0]";
    element1.name="empName[0]";

cell1.appendChild(element1); 
```

像

```
<input type="text" id="empName[0]" name="empName[0]" value=""/>
<input type="text" id="empName[1]" name="empName[1]" value=""/> 
```

然后在服务器端你可以，

```
request.getParameter("empName[0]");
request.getParameter("empName[1]"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:50:48.957

试试这个：

```
 var textboxes = [];
 var inputs = cell1.getElementsByTagName('input');
 for(var i = 0; i < inputs.length; i++){
     if(inputs[i].type == "text")
          textboxes.push(inputs[i]);
          // or get name value pairs if not disabled: 
          // if(!inputs[i].disabled)
          //     myNameValues.push({ name: inputs[i].name, value: inputs[i].value });
 } 
```

# ruby - 将方法添加到模块内的标准类

> ID：15702597
> 
> 赞同：1
> 
> 时间：2013-03-29T11:48:18.707
> 
> 标签：ruby, module

例如，我想向 class 添加新方法`String`。但我不想让这种改变全球化（保持班级清洁很好，是吗？）。

所以，而不是这段代码

```
class String
  def is_palindrome?
    self == self.reverse
  end
end

module MyModule
  class MyClass
    def filter_palindrome(str_arr)
      str_arr.select { |s| s.is_palindrome? }
    end
  end
end 
```

我想要这样的东西：

```
module MyModule
  class String
    def is_palindrome?
      self == self.reverse
    end
  end

  class MyClass
    def self.filter_palindrome(str_arr)
      str_arr.select { |s| s.is_palindrome? }
    end
  end
end 
```

但是，当然，它不起作用（`undefined method 'is_palindrome?' for :String`）。那么，我想要的有什么意义吗？如果有，实现它的最佳方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:59:56.800

如果您使用的是 Ruby 2.0，您可以尝试[改进](https://bugs.ruby-lang.org/projects/ruby-trunk/wiki/RefinementsSpec)。

```
module MyModule
  module StringAlter
    refine String do
      def is_palindrome?
        self == self.reverse
      end
    end
  end
end

using MyModule::StringAlter
module MyModule
  class MyClass
    def self.filter_palindrome(str_arr)
      str_arr.select { |s| s.is_palindrome? }
    end
  end
end 
```

如果在 Ruby 2.0 之前，您无法直接实现这一点。对 String 所做的更改将是全局的。但是，`s.is_palindrome?`为什么不编写一个辅助方法并调用它，而不是`is_palindrome?(s)`. 然后您不必重新打开`String`，您可以限制`is_palindrome?`为仅在某些给定范围内可用。

这是 Python 所做的 ( `self`) 以及 C# 扩展方法。

# groovy - GroovyFX：使用 jfxtras 中的 calendarTextField

> ID：15702598
> 
> 赞同：1
> 
> 时间：2013-03-29T11:48:34.373
> 
> 标签：groovy, javafx, jfxtras, groovyfx

我想以与使用 textFields 相同的方式使用 calendarTextField fomr jfxtras。即我希望能够在gridPane 中设置行、列、columnSpan。

我注册了calenderTextField

```
 registerBeanFactory "calendarTextField", CalendarTextField 
```

但我不能使用 row 属性

```
groovy.lang.MissingPropertyException: No such property: row for class: jfxtras.labs.scene.control.CalendarTextField 
```

这有点清楚，因为 calendarField 没有 row 属性，但我查看了 javafx.Textfield：这也没有 row 属性。

这是如何工作的？为了能够使用 calendarTextField 的 row 属性，我必须做什么。

row 来自`GridConstraints`...但它们与`TextInputControl`GroovyFX 中的文本字段（或）有何关系？

谢谢你的帮助！

# c - Linux 上 UDP 和 TCP 的内核绕过 - 它涉及什么？

> ID：15702601
> 
> 赞同：6
> 
> 时间：2013-03-29T11:48:44.823
> 
> 标签：c, linux, performance, kernel, openonload

根据[http://www.solacesystems.com/blog/kernel-bypass-revving-up-linux-networking](http://www.solacesystems.com/blog/kernel-bypass-revving-up-linux-networking)：

> [...] 一个名为 OpenOnload 的网络驱动程序，它使用**“内核绕过”技术**在用户空间中一起运行应用程序和网络驱动程序，并且绕过内核。这允许连接的应用程序端以更低和更一致的延迟每秒处理更多消息。
> 
> [...]
> 
> 如果你是一名开发人员或架构师，多年来一直在与上下文切换作斗争，内核绕过可能会感觉像是在作弊，但幸运的是它完全在规则之内。

进行这种内核绕过需要哪些功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:17:14.083

[TCP 卸载引擎](http://en.wikipedia.org/wiki/TCP_offload_engine)将“正常工作”，无需特殊的应用程序编程。它并没有绕过整个内核，只是将一些 TCP/IP 堆栈从内核移动到网卡，因此驱动程序级别略高。内核 API 是相同的。

大多数现代千兆接口都支持 TCP 卸载引擎。

或者，如果您的意思是“在 SolarFlare 网络适配器的嵌入式处理器/FPGA '应用程序加载引擎'上运行代码”，那么......这是特定于卡的。您基本上是在为嵌入式系统编写代码，因此您需要说明您使用的是哪种卡。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:09:06.747

好的，所以在不知道内核如何处理网络堆栈的情况下，这个问题不能直接回答。

一般来说，网络堆栈由很多层组成，最低的一层是实际的硬件，通常这个硬件由驱动程序支持（每个网络接口一个），网卡通常提供非常简单的接口，想想接收并发送原始数据。

在这个物理连接之上，具有接收和发送数据能力的是许多协议，它们也是分层的，靠近底部的是 ip 协议，它基本上允许您指定信息的接收者，而在顶部您会发现支持稳定连接的 TCP。

所以为了回答你的问题，你首先要弄清楚你需要替换网络堆栈的哪一部分，以及你需要做什么。根据我对您问题的理解，您似乎希望保留原始网络堆栈，然后有时使用您自己的，在这种情况下，您实际上应该只实现策略模式，并可以说明哪些数据包应该由网络堆栈的顶层处理。

根据 linux 中网络堆栈的实现方式，您可能无法实现这一点，而无需更改内核。在微内核架构中，网络堆栈的每个部分都在其自己的服务中实现，这将是微不足道的，因为您只需将网络堆栈的较低部分通过管道传输到您的策略模式，并将此管道输入到所需的网络顶层。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T12:21:02.710

您是否想发送和接收原始 IP 数据包？

基本上，您需要在 ip-packet 中填写标头和数据。这里有一些关于如何发送原始以太网数据包的示例：：http: [//austinmarton.wordpress.com/2011/09/14/sending-raw-ethernet-packets-from-a-specific-interface-in-c-在Linux上/](http://austinmarton.wordpress.com/2011/09/14/sending-raw-ethernet-packets-from-a-specific-interface-in-c-on-linux/)

要自己处理 TCP/IP，我认为您可能需要在自定义内核中禁用 TCP 驱动程序，然后编写自己的读取原始 ip 的用户空间服务器。

虽然它可能没有那么有效......

# jboss - jboss 重启后忽略 requires_new

> ID：15702602
> 
> 赞同：2
> 
> 时间：2013-03-29T11:48:45.547
> 
> 标签：jboss, transactions, annotations, jta, container-managed

我正在使用 jboss 和 cmt 并且在我从另一个 bean 循环插入一些记录的 ejb 方法上使用 requires_new 时看到了奇怪的行为。我看到在重新启动jboss后间歇性地在方法完成后方法中的操作没有提交到db。所以，我尝试使用TransactionSynchronizationRegistry，发现当数据没有提交时，我实际上没有得到每次输入方法时都有新的交易。有谁听说过 jboss 这样做的吗？我正在使用 ejb、jboss、jpa、Hibernate、cmt。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T10:03:32.643

所以，我终于解决了这个问题。我用了这篇很棒的博文

[http://piotrnowicki.com/2011/11/am-i-in-the-same-transaction-am-i-using-the-same-persistencecontext/](http://piotrnowicki.com/2011/11/am-i-in-the-same-transaction-am-i-using-the-same-persistencecontext/)

以确保在输入带注释的 REQUIRES_NEW 方法后我实际上处于同一事务中。所以后来我了解到 JBoss 间歇性地忽略了注释并默认为 REQUIRED 。这是因为多个类实现了相同的接口。所以我简化了它，现在我有一个接口，带注释的@Local 和一个实现类，其中 REQUIRES_NEW 带注释的方法是。我知道在这种情况下是我们的代码出错了，所以这并不是 Jboss 处理事务的方式中的一个错误。但是很奇怪，日志中没有警告那么多存在竞争条件。我可以重新启动 Jboss 并获得与重新启动之前不同的行为。我觉得这很奇怪。我没有

编辑：这不是关于多个实现类，只是关于在接口中声明@Local注释的所有方法，否则JBoss可能会忽略这些属性

# ios - IOS，ARC，属性：（readwrite，nonatomic）vs（radwrite，retain，nonatomic）

> ID：15702604
> 
> 赞同：0
> 
> 时间：2013-03-29T11:48:49.003
> 
> 标签：ios, memory-management, cocos2d-iphone, automatic-ref-counting

我已经阅读了一些关于 ARC 的教程，但对属性声明仍然有些困惑。我使用以下模式编写了大部分代码：

```
@property (readwrite, nonatomic) PlayerData* playerData;
@property (readwrite, nonatomic) MusicLayer* musicLayer;
@property (readwrite, nonatomic) bool isPowerUpAvailable; 
```

现在我终于开始处理内存泄漏了，XCode 建议我在一些代码中应该在属性声明中添加“retain”关键字。

使用 ARC，我认为我不应该再“打扰”保留计数了。是否有一些我没有得到或缺少的概念？任何教程参考或解释将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:53:32.970

ARC 将根据属性声明保留对象，您应该将`strong`其用于需要保留`weak`的属性和不需要保留的属性。

`weak`当对象被释放时，属性也会被取消。

编译器将始终假定属性是`readwrite`，因此不需要以这种方式声明。

```
@property (strong, nonatomic) PlayerData* playerData;
@property (strong, nonatomic) MusicLayer* musicLayer;
// Need use assign since strong is for objects only.
@property (assign, nonatomic) bool isPowerUpAvailable; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-30T11:35:27.987

如果您希望继续使用您的代码，您可以仅在`.m`您想要的特定文件上排除 ARC：

转到**Targets > Build Phases > Compile Sources**并选择您的`.m`文件，双击选择的右列并添加`-fno-objc-arc`，以便您仅排除`ARC`选定的文件。

或者，如果您想使用 ARC 将所有应用程序转换为新代码，请在备份您的项目后，转到：

**编辑 > 重构 > 转换为 Objective-C ARC**并在此之后执行相同操作，但单击**转换为现代 Objective-C Sintax**

这里是屏幕：

![在此处输入图像描述](../Images/a07372a0b729a75f109328ab9efb0f25.png) **注意不要总是在尝试复制您的项目之前工作！**

希望这对你有帮助

# asp.net-mvc-3 - 如何在控制器返回的视图中循环列表

> ID：15702606
> 
> 赞同：0
> 
> 时间：2013-03-29T11:48:55.810
> 
> 标签：asp.net-mvc-3, razor

我的控制器返回以下列表：

```
public ActionResult Index()
{
    CRMDataContext mycontext=new CRMDataContext();

    var myquery = (from c in mycontext.Websites
                  select c).ToList();

    return View(myquery);
} 
```

我想知道如何循环通过 myquery 在视图中显示其属性？

任何改进上述代码的建议都将增加优势。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:54:52.310

```
@foreach(var item in Model){
  ...
} 
```

改进建议：

*   将您的查询移动到另一个方法/类中以进行核心重用
*   通过对域和视图使用不同的模型来分离职责

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:57:51.103

您可以使用 foreach 循环：

```
@{
  foreach (var element in Model)
  {
      //Write you html code here.
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T11:56:43.813

首先，最好将实体映射到模型中并在视图中使用该模型。最重要的是，如果您不会使用实体中的所有字段。

假设您的实体具有以下结构：

```
public class Website {
  public string Title {get;set;}
  public string Url {get;set;}
  public string Description {get;set;}
} 
```

在您看来，您可以执行以下操作：

```
@model IEnumerable<Website> // you may need to fully qualify it or add the namespace in your web.config
@foreach(var o in Model){
  <div>
     <h1><a href="@o.Url">@o.Title</a></h1>
     <p>@o.Description</p>
  </div>
} 
```

# iphone - 从 URL 加载图像并将其显示在 iPhone 应用程序中的更快方法

> ID：15702608
> 
> 赞同：3
> 
> 时间：2013-03-29T11:49:03.647
> 
> 标签：iphone, ios, imageview

我正在使用以下代码在 ImageView 中显示图像：

```
 imgbackBG.image = [UIImage imageWithData:
                   [NSData dataWithContentsOfURL:
                    [NSURL URLWithString:[NSString stringWithFormat:@"http://%@",    [test.arrImagessplash objectAtIndex:[test.arrImages count]-4]]]]];

    4cing.com/mobile_app/uploads/pageicon/splash.png 
```

问题是代码执行速度非常慢。有没有办法更快地加载图像并在 ImageView 中显示它？如果是这样，我该怎么做？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-03-29T11:52:38.053

您在主线程上使用加载图像的代码。这将阻止用户界面。使用 GCD 异步加载图像。

这是示例代码：

```
dispatch_queue_t q = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0ul);
        dispatch_async(q, ^{
            /* Fetch the image from the server... */
            NSData *data = [NSData dataWithContentsOfURL:url];
            UIImage *img = [[UIImage alloc] initWithData:data];
            dispatch_async(dispatch_get_main_queue(), ^{
                /* This is the main thread again, where we set the tableView's image to
                 be what we just fetched. */
                cell.imgview.image = img;
            });
        }); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T12:19:01.880

从这里下载文件.....

[https://github.com/nicklockwood/AsyncImageView](https://github.com/nicklockwood/AsyncImageView)

并按以下方式使用：

```
AsyncImageView *asyncImageView = [[AsyncImageView alloc]initWithFrame:CGRectMake(30,32,100, 100)];   
[asyncImageView loadImageFromURL:[NSURL URLWithString:your url]];
[YourImageView addSubview:asyncImageView];
[asyncImageView release]; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-05-26T07:44:08.183

```
Best way to used `NSOperationQueue` to load Image in background.
Here is the sample code:

    NSOperationQueue *myQueue = [[NSOperationQueue alloc] init];
    [myQueue addOperationWithBlock:^{
        UIImage *img =  [UIImage imageWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:@""]]]?:[UIImage imageNamed:@"defaultImage.png"];
        [[NSOperationQueue mainQueue] addOperationWithBlock:^{
            YourImageView.image = img;

        }];
    }]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-25T08:19:59.787

使用 SdwebImage 框架进行图像缓存

[https://github.com/rs/SDWebImage](https://github.com/rs/SDWebImage)

# java - android进度对话框和线程

> ID：15702610
> 
> 赞同：0
> 
> 时间：2013-03-29T11:49:04.723
> 
> 标签：java, android

我试图在向数据库表中添加一行时显示一个进度对话框，但问题是进度对话框只显示 1 秒，之后应用程序崩溃，有人可以帮我吗？

```
public void onClick(View arg0) {
        // TODO Auto-generated method stub

        ConnectivityManager cm =(ConnectivityManager) getSystemService(Context.CONNECTIVITY_SERVICE);
        NetworkInfo netInfo = cm.getActiveNetworkInfo();
        if (netInfo != null && netInfo.isConnectedOrConnecting()) 
        {
             final EditText wholepost=(EditText)findViewById(R.id.wholepost);
                final String post_type=spinner.getSelectedItem().toString();
                final String post_type2=post_type.replace(" ", "%20");
                final String post1=wholepost.getText().toString();
                String post2=post1.replace(" ", "%20");
                final String post3=post2.replace("\n","%0D");
                DateFormat df = new SimpleDateFormat("yyyy-MM-dd");
                final String now = df.format(new Date());

                if(post1.equals(null))
                {
                    Toast.makeText(getBaseContext(), "Please write a post before clicking on the button",Toast.LENGTH_LONG).show();
                }
                else
                {
                    if(post1.length()<15)
                    {
                        Toast.makeText(getBaseContext(), "Post is too small",Toast.LENGTH_LONG).show();
                    }

                    else
                    {
                        if(post1.length()>500)
                        {Toast.makeText(getBaseContext(), "Post should be smaller",Toast.LENGTH_LONG).show();}
                        else
                        {
                            pd.show();

                            Thread th=new Thread(new Runnable() {
                                public void run() {                             

        StrictMode.ThreadPolicy policy = new StrictMode.ThreadPolicy.Builder().permitAll().build();
        StrictMode.setThreadPolicy(policy);
        httpclient = new DefaultHttpClient();
        httppost = new HttpPost("http://192.168.1.38/test/Addpost.php?username="+username+"&fname="+firstname+"&lname="+lastname+"&dop="+now+"&content="+post3+"&type="+post_type2+"");

                        try
                        {

                            nameValuePairs = new ArrayList<NameValuePair>();
                            nameValuePairs.add(new BasicNameValuePair("FirstN",firstname));
                            nameValuePairs.add(new BasicNameValuePair("LastN",lastname));
                            nameValuePairs.add(new BasicNameValuePair("Content",post1));
                            nameValuePairs.add(new BasicNameValuePair("type",post_type));
                            nameValuePairs.add(new BasicNameValuePair("Dateofp",now));
                            nameValuePairs.add(new BasicNameValuePair("username",username));
                            httppost.setEntity(new UrlEncodedFormEntity(nameValuePairs));
                            response = httpclient.execute(httppost);

                            if(response.getStatusLine().getStatusCode()==200)
                            {
                            entity=response.getEntity();
                            if(entity !=null)
                            {
                                Toast.makeText(getBaseContext(),"POST SUCCESFULLY ADDED",Toast.LENGTH_LONG).show(); 
                            }

                            }
                            else
                            {
                                Toast.makeText(getBaseContext(),"ERROR RERTY OR CHECK YOUR CONNECTION",Toast.LENGTH_LONG).show();
                            }

                            wholepost.setText("");

                        }
                        catch(Exception ex)
                        {Toast.makeText(getBaseContext(),"CONNECTION ERROR",Toast.LENGTH_LONG).show();}

                        pd.dismiss();
                                }   
                            });
                            th.start();

                    }}
                }

        }
        else
        {
            Toast.makeText(getBaseContext(),"Please make sure you're connected to the internet",Toast.LENGTH_LONG).show();

        }

    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:17:36.740

使用[Asyntask](http://developer.android.com/reference/java/lang/Thread.html)或以其他方式休眠你的[线程](http://developer.android.com/reference/java/lang/Thread.html)

# shell - 通过 Perl 脚本获取进程 ID

> ID：15702614
> 
> 赞同：0
> 
> 时间：2013-03-29T11:49:18.153
> 
> 标签：shell, grep, ps

在我的脚本中，我正在执行`cat`，然后尝试`grep`获取进程 ID。

我用这个：

```
ps | grep -e \'cat$\' | cut -d\' \' -f2 | head -n 1 
```

但它没有返回任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:30:37.553

当您在 shell 中启动后台进程时，`program &`您可以通过`$!`.

例如：

```
bash-4.2.37$ cat &
[1] 9664
bash-4.2.37$ CAT_PID=$!
...time passes...
bash-4.2.37$ echo $CAT_PID
9664 
```

# xcode4.2 - 如何在 Xcode 4.2 中对我的应用程序进行沙箱处理？

> ID：15702615
> 
> 赞同：0
> 
> 时间：2013-03-29T11:49:27.887
> 
> 标签：xcode4.2, sandbox

我正在使用 Xcode 4.2。我创建了一个 iPhone 应用程序，用户可以在其中通过选择输入文件来播放视频。在模拟器上运行时，我刚刚指定了输入文件的路径。

在设备上运行应用程序时，我读到我需要对我的应用程序进行沙箱处理，以便在使用我的应用程序时添加文件并选择它们。

现在我无法弄清楚我应该如何沙箱化我的应用程序。我在任何地方都找不到“启用沙盒”选项。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:52:07.513

iOS总是沙盒，这就是为什么没有复选框

*   您只能访问沙箱中的文件（默认情况下仅包含您的应用程序）
*   您必须直接使用 UIImagePicker 或 SLAsset 库选择媒体

* * *

### 如果您想“在 iTunes 中查看您的沙盒”/iTunes 文件共享

对于 iTunes 共享，请遵循例如[http://www.raywenderlich.com/1948/how-integrate-itunes-file-sharing-with-your-ios-app](http://www.raywenderlich.com/1948/how-integrate-itunes-file-sharing-with-your-ios-app)（好教程）

# drupal - 在 Drupal 中为视图创建自定义 .tpl 文件

> ID：15702618
> 
> 赞同：0
> 
> 时间：2013-03-29T11:49:41.153
> 
> 标签：drupal

我正在 Drupal 中创建一个视图，其中包含书籍列表。每本书都是一个包含书名、作者和图书图片等字段的内容。我已经创建了视图并将显示设置为 GRID 模式。

当我单击 Grid 中的每本书时，它将带我到原始内容，其中将显示与 Book 相关的所有字段。显示将处于默认模式，我需要更改此显示的样式。

我尝试为此输出创建一个 .tpl（模板）文件，但无法配置如何引入此视图的字段（标题、作者和书籍图像）。我想为此显示拥有自己的 css，并想知道如何将自定义 .tpl 文件用于 Drupal 中的视图。

# actionscript-3 - 列表 itemRenderer 拖过检测

> ID：15702620
> 
> 赞同：1
> 
> 时间：2013-03-29T11:49:51.083
> 
> 标签：actionscript-3, apache-flex, flex4

![在此处输入图像描述](../Images/09b9869ada8fcf58a6c9eb895c4625e1.png)

如图所示，假设 item1 的 List1 拖到 item iv 的 List2 上，我希望 item iv 检测到拖过状态并突出显示本身，那么如何实现呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:08:13.433

为每个列表元素附加一个`MouseEvent.MOUSE_OVER`侦听器，以检查您是否正在拖动任何内容，如果是，则`event.target`突出显示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T01:32:17.010

这是我的解决方案和代码：对于**List2**：

```
<s:List
itemRenderer="components.MyRenderer"
dragEnter="myDragEnterHandler(event)"
dragOver="myDragOverHandler(event)"
dragExit="myDragExitHandler(event)">
<fx:Script>
    <![CDATA[
        private function myDragEnterHandler(event:DragEvent):void {
            //we shoudld make List2 be drop target
            DragManager.acceptDragDrop(e.currentTarget as IUIComponent);              
        }

        private function myDragOverHandler(event:DragEvent):void {
            var dropIndex:int = calDropIndex(event);
            var element:MyRenderer= calDropItem(dropIndex);
            //undo highlight if there is last over item
            if(lastOverItem) {
               lastOverItem.undoHighlight();            
            }
            //remember the last highlight one and highlight it
            lastOverItem = element;     
            element.highlight(); 
        }

        private function myDragExitHandler(event:DragEvent):void {
             var dropIndex:int = calDropIndex(event);
             var element:MyRenderer= calDropItem(dropIndex);
             element.undoHighlight(); 
        }

        private function calDropIndex(event:DragEvent):int {
             var dropLocation:DropLocation = 
                 event.currentTarget.layout.calculateDropLocation(event);
             var dropIndex:int = dropLocation.dropIndex;
             return dropIndex;
       }

       private function calDropItem(dropIndex:int):MyRenderer{
           var element:IVisualElement;
           if (layout.useVirtualLayout) {
            element = layout.target.getVirtualElementAt(dropIndex);
           } else {
            element = layout.target.getElementAt(dropIndex);
           }
           return element as MyRenderer;
      }
    ]]>
</fx:Script>
</S:List> 
```

# c# - WPF 如何删除网格？

> ID：15702621
> 
> 赞同：1
> 
> 时间：2013-03-29T11:49:51.457
> 
> 标签：c#, wpf, grid, removeall

在我创建并添加了一个新网格的 WPF 应用程序中，我已经知道如何从中删除所有子项：

```
 private void ClrScr()
    {
        for (int i = GridName.Children.Count - 1; i >= 0; i--)
        {
            GridName.Children.RemoveAt(i);
        }
    } 
```

但我不知道如何杀死网格本身，我的尝试：

```
 GridName.Exit/Disable/Something; /// <--- no Idea what am I doing...
        this.Controls["GridName"].DIEEEE; 
```

可悲的是我失败了...我对 WPF 很陌生，我主要使用 WinForms...帮助？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:52:18.993

您可以使用它的父级删除网格。

**例如：**如果您有三个名为 的网格`grid1`，`grid2`并且`grid3`在名为 的停靠面板控件`main`中，您可以像这样删除这些网格：

```
main.Children.Remove(this.grid1);
main.Children.Remove(this.grid2);
main.Children.Remove(this.grid3); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:15:22.273

WPF 中的所有控件都有父级，但窗体除外。如果`Grid`您要删除的是第一个，那么您可以这样做：

```
var parent = myGrid.Parent;
Window window = parent as Window;
if(window!=null)
    window.Content = null; 
```

有时 Grid 可以是没有`Content`属性的控件的子控件。如果它没有 Content 那么它必须有`Children`or `Items`。

# iphone - bluetooth4.0 ble 接收短信通知

> ID：15702622
> 
> 赞同：0
> 
> 时间：2013-03-29T11:49:51.740
> 
> 标签：iphone, ios, bluetooth, sms, core-bluetooth

我发现iPhone不支持短信通知，但是我发现cookoo watch和meta watch已经实现了。它们是基于蓝牙4.0(BLE)的，我正在写一个像他们这样的应用程序，我已经实现了来电提醒。你能帮帮我吗？</p>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T20:46:02.067

我认为cookoo使用的是经典的蓝牙堆栈+ ble4.0 ...而对于短信/呼叫通知，他们不使用ble4，而是使用基本的ble2或3堆栈...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:56:37.033

您无法让应用程序将设备连接到其蓝牙堆栈并接收 SMS 警报。

# spring - Spring DirtiesContext

> ID：15702627
> 
> 赞同：2
> 
> 时间：2013-03-29T11:50:09.860
> 
> 标签：spring, junit

我现在正在使用 Spring 和 JUnit，并且我使用 @DirtiesContext 让我的测试用例彼此独立，但是每次运行我的测试用例时都会遇到 OutOfMemoryError。

有什么我可以配置 @DritiesContext 的内存使用的吗？

谢谢！

# httpwebrequest - 无法使用 c# 编程代码成功模拟表单登录

> ID：15702631
> 
> 赞同：1
> 
> 时间：2013-03-29T11:50:20.663
> 
> 标签：httpwebrequest, httpwebresponse, cookiecontainer

目前我正在尝试使用 c# 代码（HttpWebRequest/HttpWebResponse）模拟登录，但是我最终得到了 login.aspx 网页的 html 文本，而不是成功登录后的 html 文本。返回的变量“html”与 login.aspx 网页本身完全相同，似乎根本没有发布数据。请帮忙。谢谢你。戴夫。这是我使用的代码

```
var LOGIN_URL = "http://altech.com.au/login.aspx";

HttpWebRequest webRequest = WebRequest.Create(LOGIN_URL) as HttpWebRequest;
StreamReader responseReader = new StreamReader(
webRequest.GetResponse().GetResponseStream());
string responseData = responseReader.ReadToEnd();
responseReader.Close();

string postData =String.Format(
 "ctl00$ContentPlaceHolderBodyMain$txtEmail {0}&ctl00$ContentPlaceHolderBodyMain$txtPassword={1}&btnLogin=Login","myemail", "mypassword");

//have a cookie container ready to receive the forms auth cookie
CookieContainer cookies = new CookieContainer();

// now post to the login form
webRequest = WebRequest.Create(LOGIN_URL) as HttpWebRequest;
webRequest.Method = "POST";
webRequest.ContentType = "application/x-www-form-urlencoded";
webRequest.CookieContainer = cookies;
webRequest.UserAgent = "Mozilla/5.0 (Windows NT 5.2; WOW64; rv:2.0.1) Gecko/20100101 Firefox/4.0.1";

// write the form values into the request message
StreamWriter requestWriter = new StreamWriter(webRequest.GetRequestStream());
requestWriter.Write(postData);
requestWriter.Close();

HttpWebResponse response2 = (HttpWebResponse)webRequest.GetResponse();
StreamReader sr2 = new StreamReader(response2.GetResponseStream(), Encoding.Default);
string html = sr2.ReadToEnd(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:12:07.583

您需要对数据进行 URL 编码，否则将不被接受。

```
Dictionary<string, string> FormData = new Dictionary<string, string>();

//Add all of your name/value pairs to the dictionary
FormData.Add(
    "ctl00$ScriptManager1",
    "ctl00$ContentPlaceHolderBodyMain..."); 
```

...然后正确格式化...

```
public string GetUrlEncodedPostData(
    Dictionary<string, string> FormData)
{
    StringBuilder builder = new StringBuilder();

    for (int i = 0; i < FormData.Count(); ++i)
    {
        //Better to use string.join, but this is a bit more clear ^_^
        builder.AppendFormat(
            "{0}={1}&",
            WebUtility.UrlEncode(InputNameValue.ElementAt(i).Key),
            WebUtility.UrlEncode(InputNameValue.ElementAt(i).Value));
    }

    //Remove trailing &
    builder.Remove(builder.Length - 1, 1);

    return builder.ToString();
} 
```

# sencha-touch-2 - 如何在 Sencha Architect 中动态设置 Ext.Img ->"src" 的值

> ID：15702635
> 
> 赞同：2
> 
> 时间：2013-03-29T11:50:46.683
> 
> 标签：sencha-touch-2, carousel, sencha-architect

我正在使用图像视图来显示图像。可以告诉我如何动态设置 url 值，以便我可以显示服务器的图像。下面是我正在尝试的代码。

```
Ext.define('MyApp.view.MyImage', {
    extend: 'Ext.Img',
    alias: 'widget.myimage',

    config: {
        height: 201,
        id: 'galimage',
        width: 201,
        src: 'http://localhost/galerie/albums/'+filepath+filename
    }

}); 
```

文件路径和文件名是我想用 src 设置的变量 > 这些来自控制器。

请帮助我找到解决方案。谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-01T04:24:36.643

试试这个，

```
Ext.define('MyApp.view.MyImage', {
extend: 'Ext.Img',
alias: 'widget.myimage',

config: {
    height: 201,
    id: 'galimage',
    width: 201,
    src: 'http://localhost/galerie/albums/'+filepath+filename
}
}); 
```

然后您可以像这样使用它来随时动态设置图像，

```
Ext.getCmp('galimage').setSrc("resources/Images/Img_Food_New.png"); // in setSrc you can give path of your image

                        OR

Ext.getCmp('galimage').setHtml('<img src="resources/Images/Img_Food_New.png" height="100%" width="100%"/>'); // in src you can give path of your image 
```

希望这可以帮助你。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-01T01:38:55.280

在图像组件上使用 setSrc()

[http://docs.sencha.com/touch/2-2/#!/api/Ext.Img-method-setSrc](http://docs.sencha.com/touch/2-2/#!/api/Ext.Img-method-setSrc)

# css - 将 DL 样式设置为表格。哦不，IE7浮动DD

> ID：15702638
> 
> 赞同：2
> 
> 时间：2013-03-29T11:50:56.620
> 
> 标签：css, internet-explorer-7

我有一个已定义的列表。适用于除 DD 列仍位于顶行的 IE7（不关心 IE6）以外的所有内容。谁能告诉我为什么以及如何解决？谢谢

```
<!DOCTYPE html>
<html>
    <head>
        <title>DL Lists</title>
        <style>
            dt,dd { float:left;}
            dt { clear:both;}
        </style>
    </head>
    <body>
        <dl>
            <dt>title for column 2</dt><dd>column 2 value</dd>
            <dt>title for column 2</dt><dd>&nbsp;</dd>
            <dt>title for column 2</dt><dd>column 2 value</dd>
            <dt>title for column 2</dt><dd>column 2 value</dd>
        </dl>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:29:37.127

```
<!DOCTYPE html>
<html>
    <head>
        <title>DL Lists</title>
        <style>
            dt { float:left; clear:left; width: 200px;}            
        </style>
    </head>
    <body>
        <dl>
            <dt>title for column 2</dt><dd>column 2 value</dd>
            <dt>title for column 2</dt><dd>&nbsp;</dd>
            <dt>longer title for column 2</dt><dd>column 2 value</dd>
            <dt>title for column 2</dt><dd>longer column 2 value</dd>
        </dl>
    </body>
</html> 
```

# c# - 在 Access 数据库中存储值

> ID：15702643
> 
> 赞同：0
> 
> 时间：2013-03-29T11:51:10.887
> 
> 标签：c#, asp.net, ms-access, insert

我基本上想将一些值存储到数据库中。
我不断收到`"Number of query values and destination fields are not the same."` 指向“ `dr = cmd.ExecuteReader();`

有人可以帮助我吗？:)
我对整个事情有点陌生，真的不知道发生了什么。
贝娄是正在使用的代码。

```
public partial class Registeration_experiment : System.Web.UI.Page
{
    static OleDbConnection con = new OleDbConnection(@"Provider=Microsoft.ACE.OLEDB.12.0;Data Source=D:\New folder\Project 1.0\WebSite1\New Microsoft Office Access 2007 Database.accdb");
    OleDbDataAdapter ada = new OleDbDataAdapter();
    OleDbCommand cmd = new OleDbCommand();
    OleDbDataReader dr;

    protected void Page_Load(object sender, EventArgs e)
    {

    }

    protected void Button1_Click(object sender, EventArgs e)
    {
        string str = "insert into Registeration_Test (Name1, address, emailaddress)" +
          "values (?, ?, ?)";
        con.Open();
        cmd = new OleDbCommand(str, con);
        cmd.Parameters.AddWithValue("@p1", TextBox1.Text);
        cmd.Parameters.AddWithValue("@p2", TextBox2.Text);
        cmd.Parameters.AddWithValue("@p4", TextBox4.Text);
        cmd.ExecuteNonQuery(); 
    }
} 
```

谢谢 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T11:55:22.877

您正在写入数据库，而不是从中读取。
使用 ExecuteReader 没有意义，你需要一个 ExecuteNonQuery

**编辑** 现在看到表的结构。它由5个字段组成。
在这种情况下，您有两个选择。在插入语句中提供要更新的字段名称或为每个字段添加参数

第一选择，您不提供字段的名称（为除 ID 之外的每个字段传递一个参数，因为我认为它是一个 AutoIncrement 字段，这意味着数据库自己管理该字段的值）

```
// No name provided for fields, need to pass a parameter for each field
string str = "insert into Registeration_Test values (?, ?, ?, ?)";
con.Open();
cmd = new OleDbCommand(str, con);
cmd.Parameters.AddWithValue("@p1", Textbox1.Text);
cmd.Parameters.AddWithValue("@p2", Textbox2.Text);
cmd.Parameters.AddWithValue("@p3", Textbox3.Text);
cmd.Parameters.AddWithValue("@p4", Textbox4.Text);
cmd.ExecuteNonQuery(); 
```

（注意，TextBox1...等是您在上面的示例中提供的名称，我不知道用户键入要插入数据库的数据的这些文本框的确切内容，也不知道是否它们确实存在于您的页面/表单中）

第二种选择，你在数据库中声明应该更新的字段

```
// Just three named fields updated
string str = "insert into Registeration_Test (Name1, address, emailaddress)" + 
             "values (?, ?, ?)";
con.Open();
cmd = new OleDbCommand(str, con);
cmd.Parameters.AddWithValue("@p1", Textbox1.Text);
cmd.Parameters.AddWithValue("@p2", Textbox2.Text);
cmd.Parameters.AddWithValue("@p4", Textbox4.Text);
cmd.ExecuteNonQuery(); 
```

另请注意，我已将您的 sql 命令更改为不使用字符串连接。
这是一种非常糟糕的做法，会导致许多问题。最糟糕的是Sql Injection，更不用说当文本包含单引号或其他有问题的字符时字符串解析的问题

参数占位符（在 OleDb 中）由`?`命令文本中的 表示。此占位符将被 OleDbCommand 的参数集合中添加的实际值替换（按占位符出现的确切顺序）。使用参数（参数化查询）允许框架检查传递的值并在这些值无效时采取适当的措施。

**编辑** 连接问题来自上一个使连接保持打开状态的命令。这是另一个不好的做法。每个连接都应该是：创建、打开、使用、关闭。要遵循的伪代码是这样的

```
// Create the connection
using(OleDbConnection con = GetOleDbConnection())
{
    con.Open();

    ... // use the connection with insert/delete/update/select commands

}
// Exiting from the using block close and destroy (dispose) the connection 
```

# jsf - 如何管理下拉菜单之间的依赖关系？

> ID：15702650
> 
> 赞同：2
> 
> 时间：2013-03-29T11:51:45.180
> 
> 标签：jsf, jsf-2

我正在使用 JSF2.0。我有三个下拉菜单：

1.  大师下拉。
2.  儿童DropDownA
3.  儿童DropDownB

需要执行的业务规则是：

1.  每当*masterDropDown*发生变化时，我需要填充*childDropDownA*和*childDropDownB*。
2.  *childDropDownA*和*childDropDownB*的内容是**相同的，只是**当用户从*childDropDownA*中选择某些内容时，*childDropDownB*应该有它的旧内容，除了用户在*childDropDownA*中选择的内容。当用户首先选择*childDropDownB*时，同样的规则适用。

在 JSF 中实现这一目标的最简洁方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:22:10.573

纯 JSF 2：

```
<h:form>
    <h:selectOneMenu id="ddlMaster" value="#{bean.ddlMasterSelected}">
        <f:listItems value="#{bean.ddlMasterData}" />
        <f:ajax listener="#{bean.fillChildren}" render="ddlChildA ddlChildB" />
    </h:selectOneMenu>
    <h:selectOneMenu id="ddlChildA" value="#{bean.ddlChildASelected}">
        <f:listItems value="#{bean.ddlChildAData}" />
        <f:ajax listener="#{bean.refillChildB}" render="ddlChildB" />
    </h:selectOneMenu>
    <h:selectOneMenu id="ddlChildB" value="#{bean.ddlChildBSelected}">
        <f:listItems value="#{bean.ddlChildBData}" />
        <f:ajax listener="#{bean.refillChildA}" render="ddlChildA" />
    </h:selectOneMenu>
</h:form> 
```

托管豆

```
@ManagedBean
@ViewScoped
public class Bean {
    private Map<String, String> ddlMasterData;
    private Map<String, String> ddlChildAData;
    private Map<String, String> ddlChildBData;
    private String ddlMasterSelected;
    private String ddlChildASelected;
    private String ddlChildBSelected;

    @PostConstruct
    public void init() {
        //fill initial values for the drop down lists...
        //this is a raw idea, you must refine it
        DDLService ddlService = new DDLService();
        ddlMasterData = ddlService.getDDLMasterData();
        //empty data for children ddls
        ddlChildAData = new LinkedHashMap<String, String>();
        ddlChildBData = new LinkedHashMap<String, String>();
    }

    public void refillChildB(AjaxBehaviorEvent event) {
        //filling the children ddls
        DDLService ddlService = new DDLService();
        ddlChildASelected = ddlService.getDDLChildData();
        //same method to fill child data on ddlChildBSelected  because is same data
        ddlChildBSelected = ddlService.getDDLChildData();
    }

    public void fillChildren(AjaxBehaviorEvent event) {
        //when the user selects something from childDropDownA
        //childDropDownB should have its old contents
        //I assume it must be cleared, you can change this behavior though
        ddlChildBData = new LinkedHashMap<String, String>();
    }

    public void refillChildA(AjaxBehaviorEvent event) {
        //The same rule applies when the user selects childDropDownB first
        //I assume it must be cleared, you can change this behavior though
        ddlChildAData = new LinkedHashMap<String, String>();
    }
} 
```

# java - 将一段代码转换为类

> ID：15702653
> 
> 赞同：2
> 
> 时间：2013-03-29T11:51:49.290
> 
> 标签：java, android, class

我在 java 中创建一个单独的类时遇到问题我有这部分代码

```
private class Read_from_db extends AsyncTask <String, Long, Void> {
    private final ProgressDialog dialog = new ProgressDialog(Read.this);
    // can use UI thread here
    protected void onPreExecute() {
    this.dialog.setMessage("Wait\nSome SLOW job is being done...");
    this.dialog.show();
    }
    @Override
    protected Void doInBackground(String... arg0) {
        // TODO Auto-generated method stub
        try {
            //txtMsg.append("\n");
            // obtain a list of from DB
                String TABLE_NAME = "classicpoems__poet_header";
                String COLUMN_ID = "_id";
             //   String _ID = "_id";
                String COLUMN_NAME = "poet_name";
                String COLUMN_CENTURY = "century_start";
                String [] columns ={COLUMN_ID,COLUMN_NAME,COLUMN_CENTURY};

            Cursor c = db.query(TABLE_NAME,columns,null, null, null, null, COLUMN_ID);
            SimpleCursorAdapter adapter = new SimpleCursorAdapter(Read.this, R.layout.list_item, c, 
                       new String[] {COLUMN_ID,COLUMN_NAME,COLUMN_CENTURY}, new int[] {R.id.list_item_text_id,R.id.list_item_text_main,R.id.list_item_text_sub}, 0);

            ListView list = (ListView) findViewById(R.id.list_poet_name);
            list.setAdapter(adapter);

            } catch (Exception e) {
                //Toast.makeText(Read.this, e.getMessage(), 1).show();
                Log.i(TAG,  e.getMessage());
            }
        db.close();
        return null;
    }
    // can use UI thread here
    protected void onPostExecute(final Void unused) {
    if (this.dialog.isShowing()) {
    this.dialog.dismiss();
    }
    // cleaning-up, all done
    this.dialog.setMessage("Done");

    }
} 
```

每次加载活动时都必须重复（但要进行一些更改，例如`TABLE_NAME`和`R.id.list_poet_name` `columns` ..） '不知道该怎么做..（我试过但总是出错，例如我不知道如何定义上下文`SimpleCursorAdapter` 或使 Toast 在这里工作你能帮我如何将此代码转换为单独的类吗

这是我的课程代码

```
 package co.tosca.persianpoem;

import android.app.Activity;
import android.app.Dialog;
import android.app.ProgressDialog;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.os.AsyncTask;
import android.os.Environment;
import android.util.Log;
import android.view.View;
import android.widget.ListView;
import android.widget.SimpleCursorAdapter;
import android.widget.Toast;

public class Get_data extends AsyncTask<String, Long, Void> {
//Context context;
public String TABLE_NAME;
public String COLUMN_ID;
public String COLUMN_NAME;
public String COLUMN_CENTURY;
public String[] columns;
public int target;
private String DATABASE_NAME;
private static final String  SDcardPath = Environment.getExternalStorageDirectory().getPath();
private String DbPath = SDcardPath + "/Tosca/" + DATABASE_NAME;
private static final String TAG ="DatabaseHelper";
private SQLiteDatabase db;
private ProgressDialog dialog;
private Activity callingActivity;
public int adapter_list;

//public Get_data(Context context){
  //  this.context=context;
  //  DATABASE_NAME="persian_poem.db";
//}

public Get_data(Activity activity) {
    callingActivity = activity;
}
public Get_data() {
    TABLE_NAME="classicpoems__poet_header";
    COLUMN_ID="_id";
    COLUMN_NAME = "poet_name";

}

@Override
protected void onPreExecute() {

    this.dialog.setMessage("Wait\nSome SLOW job is being done...");
    this.dialog.show();
}

@Override
protected Void doInBackground(String... arg0) {
    // TODO Auto-generated method stub
    try {
        // obtain a list of from DB
        //    String TABLE_NAME = "classicpoems__poet_header";
         //   String COLUMN_ID = "_id";
         //   String _ID = "_id";
         //   String COLUMN_NAME = "poet_name";
         //   String COLUMN_CENTURY = "century_start";
          //  String [] columns ={COLUMN_ID,COLUMN_NAME,COLUMN_CENTURY};

        Cursor c = db.query(TABLE_NAME,columns,null, null, null, null, COLUMN_ID);
        SimpleCursorAdapter adapter = new SimpleCursorAdapter(callingActivity, adapter_list, c, 
                   new String[] {COLUMN_ID,COLUMN_NAME,COLUMN_CENTURY}, new int[] {R.id.list_item_text_id,R.id.list_item_text_main,R.id.list_item_text_sub}, 0);

        ListView list = (ListView)callingActivity.findViewById(target);
        list.setAdapter(adapter);

        } catch (Exception e) {
            Toast.makeText(callingActivity, e.getMessage(), 1).show();
            Log.i(TAG,  e.getMessage());
        }
    db.close();

    return null;
}

protected void onPostExecute(final Void unused) {
    dialog.dismiss();

}
} 
```

当我想使用它时，我使用此代码

```
enter code here Get_data poet_name=new Get_data();
        poet_name.TABLE_NAME="classicpoems__poet_header";
        poet_name.COLUMN_ID = "_id";
        poet_name.COLUMN_NAME = "poet_name";
        poet_name.COLUMN_CENTURY = "century_start";
        poet_name.columns =new String[]{"_id","poet_name","century_start"};
        poet_name.adapter_list=R.layout.list_item;
        poet_name.target=R.id.list_poet_name;
        poet_name.execute(); 
```

但我得到错误..你能帮我找出我的错误吗？

我将初始代码更改为 `Get_data poet_name=new Get_data(this);`但我收到错误但这里是 logcat 的一部分

```
01-06 04:25:32.262: E/AndroidRuntime(3244): FATAL EXCEPTION: main
01-06 04:25:32.262: E/AndroidRuntime(3244): java.lang.RuntimeException: Unable to start activity ComponentInfo{co.tosca.persianpoem/co.tosca.persianpoem.Read}: java.lang.NullPointerException
01-06 04:25:32.262: E/AndroidRuntime(3244):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1967)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:1992)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at android.app.ActivityThread.access$600(ActivityThread.java:127)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1158)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at android.os.Looper.loop(Looper.java:137)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at android.app.ActivityThread.main(ActivityThread.java:4441)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at java.lang.reflect.Method.invokeNative(Native Method)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at java.lang.reflect.Method.invoke(Method.java:511)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:784)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:551)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at dalvik.system.NativeStart.main(Native Method)
01-06 04:25:32.262: E/AndroidRuntime(3244): Caused by: java.lang.NullPointerException
01-06 04:25:32.262: E/AndroidRuntime(3244):     at co.tosca.persianpoem.Get_data.onPreExecute(Get_data.java:54)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at android.os.AsyncTask.executeOnExecutor(AsyncTask.java:561)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at android.os.AsyncTask.execute(AsyncTask.java:511)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at co.tosca.persianpoem.Read.onCreate(Read.java:65)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at android.app.Activity.performCreate(Activity.java:4465)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1049)
01-06 04:25:32.262: E/AndroidRuntime(3244):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1931)
01-06 04:25:32.262: E/AndroidRuntime(3244):     ... 11 more 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:07:23.640

您应该在自己的文件中创建一个单独的类。将其公开，以便其他类可以看到它，并为其提供一些创建参数。

将调用 Activity 传递给类，然后您可以将该值用于需要当前 Activity 的调用，例如 toast。

```
public class Read_from_db extends AsyncTask <String, Long, Void> {
    private final ProgressDialog dialog = new ProgressDialog(Read.this);
    private Activity callingActivity;
    public Read_from_db(Activity activity) {
        callingActivity = activity;
    }

    // can use UI thread here
    protected void onPreExecute() {
    this.dialog.setMessage("Wait\nSome SLOW job is being done...");
    this.dialog.show();
    }
    @Override
    protected Void doInBackground(String... arg0) {
        // TODO Auto-generated method stub
        try {
            //txtMsg.append("\n");
            // obtain a list of from DB
                String TABLE_NAME = "classicpoems__poet_header";
                String COLUMN_ID = "_id";
             //   String _ID = "_id";
                String COLUMN_NAME = "poet_name";
                String COLUMN_CENTURY = "century_start";
                String [] columns ={COLUMN_ID,COLUMN_NAME,COLUMN_CENTURY};

            Cursor c = db.query(TABLE_NAME,columns,null, null, null, null, COLUMN_ID);
            SimpleCursorAdapter adapter = new SimpleCursorAdapter(Read.this, R.layout.list_item, c, 
                       new String[] {COLUMN_ID,COLUMN_NAME,COLUMN_CENTURY}, new int[] {R.id.list_item_text_id,R.id.list_item_text_main,R.id.list_item_text_sub}, 0);

            ListView list = (ListView) findViewById(R.id.list_poet_name);
            list.setAdapter(adapter);

            } catch (Exception e) {
                Toast.makeText(callingActivity, e.getMessage(), 1).show();
                Log.i(TAG,  e.getMessage());
            }
        db.close();
        return null;
    }
    // can use UI thread here
    protected void onPostExecute(final Void unused) {
    if (this.dialog.isShowing()) {
    this.dialog.dismiss();
    }
    // cleaning-up, all done
    this.dialog.setMessage("Done");

    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:04:49.757

（我希望我正确理解了您的问题。）这是我的建议：

使用具有 SimpleCursorAdapter 类型作为参数的构造函数从上面的代码创建一个单独的类。根据需要创建具有表和列值的`Read_from_db`对象，`SimpleCursorAdapter`并在 doInBackground 方法中使用相同的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T12:04:53.443

您可以在 AsyncTask 类中创建一个构造函数，您将在其中传递上下文：

```
Context ctx;
public Read_from_db(Context ctx) {
    this.ctx = ctx;
} 
```

Context ctx 是一个全局类变量，你可以用它来代替 Read.this

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T12:08:27.057

只需像这样创建自定义类的构造函数：

```
public class Read_from_db extends AsyncTask<String, Long, Void> {
Context context;
private ProgressDialog dialog;

public Read_from_db(Context context){
    this.context=context;

}

@Override
protected void onPreExecute() {
    dialog = ProgressDialog.show(context, "dialog title", "dialog message.....");
}

@Override
protected Void doInBackground(String... arg0) {
    // TODO Auto-generated method stub

    //do your work here

    return null;
}

protected void onPostExecute(final Void unused) {
    dialog.dismiss();

}
} 
```

# android - 图像覆盖另一个图像

> ID：15702671
> 
> 赞同：3
> 
> 时间：2013-03-29T11:52:44.437
> 
> 标签：android, android-layout, android-image

我有 2 张图片我想将一张图片放在另一张图片上我的 xml 如下

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imgThumb"
    android:layout_width="60dip"
    android:layout_height="80dip"
    android:layout_gravity="center_horizontal"
    android:layout_marginTop="20sp"
    android:src="@drawable/bg" />

<TextView
    android:id="@+id/imgText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="5dip"
    android:ellipsize="marquee"
    android:singleLine="true"
    android:text="test string"
    android:textColor="#000000"
    android:textSize="10dip"
    android:visibility="gone" />

<View
    android:layout_width="fill_parent"
    android:layout_height="30sp"
    android:background="@drawable/shelf" /> 
```

**布局看起来像这样**

![在此处输入图像描述](../Images/798df894530fdc40804210077b351fe4.png)

我想要这第一张图片超过第二张图片。所以看起来第一张图片站在第二张图片上

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:07:12.453

将 Layout Linear 更改为 Relative 或 FramLayout 并在视图中添加 Margin Top。在相对布局中，每个控件都会自动覆盖其上面的控件。试试下面的代码。

```
<ImageView
    android:id="@+id/imgThumb"
    android:layout_width="60dip"
    android:layout_height="80dip"
    android:layout_gravity="center_horizontal"
    android:layout_marginTop="20sp"
    android:src="@drawable/abc" />

<TextView
    android:id="@+id/imgText"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_margin="5dip"
    android:ellipsize="marquee"
    android:singleLine="true"
    android:text="test string"
    android:textColor="#000000"
    android:textSize="10dip"
    android:visibility="gone" />

<View
    android:layout_width="fill_parent"
    android:layout_height="30sp"
    android:layout_marginTop="20sp"
    android:background="@drawable/ic_launcher" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T12:11:05.627

将LinearLayout改为RelativeLayout，切换2张图片的位置。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

<View
    android:id="@+id/shelf"
    android:layout_below="@+id/imgThumb"
    android:layout_width="fill_parent"
    android:layout_height="30sp"
    android:background="@drawable/shelf" />

<ImageView
    android:id="@+id/imgThumb"
    android:alignParentTop="true"
    android:layout_width="60dip"
    android:layout_height="80dip"
    android:layout_gravity="center_horizontal"
    android:layout_marginTop="20sp"
    android:src="@drawable/bg" /> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T12:08:18.167

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="match_parent"
android:layout_height="match_parent"
tools:context=".MainActivity" >

    <ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:layout_marginLeft="138dp"
    android:layout_marginTop="142dp"
    android:src="@drawable/ic_launcher" />

    <ImageView
    android:id="@+id/imageView2"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignTop="@+id/imageView1"
    android:layout_centerHorizontal="true"
    android:layout_marginTop="16dp"
    android:src="@drawable/ic_launcher" />

    <ImageView
    android:id="@+id/imageView3"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignLeft="@+id/imageView2"
    android:layout_alignTop="@+id/imageView2"
    android:layout_marginTop="15dp"
    android:src="@drawable/ic_launcher" />

    </RelativeLayout> 
```

![在此处输入图像描述](../Images/01eb0d9d0eb104cd5f7e3ae7cdc8590e.png)

# android - 通过 REST Web 服务使用纬度和经度查找日出/日落时间

> ID：15702673
> 
> 赞同：0
> 
> 时间：2013-03-29T11:52:48.533
> 
> 标签：android, web-services

首先，我只在 Android/Java 中编码了几个星期，所以如果这是一个简单的问题或者我不明白你的答案，我深表歉意。

我正在尝试从手机中获取纬度和经度数据，然后在以下日出/日落网络服务中使用它： [http ://www.earthtools.org/webservices.htm](http://www.earthtools.org/webservices.htm)

我设法设置了一个按钮在文本视图中显示纬度和经度，并且我设置了另一个按钮以使用静态 url 显示 web 服务的结果。现在我只需要将两者结合起来。

如何获取纬度和经度数据并将其放入 webservive 的 url？( [http://www.earthtools.org/sun/LATITUDE/LONGITUDE/28/03/99/0](http://www.earthtools.org/sun/) ) **_**

这是我的代码当前的样子：

```
 package richgrundy.learnphotography;

    import android.app.Activity;
    import android.content.Context;
    import android.location.Location;
    import android.location.LocationListener;
    import android.location.LocationManager;
    import android.os.Bundle;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.TextView;
    import java.io.IOException;
    import java.io.InputStream;
    import org.apache.http.HttpEntity;
    import org.apache.http.HttpResponse;
    import org.apache.http.client.HttpClient;
    import org.apache.http.client.methods.HttpGet;
    import org.apache.http.impl.client.DefaultHttpClient;
    import org.apache.http.protocol.BasicHttpContext;
    import org.apache.http.protocol.HttpContext;
    import android.os.AsyncTask;
    import android.widget.EditText;

    public class SunriseSunset extends Activity implements OnClickListener {

public Button getLocation;
public TextView LongCoord;
public TextView LatCoord;
public double longitude;
public double latitude;
public LocationManager lm;

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.sunrisesunset);
    findViewById(R.id.my_button).setOnClickListener(this);
    lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);

    lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, 1000, 1,
            new MyLocationListener());

    getLocation = (Button) findViewById(R.id.GetLocation);
    LongCoord = (TextView) findViewById(R.id.LongCoord);
    LatCoord = (TextView) findViewById(R.id.LatCoord);

    getLocation.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View arg0) {

            showCurrentLocation();
        }

    });

}

protected void showCurrentLocation() {
    // TODO Auto-generated method stub
    Location location = lm
            .getLastKnownLocation(LocationManager.GPS_PROVIDER);
    latitude = location.getLatitude();
    longitude = location.getLongitude();

    LongCoord.setText(Double.toString(longitude));
    LatCoord.setText(Double.toString(latitude));
}

@Override
public void onClick(View arg0) {
    Button b = (Button) findViewById(R.id.my_button);
    b.setClickable(false);
    new LongRunningGetIO().execute();
}

private class LongRunningGetIO extends AsyncTask<Void, Void, String> {

    protected String getASCIIContentFromEntity(HttpEntity entity)
            throws IllegalStateException, IOException {
        InputStream in = entity.getContent();
        StringBuffer out = new StringBuffer();
        int n = 1;
        while (n > 0) {
            byte[] b = new byte[4096];
            n = in.read(b);
            if (n > 0)
                out.append(new String(b, 0, n));
        }
        return out.toString();
    }

    @Override
    protected String doInBackground(Void... params) {
        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        HttpGet httpGet = new HttpGet(
                "http://www.earthtools.org/sun/52.77431872/-1.20639/28/03/99/0");
        String text = null;
        try {
            HttpResponse response = httpClient.execute(httpGet,
                    localContext);
            HttpEntity entity = response.getEntity();
            text = getASCIIContentFromEntity(entity);
        } catch (Exception e) {
            return e.getLocalizedMessage();
        }
        return text;
    }

    protected void onPostExecute(String results) {
        if (results != null) {
            EditText et = (EditText) findViewById(R.id.my_edit);
            et.setText(results);
        }
        Button b = (Button) findViewById(R.id.my_button);
        b.setClickable(true);
    }
}

class MyLocationListener implements LocationListener {
    @Override
    public void onLocationChanged(Location location) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub
    }
}
} 
```

我尝试使用以下代码，但无法使其工作：

```
 HttpClient httpClient = new DefaultHttpClient(httpParameters);
    HttpContext localContext = new BasicHttpContext();
    String url = "http://www.earthtools.org/sun/" + String.valueOf(location.getLatitude()) + "," + String.valueOf(location.getLongitude()) + "/28/03/99/0";
    HttpGet httpGet = new HttpGet(url); 
```

任何帮助将不胜感激，因为我已经坚持了几天了。

谢谢 =)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:09:33.420

这将为您提供月份和日期。

```
Calendar c = Calendar.getInstance();
System.out.println("Current time => " + c.getTime());

SimpleDateFormat df = new SimpleDateFormat("dd/MM");
String formattedDate = df.format(c.getTime()); 
```

现在你可以这样做：

```
String finalURL = "http://www.earthtools.org/sun/"+LatCoord.getText().toString().trim()+"/"+LongCoord.getText().toString().trim()+"/"+formattedDate+"/99/0"; 
```

现在将这个字符串传递给`HttpGet`这样的：

```
HttpGet httpGet = new HttpGet(finalURL); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:59:36.907

也许您应该将 url 字符串中的“，”更改为“/”。像这样：

```
String url = "http://www.earthtools.org/sun/" + String.valueOf(location.getLatitude()) + "/" + String.valueOf(location.getLongitude()) + "/28/03/99/0"; 
```

因为对 web 服务的调用是 LATITUDE/LONGITUDE/ 而不是 LATITUDE,LONGITUDE/

# java - 确保对象始终是列表的成员？

> ID：15702678
> 
> 赞同：0
> 
> 时间：2013-03-29T11:52:59.283
> 
> 标签：java, list, design-patterns

想象一下：

每个单词都是一个字符列表。然而，字符本身不能有，它总是必须是单词的一部分。

所以 Word 类可能如下所示：

```
class Word extends List<MyCharacter> 
```

现在，如何强制实例化`MyCharacter`不属于 a 的 a 是不可能的`Word`？也许制作`MyCharacter`一个私有内部类`Word`并添加一个类似的`addCharacter(String character)`方法`Word`？但是，如果是私有内部类，是否可以让`Word`扩展 List 类？`MyCharacter``Word`

感谢您对此的任何提示！

更新：

我现在结束了

```
import java.util.ArrayList;

public final class Word extends ArrayList<Word.MyCharacter> {

    protected final class MyCharacter
    {
        private String character;

        public String getCharacter() {
            return character;
        }

        public MyCharacter(String character)
        {
            this.character=character;
        }
    }

    public void addCharacter(String character) {
        add(new MyCharacter(character));
    }   
} 
```

以下是它的使用方法：

```
public static void main(String[] args) {

    Word word = new Word();

    // word.add(new MyCharacter("a")); // as intended: not possible, because MyCharacter class can't be accessed
    word.addCharacter("a"); // ok           
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T11:57:09.473

> 也许让 Character 成为 Word 的私有内部类并向 Word 添加像 addCharacter(String character) 这样的方法？

是的。- 或者也许只声明`MyCharacter`private 和`MyCharacter`class的构造函数`final`。或者在具有“包私有”构造函数`MyCharacter`之外声明该类。或者在内部有`Word`一种（静态）工厂方法和一个私有构造函数。或者 ... ：-）`MyCharacter``appendToWord( Word w, Character char )`

编辑：我首先误解了这个问题：

> 是否可以让 Word 使用私有内部 Character 类扩展 List 类？

`Word`可以以任何方式扩展`List<T>`。但是 - 正如你所知道的那样 - 不是`List<Word.SomeInnerClass>`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:05:24.587

这在理论上是可能的。一个问题会出现，因为`Character`它已经是一个 java 类。此外，如果您使用的是 Eclipse，它不会让您声明

```
public class Word extends ArrayList<Letter> {
    private class Letter {
        //...
    }
} 
```

除非您将 Letter 设置为最多受保护。我不确定这是否是 Eclipse 问题，或者 Java 是否也会阻止您。

Regarding your superclass problem, it's because you cannot use List as it is only an interface. You must use something that implements it, like ArrayList.

# windows - 生成新的卷 ID

> ID：15702691
> 
> 赞同：0
> 
> 时间：2013-03-29T11:53:49.087
> 
> 标签：windows, delphi

[我检查了来自 microsoft technet 论坛的 VloumeID 工具和来自“ http://www.xboxharddrive.com/freeware.html](http://www.xboxharddrive.com/freeware.html) ”的“硬盘序列号更改”工具。但这些工具只提供更改 VolumeID。有没有一种安全的方法来生成一个新的而不与同一台 PC 上可能存在的其他逻辑驱动器的其他 VolumeID 冲突

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T13:55:37.390

我假设您想以编程方式设置卷序列号。

基于当前日期/时间生成卷序列号 (VSN)。确切的实现细节可能因操作系统版本和/或用于格式的工具而异。

有关更多信息，请参阅以下链接：

*   [卷序列号和格式日期/时间验证](http://www.digital-detective.co.uk/documents/Volume%20Serial%20Numbers.pdf)
*   [鲁弗斯源代码](https://github.com/pbatard/rufus/blob/master/src/format.c)

从 Rufus 源代码：

```
/*
* 28.2 CALCULATING THE VOLUME SERIAL NUMBER
*
* For example, say a disk was formatted on 26 Dec 95 at 9:55 PM and 41.94
* seconds. DOS takes the date and time just before it writes it to the
* disk.
*
* Low order word is calculated: Volume Serial Number is:
* Month & Day 12/26 0c1ah
* Sec & Hundrenths 41:94 295eh 3578:1d02
* -----
* 3578h
*
* High order word is calculated:
* Hours & Minutes 21:55 1537h
* Year 1995 07cbh
* -----
* 1d02h
*/

static DWORD GetVolumeID(void)
{
SYSTEMTIME s;
DWORD d;
WORD lo,hi,tmp;

GetLocalTime(&s);

lo = s.wDay + (s.wMonth << 8);
tmp = (s.wMilliseconds/10) + (s.wSecond << 8);
lo += tmp;

hi = s.wMinute + (s.wHour << 8);
hi += s.wYear;

d = lo + (hi << 16);
return d;
} 
```

转换为以下 Delphi 代码：

```
type
  TVolumeId = record
    case byte of
      0: (Id: DWORD);
      1: (
        Lo: WORD;
        Hi: WORD;
      );
  end;

function GetVolumeID: DWORD;
var
  dtNow: TDateTime;
  vlid: TVolumeId;
  st: SYSTEMTIME;
begin
  GetLocalTime(st);
  vlid.Lo := st.wDay + (st.wMonth shl 8);
  vlid.Lo := vlid.Lo + (st.wMilliseconds div 10 + (st.wSecond shl 8));

  vlid.Hi := st.wMinute + (st.wHour shl 8);
  vlid.Hi := vlid.Hi + st.wYear;

  Result := vlid.Id
end; 
```

# android - setLayoutParams vs addView 用于添加新视图

> ID：15702692
> 
> 赞同：4
> 
> 时间：2013-03-29T11:53:49.333
> 
> 标签：android, android-layout, layoutparams

使用 setLayoutParams 和向 addView 提供参数有什么区别？

我知道 addView 仅在第一次添加视图时才有效。我发现了两种显然做同样事情的方法：

```
tv.setLayoutParams(params);
layout.addView(tv) 
```

对比

```
layout.addView(tv, params) 
```

它们是等价的吗？
如果不是，有什么区别？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T12:09:21.713

> 它们是等价的吗？

是的，第一种方法会进行额外的检查，以查看`View`正在添加的是否已设置（如果不存在则`LayoutParams`生成一些）。`LayoutParams`你可以选择任何一个（我会选择第二个方法调用）。

# xamarin.ios - UIPageViewController 取消触摸事件

> ID：15702695
> 
> 赞同：1
> 
> 时间：2013-03-29T11:54:17.473
> 
> 标签：xamarin.ios, uipageviewcontroller, touch-event

我正在使用 UIPageViewController 开发应用程序。一切正常，但我不喜欢在左侧或右侧一键更改页面。我知道我通过 TouchesBegan 获得了该活动，但是如何取消此活动？

# php - 检查节点是否有特定的子节点

> ID：15702705
> 
> 赞同：3
> 
> 时间：2013-03-29T11:54:57.343
> 
> 标签：php, domdocument

我试图找出一个 DOM 节点是否有具有特定名称的子节点

```
$yes = false;
foreach($el->childNodes as $node){
  if($node->nodeName == 'foo'){
    $yes = true;
  }
} 
```

我可以在不遍历节点列表的情况下执行此操作吗？

有一个`hasChildNodes`函数，但它不接受任何节点名称参数:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:00:51.317

您可以使用[XPath](http://www.w3.org/TR/xpath/)

```
$xpath = new DOMXPath($domDocument);
$elements = $xpath->query('/parentName/childName');
if ($elements->length) {
    // has child elements
} 
```

# asp.net - asp.net 会话技术

> ID：15702706
> 
> 赞同：1
> 
> 时间：2013-03-29T11:55:08.243
> 
> 标签：asp.net, asp.net-mvc, session-state

我对 asp.net 会话管理有很好的了解。
但我对此没有几个问题。

1.  当会话 id 被创建时。当客户端使用用户名和密码登录应用程序时。或者当客户端尝试访问 default.aspx 页面时。
2.  服务器如何服务客户端会话请求。
3.  我们可以在js中访问会话ID吗？
4.  ASP.NET Web 表单和 ASP.NET MVC 在客户端服务器会话创建方面有什么区别吗？

任何让我对会话有非常深入了解的链接/书都会对我有所帮助。

提前致谢 ！！！普拉尚

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T12:01:50.120

> 我对 asp.net 会话管理有很好的了解。

我认为您在这里滥用了这些术语。[`ASP.NET Session`](http://msdn.microsoft.com/en-us/library/ms972429.aspx)是一回事，[`Forms Authentication`](http://msdn.microsoft.com/en-us/library/ff647070.aspx)是**完全不同的一回事**。我想您在这里谈论的是表单身份验证。

> 1) 创建会话 ID 时。当客户端使用用户名和密码登录应用程序时。或者当客户端尝试访问 default.aspx 页面时。

当有人调用该[`FormsAuthentication.SetAuthCookie`](http://msdn.microsoft.com/en-us/library/system.web.security.formsauthentication.setauthcookie.aspx)方法时，通常会在登录操作验证用户名和密码凭据后发生。

> 2）服务器如何服务客户端会话请求。

当调用该方法时，会向客户端发送一个表单身份验证 cookie，`FormsAuthentication.SetAuthCookie`并且该 cookie 在每个后续请求中被发送到服务器。cookie 包含允许服务器填充 IPrincipal 的用户名的加密值。

> 3）我们可以在js中访问会话ID吗？

不，表单身份验证 cookie 与`httponly`标志一起发出，这意味着客户端脚本无法访问它。

> 4) 在客户端服务器会话创建方面，ASP.NET Web 表单和 ASP.NET MVC 有什么区别吗？

它们是完全一样的。实际上并没有`ASP.NET MVC client server session creation`. 所有这些机制都来自 ASP.NET。

* * *

现在让我们假设您实际上在问题中谈到了 ASP.NET Session。我将尝试在这种情况下回答您的问题：

> 1) 创建会话 ID 时。当客户端使用用户名和密码登录应用程序时。或者当客户端尝试访问 default.aspx 页面时。

`HttpContext.Session`每当某些服务器端代码尝试使用该属性读取或写入会话时。

> 2）服务器如何服务客户端会话请求。

当某些服务器端脚本尝试读取或写入`HttpContext.Session`对象时，会向客户端发出会话 cookie。这个 cookie 会在每个后续请求中发送到服务器。cookie 只是一个 id，它允许访问存储在服务器上的会话数据。默认情况下，会话数据存储在内存中。但是您也可以将 ASP.NET 配置为将其存储在进程外或 SQLServer 中。有关各种会话状态模式的更多信息，请参阅[`MSDN`](http://msdn.microsoft.com/en-us/library/ms972429.aspx)。

> 3）我们可以在js中访问会话ID吗？

不，ASP.NET 会话 cookie 带有`httponly`标志，这意味着客户端脚本无法访问它。

> 4) 在客户端服务器会话创建方面，ASP.NET Web 表单和 ASP.NET MVC 有什么区别吗？

它们是完全一样的。实际上并没有`ASP.NET MVC client server session creation`. 所有这些机制都来自 ASP.NET。

# class - 单个类或多个场景中的动作脚本？

> ID：15702711
> 
> 赞同：1
> 
> 时间：2013-03-29T11:55:17.900
> 
> 标签：class, actionscript, scene

我对 Actionscript 和 Adob​​e Flash CS6 完全陌生，为了一点乐趣，我决定尝试制作一个小游戏。我有一些关于一般实施方法的新手（或 noob-y）问题要问。

到目前为止，我一直在阅读的文档建议创建一个新的 flash 项目，然后创建一个文档类：

```
package  {

    import flash.display.MovieClip;

    public class MyMainClass extends MovieClip {

        public function MyMainClass() {

        }

    }

} 
```

我想知道我是使用这个 MainClass 来编写整个游戏还是在一个场景中包含动作脚本并有多个场景，或者两者兼而有之。

假设我的游戏中有 5 个关卡，我会这样做吗：

```
package  {

    import flash.display.MovieClip;

    public class MyMainClass extends MovieClip {

        public function MyMainClass() {
            StartLevel1();
            StartLevel2();
            StartLevel3();
            StartLevel4();
            StartLevel5();
        }

        public function StartLevel1() {
            // Do something
        }
        public function StartLevel2() {
            // Do something
        }
        public function StartLevel3() {
            // Do something
        }
        public function StartLevel4() {
            // Do something
        }
        public function StartLevel5() {
            // Do something
        }

    }

} 
```

或者在每个场景中创建 5 个带有动作脚本的场景？谁能给我一个起点？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T04:05:43.493

我不知道有谁对场景有什么好说的。

然而，正如您的直觉，时间线本身是一个很好的工具，可以随着时间的推移管理 Flash 资源的状态。如果您使用它，您还可以获得隐藏的优势，即您不必下载 100% 的文件即可使用它（因此您可以通过取消选中“在 N 帧中导出”来减少甚至消除对预加载器的需求“在你的图书馆符号上。

Lars 非常正确地指出，了解这项技术的开发人员非常少，而我确切地知道有一位开发人员能够并且将帮助有兴趣探索这项技术的人。那个人现在正在帮助你。因此，如果您选择这样做，请记住，除非我碰巧注意到您的帖子并做出回应，否则您大部分时间都是靠自己的。

我*不赞成*时间线脚本，[除了极少数例外](https://stackoverflow.com/questions/15627640/when-using-object-oriented-programming-in-as3-is-it-okay-to-put-some-code-on-th/15628614#15628614)。我建议的是一种“[兼而有之](http://www.developria.com/2010/04/combining-the-timeline-with-oo.html)”的方法，您可以在其中使用文档类来控制时间线实例。

您的文档类可能如下所示：

```
public class Game extends MovieClip {
    protected var _level:ILevel;//Interface your Level MovieClips will implement
    protected var levelController:LevelController = new LevelControler();
    protected var currentLevel:int;
    protected var maxLevels:int = 5;

    public function Game() {
        levelController.addEventListener(LevelEventKind.LEVEL_COMPLETE, nextLevel);
        levelController.addEventListener(LevelEventKind.LEVEL_FAILED, gameOver);
        startLevel(currentLevel);
    }

    public function startLevel(levelNumber:int):void {
        goToLabel('Level' + String(levelNumber));
    }
    public function get level():ILevel {
        return _level;
    }
    public function set level(value:ILevel):void {
       _level = value;
       //internally, this should release all listeners to the last 
       //level object (if any) so you don't get a memory leak
       levelController.level = _level;
    }
    protected function nextLevel(e:Event):void {
        if (currentLevel &lt; maxLevels) {
            startLevel(++currentLevel);
        } else {
            //do you won logic here
        }
    }
    protected function gameOver(e:Event):void {
        //do bombed out logic here
    }
    protected function goToLabel(label:String):void {
        for each (var frameLabel:FrameLabel in currentLabels) {
            if (frameLabel.name==label) {    
                //if your swf is media-heavy, may want to check that frame
                //is loaded if you chose to reduce/eliminate preloader
                goToAndStop(label);
                return;
            }
        }
        trace('no such label as', label);
    }
} 
```

这为您带来了一款游戏，您可以在其中更改不同关卡的外观，而无需更改单行 ActionScript，并且您可以通过分配实现 ILevel 的不同基类来更改它们的工作方式。您还可以通过更换不同风格的 LevelController 来更改您的功能，但是您的主文档类（在此实例中为 Game）会知道此更改（而其他更改可以在根本不更改 Game 的情况下进行）。

# sql - 如何选择空集的结果

> ID：15702717
> 
> 赞同：2
> 
> 时间：2013-03-29T11:55:38.967
> 
> 标签：sql

我有sql查询：

```
select * from table where id in (1,2) 
```

1,2 是我动态添加的参数。但是如果我有空集怎么办：

```
select * from table where id in () 
```

那么这个查询调用异常：

```
ERROR at line 1:
ORA-00936: missing expression 
```

我应该如何用空集创建sql

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:57:10.440

您始终可以添加`null`到您的集合中，因此当实际集合为空时，您不会收到语法错误：

```
select * from table where id in (null,1,2) 
```

对比

```
select * from table where id in (null) 
```

您的生成器也会更简单，因为您可以`,`在添加的每个项目前打印 a，而无需检查它是否是第一个项目。

当然，由于您正在生成 SQL，因此针对[SQL 注入](http://xkcd.com/327/)的标准预防措施适用：不要让用户在您生成的 SQL 附近的任何地方输入。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T11:57:43.067

试试这个

```
 select * from table where id in (null) 
```

# c# - 使用 RSACryptoServiceProvider 进行公钥加密

> ID：15702718
> 
> 赞同：18
> 
> 时间：2013-03-29T11:55:39.540
> 
> 标签：c#, .net, cryptography, rsa, encryption-asymmetric

我在 CodeProject 上看过一篇文章，其中解释了如何使用 RSA 提供程序进行加密和解密：

[RSA 私钥加密](http://www.codeproject.com/Articles/38739/RSA-Private-Key-Encryption)

虽然 2009 年的旧版本有问题，但 2012 年的新版本（支持 System.Numerics.BigInteger）似乎更可靠。不过，这个版本缺少的是一种使用*公钥**加密*和使用*私钥**解密*的方法。

 ***因此，我自己尝试过，但解密时会出现垃圾。我不熟悉 RSA 提供商，所以我在这里一无所知。很难找到更多关于这应该如何工作的信息。

**有谁看到这有什么问题？以下是使用 PUBLIC 密钥的加密：**

```
// Add 4 byte padding to the data, and convert to BigInteger struct
BigInteger numData = GetBig( AddPadding( data ) );
RSAParameters rsaParams = rsa.ExportParameters( false );
//BigInteger D = GetBig( rsaParams.D ); //only for private key
BigInteger Exponent = GetBig( rsaParams.Exponent );
BigInteger Modulus = GetBig( rsaParams.Modulus );
BigInteger encData = BigInteger.ModPow( numData, Exponent, Modulus );    
return encData.ToByteArray(); 
```

执行此操作时是否使用提供商提供的大“D”？可能不是，因为它是没有“D”的公钥。

**然后是对应的（使用 PRIVATE 密钥解密）：**

```
BigInteger numEncData = new BigInteger( cipherData );

RSAParameters rsaParams = rsa.ExportParameters( true );
BigInteger D = GetBig( rsaParams.D );
//BigInteger Exponent = GetBig( rsaParams.Exponent );
BigInteger Modulus = GetBig( rsaParams.Modulus );

BigInteger decData = BigInteger.ModPow( numEncData, D, Modulus );

byte[] data = decData.ToByteArray();
byte[] result = new byte[ data.Length - 1 ];
Array.Copy( data, result, result.Length );
result = RemovePadding( result );

Array.Reverse( result );
return result; 
```

我在这里需要“D”还是指数？

**显然，我需要加密货币以私人-公共-公共-私人两种方式工作。任何帮助深表感谢！**

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-07-20T08:38:36.883

以这个编码/解码示例为例

```
 byte[] toEncryptData = Encoding.ASCII.GetBytes("hello world");

        //Generate keys
        RSACryptoServiceProvider rsaGenKeys = new RSACryptoServiceProvider();
        string privateXml = rsaGenKeys.ToXmlString(true);
        string publicXml = rsaGenKeys.ToXmlString(false);

        //Encode with public key
        RSACryptoServiceProvider rsaPublic = new RSACryptoServiceProvider();
        rsaPublic.FromXmlString(publicXml);
        byte[] encryptedRSA = rsaPublic.Encrypt(toEncryptData, false);
        string EncryptedResult = Encoding.Default.GetString(encryptedRSA);

        //Decode with private key
        var rsaPrivate = new RSACryptoServiceProvider();
        rsaPrivate.FromXmlString(privateXml);
        byte[] decryptedRSA = rsaPrivate.Decrypt(encryptedRSA, false);
        string originalResult = Encoding.Default.GetString(decryptedRSA); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-03-29T15:57:37.150

这是给你的一个例子：

```
 public static void rsaPlayground()
    {
        byte[] data = new byte[] { 1, 2, 3, 4, 5 };
        RSACryptoServiceProvider csp = new RSACryptoServiceProvider();//make a new csp with a new keypair
        var pub_key = csp.ExportParameters(false); // export public key
        var priv_key = csp.ExportParameters(true); // export private key

        var encData = csp.Encrypt(data, false); // encrypt with PKCS#1_V1.5 Padding
        var decBytes = MyRSAImpl.plainDecryptPriv(encData, priv_key); //decrypt with own BigInteger based implementation
        var decData = decBytes.SkipWhile(x => x != 0).Skip(1).ToArray();//strip PKCS#1_V1.5 padding

    }

    public class MyRSAImpl 
    {

        private static byte[] rsaOperation(byte[] data, BigInteger exp, BigInteger mod)
        {
            BigInteger bData = new BigInteger(
                data    //our data block
                .Reverse()  //BigInteger has another byte order
                .Concat(new byte[] { 0 }) // append 0 so we are allways handling positive numbers
                .ToArray() // constructor wants an array
            );
            return 
                BigInteger.ModPow(bData, exp, mod) // the RSA operation itself
                .ToByteArray() //make bytes from BigInteger
                .Reverse() // back to "normal" byte order
                .ToArray(); // return as byte array

            /*
             * 
             * A few words on Padding:
             * 
             * you will want to strip padding after decryption or apply before encryption 
             * 
             */
        }

        public static byte[] plainEncryptPriv(byte[] data, RSAParameters key) 
        {
            MyRSAParams myKey = MyRSAParams.fromRSAParameters(key);
            return rsaOperation(data, myKey.privExponent, myKey.Modulus);
        }
        public static byte[] plainEncryptPub(byte[] data, RSAParameters key)
        {
            MyRSAParams myKey = MyRSAParams.fromRSAParameters(key);
            return rsaOperation(data, myKey.pubExponent, myKey.Modulus);
        }
        public static byte[] plainDecryptPriv(byte[] data, RSAParameters key)
        {
            MyRSAParams myKey = MyRSAParams.fromRSAParameters(key);
            return rsaOperation(data, myKey.privExponent, myKey.Modulus);
        }
        public static byte[] plainDecryptPub(byte[] data, RSAParameters key)
        {
            MyRSAParams myKey = MyRSAParams.fromRSAParameters(key);
            return rsaOperation(data, myKey.pubExponent, myKey.Modulus);
        }

    }

    public class MyRSAParams
    {
        public static MyRSAParams fromRSAParameters(RSAParameters key)
        {
            var ret = new MyRSAParams();
            ret.Modulus = new BigInteger(key.Modulus.Reverse().Concat(new byte[] { 0 }).ToArray());
            ret.privExponent = new BigInteger(key.D.Reverse().Concat(new byte[] { 0 }).ToArray());
            ret.pubExponent = new BigInteger(key.Exponent.Reverse().Concat(new byte[] { 0 }).ToArray());

            return ret;
        }
        public BigInteger Modulus;
        public BigInteger privExponent;
        public BigInteger pubExponent;
    } 
```***

# javascript - 如何将函数绑定到点击 iframe 子项

> ID：15702721
> 
> 赞同：0
> 
> 时间：2013-03-29T11:55:53.470
> 
> 标签：javascript, jquery, iframe

我需要`hide`一个在iframe`div`上的*子 click*。`iframe`

 *`<a href="#" class="share">Share +</a>`-> 这是我想在**click**上做一些功能的孩子。

我使用[了这个答案 JQuery 代码](https://stackoverflow.com/a/3672858/1763929)，但它似乎不起作用。

**HTML**

```
<iframe id="map_frame" frameborder="0" src="http://a.tiles.mapbox.com/v3/vucko.map-1p4ens5h.html#17/45.80611110816038/15.924351969962727"></iframe>
<div>on "share +" click this div must hide so the share box goes above the div</div> 
```

**jQuery**

```
$('#map_frame').contents().find('.share').click(function() {
    alert('click');
}); 
```

[工作 JSFiddle](http://jsfiddle.net/94Dge/1)。

如何做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T11:59:05.757

这无法完成，因为 iframe 文档和根文档来自不同的域。浏览器不允许这样做，引发安全异常。

例如，在 chrome 中，这会导致：

> 不安全的 JavaScript 尝试 从具有 URL [http://fiddle.jshell.net/94Dge的框架访问具有 URL](http://fiddle.jshell.net/94Dge/1/show/) [http://a.tiles.mapbox.com/v3/vucko.map-1p4ens5h.html#17/45.80611110816038/15.924351969962727的框架](http://a.tiles.mapbox.com/v3/vucko.map-1p4ens5h.html#17/45.80611110816038/15.924351969962727)[/1/显示/](http://fiddle.jshell.net/94Dge/1/show/)。域、协议和端口必须匹配。*

# html - 元素不会向右浮动

> ID：15702723
> 
> 赞同：1
> 
> 时间：2013-03-29T11:56:07.050
> 
> 标签：html, header, css-float

不知何故，我的导航标题元素不会浮动到右上角的位置：固定。

有人有想法吗？

我真的很期待回答这个小谜团。

这是代码：

```
<header class="hidden" style="z-index:40000; float:right;"> 
  <div class="wrapper hidden" id="test"> 
    <nav class="work-nav menu">
      <ul class="navscroll">
        <a href="#headerwrap" rel="tooltip" data-placement="left" title="Home">
          <li><img src="img/nav_bar_home_02.png"></li>
        </a>
        <a href="http://www.designlike.de/g_website_test/work-overview.htm" rel="tooltip" data-placement="left" class="transition" title="Work">
          <li><img src="img/nav_bar_work_02.png"></li>
        </a>
        <a href="#footerscroll" rel="tooltip" data-placement="left" title="Contact">
          <li><img src="img/nav_bar_contact_02.png"></li>
        </a>
      </ul>
    </nav>
  </div> 
</header> 
```

和CSS：

```
/* ------ */
/* HEADER */
/* ------ */
header {
    display:block;
    position:fixed;
    top: 0;
    left: 0;
    width: 40px;
    overflow:visible;
    z-index:20000;
    float:right; !important
}
header .wrapper {
    position: fixed;
    padding-top: 0px;
    padding-bottom: 20px;
    height: 60px;
    float:right;
}
nav {  
    float:right;
    width:40px;
    margin-top:-1px; 
}
nav ul { margin:0px; padding:0px; position:fixed;}
nav ul li {
    width:40px;
    min-height: 40px;
    background-color:#ffd200;
    margin-top:1px;
    padding:0;
    list-style:none;
    -webkit-transition: all 0.15s ease-in-out;
    -moz-transition: all 0.15s ease-in-out;
    -ms-transition: all 0.15s ease-in-out;
    -o-transition: all 0.15s ease-in-out;
    transition: all 0.15s ease-in-out;
}

nav ul li:hover {
    width:40px;
    min-height: 40px;
    background-color:#2a2a2a;
} 

nav a {
    color: #fff;
    cursor: pointer;
    display:block;
    text-decoration:none;
    width:100%;
}

nav a:hover{
    text-decoration:none;
}

nav li:hover {
    position: relative;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:16:52.000

你不能使用`position: fixed;`with `float: right;`。其中一个是告诉它存在于特定的像素位置，而另一个是告诉它在其容器中浮动。他们是相互矛盾的指令，并且`position`会获胜。

`left: 0`也就是说，我相信您可以通过简单地更改`right: 0`和完全删除来实现您正在尝试的目标`float`。

# select - 如何使用 selectAll 选择多个选择器？

> ID：15702724
> 
> 赞同：41
> 
> 时间：2013-03-29T11:56:08.940
> 
> 标签：select, d3.js, css-selectors, selectall

是否可以使用 D3 中选择多个选择器`selectAll`？

我想要`svg.selectAll("class1", "circle", "id2")`选择所有`circle`元素，`class1`元素和`id2`元素。

这可能吗？

* * *

## 回答 #1

> 赞同：66
> 
> 时间：2013-03-29T14:38:24.930

是的，您只需将逗号放在选择器字符串中，而不是传递单独的字符串：

```
svg.selectAll(".class1, circle, #id2") 
```

我假设“class1”是一个css类，“circle”是一个标签名，“id2”是一个ID属性值。

# java - 我们需要链表中的前一个元素吗？

> ID：15702725
> 
> 赞同：0
> 
> 时间：2013-03-29T11:56:11.467
> 
> 标签：java, collections, linked-list, hashmap

在 的实现中`HashMap`，链表用于表示桶中的元素。每个条目都有一个指向下一个条目的元素。见：[参考](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/HashMap.java#HashMap.remove%28java.lang.Object%29)。但是，在`LinkedList`类的实现中，每个元素都有对其前一个元素的引用，而其下一个元素参见[Ref](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/LinkedList.java)。只是想弄清楚为什么`previous`在一个链表中很重要，而在另一个链表中不重要？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:09:25.200

`Entry`（内部类`HashMap`）不是通用链表的一部分（原样`LinkedList`）。它的唯一目的是向前迭代它以寻找一个元素。所以它不需要`previous`参考。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:00:56.647

前面的参考使 LinkedList 成为双向 List，这使得反向迭代 List 成为可能。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T12:10:03.807

严格来说，链表中不需要对前一个元素的引用。实际上是`java.util.LinkedList`一个双向链表。这是有效实施以下操作所必需的：

*   [add(E)](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#add(E))，附加在列表的末尾；
*   [getLast()](http://docs.oracle.com/javase/6/docs/api/java/util/LinkedList.html#getLast())，它检索列表的最后一个元素；
*   [ListIterator.previous()](http://docs.oracle.com/javase/6/docs/api/java/util/ListIterator.html#previous())允许以相反的顺序遍历列表。

上述操作对于 Map.Entry 的链表是没有用的。

请注意，虽然`getLast()`是`LinkedList`对列表界面的补充，但另外两个是所述界面所必需的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T12:10:28.107

LinkedList 是一个通用的实现。您可能想向后迭代它。对于地图，在搜索存储桶时，它`only`会向前迭代。由于不需要向后迭代，因此没有实现。

# javascript - Javascript 和 jquery 停止事件

> ID：15702726
> 
> 赞同：0
> 
> 时间：2013-03-29T11:56:15.467
> 
> 标签：javascript, jquery, html

我有一个小问题：

我在表格中为 row() 设置了 jquery onclick 事件，在最后一列中，我有一个链接打开确认弹出窗口（询问我是否确定要这样做 bla bla ...）。如果我单击该链接，弹出窗口会打开，如果我按否，它应该保留在当前页面上，但它会继续该行中的事件（触发该单击）。你怎么看？

关联：

```
<tr class="clickableRow" id="someId"> bgcolor="color">
   ..........
    <td>
     <a  href="javascript:void(0)" onClick="javascript:del_prompt('url');">                        <img src="images/delete.png" border="0"></a>
</td>
</tr> 
```

Javascript：

```
 $(".clickableRow").click(function() {
   window.open("companynewestimate.php?id="+this.id,"_parent");
  }); 
```

德尔功能

```
<script language="javascript">
function del_prompt(id)
{

        if(confirm ("Are you sure you want to delete selected Record")){
            location.href = "companyopenestimates.php?act=del&id="+id;
            }
        else{ 
            return false;
        }

        }

</script> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T11:59:29.407

没有一些代码，很难得到正确的答案。但也许这有帮助：

```
 $("#element").on("click",function(e){
     //do something
     e.preventDefault();
     e.stopPropagation();
  }) 
```

见这里： [http ://api.jquery.com/event.stopPropagation/](http://api.jquery.com/event.stopPropagation/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:08:17.557

更改链接`onclick`应该可以解决问题：

```
onClick="del_prompt('<?=$line['id_est']?>'); return false;" 
```

请注意，`javascript:`根本不需要。

# php - 无法将数据插入 MySQL 表

> ID：15702727
> 
> 赞同：-1
> 
> 时间：2013-03-29T11:56:21.640
> 
> 标签：php, mysql

有两个数据块。

区块 1：

“完成了 9.8 版的主要开发阶段，发布正在进行测试和准备，但现在我们建议您阅读有关新版本等待您的信息。在此版本中，您被邀请到一个新系统，通过该系统您的访问者可以在您的网站以及社交网络中与其他人分享有趣的信息、网站上新的快速锁定垃圾邮件发送者、新的模板标签、用于自定义新闻显示的新选项等等，但一切都非常详细。”

区块 2：

“我不害怕（我不害怕）站起来（站起来）每个人（每个人）来拉我的手（来拉我的手）我们会一起走这条路，穿过风暴无论天气如何，冷或暖只要让你知道，你并不孤单，Holla，如果你觉得你一直在同一条路上（同一条路）”

我可以轻松地将第一个数据块插入 MySQL 表，但我不能插入第二个数据块。

为什么 ？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:05:41.167

使用[mysql_real_escape_string](http://www.php.net/manual/en/function.mysql-real-escape-string.php)转义`INSERT`查询中的文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:08:41.500

您需要使用[PDO](https://stackoverflow.com/tags/pdo/info)进行插入。

```
// here goes connection code from the link above

$data = "I'm not afraid (I'm not afraid) To take a stand (to take a stand) Everybody (everybody) Come take my hand (come take my hand) We'll walk this road together, through the storm Whatever weather, cold or warm Just letting you know that, you're not alone Holla if you feel like you've been down the same road (same road)";
$stm = $pdo->prepare("INSERT INTO table SET field=?");
$stm->execute(array($data)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:10:51.560

正如我所看到的，您的第一个块没有单引号，而第二个块有单引号和双引号，所以我认为您的解决方案将通过转义引号来解决尝试并告诉我结果:)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-29T12:00:56.243

恕我直言，我认为字符 ' 可能会破坏您的查询，请尝试以这种方式在 ' 之前插入 \ 并尝试重新执行查询：

```
\' 
```

# android - 调用 WebView.reload() 函数时 Android WebView 崩溃

> ID：15702728
> 
> 赞同：-1
> 
> 时间：2013-03-29T11:56:21.740
> 
> 标签：android, webview, reload

我已经使用 android webview 控件来加载任何网站。[当我为“ http://us.cnn.com/?hpt=ed_US](http://us.cnn.com/?hpt=ed_US) ”网络调用“WebView.reload()”函数时，我的应用程序将重新启动而没有任何崩溃。

以下是调用 WebView.reload() 函数后 logcat 的输出......

```
--------------------------------------------------
03-29 17:08:02.767: A/libc(30401): Fatal signal 11 (SIGSEGV) at 0x00000000 (code=1), thread 30421 (WebViewCoreThre)
03-29 17:08:02.867: I/DEBUG(124): *** *** *** *** *** *** *** *** *** *** *** *** *** *** *** ***
03-29 17:08:02.867: I/DEBUG(124): Build fingerprint: 'google/nakasi/grouper:4.2.1/JOP40D/533553:user/release-keys'
03-29 17:08:02.877: I/DEBUG(124): Revision: '0'
03-29 17:08:02.877: I/DEBUG(124): pid: 30401, tid: 30421, name: WebViewCoreThre  >>> com.mkyong.android <<<
03-29 17:08:02.877: I/DEBUG(124): signal 11 (SIGSEGV), code 1 (SEGV_MAPERR), fault addr 00000000
03-29 17:08:02.967: I/DEBUG(124):     r0 00000000  r1 00000001  r2 00000025  r3 00000000
03-29 17:08:02.967: I/DEBUG(124):     r4 645a4fc8  r5 400ae228  r6 645a4fd4  r7 6753547e
03-29 17:08:02.967: I/DEBUG(124):     r8 00098b14  r9 00098369  sl 400ae228  fp 00000000
03-29 17:08:02.967: I/DEBUG(124):     ip 673de668  sp 699140a0  lr 6747f89f  pc 674b3e30  cpsr 20000030
03-29 17:08:02.967: I/DEBUG(124):     d0  0000000740e00000  d1  0000000800000002
03-29 17:08:02.967: I/DEBUG(124):     d2  40e0000000000000  d3  0000000700000007
03-29 17:08:02.967: I/DEBUG(124):     d4  bf83c1f24249f0b1  d5  3ff0000000000000
03-29 17:08:02.967: I/DEBUG(124):     d6  3f80000000000000  d7  3e8000003e924925
03-29 17:08:02.967: I/DEBUG(124):     d8  0000000000000000  d9  0000000000000000
03-29 17:08:02.967: I/DEBUG(124):     d10 0000000000000000  d11 0000000000000000
03-29 17:08:02.967: I/DEBUG(124):     d12 0000000000000000  d13 0000000000000000
03-29 17:08:02.967: I/DEBUG(124):     d14 0000000000000000  d15 0000000000000000
03-29 17:08:02.967: I/DEBUG(124):     d16 0000000000000217  d17 00000080b280e580
03-29 17:08:02.967: I/DEBUG(124):     d18 0000000000000091  d19 bf66bee65473ab90
03-29 17:08:02.967: I/DEBUG(124):     d20 3fc553ad8b79a5cc  d21 3e66376972bea4d0
03-29 17:08:02.967: I/DEBUG(124):     d22 41224f7ffffffffe  d23 bfc27bfffffffff4
03-29 17:08:02.967: I/DEBUG(124):     d24 3ff24f7ffffffffe  d25 3fe555555575584a
03-29 17:08:02.967: I/DEBUG(124):     d26 0000000500000004  d27 0000000700000006
03-29 17:08:02.967: I/DEBUG(124):     d28 0004800000000000  d29 000d800000090000
03-29 17:08:02.967: I/DEBUG(124):     d30 0000000100000001  d31 0000000100000001
03-29 17:08:02.967: I/DEBUG(124):     scr 20000090
03-29 17:08:02.977: I/DEBUG(124): backtrace:
03-29 17:08:02.977: I/DEBUG(124):     #00  pc 000c1e30  /system/lib/libchromium_net.so (net::HttpCache::Transaction::DoCacheReadData()+151)
03-29 17:08:02.977: I/DEBUG(124):     #01  pc 000c43a3  /system/lib/libchromium_net.so (net::HttpCache::Transaction::DoLoop(int)+1966)
03-29 17:08:02.977: I/DEBUG(124):     #02  pc 000c475d  /system/lib/libchromium_net.so (net::HttpCache::Transaction::Read(net::IOBuffer*, int, CallbackRunner<Tuple1<int> >*)+512)
03-29 17:08:02.977: I/DEBUG(124):     #03  pc 001074ef  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):     #04  pc 0010a625  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):     #05  pc 0010a6fb  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):     #06  pc 0010ab05  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):     #07  pc 0010af6f  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):     #08  pc 00102155  /system/lib/libchromium_net.so (net::URLRequest::Read(net::IOBuffer*, int, int*)+208)
03-29 17:08:02.987: I/DEBUG(124):     #09  pc 002366b9  /system/lib/libwebcore.so
03-29 17:08:02.987: I/DEBUG(124):     #10  pc 002367e7  /system/lib/libwebcore.so
03-29 17:08:02.987: I/DEBUG(124):     #11  pc 0010ad5f  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):     #12  pc 00107595  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):     #13  pc 0007cb8b  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):     #14  pc 000c1bd3  /system/lib/libchromium_net.so (net::HttpCache::Transaction::DoCallback(int)+138)
03-29 17:08:02.987: I/DEBUG(124):     #15  pc 000c1c4f  /system/lib/libchromium_net.so (net::HttpCache::Transaction::HandleResult(int)+82)
03-29 17:08:02.987: I/DEBUG(124):     #16  pc 000c4425  /system/lib/libchromium_net.so (net::HttpCache::Transaction::DoLoop(int)+2096)
03-29 17:08:02.987: I/DEBUG(124):     #17  pc 0007cb8b  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):     #18  pc 000ad1bd  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):     #19  pc 000ada9d  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):     #20  pc 000797cd  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):     #21  pc 0005643d  /system/lib/libchromium_net.so (MessageLoop::RunTask(Task*)+180)
03-29 17:08:02.987: I/DEBUG(124):     #22  pc 000575b3  /system/lib/libchromium_net.so (MessageLoop::DeferOrRunPendingTask(MessageLoop::PendingTask const&)+18)
03-29 17:08:02.987: I/DEBUG(124):     #23  pc 00057623  /system/lib/libchromium_net.so (MessageLoop::DoWork()+94)
03-29 17:08:02.987: I/DEBUG(124):     #24  pc 00058367  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):     #25  pc 00056b13  /system/lib/libchromium_net.so (MessageLoop::RunInternal()+114)
03-29 17:08:02.987: I/DEBUG(124):     #26  pc 00056b71  /system/lib/libchromium_net.so (MessageLoop::Run()+16)
03-29 17:08:02.987: I/DEBUG(124):     #27  pc 000771d9  /system/lib/libchromium_net.so (base::Thread::ThreadMain()+188)
03-29 17:08:02.987: I/DEBUG(124):     #28  pc 00076c93  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):     #29  pc 0000e3d8  /system/lib/libc.so (__thread_entry+72)
03-29 17:08:02.987: I/DEBUG(124):     #30  pc 0000dac4  /system/lib/libc.so (pthread_create+160)
03-29 17:08:02.987: I/DEBUG(124): stack:
03-29 17:08:02.987: I/DEBUG(124):          69914060  400ae228  
03-29 17:08:02.987: I/DEBUG(124):          69914064  6744951b  /system/lib/libchromium_net.so (MessageLoop::PostTask_Helper(tracked_objects::Location const&, Task*, long long, bool)+250)
03-29 17:08:02.987: I/DEBUG(124):          69914068  ffffffff  
03-29 17:08:02.987: I/DEBUG(124):          6991406c  00000000  
03-29 17:08:02.987: I/DEBUG(124):          69914070  00000000  
03-29 17:08:02.987: I/DEBUG(124):          69914074  00000000  
03-29 17:08:02.987: I/DEBUG(124):          69914078  00000000  
03-29 17:08:02.987: I/DEBUG(124):          6991407c  40058420  
03-29 17:08:02.987: I/DEBUG(124):          69914080  64930890  
03-29 17:08:02.987: I/DEBUG(124):          69914084  400ae228  
03-29 17:08:02.987: I/DEBUG(124):          69914088  00000000  
03-29 17:08:02.987: I/DEBUG(124):          6991408c  00000000  
03-29 17:08:02.987: I/DEBUG(124):          69914090  00000002  
03-29 17:08:02.987: I/DEBUG(124):          69914094  6747f89f  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):          69914098  df0027ad  
03-29 17:08:02.987: I/DEBUG(124):          6991409c  00000000  
03-29 17:08:02.987: I/DEBUG(124):     #00  699140a0  64488630  
03-29 17:08:02.987: I/DEBUG(124):          699140a4  674b3a35  /system/lib/libchromium_net.so (net::HttpCache::Transaction::DoNetworkReadComplete(int)+88)
03-29 17:08:02.987: I/DEBUG(124):          699140a8  675938b8  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):          699140ac  400ae228  
03-29 17:08:02.987: I/DEBUG(124):          699140b0  00000000  
03-29 17:08:02.987: I/DEBUG(124):          699140b4  674d25a5  /system/lib/libchromium_net.so
03-29 17:08:02.987: I/DEBUG(124):          699140b8  00000000  
03-29 17:08:02.987: I/DEBUG(124):          699140bc  00000000  
03-29 17:08:02.987: I/DEBUG(124):          699140c0  40058420  
03-29 17:08:02.987: I/DEBUG(124):          699140c4  699140f4  
03-29 17:08:02.987: I/DEBUG(124):          699140c8  69917ea0  
03-29 17:08:02.987: I/DEBUG(124):          699140cc  674480c1  /system/lib/libchromium_net.so (base::WaitableEvent::~WaitableEvent()+14)
03-29 17:08:02.987: I/DEBUG(124):          699140d0  00000000  
03-29 17:08:02.987: I/DEBUG(124):          699140d4  69917dd0  
03-29 17:08:02.987: I/DEBUG(124):          699140d8  400ae228  
03-29 17:08:02.987: I/DEBUG(124):          699140dc  4d17f9e5  /dev/ashmem/dalvik-heap (deleted)
03-29 17:08:02.987: I/DEBUG(124):          ........  ........
03-29 17:08:02.987: I/DEBUG(124):     #01  69914160  00000001  
03-29 17:08:02.987: I/DEBUG(124):          69914164  69914184  
03-29 17:08:02.987: I/DEBUG(124):          69914168  00000000  
03-29 17:08:02.987: I/DEBUG(124):          6991416c  64b95fe0  
03-29 17:08:02.987: I/DEBUG(124):          69914170  00000000  
03-29 17:08:02.987: I/DEBUG(124):          69914174  674aff03  /system/lib/libchromium_net.so (net::HttpCache::ProcessPendingQueue(net::HttpCache::ActiveEntry*)+146)
03-29 17:08:02.987: I/DEBUG(124):          69914178  64570600  
03-29 17:08:02.987: I/DEBUG(124):          6991417c  674b11d5  /system/lib/libchromium_net.so (net::HttpCache::OnProcessPendingQueue(net::HttpCache::ActiveEntry*))
03-29 17:08:02.987: I/DEBUG(124):          69914180  00000000  
03-29 17:08:02.987: I/DEBUG(124):          69914184  64570600  
03-29 17:08:02.987: I/DEBUG(124):          69914188  40058390  
03-29 17:08:02.987: I/DEBUG(124):          6991418c  6758200a  /system/lib/libchromium_net.so
03-29 17:08:02.997: I/DEBUG(124):          69914190  6754e9bc  /system/lib/libchromium_net.so
03-29 17:08:02.997: I/DEBUG(124):          69914194  000003df  
03-29 17:08:02.997: I/DEBUG(124):          69914198  64b95fe8  
03-29 17:08:02.997: I/DEBUG(124):          6991419c  64b95fe8  
03-29 17:08:02.997: I/DEBUG(124):          ........  ........
03-29 17:08:02.997: I/DEBUG(124):     #02  699150f0  00000000  
03-29 17:08:02.997: I/DEBUG(124):          699150f4  00000000  
03-29 17:08:02.997: I/DEBUG(124):          699150f8  00000000  
03-29 17:08:02.997: I/DEBUG(124):          699150fc  00000000  
03-29 17:08:02.997: I/DEBUG(124):          69915100  00000000  
03-29 17:08:02.997: I/DEBUG(124):          69915104  00000000  
03-29 17:08:02.997: I/DEBUG(124):          69915108  00000000  
03-29 17:08:02.997: I/DEBUG(124):          6991510c  00000000  
03-29 17:08:02.997: I/DEBUG(124):          69915110  00000000  
03-29 17:08:02.997: I/DEBUG(124):          69915114  00000000  
03-29 17:08:02.997: I/DEBUG(124):          69915118  00000000  
03-29 17:08:02.997: I/DEBUG(124):          6991511c  00000000  
03-29 17:08:02.997: I/DEBUG(124):          69915120  00000000  
03-29 17:08:02.997: I/DEBUG(124):          69915124  00000000  
03-29 17:08:02.997: I/DEBUG(124):          69915128  00000000  
03-29 17:08:02.997: I/DEBUG(124):          6991512c  00000000  
03-29 17:08:02.997: I/DEBUG(124):          ........  ........
03-29 17:08:03.007: I/DEBUG(124): memory near r4:
03-29 17:08:03.007: I/DEBUG(124):     645a4fa8 00000368 0000001a 65005200 75006700  
03-29 17:08:03.007: I/DEBUG(124):     645a4fb8 61006c00 00007200 00000018 000001db  
03-29 17:08:03.007: I/DEBUG(124):     645a4fc8 67590368 00000027 645a4798 00000000  
03-29 17:08:03.007: I/DEBUG(124):     645a4fd8 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     645a4fe8 64b975b4 00000000 00000000 645a4fe4  
03-29 17:08:03.007: I/DEBUG(124):     645a4ff8 645a4fe4 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     645a5008 00000000 645a4ffc 645a4ffc 00000000  
03-29 17:08:03.007: I/DEBUG(124):     645a5018 6494ada8 40058390 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     645a5028 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     645a5038 00000000 00000000 00000001 312e3239  
03-29 17:08:03.007: I/DEBUG(124):     645a5048 312e3232 322e3632 00003135 645a5052  
03-29 17:08:03.007: I/DEBUG(124):     645a5058 645a5044 00000050 fba373d9 002e37a4  
03-29 17:08:03.007: I/DEBUG(124):     645a5068 fba92504 002e37a4 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     645a5078 00000000 00000000 ffffffff 00000000  
03-29 17:08:03.007: I/DEBUG(124):     645a5088 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     645a5098 63349f80 2e8ebf73 f70980a1 dd73c656  
03-29 17:08:03.007: I/DEBUG(124): memory near r5:
03-29 17:08:03.007: I/DEBUG(124):     400ae208 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     400ae218 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     400ae228 4d17f9e5 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     400ae238 00000007 00000002 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     400ae248 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     400ae258 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     400ae268 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     400ae278 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     400ae288 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     400ae298 00000000 00000000 00824591 00000000  
03-29 17:08:03.007: I/DEBUG(124):     400ae2a8 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     400ae2b8 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     400ae2c8 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     400ae2d8 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     400ae2e8 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     400ae2f8 00000000 00000000 00000000 00004000  
03-29 17:08:03.007: I/DEBUG(124): memory near r6:
03-29 17:08:03.007: I/DEBUG(124):     645a4fb4 75006700 61006c00 00007200 00000018  
03-29 17:08:03.007: I/DEBUG(124):     645a4fc4 000001db 67590368 00000027 645a4798  
03-29 17:08:03.007: I/DEBUG(124):     645a4fd4 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     645a4fe4 00000000 64b975b4 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     645a4ff4 645a4fe4 645a4fe4 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     645a5004 00000000 00000000 645a4ffc 645a4ffc  
03-29 17:08:03.007: I/DEBUG(124):     645a5014 00000000 6494ada8 40058390 00000000  
03-29 17:08:03.007: I/DEBUG(124):     645a5024 00000000 00000000 00000000 00000000  
03-29 17:08:03.007: I/DEBUG(124):     645a5034 00000000 00000000 00000000 00000001  
03-29 17:08:03.007: I/DEBUG(124):     645a5044 312e3239 312e3232 322e3632 00003135  
03-29 17:08:03.017: I/DEBUG(124):     645a5054 645a5052 645a5044 00000050 fba373d9  
03-29 17:08:03.017: I/DEBUG(124):     645a5064 002e37a4 fba92504 002e37a4 00000000  
03-29 17:08:03.017: I/DEBUG(124):     645a5074 00000000 00000000 00000000 ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     645a5084 00000000 00000000 00000000 00000000  
03-29 17:08:03.017: I/DEBUG(124):     645a5094 00000000 63349f80 2e8ebf73 f70980a1  
03-29 17:08:03.017: I/DEBUG(124):     645a50a4 dd73c656 7bc5b2b6 00000001 00000000  
03-29 17:08:03.017: I/DEBUG(124): memory near r7:
03-29 17:08:03.017: I/DEBUG(124):     6753545c 632f6c61 6d6f7268 2f6d7569 676f6f67  
03-29 17:08:03.017: I/DEBUG(124):     6753546c 7275656c 72732f6c 75672f63 632e6c72  
03-29 17:08:03.017: I/DEBUG(124):     6753547c 68430063 206b6365 6c696166 203a6465  
03-29 17:08:03.017: I/DEBUG(124):     6753548c 736c6166 00202e65 69797254 7420676e  
03-29 17:08:03.017: I/DEBUG(124):     6753549c 6567206f 68742074 70732065 6f206365  
03-29 17:08:03.017: I/DEBUG(124):     675354ac 6e612066 766e6920 64696c61 4c525520  
03-29 17:08:03.017: I/DEBUG(124):     675354bc 68430021 206b6365 6c696166 203a6465  
03-29 17:08:03.017: I/DEBUG(124):     675354cc 73726170 2e5f6465 68746170 6e656c2e  
03-29 17:08:03.017: I/DEBUG(124):     675354dc 30203e20 4300202e 6e6f6e61 6c616369  
03-29 17:08:03.017: I/DEBUG(124):     675354ec 74617020 6f662068 65722072 73657571  
03-29 17:08:03.017: I/DEBUG(124):     675354fc 73207374 6c756f68 65622064 6e6f6e20  
03-29 17:08:03.017: I/DEBUG(124):     6753550c 706d652d 65007974 72657478 2f6c616e  
03-29 17:08:03.017: I/DEBUG(124):     6753551c 6f726863 6d75696d 6f6f672f 75656c67  
03-29 17:08:03.017: I/DEBUG(124):     6753552c 732f6c72 752f6372 635f6c72 6e6f6e61  
03-29 17:08:03.017: I/DEBUG(124):     6753553c 746e695f 616e7265 00682e6c 656c6966  
03-29 17:08:03.017: I/DEBUG(124):     6753554c 002f2f3a 65747865 6c616e72 7268632f  
03-29 17:08:03.017: I/DEBUG(124): memory near r8:
03-29 17:08:03.017: I/DEBUG(124):     00098af4 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098b04 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098b14 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098b24 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098b34 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098b44 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098b54 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098b64 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098b74 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098b84 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098b94 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098ba4 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098bb4 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098bc4 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098bd4 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098be4 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124): memory near r9:
03-29 17:08:03.017: I/DEBUG(124):     00098348 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098358 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098368 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098378 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098388 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098398 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     000983a8 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     000983b8 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     000983c8 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     000983d8 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     000983e8 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     000983f8 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098408 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098418 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098428 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124):     00098438 ffffffff ffffffff ffffffff ffffffff  
03-29 17:08:03.017: I/DEBUG(124): memory near sl:
03-29 17:08:03.017: I/DEBUG(124):     400ae208 00000000 00000000 00000000 00000000  
03-29 17:08:03.017: I/DEBUG(124):     400ae218 00000000 00000000 00000000 00000000  
03-29 17:08:03.017: I/DEBUG(124):     400ae228 4d17f9e5 00000000 00000000 00000000  
03-29 17:08:03.017: I/DEBUG(124):     400ae238 00000007 00000002 00000000 00000000  
03-29 17:08:03.017: I/DEBUG(124):     400ae248 00000000 00000000 00000000 00000000  
03-29 17:08:03.017: I/DEBUG(124):     400ae258 00000000 00000000 00000000 00000000  
03-29 17:08:03.017: I/DEBUG(124):     400ae268 00000000 00000000 00000000 00000000  
03-29 17:08:03.017: I/DEBUG(124):     400ae278 00000000 00000000 00000000 00000000  
03-29 17:08:03.017: I/DEBUG(124):     400ae288 00000000 00000000 00000000 00000000  
03-29 17:08:03.017: I/DEBUG(124):     400ae298 00000000 00000000 00824591 00000000  
03-29 17:08:03.017: I/DEBUG(124):     400ae2a8 00000000 00000000 00000000 00000000  
03-29 17:08:03.017: I/DEBUG(124):     400ae2b8 00000000 00000000 00000000 00000000  
03-29 17:08:03.027: I/DEBUG(124):     400ae2c8 00000000 00000000 00000000 00000000  
03-29 17:08:03.027: I/DEBUG(124):     400ae2d8 00000000 00000000 00000000 00000000  
03-29 17:08:03.027: I/DEBUG(124):     400ae2e8 00000000 00000000 00000000 00000000  
03-29 17:08:03.027: I/DEBUG(124):     400ae2f8 00000000 00000000 00000000 00004000  
03-29 17:08:03.027: I/DEBUG(124): memory near ip:
03-29 17:08:03.027: I/DEBUG(124):     673de648 674f4a8d 674f3bd7 674f3ec9 674f3e11  
03-29 17:08:03.027: I/DEBUG(124):     673de658 674f3f8d 674f3d25 674f4229 6747d9b1  
03-29 17:08:03.027: I/DEBUG(124):     673de668 674f4085 67461c7b 67461ccb 67448111  
03-29 17:08:03.027: I/DEBUG(124):     673de678 6746da69 67486419 674f3d95 40947341  
03-29 17:08:03.027: I/DEBUG(124):     673de688 674835f5 674f4f89 67461cb3 67440915  
03-29 17:08:03.027: I/DEBUG(124):     673de698 674360bd 67461ca1 674f424b 674753a1  
03-29 17:08:03.027: I/DEBUG(124):     673de6a8 67435e8d 6747ee75 67435913 674f4d43  
03-29 17:08:03.027: I/DEBUG(124):     673de6b8 674f5669 674f52bd 67447141 67447175  
03-29 17:08:03.027: I/DEBUG(124):     673de6c8 674f46ed 674f51cd 674f5245 6743dcc3  
03-29 17:08:03.027: I/DEBUG(124):     673de6d8 6743dcc3 674f5ddd 674f5e75 674f5d51  
03-29 17:08:03.027: I/DEBUG(124):     673de6e8 674be7f1 67453e79 674bec19 67487191  
03-29 17:08:03.027: I/DEBUG(124):     673de6f8 67435dd1 674f43d1 674f435d 674f3a75  
03-29 17:08:03.027: I/DEBUG(124):     673de708 6748727d 674f3a39 674bf94d 674c0959  
03-29 17:08:03.027: I/DEBUG(124):     673de718 401b3c41 4030f884 4035a504 402f4090  
03-29 17:08:03.027: I/DEBUG(124):     673de728 4035df6c 40624a35 6747334f 67470521  
03-29 17:08:03.027: I/DEBUG(124):     673de738 6747313d 674ceda5 402fc67c 402fc528  
03-29 17:08:03.027: I/DEBUG(124): memory near sp:
03-29 17:08:03.027: I/DEBUG(124):     69914080 64930890 400ae228 00000000 00000000  
03-29 17:08:03.027: I/DEBUG(124):     69914090 00000002 6747f89f df0027ad 00000000  
03-29 17:08:03.027: I/DEBUG(124):     699140a0 64488630 674b3a35 675938b8 400ae228  
03-29 17:08:03.027: I/DEBUG(124):     699140b0 00000000 674d25a5 00000000 00000000  
03-29 17:08:03.027: I/DEBUG(124):     699140c0 40058420 699140f4 69917ea0 674480c1  
03-29 17:08:03.027: I/DEBUG(124):     699140d0 00000000 69917dd0 400ae228 4d17f9e5  
03-29 17:08:03.027: I/DEBUG(124):     699140e0 00000013 6749bc15 6758fbf0 649f2400  
03-29 17:08:03.027: I/DEBUG(124):     699140f0 649f2400 00098b14 00098369 400ae228  
03-29 17:08:03.027: I/DEBUG(124):     69914100 00000000 674b2a1f c0000000 0000000c  
03-29 17:08:03.027: I/DEBUG(124):     69914110 40058404 00000000 c0000000 00000018  
03-29 17:08:03.027: I/DEBUG(124):     69914120 00000000 00000000 00000023 400743c3  
03-29 17:08:03.027: I/DEBUG(124):     69914130 000006a0 69914178 40058404 4d17f9e5  
03-29 17:08:03.027: I/DEBUG(124):     69914140 00000000 00000000 64930890 4d17f9e5  
03-29 17:08:03.027: I/DEBUG(124):     69914150 645a4fc8 675938b8 6754eefa 674b63a7  
03-29 17:08:03.027: I/DEBUG(124):     69914160 00000001 69914184 00000000 64b95fe0  
03-29 17:08:03.027: I/DEBUG(124):     69914170 00000000 674aff03 64570600 674b11d5  
03-29 17:08:03.027: I/DEBUG(124): code around pc:
03-29 17:08:03.027: I/DEBUG(124):     674b3e10 f8d4fddd 6da301a8 f8d4b150 f8d411c8  
03-29 17:08:03.027: I/DEBUG(124):     674b3e20 91002194 f8d46819 f0173198 e00efb71  
03-29 17:08:03.027: I/DEBUG(124):     674b3e30 21016818 6198f8d4 21c8f8d4 96006803  
03-29 17:08:03.027: I/DEBUG(124):     674b3e40 f8d49201 699e219c 3194f8d4 992b47b0  
03-29 17:08:03.027: I/DEBUG(124):     674b3e50 4299682b f780d001 b02ceab8 bf00bd70  
03-29 17:08:03.027: I/DEBUG(124):     674b3e60 000de996 000de98e 0009b12c 0009b1c8  
03-29 17:08:03.027: I/DEBUG(124):     674b3e70 4604b5f0 b0d54e3f 447e4d3f 447d6836  
03-29 17:08:03.027: I/DEBUG(124):     674b3e80 6833682d 2b016828 d1159053 f9e4f793  
03-29 17:08:03.027: I/DEBUG(124):     674b3e90 dc112803 b9796da1 f44f4938 23036297  
03-29 17:08:03.027: I/DEBUG(124):     674b3ea0 4479a803 ff14f793 a8044935 f7824479  
03-29 17:08:03.027: I/DEBUG(124):     674b3eb0 a803f89a fce8f793 2a016832 f793d116  
03-29 17:08:03.027: I/DEBUG(124):     674b3ec0 2803f9cb f8d4dc12 b17e60e8 f240492d  
03-29 17:08:03.027: I/DEBUG(124):     674b3ed0 230342b9 4479a82b fefaf793 a82c492a  
03-29 17:08:03.027: I/DEBUG(124):     674b3ee0 f7824479 a82bf880 fccef793 21236da0  
03-29 17:08:03.027: I/DEBUG(124):     674b3ef0 21026061 68036800 47b8695f 20104607  
03-29 17:08:03.027: I/DEBUG(124):     674b3f00 ea56f780 46064639 fd94f7c9 1d30b116  
03-29 17:08:03.027: I/DEBUG(124): code around lr:
03-29 17:08:03.027: I/DEBUG(124):     6747f87c 690b6801 bd084798 bd082002 f7ffb508  
03-29 17:08:03.027: I/DEBUG(124):     6747f88c f1d0fff4 bf380001 bd082000 f7ffb508  
03-29 17:08:03.027: I/DEBUG(124):     6747f89c 2801ffec 2000bfcc bd082001 4604b570  
03-29 17:08:03.027: I/DEBUG(124):     6747f8ac 4616460d 6021b911 e0056061 68c36808  
03-29 17:08:03.027: I/DEBUG(124):     6747f8bc 47984608 60606026 462060a5 0000bd70  
03-29 17:08:03.027: I/DEBUG(124):     6747f8cc b5104b06 4604447b f8403308 f7b63b0c  
03-29 17:08:03.027: I/DEBUG(124):     6747f8dc 4620f8e7 ff58f7ed bd104620 0010ffe4  
03-29 17:08:03.027: I/DEBUG(124):     6747f8ec 4604b510 ffecf7ff f7b44620 4620ed56  
03-29 17:08:03.037: I/DEBUG(124):     6747f8fc 0000bd10 4604b570 460d3004 f7c14616  
03-29 17:08:03.037: I/DEBUG(124):     6747f90c 4b06f803 000cf104 463160a5 3308447b  
03-29 17:08:03.037: I/DEBUG(124):     6747f91c f7be6023 4620f8dc bf00bd70 0010ff9c  
03-29 17:08:03.037: I/DEBUG(124):     6747f92c 4606b570 b08e4c17 6824447c 900d6820  
03-29 17:08:03.037: I/DEBUG(124):     6747f93c f7b42020 4605ed38 f8c4f7de a8014912  
03-29 17:08:03.037: I/DEBUG(124):     6747f94c f7e04479 6832fdfd 4628a901 fe94f7df  
03-29 17:08:03.037: I/DEBUG(124):     6747f95c f7b6a801 490df8a5 4479a807 fdf0f7e0  
03-29 17:08:03.037: I/DEBUG(124):     6747f96c 46286872 f7dfa907 a807fe87 f898f7b6  
03-29 17:08:03.157: I/BootReceiver(450): Copying /data/tombstones/tombstone_04 to DropBox (SYSTEM_TOMBSTONE)
03-29 17:08:03.177: W/InputDispatcher(450): channel '427086e8 com.mkyong.android/com.mkyong.android.FirstActivity (server)' ~ Consumer closed input channel or an error occurred.  events=0x9
03-29 17:08:03.177: E/InputDispatcher(450): channel '427086e8 com.mkyong.android/com.mkyong.android.FirstActivity (server)' ~ Channel is unrecoverably broken and will be disposed!
03-29 17:08:03.217: D/Zygote(126): Process 30401 terminated by signal (11)
03-29 17:08:03.247: D/dalvikvm(450): JIT code cache reset in 5 ms (1048464 bytes 232/1)
03-29 17:08:03.247: D/dalvikvm(450): GC_FOR_ALLOC freed 1449K, 19% free 19851K/24320K, paused 83ms, total 85ms
03-29 17:08:03.247: W/InputDispatcher(450): Attempted to unregister already unregistered input channel '427086e8 com.mkyong.android/com.mkyong.android.FirstActivity (server)'
03-29 17:08:03.247: I/WindowState(450): WIN DEATH: Window{427086e8 u0 com.mkyong.android/com.mkyong.android.FirstActivity}
03-29 17:08:03.247: I/ActivityManager(450): Process com.mkyong.android (pid 30401) has died. 
```

* * *

我的代码如下

WebView mWebView；

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);

    Button btn1 = (Button) findViewById(R.id.btn1);
    btn1.setText("First Activity");
    btn1.setOnClickListener(this);
    btn1 = null;

    mWebView = (WebView) findViewById(R.id.webview);
    mWebView.loadUrl("http://us.cnn.com/?hpt=ed_US");
}

public void onClick(View v) {
        mWebView.reload();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T07:17:50.310

如果您在您的应用程序中启用了硬件加速，可能会导致此问题。您可以通过此代码为 WebView 禁用硬件加速 webView.setLayerType(View.LAYER_TYPE_SOFTWARE, null); Holp 这可以帮助你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:28:10.393

请尝试像这样再次调用它。

```
public void onClick(View v) {
    yourActivtyName.this.mWebView.loadUrl("http://us.cnn.com/?hpt=ed_US");
} 
```

# php - 选择max win系列：sql查询

> ID：15702729
> 
> 赞同：0
> 
> 时间：2013-03-29T11:56:27.233
> 
> 标签：php, mysql, sql

MySQL

我有表，我存储 user_matches 并且结果：

```
n_match  id_user  id_score
1        55       1
1        66       0 
```

这意味着，“id=55 的用户赢得了 id=1 的用户与 id=66 的用户的匹配”。

因此，我们有 10、100、1000 场比赛，用户赢或输给对手：

```
n_match  id_user  id_score
1        55       1 (win)
1        66       0
2        55       0 (lose)
2        77       1
3        55       1 (win)
3        77       0
4        55       1 (win)
4        77       0
5        55       1 (win)
5        77       0 
```

好的。如您所见，用户赢得了 3 场比赛而没有输掉（获胜系列赛）——这就是我的查询所需要的。

问题：我怎样才能从这张表中获得最长系列的获胜比赛？是否可以在 sql 端或服务器端不循环 - 仅来自查询？

谢谢。

**编辑：**我刚刚理解的解决方案之一， - 将所有匹配项作为字符串获取，例如 001010101111010101011，然后将其拆分为带有分隔符 '0' -> [1, 1, 1, 1111, ...] 的字符串数组，然后取最长的字符串长度。

但在这种情况下，我必须编写服务器端代码 =\ 这不好，但 mb 最快。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:22:58.743

最好的方法是计算任何比赛的累计失败次数。对于一系列获胜，此值是恒定的。然后，您可以使用 group by 来获取最长的此类序列的长度。

此版本的查询与数据库无关。它使用子查询来获取计数：

```
select user_id, max(NumWinsInRow)
from (select user_id, cumlosses, count(*)-1 as NumWinsInRow
      from (select m.*,
                   (select sum(case when id_score = 0 then 1 else 0 end) from user_matches m2 where m2.id_user = m.id_user and m2.n_match <= m.n_match
                   ) as CumLosses
            from user_matches m
           ) t
      group by cumlosses, user_id
     ) t
group by user_id 
```

如果你有一个索引，这个查询应该运行得更快`user_matches(id_user, n_math, id_score)`。

# ios - 当应用程序在后台运行时显示 UIAlert？

> ID：15702730
> 
> 赞同：2
> 
> 时间：2013-03-29T11:56:28.170
> 
> 标签：ios, objective-c

```
UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"open app" message:@" backgr..." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles:nil];

[alertView show]; 
```

应用程序在后台运行时如何显示警报？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T11:57:55.020

[`UILocalNotification`](http://developer.apple.com/library/ios/#documentation/iPhone/Reference/UILocalNotification_Class/Reference/Reference.html)当您的应用在后台时使用。

```
UILocalNotification *notification = [[UILocalNotification alloc] init];
notification.alertBody = @"Your message";
notification.alertAction = @"Open app";
[[UIApplication sharedApplication] presentLocalNotificationNow:notification]; 
```

# jquery - 滑动切换 JQuery 的多个实例

> ID：15702733
> 
> 赞同：1
> 
> 时间：2013-03-29T11:56:32.847
> 
> 标签：jquery, html, slidetoggle

我有 3 个 div 用于在我的网站页面顶部显示导航。全部使用JQuery函数：

```
$('#div_button').click( function() {
        $('#div_nav').slideToggle();
); 
```

问题是，我可以得到一个场景，我得到 2 个滑动切换/ div 彼此叠加，这并不好。当我单击一个按钮启动 slideToggle 时，我想删除当前显示的任何其他 div。

描述问题的图片：

![2 DIVS 在彼此之上](../Images/d7b80c4ecaa0919cff79146a5cfb84c1.png)

任何人都可以提出解决方案吗？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:00:19.347

`hide()`所有其他`div`优先

```
$('#div_button').click( function() {
    $('.otherDivClass').hide(); 
   $('#div_nav').slideToggle();
); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:02:08.517

使用 Accordion 之类的插件可以让您应用您所追求的功能，而无需向标题和内容元素添加类。

[http://api.jqueryui.com/accordion/](http://api.jqueryui.com/accordion/)

如果您确信需要坚持使用 ID，另一种方法是编写 3 个单独的单击函数，分别打开和关闭相关元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T13:25:42.303

我已经设法找到解决这个问题的方法。基本上你需要使用这个函数来等待其他slideToggles或者slideUPs完成：

```
$('#tcd-home-view-nav').slideUp(function(){
    // Animation complete.
    $('#tcd-home-edit-nav').slideToggle();
}); 
```

欢呼人们帮助我解决这个问题。克里斯

# java - 如何在我的代码中解决 NullPointerException？

> ID：15702735
> 
> 赞同：1
> 
> 时间：2013-03-29T11:56:39.143
> 
> 标签：java, exception, nullpointerexception, awt

```
import java.awt.*;
import java.awt.event.*;
public class Project_notepad 
{
    private Frame f;        //basic frame
    public MenuBar mb;      //menubar declaration
    private Menu File, Edit, Format,View, Findit;
    private MenuItem new_file,new_window,open,save,save_as, close, cut, copy,     paste, case_convert, indent,font,style,size,underline,italic,bold,finds,     incremental_find,replace;
    private CheckboxMenuItem status_bar,word_wrap,hide_menu_bar,full_screen;
    public Project_notepad()
    {
        f=new Frame();
        Dimension screenSize = Toolkit.getDefaultToolkit().getScreenSize();             class object for setting max screen size
        f.setBounds(0,0,screenSize.width, screenSize.height);                       
        mb=new MenuBar();                                       //menu bar declaration
         File=new Menu("File");
        Edit=new Menu("Edit");
        Format=new Menu("Format");
        View=new Menu("View");
        Findit=new Menu("Find");

        new_file=new MenuItem("new file");                      //menu items declaration
        new_window=new MenuItem("new window");
        open=new MenuItem("open");
        save=new MenuItem("save");
        save_as=new MenuItem("save as");
        close=new MenuItem("close");
        cut=new MenuItem("cut");
        copy=new MenuItem("copy");
        paste=new MenuItem("paste");
        case_convert=new MenuItem("case convert");
        indent=new MenuItem("indent");
        font=new MenuItem("font");
        style=new MenuItem("style");
        size=new MenuItem("size");
        underline=new MenuItem("underline");
        italic=new MenuItem("italic");
        bold=new MenuItem("bold");
        incremental_find=new MenuItem("incremental_find");
        replace=new MenuItem("replace");

        status_bar=new CheckboxMenuItem("status bar");                                  //chechkbox items declaration
        word_wrap=new CheckboxMenuItem("word wrap");
        hide_menu_bar=new CheckboxMenuItem("hide menu bar");
        full_screen=new CheckboxMenuItem("full screen");

        File.add(new_file);                                                             //adding items to menu bar
        File.add(new_window);
        File.add(open);
        File.add(save);
        File.add(save_as);
        File.add(close);
        Edit.add(copy);
        Edit.add(paste);
        Edit.add(case_convert);
        Edit.add(indent);
         Format.add(font);
        Format.add(style);
        Format.add(size);
        Format.add(underline);
        Format.add(italic);
        Format.add(bold);
        Findit.add(finds);
        Findit.add(incremental_find);
        Findit.add(replace);
        View.add(status_bar);
        View.add(word_wrap);
        View.add(hide_menu_bar);
    View.add(full_screen);

    mb.add(File);
    mb.add(Edit);
    mb.add(Format);
    mb.add(View);
    mb.add(Findit);

    f.setMenuBar(mb);
    f.setVisible(true);
}

      public static void main(String args[])
     {
         Project_notepad pr=new Project_notepad();
     }
 } 
```

实际上，我正处于开发用于在 java 中练习的记事本的初始阶段，但得到 NullPointerException 为

```
at java.awt.Menu.add(Menu.java:262)
at Project_notepad.<init><Project_notepad.java:65>
at Project_notepad.main<Project_notepad.java:92> 
```

在这里，project_notepad 是我的文件以及我的类的名称。我搜索了它的原因，尝试调用空对象的实例方法，尝试访问或修改空对象的特定字段，尝试获取此类空对象的长度作为数组。但无法链接到任何导致我的代码出错的原因。需要帮助。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:02:00.127

在第 65 行添加“finds”变量时，您还没有初始化它。将其添加到上面的初始化列表中：

```
finds = new MenuItem("finds"); 
```

另外，获得更好的IDE。大多数应该告诉您是否还没有初始化某些东西，并且您可以在编译之前捕获它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T05:56:34.240

You can also try the following tool if you want to do it for the entire code base: [Find Bugs](http://findbugs.sourceforge.net/)

# iphone - 从iphone中的固定宽度找到UIImage的比例高度

> ID：15702737
> 
> 赞同：0
> 
> 时间：2013-03-29T11:56:46.923
> 
> 标签：iphone, ios, ipad, uiimageview, uiimage

[您好，我的问题与此问题](https://stackoverflow.com/questions/4613443/calculate-the-standard-proportion-of-the-image-height-with-fixed-image-width-in)非常相似

我正在以网格方式排列图像。这个网格有三列，每列的固定宽度为 100px，我想用这个宽度缩放 UIImage。

为了更好的解释，我附上了一张图片

![在此处输入图像描述](../Images/f2ae0048142901b47e2e0a908e9aed4c.png)

如图所示，我想找到高度。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:45:44.680

如果可能的话，我建议你使用[`PSCollectionView`](http://www.cocoacontrols.com/controls/pscollectionview)这种类型的显示器。

# javascript - 正则表达式创建 URL 白名单？

> ID：15702743
> 
> 赞同：0
> 
> 时间：2013-03-29T11:57:14.393
> 
> 标签：javascript, jquery, regex

处理脚本以定位外部站点 URL 并提供类以触发对话。需要排除（白名单）某些 HREF。mailto 和 tel 以及内部 URL 的异常工作正常，但尝试添加特定 URL 名称不起作用。有什么建议么？有没有更好的方法？

```
jQuery(document).ready(function ($) {

$.expr[":"].external = function (a) {
    return !a.href.match(/^mailto\:/) && !a.href.match(/^tel\:/) && !a.href.match(/http\/\/\:\mail\.google\.com/) && a.hostname != location.hostname
};
$("a:external").addClass("ext_link"); 
```

});

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:06:13.060

也许

```
return !/^(mailto|tel):|http:\/\/mail\.google\.com/.test(a.href) &&
    a.hostname != location.hostname 
```

# java - PgaSocketWriteAllHdipc: hd_ipc_send() 失败 hd_ipc_send: 未连接

> ID：15702746
> 
> 赞同：1
> 
> 时间：2013-03-29T11:57:24.473
> 
> 标签：java, android, eclipse, logcat, android-logcat

我刚刚安装了最新版本的`SDK`and `ADT`。当我打开 logcat 时，我发现整个 logcat 都充满了以下消息。我仍然没有在 eclipse 上启动任何项目！

```
PgaSocketWriteAllHdipc: hd_ipc_send() failed
hd_ipc_send: not connected 
```

我才10分钟这种消息的数量就达到了10000多条，我受够了。请告诉我如何从 logcat 中删除此消息。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-03-29T12:32:59.183

我收到此错误并发现这是`Bluestacks`. `Bluestacks`是`Android emulator`我最近安装的 PC 的。一旦我退出`Bluestacks`（它总是在后台运行），问题就停止了。

**更新：** 如果您真的需要 bluestacks，您可以通过创建 logcat 过滤器来过滤此消息，或者只需转到“系统托盘（显示在右下角，在 Windows 中）然后右键单击 blustack 图标并单击“退出”然后您的问题将解决。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T12:02:31.210

检查此[链接](https://groups.google.com/forum/?fromgroups=#!topic/adt-dev/ISQTL0YxUuY)。看起来它是与模拟器系统映像相关的官方错误。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-05-01T11:40:45.590

我也有同样的问题，但我知道它是由 blustack 创建的，所以请转到“隐藏图标”（显示在右下角）然后右键单击 blustack 图标并单击“退出”，然后您的问题将解决，试试看...

如果有什么问题再问我...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-06T13:51:39.070

Bluestacks 需要关闭（完全）才能使此错误消失。只是为了补充bala的答案，结束所有bluestacks进程很重要。为此，**请查看任务管理器中所有用户的进程**（假设您在 Windows 上）并杀死每个 bluestack 进程。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-11-25T11:13:48.507

卸载蓝叠。就我而言，仅仅停止程序（退出选项）是不够的。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-12-22T13:07:15.337

问题肯定出在 Bluestacks 上。虽然如果您正在考虑卸载，我建议您关闭 Eclipse！LogCat 不能快速适应环境变化，即使在卸载后您也可能会收到该消息。

# jquery - 流体 960 网格 jQuery 幻灯片切换

> ID：15702752
> 
> 赞同：0
> 
> 时间：2013-03-29T11:57:43.930
> 
> 标签：jquery, css, laravel, slidetoggle, 960.gs

我正在为我的网站使用 Fluid 960 Grid，并且我正在使用 jQuery（最新版本）。

我想滑动切换一个 div，它是一个名为 的 div 的子 div `serviceitem1`。这是我的代码：

```
div id="serviceitem1"> strong> Service One /strong>
    div class="services">
        ksdjfslkdjfs
    /div>
/div>

$('#serviceitem1').click(function(eve){
    $(this).children().slideToggle('slow'); 
}); 
```

切换有效，但是当我单击向下滑动时，露出的结果 div 缓慢跳跃并覆盖我单击的第一个 div 元素，并且网站的整个框架似乎略微跳跃。

我尝试在 IE10、Firefox 19 和最新的 Chrome 中查看它，我得到了相同的结果。我正在使用 Windows 8 专业版。

这对任何人都有意义吗？我也使用 Laravel 3.2.11 作为我的框架。Blade会引起任何问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T23:16:59.027

对不起，伙计，

我选择通过在服务 div 上使用 id 并将其作为名为 serviceitem1 的上层 div 的子项完全删除来以简单的方式处理这个问题。这样我就能够拥有动画并且没有这个跳跃问题。但是，如果有人确实提出了答案，如果他们愿意分享答案，我将不胜感激。

鹰奖杯

# python - Python BeautifulSoup 如何获取 HTML 表的索引或索引

> ID：15702753
> 
> 赞同：2
> 
> 时间：2013-03-29T11:57:45.663
> 
> 标签：python, beautifulsoup

```
<TABLE WIDTH="100%"> <TR> <TH scope="row" VALIGN="TOP" ALIGN="LEFT" WIDTH="10%">Inventors:</TH> <TD ALIGN="LEFT" WIDTH="90%">
 <B>Shimada; Masahiro</B> (Shiga, <B>JP</B>) </TD> </TR>
<TR><TH scope="row" VALIGN="TOP" ALIGN="LEFT" WIDTH="10%">Applicant: </TH><TD ALIGN="LEFT" WIDTH="90%"> <TABLE> <TR> <TH scope="column" ALIGN="center">Name</TH> <TH scope="column" ALIGN="center">City</TH> <TH scope="column" ALIGN="center">State</TH> <TH
scope="column" ALIGN="center">Country</TH> <TH scope="column" ALIGN="center">Type</TH> </TR> <TR> <TD> <B><br>Shimada; Masahiro</B> </TD><TD> <br>Shiga </TD><TD ALIGN="center"> <br>N/A </TD><TD ALIGN="center"> <br>JP </TD> </TD><TD ALIGN="left"> </TD>
</TR> </TABLE> </TD></TR>
<TR> <TH scope="row" VALIGN="TOP" ALIGN="LEFT" WIDTH="10%">Assignee:</TH>
<TD ALIGN="LEFT" WIDTH="90%">

<B>Ishida Co., Ltd.</B>
 (Kyoto, 
<B>JP</B>)
<BR>

</TD>
</TR>
       <TR><TH scope="row" VALIGN="TOP" ALIGN="LEFT" WIDTH="10%" NOWRAP>Appl. No.:
       </TH><TD ALIGN="LEFT" WIDTH="90%">
       <B>12/791,478</B></TD></TR>
       <TR><TH scope="row" VALIGN="TOP" ALIGN="LEFT" WIDTH="10%">Filed:
       </TH><TD ALIGN="LEFT" WIDTH="90%">
       <B>June 1, 2010</B></TD></TR>
     </TABLE> 
```

取自 [这个美国专利局 URL](http://patft.uspto.gov//netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&r=2&f=G&l=50&co1=AND&d=PTXT&s1=%22X+ray%22.ABTX.&s2=detect.ABTX.&OS=ABST/%22X+ray%22+AND+ABST/detect&RS=ABST/%22X+ray%22+AND+ABST/detect)。

以上是我需要获取数据的 HTML 表。但是当我使用：

```
trtemp=souptemp.findAll('tr')
PattentInventors=trtemp[7].text.strip()
PattentCompany=trtemp[11].text.strip()
PattentFiledtime=trtemp[13].text.strip() 
```

tr 索引 7,11,13 在所有页面上都不是恒定的。所以我改用这样的 re 模块：

```
souptemp.findAll(text=re.compile("Assi"))[0] 
```

这是为了获取数据，`Assignee: Ishida Co., Ltd. (Kyoto, JP)` 但我无法获取 tr 列表的索引。我怎样才能得到正确的索引 `Assignee: Ishida Co., Ltd. (Kyoto, JP)` 谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:06:09.337

```
In [78]: anchor = soup.findAll(text=re.compile("Assi"))[0]
In [77]: ' '.join(anchor.find_next('td').stripped_strings)
Out[77]: u'Ishida Co., Ltd. (Kyoto, JP )' 
```

* * *

```
import bs4 as bs
import urllib2
import re

url = 'http://patft.uspto.gov//netacgi/nph-Parser?Sect1=PTO2&Sect2=HITOFF&p=1&u=%2Fnetahtml%2FPTO%2Fsearch-bool.html&r=2&f=G&l=50&co1=AND&d=PTXT&s1=%22X+ray%22.ABTX.&s2=detect.ABTX.&OS=ABST/%22X+ray%22+AND+ABST/detect&RS=ABST/%22X+ray%22+AND+ABST/detect'
soup = bs.BeautifulSoup(urllib2.urlopen(url).read())

anchor = soup.findAll(text=re.compile("Assi"))[0]
assignee = ' '.join(anchor.find_next('td').stripped_strings)
print(assignee) 
```

产量

```
Ishida Co., Ltd. (Kyoto, JP ) 
```

# java - 为什么我不能向我的 JComboBox 添加多个数组？

> ID：15702758
> 
> 赞同：1
> 
> 时间：2013-03-29T11:58:09.603
> 
> 标签：java, arrays, swing, user-interface, jcombobox

我正在为一些课程制作一个剧院座位预订系统，但是在创建一个 JComboBox 来帮助用户从总共 197 个座位中选择一个座位时遇到了麻烦。

座位由“Seat”对象表示，这些对象只是一些变量的集合，例如“isBooked”（布尔值）。座位排列成多个座位数组，每个数组代表一排座位，例如A[]、B[]...

我可以轻松地将单个数组添加到 JComboBox 并使其正常工作，但是尝试将更多数组添加到 JComboBox 中的列表失败。我可以一次添加一个座位，但这显然效率低下。

如何向 JComboBox 添加多个数组？即A[1]、A[2]、A[3]...A[14]、B[1]、B[2]...

这是目前我的 JComboBox 的代码，据我所知，这应该可以工作 - 我无法弄清楚为什么它不是。我在 Seat 类中有一个名为 toString() 的方法，它返回代表座位的字符串。

```
DefaultComboBoxModel model = new DefaultComboBoxModel();
            model.addElement(A);
            model.addElement(B);
            model.addElement(C);
            model.addElement(D);
            model.addElement(E);
            model.addElement(F);
            model.addElement(G);
            model.addElement(H);
            model.addElement(J);
            model.addElement(K);
            model.addElement(L);
            JComboBox seatCombobox = new JComboBox();
            seatCombobox.setModel(model);
            unbookSeatWindow.buttonsPanel.add(seatCombobox); 
```

这段代码的结果是这样的：[http://pasteboard.co/1eej5Be1.png](http://pasteboard.co/1eej5Be1.png) 在 JComboBox 中是代表每个数组的随机代码（我忘记了这个名称），但没有代表数组中的每个单独座位。JComboBox 总共应该有 197 个条目

所有帮助将不胜感激。

正如建议的那样，我尝试使用

```
`allSeats = ArrayUtils.addAll(A, B, C, D, E, F, G, H, J, K, L);` 
```

但 NetBeans 告诉我将其更改为

```
`allSeats = (Seat[]) ArrayUtils.addAll(A, B, C, D, E, F, G, H, J, K, L);` 
```

NetBeans 然后说一切都很好，但是当我尝试运行程序时，我得到了这个异常：

> 线程“main”中的 BlException java.lang.IllegalArgumentException：无法将 java.lang.Object 存储在 BookingsSystem.main（BookingsSystem. java:267) 由: java.lang.ArrayStoreException at java.lang.System.arraycopy(Native Method) at org.apache.commons.lang3.ArrayUtils.addAll(ArrayUtils.java:3459) ... 1 个 Java 结果: 1

第 267 行是上面的行

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:02:41.783

您可以使用[ArraysUtil.addAll()](http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ArrayUtils.html#addAll%28T%5B%5D,%20T...%29)将所有数组合并为一个，然后将单个数组添加到`JComboBox`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T12:07:24.817

使用@Apurv 建议的方法组合数组。

```
Seat[] seats = ArrayUtils.addAll(A, B, C); 
```

像这样创建您的 JComboBox：

```
JComboBox seatCombobox = new JComboBox(seats); 
```

这将使用默认模型和选择的第一个项目创建一个新的 JComboBox

# javascript - $(document).ready 和编写打开的 jQuery 语句之间的区别

> ID：15702760
> 
> 赞同：2
> 
> 时间：2013-03-29T11:58:18.557
> 
> 标签：javascript, jquery

编写代码有和没有有什么区别`$(document).ready`？

例如：

```
$(document).ready(function() {
    $("#button").click(function() {
        //Code
    });
}); 
```

和：

```
$("#button").click(function() {
    //Code
}); 
```

和 ：

```
 <input id="button" type="button" value="Cancel" onclick="hidedropdown()" />

    function hidedropdown() {
        //Code
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T11:59:08.250

在第一种情况下，在 DOM 准备好之前不会执行代码。

请参阅[文档](http://api.jquery.com/ready/)：

> 传递给 .ready() 的处理程序保证在 DOM 准备好后执行，因此这通常是附加所有其他事件处理程序和运行其他 jQuery 代码的最佳位置。

如果您在`script`位于 HTML 开头或标题中的`button`元素中执行第二个代码，则不会找到这些元素并且不会绑定任何事件处理程序。使用`.ready`修复。

出于同样的原因，将脚本放在页面底部（与 相邻`</body>`）也可以解决此问题 - 解析脚本时，HTML 将转换为 DOM，您可以遍历它。

# c# - WatIn Find.By 方法中的谓词

> ID：15702761
> 
> 赞同：1
> 
> 时间：2013-03-29T11:58:18.850
> 
> 标签：c#, watin

在 Watin 脚本中，我想使用条件附加到另一个浏览器 - “新 IE 的句柄不等于当前 IE 的句柄”，这是我的代码：

```
var hwnd = currentIE.hWnd;
var newIE= Browser.AttachTo<IE>(Find.By("hwnd", handle => !handle.Equals(hwnd)  )); 
```

Visual Studio 发出警告：

```
"suspicious comparison: there is no type in the solution which is inherited from both 'string' and 'System.IntPtr' 
```

这里有什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:04:38.323

我不知道 Watin 是什么，但显然`handle`有`hwnd`不同的类型（`string`和`IntPtr`），没有必要将它们与`Equals`.

无论哪个是字符串，您都可以尝试将其转换为`IntPtr`：

```
static IntPtr ParseIntPtr (string s)
{
    s = s.Replace ("0x", "");
    return (IntPtr) int.Parse(s, System.Globalization.NumberStyles.AllowHexSpecifier);
} 
```

（我[从这里](http://social.msdn.microsoft.com/Forums/en-US/csharpgeneral/thread/5cdbae55-2999-43ae-b75f-3f688609004f)采用了方法）。

# android - ViewGroup vs FrameLayout，在其中加载图像

> ID：15702762
> 
> 赞同：1
> 
> 时间：2013-03-29T11:58:20.353
> 
> 标签：android, layout

我有这种情况。我正在创建自定义 GridView。我有一个 ScrollView 并`MyViewGroup`在其中使用`MyViewGroup`extends `ViewGroup`。我想加载图像。对于每个图像，我使用一个单元格，其中 `RelativeLayout`包含 ImageView。像这样

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:scaleType="fitXY"
    android:src="@drawable/ic_launcher" /> 
```

问题是单元格被正确加载，但图像没有被加载。`MyViewGroup`但是，如果我从扩展`FrameLayout`而不是`ViewGroup`它可以正常工作。但我必须使用而`ViewGroup`不是`FrameLayout`我只覆盖`OnLayout`.`MyViewGroup`

所以我的问题是我怎样才能使图像正确加载使用`ViewGroup`，什么属性或属性`FrameLayout`有，没有`ViewGroup`？

先感谢您。

# android - 通话结束后自动恢复申请

> ID：15702764
> 
> 赞同：0
> 
> 时间：2013-03-29T11:58:24.460
> 
> 标签：android

我尝试在这里拨打电话并且它可以工作，但问题是当我完成通话时，我没有恢复我的视图。它停留在通话列表中......当我点击按钮时返回我的电话它可以回到我想展示的活动......谢谢:)

```
@Override
public void onClick(View arg0) {

    if (arg0 == btn_ajout) {
         Intent i=new Intent(Docteur_gestion.this, AjoutDocActivity.class);
         startActivity(i);
    }

    if(arg0 == btn_appel) {
         Intent callIntent = new Intent(Intent.ACTION_CALL);
         callIntent.setData(Uri.parse("tel:"+global_txt_tel_doc));
         startActivity(callIntent);       
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:12:14.543

您需要`phoneStateListener`按如下方式实现：

```
public class MainActivity extends Activity {

    final Context context = this;
    private Button button;

    public void onCreate(Bundle savedInstanceState) {

        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        button = (Button) findViewById(R.id.buttonCall);

        // add PhoneStateListener
        PhoneCallListener phoneListener = new PhoneCallListener();
        TelephonyManager telephonyManager = (TelephonyManager) this
            .getSystemService(Context.TELEPHONY_SERVICE);
        telephonyManager.listen(phoneListener,PhoneStateListener.LISTEN_CALL_STATE);

        // add button listener
        button.setOnClickListener(new OnClickListener() {

            @Override
            public void onClick(View arg0) {

                Intent callIntent = new Intent(Intent.ACTION_CALL);
                callIntent.setData(Uri.parse("tel:0377778888"));
                startActivity(callIntent);

            }

        });

    }

    //monitor phone call activities
    private class PhoneCallListener extends PhoneStateListener {

        private boolean isPhoneCalling = false;

        String LOG_TAG = "LOGGING 123";

        @Override
        public void onCallStateChanged(int state, String incomingNumber) {

            if (TelephonyManager.CALL_STATE_RINGING == state) {
                // phone ringing
                Log.i(LOG_TAG, "RINGING, number: " + incomingNumber);
            }

            if (TelephonyManager.CALL_STATE_OFFHOOK == state) {
                // active
                Log.i(LOG_TAG, "OFFHOOK");

                isPhoneCalling = true;
            }

            if (TelephonyManager.CALL_STATE_IDLE == state) {
                // run when class initial and phone call ended, 
                // need detect flag from CALL_STATE_OFFHOOK
                Log.i(LOG_TAG, "IDLE");

                if (isPhoneCalling) {

                    Log.i(LOG_TAG, "restart app");

                    // restart app
                    Intent i = getBaseContext().getPackageManager()
                        .getLaunchIntentForPackage(
                            getBaseContext().getPackageName());
                    i.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    startActivity(i);

                    isPhoneCalling = false;
                }

            }
        }
    }

} 
```

清单中需要两个权限

```
<uses-permission android:name="android.permission.READ_PHONE_STATE" /> 
```

和

```
<uses-permission android:name="android.permission.CALL_PHONE" /> 
```

我在这个[链接上找到了这个解决方案](http://www.mkyong.com/android/how-to-make-a-phone-call-in-android/)

# compiler-construction - 如何扩展 ELF 二进制文件

> ID：15702768
> 
> 赞同：1
> 
> 时间：2013-03-29T11:58:47.937
> 
> 标签：compiler-construction, linker, binary, elf

我正在编写一个小型仪器工具。我必须在二进制文件中插入检测例程。一个好的方法应该是将这些例程插入到单独的代码段和单独的数据段中，您能解释一下如何实现这一点吗？此外，如何修改原始文件中代码段的大小？

最好的，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2015-08-16T14:17:35.840

在 Shaun Clowes 的 Black Hat 演讲中，Shaun 采用了两种策略来修改 ELF 可执行文件：

*   在文件补丁中 - 通过扩展段来做到这一点

*   在核心补丁中（即时） - 通过利用由于段对齐而可用的内存空间来做到这一点。

它被称为“Black Hat USA 2002 - Fixing/Making Holes in Binaries”（Youtube）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T17:01:05.257

> 我必须在二进制文件中插入检测例程。一个好的方法应该是将这些例程插入到单独的代码段和单独的数据段中

什么是`binary file`? 为可重定位 ( ) 目标文件执行此操作与为完全链接的可执行文件 ( ) 或共享库 ( ) 执行此操作之间存在*很大*差异。`ET_REL``ET_EXEC``ET_DYN`

> 你能解释一下如何做到这一点吗？

对于 an `ET_REL`，它应该相当简单：您读取文件头，它指向节头，它告诉您节的位置`.data`和`.text`位置。然后，您编写一个新文件，扩展您想要的部分，复制其他所有内容，并调整部分标题以反映新的部分偏移量和大小。

对于`ET_DYN`or `ET_EXEC`，这个问题很可能*太难了*：你需要调整重定位表、哈希表、程序头；保持所有结构自洽并正确对齐。

# ios - 为 UITableView 指定 UITableViewRowAnimationNone 时出现行动画

> ID：15702770
> 
> 赞同：0
> 
> 时间：2013-03-29T11:58:50.730
> 
> 标签：ios, uitableview

我的 iOS 应用程序的慢速动画模拟器测试表明，无论我如何为该行指定动画，我的表格视图的第一行始终是动画的。

```
 int insertIdx = 0;
            [_allEntries insertObject:entry atIndex:insertIdx];
            [self.tableView insertRowsAtIndexPaths:[NSArray arrayWithObject:[NSIndexPath indexPathForRow:insertIdx inSection:0]]
                                  withRowAnimation:UITableViewRowAnimationNone]; 
```

如何禁用表格视图的所有行动画？这发生在 iOS 6.1 和 5.1 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T22:07:32.757

对于第一行，您可以使用`[self.tableView reloadData]`代替`insertRowsAtIndexPaths`（您也可以对所有其他行使用 reloadData，但 insertRowsAtIndexPaths 更有效）。

# sql - 在编写 SQL 查询时需要帮助

> ID：15702775
> 
> 赞同：3
> 
> 时间：2013-03-29T11:59:09.577
> 
> 标签：sql, select, join

表 -**产品**的产品数量如下

```
╔═══════════╦═════════════╗
║ PRODUCTID ║ PRODUCTNAME ║
╠═══════════╬═════════════╣
║         1 ║ Nokia       ║
║         2 ║ Samsung     ║
║         3 ║ BlackBerry  ║
╚═══════════╩═════════════╝ 
```

表 - **SalesPersonProduct**有以下记录

```
╔═══════════════╦═══════════╗
║ SALESPERSONID ║ PRODUCTID ║
╠═══════════════╬═══════════╣
║ S1            ║         1 ║
║ S1            ║         2 ║
║ S1            ║         3 ║
║ S2            ║         1 ║
║ S3            ║         2 ║
╚═══════════════╩═══════════╝ 
```

编写一个返回已售产品总数的 SQL 查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:01:19.110

这应该很简单。您需要首先加入两个表。下面的查询使用`LEFT JOIN`，因为它包括*左侧*表上的所有记录，`Products`即使它在*右侧*表中有匹配的记录或没有`SalesPersonProduct`。

加入记录后，您现在可以使用`COUNT()`聚合*函数*来计算每个组的记录数。

由于查询正在使用`LEFT JOIN`，所有在表上没有匹配记录的记录都将在列上`SalesPersonProduct`具有值。`zero``TotalSold`

```
SELECT  a.ProductID,
        a.ProductName,
        COUNT(b.ProductID) TotalSold
FROM    Products a
        LEFT JOIN SalesPersonProduct b
            ON a.ProductID = b.ProductID
GROUP   BY  a.ProductID,
            a.ProductName 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/1def8/1)

输出

```
╔═══════════╦═════════════╦═══════════╗
║ PRODUCTID ║ PRODUCTNAME ║ TOTALSOLD ║
╠═══════════╬═════════════╬═══════════╣
║         1 ║ Nokia       ║         2 ║
║         2 ║ Samsung     ║         2 ║
║         3 ║ BlackBerry  ║         1 ║
╚═══════════╩═════════════╩═══════════╝ 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:03:54.050

如果您只想返回销售额的总数，那么您可以通过计算`SalesPersonProduct`表中的行数轻松做到这一点：

```
select count(productid) TotalProducts
from SalesPersonProduct; 
```

但是如果您想要每个产品的总销售额，那么您将需要列`JOIN`上的表格`productId`：

```
select p.productname, count(s.productid) TotalSales
from products p
left join SalesPersonProduct s
  on p.productid = s.productid
group by p.productname 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/bb9c8/2)。

在该`JOIN`版本中，我关闭了一个`LEFT JOIN`将返回所有产品名称的 a，即使它没有销售。在您的示例数据中，如果您添加 Apple 作为产品名称，那么您将返回以下结果并使用 LEFT JOIN：

```
| PRODUCTNAME | TOTALSALES |
----------------------------
|       Apple |          0 |
|  BlackBerry |          1 |
|       Nokia |          2 |
|     Samsung |          2 | 
```

# java - android小部件textview动态更新

> ID：15702777
> 
> 赞同：1
> 
> 时间：2013-03-29T11:59:17.493
> 
> 标签：java, android, widget, textview

我目前正在学习 Android 中的小部件。我希望能够更新我的文本视图，但每次我尝试更新它时 - 我的程序崩溃了。这是我的课：

```
public class DayWidget extends AppWidgetProvider {

    public static CheckDate CheckDate;
    public static EventList EventList;

    public static String EVENT_CLICK = "EventClick";
    public String msg;

    public RemoteViews views;
    public AppWidgetManager manager;
    public Context cntxt;
    public Intent intnt;
    public int[] ids;

    public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds){
        super.onUpdate(context, appWidgetManager, appWidgetIds);

        CheckDate = new CheckDate();
        EventList = new EventList();

        manager = appWidgetManager;
        views = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
        ids = appWidgetIds;

        Intent intent = new Intent(context, DayWidget.class);
        intent.setAction(EVENT_CLICK);
        intent.putExtra("msg", "change");

        PendingIntent actionPendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);

        views.setOnClickPendingIntent(R.id.Event, actionPendingIntent);

        CheckDate.Check();

        views.setTextViewText(R.id.Today, CheckDate.Today);

        manager.updateAppWidget(ids, views);
    }

    public void UpdateWidget(){
        Bundle extras = intnt.getExtras();
        if(extras!=null) {
            AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(cntxt);
            ComponentName AppWidget = new ComponentName(cntxt.getPackageName(), DayWidget.class.getName());
            int[] appWidgetIds = appWidgetManager.getAppWidgetIds(AppWidget);
            views.setTextViewText(R.id.Event, "New text");

            onUpdate(cntxt, appWidgetManager, appWidgetIds);
        }
    }

    public void onReceive(Context context, Intent intent){
        intnt = intent;
        cntxt = context;

        if(EVENT_CLICK.equals(intent.getAction())){
            try{
                msg = intent.getStringExtra("msg");
            }catch(NullPointerException e){
                e.printStackTrace();
            }
            UpdateWidget();
            //Toast toast = Toast.makeText(cntxt, "TEST", Toast.LENGTH_LONG);
            //toast.show();
        }
        super.onReceive(context, intent);
    }
}` 
```

显现

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
package="com.sunmille.day"
android:versionCode="1"
android:versionName="1.0" >

<uses-sdk
    android:minSdkVersion="9"
    android:targetSdkVersion="17" />

<application
    android:allowBackup="true"
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name" >

    <receiver
        android:name="DayWidget">
        <intent-filter>
            <action
                android:name="android.appwidget.action.APPWIDGET_UPDATE" />
            <action
                android:name="android.appwidget.action.ACTION_WIDGET_RECEIVER" /> 
        </intent-filter>
        <meta-data
            android:name="android.appwidget.provider"
            android:resource="@xml/widget_data" />
    </receiver>

</application> 
```

小部件数据

```
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android" 
android:minWidth="294dp"
android:minHeight="72dp"
android:minResizeWidth="294dp"
android:minResizeHeight="72dp"
android:updatePeriodMillis="0"
android:resizeMode="horizontal|vertical"
android:initialLayout="@layout/widget_layout"> 
```

小部件布局

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical"
android:background="@drawable/widget_background" >

  <LinearLayout
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:gravity="center" >

    <TextView
        android:id="@+id/TopText"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Cегодня "
        android:textIsSelectable="false"
        android:textColor="#000000"
        android:textSize="20sp"
        android:textAppearance="?android:attr/textAppearanceLarge" />

    <TextView
        android:id="@+id/Today"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:textIsSelectable="false"
        android:textColor="#000000"
        android:textSize="20sp"
        android:textAppearance="?android:attr/textAppearanceLarge" />    

</LinearLayout>

  <TextView
      android:id="@+id/Event"
      android:layout_width="wrap_content"
      android:layout_height="wrap_content"
        android:textIsSelectable="false"
        android:textColor="#000000"
        android:textSize="20sp"
        android:text="Some event"
      android:textAppearance="?android:attr/textAppearanceLarge" /> 
```

日志：

```
03-29 14:10:15.954: E/AndroidRuntime(4552): java.lang.RuntimeException: Unable to start receiver com.sunmille.day.DayWidget: java.lang.NullPointerException
03-29 14:10:15.954: E/AndroidRuntime(4552):     at com.sunmille.day.DayWidget.UpdateWidget(DayWidget.java:61)
03-29 14:10:15.954: E/AndroidRuntime(4552):     at com.sunmille.day.DayWidget.onReceive(DayWidget.java:77) 
```

正确代码：

```
public class DayWidget extends AppWidgetProvider {

public static CheckDate CheckDate;
public static EventList EventList;

public static String EVENT_CLICK = "EventClick";
public String msg;

public RemoteViews rviews;
public AppWidgetManager manager;
public Context cntxt;
public Intent intnt;
public int[] ids;

public void onUpdate(Context context, AppWidgetManager appWidgetManager, int[] appWidgetIds){
    super.onUpdate(context, appWidgetManager, appWidgetIds);

    CheckDate = new CheckDate();
    EventList = new EventList();

    manager = appWidgetManager;
    RemoteViews views = new RemoteViews(context.getPackageName(), R.layout.widget_layout);
    ids = appWidgetIds;

    Intent intent = new Intent(context, DayWidget.class);
    intent.setAction(EVENT_CLICK);
    intent.putExtra("msg", "change");

    PendingIntent actionPendingIntent = PendingIntent.getBroadcast(context, 0, intent, 0);

    views.setOnClickPendingIntent(R.id.Event, actionPendingIntent);

    CheckDate.Check();

    views.setTextViewText(R.id.Today, CheckDate.Today);

    manager.updateAppWidget(ids, views);
}

public void UpdateWidget(){
    Bundle extras = intnt.getExtras();
    if(extras!=null) {
        AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(cntxt);
        ComponentName AppWidget = new ComponentName(cntxt.getPackageName(), DayWidget.class.getName());
        int[] appWidgetIds = appWidgetManager.getAppWidgetIds(AppWidget);

        rviews = new RemoteViews(AppWidget.getPackageName(), R.layout.widget_layout);
        rviews.setTextViewText(R.id.Event, "New text");

        appWidgetManager.updateAppWidget(appWidgetIds, rviews);
    }
}

public void onReceive(Context context, Intent intent){
    intnt = intent;
    cntxt = context;

    if(EVENT_CLICK.equals(intent.getAction())){
        try{
            msg = intent.getStringExtra("msg");
        }catch(NullPointerException e){
            e.printStackTrace();
        }
        UpdateWidget();
        Toast toast = Toast.makeText(cntxt, "TEST", Toast.LENGTH_LONG);
        toast.show();
    }
    super.onReceive(context, intent);
} 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:23:16.287

`views`类型变量`RemoteViews`为空。您可以在 Logcat 输出中看到它。

# delphi - 如何通过 RTTI 为 TStringGrid.Cells 之类的复杂事物设置/获取属性值？

> ID：15702778
> 
> 赞同：6
> 
> 时间：2013-03-29T11:59:28.620
> 
> 标签：delphi, rtti

我将值存储在 xml 和 lua 代码中，并通过 RTTI 访问对象的属性。

```
var
  o, v: TValue; // o is current object
  a: TStringDynArray; // params as array
  ctx: TRttiContext;
  tt: TRttiType;
  p: TRttiProperty;
  pt: PTypeInfo;
begin
...
  ctx := TRttiContext.Create;
  try
    o := GetLastClassInParams(ctx, obj, a, param_idx);
    tt := ctx.GetType(o.TypeInfo);
    if high(a) < param_idx then
        raise Exception.Create(S_FN + S_NOP);
    p := tt.GetProperty(a[param_idx]);
    if p = nil then
        raise Exception.Create(S_FN + S_PNE + a[param_idx]);
    pt := p.PropertyType.Handle;
    case p.PropertyType.TypeKind of
      tkInteger: v := TValue.From<integer>(integer(Value));
      tkEnumeration: v := TValue.FromOrdinal(pt, GetEnumValue(pt, VarToStr(Value)));
      tkUString: v := TValue.From<string>(VarToStr(Value));
      tkFloat: v := TValue.From<double>(double(Value));
      tkSet: begin
          temp_int := StringToSet(pt, VarToStr(Value));
          TValue.Make(@temp_int, pt, v);
        end;
    else v := TValue.FromVariant(Value);
    end;
    p.SetValue(o.AsObject, v); 
```

我可以使用许多属性`Width`，例如`Lines.Text`TMemo 等，甚至使用`Panels[0].Width`TStatusBar （其中 Panels 是 TCollection 的后代），但类似`TStringGrid.Cells[x, y]`的事情是我无法解决的。有关于 Embarcadero 的帮助和一些功能，比如`GetIndexedProperty`（也许这就是我需要的），但那里的解释和`"Gets Indexed Property"`.

`TStringGrid.Cells[x,y]`如果我将值存储为字符串，如何在运行时设置和获取RTTI `"Cells[1,1]"`？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T12:16:41.463

这是我能想到的使用 RTTI 从字符串网格中获取和设置值的最简单示例：

```
var
  ctx: TRttiContext;
  rttitype: TRttiType;
  rttiprop: TRttiIndexedProperty;
  value: TValue;
....
rttitype := ctx.GetType(StringGrid1.ClassType);
rttiprop := rttitype.GetIndexedProperty('Cells');
value := rttiprop.GetValue(StringGrid1, [1, 1]);
rttiprop.SetValue(StringGrid1, [1, 1], value.ToString + ' hello'); 
```

为了简单起见，我删除了错误检查。我将假设您已经知道如何检查错误。

# jquery - Jquery：带背景的组合框

> ID：15702780
> 
> 赞同：0
> 
> 时间：2013-03-29T11:59:29.513
> 
> 标签：jquery

我准备了 2 张图片来展示我的问题，但是这个网站不允许发布没有声誉的图片。

我花了很多时间试图找到一个简单的基于 jquery 的解决方案，如何创建一个带有背景图像的组合框。我不需要每个的背景图片`<option>`，只需要组合框本身（第一个选项）。

找不到任何简单的东西（没有 ~20-30 KB 的代码）。上面的例子来自一个网站。我检查了 css、js 文件并尝试为我的网站创建相同的文件，但 ir 仅部分工作并且它不显示选定的文本。

我想要这个： [link1](http://i46.tinypic.com/zyf4eb.jpg) 但结果是： [link2](http://i46.tinypic.com/2qncv4k.jpg)

有任何想法吗？

**css**

```
.select2 {
    opacity:0;
    filter:alpha(opacity=0);
    zoom: 1;
}
.select2d {
    background: #fff url('/w18.png') no-repeat center;
    border:1px solid #c4c4c4;
    height: 22px;
    position: relative;
    width: 160px;
} 
```

**脚本**

```
$('.select2d').change(function () {
    $('#wall_a').attr('action', $(this).find('select').val());
}); 
```

**html**

```
<form id="wall_a" name="wall_a">
    <div class="select2d">
        <select id="what" class="select2">
            <option value="0">Art</option>
            <option value="1">Artist</option>
            <option value="2">Collection</option>
        </select>
    </div>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:05:16.317

检查这个[小提琴](http://jsfiddle.net/9Ye3U/)

根据您提供的图像..我希望它与您正在寻找的相同...

你需要添加的css，

```
.select2d {
   width: 240px;
   height: 34px;
   overflow: hidden;
   background: url("http://cdn.bavotasan.com/wp-content/uploads/2011/05/down_arrow_select.jpg") no-repeat right #ddd;
   border: 1px solid #ccc;
   }

.select2d select {
   background: transparent;
   width: 200px;
   padding: 5px;
   font-size: 16px;
   line-height: 1;
   border: 0;
   border-radius: 0;
   height: 34px;
   -webkit-appearance: none;
   } 
```

谢谢。

# python - QThread：在线程仍在运行时被销毁

> ID：15702782
> 
> 赞同：20
> 
> 时间：2013-03-29T11:59:42.893
> 
> 标签：python, pyqt, qthread

我在 python 中遇到 QThreads 问题。我想更改标签的背景颜色。但是我的应用程序在启动时崩溃了。“QThread：在线程仍在运行时被销毁”

```
 class MainWindow(QMainWindow):
      def __init__(self):
          QMainWindow.__init__(self)
          self.ui = Ui_MainWindow()
          self.ui.setupUi(self)

          statusTh = statusThread(self)
          self.connect(statusTh, SIGNAL('setStatus'), self.st, Qt.QueuedConnection)
          statusTh.start()

      def st(self):
          if self.status == 'ON':
              self.ui.label.setStyleSheet('background-color:green')
          else:
              self.ui.label.setStyleSheet('background-color:red')

  class statusThread(QThread):
      def __init__(self, mw):
          super(statusThread, self).__init__()

      def run(self):
          while True:
              time.sleep(1)
              self.emit(SIGNAL('setStatus'))

  if __name__ == "__main__":
      app = QApplication(sys.argv)
      main_window = MainWindow()
      main_window.show()
      sys.exit(app.exec_()) 
```

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-03-29T12:08:20.940

在创建线程后，您不会存储对线程的引用，这意味着它将在程序离开`MainWindow`s后的某个时间被垃圾收集（即销毁） `__init__`。只要线程正在运行，您至少需要存储它，例如使用`self.statusTh`：

```
self.statusTh = statusThread(self)
self.connect(self.statusTh, SIGNAL('setStatus'), self.st, Qt.QueuedConnection)
self.statusTh.start() 
```

# ruby-on-rails - Ruby on rails 如何创建链接

> ID：15702783
> 
> 赞同：0
> 
> 时间：2013-03-29T11:59:45.140
> 
> 标签：ruby-on-rails, routes, gmaps4rails

帮助在查看显示餐厅 ID 的地图上创建与名称餐厅的链接。控制器/maps_controller.rb

```
def index
    @maps = Map.all
    @json = Map.all.to_gmaps4rails do |map, marker|
       marker.infowindow "<a href=/restaurants/#{@restaurant.object_id}><h2>#{map.name}</h2></a>"
    end 
```

并创建与特定 id 餐厅视图 show
views\restaurants\show.html.erb的关系

```
<%= @restaurant.title %> 
```

路线.rb

```
resources :restaurants
resources :maps 
```

数据库表

```
create_table "maps", :force => true do |t|
    t.string   "name"
    t.string   "address"
    t.float    "longitude"
    t.float    "latitude"
    t.boolean  "gmaps"
    t.datetime "created_at", :null => false
    t.datetime "updated_at", :null => false
  end

create_table "restaurants", :force => true do |t|
    t.string   "title"
    t.text     "description"
    t.string   "image_url"
    t.integer  "map_id"
    t.datetime "created_at",      :null => false
    t.datetime "updated_at",      :null => false 
```

和模型

```
class Map < ActiveRecord::Base
  attr_accessible :address, :gmaps, :latitude, :longitude, :name
  acts_as_gmappable
  has_one :restaurant

    def gmaps4rails_address
      address
    end
end

class Restaurant < ActiveRecord::Base
  attr_accessible :description, :image_url, :title, :map_id
  belongs_to :map

end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:11:10.610

迭代时，现在您正在为每个-object获取*相同的餐厅*( )。改为使用以获得正确的餐厅。`@restaurant``Map``map.restaurant`

另外，我建议使用 Rails 的 url-helpers 来创建 url，而不是手动创建。

最后，将“原始”html 写入控制器内部的对象并不好。建议您将整个 shebang 移动到辅助方法（至少）。

所以是这样的：

```
Map.all.to_gmaps4rails do |map, marker|
  marker.infowindow info_for_restaurant(map.restaurant)
end

# Somewhere else in your controller
private 
def info_for_restaurant(restaurant)
  view_context.link_to restaurant_path(restaurant) do
    view_context.content_tag("h2") do
      restaurant.name
    end
  end
end 
```

# mysql - 无法在 MySQL 中正确使用 REPLACE 函数

> ID：15702786
> 
> 赞同：0
> 
> 时间：2013-03-29T12:00:04.513
> 
> 标签：mysql

我有一个 SQL 表，其列是 State_Code、School_Code 和 School_Type。

样本数据：

```
State_Code    School_Code     School_Type
 01            01014874        1
 01            01018790        2
 1             10189900        1
 1             10277689        1 
```

*（注：School_Code 的第 1 和第 2 位是实际的州代码，而第 3 和第 4 位是该特定州的 District_Code）*

现在，如果我触发这个查询：

```
Select COUNT(School_Code) from Table1 where State_Code='1'+0; 
```

它将返回该州的学校数量，代码为“1”；即*4* ;

但是，如果我想检索一个州 DISTRICT-WISE 的学校数量；我会触发这个查询：

```
Select State_Code,SUBSTRING(School_Code,3,2) AS District_Code,COUNT(School_Code) AS Number_of_Schools_In_District FROM Table1 GROUP BY State_Code+0; 
```

这个查询返回我这个输出：

```
State_Code     District_Code      Number_of_Schools_In_District
   01               01                         2
   1                18                         1
   1                27                         1 
```

但正确的输出是：

```
State_Code     District_Code      Number_of_Schools_In_District
   01               01                         3
   1                02                         1 
```

这是由于用户在 SQL 表中为 School_Code 列输入的数据不正确。状态“1”和“01”实际上是相同的状态，即“01”。但是由于第 3 行和第 4 行的 School-Code 不是以“0”开头，这会导致输出中的错误行为。

所以要解决这个问题，我将不得不使用这个逻辑：

```
*If number of characters in State_Code is 1 and School_Code does not start with '0', then a '0' should be prefixed to the School_Code value to get the correct District_Code value.* 
```

我试过这个：

```
Select State_Code,SUBSTRING(School_Code,3,2) AS District_Code,COUNT(School_Code) AS     Number_of_Schools_In_District FROM Table1 WHERE IF CHARACTER_LENGTH(State_Code)=1 AND School_Code NOT LIKE '0%' THEN REPLACE(School_Code,School_Code,CONCAT(0,School_Code)) END IF GROUP BY State_Code+0, SUBSTRING(School_Code,3,2)+0; 
```

我的期望是，如果 State_code 中的任何值是单个数字并且其相应的学校代码不以“0”开头，那么这将在其上附加“0”，然后计算取第 3 位和第 4 位数字的学区代码。但这不会发生。我仍然得到错误。

```
Note: I don't want to update original SQL table values. 
```

任何帮助将不胜感激。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:32:00.653

试试下面的查询

```
Select State_Code, IF(CHARACTER_LENGTH(State_Code)=1, SUBSTRING(School_Code,2,2), SUBSTRING(School_Code,3,2)) AS District_Code,COUNT(School_Code) AS     Number_of_Schools_In_District FROM Table1 WHERE GROUP BY State_Code+0, SUBSTRING(School_Code,3,2)+0; 
```

# jquery - Fancybox 2 宽度错误

> ID：15702792
> 
> 赞同：2
> 
> 时间：2013-03-29T12:00:37.067
> 
> 标签：jquery, fancybox, responsive-design, fancybox-2

我正在使用 Fancybox 2，因为它能够将图像调整到视口。但是，我有一些非常宽的图像（1000 x 100）并且它们没有正确调整大小。他们正在显示巨大的（显然调整大小以适应显示器的整个宽度？）。编码都是正确的，并且可以与其他图像一起正常工作……唯一的区别是极端宽度。

有没有办法纠正这个问题，或者我将不得不放弃fancybox？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T08:31:39.590

如评论区所述，fancybox 能够将图像放入视口，包括[示例](http://www.emilywatanabe.com/fancybox/fancybox.htm)中的那些宽图像。

您的示例无法按预期工作的原因是：

1）。您缺少正确的`DOCTYPE`. Chrome 和其他浏览器，包括 Opera 和 IE，如果没有这个要求，肯定不会很好玩。

2）。图像将缩放到小屏幕，除非它们具有 a`min-width`和/或`min-height`css 属性。换句话说，如果`min-height`图像的 是，那么如果匹配最小集，`200px`则图像不会缩小其比例，无论您是否不断缩小视口。这就是您的宽幅图像的情况。`width``height`

如果您查看**[fancybox 文档](http://fancyapps.com/fancybox/#docs)**，您会发现两个具有默认设置的属性：

```
minWidth   Minimum width fancyBox should be allowed to resize to; 
           Default value: 100 

minHeight  Minimum height fancyBox should be allowed to resize to; 
           Default value: 100 
```

您可以做的是在您自己的 fancybox 自定义脚本中修改这些默认设置，例如：

```
 $(document).ready(function () {
     $('.fancybox').fancybox({
         minWidth: 10, // you can scale images as small as 10px wide
         minHeight: 10 // you can scale images as small as 10px height
     });
 }); 
```

观看**[演示](http://www.picssel.com/playground/jquery/widthBug_30mar13.html)**并使用 Firefox 或 Chrome 缩小视口。

# sql - sql中的日期差异

> ID：15702794
> 
> 赞同：0
> 
> 时间：2013-03-29T12:00:52.003
> 
> 标签：sql, sql-server, datetime

我正在使用以下查询来获取 2 条时间记录之间的时差

```
;WITH x AS 
(
  SELECT *, 
    rn = ROW_NUMBER() OVER (PARTITION BY PersonRFID ORDER BY TimeStamp)
  FROM AISDb
)
SELECT y.ID,x.ID,x.PersonName,x.PersonRFID, DATEDIFF(MINUTE, x.TimeStamp, y.TimeStamp) 
  FROM x INNER JOIN x AS y 
  ON x.PersonRFID = y.PersonRFID
  AND x.rn = y.rn - 1
  WHERE x.Action = 'OUT'
  AND y.Action = 'IN'; 
```

```
ID   Name         PERSONRFID                   ACTION  LOGREAD  TIMESTAMP      DATESTAMP

1  Kashif Islam E20010018303014826000F5A    IN  True    20:43:00    1/16/2013

8  Kashif Islam E20010018303014826000F5A    IN  True    12:22:00    1/26/2013

10 Kashif Islam E20010018303014826000F5A    OUT True    12:22:00    1/26/2013

11 Aamir Munir  E20010018303020025901029    IN  True    12:22:00    1/26/2013

15 Aamir Munir  E20010018303020025901029    OUT True    11:46:00    1/29/2013

25 Kashif Islam E20010018303014826000F5A    OUT True    12:41:00    1/29/2013 
```

问题是我在同一天得到了很好的结果，因为我在同一天制作了一对 IN OUT。但是，如果它在同一天没有找到下一个 OUT，例如在 2013 年 1 月 16 日 ID 为 1 的情况下，它不会执行 OUT 操作，因此它会与 ID 25 配对。不应该这样做。所以简而言之，我需要查询来处理日期，并为同一日期制作 IN OUT 纸，如果没有，则忽略。请帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:33:31.000

您只需要在日期上添加一个比较：

```
WITH x AS 
(
  SELECT *, 
    rn = ROW_NUMBER() OVER (PARTITION BY PersonRFID ORDER BY TimeStamp)
  FROM AISDb
)
SELECT y.ID,x.ID,x.PersonName,x.PersonRFID, DATEDIFF(MINUTE, x.TimeStamp, y.TimeStamp) 
FROM x INNER JOIN
      x AS y 
     ON x.PersonRFID = y.PersonRFID and
        x.rn = y.rn - 1 and
        x.Action = 'OUT' and
        y.Action = 'IN' and
        cast(x.timestamp as date) = cast(y.timestamp as date); 
```

我正在使用 SQL Server 语法进行日期转换。

如果您想要所有“X”记录，即使没有匹配的 Y，您也需要左外连接。我会将查询写为：

```
SELECT y.ID,x.ID,x.PersonName,x.PersonRFID, DATEDIFF(MINUTE, x.TimeStamp, y.TimeStamp) 
FROM x INNER JOIN
      x AS y 
     ON x.PersonRFID = y.PersonRFID and
        x.rn = y.rn - 1 and
        y.Action = 'IN' and
        cast(x.timestamp as date) = cast(y.timestamp as date);
where x.Action = 'OUT' 
```

# javascript - 扫描 Javascript 以获取浏览器兼容性

> ID：15702796
> 
> 赞同：20
> 
> 时间：2013-03-29T12:00:54.310
> 
> 标签：javascript, ecmascript-5

是否有工具可以扫描我的 Javascript 代码以查找所有浏览器中可能不存在的功能？

我的库完全是非 UI 的，所以我不在乎某些东西是如何“显示”的。我正在寻找类似于 Mozilla 的 Javascript MDN 中的内容。例如，对于 Array.prototype.indexOf，他们警告说它是最近添加的 ECMAScript，并非在所有浏览器中都存在（并且通常提供存根）。我正在寻找的是一个工具，它会在我的代码中列出属于这一类的函数。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2019-03-01T10:02:21.907

您可以使用[eslint-plugin-compat](https://github.com/amilajack/eslint-plugin-compat)，这是[ESlint linting](https://eslint.org/) 实用程序的插件。您甚至可以使用[Browserlist](https://github.com/browserslist/browserslist)来配置您想要支持的浏览器。

[![关于 eslint-plugin-compat 的精彩动画](../Images/3ad798f85d5d1be2628c8e0e9e27749b.png)](https://i.stack.imgur.com/VXsbS.gif)

安装非常简单。你必须安装 eslint 和这个插件：

```
npm install --save-dev eslint-plugin-compat 
```

或者

```
yarn add --dev eslint eslint-plugin-compat 
```

并添加一个 ESlint 配置文件：

```
// .eslintrc
{
  "extends": ["plugin:compat/recommended"]
} 
```

将支持的浏览器添加到您的`package.json`文件中：

```
// sample configuration (package.json)
{
  // ...
  "browserslist": ["last 2 Chrome versions", "IE 11"],
} 
```

然后运行 ​​linter：

```
eslint yourfile.js 
```

就我而言，这是输出：

```
92:9   error  Promise.all() is not supported in IE 11  compat/compat
94:9   error  Promise.all() is not supported in IE 11  compat/compat 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T12:51:01.483

更新：

看看[Stephan Vierkant 的答案，](https://stackoverflow.com/a/54942229/387573)它显示了一个解决这个问题的插件。

* * *

没有这样的工具，而且有[很多浏览器](http://en.wikipedia.org/wiki/Comparison_of_web_browsers#JavaScript_support)。

我认为有一种替代方法可以扫描您的代码以与“所有”浏览器兼容，尽管这确实是一件有用的事情。大多数人会做以下两件事来确保一定程度的跨浏览器兼容性。

**使用图书馆**

您可以使用像[underscore.js](http://underscorejs.org/)、[jQuery](http://jquery.com)、[Dojo](http://dojotoolkit.org/)、[Modernizr](http://modernizr.com/)等这样的库来为您包装浏览器的不兼容性。因此，例如，您可以使用 jQuery.inArray，它将在 jQuery 涵盖的所有浏览器中工作，并提供一个通用界面供您使用。

**限制浏览器支持**

确定您的应用程序要支持哪些浏览器，在您的网站上声明，然后在这些浏览器中进行测试。如果您拥有它们，则可以在本机上进行测试，或者使用诸如 browserstack 之类的东西对您没有的浏览器进行测试。[该答案](https://stackoverflow.com/a/10208587/387573)还为此列出了更多替代方案。

最后，在编写代码时可以依赖最佳实践和个人经验。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-29T02:17:12.570

更新：

可用于 Javascript 兼容性检查器的新链接：[https ://seedmanc.github.io/jscc/](https://seedmanc.github.io/jscc/)

* * *

~~检查器不再可用。~~

* * *

搜索相同的问题（在这几年之后），我碰到了~~Javascript 兼容性检查器~~.

它提示了我的脚本与主要浏览器的兼容性。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-01-01T18:12:38.450

您可以将代码粘贴到[https://jshint.com/](https://jshint.com/)，它会告诉您任何需要注意的“新”语言功能。但是，它并没有指出哪些浏览器缺少哪些功能。

# .net - Worker角色在模拟器上工作，在云端失败，如何开始调试？

> ID：15702799
> 
> 赞同：0
> 
> 时间：2013-03-29T12:00:57.237
> 
> 标签：.net, windows, azure, azure-worker-roles

我是 Windows azure 的新手，我已经创建了一个工作角色，我在模拟器上进行了测试并且工作正常（它应该发送一封电子邮件并且确实如此），但是如果我在云上发布它，它不会向我发送任何电子邮件。

我不知道是什么问题，我不知道如何调试它，感谢您的指导。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T13:34:39.560

完全猜测......可能有很多原因：

1.  您的邮件服务器托管在您的网络中，因此当您在本地运行代码时它可以工作，但当您在 ​​Azure 中运行它时它不能工作，因为您在 Azure 中的服务无法访问您的 SMTP 服务器。
2.  很可能您的网络管理员已配置您的邮件服务器以防止来自未知域的中继。

我建议您联系您的网络管理员。他们应该能够解决这个问题。

# makefile - make：当目录或子目录中的任何文件更改或添加时运行

> ID：15702800
> 
> 赞同：2
> 
> 时间：2013-03-29T12:00:57.430
> 
> 标签：makefile

当我在 Makefile 中使用它时：

```
run: mydir/*
    do_something.sh 
```

每次添加/更改 mydir 中的文件时，它都会触发 do_something.sh。当 mydir 的目录树中的任何文件（即在任何子目录或子目录的子目录等中）更改或添加时，是否也可以触发 do_something.sh？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T20:34:33.677

这可能会奏效。

```
run: $(shell find mydir/ -type f)
    do_something.sh 
```

*   `run`不能是 PHONY 目标，即它应该`run`在配方执行结束时创建一个名为的文件
*   如果其中的任何文件`mydir`的名称中有空格，您可能会遇到意外的行为

# facebook - Facebook登录插件如何隐藏文本：“[用户名]使用[应用程序名]”？

> ID：15702802
> 
> 赞同：2
> 
> 时间：2013-03-29T12:01:00.797
> 
> 标签：facebook, facebook-javascript-sdk, hide

还没有找到答案，但我仍在寻找如何删除文本。

当用户登录时，facebook 登录按钮会变成注销按钮，但它也会显示以下文字： http: [//gyazo.com/fcc1429b6f7207ffab14556384386374](http://gyazo.com/fcc1429b6f7207ffab14556384386374)

“用户名”使用“应用程序名”和个人资料图片。（我也想隐藏个人资料图片）

有谁知道它是否有额外的秘密？我知道注销按钮是“秘密”（官方文档中没有列出），您必须在其中添加 autologoutlink="true"。所以，我想知道是否有类似的东西可以用图像隐藏文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-13T09:29:21.990

看起来您可以隐藏您指定的图像和文本，`show-faces='false'`但至于仅隐藏文本，这似乎是一个谜！

来源：[https ://developers.facebook.com/docs/reference/plugins/login/](https://developers.facebook.com/docs/reference/plugins/login/)

# forms - 当表单没有焦点时，如何防止表单处理热键？

> ID：15702804
> 
> 赞同：1
> 
> 时间：2013-03-29T12:01:06.117
> 
> 标签：forms, delphi, hotkeys

我们有一个 Delphi XE2 应用程序。`Form1`有热键`Ctrl`+`F`和`Form2`，它是活动的，没有热键。用户按下`Ctrl`+`F`并处理热键`Form2`。`Form1`这是完全不正确的，因为我们看到了非活动形式的活动。我如何解决它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T13:44:43.963

我使用动作实现所有快捷键处理。如果您这样做，那么您可以使用操作、操作列表、操作管理器等提供的集中化来启用和禁用基于表单是否处于活动状态的所有操作。

例如，通过在表单的和事件处理程序`State`上设置操作列表的属性来做到这一点：`OnActivate``OnDeactivate`

```
procedure TMyForm.FormActivate(Sender: TObject);
begin
  ActionList.State := asNormal;
end;

procedure TMyForm.FormDeactivate(Sender: TObject);
begin
  ActionList.State := asSuspended;
end; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T13:15:08.253

您可以在热键处理程序中添加对[活动表单](http://docwiki.embarcadero.com/Libraries/XE2/en/Vcl.Forms.TScreen.ActiveForm)的检查，即

```
if(Screen.ActiveForm <> Self)then Exit; 
```

这是假设事件处理程序由`Form1`（`Self`然后在处理程序内部）实现的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-03-10T01:02:13.410

只需覆盖捕获操作的非活动窗口的以下函数：

```
function IsShortCut(var Message: TWMKey): Boolean; override;

function TMainForm.IsShortCut(var Message: TWMKey): Boolean;

begin
  if MainForm.Active then
    result := inherited IsShortCut( Message )
  else
    result := false;
end; 
```

# xslt - 如何添加 XSL 命名空间自定义标签

> ID：15702805
> 
> 赞同：1
> 
> 时间：2013-03-29T12:01:15.650
> 
> 标签：xslt

我有一个源 XML

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/"><soapenv:Body>
<PublishANZINCIDENTESB xmlns="http://www.ibm.com/maximo" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" creationDateTime="2013-02-25T23:25:35+00:00" transLanguage="EN" baseLanguage="EN" messageID="1361834735434709840" maximoVersion="7 1 20110105-1024 V7118-37" event="1"><ANZINCIDENTESBSet><INCIDENT action="Replace"></INCIDENT></ANZINCIDENTESBSet></PublishANZINCIDENTESB></soapenv:Body></soapenv:Envelope> 
```

我想通过将名称空间和标头添加到标记来更改为目标 XML。输出 XML 是

```
<?xml version="1.0" encoding="UTF-8"?>
<soapenv:Envelope xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/" xmlns:s600="http://LIB_ISM_WPS/S600_PublishANZINCIDENT_Service_INT" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soapenv:Header/><soapenv:Body>
<s600:PublishANZINCIDENTESBOperation><PublishANZINCIDENTESB xmlns="http://www.ibm.com/maximo" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" creationDateTime="2013-02-25T23:25:35+00:00" transLanguage="EN" baseLanguage="EN" messageID="1361834735434709840" maximoVersion="7 1 20110105-1024 V7118-37" event="1"><ANZINCIDENTESBSet><INCIDENT action="Replace"></INCIDENT></ANZINCIDENTESBSet></PublishANZINCIDENTESB></s600:PublishANZINCIDENTESBOperation></soapenv:Body></soapenv:Envelope> 
```

我正在使用的 XSL：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:s600="http://LIB_ISM_WPS/S600_PublishANZINCIDENT_Service_INT" >
 <s600:PublishANZINCIDENTESBOperation>
 <xsl:template match="node()|@*">
     <xsl:copy>
       <xsl:apply-templates select="node()|@*"/>
     </xsl:copy>
 </xsl:template>
</s600:PublishANZINCIDENTESBOperation>
 <xsl:template match="*">
  <xsl:element name="s600:{name()}" namespace="http://LIB_ISM_WPS/S600_PublishANZINCIDENT_Service_INT">
   <xsl:copy-of select="namespace::*"/>
       <xsl:apply-templates select="node()|@*"/>
  </xsl:element>
 </xsl:template>
</xsl:stylesheet> 
```

任何人都可以尽快帮助我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:27:05.760

从您的输入和输出示例看来，您只是想将一个`s600:PublishANZINCIDENTESBOperation`元素包装在 的内容周围，`soapenv:Body`否则保持内容不变。你可以用

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
 xmlns:s600="http://LIB_ISM_WPS/S600_PublishANZINCIDENT_Service_INT"
 xmlns:soapenv="http://schemas.xmlsoap.org/soap/envelope/">

  <xsl:template match="@*|node()">
    <xsl:copy><xsl:apply-templates select="@*|node()" /></xsl:copy>
  </xsl:template>

  <xsl:template match="soapenv:Body">
    <xsl:copy>
      <s600:PublishANZINCIDENTESBOperation>
        <xsl:apply-templates select="@*|node()" />
      </s600:PublishANZINCIDENTESBOperation>
    </xsl:copy>
  </xsl:template>

  <!-- If the namespace declaration absolutely _must_ be on the Envelope 
       you could uncomment this extra template -->
  <!--
  <xsl:template match="soapenv:Envelope">
    <soapenv:Envelope>
      <xsl:apply-templates select="@*|node()" />
    </soapenv:Envelope>
  </xsl:template>
  -->
</xsl:stylesheet> 
```

这将产生您正在寻找的输出，除了`xmlns:s600`声明将在`s600:PublishANZINCIDENTESBOperation`元素上而不是在 上`soapenv:Envelope`，但这对于下游组件应该无关紧要，只要它们使用适当的 XML 解析器来处理数据而不是处理它作为文本。如果将声明放在信封上真的很重要，请取消注释第三个模板。

# php - PHP循环遍历数组并回显所选项目

> ID：15702814
> 
> 赞同：-3
> 
> 时间：2013-03-29T12:01:50.690
> 
> 标签：php

我有一个从 api 调用返回的数组。有时它只是一组，而在其他情况下会是很多组。示例如下，用于页面“查看源代码”：

```
[objects] => Array
                (
                    [0] => Array
                        (
                            [stock] => 388
                            [voice_enabled] => 1
                            [region] => BASEL, SWITZERLAND
                            [voice_rate] => 0.00800
                            [prefix] => 61
                            [sms_rate] => -1
                            [number_type] => local
                            [setup_rate] => 0.80000
                            [rental_rate] => 0.80000
                            [group_id] => 25728319905588
                            [sms_enabled] => 
                            [resource_uri] => /v1/Account/MAMTE4MTHJNJRKODBIMD/AvailableNumberGroup/25728319905588/
                        )

                    [1] => Array
                        (
                            [stock] => 593
                            [voice_enabled] => 1
                            [region] => BELLINZONA, SWITZERLAND
                            [voice_rate] => 0.00800
                            [prefix] => 91
                            [sms_rate] => -1
                            [number_type] => local
                            [setup_rate] => 0.80000
                            [rental_rate] => 0.80000
                            [group_id] => 25732565267448
                            [sms_enabled] => 
                            [resource_uri] => /v1/Account/MAMTE4MTHJNJRKODBIMD/AvailableNumberGroup/25732565267448/
                    ) 
```

还有10个这样的块。

这是由来自以下 PHP 文件的 api 调用生成的：

```
<?php
 include("connect.php");
 include("settings.php");
 require_once 'myapiprovider.php';
 $p = new RestAPI($auth_id, $auth_token);
 $params = array( 'country_iso' => 'CH' );
 $response = $p->get_number_group($params);
 print_r($response);
 ?> 
```

而不是 print_r($response) 我希望能够遍历项目并在一个不错的列表中仅回显区域和前缀。

我怎样才能做到这一点？

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:22:31.530

```
foreach($response["objects"] as $i=>$v)
{
echo "Region: ".$v["region"];
echo "<br>";
echo "Prefix: ".$v["prefix"];   
echo "<hr>"; 
```

}

# hadoop - Hive：使用不同的键连接两个表

> ID：15702815
> 
> 赞同：0
> 
> 时间：2013-03-29T12:01:52.370
> 
> 标签：hadoop, hql, hive, hiveql

我有两个如下表。基本上我想加入他们两个，并期望得到如下结果。

表 2 的前 3 行没有任何活动 ID，只是空的。

所有字段都是制表符分隔的。根据表 2，类别“33”具有三个描述。

我们需要使用“活动 ID”来获取“33”类别的结果，因为它有 3 个值。

谁能告诉我如何实现这个输出？

# 表格1

Empid 类别 ActivityID

44126 33 火车

44127 10 UFL

44128 12 TOI

44129 33 未指定

44130 15 微软

44131 33 好处

44132 43 好处

# 表 2：

类别 ActivityID Categdesc

10 可计费

12 计费

15 不可计费

33 训练训练

33 未指定替补席

33 好处 好处

43 好处

# 预期输出：

44126 33 培训

44127 10 可计费

44128 12 可计费

44129 33 长凳

44130 15 不可计费

44131 33 福利

44132 43 福利

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T23:23:38.403

我不确定我是否理解您的问题或您的数据，但这会起作用吗？

```
select table1.empid, table1.category, table2.categdesc
from table1 join table2
on table1.activityID = table2.activityID; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-31T10:14:31.450

做这个 Hive 并不难，因为有很多限制。这就是我解决它的方法，但可能有更好的方法。

我将您的表格命名如下。表 1 = EmpActivity 表 2 = ActivityMas

挑战来自表 2 中的空字段。我创建了一个视图并使用 UNION 来组合来自两个不同查询的结果。

```
Create view actView AS Select * from ActivityMas Where Activityid ='';

SELECT * From (
Select EmpActivity.EmpId, EmpActivity.Category, ActivityMas.categdesc
from EmpActivity JOIN ActivityMas 
ON  EmpActivity.Category =  ActivityMas.Category 
AND EmpActivity.ActivityId = ActivityMas.ActivityId
UNION ALL
Select EmpActivity.EmpId, EmpActivity.Category, ActView.categdesc from EmpActivity
JOIN ActView ON  EmpActivity.Category =  ActView.Category
) 
```

您必须使用顶级 SELECT 子句，因为顶级语句不直接支持 UNION ALL。这将运行总共 3 个 MR 作业。下面是我得到的结果。

```
44127   10      billable
44128   12      billable
44130   15      Non-billable
44132   43      Benefits
44131   33      Benefits
44126   33      Training
44129   33      Bench 
```

# c# - 如何在 json (C#) 中自动转义引号

> ID：15702818
> 
> 赞同：1
> 
> 时间：2013-03-29T12:02:08.527
> 
> 标签：c#, json, json.net

从服务器我得到json。Json 很大。我只展示这个

```
{
      "id": "9429531978965160",
      "name": "Morning in  "Paris"",  // json.net cannot deserialize this line, because line have no escaped quotes.
     "alias": "ThisAlias"
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:07:30.410

问题是生成无效 JSON 的服务器端。

您可以尝试编写一个修复此问题的正则表达式（搜索第三个和最后一个之间的任何引号）。请注意，JSON 可能存在许多其他问题，例如未转义的换行符等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T23:43:31.263

不仅仅是您收到的输出是非标准的 json，它还被破坏，以至于它不是一种定义明确的语言，即使在简单的情况下也不会明确解析。你应该如何解析`{"a": "A", "b": "B"}`？一种方法是合法的json。`a`另一个有效的解析是具有 value的单个属性`"A\", \"b\": \"B"`。

正如其他人所说，最好的解决方案是修复服务器，使其不再输出无效垃圾。如果这不是一个选项，您将不得不编写自己的解析器。普通解析器会在“Paris”中的“P”处声明语法错误。您的解析器可以备份到最后一个引号标记并尝试将其视为已转义。下一个语法错误出现在第二个连续引号中，它可以再次备份并将引号标记视为已转义。如果输入偏离合法 json 的任何其他方式，您也需要处理这些方式。

如果您不熟悉解析器，这将需要一段时间。完成后，您将拥有一个解析器，该解析器可以识别一种指定不佳且几乎完全无用的语言，也就是说，这在很大程度上是浪费时间。尽你所能在服务器端修复它。

# c++ - C# .NET 开发集成与 C++ 集成

> ID：15702822
> 
> 赞同：1
> 
> 时间：2013-03-29T12:02:23.527
> 
> 标签：c++, .net, visual-c++, architecture

抱歉冗长。

我需要关于我的设计决策问题的专家意见。我们将实现一个高端的人脸识别软件。我正在寻找实现这一目标的匹配技术。

我认为有两个通用选项。

1.  独立的桌面应用程序。
2.  Web应用程序。

我们决定开发一个 Web 应用程序，这让我们寻找实现这一目标的可能方法。

**设计决策构建**

ASP .net 应用程序，其中后端使用 OpenCV 包装器[Emgu](http://www.emgu.com/)，它实现人脸识别和预置活动。

事实证明，Emgu 在性能和并行性方面落后。因此，正如许多人所说，进行 C++ 开发可以很好地保持预期的性能水平。

所以，现在我们正在寻找一种方法来实现直接在后端使用 OpenCV 的 Web 应用程序。

我们遇到过 CPPCMS 和 TreeFrog 框架，它们都是 c++ Web 框架。

我们有另一个想法，实现一个 c++ Web 服务，然后为任何开发保留开放的前端。该服务也直接使用 OpenCV。

1.  我们是否遵循正确的方向？
2.  关于技术迎合和最佳方法的任何建议。
3.  由于我们熟悉 .NET C#，因此我们对 c++ 开发还很陌生。如果可以使用visual studio进行实施

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-30T18:10:57.410

首先，CppCMS 经常用于实现 Web API，如 JSON-RPC 或 RESTful API。

所以总的来说这是个好主意。

关于 TreeFrog 的一些注意事项 - 这是一个相对较新的项目，绝对缺乏文档，恕我直言，它非常原始......

*披露：我是 CppCMS 的作者*

# active-directory - 是否可以从 AX 2009 读取 AD 用户？

> ID：15702823
> 
> 赞同：1
> 
> 时间：2013-03-29T12:02:23.920
> 
> 标签：active-directory, axapta, dynamics-ax-2009, x++

如何从 AX 2009 读取 AD 用户？还有什么安全问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T09:27:37.273

[我刚刚在我的博客上](http://www.jaestevan.com/howto-informacion-de-active-directory-desde-x)发布了一个旧作业，用于从 X++ 访问 AD 用户，代码如下：

```
static void JAEE_IterateActiveDirectoryUsers(Args _args)
{
    str                 computer = new xSession().clientComputerName();
    xAxaptaUserManager  mgr = new xAxaptaUserManager();
    xAxaptaUserDetails  usr;
    container           doms;
    int                 d, u;
    str                 dom, login, name, sid, email;
    ;

    // iterate AD domains
    doms = mgr.enumerateDomains(computer);
    for (d = 1; d <= conlen(doms); d++) 
    {
        dom = conpeek(doms, d);
        setprefix(dom);

        // iterate AD domain users
        usr = mgr.enumerateDomainUsers(dom);
        for (u = 0; u < usr.getUserCount(); u++) 
        {
            if (usr.isUserEnabled(u) && !usr.isUserExternal(u))
            {
                // get information from AD
                login = usr.getUserLogin(u);
                name = usr.getUserName(u);
                sid = usr.getUserSid(u);
                email = usr.getUserMail(u);

                // stuff happens here, you can compare AD data with AX User info

                info(strfmt("%1 - %2 - %3 - %4 - %5", dom, login, name, email, sid));
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-30T10:50:13.950

看看下面，你会从那里得到很多关于 AX 2009 的 AD 和安全结构的帮助 [http://technet.microsoft.com/en-us/library/aa497043%28v=ax.50%29。 aspx](http://technet.microsoft.com/en-us/library/aa497043%28v=ax.50%29.aspx)

# codeigniter - 唯一不一致的 CI 空白页问题

> ID：15702824
> 
> 赞同：0
> 
> 时间：2013-03-29T12:02:24.030
> 
> 标签：codeigniter

参考我之前提出的[CodeIgniter 空白页问题。](https://stackoverflow.com/questions/15565083/codeigniter-blank-page)

一些新的信息已经曝光，可能会对这个问题有所了解。

我新建的服务器（CI 2.1.3 - 最新版本）工作正常且不提供 WSOD，位于我的开发服务器的子域中。WSOD 问题仍然发生在不在子域中的“实时”站点上。

显然，“live”站点位于 public_html 中，而开发版本位于“codeigniter”子域中。两台服务器上的其他一切都是相同的。相同的 PHP 5.3 设置。相同的 .htaccess 文件。相同的 CI 2.1.3 设置，显然配置更改为指向“开发”中的子域和“实时”中的域。

问题是一样的。在 ENTER PRESS 或外部链接激活（例如来自电子邮件）上，我在“实时”中得到 WSOD，但这在“开发”中正常工作。在“实时”中没有单击按钮就激活的每个控制器都会给我 WSOD，而所有页面在“开发”中都可以正常工作。

作为检查，我构建了一个全新的 CI 根安装（没有子域），问题准确地反映了“实时”中发生的情况。

表现出 WSOD 行为的进程没有附加视图，只是简单地打印成功消息。

这是代码：

.htaccess - 在“development”的子域文件夹和“live”的public_html：

```
Options -Indexes
Options +FollowSymLinks

RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /index.php?/$1 [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /index.php?/$1 [L] 

ErrorDocument 404 /index.php 
```

登录后粘贴到浏览器中时以“实时”状态提供 WSOD 的控制器之一是inviteusers.php 只需获取公司 ID 和用户 ID，并向用户发送包含新登录详细信息的链接帐户。“消息”正文中的一些无关代码已被删除以缩短它：

```
<?php if ( ! defined('BASEPATH')) exit('No Direct Script Access Allowed');
/**
 * Invite Users Controller
 *
 * ----------------------------------------------------------------------------
 */

class InviteUsers extends MY_Controller
{

    function __construct()
    {
        parent::__construct();
        $this->load->model('UserDetails_model');
        $this->load->helper('date');
    }

    public function index()
    {
        if (!$this->session->userdata('clientid') && !$this->session->userdata('userid')) {
            redirect('login');
        }

        // Add Client ID for All Uninvited Users for a Client
        $lookupid['clientid']   = "CID";

        // Add User ID to Add ONE Uninvited user for a Client
        // Change UserDetails_model to take UID if this option is used
        $lookupid['userid']     = "UID";

        $invites = $this->UserDetails_model->getInvites($lookupid);

        foreach ($invites as $invite) {

            if ($invite['new'] == "Y") {

                $message   = "Hi ".$invite['username']." ".$invite['usersurname'].", \n \n";    
                $this->load->helper('email');

                $this->email->set_newline("\r\n");
                $this->email->from('email@address.com', 'System Messenger');
                $this->email->to($invite['useremail']);
                $this->email->bcc('admin@address.com');
                $this->email->subject('Temporary Login Details');
                $this->email->message($message);

                $sent = $this->email->send();

                if ($sent) {
                    echo "SUCCESS!!!   ";
                    echo "NAME:     ".$invite['username']." ".$invite['usersurname']."   ";
                    echo "E-MAIL:   ".$invite['useremail']."   ";
                    echo "PASSWORD: ".$invite['temppass']."   ";
                    echo "NEW:      ".$invite['new']."";
                }

            } else {

                $message   = "Hi ".$invite['username']." ".$invite['usersurname'].", \n \n";

                $this->load->helper('email');

                $this->email->set_newline("\r\n");
                $this->email->from('email@address.com', 'System Messenger');
                $this->email->to($invite['useremail']);
                $this->email->bcc('admin@address.com');
                $this->email->subject('Temporary Login Details');
                $this->email->message($message);

                $sent = $this->email->send();

                if ($sent) {
                    echo "SUCCESS!!!   ";
                    echo "NAME:     ".$invite['username']." ".$invite['usersurname']."   ";
                    echo "E-MAIL:   ".$invite['useremail']."   ";
                    echo "PASSWORD: ".$invite['temppass']."   ";
                    echo "NEW:      ".$invite['new']."   ";
                }

            }

        }

    }

}
/*
 * End of file inviteusers.php
 * Location: ./application/controllers/inviteusers.php
 */ 
```

正如我之前所说 - 这个过程正在开发中，但会在 LIVE 中提供 WSOD。

MY_Controller 只是执行会话查找并检查一些变量。它简单而可靠，并且一直在没有模组的情况下工作。

我认为可能有一个重要线索，因为它在最近设置的子域中正常工作，具有相同的 .htaccess 文件和配置更改以反映 URL。所有其他环境变量完全相同。相同的服务器，相同的托管公司，运行相同模块的相同 Apache 版本，相同模块的相同 PHP 版本，超时，内存等设置。

提供 WSOD 的控制器让我可以快速轻松地访问某些管理功能，因此它们必须工作......而且它们确实......在同一服务器上的“开发”子域中，以“生活”在 public_html 中运行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T22:28:11.787

如果满足某个条件场景，则**您不会输出任何内容！**

`$sent`只有当变量等于 时，您才会回显信息，即`true`您的电子邮件已成功发送。如果*没有*，你什么都没有显示！由于没有实际的 PHP 错误，因此启用这些错误不会解决任何问题（尽管 99% 的情况下，这是空白页背后的问题）。

用电子邮件的调试器在上面写一个`else`语句，你应该会得到一些关于正在发生的事情的指示。

```
if ($sent) {
    echo "SUCCESS!!!   ";
    echo "NAME:     ".$invite['username']." ".$invite['usersurname']."   ";
    echo "E-MAIL:   ".$invite['useremail']."   ";
    echo "PASSWORD: ".$invite['temppass']."   ";
    echo "NEW:      ".$invite['new']."";
}
else
{
    echo $this->email->print_debugger();
} 
```

* * *

此外，对于它的价值，您的 .htaccess 不需要系统和应用程序文件夹的规则。您也不需要在 RewriteRule URL 的前面加上斜杠（RewriteBase 会为您处理）。

```
Options -Indexes
Options +FollowSymLinks

RewriteEngine On
RewriteBase /

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 

ErrorDocument 404 index.php 
```

# asp.net - Linq 到数据集，查询优化

> ID：15702829
> 
> 赞同：-1
> 
> 时间：2013-03-29T12:02:41.950
> 
> 标签：asp.net, sql-server, entity-framework, linq-to-dataset

我有以下 linq 查询：

```
var itembind = (from q in dsSerach.Tables[0].AsEnumerable()
            select new
                           {
                               PatternID = q.Field<int>("PatternID"),
                               PatternName = q.Field<string>("PatternName") + " " + q.Field<string>("ColorID") + q.Field<string>("BookID"),
                               ColorID = q.Field<string>("ColorID"),
                               BookID = q.Field<string>("BookID"),
                               CoverImage = (from img1 in objJFEntities.ProductImages.ToList()
                                             where img1.PatternName.ToLower() == q.Field<string>("PatternName").ToLower()
                                             select new CoverImage
                                             {
                                                 URL = "Images/MediumPatternImages/" +
                                                     q.Field<string>("PatternName") + "_" + q.Field<string>("ColorID") + q.Field<string>("BookID") + q.Field<string>("ImageExtension"),
                                                 ID = q.Field<int>("ProductImageID")
                                             }).FirstOrDefault(),
                               TotalCount = q.Field<int>("TotalCount")
                           }).Distinct();

var patterns = (from r in itembind
            group r by new { r.PatternID, r.ColorID } into g
            select new SearchPattern
            {
                PatternID = g.Key.PatternID,
                PatternName = string.Join(",", g.OrderBy(s => s.ColorID).OrderBy(s => s.BookID)
                                          .Select(s => String.Format("<a href='{0:s}' title='{1:s}'>{2:s}</a><br />",
                                                     new object[] { String.Format("Product.aspx?ID={0}&img={1}", g.Key.PatternID, s.CoverImage.ID), s.PatternName, s.PatternName })).FirstOrDefault()),
                CoverImage = g.Count() > 1 ? (from img1 in objJFEntities.ProductImages.ToList()
                                              where img1.ProductImageID == g.Select(i => i.CoverImage.ID).FirstOrDefault() && img1.ColorID.ToString() == g.Key.ColorID

                                              select new CoverImage
                                              {
                                                  URL = "Images/MediumPatternImages/" +
                                                      img1.PatternName + "_" + img1.ColorID + img1.BookID + img1.ImageExtension,
                                                  ID = img1.ProductImageID
                                              }).FirstOrDefault() : g.Select(i => i.CoverImage).FirstOrDefault()

            }).ToList(); 
```

这些查询仅对 1000 条记录执行超过 1 分钟。dsSearch 是一个数据集，其中填充了从我的 SQL 过程返回的记录。我正在使用实体框架。该站点使用 IIS7.0 部署。SQL Server 2008 正在使用中。

我收到“**错误消息：超时已过期。在操作完成之前超时时间已过或服务器没有响应。** ”，“无法打开登录请求的数据库“DB”。登录失败。” &“基础提供商在打开时失败。” 那种错误非常频繁的网站。

请告诉我如何优化这样的查询。

**编辑：**

这是程序

[http://pastie.org/7160934](http://pastie.org/7160934)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:46:48.690

在第一个查询中，您正在执行 objJFEntities.ProductImages.ToList() ，通过 ToList() 调用，您将从数据库中获取每个条目，然后在内存中过滤结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T20:37:43.033

Rolfvm 指出`objJFEntities.ProductImages`导致问题的原因是正确的，但分析有点不同。当您枚举查询时，您会将整个`ProductImages`表提取到内存中以进行查询*的每次*迭代。因此，一种优化是首先在集合中获取图像并在查询语句中使用该集合

```
var localImages = objJFEntities.ProductImages.ToList();
...
CoverImage = (from img1 in localImages.... 
```

但是，您的查询似乎做得太多了。您构建第一部分`itembind`而不执行它。然后构建第二部分 ( `var patterns = (from r in itembind`) 并通过`ToList()`. 但是在第二部分中，您永远不会使用`CoverImage`第一部分中的。所以创造这些是对资源的浪费。（或者你浏览了代码，隐藏了第一部分的另一个用途）。

# java - Gson json 无法得到结果

> ID：15702834
> 
> 赞同：1
> 
> 时间：2013-03-29T12:03:15.783
> 
> 标签：java, json, gson

请我有一个这样的json响应字符串：

```
{"result":{"id":21456,"name":"3mm nail","type":"2" }} 
```

这是我的代码：

```
class rootObj{
    List<Result> result;

}
public class Result {
    @SerializedName("id")
    public String idItem;

    @SerializedName("name")
    public String name;    
}
public static void main(String[] args) throws Exception {
Gson gson = new Gson();
Result result = gson.fromJson(json,Result.class);
System.out.println(result.name);
} 
```

但结果是空的 :( 提前谢谢。

所以..这段代码是我的目标：

```
class ResultData{

    private Result result;
    public class Result {
        private String id;
        private String name;

    }

}

...
Gson gson = new Gson();
ResultData resultData = new Gson().fromJson(json, ResultData.class);

System.out.println(resultData.result.id);
System.out.println(resultData.result.name); 
```

感谢 BalusC 给了我这个想法。 [Java - 嵌套在嵌套中的 Gson 解析](https://stackoverflow.com/questions/4453006/java-gson-parsing-nested-within-nested)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:34:33.533

在您的 JSON 字符串中，您的结果属性是一个对象而不是一个数组。因此，要使其与您的两个 Java 类（rootObj 和 Result）一起使用，您需要在 {braces} Original 周围添加 [brackets]

```
{"result":{"id":21456,"name":"3mm nail","type":"2" }} 
```

新的

```
{"result":[{"id":21456,"name":"3mm nail","type":"2" }]} 
```

这段代码对我有用：

```
import static org.junit.Assert.assertEquals;

import java.util.List;

import org.junit.Test;

import com.google.gson.Gson;
import com.google.gson.annotations.SerializedName;

public class TestGson {
    private static final String NAME = "3mm nail";

    @Test
    public void testList() {
        final String json = "{\"result\":[{\"id\":21456,\"name\":\"" + NAME + "\",\"type\":\"2\" }]}";
        Gson gson = new Gson();
        ListWrapper wrapper = gson.fromJson(json, ListWrapper.class);
        assertEquals(NAME, wrapper.result.get(0).name);
    }

    static class ListWrapper {
        List<Result> result;
    }

    static class ObjectWrapper {
        Result result;
    }

    static class Result {
        @SerializedName("id")
        public int idItem;

        @SerializedName("name")
        public String name;
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:41:41.163

参考[这个](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)..它解释了如何在`json`不使用的情况下 解析`GSON`

# android - 授权 facebook 权限后，如果 apk 已签名，则 facebook 不会打开

> ID：15702837
> 
> 赞同：1
> 
> 时间：2013-03-29T12:03:26.107
> 
> 标签：android, facebook, andengine

当我创建一个未签名的 apk 时，在我获得要在 facebook 上发布的对话框后接受权限，但如果我在接受权限后签署 apk 以发布，则什么也不做。会是什么？

我正在使用andegine。

如果我卸载 Facebook 移动应用程序（如果它工作），有没有办法告诉我的应用程序不使用？

```
 public void facebookLogin(final String mensaje, final String caption) 
{       
    Session.openActiveSession(this, true, new Session.StatusCallback() 
    {   
        @Override
        public void call(Session session, SessionState state, Exception exception) 
        {
            if (session.isOpened()) 
            {
                Request.executeMeRequestAsync(session, new Request.GraphUserCallback() 
                {
                        @Override
                        public void onCompleted(GraphUser user, Response response) 
                        {                               
                            if (user != null) 
                            {                                                                       
                                facebookFeedDialog(mensaje, caption);
                            }
                        }
                });
            }               
        }
    });
}

public void facebookFeedDialog(String message, String caption) 
{       
    Bundle params = new Bundle();
    params.putString("name", "My Application");
    params.putString("caption", caption);
    params.putString("description", message);
    params.putString("link", "https://play.google.com/store/apps/details?id="+this.getApplication().getPackageName().toString());
    params.putString("picture", "XXXXX");       

    WebDialog feedDialog = (new WebDialog.FeedDialogBuilder(this, Session.getActiveSession(), params)).setOnCompleteListener(new OnCompleteListener() {
            @Override
            public void onComplete(Bundle values, FacebookException error) 
            {
                touchHabilitado = true;
                if (error == null) 
                {
                    final String postId = values.getString("post_id");
                    if (postId != null) 
                    {
                        // POSTED
                        toast("OK");
                    } 
                    else 
                    {
                        // POST CANCELLED
                        //toast("cancel 1");
                    }
                } 
                else if (error instanceof FacebookOperationCanceledException) 
                {
                    // POST CANCELLED
                    //toast("cancel 2");
                } 
                else 
                {
                    // ERROR POSTING
                    toast(error.getMessage());
                }                                      
           }         
    }).build();
    feedDialog.show();
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {     

        super.onActivityResult(requestCode, resultCode, data);
        Session.getActiveSession().onActivityResult(this, requestCode, resultCode, data);       
} 
```

# .net - WebApi OData 实体集/键/导航/键支持

> ID：15702843
> 
> 赞同：5
> 
> 时间：2013-03-29T12:04:06.447
> 
> 标签：.net, c#-4.0, asp.net-web-api, odata

我正在研究在 WebApi 中使用 odata。到目前为止一切顺利，我喜欢它比 wcf 数据服务更灵活。

但是，当我尝试在模型中使用虚拟 IQueryable 属性时，我遇到了问题。

所以例如我有这些模型类：

```
public class MainItem
{
    public int Id { get; set;}
    public virtual IEnumerable<SubItem> SubItems { get; set;}
} 
```

我的 MainItemsController 看起来像这样

```
public class MainItemsController : EntitySetController<MainItem, int>
{
    [Queryable]
    public override IQueryable<MainItem> Get()
    {
        return SomeMainItemIQueryable();
    }

    public override GetEntityByKey(int key) 
    {
        return SingleMainItem(key);
    }

    [Queryable]
    public IQueryable GetSubItems(int key)
    {
        return SomeSubItemIQueryable(SingleMainItem(key));
    }
} 
```

我在以下 url 上得到了正确的结果： /odata/MainItems /odata/MainItems(1) /odata/MainItems(1)/SubItems

但是当我尝试做 /odata/MainItems(1)/SubItems(1)

我收到此错误此服务不支持“~/entityset/key/navigation/key”形式的 OData 请求

我很想将此调用以及 /odata/MainItems(1)/SubItems 重定向到 SubItemsController。

我可能可以通过制作自定义 ODataPathHandler 来做到这一点，但这感觉不是正确的做法。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T18:04:36.693

这是正确的。您不需要自定义路径处理程序。它表示我们理解的有效 OData URL，并且可以将其解析为`ODataPath`. 您需要的是自定义路由约定。路由约定将 ODataPath 映射到控制器和操作。默认情况下，我们仅提供处理 WCF DS 客户端生成的 url 的基本路由约定。看起来您正在使用我们没有路由约定的 URL。不过写一个很简单。例子，

```
public class ContainmentRoutingConvention : IODataRoutingConvention
{
    public string SelectAction(ODataPath odataPath, HttpControllerContext controllerContext, ILookup<string, HttpActionDescriptor> actionMap)
    {
        IEdmEntitySet entitySet = odataPath.EntitySet;

        if (odataPath.PathTemplate == "~/entityset/key/navigation")
        {
            controllerContext.RouteData.Values["key"] = (odataPath.Segments[1] as KeyValuePathSegment).Value;
            return "Get" + entitySet.Name;
        }
        else if (odataPath.PathTemplate == "~/entityset/key/navigation/key")
        {
            controllerContext.RouteData.Values["key1"] = (odataPath.Segments[1] as KeyValuePathSegment).Value;
            controllerContext.RouteData.Values["key2"] = (odataPath.Segments[3] as KeyValuePathSegment).Value;
            return "Get" + entitySet.ElementType.Name;
        }

        return null;
    }

    public string SelectController(ODataPath odataPath, HttpRequestMessage request)
    {
        if (odataPath.PathTemplate == "~/entityset/key/navigation" ||
            odataPath.PathTemplate == "~/entityset/key/navigation/key")
        {
            IEdmNavigationProperty navigationProperty = (odataPath.Segments[2] as NavigationPathSegment).NavigationProperty;
            IEdmEntitySet entitySet = odataPath.EntitySet; // the target entity set, which would be 'SubItems';

            return entitySet.Name;
        }

        return null;
    }
} 
```

这将只处理您提到的两个网址。它也应该很容易扩展以支持其他 url。

The signature of the action that handles ~/entityset/key/navigation would be `IEnumerable<Order> GetOrders(int key)` and for the url ~/entityset/key/navigation/key, it would be `Order GetOrder(int key1, int key2)`.

# javascript - 在javascript中选择散点图的区域

> ID：15702852
> 
> 赞同：0
> 
> 时间：2013-03-29T12:04:47.267
> 
> 标签：javascript, charts, plot, selection, scatter-plot

我正在尝试使用 javascript 实现以下目标：

1.  绘制包含许多 (~10,000) 点的散点图
2.  允许用户在绘图顶部绘制弯曲形状以选择区域（我对形状的设计方式持开放态度：椭圆会很好，或者多边形，或者由贝塞尔曲线定义的路径）
3.  获取所选区域内的点列表并对其进行处理。

显然，是第 2 步导致了问题。我以前使用 jqplot 来使用类似于上面的矩形选择，但是对于这个项目的目的来说，用户能够选择一个椭圆区域是至关重要的。

任何人都可以给出任何关于哪个 javascript 库允许这样做的提示吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:11:04.230

我知道您可以使用[Raphael](http://raphaeljs.com/)创建路径。虽然我认为这其中最困难的部分将是最后一个，但我确实找到[了这一点](http://www.vb-helper.com/howto_net_point_in_polygon_path.html)（是的，我知道它是 VB，但它提供了可应用于 JavaScript 的基础）。

# mysql - 在Ruby中将字符串转换为带有区域的日期

> ID：15702857
> 
> 赞同：1
> 
> 时间：2013-03-29T12:05:01.247
> 
> 标签：mysql, ruby-on-rails

我在将字符串转换为日期对象时遇到问题，

这是我的字符串

```
dt='Fri Mar 29 2013 14:30:00 GMT 0530 (IST)' ; 
```

我想把它转换成

```
2013-03-29 09:00:00 
```

我怎样才能做到这一点 ？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:08:12.670

像这样：

```
Time.parse(string).strftime('%Y-%m-%d %h:%m:%s') 
```

[http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html](http://www.ruby-doc.org/stdlib-1.9.3/libdoc/date/rdoc/DateTime.html) 有很多关于如何格式化输出等的信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:08:40.590

红宝石很容易：

```
require 'time'
Time.parse('Fri Mar 29 2013 14:30:00 GMT 0530 (IST)').strftime('%Y-%m-%d %H:%m:%S') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-01T04:49:04.143

关键是必须减去5.5小时的时间。为此必须将其转换为时间对象，然后必须减去时间。然后必须再次转换它。一个简单的点。但我错过了。

```
time = Time.parse(time_string)
my_time = (time - 5.5*60*60).strftime("%Y-%m-%d %H:%M:%S") 
```

# ios6 - Paypal Sandbox 不适用于使用 Paypal iOS SDK 的非美国开发人员

> ID：15702860
> 
> 赞同：1
> 
> 时间：2013-03-29T12:05:14.420
> 
> 标签：ios6, paypal, payment-gateway, paypal-sandbox, paypal-adaptive-payments

在我的 iOS 应用程序中，我使用来自[https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index的 paypal sdk 集成了自适应支付](https://www.x.com/developers/paypal/documentation-tools/paypal-sdk-index)

贝宝更改他们的网站后，我无法使用上述库执行交易。

这是我的代码

```
 -(void)processSplitPaymentWithFacebuyAdminPayPalId:(NSString*)adminId sellerPayPalId:(NSString*)sellerId withAdminPercentage:(NSNumber*)adminPercentage forTotalAmount:(NSNumber*)totalAmount andShippingCharges:(NSNumber*)shippingCharges
{
    NSLog(@"!!!--------------------------------------");
    NSLog(@"AdminID: %@",adminId);
    NSLog(@"SellerID: %@",sellerId);
    NSLog(@"Admin Percentage: %@",adminPercentage);
    NSLog(@"Total Amount: %@",totalAmount);
    NSLog(@"Shipping Charges: %@",shippingCharges);
    NSLog(@"!!!--------------------------------------");

    PayPal *ppMEP = [PayPal getPayPalInst];
    ppMEP.shippingEnabled = TRUE;
    ppMEP.dynamicAmountUpdateEnabled = TRUE;
    ppMEP.feePayer = FEEPAYER_EACHRECEIVER;
    PayPalAdvancedPayment *payment = [[[PayPalAdvancedPayment alloc] init] autorelease];
    payment.paymentCurrency = @"AUD";

    payment.receiverPaymentDetails = [NSMutableArray array];

    NSArray *emails = [[NSArray alloc]initWithObjects:adminId,sellerId, nil];

    for (int i = 0; i < emails.count; i++)
    {
        PayPalReceiverPaymentDetails *details = [[[PayPalReceiverPaymentDetails
                                                   alloc] init] autorelease];

        details.invoiceData = [[[PayPalInvoiceData alloc] init] autorelease];

        float adminAmount = [adminPercentage floatValue];
        float sellerAmount = [totalAmount floatValue] - adminAmount;

        switch (i) {
            case 0:
                // Admin commission
                details.subTotal = [NSDecimalNumber decimalNumberWithString:[NSString stringWithFormat:@"%f",adminAmount]];
                details.description = @"Amount payed to Admin as a Commission";
                details.merchantName = [NSString stringWithFormat:@"%@",ADMIN];
                break;
            case 1:
                // Seller amount
                details.invoiceData.totalShipping = [NSDecimalNumber decimalNumberWithString:[NSString stringWithFormat:@"%@",shippingCharges]];
                details.subTotal = [NSDecimalNumber decimalNumberWithString:[NSString stringWithFormat:@"%f",sellerAmount]];
                details.description = @"Amount payed to Seller";
                details.merchantName = [NSString stringWithFormat:@"%@ : %@",SELLER,@"Seller Name"];
                break;
            default:
                break;
        }

        details.recipient = [emails objectAtIndex:i];
        [payment.receiverPaymentDetails addObject:details];
    }
    [ppMEP advancedCheckoutWithPayment:payment];
    [emails release];
} 
```

但是每次我尝试执行交易时，都会出现以下错误

```
 errorId: 580022
message: The receiver is based in a country that isn't enabled to receive payments 
```

我的测试帐户是为澳大利亚创建的。我的应用程序仅在澳大利亚可用。

现在我的问题是 1) 即使我的 iOS 应用程序投入生产也有关系吗？2）我们也可以使用上面链接中给出的iOS SDK还是我们需要使用最新的SDK？

我看到了一些[链接](https://stackoverflow.com/questions/15541789/paypal-adaptive-payments-in-sandbox-fails-with-error-the-receiver-is-based-in-a)，但我不清楚出了什么问题。

任何形式的帮助都将受到高度赞赏。谢谢。

更新：

如果我使用美国测试账户，那么我的交易仍然没有完成。

```
- (void)paymentFailedWithCorrelationID:(NSString *)correlationID 
```

上面的方法被调用&这里是响应

```
severity: None
category: Application
errorId: 0
message: None 
```

这是一个截图

![在此处输入图像描述](../Images/39f2ae01beaad85b1aa509ed14b10154.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T22:48:38.037

你能切换到我们新的 iOS 移动支付库吗？旧库现已弃用，鼓励每个人使用新库。

[https://developer.paypal.com/webapps/developer/docs/integration/mobile/ios-integration-guide/](https://developer.paypal.com/webapps/developer/docs/integration/mobile/ios-integration-guide/)

# bash - Bash 不尊重 $PATH？

> ID：15702863
> 
> 赞同：2
> 
> 时间：2013-03-29T12:05:21.553
> 
> 标签：bash, caching

在 OS X 10.8.3 下，有这样的环境：

```
$ bash --version
GNU bash, version 3.2.48(1)-release (x86_64-apple-darwin12)
Copyright (C) 2007 Free Software Foundation, Inc.
$ echo $PATH
/Users/r/Desktop/Beryl/usr/bin:/usr/local/mysql/bin:/usr/bin:/bin:/usr/sbin:/sbin:~/bin:/usr/local/bin:/usr/X11R6/bin 
```

$PATH中有两个副本，`irb`由以下人员正确报告`which`：

```
$ which -a irb
/Users/r/Desktop/Beryl/usr/bin/irb
/usr/bin/irb 
```

但是当我运行时，`irb`我希望得到 /Users/r/Desktop/Beryl/usr/bin/irb; 相反，我得到/usr/bin/irb：

```
$ irb --version
irb 0.9.5(05/04/13)          # this is the wrong version
$ /Users/r/Desktop/Beryl/usr/bin/irb --version
irb 0.9.6(09/06/30)
$ /usr/bin/irb --version
irb 0.9.5(05/04/13) 
```

我没有任何别名。我应该提到我通过执行这个脚本启动了 bash：

```
#!/bin/sh
export PATH=/Users/r/Desktop/Beryl/usr/bin:${PATH}
exec /bin/bash 
```

无论如何，为什么 bash 没有在 $PATH 中运行第一个实例？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T14:27:07.473

使用以下命令来确定 irb 的执行位置：

```
type irb 
```

要使 bash shell 忘记所有记住的位置，请使用：

```
hash -r 
```

看来 bash shell 以前的位置`irb`保存在内部哈希中。

在此处查看有关 bash 中哈希的详细信息：http: [//linux.about.com/library/cmd/blcmdl1_hash.htm](http://linux.about.com/library/cmd/blcmdl1_hash.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T12:55:15.007

可能是导致问题的哈希。当您第一次运行程序时，它会读取`PATH`，然后`bash`将位置保存在内部哈希中。无论`$PATH`.

使用命令列出现有位置`hash`。

您可以使用 清除哈希`hash -r`。

编辑：另见关联数组`BASH_CMDS`。

# android - 安卓应用已停止

> ID：15702865
> 
> 赞同：0
> 
> 时间：2013-03-29T12:05:24.983
> 
> 标签：android, exception

我对 Main 方法有疑问。我有一个名为 studentLife 的按钮，无论我在何处单击它，它都会带来一个带有图片的网格视图。那部分工作正常，但是当我单击特定图像时，我想带上 FullImage.class。当我单击图像时（GMITApp 已停止！）

```
I got a nullPointerException at line 141 which is: 
          Intent i = new Intent(getApplicationContext(), FullImage.class); 
```

我的代码：

```
 @Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    final Button studentLife = (Button) findViewById(R.id.student_life);
    //declare a grid view variable 
    GridView gridView = (GridView)findViewById(R.id.grid_view);

    studentLife.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {

            setContentView(R.layout.activity_gallery);
            GridView gridView = (GridView) findViewById(R.id.grid_view);
            // instance of ImageAdapter class
            gridView.setAdapter(new ImageAdapter(getApplicationContext()));

        }
    }); // end of studentLife.setOnClickListener

    gridView.setOnItemClickListener(new OnItemClickListener() {

        @Override
        public void onItemClick(AdapterView<?> parent, View v, int position,
                long id) {
            // sending image id to FullScreenActivity
            Intent i = new Intent(getApplicationContext(), FullImage.class);
            // passing array index
            i.putExtra("id", position);
            startActivity(i);       
        }
    });

}// end of onCreate 
```

这是图像类：

```
 public class FullImage extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_full_image);
        //get intent data
        Intent i = getIntent();
        // selected image id
        int position = i.getExtras().getInt("id");
        ImageAdapter imageAdapter = new ImageAdapter(this);
        ImageView imageView = (ImageView)findViewById(R.id.full_image_view);
        imageView.setImageResource(imageAdapter.mThumbIds[position]);

        //implement up navigation
        getActionBar().setDisplayHomeAsUpEnabled(true);

    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_full_image, menu);
        return true;
    }

    @Override
    public boolean onOptionsItemSelected(MenuItem item) {
        // TODO Auto-generated method stub
        switch (item.getItemId()){
        case android.R.id.home:
            //this is called when the home up button is pressed in the action bar
            Intent parentActivityIntent = new Intent(this, MainActivity.class);
            parentActivityIntent.addFlags(
            Intent.FLAG_ACTIVITY_CLEAR_TOP |
            Intent.FLAG_ACTIVITY_NEW_TASK);
            startActivity(parentActivityIntent);
            finish();
            return true;
        }
        return super.onOptionsItemSelected(item);
    }

} 
```

这是我更改为时得到`getApplicationContext()`的`MainActivity.this`

```
03-29 12:34:05.523: E/StrictMode(635): null
03-29 12:34:05.523: E/StrictMode(635): android.app.ServiceConnectionLeaked: Service com.android.exchange.ExchangeService has leaked ServiceConnection com.android.emailcommon.service.ServiceProxy$ProxyConnection@40cf36d8 that was originally bound here
03-29 12:34:05.523: E/StrictMode(635):  at android.app.LoadedApk$ServiceDispatcher.<init>(LoadedApk.java:969)
03-29 12:34:05.523: E/StrictMode(635):  at android.app.LoadedApk.getServiceDispatcher(LoadedApk.java:863)
03-29 12:34:05.523: E/StrictMode(635):  at android.app.ContextImpl.bindService(ContextImpl.java:1418)
03-29 12:34:05.523: E/StrictMode(635):  at android.app.ContextImpl.bindService(ContextImpl.java:1407)
03-29 12:34:05.523: E/StrictMode(635):  at android.content.ContextWrapper.bindService(ContextWrapper.java:473)
03-29 12:34:05.523: E/StrictMode(635):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:157)
03-29 12:34:05.523: E/StrictMode(635):  at com.android.emailcommon.service.ServiceProxy.setTask(ServiceProxy.java:145)
03-29 12:34:05.523: E/StrictMode(635):  at com.android.emailcommon.service.ServiceProxy.test(ServiceProxy.java:191)
03-29 12:34:05.523: E/StrictMode(635):  at com.android.exchange.ExchangeService$7.run(ExchangeService.java:1850)
03-29 12:34:05.523: E/StrictMode(635):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:551)
03-29 12:34:05.523: E/StrictMode(635):  at com.android.emailcommon.utility.Utility$2.doInBackground(Utility.java:549) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:28:23.313

替换**`getApplicationContext()`**为**`YOUR_ACTIVITY_NAME.this`**。

PS：请在提问时始终与您的代码一起分享 logCat 信息。

# php - 将图像上传添加到现有表单时遇到问题

> ID：15702866
> 
> 赞同：1
> 
> 时间：2013-03-29T12:05:25.163
> 
> 标签：php, forms

我正在为我的网站设置分类广告，但我发现自己又“卡住”了。

我是 PHP 新手，但我正在为分类广告和我将在下面提供的脚本开发一个更好的鼠标陷阱，我完全从头开始编写并且它可以工作。（将数据上传到数据库）但是当我添加以以下开头的 if 块时： if($_POST['Image 1'] != "") { 整个事情都崩溃了。（我得到一个没有错误消息或任何东西的白屏）。

这是此页面的完整代码；

```
<?php
    ob_start();
    session_start();
    require_once('z-mysql_ini.php');
    require ('z-connect.php');

    $mysql = new mysql();       

    if($_POST['Description'] != "") {
        $TypeID = $_POST['TypeID'];     
        $FatherID = $_POST['fatherID'];
        $Model = $_POST['Model'];
        $Price = $_POST['Price'];
        $Description = $_POST['Description'];
        $Year = $_POST['Year'];     
        $VIN = $_POST['VIN'];
        $Address = $_POST['Address'];
        $City = $_POST['City'];
        $State = $_POST['State'];
        $ZIP = $_POST['ZIP'];
        $Country = $_POST['Country'];
        $Email = $_POST['Email'];
        $Phone = $_POST['Phone'];       
        $InformOfUpdates = $_POST['Inform'];
        }   

        $node = new sqlNode();
        $node->table = sprintf("`tt_%s`", abs(intval($_POST['TypeID'])));
        $node->push("int", "CategoryID", $FatherID);    
        $node->push("int", "MemberID", $_SESSION['memberID']);
        $node->push("text", "Model", strtoupper($Model));       
        $node->push("int", "Price ($)", $Price);
        $node->push("text", "Description", $Description);
        $node->push("int", "Year", $Year);
        $node->push("text", "VIN", $VIN);
        $node->push("defined","PostDate","NOW()");
        $node->push("text","Featured","yes");
        $node->push("defined","ExpireDate","DATE_ADD(NOW(),INTERVAL 30 DAY)");
        $node->push("text", "Address", $Address);
        $node->push("text", "City", $City);
        $node->push("text", "State/Province", $State);
        $node->push("text", "ZIP/Postal", $ZIP);
        $node->push("text", "Country", $Country);
        //$node->push("text", "Email", $Email);
        //$node->push("text", "Phone", $Phone);     
        $node->push("int", "Inform", $InformOfUpdates);

        if(($result = $mysql->insert($node)) === false) {
            echo mysql_error();
            echo 'Unable to Insert Data'; 
            } else {
                $ListingID = mysql_insert_id();
                }

                if($_POST['Image 1'] != "") {   
                    echo 'File Selected and Data set in DB';
                    } else{
                        echo 'No File Selcted but Data Inserted';

                        //header("Location:memberindex.php");
                    }
                    }               

            ?> 
```

如果有人能告诉我我做错了什么导致页面崩溃，我将不胜感激，因为我可以继续重新实现分类广告附带的图像上传代码，但我什至不能在页面不死机的情况下通过这个初始的测试代码块（并且不上传到数据库。

底线是，如果我完全从页面中删除以下代码，脚本会将上面的所有变量数据上传到数据库中，但是如果我添加这段代码，整个事情就会崩溃。

```
if($_POST['Image 1'] != "") {   
                    echo 'File Selected and Data set in DB';
                    } else{
                        echo 'No File Selcted but Data Inserted';

                        //header("Location:memberindex.php");
                    } 
```

# css - HTML-Tooltip 相对于鼠标指针的位置

> ID：15702867
> 
> 赞同：75
> 
> 时间：2013-03-29T12:05:25.340
> 
> 标签：css, alignment, tooltip

如何对齐工具提示的自然风格：鼠标指针的右下角？

```
<!DOCTYPE html>
<html>
<head>
  <title>Tooltip with Image</title>
  <meta charset="UTF-8">
  <style type="text/css">
    .tooltip {
        text-decoration:none;
        position:relative;
    }
     .tooltip span {
        display:none;
    }
     .tooltip span img {
        float:left;
    }
     .tooltip:hover span {
        display:block;
        position:absolute;
        overflow:hidden;
    }
  </style>
</head>
<body>
  <a class="tooltip" href="http://www.google.com/">
    Google
    <span>
      <img alt="" src="http://www.google.com/images/srpr/logo4w.png">
    </span>
  </a>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-03-29T12:33:19.210

对于默认工具提示行为，只需添加`title`属性。但是，这不能包含图像。

```
<div title="regular tooltip">Hover me</div> 
```

在你澄清我用纯 JavaScript 完成的问题之前，希望你觉得它有用。图像将弹出并跟随鼠标。

[jsFiddle](http://jsfiddle.net/HJf8q/2/)

**JavaScript**

```
var tooltipSpan = document.getElementById('tooltip-span');

window.onmousemove = function (e) {
    var x = e.clientX,
        y = e.clientY;
    tooltipSpan.style.top = (y + 20) + 'px';
    tooltipSpan.style.left = (x + 20) + 'px';
}; 
```

**CSS**

```
.tooltip span {
    display:none;
}
.tooltip:hover span {
    display:block;
    position:fixed;
    overflow:hidden;
} 
```

## 扩展多个元素

多个元素的一种解决方案是更新所有 tooltip`span`并在鼠标移动时将它们设置在光标下。

[jsFiddle](http://jsfiddle.net/JVDFc/)

```
var tooltips = document.querySelectorAll('.tooltip span');

window.onmousemove = function (e) {
    var x = (e.clientX + 20) + 'px',
        y = (e.clientY + 20) + 'px';
    for (var i = 0; i < tooltips.length; i++) {
        tooltips[i].style.top = y;
        tooltips[i].style.left = x;
    }
}; 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2016-06-29T09:15:53.623

在没有 JS 的情况下执行此操作的一种方法是使用悬停动作来显示隐藏的 HTML 元素，请参阅此代码笔：

[http://codepen.io/c0un7z3r0/pen/LZWXEw](http://codepen.io/c0un7z3r0/pen/LZWXEw)

请注意，包含工具提示内容的 span 相对于父 li。魔法就在这里：

```
ul#list_of_thrones li > span{
  display:none;
}
ul#list_of_thrones li:hover > span{
  position: absolute;
  display:block;
  ...
} 
```

如您所见，除非将 listitem 悬停在上面，否则 span 是隐藏的，从而显示 span 元素，span 可以包含您需要的尽可能多的 html。在随附的代码笔中，我还为箭头使用了 :after 元素，但这当然是完全可选的，并且仅出于美观目的而包含在此示例中。

我希望这会有所帮助，因为所有其他答案都包括 JS 解决方案，但 OP 要求仅提供 HTML/CSS 解决方案，因此我不得不发布。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2016-03-29T19:58:47.983

我更喜欢这种技术：

```
function showTooltip(e) {
  var tooltip = e.target.classList.contains("tooltip")
      ? e.target
      : e.target.querySelector(":scope .tooltip");
  tooltip.style.left =
      (e.pageX + tooltip.clientWidth + 10 < document.body.clientWidth)
          ? (e.pageX + 10 + "px")
          : (document.body.clientWidth + 5 - tooltip.clientWidth + "px");
  tooltip.style.top =
      (e.pageY + tooltip.clientHeight + 10 < document.body.clientHeight)
          ? (e.pageY + 10 + "px")
          : (document.body.clientHeight + 5 - tooltip.clientHeight + "px");
}

var tooltips = document.querySelectorAll('.couponcode');
for(var i = 0; i < tooltips.length; i++) {
  tooltips[i].addEventListener('mousemove', showTooltip);
}
```

```
.couponcode {
    color: red;
    cursor: pointer;
}

.couponcode:hover .tooltip {
    display: block;
}

.tooltip {
    position: absolute;
    white-space: nowrap;
    display: none;
    background: #ffffcc;
    border: 1px solid black;
    padding: 5px;
    z-index: 1000;
    color: black;
}
```

```
Lorem ipsum dolor sit amet, <span class="couponcode">consectetur
adipiscing<span class="tooltip">This is a tooltip</span></span>
elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
ut aliquip ex ea commodo consequat. Duis aute irure dolor in <span
class="couponcode">reprehenderit<span class="tooltip">This is
another tooltip</span></span> in voluptate velit esse cillum dolore eu
fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident,
sunt in culpa qui officia deserunt mollit anim id est <span
class="couponcode">laborum<span class="tooltip">This is yet
another tooltip</span></span>.
```

（另见[**这个小提琴**](https://jsfiddle.net/mgbv5tzx/209/)）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2015-03-06T18:51:57.267

您可以使用 jQuery UI 插件，以下是参考 URL

*   [http://jqueryui.com/tooltip/](http://jqueryui.com/tooltip/)
*   [http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/](http://bassistance.de/jquery-plugins/jquery-plugin-tooltip/)
*   [http://jquery-plugins.bassistance.de/tooltip/demo/](http://jquery-plugins.bassistance.de/tooltip/demo/)

将相对于鼠标指针的工具提示位置设置为 TRUE，例如。

```
$('.tooltip').tooltip({ track: true });
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2020-01-24T16:26:21.130

这可以用纯 html 和 css 来完成。这可能不是最好的方法，但我们都有不同的限制。根据您的具体情况，有 3 种方法可能有用。

1.  第一个涉及在链接顶部覆盖一个不可见的表格，并在每个显示图像的单元格上进行悬停操作。

```
#imagehover td:hover::after{
  content: "             ";
  white-space: pre;
  background-image: url("http://www.google.com/images/srpr/logo4w.png");
  position: relative;
  left: 5px;
  top: 5px;
  font-size: 20px;
  background-color: transparent;
  background-position: 0px 0px;
  background-size: 60px 20px;
  background-repeat: no-repeat;

}

#imagehover table, #imagehover th, #imagehover td {
  border: 0px;
  border-spacing: 0px;
}
```

```
<a href="https://www.google.com">
<table id="imagehover" style="width:50px;height:10px;z-index:9999;position:absolute" cellspacing="0">
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>
<tr><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td><td></td></tr>

</table>
Google</a>
```

2.  第二个依赖于能够创建自己的光标图像

```
#googleLink{

cursor: url(https://winter-bush-d06c.sto.workers.dev/cursor-extern.php?id=98272),url(https://9dc1a5c00e8109665645209c2d036b1c.cloudflareworkers.com/cursor-extern.php?id=98272),auto;

}
```

```
<a href="https://www.google.com" id="googleLink">Google</a>
```

3.  虽然普通的标题工具提示在技术上不允许使用图像，但它确实允许任何[unicode 字符](https://en.wikipedia.org/wiki/List_of_Unicode_characters)，包括可能适合您需要的[正楷](https://en.wikipedia.org/wiki/Enclosed_Alphanumeric_Supplement)和[表情符号。](https://en.wikipedia.org/wiki/Emoji#Unicode_blocks)

```
<a href="https://www.google.com" title="️️" alt="️️">Google</a>
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-12-08T02:30:29.080

我们可以使用 Angularjs 中的“指令”来实现相同的目的。

```
 //Bind mousemove event to the element which will show tooltip
            $("#tooltip").mousemove(function(e) {
                //find X & Y coodrinates
                x = e.clientX,
                y = e.clientY;

                //Set tooltip position according to mouse position
                tooltipSpan.style.top = (y + 20) + 'px';
                tooltipSpan.style.left = (x + 20) + 'px';
            }); 
```

您可以查看此帖子以获取更多详细信息。 [http://www.ufthelp.com/2014/12/Tooltip-Directive-AngularJS.html](http://www.ufthelp.com/2014/12/Tooltip-Directive-AngularJS.html)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2022-01-06T04:42:36.250

```
function showTooltip(e) {
  var tooltip = e.target.classList.contains("tooltip")
      ? e.target
      : e.target.querySelector(":scope .tooltip");
  tooltip.style.left =
      (e.clientX + tooltip.clientWidth + 10 < document.documentElement.clientWidth)
          ? (e.clientX + 10 + "px")
          : (document.documentElement.clientWidth + 5 - tooltip.clientWidth + "px");
  tooltip.style.top =
      (e.clientY + tooltip.clientHeight + 10 < document.documentElement.clientHeight)
          ? (e.clientY + 10 + "px")
          : (document.documentElement.clientHeight + 5 - tooltip.clientHeight + "px");
}

var tooltips = document.querySelectorAll('.hastip');
for(var i = 0; i < tooltips.length; i++) {
  tooltips[i].addEventListener('mousemove', showTooltip);
}
```

```
.hastip {
    border-bottom: 1px dotted black;
    position: relative;
    display: inline-block;
    cursor: pointer;
}

.hastip:hover .tooltip {
    display: block;
}

.tooltip {
    position: fixed;
    white-space: nowrap;
    display: none;
    background-color: #ffffcc;
    border: 1px solid black;
    color: #000;
    padding: 5px;
    border-radius: 6px;
    z-index: 1000;
    font-size: 13pt;
    font-weight: initial;
}
```

```
Lorem ipsum dolor sit amet, <span class="hastip">consectetur
adipiscing<span class="tooltip">This is a tooltip</span></span>
elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua.
Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi
ut aliquip ex ea commodo consequat. Duis aute irure dolor in <span
class="hastip">reprehenderit<span class="tooltip">This is
another tooltip</span></span> in voluptate velit esse cillum dolore eu
fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident,
sunt in culpa qui officia deserunt mollit anim id est <span
class="hastip">laborum<span class="tooltip">This is yet
another tooltip</span></span>.
```

# cocoa - 如何在 NSOutlineView 中合并单元格

> ID：15702868
> 
> 赞同：2
> 
> 时间：2013-03-29T12:05:26.793
> 
> 标签：cocoa, nsoutlineview

我有一个包含多列的 NSOutlineView。如何合并组节点的单元格，以便我将额外的空间用于节点标题？例如，我有子节点的“名称”、“身高”、“体重”等列，但我需要组节点说“比佛利山庄高中足球队”，这太长而无法放入一列，所以我需要在组节点中展开该列的框架。

我试图找到答案，但我能找到的只是 NSTableView 的解决方案，它们涉及子类化，NSOutlineView 类引用明确表示你不应该这样做。接下来想到的是使用类别来重新定义 NSOutlineView 方法，但在网上阅读了一些内容后再次决定反对它。

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T11:49:43.223

我已按照[http://www.mactech.com/articles/mactech/Vol.18/18.11/1811TableTechniques/index.html](http://www.mactech.com/articles/mactech/Vol.18/18.11/1811TableTechniques/index.html)上的说明进行操作，并且成功了。没有显示单元格的问题是由空的 drawRect 实现引起的。我将其删除并留给 NSTextfieldCell 处理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-07T16:33:12.553

如果您只需要为选择节点（通常是根节点）执行此操作，那么请尝试`NSTextFieldCell`在方法中为 nil 列返回一个单元格（例如，在您的情况下）[`-[NSOutlineViewDelegate outlineView:dataCellForTableColumn:item:]`](http://developer.apple.com/library/Mac/documentation/Cocoa/Reference/NSOutlineViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSOutlineViewDelegate/outlineView%3adataCellForTableColumn%3aitem%3a)- 在其讨论和文档中阅读更多信息。然后，您可能还希望覆盖[`[NSOutlineViewDelegate – outlineView:isGroupItem:]`](http://developer.apple.com/library/Mac/documentation/Cocoa/Reference/NSOutlineViewDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSOutlineViewDelegate/outlineView%3aisGroupItem%3a)这些节点以返回 YES 以获得更有趣的外观。

# objective-c - 获取窗口的 windowController

> ID：15702871
> 
> 赞同：0
> 
> 时间：2013-03-29T12:05:28.853
> 
> 标签：objective-c, cocoa, nswindow, nswindowcontroller

我能够找到当前打开的窗口：

```
NSWindow *currentWindow = [NSApp keyWindow]; 
```

但是我怎么知道哪个类控制这个窗口，即上面窗口的窗口控制器？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:06:50.703

试试这个：

```
 NSLog(@"WindowController is : %@",[[currentWindow windowController] class]); 
```

# javascript - 如何为回调创建包装器？

> ID：15702873
> 
> 赞同：2
> 
> 时间：2013-03-29T12:05:32.193
> 
> 标签：javascript, jquery, jquery-forms-plugin

我使用 ajaxSubmit。

```
form.ajaxSubmit(successCallback); 
```

我需要为 successCallback 创建包装器。

这该怎么做？

我试过

```
form.ajaxSubmit(wrapperCallBack(successCallback));

var wrapperCallBack = function (successCallback) {
        debugger;
        changeState(false);
        successCallback(this);
    }; 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-29T12:08:56.857

你非常接近：

```
form.ajaxSubmit(wrapperCallBack(successCallback));

var wrapperCallBack = function (successCallback) {
    return function() {
        changeState(false);
        return successCallback(this);
    };
}; 
```

或者我更喜欢这样写：

```
form.ajaxSubmit(wrapperCallBack(successCallback));

function wrapperCallBack(successCallback) {
    return function() {
        changeState(false);
        return successCallback(this);
    };
} 
```

在那里，`wrapperCallback`创建一个函数来包装其参数（`successCallback`参数）并返回该函数。

两者都假设您将`wrapperCallBack`多次使用来创建包装器。如果您只需要一次性，那么您可以使用内联匿名函数：

```
form.ajaxSubmit(function() {
    changeState(false);
    return successCallback(this);
}); 
```

# regex - 这个正则表达式应该做什么？^[\d\D]{1,}$

> ID：15702881
> 
> 赞同：2
> 
> 时间：2013-03-29T12:06:00.830
> 
> 标签：regex, preg-match

当谈到正则表达式时，我并不完全是专业人士，我有一个 PHP 脚本可以通过这个正则表达式运行：

```
^[\d\D]{1,}$ 
```

这应该做什么，似乎它匹配一切？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:09:10.387

*   `\d`匹配任何数字
*   `\D`匹配任何非数字。
*   `[\d\D]`匹配所有数字和非数字。
*   `{1,}`要求比赛`[]`至少重复 1 次（没有上限）。

所以它匹配其中至少有 1 个字符的所有内容。

参考：[http ://www.regular-expressions.info/reference.html](http://www.regular-expressions.info/reference.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:10:19.847

简而言之，正则表达式所做的就是：

```
^.+$ 
```

这意味着匹配任何长度为 1 或更大的字符（数字或非数字）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T12:37:26.687

`^[\d\D]{1,}$`将匹配包含一个或多个`{1,}`任何数字`\d`或非数字`\D`字符（*包括*换行符）的字符串。

相反`^.+$`，将匹配包含一个或多个*除*换行符之外的任何字符的字符串。如果将单行修饰符添加到正则表达式中，即`/^.+$/s`也`.`将匹配任何字符，包括换行符。

`[\d\D]`等效于`.`在单行模式下使用，尽管更常见`[\s\S]`的是使用相同的结果。

`+`相当于`{1,}`。

The regex will match the whole of any string that contains at least one character of any kind.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T12:13:05.617

你说的对。事实上，任何至少有一个字符长的东西。但是以一种过于复杂和毫无意义的方式。`[\d\D]`等价于`.`并且`{1,}`等价于`+`

# iphone - 来自 iPod 库的某些歌曲的 commonMetadata 数组为空

> ID：15702886
> 
> 赞同：3
> 
> 时间：2013-03-29T12:06:17.340
> 
> 标签：iphone, avasset

我正在使用 a`MPMediaPickerController`使用户能够从设备的 iPod 库中挑选歌曲。然后我将这些歌曲放入一个数组（在这种情况下`playerQueue`）并使用一个`AVPlayer`实例来播放一首又一首的歌曲：

```
- (void)setQueueWithItemCollection:(MPMediaItemCollection *)theCollection {

    for (MPMediaItem *theMediaItem in theCollection.items) {

        NSURL *mediaURL = [theMediaItem valueForProperty:MPMediaItemPropertyAssetURL];
        AVPlayerItem *thePlayerItem = [AVPlayerItem playerItemWithURL:mediaURL];

        // Don't add protected tracks to queue as they cannot be played
        if (!thePlayerItem.asset.hasProtectedContent && thePlayerItem.asset.isPlayable) [self.playerQueue addObject:thePlayerItem];

        // Further implementation
    }
} 
```

现在我使用这个代码片段（带`AVPlayer *musicPlayer`）获得歌曲标题：

```
AVPlayerItem *currentItem = self.musicPlayer.currentItem;
AVAsset *asset = currentItem.asset;

// Further implementation

NSLog(@"DEBUG: Meta data: %@", asset.commonMetadata);

NSArray *titles = [AVMetadataItem metadataItemsFromArray:asset.commonMetadata withKey:AVMetadataCommonKeyTitle keySpace:AVMetadataKeySpaceCommon]; 
```

大多数情况下，这没有任何问题。但也有`asset.commonMetadata`返回空数组的歌曲。但是，我 iPhone 上的音乐应用程序能够像 iTunes（在 Mac 上）一样显示歌曲标题（和专辑封面等）。

歌曲文件是`Apple MPEG 4 Audio`从 iTunes Store 购买的文件。

`asset.commonMetadata`即使有可用的元数据，为什么返回一个空数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-11T18:40:41.430

我在下载 m4b 音频文件时遇到了同样的问题。原来 AVURLAsset 要求 URL 字符串以“.m4b”结尾（我怀疑其他音频扩展也可以）。如果 URL 类似于[http://source.com/download.php?id=12345](http://source.com/download.php?id=12345) ，则不能按原样使用 URL 。否则，asset.commonMetaData 只会返回一个空数组。我不知道这是否是 iTunes 资产 URL 的问题，但很容易检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-30T13:43:39.470

唯一对我有用的解决方案：

用于`AudioToolbox.framework`从此类文件中检索元数据，即使用`AudioFileGetProperty`函数。

这似乎是一个真正的错误`AVFoundation`……

# php - 我的 PHP MYSQL 代码中的这个 INTERVAL 语法有什么问题？

> ID：15702888
> 
> 赞同：0
> 
> 时间：2013-03-29T12:06:20.013
> 
> 标签：php, mysql

设置 INTERVAL 时，我似乎无法更新数据库

```
$update_query="UPDATE subscriber SET txn_type='$txn_type', expire_date=(CURDATE(),INTERVAL 1 MONTH), subscription_type='$item_name', last_payment = NOW(), subscr_id ='$subscr_id', txnid = '$txn_id', payment_status='paid' WHERE id= '$id'"; 
```

但是没有间隔它工作正常

```
$update_query="UPDATE subscriber SET txn_type='$txn_type', expire_date=CURDATE(), subscription_type='$item_name', last_payment = NOW(), subscr_id ='$subscr_id', txnid = '$txn_id', payment_status='paid' WHERE id= '$id'"; 
```

我到处看，这似乎是设置间隔的正确方法。我错过了什么吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T12:07:18.627

我猜你的意思是增加1个月：

```
expire_date= CURDATE() + INTERVAL 1 MONTH, 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:11:10.570

试试这个

```
 expire_date=DATE_ADD(NOW(), INTERVAL 1 MONTH) 
```

# android - 如何在不使用 Intent 的情况下从 android 共享 Google Plus (G+) 中的文本和图像？

> ID：15702891
> 
> 赞同：3
> 
> 时间：2013-03-29T12:06:46.663
> 
> 标签：android, google-api, google-plus

我想分享的人`G+.`我知道有`G+ API`相同的`FaceBook & Twitter`。我得到[这个文档](https://developers.google.com/+/mobile/android/getting-started)并遵循相同的过程。

我发现我们可以通过两种不同的方式分享，

*   深层链接
*   互动帖子

并基于此我必须选择`DeepLink`共享。

我已经到达[这里，](https://developers.google.com/+/mobile/android/share) 但是当我尝试将该代码复制并粘贴到我的`new_project`然后它不起作用。说喜欢

`The constructor PlusShare.Builder(Activity) is not visible`.

我发现了很多，但最后我得到了相同的 API 链接。不知道如何完成这个任务。我已经在 Facebook 和 Twiiter 上分享过，但在 G+ 上没有成功。

请各位大神帮帮我。

提前致谢

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-02T06:54:58.093

```
public void share_image_text_GPLUS() {
    File pictureFile;

    try {
        File rootSdDirectory = Environment.getExternalStorageDirectory();

        pictureFile = new File(rootSdDirectory, "attachment.jpg");
        if (pictureFile.exists()) {
            pictureFile.delete();
        }
        pictureFile.createNewFile();

        FileOutputStream fos = new FileOutputStream(pictureFile);

        URL url = new URL("http://img.youtube.com/vi/AxeOPU6n1_M/0.jpg");
        HttpURLConnection connection = (HttpURLConnection) url
                .openConnection();
        connection.setRequestMethod("GET");
        connection.setDoOutput(true);
        connection.connect();
        InputStream in = connection.getInputStream();

        byte[] buffer = new byte[1024];
        int size = 0;
        while ((size = in.read(buffer)) > 0) {
            fos.write(buffer, 0, size);
        }
        fos.close();

    } catch (Exception e) {

        System.out.print(e);
        // e.printStackTrace();
        return;
    }

    Uri pictureUri = Uri.fromFile(pictureFile);

    Intent shareIntent = ShareCompat.IntentBuilder.from(this)
            .setText("Hello from Google+!").setType("image/jpeg")
            .setStream(pictureUri).getIntent()
            .setPackage("com.google.android.apps.plus");
    startActivity(shareIntent);
}

    buttonLoadImage.setOnClickListener(new View.OnClickListener() {
        @Override
        public void onClick(View v) {
            share_image_text_GPLUS();

        }
    }); 
```

# jquery - 为什么将 jQuery.data() 与 firefox 一起使用会给出“错误：访问属性的权限被拒绝”？

> ID：15702896
> 
> 赞同：0
> 
> 时间：2013-03-29T12:07:00.380
> 
> 标签：jquery, firefox

当尝试更改元素的数据属性时，总是会发生这种情况。这意味着第一次设置数据属性可以正常工作，但无法更改值？测试它很简单，即使在萤火虫中也是如此。见下图。

![在 Firefox 中更改数据属性失败](../Images/8f4c26865b10581ea8420a8c11ae3c2e.png)

在所有其他报告的此错误消息案例中，它与 iFrames 有关，但这与它无关。

希望有人对此有任何信息。

# php - PHP 连接名称并更新 SQL 字段

> ID：15702898
> 
> 赞同：1
> 
> 时间：2013-03-29T12:07:03.370
> 
> 标签：php, mysql, concatenation

首先，这是我的代码

```
$qry="SELECT * FROM Members WHERE member_id = '".$_SESSION['SESS_MEMBER_ID']."'";
$result=mysql_query($qry);
$check = mysql_fetch_assoc($result);

if($check['fullname'] == 0) {
$qry1 = "SELECT CONCAT( fname, ' ', lname ) AS firstlast FROM Members WHERE member_id = '".$_SESSION['SESS_MEMBER_ID']."'";
$result1 = mysql_query($qry1);
$qry2 = "UPDATE Members SET fullname = '$result1'"; } 
```

我正在尝试执行以下操作：-

1.  根据 member_id 检查成员表中的“全名”字段是否为 0（这是默认值）
2.  如果是，则将 fname 和 lname 字段连接成一个字符串，中间有一个空格
3.  获取这个连接的字符串并将其放回“全名”字段中的成员表中

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-29T12:11:36.937

在不知道您的问题的情况下，您可以在一个查询中完成所有这些操作：

```
UPDATE Members SET fullname=CONCAT(fname,' ',lname) 
      WHERE fullname=0 AND member_id = '".$_SESSION['SESS_MEMBER_ID']."' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-29T12:12:00.030

您可以通过单个查询轻松实现此目的：

```
UPDATE `Members` 
SET `fullname` = CONCAT(`fname`, ' ', `lname`) 
WHERE `member_id` = '".$_SESSION['SESS_MEMBER_ID']."' 
  AND `fullname` = 0 
LIMIT 1; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T12:12:24.213

您只需一个查询即可完成。

```
$query = "UPDATE Members SET fullname = CONCAT( fname, ' ', lname )
          WHERE member_id = {$_SESSION['SESS_MEMBER_ID']}
          AND fullname = 0" 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-29T12:12:04.877

尝试 ：

```
$qry1 = "UPDATE Members SET fullname = CONCAT( fname, ' ', lname ) WHERE member_id = '".$_SESSION['SESS_MEMBER_ID']."'"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-29T12:15:10.093

您实际上可以在一个查询中执行此操作，（*无需调用 select 一次*）

```
UPDATE  Members a
SET     a.fullName = IF(fullname = 0, CONCAT(fname, ' ',lname), fullName)
WHERE   member_ID = 'memberIDHERE' 
```

# c# - 从其他班级访问时不显示文本框消息

> ID：15702900
> 
> 赞同：-1
> 
> 时间：2013-03-29T12:07:04.430
> 
> 标签：c#, winforms

我有以下代码

```
namespace Spaceship_Invaders
{
    public partial class Form1 : Form
    {

        public Form1()
        {
            InitializeComponent();

        }

        public class spaceship
        {

            Form1 myform = new Form1();           

            public void mspaceship()
            {              
                myform.textBox1.Text = " working";               

            }
        }

        private void button4_Click(object sender, EventArgs e)
        {
            spaceship myspaceship = new spaceship();
            myspaceship.mspaceship();

        }

    }
} 
```

当我单击按钮 textbox1 不显示任何内容。请告诉我我在这里缺少什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:08:19.840

您正在将文本设置在与您正在显示的表单实例不同的表单实例上。该类`spaceship`在这里创建一个新表单：

```
Form1 myform = new Form1(); 
```

并继续使用它。这不是可见的形式，所以你看不到效果。

您需要传入`Form1`实例才能使其工作，并且`spaceship`可能应该将其作为构造函数参数。`this`您可以使用关键字在实例方法中获取对当前实例的引用。一个工作示例是：

```
public class spaceship
{
    public spaceship(Form1 form)
    {
        myForm = form;
    }

    Form1 myform;

    public void mspaceship()
    {              
        myform.textBox1.Text = " working";               

    }
}

private void button4_Click(object sender, EventArgs e)
{
    spaceship myspaceship = new spaceship(this);
    myspaceship.mspaceship();

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:12:04.957

您需要将其`Form`作为变量传递并将其存储在您的 Spaceship 类中。

```
public class Spaceship
{ 
     Form1 _form;       
     public Spaceship(Form1 myform)
     {
        _form = myform;
     }   

     public void mspaceship()
     {              
          _form.textBox1.Text = " working";                
     }
} 
```

然后在按钮中传递当前类：

```
Spaceship myspaceship = new Spaceship(this);
myspaceship.mspaceship(); 
```

[就个人而言，我可能会使用Properties](http://msdn.microsoft.com/en-us/library/x9fsa0sw.aspx)做这样的事情。

```
 public class Spaceship
 { 
      public String Name { get; set; }     
      public Spaceship(string name)
      {
         Name = name;
      }   
 } 
```

在按钮内，您使用以下内容。

```
Spaceship spaceship = Spaceship("Enterprise");
this.textBox1.Text = spaceship.Name; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-29T12:22:06.147

我建议稍微改变你的设计，所以每个班级都有自己的责任：

```
namespace Spaceship_Invaders
{
    public partial class Form1 : Form
    {
        private Spaceship _myspaceship;

        public Form1()
        {
            InitializeComponent();
        }

        private void button4_Click(object sender, EventArgs e)
        {
            _myspaceship = new spaceship();
            this.textBox1.Text = myspaceship.mspaceship();
        }
    }

    public class Spaceship
    {
        public string mspaceship()
        {              
            return " working";               
        }
    }
} 
```

# assembly - MIPS 上的嵌套子程序调用

> ID：15702910
> 
> 赞同：5
> 
> 时间：2013-03-29T11:36:44.300
> 
> 标签：assembly, mips

```
.data

.text
    .globl __start
    __start:

main:
    jal func
    sll $0,$0,0
    j end

func:
   jal func2
   sll $0,$0,0  
   jr $ra
   sll $0,$0,0

func2:
    jr $ra
    sll $0,$0,0

end 
```

我正在使用 PCSpim。为什么它只是停止工作？我的错误是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T12:13:48.470

当您在 func 中执行跳转和链接时，您正在执行 func2 函数，并且返回地址 ($ra) 设置为跳转和链接 (PC+4) 之后的行。在 func2 子例程中，您将立即返回到保存在返回地址中的位置（func 中的 sll）。在班次之后，您试图再次跳转到返回地址，这是 func 中的 sll，这会导致无限循环。

换句话说，当你进行连续的子程序调用时，你必须分别保存和恢复子程序调用前后的返回地址。

```
foo:
    #do some functiony stuff
    mov    $s0, $ra    #save return address into s0
    jal    bar         #do the bar subroutine
    mov    $ra, $s0    #restore return address that was saved into s0
    jr     $ra         #jump there

bar:
    #do some more functiony stuff
    jr     $ra 
```

您还需要确保您的“结束”被标记为标签（在其后添加一个冒号）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-29T12:14:34.920

之后`jal func`，`ra`包含`func`必须返回的地址。`jal func2`覆盖`ra`. `func2`然后返回`func1`并`func1`返回同一个地址，永远循环。

如果一个函数调用另一个函数，它必须在所有调用之前保存`ra`并在所有调用之后和返回之前恢复它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-04-05T20:08:34.810

您必须**保存退货地址**

例如：

```
 main:
 ...
 jal func1
 ...

 func1:
    sw $ra, ($sp) # save address   
    ...
    jal func2
    ...
    lw $ra, ($sp) # load
    jr $ra

 func2:
    .... 
```

# android - 如何将 &,< 字符替换为 & , < 在为 android 解析的 xml 文件中？

> ID：15702913
> 
> 赞同：2
> 
> 时间：2013-03-29T12:07:57.137
> 
> 标签：android, xml-parsing

这是我想要更改的 xml 文件的部分......这个文件没有存储在我的项目资产中，它是 web 上的 xml 文件，我使用 XMLPull 解析器进行解析

```
<exclusion_criteria>
Poor condition (centre determined), acute leukemia in relapse (&lt10% blasts), second transplants, active infection, HIV infection, T-cell antibody prophylaxis (antithymocyte globulin, anti-CD52 etc), use of cord blood grafts, T-cell depletion of grafts
            </exclusion_criteria>
        </report>

        <report>

            <tumour_disease>
Bone Marrow Transplants
            </tumour_disease>

            <trial_status>
Active- Recruiting
            </trial_status>

            <short_title>
Haplo Transplants
            </short_title>

            <title>
Haploidentical donor stem cell transplantatation for myeloid malignancies - a phase I/II pilot study in an Australian population
            </title>

            <trial_register_number>
            </trial_register_number>

            <sponsors>
St Vincents Hospital
            </sponsors>

            <trial_phase>
Phase I/II
            </trial_phase>

            <locations>
St Vincents Hospital~
            </locations>

            <lead_site>
St Vincents Hospital
            </lead_site>

            <inclusion_criteria>
Patients aged 16-50 years with haematological malignancy requiring stem cell transplantation (acute myeloid leukaemia in CR1 or CR2, intermediate-high risk myelodysplasia, chronic myeloid leukaemia in CP2-resistant to TKIs, relapsed and refractory lymphoproliferative diseases or Hodgkins lymphomas) lacking a fully HLA-matched donor; with a partially (=5/6) HLA-mismatched donor; adequate organ function (cardiac, pulmonary, renal & hepatic 
            </inclusion_criteria>

            <exclusion_criteria>
Life expectancy < 3months; psychiatric conditioning impairing provision of informed consent; active malignant disease (excluding BCC and SCC; receiving concurrent investigational drugs; pregnant or lactating women
            </exclusion_criteria> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T14:18:32.213

参考这个：[XmlPullParser](http://developer.android.com/reference/org/xmlpull/v1/XmlPullParser.html)

您是否正在搜索这样的内容：

```
if(eventType == XmlPullParser.TEXT) 
{
    String text = xpp.getText();
    if( text.contains("&") )
        text = text.replace("&", "&amp;");
    if( text.contains("<" ) )
        text = text.replace("<", "&lt;");
} 
```

编辑：这是您如何在 a 中获取 xml 的方法`String`：

```
String xmlStr = "";

HttpGet uri = new HttpGet(params[0]);

DefaultHttpClient client = new DefaultHttpClient();

HttpResponse resp = client.execute(uri);
StatusLine status = resp.getStatusLine();
if( status.getStatusCode() == 200 )
{
    DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
    DocumentBuilder builder = factory.newDocumentBuilder();
    Document doc = builder.parse(resp.getEntity().getContent());

    TransformerFactory transformerfactory = TransformerFactory.newInstance();
    Transformer transformer = transformerfactory.newTransformer();
    transformer.setOutputProperty(OutputKeys.INDENT, "yes");

    StringWriter stringWriter = new StringWriter();
    transformer.transform(new DOMSource(doc), new StreamResult(stringWriter));  

    // Now you can fix the invalid characters in your xml and put it in the parser  
    xmlStr = stringWriter.toString();
} 
```

# apache - 通过将主机名放在主机文件中来加速 Apache 重定向

> ID：15702915
> 
> 赞同：6
> 
> 时间：2013-03-29T12:08:07.120
> 
> 标签：apache, redirect, apache2, virtualhost, hosts

我正在使用 apache 并且有一个域，例如：www.example.com。我使用以下命令将 example.com 重定向到 www.example.com：

[https://stackoverflow.com/a/1100363/441907](https://stackoverflow.com/a/1100363/441907)

我还有一个 www.example.com 的虚拟主机条目。

然后我遇到了性能问题，通过将 www.example.com 放入 127.0.0.1 的主机文件中解决了这些问题。

我的问题是：

我是否也可以通过将 example.com 放入 hosts 文件来提高性能，或者这是否没有意义，因为它只是被解析为已经在 hosts 文件中的 www.example.com？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-09T06:11:34.823

如果你想避免*任何*DNS 查找，你应该把这两个条目都放在你的 hosts 文件中：

```
127.0.0.1 www.example.com example.com 
```

添加`example.com`会加快对 的第一个请求`http://example.com`，而只是`www.example.com`在重定向后加快后续页面加载。

In other words, taking out `example.com` only matters if a) you're accessing the site via its non-canonical name and b) you're actually worried about the one-time delay it incurs.

Having said that, it should be mentioned that this is only useful during development though :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-07T07:58:31.987

我认为，将*example.com*放入您的 hosts 文件确实有点没有意义，因为根据您链接的配置，它`ServerName example.com`会永久重定向到*www.example.com/ 。*而且您还可以详细编辑您的问题，以便其他人可以得到您的性能问题，如果我能猜到，我什至可以改进这个答案。实际上，**您**可以自己测试它，如果将*example.com*放入您的 hosts 文件中性能会提高，我想通过比较它们在此类网站上的速度[http://network-tools.com/default.asp?prog= dnsrec&host=](http://network-tools.com/default.asp?prog=dnsrec&host=)但我不确定。但是，我确信有一个用于测试性能的软件应用程序。

您仍然可以暂时删除*example.com*的重定向，并检查它是否有类似*www.example.com*的问题，如果有，则尝试将其放入 hosts 文件中。如果通过这样做来修复它，对我来说，即使我要将它重定向到其顶级域，我也会将该域放入 hosts 文件中。如果*example.com*之前曾经出现过类似*www.example.com*的性能问题，那么该性能可能也会影响 URL 重定向的速度。

# windows-runtime - 是否可以将 WinJS 应用程序迁移到 C#/XAML WinRT，反之亦然

> ID：15702923
> 
> 赞同：0
> 
> 时间：2013-03-29T12:08:22.630
> 
> 标签：windows-runtime, migration, winjs

我为 Windows 商店开发并发布了一个 Javascript WinJS 应用程序。抛开原因不谈，是否可以上传这个完全用 C#/WinRT/XAML 编写的应用程序的下一个版本？在这种情况下如何迁移 IndexedDB 数据库数据？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-30T07:39:56.430

是的，您只需将您的 C#/XAML 代码与商店中的现有应用程序相关联，然后`.appxupload`像以前一样上传，此时它基本上与语言无关。

IndexedDB 会更难，也许最接近的类似物是 SQLite，尽管它们远非完全相同。

# php - ajax + php + mysql：（另一个）字符集问题

> ID：15702929
> 
> 赞同：0
> 
> 时间：2013-03-29T12:08:48.527
> 
> 标签：php, jquery, mysql, ajax, character-encoding

我遇到了字符集问题，我正在疯狂地寻找解决方案。这就是我所拥有的：

*   我有一个 MySQL 数据库，其中 'latin1_spanish_ci' 作为数据库、表和每个字段的排序规则。
*   标题为 '<meta http-equiv="Content-type" content="text/html; charset=iso-8859-1">' 的 html 文件有一个表单。当按下按钮时，将调用一个 Ajax，它将一个 POST 请求发送到 PHP。
*   调用 'header('Content-type: text/html; charset=iso-8859-1');' 的 PHP 在顶部。这个 PHP 对数据库进行查询以获取数据列表。
*   AJAX 调用如下：

    $.ajax({ url:"llistat.php", type: "POST", data: { 扇区: $("#sector").val(), cp : $("#cp").val(),省：$("#province").val()，免费：$("#free").val()}，成功：函数（数据）{ $("#results").html(""); $("#results").append(data); }, contentType: "application/x-www-form-urlencoded; charset=iso-8859-1" });

问题...

1.  如果我在 PHP 中保留字符集标头，则字符会从数据库中正确获取，但通过 AJAX 调用发送的“异端”字符（重音符号、“ñ”、...）无法正确获取。
2.  如果我删除字符集标题，我会遇到同样的问题，但反过来。调用中的字符被正确获取，但不是来自数据库的字符。
3.  最后，如果我不通过 Ajax 调用进行调用，而是直接提交表单，则一切正常。字符已正确发送，数据库中的信息也已正确发送。

所有这些过程有什么问题？我猜（根据最后一点）通过 AJAX 调用或通过表单中的提交进行调用是有区别的。但是，这有什么区别？我究竟做错了什么？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:11:38.037

`$.ajax`始终使用`encodeURIComponent`UTF-8 的用途。您的流程有什么问题不是到处都使用 UTF-8。

如果你现在不能改变这个事实，你可以`mb_convert_encoding`在服务器端将 ajax 数据从 UTF-8 转换为 Windows-1252。

注意：

*   对于浏览器 ISO-8859-1 意味着 Windows-1252
*   对于 MySQL latin1 意味着 Windows-1252
*   对于任何 PHP 函数 ISO-8859-1 意味着 ISO-8859-1
*   对于除 MySQL 之外的任何东西，Windows-1252 意味着 Windows-1252

# c - 如何理解 TLS 证书是 PEM 或 DER 格式

> ID：15702930
> 
> 赞同：1
> 
> 时间：2013-03-29T12:08:55.773
> 
> 标签：c, ssl, openssl

我的任务是从 TLS 证书中获取“通用名称”信息。我设法通过解析 TLS“证书”（在“hello server”之后）消息并获取指向证书的指针并传递给 X509_NAME_get_text_by_NID 来做到这一点；

```
p = certificate;//this is a pointer to certificate 
X509 *x;
x = d2i_X509(NULL, &p, certificate_lenght);

if (x == NULL)
{
    fout << " X509 object is null " << std::endl;
    return;
}
fout << " no x509  error " << endl;
X509_NAME_get_text_by_NID(X509_get_subject_name(x),NID_commonName, peer_CN, 256); 
```

我希望我在做正确的事情。

我的问题是我为“DER”格式设计了我的逻辑，这些信息能否以“PEM”格式出现。如果是，我如何了解证书是 PEM 还是 DER 格式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:25:09.567

在 TLS 握手期间发送的证书始终是 DER 中的二进制数据。你不需要关心那里的PEM。

如果你想使用相同的代码从其他来源加载证书，那么你需要分析它是否是纯文本（即只有32-127范围内的字符）。如果是，那么你很可能有一些 PEM。但不能保证您已获得证书。如果页眉和页脚存在，则需要删除它们，然后对其余部分进行 base64 解码以获取 DER，然后您可以解码 DER。

# javascript - 使用 jQuery 从数组 2 维创建表

> ID：15702933
> 
> 赞同：4
> 
> 时间：2013-03-29T12:09:06.713
> 
> 标签：javascript, jquery, html-table

我想用来自 JSON 的数组 2 维的值创建表。这是我制作的代码：

**数据**

```
 var data = {"ver[
    {"0":"1","id_pemasang":"1","1":"1","id_jenis_pemasang":"1","2":null,"npwp":null,"3":"Yos Sudarso","nama":"Yos Sudarso","4":"Perumahan Griya Perwita No.10","alamat":"Perumahan Griya Perwita No.10","5":"Yogyakarta","kota":"Yogyakarta","6":"0274-541056","telepon":"0274-541056","7":"08134570378","handphone":"08134570378","8":"0","diskon":"0"},
    {"0":"2","id_pemasang":"2","1":"2","id_jenis_pemasang":"2","2":"34.081.203.1-342.000","npwp":"34.081.203.1-342.000","3":"CV. Prima Agung","nama":"CV. Prima Agung","4":"Jl. Cenderawasih No.72 Warungboto","alamat":"Jl. Cenderawasih No.72 Warungboto","5":"Yogyakarta","kota":"Yogyakarta","6":"0274-878906","telepon":"0274-878906","7":null,"handphone":null,"8":"5","diskon":"5"},
    {"0":"3","id_pemasang":"3","1":"2","id_jenis_pemasang":"2","2":null,"npwp":null,"3":"PT. Tampil Jaya","nama":"PT. Tampil Jaya","4":"Jl. Alamanda No.3","alamat":"Jl. Alamanda No.3","5":"Yogyakarta","kota":"Yogyakarta","6":"0274-552233","telepon":"0274-552233","7":null,"handphone":null,"8":"20","diskon":"20"}
 ]}; 
```

**html**

```
<table class="table table-striped table-bordered table-data-omset">
     <tbody></tbody>
</table> 
```

**jQuery**

```
var tableOmset = $('table.table-data-omset');
var tbodyTableOmset = tableOmset.find('tbody');
var rowTbodyTableOmset = '<tr></tr>';

for(var a=0; a<data.ver.length; a++){
    tbodyTableOmset.append(rowTbodyTableOmset);                       
    for(var b=0; b<5; b++){
        if(data.ver[a][b] == null){
             data.ver[a][b]= '';
        }
        tbodyTableOmset.find('tr').append('<td>'+data.ver[a][b]+'</td>');
     }
 } 
```

但是我执行或运行后，结果成功了，但看起来并不好。这是结果图像：

![在此处输入图像描述](../Images/d2f329726e0eea29d03865eeeaeec0bc.png)

我希望你能帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:21:12.810

在您的`for`循环中，使用`trTableOmset +=`. 比使用`tbodyTableOmset.append(trTableOmset);`你就完成了！

`**[LIVE DEMO](http://jsbin.com/elacag/1/edit)**`

它应该看起来如何：

```
var tableOmset = $('table.table-data-omset');
var tbodyTableOmset = tableOmset.find('tbody');
var trTableOmset = '';
for(var a=0; a<data.ver.length; a++){
    trTableOmset += '<tr>'  ;                    
    for(var b=0; b<18; b++){          // 5 or 18 ?
        if(data.ver[a][b] === null){
             data.ver[a][b]= '';
        }
        trTableOmset += '<td>'+ data.ver[a][b] +'</td>';
     }
    trTableOmset += '</tr>' ;
 }
tbodyTableOmset.append(trTableOmset); 
```

固定数据：

```
var data = {
    "ver": [
        {
            "0": "1",
            "id_pemasang": "1",
            "1": "1",
            "id_jenis_pemasang": "1",
            "2": null,
            "npwp": null,
            "3": "YosSudarso",
            "nama": "YosSudarso",
            "4": "PerumahanGriyaPerwitaNo.10",
            "alamat": "PerumahanGriyaPerwitaNo.10",
            "5": "Yogyakarta",
            "kota": "Yogyakarta",
            "6": "0274-541056",
            "telepon": "0274-541056",
            "7": "08134570378",
            "handphone": "08134570378",
            "8": "0",
            "diskon": "0"
        },
        {
            "0": "2",
            "id_pemasang": "2",
            "1": "2",
            "id_jenis_pemasang": "2",
            "2": "34.081.203.1-342.000",
            "npwp": "34.081.203.1-342.000",
            "3": "CV.PrimaAgung",
            "nama": "CV.PrimaAgung",
            "4": "Jl.CenderawasihNo.72Warungboto",
            "alamat": "Jl.CenderawasihNo.72Warungboto",
            "5": "Yogyakarta",
            "kota": "Yogyakarta",
            "6": "0274-878906",
            "telepon": "0274-878906",
            "7": null,
            "handphone": null,
            "8": "5",
            "diskon": "5"
        },
        {
            "0": "3",
            "id_pemasang": "3",
            "1": "2",
            "id_jenis_pemasang": "2",
            "2": null,
            "npwp": null,
            "3": "PT.TampilJaya",
            "nama": "PT.TampilJaya",
            "4": "Jl.AlamandaNo.3",
            "alamat": "Jl.AlamandaNo.3",
            "5": "Yogyakarta",
            "kota": "Yogyakarta",
            "6": "0274-552233",
            "telepon": "0274-552233",
            "7": null,
            "handphone": null,
            "8": "20",
            "diskon": "20"
        }
    ]
}; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:23:20.527

## [例子](http://jsfiddle.net/Umg78/)

**JS**

```
function ToTable(dataArray)
{
    html = '<table>'; 
    var len = dataArray.length;
    for(var i = 0; i < len; i++){
        html += '<tr>'; 
        for(var key in dataArray[i]){
            html += '<td>' + dataArray[i][key] + '</td>'; 
        }
        html += '</tr>';
    }
    html += '</table>'; 
    return html; 
}

data = {
    ver: [
        {"0":"1","id_pemasang":"1","1":"1","id_jenis_pemasang":"1","2":null,"npwp":null,"3":"Yos Sudarso","nama":"Yos Sudarso","4":"Perumahan Griya Perwita No.10","alamat":"Perumahan Griya Perwita No.10","5":"Yogyakarta","kota":"Yogyakarta","6":"0274-541056","telepon":"0274-541056","7":"08134570378","handphone":"08134570378","8":"0","diskon":"0"},
        {"0":"2","id_pemasang":"2","1":"2","id_jenis_pemasang":"2","2":"34.081.203.1-342.000","npwp":"34.081.203.1-342.000","3":"CV. Prima Agung","nama":"CV. Prima Agung","4":"Jl. Cenderawasih No.72 Warungboto","alamat":"Jl. Cenderawasih No.72 Warungboto","5":"Yogyakarta","kota":"Yogyakarta","6":"0274-878906","telepon":"0274-878906","7":null,"handphone":null,"8":"5","diskon":"5"},
        {"0":"3","id_pemasang":"3","1":"2","id_jenis_pemasang":"2","2":null,"npwp":null,"3":"PT. Tampil Jaya","nama":"PT. Tampil Jaya","4":"Jl. Alamanda No.3","alamat":"Jl. Alamanda No.3","5":"Yogyakarta","kota":"Yogyakarta","6":"0274-552233","telepon":"0274-552233","7":null,"handphone":null,"8":"20","diskon":"20"}
    ] 
};

document.getElementById('destination').innerHTML = ToTable(data.ver); 
```

**HTML**

```
<div id='destination'></div> 
```

# jquery - JSON 错误：未捕获的 SyntaxError：意外的令牌

> ID：15702935
> 
> 赞同：1
> 
> 时间：2013-03-29T12:09:09.557
> 
> 标签：jquery, ajax, json, jsonp

我收到错误：Uncaught SyntaxError: Unexpected token <

我只是在使用 Google Trend URL 时遇到这个问题。其他 URL 工作正常。

```
function ajaxfun(){

  $.ajax({
    type: 'GET',
    url: 'http://www.google.com/trends/fetchComponent?content=1&hl=en-US&q=fever&cid=TIMESERIES_GRAPH_0&export=3&US&cat=0-45', 
    dataType :"jsonp",
    jsonp: false,
    crossDomain: true,
    error: function(data) {
      console.log('error', data);
    },
    success: function(data) {
      console.log('success', data);
    },
    complete: function() {
      console.log('done');
    }
  });
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:23:10.907

您实际上并没有收到 json 对象。它说，

```
<div id="report">
<div class="timeBandTitle">An error has been detected</div>
<div class="timeBandSubTitle">This page is currently unavailable. Please try again later.<br/> Please make sure your query is valid and try again.<br/> If you're experiencing long delays, consider reducing your comparison items.<br/> Thanks for your patience.</div> 
```

[使用开发者工具演示](http://jsfiddle.net/5uqbZ/) 检查并在**网络**选项卡中查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:30:18.127

默认情况下，jQuery 通过`&_={timestamp}`在 url 末尾附加来防止缓存 jsonp。它会导致错误。添加`cache:true`以防止它。

# c# - Console.Read() 没有捕获正确的信息

> ID：15702938
> 
> 赞同：0
> 
> 时间：2013-03-29T12:09:11.123
> 
> 标签：c#

我正在运行一个非常简单的程序，它只提示用户输入一个数字，现在，只需将它打印在屏幕上。但由于某种我不知道的原因，我输入的数字似乎加到了数字 48 上。

例如：我输入 2 它输出 50

是否有某种我正在监督的基本法则，或者我在我的代码中犯了某种错误

我是初学者，如果你没有注意到

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace ConsoleApplication2
{
    class Program
    {
        static void Main(string[] args)
        {
            int Num;
            Console.WriteLine("Please Input Number of Rows you want to make in your pyrimid: ");
            Num = Console.Read();

            Console.WriteLine(Num);// Just to check if it is getting the right number
            Console.Read();//This is Here just so the console window doesn't close when the program runs

        }
    }
} 
```

编辑：讨厌麻烦，但现在`num = int.Parse(Console.Read());`因为“int.Parse(string)”的最佳重载方法匹配有一些无效参数而出现此错误。这是否意味着我需要一个重载方法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-29T12:11:53.807

`Console.Read`返回`char`，所以当你将它转换为yo`int`得到**50**的 ASCII 码！您应该解析为 int 而不是（隐式）转换它：`2`

 **```
Num = int.Parse(Console.Read()); 
```

笔记：

1.  如果输入可以是非数值，请使用`int.TryParse`
2.  C# 中局部变量的约定是驼峰式，所以`Num`改为`num`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:12:19.493

`Console.Read`返回字符代码而不是字符本身。

```
char num = (char)Console.Read();
Console.WriteLine(int.Parse(num.ToString())); 
```

此代码并不理想，但它显示了正在发生的事情。由于您希望输入一个数字，您也可以使用

```
int num = Console.Read() - 48; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-29T12:12:50.233

`Console.Read`从标准输入读取字节。

`2`ASCII 值为`50`

您需要解析从控制台读取的值

```
Num = Int32.Parse(Console.Read()); // or Num = int.Parse(Console.Read()); 
```**

# php - 按顺序将数组值插入表中

> ID：15702944
> 
> 赞同：0
> 
> 时间：2013-03-29T12:09:31.890
> 
> 标签：php, arrays

我得到了一组 624 张图片，女巫的名字如下：

```
1n1e.png
1n2e.png
..
2n1e.png
2n2e.png 
```

等等。最大“n”值为 13，最大“e”值为 48，我的意思是 - `13n48e`。

我想创建一个 13x48 的表格，并相应地放置所有这些图像。

```
1n1e is located in bottom left corner, 
13n1e is at the top left corner, 
13n48e at the top right corner, 
1n48e at the bottom right corner. 
```

编辑：我有这个旧代码，但它不能像我想的那样工作：

```
echo "<table border='1'>";
$oldIndex=0;
$row=1;
foreach($images as $image)
{
    if(substr($image,0,1)!=$oldIndex)
    {
    if($row>1){echo "</tr>";}

    echo "<tr>";
    $oldIndex=substr($image,0,1);
    $row++;
    }
    echo "<td>$image</td>";

}

echo "</table>"; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-29T12:14:21.317

..像这样的东西？

```
echo "<table>";
for( $n =13; $n >= 1; $n-- )
{
    echo "<tr>";
    for ( $e = 1; $e <= 48; $e++ )
    {
         echo "<td>";
         echo image $n $e
         echo "</td>";

    }
    echo "</tr>";
}
echo "</table>"; 
```

# .net - Vb.Net实例化一个类的属性，它是一个不同类的数组

> ID：15702948
> 
> 赞同：0
> 
> 时间：2013-03-29T12:09:50.577
> 
> 标签：.net, arrays, vb.net, instantiation

这是为了序列化和反序列化 Xml 对象

```
<XmlRoot("orderadd")>
<Serializable()> _
Public Class clsSMsgRequestMessage
    <XmlElementAttribute()> Public Property ordertype() As String
    <XmlElementAttribute()> Public Property vehicleid() As String
    <XmlElementAttribute()> Public Property orderpriority() As String
    <XmlElementAttribute("orderpart")> Public Property orderpart() As RequestMessageOrderaddOrderpart()
    <XmlAttributeAttribute()> Public Property clientid() As String
    <XmlAttributeAttribute()> Public Property transactionid() As String
    <XmlAttributeAttribute()> Public Property numberoforderparts() As String

    Public Sub New()
    End Sub
End Class

Public Class RequestMessageOrderaddOrderpart
    <XmlElementAttribute()> Public Property operation() As String
    <XmlElementAttribute()> Public Property location() As String
    <XmlElementAttribute()> Public Property loadtype() As String
    <XmlAttributeAttribute()> Public Property orderpartnumber() As String

    Public Sub New()
    End Sub

End Class 
```

这适用于反序列化，但现在我正在尝试正确创建此对象，以便可以将其序列化回 XML 对象。

```
Dim anotherTest As clsSMsgRequestMessage = New clsSMsgRequestMessage()
Dim testOrderPart1 As New RequestMessageOrderaddOrderpart

anotherTest.clientid = "data"
anotherTest.orderpriority = "data"
anotherTest.ordertype = "data"
anotherTest.transactionid = "data"
anotherTest.vehicleid = "data"
anotherTest.numberoforderparts = "data"

testOrderPart1.loadtype = "data"
testOrderPart1.location = "data"
testOrderPart1.operation = "data"
testOrderPart1.orderpartnumber = "data"

anotherTest.orderpart(0) = testOrderPart1 
```

这里的最后一行不起作用，因为 anotherTest.orderpart(0) 尚未实例化。但我不知道如何实例化它，因为

```
anotherTest.orderpart(0) = New RequestMessageOrderaddOrderPart 
```

仍然返回“对象引用未设置为对象的实例”。

```
anotherTest.orderpart = New RequestMessageOrderaddOrderPart 
```

返回“类型的值不能转换为'一维数组”

我认为我在自己实例化它方面走在了正确的轨道上，就像我对'testOrderPart1'所做的那样，但我不知道如何将它链接到我的 anotherTest.orderpart

请帮忙！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:16:50.747

您必须首先初始化您的数组属性：

```
anotherTest.orderpart = New RequestMessageOrderaddOrderPart(10) {} 
```

`10`是数组大小。

之后，您将能够设置第一个数组元素：

```
anotherTest.orderpart(0) = New RequestMessageOrderaddOrderPart 
```

**更新**

但是，我认为您应该将您的财产声明更改为`List(Of RequestMessageOrderaddOrderPart)`. 使用列表，您不必指定项目数：

```
anotherTest.orderpart = New List(Of RequestMessageOrderaddOrderPart)() 
```

添加项目非常简单：

```
anotherTest.orderpart.Add(new RequestMessageOrderaddOrderPart()) 
```

而且您仍然可以使用索引器获取/修改项目：

```
Dim firstItem = anotherTest.orderpart(0) 
```

当然，该项目必须先使用`Add`方法插入。

`List(Of T)`序列化也可以正常工作。

# java - JAVA GUI 布局 - 6 个带有空格的按钮的最佳布局是什么？

> ID：15702949
> 
> 赞同：0
> 
> 时间：2013-03-29T12:09:53.890
> 
> 标签：java, user-interface, layout

我最近一直在为我的程序创建一些 GUI。但是对于我的下一个 GUI，我想知道创建框架的最佳方法如下：

它将有一个标题，Hotel Menu，然后在它下面我希望它有 6 个垂直放置的按钮，它们之间有空格。想知道我可以用来实现这样的事情的最佳布局是什么？

我以前使用过盒子布局，但是按钮大小不均并且粘在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:22:32.503

你用的是什么IDE？！您可以将 NetBeans 用作 IDE，它具有经典的“单击和拖动”GUI 设计的优势。否则，如果您想手动编写编码，最好的方法是使用网格布局。[你可以在这里](http://docs.oracle.com/javase/tutorial/uiswing/layout/grid.html)阅读更多关于它的信息

# linux - 如何使用 shell 脚本读取文件？

> ID：15702950
> 
> 赞同：0
> 
> 时间：2013-03-29T12:09:55.427
> 
> 标签：linux, bash, shell

我有一个必须读取的文件，并且输出应该附加到 output.txt 文件中，我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:13:16.120

你在找这个吗？？

```
cat fileneed2bread >> output.txt 
```

# image - 图像在查看时正在改变其位置

> ID：15702951
> 
> 赞同：1
> 
> 时间：2013-03-29T12:09:56.923
> 
> 标签：image, qt, qt-creator, qml, image-rotation

我在 qml 中制作了一个单元格，如下所示

```
import QtQuick 1.1

Image {
     source: "pics/snake.png"
     smooth: true
      } 
```

在另一个 .qml 文件中，我将其包含在内

```
 Cell {
    id: snake
    x: 301
    y: 30
    width: 30
    height: 67
    rotation: 0
    z: 6
 } 
```

当旋转为 0 时，一切都是正确的，但是当我**将旋转设置为某个值**时，图像的位置会在查看时发生变化。定义的 x 和 y 值保持不变，但**位置仅在我查看时发生变化。**帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T18:03:10.963

其实原点在变。在设计窗口的右下角，选择**高级**选项卡并选择 3x3 点矩阵中的原点。更改它，然后重新选择中间的。调整你的形象。现在，它将正确对齐。

或者，您可以添加 transformOrigin:Item.Center

# c# - 模态弹出扩展器工作正常，但在我的 aspx 页面中，所有按钮的回发事件都没有被触发

> ID：15702955
> 
> 赞同：1
> 
> 时间：2013-03-29T12:10:05.377
> 
> 标签：c#, jquery, asp.net, css, ajax

我想在其上显示模态弹出扩展器的链接按钮

```
 <asp:LinkButton ID="Feedback" runat="server" CssClass="hyperlinkann" OnClientClick="return false;">Give your feedback</asp:LinkButton>

    <cc1:ModalPopupExtender ID="ModalPopupExtender1" runat="server" TargetControlID="Feedback"
                                                PopupControlID="popuppanel" BackgroundCssClass="modalBackground" CancelControlID="Cancel">
                                                </cc1:ModalPopupExtender> 
```

在这里我不使用 okcontrlID 因为我想在提交时做一些编码

```
 <asp:Panel ID="popuppanel" runat="server" CssClass="confirm-dialog" DefaultButton="okbutton">

        <div class="divpopup">
            <h3 style="color:Black;font-weight:bold;">Feedback</h3>
            <asp:TextBox ID="txt_comments" runat="server" TextMode="MultiLine" Width="190" Height="50" placeholder="Give Feedback" required="require"
            BorderColor="Black"></asp:TextBox>

            <br /><br />
           <asp:Button ID="okbutton" runat="server" Text="Submit" CssClass="popupbutton" 
                onclick="okbutton_Click" />
            <asp:Button ID="Cancel" runat="server" Text="Cancel" CssClass="popupbutton" /> 
        </div>

     </asp:Panel> 
```

# android - 如何在listview android中覆盖notifydatasetchanged？

> ID：15702956
> 
> 赞同：0
> 
> 时间：2013-03-29T12:10:11.827
> 
> 标签：android, android-listview

块引用

嗨，我在我的应用程序中使用了基本适配器，但是当我单击删除按钮时，时间项被删除但列表视图没有刷新。我也使用了 adapter.notifydatasetchanged()。但是没有用。请给我解决方案？

下面我提到了代码：

```
enter code here

class listViewEventsAdapterdatabase extends BaseAdapter {
            LayoutInflater mInflater;
            OnItemValueChange listener;

            public listViewEventsAdapterdatabase(Context context) {
                mInflater = LayoutInflater.from(context);

            }
            public void setOnItemChange(OnItemValueChange onlistener) {
                this.listener = onlistener;

            }
            public int getCount() {
                if (GetAllitemDetails != null) {
                    return GetAllitemDetails.size();
                }

                return 0;
            }

            public Object getItem(int arg0) {
                return arg0;
            }

            public long getItemId(int arg0) {
                return arg0;
            }
            @Override 
            public void notifyDataSetChanged(){
                super.notifyDataSetChanged();
            }

            public View getView(final int position, View convertView,
                    ViewGroup parent) {
                final ViewHolder holder;
                if (convertView == null) {
                    LayoutInflater vi = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);

                    convertView = vi.inflate(R.layout.databaselistviewitem, parent,false);
                    holder = new ViewHolder();
                    holder.txtrestaurant_name = (TextView) convertView
                            .findViewById(R.id.databaseproductname);
                    holder.btn_delete = (Button) convertView
                            .findViewById(R.id.buttondelete);
                    holder.edt_quantity = (EditText) convertView
                            .findViewById(R.id.quantity);
                    holder.btn_update = (Button) convertView
                            .findViewById(R.id.bttonupdate);
                    holder.txt_amount = (TextView) convertView
                            .findViewById(R.id.amount);
                    convertView.setTag(holder);
                } else {
                    holder = (ViewHolder) convertView.getTag();
                }
                holder.txtrestaurant_name.setText(GetAllitemDetails.get(position)
                        .get("product"));

                holder.edt_quantity.setText(GetAllitemDetails.get(position).get(
                        "quantity"));
                holder.txt_amount.setText(getDoublePrecision(GetAllitemDetails.get(position).get(
                    "price")));
                holder.btn_delete.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        db = DatabaseHelper.delete_byID(GetAllitemDetails.get(position).get("id"));
                        Toast.makeText(getApplicationContext(), "Delete succesfully", 3000).show();
                        if (listener != null) {
                            Log.e("Callback", (Str_subtotal));
                            listener.totalAmount((Str_subtotal));
                            listener.delivarychargeAmount(String.valueOf(delivarycharge));
                            listener.totalamt(String.valueOf(total));

                            lv_data.invalidateViews();
                            adapter_list.notifyDataSetChanged();
                        }
                    }
                });

                holder.btn_update.setOnClickListener(new OnClickListener() {

                    @Override
                    public void onClick(View v) {

                        System.out.println("**************Quantitysdfknsldf:"
                                + holder.edt_quantity.getText().toString().trim());

                        db.updateData(GetAllitemDetails.get(position).get("id"),
                                DatabaseHelper.TABLErestaurant, holder.edt_quantity
                                        .getText().toString());

                        Toast.makeText(getApplicationContext(), "Update succesfully", 3000).show();

                        if (listener != null) {
                            Log.e("Callback", (Str_subtotal));
                            listener.totalAmount((Str_subtotal));
                            listener.delivarychargeAmount(String.valueOf(delivarycharge));
                            listener.totalamt(String.valueOf(total));
                        }

                    }
                });

                return convertView;
            }

        }
enter code here 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:16:34.690

您应该从您的集合中删除该项目：`GetAllitemDetails`然后调用`theAdapter.notifyDatasetChanged()`以刷新 ListView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T12:58:07.560

在删除按钮功能中试试这个

```
 list.remove(position);
 notifyDataSetChanged(); 
```

# c# - 如何为数据绑定组合框预定义组合框项？

> ID：15702963
> 
> 赞同：2
> 
> 时间：2013-03-29T12:10:31.193
> 
> 标签：c#, wpf, xaml, data-binding, combobox

我想允许用户选择串口的波特率。我创建了一个与串口波特率绑定的文本框，如下所示，它可以工作。

```
<TextBox x:Name="tbbaudRate" Text="{Binding SerialPort.BaudRate}" /> 
```

我的问题是，有效波特率的集合是有限的。有效波特率为 { 75, 110, 300, 1200, 2400, 4800, 9600, 19200, 38400, 57600, 115200 }。我想将文本框更改为列出有效波特率值的组合框。

这是我所做的。

```
<ComboBox x:Name="tbbaudRate" Text="{Binding SerialPort.BaudRate}" >
    <ComboBoxItem Content="75"/>
    <ComboBoxItem Content="110"/>
    <ComboBoxItem Content="300"/>
    <ComboBoxItem Content="1200"/>
    <ComboBoxItem Content="2400"/>
    <ComboBoxItem Content="4800"/>
    <ComboBoxItem Content="9600"/>
    <ComboBoxItem Content="19200"/>
    <ComboBoxItem Content="38400"/>
    <ComboBoxItem Content="57600"/>
    <ComboBoxItem Content="115200"/>
</ComboBox> 
```

虽然这可行，但我几乎没有问题。

1.  当我第一次加载窗口时，未选择波特率的默认值（9600）。

2.  这看起来不那么优雅。实现这一目标的最佳方法是什么？

作为参考，这是我的串口类。也像上面的代码一样丑陋。我使用 resharper 自动生成 notifypropertychange 代码。

```
class SerialComm : INotifyPropertyChanged
{
    private int[] ValidBaudRate = new[] { 75, 110, 300, 1200, 2400, 4800, 9600, 19200, 38400, 57600, 115200 }; //Dont know how to use this
    private int[] ValidDataBits = new[] { 5, 6, 7, 8, 9 }; //Dont know how to use this

    private SerialPort _serialPort;

    public SerialComm()
    {
        _serialPort = new SerialPort();
    }

    public SerialPort SerialPort
    {
        get { return _serialPort; }
        set
        {
            _serialPort = value;
            OnPropertyChanged("SerialPort");
            SerialPort.GetPortNames();
        }
    }

    #region Autogenerate by resharper
    public event PropertyChangedEventHandler PropertyChanged;

    [NotifyPropertyChangedInvocator]
    protected virtual void OnPropertyChanged([CallerMemberName] string propertyName = null)
    {
        PropertyChangedEventHandler handler = PropertyChanged;
        if (handler != null) handler(this, new PropertyChangedEventArgs(propertyName));
    }
    #endregion
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:34:25.360

像这样改变你的组合框：

```
<ComboBox  Name="comboBox1" Width="120" 
           ItemsSource="{Binding Path=ValidBaudRateCollection}">
    <ComboBox.ItemTemplate>
        <DataTemplate>
            <Label Content="{Binding }"/>
        </DataTemplate>
    </ComboBox.ItemTemplate>
</ComboBox> 
```

将这些添加到您的`SerialComm`课程中：

```
public ObservableCollection<int> ValidBaudRateCollection;

public SerialComm()
{
    this.ValidBaudRateCollection = new ObservableCollection<int>(this.ValidBaudRate);
    _serialPort = new SerialPort();
} 
```

最后将这些添加到您的某处`Window`（例如构造函数）

```
SerialComm s = new SerialComm();
comboBox1.DataContext = s;
comboBox1.ItemsSource = s.ValidBaudRateCollection;
comboBox1.SelectedIndex = 6; 
```

> **注意：**这种方式可以绑定您的组合框值，但是将一个添加`ObservableCollection`到似乎在另一层中的类可能在架构上是不正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:29:44.097

要使“9600”成为默认波特率，您需要添加该行

```
myComboBox.SelectedIndex = 7; 
```

因为 9600 排在第 7 位

希望能帮助到你...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-28T11:03:39.000

旧线程，但让我走上了正确的轨道：

通过添加 SelectedValuePath="Content" 解决它，并将其保存到 SelectedValue。

```
<ComboBox
          SelectedValue="{Binding LaserBaudRate, UpdateSourceTrigger=PropertyChanged}"
          SelectedValuePath="Content">
    <ComboBoxItem Content="75" />
    <ComboBoxItem Content="110" />
    <ComboBoxItem Content="300" />
    <ComboBoxItem Content="1200" />
    <ComboBoxItem Content="2400" />
    <ComboBoxItem Content="4800" />
    <ComboBoxItem Content="9600" />
    <ComboBoxItem Content="19200" />
    <ComboBoxItem Content="38400" />
    <ComboBoxItem Content="57600" />
    <ComboBoxItem Content="115200" />
</ComboBox> 
```

# c++ - 在 if 语句的条件块中调用布尔方法？

> ID：15702967
> 
> 赞同：0
> 
> 时间：2013-03-29T12:11:07.240
> 
> 标签：c++, if-statement, boolean

我正在定义一个使用列表类的模板类的函数。

我在这个列表类中定义了擦除函数，如果擦除成功则返回true，如果擦除失败则返回false，我在这里要做的就是调用这个函数。

但是，我需要计算列表的大小 n，并且只有在 list.erase(itr.list_iter) 调用返回 true 时才想减少它。

更简洁地说，以下代码行是否会调用 list.erase(itr.list_iter) 函数并减少 n 并仅在成功时调用 refresh() ？或者它实际上并没有删除列表中的元素？

```
void erase(iterator itr) {
    if(list.erase(itr.list_iter)) {
        --n;
        refresh();
    }
} 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T12:28:17.327

是的你可以。它总是会被调用。它相当于：

```
{
  bool res = foo();
  if(res)
  {
    do_stuff();
  }
} 
```

您甚至可以在以下情况下声明变量：

```
if(int res = int_foo())
{
  do_smth(res);
}
else // res == 0
{
  do_smth_else();
} 
```

那是写在每本书里=）

# ios - 使用 capinsets 调整图像大小

> ID：15702974
> 
> 赞同：4
> 
> 时间：2013-03-29T12:11:42.157
> 
> 标签：ios, ios5, uibutton, uiimage, image-resizing

我已经设置了一个这样的按钮：

```
// Create facebook login button
facebookLoginButton = [[UIButton alloc] initWithFrame:CGRectMake(10, 20, 300,50)];
facebookLoginButton.autoresizingMask = UIViewAutoresizingFlexibleWidth;
//NSLog(@"facebook button view height is %f",facebookLoginButton.bounds.size.height);
//NSLog(@"facebook button view width is %f",facebookLoginButton.bounds.size.width);

UIImage *facebookButton = [[UIImage imageNamed:@"FacebookLogin"]
                           resizableImageWithCapInsets:UIEdgeInsetsMake(16,140,86,92)];
[facebookLoginButton setBackgroundImage:facebookButton forState:UIControlStateNormal]; 
```

我在 Photoshop 中为 200(w)x100(h)px 的按钮创建了一个图像。首先，对于 iphone4/5 上使用的 Retina 图像，这是否是正确的尺寸，用于安装在 50 高的登录框架中的按钮？另一个宽度与被拉伸无关。

其次，下面是一个示例图像。我似乎无法为“resizableImageWithCapInsets:UIEdgeInsetsMake”找出正确的插图。我该如何解决？除了我看到的从 SO 链接的 Android 示例之外，是否有关于如何执行此操作的教程。

![在此处输入图像描述](../Images/438c40a6c63a1d1c420b884d384e0bd8.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-29T12:32:20.867

由于您正在明确设置按钮的框架，并且由于您正在创建自己的图像，因此您不需要可调整大小的图像。您的按钮为 300 x 50，因此制作 300 x 50 图像（以及用于双分辨率设备的 600 x 100 图像）并将按钮的背景图像设置为它。

但是，我也会给出一个代码示例。对于您实际给出的图像，如果您将其命名为 FacebookLogin@2x.png 以便将其用作双分辨率图像，则您要使用的值为`resizableImageWithCapInsets:UIEdgeInsetsMake(0,50,0,50)`. 结果如下：

![在此处输入图像描述](../Images/dbfcff01184a7e9e4ed4d34c805e2149.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-01T09:59:34.507

我编写了一个脚本来生成带有帽子插图的可调整大小的图像。很有用。 [https://github.com/kejinlu/capimage](https://github.com/kejinlu/capimage)

# delphi - 从 TWebBrowser 打印

> ID：15702976
> 
> 赞同：2
> 
> 时间：2013-03-29T12:11:48.973
> 
> 标签：delphi, twebbrowser

我正在使用以下单元通过显示在非模式对话框中的 TWebBrowser 来显示和打印 HTML 代码。在我的生产程序中，以下代码在 Windows-XP 下工作，但在 Windows-7 下失败（错误消息始终为外部异常 C015D00F）。为了隔离问题，我编写了一个简单的测试程序，它还有一个包含 TWebBrowser 的非模态对话框；就其本身而言，这个测试程序可以在 Windows-7 上正常工作，但是当我将非模态对话框从测试程序插入生产程序时，我得到了外部异常。

这大概表明调用程序而不是被调用单元有问题，但我看不出那个问题是什么。HTML 代码是手工制作的，但可以正确显示。

可能是什么问题呢？打印代码来自 Embarcadero[网站](http://edn.embarcadero.com/article/26402)

```
unit Test4;

interface
uses
 Windows, Messages, SysUtils, Variants, Classes, Graphics, Controls, Forms,
 Dialogs, OleCtrls, SHDocVw, MSHTML;

type
 THTMLPreview = class(TForm)
  web: TWebBrowser;
  procedure FormClose(Sender: TObject; var Action: TCloseAction);
  procedure webDocumentComplete(Sender: TObject; const pDisp: IDispatch;
                                var URL: OleVariant);
  private
   options: word;
   fn: string;
   procedure DoPrint;
  public
   Constructor Create (const afn, acapt: string; opts: word);
  end;

implementation

{$R *.dfm}

constructor THTMLPreview.Create (const afn, acapt: string; opts: word);                
begin
 inherited create (nil);
 caption:= acapt;
 fn:= afn;
 options:= opts;
 web.Navigate (fn);
end;

procedure THTMLPreview.webDocumentComplete(Sender: TObject;
                 const pDisp: IDispatch; var URL: OleVariant);
begin
 DoPrint
end;

procedure THTMLPreview.DoPrint;
var
 HTMLDoc: IHTMLDocument2;
 HTMLWnd: IHTMLWindow2;
 HTMLWindow3: IHTMLWindow3;

begin
 if options and 4 = 4 then
  begin
   HTMLDoc:= web.Document as IHTMLDocument2;
   if HTMLDoc <> nil then
    begin
     HTMLWnd:= HTMLDoc.parentWindow;
     HTMLWindow3:= HTMLWnd as IHTMLWindow3;
     HTMLWindow3.print;
    end
  end
end;

procedure THTMLPreview.FormClose(Sender: TObject; var Action: TCloseAction);
begin
 if options and 1 = 1 then deletefile (fn);
 action:= caFree
end;

end. 
```

使用该语句`Web.ControlInterface.ExecWB (OLECMDID_PRINT, OLECMDEXECOPT_PROMPTUSER, vaIn, vaOut)`会产生相同的错误。

* * *

几天后编辑：

我尝试了一种完全不同的方法来解决这个问题。在 HTML 代码中，我添加了一个显示“打印”按钮并添加“onprint”事件的 javascript 片段。再一次，这在我的开发机器 (XP) 上运行良好，但在我的客户端机器 (Win7) 上运行良好，程序冻结并显示外部异常 C015D00F（与以前的地址相同）。

* * *

经过大量的谷歌搜索，我发现异常代码 C015000F 是由“被停用的激活上下文不是最近激活的”引起的。这对一个可怜的 Delphi 程序员意味着什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-29T12:32:34.750

如果我没记错的话，IHTMLWindow3.print 方法会弹出默认的“发送到打印机”系统对话框。你想要这个吗？对于一个应用程序，我曾经搜索过一种避免这种情况的方法，然后找到了这段代码。

```
var
  r:TRect;
  sh,ph:HDC;
begin
  OleInitialize(nil);
  WebBrowser1.Navigate('file://'+HtmlFilePath);
  while WebBrowser1.ReadyState<>READYSTATE_COMPLETE do Application.HandleMessage;

  //Printer.PrinterIndex:=//set selected printer here
  Printer.BeginDoc;
  try
    Printer.Canvas.Lock;
    try
      sh:=GetDC(0);
      ph:=Printer.Canvas.Handle;

      //TODO: make rect a bit smaller for a page margin
      //TODO: get page size from printer settings, assume A4 here (210x297mm)
      r.Left:=0;
      r.Top:=0;
      r.Right:=2100 * GetDeviceCaps(sh,LOGPIXELSX) div 254;
      r.Bottom:=2970 * GetDeviceCaps(sh,LOGPIXELSY) div 254;
      WebBrowser1.BoundsRect:=r;

      SetMapMode(ph,MM_ISOTROPIC);
      SetWindowExtEx(ph,r.Right,r.Bottom,nil);
      SetViewportExtEx(ph,r.Right,r.Bottom,nil);
      r.Right:=GetDeviceCaps(ph,HORZRES)-1;
      r.Bottom:=GetDeviceCaps(ph,VERTRES)-1;

      (WebBrowser1.ControlInterface as IViewObject).Draw(
        DVASPECT_CONTENT,
        1,
        nil,nil,0,ph,@r,nil,nil,0);
    finally
      Printer.Canvas.Unlock;
    end;
    Printer.EndDoc;
  except
    Printer.Abort;
    raise;
  end; 
```

SetWindowExtEx 和 SetViewportExtEx 设置了正确的缩放比例，因此您可以在 HTML/CSS 中使用单位“mm”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-01T16:59:28.863

尝试这个。

```
var
    vIn, vOut: OleVariant;
begin
    WebBrowser_mail.ControlInterface.ExecWB(OLECMDID_PRINT,
                    OLECMDEXECOPT_PROMPTUSER, vIn, vOut) ; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-23T07:47:31.757

每当我遇到 WB 问题时，它有两个原因：a) 文档未完全加载 b) WB 组件未“完全注册”，因为它处于隐藏形式等。

对于a）我使用了很多年这个代码：

```
var
  CurDispatch: IDispatch;
  DocLoaded: boolean;

procedure TForm3.WebBrowser1DocumentComplete(ASender: TObject;
  const pDisp: IDispatch; const URL: OleVariant);
begin
  if (pDisp = CurDispatch) then begin
    CurDispatch := nil; {clear the global variable }
    DocLoaded:=true;
  end;
end;

procedure TForm3.WebBrowser1NavigateComplete2(ASender: TObject;
  const pDisp: IDispatch; const URL: OleVariant);
begin
  if CurDispatch = nil then
    CurDispatch := pDisp; { save for comparison }
end;

procedure TForm3.Button1Click(Sender: TObject);
var
  vIn, vOut: OleVariant;

begin
  DocLoaded:=false;
  WebBrowser1.Navigate(EdLink.Text);
  repeat
    Application.ProcessMessages;
  until DocLoaded;

  WebBrowser1.ControlInterface.ExecWB(OLECMDID_PRINT, OLECMDEXECOPT_PROMPTUSER, vIn, vOut)
end; 
```

如果仍然存在问题，请尝试将其放入 FormShow - 它解决了 b)：

```
WebBrowser1.HandleNeeded; 
```

WB没有问题了。

不要忘记设置 WebBrowser1.Silent:=true 以隐藏页面中的 JavaScript 错误。

# c# - What is the correct type for my WorkflowFoundationApp?

> ID：15702984
> 
> 赞同：0
> 
> 时间：2013-03-29T12:12:10.517
> 
> 标签：c#, .net, workflow-foundation-4

I refactor an existing APP to use WFE 4.5\. The APP runs in an endless loop and fetches new workitems via polling from a third party host via webservice. The app is multi tenant, where each tenant can have its own workflow.

I read so far that there is a WorkflowInvoker, which is designed to unit test workflows. I am not sure if this does fit my requirements.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T00:30:35.187

There are two options that you can use: `WorkflowInvoker` and `WorkflowApplication`.

`WorkflowInvoker` provides a simple way for invoking a workflow as if it were a method call and can be used only for workflows that do not use persistence. `WorkflowApplication` provides a richer model for executing workflows that includes notification of lifecycle events, execution control, bookmark resumption, and persistence.

如果您不需要它的功能，`WorkflowApplication`它更容易使用`WorkflowInvoker`。

# android - 为安卓手机创建一个update.zip

> ID：15702985
> 
> 赞同：0
> 
> 时间：2013-03-29T12:12:12.597
> 
> 标签：android, zip, updates

为我的三星 Galaxy Apollo 安卓手机制作 update.zip 时遇到了一些麻烦。我通过尝试将 apk 文件推送到 /system/app 来制作我的第一个 update.zip。以下是更新脚本的内容。

```
ui_print("Installing Titanium Backup6.0.2");
package_extract_file("system/app/TitaniumBackup602.apk","/system/app/TitaniumBackup602.apk");
set_perm(1000, 1000, 0664, "/system/app/TitaniumBackup602.apk");
ui_print("Done."); 
```

每次我闪烁它都会给出**安装中止**错误。我也对更新二进制文件感到困惑。有人说我们应该将工作二进制文件复制粘贴到我们的 update.zip 中，但我有两个文件（每个文件大小不同）都使用它们附带的 zip，但令人惊讶的是我仍然得到同样的错误。

需要更多信息吗？请帮忙。这真的很令人沮丧。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-19T12:31:41.313

也许您必须挂载`/system`分区（具有读写权限）。这可以通过

```
mount("ext4", "EMMC", "/dev/block/mmcblk0p25", "/system"); 
```

where`p25`必须设置为正确的分区，`EMMC`或者`MTC`必须是正确的分区类型。

`updater-script`至少，当我从一些自定义 rom 中查找（在 ZIP 文件中）时，这是我看到的`META-INF/com/google/android/updater-script`——也许得到其中一个并尝试修改它们。

# php - 使用 jquery 作为图像查看器的 html 中的隐藏字段

> ID：15702987
> 
> 赞同：-2
> 
> 时间：2013-03-29T12:12:14.753
> 
> 标签：php, jquery, textbox, hidden-field

我之前在隐藏字段上发布了问题，名称重复，现在我的文本框有问题。我正在为我的图像查看器使用 jquery。同时，我想要隐藏字段。但是，对于文本框，它似乎显示了所有文本框。

```
<div class="container">
  <div class="full-image">
    <form action="addOrder.php" method="post">
      <a href="city/GVcementMixture.jpg" class="zoomIt visible"><img src="city/rsz_cementmixture.jpg" alt="" /></a>
      <input type="hidden" name="op" value="add">         
      <input type="hidden" name="name" value="Cement Mixture">
      <input type="hidden" name="price" value="29.90">
      <input type="text" name="quantity" value="quantity?">
      <input type="hidden" name="subtotal" value="subtotal">
      <input type="submit" value="Add to Cart">
    </form> 
```

………………

输出将显示两个数量的文本框，但是，我键入的数量，它设法存储在我的数据库中......

任何人都知道我该如何解决这个问题？

ps 这个问题已经在函数的帮助下得到了解决。感谢您花时间阅读它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-29T13:35:44.953

好的，因此，您的 HTML 将被简单地解释，因此每个标签都会创建一个 DOM 元素。这意味着，文本框的数量与输入标签的数量一样多（输入 text ofc）。你放了两次：

```
<input type="text" name="quantity" value="quantity?">
<input type="submit" value="Add to Cart"> 
```

因此将显示 2 个文本框和提交按钮。
因为您仅使用 HTML 进行操作，所以您没有太多选择，因为您需要为每张图片提供 1 个表单（因此需要一个文本框和一个提交）。

现在，您正在使用 jQuery（通常还有 javascript，但这不是重点）。你可以做的是添加一些脚本。例如，从表单中删除您的文本框，添加一个唯一的，监听用户向服务器发送数据时触发的“提交”事件，以便您可以手动更新隐藏的输入，例如：

```
<input type="hidden" name="quantity" /> 
```

我并不是说这是最好的解决方案，但它需要很少的脚本。
如果你真的迷路了，我可以提供更多信息。不过，要清楚和彻底地满足您的需要。

**Edit:**
So yeah, remove those textboxes, and add one elsewhere. [Here](http://jsfiddle.net/vH5Rn/) are 2 ways to make this work.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-29T13:46:48.913

Based on your comments, it sounds like each image doesn't really need its own form, with a separate "Add to Cart" button, because they all represent the same product.

So why not separate the HTML that displays the images ( which will repeat for each image) from the HTML that creates the form (which will only show once)?

# jquery-mobile - 带有 KnockoutJS ListView 问题的 jQuery Mobile

> ID：15702996
> 
> 赞同：3
> 
> 时间：2013-03-29T12:12:34.973
> 
> 标签：jquery-mobile, knockout.js

我正在尝试的这个例子，列表视图最终看起来并不漂亮，

谁能建议我做错了什么。这特别发生在 data-inset=true 上。

[http://jsfiddle.net/xQ9Uu/1/](http://jsfiddle.net/xQ9Uu/1/)

如果我这样设置，没关系，但它不是真正的列表。

```
<ul id="alarmslist" data-bind="foreach: days" data-role="listview"> 
```

使数据插入为真会破坏设计。

```
 <ul id="alarmslist" data-bind="foreach: days" 
data-inset="true" data-role="listview"> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-30T10:27:38.793

更新后刷新列表视图应该可以解决您的问题。为此，您可以使用自定义绑定：

```
ko.bindingHandlers.jqmRefreshList = {
    update: function (element, valueAccessor) {
        ko.utils.unwrapObservable(valueAccessor()); // make this update fire each time the array is updated.
        $(element).listview("refresh")
    }
}; 
```

在 HTML 中：

```
<ul id="alarmslist" data-bind="foreach: days, jqmRefreshList: days" data-inset="true" data-role="listview"> 
```

这是工作小提琴：http: [//jsfiddle.net/xQ9Uu/44/](http://jsfiddle.net/xQ9Uu/44/)

# quartz-scheduler - 如何在 Quartz 中优先处理不同触发时间的待处理作业？

> ID：15702998
> 
> 赞同：0
> 
> 时间：2013-03-29T12:12:50.557
> 
> 标签：quartz-scheduler

Quartz 有一个很好的触发优先级功能，它允许对具有相同触发时间的触发进行排序。（这也被[记录](http://quartz-scheduler.org/documentation/quartz-2.1.x/examples/Example14)并被一个[问题](https://stackoverflow.com/questions/6941523/how-can-i-set-priorities-to-quartz-trigger)所涵盖）。

如何优先处理*所有待处理的作业*，而不仅仅是那些具有相同触发时间的作业？

（我完全清楚，如果更高优先级的工作不断涌入，这可能会导致低优先级工作的匮乏。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T11:39:22.220

没有用于此的 API，但是看起来可以在不更改 Quartz 代码的情况下“破解”。

**正确**`RAMJobStore.acquireNextTriggers`覆盖（如果`RAMJobStore`当然使用）似乎就足够了（例如，使用 big 调用超级实现，按优先级重新排序结果，除 first 之外的所有结果）。**`maxCount``releaseAcquiredTrigger()``originalMaxCount`**

# objective-c - 数组中的随机值

> ID：15702999
> 
> 赞同：-8
> 
> 时间：2013-03-29T12:12:56.700
> 
> 标签：objective-c, arrays

我有一个这样的数组。

`NSArray *myArray = [NSArray arrayWithObjects:@"1",@"3",@"5",@"45",@"67",nil];`

我想从我的数组中选择一个随机值并将其放入标签中。

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-29T12:15:41.877

做这个

```
myLabel.text = myArray[arc4random_uniform(myArray.count)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-29T12:17:19.677

并且（现在不是唯一的）**正确**的解决方案：

```
NSArray *array = @[@"foo", @"bar", @"baz"];
NSString *item = array[arc4random_uniform(array.count)]; 
```