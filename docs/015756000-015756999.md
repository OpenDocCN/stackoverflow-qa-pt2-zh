# StackOverflow 问答 15756000-15756999

# python - Numpy 作为 django 项目中的库

> ID：15756007
> 
> 赞同：3
> 
> 时间：2013-04-02T04:19:58.003
> 
> 标签：python, django, numpy, scipy

我无法将 numpy 放入`Django`项目的 libs 文件夹中。我不想在我的机器上安装它，因为它无处不在。当我将 numpy 文件夹放入 lib 文件夹时，会出现以下错误：

```
 File "C:\Users\Ketan\Desktop\NES\libs\numpy\__init__.py", line 128, in <module
>
    raise ImportError(msg)
ImportError: Error importing numpy: you should not try to import numpy from
        its source directory; please exit the numpy source tree, and relaunch
        your python intepreter from there. 
```

我还将`Scipy`文件夹放在 libs 文件夹中。

我用过`PIL`同样的方法，效果很好。谁能告诉我我哪里错了？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:42:33.940

下载 numpy 源文件夹，其中包含 setup.py。

使用 sftp 或其他方式将此文件夹复制到您的远程主机...

SSH 到您的远程服务器

登录

类型 ：

```
$> mkdir /lib
$> mkdir /lib/pythonX.Y ; x,y is pyversion
$> mkdir /lib/pythonX.Y/site-packages
$> cd numpy_folder_with_setup_py
$> python setup.py install --prefix=~ 
```

现在应该将 numpy 安装到您的前缀中，只需添加

```
$> echo "export PYTHONPATH=~/lib/pythonX.Y/site-packages:$PYTHONPATH" >> ~/ .bashrc 
```

您将需要注销并重新登录

```
$> echo $PYTHONPATH 
```

确保它包含您的自定义库路径

```
$> python -c "import numpy" 
```

如果没有错误，您已成功设置 numpy :)

注意：如果您的网络服务器跳过您的 .bashrc 初始化，您可能需要设置 sys.path 变量以以不同的方式包含此文件夹

# c - 查找 C 代码中的错误

> ID：15756016
> 
> 赞同：2
> 
> 时间：2013-04-02T04:21:11.833
> 
> 标签：c, linux, perl, segmentation-fault

更新：确实，依赖某些程序的段错误是一个错误。但我很感激并从我在这里收到的答案中学到了很多东西。

段错误.c

```
#include<stdio.h>
#include<stdlib.h>

/**
  *
  * This binary receives 2 numbers, an L and an R
  *
  * It will intentionally hit Segmentation Fault(actually SIGSEGV) whenever 30 is in the interval [L,R]
  *
  * It will be used to test the binary search segfault finder
  *
  */
int main(int argc, int **argv) {
  char exists;
  char *Q[3000];
  int i;
  int L = atoi((char*)argv[1]);
  int R = atoi((char*)argv[2]);

  printf("L=%d R=%d",L,R);
  /*exit(0);*/
  for(i=0;i<3000;i++)
    Q[i] = &exists;

  Q[30] = NULL; // <==== I want to cause a SIGSEGV through this !

  for(i=L;i<=R;i++) {
    int T = *Q[i]; // <== will segfault when i == 30 because I said so :)
  };
}; 
```

自动化.pl

```
#!/usr/bin/env perl
use strict;
use warnings;

my $segfaulting_file = "s";
my $L = 0;
my $R = 7266786; #`cat $segfaulting_file | wc -l`;
my $M;
my $binary = "./filter";

while ($L < $R) {
  $M     = int(($L+$R)/2);
  # head argument for right side
  my $HL = $M;
  # tail argument for right side
  my $TL = $M-$L;
  # head argument for left  side
  my $HR = $R;
  # tail argument for left  side
  my $TR = $R-$M;

  print "M=$M L=$L R=$R\n";
  my $go_left ;
  my $go_right;
  my $cmd_R = "cat $segfaulting_file | head -$HR | tail -$TR | $binary > /dev/null;";
  my $cmd_L = "cat $segfaulting_file | head -$HL | tail -$TL | $binary > /dev/null;";

  print "\nRunning $cmd_R\n";
  `$cmd_R`;
  #`./a.out $M $R`;
  print "RETVAL=$?\n";
  $go_right = ($? > 30000); # right side caused SEGFAULT
  `rm core`;
  print "\nRunning $cmd_L\n";
  `$cmd_L`;
  print "RETVAL=$?\n";
  #`./a.out $L $M`;
  $go_left  = ($? > 30000); # left  side caused SEGFAULT
  `rm core`;

  if(  $L == $R ) {
    last;
  }elsif ( $go_left  ) {
    print "GO left  L=$L R=$R\n";
    $R = $M  ;
  }elsif ( $go_right ) {
    print "GO right L=$L R=$R\n";
    $L = $M+1;
  };
};

# the loop stopped because $L==$R==$M , so we just print out $M
print "Segfault caused by line $M\n"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:38:57.857

你问 Z 是为了解决 Y 为了解决 X...*停止！*回到 X。您不需要日志行来找出它发生段错误的原因。您需要它发生段错误的*源代码行*来找出它发生段错误的原因，我想您知道如何获得。从那条线返回，沿着它可能采取的任何分支并战略性地放置`assert()`离子以确定错误输入的来源。当您继续“消除错误”时，将重复的代码分成函数以供重用，并且您将同时重构代码以实现模块化和稳定性。

*编辑：*如果你真的想继续这些路线，你不需要 perl 脚本。您所需要的只是代码中的一个计数器，用于在解析它们时计算行数，以及[signal](http://pubs.opengroup.org/onlinepubs/009696899/functions/signal.html)的帮助。运行以下代码时，[ideone](http://ideone.com/Q3IoTn)在计数为 65535 之前不会出现段错误。希望您能看到依靠段错误来处理缓冲区溢出是多么愚蠢……

```
#include <assert.h>
#include <stdio.h>
#include <stdlib.h>
#include <signal.h>
#include <limits.h>

void segfault_handler(int sig);

int counter = 0;

int main(void) {
    int *fubar = malloc(0); // allocate ZERO bytes!

    assert(signal(SIGSEGV, segfault_handler) != SIG_ERR);
    assert(signal(SIGILL, segfault_handler) != SIG_ERR);
    assert(signal(SIGFPE, segfault_handler) != SIG_ERR);

    for (;;) {
        printf("Assigning to fubar[%d]\n", counter);
        fubar[counter] = INT_MIN;
        counter = counter * 2 + 1;
    }
}

void segfault_handler(int sig) {
    /* NOTE: Using printf inside a signal handler is also undefined behaviour */
    printf("Fault when counter is %d\n", counter);
    exit(EXIT_FAILURE);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T04:31:20.940

检测 seg 故障最可靠的方法可能是使用`fork`、`exec`和`wait`。你 fork Perl 脚本；孩子执行二进制文件。父级从二进制文件中收集退出状态。退出状态有两个部分 - 如果孩子在控制下退出，则退出的值，或者如果它死于信号，则它接收到的信号。您只需检查信号分量是否为零；如果不为零，则假设这是一个段错误（尽管您可以根据需要验证其编号）。剩下的技巧是获取二进制数据以在标准输入上读取可用。您可以让孩子启动一个管道，它从中读取并将管道复制到标准输入，然后关闭管道。比真正的困难更繁琐。

* * *

### 概述 Perl 代码

我需要一个崩溃的程序，所以我创建了一个 Perl 脚本`crash_after_reading`：

```
#!/usr/bin/env perl
use POSIX;

$| = 1;
print "." while (<>);
print "\n";
abort; 
```

然后，您的 Perl 脚本的模拟器看起来像这样 ( `forkwait.pl`)：

```
#!/usr/bin/env perl
use strict;
use warnings;
use POSIX;

my $pipeline = "cat /etc/group";
my $pid;

die "$!" if (($pid = fork) < 0);

if ($pid == 0)
{
    # Child
    open STDIN, "-|", $pipeline or die "open";
    exec "crash_after_reading";
    die "failed to exec crash_after_reading";
}

my $corpse = waitpid($pid, 0);
printf "PID = %d; status = 0x%.4X\n", $corpse, $?; 
```

### 示例输出

```
..................................................................................
PID = 92413; status = 0x0006 
```

低 8 位非零，因此子程序因信号 6 (SIGABRT) 而崩溃。如果低 8 位全为零，则子程序以高 8 位的状态成功退出。

如果您决定完全使用它，则需要将其调整为您的代码。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T04:43:36.443

既然您可以编辑过滤程序的源代码，为什么不直接编辑它以在处理之前将每个日志文件行写入另一个文件。然后在段错误之后，查看新文件以查看当时正在处理的行。这也将比您的二进制搜索更快，后者每次都需要处理 N-1 行，而这种方法将平均处理 N/2 行（取决于违规行的位置），其中有 N日志文件中的行。

# performance - 构建具有共享预算的投标系统

> ID：15756017
> 
> 赞同：0
> 
> 时间：2013-04-02T04:21:12.343
> 
> 标签：performance, architecture, distributed-computing

您将如何构建投标系统的以下要求：

1.  每分钟 1000 万个请求
2.  响应时间100ms，其中60ms是服务器时间，40ms是网络时间
3.  每次中标，预算都会减少。您希望避免无钱出价或提交超出您承受能力的出价的情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T20:13:46.303

相关 StackOverflow 问题：

*   [良好的架构面试问题](https://stackoverflow.com/questions/816258/good-architecture-interview-questions)
*   [系统设计面试问题](https://stackoverflow.com/questions/8323177/system-design-interview-questions) （带有好文章的链接）
*   [准备与大数据相关的设计和架构问题的最佳方法](https://stackoverflow.com/questions/11916824/best-way-to-prepare-for-design-and-architecture-questions-related-to-big-data)
*   [如何设计可扩展的应用程序？](https://stackoverflow.com/questions/907260/how-to-design-scalable-applications)（您的问题的可扩展应用程序类型）

其他提示：

*   看书
*   努力学习
*   加入架构论坛（linkedin,..ask google）
*   多读一些

# cordova - 收到推送后显示带有消息的警报。电话间隙

> ID：15756019
> 
> 赞同：0
> 
> 时间：2013-04-02T04:21:23.273
> 
> 标签：cordova, push-notification, phonegap-plugins, cordova-2.0.0

我正在使用[GitHub-GCM Cordova 插件](https://github.com/marknutter/GCM-Cordova)。我的问题是收到推送消息后无法显示。

GCMIntentService：

```
@Override
protected void onMessage(Context context, Intent intent) {
Log.d(TAG, "onMessage - context: " + context);

Bundle extras = intent.getExtras();
if (extras != null) {
//show alert
}
//...
} 
```

我认为我应该是 java 代码，因为我不知道如何引用 html/js.. 但是 AlertDialog Builder 不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:34:55.800

您可以使用以下代码在收到推送后显示警报：

```
String message = extras.getString("message");
String title = extras.getString("title");
Notification notif = new Notification(android.R.drawable.btn_star_big_on, message, System.currentTimeMillis() );
notif.flags = Notification.FLAG_AUTO_CANCEL;
notif.defaults |= Notification.DEFAULT_SOUND;
notif.defaults |= Notification.DEFAULT_VIBRATE;

Intent notificationIntent = new Intent(context, TestSampleApp.class);
notificationIntent.addFlags(Intent.FLAG_ACTIVITY_SINGLE_TOP);
PendingIntent contentIntent = PendingIntent.getActivity(context, 0, notificationIntent, 0);

notif.setLatestEventInfo(context, title, message, contentIntent);
String ns = Context.NOTIFICATION_SERVICE;
NotificationManager mNotificationManager = (NotificationManager) context.getSystemService(ns);
mNotificationManager.notify(1, notif); 
```

把它放在接收推送的地方。

# javascript - 在 Ember.js 中处理动作参数

> ID：15756021
> 
> 赞同：4
> 
> 时间：2013-04-02T04:21:29.690
> 
> 标签：javascript, ember.js, handlebars.js

在模板中：

```
<button {{action someAction someParameter}}>Some Action</button> 
```

在控制器中：

```
someAction: function (e, someParameter) {
    console.log(e, someParameter);
} 
```

`someParameter`是未定义的，以及`e`我除外作为事件对象的地方。

如何将参数传递给动作？如果不可能，这是否意味着我需要创建`Ember.View`来处理带有参数的操作？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T10:55:50.527

我在您的代码中看到的唯一问题是**使用 {{action}} 帮助器时事件对象未传递给控制器​​中的函数**。无论如何，您的代码应该将 的值记录`someParameter`到控制台。如果你得到两个`undefined`可能**不在模板的上下文中**`someParameter`，或者它是。**`undefined`**

 **确保`someParameter`存在并保持正确的值，例如：

模板：

```
<button {{action someAction someParameter}}>Some Action (param: {{someParameter}} )  </button> 
```

如果该值未显示，请尝试`view.someParameter`根据您呈现模板的方式，如果您显示您的代码，我们可能会为您提供更多帮助。

在控制器上：

```
someAction: function (someParameter) {
  console.log(someParameter);
} 
```

希望这可以帮助！**

# python - 升级到 appengine 开发服务器 1.7.6 后导入 simplejson 时出错

> ID：15756022
> 
> 赞同：3
> 
> 时间：2013-04-02T04:21:35.020
> 
> 标签：python, google-app-engine

我刚刚在 OS X 上升级到 App Engine Python 开发服务器版本 1.7.6，升级后，当我尝试运行我的应用程序时收到以下错误：

```
ERROR    2013-04-02 04:05:14,268 wsgi.py:219] 
Traceback (most recent call last):
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 196, in Handle
    handler = _config_handle.add_wsgi_middleware(self._LoadHandler())
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/runtime/wsgi.py", line 255, in _LoadHandler
    handler = __import__(path[0])
  File "/Users/rmorlok/Dropbox/ryanroot/ryan-projects/Development/docalytics/online/main.py", line 13, in <module>
    from google.appengine.tools import dev_appserver
  File "/Applications/GoogleAppEngineLauncher.app/Contents/Resources/GoogleAppEngine-default.bundle/Contents/Resources/google_appengine/google/appengine/tools/dev_appserver.py", line 62, in <module>
    import simplejson
ImportError: No module named simplejson 
```

我确保通过运行安装了 simplejson

```
sudo pip install simplejson 
```

成功完成。如果我在控制台上运行 Python 并导入它，我可以成功导入 simplejson，但是当通过 PyCharm 或 GoogleAppengineLaunch 运行我的应用程序时，我收到上述错误。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T09:41:32.453

在最新版本之一中，SimpleJson 已重命名为 Json。如果您不更新到最新版本的 simplejson，您将不会遇到此问题。因此，您可以恢复到早期版本，或者您可以将以下内容添加到给出问题的 python 文件的顶部：

```
import json as simplejson 
```

当您安装 App Engine SDK for python 时，Google 可能对版本有一些要求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-19T05:20:38.290

这个问题可能是版本冲突或者sys.path配置错误造成的。这里有一些建议：

*   确保您只安装了一个版本的 sdk。您可能安装了两个版本，`/usr/local/google_appengine`并且 `/Applications/GoogleAppEngineLauncher.app/`
*   `/Applications/GoogleAppEngineLauncher.app/`重新安装 appengine 后，默认运行 appengine 启动器， 它会在创建符号链接时创建符号`/usr/local/google_appengine`链接，检查权限并确保根据需要设置系统变量，本主题可能会有所帮助 [在 Mac 上为 PyDev 配置 App Engine 路径](https://stackoverflow.com/questions/4911823/configuring-app-engine-path-for-pydev-on-mac)
*   使用 pycharm 时，请确保您启用了 appegine 支持。
*   如果您使用的是 virtualenv，请确保 appengine 在 sys.path 中。
*   您可以尝试将 $APPENGINEPATH/lib 添加到 sys.path
*   如果此问题仍然存在，请了解您使用的是哪个服务器 dev_appserver 或 dev_appserver2，请参阅[发行说明中的​​详细信息](http://code.google.com/p/googleappengine/wiki/SdkReleaseNotes)

如果没有任何帮助，您需要更深入地挖掘。出于我们的目的，我们在项目中定制了启动器版本（以避免一些员工在标准库中使用 appengine sdk 存根）。这是[http://pastebin.com/iU2PsGhE](http://pastebin.com/iU2PsGhE)

环境设置是通过这些步骤完成的（在我们的例子中和在 sdk 中）：

1.  找到 appengine 根目录。
2.  Fid DIR_PATH，由于某种原因 $APPENGINEPATH/lib/ipaddr
3.  导入位于 $APPENGINEPATH/lib/ 中的第三方库的正确版本

如果以上没有任何帮助，请随时评论此答案，我们会找到解决方案。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T05:10:09.777

如果您使用的是 eclipse，您必须`pip install simplejson`在控制台上然后重置您的 python 解释器。为此，您必须：

1.  右键单击您的 PyDev 项目并单击属性
2.  在左侧窗格中选择 python 解释器/语法
3.  单击显示配置解释器的蓝色链接
4.  点击右上角的删除，然后自动配置
5.  如果自动配置不起作用，请在您的 python 安装文件夹中手动找到您的 python.exe

# css - 如何设置初始比例以使网站在所有设备的浏览器上都能很好地呈现

> ID：15756027
> 
> 赞同：3
> 
> 时间：2013-04-02T04:21:54.983
> 
> 标签：css, responsive-design, initial-scale

我很难弄清楚如何设置初始比例，以使网站在所有不同的浏览器、操作系统和设备上看起来都很好。我的网站有一个 main.css 文件，然后根据您拥有的设备包含其他文件，例如 mobile.css 和 tablet.css。

我有一个键值对哈希表，其中键是浏览器+操作系统+设备，值是初始比例值。在为视图分配适当的初始比例之前，我的控制器代码将确定您使用的浏览器+操作系统。这不是输出初始比例的好方法。

我想要以下任何一种解决方案：

*   只指定一个常量初始比例，结合其他常量属性，将很好地呈现网站

*   基于浏览器、操作系统和设备的其他属性推导出适当初始比例的简单方程

*   一种在所有浏览器、操作系统和设备上一致地呈现网站而不使用初始规模的方法

以下是我遇到的示例问题：如果我将初始比例设置为 1，它在 Galaxy Note 1+Stock 浏览器+Android4.0.4 上渲染得很好，但在 Galaxy Note 1+Chrome+Android 4.0.4 上它太大了. 换句话说，在同一部手机和同一操作系统上，但在不同的浏览器上，规模是乱七八糟的！事实上，它在所有 iOS 设备上看起来也很丑陋。在 OS6 的 iphone4S 上太大了，在 OS 5.1 的 iPad 1 上稍微太大了。

一定有更简单的方法来控制移动设备上的网站规模吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T07:06:58.400

尝试这个：

```
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=1" />

<link rel="stylesheet" href="/Styles/tablet.css" media="screen and (max-width:800px)" />

<link rel="stylesheet" href="/Styles/mobile.css" media="screen and (max-width:480px)" /> 
```

# matlab - 从文本文件中读取并将其加载到 matlab 中的矩阵中

> ID：15756029
> 
> 赞同：0
> 
> 时间：2013-04-02T04:22:05.390
> 
> 标签：matlab, matrix, text-files

我有一个名为坐标.txt 的文本文件，格式如下：

```
0 0 0
-0.95 0.32 -0.02
-1.02 0.26 -0.96
-0.73 0.6 -0.52
-0.77 0.6 -0.71
-0.28 0 -0.95
-0.14 -0.16 0.13
-0.46 -1 -0.29
-1.14 -0.6 0.16 
```

如何使用命令将其加载到 matlab 中并将其保存在名为 X 的矩阵中，如下所示：

```
X=[0 0 0;
-0.95 0.32 -0.02;
-1.02 0.26 -0.96;
-0.73 0.6 -0.52;
-0.77 0.6 -0.71;
-0.28 0 -0.95;
-0.14 -0.16 0.13;
-0.46 -1 -0.29;
-1.14 -0.6 0.16;] 
```

因此文本文件中的每一行都将保存为矩阵 X 中的一行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:31:41.400

```
S = load('coordinates.txt', '-ascii'); 
```

键入“帮助加载”以获取更多信息。

# java - 远程 jprofiler 集成

> ID：15756031
> 
> 赞同：0
> 
> 时间：2013-04-02T04:22:14.067
> 
> 标签：java, selenium, junit4, jprofiler

我创建了一个@PerformanceTest 注释，它利用@Before 和@After 自动捕获jProfiler 指标。目标是将此注释应用于在单独的 JVM 中运行的 selenium 测试用例。

该框架是完整的，但我无法弄清楚如何连接到我的网络服务器（在同一台机器上，但在单独的 JVM 中）。

我试图连接到端口号以及尝试没有运气的本地连接。

```
@BeforeClass
public static void beforePerformanceClass() throws IOException {
    connection = ConnectionFactory.createRemoteConnection("localhost", 8849, 5);
} 
```

我的网络服务器配置如下。请注意，我已经尝试过离线和在线配置：

-Xshareclasses:none -agentpath:C:\PROGRA~1\JPROFI~1\bin\windows\jprofilerti.dll=port=8849,nowait,id=149,config=C:\Users\username\JPROFI~1\config .xml

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T11:10:21.740

API 不打算以这种方式使用。ConnectionFactory 类仅在您基于 API 编写自己的分析器时才有用。

您必须为此用例使用方法触发器。这意味着您必须在方法触发器中指定方法，而不是使用注释。有关触发器配置的更多信息，请参见[此处](http://resources.ej-technologies.com/jprofiler/help/doc/sessions/triggers/triggerSettings.html)。

# r - 使用 tableGrob 具有不同颜色行的表格

> ID：15756052
> 
> 赞同：-4
> 
> 时间：2013-04-02T04:23:46.103
> 
> 标签：r

我想制作一个具有`tableGrob`功能的表格，我还想完成行，但要对特定行进行颜色。h.even.alpha、h.odd.alpha、v.even.alpha 和 v.odd.alpha 用于穿插两种颜色，在这种情况下不起作用。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:47:15.977

如果您只想在相同颜色上使用不同的色调（或与白色交替），您可以使用`h.even.alpha`and `h.odd.alpha`(and `v.even.alpha`/ `v.odd.alpha`)

```
library(gridExtra)

grid.table(head(iris), h.even.alpha = 1, h.odd.alpha = 0, 
   v.even.alpha = 1, v.odd.alpha = 1) 
```

![在此处输入图像描述](https://i.stack.imgur.com/9129q.png)

如果您想要完全不同的颜色，您可以绘制两次表格，使用不同的设置`gpar.corefill`（和相应的`alpha`值）

```
grid.newpage()
grid.table(head(iris), h.even.alpha = 1, h.odd.alpha = 0, 
   v.even.alpha = 1, v.odd.alpha = 1, 
   gpar.corefill = gpar(fill = 'red',col = 'white'))
 grid.table(head(iris), h.even.alpha = 0, h.odd.alpha = 1, 
   v.even.alpha = 1, v.odd.alpha = 1, 
   gpar.corefill = gpar(fill = 'purple',col = 'white')) 
```

![在此处输入图像描述](https://i.stack.imgur.com/Q02HF.png)

# jsf - 不在 JSF 2.0 中对 ajax 调用应用值

> ID：15756054
> 
> 赞同：0
> 
> 时间：2013-04-02T04:24:00.103
> 
> 标签：jsf, jsf-2, primefaces

我有一个 primefaces 对话框，其中有一组单选按钮和两个文本字段。我想在`change`单选按钮事件中启用/禁用这些文本字段。
这是我的对话框代码

```
<h:panelGrid  style="float:left;">
                            <h:selectOneRadio id="timeLimit" layout="pageDirection" value="#{bean.selectedOption}" onchange="submit()"
                            valueChangeListener="#{bean.enableDisableDecision}">
                            <f:ajax event="change" execute="@this" render="from to"/>
                                <f:selectItem itemValue="1" itemLabel="Once Only"/>
                                <f:selectItem itemValue="2" itemLabel="From:"/>
                                <f:selectItem itemValue="3" itemLabel="Permanent"/>
                                <f:selectItem itemValue="4" itemLabel="Ignore"/>
                            </h:selectOneRadio>
                        </h:panelGrid>
                        <h:outputText id="c" value="#{renderBean.limitFields}"/>

                            <h:inputText id="from" disabled="#{renderBean.limitFields}"></h:inputText>

                            <h:outputText style="margin-left:-20px;float:left;margin-top: 20px;" value="To: "/>
                            <h:inputText id="to" style="float:left; margin-top: -20px;" disabled="#{renderBean.limitFields}"></h:inputText> 
```

这是我的 RenderBean

```
@ManagedBean
@SessionScoped
public class RenderBean {
    public boolean limitFields;

    public RenderBean() {

        limitFields = true;
    }

    public boolean isLimitFields() {
        return limitFields;
    }

    public void setLimitFields(boolean limitFields) {
        this.limitFields = limitFields;
    }

    public void enableLimitFields() {

        limitFields = false;
    }

    public void disableLimitFields() {

        limitFields = true;
    }
} 
```

这是我调用监听器的 Bean 类。

```
@ManagedBean
@SessionScope
class Bean{
public void durationSelected(ValueChangeEvent e){

        RenderBean rb = null;
        System.out.println("Value: "+e.getNewValue().toString());
        if(e.getNewValue().toString().equals("2")){
            rb = (RenderBean) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("renderBean");
            rb.enableLimitFields();
        }else{
             rb = (RenderBean) FacesContext.getCurrentInstance().getExternalContext().getSessionMap().get("renderBean");
             rb.disableLimitFields();
        }
    }
} 
```

现在我的代码运行完美，它可以毫无问题地调用方法，但是当我更改单选按钮的选择时，它不会启用/禁用文本字段。这意味着值正在更改，但 JSF 组件在 ajax 调用时不会读取它们.现在我被困在这里了。任何syggestions？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:37:16.183

只需`onchange="submit()"`从您的单选按钮中删除。我不是 JSF 专家，但我想当您发送 ajax 请求时，只需执行您的数据`<f:ajax ..`，然后无需提交它。所以当我复制粘贴您的示例时，它不起作用并且然后我通过删除尝试它`onchange="submit"`，它工作正常:)

# python - 修改由列表索引的多维 numpy 子数组

> ID：15756056
> 
> 赞同：0
> 
> 时间：2013-04-02T04:24:11.063
> 
> 标签：python, arrays, numpy, indexing, scipy

假设我有一个 4x4 numpy 数组：`quad = arange(16).reshape(4,4)`，即

```
[[ 0  1  2  3]
 [ 4  5  6  7]
 [ 8  9 10 11]
 [12 13 14 15]] 
```

我想用值改变元素，

```
[[ 5  7]
 [ 9 11]] 
```

到（例如），

```
[[16 17]
 [18 19]] 
```

我最初的猜测是我可以做类似的事情，

```
quad[[1,3],[1,3]] = np.arange(16,20).reshape(2,2) 
```

但这不起作用，因为`quad[[1,3],[1,3]]`实际上产生了对应于 [5,11] 的元素。我发现我可以使用**查看**适当的元素，`quad[[1,3]][:,[1,3]]`但我不能使用它来修改这些值。

是使用`for`循环的唯一解决方案吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T05:04:50.130

你可以做：

```
quad[np.ix_([1, 3], [1, 3])] 
```

这是以下的简写：

```
x = [[1, 1], [3, 3]]
y = [[1, 3], [1, 3]]
quad[x, y] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T05:00:13.763

这是Numpy中[整数索引](http://docs.scipy.org/doc/numpy/reference/arrays.indexing.html#integer)的一种行为。如果您将 N 维数组的索引作为 N 维数组`A`的索引，其中`(m_1...m_n)`包含大小为 M 的 N 个 1d 数组，则切片构造为

```
result[m_1, ..., m_n] == np.array([A[m_1[0], ..., m_n[0]], A[m_1[1], ..., m_n[1]],
                           ..., A[m_1[M], ..., m_n[M]]] 
```

为了克服这种行为，您可以使用两次切片索引：

```
>>> a = np.arange(16).reshape(4,4)
>>> a[1:3][:,1:3]
array([[ 5,  6],
       [ 9, 10]]) 
```

UPD：您可以修改此视图：

```
>>> b = np.arange(16,20).reshape(2,2)
>>> b
array([[16, 17],
       [18, 19]])
>>> a[1:3][:,1:3] = b
>>> a
array([[ 0,  1,  2,  3],
       [ 4, 16, 17,  7],
       [ 8, 18, 19, 11],
       [12, 13, 14, 15]]) 
```

# r - 求解可变系数二阶线性 ODE？

> ID：15756058
> 
> 赞同：1
> 
> 时间：2013-04-02T04:00:41.047
> 
> 标签：r, differential-equations

对于可变系数二阶线性 ODE

$x''(t)+\beta_1(t)x'(t)+\beta_0 x(t)=0$

我有 $\beta_1(t)$ 和 $\beta_0(t)$ 的数值（以向量表示），有人知道一些 R 包可以做到这一点吗？一些简单的例子来说明也很好。

我用谷歌搜索发现' [*bvpSolve*](http://cran.r-project.org/web/packages/bvpSolve/bvpSolve.pdf) '可以解决常数系数值。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:27:59.943

为了使用`deSolve`，您必须使您的二阶 ODE

```
x''(t) + \beta_1(t) x'(t) + \beta_0 x(t)=0 
```

成一对耦合的一阶 ODE：

```
x'(t) = y(t)
y'(t) = - \beta_1(t) y(t) - \beta_0 x(t) 
```

然后就很简单了：

```
gfun <- function(t,z,params) {
      g <- with(as.list(c(z,params)),
       {
         beta0 <- sin(2*pi*t)
         beta1 <- cos(2*pi*t)
       c(x=y,
         y= -beta1*y - beta0*x))
     list(g,NULL)
}
library("deSolve")
run1 <- ode(c(x=1,y=1),times=0:40,func=gfun,parms=numeric(0)) 
```

我随意选择了一些初始条件（`x(0)=1`, ）；`x'(0)=1`您可能还想为模型添加参数（即制作`parms`除 之外的其他东西`numeric(0)`）

PS，如果您不满意手动转换为耦合的一阶 ODE，并且想要一个可以无缝处理二阶 ODE 的包，那么我不知道答案...

# javascript - Chrome 扩展程序-javascript 不工作

> ID：15756060
> 
> 赞同：0
> 
> 时间：2013-04-02T04:24:33.643
> 
> 标签：javascript, google-chrome, browser, google-chrome-extension

我刚刚开始通过查看 google 的[示例来构建 chrome 扩展：](https://developer.chrome.com/extensions/getstarted.html)

我做了和上面提到的完全一样的。虽然我可以看到我在 popup.html 的正文中写的任何内容，但似乎 popup.js 的任何部分都没有工作。我猜 javascript 不适用于我的 chrome 扩展。

我相信我遵循了谷歌的 CSP，但仍然如此。感谢期待。

POPUP.HTML

```
<!doctype html>
<html>
  <head>
    <title>Getting Started Extension's Popup</title>
    <style>
      body {
        min-width: 357px;
        overflow-x: hidden;
      }

      img {
        margin: 5px;
        border: 2px solid black;
        vertical-align: middle;
        width:  75px;
        height: 75px;
      }
    </style>

    <!--
      - JavaScript and HTML must be in separate files: see our Content Security
      - Policy documentation[1] for details and explanation.
      -
      - [1]: http://developer.chrome.com/extensions/contentSecurityPolicy.html
     -->
    <script src="popup.js"></script>
  </head>
  <body>
  </body>
</html> 
```

POPUP.JS

```
var QUERY = 'Kittens';

var kittenGenerator = {
  /**
   * Flickr URL that will give us lots and lots of whatever we're looking for.
   *
   * See http://www.flickr.com/services/api/flickr.photos.search.html for
   * details about the construction of this URL.
   *
   * @type {string}
   * @private
   */
  searchOnFlickr_: 'https://secure.flickr.com/services/rest/?' +
      'method=flickr.photos.search&' +
      'api_key=90485e931f687a9b9c2a66bf58a3861a&' +
      'text=' + encodeURIComponent(QUERY) + '&' +
      'safe_search=1&' +
      'content_type=1&' +
      'sort=interestingness-desc&' +
      'per_page=20',

  /**
   * Sends an XHR GET request to grab photos of lots and lots of kittens. The
   * XHR's 'onload' event is hooks up to the 'showPhotos_' method.
   *
   * @public
   */
  requestKittens: function() {
    var req = new XMLHttpRequest();
    req.open("GET", this.kittensOnFlickr_, true);
    req.onload = this.showPhotos_.bind(this);
    req.send(null);
  },

  /**
   * Handle the 'onload' event of our kitten XHR request, generated in
   * 'requestKittens', by generating 'img' elements, and stuffing them into
   * the document for display.
   *
   * @param {ProgressEvent} e The XHR ProgressEvent.
   * @private
   */
  showPhotos_: function (e) {
    var kittens = e.target.responseXML.querySelectorAll('photo');
    for (var i = 0; i < kittens.length; i++) {
      var img = document.createElement('img');
      img.src = this.constructKittenURL_(kittens[i]);
      img.setAttribute('alt', kittens[i].getAttribute('title'));
      document.body.appendChild(img);
    }
  },

  /**
   * Given a photo, construct a URL using the method outlined at
   * http://www.flickr.com/services/api/misc.urlKittenl
   *
   * @param {DOMElement} A kitten.
   * @return {string} The kitten's URL.
   * @private
   */
  constructKittenURL_: function (photo) {
    return "http://farm" + photo.getAttribute("farm") +
        ".static.flickr.com/" + photo.getAttribute("server") +
        "/" + photo.getAttribute("id") +
        "_" + photo.getAttribute("secret") +
        "_s.jpg";
  }
};

// Run our kitten generation script as soon as the document's DOM is ready.
document.addEventListener('DOMContentLoaded', function () {
  kittenGenerator.requestKittens();
}); 
```

清单.JSON

```
{
  "manifest_version": 2,

  "name": "WikiConnect",
  "description": "This extension demonstrates a 'browser action' with kittens.",
  "version": "1.0",

  "browser_action": {
    "default_icon": "icon.png",
    "default_popup": "popup.html"
  },
  "permissions": [
    "https://secure.flickr.com/"
  ],

  "web_accessible_resources": [
    "notification.html","popup.html","popup.js"
    ]
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:21:01.160

好的，不错的简单解决方案

改变：

```
req.open("GET", this.kittensOnFlickr_, true); 
```

至：

```
req.open("GET", this.searchOnFlickr_, true); 
```

# testing - 使用 100 台设备进行测试

> ID：15756062
> 
> 赞同：1
> 
> 时间：2013-04-02T04:24:41.333
> 
> 标签：testing, virtualization, stress-testing

我们正在构建旨在与 100 或 1000 台 PC 通信的软件。不幸的是，我们没有办法设置那么多设备。我们没有那么多物理设备，也没有足够的基础设施来支持那么多虚拟设备。我们希望使用大量 PC 进行测试，并结合网络延迟等其他因素。是否有服务或其他方式可以实现这一级别的测试？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:34:38.360

那里有云负载测试服务可以满足您的需求。我知道的一些是[LoadStorm](http://loadstorm.com/)和[Load Impact](http://loadimpact.com/)。相当多的其他人会搜索“云负载测试”之类的内容。这可能是一个简单的选择。会有一些成本，但不会太高。

如果您想免费推出自己的解决方案，许多基础设施即服务提供商会为新用户提供免费套餐。Amazon EC2 和 Microsoft Azure 都免费提供每月 750 小时的最小实例。虽然这通常用于整个连续一个月的服务器时间（24 小时 * 31 天），但您也可以使用它来启动 750 台服务器一小时，每月一次。将它们分布在所有可用的不同区域/数据中心，以最大限度地提高网络和延迟的差异。

您还可以考虑使用具有良好并发支持或占用空间小的语言编写测试工具，以便您可以一次启动数百个线程/进程，然后在相对较少的服务器上运行测试。它不会与同时使用 1000 个不同的 IP 地址完全相同，但 4 到 5 台服务器每台部署数百个客户端可能足以满足您的测试需求。

# jsf - 在整个会话期间更改 JSF 中的本地化

> ID：15756065
> 
> 赞同：1
> 
> 时间：2013-04-02T04:24:52.927
> 
> 标签：jsf, localization

我有一个 Web 应用程序，它使用带有 PrimeFaces 的 JSF，并且有一个 JSF 允许用户动态更改语言环境。但是在用户转到另一个 JSF 后，语言环境会更改回默认值。我查看了[此处](https://stackoverflow.com/questions/4830588/jsf-locale-is-set-per-request-not-for-session?rq=1)和[此处](http://jdevelopment.nl/internationalization-jsf-utf8-encoded-properties-files/)的代码，但仍然无法正常工作。

在我的资源目录中，我有 3 个属性文件。

```
Project
    - src/main/resources
        - <default package>
            - messages_en_US.properties
            - messages_zh_CN.properties
            - messages_zh_TW.properties 
```

在我`faces-config.xml`的我定义了语言环境

```
<application>
        <locale-config>
            <default-locale>en_US</default-locale>
            <supported-locale>zh_TW</supported-locale>    <!-- generic traditional chinese -->
            <supported-locale>zh_CN</supported-locale>    <!-- generic simplified chinese -->
        </locale-config>
        <message-bundle>
            messages
        </message-bundle>
        <resource-bundle>
            <base-name>messages</base-name>
            <var>msg</var>
        </resource-bundle>
    </application> 
```

在允许用户更改语言环境的 JSF 中，它实际上是一个用户配置文件页面。从Ennum`<p:selectOneMenu />`中读取项目，并在单击“保存”按钮时更改区域设置。

```
<p:selectOneMenu id="defaultLanguage" value="#{userController.userLanguage}">
                            <f:selectItems value="#{userController.langcode}" var="lang" itemValue="#{lang.locale}"
                                           itemLabel="#{lang.locale} - #{lang.desc}" />
                        </p:selectOneMenu>
...
<p:commandButton id="save" value="#{msg.save}" title="#{msg.save}" icon="ui-icon-disk"
                             styleClass="action-buttons" actionListener="#{userController.doSave}" update="@form" /> 
```

在`UserController`ManagedBean中，代码如下：

```
@ManagedBean
@ViewScoped
public class UserController extends BaseController implements Serializable {

    public void doSave(ActionEvent e) {
            String lang;
            String country = null;
            String[] selectedLanguage = userLanguage.split("_");

            lang = selectedLanguage[0];
            if (selectedLanguage.length > 1) {
                country = selectedLanguage[1];
                setUserLocale(new Locale(lang, country));
            }
            else {
                setUserLocale(new Locale(lang));
            }

            LOG.debug("userLanguage: {}; lang: {}", userLanguage, lang);

            FacesContext.getCurrentInstance().getViewRoot().setLocale(userLocale);      // sets the locale from the selected user language

            Messages.addGlobalInfo(getMessage(msgInfoUpdated));
        }

    private LangCode userLangCode;              // getter + setter
    private LangCode[] langcode = LangCode.values();    // getter + setter
    @ManagedProperty(value = "#{loginController.userLocale}")
        private Locale userLocale;              // getter + setter

} 
```

在 JSF 中，我尝试添加`<f:view locale="#{loginController.locale}" />`. 但还是一样。在调试模式下，当转到一个新的 JSF 页面时， 的值`userLocale`始终是默认语言环境，而不是用户更改的语言环境。

`LoginController`代码如下。在该`doLogin()`方法中，我`userLocale`使用 Faces Context 中的语言环境设置对象。

```
@ManagedBean
@SessionScoped
public class LoginController extends BaseController implements Serializable {

    public String doLogin() {
            String returnValue;

            try {
                currentUser = aduserFacade.validateUserLogin(username, password);
                LOG.debug("Successful login: {}", currentUser.getUsrId());

                // Set currentUser object into request session attribute
                FacesContext context = FacesContext.getCurrentInstance();
                HttpServletRequest request = (HttpServletRequest) context.getExternalContext().getRequest();

                setUserSession();
                userLocale = Faces.getLocale();
                request.getSession().setAttribute("userSession", userSession);

                returnValue = "main";
            }
            catch (Exception e) {
                Messages.addGlobalError(getMessage(e.getMessage()));
                LOG.error(e.toString(), e);
                returnValue = null;
            }

            return returnValue;
    }

    private Locale userLocale;  // getter + setter

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T06:48:47.163

您的语言环境未能保留的原因是您注入的语言环境属性尚未更新为您注入时的新值。看，当您注入托管 bean 属性时，与托管 bean 本身一样

```
@ManagedProperty(value = "#{loginController.userLocale}") 
```

代替

```
 @ManagedProperty(value = "#{loginController}") 
```

您将获得静态值注入。即使在注入 bean 中的值已更新之后，您仍然只会得到一个在注入 bean 初始化时设置的陈旧值。所以你需要做的是注入整个`LoginController`然后自己提取值，这样你就会得到最新的值。

也可以看看

*   [当两个 bean 的范围相同时，托管属性值未更新](https://stackoverflow.com/questions/15747655/managed-property-value-not-updated-when-both-beans-are-of-same-scope/15750555#comment22385791_15750555)

* * *

与您的问题无关，您真的不应该将成员变量和注入放在类的底部。使您的代码不方便阅读

# sql - SQL 查找包含“ar”的名称

> ID：15756069
> 
> 赞同：1
> 
> 时间：2013-04-02T04:25:16.790
> 
> 标签：sql, ms-access

我是 SQL 新手，试图弄清楚。

我试图从包含“ar”的表中获取名字

这就是我放的

```
SELECT EMP_FNAME 
 FROM employee
where EMP_FNAME CONTAINS 'ar'; 
```

当我尝试运行它时，我收到一条错误消息：

> 查询表达式 'EMP_FNAME CONTAINS 'ar'' 中的语法错误（缺少运算符）。

那行有什么错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:26:02.593

由于错误消息的相似性，也许您的意思是`LIKE`并且很可能正在使用。`MS ACCESS`

```
SELECT EMP_FNAME 
FROM   employee
WHERE  EMP_FNAME LIKE '*ar*'; 
```

*   [MS Access LIKE 运算符](http://www.techonthenet.com/access/queries/like.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:27:24.103

如果这是 T-SQL (SQL Server)，并且您实际上想要使用 CONTAINS，那么您可能意味着：

```
SELECT EMP_FNAME 
 FROM employee
 WHERE CONTAINS(EMP_FNAME, 'ar'); 
```

否则，喜欢（MS ACCESS 本机）：

```
SELECT EMP_FNAME 
 FROM employee
 WHERE EMP_FNAME LIKE '*ar*'; 
```

或者，喜欢（OLEDB、ANSI SQL）：

```
SELECT EMP_FNAME 
 FROM employee
 WHERE EMP_FNAME LIKE '%ar%'; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T04:35:00.810

对于其他人，使用 % 而不是 * 作为通配符

```
SELECT EMP_FNAME 
FROM   employee
WHERE  EMP_FNAME LIKE '%ar%'; 
```

# c++ - 带有 std::function 的比较运算符

> ID：15756071
> 
> 赞同：0
> 
> 时间：2013-04-02T04:25:23.797
> 
> 标签：c++, c++11

我怎样才能比较两个`std::function`？

`==`似乎只与空指针比较： [http ://en.cppreference.com/w/cpp/utility/functional/function/operator_cmp](http://en.cppreference.com/w/cpp/utility/functional/function/operator_cmp)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:28:16.820

这是不可能的。`std::function`可以存储任何可复制和可调用的对象。这包括不可比较的对象。由于`std::function`可以包含不可比较的对象，因此它不能提供适用于所有包含对象的任何比较操作。

如果您想要此功能，则必须实现自己的类型擦除`function`模板，该模板要求包含的对象具有可比性。

# c# - 将jQuery数据表绑定到gridview时出现异常

> ID：15756074
> 
> 赞同：6
> 
> 时间：2013-04-02T04:25:26.993
> 
> 标签：c#, jquery, asp.net, gridview, datatables

我正在尝试将 jquery 数据表绑定到 gridview。它抛出异常。

“表格必须按页眉、正文、页脚的顺序包含行部分。”

## 脚步

## 1) JavaScript 调用

```
<script type="text/javascript" charset="utf-8">
/* Define two custom functions (asc and desc) for string sorting */
  $(document).ready(function () {
    /* Build the DataTable with third column using our custom sort functions */
    $('#gvInitiavtives').dataTable({
        "aaSorting": [[0, 'asc']          
    });
}); 
```

## 2) 网格视图

```
 <asp:GridView ID="gvInitiavtives" runat="server" Width="100%" CssClass="Grid" 
                     RowStyle-Width="30px" AutoGenerateColumns="false" HeaderStyle-CssClass="GridHeader"  RowStyle-CssClass="GridItem" AlternatingRowStyle-CssClass="GridAltItem"  DataKeyNames="InitiativeIdx" AllowSorting="true" ClientIDMode="Static" >
                <EmptyDataRowStyle BorderStyle="None" BorderWidth="0px" />
                <EmptyDataTemplate>
                    <asp:Label ID="lblNorecId" runat="server" Text="Sorry! Your requested records are not found, please try with other search criteria." Font-Bold="true" ForeColor="red" Font-Names="Arial" Font-Size="small"></asp:Label>
                </EmptyDataTemplate>
                <Columns>
                    <asp:BoundField DataField="BusinessUnit" HeaderText="" HeaderStyle-Wrap="false" HeaderStyle-HorizontalAlign="NotSet" SortExpression="BusinessUnit" />
                    <asp:TemplateField>
                    <ItemTemplate>

                    <asp:Label ID="lblInitiaiveName" runat="server" Text='<%# Bind("InitiativeName") %>' ToolTip ='<%# String.Format("{0} ; {1}",Eval("Initiative"), Eval("InitiativeDescription")) %>' ></asp:Label>
                    </ItemTemplate>
                    </asp:TemplateField>
---
---
</Columns>
            </asp:GridView> 
```

## 3) 后面的代码

```
protected void Page_PreRender(object sender, System.EventArgs e)
{
    // support for jquery datatables
    if (gvInitiavtives.Rows.Count > 0) {
        gvInitiavtives.UseAccessibleHeader = true;
        gvInitiavtives.HeaderRow.TableSection = TableRowSection.TableHeader;
    }

} 
```

## 4) 例外

```
Server Error in '/' Application.
--------------------------------------------------------------------------------

The table  must contain row sections in order of header, body, then footer. 
Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.Web.HttpException: The table  must contain row sections in order of header, body, then footer.

Source Error: 

An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.  

Stack Trace: 

[HttpException (0x80004005): The table  must contain row sections in order of header, body, then footer.]
   System.Web.UI.WebControls.Table.RenderContents(HtmlTextWriter writer) +8790317
   System.Web.UI.WebControls.WebControl.Render(HtmlTextWriter writer) +32 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T06:51:28.953

像这样更改代码

```
$('[id*=gvInitiavtives]').prepend($("<thead></thead>").append($(this).find("[id*=gvInitiavtives] tr:first"))).dataTable({
"aaSorting": [[0, 'asc']          
    }); 
```

# java - 拥有大量小方法是否有助于 JIT 编译器优化？

> ID：15756075
> 
> 赞同：43
> 
> 时间：2013-04-02T04:25:40.717
> 
> 标签：java, optimization, jit, compiler-optimization

在最近关于如何优化某些代码的讨论中，有人告诉我将代码分解为许多小方法可以显着提高性能，因为 JIT 编译器不喜欢优化大方法。

我不确定这一点，因为 JIT 编译器本身似乎应该能够识别自包含的代码段，无论它们是否在自己的方法中。

任何人都可以确认或反驳这一说法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-04-02T07:52:43.693

Hotspot JIT 仅内联小于某个（可配置）大小的方法。所以使用更小的方法允许更多的内联，这很好。

[请参阅此页面](http://www.oracle.com/technetwork/java/javase/tech/vmoptions-jsp-140102.html)上的各种内联选项。

* * *

**编辑**

稍微详细说明一下：

*   如果一个方法很小，它将被内联，因此很少有机会因将代码拆分为小方法而受到惩罚。
*   在某些情况下，拆分方法可能会导致更多的内联。

**示例**（如果您尝试，完整的代码将具有相同的行号）

```
package javaapplication27;

public class TestInline {
    private int count = 0;

    public static void main(String[] args) throws Exception {
        TestInline t = new TestInline();
        int sum = 0;
        for (int i  = 0; i < 1000000; i++) {
            sum += t.m();
        }
        System.out.println(sum);
    }

    public int m() {
        int i = count;
        if (i % 10 == 0) {
            i += 1;
        } else if (i % 10 == 1) {
            i += 2;
        } else if (i % 10 == 2) {
            i += 3;
        }
        i += count;
        i *= count;
        i++;
        return i;
    }
} 
```

使用以下 JVM 标志运行此代码时：（`-XX:+UnlockDiagnosticVMOptions -XX:+PrintCompilation -XX:FreqInlineSize=50 -XX:MaxInlineSize=50 -XX:+PrintInlining`是的，我使用了证明我的情况的值：`m`太大但重构`m`后`m2`都低于阈值 - 使用其他值可能会得到不同的输出）。

您将看到`m()`并`main()`编译，但`m()`不会内联：

```
 56    1             javaapplication27.TestInline::m (62 bytes)
 57    1 %           javaapplication27.TestInline::main @ 12 (53 bytes)
          @ 20   javaapplication27.TestInline::m (62 bytes)   too big 
```

您还可以检查生成的程序集以确认它`m`不是内联的（我使用了这些 JVM 标志：）`-XX:+PrintAssembly -XX:PrintAssemblyOptions=intel`- 它看起来像这样：

```
0x0000000002780624: int3   ;*invokevirtual m
                           ; - javaapplication27.TestInline::main@20 (line 10) 
```

如果您像这样重构代码（我已在单独的方法中提取了 if/else）：

```
public int m() {
    int i = count;
    i = m2(i);
    i += count;
    i *= count;
    i++;
    return i;
}

public int m2(int i) {
    if (i % 10 == 0) {
        i += 1;
    } else if (i % 10 == 1) {
        i += 2;
    } else if (i % 10 == 2) {
        i += 3;
    }
    return i;
} 
```

您将看到以下编译操作：

```
 60    1             javaapplication27.TestInline::m (30 bytes)
 60    2             javaapplication27.TestInline::m2 (40 bytes)
            @ 7   javaapplication27.TestInline::m2 (40 bytes)   inline (hot)
 63    1 %           javaapplication27.TestInline::main @ 12 (53 bytes)
            @ 20   javaapplication27.TestInline::m (30 bytes)   inline (hot)
            @ 7   javaapplication27.TestInline::m2 (40 bytes)   inline (hot) 
```

所以`m2`被内联到`m`，这是你所期望的，所以我们回到了原来的场景。但是当`main`被编译时，它实际上内联了整个东西。在汇编级别，这意味着您将不再找到任何`invokevirtual`说明。你会发现这样的行：

```
 0x00000000026d0121: add    ecx,edi   ;*iinc
                                      ; - javaapplication27.TestInline::m2@7 (line 33)
                                      ; - javaapplication27.TestInline::m@7 (line 24)
                                      ; - javaapplication27.TestInline::main@20 (line 10) 
```

基本上常见的指令是“相互化的”。

**结论**

我并不是说这个例子具有代表性，但它似乎证明了几点：

*   使用更小的方法可以提高代码的可读性
*   较小的方法通常会被内联，因此您很可能不会支付额外方法调用的成本（这将是性能中性的）
*   在某些情况下，使用较小的方法*可能会*改善全局内联，如上面的示例所示

最后：如果您的代码的一部分对于这些考虑事项很重要的性能真的很重要，您应该检查 JIT 输出以微调您的代码和重要的前后配置文件。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-02T07:27:08.623

如果您采用完全相同的代码并将它们分解为许多小方法，那根本不会帮助 JIT。

一个更好的说法是现代的 HotSpot JVM 不会因为你写了很多小方法而惩罚你。它们确实被积极地内联，因此在运行时您并没有真正支付函数调用的成本。即使对于 invokevirtual 调用也是如此，例如调用接口方法的调用。

几年前我写了[一篇博文](http://weblogs.java.net/blog/kohsuke/archive/2008/03/deep_dive_into.html)，描述了如何看到 JVM 是内联方法。该技术仍然适用于现代 JVM。我还发现查看与 invokedynamic 相关的讨论很有用，其中广泛讨论了现代 HotSpot JVM 如何编译 Java 字节码。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-06-22T18:19:49.660

我读过许多文章，其中指出较小的方法（以将方法表示为 Java 字节码所需的字节数来衡量）更有可能符合 JIT（即时编译器）的内联条件。将热方法（最常运行的方法）编译为机器代码。他们描述了方法内联如何产生更好的机器代码性能。简而言之：更小的方法为 JIT 在识别热方法时如何将字节码编译为机器码方面提供了更多选择，这允许更复杂的优化。

为了测试这个理论，我创建了一个带有两个基准方法的 JMH 类，每个方法包含相同的行为但不同的因素。第一个基准被命名`monolithicMethod`（所有代码都在一个方法中），第二个基准被命名`smallFocusedMethods`并被重构，以便每个主要行为都被移出到它自己的方法中。`smallFocusedMethods`基准如下所示：

```
@Benchmark
public void smallFocusedMethods(TestState state) {
    int i = state.value;
    if (i < 90) {
        actionOne(i, state);
    } else {
        actionTwo(i, state);
    }
}

private void actionOne(int i, TestState state) {
    state.sb.append(Integer.toString(i)).append(
            ": has triggered the first type of action.");
    int result = i;
    for (int j = 0; j < i; ++j) {
        result += j;
    }
    state.sb.append("Calculation gives result ").append(Integer.toString(
            result));
}

private void actionTwo(int i, TestState state) {
    state.sb.append(i).append(" has triggered the second type of action.");
    int result = i;
    for (int j = 0; j < 3; ++j) {
        for (int k = 0; k < 3; ++k) {
            result *= k * j + i;
        }
    }
    state.sb.append("Calculation gives result ").append(Integer.toString(
            result));
} 
```

您可以想象`monolithicMethod`外观（相同的代码但完全包含在一种方法中）。`TestState`简单地创建一个新对象（这样这个`StringBuilder`对象的创建不计入基准时间）和为每次调用选择一个介于 0 和 100 之间的随机数（并且这是故意配置的，以便两个基准都使用完全相同的随机数序列，以避免偏差风险）。

在使用六个“分叉”运行基准测试后，每个分叉都涉及五次一秒的预热，然后是六次五秒的迭代，结果如下所示：

```
Benchmark                                         Mode   Cnt        Score        Error   Units

monolithicMethod                                  thrpt   30  7609784.687 ± 118863.736   ops/s
monolithicMethod:·gc.alloc.rate                   thrpt   30     1368.296 ±     15.834  MB/sec
monolithicMethod:·gc.alloc.rate.norm              thrpt   30      270.328 ±      0.016    B/op
monolithicMethod:·gc.churn.G1_Eden_Space          thrpt   30     1357.303 ±     16.951  MB/sec
monolithicMethod:·gc.churn.G1_Eden_Space.norm     thrpt   30      268.156 ±      1.264    B/op
monolithicMethod:·gc.churn.G1_Old_Gen             thrpt   30        0.186 ±      0.001  MB/sec
monolithicMethod:·gc.churn.G1_Old_Gen.norm        thrpt   30        0.037 ±      0.001    B/op
monolithicMethod:·gc.count                        thrpt   30     2123.000               counts
monolithicMethod:·gc.time                         thrpt   30     1060.000                   ms

smallFocusedMethods                               thrpt   30  7855677.144 ±  48987.206   ops/s
smallFocusedMethods:·gc.alloc.rate                thrpt   30     1404.228 ±      8.831  MB/sec
smallFocusedMethods:·gc.alloc.rate.norm           thrpt   30      270.320 ±      0.001    B/op
smallFocusedMethods:·gc.churn.G1_Eden_Space       thrpt   30     1393.473 ±     10.493  MB/sec
smallFocusedMethods:·gc.churn.G1_Eden_Space.norm  thrpt   30      268.250 ±      1.193    B/op
smallFocusedMethods:·gc.churn.G1_Old_Gen          thrpt   30        0.186 ±      0.001  MB/sec
smallFocusedMethods:·gc.churn.G1_Old_Gen.norm     thrpt   30        0.036 ±      0.001    B/op
smallFocusedMethods:·gc.count                     thrpt   30     1986.000               counts
smallFocusedMethods:·gc.time                      thrpt   30     1011.000                   ms 
```

简而言之，这些数字表明该`smallFocusedMethods`方法的运行速度提高了 3.2%，并且差异具有统计学意义（置信度为 99.9%）。请注意，内存使用（基于垃圾收集分析）没有显着差异。因此，您可以在不增加开销的情况下获得更快的性能。

我运行了各种类似的基准测试来测试小型、集中的方法是否能提供更好的吞吐量，我发现在我尝试过的所有情况下，改进都在 3% 到 7% 之间。但实际收益很可能在很大程度上取决于所使用的 JVM 的版本、跨 if/else 块的执行分布（我在第一个块上选择了 90%，在第二个块上选择了 10%，以夸大热度第一个“动作”，但我已经看到吞吐量的提高，即使在 if/else 块链中分布更均匀），以及每个可能的动作正在完成的工作的实际复杂性。因此，如果您需要确定什么适用于您的特定应用程序，请务必编写自己的特定基准。

我的建议是：编写小而专注的方法，因为它使代码更整洁，更易于阅读，并且在涉及继承时更容易覆盖特定行为。JIT 可能会以稍微更好的性能来奖励您这一事实是一个奖励，但在大多数情况下，整洁的代码应该是您的主要目标。哦，给每个方法一个清晰的描述性名称也很重要，它准确地总结了方法的责任（不像我在基准测试中使用的可怕名称）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T05:27:59.263

我不太明白它是如何工作的，但是根据[AurA 提供的链接](http://publib.boulder.ibm.com/infocenter/java7sdk/v7r0/index.jsp?topic=/com.ibm.java.win.70.doc/diag/understanding/jit_overview.html)，我猜想如果重复使用相同的位，JIT 编译器将不得不编译更少的字节码，而不是编译不同的字节码。不同的方法。

除此之外，您越能够将代码分解为有意义的片段，您将从代码中获得的重用就越多，这将允许优化运行它的 VM（您提供了更多模式跟...共事）。

但是，我怀疑如果您在没有提供任何代码重用的任何意义的情况下分解代码，它会产生什么好的影响。

# android - “同步”两个微调器

> ID：15756077
> 
> 赞同：6
> 
> 时间：2013-04-02T04:25:59.473
> 
> 标签：android

我有两个微调器，我想以互斥的方式相互“绑定”：如果您在其中选择一个项目，该项目的文本将变为红色并显示在顶部，而另一个则返回显示初始（“标题”）选择（如果之前选择了另一个项目），其文本变为白色。

这一切都是通过 onItemSelected 侦听器完成的：

```
 sectionSpin.setOnItemSelectedListener(new OnItemSelectedListener() {
        @Override
        public void onItemSelected(AdapterView<?> parent, View arg1,
                int position, long arg3) {              
            issueSpin.setSelection(0);                                      
            ((TextView) issueSpin.getChildAt(0)).setTextColor(Color.parseColor("#FFFFFF"));  
            ((TextView) arg1).setTextColor(Color.parseColor("#E3170D"));
.... 
```

对于“问题微调器”，反之亦然。我的问题是，如果我从一个微调器转到另一个并选择顶部项目，则 onItemSelectedListener 不会注册，因为正在选择的项目已被选中。

我被告知这是不可能的。或者，更确切地说，有人告诉我，onItemSelected 侦听器不可能在已选择的项目上触发。虽然我意识到这在技术上是正确的，但这个问题似乎相对简单，我确信必须有一种解决方法才能产生预期的效果。

关于我正在思考的一些问题，我有几个问题：

1.  有没有办法将微调器中的所有项目设置为未选中，同时仍显示其中一个？
2.  我可以使用不同类型的事件（即“setOnTouchListener”、“setOnClickListener”等），大概在顶部项目上，与`onItemSelectedListener`?
3.  我是否应该单独使用不同类型的事件，也许是在微调器本身膨胀的视图上，没有`onItemSelectedListener`?
4.  你能帮我找到比上面提到的那些更好的策略吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:10:55.187

你有没有考虑过像下面这样的事情，

```
sectionSpin.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> parent, View arg1,
            int position, long arg3) {
        updateView("sectionSpin");
     }
} 
```

而对于另一个

```
 issueSpin.setOnItemSelectedListener(new OnItemSelectedListener() {
    @Override
    public void onItemSelected(AdapterView<?> parent, View arg1,
            int position, long arg3) {
        updateView("issueSpin");
     }
} 
```

现在

```
private void updateView(String spinner){
    if (spinner.equals(sectionSpin)){
        //update spinner per requirement

    }
    else{
    //update spinner per requirement
    }

} 
```

您还可以考虑一些额外的变量或参数来跟踪项目是否是第一次选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-09T11:43:52.910

不要使用 a `Spinner`，而是使用在`Button`视觉上类似于非活动 的 a `Spinner`。单击按钮时，显示一个`Dialog`包含`ListView`. 您可以使用's`setSelection`中的方法和/或位置来显示当前选择的项目。无论该项目是否被选中， '都会收到点击某事的通知。`Adapter``getView``ListView``OnItemClickListener`

当您找到单击了哪个项目时，隐藏`Dialog`并通知包含`Activity`此按钮的按钮，以便它可以`Buttons`在需要时更新两者。

`DialogFragments`我已经使用和 a实现了与此非常相似的东西`DialogFragmentParent`，并且效果很好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-13T20:04:34.473

因此，您可以使微调器中的第一项成为无效选择，例如“[Choose one]”或“[Select Title]”，从而强制侦听器每次都触发。

这将具有额外的好处，您将知道用户在下一步之前确实选择了某些内容。

当然，这将取决于所需的应用程序流程。

# magento - 如何在magento销售订单历史记录中按订单ID打印订单

> ID：15756080
> 
> 赞同：2
> 
> 时间：2013-04-02T04:26:08.337
> 
> 标签：magento, magento-1.7, history

这是我在 history.phtml 页面中的代码

```
 <?php if($_orders->getSize()): ?>
 <?php $printurl = $this->getPrintUrl(); ?>
<table width="100%" cellspacing="2" cellpadding="3" border="0" align="center" class="order">
    <tbody>
        <tr bgcolor="#FF9800">
            <td align="left" style="width=100">
            <font size="2" face="Tahoma, Verdana" color="#FFFFFF"><b>Order #</b></font>
            </td>
            <td align="left" style="width=100">
            <font size="2" face="Tahoma, Verdana" color="#FFFFFF"><b>Amount</b></font>
            </td>
            <td align="left" style="width=100">
            <font size="2" face="Tahoma, Verdana" color="#FFFFFF"><b>Date of Order</b></font>
            </td>
            <td align="left" style="width=100">
            <font size="2" face="Tahoma, Verdana" color="#FFFFFF"><b>First Name </b></font>
            </td>
            <td align="left" style="width=100">
            <font size="2" face="Tahoma, Verdana" color="#FFFFFF"><b>Last Name </b></font>
            </td>
            <td align="left" style="width=100">
            <font size="2" face="Tahoma, Verdana" color="#FFFFFF"><b>Status</b></font>
            </td>
            <td align="left" style="width=100">
            <font size="2" face="Tahoma, Verdana" color="#FFFFFF"><b>Processed</b></font>
            </td>
            <td align="left" style="width=100">
            <font size="2" face="Tahoma, Verdana" color="#FFFFFF"><b>Print</b></font>
            </td>
        </tr>
        <?php $_odd = ''; ?>
        <?php foreach ($_orders as $_order): ?>
        <tr>
            <td valign="top" align="left" class="margin-top-1 margin-bottom-1" width:30%="">
            <font size="2" face="Tahoma, Verdana">
            <?php echo $_order->getRealOrderId() ?></font>
            </td>
            <td valign="top" align="left" class="margin-top-1 margin-bottom-1" width:30%="">
            <font size="2" face="Tahoma, Verdana"><?php echo $_order->formatPrice($_order->getGrandTotal()) ?></font>
            </td>
            <td valign="top" align="left" class="margin-top-1 margin-bottom-1" width:30%="">
            <font size="2" face="Tahoma, Verdana"><?php echo $this->formatDate($_order->getCreatedAtStoreDate()) ?></font>
            </td>
            <td valign="top" align="left" class="margin-top-1 margin-bottom-1" width:30%="">
            <font size="2" face="Tahoma, Verdana">
            <?php echo $_order->getShippingAddress() ? $this->htmlEscape($_order->getShippingAddress()->getFirstname()) : '&nbsp;' ?>
            </font>
            </td>
            <td valign="top" align="left" class="margin-top-1 margin-bottom-1" width:30%="">
            <font size="2" face="Tahoma, Verdana">
            <?php echo $_order->getShippingAddress() ? $this->htmlEscape($_order->getShippingAddress()->getLastname()) : '&nbsp;' ?>
            </font>
            </td>
            <td valign="top" align="left" class="margin-top-1 margin-bottom-1" width:30%="">
            <font size="2" face="Tahoma, Verdana"><?php echo $_order->getStatusLabel() ?></font>
            </td>
            <td valign="top" align="left" class="margin-top-1 margin-bottom-1" width:30%="">
            <font size="2" face="Tahoma, Verdana"> 
            <?php //echo $_order->getStatus(); ?>
             </font>
            </td>
            <td valign="top" align="left" class="margin-top-1 margin-bottom-1" width:30%="">
            <font size="2" face="Tahoma, Verdana"><a class="blueColor" onclick="window.open('<?php echo $printurl;?>','printer_friendly','toolbar=0,location=0,status=0,menubar=1,scrollbars=1,resizable=1,width=640,height=390')">Print</a></font>
            </td>
        </tr>
        <?php endforeach; ?>
    </tbody>
</table>
<?php else : ?>
<p>No order history found !.</p>
<?php endif ?> 
```

`$printurl`是这样的：

```
http://mysite.com/index.php/sales/order/print/order_id/104/ 
```

但是现在 $printurl 没有任何价值.....

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-04T18:30:47.317

Marius 是对的，但正确的版本是：

```
<?php $printurl = Mage::getUrl('sales/order/print', array('order_id' => $_order->getId() )); ?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-02T15:17:43.643

`<?php $printurl = $this->getPrintUrl(); ?>`你可以用这个代替

```
<?php $printurl = Mage::getUrl('sales/order/print', array('order_id',$_order->getId() )); ?> 
```

`foreach ($_orders as $_order)`循环内

# java - 我们能否通过 SSH 将仅更改的类重新部署到 JAR

> ID：15756082
> 
> 赞同：0
> 
> 时间：2013-04-02T04:26:10.417
> 
> 标签：java, jar

我有一个使用 IntelliJ 作为 IDE 构建的 Android 客户端/服务器程序。

服务器，即使是用于测试，也运行在 EC2 主机上，因为我在各种地方使用笔记本电脑工作，并且不想在任何地方设置端口转发！

我只是想知道是否有一种方便的方法可以重新部署我的服务器代码，而无需重新发送所有库以使其更快一些。

我将服务器作为 .jar 运行，即 java -jar Server.jar

我不知道，是否有可能将所有库放在一个 jar 中并且只发送编译后的代码？

又名。

目前我只有一个罐子：

服务器.jar

但是我可以把它换成两个罐子吗？

库.jar server.jar

我只是重新上传并运行

服务器.jar

可以做到吗？

*** 更新 ***

刚刚意识到我可以通过使用轻松实现这一点

java -cp ./libraries.jar -jar server.jar

但我会留下这个问题，以防其他人有同样的精神问题

*** 更新 2 ***

好的，**以上不起作用！**忽略外部库的 -jar 命令有些奇怪：S （那么为什么允许 -cp 标志？？？！！Java 就像民主 - 除了所有其他语言之外，最糟糕的语言！）

但是，这样做：

```
java -cp server.jar:libraries.jar server.Server 
```

其中 server.Server 是主类

请参阅[访问外部 Jar 中的类](https://stackoverflow.com/questions/2393426/accessing-classes-in-an-external-jar?rq=1)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:32:56.493

是的，很有可能，这就像一个补丁。

您不需要在单个 jar 中重新组合库（如果它们都是第三方）。

由于您的部署结构已经设置。所以你只需要更换你正在改变的部分。

假设您对 server.jar 的 xyz 类进行了一些更改，然后只需将 server.jar 替换为新的并重新启动服务器。这些变化将反映出来。

# mysql - MEM 工具中的未监控 (XXXX:3306) 错误

> ID：15756083
> 
> 赞同：0
> 
> 时间：2013-04-02T04:26:15.170
> 
> 标签：mysql, database-replication

由于在错误的主服务器上执行了以下命令，我们`"Unmonitored (X.X.X.11:3306)"`在工具中看到了错误。`MEM`

谁能建议如何在不重新启动主服务器的情况下解决此问题。

ON Master XXX10 :-

```
CHANGE MASTER TO MASTER_HOST='X.X.X.11', MASTER_USER='mysql',
MASTER_PASSWORD='paswd', MASTER_PORT=3306, MASTER_LOG_FILE='mysql-bin.00XXXX',
MASTER_LOG_POS=61001479 ; 
```

在复制组中，我们看到了这个`Unmonitored (X.X.X.11:3306)`错误和两个红色圆圈，除了正常`Master (X.X.X.10:3306)`和`Slave (X.X.X.20:3306)`信息。

如何删除错误的红色圆圈和未监控 (XXX11:3306) 错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:31:58.103

当我在主服务器上执行以下命令然后重新启动 MySQL 监控代理时，问题已解决。

```
mysql> change master to Master_Host='';
ERROR 1210 (HY000): Incorrect arguments to MASTER_HOST

mysql> change master to Master_Host=' ';
Query OK, 0 rows affected (0.23 sec) 
```

我的 MySQL 版本是：5.5.8

最好的，斯里尼瓦斯

# javascript - Cocos2d html5 无法设置属性 src 为 null

> ID：15756084
> 
> 赞同：0
> 
> 时间：2013-04-02T04:26:28.750
> 
> 标签：javascript, cocos2d-x, cocos2d-html5

通过时得到主题错误：http: [//www.cocos2d-x.org/reference/html5-js/symbols/cc.html](http://www.cocos2d-x.org/reference/html5-js/symbols/cc.html)

请注意，我使用的是 2.1.2 beta 版本，所以我知道教程中会有差异。这是我到目前为止的代码：

```
(function() {
  var AppLayer = cc.LayerColor.extend({
    init: function() {
      this._super(new cc.Color4B(0, 0, 0, 255));
      var size = cc.Director.getInstance().getWinSize();
      this._jetSprite = new JetSprite();
      this.setTouchEnabled(true);
      this.setKeyboardEnabled(true);
      this.setPosition(new cc.Point(0, 0));

      this.addChild(this._jetSprite);
      this._jetSprite.setPosition(new cc.Point(size.width / 2, size.height / 2));
      this._jetSprite.scheduleUpdate();
      this.schedule(this.update);
      return true;
    },
    _jetSprite: null,
    onEnter: function() {
      this._super();
    },
    onKeyDown: function(e) {
      this._jetSprite.handleKey(e);
    },
    onKeyUp: function() {

    },
    onTouchesEnded: function(pTouch, pEvent) {
      this._jetSprite.handleTouch(pTouch[0].getLocation());
    },
    onTouchesMoved: function(pTouch, pEvent) {
      this._jetSprite.handleTouchMove(pTouch[0].getLocation());
    },
    update: function(dt) {

    }
  });

  window.AppScene = cc.Scene.extend({
    onEnter: function() {
      this._super();
      var layer = new AppLayer();
      layer.init();
      this.addChild(layer);
    }
  });
})();

var JetSprite = cc.Sprite.extend({
  _currentRotation:0,
  ctor: function() {
    this.initWithFile("images/jet.png");
  },
  handleKey: function(e) {
    if(e == cc.KEY.left) {
      this._currentRotation--;
    }
    else if(e == cc.KEY.right) {
      this._currentRotation++;
    }

    if(this._currentRotation < 0) {
      this._currentRotation = 360;
    }
    if(this._currentRotation > 360) {
      this._currentRotation = 0;
    }
  },
  handleTouch: function(touchLocation) {
    if(touchLocation.x < 300) {
      this._currentRotation = 0;
    }
    else {
      this._currentRotation = 180;
    }
  },
  handleTouchMove: function(touchLocation) {
    var angle = Math.atan2(touchLocation.x - 300, touchLocation.y - 300);

    angle = angle * (180/Math.PI);
    this._currentRotation = angle;
  },
  update: function(dt) {
    this.setRotation(this._currentRotation);
  }
}); 
```

这是更详细的错误：

```
Uncaught TypeError: Cannot set property 'src' of null CCSprite.js:2209
cc.SpriteWebGL.cc.Node.extend.initWithTexture CCSprite.js:2209
(anonymous function) CCSprite.js:2161 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T19:45:34.510

看起来我正在关注的教程缺少一行。ctor 函数需要一个 this._super() 所以一切都被正确初始化。

```
var JetSprite = cc.Sprite.extend({
  _currentRotation:0,
  ctor: function() {
    this._super();
    this.initWithFile("images/jet.png");
  }, 
```

# php - php mongodb计数嵌套属性

> ID：15756089
> 
> 赞同：0
> 
> 时间：2013-04-02T04:26:51.813
> 
> 标签：php, mongodb

我有以下文档结构：

```
"messages": {
"_id" : ObjectId("515a4de9c1a3c09c19000001"),
"author" : "50fd0d38c1a3c04c27000000",recipient" : "5159a292c1a3c01d5b000005",
"conversation" : [
    {
        "author" : "50fd0d38c1a3c04c27000000",
        "date" : ISODate("2013-04-02T03:18:01.204Z"),
        "message" : "hello test",
        "read" : false
    },
    {
        "message" : "reply test",
        "date" : ISODate("2013-04-02T03:36:57.444Z"),
        "author" : "5159a292c1a3c01d5b000005",
        "read" : true
    }.... 
```

是否可以获得会话消息的总数，其中 conversation.read 为 false 并且未读消息的作者（conversation.author）不是开始对话的人？

我目前正在查找将 conversations.read 设为 false 的文档，然后在 PHP 中循环它们以检查 conversations.author 字段。这行得通，但我担心当我获得大量数据时它会变慢。

我正在使用 PHP MongoDB 驱动程序。

这个我试过了。。

```
$unread_conversations = $db->messages->find(
    array(
        'conversation.read'=>false
        'conversation.author'=>array('$ne'=>$_SESSION['account']['_id']->__toString())
    )); 
```

但这不起作用，因为我想要未阅读且不是作者的消息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:30:00.740

这对于常规的 mongo 查询是不可能的。[您必须使用聚合框架](http://docs.mongodb.org/manual/reference/aggregation/#pipeline)中内置的 map-reduce 或 mongos 。

要使用当前模式实现您的目标，您必须首先展开嵌套列表。

其他解决方案是更改您的架构并将每个对话存储为一个单独的文档（父字段包含父对话的 id）。

顺便说一句：不要将 id 字段存储为字符串，始终使用 ObjectId 来存储 mongo id。

# signalr - SignalR .NET 客户端超时

> ID：15756090
> 
> 赞同：2
> 
> 时间：2013-04-02T04:26:58.013
> 
> 标签：signalr, signalr-hub, signalr.client

这是我们的设置的样子：

*   Windows Server 2012 上的 SignalR Server（一个 ASP.NET MVC 应用程序）。
*   Sencha HTML5 应用程序（SignalR 客户端）在同一台服务器（Windows Server 2012）上。
*   Windows Server 2008 R2 服务器上的 .NET Windows 服务。这也充当 SignalR 客户端。

我们正在使用几周前的 SignalR 开发版本（1.1.0）。有时，我们会发现 SignalR 服务器失去与 .NET 客户端的连接。使用最新版本允许我们添加客户端日志记录。

上周四（2013 年 3 月 28 日下午 6 点 33 分）我们有一个很好的例子。

客户端日志（为简洁起见，我删除了所有不重要的日志）。请注意，Hub 类称为“Transmitter”。

```
ChangeState(New connection, Disconnected, Connecting)
WS: wss://www.myURL.com/SignalRServer/signalr/connect?transport=webSockets&connectionToken=fsfY8BWv5eiSNuQtHW6wfY6XWDInkrVEn5fyHogSIyapob1BxoZLz0aMO_IuARmd9suam3my3yU0sQOEYMah-ZVj_4idQHXKQmhUKyRFlNgObCWlblCDfXflOq4Fxt8P0&connectionData=[{"Name":"Transmitter"}]
Auto: Failed to connect to using transport webSockets. System.PlatformNotSupportedException: The WebSocket protocol is not supported on this platform.
   at System.Net.WebSockets.ClientWebSocket..ctor()
   at Microsoft.AspNet.SignalR.Client.Transports.WebSocketTransport.<PerformConnect>d__0.MoveNext()
SSE: GET https://www.myURL.com/SignalRServer/signalr/connect?transport=serverSentEvents&connectionToken=fsfY8BWv5eiSNuQtHW6wfY6XWDInkrVEn5fyHogSIyapob1BxoZLz0aMO_IuARmd9suam3my3yU0sQOEYMah-ZVj_4idQHXKQmhUKyRFlNgObCWlblCDfXflOq4Fxt8P0&connectionData=[{"Name":"Transmitter"}]
ChangeState(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Connecting, Connected)
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: initialized)
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {"C":"B,25|1,0|2,0|3,0","M":[{"H":"Transmitter","M":"joined","A":["0e3cd780-9efc-4824-b9a2-bae81b9be17f","27/03/2013 8:16:46 PM"]}]})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {"C":"B,25|1,1|2,0|3,0","M":[{"H":"Transmitter","M":"isLoggedIn","A":[true]}]})
OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, {"I":"0"})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {})
............
............
............
............
............
............
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {})
Connection Timed-out : Transport Lost Connection 28/03/2013 8:33:14 AM
ChangeState(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Connected, Reconnecting)
SSE: GET https://www.myURL.com/SignalRServer/signalr/?transport=serverSentEvents&connectionToken=fsfY8BWv5eiSNuQtHW6wfY6XWDInkrVEn5fyHogSIyapob1BxoZLz0aMO_IuARmd9suam3my3yU0sQOEYMah-ZVj_4idQHXKQmhUKyRFlNgObCWlblCDfXflOq4Fxt8P0&messageId=B%2C6&connectionData=[{"Name":"Transmitter"}]
ChangeState(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Reconnecting, Connected)
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: initialized)
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {"C":"B,7","M":[{"H":"Transmitter","M":"rejoined","A":["0e3cd780-9efc-4824-b9a2-bae81b9be17f","28/03/2013 6:33:12 PM"]}]})
OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, {"I":"12"})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {})
............
............ 
```

在连接超时之前，一切都按预期工作 - SignalR 服务器可以调用 .NET 客户端的方法，反之亦然。连接超时后，.NET 客户端可以调用服务器 Hub 方法，但服务器无法调用 .NET 客户端方法。

其他需要注意的事项：

*   请注意，连接超时报告“28/03/2013 8:33:14 AM”作为时间。这与后续条目中记录的时间不同，时间实际上是下午 6:33:14（澳大利亚东部标准时间）。
*   从上面可以看出，ServerSentEvents 正在使用，因为 SignalR .NET 客户端位于 Windows 2008 服务器上。
*   超时没有模式。有时它不会在几天内发生，有时它会在几个小时内发生。
*   超时与重新启动的机器（SignalR 服务器或 SignalR 客户端所在的机器）、IIS 重置等无关。

此外，这与瞬时连接丢失和重新连接完全不同，它们似乎按要求工作。连接中的瞬时丢失示例如下所示：

```
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {})
ChangeState(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Connected, Reconnecting)
SSE: GET https://www.myURL.com/SignalRServer/signalr/?transport=serverSentEvents&connectionToken=fsfY8BWv5eiSNuQtHW6wfY6XWDInkrVEn5fyHogSIyapob1BxoZLz0aMO_IuARmd9suam3my3yU0sQOEYMah-ZVj_4idQHXKQmhUKyRFlNgObCWlblCDfXflOq4Fxt8P0&messageId=B%2C1D%7CF%2CE%7CG%2C0%7CH%2C0&connectionData=[{"Name":"Transmitter"}]
ChangeState(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Reconnecting, Connected)
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {"C":"B,2","M":[{"H":"Transmitter","M":"rejoined","A":["00fabf13-eb07-4704-8d43-4d8865a519f0","28/03/2013 4:08:26 PM"]}]})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: initialized)
OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, {"I":"11"})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {})
SSE: OnMessage(0e3cd780-9efc-4824-b9a2-bae81b9be17f, Data: {}) 
```

我不明白为什么瞬时连接丢失和重新连接似乎有效，但连接超时后的重新连接不起作用。

我们能做些什么来解决这个问题吗？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-15T13:59:54.733

当客户端的 Disconnected 事件引发时，这意味着连接已被服务器删除。之后，由开发人员重新启动连接。

我们这样做是因为在服务器上长时间保持状态是昂贵的。

# css - CSS是对的吗？

> ID：15756093
> 
> 赞同：-2
> 
> 时间：2013-04-02T04:27:30.567
> 
> 标签：css, position, margin

下面是我的 CSS 文件和我引用的图像。在图片中，它是第 1 天，但如果它是第 10 天，或者任何其他两位数的日子，2013 年会还是没有？这是一个愚蠢的问题，我知道，但我不确定整个边距、填充、位置和浮动因素。

改写的问题：我不太擅长填充和边距，所以也许我问错了问题。图为2013年4月1日，太好了。但我想知道 4 月 10 日（两位数的日子）是否会使 2013 年的转变向右（我想要的）、与 2013 年重叠，或者去其他不在这条线上的地方？我问的原因是因为我的边距、填充、浮动和位置，我不确定它是否会影响它..

![在此处输入图像描述](https://i.stack.imgur.com/zhsd6.png)

```
@font-face {

    font-family: Walkway Bold;

    src: url('Fonts/WalkwayBold.ttf');
}

@font-face {

    font-family: Roboto;

    src: url('Fonts/Roboto.ttf');
}

@font-face {

    font-family: CaviarDreams;

    src: url('Fonts/CaviarDreams.ttf');
}

body {

    font-family: Roboto;
    margin: 0;
    padding:0;
    background: #000;
    background-size: 61%;
    color:#FFF;
    text-shadow:3px 3px 7px #000000;

}

div#content {
    position:absolute;
    -webkit-transform: rotate(0deg);
    left:75px;
    top:0px;
}

div#timecluster {
    font-family: Roboto;
    position:absolute;
    text-align:center;
    top:30px;
    left:-95px;
    color:#fff;
    clear:left;
    width:345px;
    opacity:.8;
}

div#hourbox {
    font-family: Roboto;
    text-align:right;
    color:#ffffff;
    position:relative;
    font-size:75px;
    letter-spacing:-5px;
    margin-right:3px;
    font-weight:bold;
}

div#minutebox {
    font-family: Roboto;
    position:relative;
    opacity: 0.2;
    font-size:75px;
    letter-spacing:-5px;
    margin-left:10px;
    font-weight:bold;
}

div#ampmbox {
    text-align:right;
    position:relative;
    font-size:75px;
    letter-spacing:-5px;
    font-weight:bold;
    margin-top:-5px;
    right: -5;
}

div#datecluster {
    position:absolute;
    top:90px;
    left:-130px;
    width:380px;
    height:180px;
}

div#dateinner {
    position:absolute;
    top:40px;
    left:40px;
    width:300px;
    height:90px;
}

div#monthbox {
    font-family: CaviarDreams;
    position:absolute;
    float:left;
    padding:0;
    font-size:20px;
    opacity:0.2;
    width:135px;
    text-align:right;
    top: -19px;
}

div#daybox {
    font-family: CaviarDreams;
    position:relative;
    float:left;
    padding:0;
    font-size:20px;
    opacity:0.2;
    width:135px;
    text-align:right;
    top: 1;
}

div#datebox {
    font-family: Roboto;
    position:relative;
    float:left;
    margin:-20px 4 0 10;
    font-size:40px;
    opacity:.8;
    text-align:center;
}

div#yearbox {
    font-family: Roboto;
    position:relative;
    float:none;
    margin:-20 0 0 0px;
    font-size:40px;
    opacity:.1;
top:0;
right: 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:33:01.103

是的，但是在上下文中您的问题是，某些浏览器默认不支持 ttf 前端，因此您可以将它们转换为“woff”支持更好，

使用免费提供的谷歌字体，如果符合您的要求，那么:)

或在 woff 中转换您的 ttf 字体，有许多免费的在线转换器可用，

那么代码将是这样的......对于'Droid Serif'

```
@font-face {
  font-family: 'Droid Serif';
  font-style: normal;
  font-weight: 700;
  src: local('Droid Serif Bold'), local('DroidSerif-Bold'), url(http://themes.googleusercontent.com/static/fonts/droidserif/v3/QQt14e8dY39u-eYBZmppwTqR_3kx9_hJXbbyU8S6IN0.woff) format('woff');
} 
```

我希望这能帮到您 ：）

有更新的问题

为剩下的一年添加一些边距，

更新答案..

```
div#yearbox {
font-family: Roboto;
position:relative;
float:left;
margin:-20 0px 0px 10px; 'this last element will represent margin left i.e. 10px
font-size:40px;
opacity:.1;
top:0;
} 
```

# jquery - 悬停时启动/停止javascript函数

> ID：15756094
> 
> 赞同：0
> 
> 时间：2013-04-02T04:27:33.223
> 
> 标签：jquery, hover, timing, jquery-timing

我有一个 javascript 函数，我使用 jquery 和[jquery-timing](https://github.com/creativecouple/jquery-timing)循环遍历 ul 图像和文本更改不透明度。

```
function gridautomate() {

griditem.repeat().each($).find("img").animate({"opacity" : "1"},500, $).wait(7000).wait(noHover).animate({"opacity" : ".5"}, 500, $);
griditem.repeat().each($).find(".quote").animate({"opacity" : "1"},500, $).wait(7000).wait(noHover).animate({"opacity" : "0"}, 500, $); 
```

};

我有另一个更改的功能相同，但在悬停时。

```
function gridanimate() {

griditem.hover(

    function(){
    $(this).find("img").animate({"opacity" : "1"},0);
    $(this).find(".quote").animate({"opacity" : "1"},0);
    },

    function(){
    $(this).find("img").animate({"opacity" : ".5"},0);
    $(this).find(".quote").animate({"opacity" : "0"},0);
    gridautomate();
    }

); 
```

}

我想做的是在悬停时切换启动第一个功能，即在悬停时停止并在悬停时开始。想不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:33:08.017

我不明白这个问题。尽管您可以查看 stop() 方法[stop()](http://api.jquery.com/stop/)

```
$('#hoverme-stop-2').hover(function() {
  $(this).find('img').stop(true, true).fadeOut();
}, function() {
  $(this).find('img').stop(true, true).fadeIn();
}); 
```

# google-maps - 无法在谷歌地图中画一个圆圈？

> ID：15756100
> 
> 赞同：0
> 
> 时间：2013-04-02T04:28:10.820
> 
> 标签：google-maps, draw, geometry

当我想在我的地图上画一个圆圈时遇到问题，但我不知道为什么。请有人可以告诉我我的问题，因为我是使用这个平台的新手，我的英语不是很好，所以这是我的代码。

```
 <!DOCTYPE html> 
<html> 
<head> 
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" /> 
 <style type="text/css">  
    html { height: 100% }   
    body { height: 100%; margin: 0px; padding: 0px }  
    #map_canvas { height: 100% } 
 </style> 
<script type="text/javascript"   
 src="http://maps.google.com/maps/api/js?sensor=false"> 
 </script> 

</script>
<script type= "text/javascript">

    var map;  
    var latlng = new google.maps.LatLng(30.397, -100.644); 
    var marker = new google.maps.Circle({
        strokeColor: #200444,
        strokeOpacity: 0.8,
        strokeWeight: 2,
        fillColor: #2E6444,
        fillOpacity: 0.5,
        map: map,
        center: latlng,
        radius:20
    });
    function initialize() 
    {           
        var myOptions = {       
        zoom: 3,      
        center: latlng,       
        mapTypeId: google.maps.MapTypeId.ROADMAP    
       }     
        map = new google.maps.Map(document.getElementById("map_canvas"),myOptions);  

    marker.setMap(map);
    } 

</script>
</head>
    <body onload="initialize()"> 
       <div id="map_canvas" style="width:500px; height:460px;"></div>  
</body> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:41:03.607

1.  strokeColor 和 fillColor 需要是字符串：

    ```
    strokeColor: "#200444",
    fillColor: "#2E6444", 
    ```

2.  你的圆的半径只有20米，如果你想看到它，你需要放大一点：

    ```
    zoom: 15, 
    ```

[工作示例](http://www.geocodezip.com/v3_SO_drawCircle.html)

# c# - 匹配随机内容前面的可选模式

> ID：15756101
> 
> 赞同：3
> 
> 时间：2013-04-02T04:28:14.797
> 
> 标签：c#, .net, regex

我需要在下面的句子中捕获两个组，一个是**I**，另一个是**可选的**

```
I want to match random optional field. 
```

我尝试了以下方法，但没有产生预期的结果：

```
(I).*?(optional)? 
```

删除围绕**optional**的圆形专利可以正确匹配，但由于我需要第二个匹配，所以我不能这样做。

```
(I).*?optional? 
```

那么如何正确匹配两个组呢？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:58:56.807

你的正则表达式的诀窍是你需要对任何导致`optional`不匹配的东西进行分组（并丢弃） `optional`。

使用否定环视（带有`?:`前缀，以便该组不用于捕获）：

```
(I)(?:(?!optional).)*(optional)?.* 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:39:08.907

您可以尝试以下正则表达式：

```
(I).*(optional) 
```

这对括号将为您返回捕获组。

# android - 为什么我的进度对话框没有出现？

> ID：15756102
> 
> 赞同：2
> 
> 时间：2013-04-02T04:28:16.553
> 
> 标签：android, progressdialog, ui-thread

在下面的代码中，我有两个片段在它们各自的选项卡被选中时显示。这两个片段都运行异步任务，并且应该在执行此操作时显示进度对话框。第一个片段 (ndi) 显示其进度对话框，而片段 bnf 从未显示其进度对话框。为什么是这样？当我单击 switch 中的 case 1 选项卡时，当我的连接速度很慢并且屏幕冻结时，选项卡的切换非常慢。我认为ui线程被锁定在某个地方，但我不确定在哪里。如果您需要更多信息，请告诉我。谢谢。

```
public class NasaAppActivity extends Activity implements ActionBar.TabListener{

    private Bundle savedInstanceState;
    private static View mainView;
    private FragmentTransaction ft;
    BreakingNewsFragment bnf;
    NasaDailyImage ndi;

    @Override

    @Override
    public void onStart(){
        super.onStart(); 
        if(savedInstanceState==null){
            ndi=new NasaDailyImage(this);
            bnf=new BreakingNewsFragment(this);     
            ft=getFragmentManager().beginTransaction();
            ft.add(R.id.focused_view_container,ndi).commit();

            getFragmentManager().executePendingTransactions();
            ndi.onRefresh();

            ft=getFragmentManager().beginTransaction();
            ft.add(R.id.focused_view_container,bnf).commit();
                getFragmentManager().executePendingTransactions();

        }
    }

public void onTabSelected(Tab tab, FragmentTransaction f) {

    switch(tab.getPosition()){
    case 0:
        ft=getFragmentManager().beginTransaction();
            ft.hide(bnf);
            ft.show(ndi);
            ft.commit();
           getFragmentManager().executePendingTransactions(); 
        break;
    case 1:
            ft=getFragmentManager().beginTransaction();
            ft.hide(ndi);
            ft.show(bnf);
            ft.commit();
            bnf.fetchStories(); 
          getFragmentManager().executePendingTransactions();
         break;
    }

} 
```

这是不起作用的进度对话框，应该在调用 bnf.fetchStories() 后显示

```
public class RssNewsParser extends AsyncTask<ArrayList<Story>,String,ArrayList<Story>>{
    private ProgressDialog dialog;
    private BreakingNewsFragment bnf;
    private URL newsURL;
    private ArrayList<Story> stories=new ArrayList<Story>();
    private int eventType;
    private int storyCount= -1;
    private Activity mainActivity;
    private ArrayList<String> storyTitles=new ArrayList<String>();

    RssNewsParser(Activity mainActivity,BreakingNewsFragment bnf){
        this.mainActivity=mainActivity;
        this.bnf=bnf;
    }
    @Override
    protected void onPostExecute(ArrayList<Story> result) {
        // TODO Auto-generated method stub
        super.onPostExecute(result);
        for(Story story:stories){
            storyTitles.add(story.getTitle());
        }

        bnf.setListAdapter(new ArrayAdapter<String>(mainActivity,
                android.R.layout.simple_list_item_1,storyTitles));
        dialog.hide();
    }
    @Override
    protected void onPreExecute() {
        super.onPreExecute();   
        dialog=ProgressDialog.show(mainActivity, "Loading", "loading news");
    } 
```

这是确实有效的对话框，我很困惑，因为它们的使用方式完全相同。当 ndi.onRefresh() 运行它的异步任务时，会显示这个。

```
public class RssParseSync extends AsyncTask<String,String,Bitmap>{  
        private Context parent;
        private ProgressDialog dialog;
        private static Bitmap final_image; //must be static because a new instance is required to access getFinalImage();
        private String imageURL="";
        private static String imageName;
        private long totalTime;
        private long startTime;
        private static View v;
        private Activity mainActivity;

        public RssParseSync(View v,Activity mainActivity){

            this.v=v;
            this.mainActivity=mainActivity;

            String result=mainActivity.toString();
        }
  protected void onPostExecute(Bitmap image){

                    ImageView imageView=(ImageView) v.findViewById(R.id.imageDisplay);
                    imageView.setImageBitmap(image); 
                    dialog.dismiss(); 
                    //this.cancel(true);
                }

protected void onPreExecute(){
                    if(final_image!=null){
                        final_image.recycle();
                    }

                    nullAllViews();
                    dialog=ProgressDialog.show(mainActivity, "Loading", "Loading the image of the day");
                }

private void nullAllViews(){
                TextView titleView;
                titleView=(TextView) v.findViewById(R.id.imageTitle);
                titleView.setText(null);

                TextView dateView=(TextView) v.findViewById(R.id.imageDate);
                dateView.setText(null);

                TextView descriptionView=(TextView) v.findViewById(R.id.imageDescription);
                descriptionView.setText(null);

                ImageView imageView=(ImageView) v.findViewById(R.id.imageDisplay);
                imageView.setImageBitmap(null);

            }

package com.wajumbie.nasadailyimage;

import java.util.ArrayList;
import java.util.concurrent.ExecutionException;

import android.annotation.SuppressLint;
import android.app.Activity;
import android.app.Fragment;
import android.net.Uri;
import android.os.Bundle;
import android.app.ListFragment;
import android.content.Intent;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ListView;

@SuppressLint("ValidFragment")
public class BreakingNewsFragment extends ListFragment {
    private static Activity mainActivity;
    private static ArrayList<Story> stories=new ArrayList<Story>();
    private static ArrayList<String> storyTitles=new ArrayList<String>();

    public BreakingNewsFragment(){

    }
    public BreakingNewsFragment(Activity mainActivity){
        this.mainActivity=mainActivity;
    }
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        // TODO Auto-generated method stub

        return super.onCreateView(inflater, container, savedInstanceState);
    }

    @Override
    public void onHiddenChanged(boolean hidden) {
        // TODO Auto-generated method stub
        super.onHiddenChanged(hidden);

    }
    @Override
    public void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setRetainInstance(true);

    }

    @Override
    public void onListItemClick(ListView l, View v, int position, long id) {
        // TODO Auto-generated method stub
        super.onListItemClick(l, v, position, id);

        String url = stories.get(position).getURL();
        Intent i = new Intent(Intent.ACTION_VIEW);
        i.setData(Uri.parse(url));
        startActivity(i);
    }
    public void fetchStories(){

        RssNewsParser parser=new RssNewsParser(mainActivity,this);
        if(stories.isEmpty()){
        parser.execute();

                try {
                    stories=parser.get();

                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                } catch (ExecutionException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
        }
            //stories=parser.getStories();

    }
public void updateList(){
    //String result;
    //result = storyTitles.toString();
    setListAdapter(new ArrayAdapter<String>(mainActivity,android.R.layout.simple_list_item_1,storyTitles));
}
    @Override
    public void onStart() {
        // TODO Auto-generated method stub
        super.onStart();

    }
    public void onRefresh() {
        fetchStories();

    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T17:18:25.917

调用`parser.get()`会强制您的代码等待`RssNewsParser`任务完成。通过这样做，您有效地暂停了应用程序的主线程，直到您的`fetchStories`操作长度。换句话说，您违背了使用`AsyncTask`.

作为建议，您可能应该使用`Loaders`而不是`AsyncTasks`将您的 RSS 信息返回到您的活动/片段。它们基本上做同样的事情，但加载器将帮助您在轮换之间保留 RSS 信息，并且更容易将结果返回到您的活动和视图中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-10T10:34:24.967

fetchStories() 正在主线程中执行，这导致了所有问题，挂起/进度对话框不可见。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-11T18:04:55.017

错误的使用方式`AsyncTask`。为什么你一直调用'executePendingTransaction()'？有什么急事？无论如何，在分析您的代码后，我建议删除以下代码：

```
 try {
                stories=parser.get();

            } catch (InterruptedException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } catch (ExecutionException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            } 
```

请了解“AsyncTask”的工作原理。你必须等待它完成并做任何你想做的事情`onPostExecute()`。在调用“execute()”之后，在下一行手动获取数据是错误的。

# php - 从数组填充复选框

> ID：15756107
> 
> 赞同：0
> 
> 时间：2013-04-02T04:28:31.370
> 
> 标签：php

嗨，我有年存储的数据，像这样序列化

```
a:2:{i:0;s:4:"2011";i:1;s:4:"2013";}
```

并有一个这样的预定义年份列表：

```
$current_year = date('Y'); 
for($year = 2011; $year < $current_year; $year++) 
{ 
$year; 
}
```

所以，我想填充如下复选框列表：
[x] 2011
[] 2012
[x] 2013
...

如果年份不在预定义年份（在本例中为 2011、2012 和 2013），则应取消选中该年份。

我已经搜索过，但到目前为止，最近的解决方案不在 PHP 中

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:34:00.917

```
$years = unserialize($mysql_years);
$current_year = date('Y');
for ($year = 2011; $year < $current_year; $year++) {
    $checked = '';
    if (in_array($year, $years)) {
        $checked = ' checked';
    }
    echo "<input type=checkbox value=$year$checked>";
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:41:02.740

我找到了解决方案。检查这个。

```
<?php 
 $dat='a:2:{i:0;s:4:"2011";i:1;s:4:"2013";}';
 $data=unserialize($dat); 
 $current_year = date('Y');
for($year = 2011; $year <= $current_year; $year++) 
{
    if(in_array($year,$data))   {       $checked="CHECKED";     }   else { $checked=""; } ?>
    <input type="checkbox" value="<?php echo $year; ?>" name="year[]"  <?php echo $checked; ?> > <?php echo $year; ?> <br/>
<?php } ?> 
```

# mysql - 如何实现锁定并释放到 mysql 表？

> ID：15756121
> 
> 赞同：-1
> 
> 时间：2013-04-02T04:30:00.317
> 
> 标签：mysql, perl

我有一个读取 mysql 表 t1 并执行一些操作的 perl 文件 test.pl。

如果两个用户同时执行 test.pl ，那么我需要阻止一个用户读写 t1 。

一旦其他用户在 t1 完成他的操作，则允许其他用户在 t1 开始他的操作

我怎样才能做到这一点。？

我们可以使用mysql的'Lock'吗？

或任何其他解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:38:33.340

您可以使用[LOCK TABLE](http://dev.mysql.com/doc/refman/5.0/en/lock-tables.html)显式锁定表。

但是，您可能希望考虑使用[事务](http://dev.mysql.com/doc/refman/5.0/en/commit.html)，以在运行时保持数据一致`test.pl`，但不完全锁定其他进程使用数据库。

具体如何工作取决于您使用的数据库引擎，因此您还应该阅读[事务和原子操作部分](http://dev.mysql.com/doc/refman/5.0/en/ansi-diff-transactions.html)

# jquery - 如何在嵌套的 ajax asp.net 选项卡中设置子选项卡高度？

> ID：15756122
> 
> 赞同：7
> 
> 时间：2013-04-02T04:30:08.313
> 
> 标签：jquery, asp.net, css, tabs, ajaxcontroltoolkit

我有 2 个嵌套的 ajax asp.net 选项卡。如果我将父选项卡（TabContainerMain）的初始高度设置为 300，如何在 css 或 jquery 中设置子选项卡（SubTabContainerUg）的高度？标记如下所示：

```
<!DOCTYPE html>
<%@ Register Assembly="AjaxControlToolkit" Namespace="AjaxControlToolkit" TagPrefix="cc1" %>
<html lang="en">
<head runat="server">
    <title></title>
    <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
    <script src="../js/jquery-1.6.2.js" type="text/javascript"></script>
    <script src="../js/modernizr-latest.js" type="text/javascript"></script>
    <script src="../js/admin.js" type="text/javascript"></script>
</head>
<body>
    <form id="form1" runat="server">
    <cc1:ToolkitScriptManager ID="ToolkitScriptManager1" runat="server">
    </cc1:ToolkitScriptManager>
    <section>
        <cc1:TabContainer ID="TabContainerMain" runat="server" Height="300px">
            <cc1:TabPanel ID="tp2" runat="server" HeaderText="test 2">
                <ContentTemplate>
                <section>
                    <div style="height: 100%; width: 30%; float: left;">
                        <div>
                            <asp:Label ID="Label5" runat="server" Text="Search:"></asp:Label>
                            <br />
                            <asp:TextBox ID="TextBox2" runat="server"></asp:TextBox>
                            <input id="Button1" type="button" value="Search" onclick="SearchClick(this)" />
                        </div>
                    </div>
                    <div style="width: 70%; float: left;">
                        <cc1:TabContainer ID="SubTabContainerUg" runat="server" ActiveTabIndex="0">
                            <cc1:TabPanel ID="subTab1" runat="server" HeaderText="Cubes">
                                <ContentTemplate>
                                <div style="height: 100%;">
                                    <asp:TextBox ID="TextBox1" runat="server"></asp:TextBox>
                                </div>
                                </ContentTemplate>
                            </cc1:TabPanel>
                            <cc1:TabPanel ID="subTab2" runat="server" HeaderText="Reports">
                                <ContentTemplate>
                                    <div>
                                        <asp:TextBox ID="TextBox3" runat="server"></asp:TextBox>
                                    </div>
                                </ContentTemplate>
                            </cc1:TabPanel>
                        </cc1:TabContainer>
                    </div>
                </section>
                </ContentTemplate>
            </cc1:TabPanel>
            <cc1:TabPanel ID="tp3" runat="server" HeaderText="test 3">
                <ContentTemplate>
                </ContentTemplate>
            </cc1:TabPanel>
        </cc1:TabContainer>
    </section>
    <footer> This is footer. </footer>
    </form>
</body>
</html> 
```

注意：1）我最初的不可维护的解决方案是在服务器后面的代码中设置这个高度，如下所示：

```
SubTabContainerUg.Height = new Unit(TabContainerMain.Height.Value - 43); 
```

请注意，此代码适用于 IE7/8/9，即调整子选项卡的大小并将容器保持在相同的高度（= 300 像素），但上面的代码不好，因为如果我更改样式（边距/边框）的子选项卡容器，那么上面的代码（准确地说是硬编码常量）也必须改变。

2）为了简洁起见，我简化了标记。主选项卡和子选项卡都将包含文本框和列表框等控件。

3) 此页面用作对话框，在FF 和IE7/8/9 中运行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-09T19:12:20.997

# **回答**

使用 jQuery 实现您的问题的解决方案相对简单。对于每个`TabContainer`要调整为其父级大小的对象，您必须：

```
// SubTabContainerUg is the TagContainer's ID property.
var myheader = $('#<%= SubTabContainerUg.ClientID %> > .ajax__tab_header');
var mybody = $('#<%= SubTabContainerUg.ClientID %> > .ajax__tab_body');
var myparentbody = $('#<%= TabContainerMain.ClientID %> > .ajax__tab_body');
mybody.height(myparentbody.height() - myheader.outerHeight(true) - myheader.position().top); 
```

* * *

# **细节**

1.  找到***子选项卡控件***的标题元素（包含选项卡按钮）；

    ```
    var myheader = $('#<%= SubTabContainerUg.ClientID %> > .ajax__tab_header'); 
    ```

2.  找到***子选项卡控件***的主体元素（选定选项卡的主体）；

    ```
    var mybody = $('#<%= SubTabContainerUg.ClientID %> > .ajax__tab_body'); 
    ```

3.  找到***父选项卡控件***的body元素（子选项卡控件所在的位置）；

    ```
    var myparentbody = $('#<%= TabContainerMain.ClientID %> > .ajax__tab_body'); 
    ```

4.  将***子选项卡控件***的主体高度设置***为父选项卡控件***的主体高度（减去***子选项卡***的标题高度和顶部位置 - 顶部位置包括任何父填充和任何元素边距）。

    ```
    mybody.height(myparentbody.height() - myheader.outerHeight(true) - myheader.position().top); 
    ```

* * *

该解决方案适用于：

*   [火狐 20.0](http://i.stack.imgur.com/YzgL5.png)
*   [铬 26.0.1410.64](http://i.stack.imgur.com/bNyN6.png)
*   互联网浏览器[6](http://i.stack.imgur.com/dcV4g.png) / [7](http://i.stack.imgur.com/UMmRM.png) / [8](http://i.stack.imgur.com/TTlss.png) / [9](http://i.stack.imgur.com/0CFMm.png) / [10](http://i.stack.imgur.com/cznsy.png)

* * *

**编辑：**更改`offset()`为`position()`. 根据[`position()`](http://api.jquery.com/position/)文档：

> 当将新元素定位在另一个元素附近并在同一个包含 DOM 元素内时，.position() 更有用。

* * *

**编辑 2：**这是[您的标记的要点](https://gist.github.com/Irrational86/3e90ba54a78a41b41d1d/db3ae047783a45ae9f1985e29a93abcdf71f057a)，[这是我的标记和代码](https://gist.github.com/Irrational86/3e90ba54a78a41b41d1d/4c3b99812ce429664e0f4dba3c1c663978a054be)，这是[显示差异的修订版](https://gist.github.com/Irrational86/3e90ba54a78a41b41d1d/revisions)。

1.  我参考`http://code.jquery.com/jquery-1.6.2.min.js`- 希望您在代码中引用它的原始且未经修改的副本。

2.  `height: 100%;`从第一个 div 里面去掉`cc1:TabPanel ID="tp2"`。

3.  将第二个 div 从更改`float: left;`为`float: right;`（此 div 包含`cc1:TabContainer ID="SubTabContainerUg"`）。

4.  `style="height: 100%;"`从 div 里面去掉`cc1:TabPanel ID="subTab1"`。

# php - 文件中的 str_replace 不起作用

> ID：15756124
> 
> 赞同：0
> 
> 时间：2013-04-02T04:30:13.340
> 
> 标签：php

我正在尝试使用 preg_replace 删除 html 文件中的 html 和 body 标签，但不是替换所需的标签，而是整个 html 文件变为空白。我不明白我哪里出错了......我觉得我在一个基本想法上出错了，但不明白这是我正在使用的代码：

```
$f = fopen ("game1/game.html", "w");
$replacetags=array('<html>', '</html>', '<body>', '</body>','<head>','</head>')
$file=  str_replace( $replacetags,'',$f);
fclose($f); 
```

此外，如果有人可以建议一种更好的方法来删除标签，它会有所帮助....谢谢..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:32:34.537

你得到的输出是正确的。您出错的地方是当您替换这些标签时，`'<html>', '</html>', '<body>', '</body>','<head>','</head>'`浏览器无法将其呈现为正常的网页。要在浏览器中显示，您应该遵循正确的格式。

它应该具有以下格式以显示在浏览器中

```
<!DOCTYPE html>
<html>
<head>
</head>
<body>
</body>
</html> 
```

供您参考

[strip_tags](http://php.net/manual/en/function.strip-tags.php) — 从字符串中去除 HTML 和 PHP 标记。你可能也想看看那个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:37:44.743

str_replace 不适用于 fopen 处理程序（正如我在 php ref 上看到的那样），因此您需要使用它

```
 $replacetags=array('<html>', '</html>', '<body>', '</body>','<head>','</head>'); 
      $file=  str_replace( $replacetags,'',file_get_contents("game1/game.html"));
      $f = fopen ("game1/game.html", "w");
      fwrite($f,$file);
      fclose($f); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T04:41:53.440

该`fopen`函数打开一个*文件句柄*（它是一种`resource`类型）。

您可能想要使用[`file_get_contents`](http://php.net/file_get_contents)and[`file_put_contents`](http://php.net/file_put_contents)函数。它们实际上是在文件中读取和写入数据。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T04:51:05.520

当您消除**body**、**head**和**html**等重要标签时，您将无法在浏览器中看到输出。

因此，**str_replace**运行良好。您可以通过运行以下代码进行交叉检查：

```
<?php
   $f =file_get_contents('game1/game.html');
   $replacetags=array('<html>', '</html>', '<body>', '</body>','<head>','</head>')  ;           
   $file=  str_replace( $replacetags,"",$f);

   file_put_contents("output.html", $file);
?> 
```

在浏览器中运行或加载页面（包含上述源代码）后，当您`output.html`使用文本编辑器打开生成的文件时，您将看不到 body、head 和 html 标签。

UPD： **为什么 HTML 文件完全空白**？

当您在**W模式下使用****[fopen](http://php.net/manual/en/function.fopen.php)**打开文件或 URL 时，会发生以下情况：

 **```
'w':  Open for writing only; place the file pointer at the
 beginning of the file and truncate the file to zero length.
 If the file does not exist, attempt to create it. 
```

当您使用**fopen** as打开文件时`fopen ("game1/game.html", "w");`，文件指针被放置在文件的开头并且文件被截断为零长度（**空白**），因为您没有在 game.html 中写入任何内容，因此 html 文件变为空白。

**另请注意：** **[str_replace](http://php.net/manual/en/function.str-replace.php)**中的第三个参数是`the string or array being searched and replaced on, otherwise known as the haystack`. 但是在您的代码中，您传递的第三个参数**$f**是文件句柄。因此，当您使用 输出`$file`字符串时`echo or print`，将打印**Resource id #x而不是过滤（目标）字符串。**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T04:37:57.883

fopen 应该是：

```
$file = fopen('game.html', 'w+'); 
```

您的 game.html 页面已被您的代码删除。看看如果不相信我

我也会推荐你一起工作`str_ireplace`。**

# mysql - 如何从mysql数据库中获取本地时间

> ID：15756126
> 
> 赞同：0
> 
> 时间：2013-04-02T04:30:22.783
> 
> 标签：mysql, ruby-on-rails

我是mysql的新手。我正在研究 ruby​​ on rails 项目。我正在使用 mysql 数据库，它以 utc 格式存储时间。但我想要印度的当地时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:35:03.563

将时间保存在 UTC 中的数据库中。您可以随时将时间转换为当地时间。

更多地查看 Rails 时区，有很多关于它的信息并且它得到了很好的支持。

本质上，您将根据 around_filter 中的用户或环境设置设置 Time.zone 值，Rails 将负责在正确的时区显示日期。

还有很多其他细节，但这应该可以帮助您入门。

# java - 为什么我的代码返回错误？

> ID：15756127
> 
> 赞同：0
> 
> 时间：2013-04-02T04:30:29.723
> 
> 标签：java, string, comparison

```
public class practice {
public static void main(String[] args) {
    String str1 = new String("abcdef");
    String str2 = new String("abcdef");
    System.out.println(str1==str2);
        }
} 
```

有人可以解释为什么即使它们具有相同的字符串内容它也会返回 false 。

# filepicker.io - 将 Filepicker.io 与 Aviary 工具一起使用

> ID：15756129
> 
> 赞同：0
> 
> 时间：2013-04-02T04:30:47.453
> 
> 标签：filepicker.io, aviary

我正在使用 Aviary-Filepicker 工具让用户上传图像，裁剪它，然后保存它。当我在我的 javascript 中使用下面的代码时，会发生以下情况。

1.  我点击上传按钮
2.  文件选择器打开
3.  我使用 fiepicker 选择图像。
4.  鸟舍编辑窗格随即打开。
5.  我裁剪图像。
6.  我保存图像。
7.  然后文件选择器再次打开（提示我选择另一张图片）。
8.  我选择了图片，然后它说我的工作已保存。
9.  控制台记录 console.log 函数。

我不知道为什么文件选择器在我裁剪并保存后再次打开。

这是代码：

```
$(function(){var a=new Aviary.Feather({apiKey:'zwbGz6e420egYruuRuohTA',apiVersion:2,tools: 'all',initTool: 'crop',cropPresets: [['Square','1:1']],
                                      onSave:function(a){filepicker.pickAndStore({mimetype:"image/*"},{},function(fpfiles){
                                                                                   console.log(JSON.stringify(fpfiles));
                                                                                   });},

    onError:function(a){},appendTo:"editpane"});filepicker.setKey(server_vars.apikey);$(".openbutton").click(function(){filepicker.pick({mimetype:'image/*'},function(b){var c=$('<img id="#editimage"/>');c.attr("src",b.url);$(".editpane").empty().append(c);a.launch({image:c[0],url:b.url});});});}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-07T03:18:59.007

这是我如何做到的，它是有效的。我在 aviary 函数中的 onSave 中添加了导出函数。如 Aviary API 说明所述，尝试自定义 onSave 或 OnSaveButtonClicked 有一些奇怪之处：

```
 onSave: function(imageID, newURL) {
        var img = document.getElementById(imageID);
        img.src = newURL;
            filepicker.exportFile(
            newURL,
            {mimetype:'image/png'},
            function(FPFile){
            console.log(FPFile.url);
            });
       },
       onError: function(errorObj) {
           alert(errorObj.message);
       }
   });
   function launchEditor(id, src) {
       featherEditor.launch({
           image: id,
       url: src
       });
      return false;
   }
</script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T10:41:56.340

文件选择器站点上有一些[集成说明](https://www.filepicker.io/products/aviary/ "集成说明")，以防您没有看到它们。

# php - php excel读取返回奇怪的字符

> ID：15756131
> 
> 赞同：2
> 
> 时间：2013-04-02T04:31:02.600
> 
> 标签：php, excel

我正在使用此函数从 csv 文件中读取行。

```
 <?PHP

$file_handle = fopen("test.csv", "r");

while (!feof($file_handle) ) {

$line_of_text = fgetcsv($file_handle, 1024);

echo $line_of_text[0] . $line_of_text[1]. $line_of_text[2] . "<BR>";

}

fclose($file_handle);

?> 
```

我得到了这个

```
 PK!|l˜l [Content_Types].xml ¢( Ì”]KÃ0†ïÿCÉ­4Ù&ˆÈº]øq©çˆÍé–&amp;!'›Û¿÷4û@¤nzÓÐæœ÷}’4ïp¼jL¶„€ÚÙ‚õye`K§´ìmú”ß²£´Jg¡`k@6]^§k˜Q·Å‚Õ1ú;!°¬¡‘ÈK3•ŒôfÂËr.g ½Þ(`c[ 6>@%&f+ú¼!  `e÷›ÂÖ«`Ò{£K‰T­úæ’o8u¦¬µÇ+Â`¢Ó¡ùÙ`Û÷B[´‚l"C|– aˆ•.Ìß›óÃ"”®ªt   Ê•‹†v€£ Ö±1<¼‘Úî¸ø§bièŸ¤]_>‘cðO8®ÿˆ#Òÿ"=$IæÈ`\À3¯v#zÌ¹–Ôk”gøª}ˆƒîÑ$8”(Nß…]d´Ý¹'!QÃ>4º.ßÞ‘ÒètÃo·Ú¼S :¼EÊ×Ñ'ÿÿPK!µU0#õL_rels/.rels ¢( 
Œ’ÏNÃ0ÆïH¼CäûênH¡¥»LH»!TÀ$îµ£$@÷ö„‚JcÛÑöçÏ?[ÞîæiTb/NÃº(A±3b{×jx­ŸV b"giÇŽaWÝÞl_x¤”›b×û¨²‹‹º”ü#b4Oñìr¥‘0QÊahÑ“¨eÜ”å=†¿P-<ÕÁj{ª>ú<ù²·4Mox/æ}b—NŒ@ž;ËvåCf©ÏÛ¨šBËIƒóœÓÉû"cž&Ú\Oôÿ¶8q"K‰ÐHàó<ßŠs@ëë.Ÿh©ø½Î<â§„áMdøaÁÅT_ÿÿPK!Þ ý(Ôxl/_rels/workbook.xml.rels ¢( 
¼“ÏjÃ0Æïƒ½ƒÑ}q’ne”:½ŒA¯[÷&QâÐÄ6–ö'o?“Cº@É.¡ƒ$ü}?Ð§ýá§ïÄjU%)´¥«ZÛ(ø8½><ƒ Ö¶Ò³¨`@‚Cq·ÃNsüD¦õ$¢Š%†Ùï¤¤Ò`¯)qmœÔ.ôšcéuyÖ Êõ’ýãšöO    /îc)ÇwÚ‡œÝbñÿÿPK!«h&¨bqxl/workbook.xmlŒRËNÃ0¼#ñ–ï4©Ó·šTB€è!QÚ³‰7UÇŽl‡´ÏÆQKQ/œv×;ÏŒ³\+E¾Á:itJ‡ƒ˜Ð¹RïSú¹yy˜Qâ<×‚+£!¥'pt•Ýß-[c_Æh—ÒÒûzE./¡ân`jÐ¸)Œ­¸ÇÑî#W[àÂ•¾R‹ãITq©iÏ°°ÿá0E!sx2ySö=‰Å=Êw¥¬Í–…T°í^×o¼BÝGE‰âÎ?éA¤tŒ£iáÏmêÇF*ÜÎ“˜Ñ(»˜|·D@Áå7hïÌŽy±c“ÙE±•Ðºßº‘wRÓ¦t4ÃhOç)Á¡ ›¾L)›Nç¨©?{¹/=Ò'É8îØ£+ú ^*ÑÁÝGê_ª«k4€½]HlìZ;†4»BcAß7èä
ýuŽ’r®rŒª+AÄhÓ8h{w†ýK’
ÇcÌxLÚÞœHïÚÖûï]Å›*$A°>–›¸í…J%›•ŠôaËËACMÒÛÊˆ÷¼ÆJêŸ‰&amp;Mœ;žÖ4BÎe—    tˆYÛ>c~4$”‡– 
```

我尝试了许多其他方法，但得到了相同的输出。有什么办法可以得到字符串吗？

提前致谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T04:34:56.650

这不是一个 CSV 文件，它是一个 ZIP 文件（注意`PK`开头的）。

可能这是一个 xlsx 文件（zip 包内的 xml 中的 excel），您要么命名错误，要么具有全名`test.csv.xlsx`，但 Windows 隐藏了您的真实扩展名（如果您在 Windows 上）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:35:47.647

尝试为您的 csv 文件提供行分隔符，例如

```
$csvcontent = fgetcsv($handle, 1000,"\t"); 
```

其中“\t”是您的行分隔符。我认为它不是 CSV 文件...它是压缩文件或类似 .xlsx 扩展文件，首先检查一次

# iphone - iOS从静态库解析JSON返回null

> ID：15756132
> 
> 赞同：0
> 
> 时间：2013-04-02T04:31:08.207
> 
> 标签：iphone, ios, objective-c, json, static-libraries

我正在尝试使用静态库进行测试，并正在调用此方法（在静态库中）

```
-(NSMutableDictionary *)parseJSONfromURL:(NSURL *)url{
__strong NSMutableDictionary *json;
[self.delegate isParsing:(url != nil)];
if (url == nil) {
    [NSException raise:NSArgumentDomain format:@"The passed url argument cannot be nil"];
}
NSError *err;
json = [NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfURL:url] options:NSJSONReadingMutableLeaves error:&err];
if (err) {
    [json setObject:err forKey:@"error"];
}
while (json == nil) {
    NSLog(@"waiting...");
}
[self.delegate isParsing:NO];
[self.delegate didFinishParsing:(json != nil)];
return json;
} 
```

我希望`while`循环是无限的，因为 json 正在返回`null`，但是委托方法`didFinishParsing`被发送，这意味着它不是`null`。像这样（ACParser 是库中的一个类）

```
ACParser *p = [[ACParser alloc] initWithDelegate:self];
dictionary = [p parseJSONfromURL:[NSURL URLWithString:@"http://www.a-cstudios.com/text.json"]]; 
```

字典是这样声明的

```
__strong NSMutableDictionary *dictionary; 
```

该 URL 处的 JSON 非常简单

```
{
"text" : "testing"
} 
```

但是，每次调用它时，在委托方法`didFinishParsing:`中，日志记录`dictionary`都会返回`(null)`。我在这里做错了什么？是因为我从静态库中调用它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T00:36:32.510

尝试添加这个：

`NSLog(@"%@", [NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfURL:[NSURL URLWithString:url]] options:NSJSONReadingAllowFragments error:nil]);`

在那里，看看它是否打印出您预期的 JSON。如果没有，你的网址是错误的。如果是这样，那么您的数据不会被保留。尝试像这样实例化您的 json 变量：

`NSMutableDictionary *json = [NSMutableDictionary dictionaryWithDictionary:[NSJSONSerialization JSONObjectWithData:[NSData dataWithContentsOfURL:url] options:NSJSONReadingMutableLeaves error:&err]];`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:50:34.127

一旦该方法返回，“ `json`”内的“ ”就会自动释放/超出范围，因此它永远没有机会分配给您强大的“ ”属性。这就是您看到 NULL 的原因。`parseJSONfromURL``dictionary`

尝试*在*您的`parseJSONfromURL`方法中设置属性，看看是否有效，或者创建一个非自动发布的字典并返回*它*。

# php - 需要帮助在 mysql 中存储复选框、单选按钮和下拉菜单数据

> ID：15756139
> 
> 赞同：0
> 
> 时间：2013-04-02T04:31:50.847
> 
> 标签：php, mysql, drop-down-menu, checkbox, radio-button

我正在尝试将表单数据存储在 mysql 数据库中。我希望用户键入或单击的所有内容都存储在那里。我能够成功地将我的文本字段存储在 mysql 中。我无法弄清楚如何将多个复选框、单选按钮和下拉列表发送到 mysql 并将其存储在那里。我什至不知道从哪里开始。请帮忙。

也可以参考这个。

[php 和 mysql - 将复选框、单选按钮和下拉菜单结果从用户发送到 mysql 数据库并将其存储在那里](https://stackoverflow.com/questions/15755584/php-and-mysql-send-checkbox-radio-button-and-drop-down-menu-results-from-use)

```
 session_start();

    function logged_in() {
        return isset($_SESSION['user_id']);
    }

    function confirm_logged_in() {
        if (!logged_in()) {
            redirect_to("contact info.php");
        }
    }

    // Database Constants
define('DB_SERVER', 'localhost');
define('DB_USER', 'root');
define('DB_PASS', '');
define('DB_NAME', 'wer_application');

    function check_required_fields($required_array) {
    $field_errors = array();
    foreach($required_array as $fieldname) {
        if (!isset($_POST[$fieldname]) || (empty($_POST[$fieldname]) && !is_numeric($_POST[$fieldname]))) { 
            $field_errors[] = $fieldname; 
        }
    }
    return $field_errors;
}

function check_max_field_lengths($field_length_array) {
    $field_errors = array();
    foreach($field_length_array as $fieldname => $maxlength ) {
        if (strlen(trim(mysql_prep($_POST[$fieldname]))) > $maxlength) { $field_errors[] = $fieldname; }
    }
    return $field_errors;
}

function display_errors($error_array) {
    echo "<p class=\"errors\">";
    echo "Please review the following fields:<br />";
    foreach($error_array as $error) {
        echo " - " . $error . "<br />";
    }
    echo "</p>";
}

    // START FORM PROCESSING
    if (isset($_POST['submit'])) { // Form has been submitted.
        $errors = array();

        // perform validations on the form data
        $required_fields = array('id','student_gender', 'student_session_one_preference', 'student_session_two_preference',
        'waldron_scholarship', 'jesse_van_anterp_huyck_scholarship', 'edward_raney_scholarship', 'school_type', 
        'student_statemenet_consent_check_box', 'guardian_statemenet_consent_check_box', 'waiver');

        $errors = array_merge($errors, check_required_fields($required_fields, $_POST));

    $errors = array_merge($errors, check_max_field_lengths($fields_with_lengths, $_POST));

        //Captures what is typed by the user
        if(!empty($_POST) && isset($_POST["submit-btn"])){
        $student_gender = isset($_POST["student_gender"]) ? $_POST["student_gender"] : "";
        $student_session_one_preference = isset($_POST["student_session_one_preference"]) ? $_POST["student_session_one_preference"] : "";
        $student_session_two_preference = isset($_POST["student_session_two_preference"]) ? $_POST["student_session_two_preference"] : "";
        $waldron_scholarship = isset($_POST["waldron_scholarship"]) ? $_POST["waldron_scholarship"] : "";
        $jesse_van_anterp_huyck_scholarship = isset($_POST["jesse_van_anterp_huyck_scholarship"]) ? $_POST["jesse_van_anterp_huyck_scholarship"] : "";
        $edward_raney_scholarship = isset($_POST["edward_raney_scholarship"]) ? $_POST["edward_raney_scholarship"] : "";
        $school_type = isset($_POST["school_type"]) ? $_POST["school_type"] : "";
        $student_statemenet_consent_check_box = isset($_POST["student_statemenet_consent_check_box"]) ? $_POST["student_statemenet_consent_check_box"] : "";
        $guardian_statemenet_consent_check_box = isset($_POST["guardian_statemenet_consent_check_box"]) ? $_POST["guardian_statemenet_consent_check_box"] : "";
        $waiver = isset($_POST["waiver"]) ? $_POST["waiver"] : "";

    //sends the data from the form into our database we made with mysql.
        $sql = "INSERT INTO nature VALUES ('id','$student_gender', '$student_session_one_preference', '$student_session_two_preference',
        '$waldron_scholarship', '$jesse_van_anterp_huyck_scholarship', '$edward_raney_scholarship', '$school_type', 
        '$student_statemenet_consent_check_box', '$guardian_statemenet_consent_check_box', '$waiver')";

    if(!mysql_query($sql)){
            die('Error: ' . mysql_error());
        }
    }

    <html>
    <head>
        <title>WER Application Packet</title>
        <link href="stylesheets/public.css" media="all" rel="stylesheet" type="text/css" />
    </head>
    <body>
        <div id="header">
            <h1>WER Application Packet</h1>
        </div>
        <div id="main">

    <table id="structure">
    <tr>
        <td id="page">
            <?php if (!empty($message)) {echo "<p class=\"message\">" . $message . "</p>";} ?>
            <?php if (!empty($errors)) { display_errors($errors); } ?>

            <form action="contact info.php" method="post">

    <form method="POST">
    <input type="radio" name="student_gender" value="Male">Male<br>
    <input type="radio" name="student_gender" value="Female">Female<br>

    <select name="student_session_one_preference">
                        <option value="Session 1">Session 1: June 30 - July 21</option>
                        <option value="Session 2">Session 2: July 28 - August 18</option>
                    </select> <br/>
                    Preference 2:
                    <select name="student_session_two_preference">
                        <option value="Session 1">Session 1: June 30 - July 21</option>
                        <option value="Session 2">Session 2: July 28 - August 18</option>
                    </select>

    <input type="checkbox" name="waldron_scholarship" value="Waldron Scholarship">Waldron Scholarship<br/>
                        <input type="checkbox" name="jesse_van_anterp_huyck_scholarship" value="Jesse Van Anterp Huyck Scholarship">Jesse Van Anterp Huyck Scholarship<br/>
                        <input type="checkbox" name="edward_raney_scholarship" value="Edward Raney Scholarship">Edward Raney Scholarship<br/>

    <select name="school_type">
                        <option value="Public">Public</option>
                        <option value="Private">Private Parochial</option>
                        <option value="Other">Other</option>
                    </select>

    <input type="radio" name="waiver" value="">I waive any right of access that I may have to information submitted by my referee<br>
                        <input type="radio" name="waiver" value="">I do not waive any right of access that I may have to information submitted by my referee<br>

    <input type="checkbox" name="student_statement_consent_check_box" value="Agree">By checking this box, the student acknowledges <br/> that they have read the statement <br/> of consent and agrees with it.<br>

    <input type="checkbox" name="guardian_statement_consent_check_box" value="Agree">By checking this box, the guardian acknowledges <br/> that they have read the statement <br/> of consent and agrees with it.<br>

    <input type="submit" value="Submit" name="submit-btn">

    </form>

    </td>
    </tr>
</table>

            </div>
        <div id="footer"></div>
    </body>
</html>
<?php
    // 5\. Close connection
    mysql_close($connection);
?>

    CREATE TABLE nature(
ID int NOT NULL auto_increment,
student_gender varchar(6),
student_session_one_preference varchar(30),
student_session_two_preference varchar(30),
waldron_scholarship tinyint,
jesse_van_anterp_huyck_scholarship tinyint,
edward_raney_scholarship tinyint,
school_type varchar(25),
student_statemenet_consent_check_box tinyint,
guardian_statemenet_consent_check_box tinyint,
waiver tinyint, 
PRIMARY KEY(ID)
); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:43:17.337

您的**豁免**单选输入都是缺失值，因此 $_POST['waiver'] 将始终为空。像这样修复：

```
<input type="radio" name="waiver" value="yes">
<input type="radio" name="waiver" value="no"> 
```

您的复选框字段可以像这样设置变量（只需检查是否设置）：

```
$jesse_van_anterp_huyck_scholarship = isset($_POST["jesse_van_anterp_huyck_scholarship"]) ? 1 : 0; 
```

仅供参考：您的 varchar(30) 字段可能不够长，无法存储诸如“Jesse Van Anterp Huyck Scholarship”之类的字符串

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:43:36.040

尝试使用以下 PHP 脚本来发现当您选择和省略某些表单元素时发送的内容（以及不发送的内容）。

```
<?php
    if (sizeOf($_POST) > 0) print_r($_POST);
?>

<form method="POST" action=".">
    <input type="checkbox" name="checkbox" id="checkbox" /> <label for="checkbox">Checkbox</label>
    <input type="radio" name="radio" value="1" id="radio_1" /> <label for="radio_1">Radio 1</label>
    <input type="radio" name="radio" value="2" id="radio_2" /> <label for="radio_2">Radio 2</label>
    <select name="select">
        <option value="1">1</option>
        <option value="2">2</option>
    </select>
    <input type="submit" />
</form> 
```

您会看到，如果选中了一个复选框，则相应的表单 POST 值将设置为“on”。单选按钮将设置为其值，选择也是如此。

请注意，所有表单元素在发送到`action`页面时都由它们的`name`.

# spring - JMS 消息和 JMS 消息的负载平衡

> ID：15756140
> 
> 赞同：0
> 
> 时间：2013-04-02T04:31:50.640
> 
> 标签：spring, spring-mvc, jms, activemq

有这个设计问题，并试图找到使用 JMS 实现它的最佳方法。

Web App 有一个 Listener、多个 Producer 和多个 WorkerBee。侦听器将消息从其队列推送到 WorkerBee。产生的所有消息都在侦听器中排队。我想实现一个过程，该过程可以使用某种负载平衡过程从侦听器队列向每个 WorkerBee 发送消息。Listener 队列或 WorkerBee 队列中仅出现消息的单个实例。

最好的方法是什么？JMS 在这里听起来是不是一个不错的选择？如何将消息从 Listener 队列推送到 WorkerBee 队列？

开放供建议:) 并感谢您的回复。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T13:08:26.613

消息传递是此类任务的不错选择。我认为你应该使用**Apache Camel**框架作为路由平台来描述目的。它允许以非常优雅的方式将业务逻辑与集成级别分开。

**Camel**支持许多“开箱即用”的组件，包括[JMS 端点](http://camel.apache.org/)。[您可以使用负载均衡器](http://camel.apache.org/load-balancer.html)模式委托给您的 WorkerBee 之一。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T13:35:09.463

JMS 听起来是个不错的选择，因为您有多个 WorkerBee 实例，所以让所有 WorkerBee 监听一个队列，例如 InWorkBeeQueue。

现在您可以将消息从 Web App 侦听器发布到 InWorkBeeQueue。编写一个简单的 java JMS 生产者代码，将消息发布到此队列。根据 WorkBee 的哪个实例是空闲的，它将从 InWorkBeeQueue 读取消息并处理它。

如果您想避免编写新的 JMS 生产者代码，您可以使用 Apache Camel 路由将消息从 Web 应用程序队列直接映射到 InWorkBeeQueue。

# java - 如何在logtag android中打印和查看字符串的值

> ID：15756141
> 
> 赞同：-4
> 
> 时间：2013-04-02T04:31:57.427
> 
> 标签：java, android

我有一个微调器，我想看看用户选择的值是否合适。如何在日志标签中打印它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:41:32.373

我猜你的意思是`Logcat`。要在 中打印您的值`Logcat`，您可以使用[`Log`](http://developer.android.com/reference/android/util/Log.html)Android 提供的实用程序。您可以根据需要使用各种级别的日志记录。

**例如：-**

```
Log.v("MyTag", "MyValue=" + myValue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:41:38.920

您可以使用其中一种`Log`API 来检查输出。在此处阅读有关[Log 的更多信息](http://developer.android.com/reference/android/util/Log.html)

Log 的可用方法是： Log.v() Log.d() Log.i() Log.w() 和 Log.e()

例如，要将a记录为 INFO*日志*`String`，

```
Log.i("SOME TAG", YOUR_STRING_INSTANCE); 
```

这可以设置为触发器，例如`OnClickListener()`、 或 in`AsyncTask`或`onCreate()`等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T04:46:19.913

它不是 logtag 它的 Log Cat。你可​​以像这样看到你的值 Log.i("log_tag", "anything here" + yourstringvalue);

# sqlite - flash builder 4.5，sqlite 数据库查询问题

> ID：15756155
> 
> 赞同：2
> 
> 时间：2013-04-02T04:33:51.033
> 
> 标签：sqlite, actionscript-3, apache-flex, flash-builder, flex4.5

我正在为 iOS 应用程序使用 flex 4.5。我正在尝试制作登录屏幕。在这里，我附上了我的代码：

登录按钮的点击处理程序：

```
protected function btnlogin_clickHandler(event:MouseEvent):void
{
    user();
} 
```

调用此函数：

```
private function user():void
{
    sqlConnection = new SQLConnection();
    sqlConnection.open(File.applicationStorageDirectory.resolvePath("SchoolSeries.db"));
    var stmt:SQLStatement = new SQLStatement();
    stmt.sqlConnection = sqlConnection;
    stmt.text = "select User_Name from USER_NEW where User_Password = :password" 
    stmt.parameters[":password"] = password.text ;
    stmt.execute();
    var result11:SQLResult = stmt.getResult();
    DataModel.getInstance().connection = sqlConnection;
    //statuslable1.text = (String(result11.data[0].User_Conform_Password));
    if ((String(result11.data[0].User_Name)) == username.text)
    {
        //VerifyLogin();
        navigator.pushView(SummaryView,{unm:username.text});
    }
    else
    {
        statuslabelpass.visible = false;
        statuslabel1.visible = false;
        statuslabel.visible =true;
        statuslabel.text = "Username & Password do not match";
    }
} 
```

我的问题是我没有按照我想要的方式验证字段。如果我输入了正确的密码但输入了错误的用户名，那么只有我会收到类似“用户名和密码不匹配”的消息。但是，如果我输入了正确的用户名和错误的密码，则不会收到任何消息。

如果我编写另一个验证密码的函数，并通过单击按钮调用它，那么那个函数甚至还没有被调用。

```
private function passwrd():void
{
    sqlConnection = new SQLConnection();
    sqlConnection.open(File.applicationStorageDirectory.resolvePath("SchoolSeries.db"));
    var stmt:SQLStatement = new SQLStatement();
    stmt.sqlConnection = sqlConnection;
    stmt.text = "select User_Password from USER_NEW where User_Name = :username" 
    stmt.parameters[":username"] = username.text ;
    stmt.execute();
    var result11:SQLResult = stmt.getResult();
    DataModel.getInstance().connection = sqlConnection;
    //statuslable1.text = (String(result11.data[0].User_Conform_Password));
    if ((String(result11.data[0].User_Password)) == password.text)
    {
        navigator.pushView(SummaryView,{unm:username.text});
    }
    else
    {
        statuslabel.visible = false;
        statuslabel1.visible = false;
        statuslabelpass.visible =true;
        statuslabelpass.text = "Username & Password do not match";  
    }
} 
```

我应该怎么做才能验证 sqlite 数据库的两个字段？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T21:12:23.850

将这两个参数传递给您的查询，然后检查是否返回 0 或 1 条记录。

```
stmt.text = "select User_Password from USER_NEW where User_Name = :username and User_Password = :password" 
stmt.parameters[":username"] = username.text ;
stmt.parameters[":password"] = password.text ;

if (result11.data.length > 0)
{
    //valid credentials
}
else
{
    //Username & Password do not match
} 
```

第二次查看您的 user() 函数后，我发现其中有一个重大错误。如果您有 2 个用户选择了相同的密码，其中一个用户将永远无法登录。查询将返回 2 条记录，但您只是根据位置 [0] 中的记录检查用户名，因此返回的用户在位置 [1] 永远不会验证。你真的应该在同一个查询中传递这两个参数。

# javascript - 如何将鼠标固定在非活动页面上（js | jquery）

> ID：15756157
> 
> 赞同：0
> 
> 时间：2013-04-02T04:33:56.980
> 
> 标签：javascript, jquery, mouseevent

如果它遗漏了这个页面，有什么办法可以将鼠标固定在页面的死亡线边框上？如果鼠标
在代码中输入，则取消固定，它可能看起来类似于以下内容：

```
$('html').mouseleave(function(e) {
var pageX = e.pageX || e.clientX,
    pageY = e.pageY || e.clientY
   if (page X < 0 || pageY < 0) { //
    //do something to pin mouse 
   }
}).mouseenter(function() {
  // do something to unpin mouse
}); 
```

# html - 页面刷新后如何设置选中的菜单高亮

> ID：15756159
> 
> 赞同：0
> 
> 时间：2013-04-02T04:34:00.963
> 
> 标签：html, jquery

我有一个任务要做水平菜单。这里我的菜单选择有问题。这是我的代码。但是刷新页面后，所选菜单会消失。我该如何解决这个问题？

```
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.2/jquery.min.js"></script>
<style>
  .menu{width: 300px; height: 25; font-size: 18px;}
  .menu li{list-style: none; float: left; margin-right: 4px; padding: 5px;}
  .menu li:hover, .menu li.active {
        background-color: #f90;
    }
</style>

<ul class="menu">
<li>Item 1</li>
<li class="active">Item 2</li>
<li>Item 3</li>
<li>Item 4</li>
<li>Item 5</li>
<li>Item 6</li>
</ul>

<script type="text/javascript">

var make_button_active = function()
{
    var siblings =($(this).siblings());

    siblings.each(function (index)
    {
      $(this).removeClass('active');
    }
  )

    $(this).addClass('active');
}

$(document).ready(
  function()
  {
    $(".menu li").click(make_button_active);
  }  
)

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:36:48.560

当页面刷新时，整个页面是redrwan。您需要使用 cookie 或会话来存储它们。 [本地存储。](https://developer.mozilla.org/en-US/docs/Web/API/Window/localStorage) 您可以使用 HTML5 本地存储。

```
var yourObj= { 'key': 1, 'key2': 2, 'key3': 3 };

localStorage.setItem('yourObj', JSON.stringify(yourObj));

var getStoredObj= localStorage.getItem('yourObj'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:38:48.360

我能想到的几种方法。

您还没有指定是否使用 MVC，所以如果您使用了，那么您可以简单地用部分视图替换屏幕的更新部分，无需再发生任何事情。

但是，如果您要返回整个页面并且拥有 sessionState，那么您需要将隐藏字段的值设置为单击的菜单的 ID。

然后在重建页面时，您应该仍然拥有会话状态下的隐藏字段值，获取该值并启用该菜单项。

如果您被允许拥有 cookie，则将其中一个设置为菜单的 id，并在页面构建后再次突出显示该菜单。

**编辑**

```
 $(".menuSomeMenu").click(function () {
            $.ajax({
                data: {
                    menuClicked: 'the menu clicked for the backend to use
                },
                url: "/Home/Ajax_MenuClickEvent",
                type: 'POST',
                success: function (data) {
                    $(".MyPartialViewContainer").html(data);
                }
            });
        }); 
```

然后在你的控制器中；

```
public ActionResult Ajax_MenuClickEvent(Guid StoreId)
{
    return PartialView("MyPartialView", modelToPassToPartialView);
} 
```

# ruby-on-rails - 给定一个时间戳，如何获得 1 个月前

> ID：15756160
> 
> 赞同：1
> 
> 时间：2013-04-02T04:34:06.890
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试构建一种方法，让我通过一个月，然后可以动态查询上个月。

```
total_churn(month)
   last_month = month - 1
   companies = Company.where("created_at BETWEEN '#{last_month}' AND '#{month}')
   return companies.count
 end 
```

如何以可以使用 ruby​​ on rails 动态确定上个月的方式传递方法“月”？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:37:33.127

```
My suggestion: accept a date rather than a month.
total_churn(date)
   month_previous = date - 1.month
   companies = Company.where("created_at BETWEEN ? AND ?, '#{month_previous}', '#{date}')
   return companies.count
end

Current month:
Time.now.month
Date.today.month

Time or day one month ago:
(Time.now - 1.month).month
(Date.today - 1.month).month

...also equivalent to:
Time.now.month - 1
Date.today.month - 1

Previous month for any given date:
@date - 1.month 
```

我会亲自建立您的方法来接受日期而不仅仅是一个月数。只要 created_at 字段存储日期，您就需要为查询提供两个日期才能运行，即使这些日期是第一个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:48:34.283

Rails 有一些有用的时间助手来为您的查询创建上限和下限。（`beginning_of_month`并且`end_of_month`在[Time 类](http://api.rubyonrails.org/classes/Time.html)中）

这种方法也可以用问号而不是字符串插值来正确转义，这对 SQL 注入攻击是开放的。

```
def total_churn(month)
  companies = Company.where('created_at BETWEEN ? and ?',(Time.now - 1.month).beginning_of_month,(Time.now - 1.month).end_of_month)
  companies.count
end 
```

我还要说，这只适用于最近一年。如果您希望能够查询更早的数据，您可能需要添加一个年份参数或简单地传入一个日期并让它使用它来代替`Time.now`.

```
# with separate year and month params
def total_churn(month, year)
  date = DateTime.parse("#{year}/#{month}/01")
  companies = Company.where('created_at BETWEEN ? and ?',(date - 1.month).beginning_of_month,(date - 1.month).end_of_month)
  companies.count
end

# with a random date input
def total_churn(date_in_month)
  companies = Company.where('created_at BETWEEN ? and ?',(date_in_month - 1.month).beginning_of_month,(date_in_month - 1.month).end_of_month)
  companies.count
end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:19:02.310

您至少需要 2 个参数来完成此操作，一个用于月份，一个用于年份。这是确定您想要的月份所必需的。

```
def total_churn(year, month)
  date = Date.new year, month
  one_month_ago = date - 1.month
  ... 
```

但是，如果您已经有一个日期对象，那么您可以使用 sscirrus 的答案。如果日期在字符串中，您可能需要先解析它（就像在您的评论中一样）

```
def total_churn(date_string)
  date = Date.parse(date_string)
  one_month_ago = date - 1.month
  ...

>> date_string = '2012-09-01 00:00:00.000000'
>> total_churn date_string 
```

# javascript - 在three.js中将模型与材料合并的问题

> ID：15756173
> 
> 赞同：1
> 
> 时间：2013-04-02T04:35:14.417
> 
> 标签：javascript, three.js, webgl

我在这个小提琴中有一个我遇到的问题的例子：http: [//jsfiddle.net/saward/78Bjk/7/](http://jsfiddle.net/saward/78Bjk/7/)

如果您取消注释 scene.add(tree_mesh) 和 scene.add(mesh2)，并注释掉 scene.add(mesh)，那么您可以看到这两个对象。但是当我合并两者时，tree_mesh 的材质信息似乎丢失了。如果我修改网格以使用与 mesh2 相同的材质，那么两个对象都会显示，但显然使用了错误的材质。

我将不胜感激帮助了解这里发生了什么以及如何解决它！

谢谢

这是小提琴的代码（需要三个.js r57）：

```
var camera, scene, renderer, geometry, material, mesh1, mesh2, mesh;

init();
animate();

function init() {
    var tree = {

    "metadata" :
    {
        "formatVersion" : 3.1,
        "sourceFile"    : "tree.obj",
        "generatedBy"   : "OBJConverter",
        "vertices"      : 24,
        "faces"         : 18,
        "normals"       : 0,
        "colors"        : 0,
        "uvs"           : 0,
        "materials"     : 1
    },

    "scale" : 1.000000,

    "materials": [  {
    "DbgColor" : 15658734,
    "DbgIndex" : 0,
    "DbgName" : "Material",
    "colorAmbient" : [0.0, 0.0, 0.0],
    "colorDiffuse" : [0.64, 0.64, 0.64],
    "colorSpecular" : [0.5, 0.5, 0.5],
    "illumination" : 2,
    "opticalDensity" : 1.0,
    "specularCoef" : 96.078431,
    "transparency" : 1.0
    }],

    "vertices": [1.000000,-1.000000,-1.000000,1.000000,-1.000000,1.000000,-1.000000,-1.000000,1.000000,-1.000000,-1.000000,-1.000000,0.590806,-0.802478,-0.590806,0.590806,-0.802478,0.590807,-0.590806,-0.802478,0.590806,-0.590806,-0.802478,-0.590806,0.406036,0.737103,-0.406036,0.406036,0.737103,0.406036,-0.406036,0.737103,0.406036,-0.406036,0.737103,-0.406036,0.406036,-0.810673,-0.406036,0.406036,-0.810673,0.406036,-0.406036,-0.810673,0.406036,-0.406036,-0.810673,-0.406036,-0.703524,0.091037,0.703524,-0.703524,0.091037,-0.703524,0.703524,0.091037,-0.703524,0.703524,0.091037,0.703524,-0.703524,1.498086,0.703524,-0.703524,1.498086,-0.703524,0.703524,1.498086,-0.703524,0.703524,1.498086,0.703524],

    "morphTargets": [],

    "morphColors": [],

    "normals": [],

    "colors": [],

    "uvs": [[]],

    "faces": [3,0,1,2,3,0,3,4,7,6,5,0,3,0,4,5,1,0,3,1,5,6,2,0,3,2,6,7,3,0,3,4,0,3,7,0,3,12,8,9,13,0,3,13,9,10,14,0,3,14,10,11,15,0,3,15,11,8,12,0,3,8,9,10,11,0,3,15,14,13,12,0,3,20,21,17,16,0,3,21,22,18,17,0,3,22,23,19,18,0,3,23,20,16,19,0,3,16,17,18,19,0,3,23,22,21,20,0]

};

    scene = new THREE.Scene();

    camera = new THREE.PerspectiveCamera(50, window.innerWidth / window.innerHeight, 1, 10000);
    camera.position.z = 500;
    scene.add(camera);

    geometry = new THREE.CubeGeometry(200, 200, 200);
    material = new THREE.MeshNormalMaterial();

    var loader = new THREE.JSONLoader();
    var tree_obj = loader.parse(tree, null);
    var tree_materials = tree_obj.materials;
    var tree_face_materials = new THREE.MeshFaceMaterial(tree_materials);
    var tree_geo = tree_obj.geometry;
    var tree_mesh = new THREE.Mesh(tree_geo, tree_face_materials);
    tree_mesh.scale.x = tree_mesh.scale.y = tree_mesh.scale.z = 100;

    mesh2 = new THREE.Mesh(geometry, material);
    mesh2.position.y = 200;
    console.log(tree_mesh.scale);
    //scene.add(tree_mesh);
    //scene.add(mesh2);

    materials = [];

    THREE.GeometryUtils.setMaterialIndex(tree_mesh.geometry, 0);
    THREE.GeometryUtils.setMaterialIndex(mesh2.geometry, 1);
    materials.push(tree_face_materials);
    materials.push(material);
    var new_geo = new THREE.Geometry();
    THREE.GeometryUtils.merge(new_geo, tree_mesh);
    THREE.GeometryUtils.merge(new_geo, mesh2);
    mesh = new THREE.Mesh(new_geo, new THREE.MeshFaceMaterial(materials));

    scene.add(mesh);

    renderer = new THREE.CanvasRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);

    document.body.appendChild(renderer.domElement);

}

function animate() {

    requestAnimationFrame(animate);
    render();

}

function render() {

    mesh.rotation.x += 0.01;
    mesh.rotation.y += 0.02;

    renderer.render(scene, camera);
} 
```

**更新：**我专门解决这个问题的方法是使用当前的开发版本 three.js 58，将每个模型的材料添加到更大的数组中。

正如接受的答案所指出的，您不能使用 MeshFaceMaterial 作为材质，因此迭代 MeshFaceMaterial 中的所有材质，按顺序添加它们。

然后记下每个模型的较大数组中第一种材料的索引。然后，当需要合并网格时，不要使用 setMaterialIndex，而是为其指定特定模型的数组中第一个材质的索引。沿着这些思路：

```
THREE.GeometryUtils.merge(large_geo, some_mesh, some_mesh.material_offset);
large_mesh = new THREE.Mesh(large_geo, new THREE.MeshFaceMaterial(materials_list)); 
```

其中“some_mesh.material_offset”将是您为自己设置并存储在某处的新值。这不适用于 r57 或更低版本。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:10:24.437

使用时`MeshFaceMaterial( materials )`，则`materials`必须是材质数组。您不能将`MeshFaceMaterial`其作为材料之一。

在您的情况下，它将是：

```
materials = [];

materials.push( tree_obj.materials[0] );
materials.push( material );

mesh = new THREE.Mesh( new_geo, new THREE.MeshFaceMaterial( materials ) ); 
```

小提琴：http: [//jsfiddle.net/78Bjk/8/](http://jsfiddle.net/78Bjk/8/)

三.js r.57

# memcached - 在 c 和 java memcached 客户端中是否一致地实现了一致的哈希

> ID：15756174
> 
> 赞同：0
> 
> 时间：2013-04-02T04:35:22.433
> 
> 标签：memcached, libmemcached, consistent-hashing

我想在 java 中设置 Memcache 值并通过 c 客户端获得相同的值。

是否可以用于多个 memcache 环境。两者都使用相同的哈希标准吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T13:29:37.643

是的，这应该是可能的。如果您仔细阅读 memcached 文档，他们会声明数据格式不依赖于 Java 或 C。密钥散列算法在 c 和 java 客户端实现之间是相同的。

您应该阅读这个不错的教程：

**使用 Memcached 提高 Java 企业性能**，**第 1 部分**：架构和设置 [http://www.javaworld.com/javaworld/jw-04-2012/120418-memcached-for-java-enterprise-performance.html](http://www.javaworld.com/javaworld/jw-04-2012/120418-memcached-for-java-enterprise-performance.html)

**使用 Memcached 提高 Java 企业性能，第 2 部分**：数据库驱动的 Web 应用程序 [http://www.javaworld.com/javaworld/jw-05-2012/120515-memcached-for-java-enterprise-performance-2.html](http://www.javaworld.com/javaworld/jw-05-2012/120515-memcached-for-java-enterprise-performance-2.html)

顺便说一句，如果你想使用更健壮的 memcached 实现，你应该检查由 memcached 的作者开发的[Couchbase](http://www.couchbase.com/)。

# jquery-ui - jQuery切换幻灯片元素但不完全隐藏元素

> ID：15756175
> 
> 赞同：1
> 
> 时间：2013-04-02T04:35:40.707
> 
> 标签：jquery-ui, jquery

以下示例可能是尝试和解释我要达到的效果的最简单方法：

[http://jsfiddle.net/qSscJ/2/](http://jsfiddle.net/qSscJ/2/)

代码：

```
$(function() {
    $('#handle').click(function() {
        $('#box').toggle('slide', { direction: 'right' });
    });
}); 
```

点击蓝色手柄使整个红色框折叠。如何在盒子折叠后保持蓝色手柄可见（同时保持手柄固定在盒子边缘）？我对其他 jQuery UI API 持开放态度来实现这种效果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:40:32.277

您可以直接为宽度设置动画，这样元素就不会在动画结束时被标记为隐藏：

```
$(function() {
    $('#handle').click(function() {
        $('#box').animate({width: "0px"}, 1000);
    });
}); 
```

但是，最好更改设计，使蓝色标签不包含在您要关闭的框中，如下所示：http: [//jsfiddle.net/jfriend00/gKQrv/](http://jsfiddle.net/jfriend00/gKQrv/)。

```
$(function() {
    $('#handle').click(function() {
        var box = $('#box');
        var targetWidth = box.width() > 0 ? 0 : 150;
        box.animate({width: targetWidth + "px"}, 1000);
    });
}); 
```

# sql-server - 从列值计算平均值

> ID：15756178
> 
> 赞同：0
> 
> 时间：2013-04-02T04:36:01.447
> 
> 标签：sql-server, sql-server-2005

我想要一个如下表的结果集：

![在此处输入图像描述](https://i.stack.imgur.com/A55sD.png)

我试过查询：

```
select sdate, sum(PG)/sum(PT)*100 AS Score, avg(score) as Mean from table 
```

但我没有得到正确的平均值。

平均值是：所有分数的总和/总分数。

我想将平均值显示为计算列。在上面的结果集中，总分是 309，除以 4（总行数）得到 77.25。

我想显示结果集中显示的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:56:40.663

我相信您正在寻找类似的东西：

```
SELECT sdate, 
       SUM(PG)/SUM(PT)*100 AS Score, 
       (SELECT AVG(score) FROM table) AS Mean 
FROM table 
```

这应该将平均值设置为整个表格的平均分数。如果您有`WHERE`过滤子句，则必须将它们放在子查询和主查询中。

**编辑**

如果原始 SQL 语句有一个`GROUP BY`，就像听起来一样，那么您可以使用以下查询来实现您要查找的内容：

```
SELECT sdate, 
       SUM(PG)/SUM(PT)*100 AS score, 
       (SELECT AVG(score) 
        FROM (SELECT CAST(SUM(PG)/SUM(PT)*100 AS FLOAT) AS score 
              FROM table 
              GROUP BY sdate) scores) AS Mean
FROM table
GROUP BY sdate 
```

它不漂亮，但我相信它会完成你想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:37:56.627

```
DECLARE @mean DECIMAL(5,2);

SELECT @mean = AVG(score) FROM dbo.table;

SELECT sdate, score, Mean = @mean FROM dbo.table; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T04:47:56.717

我认为这对你有用

由于您需要在每一行中显示平均值，因此我每次都使用子查询来生成该平均值。

```
create table mean
(
  d date,
  score int 

)

insert into mean values ('01/01/2013',50),('02/01/2013',60)
                       ,('03/01/2013',40),('04/01/2013',30)
                       ,('05/01/2013',20),('06/01/2013',20)

SELECT d,score,(select sum(score)/count(*) from mean) from mean 
```

[SQL 小提琴链接](http://www.sqlfiddle.com/#!3/307ff/2)

但是如果您先计算 avg 并在您的 select 语句中使用该变量会很好

```
SELECT d,score,
ISNULL((select CONVERT(DECIMAL(10,2),CONVERT(DECIMAL(10,2),sum(score))/count(*) ) from @mean) ,0) as mean from @mean 
```

# matlab - matlab中的螺旋网格

> ID：15756181
> 
> 赞同：8
> 
> 时间：2013-04-02T04:36:06.717
> 
> 标签：matlab, graphics, physics, matlab-figure

我正在尝试使用 MATLAB 生成一些计算机生成的全息图。我使用等间距的网格网格来初始化空间网格，我得到了下图

![在此处输入图像描述](https://i.stack.imgur.com/XP9aV.jpg)

除了中心区域之外，这种模式是我需要的。边缘应该清晰但模糊。我认为这可能是网格网格的问题。`pol2cart`我尝试在极坐标中生成一个网格，并使用 MATLAB 的函数将其映射到笛卡尔坐标中。不幸的是，它也不起作用。有人可能会建议使用细网格。它也不起作用。我想如果我能生成一个螺旋网格，也许这个问题是可以解决的。另外，一般来说，旋臂的数量可以是任意的，谁能给我一个提示？

我附上了代码（我的最终项目并不完全相同，但有类似的问题）。

```
clc; clear all; close all;
%% initialization
tic
lambda = 1.55e-6;
k0 = 2*pi/lambda;
c0 = 3e8;
eta0 = 377;
scale = 0.25e-6;
NELEMENTS = 1600;
GoldenRatio = (1+sqrt(5))/2;
g = 2*pi*(1-1/GoldenRatio);

pntsrc = zeros(NELEMENTS, 3);
phisrc = zeros(NELEMENTS, 1);
for idxe = 1:NELEMENTS
  pntsrc(idxe, :) = scale*sqrt(idxe)*[cos(idxe*g), sin(idxe*g), 0];
  phisrc(idxe) = angle(-sin(idxe*g)+1i*cos(idxe*g));
end
phisrc = 3*phisrc/2; % 3 arms (topological charge ell=3)

%% post processing
sigma = 1;
polfilter = [0, 0, 1i*sigma; 0, 0, -1; -1i*sigma, 1, 0]; % cp filter

xboundl = -100e-6; xboundu = 100e-6;
yboundl = -100e-6; yboundu = 100e-6;
xf = linspace(xboundl, xboundu, 100);
yf = linspace(yboundl, yboundu, 100);
zf = -400e-6;
[pntobsx, pntobsy] = meshgrid(xf, yf);
% how to generate a right mesh grid such that we can generate a decent result?
pntobs = [pntobsx(:), pntobsy(:), zf*ones(size(pntobsx(:)))];
% arbitrary mesh may result in "wrong" results

NPNTOBS = size(pntobs, 1);
nxp = length(xf);
nyp = length(yf);

%% observation
Eobs = zeros(NPNTOBS, 3);

matlabpool open local 12
parfor nobs = 1:NPNTOBS
  rp = pntobs(nobs, :);
  Erad = [0; 0; 0];
  for idx = 1:NELEMENTS
    rs = pntsrc(idx, :);
    p = exp(sigma*1i*2*phisrc(idx))*[1 -sigma*1i 0]/2; % simplified here
    u = rp - rs;
    r = sqrt(u(1)^2+u(2)^2+u(3)^2); %norm(u);
    u = u/r; % unit vector
    ut = [u(2)*p(3)-u(3)*p(2),...
      u(3)*p(1)-u(1)*p(3), ...
      u(1)*p(2)-u(2)*p(1)]; % cross product: u cross p
    Erad = Erad + ... % u cross p cross u, do not use the built-in func
      c0*k0^2/4/pi*exp(1i*k0*r)/r*eta0*...
      [ut(2)*u(3)-ut(3)*u(2);...
      ut(3)*u(1)-ut(1)*u(3); ...
      ut(1)*u(2)-ut(2)*u(1)]; 
  end
  Eobs(nobs, :) = Erad; % filter neglected here
end
matlabpool close
Eobs = Eobs/max(max(sum(abs(Eobs), 2))); % normailized

%% source, gaussian beam
E0 = 1;
w0 = 80e-6;
theta = 0; % may be titled
RotateX = [1, 0, 0; ...
  0, cosd(theta), -sind(theta); ...
  0, sind(theta), cosd(theta)];

Esrc = zeros(NPNTOBS, 3);
for nobs = 1:NPNTOBS
  rp = RotateX*[pntobs(nobs, 1:2).'; 0];
  z = rp(3);
  r = sqrt(sum(abs(rp(1:2)).^2));
  zR = pi*w0^2/lambda;
  wz = w0*sqrt(1+z^2/zR^2);
  Rz = z^2+zR^2;
  zetaz = atan(z/zR);
  gaussian = E0*w0/wz*exp(-r^2/wz^2-1i*k0*z-1i*k0*0*r^2/Rz/2+1i*zetaz);% ...
  Esrc(nobs, :) = (polfilter*gaussian*[1; -1i; 0]).'/sqrt(2)/2;
end
Esrc = [Esrc(:, 2), Esrc(:, 3), Esrc(:, 1)];
Esrc = Esrc/max(max(sum(abs(Esrc), 2)));  % normailized
toc

%% visualization
fringe = Eobs + Esrc; % I'll have a different formula in my code
normEsrc = reshape(sum(abs(Esrc).^2, 2), [nyp nxp]);
normEobs = reshape(sum(abs(Eobs).^2, 2), [nyp nxp]);
normFringe = reshape(sum(abs(fringe).^2, 2), [nyp nxp]);

close all;
xf0 = linspace(xboundl, xboundu, 500);
yf0 = linspace(yboundl, yboundu, 500);
[xfi, yfi] = meshgrid(xf0, yf0);
data = interp2(xf, yf, normFringe, xfi, yfi);
figure; surf(xfi, yfi, data,'edgecolor','none');
% tri = delaunay(xfi, yfi); trisurf(tri, xfi, yfi, data, 'edgecolor','none');
xlim([xboundl, xboundu])
ylim([yboundl, yboundu])
% colorbar
view(0,90)
colormap(hot)
axis equal
axis off
title('fringe thereo. ', ...
  'fontsize', 18) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-07T19:02:53.913

我没有阅读您的代码，因为做这么简单的事情太长了。我写了我的，结果如下：

![在此处输入图像描述](https://i.stack.imgur.com/jthVq.png)

代码是

```
%spiral.m
function val = spiral(x,y)

  r = sqrt( x*x + y*y);
  a = atan2(y,x)*2+r;                  

  x = r*cos(a);
  y = r*sin(a);

  val = exp(-x*x*y*y);

   val = 1/(1+exp(-1000*(val)));   

endfunction

%show.m
n=300;
l = 7;
A = zeros(n);

for i=1:n
for j=1:n
    A(i,j) = spiral( 2*(i/n-0.5)*l,2*(j/n-0.5)*l);
end
 end

imshow(A) %don't know if imshow is in matlab. I used octave. 
```

锐度的关键是线条

```
val = 1/(1+exp(-1000*(val))); 
```

它是[逻辑函数](http://en.wikipedia.org/wiki/Logistic_function)。数字 1000 定义了图像的清晰度。所以降低它以获得更模糊的图像或更高它以获得更清晰的图像。

我希望这回答了你的问题 ;）

编辑：玩起来真的很有趣。这是另一个螺旋：

![螺旋2](https://i.stack.imgur.com/kEsF0.png)

```
function val = spiral(x,y)

   s= 0.5;

   r = sqrt( x*x + y*y);
   a = atan2(y,x)*2+r*r*r;                  

  x = r*cos(a);
  y = r*sin(a);

  val = 0;  
  if (abs(x)<s )
    val = s-abs(x);
    endif
 if(abs(y)<s)
    val =max(s-abs(y),val); 
    endif

   %val = 1/(1+exp(-1*(val)));

endfunction 
```

编辑2：有趣，有趣，有趣！在这里，手臂不会变瘦。

![螺旋3](https://i.stack.imgur.com/grLyA.png)

```
 function val = spiral(x,y)

   s= 0.1;

   r = sqrt( x*x + y*y);
   a = atan2(y,x)*2+r*r;                  % h

  x = r*cos(a);
  y = r*sin(a);

  val = 0;  
  s = s*exp(r);
  if (abs(x)<s )
    val = s-abs(x);
    endif
 if(abs(y)<s)
    val =max(s-abs(y),val); 
    endif
 val = val/s;   
 val = 1/(1+exp(-10*(val)));

 endfunction 
```

该死的问题，我真的需要为考试而学习，啊！

编辑3：

我对代码进行了矢量化，它运行得更快。

```
%spiral.m
  function val = spiral(x,y)   
   s= 2;

   r = sqrt( x.*x + y.*y);
   a = atan2(y,x)*8+exp(r);                  

  x = r.*cos(a);
  y = r.*sin(a);

  val = 0;  
  s = s.*exp(-0.1*r);
  val = r;
  val =  (abs(x)<s ).*(s-abs(x));
  val = val./s;

 % val = 1./(1.+exp(-1*(val)));  
 endfunction

%show.m

n=1000;
l = 3;
A = zeros(n);
[X,Y] = meshgrid(-l:2*l/n:l);
A = spiral(X,Y);
imshow(A) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-10T13:57:40.633

抱歉，不能发数据。但这可能会有所帮助。我为振幅空间调制器的实验写了它......

```
R=70;           % radius of curvature of fresnel lens (in pixel units)
A=0;             % oblique incidence by linear grating (1=oblique 0=collinear)
B=1;             % expanding by fresnel lens (1=yes 0=no)
L=7;            % topological charge
Lambda=30;       % linear grating fringe spacing (in pixels)
aspect=1/2;      % fraction of fringe period that is white/clear
xsize=1024;       % resolution (xres x yres number data pts calculated)
ysize=768;        % 

% define the X and Y ranges (defined to skip zero)
xvec = linspace(-xsize/2, xsize/2, xsize);     % list of x values
yvec = linspace(-ysize/2, ysize/2, ysize);     % list of y values

% define the meshes - matrices linear in one dimension
[xmesh, ymesh] = meshgrid(xvec, yvec);

% calculate the individual phase components
vortexPh = atan2(ymesh,xmesh);       % the vortex phase
linPh = -2*pi*ymesh;           % a phase of linear grating
radialPh = (xmesh.^2+ymesh.^2);     % a phase of defocus

% combine the phases with appropriate scales (phases are additive)
% the 'pi' at the end causes inversion of the pattern
Ph = L*vortexPh + A*linPh/Lambda + B*radialPh/R^2;

% transmittance function (the real part of exp(I*Ph))
T = cos(Ph);
% the binary version
binT = T > cos(pi*aspect);

% plot the pattern
% imagesc(binT)
imagesc(T)
colormap(gray) 
```

# javascript - 在 link_to 单击用 ajax 替换部分内容

> ID：15756182
> 
> 赞同：0
> 
> 时间：2013-04-02T04:36:08.203
> 
> 标签：javascript, jquery, ruby-on-rails, ajax, link-to

我在视图/用户/显示中有此链接：

```
<%= link_to "Photos (#{@user.photos.count})", user_path(@user), id: "photo_link", remote: true %> 
```

现在，当我单击上面的链接时，我想将 [1..6] 更改为 [1..-1] 而不在视图/用户/显示中重新渲染：

```
<section id="photo_galery">
  <% unless @user.photos[0].nil? %>
    <% for photo in @user.photos[1..6] %>
      <%= link_to image_tag(photo.photo.url(:subprofile_thumbnail), id: "subpics"), photo.photo.url(:original), id: "subprofile_photos", class: "fancybox", rel: "gallery01" %>
    <% end %>
  <% end %>
</section> 
```

我怎样才能做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:08:35.893

您必须从控制器端进行变量更改。

控制器：

```
def show
  @user = current_user
  if request.xhr? 
    @photos = @user.photos[1..-1]
  else
    @photos = @user.photos[1..6]
  end 
end 
```

查看：show.html.erb

```
<section id="photo_galery">
  <%= render "photos"%>
</section>
<%= link_to "Photos (#{@user.photos.count})", user_path(@user), id: "photo_link", remote: true %> 
```

_photos.html.erb

```
<% unless @user.photos[0].nil? %>
    <% for photo in @photos %>
      <%= link_to image_tag(photo.photo.url(:subprofile_thumbnail), id: "subpics"), photo.photo.url(:original), id: "subprofile_photos", class: "fancybox", rel: "gallery01" %>
    <% end %>
  <% end %> 
```

show.js.erb（如果使用 jquery）

```
 $("#photo_galery").html("<%= escape_javascript(render(:partial => 'users/show', :object => @photos)) %>"); 
```

如果您使用原型，则必须在控制器中进行。

# objective-c - 下载页面并在 Objective-C 中计算吞吐量

> ID：15756185
> 
> 赞同：0
> 
> 时间：2013-04-02T04:36:19.517
> 
> 标签：objective-c

我必须编写代码从网站下载，然后每 3 秒计算一次下载的吞吐量（以字节/秒为单位）。我怎样才能做到这一点？假设我下载了网站，但是我需要将它存储在某种可变数组中，该数组存储字节，然后每 3 秒后将其长度除以 3。我可以使用什么计时器来帮助我了解吞吐量？

此外，数据需要以字节存储，所以我可以使用哪种数组类型？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:55:15.040

阅读[*URL 加载系统编程指南*](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/URLLoadingSystem/URLLoadingSystem.html#//apple_ref/doc/uid/10000165i)以了解`NSURLConnection`. 如果您只想计算“吞吐量”的简单定义，您甚至不需要存储接收到的实际字节，尽管`NSURLConnection`会这样做。您只需要计算接收到的字节数。

要测量接收文件所需的时间，请`[NSDate timeIntervalSinceReferenceDate]`在开始之前（或之后）调用`NSURLConnection`. 然后在连接完成时再次调用它。减去。不同之处在于下载持续时间（以秒为单位）。

阅读[*定时器编程主题*](http://developer.apple.com/library/ios/#Documentation/Cocoa/Conceptual/Timers/Articles/usingTimers.html)以了解`NSTimer`. 使用 1 通知您已经过去了三秒钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T05:06:57.097

阅读[NSURLConnection](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)。如果您实现它的[委托](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate)，您将在收到数据时被回调。NSURLConnection 提供了一种一次性发出请求的方法，但这种方式可以向用户呈现部分结果。

创建三个属性来保持状态：

```
@property(nonatomic, strong) NSDate *start;
@property(nonatomic, assign) NSInteger bytesSoFar;
@property(nonatomic, assign) float throughputSoFar;

- (void)start {
    NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com/"]];
    NSURLConnection *connection = [[NSURLConnection alloc] initWithRequest:request delegate:self];
}

- (void)connection:(NSURLConnection *)connection didReceiveResponse:(NSURLResponse *)response {
    self.start = [NSDate date];
}

- (void)connection:(NSURLConnection *)connection didReceiveData:(NSData *)data {
    NSDate *now = [NSDate date];
    self.bytesSoFar += [data length];
    self.throughputSoFar = self.bytesSoFar / [now timeIntervalSinceDate:self.start];
    // update the UI with progress
} 
```

当你得到 connectionDidFinishLoading 时，self.throughputSoFar 将是最终的吞吐量。

# cocoa-touch - UICollectionViewCell 的子类不显示

> ID：15756187
> 
> 赞同：5
> 
> 时间：2013-04-02T04:36:28.087
> 
> 标签：cocoa-touch, uicollectionview, uicollectionviewcell

我有一个 UICollectionView，它通过单击导航控制器中的表格单元格来显示。所以 UICollectionView 是导航控制器堆栈中的第二个屏幕。

当我注册一个笔尖并通过 UICollectionViewCell 类创建单元格时，单元格在集合视图中显示得很好。但是，一旦我尝试为单元格创建子类，集合视图就会显示为黑屏。我的项目可以在这里找到。 [链接到 Dropbox 中的项目](https://www.dropbox.com/sh/vltfnskdomkqdty/TxLzWVwJ9i)

为了继承 UICollectionViewCell，我做了以下事情：

*   为 UICollectionViewCell 的子类创建了 .h 和 .m 文件。在 nib 的属性检查器上引用了这个自定义类。

![在此处输入图像描述](https://i.stack.imgur.com/qizxP.png)

*   在显示集合视图的视图控制器的 viewDidLoad 中，使用单元格的重用标识符注册了自定义类。

    ```
    [self.collectionView registerClass:[CustomCollectionViewCell class] forCellWithReuseIdentifier:@"cvCell"]; 
    ```

*   在“collectionView：cellForItemAtIndexPath：”中创建了自定义单元格的实例

    ```
    CustomCollectionViewCell *cell = [collectionView dequeueReusableCellWithReuseIdentifier:@"cvCell" forIndexPath:indexPath]; 
    ```

从我读过的内容来看，应该这样做！但是收藏视图显示为空白，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T06:53:42.387

我检查了你的代码。你做得很完美。包含单元格的集合视图显示正确，但您看不到，因为您没有设置单元格的任何属性。只需通过设置单元格的背景颜色来检查`cellForItem`

```
 cell.backgroundColor = [UIColor redColor]; 
```

如果您在 nib 中完成了所有操作，那么您需要注册 nib 而不是类。使用`registerNib`而不是`registerClass`. 如果您要注册课程，则必须以编程方式完成所有操作。

# ios - Facebook iOS SDK 3.2.1 授权/确认授权时的空白对话框

> ID：15756190
> 
> 赞同：0
> 
> 时间：2013-04-02T04:36:47.933
> 
> 标签：ios, facebook, sdk, dialog

我正在构建一个需要与 iOS 5.0 兼容的应用程序，因此我需要包含 Facebook SDK (v3.2.1) 才能将照片发布到用户的照片中。

我已经在 Facebook 中使用所有正确的信息（id、bundle 等）设置了应用程序，在 plist 中正确设置了 URL 方案（见下面的屏幕截图），并且应用程序加载了权限对话框并显示了我的应用程序图像等。

**模拟器结果：** 显示对话框很好，但在按下“确定”时会发出警告“Safari 无法打开页面，因为地址无效”。

**设备结果 (iPad)：** 打开 Facebook 原生应用程序并显示一个对话框，但它是空白的。阅读其他论坛，我发现已经授权的应用程序存在错误，因此我从设备上的 Facebook 设置中删除了该应用程序，然后重试。这次它可以加载对话框，但是当我单击“确定”时什么也不做。

想法？

是的，我包含了这段代码（*注意 - NSLog 永远不会被调用）：

```
- (BOOL)application:(UIApplication *)application openURL:(NSURL *)url sourceApplication:(NSString *)sourceApplication annotation:(id)annotation
{
    NSLog(@"Facebook Open URL");
    return [FBSession.activeSession handleOpenURL:url];
} 
```

**列表截图：** ![在此处输入图像描述](https://i.stack.imgur.com/2hK7K.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:25:28.383

首先检查您编辑的 .plist 文件。如果您创建项目时检查了单元测试用例，那么您的项目中可能会有另一个 .plist 文件。因此，如果您修改 .plist safari 在授权后不会重定向回您的应用程序。这只是一个基本建议，因为我已经遇到了这个问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-16T03:57:05.200

检查 .plist 文件，plist safari 它可能有解决方案

# html - 尝试用css创建背景但没有运气

> ID：15756195
> 
> 赞同：1
> 
> 时间：2013-04-02T04:37:27.213
> 
> 标签：html, css

我正在尝试创建一个类似于[http://www.latlong.net/](http://www.latlong.net/)的网站背景，但我没有任何运气。这个绿色和灰色背景是一个图像还是顶部的绿色图像和灰色背景？

我找不到背景的 css 来看看他们有什么，它上面有很多额外的谷歌地图 css。

谁能看到他们在做什么来做顶部和下面灰色的条带？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T04:41:39.260

从用 Chrome 检查元素中提取；你需要：

```
body{
     background-color: rgb(235, 237, 231); /* This is #EBEDE7*/
}

header{
    background-color: rgb(215, 230, 184);    /* this is #D7E6B8*/
} 
```

工作小提琴：http: [//jsfiddle.net/shahverdy/NByX9/](http://jsfiddle.net/shahverdy/NByX9/)

### 如何找到这个？

通常，如果您想了解网页的 Html/Css 是如何工作的，最好的方法是使用*Chrome Developer Tools*等工具，而不是从源代码中读取 Html/Css 文件。其他浏览器中也有一些其他工具。

在 Chrome 中，您需要右键单击页面的任何元素并选择*检查元素*。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T04:42:09.947

您可以通过使用 Chrome 开发人员工具并检查元素来找到这一点： [https ://developers.google.com/chrome-developer-tools/](https://developers.google.com/chrome-developer-tools/)

看起来他们正在使用背景颜色和底部边框和阴影来设置标题元素的样式。

```
header {
    margin-bottom:10px;
    background-color: #D7E6B8;
    background: -moz-linear-gradient(center top , #F8F8F8, #D7E6B8) repeat scroll 0 0 transparent;
    border-bottom: 1px solid #B5B09A;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T04:42:06.777

它不是图像，而是背景颜色 css 属性。您可以执行以下操作：

```
<header>我的标题</header>

```

使用 CSS：

```
标题{背景颜色：#D7E6B8}

```

您的页面正文可以具有灰色背景的 css：

```
身体{背景颜色：#EBEDE7}

```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T04:49:30.753

里面没有背景图片，都是css背景颜色和阴影。试试下面的，

```
header {
    background: -moz-linear-gradient(center top , #F8F8F8, #D7E6B8) repeat scroll 0 0 transparent;
    border-bottom: 1px solid #B5B09A;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    margin-bottom: 10px;
}

body {
    background-color: #EBEDE7;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T04:41:55.040

我想你指的是影子。它不是灰色，而是具有高透明度的黑色。

```
box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2) 
```

这是打开的`<header>`，它也有一个纯绿色`background-color`（实际上`#D7E6B8`）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T04:45:12.753

给定页面中使用了以下类：

```
header {
    background: -moz-linear-gradient(center top , #F8F8F8, #D7E6B8) repeat scroll 0 0 transparent;
    border-bottom: 1px solid #B5B09A;
    box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
    margin-bottom: 10px;
}

body {
    background-color: #EBEDE7;
} 
```

# c - 在我的代码中，为什么缺少函数声明对于一个函数来说不是问题，但会引发另一个函数的警告？

> ID：15756196
> 
> 赞同：6
> 
> 时间：2013-04-02T04:37:30.620
> 
> 标签：c

在下面的程序中，我使用了两个函数 prd() 和 display()。在 main() 中调用它们之前，我没有在 main() 之前声明它们，并且我在 main() 之后定义了它们。然而 prd( ) 在 main() 中运行顺利，调用 display() 会显示警告“先前隐式声明 'display' 在这里”。 display() 有什么不同之处在于它有一个警告，但其他功能 prd() 没有？我一开始都没有声明它们。由于调用一个，仍然有警告，但另一个工作正常。

```
 #include<stdio.h>

    int main()
    {
        int x=8,y=11;

        printf("The product of %d & %d is %d",x,y,prd(x,y));

        display();

        return 0;
    }

    int prd(int x,int y)
    {
        return x*y;
    }

    void display()
    {
        printf("\n Good Morning");
    } 
```

PS：如果你能回答这个次要问题，我将不胜感激——“如果有定义，函数声明在 C 中根本不需要吗？”。我有在 main 之前声明程序的所有函数的习惯() 函数，然后在 main() 函数之后定义它们。我错了吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T04:42:32.673

当您使用 undeclared 时`display()`，编译器会隐式声明它，就好像它正在返回一样`int`。

当编译器最终看到 的定义时`display()`，它会看到返回类型是`void`，但它已经假定它是`int`，因此定义和隐式声明不同，因此出现错误/警告。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T04:43:50.353

发生错误是因为 C 认为所有未启动的函数的返回类型为`int`. 您的`display`函数稍后使用`void`返回类型定义。

将返回类型更改`display()`为`int`删除警告。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T04:44:31.277

默认情况下，编译器假定未声明的函数为返回`int`。

这对您的`prd`函数来说是正确的，但它与`display()`它的`void`. 这会导致编译器发出警告。

第二，声明函数总是合适的。

# c++ - 结构对齐在c中编译好，在c++中失败

> ID：15756198
> 
> 赞同：1
> 
> 时间：2013-04-02T04:37:32.057
> 
> 标签：c++, compiler-construction

我有以下关于在 gcc 4.4.6 中编译好的结构的来源：

```
struct st1
{
    char name[12];
    int heartbeat ;
    double price ;
    int iFlag ;
} ;

struct st2  {
    struct st1 ;
    char pad[64 - sizeof(struct st1)] ;
} __attribute__((aligned(64))) ;

int main (void)
{
    printf("length of struct st2=(%d)\n",sizeof(struct st2) ) ;
}

gcc -fms-extensions test1.c -o test1.exe

./test1.exe ===> length of struct st2=(64) 
```

我将 test1.c 复制到 test1.cpp 并尝试编译为：

```
g++ -fms-extensions test1.cpp -o test1.exe 
```

然后我得到了：

test1.cpp:23: 错误: sizeof 对不完整类型 st2::st1 的无效应用

我知道这个错误显示 char pad[64 - sizeof(struct st1)] ；在 g++ 中不起作用，虽然它在 gcc 中起作用，如果我喜欢它在 g++ 中起作用，我该怎么办？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:42:37.043

在您的结构 st2 中：

```
struct st1 ; 
```

这是 a 的前向声明`struct st1`。在这里，您基本上是在对您的编译器说：“嘿，在（因此是）`struct st1`的命名空间中有 a ，但我不会给您它的属性！” 由于您没有提供其属性，编译器将引发“不完整类型”错误：它无法知道此类型的大小，因此无法解析您的.`struct st2``st2::st1``sizeof`

如果你想在你的 中有一个你的实例`struct st1`，`struct st2`你应该写：

```
struct st1 my_variable_name; 
```

这将有效地`struct st1`在您的`struct st2`.

如果您不想要您的实例`struct st1`，`struct st2`只需删除此行 - 您的编译器已经知道`struct st1`, 因为它已在上面声明。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:43:48.133

删除“结构”并使用 sizeof(st1)。通过添加“struct”，您是在告诉编译器在 st2 的范围内定义一个新的 struct st1。因此为什么它说“st2::st1”。

# java - 在 java 代码中创建用于发送电子邮件的模板

> ID：15756205
> 
> 赞同：1
> 
> 时间：2013-04-02T04:38:17.007
> 
> 标签：java, email

我的申请需要发送电子邮件。我创建了一个表单，提交时会向所需的邮件 ID 发送电子邮件。我能够成功发送邮件。现在我想创建一个使用令牌发送邮件的标准模板。无论我想在哪里包含值，我都应该能够使用变量发送它们。现在我将它作为字符串发送。

使用 StringTokenizer 有用吗？或者还有其他方法吗？

我想将它包含在我的动作课中..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:45:06.930

[Freemarker](http://freemarker.sourceforge.net/)是一个出色的模板引擎，它非常适合生成电子邮件内容。它有一个轻微的学习曲线，但您将能够使用真实变量（就像模板应该允许您做的那样），而不是将所有内容放入`StringTokenizer`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:41:53.987

我建议您为您的邮件使用 Velocity 模板。见这里[http://velocity.apache.org/](http://velocity.apache.org/)

在此您必须创建一个模板文件，您可以在其中编写所需的任何文本格式以及占位符。使用速度 api 加载模板文件并传递占位符。您还可以在模板文件中执行动态操作，例如循环等。

# jquery - 在 Jquery UI Tabs Plugin 中定位 div 和 image 的问题

> ID：15756206
> 
> 赞同：1
> 
> 时间：2013-04-02T04:38:26.843
> 
> 标签：jquery, jquery-ui, jquery-tabs, jquery-widgets

我已经从

> [http://jqueryui.com/tabs/](http://jqueryui.com/tabs/)

当我使用下一个代码时，一切都很完美：

```
<div id="tabs">
  <ul>
    <li><a href="#tab1">Tab 1</a></li>
    <li><a href="#tab2">Tab 2</a></li>
    <li><a href="#tab3">Tab 3</a></li>
    <li><a href="#tab4">Tab 4</a></li>
  </ul>
  <div id="tab1">
      <div id="red_div"></div>
  </div>
  <div id="tab2">
    <img src="img_path_here.jpg" />
    Image Test
  </div>
  <div id="tab3">
        Tab 3
  </div>
  <div id="tab4">
    Tab 4
  </div>
</div>
<script type="text/javascript">
            $(document).ready(function(){
                $(function() {
                  $( "#tabs" ).tabs();
                });
            });
</script> 
```

red_div 的 CSS：

```
#red_div {
    width: 300px;
    height: 300px;
    background-color: red;
} 
```

但是当我为图像添加对齐属性时，比如

```
<img src="img_path_here.jpg" align="left" /> 
```

或者当我为 div#red_div 添加 float 属性时

```
#red_div {
    ...
    float: left;
} 
```

我有定位问题。他们不在这个地方，他们应该在。他们越过了底线。图片将更好地描述这一点。

```
http://i.stack.imgur.com/efFnK.jpg
http://i.stack.imgur.com/MLWJu.jpg 
```

如果我真的需要对 div 使用 float 并为图像使用 align，我该如何摆脱这个问题？谢谢。

**更新：** 我在 JSFiddle 上发布了这个问题：http: [//jsfiddle.net/q6F7r/](http://jsfiddle.net/q6F7r/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:12:03.670

尝试将浮动（和宽度）添加到“主 div”。

```
.ui-tabs {float:left; width:100%;} 
```

[http://jsfiddle.net/q6F7r/6/](http://jsfiddle.net/q6F7r/6/)

# java - java多图形

> ID：15756210
> 
> 赞同：2
> 
> 时间：2013-04-02T04:38:35.980
> 
> 标签：java, graphics, graph, components, awt

好的，所以我一直在研究这段代码，它显示了排序算法是如何工作的。现在我让它工作，它用相同的排序对多个图进行排序，但我需要每个图同时进行不同的排序。几天来我一直在研究并试图解决这个问题，现在我只有隧道视野。如果我的解释令人困惑，我会发布我的代码。我觉得这可以使很多使用 java 图形的人受益，任何帮助将不胜感激。

```
import java.applet.Applet;
import java.awt.*;
import java.awt.event.*;
import java.util.Random;
import java.util.StringTokenizer;
import java.util.Scanner;

public class Sort extends Applet {

/** Constructor. Only for starting the sorting animation as applet. */
public Sort() {}

/** For starting the sorting animation as application. */
public static void main(String[] argv) {
    Frame _aFrame = new Frame("Sort Animations");
    _aFrame.setBackground(Color.white);
    _aFrame.setPreferredSize(new Dimension(2700,1000)); 

    Scanner in = new Scanner(System.in);
    int sizeOfArray;
    System.out.println("How many numbers do you want to sort?");
    sizeOfArray = in.nextInt();

    _aFrame.addWindowListener(
                              new WindowAdapter() {
        public void windowClosing(WindowEvent e) { System.exit(0); }
    }
                              );

    _aFrame.setLayout(new BorderLayout());
    _aFrame.add(new SortPanel(sizeOfArray));
    _aFrame.pack();
    _aFrame.setVisible(true);
}

}

class SortPanel extends Panel implements Runnable {

/** button triggering the sort animation */
private Button aSortButton_    = new Button("sort");
/** choice item for selecting the sort algorithm */
private Choice aChoice_ = new Choice();
/** component for handling the animation */
private ArrayCanvas anArrayCanvas_;

/////////////////////////////////////////////////////////////////////////////

/**
 * Constructor.
 *
 * @param length    no of elements of the array
 * @param aBarColor the color the elements representing bars will be drawn in
 *
 * @exception IllegalArgumentException if the array <code>length</code> is
 *            to big to display (ie <code>length</code> is bigger than
 *            <code>BAR_WIDTH</code> or <code>BAR_HEIGHT</code>).
 */
public SortPanel(int arraySize) {
    setLayout(new BorderLayout());

    aSortButton_.addActionListener(
                new     ActionListener() {
        public void actionPerformed(ActionEvent e) {
            new Thread(SortPanel.this).start();
        }
    }
                );

    anArrayCanvas_ = new ArrayCanvas(arraySize);
    for (int i=0; i<ArrayCanvas.SORT_NAMES.length; ++i)
        aChoice_.add(ArrayCanvas.SORT_NAMES[i]);

    // add buttons at top:
    Panel _aTopPanel = new Panel();
    _aTopPanel.add(aSortButton_);
    add(_aTopPanel, BorderLayout.NORTH);

    // add choice and ArrayCanvas below:
    Panel _aPanel = new Panel();
    _aPanel.setLayout(new BorderLayout());
    Panel _aChoicePanel = new Panel();
    _aChoicePanel.add(aChoice_);
    _aPanel.add(_aChoicePanel, BorderLayout.NORTH);
    _aPanel.add(anArrayCanvas_, BorderLayout.CENTER);

    add(_aPanel, BorderLayout.CENTER);

    Panel _aBottomPanel = new Panel();
    add(_aBottomPanel, BorderLayout.SOUTH);
}

/////////////////////////////////////////////////////////////////////////////

/** Runs the sorting animation. */
public void run() {
    aSortButton_.setEnabled(false);
    double time = System.currentTimeMillis();
    anArrayCanvas_.sort(aChoice_.getSelectedItem());
    aSortButton_.setEnabled(true);
}
}

class ArrayCanvas extends Canvas {

/** Labels of available sorting algorithms. */
public final static String[] SORT_NAMES = { "bubble sort", "insertion sort", "shell  sort", "heap sort", "merge sort", "quick sort",};

/** offset between bars and border in x-directions (left and right) */
public final static int OFFSET_X         = 5;
/** offset between bars and border in y-directions (top and bottom) */
public final static int OFFSET_Y         = 5;
/** horizontal size of all bars together */
public final static int BAR_WIDTH        = 350;
/** (max) vertical horizontal size of bars together */
public final static int BAR_HEIGHT       = 250;
/** milliseconds to sleep after a swap in the sorting animation */
public final static int SLEEP_AFTER_SWAP = 20;

/** used for random permutation of the array elements */
private static Random aRandom_ = new Random(System.currentTimeMillis());
/** the array to display */
private int[] anArrayOfInt_;
/** offscreen buffer */
private Image image_;
/** graphics of the offscreen buffer */
private Graphics offscreenGraphics_;

/////////////////////////////////////////////////////////////////////////////

/**
 * Constructor.
 *
 * @param length    no of elements of the array
 *
 * @exception IllegalArgumentException if the array <code>length</code> is
 *            to big to display (ie <code>length</code> is bigger than
 *            <code>BAR_WIDTH</code> or <code>BAR_HEIGHT</code>).
 */
public ArrayCanvas(int length) {
    if (length > BAR_WIDTH || length > BAR_HEIGHT)
        throw new IllegalArgumentException("array to big: "+length);
    anArrayOfInt_ = new int[length];
    for (int i=0; i<length; ++i)
        anArrayOfInt_[i] = i+1;
    permute();
    addMouseListener(
                     new MouseAdapter() {
        public void mouseClicked(MouseEvent e) {
            repaint();
        }
    }
                     );
}

/////////////////////////////////////////////////////////////////////////////

// overloaded for double buffering
public void update(Graphics aGraphics) {
    paint(aGraphics);
}

/** displays the array */
public void paint(Graphics aGraphics) {
    int _deltaX = 0;
    int w = BAR_WIDTH / anArrayOfInt_.length;
    if (w > 1) {
        --w;
        ++_deltaX;
    }
    int _heightFactor = BAR_HEIGHT / anArrayOfInt_.length;
    if (offscreenGraphics_ == null) {
        image_ = createImage(getSize().width, getSize().height);
        offscreenGraphics_ = image_.getGraphics();
    }

    offscreenGraphics_.setColor(getBackground());
    offscreenGraphics_.fillRect(0, 0, getSize().width-1, getSize().height-1);

    offscreenGraphics_.setColor(Color.black);
    //offscreenGraphics_.drawRect(0, 0, getSize().width-1, getSize().height-1);
    offscreenGraphics_.translate(OFFSET_X, OFFSET_Y);
    for (int i=0; i<anArrayOfInt_.length; ++i) {
        int h = _heightFactor*anArrayOfInt_[i];
        offscreenGraphics_.setColor(Color.blue);
        offscreenGraphics_.fillRect((w+_deltaX)*i, BAR_HEIGHT-h, w, h);
        if(anArrayOfInt_[i]==(i+1)){
            offscreenGraphics_.setColor(Color.red);
            offscreenGraphics_.fillRect((w+_deltaX)*i, BAR_HEIGHT-h, w, _heightFactor);
        }
    }

    offscreenGraphics_.translate(-OFFSET_X, -OFFSET_Y);
    aGraphics.drawImage(image_, 0, 0, this);
    aGraphics.drawImage(image_, 475, 0, this);
    aGraphics.drawImage(image_, 950, 0, this);
    aGraphics.drawImage(image_, 0, 350, this);
    aGraphics.drawImage(image_, 475, 350, this);
    aGraphics.drawImage(image_, 950, 350, this);

}

public Dimension getMinimumSize() {
    return new Dimension(BAR_WIDTH+2*OFFSET_X, BAR_HEIGHT+2*OFFSET_Y);
}

public Dimension getPreferredSize() {
    return getMinimumSize();
}

///////////////////////////////////////////////////

/** random permutation of array entries */
public void permute() {
    for (int i=anArrayOfInt_.length-1; i>0; --i) {
        int j = Math.abs(aRandom_.nextInt()) % (i+1);
        swap(anArrayOfInt_,i,j);
    }
}

/** animated sort */
public void sort(String aSortNameString) {
    mySort(aSortNameString);
}

///////////////////////////////////////////////////

private void mySort(String aSortNameString) {

    if (aSortNameString.equals("bubble sort")) {
        bubbleSort(anArrayOfInt_);

    }

    if (aSortNameString.equals("insertion sort")) {
        insertionSort(anArrayOfInt_);
    }

    if (aSortNameString.equals("selection sort")) {
        selectionSort(anArrayOfInt_);
    }

    if (aSortNameString.equals("shell sort")) {
        shellSort(anArrayOfInt_);

    }
    if (aSortNameString.equals("heap sort")) {
        heapSort(anArrayOfInt_);

    }
    if (aSortNameString.equals("merge sort")) {
        mergeSort(anArrayOfInt_, 0, anArrayOfInt_.length-1);

    }
    if (aSortNameString.equals("quick sort")) {
        qSort(anArrayOfInt_, 0, anArrayOfInt_.length-1);

    }

}

/**
 * swaps the two array elements, redisplays the array in its canvas,
 * and waits a moment.
 */
private void swap(int[] anArrayOfInt, int i, int j) {
    int x = anArrayOfInt[i];
    anArrayOfInt[i] = anArrayOfInt[j];
    anArrayOfInt[j] = x;
    repaint();
    try { Thread.sleep(SLEEP_AFTER_SWAP); } catch (InterruptedException e) {}
}

/////////////////////////////////////////////////////////////////////////////
//                          SORTING ALGORITHMS                             //
/////////////////////////////////////////////////////////////////////////////

/** bubble sort */
private void bubbleSort(int[] anArrayOfInt) {
    for (int i=0; i<anArrayOfInt.length; ++i)
        for (int j=1; j<anArrayOfInt.length-i; ++j)
            if (anArrayOfInt[j-1]>anArrayOfInt[j]) {
                swap(anArrayOfInt, j-1, j);
            }
}

/** insertion sort */
private void insertionSort(int[] anArrayOfInt) {
    for (int i=0; i<anArrayOfInt.length; ++i)
        for (int j=i-1; j>=0 && anArrayOfInt[j]>anArrayOfInt[j+1]; --j)
            swap(anArrayOfInt, j, j+1);
}

/** selection sort */
private void selectionSort(int[] anArrayOfInt) {
    for (int i=0; i<anArrayOfInt.length-1; ++i) {
        for (int j=i+1; j<anArrayOfInt.length; ++j)
            if (anArrayOfInt[j] < anArrayOfInt[i])
                swap(anArrayOfInt, i, j);
    }
}

/** shell sort */
private void shellSort(int[] anArrayOfInt) {
    // TODO: calculate needed STEPS-elements instead of using an array
    //       (STEPS[i+1] = 3*STEPS[i]+1)
    for (int i=0; i<STEPS.length; ++i) {
        int _delta = STEPS[i];
        if (_delta >= anArrayOfInt.length)
            continue;
        for (int j=_delta; j<anArrayOfInt.length; ++j)
            for (int k=j; k-_delta>=0 && anArrayOfInt[k]<anArrayOfInt[k-  _delta];
                 k-=_delta)
                swap(anArrayOfInt, k, k-_delta);
    }
}

/** used by shell sort */
private final static int[] STEPS = { 1093, 364, 121, 40, 13, 4, 1 };

/** heap sort */
private void heapSort(int[] anArrayOfInt) {
    int r = anArrayOfInt.length-1;
    for (int l = anArrayOfInt.length/2 ; l>=0; --l)
        sift(anArrayOfInt, l, r);
    while (r > 0) {
        swap(anArrayOfInt, 0, r);
        sift(anArrayOfInt, 0, --r);
    }
}

/** auxiliary function for heap sort. */
private void sift(int[] anArrayOfInt, int l, int r) {
    if (r==l)
        return;
    int i = l, j = 2*l;
    int x = anArrayOfInt[i];
    if (j<r && anArrayOfInt[j]<anArrayOfInt[j+1])
        ++j;
    while (j<=r && x<=anArrayOfInt[j]) {
        swap(anArrayOfInt, i, j);
        i = j; j = 2*j;
        if (j<r && anArrayOfInt[j]<anArrayOfInt[j+1])
            ++j;
    }
}

/** quick sort (pivot=(l+r)/2)*/
private void qSort(int[] anArrayOfInt, int l, int r) {
    if (l >= r)
        return;
    swap(anArrayOfInt, l, (l+r)/2); // TODO: more clever pivot
    int _last = l;
    for (int i=l+1; i<=r; ++i)
        if (anArrayOfInt[i] < anArrayOfInt[l])
            swap(anArrayOfInt, ++_last, i);
    swap(anArrayOfInt, l, _last);
    qSort(anArrayOfInt, l, _last-1);
    qSort(anArrayOfInt, _last+1, r);
}

/** merge sort */
private void mergeSort(int[] anArrayOfInt, int l, int r) {
    int[][] B = new int[2][r+1];
    mergeSort16(anArrayOfInt, B, l, r);
}

private void mergeSort16(int[] anArrayOfInt, int[][] B, int l, int r) {
    if (l >= r)
        return;
    int _last = (l+r)/2;
    mergeSort16(anArrayOfInt, B, l, _last);
    mergeSort16(anArrayOfInt, B, _last+1, r);
    merge6(anArrayOfInt, B, l, _last, r);
}
/** auxiliary function for merge sort */
protected void merge6(int[] anArrayOfInt, int[][] B, int l, int q, int r) {
    for (int i=l;i<=q;i++) {
        B[0][i] = i;
        B[1][i] = i;
    }
    for (int i=r;i>q;i--) {
        B[0][i] = r+q+1-i;
        B[1][i] = r+q+1-i;
    }
    int i = l;
    int j = r;
    for (int k=l; k<r;k++) {
        int s = B[0][i];
        int t = B[0][j];
        if (anArrayOfInt[s]<=anArrayOfInt[t]) {
            i++;
        } else {
            s = t;
            j--;
        }
        swap(anArrayOfInt, s, k);
        t = B[1][k];
        B[0][t] = s;
        B[1][s] = t;
    }
}

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T04:50:33.470

对于每个排序图，您需要某种模型，它应该保存每个排序的当前状态。这可能意味着将您的`int`s 列表添加到每个排序的单独列表中。

您还需要某种机制，允许您循环遍历每个排序算法并告诉它移动到其算法的下一步，从而允许您控制每个排序算法何时更新，从而控制屏幕何时更新。

**更新**

根据 OP 的评论，基本上，我已经将排序算法作为一个单独的接口撕掉了。每个算法都需要从这个接口扩展，但它提供了允许 UI 呈现排序动画的基本要求。

Bellow 是基本实现，虽然它基于 Swing，但如果需要，让它与 AWT 一起工作并不难。

![在此处输入图像描述](https://i.stack.imgur.com/SprIB.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class TestSort {

    public static void main(String[] args) {
        new TestSort();
    }

    public TestSort() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                SortPane sortPane = new SortPane();
                int values[] = new int[10];
                for (int index = 0; index < values.length; index++) {
                    values[index] = (int)Math.round(Math.random() * 100f);
                }
                BubbleSort sorter = new BubbleSort(values);
                sortPane.setSorter(sorter);

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new BorderLayout());
                frame.add(sortPane);
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);
                sorter.sort();
            }
        });
    }

    public class SortPane extends JPanel {

        private Sorter sorter;
        private ChangeHandler changeHandler;
        private int maxValue;

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            int values[] = getSorter().getValues();
            int width = getWidth() - 1;
            int height = getHeight() - 1;
            int colWidth = Math.round((float)width / (float)values.length);
            int x = 0;
            Color fill = Color.YELLOW;
            Color highlight = null;
            switch (getSorter().getState()) {
                case Sorting:
                    fill = Color.BLUE;
                    highlight = Color.RED;
                    break;
                case Done:
                    fill = Color.GREEN;
                    break;
            }
            for (int index = 0; index < values.length; index++) {
                g2d.setColor(fill);
                int value = values[index];
                int colHeight = (int)((float)height * ((float)value / (float)maxValue));
                g2d.fillRect(x, height - colHeight, colWidth - 1, colHeight);
                if (getSorter().isActiveIndex(index) && highlight != null) {
                    g2d.setColor(highlight);
                    g2d.drawRect(x, height - colHeight, colWidth - 1, colHeight);
                }
                x += colWidth;
            }
            g2d.dispose();
        }

        public Sorter getSorter() {
            return sorter;
        }

        public void setSorter(Sorter value) {
            if (sorter != value) {
                if (sorter != null) {
                    sorter.removeChangeListener(getChangeHandler());
                }
                sorter = value;
                if (sorter != null) {
                    sorter.addChangeListener(getChangeHandler());
                    maxValue = 0;
                    for (int intValue : sorter.getValues()) {
                        maxValue = Math.max(maxValue, intValue);
                    }
                }
                repaint();
            }
        }

        public ChangeHandler getChangeHandler() {
            if (changeHandler == null) {
                changeHandler = new ChangeHandler();
            }
            return changeHandler;
        }

        public class ChangeHandler implements ChangeListener {
            @Override
            public void stateChanged(ChangeEvent e) {
                repaint();
            }
        }

    }

    public interface Sorter {

        public enum State {
            Waiting,
            Sorting,
            Done
        }

        public void addChangeListener(ChangeListener listener);
        public void removeChangeListener(ChangeListener listener);
        public int[] getValues();
        public void sort();
        public State getState();
        public boolean isActiveIndex(int index);
    }

    public abstract class AbstracSorter implements Sorter {

        private List<ChangeListener> listeners;
        private int[] values;
        private State state = State.Waiting;
        private List<Integer> activeIndices;

        public AbstracSorter(int[] values) {
            this.values = values;
            listeners = new ArrayList<>(25);
            activeIndices = new ArrayList<>(2);
        }

        @Override
        public State getState() {
            return state;
        }

        public void setState(State value) {
            if (value != state) {
                state = value;
                fireStateChanged();
            }
        }

        @Override
        public int[] getValues() {
            return values;
        }

        @Override
        public void addChangeListener(ChangeListener listener) {
            listeners.add(listener);
        }

        @Override
        public void removeChangeListener(ChangeListener listener) {
            listeners.remove(listener);
        }

        protected void fireStateChanged() {
            if (listeners.size() > 0) {
                ChangeEvent evt = new ChangeEvent(this);
                for (ChangeListener listener : listeners) {
                    listener.stateChanged(evt);
                }
            }
        }

        @Override
        public boolean isActiveIndex(int index) {
            return activeIndices.contains(index);
        }

        protected void setActiveIndicies(int lower, int upper) {
            activeIndices.clear();
            activeIndices.add(lower);
            activeIndices.add(upper);
            fireStateChanged();
        }

        protected void swap(int[] anArrayOfInt, int i, int j) {
            setActiveIndicies(i, j);
            int x = anArrayOfInt[i];
            anArrayOfInt[i] = anArrayOfInt[j];
            anArrayOfInt[j] = x;
            fireStateChanged();
        }
    }

    public class BubbleSort extends AbstracSorter {

        private int outter = 0;
        private int inner = 0;

        public BubbleSort(int[] values) {
            super(values);
        }

        @Override
        public void sort() {
            setState(State.Sorting);
            outter = 0;
            inner = 1;
            Timer timer = new Timer(250, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    int[] values = getValues();
                    inner++;
                    if (inner >= values.length - outter) {
                        outter++;
                        inner = 1;
                    }

                    if (outter < values.length) {
                        if (values[inner - 1] > values[inner]) {
                            swap(values, inner - 1, inner);
                        } else {
                            setActiveIndicies(inner - 1, inner);
                        }
                    } else {
                        ((Timer)e.getSource()).stop();
                        setState(State.Done);
                    }
                }
            });
            timer.setRepeats(true);
            timer.start();
        }
    }
} 
```

**使用源数组的示例**

```
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.Graphics;
import java.awt.Graphics2D;
import java.awt.GridLayout;
import java.awt.Insets;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.util.ArrayList;
import java.util.List;
import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.Timer;
import javax.swing.UIManager;
import javax.swing.UnsupportedLookAndFeelException;
import javax.swing.border.CompoundBorder;
import javax.swing.border.EmptyBorder;
import javax.swing.border.LineBorder;
import javax.swing.event.ChangeEvent;
import javax.swing.event.ChangeListener;

public class TestSort {

    public static void main(String[] args) {
        new TestSort();
    }
    private List<Sorter> sorters;

    public TestSort() {
        EventQueue.invokeLater(new Runnable() {
            @Override
            public void run() {
                try {
                    UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
                } catch (ClassNotFoundException | InstantiationException | IllegalAccessException | UnsupportedLookAndFeelException ex) {
                }

                sorters = new ArrayList<>(2);
                int values[] = new int[10];
                for (int index = 0; index < values.length; index++) {
                    values[index] = (int) Math.round(Math.random() * 100f);
                }

                JFrame frame = new JFrame("Testing");
                frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
                frame.setLayout(new GridLayout(0, 2));
                frame.add(createBubbleSortPane(values));
                frame.add(createBubbleSortPane(values));
                frame.pack();
                frame.setLocationRelativeTo(null);
                frame.setVisible(true);

                for (Sorter sorter : sorters) {
                    sorter.sort();
                }
            }
        });
    }

    protected SortPane createBubbleSortPane(int[] values) {
        SortPane sortPane = new SortPane();
        BubbleSort sorter = new BubbleSort(values);
        sortPane.setSorter(sorter);

        sortPane.setBorder(new CompoundBorder(new LineBorder(Color.GRAY), new EmptyBorder(8, 8, 8, 8)));

        sorters.add(sorter);

        return sortPane;
    }

    public class SortPane extends JPanel {

        private Sorter sorter;
        private ChangeHandler changeHandler;
        private int maxValue;

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(200, 200);
        }

        @Override
        protected void paintComponent(Graphics g) {
            super.paintComponent(g);
            Graphics2D g2d = (Graphics2D) g.create();
            int values[] = getSorter().getValues();
            Insets insets = getInsets();
            int width = getWidth() - 1 - (insets.left + insets.right);
            int height = getHeight() - 1 - (insets.top + insets.bottom);
            int colWidth = Math.round((float) width / (float) values.length);
            int x = insets.left;
            Color fill = Color.YELLOW;
            Color highlight = null;
            switch (getSorter().getState()) {
                case Sorting:
                    fill = Color.BLUE;
                    highlight = Color.RED;
                    break;
                case Done:
                    fill = Color.GREEN;
                    break;
            }
            for (int index = 0; index < values.length; index++) {
                g2d.setColor(fill);
                int value = values[index];
                int colHeight = (int) ((float) height * ((float) value / (float) maxValue));
                g2d.fillRect(x, insets.top + height - colHeight, colWidth - 1, colHeight);
                if (getSorter().isActiveIndex(index) && highlight != null) {
                    g2d.setColor(highlight);
                    g2d.drawRect(x, insets.top + height - colHeight, colWidth - 1, colHeight);
                }
                x += colWidth;
            }
            g2d.dispose();
        }

        public Sorter getSorter() {
            return sorter;
        }

        public void setSorter(Sorter value) {
            if (sorter != value) {
                if (sorter != null) {
                    sorter.removeChangeListener(getChangeHandler());
                }
                sorter = value;
                if (sorter != null) {
                    sorter.addChangeListener(getChangeHandler());
                    maxValue = 0;
                    for (int intValue : sorter.getValues()) {
                        maxValue = Math.max(maxValue, intValue);
                    }
                }
                repaint();
            }
        }

        public ChangeHandler getChangeHandler() {
            if (changeHandler == null) {
                changeHandler = new ChangeHandler();
            }
            return changeHandler;
        }

        public class ChangeHandler implements ChangeListener {

            @Override
            public void stateChanged(ChangeEvent e) {
                repaint();
            }
        }
    }

    public interface Sorter {

        public enum State {

            Waiting,
            Sorting,
            Done
        }

        public void addChangeListener(ChangeListener listener);

        public void removeChangeListener(ChangeListener listener);

        public int[] getValues();

        public void sort();

        public State getState();

        public boolean isActiveIndex(int index);
    }

    public abstract class AbstracSorter implements Sorter {

        private List<ChangeListener> listeners;
        private int[] values;
        private State state = State.Waiting;
        private List<Integer> activeIndices;

        public AbstracSorter(int[] values) {
            this.values = new int[values.length];
            System.arraycopy(values, 0, this.values, 0, values.length);
            listeners = new ArrayList<>(25);
            activeIndices = new ArrayList<>(2);
        }

        @Override
        public State getState() {
            return state;
        }

        public void setState(State value) {
            if (value != state) {
                state = value;
                fireStateChanged();
            }
        }

        @Override
        public int[] getValues() {
            return values;
        }

        @Override
        public void addChangeListener(ChangeListener listener) {
            listeners.add(listener);
        }

        @Override
        public void removeChangeListener(ChangeListener listener) {
            listeners.remove(listener);
        }

        protected void fireStateChanged() {
            if (listeners.size() > 0) {
                ChangeEvent evt = new ChangeEvent(this);
                for (ChangeListener listener : listeners) {
                    listener.stateChanged(evt);
                }
            }
        }

        @Override
        public boolean isActiveIndex(int index) {
            return activeIndices.contains(index);
        }

        protected void setActiveIndicies(int lower, int upper) {
            activeIndices.clear();
            activeIndices.add(lower);
            activeIndices.add(upper);
            fireStateChanged();
        }

        protected void swap(int[] anArrayOfInt, int i, int j) {
            setActiveIndicies(i, j);
            int x = anArrayOfInt[i];
            anArrayOfInt[i] = anArrayOfInt[j];
            anArrayOfInt[j] = x;
            fireStateChanged();
        }
    }

    public class BubbleSort extends AbstracSorter {

        private int outter = 0;
        private int inner = 0;

        public BubbleSort(int[] values) {
            super(values);
        }

        @Override
        public void sort() {
            setState(State.Sorting);
            outter = 0;
            inner = 1;
            Timer timer = new Timer(250, new ActionListener() {
                @Override
                public void actionPerformed(ActionEvent e) {
                    int[] values = getValues();
                    inner++;
                    if (inner >= values.length - outter) {
                        outter++;
                        inner = 1;
                    }

                    if (outter < values.length) {
                        if (values[inner - 1] > values[inner]) {
                            swap(values, inner - 1, inner);
                        } else {
                            setActiveIndicies(inner - 1, inner);
                        }
                    } else {
                        ((Timer) e.getSource()).stop();
                        setState(State.Done);
                    }
                }
            });
            timer.setRepeats(true);
            timer.start();
        }
    }
} 
```

**示例插入排序器**

这是使用 a`Thread`作为主要排序引擎而不是 Swing的示例`Timer`

```
public class InsertionSorter extends AbstracSorter {

    public InsertionSorter(int[] values) {
        super(values);
    }

    @Override
    public void sort() {
        setState(State.Sorting);
        new Thread(new SortRunnable()).start();
    }

    @Override
    protected void swap(int[] anArrayOfInt, int i, int j) {
        setActiveIndicies(i, j);
        int x = anArrayOfInt[i];
        anArrayOfInt[i] = anArrayOfInt[j];
        anArrayOfInt[j] = x;
        try {
            SwingUtilities.invokeAndWait(new Runnable() {
                @Override
                public void run() {
                    fireStateChanged();
                }
            });
        } catch (InterruptedException | InvocationTargetException exp) {
            exp.printStackTrace();
        }
    }

    public class SortRunnable implements Runnable {

        @Override
        public void run() {
            int[] values = getValues();
            for (int i = 0; i < values.length; ++i) {
                for (int j = i - 1; j >= 0 && values[j] > values[j + 1]; --j) {
                    try {
                        Thread.sleep(250);
                    } catch (InterruptedException ex) {
                    }
                    swap(values, j, j + 1);
                }
            }
            SwingUtilities.invokeLater(new Runnable() {
                @Override
                public void run() {
                    setState(State.Done);
                }
            });
        }
    }
} 
```

# sql - 在具有相似属性的不同数据库模式之间进行转换

> ID：15756211
> 
> 赞同：2
> 
> 时间：2013-04-02T04:38:36.817
> 
> 标签：sql, database, database-schema

是否可以在两个不同的数据库模式之间进行转换，可能使用不同的 DBMS，以便用户可以查询中间模式表示，并将查询转换为底层 sql 查询以返回结果。

一个例子

```
Underlying database      Intermediate Representation
--------------------    --------------
| _____   _____   |     |  _______  |
|| Men | |Women|  |     | |People | |
||-----| |-----|  |     | |-------| |
||Name:| |Name:|  |---->| |Name:  | |
||Age: | |Age: |  |     | |Age:   | |
||_____| |_____|  |     | |Gender:| |
|                 |     | |_______| | 
|_________________|     |___________| 
```

我想查询中间表示，例如

```
SELECT * FROM People WHERE Gender == "Male"; 
```

在底层数据库上转换为

```
SELECT * FROM Men; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-25T03:46:18.130

```
create table men (
  name varchar(255) primary key,
  age smallint not null
);

create table women (
  name varchar(255) primary key,
  age smallint not null
);

create view people as 
  select
    name,
    age,
    'Male' as gender
  from men
  union
  select
    name,
    age,
    'Female' as gender
  from women; 
```

Querying:

```
insert into men values ('John', 25);
insert into women values ('Jane', 25);

select * from people where gender = 'Male'; 
```

Result:

```
Name  Age  Gender
John  25   Male 
```

Fiddle with it:

[http://sqlfiddle.com/#!15/85939/2](http://sqlfiddle.com/#!15/85939/2)

# c# - 网格视图中的复选框

> ID：15756217
> 
> 赞同：2
> 
> 时间：2013-04-02T04:39:19.333
> 
> 标签：c#, gridview, checkbox

我的gridview有问题 - 基本上我想在每一行都有一个复选框，并且能够检查某些行并在点击“提交”后将这个更新到数据库中我在模板字段中有一个复选框：

```
 <asp:TemplateField HeaderText="Approve?">
    <ItemTemplate>
    <asp:CheckBox ID="ckbxApprove" runat="server" />
    </ItemTemplate>
    </asp:TemplateField> 
```

在代码结尾：

```
protected void btnSubmit_OnClick(object sender, EventArgs e)
{
foreach (GridViewRow oRow in GridView1.Rows)
 {
 CheckBox bchecked = (CheckBox)oRow.FindControl("ckbxApprove");
  if (bchecked.Checked)
  {
//Do something
  }
}
} 
```

但是，如果我在我的 gridview 中选中复选框并点击提交按钮，则没有一个复选框被标记为“已选中”谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:41:55.003

您的代码看起来不错，您可能会在 page_load 事件的回发时再次绑定网格。回发时失去控件状态的常见原因之一是未绑定 IsPostBack 块中的控件。

```
if(!Page.IsPostBack)
{
     // bind grid here
} 
```

# .net - 在 ConcurrencyMode.Single 模式下使用 Tibco EMS WCF 重复 ACK

> ID：15756219
> 
> 赞同：1
> 
> 时间：2013-04-02T04:39:23.977
> 
> 标签：.net, wcf, jms, tibco, tibco-ems

我们目前有一个问题，我们已将 WCF 服务设置为连接到 tibco EMS 服务器。在单实例模式下运行服务时（由于应用程序的运行方式，我们无法更改此设置）它总是会首先确认 2 条消息，即使它只处理了一条 - 这会导致一些消息被跳过。

```
[ServiceBehavior(
    ConcurrencyMode = ConcurrencyMode.Single,
    InstanceContextMode = InstanceContextMode.Single,
    Namespace = "http://tempuri.org/test")]
public class MyService : IMyService 
```

我已经逐步浏览了 Tibco EMS WCF 代码，可以看到私有 _deliveredList 字段中的底层 TIBCO.EMS.Session 类中有 2 条消息，即使我只处理了一条消息，它们都标记为需要 ACK。队列上有多少消息似乎并不重要，如果长度大于一，它总是会双重确认。

我使用以下配置应用了限制，但它似乎对发送的初始消息数量没有任何影响。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-14T03:08:17.140

看起来这只是 Tibco 在处理 CLIENT_ACKNOWLEDGE 时使用 WCF 组件实现的一个糟糕的实现。由于会话对象是抽象的，因此您无法真正确认您无权访问的内容。

选项如下：

*   将队列上的预取设置设置为 1
*   使用 EXPLICIT_CLIENT_ACKNOWLEDGE

还有一个陷阱，如果您在没有 ACK 的情况下抛出异常，它将卡在队列中。

# android - Android 位图内存问题 - 错误：8294416 字节分配内存不足

> ID：15756221
> 
> 赞同：11
> 
> 时间：2013-04-02T04:39:37.597
> 
> 标签：android, bitmap, imageview, out-of-memory, heap-memory

我目前正在开发一个通过故事的应用程序。故事包含“场景”，其中包含通过 ImageView 显示的多个 JPEG 和 PNG 文件。我创建 ImageView 并通过以下函数将其添加到布局中：

```
private ImageView newImage(Show show)
{
    ImageView iv = new ImageView(this);
    String filePath = comin.generateFilePath(show);
    Log.i(TAG, "newImage, filePath = " + filePath + " id = " + show.id);
    WeakReference<Bitmap> bmp = new WeakReference<Bitmap>(scaleBitmap(filePath)); //added 4/1/13
    //Bitmap bmp = scaleBitmap(filePath);
    Log.i(TAG, "newImage, width = " + bmp.get().getWidth() + ", height = " + bmp.get().getHeight());
    iv.setImageBitmap(bmp.get());
    iv.setScaleType(ImageView.ScaleType.FIT_XY);
    iv.setId(show.id);

    //set visibility
    if (show.visible)
        iv.setVisibility(View.VISIBLE);
    else
        iv.setVisibility(View.INVISIBLE);

    //set dimensions
    int width = (app.getWidth() * show.dimX) / 100;
    int height = (app.getHeight() * show.dimY) / 100;
    RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(width, height);
    iv.setLayoutParams(rlp);

    return iv;
} 
```

场景结束后，我会清除所有 ImageView，除了一个没有图像且仅用于侦听触摸事件的 ImageView。

```
private void clearScene(boolean clearTouch)
{
    RelativeLayout parent = (RelativeLayout) findViewById(R.id.relative_layout);
    logMemory("clearScene, START");

    int count = parent.getChildCount();
    for (int a = count - 1; a >= 0; a--)
    {
        int id = parent.getChildAt(a).getId();
        String message = "clearScene id = " + id + ", count = " + count + ", a = " + a;
        if (id == TOUCH_VIEW_ID && !clearTouch)
        {
            message = message + ", ignore touch screen view";
        }
        else
        {
            unbindView(parent.getChildAt(a));
            parent.getChildAt(a).clearAnimation();
            parent.removeView(parent.getChildAt(a));
            message = message + ", unbindView, clearAnimation, removeView";
        }
        Log.i(TAG, message);
        logMemory("clearScene, CLEARED VIEW");
    }

    handler.removeCallbacksAndMessages(null);  //stop any future scheduled tasks from triggering
    logMemory("clearScene, BEFORE TRASH COLLECTOR");
    System.gc();
    logMemory("clearScene, AFTER TRASH COLLECTOR");
} 
```

如您所见，我调用 unbindView() 方法来尝试清除任何类型的可能的内存泄漏。

```
private void unbindView(View view)
{
    String message = "unbindView, id = " + view.getId();
    try {view.setOnClickListener(null);} catch (Throwable mayHappen) {};
    try {view.setOnCreateContextMenuListener(null);} catch (Throwable mayHappen) {};
    try {view.setOnFocusChangeListener(null);} catch (Throwable mayHappen) {};
    try {view.setOnKeyListener(null);} catch (Throwable mayHappen) {};
    try {view.setOnLongClickListener(null);} catch (Throwable mayHappen) {};
    try {view.setOnClickListener(null);} catch (Throwable mayHappen) {};

    if (view.getBackground() != null)
    {
        message = message + ", setBackgroundCallback(null)";
        view.getBackground().setCallback(null);
    }

    if (view instanceof ImageView)
    {
        if (((ImageView)view).getDrawable() != null)
        {
            if (((ImageView)view).getDrawable() instanceof BitmapDrawable)
            {
                message = message + ", recycle bitmap";
                ((BitmapDrawable)((ImageView)view).getDrawable()).getBitmap().recycle();
            }
            message = message + ", setDrawableCallback(null)";
            ((ImageView)view).getDrawable().setCallback(null);
        }
        message = message + ", setImageBitmap(null), setBackgroundDrawable(null)";
        ((ImageView) view).setImageBitmap(null);
        ((ImageView) view).setBackgroundDrawable(null);
    }
    Log.i(TAG, message);
} 
```

一旦所有的 ImageViews 都是无界的，我就在 clearScene 函数中运行垃圾收集器。

***编辑（2013 年 4 月 2 日）好的，经过一些研究和反复试验，我改变了我的内存记录。以下是相关方法：

在 onResume() 中，我根据 Android 的版本将布尔值设置为 true（以确定它是使用本机内存还是 Java 内存来存储位图），然后为旧内存值初始化默认值 0；

```
@Override
protected void onResume() 
{
    super.onResume();

    if (android.os.Build.VERSION.SDK_INT >= 11) debugJavaMemory = true;
    else debugNativeMemory = true;
    availableJavaMemoryOld = 0;
    availableNativeMemoryOld = 0;
    dialogDebug();
} 
```

这是我的日志功能。它根据当前版本的 Android 是使用本机内存还是 Java 内存来存储位图来记录。

```
private void logMemory(String callingFunction)
{
    if (debugJavaMemory)
    {
        long max = Runtime.getRuntime().maxMemory() / 1024;
        long used = Runtime.getRuntime().totalMemory() / 1024;
        long available = max - used;
        long change = available - availableJavaMemoryOld;
        if (availableJavaMemoryOld != 0)
            Log.i(TAG_MEMORY, "jMEM M:" + max + ", U:" + used + ", A:" + available + ", C:" + change + ", " + callingFunction);
        availableJavaMemoryOld = available;
    }
    else if (debugNativeMemory)
    {
        long max = Debug.getNativeHeapSize() / 1024;
        long used = Debug.getNativeHeapAllocatedSize() / 1024;
        long available = max - used;
        long change = available - availableNativeMemoryOld;
        if (availableNativeMemoryOld != 0)
            Log.i(TAG_MEMORY, "nMEM M:" + max + ", U:" + used + ", A:" + available + ", C:" + change + ", " + callingFunction);
        availableNativeMemoryOld = available;
    }
} 
```

如果您查看我从运行 Android 10 (2.3.3) 的模拟器收集的日志，垃圾收集器似乎工作正常！我唯一注意到奇怪的是，Max Native Memory 可以动态增加！？

图注：M：（最大内存），U：（已用内存），A：（可用内存），C：（可用内存变化），调用日志函数的函数

```
04-03 02:34:20.758: I/MEMORY(1045): nMEM M:18336, U:13287, A:5049, C:-2549, loadScene, ADDED IMAGE b:0, s:0, id:0
04-03 02:34:21.267: I/MEMORY(1045): nMEM M:21568, U:21391, A:177, C:-4872, loadScene, ADDED IMAGE b:0, s:0, id:1
04-03 02:34:35.227: I/MEMORY(1045): nMEM M:21568, U:13288, A:8280, C:8103, clearScene, CLEARED VIEW id:1
04-03 02:34:35.267: I/MEMORY(1045): nMEM M:21568, U:5184, A:16384, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:34:35.327: I/MEMORY(1045): nMEM M:21568, U:4977, A:16591, C:207, clearScene, AFTER TRASH COLLECTOR
04-03 02:34:36.067: I/MEMORY(1045): nMEM M:21568, U:13082, A:8486, C:-8105, loadScene, ADDED IMAGE b:1, s:0, id:0
04-03 02:34:47.177: I/MEMORY(1045): nMEM M:21568, U:4979, A:16589, C:8103, clearScene, CLEARED VIEW id:0
04-03 02:34:47.277: I/MEMORY(1045): nMEM M:21568, U:4978, A:16590, C:1, clearScene, AFTER TRASH COLLECTOR
04-03 02:34:47.997: I/MEMORY(1045): nMEM M:21568, U:13082, A:8486, C:-8104, loadScene, ADDED IMAGE b:1, s:1, id:0
04-03 02:34:49.307: I/MEMORY(1045): nMEM M:26224, U:21186, A:5038, C:-3448, loadScene, ADDED IMAGE b:1, s:1, id:1
04-03 02:34:50.597: I/MEMORY(1045): nMEM M:34328, U:29290, A:5038, C:0, loadScene, ADDED IMAGE b:1, s:1, id:2
04-03 02:34:51.839: I/MEMORY(1045): nMEM M:42432, U:37395, A:5037, C:-1, loadScene, ADDED IMAGE b:1, s:1, id:3
04-03 02:35:00.377: I/MEMORY(1045): nMEM M:42432, U:29293, A:13139, C:8102, clearScene, CLEARED VIEW id:3
04-03 02:35:00.387: I/MEMORY(1045): nMEM M:42432, U:21189, A:21243, C:8104, clearScene, CLEARED VIEW id:2
04-03 02:35:00.397: I/MEMORY(1045): nMEM M:42432, U:13085, A:29347, C:8104, clearScene, CLEARED VIEW id:1
04-03 02:35:00.407: I/MEMORY(1045): nMEM M:42432, U:4982, A:37450, C:8103, clearScene, CLEARED VIEW id:0
04-03 02:35:00.449: I/MEMORY(1045): nMEM M:42432, U:4978, A:37454, C:4, clearScene, AFTER TRASH COLLECTOR
04-03 02:35:01.217: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:-8105, loadScene, ADDED IMAGE b:1, s:2, id:0
04-03 02:35:23.458: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:35:23.508: I/MEMORY(1045): nMEM M:42432, U:4978, A:37454, C:1, clearScene, AFTER TRASH COLLECTOR
04-03 02:35:24.777: I/MEMORY(1045): nMEM M:42432, U:13082, A:29350, C:-8104, loadScene, ADDED IMAGE b:1, s:3, id:0
04-03 02:35:25.719: I/MEMORY(1045): nMEM M:42432, U:21186, A:21246, C:-8104, loadScene, ADDED IMAGE b:1, s:3, id:1
04-03 02:35:26.457: I/MEMORY(1045): nMEM M:42432, U:29291, A:13141, C:-8105, loadScene, ADDED IMAGE b:1, s:3, id:2
04-03 02:35:55.008: I/MEMORY(1045): nMEM M:42432, U:21187, A:21245, C:8104, clearScene, CLEARED VIEW id:2
04-03 02:35:55.027: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:8104, clearScene, CLEARED VIEW id:1
04-03 02:35:55.037: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:35:55.077: I/MEMORY(1045): nMEM M:42432, U:4978, A:37454, C:1, clearScene, AFTER TRASH COLLECTOR
04-03 02:35:55.829: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:-8105, loadScene, ADDED IMAGE b:1, s:4, id:0
04-03 02:35:56.427: I/MEMORY(1045): nMEM M:42432, U:21187, A:21245, C:-8104, loadScene, ADDED IMAGE b:1, s:4, id:1
04-03 02:36:00.257: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:8104, clearScene, CLEARED VIEW id:1
04-03 02:36:00.278: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:36:00.318: I/MEMORY(1045): nMEM M:42432, U:4978, A:37454, C:1, clearScene, AFTER TRASH COLLECTOR
04-03 02:36:01.687: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:-8105, loadScene, ADDED IMAGE b:1, s:5, id:0
04-03 02:36:06.437: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:36:06.487: I/MEMORY(1045): nMEM M:42432, U:4978, A:37454, C:1, clearScene, AFTER TRASH COLLECTOR
04-03 02:36:07.777: I/MEMORY(1045): nMEM M:42432, U:13082, A:29350, C:-8104, loadScene, ADDED IMAGE b:1, s:6, id:0
04-03 02:36:09.297: I/MEMORY(1045): nMEM M:42432, U:4978, A:37454, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:36:09.337: I/MEMORY(1045): nMEM M:42432, U:4978, A:37454, C:0, clearScene, AFTER TRASH COLLECTOR
04-03 02:36:10.727: I/MEMORY(1045): nMEM M:42432, U:13082, A:29350, C:-8104, loadScene, ADDED IMAGE b:1, s:7, id:0
04-03 02:36:20.947: I/MEMORY(1045): nMEM M:42432, U:4978, A:37454, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:36:20.987: I/MEMORY(1045): nMEM M:42432, U:4978, A:37454, C:0, clearScene, AFTER TRASH COLLECTOR
04-03 02:36:22.367: I/MEMORY(1045): nMEM M:42432, U:13082, A:29350, C:-8104, loadScene, ADDED IMAGE b:1, s:8, id:0
04-03 02:36:23.317: I/MEMORY(1045): nMEM M:42432, U:21187, A:21245, C:-8105, loadScene, ADDED IMAGE b:1, s:8, id:1
04-03 02:36:23.887: I/MEMORY(1045): nMEM M:42432, U:29291, A:13141, C:-8104, loadScene, ADDED IMAGE b:1, s:8, id:2
04-03 02:36:26.507: I/MEMORY(1045): nMEM M:42432, U:21187, A:21245, C:8104, clearScene, CLEARED VIEW id:2
04-03 02:36:26.517: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:8104, clearScene, CLEARED VIEW id:1
04-03 02:36:26.527: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:36:26.577: I/MEMORY(1045): nMEM M:42432, U:4978, A:37454, C:1, clearScene, AFTER TRASH COLLECTOR
04-03 02:36:27.797: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:-8105, loadScene, ADDED IMAGE b:1, s:9, id:0
04-03 02:36:29.248: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:36:29.287: I/MEMORY(1045): nMEM M:42432, U:4978, A:37454, C:1, clearScene, AFTER TRASH COLLECTOR
04-03 02:36:30.547: I/MEMORY(1045): nMEM M:42432, U:13082, A:29350, C:-8104, loadScene, ADDED IMAGE b:1, s:10, id:0
04-03 02:36:32.177: I/MEMORY(1045): nMEM M:42432, U:4978, A:37454, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:36:32.228: I/MEMORY(1045): nMEM M:42432, U:4978, A:37454, C:0, clearScene, AFTER TRASH COLLECTOR
04-03 02:36:33.467: I/MEMORY(1045): nMEM M:42432, U:13082, A:29350, C:-8104, loadScene, ADDED IMAGE b:1, s:11, id:0
04-03 02:36:33.977: I/MEMORY(1045): nMEM M:42432, U:21187, A:21245, C:-8105, loadScene, ADDED IMAGE b:1, s:11, id:1
04-03 02:36:34.527: I/MEMORY(1045): nMEM M:42432, U:29291, A:13141, C:-8104, loadScene, ADDED IMAGE b:1, s:11, id:2
04-03 02:36:35.058: I/MEMORY(1045): nMEM M:42432, U:37395, A:5037, C:-8104, loadScene, ADDED IMAGE b:1, s:11, id:3
04-03 02:36:41.260: I/MEMORY(1045): nMEM M:42432, U:29291, A:13141, C:8104, clearScene, CLEARED VIEW id:3
04-03 02:36:41.267: I/MEMORY(1045): nMEM M:42432, U:21187, A:21245, C:8104, clearScene, CLEARED VIEW id:2
04-03 02:36:41.278: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:8104, clearScene, CLEARED VIEW id:1
04-03 02:36:41.287: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:36:41.337: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:0, clearScene, AFTER TRASH COLLECTOR
04-03 02:36:42.618: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:-8104, loadScene, ADDED IMAGE b:2, s:0, id:0
04-03 02:37:00.550: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:37:00.587: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:0, clearScene, AFTER TRASH COLLECTOR
04-03 02:37:01.817: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:-8104, loadScene, ADDED IMAGE b:2, s:1, id:0
04-03 02:37:03.347: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:37:03.397: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:0, clearScene, AFTER TRASH COLLECTOR
04-03 02:37:04.607: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:-8104, loadScene, ADDED IMAGE b:2, s:2, id:0
04-03 02:37:05.258: I/MEMORY(1045): nMEM M:42432, U:21187, A:21245, C:-8104, loadScene, ADDED IMAGE b:2, s:2, id:1
04-03 02:37:07.677: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:8104, clearScene, CLEARED VIEW id:1
04-03 02:37:07.687: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:37:07.737: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:0, clearScene, AFTER TRASH COLLECTOR
04-03 02:37:09.017: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:-8104, loadScene, ADDED IMAGE b:2, s:3, id:0
04-03 02:37:10.327: I/MEMORY(1045): nMEM M:42432, U:21187, A:21245, C:-8104, loadScene, ADDED IMAGE b:2, s:3, id:1
04-03 02:37:13.330: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:8104, clearScene, CLEARED VIEW id:1
04-03 02:37:13.337: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:37:13.387: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:0, clearScene, AFTER TRASH COLLECTOR
04-03 02:37:14.697: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:-8104, loadScene, ADDED IMAGE b:2, s:4, id:0
04-03 02:37:16.037: I/MEMORY(1045): nMEM M:42432, U:21187, A:21245, C:-8104, loadScene, ADDED IMAGE b:2, s:4, id:1
04-03 02:37:17.367: I/MEMORY(1045): nMEM M:42432, U:29292, A:13140, C:-8105, loadScene, ADDED IMAGE b:2, s:4, id:2
04-03 02:37:19.087: I/MEMORY(1045): nMEM M:42432, U:37396, A:5036, C:-8104, loadScene, ADDED IMAGE b:2, s:4, id:3
04-03 02:37:44.347: I/MEMORY(1045): nMEM M:42432, U:29293, A:13139, C:8103, clearScene, CLEARED VIEW id:3
04-03 02:37:44.357: I/MEMORY(1045): nMEM M:42432, U:21189, A:21243, C:8104, clearScene, CLEARED VIEW id:2
04-03 02:37:44.367: I/MEMORY(1045): nMEM M:42432, U:13085, A:29347, C:8104, clearScene, CLEARED VIEW id:1
04-03 02:37:44.377: I/MEMORY(1045): nMEM M:42432, U:4981, A:37451, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:37:44.437: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:2, clearScene, AFTER TRASH COLLECTOR
04-03 02:37:45.667: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:-8104, loadScene, ADDED IMAGE b:2, s:5, id:0
04-03 02:37:46.917: I/MEMORY(1045): nMEM M:42432, U:21188, A:21244, C:-8105, loadScene, ADDED IMAGE b:2, s:5, id:1
04-03 02:37:48.167: I/MEMORY(1045): nMEM M:42432, U:29292, A:13140, C:-8104, loadScene, ADDED IMAGE b:2, s:5, id:2
04-03 02:37:49.807: I/MEMORY(1045): nMEM M:42432, U:37396, A:5036, C:-8104, loadScene, ADDED IMAGE b:2, s:5, id:3
04-03 02:38:08.239: I/MEMORY(1045): nMEM M:42432, U:29293, A:13139, C:8103, clearScene, CLEARED VIEW id:3
04-03 02:38:08.258: I/MEMORY(1045): nMEM M:42432, U:21189, A:21243, C:8104, clearScene, CLEARED VIEW id:2
04-03 02:38:08.267: I/MEMORY(1045): nMEM M:42432, U:13086, A:29346, C:8103, clearScene, CLEARED VIEW id:1
04-03 02:38:08.277: I/MEMORY(1045): nMEM M:42432, U:4982, A:37450, C:8104, clearScene, CLEARED VIEW id:0
04-03 02:38:08.317: I/MEMORY(1045): nMEM M:42432, U:4979, A:37453, C:3, clearScene, AFTER TRASH COLLECTOR
04-03 02:38:09.527: I/MEMORY(1045): nMEM M:42432, U:13083, A:29349, C:-8104, loadScene, ADDED IMAGE b:2, s:6, id:0 
```

如前所述，ImageView 解绑后内存被清理！

这是我从运行 Android 17 (4.2) 的损坏的 Nexus 7 中收集的日志。真的很难理解这里的内存是如何使用的。从来都不是一致的！有时加载 ImageView 时未分配内存。有时只有在我加载新的 ImageView 时才会清除内存。

图注：M：（最大内存），U：（已用内存），A：（可用内存），C：（可用内存变化），调用日志函数的函数

```
04-02 22:37:05.866: I/MEMORY(15827): jMEM M:65536, U:21300, A:44236, C:0, loadScene, ADDED IMAGE b:0, s:0, id:0
04-02 22:37:06.136: I/MEMORY(15827): jMEM M:65536, U:29444, A:36092, C:-8144, loadScene, ADDED IMAGE b:0, s:0, id:1
04-02 22:37:19.806: I/MEMORY(15827): jMEM M:65536, U:29432, A:36104, C:12, clearScene, CLEARED VIEW id:1
04-02 22:37:19.806: I/MEMORY(15827): jMEM M:65536, U:29432, A:36104, C:0, clearScene, CLEARED VIEW id:0
04-02 22:37:19.836: I/MEMORY(15827): jMEM M:65536, U:29432, A:36104, C:0, clearScene, AFTER TRASH COLLECTOR
04-02 22:37:20.116: I/MEMORY(15827): jMEM M:65536, U:37536, A:28000, C:-8104, loadScene, ADDED IMAGE b:1, s:0, id:0
04-02 22:37:28.456: I/MEMORY(15827): jMEM M:65536, U:37532, A:28004, C:4, clearScene, CLEARED VIEW id:0
04-02 22:37:28.486: I/MEMORY(15827): jMEM M:65536, U:37532, A:28004, C:0, clearScene, AFTER TRASH COLLECTOR
04-02 22:37:28.756: I/MEMORY(15827): jMEM M:65536, U:37532, A:28004, C:0, loadScene, ADDED IMAGE b:1, s:1, id:0
04-02 22:37:29.226: I/MEMORY(15827): jMEM M:65536, U:37532, A:28004, C:0, loadScene, ADDED IMAGE b:1, s:1, id:1
04-02 22:37:29.706: I/MEMORY(15827): jMEM M:65536, U:45636, A:19900, C:-8104, loadScene, ADDED IMAGE b:1, s:1, id:2
04-02 22:37:30.156: I/MEMORY(15827): jMEM M:65536, U:53740, A:11796, C:-8104, loadScene, ADDED IMAGE b:1, s:1, id:3
04-02 22:37:38.676: I/MEMORY(15827): jMEM M:65536, U:53732, A:11804, C:8, clearScene, CLEARED VIEW id:3
04-02 22:37:38.676: I/MEMORY(15827): jMEM M:65536, U:53732, A:11804, C:0, clearScene, CLEARED VIEW id:2
04-02 22:37:38.676: I/MEMORY(15827): jMEM M:65536, U:53732, A:11804, C:0, clearScene, CLEARED VIEW id:1
04-02 22:37:38.676: I/MEMORY(15827): jMEM M:65536, U:53732, A:11804, C:0, clearScene, CLEARED VIEW id:0
04-02 22:37:38.696: I/MEMORY(15827): jMEM M:65536, U:53732, A:11804, C:0, clearScene, AFTER TRASH COLLECTOR
04-02 22:37:38.966: I/MEMORY(15827): jMEM M:65536, U:53732, A:11804, C:0, loadScene, ADDED IMAGE b:1, s:2, id:0
04-02 22:37:48.156: I/MEMORY(15827): jMEM M:65536, U:53732, A:11804, C:0, clearScene, CLEARED VIEW id:0
04-02 22:37:48.216: I/MEMORY(15827): jMEM M:65536, U:37532, A:28004, C:16200, clearScene, AFTER TRASH COLLECTOR
04-02 22:37:48.676: I/MEMORY(15827): jMEM M:65536, U:37532, A:28004, C:0, loadScene, ADDED IMAGE b:1, s:3, id:0
04-02 22:37:49.256: I/MEMORY(15827): jMEM M:65536, U:37532, A:28004, C:0, loadScene, ADDED IMAGE b:1, s:3, id:1
04-02 22:37:49.716: I/MEMORY(15827): jMEM M:65536, U:45636, A:19900, C:-8104, loadScene, ADDED IMAGE b:1, s:3, id:2
04-02 22:38:07.426: I/MEMORY(15827): jMEM M:65536, U:45632, A:19904, C:4, clearScene, CLEARED VIEW id:2
04-02 22:38:07.426: I/MEMORY(15827): jMEM M:65536, U:45632, A:19904, C:0, clearScene, CLEARED VIEW id:1
04-02 22:38:07.426: I/MEMORY(15827): jMEM M:65536, U:45632, A:19904, C:0, clearScene, CLEARED VIEW id:0
04-02 22:38:07.496: I/MEMORY(15827): jMEM M:65536, U:45632, A:19904, C:0, clearScene, AFTER TRASH COLLECTOR
04-02 22:38:07.766: I/MEMORY(15827): jMEM M:65536, U:45632, A:19904, C:0, loadScene, ADDED IMAGE b:1, s:4, id:0
04-02 22:38:08.096: I/MEMORY(15827): jMEM M:65536, U:53736, A:11800, C:-8104, loadScene, ADDED IMAGE b:1, s:4, id:1
04-02 22:38:10.896: I/MEMORY(15827): jMEM M:65536, U:53736, A:11800, C:0, clearScene, CLEARED VIEW id:1
04-02 22:38:10.896: I/MEMORY(15827): jMEM M:65536, U:53736, A:11800, C:0, clearScene, CLEARED VIEW id:0
04-02 22:38:10.916: I/MEMORY(15827): jMEM M:65536, U:53736, A:11800, C:0, clearScene, AFTER TRASH COLLECTOR
04-02 22:38:11.436: I/MEMORY(15827): jMEM M:65536, U:53736, A:11800, C:0, loadScene, ADDED IMAGE b:1, s:5, id:0
04-02 22:38:19.356: I/MEMORY(15827): jMEM M:65536, U:53732, A:11804, C:4, clearScene, CLEARED VIEW id:0
04-02 22:38:19.386: I/MEMORY(15827): jMEM M:65536, U:45632, A:19904, C:8100, clearScene, AFTER TRASH COLLECTOR
04-02 22:38:19.866: I/MEMORY(15827): jMEM M:65536, U:45632, A:19904, C:0, loadScene, ADDED IMAGE b:1, s:6, id:0
04-02 22:38:21.326: I/MEMORY(15827): jMEM M:65536, U:45632, A:19904, C:0, clearScene, CLEARED VIEW id:0
04-02 22:38:21.356: I/MEMORY(15827): jMEM M:65536, U:21300, A:44236, C:24332, clearScene, AFTER TRASH COLLECTOR
04-02 22:38:21.906: I/MEMORY(15827): jMEM M:65536, U:29404, A:36132, C:-8104, loadScene, ADDED IMAGE b:1, s:7, id:0
04-02 22:38:24.376: I/MEMORY(15827): jMEM M:65536, U:29404, A:36132, C:0, clearScene, CLEARED VIEW id:0
04-02 22:38:24.406: I/MEMORY(15827): jMEM M:65536, U:29404, A:36132, C:0, clearScene, AFTER TRASH COLLECTOR
04-02 22:38:24.916: I/MEMORY(15827): jMEM M:65536, U:29404, A:36132, C:0, loadScene, ADDED IMAGE b:1, s:8, id:0
04-02 22:38:25.496: I/MEMORY(15827): jMEM M:65536, U:37548, A:27988, C:-8144, loadScene, ADDED IMAGE b:1, s:8, id:1
04-02 22:38:25.796: I/MEMORY(15827): jMEM M:65536, U:45652, A:19884, C:-8104, loadScene, ADDED IMAGE b:1, s:8, id:2
04-02 22:38:28.356: I/MEMORY(15827): jMEM M:65536, U:45652, A:19884, C:0, clearScene, CLEARED VIEW id:2
04-02 22:38:28.356: I/MEMORY(15827): jMEM M:65536, U:45652, A:19884, C:0, clearScene, CLEARED VIEW id:1
04-02 22:38:28.356: I/MEMORY(15827): jMEM M:65536, U:45652, A:19884, C:0, clearScene, CLEARED VIEW id:0
04-02 22:38:28.376: I/MEMORY(15827): jMEM M:65536, U:45652, A:19884, C:0, clearScene, AFTER TRASH COLLECTOR
04-02 22:38:28.846: I/MEMORY(15827): jMEM M:65536, U:45652, A:19884, C:0, loadScene, ADDED IMAGE b:1, s:9, id:0
04-02 22:38:29.926: I/MEMORY(15827): jMEM M:65536, U:45652, A:19884, C:0, clearScene, CLEARED VIEW id:0
04-02 22:38:29.956: I/MEMORY(15827): jMEM M:65536, U:29400, A:36136, C:16252, clearScene, AFTER TRASH COLLECTOR
04-02 22:38:30.416: I/MEMORY(15827): jMEM M:65536, U:29400, A:36136, C:0, loadScene, ADDED IMAGE b:1, s:10, id:0
04-02 22:38:31.446: I/MEMORY(15827): jMEM M:65536, U:29400, A:36136, C:0, clearScene, CLEARED VIEW id:0
04-02 22:38:31.476: I/MEMORY(15827): jMEM M:65536, U:21300, A:44236, C:8100, clearScene, AFTER TRASH COLLECTOR
04-02 22:38:31.966: I/MEMORY(15827): jMEM M:65536, U:29404, A:36132, C:-8104, loadScene, ADDED IMAGE b:1, s:11, id:0
04-02 22:38:32.226: I/MEMORY(15827): jMEM M:65536, U:37548, A:27988, C:-8144, loadScene, ADDED IMAGE b:1, s:11, id:1
04-02 22:38:32.526: I/MEMORY(15827): jMEM M:65536, U:45652, A:19884, C:-8104, loadScene, ADDED IMAGE b:1, s:11, id:2
04-02 22:38:32.816: I/MEMORY(15827): jMEM M:65536, U:53756, A:11780, C:-8104, loadScene, ADDED IMAGE b:1, s:11, id:3
04-02 22:38:34.396: I/MEMORY(15827): jMEM M:65536, U:53756, A:11780, C:0, clearScene, CLEARED VIEW id:3
04-02 22:38:34.396: I/MEMORY(15827): jMEM M:65536, U:53756, A:11780, C:0, clearScene, CLEARED VIEW id:2
04-02 22:38:34.396: I/MEMORY(15827): jMEM M:65536, U:53756, A:11780, C:0, clearScene, CLEARED VIEW id:1
04-02 22:38:34.396: I/MEMORY(15827): jMEM M:65536, U:53756, A:11780, C:0, clearScene, CLEARED VIEW id:0
04-02 22:38:34.426: I/MEMORY(15827): jMEM M:65536, U:53756, A:11780, C:0, clearScene, AFTER TRASH COLLECTOR
04-02 22:38:34.886: I/MEMORY(15827): jMEM M:65536, U:53756, A:11780, C:0, loadScene, ADDED IMAGE b:2, s:0, id:0
04-02 22:38:35.776: I/MEMORY(15827): jMEM M:65536, U:53756, A:11780, C:0, clearScene, CLEARED VIEW id:0
04-02 22:38:35.816: I/MEMORY(15827): jMEM M:65536, U:21300, A:44236, C:32456, clearScene, AFTER TRASH COLLECTOR
04-02 22:38:36.256: I/MEMORY(15827): jMEM M:65536, U:29404, A:36132, C:-8104, loadScene, ADDED IMAGE b:2, s:1, id:0
04-02 22:38:36.976: I/MEMORY(15827): jMEM M:65536, U:29404, A:36132, C:0, clearScene, CLEARED VIEW id:0
04-02 22:38:37.006: I/MEMORY(15827): jMEM M:65536, U:29404, A:36132, C:0, clearScene, AFTER TRASH COLLECTOR
04-02 22:38:37.436: I/MEMORY(15827): jMEM M:65536, U:29404, A:36132, C:0, loadScene, ADDED IMAGE b:2, s:2, id:0
04-02 22:38:37.816: I/MEMORY(15827): jMEM M:65536, U:37548, A:27988, C:-8144, loadScene, ADDED IMAGE b:2, s:2, id:1
04-02 22:38:44.986: I/MEMORY(15827): jMEM M:65536, U:37532, A:28004, C:16, clearScene, CLEARED VIEW id:1
04-02 22:38:44.986: I/MEMORY(15827): jMEM M:65536, U:37532, A:28004, C:0, clearScene, CLEARED VIEW id:0
04-02 22:38:45.016: I/MEMORY(15827): jMEM M:65536, U:37532, A:28004, C:0, clearScene, AFTER TRASH COLLECTOR
04-02 22:38:45.496: I/MEMORY(15827): jMEM M:65536, U:37532, A:28004, C:0, loadScene, ADDED IMAGE b:2, s:3, id:0
04-02 22:38:45.996: I/MEMORY(15827): jMEM M:65536, U:45636, A:19900, C:-8104, loadScene, ADDED IMAGE b:2, s:3, id:1
04-02 22:38:48.306: I/MEMORY(15827): jMEM M:65536, U:45636, A:19900, C:0, clearScene, CLEARED VIEW id:1
04-02 22:38:48.306: I/MEMORY(15827): jMEM M:65536, U:45636, A:19900, C:0, clearScene, CLEARED VIEW id:0
04-02 22:38:48.336: I/MEMORY(15827): jMEM M:65536, U:45636, A:19900, C:0, clearScene, AFTER TRASH COLLECTOR
04-02 22:38:48.846: I/MEMORY(15827): jMEM M:65536, U:45636, A:19900, C:0, loadScene, ADDED IMAGE b:2, s:4, id:0
04-02 22:38:49.326: I/MEMORY(15827): jMEM M:65536, U:45636, A:19900, C:0, loadScene, ADDED IMAGE b:2, s:4, id:1
04-02 22:38:49.856: I/MEMORY(15827): jMEM M:65536, U:53740, A:11796, C:-8104, loadScene, ADDED IMAGE b:2, s:4, id:2
04-02 22:38:50.386: I/MEMORY(15827): jMEM M:65536, U:61844, A:3692, C:-8104, loadScene, ADDED IMAGE b:2, s:4, id:3
04-02 22:38:59.486: I/MEMORY(15827): jMEM M:65536, U:61832, A:3704, C:12, clearScene, CLEARED VIEW id:3
04-02 22:38:59.486: I/MEMORY(15827): jMEM M:65536, U:61832, A:3704, C:0, clearScene, CLEARED VIEW id:2
04-02 22:38:59.486: I/MEMORY(15827): jMEM M:65536, U:61832, A:3704, C:0, clearScene, CLEARED VIEW id:1
04-02 22:38:59.486: I/MEMORY(15827): jMEM M:65536, U:61832, A:3704, C:0, clearScene, CLEARED VIEW id:0
04-02 22:38:59.516: I/MEMORY(15827): jMEM M:65536, U:61832, A:3704, C:0, clearScene, AFTER TRASH COLLECTOR
04-02 22:38:59.936: I/MEMORY(15827): jMEM M:65536, U:61832, A:3704, C:0, loadScene, ADDED IMAGE b:2, s:5, id:0
04-02 22:39:00.356: I/MEMORY(15827): jMEM M:65536, U:61832, A:3704, C:0, loadScene, ADDED IMAGE b:2, s:5, id:1 
```

我已经通过
[http://developer.android.com/training/displaying-bitmaps/index.html上的“有效显示位图”培训](http://developer.android.com/training/displaying-bitmaps/index.html)

我也经历过以下stackoverflow问题：
[Recycle ImageView's Bitmap](https://stackoverflow.com/questions/7009086/recycle-imageviews-bitmap)
[ImageView: automatically recycle bitmap if ImageView is not visible (within ScrollView)](https://stackoverflow.com/questions/8349958/imageview-automatically-recycle-bitmap-if-imageview-is-not-visible-within-scro)
[android - out of memory exception when creating bitmap](https://stackoverflow.com/questions/5697760/android-out-of-memory-exception-when-creating-bitmap)
[Bitmap decodeStream OutOfMemory Exception](https://stackoverflow.com/questions/8624086/bitmap-decodestream-outofmemory-exception)
[Detect application heap size in Android](https://stackoverflow.com/questions/2630158/detect-application-heap-size-in-android)
[android createBitmap OOM when ((freeMemory > bitmapSize) && (nativeFreeHeap < bitmap size))](https://stackoverflow.com/questions/6541624/android-createbitmap-oom-when-freememory-bitmapsize-nativefreeheap-bi)
[android 495KB imagetaking 10MB of Heap size](https://stackoverflow.com/questions/11357483/android-495kb-image-taking-10mb-of-heap-size)
[Android ImageView setImageBitmap](https://stackoverflow.com/questions/7938785/android-imageview-setimagebitmap)
[Android Memory Leak 解决方案](https://stackoverflow.com/questions/5815880/android-memory-leak-solution)
[Android custom view Bitmap memory leak](https://stackoverflow.com/questions/4197794/android-custom-view-bitmap-memory-leak)

网络上还有更多文章！

澄清一下，这似乎只发生在我的 Nexus 7 中。我的模拟器或 Galaxy Nexus 上没有遇到过这个问题。我认为这可能是由于我正在缩放图像。

请帮我检测内存泄漏在哪里！

***编辑（2013 年 4 月 2 日）请帮助我确定为什么来自运行 Android 10（2.3.3）的模拟器的日志显示系统分配内存和垃圾然后完全按照应有的方式清除，以及来自我的日志运行 Android 17 (4.2) 的 Nexus 7 显示系统分配内存和垃圾收集器显然是随机清除内存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-03T15:28:12.883

我无法确定为什么不同平台之间的内存分配和收集不同，但我能够通过缩小图像以适应可用内存来缓解问题并防止我的应用程序在任何平台上崩溃。

第一个函数确定 Bitmap 内存的存储位置（本机或 Java），然后计算剩余的可用内存（以 KB 为单位）。

```
private long calcAvailableMemory()
{
    long value = Runtime.getRuntime().maxMemory();
    String type = "";
    if (android.os.Build.VERSION.SDK_INT >= 11)
    {
        value = value / 1024) - (Runtime.getRuntime().totalMemory() / 1024);
        type = "JAVA";
    }
    else
    {
        value = value / 1024) - (Debug.getNativeHeapAllocatedSize() / 1024);
        type = "NATIVE";
    }
    Log.i(TAG, "calcAvailableMemory, size = " + value + ", type = " + type);
    return value;
} 
```

第二个函数创建一个 ImageView 以附加到布局。Show 对象包含我需要初始化 ImageView 的不同变量，例如尺寸和文件路径等。长 maxImageMemory 是从第一个函数派生的，然后除以我附加到布局的视图数，给我最大数量分配每个位图的内存。

```
private ImageView newImage(Show show, long maxImageMemory)
{
    ImageView iv = new ImageView(this);
    String filePath = comin.generateFilePath(show);
    Bitmap bmp = scaleBitmap(filePath, maxImageMemory);
    Log.i(TAG, "newImage, id:" + show.id + ", file:" + filePath + ", x:" + bmp.getWidth() + ", y:" + bmp.getHeight());
    iv.setImageBitmap(bmp);
    iv.setScaleType(ImageView.ScaleType.FIT_XY);
    iv.setId(show.id);

    //set visibility
    if (show.visible)
        iv.setVisibility(View.VISIBLE);
    else
        iv.setVisibility(View.INVISIBLE);

    //set dimensions
    int width = (app.getWidth() * show.dimX) / 100;
    int height = (app.getHeight() * show.dimY) / 100;
    RelativeLayout.LayoutParams rlp = new RelativeLayout.LayoutParams(width, height);
    iv.setLayoutParams(rlp);

    return iv;
} 
```

第三个函数缩放将加载到函数 2 中创建的 ImageView 中的位图。while 循环是重要的部分，在此我增加样本大小，直到位图所需的内存小于可用的最大内存。

```
private Bitmap scaleBitmap(String path, long maxImageMemory)
{
    BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeFile(path, options);

    int sample = 1;
    //Scale image to screen resolution
    if (options.outHeight > app.getHeight() || options.outWidth > app.getWidth())
    {
        int heightRatio = Math.round((float) options.outHeight / (float) app.getHeight());
        int widthRatio = Math.round((float) options.outWidth / (float) app.getWidth());
        sample = heightRatio < widthRatio ? heightRatio : widthRatio;
    }

    //Scale image to stay within memory limitations
    while (calcBitmapSize(options.outWidth, options.outHeight, sample) > maxImageMemory)
    {
        sample++;
    }

    options.inSampleSize = sample;
    options.inPurgeable = true;
    options.inInputShareable = true;
    options.inJustDecodeBounds = false;

    Log.i(TAG, "scaleBitmap, scaleSample = " + sample);
    return BitmapFactory.decodeFile(path, options);
} 
```

第四个函数根据原始分辨率以及建议的样本大小计算位图所需的内存量。

```
private long calcBitmapSize(int width, int height, int sample)
{
    long value = ((width/sample) * (height/sample) * 4) / 1024;
    Log.i(TAG, "calcBitmapSize, size = " + value);
    return value;
} 
```

最后，我开发了这个功能来帮助解决所有这些内存问题。它根据您运行的 Android 版本记录内存使用情况。

```
private void logMemory(String callingFunction)
{
    long max = Runtime.getRuntime().maxMemory() / 1024;

    if (debugJavaMemory)
    {
        long used = Runtime.getRuntime().totalMemory() / 1024;
        long available = max - used;
        long change = available - availableJavaMemoryOld;
        if (availableJavaMemoryOld != 0)
            Log.i(TAG_MEMORY, "jMEM M:" + max + ", U:" + used + ", A:" + available + ", C:" + change + ", " + callingFunction);
        availableJavaMemoryOld = available;
    }
    else if (debugNativeMemory)
    {
        long used = Debug.getNativeHeapAllocatedSize() / 1024;
        long available = max - used;
        long change = available - availableNativeMemoryOld;
        if (availableNativeMemoryOld != 0)
            Log.i(TAG_MEMORY, "nMEM M:" + max + ", U:" + used + ", A:" + available + ", C:" + change + ", " + callingFunction);
        availableNativeMemoryOld = available;
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T13:20:30.903

几个月前我遇到了这个问题，试试这个，可能会有所帮助：

```
BitmapFactory.Options options = new BitmapFactory.Options();
options.inSampleSize = 8;
Bitmap bitmap = BitmapFactory.decodeStream(fis, null, options); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T13:44:22.007

此链接可能对您有所帮助[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)当大型 720x1280 手机的**drawable-xhdpi**文件夹 中的可绘制对象不可用时，也会出现此问题。请交叉检查您使用的可绘制对象是否在正确的可绘制文件夹中。

# axapta - 如何从 AX 2012 中的代码调用菜单项

> ID：15756225
> 
> 赞同：4
> 
> 时间：2013-04-02T04:39:54.823
> 
> 标签：axapta, x++, dynamics-ax-2012

我在 PurchTable“注册”菜单项的 clicked 方法中有一些自定义代码，现在我需要在执行按钮功能后从代码中运行注册命令。

我的问题是如何从代码中调用注册命令？

![截屏](https://i.stack.imgur.com/DwIjC.png)

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-04-02T14:35:42.707

我看到您实际上是在尝试执行 clicked() 方法，但是如果您想通过代码执行菜单项，则可以执行以下操作：

```
new MenuFunction(menuItemDisplayStr(MyDisplayMenuItem), MenuItemType::Display).run(); 
```

当然，上面的代码可以更改为执行不同类型的菜单项，例如，下面的代码运行一个输出菜单项：

```
new MenuFunction(menuItemOutputStr(MyOutputMenuItem), MenuItemType::Output).run(); 
```

如果您在尝试执行的菜单项上需要任何参数，您可以使用*Args*类传递它：

```
Args args = new Args();

args.record(myArgumentRecord);

args.caller(this);

new MenuFunction(menuItemOutputStr(MyOutputMenuItem), MenuItemType::Output).run(args); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T06:35:06.220

将按钮的 设置为是`AutoDeclaration`。`Register`

然后直接调用`clicked`：

```
 register.clicked(); 
```

不建议在表单方法中包含大量代码。

[参考](http://www.packtpub.com/article/technical-best-practices-for-dynamics-ax-shared-and-aot-object-standards)：

> 三层架构的基本概念是表单应该只用于表示层，因此表单上不应该有其他代码，例如业务逻辑。放置在表单上的代码也降低了它们的可重用性和进一步定制的便利性；例如，如果你想开发一个企业门户，写在表单上的代码将不得不在类或表方法等中重新编写，这会使实现变得复杂。

# iphone - 如何访问 iPhone 短信数据库？

> ID：15756229
> 
> 赞同：-1
> 
> 时间：2013-04-02T04:40:24.050
> 
> 标签：iphone, database, sms

我是 iPhone 技术的初学者，所以我不太了解如何访问 iPhone SMS 数据库？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T04:46:25.853

您可以访问 iPhone 数据库以访问移动库路径并`SMS.db`使用该路径附加文件，您将获得对 iPhone SMS 的访问权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-30T06:05:41.117

如果您在 JailBreak Phone 中工作，您可以使用以下路径访问 SMS：-

> /private/var/mobile/Library/SMS/sms.db

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-09-27T02:38:23.257

最简单的方法是在 iTunes 中备份 iPhone，然后访问备份文件位置，此处解释：https: [//support.apple.com/en-gb/HT204215](https://support.apple.com/en-gb/HT204215)

进入备份文件夹后，您可以通过散列文件名搜索 sms.db 文件 - 3d0d7e5fb2ce288813306e4d4636395e047a3d28 用于 sms.db

找到文件后，将文件复制并粘贴到其他位置 - 如果需要，您可以重命名新副本 sms.db。这是一个 SQLite 数据库，因此可以在您选择的编辑器中打开。理论上您可以编辑数据库，替换备份中的原始文件，然后将其恢复到您的 iPhone。

可以在此处找到 iTunes 备份中其他有趣文件的列表： [https ://www.iphonebackupextractor.com/blog/iphone-backup-location-all-files-extension/](https://www.iphonebackupextractor.com/blog/iphone-backup-location-all-files-extension/)

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-02T04:45:27.377

您不能以编程方式访问 SMS 数据库。没有公开`API`的 由 提供`Apple`。

# android - Android：Android 设备是否支持 JDBC？

> ID：15756230
> 
> 赞同：13
> 
> 时间：2013-04-02T04:40:27.327
> 
> 标签：android, mysql, jdbc, phpmyadmin

我正在做一个使用 JDBC 将数据发送到数据库而不使用任何 Web 服务的 Android 应用程序。我使用 Android 2.2 模拟器做了一个实验，我能够将数据发送到 MySQL DB (LOCALHOST)。之后我尝试使用 Android 2.2 设备发送，我将路径从 `jdbc:mysql://10.0.2.2:3306/`with更改为`jdbc:mysql://xx.xx.xx.xx:3306/`.

xx.xx.xx.xx 来自`ipconfig`我的本地主机。但它在设备中不起作用。可能是什么原因。

主要疑点：

1.  Android 设备目前是否支持 JDBC？
2.  Android 2.2 会支持 JDBC 吗？
3.  如果支持，哪些 Android 版本将支持 JDBC？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-09-17T07:13:03.500

是的。你一定要记得把你的 JDBC 连接代码放在一个`AsyncTask`.，否则你会 BURN BURN BURN！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T05:40:13.600

> Android 设备是否支持 JDBC。
> 
> Android 2.2 会支持 JDBC。
> 
> 如果支持，哪些 Android 版本将支持 JDBC。

NO android不支持本地MYSQL数据库所以我们不能使用JDBC连接frmo android设备，**它只**支持sqlite数据库。

如果您想从服务器使用您的数据库，那么只需为它创建一个 Web 服务，然后从服务器处理所有数据库连接。

但是它可以帮助您了解 JDBC 和 android 太可怕了！ [所以问题](https://stackoverflow.com/questions/7221620/android-jdbc-not-working-classnotfoundexception-on-driver/7221716#7221716)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T04:58:15.830

下载[MySQL JDBC Connector 3.0.17](http://downloads.mysql.com/archives.php?p=mysql-connector-java-3.0&v=3.0.17)并将其添加到您的 android 项目构建路径中。

```
import java.sql.Connection;

import java.sql.DriverManager;
import java.sql.ResultSet;
import java.sql.ResultSetMetaData;
import java.sql.Statement;
import android.app.Activity; 
```

> 导入android.os.Bundle；导入 android.widget.TextView；

```
public class MysqlSample01Activity extends Activity {

private static final String url = "jdbc:mysql://<server>:<port>/<database>";
private static final String user = "<username>";
private static final String pass = "<password>";

/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    testDB();
}

public void testDB() {
    TextView tv = (TextView)this.findViewById(R.id.text_view);
    try {
        Class.forName("com.mysql.jdbc.Driver");
        Connection con = DriverManager.getConnection(url, user, pass);
        /* System.out.println("Database connection success"); */

        String result = "Database connection success\n";
        Statement st = con.createStatement();
        ResultSet rs = st.executeQuery("select * from table_name");
        ResultSetMetaData rsmd = rs.getMetaData();

        while(rs.next()) {
            result += rsmd.getColumnName(1) + ": " + rs.getInt(1) + "\n";
            result += rsmd.getColumnName(2) + ": " + rs.getString(2) + "\n";
            result += rsmd.getColumnName(3) + ": " + rs.getString(3) + "\n";
        }
        tv.setText(result);
    }
    catch(Exception e) {
        e.printStackTrace();
        tv.setText(e.toString());
    }   

} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T05:01:14.453

听起来您的 Mysql 安装只允许来自本地主机的连接。更新您的 Mysql 配置以允许来自任何主机的连接。

从我所见，自 API 级别 1 起支持 java.sql，我认为该支持将很快被删除。

/托马斯

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-06-23T08:17:52.400

是的，您可以在 android 中使用 JDBC 连接到数据库。只需将此行添加到您的 gradle 依赖项中：

```
 compile group: 'mysql', name: 'mysql-connector-java', version: '5.1.44' 
```

并且不要忘记根据您的需要更改版本。

添加后，gradle sync 将处理所有事情，您只需像在简单的 java jdbc 程序中一样连接到 DB。

# sql - 显示 2 个查询的结果

> ID：15756235
> 
> 赞同：0
> 
> 时间：2013-04-02T04:41:11.863
> 
> 标签：sql

我有 2 个这样的 SQL 查询

```
SELECT TOP 100 PERCENT 
   COUNT(kodeall) AS Total, kodeall, kode, LEFT(kodeall, 1) AS kode1
FROM
   dbo.data 
WHERE 
   date BETWEEN '2013/03/01 00:00:00' AND '2013/03/01 23:59:00'
   AND (kodeall IS NOT NULL)
GROUP BY 
   kodeall, kode 
ORDER BY 
   kode1 
```

和结果

```
Total  l kodeall l kode l kode1 
2        1a         AA     1     
5        1d         BB     1           
2        2a         CC     2           
6        2d         DD     2           
1        2e         EE     2           
3        3a         FF     3           
2        3c         GG     3           
1        3f         WW     3 
```

查询 #2：

```
SELECT     
    COUNT(kodeall) AS Sum, LEFT(kodeall, 1) AS kode1
From 
    dbo.data 
WHERE 
     date BETWEEN '2013/03/01 00:00:00' 
     AND '2013/03/01 23:59:00' 
     AND (kodeall IS NOT NULL)
GROUP BY 
     LEFT(kodeall, 1) 
```

和结果

```
Sum l kode1 l 
 7      1     
 9      2     
 6      3 
```

如果我想显示这样的结果

```
Total  l kodeall l kode l kode1 l sum l Percentage
2        1a         AA     1       7     28.57 %
5        1d         BB     1       7     71.43 %
2        2a         CC     2       9     22.22 %
6        2d         DD     2       9     66.66 %
1        2e         EE     2       9     11.11 %
3        3a         FF     3       6     50 %
2        3c         GG     3       6     33.33 %
1        3f         WW     3       6     16.67 % 
```

sum 是查询 A 中 kode1 的 count kodeall。

和百分比 = 总计 / 总和 *100 示例 2/7*100

请帮我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:50:09.523

```
 SELECT TOP 100 PERCENT 
    COUNT(kodeall) AS Total,
kodeall, kode, 
LEFT(kodeall, 1) AS kode1 ,
    sum1,
    ((Count(kodeall)/sum1 )* 100) As percentage
FROM
   dbo.data 
INNER JOIN 
 (SELECT     
    COUNT(kodeall) AS Sum, 
LEFT(kodeall, 1) AS kode1
    From 
    dbo.data 
   WHERE 
      date BETWEEN '2013/03/01 00:00:00' 
      AND '2013/03/01 23:59:00' 
      AND (kodeall IS NOT NULL)
   GROUP BY 
     LEFT(kodeall, 1)  
  ) temp on temp.kode1 = dbo.data.kode1 

WHERE 
   date BETWEEN '2013/03/01 00:00:00' AND '2013/03/01 23:59:00'
   AND (kodeall IS NOT NULL)
   GROUP BY 
   kodeall, kode 
 ORDER BY 
   dbo.data.kode1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:52:05.743

这应该非常接近（未经测试）

```
With cte1 as (
    SELECT COUNT(kodeall) AS Total, kodeall, kode, LEFT(kodeall, 1) AS kode1
    FROM dbo.data 
    WHERE date >= '2013/03/01' AND  date < '2013/03/02'
       AND kodeall IS NOT NULL
    GROUP BY kodeall, kode 
), cte2 as (
    SELECT COUNT(kodeall) AS Sum, LEFT(kodeall, 1) AS kode1
    From dbo.data 
    WHERE date >= '2013/03/01' AND  date < '2013/03/02'
       AND kodeall IS NOT NULL
    GROUP BY LEFT(kodeall, 1)
)
SELECT c1.Total, c1.kodeall, c1.kode, c1.kode1, 
    c2.sum, c1.Total/c2.sum percentage
FROM cte1 c1 
    JOIN cte2 c2 ON c1.kode1 = c2.kode1 
```

小心使用`BETWEEN`，尤其是日期字段。我会使用大于或小于来代替。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:38:39.517

我想你自己已经很接近答案了。我以 SQL Server 作为 RDBMS 为例。您没有在问题中提到 RDBMS。
我使用两个 CTE（公用表表达式）来保存您的两个查询，然后将它们连接在一起并计算百分比，请注意，最终结果中的百分比实际上是一个字符串。

```
 ;WITH CTE_TotalKodeall
AS 
(
    SELECT TOP 100 PERCENT 
       COUNT(kodeall) AS Total, kodeall, kode, LEFT(kodeall, 1) AS kode1
    FROM
       dbo.data 
    WHERE 
       date BETWEEN '2013/03/01 00:00:00' AND '2013/03/01 23:59:00'
       AND (kodeall IS NOT NULL)
    GROUP BY 
       kodeall, kode 
    ORDER BY 
       kode1
), CTE_SUMKodeall
AS 
(
   SELECT     
    COUNT(kodeall) AS [Sum], LEFT(kodeall, 1) AS kode1
   From 
    dbo.data 
   WHERE 
     date BETWEEN '2013/03/01 00:00:00' 
     AND '2013/03/01 23:59:00' 
     AND (kodeall IS NOT NULL)
   GROUP BY 
     LEFT(kodeall, 1)  
)
SELECT A.Total, A.kodeall, A.kode, A.kode1, B.[sum], 
       LEFT(cast((A.Total/(B.[SUM]*1.0) *100.0) as varchar(30)),5)+'%' as Percentage
FROM CTE_TotalKodeall A 
JOIN CTE_SUMKodeall B
ON A.kode1 = B.kode1 
```

# jquery - 使用 jquery 切换执行多个操作

> ID：15756249
> 
> 赞同：0
> 
> 时间：2013-04-02T04:42:03.297
> 
> 标签：jquery, events, toggle

我试图通过 jquery 切换发生多个事件。我想显示/隐藏一个元素以及使用相同的单击事件将样式应用于下面的元素。有任何想法吗？这甚至可能吗？

```
$(document).ready(function(){
  $("button").click(function(){
  $("p").toggle();},function(){
  $("#write").css("background-color", "yellow");
  });
}); 
```

[http://jsfiddle.net/bbelch/nGFzW/](http://jsfiddle.net/bbelch/nGFzW/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:12:57.010

我猜你想要这个。如需更多帮助，我会在那里。快乐编码！！！

```
$(document).ready(function () {    
    $("button").click(function () {               
        var isVisible = $("#me").toggle().is(":visible");
        if (isVisible) {
            $("#change").css("background-color", "yellow");
        }
        else
        {
            $("#change").css("background-color", "red");
        }
    });
});

<html>
     <body>
        <button>Toggle between hide() and show()</button>
         <div id="me">show me then hide me </div>
         <div id="change">New Look</div>
    </body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:26:10.167

```
$(document).ready(function () {
    $("button").click(function () {
        $("#redcover").toggle();
        $("#write").toggleClass('blrrrry', 1000);

    });
}); 
```

`[Demo](http://jsfiddle.net/6KfvR/1/)`

# wallpaper - onHandleIntent() - 壁纸更改无法正常工作

> ID：15756253
> 
> 赞同：0
> 
> 时间：2013-04-02T04:42:11.007
> 
> 标签：wallpaper, intentservice

我正在使用 IntentService 在后台更改墙纸。在主 Activity 类中使​​用下面的代码，壁纸会正确地更改为图像，但是当代码添加到 onHandleItent() 时，背景每次都会更改为不同的纯色。这是内存问题还是什么？

Activity 类中的代码 - 工作正常：

```
public void ChangeWallpaper(String imagepath) {
DisplayMetrics displayMetrics = new DisplayMetrics();
getWindowManager().getDefaultDisplay().getMetrics(displayMetrics);
int height = displayMetrics.heightPixels;
int width = displayMetrics.widthPixels << 2;
final BitmapFactory.Options options = new BitmapFactory.Options();
options.inJustDecodeBounds = true;
Bitmap decodedSampleBitmap = BitmapFactory.decodeFile(imagepath, options);
options.inSampleSize = calculateInSampleSize(options, width, height);
options.inJustDecodeBounds = false;
decodedSampleBitmap = BitmapFactory.decodeFile(imagepath, options);
WallpaperManager wm = WallpaperManager.getInstance(this);
try {
    wm.setBitmap(decodedSampleBitmap);
} catch (IOException e) {
}
} 
```

onHandleIntent() 中的代码 - 无法正常工作：

```
 @Override
    protected void onHandleIntent(Intent workIntent) {
    String imagepath = workIntent.getStringExtra("String");
    DisplayMetrics displayMetrics = new DisplayMetrics();
    WindowManager hi = ((WindowManager) getBaseContext().getSystemService(Context.WINDOW_SERVICE));
    int height = displayMetrics.heightPixels;
    int width = displayMetrics.widthPixels << 2;
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    Bitmap decodedSampleBitmap = BitmapFactory.decodeFile(imagepath, options);
    options.inSampleSize = calculateInSampleSize(options, width, height);
    options.inJustDecodeBounds = false;
    decodedSampleBitmap = BitmapFactory.decodeFile(imagepath, options);
    WallpaperManager wm = WallpaperManager.getInstance(this);
    try {
        wm.setBitmap(decodedSampleBitmap);
    } catch (IOException e) {
    }
} 
```

有任何想法吗？

**编辑 2 - 问题（未解决）**

事实证明 onHandleIntent() 本身有问题。

为了测试它，我做了

1.  我在 onHandleIntent() 中添加了一个 SharedPreferences 以写入一个虚拟字符串“IS Started”，并将 onStartCommand() 包含到 IntentService 中，该 IntentService 读取虚拟 SharedPreferences 并在 Toast 中显示保存的字符串：

    ```
    public int onStartCommand(Intent intent, int flags, int startId) {
        SharedPreferences settings2 = getSharedPreferences("IS", 0);
        String IS = settings2.getString("IS","");
        Toast.makeText(this, "" + IS, Toast.LENGTH_SHORT).show();
        return super.onStartCommand(intent,flags,startId);
    } 
    ```

我还在 onIntentHandle 中向 SharedPrefs 添加了一个虚拟写入，如下所示：

```
 @Override
    protected void onHandleIntent(Intent intent) {
        SharedPreferences settings = getSharedPreferences("IS", 0);
        SharedPreferences.Editor editor = settings.edit();
        editor.putString("IS","IS Started");
        editor.commit();
    } 
```

1.  然后我两次调用该服务：第一次因为虚拟 SharedPref 将是空的，因为它在 onHandleIntent() 之前被调用，并且 onHandleIntent() 有机会写入虚拟字符串第二次（现在 onHandleIntent() 已经写了一些东西）用于 onStartCommand( ) 读取虚拟字符串的内容并显示它们。

结果：Toast 显示“已开始”，意思是 onHandleIntent() 正在被调用。

但是然后为了识别墙纸问题，我将 Toast 直接放在 onHandleIntent() 中，看看它是否像这样工作：

```
 @Override
    protected void onHandleIntent(Intent intent) {
        Toast.makeText(this, "onHandleWorks", Toast.LENGTH_SHORT).show();
    } 
```

结果：没有显示！

那么为什么 onHandleIntent() 被调用并且只识别一些命令呢？

**编辑 3**

onHandleIntent() 中的代码 - 目前是这样的：

```
 public class intentClass extends IntentService {

public intentClass() {
    super("intentClass");
}

    @Override
    protected void onHandleIntent(Intent workIntent) {
    String imagepath = workIntent.getStringExtra("String");
    DisplayMetrics displayMetrics = new DisplayMetrics();
    WindowManager hi = ((WindowManager) getBaseContext().getSystemService(Context.WINDOW_SERVICE));
    int height = displayMetrics.heightPixels;
    int width = displayMetrics.widthPixels << 2;

    // the problem is here - the above command doesn't retrieve the Display size

    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    Bitmap decodedSampleBitmap = BitmapFactory.decodeFile(imagepath, options);
    options.inSampleSize = 4; // this is what needs to be calculated.
    options.inJustDecodeBounds = false;
    decodedSampleBitmap = BitmapFactory.decodeFile(imagepath, options);
    WallpaperManager wm = WallpaperManager.getInstance(this);
    try {
        wm.setBitmap(decodedSampleBitmap);
    } catch (IOException e) {
    }
}
} 
```

当活动未扩展到 IntentService 时，如何获取活动之外的显示指标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:34:42.737

如果 intentService 将您的壁纸更改为某种随机纯色，则问题可能出在位图上。调试并检查代码是否生成正确的位图。检查位图路径、高度和宽度。

编辑：

```
public class intentService extends IntentService {

Context context;
private String res;

public intentService() {
    super("intentService");

}
@Override
protected void onHandleIntent(Intent workIntent) {
    String imagepath = workIntent.getExtras().getString("img");

    DisplayMetrics displayMetrics = new DisplayMetrics();
    WindowManager hi = ((WindowManager) getBaseContext().getSystemService(Context.WINDOW_SERVICE));
    int height = displayMetrics.heightPixels;
    int width = displayMetrics.widthPixels << 2;
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    Bitmap decodedSampleBitmap = BitmapFactory.decodeFile(imagepath, options);
    options.inSampleSize = 4;
    options.inJustDecodeBounds = false;
    decodedSampleBitmap = BitmapFactory.decodeFile(imagepath, options);
    WallpaperManager wm = WallpaperManager.getInstance(this);
    try {
        wm.setBitmap(decodedSampleBitmap);
    } catch (IOException e) {
    }
} 
```

}

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-04T15:07:36.957

您正在跳过代码中的一行，即

```
DisplayMetrics displayMetrics = new DisplayMetrics();    
WindowManager hi = ((WindowManager) getBaseContext().getSystemService(Context.WINDOW_SERVICE));
hi.getDefaultDisplay().getMetrics(displayMetrics); 
```

这是您的样本量出错的主要原因。现在您可以使用您的方法来计算样本量，而不是使用 sampleSize = 4;

希望你的问题现在得到解决:)

# php - 如何获取所有当前 javascript cookie 的键数组？

> ID：15756257
> 
> 赞同：0
> 
> 时间：2013-04-02T04:42:16.870
> 
> 标签：php, javascript, jquery, cookies, jquery-cookie

我有各种产品的链接。我正在使用 php 将数据库中的产品 ID 添加为每个链接的 id 值。

```
<a class="order_btn" id="<?php echo $row['product_id'];?>"><?php echo $row['product_name']; ?></a> 
```

我正在使用 jquery cookie 插件（[https://github.com/carhartl/jquery-cookie](https://github.com/carhartl/jquery-cookie)）来保存单击订单按钮的次数。我使用 id 属性中的产品 ID 作为已保存 cookie 的键。

```
$(".order_btn").click(function() {
  var productToAdd = $(this).attr("id");

  if($.cookie("Product-"+productToAdd) >= 1) { //If this is not the first item for the current product
    //Updating the number for the current product 
    var newNum = Number($.cookie("Product-"+productToAdd)) + 1;
    $.cookie("Product-"+productToAdd, newNum);
  } else { //If this the first item for the current product
    //Creating the first number for the current product
    $.cookie("Product-"+productToAdd, 1);
  }
}); //end click function for Order Button 
```

在购物车页面上，我需要列出每个已保存值的 cookie 的产品名称。因此，我需要能够获取 cookie 的键名，以便在数据库中查找产品名称。

如何获得一个包含所有当前 javascript cookie 的键的数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:48:15.937

您可以列出当前域的 cookie：

```
function listCookies() {
    var theCookies = document.cookie.split(';');
    var aString = '';
    for (var i = 1 ; i <= theCookies.length; i++) {
        aString += i + ' ' + theCookies[i-1] + "\n";
    }
    return aString;
} 
```

但出于安全原因，您不能列出其他域的 cookie

DixonD 在[如何使用 Javascript 列出当前页面的所有 cookie？](https://stackoverflow.com/questions/3400759/how-can-i-list-all-cookies-for-the-current-page-with-javascript)

# facebook - 获得 facebook 用户国家可能吗？

> ID：15756265
> 
> 赞同：0
> 
> 时间：2013-04-02T04:42:35.850
> 
> 标签：facebook, facebook-graph-api

我只有一个简单的问题。是否可以使用图形 API 获取 Facebook 用户国家/地区？如果是，如何？如果没有，你能提供一些其他的建议吗？

我尝试了不同的方法如何使用图形 api 获取国家，但遗憾的是它们都失败了。

我试试这个

[https://api.facebook.com/method/fql.query?query=SELECT%20current_location%20FROM%20user%20WHERE%20uid=4&access_token=YOUR_ACCESS_TOKEN](https://api.facebook.com/method/fql.query?query=SELECT%20current_location%20FROM%20user%20WHERE%20uid=4&access_token=YOUR_ACCESS_TOKEN)

它似乎有效，但仅适用于马克扎克伯格帐户。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:26:40.457

使用签名请求方法，您将获得国家代码。

详情：[https ://developers.facebook.com/docs/reference/login/signed-request/](https://developers.facebook.com/docs/reference/login/signed-request/)

# visual-studio-2008 - 无法从连接到 TFS2012 的 VS2008 创建构建定义

> ID：15756268
> 
> 赞同：0
> 
> 时间：2013-04-02T04:42:41.957
> 
> 标签：visual-studio-2008, build

我们正在使用连接到 TFS2012 的 VS2008。我们有一个要求，如果有人签入更改，则必须将最新版本的文件复制到未使用 TFS 映射的中央文件夹。我做了一些搜索，然后我发现如果我们可以通过构建事件来做到这一点，我所要做的就是创建新的构建定义并在签入时触发。我已经创建了构建定义，但是在确定时发生了这个错误。

![构建错误](https://i.stack.imgur.com/Sldok.png)

如何创建构建定义？或者有没有其他方法可以在 CheckIn 事件中复制最新版本的文件？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T11:20:09.553

您是否为 TFS 2012 安装了 VS2008 兼容性 GDR？你可以在[这里](http://www.microsoft.com/en-us/download/details.aspx?id=29983)找到它。

# android - 更改 Gridview 项目的可见性

> ID：15756269
> 
> 赞同：4
> 
> 时间：2013-04-02T04:42:49.710
> 
> 标签：android, gridview, custom-adapter

我有一个 Gridview 和自定义适配器。

在我的适配器中，我有一个静态 ViewHolder 实例。

```
static class ViewHolder
{ 
  TextView _model,tPrice,pPrice;
  ImageView picture;
} 
```

这是我的 ViewHolder。当用户单击片段中的按钮时，我只想让 tPrice 可见性消失。当我创建适配器的一个 istance 时，我为 tPrice VISIBLITY 发送一个整数参数。但它的数据仍然是静态数据。我想改变这个区域。我需要一个我当前视图的实例。我会将它投射到我的 ViewHolder。完成此操作后，我设置了可见性。但是我该怎么做呢？

这是getView和我的构造函数

```
private int TFV = View.GONE;
private int PFV=  View.GONE;

public ProductGridViewAdapter(Context p_context, int p_resourceId,ArrayList<Product> p_ProductList,int TFVisib,int PFVisib){
    super(p_context,p_resourceId,p_ProductList);
    originalItems = p_ProductList;
     TFV = TFVisib;
     PFV = PFVisib;
    _ctx = p_context;
    //....
}

public View getView(int position, View convertView, ViewGroup parent) {   
    ViewHolder holder = null;
    View row = convertView;
    if(row==null){
        holder = new ViewHolder();      
        row = li.inflate(_resourceId, null);
        holder._model = (TextView) row.findViewById(R.id.o_model);    
        holder.pPrice = (TextView) row.findViewById(R.id.product_pf);  
        holder.tPrice = (TextView) row.findViewById(R.id.product_tf);  
        holder.picture = (ImageView)row.findViewById(R.id.product_lv_image);
        row.setTag(holder);
    }else{
        holder = (ViewHolder) row.getTag();
    }

    Product f =null;

    if(originalItems!=null)
         f = originalItems.get(position);
    if (f != null) {
         holder._model.setText(f.GetCODE());
         holder.pPrice.setText(f.GetPRICE());
         holder.pPrice.setVisibility(PFV);
         holder.tPrice.setVisibility(TFV);
         holder.tPrice.setText(f.GetCURRENCY());
         File imgFile = new  File(uhandler.GetProductsFolderPath()+"/BIG"+f.GetCODE()+".jpg");
         if(imgFile.exists()){
             Bitmap myBitmap = BitmapFactory.decodeFile(imgFile.getAbsolutePath());
             holder.picture.setImageBitmap(myBitmap);
         }
    }
    return row;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T04:46:04.913

在您的自定义适配器类中，查看该`getView()`方法，您可以在其中将 GONE 或 VISIBLE 或 INVISIBLE 值设置为 tPrice TextView 或任何您想要的视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:36:43.667

我解决了我的问题。我重新设置了适配器。这种方式可能是一种不好的方式，但它的工作:)

# internet-explorer-10 - ie10 不会使用 curl.js css 插件加载 css 依赖项

> ID：15756270
> 
> 赞同：2
> 
> 时间：2013-04-02T04:42:49.567
> 
> 标签：internet-explorer-10, curljs

IE的另一个问题......像往常一样。

这个似乎特定于 IE10 和 curl.js 及其 css 插件。

使用加载css依赖项时

```
curl(['css!path/to/css/file.css']) 
```

IE10 完全没有做任何事情，没有成功或失败的回调，或者只是简单的错误，什么都没有。使用开发人员控制台，我在 IE7 到 IE9 模式下尝试了相同的代码，它们似乎工作正常......

我检查了 curl.js github 问题，但找不到有关此特定问题的信息。

这是一个已知的问题？有解决办法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-13T03:15:53.387

与 curl 相比，IE 10 的缓存没有被刷新是更大的问题。Curl 在 IE 10 加载 css 依赖项方面没有问题。

# iphone - UITableViewCellAccessoryCheckmark 问题，许多单元格仅通过检查一行来检查

> ID：15756273
> 
> 赞同：0
> 
> 时间：2013-04-02T04:43:03.237
> 
> 标签：iphone, ios, objective-c, uitableview

我有很多`tableview`行，大约 60 行，我希望用户能够`check`或他想要的行数。问题是当我检查某个时，该位置的所有其他单元格也会被检查。例如，如果我检查第 5 行，第 15、25、35 等行也会得到 a ，我不希望这种情况发生。我需要检查的行只是用户真正选择的行。这是我的方法代码`uncheck``UITableViewCellAccessoryCheckmark``cell``UITableViewCellAccessoryCheckmark``didSelectRowAtIndexPath`

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{ 
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    Materia *current = [Manejador MateriasEnListaAtIndex:indexPath.row ];
    if(cell.accessoryType == UITableViewCellAccessoryCheckmark){
        cell.accessoryType = UITableViewCellAccessoryNone;
        [ManejadorVistas EliminarMateria:current];
    }
    else{
        cell.accessoryType = UITableViewCellAccessoryCheckmark;
        [ManejadorVistas AgregarMateria:current];
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:47:22.327

设置`dequeueReusableCellWithIdentifier` 为`nil`喜欢波纹管，然后尝试使用它...

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:nil]; 
```

也在这种情况下编写你的代码..

```
if (cell == nil) {

    cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:nil] autorelease];

     // write your code here....
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T04:52:42.903

在你的 cellForRowAtIndexPath

```
UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];

if (cell == nil) {

    cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleValue1 reuseIdentifier:@"cell"];

     // write your code here....
}
Materia *current = [Manejador MateriasEnListaAtIndex:indexPath.row ];

//While reusing we have to check whether ManejadorVistas contains the object. 
//Because you would have added it inside didSelect Delegate

if([ManejadorVistas containsObject:current]) 
{
   cell.accessoryType = UITableViewCellAccessoryCheckmark;
}
else
{
   cell.accessoryType = UITableViewCellAccessoryNone;
} 
```

# css - HTML 5日期输入类型，展开日历下拉菜单的按钮出现在输入字段下方？CSS 问题？

> ID：15756276
> 
> 赞同：0
> 
> 时间：2013-04-02T04:43:29.190
> 
> 标签：css, html

我认为在我的网络应用程序中对 CSS 做了一些影响输入类型 = 日期的事情。根据下图，日历的下拉菜单出现在输入字段下方，这显然不是它应该在的位置。即使我将输入字段的宽度设置为非常大，这显然有足够的空间容纳日历下拉，它仍然出现在下方。我无法弄清楚 CSS 中发生了什么变化来影响它，我已经玩了好几个小时了。有谁知道它可能是什么？

作为一个仅供参考，我使用引导程序并在 Windows 上使用 Chrome 版本 25。

据我所知，这是我写的影响它的css。请注意，下面的前 4 个目标输入字段，因此定位此日期输入字段。其余的通过各种其他 CSS 影响它（即样式表等）

就个人而言，我已经玩过以下所有设置，但似乎无法弄清楚。

```
width:70%;
display:block;
margin-right: auto;
margin-left: auto;
color: #999;
font-size: inherit;
background-color: white;
border: 1px solid #cccccc;
-webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);
-webkit-transition: border linear 0.2s, box-shadow linear 0.2s;
height: 20px;
padding: 4px 6px;
margin-bottom: 9px;
line-height: 20px;
-webkit-border-radius: 3px;
border-radius: 3px;
font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
font-weight: normal;
vertical-align: middle;
margin: 0;
border-collapse: collapse;
border-spacing: 0;
border-spacing: 2px;
border-color: gray; 
```

![在此处输入图像描述](https://i.stack.imgur.com/BWe0m.jpg)

# java - 如何将 .obj 文件转换为 Android openGL？

> ID：15756283
> 
> 赞同：6
> 
> 时间：2013-04-02T04:44:25.277
> 
> 标签：java, android, opengl-es

我有一个 .obj 文件（一个 3D 模型），但我不知道如何将它加载到 Android openGL 中。这是如何实现的？

有没有关于这个主题的分步教程？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T05:17:57.080

你基本上有3个选择：

1.  采用包含模型加载功能的综合框架，如[Min3D](https://code.google.com/p/min3d/)、[Bonzai](http://bonzaiengine.com/index.php)或[Rajawali](https://github.com/MasDennis/Rajawali)。（这些框架有很多）就个人而言，我更喜欢 Min3D，因为它对您的应用程序设计施加了最小的限制，并且它比大多数替代方案都经过了更多的使用测试。可以在[这里](http://www.rozengain.com/blog/2010/05/17/loading-3d-models-with-the-min3d-framework-for-android/)找到使用 Min3D 加载模型的好教程。

2.  使用一个用 Java 为 Android 编写的独立模型加载器，就像[这样](https://code.google.com/p/android-gl/downloads/detail?name=ModelLoader_0.1.zip&can=2&q=)。如果我没记错的话，许可证是 GPL 并且与它的 API 的交互相当简单。

3.  编写你自己的模型加载器！OBJ 几乎是现有的最简单的文件格式解析，只需一两个小时即可构建您自己的自定义加载器。此途径将减轻您可能遇到的任何许可问题，如果您不熟悉 3D 渲染，它可能会作为一个有用的练习。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T05:00:48.247

在 android Rajawali 中有用于使用 3D 对象的免费库。[您可以在此处](http://www.rozengain.com/blog/2011/08/23/announcing-rajawali-an-opengl-es-2-0-based-3d-framework-for-android/)获取所有信息。它有一些非常好的教程，我希望这会对你有所帮助。它还将展示如何使用 .obj 文件。

[你可以从这里](https://github.com/MasDennis/Rajawali)得到图书馆。

并且还从他们那里下载这个[应用程序](https://play.google.com/store/apps/details?id=com.monyetmabuk.rajawali.tutorials&hl=en)来检查基于 Rajawali 的示例。

# python - Python 周数生成

> ID：15756285
> 
> 赞同：2
> 
> 时间：2013-04-02T04:44:48.727
> 
> 标签：python, datetime

我正在尝试根据用户输入的日期生成周数。我知道以下功能将为我提供输入日期的特定周数。

```
datetime.date(2012,5,21).isocalendar()[1] 
```

我的问题是我想让我一年中的第一周从 4 月 1 日而不是 1 月 1 日开始。这意味着，我每年的日历从 4 月 1 日开始，到 3 月 31 日结束。不是 1 月 1 日到 12 月 31 日。我可以使用任何内置功能吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:40:14.900

使用[日期时间](http://docs.python.org/2/library/datetime.html)

```
from datetime import date
end = date(2012, 5, 21)
start = date(2012, 4, 1)
Diff = end - start      
print Diff.days / 7     # convert to number of weeks 
```

# git - 如何在 Heroku 应用程序的私有 Git 存储库中安装 Python 模块？

> ID：15756286
> 
> 赞同：1
> 
> 时间：2013-04-02T04:44:55.973
> 
> 标签：git, heroku, github, pip, ssh-keys

我在本地工作站上写了一个 Python 包`packagename`，它看起来像这样：

```
packagename/
packagename/setup.py
packagename/modulename.py 
```

我使用这个 shell 命令`packagename`从一个安装：`virtualenv`

```
virt-env$ bin/pip install path/to/packagename 
```

我放入`packagename`了一个私有的 Github 存储库，位置如下：

```
github.com/username/packagename.git 
```

我使用这个 shell 命令`modulename`从一个安装：`virtualenv`

```
virt-env$ bin/pip install git+ssh://git@github.com/username/packagename#egg=modulename 
```

...在我[创建了一个 SSH 公钥并将其附加到我的 Github 帐户](https://help.github.com/articles/error-permission-denied-publickey)之后。

在我想使用的 Heroku 应用程序存储库中`modulename`，我添加了一行，`requirements.txt`如下所示：

```
-e git+ssh://git@github.com/username/packagename#egg=modulename 
```

**但是如何使用 SSH 密钥授权 Heroku？**

我发现 Github 有一个叫做[deploy keys](https://help.github.com/articles/managing-deploy-keys)的东西，但是在将部署密钥添加到 GitHub 存储库后，我不知道如何将部署密钥与 Heroku 结合起来。我认为没有太多关于如何执行此操作的示例，因为它们都隐藏在私有存储库中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:11:31.483

你有两个选择：

1.  [更改 Python buildpack](https://blog.heroku.com/archives/2012/11/13/hacking-buildpacks)，使其知道如何克隆私有存储库。
2.  [在本地克隆模块，将其添加到版本控制](http://debuggable.com/posts/git-fake-submodules:4b563ee4-f3cc-4061-967e-0e48cbdd56cb)并与您的应用程序一起推送。

我推荐#2。

# python - oauth2 库和 Netflix API 返回无访问令牌

> ID：15756287
> 
> 赞同：2
> 
> 时间：2013-04-02T04:45:02.710
> 
> 标签：python, rest, oauth, netflix

我一直在使用 netflix api 和 python oauth2 库的受保护身份验证。我提出签名请求没有问题，但是，为了允许用户使用他们的 netflix 帐户登录，我在尝试获取 access_token 时遇到了一些问题，我知道在某些情况下 OAuth 不返回 a `verifier`，甚至如果它应该，但是在从 netflix 的授权页面重定向后，我得到如下信息：`http://127.0.0.1:5000/authorized_user?oauth_token=some_token&oauth_verifier=`验证器为空。

我是图书馆的新手，不知道`verfier`不存在时该怎么办。因为，我成功地将用户重定向到 netflix 登录/授权页面。我假设我的错误来自我不完全理解的这一步。下面是我正在尝试的简化（shell）版本。我很感激朝着正确的方向前进，我阅读了 netflix 文档并阅读了库文档，但不知道该怎么做。

```
# Get request token (temporary)
resp, content = client.request(REQUEST_TOKEN_URL, "GET")

if resp['status'] != '200':
    raise Exception("Invalid response %s." % resp['status'])

request_token = dict(parse_qsl(content))

print 'Request token'
print  '  --> oauth_token          =  %s' % request_token['oauth_token']
print  '  --> oauth_token_secret   =  %s' % request_token['oauth_token_secret']
print  '  --> login_url            =  %s' % request_token['login_url']

# Redirect to netflix for user authorization

print 'Go to the following link: '
login_url = request_token['login_url']
access_token_url = '%s&oauth_consumer_key=%s' % (login_url, CONSUMER_KEY)

accepted = 'n'
while accepted.lower() == 'n':
    accepted = raw_input('Have you authorized me? (y/n) ')

resp, content = client.request(access_token_url, "POST")

token = oauth.Token(request_token['oauth_token'],
                    request_token['oauth_token_secret'])

client = oauth.Client(consumer, token)

resp, content = client.request(access_token_url, "POST")
access_token = dict(parse_qsl(content))

print "Access Token:"
print "    - oauth_token        = %s" % access_token['oauth_token']
print "    - oauth_token_secret = %s" % access_token['oauth_token_secret'] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T14:54:48.357

所以听起来你正在尝试使用 python-oauth2。不幸的是，这个库被广泛认为是废弃的软件。我强烈建议使用维护的库。为此，我可以推荐[rauth](https://github.com/litl/rauth)。我是 rauth 的维护者，因为它的价值。

现在不幸的是，Netflix 不接受新的应用程序到他们的 OAuth 基础设施中。但是，我确实为您写了一个示例，如果您愿意尝试一下，可以尝试一下。我不能保证如果没有一些调整它就不会工作，但它是：

```
from rauth import OAuth1Service

import re
import webbrowser

request_token_url = 'http://api-public.netflix.com/oauth/request_token'
access_token_url = 'http://api-public.netflix.com/oauth/access_token'
authorize_url = 'https://api-user.netflix.com/oauth/login'
base_url = 'http://api-public.netflix.com/'

netflix = OAuth1Service(consumer_key='123',
                        consumer_secret='456',
                        request_token_url=request_token_url,
                        authorize_url=authorize_url,
                        access_token_url=access_token_url,
                        base_url=base_url)

request_token, request_token_secret = netflix.get_request_token()

oauth_callback = 'http://example.com/oauth/authorized'

params = {'oauth_callback': oauth_callback, 'application_name': 'your_app'}
authed_url = netflix.get_authorize_url(request_token, **params)

print 'Visit this URL in your browser: ' + authed_url
webbrowser.open(authed_url)

url_with_token = raw_input('Copy URL from your browser\'s address bar: ')
request_token = re.search('\?oauth_token=([^&]*)', url_with_token).group(1)

s = netflix.get_auth_session(request_token, request_token_secret)

r = s.get('users/current')
print r.content 
```

这里需要注意几件事：Netflix 在他们的文档中没有提到验证者。所以我猜这就是你看不到的原因。其次，他们正在返回一个“授权”请求令牌。基本上，这个令牌取代了他们流程中的验证者引脚。

希望这可以帮助！

# css - font-face 不适用于中文字体

> ID：15756291
> 
> 赞同：2
> 
> 时间：2013-04-02T04:45:14.180
> 
> 标签：css, font-face

正如标题所说：font-face 不适用于我的中文字体。

我下载了一些中文字体，但由于某种原因，我的 css 无法识别这些字体。这是我使用的 CSS：

```
@font-face
{
    font-family: 'chinese';
    src: url('chinese.ttf') format('truetype');
}

html {
    height:100%;
    font-family:"chinese";
} 
```

现在，如果我将 url 更改为“普通”字体，它可以工作；也适用于下载的字体（我用 Din 测试过）。不幸的是，“普通”字体不支持中文，因此字符不会受到影响。

两种字体都位于与 css 文件相同的文件夹中，因此 url 不是问题。而且所有字符集都是正确的（否则我根本看不到默认的中文）。

对于中文，我可能需要做一些额外的事情吗？或者它是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T05:08:09.787

在声明中文字体系列时，通常最好输入字体的罗马拼音（例如“SimHei”）并在同一声明中将中文字符声明为单独的字体。它的作用是帮助参考字体文件，无论天气如何，它都以其中文或西方名称存储在本地系统中 - 您在这里涵盖了所有基础。

***例子 ：***

```
font-family: Tahoma, Helvetica, Arial, "Microsoft Yahei","微软雅黑", STXihei, "华文细黑", sans-serif; 
```

**供您参考：** [CSS中使用中文字体的好规则](http://www.kendraschaefer.com/2012/06/chinese-standard-web-fonts-the-ultimate-guide-to-css-font-family-declarations-for-web-design-in-simplified-chinese/)

我认为这可以帮助您解决问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:01:26.773

参考这篇文章，

我认为您需要相同的答案:)

```
http://stackoverflow.com/questions/15756093/is-the-css-right/15756147#15756147 
```

将字体转换为“woff”

这将解决你的目的..

样本 ：

```
@font-face {
  font-family: 'Droid Serif';
  font-style: normal;
  font-weight: 700;
  src: local('Droid Serif Bold'), local('DroidSerif-Bold'), url(http://themes.googleusercontent.com/static/fonts/droidserif/v3/QQt14e8dY39u-eYBZmppwTqR_3kx9_hJXbbyU8S6IN0.woff) format('woff');
} 
```

您需要修改字体名称和 url :)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-13T01:24:41.923

据我所知，台湾有一个服务可以帮助你使用不同的中文字体。

[http://en.justfont.com/fonts](http://en.justfont.com/fonts)

由于中文字体文件较大，建议使用谷歌云服务。但是上面没有合适的中文字体。所以你可以试试这个 justfont 网络字体服务。

1.  为特定字体粗细选择所需的任何字体。然后它将被添加到您的项目中。
2.  选择您的选择器，例如`.notosans`，`#notosans`或`h2`
3.  单击“JS”按钮并获取您的设置代码
4.  之前添加`<body>`
5.  插入您的班级或身份证。

试一试，获得漂亮的中文字体。:)

# jquery - 如何在没有 mac 的情况下测试网站是否准备好视网膜？

> ID：15756294
> 
> 赞同：3
> 
> 时间：2013-04-02T04:45:34.910
> 
> 标签：jquery, css, macos, retina-display

我不确定如何在无法测试并查看它是否正常工作的情况下使网站视网膜设备兼容。我已按照此处的指南[http://www.presscoders.com/2012/10/how-to-make-your-wordpress-theme-retina-ready/](http://www.presscoders.com/2012/10/how-to-make-your-wordpress-theme-retina-ready/)安装和设置插件 wp-retina-2x 及其似乎它应该工作，但我无法判断它是否真的有效。

这就是我正在使用的[http://brainbuzzmedia.com/themes/expression/](http://brainbuzzmedia.com/themes/expression/)

如果有人有视网膜设备，是否有任何较小的图像以视网膜分辨率显示？如果他们是，他们的文件名将在其末尾有“@2x”。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-04T17:28:02.560

只需打开您的 Chrome 开发人员工具并将鼠标悬停在`<img>`标签上（此评论末尾的屏幕截图）。您将看到两种尺寸。一是图片在服务器上的原始大小，二是你在网站上看到的图片大小。

原始图像大小至少应为标签内图像参数大小的两倍。如果是这种情况，则您的图像已准备好视网膜。你不需要有视网膜显示器。

例如：

您网站上用于 img 的 Html：`<img width="100" height="100" alt="logo" />`

保存在服务器上的图像的原始（自然）尺寸：200x200

![在此处输入图像描述](https://i.stack.imgur.com/CtvrG.png)

# sockets - 无法获取整个 http 消息

> ID：15756300
> 
> 赞同：1
> 
> 时间：2013-04-02T04:46:13.583
> 
> 标签：sockets, http, curl

我正在使用 curl 向我的服务器发送**POST HTTP**消息。在服务器端，我正在打开一个套接字并使用以下代码读取数据

```
recv(socket_Fd, (void *)ucBuffer, (size_t)((sizeof(ucBuffer) - 1)), NULL); 
```

我能够获得**POST**消息的标题，但在消息正文中我只得到一行，其余的都丢失了。我在服务器端收到的数据。

```
 POST /info HTTP/1.1
 User-Agent: curl/7.22.0 (i686-pc-linux-gnu) libcurl/7.22.0 OpenSSL/1.0.1    zlib/1.2.3.4 libidn/1.23 librtmp/2.3
 Host: 192.168.0.57:10000
 Accept: */*
 Content-Length: 356
 Content-Type: application/x-www-form-urlencoded

 Bhupesh Bhargava 
```

在消息头中，它显示正确的内容长度，但缺少消息正文。知道我在哪里做错了。我正在使用的 curl 命令

```
curl --data-binary @/home/bhupesh/data_save2 http://192.168.0.57:10000/info 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T17:16:29.950

curl 命令似乎没问题，如果我们[按照此处的文档](http://curl.haxx.se/docs/manpage.html#--data-binary)进行操作，则以下内容应该是正确的。

> 数据以与 --data-ascii 类似的方式发布，除了保留换行符并且从不进行转换。

因此，这给我们留下了这样一个事实，即您的服务器实现中应该存在问题。不太确定您是如何在服务器上获取接收到的内容的，但是您应该小心自己对接收到的内容进行排序。[这](https://stackoverflow.com/a/6090610/782094)是一个示例，您可以如何做到这一点。

# apache - 使用 Apache 启用 url 重写

> ID：15756304
> 
> 赞同：0
> 
> 时间：2013-04-02T04:46:31.443
> 
> 标签：apache, tomcat, url-rewriting

想要我尝试实现，当 url 达到 localhost/nap/ 时，它应该在内部调用 url localhost/nap/inspect.do

为了实现这一点，使用 Apache 2.2，以下是我遵循的步骤，

1.  取消注释行，LoadModule rewrite_module modules/mod_rewrite.so
2.  在 httpd.cnf 文件中添加以下行 RewriteEngine On RewriteCond %{REQUEST_URI} !^/nap/ RewriteRule ^(.*)$ /nap/inspect.do$1 [L] 重新启动 apache 服务器

    但是这个配置对我没有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-01T14:48:11.177

你只需要在 httpd.cnf 文件中：

```
RewriteEngine On
RewriteRule ^/nap/$ /nap/inspect.do [L] 
```

所有带有 /localhost/nap/ 的请求都将被重定向到运行文件 $DocumentRoot/nap/inspect.do 脚本。L 标志忽略同一文件中的所有其他重写规则。

# c# - 如何在子页面上使用 document.ready 功能

> ID：15756308
> 
> 赞同：0
> 
> 时间：2013-04-02T04:46:51.813
> 
> 标签：c#, javascript, asp.net, master-pages, document-ready

我需要在我的网站上使用 JavaScript。当我创建新网页时，它可以与 JavaScript 一起正常工作。当我创建一个新网页时，它是从母版页派生的子页。此页面不支持我的 JavaScript。我将此代码用于多个单词的自动完成属性。

我的代码在这里：

标题中内容占位符中的 JavaScript 代码

```
<%@ Page Language="C#" MasterPageFile="~/Master_Front.master" AutoEventWireup="true"
    CodeFile="Mailbox.aspx.cs" Inherits="Mailbox" Title="Mail System" %>

<asp:Content ID="Content1" ContentPlaceHolderID="head" runat="Server">

    <link href="Style/ui-lightness/jquery-ui-1.8.21.custom.css"rel="stylesheet" type="text/css" />
    <script src="script/jquery.min.js" type="text/javascript"></script>
    <script src="script/jquery-ui.min.js" type="text/javascript"></script> 
        <script type="text/javascript">
        $(document).ready(function() {
            SearchText();
        });
        function SearchText() {
            $("#txtto").autocomplete({
                source: function(request, response) {
                    $.ajax({
                        type: "POST",
                        contentType: "application/json; charset=utf-8",
                        url: "Mailbox.aspx/GetAutoCompleteData",
                        data: "{'username':'" + extractLast(request.term) + "'}",
                        dataType: "json",
                        success: function(data) {
                            response(data.d);
                        },
                        error: function(result) {
                            alert("Error");
                        }
                    });
                },
                focus: function() {
                    // prevent value inserted on focus
                    return false;
                },
                select: function(event, ui) {
                    var terms = split(this.value);
                    // remove the current input
                    terms.pop();
                    // add the selected item
                    terms.push(ui.item.value);
                    // add placeholder to get the comma-and-space at the end
                    terms.push("");
                    this.value = terms.join(", ");
                    return false;
                }
            });
            $("#txtto").bind("keydown", function(event) {
                if (event.keyCode === $.ui.keyCode.TAB &&
                        $(this).data("autocomplete").menu.active) {
                    event.preventDefault();
                }
            })
            function split(val) {
                return val.split(/,\s*/);
            }
            function extractLast(term) {
                return split(term).pop();
            }
        }
    </script>
</asp:Content> 
```

C#代码：

```
[WebMethod]
public static List<string> GetAutoCompleteData(string user_name)
{
    List<string> result = new List<string>();
    SqlDataReader dr=General.ReturnDR("select DISTINCT mailid from UserDetails where mailid LIKE '%"+user_name+"%'");
    while (dr.Read())
    {
        result.Add(dr["mailid"].ToString());
    }
    return result;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:48:11.797

您可以将所有脚本放在[document.ready](http://api.jquery.com/ready/)中，以便在脚本访问元素时准备好元素。

```
$(document).ready(function(){
    //put all your script of child page here.
}); 
```

# qt - 改变 QTableView 的选择行为

> ID：15756311
> 
> 赞同：0
> 
> 时间：2013-04-02T04:46:58.917
> 
> 标签：qt, qtableview

我在 Qt 中使用 QTableView，我有一个表格，其中每个单元格都有不同的文本颜色。我有选择行为选择整行。但是当我选择任何行时，所选行的文本颜色会变为白色。我不想在选择行时更改文本颜色。我希望在选择任何行时显示原始颜色。

我尝试使用样式表，但它也改变了整行文本的颜色。

我在这里发布示例代码

```
QTableView * pQTableView  = new QTableView();
QStandardItemModel *model = new QStandardItemModel(5,3);

    pQTableView->setSelectionBehavior(QAbstractItemView::SelectRows);
    pQTableView->setModel(model);
    for(int row = 0;row < 5;row++)
          for(int column = 0; column < 3; column++)
          {
             QModelIndex index1= model->index(row,column);

              QVariant  value("Swaminarayan");
              model->setData(index1, value,Qt::DisplayRole );

          }
    QModelIndex index1= model->index(0,0);
    QVariant Obj(Qt::green);
    model->setData(index1,Obj,Qt::TextColorRole );

     index1= model->index(0,1);
    QVariant Obj1(Qt::red);
    model->setData(index1, Obj1,Qt::TextColorRole );
    pQTableView->show(); 
```

在这里您可以看到第一个单元格的颜色为绿色，第二个单元格的颜色为红色，一旦我们选择第一行颜色更改为白色。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-06-23T12:00:38.273

您也可以将 TableView 的选择模式设置为 NoSelection。然后，您可以使用 itemClicked() 信号获取项目索引并根据需要为行中的每个项目设置其颜色。像这样的东西：

```
connect( myTableView,
    SIGNAL( clicked( const QModelIndex &) ), 
    this, 
    SLOT( onItemClicked(const QModelIndex &) ) ) ; 
//....

void DataModel::onItemClicked(const QModelIndex &index)
{
  //get the clicked item
  QStandardItem *clickedItem = myDataModel->itemFromIndex(index);

  // get the row
  int selectedRow = clickedItem->row();

  // for each col change the color as you want
  for(int c = 0, colCount = myDataModel->columnCount(); c < colCount; ++c)
  { 
    QStandardItem *itemToChange = myDataModel->item( selectedRow, c);
    QBrush brush;
    brush.setColor(Qt::red);
    itemToChange ->setData(brush, Qt::ForegroundRole);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-18T14:52:17.930

看来您应该基于 QTableView 实现自己的表格视图并重新加载 data() 函数：

```
QVariant YourTableViewClass::data(const QModelIndex &index, int role) const
{
    if(!index.isValid()) {
        return QVariant();
    }
    /* any other checks here */

    switch(role) {
        case Qt::BackgroundRole:
            return QColor(/* background colour here */);
        case Qt::ForegroundRole:
            return QColor(/* foreground colour here */);
        case Qt::DisplayRole:
            /* any other actions here */
        default:
            break;
    } /* switch(role) */

    return QVariant();
} 
```

`Qt::BackgroundRole`你可以实现你的`Qt::ForegroundRole`颜色。

请参阅[http://qt-project.org/doc/qt-5.0/qtcore/qabstracttablemodel.html](http://qt-project.org/doc/qt-5.0/qtcore/qabstracttablemodel.html)以获取 QAbstractTableModel 以供参考。希望能帮助到你。

# php - 在 Postgres 中，使用 fetchAll(PDO::FETCH_NUM)。如何摆脱双引号？

> ID：15756314
> 
> 赞同：0
> 
> 时间：2013-04-02T04:47:05.353
> 
> 标签：php, postgresql, pdo, double-quotes

如何在没有双引号的情况下获取数据？

让我解释一下：我正在使用 PostgreSQL 数据库和 PHP PDO 来获取数据。

它返回的数据是：

```
[["1358991300","70175.47"],["1359077700","70437.59"]...] 
```

但我需要的是：

```
[[1358991300,70175.47],[1359077700,70437.59]...] 
```

基本上所有数据，没有双引号。

预先感谢您的任何帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:59:21.660

~~Postgres~~PDO 在 PHP 中返回字符串而不是预期的数据类型。

尝试通过以下方式转换类型：

```
$timestamp = intval($row[0]);
$energy = floatval($row[1]); 
```

**更新**

PDO 通过 bindColumn 对类型转换的支持有限：

[PDO + MySQL 总是返回字符串，但是 MsSQL 呢？](https://stackoverflow.com/questions/6017354/pdo-mysql-always-returns-strings-but-what-about-mssql)

[http://php.net/manual/en/pdostatement.bindcolumn.php](http://php.net/manual/en/pdostatement.bindcolumn.php)

我不使用 Postgres，所以有人可以确认吗？

**更新 2**

由于您是 json_encoding，请尝试（PHP >= 5.3.3）：

```
json_encode($result, JSON_NUMERIC_CHECK); 
```

自动将数字字符串转换为数字。

# codeigniter - 没有 $route 的负载控制器

> ID：15756315
> 
> 赞同：0
> 
> 时间：2013-04-02T04:47:08.710
> 
> 标签：codeigniter

示例：此加载具有功能的默认控制器/类`page`，

```
www.example.com/page 
```

除非我们有控制器/类命名`page`并设置`$route['page'] = 'page';`它会加载控制器。但是如果我们不设置`$route`，它仍然会加载 default_controller。

`controller`这是真的`$route['']`吗？**即使没有同名的默认控制器功能，是否**`page`也无法在不设置的情况下加载控制器？`$route['']`

 ****编辑：**

我访问

```
www.mysite.com/index.php/user 
```

我确实有`user`带`index`功能的控制器，但我的路由文件只包含：

```
$route['default_controller'] = 'page';
$route['(:any)'] = 'page/$1';
$route['product'] = 'product';
//$route['user'] = 'user';
$route['404_override'] = ''; 
```

返回`404`，仅在我取消注释时才有效：`$route['user'] = 'user';`

为什么？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:24:39.080

不，那不是真的。默认情况下，CodeIgniter[直接将 URI 段映射](http://ellislab.com/codeigniter/user-guide/general/urls.html)到：

```
example.com/index.php/controller/method/param/param/... 
```

或者，如果您有一个 .htaccess / 类似的解决方案来删除 index.php：

```
example.com/controller/method/param/param/... 
```

当您希望使用不直接映射到此约定的 URL 时，将使用[路由。](http://ellislab.com/codeigniter/user-guide/general/routing.html)

**编辑**：您有冲突的路线。CodeIgniter 将按从上到下的顺序查看每条路由，如果找到匹配的，它将停止查找并处理该路由。因为你有一个`(:any)`包罗万象的路线，它会匹配*任何东西*（就像它说的那样）。

经验法则是首先放置最具体的路线，然后再获得更通用和全面的路线。您的`(:any)`路线应该是您列表中的最后一条。并且默认控制器和 404 覆盖应该保留在第一位。

```
$route['default_controller'] = 'page';
$route['404_override'] = '';

$route['product'] = 'product';
$route['user'] = 'user';
$route['(:any)'] = 'page/$1'; 
```

您需要添加`product`和`user`路由，因为您已经定义了`(:any)`路由。如果您想避免为每个现有控制器编写路由规则，但仍要利用包罗万象的控制器，请考虑改用`404_override`控制器/方法。您可以进行验证以检查 URI 在此处是否有效。如果没有，请确保抛出 404 错误（您可以使用`show_404()`），因为任何不存在的 URL 都会被路由到那里。**

# java - java - 如何使用applet、awt和swing在java中制作动画应用程序？

> ID：15756318
> 
> 赞同：0
> 
> 时间：2013-04-02T04:47:17.077
> 
> 标签：java, swing, animation, applet, awt

我想用java制作一个可以在浏览器上运行的应用程序，如以下链接：

1.  [http://phet.colorado.edu/sims/geometric-optics/geometric-optics_en.html](http://phet.colorado.edu/sims/geometric-optics/geometric-optics_en.html)
2.  [http://www.onlinemathlearning.com/ray-diagrams.html](http://www.onlinemathlearning.com/ray-diagrams.html)

我是编程新手。我怎样才能开始在java中创建它？

请给我任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T04:49:19.360

请参阅[如何制作 Applet](http://docs.oracle.com/javase/tutorial/uiswing/components/applet.html)，其中有一个带有动画的 Swing Applet 示例。

> 我是编程新手。

阅读本教程的其余部分也不会有什么坏处，因为它包含了您想了解的有关 Swing 的大部分内容。

# ruby-on-rails - 当我访问控制器中的不同操作时，实例变量会重置吗？

> ID：15756322
> 
> 赞同：1
> 
> 时间：2013-04-02T04:47:56.360
> 
> 标签：ruby-on-rails, ruby

我认为`@user`是一个实例变量，应该在我访问 之后设置`localhost://users/1`，现在如果我导航到`localhost://users/new`，为什么`@user`是 nil？

```
class UsersController < ApplicationController
  def new
    # normally you would create a new model and assign it to the instance variable,
    # but if I comment it out, why is it nil instead of keeping the value from show action?
    # @user = User.new
  end

  def show
    @user = User.find(params[:id])
  end
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T04:49:47.537

实例变量仅在请求范围内“活动”。在每个请求期间都会创建一个控制器类的新实例。因此，如果您访问显示页面，则会使用调用的 show 方法创建控制器的实例。当您访问 new 时，当前控制器被销毁并创建一个新控制器并调用新方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:56:08.417

实例变量的名称以 @ 开头，其范围仅限于 self 所指的任何对象。两个不同的对象，即使它们属于同一个类，也允许它们的实例变量具有不同的值。从对象外部，实例变量不能被改变甚至观察（即，ruby 的实例变量永远不会公开），除非通过程序员明确提供的任何方法。与全局变量一样，实例变量在初始化之前都具有 nil 值。有关更多详细信息，请参阅： [http ://www.railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/](http://www.railstips.org/blog/archives/2006/11/18/class-and-instance-variables-in-ruby/)

# c++ - 函数指针生成“无效使用非静态成员函数”错误

> ID：15756331
> 
> 赞同：8
> 
> 时间：2013-04-02T04:48:35.720
> 
> 标签：c++, function-pointers

我试图以更好的方式掌握指针函数的概念。所以我有一个非常简单且有效的示例：

```
#include <iostream>

using namespace std;

int add(int first, int second)
{
    return first + second;
}

int subtract(int first, int second)
{
    return first - second;
}

int operation(int first, int second, int (*functocall)(int, int))
{
    return (*functocall)(first, second);
}

int main()
{
    int  a, b;
    int  (*plus)(int, int);
    int  (*minus)(int, int);
    plus = &add;
    minus = &subtract;
    a = operation(7, 5, add);
    b = operation(20, a, minus);
    cout << "a = " << a << " and b = " << b << endl;
    return 0;
} 
```

到目前为止一切顺利，现在我需要将函数分组到一个类中，并根据我使用的函数指针选择加法或减法。所以我只是做了一个小的修改：

```
#include <iostream>

using namespace std;

class A
{
public:
int add(int first, int second)
{
    return first + second;
}

int subtract(int first, int second)
{
    return first - second;
}

int operation(int first, int second, int (*functocall)(int, int))
{
    return (*functocall)(first, second);
}
};

int main()
{
    int  a, b;
    A a_plus, a_minus;
    int (*plus)(int, int) = A::add;
    int (*minus)(int, int) = A::subtract;
    a = a_plus.operation(7, 5, plus);
    b = a_minus.operation(20, a, minus);
    cout << "a = " << a << " and b = " << b << endl;
    return 0;
} 
```

明显的错误是：

```
ptrFunc.cpp: In function ‘int main()’:
ptrFunc.cpp:87:29: error: invalid use of non-static member function ‘int A::add(int, int)’
ptrFunc.cpp:88:30: error: invalid use of non-static member function ‘int A::subtract(int, int)’ 
```

因为我没有指定要调用哪个对象（我现在不想使用静态方法）

**编辑：** 一些评论和答案表明非静态版本（如我所写）是不可能的。（感谢所有人）因此，以下列方式修改类也行不通：

```
#include <iostream>

using namespace std;

class A
{
    int res;
public:
    A(int choice)
    {
        int (*plus)(int, int) = A::add;
        int (*minus)(int, int) = A::subtract;
        if(choice == 1)
            res = operation(7, 5, plus);
        if(choice == 2)
            res = operation(20, 2, minus);
        cout << "result of operation = " << res;
    }
int add(int first, int second)
{
    return first + second;
}

int subtract(int first, int second)
{
    return first - second;
}

int operation(int first, int second, int (*functocall)(int, int))
{
    return (*functocall)(first, second);
}
};

int main()
{
    int  a, b;
    A a_plus(1);
    A a_minus(2);
    return 0;
} 
```

产生了这个错误：

```
ptrFunc.cpp: In constructor ‘A::A(int)’:
ptrFunc.cpp:11:30: error: cannot convert ‘A::add’ from type ‘int (A::)(int, int)’ to type ‘int (*)(int, int)’
ptrFunc.cpp:12:31: error: cannot convert ‘A::subtract’ from type ‘int (A::)(int, int)’ to type ‘int (*)(int, int)’ 
```

请问我可以知道如何解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T05:05:03.343

声明指向成员方法的函数指针的语法是：

```
int (A::*plus)(int, int) = &A::add;
int (A::*minus)(int, int) = &A::subtract; 
```

要调用成员方法，请使用 .* 或 ->* 运算符：

```
 (a_plus.*plus)(7, 5); 
```

也看看[http://msdn.microsoft.com/en-us/library/b0x1aatf(v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/b0x1aatf(v=vs.80).aspx)

希望这可以帮助。

完整代码：

```
 #include <iostream>

    using namespace std;

    class A
    {
    public:
    int add(int first, int second)
    {
        return first + second;
    }

    int subtract(int first, int second)
    {
        return first - second;
    }

    int operation(int first, int second, int (A::*functocall)(int, int))
    {
        return (this->*functocall)(first, second);
    }
    };

    int main()
    {
        int  a, b;
        A a_plus, a_minus;
        int (A::*plus)(int, int) = &A::add;
        int (A::*minus)(int, int) = &A::subtract;
        a = a_plus.operation(7, 5, plus);
        b = a_minus.operation(20, a, minus);
        cout << "a = " << a << " and b = " << b << endl;
        return 0;
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T04:53:07.890

您不能那么容易地将非静态成员函数作为参数传递。为了您的需要，我相信最好覆盖运算符：http: [//www.learncpp.com/cpp-tutorial/92-overloading-the-arithmetic-operators/](http://www.learncpp.com/cpp-tutorial/92-overloading-the-arithmetic-operators/)

但是，如果您真的需要它们作为实际的成员函数 - 只需将它们设为静态即可。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T05:20:31.967

您对代码所做的编辑仍然是错误的，因为它不会使成员函数成为静态的。您需要通过添加说明符使加法、减法等函数成为静态`static`：

```
#include <iostream>

using namespace std;

class A
{
    int res;
public:
    A(int choice)
    {
        int (*plus)(int, int) = A::add;
        int (*minus)(int, int) = A::subtract;
        if(choice == 1)
            res = operation(7, 5, plus);
        if(choice == 2)
            res = operation(20, 2, minus);
        cout << "result of operation = " << res;
    }
static int add(int first, int second)
{
    return first + second;
}

static int subtract(int first, int second)
{
    return first - second;
}

static int operation(int first, int second, int (*functocall)(int, int))
{
    return (*functocall)(first, second);
}
}; 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-02T05:49:52.917

请参阅下面的代码。函数调用在不使它们成为静态的情况下工作。

```
class A
{
  public:
  int add(int first, int second)
  {
      return first + second;
  }

  int subtract(int first, int second)
  {
      return first - second;
  }

  int operation(int first, int second, int(A::*functocall)(int, int))
  {
      return (this->*functocall)(first, second);
  }
};
//typedef int(A::*PFN)(int, int) ;
int main()
{
    int  a, b;
    A a_plus, a_minus;
    a = a_plus.operation(7, 5, &A::add);
    b = a_minus.operation(20, a, &A::subtract);
    cout << "a = " << a << " and b = " << b << endl;
    return 0;
} 
```

# javascript - JQuery 移动自定义水平单选按钮在实际设备中不起作用

> ID：15756333
> 
> 赞同：3
> 
> 时间：2013-04-02T04:48:53.753
> 
> 标签：javascript, jquery, css, jquery-mobile, jquery-mobile-radio

最近我在 Stackoverflow 上问了一个问题，即**如何自定义水平 jQuery-mobile 单选按钮**，您也可以从这个链接查看帖子[如何自定义水平 jQuery-mobile 单选按钮](https://stackoverflow.com/questions/14643485/how-to-customize-horizontal-jquery-mobile-radio-buttons)。一位开发人员非常粗略地用非常好的 JSFiddle 示例回答了这个问题。根据他的指示，我实现了自定义 JQuery Mobile 单选按钮，并且在桌面浏览器中一切正常。

但是，当我检查实际设备（Galaxy S 2、iPhone 5、Mac 模拟器和 Android 模拟器）时，它的工作方式不像桌面浏览器那样工作。我不确定这里出了什么问题，但我可以理解我需要做一些小调整来支持实际设备。因此，我不擅长 JS，任何人都可以尽快研究一下。

这是**Gajotres** [http://jsfiddle.net/Gajotres/779Kn/完成的上一个 JSFiddle 示例](http://jsfiddle.net/Gajotres/779Kn/)

```
$(document).on('pagebeforeshow', '#index', function(){     
    $('<div>').addClass('checkBox').appendTo('fieldset div div.ui-radio label');
    $('input[type="radio"]').each(function(){        
        ($(this).is(':checked')) ? $(this).next().find(".checkBox").addClass('checked') : $(this).next().find(".checkBox").addClass('not-checked');
    });

    $(document).on('click', '.ui-radio', function(){      
        $('input[type="radio"]').each(function(){  
            $(this).next().find(".checkBox").addClass('not-checked').removeClass('checked');
        });

        if($(this).find('input[type="radio"]').is(':checked')){
           $(this).find('label div.checkBox').removeClass('checked').addClass('not-checked');
           $(this).find('input[type="radio"]').attr('checked' , false);
        } else {
           $(this).find('label div.checkBox').removeClass('not-checked').addClass('checked');             
           $(this).find('input[type="radio"]').attr('checked' , true);
        }        
    });   
});

.checkBox{
    width: 18px;
    height: 18px;
    background: #d9d9d9;
    border-radius: 3px;  
    margin: 0 auto;
    margin-bottom: 5px;
}

.not-checked, .checked {
    background-image: url("http://www.fajrunt.org/icons-18-white.png");
    background-repeat: no-repeat;
}

.not-checked {
    background-position: -18px 0;       
    background-color:#d9d9d9;
}

.checked {
    background-position: -720px 0;    
    background-color:#6294bc;
} 
```

我创建了一个单独的链接，希望这将帮助您快速检查设备。[http://www.apartmentslanka.com/ztest_calender/radio.html](http://www.apartmentslanka.com/ztest_calender/radio.html)

*** Stackoverflow 仅供参考：我尝试从上一篇文章继续，但由于负责的开发人员无法回答或检查上一个问题，我创建了一个新帖子。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T08:19:16.187

你真的需要耐心，我在度假:)

这是一个工作示例：http: [//jsfiddle.net/Gajotres/779Kn/20/](http://jsfiddle.net/Gajotres/779Kn/20/)

这个版本应该适用于触摸设备和桌面浏览器：http: [//jsfiddle.net/Gajotres/779Kn/21/](http://jsfiddle.net/Gajotres/779Kn/21/)

**点击**事件更改为**touchstart**事件，现在它也适用于移动设备。

```
$(document).on('pagebeforeshow', '#index', function(){     
    $('<div>').addClass('checkBox').appendTo('fieldset div div.ui-radio label');
    $('input[type="radio"]').each(function(){        
        ($(this).is(':checked')) ? $(this).next().find(".checkBox").addClass('checked') : $(this).next().find(".checkBox").addClass('not-checked');
    });

    $(document).on('touchstart', '.ui-radio', function(){      
        $('input[type="radio"]').each(function(){  
            $(this).next().find(".checkBox").addClass('not-checked').removeClass('checked');
        }); 

        if($(this).find('input[type="radio"]').is(':checked')){
           $(this).find('label div.checkBox').removeClass('checked').addClass('not-checked'); 
           $(this).find('input[type="radio"]').attr('checked' , false);
        } else {
           $(this).find('label div.checkBox').removeClass('not-checked').addClass('checked');             
           $(this).find('input[type="radio"]').attr('checked' , true);
        }        
    });   
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-08-27T04:49:55.817

只是一个额外的评论（以防将来有人遇到这个问题） - 较新版本的 JQueryMobile 提供“vclick”事件，这与在移动设备上寻找“触摸启动”和在桌面上寻找“点击”相同浏览器。

# google-apps-script - 脚本数据库到谷歌 sql 云

> ID：15756343
> 
> 赞同：1
> 
> 时间：2013-04-02T04:49:40.283
> 
> 标签：google-apps-script

有没有办法将我的 google appsscript 的 script db 数据库迁移到 Google Sql Cloud 。任何有助于将我的数据直接从脚本数据库传输到谷歌 sql 云数据库表的 api 和任何脚本......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T12:31:03.687

你必须编写这样的脚本。首先，因为它高度依赖于存储在 ScriptDb 中的对象的结构以及 cloud-sql 上的表和列。

无论如何，这应该相当容易。只需遍历您的 ScriptDb，将 INSERT 子句创建到 cloud-sql，然后发出它们。它应该不超过 30 行代码。

如果您存储了许多对象（例如 >500）。您应该对 ScriptDb 结果进行分页并多次运行脚本来完成这项工作，即拆分任务并分批工作，以避免达到最大执行时间配额。此外，您应该在 cloud-sql 上使用preparedStatements 和addBatch。同样，所有界面都内置到 Apps Script 中，这应该很容易。

# networking - 处理子网浪费

> ID：15756351
> 
> 赞同：-3
> 
> 时间：2013-04-02T04:50:31.730
> 
> 标签：networking, subnet

我被问了一个问题。一家公司需要 3 个网络。给定的 IP 地址是 176.0.0.0

> 网络 A：300 台主机
> 
> 网络 B：5 台主机
> 
> 网络 C：75 台主机

所以网络 A 应该有一个 /23 的子网，因此最大可分配 IP 地址为 510。因此，由于 510-300=210，将浪费 210 台主机。

我的问题是我可以为网络 B 和网络 C 使用这 210 个 IP 地址吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:58:24.977

跑题了，不过我还是会回答的。

不可以。任何分配的网络空间只能由该网络使用。

为网络 B 和 C 使用“浪费的”地址的唯一方法是将网络 A 拆分为两个或多个较小的网络，这些网络仅使用它们真正需要的 /23 空间的一部分。但是，这违反了原始问题中的要求。

# c# - 从嵌套哈希表中按键获取值

> ID：15756357
> 
> 赞同：1
> 
> 时间：2013-04-02T04:51:01.493
> 
> 标签：c#

我有一个看起来像这样的嵌套哈希表。

```
 Hashtable table = new Hashtable();
  Hashtable subtable = new Hashtable();
  Hashtable options = new Hashtable();

  options.Add("file","foo");
  subtable.Add("post_option",options);
  table.Add(0,subtable);

  //foreach here 
```

这就是我必须解决的问题，我无法让任何父亲参与其中来改变现状。所以我需要做的是通过调用从“table”哈希表开始的键“file”来获取“foo”。我已经尝试了 foreach 和 .Keys 和 .Values 的所有组合。我只是似乎无法得到它大声笑。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:06:51.780

Enumerator of `Hashtable`works 与 enumerator of 类似`IDictionary<TKey,TValue>`，但它不是通用的，因为它是古老的 API 来自不存在泛型的 .NET 1。所以如果你想迭代`Hashtable`，`foreach`你需要指定项目的类型。如果`Hashtable`是[`DictionaryEntry`](http://msdn.microsoft.com/ru-ru/library/system.collections.dictionaryentry).

```
foreach(DictionaryEntry tableEntry in table)
{
    // your logic
} 
```

如果你不知道前两个表的键，那么你需要做这样的事情。

```
foreach(DictionaryEntry tableEntry in table)
{
    Hashtable subtable = tableEntry.Value as Hashtable;
    if (subtable == null)
        continue;
    foreach(DictionaryEntry subtableEntry in subtable)
    {
        Hashtable options = subtableEntry.Value as Hashtable;
        if (options == null)
            continue;

        object file = options["file"];
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:52:19.643

你只需要这样做：

```
object foo = table[0]["post_option"]["file"]; 
```

# android - android布局：如何在布局中放置多个控件，每行显示3个控件

> ID：15756360
> 
> 赞同：0
> 
> 时间：2013-04-02T04:51:19.670
> 
> 标签：android, layout

我想设计一个布局来选择城市。3个城市一条线（可能是多线）。表示城市的控件可以是textview、button等。我需要轻松添加城市。我应该使用哪种布局以及如何正确配置它？

我有一个想法，使用垂直线性布局和水平线性布局来做到这一点。但是动态添加城市非常复杂和困难。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T05:33:59.207

我认为你需要的是一个`GridView`设置`android:numColumns`为 3。这样你应该在一条水平线上获得最多三个城市元素，并且随着城市元素数量的增加，线的数量会增加。

[http://developer.android.com/guide/topics/ui/layout/gridview.html](http://developer.android.com/guide/topics/ui/layout/gridview.html)

# google-chrome - Chrome 26：扩展升级后 ContentScript 未收到来自 evenPage 的响应回调

> ID：15756375
> 
> 赞同：2
> 
> 时间：2013-04-02T04:53:17.283
> 
> 标签：google-chrome, google-chrome-extension, google-chrome-devtools

我们仅在更新到 Chrome 26.0.1410.43 后才开始遇到此问题。

在正常情况下，一切似乎都正常。

*   使用 chrome.extension.sendMessage(message, callback) 向事件页面发送消息的内容脚本
*   事件页面接收消息并返回响应
*   内容脚本接收来自事件页面的响应。

但是在活动页面更新到新版本后，内容脚本仍在同一会话中，内容脚本不再接收来自活动页面的响应：

*   使用 chrome.extension.sendMessage(message, callback) 向事件页面发送消息的内容脚本
*   事件页面接收消息并返回响应
*   内容脚本未收到来自事件页面的响应。
*   事件页面在控制台中记录这些：
    *   “标签没有回答：1”
    *   端口错误：无法建立连接。接收端不存在。

要在本地设置中重现，请更新清单中的扩展版本，从扩展页面 (chrome://extensions/) 重新加载事件页面，但不要刷新注入内容脚本的选项卡。

# java - 删除数组 Java 中的重复元素

> ID：15756376
> 
> 赞同：0
> 
> 时间：2013-04-02T04:53:30.190
> 
> 标签：java, arrays

我正在尝试从字符串数组中删除重复的元素。例如，如果输入是黄色、黄色、红色。输出将是黄色，红色。我在条件中放了什么？java中有remove方法吗？这是我做的方法：

```
public static String [] CompareAndDestroy(String [] array)
{
String [] newarray = new String [array.length];
for(int i = 0; i<array.length;i++)
{
  for(int j = 0;j<array.length;j++) 
  {
    if(array[i].compareTo(array[j])==0)  
    {

    }
  }
 }
return array;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T05:01:31.733

如果您需要它并返回一个`String[]`数组：

```
Set<String> stringSet = new HashSet<>(Arrays.asList(array));
String[] filteredArray = stringSet.toArray(new String[0]); 
```

尽管我会考虑将类型更改为 a `Set<String>`，因为您正在尝试存储唯一元素的列表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T04:56:43.430

将它们存储在哈希集或链接哈希集中。 [http://docs.oracle.com/javase/6/docs/api/java/util/Set.html](http://docs.oracle.com/javase/6/docs/api/java/util/Set.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T04:57:29.760

没有从数组中删除的方法。由于数组是固定大小的内存块，您不能删除或添加任何元素。您可以为元素分配值。根据您的要求，您也可以使用 Hashset。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T04:58:19.937

将 String[] 转换为 ArrayList < String >。ArrayList 有一个 remove 方法。[检查 API 文档](http://docs.oracle.com/javase/6/docs/api/java/util/ArrayList.html#remove%28int%29)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T04:58:51.560

除非这是一个学术练习，否则将元素转换为 a [`Set`](http://docs.oracle.com/javase/7/docs/api/java/util/HashSet.html)。

```
Set<String> uniqueStr = new HashSet<>(Arrays.asList(array));
String[] buf = new String[0]; // zero-length typed array for Set.toArray operation
return uniqueStr.toArray(buf);  // returns all unique elements 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T05:03:56.663

您可以将元素放在一个集合中，因为它不允许重复。然后将该集合转换为数组。使用 LinkedHashSet 以便您可以按照与原始数组相同的顺序获取新数组。

```
String[] arr = new String[]{"Yellow","Red","Yellow","Green"};
Set<String> set = new LinkedHashSet<String>(arr);
set.toArray(new String[0]); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-04-02T05:04:43.270

你也可以试试这个......

```
private static String[] arrRemove(String[] strArray) {
    Set<String> set = new HashSet<String>();
    set.addAll((List<String>) Arrays.asList(strArray));
    return (String[]) set.toArray(new String[set.size()]);
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-04-02T05:08:32.740

**java中是否有remove方法**？

请注意：在 JAVA、C、C++ 中没有从简单数组中删除元素的删除或删除方法。

JAVA 中还有其他容器，如 ArrayList、LinkedList 等，您可以从中删除任何元素。

**我在条件中放了什么来获得独特的元素**？

您可以在 Hash-Set 中插入所有元素，也可以创建一个新数组（在第一个循环之前）并在这个新数组中插入新元素。

# c# - 添加没有名称和值的属性？

> ID：15756382
> 
> 赞同：0
> 
> 时间：2013-04-02T04:54:14.090
> 
> 标签：c#, xml, linq-to-xml, xelement, xattribute

XML元素属性名是否可以为空：

```
<?xml version="1.0" encoding="utf-8"?>
<test>
  <tables>
    <gg qqq="">
      <ss ""=""/>
      <mm ""=""/>
    </gg>
  </tables>
</test> 
```

我遇到了一个无法加载的异常。这可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T04:57:32.653

不，这将产生无效的 XML。属性必须同时具有名称和值。你怎么看对面的？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:06:32.840

不，这是做不到的。

XML 有`empty element`概念[如果你想实现它]。

在那个整个元素中保持为空并被称为 null 如下>>

```
<abc></abc>
<DefaultTaxPrice></DefaultTaxPrice> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:57:31.720

简短的回答，不。如果您想添加值但不知道 XML 中值的名称是什么，请插入到正文中。

```
<ss>value</ss> 
```

这样，您的 ss 将被视为一个值

# asp.net-mvc - JqG rid没有加载到asp.net mvc3的网页中

> ID：15756383
> 
> 赞同：0
> 
> 时间：2013-04-02T04:54:23.990
> 
> 标签：asp.net-mvc, asp.net-mvc-3, jqgrid

我有一个必须加载 jqgrid 的 aspx 引擎视图。

但是 jqgrid 没有加载。我尝试使用萤火虫断点，但它也没有命中

在视图中

```
<asp:Content ID="Content3" ContentPlaceHolderID="MetaContent" runat="server">
<table  id="jqgprojectnew" style="width: 100%">
  </table>
 <script type="text/javascript"> 

var url = '<%#Url.Action("Listmanoj")%>';
    var colNames = [
        'Orderid',
        'Customername',
        'Price',
        'Quantity',
        'Productname',
    'Total Including Tax',
    'Email',
    'Town',
    'Country', 'Postcode', 'Homephone','Workphone','Deliveryname','Deliverytown','Deliveryphone','Deliverypostalcode','Shippingmethod'];
    var colModel = [
        { name: 'Orderid', index: 'Orderid', align: 'left',  width: 20 },
        { name: 'Customername', index: 'Customername', edittype: 'image', align: 'left', width: 70, },
        { name: 'Price', index: 'Price', align: 'left', width: 100,  },
        { name: 'Quantity', index: 'Quantity', align: 'left', width: 150, },
        { name: 'Productname', index: 'Productname', align: 'left', width: 150 },
        { name: 'Totalincludingtax', index: 'Totalincludingtax', align: 'left', width: 150 },
        { name: 'Email', index: 'Email', align: 'left', width: 100, },
         { name: 'Town', index: 'Town', align: 'left', width: 100 },
         { name: 'Country', index: 'Country', align: 'left', width: 100,  },
          { name: 'Postcode', index: 'Postcode',  align: 'left', width: 70 },
           { name: 'Homephone', index: 'Homephone',  align: 'left', width: 70 },
         { name: 'Workphone', index: 'Workphone',  align: 'left', width: 70 },

         { name: 'Deliveryname', index: 'Deliveryname',  align: 'left', width: 70 },
         { name: 'Deliverytown', index: 'Deliverytown',  align: 'left', width: 70 },
         { name: 'Deliveryphone', index: 'Deliveryphone',  align: 'left', width: 70 },
         { name: 'Deliverypostalcode', index: 'Deliverypostalcode', align: 'left',             width: 70 },
         { name: 'Shippingmethod', index: 'Shippingmethod',  align: 'left', width: 70 }
    ];
    var sortname = 'Orderid';
    var sortorder = 'desc';
    SetGrid('#jqgprojectnew', '', url, colNames, colModel, sortname, sortorder, -1);

});
</script> 
```

在网页视图中它是如何加载的

```
 <script type="text/javascript"> $(document).ready(function () {
  $("a.button").button();
   var url = '';
    var colNames = [
   'Orderid',
    'Customername',
   'Price',
    'Quantity',
      'Productname',
    'Total Including Tax',
     'Email',
      'Town',
       'Country', 'Postcode',                            'Homephone','Workphone','Deliveryname','Deliverytown','Deliveryphone','Deliverypostalcode','Shippingmethod']; 
```

设置网格的代码：

```
function SetGrid(v_gridCtrl,v_pagingCtrl, v_url, v_colNames, v_colModel, v_sortname, v_sortorder, v_Pagesize) {

if (v_Pagesize == undefined)
    v_Pagesize = 100;

$(v_gridCtrl).jqGrid({
    //url from wich data should be requested
    autowidth: true,
    url: v_url,
    //type of data
    datatype: 'json',
    //url access method type
    mtype: 'POST',
    //columns names
    colNames: v_colNames,
    //columns model
    colModel: v_colModel,
    //pager for grid
    pager: $(v_pagingCtrl),
    //enable dynamic scrolling
    //scroll: true,
    //enable npage request parameter
    prmNames: { npage: 'npage' },
    //number of rows per page
    rowNum: v_Pagesize,
    rowList: [10, 30, 60, 90, 100, 150, -1],
    loadComplete: function () {
        $("option[value=-1]").text('All');
        $('#count').html($(v_gridCtrl).getGridParam("reccount"));
    },

    //initial sorting column
    sortname: v_sortname,
    //initial sorting direction
    sortorder: v_sortorder,
    //we want to display total records count
    viewrecords: true,
    //grid height
    height: 400,//'100%',
    width: '100%',
    scrollOffset: 0,
    shrinkToFit: true
}); 
```

}

我的问题是： jqgrid 中使用的操作方法没有命中，加载时 url 操作结果为空

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:07:35.993

*   在脚本中添加 document.ready()
*   像这样设置网址：

    var url = '/ControllerName/Listmanoj'; //如果你的控制器名称是TestController，url应该是'/Test/Listmanoj'

*   删除以下部分：（你为什么需要那个？）

    $(document).ready(function () { $("a.button").button(); var url = ''; var colNames = [ 'Orderid', 'Customername', 'Price', 'Quantity', 'Productname', 'Total Include Tax', 'Email', 'Town', 'Country', 'Postcode', 'Homephone','Workphone','Deliveryname','Deliverytown','Deliveryphone','Deliverypostalcode', '邮寄方式'];

*   在 document.ready() 中包含 setGrid。

简而言之，您的脚本部分应如下所示：

```
 <asp:Content ID="Content3" ContentPlaceHolderID="MetaContent" runat="server">
    <table  id="jqgprojectnew" style="width: 100%">
      </table>
     <script type="text/javascript"> 

$(document).ready(function()
{
//set grid function

function SetGrid(v_gridCtrl,v_pagingCtrl, v_url, v_colNames, v_colModel, v_sortname, v_sortorder, v_Pagesize) {

if (v_Pagesize == undefined)
    v_Pagesize = 100;

$(v_gridCtrl).jqGrid({
    //url from wich data should be requested
    autowidth: true,
    url: v_url,
    //type of data
    datatype: 'json',
    //url access method type
    mtype: 'POST',
    //columns names
    colNames: v_colNames,
    //columns model
    colModel: v_colModel,
    //pager for grid
    pager: $(v_pagingCtrl),
    //enable dynamic scrolling
    //scroll: true,
    //enable npage request parameter
    prmNames: { npage: 'npage' },
    //number of rows per page
    rowNum: v_Pagesize,
    rowList: [10, 30, 60, 90, 100, 150, -1],
    loadComplete: function () {
        $("option[value=-1]").text('All');
        $('#count').html($(v_gridCtrl).getGridParam("reccount"));
    },

    //initial sorting column
    sortname: v_sortname,
    //initial sorting direction
    sortorder: v_sortorder,
    //we want to display total records count
    viewrecords: true,
    //grid height
    height: 400,//'100%',
    width: '100%',
    scrollOffset: 0,
    shrinkToFit: true
});
}// end of set grid function

    var url = 'controllername/Listmanoj';
        var colNames = [
            'Orderid',
            'Customername',
            'Price',
            'Quantity',
            'Productname',
        'Total Including Tax',
        'Email',
        'Town',
        'Country', 'Postcode', 'Homephone','Workphone','Deliveryname','Deliverytown','Deliveryphone','Deliverypostalcode','Shippingmethod'];
        var colModel = [
            { name: 'Orderid', index: 'Orderid', align: 'left',  width: 20 },
            { name: 'Customername', index: 'Customername', edittype: 'image', align: 'left', width: 70, },
            { name: 'Price', index: 'Price', align: 'left', width: 100,  },
            { name: 'Quantity', index: 'Quantity', align: 'left', width: 150, },
            { name: 'Productname', index: 'Productname', align: 'left', width: 150 },
            { name: 'Totalincludingtax', index: 'Totalincludingtax', align: 'left', width: 150 },
            { name: 'Email', index: 'Email', align: 'left', width: 100, },
             { name: 'Town', index: 'Town', align: 'left', width: 100 },
             { name: 'Country', index: 'Country', align: 'left', width: 100,  },
              { name: 'Postcode', index: 'Postcode',  align: 'left', width: 70 },
               { name: 'Homephone', index: 'Homephone',  align: 'left', width: 70 },
             { name: 'Workphone', index: 'Workphone',  align: 'left', width: 70 },

             { name: 'Deliveryname', index: 'Deliveryname',  align: 'left', width: 70 },
             { name: 'Deliverytown', index: 'Deliverytown',  align: 'left', width: 70 },
             { name: 'Deliveryphone', index: 'Deliveryphone',  align: 'left', width: 70 },
             { name: 'Deliverypostalcode', index: 'Deliverypostalcode', align: 'left',             width: 70 },
             { name: 'Shippingmethod', index: 'Shippingmethod',  align: 'left', width: 70 }
        ];
        var sortname = 'Orderid';
        var sortorder = 'desc';
        SetGrid('#jqgprojectnew', '', url, colNames, colModel, sortname, sortorder, -1);

    });
    </script> 
```

# javascript - 如何将网页内容存储到 SQL Server 中？

> ID：15756385
> 
> 赞同：-1
> 
> 时间：2013-04-02T04:54:37.293
> 
> 标签：javascript, html, dom, xhtml

我有一个名为 www dot abc dot com 的页面，该页面中有一些内容；现在我想将此内容存储在 SQL Server 中。

听说可以用DOM来实现。如果不在 DOM 中，请向我建议可能的方法。我在这个论坛上搜索过类似的，但我找不到。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:26:31.230

可能重复的问题。

看看下面...

*   [如何将 HTML 文档存储在数据库中？](https://stackoverflow.com/questions/13456771/how-do-you-store-html-documents-in-a-database)
*   [如何在sql server中存储网页内容](https://stackoverflow.com/questions/220914/how-to-store-web-page-content-in-sql-server)

如果您进行快速搜索，可能还有更多...

您可能还想阅读常见问题解答以供将来参考[https://stackoverflow.com/faq](https://stackoverflow.com/faq)

# vb6 - VB6 WH_GETMESSAGE 消息钩子

> ID：15756386
> 
> 赞同：0
> 
> 时间：2013-04-02T04:54:42.640
> 
> 标签：vb6, hook

朋友们好，我想监控窗体上的IP地址控件（由CreateWindowEx创建）的输入事件。我使用API​​ SetWindowsHookEx挂钩WH_GETMESSAGE消息，但现在我不能将输入消息作为(MSG)lParam-> message = WM_NULL 就像在 C 中一样，所以我需要你的帮助，朋友们。你能给我解决方案吗？

这是代码：

```
Private Function GetMsgProc(ByVal nCode As Long, ByVal wParam As Long, ByRef lParam As Long) As Long
CopyMemory p, ByVal lParam, LenB(p)
If p.message = WM_RBUTTONDOWN And GetParent(p.hWnd) = lngHWNDCtl Then
    GetMsgProc = 0
Else
    GetMsgProc = CallNextHookEx(hHook, nCode, wParam, ByVal lParam)
End If
End Function

Public Sub SetHook(ByVal lngThread As Long, lngHWND As Long, bFlag As Boolean)
If bFlag Then
    lngHWNDCtl = lngHWND
    hHook = SetWindowsHookEx(WH_GETMESSAGE, AddressOf GetMsgProc, 0, lngThread)
Else
   If hHook Then UnhookWindowsHookEx hHook
End If
End Sub 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T21:09:50.437

1.  跳过对过滤器函数的调用`CallNextHookEx`通常`GetMsgProc`是一个坏主意。如果您这样做，则不会调用链中的其他过滤器函数。也许，在开发机器上没有，但是“在野外”会有其他安装了钩子的应用程序。如果您阻止调用它们的过滤器函数，这些应用程序将出现异常行为。
2.  您可能不想分析只是从队列中偷看但没有从队列中删除的消息。为已从队列中删除的消息`GetMsgProc`调用。`wParam = PM_REMOVE`
3.  VB6 或 C++ 或其他任何东西，忽略 API 的 MSDN 规范是一种致命的做法。这就是`GetMsgProc`过滤器函数应该如何根据其第一个参数的值做出决定：

    > *代码*[输入]
    > 
    > 指定挂钩过程是否必须处理消息。如果代码是 HC_ACTION，则挂钩过程必须处理该消息。如果代码小于零，则挂钩过程必须将消息传递给 CallNextHookEx 函数而不进行进一步处理，并且应该返回 CallNextHookEx 返回的值。
    > 
    > [http://msdn.microsoft.com/en-us/library/windows/desktop/ms644981%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644981%28v=vs.85%29.aspx)

    虽然`CopyMemory`应该可以工作（假设您正确声明它），但我不会在这里打扰它。将 filter 函数的第三个参数声明为`ByRef lParam As MSG`.

这是应该放在标准模块中的代码（与安装挂钩的任何其他代码一样）。如果我用它来嗅探`WM_RBUTTONDOWN`消息，例如`TextBox`放置在主窗体上的控件，它对我有用。

```
Option Explicit

'http://msdn.microsoft.com/en-us/library/windows/desktop/dd162805%28v=vs.85%29.aspx
Private Type tagPOINT
    x As Long
    y As Long
End Type

'http://msdn.microsoft.com/en-us/library/windows/desktop/ms644958%28v=vs.85%29.aspx
Private Type MSG
    hWnd    As Long
    message As Long
    wParam  As Long
    lParam  As Long
    time    As Long
    pt      As tagPOINT
End Type

Private bHooked      As Boolean
Private hHook        As Long
Private hHwndToSniff As Long

Private Const HC_Action As Long = &H0

Private Const PM_NOREMOVE   As Long = &H0
Private Const PM_REMOVE     As Long = &H1

Private Const WH_GETMESSAGE     As Long = &H3
Private Const WM_RBUTTONDOWN    As Long = &H204

'http://msdn.microsoft.com/en-us/library/windows/desktop/ms644974%28v=vs.85%29.aspx
Private Declare Function CallNextHookEx Lib "user32" _
    (ByVal hHook As Long, ByVal ncode As Long, ByVal wParam As Long, lParam As Any) As Long

'http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx
Private Declare Function SetWindowsHookEx Lib "user32" _
    Alias "SetWindowsHookExA" _
    (ByVal idHook As Long, ByVal lpfn As Long, ByVal hmod As Long, ByVal dwThreadId As Long) As Long

'http://msdn.microsoft.com/en-us/library/windows/desktop/ms644993%28v=vs.85%29.aspx
Private Declare Function UnhookWindowsHookEx Lib "user32" _
    (ByVal hHook As Long) As Long

Public Sub RemoveHook()
    If bHooked Then 
        UnhookWindowsHookEx hHook
        bHooked = False
    End If
End Sub

Public Sub SetHook(ByVal hThreadToHook As Long, hHwndFilter As Long)
    If Not bHooked Then
        hHook = SetWindowsHookEx(WH_GETMESSAGE, AddressOf GetMsgProc, 0, hThreadToHook)
        If hHook > 0 Then
            bHooked = True
            hHwndToSniff = hHwndFilter
        Else
            Debug.Assert False
        End If
    End If
End Sub

'http://msdn.microsoft.com/en-us/library/windows/desktop/ms644981%28v=vs.85%29.aspx
Private Function GetMsgProc(ByVal uCode As Long _
    , ByVal wParam As Long _
    , ByRef lParam As MSG) As Long
    If uCode = 0 Then
        If wParam = PM_REMOVE Then
            If lParam.message = WM_RBUTTONDOWN Then
                If lParam.hWnd = hHwndToSniff Then
                    MsgBox "You right-clicked a text box!"
                End If
            End If
        End If
    End If

    GetMsgProc = CallNextHookEx(hHook, uCode, wParam, lParam)
End Function 
```

该钩子以下列方式安装在表单模块中：

```
SetHook App.ThreadID, Me.Text1.hWnd 
```

# asp.net-mvc - 允许用户在 asp.net MVC 的下拉列表中添加选项

> ID：15756388
> 
> 赞同：0
> 
> 时间：2013-04-02T04:54:57.843
> 
> 标签：asp.net-mvc

在我的 MVC 应用程序中包含了一个名为 form Field 的按钮。每当用户单击该按钮时，下拉列表就会显示在包含文本、复选框等选项的模式框中。

```
function Select_type(box) {
             var tp = document.getElementById('Type').value;
             switch (tp) {
                 case "Text":
                     {
                     var editor = CKEDITOR.instances.message;
                     editor.insertHtml('<input type="text" id="tx" />'); 
                 }
                     break;
                 case "Checkbox": 
                     { 
                         var editor = CKEDITOR.instances.message;
                         editor.insertHtml(' <input type="checkbox" id="chk" name="chk" />');
                                        } 
                     break;
                 case "Radio": 
                     { 
                 var editor = CKEDITOR.instances.message;
                 editor.insertHtml('<input type="radio" id="rd" name="rd" />');
                   }
                     break;
                 case "DropDown":
                     {
                         var ediotr = CKEDITOR.instances.message;
                         ediotr.insertHtml('<select id="options"></select>');
                         dhtmlx.modalbox({
                             title: "Form Field Properties",
                             text: "<div id='form_in_box'><div ><label>Field Options:<input id='txt'></label><br></div><div><span class='dhtmlx_button'><input type='submit' value='Add' style='width: 86px' onclick='Add_type(this)'></span><span class='dhtmlx_button'><input type='button' value='Cancel' onclick='close_file(this)' style='width:80px;'></span></label></div></div>",
                             width: "300px"
                         });
                     }

                     break;
                 case "Listbox": alert("Listbox");
                     break;
             }              
             dhtmlx.modalbox.hide(box);
         } 
```

当用户选择下拉选项时，会出现一个模式框，允许用户将选项添加到下拉列表

```
function Add_type(box) {
             var txt = $('#txt').val();
             if (txt.length > 0) {
                 $("#options").append("<option value='" + (txt.length - 1) + "'>" + txt + "</option>")
             }
         } 
```

Textarea 和按钮出现在模态框中，但它不添加用户在 textarea 中输入的选项

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T12:17:10.383

function Add_type() {
     var txt = $('#txt').val();
     if (txt.length > 0) {
         var lBox = $('select[id$=options]');
         $(lBox ).append("<option value=' " + (txt.length - 1) + " '>" + txt + "</option>")
    }
}

I tried like this, it was working

# php - Yii CGridview 隐藏行

> ID：15756389
> 
> 赞同：0
> 
> 时间：2013-04-02T04:55:06.737
> 
> 标签：php, yii, cgridview

我的 yii CGridview 中有三行，并且有两种类型的用户登录名。我必须根据用户的类型隐藏三行之一。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:01:34.533

使用这样的条件语句：

```
public function newsearch()
{
    $id= Yii::app()->user->id;
    if($id = Your conditon){
        $criteria=new CDbCriteria;

        $criteria->compare('id',$this->id);
        Your Criteria to display
    } else {
        $criteria=new CDbCriteria;

        $criteria->compare('id',$this->id);
        Your Criteria to display
    }
    return new CActiveDataProvider($this, array(
        'criteria'=>$criteria,
    ));
} 
```

并在您的 GridView 数据提供程序中调用此数据提供程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T05:31:11.883

在您的模型中添加公共静态方法，例如：

```
class Post extends CActiveRecord {

    public function tableName() {

        return 'posts';
    }

    public function rules() {

        return array();
    }

    public function attributeLabels() {

        return array();
    } 
```

...

```
 public static function rulesUser() {
        if ( Yii::app()->user->id = 1 ) {
            return True;
        } else {
            return False;
    }  
} 
```

在您的gridview中添加行：

```
$this->widget('zii.widgets.grid.CGridView', 
    array(
'id' => 'posts-grid',
'dataProvider' => $model->search(),
'filter' => $model,
'emptyText' => '',
'columns' => array(
        'id',
        'title',
        'post',
        'date_create',
                    array(
                    'name' => 'status',
                    'visible' => Posts::rulesUser(),
                     )
        array(
        'class' => 'CButtonColumn',
        ),
    ),
    )
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:38:18.737

或添加模型

```
public $visible = True; 
```

在你的搜索中添加 if 或 switch

```
public function search()
{
$criteria = new CDbCriteria;
     ...
    if (any if){
$this->visible = 1;
    }
return new CActiveDataProvider($this, array(
        'criteria' => $criteria,
    ));
} 
```

在您的网格视图中

...

```
array(              
'name'     => 'value',
'visible'=>$model->visible,
) 
```

...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T05:52:17.700

我已经通过调节 `CDbCriteria`如下解决了这个任务，

```
if(!Yii::app()->session["admin"])
{
   $criteria->condition='t.unique_id!="i-8874c6e3"';
} 
```

谢谢大家。

# javascript - 编写像 Stackoverflow 这样的 jquery Alert 并将其加入服务器端

> ID：15756394
> 
> 赞同：0
> 
> 时间：2013-04-02T04:55:43.723
> 
> 标签：javascript, jquery, asp.net, alert, stack-overflow

几天前A问了这个问题，但找不到我的答案。

[类似于 stackoverflow 动态数据的警报框](https://stackoverflow.com/questions/15675704/alert-box-like-stackoverflow-dynamic-data)

我在网上冲浪了几天，没有任何好处。其中一些很有用，但页面加载时会出现消息。

**我想要的是当用户触发事件时，所有消息都应该像这样出现在页面顶部**

![在此处输入图像描述](https://i.stack.imgur.com/xWKCc.jpg)

为此，我尝试了这个答案[Call jquery from code behind](https://stackoverflow.com/a/6178881/1707848) 但结果不是我想要的。他们还有其他方式吗？

Stackoverflow 使用几乎相同。提交答案时，窗口顶部会显示消息。

**注意：**使用 ASP.Net WebForms。

谢谢你的时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T06:19:42.253

如果您想集成通知，请尝试一些 jquery 插件，这些插件可以通过酷炫的 UI 轻松完成任务。

1.  [酒吧](http://tympanus.net/Development/jbar/)
2.  [通知](http://pinesframework.org/pnotify/)
3.  [toastr](http://codeseven.github.com/toastr/)（正如 Ravi 在下面添加的评论）

您也可以使用 ClientScript.RegisterStartupScript 来调用 javascript 函数。

# jquery - 在 webkit 浏览器上的固定位置

> ID：15756396
> 
> 赞同：0
> 
> 时间：2013-04-02T04:55:51.330
> 
> 标签：jquery, css

我在 webkit 浏览器上的固定位置有问题。它在 Firefox 上完美运行。我已经尝试了很多事情，但我无法解决问题。

看这里：http: [//vitu.me/pro/](http://vitu.me/pro/)

如果您单击一个项目，`jQuery .load()`将加载一个页面，在此页面上有项目图像和**箭头**按钮以及顶部的**X。**这些按钮应该在页面滚动时固定在该位置，但不会发生。

我希望有人可以帮助我解决这个问题。

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:46:17.907

你`super-janela`的 div 是绝对定位的。这就是为什么您的`fixed`定位控件“不起作用”的原因。将它们从绝对定位中取出`div`或将`super-janela`位置更改为`relative`。

# iphone - UIAlertView 中的 UitextFields 选择 iOS

> ID：15756398
> 
> 赞同：0
> 
> 时间：2013-04-02T04:56:07.380
> 
> 标签：iphone, uitextfield, uialertview

我有三个`UITextfields`in `UIAlertView`，同时点击一个`UITextfield`并尝试点击另一个它没有选择和创建问题，还有辞职第一响应者的问题，使用`UITextfield`in不是很好的选择吗`UIAlertView`

```
- (IBAction)heightMethod:(id)sender
{
    self.centimeterTextField = [[UITextField alloc] initWithFrame:CGRectMake(12.0, 45.0, 260.0, 25.0)];
    centimeterTextField.placeholder = @"  Centimeters";
    self.centimeterTextField.delegate=self;
    self.centimeterTextField.tag=3;

   [ self.centimeterTextField setBackgroundColor:[UIColor whiteColor]];

   [self.alertHeight addSubview: self.centimeterTextField];

    self.ptextfield = [[UITextField alloc] initWithFrame:CGRectMake(40, 80.0, 80, 25.0)]; ptextfield.placeholder = @"   Feet";

    self.ptextfield.delegate=self;

    self.ptextfield.tag=4;

    [self.ptextfield setBackgroundColor:[UIColor whiteColor]];
    [self.alertHeight addSubview:self.ptextfield];
    self.ptextfieldInches = [[UITextField alloc] initWithFrame:CGRectMake(140, 80.0, 80, 25.0)]; ptextfieldInches.placeholder = @"   Inches";
    self.ptextfieldInches.delegate=self;
    self.ptextfieldInches.tag=5;

  [ptextfieldInches setBackgroundColor:[UIColor whiteColor]];

    [self.alertHeight addSubview:ptextfieldInches];

   [self.centimeterTextField setKeyboardType:UIKeyboardTypeDecimalPad];

    [self.ptextfieldInches setKeyboardType:UIKeyboardTypeDecimalPad];

    [self.ptextfield setKeyboardType:UIKeyboardTypeDecimalPad];

     self.alertHeight.tag=1;

   [self.alertHeight show];  
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T05:25:54.523

```
- (void) presentSheet {
UIAlertView *alert = [[UIAlertView alloc]initWithTitle: @"Enter Information"
message:@"Specify the Name and URL" delegate:self cancelButtonTitle:@"Cancel"otherButtonTitles:@"OK", nil];

[alert addTextFieldWithValue:@"" label:@"Enter Name"]; 
[alert addTextFieldWithValue:@"http://" label:@"Enter URL"];

UITextField *tf = [alert textFieldAtIndex:0];
 tf.clearButtonMode = UITextFieldViewModeWhileEditing;
 tf.keyboardType = UIKeyboardTypeAlphabet; 
 tf.keyboardAppearance = UIKeyboardAppearanceAlert;

 tf.autocapitalizationType = UITextAutocapitalizationTypeWords;
 tf.autocorrectionType = UITextAutocorrectionTypeNo;
// URL field
 tf = [alert textFieldAtIndex:1];
tf.clearButtonMode = UITextFieldViewModeWhileEditing; tf.keyboardType =  UIKeyboardTypeURL;
tf.keyboardAppearance = UIKeyboardAppearanceAlert; tf.autocapitalizationType =  UITextAutocapitalizationTypeNone; tf.autocorrectionType = UITextAutocorrectionTypeNo;
[alert show]; 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:17:15.460

您现在可以创建带有样式的 UIAlertView。

UIAlertView 现在有一个属性 - alertViewStyle，您可以将其设置为枚举值之一

**1\. UIAlertViewStyleDefault**

**2\. UIAlertViewStyleSecureTextInput**

**3\. UIAlertViewStylePlainTextInput**

**4\. UIAlertViewStyleLoginAndPasswordInput**

创建警报视图后，您可以设置它的样式并显示它。解除警报后，您可以使用警报视图的 textFieldAtIndex 属性访问字段的内容。

否则你也可以使用这个。,

```
IAlertView* dialog = [[UIAlertView alloc] init];
[dialog setDelegate:self];
[dialog setTitle:@"Enter Name"];
[dialog setMessage:@" "];
[dialog addButtonWithTitle:@"Cancel"];
[dialog addButtonWithTitle:@"OK"];

UITextField *nameField = [[UITextField alloc] initWithFrame:CGRectMake(20.0, 45.0, 245.0, 25.0)];
[nameField setBackgroundColor:[UIColor whiteColor]];
[dialog addSubview:nameField];
CGAffineTransform moveUp = CGAffineTransformMakeTranslation(0.0, 70.0);
[dialog setTransform: moveUp];
[dialog show];
[dialog release];
[nameField release]; 
```

希望这些信息有所帮助。谢谢你。

# java - java makefile的基础知识

> ID：15756399
> 
> 赞同：0
> 
> 时间：2013-04-02T04:56:08.210
> 
> 标签：java, eclipse, compilation, makefile

我是 java 和 makefile 的新手，我想要一些关于 makefile 的介绍性信息。通常在网上找到的信息大多是示例和高级别的。这是我对makefile的一些具体/天真的问题：

1.  什么类型的文件是生成文件的目标？.class 和 .java？

2.  makefile 对这些项目文件有什么作用？我在 Eclipse 中完成了我的项目，因此 .class 文件存储在 bin 中，而 .java 文件存储在 scr 中。makefile 在这些文件之间建立了什么样的连接？

3.  生成文件的结果是什么？makefile 的目的是告诉编译器如何生成一个可执行文件，所以结果是在当前目录中生成一个新的可执行文件，是吗？

4.  我应该把makefile放在哪里？在 bin 文件夹中？scr 文件夹？将所有苍蝇混合在一个目录下并将其放在那里？

5.  最后，我为我的项目制作了一个小的 makefile，它应该编译 3 个类。它不起作用，我不知道为什么：

生成文件：

```
JFLAGS = -g
JC = javac
.SUFFIXES: .java .class
.java.class:
    $(JC) $(JFLAGS) $*.java

CLASSES = \
    DNA.java \
    C.java \
    fastmatch.java 

default: classes

classes: $(CLASSES:.java=.class)

clean:
    $(RM) *.class 
```

我做错什么了吗？我只是将所有内容放在一个文件夹下，然后在命令行中输入“make”。我想我在这里遗漏了一些大图，所以如果有人可以向我解释，我将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T05:17:31.220

`make`不是构建 Java 的正确工具。您应该使用[Ant](http://ant.apache.org)或[Maven](http://maven.apache.org)或其他 Java 构建工具。可以使用. *_*`make`

使作品在 C 和朋友的土地上运作良好。在那里，源文件依赖于它导入的所有头文件，而头文件不依赖任何东西（因为它们没有被编译），所以你的依赖树不会太深。在 Java 中，每个类都依赖于它导入的每个类，而这些类又依赖于其他类，因此通常情况下，如果不编译项目中的所有其他类，就无法编译单个类。您*可以*在您的 makefile 中描述这一点，但要在不到一秒的时间内完成 Ant 所做的工作将是数小时的繁琐工作。

说了这么多：

1.  “目标”是 makefile 正在生成的东西。如果您不是在编写编写代码的代码，那么`.java`文件不是目标
2.  在您发布的 makefile 中，文件将与相应文件`.class`位于同一位置`.java`
3.  makefile 的结果基本上可以是任何东西。 `make`本身就是一种相当强大的语言。*这个*makefile的结果是三个编译的 Java 类（可能更多，因为`javac`可能会找到更多要编译的类，或者您的某些类可能有内部类。同样，这就是`make`Java 工具不好的原因）
4.  makefile 通常位于项目根目录中。通常，复杂的项目会有其他的子目录生成文件

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T05:15:58.800

我很难记住我的品牌，但我认为你需要：

```
%.class : %.java
        $(JC) $(JFLAGS) $< 
```

# ember.js - 从 json 填充下拉列表

> ID：15756402
> 
> 赞同：0
> 
> 时间：2013-04-02T04:56:15.223
> 
> 标签：ember.js, handlebars.js

我有以下 json。

```
{
    "vouchers" : {
         "ca_id" : "5",
    },
    "accounts" : [{
            "id" : "1",
            "ca_code" : "1001",
            "ca_name" : "Sources of Fund"
        }, {

            "id" : "2",
            "ca_code" : "1001.01",
            "ca_name" : "Shareholders' Fund"
        }
    ]
} 
```

我的路由器是

```
App.CreditEditRoute = Ember.Route.extend({        
    setupController: function(controller, model){
        $.getJSON(rootUrl+'api/voucher/getVoucherWithAccounts', {id: model}, function(data){
            controller.set('content', data);
        });                
    }
}); 
```

我试图用上面的 json 填充下拉列表。所以我用

```
{{view Ember.Select
       contentBinding="content.accounts"
       optionValuePath="content.accounts.id"
       optionLabelPath="content.accounts.ca_name"
       valueBinding="content.vouchers.ca_id"
}} 
```

但似乎我的下拉列表填充为空。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:00:16.727

您能否添加代码来解释您如何将 JSON 链接到选择。如果为空，是否没有选项，或者选项是否为空白？

话虽这么说，`optionValuePath`而且`optionLabelPath`是相对路径。所以希望它应该是一个简单的修复。

```
{{view Ember.Select
   contentBinding="content.accounts"
   optionValuePath="content.id"
   optionLabelPath="content.ca_name"
   valueBinding="content.vouchers.ca_id"
}} 
```

# linux - 我的 bash 脚本占用了太多内存

> ID：15756403
> 
> 赞同：0
> 
> 时间：2013-04-02T04:56:16.357
> 
> 标签：linux, bash, memory-leaks

我正在寻找哪个程序正在使用我的内存，泄漏在哪里？

而且，我创建了它，泄漏是在 bash 脚本中。

但是，怎么可能呢？Bash 脚本总是会为每个变量赋值分配新空间？

我的 bash 脚本如下所示，请告诉我如何解决此问题。

```
CONF="/conf/my.cfg"
HIGHRES="/data/high.dat"

getPeriod()
{
meas=`head -n 1 $CONF`
statperiod=`echo $meas`
}

(while true
do
        lastline=`tail -n 1 $HIGHRES |cut -d"," -f2`
        linenumber=`grep -n $lastline $HIGHRES | cut -f1 -d:`
        /bin/stat $linenumber
        getPeriod
        sleep $statperiod
done) 
```

**编辑#1：** high.dat 的最后一行

```
2013-02-11,10:59:13,1,0,0,0,0,0,0,0,0,12.340000,0.330000,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24.730000,24.709990,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:28:37.357

我无法使用该脚本的近似值来验证内存泄漏，因此泄漏实际上可能不是您认为的位置。考虑使用更多信息更新您的问题，包括完整的工作示例以及您为找出内存泄漏所做的工作。

也就是说，您选择了一种非常奇怪的方法来找出文件有多少行。最常用的方法是使用标准`wc`工具：

```
$ wc -l < test.txt
      19
$ 
```

注意：使用`< file`而不是传递文件名，因为后者会导致将文件名写入标准输出，然后您必须将其编辑掉：

```
$ wc -l test.txt
      19 test.txt
$ 
```

# stripe-payments - 使用条纹 14 天后需要充电

> ID：15756404
> 
> 赞同：3
> 
> 时间：2013-04-02T04:56:21.740
> 
> 标签：stripe-payments

当我输入我的信用时，它将被收取 6.95 美元的费用。这是为了运输和处理。输入卡凭据后，将收取运费和手续费。

我需要知道 14 天后，这张卡将收取 39.99 美元的产品费用。我需要收到一封电子邮件，告诉我该卡需要计费。信用卡会在 14 天后自动扣款吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-02T15:02:33.960

给这只猫剥皮的方法不止一种。

我将通过以下过程在 Stripe 中解决这个问题：

1.  创建一个客户对象并立即向客户收取 6.95 美元的费用。[https://stripe.com/docs/tutorials/charges#saving-credit-card-details-for-later](https://stripe.com/docs/tutorials/charges#saving-credit-card-details-for-later)

2.  为客户订阅具有 14 天免费试用期的计划。[https://stripe.com/docs/tutorials/subscriptions](https://stripe.com/docs/tutorials/subscriptions)

3.  在处理完第一笔 39.99 美元的费用后，使用 webhook 事件处理程序监听以取消订阅。[https://stripe.com/docs/webhooks](https://stripe.com/docs/webhooks)在处理完 39.99 美元的付款后，您想要响应的 webhook 事件将是 invoice.payment_succeeded。[https://stripe.com/docs/api#event_types](https://stripe.com/docs/api#event_types)

这个解决方案对用户来说是完全透明的，对你来说是完全自动化的。您可以使用 webhook 自动发送付款收据（或任何其他类型的通信）、清理数据或您可以想象的任何其他内容。这是一个非常强大的功能。

# c++ - 在 sqlite3 数据库中搜索某些项目的查询

> ID：15756407
> 
> 赞同：1
> 
> 时间：2013-04-02T04:56:42.983
> 
> 标签：c++, sqlite

我有一个项目列表作为 C++ 中的字符串数组。我还有一个包含列入黑名单的字符串的 sqlite3 数据库。现在我必须使用我必须用 0 或 1 标记它们的项目列表，告诉我它们是否被列入黑名单。我可以通过使用“Select * from ITEMS_TABLE WHERE item = string[i]”来一一搜索它们，但这需要时间。我也可以从数据库中提取黑名单，然后在我的列表中查找它们。但是有没有一种有效的方法来找出我列表中的哪些项目被列入黑名单。

可以说我有以下结构

```
struct item 
{ 
    char name[MAX_NAME_LEN]; 
    bool isBlacklisted; 
}; 
```

然后我使用这些结构的数组来知道它们中的任何一个是否被列入黑名单。因此，如果在数据库中找到该条目，我必须将 isBlacklisted 标志设置为 true。如果我使用 Select 方法，它会返回被列入黑名单的项目列表。但我仍然需要使用字符串比较在我的数组中找到它们。有没有一些有效的方法是。数据库是否提供任何此类功能。

谢谢和问候，迈克。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:21:12.730

根据您的要求设计数据库结构。您想知道黑名单项目只需使用包含 0 或 1 的列作为黑名单，即您的表 ITEMS_TABLE 有这些列

```
itemcode itemname isblacklist
1        item1    0
2        item2    0
3        item3    1 
```

现在

```
Select * from ITEMS_TABLE WHERE isblacklist=0 
```

这将返回非黑名单项目和

```
Select * from ITEMS_TABLE WHERE isblacklist=1 
```

将返回黑名单项目，希望这对你有帮助

# iphone - 将上一个视图控制器设置为当前视图控制器的属性

> ID：15756414
> 
> 赞同：0
> 
> 时间：2013-04-02T04:57:36.970
> 
> 标签：iphone, ios, objective-c, cocoa-touch

因此，我正在尝试实现向右滑动以返回上一个视图控制器功能。

但是当我在当前视图控制器中有以下代码时，我得到一个黑屏

```
- (void)initPreviousViewController:(GGMainViewController *)previous
{
    self.previousViewController = previous;
    self.previousViewController.view.frame = self.currentView.bounds;  //self.currentView is declared elsewhere (in the init of the current view controller)
    [self addChildViewController:self.previousViewController];
    [self.currentView addSubview:self.previousViewController.view];
    [self.previousViewController didMoveToParentViewController:self];
{ 
```

^我在初始化当前视图控制器之后，在推送当前视图控制器之前，在前一个视图控制器中调用这个方法

如果我改变**`self.previousViewController = previous;`**它的**`self.previousViewController = [GGMainViewController alloc] init];`**工作原理。但是，我不想重新初始化以前的控制器。

那么如何将前一个视图控制器设置为当前视图控制器的属性。

哦，我也是iOS初学者，所以如果这不是推荐的东西，请告诉我。

我的想法背后的理由：

通常，用户只需单击一个按钮，UINavigationController 就可以解决问题，但由于我使用的是滑动功能，我认为用户在滑动屏幕时需要看到当前视图控制器后面的前一个视图控制器。

* * *

根据要求我如何从 previousViewController 调用 currentViewController

```
- (void)displayCurrentViewController:(id)sender
{
    GGNextViewController *next = [[GGNextViewController alloc] init];
    [next initializeExploreViewController:self]; // If I comment this out, everything is ok (screen is not black,etc. apart from being able to swipe backwards
    [self.navigationController pushViewController:next animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:26:41.317

您使用`self.navigationController`用于推送当前视图控制器，因此您可以在触发正确的滑动手势时调用一个方法。

在您的当前视图控制器（**GGNextViewController.m**）中尝试此代码...

**1\. 将 rightSwipeGestureAction() 选择器添加到您拥有的手势识别器中。**

**2.**

```
-(void)rightSwipeGestureAction
{
    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:58:56.863

事实证明，以下几行导致了问题。我只是决定将它们注释掉，然后它就起作用了，没有黑屏。

```
[self addChildViewController:self.previousViewController];
[self.previousViewController didMoveToParentViewController:self]; 
```

我不能只用导航控制器弹出它，因为我想创建一些拖动效果，用户滑动（因为他们看到下面的前一个视图控制器）直到屏幕的一半，从那里转到前一个视图控制器。

# php - jQuery ajax 等待 php 响应过程

> ID：15756416
> 
> 赞同：0
> 
> 时间：2013-04-02T04:57:38.750
> 
> 标签：php, jquery, phpmailer

我正在使用 ajax 函数来发送数据。在 php 进程中，我运行 phpmailer 以使用 smtp gmail 发送电子邮件。一切都很顺利，但在某些情况下，我想向用户提供信息以等待正在进行的过程。我的代码：

```
LoadingProccess();
var FormData = $('#subscribe').serialize(); 
$.ajax({
    type: "POST",
    url: "proses_corporate.php",
    data: FormData,
    cache: false,
    dataType: "json",
    success: function(data){
        var cek = data.result;
        $.unblockUI();
        if(cek=='Success'){
        $('#subscribe')[0].reset();
        $.blockUI({ 
            message:  '<h4>'+data.status+'</h4>', 
            timeout:   8000 ,
            css: {
              top:  ($(window).height() - 100) /2 + 'px', 
              left: ($(window).width() - 650) /2 + 'px',
              width: '650px'
        }); 
            setTimeout(function() { 
                window.location.href = 'http://www.domain.com/';
            }, 8000);
    }
      setTimeout(function() { 
          window.location.href = 'http://www.domain.com/';
      }, 8000);
    }
   },
         error: function() {
            alert('Error');
         }

}); 
```

场景：当我提交时，应用程序将被锁定并向用户显示该过程正在进行的信息。因为那个 php 需要几秒钟来处理通过 smtp gmail 发送的邮件。

在我的 php echo json_encode 中给出命令给 jquery 以显示该过程已成功的信息。我的**PHP**代码：

```
function smtpmailer($to, $from, $from_name, $subject, $body) { 
    global $error;
    $mail = new PHPMailer();  // create a new object
    $mail->IsSMTP(); // enable SMTP
    $mail->SMTPDebug = 0;  // debugging: 1 = errors and messages, 2 = messages only
    $mail->SMTPAuth = true;  // authentication enabled
    $mail->SMTPSecure = 'ssl'; // secure transfer enabled REQUIRED for GMail
    $mail->Host = 'smtp.gmail.com';
    $mail->Port = 465; 
    $mail->Username = GUSER;  
    $mail->Password = GPWD;           
    $mail->SetFrom($from, $from_name);
    $mail->Subject = $subject;
    $mail->Body = $body;
    $mail->AddAddress($to);
    if(!$mail->Send()) {
        $error = 'Mail error: '.$mail->ErrorInfo; 
        return $error;
    } else {
        $error = 'Message sent!';
        return $error;
    }
} 
```

使用

```
smtpmailer('bertho_joris@yahoo.co.id','berthojoris@gmail.com','GMAIL','Testing Form GMail','Test...Test...Test...Test...');
echo json_encode(array('status' => 'Data has been sent.', 'result' => 'Success')); 
```

如上面的代码，表单将在成功处理后被路由到特定页面。就我而言，jQuery 如何在翻页之前等待动态 php 的结果？

你必须在 jQuery 上使用**timeout: 10000吗？**它似乎不是动态的，因为时钟是手动设置的。还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:45:11.060

您可以在页面上放置一个掩码并使其在 ajaxStart() 上可见[并在](http://api.jquery.com/ajaxStart/)[ajaxStop()](http://api.jquery.com/ajaxStop/)函数上消失或重定向页面

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T08:47:30.527

您可以使用 beforeSend 函数添加掩码。并在完成功能时移除遮罩。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T08:57:19.050

您在等待响应时使您的 ajax 请求超时时间更长。例如

```
$.ajax({
    type: "POST",
    url: "proses_corporate.php",
    data: FormData,
    cache: false,
    timeout: 30000, // 3 second
    dataType: "json",
    success: function(res){   }, 
    failed: function(err){   }
} 
```

# java - 在java中制作计算器，如何只允许数字输入

> ID：15756417
> 
> 赞同：1
> 
> 时间：2013-04-02T04:57:48.730
> 
> 标签：java, swing, jframe, jbutton, jlabel

IM 尝试使用 Java/eclipse 制作计算器。如何使只能在文本区域中输入数值？因此，当我运行应用程序时，它运行完美。所有按钮都运行良好。但我想让它只允许在文本区域中输入数字。

```
 import java.awt.Color;
  import java.awt.FlowLayout;
import java.awt.LayoutManager;
import java.awt.TextField;

  import javax.swing.JButton;
  import javax.swing.JFrame;
import javax.swing.JPanel;
import javax.swing.JTextArea;
import java.awt.event.ActionListener;
import java.awt.event.ActionEvent;
 import java.text.ParseException; 
  import java.util.Scanner;

   public class calculator_gui<reutrn> implements ActionListener {

JFrame frame = new JFrame("Calculator");
JPanel Panel = new JPanel (new java.awt.FlowLayout());

JTextArea text = new JTextArea(1,20);
JButton but1= new JButton("1");
JButton but2= new JButton("2");
JButton but3= new JButton("3");
JButton but4= new JButton("4");
JButton but5= new JButton("5");
JButton but6= new JButton("6");
JButton but7= new JButton("7");
JButton but8= new JButton("8");
JButton but9= new JButton("9");
JButton but0= new JButton("0");

JButton butadd= new JButton("+");
JButton butsub= new JButton("-");
JButton butmulti= new JButton("*"); 
JButton butdiv= new JButton("/");
JButton buteq= new JButton("=");
JButton butclear= new JButton("C");

Double number1,number2,result;
int addc=0,subc=0,multic=0,divc=0;

public void gui(){

    Panel.setLayout(FlowLayout());
    frame.setVisible(true);
    frame.setBounds(100, 100, 450, 285);
      frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
     //  frame.setResizable(false);

    frame.add(Panel);
    Panel.setBackground(Color.green);

    Panel.add(text);
    text.setBounds(10, 32, 361, 29);

    Panel.add(but1);
    but1.setBackground(Color.red);
    but1.setBounds(10, 81, 89, 23);

    Panel.add(but2);
    but2.setBounds(126, 81, 89, 23);

    Panel.add(but3);
    but3.setBounds(225, 81, 89, 23);

    Panel.add(but4);
    but4.setBounds(10, 115, 89, 23);

    Panel.add(but5);
    but5.setBounds(126, 115, 89, 23);

    Panel.add(but6);
    but6.setBounds(225, 115, 89, 23);

    Panel.add(but7);
    but7.setBounds(10, 149, 89, 23);

    Panel.add(but8);
    but8.setBounds(126, 149, 89, 23);

    Panel.add(but9);
    but9.setBounds(225, 149, 89, 23);

    Panel.add(but0);
    but0.setBounds(126, 183, 89, 23);

    Panel.add(butadd);
    butadd.setBounds(324, 81, 89, 23);

    Panel.add(butsub);
    butsub.setBounds(324, 115, 89, 23);

    Panel.add(butmulti);
    butmulti.setBounds(324, 183, 89, 23);

    Panel.add(butdiv);
    butdiv.setBounds(324, 149, 89, 23);

    Panel.add(buteq);
    buteq.setBounds(225, 183, 89, 23);

    Panel.add(butclear);
    butclear.setBounds(10, 183, 89, 23);

    but1.addActionListener(this);
    but2.addActionListener(this);
    but3.addActionListener(this);
    but4.addActionListener(this);
    but5.addActionListener(this);
    but6.addActionListener(this);
    but7.addActionListener(this);
    but8.addActionListener(this);
    but9.addActionListener(this);
    but0.addActionListener(this);
    butadd.addActionListener(this);
    butsub.addActionListener(this);
    butmulti.addActionListener(this);
    butdiv.addActionListener(this);
    buteq.addActionListener(this);
    butclear.addActionListener(this);

}

private LayoutManager FlowLayout() {
    // TODO Auto-generated method stub
    return null;
}

@Override
public void actionPerformed(ActionEvent e){

  Object source = e.getSource();

  if(source==butclear){

      number1=0.0;
      number2=0.0;
      text.setText(null);

  }

  if(source==but1){  
       text.append("1");        

  }

  if(source==but2){  
       text.append("2");        

  }

  if(source==but3){  
       text.append("3");        

  }

  if(source==but4){  
       text.append("4");        

  }

  if(source==but5){  
       text.append("5");        

  }

  if(source==but6){  
       text.append("6");        

  }

  if(source==but7){  
       text.append("7");        

  }

  if(source==but8){  
       text.append("8");        

  }

  if(source==but9){  
       text.append("9");        

  }

  if(source==but0){  
       text.append("0");        

  }
  if(source==butadd){
      number1=number_reader();
      text.setText("");
      addc=1;
      subc=0;
      multic=0;
      divc=0;

  }

  if(source==butsub){
      number1=number_reader();
      text.setText("");
      addc=0;
      subc=1;
      multic=0;
      divc=0;

  }
  if(source==butmulti){
      number1=number_reader();
      text.setText("");
      addc=0;
      subc=0;
      multic=1;
      divc=0;

  }
  if(source==butdiv){
      number1=number_reader();
      text.setText("");
      addc=0;
      subc=0;
      multic=0;
      divc=1;

  }

  if(source==buteq){

      number2=number_reader();
      if(addc>0){
          result=number1+number2;
          text.setText(Double.toString(result));

      }

  if(subc>0){
      result=number1-number2;
      text.setText(Double.toString(result));          
  }

  if(multic>0){
      result=number1*number2;
      text.setText(Double.toString(result));

  }

    }

     if(divc>0){
      result=number1/number2;
      text.setText(Double.toString(result));

           }

       }

public double number_reader(){
    Double num1;
    String s;
    s=text.getText();
    num1=Double.valueOf(s);

    return  num1;

        }

      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:25:20.327

你可以做很多事情。

*   在您的文本区域设置一个`javax.swing.InputVerifier`。如果他们键入非法内容，这将防止人们退出。这可能还不够。
*   在其构造函数中设置自定义`Document`。`JTextArea`使用您编写的子类`PlainDocument`，在其中覆盖其`insertText`方法并拒绝非数字。这将负责打字和剪切粘贴。

如果你没有一个巨大`actionPerformed`的方法来处理所有的数字和操作按钮，你会在下一次尝试中做得更好。相反，给每个按钮一个`AbstractAction`. 数字按钮可以共享一个类的实例。

`JComponent`s，包括`JButton`s，可以有客户端属性，所以你可以编写如下代码

```
JButton but1= new JButton("1");
but1.setClientProperty("digit", "1");  // Why a string? 
    // Suppose you have a switch to use hexadecimals? 
```

然后可以访问按下按钮的动作侦听器可以调用`getClientProperty("digit")`它以找出用户选择的数字。只需少量投资，您就可以节省大量重复代码。

最后，学习模型-视图-控制器架构，或`MVC`. 不要直接在文本区域上进行操作。如果没有 RFC，您将在添加更多操作或切换到 RPN 计算器时遇到很多问题。

1.  创建一个模型：这包含累加器和新操作数的对象。
2.  创建视图：Swing 设置。
3.  创建控制器：完成工作的对象。你的动作应该是控制器做某事的请求。控制器应该对模型执行此操作，然后模型或控制器应该刷新视图。

此外，您的计算器类名称有点奇怪。这个名字`calculator_gui<reutrn>`没有意义；为什么是通用的？为什么要违反 Java 标准？就叫吧`Calculator`。

# 添加

发帖人希望我展示如何将按钮创建 coe 变成一个循环。所以，替换十行：

```
JButton but1= new JButton("1");
JButton but2= new JButton("2");
JButton but3= new JButton("3");
JButton but4= new JButton("4");
JButton but5= new JButton("5");
JButton but6= new JButton("6");
JButton but7= new JButton("7");
JButton but8= new JButton("8");
JButton but9= new JButton("9");
JButton but0= new JButton("0"); 
```

进入：

```
JButton[] digitButton = new JButton[10];  // digitButton is an arry of JButtons,
                                          // Initialized to nulls.
for(final int i = 0; i < 10; i++) {
    digitButton[i] = new JButton(Integer.toString(i));  // Convert 0 to "0", etc.
                                                        // Then make a button.  
} 
```

现在，给每个按钮一个自己的动作监听器，而不是让主类拥有一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:02:52.053

只是提出一个条件：

```
if ((text.contains("[a-zA-Z]+") == false){
//error
}

else{
//do your computation.
} 
```

或者

```
if ((text.contains("[0-9]*") == true){
//your code    
} 
```

# php - 对嵌套数组进行分组和计数 PHP

> ID：15756426
> 
> 赞同：1
> 
> 时间：2013-04-02T04:58:27.477
> 
> 标签：php, arrays, multidimensional-array

我有一个按项目类型对不同项目进行分组的数组。我按 category_id 字段对结果进行分组。我想要的是输出

项目1 = 3
项目 2 = 2

如果我执行 var_dump()，我的数组看起来像这样

```
array(2) {
  ["item1"]=>
   array(3) {
    [0]=>
    string(1) "3"
    [2]=>
    string(1) "5"
    [4]=>
    string(1) "7"
  }
  ["item2"]=>
  array(2) {
    [1]=>
    string(1) "4"
    [3]=>
    string(1) "6"
  }
} 
```

这是我正在使用的代码：

```
 $items = Item::where('order_id','=',$payload["orderId"])->get();
            $itemsGrouped = [];
            $count = 0;
            foreach($items as $item){
                $itemsGrouped[$item->category_id][$count] = $item->id;
                $count++;
            }

           foreach($itemsGrouped as $grp){
               echo key($itemsGrouped).'='.count($grp).'<br>';
           }; 
```

这就是我目前得到的。计数有效，但 $itemsGrouped 键无效。它是重复的。

```
item2=3<br>item2=2<br> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:07:11.373

更改您的代码如下

```
foreach($itemsGrouped as $key => $grp){
     echo $key.'='.count($grp).'<br>';
}; 
```

为了使用 key() 函数，您需要使用 next/current 函数遍历数组

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T05:03:28.633

```
 foreach($itemsGrouped as $key => $grp){
           echo $key.'='.count($grp).'<br>';
       }; 
```

`key()`函数返回当前元素的键，该键由数组的内部指针定义。显然它总是指向最后一个元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:07:59.730

```
 $myarray = "Your array";

    $count = array();  // create an empty array

    foreach($myarray as $arr) {  
        foreach($arr as $a) {  
            $key = array_keys($a); 
            $count[$key[0]]++;
        }
    }

    print_r($count); 
```

# ruby - 在 Debian 中安装 ruby -ldap 时出错

> ID：15756428
> 
> 赞同：0
> 
> 时间：2013-04-02T04:58:46.923
> 
> 标签：ruby, rubygems, gem, ldap, debian

我正在尝试安装 ruby​​-ldap 但它不起作用。

尝试安装 libsasl2-dev 和 libldap-dev 没有帮助。

尝试过`apt-get install ruby-ldap`的宝石会忽略它。

尝试删除`/var/lib/gems/1.9.1/gems/ruby-ldap*`&`/var/lib/gems/1.9.1/cache/ruby-ldap*`并重新安装没有帮助。

有人有类似的问题吗？

```
# gem install ruby-ldap
Fetching: ruby-ldap-0.9.12.gem (100%)
Building native extensions.  This could take a while...
ERROR:  Error installing ruby-ldap:
        ERROR: Failed to build gem native extension.

        /usr/bin/ruby1.9.1 extconf.rb
--with-openldap2
checking for ldap.h... yes
checking for lber.h... yes
checking for ldap_ssl.h... no
checking for openssl/ssl.h... yes
checking for openssl/crypto.h... yes
checking for main() in -lcrypto... yes
checking for main() in -lssl... yes
checking for main() in -lnsl... yes
checking for main() in -lpthread... yes
checking for main() in -lresolv... yes
checking for main() in -llber... yes
checking for main() in -lldap_r... yes
checking for main() in -lldap... yes
checking for ldap_init() in ldap.h... yes
checking for ldap_set_option()... yes
checking for ldap_get_option()... yes
checking for ldap_start_tls_s()... yes
checking for ldap_memfree()... yes
checking for ldap_perror()... yes
checking for ldap_sort_entries()... yes
checking for ldapssl_init()... no
checking for ldap_sslinit()... no
checking for ldap_sasl_bind_s()... yes
checking for ldap_compare_s()... yes
checking for ldap_add_ext_s()... yes
checking for ldap_compare_ext_s()... yes
checking for ldap_delete_ext_s()... yes
checking for ldap_modify_ext_s()... yes
checking for ldap_search_ext_s()... yes
checking for ldap_unbind_ext_s()... yes
checking for ldap_sasl_interactive_bind_s()... yes
creating Makefile

make
compiling saslconn.c
saslconn.c: In function ‘rb_ldap_conn_sasl_bind’:
saslconn.c:178:7: error: format not a string literal and no format arguments [-Werror=format-security]
saslconn.c:200:7: error: format not a string literal and no format arguments [-Werror=format-security]
cc1: some warnings being treated as errors
make: *** [saslconn.o] Error 1 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T06:04:28.637

您的`gcc`编译器似乎对警告太生气了。您是否会尝试在编译期间不执行格式检查：

```
gem install ruby-ldap -- --with-cflags=\"-Wformat=0\" 
```

后者应该覆盖`CFLAGS`由`ruby-ldap`维护人员提供的默认值，并停止将格式警告视为错误。如果这没有帮助，您总是可以下载 的源代码`ruby-ldap`，找到`Makefile`本地扩展并`-Werror=format-security`从那里删除字符串。

希望能帮助到你。

# ruby-on-rails-3 - 获取用户页面信息时的图形调用错误（Ruby on Rails）

> ID：15756429
> 
> 赞同：0
> 
> 时间：2013-04-02T04:58:47.023
> 
> 标签：ruby-on-rails-3, facebook-graph-api, koala

我在使用 Koala 进行一些图形调用时遇到了一些麻烦。

图表调用：

```
 @graph_data = @api.get_object("me/books")
        @account_data = @api.get_connections("me","accounts") 
```

我的 callback.html.erb 中有一个 do 循环，它显示了一个表格，其中显示了用户最喜欢的书籍的名称。

（必须删除 html 标签）

```
@graph.data.each do |data|
  data["name"]
end 
```

这段代码很好，我得到一个包含所有书名的表格。

当我想显示 @account_data 对象时会出现问题，这应该包含用户是管理员的所有页面的信息。

我期待一个包含用户订阅的所有页面名称的表格。@account_data 应该有两个数组元素，因为我是两个页面的管理员。

我的理解是我应该得到一个看起来像这样的对象：

```
[{field1=>val1,field2=>val2,....}, {field1=>val1,field2=>val2,....}] 
```

我尝试使用 Graph 调用 @api.get_object("me/accounts") 但同样的问题 - 空白屏幕。

提前致谢。

# android - 这是什么意思？“红色框是完整资产的边界框。”

> ID：15756435
> 
> 赞同：0
> 
> 时间：2013-04-02T04:58:58.490
> 
> 标签：android, icons

[在这里](http://developer.android.com/guide/practices/ui_guidelines/icon_design_status_bar.html#icon9)我读到：“...... Android 2.3......红色框是完整资产的边界框。” 下面说一个图标有两种尺寸：

> ```
> Full Asset: 24w x 38h px (preferred, width may vary)
> Icon: 24w x 24h px (preferred, width may vary) 
> ```

那么，图标图像到底应该是“Full Asset”还是“Icon”呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:02:28.643

这意味着您应该使用 24x38 图像。但是你应该在顶部和底部保持 7px 透明。

# javascript - 自定义 Soundcloud 可视化工具 webgl

> ID：15756441
> 
> 赞同：1
> 
> 时间：2013-04-02T04:59:33.530
> 
> 标签：javascript, html, webgl, soundcloud

我一直在查看 soundcloud 文档并试图找到一种方法来为 soundcloud 轨道创建可视化器。问题是，为了创建一个合适的可视化工具，我需要访问源波形。我想这不是直接可用的，因为这可能会导致版权问题。但是，我确实找到了这个[可视化工具](http://www.apexvj.com/hd/player?s=83742832)，但它使用了闪存。我还看到 doob 先生有[一个不同的可视化](http://soundcloud.com/apps/comments-visualizer)器，但他唯一的可视化评论。

所以我的问题是：有没有办法通过 soundcloud api 访问波形，以便我可以可视化它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T09:51:04.360

您可以使用 Web Audio API 获取当前频率以将其可视化：http: [//themaninblue.com/writing/perspective/2012/09/18/](http://themaninblue.com/writing/perspective/2012/09/18/)

# git - 生产服务器上的 git repo：设置裸存储库后的步骤是什么？

> ID：15756442
> 
> 赞同：1
> 
> 时间：2013-04-02T04:59:34.200
> 
> 标签：git, amazon-ec2, repository, git-bare

我已经在我的 EC2 实例上创建了一个裸 git 存储库，并且我已经将一个分支从我的开发机器推送到它。我现在可以`git log`在服务器上运行，它看起来是最新的。

开发机器现在有两个遥控器，一个“来源”是代码所在的 Bitbucket.org 存储库，第二个“ec2”是我为了部署代码而推送到的遥控器。看起来每当我推送到“ec2”时，它基本上都会将 repo 与我从 Bitbucket 抓取的任何内容同步。这很好，尽管在我的脑海里，我想知道我必须做些什么不同的事情来构建一个没有中间内容的不同历史。（不重要。）

但是在服务器上，repo 是一个裸 repo，没有工作树。

让服务器自动部署 webapp 的正确方法是什么？

我希望有人帮我比较和对比这两种方法：

```
 ... inside the bare repo on the server ... 
$ cat > hooks/post-receive
#!/bin/sh
GIT_WORK_TREE=/home/ec2-user/www/webserver-works-off-this-dir
export GIT_WORK_TREE
git checkout -f 
```

或者，我认为建立一个单独的 git repo 是有意义的，即

```
 ... also on the server ... 
$ cd /home/ec2-user/www/
$ git clone # ??? How do I clone from localhost bare repo?
 ... presumably set the post-receive hook in the bare-repo to cd to *this* dir and run git checkout or pull or something... 
```

哦，还有，有什么作用`git checkout -f`？强制覆盖结帐最新的按时间顺序提交？我认为有一些隐含的东西我不确定。我猜一个`push`操作必须“附加”到某个提交，这将是有问题的提交。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:36:02.390

接收后挂钩是一个很好的解决方案。

另一种选择是设置第二个非裸 repo 并 cd 进入该 repo，以便从第一个裸 repo中*提取。*我在“选项[是否`--bare`等于`core.bare`Git 中的配置？](https://stackoverflow.com/a/14901796/6309) ”中进行了解释。

正如[eis](https://stackoverflow.com/users/365237/eis) [评论](https://stackoverflow.com/questions/15756442/git-repo-on-production-server-what-is-the-step-after-setting-up-the-bare-reposi/15756864#comment22393633_15756442)，如果您想直接推送到 EC2 服务器 git repo，这两种解决方案都很好。
从 EC2 中的 git 会话中直接提取 BitBucket 存储库也可以。

# php - 用输入文本字段中的值重命名php文件？

> ID：15756444
> 
> 赞同：0
> 
> 时间：2013-04-02T04:59:40.630
> 
> 标签：php, javascript, ajax, text, input

我正在尝试重命名文件，因为我正在使用 JQuery 上传器上传它。我已经很远了，这是我的 UploadHandler.php 的重要部分：

```
protected function handle_file_upload($uploaded_file, $name, $size, $type, 
    $error, $index = null, $content_range = null)
{

    $file = new stdClass();
    $file = new stdClass();

    $name = "Name"; 

    $file->name =  /* basename(stripslashes($name)) . */
        $this->get_file_name($name, $type, $index, $content_range);
    $file->size = $this->fix_integer_overflow(intval($size));
    $file->type = $type;
    if ($this->validate($uploaded_file, $file, $error, $index)) {
        $this->handle_form_data($file, $index);
        $upload_dir = $this->get_upload_path();
        if (!is_dir($upload_dir)) {
            mkdir($upload_dir, $this->options['mkdir_mode'], true);
        }
        $file_path = $this->get_upload_path($file->name);
        $append_file = $content_range && is_file($file_path) &&
        $file->size > $this->get_file_size($file_path);
        if ($uploaded_file && is_uploaded_file($uploaded_file)) {
            // multipart/formdata uploads (POST method uploads)
            if ($append_file) {
                file_put_contents(
                    $file_path,
                    fopen($uploaded_file, 'r'),
                    FILE_APPEND
                );
            } else {
                move_uploaded_file($uploaded_file, $file_path);
            }
        } else {
            // Non-multipart uploads (PUT method support)
            file_put_contents(
                $file_path,
                fopen('php://input', 'r'),
                $append_file ? FILE_APPEND : 0
            );
        } 
```

如您所见，`$name`我将变量设置为“名称”，如果我希望将所有上传的文件都称为名称，这将非常有用。但我想要它，这样人们就可以输入他们的名字并将文件重命名为那个，我基本上只需要将它传递到我的`$name`变量中。但问题是：我该怎么做？我试过使用ajax：

```
$("#submit").click(function(){

var dataString = $("#nama").val();

 $.ajax({
type: "POST",
url: "server/php/index.php",
data: { 'dataString': dataString },
cache: false,
success: function()
    {
        alert("Order Submitted");
    }
}); 
```

但这根本没有做任何事情。另外这里是 html 索引文件，以防 taht 有帮助：

```
 <!DOCTYPE HTML>
            <!--
            /*
             * jQuery File Upload Plugin Demo 7.4
             * https://github.com/blueimp/jQuery-File-Upload
             *
             * Copyright 2010, Sebastian Tschan
             * https://blueimp.net
             *
             * Licensed under the MIT license:
             * http://www.opensource.org/licenses/MIT
             */
            -->
            <html lang="en">
            <head>
            <!-- Force latest IE rendering engine or ChromeFrame if installed -->
            <!--[if IE]><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><![endif]-->
            <meta charset="utf-8">
            <title>Senior Slide Show</title>
            <meta name="description" content="File Upload widget with multiple file selection, drag&amp;drop support, progress bar and preview images for jQuery. Supports cross-domain, chunked and resumable file uploads. Works with any server-side platform (Google App Engine, PHP, Python, Ruby on Rails, Java, etc.) that supports standard HTML form file uploads.">
            <meta name="viewport" content="width=device-width">
            <!-- Bootstrap CSS Toolkit styles -->
            <link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap.min.css">
            <!-- Generic page styles -->
            <link rel="stylesheet" href="css/style.css">
            <!-- Bootstrap styles for responsive website layout, supporting different screen sizes -->
            <link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap-responsive.min.css">
            <!-- Bootstrap CSS fixes for IE6 -->
            <!--[if lt IE 7]><link rel="stylesheet" href="http://blueimp.github.com/cdn/css/bootstrap-ie6.min.css"><![endif]-->
            <!-- Bootstrap Image Gallery styles -->
            <link rel="stylesheet" href="http://blueimp.github.com/Bootstrap-Image-Gallery/css/bootstrap-image-gallery.min.css">
            <!-- CSS to style the file input field as button and adjust the Bootstrap progress bars -->
            <link rel="stylesheet" href="css/jquery.fileupload-ui.css">
            <!-- CSS adjustments for browsers with JavaScript disabled -->
            <noscript><link rel="stylesheet" href="css/jquery.fileupload-ui-noscript.css"></noscript>
            <!-- Shim to make HTML5 elements usable in older Internet Explorer versions -->
            <!--[if lt IE 9]><script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script><![endif]-->
            </head>
            <body>
            <div class="navbar navbar-fixed-top">
                <div class="navbar-inner">
                    <div class="container">
                        <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </a>
                        <a class="brand" href="http://www.dpnews.org">Dos Pueblos Senior Slide Show</a>
                        <div class="nav-collapse">
                            <!--<ul class="nav">
                                <li class="active"><a href="http://blueimp.github.com/jQuery-File-Upload/">Demo</a></li>
                                <li><a href="https://github.com/blueimp/jQuery-File-Upload#download">Download</a></li>
                                <li><a href="https://github.com/blueimp/jQuery-File-Upload">Source Code</a></li>
                                <li><a href="https://github.com/blueimp/jQuery-File-Upload/wiki">Documentation</a></li>
                                <li><a href="https://github.com/blueimp/jQuery-File-Upload#support">Support</a></li>
                                <li><a href="https://blueimp.net">&copy; Sebastian Tschan</a></li>
                            </ul>-->
                        </div>
                    </div>
                </div>
            </div>
            <div class="container">
                <div class="page-header">
                    <h1>Dos Pueblos Senior Slide Show 2013Uploader</h1>
                </div>
                <blockquote>
                    <p>Hello everyone! Welcome to the Senior Slide Show uploader.<br>
                    To use this uploader, all you have to do is click the "Add Files" button, and pick out your video/image. Maximum file size is 2GB.<br>
                    After that, just click the "Start" button next to the queued file. It will go right to the Senior Slide Show.</p>
                </blockquote>
                <br>
                <!-- The file upload form used as target for the file upload widget -->
                <form id="fileupload" action="//jquery-file-upload.appspot.com/" method="POST" enctype="multipart/form-data">
                    <!-- Redirect browsers with JavaScript disabled to the origin page -->
                    <noscript><input type="hidden" name="redirect" value="http://blueimp.github.com/jQuery-File-Upload/"></noscript>
                    <input type="hidden" name="MAX_FILE_SIZE" value="3000000000" />
                    <!-- The fileupload-buttonbar contains buttons to add/delete files and start/cancel the upload -->
                    <div class="row fileupload-buttonbar">
                        <div class="span7">
                            <!-- The fileinput-button span is used to style the file input field as button -->
                            <span class="btn btn-success fileinput-button">
                                <i class="icon-plus icon-white"></i>
                                <span>Add files...</span>
                                <input type="file" name="files[]" multiple>
                            </span>
                            <button type="submit" class="btn btn-primary start">
                                <i class="icon-upload icon-white"></i>
                                <span>Start upload</span>
                            </button>
                            <button type="reset" class="btn btn-warning cancel">
                                <i class="icon-ban-circle icon-white"></i>
                                <span>Cancel upload</span>
                            </button>
                            <!--<button type="button" class="btn btn-danger delete">
                                <i class="icon-trash icon-white"></i>
                                <span>Delete</span>
                            </button>-->
                            <input type="checkbox" class="toggle">
                        </div>
                        <!-- The global progress information -->
                        <div class="span5 fileupload-progress fade">
                            <!-- The global progress bar -->
                            <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100">
                                <div class="bar" style="width:0%;"></div>
                            </div>
                            <!-- The extended global progress information -->
                            <div class="progress-extended">&nbsp;</div>
                        </div>
                    </div>
                    <!-- The loading indicator is shown during file processing -->
                    <div class="fileupload-loading"></div>
                    <br>
                    <!-- The table listing the files available for upload/download -->
                    <table role="presentation" class="table table-striped"><tbody class="files" data-toggle="modal-gallery" data-target="#modal-gallery"></tbody></table>
                </form>
                <br>
                <!--<div class="well">
                    <h3>Demo Notes</h3>
                    <ul>
                        <li>The maximum file size for uploads in this demo is <strong>5 MB</strong> (default file size is unlimited).</li>
                        <li>Only image files (<strong>JPG, GIF, PNG</strong>) are allowed in this demo (by default there is no file type restriction).</li>
                        <li>Uploaded files will be deleted automatically after <strong>5 minutes</strong> (demo setting).</li>
                        <li>You can <strong>drag &amp; drop</strong> files from your desktop on this webpage with Google Chrome, Mozilla Firefox and Apple Safari.</li>
                        <li>Please refer to the <a href="https://github.com/blueimp/jQuery-File-Upload">project website</a> and <a href="https://github.com/blueimp/jQuery-File-Upload/wiki">documentation</a> for more information.</li>
                        <li>Built with Twitter's <a href="http://twitter.github.com/bootstrap/">Bootstrap</a> toolkit and Icons from <a href="http://glyphicons.com/">Glyphicons</a>.</li>
                    </ul>
                </div>-->
            </div>
            <!-- modal-gallery is the modal dialog used for the image gallery -->
            <div id="modal-gallery" class="modal modal-gallery hide fade" data-filter=":odd" tabindex="-1">
                <div class="modal-header">
                    <a class="close" data-dismiss="modal">&times;</a>
                    <h3 class="modal-title"></h3>
                </div>
                <div class="modal-body"><div class="modal-image"></div></div>
                <div class="modal-footer">
                    <a class="btn modal-download" target="_blank">
                        <i class="icon-download"></i>
                        <span>Download</span>
                    </a>
                    <a class="btn btn-success modal-play modal-slideshow" data-slideshow="5000">
                        <i class="icon-play icon-white"></i>
                        <span>Slideshow</span>
                    </a>
                    <a class="btn btn-info modal-prev">
                        <i class="icon-arrow-left icon-white"></i>
                        <span>Previous</span>
                    </a>
                    <a class="btn btn-primary modal-next">
                        <span>Next</span>
                        <i class="icon-arrow-right icon-white"></i>
                    </a>
                </div>
            </div>
            <!-- The template to display files available for upload -->
            <script id="template-upload" type="text/x-tmpl">
            {% for (var i=0, file; file=o.files[i]; i++) { %}
                <tr class="template-upload fade">
                    <td class="preview"><span class="fade"></span></td>
                    <td class="name"><span>{%=file.name%}</span></td>
                    <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
                    {% if (file.error) { %}
                        <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>
                    {% } else if (o.files.valid && !i) { %}
                        <td>
                            <div class="progress progress-success progress-striped active" role="progressbar" aria-valuemin="0" aria-valuemax="100" aria-valuenow="0"><div class="bar" style="width:0%;"></div></div>
                        </td>
                        <td>{% if (!o.options.autoUpload) { %}
                            <button class="btn btn-primary start">
                                <i class="icon-upload icon-white"></i>
                                <span>Start</span>
                            </button>
                        {% } %}</td>
                    {% } else { %}
                        <td colspan="2"></td>
                    {% } %}
                    <td>{% if (!i) { %}
                        <button class="btn btn-warning cancel">
                            <i class="icon-ban-circle icon-white"></i>
                            <span>Cancel</span>
                        </button>
                    {% } %}</td>
                </tr>
            {% } %}
            </script>
            <!-- The template to display files available for download -->
            <script id="template-download" type="text/x-tmpl">
            {% for (var i=0, file; file=o.files[i]; i++) { %}
                <tr class="template-download fade">
                    {% if (file.error) { %}
                        <td></td>
                        <td class="name"><span>{%=file.name%}</span></td>
                        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
                        <td class="error" colspan="2"><span class="label label-important">Error</span> {%=file.error%}</td>
                    {% } else { %}
                        <td class="preview">{% if (file.thumbnail_url) { %}
                            <a href="{%=file.url%}" title="{%=file.name%}" data-gallery="gallery" download="{%=file.name%}"><img src="{%=file.thumbnail_url%}"></a>
                        {% } %}</td>
                        <td class="name">
                            <a href="{%=file.url%}" title="{%=file.name%}" data-gallery="{%=file.thumbnail_url&&'gallery'%}" download="{%=file.name%}">{%=file.name%}</a>
                        </td>
                        <td class="size"><span>{%=o.formatFileSize(file.size)%}</span></td>
                        <td colspan="2"></td>
                    {% } %}
                    <td>
                        <!--<button class="btn btn-danger delete" data-type="{%=file.delete_type%}" data-url="{%=file.delete_url%}"{% if (file.delete_with_credentials) { %} data-xhr-fields='{"withCredentials":true}'{% } %}>
                            <i class="icon-trash icon-white"></i>
                            <span>Delete</span>
                        </button>-->
                        <input type="checkbox" name="delete" value="1" class="toggle">
                    </td>
                </tr>
            {% } %}
            </script>
            <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
            <!-- The jQuery UI widget factory, can be omitted if jQuery UI is already included -->
            <script src="js/vendor/jquery.ui.widget.js"></script>
            <!-- The Templates plugin is included to render the upload/download listings -->
            <script src="http://blueimp.github.com/JavaScript-Templates/tmpl.min.js"></script>
            <!-- The Load Image plugin is included for the preview images and image resizing functionality -->
            <script src="http://blueimp.github.com/JavaScript-Load-Image/load-image.min.js"></script>
            <!-- The Canvas to Blob plugin is included for image resizing functionality -->
            <script src="http://blueimp.github.com/JavaScript-Canvas-to-Blob/canvas-to-blob.min.js"></script>
            <!-- Bootstrap JS and Bootstrap Image Gallery are not required, but included for the demo -->
            <script src="http://blueimp.github.com/cdn/js/bootstrap.min.js"></script>
            <script src="http://blueimp.github.com/Bootstrap-Image-Gallery/js/bootstrap-image-gallery.min.js"></script>
            <!-- The Iframe Transport is required for browsers without support for XHR file uploads -->
            <script src="js/jquery.iframe-transport.js"></script>
            <!-- The basic File Upload plugin -->
            <script src="js/jquery.fileupload.js"></script>
            <!-- The File Upload file processing plugin -->
            <script src="js/jquery.fileupload-fp.js"></script>
            <!-- The File Upload user interface plugin -->
            <script src="js/jquery.fileupload-ui.js"></script>
            <!-- The main application script -->
            <script src="js/main.js"></script>
            <!-- The XDomainRequest Transport is included for cross-domain file deletion for IE8+ -->
            <!--[if gte IE 8]><script src="js/cors/jquery.xdr-transport.js"></script><![endif]-->
            </body> 
            </html> 
```

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:16:14.973

..好的，我不确定我是否很好地阅读了您的代码，但是由于 $name 是在服务器端声明的，如何声明一个空变量，然后通过 Ajax 将客户端选择（定义）的值传递给它。然后只需将名称声明为具有新变量值的变量变量 ($$name)。那行得通吗？（[http://php.net/manual/en/language.variables.variable.php](http://php.net/manual/en/language.variables.variable.php)）

..好吧，如果您可以通过 GET 变量传递值，则可以执行以下操作：

发起 Ajax 调用：

```
function passname()
{
   var xmlhttp;

   if(window.XMLHttpRequest)
   {
      xmlhttp=new XMLHttpRequest();
   }

   else { xmllhttp=new ActiveXObject("Microsoft.XMLHTTP"); } 

   xmlhttp.onreadystatechange=function()
   {
      if(xmlhttp.readyState==4 && xmlhttp.status==200)
      {
        var newname = document.getElementById("chosen_name").value;
        xmlhttp.open("GET","receive_newname.php?value="+newname, true);
        xmlhttp.send()
      }
   }

} 
```

..显然你需要在服务器上接收PHP文件receive_newname.php（或者在你的情况下它可能在你拥有的同一个PHP服务器文件中）你接收$_GET['value']并将它分配给$name 变量。

我认为这可以工作:) 虽然没有测试它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:03:56.243

在您`server/php/index.php`从 AJAX 调用的文件中，只需调用`$_POST['dataString']`以获取用户输入的内容；）

换句话说，你应该影响你的`$name`变量；

`$name = $_POST['dataString'];`

# ruby-on-rails - 在 Rails 中的 Mongodb 关联多次无法找到数据，但有时有效

> ID：15756445
> 
> 赞同：0
> 
> 时间：2013-04-02T05:00:03.603
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, mongodb, mongoid

在这里我有评论模块

```
class Review
  include Mongoid::Document
  include Mongoid::Timestamps
  belongs_to :job

  has_many :options, :class_name => "Option"
  accepts_nested_attributes_for :options, allow_destroy: true
end 
```

还有期权模型

```
class Option
   include Mongoid::Document
   include Mongoid::Timestamps
   field :name, type: String
   field :comment, type: String
   belongs_to :review,:class_name => "Review"
end 
```

现在在我的 Employee:: Review 控制器中

```
 def show
    @employee_review = Employee::Review.find(params[:id])
    @employee = Employee::Employee.find(@employee_review.employee)
    @employee_id = @employee.id
    @job_title = @employee.job.id
    @review = Review.find_by(job_id: @job_title)

  end 
```

这里 `@review = Review.find_by(job_id: @job_title)` 这段​​代码很少起作用。我每次都检查了@job_title 中传递的 id 但它每次都没有在 Review 模型中找到数据。但是当我使用 Review 控制器检查数据时，它会在 Employee:: Review 控制器中自动工作以查找与给定 job_id 相关的数据。通过此控制器无法在 Review 模型中找到数据的原因可能是什么？但有时它会发现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:12:48.473

如果你反其道而行之，会发生什么？

`@review = Job.find(@job_title).reviews`

# python - gzip.py 中的 python 导入错误；zlib在哪里

> ID：15756449
> 
> 赞同：1
> 
> 时间：2013-04-02T05:00:20.110
> 
> 标签：python, python-import

我正在运行默认使用 python 2.7 的 Ubuntu 12.10。我已经在 /opt/python3.3 中安装了 python 3.3（使用 ./configure --prefix=/opt/python3.3）并创建了一个符号链接 /usr/bin/python33 指向 /opt 中的可执行文件。已经有一个符号链接 /usr/bin/python3 指向 python 3.2（实际上它指向 python3.2mu：如果你可以解释一下为什么包含这个'mu' :)）安装附带ubuntu 安装。我使用 python3 安装了分发工具，没有任何问题。但是当我用 python33 尝试同样的事情时，它给了我以下错误：

```
ankur@junk-mechanism:~$ sudo python33 distribute_setup.py
Extracting in /tmp/tmp685lyf
lzma module is not available
not a bzip2 file
gzip module is not available
bad checksum
Traceback (most recent call last):
  File "distribute_setup.py", line 550, in <module>
    sys.exit(main())
  File "distribute_setup.py", line 547, in main
    return _install(tarball, _build_install_args(options))
  File "distribute_setup.py", line 78, in _install
    tar = tarfile.open(tarball)
  File "/opt/python3.3/lib/python3.3/tarfile.py", line 1578, in open
    raise ReadError("file could not be opened successfully" + str(name) + repr(fileobj))
tarfile.ReadError: file could not be opened successfully/home/ankur/distribute-0.6.35.tar.gzNone 
```

所以在 tarfile.py 中，类方法 Tarfile.open 调用了导入模块 gzip 的类方法 Tarfile.gzopen：

```
 try:
        import gzip
        gzip.GzipFile
    except (ImportError, AttributeError):
        raise CompressionError("gzip module is not available") 
```

此处引发的错误是 ImportError，因为 gzip.py 有一个无法找到的导入 zlib。但即使是其他安装的 python（2.7 和 3.2）也不在各自的标准库 /usr/lib/pythonx.x/lib/ 中包含 zlib。那么区别是什么呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T09:27:30.463

听起来您因为缺少依赖项而没有构建所有内容。您可以尝试获取缺少的依赖项并重新构建。要获取缺少的依赖项，我只需按照 Python 3.2 的要求工作并执行以下操作：

```
sudo apt-get build-dep python3 
```

然后您可以重新配置和重建 Python 3.3 以获得所有必需的模块。

另一种选择是使用死蛇 ppa：

```
sudo add-apt-repository ppa:fkrull/deadsnakes
sudo apt-get update
sudo apt-get install python3.3 
```

我通常也安装 -dev 包，以便我可以安装具有 C 扩展模块的包：

```
sudo apt-get install python3.3-dev 
```

# android - 后退按钮在 viewpager 中没有按预期工作

> ID：15756450
> 
> 赞同：0
> 
> 时间：2013-04-02T05:00:23.297
> 
> 标签：android, android-fragments, android-viewpager

我有一个`ViewPager`5**附加** `fragments`到它。片段就像`[1] [2] [3] [4] [5]`我按下后退按钮时它应该 `fragment [1]`来自任何`fargments`in `viewpager`，但问题是我能够来自 [2]->[1]，但它没有响应当我从 [3]->[1] 按下 BackButton 时，它在`logcat`简单地显示一个弹出窗口时 没有显示任何错误`Application Not Responding`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:04:31.487

您应该在您的活动中覆盖 onBackPressed()，如下所示。

```
@Override
public void onBackPressed() {
    super.onBackPressed();
    viewPager.setCurrentItem(0);
} 
```

# jasper-reports - 空值检查 ireport

> ID：15756455
> 
> 赞同：1
> 
> 时间：2013-04-02T05:00:54.467
> 
> 标签：jasper-reports

我的 Web 应用程序正在使用 I-REPORT 设计器来设计报告。对于报表中使用的数据，我编写了一个查询，从不同的表中获取两个列值。这里列数据的数据类型是**真实的**。在 ireport 中对应的数据类型是**Float**。

在这里，如果一个数据有一个值，另一个没有值或为空。所以我必须在生成报告时使用文本字段显示一个不为空或为空的值。所以我在文本字段中实现了条件

```
( $F{permit_quantity}==null ?$F{fst_insp_qpqlml_quantity} : $F{permit_quantity} ) 
```

这里的字段 $F{permit_quantity}, $F{fst_insp_qpqlml_quantity} 对应查询返回的两列值。

但是当 $F{permit_quantity} 为空或 null 时，上述条件不起作用。

我正在使用**postgresql**数据库

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:50:26.560

`.equals()`如果条件本身不起作用，您可以尝试使用Method。

`$F{permit_quantity}.equals(null) ? $F{fst_insp_qpqlml_quantity} : $F{permit_quantity}`

您的代码不起作用可能还有其他各种原因，但我无法从您的代码段中看出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-12T13:35:25.760

```
 $F{permit_quantity}.toString() == null ? $F{fst_insp_qpqlml_quantity} :  
 $F{permit_quantity} 
```

这解决了你的问题。

# javascript - 我们可以查看 emberjs 中的所有路由，也就是类似于 rake 路由在 rails 中所做的事情吗

> ID：15756458
> 
> 赞同：12
> 
> 时间：2013-04-02T05:01:08.637
> 
> 标签：javascript, ember.js, ember-router

随着 emberjs 中的路线文件变得越来越大，我发现很难跟踪 emberjs 应用程序支持的所有路线，rails 中的 rake 路线给出了 rails 应用程序中的路线列表，有没有办法生成类似的路线emberjs 的时尚？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-02T09:16:28.517

`App.Router.router.recognizer.names`目前，您可以使用或仅使用名称访问所有现有路由`Ember.keys(App.Router.router.recognizer.names)`。

它显然没有 Rails 路线那么广泛，但它提供了一个快速而肮脏的概述。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-10-17T00:59:52.967

在当前版本的 Ember/Ember-cli 中，这是`Object.keys(App.__container__.lookup('router:main').router.recognizer.names)`，其中`App`是您的 Ember 应用程序的名称。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-11-26T22:16:49.423

为了背离[Bradley Priest 的](https://stackoverflow.com/users/365865/bradley-priest)回答，这对于经验丰富的程序员来说似乎很明显，但对于新手来说，您可以`App.Router.router.recognizer.names`在浏览器的调试控制台中运行命令（即：Firefox 中的 Firebug、Chrome 开发人员工具等......）在浏览器中加载您的 Ember 应用程序。

另请注意，这`App`应该是您在 application.js 文件中命名您的 Ember 应用程序的任何名称。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-13T21:48:50.347

以前的答案都不再起作用了。这适用于 ember 2.18.2：

`App.__container__.lookup('router:main')._routerMicrolib.recognizer.names`

（同样，`App`您的 ember 应用程序的名称在哪里）

`ember-cli: 2.18.2 node: 6.11.1`

# php - PHP，MYSQL noob 加入（？）表细节

> ID：15756465
> 
> 赞同：0
> 
> 时间：2013-04-02T05:01:37.500
> 
> 标签：php, mysql

我是 PHP 新手，正在将社交网络作为实践，并将我所学的知识应用到“现实世界”中。无论如何，我在 MySQL 数据库中有两个表，我试图在我的网站上显示在通过 php echo 呈现的同一个 html 表中。

这是表格

(table1) note_system: -id, -username, -note

（表 2）注释：-id、-cid（等于 note_system 中的 id）、-username、-comment

所以有人发表帖子并将其保存到 note_system 表，然后有人对帖子发表评论并将其保存到带有 note_system 表中的 id 的评论表中，因此可以建立关系。

所以我想做的是让帖子评论与相关帖子一起显示。我已经收集到我可能需要一个 JOIN 或 UNION 来实现这一点，但我完全不知道如何做到这一点。一直在绞尽脑汁并进行大量谷歌搜索，但我并没有真正到达任何地方。我尝试的一切都会给我错误。注释显示得很好并且符合预期，但我一生都无法弄清楚如何让评论也显示在那里。

这是我的代码（不要嘲笑我的 PHP 的菜鸟，这是我的第二个 PHP 程序，我显然有很多东西要学，我想在某个时候清理它，但现在我只想要它发挥作用）

```
<?php
// Display Note_Wire

$con=mysqli_connect($host,$username,$password,$dbname);
// Check connection

if (mysqli_connect_errno())
{
echo "Failed to connect to MySQL: " . mysqli_connect_error();
}   

//format and display the Note_Wire results with comments

$result = mysqli_query($con,"SELECT * FROM note_system");

while($row = mysqli_fetch_array($result))
{
echo "<center>";
echo "<table class='note_wire'>";
echo "<tr>";
echo "<td>" . $row['username'] . "</td>" ;
echo "</tr><tr>";

echo "<td><a href=''>vote up</a>" . "  " . $row['rank'] . "  " . "<a href=''>vote      down</a></td>" ;
echo "</tr><tr>";

echo "<td> <a href='{$row['link']}' target='blank'>{$row['link']}</a>";
echo "</tr><tr>";

echo "<td>" . $row['note'] . "</td>" ;

echo "</tr> ";

//add comments attempt  this is where I would like the comments to be displayed

echo  '

<td><form action="add_comment.php" method="POST">  

<input type="hidden" name="username" value="';

echo htmlentities($_SESSION['user']['username'], ENT_QUOTES, 'UTF-8');
echo '" />'; 

echo '<input type="hidden" name="cid" value="';
echo $row['id']; 
echo '" />'; 

echo '<textarea name="comment">comment...</textarea></td></tr>

<tr><td><input type="submit" value="comment" />

</form></td></tr>

';

echo "</table>";

// break before next note-wire record renders
echo "<br />";

}

echo "</center>";

 ?> 
```

我希望我的小鸡从头编程有意义。感谢您的时间和知识。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:11:07.747

如果您是使用 php 和 mysql 的初学者，以下是您的基本步骤。

首先：为数据库用户、密码、主机、数据库名设置配置

```
$conn = new mysqli('database_server','database_username','database_password','database_name'); 
```

第二：创建一个查询（您可以在此处插入您的查询）..

```
$result= $conn->query("SELECT SUM(Total_Steps) AS value_sum FROM users"); 
```

最后：使用 MYSQL 函数显示的记录，如..

```
while($row = $result->fetch_assoc()){
    echo $row['dabatase_columnname'];
    echo $row['database_columnname'];
} 
```

对于您的查询，请尝试使用此查询或创建一个相对查询。

`SELECT 'enter column needed here with their specific database allias ex. TABLE1.ID'FROM NOTE_SYSTEM TABLE1 LEFT JOIN COMMENTS TABLE2 ON TABLE1.ID = TABLE2.CID;`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:25:35.503

实际上，评论是与实际帖子不同的数据集，您可以使用第二个查询来获取与帖子相关的所有评论。但是表连接非常有用，您应该学习它们。在这种情况下，您将在共享 ID（外键）上加入 note_system 和 comments 表。

就像这样：

```
SELECT *
FROM note_system
LEFT JOIN comments ON comments.cid=note_system.id 
```

这是表的文字连接，因此只要连接表达式匹配，您的输出将包括两个表中的所有列。如果注释表中没有匹配的 CID 列，则这些列的值在您的输出中将为 NULL。（如果您只想返回匹配的行，您可以使用 INNER 连接，而不是我上面使用的 LEFT OUTER 连接。）

[这是一个解释 SQL 表连接的好页面。](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

# jquery - jquery 在 DNN 6.2.6 中不起作用

> ID：15756470
> 
> 赞同：1
> 
> 时间：2013-04-02T05:02:04.100
> 
> 标签：jquery, dotnetnuke

2.6 在我的项目开发中。我需要使用 JQuery 开发目录结构。当我尝试像在普通 web 应用程序中那样加载 jquery 插件时，它不起作用..当我在普通 web 应用程序中尝试同样的事情时，我得到了我需要的目录结构...

我在 Host->Host 设置中的 Jquery 设置是

安装的 Jquery 版本：1.7.2

已安装 Jquery UI 版本：1.8.16

使用 Jquery 调试版本：未选中

使用托管 Jquery 版本：未选中

托管 Jquery 网址：[http ://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js](http://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js)

托管 jquery UI URL：[http ://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js](http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.16/jquery-ui.min.js)

我试图包括

```
DotNetNuke.Framework.jQuery.RequestRegistration();
 DotNetNuke.Framework.jQuery.RequestUIRegistration(); 
```

在`Page_init`方法中但没有用

还尝试包含我的 jquery 插件，如下所示

```
<%@ Register TagPrefix="dnn" Namespace="DotNetNuke.Web.Client.ClientResourceManagement"
    Assembly="DotNetNuke.Web.Client" %>
<dnn:DnnJsInclude ID="DnnJsInclude1" runat="server" FilePath="js/jquery.cookie.js"
    PathNameAlias="SkinPath" />
<dnn:DnnJsInclude ID="DnnJsInclude2" runat="server" FilePath="js/jquery.treeview.js"
    PathNameAlias="SkinPath" />
<dnn:DnnJsInclude ID="DnnJsInclude3" runat="server" FilePath="css/jquery.treeview.css"
    PathNameAlias="SkinPath" />
<dnn:DnnJsInclude ID="DnnJsInclude4" runat="server" FilePath="css/folderView.css"
    PathNameAlias="SkinPath" /> 
```

但没有用我已经搜索了很多关于这个问题的 dnn 讨论，但没有用..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T08:05:50.867

我知道使用 DnnJsInclude 加载脚本时有一个优先级，但默认值为 100，这很好。请参阅下面的优先级。

[DotNetNuke - 相对顺序](http://www.dotnetnuke.com/Resources/Wiki/Page/Client-Resource-Management-API.aspx#Relative_Order_10)

使用**DotNetNuke.Framework.jQuery.RequestRegistration**是 Page_Init 或 Page_Load 应该可以正常工作。试试这个，让我知道它是否有效，也可以使用 firebug 甚至 Firefox 开发者控制台屏幕来查看你的脚本是否正在加载。快捷键是 (Ctrl+Shift+K)。它应该向您显示加载脚本的任何错误。

添加 CSS 或 Javascript 资源时，我通常使用完整路径。

**请注意，我将 DnnCssInclude 用于 css 文件，而您将 DnnJsInclude 用于您的 folderView.css 文件。**

例如

```
<dnn:DnnJsInclude runat="server" ID="jsBootstrap" FilePath="~/DesktopModules/MyModuleFolder/js/bootstrap.min.js" />
<dnn:DnnCssInclude runat="server" ID="cssBootstrap" FilePath="~/DesktopModules/MyModuleFolder/css/bootstrap.min.css" /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T12:24:43.340

您是否尝试指定 Priority 属性？这帮助我不止一次地解决问题。

在此处查看：http: [//www.dotnetnuke.com/Resources/Wiki/Page/Client-Resource-Management-API.aspx](http://www.dotnetnuke.com/Resources/Wiki/Page/Client-Resource-Management-API.aspx)并搜索“相对顺序”。

# global - 如何全局声明一个对象，然后在方法中使用它

> ID：15756471
> 
> 赞同：-1
> 
> 时间：2013-04-02T05:02:05.063
> 
> 标签：global, declaration

我声明了一个方法 UISearchBar *searchBar Globally 并合成了它。

我创建了一个表格视图，其中在 cell.textLabel.text 下我想使用这个搜索栏，我该怎么做

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:08:49.767

```
int abc=0;

void method(){
    abc++;//do what ever you want
} 
```

# asp.net - 允许角色不工作但允许用户在 web.config 中工作

> ID：15756475
> 
> 赞同：3
> 
> 时间：2013-04-02T05:02:46.537
> 
> 标签：asp.net, .net, web-config, asp.net-membership, forms-authentication

我为表单身份验证实现了 asp.net 成员资格。通常用于登录，它使用**用户名**，但我将其更改为使用**电子邮件 ID**登录。哪个工作正常。现在我正在尝试限制对非**管理员**角色的用户的访问。我在我这样写的那个文件夹中创建了 web.config 文件。

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <authorization>
      <allow roles="Admin" />
      <deny users="*"/>
    </authorization>
  </system.web>
</configuration> 
```

当我用这个进行测试时，即使具有**管理员**角色的用户无法访问。当他单击链接时，他正在退出（例如用户无权访问该页面）。为了显示菜单，我正在使用**web.sitemap**文件。它根据角色工作正常。[根据MSDN](http://msdn.microsoft.com/en-us/library/acsd09b0%28v=vs.80%29.aspx)，该特定文件夹下的 web.cofnig 文件中的代码是正确的。我不知道为什么它不起作用。如果我们更改成员控制默认登录行为，那么任何事情都应该关注角色？在 stackoverflow 以及其他一些站点中也发现了许多类似的问题。但没有什么能给我解决方案。这有什么问题？需要编写任何自定义代码来处理？为了允许用户我写如下。它工作**完美**

```
<?xml version="1.0"?>
<configuration>
  <system.web>
    <authorization>
      <allow users="master@yahoo.com" />
      <deny users="*"/>
    </authorization>
  </system.web>
</configuration> 
```

为什么它不仅仅适用于角色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T17:46:37.517

`RoleProvider`使用`GetRolesForUser`方法来检索用户的授权角色。

```
// Notice that it accept username instead of email
public string[] GetRolesForUser(string username) 
```

在您的情况下，您的`RoleProvider`通行证`master@yahoo.com`作为用户名。结果，`master@yahoo.com`用户表中没有用户名。

**以下是解决方案 -**

1) 解决问题的最简单方法是将**Memberships**表的**Email**列复制到**Users表的****UserName**列。

 ******`RoleProvider`2）创建自定义和覆盖方法的艰难`GetRolesForUser`方法。

3）如果您碰巧使用`legacy Membership Provider`而不是[Universal Membership Provider](http://www.hanselman.com/blog/IntroducingSystemWebProvidersASPNETUniversalProvidersForSessionMembershipRolesAndUserProfileOnSQLCompactAndSQLAzure.aspx)，您可以修改**aspnet_UsersInRoles_GetRolesForUser**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T05:19:22.740

我使用了另一种方法。我没有用 emailid 更改登录名。我只使用电子邮件登录。但是问题来了，因为默认情况下，角色提供者使用**用户名**而不是**电子邮件**进行验证。为此，我改变了`login`行为。因此，当用户登录时，我曾经提供如下登录控制值。

```
 string username = Membership.GetUserNameByEmail(Login1.UserName);
 if (username != null)
 {

     isUser = Membership.ValidateUser(username, Login1.Password);
   }
  if (isUser)
  {
     Login1.UserName = username;
      e.Authenticated = true;
   } 
```

我正在登录页面中编写此代码。所以登录成功后，loginview 会相应更新。现在它工作完美。**Win**给出的答案也不错。如果我们只想显示电子邮件 ID`LoginView`而不是用户名，我们必须实现此方法。

```
public string[] GetRolesForUser(string username) 
```

要通过电子邮件获取用户名，我们可以这样写

```
string username = Membership.GetUserNameByEmail(Page.User.Identity.Name) 
```******

# iphone - 获取设置视图的当前方向的最佳方法是什么

> ID：15756478
> 
> 赞同：4
> 
> 时间：2013-04-02T05:03:02.753
> 
> 标签：iphone, ios, uidevice

我想检测当前设置视图的方向，从下面的方法中这将是更好的方法，如何？

`[[UIDevice currentDevice]orientation]`

`[[UIApplication sharedApplication] statusBarOrientation]`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:11:58.503

您可以使用 `[[UIApplication sharedApplication] statusBarOrientation]`来检测设备方向。

此方法返回所有情况下的方向值，但如果您使用

`[[UIDevice currentDevice]orientation]`

有时你会得到未知的方向。

我希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:42:39.290

您可以使用以下代码：

```
if (UIInterfaceOrientationIsLandscape([[UIDevice currentDevice] orientation]))
{
     NSLog(@"-Landscape");
}
 else 
{
     NSLog(@"-Portrait");
} 
```

# windows-8 - SWFUpload 和 IE10

> ID：15756479
> 
> 赞同：0
> 
> 时间：2013-04-02T05:03:03.620
> 
> 标签：windows-8, internet-explorer-10, swfupload

我有一个使用 SWFUpload 上传多个文件的 Web 应用程序。这在大多数浏览器上都可以正常工作:-)

现在我在 IE10 上检查了它，但它不起作用。我还尝试了[http://demo.swfupload.org/v220/simpledemo/index.php](http://demo.swfupload.org/v220/simpledemo/index.php)上的演示。每次如果我按下“Hello”按钮（应该打开文件选择对话框的按钮）什么都不会发生......

有任何想法吗？

谢谢，史蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:50:52.043

找到了！

SWFUpload 只能在 IE10 的 Win8 桌面环境下工作。SWFUploads 似乎无法在新的 Windows 8 多点触控 GUI 上打开多文件选择对话框。

我还检查了 jquery 的多文件上传，并且 jquery 多文件上传也适用于新的 Windows 8 Metro 环境。

问候， 史蒂芬

# asp.net - OpenID 无法正常工作

> ID：15756481
> 
> 赞同：1
> 
> 时间：2013-04-02T05:03:18.350
> 
> 标签：asp.net, authentication, openid

我为我的 loginpage 进行了 openID 登录。现在它显示 OpenID 提供者 Images 。当我点击它时，它不会重定向到正确的页面。

更多 - 当我登录 Stackoverflow 时，我使用了谷歌图片按钮。然后它重定向到 gmail 登录页面。但我的例子它没有重定向

我按照[教程](http://bhaidar.net/post/2011/04/04/OpenID-Single-Sign-On-ASPNET-Web-Forms.aspx)

当我点击 Google/Yahoo/AOL 时，它不会重定向到上面的登录页面。

# batch-file - 批处理文件可以检查电脑中的温度是否过热吗？

> ID：15756483
> 
> 赞同：1
> 
> 时间：2013-04-02T05:03:27.317
> 
> 标签：batch-file

我想通过批处理文件测试电脑的温度，可以吗？你能想到什么有创意的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:05:23.463

是的你可以。

您可以使用**wmi**来获取系统中各个热区的温度。

```
WMIC /namespace:\\root\WMI path MSAcpi_ThermalZoneTemperature Get CurrentTemperature,InstanceName 
```

温度以分开尔文返回。

根据您的要求，您可能想要平均或获取最大温度读数并检查限制...

```
@echo off
setlocal enabledelayedexpansion
set maxtemp=0
FOR /F "skip=1" %%A IN ('WMIC /namespace:\\root\WMI path MSAcpi_ThermalZoneTemperature Get CurrentTemperature') DO (
  if %%A gtr !maxtemp! set maxtemp=%%A
)
if !maxtemp! gtr 3500 echo its too darn hot in here 
```

或者根据您的要求，您可能想要平均温度。

# magento - 如何在magento框架中编辑页脚部分？

> ID：15756485
> 
> 赞同：3
> 
> 时间：2013-04-02T05:03:40.500
> 
> 标签：magento

我是 magento 的新手。我想更改页脚部分。 **我的页脚文件路径**：D:\wamp\www\magento\app\design\frontend\base\default\template\page\html\footer.phtml。

```
<div class="footer-container">
<div class="footer">
    <?php echo $this->getChildHtml() ?>
    <p class="bugs"><?php echo $this->__('Help Us to Keep Magento Healthy') ?> - <a href="http://www.magentocommerce.com/bug-tracking" onclick="this.target='_blank'"><strong><?php echo $this->__('Report All Bugs') ?></strong></a> <?php echo $this->__('(ver. %s)', Mage::getVersion()) ?></p>
    <address><?php echo $this->getCopyright() ?></address>
</div> 
```

现在我想删除帮助我们保持句子。

请告诉我如何删除这个

我已经完全删除了，然后它也显示在前端。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T05:17:39.340

转到管理部分 System>Configuration>Advanced>Developer>Debug 然后启用模板路径提示。在此之后刷新您的网站前端。

您将从正在加载文件的主题中获得正确的信息。

然后更改正确的footer.phtml 文件。

此消息将消失。我认为您是 magento 的新手。

要获得更好的知识，请阅读 [设计包](http://merch.docs.magento.com/ce/user_guide/design/package.html?Highlight=theme%20hierarchy)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-09T22:05:19.110

这是一个缓存问题。

导航到您网站的缓存：

```
public_html/var/cache //Or where ever the route of your Magento cart is. 
```

然后**删除**var目录下的所有东西！

刷新您的站点，您的更改应该会出现。

# mysql - 如果我在一个表中有一组相关的行，我如何用组中的索引来装饰它们？

> ID：15756487
> 
> 赞同：1
> 
> 时间：2013-04-02T05:03:43.010
> 
> 标签：mysql, sql, select

我有两张桌子`score`和`game`. 每场比赛都有`n`得分。我想得到`n`每场比赛的得分。所以我会得到：

```
round, score, game
==================
1      1      1
2      2      1
3      3      1
1      9      2
2      3      2 
```

小提琴示例：

[http://sqlfiddle.com/#!2/56434/1](http://sqlfiddle.com/#!2/56434/1)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:09:17.650

```
SELECT  RoundNo, Score, ID
FROM
        (
            select  a.ID,
                    b.Score,
                    @sum := if(@nme = a.ID, @sum ,0) + 1 RoundNo,
                    @nme := a.ID
            from    game a
                    INNER JOIN scores b
                      ON a.ID = b.game_ID
                    CROSS JOIN
                    (select @nme := '', @sum := 0) vars
            order   by  a.ID
        ) s
ORDER   BY ID 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/56434/18)

输出

```
╔═════════╦═══════╦════╗
║ ROUNDNO ║ SCORE ║ ID ║
╠═════════╬═══════╬════╣
║       1 ║    14 ║  1 ║
║       2 ║    10 ║  1 ║
║       1 ║    19 ║  2 ║
║       2 ║    20 ║  2 ║
║       3 ║    25 ║  2 ║
╚═════════╩═══════╩════╝ 
```

# android - 安卓谷歌地图路线图绘制

> ID：15756491
> 
> 赞同：0
> 
> 时间：2013-04-02T05:03:59.937
> 
> 标签：android, google-maps

我已经构建了以下带有源和目标点的 url，如下所示

```
String jsonURL = "http://maps.googleapis.com/maps/api/directions/json?";
        final StringBuffer sBuf = new StringBuffer(jsonURL);
        sBuf.append("origin=");
        sBuf.append(start.getLatitudeE6()/1E6);
        sBuf.append(',');
        sBuf.append(start.getLongitudeE6()/1E6);
        sBuf.append("&destination=");
        sBuf.append(dest.getLatitudeE6()/1E6);
        sBuf.append(',');
        sBuf.append(dest.getLongitudeE6()/1E6);
        sBuf.append("&sensor=true&mode=driving"); 
```

最终网址是

```
http://maps.googleapis.com/maps/api/directions/json?origin=17.449672,78.373002&destination=40.686245,-93.399375&sensor=true&mode=driving 
```

但我得到“路线”：[]。所以我无法绘制源和目的地之间的路径。谁能告诉我这里出了什么问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:15:23.947

你怎么能指望在印度海得拉巴和美国阿勒顿之间有一条路线。这就是路线为零的原因。试试这个它会返回正确的结果，[http ://maps.googleapis.com/maps/api/directions/json?origin=17.449672,78.373002&destination=17.402531,78.377752&sensor=true&mode=driving](http://maps.googleapis.com/maps/api/directions/json?origin=17.449672,78.373002&destination=17.402531,78.377752&sensor=true&mode=driving)

# r - 在 R 中使用 BFS 计算最短路径

> ID：15756492
> 
> 赞同：0
> 
> 时间：2013-04-02T05:04:00.530
> 
> 标签：r, shortest-path, breadth-first-search

我正在与 R 合作，对网络进行广度优先搜索。这是我到目前为止的代码：

```
shortestPath <- function(v1,v2) {
  q <- rep(0, 3931)
  head <- 1
  head2 <- 0
  tail <- 1
  v1$distance <- 0
  q[tail] <- v1
  while(head <= tail) {
    v <- q[head]
    head <- head + 1
    if(v==v2) {
      return(v$distance)
      }
    vEdges <- get.neighborhood(net, v)
    m <- rep(0,3931)
    m[head2] <- v
    head2 <- head2 + 1
    for(n in vEdges) {
    if(!(n %in% m)) {
      n$distance <- v$distance + 1
      m[head2] <- n
      head2 <- head2 + 1
      tail <- tail + 1
      q[tail] <- n
      }
    }
  }
} 
```

我不太确定它发生了什么。它只是无限地卡在while循环中。我正在处理的网络工作并且完全连接。我认为这只是我没有看到的一个小问题，如果有人可以让我朝着解决这个问题的正确方向前进，那就太好了。我可能不像典型的 R 用户那样有经验。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:19:42.443

我认为`while`循环只是无限循环，因为在我假设`head <= tail`的图表末尾总是 TRUE ？`head == tail`我怀疑`head < tail`是你的意思？此外，我不相信`return`while 循环的中断，请使用`break`它。

# java - 返回随机字母的迭代器不能让它迭代

> ID：15756495
> 
> 赞同：0
> 
> 时间：2013-04-02T05:04:15.360
> 
> 标签：java, iterator, while-loop

我有这个迭代器，

```
Set<BigFraction> key = knowledgeD.keySet();
    TreeSet<BigFraction> sortKey = new TreeSet<BigFraction>();
        sortKey.addAll(key);

    Iterator<BigFraction> iter = sortKey.iterator();
        return iter; 
```

BigFraction 只是数据类型，如果它可以更容易地将它与 int 或其他东西相结合。

无论如何，当我稍后调用迭代器时

```
while (iterator().hasNext()); 
```

它基本上只是给了我某种无限循环......当我在这个while循环之前打印出iterator（）时，我得到

```
java.util.TreeMap$KeyIterator@53b4b24d 
```

任何想法都卡住了，

问候，

辛

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T05:07:33.823

你需要`Iterator`像这样使用你的： -

```
while (iter.hasNext()) {
    System.out.println(iter.next()); //Do whatever you want
} 
```

where`hasNext()`告诉是否`iterator`有更多的值，并`next()`返回迭代器中的下一个值。

**此外， @jacobm**已经解释了为什么您的当前`iterator`循环不起作用（进入无限循环）。

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-02T05:07:31.783

`iterator().hasNext()`从不推进迭代器，它只是检查它是否有一个元素。`while (iterator().hasNext());`如果有任何值要迭代，那么总是无限循环。您可以使用以下方法修复它：

```
Iterator<BigFraction> it = iterator();
while (it.hasNext()) {
  it.next();
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-02T05:09:39.700

对 iterator() 的调用构造了一个新的迭代器，因此您的代码每次通过循环都会构造一个新的迭代器。而是尝试类似：

```
Iterator it = iter;
while (it.hasNext()) {
    it.next()
} 
```

确保`next()`每次都通过循环调用，否则你不会增加迭代器，它只会停留在第一个项目上。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T05:10:36.777

`Iterator#hasNext`如果迭代有更多元素，则返回 true，它不返回迭代中的下一个元素。确实如此`Iterator#next`。

**如果你使用 iterator 如果你必须调用`iterator#next`来获取集合的下一个元素，但是`hasNext`操作是可选的**。

你可以写 -

```
while (iter.hasNext()) {
    Object oj = iter.next();
} 
```

或者

```
Object obj = null;
while ( (obj = iter.next())!=null) {
    ....
} 
```

`hashNext`完全不需要这种方法。**

# ios - iOS webViewDidFinishLoading 未被调用

> ID：15756496
> 
> 赞同：3
> 
> 时间：2013-04-02T05:04:26.690
> 
> 标签：ios, uiwebview

我有一个`UIWebView`并且想在加载时显示一个活动指示器。然后在`webViewDidFinishLoading`. 唯一的问题是我遇到了这个`NSURLErrorDomain`错误 -999 的事情。在四处搜索之后，我发现[这个修复程序](https://stackoverflow.com/questions/1024748/how-do-i-fix-nsurlerrordomain-error-999-in-iphone-3-0-os)不会显示任何错误消息，但我`webViewDidFinishLoading`从来没有被调用来摆脱我的活动指示器和我正在进行的其他事情。我想我可以`didFinishLoading`在我的 webViewDidFailWithError 方法中调用该方法，如果它以 -999 失败，但这似乎超级hacky和错误。有想法该怎么解决这个吗？

编辑*我已经弄清楚了 webview 被要求加载两次的位置，所以我能够摆脱错误 -999。但是，除非我尝试加载 webview 两次（在这种情况下，该`webViewDidFinishLoading`方法只被调用一次），否则似乎没有调用任何委托方法。

```
- (void)viewDidLoad
{
    self.webView.delegate = self;
    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(refresh)
                                                 name:@"DidBecomeActive"
                                               object:nil];
    [super viewDidLoad];
}
-(void)refresh{
    [self.webView loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://myapp.com/app/"]]];
    self.webView.scrollView.bounces = NO;
}

- (void)webViewDidFinishLoading:(UIWebView *)wv
{
    NSLog(@"finished loading");
    [self.activityInd stopAnimating];
    [self.view bringSubviewToFront:wv];
}

- (void)webView:(UIWebView *)wv didFailLoadWithError:(NSError *)error
{
    NSLog(@"Failed: %@", error);
    if([error code] == NSURLErrorCancelled){
        return;
    }
    [self.activityInd stopAnimating];
    [[[UIAlertView alloc] initWithTitle:@"Can't find server" message:@"Check your internet connection and try again." delegate:nil cancelButtonTitle:@"OK" otherButtonTitles: nil]show];
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-02T05:13:29.583

您是否将 UIWebView 委托分配给其对象，如下所示

```
webViewObject.delegate = self 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T05:48:02.267

复制/粘贴错误。

```
- (void)webViewDidFinishLoading:(UIWebView *)wv 
```

应改为：

```
- (void)webViewDidFinishLoad:(UIWebView *)wv 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T07:38:29.493

在 .h 文件中实现协议“UIWebViewDelegate”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-06T04:17:29.957

如果您因为想知道为什么当错误不是由于错误编写的委托方法而没有调用您的委托方法而最终来到这里：

假设您的 webview 通常是通过 Interface Builder 实例化的，但您忘记正确连接它（这意味着它没有实例化）。您仍然可以设置它的委托（例如，`self.webview.delegate = self;`）而不会崩溃或异常（只要`self`符合`UIWebViewDelegate`协议）。

同样，您可以将 HTML 加载到其中（例如，`[self.webview loadHTMLString:someHTMLString baseURL:nil];`），应用程序将继续愉快地运行而不会产生任何抱怨。这会让您陷入尴尬的境地，您已经设置了委托、正确编写了委托方法、将某些内容加载到了 webview 中，但是您的委托方法永远不会触发。

因此，针对这种情况的建议：确保在 Interface Builder 中仔细检查您的 webview 是否正确连接（连接到正确的实例属性/变量）。

# magento - 保存时 Magento 索引器不起作用

> ID：15756498
> 
> 赞同：1
> 
> 时间：2013-04-02T05:04:30.877
> 
> 标签：magento

我在我的 magento 商店中创建了一个额外的索引器，在执行命令时它可以正常工作

```
php indexer.php reindexall

php indexer.php --reindex myindex 
```

我还将 myindex 设置为“保存时更新”模式

那没起效

当我首先跟踪代码时，我们必须通过执行函数注册事件，`_registerEvent(Mage_Index_Model_Event $event)` 该函数是抽象类 Mage_Index_Model_Indexer_Abstract 的函数

报名活动后

`_processEvent(Mage_Index_Model_Event $event)`应该被执行。它在从命令行执行索引器时执行但它不执行“更新时”并且我的索引器说需要更新。

# actionscript-3 - 用于 Flash AS3 的 Google Map API

> ID：15756503
> 
> 赞同：1
> 
> 时间：2013-04-02T05:04:44.787
> 
> 标签：actionscript-3, air, flash-builder, action

请告诉我 Google Maps API 是否可用于 Flash。如果 Flash 已经弃用它，那么哪一个是最好的第三方或其他替代方案？

我的目标是使用 Flash Builder 4.6 制作一个 Android 地图应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-18T05:39:18.860

只需使用 MapQuest。它是免费的，适用于 Android 和 iOS。我在 1 个月前将它用于一个应用程序，并且效果更好。

[http://developer.mapquest.com](http://developer.mapquest.com)

# java - 如何从上一个停止点下载数据？

> ID：15756507
> 
> 赞同：2
> 
> 时间：2013-04-02T05:05:03.563
> 
> 标签：java, android, web-services

在我的应用程序中，我正在从远程服务器下载数据。我的数据大小为 289 MB。在下载数据时，它会发生很多次下载在两者之间停止并从头开始下载。现在我想实现这样一个下载逻辑，它将从前一点恢复数据的下载。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-17T18:34:43.917

您需要处理名为“Range”的 HTTP 请求标头，它告诉您想要哪些字节。见[https://en.wikipedia.org/wiki/Byte_serving](https://en.wikipedia.org/wiki/Byte_serving)

# javascript - Firefox pageMod 插件 window.location 不起作用

> ID：15756510
> 
> 赞同：0
> 
> 时间：2013-04-02T05:05:41.273
> 
> 标签：javascript, jquery, firefox-addon

我正在构建一个 Firefox 插件，它会在按下键盘按钮后导致页面重定向。键盘检测工作得很好，但它只是没有重定向。完整的代码托管在[GitHub 上](https://raw.github.com/kobitate94/keyaffinity/master/Chrome/background.js)（它说的是 Chrome 版本，但现在都是 Javascript）。有问题的重定向代码也包含在下面。我移植到 Firefox 的所有代码在 Chrome 中都可以正常工作，所以所有的 Javascript 都是有效的。

```
// Function that does the redirecting
function goToMsgs() {
    if (newNotes){
        window.location = "/msg/pms";
    }
    else if (newSubs) {
        window.location = "/msg/submissions";
    }
    else if (newComms) {
        window.location = "/msg/others";
    }
    else if (newTix) {
        window.location = "/msg/troubletickets";
    }
    else {
        $('#keyaffinity-nomsgs').fadeIn(100).delay(500).fadeOut(100);
    }
}

// And the keyboard shortcut that triggers it, this still triggers,according to the logs
$(document.documentElement).keyup(function (event) {                
    // Code omitted
    else if (event.keyCode == 77 && control) {                      
        goToMsgs();                                                 
    }
    // Code omitted
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:56:11.480

我们需要为其添加完整的 URL，因此将这些内容添加到您的代码中，然后检查它。

```
 var StrArr = 'http://'+window.location.protocol + '//' + window.location.host;
        // Use full URL here
        window.location.href = StrArr + '/msg/pms'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T19:54:35.360

[MDN](https://developer.mozilla.org/en-US/docs/DOM/window.location)似乎建议简单地分配给`window.location`，而不是`window.location.href`。

# architecture - 将二进制转换为arm

> ID：15756512
> 
> 赞同：5
> 
> 时间：2013-04-02T05:06:28.393
> 
> 标签：architecture, binary, x86, arm

如何在 arm 上运行 x86 二进制文件（例如 .exe 文件）？正如我在 Wikipedia 上看到的，我需要将模拟平台的二进制数据转换为适合在目标平台上执行的二进制数据。但问题是：我怎么能做吗？我需要在十六进制编辑器中打开文件并更改？还是别的什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T05:16:27.310

要成功做到这一点，您必须做两件事.. 一件相对容易，一件非常困难。您不想在十六进制编辑器中手动执行这两个操作。

1.  将机器代码从 x86 转换为 ARM。这很简单，因为您应该能够将每个 x86 操作码映射到一个或多个 ARM 操作码。有不同的方法可以做到这一点，有些方法比其他方法更有效，但可以通过非常简单的映射来完成。

2.  重新映射函数调用（和其他跳转）。这很难，因为使用操作码会改变跳转和返回点的所有偏移量。如果您有动态链接库 (.so)，并且我们假设所有库在两个地方都以完全相同的版本提供（充其量是粗略的假设），则您必须重新映射负载。

它本质上是一个机器->机器编译器和链接器。

那么，你能做到吗？当然。

这简单吗？不。

那里可能有一个商业工具，但我不知道。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T13:48:09.180

你不能用*二进制*来做到这一点；^(note1)这里的*二进制*是指没有符号信息的对象，如*elf*文件。即使有一个*elf*文件，这也很难甚至不可能。问题是从**数据**中确定**代码**。如果你解决了这个问题，那么你可以制作*反编译器*和其他工具。

 ***即使您有一个*elf*文件，编译器也会在段中插入代码中使用的常量`text`。您必须查看许多*操作码*并执行反向[*基本块*](http://en.wikipedia.org/wiki/Basic_block)来确定函数的开始和结束位置。

更好的机制是在**ARM上模拟****x86**。在这里，您可以使用[*JIT*](http://en.wikipedia.org/wiki/Just-in-time_compilation)技术来做遇到的翻译，但您大约双倍的代码空间。此外，代码将执行得很糟糕。ARM 有 16 个寄存器，而 x86 寄存器匮乏（通常它有隐藏寄存器）。编译器的一项重要工作是分配这些寄存器。 是一种可以做到这一点的技术。我不确定它是否在*x86*到*ARM*方向；如前所述，这将是一项艰巨的工作。**[](http://en.wikipedia.org/wiki/Just-in-time_compilation)*[`QEMU`](http://en.wikipedia.org/wiki/QEMU)***

 *******注 1：** x86 具有不对称的操作码大小。为了识别[功能序言](http://en.wikipedia.org/wiki/Function_prologue) 和结语，您必须多次扫描图像。要做到这一点，我认为问题可能是*图像* `O(n!)`的字节在哪里`n`，然后你可能会遇到用汇编程序编码的内联汇编程序和库例程的问题。这也许是可能的，但这是**非常**困难的。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2016-08-30T15:29:39.850

将 x86 二进制文件读取为 utf-8，然后从 ELF 复制到最后一个字符。然后转到 arm 二进制文件并在使用 x86 复制时删除。然后将剪贴板中的 x86 复制到 head。我试过了，它正在工作。********

# extjs4.1 - Extjs 4.1.1 如何将工具栏项对齐在其他项下方？

> ID：15756514
> 
> 赞同：0
> 
> 时间：2013-04-02T05:06:29.030
> 
> 标签：extjs4.1

```
I am using Extjs 4.1.1 
```

我有面板，我在底部添加了工具栏。这个工具栏有 3 个项目，我想在第一行中放置第一个项目，并在下一行保留两个项目，即在其他项目下方。

如图所示，我想将如上所示的项目与红色矩形对齐。我的代码如下所示。

请建议我该怎么做？

我的代码是这样的

```
 dockedItems: [ 
                     {
            xtype: 'toolbar',
            dock: 'bottom',
            height:60,
            items: [
                    {
                        xtype: 'tbtext',
                        id:'costId',
                        text   : "Total Cost <br> $66,000",
                        height : 40
                    },
                    {
                        xtype: 'button', 
                        autoAlign: 'bottom',
                        id: 'saveButton',
                        text: 'Add to BOM', 
                        handler: function() {
                            saveProduct();
                        } 
                    },
                    {
                        xtype: 'button', 
                        autoAlign: 'bottom',
                        id: 'cancelButton',
                        text: 'Cancel', 
                        handler: function() {
                            cancel();
                        }
                    } 
```

] }],

![在此处输入图像描述](https://i.stack.imgur.com/Jftq0.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T02:12:55.760

一种可能的解决方案是在面板中添加两个底部工具栏。像这样：

```
dockedItems: [{
    xtype: 'toolbar',
    dock: 'bottom',
    border: false,
    style: {
        background: 'white'
    },
    items: [{
        text: 'Add to BoM',
        cls: 'add-to-bom-button'
    }, {
        text: 'Cancel',
        cls: 'cancel-button'
    }]
}, {
    xtype: 'toolbar',
    dock: 'bottom',
    border: false,
    style: {
        background: 'white'
    },
    items: [costContainer]
}] 
```

**costContainer**在哪里

```
var costContainer = Ext.create('Ext.container.Container', {
border: false,
layout: 'vbox',
items: [{
    xtype: 'label',
    html: 'Total Cost',
    cls: 'total-cost-label'
}, {
    xtype: 'label',
    html: '$ 66,000',
    cls: 'price-label'
}]
}); 
```

我认为这个例子看起来像你正在寻找的，只需要修复 css。 [http://jsfiddle.net/alexrom7/LHK39/3/](http://jsfiddle.net/alexrom7/LHK39/3/)

# android - 通过 Android-XML 自定义按钮点击事件

> ID：15756515
> 
> 赞同：0
> 
> 时间：2013-04-02T05:06:30.790
> 
> 标签：android, android-button, android-custom-view

我在[GitHub](https://github.com/deathlord87/Android-Circular-ImageButton)中创建了一个自定义的圆形图像按钮

```
private void onTouchCircle(float x, float y, boolean up) {
    float cx = getWidth()/2;
    float cy = getHeight()/2;
    float distance = (float) Math.sqrt(Math.pow((x - cx), 2) + Math.pow((y - cy), 2));
    float radius = getWidth()/2;
    if (distance < radius  && !up) {
        IS_PRESSED = true;
        getDrawable().setColorFilter(new LightingColorFilter(0xFFFFFFFF, 0X2E2E2E));
        invalidate();
    } else {
        IS_PRESSED = false;
        getDrawable().setColorFilter(null);

        if(distance<radius){
            BUTTON_PRESSED=true;
        }else{
            BUTTON_PRESSED=false;
        }
        invalidate();
    }

    if(up && BUTTON_PRESSED){
        BUTTON_PRESSED=false;
        Log.e(TAG, "distance -- "+distance+" -- radius --"+radius);
        if(onClickListener!=null){
            onClickListener.onCircularButtonClick(this);
        }
    }

} 
```

如何通过像 android.widget.Button/android.widget.ImageButton 这样的 XML 调用单击？如果我可以为我的自定义控件调用类似于按钮/图像按钮的方法，如下所示，那就太好了。任何帮助表示赞赏。

```
<com.example.circularimageview.CircularImageView
        xmlns:imaginea="http://schemas.android.com/apk/res/com.example.circularimageview"
        android:id="@+id/imageView1"
        android:layout_width="80dp"
        android:layout_height="80dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:scaleType="centerCrop"
        android:src="@drawable/breakdancing_android"
        imaginea:alpha="1"
        imaginea:onCircularButtonClick="myFancyMethod" />

public void myFancyMethod(View v) {
    // does something very interesting
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:56:18.677

看看 Android 在他们的基础[View.java中是如何做到的](https://github.com/android/platform_frameworks_base/blob/master/core/java/android/view/View.java#L3565)

关键是：

```
final String handlerName = a.getString(attr);
if (handlerName != null) {
    setOnCircularClickListener(new OnCircularClickListener() {
        private Method mHandler;

        public void onCircularButtonClick(View v) {
            if (mHandler == null) {
                try {
                    mHandler = getContext().getClass().getMethod(handlerName,
                            View.class);
                } catch (NoSuchMethodException e) {
                    int id = getId();
                    String idText = id == NO_ID ? "" : " with id '"
                            + getContext().getResources().getResourceEntryName(
                                id) + "'";
                    throw new IllegalStateException("Could not find a method " +
                            handlerName + "(View) in the activity "
                            + getContext().getClass() + " for onClick handler"
                            + " on view " + CircularImageView.this.getClass() + idText, e);
                }
            }
            try {
                mHandler.invoke(getContext(), CircularImageView.this);
            } catch (IllegalAccessException e) {
                throw new IllegalStateException("Could not execute non "
                        + "public method of the activity", e);
            } catch (InvocationTargetException e) {
                throw new IllegalStateException("Could not execute "
                        + "method of the activity", e);
            }
    });
} 
```

# python - 获取列表和元组列表的交集

> ID：15756517
> 
> 赞同：2
> 
> 时间：2013-04-02T05:06:36.340
> 
> 标签：python, list, tuples, intersection

两个清单

```
ListOne = ['steve','rob','jym','rich','bell','mick']
ListTwo = [('steve',22 ,178), ('rob', 23 ,189), ('jym', 25,165), ('steven',18 ,187), ('Manro',16 ,200), ('bell',21 ,167), ('mick', 24 ,180)] 
```

我如何才能从 ListTwo 中为 ListOne 上的学生获取数据，例如`two list intersections`。

输出如：

```
ListTwo = [('steve',22 ,178), ('rob', 23 ,189), ('jym', 25,165), ('bell',21 ,167), ('mick', 24 ,180)] 
```

我试过这个，但我正在寻找更正式的东西：

```
for row in ListTwo:   
    if row[0] in ListOne :
        print 'this student exist' + `row[0]`

    else :
        for i,e in enumerate(ListTwo):
        #Check the student with the above results, will be removed
            if row[0] == e: 
                temp=list(ListTwo[i])
                pprint.pprint('I will remove this student : ' + `e`)
                #Remove the Student
                for f, tmp in enumerate(temp):
                     temp[f]= []
                #pprint.pprint(temp)
                ListTwo[i]=tuple(temp) 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T05:09:51.310

使用[列表理解](http://docs.python.org/2/tutorial/datastructures.html#list-comprehensions)：

```
[rec for rec in ListTwo if rec[0] in ListOne] 
```

为了使其更快，您可以通过首先将列表转换为[set](http://docs.python.org/2/tutorial/datastructures.html#sets)来将 list-lookups 替换为 set-lookups ：

```
ListOne = set(ListOne) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T05:13:22.530

一种方法是麻木的

```
import numpy
a = numpy.array(list2)
print a[numpy.in1d(a[:,0],list1)] 
```

但我可能会按照 shx2 的建议进行列表理解...... numpy 会改变你的类型

这将占用您的 2d numpy 数组的第 0 列（这是元组的名称）

`numpy.in1d``[True,False,etc]`将根据名称是否在另一个列表中创建一个掩码

然后它采用原始数组并使用布尔索引

```
>>> a = numpy.array(ListTwo)
>>> a[numpy.in1d(a[:,0],ListOne)]
array([['steve', '22', '178'],
       ['rob', '23', '189'],
       ['jym', '25', '165'],
       ['bell', '21', '167'],
       ['mick', '24', '180']],
      dtype='|S6')
>>> 
```

# android - 如何使我的应用程序的某些部分在整个应用程序中保持通用

> ID：15756522
> 
> 赞同：0
> 
> 时间：2013-04-02T05:07:06.467
> 
> 标签：android, footer

我想列出某些重要的事情（我每 15 秒从服务器获取一次），我想在整个应用程序中保持不变（或常见）。因此，当我通过 Intents（或任何其他方法）移至下一个活动时，我应该一直拥有该列表。安卓可以吗？？

我想要不同的解决方案，这些解决方案需要尽可能少的工作。请帮忙..

编辑：我想我还没有说清楚。我不担心如何存储数据..我问的是如何实现只有一半屏幕发生变化（当我们从活动移动到活动时）而另一半保持不变（不移动）的视图。有可能吗？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:16:36.727

您的应用程序类实例始终可以从任何活动中访问。

您需要做的就是像这样创建应用程序类：

```
public class YourApp extends Application {
....
} 
```

然后在您的应用 AndroidManifest.xml 中修改以下行：

```
<application
    android:name="your.package.YourApp" 
```

现在你可以在任何地方访问这个类：

```
YourApp appInstance = (YourApp)getApplication(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T05:19:02.260

使用如下所示的 PreferencesManager，创建您的 POJO 以访问 PreferencesManager。

```
// TODO: Auto-generated Javadoc
/**
 * The Class PreferenceManager.
 */
public class PreferenceManager {

    /** The Constant TAG. */
    private static final String TAG = PreferenceManager.class.getSimpleName();

    /** The default shared preferences. */
    private static SharedPreferences defaultSharedPreferences = null;

    /**
     * Inits the.
     *
     * @param context the context
     */
    public static final void init(Context context){
        defaultSharedPreferences = android.preference.PreferenceManager.getDefaultSharedPreferences(context);
        log("Initialize PreferenceManager!");
        UserSettings.init(context);
    }

    /**
     * Save.
     *
     * @param name the name
     * @param value the value
     */
    static final void save(String name,String value){
        if( value != null ){
            Editor edit = defaultSharedPreferences.edit();
            edit.remove(name);
            edit.putString(name, value);
            edit.commit();
        }else{
            Editor edit = defaultSharedPreferences.edit();
            edit.remove(name);
            edit.commit();
        }
    }

    /**
     * Gets the.
     *
     * @param name the name
     * @param defaultValue the default value
     * @return the string
     */
    public static final String get(String name,String defaultValue){
        return defaultSharedPreferences.getString(name, defaultValue);
    }

    /**
     * Save state.
     *
     * @param name the name
     * @param state the state
     */
    public static final void saveState(String name,Bundle state){
        if( state != null && state.size() > 0 ){
            Parcel parcel = Parcel.obtain();
            parcel.writeBundle(state);
            String encodeToString = Base64.encodeToString(parcel.marshall(), Base64.DEFAULT);
            PreferenceManager.save(name, encodeToString);
        }else{
            PreferenceManager.save(name, null);
        }
        log("Saved state "+name);
    }

    /**
     * Gets the state.
     *
     * @param name the name
     * @return the state
     */
    public static final Bundle getState(String name){
        log("Get state "+name);
        String encryptedValue = "";
        try {
            encryptedValue = PreferenceManager.get(name, "");
        } catch (NullPointerException e) {
            return new Bundle();
        }
        if( "".equals(encryptedValue) ){
            return new Bundle();
        }else{
            byte[] decode = Base64.decode(encryptedValue, Base64.DEFAULT);
            Parcel parcel = Parcel.obtain();
            parcel.unmarshall(decode, 0, decode.length);
            parcel.setDataPosition(0);
            return parcel.readBundle();
        }
    }

    /**
     * Log.
     *
     * @param msg the msg
     */
    private static final void log(String msg){
        Log.d(TAG, msg);
    }

}

/**
 * The Class Settings.
 */
public class UserSettings {

    /** The settings bundle. */
    private final Bundle settingsBundle = new Bundle(1);

        /**
     * Save.
     */
    public final void save() {
        PreferenceManager.saveState(SETTINGS_STATE_NAME, settingsBundle);
    }

    /**
     * Restore.
     */
    final public void restore() {
        settingsBundle.clear();
        Bundle state = PreferenceManager.getState(SETTINGS_STATE_NAME);
        if (state.size() == 0) {
            settingsBundle.putAll(getDefaultValuesSettings());
        } else {
            settingsBundle.putAll(state);
        }
    }

    final void reset() {
        settingsBundle.clear();
    }

    /**
     * Gets the settings.
     *
     * @return the settings
     */
    public static UserSettings getSettings() {
        return settings;
    }

    /**
     * Inits the.
     *
     * @param ctx the ctx
     */
    public static final void init(Context ctx) {
        settings.restore();
        setDeviceUniqueId(ctx, settings);
    }

} 
```

示例用法：

```
public class YourApplication extends Application {
....
    onCreate(){
    ....
    PreferenceManager.init(getBaseContext());
    }                                   
}

Where you need your data to be stored and retrieved use the methods like below.
UserSettings.getSettings().setUser(responseVal);
UserSettings.getSettings().save();

String response = UserSettings.getSettings().getUser(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:14:54.890

有很多方法可以做到这一点：

1.  您可以将它们存储并放入应用程序的 SQLite 数据库中（数据是持久的，直到您删除应用程序或通过应用程序代码删除）查看 SQLite 用法[here](http://www.vogella.com/articles/AndroidSQLite/article.html)
2.  您在手机内存中使用缓存它们，直到您的应用程序运行。[在此处](http://developer.android.com/reference/android/util/LruCache.html)查看缓存使用情况

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T05:17:34.370

1.  您可以使用[`SQLite`](http://developer.android.com/reference/android/database/sqlite/package-summary.html)数据库来存储这些数据，然后创建单例助手来读取它。

2.  或者您可以使用将数据保存为文件`XML`或`JSON`格式化为文件，然后解析它们以读取。

3.  或者您可以为数据的一个实体创建类容器，使其可序列化并存储[`SharedPreferences`](http://developer.android.com/reference/android/content/SharedPreferences.html)为`ArrayList<YourDataContainer>`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T05:11:32.287

如果数据量很大，您可以使用 Shared Preferences 或 SQLite DB 来存储数据。如果数据量较少，则可以使用静态变量。如果您使用静态变量，当应用程序发生任何崩溃时，数据可能会丢失。因此，静态变量的使用不太可取。

# ruby-on-rails-3 - 以omniauth命名的Rails路由

> ID：15756523
> 
> 赞同：6
> 
> 时间：2013-04-02T05:07:08.587
> 
> 标签：ruby-on-rails-3, devise, routes, omniauth

我在 routes.rb 中有这个：

```
namespace :api do
  namespace :v1 do
    ...
    devise_for :users, constraints: { format: :json },
      :controllers => { :omniauth_callbacks => "auths" }
    ...
  end
end 
```

并生产以下路线：

```
new_api_v1_user_confirmation GET        /api/v1/users/confirmation/new(.:format)          api/v1/confirmations#new {:format=>:json}
                             GET        /api/v1/users/confirmation(.:format)              api/v1/confirmations#show {:format=>:json}
api_v1_user_omniauth_authorize            /users/auth/:provider(.:format)                   auths#passthru {:provider=>/facebook|twitter|linkedin/, :format=>:json}
api_v1_user_omniauth_callback            /users/auth/:action/callback(.:format)            auths#(?-mix:facebook|twitter|linkedin) {:format=>:json} 
```

如何获得命名空间的最后两条路由，例如：

```
/api/v1/auth/:provider(.:format)
/api/v1/auth/:provider/callback(.:format) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-22T14:46:52.507

我想我应该将我的评论转换为答案：

对于我们的应用程序，我们正在使用骨干/木偶做纯 json api 的事情。为了让 oAuth 与设计一起工作 - 我从设计中删除了它。:) 删除了我设置的omniauthable 属性，并从我的初始化程序/devise.rb 中删除了omniauth 设置。然后在omniauth页面上阅读我自己实现了它。

我的 api 位于“/api/v1”下

1.  创建了列出我的提供者和密钥的初始化程序/omniauth.rb 文件。对于每个提供者，我还给了它一个 :path_prefix=>"/api/v1/auth" 属性。
2.  在我的 api 中创建一个名为 api/v1/oauth_controller.rb 的回调控制器，它使用模块正确命名，并包含来自服务的回调路径。
3.  更新了我的路线以设置全能的回调路线。见这里：gist.github.com/DaveSanders/5835642
4.  在 OAuthController.create 中，我使用了来自提供者的详细信息，并完成了“社交网络用户是否存在并拥有映射帐户？”的基本流程。如果是这样，请通过设计的 user.sign_in 登录？如果没有，请创建用户，然后登录。
5.  重定向回我的应用程序，然后再次启动主干，然后可以获取登录的用户详细信息并根据需要使用它们。

您的实现可能会有所不同，但我处理我的 oAuth 帐户的方式是将它们放在自己的表（Twitter、Facebook 等）中，然后将它们链接到我的设计用户。这样，我可以关联多个帐户，并且用户可以使用其中任何一个帐户登录。

此外，请务必将您的 twitter/facebook 回调设置为：

`http://127.0.0.1:3000/api/v1/auth/twitter/callback`

以匹配您在开发中的路线。

希望这对其他人有帮助。如果我忘记了一个步骤或者你迷路了，请询问。

# python - python和apache中的子进程以及请求出错

> ID：15756524
> 
> 赞同：0
> 
> 时间：2013-04-02T05:07:11.280
> 
> 标签：python, django, apache, apache2

我正在尝试使用 django 开发一个网站，并且在我的开发环境下一切都运行得相当好，但是现在我试图将它部署到基于 apache 的服务器上，我遇到了很多问题。例如，当我尝试通过请求运行 http post 请求时，我收到一个错误： response = callback(request, *callback_args, **callback_kwargs)

```
resp = requests.post(api_connection, data=params)
user_dict = dict(line.split(u"=", 1) for line in resp.text.split(u'\r\n')) 
```

对于子流程，我也遇到了问题。

```
import subprocess as sp
cmd = ['/home/servvs/./litecoind', 'getnewaddress', 'test']
p = sp.Popen(cmd, stdout=sp.PIPE, close_fds=True)
ltc_address = p.communicate()[0]
print ltc_address 
```

上面的代码作为一个测试工作，但从我的角度来看，它似乎什么也没做。我不确定如何解决这些问题，checkoutput 从 CalledProcessError 返回错误代码 6

[编辑]

对于顶部，我收到一个错误：

```
Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
response = callback(request, *callback_args, **callback_kwargs)
File "/home/pmavens/wsoltc/poker/views.py" in myaccount
user_dict = dict(line.split(u"=", 1) for line in resp.text.split(u'\r\n')) 
```

奇怪的是我可以确认帖子工作正常，但由于某种原因我没有收到正确的回复。（虽然我在开发 django 服务器上做）

后者给出了 check_output 错误

```
Traceback:
File "/usr/local/lib/python2.7/dist-packages/django/core/handlers/base.py" in get_response
115\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/pmavens/wsoltc/poker/views.py" in register
 246\.         ltc_address = sp.check_output(cmd, shell=False)
File "/usr/lib/python2.7/subprocess.py" in check_output
 544\.         raise CalledProcessError(retcode, cmd, output=output)

Exception Type: CalledProcessError at /register/
Exception Value: Command '['/home/pmavens/./litecoind', 'getaccountaddress', u'Ghost']' returned non-zero exit status -6 
```

# c++ - 警告已弃用从字符串常量到字符的转换 *

> ID：15756526
> 
> 赞同：2
> 
> 时间：2013-04-02T05:07:19.530
> 
> 标签：c++, g++, mingw

我使用 cmd 通过 .bat 和 g++.exe 进行编译。有人可以告诉我我做错了什么吗？我正在使用它来练习，因为我按照关于字符串和数组的教程进行操作。请记住，我还在学习。

```
main.cpp: In function 'int main()':
main.cpp:6:12: warning: deprecated conversion from string constant to 'char*' [-
Wwrite-strings]
main.cpp:10:12: warning: deprecated conversion from string constant to 'char*' [
-Wwrite-strings]
main.cpp:11:12: warning: deprecated conversion from string constant to 'char*' [
-Wwrite-strings]
Press any key to continue . . . 
```

我的代码：

```
 using namespace std;
#include <iostream>

int main() {
//Asterisk to make the variable an array. Takes 8 bytes of memory (8 characters including spaces).
 char *a = "hi there";
//Inside square brackets is the number of bytes of memory to use. More consumtion of resources
 char b[500]="hi there";
 //For a new line, type \n. For a tab, type \t.
 char *c = "Hi There\nFriends!";
 char *d = "\t\tHi There Friends!";
 //endl will end the line.
 cout << a;
 cout << b << endl;
 cout << c << endl;
 cout << d << endl;
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T05:12:22.597

双引号之间的字符串是字符串文字。它们是`char`不可修改的数组（尝试修改它们会调用未定义的行为）。这就是为什么您应该将指向字符串文字的指针声明为`const char *`- 这样，如果某些代码错误地尝试写入/修改文字中的字符，编译器将有机会捕获此错误。

# jquery - 使用 JQuery 日期选择器

> ID：15756532
> 
> 赞同：-3
> 
> 时间：2013-04-02T05:07:48.910
> 
> 标签：jquery, html, jquery-ui

如何在使用 iframe 的网页中使用 jQuery Datepicker？我应该在哪里链接 css 和脚本参考？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T14:37:36.753

使用 iframe 或非框架页面时没有区别。

假设您的根文件夹中有一个用于 JavaScript 的 JS 文件夹，而根文件夹中有一个 CSS 文件夹，其中复制了适当的文件。这将是一个基本示例：

```
<html>
<head>
<script type="text/javascript" src="/js/jquery.js"></script>
<script type="text/javascript" src="/js/jquery.datepicker.js"></script>
<script type="text/javascript" src="/css/datepicker.css"></script>
<script>

$(document).ready(function(){

    $("#yourDateField").datepicker();
});
</script>

<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>Untitled Document</title>
</head>

<body>

<form>
  <label for="yourDateField">Date Field</label>
  <input type="text" name="yourDateField" id="yourDateField">

</form>

</body>
</html> 
```

# ruby-on-rails - Rails 3 忽略 Postgres 唯一约束异常

> ID：15756533
> 
> 赞同：9
> 
> 时间：2013-04-02T05:07:52.387
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, activerecord, rails-activerecord

拯救异常并继续处理的正确方法是什么？我有一个包含文件夹和项目的应用程序，通过一个名为folders_items 的连接表具有habtm 关系。该表具有唯一约束，确保没有重复的项目/文件夹组合。如果用户多次尝试将一个项目添加到同一个文件夹，我显然不希望添加额外的行；但我也不想停止处理。

Postgres 在违反唯一约束时会自动抛出异常，所以我尝试在控制器中忽略它，如下所示：

```
rescue PG::Error, :with => :do_nothing

def do_nothing

end 
```

这适用于单次插入。控制器使用状态码 200 执行渲染。但是，我有另一种方法可以在循环中进行批量插入。在该方法中，控制器在遇到第一个重复行时退出循环，这不是我想要的。起初，我认为循环必须被包裹在一个正在回滚的事务中，但事实并非如此——重复之前的所有行都被插入。我希望它简单地忽略约束异常并移至下一项。如何防止 PG::Error 异常中断这个？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-02T05:38:37.877

一般来说，你的异常处理应该在最接近错误的地方，你可以对异常做一些明智的事情。在你的情况下，你会想要你`rescue`的循环，例如：

```
stuff.each do |h|
  begin
    Model.create(h)
  rescue ActiveRecord::RecordNotUnique => e
    next if(e.message =~ /unique.*constraint.*INDEX_NAME_GOES_HERE/)
    raise
  end
end 
```

几个兴趣点：

1.  数据库内部的约束冲突会给你一个`ActiveRecord::RecordNotUnique`错误，而不是底层的`PG::Error`. AFAIK，`PG::Error`如果您直接与数据库交谈而不是通过 ActiveRecord，您会得到一个。
2.  替换`INDEX_NAME_GOES_HERE`为唯一索引的真实名称。
3.  您只想忽略您期望的特定约束违规，因此`next if(...)`后面是无参数的位`raise`（即，如果它不是您期望看到的，则重新引发异常）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T13:22:36.043

如果您在模型上放置 Rails 验证器，那么您可以控制流程而不会引发异常。

```
class FolderItems
  belongs_to :item
  belongs_to :folder
  validates_uniqueness_of :item, scope: [:folder], on: :create
end 
```

然后你可以使用

```
FolderItem.create(folder: folder, item: item) 
```

如果关联已创建，它将返回 true，如果有错误，则返回 false。它不会抛出异常。如果未创建关联，使用`FolderItem.create!`将引发异常。

您看到 PG 错误的原因是 Rails 本身认为模型在保存时有效，因为模型类在 Rails 中没有唯一性约束。当然，您在 DB 中有一个独特的约束，这让 Rails 感到惊讶并导致它在最后一刻崩溃。

如果性能很关键，那么可能会忽略此建议。在 Rails 模型上具有唯一性约束会导致它`SELECT`在每个之前执行一次`INSERT`，以便在 Rails 级别进行唯一性验证，这可能会使循环正在执行的查询数量增加一倍。像您正在做的那样在数据库级别捕获错误可能是一种合理的优雅换取性能的交易。

（编辑）TL；DR：在数据库中始终具有唯一约束。还具有模型约束将允许在 DB 引发错误之前进行 ActiveRecord/ActiveModel 验证。

# eclipse - 如何从 JSP 中的按钮单击调用函数

> ID：15756538
> 
> 赞同：4
> 
> 时间：2013-04-02T05:08:03.263
> 
> 标签：eclipse, string, jsp, button, textbox

我有以下功能：

```
<script>
function assign()
{
String val="";
String val = document.form1.text1.value;
System.out.println(val);
}
</script> 
```

我正在尝试在按钮单击中调用该函数，如下所示：

```
 <button type="button" onclick="assign()">Display</button> 
```

当我单击按钮时，没有任何反应。我希望将文本框中的字符串值打印在控制台上。请帮助

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T05:14:51.107

首先，如果您尝试在单击按钮时调用 JavaScript，那么您的语法是错误的。看，您在脚本标记中将 Java 与 JavaScript（代码）混合，这是无效的。

像这样使用：

```
<script>
    function assign() {
        var val = "";
        val = document.form1.text1.value;
        alert(val); or console.log(val);
    }
</script> 
```

和

```
 <button type="button" onclick="javascript:assign();">Display</button> 
```

# math - 如何用kmeans聚类曲线？

> ID：15756540
> 
> 赞同：0
> 
> 时间：2013-04-02T05:08:19.007
> 
> 标签：math, cluster-computing, data-mining, cluster-analysis, probability

我想对一些包含每日点击率的曲线进行聚类。数据集是时间序列中的点击率数据。

```
y1 = [time1:0.10,time2:0.22,time3:0.344,...]
y2 = [time1:0.10,time2:0.22,time3:0.344,...] 
```

我不知道如何使用 kmeans 测量两条曲线的相似性。有没有为此目的的论文或一些图书馆？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:31:23.893

对于相似性，您可以使用任何类型的时间序列距离。其中许多将执行比对，也包括不同长度的序列。

然而，k-means 不会让你到任何地方。

K-means*并不*意味着用于任意距离。它实际上不使用距离进行分配，而是使用最小平方和（恰好是欧几里得距离的平方） - 也就是：方差。

平均值必须与这个目标一致。不难看出，均值也使平方和最小化。这保证了 k-means 的收敛：在每一步（分配和均值更新）中，目标都会降低，因此它必须在有限数量的步骤后收敛（因为只有有限数量的离散分配）。

**但是不同长度的多个时间序列的平均值是什么？**

# sql - 如何在tsql中删除部分字符串

> ID：15756544
> 
> 赞同：0
> 
> 时间：2013-04-02T05:08:41.097
> 
> 标签：sql, sql-server, tsql

请指导我如何从字符串中完全删除特定部分

这是我的字符串：

```
String greeting =Hello  #World# How Are You. 
```

我想删除该`#World#`部分。我尝试了以下方法，但它对我不起作用，原因是该`##`部分是动态的。

```
SELECT Replace(greeting, #World#, '') 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:36:28.323

```
declare @S varchar(50) = 'Hello  #World# How Are You.'

select stuff(@S,
             charindex('#', @S),
             charindex('#', @S, charindex('#', @S) + 1) - charindex('#', @S) + 1,
             '') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:52:00.127

请试试：

```
DECLARE @STR VARCHAR(50)
SET @Str = 'Hello  #World# How Are You.'

SELECT LEFT(@Str, CHARINDEX('#', @Str)-1)+
        RIGHT(@Str, CHARINDEX('#', REVERSE(@Str))-1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:32:19.187

尝试这个 ：-

```
declare  @greeting nvarchar(max)
Set @greeting = 'Hello  #World# How Are You.'
Select replace(replace(@greeting,parsename(replace(replace(@greeting,'.','') ,'#','.'),2),''),'#','') 
```

结果 ：-

```
Hello  How Are You. 
```

如果您只有一种模式，上述解决方案将正常`#...#`工作`string`

# .net - 朋友参考课？

> ID：15756547
> 
> 赞同：5
> 
> 时间：2013-04-02T05:08:52.853
> 
> 标签：.net, dll, c++-cli, friend, mixed-mode

我有一个托管类`Parser`和一个非托管类`CParser`。前者从托管客户端（C# 世界）的 DLL 中公开。核心功能在非托管类`CParser`中。由于两者都在同一个DLL中，并且是一对一的关系，托管类可以访问非托管类。

问题是我想`Parser`访问`CParser`. 我不想`public:`为所有成员使用，也不愿意有setter和getter。因此，我只放置了`friend`关键字：

```
class CParser
{
   ...
   friend ref class Parser; // C2144
};

// public ref class Parser{}; 
```

我得到错误`C2144`，可能是由于非托管 C++ 不理解`ref`关键字的明显原因。如果我删除`ref`关键字，托管编译器（编译`Parser`）会报错 C2872: Ambigious Symbol。

众所周知，`internal:`它不适用于未管理的 C++。

如何交`Parser`朋友`CParser`？

编辑：这个问题已经[在这里](http://social.msdn.microsoft.com/forums/en-US/vclanguage/thread/f43ea201-02b9-4ae1-bbfe-7416d778c3d3)，但可能非托管类是在`/clr`. 我不能/不会使用托管编译器编译非托管类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-22T22:35:04.783

在这种情况下你不能使用`friend`。我发现完成它的唯一方法是声明另一个朋友，它可以自由访问私有成员，但在另一个类的源文件中定义，因此不能被任何其他代码使用。

这本身就是丑陋的，但至少丑陋隐藏在 cpp 文件中，并且原生类的公共接口保持相对干净。

NativeClass.h

```
class NativeClass
{
public:
        void PublicStuff();
        struct DispatchHelper;
protected:
        friend DispatchHelper;
        void NonPublicStuff();
}; 
```

参考类.h

```
ref class RefClass
{
public:
    void ManagedCode();
}; 
```

参考类.cpp

```
struct NativeClass::DispatchHelper
{
    static void DoStuff(NativeClass* p) { p->NonPublicStuff(); }
}

void RefClass::ManagedCode()
{
    NativeClass::DispatchHelper::DoStuff(pNativeClass);
} 
```

# xampp - xampp 警告信息

> ID：15756548
> 
> 赞同：0
> 
> 时间：2013-04-02T05:08:57.143
> 
> 标签：xampp

我已经在我的电脑上安装了 Apache 服务器，

当我尝试进入大学注册系统时，

我收到这条信息：

```
Access forbidden!

New XAMPP security concept:

Access to the requested directory is only available from the local network.

This setting can be configured in the file "httpd-xampp.conf".

If you think this is a server error, please contact the webmaster.
Error 403
***.***.**.** : ip
Apache/2.4.3 (Win32) OpenSSL/1.0.1c PHP/5.4.7 
```

问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-29T12:13:17.360

问题是您的本地主机在 www 上在线不可见1.学习
使您的本地主机在 Internet 上可见
2.Portforward 以防万一
3.在线测试

[从GO ONLINE](http://w3-video.com/Web_Tools/XAMPP/xampp_online_open_port.html)菜单查看所有 3 个演示

# asp.net-mvc - 将存储过程添加到数据库后无法更新模型

> ID：15756550
> 
> 赞同：2
> 
> 时间：2013-04-02T05:09:07.397
> 
> 标签：asp.net-mvc, entity-framework

我正在开发一个**MVC 4**应用程序。使用**实体框架数据库优先设计范式**。我的数据库在**远程服务器上的 mySQL 中**。我正在使用**mysql 连接器 6.6.5**。我正在使用**两天前安装了更新的 Visual Studio 2012**。

**问题**：我创建了我的表，然后生成了模型。之后我创建了一些存储过程，然后通过右键单击模型图然后选择“从数据库更新模型”来更新我的模型

然后在下一个对话框中选择我的新存储过程。但是我的模型中没有生成一些存储过程。（我在模型浏览器的函数导入下看不到它们。）。即使我再次生成模型，也没有成功。

对于存储过程，生成模型时出现此错误：

**尝试从数据库更新时发生“MySql.Data.MySqlClient.MySqlException”类型的异常。异常消息是“无数据 - 提取、选择或处理零行”。**

有趣的是我从 MySQL 工作台测试了存储过程。存储过程按预期工作。

请帮忙！

# java - Solr-java 错误：com.restfb.types.Post 类声明了多个名为 type 的 JSON 字段

> ID：15756551
> 
> 赞同：1
> 
> 时间：2013-04-02T05:09:12.723
> 
> 标签：java, facebook-graph-api, gson, illegalargumentexception, restfb

我正在尝试将 rest-facebook 响应转换为 Post 类对象，如下所示：

```
Post post = gson.fromJson(restFBResponse.toString(), Post.class); 
```

其中，`restFBResponse`是来自 Facebook 的帖子。但这会导致错误：

```
Exception in thread "main" java.lang.IllegalArgumentException: class com.restfb.types.Post declares multiple JSON fields named type 
```

我认为这是由于：

```
1)
class Post extends NamedFacebookType{
  @Facebook
  private String type;
  //and some more class members
}

2)
class NamedFacebookType extends FacebookType {
  //few class members
}

3)
class FacebookType implements Serializable {
  @Facebook
  private String type;
  //and some more class members
} 
```

因此，在和`private String type;`中被声明了两次。`class Post``class FacebookType`

1）如果子类中发生这样的重新声明，不应该被覆盖吗？和

2）我怎样才能克服这个错误`class com.restfb.types.Post declares multiple JSON fields named type`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T08:49:48.383

我刚刚编写了自己的类而没有扩展，没有找到其他更好的选择..

```
public class MyPost{

    @Facebook
    private String type;

    public String getType() {
        return type;
    }

    public void setType(String type) {
        this.type = type;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-10T10:40:21.223

我猜GSON建议

@SerializedName("type1") 私有字符串类型；

这可能会解决问题。但我认为应该有一个更清洁的解决方案。我发现该问题已被标记为无效并且没有收到进一步的回复。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-20T07:20:09.617

您可以为 gson 编写自己的序列化器和反序列化器来序列化和反序列化`Post`对象。

这样做时，请使用 restfb`DefaultJsonMapper`来映射 Post ob。

就像是，

```
private Gson gson = new GsonBuilder()
        .serializeNulls()
        .setFieldNamingPolicy(FieldNamingPolicy.LOWER_CASE_WITH_UNDERSCORES)
        .registerTypeAdapter(Post.class, new PostDeserializer())
        .registerTypeAdapter(Post.class, new PostSerializer())
        .setPrettyPrinting()
        .create();
private DefaultJsonMapper dMapper = new DefaultJsonMapper();

private class PostDeserializer implements JsonDeserializer<Post> {
        @Override
        public Post deserialize(JsonElement jsonElement, Type type,
                JsonDeserializationContext context) throws JsonParseException {
            Post post = dMapper.toJavaObject(jsonElement.toString(), Post.class);
            return post;
        }
    }

private class PostSerializer implements JsonSerializer<Post> {
        @Override
        public JsonElement serialize(Post post, Type type,
                JsonSerializationContext context) {
            return gson.toJsonTree(dMapper.toJson(post));
        }
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-08-29T08:37:04.783

您不想在 Post 类中声明相同的变量“类型”。由于它从 FacebookType 扩展而来，因此它隐含地具有变量“type”。

解决方案：

```
Simply remove the sentence "private String type;" from your Post class
Replace the "private" word with "protected" in your "type" variable from your FacebookType 
```

# prototypejs - 如何在prototype.js的哈希中为一个键设置多个值？

> ID：15756553
> 
> 赞同：3
> 
> 时间：2013-04-02T05:09:20.880
> 
> 标签：prototypejs

如何在prototype.js的哈希中为一个键设置多个值？例如：

```
var hash={2005: [107, 31, 635, 203, 2]} 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-02T14:13:26.063

你可以把你写的东西完全转换成这样的哈希

```
var hash=$H({2005: [107, 31, 635, 203, 2]});

console.log(hash.get(2005));

//returns [107, 31, 635, 203, 2] as an array 
```

# c# - 如何从另一个类获取网站根路径

> ID：15756557
> 
> 赞同：1
> 
> 时间：2013-04-02T05:09:48.210
> 
> 标签：c#, asp.net

我有 asp.net 网站（使用网络表单）。我有一个名为的类`FileHandler`，在该类中我想获取站点的根路径。

通常我`Server.MapPath("~")`用来获取网页内的路径。

在这里我不能使用它，因为它不是页面。如何获取网站的路径？

**编辑**
更多关于`FileHandler`类： `FileHandler`是一个静态类，我将把站点的根路径分配给一个 satic 变量。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-04T13:14:36.440

这对我有用：

`HttpContext.Current.Server.MapPath("YOUR PATH");`

我在与我的一个页面分开的课程中使用了它。通常你不会从 HttpContext 调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T05:12:22.690

为什么不把它传给其他班级？

```
public class FileHandler {
    public string SiteRoot { get; set; }

    // or..
    public FileHandler(string siteRoot) {
        SiteRoot = siteRoot;
    }
}

FileHandler fileHandler = new FileHandler() { SiteRoot = Server.MapPath("~") };
// or..
FileHandler fileHandler = new FileHandler(Server.MapPath("~")); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:12:13.017

一种选择是，当您创建一个对象时，`FileHandler`然后将路径作为构造函数参数传递。

```
public class FileHandler 
{
   public FileHandler(string rootPath)
    {
       // store root path as a property
    }
} 
```

# c# - FirstOrDefault 两种方式

> ID：15756561
> 
> 赞同：3
> 
> 时间：2013-04-02T05:10:48.120
> 
> 标签：c#, linq, entity-framework, linq-to-entities

我无法理解这两种设置 FirstOrDefault 的方式之间的区别：

```
Product a = (from r in _context.Products where r.IDPROD.Equals(10) select r).FirstOrDefault();
Product a = (from s in _context.Products where s.IDPROD == 10 select s).FirstOrDefault<Products>(); 
```

有人可以用简单的方式解释我吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-02T05:15:41.293

```
where r.IDPROD.Equals(10) select r).FirstOrDefault(); 
```

使用方法[Int32.Equals()](http://msdn.microsoft.com/en-us/library/tf6tw08e.aspx)。然后编译器自动检测到`FirstOrdefault<T>`哪里`T`（它将是类型`r`）。

```
where s.IDPROD == 10 select s).FirstOrDefault<Products>() 
```

改为使用运算符`==`重载。结果强行转换为`Products`.

* * *

我会使用扩展方法语法来写这个：

```
Product p = _context.Products.FirstOrDefault(p => p.IDPROD == 10); 
```

不要将它与查询语法混合。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T05:14:37.123

这是相同的。第一个版本是带有推断通用参数的 FirstOrDefault。

# javascript - 如何从类函数返回新的 Backbone 实例

> ID：15756565
> 
> 赞同：1
> 
> 时间：2013-04-02T05:11:02.857
> 
> 标签：javascript, jquery, backbone.js, coffeescript

我希望能够获得一个随机的 Book 模型，例如：

```
book = App.Models.Book.random() 
```

我有以下 Backbone.js 模型（在 CoffeeScript 中）

```
class App.Models.Book extends Backbone.Model
  @random: ->
     $.getJSON "/books/random", (data) ->
       new App.Models.Book
         author: data['author']
         title: data['title'] 
```

但是，我敢肯定，你可以知道，@random 返回的是 jqXHR 对象，而不是实例。我已经检查并且`data`在我的回调中是正确的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T06:09:31.717

这是 (Java|Coffee) 脚本，其中一切都使用回调完成。您不会从中返回随机书`App.Models.Book.random`，而是给它一个回调函数：

```
class App.Models.Book extends Backbone.Model
  @random: (callback) ->
     $.getJSON "/books/random", (data) ->
       book = new App.Models.Book
         author: data['author']
         title: data['title']
       callback?(book) 
```

然后使用它：

```
App.Models.Book.random (book) ->
  # Do something useful with book in here 
```

如果调用者想要访问所有常用的花哨的 AJAX 钩子，您的`random`类方法仍将返回。`jqXHR`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T09:40:05.690

称呼

```
book = App.Models.Book.random() 
```

在班上

```
class App.Models.Book extends Backbone.Model

  @random: ->
    temp = new App.Models.Book()
    temp.url = "/books/random"
    temp.fetch {wait: true}  # or whatever parameters you want 
```

那应该做你的工作。

但对我来说，我更喜欢非类函数方式。

```
book = new App.Models.Book()
book.getRandomData() 
```

在班上

```
class App.Models.Book extends Backbone.Model

  getRandomData: =>
    @url = "book/random"
    @fetch {wait: true} 
```

# c++ - 在库析构函数之前调用静态变量析构函数

> ID：15756566
> 
> 赞同：1
> 
> 时间：2013-04-02T05:11:05.637
> 
> 标签：c++, g++, dynamic-linking, dlopen

考虑以下代码，用于在 linux 上使用 g++-4.7 构建的动态加载库，`-fPIC`并与`-rdynamic`选项链接：

```
struct Wrapper
{
    libraryUnregisterCbMap_t instance;
    Wrapper() : instance() { HDebugLog("Wrapper CTOR!");}
    ~Wrapper() { HDebugLog("Wrapper DESTRUCTOR!"); }
};
inline libraryUnregisterCbMap_t& getLibraryUnregisterMap()
{
    static Wrapper unregisterLibraryMap;
    HDebugLog("getLibraryUnregisterMap: we have " <<unregisterLibraryMap.instance.size() << " elements. the address of the map is " << &unregisterLibraryMap.instance);
    return unregisterLibraryMap.instance;
}

void registerLibrary(callbackContainer_t* p)
{
  auto& map = getLibraryUnregisterMap();
}

void unregisterLibrary()
{
  auto& map = getLibraryUnregisterMap();
}

void __attribute__ ((constructor)) library_init()
{
  static callbackContainer_t cbContainer;
  HDebugLog("Library constructor: address of static cbContainer is: " << &cbContainer );
  registerLibrary( &cbContainer);
} 
void __attribute__ ((destructor)) library_fini()
{ unregisterLibrary(); } 
```

对我来说有趣/烦人的部分是 library_fini() 在我调用之后没有被调用`lt_dlclose`，所以它似乎对最终确定毫无用处，因为当我在运行期间加载这个模块时，`Wrapper`实例的析构函数发生**在**调用之前`library_fini`。不用说，这种默认行为没有任何意义。

我该如何改变这种无意义的行为？我需要在我的库完成例程中完成我的静态数据。为什么`lt_dlclose`不调用`library_fini()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:34:38.287

让我首先承认我在这里超出了我的深度。也就是说，谷歌搜索出现了一个线程，至少据我所知，它似乎解决了与你类似的问题：

[http://lists.apple.com/archives/xcode-users/2005/Aug/msg00133.html](http://lists.apple.com/archives/xcode-users/2005/Aug/msg00133.html)

你碰巧在做你在 OSX 上做的任何事情吗？线程中有一些东西（可能是第二个后续）关于 OSX 的行为不同，即不调用析构函数，而只是将内存设置为空闲。

抱歉，如果链接没有用。只是想我会试一试，因为此时没有其他人回答。

# 编辑：

再次，超出我的深度 - 但我发现了另外两个可能相关的链接：

1.  [http://phoxis.org/2011/04/27/c-language-constructors-and-destructors-with-gcc/](http://phoxis.org/2011/04/27/c-language-constructors-and-destructors-with-gcc/)

    *   在评论中，人们提到在使用析构函数时遇到问题`exit`，并且必须使用该`atexit`函数来克服这些问题
2.  [http://clang-developers.42468.n3.nabble.com/Priority-settings-for-static-variables-and-attribute-destructor-td4030466.html](http://clang-developers.42468.n3.nabble.com/Priority-settings-for-static-variables-and-attribute-destructor-td4030466.html)

    *   **在调用属性**((destructor)) 函数之前破坏的全局资源。建议的解决方案是使用析构函数的优先级。

# javascript - 尝试在 Firefox 中将 div 设置为自动

> ID：15756569
> 
> 赞同：0
> 
> 时间：2013-04-02T05:11:13.870
> 
> 标签：javascript, css, firefox, scale

我有一个根据视口大小动态缩放的 div。

```
function zoomSquare() {
    var $square = $('.square');

    var viewportWidth = $square.parent().width();
    var squareWidth = $square.width();
    var desiredWidth = Math.round(viewportWidth * 0.95);
    var zoom = (desiredWidth / squareWidth);

    $square.css('zoom', zoom);
    $square.css('-moz-transform', 'scale(' + zoom + ')');
    $square.css(  '-o-transform', 'scale(' + zoom + ')');
}

// When the browser is resized
$(window).on('resize', function(){ zoomSquare(); });

// When the page first loads
$(document).ready(function(){
    zoomSquare();
}); 
```

[http://jsfiddle.net/sarahwhatsup/YDwds/8/](http://jsfiddle.net/sarahwhatsup/YDwds/8/)

我想让父级设置为自动，因为 div 缩放，下面的 div 调整它们的位置。这适用于 Chrome、IE、Safari，但由于某种原因，我无法让它在 Firefox 中运行。有人知道吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:49:56.540

您可以更改包装器 div 的高度。

```
$('.wrapper').css('height', squareWidth * zoom); 
```

[http://jsfiddle.net/YDwds/22/](http://jsfiddle.net/YDwds/22/)

# jquery - 运行从 jQuery $.get 返回的脚本

> ID：15756573
> 
> 赞同：0
> 
> 时间：2013-04-02T05:11:36.330
> 
> 标签：jquery, get

我有一个调用 jQuery`.get()`函数的链接，该函数返回更多要附加到调用容器的 jQuery 脚本。数据正在返回，但没有被执行，只是简单地打印到页面上。

电话：

```
$('<a/>').attr('href', "#").addClass('link-button').html("Add New").on('click', function () {
    Loader.Show(); 
    $.get("webservice.php", {news: "addnew"}, function (data) {$("#page").empty().append(data);});
    return false;
}); 
```

返回的数据：

```
$('<form/>').attr('action', "webservice.php").attr('method', "post").append(
    $('<input/>').attr('type', "hidden").attr('name', "news").val("add"),
    $('<p/>').append(
        "Title:",
        $('<input/>').attr('type', "text").attr('name', "title").attr('data-required', "true").on('focusout', function () {
            if($(this).val() == "") {$(this).addClass('required');} else {$(this).removeClass('required');}
        })
    ),
    $('<p/>').append(
        "Text:",
        $('<input/>').attr('type', "text").attr('name', "text").attr('data-required', "true").addClass('paragraph').on('focusout', function () {
            if($(this).val() == "") {$(this).addClass('required');} else {$(this).removeClass('required');}
        })
    ),
    $('<p/>').append(
        $('<input/>').attr('type', "submit").val("Post"),
        $('<span/>').addClass('availabletext')
    )
).on('submit', function () {
    Loader.Show("Posting...");
    $(this).find('[type=submit]').attr('disabled', "disabled");
    var gtg = true;
    $(this).find('[data-required=true]').each(function () {
        if($(this).val() == "") {
            $(this).addClass('required');
            gtg = false;
        } else {
            $(this).removeClass('required');
        }
    });
    if($(this).find('[data-type=vote]').val() == "No" && $(this).find('[data-type=comment]').val() == "") {
        $(this).find('[data-type=comment]').addClass('required');
        gtg = false;
    } else {
        $(this).find('[data-type=comment]').removeClass('required');
    }
    if(gtg) {
        return true;
    } else {
        $(this).find('[type=submit]').removeAttr('disabled', "disabled");
        Loader.Hide();
        return false;
    }
}).ajaxForm({success: function (data, textStatus, jqXHR) {
    $(this).parent().empty().append(data);
}, error: function () {
    $(this).append("Server timeout, please try again...");
    $("#submit-button").removeAttr('disabled');
    Loader.Hide();
}}); 
```

问题是返回的代码实际上是打印到页面上，而不是被处理和执行。这可能吗？我错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:14:59.390

尝试这样的事情：

```
jQuery.getScript('webservice.php?news=addnew', function() {
    console.log('script loaded!');
}); 
```

[http://docs.jquery.com/Ajax/jQuery.getScript](http://docs.jquery.com/Ajax/jQuery.getScript)

# python - Python：更改 Windows 时区后时间戳不正确

> ID：15756574
> 
> 赞同：1
> 
> 时间：2013-04-02T05:11:38.297
> 
> 标签：python, datetime, timezone

在 Python 应用程序中运行 Windows XP，我得到当前时间：

```
import datetime
now = datetime.datetime.now() 
```

并且时间与系统时钟显示上的时间一致。但是，现在，*应用程序仍在运行*，我转到 Windows 时钟并选择时区并更改它。现在我用上面的方法再次得到时间，这一次是不正确的——它给了我时间，就好像我没有改变时区一样。

但是如果我关闭应用程序并重新启动它然后获取时间，那么它与时钟匹配。就好像它“卡在”应用程序首先加载的任何时区一样。

有趣的是，这只发生在时区更改时；如果我只是更改更改在应用程序中正确更改的时间（而不是时区）。

为什么会这样，我能做些什么来防止它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T20:06:21.310

我的猜测是 Python 运行时在启动时读取系统时区，并使用 UTC 作为其基础。因此，当您更改时区而不更改时间时，Windows 不会向 Python 发出信号来更改任何内容。我仍在挖掘 python 文档以证实这一假设。

这有什么重要的原因吗？有人会假设系统时区不会经常更改 - 或者至少不会经常更改，以至于您的用户无法简单地重新启动应用程序。

即使这是真的，您也可能可以从 Python 调用来更新缓存的时区值。

你在用 pytz 吗？或者只是直接的日期时间？

**更新**

这个以前有[报道过](https://stackoverflow.com/q/4360981/634824)，另外一个问题也有合理的解决方案。

# jquery - jQuery单击事件未触发。奇怪的结果

> ID：15756576
> 
> 赞同：0
> 
> 时间：2013-04-02T05:11:48.280
> 
> 标签：jquery, onclick

所以我有这个点击事件：

```
$(".pickerOpt").click(function() { 
    $(this).child('span').show();
}); 
```

还有这个：

```
<ul id="hair" class="picker">
<span>Hair</span>
    <li id="a" class="pickerOpt"><span>.</span></li>
    <li id="b" class="pickerOpt"><span>.</span></li>
    <li id="c" class="pickerOpt"><span>.</span></li>
    <li id="d" class="pickerOpt"><span>.</span></li>
    <li id="e" class="pickerOpt"><span>.</span></li>
    <li id="f" class="pickerOpt"><span>.</span></li>
</ul>
<ul id="eye" class="picker">
    <span>Eyes</span>
    <li id="g" class="pickerOpt"><span>.</span></li>
    <li id="h" class="pickerOpt"><span>.</span></li>
    <li id="i" class="pickerOpt"><span>.</span></li>
    <li id="j" class="pickerOpt"><span>.</span></li>
</ul> 
```

默认情况下，跨度是隐藏的，当我单击 li （现在是一个看起来像 swaure 的块元素）时，我希望它显示它，但它不起作用。我将点击事件设置为我拥有的 h2，当我通过 console.log("derp derp") 时它实际上工作了，但是每次我点击它时，它都会在控制台中触发 5 次。我刷新了页面，它不会再这样做了。

请帮忙，我要抽出这个网站。这是现场版本：[http ://scoutsamerica.com/admin/addmodel.php](http://scoutsamerica.com/admin/addmodel.php)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:19:45.420

```
$(".pickerOpt").unbind().click(function (e) {

//your content here 

} 
```

与您单击的是绑定一次

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:14:43.307

jQuery中没有`.child()`方法，你想要的是`.children()`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:15:42.427

尽管您的问题不清楚，AFAIU，请尝试使用 >= jQuery 1.7`.on`

```
$(document).on('click', '.pickerOpt' , function() { 
    $(this).children('span').show();
}); 
```

[`Working DEMO`](http://jsfiddle.net/6pEsb/2)

# php - Drupal 在评论存储中添加行 - 在哪里编辑“插入”查询？

> ID：15756580
> 
> 赞同：1
> 
> 时间：2013-04-02T05:12:02.143
> 
> 标签：php, drupal

我在我的 Drupal MySQL 数据库中编辑了“评论”表以添加两行。这是因为我有一个接受 URL 参数的页面，所以虽然只有一个页面，但我需要区分该参数的值以进行评论。我在`comment.module`编辑 MySQL 查询时遇到问题。我在任何地方都找不到任何类型的`'INSERT into...'`查询，而不仅仅是在那个文件中。我查看了评论模块文件夹中的所有内容。

似乎影响数据库插入的是`comment_publish_action()`函数，`comment.module`但我仍然遇到有关添加列的一些问题，因为它们没有默认值。

这是那个函数，“typenode”和“idofnode”是添加的带有测试值的列：

```
function comment_publish_action($comment, $context = array()) {
  if (isset($comment->subject)) {
    $subject = $comment->subject;
    $comment->status = COMMENT_PUBLISHED;
  }
  else {
    $cid = $context['cid'];
    $subject = db_query('SELECT subject FROM {comment} WHERE cid = :cid', array(':cid' => $cid))->fetchField();
    db_update('comment')
      ->fields(array(
        'status' => COMMENT_PUBLISHED,
        'typenode' => 'player',
        'idofnode' => 1239
      ))
      ->condition('cid', $cid)
      ->execute();
  }
  watchdog('action', 'Published comment %subject.', array('%subject' => $subject));
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:10:05.807

编辑 comment.module 不是一个好主意。在下一次核心更新期间，所有更改都将丢失。最好创建一个自定义模块并在那里实现一些钩子。

有`comment_save($comment)`执行插入/更新新评论的步骤的功能。在此函数中，您可以找到`drupal_write_record('comment', $comment);`插入或更新数据库表“注释”的行（依赖于逻辑）。但在此行之前，有一个钩子`module_invoke_all('comment_presave', $comment);`允许您在 $comment 对象存储到数据库之前对其进行修改。这是一个很好的方法——在自定义模块中实现这个钩子并在那里进行修改。

```
function custom_module_comment_presave($comment) {
  //add rows info here
} 
```

# c# - 在运行时更改 NumericPagerField ButtonCount 属性

> ID：15756587
> 
> 赞同：1
> 
> 时间：2013-04-02T05:12:35.153
> 
> 标签：c#, asp.net, runtime, datapager

我在 ASP.NET 中使用 DataPager 和 ObjectDataSource 为 ListView 实现分页，它多年来一直运行良好，但现在问题出现了。

我们目前将 PageSize 设置为 15，ButtonCount = 5。对于一百万行，我们有超过 66k 页。问题是：DataPager 控件的宽度被限制为一个特定的数字，在第一个块 (1,2,3...) 中是可以的，但是当我们移动到最后一个块时 (66000, 660001, 66002,.. .) 分页控件溢出容器。

我们找到了一个解决方案，根据 StartRowIndex 和 DataPager 控件的 PageSize 计算页码，然后使用重新设置 ButtonCount 值

```
(DataPager.Fields[<NumericPagerFieldIndex>] as NumericPagerField).ButtonCount = x 
```

然后，奇怪的事情发生了：当我们移动到最后一页（66667）时，点击66666，我们都认为它会将页码更改为66666但没有，而不是66666，而是选择了66664。

我们不知道为什么，周围有谷歌，也阅读了 DataPager 的代码，但仍然一无所获。

任何帮助将不胜感激！

# mercurial - Mecurial：“删除了 5 个文件”。哪5个文件？

> ID：15756590
> 
> 赞同：0
> 
> 时间：2013-04-02T05:13:17.407
> 
> 标签：mercurial

我刚刚做了一个 hg 更新，并且：

```
sourcedir> hg update
20 files updated, 0 files merged, 5 files removed, 0 files unresolved 
```

hg 删除了 5 个文件。哪5个文件？有没有我可以输入的命令来预览更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T06:17:05.293

一旦您**hg update**，这意味着您将最新的拉取更改应用到您的工作目录。

在更新之前（和拉取之前），您可以使用**hg 传入**命令预览即将到来的变更集，该命令将为您提供即将拉取的变更集的预览。

此外，查看已完成操作的快速方法是查看日志：**hg log**。

我还强烈建议您阅读手册并更加熟悉 mercurial 及其工作流程。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T22:43:26.130

您需要知道您已经更新了多少次修订。如果您的目录比其当前状态落后 3 个修订版，您可以使用`hg log -v -l 3`. 将`-l 3`报告的长度限制为 3，并`-v`列出了每个变更集的受影响文件。

# gridview - 如何从带有页面的网格创建 MS Excel 文件？

> ID：15756592
> 
> 赞同：0
> 
> 时间：2013-04-02T05:13:20.673
> 
> 标签：gridview, export-to-excel

我们有 ASP.NET 应用程序，应该从网格数据创建 MS Excel 文件。我们不需要“另存为”对话框。网格可以分页。有时网格在页面中可能有很多数据，并且通过所有这些数据可能会非常慢。

我们如何以更快的方式从网格中的所有数据创建 MS Excel 文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T20:39:40.787

如果您的 gridview 中有多个页面，我假设您的 .aspx 页面上有 AllowPaging="True" 。

如果在调用函数时将其设置为 false，然后重新对 gridview 进行数据绑定，则 Excel 工作簿中的分页不会出现问题。

所以这里我的 gridview 是 gvTest 代码看起来像这样：

```
protected void btnExportToExcel_Click(object sender, EventArgs e)
 {
     //exports gridview to Excel file.
     gvTest.AllowPaging = false;
     gvTest.DataBind();
     String filename;

     Response.Clear();

     filename = string.Format("WhateverFileNameYouWant.xls");

     Response.AddHeader("Content-Disposition", ("attachment; filename=" + filename));

     Response.ContentType = "application/excel";

     StringWriter sw = new StringWriter();

     HtmlTextWriter htw = new HtmlTextWriter(sw);

     gvTest.RenderControl(htw);

     Response.Write(sw.ToString());

     Response.End();
 } 
```

此外，如果您在 gvTest.RenderControl(htw) 行上收到一条错误消息，可能会显示如下内容：“必须将类型为 'GridView' 的控件 'gvTest' 放在带有 runat=server 的表单标签内。”

您很可能需要添加：

```
 EnableEventValidation="false" 
```

到您的 .aspx 页面顶部 您将在其中看到“<%@ Page Language="C#"....”

并添加：

```
public override void VerifyRenderingInServerForm(Control control)
 {
     return;
 } 
```

在你的代码后面的任何地方。

这似乎是一个常见的错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:21:08.110

您可以使用以下文章来创建它[http://dotnetask.com/Resource.aspx?Resourceid=644](http://dotnetask.com/Resource.aspx?Resourceid=644)。甚至我知道 SpreadSheetgear 公司提供 DLL 来做这件事。尝试在 codeplex 中找到更多，我认为他们也可以找到几个选项。看看这个： http: [//npoi.codeplex.com/](http://npoi.codeplex.com/) 和[http://closedxml.codeplex.com/](http://closedxml.codeplex.com/)。请记住，在一天结束时，GridView 只不过是数据的集合，因此您可以选择最终使用以在 excel 中下载，以防您有这么多数据页

```
 ExportToExcel excel = new ExportToExcel();
           context.Response.Clear();
    context.Response.AddHeader("content-disposition", String.Format("attachment; filename={0}", fileName + ".xls"));
    context.Response.ContentType = "application/ms-excel";
    context.Response.Write(excel.Excel(YOURCollection));
    context.Response.End();

   public class ExportToExcel
{
    public StringWriter Excel(MyCollection)
    {
        using (StringWriter sw = new StringWriter())
        {
            using (HtmlTextWriter htw = new HtmlTextWriter(sw))
            {
                Table table = new Table();
                TableRow tableRow = new TableRow();
                TableHeaderCell header;
                header = new TableHeaderCell();
                header.Text = "Receipt Id";
                header.BorderStyle = BorderStyle.Solid;
                tableRow.Cells.Add(header);

                foreach (MyItem)
                {
                    TableRow row = new TableRow();
                    TableCell cell;
                    cell = new TableCell();
                    cell.Text = "" + MyItem.Info;
                    cell.BorderStyle = BorderStyle.Solid;
                    row.Cells.Add(cell);

                    table.Rows.Add(row);
                }
                table.RenderControl(htw);
                return sw;
            }
        }
    }
} 
```

# iphone - 在 iphone 中使用 html 发布数据

> ID：15756596
> 
> 赞同：1
> 
> 时间：2013-04-02T05:13:32.873
> 
> 标签：iphone, html, http-post

在网站中，表单数据使用以下代码使用 HTML 发布请求发布：

```
<div id="requestinfo">
    <form method="post" action="http://abc/form-post.php" id="request_form">
        <input type="hidden" name="field1" value="value1" />
        <input type="hidden" name="field2" value="value2" />
    </form>
</div> 
```

我怎样才能在 iPhone 中做同样的事情？`We do not have to use web services.`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:19:32.050

我建议使用[AFNetworking](http://www.afnetworking.com)作为处理 HTTP 动词和数据的解决方案。

允许您指定动词（在这种`AFHTTPClient`情况下为 POST）以及要传递的参数。

请参阅：[AFNetworking 发布请求](https://stackoverflow.com/questions/7623275/afnetworking-post-request)

# linux-kernel - 内核哎呀哎呀：ARM嵌入式系统上的80000005

> ID：15756597
> 
> 赞同：3
> 
> 时间：2013-04-02T05:13:35.723
> 
> 标签：linux-kernel, crash-dumps, omap, debug-backtrace

请帮我解决这个问题。我使用了一个 1 毫秒的高分辨率计时器并将其安装为带有“insmod”的单独模块。这每 1 毫秒触发一次，我必须用这个定时器中断做一些任务。还有其他进行图像传输的进程，我看到以太网驱动程序中断出现以发送图像。这个enet中断有一些高优先级，看起来它正在延迟上面的1 ms定时器中断，但我不确定。

在运行测试 3 到 3 小时后，我看到了下面的 Oops。如何从根本上解决这个问题？请帮忙。系统为ARM omap，运行Linux 2.6.33 交叉编译。

```
[root@user:/]# 
Unable to handle kernel paging request at virtual address 7eb52754
pgd = 80004000
[7eb52754] *pgd=00000000
Internal error: Oops: 80000005 [#1] PREEMPT
last sysfs file: /sys/devices/virtual/spi/spi/dev
Modules linked in: mod timermod mod2(P) mod3(P) mod4
CPU: 0    Tainted: P            (2.6.33_appl #1)
PC is at 0x7eb52754
LR is at walk_stackframe+0x24/0x40
pc : [<7eb52754>]    lr : [<8002d4dc>]    psr: a0000013
sp : 80395f10  ip : 80395f30  fp : 80395f2c
r10: 0000001f  r9 : 00000000  r8 : 87a25200
r7 : 878b0380  r6 : 80395f40  r5 : 80028374  r4 : 80395f30
r3 : 80000100  r2 : 80395f40  r1 : 80395f40  r0 : 80395f30
Flags: NzCv  IRQs on  FIQs on  Mode SVC_32  ISA ARM  Segment kernel
Control: 10c5387d  Table: 86fb0019  DAC: 00000017
Process swapper (pid: 0, stack limit = 0x803942e8)
Stack: (0x80395f10 to 0x80396000)
5f00:                                     8002bfa4 00000001 802c678c 87a25380
5f20: 80395f54 80395f30 8002bfe0 8002d4c4 80395f54 80395f30 8004998c 8002bfa4
5f40: 00000002 00000002 80395f6c 80395f58 8004998c 8002bfb0 80396ea8 80394000
5f60: 80395fa4 80395f70 802c678c 800498d0 8002b320 80023218 80398408 80021e10
5f80: 80394000 8002321c 80023218 80398408 80021e10 413fc082 80395fbc 80395fa8
5fa0: 8002b324 802c62fc 803f4cc8 803f5190 80395fcc 80395fc0 802c3ee4 8002b28c
5fc0: 80395ff4 80395fd0 8000897c 802c3e6c 800084fc 00000000 00000000 8002321c
5fe0: 10c53c7d 803c7630 00000000 80395ff8 80008034 80008754 00000000 00000000
Backtrace:
[<8002d4b8>] (walk_stackframe+0x0/0x40) from [<8002bfe0>] (return_address+0x3c/0x5c)
 r6:87a25380 r5:802c678c r4:00000001 r3:8002bfa4
[<8002bfa4>] (return_address+0x0/0x5c) from [<8004998c>] (sub_preempt_count+0xc8/0xfc)
[<800498c4>] (sub_preempt_count+0x0/0xfc) from [<802c678c>] (schedule+0x49c/0x4d8)
 r5:80394000 r4:80396ea8
[<802c62f0>] (schedule+0x0/0x4d8) from [<8002b324>] (cpu_idle+0xa4/0xbc)
 r9:413fc082 r8:80021e10 r7:80398408 r6:80023218 r5:8002321c
r4:80394000
[<8002b280>] (cpu_idle+0x0/0xbc) from [<802c3ee4>] (rest_init+0x84/0xa0)
 r4:803f5190 r3:803f4cc8
[<802c3e60>] (rest_init+0x0/0xa0) from [<8000897c>] (start_kernel+0x234/0x284)
[<80008748>] (start_kernel+0x0/0x284) from [<80008034>] (__enable_mmu+0x0/0x2c)
Code: bad PC value
---[ end trace 7e26218fd59f68a5 ]---
Kernel panic - not syncing: Attempted to kill the idle task!
Backtrace:
[<8002db2c>] (dump_backtrace+0x0/0x114) from [<802c610c>] (dump_stack+0x20/0x24)
 r6:fffffffc r5:0000000b r4:803c8518 r3:00000002
[<802c60ec>] (dump_stack+0x0/0x24) from [<802c6168>] (panic+0x58/0x130)
[<802c6110>] (panic+0x0/0x130) from [<80057330>] (do_exit+0x7c/0x6e0)
 r3:80394000 r2:00000000 r1:80395d28 r0:80348e90
[<800572b4>] (do_exit+0x0/0x6e0) from [<8002dfc0>] (die+0x290/0x2c4)
 r7:7eb52744
[<8002dd30>] (die+0x0/0x2c4) from [<8002f4d4>] (__do_kernel_fault+0x74/0x84)
 r7:80395ec8
[<8002f460>] (__do_kernel_fault+0x0/0x84) from [<8002f6bc>] (do_page_fault+0x1d8/0x1f0)
 r7:00000000 r6:80395ec8 r5:7eb52754 r4:80396ea8
[<8002f4e4>] (do_page_fault+0x0/0x1f0) from [<8002f794>] (do_translation_fault+0x20/0x80)
[<8002f774>] (do_translation_fault+0x0/0x80) from [<80029250>] (do_PrefetchAbort+0x44/0xa8)
 r6:7eb52754 r5:80398820 r4:00000005 r3:8002f774
[<8002920c>] (do_PrefetchAbort+0x0/0xa8) from [<80029d1c>] (__pabt_svc+0x5c/0xa0)
Exception stack(0x80395ec8 to 0x80395f10)
5ec0:                   80395f30 80395f40 80395f40 80000100 80395f30 80028374
5ee0: 80395f40 878b0380 87a25200 00000000 0000001f 80395f2c 80395f30 80395f10
5f00: 8002d4dc 7eb52754 a0000013 ffffffff
 r7:878b0380 r6:80395f40 r5:80395efc r4:ffffffff
[<8002d4b8>] (walk_stackframe+0x0/0x40) from [<8002bfe0>] (return_address+0x3c/0x5c)
 r6:87a25380 r5:802c678c r4:00000001 r3:8002bfa4
[<8002bfa4>] (return_address+0x0/0x5c) from [<8004998c>] (sub_preempt_count+0xc8/0xfc)
[<800498c4>] (sub_preempt_count+0x0/0xfc) from [<802c678c>] (schedule+0x49c/0x4d8)
 r5:80394000 r4:80396ea8
[<802c62f0>] (schedule+0x0/0x4d8) from [<8002b324>] (cpu_idle+0xa4/0xbc)
 r9:413fc082 r8:80021e10 r7:80398408 r6:80023218 r5:8002321c
r4:80394000
[<8002b280>] (cpu_idle+0x0/0xbc) from [<802c3ee4>] (rest_init+0x84/0xa0)
 r4:803f5190 r3:803f4cc8
[<802c3e60>] (rest_init+0x0/0xa0) from [<8000897c>] (start_kernel+0x234/0x284)
[<80008748>] (start_kernel+0x0/0x284) from [<80008034>] (__enable_mmu+0x0/0x2c) 
```

==========================================

```
#include <linux/hrtimer.h>
#include <linux/module.h>
#include <linux/ktime.h>
#include <linux/kdev_t.h>
#include <linux/cdev.h>
#include <linux/device.h>
#include <linux/fs.h>
#include <linux/wait.h>
#include <linux/sched.h>

#define FIRST_MINOR 0
#define MINOR_CNT   1

static struct class *cl;
static struct cdev cdev;
static dev_t dev;
static u8 timer_expired = 0;
static wait_queue_head_t wq_head;

static struct hrtimer timer;

static ssize_t hr_read(struct file *f, char * __user buff, size_t cnt, loff_t *off)
{
    wait_event_interruptible(wq_head, timer_expired);
    timer_expired = 0;
    return 0;
}

static int hr_open(struct inode *i, struct file *f)
{
    ktime_t ktime;
        ktime.tv64 = 1E6L;
        hrtimer_start(&timer, ktime, HRTIMER_MODE_REL);
    return 0;
}   

static int hr_close(struct inode *i, struct file *f)
{
    if (hrtimer_cancel(&timer))
       printk(KERN_INFO "timercancelled\n");

    return 0;
}   

static struct file_operations hr_fops = {
    .read = hr_read,
    .open = hr_open,
    .release = hr_close
};

static enum hrtimer_restart timer_callback(struct hrtimer *timer)
{
    ktime_t ktime;
    u64 overrun;
    ktime.tv64 = 1E6L;
    //printk("KERN_INFO""Timer Expired");

    overrun = hrtimer_forward_now(timer, ktime);
    timer_expired = 1;
    wake_up_interruptible(&wq_head);
    return HRTIMER_RESTART;
}
#if 1

static int init_hrtimer(void)
{   
    ktime_t ktime;
    unsigned long delay_in_ms = 500L;
    printk(KERN_ERR "Timer being set up\n");

    ktime = ktime_set(0,delay_in_ms*1E6L);
    hrtimer_init(&timer, CLOCK_MONOTONIC, HRTIMER_MODE_REL);

    timer.function = &timer_callback;
    printk(KERN_ERR "Timer starting to fire\n");
    printk(KERN_ERR "in %ldms %ld\n", delay_in_ms, jiffies);

    if (alloc_chrdev_region(&dev, FIRST_MINOR, MINOR_CNT, "Hr Timer") < 0)
    {
        return -1;
    }
    printk("Major Nr: %d\n", MAJOR(dev));

    cdev_init(&cdev, &hr_fops);

    if (cdev_add(&cdev, dev, MINOR_CNT) == -1)
    {
        unregister_chrdev_region(dev, MINOR_CNT);
        return -1;
    }

    if ((cl = class_create(THIS_MODULE, "hrtimer")) == NULL)
    {
        cdev_del(&cdev);
        unregister_chrdev_region(dev, MINOR_CNT);
        return -1;
    }
    if (IS_ERR(device_create(cl, NULL, dev, NULL, "hrt%d", 0)))
    {
        class_destroy(cl);
        cdev_del(&cdev);
        unregister_chrdev_region(dev, MINOR_CNT);
        return -1;
    }

    init_waitqueue_head(&wq_head);

    return 0;
}
#endif

static void clean_hrtimer(void)
{
    int cancelled = hrtimer_cancel(&timer);

    if (cancelled)
        printk(KERN_ERR "Timer still running\n");
    else
        printk(KERN_ERR "Timer cancelled\n");

     device_destroy(cl, dev);
     class_destroy(cl);
        cdev_del(&cdev);
        unregister_chrdev_region(dev, MINOR_CNT);
}

module_init(init_hrtimer);
module_exit(clean_hrtimer);

MODULE_LICENSE("GPL"); 
```

=========================

我用上面的代码作为驱动模块，用insmod插入。我希望它每 1 毫秒触发一次，它工作正常，但有时当以太网流量太高时，它会给出一个内核糟糕的解释。请检查代码是否有任何问题？

我检查了 lsmod，我看到所有 5 个内核模块（我自己的）都加载在：0x7f000000 到 0x7f02xxxx 之间

```
mod at 0x7f020xxxx, 
timermod at 0x7f01xxx, 
mod2 at 0x7f01xxxx, 
mod3 at 0x7f00xxxx, 
mod4 at 0x7f000000\. 
```

在 oops 地址 0x7eb52754 处未加载任何模块。我从 /proc/kallsyms 文件中检查以验证这一点。如何检查 0x7eb5xxxx 到源文件的映射？我还能在哪里获得系统上的数据。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T07:19:41.657

根据错误消息，导致此内核恐慌的代码位于虚拟地址 0x7eb52754。从地址（略低于 0x8000000）来看，我猜这是内核模块的代码段 - 可能是您自己的内核模块之一。

要进行根本原因分析，请按照发生此恐慌时的加载顺序加载您的（和所有其他）内核模块，并观察它们的加载地址，如 lsmod （或几乎相同的 cat /proc/modules ）打印的那样.

使用它们的代码大小和加载地址，计算哪个模块文本段位于虚拟地址 0x7eb52754。从模块加载地址中减去 0x7eb52754。

您将得到的是导致恐慌的指令在模块二进制中的偏移量。

现在在内核模块二进制文件上使用 objdump 并查找该偏移量，并检查它属于哪个函数（这也可以使用 add2line 完成，如果你也有的话）。这应该将您指向导致此恐慌的指令的函数甚至行号（如果您有调试信息）。

祝你好运。

# excel - 使用文本框搜索两个自动过滤列的任何部分

> ID：15756599
> 
> 赞同：0
> 
> 时间：2013-04-02T05:13:50.853
> 
> 标签：excel, textbox, excel-2010, autofilter, vba

我正在尝试使用文本框在两个自动过滤列（项目编号和项目名称）之一中搜索结果。我的代码如下；

```
Private Sub TextBox3_Change()

Application.Calculation = xlManual

 Application.ScreenUpdating = False
Selection.AutoFilter Field:=5, Criteria1:="*" & TextBox3.Value & "*", Operator:=xlOr

On Error Resume Next

If Range("B7:B1307").SpecialCells(xlCellTypeVisible).Count = 0 Then
Call ClearAllFilters

  ActiveSheet.Range("B7:B1307").AutoFilter Field:=5, Criteria1:="<>"

 Selection.AutoFilter Field:=6, Criteria1:="*" & TextBox3.Value & "*", Operator:=xlOr
 End If
     Application.ScreenUpdating = True
 Application.Calculation = xlAutomatic
 End Sub 
```

我希望它在一列中查找，如果没有找到结果，则需要在另一列中进行搜索。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T02:49:36.600

实际上，我刚刚创建了一个新列，它将两列信息连接起来，然后进行搜索——它工作正常。

不过，我仍然有兴趣找出上面的代码有什么问题。

# c++ - C WinAPI 和 C++ MFC 资源

> ID：15756603
> 
> 赞同：-1
> 
> 时间：2013-04-02T05:14:11.037
> 
> 标签：c++, c, windows, winapi, mfc

我想问你们是否知道以下主题的最佳（综合）书籍是什么：

C Win32/WinAPI 编程；windows.h 和所有其他 c 的 windows 库中的 windows 函数的书或目录；标准 C 库的书籍或目录；

C++ MFC 书籍；

我做了功课，但谷歌不证明也不保证专业的答案，我希望 Stack Overflow 可以。

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T05:45:52.970

Petzold 用于学习原始 Windows API

[http://www.amazon.com/exec/obidos/ISBN=157231995X](https://rads.stackoverflow.com/amzn/click/com/157231995X)

这将为您了解事物在引擎盖下的工作方式提供良好的基础。这很重要，因为 MFC 本质上是一个包装器，有时您必须获得较低的级别。如果您不依赖 IDE 和向导，您将成为一个更强大的开发人员。Petzold 非常强调这一点。

Prosise 对 MFC 有好处：

[http://www.amazon.com/Programming-Windows-MFC-Second-Edition/dp/1572316950](https://rads.stackoverflow.com/amzn/click/com/1572316950)

# android - 暂时禁用android中的互联网访问？

> ID：15756609
> 
> 赞同：8
> 
> 时间：2013-04-02T05:14:44.060
> 
> 标签：android, testing

我想设置一个测试，看看我的代码在没有互联网访问时是否正常工作。有没有办法暂时关闭互联网访问以进行测试？

我试着环顾四周，但找不到。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T05:28:24.073

此代码示例应适用于运行姜饼及更高版本的 android 手机：This enable/disable data connection

```
private void setMobileDataEnabled(Context context, boolean enabled) {
   final ConnectivityManager conman = (ConnectivityManager)  context.getSystemService(Context.CONNECTIVITY_SERVICE);
  final Class conmanClass = Class.forName(conman.getClass().getName());
  final Field iConnectivityManagerField = conmanClass.getDeclaredField("mService");
  iConnectivityManagerField.setAccessible(true);
  final Object iConnectivityManager = iConnectivityManagerField.get(conman);
  final Class iConnectivityManagerClass = Class.forName(iConnectivityManager.getClass().getName());
  final Method setMobileDataEnabledMethod = iConnectivityManagerClass.getDeclaredMethod("setMobileDataEnabled", Boolean.TYPE);
  setMobileDataEnabledMethod.setAccessible(true);
  setMobileDataEnabledMethod.invoke(iConnectivityManager, enabled);
} 
```

不要忘记将此行添加到清单文件中

```
<uses-permission android:name="android.permission.CHANGE_NETWORK_STATE"/> 
```

另外，我知道启用或禁用 wifi：

```
WifiManager wifiManager = (WifiManager)this.context.getSystemService(Context.WIFI_SERVICE);
wifiManager.setWifiEnabled(status); 
```

根据要求，状态可能为真或假。

同样在清单上：

```
<uses-permission android:name="android.permission.CHANGE_WIFI_STATE" /> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T05:27:07.020

好吧，要禁用 Wifi，您可以使用以下代码：

```
WifiManager wifiManager = (WifiManager)this.context.getSystemService(Context.WIFI_SERVICE);
wifiManager.setWifiEnabled(true); // "true" TO ENABLE || "false" TO DISABLE 
```

要禁用数据连接，您可以在此处使用解决方案：[https](https://stackoverflow.com/a/4304110/450534) ://stackoverflow.com/a/4304110/450534 。但是，此方法**不适**用于**2.3+**

这里的答案有一个适用于 2.3+ 和 2.2 及以下版本的解决方案：[https](https://stackoverflow.com/a/12535246/450534) ://stackoverflow.com/a/12535246/450534 。您可以进行简单的 API 检查并决定运行哪段代码。这样的事情应该让你设置：

```
int currentAPIVersion = android.os.Build.VERSION.SDK_INT;
if (currentAPIVersion >= android.os.Build.VERSION_CODES.GINGERBREAD) {
    // RUN THE CODE FOR 2.3+
} else {
    // RUN THE CODE FOR API LEVEL BELOW 2.3
} 
```

看看这两种方法中哪一种适合你。我怀疑，会是后者。不过，我个人从来没有测试过启用或禁用数据连接。

给链接解决方案的作者的道具。;-)

**注意：** *数据连接解决方​​案基于非官方 API，可能无法在未来的版本中使用。*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T05:26:58.273

`DDMS`如果您使用的是模拟器，您可以在设置中关闭它的互联网访问。

查看：

1.  [**如何在 Android 模拟器中禁用 Internet 连接？**](https://stackoverflow.com/questions/8499812/how-to-disable-internet-connection-in-android-emulator)
2.  [**如何禁用/启用网络，在 Android 模拟器中切换到 Wifi？**](https://stackoverflow.com/questions/3002886/how-to-disable-enable-network-switch-to-wifi-in-android-emulator)（关于单元测试的问题）

# jquery - 如何分组验证动态字段？

> ID：15756613
> 
> 赞同：0
> 
> 时间：2013-04-02T05:14:59.993
> 
> 标签：jquery, jquery-validate

我目前正在生成表单的一个区域，如果任何生成的字段为空白，我想为其显示自定义错误消息。

我生成的代码看起来像这样

```
<input type="text" id="Field1" name="Generated" />
<input type="text" id="Field2" name="Generated" /> 
```

ETC...

我的验证码是这样的

```
$('#myform').validate({
    rules: {
        Generated: {
            required:true
        }
    },
    messages: {
        Generated: { required : "Custom message." }
    },
    groups: {
        GeneratedGroup: "Generated"
    },
    errorPlacement: function(error, element){
        if (element.attr("name") == "Generated"){
            $('#bottomOfGeneratedSectionDiv').append(error);
        } else {
            error.insertAfter(element);
        }
    }
}); 
```

如果生成的所有字段均为空白，则验证失败并显示错误消息。
如果填写了任何一个字段，则验证通过并提交表单，这是意外行为。

如何分组验证动态字段？

 **使用 sparkies 帮助和我的新 errorPlacement 代码进行**编辑。**
这应该可以实现我的目标。**

 **```
 errorPlacement: function(error, element){
        if (element.attr("name").indexOf("Generated") >= 0){
            $('#bottomOfGeneratedSectionDiv').empty();
            $('#bottomOfGeneratedSectionDiv').append(error);
        } else {
            error.insertAfter(element);
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T14:47:50.477

字段名称**必须**是唯一的，此插件才能正常运行。

**HTML**：

```
<input type="text" id="Field1" name="Generated1" />
<input type="text" id="Field2" name="Generated2" /> 
```

**jQuery** :

```
$(document).ready(function() {

    $('#myform').validate({
        rules: {
            Generated1: {
                required:true
            },
            Generated2: {
                required:true
            }
        },
        messages: {
            Generated1: { 
                 required: "Custom message."
            },
            Generated2: { 
                 required: "Custom message."
            }
        },
        groups: {
            GeneratedGroup: "Generated1 Generated2"
        }
    });

}); 
```

**演示：http: [//jsfiddle.net/xCY4T/](http://jsfiddle.net/xCY4T/)**

* * *

要将规则添加到动态添加的字段，您将在创建字段后立即使用[该`rules('add')`方法。](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)（AFAIK，没有动态添加`groups`选项的方法）

```
$('[name="Generated2"]').rules('add', {
    required:true,
    messages: {
        required: "Custom message."
    }
}); 
```

或者一次对于许多新字段，使用“开始于”选择器和`.each`...

```
$('[name^="Generated"]').each(function() {
    $(this).rules('add', {
        required:true,
        messages: {
            required: "Custom message."
        }
    });
}); 
```

此方法的简单演示：http: [//jsfiddle.net/xCY4T/1/](http://jsfiddle.net/xCY4T/1/)

* * *

另一种方法是使用[addClassRules 方法](http://docs.jquery.com/Plugins/Validation/Validator/addClassRules#namerules)*创建*一个。 `class`

```
$.validator.addClassRules("GeneratedRule", {
    required: true
}); 
```

然后，当您创建新字段时，请确保它们每个都包含 a`class="GeneratedRule"`和一个唯一`name`的 ，当然。

```
<input type="text" name="Generated1" class="GeneratedRule" />
<input type="text" name="Generated2" class="GeneratedRule" /> 
```

这种方法非常简单，但我看不出有办法覆盖默认消息。

简单演示：http: [//jsfiddle.net/xCY4T/2/](http://jsfiddle.net/xCY4T/2/)**

# mysql - 使用 NULL 值进行左连接排序

> ID：15756616
> 
> 赞同：0
> 
> 时间：2013-04-02T05:15:36.173
> 
> 标签：mysql

我需要按公司 ID 对左连接进行排序，以便公司选择的类别首先出现。

我的类别表是

![在此处输入图像描述](https://i.stack.imgur.com/Q9GxW.jpg)

company_category 表是

![在此处输入图像描述](https://i.stack.imgur.com/yFspk.jpg)

预期结果应该是

![在此处输入图像描述](https://i.stack.imgur.com/ZGrX4.jpg)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:15:36.173

我认为下面的查询是最好的解决方案，而不是使用联合在顶部显示公司类别。

```
SELECT * FROM category c
LEFT JOIN company_category cc ON c.category_id=cc.category_id AND cc.company_id=1
ORDER BY cc.company_id DESC 
```

# css - 将搜索框插入标题图像

> ID：15756620
> 
> 赞同：1
> 
> 时间：2013-04-02T05:15:41.797
> 
> 标签：css, search, web

我希望将我的搜索栏插入/移动到我的标题图像中，类似于下面的示例。如果有人有时间告诉我如何做到这一点，将不胜感激。谢谢你的时间。这是我网站的链接[http://www.jobspark.ca/](http://www.jobspark.ca/)

克里斯

![在此处输入图像描述](https://i.stack.imgur.com/9rSMJ.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:19:15.330

您可以将背景图像保留在 body 标记中。设置不重复，使用背景大小为 100% 宽度。

```
 example:

    body{
           backgroud-image:url() no-repeat center;
           background-size: --;
         }
      HTML STRUCTURE:

 <div id="header">
        <div ="#"> 
           <h1></h1> //float:left
           <div id="menu"></div> //float:right;

         </div>

        <div ="search-box">
             <form>

             </form> //use margin and padding for keep it center;
        </div>

     </div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:39:23.600

只需在里面添加您的搜索框

```
<div id="logo" class="image">
    ...
    <h1>
      ...
    </h1>
    "search box code goes here"
</div> 
```

在搜索 div 中提供一个 id，并使用 CSS 填充来确定最终位置。

# objective-c - 实现上下文中缺少@end

> ID：15756624
> 
> 赞同：-3
> 
> 时间：2013-04-02T05:15:58.493
> 
> 标签：objective-c

我没有足够的声誉来发布图片.. 所以希望你能帮助我解决这个问题。在第三行说“@implementation viewcontroller”我的xcode告诉我这个“@end在实现上下文中丢失”提前谢谢！

```
@interface ViewController ()
@end

@implementation ViewController

- (void)viewDidLoad {
    mainInt = 0;
    randomMain = [NSTimer scheduledTimerWithTimeInterval:(1.0/1.0) target:self selector:@selector(randomMainvoid) userInfo:nil repeats:YES];
}

- (void)randomMainvoid {
    mainInt +=1;
    label.text = [NSString stringWithFormat:@"%d", mainInt];       
}    

- (IBAction)Start {
    [startButton setHidden:YES];
    timer = [NSTimer scheduledTimerWithTimeInterval:(0.0088) target:self selector:@selector(onTimer) userInfo:nil repeats:YES];
    pos = CGPointMake(5.0, 6.0);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:18:13.130

最后`@implementation ViewController`你需要`@end`

您的 .m 应如下所示：

```
@interface ViewController ()
@end

@implementation ViewController

- (void)viewDidLoad {
    mainInt = 0;
    randomMain = [NSTimer scheduledTimerWithTimeInterval:(1.0/1.0) target:self selector:@selector(randomMainvoid) userInfo:nil repeats:YES];
}

- (void)randomMainvoid {
    mainInt +=1;
    label.text = [NSString stringWithFormat:@"%d", mainInt];       
}    

- (IBAction)Start {
    [startButton setHidden:YES];
    timer = [NSTimer scheduledTimerWithTimeInterval:(0.0088) target:self selector:@selector(onTimer) userInfo:nil repeats:YES];
    pos = CGPointMake(5.0, 6.0);
}

@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:19:26.020

后

```
- (IBAction)Start {
    [startButton setHidden:YES];
    timer = [NSTimer scheduledTimerWithTimeInterval:(0.0088) target:self selector:@selector(onTimer) userInfo:nil repeats:YES];
    pos = CGPointMake(5.0, 6.0);
} 
```

添加`@end`

# android - 检查 textView 文本的 if 条件的结果

> ID：15756626
> 
> 赞同：1
> 
> 时间：2013-04-02T05:16:09.093
> 
> 标签：android, string, text

检查 textView 文本的 if 条件结果存在一些问题

这是更多解释的代码

时间.xml

```
<TextView
            android:id="@+id/tiMinutesView"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center"            
            android:text="--"
            android:textColor="#3134E8" /> 
```

TimesActivity.java

```
 TextView minView;                                
   minView = (TextView) v.findViewById(R.id.tiMinutesView);

    if (minView.getText().toString().trim() != "--") {

        Toast.makeText(TimesActivity.this,
                "OK",
                Toast.LENGTH_LONG).show();
    } else {
        Toast.makeText(TimesActivity.this,
                "NO", Toast.LENGTH_LONG)
                .show();
    } 
```

现在它应该返回false并显示NO，因为它实际上等于“--”，但它返回true并显示OK

问题是什么 ？？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:17:53.733

始终使用`equals()`方法进行`String` **价值**比较。

```
if (!minView.getText().toString().trim().equals("--")) {
....
} 
```

`==`用于比较对象引用。`equals()`是用于值比较的一种。

**PS：-** @ SO 这里有**无数**个问题，更详细地解释了这一点。请参考它们以获得更清晰的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T05:17:55.020

你在使用 Java 老兄，所以将相关行更改为：

```
 if (minView.getText().toString().trim().equals("--")) 
    {
    //write your code here.
}... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T05:18:06.460

始终使用字符串值/对象的 equals() 比较字符串。

```
if(!minView.getText().toString().trim().equals("--")){

}.... 
```

这将比较值，`minView.getText().toString().trim() != "--"`这将比较两个字符串对象

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-02T05:18:36.407

用这个

```
if (!minView.getText().toString().trim().equals("--") 
```

使用方法

```
if (minView.getText().toString().trim() != "--") 
```

# redis - Redis 排序集组合

> ID：15756629
> 
> 赞同：1
> 
> 时间：2013-04-02T05:16:13.723
> 
> 标签：redis

Redis 太棒了！

如果我有 2 个排序集，例如 - “set1 = key1:100, key2:200, key3:300”

另一个像“set2 = key1:1, key2:2, key3:3”

那么是否有可能得到这样的 - set3 = key1:100_1, key2:200_2, key3:300_3

我不想添加相同键的值或取相同键的最小值/最大值。是否有可能将这些值放在一起？我想为同一个键将这两个值放在一起。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T07:47:36.953

排序集中的分数必须是数值，因此不可能在交集/并集操作中返回分数的简单串联。

但是，如果您可以将每个集合的分数值绑定到给定范围，则可以使用 SUM 运算通过简单的算术将两个值编码为单个值。

例子：

```
# For s1, we assume the score is between 0 and 999
> zadd s1 100 key1 200 key2 300 key3
(integer) 3
# For s2, we assume the score is between 0 and 99
> zadd s2 1 key1 2 key2 3 key3
(integer) 3

# Get the intersection, dividing the s2 score by 100
> zinterstore s3 2 s1 s2 WEIGHTS 1 0.01
(integer) 3

# Get the result with scores
> zrange s3 0 -1 withscores
1) "key1"
2) "100.01000000000001"
3) "key2"
4) "200.02000000000001"
5) "key3"
6) "300.02999999999997" 
```

在结果分数中，整数部分包含来自 s1 的分数，小数部分包含来自 s2 的分数。

请注意分数是双浮点数。它有一些后果：

*   如果您仅操作整数（即 0.0299999... 实际上是 0.03），您可能必须正确舍入它

*   将两个数值合二为一意味着精度除以 2（仅 16 位到 8 位）。它可能适合也可能不适合您的需求。

# c# - 如何刷新 cookie 以反映用户更改电子邮件？

> ID：15756632
> 
> 赞同：1
> 
> 时间：2013-04-02T05:16:32.323
> 
> 标签：c#, vb.net, asp.net-mvc-4, forms-authentication, simplemembership

我正在使用 WebSecurity 和 SimpleMembershipProvider 来登录用户。

用户可以更改他们的电子邮件

```
Dim memberId As Integer = 1

Dim context As UsersContext = New UsersContext
Dim userProfile As UserProfile =
    context.UserProfiles.Where(Function(f) f.UserId = memberId).SingleOrDefault()
' Email before the change: "a@a.com"
userProfile.UserName = "b@b.com"
context.SaveChanges() 
```

但是，在此更新之后，HttpContext 仍将用户报告为他们的旧电子邮件。

```
' Name is "a@a.com" but should be "b@b.com"
HttpContext.User.Identity.Name 
```

起初我以为我可以将用户注销并重新登录

```
WebSecurity.Logout()
' but I don't have the user's password
WebSecurity.Login("b@b.com", "???") 
```

如何以某种方式刷新身份验证 cookie 以反映用户更改其登录详细信息？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:18:20.360

在这里。这是一种（丑陋的？）方法：

```
Dim newEmail As String = "b@b.com"

Dim ticket As FormsAuthenticationTicket =
    New FormsAuthenticationTicket(newEmail, False, FormsAuthentication.Timeout.Minutes)

Dim identity As IIdentity = New FormsIdentity(ticket)

HttpContext.Current.User = New RolePrincipal(identity)

FormsAuthentication.SetAuthCookie(newEmail, False) 
```

它工作正常，但它似乎有点难看。它迫使我的应用程序依赖`FormsAuthentication`（正确？）

@戴夫一个

您认为我应该使用此代码，但将其放入我自己的自定义`MemershipProvider`中吗（对吗？是`MembershipProvider`处理这个的吗？）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T23:28:58.233

要通过成员资格更改 cookie，您似乎坚持将用户注销并重新登录。

此时您面临的困境是***如何在没有用户密码的情况下登录用户***。

最好的前景似乎是在用户名更改期间询问用户的密码。这有一种合理的感觉，并用密码武装你。

# php - 可以在新窗口中打开新的 codeigniter 视图

> ID：15756634
> 
> 赞同：0
> 
> 时间：2013-04-02T05:16:40.710
> 
> 标签：php, codeigniter

我需要知道是否可以在新窗口中加载 codeigniter 视图？

我需要像这样将数据发送到视图

```
$this->load->view('pdfview', $data); 
```

但我希望这个视图在新窗口或标签中打开

你好

我需要知道是否可以在新窗口中加载 codeigniter 视图？

我需要像这样将数据发送到视图

```
$this->load->view('pdfview', $data); 
```

但我希望这个视图在新窗口或标签中打开

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:19:30.583

尝试使用锚标记加载页面，并将目标设置为“空白”，如

```
<a href="mydomain/controller/function" target="_blank">Goto Page</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:20:33.657

打开新窗口不是服务器端操作（这是 PHP） - 它是客户端。您应该只将目标添加到您的`<a>`标签中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T21:59:51.140

How are you calling your controller/view? Obviously from a link on your site.

On that link add a target="_blank" attribute.

```
Eg: <a href="pdf/view/12" target="_blank">View PDF</a> 
```

User clicks on it, it opens a new window.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T05:31:39.543

您不能使用服务器端语言 (PHP) 来控制客户端行为（强制使用新的浏览器窗口获取超链接）。

# google-maps-api-3 - 打开 div 上的 infbox 悬停在地图外

> ID：15756637
> 
> 赞同：0
> 
> 时间：2013-04-02T05:16:58.600
> 
> 标签：google-maps-api-3

将鼠标悬停在地图之外后，我想在 googlemap 之外显示信息框。在此代码中，mastercluster 和 infobox 工作正常，但仅在 div 外部显示时出现问题。

var pop = document.getElementById('example1');

```
 var locations = <?php echo json_encode($jsArray); ?>;
            var image = 'images/mapmarker.png';             
            var myLatlng = new google.maps.LatLng(locations[0][0], locations[0][1]);
            var myOptions = {
                zoom: 10,
                center: myLatlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                disableDoubleClickZoom: false,
                disableDefaultUI: true,
                visibleInfoWindow: null,
                zoomControlOptions: true,
                zoomControlOptions: {
                style: google.maps.ZoomControlStyle.LARGE
                }
            };
            var mcOptions = {styles: [{
                            opt_textColor: 'white',
                            textColor: 'white',
                            height:34,
                            url: image,
                            width:34
                            }],
                            description: ' tracks: click to show'
                        };

            var map = new google.maps.Map(document.getElementById("map"), myOptions);

            var markers = [];

            for(var i=0;i<locations.length;i++)
            {
                var latlng=new google.maps.LatLng(locations[i][0], locations[i][1]);
                var marker = new google.maps.Marker({
                    position: latlng,
                    map: map,
                    icon: image                     
                });
                boxText = document.createElement("div");
                infoboxOptions = {
                            content: boxText,
                            disableAutoPan: false,
                            maxWidth: 0,
                            pixelOffset: new google.maps.Size(18, -60),
                            zIndex: null,
                            boxStyle: {
                                opacity: 0.75,
                                width: "250px"
                            },

                            infoBoxClearance: new google.maps.Size(1, 1),
                            isHidden: false,
                            pane: "floatPane",
                            enableEventPropagation: false
                        };
                        markers.push(marker);

                        boxText.style.cssText = "border: 1px solid black; margin-top:3px; background:#333; color:#FFF; font-family:Arial; font-size:12px; padding: 3px; border-radius:6px; -webkit-border-radius:6px; -moz-border-radius:6px;";                         
                        boxText.innerHTML = "<b>Hotel Name</b>:&nbsp;"+locations[i][2] + "<br/><br/>" + "<b>Rating</b>:&nbsp;"+locations[i][3]+"<br/><br/>"+"<b>Price:</b>&nbsp;&#8364;&nbsp;"+locations[i][4];

                        markers[i].infobox = new InfoBox(infoboxOptions);

                        pop.onmouseout = generateTriggerCallback(marker[i], 'mouseout');
                        pop.onmouseover = generateTriggerCallback(marker[i], 'mouseover');      

                        $(".popup_slide").hover(function(){
                            $(this).addClass("resulthover");

                        }, 
                         function () {
                           $(this).removeClass("resulthover");
                         });

                        google.maps.event.addListener(marker, 'mouseover', (function(marker, i) {
                            return function() {
                                markers[i].infobox.open(map, this);                                 
                            }
                        })(marker, i));
                        google.maps.event.addListener(marker, 'mouseout', (function(marker, i) {
                            return function() {
                                markers[i].infobox.close(map, this);                                    
                            }
                        })(marker, i));
                    }
                    var markerCluster = new MarkerClusterer(map, markers, mcOptions);

                    function generateTriggerCallback(object, eventType) {
                    return function() {
                        google.maps.event.trigger(object, eventType);
                    };
                    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T11:31:10.487

最后我得到了解决方案，我的问题也解决了。我的问题是我有一组位置，我们必须在谷歌地图上显示该位置，同时它会在地图之外显示为结果。增强的功能悬停在结果地图位置之外，将显示在谷歌地图上。

```
var locations = <?php echo json_encode($jsArray); ?>;
            var foo2 = document.getElementById('foo2');
            var generateLink = document.getElementById('generateLink');
            var image = 'images/mapmarker.png'; 
            var image_hover = 'images/mapmarker_hover.png'; 
            var img29 = 'images/29cluster.png';
            var img34 = 'images/34cluster.png';
            var img47 = 'images/47cluster.png';
            var img56 = 'images/56cluster.png';             
            var clusterStyles = [
                                  {
                                    opt_textColor: 'white',
                                    textColor: 'white',
                                    url: img29,
                                    height: 29,
                                    width: 29
                                  },
                                 {
                                    opt_textColor: 'white',
                                    textColor: 'white',
                                    url: img34,
                                    height: 34,
                                    width: 34
                                  },
                                 {
                                    opt_textColor: 'white',
                                    textColor: 'white',
                                    url: img47,
                                    height: 47,
                                    width: 47
                                  },
                                  {
                                    opt_textColor: 'white',
                                    textColor: 'white',
                                    url: img56,
                                    height: 56,
                                    width: 56
                                  }
                                ];
            var visibleInfoWindow = null;               
            var myLatlng = new google.maps.LatLng(locations[0][0], locations[0][1]);
            var myOptions = {
                zoom: 8,
                center: myLatlng,
                mapTypeId: google.maps.MapTypeId.ROADMAP,
                disableDoubleClickZoom: false,
                disableDefaultUI: true,
                visibleInfoWindow: null,
                zoomControlOptions: true,
                zoomControlOptions: {
                style: google.maps.ZoomControlStyle.LARGE
                }
            };
            var mcOptions = { styles: clusterStyles,
                            zoomOnClick: true

                        };

            var map = new google.maps.Map(document.getElementById("map"), myOptions);               
            var markers = [];
            function generateTriggerCallback(object, eventType) {
                        return function() {
                            google.maps.event.trigger(object, eventType);
                        };
                    }

            function clearMarkers() {
            for (var n = 0, marker; marker =markers[n]; n++) {
              marker.setVisible(false);
            }
          }
            var div = foo2;
            clearMarkers();
            var example = [];
            for(var i=0;i<locations.length;i++)
            {
                var latlng=new google.maps.LatLng(locations[i][0], locations[i][1]);
                var marker = new google.maps.Marker({
                    position: latlng,
                    map: map,
                    icon: image

                });

                boxText = document.createElement("div");        
                infoboxOptions = {
                            content: boxText,
                            disableAutoPan: false,
                            maxWidth: 0,
                            pixelOffset: new google.maps.Size(16, -40),
                            zIndex: null,
                            boxStyle: {
                                opacity: 0.75,
                                width: "250px"
                            },                              
                            infoBoxClearance: new google.maps.Size(1, 1),
                            isHidden: false,
                            pane: "floatPane",
                            enableEventPropagation: false
                        };
                        markers.push(marker);
                        var rate = locations[i][3];
                        if(rate == 1)
                        {
                            var rateimg = "<img src='images/rating.png' alt=''/><img src='images/unactiverating.png' alt=''/><img src='images/unactiverating.png' alt=''/><img src='images/unactiverating.png' alt=''/><img src='images/unactiverating.png' alt=''/>";
                        }else if(rate == 2)
                        {
                            var rateimg = "<img src='images/rating.png' alt=''/><img src='images/rating.png' alt=''/><img src='images/unactiverating.png' alt=''/><img src='images/unactiverating.png' alt=''/><img src='images/unactiverating.png' alt=''/>";
                        }
                        else if(rate == 3)
                        {
                            var rateimg = "<img src='images/rating.png' alt=''/><img src='images/rating.png' alt=''/><img src='images/rating.png' alt=''/><img src='images/unactiverating.png' alt=''/><img src='images/unactiverating.png' alt=''/>";
                        }else if(rate == 4)
                        {
                            var rateimg = "<img src='images/rating.png' alt=''/><img src='images/rating.png' alt=''/><img src='images/rating.png' alt=''/><img src='images/rating.png' alt=''/><img src='images/unactiverating.png' alt=''/>";
                        }
                        else if(rate == 5)
                        {
                            var rateimg = "<img src='images/rating.png' alt=''/><img src='images/rating.png' alt=''/><img src='images/rating.png' alt=''/><img src='images/rating.png' alt=''/><img src='images/rating.png' alt=''/>";
                        }
                        //define the text and style for all infoboxes
                        boxText.style.cssText = "border: 1px solid black;background:#333; padding:3px;color:#FFF; font-family:Arial; font-size:12px; border-radius:6px; -webkit-border-radius:6px; -moz-border-radius:6px;";                        
                        boxText.innerHTML = "<div class='marker11'>&nbsp</div><b>Hotel Name</b>:&nbsp;"+locations[i][2] + "<br/>" + "<b>Rating</b>:&nbsp;"+rateimg+"<br/>"+"<b>Price:</b>&nbsp;&#8364;&nbsp;"+locations[i][4];
                         //Define the infobox
                        markers[i].infobox = new InfoBox(infoboxOptions);
                        $(".popup_slide").hover(function(){                             
                                $(this).addClass("resulthover");                            

                        }, 
                         function () {
                           $(this).removeClass("resulthover");
                         });
                        google.maps.event.addListener(marker, 'mouseover', (function(marker, i) {                               
                            return function() {
                                markers[i].infobox.open(map, this);
                                marker.setIcon(image_hover);

                            }
                        })(marker, i));
                        google.maps.event.addListener(marker, 'mouseout', (function(marker, i) {
                            return function() {
                                markers[i].infobox.close(map, this);
                                marker.setIcon(image);                                  
                            }
                        })(marker, i));                         
                        example[i] = document.getElementById('example' + i);                            
                        example[i].onmouseover = generateTriggerCallback(marker, 'mouseover');
                        example[i].onmouseout = generateTriggerCallback(marker, 'mouseout');    

                    }//end of for loop

                    var markerCluster = new MarkerClusterer(map, markers, mcOptions);
                    //globalMarker = markers.slice();   
                    google.maps.event.addListener(markerCluster, "mouseover", function (c) {
                      var totalcluster = c.getSize();
                      var centercluster =  c.getCenter();
                      var m = c.getMarkers();
                      var p = [];
                      for (var j = 0; j < m.length; j++ ){
                        p.push(m[j].getPosition());                             
                      }
                        //alert(p);

                    });
                    google.maps.event.addListener(markerCluster, "mouseout", function (c) {                      
                    }); 
```

# c# - 如何使用 InnoSetup 5.5.3 在 IIS 中托管我自己的项目？

> ID：15756639
> 
> 赞同：1
> 
> 时间：2013-04-02T05:17:14.413
> 
> 标签：c#, inno-setup

我使用 C# 创建了一个示例 Web 应用程序，我想使用 Inno setup 在 IIS 中托管该 Web 应用程序。该示例 Web 应用程序的输出是 .dll，我在谷歌中搜索我没有得到任何步骤在 IIS 中使用Innosetup，谁能告诉我使用 InnoSetup 在 IIS 中托管应用程序的步骤和过程。

# ruby-on-rails - 活动记录由于某种原因无法保存

> ID：15756641
> 
> 赞同：0
> 
> 时间：2013-04-02T05:17:15.520
> 
> 标签：ruby-on-rails

我有一个名为 assignment 的模型，它表示用户和多项选择测验应用程序中的问题之间的丰富连接。当用户回答问题时，响应会记录在 assignments 控制器中的以下更新方法中

```
    定义编辑
        @assignment = Assignment.find_by_id(params[:id])
        @user = @assignment.user
        @question = @assignment.question
        提出“用户#{@user}问题#{@question}作业#{@assignment}”
      结尾

    定义更新
        @assignment = 赋值.find(params[:id])
        @user = @assignment.user
        @assignment.update_attributes(:response => params[:assignment][:response])
        如果@assignment.save
          flash[:notice] = "您的回复已保存"
          redirect_to(:action => 'show', :id => @assignment.id , :user_id => @user.id)
        别的
          放@assignment.save
          提出“无法保存”
          渲染(user_assignment_path(@user, @assignment) , :html => {:method => :get})
        结尾
      结尾

```

我有一个在保存之前调用的等级，它会被调用。这是模型：

```

    类分配 ActiveRecord::Base
      属于_to：用户
      属于_to：问题
      attr_accessible :title, :body, :user_id, :question_id , :response
      before_save ：等级

      默认等级
        self.correct = (response == self.question.solution) 除非 response == nil
      结尾
    结尾

```

因此，当我第一次提交响应时，保存工作完美，并相应地重定向了我。之后，如果我尝试再次编辑问题并重新提交表单，则保存失败。

谁能想到可能发生这种情况的原因？

另外我知道第二次重定向有错误，所以如果有人能纠正我的用法，那将是一个额外的帮助

编辑这里是编辑erb，以防有人在这里发现错误。我还在上面的控制器中添加了编辑方法。

 ````
<div class="admin-display">
  <%if @admin%>
    <p>
      You may edit the user's response below or change the question to override whether the question is marked correct.
    </p>
  <%end%>
</div>
<div class="question body">
  <%= @question.question %>
</div>
<div class="answer-choices">
  <%=  params[:user_id] + " " + params[:id]  %>
  <ol type="A">
    <%=form_for(@assignment , :url => user_assignment_path(params[:user_id] , params[:id]) , :html => {:method => "put"},  :user_id => params[:user_id]) do |f|%>
      <%[@question.answerA, @question.answerB ,@question.answerC ,@question.answerD].each do |choice|%>
        <li>
          <%=  f.radio_button(:response, choice)%>
          <%= choice %>
        </li>
      <%end%>    
    </ol>
    <div class="form-buttons">
      <%= submit_tag("Submit Response") %>
    </div>
  <%end%>
</div> 
```

编辑 2 我刚刚在 rails 控制台中手动完成了这些步骤，没有任何问题，所以一定有一些奇怪的事情发生了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-05T08:34:34.597

这可能是由于您的grade() 回调方法返回一个错误，这将一起取消操作（如[文档](http://api.rubyonrails.org/classes/ActiveRecord/Callbacks.html#module-ActiveRecord%3a%3aCallbacks-label-Canceling+callbacks)中所述）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:30:41.193

希望这对你有用。

在**分配**模型中，将`correct`字段添加为`attr_accessible`。第一次`response`是 nil，它没有执行`before_save`方法中的语句，因此您的代码将是

```
class Assignment  ActiveRecord::Base
  belongs_to :user
  belongs_to :question
  attr_accessible :title, :body, :user_id, :question_id , :response, :correct
  before_save :grade

  def grade
    correct = (response == question.solution) unless response.nil?
  end
end 
```

和控制器动作可能是

```
def update
  @assignment = Assignment.find(params[:id])
  @user = @assignment.user
  @assignment.update_attributes(:response => params[:assignment][:response])
  if @assignment.valid?
    flash[:notice] = "Your response has been saved"
    redirect_to(:action => 'show', :id => @assignment.id , :user_id => @user.id)
  else
    render(user_assignment_path(@user, @assignment) , :html => {:method => :get})
  end
end 
````

# iphone - 如何检查 ASINetworkQueue 中多个请求的响应？

> ID：15756642
> 
> 赞同：0
> 
> 时间：2013-04-02T05:17:15.547
> 
> 标签：iphone, ios, objective-c, asihttprequest

我正在使用 ASINetworkQueue 一个接一个地向服务器发送多个请求。我有 4 个连续的服务器调用。

我想知道每当收到响应时，我想在队列选择器中处理它。我也使用实现了处理程序方法

```
requestDidFinishSelector 
```

我想知道如何分别获取每个请求的响应字符串？就像

```
[request responseString] 
```

正常的http请求？我该如何解决这个问题？`Thanks in advance.`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:13:02.650

已解决：在 github 本身中找到[的解决方案](https://gist.github.com/pokeb/150447)

```
- (void)requestFinished:(ASIHTTPRequest *)request
  {

       //print or manipulate response here

 } 
```

# asp.net - 将值从 Datatable 传递到 UserControl 属性

> ID：15756649
> 
> 赞同：0
> 
> 时间：2013-04-02T05:17:41.250
> 
> 标签：asp.net, vb.net

我是编程新手。我正在创建一个程序，它动态地将 UserControl 添加到 Gridview 模板中，并且我想将数据表中的值传递给 UserControl 的属性。Gridview 中的 TemplateField 已经预加载了 1 个用户控件，如果我单击一个按钮，这将添加一个带有编号的新 UserControl。

这是 FormLoad 事件页面中的代码。

```
 Dim dtSESRatings As New DataTable

        dtSESRatings.Columns.Add("IncrementNumber")
        dtSESRatings.Rows.Add("1")
        ViewState("dtSESRatings") = dtSESRatings

        gvSesRating.DataSource = dtSESRatings
        gvSesRating.DataBind() 
```

我想将该行添加到用户控件中的编号标签，这是在 SESRatings.ascx 上设置的 IncrementNumber 属性。这是asp代码：

```
<asp:GridView ID="gvSesRating" runat="server" Width="100%" ShowHeader="false" GridLines="None"
                                        AutoGenerateColumns="False">
                                        <Columns>
                                            <asp:TemplateField>
                                                <ItemTemplate>
                                                    <ses:SESRatings runat="server" ID="ses1" IncrementNumber="1" />
                                                </ItemTemplate>
                                            </asp:TemplateField>
                                        </Columns>
                                    </asp:GridView> 
```

在 FormLoad 之后，单击“添加新评级”按钮后，应该在 gridview 中创建一个新的用户控件，代码在这里：

```
Protected Sub btnAddRating_Click(ByVal sender As Object, ByVal e As EventArgs) Handles btnAddRating.Click
    Dim dt As DataTable = ViewState("dtSESRatings")
    Dim dtCnt As Integer = dt.Rows.Count
    dtCnt += 1
    dt.Rows.Add(dtCnt)
    ViewState("dtSESRatings") = dt

    gvSesRating.DataSource = dt
    gvSesRating.DataBind()

    dt = Nothing
End Sub 
```

我希望将添加到 GridView 中的用户控件将获取 dtCnt 并将其传递给用户控件的 IncrementNumber 属性。我怎样才能做到这一点？请帮忙。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:45:38.793

您必须在 gridview 控件中使用 Eval 标记：

```
<ses:SESRatings runat="server" ID="ses1" IncrementNumber='<%# Eval("IncrementNumber") %>' /> 
```

# android - 如何在图像视图中显示来自 url 的图像？

> ID：15756654
> 
> 赞同：0
> 
> 时间：2013-04-02T05:17:58.053
> 
> 标签：android, expandablelistview

我想显示来自 url 的图像。我已经解析了该图像并存储在位图中。在我的测试程序中，它与 .

```
imageview.setImageBitmap(bitmap); 
```

但是，当我在可扩展列表视图中执行此操作时，它什么也没有显示。供我写作时参考。

```
imageview.setBackgroundResource(R.drawable.home); 
```

它工作正常，但我想动态显示它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:46:03.230

您可以直接将图像加载到图像视图中，而无需通过此代码保存

```
imageView.setImageDrawable(grabImageFromUrl("URL PATH")); 
```

或者保存后显示图像。

```
imageView.setBackgroundDrawable(Drawable); 
```

您可以将位图转换为可绘制的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:56:31.940

尝试这个 -

```
Bitmap bm= BitmapFactory.decodeFile(path); 
imageView.setImageBitmap(bm); 
```

# javascript - 如何通过jquery中的.on函数在多个选择器上附加不同的事件？

> ID：15756663
> 
> 赞同：1
> 
> 时间：2013-04-02T05:18:33.637
> 
> 标签：javascript, jquery

我的页面上有以下两个元素：

```
<input type="text" id="textfield"/>  
<input type="button" id="button" value="CLICK"/> 
```

在我的 Javascript 代码中，我有以下内容：

```
$(document).ready(function() {  
     $("#button,#textfield").on("click change",function() {
           // This won't work because I don't need click function 
           // to be worked on the text field 
     });
}); 
```

我需要的是在按钮上工作的单击功能，并且只需要在文本字段上工作的更改功能。我该怎么做呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T05:22:11.330

如果你想为不同对象上的不同事件调用相同的代码，你可以将事件处理代码放入一个通用函数中，然后在每个事件注册中指定确切的条件：

```
$(document).ready(function(){  
    function myEventHandler(e) {
        // your code here
    }

    $("#button").on("click", myEventHandler);
    $("#textfield").on("change", myEventHandler);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:29:14.393

如果您只想要一个 .on 功能，请尝试像这样使用

```
$("#button,#textfield").on("click change",function(){
 if ($(this).attr('type') == "text"){
       alert("Do your change function");
 }
 else if ($(this).attr('type') == "button"){
    alert("Do your click function");
 }
}); 
```

[看演示](http://jsfiddle.net/Dineshkani/9Fm2k/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:22:01.760

将您的代码拆分为：

```
$(document).ready(function(){  
     $("#button").on("click",function(){

     });
     $("#textfield").on("change",function(){

     });
}); 
```

你为什么把它们放在一起？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T05:22:39.197

尝试：

```
$(document).ready(function(){  
     $("#textfield").on("change",function(e){
         my_function(e);
     });

     $("#button").on("click",function(e){
         my_function(e);
     });

     function my_function(e){
        // e = event...
        // your actions...
     }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-02T05:22:51.063

分为两个功能：

```
 $("#button").on("click change",function(){
     // Handle button
 });

 $("#textfield").on("change",function(){
     // Handle Textfield
 }); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-04-02T05:24:42.133

分别分配它们：

```
$('#button').click(function(){
    //button code here
});

$('#textfield').change(function(){
    // text field code here
}); 
```

如果您希望他们做同样的事情，请创建一个单独的函数：

```
function doSomething() {
    // text field and button code here
} 
```

然后引用该函数：

```
.click(doSomething);
...
.change(doSomething); 
```

另外，我应该告诉您，“更改”不会像您对文本字段的想法那样做。它不会在键入时触发，只有在更新文本字段后“模糊”文本字段时才会触发。它更多地用于复选框和那种性质的东西。我会使用[.keyup()](http://api.jquery.com/keyup/)

# mysql - 如何在mysql中找出当前时间和时间戳的秒、小时、日格式的时间差

> ID：15756664
> 
> 赞同：0
> 
> 时间：2013-04-02T05:18:34.120
> 
> 标签：mysql, sql, timestamp

我的表中有一个时间戳值，它表示生成记录的时间。

我想找出使用​​ MySQL 生成记录之前的秒数、小时数、天数。换句话说，我们如何从 MySQL 中的当前时间和时间戳值中找出以秒、小时、日格式表示的时间差异？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:45:03.720

试试这个

```
 SELECT TIMESTAMPDIFF (SECOND, CURDATE(), your_timestamp_field) from your_table; 
```

有关更多信息，请参阅[日期和时间函数](http://dev.mysql.com/doc/refman/5.1/de/date-and-time-functions.html)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T05:58:26.693

```
> SELECT A.CALLSIGN,TO_CHAR(A.TIMEOFMSGRCVD ,'YYYYMMDDHH24MISS')
> time_tmo,TO_CHAR(b.TIMEOFMSGRCVD ,'YYYYMMDDHH24MISS') time_arrival,
> floor(((b.TIMEOFMSGRCVD-a.TIMEOFMSGRCVD)*24*60*60)/3600)
>            HOURS,
>            floor((((b.TIMEOFMSGRCVD-a.TIMEOFMSGRCVD)*24*60*60) -
>            floor(((b.TIMEOFMSGRCVD-a.TIMEOFMSGRCVD)*24*60*60)/3600)*3600)/60)
>            MINUTES,
>            round((((b.TIMEOFMSGRCVD-a.TIMEOFMSGRCVD)*24*60*60) -
>            floor(((b.TIMEOFMSGRCVD-a.TIMEOFMSGRCVD)*24*60*60)/3600)*3600 -
>            (floor((((b.TIMEOFMSGRCVD-a.TIMEOFMSGRCVD)*24*60*60) -
>            floor(((b.TIMEOFMSGRCVD-a.TIMEOFMSGRCVD)*24*60*60)/3600)*3600)/60)*60)
> ))
>           SECONDS    FROM (SELECT * FROM ATC.ATCMSG WHERE FLIGHTDATE=TO_CHAR(SYSDATE-1,'MMDDYY') AND EVENTTYPE='DES') a, (SELECT
> * FROM ATC.ATCMSG WHERE FLIGHTDATE=TO_CHAR(SYSDATE-1,'MMDDYY') AND EVENTTYPE='ARR') b WHERE A.CALLSIGN=B.CALLSIGN ORDER BY 4,5,6; 
```

# android - 带有多个闹钟的 Android 闹钟

> ID：15756676
> 
> 赞同：3
> 
> 时间：2013-04-02T05:19:38.437
> 
> 标签：android, alarmmanager, android-alarms

我想创建一个带有多个闹钟的闹钟。我想知道如何使用数据库创建它并启动服务。建议我一些链接或一些我可以找到有用的教程。

现在，当有人设置警报时，我正在使用 Pending Intent。运行多个待处理的意图是否是可行的解决方案？如果我想有重复警报的功能怎么办。

我们怎样才能设计出这样的闹钟呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:37:12.967

StackOverflow 上有很多类似的问题：

[Android 设置多个闹钟](https://stackoverflow.com/questions/12785702/android-set-multiple-alarms)

[如何在android中一次设置多个闹钟？](https://stackoverflow.com/questions/7252623/how-to-set-more-than-one-alarms-at-a-time-in-android)

[多个警报 SQLite](https://stackoverflow.com/questions/8317058/multiple-alarms-sqlite)

都有很好的答案，请仔细阅读并在这里问我们一个更准确的问题

谢谢你

# java - 从字符串创建数组并删除格式

> ID：15756679
> 
> 赞同：-7
> 
> 时间：2013-04-02T05:19:56.490
> 
> 标签：java, json

```
[{"month":"1_month","title":"one","tasks":[{"task_title":"1"}]}] 
```

你能帮我从这个字符串中检索数组元素吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:45:58.583

那是[JSON](http://en.wikipedia.org/wiki/JSON)格式的数据。您可以使用许多不同的 JSON 解析器轻松解释该格式的数据。这里有一些可供选择：

*   [org.json](http://www.json.org/java/index.html) -- 就这么简单
*   [杰克逊](http://jackson.codehaus.org/)——重得多
*   [gson](https://code.google.com/p/google-gson/) -- Google 自己的 JSON 库
*   [jsonification——](https://github.com/sigpwned/jsonification)完全公开，这是我的

您应该能够在这些库中的任何一个上找到好的操作方法。例如，如果您从上面使用 Jsonification，您只需使用以下内容：

```
JsonArray  os=Json.parse("[{\"month\":\"1_month\",\"title\":\"one\",\"tasks\":[{\"task_title\":\"1\"}]}]").asArray();
JsonObject o=os.get(0).asObject();
System.out.println(o.get("month").asString().stringVal()); 
```

`"1_month"`...这将从第一个元素中提取值。

# android - 使用 GCM 服务的 Android 设备没有通知声音

> ID：15756680
> 
> 赞同：1
> 
> 时间：2013-04-02T05:20:00.523
> 
> 标签：android, mono, notifications, google-cloud-messaging

我正在通过 GCM 服务向 android 设备发送通知。向客户端传递消息不是问题，因为在电话上收到通知时没有播放声音，这是问题所在。

我在客户端（mono android）上使用以下代码来建立通知请求

```
void createNotification(string title, string desc)
     {
       //Create notification
       var notificationManager = GetSystemService(Context.NotificationService) as NotificationManager;

    //Create an intent to show ui
    var uiIntent = new Intent(this, typeof(Main));

    //Create the notification
    var notification = new Notification(Android.Resource.Drawable.SymActionEmail, title);

    //Auto cancel will remove the notification once the user touches it
    notification.Flags = NotificationFlags.AutoCancel;

    //Set the notification info
    //we use the pending intent, passing our ui intent over which will get called
    //when the notification is tapped.
    notification.SetLatestEventInfo(this, title, desc, PendingIntent.GetActivity(this, 0, uiIntent, 0));

    //Show the notification
    notificationManager.Notify(1, notification);
} 
```

在这里我可以在哪里放置要播放的通知声音的详细信息？我已经尝试过 Notification.Sound 成员，但它要求我没有参考的 uri。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:10:04.390

如果您想播放自定义通知声音，请添加此项

```
 notification.sound = Uri.parse("android.resource://" + context.getPackageName() + "your_sound_file_name.mp3"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T21:16:01.210

在函数中添加这行代码激活默认通知声音。

```
notification.Defaults = NotificationDefaults.Sound; 
```

# apache - 刚刚修改此代码以重写而不是将“通配符”子域重定向到域的查询字符串

> ID：15756682
> 
> 赞同：0
> 
> 时间：2013-04-02T05:20:26.360
> 
> 标签：apache, .htaccess, mod-rewrite, url-rewriting, rewrite

```
RewriteCond %{HTTP_HOST} !^www\. [NC]
RewriteCond %{HTTP_HOST} !^$
RewriteRule ^(.*) http://www.%{HTTP_HOST}/$1 [R,NE]

RewriteCond %{HTTP_HOST} !^www\.domain\.com
RewriteCond %{REQUEST_URI} ^/([a-z0-9-_]+)\.php$
RewriteCond %{HTTP_HOST} ^www\.([a-z0-9-]+)\.domain\.com
RewriteRule ^(.+) http://www.domain.com/site.php?domain=%1&file=$1 [QSA] 
```

首先，我已将所有裸子域和域重定向到它们自己的顶级域。这就是问题所在，我尝试将所有通配符子域名重写为主域的查询字符串，但它们是重定向而不是重写。

例如*www.test.domain.com*重定向到*www.domain.com/site.php?domain=test&file=index.php*而不是写它。

现在，如何修改此代码以使这些子域重写为主域的查询字符串？有可能的？也许它有一个预定的标志！或任何东西..还有其他改进建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:25:56.327

发生这种情况是因为当规则的目标以 开头时`http://some-hostname/`，重定向是隐式的，这意味着您*不需要*该`R`标志来重定向，它会始终重定向。

> 现在，如何修改此代码以使这些子域重写为主域的查询字符串？有可能的？

这取决于，如果子域和主域的文档根目录完全相同，只需删除协议+主机名，因此：

```
RewriteRule ^(.+) http://www.example.com/site.php?domain=%1&file=$1 [QSA] 
```

到：

```
RewriteRule ^(.+) /site.php?domain=%1&file=$1 [QSA] 
```

但前提是子域和主域都在同一个地方。否则，您将不得不使用 mod_proxy 并使用`P`标志：

```
RewriteRule ^(.+) http://www.example.com/site.php?domain=%1&file=$1 [QSA,P,L] 
```

# php - cakephp获取元素值js助手

> ID：15756689
> 
> 赞同：0
> 
> 时间：2013-04-02T05:20:52.577
> 
> 标签：php, jquery, cakephp, helper

我是 CakePHP 的初学者并尝试搜索这个问题，但没有任何黄金。我有一个选择按钮，当用户选择一个选项时，我必须触发一个事件并将所选值传递给控制器​​的操作。代码如下：

* * *

```
<?php
//I only need a select button why to bother of creating form
echo $this->Form->input('district',array('label'=>'labelhere','id'=>'idhere'));

//script handler for select option
$this->Js->get('#idhere');
$this->Js->event(
        'change',
        $this->Js->request(
            array('action' => 'listing',<the selected value of #idhere here>),
            array('async' => true,
                'method'=>'POST',
                'update' => '#HFNames')
        )
    );

?>
<div id="HFNames">
Div to include ajax returns.
</div> 
```

确切地说，Jquery 的 $('selector').value(); 的 CakePHP 等价物是什么？

这是生成的 Html 代码：

```
<html>
<div class="input select"><label for="idhere">labelhere</label><select  name="data[district]" id="idhere">
<option value="01">Bhojpur</option>
<option value="02">Dhankuta</option>
<option value="03">Ilam</option>
<option value="04">Jhapa</option>
<option value="05">Khotang</option>
<option value="06">Morang</option>
<option value="07">Okhaldhunga</option>
<option value="08">Panchthar</option>
<option value="09">Sankhuwasabha</option>
<option value="10">Saptari</option>
<option value="11">Siraha</option>
</select></div>
</html> 
```

* * *

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:44:31.570

尝试这个

```
<?php
//I only need a select button why to bother of creating form
echo $this->Form->input('district',array('label'=>'labelhere','id'=>'idhere'));

//script handler for select option
$this->Js->get('#idhere');
$this->Js->event(
        'change',
        $this->Js->request(
            array('action' => 'listing'),
            array('async' => true,
                'method'=>'POST',
                'update' => '#HFNames',
                'data'   => '$("selector").value()')
        )
    );

?>
<div id="HFNames">
Div to include ajax returns.
</div> 
```

抽出时间阅读这篇文章：[带蛋糕的动态网络](http://www.willis-owen.co.uk/2011/11/dynamic-select-box-with-cakephp-2-0/)

# sencha-touch-2 - 触发图像点击事件时，如何将图像保存到手机内存（例如 SD 卡或本地硬盘驱动器）？

> ID：15756690
> 
> 赞同：4
> 
> 时间：2013-04-02T05:20:54.110
> 
> 标签：sencha-touch-2, sencha-architect

我有一张使用 Sencha Architect 2 在图像视图的帮助下显示的图像。我能够在图像上获得一个点击事件。但是我不知道点击图像时如何将图像保存到手机。我对此进行了 Google 搜索，但找不到正确的文档或示例。

谁能帮助我。

这是我正在尝试的代码

```
tap: function(img, e, options) {
        var overlay = Ext.Viewport.add({
            xtype: 'panel',
            modal : true,
            hideOnMaskTap : true,
            hidden : true,
            width : 100,
            height: 40,
            items :
            [
               {
                 xtype:'button',
                 text:'Download'
               }
            ],
        });
        overlay.showBy(img);
    } 
```

当我单击下载按钮时，图像应保存到 SD 卡（手机内存）或本地硬盘驱动器。

有人能帮我吗 ？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T11:51:29.750

**要获取图像名称：**

我猜你正在添加带有 xtype img 的图像？如果是这样，图像 src 是 img.src

否则，您将需要添加以下命令来查看对象包含的内容。

```
console.dir(img); 
```

**保存图像：**

如果源是 base64，您将能够将图像保存到本地存储。JavaScript 不会写入 SD 卡等。除此之外，您可以缓存图像。

如果您使用的是 PhoneGap，这将是可能的。

# c# - 在 Winforms C# 中同时触发两个 Textchanged 事件

> ID：15756691
> 
> 赞同：0
> 
> 时间：2013-04-02T05:21:02.203
> 
> 标签：c#, winforms, events, textchanged

当我输入第一个文本框时，它应该运行一个出现在第二个文本框中的转换，当我输入第二个文本框时，它会出现在第一个文本框中。但是，当我输入第一个 textchanged 事件时，它会触发第二个事件，这会破坏第一个事件的输入，反之亦然。有没有办法可以在突出显示时禁用触发 textchanged 事件？

```
public void dB10_TextChanged(object sender, EventArgs e)
    {
        TextBox dB10 = sender as TextBox;
        double dBV;
        int i = dB10.Text.Trim().Length;

        if (i > 0)
        {
            dBV = Convert.ToDouble(dB10.Text);
        }
        else
            return;

       UnitConverter dBConverter = new UnitConverter();

       // Controls for if various radiobuttons were clicked
        if (dBVRadio.Checked == true)
        {
            dBV = dBConverter.dBVToVolts(dBV);
            voltage.Text = dBV.ToString(); 
         }

        else if (dBuRadio.Checked == true)
        {
            dBV = dBConverter.dBuToVolts(dBV);
            voltage.Text = dBV.ToString();
        } 
    }

   public void voltage_TextChanged(object sender, EventArgs e)
    {
        TextBox voltage = sender as TextBox; //V >> dB10 (dBV/dBu)

        int i = voltage.Text.Trim().Length;
        double volts;

        if (i > 0)
        {
            volts = Convert.ToDouble(voltage.Text);
        }
        else
            return;

        UnitConverter dBConverter = new UnitConverter();

            if (dBVRadio.Checked == true)
            {
                dBuRadio.Checked = false;

                volts = dBConverter.voltsTodBV(volts);
                dB10.Text = volts.ToString(); 
            }

            else if (dBuRadio.Checked == true)
            {
                volts = dBConverter.voltsTodBu(volts);
                dB10.Text = volts.ToString();
            }
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:29:32.563

您可以只使用一个`bool`变量：

```
bool escape = false;

public void dB10_TextChanged(object sender, EventArgs e)
{
    if(escape)
        return;

    escape = true;
    // your code
    escape = false;
}

public void voltage_TextChanged(object sender, EventArgs e)
{
    if(escape)
        return;

    escape = true;
    // your code
    escape = false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:26:25.040

您可以删除另一个文本框的处理程序，然后添加它

```
public void dB10_TextChanged(object sender, EventArgs e)
{
    voltage.TextChanged-= voltage_TextChanged;
    TextBox dB10 = sender as TextBox;
    double dBV;
    int i = dB10.Text.Trim().Length;

    if (i > 0)
    {
        dBV = Convert.ToDouble(dB10.Text);
    }
    else
        return;

   UnitConverter dBConverter = new UnitConverter();

   // Controls for if various radiobuttons were clicked
    if (dBVRadio.Checked == true)
    {
        dBV = dBConverter.dBVToVolts(dBV);

     }

    else if (dBuRadio.Checked == true)
    {
        dBV = dBConverter.dBuToVolts(dBV);

    } 
   voltage.Text = dBV.ToString();
   voltage.TextChanged+= voltage_TextChanged;

} 
```

# tumblr - 为什么无限滚动不起作用？

> ID：15756698
> 
> 赞同：2
> 
> 时间：2013-04-02T05:21:24.607
> 
> 标签：tumblr

主题代码有问题吗？这里是：[http](http://pastebin.com/raw.php?i=f0AQb9vs) ://pastebin.com/raw.php?i=f0AQb9vs 谢谢 :)

# c# - 将 ascx.cs 文件添加到生产 Web 应用程序

> ID：15756699
> 
> 赞同：1
> 
> 时间：2013-04-02T05:21:25.710
> 
> 标签：c#, .net, user-controls

我们的一位客户已将我们的 Web 应用程序安装到生产环境中。

我们需要对其中一个 aspx 控件进行非常快速的修补。我尝试将 ascx 和 ascx.cs 源文件放到目录中，不出所料，我得到了这个错误：

异常类型 - HttpParseException - 基类包含字段 'foobar'，但其类型 (UserControls_Controls_FOO) 与控件类型 (ASP.usercontrols_controls_foo_ascx) 不兼容。

是的，这种方法从来都不是一个好主意，但是我可以对控件做些什么来让它在站点中运行而不是编译到 DLL 中的版本？

此时不可以进行全新安装。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:30:51.540

不，您需要将其放入已编译的 DLL 并重新部署，然后您才能看到补丁正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T22:30:39.663

如果您只更改了 ascx 文件，则必须只更新它。但是如果您更新了 ascx.cs，您必须发布项目并将旧的 bin 目录替换为新的。

您也可以将站点转换为一组动态编译的页面，但现在这是硬核的旧方法和坏主意。

# php - 无法在php中转发页面

> ID：15756702
> 
> 赞同：0
> 
> 时间：2013-04-02T05:21:51.467
> 
> 标签：php

我有一个 php 页面。当用户单击编辑按钮时，我的所有其他字段数据都将显示在相应的文本框中，并且如果他提交表单，我的数据也会更新。但我的问题是它没有转发到我尊敬的页面。

我这样表示它是`header('Location: /profile.php');`为了在我的个人资料页面中转发它可能是什么原因？

我的完整代码：

```
 <?php
                    include '../../../include/connection.php';
                    $idd =$_REQUEST['id'];
                    $resultt = mysql_query("SELECT * FROM budget  WHERE budget_id = '$idd'");
                    $test = mysql_fetch_array($resultt);
                     if (!$resultt)
                        {
                            die("Error:<font color='red'> Data not found..</font>");
                        }
                    $budget_id=$test['budget_id'];
                    $heads_id=$test['heads_id'];
                    $amount= $test['amount'];
                    $from_date=$test['from_date'];
                    $to_date= $test['to_date'];

                    if (isset($_POST['submit'])) {
                        $headsid=$_POST['headsid'] ;
                        $amount= $_POST['amount'] ;
                        $todate=$_POST['todate'] ;
                        $frmdate= $_POST['frmdate'] ;
                        mysql_query("UPDATE budget SET heads_id ='$headsid',amount ='$amount',from_date ='$frmdate' ,to_date ='$todate',updater_id ='$uid',updated_date=NOW()  WHERE budget_id = '$idd'")
                                or die(mysql_error());
                        header('Location: /profile.php');// PROBLEM HERE UNABLE TO FORWARD TO THE PAGE
                    }
                    ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:22:58.557

剥离或删除反斜杠。

```
 header("Location: http://example.com/path/path/profile.php");
 exit; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:23:33.840

```
header('Location: profile.php');
die; 
```

# postgresql - 在 postgresql 中的两个日期之间计算

> ID：15756703
> 
> 赞同：-1
> 
> 时间：2013-04-02T05:21:55.490
> 
> 标签：postgresql

我想在两个日期之间进行计算。

```
create table greatestdate(name varchar(20),city varchar(20),current_dates varchar(12),previous_date varchar(12));// create table

insert into greatestdate values('samuel','newyork','02-04-2013','01-01-2013'); //insert values

select * from greatestdate where (current_dates -previous_date)> 2 months as result; 
```

但是我收到语法错误。请任何人建议我。

我试过这段代码，

```
select * from greatestdates where (now() -  previous_date) < interval '2 month'; 
```

收到错误消息，

错误：运算符不存在：整数 < 间隔第 1 行：...atestdates where (current_dates - previous_date) < interval... ^ 提示：没有运算符与给定的名称和参数类型匹配。您可能需要添加显式类型转换。

我正在使用 postgresql 9.2 版本，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:26:19.003

完整的错误是：

```
regress=> select * from greatestdate where (current_dates -previous_date)> 2 months as result;
ERROR:  syntax error at or near "months"
LINE 1: ...atestdate where (current_dates -previous_date)> 2 months as ...
                                                             ^ 
```

问题是你写了：

```
2 months 
```

你应该在哪里写：

```
INTERVAL '2' MONTH 
```

或者：

```
CAST('2 months' AS interval) 
```

请参阅用户手册中的间隔语法。

一旦你解决了这个问题，你会发现另一个问题 - 你正在尝试将`as`别名应用于`WHERE`子句。这很荒谬。完全删除`as result`。

这将揭示第三个问题：您正在尝试减去两`varchar`列。这没有意义，也不会奏效。修复要使用的架构`date`，`timestamp without time zone`或`timestamp with time zone`用于日期字段，而不是将它们存储为`varchar`. 一旦您的表定义被修复，该语句最终应该可以工作。将日期存储为`varchar`永远不是一个好主意。

以后请在所有问题中显示您的 PostgreSQL 版本和错误消息的确切文本。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T11:41:57.057

在@Craig 进行广泛的错误跟踪之后，最后一个错误，

```
ERROR: operator does not exist: integer < interval LINE 1: 
...atestdates where (current_dates - previous_date) < interval... 
^ HINT: No operator matches the given name and argument type(s). 
You might need to add explicit type casts. 
```

发生是因为日期类型算术返回整数，而不是间隔。为了避免这种情况：

```
select *
from greatestdates
where current_dates - interval '2 month' > previous_date; 
```

# xaml - 简单的用户控件数据绑定

> ID：15756712
> 
> 赞同：0
> 
> 时间：2013-04-02T05:22:43.970
> 
> 标签：xaml, data-binding, dependency-properties

我一直在尝试使用dependencyproperty 创建一个简单的用户控件并将其绑定，但它似乎不起作用，不知道为什么。我将直接深入代码，请忽略控件没有意义的事实，这只是为了说明目的（如果重要的话，用 WP8 编写）。

1.  我的简单用户控件，它基本上是一条带有属性的线来关闭或打开它。

    ```
    <Grid x:Name="LayoutRoot" Background="Transparent">
    <Line Height="105" Width="105" X2="100" Y2="100" Visibility="{Binding LineVisible}" Stroke="#FFFC1515" StrokeThickness="5"/>
    </Grid>

    public partial class SimpleUserControl : UserControl
    {
        public SimpleUserControl()
        {
            InitializeComponent();
            DataContext = this;
        }

        public static readonly DependencyProperty LineVisibleProperty = DependencyProperty.Register("LineVisible", typeof(bool), typeof(SimpleUserControl), new PropertyMetadata(new PropertyChangedCallback(OnLineVisibleChanged)));
        public bool LineVisible
        {
            get { return (bool)GetValue(LineVisibleProperty); }
            set { SetValue(LineVisibleProperty, value); }
        }
        private static void OnLineVisibleChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
        {
            bool newvalue = (bool)e.NewValue;
            Visibility vis = newvalue ? Visibility.Visible : Visibility.Collapsed;
            (d as SimpleUserControl).Visibility = vis;
        }
    } 
    ```

2.  测试应用

    ```
    <Grid x:Name="ContentPanel" Grid.Row="1" Margin="12,0,12,0">
        <uc:SimpleUserControl LineVisible="{Binding class1.Vis}"/>
    </Grid>

    public partial class MainPage : PhoneApplicationPage
    {
        public Class1 class1 { get; set; }
        public MainPage()
        {
            InitializeComponent();
            DataContext = this;
        }
        private void PhoneApplicationPage_Loaded_1(object sender, RoutedEventArgs e)
        {
            class1 = new Class1() { Vis = false };
        }
    } 
    ```

3.  绑定的 class1

    ```
    public class Class1 : INotifyPropertyChanged
    {
        private bool _vis;
        public bool Vis
        {
            get { return _vis; }
            set
            {
                _vis = value;
                if (PropertyChanged != null) PropertyChanged(this, new PropertyChangedEventArgs("Vis"));
            }
        }
        public event PropertyChangedEventHandler PropertyChanged;
        protected void OnPropertyChanged(string name)
        {
            PropertyChangedEventHandler handler = PropertyChanged;
            if (handler != null)
            {
                handler(this, new PropertyChangedEventArgs(name));
            }
        }
    } 
    ```

但是，如果它像下面那样明确设置，它似乎不起作用。

```
<uc:SimpleUserControl LineVisible="False"/> 
```

我确定这很简单，但我没有看到它。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T13:00:23.207

问题是我在 UserControl 中设置了 DataContext = this，当在 testapp 中绑定到 Vis 时，它会覆盖并在 UserControl 中搜索 Vis（当然那里不存在）。我确实在调试输出窗口中看到了绑定错误，这证实了这一点。解决方案是将 UserControl 的 LayoutRoot 设置为此，如我之前发布的链接中所述。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T13:37:26.350

WPF 控件的`Visibility`属性不使用`bool`值，它需要`Visibility` [enum](http://msdn.microsoft.com/en-us/library/system.windows.uielement.visibility%28v=vs.95%29.aspx)。因此，您有两种选择：

1.  将 LineVisibiltyProperty 更改为`Visibility`而不是 bool。
2.  使用转换器绑定`bool`并转换为`Visibility`.

我建议使用第二个选项，因为我认为这是更好的解决方案。

[这](http://wpftutorial.net/ValueConverters.html)可能会有所帮助。

# networking - TCP序列号从何而来？

> ID：15756714
> 
> 赞同：-1
> 
> 时间：2013-04-02T05:22:53.257
> 
> 标签：networking

我想知道当我在 Wirshark 上做一些例子时，TCP 序列号来自哪里

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:26:10.880

初始序列号在握手时随机生成，并且对于发送的数据包，该编号相应地递增。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-02T05:26:52.570

我不确定，但可能来自系统包含 OSI 模型的堆栈实现？？？

[http://packetlife.net/blog/2010/jun/7/understanding-tcp-sequence-acknowledgment-numbers/](http://packetlife.net/blog/2010/jun/7/understanding-tcp-sequence-acknowledgment-numbers/)

# javascript - 哪一个更有效维护：JavaScript 函数引用或布尔 + IF 条件？

> ID：15756718
> 
> 赞同：1
> 
> 时间：2013-04-02T05:23:11.650
> 
> 标签：javascript, node.js, function, reference

想象一个任务，其中有一组具有`type`属性的资源。基于此`type`，需要执行不同的功能。实现这一点的一种方法是通过多个 if/else 或 switch/case 条件。

```
// at run time (run many times)
if (resources[ix].type == 'TYPE_ONE') {
    runFuctionOne();
}
else{
    runFuctionTwo();
} 
```

另一种方法是维护一个更多的属性，例如`execute`将分配一个满足资源的`type`. 那么你就不需要 if/else 条件并且可以直接执行它的功能，比如：

```
// at assign time (run once)
if (resources[ix].type == 'TYPE_ONE') {
    resources[ix].execute = runFunctionOne;
}
else{
    resources[ix].execute = runFuctionTwo;
}

// then at run time (run many times)
resources[ix].execute(); 
```

那么，**哪种方式效率更高呢？有没有更好的办法？**

**编辑：**我对在 Node.js 环境而不是浏览器环境中有效的解决方案更感兴趣。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:27:08.717

我认为功能映射将是一个更好的选择。

定义全局地图

```
var fns = {
    'TYPE_ONE' : runFunctionOne,
    'TYPE_TWO' : runFunctionTwo
}; 
```

然后使用它

```
var fn = fns[resources[ix].type];
if (typeof fn == 'function') {
    fn()
} 
```

或者使用[开关](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/switch)

```
var fn;
switch (resources[ix].type) {
    case "TYPE_ONE" :
        fn = runFunctionOne;
        break;
    case '' :
        // execute code block 2
        break;
    default :
        //
}

fn() 
```

# c# - WPF 工具包模板自定义中的 CheckComboBox

> ID：15756719
> 
> 赞同：1
> 
> 时间：2013-04-02T05:23:21.877
> 
> 标签：c#, wpf, expression-blend, wpftoolkit

我正在使用`CheckComboBox`WPF[工具包](http://wpftoolkit.codeplex.com/wikipage?title=CheckComboBox)。我需要更改`Popup style`. `CheckComboBox`（即，何时`CheckBox`检查，`Backcolor`应更改项目等）。在尝试使用 Exploring control 时`Blend`，我找不到任何模板来编辑其项目模板。

谁能建议如何自定义模板`CheckComboBox`？

我用 Blend 试过这个。

![在此处输入图像描述](https://i.stack.imgur.com/RHXVU.jpg)

感谢期待。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-04-23T09:27:41.087

可能是这个问题已经过时了，但是在 git 上有一些提到的控制代码：[https ://github.com/samoatesgames/mui.extended.toolkit/blob/master/ModernUI.Xceed/ModernUI.Xceed.Toolkit/Assets/控件/CheckComboBox.xaml](https://github.com/samoatesgames/mui.extended.toolkit/blob/master/ModernUI.Xceed/ModernUI.Xceed.Toolkit/Assets/Controls/CheckComboBox.xaml)

这里是 CheckComboBox 的样式，在这里你可以找到 Popup 和模板的其他元素。

```
<xctk:InverseBoolConverter x:Key="InverseBoolConverter" />

<Geometry x:Key="DownArrowGeometry">M 0,1 C0,1 0,0 0,0 0,0 3,0 3,0 3,0 3,1 3,1 3,1 4,1 4,1 4,1 4,0 4,0 4,0 7,0 7,0 7,0 7,1 7,1 7,1 6,1 6,1 6,1 6,2 6,2 6,2 5,2 5,2 5,2 5,3 5,3 5,3 4,3 4,3 4,3 4,4 4,4 4,4 3,4 3,4 3,4 3,3 3,3 3,3 2,3 2,3 2,3 2,2 2,2 2,2 1,2 1,2 1,2 1,1 1,1 1,1 0,1 0,1 z</Geometry>

<Style x:Key="ComboBoxToggleButton"
      TargetType="{x:Type ToggleButton}">
    <Setter Property="OverridesDefaultStyle" Value="true" />
    <Setter Property="IsTabStop" Value="false" />
    <Setter Property="Focusable" Value="false" />
    <Setter Property="Padding" Value="2" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type ToggleButton}">
                <xctk:ButtonChrome x:Name="Chrome"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                Background="{TemplateBinding Background}"
                                CornerRadius="0"
                                RenderEnabled="{TemplateBinding IsEnabled}"
                                RenderMouseOver="{Binding IsMouseOver, ElementName=PART_DropDownButton}"
                                RenderNormal="False"
                                RenderPressed="{Binding IsPressed, ElementName=PART_DropDownButton}"
                                SnapsToDevicePixels="true">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*" />
                            <ColumnDefinition MinWidth="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}" Width="0" />
                        </Grid.ColumnDefinitions>

                        <TextBox x:Name="TextBox"
                          Text="{Binding Content, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                          Foreground="{TemplateBinding Foreground}"
                          BorderThickness="0"
                          Background="Transparent"
                          IsReadOnly="True"
                          Focusable="False"
                          Cursor="Arrow"
                          Margin="{TemplateBinding Padding}"
                          HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}"
                          SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"
                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}"
                          HorizontalScrollBarVisibility="Hidden"
                          VerticalScrollBarVisibility="Hidden" />
                        <Grid Grid.Column="1"
                       HorizontalAlignment="Right"
                       Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}">
                            <Path x:Name="Arrow"
                              Data="{StaticResource DownArrowGeometry}"
                              Fill="{DynamicResource ItemText}"
                              HorizontalAlignment="Center"
                              Margin="3,0,3,0"
                              VerticalAlignment="Center" />
                        </Grid>
                    </Grid>
                </xctk:ButtonChrome>
                <ControlTemplate.Triggers>
                    <Trigger Property="IsChecked"
                       Value="true">
                        <Setter Property="RenderPressed"
                         TargetName="Chrome"
                         Value="true" />
                    </Trigger>
                    <Trigger Property="IsEnabled" Value="false">
                        <Setter Property="Fill" TargetName="Arrow" Value="{DynamicResource ItemTextDisabled}" />
                    </Trigger>
                    <DataTrigger Binding="{Binding IsEditable, RelativeSource={RelativeSource AncestorType={x:Type xctk:CheckComboBox}}}" Value="True">
                        <Setter Property="IsReadOnly" Value="False" TargetName="TextBox" />
                        <Setter Property="Focusable" Value="True" TargetName="TextBox" />
                        <Setter Property="Cursor" Value="{x:Null}" TargetName="TextBox" />
                    </DataTrigger>
                </ControlTemplate.Triggers>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>

<Style TargetType="{x:Type xctk:CheckComboBox}">
    <Setter Property="Foreground" Value="{DynamicResource ItemText}" />
    <Setter Property="Background" Value="{DynamicResource WindowBackground}" />
    <Setter Property="BorderBrush" Value="{DynamicResource ItemBorder}" />
    <Setter Property="BorderThickness" Value="1" />
    <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto" />
    <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto" />
    <Setter Property="Padding" Value="2" />
    <Setter Property="ScrollViewer.CanContentScroll" Value="true" />
    <Setter Property="ScrollViewer.PanningMode" Value="Both" />
    <Setter Property="Stylus.IsFlicksEnabled" Value="False" />
    <Setter Property="VerticalContentAlignment" Value="Center" />
    <Setter Property="HorizontalContentAlignment" Value="Stretch" />
    <Setter Property="Template">
        <Setter.Value>
            <ControlTemplate TargetType="{x:Type xctk:CheckComboBox}">
                <Grid x:Name="MainGrid"
                 SnapsToDevicePixels="true">
                    <Popup x:Name="PART_Popup"
                     AllowsTransparency="true"
                     IsOpen="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                     StaysOpen="False"
                     Margin="1"
                     PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}"
                     Placement="Bottom">
                        <Grid MinWidth="{Binding ActualWidth, ElementName=MainGrid}">
                            <Border x:Name="DropDownBorder"
                            Padding="2"
                            MaxHeight="{Binding MaxDropDownHeight,  RelativeSource={RelativeSource TemplatedParent}}"
                            BorderBrush="{DynamicResource WindowBorderActive}"
                            BorderThickness="1"
                            Background="{DynamicResource PopupBackground}">
                                <ScrollViewer x:Name="DropDownScrollViewer">
                                    <Grid RenderOptions.ClearTypeHint="Enabled">
                                        <Canvas HorizontalAlignment="Left"
                                     Height="0"
                                     VerticalAlignment="Top"
                                     Width="0">
                                            <Rectangle x:Name="OpaqueRect"
                                           Fill="{Binding Background, ElementName=DropDownBorder}"
                                           Height="{Binding ActualHeight, ElementName=DropDownBorder}"
                                           Width="{Binding ActualWidth, ElementName=DropDownBorder}" />
                                        </Canvas>
                                        <ItemsPresenter x:Name="PART_ItemsPresenter"
                                             KeyboardNavigation.DirectionalNavigation="Contained"
                                             SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" />
                                    </Grid>
                                </ScrollViewer>
                            </Border>
                        </Grid>
                    </Popup>

                    <Border  Background="{TemplateBinding Background}"
                       BorderBrush="{TemplateBinding BorderBrush}"
                       BorderThickness="{TemplateBinding BorderThickness}" />
                    <ToggleButton x:Name="PART_DropDownButton"
                            Content="{Binding Text, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                            BorderBrush="{TemplateBinding BorderBrush}"
                            Background="{TemplateBinding Background}"
                            Focusable="False"
                            IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}"
                            Style="{StaticResource ComboBoxToggleButton}"
                            Padding="{TemplateBinding Padding}"
                            VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"
                            HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                            IsHitTestVisible="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}, Converter={StaticResource InverseBoolConverter}}" />
                </Grid>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
    <Style.Triggers>
        <Trigger Property="IsMouseOver"
              Value="True">
            <Setter Property="BorderBrush" Value="{DynamicResource Accent}" />
        </Trigger>
        <Trigger Property="IsKeyboardFocusWithin" Value="True">
            <Setter Property="BorderBrush" Value="{DynamicResource Accent}" />
        </Trigger>
    </Style.Triggers>
</Style> 
```

但是，如果您需要更改所选项目的背景，则需要修改 SelectorItem 样式，例如

```
<Style TargetType="xctk:SelectorItem">
                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate TargetType="{x:Type xctk:SelectorItem}">
                            <Border x:Name="_background" 
                                    Background="{TemplateBinding Background}" 
                                    BorderBrush="{TemplateBinding BorderBrush}" 
                                    BorderThickness="{TemplateBinding BorderThickness}">

                                <CheckBox IsChecked="{Binding IsSelected, RelativeSource={RelativeSource TemplatedParent}}"
                                          Padding="{TemplateBinding Padding}"
                                          HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}"
                                          VerticalAlignment="{TemplateBinding VerticalContentAlignment}">
                                    <CheckBox.Content>
                                        <ContentControl Content="{TemplateBinding Content}"
                                                        ContentTemplateSelector="{TemplateBinding ContentTemplateSelector}"
                                                        ContentTemplate="{TemplateBinding ContentTemplate}"
                                                        Foreground="{TemplateBinding Foreground}" />
                                    </CheckBox.Content>
                                </CheckBox>
                            </Border>
                            <ControlTemplate.Triggers>
                                <Trigger Property="IsSelected" Value="true">
                                    <Setter TargetName="_background" Property="Background" Value="Red" />
                                </Trigger>
                            </ControlTemplate.Triggers>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>
            </Style> 
```

# vb.net - PictureBox 数组索引或标记引用

> ID：15756724
> 
> 赞同：0
> 
> 时间：2013-04-02T05:23:54.880
> 
> 标签：vb.net, visual-studio-2010

需要知道 Visual Basic 2010 中单击的 PictureBox 数组元素的索引和标记。 **标记**和**索引**作为公共整数变量变暗。**Gbox**是 PictureBox 数组的名称。**Tag = sender.tag**有效。 **Index = NameofArray.Indexof(sender as PictureBox)**不起作用，**Index = clicked.Indexof(sender as PictureBox)也不起作用**

```
 Private Sub Gbox_Click(sender As Object, e As EventArgs)
    Dim clicked As PictureBox = CType(sender, PictureBox)
    SelectedColor.Image = clicked.Image
    Tag = sender.tag
    Index = Gbox.IndexOf(sender as picturebox)  'Does not work
    Index = clicked.Indexof(sender as PictureBox)  ' Does not work        
    End Sub 
```

我需要在计算中使用预先分配的标签和索引。感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:32:17.717

这将返回它的索引，试试这个

```
Index = Array.IndexOf(Gbox, sender) 
```

[**注意：**`first occurance`上面的代码将返回`object`in that `array`(From its `lower bound`- 0)。`-1`顺便说一句，如果`searched object`那个特定的不存在，它将返回`array`]

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T16:14:33.017

最好的答案来自**RajaPrabhu**，我要感谢他。他的解决方案很简单，解决了几个问题。

```
 Index = Array.IndexOf(Gbox, sender) 
```

我确实为这个特定程序找到了另一种解决方案，但是感谢**RajaPrabhu** ，我将能够在其他几个实例中实施他的解决方案。

这是我找到的解决方案：部分问题是用户可能会改变主意并做出不同的选择，从而覆盖选择的标签属性。通过使用选择的标签属性以及更大数组中放置的标签属性来解决。较大的数组标记属性被分配了一个等于创建循环增量的标记，这也是索引。

这得到了所选项目的标签：

```
 Private Sub SC_Click(sender As Object, e As EventArgs)
       Dim clicked As PictureBox = CType(sender, PictureBox)
       SelectedColor.Image = clicked.Image
       Tag = sender.tag
    End Sub 
```

然后这得到了放置数组的标记，即索引：

```
 Private Sub Gbox_Click(sender As Object, e As EventArgs)
       Dim clicked As PictureBox = CType(sender, PictureBox)
       clicked.Image = SelectedColor.Image
       Index = sender.tag
    End Sub 
```

在这里测试并使用了输出：

```
 Private Sub Guess_Click(sender As System.Object, e As System.EventArgs) Handles Guess.Click
       Dim PositionInRow As Integer
       TextBox1.Text = "Tag: " + Tag.ToString + ", Index: " + Index.ToString
       'MessageBox.Show(index.ToString)
       Row = Row + 1
       PositionInRow = Index Mod 5 + 1 'there are 13 rows of 5 positions
       'more code.......
    End Sub 
```

感谢您抽出宝贵时间进行审查。这是一个很棒的网站，充满了非常有用的信息和乐于助人的同事。

# php - 带有 php 的 Javascript 定时循环

> ID：15756731
> 
> 赞同：0
> 
> 时间：2013-04-02T05:24:41.503
> 
> 标签：php, javascript, loops, time

我正在尝试显示当前时间戳并每秒刷新一次，用 php 执行此操作太慢了，必须重新加载页面，我知道 javascript 没有，我只是不知道该怎么做，有什么帮助吗？

```
<?php
    $time = time() + 3600 * 15;
    echo $time;
?>
<meta http-equiv="refresh" content="0.5;time.php" /> 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:37:37.890

JavaScript 可以根据您的本地时间调用时间戳。用于[`setInterval`](https://developer.mozilla.org/en/docs/DOM/window.setInterval)循环和更新由[`Date.now()`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Date/now).

```
setInterval(function() {
    document.getElementById("timestamp").innerHTML = Date.now();
}, 16); 
```

请参阅[jsFiddle](http://jsfiddle.net/Yx5CT/)。

# java - TCP/IP（Java 应用程序到 SQL Server）

> ID：15756734
> 
> 赞同：1
> 
> 时间：2013-04-02T05:24:49.243
> 
> 标签：java, sql-server-2005, try-catch

我想知道我是否可以使用这些代码将 Java 连接到 SQL Server：

```
package pkgtry;
import java.sql.*;
public class NewMain {

    public static void main(String[] args) {
    String  connectionUrl="jdbc:sqlserver://(local):1433;DatabaseName=OJT;user=sa;password=''";

            Connection con = null;
            Statement stmt = null;
            ResultSet rs = null;

                try {

                    Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
                        con = DriverManager.getConnection(connectionUrl);

                        String SQL = "";
                        stmt = con.createStatement();
                        rs = stmt.executeQuery(SQL);

                        while (rs.next()) {

                        }
                }

            catch (Exception e) {
                e.printStackTrace();
            }

            finally {
                if (rs != null) try { rs.close(); } catch(Exception e) {}
                    if (stmt != null) try { stmt.close(); } catch(Exception e) {}
                    if (con != null) try { con.close(); } catch(Exception e) {}
            }
    }
} 
```

但在我这边它显示一个错误并说：

> com.microsoft.sqlserver.jdbc.SQLServerException：与主机（本地）、端口 1433 的 TCP/IP 连接失败。错误：“null。验证连接属性，检查 SQL Server 实例是否正在主机上运行并在端口接受 TCP/IP 连接，并且没有防火墙阻止与端口的 TCP 连接。”。

这是什么意思？如何解决？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:29:37.380

这意味着 JDBC 无法连接到数据库服务器。它找不到主机`(local)`，你的意思是放在`localhost`这里而不是`(local)`？

```
String  connectionUrl="jdbc:sqlserver://(local):1433;DatabaseName=OJT;user=sa;password=''"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:35:29.483

请执行下列操作：

1）确保服务器正在您的计算机上运行。也就是说，它监听传入的连接请求。

要执行上述操作，请使用 IDE（我更喜欢 netbeans....它非常易于使用）并尝试创建与数据库的连接。您必须输入用户名、密码、数据库名称、端口号。服务器在其上运行等等。

如果您获得成功的连接，则您的服务器运行良好。

如果没有，请确保您使用的是正确的驱动程序，您提到了正确的端口号、正确的数据库名称等。

2）复制生成的连接字符串，并在连接URL中替换。我觉得你的连接字符串中应该有一个“localhost”而不是“（local）”。但可以肯定的是，只需复制 IDE 生成的连接字符串即可。

3）尝试再次连接，看看它是否有效。它主要应该。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-28T14:31:34.137

```
<%
    String  connectionUrl="jdbc:sqlserver://localhost:1433;DatabaseName=databaseNames;";
    try {
        Class.forName("com.microsoft.sqlserver.jdbc.SQLServerDriver");
    } catch (ClassNotFoundException e) {
        out.println("<p>Driver not found:" + e + e.getMessage() + "</p>" );
    }

    try {
        Connection conn = DriverManager.getConnection (connectionUrl, "sa", "yourPassword"); 
```

# android - 使用 android 低级 api 解码 H264 流

> ID：15756735
> 
> 赞同：9
> 
> 时间：2013-04-02T05:24:50.437
> 
> 标签：android, tcp, h.264

我在 android 中使用 MediaCodec 低级 Api 来解码从 IP CAMERA 接收的 h264 原始流。来自 IP 摄像机的原始流，通过 TCP/IP 连接接收。

要解码流，我的代码是：

```
@Override
protected void onCreate(Bundle savedInstanceState) {

 MediaCodec mCodecc;
 MediaFormat mFormat;
 BufferInfo mInfo;
 ByteBuffer[] inputBuffers ;
 ByteBuffer[] outputBuffers ;

}
protected void Init_Codec()
{
  mCodecc = MediaCodec.createDecoderByType("video/avc");
  mFormat =  MediaFormat.createVideoFormat("video/avc", width, height);

  mInfo = new BufferInfo();
mFormat.setInteger(MediaFormat.KEY_COLOR_FORMAT,MediaCodecInfo.CodecCapabilities.COLOR_FormatYUV420Planar);
  mCodecc.configure(mFormat, holder.getSurface(), null,0);
}

protected void Start_Codec()
{
  mCodecc.start();          
  inputBuffers = mCodecc.getInputBuffers();
  outputBuffers = mCodecc.getOutputBuffers();
}

private void OnRawStreamReceived(final ByteBuffer buffer)
{

 mHandler.postAtFrontOfQueue(new Runnable() {

@Override
public void run()
{
       int inIndex = mCodecc.dequeueInputBuffer(10000);
   if(inIndex>=0)
     {
    inputBuffers[inIndex] = buffer;
    mCodecc.queueInputBuffer(inIndex, 0,buffer.limit(),System.currentTimeMillis(), 0);
    }
       int outIndex = mCodecc.dequeueOutputBuffer(mInfo, 10000);
       switch (outIndex) {

    case MediaCodec.INFO_OUTPUT_BUFFERS_CHANGED:
    Log.d("DecodeActivity", "INFO_OUTPUT_BUFFERS_CHANGED");
    outputBuffers = mCodecc.getOutputBuffers();
    break;

    case MediaCodec.INFO_OUTPUT_FORMAT_CHANGED:
    Log.d("DecodeActivity", "New format " + mCodecc.getOutputFormat());
    break;

        case MediaCodec.INFO_TRY_AGAIN_LATER:
    Log.d("DecodeActivity", "dequeueOutputBuffer timed out! --- size : " + mInfo.size );
    break;

    default:
    ByteBuffer buffer = outputBuffers[outIndex];

            mCodecc.releaseOutputBuffer(outIndex, true);
    break;
    }
}

int outIndex = mCodecc.dequeueOutputBuffer(mInfo, 10000); 
```

但是在这行代码中，我总是收到“-1”。并且 mInfo.size() 也是我得到“0”。并且它没有在给定的表面上显示任何东西。

我错过了哪一步。请指导我。谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-03T20:58:38.133

我假设您正在传递单独的“访问单元”，即每个缓冲区一帧视频。

您似乎缺少的是编解码器设置块，预计它将位于提交的第一个缓冲区中（也可以塞进`MediaFormat`via `format.setByteBuffer("csd-0", ...)`）。假设数据来自您的特定编码器，您所要做的就是使用[BUFFER_FLAG_CODEC_CONFIG](http://developer.android.com/reference/android/media/MediaCodec.html#BUFFER_FLAG_CODEC_CONFIG)标志对第一个缓冲区进行排队。

# android - 不更新服务线程中的位置

> ID：15756736
> 
> 赞同：0
> 
> 时间：2013-04-02T05:24:59.653
> 
> 标签：android, gps, android-service, android-location

我正在使用后台服务来获取特定时间间隔内的位置坐标并对数据库执行更新操作。我已经搜索了许多类似的问题，但没有帮助。

我在服务中创建了线程来执行此操作。但是当服务没有更新位置**时我被卡住了。**我发现方法“requestLocationUpdates()”没有在线程中被调用。事实上，我在线程中使用了 Toast 方法，该方法也不起作用。

可能问题出在传递给上述两种方法的“上下文”参数中。但我无法更正此代码。

主要关注的是从服务中的线程获取准确的位置并将它们更新到服务器。考虑这部分，请向我展示正确的代码或以更好的方式说明相同功能的任何其他来源。这是我的代码...

```
public class IcareService extends Service implements LocationListener
{   

 private Handler mUserLocationHandler = null;
 Thread triggerService; 
 LocationManager lm;
 Criteria criteria;
 String provider,lat,lon,rid;

    @Override
 public void onDestroy() {
 // TODO Auto-generated method stub
 super.onDestroy();
 Toast.makeText(this, "Stopping  Service and so thread...", Toast.LENGTH_SHORT).show();
 mUserLocationHandler.getLooper().quit();
 }

  @Override
  public IBinder onBind(Intent intent) 
    {
     //Not implemented...this sample is only for starting and stopping services.
     //Service binding will be covered in another tutorial
     return null;
    }

    @Override
    public void onCreate() 
    {
            super.onCreate();
    }

    @Override
    public int onStartCommand(Intent intent, int flags, int startId) 
    {
      super.onStartCommand(intent, flags, startId);
      //Announcement about starting
      Toast.makeText(this, "Starting Service...", Toast.LENGTH_SHORT).show();
      addLocationListener();            
      return START_STICKY;
    }

    private void addLocationListener()
    {
        triggerService = new Thread(new Runnable(){
        public void run(){
         try{
              Looper.prepare();//Initialise the current thread as a looper.

              mUserLocationHandler = new Handler();

              lm = (LocationManager)getSystemService(Context.LOCATION_SERVICE);

             // Creating a criteria object to retrieve provider
             Criteria c = new Criteria();
             criteria.setAccuracy(Criteria.ACCURACY_COARSE); 

            // Getting the name of the best provider
            final String PROVIDER = lm.getBestProvider(c, true);

        //This 2 below statement not executing...       
          lm.requestLocationUpdates(PROVIDER, 7000, 5, IcareService.this);
      Toast.makeText(IcareService.this, "Updating Location...", Toast.LENGTH_SHORT).show();

            Thread.sleep(7000);                    
            Looper.loop();
                }catch(Exception ex){
                    ex.printStackTrace();
                }
            }
        }, "LocationThreadicare");
        triggerService.start();
    }

@Override
    public void onLocationChanged(Location location) {
// Getting latitude of the current location
double latitude = location.getLatitude();
lat = Double.toString(latitude);

 // Getting longitude of the current location
 double longitude = location.getLongitude();
 lon= Double.toString(longitude);
 Toast.makeText(this, "Gt loc nw sendng to srvr", Toast.LENGTH_SHORT).show();

     SendtoServer();            

}

      @Override
      public void onProviderDisabled(String provider) {
  // TODO Auto-generated method stub

      }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    } 

    SendtoServer(){
    .............}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:53:29.133

不要使用 Toast 进行调试（顺便说一下，它需要在 UI 线程上运行，也就是主线程），使用

```
Log.d("--------","\n\n-------"+Thread.currentThread().getName()+"\n\n"); 
```

将此类日志记录添加到`onCreate()`/`onDestroy()` 和感兴趣的地方，您将看到会发生什么。

用于`adb logcat`查看日志。

# android - 即使在单击列表项后也连续显示 autocompletetextview 适配器？？

> ID：15756743
> 
> 赞同：2
> 
> 时间：2013-04-02T05:25:16.127
> 
> 标签：android, autocompletetextview, simpleadapter

我正在研究**自动完成 textview**概念，当它在移动设备中检查时它在模拟器上运行良好，即使在点击 listitem 后它总是显示下拉列表。请帮助我解决这个问题。

![在此处输入图像描述](https://i.stack.imgur.com/bCBqx.png)

# perl - 如何在 Perl 中解析 JSON 类变量？

> ID：15756746
> 
> 赞同：1
> 
> 时间：2013-04-02T05:25:25.967
> 
> 标签：perl

我从 WEB 服务器读取数据，该服务器返回如下数据：

```
{'status':{"t":1, "f":1, "p":2, "i":1}} 
```

JSON::XS 告诉它似乎不是有效的 JSON 格式数据。我该如何解析呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T05:29:45.850

[您可以在此处](http://www.json.org/)查看 JSON 格式的规范。在您的情况下，问题可能是`status`. 如果您改用常规双引号，它应该解析：

```
{"status":{"t":1, "f":1, "p":2, "i":1}} 
```

您可以在[http://jsonlint.com/检查 JSON 的有效性](http://jsonlint.com/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T14:53:55.883

`JSON::XS`似乎没有用于接受单引号的切换，但`JSON`确实如此。

```
use strict;
use warnings;
use JSON -support_by_pp

my $source = q( {'status':{"t":1, "f":1, "p":2, "i":1}} );
my $parsed = JSON->new->allow_singlequote->decode($source); 
```

有关更多选项和详细信息，请参阅[JSON 模块文档](https://metacpan.org/module/JSON)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T06:36:35.647

它是有效的 JavaScript。因此，如果您不想编写自己的解析器，请将其传递给[JavaScript 引擎](http://search.cpan.org/perldoc?JavaScript)进行评估并转换为 JSON。

# c++ - 我的构造函数指定了至少一个构造值，但它可以是默认构造的

> ID：15756747
> 
> 赞同：1
> 
> 时间：2013-04-02T05:25:29.080
> 
> 标签：c++, class, constructor, default-value, default-constructor

参加以下课程：

```
class Foo{
public:
    Foo(std::string bar_, int baz_ = 7)
    :bar(bar_)
    ,baz(baz_)
    {}

private:
    std::string bar;
    int baz;
}; 
```

由于**Foo(std::string bar_, int baz_ = 7);** 是我唯一的构造函数，编译器不应该为我实现默认构造函数吗？我认为我可以构建这个类的唯一两种方法是：

```
Foo foo("foo");  
//or  
Foo foo("foo",0);  
//plus copy constructor and overloaded assignment operator. 
```

然而，为什么这可能呢？

```
int main(){

    Foo foo();
} 
```

当唯一的公共构造函数需要其第一个参数的值时，我不明白如何默认构造一个类。将默认构造函数设为私有或尝试 C++11 删除它，没有区别。这是怎么回事？
[http://ideone.com/CL7IZo](http://ideone.com/CL7IZo)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-02T05:30:13.880

因为`Foo foo();`是一个函数的前向声明，它返回 a`Foo`并且不接受任何参数。改用`Foo foo;`，你会得到你的错误。

# php - 如果条件满足，PHP 提交表单

> ID：15756749
> 
> 赞同：0
> 
> 时间：2013-04-02T05:25:52.640
> 
> 标签：php, javascript, html, forms, submit

我没有使用 javascript，它在我的环境中被禁用。请查看下面的代码。我正在尝试使用 PHP 创建 Javascript 或 jQuery 允许我使用简单的逻辑：**document.form2.submit()**

```
<div>
    <h2>How many services do you need ?</h2>
    <form action="<?php $_SERVER['PHP_SELF']?>" method="POST" name="fServ">
    <input type="number" name="numServ" />
    <input type="submit" value="SEND">
    </form>
<div>
    <?php

    if(isset($_POST['numServ']) && $_POST['numServ']!==""){
        echo "We need ".$_POST['numServ']." services";
        echo "<form name='form2' id='form2' method='get' action= $_SERVER[PHP_SELF]>";
        for($k = 0 ; $k< $_POST['numServ']; $k++){
        //echo "<input type=\"text\" value=\"services$k\">";}
            echo "<br><input type='text' name='services$k' value=''>";

            if(empty($_GET['services'.$k])){
            echo "You didn't fill up all the fields. Please put in a service";
            }
                if (!empty($_GET['services'.$k])){
                echo "Form Filled";//
                }
            }   
    }
    echo "<input type='submit' name='sendForm' value='SEND'/></form>";

    if(!isset($_POST['numServ'])){
        echo "We don't have any services yet.";
    }
    else if($_POST['numServ']==""){
        echo "Please put in a number";
    }

    ?> 
```

这可以通过 PHP 实现吗？如果满足条件并且表单字段不为空，则提交表单，否则死亡并显示消息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:30:02.783

即使这样，您也需要提交表单的详细信息：

```
Name: <input type="text" name="name" /> (Min 5 Chars)
Age: <input type="text" name="age" /> (Should be a Number)
<input type="submit" /> 
```

现在使用服务器端验证，可以这样完成：

```
if (isset($_POST["name"], $_POST["age"]))
  if (strlen($_POST["name"]) > 5 && is_numeric($_POST["name"]))
    die("Error! The conditions are not met!");
die("Form Submitted!"); 
```

这样您就可以提交禁用 JavaScript 的表单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T07:19:42.327

如果我理解，您需要在没有 javascript 的情况下自动提交表单。也许这个线程可以帮助你： [如何在不点击提交按钮的情况下在页面加载时提交表单？](https://stackoverflow.com/questions/4734901/how-to-submit-a-form-on-page-load-without-clicking-submit-button)

# javascript - 使用文本/无图像剪切画布元素

> ID：15756753
> 
> 赞同：3
> 
> 时间：2013-04-02T05:26:05.287
> 
> 标签：javascript, html, css, canvas, transparency

我想制作一个元素，其中文本是透明的，而 div 的其余部分是实心的，这样如果它的位置是固定的，你就可以通过文本看到背景。

我通常只为此使用 alpha 映射的图像，但是，我需要用户随心所欲地更改此文本，以便无论元素中的文本是什么，它都是透明的。虽然你不能用普通的 div 做这里的关键是在包含文本的元素上有一个实际的背景颜色。

我对画布元素很陌生，但我想知道是否可以使用画布元素，如果可以，你能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T05:44:27.210

是的，您可以使用画布执行此操作。您可以使用 rgba(red,blue,green,transparency_value) 在画布中绘制具有透明度的文本

HTML：

```
<canvas id="mycanvas" width="200" height="200" style="width:200px; height:200px; border:1px solid;">
</canvas> 
```

脚本：

```
canvas = document.getElementById('mycanvas');
ctx = canvas.getContext('2d');
ctx.beginPath();
ctx.fillStyle = '#992200';
ctx.rect(0,0,canvas.width,canvas.height);
ctx.fill();
ctx.closePath();

ctx.fillStyle = 'rgba(255,255,255,1)';
ctx.font = '10px verdana';
ctx.textAlign = 'center';
ctx.fillText("No transparency",canvas.width/2,10);

ctx.fillStyle = 'rgba(255,255,255,0.5)';
ctx.font = '10px verdana';
ctx.textAlign = 'center';
ctx.fillText("This is Transparent[0.5]",canvas.width/2,canvas.height/2);

ctx.fillStyle = 'rgba(255,255,255,0.25)';
ctx.font = '10px verdana';
ctx.textAlign = 'center';
ctx.fillText("This is Transparent[0.25]",canvas.width/2,canvas.height - 10); 
```

[现场演示](http://jsfiddle.net/nUx8x/)

注意：**设置 rgba() 应该是一个字符串（平均值应该用引号引起来）**

1.  了解有关[fillText()](http://www.w3schools.com/tags/canvas_filltext.asp)
2.  了解[填充样式](http://www.html5canvastutorials.com/tutorials/html5-canvas-text-color/)
3.  见关于[textAlign](http://www.html5canvastutorials.com/tutorials/html5-canvas-text-align/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T06:01:04.840

您也可以通过合成来做到这一点：http: [//jsfiddle.net/m1erickson/9DLuT/](http://jsfiddle.net/m1erickson/9DLuT/)

```
<!doctype html>
<html>
<head>
<link rel="stylesheet" type="text/css" media="all" href="css/reset.css" /> <!-- reset css -->
<script type="text/javascript" src="http://code.jquery.com/jquery.min.js"></script>

<style>
    body{ background-image:url("http://images4.fanpop.com/image/photos/23400000/water-water-23444632-2048-1277.jpg"); }
    canvas{border:1px solid red; position:absolute}
</style>

<script>
$(function(){

    var canvas=document.getElementById("canvas");
    var ctx=canvas.getContext("2d");

    ctx.save();
    ctx.beginPath();
    ctx.fillStyle="black";
    ctx.rect(0,0,canvas.width,canvas.height);
    ctx.fill();
    ctx.font="144pt Verdana";
    ctx.globalCompositeOperation="xor";
    ctx.beginPath();
    ctx.fillText("See",30,200);
    ctx.fill();
    ctx.restore();

}); // end $(function(){});
</script>

</head>

<body>
     <canvas id="canvas" width=400 height=300></canvas>
</body>
</html> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-03T08:53:20.597

您还可以考虑使用 SVG 剪贴蒙版，它更简单，并且不会遭受画布的“黑匣子”综合症。

我正在尝试为您写一些专门针对您的问题的东西。

与此同时，您可能会发现这篇文章会有所帮助。 [http://demosthenes.info/blog/481/Text-Clipping-Masks-With-SVG](http://demosthenes.info/blog/481/Text-Clipping-Masks-With-SVG)

# mysql - mysql正则表达式

> ID：15756754
> 
> 赞同：-1
> 
> 时间：2013-04-02T05:26:10.693
> 
> 标签：mysql, sql, regex

我正在尝试查找以字母 D 开头的所有字符串。在我的 mysql 查询中我有这个。

```
REGEXP '^[D]{4}$' 
```

问题是它返回所有带有 D 和 End 的东西。

例子：

```
DDD 123 - true
D 123 - true
DDDD 1234 - true

SSS 123 D - returns true, but should be false. 
```

知道我缺少什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:27:14.823

> *“...对于所有以字母 D 开头的字符串”*

你可以简单地使用`LIKE`

```
WHERE columnName LIKE 'D%' 
```

或正则表达式中的这种模式。

```
WHERE columnName REGEXP '^D.*' 
```

*   [SQLFiddle 演示（*用于两个查询*）](http://www.sqlfiddle.com/#!2/8b59d/2)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:05:36.557

```
select * from tablename where columnname RLIKE '^D' 
```

或者

```
select * from tablename where columnname REGEXP '^D' 
```

# android - 在列表视图中动态更改文本视图的颜色

> ID：15756759
> 
> 赞同：-1
> 
> 时间：2013-04-02T05:26:26.223
> 
> 标签：android, listview, textview

![我在这里有这个列表视图>我已经显示了某些金额，现在我希望带有 - 的金额为红色，带有 + 的金额为绿色](https://i.stack.imgur.com/dbYfR.png)

我在这里有这个列表视图。我已经显示了某些金额，现在我希望带有 - 的金额为红色，带有 + 的金额为绿色。

这是我的代码-：

```
public class Myperwallet extends ListActivity {

    ImageView upload,more,logout,send,history;
    String userpin;
    TextView fname,lname,cur,bal,pin;
    String firstname,lastname,curr,balance,pin1,deb;
    static final String baseURL = "http://192.168.0.2:10095/androidxml/permywallet.php?usenam=";

    static final String KEY_ITEM = "item"; 
    static final String KEY_DATE = "date";
    static final String KEY_DEB = "debit";
    static final String KEY_TID = "transactionID";
    static final String KEY_AMO = "amount";
    static final String KEY_CAT = "category";
    static final String KEY_FNM = "firstname";
    static final String KEY_LNM = "lastname";
    static final String KEY_PIN = "pin";
    static final String KEY_BAL = "balance";
    static final String KEY_CUR = "currency";
    static final String KEY_FEES = "fees";

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.myperwallet);

        Bundle gotuser= getIntent().getExtras();
        userpin= gotuser.getString("username");

         more = (ImageView)findViewById(R.id.imageView6);
         upload= (ImageView)findViewById(R.id.imageView3);
         logout =(ImageView)findViewById(R.id.logout);
         send =(ImageView)findViewById(R.id.imageView4);
         history =(ImageView)findViewById(R.id.imageView5);
         fname = (TextView)findViewById(R.id.textView1);
         lname = (TextView)findViewById(R.id.textView2);
         cur = (TextView)findViewById(R.id.textView5);
         bal = (TextView)findViewById(R.id.textView4);
         pin = (TextView)findViewById(R.id.textView6);

         history.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                String username2 = userpin;
                Bundle user1 = new Bundle();
                user1.putString("username",username2); 

                Intent next = new Intent(Myperwallet.this,History.class);
                next.putExtras(user1);
                startActivity(next);
            }
         });

         more.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                String username2 = userpin;
                Bundle user1 = new Bundle();
                user1.putString("username",username2); 

                Intent next = new Intent(Myperwallet.this,More.class);
                next.putExtras(user1);
                startActivity(next);
            }
        });
         upload.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                String username2 = userpin;
                    Bundle user1 = new Bundle();
                    user1.putString("username",username2); 

                    Intent next = new Intent(Myperwallet.this,Uploadfund.class);
                    next.putExtras(user1);
                    startActivity(next);
            }
          });

         send.setOnClickListener(new OnClickListener() {
            public void onClick(View v) {
                String username2 = userpin;
                Bundle user1 = new Bundle();
                user1.putString("username",username2); 

                Intent i = new Intent(Myperwallet.this,Sendfund.class);
                i.putExtras(user1);
                startActivity(i);
            }
         });

         logout.setOnClickListener(new OnClickListener() {   
              public void onClick(View v) {

                AlertDialog alertDialog = new AlertDialog.Builder(Myperwallet.this).create(); 
                alertDialog.setTitle("FastCashier:");
                alertDialog.setMessage("Are you sure you want to exit?");
                alertDialog.setButton( Dialog.BUTTON_POSITIVE, "Yes", new DialogInterface.OnClickListener() {
                   public void onClick(DialogInterface dialog, int which) {

                       Intent logout = new Intent(Myperwallet.this,Login.class);
                       startActivity(logout);

                   }
                   });

                alertDialog.setButton( Dialog.BUTTON_NEGATIVE, "NO", new DialogInterface.OnClickListener()    {
                  public void onClick(DialogInterface dialog, int which) {

                      dialog.cancel();

                  }
                  });

                alertDialog.show();  
              }
            });

         StringBuilder URL= new StringBuilder(baseURL);
         URL.append(userpin);
         String fullUrl =URL.toString();
         Log.i("log_tag", "new url  " + fullUrl);

         ArrayList<HashMap<String, String>> menuItems = new ArrayList<HashMap<String, String>>();

        inboxParser parser = new inboxParser();
        String xml = parser.getXmlFromUrl(fullUrl); 
        Document doc = parser.getDomElement(xml); 

        NodeList nl = doc.getElementsByTagName(KEY_ITEM);

        for (int i = 0; i < nl.getLength(); i++) {

            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);

            firstname = parser.getValue(e, KEY_FNM);
            lastname = parser.getValue(e, KEY_LNM);
            curr = parser.getValue(e, KEY_CUR);
            balance= parser.getValue(e, KEY_BAL);
            pin1= parser.getValue(e, KEY_PIN);
            deb = parser.getValue(e, KEY_DEB);

            map.put(KEY_DATE, parser.getValue(e, KEY_DATE));
            map.put(KEY_DEB, parser.getValue(e, KEY_DEB));
            map.put(KEY_TID, parser.getValue(e, KEY_TID));
            map.put(KEY_AMO, parser.getValue(e, KEY_AMO));
            map.put(KEY_CAT, parser.getValue(e, KEY_CAT));
            map.put(KEY_FNM, parser.getValue(e, KEY_FNM));
            map.put(KEY_LNM, parser.getValue(e, KEY_LNM));
            map.put(KEY_CUR, parser.getValue(e, KEY_CUR));
            map.put(KEY_PIN, parser.getValue(e, KEY_PIN));
            map.put(KEY_BAL, parser.getValue(e, KEY_BAL));
            map.put(KEY_FEES, parser.getValue(e, KEY_FEES));

            menuItems.add(map);
        }
        fname.setText(firstname);
        lname.setText(lastname);
        cur.setText(curr);
        bal.setText(balance);
        pin.setText(pin1);

        ListAdapter adapter = new SimpleAdapter(this, menuItems,
                R.layout.recentlist,            
                new String[] { KEY_CAT, KEY_DATE, KEY_TID, KEY_AMO, KEY_DEB,KEY_CUR,KEY_BAL,KEY_FEES}, new int[] {
                R.id.textView1,R.id.textView2, R.id.textView3, R.id.textView4,R.id.textView5,R.id.textView7,R.id.textView6,R.id.textView8});

        setListAdapter(adapter);

       }
} 
```

xml文件的代码-：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <ImageView
        android:id="@+id/imageView1"
        android:layout_width="wrap_content"
        android:layout_height="55dp"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="@drawable/mywallet" />

    <ImageView
        android:id="@+id/imageView2"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:background="@drawable/wallet_ic_hover"
        android:tileMode="repeat" />

    <ImageView
        android:id="@+id/imageView3"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@+id/imageView2"
        android:background="@drawable/upload_ic"
        android:tileMode="repeat" />

    <ImageView
        android:id="@+id/imageView4"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@+id/imageView3"
        android:background="@drawable/send_ic"
        android:tileMode="repeat" />

    <ImageView
        android:id="@+id/imageView5"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@+id/imageView4"
        android:background="@drawable/history1"
        android:tileMode="repeat" />

    <ImageView
        android:id="@+id/imageView6"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:layout_alignParentBottom="true"
        android:layout_toRightOf="@+id/imageView5"
        android:background="@drawable/more"
        android:tileMode="repeat" />

    <ImageView
        android:id="@+id/imageView7"
        android:layout_width="wrap_content"
        android:layout_height="45dp"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/imageView1"
        android:layout_marginTop="84dp"
        android:background="@drawable/recent_activity"
        android:tileMode="repeat" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_above="@+id/imageView2"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_below="@+id/imageView7" >
    </ListView>

    <ImageView
        android:id="@+id/logout"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:layout_marginRight="10dp"
        android:layout_marginTop="7dp"
        android:src="@drawable/logout" />

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignLeft="@+id/imageView3"
        android:layout_below="@+id/imageView1"
        android:layout_marginLeft="50dp"
        android:layout_marginTop="10dp"
        android:textSize="9pt"
        android:gravity="right"
        android:textStyle="bold"
        android:textColor="#2e508b"
        android:text="TextV" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView1"
        android:layout_alignBottom="@+id/textView1"
        android:layout_toRightOf="@+id/textView1"
        android:layout_marginLeft="10dp"
        android:textSize="9pt"
        android:gravity="left"
        android:textStyle="bold"
        android:textColor="#2e508b"
        android:text="Text" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="16dp"
        android:textStyle="bold"
        android:textColor="#2e508b"
        android:textSize="8pt"
        android:layout_marginLeft="5dp"
        android:text="Balance:" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView3"
        android:layout_alignBottom="@+id/textView3"
        android:layout_toRightOf="@+id/textView3"
        android:layout_marginLeft="5dp"
        android:textColor="#2e508b"
        android:textSize="8pt"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView4"
        android:layout_alignBottom="@+id/textView4"
        android:layout_toRightOf="@+id/textView4"
        android:layout_marginLeft="5dp"
         android:textColor="#2e508b"
         android:textSize="8pt"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView5"
        android:layout_alignBottom="@+id/textView5"
        android:layout_alignParentRight="true"
        android:textColor="#2e508b"
        android:textSize="8pt"
        android:layout_marginRight="5dp"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView6"
        android:layout_alignBottom="@+id/textView6"
        android:layout_toLeftOf="@+id/textView6"
        android:textStyle="bold"
        android:textColor="#2e508b"
        android:layout_marginRight="5dp"
        android:textSize="8pt"
        android:text="Pin:" />

</RelativeLayout> 
```

这是列表视图的 xml 布局。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/textView1"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Medium Text"
        android:layout_marginLeft="5dp"
        android:textStyle="bold"
        android:textColor="#2E508B"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView2"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView1"
        android:layout_alignBottom="@+id/textView1"
        android:layout_alignParentRight="true"
        android:textColor="#2E508B"
        android:layout_marginRight="5dp"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView3"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_below="@+id/textView1"
        android:layout_marginTop="10dp"
        android:textColor="#2E508B"
        android:layout_marginLeft="5dp"
        android:text="TextView" />

    <TextView
        android:id="@+id/textView4"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView3"
        android:layout_alignBottom="@+id/textView3"
        android:layout_alignParentRight="true"
        android:text="Medium Text"
        android:textColor="#2e508b"
        android:textStyle="bold"
        android:layout_marginRight="5dp"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView5"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/textView3"
        android:layout_toLeftOf="@+id/textView4"
        android:text="T"
        android:textStyle="bold"
        android:textColor="#2e508b"
        android:layout_marginRight="5dp"
        android:textAppearance="?android:attr/textAppearanceMedium" />

    <TextView
        android:id="@+id/textView6"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@+id/textView4"
        android:layout_marginTop="19dp"
        android:layout_toRightOf="@+id/textView1"
        android:text="TextView" 
        android:visibility="gone"
        />

    <TextView
        android:id="@+id/textView7"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView4"
        android:layout_alignBottom="@+id/textView4"
        android:layout_centerHorizontal="true"
        android:text="TextView" 
        android:visibility="gone"
        />

    <TextView
        android:id="@+id/textView8"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignBaseline="@+id/textView3"
        android:layout_alignBottom="@+id/textView3"
        android:layout_toRightOf="@+id/textView3"
        android:text="TextView" 
        android:visibility="gone"
        />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:38:00.300

这是没有html的非常简单的技巧。

```
TextView TV = (TextView)findViewById(R.id.mytextview01);

Spannable WordtoSpan = new SpannableString("Your A amount");        

WordtoSpan.setSpan(new ForegroundColorSpan(Color.BLUE), 0, WordtoSpan .length(),             Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);

TV.setText(WordtoSpan); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:37:09.810

您必须创建自定义适配器，并且在 getView() 中您可以根据需要更改颜色

```
 MyArrayAdapter adapter = new MyArrayAdapter(this, listArr);
 listView.setAdapter(adapter);

public MyArrayAdapter(Activity context, String[] objects) {
            super(context, R.layout.message, objects);
            // TODO Auto-generated constructor stub
            this.context = context;
            listArr = objects;

        }

        @Override
        public View getView(final int position, View convertView,
                ViewGroup parent) {
            // TODO Auto-generated method stub

            LayoutInflater inflater = (LayoutInflater) getSystemService(Activity.LAYOUT_INFLATER_SERVICE);
            View view = inflater.inflate(R.layout.message, null, true);

            TextView textView = (TextView) view.findViewById(R.id.txtMessage);
                textView.setText(Html.fromHtml(listArr[position]));
                textView.setTextColor(getResources().getColor(R.color.red));

            return view;
        }
    }

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:30:56.727

根据您的要求创建一个自定义适配器，在`getView()`方法中您可以根据您的条件更改 textview 颜色。看看这个自定义适配器 [http://www.ezzylearning.com/tutorial.aspx?tid=1763429](http://www.ezzylearning.com/tutorial.aspx?tid=1763429)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T05:48:49.660

要在（或）`itemView`的创建时自定义，您必须创建自己的而不是使用`ListView``ListActivity`**`View Adapter`**`SimpleAdapter`

```
public class WalletAdapter extends ArrayAdapter<BillData>
{
    BillData[] mData;
    int mLayoutResourceId;
    public WalletAdapter (Context context, int layoutResourceId, BillData[] data) 
    {
            super(context, layoutResourceId, data);
            this.mLayoutResourceId= layoutResourceId;
            this.mData = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) 
    {
        // inflate your item view from resource if need
        // get your textview in the item, check its content and modify it

        // the following is sample code
        LayoutInflater inflater = ((Activity)getContext()).getLayoutInflater();
        row = inflater.inflate(mLayoutResourceId, parent, false);

        TextView walletItem1 = (TextView)row.findViewById(R.id.txt1);
        if(your_condition_of_text_content)
        {
            walletItem1.setColor (your_color);//or set background color or text color
        }
    }
} 
```

然后在 Activity中，使用附加的账单数据数组**`onCreate()`**初始化您的，然后.**`WalletAdapter`****`setListAdapter(your_instance_of_wallet_adapter)`**

注意：您可以使用 ArrayList 或任何其他集合类型更改适配器，以提高效率。

# php - php-mhash 安装

> ID：15756764
> 
> 赞同：0
> 
> 时间：2013-04-02T05:26:45.760
> 
> 标签：php, fedora16, mhash

如何`php-mhash`在fedora14中安装？

我尝试在下面安装，但无法正常工作。

```
 yum -y install php-mhash* 
```

它说

```
No package php-mhash* available. 
```

请帮我。

**解决 ：**

我遵循了以下过程，现在我们的应用程序运行良好。

```
wget -q -O - http://www.atomicorp.com/installers/atomic | sh
yum -y install php-mhash
service httpd restart
service mysqld restart 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:31:51.450

yum 将安装已包含在存储库中的 rpm 软件包

[从http://pkgs.org/download/config%28php-mhash%29](http://pkgs.org/download/config%28php-mhash%29)下载 rpm

并安装它

# android - 在 Android 上安装启动服务

> ID：15756766
> 
> 赞同：0
> 
> 时间：2013-04-02T05:26:47.817
> 
> 标签：android, boot

我的 Android 应用程序需要在设备启动时启动。我使用 ACTION_BOOT_COMPLETED 和广播接收器来处理这个问题。但是，谷歌对此进行了限制。如果应用程序安装在 SD 卡上，广播接收器将不会收到 ACTION_BOOT_COMPLETED 消息。它们必须安装在内部存储器上才能在引导时启动。这真的很糟糕。有些设备根本就没有足够的内部存储器。希望谷歌实现一种在 SD 卡上安装启动应用程序的方法。

同时，是否有任何其他解决方法可以让我的应用程序启动但已将其安装在 SD 卡上？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:32:52.233

这是真正的问题 - 在发送 BOOT_COMPLETE 时，SD 卡尚未安装。如果您要在接收器中调用 getExternalStorageDir，它实际上会失败 - 它还无法读取驱动器。除非他们决定这样做（这会大大减慢启动完成事件的速度），否则他们无法使其适用于 SD 卡应用程序。

您可以构建一个引导加载程序类型的应用程序，该应用程序在内部存储上运行，等待外部存储被安装，然后通过启动您的服务/活动来运行您的应用程序，正如@Lucifer 建议的那样。它是你最好的选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:13:20.080

Google Play 中提供的此应用可用于在启动时启动应用：https: [//play.google.com/store/apps/details?id=info.niwota.start](https://play.google.com/store/apps/details?id=info.niwota.start)

# grails - 图像未在 .doc 文件中呈现

> ID：15756769
> 
> 赞同：0
> 
> 时间：2013-04-02T05:27:01.053
> 
> 标签：grails, groovy, gsp, doc, grails-2.2

我有一个模板，其中有一些来自文件系统的图像，另一些来自项目图像文件夹。

来自我的 grails 应用程序的 images 文件夹的模板中的图像完美地显示在 doc 文件中。我正在使用下面的代码来渲染这些图像：

```
<img src="${g.resource(dir: 'images', file: 'phone-1.gif', absolute: true)}"/> 
```

但我有一个来自文件系统（/opt/profileImages 文件夹）的图像。使用以下代码在模板中呈现此图像：

**看法：**

```
<g:img uri="${g.createLink(controller: 'personalDetail', action: 'showUserProfileImage', absolute: true)}"/> 
```

**控制器：**

```
def showUserProfileImage() {
    User user = springSecurityService.currentUser as User
    String profilePicturePath = "${grailsApplication.config.profilePictureDirectoryPath}/${user?.profilePicture?.fileName}"
    File file = new File(profilePicturePath)
    def img = file.bytes
    response.contentType = user?.profilePicture?.mimeType
    response.outputStream << img
    response.outputStream.flush()
} 
```

这工作正常，在浏览器以及我使用 grails 渲染插件下载的 pdf 中显示配置文件图像。

但问题是 .doc 格式的文件。当我以 doc 格式下载模板时，不会显示图像。

**截屏：**

![在此处输入图像描述](https://i.stack.imgur.com/lgmsl.png)

有人可以告诉我我错在哪里吗？

或者有没有其他方法可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-09T09:34:06.680

在这里，您尝试从应用程序上下文中访问图像 src。所以你的来源应该是这样的。

```
<g:img uri="${profilePocturePath}" width="93px" height="100px"/> 
```

参考这个

```
<mvc:resources mapping="/images/**" location="file:/absolute/path/to/image/dir"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-19T18:24:09.037

[Kanwal Nain Singh](https://stackoverflow.com/users/2261045/kanwal-nain-singh)解决方案仅在服务器在本地运行时才有效，但如果我从远程下载 doc 格式的模板，则图像再次丢失。问题是本地机器（/opt/profileImages 文件夹）中的文档搜索图像。

以下代码运行良好：

*行动：*

```
def showUserProfileImage() {
    String profilePicturePath = "${grailsApplication.config.profilePictureDirectoryPath}/${params.id}"
    File file = new File(profilePicturePath)
    response.contentType = URLConnection.guessContentTypeFromName(file.getName())
    response.outputStream << file.bytes
    response.outputStream.flush()
} 
```

*标签：*

```
<g:img uri="${grailsApplication.config.grails.serverURL}/user/showUserProfileImage/${userImageName}"/> 
```

# http - IIS HTTP 到 HTTPS 的相对重定向

> ID：15756774
> 
> 赞同：14
> 
> 时间：2013-04-02T05:27:30.590
> 
> 标签：http, iis, redirect, ssl, https

我最近为我的网站获得了 SSL 证书，并希望将所有流量重定向到 HTTPS。我得到了一切，`https://mydomain.com`但如果有人进入`http://mydomain.com/anotherpage`它会丢弃另一个页面并将用户带到主页。

我的`web.config`文件中的规则如下所示：

```
<rule name="HTTP to HTTPS redirect" stopProcessing="true">
  <match url="(.*)" />
  <conditions>
    <add input="{HTTPS}" pattern="off" ignoreCase="true" />
  </conditions>
  <action type="Redirect" redirectType="Found" url="https://{HTTP_HOST}/{R:1}" />
</rule> 
```

我也试过`https://{HTTP_HOST}{REQUEST_URI}`没有成功。谁能告诉我我需要做什么才能使网站重定向到页面的正确 HTTPS 版本？我觉得它与模式有关，但我似乎无法弄清楚语法。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2014-09-26T17:12:09.837

我找到了一种方法来做到这一点，你不需要重写模块。
以下在 Windows 8 (IIS 8.5) 上为我工作：

1.  从您的站点中删除 HTTP 绑定（保留 HTTPS）
2.  添加另一个站点
3.  确保新站点具有 HTTP 绑定
4.  配置 HTTP 重定向，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/C3nup.png)

现在所有 HTTP 请求都将重定向到您的 HTTPS 站点，并将保留 URL 的其余部分。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-08-02T09:08:27.017

将其更改为：

```
<rewrite>
   <rules>
      <rule name="Redirect to HTTPS" stopProcessing="true">
         <match url="(.*)" />
         <conditions>
            <add input="{HTTPS}" pattern="^OFF$" />
         </conditions>
         <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" />
      </rule>
   </rules>
</rewrite> 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-09-30T17:35:32.050

`R:1`我在删除文件夹时遇到了同样的问题。我是这样修好的。

```
<rule name="http to https" stopProcessing="true">
    <match url="(.*)" />
    <conditions>
       <add input="{HTTPS}" pattern="^OFF$" />
    </conditions>
    <action type="Redirect" url="https://{HTTP_HOST}{REQUEST_URI}"
            appendQueryString="false" redirectType="SeeOther" />
</rule> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-04-03T19:10:03.290

我还不能发表评论，否则我会在 AndyH 的回答下将此作为评论。解决方案是正确的，尽管我遇到了一个进一步的障碍（可能与使用 Adob​​e 的 Coldfusion 服务器有关）。我想分享一些我必须为其他可能遇到它的不幸灵魂做的进一步研究。

设置完成后，重定向将始终在此 url 结束：

```
https://xxx.xxx.com/jakarta/isapi_redirect.dll 
```

在 Adob​​e 线程 ( [https://forums.adobe.com/thread/1034854](https://forums.adobe.com/thread/1034854) ) 中找到了解决此问题的方法：我必须更改应用程序池的设置，如下所示：

真实站点（仅 HTTPS 绑定，实际上包含代码和虚拟目录） 应用程序池的高级设置：`Enable 32-Bit Applications : False`

Http_Redirect 站点（仅 HTTP 绑定，是没有目录的文件夹的空白外壳）应用程序池的高级设置：`Enable 32-Bit Applications : True`

* * *

编辑：另一个与查询字符串保存相关的细节：

根据这篇文章中的建议（[http://www.developerfusion.com/code/4678/permanent-301-redirect-with-querystring-in-iis/](http://www.developerfusion.com/code/4678/permanent-301-redirect-with-querystring-in-iis/)）

在域末尾添加`$S$Q`，并确保`Redirect all requests to exact destination`选中框。然后它也会保存查询字符串。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-02-09T20:58:07.987

我相信 AndyH 的答案是最简单和最好的方法。我发现使用 URL 重写也可能与可能将用户重定向到另一个页面的代码冲突。IT 经常在我们的环境中崩溃。但安迪的解决方案完美无缺。我还认为 Andy 的解决方案将减少服务器的开销，因为它不需要检查每个 url 命中它的可能的重写条件。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-19T01:49:08.167

我发现

```
<action type="Redirect" redirectType="Found" url="https://{HTTP_HOST}/{R:1}" /> 
```

语法仅适用于网站的 ROOT web.config 文件。

如果重写规则应用于虚拟 web.config 文件，则使用..

```
<action type="Redirect" redirectType="Found" url="https://{HTTP_HOST}{URL}" /> 
```

{URL} 语法将包括初始正斜杠、虚拟路径和任何 URL 参数。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2018-06-07T12:36:03.407

您可以将 URL 重写模块添加到 IIS（IIS 7 或更高版本），它允许您以可视方式添加创建重定向。该模块可以在[这里](https://www.iis.net/downloads/microsoft/url-rewrite)下载。

这个[分步教程](http://www.jppinto.com/2010/03/automatically-redirect-http-requests-to-https-on-iis7-using-url-rewrite-2-0/)为我创造了奇迹，并解释了在使用这个模块时，它实际上所做的只是将一些代码添加到您的`web.config`文件中：

```
<rewrite>
    <rules>
        <rule name="Redirect to HTTPS" stopProcessing="true">
            <match url="(.*)" />
            <conditions>
                <add input="{HTTPS}" pattern="^OFF$" />
            </conditions>
            <action type="Redirect" url="https://{HTTP_HOST}/{R:1}" redirectType="SeeOther" />
        </rule>
    </rules>
</rewrite> 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-09-01T23:01:42.207

**我找到了一种解决方法：**

考虑一下 IIS 中的网站是什么：只是一组规则、获取文件的路径及其绑定。

此外，还有一个名为“ *HTTP Redirect* ”的功能（标准包含在 IIS 中），它将一个主机重定向到另一个主机，保留所有子目录（它创建一个相对路径）。解决方法是在您的网站中仅保留 HTTPS（端口 443）的绑定，并使用 HTTP（端口 80）上的绑定创建另一个绑定，并为此设置一个 HTTP 重定向到您的 URL，使用`https://`.

例如，考虑一个名为的网站`mytest`及其 url`http://www.mytest.com/`和`https://www.mytest.com/`. 只为它设置绑定`https://www.mytest.com/`，然后删除`http`绑定。然后创建一个具有相同本地路径的新网站，`mytest http`仅使用端口 80 ( `http://www.mytest.com/`) 上的绑定调用并为此设置一个`HTTP Redirect`to `https://www.mytest.com/`。
简单而干净，这应该与用户直接使用 https url 一样快，因为它只是一个内部重定向。我希望这对你有用！

# iphone - 使用自定义字体在 UITableView 的单元格上加载 HTML

> ID：15756780
> 
> 赞同：4
> 
> 时间：2013-04-02T05:28:36.467
> 
> 标签：iphone, ios, uitableview

我正在开发一个应用程序，我需要在 UITableView 的单元格上加载 HTML 内容，还需要使用自定义字体显示此内容。

这种方法的主要问题是性能因为 HTML 内容需要时间。

如何在 UITableView 内部的 webView 上加载 HTML？如何使用自定义字体来表示自定义 HTML 内容？

然后我使用 UITextView 来加载 HTML。这是一种快速而好的方法，但现在它是无证方法，所以在应用程序上传时，我收到了关于无证方法的警告。

[最后，我想要像应用程序https://itunes.apple.com/id/app/iquran-lite/id285944183?mt=8](https://itunes.apple.com/id/app/iquran-lite/id285944183?mt=8)的 iQuran 应用程序 URL 的数据表示

iQuran Lite 应用程序的屏幕截图

![在此处输入图像描述](https://i.stack.imgur.com/seinK.png)

这是我在 TableView 中想要的数据表示我正在 HTML 中获取此内容！！！

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T05:42:20.037

在 UITableviewCell 中使用 UIWebview 不是一个好主意。HTML 只会在单元格可见时开始呈现。片刻之后，您将看到一个空单元格。这看起来不太好。你不能只使用带有自定义字体的标签吗？你可以试试这个：[https ://github.com/JPluto/FontLabel](https://github.com/JPluto/FontLabel)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-16T08:10:45.570

尝试`CoreText`框架

使用此代码：[https ://github.com/honcheng/RTLabel](https://github.com/honcheng/RTLabel)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:35:25.260

```
NSString *myHTML = @"<html><body><h1>Hello, world!</h1></body></html>";
[myUIWebView loadHTMLString:myHTML baseURL:nil]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T05:37:45.393

您可以执行以下操作：

```
[myWeb loadHTMLString:[NSString stringWithFormat:@"<div style='text-align:justify; font-size:45px;font-family:HelveticaNeue-CondensedBold;color:#0000;'>%@",postHTML] baseURL:nil]; 
```

# javascript - Facebook sdk 注销

> ID：15756783
> 
> 赞同：0
> 
> 时间：2013-04-02T05:28:38.693
> 
> 标签：javascript, facebook, grails

我在使用 Grails 2.1.2 构建的网站中使用 facebook javascript sdk ko 验证用户。我使用以下代码从我的应用程序中注销用户

```
FB.logout(function(response) {
    jQuery.ajax({
                type:'post',
                url:"${createLink(controller:'facebook',action: 'logout')}",
                success:function(result){
                    ${remoteFunction(controller: 'facebook',action: 'updateHeader',update:'header')}
                }
       });
}); 
```

但问题是，这段代码也从 facebook 注销用户，我如何只从我的应用程序中注销用户？如何使用户的 cookie 和会话无效？

# php - 如何使 new FormData() 在 IE 浏览器上工作

> ID：15756788
> 
> 赞同：6
> 
> 时间：2013-04-02T05:29:19.937
> 
> 标签：php, jquery, ajax

如何在 IE 上完成这项工作？这在 IE 上不起作用，IE 浏览器不支持 new FormData() api，在 IE 中是否有其他等效于 new FormData() 的 api？

```
var fd = new FormData();
fd.append( "userfile", $("#userfile")[0].files[0]);

$.ajax({
    url : '/user/ajax_upload/',
    type: 'POST',
    contentType:false,
    cache: false,
    data: fd,
    processData: false,
    beforeSend :function(){
    },
    success : function( data ) {
        $('#popupbox').html(data);  
    }
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-01T11:34:22.320

最好使用 jquery form Js 通过 ajax 提交图像。我发现它比`FormData()`

```
<script type="text/javascript" src="/js/jquery.form.js"></script>

function update_professional_details(){
    var options = { 
                url     : '/validateform/personal',
                type    : $("#personal_edit_form").attr('method'),
                dataType: 'json',
                success:function( data ) {
                    var msg = data.msg;
                    if(data.status == 'success'){
                        $("#msg_data").html("Updated successfully, redirecting...")
                        $("#personal_edit_form").submit();
                    }else{
                        $('p[class$="_error2"]').html('');
                        var msg = data.msg;
                        $.each(msg, function(k, v) {
                            $('.'+k+'_error2').html(v);
                        });
                    }
                },
            }; 
            $('#personal_edit_form').ajaxSubmit(options);
                return false;
        }

    $('#updatepersonal').click(function(){
        update_professional_details();
            return false;
    }); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-18T19:43:26.723

实际上，我对我的代码进行了更改，以便能够在所有其他浏览器中使用 $.ajax，并且只是为这样的 IE 浏览器制作了一个 iframe。

邮件程序.php

```
<!--[if IE]>
   <iframe src="form.php"></iframe>
<![endif]-->

<![if !IE]>
<script>
    $(document).ready( function() {
        //Program a custom submit function for the form
        $("#form").submit(function(event){

          //disable the default form submission
          event.preventDefault();

          //grab all form data  
          var formData = new FormData($(this)[0]);

          $.ajax({
            url: $("#form").attr('action'),
            type: 'POST',
            data: formData,
            async: false,
            cache: false,
            contentType: false,
            processData: false,
            success: function (returndata) {
              alert(returndata);
            }
          });

          return false;
        });
    });
</script>

<?php include_once ('form.php'); ?>

<div id="email-success"></div>
<![endif]> 
```

表单.php

```
<form id="form" action="form-exec.php" target="_self" method="post" enctype="multipart/form-data">
    <input type="text" name="email-to" value="" />
    <input type="text" name="email-subject" value="" />
    <input type="text" name="email-message" value="" />
    <input type="file" name="file" />
    <input type="file" name="file2" />
    <button type="submit" name="email-send">Skicka</button>
</form> 
```

就我而言，form-exec.php 是我的 PHPmailer 发件人！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T05:32:26.547

AFAIK 仅在 IE9+ 中是可能的。要上传文件'ajax like'，你应该使用 iframe 技巧。我在实现它时使用它作为源：

[http://ramui.com/articles/ajax-file-upload-using-iframe.html](http://ramui.com/articles/ajax-file-upload-using-iframe.html)

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-02T05:33:06.573

显然，IE 不支持 FormData。但是，您可以像这样使用 jQuery 的序列化：

```
 var FD = $('form').serialize(); 
```

# c# - 登录后ServiceStack IAuthSession为空

> ID：15756797
> 
> 赞同：4
> 
> 时间：2013-04-02T05:29:58.597
> 
> 标签：c#, servicestack

`localhost/auth/credential`因此，我使用 auth 功能运行调试，并使用`user=admin, pass=pass, rememberMe=true`. 我得到了一个 Json 响应`UserName=admin, SessionId=1`，到目前为止一切都很好。

然后我`SessionService`要检查我当前的会话：

```
[Route("user/session")]
public class Session {
}
public class SessionResponse { 
    public ResponseStatus ResponseStatus { get; set; }
    public string UserName { get; set; }
    public string SessionId { get; set; }
}
class SessionService : Service {
    public dynamic Get(Session req) {
        IAuthSession session = this.GetSession();
        return new SessionResponse() {
            SessionId = session.Id,
            UserName = session.UserName,
        };
    }
} 
```

但是当我去参观时：

`localhost/user/session`

我得到了**SessionId = K16UMnr2eBXiIFUwAod, UserName = null**我期望 UserName = admin。我被困了几个小时，无法弄清楚我做错了什么。请帮忙？

**更新 =================================================== ==============**

当我登录时，浏览器收到：

```
X-UAId=1 
```

然后浏览器发送：

```
ss-pid=zV7OOe2sP8hwlo8rR0EZ
ss-id=K16UMnr2eBXiIFUwAod
X-UAId=1 
```

如图所示：

**网址：localhost/auth/credentials?format=json**

![在此处输入图像描述](https://i.stack.imgur.com/Cf6oK.png)

然后我访问会话服务：

**网址：本地主机/用户/会话**

![在此处输入图像描述](https://i.stack.imgur.com/BcBzd.png)

如您所见，我将 ss-id 选为 SessionId。我以管理员身份登录，预计**UserName=admin ，但我得到了****UserName=null**。为什么？

![在此处输入图像描述](https://i.stack.imgur.com/xtr6C.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T23:23:48.233

修复！！

感谢伊莱加塞特。按照他的提示，我怀疑**MemcachedClient**设置不正确。所以我把它换成了简单的**MemoryCacheClient**。

现在一切都立即正常工作。因为 MemcachedClient 什么都不记得了。所以根本没有会议。

# c# - 如何使用公式编辑器在水晶报表中编写公式

> ID：15756801
> 
> 赞同：4
> 
> 时间：2013-04-02T05:30:02.443
> 
> 标签：c#, asp.net, crystal-reports, formula

我正在使用水晶报表 2008 版本，我需要为日期参数编写公式。

在某些情况下，日期时间将来自 db 的空值。那个时候我需要在同一个报告文件中显示一个空格。那么我们如何使用水晶报表公式编辑器来编写这个公式

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:58:49.353

您可以将 sql 代码编写为 select isnull(datefield,''), col1,col2 from table...

# android - android setOnTouchListener 行为在 android 2.3 和 4.1 上有所不同

> ID：15756803
> 
> 赞同：0
> 
> 时间：2013-04-02T05:30:03.727
> 
> 标签：android, ontouchlistener

当我点击它时，我`setOnTouchListener`用来捕捉`MotionEvent.ACTION_DOWN`和`MotionEvent.ACTION_MOVE`移动视图。

`MotionEvent.ACTION_MOVE`Bt 在三星 S3 (4.1.1) 上运行良好，但在另一个 android 2.3.3 上运行良好（无法捕获）。

任何评论都有帮助，谢谢。

=> => => 在 Log.d() 之后，`MotionEvent.ACTION_DOWN`和 "MotionEvent.ACTION_MOVE" 都被捕获了，但是在 Android 4.1.1 上，当 "MotionEvent.ACTION_MOVE" 时可以移动视图，但是在 2.3.3 上，视图不会移动。不知道为什么。似乎 findViewById(R.id.layoutMapMemoPhoto).invalidate() 不适用于 2.3.3。

```
public boolean onTouch(View v, MotionEvent event) {    

    FrameLayout.LayoutParams lParams = null;    
    final int X = (int) event.getRawX();    
    final int Y = (int) event.getRawY();    

    switch (event.getAction() & MotionEvent.ACTION_MASK) {    
    case MotionEvent.ACTION_DOWN:    
       lParams = (FrameLayout.LayoutParams) v.getLayoutParams();    
       yDeltaImageView = Y - lParams.topMargin;    
       Log.d("DOWN");    
       break;    

    case MotionEvent.ACTION_MOVE:    
       lParams = (FrameLayout.LayoutParams) v.getLayoutParams();    

       lParams.topMargin = Y - yDeltaImageView;    
       v.setLayoutParams(lParams);    
       Log.d("MOVE");    
       break;    
  }    

findViewById(R.id.id_of_parent_view).invalidate();    

return true;  
} 
```

# google-sheets - 我可以在不验证用户身份的情况下创建和填充新的 Google 文档电子表格吗？

> ID：15756807
> 
> 赞同：0
> 
> 时间：2013-04-02T05:30:23.540
> 
> 标签：google-sheets, google-docs, google-docs-api, google-spreadsheet-api

我想将一些数据从我的站点发送到 Google 文档中的新电子表格。

例如，我想将用户重定向到[http://docs.google.com/hypothetical_create_spreadsheet?csv=www.mysite.com/mydata.csv](http://docs.google.com/hypothetical_create_spreadsheet?csv=www.mysite.com/mydata.csv)以创建一个填充了 mydata.csv 的新电子表格

有点像 Twitter 的“意图”API。

这样的事情可能吗，还是我需要使用经过身份验证的 Google Docs API？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-10T00:21:52.037

为了**创建**电子表格，您需要作为用户进行身份验证。仅当您要**读取**已创建并具有公共权限的电子表格时，您才可以跳过身份验证。

# ios - 为每一行目标 c 创建一个新部分

> ID：15756809
> 
> 赞同：0
> 
> 时间：2013-04-02T05:30:38.333
> 
> 标签：ios, objective-c

现在这正在工作。我从服务器中提取动态数据并用我的结果填充每一行。我想要做的是每一行都有一个新的部分。我似乎无法弄清楚，任何帮助都会很棒。谢谢

```
#pragma mark - Table View
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"count the list %i",[self.dataController countOfList]);
    return [self.dataController countOfList];

}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"ShowDeals";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    Deals *dealAtIndex = [self.dataController objectInListAtIndex:indexPath.row];
    [[cell textLabel] setText:dealAtIndex.name];
    NSString *dollarSign = @"$";
    NSString *dealPrice = [dollarSign stringByAppendingString:dealAtIndex.price];

    [[cell detailTextLabel] setText:dealPrice];

    return cell;
} 
```

我想要这样的东西，但它只是一遍又一遍地在单行中填充相同的日期。

```
#pragma mark - Table View
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return [self.dataController countOfList];
}
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    NSLog(@"count the list %i",[self.dataController countOfList]);
    return 1;

}
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{

    static NSString *CellIdentifier = @"ShowDeals";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    Deals *dealAtIndex = [self.dataController objectInListAtIndex:indexPath.row];
    [[cell textLabel] setText:dealAtIndex.name];
    NSString *dollarSign = @"$";
    NSString *dealPrice = [dollarSign stringByAppendingString:dealAtIndex.price];

    [[cell detailTextLabel] setText:dealPrice];

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:32:31.657

交换返回值

```
- numberOfSectionsInTableView: 
```

和

```
- tableView:numberOfRowsInSection: 
```

（看来你已经这样做了），并使用

```
[self.dataController objectInListAtIndex:indexPath.section]
                                             this  ^^^^^^^ 
```

代替

```
[self.dataController objectInListAtIndex:indexPath.row] 
```

# java - Eclipse 重新安装后项目未在 Eclipse 中打开

> ID：15756811
> 
> 赞同：0
> 
> 时间：2013-04-02T05:30:44.933
> 
> 标签：java, eclipse

我正在通过 Eclipse 开发一些项目，但是我的 Eclipse 崩溃了，我需要重新安装它。但是如何在 Eclipse 中将我以前的作品作为项目打开。我把它做成了一个 zip 文件，但它不能从 Import 中工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:41:25.373

前往`import`> `Existing Projects to Workspace`>`Select Root directory`

取消选中“将项目复制到工作区”选择框，然后单击“刷新”按钮，您将能够导入项目

一个很常见的问题。

# c# - 类中包含的私有图像

> ID：15756812
> 
> 赞同：0
> 
> 时间：2013-04-02T05:30:50.137
> 
> 标签：c#, winforms, class

好的，所以我正在做一个程序，希望随机选择一个游戏并根据该类显示信息。所以现在我有

```
namespace Twitch_Roulette
{
    class GameClass
    {
        private string gameName;
        private string developer;
        private string publisher;
        private string releaseDate;
        private string platform;
        private string genre;
        private string numPlayers;
        private string description;
    }
} 
```

接下来我想包含一个将成为游戏 boxart 的图像，但我该怎么做呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:37:24.653

```
namespace Twitch_Roulette
{
    class GameClass
    {
        private string gameName;
        private string developer;
        private string publisher;
        private string releaseDate;
        private string platform;
        private string genre;
        private string numPlayers;
        private string description;
        private Image boxArt;
    }
} 
```

Image 类位于 System.Drawing 中，您可能必须在文件顶部包含 using 语句。

```
using System.Drawing; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T06:46:06.323

您可以像这样访问该类：

```
public partial class Form1 : Form
{
    public Form1()
    {
        InitializeComponent();
        GameClass gameclass = new GameClass();
        gameclass.GameName = "Name of Game";
        gameclass.GameGenre = GameClass.Genre.RPG;
        //Add the rest of the fields here.
    }
} 
```

GameClass 类如下所示：

```
class GameClass
{
    public enum Genre
    {
        RPG,
        MMO,
        RTS,
        Other
    }

    public enum Platform
    {
        Windows,
        Linux,
        MAC
    }

    private string gameName;
    private string developer;
    private string publisher;
    private DateTime releaseDate;
    private Platform platform;
    private Genre genre;
    private int numPlayers;
    private string description;
    private Bitmap picture;

    public string GameName
    {
        get
        {
            return gameName;
        }
        set
        {
            gameName = value;
        }
    }

    public Genre GameGenre
    {
        get
        {
            return genre;
        }
        set
        {
            genre = value;
        }
    }

    //... Other get set methods
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:36:18.237

就这么简单（`System.Drawing.dll`必须包含在您的参考文献中）：

```
class GameClass
{
    //your fields

    private System.Drawing.Bitmap image;
} 
```

# c# - 输入包含 unicode 的 IPAddress.TryParse

> ID：15756816
> 
> 赞同：0
> 
> 时间：2013-04-02T05:31:17.400
> 
> 标签：c#, .net, unicode, ip-address

根据 MSDN [http://msdn.microsoft.com/en-us/library/system.net.ipaddress.tryparse(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/system.net.ipaddress.tryparse(v=vs.100).aspx)， ipString 不能包含 Unicode 字符，否则将引发 ArgumentException。

是否有人能够在本地控制台应用程序中进行复制，我尝试了多个 unicode 字符但无法复制。

我们在一些服务器日志中看到了类似的错误：

> 无法编组：遇到无法映射的角色。但无法记录哪个输入破坏了代码。

更新，堆栈跟踪的一部分：System.ArgumentExceptionMessage0：无法编组：遇到不可映射的字符。; 在 System.String.ConvertToAnsi(Int32 iMaxDBCSCharByteSize, Boolean fBestFit, Boolean fThrowOnUnmappableChar, Int32& cbLength)--在 System.StubHelpers.CSTRMarshaler.ConvertToNative(Int32 flags, String strManaged, IntPtr pNativeBuffer)-- 在 System.Net.UnsafeNclNativeMethods.OSSOCK。 WSAStringToAddress(String addressString, AddressFamily addressFamily, IntPtr lpProtocolInfo, Byte[] socketAddress, Int32& socketAddressSize)-- 在 System.Net.IPAddress.InternalParse(String ipString, Boolean tryParse)-- 在 System.Net.IPAddress.TryParse(String ipString, IP地址&地址)--

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:49:20.600

MSDN 注释有点奇怪（因为任何字符甚至`1`是 Unicode 字符）......并且通常 TryParse 不会在输入无效文本时抛出。

您的错误似乎与封送处理有关（如“从托管代码调用 COM 对象”或“PInvoke some native code”）。如果您确信错误来自`TryParse`- 最简单的方法可能是查看`TryParse`System.Dll 中的实际实现，并尝试追溯哪些输入和在什么环境中可能导致此类异常。

这是潜在的情况（带有俄语字符的类似 IPv6 的地址）：

```
 System.Net.IPAddress.TryParse("ф:ф", out v); 
```

# java - 如何在 JSP 中显示基于 SELECT 标记值的选项卡？

> ID：15756817
> 
> 赞同：0
> 
> 时间：2013-04-02T05:31:17.663
> 
> 标签：java, javascript, jquery, jsp

您好我已经创建了一个 JSP 页面。第一个选项卡包含一个 SELECT 字段。根据选择的值，我想显示下一个选项卡。任何人都可以帮助我吗？我尝试了很多次，但我没有得到。

```
<div class="navbar btn-navbar">
        <div id="tabs" class="tabbable">
            <ul id="myTab" class="nav nav-tabs">
                <li class="active"><a href="#datacollector" target="main"
                    data-toggle="tab">Data Collector</a></li>
                <li class="hidden"><a href="#fromDB" target="main"
                    data-toggle="tab">Data Load</a></li>
                <li class="hidden"><a href="#fromFile" target="main"
                    data-toggle="tab">Data Load</a></li>
                <li class="hidden"><a href="#email" target="main"
                    data-toggle="tab">Data Load</a></li>
                <li><a href="ajax/DataFieldMapping.jsp" target="main" data-toggle="tab">Data
                        Map</a></li>
                <li><a href="#schedule" target="main" data-toggle="tab">Schedule</a></li>
            </ul>
            <br> <br> <br>
            <div id="myTabContent" class="tab-content">
                <div class="tab-pane fade in active" id="datacollector">
                    <div class="container">
                        <div class="row">
                            <div class="span8">
                                <form name="selectType" action="selectType"
                                    onsubmit="return validateForm()" target="#fromDB" method="get">
                                    <fieldset>

                                        </select> <label class="control-label" for="dataloadType">Data
                                            load Type:</label> <select id="dataloadType" name="dataloadType">
                                            <option>Choose Data load Type</option>
                                            <option value="fromDB">From Database</option>
                                            <option value="fromFile">From File</option>
                                            <option value="email">E-mail</option>
                                            <option value="webServices">Web Services</option>
                                        </select>
                                        <p>
                                            <button id="nexttab" type="submit" class="btn btn-success">Submit</button>
                                        </p>
                                    </fieldset>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="tab-pane fade" id="fromDB">
                    <iframe src="GenericFileUpload.jsp" width="1250" height="400"></iframe>
                </div>
                <div class="tab-pane fade" id="fromFile">
                    <iframe src="GenericDB.jsp" width="1250" height="400"></iframe>
                </div>
                <div class="tab-pane fade" id="email">
                    <iframe src="EmailService.jsp" width="1250" height="400"></iframe>
                </div>
                <div class="tab-pane fade" id="datamap">
                    <iframe src="DataFieldMapping.jsp" width="1250" height="400"></iframe>
                </div>
                <div class="tab-pane fade" id="schedule">
                    <iframe src="UploadConfiguration.jsp" width="1250" height="400"></iframe>
                </div>
            </div>
        </div>
    </div> 
```

如果用户**从 File**中选择，它应该显示 ID 为**fromFile**的下一个选项卡，并且它应该隐藏 ID**为 fromDB**和**email**的选项卡。有人可以帮我吗？如何使用 Jquery？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:27:17.327

[如何使用 JavaScript 使 DIV 可见和不可见](https://stackoverflow.com/questions/9456289/how-to-make-a-div-visible-and-invisible-with-javascript)

只是添加到这个：

onchange 事件应使用 java 脚本函数注册。此函数将读取选择框中的当前选定值。

根据该值，仅使所需的 div 可见，其余全部隐藏。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:42:13.683

```
$('#dataloadType').live('change',function(){
  var value = $(this).val();
  $('#tabs').tabs('select',value);
}); 
```

# twain - 为什么不同的扫描图像在文件传输模式下大小相同？

> ID：15756818
> 
> 赞同：0
> 
> 时间：2013-04-02T05:31:31.637
> 
> 标签：twain

我正在用 C++ 开发一个扫描仪应用程序。目前我能够扫描文档并以文件传输模式获取图像。但是即使文档的内容不同，所有扫描的文档也具有相同的大小。

```
FileFormat:TWFF_TIFF
Pixel flavout: TWPF_CHOCOLATE
Xresoultion:75
Yresoultion:75
ICAP_UNITS: TWUN_INCHES
ICAP_PIXELTYPE: TWPT_GRAY
ICAP_BRIGHTNESS:0
ICAP_CONTRAST:0
ICAP_BITDEPTH: 8 
```

每次扫描的图像大小为327kb。为什么会这样？

另外，如何设置JPEG_Compression。文件传输模式是否支持JPEG_compression？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-08T15:11:26.063

可能您的扫描仪/驱动程序正在写入未压缩的 TIFF 文件，因此文件大小仅取决于图像的尺寸。如果每个图像的宽度和高度相同，则生成的文件将具有相同的大小。

TWAIN 中的所有文件传输内容都是由驱动程序（而不是 TWAIN 本身）实现的，并且所有功能都是可选的。因此，您需要在传输 TIFF 文件时检查您的扫描仪/驱动程序是否支持 JPEG 压缩。可能会，也可能不会。

*在将 ICAP_IMAGEFILEFORMAT 设置为 TWFF_TIFF之后*，您可以尝试将 ICAP_COMPRESSION设置为 TWCP_JPEG。如果两者都成功，您可能会在 TIFF 中获得 JPEG 压缩，尽管它可能是“旧样式”JPEG 或“新样式”JPEG。如果您不知道这意味着什么，您可能应该找出答案。

几年前，我为这种实验编写了一个工具，仍然由 Atalasoft 维护且免费：[Twirl TWAIN Probe](http://www.eztwain.com/twirl.htm)

注意：许多扫描仪不支持文件传输模式（它是可选的），而那些可能不支持 TIFF 文件格式的扫描仪（唯一需要的文件格式是 BMP！）如果您需要支持多种扫描仪，您必须使用 TWAIN 的本地传输模式或内存传输模式，并将图像写入自己的文件，例如使用 LibTiff。

# c++ - 如何忽略输入末尾的空行

> ID：15756820
> 
> 赞同：0
> 
> 时间：2013-04-02T05:31:41.137
> 
> 标签：c++, input, newline, cin

以下代码工作正常，还检查用户是否输入了正确数量的项目，但当输入有一个尾随空行时它会失败。

```
string item1, item2, item3;
while(cin.good) {

    //this allows me to both check if user input enough items 
    //EDIT: and if items are of right type so I can cerr
    if (cin >> item1 && cin>> item2 && cin>> item3) {

        doStuff(item1,item2,item3);

    }else {

        cerr<<"bad input! Not enough input items or wrong type"<<endl;

    }

} 
```

我可以将 cin.good 更改为其他内容以解决尾随空行的情况吗？我也会接受其他解决方案。

编辑：我意识到我不能使用 while(cin >> item1) 因为如果 item1 的类型错误，我就无法识别错误消息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:38:46.393

我觉得：

```
while(cin >> item1) {
    //this allows me to check if user input enough items
    if (cin >> item2 && cin >> item3) {
        doStuff(item1,item2,item3);
    } else {
        cerr<<"bad input! Not enough input items"<<endl;
    }
} 
```

会做你想做的。

# java - for循环中的异步任务进度条

> ID：15756823
> 
> 赞同：0
> 
> 时间：2013-04-02T05:31:59.293
> 
> 标签：java, android

-我尝试使用异步任务方法访问 Web 服务。

- 这里的 for 循环将从第一个开始关闭进度对话框并使应用程序崩溃。请检查此代码并提供建议。

**代码**

```
for(Pageview pg:views)
{
 value1=url1+"userid="+pg.getuserid()+"&chapterid="+pg.getchapterid()+"&pageno="+pg.getpageno()+"&view%20time="+pg.getviewtime()+"&IMEI%20no="+pg.getimeino()+"&feedback="+pg.getfeedback()+"&Comments="+pg.getcomments();
//Toast.makeText(getApplicationContext(), value1, Toast.LENGTH_LONG).show();
 System.out.println(value1);
// feedbackdata feedback1=new feedbackdata();
 feedbak.execute(value1);
    feedbackdata.loadingProgress = GUIStaticMethod.returnProgressBar(getApplicationContext());

        //myLoginDataFatcher.start();

GUIStaticMethod.mProgressDialog.setOnDismissListener(new OnDismissListener() {

    public void onDismiss(DialogInterface dialog) {

        if(res1.contains("Page View Insertion Successfully")==true)
        {
            Toast.makeText(getApplicationContext(), res1, Toast.LENGTH_LONG).show();

        }
        else if(res1.contains("Page View Insertion Failed")==true)
        {

        }
    }

 }); 
```

**错误**

```
04-02 10:52:34.956: E/AndroidRuntime(234): Uncaught handler: thread main exiting due to uncaught exception
04-02 10:52:34.976: E/AndroidRuntime(234): java.lang.IllegalStateException: Cannot execute task: the task has already been executed (a task can be executed only once)
04-02 10:52:34.976: E/AndroidRuntime(234):  at android.os.AsyncTask.execute(AsyncTask.java:383)
04-02 10:52:34.976: E/AndroidRuntime(234):  at com.example.wireframe.webviewurl$11.onDismiss(webviewurl.java:1751)
04-02 10:52:34.976: E/AndroidRuntime(234):  at android.app.Dialog$ListenersHandler.handleMessage(Dialog.java:1058)
04-02 10:52:34.976: E/AndroidRuntime(234):  at android.os.Handler.dispatchMessage(Handler.java:99)
04-02 10:52:34.976: E/AndroidRuntime(234):  at android.os.Looper.loop(Looper.java:123)
04-02 10:52:34.976: E/AndroidRuntime(234):  at android.app.ActivityThread.main(ActivityThread.java:4363)
04-02 10:52:34.976: E/AndroidRuntime(234):  at java.lang.reflect.Method.invokeNative(Native Method)
04-02 10:52:34.976: E/AndroidRuntime(234):  at java.lang.reflect.Method.invoke(Method.java:521)
04-02 10:52:34.976: E/AndroidRuntime(234):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:860)
04-02 10:52:34.976: E/AndroidRuntime(234):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:618)
04-02 10:52:34.976: E/AndroidRuntime(234):  at dalvik.system.NativeStart.main(Native Method) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:44:23.980

`AsyncTask`为每次迭代创建一个新实例。

```
new AsyncTask().execute(value); 
```

原因是您无法再次执行线程，因为一旦线程使用该`run()`方法完成，您就无法重新启动它。这就是为什么当您尝试重新启动它时，它会为您提供`IllegalStateException`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:44:11.593

您不能按照异常建议多次执行相同的 AsyncTask。在for循环下初始化反馈对象然后执行

根据 AsyncTask 线程规则

> 该任务只能执行一次（如果尝试第二次执行将引发异常。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T05:44:20.027

它说：`Cannot execute task: the task has already been executed (a task can be executed only once)`。也就是说，您创建一个 AsyncTask，执行*一次*，然后对其进行垃圾收集。对于同一个实例，您不能`execute()`多次调用。

# regex - django - 配置 urls.py 正则表达式来处理 urlopen 帖子

> ID：15756831
> 
> 赞同：0
> 
> 时间：2013-04-02T05:32:36.847
> 
> 标签：regex, post, django-urls, urlopen

我是 Python 和 Django 的新手，我正在尝试通过 http post 将数据传递到一个简单的 Web 应用程序。我浏览了 Django 教程，对所教的内容有一个不错的理解，但我并没有完全过滤掉 urls.py 正则表达式。我已成功使用 urlopen() 作为 http get。使用它来发布并不是那么成功。好像我的应用程序 urls.py（不是项目 urls.py）不允许 POST 访问我的应用程序 views.py。最终，我想通过 POST 获取我被动的数据并将其返回到我的响应中。这是我所拥有的：

我的项目 urls.py：

```
urlpatterns = patterns('',
url(r'^timeapp/', include('timeapp.urls')),
    url(r'^datasink/', include('datasink.urls')),       
    url(r'^admin/', include(admin.site.urls)),
) 
```

数据接收器/ urls.py：

```
urlpatterns = patterns('',
        (r'^$', views.index),
) 
```

数据接收器/views.py

```
def index(request):
    if request.method == 'GET':
        return HttpResponse("This was a GET")
    else:
        return HttpResponse("This was a not a GET ... POST?") 
```

客户端

```
from urllib2 import Request, urlopen, URLError, build_opener, HTTPHandler
import urllib

url = "http://127.0.0.1:8080/datasink/"
data = {'name':'joe'}

encodedData = urllib.urlencode(data)
req = Request(url)
req.add_data(encodedData)

try:
    response = urlopen(req)
    print "We received the following response from our httpREQ: " +response.read()
    print "The response.geturl(): " +response.geturl()
except URLError as e:
    if hasattr(e, 'reason'):
        print 'We failed to reach a server.'
        print 'Reason: ' +str(e.reason) +str(e.code)
    elif hasattr(e, 'code'):
        print 'The server couldn\'t fulfill the request.'
        print 'Error code: ' + str(e.code)
    else:
        pass 
```

* * *

服务器端错误：

> 异常 AttributeError: AttributeError("'_DummyThread' 对象没有属性 ' *Thread* _block'",) 被忽略 [02/Apr/2013 05:15:57] "POST /datasink HTTP/1.1" 500 54048

* * *

客户端消息：

> 我们未能到达服务器。原因：内部服务器错误

* * *

任何指导将不胜感激。我一直在尝试各种正则表达式……不走运。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:40:03.807

`datasink`和`datasink/`路径有区别。

在这种情况下，您已经定义`datasink/`但没有处理任何内容`datasink`。

尝试改变

```
url = "http://127.0.0.1:8080/datasink" 
```

至

```
url = "http://127.0.0.1:8080/datasink/" 
```

在您的客户中查看这是否可以解决问题。

# php - 通过与 SugarCRM/jQuery 比较 URL 中的值来显示选择的选项

> ID：15756838
> 
> 赞同：1
> 
> 时间：2013-04-02T05:33:16.970
> 
> 标签：php, jquery, sugarcrm

我有两个 DropDown 字段，我希望动态选择其中一个选项。由于我使用的是 SugarCRM，我无法直接在选项标签中写入条件。

我想通过它在 jQuery 中的值来获取一个选项标签，并向它添加一个属性“selected=selected”

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T13:58:38.780

您可以创建一个 custom.js 文件并在 custom/modules/{MODULE_NAME}/views/view.edit.php 中定义它。

```
class Custom{MODULE_NAME}ViewEdit extends ViewEdit {
    function preDisplay(){
        parent::preDisplay();
        echo '<script language="javascript" src="custom/modules/{MODULE_NAME}/custom.js"> </script>'; 
    }
} 
```

然后在 custom.js 中做类似的事情

```
YAHOO.util.Event.onDOMReady(setSelected);

function setSelected() {
    $('select#dropdown1').change(function() {
        $("select#dropdown2 option[value='Some Value']").attr('selected', 'selected');
        return false;
    });
} 
```

# sql-server - 将数据从主数据库复制到部门数据库的存储过程

> ID：15756842
> 
> 赞同：0
> 
> 时间：2013-04-02T05:33:32.833
> 
> 标签：sql-server, stored-procedures

我们有一个主数据库，它保存所有部门的全局表。它还有一个包含数据库名称和其他连接参数的分区表。

所有部门都有单独的数据库，其中包含部门特定表和全局表，它们是主数据库中全局表的副本。

我们正在寻求创建一个动态存储过程，它将每天作为作业运行，并检查主数据库中是否有任何全局表已更新。如果是，则数据将从全局表复制到循环中的每个部门的部门表中。

开发此功能的任何帮助或指示将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:21:46.460

您正在寻找使用 SQL Server 复制。[事务](http://msdn.microsoft.com/en-us/library/ms151176.aspx)复制和[合并](http://msdn.microsoft.com/en-us/library/ms152746.aspx)复制都可以满足要求。在主服务器上创建一个发布，并让每个部门创建一个过滤订阅，请参阅[过滤已发布数据](http://msdn.microsoft.com/en-us/library/ms151775.aspx)。

您无法使用“存储过程”来做到这一点，因为您没有跟踪更改的基础设施，您无法远程有效地比较数据的增量，您缺乏可靠交付增量的方法，您没有适当的监控和部署工具集，您没有办法检测和处理冲突等等等。不要重新发明轮子，特别是这样一个古老且经过良好测试的轮子。

# django - 使用 database-django 填充模型表单字段

> ID：15756843
> 
> 赞同：0
> 
> 时间：2013-04-02T05:33:33.393
> 
> 标签：django, django-models, django-forms

我想用数据库数据填充我的模型表单字段并在单选按钮中显示它们。

这是我的模型：

```
class jobpostForm_detail(ModelForm):
    class Meta:

        model = payment_detail
        fields = ('payment_type','country')

    widgets = {

        'payment_type':RadioSelect(),
            'country':RadioSelect(),    

    }

    def __init__(self, *args, **kwargs):
        super(jobpostForm_detail, self).__init__(*args, **kwargs)

        self.fields['country'].queryset = Country.objects.all() // This is not showing data in radio buttons.
        self.helper = FormHelper()
        self.helper.form_class = 'horizontal-form'
        self.helper.form_id = 'id-jobpostform'
        self.helper.form_class = 'blueForms'
        self.helper.form_method = 'post'
             #self.helper.form_action = '/'

        self.helper.add_input(Submit('submit_addcontent', 'Pay'))

        super(jobpostForm_detail, self).__init__(*args, **kwargs) 
```

国家型号：

```
class Country(models.Model):

    country_id =             models.AutoField(primary_key=True)
    country_name =        models.CharField(max_length=255,null=True, unique=True)

    def __unicode__(self):
        return unicode(self.country_id)
        return unicode(self.country_name) 
```

模板：

```
 <form method="post" action="/portal/next/post/" class="blueForms" id="id-jobpostform">

    {% csrf_token %}

    {% crispy form %}

    </form>
This is my view:

def payment(request):
    #form = jobpostForm_first()
    country_list = Country.objects.all()
    if request.method == 'POST':
        form = jobpostForm_detail(request.POST)

        #if form.is_valid():
        form.save()
        return HttpResponseRedirect('/thanks/')
    else:
        form = jobpostForm_detail()
        #form.fields['country'].queryset = Country.objects.all()

    c = {}
    c.update(csrf(request))

    return render_to_response('portal/display.html',{
        'form':form,'country_list':country_list
    },context_instance=RequestContext(request)) 
```

我的数据也没有进入数据库

我想显示国家名称..它显示的是国家 ID

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-14T09:51:24.533

注意到您的 models.py 中的**unicode方法是错误的。您不能使用“return”两次。**你应该使用

```
 def __unicode__(self):
        return self.country_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:51:25.420

您可以`initial`在`Form`制作它的对象时使用。

这是一个例子：

```
# In views.py
my_form_obj = FormName(request.POST or None, initial = 
                       {
                           'field_name_in_model': Value_from_model, # This field value will be shown in the form when an unbound form is loaded.
                       }) 
```

请参阅此以获取更多参考[https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values](https://docs.djangoproject.com/en/dev/ref/forms/api/#dynamic-initial-values)

# c# - JSON对象发布使用表单序列化不映射到c#对象

> ID：15756844
> 
> 赞同：2
> 
> 时间：2013-04-02T05:33:45.480
> 
> 标签：c#, jquery, asp.net-mvc, json

我在强类型视图中使用带有 JSON 对象的 ajax post 作为数据。表单序列化工作正常，但在控制器中获取模型时，没有映射属性。在 Firebug 中，我获得了以下快照![Firebug 帖子状态](https://i.stack.imgur.com/zwY9G.png)

如何将序列化的 JSON 对象映射到 c# 对象

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:43:22.337

您必须复制 jquery 扩展才能[将表单转换为 json 对象](http://css-tricks.com/snippets/jquery/serialize-form-to-json/)

```
(function() {
    $.fn.serializeObject = function() {
        var o = {};
        var a = this.serializeArray();
        $.each(a, function() {
                    if (o[this.name]) {
                        if (!o[this.name].push) {
                            o[this.name] = [o[this.name]];
                        }
                        o[this.name].push(this.value || '');
                    } else {
                        o[this.name] = this.value || '';
                    }
                });
        return o;
    };
})(jQuery) 
```

并包含[json2.js](https://raw.github.com/douglascrockford/JSON-js/master/json2.js)库以添加`JSON.stringify()`对旧版浏览器       的支持

然后将您的ajax更改为

```
$.ajax({
    url : '',
     type: 'POST',
    contentType : 'application/json',
    data : JSON.stringify($('form').serializeObject()),
     ....
}) 
```

在你的情况下

```
$('#frm').submit(function() {

    postJSON('@Url.Action("Create", "District")', JSON.stringify($('form').serializeObject()),
            function(result) {
                alert(result.Message);
                if (result.Success) {
                    window.location = '@Url.Action("Index", "District")';
                }
            });
    return false;
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T05:40:18.820

那只是一个标准的序列化形式。它不是 JSON。

你可能想看看[这个](https://stackoverflow.com/questions/1184624/convert-form-data-to-js-object-with-jquery)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-15T16:22:04.263

如果您还想包含复选框和单选按钮，可以使用@Arun_P_Johny 答案，也应该使用以下内容覆盖 serializeArray：

```
$.fn.serializeArray = function (options) {
var o = $.extend({
    checkboxesAsBools: false
}, options || {});

var rselectTextarea = /select|textarea/i;
var rinput = /text|hidden|password|search/i;

return this.map(function () {
    return this.elements ? $.makeArray(this.elements) : this;
})
.filter(function () {
    return this.name && !this.disabled &&
        (this.checked
        || (o.checkboxesAsBools && this.type === 'checkbox')
        || rselectTextarea.test(this.nodeName)
        || rinput.test(this.type));
})
    .map(function (i, elem) {
        var val = $(this).val();
        return val == null ?
        null :
        $.isArray(val) ?
        $.map(val, function (val, i) {
            return { name: elem.name, value: val };
        }) :
        {
            name: elem.name,
            value: (o.checkboxesAsBools && this.type === 'checkbox') ? (this.checked ? 'true' : 'false') : val
        };
    }).get();
}; 
```

serializeObject 应该被修改

```
$.fn.serializeObject = function () {
     var o = {};
     var a = this.serializeArray({ checkboxesAsBools: true });
     $.each(a, function () {
             if (o[this.name] !== undefined) {
                     if (!o[this.name].push) {
                             o[this.name] = [o[this.name]];
                         }
                     o[this.name].push(this.value || '');
                 } else {
                     o[this.name] = this.value || '';
                 }
         });
     return o;
}; 
```

# database-design - 我应该在 WSO2 GREG 中使用依赖项或关联进行建模吗？

> ID：15756845
> 
> 赞同：0
> 
> 时间：2013-04-02T05:33:46.443
> 
> 标签：database-design, wso2, wso2greg

在 WSO2 GREG 中，您可以对对象之间的至少两种类型的关系、关联和依赖关系进行建模。我已经看到两者之间的 Governance API 有所不同 - 对于 API 用户来说，依赖关系可能更直接一些。关联可以有类型。

您会推荐以下方法吗？

```
if (there are more than one type of relation directed from A to B)
     use associations for this relation!
else
     use dependencies for this relation! 
```

在为模型选择关系类型时，您使用哪些标准？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:19:53.507

可以定义从资源到另一个资源的关联。在那里，您可以指向存储在注册表或外部 URL 位置中的资源。定义关联时，您可以在关联配置期间指定关联类型，例如“包含”或“使用”。这些值可以帮助您弄清楚资源之间的关系。

依赖关系是关联的一种特殊化，它表明一个资源依赖于另一个资源（例如：WSDL 文件依赖于某些模式）。

请参考[G-Reg 维基文档](http://docs.wso2.org/wiki/display/Governance453/Managing+Relationships+of+a+Resource)

# jquery - tablesorter 不显示上下箭头

> ID：15756847
> 
> 赞同：6
> 
> 时间：2013-04-02T05:33:53.300
> 
> 标签：jquery, html, css, tablesorter

我正在尝试使用 JQuery tablesoter 插件，但是在显示箭头时，当我按降序或升序排序时，它不会显示向下或向上箭头。它始终显示向上和向下箭头（未排序的箭头）。似乎 table.tablesorter .header {...} 覆盖了 table.tablesorter .headerSortUp {...} 和 table.tablesorter .headerSortDown{...} 样式。下面是我的代码：

CSS

```
table.tablesorter .headerSortUp {
    background-image: url('../images/icons/asc.gif');
    background-repeat: no-repeat;
    background-position: center right;
}
table.tablesorter .headerSortDown {
    background-image: url('../images/icons/desc.gif');
    background-repeat: no-repeat;
    background-position: center right;
}
table.tablesorter .header {
    cursor: pointer;
    background-image: url('../images/icons/bg.gif');
    background-repeat: no-repeat;
    background-position: center right;
} 
```

我的表在速度模板中，但我认为这不会影响这个问题。

```
<table id="harvestTable" class="tablesorter" border="1">
      <thead>
      <tr>
        <th>Source</th>
        <th>Time</th>
      </tr>
      </thead>
      <tbody>
      #foreach($item in $self.harvestlist)
        #set($harvestId = $item.getFirst('harvestId'))
... 
```

我已经在各个文件夹中包含了相关图标。我正在使用 chrome 并在 Firefox 上进行了测试，但两者都不起作用。当我检查 chrome 中的元素时，我可以看到 .header 的图像覆盖了 .headerSortUp 和 .headerSortDown 图像。如果我取消选择 .header 的图像，则正确显示 .headerSortUp 图像。

我在这里错过了什么吗？我非常感谢您的宝贵回复。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T17:00:57.073

您遇到的问题是由于[css 的特殊性](http://www.vanseodesign.com/css/css-specificity-inheritance-cascaade/)（试试[这个计算器](http://specificity.keegan.st/)）：

默认的蓝色主题使用：

```
table.tablesorter thead tr .headerSortUp {} // (0,0,2,3) 
```

因此，为了覆盖它，您需要更高的 css 特异性。一种方法是将 a 添加`th`到排序类​​：

```
table.tablesorter thead tr th.headerSortUp {} // (0,0,2,4) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T10:18:59.453

这是由于 css 偏好规则。始终应用最后匹配的规则。为了克服这种情况，您始终可以使用 !important 修饰符，例如您的情况

```
table.tablesorter .headerSortDown {
 background-image: url('../images/icons/desc.gif') !important; 
```

或者

您只需将 .header css 放在 .headerSortDown 和 .headerSortUp 之前，它就会开始工作。

# android - 使用 asl 库的屏幕截图

> ID：15756848
> 
> 赞同：1
> 
> 时间：2013-04-02T05:33:54.547
> 
> 标签：android, screenshot

我正在使用 asl-native 库来截屏。我在两部手机上试过。
1\. Samsung Galaxy Y, Gingerbread, unroot
2\. Nexus S, Jellybean 4.2, root
即使手机没有root，它也在Galaxy Y上截图。
在 Nexus S，root 手机上，它允许我运行 chmod 0777。我能够复制 asl native 并设置权限。但是当我运行它时，它说“找不到 asl 本机服务”。
我需要在 Nexus S 上运行它，因为我必须执行一些处理。
可能是什么问题？
我在 asl [https://stackoverflow.com/questions/15542092/screen-capture-using-asl-library](https://stackoverflow.com/questions/15542092/screen-capture-using-asl-library)上发现了一个问题，但没有回复。

# mysql - 数据库输出

> ID：15756858
> 
> 赞同：0
> 
> 时间：2013-04-02T05:34:49.337
> 
> 标签：mysql, sql, database

我将数据上传到 dbase，它在 dbase 中看起来不错，例如：

> MAJORPLUS CREATION
> 0023055169
> Diamond Bank Nigeria Plc N26,690.00
> 跟踪：219517
> |
> 
> ENOCH KURE
> 0020477292
> Diamond Bank Nigeria Plc
> N12,560.00
> 跟踪：219675
> |

但输出看起来像这样聚集：

```
MAJORPLUS CREATION 0023055169 Diamond Bank Nigeria Plc N26,690.00 Tracking: 219517 |   ENOCH KURE 0020477292 Diamond Bank Nigeria Plc N12,560.00 Tracking: 219675 | 
```

请问我让它像原始输入一样显示吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:02:27.097

您可以输出数据：

*   在`<pre>`将保留新行的标签中
*   或者（假设您使用的是 PHP）您将需要通过函数输出您的数据，`nl2br`该函数会将您的新行转换为`<br>`标签并创建 HTML 换行符。

# c# - C# 中是否有任何 app.config 文件，就像在 vb 中一样？

> ID：15756861
> 
> 赞同：1
> 
> 时间：2013-04-02T05:35:33.700
> 
> 标签：c#, asp.net, app-config, video-conferencing

在使用 vb.net 的 Windows 应用程序中，会自动创建一个 APP.config 文件。该文件是在使用 C# 开发的 Windows 应用程序中创建的吗？如果是，那么我在哪里可以找到它？
当我在 ASP.net 中开发一个项目时，我必须使用 Web 应用程序进行视频会议，为此我使用了来自 AVSpeed 的 iconf.net dll 文件。如前所述，我必须在其中为 APP.config 文件中的实时应用程序启用标志。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:54:17.063

对于 Web 应用程序，它是 web.config，对于桌面应用程序，它是 app.config。您也可以将配置文件添加到您的项目中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:06:55.523

如果您在 C# 中创建新的 Windows 应用程序，那么默认情况下您不会获得任何应用程序配置文件。要回答您的问题，是的 C# 确实支持 appconfig 文件。您可以添加它们，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/6wXyT.png)

然后，您可以利用其 XML 设置一些值，如下例所示。

```
<configuration>
  <appSettings>
    <add key="TestFlag" value="false" />
    <add key="TestUser" value="somevalue" />
    <add key="TestPass" value="somevalue" />
    <add key="TestRole" value="SA" />
    <add key="TestModeOfOp" value="dssaas" />
    <add key="TestFetchRef" value="" />
    <add key="TestFetchQuoteNo" value="" />
    <add key="TestVersionNo" value=""/>
    <add key="TestProdCode" value="233" />
    <add key="TestSessionID" value="123123"/>
    <add key="TestServiceIP" value="192.168.30.21"/>
  </appSettings>
</configuration> 
```

在我的例子中，我使用 APP.XAML 从 app.config 的 application_startup 中获取值。

# android - 如何默认将 Android 应用程序安装到 SD 卡

> ID：15756862
> 
> 赞同：1
> 
> 时间：2013-04-02T05:35:42.390
> 
> 标签：android, adb

我正在按照本教程将应用程序移动到 sd 卡。

[如何默认将 Android 应用程序安装到 SD 卡](http://www.addictiveblogs.com/how-to-move-all-android-apps-to-sd-card-without-rooting-device/)

但我的默认位置没有改变。我的手机内存已满，无法安装新应用。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-04-02T05:37:46.400

Android Tools Update 命令`adb shell pm setInstallLocation 2`更改为后`adb shell pm set-install-location 2` （注意命令区分大小写）

更新的教程可以在[这里](http://www.addictiveblogs.com/how-to-move-all-android-apps-to-sd-card-without-rooting-device/)建立。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-02T05:39:13.007

**android:installLocation="preferExternal"**

```
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.example.fpm"
    android:versionCode="1"
    android:versionName="1.0"
  android:installLocation="preferExternal"
     > 
```

[参考](http://developer.android.com/guide/topics/data/install-location.html)

# sql - 如何在连接多个必须是 PIVOT 的表时创建临时表

> ID：15756867
> 
> 赞同：0
> 
> 时间：2013-04-02T05:36:22.603
> 
> 标签：sql, sql-server, sql-server-2008-r2, pivot

我对不同的表有类似的 3-4 个脚本来动态 PIVOT，就像之前发布的 [Dynamic Pivot (row to columns)](https://stackoverflow.com/questions/14224371/dynamic-pivot-row-to-columns/14224646#14224646)

目标： - 创建一个 excel 文件连接 PIVOTed 表中的所有字段（每个表中的所有行）

脚步：

*   为每个集合创建单独的临时表（在不同表上进行透视之后）

*   加入列 ID 上的所有临时表

*   从结果集中选择列（所有临时表）

**想知道是否有更好的方法来创建临时表，该方法使用连接所有表以进行最终选择的过程。

**我尝试创建临时表但收到错误：无效对象

由于上一篇文章中接受的答案**

```
INSERT into #T1 execute('execute' + @query )
select * from #T1 
```

**

* * *

**案例 1：在您的桌子上旋转**

```
DECLARE @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsPivot = STUFF((SELECT ',' 
                      + quotename('Instance'+ cast(instance as varchar(10))+'_'+c.name)
                    from yourtable t
                    cross apply sys.columns as C
                    where C.object_id = object_id('yourtable') and
                         C.name not in ('id', 'instance')
                    group by t.instance, c.name
                    order by t.instance
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
      from
      (
        select id, 
          ''Instance''+cast(instance as varchar(10))+''_''+col col, 
          value
        from 
        (
          select id, 
            Instance, 
            Name, 
            cast(Size as varchar(50)) Size,
            Tech
          from yourtable
        ) x
        unpivot
        (
          value
          for col in (Name, Size, Tech)
        ) u 
      ) x1
      pivot
      (
        max(value)
        for col in ('+ @colspivot +')
      ) p'

--exec(@query) 
```

**我尝试创建临时表，但由于上一篇文章中接受的答案而得到错误：无效对象**

```
INSERT into #T1 execute('execute' + @query )
select * from #T1 
```

**案例 2：MYtable 的相同代码 PIVOT**

```
DECLARE @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsPivot = STUFF((SELECT ',' 
                      + quotename('Instance'+ cast(instance as varchar(10))+'_'+c.name)
                    from mytable t
                    cross apply sys.columns as C
                    where C.object_id = object_id('yourtable') and
                         C.name not in ('id', 'instance')
                    group by t.instance, c.name
                    order by t.instance
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
      from
      (
        select id, 
          ''Instance''+cast(instance as varchar(10))+''_''+col col, 
          value
        from 
        (
          select id, 
            Instance, 
            Name, 
            cast(Size as varchar(50)) Size,
            Tech
          from mytable
        ) x
        unpivot
        (
          value
          for col in (Name, Size, Tech)
        ) u 
      ) x1
      pivot
      (
        max(value)
        for col in ('+ @colspivot +')
      ) p'

    INSERT into #T2 execute('execute' + @query2 )
    select * from #T2 
```

** 案例 3：OurTable 的相同代码 PIVOT**

```
DECLARE @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsPivot = STUFF((SELECT ',' 
                      + quotename('Instance'+ cast(instance as varchar(10))+'_'+c.name)
                    from ourtable t
                    cross apply sys.columns as C
                    where C.object_id = object_id('yourtable') and
                         C.name not in ('id', 'instance')
                    group by t.instance, c.name
                    order by t.instance
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
      from
      (
        select id, 
          ''Instance''+cast(instance as varchar(10))+''_''+col col, 
          value
        from 
        (
          select id, 
            Instance, 
            Name, 
            cast(Size as varchar(50)) Size,
            Tech
          from ourtable
        ) x
        unpivot
        (
          value
          for col in (Name, Size, Tech)
        ) u 
      ) x1
      pivot
      (
        max(value)
        for col in ('+ @colspivot +')
      ) p'

   INSERT into #T3 execute('execute' + @query2 )
    select * from #T3 
```

**最终选择：**

```
select * from #T1
inner join #T1.id=#T2.id
inner join #T1.id=#T3.id 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T15:42:12.540

您的部分问题是您正在使用动态 sql，并且您希望将其插入临时表以供以后使用。以下是与此相关的问题：

*   之前无法创建临时表，因为列数未知。
*   在动态 SQL 中创建的临时表将超出使用范围。创建本地临时表（以单个 # 符号开头的临时表）时存在此问题

如果您想将这些多个表连接在一起，那么您可以创建一个全局临时表或一个可以在动态 SQL 执行期间创建并在该范围之外使用的真实表（不是临时表）。

[使用来自OP](https://stackoverflow.com/questions/14224371/dynamic-pivot-row-to-columns/14224646#14224646)的代码，我使用正在创建的表对其进行了更改：

```
DECLARE @query  AS NVARCHAR(MAX),
    @colsPivot as  NVARCHAR(MAX)

select @colsPivot = STUFF((SELECT ',' 
                      + quotename('Instance'+ cast(instance as varchar(10))+'_'+c.name)
                    from yourtable t
                    cross apply sys.columns as C
                    where C.object_id = object_id('yourtable') and
                         C.name not in ('id', 'instance')
                    group by t.instance, c.name
                    order by t.instance
            FOR XML PATH(''), TYPE
            ).value('.', 'NVARCHAR(MAX)') 
        ,1,1,'')

set @query 
  = 'select *
     into ##t1  -- < create global temp table or real table without the ##
      from
      (
        select id, 
          ''Instance''+cast(instance as varchar(10))+''_''+col col, 
          value
        from 
        (
          select id, 
            Instance, 
            Name, 
            cast(Size as varchar(50)) Size,
            Tech
          from yourtable
        ) x
        unpivot
        (
          value
          for col in (Name, Size, Tech)
        ) u 
      ) x1
      pivot
      (
        max(value)
        for col in ('+ @colspivot +')
      ) p'

exec(@query);

select * from ##t1 
```

请参阅[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/db967/21)。

这将允许您将多个表连接在一起。

参考：

*   [SQL Server 中的临时表](https://www.simple-talk.com/sql/t-sql-programming/temporary-tables-in-sql-server/)

# performance - 如何优化以下子程序？

> ID：15756870
> 
> 赞同：-1
> 
> 时间：2013-04-02T05:36:28.360
> 
> 标签：performance, perl, optimization, hash, reference

这是我要优化的子程序。它大部分使用数组引用。目前这个子程序大约需要。平均运行 30-40 秒。如果可能的话，我想将其减少到 10 秒。你有没有看到任何不必要的东西突然出现在你面前？

```
sub compute{
    # takes two params: 2 array_refs
    my ($gene_exp_ref, $centroids_ref) = @_;
    my ($numerator, $denominator) = 0;

    my ($prod_ref, $diff_x_ref, $diff_y_ref, $x_sq_ref, $y_sq_ref) = [];  # diff_y is the center_gene
    my %gene_center_pcc;                   # diff_x is gene of interest

    my $gene_exp_average = mean($gene_exp_ref);

    for my $gene_exp (@{$gene_exp_ref}) {
        push(@{ $diff_x_ref }, ($gene_exp - $gene_exp_average));
    }

    # possible bottleneck
    for my $centroid_gene_exp_ref (values %{$centroids_ref}){
        $diff_y_ref = [];  # initilize back to empty array
        for my $index (@{$centroid_gene_exp_ref}) {
            push(@{ $diff_y_ref }, ($index - mean($centroid_gene_exp_ref)));
        }

        @{ $prod_ref } = map { @{ $diff_x_ref }[$_] * @{ $diff_y_ref }[$_] } 0..$#{ $diff_x_ref };

        $numerator = sum($prod_ref);

        @{ $x_sq_ref } = map {$_*$_}@$diff_x_ref;
        @{ $y_sq_ref } = map {$_*$_}@$diff_y_ref;

        $denominator = sqrt(sum($x_sq_ref)) * sqrt(sum($y_sq_ref));

        my $r = $numerator/$denominator;

        my ($center) = grep { @{$gene_centers{$_}} ~~ @$centroid_gene_exp_ref } keys %gene_centers;
        $gene_center_pcc{$center} = $r;
    }

#return the center with the highest PCC
return (sort {$gene_center_pcc{$b} <=> $gene_center_pcc{$a}}
    keys %gene_center_pcc)[0];
} 
```

每个计算和数字运算步骤都是必要的。它可以编译，但除非您有数据文件，否则您将无法正确使用子例程。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T05:44:03.573

```
for my $index (@{$centroid_gene_exp_ref}) {
    push(@{ $diff_y_ref }, ($index - mean($centroid_gene_exp_ref)));
} 
```

这将重新计算 中每个项目的平均值`@{$centroid_gene_exp_ref}`。如果该数组很大，它将以指数方式增加（我假设它`mean()`不会缓存或记忆结果，每次调用它时都会强制它循环遍历数组）。您可以通过自己缓存均值来节省大量时间：

```
my $mean = mean($centroid_gene_exp_ref);
for my $index (@{$centroid_gene_exp_ref}) {
    push(@{ $diff_y_ref }, ($index - $mean));
} 
```

除此之外，请与[Devel::NYTProf 联系](https://metacpan.org/module/Devel%3a%3aNYTProf)，以找到您的实际瓶颈和目标优化。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T07:45:33.093

您需要从大局来看，考虑到您之前的帖子，您在该帖子中表明您调用`compute()`了每个键`%$centroids_ref`：

```
foreach my $key ( keys %HoA ) {
    compute($HoA{$key}, \%HoA);  # on the first iteration, this actually passes an aref to [1,3,3,3]
} 
```

即使经过 Dave Sherohman 的优化，您仍然会一遍又一遍地进行大量计算（如`mean`）。

我的建议是你将外循环带入`compute()`. 然后对于 HoA 中的每个键，您可以存储您的计算并为每个键重用这些值。

```
sub compute{
    my ($centroids_ref) = @_;

    # precalculate these values once
    my %means;
    my %diffs;
    my %sqrts;
    foreach my $key (keys %$centroids_ref) {
        my $mean = mean($centroids_ref->{$key});
        my @diffs = map {$_ - $mean} @{$centroids_ref->{$key}};

        my @squares = map {$_ * $_} @diffs;
        my $sqrt = sqrt(sum(\@squares));

        $means{$key} = $mean;
        $diffs{$key} = \@diffs;
        $sqrts{$key} = $sqrt;
    }

    # now do the main calculations from the 'possible bottlenecks' section
    ...
} 
```

# android - 捏缩放闪烁

> ID：15756871
> 
> 赞同：1
> 
> 时间：2013-04-02T05:36:37.173
> 
> 标签：android

我正在尝试通过捏合来缩放我的应用程序中的布局，并且我已经找到了它的教程。但我的问题是当我捏缩放时闪烁。

谁能知道平滑缩放布局的不同方法？

这是我的代码：

```
 public class ZoomActivity extends Activity {

    View mainView = null;
    PointF start = new PointF();
    PointF mid = new PointF();
    float oldDist = 1f;
    PointF oldDistPoint = new PointF();

    public static String TAG = "ZOOM";

    static final int NONE = 0;
    static final int DRAG = 1;
    static final int ZOOM = 2;
    int mode = NONE;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.landingpage);
        mainView = (LinearLayout) findViewById(R.id.linear);

        mainView.setOnTouchListener(new OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                Log.d(TAG, "mode=DRAG");
                switch (event.getAction() & MotionEvent.ACTION_MASK) {
                case MotionEvent.ACTION_DOWN:
                    start.set(event.getX(), event.getY());
                    Log.d(TAG, "mode=DRAG");
                    mode = DRAG;

                    break;
                case MotionEvent.ACTION_POINTER_DOWN:
                    oldDist = spacing(event);
                    oldDistPoint = spacingPoint(event);
                    Log.d(TAG, "oldDist=" + oldDist);
                    if (oldDist > 10f) {
                        midPoint(mid, event);
                        mode = ZOOM;
                        Log.d(TAG, "mode=ZOOM");
                    }
                    System.out.println("current time :"
                            + System.currentTimeMillis());
                    break;// return !gestureDetector.onTouchEvent(event);
                case MotionEvent.ACTION_UP:
                case MotionEvent.ACTION_POINTER_UP:
                    Log.d(TAG, "mode=NONE");
                    mode = NONE;
                    break;
                case MotionEvent.ACTION_MOVE:
                    if (mode == DRAG) {

                    } else if (mode == ZOOM) {
                        PointF newDist = spacingPoint(event);
                        float newD = spacing(event);
                        Log.e(TAG, "newDist=" + newDist);
                        float[] old = new float[9];
                        float[] newm = new float[9];
                        Log.e(TAG, "x=" + old[0] + ":&:" + old[2]);
                        Log.e(TAG, "y=" + old[4] + ":&:" + old[5]);
                        float scale = newD / oldDist;
                        float scalex = newDist.x / oldDistPoint.x;
                        float scaley = newDist.y / oldDistPoint.y;
                        zoom(scale, scale, start);
                    }
                    break;
                }
                return true;
            }
        });
    }

    /**
     * zooming is done from here
     */
    public void zoom(Float scaleX, Float scaleY, PointF pivot) {
        mainView.setPivotX(pivot.x);
        mainView.setPivotY(pivot.y);
        mainView.setScaleX(scaleX);
        mainView.setScaleY(scaleY);
    }

    /**
     * space between the first two fingers
     */
    private float spacing(MotionEvent event) {
        // ...
        float x = event.getX(0) - event.getX(1);
        float y = event.getY(0) - event.getY(1);
        return FloatMath.sqrt(x * x + y * y);
    }

    private PointF spacingPoint(MotionEvent event) {
        PointF f = new PointF();
        f.x = event.getX(0) - event.getX(1);
        f.y = event.getY(0) - event.getY(1);
        return f;
    }

    /**
     * the mid point of the first two fingers
     */
    private void midPoint(PointF point, MotionEvent event) {
        // ...
        float x = event.getX(0) + event.getX(1);
        float y = event.getY(0) + event.getY(1);
        point.set(x / 2, y / 2);
    }

} 
```

# php - 使用 json decode 和 curl 从 facebook 获取或显示数据时出错

> ID：15756874
> 
> 赞同：0
> 
> 时间：2013-04-02T05:36:47.653
> 
> 标签：php, json, facebook, curl

```
<?php

function curl($url){
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL, $url);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,1);
    $data = curl_exec($ch);
    curl_close($ch);
    return $data;
}

$status_all = "https://api.facebook.com/method/fql.query?query=SELECT type, app_id, comments, post_id, actor_id, target_id, message, created_time FROM stream WHERE source_id IN (SELECT uid2 FROM friend WHERE uid1=me())&limit=50&format=json&access_token=XXXXXX";
$status_all = json_decode(curl($status_all));

if(count($status_all)>=0){
    foreach($status_all as $status){
        echo $status->type;
    }
}

?> 
```

但它返回：警告：在第 16 行的 file.php 中为 foreach() 提供的参数无效

知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T05:44:55.907

为了使我的评论更容易，请回答表格以使其格式化，请尝试：

```
$q = urlencode("SELECT type, app_id, comments, post_id, actor_id, target_id, message, created_time FROM stream WHERE source_id IN (SELECT uid2 FROM friend WHERE uid1=me())"
$status_all = "https://api.facebook.com/method/fql.query?query=$q&limit=50&format=json&access_token=XXXXXX";
$status_all = json_decode(curl($status_all)); 
```

# knockout.js - 用“with”或foreach敲除数据绑定？

> ID：15756875
> 
> 赞同：2
> 
> 时间：2013-04-02T05:36:49.597
> 
> 标签：knockout.js, knockout-templating

我对 Knockout 很陌生，并试图探索它。我知道如何使用 foreach 但对“与”感到困惑。我刚刚浏览了 With 的淘汰赛文档（[http://knockoutjs.com/documentation/with-binding.html](http://knockoutjs.com/documentation/with-binding.html)）。还是喜欢：

1）我什么时候应该使用“with”

2) with 是 foreach 的替代品吗？

3）“with”和foreach有什么区别吗

提前感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T07:28:19.850

1) **with**是一个内联模板绑定，当子 ViewModel 为空时想要隐藏区域时常用，当要将上下文从父模型更改为子模型时使用它也是一个好习惯。

2) 不是真的，适**​​用于**任何对象。如果您的数组可以为空，那么**with**很好（如果**foreach**绑定适用于空值，我不记得了）

3）是的，它们完全不同。**With**不提供数组 foreach 模板功能，如果您想与数组一起使用**，**那么您需要在**with中使用****foreach**绑定。

 **还可以看看我的 Convention over configuration library，它消除了所有关于绑定的麻烦，这里有**一个**例子

[https://github.com/AndersMalmgren/Knockout.BindingConventions/wiki/With-convention](https://github.com/AndersMalmgren/Knockout.BindingConventions/wiki/With-convention)

编辑：我的库抽象了**with**绑定，上面 Github 链接中的示例在没有我的约定库的情况下看起来像这样

```
<select data-bind="options: items, value: selectedItem, optionsText: 'name', optionsCaption: 'Select...'"></select>

<div data-bind="with: selectedItem">
    <span data-bind="text: name"></span>
</div> 
```**

# orchardcms - 无法在 Godaddy 虚拟主机上安装 Orchard CMS 1.6

> ID：15756876
> 
> 赞同：0
> 
> 时间：2013-04-02T05:36:51.040
> 
> 标签：orchardcms, orchardcms-1.6

在网上阅读了 Orchard CMS 可以安装在共享主机上之后，我尝试在带有 MySQL 数据库的 Godaddy Web Hosting 上安装 Orchard CMS 1.6。我执行了以下步骤 -

*   验证我的根目录设置为集成管道模式。
*   从 Codeplex 下载 ZIP 包并上传到我的主机帐户的根目录
*   在 Godaddy 文件管理器中，将写入权限设置为以下文件夹（App_Data、Config、Themes、Media、Modules）
*   还创建了一个MYSQL数据库

**当我第一次**访问 Orchard时出现内部服务器错误，为了查看错误消息，我修改了 Web.config 并收到一条长错误消息，如下所示

```
Server Error in '/' Application.
Inheritance security rules violated while overriding member: 'log4net.Util.ReadOnlyPropertiesDictionary.GetObjectData(System.Runtime.Serialization.SerializationInfo, System.Runtime.Serialization.StreamingContext)'. Security accessibility of the overriding method must match the security accessibility of the method being overriden.

Description: An unhandled exception occurred during the execution of the current web request. Please review the stack trace for more information about the error and where it originated in the code. 

Exception Details: System.TypeLoadException: Inheritance security rules violated while overriding member: 'log4net.Util.ReadOnlyPropertiesDictionary.GetObjectData(System.Runtime.Serialization.SerializationInfo, System.Runtime.Serialization.StreamingContext)'. Security accessibility of the overriding method must match the security accessibility of the method being overriden.

Source Error:
An unhandled exception was generated during the execution of the current web request. Information regarding the origin and location of the exception can be identified using the exception stack trace below.

Stack Trace:
[TypeLoadException: Inheritance security rules violated while overriding member: 'log4net.Util.ReadOnlyPropertiesDictionary.GetObjectData(System.Runtime.Serialization.SerializationInfo, System.Runtime.Serialization.StreamingContext)'. Security accessibility of the overriding method must match the security accessibility of the method being overriden.]
log4net.Repository.Hierarchy.Hierarchy..ctor(ILoggerFactory loggerFactory) +0
log4net.Repository.Hierarchy.Hierarchy..ctor() +22

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
System.RuntimeTypeHandle.CreateInstance(RuntimeType type, Boolean publicOnly, Boolean noCheck, Boolean& canBeCached, RuntimeMethodHandleInternal& ctor, Boolean& bNeedSecurityCheck) +0
System.RuntimeType.CreateInstanceSlow(Boolean publicOnly, Boolean skipCheckThis, Boolean fillCache) +98
System.RuntimeType.CreateInstanceDefaultCtor(Boolean publicOnly, Boolean skipVisibilityChecks, Boolean skipCheckThis, Boolean fillCache) +241
System.Activator.CreateInstance(Type type, Boolean nonPublic) +69
log4net.Core.DefaultRepositorySelector.CreateRepository(String repositoryName, Type repositoryType) +509
log4net.Core.DefaultRepositorySelector.CreateRepository(Assembly repositoryAssembly, Type repositoryType, String repositoryName, Boolean readAssemblyAttributes) +457
log4net.Core.DefaultRepositorySelector.CreateRepository(Assembly repositoryAssembly, Type repositoryType) +17
log4net.Core.DefaultRepositorySelector.GetRepository(Assembly repositoryAssembly) +42
log4net.Core.LoggerManager.GetLogger(Assembly repositoryAssembly, String name) +55
log4net.LogManager.GetLogger(Assembly repositoryAssembly, String name) +8
log4net.LogManager.GetLogger(String name) +20
Orchard.Logging.OrchardLog4netFactory.Create(String name) in OrchardLog4netFactory.cs:28
Castle.Core.Logging.AbstractLoggerFactory.Create(Type type) +31
Orchard.Logging.CastleLoggerFactory.CreateLogger(Type type) in CastleLoggerFactory.cs:12
Orchard.Logging.LoggingModule.CreateLogger(IComponentContext context, IEnumerable`1 parameters) in LoggingModule.cs:75
Autofac.Builder.<>c__DisplayClass1`1.<ForDelegate>b__0(IComponentContext c, IEnumerable`1 p) +17
Autofac.Core.Activators.Delegate.DelegateActivator.ActivateInstance(IComponentContext context, IEnumerable`1 parameters) +30
Autofac.Core.Resolving.InstanceLookup.Activate(IEnumerable`1 parameters) +48
Autofac.Core.Resolving.InstanceLookup.Execute() +48
Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, IComponentRegistration registration, IEnumerable`1 parameters) +167
Autofac.Core.Resolving.InstanceLookup.ResolveComponent(IComponentRegistration registration, IEnumerable`1 parameters) +23
Autofac.ResolutionExtensions.TryResolveService(IComponentContext context, Service service, IEnumerable`1 parameters, Object& instance) +72
Autofac.ResolutionExtensions.ResolveService(IComponentContext context, Service service, IEnumerable`1 parameters) +54
Autofac.ResolutionExtensions.Resolve(IComponentContext context, IEnumerable`1 parameters) +121
Orchard.Logging.<>c__DisplayClass11.<BuildLoggerInjectors>b__8(String key) in LoggingModule.cs:65
System.Collections.Concurrent.ConcurrentDictionary`2.GetOrAdd(TKey key, Func`2 valueFactory) +72
Orchard.Logging.<>c__DisplayClassf.<BuildLoggerInjectors>b__7(IComponentContext ctx, Object instance) in LoggingModule.cs:65
Orchard.Logging.<>c__DisplayClass1.<AttachToComponentRegistration>b__0(Object s, ActivatedEventArgs`1 e) in LoggingModule.cs:40
Autofac.Core.Registration.ComponentRegistration.RaiseActivated(IComponentContext context, IEnumerable`1 parameters, Object instance) +70
Autofac.Core.Resolving.InstanceLookup.Complete() +85
Autofac.Core.Resolving.ResolveOperation.CompleteActivations() +114
Autofac.Core.Resolving.ResolveOperation.GetOrCreateInstance(ISharingLifetimeScope currentOperationScope, IComponentRegistration registration, IEnumerable`1 parameters) +207
Autofac.Core.Resolving.ResolveOperation.Execute(IComponentRegistration registration, IEnumerable`1 parameters) +50

[DependencyResolutionException: An exception was thrown while executing a resolve operation. See the InnerException for details.]
Autofac.Core.Resolving.ResolveOperation.Execute(IComponentRegistration registration, IEnumerable`1 parameters) +119
Autofac.Core.Lifetime.LifetimeScope.ResolveComponent(IComponentRegistration registration, IEnumerable`1 parameters) +159
Autofac.Core.Container.ResolveComponent(IComponentRegistration registration, IEnumerable`1 parameters) +17
Autofac.ResolutionExtensions.TryResolveService(IComponentContext context, Service service, IEnumerable`1 parameters, Object& instance) +72
Autofac.ResolutionExtensions.ResolveService(IComponentContext context, Service service, IEnumerable`1 parameters) +54
Autofac.ResolutionExtensions.Resolve(IComponentContext context, IEnumerable`1 parameters) +121
Orchard.Environment.OrchardStarter.CreateHostContainer(Action`1 registrations) in OrchardStarter.cs:132
Orchard.Web.MvcApplication.HostInitialization(HttpApplication application) in Global.asax.cs:46
Orchard.WarmupStarter.<>c__DisplayClass3.<LaunchStartupThread>b__2(Object state) in Starter.cs:89

[ApplicationException: Error during application initialization]
Orchard.WarmupStarter.Starter`1.OnBeginRequest(HttpApplication application) in Starter.cs:63
Orchard.Web.MvcApplication.Application_BeginRequest() in Global.asax.cs:29

[TargetInvocationException: Exception has been thrown by the target of an invocation.]
System.RuntimeMethodHandle._InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, SignatureStruct& sig, MethodAttributes methodAttributes, RuntimeType typeOwner) +0
System.RuntimeMethodHandle.InvokeMethodFast(IRuntimeMethodInfo method, Object target, Object[] arguments, Signature sig, MethodAttributes methodAttributes, RuntimeType typeOwner) +72
System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture, Boolean skipVisibilityChecks) +335
System.Reflection.RuntimeMethodInfo.Invoke(Object obj, BindingFlags invokeAttr, Binder binder, Object[] parameters, CultureInfo culture) +28
System.Reflection.MethodBase.Invoke(Object obj, Object[] parameters) +19
System.Web.Util.ArglessEventHandlerProxy.Callback(Object sender, EventArgs e) +57
System.Web.SyncEventExecutionStep.System.Web.HttpApplication.IExecutionStep.Execute() +148
System.Web.HttpApplication.ExecuteStep(IExecutionStep step, Boolean& completedSynchronously) +75

Version Information: Microsoft .NET Framework Version:4.0.30319; ASP.NET Version:4.0.30319.272 
```

以前有没有人见过这个错误，我是 Orchard 和 ASP.NET MVC 的新手

请帮忙，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:16:28.043

GoDaddy 显然没有给你完全的信任，这是必需的。今天没有充分的理由让主机不给予完全信任。您应该尝试找到一家好的托管公司。

更新：GoDaddy 现在提供完全信任，并且可以在那里运行 Orchard。出于多种原因，我个人不喜欢这样做，但这可能有点离题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:39:31.087

为了在 godaddy 上托管 orchid cms，您需要对在共享托管下不允许的程序集具有读/写/删除权限。您需要完全访问和完全信任，就像 roy 说的那样，您必须拥有完全信任的专用托管或共享托管。

谢谢

# git - GIT樱桃挑选如何找出已经挑选的或不挑选的

> ID：15756877
> 
> 赞同：1
> 
> 时间：2013-04-02T05:36:57.557
> 
> 标签：git, git-cherry-pick

我想在我挑选到回购之前确认 SHA 是否被挑选，其他人？如何找出是否有人已经挑选了 SHA？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T12:10:41.427

如果它被选中

```
git cherry-pick -x <sha1> 
```

那么提交消息将包含原始提交 ID（“ `(cherry picked from commit ...)`”）。所以：

```
git log --grep <sha1> 
```

会找到的。否则，`git cherry`将建议尚未选择到当前分支的提交。要查看该提交是否仍然是选择的候选者：

```
git cherry <upstream> | fgrep <sha1> 
```

如果您继续尝试再次选择，在没有冲突的情况下，`cherry-pick`第二次运行不会做出任何更改。如果存在*冲突*，您需要检查日志以了解它已被应用的迹象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:41:59.890

精心挑选的提交的 SHA1 在重新创建时会发生更改，因此您无法在日志中搜索原始提交（一个选项允许在消息日志中引用它，但您不能确定它是否被使用） .

所以你必须搜索日志消息：

```
git log --grep="the log message" 
```

如果结果出现，它将是精心挑选的提交。

# php - codeigniter .htaccess godaddy 数据库

> ID：15756878
> 
> 赞同：0
> 
> 时间：2013-04-02T05:36:59.473
> 
> 标签：php, .htaccess, codeigniter

家用控制器没问题

无法使用重写访问其他 Codeigniter 控制器，而是显示

```
Database connection error (2): Could not connect to MySQL. 
```

但是使用 index.php/[nameofcontrollerorroute] 它正常显示...我不认为数据库连接是问题，因为我可以访问 Home 控制器 w/c 已经连接到数据库，当然，并使用 index.php/ [名称控制器或路由]

.ht 访问：

```
RewriteEngine on
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php?/$1 [L] 
```

我还尝试更改配置值 [uri_protocol & index_page]，但仍然没有更改。

我正在使用 GoDaddy 托管，并且 codeigniter 位于子目录中，我已经在 stackoverflow 问题中尝试了不同的解决方案。有任何想法吗？

使用 XAMPP 进行本地化非常好

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:47:14.350

试试这个 .htaccess 适用于我在 codeigniter 中并托管在 godaddy 上的网站。

```
<IfModule mod_rewrite.c>
       RewriteEngine On
        #AddHandler application/x-httpd-php5 .php
        RewriteBase /

        #Removes access to the system folder by users.
        #Additionally this will allow you to create a System.php controller,
        #previously this would not have been possible.
        #'system' can be replaced if you have renamed your system folder.

        RewriteCond %{REQUEST_URI} ^system.*
        RewriteRule ^(.*)$ /index.php?/$1 [L]

        #Checks to see if the user is attempting to access a valid file,
        #such as an image or css document, if this isn't true it sends the
        #request to index.php

        RewriteCond %{REQUEST_FILENAME} !-f
        RewriteCond %{REQUEST_FILENAME} !-d
        RewriteRule ^(.*)$ index.php?/$1 [L]

    </IfModule>

    <IfModule !mod_rewrite.c>
       # If we don't have mod_rewrite installed, all 404's
       # can be sent to index.php, and everything works as normal.
       # Submitted by: ElliotHaughin

       ErrorDocument 404 /index.php
    </IfModule> 
```

# model-view-controller - Sencha-Touch MVC 应用程序的 UML 图？

> ID：15756879
> 
> 赞同：2
> 
> 时间：2013-04-02T05:37:07.403
> 
> 标签：model-view-controller, sencha-touch, uml, sencha-touch-2

我是一名学生，我刚刚使用 Sencha Touch 开发了一个应用程序，它遵循 MVCS 架构。

它包括许多 java-script model-view-controller 和 store 类。

应用程序工作正常，但问题在于它的文档。

**你能帮我举一个很好的例子来展示各种 UML 图（类、活动、用例）以及它们是如何为 MVC 应用程序设计的吗？**

任何教程或博客文章也会有所帮助。

课程列表很大，所以我不确定是否应该把它放在这里。

# c# - 如何在asp.net2.0中实现如下代码？

> ID：15756883
> 
> 赞同：1
> 
> 时间：2013-04-02T05:37:16.483
> 
> 标签：c#, asp.net-2.0

由于我在使用以下类时使用的是 asp.net2.0，因此出现以下错误。

```
Error 1 : The type or namespace name 'var' could not be found (are you missing a using directive or an assembly reference?) 
```

我用过的类。如何在 asp.net2.0 中使用此代码而不会出现任何错误

```
public static XElement GetGeocodingSearchResults(string address)
{
    // Use the Google Geocoding service to get information about the user-entered address
    // See http://code.google.com/apis/maps/documentation/geocoding/index.html for more info...
    var url = String.Format("http://maps.google.com/maps/api/geocode/xml?  
    address={0}&sensor=false", HttpContext.Current.Server.UrlEncode(address));

    // Load the XML into an XElement object (whee, LINQ to XML!)
    var results = XElement.Load(url);

    // Check the status
    var status =results.Element ("status").Value;
    if (status != "OK" && status != "ZERO_RESULTS")
        // Whoops, something else was wrong with the request...
        throw new ApplicationException("There was an error with Google's Geocoding Service: " + status);

    return results;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:39:15.927

`var`只是右侧表达式实际类型的[快捷方式。](http://msdn.microsoft.com/en-us/library/bb383973.aspx)

```
public static XElement GetGeocodingSearchResults(string address)
{
    // Use the Google Geocoding service to get information about the user-entered address
    // See http://code.google.com/apis/maps/documentation/geocoding/index.html for more info...
    string url = String.Format("http://maps.google.com/maps/api/geocode/xml?address={0}&sensor=false",
       HttpContext.Current.Server.UrlEncode(address));

    // Load the XML into an XElement object (whee, LINQ to XML!)
    XElement results = XElement.Load(url);

    // Check the status
    string status =results.Element ("status").Value;
    if (status != "OK" && status != "ZERO_RESULTS")
        // Whoops, something else was wrong with the request...
        throw new ApplicationException("There was an error with Google's Geocoding Service: " + status);

    return results;
} 
```

**但是** `LINQ to XML`（和整个`LINQ`功能）仅在 .NET 3.5 及更高版本中可用。您应该升级到 .NET 3.5 或[切换到](https://stackoverflow.com/questions/10375038/linq-to-xml-in-net-2-0) `System.Xml`

# javascript - 获取点击元素的div父元素，以便在同一个div中获取p类

> ID：15756888
> 
> 赞同：1
> 
> 时间：2013-04-02T05:37:28.483
> 
> 标签：javascript, jquery, dynamic

我有一个看起来像这样的 div：

```
<td id="monday">
<p class="outter">whatever here</p>
<p class="hidden" style="display:none">Some content I want to get</p>
</td> 
```

现在的问题是 - td id 会改变（这只是其中之一）。

所以我想要做的是，当用户点击 .outter（它总是被称为 outter）时，我想找到 td id，以便然后访问 p 类（它总是被“隐藏”）。

所以我试过这个（document.body 是为了解决我遇到的动态加载问题）：

```
$(document.body).on('click', '.outter', function() {
        var info = $(this).parent("td").$(".hidden").text();
        $("#rightBox").css("width", "200px");
        $("#rightBox").css("background", "#f0f0f0");
        $("#rightBox").empty();
        $("#rightBox").append(info);
    }); 
```

我遇到的问题是在第一行，获取变量。我想说这个特殊的 .outter 类，找到它的父类，然后找到它里面的隐藏类。然后获取该隐藏类中的文本。然后获取该变量并将其转储到#rightBox;

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T05:40:44.497

该行`var info = $(this).parent("td").$(".hidden").text();`抛出错误，您应该使用`find`or`children`方法，因为目标元素是单击元素的下一个直接兄弟，您可以使用`next`方法，您不需要父元素的ID。

```
$(document.body).on('click', '.outter', function() {
    // var info = $(this).closest('td').find('.hidden').text();
    var info = $(this).next('.hidden').text();
    $("#rightBox").css({"width": "200px", "background": "#f0f0f0"})
                  .html(info);
}); 
```

请注意，您还可以创建一个类并使用`addClass`方法而不是`css`方法，这使您的代码更简洁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:46:10.763

你可以这样做：

```
$(document.body).on('click', '.outter', function() {
    var info = $(this).next().text();
    $("#rightBox").css("width", "200px");
    $("#rightBox").css("background", "#f0f0f0");
    $("#rightBox").empty();
    $("#rightBox").append(info);
}); 
```

演示：http: [//jsfiddle.net/eMzcx/](http://jsfiddle.net/eMzcx/)

# php - 在 extjs 中如何获取上传文件的内容

> ID：15756890
> 
> 赞同：6
> 
> 时间：2013-04-02T05:37:44.003
> 
> 标签：php, file-upload, extjs4

我正在研究 extjs+php 中的文件上传功能。我想从 extjs 上传文件或图像，并需要将其发送到我正在用 PHP 设计的服务器端。在 extjs 中，我查看文件的代码为-

```
Ext.define('Balaee.view.kp.dnycontent.Content', 
{
    extend:'Ext.panel.Panel',
    requires:[
              'Balaee.view.kp.dnycontent.ContentView'
              ],
    id:'ContentId',
    alias:'widget.Content',
    title:'This day in a history',
    items:[
     {
        xtype: 'fileuploadfield',
        hideLabel: true,
        emptyText: 'Select a file to upload...',
        id: 'upfile',
        //name:'file',
         width: 220
}],
    buttons:[
    {
        text: 'Upload',
        handler: function () {
            var file = Ext.getCmp('upfile').getEl().down('input[type=file]').dom.files[0];            console.log(file);
             var reader = new FileReader();
             filecontent=reader.readAsBinaryString(file);
             console.log(filecontent);
        }
    }
] 
```

});

因此，当我尝试使用上述代码上传图像文件时。上面的行： `Ext.getCmp('upfile').getEl().down('input[type=file]').dom.files[0];`将文件的信息存储为：

```
File {
    webkitRelativePath: "", 
    lastModifiedDate: Tue Jul 14 2009 11:02:31 GMT+0530 (India Standard Time), 
    name: "Koala.jpg", 
    type: "image/jpeg", 
    size: 780831…
 } 
```

即检索与文件相关的信息。但是实际的文件内容没有被检索到。那么我需要修改什么才能获得实际上传的文件？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T05:48:28.750

不返回`readAsBinaryString`文件内容，需要设置读取文件内容时触发的 onload 回调。

```
reader.onload = function (oFREvent) {
    console.log(oFREvent.target.result);
}; 
```

# javascript - 如果使用 javascript 在 ASP.NET 中的页面验证失败，如何禁用提交按钮

> ID：15756891
> 
> 赞同：2
> 
> 时间：2013-04-02T05:37:44.027
> 
> 标签：javascript, asp.net, regex

如果页面上的验证失败，我需要使用 javascript 禁用表单上的保存按钮。如果他们不这样做，则必须使用以下代码启用它。

*代码：*

```
<script language="javascript" type="text/javascript">
  function ValidatePage() 
    {
        if (Page_ClientValidate == true) 
        {

        }

        else 
        {            
            document.getElementById(buttonID).disabled = true;
            return false;
        }
}
</script>

<asp:Button ID="btnSave" CssClass="button" runat="server" Text="Save" 
  Width="61px" Height="29px" OnClientClick="ValidatePage();" onclick="btnSave_Click" /> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T05:40:02.440

您必须使用按钮的ClientID，当if语句为true时也返回true

```
document.getElementById('<%= btnSave.ClientID %>').disabled = true; 
```

您使用 Page_ClientValidate 作为变量，但它是函数。

*改变*

```
if (Page_ClientValidate == true) 
```

*到*

```
if(Page_ClientValidate("")) 
```

您没有在 OnClientClick 中使用 ValidatingPage() 的返回值，因此无论如何您都会收到回发

*改变*

```
OnClientClick="ValidatePage();" 
```

*到*

```
OnClientClick="return ValidatePage();" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:15:20.680

您可以使用`OnClientClick="return ValidatePage();"`

希望这有帮助。

# android - 在android中将自定义视图设置为布局

> ID：15756894
> 
> 赞同：0
> 
> 时间：2013-04-02T05:37:55.460
> 
> 标签：android, android-layout

我只是在学习 android 开发，我在让它工作时遇到了一些问题。

我有一个使用相对布局的活动。我需要它在底部有 2 个按钮，然后在底部的正上方，我希望我的自定义视图占据其余空间。

**查看器.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:id="@+id/viewerLayout"
android:layout_width="match_parent"
android:layout_height="match_parent" >

<sketchViewer.AnimationPanelView
    android:id="@+id/animationView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_above="@+id/homeFromViewerButton"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true" />

<Button
    android:id="@+id/homeFromViewerButton"
    android:layout_width="640dp"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:text="Replay" />

<Button
    android:id="@+id/replayButton"
    android:layout_width="640dp"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentRight="true"
    android:text="Home" />

</RelativeLayout> 
```

我遇到的问题是，当我运行我的程序时，我需要将一些参数传递给我的自定义视图构造函数，以便我的自定义视图决定它应该绘制什么。因此，在创建自定义视图 (AnimationPanelView) 的实例后，我不确定如何将此对象设置到为视图提供的空间中。

这是我的活动课：

**查看器.java**

```
public class Viewer extends Activity {

AnimationPanelView animationPanelView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_viewer);   

    animationPanelView = new AnimationPanelView(this, true /*, more parameters here */);
    animationPanelView.setBackgroundColor(Color.GREEN);
    RelativeLayout v = (RelativeLayout) findViewById(R.id.viewerLayout);
    v.addView(animationPanelView);      
} 
```

现在，使用我的 v.addView 命令，视图占据了整个页面，覆盖了底部的按钮。任何人都可以对此有所了解吗？我觉得我很接近，但我已经玩了一段时间了，我似乎被困住了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:40:49.827

[在此处](http://developer.android.com/reference/android/view/View.html)查看实施自定义视图部分。您需要覆盖 onLayout 和 onMeasure 以便告诉您的容器有多大。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:47:54.953

您正在向布局添加另一个自定义视图，而不是应该使用 animationPanelView = (AnimationPanelView) findViewById(R.id.animationView); animationPanelView.setBackgroundColor(Color.GREEN);

# batch-file - 批处理文件以删除除 zip 文件以外的文件和文件夹

> ID：15756898
> 
> 赞同：1
> 
> 时间：2013-04-02T05:38:07.797
> 
> 标签：batch-file

我创建了一个解压缩所有文件的批处理文件

```
@ECHO OFF

SETLOCAL ENABLEDELAYEDEXPANSION

REM
REM Remove the double quotes from the front and end of the root path
REM
SET ROOT=%1
SET ROOT=%ROOT:~1%
SET ROOT=%ROOT:~0,-1%
ECHO %ROOT%

REM Searching directory structure from root for subfolders and zipfiles,
REM then extracting the zipfiles into a subfolder of the same name as the zipfile.

FOR /F "delims==" %%d IN ('dir /ogne /ad /b /s "%ROOT%"') DO (
ECHO Extracting : "%%d"

FOR /F "delims==" %%f IN ('dir /b "%%d\*.zip"') DO (
        REM Getting filename without extension.
        SET subfolder=%%~nf
        ECHO mkdir "%%d\!subfolder!"
    mkdir "%%d\!subfolder!"
        REM Extracting zipfile content to the newly created folder.
        ECHO 7z x "%%d\%%f" -o "%%d\!subfolder!"
    "C:\Program Files\7-Zip\7z.exe" x "%%d\%%f" -o"%%d\!subfolder!"
)
)

ENDLOCAL 
```

现在我想删除已创建的文件。

任何人都可以帮助单独删除解压缩文件而不是压缩文件，并且还应注意不要删除根文件和 zip 文件。

任何其他解决方案也值得赞赏。

我只想要文件夹中的 zip 文件。所有其他文件都可以在用户不说 Y/N 的情况下删除。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T06:27:01.373

`echo`如果输出正常，试试这个并删除s：

```
for /r "%root%" %%i in (*.zip) do (
    echo del /f /q "%%~dpni\*.*"
    echo rd /q "%%~dpni"
) 
```

# .net - WCF 与 windows 应用程序- 2.0 .Net Framework

> ID：15756899
> 
> 赞同：1
> 
> 时间：2013-04-02T05:38:15.670
> 
> 标签：.net, wcf

我是 WCF 的新手。我必须为 .Net 2.0 Windows 应用程序编写 WCF 服务。主要要求是我必须在不更改任何客户端代码的情况下执行此操作。只需要改变`service url`。这可能吗？

我尝试用 编写 WCF 服务`basicHttpBindings`，但是在客户端调用方法时它显示了一些额外的参数。

请帮助..在此先感谢

# php - 我应该使用 APC 来缓存准备好的 SQL 字符串吗

> ID：15756902
> 
> 赞同：0
> 
> 时间：2013-04-02T05:38:20.847
> 
> 标签：php, caching, import, dataset, apc

这里有点二人行。我正在开发一个项目（PHP/Postgres），我正在将中等大小的 csv 文件加载到我们的系统中（5k - 100k 行）。这些 csv 记录将被插入到一个大约有 100 列（其中 7 列构成主键）的表中。这些文件不保证包含唯一的记录，需要根据需要对记录进行更新插入。

我已经实现[了一个与此类似的 upsert](http://xzilla.net/blog/2011/Mar/Upserting-via-Writeable-CTE.html)，它使用准备好的语句来减少运行时间，并让系统每秒加载大约 800 条记录。这对于较小的文件来说已经足够了，但对于超过 100k 行的文件来说就不够了。

在分析我的代码时，我注意到大量时间用于简单地构建长 sql 准备语句，因此我决定使用 APC 用户缓存来缓存它们，从而显着提高我的运行时间。我还使用准备好的语句来提高性能。[这大概是我如何实现这一点的。](http://pastebin.com/7jZHq0Rn)

所以这里有问题：

1.  我是否应该积极地使用 APC 用户缓存来缓存任何可以不经常构建的特别大的构造？
2.  是否有更有效的方法对 100 列、100k 行的文件执行 upserts？
3.  我可以以不同的方式存储文件吗？（也许使用 hstore 来批量存储文件中除了 7-8 个更重要的列之外的所有列）

**编辑**：[这是包括如何构造 sql 语句的代码。](http://pastebin.com/zsRzhZSD)

# algorithm - VBA以相反的顺序逐行读取大文本文件

> ID：15756905
> 
> 赞同：5
> 
> 时间：2013-04-02T05:38:36.630
> 
> 标签：algorithm, vba, excel

**VBA问题**

有一个很大的日志文件（大约 500,000 行），我需要以相反的顺序逐行读取它，即从最后一行到第一行。我知道我可以在 Microsoft Scripting Runtime 参考中使用 FileSystemObject，但是对于 TextStream 中的 ReadLine 方法没有像*reverse这样的选项*

现在，我能想到的唯一方法就是这样，有一个计数器并为我阅读的每一行跳过前几行，但这绝对不够好。任何建议代码/算法将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T06:27:05.780

如果您的日志是一种具有允许确定顺序的字段的数据库（是否有日期字段或行号字段），那么您可以尝试使用带有 SQL 查询的 ADO 解决方案以相反的顺序读取日志（ORDER BY ... DESC）。因此，您将能够从最后阅读到第一个。或者通常-尝试使用 ADO。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T05:55:12.957

文件不是基于行的，甚至不是基于字符的，它只是字节，因此无法在文件中以相反的顺序读取行。文本如何分隔成行仅取决于文本中换行符的位置。

您可以从头开始读取行并将它们存储在旋转缓冲区中，例如，当您到达文件末尾时，缓冲区中的最后 1000 行。这样，您就可以从缓冲区访问一定数量的行，而不必为每一行读取整个文件。

之后您知道文件中有多少行，因此当您需要重新填充缓冲区时，您可以跳过一定数量的行并将以下行读入缓冲区。

# android - 2 列列表视图中的 2 列列表视图

> ID：15756913
> 
> 赞同：1
> 
> 时间：2013-04-02T05:39:15.677
> 
> 标签：android

我想在我的第一个 2 列列表视图的第二列中放置一个 2 列列表视图，但我不知道如何以及是否可以使用相同的代码使其成为 3 列列表视图？第一列中的位置是图像第二列和第三列都是我尝试过的文本，但是有错误……我的代码是这样的……

主要的

```
import java.util.List;

import android.app.Activity;
import android.os.Bundle;
import android.widget.ListView;

public class WeatherToday extends Activity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_weathertoday);

    ListView view = (ListView) findViewById(R.id.todaylist);
    final List<MyStringPair> myStringPairList = MyStringPair.makeData(10);
    MyStringPairAdapter adapter = new MyStringPairAdapter(this, myStringPairList);

    view.setAdapter(adapter);
}
} 
```

字符串对列表

```
import java.util.ArrayList;
import java.util.List;

public class MyStringPair {

private String columnOne;
private String columnTwo;

public MyStringPair(String columnOne, String columnTwo) {
    super();
    this.columnOne = columnOne;
    this.columnTwo = columnTwo;

}

public String getColumnOne() {
    return columnOne;
}
public void setColumnOne(String columnOne) {
    this.columnOne = columnOne;
}
public String getColumnTwo() {
    return columnTwo;
}
public void setColumnTwo(String columnTwo) {
    this.columnTwo = columnTwo;
}

public static List<MyStringPair> makeData(int n) {
    List<MyStringPair> pair = new ArrayList<MyStringPair>();

        pair.add(new MyStringPair("Weather Condition", "Partly Cloudy"));
        pair.add(new MyStringPair("Temperature", "30 Celcius "));
        pair.add(new MyStringPair("Moisture", "Dew Point:" ));
        pair.add(new MyStringPair("Wind", "Column2 "));
        pair.add(new MyStringPair("Precipitation", "Column2 "));
        pair.add(new MyStringPair("Condition", "Pressure:1014 mb "));

    return pair;
}

} 
```

适配器

```
import java.util.List;

import android.app.Activity;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.BaseAdapter;
import android.widget.TextView;

public class MyStringPairAdapter extends BaseAdapter {
private Activity activity;
private List<MyStringPair> stringPairList;

public MyStringPairAdapter(Activity activity, List<MyStringPair> stringPairList) {
    super();
    this.activity = activity;
    this.stringPairList = stringPairList;
}

@Override
public int getCount() {
    return stringPairList.size();
}

@Override
public Object getItem(int position) {
    return stringPairList.get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

    if (convertView == null) {
        LayoutInflater inflater = activity.getLayoutInflater();
        convertView = inflater.inflate(R.layout.listrow, null);
    }

    TextView col1 = (TextView) convertView.findViewById(R.id.column1);
    TextView col2 = (TextView) convertView.findViewById(R.id.column2);
    col1.setText(stringPairList.get(position).getColumnOne());
    col2.setText(stringPairList.get(position).getColumnTwo());

    return convertView;
}
} 
```

我已经在我想要另外 2 列的列上添加了一个框..基本上我想在较小的框中再放两列我想将文本分成两部分，所以我需要两列但我没有想法

![在此处输入图像描述](https://i.stack.imgur.com/swHxY.jpg)

# xslt - 使用 ; 拆分属性 作为 XSLT 中的分隔符

> ID：15756915
> 
> 赞同：1
> 
> 时间：2013-04-02T05:39:17.947
> 
> 标签：xslt

如何使用 ; 拆分元素 作为 delimiter.my 的要求如下所示。

输入：

```
<Element1>C:KEK39519US; U:085896395195; A:K39519US; B:S2345843</Element1> 
```

输出：

```
<CustItem>KEK39519US</CustItem>

<UNumber>085896395195</UNumber>

<ANumber>K39519US</ANumber>

<BNumber>S2345843</BNumber> 
```

输入每次都不`C:KEK39519US; U:085896395195; B:S2345843` 一样。`C:KEK39519US; A:K39519US; B:S2345843` 有时像这样有时像这样`U:085896395195; A:K39519US;` 有时像这样`C:KEK39519US; U:085896395195; A:K39519US;`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T12:25:49.143

要在 XSLT 1.0 中解决这个问题，您可能需要一个递归调用自身的命名模板。模板将处理第一个分号之前的字符串，并相应地输出元素。然后它会在这个分号之后使用字符串的剩余部分递归调用自己（如果有的话）

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
   <xsl:output method="xml" indent="yes"/>

   <xsl:template match="Element1">
      <xsl:call-template name="outputElements">
         <xsl:with-param name="list" select="." />
      </xsl:call-template>
   </xsl:template>

   <xsl:template name="outputElements">
      <xsl:param name="list"/>

      <xsl:variable name="first" select="normalize-space(substring-before(concat($list, ';'), ';'))"/>
      <xsl:variable name="remaining" select="normalize-space(substring-after($list, ';'))"/>

      <xsl:call-template name="createElement">
         <xsl:with-param name="element" select="$first" />
      </xsl:call-template>

      <!-- If there are still elements left in the list, call the template recursively -->
      <xsl:if test="$remaining">
         <xsl:call-template name="outputElements">
            <xsl:with-param name="list" select="$remaining"/>
         </xsl:call-template>
      </xsl:if>
   </xsl:template>

   <xsl:template name="createElement">
      <xsl:param name="element"/>
      <xsl:variable name="elementName">
         <xsl:choose>
            <xsl:when test="substring-before($element, ':') = 'C'">CustItem</xsl:when>
            <xsl:otherwise><xsl:value-of select="concat(substring-before($element, ':'), 'Number')" /></xsl:otherwise>
         </xsl:choose>
      </xsl:variable>
      <xsl:element name="{$elementName}">
         <xsl:value-of select="substring-after($element, ':')" />
      </xsl:element>
   </xsl:template>
</xsl:stylesheet> 
```

当应用于您的 XML 时，将输出以下内容

```
<CustItem>KEK39519US</CustItem>
<UNumber>085896395195</UNumber>
<ANumber>K39519US</ANumber>
<BNumber>S2345843</BNumber> 
```

请注意在指定每个新元素的名称时使用属性值模板。

# vb.net - 在没有 Visual Studio 的情况下为 Excel 编写 vb.net？

> ID：15756918
> 
> 赞同：-3
> 
> 时间：2013-04-02T05:39:24.510
> 
> 标签：vb.net, excel, vba

是否可以在不使用 Visual Studio 的情况下编写用于 Excel 电子表格的 VB.NET 代码？换句话说，是否有一个内置的 VB.NET Excel 编辑器可以像内置的 VBA 编辑器一样轻松访问？或者我可以强制内置 VBA 编辑器允许我编写 VB.NET 代码吗？

如果答案是否定的，你知道为什么微软没有在 Excel 中实现这个吗？似乎易于访问 VBA 编辑器是人们今天仍在编写新的 VBA 代码的原因之一。如果微软想要摆脱 VBA，那么为什么不让 VB.NET 在 Excel 中更易于访问呢？我对猜测不感兴趣，而是微软的任何官方消息。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T06:51:02.490

直接问题的一些直接答案：

*是否有一个用于 Excel 的内置 VB.NET 编辑器，可以像内置 VBA 编辑器一样轻松访问？*

答案：没有

*或者我可以强制内置 VBA 编辑器允许我编写 VB.NET 代码吗？*

答案：没有

*如果答案是否定的，你知道为什么微软没有在 Excel 中实现这个吗？*

答：因为我不是微软内部人员，所以不（但我可以推测......）

当然，有多种非内置方式可以与 Excel 交互。但我相信你已经知道了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-02T05:45:14.720

这是一个愚蠢的问题。MS Excel 的内部语言目前恰好是 VBA。坦率地说。VBA 非常接近 VB6 以及 VB.Net，恕我直言。当然，这两者比 C++、Java、Perl 或一百万种其他语言中的任何一种都更相似。

那么为什么 Excel 不使用 VB.Net（或者，就此而言，C#）？因为 Excel 没有自己的 .Net 运行时，并且不需要您拥有 .Net 运行时来使用它。

那么为什么不能在 Excep 中使用 VB.Net（或 C#）呢？*当然*，您可以将它们与 Excel 一起使用。您可以编写一个 VB.Net 程序来读取和写入 Excel 电子表格，调用 Excel 功能，使用 Excel 作为数据源等等等等。

那么你还能要求什么；）？

# javascript - 将一个 JSON 返回拆分为多个对象

> ID：15756920
> 
> 赞同：0
> 
> 时间：2013-04-02T05:39:35.943
> 
> 标签：javascript, json, object, highcharts

所以，我已经看了几个小时了，我没有想法。我的应用程序返回一个 JSON 对象，我需要从中解析 4 个数据集并制作 3 个图表和一个表格。对于我的生活，我无法弄清楚如何“提取”每个部分。JSON 看起来像：

```
{
   "allele":{
      "12426597":{
         "??":4,
         "CC":3,
         "TT":4,
         "CT":12
      },
      "878198":{
         "??":4,
         "AA":1,
         "AC":15,
         "CC":3
      },
      "6447271":{
         "??":4,
         "GG":14,
         "AG":5
      }
   },
   "haplo":{
      "CT,AG,AC":3,
      "TT,GG,AC":1,
      "CC,GG,CC":1,
      "TT,AG,CC":1,
      "TT,GG,CC":1
   },
   "exercise":"p1"
} 
```

我只需要为三个键/ID（12426597,878198,6447271）获取数据，并为每个键制作一个条形图（需要[数据转换](https://stackoverflow.com/questions/15731391/need-to-count-json-key-occurence-value)<==见）。然后我需要将它插入 Highcharts ......他们的 API 调用键和值的有序数组。

我考虑过首先制作一个 ID 数组：

```
var snpsObj = data.allele_frequency; // data returned from $.getJSON
var snpList = [];

for (prop in snpsObj) {
    if (!snpsObj.hasOwnProperty(prop)) {
        continue;
    }
    snpList.push(prop);
} 
```

这确实让我得到了想要的数组。然后访问“子”键，例如：

```
snpsObj.snpList[0]; 
```

...希望返回，例如：

```
{
   "CC" : 23,
   "CT" : 36,
   "TT" : 12,
} 
```

但这根本行不通。我能得到的最多是返回类似的东西：

```
allele_frequency : [object Object ] 
```

我知道有一些基本的东西我只是在我头脑冰冷的头脑中忘记了......有什么建议吗？

Highcharts 需要格式化为数组的键和标签，例如：

类别：['C', 'T'] 数据：[3, 9] // C=3, T=9

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T18:56:21.730

我想你想访问

```
snpsObj[ snpList[0] ] 
```

通过使用[括号表示法](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Member_Operators)，`snpsObj.snpList[0]`将尝试获取对象的“snpList ”*属性*`snpsObj`。

顺便说一句，您可能希望使用而不是使用 for-in-loop 创建具有属性名称的数组[`Object.keys`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)（即使您需要填充它以支持旧浏览器）。

# apache - 在 Apache 中将 DirectoryIndex 应用于别名

> ID：15756921
> 
> 赞同：1
> 
> 时间：2013-04-02T05:39:37.163
> 
> 标签：apache, alias, directoryindex

如何将 DirectoryIndex 应用于 Apache 中的别名而不导致错误 403？

这导致响应标头 200：

> `http://localhost/` 哪个呈现 `http://localhost/index.html`

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    DocumentRoot /var/www
    DirectoryIndex index.html index.php index.xhtml index.htm default.htm
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory> 
```

这会导致错误 403，禁止：

> `http://localhost/aliasName/wwwrootDevelopmentSubDirectory/`

```
<VirtualHost *:80>
    ServerAdmin webmaster@localhost

    DocumentRoot /var/www
    DirectoryIndex index.html index.php index.xhtml index.htm default.htm
    <Directory />
            Options FollowSymLinks
            AllowOverride None
    </Directory>
    <Directory /var/www/>
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            allow from all
    </Directory>

    Alias /aliasName/ "/home/user/Dropbox/Level1/Level2/wwwrootDevelopment/"
    <Directory /home/user/Dropbox/Level1/Level2/wwwrootDevelopment>
            DirectoryIndex index.html index.php index.xhtml index.htm default.htm
            Options Indexes FollowSymLinks MultiViews
            AllowOverride None
            Order allow,deny
            Allow from all
    </Directory> 
```

error.log 显示在浏览器中看到的相同消息。

```
[Tue Apr 02 00:19:30 2013] [error] [client 172.x.x.x] (13)Permission denied: access to /aliasName/wwwrootDevelopmentSubDirectory/ denied, referer: http://localhost/ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-12-07T18:26:07.660

别名的 DirectoryIndex 应该是 apache2 中该别名的特定指令

```
Alias /pma "/var/www/pma"
<Directory "/var/www/pma">
    DirectoryIndex adminer.php
     Options Indexes FollowSymLinks
     AllowOverride All
     Require all granted
</Directory> 
```

# javascript - 为什么我的航点无法正常工作？

> ID：15756924
> 
> 赞同：0
> 
> 时间：2013-04-02T05:39:55.183
> 
> 标签：javascript, jquery, jquery-waypoints

当用户向下滚动页面时，我正在使用 Waypoints 来切换具有“实时”类的特定菜单项。一切正常，除了“实时”类在到达下一个区域时不会关闭。例如，在到达#services-amenities 的地方，#overview 菜单项 (124) 仍然具有“live”类。当到达另一个部分时，我需要做什么才能关闭课程。这是我的代码。谢谢你的帮助。

```
<script type="text/javascript">
    $(document).ready(function(){

          $('#overview').waypoint(function(direction) {
            $('#menu-item-124').toggleClass('live', direction === 'down');  
          });

          $('#services-amenities').waypoint(function(direction) {
            $('#menu-item-125').toggleClass('live', direction === 'down');  
          });

          $('#destinations').waypoint(function(direction) {
            $('#menu-item-126').toggleClass('live', direction === 'down');  
          });

          $('#exceptional-value').waypoint(function(direction) {
            $('#menu-item-127').toggleClass('live', direction === 'down');  
          });

          $('#sample-usage').waypoint(function(direction) {
            $('#menu-item-128').toggleClass('live', direction === 'down');  
          });

          $('#pricing-license-descriptions').waypoint(function(direction) {
            $('#menu-item-129').toggleClass('live', direction === 'down');  
          });

        });
        </script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:18:31.093

我不会工作，因为您没有在该特定元素上使用切换 (#menu-item-124)。将您的菜单项放入数组或将它们分配给变量，然后引用它们。

# c++ - operator+() 选择右值参考变量而不是 const 左值变量

> ID：15756925
> 
> 赞同：1
> 
> 时间：2013-04-02T05:40:00.440
> 
> 标签：c++, templates, operators, move-semantics

我试图了解以下代码中发生了什么。它只是加了 2 `std::array`，我假设输出是：

> C1 = 常量 C1& + 常量 C2&

相反，它是：

> C1&& = C1&& + C2&&

很明显，`ar`而且`arr`不是临时的。

这里有什么问题，我该如何解决？

```
#include <iostream>
#include <array>
using namespace std;

template<typename C1, typename C2>
C1//inline typename std::enable_if<is_densevector<C1>::value && is_densevector<C2>::value, C1>::type
operator+(const C1 &v1, const C2 &v2) { cout << "C1 = const C1& + const C2&" << endl; C1 r; return r; }
template<typename C1, typename C2>
C2//typename std::enable_if<is_densevector<C1>::value && is_densevector<C2>::value, C2>::type
&&operator+(const C1 &v1, C2 &&v2) { cout << "C2&& = const C1& + C2&&" << endl; return v2; }
template<typename C1, typename C2>
C1//inline typename std::enable_if<is_densevector<C1>::value && is_densevector<C2>::value, C1>::type
&&operator+(C1 &&v1, const C2 &v2) { cout << "C1&& = C2&& + const C2&" << endl; return v1; }
template<typename C1, typename C2>
C1//inline typename std::enable_if<is_densevector<C1>::value && is_densevector<C2>::value, C1>::type
&&operator+(C1 &&v1, C2 &&v2) { cout << "C1&& = C1&& + C2&&" << endl; return v1; }

int main()
{
    std::array<double,3> ar{1,2,3}, arr{3,2,1};
    ar + arr;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T05:52:12.880

`&&`当用于模板参数时，`&`如果参数是左值，则将折叠为，因此最后一个定义变为

```
template<typename C1, typename C2>
C1& operator+(C1& v1, C2& v2); 
```

编译器会更喜欢这个

```
template<typename C1, typename C2>
C1 operator+(const C1 &v1, const C2 &v2) 
```

（或任何其他人）因为您的数组不是`const`.

# javascript - Jquery Datatable-页脚中的平均值

> ID：15756930
> 
> 赞同：1
> 
> 时间：2013-04-02T05:40:09.087
> 
> 标签：javascript, jquery, html, jquery-datatables

我正在使用 jquery 数据表来显示输出。我有一个案例，我想在页脚行中显示一列的平均值。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T07:37:34.383

请尝试使用此代码在 Datatable 插件的页脚中显示平均值：

```
$('#example').dataTable({
    fnFooterCallback: function ( nRow, aaData, iStart, iEnd, aiDisplay ) {
        var TotalMarks = 0;
        for ( var i=0 ; i<aaData.length ; i++ )
        {
            TotalMarks += aaData[i][2]*1;
        }

        var nCells = nRow.getElementsByTagName('th');
        nCells[1].innerHTML = TotalMarks/aaData.length;
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T08:23:58.120

我的项目是 ASP.Net MVC 所以在控制器中我放了类似的东西

> 数据表 dt=GetRequiredData(); 双 sumField1=0; 双 sumField2=0; 双 avgField1=0;
> 
> foreach(DataRow r in dt) { sumField1 += Convert.ToDouble(r["Field1"]); sumField2 += Convert.ToDouble(r["Field2"]); avgField1 += Convert.ToDouble(r["Field3"]); }
> 
> avgField1 /= dt.Rows.Count;
> 
> ViewBag.sumField1=sumField1.ToString(); ViewBag.sumField2=sumField2.ToString(); ViewBag.avgField1=avgField1.ToString();

然后在我放的视图中

> 总和字段 (@Viewbag.sumField1) 总和字段 (@Viewbag.sumField2) 平均字段 (@Viewbag.avgField1)

不用说它是 jQuery 数据表的一部分。我的老板对此表示赞赏；）

# postgresql - 在 Postgresql 中创建全局变量

> ID：15756936
> 
> 赞同：2
> 
> 时间：2013-04-02T05:40:26.317
> 
> 标签：postgresql, triggers, postgresql-9.1

我正在为日志表创建触发器。在那个触发器中，我想存储`xuserno`到日志表。`xuserno`是所有函数的参数

例子：

```
CREATE OR REPLACE FUNCTION fn_consume(xmode text, xuserno integer)
  RETURNS text AS
....
.....
.....

END; 
```

`Each table`有这种类型的`function`。那么我怎样才能访问`xuserno`我的`trigger`. 我该如何`global variable`为此目的创建？或任何其他解决方案都可以做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:23:11.553

可以为此目的使用事务本地自定义 GUC，但这通常不是一个好主意。

在大多数情况下，最好只使用`ON COMMIT DROP`包含感兴趣值的单行的临时表。

看：

*   [将用户 ID 传递给 PostgreSQL 触发器](https://stackoverflow.com/q/13172524/398670)
*   [你如何在 PostgreSQL 中使用脚本变量？](https://stackoverflow.com/q/36959/398670)

# rest - 如何在restlet框架中处理POST以外的请求

> ID：15756938
> 
> 赞同：0
> 
> 时间：2013-04-02T05:40:44.220
> 
> 标签：rest, restlet-2.0

我有一个扩展 org.restlet.Application 类的类。使用此类处理各种请求，例如：

*   /登记
*   /login /listitem 我使用 POST 请求执行所有操作，并使用注释 @Post("json") 管理所有 org.restlet.resource.ServerResource 类。

我的问题是，如果 POST 以外的请求进入场景，我会收到类似 405 Method Not Allowed 之类的错误。那么如何在不为每个注解显式编写代码的情况下处理其他请求呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T08:53:49.103

我不确定是否正确理解您的问题。使用 Restlet 时，您需要为要支持的每个 HTTP 方法显式定义一个带注释的方法。

你到底想做什么？

蒂埃里

# java - Guava ImmutableMap 的访问速度明显比 HashMap 慢

> ID：15756940
> 
> 赞同：39
> 
> 时间：2013-04-02T05:40:48.650
> 
> 标签：java, performance, hashmap, benchmarking, guava

在处理一些高吞吐量数据结构的内存基准测试时，我意识到我`ImmutableMap`只需稍作重构就可以使用 an。

认为这将是一个改进，我将它投入到混合中，并惊讶地发现它不仅比 慢`HashMap`，在单线程环境中它似乎始终比`ConcurrentHashMap`!

你可以看到[完整的基准](https://gist.github.com/dimo414/e692e26e276bd9cf1749bd5d7fc800d8)

测试的内容非常简单，计算获取地图中可能存在的大量随机字符串需要多长时间。

```
public static void timeAccess(Map<String,String> map) {
    Random rnd = new Random(seed);
    int foundCount = 0;

    long start = System.nanoTime();

    for(int i = 0; i < loop; i++) {
        String s = map.get(RndString.build(rnd));
        if(s != null)
            foundCount++;
    }

    long stop = System.nanoTime() - start;

    System.out.println("Found "+foundCount+" strings out of "+loop+" attempts - "+
        String.format("%.2f",100.0*foundCount/loop)+" success rate.");
    System.out.println(map.getClass().getSimpleName()+" took "+
        String.format("%.4f", stop/1_000_000_000.0)+" seconds.");
    System.out.println();
} 
```

`HashMap`并且针对包含相同值的 a 、 a`ConcurrentHashMap`和 an运行此`ImmutableMap`程序，在使用时始终显示出显着的减速`ImmutableMap`- 通常慢 15% 以上。地图越稀疏（即`map.get()`返回 null 的频率越高），差异就越大。这是示例运行的结果：

```
Found 35312152 strings out of 100000000 attempts - 35.31 success rate.
HashMap took 29.4538 seconds.

Found 35312152 strings out of 100000000 attempts - 35.31 success rate.
ConcurrentHashMap took 32.1465 seconds.

Found 35312152 strings out of 100000000 attempts - 35.31 success rate.
RegularImmutableMap took 37.9709 seconds. 
```

这是记录/预期的问题吗？[Guava Docs](https://code.google.com/p/guava-libraries/wiki/ImmutableCollectionsExplained)表明`Immutable***`内存效率更高，但没有提到速度。对于这种程度的减速，我倾向于处理内存成本并避免`Immutable***`速度成为问题（什么时候不是问题？！）。我错过了什么吗？

另请参阅：[https ://groups.google.com/forum/?fromgroups=#!topic/guava-discuss/I7yPpa5Hlpg](https://groups.google.com/forum/?fromgroups=#!topic/guava-discuss/I7yPpa5Hlpg)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-30T15:21:35.313

正如 Louis Wasserman 所说，`ImmutableMap`没有针对慢速`equals`方法的对象进行优化。我认为主要区别在这里：

[哈希映射](http://www.docjar.com/html/api/java/util/HashMap.java.html)：

```
if (e.hash == hash && ((k = e.key) == key || key.equals(k)))
    return e.value; 
```

[不图映射](http://code.google.com/p/guava-libraries/source/browse/src/com/google/common/collect/RegularImmutableMap.java?r=adfdb1b41ceb048d7d9aedfbb01f23c756a17e0f)：

```
if (key.equals(candidateKey)) {
    return entry.getValue(); 
```

如您所见，要检查冲突，`HashMap`首先检查哈希。这允许快速拒绝具有不同哈希值的值。由于`String`不在其`equals`方法中进行此检查，因此`HashMap`速度更快。不使用此优化，因为当已经优化`ImmutableMap`时它会使测试变慢。`equals`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-05T22:04:13.037

一些可能的原因：

1.  这可能取决于您对 RndString.build() 的实现吗？

2.  并查看两个地图的 get() 实现： com.google.common.collect.RegularImmutableMap.get(Object) java.util.HashMap.getEntry(Object) java.util.HashMap 尝试与“== 进行比较“ 第一的。RegularImmutableMap 没有。这可能会加快

3.  一个不同的负载因子会对此负责吗？也许 RegularImmutableMap 需要更多的迭代才能找到正确的条目。

# kendo-ui - 如何在下一行验证 datetimepicker？

> ID：15756947
> 
> 赞同：0
> 
> 时间：2013-04-02T05:41:53.860
> 
> 标签：kendo-ui

在我的项目中，我有两个 datepicker 都使用验证消息进行验证，但消息在 datetimepicker 上重叠，如何在下一行显示消息。

我的代码：http:
[//jsbin.com/ufimom/116/edit](http://jsbin.com/ufimom/116/edit)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T09:57:02.137

定义以下 CSS 样式：

```
span.k-tooltip
{
    position: absolute;
    top: 24px;
    left: -1px;
} 
```

看到它在这里运行：http: [//jsbin.com/ufimom/132/edit](http://jsbin.com/ufimom/132/edit)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-06T03:41:02.343

理想情况下，Kendo Validator 将其工具提示放置在经过验证的输入之外。但是，如果输入后来增强为 ComboBox、AutoComplete 或其他 Kendo 小部件，则将工具提示放在输入旁边可能会覆盖重要信息或破坏小部件呈现。在这种情况下，您可以通过添加一个将 data-for 属性设置为已验证输入名称和类 .k-invalid-msg 的跨度来准确指定您希望放置工具提示的位置。

```
<div id="myform">
    <input type="text" id="name" name="name" required>
    <span class="k-invalid-msg" data-for="name"></span>
 </div> 
```

[Kendo 自定义工具提示位置](http://docs.telerik.com/kendo-ui/framework/validator/overview#customizing-the-tooltip-position)

# jquery - 在 jQuery UI 模式对话框打开时执行操作

> ID：15756954
> 
> 赞同：0
> 
> 时间：2013-04-02T05:42:33.613
> 
> 标签：jquery, jquery-ui

我有一个 div 元素，单击它会打开一个 jQuery UI 模式对话框窗口。我想要做的是在模式对话框打开期间突出显示 div 元素（意味着更改其颜色），并在关闭对话框窗口时将其恢复为原始状态。有可能这样做吗？

使用 .css 方法更改背景颜色并不像我想要的那样工作。我的代码：

**HTML**

```
<div id="help" class="hover">Help</div>

<div id="helpdialog" class="helpbox">
<header id="helptitle">Help</header>    
<p id="helptext">
</p>
    </div> 
```

**JS**

```
$('#help').on('click',function() {
$('#help').css('background-color','#F0E68C');
$( "#helpdialog" ).dialog({
height: 670,
width: 570,
modal: true,
draggable: true,
resizable: false,
dialogClass: "helpbox",
buttons: { Close: function() { $(this).dialog("close");
$('#help').css('background-color',''); } },
create: function(event, ui)  
{  
$(this).parents(".ui-dialog:first").find(".ui-dialog-titlebar").css("display","none");       
$(this).parents(".ui-dialog").css("padding", 0);  
$(this).parents(".ui-dialog").css("border", '1em solid #709CB4');
$(this).parents(".ui-dialog").css("border-radius", '0.6em');    
$(this).parents(".ui-dialog:first").find(".ui-dialog-content").css("padding",0);  
}  
});
}); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-02T06:05:38.877

使用[关闭](http://api.jqueryui.com/dialog/#event-close)和[打开](http://api.jqueryui.com/dialog/#event-open)事件

```
$('#help').on('click', function() {

    $("#helpdialog").dialog({
        height : 670,
        width : 570,
        modal : true,
        draggable : true,
        resizable : false,
        dialogClass : "helpbox",
        buttons : {
            Close : function() {
                $(this).dialog("close");
            }
        },
        create : function(event, ui) {
            $(this).parents(".ui-dialog:first").find(".ui-dialog-titlebar")
                    .css("display", "none");
            $(this).parents(".ui-dialog").css("padding", 0);
            $(this).parents(".ui-dialog").css("border", '1em solid #709CB4');
            $(this).parents(".ui-dialog").css("border-radius", '0.6em');
            $(this).parents(".ui-dialog:first").find(".ui-dialog-content").css(
                    "padding", 0);
        },
        open : function(event, ui) {
            $('#help').css('background-color', '#F0E68C');
        },
        close : function(event, ui) {
            $('#help').css('background-color', '');
        }
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:56:36.227

而不是这个

```
$('#help').css('background-color',''); 
```

设置一些颜色

```
$('#help').css('background-color','#aaa'); 
```

# google-sheets - 如果相应行中的任何单元格与文本匹配，则求和值

> ID：15756956
> 
> 赞同：5
> 
> 时间：2013-04-02T05:42:39.660
> 
> 标签：google-sheets

我有以下 Google 表格数据：

```
Name1   Name2   Name3    Value
A       B       C        20
B       A       C        30
C       D       F        40 
```

我要做的是查看特定名称是否出现在三个名称列中的任何一个中。如果是这样，则对所有匹配行的“值”列中的所有值求和。

例如，我想对名称“A”的所有值求和。该名称仅出现在前两行，因此应该`20`+`30`给我`50`。如果我将搜索到的名称更改为“C”，它会出现在所有三行中，因此它应该将所有数字相加：`20`+ `30`+ `40`。算法需要适当的调整和搜索。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-03T05:47:32.610

=DSum 将起作用

用你给出的例子

```
=dsum(A1:D4,D1,{A1;"A"})+dsum(A1:D4,D1,{B1;"A"})+dsum(A1:D4,D1,{C1;"A"}) 
```

您可以将“A”交换为单元格引用

请参阅[https://drive.google.com/previewtemplate?id=0As3tAuweYU9QdEVHdTFHNzloSTY4LVYxdW9LdHRHbEE&mode=public#](https://drive.google.com/previewtemplate?id=0As3tAuweYU9QdEVHdTFHNzloSTY4LVYxdW9LdHRHbEE&mode=public#)

# xaml - Metro App 创建电子邮件地址条目 Xaml 控件

> ID：15756958
> 
> 赞同：2
> 
> 时间：2013-04-02T05:42:54.477
> 
> 标签：xaml, microsoft-metro, winrt-xaml

如何创建一个`Control`输入电子邮件地址，类似于捕获标签的`stackoverflow`工作方式？

我正在使用 C# 和 Xaml。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-03T06:21:58.537

你会需要：

文本框（显示您可以输入的输入区域）

弹出窗口（像 StackOveflow 一样在 TextBox 下方显示建议）

ItemsControl（它进入Popup，所以你可以只收集项目并将它们显示出来，注意ItemsPanel应该可能是GridView）

然后您将需要自定义按钮，一旦添加了标签，它将覆盖在 TextBox 的顶部。您需要计算按钮（宽度）有多大，并用空格填充 TextBox，以进一步推进光标。

您还需要控制正在按下的键。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-03T06:37:56.603

您所追求的效果可能是您识别完整的电子邮件地址，并以自定义方式呈现它们。我会通过从文本框中删除完整的地址来做到这一点，并将它们包装在一个皮肤标签中（或者可能是一个带有删除按钮的自定义控件）。

最直接的方法是将文本框实现为一个`DockPanel`带边框的，暗示它是一个文本框。在您的左侧`DockPanel`，您有一个`StackPanel`从左到右堆叠完成的地址控件的位置。然后添加一个文本框`DockStyle=Fill`来填充`DockPanel`. 一旦检测到输入了电子邮件地址，就从文本框中删除字符并将匹配的控件添加到`StackPanel`.

可能有一种方法可以在不失去焦点的情况下更改文本框内容，否则您需要通过代码修复此问题。

祝你好运！

# c++ - 逐行读取数据，但不是一次全部读取

> ID：15756959
> 
> 赞同：0
> 
> 时间：2013-04-02T05:43:00.553
> 
> 标签：c++

我正在为我的班级做一个项目。我已经完成了整个工作，除了一部分。我正在从文件中读取整数并将它们转换为 bankQueue 和 eventList。我必须一次做一行。

我的文件看起来像这样。

```
1 5
2 5
4 5
20 5
22 5
24 5
26 5
28 5
30 5
88 3

// Get the first arrival event from the input file, and place it in eventList
tempArrivalEvent.type = ARRIVAL;
inFile >> tempArrivalEvent.beginTime >> tempArrivalEvent.transactionLength;
eventList.insert(tempArrivalEvent); 
```

这是我的第一个代码，它将第一行数据存储到 2 个变量中。我遇到的问题是当我稍后去添加下一行时。下面的代码与上面的代码在不同的函数中。

```
if (!inFile.eof())
{
    tempArrivalEvent.type = ARRIVAL;
    inFile >> tempArrivalEvent.beginTime >> tempArrivalEvent.transactionLength;
anEventList.insert(tempArrivalEvent);
} // end if 
```

第二个代码最终采用与第一个相同的数据行。我需要它跳到下一行，但我无法弄清楚。这是阻止我的项目工作的唯一原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:01:47.457

首先，您完全忽略了两个格式化输入的实际**读取**提取的潜在失败。简单地通过检查 istream 的状态作为提取的结果来验证是非常容易的。你的第一个案例就变成了：

```
tempArrivalEvent.type = ARRIVAL;
if (inFile >> tempArrivalEvent.beginTime >> tempArrivalEvent.transactionLength)
    eventList.insert(tempArrivalEvent); 
```

其次，可能与您呈现的代码更相关，请考虑这一点。直到您到达那里后尝试阅读EOF*之后*`inFile.eof()`才会出现（假设在那之前所有事情都成功了）。因此，此代码也不正确：`true`

 *```
if (!inFile.eof())  // nope, not set yet
{
    tempArrivalEvent.type = ARRIVAL;

    // both of these fail since we're at EOF, which will now be reported
    //  as such after the first failure. We, however, never check the stream
    //  status, and thus blindly insert whatever junk happened to be in the
    //  tempArrivalEvent object, likely data from a prior insert.
    inFile >> tempArrivalEvent.beginTime >> tempArrivalEvent.transactionLength;

    // insert unvalidated data
    anEventList.insert(tempArrivalEvent);
} // end if 
```

这应该是......*与最初的 read 完全相同*。验证提取成功，然后才执行事件列表插入。

```
tempArrivalEvent.type = ARRIVAL;
if (inFile >> tempArrivalEvent.beginTime >> tempArrivalEvent.transactionLength)
    anEventList.insert(tempArrivalEvent); 
```

注意：**所有这些都假设在两个提取代码片段中都是`inFile`同*一个对象。* `ifstream`**您还没有澄清是否`inFile`在不同的函数中将第一种情况通过引用传递给第二种情况。如果您希望连续读取正常工作，您需要通过引用传递它（或者，颤抖，使用全局）。*

# c++ - 使用 unique_ptr 控制文件描述符

> ID：15756960
> 
> 赞同：11
> 
> 时间：2013-04-02T05:43:01.830
> 
> 标签：c++, c++11, smart-pointers, unique-ptr, gcc4.7

理论上，我应该能够使用自定义指针类型和删除器来`unique_ptr`管理不是指针的对象。我尝试了以下代码：

```
#ifndef UNIQUE_FD_H
#define UNIQUE_FD_H

#include <memory>
#include <unistd.h>

struct unique_fd_deleter {
    typedef int pointer; // Internal type is a pointer

    void operator()( int fd )
    {
        close(fd);
    }
};

typedef std::unique_ptr<int, unique_fd_deleter> unique_fd;

#endif // UNIQUE_FD_H 
```

这不起作用（带有`-std=c++11`参数的 gcc 4.7）。它响应以下错误：

```
In file included from /usr/include/c++/4.7/memory:86:0,
                 from test.cc:6:
/usr/include/c++/4.7/bits/unique_ptr.h: In instantiation of 'std::unique_ptr<_Tp, _Dp>::~unique_ptr() [with _Tp = int; _Dp = unique_fd_deleter]':
test.cc:22:55:   required from here
/usr/include/c++/4.7/bits/unique_ptr.h:172:2: error: invalid operands of types 'int' and 'std::nullptr_t' to binary 'operator!=' 
```

通过深入研究 的定义`unique_ptr`，我可以看到阻止它工作的两个问题。第一个似乎明显违反标准，析构函数`unique_ptr`将“指针”（根据我的定义，即一个 int）与它进行比较`nullptr`，以查看它是否已初始化。这与它通过布尔转换报告它的方式形成对比，布尔转换是将它与`"pointer()"`（未初始化的“指针”）进行比较。这是我看到的错误的原因 - 整数与`nullptr`.

第二个问题是我需要一些方法来判断`unique_ptr`未初始化的值是什么。我希望以下代码段起作用：

```
unique_fd fd( open(something...) );

if( !fd )
    throw errno_exception("Open failed"); 
```

为此，`unique_ptr`需要知道“未初始化的值”是-1，因为零是有效的文件描述符。

这是一个错误`gcc`，还是我想在这里做一些根本无法完成的事情？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-02T06:32:52.093

所暴露的类型`Deleter::pointer`必须[满足`NullablePointer`要求](https://en.cppreference.com/w/cpp/named_req/NullablePointer)。其中最主要的是，这个表达必须是合法的：`Deleter::pointer p = nullptr;`. 当然，`nullptr`它的定义很大程度上是因为它*不能*隐式转换为数字，因此这是行不通的。

您必须使用可以隐式构造的类型`std::nullptr_t`。像这样的东西：

```
struct file_desc
{
  file_desc(int fd) : _desc(fd) {}
  file_desc(std::nullptr_t) : _desc(-1) {}

  operator int() {return _desc;}

  bool operator ==(const file_desc &other) const {return _desc == other._desc;}
  bool operator !=(const file_desc &other) const {return _desc != other._desc;}
  bool operator ==(std::nullptr_t) const {return _desc == -1;}
  bool operator !=(std::nullptr_t) const {return _desc != -1;}

  int _desc;
}; 
```

您可以将其用作`Deleter::pointer`类型。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-04-02T11:14:09.553

你能做一些像下面这样简单的事情吗？

```
class unique_fd {
public:
    unique_fd(int fd) : fd_(fd) {}
    unique_fd(unique_fd&& uf) { fd_ = uf.fd_; uf.fd_ = -1; }
    ~unique_fd() { if (fd_ != -1) close(fd_); }

    explicit operator bool() const { return fd_ != -1; }

private:
    int fd_;

    unique_fd(const unique_fd&) = delete;
    unique_fd& operator=(const unique_fd&) = delete;
}; 
```

我不明白您为什么必须使用`unique_ptr`旨在管理指针的 。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-02T03:44:06.670

一个完整的样本：

```
#include <memory>
#include <unistd.h>
#include <fcntl.h>

template<class T, T nullvalue, class D, D d> // auto d works in new compilers.
struct generic_delete
{
    class pointer
    {
        T t;
    public:
        pointer(T t) : t(t) {}
        pointer(std::nullptr_t = nullptr) : t(nullvalue) { }
        explicit operator bool() { return t != nullvalue; }
        friend bool operator ==(pointer lhs, pointer rhs) { return lhs.t == rhs.t; }
        friend bool operator !=(pointer lhs, pointer rhs) { return lhs.t != rhs.t; }
        operator T() { return t; }
    };
    void operator()(pointer p)
    {
        d(p);
    }
};
using unique_fd = std::unique_ptr<void, generic_delete<int, -1, decltype(&close), &close>>;
static_assert(sizeof(unique_fd) == sizeof(int), "bloated unique_fd");

int main()
{
    unique_fd fd1(open("fd.txt", O_WRONLY | O_CREAT | O_TRUNC, S_IRUSR | S_IWUSR));
    write(fd1.get(), "hello\n", 6);
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-12-06T21:22:30.323

开源 Android 框架定义了一个可以满足您需求的 unique_fd 类：[https ://android.googlesource.com/platform/system/core/+/c0e6e40/base/include/android-base/unique_fd.h](https://android.googlesource.com/platform/system/core/+/c0e6e40/base/include/android-base/unique_fd.h)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-04-22T08:47:42.930

[在cppreference.com](https://en.cppreference.com/w/cpp/memory/unique_ptr)找到答案。查看示例代码：

```
 void close_file(std::FILE* fp) { std::fclose(fp); }
    ...
    {
      std::unique_ptr<std::FILE, decltype(&close_file)> fp(std::fopen("demo.txt",                                                             
                                                                      "r"), 
                                                           &close_file);
      if(fp)     // fopen could have failed; in which case fp holds a null pointer
         std::cout << (char)std::fgetc(fp.get()) << '\n';
    }// fclose() called here, but only if FILE* is not a null pointer
     // (that is, if fopen succeeded) 
```

在vs2019中试了一下，效果很好！还使用 member 和 lambda 进行了尝试：

文件测试.h：

```
class A
{
  std::unique_ptr<std::FILE, std::function<void(std::FILE*)>> fp;
} 
```

文件测试.cpp

```
void A::OpenFile(const char* fname)
{
    fp = std::unique_ptr < std::FILE, std::function<void(std::FILE*)>>(
        std::fopen(fname, "wb"),
        [](std::FILE * fp) { std::fclose(fp); });
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-26T08:45:26.720

该解决方案基于 Nicol Bolas 的回答：

```
struct FdDeleter
{
    typedef int pointer;
    void operator()(int fd)
    {
        ::close(fd);
    }
};
typedef std::unique_ptr<int, FdDeleter> UniqueFd; 
```

它很短，但您必须避免将 UniqueFd 实例与 nullptr 进行比较并将其用作布尔表达式：

```
UniqueFd fd(-1, FdDeleter()); //correct
//UniqueFd fd(nullptr, FdDeleter()); //compiler error
if (fd.get() != -1) //correct
{
    std::cout << "Ok: it is not printed" << std::endl;
}
if (fd) //incorrect, avoid
{
    std::cout << "Problem: it is printed" << std::endl;
}
if (fd != nullptr) //incorrect, avoid
{
    std::cout << "Problem: it is printed" << std::endl;
}
return 1; 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-06-19T08:40:30.397

使 Nicol Bolas 类更通用：

```
template<class T=void*,T null_val=nullptr>
class Handle
    {
    public:
        Handle(T handle):m_handle(handle){}

        Handle(std::nullptr_t):m_handle(null_val){}

        operator T(){return m_handle;}

        bool operator==(const Handle& other) const
            {return other.m_handle==m_handle;}

    private:
        T m_handle;
    };

typedef Handle<int,-1> FileDescriptor;
typedef Handle<GLuint,0> GlResource; // according to http://stackoverflow.com/questions/7322147/what-is-the-range-of-opengl-texture-id
// ... 
```

我不确定我是否应该有默认的模板参数值。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-08-08T06:03:57.163

我建议使用`shared_ptr`而不是`unique_ptr`管理`int`句柄的生命周期，因为共享所有权语义通常更合适，并且删除器的类型已被删除。您需要以下助手：

```
namespace handle_detail
{
    template <class H, class D>
    struct deleter
    {
        deleter( H h, D d ): h_(h), d_(d) { }
        void operator()( H * h ) { (void) d_(h_); }
        H h_;
        D d_;
    };
}

template <class H,class D>
std::shared_ptr<H const>
make_handle( H h, D d )
{
    std::shared_ptr<H> p((H *)0,handle_detail::deleter<H,D>(h,d));
    return std::shared_ptr<H const>(
        p,
        &std::get_deleter<handle_detail::deleter<H,D> >(p)->h_ );
} 
```

要与文件描述符一起使用：

```
int fh = open("readme.txt", O_RDONLY); // Check for errors though.
std::shared_ptr<int const> f = make_handle(fh, &close); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-04-22T08:52:06.023

### 不要将（智能）指针强制为非指针对象。

> 理论上，我应该能够使用自定义指针类型和删除器来`unique_ptr`管理不是指针的对象。

不，你不应该。也就是说，就让它编译和运行而言，也许，但你根本不应该使用 a`unique_ptr`来管理不是指针的东西。您绝对应该为您的资源编写适当的 RAII 类 - 例如 OS 文件描述符 - 或使用某个库中现有的此类类。只有当您想要*指向*此类资源的指针时，unique_ptr 才有意义；但是，您不需要自定义删除器。

# linq - 当所有后续值都为零时，Linq 查询删除字典中值 > 0 的第一个条目

> ID：15756962
> 
> 赞同：0
> 
> 时间：2013-04-02T05:43:09.070
> 
> 标签：linq, dictionary

这是字典，

```
Dictionary<string, uint> oSomeDictionary = new Dictionary<string, uint>();

oSomeDictionary.Add("Interface1",3);
oSomeDictionary.Add("Interface2",0);
oSomeDictionary.Add("Interface3",0);
oSomeDictionary.Add("Interface4",0);
oSomeDictionary.Add("Interface5",0);
oSomeDictionary.Add("Interface6",0);
oSomeDictionary.Add("Interface7",0); 
```

条件：当第一个键的值`oSomeDictionary`大于0并且后面的值都为零时，如上，删除第一个键，否则什么都不做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T09:10:11.720

有一个简单的代码可以解决您的需求，但您应该按照评论中的说明首先订购您的字典。请谨慎使用此代码。

```
Dictionary<string, uint> oSomeDictionary = new Dictionary<string, uint>();
oSomeDictionary.Add("Interface1", 3);
oSomeDictionary.Add("Interface2", 0);
oSomeDictionary.Add("Interface3", 0);
oSomeDictionary.Add("Interface4", 0);
oSomeDictionary.Add("Interface5", 0);
oSomeDictionary.Add("Interface6", 0);
oSomeDictionary.Add("Interface7", 0);

var ordered = oSomeDictionary.OrderBy(_ => _.Key);
if (ordered.First().Value > 0 && ordered.Skip(1).All(_ => _.Value == 0))
{
    oSomeDictionary.Remove(ordered.First().Key);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T06:30:12.290

之后请参阅带有代码 stmt 的 LINQ。如果 deleteOrNot 为真，您可以删除第一项。无法在 LINQ 中完成删除。:)

```
 Dictionary<string, uint> oSomeDictionary = new Dictionary<string, uint>();

        oSomeDictionary.Add("Interface1", 3);
        oSomeDictionary.Add("Interface2", 0);
        oSomeDictionary.Add("Interface3", 0);
        oSomeDictionary.Add("Interface4", 0);
        oSomeDictionary.Add("Interface5", 0);
        oSomeDictionary.Add("Interface6", 0);
        oSomeDictionary.Add("Interface7", 0);
        bool deleteOrNot = ((from test1 in oSomeDictionary
                    where test1.Value > 0
                    select test1).Count() == 1) && (oSomeDictionary.First().Value > 0); 
```

# python - 无法使用 requirements.txt 在 vi rtualenv 上安装 python 模块

> ID：15756965
> 
> 赞同：1
> 
> 时间：2013-04-02T05:43:18.707
> 
> 标签：python, virtualenv, pip

我正在尝试从`requirements.txt`virtualenv 上的文件安装 python 模块。Pip 运行并安装它们。但是我无法导入已安装的模块，运行时它们也不会出现`pip freeze`。

这就是我运行 pip 的方式

```
(test)elssar@elssar-laptop:~$ sudo pip install -r /path/to/requirements.txt 
```

我什至尝试从包含`requirements.txt`但似乎没有任何效果的目录中运行该命令。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:07:46.270

`sudo`尝试在没有;的情况下运行 pip 它可能会设置一个不同的环境来覆盖 virtualenv 设置。

# java - 异常处理中的 Throws 和 Throw

> ID：15756968
> 
> 赞同：1
> 
> 时间：2013-04-02T05:43:22.573
> 
> 标签：java

`throws`任何人都可以简要介绍 Java中`throw`的异常处理之间的区别

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-02T05:48:56.000

当您的方法有一些代码在运行时导致错误并且您需要在方法调用时处理或抛出该异常时，使用 throws。

虽然 throw 是为了你可以显式地抛出一个错误。

这是两者的示例

对于投掷

```
public void test() throws ClientProtocolException,IOException{

    HttpGet httpGet = new HttpGet(urlStr);
    HttpClient httpclient = new DefaultHttpClient();
    HttpResponse httpResponse = httpclient.execute(httpGet);

} 
```

这将在引发异常时将异常作为 ClientProtocolException 或 IOException 抛出。

对于投掷

```
public void test(String str){

    if(str==null){
        throw new NullPointerException(); // now here you explicitly throws the error whenever you getting str object as null
    }

} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-02T05:49:33.907

当我们说：function() 抛出 IOException 时，它意味着函数内部的代码能够抛出 IOException。所以调用这个函数的人应该在 try-catch 块中处理这个函数。所以在这里我们看到了检查异常的概念。

当我们说：
抛出 IOException。
您的代码块故意抛出此异常，并且需要有人捕获它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-02T05:49:37.770

`throws :`它只是将异常传递给调用者方法。也表明该方法有可能在运行时抛出一些异常，例如`IOException`等`SQLException`...如果发生检查异常（除`RunTimeException`或其子类之外的任何异常），则必须处理（try-catch）或再次传递给调用者.

`throw:`它是生成异常的子句。（简单来说）这就是你`throws`在方法签名中看到的原因，因为它们里面必须有任何`throw`声明

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-04-02T05:50:28.980

我们`throws`在方法签名中使用来指示方法能够引发特定异常。任何调用此方法的代码都必须处理可能发生特定异常的可能性。

该`throw`关键字用于实际引发异常。它可以在任何可以放置语句的地方使用。

# plone - 自定义内容类型 H1 标记中的文本

> ID：15756969
> 
> 赞同：2
> 
> 时间：2013-04-02T05:43:25.337
> 
> 标签：plone

Dexterity 类型视图的 H1 标记（用于 Title 字段）输出，通常如下所示：

> <h1 id="parent-fieldname-title" class="documentFirstHeading"> 我的标题</h1>

我想为 H1 标签中的文本添加一些自定义标签，说：

> <h1 id="parent-fieldname-title" class="documentFirstHeading"> <span style="text-decoration: line-through;">我的</span> 标题</h1>

这将制作`My`一个删除线文本。众所周知，如果我`<span ...>`在标题字段中添加，它们会按字面意思显示。这种定制有没有简单的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-02T10:49:08.173

Title 字段是纯文本字段，因此在页面呈现时任何文本都会被转义。这是设计使然。

如果您明确希望允许输入 HTML，则需要为您的类型自定义标题显示并添加`structure`到`<h1>`元素中：

```
<h1 tal:content="structure context/title">Title</h1> 
```

`structure`TALES 关键字禁用 HTML 转义。*这允许编辑器插入任意 HTML*。

您可能希望切换到使用`RichText`字段而不是 default `TextLine`，因此您可以对其应用自动安全 HTML 转换。请参阅 Dexterity 开发人员手册中的[富文本、标记和转换章节](http://plone.org/products/dexterity/documentation/manual/developer-manual/advanced/rich-text-markup-and-transformations)。

# android - 将记录添加到数据库，程序出错

> ID：15756978
> 
> 赞同：1
> 
> 时间：2013-04-02T05:44:12.230
> 
> 标签：android

将记录添加到数据库，程序出错

日志

```
04-02 09:22:08.601: W/dalvikvm(4332): threadid=1: thread exiting with uncaught  exception (group=0x40018578)
    04-02 09:22:10.023: E/AndroidRuntime(4332): FATAL EXCEPTION: main
    04-02 09:22:10.023: E/AndroidRuntime(4332): java.lang.NullPointerException
    04-02 09:22:10.023: E/AndroidRuntime(4332):     at com.example.ok1.MySqlCursorAdapter.onClick(MySqlCursorAdapter.java:87)
    04-02 09:22:10.023: E/AndroidRuntime(4332):     at android.view.View.performClick(View.java:2485)
    04-02 09:22:10.023: E/AndroidRuntime(4332):     at android.widget.CompoundButton.performClick(CompoundButton.java:99)
    04-02 09:22:10.023: E/AndroidRuntime(4332):     at android.view.View$PerformClick.run(View.java:9080)
    04-02 09:22:10.023: E/AndroidRuntime(4332):     at android.os.Handler.handleCallback(Handler.java:587)
    04-02 09:22:10.023: E/AndroidRuntime(4332):     at     android.os.Handler.dispatchMessage(Handler.java:92)
    04-02 09:22:10.023: E/AndroidRuntime(4332):     at android.os.Looper.loop(Looper.java:130)
    04-02 09:22:10.023: E/AndroidRuntime(4332):     at android.app.ActivityThread.main(ActivityThread.java:3687)
    04-02 09:22:10.023: E/AndroidRuntime(4332):     at java.lang.reflect.Method.invokeNative(Native Method)
    04-02 09:22:10.023: E/AndroidRuntime(4332):     at java.lang.reflect.Method.invoke(Method.java:507)
    04-02 09:22:10.023: E/AndroidRuntime(4332):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:867)
    04-02 09:22:10.023: E/AndroidRuntime(4332):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:625)
    04-02 09:22:10.023: E/AndroidRuntime(4332):     at dalvik.system.NativeStart.main(Native Method) 
```

MySqlCursorAdapter

```
 package com.example.ok1;

import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.SQLException;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.ViewGroup;
import android.widget.CheckBox;
import android.widget.SimpleCursorAdapter;
import android.widget.TextView;

public class MySqlCursorAdapter extends SimpleCursorAdapter implements
        OnClickListener {
    final String Tag = "States";
    private Context context;
    private DBHelper dbHelper;
    private Cursor currentCursor;

    public MySqlCursorAdapter(Context context, int layout, Cursor c,
            String[] from, int[] to, DBHelper dbHelper) {
        super(context, layout, c, from, to);
        Log.d(Tag, "трассировка1");
        this.currentCursor = c;
        this.context = context;
        this.dbHelper = dbHelper;
        Log.d(Tag, "MySqlCursorAdapter()");
        Integer b = c.getCount();
        Log.d(Tag, "b=" + b);
    }

    public View getView(int pos, View inView, ViewGroup parent) {
        Log.d(Tag, "getView() + posss=" + pos);
        View v = inView;
        if (v == null) {
            LayoutInflater inflater = (LayoutInflater) context
                    .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            v = inflater.inflate(R.layout.my_list_item, null);
        }

        this.currentCursor.moveToPosition(pos);

        CheckBox cBox = (CheckBox) v.findViewById(R.id.bcheck);

        cBox.setTag(Integer.parseInt(this.currentCursor
                .getString(this.currentCursor
                        .getColumnIndex(DBHelper.COLUMN_ID))));
        Log.d(Tag, "tag=" + cBox.getTag().toString());
        if (this.currentCursor.getString(this.currentCursor
                .getColumnIndex(DBHelper.COLUMN_STATUS)) != null
                && Integer.parseInt(this.currentCursor
                        .getString(this.currentCursor
                                .getColumnIndex(DBHelper.COLUMN_STATUS))) != 0) {
            cBox.setChecked(true);
        } else {
            cBox.setChecked(false);
        }
        cBox.setOnClickListener(this);

        TextView txtTitle = (TextView) v.findViewById(R.id.txtTitle);
        txtTitle.setText(this.currentCursor.getString(this.currentCursor
                .getColumnIndex(DBHelper.COLUMN_NAME)));

        return (v);
    }

    public void ClearSelections() {
        Log.d(Tag, "ClearSelections()");
        this.dbHelper.clearSelections();
        this.currentCursor.requery();
    }

    @Override
    public void onClick(View v) {
        Log.d(Tag, "onClick");
        CheckBox cBox = (CheckBox) v;
        Integer _id = (Integer) cBox.getTag();
        Log.d(Tag, "Integer _id=" + _id.toString());
        ContentValues values = new ContentValues();
        values.put(" status", cBox.isChecked() ? 1 : 0);
        try {
            this.dbHelper.dbSqlite.update("mytable", values, "_id = ?",
                    new String[] { Integer.toString(_id) });
        } catch (SQLException sqle) {
            Log.d(Tag, "неудача");
            throw sqle;
        }
    }
} 
```

错误出现在该行

```
"this.dbHelper.dbSqlite.update("mytable", values, "_id = ?", new String[] {     Integer.toString(_id) });"` 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T06:49:36.907

`dbSqlite`上课`DBhelper`从来没有。`initialized`请这样做以避免`NPE`

将此方法添加到您的 DBhelper 类

```
 private void open() throws SQLException {
      dbSqlite = this.getWritableDatabase();
   } 
```

并在你的构造函数中调用它

```
public DBHelper(Context context) {
    super(context, "myDB", null, 1);
    open();
} 
```

**但是上面所说的并不是处理 db 的最佳方法，但它可以帮助您继续前进**

最好的方法是在 DBHelper 类中添加一个 open() 和 close() 方法，以便您可以在正确的条件下管理连接

**关闭方法**

```
 public void close() {
      this.close();
   } 
```

**打开（）方法**

```
public void open() throws SQLException {
      dbSqlite = this.getWritableDatabase();
   } 
```

在 onclick() 的 MySqlCursorAdapter 类中

```
 try {
        DBhelper helper = new DBhelper(this);
        helper.open();
            helper.update("mytable", values, "_id = ?",
                    new String[] { Integer.toString(_id) });
        helper.close();
        } catch (SQLException sqle) {
            Log.d(Tag, "неудача");
            throw sqle;
        }
   } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T05:57:23.297

请检查您在 DBHelper 类中的对象，因为 dbsqlite 是否已初始化

```
dbHelper.dbSqlite 
```

正如您通过引用此行在问题中提到的那样。可能是你的 dbSqlite 没有初始化好吗

```
if(dbHelper.dbSqlite==null)
    // init first then used 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-02T06:28:54.703

您是否检查过您的表是否已创建

> db.execSQL("创建表mytable("+"_id整型主键自增,"+"data_id文本,"+"名称文本,"+"任务文本,"+"状态整型"+");");

你不要在表创建中放置空格..使用这个

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-02T06:19:00.677

DBHelper
包 com.example.ok1；

```
import android.content.ContentValues;
import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteQueryBuilder;
import android.util.Log;

public class DBHelper extends SQLiteOpenHelper {
final String Tag="States";
public static final String COLUMN_ID = "_id";
public static final String COLUMN_DATA = "data_id";
public static final String COLUMN_NAME = "name";
public static final String COLUMN_STATUS = "status";
public static final String TABLE_NAME = "mytable";
public SQLiteDatabase dbSqlite;
public DBHelper(Context context) {
  // конструктор суперкласса
    super(context, "myDB", null, 1);
}

@Override
public void onCreate(SQLiteDatabase db) {
  Log.d(Tag, "--- onCreate database ---");
  // создаем таблицу с полями
  db.execSQL("create table mytable ("
      + "_id integer primary key autoincrement," 
      + "data_id text,"
      + "name text,"
      + "task text,"
      + "status integer"
       + ");");
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {

}

public void clearSelections() {
    Log.d(Tag, "clearSelections()");
    ContentValues values = new ContentValues();
    values.put(" selected", 0);
    this.dbSqlite.update(DBHelper.TABLE_NAME, values, null, null);
}

public Cursor getCursor() {
    Log.d(Tag, "getCursor() получили курсор с базы");
        String[] columns = null;
        String selection = null;
        String[] selectionArgs = null;
        String groupBy = null;
        String having = null;
        String orderBy = null;
//  SQLiteQueryBuilder queryBuilder = new SQLiteQueryBuilder();

//  queryBuilder.setTables(TABLE_NAME);

//  String[] asColumnsToReturn = new String[] { COLUMN_ID, COLUMN_NAME,
//          COLUMN_DATA, COLUMN_STATUS };

//  Cursor mCursor = queryBuilder.query(dbSqlite, asColumnsToReturn, null,
//          null, null, null, "title ASC");
//  Log.d(Tag, "getCursor() получили курсор с базы конец");
            final SQLiteDatabase db = this.getWritableDatabase();
            columns = new String[] { COLUMN_ID, COLUMN_NAME, COLUMN_STATUS };
//              selection = "data_id = ?";
//              selectionArgs = new String[] {id_for_listtsk_today};
            Cursor c = db.query("mytable", columns, null, null, null, null, null);
    return c;
}
} 
```

# jsonp - 通过javascript中的模板进行parsejson渲染

> ID：15756985
> 
> 赞同：0
> 
> 时间：2013-04-02T05:44:37.687
> 
> 标签：jsonp, jsrender

我有 parseJson 对象如下...

```
parseJSON([
{"BOOK_Name":"AAA”,"quickRead":[{"Page_Heading":"AAA-heading","Page_Url":"http://rtrt.com"},{"Page_Heading":"AAA-heading2","Page_Url":"http://bghfhghf.com"}]},
{"BOOK_Name":"BBB","quickRead":[{"Page_Heading":"BBB-heading","Page_Url":"http://dsdfdf.com"},{"Page_Heading":"BBB-heading2","Page_Url":"http://rtrtdfdf.com"}]}
]} 
```

我可以使用 javascript jsrender 在 tbody 元素中部分渲染它，如下所示......

*   元素？

    ```
    $('tbody', '#bookTemplateTable').html($('#bookTemplate').render(data)); 
    ```

    相同的模板如下：

    ```
    <script id="bookTemplate" type="text/html">
        <tr>
          <td>{{=BOOK_Name}}</td>

          <td> 
            <ul>
              <li> .. render 1st quickread value .. </li>
              <li> .. render 1st quickread value .. </li>
            </ul> 
          </td>
        </tr>  
    </script> 
    ```

    有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T10:48:41.497

你最好看看[jsrender 演示](http://borismoore.github.com/jsrender/demos/demos.html)页面。在那里您可以学习如何使用模板标签。

首先，你应该使用

```
{{>propertyName}}
{{:propertyName}} 
```

来显示数据。有关何时使用什么的说明，请参阅[此演示。](http://borismoore.github.com/jsrender/demos/step-by-step/03_converters-and-encoding.html)

对于您的特定情况，这是有效的模板：

```
<script id="bookTemplate" type="text/html">
    <tr>
      <td>{{>BOOK_Name}}</td>

      <td> 
        <ul>
          {{for quickRead}}
            <li><a href="{{>#data.Page_Url}}">{{>#data.Page_Heading}}</a></li>
          {{/for}}
        </ul> 
      </td>
    </tr>  
</script> 
```

工作示例可以在这里找到：

[http://jsfiddle.net/EGFbq/](http://jsfiddle.net/EGFbq/)

# asp.net-mvc - 在基于 MVC 框架开发的 Web 应用程序中添加 dll

> ID：15756987
> 
> 赞同：1
> 
> 时间：2013-04-02T05:45:02.953
> 
> 标签：asp.net-mvc

我已经使用类库文件开发了一个自定义注释控件现在我想在 MVC 框架上开发的 Web 应用程序中使用这个文件的 dll 那么在这个项目中添加和使用这个 dll 的方法是什么

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:48:52.600

MVC 项目与其他项目类型没有什么不同。要添加对另一个程序集 (DLL) 的引用，请在解决方案资源管理器中右键单击我们的项目，选择添加引用，然后选择您的 dll 文件。

# java - 邻接矩阵 -> 有向图 -> DFS

> ID：15756990
> 
> 赞同：0
> 
> 时间：2013-04-02T05:45:10.587
> 
> 标签：java, depth-first-search, directed-graph, adjacency-matrix

这是我和我的朋友们在摆弄之后得出的代码。我们正在尝试做的是读取邻接矩阵（input.txt），然后从中创建一个有向图，以便我们可以使用深度优先搜索来搜索它。我们希望程序的输出提供访问节点的顺序。

java代码： http: [//pastebin.com/bAzBadxi](http://pastebin.com/bAzBadxi)

input.txt 文件： http: [//pastebin.com/r72J34uA](http://pastebin.com/r72J34uA)

我的问题是，我们将“n”初始化为什么？（java代码中的第32行）

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-02T05:58:13.803

在使用它之前创建一个顶点对象。

```
Vertex n;    // before g.addVertex(n); 
```

我没有验证您的算法，只是删除编译器错误，如果您的算法正确，它应该可以正常工作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:58:06.173

您要解决的是拓扑排序问题。

[拓扑排序](http://en.wikipedia.org/wiki/Topological_sorting)

在这种情况下，你初始化什么并不重要，你可以简单地使用邻接矩阵中的第一个顶点作为开始。

而邻接矩阵（应该是方阵）是有向图的合法表示，可以直接使用矩阵搜索图。

# c# - for循环执行后多线程未终止

> ID：15756992
> 
> 赞同：0
> 
> 时间：2013-04-02T05:45:21.107
> 
> 标签：c#, multithreading

我有 n 个运行方法例程的线程。每个线程都运行搜索方法，并在给定范围内搜索项目，然后从 Web 服务器检索这些项目。但我相信他们会继续奔跑，即使范围已用尽。我正在使用 for 循环来确定线程何时应该停止搜索，但这不起作用。这就是我所拥有的：

在方法`Start()`中，我计算了一个特定范围，并将该范围赋予一个线程，该线程将在这个给定范围内进行搜索。

```
public void Start()
    {
        this.totalRangePerThread = ((this.endRange - this.startRange) / this.subWorkerThreads.Length);
        for (int i = 0; i < this.subWorkerThreads.Length; ++i)
        {
            var copy = startRange;
            this.subWorkerThreads[i] = new Thread(() => searchItem(copy, this.totalRangePerThread));
            this.startRange = this.startRange + this.totalRangePerThread;
        }

        for (int threadIndex = 0; threadIndex < this.subWorkerThreads.Length; ++threadIndex)
            this.subWorkerThreads[threadIndex].Start();
    } 
```

这是我的`SearchItem()`方法：

```
public void searchItem(int start, int pagesToSearchPerThread)
    {
        for (int count = 0; count < pagesToSearchPerThread; ++count)
        {
            start++;
            for (int activeListCount = 0; activeListCount < this.activeListItems.Count; ++activeListCount)
            {

                //further method calls here to webservers..
            }

        }  
    } 
```

我知道使用一些共享哨兵来确定何时停止线程，但我不明白如何在这里应用它？我应该如何处理这种情况，以便线程在其任务完成时优雅地中止......

# vb.net - 从没有 For Each 循环的 DataTable.Select 中获取第一个结果

> ID：15756995
> 
> 赞同：4
> 
> 时间：2013-04-02T05:45:49.890
> 
> 标签：vb.net

下面的 For 循环根本不循环。有没有优化的方法可以在没有 For 循环的情况下做同样的事情：

```
For Each drID As DataRow In dttable.Select("ID=1 and FirstName='Karthik'", "ID")
    NewID = CInt(drID.Item("ID"))
    Exit For
Next 
```

我试过用

```
NewID = IIf(dt.Select("ID=1 and FirstName='Karthik'", "ID").Length > 0, dt.Select("ID=1 and FirstName='Karthik'", "ID")(0).Item("ID"), 0) 
```

有没有其他优化的方法来改变这个甚至根本不循环的 For 循环。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-02T05:55:45.567

看起来您想`"ID"`从 DataTable 中的第一行获取而不使用`For Each`循环。您可以使用 LINQ`FirstOrDefault`方法执行此操作 - 它返回集合的第一个元素或默认值（`Nothing`对于所有引用类型），它的集合没有得到结果：

```
Dim firstRow As DataRow = dttable.Select("ID=1 and FirstName='Karthik'", "ID").FirstOrDefault()

If Not firstRow Is Nothing Then
    NewID = CInt(firstRow.Item("ID"))
Else
    NewID = 0
End If 
```

您需要`Imports System.Linq`在文件的顶部使其正常工作。

或者没有 LINQ：

```
Dim results As DataRow() = dttable.Select("ID=1 and FirstName='Karthik'", "ID")

If results.Length > 0  Then
    NewID = CInt(results(0).Item("ID"))
Else
    NewID = 0
End If 
```

# ruby-on-rails - 阻止其他用户使用我的身份验证访问 Rails 应用程序

> ID：15756999
> 
> 赞同：2
> 
> 时间：2013-04-02T05:46:07.490
> 
> 标签：ruby-on-rails, web-applications, authorization, login-control

我托管了一个 Rails 应用程序，一个在线考试系统。用户需要注册才能访问系统。因此，将为每个用户提供唯一的凭据组合。让我们假设我`user-name/password`的是`demo/demo123`。我希望我的应用程序阻止其他人登录系统，即使他知道我的凭据。这种情况的任何解决方案。

谢谢你的帮助 ：）-

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T06:06:37.607

使用 Cookie 将是一个更好的解决方案。当用户注册时，创建一个特定于用户和系统的 Cookie 值，并以加密格式（出于安全原因）并将其保存在与该用户对应的数据库中。登录时检查此 Cookie 令牌。当用户清除 cookie 时，他（他）可以请求管理员清除 DB cookie 以创建新的。

使用 IP 不会是更好的解决方案，因为在网络中，可以为 PC 分配动态 IP。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-02T05:54:44.660

您可以在用户首次登录时将其 IP 地址记录在数据库中，并且仅允许在等待一段时间（例如 1 小时）或直到当前检查完成后使用相同的凭据但从*新的 IP 地址登录。*这应该可以防止多个用户在短时间内登录到同一个用户帐户。

用户的 IP 地址可以在 Rails 控制器中使用`request.remote_ip`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-02T12:32:14.000

您可以使用[lock](https://github.com/charlotte-ruby/lock) gem 为整个应用程序添加密码。

首先，添加到您的 Gemfile。

```
gem 'lock' 
```

然后

```
bundle install 
```

接下来，创建您的密码

```
rails g lock:create_password_file yourpasswordhere 
```

最后，添加锁定您的应用程序控制器，或任何您想要的（参见[文档](https://github.com/charlotte-ruby/lock)）。

```
ApplicationController < ActionController::Base
  lock
end 
```