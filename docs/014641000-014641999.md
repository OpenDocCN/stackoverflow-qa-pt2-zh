# StackOverflow 问答 14641000-14641999

# radius - Radius 代理附加回复消息

> ID：14641001
> 
> 赞同：0
> 
> 时间：2013-02-01T06:34:51.833
> 
> 标签：radius, freeradius

我们有一个radius代理服务器，它将接收来自不同领域的请求并转发到不同的radius服务器以处理身份验证和记帐内容。通常回复消息是由目标radius服务器发出的，我们现在面临一个目标radius服务器无法回复会话超时消息的问题。

所以我们想知道是否可以附加会话超时消息以及目标radius服务器向请求者发送的回复消息？

我们正在使用自由半径。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-28T03:25:00.193

在授权部分（站点可用/默认）使用“更新”unlang 节。

```
update reply {
    Session-Timeout := "<timeout>"
} 
```

如果您想使其以上游代理向您发送消息为条件：

```
if ("%{client:Shortname}" == '<client name>') {
    <update>
} 
```

# iphone - 在 iPhone 中调用块函数

> ID：14641011
> 
> 赞同：0
> 
> 时间：2013-02-01T06:36:11.660
> 
> 标签：iphone, objective-c, arrays

我正在尝试运行以下功能

```
+(NSString *)responseFromQuery:(NSString *) queryString
{
    __block NSString *response;
    __block NSError *err = nil;

    dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_HIGH, 0),^{
        response = [NSString stringWithContentsOfURL:[NSURL URLWithString:queryString] encoding:NSUTF8StringEncoding error:&err];

        dispatch_async(dispatch_get_main_queue(), ^{

            NSLog(@"%@",response);
             if (err != nil)
             {
                UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Alert!"
                                                                    message:@"An Error has occurred" delegate:self cancelButtonTitle:@"Ok" otherButtonTitles:nil, nil];

                [alertView show];
                 return response;// = @"Error";
              }

            });
        });
   // return response;
} 
```

我想在执行块后传递响应的值，但是它首先运行最后一个返回，我怎样才能使块内的返回表达式运行。我在 NSObject 类中使用这个函数根据调试它从不运行`dispatch_async queue.`

现在，如果我返回它会给我错误`"Control may reach at the end of non void block"`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:40:13.073

要完全理解objective ci中块的实现和工作，您应该查看以下链接，它解释了很多，而且说得很简单。

[Objective C 块 - 简单理解](http://mobile.tutsplus.com/tutorials/iphone/understanding-objective-c-blocks/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T06:40:25.617

因为你要回来了 `return response`；。因为您正在返回响应，所以说“控制可能到达非 void 块的末尾”。你返回的东西意味着它是非 void 块。直接返回方法的最后一条语句。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T06:53:01.300

您不能同时使用 dispatch_async 并返回已执行块内的值。*dispatch_async*的*异步*部分意味着函数将立即返回，并且不会等待块完成执行。为此，您需要不带“a”的 *dispatch_sync*。

您会遇到的问题是您正在块中发出网络请求，这可能会阻塞您的 UI 线程。我假设这个函数在主线程中被调用。

如果你想发出一个异步请求并将返回值发送给调用者，你可以在你的函数中添加一个块参数，消息的发送者将被通知。该方法将从：

```
+(NSString *)responseFromQuery:(NSString *) queryString; 
```

到：

```
+ (void)responseFromQuery:(NSString *)queryString withBlock:(void (^)(NSString *result))block; 
```

当你有你的响应字符串时，你会打电话：

```
block(response); 
```

# java - 在 Android 键盘中显示自定义表情

> ID：14641013
> 
> 赞同：22
> 
> 时间：2013-02-01T06:36:38.387
> 
> 标签：java, android, keyboard, emoticons

在过去的 3 天里，我一直在尝试在默认的 android 消息视图中显示图形自定义表情符号。我已经成功地展示了我的自定义表情符号来代替钥匙。现在的问题是我试图在可跨度字符串生成器中显示一个可绘制对象。但是drawable只是没有出现在键盘上。这是到目前为止的代码：

```
 SpannableString ss = new SpannableString(" "); 
                    Drawable d = getResources().getDrawable(R.drawable.a); 
                    d.setBounds(0, 0, d.getIntrinsicWidth(), d.getIntrinsicHeight()); 
//                  ImageSpan span = new ImageSpan(d, ImageSpan.ALIGN_BASELINE); 
                    ImageSpan span = new ImageSpan(d);
//                  ss.setSpan(span, 0, 1, Spannable.SPAN_INCLUSIVE_EXCLUSIVE);

                    mComposing.append(":");
                    mComposing.setSpan(new ImageSpan(d), 0,1, Spannable.SPAN_EXCLUSIVE_EXCLUSIVE);
                    getCurrentInputConnection().commitText(mComposing, 1); 
```

我尝试了不同的方法来以某种方式适应可绘制对象，但它不会显示在 android 的默认消息视图上。任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-02T12:04:31.300

可能这会有所帮助： [表情 - 键盘](https://github.com/chiragjain/Emoticons-Keyboard)

另请参阅：[表情符号（表情符号）视图/键盘布局的实现](https://stackoverflow.com/questions/16768930/implementations-of-emoji-emoticon-view-keyboard-layouts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-20T14:31:26.847

也许你可以使用：

`String txt = "<img src=\"" + resourceID + "\"/>";`生成一个 HTML 标记，然后

`Spanned spanned = Html.fromHtml(txt, emojiGetter, null);`
`editTextObj = setText(spanned,BufferType.SPANNABLE);`

`emojiGetter`在哪里

```
private ImageGetter emojiGetter = new ImageGetter() {
    public Drawable getDrawable(String source){
        int id = getResources().getIdentifier(source, "drawable", context.getPackageName());

        Drawable emoji = getResources().getDrawable(id);
        int w = (int)emoji.getIntrinsicWidth() ;
        int h = (int)emoji.getIntrinsicHeight() ;
        emoji.setBounds(0, 0, w, h);
        return emoji;
    }
}; 
```

这对我来说可以。我创建了一个 CustomEditText 组件来简化这种转换。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-22T14:28:07.633

我已经做到了

```
 ImageGetter imageGetter = new ImageGetter() 
                {
                    public Drawable getDrawable(String source) {
                        Drawable d = getResources().getDrawable(R.drawable.e041);
                        d.setBounds(0, 0, d.getIntrinsicWidth(), d.getIntrinsicHeight());
                        return d;
                    }
                };

                Spanned cs = Html.fromHtml("<img src='" + getResources().getDrawable(R.drawable.e041) + "'/>", imageGetter, null);

             getCurrentInputConnection().commitText(cs, 1); 
```

//但它会覆盖最后输入的文本[**在这里看到我的问题**](https://stackoverflow.com/questions/27604043/embedding-emojiemoticons-images-to-custom-softkeyboard-android)

# android - 从android中的自定义列表中获取单选按钮值

> ID：14641017
> 
> 赞同：1
> 
> 时间：2013-02-01T06:36:52.070
> 
> 标签：android, radio-button, custom-lists

我在每一行都有一个自定义列表视图和一个单选按钮，它可以正常工作，但我想从此代码中获取所选单选按钮的 ID。例如，当我需要选定行的 textview1 值时，我该如何收集它？提前致谢。这是我的代码：

```
private static class Adapter extends BaseAdapter {
         private LayoutInflater mInflater;
         private int mResourceId = 0;
         private RadioButton mSelectedRB;
         private int mSelectedPosition = -1;

         public CitizenAdapter(Context context) {
                   mInflater = LayoutInflater.from(context);
                    }
         public int getCount() {
                    return array.size();
                    }
         public Object getItem(int position) {
                        return position;
                    }
         public long getItemId(int position) {
                        return position;
                    }       
         public View getView(final int position, View convertView, ViewGroup parent) {
                final ViewHolder holder;
                    if (convertView == null) {
                        convertView = mInflater.inflate(R.layout.table_row_citizen, null);
                        holder = new ViewHolder();
                        holder.text1 = (TextView) convertView.findViewById(R.id.TextView01);
                        holder.text2 = (TextView) convertView.findViewById(R.id.TextView02);                            
                        holder.button = (RadioButton)convertView.findViewById(R.id.radioButtonCitizen);                                                     

                        convertView.setTag(holder);

                    } else {
                        holder = (ViewHolder) convertView.getTag();
                    }       
                   holder.text1.setText(array1.get(position));
                   holder.text2.setText(array2.get(position));

                   holder.button.setOnClickListener(new OnClickListener() {
                     @Override
                     public void onClick(View v) {
                         if((position != mSelectedPosition && mSelectedRB != null)){
                             mSelectedRB.setChecked(false);
                         }
                         mSelectedPosition = position;
                         mSelectedRB = (RadioButton)v;
                     }
                 });

                     if(mSelectedPosition != position){
                         holder.button.setChecked(false);
                     }else{
                         holder.button.setChecked(true);
                         if(mSelectedRB != null && holder.button!= mSelectedRB){
                             mSelectedRB = holder.button;
                         }
                     }                      
            return convertView;
           }    

             static class ViewHolder {      
                  TextView text1;
                  TextView text2;                     
                  RadioButton button;
                }               
            } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:48:36.617

假设你需要访问方法`TextView`中的，`onClick`

```
@Override
public void onClick(View v) {
    if((position != mSelectedPosition && mSelectedRB != null)){
        mSelectedRB.setChecked(false);
    }
    mSelectedPosition = position;
    mSelectedRB = (RadioButton)v;
    View containerView = (View)v.getParent();
    TextView textView1 = (TextView)containerView.findViewById(R.id.TextView01);
} 
```

编辑：

我看到您已将`holder`对象声明为`final`. 在这种情况下，您可以从事件侦听器中直接访问`holder.text1`和对象。`holder.text2`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:37:16.650

> 我想从此代码中获取所选单选按钮的 ID。

您必须使用`setTag & get getTag`属性来获取`id`您选择的单选按钮的实际值，

```
holder.button.setTag(position);  

holder.button.setOnClickListener(new View.OnClickListener() {  
                public void onClick(View v) {   
                 int pos = (Integer) v.getTag();
                 Log.i("ID of radiobutton","Order Edit @ position : " + pos); 
                 String _Str1=array1.get(pos);
                 String _Str2=array2.get(pos);
                 }       
                }); 
```

这样，您将从行中获取 textview 的确切值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-11T09:18:18.863

像这样的代码在你的按钮 onClick

```
 int selected_radioISAwayGroup = holder.radioISAwayGroup.getCheckedRadioButtonId();
                holder.radioISAwayButton = (RadioButton) findViewById(selected_radioISAwayGroup);

                System.out.println("holder.radioISAwayButton:"+holder.radioISAwayButton.getText().toString());
                if(holder.radioISAwayButton.getText().toString().equalsIgnoreCase("Pre"))
                {
                    //Count +1 for presents
                }
                else if(holder.radioISAwayButton.getText().toString().equalsIgnoreCase("Abs"))
                {
                    //Count +1 for Absents
                }
                else
                {
                    //Count +1 for Half
                } 
```

# javafx - 组合框无法在 javafx 中解析

> ID：14641018
> 
> 赞同：1
> 
> 时间：2013-02-01T06:37:07.817
> 
> 标签：javafx

我想设计一个包含项目的组合框的应用程序。并且在选择时我想给用户自动完成建议。但是在执行此组合框时并没有得到解决。我已附上文件。

Ademo.fxml

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import javafx.collections.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.layout.AnchorPane?>

<AnchorPane prefHeight="268.0" prefWidth="290.0" xmlns:fx="http://javafx.com/fxml" fx:controller="v.C_hgj">
  <!-- TODO Add Nodes -->
  <children>
    <ComboBox layoutX="110.0" layoutY="98.0" fx:id="fruitCombo" prefWidth="90.0" promptText="choose">
      <items>
        <FXCollections fx:factory="observableArrayList">
          <String fx:value="Apple" />
          <String fx:value="orange" />
          <String fx:value="mango" />
          <String fx:value="banana" />
          <String fx:value="guava" />
          <String fx:value="water melon" />
        </FXCollections>
      </items>
    </ComboBox>
  </children>
</AnchorPane> 
```

V_hgj.java

```
package v;

    import java.util.logging.Level;
    import java.util.logging.Logger;

    import javafx.application.Application;
    import javafx.fxml.FXMLLoader;
    import javafx.scene.Scene;
    import javafx.scene.layout.AnchorPane;
    import javafx.stage.Stage;

    public class V_hgj extends Application{

        public static void main(String[] args) {
            launch(V_hgj.class, (java.lang.String[])null);

        }

        @Override
        public void start(Stage primaryStage) throws Exception {
            try
            {

                //loading .fxml file

                AnchorPane ap=FXMLLoader.load(V_hgj.class.getResource("Ademo.fxml"));
                Scene sc=new Scene(ap);
                primaryStage.setScene(sc);
                primaryStage.setTitle("Product");

                //getting external .css file 
              //  primaryStage.getScene().getStylesheets().add("file:/~/helper/gui.css");
                primaryStage.show();
            }
            catch(Exception ex)
            {
                Logger.getLogger(V_product.class.getName()).log(Level.SEVERE, null, ex);
            }
        }

    } 
```

C_hgj.java

```
package v;

import java.net.URL;
import java.util.ResourceBundle;

import javafx.fxml.FXML;
import javafx.fxml.Initializable;

public class C_hgj implements Initializable{

    @FXML
    private ComboBox fruitCombo;
    public static void main(String[] args) {
        // TODO Auto-generated method stub

    }

    @Override
    public void initialize(URL location, ResourceBundle resources) {
        // TODO Auto-generated method stub
        assert fruitCombo!=null : "reset botton not injected";

    }

} 
```

请帮忙 ....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:20:36.703

在 C_hgj 类（请遵循 Java 代码约定）中，您需要导入 javafx.scene.control.ComboBox

# android - 使用 GPS 和网络提供商在 Android 上使用定位服务的经验

> ID：14641019
> 
> 赞同：2
> 
> 时间：2013-02-01T06:37:12.177
> 
> 标签：android, gps, location

我编写了一段代码来了解当我在他的设备上为我的出租车预订应用程序启用定位服务时我的客户（出租车司机）会体验到什么。我在同一个监听器上同时使用网络和 GPS 提供商启用了定位服务。

```
LocationManager lm = (LocationManager) getSystemService(Context.LOCATION_SERVICE);
lm.requestLocationUpdates(LocationManager.NETWORK_PROVIDER,
    // God.KM20TIME, God.KM20DISTANCE, (LocationListener) updates);

lm.requestLocationUpdates(LocationManager.GPS_PROVIDER, God.KM20TIME,
            God.KM20DISTANCE, (LocationListener) updates); 
```

我的电池用完的速度比平时快得多。我的手机也比平时更热。但我期待的一致性真的很低。我决定不使用 GPS，而只使用网络提供商。我正在构建一个出租车预订应用程序，所以我需要知道出租车大概在哪里。即使我知道出租车在大约 15 分钟后位于大约（300 米）的位置，我也应该很好。所以我想我决定不通过使用这两个提供者来过度设计这个逻辑是正确的。我想知道是否有人可以在这里获得不同的体验？我错过了什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-23T10:27:43.630

根据我的经验，网络提供商的质量可能会有很大差异。

网络提供商使用 WiFi 和蜂窝塔信息的组合来提供位置信息。

如果您碰巧靠近 Wifi 网络，这在城市化地区很常见，但不是在城市以外，您通常会获得非常好的准确性。

但是，在 Wifi 的范围之外，您将受制于手机信号塔。在这里，精度取决于手机信号塔的质量和功能，以及可用于对您的位置进行三角测量的手机信号塔的数量。

在这些情况下，质量可能会有很大差异*，*不仅在不同地点之间，而且还取决于您使用的运营商、他们的手机信号塔之间的距离，以及他们拥有的手机信号塔的制造和世代。较新的具有更多关于位置的功能，例如可能会自行提供方位。

我的应用程序在瑞典运行，在我们国家的某些地区，运营商可能在非常大的区域内只有一个塔。在这些情况下，所有经纬度定位都直接在塔上，精度甚至高达 20.000 - 30.000 米。

基本上，我的观点是，在使用网络提供商时，如果您不在 Wifi 附近，我会对 300 米的精度非常满意。

关于电池/热量 - 根据您的要求，您可以大量使用时间/距离参数以获得“足够好”的更新频率，而不会对手机造成太多负担。

# linux - awk 打印不带引号的值

> ID：14641020
> 
> 赞同：1
> 
> 时间：2013-02-01T06:37:13.870
> 
> 标签：linux, bash, centos

我有这个价值

```
option 'staticip' '5.5.5.1' 
```

我只想打印`5.5.5.1`没有引号。我有用

```
cat /etc/filename | grep staticip | awk '{print $3}' 
```

但结果随之而来`'5.5.5.1'`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-02-01T06:43:11.083

或者，您可以使用`tr`删除违规字符：

```
cat /etc/filename | grep staticip | awk '{print $3}' | tr -d \' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T06:42:01.810

您可以使用 awk 的`gsub()`函数将引号更改为空。

```
awk '{gsub(/'"'"'/, "", $3); print $3}' 
```

注意这是真的`gsub(/'/, "", $3)`。丑陋来自于需要将引号粘合在一起。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T06:42:17.333

```
awk '$2=="staticip" && $0=$4' FS="'" 
```

结果

```
5.5.5.1

```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T06:42:34.000

您可以使用 awks substr 函数或将其传递给 cut 命令。我让您阅读 awk substr 的手册页。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-01-16T12:45:19.603

要从 awk 输出中删除 '，您可以使用 `sed "s/^'//;s/'$//"` 此命令仅在输出行的开头和结尾删除 '，并且不会像使用 awk 那样繁重，如果使用 tr，则不会那么通用。awk 在内存中要大得多，并且 tr 从输出中删除所有并不总是想要的东西。

# python - 功能性python——为什么这些生成器中只有一个需要 list() 才能工作？

> ID：14641024
> 
> 赞同：5
> 
> 时间：2013-02-01T06:37:36.927
> 
> 标签：python, functional-programming, chinese-remainder-theorem

在从元组向量（残差，模数）计算中国剩余定理时，以下代码失败：

```
c = ((1,5),(3,7),(11,13),(19,23))

def crt(c):
        residues, moduli = zip(*c)
        N = product(moduli)
        complements = (N/ni for ni in moduli)
        scaled_residues = (product(pair) for pair in zip(residues,complements))
        inverses = (modular_inverse(*pair) for pair in zip(complements,moduli))
        si = (product(u) for u in zip(scaled_residues,inverses))
        result = sum(si) % N
        return result 
```

将结果设为**0**（我猜生成的迭代是空的）。然而，以下代码完美运行：

```
def crt(c):
        residues, moduli = zip(*c)
        N = product(moduli)
        complements = list((N/ni for ni in moduli)) # <-- listed
        scaled_residues = (product(pair) for pair in zip(residues,complements))
        inverses = (modular_inverse(*pair) for pair in zip(complements,moduli))
        si = (product(u) for u in zip(scaled_residues,inverses))
        result = sum(si) % N
        return result 
```

这会产生（a）**8851**的正确结果。

为什么我必须`list(`使用第一批发电机之一？添加`list`到任何后续生成器不会更改失败 (0) 结果。仅列出第一个生成器会产生正确的结果。这里发生了什么 ？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T06:43:57.170

你迭代两次`complements`。您只能在生成器表达式上迭代一次。

如果你在 Python 2.x 上，`zip(residues,complements)`将会消耗`complements`并且没有任何东西可以用于`zip(complements,moduli)`. 在 Python 3.x`zip`上是一个生成器本身，问题出现在代码的后面，当`sum()`实际运行生成器时。`complements`它会从每次迭代中提取两个项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:03:40.540

根据答案中的建议作为参考，我重新实现了问题中的代码，如下所示：

```
def complements(moduli,N):
        return (N/ni for ni in moduli)

def scaled_residues(residues,complements):
        return (product(pair) for pair in zip(residues,complements))

def inverses(complements,moduli):
        return (modular_inverse(*pair) for pair in zip(complements,moduli))

def crt_residue_terms(scaled_residues,inverses):
        return (product(u) for u in zip(scaled_residues,inverses))

 def crt(c):   
    residues, moduli = zip(*c)
    N = product(moduli)
    return sum(
            crt_residue_terms(
                    scaled_residues(residues,complements(moduli,N)),
                    inverses(complements(moduli,N),moduli)
            )) % N 
```

现在它在不使用任何列表的情况下生成正确的**8851结果。**凉爽的。

# c# - Appharbor 构建错误：找不到程序集“Microsoft.Exchange.WebServices”

> ID：14641025
> 
> 赞同：1
> 
> 时间：2013-02-01T06:37:42.207
> 
> 标签：c#, asp.net, exchangewebservices, appharbor

我是 AppHarbor 的新手，我的项目（Asp.net / C# Web 服务）出现此构建错误。我的 hello world 运行良好并已部署。但是，我编写的这个新方法使用 EWS 托管包连接到 Exchange。

它在我的本地运行良好，但在 AppHarbor 上运行良好。我尝试将预编译设置为 False，但错误仍然存​​在。这是详细文本....任何指针/帮助将不胜感激。

1>项目“D:\temp\aeprsuko.xdi\input\exchangeservice\exchangeservice.sln”（1）正在构建“D:\temp\aeprsuko.xdi\input\exchangeservice\exchangeservice\exchangeservice.csproj”（2）节点 1（默认目标）。2>PrepareForBuild：创建目录“obj\Release\”。ResolveAssemblyReferences：主要参考“Microsoft.Exchange.WebServices”。2>C:\Windows\Microsoft.NET\Framework\v4.0.30319\Microsoft.Common.targets(1578,5)：警告 MSB3245：无法解析此引用。找不到程序集“Microsoft.Exchange.WebServices”。检查以确保该程序集存在于磁盘上。如果您的代码需要此引用，您可能会遇到编译错误。[D:\temp\aeprsuko.xdi\input\exchangeservice\exchangeservice\exchangeservice.csproj]

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T21:01:44.390

问题很可能是您没有将相关的 dll 与您的应用程序一起推送，如果您是，您可能在本地计算机上的位置引用它，并在您的应用程序本地的位置进行大量引用。

尝试改用[NuGet 包](https://nuget.org/packages/EWS2.0/)或确保使用代码推送 dll。[FAQ](http://support.appharbor.com/kb/getting-started/frequently-asked-questions)中提供了有关此类问题的更多帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T21:38:37.600

在您的项目的参考资料中，您可以尝试将“复制本地”设置为 true？

# windows-phone-7.1 - windows phone 7中修改联系人时的通知

> ID：14641027
> 
> 赞同：1
> 
> 时间：2013-02-01T06:37:55.057
> 
> 标签：windows-phone-7.1, contacts

手机中的联系人显示在我的 windows phone 7 应用程序中。我的要求是从外部更改我的应用程序中的联系人时更新。我怎样才能获得联系方式变更的通知..？
或者更新具有良好应用性能的联系人的最佳方式是什么。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:46:10.310

无法获得有关联系人更改的通知。您所能做的就是不时重新阅读联系人（例如在应用程序启动时）。

# android - 锁定屏幕小部件设置问题

> ID：14641032
> 
> 赞同：2
> 
> 时间：2013-02-01T06:38:26.410
> 
> 标签：android

我正在开发一个在锁定屏幕小部件区域上显示我的应用程序的应用程序，因此我从[这里](http://www.vogella.com/articles/AndroidWidgets/article.html)找到了一些示例，并且我尝试制作按`AppWidgetProvider`类处理的服务，但是当我在模拟器上运行它时，它不会在锁定屏幕上显示我的应用程序。这是我的活动..

```
ExampleAppWidgetProvider asd = new ExampleAppWidgetProvider();
        AppWidgetManager appWidgetManager= AppWidgetManager.getInstance(getApplicationContext());
        int[] appWidgetIds = null;
        asd.onUpdate(getApplicationContext(), appWidgetManager,appWidgetIds); 
```

**ExampleAppWidgetProvider**

```
private static final String LOG = "de.vogella.android.widget.example";

      @Override
      public void onUpdate(Context context, AppWidgetManager appWidgetManager,
          int[] appWidgetIds) {

        Log.w(LOG, "onUpdate method called");
        // Get all ids
        ComponentName thisWidget = new ComponentName(context,
                ExampleAppWidgetProvider.class);
        int[] allWidgetIds = appWidgetManager.getAppWidgetIds(thisWidget);

        // Build the intent to call the service
        Intent intent = new Intent(context.getApplicationContext(),
            UpdateWidgetService.class);
        intent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS, allWidgetIds);

        // Update the widgets via the service
        context.startService(intent);
      } 
```

**更新小部件服务**

```
public class UpdateWidgetService extends Service {
    private static final String LOG = "de.vogella.android.widget.example";

    @Override
    public void onStart(Intent intent, int startId) {
        Log.i(LOG, "Called");
        // Create some random data

        AppWidgetManager appWidgetManager = AppWidgetManager.getInstance(this
                .getApplicationContext());

        int[] allWidgetIds = intent
                .getIntArrayExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS);

        ComponentName thisWidget = new ComponentName(getApplicationContext(),
                ExampleAppWidgetProvider.class);
        int[] allWidgetIds2 = appWidgetManager.getAppWidgetIds(thisWidget);
        Log.w(LOG, "From Intent" + String.valueOf(allWidgetIds.length));
        Log.w(LOG, "Direct" + String.valueOf(allWidgetIds2.length));

        for (int widgetId : allWidgetIds) {
            // Create some random data
            int number = (new Random().nextInt(100));

            RemoteViews remoteViews = new RemoteViews(this
                    .getApplicationContext().getPackageName(),
                    R.layout.widget1);
            Log.w("WidgetExample", String.valueOf(number));
            // Set the text
            remoteViews.setTextViewText(R.id.app_name,
                    "Random: " + String.valueOf(number));

            // Register an onClickListener
            Intent clickIntent = new Intent(this.getApplicationContext(),
                    ExampleAppWidgetProvider.class);

            clickIntent.setAction(AppWidgetManager.ACTION_APPWIDGET_UPDATE);
            clickIntent.putExtra(AppWidgetManager.EXTRA_APPWIDGET_IDS,
                    allWidgetIds);

            PendingIntent pendingIntent = PendingIntent.getBroadcast(
                    getApplicationContext(), 0, clickIntent,
                    PendingIntent.FLAG_UPDATE_CURRENT);
            remoteViews.setOnClickPendingIntent(R.id.movie_name, pendingIntent);
            appWidgetManager.updateAppWidget(widgetId, remoteViews);
        }
        stopSelf();

        super.onStart(intent, startId);
    }

    @Override
    public IBinder onBind(Intent intent) {
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-16T14:35:06.967

根据我对类似问题的回答：

*   [如何创建自定义锁屏小部件](https://stackoverflow.com/a/23697807/383414)

有 2 处更改使其可用作锁屏小部件：

*   更新`widgetCategory`以包括`keyguard`
*   添加一个`initialKeyguardLayout`

这些更改在`./res/xml/widget_info.xml`文件中完成，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<appwidget-provider xmlns:android="http://schemas.android.com/apk/res/android"
    android:initialKeyguardLayout="@layout/widget"
    android:initialLayout="@layout/widget"
    android:minHeight="40dp"
    android:minWidth="250dp"
    android:updatePeriodMillis="0"
    android:widgetCategory="home_screen|keyguard" >
</appwidget-provider> 
```

看看其他答案 - 它包含指向一个非常简单的演示小部件的链接，您可以从我的 github 获得该小部件。他们可能会帮助你，即使他们与这个问题并不完全相关。

# php - 在 Zend Framework 中发送显示异常的邮件

> ID：14641045
> 
> 赞同：0
> 
> 时间：2013-02-01T06:39:55.030
> 
> 标签：php, zend-framework, wamp, sendmail

我正在尝试在本地主机上的 zend 框架中发送电子邮件。

以下是我的代码：

```
$mail = new Zend_Mail('utf-8');
        $mail->addTo($email);
        $mail->setSubject('Welcome');
        $mail->setFrom('test@user.com', 'test@user.com');
        $mail->setBodyText($bodyText);
        $sent = true;

        // Send the email
        try {
            $mail->send();
        } catch (Exception $e) {
            echo "<pre>";
            print_r($e);
            exit;
            $sent = false;
        }
        return $sent; 
```

但它显示以下异常：

> [message:protected] => 无法发送邮件。mail() [function.mail]：无法在“localhost”端口 25 连接到邮件服务器，请验证 php.ini 中的“SMTP”和“smtp_port”设置或使用 ini_set()

以下是我在 php.ini 中的设置

```
[mail function]
; For Win32 only.
; http://php.net/smtp
SMTP = localhost
; http://php.net/smtp-port
smtp_port = 25

; For Win32 only.
; http://php.net/sendmail-from
sendmail_from = test@user.com 
```

我正在使用 PHP 版本 5.3.9，Wampserver 2.2。

如何解决此错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T06:42:13.447

试试这个链接如何使用本地主机发送邮件

```
//Prepare email
$mail = new Zend_Mail();
$mail->addTo($email);
$mail->setSubject($subject);
$mail->setBody($message);
$mail->setFrom('username@gmail.com', 'User Name');

//Send it!
$sent = true;
try {
    $mail->send();
} catch (Exception $e){
    $sent = false;
}

//Do stuff (display error message, log it, redirect user, etc)
if($sent){
    //Mail was sent successfully.
} else {
    //Mail failed to send.
} 
```

或试试这个链接[Sending email using Zend Framework and PHP](https://stackoverflow.com/questions/2278095/sending-email-using-zend-framework-and-php)

# mysql - 如何将 mysql 查询中的记录插入 wxPython listCtrl 小部件？

> ID：14641049
> 
> 赞同：0
> 
> 时间：2013-02-01T06:40:14.460
> 
> 标签：mysql, wxpython, listctrl

我有一个简单的代码，需要正确输出我想从 mysql 查询中提取的行。请在下面查看我的代码。不知道真正的问题是什么。我试图在网上搜索，但没有运气。

```
sql="""SELECT * FROM users ORDER BY fname ASC LIMIT 5"""        
    cr.execute(sql)
    rows = cr.fetchall()

    self.list=wx.ListCtrl(panel,pos=(20,100),size=(355,130),
                          style=wx.LC_REPORT|wx.SUNKEN_BORDER|wx.LC_HRULES|wx.LC_VRULES)

    self.list.InsertColumn(0, 'Name')
    self.list.InsertColumn(1, 'Email')
    self.list.InsertColumn(2, 'Contact Number', width=150)

    self.list.SetColumnWidth(0, 100)
    self.list.SetColumnWidth(1, 200)
    self.list.SetColumnWidth(2, 100)

    n=0
    for r in rows:
        self.list.InsertStringItem()(n, r[0])
        self.list.SetStringItem(n, 1, r[1])
        self.list.InsertItem(n, 2, r[2])
        n+=1 
```

我收到错误“return *controls* .ListCtrl_InsertStringItem(*args, **kwargs) TypeError: String or Unicode type required”。非常感谢任何人的帮助。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T22:03:33.443

在 for 循环中，您只需对除第一列之外的每一列都使用 SetStringItem 命令。所以应该是 self.list.SetStringItem (n, 2, r[2]) 而不是“self.list.InsertItem(n, 2, r[2])”

就个人而言，我会使用 ObjectListView 而不是 ListCtrl。我在这里写了一篇关于将它与 SQLAlchemy 和 SQLite 一起使用的很好的教程：

[http://www.blog.pythonlibrary.org/2011/11/10/wxpython-and-sqlalchemy-an-intro-to-mvc-and-crud/](http://www.blog.pythonlibrary.org/2011/11/10/wxpython-and-sqlalchemy-an-intro-to-mvc-and-crud/)

这可能对你也有帮助。

# java - 如何改进我在 Java 中合并两个排序链接列表的代码

> ID：14641056
> 
> 赞同：1
> 
> 时间：2013-02-01T06:40:57.793
> 
> 标签：java, linked-list, mergesort

我通过电子邮件收到了微软的面试问题，很简单，只需合并两个排序的链表并确保没有相同的数据。

我用Java实现了它：

[https://gist.github.com/cb4cd94f74cff1d2bd03](https://gist.github.com/cb4cd94f74cff1d2bd03)

起初我想使用递归，但我认为当列表太大时它效率不高。所以我改用*while*。

但是当我把它发回去时，没有任何回应了，所以我想知道我的代码有什么问题吗？我应该如何改进它？

谢谢 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:05:57.423

您正在检查其中一个列表是否`null`被`RuntimeException`抛出？我认为，如果其中一个列表是`null`而另一个不是，您可以返回第二个。我错过了什么吗？无论如何，如果输入不符合您的预期，则没有理由 throw `RuntimeException`，更`InvalidArgumentException`适合。

```
if (head1 == null || head2 == null) {
        throw new RuntimeException(
                "Unavaliable source data sets, please make sure both of the two lists are not null");
    } 
```

此外，您的代码不是最优的。我会选择更简洁的东西：（注意使用[访问器方法](http://journals.ecs.soton.ac.uk/java/tutorial/java/strings/accessors.html)而不是直接访问`Node`类成员——这被认为是不好的，因为你破坏了封装）

```
Node MergeLists(Node list1, Node list2) {
    if (list1 == null) {
       return list2;
    } 
    if (list2 == null) {
        return list1;
    }  

    if (list1.getData() < list2.getData()) {
        list1.setNext(MergeLists(list1.getNext(), list2));
        return list1;
    } else {
        if (list1.getData() != list2.getData()) {
            list2.setNext(mergeLists(list2.getNext(), list1));
            return list2;
        }

        Node tail = mergeLists(list2.getNext(), list1.getNext());
        tail = (tail == null) ? null : tail.getNext();

        list2.setNext(tail);
        return list2;
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-16T20:15:55.330

Stefan Haustein 在另一个帖子中解决了这个问题！

[采访：合并两个排序的单链表](https://stackoverflow.com/questions/10707352/interview-merging-two-sorted-singly-linked-list)

```
public static Node merge(Node list1, Node list2) {
    if (list1 == null)
        return list2;
    if (list2 == null)
        return list1;

    Node head;
    if (list1.data < list2.data) {
        head = list1;
    } else {
        head = list2;
        list2 = list1;
        list1 = head;
    }
    while (list1.next != null && list2 != null) {
        if (list1.next.data <= list2.data) {
            list1 = list1.next;
        } else {
            Node tmp = list1.next;
            list1.next = list2;
            list2 = tmp;
        }
    }
    if (list1.next == null)
        list1.next = list2;
    return head;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:13:37.300

你可以改进你的算法来解释这样的列表：

```
 1 -> 4 -> 6 -> 8  -> 12
 2 -> 3 -> 9 -> 10 -> 19 
```

用你的算法：

```
1:    1 -> 2 -> 4 -> 6 -> 8 -> 12        Node1: 1, Node2: 2
2:    1 -> 2 -> 3 -> 4 -> 6 -> 8 -> 12   Node1: 2, Node2: 3
3:    1 -> 2 -> 3 -> 4 -> 6 -> 8 -> 12   Node1: 3, Node2: 9  
... 
```

使用优化算法，您会看到 2 -> 3 将适合 1 -> 4 并将 1 指向 2 和 3 指向 4。正是这组指令使它如此：

```
 ...
 tmp = head2.next;
 head2.next = head1.next;
 head1.next = head2;
 head2 = tmp;
 head1 = head1.next;
 ... 
```

见你设置`head1.next = head2`然后 2 行后你设置`head1 = head1.next`。

此外，阅读并试图确定节点到节点发生了什么真的很困难。你的评论没有用。也许像`//swap the nodes`.

您的 while 循环可以使用退出条件。多个出口点不是很好的风格。无限循环是一个很大的禁忌，它们使理解/绘制代码变得更加困难。

希望这可以帮助。

编辑：这就是我想出的。

```
public static Node merge(Node node1, Node node2){
    //store head to be returned (the smallest)
    Node masterHead = node1.value > node2.value? node2 : node1;
    //put smaller elements at the beginning
    while(node1 != null && node2.next != null && node1.value > node2.value)
    {   
        Node nextInList2 = node2.next;
        node2.next = node1;
        node1 = node2;
        node2 = nextInList2;
    }
    //merging loop
    while(node1.next != null && node2 != null){
        if(node1.next.value > node2.value)
        {
            //insert node(s) into the array
            Node higherNode = node1.next;
            node1.next = node2;
            //advance until every node being inserted is less that the next
            while(node2.next != null && higherNode.value > node2.next.value){
                node2 = node2.next;
            }
            //point back into the list
            Node nextInList2 = node2.next;
            node2.next = higherNode;
            node2= nextInList2;
        }
        node1 = node1.next;
    }
    if(node1.next == null)
        node1.next = node2;
    return masterHead;
} 
```

我没有测试空参数，只是因为假设/我没有把它变成微软。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-01-16T19:24:15.833

这是一个解决方案

```
Public static void merge(Node first, Node second){
    if(first==null) return second;
    if(second==null) return first;

    if(first.data<second.data){
        first.next = merge(first.next, second);
        return first;
    }else{
        second.next = merge(second.next, first);
        return second;
    }
} 
```

# android - TILT 控制 libgdx 上的 3d obj 文件

> ID：14641061
> 
> 赞同：1
> 
> 时间：2013-02-01T06:41:25.680
> 
> 标签：android, accelerometer, libgdx, tilt

我是 android 开发和 libgdx 的新手...，

据说我在 libgdx 中加载了一个 3d .obj 文件椭圆（地球），我想使用加速度计向下和侧向控制它..，

我怎么能这样做任何建议，。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:05:58.847

如果要读取轴的加速度计值`x`，`y`请`z`使用

```
float accelX = Gdx.input.getAccelerometerX();
float accelY = Gdx.input.getAccelerometerY();
float accelZ = Gdx.input.getAccelerometerZ(); 
```

如果您想从这些值中获取用于渲染的旋转矩阵，最好使用`getRotationMatrix()`SensorManager[或其](http://developer.android.com/reference/android/hardware/SensorManager.html#getRotationMatrix%28float%5B%5D,%20float%5B%5D,%20float%5B%5D,%20float%5B%5D%29)在[Input](http://libgdx.badlogicgames.com/nightlies/docs/api/com/badlogic/gdx/Input.html#getRotationMatrix%28float%5B%5D%29)类中的抽象

```
public void getRotationMatrix (float[] matrix) {
    SensorManager.getRotationMatrix(matrix, null, accelerometerValues, magneticFieldValues);
} 
```

看看这个[教程](http://code.google.com/p/libgdx/wiki/InputAccelerometer)

# android - 如何在不生根的情况下从用户那里获取 Android 4.1 的 android 日志？

> ID：14641063
> 
> 赞同：2
> 
> 时间：2013-02-01T06:41:50.183
> 
> 标签：android, logging, sdk, root, ddms

启动 Android 4.1 获取 android log 需要 ROOT 权限，所以现在不可能要求用户使用 LogCollector 之类的应用程序发送 log，它只是获取 android log 并将其发送到电子邮件。Android 日志可以使用 Android SDK 中的 ddms 应用程序查看，但要求用户安装 Android SDK 并不好。

那么，如何在不生根的情况下从用户那里获取 Android 4.1 的 android 日志？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T06:47:24.643

您现在可以在未经许可的情况下获取自己的应用程序日志。您根本无法读取其他应用程序的日志，无论是否许可。

这有点记录[在这里](https://groups.google.com/forum/?fromgroups=#!topic/android-developers/6U4A5irWang)。只需参考 Diane Hackborn 的回复：

> 变化是第三方应用程序不再获得读取日志权限，但是每个应用程序都可以读取仅包含*他们*编写的行的日志，而无需任何权限。
> 
> 请记住，对日志的访问从来都不是 SDK 的一部分，也仍然不是 SDK 的一部分。如果您依赖它，那么即使在此更改之后，您也可能会冒着将来崩溃的风险。（这就是为什么它在文档中丢失的部分原因，它不是 SDK 的一部分，所以实际上没有地方可以记录它，实际上记录它会使其成为我们不使用的 SDK 的一部分不想。:p)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T06:50:21.387

有很多方便的*库*可以将崩溃报告发送给您。

1.  [阿克拉](http://acra.ch/)
2.  [Zubhium](https://www.zubhium.com/) [工作原理](https://www.zubhium.com/docs/crashreporting/)
3.  [错误感知](http://www.bugsense.com/)

Acra 是开源和免费的。*Zubhium 和 Bug Sense免费版*的功能有限。

总而言之，这些**仅**适用于您自己的应用程序。其他不属于你的东西，基本上都是**禁区**。

我不确定这是否可行，但请参阅[Cyanogenmod](https://github.com/CyanogenMod)的来源。那里可能有一些有用和有趣的东西。

# javascript - Javascript 样式对象将复杂的颜色名称转换为 rgb

> ID：14641065
> 
> 赞同：2
> 
> 时间：2013-02-01T06:41:57.113
> 
> 标签：javascript, css, rgb

在将复杂的 CSS 颜色名称应用于`document.getElementById(xxx).style`对象中的 DOM 元素时，有没有办法覆盖 javascript 如何将复杂的 CSS 颜色名称转换为 rgb 值。

例如： setting`document.getElementById("colorMe").style.background = "lightblue"`将`"DOMElement".style`对象设置为背景 = `"rgb(...)"`。

但是， setting `document.getElementById("colorMe").style.background`= "blue" 将`"DOMElement".style`对象设置为`background = "blue"`.

我想要所有颜色名称的第二个版本，而不仅仅是*简单*的颜色名称。

我想绕过 javascript 如何将该颜色转换为**复杂颜色名称**的 RGB 值。这可能吗？

编辑：我知道有一些方法可以来回转换，我只是想绕过 javascript 似乎“为我”转换它们的方式......我希望它保持为“浅蓝色”，并且浏览器似乎将浅蓝色处理为背景颜色就好了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T06:47:25.533

You could use `setAttribute`:

```
element.setAttribute('style', 'background-color: lightblue'); 
```

To preserve the existing inline style:

```
var box = document.getElementById("box"),
    old_style = box.getAttribute('style');

box.setAttribute('style', old_style + ' background-color: lightblue;'); 
```

**[DEMO](http://jsfiddle.net/edprj/2/)**

Notice that the inline `background-color` is 'lightblue' and not 'rgb(173, 216, 230).'

# android - 从内部存储器读取图像android给出空指针异常

> ID：14641073
> 
> 赞同：1
> 
> 时间：2013-02-01T06:42:25.950
> 
> 标签：android, image, file, storage

我对android很陌生。我想将图像保存到内存中，然后从内存中检索图像并将其加载到图像视图中。我已使用以下代码成功地将图像存储在内部存储器中：

```
void saveImage() {
    String fileName="image.jpg";
    //File file=new File(fileName);
    try 
    {

       FileOutputStream fOut=openFileOutput(fileName, MODE_PRIVATE);
       bmImg.compress(Bitmap.CompressFormat.JPEG, 100, fOut);

    }
    catch (Exception e) 
    {
       e.printStackTrace();
    }
} 
```

使用此代码图像被保存。但是当我尝试检索图像时，它给了我错误。用于检索图像的代码是：

```
FileInputStream fin = null;

        ImageView img=new ImageView(this);
        try {
            fin = openFileInput("image.jpg");
        } catch (FileNotFoundException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }
        byte[] bytes = null;
        try {
            fin.read(bytes);
        } catch (Exception e) {
            e.printStackTrace();
        }
        Bitmap bmp=BitmapFactory.decodeByteArray(bytes,0,bytes.length);
        img.setImageBitmap(bmp); 
```

但我得到一个空指针异常。

我检查了文件是否存在于路径的内部存储器中：

/data/data/com.test/files/image.jpg

我做错了什么请帮我解决这个问题。我经历了很多堆栈问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T06:47:13.820

这是因为您的字节数组为空，将其实例化并分配大小。

```
 byte[] bytes = null;  // you should initialize it with some bytes size like new byte[100]
    try {
        fin.read(bytes);
    } catch (Exception e) {
        e.printStackTrace();
    } 
```

**编辑1：**我不确定，但你可以做类似的事情

```
byte[] bytes = new byte[fin.available()] 
```

**编辑 2：** 这是一个更好的解决方案，因为您正在阅读图像，

```
FileInputStream fin = null;

    ImageView img=new ImageView(this);
    try {
        fin = openFileInput("image.jpg");
        if(fin !=null && fin.available() > 0) {
            Bitmap bmp=BitmapFactory.decodeStream(fin) 
            img.setImageBitmap(bmp);
         } else {
            //input stream has not much data to convert into  Bitmap
          }
    } catch (FileNotFoundException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

帮助 - 杰森罗宾逊

# c# - 从 TcpClient 读取字符串

> ID：14641075
> 
> 赞同：0
> 
> 时间：2013-02-01T06:42:35.723
> 
> 标签：c#, tcp, stream, byte

所以我无法读取通过 Tcp 流发送的字符串。我正在使用此代码发送。

```
byte[] bytes = ASCIIEncoding.ASCII.GetBytes("connect");
NetworkStream stream = client.GetStream();
StreamWriter writer = new StreamWriter(stream);
writer.Write(bytes);
writer.Close(); 
```

这段代码要阅读：

```
public void getConnectionString()
{

    NetworkStream ns = client.GetStream();

    byte[] bytes = new byte[client.ReceiveBufferSize];
    ns.Read(bytes, 0, bytes.Length);
    string info = Encoding.ASCII.GetString(bytes);
    MessageBox.Show(info);
} 
```

但这一切返回的是 System: byte[]

它不应该返回字符串吗？我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T06:50:55.353

问题是你在打电话

```
writer.Write(bytes); 
```

这反过来又调用-[`TextWriter.Write(object)`](http://msdn.microsoft.com/en-us/library/dfc2b8zk.aspx)它只是调用`ToString()`. `byte[]`该`ToString()`调用将返回`System.Byte[]`。

创建 a 的`StreamWriter`目的是您可以编写*文本*：

```
writer.Write("connect"); 
```

所以你根本不需要给自己打电话`Encoding.GetBytes()`。但是，如果您*真的*只想通过套接字发送 ASCII，则应在创建时明确指定`StreamWriter`：

```
StreamWriter writer = new StreamWriter(stream, Encoding.ASCII); 
```

当然，另一种选择是您不必费心 a `StreamWriter`，并直接将字节发送到流中。不过，了解其中的区别很重要：`Stream`API 处理二进制数据；`TextWriter`API 处理文本数据。（并`StreamWriter`为您执行该文本到二进制转换。）

# c# - 如果我发送约会而不在代码中显示它，则使用剪贴板粘贴 RTF 文本不起作用

> ID：14641078
> 
> 赞同：0
> 
> 时间：2013-02-01T06:42:48.960
> 
> 标签：c#, outlook

我正在 Visual Studio 2010 和 c sharp 中开发一个应用程序。在这个应用程序中，我正在创建一个约会项目，通过 word doc 在约会正文中粘贴一些 RTF 文本并发送它。以下是我的代码的一部分：

```
 public void SetAppointmentBodyViaWordDoc(ref Outlook.AppointmentItem appointment, string rtfText) 
```

{ Outlook.Inspector 检查员 = null; 尝试 { //appointment.Body = string.Empty; System.Windows.Forms.DataObject dataObject = new System.Windows.Forms.DataObject(); dataObject.SetData(DataFormats.Rtf, rtfText); System.Windows.Forms.Clipboard.Clear(); System.Windows.Forms.Clipboard.SetDataObject(dataObject, false, 10, 200); 检查员=约会。GetInspector；Word.Document 约会ItemDocument = 检查员.WordEditor as Word.Document; 约会项目文档.应用程序.屏幕更新=假；foreach（约会ItemDocument.Windows中的Word.Window窗口）{window.Selection.WholeStory(); 窗口。选择。类型退格（）；window.Selection.Paste();

```
 //move the cursor to the top
                object story = Word.WdUnits.wdStory;
                object missing = Missing.Value;
                window.Selection.HomeKey(ref story, ref missing);
                break;
            }
            appointmentItemDocument.Application.ScreenUpdating = true;
        }
        catch (System.Exception ex)
        {
                System.Windows.Forms.MessageBox.Show("Exception in SetAppointmentBodyViaWordDoc(): " + System.Environment.NewLine +
                    ex.ToString());
        }
        finally
        {
            if (inspector != null) Marshal.ReleaseComObject(inspector);
        } 
```

}

当我调用 Appointment.Display() 时，它可以完美运行，我可以查看并发送带有粘贴文本的约会。但是，如果我使用 Appointment.Send() 方法在代码中发送约会而不显示约会，那么它在正文中没有粘贴的文本，并且收件人的正文为空。我需要发送它而不显示约会。如果有人对此问题有任何想法，请告诉我。

非常感谢，

苏里亚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T06:55:53.650

为什么不简单地设置 ApppointmeentItem.RtfBody 属性？

# apple-push-notifications - registerForRemoteNotificationTypes 时的编码问题

> ID：14641083
> 
> 赞同：1
> 
> 时间：2013-02-01T06:43:02.823
> 
> 标签：apple-push-notifications

我在宏“EnablePushNotification”下的应用程序中支持推送通知“registerForRemoteNotificationTypes”。这意味着只有当我启用这个宏时，我的“registerForRemoteNotificationTypes”才会被执行。

我最近向 Apple Appstores 提交了我的应用程序，他们向我发送了如下警告：

“缺少推送通知权利 - 您的应用似乎注册了 Apple Push Notification 服务，但应用签名的权利不包括“aps-environment”权利。如果您的应用使用 Apple Push Notification 服务，请确保您的 App ID 是在供应门户中启用推送通知，并在使用包含“aps-environment”权利的分发供应配置文件签署您的应用程序后重新提交。

如果您想为此应用程序更新您的二进制文件，您可以从 iTunes Connect 中的二进制详细信息页面拒绝此二进制文件。请注意，拒绝您的二进制文件会将您的应用程序从审核队列中删除，并且审核过程将在您重新提交二进制文件时从头开始。”

我的问题是我没有启用这个宏“EnablePushNotification”，所以“registerForRemoteNotificationTypes”永远不会被执行。此外，我还没有为推送通知启用我的应用商店配置文件。即便如此，我也收到了这个警告。这里可能是什么问题？帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:54:27.630

我认为您还应该在 UIApplicationDelegate 方法之后放入宏

```
application:didReceiveRemoteNotification:
application:didRegisterForRemoteNotificationsWithDeviceToken:
application:didFailToRegisterForRemoteNotificationsWithError: 
```

# ios - 在表格视图中显示数组和字典值

> ID：14641103
> 
> 赞同：2
> 
> 时间：2013-02-01T06:45:05.320
> 
> 标签：ios, objective-c, nsmutablearray

我创建了一个数组、两个字典和一个表格视图。tableview 应该显示数组的内容，并且该数组包含字典的数据。当我尝试使用“[mArray addObject:(mDictionary)];”显示它时 它抛出异常但如果我使用“[mArray addObject:[mDictionary objectForKey:@"firstname"]];" 它工作正常。

你能帮我理解为什么会这样吗？如果不使用“objectForKey”就不能显示字典值吗？

这是我的“ViewController.m”。

```
#import "ViewController.h"

@implementation ViewController
- (void)viewDidLoad
{
    [super viewDidLoad];
    mArray = [[NSMutableArray alloc]init];
    mDictionary = [[NSMutableDictionary alloc]init];
    [mDictionary setValue:@"shanu" forKey:@"firstname"];
    [mDictionary setValue:@"kumar" forKey:@"lastname"];
    mDictionary2 = [[NSMutableDictionary alloc]init];
    [mDictionary2 setValue:@"hgjghjgf" forKey:@"firstname1"];
    [mDictionary2 setValue:@"ghjgjgfj" forKey:@"lastname1"];
    [mArray addObject:mDictionary];
    [mArray addObject:mDictionary2];

    CGRect frame = self.view.frame;
    UITableView *tableView = [[UITableView alloc]initWithFrame:frame style:UITableViewStylePlain];
    tableView.separatorStyle = UITableViewCellSeparatorStyleSingleLine;
    tableView.backgroundColor = [UIColor cyanColor];
    tableView.separatorColor = [UIColor blackColor];
    tableView.delegate = self;
    tableView.dataSource = self;
    [self.view addSubview:tableView];
}

- (NSString *)tableView:(UITableView *)tableView titleForHeaderInSection:(NSInteger)section
{
    return @"Array and Tableview";
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{

    return mArray.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];
    }
    cell.textLabel.text = [mArray objectAtIndex:indexPath.row];
    return cell;
}

- (void)dealloc
{
    [mArray release];
    [mDictionary release];
    [mDictionary2 release];
    [super dealloc];
}
@end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T07:03:58.830

在 .h 文件中声明一个数组：

```
NSArray *keys 
```

写在 viewDidLoad

```
keys = [mDictionary allKeys]; 
```

这在 cellForRowAtIndexPath

```
cell.textLabel.text = [mDictionary objectForKey:[keys objectAtIndex:indexPath.row]; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T06:54:14.350

如果您尝试将某些文本分配给单元格的文本标签，则返回的对象是：

```
[mArray objectAtIndex:indexPath.row]; 
```

应该是一个字符串而不是整个字典。

当您将整个字典放入数组中时，`[mArray objectAtIndex:indexPath.row];`将返回一个字典，并且您无法将字典分配给 textlabel，因此您会遇到异常。如果要存储整个字典，请使用`objectForKey`以获取所需的字符串：

```
cell.textLabel.text = [[mArray objectAtIndex:indexPath.row] objectForKey:@"WHAT_EVER_KEY_YOU_WANT"]; 
```

* * *

顺便说一句，您没有使用[ARC](https://developer.apple.com/library/ios/#releasenotes/ObjectiveC/RN-TransitioningToARC/Introduction/Introduction.html) zo，您可能希望获得一个自动发布的 UITableViewCell，因此添加`autorelease`到您的单元格：

```
cell = [[[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"] autorelease]; 
```

或者

```
cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];
[cell autorelease]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T06:54:21.567

数组包含类似类型的对象。您可以将字典对象添加到数组中。在这种情况下没有问题。问题是当您从数组中获取一个元素并分配给 cell.textLabel.text 时。这里的 object 是字典的类型，cell.textLabel.text 是 nsstring 的类型。因此，您应该将字典对象的键值分配给 cell.textLabel.text。

```
 - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"cell"];
    if (!cell) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:@"cell"];
    }
    cell.textLabel.text = [[mArray objectAtIndex:indexPath.row] objectForKey:@"firstname"];
cell.detialTextLabel.text = [[mArray objectAtIndex:indexPath.row] objectForKey:@"lastname"];
        return cell;
    } 
```

我想这会对你有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-05-04T06:18:41.480

这解决了我的问题

```
NSDictionary *cellDict = [self.tableInfoArr objectAtIndex:indexPath.row];

//This is to don't care about what is key and value in that dictionary
NSArray *keyArr = [cellDict allKeys];

//As at each index of array only one dictionary exist.
NSString *keyStr = [keyArr objectAtIndex:0];

cell.titleLabel.text =  keyStr;
cell.detailLabel.text =  [cellDict valueForKey:keyStr]; 
```

# c++ - 如何缓冲许多顶点、几何和像素着色器

> ID：14641104
> 
> 赞同：0
> 
> 时间：2013-02-01T06:45:06.163
> 
> 标签：c++, c++11, directx, shader, directx-11

将顶点着色器、像素着色器等缓冲到设备/设备上下文中而不必每次都从文件系统重新加载它们的最佳方法是什么？

ID3D11Device::CreateVertexShader [http://msdn.microsoft.com/en-us/library/windows/desktop/ff476524(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476524(v=vs.85).aspx)

ID3D11DeviceContext::VSSetShader [http://msdn.microsoft.com/en-us/library/windows/desktop/ff476493(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ff476493(v=vs.85).aspx)

Device::CreateVertexShader 是否在系统（不是 GPU）内存中缓冲着色器的单个实例？我可以缓冲超过 1 个吗？

DeviceContext::CreateVertexShader 缓冲 GPU 中着色器的单个实例，（不是系统），内存？我可以缓冲超过 1 个吗？

在系统中缓冲着色器的推荐方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T13:54:56.810

当您使用 ID3D11Device::CreateVertexShader 时，您检索对它们的引用，将在 gpu 中表示您的顶点着色器，因此如果您有 3 个顶点着色器，您可以这样做：

```
ID3D11VertexShader* vsref1;
ID3D11VertexShader* vsref2;
ID3D11VertexShader* vsref3;

CreateVertexShader(bytecode1,sizeofbytecode1,NULL,&vsref1);
CreateVertexShader(bytecode2,sizeofbytecode2,NULL,&vsref2);
CreateVertexShader(bytecode3,sizeofbytecode3,NULL,&vsref3); 
```

确保您跟踪 vsref1,2 和 3（就像作为班级成员一样）。一旦创建它们就会上传到您的 gpu，无需再次执行此操作，然后调用 VSSetShader 来选择您要使用的那个。

然后，您可以随时使用以下命令将顶点着色器分配给管道：

```
VSSetShader(vsref1,NULL,0); 
```

或者

```
VSSetShader(vsref2,NULL,0); 
```

这不会导致上传，它只是告诉你的 gpu 你想在下一次 Draw 调用中使用哪个 Vertex Shader。

# database - 如何从另一台计算机连接到 localhost

> ID：14641107
> 
> 赞同：6
> 
> 时间：2013-02-01T06:45:18.003
> 
> 标签：database, database-connection

我制作数据库程序并使用 localhost 作为主机。我想让我的朋友测试我的程序，但我不知道如何从另一台计算机连接。

PS。我使用 Windows 7 和 MySql。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T06:48:05.633

`localhost` is just an alias for the loopback address 127.0.0.1, which means *this computer.*

If you want to communicate with that computer from *somewhere else,* you'll need to use its real IP address.

For example, see the following "diagram" showing where connectons will go depending on the IP address used:

```
 `+-----------+ 10.1.1.8 +-----------+
    | MyPC      | <------- | YourPC    |
    |           |          |           |
    | 10.1.1.8  | -------> | 10.1.1.9  |
    +-----------+ 10.1.1.9 +-----------+
      |       ^              |       ^
      |       |              |       |
    127.0.0.1-+            127.0.0.1-+` 
```

`With Windows, you should be able to get your IP address with `ipconfig` (`ifconfig` under most UNIX-type systems) and just plug that into your connection parameters where you currently have `localhost`.`

 `Keep in mind that you may still need to grant power to the remote IP address to connect, such as with (assuming you're trying to connect from `10.1.1.8`):

```
GRANT ALL PRIVILEGES ON *.* TO 'mysql'@'10.1.1.8' IDENTIFIED BY 'super-sekrit' 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T06:48:41.403

Are both the computers on same network? Then just provide your LAN ip address to your friend. However if you are on internet and not behind a NAT firewall then you can provide him your public ip addres. If you are behind a NAT router then you have to setup port forwarding on your router

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T06:48:07.317

you mean connect to your program or your DB? you can replace your "localhost" with IP address to make your program accessible from another computer.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T06:49:45.443

Localhost is the standard hostname given to the address of the loopback network interface. for communication between two computers :

*   Use your systems IP address.
*   first make sure that your system can be pinged from your friends PC.
*   make sure the corresponding port that your application listens on is open.`

# php - 安装 SDO_DAS_XML 库时出错

> ID：14641109
> 
> 赞同：1
> 
> 时间：2013-02-01T06:46:01.047
> 
> 标签：php, xml, static-libraries, fedora, sdo

我一直在尝试在 PHP5 中安装 SDO_DAS_XML 库，但给我一个错误如下

命令：pecl install SCA_SDO

**错误：**

> 194 个源文件，构建运行：phpize 找不到 config.m4。确保在模块的顶级源目录中运行“/usr/bin/phpize”
> 
> 错误：“phpize”失败

操作系统：Fedora 14

注意：安装 pear 和 php-devel

# sql - 找出 2 个表中的缺失项目

> ID：14641115
> 
> 赞同：0
> 
> 时间：2013-02-01T06:47:22.620
> 
> 标签：sql, ms-access

基本上我有以下 4 个表（包括两个查找表）

我的意图是基本上首先需要通过链接键（通过 Lookup1 的 ItemID 和 TrfCode）找出 ModTab 和 MedTab 之间的匹配记录，然后在 ModTab 中缺少 MedTab 中的 OptCodes，反之亦然。

我可以一口气做到这一点吗

关键字段是具有相同名称的字段。

链接 MedTab 和 Lookup2 时需要同时使用 StateCode 和 OptCode

```
ModTab
======
Component
Item ID

MedTab
======
TrfCode
OptCode
StateCode

Lookup1
=======
Item ID
TrfCode

Lookup2
========
Component
StateCode
OptCode 
```

我该怎么做

感谢您的指导

干杯

沙巴

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:04:43.193

我认为您可以使用 a 来实现这一点`FULL JOIN`，尽管我对您的模式的确切工作方式非常模糊，但按照以下方式应该可以工作：

```
SELECT  COALESCE(ModTab.ItemID, MedTab.ItemID) AS ItemID,
        COALESCE(ModTab.TrfCode, MedTab.TrfCode) AS TrfCode,
        COALESCE(ModTab.Component, MedTab.Component) AS Component,
        COALESCE(ModTab.StateCode, MedTab.StateCode) AS StateCode,
        COALESCE(ModTab.OptCode, MedTab.OptCode) AS OptCode,
        CASE WHEN ModTab.OptCode IS NULL THEN 'MedTab Only'
            WHEN MedTab.OptCode IS NULL THEN 'ModTab Only'
            ELSE 'Both Tables'
        END AS MatchStatus
FROM    (   SELECT  l1.ItemID,
                    l1.TrfCode,
                    l2.Component,
                    l2.StateCode,
                    l2.OptCode
            FROM    ModTab m
                    INNER JOIN Lookup1 l1
                        ON l1.ItemID = m.ItemID
                    INNER JOIN Lookup2 l2
                        ON l2.Component = m.Component
        ) ModTab
        FULL JOIN
        (   SELECT  l1.ItemID,
                    l1.TrfCode,
                    l2.Component,
                    l2.StateCode,
                    l2.OptCode
            FROM    MedTab m
                    INNER JOIN Lookup1 l1
                        ON l1.TrfCode = m.TrfCode
                    INNER JOIN Lookup2 l2
                        ON l2.StateCode = m.StateCode
                        AND l2.OptCode = m.OptCode
        ) MedTab
            ON ModTab.ItemID = MedTab.ItemID
            AND ModTab.TrfCode = MedTab.TrfCode
            AND ModTab.Component = MedTab.Component
            AND ModTab.StateCode = MedTab.StateCode
            AND ModTab.OptCode = MedTab.OptCode; 
```

一些连接可能需要修改，但原则是，基本上完全连接数据集，这将返回每个记录的所有记录，其中一个为空你知道记录不在那个集合中，两个都不null 你知道记录在两者中。

**编辑**

MS-Access 不支持`FULL JOIN`多个连接，并且具有不同的 JOIN 语法，因此您必须使用 UNION 来合并记录，然后检查记录源的位置。这样的事情应该这样做：

```
SELECT  ItemID, 
        TrfCode, 
        Component, 
        StateCode, 
        OptCode,
        IIF(SUM(MedTab)=0,'ModTab',IIF(SUM(ModTab)=0,'MedTab','Both')) AS TabStatus
FROM    (   SELECT  Lookup1.ItemID, 
                    Lookup1.TrfCode, 
                    Lookup2.Component, 
                    Lookup2.StateCode, 
                    Lookup2.OptCode,
                    1 AS MedTab,
                    0 AS ModTab
            FROM    (   MedTab
                        INNER JOIN Lookup1
                            ON Lookup1.TrfCode = MedTab.TrfCode
                    )
                    INNER JOIN Lookup2
                        ON Lookup2.StateCode = MedTab.StateCode
                        AND Lookup2.OptCode = MedTab.OptCode
            UNION ALL
            SELECT  Lookup1.ItemID, 
                    Lookup1.TrfCode, 
                    Lookup2.Component, 
                    Lookup2.StateCode, 
                    Lookup2.OptCode,
                    0 AS MedTab,
                    1 AS ModTab
            FROM    (   ModTab 
                        INNER JOIN Lookup2 
                            ON ModTab.Component = Lookup2.Component
                    ) 
                    INNER JOIN Lookup1 
                        ON ModTab.ItemID = Lookup1.ItemID
        ) 
GROUP BY ItemID, TrfCode, Component, StateCode, OptCode; 
```

我还没有测试过这个，自从我在访问中进行任何查询以来已经有一段时间了，所以手指交叉它第一次工作！

# android - How to declare n number of EditTexts dynamically in android?

> ID：14641119
> 
> 赞同：1
> 
> 时间：2013-02-01T06:47:27.223
> 
> 标签：android, dynamic, android-edittext

I have an SQLite Database in my application with fieldname,fieldtype columns. fieldname consists of EditText namimg ...ex: etsearch,etsave,etcancel etc.. fieldtype is EditText.

I add fieldname values dynamically. I need to declare these EditTexts in my java class, as i'am creating my layout using java code.

I created an arraylist and added the fieldname values into it. I am confused how to declare the EditTexts using for loop.

My code :

```
public class MainActivity extends Activity 
{
LinearLayout ll;
LinearLayout llgrower;
Cursor cursor;
ArrayList<String> edittexts;

@Override
protected void onCreate(Bundle savedInstanceState) 
{

    super.onCreate(savedInstanceState);
    ll = new LinearLayout(this);
    llgrower= new LinearLayout(this);

    ll.addView(llgrower);
    this.setContentView(ll);

    cursor = DataBase.getdata("query to get fieldname,fieldtype");

    try 
    {
        if (cursor.moveToFirst())
        {
            do
            {
                edittexts.add(cursor.getString(0));

            } while (cursor.moveToNext());
        }

    } 
    catch (Exception e) {}

    for (int i=0;i<edittexts.size();i++)
    {

    } 
```

}

}

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T06:53:30.280

这是如何做到这一点的基础知识。

```
LinearLayout layout = (LinearLayout) findViewById(R.id.layout); // this is whatever view you want to add them to
EditText editText;

for(int i=0;i<nunberOfEditTexts;i++){

    editText = new EditText(this);

    ...

    // set the properties of the EditText

    ...

    // add to the view
    layout.addView(editText);

} 
```

您可能需要查看 LayoutParams 以了解如何调整 EditTexts 的大小和位置。

祝你好运

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T06:56:12.433

```
 private void addEditText(int count) {
    int id = 999;

    EditText et;        
    RelativeLayout.LayoutParams params;             

    for(int i=0; i<count; i++) {
        et= new EditText(this);
        et.setId(id);

        params = new RelativeLayout.LayoutParams(LayoutParams.MATCH_PARENT, LayoutParams.WRAP_CONTENT);
        params.setMargins(0, 10, 0, 0);
        params.addRule(RelativeLayout.CENTER_HORIZONTAL, RelativeLayout.TRUE);

        if(i > 0) {
            params.addRule(RelativeLayout.BELOW, id - i);
        }
        //ASSIGN VALUE FOR YOUR EDITTEXT FROM db HERE.
        layoutSpinnerContainer.addView(spinner, params);

        id++;
    }
} 
```

# c++ - C++ 用函数指针覆盖纯虚函数

> ID：14641121
> 
> 赞同：2
> 
> 时间：2013-02-01T06:47:57.797
> 
> 标签：c++, oop, inheritance, function-pointers, virtual-functions

如果我有一个纯虚函数，可以用函数指针覆盖它吗？下面的场景（我知道它在语法上不是 100% 正确的）：

```
#include<iostream>
using namespace std;

class A {
    public:
        virtual void foo() = 0;
};

class B : public A {
    public:
        B() { foo = &B::caseOne; }
        void caseOne() { cout << "Hello One" << endl; }
        void caseTwo() { cout << "Hello Two" << endl; }
        void (B::*foo)();
        void chooseOne() { foo = &B::caseOne; }
        void chooseTwo() { foo = &B::caseTwo; }
};

int main() {
    B b;
    b.(*foo)();
} 
```

**编辑：**如果有人感兴趣，这就是我完成我想做的事情的方式：

```
#include<iostream>
using namespace std;

class A {
    public:
        virtual void foo() = 0;
};

class B : public A {
    public:
        B() { f = &B::caseOne; }
        void caseOne() { cout << "Hello One" << endl; }
        void caseTwo() { cout << "Hello Two" << endl; }
        void (B::*f)();
        void chooseOne() { f = &B::caseOne; }
        void chooseTwo() { f = &B::caseTwo; }
        void foo() { (this->*f)(); }
};

int main() {
    B b;
    b.foo();
    b.chooseTwo();
    b.foo();
} 
```

输出是：

```
Hello One
Hello Two 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T06:52:51.253

不，你用错了。在您的代码中，您试图将成员函数指针分配给函数指针 - 它无法编译。

C++03 标准 10.3/2

> 如果**虚成员函数 vf 在类 Base**和 Derived 类中声明，直接或间接从 Base 派生，**则声明与 Base::vf 具有相同名称和相同参数列表的成员函数 vf，则 Derived::vf也是虚拟的（无论它是否如此声明）并且它覆盖 Base::vf。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T07:23:26.063

正如@ForEveR 所说，您的代码无法编译。但是，由于您真正需要的是在运行时切换`B`实现的能力`foo`，我们确实有解决方法：

```
#include <iostream>
using namespace std;

class A {
    public:
        virtual void foo() = 0;
};

class B : public A {
    private:
        void (B::*_f)();

    public:
        B() { chooseOne(); }

        void caseOne() {
            cout << "case one" << endl;
        }

        void caseTwo() {
            cout << "case two" << endl;
        }

        void chooseOne() { _f = &B::caseOne; }

        void chooseTwo() { _f = &B::caseTwo; }

        void foo() {
            (this->*_f)();
        }
};

int main(int argc, const char *argv[])
{
    A* b = new B();
    b->foo();
    ((B*)b)->chooseTwo();
    b->foo();
    return 0;
} 
```

**更新**：

刚刚发现OP在问题中添加了他的答案，这与我的几乎相同。但是我认为`foo`通过指针而不是实例对象调用更好，因为这样可以表现出多态的效果。此外，最好隐藏`f`为私有成员函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T06:52:29.223

我认为在编译时，无法编译语法。您应该提供具有特定名称和相同参数列表的覆盖函数。

# html - 在同一个表格单元格中左右对齐和垂直底部对齐

> ID：14641126
> 
> 赞同：0
> 
> 时间：2013-02-01T06:48:08.657
> 
> 标签：html, css, vertical-alignment

我需要在同一个表格单元格中对齐两个文本，一个是左对齐，另一个是右对齐。我可以通过执行以下操作来实现这一点。

```
 <td valign="bottom" style="vertical-align:bottom;">
     <div style="float:left;text-align:left;">Yes,He is.</div>
     <div style="float:right;text-align:right;"><img src="x.gif" alt="img" height="30px"/>  </div> 
</td> 
```

但问题是当我这样做时左对齐的文本上升了。该文本应与表格单元格中的底部垂直对齐。我尝试设置`"vertical-align:bottom"`为 td 单元格。但是没有用。

有人可以帮忙......这是[jsfiddle](http://jsfiddle.net/sKA8a/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:51:35.803

您可以解决它，只需在单元格中为所有文本创建一个带有不可见边框的表格。当我遇到这样的事情时，我就是这样做的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T06:54:38.537

用外部 div 包裹子 div 并给`position:relative`外部 div 和`absolute`子 div。

**HTML**

```
<td >
    <div class="wrap">
 <div class="left">Yes,He is.</div>
 <div class="right"><img src="x.gif" alt="img" height="30px"/></div>
  </div>
</td> 
```

**CSS**

```
.wrap{position:relative;overflow:auto}
.left{text-align:left; bottom:0; position:absolute; left:0}
.right{float:right;text-align:right;} 
```

[**演示**](http://jsfiddle.net/sKA8a/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:01:45.023

发生这种情况是因为图像高度为 30 像素且文本高度很小。为了与底部对齐，为父 td 分配一个相对位置，然后将文本 div 分配到 td 的左下角。

```
<td valign="bottom" style="position:relative;">
 <div style="position: absolute; bottom: 0; left: 0;;">Yes,He is.</div>
 <div style="float:right;text-align:right;"><img src="x.gif" alt="img" height="30px"/></div>
</td> 
```

[JSFIDDLE 链接](http://jsfiddle.net/sKA8a/4/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T07:07:15.667

```
<td valign="bottom" style="vertical-align:bottom;">
  <div style="float:left;text-align:left;line-height:30px;">Yes,He is.</div>
  <div style="float:right;text-align:right;"><img src="x.gif" alt="img" height="30px"/></div>
</td> 
```

# javascript - 会话 cookie 在 document.cookie 中不可用

> ID：14641131
> 
> 赞同：7
> 
> 时间：2013-02-01T06:48:26.663
> 
> 标签：javascript, session, cookies

我可以看到 cookie 正在通过 Chrome 网络检查器传输：

```
Accept:text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
Accept-Charset:ISO-8859-1,utf-8;q=0.7,*;q=0.3
Accept-Encoding:gzip,deflate,sdch
Accept-Language:en-US,en;q=0.8
Cache-Control:max-age=0
Connection:keep-alive
Cookie:rack.session=BAh7B8kiD3Nlc3Npb25faWQGOgZFRiJFMmYwOTZmZGY1NDEzNGVhYWJhYjcz%0ANmUzYmE5NzYyZmRmM2EyYjk4YWNlNzYzNjdkOGI5MDFiNTU3MDg0NWUzY0ki%0ADXRyYWNraW5nBjsARnsISSIUSFRUUF9VU0VSX0FHRU5UBjsARiItMjVhMmFj%0AZDI5zWU2NTJkY2QyMzA4MzI3NmYxNTk2YjU2ZjBkNmUwNkkiGUhUVFBfQUND%0ARVBUX0VOQ09ESU5HBjsARiItZWQyYjNjYTkwYTRlNzIzNDAyMzY3YTFkMTdj%0AOGIyODM5Mjg0MjM5OEkiGUhUVFBfQUNDRVBUX0xBTkdVQUdFBjsARiItY2M5%0AZjZmZWM2NTJhNDI1OGJjNmQyOTI4NzA1MjE3OWFiMWUwZDE0Nw%3D%3D%0A--82a2216513ed8ce3bbcd0f2fe2162e7c40847499; test=whee
Host:0.0.0.0:4567
User-Agent:Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.57 Safari/537.17 
```

但是当我将 document.cookie 转储到控制台时，我看不到它！服务文件的全部内容：

```
<script type="text/javascript">
    console.log(document.cookie)
</script> 
```

这是正常的吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-12-09T07:32:44.080

HttpOnly 是包含在 Set-Cookie HTTP 响应标头中的附加标志。在生成 cookie 时使用 HttpOnly 标志有助于降低客户端脚本访问受保护 cookie 的风险（如果浏览器支持它）。

# c++ - printing odd and even number printing alternately using threads in C++

> ID：14641134
> 
> 赞同：5
> 
> 时间：2013-02-01T06:48:36.920
> 
> 标签：c++, multithreading, thread-safety, semaphore

[Odd even number printing using thread](https://stackoverflow.com/questions/6017281/odd-even-number-printing-using-thread) I came across this question and wanted to discuss solution in C++ . What I can think of using 2 binary semaphores odd and even semaphore. even semaphore initialized to 1 and odd initialized to 0\.

```
**T1 thread function** 
funOdd()
{  
  wait(even)  
  print odd;  
  signal(odd)  
}

**T2 thread function**
funEven()  
{  
  wait(odd)  
  print even  
  signal(even)  
} 
```

In addition to this if my functions are generating only number and there is a third thread T3 which is going to print those numbers then what should be ideal design ? I used an array where odd number will be placed at odd place and even number will be place at even position. T3 will read from this array this will avoid any thread saftey over this array and if T3 does not find any index then it will wait till that index gets populated. Another solution can be to use a queue which will have a mutex which can be used by T1 and T2 while insertion.

Please comment on this solution and how can i make it more efficient.

**Edit to make problem much clear**: Overall problem is that I have two producers (T1,T2) and a single consumer (T3), and my producers are interdependent.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2018-06-12T08:55:47.573

**使用条件变量**

```
#include <iostream>
#include <thread>
#include <mutex>
#include <condition_variable>

std::mutex mu;
std::condition_variable cond;
int count = 1;

void PrintOdd()
{
    for(; count < 100;)
    {
        std::unique_lock<std::mutex> locker(mu);
        cond.wait(locker,[](){ return (count%2 == 1); });
        std::cout << "From Odd:    " << count << std::endl;
        count++;
        locker.unlock();
        cond.notify_all();
    }

}

void PrintEven()
{
    for(; count < 100;)
    {
        std::unique_lock<std::mutex> locker(mu);
        cond.wait(locker,[](){ return (count%2 == 0); });
        std::cout << "From Even: " << count << std::endl;
        count++;
        locker.unlock();
        cond.notify_all();
    }
}

int main()
{
    std::thread t1(PrintOdd);
    std::thread t2(PrintEven);
    t1.join();
    t2.join();
    return 0;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2019-12-04T11:59:41.173

使用条件变量的解决方案。

```
#include<iostream>
#include<thread>
#include<mutex>
using namespace std;
mutex oddevenMu;
condition_variable condVar;
int number = 1;

void printEvenOdd(bool isEven, int maxnubmer)
{
    unique_lock<mutex> ul(oddevenMu);
    while (number < maxnubmer)
    {
        condVar.wait(ul, [&]() {return number % 2 == isEven;});
        cout << number++ << " ";
        condVar.notify_all();
    }

}

int main(string args[])
{
    thread oddThread(printEvenOdd, false, 100);
    thread evenThread(printEvenOdd, true, 100);
    oddThread.join();
    evenThread.join();
    return 0;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-18T16:50:08.163

```
 #include  <stdio.h>
 #include  <stdlib.h>
 #include  <iostream>
 #include  <pthread.h>
 #include  <semaphore.h>

  sem_t sem;
  sem_t sem2;
  using namespace std ;

int count = 1;

void increment(int x)
{
    cout << "called by thread : " << x << "count is : " << count ++ << "\n";
}

void *printAltmessage1(void *thread_value)
{
    for(int m=0; m < (*(int *)thread_value); m++)
    {
        if (sem_wait(&sem) == 0)
        {
            cout << " Thread printAltmessage1 is executed" <<"\n";  
            increment(1);
            sem_post(&sem2);
        }
    }
}

void *printAltmessage2(void *thread_value)
{
    for(int m=0; m < (*(int *)thread_value); m++)
    {
        if (sem_wait(&sem2) == 0)
        {
            cout << " Thread printAltmessage2 is executed" <<"\n";
            increment(2);  
            sem_post(&sem);
        }
    }
}

int main()
{
     sem_init(&sem,0, 1);
     sem_init(&sem2,0, 0);
     pthread_t threads[2];
     int x =8;
     for(int i=0;i<2;i++)
     {
          if(i==0)
          int rc =pthread_create(&threads[i],NULL,printAltmessage1,(void*)&x);
          else
          int rc =pthread_create(&threads[i],NULL,printAltmessage2,(void*)&x);
      }
      pthread_exit(NULL);
      return 0;
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-10-21T17:16:20.807

这是使用单一功能的简单解决方案。

```
#include <iostream>
#include <thread>
#include <condition_variable>
using namespace std;

mutex mu;
condition_variable cond;
int count = 1;

void PrintOddAndEven(bool even, int n){
    while(count < n){
        unique_lock<mutex> lk(mu);
        cond.wait(lk, [&](){return count%2 == even;});
        cout << count++ << " ";
        lk.unlock();
        cond.notify_all();
    }
}

int main() {
    int n = 10;
    thread t1(PrintOddAndEven, true, n);
    thread t2(PrintOddAndEven, false, n);

    t1.join();
    t2.join();
    return 0;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-05-27T07:21:56.367

```
 #include <iostream>
    #include <thread>
    #include <mutex> 
    using namespace std;

    std::mutex m;
    int count = 0;

    void printEven()
    {
        cout << "Entered Even\n" << endl;
        while(count <= 10)
        {
            m.lock();
            if(count%2 == 0)
                cout << count++ << " ";
             m.unlock();
        }
    }

    void printOdd()
    {
        cout << "Entered Odd" << endl;
        while(count < 10)
        {
             m.lock();
            if(count%2 == 1)
                cout << count++ << " ";
             m.unlock();
        }
    }

    int main()
    {
       std::thread t1(printOdd);
       std::thread t2(printEven);
       t1.join();
       t2.join();
        return 0;
    } 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-10-20T14:46:52.413

这是您可以参考的最简单的解决方案：

```
#include<iostream>
#include<mutex>
#include<pthread.h>
#include<cstdlib>
int count=0;
using namespace std;
mutex m;
void* printEven(void *a)
{
   while(1)
   {
       m.lock();
       if(count%2==0)
       {
          cout<<" I am Even"<<count<<endl;
          count++;
       }
       if(count==100)
           break;
       m.unlock();
   }
}
void* printOdd(void *b)
{
    while(1)
    {
       m.lock();
       if(count%2!=0)
       {
           cout<<"I am odd"<<count<<endl;
           count++;
       }
       if(count>100)
          break;
       m.unlock();
    }
 }
 int main()
 {
     int *ptr = new int();
     pthread_t thread1, thread2;
     pthread_attr_t attr;
     pthread_attr_init(&attr);
     pthread_create(&thread1,&attr,&printEven,NULL);
     pthread_create(&thread2,&attr,&printOdd, NULL);
     pthread_join(thread1,&ptr);
     pthread_join(thread2,&ptr);
     delete ptr;
 } 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-01T07:43:59.373

首先，这两个函数应该至少包含一个循环，（除非你只想要一个数字）

一个更标准的解决方案（重新映射您的想法）是拥有一个包含互斥体的全局结构，以及两个条件变量（奇数和偶数）加上一个返回值，以及另一个打印条件。而不是使用 uique_lock 来处理同步。

在伪代码中：

```
struct global_t
{
    mutex mtx;
    int value = {0};
    condition_variable be_odd, be_even, print_it;
    bool bye = {false};

    global_t() { be_odd.notify(); }
} global;

void odd_generator()
{
    int my_odd = 1;
    for(;;)
    {
        unique_lock lock(global.mtx);
        if(global.bye) return;
        global.be_odd.wait(lock);
        global_value = my_odd; my_odd+=2;
        global.print_it.notify();
        if(my_odd > 100) bye=true;
    } //let RAII to manage wait states and unlocking
};

void even_generator()
{ /* same as odd, with inverted roles */ }

void printer()
{
    for(;;)
    {
        unique_lock lock(global.mtx);
        if(bye) return;
        global.ptint_it.wait(lock);
        std::cout << global.value << std::endl;
        ((global.value & 1)? global.be_even: global.be_odd).notify();
    }
}

int main()
{
    thread oddt(odd_generator), event(even_generator), printt(printer);
    oddt.join(), event.join(), printer.join();
} 
```

请注意，除了教学目的之外，此解决方案对于打印计数器值的简单循环没有增加任何价值，因为永远不会有真正的并发性。

还要注意（为了避免全局变量），您可以将所有内容包装到一个类中（使实际的 main 成为类方法）并在新 main 内的堆栈上实例化该类。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-02-01T07:32:05.573

我不明白为什么要使用三个单独的线程来进行串行行为。但无论如何我都会回答:)

一种解决方案是使用修改后的生产者/消费者模式，在生产者和消费者之间设置[优先队列。](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/PriorityBlockingQueue.html)队列上的排序操作将取决于发布消息的整数值。消费者会查看队列中的一个元素并检查它是否是下一个预期元素。如果没有，它会休眠/等待。

一点代码：

```
class Elt implements Comparable<Elt> {
  int value;
  Elt(value) { this.value=value; }
  int compare(Elt elt);
}

class EltQueue extends PriorityBlockingQueue<Elt> { // you shouldn't inherit colelctions, has-a is better, but to make it short
  static EltQueue getInstance(); // singleton pattern
}

class Consumer{
  Elt prevElt = new Elt(-1);
  void work()
  {
    Elt elt = EltQueue.getInstance().peek();
    if (elt.getValue() == prevElt.getValue()+1)) {
      EltQueue.getInstance().poll();
      //do work on Elt
    }
  }
}

class Producer {
  int n=0; // or 1!
  void work() {
    EltQueue.getInstance().put(new Elt(n+=2));
  }
} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-05-15T19:25:13.150

解决方案基于 C++11 关键代码部分（又名[mutex](http://www.cplusplus.com/reference/mutex/)）。

这是工作代码，然后是解释。

## 在 VS2013 上测试和工作：

```
using namespace std;
#include <iostream>
#include <string>
#include <thread>
#include <mutex>

std::mutex mtx;

void oddAndEven(int n, int end);

int main()
{
std::thread odd(oddAndEven, 1, 10);
std::thread Even(oddAndEven, 2, 10);

odd.join();
Even.join();

return 0;
}

void oddAndEven(int n, int end){
int x = n;
for (; x < end;){
    mtx.lock();
    std::cout << n << " - " << x << endl;
    x += 2;
    mtx.unlock();
    std::this_thread::yield();
    continue;
 }
} 
```

## IE：

线程*奇数*转到方法oddAndEven，起始编号为1，因此他是奇数。他是第一个获得锁的人`mtx.lock()`。

同时，线程*Even 也*尝试获取锁，但线程*奇数*首先获得了它，因此线程*Even*等待。

回到线程*奇数*（有锁），他打印数字 1 并用 释放锁`mtx.unlock()`。此时，我们希望线程*Even*获取锁并打印 2，因此我们通过写入来通知线程*Even*`std::this_thread::yield()`。然后线程*Even*做同样的事情。

等等等等等等

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-11-17T13:57:57.873

```
#include <bits/stdc++.h>
#include <stdlib.h>
#include <unistd.h>
#include <thread>
#include <mutex>
#include <condition_variable>
using namespace std;

mutex m;
condition_variable cv;
unique_lock<mutex> lck(m);

void *printeven(void *arg)
{
    int *n = (int *)arg;
    while (*n <= 100)
    {
        cv.wait(lck);
        *n = *((int *)arg);
        cout << this_thread::get_id() << " : " << *n << endl;
        *n = *n + 1;
        cv.notify_one();
    }
    exit(0);
}

void *printodd(void *arg)
{
    int *n = (int *)arg;
    while (*n <= 100)
    {
        *n = *((int *)arg);
        cout << this_thread::get_id() << " : " << *n << endl;
        *n = *n + 1;
        cv.notify_one();
        cv.wait(lck);
    }
    exit(0);
}

int main()
{
    int num = 1;
    pthread_t p1 = 1;
    pthread_t p2 = 2;

    pthread_create(&p1, NULL, printodd, &num);
    pthread_create(&p2, NULL, printeven, &num);

    pthread_join(p1, NULL);
    pthread_join(p2, NULL);
    return 0;
} 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-07-14T15:44:03.283

```
#include <iostream>
#include <thread>
#include <mutex>
#include <condition_variable>
using namespace std;
std::mutex m;
std::condition_variable cv;
int counter =1;

void printEven()
{
    std::unique_lock<std::mutex> lk(m);
    while(1)
    {
        if(counter > 10)
            break;
        if(counter %2 != 0)
        {
            cv.wait (lk);
        }
        else
        {
            cout << "counter : " << counter << endl;
            counter++;
            //lk.unlock();
            cv.notify_one();
        }

    }
}

void printOdd()
{
    std::unique_lock<std::mutex> lk(m);

    while(1)
    {
        if(counter > 9)
        break;
        if(counter %2 == 0)
        {
            cv.wait (lk);
        }
        else
        {
            cout << "counter : " << counter << endl;
            counter++;
            //lk.unlock();
            cv.notify_one();
        }

    }
}

int main()
{
    std::thread t1(printEven);
    std::thread t2(printOdd);
    t1.join();
    t2.join();
    cout << "Main Ends" << endl;
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2019-09-07T19:01:55.433

```
#include <iostream>
#include <thread>
#include <mutex>

std::mutex mu;
unsigned int change = 0;

void printConsecutiveNumbers(int start, int end,unsigned int consecutive)
{
    int x = start;
    while (x < end)
    {
        //each thread has check there time is coming or not
        if (change % consecutive == start)
        {
            std::unique_lock<std::mutex> locker(mu);
            std::cout << "Thread " << start << " -> " << x << std::endl;
            x += consecutive;
            change++;
            //to counter overflow
            change %= consecutive;
        }
    }
}

int main()
{
    //change num = 2 for printing odd and even
    const int num = 7;
    const int endValue = 1000;
    std::thread threads[num];
    //Create each consecutive threads
    for (int i = 0; i < num; i++)
    {
        threads[i] = std::thread(printConsecutiveNumbers, i, endValue, num);
    }

    //Joins all thread to the main thread
    for (int i = 0; i < num; i++)
    {
        threads[i].join();
    }

    return 0;
} 
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2021-08-27T16:13:16.953

我已经使用匿名 func (lambda) 来执行此操作，并使用了 cond 变量和互斥锁。

```
#include <iostream>
#include <thread>
#include <condition_variable>
#include <mutex>
#include <chrono>

using namespace std; 

int main() {
    int count = 1;
    mutex mtx;
    condition_variable condition;
    const int ITERATIONS = 20; // iterations

    //prints odd numbers
    thread t1([&]() {
        while (count < ITERATIONS)
        {
            unique_lock <mutex> lock(mtx);
            condition.wait(lock, [&]() {
                return count % 2 != 0;
                });

            cout << "thread1 prints: " << count << endl;
            count++;
            lock.unlock();
            condition.notify_all();
        }
    });

    thread t2([&]
        {
            while (count < ITERATIONS)
            {
                unique_lock <mutex> lock(mtx);
                condition.wait(lock, [&]() {
                    return count % 2 == 0;
                    });
                cout << "thread2 prints: " << count << endl;
                count++;
                lock.unlock();
                condition.notify_all();
            }
        });

    t1.join();
    t2.join();
 } 
```

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2021-11-24T08:33:11.913

```
#include <iostream>
#include <thread>
#include <mutex>
#include <condition_variable>

std::mutex mtx;
std::condition_variable even_to_odd;
std::condition_variable odd_to_even;
unsigned int count = 1;
constexpr int MAX_COUNT = 20;

void even(int n) {
    for (int i = n; i <= MAX_COUNT; i++) {
        std::unique_lock<std::mutex> lock(mtx);
        if (i %2 == 0) {
            odd_to_even.wait(lock);
            std::cout << "Even: " << i << std::endl;
            even_to_odd.notify_one();
        }
    }
}

void odd(int n) {
    for (int i = n; i <= MAX_COUNT; i++) {
        std::unique_lock<std::mutex> lock(mtx);
        if (i == 1) {
            std::cout << "Odd : " << i << std::endl;
            odd_to_even.notify_one();
        }
        else if (i % 2 != 0) {
            even_to_odd.wait(lock);
            std::cout << "Odd : " << i << std::endl;
            odd_to_even.notify_one();
        }
    }
}

int main() {
    std::thread thread1(even,count);
    std::thread thread2(odd,count);

    thread1.join();
    thread2.join();
    return 0;
} 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2021-11-13T12:39:32.410

```
#include "threadFunc.hpp"
#include <iostream>
#include <thread>
#include <mutex>
#include <condition_variable>

using namespace std;

mutex t1;
condition_variable cond;

int number = 11;
int count = 0;

void printEven()
{
    while(1)
    {
        unique_lock<mutex> ul(t1);
        if(count< number)
        {
            if(count % 2 != 0)
            {
                cond.wait(ul);
            }

            cout<<count<<" : printed by thread"<<this_thread::get_id()<<endl;
            count++;
        }
        if(count > number)
            break;

        ul.unlock();
        cond.notify_all();
    }

}

void printOdd()
{
    while(1)
    {
        unique_lock<mutex> ul(t1);
        if(count< number)
        {
            if(count % 2 == 0)
            {
                cond.wait(ul);
            }

            cout<<count<<" : printed by thread"<<this_thread::get_id()<<endl;
            count++;
        }
        if(count > number)
            break;

        ul.unlock();
        cond.notify_all();
    }

} 
```

* * *

## 回答 #16

> 赞同：0
> 
> 时间：2021-06-22T15:42:46.423

此代码将起作用。我已经在 Visual Studio 2017 上对其进行了测试

```
#include "stdafx.h"
#include <iostream>
#include <mutex>
#include <thread>
#include <condition_variable>
using namespace std;
mutex m;
condition_variable cv;
int num = 1;

void oddThread() {​​​​​​​

    for (; num < 10;) {​​​​​​​
        unique_lock<mutex> lg(m);
        cv.wait(lg, [] {​​​​​​​return (num % 2 ==1); }​​​​​​​);
        cout << "From odd Thread " << num << endl;
        num++;
        lg.unlock();
        cv.notify_one();
    }​​​​​​​
}​​​​​​​
void evenThread() {​​​​​​​
    for (; num < 100;) {​​​​​​​
        unique_lock<mutex> lg(m);
        cv.wait(lg, [] {​​​​​​​return (num % 2 == 0); }​​​​​​​);
        cout << "From even Thread " << num << endl;
        num++;
        lg.unlock();
        cv.notify_one();
    }​​​​​​​
}​​​​​​​

int main() {​​​​​​​

    thread t1{​​​​​​​ oddThread}​​​​​​​; //odd function thread
    thread t2{​​​​​​​ evenThread}​​​​​​​;
    t1.join();
    t2.join();
    cin.get();
    return 0;
}​​​​​​​ 
```

## 输出

从奇数线程：1 从偶数线程：2 从奇数线程：3 从偶数线程：4 从奇数线程：5 从偶数线程：6 从奇数线程：7 从偶数线程：8 从奇数线程：9 从偶数线程：10

* * *

## 回答 #17

> 赞同：-2
> 
> 时间：2013-04-29T06:10:42.820

请参阅下面的工作代码（VS2005）

```
#include <windows.h>
#include <stdlib.h>

#include <iostream>
#include <process.h>

#define MAX 100
int shared_value = 0;

CRITICAL_SECTION cs;

unsigned _stdcall even_thread_cs(void *p)
{

    for( int i = 0 ; i < MAX ; i++ )
    {
        EnterCriticalSection(&cs);

        if( shared_value % 2 == 0 )
        {
            printf("\n%d", i);
        }

        LeaveCriticalSection(&cs);

    }
    return 0;
}

unsigned _stdcall odd_thread_cs(void *p)
{
    for( int i = 0 ; i < MAX ; i++ )
    {
        EnterCriticalSection(&cs);

        if( shared_value % 2 != 0 )
        {
            printf("\n%d", i);
        }

        LeaveCriticalSection(&cs);  

    }

    return 0;
}

int main(int argc, char* argv[])
{
     InitializeCriticalSection(&cs);

    _beginthreadex(NULL, NULL, even_thread_cs, 0,0, 0);
    _beginthreadex(NULL, NULL, odd_thread_cs, 0,0, 0);

    getchar();
    return 0;
} 
```

在这里，使用共享变量`shared_value`，我们正在同步`even_thread_cs`和`odd_thread_cs`。请注意，不使用睡眠。

# ember.js - Observing a property of a child view

> ID：14641141
> 
> 赞同：0
> 
> 时间：2013-02-01T06:49:27.310
> 
> 标签：ember.js

I am trying to work out the best method of observing a property on another view instance within Ember. Currently I have the following code that does not seem to be working correctly. Looking at documentation I can't seem to find anything on whether or not observers will only work for self.

```
App = Ember.Application.create();

App.ApplicationView = Ember.View.extend({
  myProperty: false,
  observerFiredCount: 0,

  testObserver: function() {
    var count = this.get('observerFiredCount');
    this.set('observerFiredCount', count + 1);
  }.observes('myProperty'),

  buttonClick: function(event) {
    if(this.get('myProperty')) {
      this.set('myProperty', false);
    } else {
      this.set('myProperty', true);
    }
  },

  willInsertElement: function() {
    var button = this.$('a');
    button.click($.proxy(this.buttonClick, this));
  }
});

App.TestObserverView = Ember.View.extend({
  testObserverAcrossViews: function() {
    console.log('hello world');
  }.observes('App.ApplicationView.myProperty')
}); 
```

I guess theres 2 questions that would be helpful here.

**1\. Is it possible to observe a property on another object instance.**

**2\. What path do I use to access a childview instance?**

Any feedback would be greatly appreciated. I feel as though there could be a cleaner way to do this :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:46:09.487

你所有问题的答案是你从错误的角度处理问题。视图被破坏。他们是短暂的。它们不存在于全球范围内。你需要一个控制器。控制器的寿命很长，并且注定要受到约束。与其尝试观察视图，不如观察控制器。

因此，当视图上发生单击事件时，请在控制器上设置一个属性。应用程序的其他部分可以绑定到控制器上的该属性。

# asp.net - 重定向到带有 endResponse 到 true VS CompleteRequest 和安全线程的页面

> ID：14641143
> 
> 赞同：6
> 
> 时间：2013-02-01T06:49:36.347
> 
> 标签：asp.net, security, redirect

基于[这个问题和那里的答案](https://stackoverflow.com/questions/14640253/thread-was-being-aborted-when-we-use)，我想问什么是正确的重定向方式。

使用[Redirect(url, endResponse)](http://msdn.microsoft.com/en-us/library/a8wa7sdt.aspx)的默认方法是 throw`ThreadAbortException`调用方法`endResponse=true`，`End()`因此，如果您在 try/catch 块中使用它，则会在[此处显示此异常](http://support.microsoft.com/kb/312629)并且可以假定为错误，但实际上用户试图通过停止页面处理的其余部分来重定向到页面。

其他可能的方法是通过使用以下方式调用`Redirect(url, endResponse)`，`endResponse=false`您`HttpContext.Current.ApplicationInstance.CompleteRequest();`不会得到任何异常。

所以问题是什么更好用以及为什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T06:49:36.347

您必须始终调用重定向，`endRespose=true`否则任何黑客都可以通过简单地按住重定向来查看页面上的内容。

为了证明我使用 Firefox 的[NoRedirect](https://addons.mozilla.org/en-us/firefox/addon/noredirect/)插件来保存重定向。然后我测试了这两种情况，结果如下：

我有一个简单的页面，里面有那个文本

```
<form id="form1" runat="server">
<div>
I am making a redirect - you must NOT see this text.
</div>
</form> 
```

然后在页面加载时尝试使用两种情况进行重定向：

第一种情况，使用 Complete Request();

```
 try
    {
        // redirect with false that did not throw exception
        Response.Redirect("SecondEndPage.aspx", false);
        // complete the Request
        HttpContext.Current.ApplicationInstance.CompleteRequest();
    }
    catch (Exception x)
    {

    } 
```

还有繁荣，你可以看到页面里面的内容！ ![](../Images/a67ab98d9c64a110e8cc27d345356a8d.png)

第二种情况

```
try
{
    // this is throw the ThreadAbortException exception
    Response.Redirect("SecondEndPage.aspx", true);
}
catch (ThreadAbortException)
{
    // ignore it because we know that come from the redirect
}
catch (Exception x)
{

} 
```

现在什么都没有显示。 ![](../Images/2c03324193a8aed061f982a58dc00cd1.png)

因此，如果您不希望黑客看到您页面上的内容，**您必须调用它并使用 endResponse 为 true**并停止其他处理 - 例如从函数返回而不继续。

例如，如果您检查用户是否经过身份验证，他可以看到该页面，或者如果没有，他必须重定向到登录，甚至在登录时，如果您尝试使用 endResponse 将他重定向为 false，那么保持重定向黑客可以看到 - 什么你相信不能因为你使用了Redirect。

**我的基本观点**是显示如果您不停地将数据发送回浏览器，则存在的安全线程。重定向是浏览器的标题和指令，但在您需要停止发送任何其他数据的同时，您必须停止发送页面的任何其他部分。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T07:00:22.813

无需调用for即可`Response.Redirect`解决重定向调用后输出页面内容的安全问题。您可以通过另一种方式完成此操作，并避免同时导致 ThreadAbortException （[这总是不好的](https://stackoverflow.com/questions/1087777/is-response-end-considered-harmful/3917180#3917180)）。下面是我使用 5 个按钮创建的页面片段，这些按钮以不同的方式导致重定向，该按钮是理想的，因为它会触发 Render 方法不执行任何操作。这已使用 NoRedirect 加载项进行了测试。只有两种情况避免输出除 302 对象移动响应之外的任何内容 -和.`true``endResponse``RedirectRenderOverride``RedirectEnd``RedirectRenderOverride`

**代码在前面**

```
<asp:Button ID="Button1" runat="server" OnClick="RedirectCompleteRequest" Text="RedirectCompleteRequest"/>
<asp:Button ID="Button2" runat="server" OnClick="RedirectClear" Text="RedirectClear"/>
<asp:Button ID="Button3" runat="server" OnClick="RedirectRenderOverride" Text="RedirectRenderOverride"/>
<asp:Button ID="Button4" runat="server" OnClick="RedirectEnd" Text="RedirectEnd"/>
<asp:Button ID="Button5" runat="server" OnClick="RedirectEndInTryCatch" Text="RedirectEndInTryCatch"/> 
```

**代码背后**

```
public partial class _Default : Page {
    private bool _isTerminating;

    protected void RedirectEnd(object sender, EventArgs e) { Response.Redirect("Redirected.aspx"); }

    protected void RedirectCompleteRequest(object sender, EventArgs e)
    {
        Response.Redirect("Redirected.aspx", false);
        HttpContext.Current.ApplicationInstance.CompleteRequest();
    }

    protected void RedirectClear(object sender, EventArgs e)
    {
        Response.Clear();
        Response.Redirect("Redirected.aspx", false);
    }

    protected void RedirectRenderOverride(object sender, EventArgs e)
    {
        Response.Redirect("Redirected.aspx", false);
        _isTerminating = true;
    }

    protected void RedirectEndInTryCatch(object sender, EventArgs e)
    {
        try {
            Response.Redirect("Redirected.aspx");
        } catch (ThreadAbortException) {
            // eat it
        } finally {
            Response.Write("Still doing stuff!");
        }
    }

    protected override void RaisePostBackEvent(IPostBackEventHandler sourceControl, string eventArgument)
    {
        if (!_isTerminating) {
            base.RaisePostBackEvent(sourceControl, eventArgument);
        }
    }

    protected override void Render(HtmlTextWriter writer)
    {
        if (!_isTerminating) {
            base.Render(writer);
        }
    }
} 
```

`Response.End`内部调用`Thread.CurrentThread.Abort`，[根据 Eric Lippert](https://stackoverflow.com/questions/1559255/whats-wrong-with-using-thread-abort/1560567#1560567)的说法，调用`Thread.Abort`“充其量是糟糕设计的表现，可能不可靠，而且极其危险。”

# amazon-rds - 需要检查 RDS 磁盘空间利用率

> ID：14641152
> 
> 赞同：1
> 
> 时间：2013-02-01T06:50:12.137
> 
> 标签：amazon-rds

最近我们在 RDS 上遇到了问题，因为我们分配的磁盘空间在 Amazon RDS 上已经耗尽。

那么是否有任何可用的工具/插件（nagios 插件）或任何其他实用程序可以用来监控 RDS 磁盘利用率？

PS：我们知道 cloudwatch 可以做到这一点，但我们也在寻找其他替代方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T10:28:03.350

我们使用这个 check_cloudwatch 插件来获取任何 cloudwatch 指标，因此它可以使用 PNP4Nagios 和 Graphite 在我们的私有云中绘制，效果很好。

[github 上的 check_cloudwatch](https://github.com/j3tm0t0/check_cloudwatch)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-07-21T12:49:01.960

我使用 aws cloud watch 来监控我的 rds 实例的可用空间和 cpu 利用率。您可以根据可用空间 < 25 GB 时的阈值设置电子邮件警报。像自由空间一样，您可以监控各种事情，例如 R/W 延迟、数据库连接等。您可以在此处找到设置云手表的步骤（通过 UI 和 cli）。
[aws 云手表设置](http://docs.aws.amazon.com/AmazonCloudWatch/latest/DeveloperGuide/US_AlarmAtThresholdEC2.html)

# javascript - 将文本区域中的数据发布到同一页面中的 DIV 标记

> ID：14641156
> 
> 赞同：0
> 
> 时间：2013-02-01T06:50:24.537
> 
> 标签：javascript, jquery, html, ajax

您好我试图将数据从我的文本区域发布到 DIV 标签。但它不起作用。请帮帮我。以下是我的代码

```
<html>

<head>

<script>

function load()
{
var a=document.getElementById('txtarea').value;
var xmlhttp;
if (window.XMLHttpRequest)
  {
    xmlhttp=new XMLHttpRequest();
  }
else
  {
     xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
    xmlhttp.onreadystatechange=function()
    {
      if (xmlhttp.readyState==4 && xmlhttp.status==200)
        {
            document.getElementById("myDiv").innerHTML=xmlhttp.responseText;
        }
    }
xmlhttp.open("POST","one.php"+a,true);
xmlhttp.send(); 
}
</script>
</head>
<body onload="load()">
<textarea id='txtarea'>
    default
</textarea>
<div name="myDiv" id="myDiv">
    In Div Tag
</div>
</body>
</html> 
```

一个.php

```
<?php
echo "Hello World";
?> 
```

在上面的 html 文件中，我试图获取 one.php 的值以及 textarea 中的文本。但我无法获取文本区域中的值。xmlhttp.open("POST","one.php"+a,true); 在这里我正在做 +a 来附加 textarea 的值，但它没有被附加，请帮助一些解决方案

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:57:00.803

URL 构造不正确。

```
xmlhttp.open("GET",""one.php?YourQueryString="+a,true);
xmlhttp.send(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T06:53:30.343

虽然你的查询没有多大意义，但是在 xmlhttp.open() 中，你需要一个合适的 url 来发送请求。您可以将 textarea 值添加为查询参数，然后尝试：

```
xmlhttp.open("POST","one.php?val="+a,true); 
```

但我认为您的 AJAX 语法不正确

# c - How can I evaluate if my input argument has all even bits set to 1?

> ID：14641161
> 
> 赞同：0
> 
> 时间：2013-02-01T06:50:56.850
> 
> 标签：c, logic, bit-manipulation

I'm trying to do bit logic manipulation in C but getting stuck. I need to write a function that, given an input argument it will evaluate if my argument has all even bits set to 1\. For example:

```
myFunction (0xFFFFFFFE) = 0;
myFunction (0x55555555) = 1; 
```

The operators that I'm permitted to use are: `!` `~` `&` `^` `|` `+` `<<` `>>`. I can't use `if` statements, loops, or equality checks (so no `==` or `!=` operators).

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T06:56:18.020

您需要使用掩码测试该值，并且对如何在不使用 的情况下测试相等性有点迂回`==`，例如：

```
return !((n & 0x55555555) ^ 0x55555555); 
```

注意：这假定为 32 位值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T07:01:33.483

由于不允许使用“==”，因此必须使用其他技巧：

```
 (~number & 0x55555555) will be zero only when number&mask == mask.
 (~number & 0x55555555)==0 OTOH codes as 

 return !(~number & 0x55555555); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:40:50.497

这就是你如何使用 C 编程来解决它，而不会对你自己施加任何奇怪的人为限制：

```
// Get a platform-independent mask of all even bits in an int set to one:
#define MASK ( (unsigned int) 0x55555555u )

// MASK will be 0x5555u or 0x55555555u depending on sizeof(int). 
```

然后是实际的算法：

```
if((x & MASK) == MASK) 
```

# android - 删除一行后如何重置表的键ID编号，SQLite数据库Android

> ID：14641162
> 
> 赞同：1
> 
> 时间：2013-02-01T06:50:59.023
> 
> 标签：android, sqlite

如果我有一个 SQLite 表，我在其中删除了一行，它会删除该行，但编号已关闭。例如，删除第 4 行

```
 id   name
 1     A
 2     B
 3     C
 5     E
 6     F 
```

如何重置编号，以便密钥自动递增的密钥 ID 是连续的，而没有上表中缺少的 4？

一种想法是删除所有关键行 id 并将它们重新插入到 for 循环中。不知道我是否应该尝试，因为它是自动递增的。另一种可能性是使其不自动递增，并在表被装箱时使用循环将数字放入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T06:55:20.663

你已经回答了你自己的问题：这是一个`AUTOINCREMENT`领域，所以你不能那样做。此外，无论如何，这不是应该在 SQL 中使用 id 的方式。它们将唯一标识一行，如果您更改 id，那么您将破坏它，以及可能对该 id 的任何引用。

# shell - Invoking the preprocessor from a shell or shell-like program

> ID：14641164
> 
> 赞同：1
> 
> 时间：2013-02-01T06:51:01.503
> 
> 标签：shell, command, preprocessor, patch

As mentioned in the title I want to invoke the preprocessor from a shell.

Let me clarify: Suppose I have to invoke Preprocessor for command **patch** in Linux say:

```
patch -p1 -D `"{what and how should i write here }"` < patch.patch 
```

Patch command has an option `-D` where I can define a preprocessor (to my understanding). I tried searching on Google I got only one [link](http://gcc.gnu.org/onlinedocs/gcc-3.3.6/gcc/Preprocessor-Options.html) I couldn't understand it properly. Please guide me with an example (or proper reference).

1.  What all can be written in -D option of any command?
2.  Are constructs same for all command are different for different commands?
3.  What can be the input variables?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:37:51.367

`-D`选项意味着对修补文件所做的`patch`更改将被`#ifndef X`/ `#else`/`#endif`如果`X`是您指定为`-D`选项的参数的内容。

例如：

```
$ cat file-1.c
#include <stdio.h>

int main(void)
{
    printf("Hello world\n");
    return 0;
}
$ cat file-2.c
#include <stdio.h>

int main(void)
{
    puts("Hello world");
    return 0;
}
$ diff -u file-1.c file-2.c > patch
$ patch -DPRINTF_TO_PUTS -i patch --verbose
Hmm...  Looks like a unified diff to me...
The text leading up to this was:
--------------------------
|--- file-1.c   2013-02-01 00:33:01.000000000 -0800
|+++ file-2.c   2013-02-01 00:33:17.000000000 -0800
--------------------------
Patching file file-1.c using Plan A...
Hunk #1 succeeded at 2.
done
$ file-1.c
#include <stdio.h>

int main(void)
{
#ifndef PRINTF_TO_PUTS
    printf("Hello world\n");
#else
    puts("Hello world");
#endif
    return 0;
}
$ 
```

所以，回答你的问题：

1.  您应该`-D`在`patch`命令行后面加上一个有效的 C 标识符。
2.  不同的命令对任何给定的选项字母应用不同的含义。[您可以在The Art of Unix Programming](http://catb.org/~esr/writings/taoup/html/ch10s05.html)中找到有关选项常见解释的信息，但只有 52 个字母（单字母）选项，并且不同命令的参数有更多不同的含义。
3.  我不确定你的意思。

这些都不会从命令行调用 C 预处理器。`cpp`如果您需要这样做，请在您的系统上查找程序。如果你在任何地方都找不到`cpp`，你可能最终会调用`gcc -E`。

# wordpress - 扩展一个简单的自定义 wordpress 简码

> ID：14641167
> 
> 赞同：0
> 
> 时间：2013-02-01T06:51:04.823
> 
> 标签：wordpress, shortcode

我目前有一个非常基本的短代码工作，但想对其进行扩展以便能够为其添加参数，例如`[fanColours number=3]`. 基本上，该参数将决定帖子中将显示多少个图像链接。

```
function fanColours() {

            return '<div class="fansc clearfix">

                        <h3>Available Colours</h3>

                            <ul class="fan-colours clearfix">

                                <li class="fleft"><a href="' . get_bloginfo('url') . '/content/uploads/2013/01/black_bone.jpg"><img src="' . get_bloginfo('url') . '/content/uploads/2013/01/black_bone_on.jpg" alt="Black" width="87" height="87"></a></li>
                                <li class="fleft"><a href="' . get_bloginfo('url') . '/content/uploads/2013/01/white_bone.jpg"><img src="' . get_bloginfo('url') . '/content/uploads/2013/01/white_bone_on.jpg" alt="White" width="87" height="87"></a></li> 
                                <li class="fleft"><a href="' . get_bloginfo('url') . '/content/uploads/2013/01/yellow_bone.jpg"><img src="' . get_bloginfo('url') . '/content/uploads/2013/01/yellow_bone_on.jpg" alt="Yellow" width="87" height="87"></a></li>

                            </ul>
                    </div>';
}
add_shortcode('fanColours', 'fanColours'); 
```

我在网上检查了各种方法，发现一些似乎朝着正确方向前进的东西，我在下面添加了这些方法，但我不确定如何在上面的代码中实现它。

编辑：所以我现在使用简码的最终版本`[fanColours number=3]`如下：

```
function fanColours( $atts ) {
    $links = array();
        $links[]='<li class="fleft"><a href="' . get_bloginfo('url') . '/content/uploads/2013/01/black_bone.jpg"><img src="' . get_bloginfo('url') . '/content/uploads/2013/01/black_bone_on.jpg" alt="Black" width="87" height="87"></a></li>';

        $links[]='<li class="fleft"><a href="' . get_bloginfo('url') . '/content/uploads/2013/01/white_bone.jpg"><img src="' . get_bloginfo('url') . '/content/uploads/2013/01/white_bone_on.jpg" alt="White" width="87" height="87"></a></li>';

        $links[]='<li class="fleft"><a href="' . get_bloginfo('url') . '/content/uploads/2013/01/red_bone.jpg"><img src="' . get_bloginfo('url') . '/content/uploads/2013/01/red_bone_on.jpg" alt="Red" width="87" height="87"></a></li>';

            extract( shortcode_atts( array(
                'number' => '',
            ) , $atts ) );

    $number = ($number < 0) ? 0 : $number;
            $nr_of_links = ( $number < count( $links ) ) ? $number : count( $links );

            $output = '<div class="fansc clearfix"><h3>Available Bone Colours</h3><ul class="fan-colours clearfix">';

            for( $i = 0; $i < $nr_of_links; $i++ ) {
                $output .= $links[$i];
            }

            $output .=  '</ul></div>';
            return $output;
        } 
```

提前感谢您的任何帮助或建议，请多多包涵，因为我仍然处于非常陡峭的学习曲线上，希望我已经充分解释了事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:47:58.923

`extract`接受一个关联数组并将每个键转换为一个变量。所以在这种情况下`$number`，默认值为 3。那是因为 shortcode_atts`$atts`与您给它的数组进行比较，如果未设置值，`$atts`则将其设置为数组中的值。

我想这就是你需要知道的全部吗？或者你也需要“魔法”的帮助。

编辑以回应第一条评论：

因此，现在您拥有要显示的最大链接数。有很多方法可以做你想做的事。但一种方法是这样的：

```
<?php
$links=array();
$links[]='<li class="fleft"><a href="' . get_bloginfo('url') . '/content/uploads/2013/01/black_bone.jpg"><img src="' . get_bloginfo('url') . '/content/uploads/2013/01/black_bone_on.jpg" alt="Black" width="87" height="87"></a></li>';
$links[]='<li class="fleft"><a href="' . get_bloginfo('url') . '/content/uploads/2013/01/white_bone.jpg"><img src="' . get_bloginfo('url') . '/content/uploads/2013/01/white_bone_on.jpg" alt="White" width="87" height="87"></a></li>';
$links[]='<li class="fleft"><a href="' . get_bloginfo('url') . '/content/uploads/2013/01/yellow_bone.jpg"><img src="' . get_bloginfo('url') . '/content/uploads/2013/01/yellow_bone_on.jpg" alt="Yellow" width="87" height="87"></a></li>'

$number = ($number < 0) ? 0 : $number;
$nr_of_links = ( $number < count( $links ) ) ? $number : count( $links );

for( $i = 0; $i < $nr_of_links; $i++ ) {
    echo $links[$i];
}
?> 
```

在哪里？是三元运算符，您可以在此处阅读：http: [//php.net/manual/en/language.operators.comparison.php](http://php.net/manual/en/language.operators.comparison.php)

# gis - Min function in Raster Calculator of Arcgis 10 doesn't work

> ID：14641170
> 
> 赞同：0
> 
> 时间：2013-02-01T06:51:20.017
> 
> 标签：gis, geospatial, arcgis

I know that `min` function in raster calculator of ArcGIS 10 doesn't work but I don't know that which function can I use to solve my problem.

I had this in ArcGIS 9.3 at raster calculator.

```
rule6 = min([population], [gasStation],[Industrial],[falt]) 
```

How can I do this in ArcGIS 10?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:35:54.030

有不同的方法，包括：在 ArcGIS 中实现单元统计工具或在 python 中编写代码

# vb.net - 将 SQL 条件作为 OleDb 参数传递

> ID：14641171
> 
> 赞同：1
> 
> 时间：2013-02-01T06:51:21.923
> 
> 标签：vb.net, ms-access, sqlparameter, sql-parametrized-query, oledbparameter

我有以下代码：

```
Dim executedCmd As OleDb.OleDbCommand = m_dbMgr.GetCommand()
executedCmd.CommandText = "select * from [Parameters] where "
Dim SQLcondition As String = String.Empty
For i As Integer = 0 To ParameterName.Count - 1
 executedCmd.CommandText += "ParameterName = @parametername" + i.ToString() + " and ParameterValue @ParamaterCondition" + i.ToString() + " @ParameterValue" + i.ToString()
 executedCmd.Parameters.AddWithValue("@parametername" + i.ToString(), ParameterName(i))
 executedCmd.Parameters.AddWithValue("@ParameterValue" + i.ToString(), ParameterValue(i))
 executedCmd.Parameters.AddWithValue("@ParamaterCondition" + i.ToString(), Condition(i))
Next 
```

`ParameterName`, `ParameterValue`, `ParameterCondition`all are the same length `ArrayList`，但代码无法正常工作。我已经验证了所有变量都有值。

当我运行代码时，它报告语法错误：“查询表达式中缺少操作”

问题在于它`ParameterCondition`的值如 ( `'>'`, `'<'`, `'='`,.... 一些逻辑 SQL 运算符)。

编辑：如何在参数中包含条件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:04:19.313

在 where 之后添加`1 = 1`以简化构建逻辑表达式。请注意，所有条件都由`AND`逻辑运算符添加。您可以从列名称生成参数名称。

```
executedCmd.CommandText = "select * from [Parameters] where 1 = 1"

....
executedCmd.CommandText += " AND " + ParameterName(i) + " " + Condition(i) + " @" + ParameterName(i)
executedCmd.Parameters.AddWithValue("@" + ParameterName(i), ParameterValue(i)) 
```

ParameterCondition 必须都是二元运算符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:01:14.493

数据库引擎会在将参数替换为值之前检查 SQL 语句的语法。所以像 "WHERE @p1 @p2 @p3" 这样的东西不会被正确解析。用字符串表达式替换您的条件，例如

```
commandtext = parameterName + condition + " @p1" 
```

# javascript - 如何使用javascript提取html数据

> ID：14641177
> 
> 赞同：1
> 
> 时间：2013-02-01T06:51:57.050
> 
> 标签：javascript, ajax, perl

可以通过以下方式使用 perl 提取 HTML 数据...

```
my $URL= "http://10.20.100.34/cgi-bin/usage.pl?server=server1";
my $content = get($URL);
print $content; 
```

可以使用javascript完成吗？如果是，怎么做？？

# d3.js - d3.js 中的自定义形状

> ID：14641179
> 
> 赞同：3
> 
> 时间：2013-02-01T06:52:11.537
> 
> 标签：d3.js

我通过在同一个**svg**容器中给出多个坐标（x，y）和一个**矩形来使用路径概念绘制****雪佛龙。如何在该矩形中添加雪佛龙作为****单个形状**？

 ******```
 var lineFunction = d3.svg.line()
                      .x(function(d) { return d.x; })
                      .y(function(d) { return d.y; })
                     .interpolate("linear");

//The custom shape 
    var customshape = svgContainer.append("path")
                                .attr("d", lineFunction(lineData))
                                .attr("stroke", color)
                                .attr("stroke-width", 2)
                                .style("fill", color)
                                .style("opacity",0.6);
      //rectangle       
      var rectBox = svgContainer.append("rect")
                .attr("x",x_init)
                .attr("y",y_init)
                .attr("width",wid)
                .attr("height",hi)
                .attr("stroke-width",1)
                .attr("stroke","none")
                .attr("fill",rec_color)
                .style("opacity",0.9); 
```******

# magento - 即使缺货也接受订单

> ID：14641180
> 
> 赞同：0
> 
> 时间：2013-02-01T06:52:16.903
> 
> 标签：magento, magento-1.7

我正在做[这个](http://toolskaart.com)

网站。在那种情况下，即使缺货，也必须让客户下订单。交货会延迟一点。请帮我。我是这个magento的新手。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:03:46.363

您可以在系统 > 配置下启用它。在那里你去目录>库存并将延期交货设置为`Alw Qty below 0`

# javascript - 如何在 wxwidgets 中显示 Html5/javascript 内容

> ID：14641181
> 
> 赞同：2
> 
> 时间：2013-02-01T06:52:20.150
> 
> 标签：javascript, c++, html

我想用 wxwidgets 和谷歌的 v8 引擎编写一个 C++ 项目。但我不知道如何在小部件上显示它是否有任何示例代码？

# activerecord - 如何使用外键创建迁移脚本

> ID：14641185
> 
> 赞同：0
> 
> 时间：2013-02-01T06:52:40.720
> 
> 标签：activerecord, ruby-on-rails-2

我想通过我的迁移脚本创建带有外键的表。

```
create_table :posts do |t|
  t.string :title
end

create_table :comments do |t|
  t.references :post
end 
```

之后`rake db:migrate`，评论没有通过 id 被帖子引用。

如何在 rails-2.2.3 中创建它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:08:34.113

您可以将迁移创建为普通的表模式，并为 belongs_to 使用 :primary_key 选项，以更广泛地支持旧模式和使用单独外键的模式：

`belongs_to :posts, :foreign_key => 'post_id'`

# android - Android偏好片段文本颜色

> ID：14641190
> 
> 赞同：21
> 
> 时间：2013-02-01T06:53:08.847
> 
> 标签：android, android-preferences, android-theme

我想更改 android 首选项片段中的文本颜色。我目前正在使用自定义主题来更改复选框图像、背景、onClick 突出显示，这一切都很好......除了文本颜色。我不想使用默认主题，我想拥有自己的主题，所以一切看起来都是我想要的，但只需更改文本颜色，有人可以帮忙。

样式.xml

```
<?xml version="1.0" encoding="utf-8"?>
<resources xmlns:android="http://schemas.android.com/apk/res/android">
    <style name="selectedTextStyle">  
        <item name="android:textSize">18sp</item>
    </style>
    <style name="buttonTextStyle">  
        <item name="android:textSize">20sp</item>
    </style>
    <style name="PreferencesTheme" >
        <item name="android:windowBackground">@drawable/lists_background</item>
        <item name="android:listViewStyle">@style/listViewPrefs</item>
        <item name="android:checkboxStyle">@style/MyCheckbox</item>

    </style>
    <style name="MyTextAppearance" parent="@android:style/TextAppearance">
        <item name="android:textColor">@color/black</item>
      </style>
    <style name="listViewPrefs" parent="@android:Widget.ListView">
        <item name="android:listSelector">@layout/list_selector_master</item>
        <item name="android:textAppearance">@style/MyTextAppearance</item>
    </style>
    <style name="MyCheckbox" parent="android:Widget.CompoundButton.CheckBox">
        <item name="android:button">@drawable/btn_check</item>
    </style>

</resources> 
```

显现：

```
 <activity
            android:name="com.package.SettingsActivity"
            android:theme="@style/PreferencesTheme"
            android:configChanges="keyboard|orientation" >
        </activity> 
```

活动：

```
import android.app.Activity;
import android.os.Bundle;
import android.preference.PreferenceFragment;

public class SettingsActivity extends Activity {
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        // Display the fragment as the main content.
        getFragmentManager().beginTransaction()
                .replace(android.R.id.content, new SettingsFragment())
                .commit();

    }
    public static class SettingsFragment extends PreferenceFragment {
        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            // Load the preferences from an XML resource
            addPreferencesFromResource(R.xml.preferences);

        }
    }

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T07:01:39.867

以下是[preference.xml](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/frameworks/base/core/res/res/layout/preference.xml)`TextView`中的两个对象（a 的布局）：`Preference`

```
 <TextView android:id="@+android:id/title"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:singleLine="true"
        android:textAppearance="?android:attr/textAppearanceLarge"
        android:ellipsize="marquee"
        android:fadingEdge="horizontal" />

    <TextView android:id="@+android:id/summary"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_below="@android:id/title"
        android:layout_alignLeft="@android:id/title"
        android:textAppearance="?android:attr/textAppearanceSmall"
        android:textColor="?android:attr/textColorSecondary"
        android:maxLines="4" /> 
```

所以看起来你可以覆盖`textAppearanceLarge`并`textColorSecondary`在你的主题中实现颜色变化。这是一个例子：

```
<style name="AppTheme">
    <item name="android:textAppearanceLarge">@style/MyTextAppearance</item>
    <item name="android:checkboxStyle">@style/MyCheckBox</item>
</style>

<style name="MyCheckBox" parent="@android:style/Widget.CompoundButton.CheckBox">
    <item name="android:button">@android:drawable/btn_star</item>
</style>

<style name="MyTextAppearance" parent="@android:style/TextAppearance.Large">
    <item name="android:textColor">#ff0000</item>
</style> 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2015-04-16T23:57:43.123

我认为接下来是一个简单明了的方法：

res/values/styles.xml

```
<style name="SettingsFragmentStyle">

    <item name="android:textColorSecondary">#222</item>
    <item name="android:textColor">#CCC</item>
    <item name="android:background">#999</item>
    ...
</style> 
```

在onCreate里面包含PreferenceFragment子类的Activity中：

```
setTheme(R.style.SettingsFragmentStyle); 
```

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-07-17T22:44:43.553

刚刚找到一个可以完成工作的答案。

此文件是首选项列表项的默认布局：

```
<?xml version="1.0" encoding="utf-8"?>
<!-- Copyright (C) 2006 The Android Open Source Project

     Licensed under the Apache License, Version 2.0 (the "License");
     you may not use this file except in compliance with the License.
     You may obtain a copy of the License at

          http://www.apache.org/licenses/LICENSE-2.0

     Unless required by applicable law or agreed to in writing, software
     distributed under the License is distributed on an "AS IS" BASIS,
     WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
     See the License for the specific language governing permissions and
     limitations under the License.
-->

<!-- Layout for a Preference in a PreferenceActivity. The
     Preference is able to place a specific widget for its particular
     type in the "widget_frame" layout. -->
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android" 
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
    android:minHeight="?android:attr/listPreferredItemHeight"
    android:gravity="center_vertical"
    android:paddingRight="?android:attr/scrollbarSize"
    android:background="?android:attr/selectableItemBackground" >

    <ImageView
        android:id="@+android:id/icon"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        />

    <RelativeLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_marginLeft="15dip"
        android:layout_marginRight="6dip"
        android:layout_marginTop="6dip"
        android:layout_marginBottom="6dip"
        android:layout_weight="1">

        <TextView android:id="@+android:id/title"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:singleLine="true"
            android:textAppearance="?android:attr/textAppearanceLarge"
            android:ellipsize="marquee"
            android:fadingEdge="horizontal" />

        <TextView android:id="@+android:id/summary"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_below="@android:id/title"
            android:layout_alignLeft="@android:id/title"
            android:textAppearance="?android:attr/textAppearanceSmall"
            android:textColor="?android:attr/textColorSecondary"
            android:maxLines="4" />

    </RelativeLayout>

    <!-- Preference should place its actual preference widget here. -->
    <LinearLayout android:id="@+android:id/widget_frame"
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:gravity="center_vertical"
        android:orientation="vertical" />

</LinearLayout> 
```

您可以将其用作基础并创建自己的自定义布局。此布局必须像这样在每个首选项中应用

```
<Preference android:key="somekey" 
android:title="Title" 
android:summary="Summary" 
android:layout="@layout/custom_preference_layout"/> 
```

* * *

您可以更改列表之外的整个布局，您只需要一个包含列表视图的布局文件，其中将填充首选项，如下所示：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical" >

    <TextView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="Something" />

    <ListView
        android:id="@android:id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent" />

</LinearLayout> 
```

要覆盖 的默认布局`PreferenceFragment`，请覆盖该方法`onCreateView`并更改膨胀视图：

```
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.custom_options_layout, null);
} 
```

* * *

基于这些答案：

[为首选项创建自定义布局](https://stackoverflow.com/questions/6194116/creating-a-custom-layout-for-preferences)

[如何将按钮添加到 PreferenceScreen](https://stackoverflow.com/questions/2697233/how-to-add-a-button-to-preferencescreen)

[Android：如何在偏好中调整边距/填充？](https://stackoverflow.com/questions/9539786/android-how-to-adjust-margin-padding-in-preference)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-08-17T12:32:03.770

对我来说，上述方法都不起作用。我最终扩展了我使用的那种 Preferences 类，在我的例子中是 CheckBoxPrefernces：

```
 public class MyPreferenceCheckBox extends CheckBoxPreference {

    public MyPreferenceCheckBox(Context context) {
        super(context);
    }
    public MyPreferenceCheckBox(Context context, AttributeSet attrs) {
        super(context, attrs);
    }
    public MyPreferenceCheckBox(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);
    }

    @Override
    protected View onCreateView(ViewGroup parent) {
        ViewGroup root = (ViewGroup) super.onCreateView(parent);
        ((TextView)root.findViewById(android.R.id.title)).setTextColor(parent.getResources().getColor(R.color.red));
        ((TextView)root.findViewById(android.R.id.summary)).setTextColor(parent.getResources().getColor(R.color.red));
        return root;
    }
} 
```

以及在 prefs.xml 中的使用：

```
 <com.my.package.name.MyPreferenceCheckBox
        android:title="@string/my_title"
        android:defaultValue="true"
        android:key="@string/my_key"
        android:summary="On/Off" /> 
```

这个[答案](https://stackoverflow.com/a/11607334/3332634)向我展示了这条路：

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-04-30T14:53:50.343

没有足够的代表发表评论或投票，但我只是想补充一下 mharper 关于 TextAppearanceMedium 的建议在更改文本颜色方面也对我有用。如果有人知道这是为什么，请解释一下。

所以只需像这样调整接受的答案：

```
<style name="AppTheme">
     <item name="android:textAppearanceMedium">@style/MyTextAppearance</item>
</style>

<style name="MyTextAppearance" parent="@android:style/TextAppearance.Medium">
     <item name="android:textColor">#ff0000</item>
</style> 
```

至少如果没有人能解释为什么会这样，它可能会阻止有人遇到我尝试更改文本颜色时遇到的同样困难。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-07-07T17:46:08.397

我可以通过以下方式更改 PreferenceFragment 中的文本颜色：

**样式.xml**

```
<resources>

    <style name="SettingsTheme" parent="android:Theme.Holo">
        <item name="android:textColorPrimary">@color/light_blue_font_color</item>
        <item name="android:textColorSecondary">@color/white_font_color</item>
        <item name="android:textColorTertiary">@color/white_font_color</item>
    </style>

</resources> 
```

**颜色.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<resources>
    <color name="light_blue_font_color">#33b5e5 </color>
    <color name="white_font_color">#ffffff </color>
</resources> 
```

**AndroidManifest.xml**

```
<activity
    android:name="xx.yy.zz.SettingsActivity"
    android:theme="@style/SettingsTheme" >
</activity> 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-01-25T12:24:53.907

如果您使用的是兼容库，只需添加：

```
<item name="colorAccent">#ff0000</item> 
```

适合你的风格

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2016-06-16T09:26:12.387

我使用 min API 11 并使用 23 进行编译。设置主题并在为该主题设置背景之后。如果您使用 > API 14，则可以使用 Theme_DeviceDefault。

这是我找到的最简单的解决方案：

```
public static class SettingsFragment extends PreferenceFragment {
    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        getActivity().setTheme(android.R.style.Theme_Holo);
        // Load the preferences from an XML resource
        addPreferencesFromResource(R.xml.settings);
    }

    @Override
    public void onViewCreated(View view, Bundle savedInstanceState) {
        super.onViewCreated(view, savedInstanceState);
        if(view != null){
            view.setBackgroundColor(ContextCompat.getColor(getActivity(), android.R.color.background_dark));
        }
    }
} 
```

# c - Cygwin-尝试用 C 语言运行 DOS 命令

> ID：14641191
> 
> 赞同：0
> 
> 时间：2013-02-01T06:53:11.753
> 
> 标签：c, cygwin, system, popen

我都试过了`system()`和`popen()`。当我在 cygwin 终端上运行该程序时，它工作得非常好，但是当我尝试通过双击 .exe 文件在 Windows 平台上运行它时，我得到了这个错误： `exception::handle: Exception: STATUS_ACCESS_VIOLATION` 我得到这个错误`popen()`但是我没有得到任何错误`system()`。

我正在运行适用于 unix 和 windows 操作系统的简单命令，例如：

`system("echo foo>foo.txt");`

我在这里做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:01:28.313

我认为这是因为两者都`system()`将`popen()`它们的参数传递给`/bin/sh`路径中没有的参数，您可以尝试先将其添加到路径中。据此，您的路径中需要以下内容[：](http://cygwin.com/ml/cygwin/2011-07/msg00230.html)

```
cyggcc_s-1.dll
cygiconv-2.dll 
cygintl-8.dll 
cygncursesw-10.dll 
cygreadline7.dll 
cygwin1.dll
ls.exe 
sh.exe 
```

# java - 为什么我在使用 JSch 时会看到乱码的输出？

> ID：14641192
> 
> 赞同：0
> 
> 时间：2013-02-01T06:53:13.940
> 
> 标签：java, linux, eclipse, ssh, jsch

我正在尝试使用`JSch`. [我在这里](http://www.jcraft.com/jsch/examples/Shell.java.html)尝试了这个例子 虽然我可以连接输出很奇怪。
我得到以下信息：

```
Last login: Thu Jan 31 19:44:25 2013 from 10.2.251.77

[1mcli:~ # [m 
```

如果我这样做，`ls`我会得到：

```
[0m[01;34m.InstallAnywhere[0m  [00m.bash_history                [00m.bash_profile[0m       
[01;34mbin[0m                             [00msles11-patched[0m  
[01;34m.kbd[0m              [00mindex.html[0m                      [00mtest.sql[0m  
[00m.viminfo[0m          [00;31mipvsadm-1.26-1.src.rpm[0m  
[m[1mcli:~ # [m 
```

这些是目录内容，但为什么会这样显示？
我在 Eclipse 中运行，这就是我在 Eclipse 输出中看到的。如果我从 Windows 运行它，`CMD`它会卡住

**更新：**
我注意到如果我连接到不同的 linux 输出就很好！
只有当我连接到特定的 linux 安装时，我才会看到这些奇怪的字符！知道是什么原因造成的吗？

**Update2：**
按照@PeterMmm 的链接，我做了`printf "äöü" | xxd`。“坏”和“好”都给出：
`0000000: e4f6 fc`
我也做了`locale`。
在“坏”的情况下：

```
# locale  
LANG=POSIX  
LC_CTYPE=en_US.UTF-8  
LC_NUMERIC="POSIX"  
LC_TIME="POSIX"  
LC_COLLATE="POSIX"  
LC_MONETARY="POSIX"  
LC_MESSAGES="POSIX"  
LC_PAPER="POSIX"  
LC_NAME="POSIX"  
LC_ADDRESS="POSIX"  
LC_TELEPHONE="POSIX"  
LC_MEASUREMENT="POSIX"  
LC_IDENTIFICATION="POSIX"  
LC_ALL= 
```

在良好的系统中：

```
LANG=POSIX  
LC_CTYPE=en_US.UTF-8  
LC_NUMERIC="POSIX"  
LC_TIME="POSIX"  
LC_COLLATE="POSIX"  
LC_MONETARY="POSIX"  
LC_MESSAGES="POSIX"   
LC_PAPER="POSIX"  
LC_NAME="POSIX"  
LC_ADDRESS="POSIX"   
LC_TELEPHONE="POSIX"   
LC_MEASUREMENT="POSIX"   
LC_IDENTIFICATION="POSIX"  
LC_ALL= 
```

配置似乎是一样的。那么可能是什么原因造成的呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-04-04T19:18:30.500

请检查 [有趣的外壳输出：[01;32mtestfile.txt[00m 而不是 testfile.txt](https://stackoverflow.com/questions/17221127/funny-shell-output-0132mtestfile-txt00m-instead-of-testfile-txt)

```
((ChannelShell) channel).setPtyType("dumb"); 
```

行得通。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T09:08:46.437

它们是终端仿真的转义序列。我想这与字符编码无关。

**更新：** 如果调用 ChannelShell#setPty(false)，则不会分配伪终端，也不会出现转义序列。

```
Channel channel=session.openChannel("shell");
((ChannelShell)channel).setPty(false);                  // !!
...
channel.connect(); 
```

# azure - 通过内部端点启动脚本

> ID：14641193
> 
> 赞同：0
> 
> 时间：2013-02-01T06:53:19.500
> 
> 标签：azure

我将许多 cmd 脚本上传到 Role 实例，然后我想使用内部端点，由管理员在所有实例上执行 cmd 脚本。

我能得到那个吗？我想将脚本上传到我的所有实例，最好的方法是什么？非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:19:28.347

最简单的方法是通过 Azure 存储分发脚本 - 很可能 Blob 存储是最好的。

选项一是您将脚本上传到一个实例，上传完成后，该实例将脚本上传到 Blob 存储中，而其他实例下载脚本。

选项二是将脚本上传到 blob 存储，然后所有实例从那里下载脚本。

# macos - 让 NSSavePanel 忘记之前的目录

> ID：14641195
> 
> 赞同：3
> 
> 时间：2013-02-01T06:53:22.077
> 
> 标签：macos, cocoa, appstore-sandbox, nssavepanel

`NSSavePanel`记住以前选择的目录。

我怎样才能让它忘记它，并恢复默认值？

我正在使用沙盒应用程序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-10-29T21:15:51.810

/* 要获得一个面板，该面板首先指向 OS X 确定的正确默认目录（没有最后保存的目录），请在运行面板之前删除保存在默认值中的所有值：*/

```
[[NSUserDefaults standardUserDefaults] removeObjectForKey:@"NSNavLastRootDirectory"];
[[NSUserDefaults standardUserDefaults] removeObjectForKey:@"NSNavLastCurrentDirectory"];
[[NSUserDefaults standardUserDefaults] synchronize];

NSSavePanel *savePanel = [NSSavePanel savePanel]; 
```

/* 如果你已经删除了默认值并且你需要将一个值传递给一个目录设置 API 并且你想获得“默认”值，传递 nil。（但是在沙盒打开/保存面板的生命周期中的某些时候（在它开始运行之后），出于安全考虑，您可能不再被允许更改目录。）如果您不删除默认保存的值并且您将 nil 传递给目录设置 API，您将获得最后使用的值。*/

```
[savePanel setDirectoryURL:nil]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:32:51.140

`setDirectoryURL:`每次都打电话。

```
NSSavePanel *savePanel = [NSSavePanel savePanel];

[savePanel setDirectoryURL:[NSURL fileURLWithPath:PATH]]; 
```

或者

```
[[NSUserDefaults standardUserDefaults] setValue:PATH forKey:@"NSNavLastRootDirectory"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

**编辑**

```
NSSavePanel *savePanel = [NSSavePanel savePanel];

[savePanel setCanChooseFiles:NO];
[savePanel setCanChooseDirectories:YES];
if (mDefaultURL) { // memeber variable NSURL *mDefaultURL;
    [savePanel setDirectoryURL:[NSURL fileURLWithPath:mDefaultPath]];
}
//

[savePanel beginSheetModalForWindow:self.window completionHandler:^(NSInteger result) {
    if (result == NSFileHandlingPanelOKButton) {
        [self setBaseURL:[openPanel URL]];
        [self setupImagesMenu];
    }
}];
NSLog(@"%@", [savePanel directoryURL]);
if (mDefaultURL==nil) {
    mDefaultURL = [[NSURL alloc] initWithString:[[savePanel directoryURL] path]];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:07:09.397

第一次显示面板时，将 存储`directoryURL`到静态变量。用于`setDirectoryURL`在以后使用保存面板时使用该目录。

在非沙盒应用中，您可以通过 NSUserDefaults 访问该值。你也许仍然可以。我知道 NSSavePanel 在沙盒应用程序中被调用时会被替换，并且它可能不会以相同的方式设置首选项（并且可能会将它们保留在您无法访问的域中）。您可以在 ~/Library/Preferences/com.yourdomain.yourApp.plist 中打开 plist 文件以找到确切的密钥。

```
NSSavePanel * savePanel = [[NSSavePanel alloc] init];
//store default directory prior to displaying save panel to user
NSURL * defaultDirectory = [savePanel directoryURL];

//Present to user, resetting default directory when done. 
[savePanel beginSheetModalForWindow:window
              completionHandler:^(NSInteger result) {
                          [[NSUserDefaults standardUserDefaults] setValue:defaultDirectory forKey:@"NSNavLastRootDirectory"];
                          [[NSUserDefaults standardUserDefaults] synchronize];
                      }]; 
```

# javascript - 我可以借助 UIAutomation Instruments 中的脚本点击 iPhone 模拟器后退按钮吗？如果是，那么如何做同样的事情？

> ID：14641198
> 
> 赞同：2
> 
> 时间：2013-02-01T06:53:31.690
> 
> 标签：javascript, ios-ui-automation

我想关闭应用程序，从后台杀死它（它的实例）并重新启动它。那么有没有办法直接或间接地做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-08T10:54:30.653

从命令行启动仪器，并编写一个系统级脚本以使用两个不同的脚本运行它两次。第一次运行完成后，您的应用程序将在您开始第二次运行时停止并重新启动。您的系统级脚本应如下所示：

```
#!/bin/bash
instruments -t Template.tracetemplate -e UIASCRIPT script1.js
instruments -t Template.tracetemplate -e UIASCRIPT script2.js 
```

# sip - 通过 SIP 中继呼出

> ID：14641200
> 
> 赞同：0
> 
> 时间：2013-02-01T06:53:37.310
> 
> 标签：sip, asterisk, trunk, sip-server

我有一个简单的问题困扰着我。我有带 SIP 中继到 ISP 的 FreePBX 服务器。ISP 专用的一个 PSTN 号码。所以所有内部 SIP 分机都使用相同的号码。这是否意味着任何时候只有一个分机可以呼叫外部？

谢谢你。此致

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T22:42:11.787

向您的提供者询问该问题。

通常没有限制，如果供应商方面没有特殊限制。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-01T15:25:00.847

只是一个提示。这取决于您的 VoIP 提供商，他们允许您使用一个帐户进行的同时呼叫数量，您可以尝试 SIP 中继提供商，例如 Switch2Voip[呼叫中心 VoIP](http://switch2voip.us)，它们允许以非常低的费率进行无限制的并发呼叫。

# c# - 无法使用 HttpWebRequest/HttpWebResponse 下载 html 字符串

> ID：14641201
> 
> 赞同：3
> 
> 时间：2013-02-01T06:53:44.703
> 
> 标签：c#, html, httpwebrequest, httpwebresponse

我使用 HttpWebRequest/HttpWebResponse 来获取 html 文档，下面的代码正在运行，但我无法将接收到的流编码为 html 字符串：

```
 string uri = "https://myfavoritesite.come";
        HttpWebRequest webrequest = (HttpWebRequest)WebRequest.Create(uri);
        webrequest.KeepAlive = true;
        webrequest.Method = "GET";
        webrequest.ContentType = "text/html";
        webrequest.Accept = "text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8";
        //webrequest.Connection = "keep-alive";
        webrequest.Host = "cat.sabresonicweb.com";
        webrequest.Headers.Add("Accept-Encoding", "gzip, deflate");
        webrequest.Headers.Add("Accept-Language", "en-US,en;q=0.5");
        webrequest.UserAgent = "Mozilla/5.0 (Windows NT 6.1; rv:18.0) Gecko/20100101 Firefox/18.0";

        HttpWebResponse webresponse = (HttpWebResponse)webrequest.GetResponse();

        Console.Write(webresponse.StatusCode);
        Stream receiveStream = webresponse.GetResponseStream();

        Encoding enc = System.Text.Encoding.GetEncoding(1252);//1252
        StreamReader loResponseStream = new
          StreamReader(receiveStream, enc);

        string Response = loResponseStream.ReadToEnd();

        loResponseStream.Close();
        webresponse.Close();

        Console.Write(Response); 
```

所以，我使用下面的代码行来测试是否有成功的请求。

```
 Console.Write(webresponse.StatusCode); 
```

屏幕上的结果是好的，这意味着请求已发送，但屏幕上暴露的响应字符串不是html格式，这很奇怪：@32u% *&$* &(@*#Eeeuw

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T06:58:05.410

通过使用`webrequest.Headers.Add("Accept-Encoding", "gzip, deflate");`，您告诉服务器您了解压缩响应。删除该标头并使用普通的 UTF8 编码而不是您正在使用的 1252。然后你应该得到正确的字符串。你可以只使用`System.Text.Encoding.UTF8`.

# html - 省略号在 Firefox 中效果不佳，但在 chrome 中有效

> ID：14641202
> 
> 赞同：4
> 
> 时间：2013-02-01T06:53:50.210
> 
> 标签：html, css, ellipsis

我试图使用省略号将链接限制为宽度。

html是这样的：

```
<a class="blueLink2 destination-url-space" style="top:0;" href="http://google.com/uyv245">http://google.com/iuh345345345gthrthrthrth</a> 
```

和CSS是

```
.blueLink2 {
    color: #0051A1;
    display: inline;
    font-size: 14px;
    margin-left: 5px;
    overflow: hidden;
    position: relative;
    text-overflow: ellipsis;
    top: 0;
}
.destination-url-space {
    display: inline-block;
    max-width: 200px;
    overflow-x: hidden;
} 
```

但它只适用于 Chrome。不能在 Firefox 中工作。演示：http: [//jsfiddle.net/xE6HG/](http://jsfiddle.net/xE6HG/)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T06:57:08.883

你需要在`white-space: nowrap;`那里添加

**[演示](http://jsfiddle.net/xE6HG/2/)**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-06T05:09:01.190

```
p{
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  -o-text-overflow: ellipsis;
  -ms-text-overflow: ellipsis;
  -moz-binding: url('ellipsis.xml#ellipsis');
}
```

```
<p>
Lorem ipsum is a pseudo-Latin text used in web design, typography, layout, and printing in place of English to emphasise design elements over content. It's also called placeholder (or filler) text. It's a convenient tool for mock-ups. It helps to outline the visual elements of a document or presentation, eg typography, font, or layout. 
</p>

<p>
Lorem ipsum is a pseudo-Latin text used in web design, typography, layout, and printing in place of English to emphasise design elements over content. It's also called placeholder (or filler) text. It's a convenient tool for mock-ups. It helps to outline the visual elements of a document or presentation, eg typography, font, or layout. 
</p>
```

# java - 将字节转换为字节[]

> ID：14641203
> 
> 赞同：-2
> 
> 时间：2013-02-01T06:53:55.633
> 
> 标签：java, soap

谁能告诉我如何转换`Byte`成`byte[]`. 我`Byte`从网络服务调用中获取，从我需要获取的包装类型`Byte`，`byte[]`然后从`byte[]`我需要获取 PDF。那么任何人都可以建议我如何`byte[]`摆脱包装类型`Byte`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T06:58:02.183

你的问题不太好理解。

如果您的意思是，您有一些`Byte`变量，那么它将是：

```
Byte x ....  // is input variable
byte[] bArr = new byte[] { x.byteValue() }; 
```

如果您的意思是，您处理`Byte[]`数组并需要将其转换为`byte[]`数组，那么它将是：

```
Byte[] x ... // is your Byte array
byte[] bArr = new byte[x.length];
for (int i = 0; i < x.length; i++) bArr[i] = x[i].byteValue(); 
```

# java - 如何使用 servlet 验证 HTML 表单中不存在的隐藏表单字段名称

> ID：14641207
> 
> 赞同：3
> 
> 时间：2013-02-01T06:54:04.820
> 
> 标签：java, servlets

我有两个 HTML 表单，一个有隐藏字段标签，另一个没有标签。在验证具有隐藏字段标记的第一个 HTML 表单时，我可以通过获取它的字段名称和值在 servlet 中进行验证。示例如下所示，

**带有隐藏标签的 HTML 表单**

```
<form action="/myServlet" method="post" enctype="multipart/form-data">  
<input type="hidden" name="myname" value="myvalue"/>
<input type="file" name="file"/>
<input type="submit" value="Submit"/> 
```

**Servlet 验证隐藏字段**

```
ServletFileUpload upload = new ServletFileUpload();
FileItemIterator iter;
iter = upload.getItemIterator(request);
while (iter.hasNext()) {
   item = iter.next();
   String fileName =  item.getName();
   String fieldName = item.getFieldName();
   if (item.isFormField()) {
   String fieldValue = Streams.asString(item.openStream());
   if (fieldName.equals("myname")){ //validating Hidden form tag name
         // some process goes here
   }
} 
```

使用上面的代码，我可以验证隐藏表单字段，但是如果我有一个如下的 HTML 表单，它没有隐藏标签，那么如何处理我的 servlet 进行验证。

**没有隐藏标签的 HTML 表单**

```
<form action="/myServlet" method="post" enctype="multipart/form-data"> 
//No hidden tag
<input type="file" name="file"/>
<input type="submit" value="Submit"/> 
```

我希望能够验证这些不同的情况：

1.  带有隐藏字段的表单，以及该字段的请求中的一些内容：VALID
2.  *具有空*隐藏字段的表单：无效
3.  没有隐藏字段的表单：有效

主要问题是区分最后两种情况。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:57:17.957

如果您只需要知道 myname 属性是否存在，您可以设置一个标志来指示它。或者将值存储在一个用 null 初始化的字符串中。

```
 boolean hasMyName = false;

    while (iter.hasNext()) {
       item = iter.next();
       String fileName =  item.getName();
       String fieldName = item.getFieldName();
       if (item.isFormField()) {
          String fieldValue = Streams.asString(item.openStream());
          if (fieldName.equals("myname")){ //validating Hidden form tag name
             hasMyName = true;
          }
    }

    if ( hasMyName ) {
        // myname is present, do something
    } 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T09:58:26.527

我还没有这样做，但你可以试试这个：

1.  在您认为应该存在的情况下，在表单中创建一个隐藏字段，例如字段名称为“myHiddenField”。

2.  现在，尝试在以下情况下尝试获取此字段的 b/w 值是否有任何差异：

一个。它不存在。

湾。它是空白的。

尝试看看是否能够区分空值和空白值。正如我所说，我自己没有尝试过。我的假设在这里可能是错误的。

# c# - 数据网格视图 (winform) 未正确填充

> ID：14641215
> 
> 赞同：0
> 
> 时间：2013-02-01T06:54:18.490
> 
> 标签：c#, winforms, linq, datagridview

我的数据库中有两个表`Department`，`Faculty` . 我正在为我的 winform 应用程序中的部门列表填充一个 datagridview。我的两张桌子都在下面

**部门**

1.  斯诺 (int)
2.  名称 (varchar(max))
3.  状态（位）
4.  Faculty_id (int)

**学院**

1.  斯诺 (int)
2.  姓名
3.  地位

现在开始编写代码，我只需将 datagridview 拖放到我的表单中，然后转到文件后面的代码。在我表单的加载方法中，我编写了以下代码

```
 var main = new SRMEntities();
        var departs = main.Department.ToList();
        DepartmentGrid.DataSource = departs; 
```

现在，当我的表单加载时，它显示如下 ![部门网格](../Images/216af05341d8aba13b98f45f820b6ab0.png)

在教员列中查看它没有显示任何内容，当我们创建部门时，我们将教员 ID 存储到部门中。我想在这里显示教员姓名。

如果您有任何问题，请告诉我。

提前致谢

**编辑**

我的数据库图

![数据库](../Images/568c376d12f034b07adaecbec8ec08d3.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:30:35.833

这是正确的加入：

```
var main = new SRMEntities();
var query = from f in main.Faculty
            join d in main.Department on f.Sno equals d.Faculty.Sno
            select new { d.Sno, d.Name, d.Status, Faculty = f.Name };

DepartmentGrid.DataSource = query.ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:27:40.477

一切都取决于您的查询............您的查询应该包含两个表加入。

```
var main = new SRMEntities();
var departs = main.Department.ToList();
DepartmentGrid.DataSource = departs; 
```

请检查上面的代码**“main.Department.ToList();”** 仅返回 Departments 并且您将**“departs”**分配给您的网格。

**“main.Department”**是否包含**“Faculty”**表信息？

通过查看您的代码，我猜您有一个单独的项目，如下所示

```
1.main.Department
2.main.Faculty 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:04:28.267

你需要加入你的桌子

就像是：

```
var main = new SRMEntities();

    var source = (from d in main.Department
                 join f in main.Faculty on d.Faculty.Sno=f.Sno
                 select new
                 {
                  Sno = d.Sno ,
                  Name = d.Name,
                  Status = d.Status, 
                  Faculty = f.Name
                 }
                 );   

    DepartmentGrid.DataSource = source.ToList(); 
```

问候

# drupal - 如何在drupal 7中隐藏搜索页面中的块

> ID：14641223
> 
> 赞同：0
> 
> 时间：2013-02-01T06:54:54.510
> 
> 标签：drupal, drupal-7

我需要从搜索结果页面中隐藏一个块。在块中`Visibility settings`，我选择`All pages except those listed`并在框中输入搜索。但是搜索页的 url 是`example.com/search/node/searchword`。因此该块在搜索结果页面中仍然可见。我怎样才能隐藏块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T12:32:38.503

选好`search/*`后写`All pages except those listed`

就这样...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:30:38.550

您可能只需要一个通配符。

```
search* or search/* 
```

# c# - 命名空间“系统”中不存在类型或命名空间名称“Windows”

> ID：14641224
> 
> 赞同：8
> 
> 时间：2013-02-01T06:54:57.597
> 
> 标签：c#, asp.net-mvc-3

我正在尝试为弹出消息框编写代码，以显示在 C#.net 中成功插入记录的消息

**错误**：

> 命名空间“系统”中不存在类型或命名空间名称“Windows”（您是否缺少程序集引用？）

**代码**：

```
 global::System.Windows.Forms.MessageBox.Show("Test"); 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-10-09T23:29:50.543

如果您使用的是 MS Visual Studio：

1.  右键单击项目
2.  选择“添加参考...”
3.  导航到“.NET”选项卡
4.  找到“System.Windows.Forms”并选择它
5.  单击确定。

PS：此外，我必须对“System.Drawing”做同样的事情，才能在我的第一个 GUI Windows 程序中正常工作。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-01T06:57:49.543

`global::System.Windows.Forms.MessageBox.Show("Test");`在 ASP.NET MVC 应用程序中？你希望这个消息框在哪里弹出？

在 ASP.NET MVC 应用程序中，您可以使用客户端 javascript 来显示消息框。

例如，在您的视图中，您可以输入以下内容：

```
<script type="text/javascript">
    alert('Test');
</script> 
```

当您导航到相应的控制器操作时，用户将看到消息框。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-01T06:59:15.133

您没有丢失任何 DLL ，您似乎使用了错误类型的项目。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2018-10-01T18:28:19.607

令人难以置信的是，当我的一个类库在其自己的命名空间中有“系统”时，我得到了这个错误。MyCompany.Foo.Bar.Client.System 作为我的程序集命名空间必须在某处引起冲突。从我的命名空间中删除“系统”解决了这个问题。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-08-06T05:20:57.063

我正在为 Windows 应用程序使用 Visual Studio 2012，Framework 4.0。我还收到以下消息：'类型或命名空间'windows'不存在'

为了解决这个问题，我添加了对 Windows.Forms.dll 的引用。之后，我可以使用以下代码显示消息框

System.Windows.Forms.MessageBox.Show("成功完成");

# firefox - Monkey Talk ide (v1.0.30) 没有录制按钮（使用火狐）

> ID：14641234
> 
> 赞同：-1
> 
> 时间：2013-02-01T06:55:54.280
> 
> 标签：firefox, monkeytalk

我是 Monkey Talk 的初学者。请帮助我开始使用它我正在尝试使用 Monkey Talk 进行自动化测试。我安装成功。我使用火狐选项成功连接了它。我正在使用火狐 v12.0 和带有 2gb ram 的 windows xp。在此 ide 中，没有用于在 firefox 中记录用户操作的记录按钮。你能指导我吗？提前致谢。

我在大猩猩逻辑网站中搜索，但我没有得到正确的信息......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T11:34:31.133

你好，你看过monkeytalk用户指南吗？它说仅在 beta5 中的 firefox 是您正在使用的版本

我可以测试 HTML5 网络应用吗？

是的，从 MonkeyTalk Beta5 开始，我们现在支持适用于 iOS、Android、Flex、桌面网络浏览器（仅限 Beta5 中的 Firefox）和移动网络的代理。因此，您可以在桌面网络浏览器和我们捆绑的 MTBrowser 应用程序中测试 HTML5 应用程序。

# oracle - oracle 查询查找最大关系

> ID：14641250
> 
> 赞同：0
> 
> 时间：2013-02-01T06:57:01.497
> 
> 标签：oracle

我在 oracle 有一个问题

```
SELECT q2.Director_ID, q2.Actor_ID
   FROM (SELECT MAX(n.Num_Joint_Movies) AS Max_Joint_Movies
      FROM (SELECT d.Director_ID, A.Actor_ID, COUNT(*) AS Num_Joint_Movies
              FROM Movies_Directors AS d
              , Roles AS a
                where d.Movie_ID = a.Movie_ID
             GROUP BY d.Director_ID, A.Actor_ID
           ) AS n
   ) AS q3,
(SELECT d.Director_ID, A.Actor_ID, COUNT(*) AS Num_Joint_Movies
      FROM Movies_Directors AS d
     , Roles AS a
       where d.Movie_ID = a.Movie_ID
     GROUP BY d.Director_ID, A.Actor_ID
    ) AS q2
where q3.Max_Joint_Movies = q2.Num_Joint_Movies 
```

但我收到错误 ORA-00907：缺少右括号

你能否指导我做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:48:42.450

您的 SQL 失败，因为您在表连接上使用了 AS 关键字。

即你应该有：

```
SELECT q2.Director_ID, q2.Actor_ID
   FROM (SELECT MAX(n.Num_Joint_Movies) AS Max_Joint_Movies
      FROM (SELECT d.Director_ID, A.Actor_ID, COUNT(*) AS Num_Joint_Movies
              FROM Movies_Directors  d
              , Roles  a
                where d.Movie_ID = a.Movie_ID
             GROUP BY d.Director_ID, A.Actor_ID
           ) n
   )  q3,
(SELECT d.Director_ID, A.Actor_ID, COUNT(*) AS Num_Joint_Movies
      FROM Movies_Directors  d
     , Roles  a
       where d.Movie_ID = a.Movie_ID
     GROUP BY d.Director_ID, A.Actor_ID
    )  q2
where q3.Max_Joint_Movies = q2.Num_Joint_Movies; 
```

您的 SQL 可以简化为：

```
select Director_ID, Actor_ID, Num_Joint_Movies
  from (select d.Director_ID, A.Actor_ID, COUNT(*) Num_Joint_Movies,
               rank() over (order by count(*) desc) r
                  from Movies_Directors  d
                       inner join Roles  a
                               on d.Movie_ID = a.Movie_ID
                 group by d.Director_ID, A.Actor_ID)
 where r = 1; 
```

编辑一个小样本：

```
SQL> create table Movies_Directors(director_id, Movie_ID)
  2  as
  3  select 1, 1 from dual
  4  union all
  5  select 1, 2 from dual
  6  union all
  7  select 2, 3 from dual
  8  union all
  9  select 2, 4 from dual
 10  union all
 11  select 3, 1 from dual ;

Table created.

SQL> create table roles(movie_id, actor_Id)
  2  as
  3  select 1, 1 from dual union all
  4  select 1, 2 from dual union all
  5  select 1, 3 from dual union all
  6  select 1, 4 from dual union all
  7  select 2, 1 from dual union all
  8  select 2, 3 from dual union all
  9  select 3, 3 from dual union all
 10  select 3, 1 from dual;

Table created. 
```

如果我们添加排名分析： SQL> select d.Director_ID, A.Actor_ID, COUNT(*) Num_Joint_Movies, 2 rank() over (order by count(*) desc) r 3 from Movies_Directors d 4 inner join Roles a 5 on d.Movie_ID = a.Movie_ID 6 group by d.Director_ID, A.Actor_ID 7 /

```
DIRECTOR_ID   ACTOR_ID NUM_JOINT_MOVIES          R
----------- ---------- ---------------- ----------
          1          1                2          1
          1          3                2          1
          2          3                1          3
          1          2                1          3
          3          2                1          3
          3          3                1          3
          3          4                1          3
          2          1                1          3
          1          4                1          3
          3          1                1          3

10 rows selected. 
```

现在只需过滤排名 1 ..

```
SQL> select Director_ID, Actor_ID, Num_Joint_Movies
  2    from (select d.Director_ID, A.Actor_ID, COUNT(*) Num_Joint_Movies,
  3                 rank() over (order by count(*) desc) r
  4                               from Movies_Directors  d
  5                                    inner join Roles  a
  6                                            on d.Movie_ID = a.Movie_ID
  7                              group by d.Director_ID, A.Actor_ID)
  8   where r = 1;

DIRECTOR_ID   ACTOR_ID NUM_JOINT_MOVIES
----------- ---------- ----------------
          1          3                2
          1          1                2 
```

与原始（更正）sql：SQL> SELECT q2.Director_ID, q2.Actor_ID 2 FROM (SELECT MAX(n.Num_Joint_Movies) A​​S Max_Joint_Movies 3 FROM (SELECT d.Director_ID, A.Actor_ID, COUNT(*) AS Num_Joint_Movies 4 FROM Movies_Directors d 5 , Roles a 6 where d.Movie_ID = a.Movie_ID 7 GROUP BY d.Director_ID, A.Actor_ID 8 ) n 9 ) q3, 10 (SELECT d.Director_ID, A.Actor_ID, COUNT(*) AS Num_Joint_Movies 11 FROM Movies_Directors d 12 , 角色 a 13 其中 d.Movie_ID = a.Movie_ID 14 GROUP BY d.Director_ID, A.Actor_ID 15 ) q2 16 其中 q3.Max_Joint_Movies = q2.Num_Joint_Movies;

```
DIRECTOR_ID   ACTOR_ID
----------- ----------
          1          1
          1          3

SQL> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:11:50.243

```
SELECT Director_ID,
    Actor_ID FROM
 (SELECT
    d.Director_ID,
    a.Actor_ID,
    COUNT(*) AS Num_Joint_Movies 
FROM
    Movies_Directors AS d 
        JOIN Roles AS a 
        ON d.Movie_ID = a.Movie_ID 
    GROUP BY
        d.Director_ID,
        a.Actor_ID
) WHERE ROWNUM = 1 ORDER BY Num_Joint_Movies ASC
/ 
```

试试这个，它应该可以工作

# c - 如何在程序输出本身中查看当前进程状态

> ID：14641254
> 
> 赞同：1
> 
> 时间：2013-02-01T06:57:19.023
> 
> 标签：c, bash, unix, sed, grep

如何打印当前进程状态

```
main ()
{
  pid_t pid;
  printf("parent : %d\n", getpid());
  pid = fork();
  if (pid == 0)
    {
      printf("child : %d\n", getpid());
      sleep(2);
      printf("child exit\n");
      exit(1);
    }
  while (1)
    { /*after the child exit, its a zombie process */
      system("clear");
      system("ps -x | grep t"); /* if a.out is Z means zombie process */
      sleep(8);
    }
} 
```

有没有其他方法或方式来查看输出本身的当前进程状态..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:53:21.060

确定进程的调度状态是特定于操作系统的。在 Linux 上，`top`类似从`/proc/$PID/stat`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:17:07.433

您始终可以`/proc`在 C 中打开和读取文件

`/proc/[pid]/stat`并`/proc/[pid]/status`会给出当前进程的状态。

中的第三个字段`/proc/<pid>/stat`包含进程状态：**R**表示正在运行，**S**表示正在睡眠（还有其他一些字段，例如**D**表示磁盘等待，**Z**表示 Zombie）。

或者您可以使用解析`ps`命令的输出`popen`。但请记住[ps](http://procps.sourceforge.net/download.html)命令本身是根据**/proc 文件系统中的信息实现的**

# php - Http/1.1 服务在负载均衡服务器中不可用

> ID：14641255
> 
> 赞同：-1
> 
> 时间：2013-02-01T06:57:27.780
> 
> 标签：php

Http/1.1 Service Unavailable是什么意思？

我有 9 台服务器。使用负载平衡器连接服务器。

在 5 个站点中，3 个站点运行良好。

两个站点抛出错误：Http/1.1 Service Unavailable

该错误的原因是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:27:00.663

因此，您有 9 个服务器，其中 5 个站点分布在所有 9 个服务器（镜像）上，`Http/1.1 Service Unavailable`当您查看其中两个站点时，LB 会给出？

当 LB 尝试与后端服务器通信时，后端服务器似乎给出了 5XX 错误。`Http/1.1 Service Unavailable`是您给我们的一个非常普遍的错误。我会说这是您的域未正确配置后端服务器的问题。

您使用的是什么操作系统？还有什么阿帕奇？......

# java - 在行选择（在 p:dataTable 中）调用不同的 java 方法？

> ID：14641260
> 
> 赞同：0
> 
> 时间：2013-02-01T06:57:52.970
> 
> 标签：java, ajax, jsf, primefaces, ajax4jsf

如何在数据表中的行选择上调用不同的Web服务（不同的java方法）并使用行选择通过ajax异步更新页面。

我有这种情况，因为我有 5 个选项卡应该通过从 5 个方法获取数据来更新。虽然第一个听众没有给出影响所有花药标签的数据。所以我想分别给他们打电话。

```
<p:ajax event="rowSelect" listener="#{userController.onFetchUsers}" 
        update=":userRightPaneForm :usersForm:usersList"/>

<p:ajax event="rowSelect" listener="#{userController.onFetchUserDetails}" 
        update=":userRightPaneForm :usersForm:usersList"/> 
```

我试过这样。但是在行选择事件上`onFetchUsers`和Method 都调用了 2 次。`onFetchUserDetails`

我正在使用 Prime 面孔 3.4.2

我怎样才能实现它？

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-01T10:38:09.887

它取决于业务场景。

首先，选择一行，您可以调用 java 方法，该方法填充所有选项卡的数据，并且 in update 依次给出所有五个选项卡的 ID。

希望这对你有用。

或者让我知道测试仪和问题等步骤的确切情况。

# asp.net-mvc-3 - 使用 C# 在 LINQ 中自定义分页

> ID：14641262
> 
> 赞同：0
> 
> 时间：2013-02-01T06:58:00.870
> 
> 标签：asp.net-mvc-3, linq

我正在尝试使用 LINQ 进行自定义分页。一切安好。但是最后一页会产生上一页的输出值。我知道因为这个，

```
int skip = Math.Max(AC.rows * (AC.page - 1), 0);  // Doing page -1. 
```

但我需要知道如何使逻辑纯粹用于分页。请有人指导我为此做正确的逻辑。

**代码**

```
var selectpending = CsA.CsAutoCompletes(AC, searchTerm);
var Tot = selectpending.Count();
int skip = Math.Max(AC.rows * (AC.page - 1), 0);
int totpages = Convert.ToInt32(Tot / AC.rows);

um = selectpending.Skip(skip).Take(AC.rows).ToList();
return Json(new
{
    rows = um,
    records = Tot,
    page = AC.page,
    total = totpages
}
, JsonRequestBehavior.AllowGet); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:03:35.757

`Tot`可能不能被 整除`AC.Rows`，所以你应该做类似的事情`int totpages = (int)Math.Ceiling(((double)Tot)/ AC.Rows);`

# ibm-mq - 什么样的 CCSID 值可以用于 WMQ QMGR？

> ID：14641265
> 
> 赞同：0
> 
> 时间：2013-02-01T06:58:08.760
> 
> 标签：ibm-mq, mq

问题是关于**QMGR 中 ccsid 的值**。做这个配置的时候，一共可以用几个？我怎么知道我可以选择哪种 ccsid？有没有办法找出来？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-26T22:23:31.433

Accordint go IBM WebSphere MQ 7.0 Infocenter，以下适用于队列管理器选项 CCSID（Coded Charset ID）：

> 队列管理器的编码字符集标识符。CCSID 是与 API 定义的所有字符串字段一起使用的标识符。它不适用于消息文本中携带的应用程序数据，除非在将消息放入队列时将消息描述符中的 CCSID 设置为值 MQCCSI_Q_MGR。
> 
> **在1 到 65 535**范围内指定一个值。CCSID 必须指定一个为在您的平台上使用而定义的值，并使用适合该平台的字符集。

我认为粗体部分回答了您问题的第一部分（可以使用多少个），尽管应该注意您只能为队列管理器使用一个特定的 CCSID。

您只能使用对您的平台有效的 CCSID（您没有提及队列管理器在哪个操作系统上运行）。请参阅[WebSphere MQ/应用程序编程参考/代码页转换](http://publib.boulder.ibm.com/infocenter/wmqv7/v7r0/topic/com.ibm.mq.csqzak.doc/fr20890_.htm)以获取您选择的平台上支持的转换列表。

# python - os.renames 用于 python 中的 ftp

> ID：14641267
> 
> 赞同：0
> 
> 时间：2013-02-01T06:58:16.753
> 
> 标签：python, file-upload, ftp

我想使用 python 将大量文件从 windows 系统移动到 unix ftp 服务器。我有一个 csv，其中包含当前的完整路径和文件名以及要发送到的新基础浴（请参阅[此处](http://www.excelforum.com/excel-formulas-and-functions/896379-replace-illegal-database-characters-with-_-in-one-go.html?p=3107698)以获取示例数据集）。

我有一个使用 os.renames 的脚本在 Windows 中进行传输和目录创建，但可以找到一种通过 ftp 轻松完成的方法。

```
import os, glob, arcpy, csv, sys, shutil, datetime
top=os.getcwd()
RootOutput = top
startpath=top
FileList = csv.reader(open('FileList.csv'))
filecount=0
successcount=0
errorcount=0

# Copy/Move to FTP when required
ftp = ftplib.FTP('xxxxxx')
ftp.login('xxxx', 'xxxx')
directory = '/TransferredData'
ftp.cwd(directory)

##f = open(RootOutput+'\\Success_LOG.txt', 'a')
##f.write("Log of files Succesfully processed. RESULT of process run @:"+str(datetime.datetime.now())+"\n")
##f.close()
##
for File in FileList:
    infile=File[0]
    # local network ver
    #outfile=RootOutput+File[4]
    #os.renames(infile, outfile)

    # ftp netowrk ver
#    outfile=RootOutput+File[4]
#    ftp.mkd(directory)

    print infile, outfile 
```

[我在http://forums.arcgis.com/threads/17047-Upload-file-to-FTP-using-Python-ftplib](http://forums.arcgis.com/threads/17047-Upload-file-to-FTP-using-Python-ftplib)中尝试了该过程，但这是用于移动目录中的所有文件，我有旧的和新的完整的文件名，只需要它来创建中间目录。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:53:30.400

以下可能有效（未经测试）：

```
def mkpath(ftp, path):
    path = path.rsplit('/', 1)[0] # parent directory
    if not path:
        return
    try:
        ftp.cwd(path)
    except ftplib.error_perm:
        mkpath(ftp, path)
        ftp.mkd(path)

ftp = FTP(...)
directory = '/TransferredData/'

for File in FileList:
    infile = File[0]
    outfile = File[4].split('\\') # need forward slashes in FTP
    outfile = directory + '/'.join(outfile)
    mkpath(ftp, outfile)
    ftp.storbinary('STOR '+outfile, open(infile, 'rb')) 
```

# c++ - 并发写入同一缓存行中的不同位置

> ID：14641269
> 
> 赞同：7
> 
> 时间：2013-02-01T06:58:22.557
> 
> 标签：c++, caching, concurrency, c++11, memory-model

假设我有一个 C++11 应用程序，其中两个线程使用指向原始类型的简单指针写入*不同但附近的内存位置。*我能否确定这两个写入最终都会在内存中结束（可能在两者都达到 a 之后[`boost::barrier`](http://www.boost.org/doc/libs/1_52_0/doc/html/thread/synchronization.html#thread.synchronization.barriers)），或者是否存在两个 CPU 内核拥有自己的包含该数据的缓存行的风险，并且第二个内核将其修改刷新到 RAM会覆盖并撤消第一次写入所做的修改吗？

我希望缓存一致性能够在所有情况下以及在所有符合 C++11 内存模型的设置上为我解决这个问题，但我想确定一下。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T07:09:28.193

是的，缓存一致性机制会解决这个问题。这称为[虚假共享](http://en.wikipedia.org/wiki/False_sharing)，应通过更好地分离数据以提高性能来避免这种情况。

# c - 不确定是什么导致了这个错误，C 中的 Moneyconverter 程序

> ID：14641270
> 
> 赞同：1
> 
> 时间：2013-02-01T06:58:32.697
> 
> 标签：c, decimal, converter, currency

到目前为止，它可以读取更简单的十进制数字，例如 $10.00、$220.50、$14.25。但是当它变成像 12.76 美元、320.84 美元、47.53 美元这样的数字时，它甚至不会运行。

我想知道是什么原因造成的以及如何解决它。

这是.h文件

```
#define TWENTY_BILL 20.00
#define TEN_BILL 10.00
#define FIVE_BILL 5.00
#define ONE_BILL 1.00
#define QUARTER_COIN 0.25
#define DIME_COIN 0.10
#define NICKEL_COIN 0.05
#define PENNY_COIN 0.01 
```

这是 .c 文件

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>
#include "Value.h"

int main(int argc, char *argv[] ) {

 /*
 *Checks if argc has just one argument
 *If not, give error message
 */
if (argc < 2) {
    printf("Error: One argument required.");
    return 0;//If more than 1 argument, stops it
}//end if

/*
 * Converts argv[1] into double input
 * Then input2 is created as a float
 * input is transferred to input2
 *  Floor function is used, Multiplies
 *  input2 by 100 and then divide by 100 to
 *  leave only 2 decimal places
 *  Then Prints input2, %6.2f sets the field width
 *  for 2 decimal places
 */
double input = atof(argv[1]);
float input2;
input2 = input;
input2 = floor(input2 * 100) / 100;
printf("You have entered: %6.2f\n", input2);

/*
 * Creates variables for dollar
 * bill and coin set to 0
 */
int twentycount = 0;
int tencount = 0;
int fivecount = 0;
int onecount = 0;
int quartercount = 0;
int dimecount = 0;
int nickelcount = 0;
int pennycount = 0;

//Loops when input is greater than 0.0
while (input2 > 0.0)
    {
        /*Twenty Dollar Bill
         * When $20 is less than input2,
         * input2 - $20 = new input2
         * Add count to twentycount
         */
        if (TWENTY_BILL <= input2)
        {
            input2 = input2 - TWENTY_BILL;
            twentycount++;
        }//end if twenty
        /************************/
        /*Ten Dollar Bill
         * When $10 is less than input2,
         * input2 - $10 = new input2
         * Add count to tencount
         */
        else if (TEN_BILL <= input2)
        {
            input2 = input2 - TEN_BILL;
            tencount++;
        }//end if ten
        /***********************/
        /*Five Dollar Bill
         * When $5 is less than input2,
         * input2 - $5 = new input2
         * Add count to fivecount
         */
        else if (FIVE_BILL <= input2)
        {
            input2 = input2 - FIVE_BILL;
            fivecount++;
        }//end if five
        /**********************/
        /*One Dollar Bill
         * When $1 is less than input2,
         * input2 - $1 = new input2
         * Add count to onecount
         */
        else if (ONE_BILL <= input2)
        {
            input2 = input2 - ONE_BILL;
            onecount++;
        }//end if one
        /*********************/
        /*Quarter Coin
         * When $0.25 is less than input2,
         * input2 - $0.25 = new input2
         * Add count to quartercount
         */
        else if (QUARTER_COIN <= input2)
        {
            input2 = input2 - QUARTER_COIN;
            quartercount++;
        }//end if quarter
        /*********************/
        /*Dime Coin
         * When $0.10 is less than input2,
         * input2 - $0.10 = new input2
         * Add count to dimecount
         */
        else if (DIME_COIN <= input2)
        {
            input2 = input2 - DIME_COIN;
            dimecount++;
        }//end if dime
        /*********************/
        /*Nickel Coin
         * When $0.05 is less than input2,
         * input2 - $0.05 = new input2
         * Add count to nickelcount
         */
        else if (NICKEL_COIN <= input2)
        {
            input2 = input2 - NICKEL_COIN;
            nickelcount++;
        }//end if nickel
        /*********************/
        /*Penny Coin
         * When $0.01 is less than input2,
         * input2 - $0.01 = new input2
         * Add count to pennycount
         */
        else if (PENNY_COIN <= input2)
        {
            input2 = input2 - PENNY_COIN;
            pennycount++;
        }//end if penny
        /********************/
        /*
         * If anything else
         * Print Invalid Change
         */
        else
        {
            printf("Invalid change");
        }

    }//end while loop

    /*
     * If twentycount is more than 0
     * Print amount of $20 bills used
     */
    if (twentycount > 0)
    {
        printf("Amount of $20: %i\n", twentycount);
    }//end twentycount
    /*
     * If tencount is more than 0
     * Print amount of $10 bills used
     */
    if (tencount > 0)
    {
        printf("Amount of $10: %i\n", tencount);
    }//end tencount
    /*
     * If fivecount is more than 0
     * Print amount of $5 bills used
     */
    if (fivecount > 0)
    {
        printf("Amount of $5: %i\n", fivecount);
    }//end fivecount
    /*
     * If onecount is more than 0
     * Print amount of $1 bills used
     */
    if (onecount > 0)
    {
        printf("Amount of $1: %i\n", onecount);
    }//end onecount
    /*
     * If quartercount is more than 0
     * Print amount of $0.25 bills used
     */
    if (quartercount > 0)
    {
        printf("Amount of $0.25: %i\n", quartercount);
    }//end quartercount
    /*
     * If dimecount is more than 0
     * Print amount of $0.10 bills used
     */
    if (dimecount > 0)
    {
        printf("Amount of $0.10: %i\n", dimecount);
    }//end dimecount
    /*
     * If nickelcount is more than 0
     * Print amount of $0.05 bills used
     */
    if (nickelcount > 0)
    {
        printf("Amount of $0.05: %i\n", nickelcount);
    }//end nickelcount
    /*
     * If pennycount is more than 0
     * Print amount of $0.01 bills used
     */
    if (pennycount > 0)
    {
        printf("Amount of $0.01: %i\n", pennycount);
    }//end pennycount

return 0;
}//end main 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:15:10.523

我认为你的问题在于`input2 > 0.0`。类似的东西`input2 >= 0.00001`会更好。这是因为浮点数在内存中的表示方式。`(x+y) - x - y`不保证是`= 0`。

一种更简单的方法是通过乘以 100 将输入转换为整数。

我还建议您删除 while 循环并将其中的所有 if 语句替换为 while 循环。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:23:28.310

我相信你还没有涵盖结构。如果有，您需要重新访问您的代码。事实上，你可以用数组来改进，但结构数组会更好。

请记住，二进制浮点值不能准确地表示大多数十进制值。诸如 14.25 之类的确实具有精确的二进制表示，但 14.26 没有。（另请参阅：[C 编译器错误（浮点算术）？](https://stackoverflow.com/questions/4002411/c-compiler-bug-floating-point-arithmetic/4002495#4002495)对于观察“10 * 0.1 几乎永远不是 1.0”和“浮点数就像一小堆沙子；每次移动一个，你就会失去一点沙子并获得一点污垢”。）

您应该将这些值转换为整数美分。你也应该避免`float`；使用`double`，但`int`优先使用。

当我将`Invalid change`子句中的代码更改为：

```
 else
        {
            printf("Invalid change (%e)\n", input2);
            break;
        } 
```

然后，当我使用参数 14.26 和 14.48 运行程序时，我得到了输出：

```
$ ./change 14.26
You have entered:  14.26
Invalid change (2.288818e-07)
Amount of $10: 1
Amount of $1: 4
Amount of $0.25: 1
Amount of $0.01: 1
$ ./change 14.48
You have entered:  14.48
Invalid change (9.999549e-03)
Amount of $10: 1
Amount of $1: 4
Amount of $0.25: 1
Amount of $0.10: 2
Amount of $0.01: 2
$ 
```

请注意，错误消息包含换行符。该子句也终止了循环。我可能应该设置一个标志来指示存在错误并抑制更改的输出。14.26 的计算是正确的，但 14.48 的计算是空头一美分。如您所见，我的诊断打印出导致问题的值，因此很明显 14.26 剩余的金额很小，而 14.48 的剩余金额不到 1 美分。

使用数组和整数，您可以编写：

```
#include <stdlib.h>
#include <stdio.h>
#include <math.h>

int main(int argc, char *argv[] )
{
    for (int n = 1; n < argc; n++)
    {
        double input = atof(argv[n]);
        int    cents = (100 * input + 0.5);
        printf("You have entered: %6d.%.2d\n", cents / 100, cents % 100);
        int denom[] = { 2000, 1000, 500, 100, 25, 10, 5, 1, 0 };

        for (int i = 0; denom[i] != 0 && cents > 0; i++)
        {
            if (cents >= denom[i])
            {
                int count = cents / denom[i];
                cents = cents - count * denom[i];
                printf("Amount of $%2d.%.2d: %i\n", denom[i] / 100, denom[i] % 100, count);
            }
        }
    }

    return 0;
} 
```

输出：

```
$ ./change 14.48 14.26 14.47 14.31  14.00  20 10 5 1 0.25 0.10 0.05 0.01
You have entered:     14.48
Amount of $10.00: 1
Amount of $ 1.00: 4
Amount of $ 0.25: 1
Amount of $ 0.10: 2
Amount of $ 0.01: 3
You have entered:     14.26
Amount of $10.00: 1
Amount of $ 1.00: 4
Amount of $ 0.25: 1
Amount of $ 0.01: 1
You have entered:     14.47
Amount of $10.00: 1
Amount of $ 1.00: 4
Amount of $ 0.25: 1
Amount of $ 0.10: 2
Amount of $ 0.01: 2
You have entered:     14.31
Amount of $10.00: 1
Amount of $ 1.00: 4
Amount of $ 0.25: 1
Amount of $ 0.05: 1
Amount of $ 0.01: 1
You have entered:     14.00
Amount of $10.00: 1
Amount of $ 1.00: 4
You have entered:     20.00
Amount of $20.00: 1
You have entered:     10.00
Amount of $10.00: 1
You have entered:      5.00
Amount of $ 5.00: 1
You have entered:      1.00
Amount of $ 1.00: 1
You have entered:      0.25
Amount of $ 0.25: 1
You have entered:      0.10
Amount of $ 0.10: 1
You have entered:      0.05
Amount of $ 0.05: 1
You have entered:      0.01
Amount of $ 0.01: 1
$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:31:26.397

你已经到了浮点运算与我们在学校所想的不太一样的地方。:-)

要`input2`与零进行比较，您需要使用绝对 epsilon，其值是 FLT_EPSILON 的一些小倍数。发生这种情况是因为浮点数/双精度数不能精确地表示所有值，例如`double(.1) == 0.1000000000000000055511151231257827021181583404541015625`. 为了解决这个问题，您需要确定您的数字何时“足够接近”为零。

# ruby - ruby 中的实例变量

> ID：14641273
> 
> 赞同：1
> 
> 时间：2013-02-01T06:58:53.910
> 
> 标签：ruby

```
 class Sample
   attr_accessor :x,:y

   def initialize 
     @x = "x"
     y = "y"     
   end
 end     

 Sample.new.instance_variables  => [:@x] 

class Sample
  attr_accessor :x,:y

  def initialize 
     @x = "x"
     self.y = "y"     
  end
end  

Sample.new.instance_variables => [:@x, :@y] 
```

谁能让我知道这里发生了什么。为什么 y 第二次是 instance_variable？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T07:01:22.410

`attr_accessor :y`定义大致等价于的方法

```
def y
  @y
end

def y=(val)
  @y = val
end 
```

因此，当您分配给 时`self.y`，由于`attr_accessor`宏而分配给实例变量

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:01:03.090

为什么不？`self`是一个实例并且`y`是一个实例变量。在第一个示例中，`y`它只是一个普通的本地 var。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T07:02:06.277

这条线

```
attr_accessor :y 
```

创建几个方法

```
def y
  @y
end

def y= val
  @y = val
end 
```

因此，当您调用`y=`方法时，`@y`实例变量会立即生效。在第二个片段中，您正确调用了`y=`方法。但是在第一个中，您只需创建一个未使用的局部变量`y`（不调用 setter 方法并且不创建 ivar）。

# iphone - 如何挂钩 UIView 的动画？

> ID：14641278
> 
> 赞同：0
> 
> 时间：2013-02-01T06:59:57.673
> 
> 标签：iphone

我想在 UIView 的动画过程中发送我自己的消息。例如：

```
myView.alpha = 1.0;
[UIView animateWithDuration:2.0f animations:^{myView.alpha = 0.0;} completion:^(BOOL isFinished){}]; 
```

我想在 iOS 渲染特定 alpha 的动画帧时发送消息。

```
- (void) alphaChangedTo:(float) val
{
    [sendMyOwnMessage:val];
} 
```

由于动画是由iOS系统执行的，我可以通过钩子函数来完成我的任务吗？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:21:28.333

你试过动画代码块吗？

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:0.5];
[UIView setAnimationDelay:1.0];

[sendMyOwnMessage:val];

[UIView commitAnimations]; 
```

我不确定这是否是您正在寻找的东西.. 但我希望这会有所帮助.. 干杯！快乐编码。

# tsql - SQL 函数将 HTML 转换为简单的 HTML

> ID：14641285
> 
> 赞同：0
> 
> 时间：2013-02-01T07:00:38.187
> 
> 标签：tsql

我正在使用 WinForms，并且正在使用 RichTextBox 来使用粗体和斜体。当我插入数据库时​​，我将其作为 HTML 导入，以便以后能够将它们导出为 HTML 并获得相同的字体。

在尝试打印报告时，我使用了 HTMLTextBox，但似乎该控件只承认简单的标记语言，如果使用我得到的 HTML，则会崩溃。

所以为了完成我的工作，我设置了一个不可调整的字体，只允许他使用普通字体，粗体或斜体，这样CSS类在他使用所需字体时将保持不变。

我试图设置一个简化 HTML 的函数，以便能够翻译 HTML 以便在 HTMLTextBox 中被接纳。

我使用了这个函数，但它不起作用，我已经研究了 2 天，而且我是 SQL 新手。

```
DECLARE @HTMLpure nvarchar(max)  ='<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Untitled</title><style type="text/css">  .p_CC664AAA { margin: 0px 0px 12px 0px;text-align: left;text-indent: 0pt;padding: 0px 0px 0px 0px; }   .s_E5E150E4 { font-family: ''Calibri'';font-weight: bold;font-size: 16px;color: #000000; }   .s_6BF1D20F { font-family: ''Calibri'';font-style: normal;font-size: 16px;color: #000000; }   .s_F152B3A2 { font-family: ''Calibri'';font-style: italic;font-size: 16px;color: #000000; }   .s_40C97128 { font-family: ''Calibri'';font-style: normal;font-size: 16px;color: #000000;text-decoration: underline; }   </style></head><body><p class="p_CC664AAA"><span class="s_E5E150E4">BOLD</span><span class="s_6BF1D20F"> </span><span class="s_F152B3A2">iTALIC </span><span class="s_40C97128">UNDERLINE </span><span class="s_6BF1D20F">NORMAL</span></p></body></html>'
DECLARE @FinalHTML nvarchar(max)= ''
DECLARE @newHTMLpure nvarchar(max)

SET @HTMLpure = REPLACE (@HTMLpure, '<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Untitled</title><style type="text/css">' , '')
set @HTMLpure = replace (@HTMLpure, '.p_CC664AAA { margin: 0px 0px 12px 0px;text-align: left;text-indent: 0pt;padding: 0px 0px 0px 0px; } ','')
set @HTMLpure = replace (@HTMLpure, '.s_E5E150E4 { font-family: ''Calibri'';font-weight: bold;font-size: 16px;color: #000000; }','')
set @HTMLpure = replace (@HTMLpure , '.s_40C97128 { font-family: ''Calibri'';font-style: normal;font-size: 16px;color: #000000;text-decoration: underline; } ','')
set @HTMLpure = replace (@HTMLpure , '.s_6BF1D20F { font-family: ''Calibri'';font-style: normal;font-size: 16px;color: #000000; } ','')
set @HTMLpure = replace (@HTMLpure , '.s_F152B3A2 { font-family: ''Calibri'';font-style: italic;font-size: 16px;color: #000000; } ','')
set @HTMLpure = REPLACE (@HTMLpure , '.p_384D933F { margin: 0px 0px 0px 0px;text-align: left;text-indent: 0pt;padding: 0px 0px 0px 0px; }' , '')
set @HTMLpure = replace (@HTMLpure ,'</style></head><body><p class="p_CC664AAA">','')
set @HTMLpure = REPLACE (@HTMLpure ,'</style></head><body><p class="p_384D933F">' , '')
set @HTMLpure = replace (@HTMLpure ,'</p></body></html>','')

WHILE len(LTRIM(@HTMLpure)) > 0
BEGIN
   IF LTRIM(@HTMLpure) like  '<span class="s_E5E150E4">%'
   BEGIN
     SET @HTMLpure = replace (LTRIM(@HTMLpure) ,'<span class="s_E5E150E4">','<strong>')
     SET @HTMLpure=Stuff(@HTMLpure, CharIndex('</span>', @HTMLpure), Len('</span>'), '</strong>')
     SELECT @newHTMLpure = substring(LTRIM(@HTMLpure),charindex('<strong>',LTRIM(@HTMLpure))+len('<strong>'),charindex('</strong>',LTRIM(@HTMLpure))-charindex('<strong>',LTRIM(@HTMLpure))-len('<strong>'))
     SET @HTMLpure = REPLACE(@HTMLpure,'<strong>' + @newHTMLpure + '</strong>','')
     SET @newHTMLpure = '<strong>' + @newHTMLpure + '</strong>'
     SET @FinalHTML = @newHTMLpure
     SET @newHTMLpure = ''
    END

    ELSE IF LTRIM(@HTMLpure) like '<span class="s_F152B3A2">%'
    BEGIN
     SET @HTMLpure = replace (LTRIM(@HTMLpure) ,'<span class="s_F152B3A2">','<em>')
     SET @HTMLpure=Stuff(LTRIM(@HTMLpure), CharIndex('</span>', LTRIM(@HTMLpure)), Len('</span>'), '</em>')
     SELECT @newHTMLpure = substring(LTRIM(@HTMLpure),charindex('<em>',LTRIM(@HTMLpure))+len('<em>'),charindex('</em>',LTRIM(@HTMLpure))-charindex('<em>',LTRIM(@HTMLpure))-len('<em>'))
     SET @HTMLpure = REPLACE(LTRIM(@HTMLpure),'<em>' + @newHTMLpure + '</em>','')
     SET @newHTMLpure = '<em>' + @newHTMLpure + '</em>'
     SET @FinalHTML = @FinalHTML + @newHTMLpure
     SET @newHTMLpure = ''
   END
   ELSE IF LTRIM(@HTMLpure) like '<span class="s_40C97128">%'
   BEGIN
     SET @HTMLpure = replace (@HTMLpure ,'<span class="s_40C97128">','<u>')
     SET @HTMLpure=Stuff(@HTMLpure, CharIndex('</span>', @HTMLpure), Len('</span>'), '</u>')
     SELECT @newHTMLpure = substring(@HTMLpure,charindex('<u>',@HTMLpure)+len('<u>'),charindex('</u>',@HTMLpure)-charindex('<u>',@HTMLpure)-len('<u>'))
     SET @HTMLpure = REPLACE(@HTMLpure,'<u>' + @newHTMLpure + '</u>','')
     SET @newHTMLpure = '<u>' + @newHTMLpure + '</u>'
     SET @FinalHTML = @FinalHTML + @newHTMLpure
     SET @newHTMLpure = ''
    END
    ELSE IF LTRIM(@HTMLpure) like '<span class="s_6BF1D20F">%'
    BEGIN
     SET @HTMLpure=Stuff(LTRIM(@HTMLpure), CharIndex('<span class="s_6BF1D20F">', LTRIM(@HTMLpure)), Len('<span class="s_6BF1D20F">'), ' ')
     SET @HTMLpure=Stuff(LTRIM(@HTMLpure), CharIndex('</span>', LTRIM(@HTMLpure)), Len('</span>'), ' ')
     SET @HTMLpure = REPLACE(LTRIM(@HTMLpure),'' + @newHTMLpure + '','')    
     SELECT @newHTMLpure = substring(LTRIM(@HTMLpure),charindex(' ',LTRIM(@HTMLpure))+len(' '),charindex(' ',LTRIM(@HTMLpure))-charindex('% ',LTRIM(@HTMLpure))-len(' '))\
     IF @newHTMLpure = '' 
     BEGIN
    SET @newHTMLpure = '&NBSP;'
     END
            SET @FinalHTML  = @FinalHTML +  @newHTMLpure
        SET @newHTMLpure = ''
     END
            SET @FinalHTML = @FinalHTML + ' ' + @newHTMLpure
         END
            SET @HTMLpure = @FinalHTML
         END 
```

对于这么长的代码，我真的很抱歉，我知道我应该使用 vb 编码而不是 SQL，但我将其作为我在 SQL 中的练习

请帮忙，

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:17:19.450

好的，这里有几件事。

1.  将最抽象的数据版本存储在数据库中。即，如果您需要存储有关文本排版的信息，则需要诸如`face`, `size`, `is_bold`, &c 之类的属性。这将使您的数据适用于所有可能的情况（您应该更有可能更改前端而不是数据架构）

2.  渲染数据的逻辑应该与该数据分开。当您提取带有相关属性 ( `face`...) 的文本时，呈现为`HTML`或**任何其他演示格式**（例如您`TextBox`期望的任何格式）应尽可能靠近演示点进行。

与演示相关的代码位于您的 GUI 中。

数据进入您的数据库。

# openstreetmap - GroundOverlays 之间的空间使用 Google Map Android API v2

> ID：14641286
> 
> 赞同：2
> 
> 时间：2013-02-01T07:00:38.913
> 
> 标签：openstreetmap, android-maps-v2

我已经使用 Openstreetmap 瓦片作为 GroundOverlays 使用 Google Map Android API v2（即 osmdroid 不是一个选项）创建了一个离线地图，但有一个小问题：在缩放级别大于 14 时，一些瓦片之间有 1-3 像素空间他们。其他瓷砖完美排列。它们之间有空格和没有空格似乎是随机的。

我使用 JTileDownloader 下载瓦片，然后获取下载并放置在设备文件系统中的所需瓦片（使用[此处描述的技术）](http://wiki.openstreetmap.org/wiki/Slippy_map_tilenames)，然后获取瓦片的 LatLngBounds，然后将它们放在一个循环中，如下所示：

```
groundOverlay = mMap.addGroundOverlay(new GroundOverlayOptions()
                    .image(BitmapDescriptorFactory.fromBitmap(mBitmapImage))
                    .positionFromBounds(tileBoundsArray[i])
                    .transparency((float)0)); 
```

我已经验证了瓷砖的纬度和经度应该对齐。我还验证了所有位图的大小相同。我还使用 UrlTileProvider 尝试了这个特定的图块集，它工作正常，所以图块没有问题。这几天我一直在为此苦苦挣扎，希望有任何建议。我在其他任何地方都没有发现任何解决这个问题的地方。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T18:55:26.210

我终于找到了这个问题的答案。我必须在瓦片的纬度上指定地图瓦片的宽度（以米为单位）（我使用瓦片的中心）。谷歌地图使用墨卡托投影，这意味着地图的宽度取决于纬度。您可以使用 GoundOverlay.setDimensions(width) 指定宽度。 [本页](http://msdn.microsoft.com/en-us/library/aa940990.aspx)解释了如何计算宽度。

# php - 在嵌套数组中使用 substr_count

> ID：14641287
> 
> 赞同：0
> 
> 时间：2013-02-01T07:00:48.640
> 
> 标签：php, arrays

我正在尝试使用 substr_count 从文本块中提取某些关键字组，并让它计算每个组中的单词出现的次数。

我创建了一个名为 $keywords 的数组，其中包含另一组数组，其中包含我正在寻找的实际关键字。

这是我当前的代码：

```
$textDump = "random bunch of text";

$keyWordsSports = array("nba", "raptor", "ufc", "basektball", "gym", "mma", "realgm", "running");
$keyWordsTech = array("apple", "rim", "blackberry", "facebook", "twitter", "google" );
$keywords = array($keyWordsSports, $keyWordsTech);
foreach ($keywords as $item){
    foreach ($item as $newItem){
        $number += substr_count(strtolower($textDump), strtolower($newItem));
        echo $number;
    };
}; 
```

我的问题是它计算所有数组中的所有关键字并将所有内容加在一起，我想要的只是每组关键字的总数。关于我应该做什么的任何想法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T07:05:14.740

```
$keywords = array("sports"=>$keyWordsSports, "tech"=>$keyWordsTech);
$count=array("sports"=>0,"tech"=>0);
foreach ($keywords as $key=>$item){
    foreach ($item as $newItem){
        $count[$key] += substr_count(strtolower($textDump), strtolower($newItem));
    }
}
print_r($count); 
```

**编辑**：[现场示例](http://3v4l.org/3UNXA)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:07:33.543

试试这个 ：

```
$textDump = "raptor bunch raptor basektball";

$keyWordsSports = array("nba", "raptor", "ufc", "basektball", "gym", "mma", "realgm", "running");
$keyWordsTech = array("apple", "rim", "blackberry", "facebook", "twitter", "google" );
$keywords = array($keyWordsSports, $keyWordsTech);
$matches=array();
foreach ($keywords as $item){
    foreach ($item as $newItem){
        $number = substr_count(strtolower($textDump), strtolower($newItem));
        if($number>0)
        {
        $matches[strtolower($newItem)]=$number;
        }
    };
};
print_r($matches); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:31:27.917

你只需要 像这样`echo`从`$number`外到内，`foreach`

```
$textDump = "random bunch of text";
$keyWordsSports = array("nba", "raptor", "ufc", "basektball", "gym", "mma", "realgm", "running");
$keyWordsTech = array("apple", "rim", "blackberry", "facebook", "twitter", "google" );
$keywords = array($keyWordsSports, $keyWordsTech);
foreach ($keywords as $item) {
    foreach ($item as $newItem) {
        $number += substr_count(strtolower($textDump), strtolower($newItem));
    }
    echo $number;
} 
```

# java - 模式帮助 Java

> ID：14641295
> 
> 赞同：-4
> 
> 时间：2013-02-01T07:01:16.333
> 
> 标签：java

我完全不知道如何制作一个执行此操作的 java 程序。可以向我解释我将如何去做吗？

> 你要我画什么图案：4
> 
> 你想要什么尺寸这个图案：23

```
 *
                    *
                  *
                *
              *
            *
          *
        *
      *               *
    *                 *
  *                   *
* * * * * * * * * * * * * * *
                      *
                      *
                      *
                      *
                      *
                      *
                      *
                      *
                      *
                      *
                      * 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:20:17.103

我敢肯定，你的老师会很高兴：

```
 boolean[][] f = new boolean[24][15];
    for (int i = 0; i < 12; i++)
        f[12 - i][i] = f[12][i] = f[9 + i][11] = f[12][14 - i] = f[23-i][11] = true;

    for (boolean[] r : f) {
        for (boolean b : r) {
            System.out.print(b ? "* " : "  ");
        }
        System.out.println();
    } 
```

# c# - 当底层停用时，Ninject 是否会停用传递依赖？

> ID：14641303
> 
> 赞同：1
> 
> 时间：2013-02-01T07:01:44.117
> 
> 标签：c#, asp.net, .net, dependency-injection, ninject

我得到了`IUnitOfWork`接口（我不会向你展示它的实现）：

```
public interface IUnitOfWork : IDisposable
{
    ...
} 
```

注意`IDisposable`继承。此外，我得到了具有适当实现的服务：

```
public interface IBusinessLogicService
{
    ...
}

public sealed class BusinessLogicService : IBusinessLogicService
{
    // Dependency is auto-injected by ninject
    // because of the custom injection heuristic.
    public IUnitOfWork UnitOfWork { get; set; }

    ...
} 
```

我们去ninject绑定：

```
kernel.Bind<IUnitOfWork>().To<UnitOfWork>().InRequestScope();
kernel.Bind<IBusinessLogicService>().To<BusinessLogicService>(); 
```

如您所见，ninject 将`IUnitOfWork`在请求结束时自动停用实例并释放它。

现在，问题是，
ninject 是否**还会停用**（并在下一个 Web 请求时重新激活）**依赖**于停用对象的实例（如`IBusinessLogicService`） ？

 *** * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:52:51.353

**不，如果有**范围，Ninject 将在收集范围时停用对象。瞬态对象不被 Ninject 跟踪，并且被认为是在外部管理的[并且在需要的地方创建新的实例]。

一个作用域的对象的停用点[通常由作用域对象何时被垃圾回收决定](http://kohari.org/2009/03/06/cache-and-collect-lifecycle-management-in-ninject-20/)。

因为`InRequestScope`在使用 ASP.NET 管道挂钩的请求结束时，确定性地会发生停用。

[另请参阅`Ninject.Extensions.NamedScope`](https://github.com/ninject/ninject.extensions.namedscope/wiki)此空间中的更多选项

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:01:16.273

Ninject 只负责依赖注入。它将根据内核绑定使用类实例实例化接口变量。它不负责停用使用 Ninject 创建的实例。对象的停用将遵循正常的 asp.net 框架的对象销毁周期。**

# java - 将 Perl 脚本中的值返回到 java 表单

> ID：14641305
> 
> 赞同：1
> 
> 时间：2013-02-01T07:01:46.237
> 
> 标签：java, perl

我使用以下方法从 java 调用 Perl 脚本：

```
{
  Process process;
  process= Runtime.getRuntime().exec("perl readoldVersionFromFile.pl ");
} 
```

从 Perl 脚本返回的值是一个字符串，应该用于设置 java 表单中 textField 的文本。

我的方法：在 Perl 脚本中，我打印要返回的值

```
{
  print $cfile;
   } 
```

在java中我得到了进程的输出流：

```
{ 
  out = process.getOutputStream();
 } 
```

现在我的问题是我无法从变量中获取字符串。有没有其他方法可以做到这一点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:15:26.880

看看[文档](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#getOutputStream%28%29)

公共抽象输出流 getOutputStream();

这个方法返回一个OutputStream，你怎么能从一个OutputStream中读取呢？该方法返回连接到子进程正常输入的输出流。流的输出通过管道传输到由 Process 对象表示的进程的标准输入中。

您应该尝试[Process#getInputStream()](http://docs.oracle.com/javase/7/docs/api/java/lang/Process.html#getInputStream%28%29)

# node.js - 如何完全防止 Connect/Express 静态中间件中的 HTTP 304 响应？

> ID：14641308
> 
> 赞同：16
> 
> 时间：2013-02-01T07:02:00.703
> 
> 标签：node.js, node.js-connect

有时在开发过程中，阻止 HTTP 304 响应（有利于 200 响应）并导致[Connect/Express 静态中间件](http://www.senchalabs.org/connect/static.html)从文件系统读取每个响应，而不是进行任何缓存，这将是*非常好的。*

我尝试过使用`maxAge`0 和 1 的值，但无济于事：

```
app.use(express.static(__dirname + '/public', { maxAge: 1 })) 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-10-03T20:32:23.263

通过在开发过程中执行此操作，我得到了 200 条回复：

```
var express = require('express');
app = express();
app.use(function(req, res, next) {
  req.headers['if-none-match'] = 'no-match-for-this';
  next();    
}); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2014-03-16T06:20:51.330

```
app.disable('etag'); 
```

防止“etag”响应可能会有所帮助

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-13T00:59:27.280

它会在每次响应时从文件系统中读取。只是如果请求 ETAG 与响应 ETAG 匹配，它不会发送响应的正文，因为它不必发送。它是具有相同哈希的相同文件。这就是 304 响应的工作原理。

为什么要阻止 304 响应？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T07:02:00.703

此解决方案只是一种解决方法。[您可以通过在 Chrome 中禁用缓存来](https://stackoverflow.com/questions/5690269/disabling-chrome-cache-for-website-development)从浏览器端解决问题。如果您需要在 Chrome 以外的地方工作，例如 iOS 上的 Safari，这对您没有帮助。

# sql - SQL - 用户管理 --> 通过脚本导出/导入用户

> ID：14641313
> 
> 赞同：0
> 
> 时间：2013-02-01T07:02:06.477
> 
> 标签：sql, oracle, migration, export, user-management

我工作的公司正在将他们的数据库从 Oracle 10g 迁移到 11g。周一我们要清理我们的开发数据库并将生产数据库克隆到该存储。

又来了。我认为我的第二个任务有点复杂。在开发数据库上，我们有大约 200 个用户，在生产数据库上大约有 1500 个用户。现在我将编写一个脚本，该脚本应该从我们的开发数据库中返回所有用户并导出它们。之后，另一个脚本应该搜索生产数据库的所有用户，不带任何对象并将其删除，但不包括系统模式或用户模式，并导入开发数据库的旧用户。有没有办法在脚本或查询中完成所有这些事情？

最好的祝福，

Chris（IT 学生，但总数据库新手）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:58:27.643

要将您的用户从开发迁移到生产，您应该使用[数据泵 import/export](http://docs.oracle.com/cd/E11882_01/server.112/e22490/dp_overview.htm#SUTIL100)。您可以使用它来指定要导出/导入的用户。这也将带来他们的物品、特权等，因此您可以确保您拥有一切。

要删除没有对象的用户，请运行以下命令以生成脚本：

```
SELECT 'drop user ' || username || ';' 
FROM   dba_users u
where  not exists (select null 
                   from   dba_objects o 
                   where  o.owner = u.username); 
```

然后，您可以查看此输出，检查它是否仅删除您期望的用户并运行该脚本。

# javascript - html中的脚本标签语法

> ID：14641315
> 
> 赞同：2
> 
> 时间：2013-02-01T07:02:12.593
> 
> 标签：javascript, html

> **可能重复：**
> [为什么自闭合脚本标签不起作用？](https://stackoverflow.com/questions/69913/why-dont-self-closing-script-tags-work)

我知道，这是一个非常基本的问题。但我承认我不知道这个问题的答案。我正在尝试在我的 html 中包含外部 js 文件。以下是两种情况。

```
<script src="jquery-1_9_0.js"></script><!-- its working -->

<script src="jquery-1_9_0.js"/><!-- not working --> 
```

为什么会这样？至于 html 输入，它在两种情况下都有效

```
<input type="text" value="enter value"/><!-- works -->
<input type="text" value="enter value"></input><!-- Also works --> 
```

我能知道原因吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T07:32:51.447

来自[XHTML 1 规范](http://www.w3.org/TR/xhtml1/#C_3)

```
C.3\. Element Minimization and Empty Element Content

Given an empty instance of an element whose content model is not EMPTY 
(for example, an empty title or paragraph) do not use the minimized 
form (e.g. use <p> </p> and not <p />). 
```

并来自[XHTML 1 DTD（严格）](http://www.w3.org/TR/xhtml1/dtds.html#a_dtd_XHTML-1.0-Strict)

```
<!ELEMENT script (#PCDATA)>
<!ELEMENT textarea (#PCDATA)>
<!ELEMENT hr EMPTY>
<!ELEMENT br EMPTY> 
```

这意味着未指定为的元素`EMPTY`不能自闭合。你可以写`<hr/>`or `<br/>`，但你不能写`<script />`or `<textarea />`。将它们视为其内容的容器。容器不能自动关闭。

# ios - 在集合中高效搜索 NSString

> ID：14641318
> 
> 赞同：5
> 
> 时间：2013-02-01T07:02:35.457
> 
> 标签：ios, objective-c, search, nsstring

考虑一组数千个`NSString`对象，在内存中。

`NSString`在集合中搜索特定对象的最有效方法是什么？使用`NSDictionary`就够了吗？还是保证`NSSet`' 的搜索是 O(1) （找不到任何这样说的文档）？

同样的策略是否适用于`NSData`对象？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T08:41:37.767

[此页面](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/Collections/Articles/Sets.html#//apple_ref/doc/uid/20000136-SW1)显示以下有关集合的注释：

> 注意：如果集合中的对象具有良好的哈希函数，则访问元素、设置元素和删除元素都需要恒定的时间。如果散列函数很差（导致频繁的散列冲突），这些操作会占用线性时间。Foundation 中的 NSString 等类具有良好的散列函数。

因此，`NSString`根据上述情况，您可以期待恒定的时间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:18:12.353

`NSSet`在其实现中使用哈希表并测试哈希冲突中所有元素之间的相等性。因此，性能与其元素的哈希效率直接相关。

# c# - wpf（离线）应用程序c#的更新问题

> ID：14641320
> 
> 赞同：1
> 
> 时间：2013-02-01T07:02:43.653
> 
> 标签：c#, wpf, database, visual-studio-2010, updates

嗨，我几周前创建了一个 WPF（visual studio 2010）应用程序，它在我的电脑上本地离线运行。我当然连接到数据库（MS SQL .mdf），它运行良好。但是现在我需要对应用程序进行更新，我想知道该怎么做对我来说主要问题是如何不再从空数据库开始如何进行更新并使用已经填充的数据库？对我可以阅读某些内容或一些示例的任何参考。THX 编辑：如果可能的话，我想不使用互联网进行更新。数据库结构是一样的，我只是对后面的代码做了一些更改......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:18:57.837

我为此使用 SchemaCompares。

我创建了一个包含所有更改的新数据库（我使用本地数据库）。之后，我使用 VS SchemaCompare 来更新我的旧版本。

SchemaCompare 匹配两者之间的差异并更新旧的。 [MSDN](http://msdn.microsoft.com/en-us/library/aa833435%28v=vs.100%29.aspx)

比较还可以使用框架中的默认值（int=0，bool=false...）填充不可为空的新列（本机类型）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:13:08.813

您需要一个`SQL Schema Compare`工具来比较旧的 SQL 模式和新的 SQL 模式。有各种各样的工具，实际上`Visual Studio`甚至有[一个](http://www.mssqltips.com/sqlservertip/2089/sql-schema-comparison-with-visual-studio-2010/)。

但是对于复杂的场景，您可能有[免费的替代品](https://stackoverflow.com/questions/193438/free-tool-to-compare-sql-server-tables)

您只需定义数据库之间的模式更改，并编辑生成的差异 SQL 以保留数据。

# javascript - 只有我的 for 循环中的最后一个数据分配

> ID：14641322
> 
> 赞同：0
> 
> 时间：2013-02-01T07:03:09.240
> 
> 标签：javascript

嘿，我有一个像这样的简单循环：

```
for(var i in nodes) {
    var d = document.createElement('div');
    d.className = 'box';
    d.id = 'node' + i;
    document.getElementById('node').appendChild(d);
    document.getElementById('node'+ i).innerHTML = nodes[i].name;
    document.getElementById('node'+ i).addEventListener('mousedown', function() { 
        var info = nodes[i]; display_parent(info);
    }, false);
}

function display_parent(data){
    console.log(data);
} 
```

问题是所有的 div 都持有相同的信息`the last one in the loop`，我试图将数据分配给一个局部变量，`info`但它仍然不起作用。

有什么想法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:11:10.750

这是由于“mousedown”事件处理程序中的关闭。你必须使用这样的东西：

```
document.getElementById('node'+i).addEventListener('mousedown',
  (function(node) {
    return (function() {
       display_parent(node);
     });
  }(nodes[i])), false); 
```

# jquery - 使用 JSON 为元素分配 id

> ID：14641326
> 
> 赞同：0
> 
> 时间：2013-02-01T07:03:29.393
> 
> 标签：jquery, json

我只是想知道是否有任何方法可以将 id 分配给 JSON 中的复选框，以便我可以在 JQuery 中使用此 id 以确保在选中/选中复选框时我正在采取一些行动。此复选框是使用 JSON 创建的。如果有一种方法可以为创建的复选框分配 id，那么在选中复选框时使用 JQuery 并分配“侦听器”类型的操作会更容易。all i want to do is that, when the checkbox with the label 'I would like to provide input' is selected, i would like to display a textbox for the user to enter the input path. 如果选中带有“我不想提供输入”标签的第二个复选框，则不显示任何文本框。

```
"window6": {
    "true": {
        "label": "I would like to provide input",
        "isEditable": "false",
        "name": "check_1",
        "type": "checkbox"
    },
    "false": {
        "label": "I would not like to provide input",
        "isEditable": "false",
        "name": "check_2",
        "type": "checkbox"
    }
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:11:50.873

如果要使用 jQuery 为元素分配 ID，只需使用[attr()](http://api.jquery.com/attr/)方法即可：

```
$(":checkbox").attr("id", "yourId"); 
```

但是在查看您的问题时，您正在动态创建复选框，并且您希望添加 ID 以创建侦听器。您可以在创建 DOM 元素时更好地一起创建它，因此解析器无需搜索 DOM 即可找到刚刚创建的元素。例子：

```
var elem = $("<input type='checkbox'>Checkbox</input>");
elem.click(function() {
    alert("clicked!"); 
});
elem.appendTo($("body")); 
```

[JSfiddle](http://jsfiddle.net/PXczL/)。

# python - 请帮助我使用拆分方法打印这些

> ID：14641338
> 
> 赞同：-5
> 
> 时间：2013-02-01T07:04:15.580
> 
> 标签：python, split

我是 python 新手。我对功能有一点怀疑`split()`。我想在字符串“成功”之后拆分行。我如何使用拆分方法来做到这一点。

```
File system activity

Opened files...

C:\27e7a559f98a0fbe14ba3a3cd8b4f3c2400c6581134a97c382e9d465b807fa87 (successful)C:\Documents and Settings\&lt;USER&gt;\Local Settings\Application Data\tac.exe (successful)C:\Documents and Settings\&lt;USER&gt;\Local Settings\Application Data\1pb78m8n6he1l1565b3k36w7o7of8ksb88y53s63tpqg0vl (successful)C:\Documents and Settings\All Users\Application Data\1pb78m8n6he1l1565b3k36w7o7of8ksb88y53s63tpqg0vl (successful)C:\DOCUME~1\&lt;USER&gt;~1\LOCALS~1\Temp\1pb78m8n6he1l1565b3k36w7o7of8ksb88y53s63tpqg0vl (successful)C:\Documents and Settings\&lt;USER&gt;\Templates\1pb78m8n6he1l1565b3k36w7o7of8ksb88y53s63tpqg0vl (successful)\\.\PIPE\lsarpc (successful)C:\WINDOWS\system32\wscui.cpl (successful)C:\WINDOWS\system32\xpsp2res.dll (successful)C:\WINDOWS\system32\inetcpl.cpl (successful)\\.\Ip (successful)C:\WINDOWS\system32\drivers\etc\hosts (successful)C:\WINDOWS\system32\rsaenh.dll (successful)\\.\WMIDataDevice (successful)C:\WINDOWS\Registration\R000000000007.clb (successful)C:\WINDOWS\WindowsShell.manifest (successful)C:\Documents and Settings\&lt;USER&gt;\Local Settings\Application Data\GDIPFONTCACHEV1.DAT (successful)C:\WINDOWS\FONTS\TREBUC.TTF (successful)C:\WINDOWS\FONTS\TREBUCBD.TTF (successful)C:\WINDOWS\FONTS\TREBUCIT.TTF (successful)C:\WINDOWS\FONTS\TREBUCBI.TTF (successful)C:\WINDOWS\system32\shdocvw.dll (successful)C:\WINDOWS\system32\stdole2.tlb (successful)C:\WINDOWS\FONTS\TAHOMA.TTF (successful)C:\WINDOWS\FONTS\TAHOMABD.TTF (successful) 
```

输出应该是这样的

```
File system activity

Opened files...

C:\27e7a559f98a0fbe14ba3a3cd8b4f3c2400c6581134a97c382e9d465b807fa87 (successful)

C:\Documents and Settings\&lt;USER&gt;\Local Settings\Application Data\tac.exe (successful) 
```

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:13:03.083

```
In [31]: output = r"C:\27e7a559f98a0fbe14ba3a3cd8b4f3c2400c6581134a97c382e9d465b807fa87 (successful)C:\Documents and Settings\&lt;USER&gt;\Local Settings\Application Data\tac.exe (successful)C:\Documents and Settings\&lt;USER&gt;\Local Settings\Application Data\1pb78m8n6he1l1565b3k36w7o7of8ksb88y53s63tpqg0vl (successful)C:\Documents and Settings\All Users\Application Data\1pb78m8n6he1l1565b3k36w7o7of8ksb88y53s63tpqg0vl (successful)C:\DOCUME~1\&lt;USER&gt;~1\LOCALS~1\Temp\1pb78m8n6he1l1565b3k36w7o7of8ksb88y53s63tpqg0vl (successful)C:\Documents and Settings\&lt;USER&gt;\Templates\1pb78m8n6he1l1565b3k36w7o7of8ksb88y53s63tpqg0vl (successful)\\.\PIPE\lsarpc (successful)C:\WINDOWS\system32\wscui.cpl (successful)C:\WINDOWS\system32\xpsp2res.dll (successful)C:\WINDOWS\system32\inetcpl.cpl (successful)\\.\Ip (successful)C:\WINDOWS\system32\drivers\etc\hosts (successful)C:\WINDOWS\system32\rsaenh.dll (successful)\\.\WMIDataDevice (successful)C:\WINDOWS\Registration\R000000000007.clb (successful)C:\WINDOWS\WindowsShell.manifest (successful)C:\Documents and Settings\&lt;USER&gt;\Local Settings\Application Data\GDIPFONTCACHEV1.DAT (successful)C:\WINDOWS\FONTS\TREBUC.TTF (successful)C:\WINDOWS\FONTS\TREBUCBD.TTF (successful)C:\WINDOWS\FONTS\TREBUCIT.TTF (successful)C:\WINDOWS\FONTS\TREBUCBI.TTF (successful)C:\WINDOWS\system32\shdocvw.dll (successful)C:\WINDOWS\system32\stdole2.tlb (successful)C:\WINDOWS\FONTS\TAHOMA.TTF (successful)C:\WINDOWS\FONTS\TAHOMABD.TTF (successful)"

In [32]: while output:
   ....:     left, mid, output = output.partition("(successful)")
   ....:     print left+mid
   ....:     
C:\27e7a559f98a0fbe14ba3a3cd8b4f3c2400c6581134a97c382e9d465b807fa87 (successful)
C:\Documents and Settings\&lt;USER&gt;\Local Settings\Application Data\tac.exe (successful)
C:\Documents and Settings\&lt;USER&gt;\Local Settings\Application Data\1pb78m8n6he1l1565b3k36w7o7of8ksb88y53s63tpqg0vl (successful)
C:\Documents and Settings\All Users\Application Data\1pb78m8n6he1l1565b3k36w7o7of8ksb88y53s63tpqg0vl (successful)
C:\DOCUME~1\&lt;USER&gt;~1\LOCALS~1\Temp\1pb78m8n6he1l1565b3k36w7o7of8ksb88y53s63tpqg0vl (successful)
C:\Documents and Settings\&lt;USER&gt;\Templates\1pb78m8n6he1l1565b3k36w7o7of8ksb88y53s63tpqg0vl (successful)
\\.\PIPE\lsarpc (successful)
C:\WINDOWS\system32\wscui.cpl (successful)
C:\WINDOWS\system32\xpsp2res.dll (successful)
C:\WINDOWS\system32\inetcpl.cpl (successful)
\\.\Ip (successful)
C:\WINDOWS\system32\drivers\etc\hosts (successful)
C:\WINDOWS\system32\rsaenh.dll (successful)
\\.\WMIDataDevice (successful)
C:\WINDOWS\Registration\R000000000007.clb (successful)
C:\WINDOWS\WindowsShell.manifest (successful)
C:\Documents and Settings\&lt;USER&gt;\Local Settings\Application Data\GDIPFONTCACHEV1.DAT (successful)
C:\WINDOWS\FONTS\TREBUC.TTF (successful)
C:\WINDOWS\FONTS\TREBUCBD.TTF (successful)
C:\WINDOWS\FONTS\TREBUCIT.TTF (successful)
C:\WINDOWS\FONTS\TREBUCBI.TTF (successful)
C:\WINDOWS\system32\shdocvw.dll (successful)
C:\WINDOWS\system32\stdole2.tlb (successful)
C:\WINDOWS\FONTS\TAHOMA.TTF (successful)
C:\WINDOWS\FONTS\TAHOMABD.TTF (successful) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:30:06.620

```
output = r"C:\27e7a559f98a0fbe14ba3a3cd8b4f3c2400c6581134a97c382e9d465b807fa87 (successful)C:\Documents and Settings\&lt;USER&gt;\Local Settings\Application Data\tac.exe (successful)C:\Documents and Settings\&lt;USER&gt;\Local Settings\Application Data\1pb78m8n6he1l1565b3k36w7o7of8ksb88y53s63tpqg0vl (successful)C:\Documents and Settings\All Users\Application Data\1pb78m8n6he1l1565b3k36w7o7of8ksb88y53s63tpqg0vl (successful)C:\DOCUME~1\&lt;USER&gt;~1\LOCALS~1\Temp\1pb78m8n6he1l1565b3k36w7o7of8ksb88y53s63tpqg0vl (successful)C:\Documents and Settings\&lt;USER&gt;\Templates\1pb78m8n6he1l1565b3k36w7o7of8ksb88y53s63tpqg0vl (successful)\\.\PIPE\lsarpc (successful)C:\WINDOWS\system32\wscui.cpl (successful)C:\WINDOWS\system32\xpsp2res.dll (successful)C:\WINDOWS\system32\inetcpl.cpl (successful)\\.\Ip (successful)C:\WINDOWS\system32\drivers\etc\hosts (successful)C:\WINDOWS\system32\rsaenh.dll (successful)\\.\WMIDataDevice (successful)C:\WINDOWS\Registration\R000000000007.clb (successful)C:\WINDOWS\WindowsShell.manifest (successful)C:\Documents and Settings\&lt;USER&gt;\Local Settings\Application Data\GDIPFONTCACHEV1.DAT (successful)C:\WINDOWS\FONTS\TREBUC.TTF (successful)C:\WINDOWS\FONTS\TREBUCBD.TTF (successful)C:\WINDOWS\FONTS\TREBUCIT.TTF (successful)C:\WINDOWS\FONTS\TREBUCBI.TTF (successful)C:\WINDOWS\system32\shdocvw.dll (successful)C:\WINDOWS\system32\stdole2.tlb (successful)C:\WINDOWS\FONTS\TAHOMA.TTF (successful)C:\WINDOWS\FONTS\TAHOMABD.TTF (successful)"

sep='(successful)'
ls=output.split(sep)
for i in ls[:-1]:
    print i+sep
print ls[-1] 
```

# c# - 在 C# 中允许反斜杠的正则表达式

> ID：14641340
> 
> 赞同：12
> 
> 时间：2013-02-01T07:04:22.270
> 
> 标签：c#, regex

谁能为我提供正则表达式来验证字符串，它只允许除反斜杠之外的任何特殊字符。我试过了

```
var regexItem = new Regex("^[a-zA-Z0-9\\\ ]*$"); 
```

但这似乎不起作用

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-02-01T07:07:47.060

反斜杠需要在正则表达式中进行转义 - 并且它们*也*需要在 C# 中进行转义，除非您使用[逐字字符串文字](http://msdn.microsoft.com/en-gb/library/vstudio/362314fe.aspx)。因此，其中任何一个都应该起作用：

```
var regexItem = new Regex(@"^[a-zA-Z0-9\\ ]*$");
var regexItem = new Regex("^[a-zA-Z0-9\\\\ ]*$"); 
```

这两者都确保将以下字符串内容传递给`Regex`构造函数：

```
^[a-zA-Z0-9\\ ]*$ 
```

然后`Regex`代码将看到双反斜杠并将其视为“我真的想匹配反斜杠字符”。

基本上，您总是需要区分“要传递给正则表达式引擎的字符串内容”和“源代码中的字符串文字表示”。（当然，这不仅适用于正则表达式。调试器无法通过在 Watch 窗口等中转义来提供帮助。）

编辑：现在问题已被编辑以表明您最初有*三个*反斜杠，这只是无效的 C#。我*怀疑*您的目标是“带有三个反斜杠的字符串”，这将是以下任何一种：

```
var regexItem = new Regex(@"^[a-zA-Z0-9\\\ ]*$");
var regexItem = new Regex("^[a-zA-Z0-9\\\\\\ ]*$"); 
```

...但就正则表达式而言，您不需要转义空格。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-02-01T07:06:34.237

您要么需要对其进行双重转义（一次用于 C#，一次用于正则表达式引擎）：

```
var regexItem = new Regex("^[a-zA-Z0-9\\\\ ]*$"); 
```

或者您可以使用 C# 的[逐字字符串功能](http://msdn.microsoft.com/en-us/library/vstudio/362314fe.aspx)（注意 @）：

```
var regexItem = new Regex(@"^[a-zA-Z0-9\\ ]*$"); 
```

在逐字字符串中，反斜杠不会被解释为开始转义序列，因此您只需为 Regex 引擎转义一次。

我假设您当前的代码无法编译。它应该说类似于“无法识别的转义序列”。
这样做的原因是您有三个反斜杠，后跟一个空格。前两个反斜杠被解释为表示反斜杠的转义序列，但第三个反斜杠被解释为以空格作为第二个字符的转义序列的开头。这样的转义序列不存在，导致错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:06:43.047

您必须`\`通过添加**4** `\s`来匹配单个`\`.

# php - PHP查找一个时间跨度有多少小时在另一个时间跨度内

> ID：14641342
> 
> 赞同：0
> 
> 时间：2013-02-01T07:04:31.677
> 
> 标签：php, date, datetime, time

我试图找到一种方法来确定一个时间跨度是部分还是完全在另一个时间跨度内。例如：

我有时间条目：

*   周一 18:30:00 至周二 05:00:00，
*   周一 23:00:00 至周二 05:00:00，
*   周一 20:00:00 至周二 08:00:00，
*   周一 00:00:00 至周二 08:00:00，

并且需要找到，对于每一个，有多少时间在 22:00:00 到 06:00:00 的时间跨度内。输出需要是：

07:00:00、06:00:00、08:00:00、06:00:00。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:34:05.523

你正在寻找的是[`DateTime::diff`](http://www.php.net/manual/en/datetime.diff.php)它返回一个实例[`DateInterval`](http://php.net/manual/en/class.dateinterval.php)

这里有一个小例子：

```
$d1 = new DateTime("Monday 18:30:00");
$d2 = new DateTime("Tuesday 05:00:00");

$limit1 = new DateTime("Monday 22:00:00");
$limit2 = new DateTime("Tuesday 06:00:00");

$within1 = $d1->getTimestamp() < $limit1->getTimestamp() ? $limit1 : $d1;
$within2 = $d2->getTimestamp() < $limit2->getTimestamp() ? $d2 : $limit2;

$interval = $within1->diff($within2);

print_r($interval);

print_r($interval); 
```

输出：

```
DateInterval Object
(
    [y] => 0
    [m] => 0
    [d] => 0
    [h] => 7
    [i] => 0
    [s] => 0
    [invert] => 0
    [days] => 0
) 
```

您可以直接读取此属性，也可以使用 DateInterval::format()

# joomla - Joomla：如何添加右侧菜单

> ID：14641343
> 
> 赞同：0
> 
> 时间：2013-02-01T07:04:43.820
> 
> 标签：joomla, joomla2.5

我对 Joomla 还很陌生，但我是一位经验丰富的开发人员，倾向于过快地深入研究代码。在我这次开始这样做之前，我想知道是否有一种简单、正确的方法可以将右侧菜单添加到 Joomla 的默认模板中。我正在使用 Joomla 2.5。

有关如何访问和创建菜单类型的信息的奖励积分。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:04:15.850

在开始之前，我首先要安装模板。如果您正在寻找免费的，那么选择汽车将是一个谎言，有很多可供选择。如果您喜欢编辑和造型，那么您可能需要考虑[Yootheme Master 主题](http://www.yootheme.com/themes/downloads/download)

至于右侧的菜单，您可以创建一个新模块，将类型设置为**菜单**，然后为其分配一个菜单。我假设您已经知道如何通过菜单管理器创建菜单；）

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T13:10:02.423

好的。我想出了如何在没有任何外部模块或代码的情况下做到这一点。这些是步骤：

转到扩展 - >模块管理器

选择一种菜单模块类型（我选择“菜单示例”）

启用它

选择职位

向下滚动，实际上是第二页，选择位置 6，即 Beez5 或 Beez_20 右上角。

确保为您想要的所有页面启用菜单。

保存并关闭。

就那么简单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:20:53.333

您可以将插件用于侧边菜单：

[http://extensions.joomla.org/extensions/structure-a-navigation/menu-systems/sliding-menus/12094](http://extensions.joomla.org/extensions/structure-a-navigation/menu-systems/sliding-menus/12094)

# ruby - 尝试保存数据映射器模型时如何解决 IllegalContextError？

> ID：14641346
> 
> 赞同：-1
> 
> 时间：2013-02-01T07:05:10.353
> 
> 标签：ruby, initialization, datamapper

当我尝试使用此代码时，我在“self.save ...”行收到 IllegalContextError。你能告诉我我做错了什么吗？

我只会在 Player 上调用 create 方法，而不会搞乱初始化，但我希望创建一个相关的周对象作为初始化的一部分。

```
require 'data_mapper'

DataMapper::setup(:default, "sqlite3://#{Dir.pwd}/prod.db")

class Player

    include DataMapper::Resource
    property :name, String, :key => true
    property :sport, String

    has n, :weeks

    def initialize(name, sport, week)
        self.save(:name => name, :sport => sport)
        self.weeks.create(:id => "#{name}#{week}", :score => 0)
    end

end

class Week

    include DataMapper::Resource
    property :id, String, :key => true
    property :week, Integer
    property :score, Integer

    belongs_to :player

end

DataMapper.finalize.auto_migrate!

Player.new("jack", "golf", 5) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:51:14.270

我知道这可能不是最好的方法，所以在你拒绝我的方法之前，请提供一个更好的解决方案。我可能会接受你的回答:)

似乎 IllegalContextError 源自 data_mapper 验证器。

验证器上的 data_mapper 文档并没有为新手提供太多信息来理解上下文以及与验证器的关系。

这是我的hacky解决方法。我使用 bang 运算符 (!) 覆盖了验证器。解决方法如下。

```
require 'data_mapper'

DataMapper::setup(:default, "sqlite3://#{Dir.pwd}/prod.db")

class Player

    include DataMapper::Resource
    property :name, String, :key => true
    property :sport, String

    has n, :weeks

    def initialize(name, sport, week)
        self[:name] = name
        self[:sport] = sport
        self[:week] = week
        self.save!
        self.weeks.create(:id => "#{name}#{week}", :score => 0)
    end

end

class Week

    include DataMapper::Resource
    property :id, String, :key => true
    property :week, Integer
    property :score, Integer

    belongs_to :player

end

DataMapper.finalize.auto_migrate!

Player.new("jack", "golf", 5) 
```

# special-characters - 仅接受选择屏幕参数中的特殊字符

> ID：14641348
> 
> 赞同：2
> 
> 时间：2013-02-01T07:05:26.863
> 
> 标签：special-characters, abap, sap-selection-screens

我有一个 C 类型的输入字段。

```
PARAMETERS lv_sep TYPE c. 
```

字段 lv_sep 应该只接受特殊字符。

你能帮我怎么给这个约束吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T07:31:13.673

您可以在 AT-SELECTION-SCREEN 期间进行检查。例如，您可以检查参数 lv_sep 以获取您想要接受的字符。

```
AT-SELECTION-SCREEN.
if not lv_sep CO '!"§$%&/()=?'.
    message text-e01 type E.
endif. 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-04T01:27:28.953

因为我喜欢尽可能避免在 IF 语句中使用 NOT，所以我建议：

```
AT-SELECTION-SCREEN.
IF lv_sep CN '!"§$%&/()=?'.
  MESSAGE text-e01 TYPE E.
ENDIF. 
```

# nhibernate - 如何使用 NHibernate 3.2 的 NHibernate Mapping-By-Code 功能映射 ntext？

> ID：14641361
> 
> 赞同：5
> 
> 时间：2013-02-01T07:07:07.940
> 
> 标签：nhibernate, nhibernate-mapping, truncate, mapping-by-code, ntext

我需要使用 NHibernate 3.2 中的按代码映射功能映射表的 ntext 列，这样它就不会被截断为 4000 个字符。

在以下示例中我需要更改什么？“注释”是 sql 表中具有 ntext 类型的属性：

属性（emp => emp.Notes）；

注意：请不要将它与流畅的 NHibernate 或 hbm 文件映射混合使用。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T11:52:17.167

所以，我解决了以下问题：

> 属性(emp => emp.Notes, map => map.Column(col => col.SqlType("ntext")));

实际上，我们需要做的就是：告诉 NHibernate 映射器 sql 中列的实际类型。:)

[正如jbl](https://stackoverflow.com/users/1236044/jbl)所指出的，解决方案来自[这里](http://devio.wordpress.com/2012/02/24/mssql-legacy-data-types-in-nhibernate-mapping-bycode-conformist/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:47:51.790

也许你可以试试这个，它也应该适用于 nvarchar(max) 列：

```
Property(emp => emp.Notes, m => m.Type(NHibernateUtil.StringClob)); 
```

希望这会有所帮助

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:45:31.340

尝试：

```
Property(emp => emp.Notes, mapinfo => mapinfo.Lenth(someHighValue)); 
```

如果提供的长度大于 varchar 可以容纳的长度，NHibernate 将切换到不同的字符类型。

# magento - 发送邮件 php 不向收件人显示发件人电子邮件

> ID：14641366
> 
> 赞同：0
> 
> 时间：2013-02-01T07:07:28.857
> 
> 标签：magento, php

我有一个客户要求，客户需要向网站管理员发送（和回复）电子邮件，但不应共享电子邮件地址。

PHP mail() 有没有办法隐藏发送给接收者的电子邮件地址，但接收者仍然应该能够回复发件人。

我在几个网站上看到过。他们是怎么做到的呢？

还有一个问题，我的 Magento 网站加载 OPC 页面非常缓慢，有什么解决办法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:12:47.410

你指的是：

```
$headers = "From: no-reply@domain.com\r\n";
$headers .= "Reply-To: validemail@domain.com\r\n"; 
```

因此，当该人收到电子邮件时，他们会从“无回复”中看到它，但如果他们决定回复，则会转到 validemail@domain.com

# remote-debugging - Charles Proxy 中的“Map Remote”是否适用于 iOS 设备？

> ID：14641367
> 
> 赞同：2
> 
> 时间：2013-02-01T07:07:29.473
> 
> 标签：remote-debugging

我正在尝试使用“地图远程”功能通过我的 iPhone 上的 Charles Proxy 将我的生产站点的流量重定向到测试服务器，这可能吗？如果没有，是否有任何替代方法可以允许在 iOS 设备上进行重定向映射？

# telerik - Telerik 异常：无法创建“System.Type”类型的对象

> ID：14641369
> 
> 赞同：1
> 
> 时间：2013-02-01T07:07:35.803
> 
> 标签：telerik

“无法从“DataType”属性的字符串表示“System.Int32”创建类型为“System.Type”的对象”发布到服务器时收到。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:07:35.803

请参阅[http://www.telerik.com/community/forums/aspnet-ajax/input/295172.aspx#1144202](http://www.telerik.com/community/forums/aspnet-ajax/input/295172.aspx#1144202)

问题在于我的 Telerik.Web.Design.dll 和 Telerik.Web.UI.dll 之间的服务器版本不同。

# wordpress - 从 mysql 更改 wordpress 帖子内容 url？

> ID：14641376
> 
> 赞同：0
> 
> 时间：2013-02-01T07:07:55.500
> 
> 标签：wordpress, permalinks

我在 Mysql 数据库中的哪里可以更改帖子中已经存在的媒体的路径，而不必一一更改每个帖子并更改链接 url。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:09:54.590

这是一个很棒的插件，我一直在使用它 [http://wordpress.org/extend/plugins/search-and-replace/](http://wordpress.org/extend/plugins/search-and-replace/)

您只需告诉它您要更改的内容，它将通过您的整个数据库查找/替换。完全推荐。

# ruby-on-rails - after_save 不调用 Heroku 生产但在本地工作

> ID：14641378
> 
> 赞同：3
> 
> 时间：2013-02-01T07:08:06.747
> 
> 标签：ruby-on-rails, heroku, ruby-on-rails-3.2, rails-models

我有一个名为 Rating 的模型，它引用了自身。

```
class Rating < ActiveRecord::Base
  has_many :ratings, :as => :ratable, :dependent => :destroy
  after_save :update_total_rating
  private
  def update_total_rating
    return true unless value_changed?
    rating_sum = Rating.sum('value',
        :conditions =>["ratable_id = ? and ratable_type = ?",
                       self.ratable_id, self.ratable_type])
    ratable.update_attribute(:total_rating, rating_sum)
    return true
  end
end 
```

我这样做是为了缓存评分的总评分。这在开发和更新 total_rating 方面非常有效，当我在 Heroku Rails 控制台（heroku run rails c）中保存评分模型时，它也在生产中，但是当通过 Heroku 上托管的 Web 应用程序执行时，这不起作用，似乎由于某种原因没有调用 update_total_rating 。

知道什么可能导致此问题或如何解决此问题吗？

谢谢

# javascript - Javascript createTextRange(); 问题

> ID：14641379
> 
> 赞同：3
> 
> 时间：2013-02-01T07:08:20.733
> 
> 标签：javascript, jquery

执行警报后，下一行给出错误。如何使用 javascript 或 jquery 解决此问题？

```
 for(var nI = 0; nI < aOrderNumList.length; nI++) {
        if(!isEmpty(aOrderNumList[nI])) {
            alert("Invalid Order Number");
            var oTextRange = $("#OrderNumList").createTextRange();
            var lFound = oTextRange.indexOf(aOrderNumList[nI])!=-1;
            if(lFound) {
               oTextRange.select(); 
            }
            return false;
        }
    } 
```

HTML 代码

```
 <tr>
         <td>Order Number List:</td>
         <td><textarea tabindex="<%=nIndex+1%>" id="OrderNumList" name="OrderNumList" rows="2" cols="35" <%=VClass("OrderNumList","")%>></textarea></td>
    </tr> 
```

非常感谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:10:25.673

我认为应该是：

```
var oTextRange = $("#OrderNumList")[0].createTextRange(); 
```

createTextRange 是 DOM 对象的方法，而不是 jquery 对象。

**更新：**

正文、按钮、文本区域和输入元素都支持 createTextRange 方法，但使用该方法会引发某些输入元素（复选框、图像、单选）的异常。isTextEdit 属性可用于避免异常。

查看更多：[http ://help.dottoro.com/ljfahrpo.php](http://help.dottoro.com/ljfahrpo.php)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-17T12:10:36.443

与您的代码一样，您需要选择输入元素的文本内容（文本、文本区域类型的输入字段）。

**Java 脚本**

```
document.getElementById("selector").select()
//selector is element id 
```

**jQuery**

```
setTimeout(function () { 
    $("#selector").select(); 
}, 1);
//selector is element id, also can you with class selector ie. $(".selector").select(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:26:01.937

我回应其他人所说的，但请记住，如果这是您*唯一*要做的事情，那么您就不需要 jQuery。

```
var oTextRange = document.getElementById("OrderNumList").createTextRange(); 
```

# java - 互补的泛型

> ID：14641385
> 
> 赞同：1
> 
> 时间：2013-02-01T07:09:28.033
> 
> 标签：java, oop, generics, typing

**前提：**在我的项目中，我有两个分别定义请求和响应的通用类型接口。处理请求以产生响应，因此每个响应都是基于请求构建的。处理器接口处理请求以构建相应的响应。

**代码：**请求和响应接口分别是：

```
interface Request<T1> 
```

和

```
interface Response<T2> 
```

分别代表通用请求`T2`和`T1`响应类型（为了清楚起见，我故意用不同的名称称呼它们）。

现在，由于 T2*是一个*请求，而 T1*是一个*响应，所以上面的代码演变为：

```
interface Request<T1 extends Response> 
```

和

```
interface Response<T2 extends Request> 
```

*注意： Request 和 Response 接口不共享任何继承关系 - 上面的代码只打算传达的是： Request 只使用其他类型，即 Response。*

现在，考虑 Request 接口：由于 Response 再次被键入，并且由请求构建的响应将绑定到原始请求类型，因此，上面的代码演变为：

```
interface Request<T1 extends Response<? extends Request<T1>>> 
```

和

```
interface Response<T2 extends Request<? extends Response<T2>> 
```

现在，处理器接口定义为：

```
interface Processor<R1 extends Request<R2>, R2 extends Response<R1>> {
    R2 process(R1 request);
} 
```

**具体类：**

请求实现：

```
class ConcreteRequest implements Request<ConcreteResponse> {
    ConcreteResponse response;
    ...`
} 
```

响应实现：

```
class ConcreteResponse implements Response<ConcreteRequest> {
    ConcreteRequest request;
    ...
} 
```

处理器实现：

```
class ConcreteProcessor implements Processor<ConcreteRequest, ConcreteResponse> {
    ConcreteResponse process(ConcreteRequest request) {
    ...
    }
} 
```

**问题：**上面的代码是否过度设计？是否有一种简化的方法来表示互补输入输出对象的元组？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:08:20.260

除非我完全误解了你的问题，否则你不——也不应该——对这类问题使用泛型。使用多态性和/或组合会更合适。例如，如果您需要在响应中集成请求的副本（几乎没有必要但可以考虑），那么您可以在响应类中添加对请求对象的引用。

`Request`从技术上讲，可以使用类型来定义对对象的引用；但是，您不应该这样做，因为它始终是一个`Request`对象（基类或派生子类），而不是可能随响应的每个实例而改变的某种任意类。

当每个引用对象的类型完全不同时（例如，a`List <String>`或 a ：a和对象`List<Request>`之间没有子类关系），或者由于定义一个或多个新对象而使用多态性不够用时，您可以使用泛型子类中不存在于超类中的虚函数。`String``Request`

`Response`基于a 构建 a`Request`因为 a`Request`被处理以产生 a`Response`绝对不是要走的路，您当前的`Processor`界面就是证明。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T11:08:54.140

我认为您不需要在类型定义中链接 the`Request`和 the 。`Response`他们被`Processor`. 是不是像

```
interface Requestable {
    ...
}

class Request<T extends Requestable> {
    ...
}

class Response<T extends Requestable> {
    ...
}

class Processor<T extends Requestable> {
    Response<T> process(Request<T> request) {
        ...
    }
} 
```

充足的 ？实际上，我不确定您是否需要通用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-27T11:04:00.740

在一个用例中，有一个通用的请求/响应（或者至少是请求）很有用。如果将请求生成为包含响应类型，则以下调用是“类型安全的”

```
public <messy define of T> T sendRequest(Request<T> request) 
```

现在该方法的用户将看到“类型安全”的请求-响应调用。我只称其为“类型安全”，因为该方法的实现可能必须将响应转换为 T，因此 ClassCastExceptions 在理论上是可能的，但在大多数情况下，它们将被视为应用程序逻辑错误。

我不会将请求/响应的实际字段放在其他字段中，只需将通用类型信息用于“类型安全”请求-响应调用。

# .net - 带有缓冲区和缓存的并发收集

> ID：14641388
> 
> 赞同：0
> 
> 时间：2013-02-01T07:09:35.213
> 
> 标签：.net, concurrency, blockingcollection

我正在寻找一个类似于 BlockingCollection 的集合对象，它可以让我拥有多个消费者。但是，我需要那些多个消费者来消费所有的物品。他们不能从中删除项目。本质上，我需要能够从另一个线程向其中添加项目，并希望任何获得 Enumerator 的人都能滚动浏览所有添加的项目。并阻止直到它关闭。

哪里有这样的集合类型？

[编辑] 天哪，我想我会澄清一下... BlockingCollection.GetConsumingEnumerable() 在项目不可用或调用 CompleteAdding 之前返回阻止枚举的枚举。我想要同样的东西，除了不从集合中删除项目。

[编辑] 好的。任何。我解决了这个问题：通过编写我自己的阻止列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:13:13.397

> 本质上，我需要能够从另一个线程向其中添加项目，并希望任何获得 Enumerator 的人都能滚动浏览所有添加的项目。

您可以直接使用`BlockingCollection<T>`，但要确保“消费者”只是枚举集合本身而不是`GetConsumingEnumerable()`.

来自[MSDN](http://msdn.microsoft.com/en-us/library/dd267242.aspx)：

> 与 GetConsumingEnumerable 不同，BlockingCollection.IEnumerable.GetEnumerator 返回一个不修改基础集合的标准枚举器。

```
var collection = new BlockingCollection<int> { 5, 12, 20 };

//5, 12, 20
foreach (var i in collection)
{
    Console.WriteLine(i);
}

collection.Add(6);

// 5, 12, 20, 6
foreach (var i in collection)
{
    Console.WriteLine(i);
} 
```

> 并阻止直到它关闭。

您的意思是要在集合上有一个打开的枚举器时阻止添加项目？为什么？这当然是可行的（例如，由 支持的集合`ReaderWriterLockSlim`）。

# c# - 捕获发往特定 IP 和端口的网络数据包并将它们存储在队列中

> ID：14641389
> 
> 赞同：0
> 
> 时间：2013-02-01T07:09:36.737
> 
> 标签：c#, java, c

我想知道如何捕获那些发往某个 IP 和端口的网络数据包，并将它们存储在队列中，然后再到达应用程序层。稍后根据条件，我想将数据包出列并发送它们上层或销毁数据包。.NET 框架中是否可以使用 C#？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:11:38.263

您需要一个代理来执行此操作，它将充当“中间人”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:51:24.427

一种方法（在使用虚拟的现代 Linux 系统上）是配置 iptables 以将数据包重新路由到不同的 IP 地址（例如 127.xxx 地址）编写一个应用程序来捕获/无论这些数据包，然后重新发送它们稍后的。您可能需要在虚拟机中运行您的真实应用程序......并在虚拟网络层中执行 iptable 技巧......以便真实应用程序可以通过侦听“真实”IP 地址来获取内容。

但这将是混乱和复杂的……并且可能容易丢包和 VM 稳定性问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T09:00:39.400

只需运行 ettercap 或 tcpdump。然后，如果您愿意，您可以使用wireshark 来检查数据包，或者如果您愿意，您可以用您喜欢的任何语言编写自己的程序来处理原始数据。

# css - IE8 中的仅 CSS 自定义复选框

> ID：14641390
> 
> 赞同：7
> 
> 时间：2013-02-01T07:09:43.527
> 
> 标签：css, checkbox, radio-button

[**我从链接**](http://www.inserthtml.com/2012/06/custom-form-radio-checkbox/)中找到了 Custom CHECKBOX 和 RADIO，但在 IE8 中找不到它。

有什么方法可以使用以下适用于 IE8 的属性？

> **：后**
> 
> **：前**
> 
> .big-radio:checked **+** label:after

请告诉我。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-27T07:13:05.420

ie8 不支持`:checked`。您可以像这样添加类和重写规则：

`.big-radio.checked + label:after`

或者从这个答案中尝试一些东西[https://stackoverflow.com/a/11842991/928516](https://stackoverflow.com/a/11842991/928516)

# zigbee - 使用 Zigbee 和微控制器的网状网络

> ID：14641402
> 
> 赞同：1
> 
> 时间：2013-02-01T07:10:38.270
> 
> 标签：zigbee

我想使用 Zigbee 模块和 ATmega8 建立一个网状网络。我需要一些基本的 c 例程来建立网络。我的控制器使用 ATmega32 运行。和终端节点将在 ATmega8。

我想要控制器单元和节点之间的即插即用无线连接。

请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-04T06:35:24.693

@user2031622，zigbee 现在有内置的微控制器，例如 TI stack（德克萨斯仪器）提供的 CC2530。CC2530 有一个内置的 8051 微控制器，支持网状网络。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T05:01:52.417

[Digi XBee 系列射频模块](http://www.digi.com/products/wireless-wired-embedded-solutions/zigbee-rf-modules/zigbee-mesh-module/)在即插即用无线方面很受欢迎。在最简单的配置中，一对模块作为串行电缆替代品运行，一个模块输入的字节从另一个模块输出。

如果您想拥有一个多节点网络，则必须在 API 模式下使用无线电，其中帧包含带有地址信息的标头和页脚中的校验和。Digi 已在 GitHub 上作为开源发布了[ANSI C XBee 主机库](https://github.com/digidotcom/xbee_ansic_library)，这可能是一个很好的起点，因为您提到使用 C。看起来甚至有一个针对 AVR 平台[的库的分支。](https://github.com/Pastor/xbee_ansic_library/tree/benvironment)

# sublimetext2 - sublime text 2 - 如何从命令模式多光标切换到插入模式

> ID：14641403
> 
> 赞同：9
> 
> 时间：2013-02-01T07:10:46.003
> 
> 标签：sublimetext2

我正在学习崇高的键盘命令（Vintage Mode / VintageEx），并发现能够选择一列文本很有用（在vim中我只是按Ctrl + v然后向上或向下，具体取决于我想要的列的方向选择）。我猜崇高会用多光标来处理这个问题。所以我现在要做的（因为我似乎无法在 Ubuntu 12.04 上找出正常的列选择）是这样的：

在命令模式下：

*   shift v 选择起始行
*   up 或 down 以选择所选行上方或下方的行
*   ctrl + shift + l 在所选行的末尾插入多个光标（仍处于命令模式）
*   现在我希望能够进入插入模式，但按“i”不会进入插入模式。如果我按“d”，它将删除选定的行并将我置于插入模式......但我不想为了进入插入而删除所有内容。

那么，当您在命令模式下有多个游标时，是否有一种进入插入模式的好方法？非常感谢您的任何建议！

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-15T07:45:02.700

在 sublime text 2 中使用 vim/vintage 模式和视觉选择的多个选择和光标

在命令模式下：

*   进入视觉模式 (v/V)
*   选择线（j/k/运动）
*   分割成行 (Ctrl+Shift+L)
*   退出视觉模式 (v)
*   您现在应该处于具有多个光标的命令模式:)
*   进入输入模式（i/a/etc..）
*   使用多个光标进行编辑

现在你如何使用 vim 的搜索键来做到这一点，我还不能得到它。(/,n,N)

*您在写问题时*尝试了多少次进入命令模式？

# android - Android 使用自定义小部件创建仪表板

> ID：14641404
> 
> 赞同：1
> 
> 时间：2013-02-01T07:10:48.973
> 
> 标签：android, user-interface

我正在尝试构建将具有多个小部件（现在为 2 个）的用户仪表板，其中将包含与此图像非常相似的列表视图

![在此处输入图像描述](../Images/398a9e053d847bdf49db359450a07aeb.png)

我下载了 google io 源代码，但很难理解这一点，任何人都可以指导我正确的方式来获得类似或类似的结果，到目前为止，我知道如何创建动态列表视图。

到目前为止我的想法是创建多个彼此相邻的线性布局，然后向它们添加列表视图。

# c# - 为什么在这种情况下没有死锁？

> ID：14641406
> 
> 赞同：10
> 
> 时间：2013-02-01T07:10:54.197
> 
> 标签：c#, .net

所以我很高兴地从 Eric Lippert 那里读到[这篇](http://ericlippert.com/2013/01/31/the-no-lock-deadlock/?utm_source=rss&utm_medium=rss&utm_campaign=the-no-lock-deadlock)文章，当然，还有极好的评论，其中[John Payson](http://ericlippert.com/2013/01/31/the-no-lock-deadlock/#comment-14921)说：

> > 一个更有趣的例子可能是使用两个静态类，因为这样的程序可能在没有任何可见阻塞语句的情况下死锁。

我想，是的，这很容易，所以我敲了这个：

```
public static class A
{     
    static A()
    {
        Console.WriteLine("A.ctor");
        B.Initialize();
        Console.WriteLine("A.ctor.end");
    }

    public static void Initialize()
    {
        Console.WriteLine("A.Initialize");
    }
}
public static class B
{
    static B()
    {
        Console.WriteLine("B.ctor");
        A.Initialize();
        Console.WriteLine("B.ctor.end");
    }

    public static void Initialize()
    {
        Console.WriteLine("B.Initialize");
    }

    public static void Go()
    {
        Console.WriteLine("Go");
    }
} 
```

其中（调用后`B.Go()`）的输出是：

```
B.ctor
A.ctor
B.Initialize
A.ctor.end
A.Initialize
B.ctor.end
Go 
```

没有僵局，我显然是个失败者——所以为了延续尴尬，我的问题是：为什么这里没有僵局？

在我的静态构造函数完成**之前**`B.Initialize`调用我的小大脑，我认为这是不允许的。**`B`**

 *** * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T07:31:39.610

这不是死锁，因为您没有做任何应该阻止的事情，也没有做任何应该打破的事情。

您没有使用`A`内部的任何资源`B`，反之亦然。因此，您的循环依赖是“安全的”，因为它不会爆炸。

如果您跟踪打印输出显示的路径，则不会阻塞：

1.  打电话`Go`（我怀疑）
2.  输入`B`（`static`构造函数），因为它没有被初始化。
3.  打印
4.  采用`A.Initialize()`
5.  `A`的`static`构造函数需要先执行
6.  打印
7.  采用`B.Initialize()`
8.  `B`不需要初始化，但它没有处于完成状态（幸运的是没有设置变量，所以没有任何中断）
9.  打印出来，然后返回
10.  打印出（从`A`的`static`构造函数），然后返回
11.  `A.Initialize()`终于可以调用了，因为`A`被初始化了
12.  打印出来，然后返回
13.  打印出（从`B`的`static`构造函数），然后返回
14.  `Go`

您真正做的唯一一件事是呈现不安全状态的可能性：访问构造函数尚未完成执行的类。那是不安全的代码，虽然没有阻塞，但绝对代表了一个损坏的状态。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:32:21.860

重要的一点是只涉及一个线程。引用博客文章：

> 然后静态构造函数启动一个新线程。当该线程启动时，CLR 会看到一个静态方法即将在一个类型上被调用，该类型的静态构造函数“正在运行”**另一个线程**。它立即阻塞新线程，以便在主线程完成运行类构造函数之前不会启动 Initialize 方法。

在 Eric 示例中，有两个线程在等待对方。您只有一个线程，因此不会发生等待，因此：没有阻塞和死锁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T07:40:56.517

为什么你认为应该有一个僵局。静态构造函数只被调用一次。无论您执行多少次语句`B.Initialize();`，它只会在第一次引用 B 时调用 B 类的静态构造函数。[在此处](http://msdn.microsoft.com/en-us/library/k9x6w0hc%28v=vs.80%29.aspx)查看有关静态构造函数的更多信息。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T07:20:13.487

静态方法只调用一次，一旦加载，就不会再次调用。如果 `A.Initialize()`方法调用`B.Initialize()`方法，则将是死锁，反之亦然。

所以任何类首先加载到内存中，静态块都会被执行，然后任何后续调用它 - 因为类已经加载，所以静态块不会被执行。

* * *

## 回答 #5

> 赞同：-3
> 
> 时间：2013-02-01T07:28:41.700

类实例实际上是在构造函数调用之前创建的，因此不再需要执行构造函数。**

# compass-sass - 使用 Octopress 的自定义登录页面

> ID：14641410
> 
> 赞同：3
> 
> 时间：2013-02-01T07:11:15.867
> 
> 标签：compass-sass, octopress

我已经设置了 Octopress，并希望使用完全自定义的样式，基本上抛弃了适用于网站其余部分的大部分标准样式。

我确实想继续提及所有响应式的优点，尽管它已经融入其中。

设置自定义登录页面的最佳方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-03T18:43:16.850

你的意思是这样吗？

[http://eduncan911.com](http://eduncan911.com)

^- 我的 Octopress 网站。

博客位于：[http ://eduncan911.com/blog](http://eduncan911.com/blog)

由于 Octopress 在皮下使用 Jekyll，因此最好考虑如何根据 Jekyll 来实现这一点——并且有很多方法可以做到这一点。

OT：就我个人而言，我觉得 Octopress 的主题布局、包含和自定义过于复杂且过于细化。他们这样做是为了使其高度可定制；但在我看来，它将每个模板紧密耦合到另一个模板。

话虽如此，有多种方法可以实现这一目标。我确实在这里回答了一个非常相似的问题：

[从 wordpress 主题创建 octopress 主题](https://stackoverflow.com/questions/22262428/creating-an-octopress-theme-from-a-wordpress-theme)

它是 Jekyll：因此，你可以随心所欲地创建页面。`/source/index.html`用您想要的任何设计、html 和 css 替换。

如果您不想要博客滚动，或者想要将“博客移动到另一个目录”，只需将当前移动`/source/index.html`到，例如`/source/blog/index.html`. 就是这样。

正如我在上面的答案中指出的那样，唯一的导入是保留 YAML 前端并指定您想要使用的“布局”。例如，我有一个名为“主页”的布局，它与任何其他布局都大不相同。我的`/source/index.html`用途`layout: homepage`。

但即便如此，您甚至不必使用 YAML - 创建您自己的原始 html 文件，只要您认为合适。当你`rake generate`. 这是我个人最初所做的。然后，我慢慢地把主页分成了`/source/_layouts/homepage.html`，然后就从那里去了。我根本没有遵循 Octopress 的整个主题——仅够使用帖子和页面。

# favicon - 更改 epydoc 的 favicon - 如何？

> ID：14641415
> 
> 赞同：1
> 
> 时间：2013-02-01T07:11:31.730
> 
> 标签：favicon, epydoc

一切都在问题中：我将如何更改 epydoc 生成的 html 页面 favicon ？

注意：我看到了如何自定义 css 内容，但没有关于自定义输出 html 文件...

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T10:47:30.250

好的，所以在进行了一次小头脑风暴（和我自己）之后，我找到了一种方法：

由于我们可以使用 --navlink 选项向 epydoc 注入一些 html（最初设计用于在导航栏中自定义项目的链接），因此我使用 javascript 技巧在文档的标签中动态添加以下内容。

这是javascript代码：

```
var link = parent.document.createElement('link'); 
link.id = 'dynamic-favicon'; 
link.type = 'image/png'; 
link.rel = 'shortcut icon'; 
link.href = '../logo-fav.png'; parent.document.head.appendChild(link);
parent.document.head = parent.document.head || 
                           parent.document.getElementsByTagName('head')[0]; 
```

这是完整的 epydoc 命令行：

```
epydoc -v --name "My Project" -o ./html \
--css epydoc.css --url http://www.my-project.org --inheritance listed \
--graph all --no-private --docformat epytext \
    --navlink "<a href=\"http://www.my-project.org\"><img src=\"../logo.png\" style=\"margin:10px;\" /></a>
        <script>
            var link = parent.document.createElement('link'); 
            link.id = 'dynamic-favicon'; 
            link.type = 'image/png'; 
            link.rel = 'shortcut icon'; 
            link.href = '../logo-fav.png'; 
            parent.document.head.appendChild(link); 
            parent.document.head = parent.document.head || parent.document.getElementsByTagName('head')[0];
        </script>
        " \
    my_py_module 
```

这可用于自定义整个文档，但仍然很hacky。仍然很奇怪，他们无法在像 epydoc 这样成熟的工具中使用某些模板...

# c# - 我应该使用哪些泛型

> ID：14641417
> 
> 赞同：1
> 
> 时间：2013-02-01T07:11:42.037
> 
> 标签：c#, generics

我需要存储一个键值对列表，并要求保留添加项目的顺序`int`。`string`一旦初始化，它就不会改变，即没有添加或删除任何内容。

起初我想到了使用`Dictionary<int,string>`，每次我需要访问使用的项目时

```
foreach(var entry in dict.OrderBy(e=>e.Key)) { } //as Key is `int` 
```

然而，每次订购似乎都不是最好的选择。

现在我有了一个想法，即有一个`List<Tuple<int, string>>`, 以`List<T>`保证项目的顺序。

那么，有没有更好的选择呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T07:16:15.857

查看建议的可能性：

*   `Dictionary`不保证物品的顺序
*   `SortedDictionary`对项目进行排序，但*不是*按照您添加它们的顺序（它根据键比较进行排序），
*   `OrderedDictionary`保持顺序，但它不是通用的，并且会引入不必要的铸造和装箱。

所以我认为你应该使用`List<Tuple<int, string>>`. `foreach`它保留了顺序，并且对于迭代使用和索引访问来说已经足够了。如果您事先知道大小，您也可以使用数组或只读集合类型，正如[Cuong Le 在他的回答中所建议的那样](https://stackoverflow.com/a/14641481/93652)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T07:18:01.047

如果允许重复键，`List<Tuple<int, string>>`将是最佳选择。为了使您的列表为只读，您可以在初始化后公开只读列表：

```
 var readonlyList = new ReadOnlyCollection<Tuple<int, string>>(yourlist); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:20:18.127

虽然`Dictionary`看起来适合作为数据结构，但它并不能保证项目的顺序。

列表似乎不合适，因为它不适合您尝试存储的数据结构。

您可以使用`OrderedDictionary` [保证项目顺序的](http://msdn.microsoft.com/en-us/library/system.collections.specialized.ordereddictionary.aspx)an 。

```
foreach (DictionaryEntry entry in orderedDictionary)
{
    //...
} 
```

# php - 显示致命错误和警告的 require_once 函数

> ID：14641418
> 
> 赞同：0
> 
> 时间：2013-02-01T07:11:43.260
> 
> 标签：php, function

你好，我正在使用 PHP，我想将我的 classes 文件夹中的 class.php 文件包含到我的页面之一中，但它显示错误：

> 警告：require_once（/usr/home/shantak5/public_html/gman/classes/globalProgram.class.php）[function.require-once]：无法打开流：/usr/home/shantak5/public_html 中没有这样的文件或目录/gman/adminGlobalProgram.php 第 18 行
> 
> 致命错误：require_once() [function.require]：无法打开所需的“/usr/home/shantak5/public_html/gman/classes/globalProgram.class.php”（include_path='/usr/home/shantak5/public_html/gman/ PEAR') 在第 18 行的 /usr/home/shantak5/public_html/gman/adminGlobalProgram.php

我无法知道我的代码出了什么问题。我的 .class.php 文件位于 Classes 文件夹中。

这是我的 adminglobalprogram.php 的 php 代码，我在其中添加了 require once 函数。：

```
<?php
require 'config.inc.php';
error_reporting(E_ALL);
if(!$_SESSION['isLogged'])
header("Location: index.php");

if(isset($_GET['hid']) && $_GET['hid'] == 1){
$show = "yes";
}else{
    $show = "no";
}
if(isset($_GET['mod'])){
$update = "yes";
$itemId = $_GET['mod'];
}else{
    $update = "no";
}

require_once(APP_CLASS_PATH."globalProgram.class.php");
$objForm            = new pevcProgram;
$message = "";

if(isset($_POST['saveProgram'])){

                $timeval = mysql_real_escape_string($_POST['timeval']);
                $timeheading = mysql_real_escape_string($_POST['timeheading']);
                $descriptionheading = mysql_real_escape_string($_POST['descriptionheading']);
                $description = mysql_real_escape_string($_POST['description']);
                $description=stripslashes($description);
                $descriptionheading1 = mysql_real_escape_string($_POST['descriptionheading1']);
                $description1 = mysql_real_escape_string($_POST['description1']);
                $description1=stripslashes($description1);
                $descriptionheading2 = mysql_real_escape_string($_POST['descriptionheading2']);
                $description2 = mysql_real_escape_string($_POST['description2']);
                $description2 =stripslashes($description2);
                $descriptionheading3 = mysql_real_escape_string($_POST['descriptionheading3']);
                $description3 = mysql_real_escape_string($_POST['description3']);
                $description3 =stripslashes($description3);
                $image = $_FILES['image']['name']; 
                if($flag !== 0){                
                if(!empty($image)){
                $bgSource   = $_FILES['image']['tmp_name'];
                $ext = strtolower(substr(strrchr($image, "."), 1));
                if($ext == "png" || $ext == "jpg" || $ext == "jpeg" ){

                /* Open This code
                $imgpathD   = 'photos/'.topBarBgtest.".$ext";
                $imgpath    = './photos/'.topBarBgtest.".$ext";
                */
                $imgpathD   = 'photos/program/'.'Global_'.$image;
                $imgpath    = './photos/program/'.'Global_'.$image;

                if(move_uploaded_file($bgSource, $imgpath)){
                //$message .= "Image successfully uploaded.<br />";
                }else{
                $flag = 0;
                }
                }else{
                $flag = 0;
                }
                }
                }

                //$content = mysql_real_escape_string($_POST['FCKeditor1']);
                $line = $_POST['line'];
                $srorder = $_POST['srorder'];
                $status = $_POST['status'];

                $fieldInfo  = array(
                                         'timeval'      => $timeval,
                                         'timeheading'  => $timeheading,
                                         'descriptionheading'=>$descriptionheading,
                                         'description'   => $description,
                                         'descriptionheading1'=>$descriptionheading1,
                                         'description1'   => $description1,
                                         'descriptionheading2'=>$descriptionheading2,
                                         'description2'   => $description2,
                                         'descriptionheading3'=>$descriptionheading3,
                                         'description3'   => $description3,
                                         'image'           => $image,
                                         'line'         => $line,
                                         'srorder'      => $srorder,
                                         'status'       => $status);
                $recId      = $objForm->addFormField($fieldInfo);
                if(isset($recId) && $recId != ""){                  
                $message .= "Form successfully saved!!.<br />";
                }else{
                $message .= "Error!Form data not saved.Please try again!!.<br />";
                }
                }

if(isset($_POST['update']))

          {
                //$content = mysql_real_escape_string($_POST['FCKeditor1']);
                $timeval = mysql_real_escape_string($_POST['timeval']);
                $timeheading = mysql_real_escape_string($_POST['timeheading']);
                $descriptionheading = mysql_real_escape_string($_POST['descriptionheading']);
                $description = mysql_real_escape_string($_POST['description']);
                $description=stripslashes($description);
                $line = $_POST['line'];
                $descriptionheading1 = mysql_real_escape_string($_POST['descriptionheading1']);
                $description1 = mysql_real_escape_string($_POST['description1']);
                $description1 =stripslashes($description1);
                $descriptionheading2 = mysql_real_escape_string($_POST['descriptionheading2']);
                $description2 = mysql_real_escape_string($_POST['description2']);
                $description2 =stripslashes($description2);
                $descriptionheading3 = mysql_real_escape_string($_POST['descriptionheading3']);
                $description3 = mysql_real_escape_string($_POST['description3']);
                $description3 =stripslashes($description3);

                //image uploade//   

                $image = $_FILES['image']['name']; 
                if($flag !== 0){                
                if(!empty($image)){
                $bgSource   = $_FILES['image']['tmp_name'];
                $ext = strtolower(substr(strrchr($image, "."), 1));
                if($ext == "png" || $ext == "jpg" || $ext == "jpeg" ){

                /* Open This code
                $imgpathD   = 'photos/'.topBarBgtest.".$ext";
                $imgpath    = './photos/'.topBarBgtest.".$ext";
                */
                $imgpathD   = 'photos/program/'.'Global_'.$image;
                $imgpath    = './photos/program/'.'Global_'.$image;
                if(move_uploaded_file($bgSource, $imgpath)){
                //$message .= "Image successfully uploaded.<br />";
                }else{
                $flag = 0;
                }
                }else{
                $flag = 0;
                }
                }
                }

                $srorder = $_POST['srorder'];
                $status = $_POST['status'];
                $updId = $_POST['updId'];

                $fieldInfo      = array('timeval'   => $timeval,
                                        'timeheading'   => $timeheading,
                                        'descriptionheading'=>$descriptionheading,
                                        'description'   => $description,
                                        'descriptionheading1'=>$descriptionheading1,
                                        'description1'   => $description1,
                                        'descriptionheading2'=>$descriptionheading2,
                                        'description2'   => $description2,
                                        'descriptionheading3'=>$descriptionheading3,
                                        'description3'   => $description3,
                                        'image'           => $image,
                                         'line'     => $line,
                                         'srorder'  => $srorder,
                                         'status'   => $status);
                $recId      = $objForm->updateFormInfo($updId,$fieldInfo);
                if(isset($recId) && $recId != "")
                {                   
                $message .= "Form successfully updated!!.<br />";
                }else
                {
                $message .= "Error!Form data not updated.Please try again!!.<br />";
                }
            }
                /*unset($_GET['update']);*/

/* srorder update accroding text input*/    

if(isset($_POST['textsubmit']))
          {
                //$content = mysql_real_escape_string($_POST['FCKeditor1']);
                $timeval = mysql_real_escape_string($_POST['timeval']);
                $timeheading = mysql_real_escape_string($_POST['timeheading']);
                $descriptionheading = mysql_real_escape_string($_POST['descriptionheading']);
                $description = mysql_real_escape_string($_POST['description']);
                $description=stripslashes($description);

                $descriptionheading1 = mysql_real_escape_string($_POST['descriptionheading1']);
                $description1 = mysql_real_escape_string($_POST['description1']);
                $description1 =stripslashes($description1);
                $descriptionheading2 = mysql_real_escape_string($_POST['descriptionheading2']);
                $description2 = mysql_real_escape_string($_POST['description2']);
                $description2 =stripslashes($description2);
                $descriptionheading3 = mysql_real_escape_string($_POST['descriptionheading3']);
                $description3 = mysql_real_escape_string($_POST['description3']);
                $description3 =stripslashes($description3);

                //image uploade//   

                $image = $_FILES['image']['name']; 
                if($flag !== 0){                
                if(!empty($image)){
                $bgSource   = $_FILES['image']['tmp_name'];
                $ext = strtolower(substr(strrchr($image, "."), 1));
                if($ext == "png" || $ext == "jpg" || $ext == "jpeg" ){

                /* Open This code
                $imgpathD   = 'photos/'.topBarBgtest.".$ext";
                $imgpath    = './photos/'.topBarBgtest.".$ext";
                */
                $imgpathD   = 'photos/program/'.'Global_'.$image;
                $imgpath    = './photos/program/'.'Global_'.$image;

                if(move_uploaded_file($bgSource, $imgpath)){
                //$message .= "Image successfully uploaded.<br />";
                }else{
                $flag = 0;
                }
                }else{
                $flag = 0;
                }
                }
                }
                $line = $_POST['line'];
                $srorder = $_POST['srorder'];
                $status = $_POST['status'];
                $updId = $_POST['updId'];

                $fieldInfo      = array('timeval'   => $timeval,
                                        'timeheading'   => $timeheading,
                                        'descriptionheading'=>$descriptionheading,
                                        'description'   => $description,
                                        'descriptionheading1'=>$descriptionheading1,
                                        'description1'   => $description1,
                                        'descriptionheading2'=>$descriptionheading2,
                                        'description2'   => $description2,
                                        'descriptionheading3'=>$descriptionheading3,
                                        'description3'   => $description3,
                                        'image'           => $image,
                                         'line'     => $line,
                                         'srorder'  => $srorder,
                                         'status'   => $status);
                $recId      = $objForm->updateFormInfo($updId,$fieldInfo);
                if(isset($recId) && $recId != "")
                {                   
                $message .= "Form successfully updated!!.<br />";
                }else
                {
                $message .= "Error!Form data not updated.Please try again!!.<br />";
                }
            }

if(isset($_GET['Rmod'])){
$itemId = $_GET['Rmod'];        
$formretu   = $objForm->deleteRec($itemId);
if($formretu){
$message .= "Record successfully Deleted!!.<br />"; 
    }else{
    $message .= "Record not Deleted!!.<br />";  
        }
}       

if($update == "yes"){
$formArr    = $objForm->getFormInfo($itemId);               
$timeval    = $formArr->timeval;
//$content      = $formArr->content;
//$content = stripslashes($content);
$timeheading            = $formArr->timeheading;
$descriptionheading     = $formArr->descriptionheading;
$description            = $formArr->description;
$descriptionheading1    = $formArr->descriptionheading1;
$description1           = $formArr->description1;
$descriptionheading2    = $formArr->descriptionheading2;
$description2           = $formArr->description2;
$descriptionheading3    = $formArr->descriptionheading3;
$description3           = $formArr->description3;
$image                  = $formArr->image;
$line                   = $formArr->line;
$srorder                = $formArr->srorder;
$status                 = $formArr->status;
}
$asiaArr        = $objForm->getAllAsiaProg1();
$upNUM      = $objForm->isRecord();
$upNUM      = $upNUM;
$recNum     = $objForm->isRecord();     
$recNum = $recNum + 1;
//print_r($_SESSION); 
$smarty->assign('show', $show);
$smarty->assign('update', $update);
$smarty->assign('timeval', $timeval);
$smarty->assign('timeheading', $timeheading);
$smarty->assign('descriptionheading', $descriptionheading);
$smarty->assign('description', $description);
$smarty->assign('descriptionheading1', $descriptionheading1);
$smarty->assign('description1', $description1);
$smarty->assign('descriptionheading2', $descriptionheading2);
$smarty->assign('description2', $description2);
$smarty->assign('descriptionheading3', $descriptionheading3);
$smarty->assign('description3', $description3);

$smarty->assign('image', $image);
//$smarty->assign('content', $content);
$smarty->assign('line', $line);
$smarty->assign('srorder', $srorder);
$smarty->assign('status', $status);
$smarty->assign('asiaArr', $asiaArr);
$smarty->assign('itemId', $itemId);
$smarty->assign('upNUM', $upNUM);
$smarty->assign('recNum', $recNum);
//$smarty->assign('content', $newContent);

$smarty->assign('message', $message);
//$smarty->assign('sno', $sno);
$smarty->display('adminGlobalProgram.tpl');
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:21:44.833

是不是很简单？

`/usr/home/shantak5/public_html/gman/classes/globalProgram.class.php`

此文件：`globalProgram.class.php` 此处不存在 : `/usr/home/shantak5/public_html/gman/classes/`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:23:30.677

此错误仅在以下情况下发生，

> 1）您的文件不在定义的位置。
> 
> 2) 提到的文件和定位的文件之间存在名称冲突。
> 
> 3) 文件中有任何区分大小写的字母。

请根据您的情况检查上述内容

# css - 如何为多个浮动拇指提供边距，以便它们从左边框到右边框？

> ID：14641421
> 
> 赞同：2
> 
> 时间：2013-02-01T07:11:52.787
> 
> 标签：css, margin

我有一个 680 像素宽的 div，我想在其中显示一些缩略图。每个拇指宽 64 像素，它们之间有 24 像素的边距。然后 8 * 64 + 7 * 24 = 680。但第八个拇指也将应用其边距，因此它不再适合 680 像素 (8 * (64 + 24) = 704)。

我通过手动将每隔八个拇指的边距设置为 0 来修复它，但我想知道 CSS 是否可以以适当的方式处理这个问题。

[这](http://jsbin.com/ekorap/1/edit)是代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:19:23.650

您可以使用第[n 个子](http://css-tricks.com/how-nth-child-works/)选择器。

```
img:nth-child(8n) { margin:0 } 
```

你在这里说的是：“对于每 8 个 img 元素，应用 0 边距”。

[**这是您更新的代码**](http://jsbin.com/ekorap/5/edit)- 我还删除了内联 CSS。

请注意[，并非所有浏览器都支持](http://caniuse.com/css-sel3)此功能。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:22:39.043

使用`img:nth-child(8n)`是正确的答案，但它只有在我们制作另一个`<div>`周围的拇指然后应用`margin: 12px 0`到每个第 8 个孩子（*在这种情况下*也是第 8 个 img 元素）时才会起作用。

关键是：它*并不*适用于每 8 个*img-element*。此选择器选择每 8*个*也是`img`. 有一个微妙但重要的区别。

即，如果容器中有一个段落和图像列表，则不会使用 img:`nth-child(8n)`选择器选择第 8 个图像，因为它不是第 8 个孩子。在那种情况下，第 7 个 img 将是第 8 个孩子，因此被选中。这是[示例](http://jsbin.com/ekorap/17/edit)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T12:23:19.813

您可以在缩略图周围添加一个容器，并在其上指定一个负左边距，等于间距，在您的情况下为 24px。然后只需在所有图像上添加左边距。容器的负边距就像每行中第一个图像的边距的排水沟......

```
*Example CSS*
.thumbnailcontainer{ 
    margin-left:-24px; 
    } 
.thumbnail { 
    float:left; 
    margin: 8px 0px 8px 24px; 
    } 

*Example HTML markup*
<div class="thumbnailcontainer">
    <img src="thumb1" class="thumbnail">
    <img src="thumb2" class="thumbnail">
    <img src="thumb3" class="thumbnail">
    ....
</div> 
```

# php - 未定义的变量 $submit

> ID：14641430
> 
> 赞同：0
> 
> 时间：2013-02-01T07:13:07.917
> 
> 标签：php, mysql, variables, undefined

我收到一条错误消息：注意：未定义变量：在第 4 行提交。我不知道为什么，因为我已经使用提交按钮定义了它？有人可以解释为什么吗？真的看不出这里的问题。

```
<?php

                if($submit)
                {
                $sql = "INSERT INTO personnel (first, last, username, department, email) VALUES ('$first','$last','$username','$department','$email')";
                $add = mysql_query($sql);
                echo "<div class='confirmation-box round'>Thank you! New user have been added</div>";
                }
                else
                {
                ?>
                <form method="post" action="useradd.php">

                    <fieldset>

                    <p>
                        <label for="simple-input">Firstname</label>
                        <input type="text" id="first" name="firstname" class="round default-width-input" />
                    </p>
                    <p>
                        <label for="simple-input">Lastname</label>
                        <input type="text" id="last" name="lastname" class="round default-width-input" />
                    </p>
                    <p>
                        <label for="simple-input">Username</label>
                        <input type="text" id="username" name="username" class="round default-width-input" />
                    </p>
                    <p>
                        <label for="simple-input">Department</label>
                        <input type="text" id="department" name="department" class="round default-width-input" />
                    </p>
                    <p>
                        <label for="simple-input">Email</label>
                        <input type="text" id="email" name="email" class="round default-width-input" />
                    </p>
                        <input type="Submit" name="submit" class="button round blue image-right ic-add text-upper" value="Add">

                    </fieldset>

                </form>
                <?php
                }
                ?> 
```

（对不起愚蠢的问题，有点新的PHP）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:14:20.697

这是一个典型的老派`register_globals`使用案例。它决定是否将 EGPCS（环境、GET、POST、Cookie、服务器）变量注册为全局变量。没有人再这样做了。

将其更改为：

```
if (!empty($_POST['submit'])) { 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:18:30.247

> 我不知道为什么，因为我已经用提交按钮定义了它

不，你没有。

其中的第一个实例`$submit`是`if($submit)`指：

```
If $submit is TRUE 
```

...`$submit`以前从未定义过。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:19:03.583

您可以使用

```
if(isset($_POST['submit']))
{
//code goes here
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T07:25:04.917

您需要使用以下代码检查帖子

```
if(isset($_POST['submit']))
{
//Here will be your code
} 
```

试试这个

And good practice to give proper name to submit button. Ex. 'cmdSubmit'

Best luck

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T07:26:36.467

Its a warning not an error. You can just declare the varible with empty value or some default value.

# ios - 文本视图xcode中的文本编辑

> ID：14641435
> 
> 赞同：-2
> 
> 时间：2013-02-01T07:13:21.840
> 
> 标签：ios, objective-c, xcode, uitextview, uifont

我有一个文本视图，其中文本显示如下：

```
how are you?

Fine 
```

现在，如果我为文本视图设置字体，则两行（问题和答案）显示相同的字体，但是我希望问题以一种字体显示并以其他字体回答。我怎样才能做到这一点？

我这样设置字体：

```
textView = [[UITextView alloc]initWithFrame:CGRectMake(10, 80, 300, 440)];
textView.layer.borderColor = [UIColor blackColor].CGColor;
[textView setFont:[UIFont fontWithName:@"TimesNewRomanPS-ItalicMT" size:14]];
textView.layer.borderWidth = 1.0;
    textView.autoresizesSubviews = YES;
    textView.autoresizingMask = UIViewAutoresizingFlexibleWidth | UIViewAutoresizingFlexibleHeight;
[self.view addSubview:textView]; 
```

提前致谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T07:15:41.743

从[UITextView 类参考](http://developer.apple.com/library/IOS/#documentation/UIKit/Reference/UITextView_Class/Reference/UITextView.html "UITextView 类参考")：

> 在 iOS 6 及更高版本中，此类通过使用属性文本属性支持多种文本样式。（iOS 的早期版本不支持样式化文本。）为此属性设置值会导致文本视图使用属性字符串中提供的样式信息。您仍然可以使用 font、textColor 和 textAlignment 属性来设置样式属性，但这些属性适用于文本视图中的所有文本。
> 
> 此类不支持文本的多种样式。您指定的字体、颜色和文本对齐属性始终适用于文本视图的全部内容。要在您的应用程序中显示更复杂的样式，您需要使用 UIWebView 对象并使用 HTML 呈现您的内容。

因此，对于 iOS 5 或更低版本，您不能在同一页面上有两个，因为它不受支持。只需使用 webview 和 HTML 文件。对于 iOS6，也许你可以尝试使用`attributedText`UITextView 的属性。这在 iOS 6 下可用。但从未尝试过。

或者有 2 个不同的 UITextView（它很丑，但就是这样）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:28:08.950

我猜你想创建一个类似聊天室的应用程序？

如果是这样，我建议将其设为 UITableView。然后制作不同的Cell来搭配不同的风格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:43:27.280

您可以使用属性字符串来实现此目的，例如：

```
NSMutableAttributedString *para1 = [[NSMutableAttributedString alloc] initWithString:@"How are you?"];
NSMutableAttributedString *para2 = [[NSMutableAttributedString alloc] initWithString:@"\nFine"];
[para2 setAttributes:@{ NSForegroundColorAttributeName : [UIColor blueColor]}  range:NSMakeRange(0, para2.length)];
[para1 insertAttributedString:para2 atIndex:para1.length];

self.textLabel.attributedText = para1; 
```

或者使用单个属性字符串：

```
NSMutableAttributedString *para1 = [[NSMutableAttributedString alloc] initWithString:@"How are you?\nFine"];

// Get the range of the last line in the string
__block NSRange range;
[para1.mutableString enumerateLinesUsingBlock:^(NSString *line, BOOL *stop) {
    range = [para1.mutableString rangeOfString:line];
}];

[para1 setAttributes:@{ NSForegroundColorAttributeName : [UIColor blueColor] } range:range];

self.textLabel.attributedText = para1; 
```

这两个示例都导致：

![输出](../Images/11d905e0e9e537cb136287458692911b.png)

# java - 如何从客户端应用程序调用 weblogic 服务器中的集群 EJB 应用程序

> ID：14641436
> 
> 赞同：0
> 
> 时间：2013-02-01T07:13:46.217
> 
> 标签：java, jakarta-ee, ejb-3.0, cluster-computing, weblogic-10.x

我在 weblogic 服务器中创建了一个集群，其中包含两个托管服务器。我的管理服务器在 192.168.25.30:7001 上列出，其他两个托管服务器在 192.168.25.30:7003 和 192.168.25.30:7005 上列出。因为我想在这个集群上调用 EJB 应用程序部署，所以我开发了一个客户端应用程序。我使用 192.168.25.30:7003 地址作为从客户端调用的远程地址。当两个托管服务器都启动并运行我的应用程序时，我的应用程序工作正常。但是如果一个管理服务器出现故障，我想运行应用程序服务器。当 192.168.25.30:7005 关闭时，它工作正常。但是当 192.168.25.30:7003 关闭时，客户端请求不会转发到其他服务器。
请建议我设置 weblogic 集群的方法是否正确。我可以使用托管服务器地址之一从客户端应用程序调用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:14:15.327

您必须查找集群，而不仅仅是服务器。 [这](http://middlewaremagic.com/weblogic/?p=6193)是有关如何在 WebLogic 上执行此操作的示例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T17:00:12.023

您的方法中的问题是您正在查找特定的托管服务器实例而不是集群/负载均衡器，因此您每次总是点击相同的托管实例。

正如已经回答的那样，您需要在 WL 集群上进行查找。

# c++ - 在Qt中通过串口接收图像

> ID：14641437
> 
> 赞同：0
> 
> 时间：2013-02-01T07:13:49.400
> 
> 标签：c++, qt, serial-port

我使用 openCV 在 Qt 中创建了一个图像处理 GUI，我从特定路径打开图像并对其进行处理。现在我打算像从串口获取图像并发送该图像以进行进一步处理。我没有任何想法这样做，。任何帮助将不胜感激！

```
void finalv1::openimage()
{

    QString filename=QFileDialog::getOpenFileName(this,tr("Loa d Image"),".",tr("Image    Files(*.png *.jpg *.jpeg *.bmp)"));

    imageop = cvLoadImage(filename.toAscii().data());

    cvNamedWindow("image",1);

    cvShowImage("image",imageop); 
}

void finalv1::on_pushButton_open_clicked()
{
   openimage();
} 
```

我提供了打开图像的代码，图像是“IplImage *”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:16:38.303

我不知道 Qt 的任何允许串行通信的功能，但如果您使用 C++，请尝试 Boost.Asio。 [http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio.html](http://www.boost.org/doc/libs/1_52_0/doc/html/boost_asio.html)

# ruby-on-rails - 即使未选择提交按钮，也可以在haml中保存复选框值

> ID：14641438
> 
> 赞同：1
> 
> 时间：2013-02-01T07:13:51.897
> 
> 标签：ruby-on-rails, checkbox, haml, onchange

这是去年已经讨论过很多次的 SaaS（“烂土豆”）培训问题，但我似乎没有找到答案。

我有一个带有用于生成哈希命名评级的评级复选框的表单。然后我使用 params[:ratings] 将最新的复选框选择传递到不同的页面。当用户提交表单时，我的代码可以正常工作。但是如果他们在没有点击提交按钮的情况下四处走动，那么最新的值就会丢失。

我认为每当用户选中/取消选中复选框时都需要保存最新值，但不知道如何。

我需要使用haml和ruby来做到这一点，没有javascript等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T07:02:31.040

为了完整起见。

要求是，如果用户关闭网页并稍后返回，那么之前的选择应该可用。所以我用cookies做了，并通过了测试用例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:34:12.343

在你的电影控制器中，你有一个实例变量@selected_ratings，你可以在其中保存所有当前的评级。

```
if params[:ratings] != session[:ratings] and @selected_ratings != {}
  session[:ratings] = @selected_ratings
  redirect_to :sort => sort, :ratings => @selected_ratings and return
end
@movies = Movie.find_all_by_rating(@selected_ratings.keys, ordering) 
```

在电影索引中，您拥有的 form_tag

```
= check_box_tag "ratings[#{rating}]", 1, @selected_ratings.include?(rating) 
```

# php - PHP 脚本在本地 wamp 上运行，但在 EC2 上设置灯时出错

> ID：14641441
> 
> 赞同：1
> 
> 时间：2013-02-01T07:14:08.813
> 
> 标签：php, amazon-ec2, wamp, lamp

我有一个 php 类，它试图设置一个私有静态变量。它可以在我的本地 wamp 上运行，但是当我将它上传到 EC2 实例时，它会运行一次，然后在访问未声明的静态属性时出现致命错误。该类是一个 Amazon SimpleDb 助手，我从[http://webmasterinresidence.ca/simpledb/displayincludes.php](http://webmasterinresidence.ca/simpledb/displayincludes.php)得到它。起初它是在第 100 行调用未定义函数，所以我将其更改为在构造函数中设置 self::$__accessKey，现在是发生错误的行。有什么想法可能导致这种情况吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:46:59.563

因为它第一次工作，然后在随后的尝试中失败，你的 EC2 服务器上是否有 APC 而不是你的 WAMP 服务器？存在/曾经存在导致静态变量在后续尝试中无法识别[的错误。](https://bugs.php.net/bug.php?id=59564)

*（在提出这个答案之前我会问更多问题，但我还不能发表评论！）*

# c# - 创建 Web 服务代理和删除 WSDL 文件问题

> ID：14641454
> 
> 赞同：0
> 
> 时间：2013-02-01T07:15:17.247
> 
> 标签：c#, wcf, web-services, wsdl

我只需要知道，在创建 Web 服务代理之后，如果我删除 wsdl 文件，那么创建 Web 服务类相关实例会有什么问题吗？

所以请指导我从 VS2010 IDE 中删除 wsdl 文件后需要做什么，因此调用 Web 服务不会有问题。

我的第一个问题是关于 Web 服务（ASMX）文件。所以我的问题仍然相同，但是如果 WCF 服务我需要做些什么。因为创建代理后还会生成 wsdl 文件。如果在这种情况下我也删除了 wsdl 文件，那么我该如何调用 wcf 服务。

请详细说明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:16:18.237

`WSDL`文件描述您的服务操作。为了生成客户端代理，使用了 WSDL 文件。

完成创建客户端代理后，您不再需要 WSDL 文件。事实上，删除或限制对 WSDL 文件的访问是一种很好的做法，在安全性方面也是一种很好的做法。

因此，您将不需要 WSDL 文件，除非您对服务进行更改，例如添加新操作或删除现有操作。在这种情况下，需要再次更新客户端的 WSDL 文件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:16:35.590

`Reference.svcmap`添加服务引用时，Visual Studio 会在文件夹内创建一个名为的`Service References/<service name>/`文件，用于描述您的服务。它包含指向各种元数据源的链接以及您在创建服务参考时使用的配置选项（上下文菜单中的“配置服务参考”）。

这`Reference.svcmap`是唯一不能删除的文件。当您右键单击您的服务引用并从上下文菜单中选择“更新服务引用”时，Visual Studio 将从其上游源重新下载所有必需的元数据，重新创建客户端代理并更新您的`app.config`文件。

从`Service References/<service name>`目录中，客户端代理`Reference.cs`是编译客户端应用程序时实际使用的唯一文件（因此您也不应该删除它，尽管 Visual Studio 会自动为您重新生成它） - 这些文件都不会在运行时使用.

本文还解释了所有这些文件的内容： [http ://scottseely.com/2009/01/26/misunderstood-add-service-reference/](http://scottseely.com/2009/01/26/misunderstood-add-service-reference/)

# android - 如何使用相同的谷歌帐户为现有的 android 市场应用程序上传服务 APK

> ID：14641457
> 
> 赞同：1
> 
> 时间：2013-02-01T07:15:18.510
> 
> 标签：android

我开发了两个不同的 APK（作为不同的项目）。

一个是Application APK，它已经上市了，另一个是我刚刚开发的服务，它还没有上市。

那么，如何在我已经上传应用程序 APK 的 Google 帐户中上传该服务 APK。我需要更改包裹名称吗？密钥库怎么样？我需要为不同的版本使用相同的密钥库还是不同的密钥库。那么版本号呢？

**- 谢谢**

# xcode - 我无法在 git 中签出其他分支

> ID：14641459
> 
> 赞同：1
> 
> 时间：2013-02-01T07:15:27.857
> 
> 标签：xcode, git

# 错误

我有错误

```
error: The following untracked working tree files would be overwritten by checkout:
MyProject/xcuserdata/shingo.nakanishi.xcuserdatad/UserInterfaceState.xcuserstate
Please move or remove them before you can switch branches.
Aborting 
```

## 我试试这个

（[以下未跟踪的工作树文件将被结帐覆盖](https://stackoverflow.com/questions/4858047/error-the-following-untracked-working-tree-files-would-be-overwritten-by-checko)）

```
git rm --cached MyProject/xcuserdata/shingo.nakanishi.xcuserdatad/UserInterfaceState.xcuserstate 
```

和

`git clean -d -fx ""`

`git commit -a`

`git push`

当「UserInterfaceState.xcuserstate」文件不存在时，**这是工作**

## 但是 Xcode 很快就生成了 UserInterfaceState.xcuserstate。

当我使用 Xcode 时，Xcode 会生成 UserInterfaceState.xcuserstate 文件。

所以，每个结帐分行，我必须`git clean -d -fx ""`每次都做。

## 我的 ~/.gitignore

这是我的 ~/.gitignore

```
.DS_Store
*UserInterfaceState.xcuserstate
*Breakpoints.xcbkptlist 
```

**如何忽略文件？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:28:17.860

第一个错误意味着它已经在您的存储库中（已提交）。您需要先将其从存储库中删除，然后忽略它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:38:09.180

请阅读[Xcode 项目的 Git 忽略文件](https://stackoverflow.com/questions/49478/git-ignore-file-for-xcode-projects)

[https://gist.github.com/3786883](https://gist.github.com/3786883)

请在发布问题之前搜索 SO。

对于你所做的改变。用于`git checkout -- <fileName>`放弃更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:38:12.370

Git 不会忽略您已经跟踪的文件。所以只需先从 git 中删除该文件

```
git rm -rf file 
git commit -m "remove"
git push origin #{branchname} 
```

之后，你的 .gitignore 会忽略它:)

# android - AdMob 与我的应用程序集成

> ID：14641460
> 
> 赞同：1
> 
> 时间：2013-02-01T07:15:29.117
> 
> 标签：android, admob

我正在尝试将 AdMob 集成到我的应用程序中。这是我得到的错误......

```
02-01 12:34:03.184: E/Ads(23819): The android:configChanges value of the com.google.ads.AdActivity must include screenLayout.
02-01 12:34:03.184: E/Ads(23819): The android:configChanges value of the com.google.ads.AdActivity must include uiMode.
02-01 12:34:03.184: E/Ads(23819): The android:configChanges value of the com.google.ads.AdActivity must include screenSize.
02-01 12:34:03.184: E/Ads(23819): The android:configChanges value of the com.google.ads.AdActivity must include smallestScreenSize.
02-01 12:34:03.184: E/Ads(23819): You must have AdActivity declared in AndroidManifest.xml with configChanges.
02-01 12:34:03.204: I/webview(23819): skipInvalidates
02-01 12:34:03.214: I/webview(23819): skipInvalidates
02-01 12:34:03.224: I/webclipboard(23819): clipservice: android.sec.clipboard.ClipboardExManager@407af360
02-01 12:34:03.714: V/webviewdatabase(23819): TCP pre connection: creating table in database
02-01 12:34:04.064: I/webview(23819): skipInvalidates
02-01 12:34:04.084: I/webview(23819): skipInvalidates
02-01 12:34:04.084: I/webclipboard(23819): clipservice: android.sec.clipboard.ClipboardExManager@407af360
02-01 12:34:04.094: I/webview(23819): skipInvalidates
02-01 12:34:04.254: I/webview(23819): skipInvalidates 
```

这是Android清单

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.xx.xxx"
    android:versionCode="3"
    android:versionName="1.1.1" >

    <uses-sdk android:minSdkVersion="10" android:targetSdkVersion="17" />
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE"/>

    <application
        android:icon="@drawable/icon5"
        android:label="@string/app_name">
        <activity
            android:label="@string/app_name"
            android:name=".xxx" >
            <intent-filter >
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <activity android:name="com.google.ads.AdActivity"
          android:configChanges="keyboard|keyboardHidden|orientation"/>

        <activity android:name="com.xx.xxx.History"></activity>
        <activity android:name="com.xx.xxx.CommandsList"></activity>
        <activity android:name="com.xx.xxx.CommandsHelp"></activity>
    </application>

</manifest> 
```

回答以上部分

```
<activity android:name="com.google.ads.AdActivity"          android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/> 
```

现在应用程序执行没有任何错误，但没有显示广告。这是日志猫。有人可以告诉我，问题是什么？

```
 02-01 12:49:15.904: I/Ads(24565): To get test ads on this device, call adRequest.addTestDevice("E0AE86FC822746EB3E5BAB6E54B48BCB");
    02-01 12:49:15.984: I/webview(24565): skipInvalidates
    02-01 12:49:16.104: I/Ads(24565): adRequestUrlHtml: 
<html><head>
<script src="http://media.admob.com/sdk-core-v40.js"></script><script>AFMA_getSdkConstants();AFMA_buildAdURL(
{"kw":[],"preqs":0,"session_id":"8235404278524521238","u_sd":1,"seq_num":"1","slotname":" a1510b61966655f","u_w":320,"msid":"com.xx.xxx","js":"afma-sdk-a-v6.2.1","mv":"8016010.com.android.vending","isu":"E0AE86FC822746EB3E5BAB6E54B48BCB","cipa":0,"bas_off":0,"format":"320x50_mb","oar":0,"net":"wi","app_name":"3.android.com.xx.xxx","hl":"en","ad_pos":{"height":0,"visible":0,"y":0,"x":0,"width":0},"gnt":2,"u_h":480,"carrier":"40413","bas_on":0,"ptime":0,"u_audio":1});</script></head><body></body></html>
    02-01 12:49:17.554: W/webcore(24565): Can't get the viewWidth after the first layout
    02-01 12:49:17.624: W/Ads(24565): Invalid unknown request error: Cannot determine request type. Is your ad unit id correct?
    02-01 12:49:17.634: I/Ads(24565): onFailedToReceiveAd(Invalid Ad request.) 
```

我正在使用滚动视图来显示内容。我想在内容之后在屏幕底部显示广告。我在滚动视图中使用 LinearLayout。

```
 <LinearLayout
                android:id="@+id/linearLayout9"
                android:layout_width="match_parent"
                android:layout_height="45px"
                android:layout_marginBottom="2px"
                android:background="#000000" >

                <TextView
                    android:id="@+id/txtViewAdvertisement"
                    android:layout_width="match_parent"
                    android:layout_height="match_parent"
                    android:text="ADVERTISEMENT"
                    android:textSize="16px"
                    android:layout_gravity="center_horizontal" />

                <com.google.ads.AdView android:id="@+id/adView"
                         android:layout_width="wrap_content"
                         android:layout_height="wrap_content"
                         ads:adUnitId=" a1510b619xxxxx"
                         ads:adSize="BANNER"
                         ads:loadAdOnCreate="true"/>

            </LinearLayout> 
```

如果您需要更多信息，请告诉我。

谢谢！！！

似乎问题出在我正在使用的滚动视图上。我将就此提出一个单独的问题。接受我第一部分的答案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:20:07.307

试试这个

```
<activity
            android:name="com.google.ads.AdActivity"
             android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"  /> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:34:50.433

在你的 onCreate 试试这个：

```
adView = new AdView(this, AdSize.BANNER, "your key");        

 AdRequest request = new AdRequest();
 request.setTesting(false);
 adView.loadAd(request); 
```

# javascript - 如何格式化 JSON：对象数组或包含对象元素的文档？

> ID：14641463
> 
> 赞同：2
> 
> 时间：2013-02-01T07:16:11.977
> 
> 标签：javascript, json, serialization, formatting

所以我目前正在尝试开发一个最容易迭代和访问对象的 JSON 文档。我将使用下划线，因此访问对象并不一定很困难，但我想知道格式化的最佳方法是什么 - 最佳实践等。

这是我正在考虑的两种格式：第一种是数组

```
{
    "defaultViews" : [
        {
            "name" : "view1",
            "title" : "View 1"
        },
        {
            "name" : "view2",
            "title" : "View 2"
        }
    ]
} 
```

或者，另一种方式，更多的是......“面向对象”......

```
{
    "defaultViews" : {
        "view1" : {
            "title" : "View 1"
        },
        "view2" : {
            "title" : "View 2"
        }
    }
} 
```

因此，在第一个示例中，遍历对象更容易，而在第二个示例中，直接访问对象（`obj.defaultViews.view1`）更容易。我想这是相当主观的，但我再次寻找被认为是“最佳实践”的东西。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:22:12.697

在面向对象原则中使用数组没有错。使用数组的第一个示例也是一种更好的方法，因为您真正想要的是一个数组

# core-data - 如何将 icloud coredata 存储复制到应用程序沙箱

> ID：14641464
> 
> 赞同：0
> 
> 时间：2013-02-01T07:16:12.227
> 
> 标签：core-data, icloud

coredata 和 icloud 的许多问题是已知的。但我将它与 appstore 上的高效应用程序一起使用。现在我想退后一步，想在我的应用程序的文档目录中拥有我的 icloud 数据库的副本。

有人可以指出我正确的方向吗？有人可以更好地设置一步一步的指导吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:57:37.610

您不能从 iCloud 复制商店。iCloud 不适用于单一的二进制存储，而是与存储结合的一系列更新文件。

因此，您最好的选择就是在文档目录中创建一个新存储，获取所有记录并像这样填充新存储。不要忘记将应用程序的核心数据堆栈配置为指向新商店。

# android - 如何在函数 includeItem 中从 GraphUser 获取属性？

> ID：14641478
> 
> 赞同：1
> 
> 时间：2013-02-01T07:17:54.120
> 
> 标签：android, facebook-graph-api

[我从中找到了](https://developers.facebook.com/docs/reference/android/3.0/PickerFragment.GraphObjectFilter#includeItem%28Object%29)参考，我无法从中检索所有数据`graphObject`。我可以

使用`graphObject.getName()`, `graphObject.getId()`, `graphObject.getUsername()`.

当我使用`graphObject.getInnerJSONObject()`时，它只返回图片、id、名称。

如果我想从这个函数中获得更多细节，我应该怎么做？

# python - 好的merkle哈希树python实现？

> ID：14641479
> 
> 赞同：7
> 
> 时间：2013-02-01T07:17:54.130
> 
> 标签：python

merkle 哈希树有什么好的 python 实现吗？我用谷歌搜索并找不到任何好的。任何人都可以为 merkle 哈希树推荐一个好的库吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-02-01T07:21:58.803

我在 Python 中找到[了这个实现。](http://svn.tribler.org/abc/branches/mainbranch/Tribler/Core/Merkle/merkle.py)

同样在 Github 上[，这里](https://github.com/sangeeths/merkle-tree/blob/master/mt.py)似乎有一个基本的实现，值得一试。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-01-03T09:30:52.127

[目前这里](https://github.com/FoteinosMerg/pymerkle)有一个新的，除了标准（审计）之外，还生成[一致性证明。](https://www.certificate-transparency.org/log-proofs-work)

我发现它高度可配置（您可以选择散列和编码类型）并且非常方便（您可以非常简单地加密字符串、字节和整个文件）。我不确定树结构（它似乎与其他实现有点不同）但绝对值得一试。

# function - 如何在 xslt 中调用 void 外部函数？

> ID：14641482
> 
> 赞同：2
> 
> 时间：2013-02-01T07:18:01.197
> 
> 标签：function, xslt

我知道我可以通过以下方式将返回函数的值分配给 xslt 中的变量：

```
<xsl:variable name="var" select="myClass:function1()"/> 
```

但是我想调用一个 void 函数，虽然上面的语法仍然有效，有没有更好或更干净的方法来做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T10:36:19.010

从 XSLT 到 Java 的接口没有标准化；这取决于您使用的 XSLT 处理器，因此您需要在问题中包含此信息。（实际上，您甚至没有说您是否使用 Java；我从上下文中假设了这一点）。

在 Saxon 中，绝对不建议在 xsl:variable 中调用具有副作用的函数，因为变量是惰性求值的，因此您无法控制求值顺序，如果从未引用该变量，则不会在全部。如果必须调用具有副作用的函数，最好在 xsl:value-of 指令中执行，如果函数确实返回值，则该值将添加到结果树中。（Saxon 优化器竭尽全力不使用函数从不返回任何内容的知识，这通常会导致它不被调用。）

# git - git(-svn) 如何设置正确的 svn:externals 链接？

> ID：14641483
> 
> 赞同：1
> 
> 时间：2013-02-01T07:18:07.413
> 
> 标签：git, git-svn, svn-externals

这不是关于某些东西不起作用的问题，而是一个理解为什么某些东西起作用的问题。这是我的设置：

```
projects
   |
   |--- mylibs
   | 
   |--- main 
```

我有两个不同的、不相关的`git-svn`结帐`mylibs`和`main`. 它们是来自存储库中不同位置的克隆。现在， a`svn commit`是由其他人制作的，其中添加了一个 external`main`来指向`mylibs`（即`svn`checkout of`main`将包含一个 directory `mylibs`，它是 的外部`mylibs`）。

只是出于好奇，我改成`main`并做了一个`git svn rebase`只是为了看看 git 会对外部做什么。`git`创建了如下链接：

```
mylibs -> ../mylibs 
```

这就是我想要的，但我不知道这怎么可能。因为本地的 git checkout`main`不知道在上层目录中是一个`mylibs`.

这是一个新功能吗？git 是否知道我本地磁盘/主目录上的所有本地克隆/签出？

# android - sqlite查询中的语法错误？

> ID：14641485
> 
> 赞同：1
> 
> 时间：2013-02-01T07:18:20.463
> 
> 标签：android, sqlite

我总是收到这个错误。我认为查询没问题。有什么问题？

**“引起：android.database.sqlite.SQLiteException：靠近“to”：语法错误：，编译时：创建表消息（_id整数，msgdesc文本，日期时间戳不为空，由整数创建不为空，整数不为空）； "**

这是我的代码：

```
public class ContactListDB extends SQLiteOpenHelper {

private static final int DATABASE_VERSION = 2;
private static final String DATABASE_NAME = "MobileMerch";

// Database creation SQL statement
private static final String CREATE_MERCH  = "create table Merchendiser" +
        "(_id integer primary key, name text not null,surname text not null,username text not null);";

// Database creation SQL statement
private static final String CREATE_MESSAGES = "create table Messages" +
        "(_id integer , msgdesc text ,date timestamp  not null, createdby integer not null, to integer not null);";

public ContactListDB(Context context) {
    super(context, DATABASE_NAME, null, DATABASE_VERSION);
}    

public void onCreate(SQLiteDatabase db) {

    db.execSQL(CREATE_MERCH);
    db.execSQL(CREATE_MESSAGES);

} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T07:20:57.080

`TO`是保留字。重命名您的列（推荐）或通过将其括在双引号中来转义它（例如`"to"`）。

另见：[http ://www.sqlite.org/lang_keywords.html](http://www.sqlite.org/lang_keywords.html)

# codeigniter - 部署 Codeigniter 时出现致命错误：无法打开 core/Codeigniter.php

> ID：14641487
> 
> 赞同：0
> 
> 时间：2013-02-01T07:18:42.133
> 
> 标签：codeigniter

我在第一次尝试 Codeigniter 时遇到了这个致命错误和警告：

> 致命错误：require_once() [function.require]：在 C 中打开所需的 'C:/xampp/htdocs/codeigniter/core/CodeIgniter.php' (include_path='.;C:\xampp\php\pear\') 失败:\xampp\htdocs\admin\index.php 在第 202 行

什么会导致这个？我不知道从哪里开始看。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-04T11:26:59.313

在您的终端更改文件夹项目的权限：

```
sudo chmod -R 755 project_path/ 
```

我希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:26:32.000

您是否使用**index.php**作为项目的默认索引页面？

如果不使用**.htaccess**文件并编辑文件夹中的**config.php**文件`/project/config`

确保在您的配置文件中正确声明所有路由，例如：**routes.php**等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:48:37.260

```
 RewriteEngine On

# Put your installation directory here:
# If your URL is www.example.com/, use /
# If your URL is www.example.com/site_folder/, use /site_folder/

RewriteBase /project_folder_name

# Do not enable rewriting for files or directories that exist
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

# For reuests that are not actual files or directories,
# Rewrite to index.php/URL
RewriteRule ^(.*)$ index.php/$1 [PT,L] 
```

.htaccess 看起来像这样。

# jasper-reports - 如何在多页pdf报告中添加页码

> ID：14641489
> 
> 赞同：0
> 
> 时间：2013-02-01T07:18:59.470
> 
> 标签：jasper-reports, ireport

我使用*iReport*创建了多页 pdf 报告，如下所示。

[PDF报告](https://stackoverflow.com/questions/11830904/how-do-i-add-a-second-page-in-jaspersoft-ireport-designer-4-7)

如何在此 pdf 报告中输入页码（第 1 页，共 2 页）？

如果我将相同的内容放在*iReport*中，它会将所有页面作为单独的页面并相应地给出数字，例如：

```
for page1.jrml >> page 1 of 2 and page 2 of 2
for page2.jrml >> agian same page 1 of 1 
```

...

它应该是这样的：

```
for page1.jrml >> page 1 of 3 and page 2 of 3
for page2.jrml >> page 3 of 3 
```

请建议。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-03T16:02:24.873

您的页码编号将不正确，因为通过使用该方法，您正在创建 2 个报告并将它们合并到 1 个 PDF 中，而不是创建单个报告。

如果您将第二个报表作为子报表嵌入到第一个报表中，则页码应该是正确的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T07:36:17.080

我猜你正在将页码放在子报告中。页码应位于主报告的页脚部分。

# autoit - 在 Autoit 中，文件安装限制是什么？

> ID：14641491
> 
> 赞同：-1
> 
> 时间：2013-02-01T07:19:05.770
> 
> 标签：autoit

我正在创建一个最大 4GB 的 Zip 文件并使用[FileInstall()](http://www.autoitscript.com/autoit3/docs/functions/FileInstall.htm)但我无法提取并且也无法创建单个 .exe 文件。

```
FileInstall("myPath\myfile.zip","DestinationFolderName") 
```

函数的大小是否有限制`FileInstall()`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:34:30.283

`FileInstall()`无论大小如何，都不会解压缩您的 zip 存档。它只会将拉链放在目的地。它仅用于在编译的 AutoIt 脚本中包含文件。

此外，如果您使用文件夹名称作为目标，则需要尾部反斜杠 ( `\`)。

我强烈建议阅读`FileInstall()`帮助文档中的条目。

# c# - HTTP 407（需要代理身份验证）

> ID：14641492
> 
> 赞同：4
> 
> 时间：2013-02-01T07:19:19.910
> 
> 标签：c#, http, authentication, httpwebrequest

我有一些关于 HTTP 身份验证的基本问题

1）客户端如何知道服务器的HTTP认证类型（Basic/Digest/NTLM）？
这是在 HTTP 服务器端可配置的吗？

> **我的回答：**服务器将设置它必须与客户端执行的身份验证类型。所以我们的客户端 API（在 C# HttpWebRequest API 中）会自动处理它。最好使用 Wireshrk 并应用 HTTP 过滤器；您将在 Internet 协议层获得源 IP 和目标 IP。以及http层的传输控制协议和认证类型的src和dest端口。

2）如果我在客户端和服务器之间放置 squid linux 代理；我的客户端代码是否还需要了解代理的身份验证类型？还是身份验证类型只与端 HTTP 服务器有关？

> **我的回答：**如果 squid 代理放在 Client 和 Server 之间；它不会使用 HTTP 身份验证。它可以使用 a) DB：使用 SQL 数据库 b) LDAP：使用轻量级目录访问协议。c) RADIUS：使用 RADIUS 服务器进行登录验证。等等。所以我们不得不在 HTTP 标头中提到代理身份验证凭据。

3) 使用 WireShark 发现 Browser 到 Server 有 3 个请求来完成单个请求。

> a) 浏览器在没有任何身份验证凭据的情况下发送请求；所以服务器响应了 401 以及 relam 和 nonce。

```
WWW-Authenticate: Digest realm="realm", qop="auth", nonce="MTM1OTYyMzkyNDU4MzpiOWM0OWY0NmMzMzZlMThkMDJhMzRhYmU5NjgwNjkxYQ=="\r\n <BR> 
```

> b) 浏览器第二次发送带有凭据、relam、nonce、cnonce 的请求；但服务器仍以 401 响应；

```
WWW-Authenticate: Digest realm="realm", qop="auth", nonce="MTM1OTYyMzk0OTAyMTo3Njk3MDNhZTllZDQyYzQ5MGUxYzI5MWY2MGU5ZDg0Yw==", stale="true"\r\n 
```

> c) 浏览器第三次使用相同的凭据、relam、nonce、cnonce 发送相同的请求。这次服务器发送 200 ok。

我的问题是在第二次和第三次浏览器发送相同的请求；为什么服务器第二次失败，第三次成功。这是因为我的服务器实现吗？（我有带有 SPRING 安全过滤器的 REST Java 服务器）。

我有 C# HTTP 客户端；

> 尽管设置了 System.Net.NetworkCredentials，但第一次发送 HttpWebRequest 时没有凭据；所以clinet用relam和nonce得到了407。
> 第二次 HttpWebRequest 是成功的。该客户端没有像浏览器一样的第三个请求。

为什么浏览器和 C# 客户端之间存在这种差异？

> **我的回答：**我仍然不知道这里发生了什么：Q3。

4）现在我面临的真正问题是当 SQUID LINUX PROXY 进入我们的客户端和 HTTP 服务器之间时，浏览器执行了相同的三个请求身份验证并成功。但是，C# HttpWebRequest 在第二次请求时失败（401）并到达缓存（异常）{} 块，第三次未尝试。

当代理服务器介于两者之间时，您能否请任何人澄清我如何在 C# 客户端中解决此问题？

下面的代码正在执行 GET 请求。

```
 HttpWebRequest request = WebRequest.Create("url") as HttpWebRequest;
  request.Credentials = new NetworkCredential(loginUserName, password);
  WebResponse response = request.GetResponse(); 
```

请注意，我们对代理的请求是通过 TCP 协议而不是 HTTP 协议发送的。然后从 PROXY 到 SERVER 使用 HTTP 协议进行通信。但是来自 Proxy 的 HTTP 请求在 HTTP 标头中包含有关我们客户端 ip 的信息`X-Forwarded-For`。

## 以下是可能的解决方案

仅当您的代理需要任何身份验证时才需要这些解决方案，否则忽略它。

**解决方案 1：为我工作**

```
request.Proxy.Credentials = System.Net.CredentialCache.DefaultNetworkCredentials; 
```

**解决方案2：**

```
 IWebProxy proxy = WebRequest.GetSystemWebProxy();
  proxy.Credentials = new NetworkCredential(UserName, UserPassword, UserDomain);
  request.Proxy = proxy; 
```

**Martin给出的解决方案3：**

```
 var proxy = new WebProxy ("http://localhost:3128/");
  proxy.Credentials = new NetworkCredential (UserName, UserPassword, UserDomain);
  request.Proxy = proxy; 
```

[在http://wiki.squid-cache.org/Features/Authentication](http://wiki.squid-cache.org/Features/Authentication)了解有关代理身份验证的更多信息

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T09:49:17.537

这是一个挑战/响应协议。通常，客户端发出一个没有任何身份验证标头的初始请求（您可以设置`request.PreAuthenticate = true`为在第一个请求中发送凭据）。

然后，服务器以它支持的身份验证方法列表进行响应。

如果用户没有使用 明确指定身份验证方法`CredentialsCache`，则运行时将尝试所有这些方法，从最强到最弱。某些协议（例如 NTLM）需要从客户端到服务器的多个请求。理论上，Digest 应该与一个单一的一起工作，不知道为什么它会发送两次请求。

关于您的代理问题，有两种不同的身份验证：

1.  目标 Web 服务器的身份验证，代理只是简单地通过它，您的客户端不需要任何特殊代码。
2.  除此之外，代理本身也可能需要身份验证——这可能与目标 Web 服务器不同。

您指定这些使用

```
var proxy = new WebProxy ("http://localhost:3128/");
proxy.Credentials = new NetworkCredential ("username", "password"); 
```

进而

```
WebRequest.DefaultWebProxy = proxy; 
```

或者

```
request.Proxy = proxy; 
```

`WebProxy`如果您的代理服务器不使用任何身份验证，请不要在 上设置任何凭据。

如果您在使用代理服务器时无法进行身份验证，请查看使用 Wireshark 在三方（Web 服务器、代理、客户端）之间发送的实际请求。

# django - 我应该如何处理 MultiValueDictKeyError？

> ID：14641498
> 
> 赞同：1
> 
> 时间：2013-02-01T07:20:04.797
> 
> 标签：django, django-forms

我正在为我的应用程序制作结帐表单，但是当我提交时，Django 返回一个`MultiValueDictKeyError`异常。

```
Traceback:
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/core/handlers/base.py" in get_response
  111\.                         response = callback(request, *callback_args, **callback_kwargs)
File "/home/mats-invasion/projects/f4l/f4l/live/views.py" in show_checkout
  33\.           if postdata['submit'] == 'place_order':
File "/home/mats-invasion/projects/f4l/env/local/lib/python2.7/site-packages/django/utils/datastructures.py" in __getitem__
  258\.             raise MultiValueDictKeyError("Key %r not found in %r" % (key, self))

Exception Type: MultiValueDictKeyError at /orders/checkout/
Exception Value: "Key 'submit' not found in <QueryDict: {u'delivery_address': [u'klab Telecom House,6th floor'], u'billing_address': [u'klab 6th telecom house'], u'billing_city': [u'kigza'], u'phone': [u'+2500855598432'], u'billing_name': [u'mar'], u'credit_card_type': [u'VISA'], u'credit_card_expire_month': [u'01'], u'credit_card_number': [u'4007000000027'], u'delivery_name': [u'mar'], u'credit_card_cvv': [u'567'], u'credit_card_expire_year': [u'2016'], u'csrfmiddlewaretoken': [u'UGu4G75x2CxPFfnUdGSnVZzueedNxtu6'], u'delivery_city': [u'kigali'], u'email': [u'marxmass@gmail.com']}>" 
```

这是表单视图：

```
def show_checkout(request):
    if order.is_empty(request):
        cart_url = urlresolvers.reverse('order_index')
        return HttpResponseRedirect(cart_url)
    if  request.method == 'POST':
        postdata = request.POST.copy()
        form = CheckoutForm(postdata)
        if form.is_valid():
            response = checkout.process(request)
            order_number = response.get('order_number',0)
            error_message = response.get('message','')
            if order_number:            
                request.session['order_number'] = order_number
            if postdata['submit'] == 'place_order':
                reciept_url = urlresolvers.reverse('checkout_reciept')
                return HttpResponseRedirect(reciept_url)
    else:
        form = CheckoutForm()
    context = {
        'form':form,
    }
    return render_to_response('checkout/checkout.html',context,context_instance=RequestContext(request)) 
```

这是在我的模板中执行的操作，

```
<input type="submit" value="Place order" class="submit" /> 
```

任何帮助表示赞赏..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T08:31:42.433

将您的提交输入更改为名称为`submit`，否则它将不会进入发布数据。

```
<input type="submit" value="Place order" class="submit" name="submit" /> 
```

此外，该值将是`'Place order'`，而不是`'place_order'`。

# c# - SimpleInjector 是否有能力在使用 RegisterManyForOpenGeneric/GetAllInstances 时分配优先级顺序

> ID：14641499
> 
> 赞同：1
> 
> 时间：2013-02-01T07:20:06.140
> 
> 标签：c#, inversion-of-control, simple-injector

我使用 SimpleInjector 作为我的 IoC 容器。我已经创建了一个发布/订阅框架，我现在需要能够通过让订阅者指出他们的执行优先级来对其进行改进。例如，我可以创建一个订阅者来预加载事务剩余部分所需的所有数据。

我能想到的一种方法是`[SubscriberPriority]`在注册过程中创建一个属性来指示需求，`RegisterManyForOpenGeneric`但我还没有深入研究。

有没有办法管理`GetAllInstances`返回注册的订单？

更新：

我刚刚想到的另一个选择是使用 CoC（Convention over Configuration）在实例返回时对它们进行排序`GetAllInstances`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:08:48.013

由于您表明您正在使用`GetAllInstances`，我怀疑您使用了一个`RegisterManyForOpenGeneric`接受回调委托的重载，如下所示：

```
container.RegisterManyForOpenGeneric(
    typeof(ISubstriber<>),
    (type, impls) => container.RegisterAll(type, impls),
    typeof(ISubstriber<>).Assembly); 
```

在这种情况下，将实现列表提供给委托的顺序取决于它们从 .NET 元数据返回的顺序。`RegisterManyForOpenGeneric`只需调用`GetExportedTypes()`提供的程序集。返回这些类型的顺序非常不可靠，并且在未来的 C# 版本中甚至可能通过重新编译代码和在未来的 CLR 版本中仅通过重新启动应用程序来更改。

因此，如果实现必须按特定顺序放置在列表中，您所要做的就是对实现列表进行排序：

```
(serviceType, impls) => container.RegisterAll(serviceType,
    impls.OrderBy(type => [some condition])); 
```

但是，总的来说，我会说事情的顺序无关紧要。如果它们确实重要，请仔细查看您的设计。这里可能存在一些问题。例如，您想用`[SubscriberPriority]`属性标记某些类的事实表明您可能缺少抽象。也许您应该给他们自己的界面并单独注册。

我总是建议做的另一件事是通过将注册列表放在复合后面来隐藏应用程序的注册列表：

```
public class CompositeSubscriber<T> : ISubscriber<T>
{
    private IEnumerable<ISubscriber<T>> subscribers;

    public CompositeSubscriber(
        IEnumerable<ISubstriber<T>> subscribers)
    {
        this.subscribers = subscribers;
    }

    public void Handle(T value)
    {
        foreach (var subscriber in this.subscribers)
        {
            subscriber.Handle(value);
        }
    }
} 
```

该复合材料可以按如下方式注册：

```
container.RegisterSingleOpenGeneric(typeof(ISubscriber<>),
    typeof(CompositeSubscriber<>); 
```

这种情况下，应用程序可以简单地依赖`ISubscriber<T>`而不是`IEnumerable<ISubscriber<T>>`. `RegisterManyForOpenGeneric`现在您可以使用组合来控制顺序，而不是使用方法的回调来控制顺序。

# html - 关于使用动力学 js 保存图像的问题

> ID：14641506
> 
> 赞同：0
> 
> 时间：2013-02-01T07:20:29.623
> 
> 标签：html, kineticjs

将图像加载到舞台后，如果我尝试使用代码保存图像

```
stage.toDataURL({
                callback: function(dataUrl) {
                window.open(dataUrl);
                },
                mimeType: 'image/jpeg',
                quality: 0.5
            }); 
```

我在 kinetic.js 中遇到安全脚本错误（我正在使用 kinetic-v4.0.0.js）

```
SecurityError: The operation is insecure.
return this.element.toDataURL(); 
```

请在这种情况下帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T17:27:10.590

不管是不是 KineticJS，同源策略适用于任何地方，除非有明确说明；[http://en.wikipedia.org/wiki/Same_origin_policy](http://en.wikipedia.org/wiki/Same_origin_policy)

正如您在文档和教程中看到的，您不能使用其他域的源来制作您的域 png 或 jpeg。这也适用于 toImage 方法

文档： http: [//kineticjs.com/docs/symbols/Kinetic.Stage.php#toDataURL](http://kineticjs.com/docs/symbols/Kinetic.Stage.php#toDataURL)

教程：[http ://www.html5canvastutorials.com/advanced/html5-canvas-get-image-data-url/](http://www.html5canvastutorials.com/advanced/html5-canvas-get-image-data-url/)

因此，要解决此问题，您需要将其他源图像下载到您的网站，然后在您的域下使用它。但是，如您所知，必须检查版权。

# android - 无法解析持有 url 的 JSON 响应

> ID：14641507
> 
> 赞同：1
> 
> 时间：2013-02-01T07:20:42.290
> 
> 标签：android, json

我正在尝试解析 JSON 响应，我可以在其中解析标题、日期、内容和名称，但我无法解析 url 并将其显示在 Listview 中。当我解析 url 它在 textview 中显示图像 url 任何人都可以指导我正确的路径

```
 try {
                     posts = json.getJSONArray(KEY_POSTS);

        // looping through all song nodes <song>
                for(int i = 0; i < posts.length(); i++){
                    JSONObject c = posts.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(KEY_ID);
                    String siteurl = c.getString(KEY_SITEURL);
                    String title = c.getString(KEY_TITLE);
                    String date = c.getString(KEY_DATE);
                    String content = c.getString(KEY_CONTENT);
                    // to remove all <P> </p> and <br /> and replace with ""
                     content = content.replace("<br />", "");
                     content = content.replace("<p>", "");
                     content = content.replace("</p>", "");

                    //authornumber is agin  JSON Object
                    JSONObject author = c.getJSONObject(KEY_AUTHOR);
                    String name = author.getString(KEY_NAME);

                    String url1 = null;
                    String slug1 = null;
                    try {
                    JSONArray atta = c.getJSONArray("attachments");
                    for(int j = 0; j < atta.length(); j++){
                        JSONObject d = atta.getJSONObject(j);

                        slug1 = d.getString(KEY_SLUG);

                        JSONObject images = d.getJSONObject(KEY_IMAGES);

                        JSONObject thumbnail = images.getJSONObject(KEY_THUMB_URL);
                        url1 = thumbnail.getString(KEY_URL);

                    }
                    } catch (Exception e) {
                        e.printStackTrace();

                    }

            // creating new HashMap
            HashMap<String, String> map = new HashMap<String, String>();

            // adding each child node to HashMap key => value
            map.put(KEY_ID, id);
            map.put(KEY_TITLE, title);
            map.put(KEY_SITEURL, siteurl);
            map.put(KEY_DATE, date);
            map.put(KEY_NAME, name);
            map.put(KEY_CONTENT, content);
            map.put(KEY_SLUG, slug1);
            map.put(KEY_URL, url1);

            // adding HashList to ArrayList
            songsList.add(map);
                }   
                }catch (JSONException e) {
                    e.printStackTrace();

                    } 
```

# java - 检票面板（对话框）不起作用？

> ID：14641517
> 
> 赞同：0
> 
> 时间：2013-02-01T07:21:27.647
> 
> 标签：java, html, wicket

我正在尝试使用 new Dialog() 在注册链接上打开一个对话框，如下所示“注册”和“注册面板”这是我作为 wicket:id="register" 和 wicket:id="registerpanel" 添加到 html 页面中的两个 div .

//注册面板

```
registerDialog = new Dialog("register");
registerDialog.add(new CustomerRegistrationPanel("registerpanel", registerDialog));
add(registerDialog);

        // Register
        lnkRegister = new AjaxFallbackLink<String>("lnkRegister") {

            @Override
            public void onClick(AjaxRequestTarget ajaxRequestTarget) {
                // ajaxRequestTarget.add(registerPanel);
                registerDialog.open(ajaxRequestTarget);
                //setResponsePage(CustomerProfilePage.class);
            }

            @Override
            public boolean isVisible() {
                return !ZipSession.get().isValid();
            }
        };
        add(lnkRegister); 
```

但是我遇到了一个错误，

根本原因：

```
org.apache.wicket.markup.MarkupNotFoundException: Failed to find markup file associated. CustomerRegistrationPanel: [CustomerRegistrationPanel [Component id = register]]
at org.apache.wicket.markup.html.panel.AssociatedMarkupSourcingStrategy.getMarkup(AssociatedMarkupSourcingStrategy.java:97)
at org.apache.wicket.MarkupContainer.getMarkup(MarkupContainer.java:448)
at org.apache.wicket.Component.getMarkup(Component.java:737)
at org.apache.wicket.Component.getMarkupTag(Component.java:1422)
at org.apache.wicket.Component.getMarkupIdFromMarkup(Component.java:777)
at org.apache.wicket.Component.getMarkupIdImpl(Component.java:1479)
at org.apache.wicket.Component.getMarkupId(Component.java:1525)
at org.apache.wicket.Component.getMarkupId(Component.java:1592)
at com.visural.wicket.component.dialog.Dialog$1.getDivId(Dialog.java:68)
at com.visural.wicket.component.dialog.Dialog$1.getJS(Dialog.java:59)
at com.visural.wicket.component.dialog.Dialog$1.renderHead(Dialog.java:54)
at org.apache.wicket.Component.renderHead(Component.java:2707)
at org.apache.wicket.markup.renderStrategy.ChildFirstHeaderRenderStrategy$1.component(ChildFirstHeaderRenderStrategy.java:82)
at org.apache.wicket.markup.renderStrategy.DeepChildFirstVisitor.visit(DeepChildFirstVisitor.java:96)
at org.apache.wicket.markup.renderStrategy.DeepChildFirstVisitor.visit(DeepChildFirstVisitor.java:87)
at org.apache.wicket.markup.renderStrategy.DeepChildFirstVisitor.visit(DeepChildFirstVisitor.java:87)
at org.apache.wicket.markup.renderStrategy.DeepChildFirstVisitor.visit(DeepChildFirstVisitor.java:87)
at org.apache.wicket.markup.renderStrategy.DeepChildFirstVisitor.visit(DeepChildFirstVisitor.java:51)
at org.apache.wicket.markup.renderStrategy.ChildFirstHeaderRenderStrategy.renderChildHeaders(ChildFirstHeaderRenderStrategy.java:77)
at org.apache.wicket.markup.renderStrategy.ChildFirstHeaderRenderStrategy.renderHeader(ChildFirstHeaderRenderStrategy.java:56)
at org.apache.wicket.markup.html.internal.HtmlHeaderContainer.onComponentTagBody(HtmlHeaderContainer.java:134)
at org.apache.wicket.markup.html.panel.DefaultMarkupSourcingStrategy.onComponentTagBody(DefaultMarkupSourcingStrategy.java:72)
at org.apache.wicket.Component.internalRenderComponent(Component.java:2556)
at org.apache.wicket.MarkupContainer.onRender(MarkupContainer.java:1534)
at org.apache.wicket.Component.internalRender(Component.java:2386)
at org.apache.wicket.Component.render(Component.java:2314)
at org.apache.wicket.MarkupContainer.renderNext(MarkupContainer.java:1432)
at org.apache.wicket.MarkupContainer.renderAll(MarkupContainer.java:1596)
at org.apache.wicket.Page.onRender(Page.java:907)
at org.apache.wicket.markup.html.WebPage.onRender(WebPage.java:140)
at org.apache.wicket.Component.internalRender(Component.java:2386)
at org.apache.wicket.Component.render(Component.java:2314)
at org.apache.wicket.Page.renderPage(Page.java:1035)
at org.apache.wicket.request.handler.render.WebPageRenderer.renderPage(WebPageRenderer.java:105)
at org.apache.wicket.request.handler.render.WebPageRenderer.respond(WebPageRenderer.java:224)
at org.apache.wicket.request.handler.RenderPageRequestHandler.respond(RenderPageRequestHandler.java:167)
at org.apache.wicket.request.cycle.RequestCycle$HandlerExecutor.respond(RequestCycle.java:784)
at org.apache.wicket.request.RequestHandlerStack.execute(RequestHandlerStack.java:64)
at org.apache.wicket.request.cycle.RequestCycle.execute(RequestCycle.java:255)
at org.apache.wicket.request.cycle.RequestCycle.processRequest(RequestCycle.java:212)
at org.apache.wicket.request.cycle.RequestCycle.processRequestAndDetach(RequestCycle.java:283)
at org.apache.wicket.protocol.http.WicketFilter.processRequest(WicketFilter.java:188)
at org.apache.wicket.protocol.http.WicketFilter.doFilter(WicketFilter.java:244)
at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:240)
at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:164)
at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:462)
at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:164)
at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:100)
at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:563)
at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:403)
at org.apache.coyote.http11.Http11Processor.process(Http11Processor.java:301)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:162)
at org.apache.coyote.http11.Http11Protocol$Http11ConnectionHandler.process(Http11Protocol.java:140)
at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:309)
at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
at java.lang.Thread.run(Thread.java:662) 
```

请帮我解决这个问题。提前致谢。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-06-20T08:42:16.557

即使您已正确命名并放置了 html 文件，如果您在其中使用了错误的根元素，也会出现此错误。

例如以`<wicket:extend...>`代替开头`<wicket:panel...>`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-04-22T13:19:33.437

当我遇到这个问题时，我没有在这个问题中找到答案，所以我回来给出我找到的解决方案。这是我对这个问题的检查清单。

*   检查所有 <wicket:extend>、<wicket:child> 和 <wicket:panel> 和标签是否正确（通过 thoredge 和 Nicky）
*   检查同一目录中是否有 .html 和 .java 检票口文件（作者：Robert Niestroj）
*   检查是否没有任何设置可以在 .html 文件的不同位置进行检票口搜索。
*   检查路径中是否区分大小写的任何操作系统差异（请参阅评论：HaMMeReD）
*   检查 .html 文件是否也在构建时复制到与 .class 文件相同的目录。
*   检查 .html 是否也添加到 .war 文件中。

希望这可以帮助那些也忘记了他们的 ant 构建文件中的那一行的人；）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T08:15:50.640

您似乎缺少`html`该类的文件`CustomerRegistrationPanel`。查找名为的文件`CustomerRegistrationPanel.html`并查看它是否与 .java 文件位于同一目录中。

# android - Android 上 cocos2d-x 中的 CCRenderTexture

> ID：14641529
> 
> 赞同：2
> 
> 时间：2013-02-01T07:22:20.067
> 
> 标签：android, opengl-es-2.0, cocos2d-x

我在游戏开始时创建一个`CCRenderTexture`并在其上绘制一些东西。但有时当我启动应用程序时，它会在 CCRenderTexture.cpp 中的以下行暂停并显示警报。我的应用程序也是黑色的。

```
CCAssert(glCheckFramebufferStatus(GL_FRAMEBUFFER) == GL_FRAMEBUFFER_COMPLETE, "Could not attach texture to framebuffer"); 
```

这有什么问题？我需要帮助，我的 cocos2d-x 版本是 2.1.0。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T06:57:40.157

我找到了答案，我在游戏开始时创建了一个 CCRenderTexture，现在创建它还为时过早

# php - 打印按钮从数据库中打印一张表

> ID：14641533
> 
> 赞同：-1
> 
> 时间：2013-02-01T07:22:57.430
> 
> 标签：php, database, printing, row

我想知道如何从我的数据库中打印下表。这是在浏览器上显示时的形式。

我想打印这张表，我很困惑，因为我做了一个打印按钮，但是当我按下它时，它会打印整个网页。

如何只打印表格？

```
DATE:   ||AMOUNT:

2013   || 2000

2013   || 200

2013   || 2000

2013   || 2000

TOTAL AMOUNT PAID:  6200

TOTAL TUITION:    9000

REMAINING BALANCE:  2800 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:35:20.013

```
<div id="printableArea">
      // wrap your content within this div
      DATE:   ||AMOUNT:

      2013   || 2000

      2013   || 200

      2013   || 2000

      2013   || 2000

      TOTAL AMOUNT PAID:  6200

      TOTAL TUITION:    9000

      REMAINING BALANCE:  2800
</div>

<input type="button" onclick="printDiv('printableArea')" value="Print" /> 
```

然后按钮单击javascript

```
function printDiv(divName) {
     var printContents = document.getElementById(divName).innerHTML;
     var originalContents = document.body.innerHTML;

     document.body.innerHTML = printContents;

     window.print();

     document.body.innerHTML = originalContents;
} 
```

来源：[SO解决方案之一](https://stackoverflow.com/questions/468881/print-div-id-printarea-div-only/7532581#7532581)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:32:09.350

正如 tradyblix 在他们的评论中所说，您需要创建一个只有表格的页面。您可以有一个按钮将您带到该页面。

在该页面中，您可以让 javascript 自动打印它。要在头部执行此操作，请将其放入

```
<script language="javascript" type="text/javascript">
function print_page() {
  window.print();
}
</script> 
```

在身体标签上

```
<body onload="print_page()"> 
```

# javascript - 使用 dojo 删除 Para 标签

> ID：14641538
> 
> 赞同：0
> 
> 时间：2013-02-01T07:23:27.500
> 
> 标签：javascript, html, regex, dojo

我的页面内容正在使用 para 标签呈现。数据来自外部 url。我必须在使用 dojo 在页面上呈现后剥离 p 标签。例如

```
<div class="truncateP">
        <p>The Stackoverflow is awesome</p>
</div> 
```

我的页面显示“p The stackoverflow is awesome /p”，我必须使用 dojo 将其剥离。我只想得到没有 para 标记的 stackoverflow 很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T12:02:12.503

在正则表达式上试过这个：

*   搜索字符串：`\<p\>(.*)\</p>`
*   替换字符串：`\1`

希望对你有效。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:10:45.853

您可以只搜索和替换 div 元素。例如：

```
<div class="truncateP">
    <p>The Stackoverflow is awesome</p>
</div>
<script type="text/javascript">
    require([
        "dojo/ready",
        "dojo/query",
        "dojo/dom-attr"
    ], function(ready, $, domAttr){
        ready(function(){ // Wait till the page is rendered
            var div = $(".truncateP");
            if(div.length > 0){ // check that the div is found
                var html = domAttr.get(div[0], "innerHTML");
                html = html.replace(/\<p\>|\<\/p\>/g,"");
                domAttr.set(div[0], "innerHTML", html);
            }
        });
    });
</script> 
```

对此有许多警告：

1.  如果您从外部 url 加载，则必须确保内容已加载并呈现到屏幕，然后再尝试更改它。使用 ready() 是不够的。
2.  dom 查询正在搜索 class = truncateP。如果页面上有多个具有该类的页面，则只会解析第一个。
3.  它将删除内容中的所有段落元素。

# javascript - 禁用突出显示和从 HTML 页面复制内容，文本字段中的内容除外？

> ID：14641541
> 
> 赞同：0
> 
> 时间：2013-02-01T07:23:31.093
> 
> 标签：javascript, css

我想阻止 html 页面中的复制功能。我已经看到[了这个话题](https://stackoverflow.com/questions/8352367)。

现在，我完成并完成它。

这是我用过的代码

```
<script type='text/javascript'>
    document.ondragstart = function() { return false; };

</script>
<style type='text/css'>
body
{
    -webkit-touch-callout: none;
    -webkit-user-select: none; /* Webkit */
    -moz-user-select: none;    /* Firefox */
    -ms-user-select: none;     /* IE 10  */
    /* Currently not supported in Opera but will be soon */
    -o-user-select: none;
    user-select: none;
}
</style> 
```

**此代码可以禁用从所有元素**复制内容并在 IE、Chrome 和 FF 中运行良好

但是，我的客户仍然想从任何输入文件中复制内容（类型=文本，文本区域）

那么1）如何使**文本字段，textarea只能**复制内容？和其他元素仍然禁用复制内容功能

谢谢你。

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:29:15.657

建议您的客户一旦在浏览器上提供内容，就无法保护它。一旦它在客户端上，它就完全易受攻击。所有建议的预防措施都是愚蠢和徒劳的。即使您将它包装在 .swf 中并混淆 ActionScript，任何想要它的人都可以得到它。

答案是停止并引导您的客户不要屈服于他们无知的意愿。

没有冒犯的意思。

# android - 在设备开启时强制关闭我的应用

> ID：14641544
> 
> 赞同：2
> 
> 时间：2013-02-01T07:23:37.770
> 
> 标签：android, forceclose

当我重新启动我的 Android 4.0 时，它会在主屏幕上显示我的应用程序强制关闭警报。当我进入我的应用程序时，它会完美打开..我在我的应用程序中处理 SQL lite 概念..它会导致这个错误..？

我打开设备时的日志猫：

```
02-11 15:56:12.890: E/AndroidRuntime(768): FATAL EXCEPTION: main
02-11 15:56:12.890: E/AndroidRuntime(768): java.lang.RuntimeException: Unable to instantiate receiver com.sree.weekdayview.calendar.AnCalReceiver: java.lang.ClassNotFoundException: com.sree.weekdayview.calendar.AnCalReceiver in loader dalvik.system.PathClassLoader[/data/app/com.sree.weekdayview.calendar-1.apk]
02-11 15:56:12.890: E/AndroidRuntime(768):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:1952)
02-11 15:56:12.890: E/AndroidRuntime(768):  at android.app.ActivityThread.access$1400(ActivityThread.java:122)
02-11 15:56:12.890: E/AndroidRuntime(768):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1077)
02-11 15:56:12.890: E/AndroidRuntime(768):  at android.os.Handler.dispatchMessage(Handler.java:99)
02-11 15:56:12.890: E/AndroidRuntime(768):  at android.os.Looper.loop(Looper.java:132)
02-11 15:56:12.890: E/AndroidRuntime(768):  at android.app.ActivityThread.main(ActivityThread.java:4126)
02-11 15:56:12.890: E/AndroidRuntime(768):  at java.lang.reflect.Method.invokeNative(Native Method)
02-11 15:56:12.890: E/AndroidRuntime(768):  at java.lang.reflect.Method.invoke(Method.java:491)
02-11 15:56:12.890: E/AndroidRuntime(768):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:844)
02-11 15:56:12.890: E/AndroidRuntime(768):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:602)
02-11 15:56:12.890: E/AndroidRuntime(768):  at dalvik.system.NativeStart.main(Native Method)
02-11 15:56:12.890: E/AndroidRuntime(768): Caused by: java.lang.ClassNotFoundException: com.sree.weekdayview.calendar.AnCalReceiver in loader dalvik.system.PathClassLoader[/data/app/com.sree.weekdayview.calendar-1.apk]
02-11 15:56:12.890: E/AndroidRuntime(768):  at dalvik.system.PathClassLoader.findClass(PathClassLoader.java:251)
02-11 15:56:12.890: E/AndroidRuntime(768):  at java.lang.ClassLoader.loadClass(ClassLoader.java:540)
02-11 15:56:12.890: E/AndroidRuntime(768):  at java.lang.ClassLoader.loadClass(ClassLoader.java:500)
02-11 15:56:12.890: E/AndroidRuntime(768):  at android.app.ActivityThread.handleReceiver(ActivityThread.java:1947)
02-11 15:56:12.890: E/AndroidRuntime(768):  ... 10 more 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:32:10.037

它提供了几个问题。如果您在单击电源按钮关闭设备时没有任何相同的问题（不是关闭电源，只是关闭屏幕），则可能不是破坏和创建问题。

重启问题主要是由于滥用Service造成的。您必须写下更多详细信息，包括 logcat 以获得正确答案；p

# android - 在android内部存储器中存储gif图像

> ID：14641545
> 
> 赞同：6
> 
> 时间：2013-02-01T07:23:41.500
> 
> 标签：android, image, gif

我对android很陌生。我想将图像保存到内存中，然后从内存中检索图像并将其加载到图像视图中。我已使用以下代码成功地将图像存储在内部存储器中：

```
void saveImage() {
    String fileName="img"+ cnt +".jpg";
    //File file=new File(fileName);
    try 
    {

       FileOutputStream fOut=openFileOutput(fileName, MODE_PRIVATE);
       bmImg.compress(Bitmap.CompressFormat.JPEG, 100, fOut);

    }
    catch (Exception e) 
    {
       e.printStackTrace();
    }
} 
```

此代码用于保存 jpg 图像。如果我想保存 gif 图像，我该怎么做？请帮我。我只能看到 jpg 和 png 的选项。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:28:11.807

位图仅适用于 png、jpg 等，而 gif 是图像列表，因此您必须将其作为二进制文件使用并使用[FileOutputStream](http://docs.oracle.com/javase/1.4.2/docs/api/java/io/FileOutputStream.html)和`write(byte[])`

# c - 当我为它们分配不同的值时，为什么 2 个字符串会打印相同的值？

> ID：14641549
> 
> 赞同：3
> 
> 时间：2013-02-01T07:24:25.297
> 
> 标签：c, string, packet, icmp, spoof

```
void
got_packet(u_char *args, const struct pcap_pkthdr *header, const u_char *packet)
{

static int count = 1;                   /* packet counter */

/* declare pointers to packet headers */
const struct sniff_ethernet *ethernet;  /* The ethernet header [1] */
const struct sniff_ip *ip;              /* The IP header */
const struct sniff_tcp *tcp;            /* The TCP header */
const char *payload;                    /* Packet payload */

int size_ip;
int size_tcp;
int size_payload;

printf("\nPacket number %d:\n", count);
count++;

/* define ethernet header */
ethernet = (struct sniff_ethernet*)(packet);

/* define/compute ip header offset */
ip = (struct sniff_ip*)(packet + SIZE_ETHERNET);
size_ip = IP_HL(ip)*4;
if (size_ip < 20) {
    printf("   * Invalid IP header length: %u bytes\n", size_ip);
    return;
}

/* print source and destination IP addresses */
printf("       From: %s\n", inet_ntoa(ip->ip_src));//<-------------------------
printf("         To: %s\n", inet_ntoa(ip->ip_dst));//<------------------------

/* determine protocol */    
switch(ip->ip_p) {
    case IPPROTO_TCP:
        printf("   Protocol: TCP\n");
        break;
    case IPPROTO_UDP:
        printf("   Protocol: UDP\n");
        return;
    case IPPROTO_ICMP:
        printf("   Protocol: ICMP\n");

     /*********************************************************************************************/

    char *sinfo[1];
sinfo[0] = inet_ntoa(ip->ip_src);//<----------------------------

char *dinfo[1];
dinfo[0] = inet_ntoa(ip->ip_dst);//<----------------------------

int s, i;
char buf[400];
struct ip *ip = (struct ip *)buf;
struct icmphdr *icmp = (struct icmphdr *)(ip + 1);
struct hostent *hp, *hp2;
struct sockaddr_in dst;
int offset;
int on;
//int num = 5;

 printf("%s- saddress is the spoofed source address\n", sinfo[0]);
 printf("%s- dstaddress is the target\n", dinfo[0]);
 printf("- number is the number of packets to send, 2 is the default\n");

/* Loop based on the packet number */
for(i=1;i<=2;i++)
{
        on = 1;
    bzero(buf, sizeof(buf));

       /* Create RAW socket */
       if((s = socket(AF_INET, SOCK_RAW, IPPROTO_RAW)) < 0)
       {
        perror("socket() error");
        /* If something wrong, just exit */
            exit(1);
       }

       /* socket options, tell the kernel we provide the IP structure */
       if(setsockopt(s, IPPROTO_IP, IP_HDRINCL, &on, sizeof(on)) < 0)
       {
            perror("setsockopt() for IP_HDRINCL error");
            exit(1);
       }

       if((hp = gethostbyname(dinfo[0])) == NULL)
       {
            if((ip->ip_dst.s_addr = inet_addr(dinfo[0])) == -1)
            {
                fprintf(stderr, "%s: Can't resolve, unknown host.\n", dinfo[0]);
                exit(1);
            }   
       }
    else
        bcopy(hp->h_addr_list[0], &ip->ip_dst.s_addr, hp->h_length);

    /* The following source address just redundant for target to collect */
    if((hp2 = gethostbyname(sinfo[0])) == NULL)
    {
     if((ip->ip_src.s_addr = inet_addr(sinfo[0])) == -1)
     {
         fprintf(stderr, "%s: Can't resolve, unknown host\n", sinfo[0]);
         exit(1);
     }
    }
    else
        bcopy(hp2->h_addr_list[0], &ip->ip_src.s_addr, hp->h_length);

    printf("Sending to %s from spoofed %s\n", inet_ntoa(ip->ip_dst), sinfo[0]);

    /* Ip structure, check the ip.h */
    ip->ip_v = 4;
    ip->ip_hl = sizeof*ip >> 2;
    ip->ip_tos = 0;
    ip->ip_len = htons(sizeof(buf));
    ip->ip_id = htons(4321);
    ip->ip_off = htons(0);
    ip->ip_ttl = 255;
    ip->ip_p = 1;
    ip->ip_sum = 0; /* Let kernel fills in */

    dst.sin_addr = ip->ip_dst;
    dst.sin_family = AF_INET;

    icmp->type = ICMP_ECHO;
    icmp->code = 0;
    /* Header checksum */
    icmp->checksum = htons(~(ICMP_ECHO << 8));

    for(offset = 0; offset < 65536; offset += (sizeof(buf) - sizeof(*ip)))
    {
    ip->ip_off = htons(offset >> 3);

    if(offset < 65120)
     ip->ip_off |= htons(0x2000);
    else
      ip->ip_len = htons(418); /* make total 65538 */

    /* sending time */
    if(sendto(s, buf, sizeof(buf), 0, (struct sockaddr *)&dst, sizeof(dst)) < 0)
    {
       fprintf(stderr, "offset %d: ", offset);
       perror("sendto() error");
    }
 else
   printf("sendto() is OK.\n");

    /* IF offset = 0, define our ICMP structure */
    if(offset == 0)
    {
    icmp->type = 0;
    icmp->code = 0;
    icmp->checksum = 0;
    }
   }
  /* close socket */
  close(s);
  sleep(300);
 }
//    return 0;
//}

/******************************************************************************************/

        return;
    case IPPROTO_IP:
        printf("   Protocol: IP\n");
        return;
    default:
        printf("   Protocol: unknown\n");
        return;
} 

/*
 *  OK, this packet is TCP.
 */

/* define/compute tcp header offset */
tcp = (struct sniff_tcp*)(packet + SIZE_ETHERNET + size_ip);
size_tcp = TH_OFF(tcp)*4;
if (size_tcp < 20) {
    printf("   * Invalid TCP header length: %u bytes\n", size_tcp);
    return;
}

printf("   Src port: %d\n", ntohs(tcp->th_sport));
printf("   Dst port: %d\n", ntohs(tcp->th_dport));

/* define/compute tcp payload (segment) offset */
payload = (u_char *)(packet + SIZE_ETHERNET + size_ip + size_tcp);

/* compute tcp payload (segment) size */
size_payload = ntohs(ip->ip_len) - (size_ip + size_tcp);

/*
 * Print payload data; it might be binary, so don't just
 * treat it as a string.
 */
if (size_payload > 0) {
    printf("   Payload (%d bytes):\n", size_payload);
    print_payload(payload, size_payload);
}

return;
} 
```

在上面的代码中，我试图保存 2 个 IP 地址。一个是源IP地址，另一个是目标IP地址。我创建了 2 个字符串并将源地址存储在字符串变量 sinfo 中，将目标地址存储在标记为 dinfo 的变量中。但是，sinfo 和 dinfo 输出相同的地址。这是输出：

包号 1：

来自：192.168.29.138

至：192.168.0.130

协议：ICMP

192.168.0.130-saddress是被欺骗的源地址

192.168.0.130- dstaddress 是目标

*   number 是要发送的数据包数，默认为 2

从欺骗的 192.168.0.130 发送到 192.168.0.130

它为 From: 和 To: 正确打印输出，但对于 sinfo 和 dinfo 不正确。我不知道问题是什么。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T07:27:33.837

`inet_ntoa()`返回指向静态缓冲区的指针，因此第二次调用会覆盖第一次调用的结果：

```
char *sinfo[1];
sinfo[0] = inet_ntoa(ip->ip_src);

char *dinfo[1];
dinfo[0] = inet_ntoa(ip->ip_dst); 
```

`dinfo[0]`现在`sinfo[0]`两者都指向同一个（静态）缓冲区-缓冲区仅包含第二次调用的结果。您需要将结果从 inet_ntoa() 复制到您自己的缓冲区中（我也不确定为什么要使用大小为 1 的指针数组，一个简单的指针就足够了）：

```
char *sinfo = strdup(inet_ntoa(ip->ip_src));
char *dinfo = strdup(inet_ntoa(ip->ip_dst));
...
free(sinfo);
free(dinfo); 
```

* * *

正如@cnicutar 所建议的那样，您也可以使用不使用静态缓冲区的[inet_ntop ，但允许您直接传递目标缓冲区：](http://www.beej.us/guide/bgnet/output/html/multipage/inet_ntopman.html)

```
char str[INET_ADDRSTRLEN];
inet_ntop(AF_INET, &addr, str, INET_ADDRSTRLEN); 
```

此外，`inet_ntoa()`不处理**IPv6**，而`inet_ntop()`处理。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T07:28:22.807

您不应该存储由返回的值`inet_ntoa`，因为它会被后续调用重写：

> 应用程序使用
> 
> inet_ntoa() 的返回值可能指向静态数据，这些静态数据可能会被后续对 inet_ntoa() 的调用覆盖。

相反，您应该使用`strdup`：

```
sinfo[0] = strdup(inet_ntoa(ip->ip_src)); 
```

并记住`free(sinfo[0])`。也一样`dinfo[0]`。

* * *

话虽如此，迁移到推荐在许多层面上**`inet_ntop`都更好**，并且还将解决您的特定问题。

# java - java应用程序tcp连接丢失检测在Windows 7中有所不同？

> ID：14641552
> 
> 赞同：3
> 
> 时间：2013-02-01T07:24:45.297
> 
> 标签：java, windows-7, tcp, connection, detect

我有一个在 Windows XP 和 Windows 7 上运行的 java 应用程序。这个应用程序与另一台计算机有一个开放的 tcp 连接。

现在重点来了：在 XP 机器上，通过返回 -1 或 SocketException，拔出网络电缆对我的 inputstream.read 方法产生了几乎直接的影响。这是我检测网络连接丢失的一件事。在 Win7 机器上拔下网络电缆时，Windows 本身在任务栏中的连接图标中告诉我这一点，但我的 Java 应用程序没有得到任何提示。就好像什么都没发生过一样。

TCP 在 Windows 7 上的行为是否不同，或者 Windows7 是否会从其应用程序中屏蔽此信息？

```
package tcpconnectionlossdetectiontest;

import java.io.IOException;
import java.io.InputStream;
import java.net.ServerSocket;
import java.net.Socket;
import java.net.SocketException;
import java.net.SocketTimeoutException;

public class TcpListener extends Thread {
  private int _portNo = 23456;
  private boolean _done = false;

  public static void main(String[] args) {
    int port = 23456;

    if (args.length > 0) {
      int position = -1;
      do {
        String arg = args[++position].trim();
        if (arg.equalsIgnoreCase("-p") || arg.equalsIgnoreCase("--PortNo")) {
          String argParameter = args[++position].trim();
          // e.g. store additional argument
          try {
            port = Integer.parseInt(argParameter);
          } catch (NumberFormatException nfex) {
            port = 23456;
          }
          System.out.println("Argument " + position + " (" + arg + ", " + argParameter + "): port number set to " + port);
        } else {
          System.out.println("Argument " + position + " (" + arg + ") unknown.");
        }
      }
      while (position + 1 < args.length);
      // Parsing command line arguments ready.
    }

    TcpListener listener = new TcpListener(port);
    listener.start();
  }

  public TcpListener(int portNo) {
    this._portNo = portNo;
  }

  public void run() {
    Socket s = null;
    InputStream is = null;
    byte[] buf = new byte[1000];
    int readResult = 0;
    int maxOpen = 3;
    int openCounter = 0;
    try {
      ServerSocket sSocket = new ServerSocket(this._portNo);
      while (openCounter < maxOpen) {
        if (s == null) {
          try {
            System.out.println("waiting for connection on port " + this._portNo);
            sSocket.setSoTimeout(60000);
            s = sSocket.accept();
            if (s != null) {
              System.out.println("got connection on port " + this._portNo);
              openCounter++;
              is = s.getInputStream();
            }
          } catch (SocketTimeoutException stex) {
            System.out.println("no connection yet...");
          }
        }
        if (s != null && is != null) {
          readResult = is.read(buf, 0, 1000);
        }
        if (readResult == -1) {
          readResult = 0;
          System.out.println("connection broken...");
          is=null;
          if (s != null) {
            s.close();
            s=null;
          }
        } else if (readResult > 0) {
          System.out.println("Data read: " + new String (buf,0,readResult));
        }
      }
    } catch (IOException ioex) {
      System.out.println("IO exception caught:");
      ioex.printStackTrace();
    }
    this._done = true;
  }
} 
```

大约 5 秒后，windows xp 上的结果是断开连接后：

```
waiting for connection on port 23456
no connection yet...
waiting for connection on port 23456
got connection on port 23456
Data read: Here is a connection from win7 to xp...
Data read: 

IO exception caught:
java.net.SocketException: Connection reset
    at java.net.SocketInputStream.read(SocketInputStream.java:168)
    at tcpconnectionlossdetectiontest.TcpListener.run(TcpListener.java:73)
Process exited with exit code 0. 
```

断开连接后在 Windows 7 上的结果是：...什么都没有。应用程序在没有断开检测的情况下保持打开状态。

@edit 2013-02-01 09:54：发生在 jre6 和 jre7 中。

@edit 2013-02-01 10:59：发生在 32 位和 64 位 java 中。发生在 Win7 笔记本电脑和普通 PC 上。

@edit 2013-02-01 12:40：添加了代码示例和结果。

@edit 2031-02-06：由于我在互联网上一无所获，也没有人对此有解决方案，因此我在我们的应用程序中添加了一个主动乒乓机制。现在我最多可以在 20 秒后检测到。连接断开。

@edit 2013-02-08：另一种了解状态的方法是“netsh interface ip show interfaces”，但是在知道状态之前必须在 java 中解析命令行结果。也许有更好的方法来获取这些信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T17:25:08.260

Win7 上的 TCP/IP 与 XP 上的实现不同。一个重要的问题是它包含了他们称之为自动调整的东西。它旨在优化吞吐量等，但将连接状态更改传递给 JVM 可能会产生意想不到的副作用。

查看此处的线程以获取更多信息，包括如何将其关闭： [http ://social.technet.microsoft.com/Forums/en-US/w7itpronetworking/thread/1a6197df-ada7-4b12-92b7-a8a2f454f9a3](http://social.technet.microsoft.com/Forums/en-US/w7itpronetworking/thread/1a6197df-ada7-4b12-92b7-a8a2f454f9a3)

# linux - 如何在linux中查找特定进程每5秒的内存消耗

> ID：14641553
> 
> 赞同：9
> 
> 时间：2013-02-01T07:24:56.957
> 
> 标签：linux, memory, process, pid

我只想知道如何找到特定进程在特定时间（比如 5 秒）的内存消耗

我是 linux 新手。因此，将不胜感激执行此操作的详细步骤

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-02-01T08:06:14.233

使用`top -p PID`其中 PID 是进程 ID。应显示有关进程的信息，包括已使用的系统内存百分比。键入`d`和以秒为单位的整数以更改刷新率。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-02-01T07:42:32.543

使用[watch](http://linux.about.com/library/cmd/blcmdl1_watch.htm)定期执行你的脚本。这是一个例子：

```
watch 'cat /proc/status' --interval=5

watch 'ps aux' --interval=5 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2015-03-17T02:34:18.743

您可以使用 SNMP 来获取网络中特定设备中进程的内存和 CPU 使用情况:)

**要求：**

*   运行该进程的设备应该已安装并运行 snmp
*   snmp 应配置为接受来自您将运行以下脚本的请求（可以在 snmpd.conf 中配置）
*   您应该知道要监控的进程的进程 id(pid)

**笔记：**

*   ***HOST-RESOURCES-MIB::hrSWRunPerfCPU***是该进程消耗的系统总 CPU 资源的厘秒数。请注意，在多处理器系统上，该值可能会在 1 厘秒的实际（挂钟）时间内增加超过 1 厘秒。

*   ***HOST-RESOURCES-MIB::hrSWRunPerfMem***是分配给该进程的实际系统内存总量。

**

**进程监控脚本：**

**

```
echo "IP: "
read ip
echo "specfiy pid: "
read pid
echo "interval in seconds:"
read interval

while [ 1 ]
do
    date
    snmpget -v2c -c public $ip HOST-RESOURCES-MIB::hrSWRunPerfCPU.$pid
    snmpget -v2c -c public $ip HOST-RESOURCES-MIB::hrSWRunPerfMem.$pid
    sleep $interval;
done 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-02-01T07:36:37.577

这个之前发布的问题：

[如何测量应用程序或进程的实际内存使用情况？](https://stackoverflow.com/questions/131303/linux-how-to-measure-actual-memory-usage-of-an-application-or-process)

似乎它可以彻底解决您的问题。

编辑：我个人最喜欢的用于检查进程资源使用情况的 Linux 实用程序是顶级的，尽管由于我链接的问题中解释的原因，它可能会产生误导。

# iphone - iPhone Objective C MKMapView 在第一次打开时不会放大

> ID：14641555
> 
> 赞同：1
> 
> 时间：2013-02-01T07:25:06.217
> 
> 标签：iphone, objective-c, mkmapview

我的`MKMapView`.

如果我打开它，它应该使引脚居中（只能有一个引脚）并缩放到该引脚。效果总是很好，但是当我第一次打开地图时，它只会使图钉居中，但会最大程度地缩小。

这是我的代码：

```
- (void) viewDidAppear:(BOOL)animated
{
    if(self.curPin != nil){
        [self.map setCenterCoordinate: self.curPin.coordinate];
    }
    else{
        [self.map setCenterCoordinate:locationManager.location.coordinate];
    }
} 
```

curPin 是一个`CLLocation`，我保存我的别针的坐标。

希望任何人都可以帮助我。

谢谢，弗兰兹

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:28:33.623

您还应该设置地图的跨度吗？我希望你已经做到了..

```
MKCoordinateSpan span;
span.latitudeDelta = 0.2;
span.longitudeDelta= 0.2;

MKCoordinateRegion mapRegion;
    mapRegion.span = span; 
```

试试这个..因为它会设置你的地图视图的跨度。我希望它有帮助，干杯！！快乐编码..

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:48:07.247

您可以使用进行缩放`setRegion`

```
 MKCoordinateRegion location = MKCoordinateRegionMakeWithDistance(currentAnnotation.coordinate, 100000.0, 100000.0);
        //MKCoordinateSpan span = {.2, .3};
        //location.span=span;

        [self.map setRegion:location animated:YES]; 
```

# asp.net - 为什么它在 .aspx 中给出错误的图像？

> ID：14641557
> 
> 赞同：0
> 
> 时间：2013-02-01T07:25:41.007
> 
> 标签：asp.net, html

我是 asp.net 平台的新手。在我们的网站中，每次用户单击按钮时，都会创建一个新图像，并覆盖现有文件“result.png”。但每次，它都会给出错误的图像文件。代码在这里：

```
<p>Click <a href="../../Images/result.png">here</a> to view the last travelled path</p> 
```

但是，如果我只是将相同的代码片段放在 sample.html 文件中并在每次获得最新图像时运行。为什么会这样？我该如何解决这个问题？

我猜有一个缓存的图像。它总是在返回。请帮忙。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:29:55.953

您可以尝试通过附加随机查询字符串参数来破坏缓存：

```
<p>
    Click 
    <a href="<%= ResolveUrl("~/Images/result.png?_=" + DateTime.Now.Ticks.ToString()) %>">
        here
    </a> 
    to view the last travelled path
</p> 
```

# javascript - base64 pdf链接未在Firefox中打开

> ID：14641568
> 
> 赞同：3
> 
> 时间：2013-02-01T07:26:47.833
> 
> 标签：javascript, firefox, pdf

我将pdf编码为base64并尝试将该base64encoded pdf加载到浏览器中

```
 data = "data:application/pdf;base64,"+base64encodedpdf;
  window.open(data); 
```

它以铬打开。但它没有在 Firefox 中打开。

请帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-07-28T08:21:40.893

您需要修改 Firefox 应用程序选项 From ：

[![在此处输入图像描述](../Images/941d9226e14fce3b25d2135133c524a8.png)](https://i.stack.imgur.com/PItPR.jpg)

至 ：

[![在此处输入图像描述](../Images/fd8251905ceaf04d5601f72e2d9d1f5c.png)](https://i.stack.imgur.com/XbYos.jpg)

# jsf - 如何从 Primefaces 面包屑的 DefaultMenuModel 中删除 MenuItem

> ID：14641569
> 
> 赞同：2
> 
> 时间：2013-02-01T07:26:56.927
> 
> 标签：jsf, jsf-2, primefaces

嗨，我正在以编程方式构建 DefaultMenuModel，组件正在使用它，如下所示

```
`<p:breadCrumb id="pbreadcrumb" model="#{portalNavigator.model}"/>` 
```

这是来自 PortalNavigator Bean 的代码，它将 MenuItem 添加到 DefaultMenuModel 类型的对象模型中。

```
DefaultMenuModel model=new DefaultMenuModel();    
MenuItem item=new MenuItem();  
item.setId("home");  
item.setUrl("/getPortal");  
item.setValue("Home");  
model.addMenuItem(item); 
```

我的问题是如何从 DefaultMenuModel 中删除 MenuItem，这样做的方法是什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T11:51:20.273

[`DefaultMenuModel#getContents()`](http://www.primefaces.org/docs/api/3.4/org/primefaces/model/DefaultMenuModel.html#getContents%28%29)您可以通过返回 a来获取它们，`List<UIComponent>`您可以将其返回到`MenuItem`。在`Iterator`. 找到要删除的项目后，请使用`Iterator#remove()`方法。

```
Iterator<UIComponent> iterator = model.getContents().iterator();

while (iterator.hasNext()) {
    MenuItem item = (MenuItem) iterator.next();

    if (needsRemoval(item)) {
        iterator.remove();
    }
} 
```

或者，如果您事先已经知道索引，您也可以这样做：

```
model.getContents().remove(index); 
```

# android - 如何在浏览器中播放通过 Media Recorder 录制的音频文件？

> ID：14641570
> 
> 赞同：3
> 
> 时间：2013-02-01T07:26:57.727
> 
> 标签：android, mediarecorder

我正在使用 android Media Recorder 录制音频。代码工作正常。音频正在设备中成功录制和播放。我将音频文件的输出格式设置为 THREE_GPP 并将音频编码器设置为 DEFAULT。这些文件没有在浏览器中播放，这是我的实际要求。我认为 SetAudioEncoder 给我带来了问题。我尝试设置另一个编码器 AMR_NB ，但仍然是同样的问题。我安装了 Flash 播放器，但没有运气。我正在使用 android-sdk 8。有什么办法可以在浏览器中播放我的文件。

任何帮助都可以。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-02-14T05:15:21.817

```
 _recorder.Reset();
                _recorder.SetAudioSource(AudioSource.Mic);               
                _recorder.SetOutputFormat(OutputFormat.Mpeg4);
                _recorder.SetAudioEncoder(AudioEncoder.HeAac);
                _recorder.SetAudioChannels(1);
                _recorder.SetAudioSamplingRate(44100);
                _recorder.SetAudioEncodingBitRate(96000);
                _recorder.SetOutputFile(MediaPath.tempDir + Java.IO.File.Separator + File_Name); 
```

# mysql - 对不同表中的相同命名列进行计数和分组（仅来自一个表的 where 子句）

> ID：14641572
> 
> 赞同：0
> 
> 时间：2013-02-01T07:27:04.773
> 
> 标签：mysql

好的，我的问题类似于[Counting and grouping same named column in different tables (mysql)](https://stackoverflow.com/questions/14635948/counting-and-grouping-same-named-column-in-different-tables-mysql/)但因为它可能会帮助人们在互联网上寻找确切的解决方案（比如我），所以我将这两个问题分开。

所以我的表格看起来与上面链接中的类似，有一些新的列表 1：

```
id age gender published
1   10  M       1
2   11  F       1
3   11  F       0 
```

表 2：

```
id table1id age gender
1    2       11   F
2    2       12   M
3    3       12   M 
```

我想对已发布 = 1 的两个表中的行进行计数和分组。对于第二个表，它应该检查表 1 中 table1id 给出的行中的已发布值。 Table1id 是表 1 中的行的 id，表示表 2 是表 1 的子集。因此结果应如下所示：

```
age count
10  1
11  2
12  1 
```

请注意，表 1 中的第三行不计入，因为已发布为 0。表 2 中的第三行不计入，因为 table1id = 3，这意味着它是表 1 的第 3 行的子集（已发布 = 0）

谢谢你的帮助 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:34:44.007

试试这个：

```
SELECT age, COUNT(age) cnt
FROM
(
    SELECT
        T2.age 
    FROM Table1 T1
        JOIN Table2 T2
            ON T1.Id = T2.table1id
    WHERE T1.published = 1
    UNION ALL
    SELECT age
    FROM Table1
    WHERE published = 1
) A
GROUP BY age 
```

# dotnetbar - 有谁知道使用 OLE DB 将数据连接到 Dotnetbar Advtree？

> ID：14641573
> 
> 赞同：0
> 
> 时间：2013-02-01T07:27:09.453
> 
> 标签：dotnetbar

我想在 VB.NET 上使用 OLEDB 连接将数据检索到 DOTNETBAR ADVTREE，但我无法在任何地方获得类似的教程......

谢谢...

问候

尤迪斯蒂拉

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-27T01:22:25.607

只需使用 DataSource 属性将您的数据源分配给控制。使用 DisplayMembers 属性设置以逗号分隔的字段列表以显示在树中。这与大多数数据绑定在 WinForms 中的工作方式非常相似。您可以在 My Documents\DotNetBar WinForms Samples\TreeControl 中找到的示例项目也显示了这项工作。

# android - 使用处理程序自动滚动 WebView

> ID：14641576
> 
> 赞同：2
> 
> 时间：2013-02-01T07:27:16.440
> 
> 标签：android, scroll, android-webview

我想从上到下自动向下滚动加载在 WebView 中的页面，给定每一定数量的 ms 一定数量的像素。我看过这个帖子：[+Android Webview - 如何自动滚动页面？](https://stackoverflow.com/questions/5069765/android-webview-how-to-autoscroll-a-page)但是在许多其他线程上，他们说为此使用 Timer 是一个坏主意，因此我将[本教程](http://android-developers.blogspot.kr/2007/11/stitch-in-time.html)用于处理程序：创建我的处理程序。现在我的代码如下所示：

```
private Handler mHandler=new Handler();

private Runnable mScrollDown = new Runnable()
{
    public void run()
    {
        WebView webview = (WebView)findViewById(R.id.web_url);
        webview.scrollBy(0, scrollSpeed);
        mHandler.postAtTime(this, 200);
    }
}; 
```

如果我只调用一次，（删除再次调用它的最后一行）它会起作用，它会下降然后停止。但是，如果我尝试使用此代码使其逐渐向下滚动，则视图似乎不会失效（或者它会失效但未重绘）。使用调试器，我可以看到 WebView 的 mScrollY 属性增加了，但视图没有移动。

我的猜测是系统正在等待视图的所有更改以重绘它。有没有办法在每次迭代时更新视图，或者有更好的方法来做到这一点？

注意：我没有在其中放置页面结束检查和停止按钮，因为它们与问题无关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T04:17:30.567

我找到了答案；

```
private Runnable mScrollDown = new Runnable()
{
    public void run()
    {
        WebView webview = (WebView)findViewById(R.id.web_url);
        webview.scrollBy(0, scrollSpeed);
        mHandler.postDelayed(this, 200);
    }
}; 
```

使用 postDelayed 而不是 postAtTime 修复了它。虽然 postAtTime(runnable,0) 用于启动循环，但 postAtTime 期望时间作为第二个参数，因为我只通过了 200 毫秒，虽然它已经晚了，但它立即进行了第二次（和下一次）迭代，没有时间要绘制的元素。postDelayed 期望在再次执行之前等待若干毫秒，这使系统有时间重绘窗口并执行其他事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:45:32.177

```
ScrollView scroll = (ScrollView) findViewById(R.id.scroll);
scroll.scrollTo(0, webview .getTop());//if want to go on top
scroll.scrollTo(0, webview .getBottom());//if want to go on top 
```

# java - 如何解析最后一个括号？

> ID：14641578
> 
> 赞同：0
> 
> 时间：2013-02-01T07:27:23.067
> 
> 标签：java, regex

因此，如果我有一个用括号括起来的表达式，括号之间或括号之外的任何内容，我怎样才能删除最外面的一对括号，使用递归并调用 parseFactor （每次我看到一组括号我调用 parseFactor）？由于这非常模糊，我会给你一个例子来说明我的意思。以这个为例（这不是我要解决的具体问题，只是一个一般性的想法）：
如果我有表达

`((4+1)*1) + 5`

我想将其分解，以便我首先得到`(4+1)*1`（第一对括号中的内容）。然后，再次调用 parseFactor 函数，因为我看到另一组括号，然后调用 parseExpression 的 parseFactor 将使用递归进行内部计算。所以这意味着我得到`5*1`. 然后我使用函数 parseTerm 和 get 进行计算`5`。一旦我退出递归，我就会`5+5`调用另一个名为 parseExpression 的函数，它将计算 5+5 并返回 10。

目前，我`Matcher m = Pattern.compile("\\((.*)").matcher(expr)).find()`在 parseFactor 中使用，然后将结果分组以删除第一个括号，引导我使用`(4+1)*1) + 5`. 我再次调用 parseFactor 得到 4+1)*1) + 5。问题是我不知道如何去掉外括号。如果有人需要，这是我的代码供参考：

```
else if(Pattern.matches("\\(.*", expr)){
    (m = Pattern.compile("\\((.*)").matcher(expr)).find();
    String save = m.group(1);
    (m = Pattern.compile("\\)(.*)").matcher(expr)).find();
    String remainder = m.group(1);
    int length = save.length();
    int rLength = remainder.length();
    save = save.substring(0, length - (rLength));
    expr = parseExpr(save);
    int i = findInt(expr);
    String value = Integer.toString(i);
    expr = value + remainder;
    (m = Pattern.compile("\\)(.*)").matcher(save)).find();
} 
```

其中 expr 是要解析、分解和计算的字符串。这段代码来自我的 parseExpression 函数。findInt() 只返回它在字符串中找到的第一个整数。

编辑：我必须使用正则表达式。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:38:17.523

正则表达式对于这种操作来说有点过头了。由于`JDK1.6`，您可以使用内置的`Javascript engine`. 如果可能，请尝试使用它。

[使用ScriptEngine.eval(String)](http://docs.oracle.com/javase/6/docs/api/javax/script/ScriptEngine.html#eval%28java.lang.String%29)方法基本上可以实现如下。

```
ScriptEngineManager mgr = new ScriptEngineManager();
ScriptEngine engine = mgr.getEngineByName("JavaScript");
String foo = "((4+1)*1) + 5";
System.out.println(engine.eval(foo)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:49:31.780

基本上，使用正则表达式对您的意图是错误的，因为您正在处理嵌套结构，即递归。而正则表达式无法做到这一点。为了解释这一点，您首先应该了解有限自动机（它是正则表达式基础的数据结构）除了它所处的状态之外没有内存，如果您有任意深度的嵌套，您需要一个任意大的自动机，它与有限自动机的概念相冲突。

但是有一个非常简单的[算法](https://stackoverflow.com/a/524624/1365960)可以完成你的工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:54:57.160

公共类 T_1{

```
String c[];
Stack<String> s1 = new Stack<String>();
Stack<String> s2 = new Stack<String>();
int top = 0;

/**
 * Description:构造函数
 * 
 * @param expression
 *            :表达式字符串
 */
public T_1(String expression) {
    ArrayList<String> al = new ArrayList<String>();
    char chare[] = expression.toCharArray();
    int count = 0;
    int i = 0;
    int start = 0;
    while (count < chare.length) {
        if (!judgeNum(new String(new char[] { chare[count] }))) {
            if (i != 0) {
                char c1[] = new char[i];
                System.arraycopy(chare, start, c1, 0, i);
                al.add(new String(c1));
            }
            al.add(new String(new char[] { chare[count] }));
            i = 0;
            start = count + 1;
        } else {
            i++;
        }
        count++;
    }
    if (judgeNum(new String(new char[] { chare[--count] }))) {
        al.add(new String(new char[] { chare[count] }));
    }
    // c=(String[])(al.toArray());
    System.out.println(al.toString());
    c = new String[al.size()];
    i = 0;
    for (Object o : al.toArray()) {
        c[i++] = o.toString();
    }
}

/**
 * Description:转换,c为中缀表达式
 */
public void transition() {
    int i = 0;
    while (i < c.length) {
        if (s1.empty()) {
            s1.push(c[i]);
        } else {
            if (judgeNum(c[i])) {
                s1.push(c[i]);
            } else if (judgeOperate(c[i])) {
                if (s2.isEmpty()) {
                    s2.push(c[i]);
                } else if (judgeLP(s2.peek())) {
                    s2.push(c[i]);
                } else if (judgePriority(c[i], s2.peek())) {
                    s2.push(c[i]);
                } else {
                    s1.push(s2.pop());
                    while (!s2.isEmpty() && !s2.peek().equals("(")) {
                        if (!judgePriority(c[i], s2.peek())) {
                            s1.push(s2.pop());
                        } else {
                            break;
                        }
                    }
                    s2.push(c[i]);
                }
            } else if (judgeLP(c[i])) {
                s2.push(c[i]);
            } else if (judgeRP(c[i])) {
                while (true) {
                    String c_1 = s2.pop();
                    if (!judgeLP(c_1)) {
                        s1.push(c_1);
                        System.out.println("c_1" + c_1);
                    } else {
                        break;
                    }
                }
            }
        }
        i++;
    }
    while (!s2.isEmpty()) {
        String c_1 = s2.pop();
        if (!judgeLP(c_1)) {
            s1.push(c_1);
        }
    }
}

/**
 * 
 * @param c
 * @return:是否是数字
 */
public boolean judgeNum(String c) {
    try {
        Integer.parseInt(c);
        return true;
    } catch (Exception e) {
        return false;
    }

}

/**
 * 
 * @param c
 * @return:是否是运算符
 */
public boolean judgeOperate(String c) {
    if (c.equals("+") || c.equals("-") || c.equals("*") || c.equals("/")) {
        return true;
    }
    return false;
}

/**
 * 
 * @param c
 * @return:是否是左括号
 */
public boolean judgeLP(String c) {
    if (c.equals("(")) {
        return true;
    }
    return false;
}

/**
 * 
 * @param c
 * @return:是否是右括号
 */
public boolean judgeRP(String c) {
    if (c.equals(")")) {
        return true;
    }
    return false;
}

/**
 * 
 * @param a
 * @param b
 * @return:是否a的优先级大于b
 */
public boolean judgePriority(String a, String b) {
    if ((a.equals("*") || a.equals("/"))
            && (b.equals("+") || b.equals("-"))) {
        return true;
    }
    return false;
}

/**
 * 运算
 */
public void operate() {
    while (!s1.isEmpty()) {
        s2.push(s1.pop());
    }
    /*
     * while(!judgeNum(s2.peek())){ s1.push(s2.pop()); }
     */
    System.out.println(s1.toString());
    System.out.println(s2.toString());
    while (!s2.isEmpty()) {
        String s = s2.pop();
        if (judgeNum(s)) {
            s1.push(s);
        } else {
            String a = s1.pop();
            String b = s1.pop();
            s1.push(operate_(b, a, s));
            System.out.println(s1.peek());
        }
    }
    System.out.println(s1.pop());
}

public String operate_(String a, String b, String c) {
    int ia = Integer.parseInt(a);
    int ib = Integer.parseInt(b);
    if (c.equals("+")) {
        return String.valueOf(ia + ib);
    } else if (c.equals("-")) {
        return String.valueOf(ia - ib);
    } else if (c.equals("*")) {
        return String.valueOf(ia * ib);
    } else if (c.equals("/")) {
        return String.valueOf(ia / ib);
    }
    return "";
}

public static void main(String[] args) {
    String s = JOptionPane.showInputDialog("请输入表达式!");
    T_1 t = new T_1(s);// "1+2+3*1+(2-1*4)*2+2"
    t.transition();
    t.operate();
} 
```

}

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T07:41:55.287

以下正则表达式应匹配括号组，其中包含任何内容：

```
\\(.*\\) 
```

注意：双反斜杠是因为 Java 转义字符，正则表达式实际上是“（。*）”，没有引号。

但是，您似乎正在尝试解析表达式，而正则表达式不是正确的工具，因此您应该考虑使用解析器。Java 中无法通过正则表达式来保证括号平衡之类的事情，因此很难保证表达式的正确性，甚至不可能。

# windows - 我可以在 Windows 命令行的后台运行 GUI 程序吗？

> ID：14641587
> 
> 赞同：2
> 
> 时间：2013-02-01T07:28:11.730
> 
> 标签：windows, sharepoint, command-line

我有 Richcopy 工具，我需要每隔 5 分钟运行一次。我需要应用程序在后台运行而不是显示启动窗口。

请帮助我们。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:50:56.437

您可以使用 VBScript（另存为 .vbs）在后台隐藏运行它

```
Set objShell = WScript.CreateObject("WScript.Shell")
objShell.Run("richcopytool.exe"), 0, True 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:36:54.893

或许像这样

```
schtasks -create -tn <name> -sc minute -mo 5 -tr <command> -ru system 
```

[**参考**](https://stackoverflow.com/a/14390589)

# javascript - 仅在子路由上运行 Ember

> ID：14641591
> 
> 赞同：0
> 
> 时间：2013-02-01T07:28:25.277
> 
> 标签：javascript, ruby-on-rails, ember.js

在我的 ember 应用程序中，我不希望它挂接到根 url，而是挂在子路径控制器上。我该怎么做呢？例如： / <- 主页 & /contact <- 静态（非 JS 应用程序 - 仅通过 Rails 渲染）但我希望 /my_awesome_JS_app && /my_awesome_js_app/1 运行 ember。

最终目标是当一个请求进入 /my_awesome_app/1234 -> 它命中检查服务器端浏览器兼容性的 rails 应用程序。之后，如果它兼容，它将加载到 ember 应用程序中 -

所以现在用 Ember 击中 - 根 - 和 rails 渲染并忽略 /#/ 并且只显示 - / 的哈希值。我有点难过，什么是解决这个问题的好方法。这将是我原始问题的第 2 部分 - [谷歌中的灰烬哈希网址](https://stackoverflow.com/questions/14616783/ember-hash-urls-in-google)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:17:47.110

您只能在您的`/my_awesome_js_app`网址中要求与 Ember 相关的代码。为此，您可以将特定`javascript_include_tag 'ember_app'`内容放入视图中，该视图会加载到此 url 中。在文件中`app/assets/javascripts/ember_app.js`你应该有 ember 的初始化代码。例如，在我的例子中，这个文件看起来像：

```
#= require handlebars
#= require ember
#= require ember-data
#= require_self
#= require store
#= require_tree ./models
#= require_tree ./controllers
#= require_tree ./views
#= require_tree ./helpers
#= require_tree ./templates
#= require_tree ./routes

window.App = Ember.Application.create
  rootElement: '#ember' 
```

不要忘记，您不应该在`application.js`（注意`require_tree .`）中要求此文件。

# javascript - 检测 CSS 文本溢出：Firefox 中的省略号

> ID：14641595
> 
> 赞同：10
> 
> 时间：2013-02-01T07:28:45.073
> 
> 标签：javascript, css, firefox, ellipsis

我正在尝试检测（通过 javascript）文本溢出何时生效。经过大量研究，我有一个可行的解决方案，除了任何版本的 Firefox：

[http://jsfiddle.net/tonydew/mjnvk/](http://jsfiddle.net/tonydew/mjnvk/)

如果您调整浏览器以应用省略号，Chrome、Safari 甚至 IE8+ 都会提醒省略号处于活动状态。在 Firefox（我尝试过的每个版本，包括 17 和 18）中没有那么多。Firefox 将始终告诉您省略号未激活。

console.log() 输出显示了原因：

```
Firefox (OS X):
116/115 - false
347/346 - false

Chrome (OS X):
116/115 - false
347/851 - true 
```

在 Firefox 中，scrollWidth 永远不会大于 offsetWidth。

我能找到的最接近解决方案的是“[为什么 IE 和 Firefox 会为 div 返回不同的溢出尺寸？](https://stackoverflow.com/questions/1332185/why-are-ie-and-firefox-returning-different-overflow-dimensions-for-a-div) ”但我已经在使用建议的解决方案。

任何人都可以阐明如何在 Firefox 中进行这项工作吗？

* * *

编辑：除了下面的@Cezary 答案外，我还发现了一种不需要更改标记的方法。然而，它做了更多的工作，因为它临时克隆了每个元素来进行测量：

```
$(function() {
    $('.overflow').each(function(i, el) {
        var element = $(this)
                      .clone()
                      .css({display: 'inline', width: 'auto', visibility: 'hidden'})
                      .appendTo('body');

        if( element.width() > $(this).width() ) {
            $(this).tooltip({
                title: $(this).text(),
                delay: { show: 250, hide: 100 },
            });
        }
        element.remove();
    });
}); 
```

[http://jsfiddle.net/tonydew/gCnXh/](http://jsfiddle.net/tonydew/gCnXh/)

有人对此的效率发表评论吗？如果我有许多潜在溢出元素的页面，这会产生负面影响吗？如果可以的话，我想避免修改现有的标记，但不会以每次页面加载时过多的 JS 处理为代价。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T09:22:03.680

您需要在每个 td 中添加 div 以使其在 firefox 中工作，

```
<td class="first"><div>Here is some text</div></td>
<td class="second">
     <div>Here is some more text. A lot more text than
     the first one. In fact there is so much text you'd think it was a 
     waste of time to type all ofit.
     </div>
</td> 
```

CSS

```
td div {
   white-space: nowrap;
   text-overflow: ellipsis;
   overflow:hidden;
   width:100%;
} 
```

提琴手

[http://jsfiddle.net/mjnvk/7/](http://jsfiddle.net/mjnvk/7/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T20:42:57.233

我实际上写了一个 jQuery 插件来做到这一点。如果截断，它只是将`title`目标元素的 设置为整个文本，但您可以根据您的确切需求对其进行调整：

```
/**
 * @author ach
 *
 * Sets the CSS white-space, overflow, and text-overflow properties such that text in the selected block element will
 * be truncated and appended with an ellipsis (...) if overflowing.  If the text is truncated in such a way, the
 * selected element's 'title' will be set to its full text contents and the cursor will be set to 'default'.
 * For this plugin to work properly, it should be used on block elements (p, div, etc.).  If used on a th or td element,
 * the plugin will wrap the contents in a div -- in this case, the table's 'table-layout' CSS property should be set to 'fixed'.
 *
 * The default CSS property values set by this plugin are:
 *     white-space: nowrap;
 *     overflow: hidden;
 *     text-overflow: ellipsis
 *
 * @param cssMap A map of css properties that will be applied to the selected element.  The default white-space,
 * overflow, and text-overflow values set by this plugin can be overridden in this map.
 *
 * @return The selected elements, for chaining
 */

$.fn.truncateText = function(cssMap) {
    var css = $.extend({}, $.fn.truncateText.defaults, cssMap);

    return this.each(function() {
        var $this = $(this);
        //To detect overflow across all browsers, create an auto-width invisible element and compare its width to the actual element's
        var element = $this.clone().css({display: 'inline', width: 'auto', visibility: 'hidden'}).appendTo('body');
        if (element.width() > $this.width()) {
            //If a th or td was selected, wrap the content in a div and operate on that
            if ($this.is("th, td")) {
                $this = $this.wrapInner('<div></div>').find(":first");
            }
            $this.css(css);
            $this.attr("title", $.trim($this.text()));
            $this.css({"cursor": "default"});
        }
        element.remove();
    });
};
$.fn.truncateText.defaults = {
    "white-space"   : "nowrap",
    "overflow"      : "hidden",
    "text-overflow" : "ellipsis"
}; 
```

要使用，只需包含 js 并调用：

```
$(".override").truncateText(); 
```

这已在生产中使用，并且没有注意到页面上有数百个目标元素有任何不良影响。

# methods - 只有一行的方法有意义吗？

> ID：14641596
> 
> 赞同：1
> 
> 时间：2013-02-01T07:28:51.583
> 
> 标签：methods

我想到了这个问题，因为我正在做一个项目，我创建了以下方法：

```
private void GoToFirstPage() {
    CurrentPage = 0;
} 
```

我在一些与分页相关的方法中使用它。

这是个好主意吗？或者我应该`CurrentPage = 0;`在所有方法调用中调用吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:44:06.053

首先，您更改 的实现的可能性有多大`GoToFirstPage`？例如，如果这是一个 PDF 查看器，下一个版本可能具有连续滚动模式以及逐页模式，因此您将保留 CurrentTopLine 而不是 CurrentPage？在这种情况下，如果您有`CurrentPage = 0;`15 个不同的地方，并且您必须将其中的 15 个更改为`if (PageMode) CurrentPage = 0; else CurrentTopLine = 0;`，那么这是愚蠢错误潜入您的代码的绝佳机会，因为您忘记了其中的 1 个并且只更改了 14 个。如果你有一种方法，你只需要在一个地方改变东西。

在某些情况下，为方法命名会为您提供一些额外的文档（与注释不同，它不会随着事情的变化而变得陈旧，因为您必须保持它是最新的，否则事情将无法编译）。在这种情况下，我认为这无关紧要，因为`CurrentPage = 0;`它与 . 一样具有可读性和意义`GoToFirstPage();`，但在许多情况下，确实如此。

有时，性能是一个问题。毕竟，函数调用不是免费的。但在这种情况下，很难想象它会变得重要。这不像你会`GoToFirstPage`在一个紧密的循环中调用数百万次，对吧？

那么，如果这些都不相关，您如何决定？最重要的因素可能是更符合您的语言、代码库等的习惯。在典型的 Java 程序中，类似的函数`GoToFirstPage();`可以完美地融入其中，甚至可以作为`SetCurrentPage(0);`另一层封装来实现。在典型的 Python 程序中，该`current_page`属性甚至是该类的公共 API 的一部分。两者都不一定好或坏，风格的一致性对于保持代码的可读性很重要。

# oracle - 如何在 Perl DBI 中获取动态 SQL 输出？

> ID：14641600
> 
> 赞同：1
> 
> 时间：2013-02-01T07:29:18.593
> 
> 标签：oracle, perl, plsql, dbi

我有一个`SELECT`使用 PL/SQL 代码生成的动态 SQL 语句。

```
declare
  sql_query clob;
begin
  sql_query := 'select * from ...........';
  execute immediate sql_query;
end; 
```

我想将上述动态生成的`SELECT`语句的输出检索到 Perl 中的数组中。我已经在 Perl 中尝试过的是，

```
$sql = "declare
    sql_query clob;
  begin
    sql_query := 'select * from ...........';
    execute immediate sql_query;
  end;";

$sql_prep = $dbh->prepare($sql) or die "Cannot prepare.";
$sql_prep->execute() or die "Cannot execute.";

while (@row = $sql_prep->fetchrow_array ()) {
  print "@row\n";
} 
```

我得到的错误是，

```
DBD::Oracle::st fetchrow_array failed: ERROR no statement executing (perhaps you need to call execute first) [for Statement "declare
........
........
"] at ./script.pl line 60. 
```

我是 PL/SQL 的新手，我不确定我是否遵循了正确的路径。有人可以给我建议吗？

提前致谢！

——沙昆塔拉

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:59:19.960

将来，当您发布时，如果您显示更多代码可能会有所帮助-在这种情况下，完整的 SQL 可能会有所帮助，并且至少可以确定哪一行引发了错误（它说第 60 行，而您没有第 60 行）。

你不能做你想做的事。您可以在 Perl 中动态创建 SQL 并将其传递给准备、执行然后 fetchXXX（或使用其中一种 select* 方法），或者如果您需要在 PL/SQL 中动态创建 SQL，则需要创建一个过程它返回一个 SYS_REFCURSOR（参见 DBD::Oracle 示例）。

正如之前的海报提到的 do 方法，您似乎误解了他，您应该意识到 do 和准备/执行之间的区别。do 不返回语句句柄（它返回指示操作成功或受影响的行数的状态）。因此，您无法使用 do 取回任何行，因为没有可以调用 fetch 的语句句柄。do 方法通常用于 DDL 或插入/更新/删除语句。

prepare 方法返回一个语句句柄，因此如果 SQL 是一个 select 语句，您可以从中获取行。

如果我误解了你试图做的事情，请告诉我，我可以给你一些例子。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T07:57:21.763

我对 PL/SQL 不是特别熟悉，但我知道您的 SQL 字符串看起来很像多条语句，并且作为安全预防措施，DBI 一次只会执行一条语句。也许它只是运行`declare`并忽略其余部分。

您是否有理由这样做而不是`select`直接运行？（相同的代码，除了`$sql`设置为`select * from ..........`没有额外的位。）如果您尝试在更一般的情况下动态声明存储过程，您可能（或可能不会）使用 DBI 的`do`方法而不是`prepare`/`execute`来获得更好的运气声明它，然后`execute`作为单独的步骤运行它。

# javascript - 为什么使用 javascript: 以外的 javascrpit:void(0)；在href属性中？

> ID：14641602
> 
> 赞同：0
> 
> 时间：2013-02-01T07:29:42.283
> 
> 标签：javascript, href

> **可能重复：**
> [为什么使用 `javascript:void(0)` 而不是 `javascript:` 作为 href 什么都不做占位符？](https://stackoverflow.com/questions/5237105/why-use-javascriptvoid0-instead-of-javascript-as-an-href-do-nothing-plac)

看来我们可以`javascript:;`在节省 7 个字符的同时获得相同的结果。为什么总是推荐使用`javascript:void(0)`？

# c - 试图打开一个文件 c 系统调用

> ID：14641610
> 
> 赞同：0
> 
> 时间：2013-02-01T07:30:21.843
> 
> 标签：c

我正在尝试使用系统调用打开二进制文件，但无法使用函数（fopen 等）

```
if ((fd2 = open("RandomStruct.bin",O_RDWR|O_CREAT)) == -1) 
        err_sys("Failed to open binary\n"); 
```

这行代码不正确吗？谢谢！顺便说一句，我得到“：错误 0”Oo

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:34:23.870

不，这是不正确的。如果您指定 O_CREAT 标志，则 open() 需要另一个参数，即新文件的权限位。例如

```
 open("RandomStruct.bin",O_RDWR|O_CREAT, 0755); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:34:43.753

您需要添加另一个答案中提到的文件权限，但是，`open()`它不是系统调用，它只是另一个函数（或包装器），就像`fopen()`libc 中的 ,​​ 依次调用`open`系统调用一样。我认为你应该检查[syscall()](http://www.kernel.org/doc/man-pages/online/pages/man2/syscall.2.html)，假设你使用的是 Linux，它允许你通过传递它的数字（在这种情况下`SYS_open`）和参数（如果你的分配需要使用系统调用）来直接调用系统调用。

# math - 具有非常类似于数学的语法的函数式编程

> ID：14641614
> 
> 赞同：0
> 
> 时间：2013-02-01T07:30:53.173
> 
> 标签：math, functional-programming

我的背景是计算机科学，专门从事命令式编程（C/C++、Python）。由于我目前正在努力为论文的某些算法提出正式的描述，因此我想知道是否有一种函数式编程语言可以提供尽可能接近数学符号的语法；例如，类似于 Event-B 提供的（参见[http://i.stack.imgur.com/JaXu0.png](https://i.stack.imgur.com/JaXu0.png)的屏幕截图），但没有 Event-B 的开销（状态机等）。

我的用例很简单：我希望能够想出一个公式

![公式](../Images/f7ee9b0dd12d27e612b35542e4dbc589.png)

并以尽可能接近的语法将其输入到编程语言中，以使用不同的输入对其进行评估，并检查它是否真的符合我的预期。因此，性能或可重用性对我来说不是问题。

我确实意识到我可以用任何编程语言（例如 Python）来实现这些功能，但这将再次要求我在将它们翻译成该语言时解释它们，在那里我很可能会犯我在出现时已经犯过的相同解释错误用原来的公式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T20:36:30.477

没有具有 2D 语法的主流语言（例如联合操作下的子集操作）。

然而，有许多带有 unicode 运算符的语言，例如[Haskell](http://hackage.haskell.org/packages/archive/unicode-prelude/0.1.1/doc/html/Prelude-Unicode.html#6)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-03T11:19:59.453

[Maple](http://www.maplesoft.com/)允许使用通常的数学 2D 语法，进行符号运算，还允许将结果转换为 C 或 FORTRAN。此功能使其作为开发人员工具适用于规范包括一些复杂数学的任务。

[Matlab](http://www.mathworks.ch/products/matlab/)允许使用 2D 语法以图形方式进行编程，但与 Maple 不同，它会将所有内容锁定在其环境中，因此更像是一个研究人员工具。

# reporting-services - 从 SharePoint 2013 应用程序页面调用 Reporting Services API

> ID：14641615
> 
> 赞同：0
> 
> 时间：2013-02-01T07:30:55.917
> 
> 标签：reporting-services, sharepoint-2013, reporting-services-2012

从 SharePoint 2010 升级到 2013 时，我面临以下问题。

我有一个应用程序页面，从中进行 SSRS API 调用以获取报告的所有订阅。

```
ReportingService2010 rs = new ReportingService2010();
rs.Credentials = System.Net.CredentialCache.DefaultCredentials;
rs.Url = serverUrl + "/_vti_bin/ReportServer/ReportService2010.asmx";
try
{
    return rs.ListSubscriptions(reportUrl);
}
catch (SoapException ex)
{ } 
```

在执行此代码期间，我得到一个带有堆栈跟踪的 UnauthorizedAccessException

```
System.UnauthorizedAccessException: Access is denied. (Exception from HRESULT: 0x80070005 (E_ACCESSDENIED)), StackTrace:    at Microsoft.SharePoint.SPWeb.GetObjectForUrl(String strUrl, Guid& listId)     at Microsoft.ReportingServices.SharePoint.Objects.RSSPImpWeb.GetObject(String strUrl)     at Microsoft.ReportingServices.SharePoint.Server.Utility.GetSPItemMetaDataAndContent(ItemSpecifier itemSpecifier, UserContext userContext, Boolean returnContent, Boolean wrapFileNotFoundOnOpenWeb, Byte[]& content)     at Microsoft.ReportingServices.SharePoint.Server.Utility.GetSharePointItem(ExternalItemPath objectName, UserContext userContext)     at Microsoft.ReportingServices.SharePoint.Server.SharePointDBInterface.GetItemTypeAndId(ExternalItemPath objectName, ItemType& type, Guid& id)     at Micros... 0f35fa9b-1c67-c0b8-f616-d4cac96f7408
...oft.ReportingServices.SharePoint.Server.SharePointDBInterface.ObjectExists(ExternalItemPath objectName, ItemType& type, Guid& id, Int32& snapshotLimit, Byte[]& secDesc, Int32& execOptions, Guid& snapshotId, Guid& linkID)     at Microsoft.ReportingServices.Library.GetItemTypeAction.PerformActionNow()     at Microsoft.ReportingServices.Library.RSSoapAction`1.Execute()     at Microsoft.ReportingServices.Library.ReportingService2010Impl.GetItemType(String itemPath, Boolean fromStore, String parameterName, Boolean allowEditSessionSyntax)     at Microsoft.ReportingServices.Library.ReportingService2010Impl.ListSubscriptions(String ItemPathOrSiteURL, String Owner, SubscriptionImpl[]& SubscriptionItems)     at Microsoft.ReportingServices.ServiceRuntime.ReportServiceManagement.<>c__DisplayClass5b.<L...  0f35fa9b-1c67-c0b8-f616-d4cac96f7408
...istSubscriptions>b__5a()     at Microsoft.ReportingServices.ServiceRuntime.ReportServiceBase.ExecuteWithContext[TResult](Func`1 action)     at Microsoft.ReportingServices.ServiceRuntime.ReportServiceManagement.ListSubscriptions(String ItemPathOrSiteURL)     at SyncInvokeListSubscriptions(Object , Object[] , Object[] )     at System.ServiceModel.Dispatcher.SyncMethodInvoker.Invoke(Object instance, Object[] inputs, Object[]& outputs)     at System.ServiceModel.Dispatcher.DispatchOperationRuntime.InvokeBegin(MessageRpc& rpc)     at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage5(MessageRpc& rpc)     at System.ServiceModel.Dispatcher.ImmutableDispatchRuntime.ProcessMessage31(MessageRpc& rpc)     at System.ServiceModel.Dispatcher.MessageRpc.Process(Boolean isOperationCon...  0f35fa9b-1c67-c0b8-f616-d4cac96f7408
...textSet)     at System.ServiceModel.Dispatcher.ChannelHandler.DispatchAndReleasePump(RequestContext request, Boolean cleanThread, OperationContext currentOperationContext)     at System.ServiceModel.Dispatcher.ChannelHandler.HandleRequest(RequestContext request, OperationContext currentOperationContext)     at System.ServiceModel.Dispatcher.ChannelHandler.AsyncMessagePump(IAsyncResult result)     at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result)     at System.Runtime.AsyncResult.Complete(Boolean completedSynchronously)     at System.ServiceModel.Channels.SecurityChannelListener`1.ReceiveItemAndVerifySecurityAsyncResult`2.InnerTryReceiveCompletedCallback(IAsyncResult result)     at System.Runtime.Fx.AsyncThunk.UnhandledExceptionFrame(IAsyncResult result)     at Sy...  0f35fa9b-1c67-c0b8-f616-d4cac96f7408
...stem.Runtime.AsyncResult.Complete(Boolean completedSynchronously)     at System.Runtime.InputQueue`1.AsyncQueueReader.Set(Item item)     at System.Runtime.InputQueue`1.EnqueueAndDispatch(Item item, Boolean canDispatchOnThisThread)     at System.Runtime.InputQueue`1.EnqueueAndDispatch(T item, Action dequeuedCallback, Boolean canDispatchOnThisThread)     at System.ServiceModel.Channels.SingletonChannelAcceptor`3.Enqueue(QueueItemType item, Action dequeuedCallback, Boolean canDispatchOnThisThread)     at System.ServiceModel.Channels.HttpPipeline.EnqueueMessageAsyncResult.CompleteParseAndEnqueue(IAsyncResult result)     at System.ServiceModel.Channels.HttpPipeline.EnqueueMessageAsyncResult.HandleParseIncomingMessage(IAsyncResult result)     at System.Runtime.AsyncResult.SyncContinue(IAsyncResu...  0f35fa9b-1c67-c0b8-f616-d4cac96f7408
...lt result)     at System.ServiceModel.Channels.HttpPipeline.EmptyHttpPipeline.BeginProcessInboundRequest(ReplyChannelAcceptor replyChannelAcceptor, Action dequeuedCallback, AsyncCallback callback, Object state)     at System.ServiceModel.Channels.HttpChannelListener`1.HttpContextReceivedAsyncResult`1.ProcessHttpContextAsync()     at System.ServiceModel.Channels.HttpChannelListener`1.BeginHttpContextReceived(HttpRequestContext context, Action acceptorCallback, AsyncCallback callback, Object state)     at System.ServiceModel.Activation.HostedHttpTransportManager.HttpContextReceived(HostedHttpRequestAsyncResult result)     at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.HandleRequest()     at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.BeginRequest()     at Syst...  0f35fa9b-1c67-c0b8-f616-d4cac96f7408
...em.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequest(Object state)     at System.ServiceModel.AspNetPartialTrustHelpers.PartialTrustInvoke(ContextCallback callback, Object state)     at System.ServiceModel.Activation.HostedHttpRequestAsyncResult.OnBeginRequestWithFlow(Object state)     at System.Runtime.IOThreadScheduler.ScheduledOverlapped.IOCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* nativeOverlapped)     at System.Runtime.Fx.IOCompletionThunk.UnhandledExceptionFrame(UInt32 error, UInt32 bytesRead, NativeOverlapped* nativeOverlapped)     at System.Threading._IOCompletionCallback.PerformIOCompletionCallback(UInt32 errorCode, UInt32 numBytes, NativeOverlapped* pOVERLAP)   0f35fa9b-1c67-c0b8-f616-d4cac96f7408
Throwing Microsoft.ReportingServices.Diagnostics.Utilities.AccessDeniedException: , Microsoft.ReportingServices.Diagnostics.Utilities.AccessDeniedException: The permissions granted to user 'NT AUTHORITY\ANONYMOUS LOGON' are insufficient for performing this operation.;    0f35fa9b-1c67-c0b8-f616-d4cac96f7408 
```

SP 2010 和 SP 2013 的描述行为相似。在 SharePoint 2010 中，将 ASP.NET 模拟帐户从默认更改为对托管 Web 应用程序具有足够权限的身份将解决该问题。
不幸的是，在 SP 2013 Farm 上这样做会导致另一个 SOAPException 类型的异常

```
System.Web.Services.Protocols.SoapException: Server was unable to process request. ---> The security token request cannot be completed.    at System.Web.Services.Protocols.SoapHttpClientProtocol.ReadResponse(SoapClientMessage message, WebResponse response, Stream responseStream, Boolean asyncCall)     at System.Web.Services.Protocols.SoapHttpClientProtocol.Invoke(String methodName, Object[] parameters) 
```

我尝试更改匿名身份验证的身份，但遇到了同样的异常。我已经做了很多调试并阅读了大量日志，但我对如何解决这个问题一无所知。
任何人都可以提出任何建议吗？

以下是一些可能有帮助的附加信息：
Web 应用程序配置为 FBA 并使用 LDAP 提供程序进行身份验证。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T02:55:58.060

由于使用了 FBA，因此设置 rs.Credentials 无济于事。FBA 使用身份验证 cookie。调用`Login`方法，`/_vti_bin/authentication.asmx`然后将该 cookie 添加到 rs 连接。这是类似问题的链接[http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopmentprevious/thread/230de0e1-0d88-4c54-93a4-f166899873be/](http://social.msdn.microsoft.com/Forums/en-US/sharepointdevelopmentprevious/thread/230de0e1-0d88-4c54-93a4-f166899873be/)

# twitter - 特定国家/地区的 Twitter 热门话题 RSS 提要

> ID：14641617
> 
> 赞同：1
> 
> 时间：2013-02-01T07:31:04.487
> 
> 标签：twitter, rss

有没有办法为特定国家/地区的趋势推文生成 Twitter RSS 提要 URL？例如，我想在德国的 Twitter 上生成讨论最多的主题的 rss 提要。这可以做到吗？怎么做？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-09T21:43:11.680

是的。使用此 Twitter API [https://dev.twitter.com/docs/api/1.1/get/trends/place](https://dev.twitter.com/docs/api/1.1/get/trends/place)获取趋势，然后自己生成 RSS 提要。

它将需要一个 WOEID（[http://developer.yahoo.com/geo/geoplanet/](http://developer.yahoo.com/geo/geoplanet/)），对于德国来说是 23424829（[https://dev.twitter.com/discussions/6942](https://dev.twitter.com/discussions/6942)）

# javascript - WebGL：INVALID_VALUE：attachShader：没有对象或对象被删除。这暗地里有用吗？

> ID：14641618
> 
> 赞同：1
> 
> 时间：2013-02-01T07:31:05.263
> 
> 标签：javascript, opengl-es, webgl, shader, vertex-shader

我开始接触 WebGL，我想知道是否有一个了解错误输出的好地方。

我不断收到以下错误

```
WebGL: INVALID_VALUE: attachShader: no object or object deleted localhost:1   
WebGL: INVALID_OPERATION: getAttribLocation: program not linked localhost:1
WebGL: INVALID_OPERATION: getUniformLocation: program not linked localhost:1
WebGL: INVALID_OPERATION: useProgram: program not valid localhost:1
WebGL: INVALID_OPERATION: drawElements: attribs not setup correctly 
```

所以，我可以从这些错误中看出我的着色器没有在

```
gl.attachShader(program, vertexShader);
gl.attachShader(program, fragmentShader); 
```

随后的错误是关于没有程序的。

所以我的问题是：我如何找出我的代码出了什么问题？

该程序没有以某种方式定义，我确实有`var program = gl.createProgram();`. 那么，为什么会发生这种情况？我在哪里看？我猜这是因为我的着色器无法编译，但据我所知，我的着色器有 0 个错误或警告。它被上述代码/警告混淆了......此外，chrome提到了这些警告，而firefox没有。两者都不能初始化着色器

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T10:05:34.180

我建议[使用一些样板代码](http://games.greggman.com/game/webgl-boilerplate/)来编译你的着色器和链接程序

对于着色器

```
/**
 * Creates and compiles a shader.
 *
 * @param {!WebGLRenderingContext} gl The WebGL Context.
 * @param {string} shaderSource The GLSL source code for the shader.
 * @param {number} shaderType The type of shader, VERTEX_SHADER or
 *     FRAGMENT_SHADER.
 * @return {!WebGLShader} The shader.
 */
function compileShader(gl, shaderSource, shaderType) {
  // Create the shader object
  var shader = gl.createShader(shaderType);

  // Set the shader source code.
  gl.shaderSource(shader, shaderSource);

  // Compile the shader
  gl.compileShader(shader);

  // Check if it compiled
  var success = gl.getShaderParameter(shader, gl.COMPILE_STATUS);
  if (!success) {
    // Something went wrong during compilation; get the error
    throw "could not compile shader:" + gl.getShaderInfoLog(shader);
  }

  return shader;
} 
```

对于程序

```
/**
 * Creates a program from 2 shaders.
 *
 * @param {!WebGLRenderingContext) gl The WebGL context.
 * @param {!WebGLShader} vertexShader A vertex shader.
 * @param {!WebGLShader} fragmentShader A fragment shader.
 * @return {!WebGLProgram} A program.
 */
function createProgram(gl, vertexShader, fragmentShader) {
  // create a program.
  var program = gl.createProgram();

  // attach the shaders.
  gl.attachShader(program, vertexShader);
  gl.attachShader(program, fragmentShader);

  // link the program.
  gl.linkProgram(program);

  // Check if it linked.
  var success = gl.getProgramParameter(program, gl.LINK_STATUS);
  if (!success) {
      // something went wrong with the link
      throw ("program filed to link:" + gl.getProgramInfoLog (program));
  }

  return program;
} 
```

你可以这样称呼它

```
var vertShader = compileShader(gl, vertShaderSource, gl.VERTEX_SHADER);
var fragShader = compileShader(gl, fragShaderSource, gl.FRAGMENT_SHADER);
var program = createProgram(gl, vertShader, fragShader); 
```

如果您的着色器没有编译或链接，那应该将错误打印到 javascript 控制台。它还应该为您提供堆栈跟踪，以便您可以判断代码中的问题所在。

# html - 如何使用html和css解决ie7中的位置问题？

> ID：14641621
> 
> 赞同：1
> 
> 时间：2013-02-01T07:31:13.747
> 
> 标签：html, css

我将“div”标签放在“h1”标签中。并将其添加到以下 CSS。我想把这个“div”标签放在“h1”标签的左下角。它在现代浏览器中运行良好，但在 ie7 'div' 标签中从左侧留出空间。

我的代码有什么问题。

HTML：

```
<h1>
    <a href="#">Web Design Resources</a>
    <div></div>
</h1> 
```

CSS：

```
h1 {
border-bottom: 1px solid #797979;
position: relative;
}
h1 a {
margin: 7px 0 0px 0;
padding: 0px 0 1px 0px;
font-size: 1.12em;
}
#innerFooter h1 div {
height: 1px;
width: 20%;
background: #ffffff;
position: absolute;
bottom: -1px;
} 
```

感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:35:59.230

由于您`h1`是布局父级，因此您只需要添加`left: 0`到`#innerFooter h1 div`规则中。

# .net - Sql 错误必须声明标量变量，即使在声明变量之后

> ID：14641623
> 
> 赞同：1
> 
> 时间：2013-02-01T07:31:15.957
> 
> 标签：.net, sql, sql-server-2008, tsql

我在下面有我的查询并收到错误`Must declare the scalar variable "@collectionId"`，即使我使用`[GetAllProductById] 6,0,0,0,'A122'`

```
ALTER proc [dbo].[GetAllProductById] 
(
    @collectionId int,
    @GrandId int  ,
    @ParentId int ,
    @ChildId int,
    @dealerid varchar(50) 
)
As
Begin

Declare @sql as varchar(max)
 -- In case dealer is logged in ,then calculate the Discounted amount and return the same,
    -- else return Mrp and Our Price for all other customers

    IF  @collectionid<=0

        BEGIN
            IF @dealerid<>''
                BEGIN
                    SET @sql = '    Select Top(5) Product.Id,ProdImage,ProductCode, ProductName,MrpPrice, BasicPrice,ValueAdd, Price =ISNULL((Product.BasicPrice + ValueAdd),0), 
                                          Discounted = ISNULL((Select (Product.BasicPrice + (ValueAdd -(ValueAdd *(Discount*0.01))))
                                                 From DealerDiscount 
                                                 Where CategoryId = Product.GrandCategoryId AND DealerId='+@dealerid+'),0)
                                    From Product  Where 1=1 ';
                END
             ELSE
                BEGIN
                    SET @sql = '    Select Top(5) Id,ProdImage,ProductCode, ProductName,MrpPrice, BasicPrice,ValueAdd, Price =ISNULL((BasicPrice + ValueAdd),0), Discounted=0 
                                    From Product
                                    Where 1=1 ';
                END 

        END
    ELSE
        BEGIN
            IF @dealerid<>''
                BEGIN
                    SET @sql = '    Select  Product.Id,ProdImage,ProductCode,Collections.Name,Collections.Id, ProductName,MrpPrice, BasicPrice,ValueAdd, Price =ISNULL((Product.BasicPrice + ValueAdd),0), 
                                          Discounted = ISNULL((Select (Product.BasicPrice + (ValueAdd -(ValueAdd *(Discount*0.01))))
                                                 From DealerDiscount 
                                                 Where CategoryId = Product.GrandCategoryId AND DealerId='+@dealerid+'),0)
                                    FROM    Collections INNER JOIN
                                            Product ON Collections.Id = Product.CollectionId 
                                            where Product.CollectionId=@collectionId   AND 1=1 ';
                END
             ELSE
                BEGIN
                    SET @sql = '    Select  Product.Id,ProdImage,Collections.Name,Collections.Id,ProductCode, ProductName,MrpPrice, BasicPrice,ValueAdd, Price =ISNULL((BasicPrice + ValueAdd),0), Discounted=0 
                                    FROM    Collections INNER JOIN
                                            Product ON Collections.Id = Product.CollectionId 
                                            where Product.CollectionId=@collectionId AND 1=1 ';
                END 

            if (@GrandId > 0 and @ParentId>0 and @ChildId > 0 and @collectionId=0)
                Begin
                    Set @sql  = @sql + ' Product.ParentCategoryId = '+ Convert(Varchar, @ParentId)+' AND Product.GrandCategoryId = '+ Convert(Varchar, @GrandId)+' AND Product.ChitdCategoryId = '+Convert(varchar,@ChildId);
                End
            if (@GrandId > 0 and @ParentId>0 and @ChildId = 0 and @collectionId=0)
                Begin
                    Set @sql  = @sql + ' Product.ParentCategoryId = '+ Convert(Varchar, @ParentId)+' AND Product.GrandCategoryId = '+ Convert(Varchar, @GrandId)
                End
            if (@GrandId > 0 and @ParentId=0 and @ChildId = 0 and @collectionId=0)
                Begin
                    Set @sql  = @sql + ' AND Product.GrandCategoryId = '+ Convert(Varchar, @GrandId)
                End
        END

        exec(@sql)

END 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:09:38.710

与其将值连接到 TSQL 中，不如修改当前要使用的代码`sp_executesql`和*生成的 TSQL 中的参数*，这样可以避免生成的 TSQL 中的 SQL 注入风险，并允许查询计划重用。例如：

```
SET @sql = '    Select Top(5) Product.Id,ProdImage,ProductCode, ProductName,MrpPrice, BasicPrice,ValueAdd, Price =ISNULL((Product.BasicPrice + ValueAdd),0), 
                                          Discounted = ISNULL((Select (Product.BasicPrice + (ValueAdd -(ValueAdd *(Discount*0.01))))
                                                 From DealerDiscount 
                                                 Where CategoryId = Product.GrandCategoryId AND DealerId=@dealerid),0)
                                    From Product  Where 1=1 ';
....
if (@GrandId > 0 and @ParentId>0 and @ChildId = 0 and @collectionId=0)
                Begin
                    Set @sql  = @sql + ' AND Product.ParentCategoryId = @ParentId AND Product.GrandCategoryId = @GrandId '
                End 
```

特别要注意，我没有将当前参数值连接到生成的 SQL 中。

然后，您将其称为：

```
exec sp_executesql @sql, N'@dealerid int, @GrandId int',
                         @dealerid, @GrandId
                      -- ^^^ todo: add every parameter you need 
```

第一个参数是TSQL；第二个参数 ( `N'@dealerid int, @GrandId int'`) 是通过标准 SQL 语法描述参数的文字，然后我们映射要使用的值。在这种情况下，为方便起见，我们使用相同的名称 - 但这不是必需的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:35:28.060

在构建查询时，您需要将变量附加为字符串，而不仅仅是分配。请试试：

```
ALTER proc [dbo].[GetAllProductById] 
(
    @collectionId int,
    @GrandId int  ,
    @ParentId int ,
    @ChildId int,
    @dealerid varchar(50) 
)
As
Begin

Declare @sql as varchar(max)
 -- In case dealer is logged in ,then calculate the Discounted amount and return the same,
    -- else return Mrp and Our Price for all other customers

    IF  @collectionid<=0

        BEGIN
            IF @dealerid<>''
                BEGIN
                    SET @sql = '    Select Top(5) Product.Id,ProdImage,ProductCode, ProductName,MrpPrice, BasicPrice,ValueAdd, Price =ISNULL((Product.BasicPrice + ValueAdd),0), 
                                          Discounted = ISNULL((Select (Product.BasicPrice + (ValueAdd -(ValueAdd *(Discount*0.01))))
                                                 From DealerDiscount 
                                                 Where CategoryId = Product.GrandCategoryId AND DealerId='+@dealerid+'),0)
                                    From Product  Where 1=1 ';
                END
             ELSE
                BEGIN
                    SET @sql = '    Select Top(5) Id,ProdImage,ProductCode, ProductName,MrpPrice, BasicPrice,ValueAdd, Price =ISNULL((BasicPrice + ValueAdd),0), Discounted=0 
                                    From Product
                                    Where 1=1 ';
                END 

        END
    ELSE
        BEGIN
            IF @dealerid<>''
                BEGIN
                    SET @sql = '    Select  Product.Id,ProdImage,ProductCode,Collections.Name,Collections.Id, ProductName,MrpPrice, BasicPrice,ValueAdd, Price =ISNULL((Product.BasicPrice + ValueAdd),0), 
                                          Discounted = ISNULL((Select (Product.BasicPrice + (ValueAdd -(ValueAdd *(Discount*0.01))))
                                                 From DealerDiscount 
                                                 Where CategoryId = Product.GrandCategoryId AND DealerId='+@dealerid+'),0)
                                    FROM    Collections INNER JOIN
                                            Product ON Collections.Id = Product.CollectionId 
                                            where Product.CollectionId='+CAST(NVARCHAR(50), @collectionId)+'   AND 1=1 ';
                END
             ELSE
                BEGIN
                    SET @sql = '    Select  Product.Id,ProdImage,Collections.Name,Collections.Id,ProductCode, ProductName,MrpPrice, BasicPrice,ValueAdd, Price =ISNULL((BasicPrice + ValueAdd),0), Discounted=0 
                                    FROM    Collections INNER JOIN
                                            Product ON Collections.Id = Product.CollectionId 
                                            where Product.CollectionId='+CAST(NVARCHAR(50), @collectionId)+' AND 1=1 ';
                END 

            if (@GrandId > 0 and @ParentId>0 and @ChildId > 0 and @collectionId=0)
                Begin
                    Set @sql  = @sql + ' Product.ParentCategoryId = '+ Convert(Varchar, @ParentId)+' AND Product.GrandCategoryId = '+ Convert(Varchar, @GrandId)+' AND Product.ChitdCategoryId = '+Convert(varchar,@ChildId);
                End
            if (@GrandId > 0 and @ParentId>0 and @ChildId = 0 and @collectionId=0)
                Begin
                    Set @sql  = @sql + ' Product.ParentCategoryId = '+ Convert(Varchar, @ParentId)+' AND Product.GrandCategoryId = '+ Convert(Varchar, @GrandId)
                End
            if (@GrandId > 0 and @ParentId=0 and @ChildId = 0 and @collectionId=0)
                Begin
                    Set @sql  = @sql + ' AND Product.GrandCategoryId = '+ Convert(Varchar, @GrandId)
                End
        END

        exec(@sql)

END 
```

# asp.net - 单击按钮时打开一个 ajax 手风琴窗格

> ID：14641624
> 
> 赞同：1
> 
> 时间：2013-02-01T07:31:20.270
> 
> 标签：asp.net, ajax, button, ajaxcontroltoolkit, accordion

单击按钮时如何打开具有淡入淡出过渡效果的手风琴窗格？我试图在服务器端对其进行编码，它正在工作，但没有淡入淡出。

这是我的代码...

```
protected void Button1_Click(object sender, EventArgs e)
{
        Accordions.FadeTransitions = true;
        Accordions.SelectedIndex = 1;    
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:10:27.597

您需要在客户端上切换选定的窗格。

```
<asp:Button runat="server" Text="Click Me" OnClientClick="switchPane(1); return false;" />

<script type="text/javascript">
     function switchPane(index) {
          $find("<%= Accordions.ClientID %>_AccordionExtender").set_SelectedIndex(index);
     }
</script> 
```

此方法禁用服务器端客户端事件。

# c# - Emgu CV 显示 GpuImage

> ID：14641627
> 
> 赞同：1
> 
> 时间：2013-02-01T07:31:27.213
> 
> 标签：c#, wpf, emgucv

我正在逐帧使用 Emgu.CV 进行一些视频处理。从 Capture 实例中抓取一帧后，我将 Image 转换为 GpuImage 以进行一些 GPU 处理。

是否可以直接显示 GpuImage 而无需返回 Image？

我的用户界面在 WPF 上。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-03T09:51:41.530

是的，可以在 Emgu.CV.UI.ImageBox 中显示 GpuImage：

我已经测试过这个：emgucv-windows-universal-gpu 2.4.9.1847

```
// Create a new GpuImage and assign its value from Image.
GpuImage<Bgr, byte> gpuImage = new GpuImage<Bgr, byte>(image);

// Show the GpuImage in the ImageBox.
this.imageBox.Image = gpuImage; 
```

这个解决方案是我能看到的最好的解决方案，但无论哪种方式，即使将 GpuImage 转换回 Image 也很容易和快速：

```
// Create a new Image and convert the GpuImage to it.
Image<Bgr, byte> image = gpuImage.ToImage();

// Show the GpuImage in the ImageBox.
this.imageBox.Image = image; 
```

希望这可以帮助！

一旦获得理解，Emgu 就是一个极好的资源。它的布局和编程非常好。然而，GPU 处理绝对是要走的路。

# python - 应该如何处理初学者的编程任务？

> ID：14641630
> 
> 赞同：2
> 
> 时间：2013-02-01T07:31:48.390
> 
> 标签：python, string, for-loop

我对 python 很陌生，正在努力为一个类创建一个程序。我们应该记录一周内每天的降雪量，并将输入四舍五入到小数点后一位，我在下面做了：

```
def main():
    print "~*~*~*~*~*~  SNOWFALL LOG ~*~*~*~*~*~"

    snowFall = float (raw_input("Enter Snowfall for Day 1: "))
    print "Snowfall for Day 1: ", ("%.1f" % snowFall)
    snowFall = float (raw_input("Enter Snowfall for Day 2: "))
    print "Snowfall for Day 2: ", ("%.1f" % snowFall)
    snowFall = float (raw_input("Enter Snowfall for Day 3: "))
    print "Snowfall for Day 3: ", ("%.1f" % snowFall)
    snowFall = float (raw_input("Enter Snowfall for Day 4: "))
    print "Snowfall for Day 4: ", ("%.1f" % snowFall)
    snowFall = float (raw_input("Enter Snowfall for Day 5: "))
    print "Snowfall for Day 5: ", ("%.1f" % snowFall)
    snowFall = float (raw_input("Enter Snowfall for Day 6: "))
    print "Snowfall for Day 6: ", ("%.1f" % snowFall)
    snowFall = float (raw_input("Enter Snowfall for Day 7: "))
    print "Snowfall for Day 7: ", ("%.1f" % snowFall)

main() 
```

但是，在那之后，我们应该使用`for`循环计算总降雪量和平均值。我知道命令`str(command)`也以某种方式涉及，但我不知道如何。

我应该如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:39:03.333

我建议你做的是将值放入列表中，以存储它们。所以在你打印之前把它放进去：

```
snowFallTotal = [] 
```

现在您可以将值放入此列表中。每次`raw_input`放这个之后：

```
snowFallTotal.append(snowFall) 
```

这样做是“附加”`snowFall`到列表中。

现在，在获得所有值之后，您可以使用`for`循环计算总和，然后将其除以`7`得到平均值。

```
totalSum = 0  # variable to store the sum
for i in snowFallTotal:  # iterate through the value list
    totalSum += i  # augmented addition; adds the value to the variable in place
average = totalSum / 7.0  # floating point division to get accurate average 
```

然后您可以打印结果。

```
print 'Average Snowfall for the week:', ('%.1f' % average) 
```

作为旁注，您不需要`for`循环。`sum`您可以用一个简单的函数替换它。

```
totalSum = sum(snowFallTotal) 
```

这将 totalSum 分配给 中元素的总和`snowFallTotal`，这正是`for`循环所做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T08:50:49.217

如果使用循环，则可以节省几行代码：

```
# An empty list to hold data
snowfalls = []

# Loop through each daynumber, from 1 to 7
for daynumber in range(1,8):
    snowfall = float(raw_input("Enter Snowfall for Day {}: ".format(daynumber)))
    snowfalls.append(snowfall)
    print "Snowfall for Day {}: {:.1f}".format(daynumber, snowFall)

# For debugging, print the whole list
print snowfalls

# Calculate total
total_snowfall = sum(snowfalls)
print "Total snowfall: {:.1f}".format(total_snowfall)

# Calculate average (= total / 7.0 ) 
# len() gets the length of the snowfall list
average_snowfall = total_snowfall / len (snowfalls)
print "Average snowfall: {:.1f}".format(average_snowfall) 
```

* * *

我用过[`format()`](http://docs.python.org/2/library/string.html#formatstrings)，这是进行字符串格式化的新方法——它非常漂亮:)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:44:02.563

我建议你仔细阅读你的作业规范，并附上你的课堂笔记。很少有作业没有足够的材料让学生完成任务。

网上有很多与 Python 相关的资源，包括可以帮助您使用特定功能的官方文档，例如[`str()`](http://docs.python.org/2/library/functions.html#str).

如果您可以直接联系您的老师，请向他们提出很多问题。他们可以帮助您解决有关如何处理编程任务的任何基本问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-02-01T07:48:09.783

我可以编写一个函数来做到这一点，但我想你才刚刚开始这样做......所以也许这会有所帮助。它不是 DRY（编程的一个好规则是不要重复自己），但这种方式可能会帮助您更好地理解它！

```
total_snowfall=0.0

snowFall = float (raw_input("Enter Snowfall for Day 1: "))
total_snowfall +=snowFall 
print "Snowfall for Day 1: ", ("%.1f" % snowFall)

snowFall = float (raw_input("Enter Snowfall for Day 2: "))
total_snowfall +=snowFall 
print "Snowfall for Day 2: ", ("%.1f" % snowFall)

snowFall = float (raw_input("Enter Snowfall for Day 3: "))
total_snowfall +=snowFall 
print "Snowfall for Day 3: ", ("%.1f" % snowFall)

snowFall = float (raw_input("Enter Snowfall for Day 4: "))
total_snowfall +=snowFall 
print "Snowfall for Day 4: ", ("%.1f" % snowFall)

snowFall = float (raw_input("Enter Snowfall for Day 5: "))
total_snowfall +=snowFall 
print "Snowfall for Day 5: ", ("%.1f" % snowFall)

snowFall = float (raw_input("Enter Snowfall for Day 6: "))
total_snowfall +=snowFall 
print "Snowfall for Day 6: ", ("%.1f" % snowFall)

snowFall = float (raw_input("Enter Snowfall for Day 7: "))
total_snowfall +=snowFall 
print "Snowfall for Day 7: ", ("%.1f" % snowFall)

print "total snowfall is:" ,("%.1f" % total_snowfall) #you can do some calculations here 
```

# android - 如何将静态 AdMob 代码转为动态代码

> ID：14641634
> 
> 赞同：1
> 
> 时间：2013-02-01T07:32:04.853
> 
> 标签：android

我正在将*AdMob*添加到我的应用程序中。显然我需要将以下布局片段添加到我的每个布局中：

```
 <LinearLayout
     android:id="@+id/linearLayout"
     android:orientation="vertical"
     android:layout_below="@+id/button2"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content" /> 
```

但是，我宁愿动态添加上面的代码片段，而不是将其复制粘贴到每个布局中。

我遇到的问题是翻译以下代码段：

```
android:layout_below="@+id/button2" 
```

到 Java 代码中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:15:15.867

你有两个选择（至少）：

1.  在 XML 上删除`android:layout_below="@+id/button2"`并在代码上添加此属性，就像在这个问题上所说： [如何以编程方式在 RelativeLayout 中布局视图？](https://stackoverflow.com/questions/2305395/laying-out-views-in-relativelayout-programmatically)
2.  另一种选择是创建一个 xml 布局，其中仅包含您在问题上发布的代码，而没有`android:layout_below="@+id/button2"`. 然后在您要使用的每个布局中，使用 include 元素：http: [//developer.android.com/training/improving-layouts/reusing-layouts.html](http://developer.android.com/training/improving-layouts/reusing-layouts.html)

希望能帮助到你。

# java - 如何将 HSSFWorkbook 对象转换为 XSSFWorkbook？

> ID：14641636
> 
> 赞同：2
> 
> 时间：2013-02-01T07:32:06.150
> 
> 标签：java, spring, apache-poi

我正在使用 Spring 3`AbstractExcelView`使用 export - to - excel 功能将文件下载为`.xls`格式，但是当我的行数大于 65536 时，它会引发异常：

> 超出允许范围 (0..65535) 的无效行号 (65536)

我想用来`XSSFworkbook`创建`.xlsx`文件，但是`AbstractExcelView`我已经覆盖了它的方法，

```
protected void buildExcelDocument(Map<String, Object> model,
            HSSFWorkbook wb, HttpServletRequest request,
            HttpServletResponse response) throws Exception {} 
```

仅将`HSSFWorkbook`我想转换为`XSSFWorkbook`对象以创建`.xlsx`格式文件作为参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:22:53.320

[将现有 HSSF 用户模型代码转换为 SS 用户模型（用于 XSSF 和 HSSF）](http://poi.apache.org/spreadsheet/converting.html)的Apache POI 指南涵盖了您所询问的情况

只需相当少量的工作，就可以转换您的代码，以便它通过新的通用接口对 HSSF (.xls) 和 XSSF (.xlsx) 透明地工作。

对于您的特定情况，您似乎需要获取 spring 模块的源代码，按照指南中的说明进行转换，然后提供一个补丁。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:53:18.670

似乎这还不可能，请参阅[https://jira.springsource.org/browse/SPR-6898](https://jira.springsource.org/browse/SPR-6898)上的改进请求，该请求尚未修复......

# java - 如何将等效的 f:ajax 标记添加到动态生成的复选框？

> ID：14641639
> 
> 赞同：0
> 
> 时间：2013-02-01T07:32:16.597
> 
> 标签：java, ajax, jsf

我试图找到这个 XHTML 代码的等价物：

```
<h:selectBooleanCheckbox value="#{sandboxBean.selected}" >
  <f:ajax listener="#{sandboxBean.handleToggle}" render="outputText" />
</h:selectBooleanCheckbox>

<br /><br />
<h:outputText value="#{sandboxBean.selected}" id="outputText"/> 
```

对于必须由支持 bean 动态创建整个复选框的情况。我已经设法通过这段代码获得*了一些*Ajax 的好处：

```
checkbox = new HtmlSelectBooleanCheckbox();
checkbox.setId(makeCheckboxId());

AjaxBehavior valueChangeAction = (AjaxBehavior)FacesContext.getCurrentInstance().getApplication().createBehavior(AjaxBehavior.BEHAVIOR_ID);

valueChangeAction.addAjaxBehaviorListener(new AjaxBehaviorListener() {

  @Override
  public void processAjaxBehavior(AjaxBehaviorEvent event) throws AbortProcessingException {
    System.out.println("Ajax behavior called");     
  }
});

checkbox.addClientBehavior("valueChange", valueChangeAction); 
```

但我不知道如何让 Ajax 调用来执行我的`handleToggle`方法，也不知道如何让它轻松访问`outputText`我想要呈现的元素（在这个简化的示例中）。

此外，这似乎出乎意料地复杂：这一切都源于对具有未知列数的表的需求。我是否可能只是通过在代码中创建整个表格从根本上错误的角度来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:59:27.333

> *但我不知道如何让 Ajax 调用来执行我的 handleToggle 方法*

您的代码对某些特定于环境的怪癖很敏感。较旧的 Mojarra 实现无法执行以编程方式创建的 ajax 行为侦听器方法。确保您拥有最新版本，或尝试 MyFaces。某些特定于容器的 EL 实现无法调用匿名类的方法。确保您使用的是最新的容器版本，或将其提取到公共类中。

* * *

> *也不如何让它轻松访问我想要呈现的 outputText 元素（在这个精简的例子中）*

使用[`AjaxBehavior#setRender()`](http://docs.oracle.com/javaee/6/api/javax/faces/component/behavior/AjaxBehavior.html#setRender%28java.util.Collection%29)方法来设置`render`属性。

```
ajaxBehavior.setRender(Collections.singletonList("outputText")); 
```

* * *

> *此外，这似乎出乎意料地复杂：这一切都源于对具有未知列数的表的需求。我是否可能只是通过在代码中创建整个表格从根本上错误的角度来解决这个问题？*

是的。只需在视图侧进行即可。您可以使用它`<c:forEach>`来动态创建`<h:column>`组件。或者，您可以抓取例如 PrimeFaces `<p:columns>`。另请参阅，例如[，基于 hashmaps 列表动态生成 h:column](https://stackoverflow.com/questions/13176842)。

# vb.net - 在运行时更改 Crystal Report 文本对象文本

> ID：14641640
> 
> 赞同：1
> 
> 时间：2013-02-01T07:32:20.217
> 
> 标签：vb.net, object, text, crystal-reports, edit

我在我的项目中使用水晶报表。它工作得很好，但我只是想让它更灵活。我有文本对象，其中包含文本。它们不受约束，因为它们只是我报告中的附加信息。如何使这些文本对象在运行时可编辑？像鼠标点击一样，所以用户可以像我在设计中那样编辑它？我需要在我的项目中添加一个程序吗？我正在使用 vb.net 2010

我使用此代码调用我的报告

```
Dim sett As New DataSet1
Dim oRpt As New Accountability
Dim obj As CrystalDecisions.CrystalReports.Engine.TextObject
obj = oRpt.ReportDefinition.Sections("Section5").ReportObjects.Item("txtRel")
'Connection code, sql query here
Rpt.SetDataSource(dta)
frmReport.CrystalReportViewer1.ReportSource = oRpt
frmReport.CrystalReportViewer1.RefreshReport()
frmReport.Show() 
```

我需要编辑的文本对象未绑定。它是在设计时创建的

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-25T16:34:20.473

```
Private Sub Form1_Load(sender as Object, e as EventArgs) Handles MyBase.Load
    Dim oRpt As New Accountability

    frmReport.CrystalReportViewer1.ReportSource = oRpt
    frmReport.Show()
End Sub

Private Sub btnChangeText_Click(sender as Object, e as EventArgs) Handles btnChangeText.Click
    Dim oRpt As New Accountability
    ' Change the text of the TextObject you want to change here
    DirectCast(oRpt.ReportDefinition.ReportObjects("Text1"), TextObject).Text = "Your Text"
    DirectCast(oRpt.ReportDefinition.ReportObjects("Text2"), TextObject).Text = "Your Second Text"

    frmReport.CrystalReportViewer1.ReportSource = oRpt
    frmReport.CrystalReportViewer1.RefreshReport()
    frmReport.Show()
End Sub 
```

这就是你需要的！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2014-01-22T09:48:59.270

```
Dim objText As CrystalDecisions.CrystalReports.Engine.TextObject =  
       Report.ReportDefinition.Sections(1).ReportObjects("txtDate")

objText.Text = frmList.txtCall.Text 
```

# windows-phone - 将以前试用版+付费的 WP7 应用更新为 WP8 免费+应用内购买

> ID：14641643
> 
> 赞同：3
> 
> 时间：2013-02-01T07:32:30.763
> 
> 标签：windows-phone

我有一个**免费试用付费**的应用程序。我正在考虑将**其更新**到 Windows Phone 8 并通过**应用内购买免费提供**。我想让所有为以前版本付费的客户都能拥有新版本中可用的所有功能。

当用户更新到新的免费版本时，**是否有任何方法可以检查用户之前是否为该应用程序付费或者她是否正在使用免费试用版？**换句话说，平台是否为我提供了告诉我用户之前是否购买过该应用程序的类和方法？

目前，我看到以下处理这种情况的方法：

**第一个：**

发布当前版本的更新并保持试用+付费。**如果用户有完整版本，请使用 IsolatedStorage 存储信息。**发布新的更新，这次是免费+应用内购买。如果用户应该自动拥有所有功能，请从 IsolatedStorage 中检查。

问题：如果用户跳过第一次更新，她将错过第二次更新的功能。如果用户切换她的手机，他将失去所有功能，因为她实际上并没有获得应用内购买（也许用户可以获得一个免费的“专业”包，它只显示给之前付费的用户应用程序？）

**第二：**

创建一个**网络服务，用户可以在其中注册他们当前的付费应用程序**。更新到新版本后，用户可以登录并获得所有功能。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-11T01:51:52.923

A) 将您的新版本作为新应用发布。发布对先前版本的更新，通过您的网络服务注册密钥，然后将人们指向您的新应用程序，例如向他们发送一封包含注册码的电子邮件。

B) 使用你的任何方式来处理更新，给人们一两个月的时间来更新，然后通过支持来处理其他人。

C）这是 B 的一个变体：发布你的新版本，为*每个人*免费（或非常便宜）提供付费 IAP，不要做广告，在商店里保留一个月，然后发布一个实际上对 IAP 收费的更新并使用支持来处理所有没有机会更新的人。

# c# - XML映射到C#中没有属性的对象

> ID：14641646
> 
> 赞同：3
> 
> 时间：2013-02-01T07:32:41.470
> 
> 标签：c#, xml, serialization, metadata, deserialization

是否有允许将 C# 对象映射到没有属性的 XML 的 C# 库？

我有几个数据源，它们都包含具有相同逻辑结构但模式不同的 XML 数据。例如，在一个 XML 中可能有一个名为“zip-code”的字段，在另一个 XML 中，此数据将位于名为“postal-code”的属性中等。我想在单个 C# 类中反序列化所有 XML 源。

显然我不能使用 XMLAttrubtes，因为有不同的“路径”。我想要[EclipseLink MOXy 之](http://www.javacodegeeks.com/2011/09/mapping-objects-to-multiple-xml-schemas.html)类的东西（元数据在 XML 中指定），但是对于 C#。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T07:44:05.613

XmlSerializer 允许您[`attribute overrides`](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlattributeoverrides.aspx)在运行时动态指定。假设您有以下静态类：

```
public class Foo
{
    public string Bar { get; set; }
} 
```

和以下 XML：

```
<?xml version="1.0" encoding="utf-8" ?> 
<foo bar="baz" /> 
```

您可以在运行时动态添加映射，而无需在模型类上使用任何静态属性。像这样：

```
using System;
using System.Xml;
using System.Xml.Serialization;

public class Foo
{
    public string Bar { get; set; }
}

class Program
{
    static void Main()
    {
        var overrides = new XmlAttributeOverrides();
        overrides.Add(typeof(Foo), new XmlAttributes { XmlRoot = new XmlRootAttribute("foo") });
        overrides.Add(typeof(Foo), "Bar", new XmlAttributes { XmlAttribute = new XmlAttributeAttribute("bar") });
        var serializer = new XmlSerializer(typeof(Foo), overrides);
        using (var reader = XmlReader.Create("test.xml"))
        {
            var foo = (Foo)serializer.Deserialize(reader);
            Console.WriteLine(foo.Bar);
        }
    }
} 
```

现在剩下的就是编写一些自定义代码，这些代码可能会读取包含属性覆盖的 XML 文件，`XmlAttributeOverrides`并在运行时从中构建一个实例，然后将其提供给`XmlSerializer`构造函数。

# windows-phone-8 - 在 windows phone 8 中执行照片选择器任务或相机捕获任务后，墓碑不起作用

> ID：14641648
> 
> 赞同：3
> 
> 时间：2013-02-01T07:32:44.093
> 
> 标签：windows-phone-8

在我的照片增强应用程序中，当我尝试测试墓碑功能时，它可以正常工作。但是当我尝试照片选择器任务或相机捕获任务时，当我第一次从照片库中选择照片时，它可以正常工作。但后来如果我尝试测试墓碑，该应用程序只能在 FAS 模式下运行。我在设备和模拟器中都试过了，但结果是一样的。除了项目属性中的“调试时停用时的 Toambstone”之外，我还需要启用其他选项吗？

[http://dl.dropbox.com/u/95110763/ChooseLauncherSample.zip](http://dl.dropbox.com/u/95110763/ChooseLauncherSample.zip)（查看示例了解更多信息）

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-07-05T12:39:45.920

[您是否在此处查看了 Matt Lacey 对 StackOverflow](https://stackoverflow.com/questions/4889335/how-to-take-a-photo-and-email-it)上的类似问题给出的答案？ 它提供了一些关于如何使用`CameraCaptureTask`with Tombstoning 的见解！

# java - Java程序在数组中打印元音？

> ID：14641651
> 
> 赞同：1
> 
> 时间：2013-02-01T07:33:21.720
> 
> 标签：java, return, return-value

我正在编写一个程序来查找数组中每个单词中元音的数量。我已经完成了代码，我只是不确定 if 语句之后的返回值应该是什么。

```
public static int vowels(char [] array, int x, int y) {
    if(array[x]=='a' || array[x]=='e' || array[x]=='i' || array[x]=='o' || 
                                         array[x]=='u' || array[x]=='y') {
        y++;
    }
    if (x < array.length) {
        x++;
        vowels (array, x, y);
        return ???;
    } else {
        return y;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:39:10.937

代替

```
vowels (array, x, y);
return ???; 
```

您应该返回由元音计算的值，因为它是一个干净的函数，并且没有副作用：

```
return vowels (array, x, y); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:46:08.240

如果我理解正确的话——

```
private static String vowelString = new String("aeiou");
public static int vowels(char [] array) {
        int x=0;
        for(char ch:array) {
            if(vowelString.indexOf(ch)>=0)
                x++;
        }
        return x;
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:53:30.753

这是该程序的解决方案-

public class so { public static void main(String[] args) { // TODO 自动生成的方法存根

```
 char array[] = {'a', 'e', 'i', 'x', 'h', 't', 'd' };
    System.out.print( vowels(array, 0, 0));
}

public static int vowels(char [] array, int x, int y) {
    if(array[x]=='a' || array[x]=='e' || array[x]=='i' || array[x]=='o' || 
                                         array[x]=='u' || array[x]=='y') {
        y++;
    } 
```

请注意， in x 应该小于 array.length-1 因为它的值正在增加。否则会抛出**索引越界异常**。

```
 if (x < (array.length-1)) {
        x++;
        return vowels (array, x, y);

    } else {
        return y;
    }
    //return -1;
   }
} 
```

干杯，

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T07:43:36.093

在这里使用递归是一个非常丑陋的解决方案。如果你这样重写它会更简单：

```
public static int vowels(char[] array) {
    int y = 0;
    for (char x : array) {
        if (x == 'a' || x == 'e' || x == 'i' || x == 'o' || x == 'u' || x == 'y')
            y++;
    }
    return y;
} 
```

但是，如果您确实需要使用递归（例如，这是您的作业，并且您的任务是必须使用它），那么您需要修复代码中的一些错误并删除`y`参数 - 这是不必要的：

```
public static int vowels(char[] array, int x) {
    int y = 0;
    if (array[x] == 'a' || array[x] == 'e' || array[x] == 'i' || array[x] == 'o' ||
            array[x] == 'u' || array[x] == 'y')
        y++;
    if (x < array.length - 1) {
        x++;
        y += vowels(array, x);
    }
    return y;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T07:46:33.527

*   首先，我会准备一张元音**地图**。
*   其次，我将遍历我的数组并检查每个元素是否存在于地图中。如果它们存在，请更新计数器。否则，继续检查其他元素。

*示例代码：*

```
Map<String, String> vowels = new HashMap<String, String>() {
    {
        put("a", "");
        put("e", "");
        put("i", "");
        put("o", "");
        put("u", "");
        put("y", "");
    }
};

String input = "blablabla";
int counter = 0;

for (int i = 0; i < input.length(); i++) {
    if (vowels.containsKey(input.charAt(i) + ""))
        counter++;
} 
```

# c# - 使用 C# 将不同的列表导出到 2 个 CSV 文件

> ID：14641652
> 
> 赞同：0
> 
> 时间：2013-02-01T07:33:30.480
> 
> 标签：c#, csv

有 2 个不同的对象列表，需要将 2 个不同的文件导出为 .csv 并使用 C# 返回相同的文件。请帮助我找到实现相同的乐观方法。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:38:23.617

我建议使用已经实现的库，例如：

*   [CSVHelper](https://github.com/JoshClose/CsvHelper)
*   [文件助手](http://www.filehelpers.com/)

或任何其他你喜欢的。它们通常已经支持处理数据列表的函数。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:46:08.727

简单代码如何将对象列表保存到 csv 文件中，尚未测试，但您可以了解：

```
var properties = typeof(YourModel).GetProperties();

string headerLine = string.Join(",",
                typeof(YourModel).GetProperties().Select(p => p.Name));

var dataLines = yourModellist.Select(item =>
            string.Join(",", properties.Select(p => p.GetValue(item, null))));

var allLines = new[] { headerLine }.Concat(dataLines);

File.WriteAllLines("your csv file", allLines); 
```

# asp.net - 如何将搜索对话框放在 Jqgrid 的中间

> ID：14641657
> 
> 赞同：-1
> 
> 时间：2013-02-01T07:33:44.710
> 
> 标签：asp.net, jqgrid

我有一个 jqgrid，我在其中添加了搜索选项，单击搜索按钮搜索对话框出现在网格的左侧，我希望它位于中间。

这是我的代码...

```
jQuery("#UsersGrid").jqGrid('navGrid', '#UsersGridPager', { add:false, edit: false, del: false, search: true, refresh: true,cloneToTop:true }
        , {}, // default settings for edit
          {}, // default settings for add
           {}, // delete
         {closeOnEscape: true,
         multipleSearch: true,
         closeAfterSearch: true, showQuery: true
     }, // search options
                  {}

        ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:25:26.433

见维基

[http://www.trirand.com/jqgridwiki/doku.php?id=wiki:singe_searching#options](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:singe_searching#options)

您可以设置`left`和`top`定位搜索对话框

# sql - 比较sql server中两个字符串中的数字

> ID：14641658
> 
> 赞同：3
> 
> 时间：2013-02-01T07:33:46.877
> 
> 标签：sql, sql-server, sql-server-2008

我有两个字符串作为@CountryLocationIDs 和@LocationIDs 值：

```
@CountryLocationIDs = 400,600,150,850,160,250
@LocationIDs1       = 600,150,900 
```

然后我需要另一个变量中的输出为：

```
@LocationIDs = 400,600,150,850,160,250,900 
```

任何人请帮忙...提前谢谢...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T07:40:54.917

我创建了接受两个参数的表值函数，第一个是带有 ID 的字符串，第二个是字符串中的分隔符。

```
CREATE FUNCTION [dbo].[Split](@String nvarchar(4000), @Delimiter char(1))       
returns @temptable TABLE (items nvarchar(4000))       
as       
begin       
    declare @idx int       
    declare @slice nvarchar(4000)       

    select @idx = 1       
        if len(@String)<1 or @String is null  return       

    while @idx!= 0       
    begin       
        set @idx = charindex(@Delimiter,@String)       
        if @idx!=0       
            set @slice = left(@String,@idx - 1)       
        else       
            set @slice = @String       

        if(len(@slice)>0)  
            insert into @temptable(Items) values(@slice)       

        set @String = right(@String,len(@String) - @idx)       
        if len(@String) = 0 break       
    end   
return       
end 
```

创建函数后，只需`UNION`按这种方式使用 set 运算符：

**已编辑**

```
WITH ListCTE AS 
(
select items from dbo.split('400,600,150,850,160,250', ',')
union
select items from dbo.split('600,150,900', ',')
)
SELECT TOP 1

   MemberList = substring((SELECT ( ', ' + items )
                           FROM ListCTE t2
                           ORDER BY 
                              items
                           FOR XML PATH( '' )
                          ), 3, 1000 )FROM ListCTE t1 
```

随着`UNION`您将自动从两个字符串中获取不同的值，因此您不需要使用`DISTINCT`子句

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T08:30:07.600

您还可以将选项与动态管理功能[sys.dm_fts_parser 一起](http://msdn.microsoft.com/en-us/library/cc280463%28v=sql.105%29.aspx)
使用 在脚本执行之前，您需要检查全文组件是否已安装：

```
SELECT FULLTEXTSERVICEPROPERTY ('IsFulltextInstalled') 
```

0 = 未安装全文。1 = 已安装全文。NULL = 无效输入或错误。

如果 0 = 全文未安装，那么这篇文章对您来说是必要的[如何在 sql server 2008 上安装全文？](https://stackoverflow.com/questions/869736/how-to-install-fulltext-on-sql-server-2008)

```
DECLARE @CountryLocationIDs nvarchar(100) = '400,600,150,850,160,250',
        @LocationIDs1       nvarchar(100) = '600,150,900',
        @LocationIDs        nvarchar(100) = N''

SELECT @LocationIDs += display_term + ','
FROM sys.dm_fts_parser('"'+ 'nn,' + @CountryLocationIDs + ',' + @LocationIDs1 + '"', 1033, NULL, 0)  
WHERE display_term NOT LIKE 'nn%'
GROUP BY display_term

SELECT LEFT(@LocationIDs, LEN(@LocationIDs) - 1) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:40:04.667

[这](http://oreilly.com/catalog/progphp/chapter/ch05.html)将帮助您完成编程

你也可以参考[这个](https://stackoverflow.com/questions/8127384/built-in-support-for-sets-in-php)

# android - 阻止 EditText 在 Nexus 7 - 4.2 版本的 Activity 启动时获得关注

> ID：14641660
> 
> 赞同：1
> 
> 时间：2013-02-01T07:34:05.223
> 
> 标签：android, android-edittext, startup, nexus-7, autofocus

**注意**：我不确定是否要发布此问题，或者是否应该重新打开上一个问题。我发布此内容是因为它仅与（4.2 版本）有关

似乎这个问题再次重复之前它被发布[在这里](https://stackoverflow.com/questions/1555109/stop-edittext-from-gaining-focus-at-activity-startup)，但这次这个问题只存在于 Nexus7（4.2 版本）

否则，它在 4.1.2 之前的所有其他版本上都可以正常工作（甚至在 Nexus 4.1.2 上测试过）。

我已经尝试/检查了[此处发布的所有建议和可能性](https://stackoverflow.com/questions/1555109/stop-edittext-from-gaining-focus-at-activity-startup)

任何人都可以解释这个问题，也请为此提供修复。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T14:44:16.720

您可能应该显示一些代码，因为我不知道我要发布的内容是否会对您有所帮助。

**我的问题（与问题类似）**我在 4.2 (SG4) 但不是早期版本中注意到的是 EditText 在活动创建期间在 onResume() 之后获得焦点。这个问题并不总是发生，但在活动中打开和关闭键盘时似乎更普遍。

**我的场景**- 两个 EditText 框，我们称它们为 A 和 B，其中 xml 中的 A 具有 requestFocus>/requestFocus>。两者都有 onFocusListners。在 onCreate 之后，A 将获得焦点。在创建期间 onResume 之后，B 将拥有焦点。不知道为什么。两个 onFocusListners 都会改变屏幕布局，我想避免过早地将焦点更改为 B。

**我的工作**- 我在 xml 的 A 和 B 之间插入了第三个 EditText。我们称它为 Z。Z 必须将可见性设置为 VISIBLE。Z 还必须有一个什么都不做的虚拟 onFocusListner。运行这个导致 Z 获得焦点。要将焦点返回到 A 并从布局中删除 Z，我必须执行以下操作：在 onCreate 中，我在视图 Z 上执行了 postDelayed()，在运行方法中，我将焦点更改为 A，并将 Z 的可见性设置为消失。延迟 100 毫秒。我尝试了 onPostResume() 而不是 postDelayed() 但这没有用。

# php - 想要一些关于 .inc 文件的信息

> ID：14641662
> 
> 赞同：-2
> 
> 时间：2013-02-01T07:34:09.283
> 
> 标签：php

> **可能重复：**
> [什么是 .inc 以及为什么要使用它？](https://stackoverflow.com/questions/7129842/what-is-inc-and-why-to-use-it)

我正在开发一个由其他人部分开发的项目。他在文件中定义了一些inc文件和一些功能。现在我需要使用这些功能。为此，我需要知道以下详细信息。我通过谷歌搜索尝试了一些链接。但我仍然无法弄清楚。我的疑问是，

> 1）什么是.inc文件？
> 
> 2) .inc 文件和 .php 文件有什么区别吗？
> 
> 3) 如何在 php 文件中包含 inc 文件？
> 
> 4) 如何在 php 文件中访问 .inc 文件中定义的函数？

任何人都可以通过提供详细信息来帮助我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:39:06.320

1.  inc 文件只是一个包含一些您希望能够包含在其他文件中的东西（函数、类、常量）的文件。

2.  inc 文件和 php 文件之间没有区别，除非特别配置为这样做，否则您的服务器不会执行 inc 文件中的 php，除非它包含在 php 文件中。

3.  您可以像这样包含文件：

    包括“目录/file.inc”；

4.  包含文件后，您可以将其内容视为您所在文件的一部分，因此您可以像在文件中一样访问内容。

注意： .inc 扩展名没有特殊含义 - 您可以将其称为 .bunnyrabbit 文件，它的工作方式完全相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:37:50.163

**.inc - 包含文件**

包含程序源代码引用的声明、标题、函数或其他数据的文本文件；可用于 C/C++、Pascal、Java、PHP（网页）和其他语言。

INC 文件有助于提高编程效率，因为一个文件可以被许多其他文件引用，而不必多次重写代码。

**您可以像包含 php 文件一样简单地包含它**

了解更多信息

[PHP包含文件扩展名？](https://stackoverflow.com/questions/3391235/php-include-file-extensions)

[.php 和 .php.inc 文件扩展名有什么区别？](https://stackoverflow.com/questions/11938916/what-is-the-difference-between-php-and-php-inc-file-extension)

[http://www.fileinfo.com/extension/inc](http://www.fileinfo.com/extension/inc)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:38:00.493

1.  [什么是 .inc 文件？](https://www.google.lv/search?q=what%20is%20.inc%20file)

2.  [.inc 文件和 .php 文件有什么区别吗？](https://www.google.lv/search?q=Is%20there%20any%20difference%20between%20.inc%20file%20and%20.php%20file)

3.  [如何在 php 文件中包含 inc 文件？](https://www.google.lv/search?q=How%20to%20include%20an%20inc%20file%20inside%20a%20php%20file)

4.  [如何访问 php 文件中 .inc 文件中定义的函数？](https://www.google.lv/search?q=How%20to%20access%20the%20functions%20defined%20in%20.inc%20file%20inside%20php%20file)

有那么难吗？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T07:38:24.603

它只是另一个扩展文件。仅供参考，他将其设置为 .inc （很可能是 .include ）

它有一些缺点，因为服务器未配置为处理这些文件，因此任何人都可以实际查看这些文件的源代码。将它们转换为 .php 文件并将它们添加到包含文件夹中会更明智。

它们之间没有其他区别，您可以将它们作为普通的 php 文件访问。

要定义它们，您可以简单地 include("file.inc") 并使用其中提供的方法

# phpstorm - 在 PHPStorm 中快速移动 carret

> ID：14641666
> 
> 赞同：0
> 
> 时间：2013-02-01T07:34:24.233
> 
> 标签：phpstorm

在 VIM 中，我们可以使用 向前移动 3 个单词，使用`3``w`向后移动 3 个单词`3``b`。

我们有机会在 PHPStorm 中做到这一点吗？

如果不是，任何想法如何在一行内快速移动 carret 而无需逐字逐句`⌥` `→</kbd>?`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T10:00:29.183

PhpStorm有[IdeaVim 插件](http://plugins.jetbrains.com/plugin/?idea&pluginId=164)，你试过了吗？

# java - 在基于 Java 的 Web 应用程序中为数据库动态分配资源

> ID：14641668
> 
> 赞同：2
> 
> 时间：2013-02-01T07:34:30.980
> 
> 标签：java

我最近在玩基于 Java 的 Web 应用程序。这是一个我很长一段时间都想不通的障碍。希望有人能给一些提示。

就我而言，我使用了两个 xml 文件进行预配置。一种是数据库资源的详细信息，包括 URL、用户名、密码等，另一种是稍后 DOM 的简单选择选项。我想使用 xml 文件进行预配置的目的是使我的程序尽可能动态。因此，我的一个数据库中的任何更新，我都可以只更改两个 xml 文件而不是源代码。

为了实现这一点，我需要根据用户的选择动态分配数据库资源。我个人的想法是通过 Controller 或 Servlet 类中的以下过程来实现这个目标：

```
// get user's selected option from request, create Input object       
String userSelection = request.getParameter("title");
Input userInput = new Input(userSelection);     

// open user selection options xml inside Input class
Document doc = dBuilder.parse(xmlFile); 

// get matched option and set database name inside Input class
if(userSelectoin.equals(doc.getElementByTagName("desiredTitle"))
{
   userInput.setDB(doc.getElementByTagName("dbname");  
}

// use resource injection to get all details of corresponding database in database xml
@Resource(name=userInput.getDB())
public void doConnection()
{
   DataSource myDB;
   Connection myConn = myDB.getConnection(); 
} 
```

障碍在于第四道工序。对于资源注入，其名称需要常量字符串，例如`@Resource(name="myDB1")`. 然而，权衡是它可能会使程序根本不动态。我的查询将是如何在 java 中设置和获取最终字符串，或者是否有任何其他可能的解决方案来实现我的目标？

来自 Eclipse 的错误消息是“注释属性 Resource.name 的值必须是常量表达式”。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T09:35:10.840

按照zvzdhk在他的建议中提到的，我已经成功实现了运行时动态数据库选择。下面的代码是我的实现细节：

```
Connection conn = null; 
Context ctx = new InitialContext();
DataSource ds = (DatSource)ctx.lookup("java:com/env"+userInput.getDB());

if(ds != null)
{
    conn = ds.getConnection();
} 
```

注意：请记住在 WebContent/META-INF/context.xml 或 tomcat/config/context.xml 下设置数据源池。同时将jdbc驱动jar文件复制到tomcat/lib/文件夹下。如果您使用的是 MySQL，它将是 mysql-connector-java.jar。而如果您使用的是 IBM DB2，它将是 db2jcc.jar、db2jcc4.jar 和 db2jcc_license_cu.jar。

希望这个答案可以帮助其他人。这是我找到的最好的资源，请随意看看。它不仅有利于项目，也有利于你自己。[使用 Java Web 应用程序选择最佳数据库连接](http://www.easywayserver.com/blog/java-best-database-connectivity-web/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:10:18.947

对于动态数据源，使用 jndi 资源会更好：

在 web.xml 中定义数据源

```
<resource-ref>
    <description>My DataSource</description>
    <res-ref-name>jdbc/myDS</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
</resource-ref> 
```

然后在你的控制器中：

```
@Resource(name="jdbc/myDS")
private DataSource myDS;

public void doSomething() {
  Connection conn = myDS.getConnection();
  ...
} 
```

然后由应用程序服务器在其配置中定义数据源（通常通过控制台），将数据库配置与您的应用程序完全分离，并且通常免费为您提供连接池。

# c# - 如何在 linq 查询中实现 group by？

> ID：14641670
> 
> 赞同：1
> 
> 时间：2013-02-01T07:34:33.397
> 
> 标签：c#, linq

我已经通过查询实现了分组，例如

```
var query = (from a in Main
             group a by a.Parent into g
             where g.Count() >= 0
             select new
             {
                 parent= g.Key,
                 Name= g.Select(y => y.name).Count(),
                 Contact= g.Select(x => x.contact).Count(),
                 Friends= g.Select(z => z.friends).Count(),
             }).ToArray(); 
```

在主要的地方，我得到了像这样的记录

```
In first list  ====>      Parent="1"
                          name="2"
                          contact=0
                          friends=0 

In second List ===>       Parent="2"
                          name="2"
                          contact=0
                          Friends=0 
```

但是当我使用 group by 查询时，我以这种方式获取值

```
parent="1",Name="2",Contact="2",Friends="2" 

parent="2",Name="3",Contact="2",Friends="2" 
```

而且我还需要每个字段的计数。

所以请你能告诉我哪里做错了吗？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:01:54.883

```
g.Select(x => x.friends).Count(), 
```

您可能会混淆`Count`运算符的含义。`Count`计算查询投影的元素*数量*，而不是它们的总和。因此，如果`g`包含 2 个元素，则`g.Select(x => x.anything)`无论`anything`属性的值如何，都将始终返回 2。

我假设您的意思是返回从属性投影的值的*总和*`friends`，在这种情况下，您应该使用：

```
g.Sum(x => x.friends), 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:59:40.883

首先，不要在分组后使用 ToArray() 并期望相同的东西。

当您执行常规 Select-Where 查询时，将返回一个 IEnumerable，您将其转换为数组

进行分组时的区别在于返回类型将是 IGrouping ，它不会转换为您期望的相同数组。

如果分组，您需要以不同的方式处理输出。

* * *

建议：

```
int nameCount = 0;
int contactCount = 0;
int friendCount = 0;

Main.GroupBy(x => x.Parent).ToDictionary(pair => pair.Key, pair => {
   nameCount += pair.Count(y => y.Name);
  //etc. for the rest of the counters.
} 
```

这样，遍历分组元素的选择器函数将用于汇总每个元素的联系人、朋友和姓名。我希望我理解你的问题的背景。

# spring - 如何使用 Spring MVC 从表单元素中获取数据

> ID：14641672
> 
> 赞同：0
> 
> 时间：2013-02-01T07:34:36.350
> 
> 标签：spring, jsp, struts

Struts 提供了 ActionFormBean——它有助于在 html/jsp 表单中捕获/显示数据。在 Spring 框架的情况下，我们如何在 html/jsp 中捕获/显示数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:46:06.777

这取决于您使用的 Spring-MVC 版本和 Spring 控制器。从 Spring 版本 3 开始，引入了新的原型注解`@Controller`，我们不再需要让我们的控制器扩展任何超类。而传递过来的数据只是http请求属性中的一个POJO（属性中添加的`Model/ModelAndView`）。例子 ：

```
@RequestMapping(value = "/submit", method = RequestMethod.POST)
        public ModelAndView submit(HttpServletRequest req, HttpServletResponse rep,
                @ModelAttribute("formbean") @Valid MyForm form,
                BindingResult br) {
    //the form bean is passed through annotation @ModelAttribute
    form.getUserEmail()
    //you can pass data to jsp in this way
    ModelAndView mv = new ModelAndView("yourview");
    mv.addObject("yourattribute",SomeThingPassingtoJSP);

return mv;
} 
```

# magento - 在 Magento 交易电子邮件中添加密件抄送

> ID：14641673
> 
> 赞同：7
> 
> 时间：2013-02-01T07:34:39.657
> 
> 标签：magento

我创建了一个新的电子邮件模板，它在 Magento 中运行良好，但我不知道如何将密件抄送地址添加到电子邮件中。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-01T09:29:23.043

您可以在发送电子邮件的代码中添加密件抄送：

```
Mage::getModel('core/email_template')
     ->addBcc('em@ail.com')
     ->sendTransactional(... 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-10-30T06:09:53.413

这是我找到的答案：

```
 $mailTemplate->setTemplateSubject($mailSubject)->addBcc('youremail@mail.com')
->s‌​endTransactional($templateId, $sender, $email, $cus_name, $data, $storeId); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-01T08:33:46.900

You can do it in the config. Go to Sales > Sales E-Mails. Foreach transactional E-Mail you can enter `Send Order Email Copy To` and set the Method to BCC via `Send Order Email Copy Method`.

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-09-22T08:46:03.950

单个电子邮件或数组电子邮件是可以接受的，请检查：

> app\code\core\Mage\Core\Model\Email\Template.php

```
Mage_Core_Model_Email_Template

public function addBcc($bcc)
{
    if (is_array($bcc)) {
        foreach ($bcc as $email) {
            $this->getMail()->addBcc($email);
        }
    }
    elseif ($bcc) {
        $this->getMail()->addBcc($bcc);
    }
    return $this;
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-02-24T15:28:50.247

创建di.xml：`app/code/Py/Custom/etc/di.xml`

```
<?xml version="1.0"?>
<config xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="urn:magento:framework:ObjectManager/etc/config.xsd">
    <type name="\Magento\Framework\Mail\Template\TransportBuilder">
        <plugin name="TransportBuilderPlugin" type="Py\Custom\Plugin\Mail\Template\TransportBuilder" sortOrder="1" />
    </type>
</config> 
```

创建插件：`app/code/Py/Custom/Plugin/Mail/Template/TransportBuilder.php`

```
<?php

namespace Py\Custom\Plugin\Mail\Template;

class TransportBuilder
{
    public function afterGetTransport(\Magento\Framework\Mail\Template\TransportBuilder $subject, $result)
    {
        $result->getMessage()->addCc('test@gmail.com');     
        return $result;
    }
} 
```

# python - 如何使用python检测应用程序是否正在运行以及MAC OS下是否显示消息框

> ID：14641680
> 
> 赞同：5
> 
> 时间：2013-02-01T07:35:09.030
> 
> 标签：python, macos, unit-testing

我正在尝试使用 python 为 Mac OS 上的应用程序编写单元测试。我遇到了一个问题，不知道该怎么做。我希望测试程序通过检查进程来检查应用程序是否正在运行，并且我还想检查是否显示消息框。另外，我希望测试程序可以自动点击消息框上的按钮。谁能给我一些建议？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-03-23T09:59:22.037

这是使用 AppleScript 的一种方法：

```
import subprocess

def is_runnning(app):
    count = int(subprocess.check_output(["osascript",
                "-e", "tell application \"System Events\"",
                "-e", "count (every process whose name is \"" + app + "\")",
                "-e", "end tell"]).strip())
    return count > 0

print is_runnning("iTunes") 
```

另请参阅[this](http://daringfireball.net/2006/10/how_to_tell_if_an_app_is_running)了解一些变化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-24T05:33:19.910

查看[psutil](http://code.google.com/p/psutil/)以检查主机系统的各个部分。使用这个 python 库，您可以检查哪些进程正在运行。

至于与 OS X 本身的交互，[这个线程有一些关于使用](https://stackoverflow.com/questions/281133/controlling-the-mouse-from-python-in-os-x)[PyObjC](http://pythonhosted.org/pyobjc/)控制鼠标和键盘的好信息

# android - 通过 nodeJs 在 android 设备上复制 Couch DB 失败

> ID：14641682
> 
> 赞同：1
> 
> 时间：2013-02-01T07:35:13.240
> 
> 标签：android, node.js, couchdb, couchbase, couchapp

我已经在 android 平板电脑上设置了 couchdb 主服务器、 couch db clinet 和用于路由的 nodeJs。平板电脑最初能够从主服务器获取数据，没有任何问题。但是，当我更改 master 中的数据时，复制失败并显示以下消息

如果我删除 nodeJs 路由，同样的复制工作。

```
02-01 11:59:26.410: E/CouchDB(2014): [error] [<0.999.0>] Worker <0.1008.0> died with reason: {process_died,
02-01 11:59:26.410: E/CouchDB(2014):                                                          <0.1021.0>,
02-01 11:59:26.410: E/CouchDB(2014):                                                          {function_clause,
02-01 11:59:26.410: E/CouchDB(2014):                                                           [{string,tokens1,
02-01 11:59:26.410: E/CouchDB(2014):                                                             [undefined,";",
02-01 11:59:26.410: E/CouchDB(2014):                                                              []]},
02-01 11:59:26.410: E/CouchDB(2014):                                                            {mochiweb_util,
02-01 11:59:26.410: E/CouchDB(2014):                                                             parse_header,1},
02-01 11:59:26.410: E/CouchDB(2014):                                                            {couch_httpd,
02-01 11:59:26.410: E/CouchDB(2014):                                                             get_boundary,1},
02-01 11:59:26.410: E/CouchDB(2014):                                                            {couch_httpd,
02-01 11:59:26.410: E/CouchDB(2014):                                                             parse_multipart_request,
02-01 11:59:26.410: E/CouchDB(2014):                                                             3},
02-01 11:59:26.410: E/CouchDB(2014):                                                            {couch_api_wrap,
02-01 11:59:26.410: E/CouchDB(2014):                                                             '-open_doc_revs/6-fun-1-',
02-01 11:59:26.410: E/CouchDB(2014):                                                             4},
02-01 11:59:26.410: E/CouchDB(2014):                                                            {couch_api_wrap_httpc,
02-01 11:59:26.410: E/CouchDB(2014):                                                             process_stream_response,
02-01 11:59:26.410: E/CouchDB(2014):                                                             5},
02-01 11:59:26.410: E/CouchDB(2014):                                                            {couch_api_wrap,
02-01 11:59:26.410: E/CouchDB(2014):                                                             '-open_doc_revs/6-fun-2-',
02-01 11:59:26.410: E/CouchDB(2014):                                                             4}]}}
02-01 11:59:26.465: E/CouchDB(2014): [error] [<0.999.0>] Replication `d118ca809bc321354f20e94bf000dda1+continuous` (`http://192.168.1.125:5000/mi-master/` -> `flight-oc0001-20120801-ams-sxm`) failed: {worker_died,<0.1008.0>,
02-01 11:59:26.465: E/CouchDB(2014):     {process_died,<0.1021.0>,
02-01 11:59:26.465: E/CouchDB(2014):         {function_clause,
02-01 11:59:26.465: E/CouchDB(2014):             [{string,tokens1,[ ,[]]},
02-01 11:59:26.465: E/CouchDB(2014):              {mochiweb_util,parse_header,1},
02-01 11:59:26.465: E/CouchDB(2014):              {couch_httpd,get_boundary,1},
02-01 11:59:26.465: E/CouchDB(2014):              {couch_httpd,parse_multipart_request,3},
02-01 11:59:26.465: E/CouchDB(2014):              {couch_api_wrap,'-open_doc_revs/6-fun-1-',4},
02-01 11:59:26.465: E/CouchDB(2014):              {couch_api_wrap_httpc,process_stream_response,5},
02-01 11:59:26.465: E/CouchDB(2014):              {couch_api_wrap,'-open_doc_revs/6-fun-2-',4}]}}}
02-01 11:59:26.496: E/CouchDB(2014): [error] [<0.115.0>] Error in replication `d118ca809bc321354f20e94bf000dda1+continuous` (triggered by document `cloud2flight-oc0001-20120801-ams-sxm`): {worker_died,<0.1008.0>,
02-01 11:59:26.496: E/CouchDB(2014):     {process_died,<0.1021.0>,
02-01 11:59:26.496: E/CouchDB(2014):         {function_clause,
02-01 11:59:26.496: E/CouchDB(2014):             [{string,tokens1,[undefined,";",[]]},
02-01 11:59:26.496: E/CouchDB(2014):              {mochiweb_util,parse_header,1},
02-01 11:59:26.496: E/CouchDB(2014):              {couch_httpd,get_boundary,1},
02-01 11:59:26.496: E/CouchDB(2014):              {couch_httpd,parse_multipart_request,3},
02-01 11:59:26.496: E/CouchDB(2014):              {couch_api_wrap,'-open_doc_revs/6-fun-1-',4},
02-01 11:59:26.496: E/CouchDB(2014):              {couch_api_wrap_httpc,process_stream_response,5},
02-01 11:59:26.496: E/CouchDB(2014):              {couch_api_wrap,'-open_doc_revs/6-fun-2-',4}]}}}
02-01 11:59:26.496: E/CouchDB(2014): Restarting replication in 5 seconds. 
```

对此有任何帮助

# ios - Clang 错误：在 iPhone 应用程序中集成 AdColony sdk 时的链接器命令

> ID：14641688
> 
> 赞同：0
> 
> 时间：2013-02-01T07:35:32.367
> 
> 标签：ios, sdk, path, linker-errors, ads

呃，

我无法将 AdColony 的视频广告系统集成到我的 iPhone 应用程序中。到目前为止，我觉得我已经按照文档进行了 T，但我什至无法通过第一个检查点。

文档下载链接在这里： [https ://github.com/AdColony/AdColony-iOS-SDK/tree/master/Documentation](https://github.com/AdColony/AdColony-iOS-SDK/tree/master/Documentation)

这是我得到的错误：

ld：找不到文件：PATH/TO/LIBRARY/libAdColony.a clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

非常感谢任何帮助或见解！谢谢大家收听：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T18:11:46.520

在这种情况下，看起来您正在使用可选步骤（使用`-force_load`编译器设置）。执行此操作时，您需要指定文件的实际路径（从项目的根目录）`libAdColony.a`；该`PATH/TO/LIBRARY/`位是您应该替换的占位符。如果您不需要使用该`-force_load`标志来让您的项目正常工作，我建议您删除它。此外，为了获得更快的响应，请随时通过文档中列出的支持电子邮件地址与我们联系。

# zend-framework - 服务器中的zend框架作为我所有网站的集中式框架

> ID：14641690
> 
> 赞同：0
> 
> 时间：2013-02-01T07:35:49.433
> 
> 标签：zend-framework

我们的团队正在使用 php zend 框架来开发网站

每次我们部署它都会在服务器中占用大量内存

使用zend，我们开发了近9 个站点。

我的问题是有可能将 zend 框架工作放在服务器中作为我所有网站的集中式工作

请帮助我们....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:23:36.520

如果我对您的理解正确，您希望将 Zend 框架库放在一个位置但可用于多个应用程序（网站）。

如果这是您的问题：答案是肯定的。调整您`php.ini include_path`以反映 Zend 框架库的位置：

`include_path=".;C:\Zend\ZendServer\bin\pear;C:\Zend\ZendServer\share\ZendFramework\library;"`

这是一个 windows 示例，但 *nix 示例非常相似。

# c# - Excel 后期绑定 EntireColumn.NumberFormat

> ID：14641694
> 
> 赞同：5
> 
> 时间：2013-02-01T07:36:13.757
> 
> 标签：c#, excel, late-binding

如何使用后期绑定设置 Range.EntireColumn.NumberFormat？我目前有这个代码：

```
 object rg = ws.GetType().InvokeMember("Cells", BindingFlags.GetProperty, null, ws, new object[2]{1,iCol});
 object ec = rg.GetType().InvokeMember("EntireColumn", BindingFlags.GetProperty, null, rg, null);
 rg.GetType().InvokeMember("NumberFormat", BindingFlags.SetProperty, null, rg, new object[1] { "DD/MM/YYYY" }); 
```

而且对于 AutoFit 方法，我有这个：

```
object rng = ws.GetType().InvokeMember("UsedRange", BindingFlags.GetProperty, null, ws, null);
object cols = rng.GetType().InvokeMember("Columns", BindingFlags.GetProperty, null, rng, null);
cols.GetType().InvokeMember("AutoFit", BindingFlags.InvokeMethod, null, cols, null); 
```

对于 AutoFit，我不确定我是否做得很好。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T07:51:38.173

**久经考验**

```
private void button1_Click(object sender, EventArgs e)
{
    object xlApp;
    object xlWbCol;
    object xlWb;
    object xlSheet;
    object xlRange;
    object xlWsCol;

    //~~> create new Excel instance
    Type tp;
    tp = Type.GetTypeFromProgID("Excel.Application");
    xlApp = Activator.CreateInstance(tp);

    object[] parameter = new object[1];
    parameter[0] = true;
    xlApp.GetType().InvokeMember("Visible", BindingFlags.SetProperty, null, xlApp, parameter);
    xlApp.GetType().InvokeMember("UserControl", BindingFlags.SetProperty, null, xlApp, parameter);

    //~~> Get the xlWb collection
    xlWbCol = xlApp.GetType().InvokeMember("Workbooks", BindingFlags.GetProperty, null, xlApp, null);

    //~~> Create a new xlWb
    xlWb = xlWbCol.GetType().InvokeMember("Add", BindingFlags.InvokeMethod, null, xlWbCol, null);

    //~~> Get the worksheet collection
    xlWsCol = xlWb.GetType().InvokeMember("WorkSheets", BindingFlags.GetProperty, null, xlApp, null);

    //~~> Create a new workxlSheet
    xlSheet = xlWb.GetType().InvokeMember("Add", BindingFlags.InvokeMethod, null, xlWsCol, null);

    //~~> Assign cell to xlRange object
    xlRange = xlSheet.GetType().InvokeMember("Cells", BindingFlags.GetProperty, null, xlSheet, new object[2] { 1, 1 });

    //~~> Write a date to cell 
    xlRange.GetType().InvokeMember("Value", BindingFlags.SetProperty, null, xlRange, new object[] { "1-1-2012" });

    //~~> Get the column
    object cols = xlRange.GetType().InvokeMember("Columns", BindingFlags.GetProperty, null, xlRange, null);

    //~~> Autofit the column
    cols.GetType().InvokeMember("AutoFit", BindingFlags.InvokeMethod, null, cols, null);
    //~~> Format the entire Column
    cols.GetType().InvokeMember("NumberFormat", BindingFlags.SetProperty, null, cols, new object[1] { "DD/MM/YYYY" });

    //~~> Release the object
    //System.Runtime.InteropServices.Marshal.ReleaseComObject(xlApp);
} 
```

**注意**：`using System.Reflection;`在顶部添加

**跟进**

对于`usedrange`此作品的 Autofit

```
private void button1_Click(object sender, EventArgs e)
{
    object xlApp;
    object xlWbCol;
    object xlWb;
    object xlSheet;
    object xlRangeUsdRng;
    object xlRange;
    object xlWsCol;

    //~~> create new Excel instance
    Type tp;
    tp = Type.GetTypeFromProgID("Excel.Application");
    xlApp = Activator.CreateInstance(tp);

    object[] parameter = new object[1];
    parameter[0] = true;
    xlApp.GetType().InvokeMember("Visible", BindingFlags.SetProperty, null, xlApp, parameter);
    xlApp.GetType().InvokeMember("UserControl", BindingFlags.SetProperty, null, xlApp, parameter);

    //~~> Get the xlWb collection
    xlWbCol = xlApp.GetType().InvokeMember("Workbooks", BindingFlags.GetProperty, null, xlApp, null);

    //~~> Create a new xlWb
    xlWb = xlWbCol.GetType().InvokeMember("Add", BindingFlags.InvokeMethod, null, xlWbCol, null);

    //~~> Get the worksheet collection
    xlWsCol = xlWb.GetType().InvokeMember("WorkSheets", BindingFlags.GetProperty, null, xlApp, null);

    //~~> Create a new workxlSheet
    xlSheet = xlWb.GetType().InvokeMember("Add", BindingFlags.InvokeMethod, null, xlWsCol, null);

    //~~> Assign cell F5 to xlRange object for testing purpose
    xlRange = xlSheet.GetType().InvokeMember("Cells", BindingFlags.GetProperty, null, xlSheet, new object[2] {5, 6 });
    xlRange.GetType().InvokeMember("Value", BindingFlags.SetProperty, null, xlRange, new object[] { "1-1-2012" });

    //~~> Assign UsedRange
    xlRangeUsdRng = xlSheet.GetType().InvokeMember("UsedRange", BindingFlags.GetProperty, null, xlSheet, null);

    //~~> Get the Columns
    object cols = xlRangeUsdRng.GetType().InvokeMember("EntireColumn", BindingFlags.GetProperty, null, xlRangeUsdRng, null);

    //~~> Autofit
    cols.GetType().InvokeMember("AutoFit", BindingFlags.InvokeMethod, null, cols, null);

} 
```

# mysql - MYSQL DATE_SUB 在 FEB 中无法正常工作

> ID：14641695
> 
> 赞同：1
> 
> 时间：2013-02-01T07:36:15.237
> 
> 标签：mysql, sql

我写了这个查询，它工作正常，除了在 2 月！出于某种原因，因为 FEB 使用`INTERVAL 1 MONTH`它读回 JAN 的函数有 28 天。它应该只从 FEB 开始读取到 FEB 结束！

```
SELECT SUM(IF((`date` BETWEEN DATE_SUB('2013-02-28', INTERVAL 1 MONTH) AND '2013-02-28'), earnings, "null")) AS Rev0 
FROM table 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:01:24.180

给定任何日期，您可以使用它来获取该月的第一天：

```
DATE_SUB('2013-02-28', INTERVAL DAY('2013-02-28')-1 DAY) 
```

或者这个：

```
CAST(DATE_FORMAT('2013-02-28' ,'%Y-%m-01') as DATE) 
```

最后一天，已经定义了一个函数：

```
LAST_DAY('2013-02-28') 
```

您的查询将变为：

```
SELECT
  SUM(IF((`date` BETWEEN DATE_SUB('2013-02-28', INTERVAL DAY('2013-02-28')-1 DAY)
          AND LAST_DAY('2013-02-28')), earnings, "null")) AS Rev0 
FROM table 
```

# jquery - 域名验证

> ID：14641699
> 
> 赞同：-1
> 
> 时间：2013-02-01T07:36:39.293
> 
> 标签：jquery, regex

我想验证一个不允许用户输入 http:// 或 HTTP:// 和 www 的域名。和万维网。它应该接受以下条件

```
1.xyz.com
2.xyz.co.in
3.xyz.com.in
4.mail.com.com
5.ma-il.com
6.ma-il.com.com
7.123.com
   mail2.com
   2mail.com
   mai2l.com
8.COM.COM.COM
9.mail.comm.com
10.mail.com.com.com.comc.com
11.mail.123.COM
12.123.123.com
13.MAIL.MA-1.COM  and some invalid domains are

mail.com.inn,mail.innn,123.comm,mail.comm.comm,mail.com.c-m. 
```

有人可以帮我验证域字段吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:21:24.260

尝试这个 ：

```
^([a-zA-Z0-9]([a-zA-Z0-9\-]{0,61}[a-zA-Z0-9])?\.)+[a-zA-Z- ]{2,6}$
```

# pointers - STL 容器、分配器和指针包装器

> ID：14641703
> 
> 赞同：1
> 
> 时间：2013-02-01T07:36:48.120
> 
> 标签：pointers, stl, containers, allocator, libc++

我制作了一个自定义的平板分配器，它使用 mmap 来分配固定大小的段池。这些段在逻辑上是连续的，但在物理上是离散的。我还定义了一个指针包装类，它包含从池的逻辑起点的偏移量。指针类如下所示：

```
template<typename T>
struct offptr_t {
    typedef offptr_t<T> this_t;
    typedef T element_type;
    typedef OFFSET difference_type;
    template<typename U> struct rebind { typedef offptr_t<U> other; };
    offptr_t(const mem_pool *p, OFFSET o)
    : pool(p), offset(o)
    {}
    // ...
}; 
```

这是分配器：

```
template<typename T>
struct mem_pool_allocator {
public:
    typedef mem_pool_allocator<T> this_t;
    typedef T value_type;
    typedef offptr_t<T> pointer;
    typedef const offptr_t<T> const_pointer;
    typedef T& reference;
    typedef const T& const_reference;
    typedef size_t size_type;
    typedef int64_t difference_type;
    template< class U > struct rebind { typedef mem_pool_allocator<U> other; };
    // ...
}; 
```

然后我根据 STL 要求定义了 pointer_traits 和 iterator_traits 类：

```
namespace std {
    template<typename T>
    struct pointer_traits<offptr_t<T>> {
        typedef typename offptr_t<T> pointer;
        template<typename U> struct rebind { typedef offptr_t<U> other; };
    };

    template<typename T>
    struct iterator_traits<offptr_t<T>> {
        typedef typename offptr_t<T> pointer;
        typedef typename pointer::difference_type difference_type;
        typedef typename pointer::element_type value_type;
        typedef typename pointer::element_type &reference;
        typedef std::random_access_iterator_tag iterator_category;
    };
}   // End of namespace std 
```

当我在 libc++ 中将这些类与 STL 容器一起使用时，在 c++/v1/vector 中出现了几个编译错误：

```
template <class _Tp, class _Allocator>
_LIBCPP_INLINE_VISIBILITY inline
void
__vector_base<_Tp, _Allocator>::__destruct_at_end(const_pointer __new_last, false_type) _NOEXCEPT
{
    while (__new_last != __end_)
        __alloc_traits::destroy(__alloc(), const_cast<pointer>(--__end_));
}

template <class _Tp, class _Allocator>
_LIBCPP_INLINE_VISIBILITY inline
void
__vector_base<_Tp, _Allocator>::__destruct_at_end(const_pointer __new_last, true_type) _NOEXCEPT
{
    __end_ = const_cast<pointer>(__new_last);
} 
```

Vector 在指针类型上使用 const_cast<> ， const_cast<> 只能与原始指针/引用一起使用并且不能重载，这意味着无法使用自定义的类指针对象。

我做错了什么还是只是 libc++ 中 STL 实现的一个缺陷？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T00:36:54.937

对我来说，这看起来像是 libc++ 中的错误。我正在修复...

# c# - 将 DateTime.Now 与确切时间进行比较

> ID：14641707
> 
> 赞同：2
> 
> 时间：2013-02-01T07:37:36.217
> 
> 标签：c#

我想在计时器经过事件上有确切的时间下面是我想要做的

```
 string now = DateTime.Now.ToString("HHmm");

        if (now == "1630")
        {
            int a = 10;
        } 
```

即使时间是 1630，if 语句也是错误的，我在做什么错了。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-01T07:44:39.073

不知道为什么将当前时间转换为`string`

```
DateTime currentTime = DateTime.Now;
if (currentTime.Hour == 16 && currentTime.Minute == 30)
{
     int a = 10;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:46:45.243

避免将时间转换为字符串，做这样的事情

```
if(DateTime.Now.TimeOfDay == System.TimeSpan.Parse("00:09:00"))
{
 int a = 10;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T08:04:17.247

```
TimeSpan dbaseTime = TimeSpan.Parse("16:30:00");
if (DateTime.Now.TimeOfDay == dbaseTime )
   a=10; 
```

# iis - Web 服务器未加载索引页面

> ID：14641711
> 
> 赞同：1
> 
> 时间：2013-02-01T07:37:56.720
> 
> 标签：iis, web-hosting

您好，我们有一个运行良好的网站，托管在 Microsoft IIS 6.0 共享主机上。然而，今天有一些奇怪的行为。默认情况下，该网站不加载索引页面。因此，例如，如果我访问网站 www.websitename.com，它将显示一个空白页面。但是，如果我去 www.websitename.com/index.html 它将加载页面正常。文件夹也是如此，例如去 www.websitename.com/foldername 将显示一个空白页面，但去 www.websitename.comn/foldername/index.php 将打开正常

可能是什么问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:43:30.477

我认为默认文档存在问题，这可能会有所帮助[http://support.microsoft.com/kb/320051](http://support.microsoft.com/kb/320051)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:45:18.513

您是否曾经更改过索引页面文件或 IIS 设置上的某些内容。根据您提供的信息很难诊断问题。

# javascript - 在 Codeigniter 中使用/嵌入 Ember js

> ID：14641713
> 
> 赞同：5
> 
> 时间：2013-02-01T07:37:59.937
> 
> 标签：javascript, codeigniter, architecture, ember.js

我即将开始使用 Ember.js 作为前端技术和 Codeigniter 在后端开发 Web 应用程序。

我感到震惊的问题是如何将 ember js 与 codeigniter 一起嵌入或使用。有可能通过 web 服务从 codeigniter 公开 JSON 对象并从 ember 中使用它们。但在这种情况下，可能会出现处理会话和 cookie 的问题。我不知道是否可以将ember嵌入codeigniter并使用某种技术直接访问数据。我也在网上搜索，但没有得到任何确切的回应。

究竟应该使用什么技术将 ember js 嵌入到 codeigniter 中。

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T07:53:43.613

基本上，这与使用任何其他带有 Ember.js 的框架是一样的。问题是 Codeigniter 没有任何内置的 ORM 或好的 PDO 驱动程序。由于它多年来没有改变，并且仍在使用旧版本的 PHP，因此您可能会遇到困难。在 Composer 的帮助下，PHP 库部分有了一些改进（尽管速度非常慢）。你可以利用一些更流行的 ORM，比如 Laravel 的 Eloquent。

一些搜索带来了本教程： http: [//mannyisles.com/using-eloquent-orm-inside-codeigniter.html](http://mannyisles.com/using-eloquent-orm-inside-codeigniter.html)

这将允许您使用漂亮的 API 轻松公开来自数据库的 JSON 对象。接下来是使用[Ember Data](https://github.com/emberjs/data)。默认情况下，Ember Data 使用 RESTful API。这就是你需要的。您将构建遵循 RESTful 约定的控制器和模型。

基本上就是这样。会话都是在服务器端制定的。但是您可以查看这些解释有关用户身份验证的帖子：

*   [在 Ember.JS 应用程序中强制执行用户/身份验证状态的最佳方法](https://stackoverflow.com/questions/12272881/best-way-to-enforce-user-authentication-state-in-ember-js-app)

*   [使用 ember.js 时处理用户身份验证](https://stackoverflow.com/questions/10812368/handling-user-authentication-when-using-ember-js)

框架与 Ember 集成没有太大区别，但 codeigniter 是一个例外。我建议使用更现代的解决方案，如 Laravel 4，这将使公开 JSON API 变得非常容易。您必须使用 Codeigniter 做一些变通方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-22T15:32:07.610

Idiorm 也适用于带有 CodeIgniter 的 PDO。参见，例如， [http ://sfthurber.github.io/cim-xa/](http://sfthurber.github.io/cim-xa/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-24T21:38:24.633

创建一个 RESTful CodeIgniter 安装...你可以在这里找到一个教程：[RESTful CodeIgniter 教程](http://net.tutsplus.com/tutorials/php/working-with-restful-services-in-codeigniter-2/)

此外，您可以将 PDO 与 CodeIgniter 一起使用：[Codeigniter with PDO](http://codebyjeff.com/blog/2013/03/codeigniter-with-pdo)

# highstock - highstock y轴比例因子

> ID：14641722
> 
> 赞同：0
> 
> 时间：2013-02-01T07:38:31.127
> 
> 标签：highstock

如何找到 yAxis[0] 的比例因子？我在 API 中找不到，但通过研究代码，它似乎在 chart.yAxis[xx].transA 中可用。但是，由于动态缩放，当我缩放/平移 xAxis 时，yAxis 的比例因子可能会发生变化，那么我应该将代码放在哪里使用当前的 yAxis 比例因子绘制一些东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:40:27.237

您可以使用 tickPositions 函数[http://api.highcharts.com/highstock#xAxis.tickPositions](http://api.highcharts.com/highstock#xAxis.tickPositions)

# vbscript - 脚本。如何制作多色文字

> ID：14641723
> 
> 赞同：4
> 
> 时间：2013-02-01T07:38:58.933
> 
> 标签：vbscript, console, jscript, wsh

我正在尝试使用 Cscript 将多色文本发送到控制台。

```
WScript.Echo('\033[31m' + 'Some Text' + '\033[0m'); 
```

此解决方案不起作用。有什么方法可以将多色文本发送到控制台？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:51:05.903

不支持更改文本颜色/前景。

您可以更改背景颜色。

```
 te.SetRGBEntry(9, 16711680); 
```

将其更改为浅蓝色。

# php - 如何使用作为 CGI 运行的 PHP 填充 $_SERVER['Remote_User'] 变量？

> ID：14641734
> 
> 赞同：0
> 
> 时间：2013-02-01T07:39:54.113
> 
> 标签：php, windows, cgi

我徒劳地试图让变量`$_SERVER['Remote_User']`来验证我的内部应用程序的用户。

有什么办法可以通过作为 CGI 运行的 PHP 来做到这一点？

我已经尝试了在谷歌搜索时发现的所有解决方法（在 .htaccess 中设置变量然后分解 b64 编码字符串的重写规则）。

还是有其他一些巧妙的方法来获取访问我网站的人的用户名？

这是我的 $_SERVER 数组的打印输出：

```
Array
(
[HTTP_HOST] => tnxp.telenor.net
[HTTP_USER_AGENT] => Mozilla/5.0 (Windows NT 6.1; rv:12.0) Gecko/20100101 Firefox/12.0
[HTTP_ACCEPT] => text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8
[HTTP_ACCEPT_LANGUAGE] => en-us,en;q=0.5
[HTTP_ACCEPT_ENCODING] => gzip, deflate
[HTTP_CONNECTION] => keep-alive
[HTTP_CACHE_CONTROL] => max-age=0
[PATH] => /sbin:/usr/sbin:/bin:/usr/bin
[SERVER_SIGNATURE] => 
Apache/2.2.15 (Red Hat) Server at tnxp.telenor.net Port 80

[SERVER_SOFTWARE] => Apache/2.2.15 (Red Hat)
[SERVER_NAME] => tnxp.telenor.net
[SERVER_ADDR] => 10.179.98.20
[SERVER_PORT] => 80
[REMOTE_ADDR] => 148.121.183.28
[DOCUMENT_ROOT] => /var/www/html
[SERVER_ADMIN] => root@localhost
[SCRIPT_FILENAME] => /var/www/html/ew/index.php
[REMOTE_PORT] => 50315
[GATEWAY_INTERFACE] => CGI/1.1
[SERVER_PROTOCOL] => HTTP/1.1
[REQUEST_METHOD] => GET
[QUERY_STRING] => 
[REQUEST_URI] => /ew/
[SCRIPT_NAME] => /ew/index.php
[PHP_SELF] => /ew/index.php
[PHP_AUTH_USER] => t820082
[PHP_AUTH_PW] => asdf
[REQUEST_TIME_FLOAT] => 1359703708.68
[REQUEST_TIME] => 1359703708
) 
```

理想情况下，我希望它包含 [REMOTE_USER] =>*客户用户名*

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:07:33.507

[$_SERVER](http://php.net/manual/en/reserved.variables.server.php)变量是你不应该设置的。它们在加载脚本时由服务器设置，并将在下次加载时重置。

改用[会话](http://www.php.net/manual/en/book.session.php)（如果需要，还有单独的类用于处理纯 CGI 中的会话 - 只需 google CGI 会话 - 那里有很多文档）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-29T13:34:19.327

也许是这样的？

```
$loginName = substr($loginName, 0, 2).strToLower(substr($loginName, 2));

$authorizedUserList = Array();

$authorizedUserList[] = "user1";

$authorizedUserList[] = "user2";

$authorizedUserList[] = "user3";

$authorizedUserList[] = "user4";
forEach($authorizedUserList as $authorizedUser){

    if(strToUpper($authorizedUser) == strToUpper($loginName)){

        $authCheckPass = true;

    }

} 
```

# javascript - 函数数组和奇怪的行为

> ID：14641737
> 
> 赞同：2
> 
> 时间：2013-02-01T07:40:14.010
> 
> 标签：javascript

我有以下代码：

```
var arr = [{Name: "foo", action: function(){ alert("foo")}},
       {Name: "bar", action: function(){ alert("bar")}}
      ]

var arr2 = {};

for(var i =0; i< arr.length; i++)
{
    var bla = arr[i];
    arr2[bla.Name] = function(){ bla.action() };
}          

arr2.foo();
arr2.bar(); 
```

提醒两次“酒吧”。相反，当我这样做时

```
 arr2[bla.Name] = bla.action; 
```

这样可行。

任何让它在第一种情况下工作的方法（我需要在我的函数中附加其他东西）

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T07:45:46.977

这是因为您`bla`的匿名函数内部是一个引用，并且它在循环内不断更新以指向下一个对象。当循环终止时，它们都将指向您在循环中引用的最后一个元素。

您可以通过执行类似的操作来修复它

```
arr2[bla.Name] = (function(x) { return function(){ x.action(); }})(bla); 
```

[小提琴](http://jsfiddle.net/mnbayazit/55caP/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-01T07:44:32.807

的值`bla`正在发生变化，您创建的函数将始终使用调用时的值。

您可以创建一个闭包来保护`bla`变量：

```
for(var i =0; i< arr.length; i++) {
    (function(bla){
        arr2[bla.Name] = function(){ bla.action() };
    })(arr[i]);
} 
```

如果您的`action`函数不需要任何上下文或参数，您还可以简化循环

```
for(var i =0; i< arr.length; i++) {
    var bla = arr[i];
    arr2[bla.Name] = bla.action;
} 
```

# android - 我的查询不正确

> ID：14641738
> 
> 赞同：2
> 
> 时间：2013-02-01T07:40:24.477
> 
> 标签：android, sqlite

我的应用程序与 sql lite 数据库一起使用我在 SQlite 开发人员中编写了查询并对其进行了测试，它工作正常，但是当我在 android 上编写它时，它只返回一个值而不是几个值。android查询有什么问题？

程序代码

```
SELECT DISTINCT
    m._id,
    m.name,
    m.the_best_time,
    m.the_worse_time,
    count(p._id) as qPoints
FROM sickness AS s
INNER JOIN list_of_sicknesses AS l
    ON s._id = l.sickness_id
INNER JOIN point AS p
    ON p.sickness_list = l.number
INNER JOIN meridian AS m
    ON m._id = p.meridian_id
WHERE s.sick = 'value'
GROUP BY
    m.name,
    m.the_best_time,
    m.the_worse_time,m._id 
```

安卓查询代码

```
 String query="select distinct m." +MeridianDB.ID+
            ",m."+MeridianDB.NAME+",m."+MeridianDB.BEST_TIME+
            ",m."+MeridianDB.WORSE_TIME+",count(p."+PointDB.ID+") as         qPoints from "+
            SicknessDB.TABLE_NAME+" as s inner join "+ListOFSicknessDB.TABLE_NAME+
            " as l on s."+SicknessDB.ID+" = l."+ListOFSicknessDB.SICKNESS_ID+
            " inner join "+PointDB.TABLE_NAME+" as p on p."+PointDB.SICKNESS_LIST+
            " = l."+ListOFSicknessDB.NUMBER+" inner join "+MeridianDB.TABLE_NAME+
            " as m on m."+MeridianDB.ID+" = p."+PointDB.MERIDIAN_ID+" where s."+
            SicknessDB.NAME+"=? group by m."+MeridianDB.ID+",m."+MeridianDB.NAME+
            ",m."+MeridianDB.BEST_TIME+",m."+MeridianDB.WORSE_TIME; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:50:39.040

尝试删除`DISTINCT`子句（因为您已经在使用`GROUP BY`）我不确定这部分是否存在问题，但`DISTINCT`同时`GROUP BY`在一个查询中使用和通常不是最佳做法

# facebook-graph-api - 使用有效访问令牌获取用户的所有公共数据的问题

> ID：14641739
> 
> 赞同：2
> 
> 时间：2013-02-01T07:40:31.220
> 
> 标签：facebook-graph-api, explorer, facebook-access-token

在获取具有有效访问令牌的用户的所有公共数据时，我面临同样的问题。使用具有相同权限的图形 API Explorer 进行调用时，获取所查询用户的所有可用公共数据。但是，在尝试使用具有完全相同权限生成的访问令牌的 Graph API 应用程序进行访问时，仅获得很少的基本字段，而与任何公开可用的数据无关。在调试时，似乎使用图形 API 资源管理器生成的访问令牌能够从 facebook 服务器获取更多数据，而使用 Oauth 生成的一般访问令牌则不能。使用此访问令牌，我可以获得用户生成的访问令牌的相关数据，但不能获得其他用户的公开可用信息。

# sockets - 如何获取临时端口号

> ID：14641746
> 
> 赞同：0
> 
> 时间：2013-02-01T07:41:03.240
> 
> 标签：sockets

在套接字编程中，我没有将套接字绑定到特定的端口号。

因此，在通过套接字发送数据时，会自动分配一个临时端口并发送数据。

那么有没有办法在打开连接或发送数据之前获取临时端口？

谢谢

斯里兰卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:42:59.900

> 那么有什么方法可以在打开连接或发送数据之前获取临时端口

通常不会，不会。当您尝试连接未绑定的套接字时，操作系统通常会选择一个本地端口。之后，您可以调用类似`getsockname`.

# android - 字节分配内存不足，异步任务 5

> ID：14641749
> 
> 赞同：2
> 
> 时间：2013-02-01T07:41:28.530
> 
> 标签：android, bitmap

我正在尝试从“url”加载图像，该文件夹是我的 SD 卡中包含大约 40 张图像的文件夹到我的阅读器中，但我不断收到内存不足错误。有没有办法解决它？可能是因为我试图一次加载 40 张图像，这就是它导致错误的原因吗？

下面是我的 logcat 输出

```
02-01 15:38:17.410: D/url(10695): /mnt/sdcard/Android/data/com.sfa.coverflow/Issues/20/1944628064
02-01 15:38:17.440: D/dalvikvm(10695): GC_FOR_ALLOC freed 7144K, 32% free 16978K/24711K, paused 23ms
02-01 15:38:17.440: I/dalvikvm-heap(10695): Forcing collection of SoftReferences for 33033616-byte allocation
02-01 15:38:17.460: D/dalvikvm(10695): GC_BEFORE_OOM freed 9K, 32% free 16969K/24711K, paused 25ms
02-01 15:38:17.460: E/dalvikvm-heap(10695): Out of memory on a 33033616-byte allocation.
02-01 15:38:17.460: I/dalvikvm(10695): "AsyncTask #5" prio=5 tid=17 RUNNABLE
02-01 15:38:17.460: I/dalvikvm(10695):   | group="main" sCount=0 dsCount=0 obj=0x411358f0 self=0x468d20
02-01 15:38:17.460: I/dalvikvm(10695):   | sysTid=10718 nice=10 sched=0/0 cgrp=bg_non_interactive handle=3779488
02-01 15:38:17.460: I/dalvikvm(10695):   | schedstat=( 48743000 7345000 28 ) utm=4 stm=0 core=1
02-01 15:38:17.460: I/dalvikvm(10695):   at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
02-01 15:38:17.460: I/dalvikvm(10695):   at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:493)
02-01 15:38:17.460: I/dalvikvm(10695):   at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:299)
02-01 15:38:17.460: I/dalvikvm(10695):   at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:324)
02-01 15:38:17.460: I/dalvikvm(10695):   at com.sfa.touchview.UrlTouchImageView$ImageLoadTask.doInBackground(UrlTouchImageView.java:108)
02-01 15:38:17.460: I/dalvikvm(10695):   at com.sfa.touchview.UrlTouchImageView$ImageLoadTask.doInBackground(UrlTouchImageView.java:1)
02-01 15:38:17.460: I/dalvikvm(10695):   at android.os.AsyncTask$2.call(AsyncTask.java:264)
02-01 15:38:17.460: I/dalvikvm(10695):   at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
02-01 15:38:17.460: I/dalvikvm(10695):   at java.util.concurrent.FutureTask.run(FutureTask.java:137)
02-01 15:38:17.460: I/dalvikvm(10695):   at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
02-01 15:38:17.460: I/dalvikvm(10695):   at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
02-01 15:38:17.460: I/dalvikvm(10695):   at java.lang.Thread.run(Thread.java:856)
02-01 15:38:17.460: D/skia(10695): --- decoder->decode returned false
02-01 15:38:17.470: W/dalvikvm(10695): threadid=17: thread exiting with uncaught exception (group=0x40a4f1f8)
02-01 15:38:17.470: E/AndroidRuntime(10695): FATAL EXCEPTION: AsyncTask #5
02-01 15:38:17.470: E/AndroidRuntime(10695): java.lang.RuntimeException: An error occured while executing doInBackground()
02-01 15:38:17.470: E/AndroidRuntime(10695):    at android.os.AsyncTask$3.done(AsyncTask.java:278)
02-01 15:38:17.470: E/AndroidRuntime(10695):    at java.util.concurrent.FutureTask$Sync.innerSetException(FutureTask.java:273)
02-01 15:38:17.470: E/AndroidRuntime(10695):    at java.util.concurrent.FutureTask.setException(FutureTask.java:124)
02-01 15:38:17.470: E/AndroidRuntime(10695):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:307)
02-01 15:38:17.470: E/AndroidRuntime(10695):    at java.util.concurrent.FutureTask.run(FutureTask.java:137)
02-01 15:38:17.470: E/AndroidRuntime(10695):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
02-01 15:38:17.470: E/AndroidRuntime(10695):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
02-01 15:38:17.470: E/AndroidRuntime(10695):    at java.lang.Thread.run(Thread.java:856)
02-01 15:38:17.470: E/AndroidRuntime(10695): Caused by: java.lang.OutOfMemoryError
02-01 15:38:17.470: E/AndroidRuntime(10695):    at android.graphics.BitmapFactory.nativeDecodeStream(Native Method)
02-01 15:38:17.470: E/AndroidRuntime(10695):    at android.graphics.BitmapFactory.decodeStream(BitmapFactory.java:493)
02-01 15:38:17.470: E/AndroidRuntime(10695):    at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:299)
02-01 15:38:17.470: E/AndroidRuntime(10695):    at android.graphics.BitmapFactory.decodeFile(BitmapFactory.java:324)
02-01 15:38:17.470: E/AndroidRuntime(10695):    at com.sfa.touchview.UrlTouchImageView$ImageLoadTask.doInBackground(UrlTouchImageView.java:108)
02-01 15:38:17.470: E/AndroidRuntime(10695):    at com.sfa.touchview.UrlTouchImageView$ImageLoadTask.doInBackground(UrlTouchImageView.java:1)
02-01 15:38:17.470: E/AndroidRuntime(10695):    at android.os.AsyncTask$2.call(AsyncTask.java:264)
02-01 15:38:17.470: E/AndroidRuntime(10695):    at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
02-01 15:38:17.470: E/AndroidRuntime(10695):    ... 4 more 
```

这是发生错误的地方

```
public class ImageLoadTask extends AsyncTask<String, Integer, Bitmap>
    {
        //RETRIEVES LINK FROM GALLERYACTIVITY
        //READ MNT/SDCARD/....

        @Override
        protected Bitmap doInBackground(String... strings) {
            bm = null;
            String url = strings[0];
            Log.d("url",url);

            bm = BitmapFactory.decodeFile(url);
            return bm;

        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:50:48.577

使用下面的代码来调整您的位图大小。

例如，如果您在 300 * 300 的视图中加载分辨率为 1200 *800 的图像

你可以使用`decodeSampledBitmapFromResource(getResource(),R.drawable.mImage,300,300)` 来降低内存使用率。

```
/**
     * 
     * get a resized bitmap
     * @param bm
     * @param newHeight
     * @param newWidth
     * @return
     */
    public static Bitmap getResizedBitmap(Bitmap bm, int newHeight, int newWidth) {
        int width = bm.getWidth();
        int height = bm.getHeight();
        float scaleWidth = ((float) newWidth) / width;
        float scaleHeight = ((float) newHeight) / height;
        // create a matrix for the manipulation
        Matrix matrix = new Matrix();
        // resize the bitmap
        matrix.postScale(scaleWidth, scaleHeight);
        // "recreate" the new bitmap
        Bitmap resizedBitmap = Bitmap.createBitmap(bm, 0, 0, width, height,
                matrix, false);
        return resizedBitmap;
    }

    /**
     * Decode a bitmap for avoiding out of memory issue
     * @param res
     * @param resId
     * @param reqWidth
     * @param reqHeight
     * @return
     */
    public static Bitmap decodeSampledBitmapFromResource(Resources res,
            int resId, int reqWidth, int reqHeight) {

        // First decode with inJustDecodeBounds=true to check dimensions
        final BitmapFactory.Options options = new BitmapFactory.Options();
        options.inJustDecodeBounds = true;
        BitmapFactory.decodeResource(res, resId, options);

        // Calculate inSampleSize
        options.inSampleSize = calculateInSampleSize(options, reqWidth,
                reqHeight);
        // Decode bitmap with inSampleSize set
        options.inJustDecodeBounds = false;
        return BitmapFactory.decodeResource(res, resId, options);

    }

    public static int calculateInSampleSize(BitmapFactory.Options options,
            int reqWidth, int reqHeight) {
        // Raw height and width of image
        final int height = options.outHeight;
        final int width = options.outWidth;
        int inSampleSize = 1;

        if (height > reqHeight || width > reqWidth) {

            // Calculate ratios of height and width to requested height and
            // width
            final int heightRatio = Math.round((float) height
                    / (float) reqHeight);
            final int widthRatio = Math.round((float) width / (float) reqWidth);

            // Choose the smallest ratio as inSampleSize value, this will
            // guarantee
            // a final image with both dimensions larger than or equal to the
            // requested height and width.
            inSampleSize = heightRatio < widthRatio ? heightRatio : widthRatio;
        }

        return inSampleSize;
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:53:49.993

你应该[这篇](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)关于加载位图的文章来避免这种情况。观看来自 Android 开发人员的[视频](https://plus.google.com/u/0/108967384991768947849/posts/CgAfnw3JTQe)也会很有用。

# python - 正则表达式匹配逗号分隔的 key=value 列表，其中 value 可以包含逗号

> ID：14641750
> 
> 赞同：10
> 
> 时间：2013-02-01T07:41:36.830
> 
> 标签：python, regex, parsing, python-2.6

我有一个天真的“解析器”，它只是做类似的事情：
`[x.split('=') for x in mystring.split(',')]`

但是 mystring 可以是
`'foo=bar,breakfast=spam,eggs'`

显然，
天真的分离器不会这样做。为此，我仅限于**Python 2.6 标准库**，因此不能使用
例如[pyparsing 。](http://pyparsing.wikispaces.com/)

预期输出为
`[('foo', 'bar'), ('breakfast', 'spam,eggs')]`

我正在尝试使用正则表达式执行此操作，但面临以下问题：

我的第一次尝试
`r'([a-z_]+)=(.+),?'`
给了我
`[('foo', 'bar,breakfast=spam,eggs')]`

显然，
做`.+`非贪心并不能解决问题。

所以，
我猜我必须以某种方式`$`强制最后一个逗号（或）。
这样做并没有真正起作用，
`r'([a-z_]+)=(.+?)(?:,|$)'`
因为在包含一个的值中逗号后面的东西被省略了，
例如`[('foo', 'bar'), ('breakfast', 'spam')]`

我想我必须使用某种后视（？）操作。
**问题**
1.我使用**哪一个**？或
2.我该**怎么**做/这个？

**编辑**：

根据下面[daramarak](https://stackoverflow.com/users/86638/daramarak)的回答，
我最终做了与[abarnert](https://stackoverflow.com/users/908494/abarnert)后来以稍微冗长的形式[提出的几乎相同的事情；](https://stackoverflow.com/a/14642123/180174)

```
vals = [x.rsplit(',', 1) for x in (data.split('='))]
ret = list()
while vals:
    value = vals.pop()[0]
    key = vals[-1].pop()
    ret.append((key, value))
    if len(vals[-1]) == 0:
        break 
```

**编辑2：**

只是为了满足我的好奇心，这真的可以用*纯正*则表达式吗？即这样`re.findall()`会返回一个 2 元组列表？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-02-01T10:55:26.337

仅出于比较目的，这是一个似乎也可以解决问题的正则表达式：

```
([^=]+)    # key
=          # equals is how we tokenise the original string
([^=]+)    # value
(?:,|$)    # value terminator, either comma or end of string 
```

这里的技巧是限制您在第二组中捕获的内容。`.+`吞下`=`符号，这是我们可以用来区分键和值的字符。完整的正则表达式不依赖于任何回溯（因此它应该与[re2](http://code.google.com/p/re2/)之类的东西兼容，如果需要的话）并且可以在 abarnert 的示例上工作。

用法如下：

```
re.findall(r'([^=]+)=([^=]+)(?:,|$)', 'foo=bar,breakfast=spam,eggs,blt=bacon,lettuce,tomato,spam=spam') 
```

返回：

```
[('foo', 'bar'), ('breakfast', 'spam,eggs'), ('blt', 'bacon,lettuce,tomato'), ('spam', 'spam')] 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-02-01T08:14:01.253

daramarak 的回答要么非常有效，要么按原样工作；从样本输出的格式和对步骤的模糊描述很难看出。但是，如果它是几乎可以工作的版本，则很容易修复。

将其放入代码中：

```
>>> bits=[x.rsplit(',', 1) for x in s.split('=')]
>>> kv = [(bits[i][-1], bits[i+1][0]) for i in range(len(bits)-1)] 
```

第一行是（我相信）daramarak 的回答。就其本身而言，第一行为您提供了对`(value_i, key_i+1)`而不是`(key_i, value_i)`. 第二行是最明显的解决方法。通过更多的中间步骤和一些输出，看看它是如何工作的：

```
>>> s = 'foo=bar,breakfast=spam,eggs,blt=bacon,lettuce,tomato,spam=spam'
>>> bits0 = s.split('=')
>>> bits0
['foo', 'bar,breakfast', 'spam,eggs,blt', 'bacon,lettuce,tomato,spam', 'spam']
>>> bits = [x.rsplit(',', 1) for x in bits0]
>>> bits
[('foo'), ('bar', 'breakfast'), ('spam,eggs', 'blt'), ('bacon,lettuce,tomato', 'spam'), ('spam')]
>>> kv = [(bits[i][-1], bits[i+1][0]) for i in range(len(bits)-1)]
>>> kv
[('foo', 'bar'), ('breakfast', 'spam,eggs'), ('blt', 'bacon,lettuce,tomato'), ('spam', 'spam')] 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T07:53:06.140

我能否建议您像以前一样使用拆分操作。但首先在等号处拆分，然后在最右边的逗号处拆分，以生成一个左右字符串列表。

```
input =
"bob=whatever,king=kong,banana=herb,good,yellow,thorn=hurts" 
```

一开始会分裂成

```
first_split = input.split("=")
#first_split = ['bob' 'whatever,king' 'kong,banana' 'herb,good,yellow,thorn' 'hurts'] 
```

然后在最右边的逗号处拆分给你：

```
second_split = [single_word for sublist in first_split for item in sublist.rsplit(",",1)]
#second_split = ['bob' 'whatever' 'king' 'kong' 'banana' 'herb,good,yellow' 'thorn' 'hurts'] 
```

然后你只需像这样收集对：

```
pairs = dict(zip(second_split[::2],second_split[1::2])) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T08:12:18.057

你可以试试这个，它对我有用：

```
mystring = "foo=bar,breakfast=spam,eggs,e=a"
n = []
i = 0

for x in mystring.split(','):
    if '=' not in x:
        n[i-1] = "{0},{1}".format(n[i-1], x)
    else:
        n.append(x)
        i += 1
print n 
```

你会得到如下结果：

```
 ['foo=bar', 'breakfast=spam,eggs', 'e=a'] 
```

然后你可以简单地浏览列表并做你想做的事。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-01T13:23:50.167

假设键的名称从不包含，您可以在下一个不包含and的序列时`,`拆分。`,``,``=``=`

```
re.split(r',(?=[^,=]+=)', inputString) 
```

（这和我原来的解决方案一样。我希望`re.split`被使用，而不是`re.findall`or `str.split`）。

完整的解决方案可以单行完成：

```
[re.findall('(.*?)=(.*)', token)[0] for token in re.split(r',(?=[^,=]+=)', inputString)] 
```

# latex - 如何在 LaTeX 中制作图形，其中节点例如在图像中

> ID：14641752
> 
> 赞同：2
> 
> 时间：2013-02-01T07:41:47.907
> 
> 标签：latex, tex, tabular, xypic

我想用图像中的节点创建图形：

[![](../Images/bbacb74b27cc64a8156809efc01a1a33.png)](https://i.stack.imgur.com/FLs7D.jpg)

我用 - 写了一个示例图，`\xymatrix`没关系。我用 加了圈`&*+[Fo]`，也没关系。我在第一个圆圈内添加了表格`\begin{tabular}`- 没关系。但是桌子需要旋转-45度。当我使用`isorot`包装旋转它时，首先 - 它不是针对中心旋转，而是针对角落旋转，更可悲的是，`xymatrix`然后无法确定圆的大小，并且它会缩小。

在下一个示例中如何旋转表格？

```
$$\xymatrix{&*+[Fo]{
\begin{tabular}{c|c}
2&3\\
\hline
4&5
\end{tabular}
}\ar@{-}[r]\ar@{-}[dd]\ar@{-}[rrd]&*+[Fo]{3}\ar@{-}[lld]\ar@{-}[ldd]\ar@{-}[dd]\ar@{-}[rdd]\ar@{-}[rd]& \\ *+[Fo]{1}\ar@{-}[rrr] &&&*+[Fo]{4}\ar@{-}[ld] \\ &*+[Fo]{7}&*+[Fo]{6}\ar@{-}[l]&*+[Fo]{5}& }$$ 
```

# ruby-on-rails - 使用 Postgres，计算关联计数

> ID：14641756
> 
> 赞同：3
> 
> 时间：2013-02-01T07:42:15.003
> 
> 标签：ruby-on-rails, ruby-on-rails-3, postgresql, rails-activerecord

我有 2 个模型

```
class Foo < ActiveRecord::Base
  # columns are
  # max_spots

  has_many :bars
end

class Bar < ActiveRecord::Base
  # columns are
  # a_id

  belongs_to :foo
end 
```

我需要获取 max_spots 大于与其关联的条数的所有 Foos，但我需要通过活动记录而不是通过每个 Foos 来完成

```
class Foo
  #bad
  def self.bad_with_spots_left
    all.select do |foo|
      foo.max_spots - foo.bars.count > 0
    end 
  end

  #good but not working
  def self.good_with_spots_left
    joins(:bars).select('COUNT(bars.id) AS bars_count').where('max_spots - bars_count > 0')
  end
end 
```

我知道我可以在 foo 中添加一个计数器缓存，但只是想知道没有它我怎么能做到这一点。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:52:19.683

SQL 不允许在 WHERE 子句中使用别名，而只能使用列名。

作为替代方案，您可以尝试其中一个：

在纯 SQL 中

```
def self.good_with_spots_left
  where('foos.max_spots > (SELECT Count(*) FROM bars WHERE bars.a_id = foos.id)')
end 
```

或者，用一点或红宝石（第二个`select`在红宝石中解释，因为它包含一个&块）

```
def self.good_with_spots_left
  joins(:bars).select('foos.*', COUNT(bars.id) AS bars_count').group('bars.a_id').select{|foo| foo.max_spots > foo.bars_count}
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-23T20:34:51.540

当前接受的答案中的第一个解决方案效率低下，因为对表中的每一行都执行了相关的子查询`foos`。对于这种情况，使用联接是一种更好的方法。

当前接受的答案中的第二个解决方案在`foos`没有任何`bars`.

*例如：没有任何订单的新产品。*

您必须使用 LEFT 外连接来解决此问题。除此之外，可以使用`having`子句进行计数比较。这样整个操作都在数据库中处理。

```
def self.good_with_spots_left
  joins("LEFT OUTER JOIN bars bars ON bars.foo_id = foos.id").
  group('bars.foo_id').
  having("foos.max_spots > COUNT(COALESCE(bars.foo_id, 0))")
end 
```

**笔记：**

该`COALESCE`命令返回第一个非空输入。此命令与 SQL92 兼容，因此可以跨数据库工作。

*我们为什么要使用`COALESCE`？*

没有匹配a时的`LEFT OUTER JOIN`返回`NULL`值。SQL操作不喜欢集合中的值，因此我们将值转换为.`bars.foo_id``bars``foo``COUNT``NULL``NULL``0`

# performance - 如何在仅活动选项卡上加载树

> ID：14641757
> 
> 赞同：1
> 
> 时间：2013-02-01T07:42:16.190
> 
> 标签：performance, tabs, tree, extjs4.1, autoload

我有两个选项卡，两个选项卡都有树。由于树需要时间来加载，我只是尝试在活动选项卡面板（tab1）上加载树，但即使在我的 tab2 的树存储上使用 autoload: false ，我的第二个面板的树存储也会被加载，这正在制作选项卡面板加载缓慢。所以我想我的问题是如何优化加载标签的速度。我只是想加快加载时间。而且当我加载两个选项卡的商店时，我得到两个分层的“加载掩码”，这很明显，因为它正在为 tab1 和 tab2 加载掩码。有没有不同的方法不仅仅是做

```
autoLoad: false 
```

在 tab2 的树商店？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T14:44:59.653

你在 Extjs 中遇到了我几乎认为的问题。autoload: false 不起作用的原因是，当您实际上没有在商店中定义“根”属性时，商店会创建一个默认根节点，该节点具有导致其加载的默认属性（我猜您可能有 displayRootNode在树上也设置为假？）。解决此问题的方法是将 autoLoad 属性设置为 false 并像这样定义树中的根节点：

```
root: {
    id:       "0",
    expanded: true,
    loaded:   true
} 
```

# ruby-on-rails - 删除用户帐户后如何重置omniauth-google-oauth2 access_token

> ID：14641759
> 
> 赞同：3
> 
> 时间：2013-02-01T07:42:16.467
> 
> 标签：ruby-on-rails, omniauth

我们有这个 ROR 应用程序，它使用`omniauth-google-oauth2`with`devise`来登录用户。我们遇到了一个问题，如果在用户已经从他的 google 帐户授予对应用程序的访问权限后，用户的帐户已从系统中删除，则身份验证只会进入无休止的身份验证循环。

场景是这样的：

1.  用户通过 google 进行身份验证并授予应用程序访问权限
2.  在回调中，我们的应用程序确定用户帐户是否有效 - 已删除或未创建（我们的系统不支持自助注册
3.  用户未经授权（且未登录），这是正确的）
4.  如果用户再次尝试通过 Google 登录以尝试其他帐户，Google 会透明地授权并将用户重定向回我们的应用程序，而不会给用户更改帐户的机会。

用户实际上可以通过先退出来退出此循环。但这对普通用户来说并不是很明显，因此不是理想的解决方案。

理想情况下，解决方案是在回调阶段使 access_token 无效或撤销应用程序授权，以便当用户再次尝试登录时，他们可以切换帐户。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T16:22:29.203

可以覆盖 sign_in url 中的approval_prompt，因此您可以将其设置为“强制”，从而使用户脱离catch-22，即使google_oauth2 设计配置已将其设置为“自动”（默认）。

诀窍是在 OmniauthCallbacksController 中传达这是所需要的。一种简单且不显眼的方法是简单地设置一个临时 cookie：

```
class Users::OmniauthCallbacksController < Devise::OmniauthCallbacksController
  def google_oauth2
    if user = User.find_for_google_oauth2(request.env["omniauth.auth"])
      cookies.delete :google_oauth2_approval_prompt
      flash[:notice] = I18n.t( "devise.omniauth_callbacks.success", kind: "Google")
      sign_in_and_redirect user, event: :authentication
    else 
      # we are not supporting self-service registration, so although
      # user has authenticated at Google and given consent to the app,
      # we are not going to allow the user in
      cookies[:google_oauth2_approval_prompt] = "force"
      flash[:error] = I18n.t( "devise.omniauth_callbacks.failure", kind: "Google", reason: "account not provisioned")
      redirect_to root_url
    end
  end
end 
```

然后在呈现谷歌登录的视图中，有条件地附加approval_prompt：

```
:ruby
  extra_params = if approval_prompt = cookies[:google_oauth2_approval_prompt]
    {approval_prompt: approval_prompt}
  else
    {}
  end

= link_to "Sign-in with Google", 
  user_omniauth_authorize_path(:google_oauth2,extra_params) 
```

因此，如果用户首先尝试使用应用程序决定不接受的 Google 帐户，则用户将有机会在尝试再次登录时切换帐户（因为它们将通过强制批准工作流程）。

# python - 在拖动期间更改鼠标指针

> ID：14641761
> 
> 赞同：3
> 
> 时间：2013-02-01T07:42:27.293
> 
> 标签：python, pyqt4, mouse-cursor

如何在 PyQt4 中拖动期间更改鼠标指针/光标（我希望在我的小部件左侧有一个鼠标指针，在右侧有另一个指针）：

```
from PyQt4 import QtGui, QtCore
class Button(QtGui.QPushButton):

    def mousePressEvent(self, event):
        mimedata = QtCore.QMimeData()
        self.drag = QtGui.QDrag(self)
        self.drag.setMimeData(mimedata)
        self.drag.start(QtCore.Qt.CopyAction)

class Example(QtGui.QWidget):

    def __init__(self):
        super(Example, self).__init__()
        self.setAcceptDrops(True)
        self.button = Button("Drag me", self)
        self.setGeometry(300, 300, 300, 150)

    def dragEnterEvent(self, e):
        e.accept()

    def dragMoveEvent(self, e):
        pm = QtGui.QPixmap(32,32)

        if e.pos().x()<150:
            pm.fill(QtCore.Qt.blue)    
            self.button.drag.setDragCursor(pm,QtCore.Qt.CopyAction) #Not working
        else:
            pm.fill(QtCore.Qt.red)    
            self.button.drag.setDragCursor(pm,QtCore.Qt.MoveAction) #Not working

app = QtGui.QApplication([])
ex = Example()
ex.show()
app.exec_() 
```

但是，此代码不会更改鼠标光标。

提前致谢

# php - 目录中的文件名列表，包括文件夹和子文件夹

> ID：14641762
> 
> 赞同：1
> 
> 时间：2013-02-01T07:42:30.013
> 
> 标签：php

我想列出目录中的所有文件`wallpaper/`。此目录中有 1000 多个文件夹，主要是名人姓名，如安吉丽娜·朱莉等，在该文件夹中，该名人有几张图片。

我想列出所有具有总路径的文件，例如`http://xyz.com/wallpaper/angelina joulie/angeli1243.jpg`

我试过`scandir()` `readdir()` `glob()`了，但所有列表都只列出当前目录。

请告诉如何列出所有文件的完整路径，包括给定目录的子目录

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:01:28.390

你需要一个递归函数。这是一个经过测试并正常工作的示例函数。

```
function recursiveReaddir($folderPath = '.')
{
    $ignore = array('cgi-bin', '.', '..');
    $handle = @opendir($folderPath);
    while (false !== ($file = readdir($handle))) {

        if (!in_array($file, $ignore)) {
            if (is_dir("$folderPath/$file")) {
                $return[$file] = recursiveReaddir("$folderPath/$file");
            } else {
                $return [] = $file;
            }
        }
    }

    closedir($handle);
    return $return;
}
$rez = recursiveReaddir('path/to/file');
print_r($rez); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-02T15:31:24.053

如果您只需要进入两个级别，则使用起来会容易得多`glob()`：

```
glob("wallpaper/*/*") 
```

将遍历下面的所有直接目录`wallpaper/`。

# php - opencart一页结帐错误

ID：14641765

赞同：0

时间：2013-02-01T07:42:38.713

标签：php, jquery, ajax, shopping-cart, opencart

# bash - bash 中数字的表示和 bash 中十六进制数字的 printf

> ID：14641766
> 
> 赞同：3
> 
> 时间：2013-02-01T07:42:50.540
> 
> 标签：bash, double, printf, hex

我想了解数字（双精度）如何在 bash 中表示，以及当我在 bash 中以十六进制格式打印数字时会发生什么。

根据 IEEE 754 标准，double 应由 64 位表示：52 位（13 个十六进制数）表示有效数，11 位表示指数，1 位表示符号。

为了检查它，我编写了一个简单的 C 程序，将十六进制转换为十进制（使用 printf）。

```
include <stdio.h>
int main(int argc, char **argv)
{
printf("hex read = %40.24a\n", 0x1.000010C6F7A0B5E1Fp+0);
} 
```

用 gcc 4.2.1 编译，我得到

```
hex read =          0x1.000010c6f7a0b00000000000p+0 
```

从这个结果我得出结论，正如我所期望的那样，有效位由 13 个十六进制数字 000010c6f7a0b 定义。

现在我转向 bash 并使用以下脚本：

```
#!/bin/bash
echo "hex read = 0x"$1
printf "hex       =%80.70a\n" "0x"$1
printf "hex -> dec=%80.70f\n" `echo "0x"$1` 
```

**GNU 重击 3.2.48**

```
$ bash hex2dec 1.000010C6F7A0B5E1F
hex read = 0x1.000010C6F7A0B5E1F
hex       =   0x1.000010c6f7a0b000000000000000000000000000000000000000000000000000000000p+0
hex -> dec=        1.0000009999999999177333620536956004798412322998046875000000000000000000 
```

所以一切都按我的预期工作：13 个十六进制数字定义了数字的有效位。

**GNU 重击 4.1.5**

```
$ bash hex2dec 1.000010C6F7A0B5E1F
hex read = 0x1.000010C6F7A0B5E1F
hex       =   0x8.00008637bd05af10000000000000000000000000000000000000000000000000000000p-3
hex -> dec=        1.0000009999999999993737856418540843606024282053112983703613281250000000 
```

这不是我所期望的！

**问题 1**为什么在 GNU bash 4.1.5 中双精度数由 16 个十六进制数字表示（而不是根据 IEEE 754 的 13 个）？

**问题 2**为什么 printf "%a" 在不同的 bash 版本中以不同的格式表示十六进制数（**bash** 3.2.48 0x1.hh...hp+d 和**bash 4.1.5** 0xh.hh...hp+d?） . printf 不应该在两个 bash 版本中遵循相同的标准并由[http://pubs.opengroup.org/onlinepubs/009695399/functions/fprintf.html](http://pubs.opengroup.org/onlinepubs/009695399/functions/fprintf.html)重新定义吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-26T06:32:11.610

**回答1**目前bash在x86上的[printf](http://git.savannah.gnu.org/cgit/bash.git/tree/builtins/printf.def)`long double`使用符合IEEE 754的输入/输出转换（参见[Extended and extendable precision formats](http://en.wikipedia.org/wiki/IEEE_754#Extended_and_extendable_precision_formats)，[x86 Extended Precision Format](http://en.wikipedia.org/wiki/Extended_precision#x86_Extended_Precision_Format)和bash的printf对[floatmax_t](http://git.savannah.gnu.org/cgit/bash.git/tree/builtins/printf.def#n200)的定义），类似于程序

```
#include <stdio.h>
#include <stdlib.h>
int main(int argc, char **argv)
{
    printf("%La\n", strtold("0x1.000010C6F7A0B5E1F", NULL));
} 
```

*   它的输出是`0x8.00008637bd05af1p-3`.

**答案 2** Bash 最终使用 C 库的`printf`; 上面的 C 程序的输出确实遵循您所指的标准：

> 在小数点字符之前有一个十六进制数字（如果参数是规范化的浮点数，则该数字应为**非零，****否则未指定）**

# android - 如何从摩托罗拉 RAZR 检索本机通讯录（即人应用程序）的 Facebook 联系人

> ID：14641769
> 
> 赞同：3
> 
> 时间：2013-02-01T07:42:58.730
> 
> 标签：android, motorola

我可以使用以下代码从 Motorola Razr 4.0.4 设备获取正常联系人。

```
private Cursor getContacts()
{
    // Run query
    Uri uri = ContactsContract.Contacts.CONTENT_URI;
    String[] projection = new String[] {
            ContactsContract.Contacts._ID,
            ContactsContract.Contacts.DISPLAY_NAME
    };
    String selection = ContactsContract.Contacts.IN_VISIBLE_GROUP + " = '" +
            (mShowInvisible ? "0" : "1") + "'";
    String[] selectionArgs = null;
    String sortOrder = ContactsContract.Contacts.DISPLAY_NAME + " COLLATE LOCALIZED ASC";

    return managedQuery(uri, projection, selection, selectionArgs, sortOrder);
} 
```

但我无法获取有号码的 facebook 联系人，以便我可以将其显示给用户。

我在 stackoverflow 中搜索过，发现 facebook 联系人是受限的。

我的问题是在摩托罗拉 razr 4.0.4 中获取 facebook 联系人或其他组联系人的解决方法。

# php - 文件获取内容

> ID：14641775
> 
> 赞同：3
> 
> 时间：2013-02-01T07:43:27.390
> 
> 标签：php, html, loops

我想使用 php 函数在屏幕中列出 10.000 个页面`file_get_contents`来获取数据库的信息。

这一直有效到大约第 500 页，然后脚本停止运行（页面已加载）并且没有显示错误。

```
<?php

for ($nr=1; $nr<=10000; $nr++){

$url = "http://site.com/u$nr";
$string = file_get_contents($url);

echo '<textarea>'.$string.'</textarea>';

}

?> 
```

@编辑

我想为我的计算机获取这些信息，以便通过 Javascript 进行操作，我认为这为使用 PHP 操作 HTML 提供了很多工作。在 db 中记录这些页面是个好主意。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:55:51.297

我建议在循环*内*设置你的 time_limit 。设置时间限制将“延长”超时给定的时间；

```
<?php 
for ($nr=1; $nr<=10000; $nr++){
    $url = "http://site.com/u$nr";
    $string = file_get_contents($url);
    echo '<textarea>'.$string.'</textarea>';

    // extend the time-limit with this amount of time,
    // the amount of time this request is allowed to take
    set_time_limit(5);
}

?> 
```

这样您就不必计算 10.000 条记录的“总”时间限制，并且不允许*单个*请求花费（例如）1 小时才能完成

**[更新]** OP 发布的新信息表明他希望使用 javascript 处理输入。因此，更好的解决方案是使用 jQuery 一次获取所有页面 1，处理信息并将结果提交到数据库，使用 Ajax 发布和服务器端将其保存到数据库

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T07:47:04.640

检查您的错误日志。您的脚本可能已超时（默认值为 30 秒）。[尝试使用http://php.net/manual/en/function.set-time-limit.php](http://php.net/manual/en/function.set-time-limit.php)设置更大的超时

`set_time_limit(120); // Script may run for 120 seconds before timing out`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T07:46:13.843

您的 PHP 脚本超时。默认最大执行时间为 30 秒。使用此功能

[设置时间限制](http://php.net/set_time_limit)

顺便说一句，加载 10,000 个页面将需要相当多的时间（时间 + 带宽 + 资源），并且可能会使事情陷入困境

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T07:49:30.623

您可能会用完内存/执行时间。

您需要检查`phpinfo()`并检查适当的设置（如果您打算使用您的服务器进行此类操作，则应该`memory_limit`高于`256M`，也应该超过 30 分钟）。`max_execution_time`

另外，请确保记录错误并显示它们（在开发环境中）（`display_errors = 1`, `error_reporting(E_ALL)`, `log_errors = 1`）。

抓取 10000 个页面是一个消耗资源的过程，您可能需要考虑在数据库中存储一些信息。

编辑：正如我之前的人所说，`set_time_limit()`是 'per script' 选项，`max_execution_time`如果您不想永久更改服务器执行时间，请使用它。

# maven - 控制多模块 Maven 项目中的日志记录的最佳实践

> ID：14641778
> 
> 赞同：-1
> 
> 时间：2013-02-01T07:43:31.727
> 
> 标签：maven, logging, log4j

我有个问题。有一个包含 10 个模块的大型 Maven 项目。

问题是我无法控制日志记录。当项目通过 Maven 阶段（清理->安装->测试->测试...）时，它会产生大量日志。这些日志记录设置来自多个依赖项和日志记录实现：commons-logging、log4j、logback 等

我想避免在每个模块中保留一个日志配置实例。

我想使用单个文件来控制它。我怎样才能做到这一点？我在哪里可以读到它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T11:26:49.320

只需为其创建一个单独的模块（app-logging）并将其作为依赖项添加到其他模块。

# javascript - 滚动按钮在 jQuery 中不起作用

> ID：14641779
> 
> 赞同：1
> 
> 时间：2013-02-01T07:43:32.493
> 
> 标签：javascript, jquery, html5-canvas

我正在开发这样的时间线应用[程序](http://timeline.verite.co/)。

为此，我创建了两个按钮来左右滚动。我用 jQuery 编写了这段代码，但它不起作用。

这是我的代码：

```
<script>
        var ctx=document.getElementById('myCanvas').getContext('2d');       
        var years=1,hline =5;

    ctx.strokeStyle = "#7A7A52";    
    ctx.lineWidth = 1;

//Scale
ctx.fillStyle="white";
ctx.fillRect(0,150,1350,50);
var startYr=1890;
    do{
        ctx.beginPath();
        ctx.moveTo(hline,150);
        ctx.lineTo(hline,173);
        ctx.stroke();
            ctx.font = "12px Arial";
            ctx.fillStyle="#7A7A52";    
            ctx.fillText (startYr, hline-15, 190);  

        for (var i=0;i<10;i++)
        {
            ctx.moveTo(hline,150);
            ctx.lineTo(hline,160);
            ctx.stroke();
            hline = hline + 6;
        }
        years = years+10;
        startYr = startYr +10;
 }while(years<=1000);
//ScaleEnd
var i=0;
 $(".right").click(function(){
  $("#myCanvas").scrollLeft(i+=100);    
  });
 $(".left").click(function(){
  $("#myCanvas").scrollLeft(i-=100);    
  }); 
```

我的CSS代码是：

```
#myCanvas
    {
        background-color: #C2C2BB;
        margin-left: 180px;
        overflow: hidden;
    } 
```

但是 .right 和 .left 按钮不滚动。请告诉我我做错了什么！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T13:45:52.193

首先查看您的 javascript 控制台是否有错误。如果没有任何错误，那就没关系。其次，您可以将您的代码发布到网络上的某个位置，以便我们对其进行测试。这将有助于我们回答您的问题。第三，我看到你已经发布了一个javascript代码，但是你没有用`</script>`标签关闭它。最重要的部分：在我看来你做错了，你不应该在画布元素上回显你的所有应用程序，尝试使用单独的 div，比如timeline.js。这会更容易和更好。尝试制作一个固定宽度的主 div，将溢出设置为 none 并在该主 div 上放置一些额外的 div。例如：

```
<div id='timeline'> 
  <div id='first-event'></div>
  <div id='second-event'></div>
</div> 
```

然后使用 jQuery 函数 scrollTo，用箭头滚动你的主 div。

# windows-7 - 使用批处理脚本上传到 FTP

> ID：14641781
> 
> 赞同：1
> 
> 时间：2013-02-01T07:43:37.553
> 
> 标签：windows-7, batch-file

我想使用批处理脚本将文件上传到我的 ftp 服务器。我已经尝试了这个网站和其他网站上提到的这么多脚本，但它们都不起作用。请有人指导我一步一步地通过这个。

例如，其中一个脚本是这样的：

```
@echo off
echo user USERNAME> ftpcmd.dat
echo PASSWORD>> ftpcmd.dat
echo put %1>> ftpcmd.dat
echo quit>> ftpcmd.dat
ftp -n -s:ftpcmd.dat SERVERNAME
del ftpcmd.dat 
```

我还尝试了一个名为 ftpget 的 comd 工具，但没有:(

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T10:45:24.597

根据评论，您的实际脚本似乎很好，只是在您的 Win7 PC 上找不到 ftp 可执行文件。

这很可能是由于`%PATH%`变量损坏。要恢复它，只需使用默认值编辑它

```
%SystemRoot%\system32;%SystemRoot%;%SystemRoot%\System32\Wbem;%SYSTEMROOT%\System32\WindowsPowerShel l\v1.0\ 
```

您可以`%PATH%`通过转到开始 -> 右键单击​​计算机 -> 高级系统设置 -> 环境变量来进行编辑。

在系统变量中查找路径并进行编辑如上，希望能解决您的问题。

# asp.net - asp.net 网络路由中两个页面的相同 url

> ID：14641784
> 
> 赞同：3
> 
> 时间：2013-02-01T07:43:55.187
> 
> 标签：asp.net

我正在处理网页 url 路由。我想要两个相同的路由 url。参数，相同的模式和相同的 url 但不同的路由名称。我的路线如下。

```
Routes.MapPageRoute("Route1", "{parameter1}/{parameter2}", "packages.aspx");
Routes.MapPageRoute("Route2", "{parameter1}/{parameter2}", "destination.aspx", false, null, null,new RouteValueDictionary { { "isDestination", "yes"} }); 
```

当我调用虚拟路径数据时，我只重定向写在全局文件顶部的 url。

```
 VirtualPathData vpd =RouteTable.Routes.GetVirtualPath(null,
               "Route1",
               "parameter1", "parameter2");

VirtualPathData vpd =RouteTable.Routes.GetVirtualPath(null,
               "Route2",
              "parameter1", "parameter2"); 
```

Route1 的 Vpd 返回路线。如何为两个不同的页面构建两个 url？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:55:42.203

**第一个选项：**您使用[路由约束](http://www.asp.net/mvc/tutorials/controllers-and-routing/creating-a-route-constraint-cs)来限制与特定路由匹配的浏览器请求。您可以使用正则表达式来指定路由约束。

**第二种选择：**您可以使用常量参数来区分具有相同数量和类型参数的路线。

例如。：

```
Routes.MapPageRoute("Route1", "packages/{parameter1}/{parameter2}", "packages.aspx");
Routes.MapPageRoute("Route2", "destination/{parameter1}/{parameter2}", "destination.aspx", false, null, null,new RouteValueDictionary { { "isDestination", "yes"} }); 
```

# php - 带有附件的 Wordpress wp_mail（带有有意义的名称）

> ID：14641785
> 
> 赞同：3
> 
> 时间：2013-02-01T07:43:57.107
> 
> 标签：php, wordpress, email

如何使用 wp_mail 功能为附件发送带有自定义名称的附件。

截至目前，电子邮件已随附件一起发送，但文件名与物理文件名相同。

我无法重命名这些文件，因为我们有很多其他参考资料，但我想用一些有意义的名称发送这些文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T17:27:55.950

wp_mail 不支持在发送邮件时重命名附件。更改发送文件名称的一种方法是使用新名称复制这些文件，将新文件附加到电子邮件中，并在发送电子邮件后删除这些文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-04T06:52:28.097

感谢 QArea 的回复。我找到了这个地方，需要编辑 wp-includes/pluggable.php wp_mail 函数来处理附件，它应该看起来像这样

```
 if ( !empty( $attachments ) ) {
            foreach ( $attachments as $name => $attachment ) {
                    try {
                            $phpmailer->AddAttachment($attachment, $name);
                    } catch ( phpmailerException $e ) {
                            continue;
                    }
            }
    } 
```

# android - Android：动态创建的 EditText 数组将值从一个 EditText 复制到另一个？

> ID：14641787
> 
> 赞同：2
> 
> 时间：2013-02-01T07:44:02.670
> 
> 标签：android, android-edittext, onfocus

我在 android 中实现了一个可扩展的 ListView，其中我在列表视图的一个部分中填充了一个 EditText 框列表。我在 EditText 框中输入值，它以正确的方式获取值。但问题是，当我在列表的最后一个 EditText 框中输入值时，它的值会被复制到第一个 EditText 框中。

我观察到一种行为，当我在最后一个 EditText 框中输入值并按返回按钮时，焦点转到列表中的第一个 EditText 框，当我向上滚动或向下滚动时，Laste EditText 框的值被复制到第一个 EditText 框在视图中。

不知道发生了什么？

```
holder.editText.setOnFocusChangeListener(new OnFocusChangeListener() {
    @Override
    public void onFocusChange(View v, boolean hasFocus) {
        if (!hasFocus) {
            Position position = (Position) v.findViewById(R.id.editTextField).getTag();                     
            if (res != null) {
                res.Value = ((EditText) v).getText().toString();
                Toast.makeText(mContext, res.Value,Toast.LENGTH_SHORT).show();
                setEditTextResult(res);
            }
        }
    }
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:01:26.550

我得到了这个答案。

我必须以这种方式编写代码，以便在按下后退按钮后，编辑文本将失去焦点。代码将根据实现而有所不同，这就是我不提供编码解决方案的原因。如果您的 EditText 框要求您在代码中的其他地方获得焦点，您只需要小心。有时会导致此错误。你会发现android的这个bug，它的适配器只在内存中保留视图的当前项；导致从 EditText 框中删除值并将值复制到其他 EditText 框的错误。

您只需要注意您的 EditText 框是否在其他地方请求焦点 - 这是关键。

# jquery - 使列表项中的图像触发与较大列表项关联的功能？

> ID：14641788
> 
> 赞同：-4
> 
> 时间：2013-02-01T07:44:03.997
> 
> 标签：jquery, html, css, image, list

我在每个项目的左侧都有带有空复选框图像的列表项目。我将这些 li 样式设置为选择器（见下图）。

我可以将空复选框的图像附加到列表项，以便对图像的所有单击都会触发与单击较大列表项相关的任何功能？现在，单击选择器中除图像之外的任何位置都会触发单击功能，但我希望用户能够单击整个选择器。

```
<ul>
  <li id="opt1" class="list_header"> <img id="emptcheck1" src="images/emptycheckbox.png" /> option 1 </li>
  <li id="opt2" class="list_header">  <img id="emptcheck2" src="images/emptycheckbox.png" /> option 2 </li>
</ul> 
```

![在此处输入图像描述](../Images/77d71b006694ba2134db9cbb6e0a3597.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T07:48:27.683

您可以将整个内容包装在`<a>`标签内，或者将点击处理程序提供给`<li>`自身。

**类型 1**

JavaScript

```
$(".list_header").click(function(){
    ...
}); 
```

CSS

```
.list_header {cursor: pointer;} 
```

**类型 2**

HTML

```
<ul>
  <li id="opt1" class="list_header"><a href="#"><img id="emptcheck1" src="images/emptycheckbox.png" /> option 1</a></li>
  <li id="opt2" class="list_header"><a href="#"><img id="emptcheck2" src="images/emptycheckbox.png" /> option 2</a></li>
</ul> 
```

JavaScript

```
$(".list_header a").click(function(){
    ...
}); 
```

CSS

```
.list_header a {display: block;} 
```

# angularjs - 如何在 Angular JS 中使用 Colorbox

> ID：14641791
> 
> 赞同：13
> 
> 时间：2013-02-01T07:44:20.053
> 
> 标签：angularjs, colorbox

如何在 Angular JS 中使用颜色框（也欢迎花式框或灯箱），我应该为它编写指令吗？还有其他方法吗？

这是我的 HTML：

```
...
<h2 class="box-header">
    <i class="icon-hdd"></i>    
    <div class="btn-group pull-right">      
        <a class="btn btn-mini">
            <i class="icon-zoom-in"></i>
            Expand
        </a>
    </div>
</h2>   
<div id="open-with-colorbox">
...
</div>
... 
```

用户将单击展开按钮，具有 open-with-colorbox id 的 div 将作为颜色框打开。

**PS：**我是 Angular JS 的新手，这就是为什么我正在寻找如何使用 colorbox 的解决方案，我在我的应用程序中使用 twitter bootstrap。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-02-01T09:16:15.607

写一个指令，这是最好的选择。

指令示例：

```
app.directive('colorbox', function() {
  return {   
    restrict: 'AC',    
    link: function (scope, element, attrs) {        
      $(element).colorbox(attrs.colorbox);     
    }
  };  
}); 
```

HTML：

```
<a colorbox="{transition:'fade'}" href="...">Image</a> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-09T13:45:07.287

我在我的代码中尝试了 bmleite 指令，但它不起作用。cboxElement 类已添加到元素中，但单击时颜色框未打开。最后我发现这个指令就像一个魅力。

```
app.directive('colorbox', function($compile, $rootScope){
  return {
    link: function(scope, element, attrs){
      element.click('bind', function(){
        $.colorbox({
          href: attrs.colorbox,
          onComplete: function(){
            $rootScope.$apply(function(){
              var content = $('#cboxLoadedContent');
              $compile(content)($rootScope);      
            })
          }
        });
      });
    }
  };
}); 
```

然后在您的 html 部分中使用它：

```
<img src="path_to_image" colorbox="path_to_large_image" /> 
```

# c - 使用 apr_thread_pool_schedule 时 APR 加入线程池线程

> ID：14641792
> 
> 赞同：3
> 
> 时间：2013-02-01T07:44:30.167
> 
> 标签：c, multithreading, threadpool, apr

```
gcc 4.7.2
c89
apr utility 1.4 
```

你好，

我正在使用线程池来启动线程。但是，我看不到任何允许我等待线程加入的 apr 函数。

代码 sippet，删除了所有错误检查和非必要部分：

```
int main(void)
{
    /* Initialize apr internal structures */
    apr_initialize();

    /* Create memory pool */
    rv = apr_pool_create(&mem_pool, NULL);

    /* Create thread pool */
    memset(&buf, 0, sizeof buf);
    rv = apr_thread_pool_create(&thd_pool,
                                init_threads,
                                max_threads,
                                mem_pool);

    /* Process the number of jobs */
#define NUMBER_JOBS 1
    for(i = 0; i < NUMBER_JOBS; i++) {
        rv = apr_thread_pool_schedule(thd_pool,
                                      timeout_duration,
                                      (void*)channel,
                                      (apr_interval_time_t)flash_timeout,
                                      NULL);

    }

    /* 
     * Join all threads here 
     */

    /* Destroy resources */
    apr_thread_pool_destroy(thd_pool);
    apr_pool_destroy(mem_pool);
    apr_terminate();

    return 0;
error:
    apr_thread_pool_destroy(thd_pool);
    apr_pool_destroy(mem_pool);
    apr_terminate();

    return 1;
}

void* timeout_duration(apr_thread_t *thd, void *data)
{
    channel_t *channel = (channel_t*)data;

    LOG_DEBUG("Channel timeout notification [ %zu ]", channel->id);
} 
```

我看不到任何加入线程的 apr utity 函数。

但是，我确实找到了这个函数`apr_thread_join(apr_status_t *retval, apr_thread_t *thd)`但是，它需要 a`apr_thread_t`作为参数。

函数 timeout_duration 需要 a`apr_thread_t`但是如果我需要使用它来加入，我该如何设法将其传回？

只是一个旁注问题。是否有任何使用 apr 的示例项目，我可以参考。文档非常有限。

非常感谢您的任何建议，

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-03T08:12:46.927

**短句**

You don't need to join the threads in the thread-pool. When you call `apr_thread_pool_destroy` the function will block, until all threads have finished their current task.

To answer your last question first: I didn't find an example but the libapr and libapr-util are open-source, you can read the source and this is what I did: (I checked the SVN-trunk [here](http://svn.apache.org/viewvc/apr/apr/trunk/?pathrev=1441871) rev 1441871)

**Long answer**

The interesting files:

*   [util-misc/apr_thread_pool](http://svn.apache.org/viewvc/apr/apr/trunk/util-misc/apr_thread_pool.c?view=log&pathrev=1441871)
*   [memory/unix/apr_pools.c](http://svn.apache.org/viewvc/apr/apr/trunk/memory/unix/apr_pools.c?view=log&pathrev=1441871)

First check in `apr_thread_pool.c:394`. Here we find the implementation of `apr_thread_pool_destroy`. We can see the it calls a function called `apr_pool_cleanup_run` with three arguments, one is the pool-storage, one is the thread-pool-context and the last one is a function-pointer to the function `thread_pool_cleanup`.

If we follow `apr_pool_cleanup_run` we will get to `apr_pools.c:2453` and see that `apr_pool_cleanup_kill` is called. Reading this last function shows us, that here in several loops over the elements (the threads) are cleaned by (what we will see later) calling the `cleanup_fn`-function-argument.

Now back in function `apr_pool_cleanup_run` there is a final call to `cleanup_fn`.

The real action is going on the function-pointer passed to `apr_pool_cleanup_run`. So, if we go back to `apr_thread_pool.c:329` we find the function `thread_pool_cleanup`.

In it the context-variable `terminated` is set to 1 and then the function is "sleeping" until `_myself->thd_cnt` has become 0.

Searching for the usage of `terminated` we find that `thread_pool_func` is exiting its loop when `terminated` is not 0\. It turns out that `thread_pool_func` is the function each thread in the threadpool is using. In the loop a task is fetched and executed. When the loop has terminated (because `terminated` has become 1) the following code is executed:

```
 /* idle thread been asked to stop, will be joined */
 --me->thd_cnt; 
```

This will ultimately lead to the thd_cnt==0 which is the terminate-condition for the loop in `thread_pool_cleanup`.

When you call `apr_thread_pool_destroy` all threads are stopped cleanly before the function returns.

# java - Java内存不足二维数组

> ID：14641794
> 
> 赞同：2
> 
> 时间：2013-02-01T07:44:32.457
> 
> 标签：java, memory-management, bytearray, out-of-memory

我正在尝试创建一个二维数组，如下所示。

```
int NUM_RECORDS = 100480507;

byte[][] completeArray = new byte[NUM_RECORDS][6]; 
```

拥有不就足够了吗`100480507 * 6 ~= 0.6 GB`

也看到[**这个**](https://stackoverflow.com/questions/14614689/how-much-memory-do-i-need-to-have-for-100-million-records)问题。

但是创建此数组时内存不足。我已经通过 JVM args 为我的 java 进程分配了 4G。

这怎么解释？我在这里错过了一些微不足道的事情吗？

这是我的程序

```
public class MemTest {

   public static void main(String[] args) {
       int NUM_RECORDS = 100480507;
       byte[][] completeArray = new byte[NUM_RECORDS][6];
       System.out.println("Array created");
   }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:29:20.657

每个数组都有一个开销（例如，请参阅有关其开销的 IBM 文档 -> [http://www.ibm.com/developerworks/java/library/j-codetoheap/index.html](http://www.ibm.com/developerworks/java/library/j-codetoheap/index.html)）。在您的情况下，您正在创建 100480507 个！

如果您将代码更改为“ **byte[]** completeArray = new byte[ **NUM_RECORDS*6** ];”，根据您的理论，它应该需要相同的空间！但是，我相当肯定这会起作用，因为开销最小。您也可以尝试“byte[][] completeArray = new **byte[6][NUM_RECORDS]** ;” 这也应该起作用（开销较小）。

我知道这不会解决您的问题 - 但我希望这能让您对开销有所了解。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:03:17.223

我检查了 Harmony JVM 中的对象布局（我想 JVM 的其他实现类似）。java中的每个Object都有一个对象头，其中包含JVM的重要信息。最重要的是对对象类的引用（**一个词**）。此外，GC 使用了一些标志来管理同步，即锁定字（因为每个对象都可以同步）占用另一个**字**（使用部分字对性能不利）。所以这是 2 个字，在 32 位系统上是 8 个字节，在 64 位系统上是 16 个字节。数组还需要一个 int 字段来表示数组长度，即另外**4 个字节**，可能是**8 个字节**在 64 位系统上。所以对于每个数组，在 32 位机器上我们有 12 个额外的字节，在 64 位机器上可能是 24 个字节。

在您的程序中，您有 6 个数组数组。100480507 一维阵列。所以额外的内存消耗大约是 1.2 + 0.6 GB，这是一个非常大的连续内存块。开销约为 200%。

当我们将代码更改为：

```
public class MemTest {
   public static void main(String[] args) {
       int NUM_RECORDS = 100480507;
       byte[] completeArray = new byte[NUM_RECORDS * 6];
       System.out.println("Array created");
   }
} 
```

我们只创建 1 个数组，因此开销非常小。总共约0.6GB。

当代码更改为：

```
public class MemTest {
   public static void main(String[] args) {
       int NUM_RECORDS = 100480507;
       byte[][] completeArray = new byte[NUM_RECORDS][6];
       System.out.println("Array created");
   }
} 
```

我们总共有 7 个数组。该程序将立即结束。

以您的代码样式创建另一个 0.6GB 内存，但将元素类型从 int 更改为 long：

```
public class MemTest {
   public static void main(String[] args) {
       int NUM_RECORDS = 12560063;
       long[][] completeArray = new long[NUM_RECORDS][6];
       System.out.println("Array created");
   }
} 
```

该程序也可以立即结束。开销约为 150M/600M = 25%。

# sitecore - SiteCore 中的 IIRF 重定向问题

> ID：14641797
> 
> 赞同：1
> 
> 时间：2013-02-01T07:44:45.997
> 
> 标签：sitecore, iirf

我们正在尝试在 SiteCore WebApplication 中使用 IIRF 处理重定向。在这里，我们注意到重定向在应用程序池的经典模式中按预期发生，但在为应用程序池使用集成模式时不会发生同样的情况。

我们需要同样的方法在集成模式下工作。

相同的任何输入都会有所帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:03:10.363

以下是我在**集成模式下使用****.NET 4为网站注册****IIRF 64 位**版本的方法：

 ****```
%appcmd% set config "%windir%\system32\inetsrv\appcmd" /section:isapiFilters /"+[name='IIRF',path='%iirfdll%',enabled='true',enableCache='false',preCondition='bitness64']" /commit:apphost 
```

您必须从*提升的命令提示符*中执行此操作，并替换变量：

*   `%appcmd%`：`%windir%\system32\inetsrv\appcmd`
*   `%sitename%`: IIS 中的站点名称
*   `%iirfdll%`: dll 的路径（应用程序池用户必须具有访问权限）

对此没有任何问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:46:58.003

我以前使用过 Ionic Isapi Rewrite，它适用于我需要它的 95% 的情况，但最终我转而使用可通过 IIS 管理器安装和配置的 IIS7 的标准 Url Rewrite 模块。我发现它是一个更加用户友好的模块。在这里查看[网站](http://www.iis.net/downloads/microsoft/url-rewrite)****

# android - 是否可以在同一个 Textview 上使用拖动事件和单击事件？

> ID：14641802
> 
> 赞同：7
> 
> 时间：2013-02-01T07:45:14.030
> 
> 标签：android, events, onclick, listener, ontouch

在我的应用程序中，我需要在同一个 textView 上同时使用单击和拖动事件。

我写了以下代码：

```
... }
    switch(event.getAction()) {
        case MotionEvent.ACTION_UP:
//            TextDialog.setVisibility(View.VISIBLE);
            break;
        case MotionEvent.ACTION_DOWN: {
            disallowTouch(parent, true);
            int downX = (int)event.getX();
            int downY = (int)event.getY();
            return false; // allow other events like Click to be processed
        }
        case MotionEvent.ACTION_MOVE:
            int x = (int)event.getRawX();
            int y= (int)event.getRawY();

            layoutParams.leftMargin = x - 50;
            layoutParams.topMargin = y - 70;

            tvText.setLayoutParams(layoutParams);
            break;
        default:
            break;
    }
    return true;
}

@Override
public void onClick(View v) {
    // TODO Auto-generated method stub
    TextDialog.setVisibility(View.VISIBLE);
} 
```

但只有`ACTION_MOVE`工作。该`onClick`事件没有被触发。

我只想在单击 TextView 时显示一个对话框。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T07:59:46.190

同时使用 setOnTouchListener 和 setOnClickListener

在 onTouch 中：

```
public boolean onTouch(View v, MotionEvent event) {
    ViewParent parent = v.getParent();
    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN: {
        disallowTouch(parent, true);
        downX = event.getX();
        downY = event.getY();
        return false; // allow other events like Click to be processed
    }
}

private void disallowTouch(ViewParent parent, boolean isDisallow) {
    if (parent != null) {
        parent.requestDisallowInterceptTouchEvent(isDisallow);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2022-01-26T14:58:03.820

我认为您不应该使用`MotionEvent.ACTION_DOWN`，但只能使用`MotionEvent.ACTION_UP`：

```
public boolean onTouch(View view, MotionEvent motionEvent) {
    switch (motionEvent.getAction()) {
        // OnClick
        case MotionEvent.ACTION_UP: {
            TextDialog.setVisibility(View.VISIBLE);                
            return false;  // To allow other events
        }
        // OnTouch
        case MotionEvent.ACTION_MOVE: {
            ClipData clipData = ClipData.newPlainText("", "");
            View.DragShadowBuilder dragShadowBuilder = new View.DragShadowBuilder(view);
            view.startDragAndDrop(clipData, dragShadowBuilder, null, 0);
            return true;
        }
    }
} 
```

# javascript - extjs 示例代码不起作用

> ID：14641808
> 
> 赞同：1
> 
> 时间：2013-02-01T07:45:52.130
> 
> 标签：javascript, extjs, extjs4.1

```
Ext.create('Ext.panel.Panel', {
renderTo: Ext.getBody(),
width: 400,
height: 300,
title: 'Container Panel',
items: [
    {
        xtype: 'panel',
        title: 'Child Panel 1',
        height: 100,
        width: '75%'
    },
    {
        xtype: 'panel',
        title: 'Child Panel 2',
        height: 100,
        width: '75%'
    }
]
}); 
```

上面的代码没有被执行......你能找到错误或错误吗？我对 extjs 很陌生。我在浏览[文档](http://docs.sencha.com/ext-js/4-0/#!/guide/layouts_and_containers)时发现了上面的代码（检查“容器”部分）。它在[jsfiddle](http://jsfiddle.net/68rZT/)中执行良好，但在我的项目中却没有。（其他示例在我的项目中运行良好）。

回答：

```
Ext.onReady(function(){
    Ext.create('Ext.panel.Panel', {
        renderTo: Ext.getBody(),
        width: 400,
        height: 300,
        layout: 'hbox',
        title: 'Container Panel',
        items: [
           {
               xtype: 'panel',
               title: 'Child Panel 1',
               height: 100,                
               flex:1
           },
           {
               xtype: 'panel',
               title: 'Child Panel 2',
               height: 100,
               flex:1
           }
       ]
   });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T07:53:28.737

几个问题：

1）您需要将代码包装在 onReady 块中。

2) 宽度无效。他们怎么可能都是75%？在这种情况下，您将需要使用 hbox 布局，每个子项都是 flex: 1。

# groovy - 将闭包应用于迭代器

> ID：14641823
> 
> 赞同：0
> 
> 时间：2013-02-01T07:46:52.113
> 
> 标签：groovy, iterator

有没有办法将闭包应用于返回一个新迭代器的迭代器，该迭代器产生初始迭代器的元素但将闭包应用于这些结果？

我知道我可以编写一个执行此操作的 Iterator 类，但我不想重新发明轮子。

请注意，我需要它在没有实际遍历迭代器到末尾的情况下工作（即这应该在没有结束的迭代器上工作）。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:49:38.057

你有几个选择：

假设您有一个像这样的迭代器（它返回一个连续的随机数流）：

```
def rnd = [ hasNext:{ true }, next:{ Math.random() } ] as Iterator 
```

一种选择是编写一个接受迭代器和闭包的函数，并将闭包应用于每个下一次调用（并委托给 hasNext 的原始迭代器），例如：

```
Iterator mappedIterator( Iterator i, Closure c ) {
  [ hasNext:{ i.hasNext() }, next:{ c( i.next() ) } ] as Iterator
} 
```

那么我们可以这样做：

```
def rndTimes100 = mappedIterator( rnd ) { it * 100 }

// collect 10 randoms from the stream into a list
println rndTimes100.take( 10 ).collect() 
```

另一个可用的选项是使用我的[groovy-stream 库](http://timyates.github.com/groovy-stream/)，它包含了这种功能（除了其他东西）。有了这个，你可以这样做：

```
@Grab( 'com.bloidonia:groovy-stream:0.5.2' )
import groovy.stream.Stream

def rnd = [ hasNext:{ true }, next:{ Math.random() } ] as Iterator

def rndStream = Stream.from rnd map { it * 100 }

// collect 10 randoms from the stream into a list
println rndStream.take( 10 ).collect() 
```

# excel - 基于现有 VBA 函数对多个单元格应用数据验证

> ID：14641831
> 
> 赞同：2
> 
> 时间：2013-02-01T07:48:02.267
> 
> 标签：excel, excel-formula, vba

我不知道如何仅使用公式在循环中遍历字符串。

这是我试图转换为公式的 vba 代码。我想用这个公式对各种单元格进行数据验证。

**公式：**

```
Function Test(pValue) As Boolean
    If Len(pValue) < 2 Or Len(pValue) > 99 Then
        AlphaNumeric = False
        Exit Function
    End If
    LPos = 1
    LValid_Values = " abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.0123456789"
    While LPos <= Len(pValue)
        LChar = Mid(pValue, LPos, 1)
        If InStr(LValid_Values, LChar) = 0 Then
            Test = False
            Exit Function
        End If
        LPos = LPos + 1
    Wend
    Test = True
End Function 
```

**我写的公式的简单部分：**

```
=IF(AND(LEN(E4)>1,LEN(E4)<100,____Formula_Here____),TRUE,FALSE) 
```

我假设如果我选择`E4:E50000`并单击`DataValidation`，`Custom`从下拉列表中选择，然后输入上述公式，那么它也会自动将其应用于 E4、E5、E6.. E50000。如果我错了，请纠正我。

另外，我希望它可以在 Excel 2003 及更高版本上运行。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-03T20:01:45.733

用 填空

```
NOT(ISERROR(SUM(SEARCH(MID(E4,ROW($1:$99),1)," ABCDEFGHIJKLMNOPQRSTUVWXYZ.0123456789")))) 
```

这是一个数组公式，因此如果在工作表中使用，您可以使用 ctrl-shift-enter 输入它。但是，数据校验的自定义公式（至少在2003年）会自动将其视为数组公式，因此只需正常输入即可。

让我们从内到外分解它。`ROW($1:$99)`数组公式内部提供了循环机制。它将导致周围的数组公式在每个 处求值`i = 1, 2, ..., 99`，因此将依次`MID`取第`i`th 个字符。不区分大小写，所以我们可以省略，因为我们有. 它返回找到第 th 个字符的位置，否则返回错误。聚合这些位置并将传播任何错误。所以，如果没有找到任何字符，整体就会出错。`E4``SEARCH``a..z``A..Z``A..Z.0..9``i``SUM``SUM`

请注意，据我所知，您*可以*在自定义验证公式中使用 UDF，所以我不确定我是否遵循您的反对意见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:51:32.133

使用可以在公式中使用你的函数：http: [//office.microsoft.com/en-us/excel-help/creating-custom-functions-HA001111701.aspx](http://office.microsoft.com/en-us/excel-help/creating-custom-functions-HA001111701.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-03T17:56:06.060

我的想法是使用一堆嵌套的替代函数将有效条目减少到“”并进行数据验证以确保这是“”。

这是嵌套替换。

```
=SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(SUBSTITUTE(B1," ",""),"a",""),"b",""),"c",""),"d",""),"e",""),"f",""),"g",""),"h",""),"i",""),"j",""),"k",""),"l",""),"m",""),"n",""),"o",""),"p",""),"q",""),"r",""),"s",""),"t",""),"u",""),"v",""),"w",""),"x",""),"y",""),"z",""),"A",""),"B",""),"C",""),"D",""),"E",""),"F",""),"G",""),"H",""),"I",""),"J",""),"K",""),"L",""),"M",""),"N",""),"O",""),"P",""),"Q",""),"R",""),"S",""),"T",""),"U",""),"V",""),"W",""),"X",""),"Y",""),"Z",""),".",""),"0",""),"1",""),"2",""),"3",""),"4",""),"5",""),"6",""),"7",""),"8",""),"9","") 
```

事实证明，这对您没有多大好处，因为我无法将其复制粘贴到数据验证中，但我在 VBA 中编写的并没有丢失所有内容。

```
Sub jf()
Dim lValid_values As String
Dim rowcount As Long
lValid_values = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.0123456789"
Dim form As String
Dim desired_column As String
Dim desired_rowMin As Long
Dim desired_rowMax As Long
Dim InitialCell As String
Dim temp As String
desired_column = "E"
desired_rowMin = 4
desired_rowMax = 50000
InitialCell = desired_column & desired_rowMin
form = "substitute(||cell||," & """" & " " & """" & "," & """" & """" & ")"

Do While lValid_values <> ""
form = "substitute(" & form & "," & """" & Left(lValid_values, 1) & """" & "," & """" & """" & ")"
lValid_values = Right(lValid_values, Len(lValid_values) - 1)
Loop
form = "=AND(LEN(||cell||)>1,LEN(||cell||)<100," & form & "=" & """" & """" & ")"

For rowcount = desired_rowMin To desired_rowMax
temp = Replace(form, "||cell||", desired_column & rowcount)

With Range(desired_column & rowcount).Validation
    .Delete
    .Add Type:=xlValidateCustom, AlertStyle:=xlValidAlertStop, Operator:= _
    xlBetween, Formula1:=temp
    .IgnoreBlank = True
    .InCellDropdown = True
    .InputTitle = ""
    .ErrorTitle = ""
    .InputMessage = ""
    .ErrorMessage = ""
    .ShowInput = True
    .ShowError = True
End With
Next rowcount
End Sub 
```

我开始将它运行到 50000，但它非常慢，所以我将它停在 4000 左右。它确实有效，所以希望它不是你必须多次执行的操作。您必须更改desired_column、desired_rowmin 和desired_rowmax 变量以满足您的需要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-04T18:17:18.873

我发现这样做的方法是使用辅助列。

假设你有你的数据`E4:E50000`

F4 会将`=Test(E4)`
这个值复制到最后，所以你现在有你的帮助列（如果你想检查，最后一个是`=Test(E50000)`）

然后将是数据验证自定义公式`=F4`（当您在选择范围 E4:E50000 的情况下输入此公式时，它会将其复制下来，并调整引用以指向其旁边的相应单元格）。

您的代码中也有错误 - 您有`AlphaNumeric = False`，应该是`Test = False`。设置**选项显式**将有助于发现这些错误。

* * *

我在测试电子表格中使用的例程的略微修改版本：

```
Option Explicit

Function Test(pValue) As Boolean
Dim lPos As Long
Dim lValid_Values As String
Dim LChar As String

If Len(pValue) < 2 Or Len(pValue) > 99 Then
    Test = False
    Exit Function
End If
lPos = 1
lValid_Values = " abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ.0123456789"
While lPos <= Len(pValue)
    LChar = Mid(pValue, lPos, 1)
    If InStr(lValid_Values, LChar) = 0 Then
        Test = False
        Exit Function
    End If
    lPos = lPos + 1
Wend
Test = True
End Function 
```

# android - ProgressDialog 在 AsyncTask 中表现得很奇怪

> ID：14641832
> 
> 赞同：1
> 
> 时间：2013-02-01T07:48:02.327
> 
> 标签：android, android-asynctask, progressdialog

我有以下代码从我的网站加载文件

```
class DownloadTT4FileTask extends AsyncTask<String, String, String> {

                    private Context mContext;
                    private String  mFilename;
                    private ProgressDialog progressDialog;
                    String  retString="";

                    public DownloadTT4FileTask(Context context, String filename) {
                        mContext=context;
                        mFilename=filename;
                    }

                    @Override
                    protected void onPreExecute() {
                        Log.d("DownloadTT4FileTask", "onPreExecute");
                        progressDialog = ProgressDialog.show(mContext, mFilename, "Loading. Please wait...");
                    }

                    protected String doInBackground(String... args) {

                        URL url;
                        try {
                            url = new URL(args[0]);
                            java.net.URLConnection con = url.openConnection();
                            con.connect();
                            //Log.d("DownloadTT4FileTask", "con.connect ok ");

                            java.io.BufferedReader in = new java.io.BufferedReader(new java.io.InputStreamReader(con.getInputStream()));
                            String line;
                            for (; (line = in.readLine()) != null; ) {
                                // just read the line and save it
                                retString += line+"\n";
                            }   

                        } catch (MalformedURLException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        } catch (IOException e) {
                            // TODO Auto-generated catch block
                            e.printStackTrace();
                        }

                        return retString;
                    }

                    protected void onPostExecute(String result) {
                        Log.d("DownloadTT4FileTask", "onPreExecute");
                        progressDialog.dismiss();
                    }
                };
                // loading from website
                filename = "http://2112design.com/tabs/"+band+"/"+song+".tt4";
                String fileContents = new DownloadTT4FileTask(context, filename).execute(filename).get(15L, TimeUnit.SECONDS);

                br = new BufferedReader(new StringReader(fileContents)); 
```

它加载正常（加载大约 5 秒），但进度对话框有点偏离。它不会在下载开始时出现在屏幕上。任务结束时它会在屏幕上短暂闪烁。

我已经看过很多关于如何使用它的例子，看起来这是很正常的代码。

也许上下文是问题？我从一个在不是主要活动的片段中运行的 onChildClick 中得到它。我尝试使用主要活动上下文，但这只是崩溃了。

```
 @Override
public boolean onChildClick(ExpandableListView parent, View v, int groupPosition, int childPosition, long id) {
    Globals.mDoc.OpenTT4Document(parent.getContext(), band, song, mRemoteFilesThis==null ? Doc.SDCARD : Doc.WEBSITE);

    return false;
} 
```

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T07:54:56.807

正如 Doc 所说的[AsyncTask.get()](http://developer.android.com/reference/android/os/AsyncTask.html#get%28long,%20java.util.concurrent.TimeUnit%29)：

> 如有必要，最多等待给定时间以完成计算，然后检索其结果。

目前您正在主 UI 线程上调用 AsyncTask.get() 并且没有出现进度对话框。您需要在不调用 get() 方法的情况下启动 AsyncTask：

```
new DownloadTT4FileTask(context, filename).execute(filename); 
```

并在 onPostExecute 内部完成 doInBackground 后更新 UI：

```
 protected void onPostExecute(String result) {
                    Log.d("DownloadTT4FileTask", "onPreExecute");
                    progressDialog.dismiss();
                     // get result here
                    br = new BufferedReader(new StringReader(result));
                } 
```

**编辑 ：**

如果要调用 AsyncTask 的 get 方法，则使用 Thread 获取结果并避免 UI 冻结：

```
new Thread(new Runnable() {
  public void run() {
     try {
            Your_Activity.this.runOnUiThread(new Runnable() {
            public void run() {

               progressDialog = ProgressDialog.show(Your_Activity.this, 
                 mFilename, "Loading. Please wait...");
            }
           });
              // start AsyncTask here
              String fileContents = new DownloadTT4FileTask(context, filename)
                                     .execute(filename).get(15L, TimeUnit.SECONDS);

              Your_Activity.this.runOnUiThread(new Runnable() {
                 public void run() {
                    // update UI elements here
                     br = new BufferedReader(new StringReader(fileContents));
                       progressDialog.dismiss();
                  }
              });
          } catch (InterruptedException e) {
           // TODO Auto-generated catch block
            e.printStackTrace();
          } catch (ExecutionException e) {
             // TODO Auto-generated catch block
               e.printStackTrace();
          } catch (TimeoutException e) {
                    // TODO Auto-generated catch block
               e.printStackTrace();
          }
       }
 }).start(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T10:06:27.323

我在 ρяσѕρєя K 的帮助下弄明白了，谢谢

基本问题是我没有从启动加载线程的 onChildClick 返回，所以 ProgressDialog.show 在线程完成之前并没有真正做任何事情，到那时就没有意义了，

所以我现在要做的是在没有 get 的情况下启动 asynctask，并对 onPostExecute 中的读取数据进行所有处理。所以我可以立即从我的加载功能返回，回到 UI 线程并显示进度。

但问题是，我没有要在主 UI 中显示的新文档，所以我显示并清空一个标题为“等待等等等等等等……”的文档。加载完成后，我的主视图无效并且文档显示。

# node.js - 如何摆脱错误：“OverwriteModelError：一旦编译就无法覆盖`undefined`模型。”？

> ID：14641834
> 
> 赞同：25
> 
> 时间：2013-02-01T07:48:10.910
> 
> 标签：node.js, mongodb, mongoose

我有一个通用的方法来更新 MongoDB 中任何集合的文档吗？

以下代码在文件名**Deleter.js 中**

```
module.exports.MongooseDelete = function (schemaObj, ModelObject);
{
  var ModelObj = new mongoose.Model("collectionName",schemaObj);
  ModelObj.remove(ModelObject);
} 
```

**并在我的主文件app.js**中调用如下：

```
var ModObj = mongoose.model("schemaName", schemasObj);
var Model_instance = new ModObj();
var deleter = require('Deleter.js');
deleter.MongooseDelete(schemasObj,Model_instance); 
```

我收到以下错误：

```
OverwriteModelError: Cannot overwrite `undefined` model once compiled.
    at Mongoose.model (D:\Projects\MyPrjct\node_modules\mongoose\lib\index.js:4:13) 
```

我只进行第二种方法调用。如果有人有解决方案，请告诉我。

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2014-10-06T13:39:19.863

我设法解决了这样的问题：

```
var Admin;

if (mongoose.models.Admin) {
  Admin = mongoose.model('Admin');
} else {
  Admin = mongoose.model('Admin', adminSchema);
}

module.exports = Admin; 
```

* * *

## 回答 #2

> 赞同：33
> 
> 时间：2013-03-06T14:28:00.027

我认为您已经`mongoose.Model()`在同一架构上实例化了两次。您应该只创建每个模型一次，并在需要时拥有一个全局对象来获取它们

我假设您在目录下的不同文件中声明不同的模型`$YOURAPP/models/`

```
$YOURAPPDIR/models/
 - index.js
 - A.js
 - B.js 
```

index.js

```
module.exports = function(includeFile){
    return require('./'+includeFile);
}; 
```

js

```
module.exports = mongoose.model('A', ASchema); 
```

B.js

```
module.exports = mongoose.model('B', BSchema); 
```

在你的 app.js

```
APP.models = require('./models');  // a global object 
```

当你需要它时

```
// Use A
var A = APP.models('A');
// A.find(.....

// Use B
var B = APP.models('B');
// B.find(..... 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-11-02T18:21:23.450

我尽量避免使用全局变量，因为一切都是参考，事情可能会变得混乱。我的解决方案

模型.js

```
 try {
    if (mongoose.model('collectionName')) return mongoose.model('collectionName');
  } catch(e) {
    if (e.name === 'MissingSchemaError') {
       var schema = new mongoose.Schema({ name: 'abc });
       return mongoose.model('collectionName', schema);
    }
  } 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-05-23T22:45:37.157

实际上问题不在于`mongoose.model()`实例化了两次。问题是`Schema`实例化了不止一次。例如，如果您执行`mongoose.model("Model", modelSchema)`n 次并且您使用的是对 Schema 的相同引用，这对 mongoose 来说不是问题。当您在同一模型上使用另一个模式引用时，问题就出现了，即

```
var schema1 = new mongoose.Schema(...);
mongoose.model("Model", schema1);
mongoose.model("Model", schema2); 
```

这是发生此错误时的情况。

如果您查看源代码，`(mongoose/lib/index.js:360)`这是检查

```
if (schema && schema.instanceOfSchema && schema !== this.models[name].schema){
    throw new mongoose.Error.OverwriteModelError(name);
} 
```

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-02-10T14:22:55.073

我发现最好避免全局和异常处理-

```
var mongoose = require("mongoose");
var _ = require("underscore");

var model;
if (_.indexOf(mongoose.modelNames(), "Find")) {
    var CategorySchema = new mongoose.Schema({
        name: String,
        subCategory: [
            {
                categoryCode: String,
                subCategoryName: String,
                code: String
            }
        ]
    }, {
        collection: 'category'
    });
    model = mongoose.model('Category', CategorySchema);
}
else {
    model = mongoose.model('Category');
}

module.exports = model; 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-03-12T02:58:02.047

这是因为在两条路径中需要一个模型。

// 注释模型文件

```
var mongoose = require('mongoose')
var Schema = mongoose.Schema

var CommentSchema = Schema({
  text: String,
  author: String
})

module.exports = mongoose.model('Comment', CommentSchema) 
```

// 种子文件

```
const commentData = {
  user: "David Lee",
  text: "This is one comment"
}
var Comment = require('./models/Comment')

module.exports = function seedDB () {
  Comment.create(commentData, function (err, comment) {
    console.log(err, commemt)
  })
} 
```

// 索引文件

```
var Comment = require('./models/comment')
var seedDB = require('./seeds')
seedDB()
const comment = {
  text: 'This girl is pretty!',
  author: 'David'
}
Comment.create(, function (err, comment) {
    console.log(err, comment)
 }) 
```

现在你会得到`throw new mongoose.Error.OverwriteModelError(name)`，因为你需要以两种不同的方式评论模型。种子文件`var Comment = require('./models/Comment')`，索引文件`var Comment = require('./models/comment')`

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-11-26T10:27:51.853

我的解决了这个代码：

```
 module.exports = mongoose.models.nameOne || mongoose.model('nameOne', PostSchema); 
```

# android - SocketTimeoutException Android

> ID：14641835
> 
> 赞同：9
> 
> 时间：2013-02-01T07:48:11.203
> 
> 标签：android, multithreading, memory-leaks, socket-timeout-exception

我有一个复杂的应用程序，可以从我在 AWS 上的网络服务下载大量内容。但是，我一直有`SocketTimeoutException`50% 的时间。根据我的研究，我怀疑可能有以下原因：

*   **连接超时时间**更短：我将其增加到 100 秒，但仍然不断收到此错误。
*   **内存泄漏**：我不断收到`GC`警告。我已阅读文章并尝试改进我的代码，但它也无济于事。我还必须提到，我的应用程序在后台线程中一个接一个地下载了 2000+ 30KB JSON 文件。有效地即兴创作的建议将受到高度欢迎！
*   **服务器问题**：由于 Amazon Web Service 高度可靠，它可能不是根本问题。
*   **多线程**：这会以某种方式负责吗？
*   **错误的下载方式**：我怀疑我是否以低效的方式下载。如我错了请纠正我。

请帮我找出真正的问题。谢谢 ！

```
public synchronized String getJSONString(String url)
{   
    try {
           URL url1 = new URL(url);
           URLConnection tc = url1.openConnection();
           tc.setConnectTimeout(timeout);
           tc.setReadTimeout(timeout);
          // tc.connect();
           br = new BufferedReader((new InputStreamReader(tc.getInputStream())),8000);
           while ((line = br.readLine()) != null) {
                    sb.append(line+"\n");
                }
                br.close();
                json = sb.toString();
                return json;
        }
    catch(Exception e)
    {
        Log.e("JSON Downloader", "Error downloading feed/article ");
        e.printStackTrace();
    }

    return null;
} 
```

**错误日志：**

```
02-01 06:37:43.375: W/System.err(5548): java.net.SocketTimeoutException
02-01 06:37:43.375: W/System.err(5548):     at java.net.PlainSocketImpl.read(PlainSocketImpl.java:491)
02-01 06:37:43.375: W/System.err(5548):     at java.net.PlainSocketImpl.access$000(PlainSocketImpl.java:46)
02-01 06:37:43.375: W/System.err(5548):     at java.net.PlainSocketImpl$PlainSocketInputStream.read(PlainSocketImpl.java:240)
02-01 06:37:43.375: W/System.err(5548):     at java.io.InputStream.read(InputStream.java:163)
02-01 06:37:43.375: W/System.err(5548):     at java.io.BufferedInputStream.fillbuf(BufferedInputStream.java:142)
02-01 06:37:43.375: W/System.err(5548):     at java.io.BufferedInputStream.read(BufferedInputStream.java:227)
02-01 06:37:43.375: W/System.err(5548):     at libcore.io.Streams.readAsciiLine(Streams.java:201)
02-01 06:37:43.375: W/System.err(5548):     at libcore.net.http.HttpEngine.readResponseHeaders(HttpEngine.java:544)
02-01 06:37:43.375: W/System.err(5548):     at libcore.net.http.HttpEngine.readResponse(HttpEngine.java:784)
02-01 06:37:43.375: W/System.err(5548):     at libcore.net.http.HttpURLConnectionImpl.getResponse(HttpURLConnectionImpl.java:274)
02-01 06:37:43.375: W/System.err(5548):     at libcore.net.http.HttpURLConnectionImpl.getInputStream(HttpURLConnectionImpl.java:168)
02-01 06:37:43.375: W/System.err(5548):     at com.in.feeds.JSONDownloader.getJSONString(JSONDownloader.java:65)
02-01 06:37:43.375: W/System.err(5548):     at com.in.feeds.JSONDownloader.getJSONObjectFromUrl(JSONDownloader.java:45)
02-01 06:37:43.375: W/System.err(5548):     at com.in.fullarticle.ArticlePage$LoadArticle.run(ArticlePage.java:383)
02-01 06:37:43.375: W/System.err(5548):     at java.util.concurrent.Executors$RunnableAdapter.call(Executors.java:442)
02-01 06:37:43.375: W/System.err(5548):     at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:305)
02-01 06:37:43.375: W/System.err(5548):     at java.util.concurrent.FutureTask.run(FutureTask.java:137)
02-01 06:37:43.375: W/System.err(5548):     at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1076)
02-01 06:37:43.375: W/System.err(5548):     at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:569)
02-01 06:37:43.375: W/System.err(5548):     at java.lang.Thread.run(Thread.java:856) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-04T20:28:46.547

我已经有一段时间了，但是在寻找性能时真的建议阅读一篇文章：http: [//www.kegel.com/java/wp-javaio.html](http://www.kegel.com/java/wp-javaio.html)

连接超时可能是在服务器端引起的，假设您连接到 Web 服务器，请检查您在那里收到的错误。

GC 声明并不令人惊讶。这不是内存泄漏，而是 Java 清理。从上面的文章：

> 首先，如果我们查看 while 循环的第一行，我们会看到正在为正在读取的文件的每一行创建一个新的 String 对象：
> 
> while ((line = in.readLine()) != null) {
> 
> 这意味着，例如，对于 100,000 行文件，将创建 100,000 个 String 对象。创建大量对象会在三个方面产生成本：为对象分配空间的时间和内存、初始化对象的时间、垃圾收集对象的时间。

关于多线程，您应该提供更多代码。您的方法是同步的，因此您至少可以避免同时对同一个实例进行多次调用。NW 代码一目了然，是安全的。

我的调试策略是在收到一行输入时查看服务器端的第一和第二存储时间戳，以查看是否存在间隙（传输错误）。

祝你好运

# php - 在另一个自定义函数中声明自定义函数

> ID：14641840
> 
> 赞同：0
> 
> 时间：2013-02-01T07:48:33.727
> 
> 标签：php, function, declare

我的第一个功能：

```
function db_connect_error_mail ($txt) {
mail(admin_email,mail_subject01,$txt);} //1st three variables come from constants at config.php 
```

第二个功能：

```
function connectdb() {
  $dbc = mysqli_connect (db_host, db_user, db_password, db_name); //variables come from constants at config.php
  if (!$dbc) 
{
$txt = mysqli_connect_errno().mysqli_connect_error();
db_connect_error_mail($txt);
unset ($txt);
die('custom error message to inform viewer');
} else 
    {
        return $dbc;
    }
} 
```

**我的问题：**

在 index.php 中调用 connectdb() 是否可行？如果无法设置数据库连接，我还会收到电子邮件吗？（假设服务器的邮件功能一直有效）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T09:01:29.997

如果您`die`在此之前打电话`db_connect_error_mail()`不，您将不会收到您的电子邮件，因为[die()](http://php.net/manual/en/function.die.php)函数会停止执行任何进一步的代码。

但是，您可以在发送错误电子邮件**后调用 die 函数。**这样您将同时获得：通知邮件和错误消息。

# php - 将块分配给主页中的多个区域

> ID：14641841
> 
> 赞同：0
> 
> 时间：2013-02-01T07:48:35.860
> 
> 标签：php, api, drupal, hook

**如何在首页的不同区域分配一个菜单块。我使用引导主题创建了一个子主题。我还创建了以下区域。需要：区域主菜单中的`Primary region` 主菜单`Footer Quick Menu1`**

```
regions[navigation]         = 'Navigation'
regions[header]             = 'Top Bar'
regions[highlighted]        = 'Highlighted'
regions[help]               = 'Help'
regions[content]            = 'Content'
regions[sidebar_first]      = 'Primary'
regions[sidebar_second]     = 'Secondary'
regions[footer]             = 'Footer'
regions[footer_first]       = 'Footer First'
regions[footer_second]      = 'Footer Second'
regions[footer_third]       = 'Footer Third'
regions[footer_fourth]      = 'Footer Fourth'
regions[footer quickmenu1]  = 'Footer Quick Menu1'
regions[footer quickmenu2]  = 'Footer Quick Menu2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:30:41.550

开箱即用的 Drupal 只能将一个块分配给一个区域。你会想看看一个贡献的模块。我建议看看优秀的[Context](http://drupal.org/project/context)模块。它将为您提供更高级的块管理工具，并且使用起来相对简单。

我在过去开发的大多数 Drupal 站点上都使用过这个模块。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T12:02:40.967

查看[MultiBlock](http://drupal.org/project/multiblock)模块，它允许您拥有同一块的多个实例。

从项目页面：

> MultiBlock 模块通过允许您创建现有块的多个块实例来解决此问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T12:36:23.833

虽然如果不可能在不同的地方分配一个块，但是您可以选择通过上述[Multiblock](http://drupal.org/project/multiblock)模块创建多个实例，或者另一种方法是根据您在 TPL 中的需要在多个位置打印区域并渲染输出，这也将做你的工作..

谢谢

# innodb - 如何将 innodb_autoinc_lock_mode 从 1 更改为 0？

> ID：14641847
> 
> 赞同：5
> 
> 时间：2013-02-01T07:48:57.170
> 
> 标签：innodb

如何`innodb_autoinc_lock_mode`在 MySQL 中将全局变量值 1 更改为 0？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-01T07:57:06.117

打开您的`my.cnf`并添加以下行：

```
innodb_autoinc_lock_mode = 0 
```

或者使用命令行参数启动mysql：

```
--innodb_autoinc_lock_mode = 0 
```

# c++ - 为什么函数只能在其他函数内部调用？

> ID：14641849
> 
> 赞同：-5
> 
> 时间：2013-02-01T07:49:07.303
> 
> 标签：c++, c

```
....
void foo()
{}
...
foo(); //why we can not call the function here?

int main(int argc, char** argv)
{} 
```

我知道你不能这样做，它会导致编译器错误。我想这可能与一些编译器理论有关，但是任何人都可以告诉我这是什么性质，还是只是一个任意规则？

当我尝试编译以下代码时：

```
#include<iostream>
using namespace std;   

void foo()
{
    cout<<"test"<<endl;
}   

foo();    

int main() {} 
```

我收到此错误消息。

> test.cpp:10:6: 错误: ';' 之前的预期构造函数、析构函数或类型转换 令牌

为什么我会收到此错误？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T09:53:55.467

你的假设是错误的。

```
#include <iostream>
int foo() {
  std::cout << "outside main" << std::endl;
  return 0;
}
int Global = foo();

int main() {
  std::cout << "intside main" << std::endl;
  return 0;
} 
```

现在正式规则：函数调用是一个表达式。表达式可能出现在语句中，语句可能**只**出现在函数中。但是表达式也可能出现在其他上下文中，例如`int Global`上面的全局对象的初始化。

# c - 使用 fgets 从文件中读取一行

> ID：14641851
> 
> 赞同：0
> 
> 时间：2013-02-01T07:49:18.073
> 
> 标签：c, file-io

什么应该是难以置信的简单让我难住了。我所做的只是编写一个`getLine`应该将一行读入缓冲区的方法。我从 开始将内存分配给缓冲区`10 bytes`，然后分配给`fgets`char 数组。这个想法是我一遍又一遍地尝试这个，将缓冲区的大小加倍，直到它得到整行。但是，我似乎观察到的是它读取了该行的一部分，然后在下一次尝试中继续在上次尝试时空间不足的地方，因此它给出了该行的最后一部分。任何关于错误的见解，我希望我`realloc`对缓冲区的记忆，将不胜感激。

```
char * mygetline( char **buffer,  FILE * infile )
{
    int buffSiz = 10;
    *buffer = calloc( buffSiz, 1 );
    do
    {
        char * result = fgets(*buffer, sizeof *buffer ,infile);
        if(result == NULL)
        {
            free(buffer);
            return NULL;
        }

        if(strchr(*buffer, '\n'))
            return *buffer;
        else
        {
            char *newBuf;
            buffSiz = buffSiz*2;
            newBuf = realloc(NULL, buffSiz);
            char *buffer = newBuf;
            printf("%d", buffSiz);
            printf("%s", *buffer);
        }
    } while (1);  // INFINITE LOOP - WE ONLY GET OUT BY RETURNING FROM WITHIN 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T07:51:51.183

有多个缺陷：

*   `sizeof *buffer`不做你想做的事，因为它是一个指针。你应该`buffSiz`改用

*   `char *buffer = newBuf;`您将新内存分配给局部变量，即`else`退出时消失的变量

*   您没有将缓冲区传递给`realloc`，您总是在传递`NULL`

*   你没有检查退货`realloc`

作为一个无耻的自我推销，[这是我在另一个答案中发布的一个功能](https://stackoverflow.com/a/8164021/714501)。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T07:53:02.987

这就是文件功能的工作方式。您必须在开始时获取文件位置，然后在每次尝试新读取时重置位置。

你可以用函数获取当前位置[`ftell`](http://en.cppreference.com/w/c/io/ftell)，然后用函数设置位置[`fseek`](http://en.cppreference.com/w/c/io/fseek)。

* * *

与其这样做（获取位置并不断重新定位文件位置），为什么不使用`realloc`重新分配传入缓冲区并将内容与读取函数读取下一部分的事实结合在一起的事实呢？在这种情况下，您需要一个指向下一个读取位置的指针，如果没有换行符，那么只需重新分配并推进指针？

像这样的东西：

```
char *readpos = *buffer;
size_t readsize = bufSize;

while (1)
{
    char *p = fgets(readpos, readsize, infile);
    if (!p)
        break;  /* Error */

    /* Search from the end, as there's where the newline should be */
    if (strrchr(p, '\n') != NULL)
        return *buffer;  /* Found the newline */

    /* Need to allocate more memory */
    bufSize += bufsize;
    *buffer = realloc(*buffer, bufSize);

    /* Set the pointer to next position to read into */
    readpos = *buffer + strlen(buffer);

    /* Loop takes case of trying again */
} 
```

注意：以上代码是在浏览器中编写的，未经测试，可能需要一些调整才能使其正常工作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-01T07:54:03.300

[realloc](http://www.cplusplus.com/reference/cstdlib/realloc/)期望需要重新分配的缓冲区作为其第一个参数。

```
realloc(*buffer, buffSiz); 
```

# django - 管道字符 URL 编码问题

> ID：14641856
> 
> 赞同：1
> 
> 时间：2013-02-01T07:49:45.003
> 
> 标签：django, django-templates, urlencode

到目前为止，我正在为 Django 模板中的链接顺利地使用 URL 编码来处理链接中的各种字符。但是，今天我遇到了管道 (|) 字符编码的问题。

当管道字符被编码时，我看到 URL 出现了`"%7C"`（它是正确的）。

这部分编码用于通过 HTTP GET 传递的参数，我将其显示为标题的一部分。但是，呈现的标题是`","`.

这是完整的循环：

1.  `A = "|x|"`
2.  Passed`{{A|urlencode}}`将给出 URL 短语为`"%7Cx%7C"`
3.  `"%7Cx%7C"`解码为标题`",x,"`。

是什么原因？

# cakephp - cakephp shell 任务文件中的 i18n 本地化

> ID：14641858
> 
> 赞同：-1
> 
> 时间：2013-02-01T07:49:48.217
> 
> 标签：cakephp, cakephp-2.1

我知道 Cakephp 可以使用 .pot 文件和各种语言 po 文件`__("string");`以及视图文件进行 i18n 本地化。

但是，我正在尝试通过使用 Shell 以 csv 格式导出数据。我可以知道如何将 i18n 部署到 shell 和任务文件中以操作数据转换吗？

非常感谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-03T11:21:25.597

请务必在此之前设置正确的区域设置和语言。请记住，shell 任务不会执行在诸如 之类的位置处理的逻辑`AppController::beforeFilter()`，因此如果这是您通常设置语言/区域设置的位置，则不会在 shell 任务中设置它。

此外，如果您依靠“自动”从浏览器接受语言中检测语言环境，这显然不起作用:)

此外，您需要在服务器端安装您希望使用的语言环境，因此根据您使用的服务器，您必须进行适当的检查以验证该语言环境确实存在于您的服务器上/machine 正在运行 Shell。

常规功能`__()`也应该在 Shell 内工作

# javascript - 使用 ajax 在 Rails 应用程序中预加载页面，然后将其显示在主布局中

> ID：14641859
> 
> 赞同：0
> 
> 时间：2013-02-01T07:50:07.107
> 
> 标签：javascript, ruby-on-rails, ajax, coffeescript

我有一个当前正在运行的简单应用程序，但我正在尝试将其转换为使用 ajax 以改善用户体验，以便每次用户单击导航中的链接时都不需要重新加载整个页面。它使用简单的页眉/正文/页脚方法，导航栏包含在页眉内。

所以目前，当我点击我的任何导航项目时，它会正确更改活动状态 CSS 突出显示，这是我使用 Coffeescript 完成的。

正如您将在下面的代码中看到的，我在导航中的第 4 个链接链接到“new_movie_path”。此页面使用 Nokogiri 抓取网站（例如 IMDB.com）并显示当前票房排名前 10 的电影，因此它可能需要一些时间才能完成，并且不会立即加载。这个模块单独工作得很好。

我想要做的是，当我单击该链接时，它不会刷新页面，而是使用 ajax 调用获取数据并在我当前布局的正文中显示结果。我已将***remote: true***元素添加到链接中，但经过多次试验和错误未能弄清楚其余部分。奖励：加载数据时会出现一个微调器。

我现有代码的片段：

**/app/views/layout/application.erb.html**

```
<body>
  <%= render 'shared/header' %>
  <div class="container first-contain" id="body-content">
    <%= yield %>
  </div>
</body> 
```

**/app/views/shared/_header.html.erb**

```
<ul class="nav">          
  <li class="active"><%= link_to "Home", "#" %></li>
  <li><%= link_to "About", "#" %></li>
  <li><%= link_to "Contact", "#" %></li>
  <li><%= link_to "New Movies", new_movie_path, remote: true %></li>
</ul> 
```

**/app/assets/javascripts/navigation.js.coffee**

```
$ ->
  changeTab = (e) ->
    e.preventDefault()
    $("ul.nav li.active").removeClass "active"
    $(@).addClass("active")
  $("ul.nav li").click changeTab 
```

非常感谢您对此事的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T10:25:08.007

您需要另一个文件来处理 AJAX 请求。假设电影链接将您带到“放映”操作，那么您将有一个`movies/show.js.erb`视图模板文件。

假设该动作爬取了 IMDB 并在其中填充了一系列电影名称`@movies`

您的视图文件可能如下所示：

```
<% 
  if @movies
    out = ''
    @movies.each do |m|
      out += m + '\n'
    end
%>
$("#body").html('<%= out %>');
<% end %> 
```

这假设您当然使用的是 jquery（并且您应该是）。本质上，您必须以一种或另一种方式使用 javascript 来替换 HTML 正文的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T07:58:09.103

`MoviesController#new`如您所说，ajax 请求应该将您发送到已经在工作的地方。您需要添加一个名为`new.js.erb`under的新视图，`app/views/movies`该视图将包含您要在请求完成后运行的 javascript，即

```
# movies_controller.rb
def new
  @movies = parse_movies_from_imdb
end

# new.js.erb
<% @movies.each do |movie| %>
  console.log(movie);
<% end %> 
```

# file - 尝试从 WP8 中的文件夹打开文件时出现 UnauthorizedAcessException

> ID：14641860
> 
> 赞同：0
> 
> 时间：2013-02-01T07:50:29.667
> 
> 标签：file, windows-phone-8, windows-phone, unauthorizedaccessexcepti

在我的应用程序中，我将位图转换为 png 并将其存储在文件夹内的文件中。当我尝试再次打开文件进行第二次写入时，我得到一个`UnauthorisedAccessException`说法`"Access is denied"`。单击保存按钮时，将调用以下函数。

```
private async void SaveClicked(object sender, RoutedEventArgs e)
        {
            WriteableBitmap wb = new WriteableBitmap(InkCanvas2, null);
            Image image = new Image();
            image.Height = 150;
            image.Width = 450;
            image.Source = wb;
            await SaveToStorage(wb, image);
            TransparentLayer.Visibility = System.Windows.Visibility.Collapsed;   

        } 
```

SaveToStorage 有以下代码

```
private async Task SaveToStorage(WriteableBitmap i, Image im)
        {
            try
            {    
                  var dataFolder = await local.CreateFolderAsync("Page", CreationCollisionOption.OpenIfExists);                    
                  using (var testpng = await dataFolder.OpenStreamForWriteAsync("testpng.png", CreationCollisionOption.ReplaceExisting)) 
// HITS EXCEPTION AND GOES TO CATCH BLOCK
                     {    
                       i.WritePNG(testpng);    
                       testpng.Flush();
                       testpng.Close();
                     }                    
            }  
            catch(Exception e)
            {
            string txt = e.Message;
            }
        } 
```

它保存第一次没有错误，第二次抛出异常。知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T12:07:13.783

我想通了！这显然是因为我在尝试打开它之前没有包含文件存在检查。

我已经重新编写了这样的代码

```
 IStorageFolder dataFolder = await local.CreateFolderAsync("Page", CreationCollisionOption.OpenIfExists);
            StorageFile Ink_File = null;
            //Using try catch to check if a file exists or not as there is no inbuilt function yet
            try
            {
                Ink_File = await dataFolder.GetFileAsync("testpng.png");
            }
            catch (FileNotFoundException)
            {
                return false;
            }

            try
            {
                if (Ink_File != null)
                {

                    using (var testpng = await Ink_File.OpenStreamForWriteAsync())
                    {

                        i.WritePNG(testpng);

                        testpng.Flush();
                        testpng.Close();
                        return true;
                    }
                }

            }
            catch(Exception e)
            {
                string txt = e.Message;
                return false;
            }
            return false; 
```

# ios - MBAlertView 无法调用“块：^{}”内的函数

> ID：14641862
> 
> 赞同：1
> 
> 时间：2013-02-01T07:50:44.830
> 
> 标签：ios, objective-c, uialertview

我正在尝试使用 cocoacontrol 中的 MBAlertView 制作一个确认框，询问用户是否真的要删除某些项目。这是我的代码：

```
MBAlertView *alert = [MBAlertView alertWithBody:@"Are you sure you want to delete this note? You cannot undo this." cancelTitle:@"Cancel" cancelBlock:nil];
    [alert addButtonWithText:@"Delete" type:MBAlertViewItemTypeDefault block:^{

        //Code to delete the item
        [TheDatabaseManager deleteBabyActivityWithID:currentActivity.babyActivitiesID];
        [delegate refresh:currentActivity];
    }];

    [alert addToDisplayQueue]; 
```

当用户点击删除按钮时，它总是崩溃。
我收到此错误消息`"EXC_BAD_ACCESS(code=2, address=0x0)"` 但如果我只是在块内放置另一个 MBAlertView 函数就可以了（即：在用户按下删除后显示另一个警报）

这是我的 .h 文件头：

```
#import "MBAlertView.h"
@interface ActivitiesPlayTableViewCell : UITableViewCell<UIApplicationDelegate>{

} 
```

我在表格视图单元格中使用它，有问题吗？

谁能帮我解决这个问题？我已经在网上寻找答案，但似乎找不到。

提前致谢。

# haskell - 哪些单子可以通过某个函子表示为 Free？

> ID：14641864
> 
> 赞同：27
> 
> 时间：2013-02-01T07:50:59.433
> 
> 标签：haskell, monads, functor, free-monad

的[文档`Free`](http://hackage.haskell.org/packages/archive/free/3.3.1/doc/html/Control-Monad-Free.html#t:Free)说：

> 许多常见的单子以自由单子的形式出现，
> 
> *   Given `data Empty a`,与monad`Free Empty`同构。`Identity`
> *   Free`Maybe`可用于对偏性 monad 建模，其中每一层代表运行计算一段时间。

**还有哪些其他 monad 可以用 来表达`Free`？**

我只能再想到一个：我相信`Free (Const e)`与`Either e`.

**编辑：哪些单子是*不可*表达的`Free`，为什么？**

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-01T11:23:21.450

几乎所有这些（直到涉及循环和 的问题`mfix`）但不是`Cont`.

考虑`State`单子

```
newtype State s a = State (s -> (a,s)) 
```

看起来一点也*不像*一个免费的单子......但考虑一下`State`你*如何使用它*

```
get :: m s --or equivalently (s -> m a) -> m a
set :: s -> m () --or (s,m a) -> m a
runState :: m a -> s -> (a,s) 
```

我们可以通过将操作列为构造函数来设计具有此接口的免费 monad

```
data StateF s a
  = Get (s -> a) | Set s a deriving Functor 
```

那么我们有

```
type State s a = Free (StateF s) a 
```

和

```
get = Impure (Get Pure)
set x = Impure (Set x (Pure ()) 
```

我们只需要一种使用它的方法

```
runState (Pure a) s = (a,s)
runState (Impure (Get f)) s = runState (f s) s
runState (Impure (Set s next)) _ = runState next s 
```

你可以用大多数单子来做这个构造。就像可能/偏颇性单子由以下定义

```
stop :: m a
maybe :: b -> (a -> b) -> m a -> b 
```

`m x`规则是，我们将每个以 some结尾的函数`x`视为函子中的构造函数，而其他函数是运行生成的自由 monad 的方式。在这种情况下

```
data StopF a = StopF deriving Functor

maybe _ f (Pure a)      = f a
maybe b _ (Impure Stop) = b 
```

为什么这么酷？有几件事

1.  免费的 monad 为您提供了一段*数据*，您可以将其视为 monadic 代码的 AST。您可以编写对这些数据进行操作的函数，这对 DSL 非常有用
2.  Functors compose，这意味着像这样分解你的 monad 使它们成为半可组合的。特别是，给定两个共享一个代数的函子（一个代数本质上只是一个函数`f a -> a`，`a`当`f`它是一个函子时），组合也有那个代数。

~~函子组合只是~~我们可以通过多种方式组合函子，其中大多数都保留了该代数。在这种情况下，我们想要的不是函子的*组合，* `(f (g (x)))`而是*函子 coproduct*。函子*添加*

```
data f :+: g a = Inl (f a) | Inr (g a) 

instance (Functor f, Functor g) => Functor (f :+: g) where
  fmap f (Inl x) = Inl (fmap f x)
  fmap f (Inr x) = Inr (fmap f x)

compAlg :: (f a -> a) -> (g a -> a) -> f :+: g a -> a
compAlg f _ (Inl x) = f x
compAlf _ g (Inr x) = g x 
```

自由单子也保存代数

```
freeAlg :: (f a -> a) -> Free f a -> a
freeAlg _ (Pure a) = a
freeAlg f (Impure x) = f $ fmap (freeAlg f) x 
```

在 Wouter Swierstra 的著名论文[Data Types A La Carte](http://www.staff.science.uu.nl/~swier004/Publications/DataTypesALaCarte.pdf)中，这被用来取得很好的效果。该论文中的一个简单示例是计算器。我们将对这篇文章采取一元化的方式。给定代数

```
class Calculator f where
 eval :: f Integer -> Integer 
```

我们可以想到各种实例

```
data Mult a = Mult a a deriving Functor
instance Calculator Mult where
  eval (Mult a b) = a*b

data Add a = Add a a deriving Functor
instance Calculator Add where
  eval (Add a b) = a+b

data Neg a = Neg a deriving Functor
instance Calculator Neg where
  eval (Neg a) = negate a

instance Calculator (Const Integer) where
  eval (Const a) = a

data Signum a = Signum a deriving Functor
instance Calculator Signum where
  eval (Signum a) = signum a

data Abs a = Abs a deriving Functor
instance Calculator Abs where
  eval (Abs a) = abs a 
```

和最重要的

```
instance (Calculator f, Calculator g) => Calculator (f :+: g) where
   eval = compAlg eval 
```

你可以定义*数字单子*

```
newtype Numerical a = Numerical (
        Free (Mult 
        :+: Add 
        :+: Neg 
        :+: Const Integer 
        :+: Signum
        :+: Abs) a deriving (Functor, Monad) 
```

然后你可以定义

```
 instance Num (Numerical a) 
```

这可能完全没用，但我觉得很酷。它确实可以让您定义其他内容，例如

```
 class Pretty f where
    pretty :: f String -> String

 instance Pretty Mult where
    pretty (Mult a b) = a ++ "*" ++ b 
```

其余的都类似。

这是一个有用的设计策略：列出你想让你的 monad 做的事情 ==> 为每个操作定义函子 ==> 找出它的一些代数应该是什么 ==> 为每个操作定义那些函子 ==> 让它快速地。

让它变快很难，但我们有一些技巧。技巧 1 是把你的自由单子包裹起来`Codensity`（“更快的按钮”），但是当这不起作用时，你想摆脱自由表示。记得当我们有

```
runState (Pure a) s = (a,s)
runState (Impure (Get f)) s = runState (f s) s
runState (Impure (Set s next)) _ = runState next s 
```

好吧，这是一个从结果类型`Free StateF a`到`s -> (a,s)`只使用结果类型的函数，因为我们对状态的定义似乎是合理的……但是我们如何定义操作呢？在这种情况下，您知道答案，但推导它的一种方法是根据 Conal Elliott 所谓的类型类态射进行思考。你要

```
runState (return a) = return a
runState (x >>= f) = (runState x) >>= (runState f)
runState (set x) = set x
runState get = get 
```

这很容易

```
runState (return a) = (Pure a) = \s -> (a,s)

runState (set x) 
   = runState (Impure (Set x (Pure ()))) 
   = \_ -> runState (Pure ()) x
   = \_ -> (\s -> (a,s)) x
   = \_ -> (a,x)

runState get
  = runState (Impure (Get Pure))
  = \s -> runState (Pure s) s
  = \s -> (s,s) 
```

这非常有帮助。以这种方式推导`>>=`可能很困难，我不会在此处包含它，但其中的其他定义正是您所期望的。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-07-23T18:32:52.780

要回答所说的问题，您在问题中没有提到的大多数熟悉的单子本身并不是自由单子。Philip JF 的回答暗示了如何将给定的 monad 与一个新的、自由的 monad 联系起来，但新的 monad 会“更大”：它比原来的 monad 具有更多不同的值。例如 real `State s`monad 满足`get >>= put = return ()`，但 free monad`StateF`不满足。作为一个自由单子，它不满足定义上的额外方程；这就是自由的概念。

我将证明`Reader r`,`Writer w`和`State s`monad 不是免费的，除非在`r`/ `w`/的特殊条件下`s`。

让我介绍一些术语。如果`m`是 monad，那么我们称任何类型`m a`的值为 ( `m`-) 动作。`m`如果一个 -action 等于`return x`for some ，我们称它为平凡`x`；否则我们称它为非平凡的。

如果`m = Free f`是函子上的任何自由单子`f`，则`m`承认单子同态`Maybe`。这是因为`Free`它的参数是函子的，`f`而函子类别中的终端对象在`Maybe = Free (Const ())`哪里。`Const ()`具体来说，这个同态可以写成

```
toMaybe :: Free f a -> Maybe a
toMaybe (Pure a) = Just a
toMaybe (Impure _) = Nothing 
```

因为`toMaybe`是 monad 同态，所以它特别满足`toMaybe (v >> w) = toMaybe v >> toMaybe w`任何`m`-action`v`和`w`. 现在观察`toMaybe`将琐碎`m`的 -actions 发送到琐碎的`Maybe`-actions 和`m`nontrivial -actions 到 nontrivial `Maybe`-action `Nothing`。现在`Maybe`有这样的性质，即`>>`以任何顺序对任何动作进行非平凡动作，都会产生非平凡动作（`Nothing >> w = v >> Nothing = Nothing`）；所以对于 也是如此`m`，因为`toMaybe`是一个保持（非）平凡的单子同态。

（如果您愿意，也可以直接从`>>`免费 monad 的公式中验证这一点。）

为了证明一个特定的 monad`m`不与任何自由 monad 同构，只需找到`m`-actions`v`和`w`至少一个`v`和`w`不是平凡的而是`v >> w`平凡的。

`Reader r`满足`v >> w = w`，所以我们只需要选择`w = return ()`和 任何非平凡的行动`v`，只要它`r`至少有两个值就存在（那么`ask`是非常量，即非平凡）。

对于`Writer w`，假设除了恒等元之外还有一个可逆元素`k :: w`。让它`kinv :: w`成为它的倒数。那么`tell k >> tell kinv = return ()`, 但是`tell k`和`tell kinv`是不平凡的。任何非平凡群（例如加法下的整数）都有这样的元素`k`。我假设形式的自由单子`Writer w`只是那些幺半群`w`本身是自由的，即`w = [a]`, `Writer w ~ Free ((,) a)`。

因为`State s`，类似地，如果允许任何具有逆的`s`非平凡自同构，则. 任何具有至少两个元素和可判定相等的类型都具有这样的自同构。`f :: s -> s``finv :: s -> s``modify f >> modify finv = return ()``s`

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-01-23T15:02:52.570

根据 Reid 回答中的见解，我写了一个证明，证明 list monad 在[发布到 haskell-cafe mailing list](https://mail.haskell.org/pipermail/haskell-cafe/2017-January/126026.html)时不是免费的：

回想一下，对于任何函子 f，我们可以构造 f 上的自由单子：

```
data Free f a = Pure a | Roll (f (Free f a)) 
```

直观地说，Free fa 是具有 a 型叶子的 f 形树的类型。连接操作只是将树嫁接在一起，不执行任何进一步的计算。在这篇文章中，表单（Roll _）的值应称为“非平凡”。

一些常见的单子实际上是一些函子上的自由单子：

*   Tree monad 是 functor 上的自由 monad `Pair`，其中 `data Pair a = MkPair a a`. 在这个例子中，对形状树的直觉是最强烈的。每个父节点都有一对子节点。

*   Maybe monad 是函子上的自由 monad `Unit`，其中 `data Unit a = MkUnit`. 在图形图片父节点有一个 `Unit`孩子，所以根本没有孩子。所以正好有两棵 `Unit`- 形的树：仅由叶子组成的树（对应于`Just _`）和由无子父节点组成的三棵树（对应于`Nothing`）。

*   `Identity`monad 是 functor 上的自由 monad ，`Void`其中`Void a`是没有构造函数的类型。

*   `Partiality`monad 是 free monad `Maybe`over 。

*   `Writer [r]`monad 是 functor 上的自由monad `(r,)`。在`(r,)`- 形树中，父节点用 type 值装饰，`r`并且只有一个子节点。遍历这样的路径会产生一个`r`'s 列表和一个 type 的叶值`a`，因此总共有一个 type 的值`([r],a) = Writer r a`。

    （特别`Free (r,) ()`是 同构于`[r]`。这个观察导致了列表单子是免费的。但这个声明是错误的，并且确实不是从观察中得出的。为了证明一个单子`m` 是免费的，一个人必须展示一个单子`forall a. m a -> Free f a` 某些函子的同构`f`。相比之下，展示 with 的同构`m a`既不 `Free (f a) ()`充分也不必需。）

更多的单子是自由单子的商。例如，`State s`是 的商`Free (StateF s)`，其中

```
data StateF s a = Put s a | Get (s -> a).
-- NB: This functor is itself a free functor over a type constructor
-- which is sometimes called StateI [1], rendering Free (StateF s) what
-- Oleg and Hiromi Ishii call a "freer monad" [2]. 
```

商由以下单子态射展示，它为自由单子的纯句法值提供语义。

```
run :: Free (StateF s) a -> State s a
run (Pure x)         = return x
run (Roll (Put s m)) = put s >> run m
run (Roll (Get k))   = get >>= run . k 
```

这种观点是 apfelmus [1] 的操作包的基础，也在 StackOverflow 线程 [3] 中讨论过。这是自由单子在编程环境中有用的主要原因。

那么，列表单子是免费单子吗？直观地说，它不是，因为 list monad（连接）的连接操作不仅将表达式嫁接在一起，而且将它们展平 [4]。

这是一个证明单子列表不是免费的。我正在记录它，因为我对证明感兴趣已经有一段时间了，但是搜索它并没有产生任何结果。不过，线程 [3] 和 [5] 很接近。

在任何函子上的自由单子中，将非平凡动作与任何函数绑定的结果总是非平凡的，即

```
(Roll _ >>= _) = Roll _ 
```

这可以直接从`(>>=)`自由单子的定义中检查，或者使用 Reid Barton 将单子态射利用到 Maybe 的技巧，请参阅 [3]。

如果列表 monad 在某个函子上与自由 monad 同构，则同构只会将单例列表映射`[x]`到表单的值，`(Pure _)`而将所有其他列表映射到非平凡值。这是因为 monad 同构必须与“return”通勤，并且`return x` 在`[x]`list monad 和`Pure x`free monad 中。

这两个事实相互矛盾，如以下示例所示：

```
do
    b <- [False,True]  -- not of the form (return _)
    if b
        then return 47
        else []
-- The result is the singleton list [47], so of the form (return _). 
```

在通过某个函子对自由单子应用假设的同构之后，我们会得到一个非平凡值（`[False,True]`同构下的图像）与某个函数的绑定会产生一个平凡值（的图像`[47]`，即`return 47`）。

干杯，英戈

[1] [http://projects.haskell.org/operational/Documentation.html](http://projects.haskell.org/operational/Documentation.html)

[2] [http://okmij.org/ftp/Haskell/extensible/more.pdf](http://okmij.org/ftp/Haskell/extensible/more.pdf)

[3][哪些单子可以通过某个函子表示为 Free？](https://stackoverflow.com/questions/14641864/what-monads-can-be-expressed-as-free-over-some-functor)

[4] [https://hackage.haskell.org/package/free-4.12.4/docs/Control-Monad-Free.html](https://hackage.haskell.org/package/free-4.12.4/docs/Control-Monad-Free.html)

[5] [https://www.reddit.com/r/haskell/comments/50zvyb/why_is_liststate_not_a_free_monad/](https://www.reddit.com/r/haskell/comments/50zvyb/why_is_liststate_not_a_free_monad/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-07T12:06:46.433

所有 monad 都可以表示为 Free Monad。它们的附加属性（如 MonadFix 和 Cont）可以这样被剥离，因为 Free Monad 不是 Free MonadFix 或 Free Cont。

一般的方法是用 liftM 定义 Functor 的 fmap，然后将 Free 包裹在该 Functor 周围。通过指定函数`return`和`join`（纯和不纯）必须如何映射到实际的 Monad，可以将生成的 Monad 简化为先前/实际的 Monad。

# database - 电子邮件数据库设计（模式）

> ID：14641865
> 
> 赞同：3
> 
> 时间：2013-02-01T07:51:04.713
> 
> 标签：database, email, relational-database, database-schema, bigdata

目前我们正在开发一个相当大的应用程序，它必须处理大量的记录。

这个想法是必须存储电子邮件（带有附件），并且通过 web-api 用户应该能够在他们存储的电子邮件中搜索。用户应该能够搜索（在他们自己已导出到数据库/存储中的消息中）至少以下项目：

*   从
*   到
*   学科
*   日期范围）
*   附件（仅限名称和类型）
*   消息内容
*   （可选）邮箱/文件夹结构

该应用程序应该能够处理大量用户和大量电子邮件（很容易从数百万增长到数十亿）。用户应该能够下载整个原始消息（带有附件），以便他们可以将其导入他们的电子邮件客户端。

我正在考虑将电子邮件索引到数据库中，并将带有唯一键的附件的完整电子邮件`package`存储到单独的存储中。通过这种方式，我应该尽可能降低数据库负载，从而尽可能快地搜索。

[我发现了几种用于处理此类](http://www.manitou-mail.org/screenshots/db-diagram.png)电子邮件的数据库模式。我找不到任何能够处理数亿甚至数十亿记录（电子邮件）的数据库。

这是保持简单、高效和快速的最有效方法，还是我忘记了什么？

// 编辑的想法是在亚马逊云上运行它（也许有任何相关的建议？）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T07:59:58.450

您可以将 mongoDB 数据库用于此数据量。这是 mongoDb 的详细信息。[http://www.mongodb.org/](http://www.mongodb.org/)

在 mongoDb 中，mysql 表称为集合，行称为文档。

Mongo 以基于 JSON 的对象格式存储数据。

在这里制作数据库架构的一种可能方法。

```
from : string
to : string
subject: string
date (range): datetime
attachments (names & types only) : Object Array
message contents : string
(optional) mailbox / folder structure: string

for example:
from: from@gmail.com
to: to@gmail.com
subject: "test subject"
date: "current date",
attachments: {
 [0]=>{
   names: "attachments1",
   types: "text"
},
[1]=>{
  names: "attachments2",
   types: "pdf"
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:00:33.493

您不想将此类信息存储在 RDBMS 中。相反，您想扩展类似[lucene](http://lucene.apache.org)的东西。对于电子邮件，[solr](http://lucene.apache.org/solr)有一个[电子邮件索引器](http://wiki.apache.org/solr/MailEntityProcessor)。希望有帮助...

# jquery - jQuery Mobile 脚本不会在外部页面加载时运行，如何？

> ID：14641867
> 
> 赞同：1
> 
> 时间：2013-02-01T07:51:21.073
> 
> 标签：jquery, cordova, jquery-mobile, load, page-init

我在 jQuery Mobile 和 Phonegap 应用程序中有 2 个页面，index.html 和 about.html

索引.html

```
<!DOCTYPE html> 
<html> 
<head> 
    <title>Page Title</title> 
    ... load jquery and jquery mobile...
</head> 

<body> 
    <div data-role="page" id="index">
    ...content goes here...
        <a href="about.html"  data-role="button">about</a>
    </div>
</body>
</html> 
```

而 about.html 只有页面数据角色

```
<div data-role="page" id="about">
<a href="index.html" data-rel="back" data-icon="back" data-transition="slide">Back</a>
...content goes here...

<a href="#dialog" id="form_dialog" data-rel="popup">qweqwe</a>
<div data-role="popup" id="dialog" data-overlay-theme="a" data-position-to="window">
    <div data-role="content" data-theme="c">
        <a href="#page" data-role="button" data-theme="c" >Ok</a>
    </div>
</div>

</div> 
```

我遇到的问题是，一旦我加载`about`页面，对话框和返回链接就不起作用。

如果我将弹出 html 放在其中`index`，它将起作用。

此外，当新页面加载时，样式就在那里，这意味着 jquery mobile 已加载。

关于这个问题的任何想法？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:51:46.247

从我所看到的你的代码工作得很好。

我已经从您的示例中创建了这些文件_

**索引.html**

```
<!DOCTYPE html>
<html>
  <head>
        <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
        <script src="http://www.dragan-gaic.info/js/jquery-1.8.2.min.js"/></script>    
        <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"/></script>
  </head>
  <body>
        <div data-role="page" id="index">
        ...content goes here...
            <a href="about.html"  data-role="button">about</a>
        </div>  
  </body>
</html> 
```

**about.html**

```
 <div data-role="page" id="about">
            <a href="index.html" data-rel="back" data-icon="back" data-transition="slide">Back</a>
            ...content goes here...

            <a href="#dialog" id="form_dialog" data-rel="popup">qweqwe</a>
            <div data-role="popup" id="dialog" data-overlay-theme="a" data-position-to="window">
                <div data-role="content" data-theme="c">
                    <a href="#page" data-role="button" data-theme="c" >Ok</a>
                </div>
            </div>              
    </div> 
```

上面的代码工作得很好。也许您对 jQuery Mobile 和 jQuery 版本不匹配有疑问？您的代码中唯一有问题的部分是这个后退按钮：

```
<a href="index.html" data-rel="back" data-icon="back" data-transition="slide">Back</a> 
```

不要使用带有 data-rel="back" 的 href 位置，data-rel="back" 具有更大的优先级，因此它不是错误。在弹出窗口关闭后，此后退按钮也无法正常工作。如果您在弹出窗口关闭后单击它，它将首先将您带回 about.html，然后单击第二次将您带回 index.html。这不是错误，弹出窗口算作另一个页面操作。

因此，如果您的后退按钮删除 data-rel="back"。这将修复它以在 about.html 页面上正常工作。

# php - 直接从（斑马）打印机上的浏览器打印贴纸/条形码标签

> ID：14641869
> 
> 赞同：4
> 
> 时间：2013-02-01T07:51:25.630
> 
> 标签：php, javascript, printing

我们必须遵循以下情况，对于我们的一个客户，我们正在寻找解决方案。他构建了一个 PHP 脚本，该脚本生成带有一些信息和条形码的标签，因此工作流程如下所述：用户输入一些数据（有些是从数据库中提取的数据，有些不是）

当用户单击打印标签时，会打开一个窗口并生成标签。所以现在代码（我猜javascript可以完成这项工作）必须完成这项工作。客户希望当用户单击 ok （或打印标签）时，标签将被打印并且窗口将关闭，而不会受到用户的任何干扰。

可能的解决方案： http: [//dymodevelopers.wordpress.com/2010/06/02/dymo-label-framework-javascript-library-samples-print-a-label/](http://dymodevelopers.wordpress.com/2010/06/02/dymo-label-framework-javascript-library-samples-print-a-label/)

所以实际上：

1.  脚本必须选择正确的打印机（不是默认的）
2.  脚本必须选择正确的格式（横向/纵向和标签大小）
3.  必须在没有用户干预的情况下打印。
4.  打印标签后窗口必须自动关闭。

谢谢您的帮助 ;）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T09:18:27.193

我正是这样做的，但是由于基于 Web 的东西的限制，如果不触发 java 或基于 activex 的子应用程序就无法控制 Windows 打印界面，我不得不将 Web 浏览器设置为打印到 dymo 打印机。

现在我强制使用 Firefox，这意味着我有一个自定义的 Firefox 安装包，它将边距设置为零，关闭页眉和页脚，选择正确的打印机和纸张和横向等（我只做了一个自定义包，因为我有 100 + pc 的配置，如果它只有几个，它需要 60 秒的更改工作来手动完成）。强制执行 firefox 的优点是 FF 允许您选择和设置与系统默认不同的打印机作为默认打印机。因此，在我的情况下，ff 设置为 dymo，系统打印机设置为 kyocera，因此在 Firefox 之外没有任何内容丢失/设置等。

至于生成条形码，我只是动态创建一个基本代码作为 jpg 在新的弹出窗口中显示 jpg 并使用一点 javascript 自动弹出打印框，因此用户所要做的就是单击确定。没有用户输入就不可能做到这一点！

不幸的是，没有简单的方法可以关闭窗口，因为系统打印后台处理程序/驱动程序没有返回事件陷阱返回到 Web 浏览器（出于明显的原因，它们相互沙箱化！）所以你能做的最好的就是实现一个定时xxx 秒后关闭。

但是，没有任何简单的方法可以在没有用户输入且不做出一些妥协的情况下做到这一点。现在，如果现金和时间对您来说不重要，我确实有一种完全自动化的适当方法等，但这是一项艰巨的工作

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-08T20:19:23.307

我们只使用一个 FTP（以前使用 Windows，现在使用冷融合内置的东西，但任何人都可以），然后您将斑马打印机的条形码定义发送到机器......任何可以打开这样一个通道并将代码发送到打印机将工作..所以如果你想用javascript来看看fireftp是如何做到的......然后使用它......或者你可以在ZPLII编码中发送信息......告诉它如何打印。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-20T08:22:03.930

由于您发布的链接讨论了驱动程序要求，我假设您对机器的软件有相当多的控制权？如果是这种情况并且您可以使用 Firefox，那么名为 JS Print Setup 的附加组件可能会起作用。

它基本上使网页能够直接打印到用户计算机上的打印机，而无需打印对话框。

我认为只要提供正确的尺寸，它就会很好地打印标签，但我还没有测试过。我确实在未连接打印机时对其进行了测试，并且确实将其发送到了该打印机的队列，因此肯定会告诉系统打印文件。

这是文档中的代码示例：（它似乎允许您设置边距和所有内容。）

```
<script>
// set portrait orientation
jsPrintSetup.setOption('orientation', jsPrintSetup.kPortraitOrientation);

// set top margins in millimeters
jsPrintSetup.setOption('marginTop', 15);
jsPrintSetup.setOption('marginBottom', 15);
jsPrintSetup.setOption('marginLeft', 20);
jsPrintSetup.setOption('marginRight', 10);

// set page header
jsPrintSetup.setOption('headerStrLeft', 'My custom header');
jsPrintSetup.setOption('headerStrCenter', '');
jsPrintSetup.setOption('headerStrRight', '&PT');

// set empty page footer
jsPrintSetup.setOption('footerStrLeft', '');
jsPrintSetup.setOption('footerStrCenter', '');
jsPrintSetup.setOption('footerStrRight', '');

// clears user preferences always silent print value
// to enable using 'printSilent' option
jsPrintSetup.clearSilentPrint();

// Suppress print dialog (for this context only)
jsPrintSetup.setOption('printSilent', 1);

// Do Print 
// When print is submitted it is executed asynchronous and
// script flow continues after print independently of completetion of print process! 
jsPrintSetup.print();

// next commands
</script> 
```

可以在 Mozilla 的附加站点上找到该附加组件：

[https://addons.mozilla.org/en-US/firefox/addon/js-print-setup/](https://addons.mozilla.org/en-US/firefox/addon/js-print-setup/)

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2014-01-23T10:01:54.570

我自己从未使用过，但 Seagull Scientific 的[BarTender](http://www.bartenderbarcodesoftware.com/label-software/software-downloads.aspx)似乎是直接打印条形码的好解决方案。它包括用于处理数据库（如 Oracle、MS SQL 和 .NET 平台）的嵌入式驱动程序，并提供用于从 PHP Web 应用程序打印的 Commander。通过 PHP 应用程序打印的教程在这里[http://cases.azoft.com/bartender-print-server/](http://cases.azoft.com/bartender-print-server/)

# r - R中每年的数据摘要

> ID：14641874
> 
> 赞同：4
> 
> 时间：2013-02-01T07:51:38.030
> 
> 标签：r, aggregate, time-series, summary

我有一个包含两列的数据。在一列中是日期，在另一列中是流量数据。

我能够将数据读取为日期和流量数据。我使用了以下代码：

```
creek <- read.csv("creek.csv")
library(ggplot2)
creek[1:10,]
colnames(creek) <- c("date","flow")
creek$date <- as.Date(creek$date, "%m/%d/%Y") 
```

我的数据的链接是[https://www.dropbox.com/s/eqpena3nk82x67e/creek.csv](https://www.dropbox.com/s/eqpena3nk82x67e/creek.csv)

现在，我想找到每年的摘要。我特别想知道平均值、中值、最大值等。

谢谢。

问候， 贾巴巴

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-02-01T07:59:09.777

## 碱基R

这里有两种来自基础 R 的方法。

第一次使用`cut`，`split`并`lapply`与`summary`。

```
creekFlowSummary <- lapply(split(creek, cut(creek$date, "1 year")), 
                           function(x) summary(x[2])) 
```

这将创建一个`list`. 您可以通过访问相应的列表索引或名称来查看不同年份的摘要。

```
creekFlowSummary[1]
# $`1999-01-01`
#       flow       
#  Min.   :0.3187  
#  1st Qu.:0.3965  
#  Median :0.4769  
#  Mean   :0.6366  
#  3rd Qu.:0.5885  
#  Max.   :7.2560  
# 
creekFlowSummary["2000-01-01"]
# $`2000-01-01`
#       flow       
#  Min.   :0.1370  
#  1st Qu.:0.1675  
#  Median :0.2081  
#  Mean   :0.2819  
#  3rd Qu.:0.2837  
#  Max.   :2.3800 
```

第二种用途`aggregate`：

```
aggregate(flow ~ cut(date, "1 year"), creek, summary)
#    cut(date, "1 year") flow.Min. flow.1st Qu. flow.Median flow.Mean flow.3rd Qu. flow.Max.
# 1           1999-01-01    0.3187       0.3965      0.4770    0.6366       0.5885    7.2560
# 2           2000-01-01    0.1370       0.1675      0.2081    0.2819       0.2837    2.3800
# 3           2001-01-01    0.1769       0.2062      0.2226    0.2950       0.2574    2.9220
# 4           2002-01-01    0.1279       0.1781      0.2119    0.5346       0.4966   14.3900
# 5           2003-01-01    0.3492       0.4761      0.7173    1.0350       1.0840   10.1500
# 6           2004-01-01    0.4178       0.5379      0.6524    0.9691       0.9020   11.7100
# 7           2005-01-01    0.4722       0.6094      0.7279    1.2340       1.0900   17.7200
# 8           2006-01-01    0.2651       0.3275      0.4282    0.5459       0.5758    3.3510
# 9           2007-01-01    0.2784       0.3557      0.4041    0.6331       0.6125    9.6290
# 10          2008-01-01    0.4131       0.5430      0.6477    0.8792       0.9540    4.5960
# 11          2009-01-01    0.3877       0.4572      0.5945    0.8465       0.8309    6.3830 
```

但请注意`aggregate`解决方案：*所有*摘要信息都是一个矩阵。查看`str`输出以了解我的意思。

## `xts`

当然，还有其他方法可以做到这一点。一种方法是使用`xts`包。

首先，将您的数据转换为`xts`：

```
library(xts)
creekx <- xts(creek$flow, order.by=creek$date) 
```

然后，使用`apply.yearly`您感兴趣的任何功能。

这是年平均值：

```
apply.yearly(creekx, mean)
#                 [,1]
# 1999-12-31 0.6365604
# 2000-12-31 0.2819057
# 2001-12-31 0.2950348
# 2002-12-31 0.5345666
# 2003-12-31 1.0351742
# 2004-12-31 0.9691180
# 2005-12-31 1.2338066
# 2006-12-31 0.5458652
# 2007-12-31 0.6331271
# 2008-12-31 0.8792396
# 2009-09-30 0.8465300 
```

以及每年的最大值：

```
apply.yearly(creekx, max)
#              [,1]
# 1999-12-31  7.256
# 2000-12-31  2.380
# 2001-12-31  2.922
# 2002-12-31 14.390
# 2003-12-31 10.150
# 2004-12-31 11.710
# 2005-12-31 17.720
# 2006-12-31  3.351
# 2007-12-31  9.629
# 2008-12-31  4.596
# 2009-09-30  6.383 
```

或者，像这样把它们放在一起：`apply.yearly(creekx, function(x) cbind(mean(x), sum(x), max(x)))`

## `data.table`

该`data.table`软件包也可能对您感兴趣，尤其是在您处理大量数据的情况下。这是一种`data.table`方法。关键是`as.IDate`在您读取数据时在“日期”列上使用：

```
library(data.table)
DT <- data.table(date = as.IDate(creek$date), creek[-1])
DT[, list(mean = mean(flow),
          tot = sum(flow),
          max = max(flow)), 
   by = year(date)]
#     year      mean      tot    max
#  1: 1999 0.6365604 104.3959  7.256
#  2: 2000 0.2819057 103.1775  2.380
#  3: 2001 0.2950348 107.6877  2.922
#  4: 2002 0.5345666 195.1168 14.390
#  5: 2003 1.0351742 377.8386 10.150
#  6: 2004 0.9691180 354.6972 11.710
#  7: 2005 1.2338066 450.3394 17.720
#  8: 2006 0.5458652 199.2408  3.351
#  9: 2007 0.6331271 231.0914  9.629
# 10: 2008 0.8792396 321.8017  4.596
# 11: 2009 0.8465300 231.1027  6.383 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-01T08:09:11.843

您可以使用@ananda 的代码创建一个带有年份的附加列，带有剪切的行。假设列名是年份，您可以使用 plyr 包中的 ddply ：

```
ddply(creek, .(year), summarise, mm = mean(flow), me = median(flow), ...etc) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-03-21T21:18:26.487

@Pauls 代码可以用 plyr 包的下一次迭代重写，即[dplyr 包](http://blog.rstudio.org/2014/01/17/introducing-dplyr/)。

1.  创建年份变量
2.  创建一个单独的数据框，按年份拆分原始数据框
3.  计算数据框中每年的汇总统计数据`summarize()`

```
creek <- mutate(creek, year = as.POSIXlt(date)$year + 1900)
years <- group_by(creek, year)
summarize(years, mm= mean(flow), 
          tot= sum(flow), 
          max = max(flow, na.rm = TRUE)) 
```

这是 Roger Peng 的一个[不错的 dplyr 教程](https://github.com/DataScienceSpecialization/courses/blob/master/03_GettingData/dplyr/dplyr.md)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-11-01T01:02:06.257

*Base R* 非常基本的响应，但您始终可以使用`summary()`和`subset()`来概述特定年份。这样做的好处是准备时间只需几秒钟。

`summary(subset(df,Year == '####'))`

# ip - 如何根据网络掩码前缀获取 IPv6 地址？

> ID：14641875
> 
> 赞同：0
> 
> 时间：2013-02-01T07:51:47.767
> 
> 标签：ip, ipv6, ipv4

我的 IPv6 知识非常有限，能帮我解决这个问题吗？众所周知，对于 IPv4，如果网络掩码为 25，则映射地址应为 255.255.255.128。算术代码如下：

```
public static String getNetmaskFromBits( int bits )
    {
        StringBuilder b = new StringBuilder( 15 );
        int tempBits = 0xFFFFFFFF;
        tempBits = tempBits << 32 - bits;
        b.append( ( tempBits & 0xFF000000 ) >>> 24 ).append( '.' );
        b.append( ( tempBits & 0x00FF0000 ) >>> 16 ).append( '.' );
        b.append( ( tempBits & 0x0000FF00 ) >>> 8 ).append( '.' );
        b.append( tempBits & 0x000000FF );
        return b.toString();
    } 
```

IPv6 怎么样？它可以是 128 位。如何将其映射到 IPv6 地址？代码应该是这样的：

```
public static String getIpv6NetmaskFromBits( int bits )
    {
        StringBuilder b = new StringBuilder( 15 );
        ...
        return b.toString();
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:45:46.323

您不再使用 IPv6 进行这种屏蔽。前缀始终使用 CIDR 表示法显示，例如`2001:db8::/32`.

如果您真的想这样做，那么最简单的方法是将前缀长度除以 4。从那么多`f`字符开始，二进制值是十六进制的`1111`。如果有余数，则根据余数添加下一个字符。如果余数是`1`则下一个字符是`8`，如果余数是`2`则下一个字符是`c`，如果余数是`3`则下一个字符是`e`。然后`0`根据需要添加尽可能多的 ' 以获得总共 32 个字符。`:`然后在每四个字符后添加一个分隔符。

如果您愿意，可以应用地址符号压缩:-)

例子：

答`/32`：

```
Divide: 32 / 4 = 8
8 * f = 'ffffffff'
Add 0's: 'ffffffff000000000000000000000000'
Add separators: 'ffff:ffff:0000:0000:0000:0000:0000:0000'
Compress notation: 'ffff:ffff::' 
```

答`/33`：

```
Divide: 33 / 4 = 8, remainder: 1
8 * f = 'ffffffff'
Add for remainder: 'ffffffff8'
Add 0's: 'ffffffff800000000000000000000000'
Add separators: 'ffff:ffff:8000:0000:0000:0000:0000:0000'
Compress notation: 'ffff:ffff:8000::' 
```

答`/34`：

```
Divide: 34 / 4 = 8, remainder: 2
8 * f = 'ffffffff'
Add for remainder: 'ffffffffc'
Add 0's: 'ffffffffc00000000000000000000000'
Add separators: 'ffff:ffff:c000:0000:0000:0000:0000:0000'
Compress notation: 'ffff:ffff:c000::' 
```

答`/35`：

```
Divide: 35 / 4 = 8, remainder: 3
8 * f = 'ffffffff'
Add for remainder: 'ffffffffe'
Add 0's: 'ffffffffe00000000000000000000000'
Add separators: 'ffff:ffff:e000:0000:0000:0000:0000:0000'
Compress notation: 'ffff:ffff:e000::' 
```

答`/36`：

```
Divide: 36 / 4 = 9
9 * f = 'fffffffff'
Add 0's: 'fffffffff00000000000000000000000'
Add separators: 'ffff:ffff:f000:0000:0000:0000:0000:0000'
Compress notation: 'ffff:ffff:f000::' 
```

等等。

# regex - Perl 搜索/替换 CLI 上的捕获组

> ID：14641877
> 
> 赞同：0
> 
> 时间：2013-02-01T07:51:54.513
> 
> 标签：regex, perl

PHP 的`strlen()`函数不支持 UTF-8，因此我想将每个用法`strlen()`与支持 UTF-8 的对应项交换：`mb_strlen()`. 但是，`mb_strlen()`需要一个额外的参数：

```
$length = strlen($someString);
$length = mb_strlen($someString, 'UTF-8'); 
```

如果没有第二个参数，一个简单的 Perl 正则表达式将处理交换：

```
$ find . -name '*' -print0 | xargs -0 perl -pi -e 's/strlen/mb_strlen/g' 
```

我尝试使用捕获组和反向引用，但 VIM 样式的语法要么不支持（在最近的 Ubuntu 上），要么我无法弄清楚。我已经尝试了几种变体但没有成功：

```
$ find . -name '*' -print0 | xargs -0 perl -pi -e 's/strlen\((\.*)\)/mb_strlen\($1, "UTF-8"\)/g' 
```

此外，可能有诸如`trim()`inside之类的函数，`strlen()`所以我必须使这个贪婪，但我不确定贪婪的运算符应该准确地去哪里。这个正则表达式应该怎么写？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:08:26.080

这比最初看起来要困难得多。您要么需要：

1.  正确解析表达式，包括表达式的多行版本。
2.  欺骗

我会去作弊。

大多数 strlen() 调用将非常简单，剩下的少数可以手动替换。而且您是在某种版本控制下执行此操作的，不是吗：

简单：strlen("foo"), strlen($bar)

```
# Match simple quoted strings - no embedded quotes
s/strlen\((["'][^"']*["'])\)/mb_strlen($1, 'UTF-8')/g
# Match simple variables - no method calls etc
s/strlen\((\$\w+)\)/mb_strlen($1, 'UTF-8')/g 
```

处理数组变量、函数和方法调用以及其他表达式变得更加复杂，但是看看在这两个基本替换之后还剩下多少。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:13:58.290

在一般情况下，使用简单的正则表达式无法解决您的问题。考虑这些例子：

```
if (strlen($var) > 0)

$total_length = strlen($thing1) + strlen($thing2);

strlen($var);   #Don't use trim() here because it was already trimmed.

some_other_function(strlen($foo) + 2); 
```

这些都不适用于您的正则表达式，因为`.*`会贪婪地捕获所有内容，直到该行中的最后一个右括号。正确执行此操作的唯一方法是检查平衡括号，这在正则表达式中并非易事（尽管在技术上可以使用 Perl 的扩展正则表达式功能，但这绝非易事）。

如果您认为不会遇到上述很多情况，那么只需使用其他建议的解决方案之一并检查错误。或者你可以这样做来捕捉所有没有括号的简单案例：

```
s/\bstrlen\(([^()]*)\)/mb_strlen($1, "UTF-8")/g 
```

（注意，我还添加`\b`以确保它从单词边界开始。这将阻止您双重替换已经存在的东西`mb_strlen`）

但是，有一个适用于*所有情况*的简单快速破解解决方案：创建您自己的名为 的 PHP 函数`my_mb_strlen`，或者`mb_strlen`在添加附加参数时调用的其他函数。然后，您可以只对函数名称执行更简单的搜索和替换，替换`strlen`为`my_mb_strlen`.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:00:29.107

```
find . -type f|xargs perl -pi -e 's/strlen\(([^\)]*)\)/mb_strlen($1,'UTF_8')/g' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-01T08:12:36.483

通过指定`\.*`，正则表达式将匹配 0 个或多个文字`'.'`s。

省略后尝试`\`：

```
s/strlen\((.*)\)/mb_strlen($1, "UTF-8")/g
           ^              ^           ^
           NO BACKSLASH   NO BACKSLASH NEEDED
                          AS THIS IS TREATED AS
                          A STRING AND NOT A REGEX 
```

此外，请先尝试在没有`-i`标志的情况下对其进行测试，以确保您对替换感到满意，否则您的文件将被原位修改。

# c++ - 当知道内存布局等细节时，如何优化自写的 blit 函数？

> ID：14641878
> 
> 赞同：1
> 
> 时间：2013-02-01T07:52:10.527
> 
> 标签：c++, memory, optimization

我最近有一个编程测试，我想获得一些关于我不完全确定的问题的信息。

第一个问题是写一个TransparentBlit函数，注释如下：

> 假设颜色数据存储在一个字节中，并且所有数据都以行优先顺序存储在内存的连续部分中。假设不会给出越界。

我做得很好，我想，但有一个后续问题：

> 前面的功能很大程度上取决于内存的格式。如果您了解有关内存布局等的更多详细信息，请解释如何更好地优化它。

我不知道该怎么回答，所以我有点胡说八道。有人可以教我我需要知道的东西，以便我将来更好地回答这样的问题吗？

# android - 获取 StreamCorruptedException

> ID：14641883
> 
> 赞同：1
> 
> 时间：2013-02-01T07:53:02.320
> 
> 标签：android, sockets, object, client, outputstream

我正在尝试流式传输`ObjectOutput`，但出现上述错误。

**代码：**

```
private void writelogin(int i, int j, int k, int c4, int l, int m, Socket sock) throws IOException, InterruptedException {
    ObjectOutputStream dos = new ObjectOutputStream((OutputStream)sock.getOutputStream());
    boolean data = true;
    int[] btw = new int[]{i,j, k, c4, l, m};

    do {
        ((ObjectOutput) dos).writeObject(btw);
            data=false;
        } while (data);
            dos.flush();
            dos.close();}} 
```

我不知道为什么。

例外是 outet via`System.out`不是 via `Errorlog`。

**我的服务器收到的内容：** AC ED（有时很多 00 和其他六边形“看似随机”的数字）

**我的 Stream 必须发送的内容：** 03 96 144 54 79 05

**我的服务器必须接收的内容：** 03 60 90 36 4F 05

允许十六进制数字是正确的，所以不是问题。

问题就在那里，因为我使用`ObjectOutputStream`and an `Array`，因为我使用`DataOutputStream`并通过它放置每个块本身`dos.writeByte(i);dos.writeByte(j);`工作正常。

想出了一些新的东西：我自己`ObjectOutputStream`发送了一个`AC ED 00 05`……有人知道如何避免这种情况吗？我什么都不送，但他送。

没关系，找到解决方法。发现甚至可以通过 Array 发送一个数组`DataOutputStream`，因此可以避免这种情况。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:13:28.080

在套接字的整个生命周期中，您必须在两端使用相同的 ObjectInputStream 和 ObjectOutputStream，而不是在每次需要其中一个时都创建一个或另一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:22:46.147

以下代码看起来很可疑：

```
((ObjectOutput) dos).writeObject(btw); 
```

简单尝试，

```
dos.writeObject(btw); 
```

你为什么要对 ObjectOutput 进行类型转换？

编辑：我认为您忘记`new`了数组初始化。

```
int[] btw = new int[]{i,j, k, c4, l, m}; 
```

# eclipse - Eclipse 在启动时死机

> ID：14641893
> 
> 赞同：5
> 
> 时间：2013-02-01T07:53:34.767
> 
> 标签：eclipse

今天早上开始工作，当我尝试启动 Eclipse (Helios) 时，我得到了工作区启动器显示，然后单击 OK - 启动过程终止。日志文件包含我在下面列出的堆栈跟踪。

我查看了工作区的 .metadata 目录，并且文件夹 org.eclipse.mylyn.internal.provisional.commons.ui 不存在。上周 Eclipse 工作时，我一直在备份，并且备份副本中也不存在该文件夹。

我如何让 Eclipse 现在启动？

```
!SESSION 2013-02-01 09:18:10.843 -----------------------------------------------
eclipse.buildId=M20110210-1200
java.version=1.7.0_11
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86, WS=win32, NL=en_GB
Framework arguments:  -product org.eclipse.epp.package.jee.product
Command-line arguments:  -os win32 -ws win32 -arch x86 -product     org.eclipse.epp.package.jee.product

!ENTRY org.eclipse.osgi 4 0 2013-02-01 09:18:20.906
!MESSAGE An error occurred while automatically activating bundle     org.eclipse.mylyn.tasks.ui (651).
!STACK 0
org.osgi.framework.BundleException: Exception in org.eclipse.mylyn.internal.tasks.ui.TasksUiPlugin.start() of bundle org.eclipse.mylyn.tasks.ui.
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:806)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:755)
at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:370)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:284)
at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:417)
at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:265)
at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:106)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:453)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:393)
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:469)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:422)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:410)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(Unknown Source)
at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:338)
at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:232)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1197)
at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:904)
at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
at org.eclipse.ui.internal.util.Util.safeLoadExecutableExtension(Util.java:879)
at org.eclipse.ui.internal.menus.DynamicToolBarContributionItem.createContributionItem(DynamicToolBarContributionItem.java:111)
at org.eclipse.ui.internal.menus.DynamicToolBarContributionItem.getContributionItem(DynamicToolBarContributionItem.java:104)
at org.eclipse.ui.internal.menus.DynamicToolBarContributionItem.createControl(DynamicToolBarContributionItem.java:206)
at org.eclipse.jface.action.ControlContribution.fill(ControlContribution.java:97)
at org.eclipse.jface.action.ToolBarManager.update(ToolBarManager.java:353)
at org.eclipse.jface.action.ToolBarManager.createControl(ToolBarManager.java:111)
at org.eclipse.ui.internal.menus.TrimContributionManager$ToolBarTrimProxy.dock(TrimContributionManager.java:88)
at org.eclipse.ui.internal.menus.TrimContributionManager.update(TrimContributionManager.java:265)
at org.eclipse.ui.internal.WorkbenchWindow.updateLayoutDataForContents(WorkbenchWindow.java:3836)
at org.eclipse.ui.internal.WorkbenchWindow.setLayoutDataForContents(WorkbenchWindow.java:3847)
at org.eclipse.ui.internal.WorkbenchWindow.createDefaultContents(WorkbenchWindow.java:1130)
at org.eclipse.ui.internal.WorkbenchWindowConfigurer.createDefaultContents(WorkbenchWindowConfigurer.java:623)
at org.eclipse.ui.application.WorkbenchWindowAdvisor.createWindowContents(WorkbenchWindowAdvisor.java:268)
at org.eclipse.ui.internal.WorkbenchWindow.createContents(WorkbenchWindow.java:1016)
at org.eclipse.jface.window.Window.create(Window.java:431)
at org.eclipse.ui.internal.Workbench$22.runWithException(Workbench.java:1208)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:134)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4041)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3660)
at org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:803)
at org.eclipse.ui.internal.Workbench$31.runWithException(Workbench.java:1567)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:134)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4041)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3660)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2548)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2438)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:671)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:664)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:115)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:620)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:575)
at org.eclipse.equinox.launcher.Main.run(Main.java:1408)
  Caused by: java.lang.NoClassDefFoundError: org/eclipse/mylyn/internal/provisional/commons/ui/CommonFonts
at org.eclipse.mylyn.internal.tasks.ui.TasksUiPlugin.start(TasksUiPlugin.java:550)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:783)
at java.security.AccessController.doPrivileged(Native Method)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:774)
... 69 more
 Caused by: java.lang.ClassNotFoundException: org.eclipse.mylyn.internal.provisional.commons.ui.CommonFonts
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:506)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:422)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:410)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 73 more
Root exception:
java.lang.NoClassDefFoundError: org/eclipse/mylyn/internal/provisional/commons/ui/CommonFonts
at org.eclipse.mylyn.internal.tasks.ui.TasksUiPlugin.start(TasksUiPlugin.java:550)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:783)
at java.security.AccessController.doPrivileged(Native Method)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:774)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:755)
at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:370)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:284)
at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:417)
at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:265)
at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:106)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:453)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:393)
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:469)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:422)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:410)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(Unknown Source)
at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:338)
at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:232)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1197)
at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:904)
at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
at org.eclipse.ui.internal.util.Util.safeLoadExecutableExtension(Util.java:879)
at org.eclipse.ui.internal.menus.DynamicToolBarContributionItem.createContributionItem(DynamicToolBarContributionItem.java:111)
at org.eclipse.ui.internal.menus.DynamicToolBarContributionItem.getContributionItem(DynamicToolBarContributionItem.java:104)
at org.eclipse.ui.internal.menus.DynamicToolBarContributionItem.createControl(DynamicToolBarContributionItem.java:206)
at org.eclipse.jface.action.ControlContribution.fill(ControlContribution.java:97)
at org.eclipse.jface.action.ToolBarManager.update(ToolBarManager.java:353)
at org.eclipse.jface.action.ToolBarManager.createControl(ToolBarManager.java:111)
at org.eclipse.ui.internal.menus.TrimContributionManager$ToolBarTrimProxy.dock(TrimContributionManager.java:88)
at org.eclipse.ui.internal.menus.TrimContributionManager.update(TrimContributionManager.java:265)
at org.eclipse.ui.internal.WorkbenchWindow.updateLayoutDataForContents(WorkbenchWindow.java:3836)
at org.eclipse.ui.internal.WorkbenchWindow.setLayoutDataForContents(WorkbenchWindow.java:3847)
at org.eclipse.ui.internal.WorkbenchWindow.createDefaultContents(WorkbenchWindow.java:1130)
at org.eclipse.ui.internal.WorkbenchWindowConfigurer.createDefaultContents(WorkbenchWindowConfigurer.java:623)
at org.eclipse.ui.application.WorkbenchWindowAdvisor.createWindowContents(WorkbenchWindowAdvisor.java:268)
at org.eclipse.ui.internal.WorkbenchWindow.createContents(WorkbenchWindow.java:1016)
at org.eclipse.jface.window.Window.create(Window.java:431)
at org.eclipse.ui.internal.Workbench$22.runWithException(Workbench.java:1208)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:134)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4041)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3660)
at org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:803)
at org.eclipse.ui.internal.Workbench$31.runWithException(Workbench.java:1567)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:134)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4041)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3660)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2548)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2438)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:671)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:664)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:115)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:620)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:575)
at org.eclipse.equinox.launcher.Main.run(Main.java:1408)
Caused by: java.lang.ClassNotFoundException: org.eclipse.mylyn.internal.provisional.commons.ui.CommonFonts
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:506)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:422)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:410)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 73 more

!ENTRY org.eclipse.ui 4 4 2013-02-01 09:18:20.906
!MESSAGE Class load Failure: 'org.eclipse.mylyn.internal.tasks.ui.TaskTrimWidget'

!ENTRY org.eclipse.ui 4 0 2013-02-01 09:18:20.921
!MESSAGE Class load Failure: 'org.eclipse.mylyn.internal.tasks.ui.TaskTrimWidget'
!STACK 1
org.eclipse.core.runtime.CoreException: Plug-in org.eclipse.mylyn.tasks.ui was unable to load class org.eclipse.mylyn.internal.tasks.ui.TaskTrimWidget.
at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.throwException(RegistryStrategyOSGI.java:194)
at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:176)
at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:904)
at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
at org.eclipse.ui.internal.util.Util.safeLoadExecutableExtension(Util.java:879)
at org.eclipse.ui.internal.menus.DynamicToolBarContributionItem.createContributionItem(DynamicToolBarContributionItem.java:111)
at org.eclipse.ui.internal.menus.DynamicToolBarContributionItem.getContributionItem(DynamicToolBarContributionItem.java:104)
at org.eclipse.ui.internal.menus.DynamicToolBarContributionItem.createControl(DynamicToolBarContributionItem.java:206)
at org.eclipse.jface.action.ControlContribution.fill(ControlContribution.java:97)
at org.eclipse.jface.action.ToolBarManager.update(ToolBarManager.java:353)
at org.eclipse.jface.action.ToolBarManager.createControl(ToolBarManager.java:111)
at org.eclipse.ui.internal.menus.TrimContributionManager$ToolBarTrimProxy.dock(TrimContributionManager.java:88)
at org.eclipse.ui.internal.menus.TrimContributionManager.update(TrimContributionManager.java:265)
at org.eclipse.ui.internal.WorkbenchWindow.updateLayoutDataForContents(WorkbenchWindow.java:3836)
at org.eclipse.ui.internal.WorkbenchWindow.setLayoutDataForContents(WorkbenchWindow.java:3847)
at org.eclipse.ui.internal.WorkbenchWindow.createDefaultContents(WorkbenchWindow.java:1130)
at org.eclipse.ui.internal.WorkbenchWindowConfigurer.createDefaultContents(WorkbenchWindowConfigurer.java:623)
at org.eclipse.ui.application.WorkbenchWindowAdvisor.createWindowContents(WorkbenchWindowAdvisor.java:268)
at org.eclipse.ui.internal.WorkbenchWindow.createContents(WorkbenchWindow.java:1016)
at org.eclipse.jface.window.Window.create(Window.java:431)
at org.eclipse.ui.internal.Workbench$22.runWithException(Workbench.java:1208)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:134)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4041)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3660)
at org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:803)
at org.eclipse.ui.internal.Workbench$31.runWithException(Workbench.java:1567)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:134)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4041)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3660)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2548)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2438)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:671)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:664)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:115)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:620)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:575)
at org.eclipse.equinox.launcher.Main.run(Main.java:1408)
Caused by: org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.mylyn.tasks.ui (651).
at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:121)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:453)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:393)
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:469)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:422)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:410)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(Unknown Source)
at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:338)
at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:232)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1197)
at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
... 51 more
Caused by: org.osgi.framework.BundleException: Exception in org.eclipse.mylyn.internal.tasks.ui.TasksUiPlugin.start() of bundle org.eclipse.mylyn.tasks.ui.
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:806)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.start(BundleContextImpl.java:755)
at org.eclipse.osgi.framework.internal.core.BundleHost.startWorker(BundleHost.java:370)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.start(AbstractBundle.java:284)
at org.eclipse.osgi.framework.util.SecureAction.start(SecureAction.java:417)
at org.eclipse.osgi.internal.loader.BundleLoader.setLazyTrigger(BundleLoader.java:265)
at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:106)
... 63 more
Caused by: java.lang.NoClassDefFoundError: org/eclipse/mylyn/internal/provisional/commons/ui/CommonFonts
at org.eclipse.mylyn.internal.tasks.ui.TasksUiPlugin.start(TasksUiPlugin.java:550)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl$1.run(BundleContextImpl.java:783)
at java.security.AccessController.doPrivileged(Native Method)
at org.eclipse.osgi.framework.internal.core.BundleContextImpl.startActivator(BundleContextImpl.java:774)
... 69 more
Caused by: java.lang.ClassNotFoundException: org.eclipse.mylyn.internal.provisional.commons.ui.CommonFonts
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:506)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:422)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:410)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(Unknown Source)
... 73 more
!SUBENTRY 1 org.eclipse.equinox.registry 4 1 2013-02-01 09:18:20.921
!MESSAGE Plug-in org.eclipse.mylyn.tasks.ui was unable to load class org.eclipse.mylyn.internal.tasks.ui.TaskTrimWidget.
!STACK 0  org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter$TerminatingClassNotFoundException: An error occurred while automatically activating bundle org.eclipse.mylyn.tasks.ui (651).
at org.eclipse.core.runtime.internal.adaptor.EclipseLazyStarter.postFindLocalClass(EclipseLazyStarter.java:121)
at org.eclipse.osgi.baseadaptor.loader.ClasspathManager.findLocalClass(ClasspathManager.java:453)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.findLocalClass(DefaultClassLoader.java:216)
at org.eclipse.osgi.internal.loader.BundleLoader.findLocalClass(BundleLoader.java:393)
at org.eclipse.osgi.internal.loader.BundleLoader.findClassInternal(BundleLoader.java:469)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:422)
at org.eclipse.osgi.internal.loader.BundleLoader.findClass(BundleLoader.java:410)
at org.eclipse.osgi.internal.baseadaptor.DefaultClassLoader.loadClass(DefaultClassLoader.java:107)
at java.lang.ClassLoader.loadClass(Unknown Source)
at org.eclipse.osgi.internal.loader.BundleLoader.loadClass(BundleLoader.java:338)
at org.eclipse.osgi.framework.internal.core.BundleHost.loadClass(BundleHost.java:232)
at org.eclipse.osgi.framework.internal.core.AbstractBundle.loadClass(AbstractBundle.java:1197)
at org.eclipse.core.internal.registry.osgi.RegistryStrategyOSGI.createExecutableExtension(RegistryStrategyOSGI.java:174)
at org.eclipse.core.internal.registry.ExtensionRegistry.createExecutableExtension(ExtensionRegistry.java:904)
at org.eclipse.core.internal.registry.ConfigurationElement.createExecutableExtension(ConfigurationElement.java:243)
at org.eclipse.core.internal.registry.ConfigurationElementHandle.createExecutableExtension(ConfigurationElementHandle.java:55)
at org.eclipse.ui.internal.util.Util.safeLoadExecutableExtension(Util.java:879)
at org.eclipse.ui.internal.menus.DynamicToolBarContributionItem.createContributionItem(DynamicToolBarContributionItem.java:111)
at org.eclipse.ui.internal.menus.DynamicToolBarContributionItem.getContributionItem(DynamicToolBarContributionItem.java:104)
at org.eclipse.ui.internal.menus.DynamicToolBarContributionItem.createControl(DynamicToolBarContributionItem.java:206)
at org.eclipse.jface.action.ControlContribution.fill(ControlContribution.java:97)
at org.eclipse.jface.action.ToolBarManager.update(ToolBarManager.java:353)
at org.eclipse.jface.action.ToolBarManager.createControl(ToolBarManager.java:111)
at org.eclipse.ui.internal.menus.TrimContributionManager$ToolBarTrimProxy.dock(TrimContributionManager.java:88)
at org.eclipse.ui.internal.menus.TrimContributionManager.update(TrimContributionManager.java:265)
at org.eclipse.ui.internal.WorkbenchWindow.updateLayoutDataForContents(WorkbenchWindow.java:3836)
at org.eclipse.ui.internal.WorkbenchWindow.setLayoutDataForContents(WorkbenchWindow.java:3847)
at org.eclipse.ui.internal.WorkbenchWindow.createDefaultContents(WorkbenchWindow.java:1130)
at org.eclipse.ui.internal.WorkbenchWindowConfigurer.createDefaultContents(WorkbenchWindowConfigurer.java:623)
at org.eclipse.ui.application.WorkbenchWindowAdvisor.createWindowContents(WorkbenchWindowAdvisor.java:268)
at org.eclipse.ui.internal.WorkbenchWindow.createContents(WorkbenchWindow.java:1016)
at org.eclipse.jface.window.Window.create(Window.java:431)
at org.eclipse.ui.internal.Workbench$22.runWithException(Workbench.java:1208)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:134)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4041)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3660)
at org.eclipse.ui.application.WorkbenchAdvisor.openWindows(WorkbenchAdvisor.java:803)
at org.eclipse.ui.internal.Workbench$31.runWithException(Workbench.java:1567)
at org.eclipse.ui.internal.StartupThreading$StartupRunnable.run(StartupThreading.java:31)
at org.eclipse.swt.widgets.RunnableLock.run(RunnableLock.java:35)
at org.eclipse.swt.widgets.Synchronizer.runAsyncMessages(Synchronizer.java:134)
at org.eclipse.swt.widgets.Display.runAsyncMessages(Display.java:4041)
at org.eclipse.swt.widgets.Display.readAndDispatch(Display.java:3660)
at org.eclipse.ui.internal.Workbench.runUI(Workbench.java:2548)
at org.eclipse.ui.internal.Workbench.access$4(Workbench.java:2438)
at org.eclipse.ui.internal.Workbench$7.run(Workbench.java:671)
at org.eclipse.core.databinding.observable.Realm.runWithDefault(Realm.java:332)
at org.eclipse.ui.internal.Workbench.createAndRunWorkbench(Workbench.java:664)
at org.eclipse.ui.PlatformUI.createAndRunWorkbench(PlatformUI.java:149)
at org.eclipse.ui.internal.ide.application.IDEApplication.start(IDEApplication.java:115)
at org.eclipse.equinox.internal.app.EclipseAppHandle.run(EclipseAppHandle.java:196)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.runApplication(EclipseAppLauncher.java:110)
at org.eclipse.core.runtime.internal.adaptor.EclipseAppLauncher.start(EclipseAppLauncher.java:79)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:369)
at org.eclipse.core.runtime.adaptor.EclipseStarter.run(EclipseStarter.java:179)
at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
at sun.reflect.NativeMethodAccessorImpl.invoke(Unknown Source)
at sun.reflect.DelegatingMethodAccessorImpl.invoke(Unknown Source)
at java.lang.reflect.Method.invoke(Unknown Source)
at org.eclipse.equinox.launcher.Main.invokeFramework(Main.java:620)
at org.eclipse.equinox.launcher.Main.basicRun(Main.java:575)
at org.eclipse.equinox.launcher.Main.run(Main.java:1408) 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-02-01T07:57:35.427

您是否尝试使用 eclipse -clean (eclipse.exe -clean) ？

另一点，也许你的工作区已经损坏，你可以重命名它，强制eclipse创建一个新的。之后，您可以从旧项目导入项目。

# vba - 从多页表单中获取活动控件的名称和值

> ID：14641894
> 
> 赞同：3
> 
> 时间：2013-02-01T07:53:36.337
> 
> 标签：vba, excel

我已经在网上搜索了几个月的解决方案，但没有任何成功。我在`Excel 2010`一个`UserForm`多页中创建。我正在尝试编写一个获取`activecontrol`名称和值的函数。

到现在为止，我成功地使用这个命令获得了控件的名称， `Me.MultiPage1.Pages(Me.MultiPage1.Value).ActiveControl.Name`但我唯一能做到的就是将它设置为一个字符串作为变量。我仍然需要得到它的价值。

我真的很感激任何帮助。勒索

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:22:09.030

您可以使用以下代码访问 MultiPage 控件中最后一个活动控件的值：

```
Me.MultiPage1(Me.MultiPage1.Value).ActiveControl.Value

```

但是，我不确定每种控件都有一个`.Value`属性，因此请确保 Multipage 中的所有不同控件都有一个 - 或者包含一个适当的错误处理程序！

# magento - Mage::dispatchEvent 重置旧值

> ID：14641897
> 
> 赞同：1
> 
> 时间：2013-02-01T07:53:49.277
> 
> 标签：magento

我使用“admin_permissions_role_prepare_save”事件来更新角色详细信息。更新正在发生。新值已存储。但更新后，rolecontrollers saveRoleAction 的 dispatch 事件恢复到旧值。

```
Mage::dispatchEvent(
                'admin_permissions_role_prepare_save',
                array('object' => $role, 'request' => $this->getRequest())
            ); 
```

此请求数据具有旧值。如何更新请求数据以获得新值？

编辑：这是我的观察员。

```
public function saveStoreInformation($observer) { 
        $role_id =  Mage::app()->getRequest()->getPost('role_id');
        $store_ids_array = Mage::app()->getRequest()->getPost('gws_store_groups');
        $store_ids = implode(',',$store_ids_array);
        if(in_array(0,$store_ids_array))
        { $gws_is_all = 1; } else {$gws_is_all = 0;}
        //$model = Mage::getModel('admin/role');

        if($role_id) {
            $data = array('gws_is_all'=>$gws_is_all,'gws_store_groups'=>"$store_ids");
            $model = Mage::getModel('admin/role')->setData($data);
            try {
                    $model->setId($role_id)
                          ->save();
                    echo "Data updated successfully.";
                } catch (Exception $e){
                    echo $e->getMessage();
            }        
        } 
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:31:20.920

您没有按预期使用观察者。您应该做的是更改提供的对象：

```
$observer->getObject()->setData(...); 
```

这导致以下过程：

*   事件通过参数发送`$role`
*   你改变`$role`了你的观察者
*   `$role`得救

而您当前的解决方案执行以下操作：

*   事件通过参数发送`$role`
*   你忽略参数，自己加载角色并保存
*   未**更改** `$role`的对象被保存并覆盖您自己的更改

# google-maps - 使用 Google Maps API（方向）获取中途停留城镇

> ID：14641899
> 
> 赞同：13
> 
> 时间：2013-02-01T07:53:54.087
> 
> 标签：google-maps, google-maps-api-3, directions

我是 Google Maps API (3.0) 的新手。我想根据对 Maps API 的方向查询来获得中途停留城市，但到目前为止还没有找到关于这个特定主题的任何文档。

[https://developers.google.com/maps/documentation/javascript/directions#Steps](https://developers.google.com/maps/documentation/javascript/directions#Steps)

我正在根据地址 A 和地址 B 获得方向。我想知道用户在旅途中会经过的每个城市。我找到了一些关于航路点（中途停留）的信息，但这些信息与每个停靠点或街道变化有关。到目前为止我找不到任何核心对象...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-12-09T06:48:44.473

我会做什么：

1.  使用[RouteBoxer](https://github.com/denissellu/routeboxer)查找包含路线的边界（相当小的边界）
2.  使用 Places API 在这些范围内返回city_hall、local_government_office 或图书馆[类型](https://developers.google.com/places/documentation/supported_types)的 Places（也许稍微调整一下该选择）。
3.  从这些响应中取出城镇数据，对它们进行排序以获得独特的结果，然后使用它们。

[概念证明](http://www.geocodezip.com/v3_SO_RouteBoxerPlaces_configurableC.html?type=city_hall&from=mission%20viejo,%20CA&dist=2&to=los%20angeles,CA&name=&submit=)，将需要调整您正在搜索的位置、距离和区域的类型。根据路线的用途和长度，最好在沿道路的某个固定间隔（100 米或 1000 米）的点上使用反向地理编码器，这样可能会更快并且不会用完 Places API配额。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-08-25T11:35:52.050

我为此找到了替代解决方案。我们可以使用 [Here Maps Android Guide](https://developer.here.com/documentation/android-starter/dev_guide/topics/routing-starter.html)或 [Here Maps API request](https://developer.here.com/documentation/routing/topics/request-a-simple-route.html)使用两个点获取主要城市。我使用了 API 请求

它在 API Response 中返回主要城市的经度和纬度。从这些数据中，我们可以使用 Google API 的[地理编码](https://stackoverflow.com/questions/43862079/how-to-get-city-name-using-latitude-and-longitude-in-android)器来查找城市名称

这里的地图 API 请求 URL 是这样的：

```
https://route.api.here.com/routing/7.2/calculateroute.json ?app_id={YOUR_APP_ID} &app_code={YOUR_APP_CODE} &waypoint0=geo!52.5,13.4 &waypoint1=geo!52.5,13.45 &mode=fastest;car;traffic:disabled 
```

响应：（route[0].leg[0].maneuver 包含主要的 ponts）

```
{
"response": {
    "metaInfo": {
        "timestamp": "2019-08-25T11:32:54Z",
        "mapVersion": "8.30.99.156",
        "moduleVersion": "7.2.201933-4954",
        "interfaceVersion": "2.6.66",
        "availableMapVersion": [
            "8.30.99.156"
        ]
    },
    "route": [
        {
            "waypoint": [
                {
                    "linkId": "+842950268",
                    "mappedPosition": {
                        "latitude": 7.6005434,
                        "longitude": 80.0758708
                    },
                    "originalPosition": {
                        "latitude": 7.5999999,
                        "longitude": 80.0769999
                    },
                    "type": "stopOver",
                    "spot": 0.4595336,
                    "sideOfStreet": "neither",
                    "mappedRoadName": "Kuliyapitiya-Hettipola Road",
                    "label": "Kuliyapitiya-Hettipola Road - B243",
                    "shapeIndex": 0,
                    "source": "user"
                },
                {
                    "linkId": "-843192951",
                    "mappedPosition": {
                        "latitude": 7.4799508,
                        "longitude": 80.3700687
                    },
                    "originalPosition": {
                        "latitude": 7.48,
                        "longitude": 80.3699999
                    },
                    "type": "stopOver",
                    "spot": 0.3064516,
                    "sideOfStreet": "right",
                    "mappedRoadName": "",
                    "label": "",
                    "shapeIndex": 313,
                    "source": "user"
                }
            ],
            "mode": {
                "type": "fastest",
                "transportModes": [
                    "car"
                ],
                "trafficMode": "disabled",
                "feature": []
            },
            "leg": [
                {
                    "start": {
                        "linkId": "+842950268",
                        "mappedPosition": {
                            "latitude": 7.6005434,
                            "longitude": 80.0758708
                        },
                        "originalPosition": {
                            "latitude": 7.5999999,
                            "longitude": 80.0769999
                        },
                        "type": "stopOver",
                        "spot": 0.4595336,
                        "sideOfStreet": "neither",
                        "mappedRoadName": "Kuliyapitiya-Hettipola Road",
                        "label": "Kuliyapitiya-Hettipola Road - B243",
                        "shapeIndex": 0,
                        "source": "user"
                    },
                    "end": {
                        "linkId": "-843192951",
                        "mappedPosition": {
                            "latitude": 7.4799508,
                            "longitude": 80.3700687
                        },
                        "originalPosition": {
                            "latitude": 7.48,
                            "longitude": 80.3699999
                        },
                        "type": "stopOver",
                        "spot": 0.3064516,
                        "sideOfStreet": "right",
                        "mappedRoadName": "",
                        "label": "",
                        "shapeIndex": 313,
                        "source": "user"
                    },
                    "length": 40642,
                    "travelTime": 2159,
                    "maneuver": [
                        {
                            "position": {
                                "latitude": 7.6005434,
                                "longitude": 80.0758708
                            },
                            "instruction": "Head <span class=\"heading\">northeast</span> on <span class=\"street\">Kuliyapitiya-Hettipola Road</span> <span class=\"number\">(B243)</span>. <span class=\"distance-description\">Go for <span class=\"length\">604 m</span>.</span>",
                            "travelTime": 52,
                            "length": 604,
                            "id": "M1",
                            "_type": "PrivateTransportManeuverType"
                        },
                        {
                            "position": {
                                "latitude": 7.6054466,
                                "longitude": 80.0782084
                            },
                            "instruction": "Turn <span class=\"direction\">right</span> onto <span class=\"next-street\">Wariyapola-Hettipola Road</span> <span class=\"number\">(B079)</span>. <span class=\"distance-description\">Go for <span class=\"length\">18.9 km</span>.</span>",
                            "travelTime": 910,
                            "length": 18937,
                            "id": "M2",
                            "_type": "PrivateTransportManeuverType"
                        },
                        {
                            "position": {
                                "latitude": 7.6197481,
                                "longitude": 80.2457178
                            },
                            "instruction": "Turn <span class=\"direction\">left</span> onto <span class=\"next-street\">Wariyapola-Hettipola Road</span> <span class=\"number\">(B079)</span>. <span class=\"distance-description\">Go for <span class=\"length\">25 m</span>.</span>",
                            "travelTime": 5,
                            "length": 25,
                            "id": "M3",
                            "_type": "PrivateTransportManeuverType"
                        },
                        {
                            "position": {
                                "latitude": 7.6198554,
                                "longitude": 80.2459216
                            },
                            "instruction": "Take the <span class=\"exit\">3rd exit</span> from Wariyapola Roundabout roundabout onto <span class=\"next-street\">Kurunegala-Padeniya Road</span> <span class=\"number\">(AA010)</span>. <span class=\"distance-description\">Go for <span class=\"length\">19.6 km</span>.</span>",
                            "travelTime": 1039,
                            "length": 19569,
                            "id": "M4",
                            "_type": "PrivateTransportManeuverType"
                        },
                        {
                            "position": {
                                "latitude": 7.4887598,
                                "longitude": 80.3620291
                            },
                            "instruction": "Continue straight ahead. <span class=\"distance-description\">Go for <span class=\"length\">364 m</span>.</span>",
                            "travelTime": 36,
                            "length": 364,
                            "id": "M5",
                            "_type": "PrivateTransportManeuverType"
                        },
                        {
                            "position": {
                                "latitude": 7.4871719,
                                "longitude": 80.3648937
                            },
                            "instruction": "Take the <span class=\"exit\">2nd exit</span> from Kurunegala Roundabout roundabout. <span class=\"distance-description\">Go for <span class=\"length\">192 m</span>.</span>",
                            "travelTime": 21,
                            "length": 192,
                            "id": "M6",
                            "_type": "PrivateTransportManeuverType"
                        },
                        {
                            "position": {
                                "latitude": 7.486732,
                                "longitude": 80.3665352
                            },
                            "instruction": "Take the <span class=\"exit\">3rd exit</span> from A10 roundabout onto <span class=\"next-street\">Kandy Road</span> <span class=\"number\">(A10)</span>. <span class=\"distance-description\">Go for <span class=\"length\">880 m</span>.</span>",
                            "travelTime": 88,
                            "length": 880,
                            "id": "M7",
                            "_type": "PrivateTransportManeuverType"
                        },
                        {
                            "position": {
                                "latitude": 7.4804449,
                                "longitude": 80.3704727
                            },
                            "instruction": "Turn <span class=\"direction\">right</span>. <span class=\"distance-description\">Go for <span class=\"length\">71 m</span>.</span>",
                            "travelTime": 8,
                            "length": 71,
                            "id": "M8",
                            "_type": "PrivateTransportManeuverType"
                        },
                        {
                            "position": {
                                "latitude": 7.4799508,
                                "longitude": 80.3700687
                            },
                            "instruction": "Arrive at your destination on the right.",
                            "travelTime": 0,
                            "length": 0,
                            "id": "M9",
                            "_type": "PrivateTransportManeuverType"
                        }
                    ]
                }
            ],
            "summary": {
                "distance": 40642,
                "trafficTime": 2159,
                "baseTime": 2159,
                "flags": [
                    "builtUpArea"
                ],
                "text": "The trip takes <span class=\"length\">40.6 km</span> and <span class=\"time\">36 mins</span>.",
                "travelTime": 2159,
                "_type": "RouteSummaryType"
            }
        }
    ],
    "language": "en-us"
} 
```

}

# apache - apache前端减慢文件上传

> ID：14641902
> 
> 赞同：1
> 
> 时间：2013-02-01T07:54:20.553
> 
> 标签：apache, tomcat, file-upload, load-balancing, mod-jk

以下是我的设置。我有一个 apache 服务器和 mod_jk 模块，用于负载平衡 2 个启用粘性会话的 tomcat 服务器。文件直接上传到每个tomcat比通过apache上传要快得多。我们发现 MPM 模块会对大线程产生一些影响。所以我们也在使用它。现在只有一个线程和大文件，它比直接访问 tomcat 服务器要慢得多。[00:33 对 4:30]。

Apache 2.4.3 版 Mod_jk 1.2.15 版 Tomcat 6

## httpd.conf

```
LoadModule jk_module modules/mod_jk.so

JkWorkersFile          conf/workers.properties
JkLogFile              logs/jk.log
JkLogLevel             debug

JkMount                /*            router
JkMount                /jk_status    status

<Location /server-status>
SetHandler server-status
Allow from 192.168.188.143
</Location>

<IfModule unixd_module>
User daemon
Group daemon
</IfModule> 
```

## worker.properties

```
worker.list=router,status

worker.worker1.port=8009
worker.worker1.host=192.168.188.128
worker.worker1.type=ajp13
worker.worker1.lbfactor=1
worker.worker1.sticky_session=1

worker.worker2.port=8009
worker.worker2.host=192.168.188.129
worker.worker2.type=ajp13
worker.worker2.lbfactor=1
worker.worker2.sticky_session=1

worker.router.type=lb
worker.router.balanced_workers=worker1,worker2

worker.status.type=status 
```

请帮忙！！！我错过了一些重要的设置吗？请告诉我

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T06:49:39.973

我们对缓慢的 apache 文件上传操作做了一些进一步的调试，得到了缓慢的根本原因，如下所述：

我们使用 mod_jk 连接器让 apache 与 tomcat 服务器对话，它有两个问题：

1.  Mod_jk 连接器日志级别默认设置为调试，这使得所有上传的数据字节也写入 jk.log 文件，因此导致速度缓慢，在更正后时间下降到 1 分 30 秒，而 4 分钟我们最初观察到的 30 秒。更好但还不够！
2.  经过进一步调试，我们发现 mod_jk 后面的连接器协议，即 AJP 具有最大数据包大小 64 KB 的固有限制，这低于我们服务器端可以消耗的 16 MB，我猜在看到测试设置的配置后。所以 mod_jk 端的管道很窄，因此影响了端到端的上传速度。

在此之后，我们使用 http 连接器（通过[mod_proxy](https://httpd.apache.org/docs/2.4/mod/mod_proxy.html)）和负载均衡器（通过[mod_proxy_balancer](https://httpd.apache.org/docs/2.4/mod/mod_proxy_balancer.html) ）进行了一些测试，并取得了很好的效果

# python - django：save_model 多个模型

> ID：14641906
> 
> 赞同：0
> 
> 时间：2013-02-01T07:54:36.440
> 
> 标签：python, django, modeladmin

我已经在 django 中将一个属性设置为 list_editable ... 然后我在几个项目上编辑这个属性并单击保存。一切都很好，但我想知道 save_model() 之前的功能是什么。

我想在 ModelAdmin 类中做这样的事情（虽然我找不到像 save_models() 这样的函数）

```
def save_models(queryset):
    print "Here comes something I need to do"
    for model in queryset:
        model.save()
    print "Another thing I need to do comes here" 
```

那么是否有一个类似“save_models()”的函数在点击保存并保存多个对象时触发？我真的需要覆盖它。

# android - 文本视图冲突的android

> ID：14641910
> 
> 赞同：1
> 
> 时间：2013-02-01T07:55:00.610
> 
> 标签：android

我的布局xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >
<RelativeLayout 
android:layout_width="match_parent"
android:layout_height="0dip"
android:layout_weight="3"
 >
<ImageView
    android:id="@+id/photo_user"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/user_pic"
    android:layout_gravity="top"
    android:contentDescription="@string/image_descrip"
    />
<TextView 
    android:id="@+id/text_user"
    android:layout_alignRight="@+id/photo_user"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:text="@string/user_info"
    android:textColor="#FFFFFF"
    android:background="#AA000000"/>
   </RelativeLayout>
  <RelativeLayout 
  android:layout_width="match_parent"
  android:layout_height="0dip"
  android:layout_weight="7"
  android:background="#000000"
   >
<RelativeLayout
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
  android:paddingTop="10dp"
  android:paddingBottom="10dp"
    >
   <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:paddingLeft="15dp"
        android:text="@string/plan_text0"
        />
    <TextView 
        android:id="@+id/tv_viewplan"
        android:layout_width="wrap_content"
        android:paddingLeft="100dp"
        android:textSize="12sp"
        android:layout_height="wrap_content"
        android:text="@string/plan_text"
        />
    <TextView 
        android:id="@+id/tv_plan1"
        android:paddingLeft="215dp"
        android:textSize="12sp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/plan_text1"
        />
  </RelativeLayout>
<View
    android:id="@+id/place_view1"
   android:layout_width="fill_parent"
   android:layout_height="2dp"
   android:layout_marginTop="40dp"
   android:background="#5C5C5C"
    />
 <RelativeLayout
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
   android:layout_below="@+id/place_view1"
   android:paddingTop="10dp"
   android:paddingBottom="10dp"
    >
   <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:paddingLeft="15dp"
        android:text="@string/services_text0"
        />
    <TextView 
        android:id="@+id/tv_service"
        android:layout_width="wrap_content"
        android:paddingLeft="100dp"
        android:textSize="12sp"
        android:layout_height="wrap_content"
        android:text="@string/services_text"
        />
    <TextView 
        android:id="@+id/tv_service1"
        android:layout_below="@+id/tv_plan1"
        android:textSize="12sp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:paddingLeft="215dp"
        android:text="@string/services_text1"
        />
  </RelativeLayout>
   <View
   android:id="@+id/place_view2"
   android:layout_width="fill_parent"
   android:layout_height="2dp"
   android:layout_marginTop="80dp"
   android:background="#5C5C5C"
    />
   <RelativeLayout
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
   android:layout_below="@+id/place_view2"
   android:paddingTop="10dp"
   android:paddingBottom="10dp"
    >
   <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:paddingLeft="15dp"
        android:text="@string/bill_text0"
        />
    <TextView 
        android:id="@+id/tv_bill"
        android:layout_width="wrap_content"
        android:paddingLeft="100dp"
        android:textSize="12sp"
        android:layout_height="wrap_content"
        android:text="@string/bill_text"
        />
    <TextView 
        android:id="@+id/tv_bill1"
        android:layout_below="@+id/tv_service1"
        android:paddingLeft="215dp"
         android:textSize="12sp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/bill_text1"
        />
  </RelativeLayout>
 <View
   android:id="@+id/place_view3"
   android:layout_width="fill_parent"
   android:layout_height="2dp"
   android:layout_marginTop="120dp"
   android:background="#5C5C5C"
    />
   <RelativeLayout
  android:layout_width="fill_parent"
  android:layout_height="wrap_content"
   android:layout_below="@+id/place_view3"
   android:paddingTop="10dp"
   android:paddingBottom="10dp"
    >
   <TextView 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:paddingLeft="15dp"
        android:text="@string/request_text0"
        />
    <TextView 
        android:id="@+id/tv_request"
        android:layout_width="wrap_content"
        android:paddingLeft="100dp"
        android:textSize="12sp"
        android:layout_height="wrap_content"
        android:text="@string/request_text"
        />
    <TextView 
        android:id="@+id/tv_request1"
        android:paddingLeft="215dp"
         android:textSize="12sp"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="@string/request_text1"
        />
  </RelativeLayout>
  <View
   android:id="@+id/place_view4"
   android:layout_width="fill_parent"
   android:layout_height="2dp"
   android:layout_marginTop="160dp"
    />
  <RelativeLayout 
      android:layout_height="wrap_content"
      android:layout_width="match_parent"
      android:layout_below="@+id/place_view4"
      >
      <ExpandableListView 
          android:id="@+id/ex_notifi"
          android:layout_width="fill_parent"
          android:layout_height="wrap_content"
          ></ExpandableListView>

  </RelativeLayout>

   </RelativeLayout>
</LinearLayout> 
```

在我的夏洛克片段类中，我对所有文本视图都有相同的侦听器

```
 getView().findViewById(R.id.tv_viewplan).setOnClickListener(this);
  getView().findViewById(R.id.tv_plan1).setOnClickListener(this);
  getView().findViewById(R.id.tv_service).setOnClickListener(this);
  getView().findViewById(R.id.tv_service1).setOnClickListener(this);
  getView().findViewById(R.id.tv_bill).setOnClickListener(this);
  getView().findViewById(R.id.tv_bill1).setOnClickListener(this);
  getView().findViewById(R.id.tv_request).setOnClickListener(this);
  getView().findViewById(R.id.tv_request1).setOnClickListener(this); 
```

在我的 onclick 监听器中

```
 switch(v.getId())
  {
    case R.id.tv_viewplan:
        System.out.println("Plan ids"  +v.getId());
        title= "My Plan"; tag = "viewplan_dialog";
        Utilsdialog dialog_vwplan = new Utilsdialog(context, R.layout.child, title, tag);
        dialog_vwplan.show(fm, tag);
         break;
    case R.id.tv_plan1:
     System.out.println("Plan ids"  +v.getId());
        title= "Change plan"; tag = "changeplan_dialog";
        Utilsdialog dialog_chgplan = new Utilsdialog(context, R.layout.child,title, tag);
        dialog_chgplan.show(fm, tag);
         break;
    case R.id.tv_service:
        Toast.makeText(getActivity(), "SELECTED VIEW SERVICE", Toast.LENGTH_LONG).show();
         break;

    case R.id.tv_service1:
        Toast.makeText(getActivity(), "SELECTED ADD SERVICE", Toast.LENGTH_LONG).show();
         break;
    case R.id.tv_request:

        Toast.makeText(getActivity(), "SELECTED TRACK REQUEST", Toast.LENGTH_LONG).show();
         break;
    case R.id.tv_request1:

        Toast.makeText(getActivity(), "SELECTED ADD REQUEST", Toast.LENGTH_LONG).show();
         break;
    case R.id.tv_bill:

        Toast.makeText(getActivity(), "SELECTED VIEW BILL", Toast.LENGTH_LONG).show();
         break;
    case R.id.tv_bill1:

        Toast.makeText(getActivity(), "SELECTED PAY BILL", Toast.LENGTH_LONG).show();
         break;

     } 
```

问题在于 tv_viewplan 和 tv_plan 生成了相同的 id，并且 tv_service 和 tv_servive1 具有相同的 id。所以 switch 调用不正确的块。我不知道这怎么可能....请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:01:47.543

具有不同 ID 名称的不同视图有时不能具有相同的 ID。永远和永远。检查每个视图都有不同的 ID 名称。每个视图都有替代方法检查标签，您应该为每个视图分配唯一标签。但从逻辑上讲，第一个应该起作用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:02:25.883

```
您需要清理项目。
如果您使用的是 eclipse，请在 Menu 中打开 Project 选项，请在 Project 的 Submenu 中找到 clean 选项。
选择您的项目，然后单击弹出窗口中的确定按钮。
如果您这样做，那么您可以为您的项目获取新的 ID。
如果您在清理项目后有任何问题，请告诉我。
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:10:33.040

清理并重建您的项目并确保每个文本视图上没有重复的 id

如果不起作用，请尝试执行此操作

你为什么不直接删除所有 `getView().findViewById(R.id.tv_viewplan).setOnClickListener(this);`

并添加 `android:onclick="clickText"` 每个可点击的 textView

然后添加这个功能

```
 public void clickText(View v){
 //put your switch case here...
 } 
```

# sql - 用sql查找不同的数据

> ID：14641911
> 
> 赞同：1
> 
> 时间：2013-02-01T07:55:03.220
> 
> 标签：sql, tsql

我有一张看起来像的桌子

```
╔══════╦══════╦═══════╦═══════╦═══════╦═══════════════════╗
║ Key1 ║ Key2 ║ Data1 ║ Data2 ║ Data3 ║ DataNotImportant4 ║
╠══════╬══════╬═══════╬═══════╬═══════╬═══════════════════╣
║ Foo  ║ Bar  ║     1 ║     2 ║     a ║                 4 ║
║ Foo  ║ Bar  ║     1 ║     2 ║     a ║                 5 ║
║ Foo  ║ Bar  ║     1 ║     2 ║     b ║                 4 ║
║ Foo  ║ Test ║     1 ║     2 ║     f ║                 4 ║
╚══════╩══════╩═══════╩═══════╩═══════╩═══════════════════╝ 
```

现在我将选择 Key1 和 Key2 的组合，其中 Data1 Data2 Data3 不同，所以在这里我会得到 Foo Bar 作为结果，因为 Data3 在所有行中都不相同。我怎样才能在没有光标的情况下归档它？数据库是 SQL Server 2008

目前我使用游标。我使用 group by 选择所有组合键并遍历列表，并使用从光标获得的键在我的字段上通过 select 进行分组。问题是当有太多行时它变得非常慢。所以我寻找一个基于集合的解决方案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T07:59:37.927

使用`group by`表达式并依赖于这样一个事实：如果一列中有不同的值，则必须暗示该列中的最小值和最大值不同：

```
declare @t table (key1 varchar(5),key2 varchar(5),Data1 int,Data2 int,Data3 int)
insert into @t (key1,key2,Data1,Data2,Data3) values
('Foo','Bar',1,2,3),
('Foo','Bar',1,2,3),
('Foo','Bar',1,2,4),
('Foo','Test',1,2,3)

select key1,key2 from @t
group by key1,key2
having
    MIN(data1)!=MAX(data1) or
    MIN(data2)!=MAX(data2) or
    MIN(data3)!=MAX(data3) 
```

结果：

```
key1  key2
----- -----
Foo   Bar 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:04:47.970

您可以`Group By`在多个列上使用。

```
SELECT Key1=Min(f.key1), 
       Key2=Min(f.key2), 
       f.data1, 
       f.data2, 
       f.data3, 
       DataNotImportant4=Min(datanotimportant4) 
FROM   foo f 
GROUP  BY f.data1, 
          f.data2, 
          f.data3 
HAVING Count(*) > 1 
```

[**演示**](http://sqlfiddle.com/#!6/648f8/1/0)

# windows-phone-7 - 无法从 Windows Phone 设备获取 pushchannel uri

> ID：14641912
> 
> 赞同：1
> 
> 时间：2013-02-01T07:55:10.680
> 
> 标签：windows-phone-7, windows-phone

任何Windows Phone开发人员可以帮助我吗？我正在开发一个 Windows Phone 应用程序。当我尝试获取推送通道 uri 时，它适用于模拟器以及设备，但突然我今天遇到了问题。我使用的是相同的代码，但它对于模拟器和`pushchannel_uri`更新的事件触发工作正常，但是当我尝试从 Windows 手机获取推送通道 uri 时，它没有得到 uri，并且`pushchannel_uri`更新的事件根本没有触发。

我正在使用`Nokia Lumia 510`并且我已在应用程序中心注册为开发人员。

我的代码是

```
public class Cloud2Device
{
    ICloud2DeviceListener eventListener;
    Popup popup=new Popup();

    public Cloud2Device(ICloud2DeviceListener listener)
    {

        Loading loading=new Loading();
        popup.Child = loading;
        popup.IsOpen = true;

        eventListener = listener;
        /// Holds the push channel that is created or found.
        HttpNotificationChannel pushChannel = HttpNotificationChannel.Find(Constants.NOTIFICATION_CHANNEL_NAME);

        // If the channel was not found, then create a new connection to the push service.
        if (pushChannel == null)
        {
            pushChannel = new HttpNotificationChannel(Constants.NOTIFICATION_CHANNEL_NAME);
            // Register for all the events before attempting to open the channel.
            pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(PushChannel_ChannelUriUpdated);
            pushChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(PushChannel_ErrorOccurred);

            // Register for this notification only if you need to receive the notifications while your application is running.
            pushChannel.ShellToastNotificationReceived += new EventHandler<NotificationEventArgs>(PushChannel_ShellToastNotificationReceived);

            pushChannel.HttpNotificationReceived += new EventHandler<HttpNotificationEventArgs>(PushChannel_HttpNotificationReceived); // Ra

            pushChannel.Open();

            // Bind this new channel for toast events.
            pushChannel.BindToShellToast();
        }
        else
        {
            // The channel was already open, so just register for all the events.
            pushChannel.ChannelUriUpdated += new EventHandler<NotificationChannelUriEventArgs>(PushChannel_ChannelUriUpdated);
            pushChannel.ErrorOccurred += new EventHandler<NotificationChannelErrorEventArgs>(PushChannel_ErrorOccurred);

            // Register for this notification only if you need to receive the notifications while your application is running.
            pushChannel.HttpNotificationReceived += new EventHandler<HttpNotificationEventArgs>(PushChannel_HttpNotificationReceived); // Ra

            pushChannel.ShellToastNotificationReceived += new EventHandler<NotificationEventArgs>(PushChannel_ShellToastNotificationReceived);

            // Thread.Sleep(5000);
            // Display the URI for testing purposes. Normally, the URI would be passed back to your web service at this point.
            System.Diagnostics.Debug.WriteLine(pushChannel.ChannelUri.ToString());
            // MessageBox.Show(String.Format("Channel Uri is {0}",pushChannel.ChannelUri.ToString()));
            string Id = pushChannel.ChannelUri.ToString();
            saveCloudDeviceID(Id);
        }
    }

    public void PushChannel_ChannelUriUpdated(object sender, NotificationChannelUriEventArgs e)
    {
        Deployment.Current.Dispatcher.BeginInvoke(() =>
               {
                   // Display the new URI for testing purposes.   Normally, the URI would be passed back to your web service at this point.
                   System.Diagnostics.Debug.WriteLine(e.ChannelUri.ToString());
                   //MessageBox.Show(String.Format("Channel Uri is {0}",  e.ChannelUri.ToString()));
               });

        string Id = e.ChannelUri.ToString();
        saveCloudDeviceID(Id);
    }

    private void PushChannel_ErrorOccurred(object sender, NotificationChannelErrorEventArgs e)
    {
        // Error handling logic for your particular application would be here.
        Deployment.Current.Dispatcher.BeginInvoke(() =>
             MessageBox.Show(String.Format("A push notification {0} error occurred.  {1} ({2}) {3}",
                 e.ErrorType, e.Message, e.ErrorCode, e.ErrorAdditionalData))
                 );
    }
    public static string message = "";
    private void PushChannel_HttpNotificationReceived(object sender, HttpNotificationEventArgs e)
    {

        using (System.IO.StreamReader reader = new System.IO.StreamReader(e.Notification.Body))
        {
            message = reader.ReadToEnd();
        }

        string jsonString = message;

        using (MemoryStream jsonStream = new MemoryStream(Encoding.Unicode.GetBytes(jsonString)))
        {
            DataContractJsonSerializer serializer = new DataContractJsonSerializer(typeof(ResponseData<LocationResponse>));
            ResponseData<LocationResponse> array = serializer.ReadObject(jsonStream) as ResponseData<LocationResponse>;
        }

        //Deployment.Current.Dispatcher.BeginInvoke(() =>
        //    MessageBox.Show(String.Format("Received Notification {0}:\n{1}",
        //        DateTime.Now.ToShortTimeString(), "notification recieved"))
        //);

    }

    private void PushChannel_ShellToastNotificationReceived(object sender, NotificationEventArgs e)
    {
        StringBuilder message = new StringBuilder();
        string relativeUri = string.Empty;
        message.AppendFormat("Received Toast {0}:\n", DateTime.Now.ToShortTimeString());

        // Parse out the information that was part of the message.
        foreach (string key in e.Collection.Keys)
        {
            message.AppendFormat("{0}: {1}\n", key, e.Collection [ key ]);

            if (string.Compare(
                key,
                "wp:Param",
                System.Globalization.CultureInfo.InvariantCulture,
                System.Globalization.CompareOptions.IgnoreCase) == 0)
            {
                relativeUri = e.Collection [ key ];
            }
        }

        // Display a dialog of all the fields in the toast.
        Deployment.Current.Dispatcher.BeginInvoke(() => MessageBox.Show(message.ToString()));

        //ToastPrompt toast = new ToastPrompt();            
    }

    private void saveCloudDeviceID(string deviceID)
    {
        popup.IsOpen=false;
        WDIsolatedStorageSettings.add(Constants.CLOUD_DEVICE_ID, deviceID);
        WDIsolatedStorageSettings.add(Constants.IS_DEVICE_REGISTERED, true);
        eventListener.DeviceRegistrationCompleted(deviceID);
    }
} 
```

}

谢谢！

# jquery-ui - 我如何将文本和文本框对齐在另一个下方。帮助我，我还必须在页面的 excat 中心对齐，而不是在顶部中心

> ID：14641913
> 
> 赞同：-2
> 
> 时间：2013-02-01T07:55:16.750
> 
> 标签：jquery-ui, jquery, jquery-mobile

有谁知道如何将 div 对齐在页面中间而不是 top-center 。必须有白色背景。请在这方面帮助我。帮助我实现这一目标

我的 div 是

```
<div data-role="fieldcontain" > 
```

用户名：

```
<div id="b" style="display: inline-block">
<label for="password"><font size="1" color="black">Password : </font></label>
<input type="password" name="password" id="pwd" data-mini="true" value="" style="width: 45%;float: right"/></div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:08:45.140

假设这`YourDivClass` 是一个位于 center 的 div 。

```
.YourDivClass
{
    position: fixed;
    left: 50%;
    top: 50%;
    background-color: white;
    z-index: 100;

    height: 400px;
    margin-top: -200px;

    width: 600px;
    margin-left: -300px;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:34:40.560

由于 jQuery Mobile 独特的功能，纯 CSS 不能用于完美的内容居中。

这是一个专门为 jQM 创建的工作示例：http: [//jsfiddle.net/Gajotres/detPg/](http://jsfiddle.net/Gajotres/detPg/)

```
$(document).on('pageshow', '#index', function(){   
    $("div[data-role='fieldcontain']").css('margin-top',getRealContentHeight()/2 - $('#b').height()/2);
    $('#b').css('margin-left',$("div[data-role='content']").outerWidth()/2 - $('#b').width()/2);
});

function getRealContentHeight() {
    var header = $("div[data-role='header']:visible");
    var footer = $("div[data-role='footer']:visible");
    var content = $("div[data-role='content']:visible:visible");
    var viewport_height = $(window).height();

    var content_height = viewport_height - header.outerHeight() - footer.outerHeight();
    if((content.outerHeight() - header.outerHeight() - footer.outerHeight()) <= viewport_height) {
        content_height -= (content.outerHeight() - content.height());
    } 
    return content_height;
} 
```

通常水平居中只能通过 css 实现，但由于 jQM 1.3 的新变化，甚至必须通过 javascript 计算。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:04:24.360

好吧，不确定这是否正是您要寻找的，但这是您可以在页面中居中元素的方法，假设那里没有其他内容。

```
<div id='b'>
some element
</div>

<style>
#b{
position: absolute;
top: 0px;
bottom: 0px;
left: 0px;
right: 0px;
margin: auto;
width: 100px;
height: 10px;
}
</style> 
```

# java - jsf在xhml页面上使用属性而不是方法

> ID：14641915
> 
> 赞同：1
> 
> 时间：2013-02-01T07:55:25.277
> 
> 标签：java, jsf, jsf-2

我在工作中遇到了非常奇怪的事情。

我读到在 getter 中调用服务方法是一种不好的做法。因为当页面被渲染时，getter 和 setter 可以被多次调用，并且每次都从 db 中选择数据，例如对于一个可以更改数据的管理员来说，这不像我认为的那样合乎逻辑。

这就是为什么我尝试将 getter 和方法分开。但有时我想在页面上调用 maethods 而不是属性。但是当我的同事告诉我，当他使用带括号的这种方法时，他会出错

```
javax.el.PropertyNotFoundException: /admin/tournament/manageTournament.xhtml @147,127 rendered="#{not empty adminTournamentController.selectTeamsByConditions()}": The class 'by.bvf.web.controller.tournament.AdminTournamentController' does not have the property 'selectTeamsByConditions'. 
```

我认为我们使用相同版本的库。问题的原因是什么？谢谢

# java - Jython :: PythonInterpreter 可以使用哪些模块以及如何添加更多

> ID：14641917
> 
> 赞同：3
> 
> 时间：2013-02-01T07:55:28.867
> 
> 标签：java, jython

我正在使用**Jython 2.5.3** `PythonInterpreter`类来评估一些简单的脚本，但是当我需要导入任何非核心模块时，我会遇到异常。我是否必须在 CLASSPATH 中添加一些 jython 库 jar？

演示问题的缩小代码：

```
import org.python.core.*;
import org.python.util.PythonInterpreter;

public class JythonTest {

    public static void main(String args[]) throws Exception {
        String scriptA = "import json"; // "import datetime" fails as well
        PythonInterpreter pi = new PythonInterpreter();
        PyCode code = pi.compile(scriptA);
        PyObject result = pi.eval(code);
    }
} 
```

**在 CLASSPATH 中仅使用jython-2.5.3.jar**运行上述失败并显示以下跟踪：

```
 [java] ImportError: No module named json
 [java] 
 [java]     at org.python.core.Py.ImportError(Py.java:304)
 [java]     at org.python.core.imp.import_first(imp.java:755)
 [java]     at org.python.core.imp.import_module_level(imp.java:837)
 [java]     at org.python.core.imp.importName(imp.java:917)
 [java]     at org.python.core.ImportFunction.__call__(__builtin__.java:1220)
 [java]     at org.python.core.PyObject.__call__(PyObject.java:357)
 [java]     at org.python.core.__builtin__.__import__(__builtin__.java:1173)
 [java]     at org.python.core.imp.importOne(imp.java:936)
 [java]     at org.python.pycode._pyx0.f$0(<script>:2)
 [java]     at org.python.pycode._pyx0.call_function(<script>)
 [java]     at org.python.core.PyTableCode.call(PyTableCode.java:165)
 [java]     at org.python.core.PyCode.call(PyCode.java:18)
 [java]     at org.python.core.Py.runCode(Py.java:1275)
 [java]     at org.python.core.__builtin__.eval(__builtin__.java:484)
 [java]     at org.python.core.__builtin__.eval(__builtin__.java:488)
 [java]     at org.python.util.PythonInterpreter.eval(PythonInterpreter.java:198)
 [java]     at JythonTest.main(JythonTest.java:10) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-06-12T09:11:59.377

您似乎正在使用不包含捆绑 Python 文件（`/Lib`文件夹中的标准库）的 Jython jar 文件。我相信如果您使用独立的 jar 代替它应该可以工作。看

*   [http://fwierzbicki.blogspot.se/2012/08/jython-253-final-released.html](http://fwierzbicki.blogspot.se/2012/08/jython-253-final-released.html)
*   [http://wiki.python.org/jython/InstallationInstructions](http://wiki.python.org/jython/InstallationInstructions)

# doctrine - 在 Symfony 2 / Doctrine 2 中有一个带有 DBAL 连接的自定义存储库？

> ID：14641918
> 
> 赞同：1
> 
> 时间：2013-02-01T07:55:32.967
> 
> 标签：doctrine, doctrine-orm, symfony-2.1

我正在尝试将默认 DBAL 连接注入与实体关联的自定义存储库，以便我可以执行一些原始 sql 查询。

在 services.mxl

```
<service id="acme.repository.document" class="Acme\Bundle\Repository\DocumentRepository">
      <argument type="service" id="doctrine.orm.entity_manager" />
      <argument>Acme\Bundle\Entity\Document</argument>
      <argument type="service" id="database_connection" />
</service> 
```

在我的存储库类 DocumentRepository.php

```
class DocumentRepository extends EntityRepository {

    protected $conn;

    public function __construct($em, $class, Connection $conn)
    {
        $this->conn = $conn;
         parent::__construct($em,$class);
    } 
```

但我得到这个错误：

> 可捕获的致命错误：传递给 Acme\Bundle\Repository\DocumentRepository::__construct() 的参数 3 必须是 Doctrine\DBAL\Connection 的实例，没有给出，在 /project/vendor/doctrine/orm/lib/Doctrine/ORM 中调用/EntityManager.php 在第 689 行并在 /project/src/Acme/Bundle/Repository/DocumentRepository.php 第 18 行中定义

你能帮帮我吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-17T13:00:23.517

很多小时后，继续寻找最佳答案。我发现[Elnur Abdurrakhimov](https://stackoverflow.com/users/745188/elnur-abdurrakhimov)的答案是最好的（在我看来，以及我的用例）。

**来源**：[https ://stackoverflow.com/a/12908748/1617890](https://stackoverflow.com/a/12908748/1617890)

```
use Doctrine\DBAL\Connection;

public function __construct(Connection $connection)
{
    $this->connection = $connection;
} 
```

```
my_listener:
    arguments: [ @database_connection ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-08-19T14:54:12.650

您可以从 EntityRepository 类的 $_em 属性访问连接，因此您可以这样做；

```
$connection = $this->_em->getConnection(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-08T20:17:28.260

`EntityRepository`在 Doctrine ORM[是内部构建的](https://github.com/doctrine/doctrine2/blob/master/lib/Doctrine/ORM/EntityManager.php#L756)。您仍然可以定义自己的服务，也可以是存储库，然后使用该服务。这是 ORM 的一个限制，因为 Doctrine 在内部不使用服务位置或依赖注入容器。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-03-14T15:04:53.303

问题是你没有传递正确的连接实例，试试这个：

```
use Doctrine\DBAL\DriverManager;

class DocumentRepository extends EntityRepository 
{

    protected $conn;

    public function __construct($em, $class)
    {
        $this->conn = $this->myHandleConnection();
         parent::__construct($em,$class);
    }

    public function myHandleConnection()
    {
        $config = new \Doctrine\DBAL\Configuration();
        $connectionParams = array(
                'dbname' => 'MY_DB',
                'user' => 'root',
                'password' => 'root',
                'host' => 'localhost',
                'driver' => 'pdo_mysql',
                'charset' => 'utf8',
                );
        $conn = DriverManager::getConnection($connectionParams, $config);
        return $conn;
    }
} 
```

# android - 在Android中需要一个具有两列的不同Rowheights的ViewGroup（自定义）

> ID：14641920
> 
> 赞同：1
> 
> 时间：2013-02-01T07:55:40.967
> 
> 标签：android, android-layout, android-custom-view, android-gridview

我有无限数量的项目。想要在两列中将它们显示为具有延迟加载的 GridView。我用 GridView 进行了尝试，它以相同的高度在一行中显示所有项目。但希望它根据附图中的项目高度进行调整。如果有人有任何想法，或者你们中的任何人已经使用一些自定义视图实现了这一点。请大家分享。提前谢谢。![具有不同大小单元格的 ViewGroup](../Images/f6894817cce9f6531cd21867e568993d.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-05T17:38:41.750

**新答案**

看看`RecyclerView`。`RecyclerView`替换`ListView`并设计为足够灵活以支持您的用例。

`RecyclerView`是支持库的一部分，在 android L 中添加。所以它应该适用于任何版本的 Android。*但请注意，在撰写本文时，android L 处于预览阶段。*

**原始答案**

Android 源代码中有一个名为的实验类，可以满足`StaggeredGridView`您的需求。它包含在`frameworks/ex/widgets/`文件夹中。

它还没有完成。然而，有些人已经基于它构建了工作原型。例如：[http ://www.androidviews.net/2013/01/pinterest-like-adapterview/](http://www.androidviews.net/2013/01/pinterest-like-adapterview/)

# javascript - Ext JS 的自定义缓存设置

> ID：14641921
> 
> 赞同：2
> 
> 时间：2013-02-01T07:55:41.797
> 
> 标签：javascript, extjs

我最初将这个用于我的 Ext JS 应用程序；

```
Ext.Loader.setConfig({
    disableCaching: false,
    enabled: true
}); 
```

这很棒，因为它将 Unix 时间戳附加到我的 JS 文件中，使浏览器不缓存文件。然后我可以在不需要我的用户清除浏览器缓存的情况下更新我的应用程序，否则应用程序存在崩溃的风险。

问题是，这会减慢程序加载速度（因为每次都需要获取文件）。我只是想知道是否有一种简单的方法可以手动设置**?_dc=1359704445222**（时间戳值），以便只有在我更新我的应用程序时该值才会改变。

**tl;dr：我希望能够为我的 Ext JS 应用程序手动设置 _dc 参数值**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-19T16:12:30.960

不幸的是，时间戳在 Sencha 中是硬编码的。您可以通过修改 ext-all-dev.js 轻松更改它（或者如果您使用不同的文件，请查找相似之处）并替换以下代码：

将 Ext.Date.now() 的以下实例替换为您的版本号：

```
....
noCacheUrl = url + (this.getConfig('disableCaching') ? ('?' + this.getConfig('disableCachingParam') + '=' + Ext.Date.now()) : ''),
....
url = Ext.urlAppend(url, Ext.String.format("{0}={1}", me.cacheString, Ext.Date.now())); 
```

还将以下 new Date().getTime() 实例替换为您的版本号：

```
....
url = Ext.urlAppend(url, (options.disableCachingParam || me.disableCachingParam) + '=' + (new Date().getTime()));
....
params[cacheParam] = new Date().getTime(); 
```

一旦你这样做了，只要你启用了 disableCaching，它就应该反映在 UI 中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T16:38:54.250

动态加载应该只用于开发。发布版本后，使用[Sencha Cmd](http://www.sencha.com/products/sencha-cmd/)创建应用程序的生产版本并将其部署给用户。

# ruby-on-rails - 如何计算rails应用程序中facebook评论的数量

> ID：14641923
> 
> 赞同：0
> 
> 时间：2013-02-01T07:55:44.620
> 
> 标签：ruby-on-rails, facebook, comments

我正在用 Rails 设计一个博客，我已经成功地在其中集成了 facbook 评论，我的代码如下：

在 application.html.erb 我添加了这个

```
<script>(function(d, s, id) {
    var js, fjs = d.getElementsByTagName(s)[0];
    if (d.getElementById(id)) return;
    js = d.createElement(s); js.id = id;
    js.src = "//connect.facebook.net/en_US/all.js#xfbml=1&appId=202813259861933";
    fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script> 
```

在我的帖子中，即 show.html.erb 我添加了这个

```
<div class="fb-comments" data-href="<%= post_path %>" data-width="290" data-num-posts="20"></div> 
```

这工作得很好 **问题是当我尝试计算特定帖子**的评论数量时，使用 facebook 评论计数代码，它什么也不输出。任何人都可以帮助解决这个问题，因为似乎这段代码不适用于 Rails 应用程序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-02T07:09:26.637

Try this code maybe?

```
 <script>(function(d){
     var js, id = 'facebook-jssdk'; if (d.getElementById(id)) {return;}
     js = d.createElement('script'); js.id = id; js.async = true;
js.src = "//connect.facebook.net/en_US/all.js#xfbml=1";
d.getElementsByTagName('head')[0].appendChild(js);
}(document));</script>

<a expr:href='data:post.url + "#fb-root"'><fb:comments-count    expr:href='data:post.canonicalUrl'></fb:comments-count> comments</a>-count> comments</a> 
```

# xml - 使用 XPath 构建带有递归元素的分层菜单

> ID：14641926
> 
> 赞同：1
> 
> 时间：2013-02-01T07:56:05.807
> 
> 标签：xml, xpath, xsd

`XMLDataSource`我在尝试使用构建递归菜单时遇到问题`XPath`。当然`XPath=""`后菜单工作正常显示根元素及其下的所有层次结构。但我需要菜单至少从层次结构的第二级开始。XML 模式文件包含定义：

```
<xs:element name="Menu" type="TopMenuType"/>
<xs:element name="MenuItem" type="TopMenuItemType"/>

<xs:complexType name="TopMenuItemType">
    <xs:sequence>
        <xs:element type="TopMenuItemType" name="MenuItem" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>
    <xs:attribute type="xs:string" name="Caption" default=""/>
</xs:complexType>

<xs:complexType name="TopMenuType">
    <xs:sequence>
        <xs:element type="TopMenuItemType" name="MenuItem" minOccurs="0" maxOccurs="unbounded"/>
    </xs:sequence>      
</xs:complexType> 
```

并且 XML 文件本身包含根据此模式的数据：

```
<Menu xmlns="http://tempuri.org/TopMenuData.xsd">
<MenuItem Caption="Profile">
    <MenuItem Caption="Regulatory Transactions"></MenuItem>
    <MenuItem Caption="Work Management"></MenuItem>
    <MenuItem Caption="Work Queues"></MenuItem>
</MenuItem>
<MenuItem Caption="Message Queues" URL="MQ.aspx">
    <MenuItem Caption="Appointment Queues">
        <MenuItem Caption="Termination Queues"></MenuItem>
        <MenuItem Caption="Filling Status"></MenuItem>
    </MenuItem>
</MenuItem> 
```

当我尝试将值分配给 XPath（类似于`/Menu`, `//MenuItem`, `/MenuItem`, `/Menu/MenuItem`）时，菜单控件会在设计时显示，`There was an error rendering the control`而在运行时不会显示任何内容。

我尝试`ref`在 XSD 定义中使用属性。它没有帮助我。

怎么了？提前感谢您的回答

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-11T07:07:09.920

我的 XML 的真正问题不是递归。递归工作正常。问题出在名称空间中。根据**JLRishe**的评论，添加命名空间足以解决这个问题。（我的菜单开始工作，因为它应该分配**XPath="/*"**）。谢谢。

# jquery - createElement 的 jQuery 等价物？

> ID：14641927
> 
> 赞同：1
> 
> 时间：2013-02-01T07:56:25.977
> 
> 标签：jquery, dom

```
function ytplayer_render_playlist(){
    for(var i=0;i<ytplayer_playlist.length;i++){
      var img = document.createElement("img");
      img.src="http://img.youtube.com/vi/" + ytplayer_playlist[i] + "/default.jpg";
      var a=document.createElement("a");
      a.href="#ytplayer";
      a.onclick=(function(j){
           return function(){
                ytplayer_playitem=j;
                ytplayer_playlazy(1000);
               };
        })(i);
      a.appendChild(img);
     document.getElementById("ytplayer_div2").appendChild(a);
    }
} 
```

我可以转换简单的 jquery 代码，但这对我来说太复杂了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T07:59:26.630

您可以使用相同的美元符号语法创建元素：

```
var img = $('<img />', {
    src: "http://img.youtube.com/vi/" + ytplayer_playlist[i] + "/default.jpg"
}); 
```

虽然我不太确定你为什么需要这样做。代码按原样工作，似乎来自插件，每次更新时您都必须重新翻译。

# qt - *= 在 .pro 文件中是什么意思？

> ID：14641929
> 
> 赞同：5
> 
> 时间：2013-02-01T07:56:49.643
> 
> 标签：qt, qmake, qt-quick

我正在尝试在 Windows 上构建 qtdemo，我几乎已经完成了，但是 qtquick 示例存在问题。我认为它始于 qtdemo.pro 文件，在这部分：

```
contains(QT_CONFIG, quick1) {
    QT += quick1
} else {
    DEFINES *= QT_NO_DECLARATIVE
} 
```

它总是设置 QT_NO_DECLARATIVE，因此程序会抛出错误并且不会运行示例。我正在搜索'* ='运算符是什么意思，但我在任何地方都找不到它。有人知道吗？他们总是说 += 和 -= 但 *= 根本没有提到......

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-02-01T08:04:34.173

从[文档](http://qt-project.org/doc/qt-4.8/qmake-advanced-usage.html)：

> *= 运算符将一个值添加到变量的值列表中，但前提是它不存在。这可以防止值多次包含在变量中。

# javascript - 用于在 Express/node.js 中保存图像的 ContentType

> ID：14641932
> 
> 赞同：0
> 
> 时间：2013-02-01T07:57:01.077
> 
> 标签：javascript, node.js, express

我将 base64 编码数据从画布元素传递到快速处理程序，该处理程序将数据保存到 png 文件中

我应该在下面的 ajax 调用中将 contentType 设置为什么？（使用默认值，即 not x-www-form-urlencoded 会给我一个无法打开的 png 文件）

```
$("#save").click(function(){
         var canv = document.getElementById('imageView');
         var canvData = canv.toDataURL('image/png');
       console.log("the type is " + typeof canvData);

          $.ajax({

          type: "POST",
          url: '/upload',
          data: canvData,
          contentType: '???', 
          success: function(data){

            console.log(data);

          }         
         });

      }); 
```

为了完整起见，我的快递处理程序在这里：

```
// insert an image
function objToString (obj) {
    var str = '';
    for (var p in obj) {
        if (obj.hasOwnProperty(p)) {
            str += p + '::' + obj[p] + '\n';
        }
    }
    return str;
}
var fs = require('fs');

app.post('/upload', function(req, res){

    var image = req.body;
    image = objToString(image);
    var noHeader = image.substring(image.indexOf(',') + 1);
    var decoded = new Buffer(noHeader, 'base64');

    fs.writeFile('testfile.png', decoded, function(err){

        res.send("without header " + noHeader + "decoded " + decoded);

    });

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:40:03.030

您将获得的数据 URL 是一个 base64 字符串，例如：

```
 data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAASwAAAEsCAYAAAB5fY.... 
```

规范中提到了canvas API 中的[toBlob 方法](https://developer.mozilla.org/en-US/docs/DOM/HTMLCanvasElement)，可以直接将数据作为原始 PNG 获取。但是，它还没有在最新版本的 Chrome 中实现，所以我不会按原样使用它。

如果您想获取原始 PNG 数据（并因此使用`image/png`Content-Type），您可以使用这个[toBlob polyfill](https://github.com/blueimp/JavaScript-Canvas-to-Blob)。

**编辑**：仔细检查我的代码后，我将数据 URL 作为 JSON 发送。

在客户端：

```
$.ajax({
    url: '/api/1/activities/' + self.model.id + '/attachments/' + fileName,
    type: 'PUT',
    contentType: 'application/json',
    dataType: 'json',
    data: JSON.stringify({data: canv.toDataURL('image/png'}),
    success: function () { ... }
}); 
```

在服务器中：

```
function parseDataURL(body) {
  var match = /data:([^;]+);base64,(.*)/.exec(body);
  if(!match)
    return null;

  return {
    contentType: match[1],
    data: new Buffer(match[2], 'base64')
  };
}

app.post('/upload', function (req, res) {
  var upload = parseDataURL(req.body.data);
  ...
}); 
```

# php - 如何测试从另一个函数获取返回数据的函数？

> ID：14641935
> 
> 赞同：0
> 
> 时间：2013-02-01T07:57:19.053
> 
> 标签：php, phpunit

我是 PHP 单元的新手，现在我进退两难了。

函数结构是这样的：

```
function myfunc($arg) {
  $data = $anotherobject->myfunc2($arg);
  $diffdata = $anotherobject->myfunc3($arg);
  return $data. " ".arg. " ". $diffdata;
} 
```

我怎样才能验证输出是它应该是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-01T08:04:55.087

**编辑**：贾西尔当然也是对的。单元测试的重点是测试尽可能小的单元。因此，您还将进行测试以涵盖 myfunc2() 和 myfunc3()。

**编辑结束**

[使用 stub](http://www.phpunit.de/manual/current/en/test-doubles.html)，您可以设置 myfunc2() 和 myfunc3() 以返回已知值。然后，您可以像往常一样断言 myfunc 的返回。

类似于以下内容：

```
<?php
require_once 'SomeClass.php';

class StubTest extends PHPUnit_Framework_TestCase
{
    public function testStub()
    {
           // Create a stub for the SomeClass class.
           $stub = $this->getMock('SomeClass');

           // Configure the stub.
           $stub->expects($this->any())
               ->method('myfunc2')
               ->will($this->returnValue('foo'));

           $stub->expects($this->any())
               ->method('myfunc3')
               ->will($this->returnValue('bar'));

            // Calling $stub->doSomething() will now return
            // 'foo'.
            $this->assertEquals('foo somearg bar', $stub->myfunc('somearg'));
        }
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:02:37.947

您应该只测试 myfunc() 输出。如果您需要测试 myfunc2()、myfunct3()，请对它们进行单独测试。

```
function test_myfunc() {
   ...
}

function test_myfunc2() {
   ...
}

function test_myfunc3() {
   ...
} 
```

# vim - 如何取消映射 TAB 并且不使 Ctrl-I 在 VIM 中无效

> ID：14641942
> 
> 赞同：24
> 
> 时间：2013-02-01T07:57:42.423
> 
> 标签：vim

当我在普通模式下使用 vim 时，我经常不小心按 TAB 键，默认情况下 TAB 键的作用与 Ctrl-I 相同。我想让 key TAB 什么都不做，所以我把这一行放在 vimrc 文件中：

```
nmap <TAB> :echo<CR> 
```

因此，键 TAB 不会做任何事情，但这使得键 Ctrl-I 也不会做任何事情。那么，如何让 TAB 什么都不做，并且 Ctrl-I 在 vi​​m 中（在正常模式下）像以前一样正常工作？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2013-02-01T08:09:49.697

由于键盘输入在内部处理的方式，不幸的是，这在今天通常是不可能的，即使在 GVIM 中也是如此。某些组合键，如`Ctrl`+`non-alphabetic`无法映射，`Ctrl`+`letter`与`Ctrl`++`Shift`无法`letter`区分。（除非您的终端为它发送一个独特的*termcap*代码，而大多数人不会。）这也适用于`<Tab>`/ `<C-I>`，`<CR>`/`<C-M>`等。这是一个已知的痛点，也是 vim_dev 和 #vim IRC 频道上各种讨论的主题。

一些人（最重要的是 Paul LeoNerd Evans）想要解决这个问题（即使是支持此功能的终端中的控制台 Vim），并提出[了各种建议](http://groups.google.com/group/vim_dev/browse_thread/thread/626e83fa4588b32a/bfbcb22f37a8a1f8)。

但是截至今天，还没有补丁或志愿者出现，尽管许多人表示希望在未来的 Vim 8 主要版本中拥有它。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-02-03T05:53:18.667

我建议`<TAB>`做一些有用的事情：

```
nmap <TAB> <C-W>
nmap <TAB><TAB> <C-W><C-W> 
```

这种方式可以`tab`用于窗口操作。当然，有了这个你就不能有这种`ctrl-i`行为。`,i`我为此映射：

```
nnoremap ,i <C-I> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-04-20T12:59:46.797

我发现重新映射时`ctrl-tab`默认工作。`ctrl-i``tab`

在 macvim 中工作。我没有检查其他vim。

# jquery - 如何使用 Jquery datepicker 根据表单字段和全局变量禁用一周中的某一天？

> ID：14641946
> 
> 赞同：3
> 
> 时间：2013-02-01T07:58:06.897
> 
> 标签：jquery, forms, datepicker, jquery-ui-datepicker

我正在尝试根据通过 javascript 设置但最初由用户通过表单字段 ( `shipping_state`) 填充的全局变量禁用一周中的某些天。

```
 <form id="myform">
    <p>State: <select id="shipping_state" onchange="this.form.shipping_zip.value='';check_address('shipping');" name="shipping_state" class="txtBoxStyle">
                                    <option value=""></option><option value="AL">Alabama</option><option value="AK">Alaska</option><option value="AZ">Arizona</option><option value="AR">Arkansas</option><option value="CA">California</option><option value="CO">Colorado</option><option value="CT">Connecticut</option><option value="DE">Delaware</option><option value="DC">District of Columbia</option><option value="FL">Florida</option><option value="GA">Georgia</option><option value="HI">Hawaii</option><option value="ID">Idaho</option><option value="IL">Illinois</option><option value="IN">Indiana</option><option value="IA">Iowa</option><option value="KS">Kansas</option><option value="KY">Kentucky</option><option value="LA">Louisiana</option><option value="ME">Maine</option><option value="MD">Maryland</option><option value="MA">Massachusetts</option><option value="MI">Michigan</option><option value="MN">Minnesota</option><option value="MS">Mississippi</option><option value="MO">Missouri</option><option value="MT">Montana</option><option value="NE">Nebraska</option><option value="NV">Nevada</option><option value="NH">New Hampshire</option><option value="NJ">New Jersey</option><option value="NM">New Mexico</option><option value="NY">New York</option><option value="NC">North Carolina</option><option value="ND">North Dakota</option><option value="OH">Ohio</option><option value="OK">Oklahoma</option><option value="OR">Oregon</option><option value="PA">Pennsylvania</option><option value="PR">Puerto Rico</option><option value="RI">Rhode Island</option><option value="SC">South Carolina</option><option value="SD">South Dakota</option><option value="TN">Tennessee</option><option value="TX">Texas</option><option value="UT">Utah</option><option value="VT">Vermont</option><option value="VI">Virgin Islands</option><option value="VA">Virginia</option><option value="WA">Washington</option><option value="WV">West Virginia</option><option value="WI">Wisconsin</option><option value="WY">Wyoming</option></select>   
        </p>

        <p>Delivery Date:
      <input name="my_deliverydate" type="text" id="datepicker"
      size="30" />
    </p>
    <p>ALT Delivery Date:
      <input name="my_altdeliverydate" type="text" id="altdatepicker"
      size="30" />
    </p>

    <p>
      Customer Comments:<br><textarea class="txtBoxStyle" id="custcomment" cols="55" rows="3"></textarea>
    </p>
    <p>
      Combined Comment Field:<br><textarea class="txtBoxStyle" name="ocomment" id="compcomment" cols="55"
      rows="3"></textarea>
    </p>

    <input type="button" name="submit" class="button" id="submit" value="Send" onclick="$('#compcomment').val('Delivery Date: ' + $('#altdatepicker').val() + ', Customer Comments: ' + $('#custcomment').val());"/> 
```

这是Javascript

```
 $(function () {
          var date = new Date();
          var currentMonth = date.getMonth(); // current month
          var currentDate = date.getDate()+1; // current date
          var currentYear = date.getFullYear(); //this year
          $("#datepicker").datepicker({
            dateFormat: "DD, d MM, yy", // set main date format to Wednesday, January 10th, 2013
            altFormat: "yy-mm-dd", // set alt format to default
            altField: "#altdatepicker", //set alt date field
            changeMonth: true, // this will allow users to chnage the month
            changeYear: true, // this will allow users to chnage the year
            minDate: new Date(currentYear, currentMonth, currentDate),
            beforeShowDay: function (date) {
              if (date.getDay() === 0 || date.getDay() === 1 || date.getDay() === 2 || date.getDay() === 6) {
                return [false, ''];
              } else { 
                return [true, ''];
              }
            }
          });
        }); 
```

[看到这个jsfiddle](http://jsfiddle.net/willwilson/rBmqb/4/)

以下是我需要的所有日期限制：

1.  没有周日、周一或周六。完毕。
2.  今天、明天和之前的所有日期都处于非活动状态。完毕。

如果用户不选择田纳西州、肯塔基州、阿拉巴马州。

1.  星期二需要不活动。
2.  Today + 2（后天）需要处于非活动状态。

理想情况下，在用户选择 a 之前，所有日期都将处于非活动状态`shipping_state`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T09:23:33.057

我使用数组`disabled_days`来指示要禁用的日期。html 标记中的 'onchage=""' 之类的语法不好，您需要在处理程序中自行修复`this.form.shipping_zip.value='';check_address('shipping');` **，**在选项中`change`计算 +2 天。`minDate`

```
$(function () {
    $('#shipping_state').change(function () {
        //uncomment later;
        //this.form.shipping_zip.value='';check_address('shipping');
        var val = $(this).val();
        if ($.inArray(val, ['AL', 'KY', 'TN']) > -1) {
            disabled_days = [0, 1, 6];
            return;
        }
        disabled_days = [0, 1, 2, 6];
    });
    var disabled_days = [0, 1, 2, 3, 4, 5, 6],
        date = new Date(),
        currentMonth = date.getMonth(), // current month
        currentDate = date.getDate(), // current date
        currentYear = date.getFullYear(), //this year
        dp_config = {
            dateFormat: "DD, d MM, yy", // set main date format to Wednesday, January 10th, 2013
            altFormat: "yy-mm-dd", // set alt format to default
            altField: "#altdatepicker", //set alt date field
            changeMonth: true, // this will allow users to chnage the month
            changeYear: true, // this will allow users to chnage the year
            minDate: new Date(new Date(currentYear, currentMonth, currentDate).getTime() + 86400000 * 2),
            beforeShowDay: function (date) {
                if ($.inArray(date.getDay(), disabled_days) > -1) return [false, ''];
                return [true, ''];
            }
        };

    $("#datepicker,#altdatepicker").datepicker(dp_config);
    $('#shipping_state').trigger('change');
}); 
```

[演示](http://jsfiddle.net/oceog/rBmqb/13/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T09:24:10.317

访问[jqfaq.com](http://jqfaq.com/)以获取更多有趣的常见问题解答和解决方案。这是你更新的工作[小提琴](http://jsfiddle.net/rBmqb/8/)

```
 $("#datepicker").datepicker({
        dateFormat: "DD, d MM, yy", // set main date format to Wednesday, January 10th, 2013
        altFormat: "yy-mm-dd", // set alt format to default
        altField: "#altdatepicker", //set alt date field
        changeMonth: true, // this will allow users to chnage the month
        changeYear: true, // this will allow users to chnage the year
        minDate: new Date(currentYear, currentMonth, currentDate),
        beforeShowDay: function (date) {
            var shipping_state = $("#shipping_state").val();
            switch (shipping_state) {
                case "AL":
                case "KY":
                case "TN":
                    var current = new Date();
                    var today = new Date(current.getFullYear(), current.getMonth(), current.getDate());
                    if (date.valueOf() <= today.valueOf() + 2) return [false, ''];
                    else if (date.getDay() === 0 || date.getDay() === 1 || date.getDay() === 6) {
                        return [false, ''];
                    } else {
                        return [true, ''];
                    }
                    break;
                default:
                    if (date.getDay() === 0 || date.getDay() === 1 || date.getDay() === 2 || date.getDay() === 6) {
                        return [false, ''];
                    } else {
                        return [true, ''];
                    }
            }
        }
    }); 
```

# quartz-scheduler - QuartzScheduler 在 addJob() 时挂起

> ID：14641951
> 
> 赞同：2
> 
> 时间：2013-02-01T07:58:27.100
> 
> 标签：quartz-scheduler

我需要一点帮助。我是使用 Quartz Scheduler 的新手。我正在尝试使用 addJob 方法向 Quartz Scheduler 注册一个新作业。程序挂起。下面是相同的线程转储。

```
OSGi Console" prio=3 tid=0x08230800 nid=0xa in Object.wait() [0x8b41d000]
   java.lang.Thread.State: WAITING (on object monitor)
        at java.lang.Object.wait(Native Method)
        at java.lang.Object.wait(Object.java:485)
        at org.quartz.impl.jdbcjobstore.SimpleSemaphore.obtainLock(SimpleSemaphore.java:94)
        - locked <0xaf6c2310> (a org.quartz.impl.jdbcjobstore.SimpleSemaphore)
        at org.quartz.impl.jdbcjobstore.JobStoreSupport.executeInNonManagedTXLock(JobStoreSupport.java:3804)
        at org.quartz.impl.jdbcjobstore.JobStoreTX.executeInLock(JobStoreTX.java:93)
        at org.quartz.impl.jdbcjobstore.JobStoreSupport.executeInLock(JobStoreSupport.java:3735)
        at org.quartz.impl.jdbcjobstore.JobStoreSupport.storeJob(JobStoreSupport.java:1075)
        at org.quartz.core.QuartzScheduler.addJob(QuartzScheduler.java:920)
        at org.quartz.impl.StdScheduler.addJob(StdScheduler.java:269)
        at com.ericsson.oss.utilities.scheduling.manager.SchedulingService.createJob(SchedulingService.java:226)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:307)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:182)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:149)
        at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:106)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
        at com.ericsson.oss.utilities.scheduling.dao.RetryInterceptor.invoke(RetryInterceptor.java:47)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:160)
        at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:89)
        at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:171)
        at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:204)
        at $Proxy153.createJob(Unknown Source)
        at com.ericsson.oss.utilities.scheduling.cli.commands.CreateCommand.execute(CreateCommand.java:207)
        at com.ericsson.oss.utilities.scheduling.cli.commands.CommandProcessor.execute(CommandProcessor.java:76)
        at com.ericsson.oss.utilities.scheduling.cli.EquinoxCommandProvider._usscheduling(EquinoxCommandProvider.java:89)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.eclipse.osgi.framework.internal.core.FrameworkCommandInterpreter.execute(FrameworkCommandInterpreter.java:150)
        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.docommand(FrameworkConsole.java:302)
        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.console(FrameworkConsole.java:287)
        at org.eclipse.osgi.framework.internal.core.FrameworkConsole.run(FrameworkConsole.java:223)
        at java.lang.Thread.run(Thread.java:662) 
```

# windows-8 - WinRT - 是否可以创建服务？

> ID：14641953
> 
> 赞同：2
> 
> 时间：2013-02-01T07:58:34.307
> 
> 标签：windows-8, microsoft-metro, windows-runtime

我想创建一个 WinRT 应用程序来处理来自本地/wifi 网络中手机的请求。例如，我在手机中已经有一个鼠标应用程序（类似于[这个](http://mobilemouse.com/)）。我想编写将在 PC/平板电脑上的服务器应用程序，以处理来自手机中鼠标应用程序的请求。因此，每当我在手机中打开鼠标应用程序时，我都可以发送一个推送通知，该通知应该使服务器（win 8 应用程序）能够处理来自手机应用程序的所有后续请求。可行吗？

通常，我会为此创建一个 Windows 服务，但想检查它在 WinRT 中是否可行。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-01T19:28:40.713

我会说你最好的选择是[ControlChannelTrigger](http://msdn.microsoft.com/library/windows/apps/Hh701032)。我自己没有使用过它，但根据它的描述，它旨在启用您的场景。

> 允许在后台接收 Windows.Networking.Sockets 命名空间和其他网络传输中的类元素的实时通知。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T09:43:39.170

我自己没有测试过，但我会说这是可能的。但只要您的应用程序在前台运行。如果您切换到另一个应用程序，您的应用程序将无法再进行通信，因为该应用程序已暂停。

尽管您可以在 Windows 应用商店中查看“The Time”。这是一个每秒刷新应用程序磁贴的时钟（作者在博客中对此进行了介绍）。

要连接到您的应用程序，我会测试[signalR](http://signalr.net/)，听说它的好消息 :-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T10:41:07.850

是的，您可以使用[StreamSocketListener](http://msdn.microsoft.com/library/windows/apps/BR226906)类，但正如[jwillmer](https://stackoverflow.com/users/639367/jwillmer)所说，可能只有在您的应用程序在前台运行时。

# mysql - 带有光标和视图的 MySQL 递归存储过程不刷新

> ID：14641955
> 
> 赞同：2
> 
> 时间：2013-02-01T07:58:45.633
> 
> 标签：mysql, stored-procedures, view, recursion, dynamic-sql

我有一个有效的 MySQL 5.5 存储过程，它递归地调用自己。

我需要执行一个动态 sql 查询，每次调用都是唯一的，然后遍历查询中的所有值。为此，我声明了一个基于视图的游标，并在打开游标之前使用动态 SQL 创建了一个视图。我快速遍历光标，将一些信息捕获到伪数组变量中，然后关闭光标并放下视图。然后我处理在我的数组中捕获的信息，其中可能包括对同一存储过程的递归调用。

我遇到的问题是，即使每次调用过程时都会创建和删除视图，但视图定义似乎在第一次递归调用后卡住了（即视图在初始调用中创建好了，它在第一次递归调用中创建好了，但第二次递归调用中的视图与第一次递归调用中的视图相同，即使创建视图的 SQL 不同。）

每次创建视图的名称都是相同的（在 MySQL 中模拟动态 SQL 游标的一部分），并且看起来视图定义被缓存在某处并在创建时“复活”，甚至尽管 CREATE VIEW 语句每次都不同。

我知道视图正在按预期创建和删除，因为有代码可以防止同时用户无意中使用相同的公共视图-即，如果视图已经存在，则检查并延迟执行（由于缺少私有视图而导致的另一个 MySQL kludge）。

我已经能够解决 MySQL 的所有其他缺点，但是这个让我很难过。提前感谢您的任何见解/帮助！

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-19T15:25:56.123

似乎这可能与事务隔离有关-您是否在事务中执行此操作，是否在删除后提交，是否启用了自动提交等...？

# java - 如何减慢 Java Swing 应用程序的速度

> ID：14641969
> 
> 赞同：-1
> 
> 时间：2013-02-01T08:00:04.477
> 
> 标签：java, swing

我正在制作一个只有电脑才能玩的游戏演示，但速度太快了。我需要它来显示一举一动。

该程序使用一个while循环，它没有任何支持事件侦听器的东西。它只需要计算机来移动。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:02:48.253

您可以有一个后台任务来触发移动并在移动之间适当地等待。就像是：

```
Runnable moveTask = new Runnable () {
    public void run() {
        while (true) {
            Thread.sleep(...);
            SwingUtilities.invokeLater(theActualMoveHere());
        }
    }
}
new Thread(moveTask).start(); 
```

您将需要添加一个停止机制（通过中断）并且可能使逻辑复杂化，但基本思想应该有效。

作为睡眠的替代方法，您可以使用[Timer](http://docs.oracle.com/javase/7/docs/api/javax/swing/Timer.html)每 x 毫秒安排一次移动。请注意，Timer 的分辨率不是很好，可能高达 30ms，因此可能不够精确，无法满足您的需要。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T08:04:16.520

您可以使用线程睡眠方法等待 X 时间。一些事情：

```
Thread.sleep(4000); 
```

请参阅[http://docs.oracle.com/javase/tutorial/essential/concurrency/sleep.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/sleep.html)

如果您需要每秒循环一定次数，您可以计算每次迭代使用的时间，然后休眠所需的时间。例如：

```
boolean cont = true;
long time0, timeForEach = 1000, time1 = System.currentTimeMillis();
while (cont) {

// Do my things here.

time0 = System.currentTimeMillis();
try {
  if (timeForEach > time0-time1) {
    Thread.sleep(timeForEach - (time0-time1));
  }
} catch (InterruptedException e) {
}
time1 = time0; 
```

}

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-01T08:06:11.137

当我想减慢代码中的速度时，我通常使用计时器、睡眠或等待功能。你可能有一个函数，它为每一个动作或类似的东西迭代/循环（for、while、for in 等）。您可以在此类循环的每次迭代之间放置时间。

另一种策略是让计算机在将要进行的所有动作显示给最终用户之前生成它们。然后，当您向用户展示每一个动作时，您可以决定在单个动作上花费的时间是多少。

# linux - Sublime Text 2 构建 (Ctrl +B) 英特尔 Fortran 编译器

> ID：14641970
> 
> 赞同：1
> 
> 时间：2013-02-01T08:00:07.390
> 
> 标签：linux, fortran, sublimetext2, intel-fortran

我在使用 Sublime Text2 作为编辑器的 Linux 64 位上使用 ifort 11.1。我想知道，如何创建自定义构建命令来编译代码？我还需要知道如何生成与源文件同名的输出。例如，我想将以下命令复制到自定义构建系统中：

```
ifort mycode.f90 -o mycode 
```

到目前为止，我尝试过：

```
{
"cmd": ["ifort","$file"],
"selector": ["iFort"],
"path":["/usr/local/Compiler/11.1/080/bin/intel64/ifort intel64"]
} 
```

没有成功。想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-19T16:42:29.470

This seems to work:

```
"cmd": ["ifort","$file"],
"file_regex": "^[ ]*File \"(...*?)\", line ([0-9]*)",
"selector": "source.fortran90" 
```

# crystal-reports - 从另一个表中编码的值生成列

> ID：14641974
> 
> 赞同：1
> 
> 时间：2013-02-01T08:00:51.567
> 
> 标签：crystal-reports

我正在尝试创建（我认为是）一个简单的水晶报表。本质上，我想生成一份报告，列出例如学生每次受到某种纪律处分的情况：

```
╔═══════════╦═════════════╦════════════╦══════════╗
║ StudentID ║ StudentName ║   Action   ║   Date   ║
╠═══════════╬═════════════╬════════════╬══════════╣
║ 1         ║ Smith, John ║ Suspension ║ 1/1/2012 ║
║ 2         ║ Q, Susie    ║ Detention  ║ 1/5/2012 ║
║ ...       ║ ...         ║ ...        ║          ║
╚═══════════╩═════════════╩════════════╩══════════╝ 
```

但是，此信息作为三个单独的表存储在数据库中：

1.  学生信息，例如他们的 ID 和姓名。
2.  纪律处分，包括学生的 ID、日期和表明所采取措施的代码。
3.  将每个代码与操作描述配对的表，因此 1 映射到“拘留”，2 映射到“暂停”，等等。

我不确定如何在 Crystal Reports 中链接这些列，特别是这样我就可以显示一个描述所采取的操作的列，而不仅仅是代码。我认为 SQL 表达式字段可以完成此操作，如下所示：

```
(
SELECT "ActionCodes"."ActionDesc"
WHERE "DisciplinaryActions"."ActionCode" = "ActionCodes"."ActionCode"
) 
```

不幸的是，将此字段添加到我的报告中只会产生空白行。我是在正确的轨道上，只是在摸索我的查询，还是有更好的路线？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-08T12:51:52.067

首先检查您在数据库中的查询，然后如果有数据，则放置

StudentID、学生姓名、操作、

再次检查 ReportPriview 后，水晶报告的详细信息部分中的日期。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-08T16:06:48.740

在 Crystal Reports 中，您需要转到 Database Expert，导航到要从中检索表的数据库。然后使用屏幕中间的 > 按钮，将所有表格移到右侧：学生、学科、描述。

然后，您必须创建左外连接。

从 Student 表中，选择 StudentID 并将其拖到 Disciplinary 的 StudentID。

您应该会看到一个显示从 Student 到 Disciplinary 的箭头的连接 --->

之后，左外连接纪律代码和描述代码。

连接正确后，您应该可以将所需的不同字段拖放到报告中。

您可以使用 SQL 表达式选项，但执行连接会更容易，并且您还可以灵活地在未来使用纪律代码或描述。

如果您需要带有屏幕截图的分步说明，请告诉我。

# php - 获取数据的php代码

> ID：14641976
> 
> 赞同：-2
> 
> 时间：2013-02-01T08:01:07.650
> 
> 标签：php, html

```
<span id="abc">MY_Data</span> 
```

我希望“MY_Data”作为 php 变量中的值 任何帮助都将得到极大的赞赏 注意这个值“MY_Data”是动态的，因为它是通过 javascript 函数生成的 提前感谢 Swapnil

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T08:09:14.883

PHP 无法读取 html 元素。但是有很多方法可以将数据发送到您的 php 页面。为此使用 JavaScript；或者，如果您使用的是表单，请将此值存储在隐藏字段中，如下所示：

```
<input type="hidden" value="MY_Data" name="abc" /> 
```

如果您没有表单，但有链接，您还可以在 url 中添加一个参数，例如

```
<a href="page.php?abc=MY_Data">link</a> 
```

然后用`$_GET['abc']`.

# php - 如何在 $_SESSION[] 变量中使用普通的 php 变量？

> ID：14641979
> 
> 赞同：-2
> 
> 时间：2013-02-01T08:01:24.267
> 
> 标签：php, session, session-variables

我是 PHP 的新手。我在将普通变量的值分配给会话变量时遇到问题。假设我有一个变量`$abc=28;`，我想将此变量分配给`$_SESSION[]`数组，那么如何实现呢？提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-01T08:02:45.800

```
<?php
session_start();
$abc=28;
$_SESSION["abc"]=$abc;
?> 
```

但是，您必须知道这`$abc`是一个不同的变量并且`$_SESSION`是不同的。即使有上面​​的任务，他们也不会以某种方式得到`connected`；也就是说，赋值后如果你改变了的值，`$abc`那么的值`$_SESSION["abc"]`不会自动改变，仅供参考。

编辑：

```
<?php
session_start();
$_SESSION["abc"]=28;   // Yes this will work perfectly fine.
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T08:03:59.387

为会话赋值：

```
session_start();
$_SESSION['session_name']= $abc; 
```

检索会话值：

```
echo $_SESSION['session_name']; 
```

# java-me - Google 静态地图 API 错误 - java.io.IOException：没有可用的响应条目

> ID：14641981
> 
> 赞同：1
> 
> 时间：2013-02-01T08:01:42.097
> 
> 标签：java-me, gps, google-static-maps

我正在 J2ME 中开发基于 GPS 的应用程序。我是 Google API 编码的新手。当我发出一个又一个地图的命令时，例如向上、向下、缩放、缩小，Google 静态地图 API 在此代码处给了我以下错误 - `inputStream = connection.openInputStream();`：

> java.io.IOException：没有可用的响应条目
> 
> 空值

```
at com.sun.midp.io.InternalConnector.openPrim(+157)
at com.sun.midp.io.InternalConnector.openInternal(+9)
at com.sun.midp.io.j2me.http.Protocol.connect_wap(+210)
at com.sun.midp.io.j2me.http.Protocol.connect(+107)
at com.sun.midp.io.j2me.http.Protocol.openInputStream(+64)
at midletgps.GoogleMaps.run(GoogleMaps.java:90) 
```

这个错误是什么意思&我应该如何解决？请帮助我..因为这个问题我被困在这里......

我的连接代码如下：

```
//the query string for the Google service
String url = "http://maps.google.com/maps/api/staticmap?center=";
url += latitude + "," + longitude;
url += "&zoom=" + String.valueOf(zoom);
url += "&size=" + width + "x" + height + "&maptype=hybrid" +"&sensor=true" + "&key=API key";
try 
{
    connection = (HttpConnection)Connector.open(url);
    connection.setRequestMethod(HttpConnection.GET);
    inputStream = connection.openInputStream();
    map = Image.createImage(inputStream);
    setImage(map);
    iserror=false;
    repaint();
    midGPS.displayMap();
} 
catch (Exception ex) 
{        
    iserror=true;
    ex.printStackTrace();
}
finally
{
    try 
    {
        if (connection != null) 
        {
             connection.close();
        }
    }
    catch (Exception ex)
    {
        ex.printStackTrace();
    }
} 
```

* * *

我按照所说的方式开发了一个代码，但问题仍然存在。代码是

```
 String url = "http://maps.googleapis.com/maps/api/staticmap?center=";
    url += latitude + "," + longitude;
    url += "&zoom=" + String.valueOf(zoom);
    url += "&size=" + width + "x" + height + "&maptype=hybrid" +"&sensor=true" + "&key=API key";
    try 
    {
        Image logo = null;
        byte[] imagedata;`

        connection = (ContentConnection)Connector.open(url);
        inputStream = connection.openDataInputStream();

        int len = (int) connection.getLength();
        if(len != -1)
        {
            imagedata = new byte[len]; 

            //get the image into byte 
            inputStream.readFully(imagedata);
        }
        else //length not available 
        {
            byteArray = new ByteArrayOutputStream();
            int c;
            while ((c = inputStream.read()) != -1) 
            {
               byteArray.write(c);
            }   
            imagedata = byteArray.toByteArray();
            byteArray.close();
        }

        //create an Image object
        logo = Image.createImage(imagedata, 0, imagedata.length);
        setImage(logo);
        iserror=false;
        repaint();
        midGPS.displayMap();
    } 
    catch (Exception ex) 
    {        
        iserror=true;
        ex.printStackTrace();
        //showError("Error message : " + ex.getMessage());
    }
    finally
    {
        try 
        {
              if (connection != null) 
              {
                   connection.close();
              }
                      if (inputStream != null) 
              {
                   inputStream.close();
              }
                      if (byteArray != null) 
              {
                   connection.close();
              }
        }
        catch (Exception ex)
        {
            showError("Error message : " + ex.getMessage());
    }
} 
```

* * *

我的谷歌地图完整代码如下 -

```
public class GoogleMaps extends Canvas implements CommandListener, Runnable 

{

    //get the width and the height of the screen

    int width = getWidth();
    int height = getHeight();           
    Image map;
    Command cmdBack = new Command("Back", Command.EXIT, 1);
    Command cmdRefresh = new Command("Refresh", Command.SCREEN, 1);
    MidletGPS midGPS; //reference to the parent MIDlet 
    int zoom = 17;   
    String latitude = "";
    String longitude = "";
    ContentConnection connection = null;
    DataInputStream inputStream = null; 
    ByteArrayOutputStream byteArray = null;
    Thread t;
    boolean iserror = true;
    Alert error;`

    public GoogleMaps(MidletGPS mGPS, String Lat, String Longit) 
    {
    //only for testing    
    latitude = "19.021531";    
    longitude = "72.848432";
    //latitude = Lat;
    //longitude = Longit; 
    midGPS = mGPS;
        this.addCommand(cmdBack);
        this.addCommand(cmdRefresh);
        this.setCommandListener(this);
        runThread();
    }   

    public void runThread()
    {
        t = new Thread(this);
        t.start();
    }

    public void setImage(Image image)
    {
        map = image;
    }
    public void paint(Graphics g) 
    {
       //Paints only, if the search succeeded in returning a location
        if(!iserror) 
        {
            g.drawImage(map, width/2, height/2, Graphics.HCENTER | Graphics.VCENTER);
        }
    }

    public void commandAction(Command c, Displayable d) 
    {
        if (c == cmdBack) 
    {
         midGPS.setCurrentForm(midGPS.mainForm);
    }
    if (c == cmdRefresh) 
    {
            runThread();
        this.repaint();
    }
    }   

    public void run()
    {   

        //the query string for the Google service
    String url = "http://maps.googleapis.com/maps/api/staticmap?center=";
    url += latitude + "," + longitude;
    url += "&zoom=" + String.valueOf(zoom);
    url += "&size=" + width + "x" + height + "&maptype=hybrid" +"&sensor=true" + "&key=API KEY";
    try 
        {
            Image logo = null;
            byte[] imagedata;

            connection = (ContentConnection)Connector.open(url);
            if(inputStream.read() != -1)
            {
                inputStream = connection.openDataInputStream();
            }
            else
            {

            }

            int len = (int) connection.getLength();
            if(len != -1)
            {
                imagedata = new byte[len]; 

                //get the image into byte 
                inputStream.readFully(imagedata);
            }
            else //length not available 
            {
                byteArray = new ByteArrayOutputStream();
                int c;
        while ((c = inputStream.read()) != -1) 
                {
                   byteArray.write(c);
        }   
                imagedata = byteArray.toByteArray();
                byteArray.close();
            }

            //create an Image object
            logo = Image.createImage(imagedata, 0, imagedata.length);
            setImage(logo);
            iserror=false;
            repaint();
            midGPS.displayMap();
        } 
        catch (Exception ex) 
        {        
            iserror=true;
            ex.printStackTrace();
            //showError("Error message : " + ex.getMessage());
    }
    finally
    {
            try 
        {
        if (connection != null) 
        {
            connection.close();
        }
                if (inputStream != null) 
        {
            inputStream.close();
        }
                if (byteArray != null) 
        {
            byteArray.close();
        }
            }
        catch (Exception ex)
            {
                showError("Error message : " + ex.getMessage());
        }
    }
    }

    protected void keyPressed(int keyCode)
    {
        if (((char) keyCode) == '1') 
        {
       zoom--;    
    }
    if (((char) keyCode) == '3')
        {
       zoom++;  
    }
    //if you want to move the map in all directions
    double offset = 0.02;
    if (getGameAction(keyCode) == 5)
        {
            double lon = (Double.parseDouble(longitude));
            lon += offset / zoom;
        longitude = String.valueOf(lon);
        }
    if (getGameAction(keyCode) == 2) 
        {
        double lon = (Double.parseDouble(longitude));
        lon -= offset / zoom;
        longitude = String.valueOf(lon);
    }
    if (getGameAction(keyCode) == 4) 
        {
        double lat = (Double.parseDouble(latitude));
        lat += offset / zoom;
        latitude = String.valueOf(lat);
    }
    if (getGameAction(keyCode) == 6)
        {
        double lat = (Double.parseDouble(latitude));
        lat -= offset / zoom;
        latitude = String.valueOf(lat);
    }

        // re-Call connection thread 
        runThread();

    //call the paint event
    //this.repaint();
     }

    void showError(String message)
    {
    error = new Alert("Error", message, null, AlertType.ERROR);
        error.setTimeout(error.getDefaultTimeout());
    Display.getDisplay(midGPS).setCurrent(error, midGPS.mainForm);
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T11:27:41.277

这是我将如何调试它：

**1.**首先，确保复制整个 URL 字符串（包括坐标和 API 密钥，我无法为您再次检查），然后将 URL 粘贴到**桌面**浏览器中。首先，确保您可以通过这种方式检索图像。如果不是，则您的 URL 是错误的。

**2.**如果步骤 (1) 有效，我会尝试使用以下几种方法检查您的请求状态：

```
connection = (HttpConnection)Connector.open(url);
connection.setRequestMethod(HttpConnection.GET);
if (connection.getResponseCode() == HttpConnection.HTTP_OK) { // check HTTP code
   inputStream = connection.openInputStream();
   int len = (int) connection.getLength();  
   if (len > 0) {                              // check content length
       map = Image.createImage(inputStream); 
```

确保 HTTP 响应代码看起来正常，并且流打开，产生一个正的内容长度。根据您显示的堆栈跟踪，您的代码可能无法通过长度检查，但它可能对调试很有用......而且总是可能存在不止一个问题。

**3.**如果您仍然卡住，您可以尝试[代码的替代实现来检索 URL 并将其加载到`Image`对象](http://www.ibm.com/developerworks/java/tutorials/wi-pdaimages/section3.html)中。请注意，流和连接在此方法中是**局部**变量，因此可以在方法结束后的某个时间进行垃圾回收。

```
private Image getImage(String url) throws IOException
{
    ContentConnection connection = (ContentConnection) Connector.open(url);

    DataInputStream iStrm = connection.openDataInputStream();
    ByteArrayOutputStream bStrm = null;
    Image im = null;

    try
    {
      // ContentConnection includes a length method
      byte imageData[];
      int length = (int) connection.getLength();
      if (length != -1)
      {
        imageData = new byte[length];

        // Read the png into an array
        iStrm.readFully(imageData);
      }
      else  // Length not available...
      {
        bStrm = new ByteArrayOutputStream();

        int ch;
        while ((ch = iStrm.read()) != -1)
          bStrm.write(ch);

        imageData = bStrm.toByteArray();
        bStrm.close();
      }

      // Create the image from the byte array
      im = Image.createImage(imageData, 0, imageData.length);
    }
    finally
    {
      // Clean up
      if (iStrm != null)
        iStrm.close();
      if (connection != null)
        connection.close();
      if (bStrm != null)
        bStrm.close();
    }
    return (im == null ? null : im);
} 
```

**更新：**另外，请查看[此 Nokia J2ME 文档以使用 REST Maps API](http://www.developer.nokia.com/Community/Wiki/Using_the_RESTful_Map_API_with_Java_ME)。请注意此警告：

> 这里的重点是确保无论请求成功还是失败，所有连接都已关闭。未能执行此基本内务处理会导致连接在几次请求后失败，并出现“没有可用的响应条目”错误。一旦接收到图像，它将作为静态图像保存在 im 对象中。

因此，如果您要保留原始代码，请确保在您的代码`finally`块中执行此操作：

```
finally {
    try {
        if (inputStream != null) 
             inputStream.close();

        if (connection != null) 
             connection.close();           
    } catch (Exception ex) {
        ex.printStackTrace();
    } 
```

# android - 启动 xml sax-parser 应用程序

> ID：14641987
> 
> 赞同：2
> 
> 时间：2013-02-01T08:01:58.620
> 
> 标签：android

这段代码有什么问题？我是 Android 的新手，我无法阅读我的 logcat 来找出问题所在。当我启动它时，我在 logcat 上收到很多启动错误。有人可以帮助我吗？

[这是我的项目](http://www.mediafire.com/?647u5kwxokccz4p)

这是我的 mainActivity 类：

```
package com.example.xmlparser;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;

import java.net.URL;

import javax.xml.parsers.SAXParser;
import javax.xml.parsers.SAXParserFactory;

import org.xml.sax.InputSource;
import org.xml.sax.XMLReader;

import com.example.xmlparser.XMLGettersSetters;
import com.example.xmlparser.XMLHandler;

import android.os.Bundle;
import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.util.Log;
import android.view.Menu;
import android.widget.ImageView;
import android.widget.TextView;

public class MainActivity extends Activity {

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    try {
        /**
        * Create a new instance of the SAX parser
        **/
        SAXParserFactory saxPF = SAXParserFactory.newInstance();
        SAXParser saxP = saxPF.newSAXParser();
        XMLReader xmlR = saxP.getXMLReader();
        URL url = new URL("http://www.nasa.gov/rss/image_of_the_day.rss");
        /**
        * Create the Handler to handle each of the XML tags.
        **/
        XMLHandler myXMLHandler = new XMLHandler();
        xmlR.setContentHandler(myXMLHandler);
        xmlR.parse(new InputSource(url.openStream()));
        } catch (Exception e) {

        }

        XMLGettersSetters xml = XMLHandler.getXMLData();
        resetDisplay(xml.getTitle(), xml.getDate(), xml.getDescription(),  xml.getImageUrl());
}
        public void resetDisplay(String title,String date,String description,String imageUrl)
        {
    TextView tv1 = (TextView) findViewById(R.id.textview1);
        tv1.setText(title);
    TextView tv2 = (TextView) findViewById(R.id.textView2);
    tv2.setText(title);
    TextView tv3 = (TextView) findViewById(R.id.textView3);
    tv3.setText(title);
    ImageView iv = (ImageView) findViewById(R.id.imageView1);
    iv.setImageBitmap(getBitmapFromURL(imageUrl));
        }
        public  Bitmap getBitmapFromURL(String src) {
        try {
        Log.e("src",src);
        URL url = new URL(src);
        HttpURLConnection connection = (HttpURLConnection) url.openConnection();
        connection.setDoInput(true);
        connection.connect();
        InputStream input = connection.getInputStream();
        Bitmap myBitmap = BitmapFactory.decodeStream(input);
        Log.e("Bitmap","returned");
        return myBitmap;
        } catch (IOException e) {
        e.printStackTrace();
        Log.e("Exception",e.getMessage());
        return null;
        } 
        }
        @Override
        public boolean onCreateOptionsMenu(Menu menu) {
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
        }
        } 
```

这是我的处理程序：

```
package com.example.xmlparser;

import org.xml.sax.Attributes;
import org.xml.sax.SAXException;
import org.xml.sax.helpers.DefaultHandler;

public class XMLHandler extends DefaultHandler {
String elementValue = null;
Boolean elementOn = false;
public static XMLGettersSetters data = null;
public static XMLGettersSetters getXMLData() {
    return data;
}
public static void setXMLData(XMLGettersSetters data) {
    XMLHandler.data = data;
}
/**
 * This will be called when the tags of the XML starts.
 **/
@Override
public void startElement(String uri, String localName, String qName,
        Attributes attributes) throws SAXException {
    elementOn = true;
      if(localName.equals("item"))
      {
          data = new XMLGettersSetters();
      }
      else if(localName.equals("enclosure"))
            {
                  String attributeValue = attributes.getValue("url");
                  data.setImageUrl(attributeValue);

            }

}
/**
 * This will be called when the tags of the XML end.
 **/
@Override
public void endElement(String uri, String localName, String qName)
        throws SAXException {
    elementOn = false;
    /**
     * Sets the values after retrieving the values from the XML tags
     * */
    if (localName.equalsIgnoreCase("title"))
        data.setTitle(elementValue);
    else if (localName.equalsIgnoreCase("pubDate"))
        data.setDate(elementValue);
    else if (localName.equalsIgnoreCase("description"))
        data.setDescription(elementValue);

}
/**
 * This is called to get the tags value
 **/
@Override
public void characters(char[] ch, int start, int length)
        throws SAXException {
    if (elementOn) {
        elementValue = new String(ch, start, length);
        elementOn = false;
    }
}
} 
```

这是我的 getter 和 setter 类：

```
package com.example.xmlparser;

import android.util.Log;

public class XMLGettersSetters {
private String title;
private String date;
private String description;
private String imageUrl;

public String getTitle() {
    return title;
}
public void setTitle(String Title) {
    this.title=Title;
    Log.i("This is the title:", Title);
}
public String getDate() {
    return date;
}
public void setDate(String Date) {
    this.date=Date;
    Log.i("This is the date:", Date);
}
public String getDescription() {
    return description;
}
public void setDescription(String Description) {
    this.description=Description;
    Log.i("This is the description:", Description);
}
public String getImageUrl() {
    return imageUrl;
}
public void setImageUrl(String ImageUrl) {
    this.imageUrl=ImageUrl;
    Log.i("This is the imageUrl:", ImageUrl);

}

} 
```

# c# - 在关于 ViewModelLocator 的 MVVMLight 中正确使用 MEF

> ID：14641995
> 
> 赞同：2
> 
> 时间：2013-02-01T08:02:45.547
> 
> 标签：c#, mvvm, mef, mvvm-light

我正在尝试使用 MEF 和 MVVMLight 来构建我的应用程序。

我已经设法将一些东西连接在一起，现在可以正常工作并成功导入，但在此过程中，我似乎完全错过了 ViewModelLocator，我只是想知道你如何正确使用 MEF 和 ViewModelLocator，也许你真的需要一个，或者是否我的设计出了问题？

因此，在我的 App.xaml 中，我禁用了 startupUri，在 App.xaml.cs 中我这样做：

```
[Import("MainWindow", typeof(Window))]
public new Window MainWindow
{
    get { return base.MainWindow; }
    set { base.MainWindow = value; }
}

protected override void OnStartup(StartupEventArgs e)
{
    base.OnStartup(e);
    // Load catalog in normal way
    ...
    MainWindow.Show();
} 
```

我的 MainWindow 代码是这样的：

```
[Export("MainWindow", typeof(Window))]
public partial class MainWindow : Window
{
    [ImportingConstructor]
    public MainWindow([Import("MainViewModel")] MainViewModel vm)
    {
        InitializeComponent();
        DataContext = vm;
    }
} 
```

最后我的 ViewModel 是这样的：

```
[Export("MainViewModel", typeof(MainViewModel))]
public class MainViewModel : ViewModelBase, IPartImportsSatisfiedNotification
{
    // I do some MEF imports here also
} 
```

但是我以正确的方式做这件事还是有更明智的方法？我真的可以忽略 ViewModelLocator 吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-04T05:24:14.010

我不知道这是否是“正确”的方式，但我也不直接使用 ViewModelLocator。我通常使用 Prism，并使用引导程序方法实现 MEF，但我通过这样做将我的视图连接到他们的视图模型：

```
[Import]
public TransactionViewModel ViewModel
{
    get { return (TransactionViewModel)DataContext; }
    set { DataContext = value; }
} 
```

这是在我的视图代码隐藏中代表我的 ViewModel 的属性。这样我就不会对我的 Window 的构造函数做任何事情。在您的示例中，您不再有默认构造函数（至少您显示）。虽然这在这里可能不是问题，但如果您养成这样做的习惯，然后需要让 WPF 为您实例化视图（例如在数据上下文中），您将遇到问题。

但除此之外，你所做的对我来说看起来很标准。您可能还想查看 Prism 的 MEF 实现。Prism 还包括 Unity，它实现了不同的目的，并且还有其他好处，可以更轻松地创建应用程序框架。