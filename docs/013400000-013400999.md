# StackOverflow 问答 13400000-13400999

# node.js - Pidfile 存在，但进程已死

> ID：13400000
> 
> 赞同：1
> 
> 时间：2012-11-15T14:51:27.380
> 
> 标签：node.js

我正在尝试运行我的 app.js 文件，但是当我执行`node app.js status`它时：

```
Pidfile exists, but process is dead. 
```

我已经尝试重新启动 app.js 文件，但仍然导致问题。当我这样做时`node app.js start`，它就开始了。当我这样做时，`node app.js stop`它就停止了。

但是在启动脚本并且做`node app.js status`的是sais之后`Pidfile exists, but process is dead.`

我知道这不是我的代码的问题，因为相同的代码在另一台服务器上运行良好。

有谁知道发生了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:22:19.210

我通过以下方式让它工作：

```
$ sudo kill -9 <app-pid>
$ node app start 
```

# php - php POST 数据不包含所有元素，尽管 post_max_size 足够大

> ID：13400002
> 
> 赞同：1
> 
> 时间：2012-11-15T14:51:42.017
> 
> 标签：php, post

> **可能重复：**
> [php 内的新限制：每个 POST 1000 个字段。有人知道，如果数字可以受到影响？](https://stackoverflow.com/questions/8710185/new-limit-within-php-1000-fields-per-post-does-someone-know-if-the-number-can)

我的表单包含大量文本输入。最后一个没有出现在`$_POST`数组中。我增加了`post_max_size`and `upload_max_size`to `128M`，但它没有帮助。我的帖子数据的大小没有超过这个限制。

* * *

表单包含`1001`类似的项目，`<input type="text" name="field_name[]"/>` 并且在我的 $_POST 中的该数组之后没有任何内容。

* * *

此问题仅出现在我的开发服务器（ubuntu 服务器 12.10）上，它在我的 linux Mint 13 上运行良好。两台机器上的默认 php.ini 文件中几乎没有编辑任何内容。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:54:22.903

尝试更改[max_input_vars](http://www.php.net/manual/en/info.configuration.php#ini.max-input-vars) - 这会限制 $_POST 数组的大小。

# javascript - JavaScript 数组和对象添加

> ID：13400003
> 
> 赞同：1
> 
> 时间：2012-11-15T14:51:52.677
> 
> 标签：javascript

我正在测试一些 JavaScript 概念，并试图了解原因：

```
typeof({} + {})
typeof([] + []) 
```

返回一个“字符串”：

```
typeof {}
typeof [] 
```

返回一个“对象”

我已经在 NodeJS、FireFox、Chrome 和 IE9 中尝试过，结果都一样。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:54:28.823

运算符被`+`定义为连接字符串或添加数字。如果您尝试其他方法，则必须先将操作数转换为字符串或数字。看起来这里首选字符串。

您可以通过分别定义函数`string`和对象来控制返回的内容`number``.toString``.valueOf`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:53:36.633

您不能使用 + 运算符连接或“添加”数组或对象。

如果您添加两个对象，它们的字符串表示将被连接起来。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:58:15.703

运算符尝试将`+`操作数强制为通用类型。在这种情况下，类型是字符串，因为添加对象或数组没有任何意义。

从`+`操作员文档中：

> 如果 Type(lprim) 是 String 或 Type(rprim) 是 String，则返回作为连接 ToString(lprim) 后跟 ToString(rprim) 的结果的 String

由于对象的默认值为字符串（空字符串，在空对象的情况下），因此操作的返回值为`'' + '' => ''`.

如果您关心内部结构，请参阅[`+`运算符](http://www.ecma-international.org/ecma-262/5.1/#sec-11.6.1)、[`ToPrimitive`](http://www.ecma-international.org/ecma-262/5.1/#sec-9.1)和对象的ECMAScript 文档。[`DefaultValue`](http://www.ecma-international.org/ecma-262/5.1/#sec-8.12.8)

# dom - 将变量值传递给样式节点时出现“0x80020003 - 找不到成员”

> ID：13400006
> 
> 赞同：2
> 
> 时间：2012-11-15T14:52:11.147
> 
> 标签：dom, autohotkey

在下面的代码中，如果我指定属性值如`doc.styleSheets[0].rules[0].style.fontweight`，它可以工作，但如果我传递一个变量，它会抛出错误。为什么？

```
html =
(Ltrim
    <html>
    <head>
    <style type="text/css">
    div {
        font-weight: bold;
    }
    </style>
    </head>
    </html>
)

doc := ComObjCreate("HTMLfile") 
doc.write(html)
ChangeCSSRules(doc, "fontweight", "normal")
msgbox % doc.documentElement.innerHTML

ChangeCSSRules(doc, property, value) {
    doc.styleSheets[0].rules[0].style[property] := value    ; this causes "Error:  0x80020003 - Member not found."
    ; doc.styleSheets[0].rules[0].style.fontweight := "normal"  ; this works            
} 
```

* * *

似乎使用 [] 会导致该错误。

```
html =
(Ltrim
    <html>
    <head>
    <style type="text/css">
    div {
        font-weight: bold;
    }
    </style>
    </head>
    </html>
)

doc := ComObjCreate("HTMLfile") 
doc.write(html)

doc.styleSheets[0].rules[0].style["fontweight"] := "normal" ; this causes "Error:  0x80020003 - Member not found."
; doc.styleSheets[0].rules[0].style.fontweight := "normal"  ; this works            
msgbox % doc.documentElement.innerHTML 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T07:52:17.873

据我所知，这是因为 COM 对象的某些属性可以接受参数

这是一个

> 已知限制：
> 
> 目前 xy[z]() 被视为 x["y", z]()，不支持。作为一种解决方法， (xy)[z]() 首先计算 xy，然后将结果用作方法调用的目标。请注意，xy[z].() 没有此限制，因为它的评估方式与 (xy[z]).() 相同。

像这样试试

```
test:="fontweight"
(doc.styleSheets[0].rules[0].style)[test] := "normal" 
```

希望能帮助到你

最好的。

黑圣人

# javascript - 在 nodejs 公用文件夹中公开 nodejs 库

> ID：13400009
> 
> 赞同：3
> 
> 时间：2012-11-15T14:52:17.693
> 
> 标签：javascript, node.js, express

有没有办法从 ejs 视图引用 node_modules 文件夹中包含的 Nodejs**库**？

我正在使用**expressjs**，并且我的客户端库是从**/public**文件夹提供的，如下所示，因此我无法从 ejs 视图访问**node_modules文件夹**

```
app.use(express.static(__dirname + '/public')); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:59:47.740

**更新：**

使用[requirejs](http://requirejs.org/)，您似乎可以直接从 node_modules 提供模块。请参阅[有关 requirejs 和 node 的文档](http://requirejs.org/docs/node.html)。

例子：

```
var requirejs = require('requirejs');

requirejs.config({
    nodeRequire: require
});

requirejs(['some_module'], function(some_module) {
    // Here, some_module will be loaded from your node_modules
}); 
```

**老答案：**

您可以在 express 中使用[app.locals](http://expressjs.com/api.html#app.locals)向您的视图公开属性或函数。

请参阅文档中的示例（上面链接）：

```
app.locals.title = 'My App';
app.locals.strftime = require('strftime'); 
```

# c# - 什么是用于一组大数据的好集合？

> ID：13400011
> 
> 赞同：0
> 
> 时间：2012-11-15T14:52:20.247
> 
> 标签：c#, asp.net, json

我正在尝试将数据序列化为 json，以便将其发送到 Web 服务。列表集合运行良好，直到我得到超过一万行。什么是用于转换为 json 的好集合，这样我就有了我想要的格式，并且如果数据变得太大，也不会耗尽内存？

```
[
   Items:
    {  name: "name", type: "type" } 
] 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:58:06.403

首先，您的数据不需要是 JSON 格式就可以将其发送到 Web 服务。

其次，集合的类型并不重要。如果它是一个`List`或`array`另一个，它以或多或少相同的方式被序列化。

第三，您是否绝对需要在一次调用中发送数千行？您不妨使用可管理的数据块多次调用您的服务。

最后，如果你真的需要发送这么大的数据块，你可以考虑压缩数据而不是以纯序列化的形式发送。

祝你好运！

# html - 正确设置标题...图像向右浮动 h1 标题

> ID：13400016
> 
> 赞同：0
> 
> 时间：2012-11-15T14:52:37.720
> 
> 标签：html, css

这是我的页面： [http ://clouderize.it/demo/index.html](http://clouderize.it/demo/index.html)

我会像这张图片一样设置标题： ![在此处输入图像描述](../Images/bda796d0e3fdba9b8c2092240806f202.png)

我在 css 属性上做错了什么？非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:55:14.477

将带有球的 div 放在 h1 元素之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:57:26.270

可能的解决方案：

```
<div style="position: absolute;top: 5px;right: 5px;"><img style="width:30px" src="themes/images/ball.jpg"></div> 
```

看到`float:right`被替换为`position: absolute;top: 5px;right: 5px;`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T14:59:05.350

将图像放入 h1 元素中，在文本之前：

```
<h1 class="ui-title" role="heading" aria-level="1">
   <div style="float:right">
      <img src="themes/images/ball.jpg" style="width:30px">
   </div>
   0.1!
</h1> 
```

然后像这样修复css：

```
.ui-header .ui-title, .ui-footer .ui-title {
    ...
    margin: 0.6em auto 0.8em;
} 
```

# android - Galaxy s3 的 Logcat 输出不显示活动名称

> ID：13400018
> 
> 赞同：0
> 
> 时间：2012-11-15T14:52:48.363
> 
> 标签：android, logcat

我正在尝试分析从 Galaxy s3 生成的日志，但它没有显示活动的名称。它以以下格式显示意图：

```
START {**intent.toShortString**} from pid 14354 
```

有什么方法可以从 Galaxy s3 获取传统类型的 logcat 输出。IE：

```
 START {**cmp=com.test/.Activity**} from pid 641 
```

# sharepoint - Silverlight - 滑动气泡图

> ID：13400020
> 
> 赞同：1
> 
> 时间：2012-11-15T14:52:49.373
> 
> 标签：sharepoint, silverlight-5.0

我正在寻找 Silverlight 代码来创建滑动气泡图控件（请不要使用第三方控件）。类似于 Share Point PerformancePoint 开箱即用的东西有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T06:53:30.157

[silverlight 工具包](http://silverlight.codeplex.com/)中有气泡图控件。您可以使用它来显示数据，您可以使用 CSOM（silverligh 的客户端对象模型）或 REST SharePoint API 来获取数据。

# c - 使用 FindFirstStreamW 查找带有 Zone.Identifier 的文件

> ID：13400023
> 
> 赞同：1
> 
> 时间：2012-11-15T14:53:01.900
> 
> 标签：c, windows, alternate-data-stream

好的，所以我正在尝试编写一些可以扫描文件夹并使用 Zone.Identifier 标签识别文件并删除标签（希望如此）的东西。我一直在寻找方法来做到这一点，我正在尝试几种不同的方法。

我有一个使用`BackupRead()`etc 的函数，但是我对这种事情有点新手，虽然我已经设法用这种方法找到了流，但我希望用它`FindFirstStreamW()`来让生活更轻松，或者至少了解更多关于这个一般。

下面是我第一次尝试使用它：

```
int
StreamsFunctionAlt (
   LPCTSTR     lpFileName )
{
   LPVOID               lpFindStreamData;
   HANDLE               hFindStream;
   STREAM_INFO_LEVELS   InfoLevel;
   DWORD                dwFlags;
   HANDLE               hFile;

    if ( !FileExists ( lpFileName ))
    {
       return 1;
    }

   lpFindStreamData = NULL;
   InfoLevel = 0;
   dwFlags = 0;

   hFindStream = FindFirstStreamW ( lpFileName,
                                    InfoLevel,
                                    lpFindStreamData,
                                    dwFlags );
   if ( !hFindStream == INVALID_HANDLE_VALUE )
   {
      FindNextStreamW ( hFindStream,
                        lpFindStreamData );
   }

   FindClose ( hFindStream );
   return 0;
} 
```

我所看到的`lpFindStreamData`是设置`NULL`并保持`NULL`并`FindFirstStreamW()`返回`0xffffffff`，我认为我可以安全地假设这不是我想要的。 `lpFileName`是正确的文件名，并且是具有备用流的文件的路径。

如前所述，我是一个菜鸟，C 和 Windows API 的新手，所以如果我使用不正确，犯了某种令人尴尬的愚蠢错误，或者你认为我在叫错树，那么请告诉我.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:09:45.893

第二个参数指定第三个参数的类型。在这种情况下，唯一的信息级别是 FindStreamInfoStandard，它指定数据参数应该是 WIN32_FIND_STREAM_DATA。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T19:37:20.583

[FindFirstStreamW](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364424%28v=vs.85%29.aspx)不会为您分配缓冲区。您必须自己分配缓冲区并将指针传递给它：

```
WIN32_FIND_STREAM_DATA findStreamData;

hFindStream = FindFirstStreamW (lpFileName,
                                InfoLevel,
                                &findStreamData,
                                dwFlags ); 
```

# grep - 在 grep 匹配的情况下执行程序

> ID：13400027
> 
> 赞同：1
> 
> 时间：2012-11-15T14:53:22.360
> 
> 标签：grep, exec, match, case

是的，我已经google了，但我没有找到解决方案。

我想 grep 程序输出并在 grep 匹配的情况下生成日期 +%s.%N。我试过了：

```
 cat test.txt | grep test | date +%s.%N 
```

但这只调用一次我怎么能多次调用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:54:29.010

```
grep test test.txt && date +%s.%N 
```

这是一个简写（布尔值）

```
if grep test test.txt; then date +%s.%N; fi 
```

**笔记**

*   不需要`cat | grep`，见[http://porkmail.org/era/unix/award.html#cat](http://porkmail.org/era/unix/award.html#cat)
*   如果您需要隐藏 grep 输出，您可以将`-q`开关添加到 grep（如果支持）或执行`grep &>/dev/null`
*   命令`unix`具有返回状态。基于此，我们可以使用**boolean AND** `&&`或**boolean OR** `||`

# java - 在 ArrayList 中计数 - Java

> ID：13400028
> 
> 赞同：1
> 
> 时间：2012-11-15T14:53:22.933
> 
> 标签：java, arraylist

***更新代码***

我试图找出一种方法来计算一个值在 ArrayList 中出现的频率。

```
System.out.println("Hand 1, Number of Clubs: " 
              + hands[0].frequency(hands[0], Card.Suit.CLUBS)); 
```

因此，在上述情况下，我想计算手中有多少“俱乐部”[0]。

```
public int frequency(Hand c, Suit suit){
    int count = 0;
    if(suit == suit) //need this to be "If suit (club) is present, count++)
            {
             count++;
            }    
    return count;
} 
```

我正在画一个空白......如果我将方法类型更改为 ArrayList 则我无法返回“count”

hands[0] 由以下人员创建：

```
 Hand[] hands = new Hand[4];
    for(int i=0; i<hands.length; i++) {
       hands[i]=new Hand();
       }
       for(int i=0; i<=Deck.size()+8; i++) {
          for(Hand hand:hands) {
             hand.addSingleCard(Deck.deal());
           }
       } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T14:58:04.440

# `Collections.frequency`

在方法中，您已经在[`Collections`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Collections.html)课堂上提供了此功能[`frequency`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Collections.html#frequency(java.util.Collection,java.lang.Object))。

```
public static int frequency(Collection<?> c, Object o) 
```

[这将返回集合](https://en.wikipedia.org/wiki/Java_collections_framework)中特定对象的出现次数。

请注意，如果不提供有效的[`equals`](https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/lang/Object.html#equals(java.lang.Object))方法，这将无法工作，或者至少不会与您想到的相等性一起工作，因为 Java 不知道您对相等性的含义。

# tomcat - Grails 应用程序不会在服务器上创建新日志

> ID：13400029
> 
> 赞同：2
> 
> 时间：2012-11-15T14:53:28.100
> 
> 标签：tomcat, grails

我正在尝试创建 4 个不同的日志来写入（使用 Tomcat）。这是代码（有一些奇怪的东西，因为我正在试验它）：

```
log4j = {

    appenders {
        rollingFile  name:'infoLog', file:'/logs/info.log', threshold: org.apache.log4j.Level.INFO
        rollingFile  name:'warnLog', file:'/logs/warn.log', threshold: org.apache.log4j.Level.WARN
        rollingFile  name:'errorLog', file:'/logs/error.log', threshold: org.apache.log4j.Level.ERROR
        rollingFile name:'debugLog', file:'/logs/debug.log', threshold: org.apache.log4j.Level.DEBUG
    }
    root {
        info 'infoLog', 'errorLog', 'warnLog', 'debugLog'
        error 'errorLog'
        warn 'warnLog'
        debug 'debugLog'        
    }

    info 'grails.app'
    error  'org.codehaus.groovy.grails.web.servlet',  //  controllers
           'org.codehaus.groovy.grails.web.pages', //  GSP
           'org.codehaus.groovy.grails.web.sitemesh', //  layouts
           'org.codehaus.groovy.grails.web.mapping.filter', // URL mapping
           'org.codehaus.groovy.grails.web.mapping', // URL mapping
           'org.codehaus.groovy.grails.commons', // core / classloading
           'org.codehaus.groovy.grails.plugins', // plugins
           'org.codehaus.groovy.grails.orm.hibernate', // hibernate integration
           'org.springframework',
           'org.hibernate',
           'net.sf.ehcache.hibernate'

    warn   'org.mortbay.log'
    debug 'grails.app'
} 
```

当我部署和运行应用程序时，我在 catalina.out 中得到了这个：

> log4j:ERROR setFile(null,true) 调用失败。java.io.FileNotFoundException：/logs/info.log（没有这样的文件或目录）在 java.io.FileOutputStream.openAppend(Native Method) 在 java.io.FileOutputStream.(FileOutputStream.java:177) 在 java.io。 FileOutputStream.(FileOutputStream.java:102)...

（对于我尝试创建的每个日志，我都会收到相同的消息）。我错过了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:35:29.557

该特定错误消息可能意味着该`/logs`目录不存在，或者它不能由运行 Grails 应用程序的用户 ID 写入。

但更一般地说，你的根记录器定义是错误的，你只需要一个日志级别（默认情况下你想为你没有指定更精确规则的记录器使用的级别）附加到所有附加程序，例如

```
root {
    error 'infoLog', 'errorLog', 'warnLog', 'debugLog'
} 
```

各种附加程序的阈值将确保每个附加程序都获得正确的消息：使用此配置`debugLog`将接收所有消息（调试、信息、警告和错误）；`infoLog`将收到信息、警告和错误；`warnLog`将收到警告和错误；并且`errorLog`只会收到错误消息。

# expressionengine - EE1 到EE2 升级，需要从EE1 升级后卸载模块怎么办？

> ID：13400033
> 
> 赞同：0
> 
> 时间：2012-11-15T14:53:47.350
> 
> 标签：expressionengine

所以我有一个非常复杂的站点，经过 3 次尝试后，我成功地从 EE1 升级到了 EE2。我现在安装了 Zoo flexible Admin 来为客户端配置 CP，当我这样做时，我收到以下错误。

```
Unable to load the requested language file: language/english/reeorder_lang.php 
```

此语言文件适用于 EE1 模块[REEorder](http://dvt.ee/adt2D6Z)不幸的是文档已不存在。我也不想恢复并再次使用结构、多个 ngnen 文件字段和矩阵进行升级。非常感谢一些关于如何通过 phpmyadmin 或其他方法从数据库中删除它的建议。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:10:55.833

查看`exp_modules`并删除`Reeorder`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:10:15.860

当然，您现在可以只创建该文件并在其中放入一个空的 $lang 变量……它会在您寻找更好的解决方案时将其关闭 :)

将以下内容放入所需的文件中

```
<?php

$lang = array()

;> 
```

# php - Yii CListView 与 标签

> ID：13400034
> 
> 赞同：5
> 
> 时间：2012-11-15T14:53:50.173
> 
> 标签：php, html, listview, yii

我正在尝试为我的 yii 应用程序使用主题。为了列出我正在使用 CListView 的投资组合部分的项目。在模板中，它使用列表（`<ul>`和`<li>`标签）来显示投资组合元素，因为我不想浏览所有文件和 jquery 的东西，所以我想做同样的事情。但是 CListView 默认添加了一些 div 标签。我需要知道 CListView 是否有任何配置可以使用`<ul>`标签代替`<div>`并为其设置类？

这是我所拥有的：

```
<ul class="clearfix port-det port-thumb">
     <?php
          $this->widget('zii.widgets.CListView', array(
                'dataProvider'=>$dataProvider,
                      'itemView'=>'_view',
         ));
     ?>
</ul> 
```

在 _view.php 中：

```
<li data-id="web print" class="clearfix">
  ...
</li> 
```

我最后得到的 HTML 代码是这样的：

```
<ul class="clearfix port-det port-thumb">
   <div id="yw0" class="list-view">
      <div class="summary">Displaying 1-8 of 9 result(s).</div>
      <div class="items">
          <li class="clearfix" data-id="web print">
            ...
          </li>
      </div>
   <div>
</ul> 
```

更新：我需要这样的东西：

```
<ul class="clearfix port-det port-thumb"> 
          <li class="clearfix" data-id="web print">
            ...
          </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T15:57:44.670

正如我所看到的，没有必要扩展`CListView`. 您可以设置它的[itemsTagName](http://www.yiiframework.com/doc/api/1.1/CListView#itemsTagName-detail)和[itemsCssClass](http://www.yiiframework.com/doc/api/1.1/CBaseListView#itemsCssClass-detail)：

```
<?php
    $this->widget('zii.widgets.CListView', array(
        'dataProvider'=>$dataProvider,
        'itemView'=>'_view',
        'itemsTagName'=>'ul',
        'itemsCssClass'=>'clearfix port-det port-thumb'
    ));
?> 
```

# iphone - 类扩展中变量属性的自动综合

> ID：13400038
> 
> 赞同：5
> 
> 时间：2012-11-15T14:53:57.037
> 
> 标签：iphone, objective-c, xcode

我需要向 UIViewController 添加一个实例变量和两个使用该实例变量的方法。我在类扩展中为变量添加了一个属性。然后我为具有方法名称的 UIViewController 创建了一个类别。类别头文件导入类扩展。

要使用该类别，我将其导入我自己的自定义视图控制器中。但是，当我调用其中一种类别方法（使用扩展中声明的属性）时，它会崩溃。

我可以通过在 UIViewController 的子类中合成属性来解决这个问题，但我认为这些应该自动合成。

我错过了什么吗？

### UIViewController_CustomObject.h（扩展头文件）

```
 #import <UIKit/UIKit.h>
 #import "CustomObject.h"

 @interface UIViewController ()

 @property (nonatomic, strong) CustomObject *customObject;

 @end 
```

### UIViewController+CustomObject.h（类别标题）

```
 #import <UIKit/UIKit.h>
 #import "UIViewController_CustomObject.h"

 @interface UIViewController (CustomObject)

 - (void)customMethod; 
```

@结尾

### UIViewController+CustomObject.m（分类实现）

```
 #import "UIViewController+CustomObject.h"

 @implementation UIViewController (CustomObject)

 - (void)customMethod
 {
      [self.customObject doSomething];
 } 
```

@结尾

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T11:42:19.483

我建议只使用一个类别和关联的对象。

**UIViewController+CustomObject.h**

```
#import <UIKit/UIKit.h>
#import "CustomObject.h"

@interface UIViewController (CustomObject)
@property (nonatomic, strong) CustomObject *customObject;

- (void)customMethod;

@end 
```

**UIViewController+CustomObject.m**

```
#import <objc/runtime.h>
#import "UIViewController+CustomObject.h"

static char customObjectKey;

@implementation UIViewController (CustomObject)

- (CustomObject *)customObject{
    CustomObject *_customObject= objc_getAssociatedObject(self, &customObjectKey);
    return _taskDateBarView;
}

- (void)setCustomObject :(CustomObject *)_customObject{
    objc_setAssociatedObject(self, &customObjectKey, _customObject, OBJC_ASSOCIATION_RETAIN_NONATOMIC);
}

- (void)customMethod
{
     [self.customObject doSomething];
}

@end 
```

# html - 有没有办法让 VS2012 知道我正在处理的文件将包含在另一个文件中（在标记验证和文件路径方面）？

> ID：13400039
> 
> 赞同：1
> 
> 时间：2012-11-15T14:53:57.107
> 
> 标签：html, validation, visual-studio-2012

我正在开发一种 HTML5 演示文稿，它只将一个文件 (index.html) 直接加载到浏览器，而所有其他“幻灯片”都通过 ajax 加载到该索引文件中。有没有办法告诉 Visual Studio，“嘿，这个文件应该被视为就好像它在另一个文件的这个位置一样”，这样它就不会再困扰我关于 div 需要在 body 标记中以及我所有的图像不存在（因为文件路径是相对于另一个文件夹中的索引文件）？

我试过用谷歌搜索，但我真的不知道我什至会使用什么搜索词......

为了澄清，以下是我希望使用的功能（如果 VS 了解此文件最终在哪里结束，这将是有效的）：

-CSS 类/id 智能感知（来自脚本标签）

-停止在我的 div 标签下放置红色波浪线！

- 正确的链接路径（到图像、文件等）

# pdf - acrobat pdf - xfdf 数据中的字符 UTF8 编码

> ID：13400040
> 
> 赞同：0
> 
> 时间：2012-11-15T14:53:58.580
> 
> 标签：pdf, utf-8, acrobat, xfdf

解决方案如下所示：

1.  PDF 文件中的表单下方有一个提交按钮。
2.  提交按钮正在通过 POST 发送 XFDF 表单数据。
3.  当我从 POST 数据中生成（在 PHP 中）XFDF 文件时，以 UTF8 编码的抛光字符被弄乱了。
4.  当您将 XFDF 文件填充回 PDF 字符时就可以了。

问题：Adobe Reader 正在做什么来正确显示这个混乱的 UTF8 字符？

如何在服务器端的 PHP 中获得正确的 UTF8 数据？

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T16:10:57.750

一切都在 UTF8 中。XFDF 文件、数据库连接和表。

问题出在 PHP 设置上。

setlocale(LC_ALL, 'pl_PL', 'pl', 'Polish_Poland.28592');

并且问题解决了。

# c# - 如何在c#中更正规则“运算符重载已命名替代”

> ID：13400043
> 
> 赞同：3
> 
> 时间：2012-11-15T14:54:09.440
> 
> 标签：c#, sonarqube

由于运算符重载（运算符>和运算符<）违反规则[运算符重载命名为alternate](http://msdn.microsoft.com/en-us/library/ms182355%28v=vs.80%29.aspx)，运算符>和<需要替代方法比较，但是，由于只能有一个比较方法，该方法的签名应该是什么?

例如，我有：

```
public static bool operator >(XXX lhs, XXX rhs) 
```

和

```
public static bool operator <(XXX lhs, XXX rhs) 
```

如何提供一种比较方法，使其与大于和小于运算符的行为相同？

编辑：

唯一返回正`int Compare()`（大于）、负（小于）和 0（等于），在我的重载运算符中有一个 >= 运算符，这意味着我的比较方法也应该处理（大于或等于）sinario

那么有 >、< >= 和 <= 四个重载运算符呢？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T14:56:55.080

```
public static int Compare(XXX lhs, XXX rhs); 
```

*返回值：*

*   小于零
    *lhs*小于*rhs*。
*   零
    *lhs*等于*rhs*。
*   大于零
    *lhs*大于*rhs*。

*例子：*

*   [DateTime.Compare 方法](http://msdn.microsoft.com/en-us/library/system.datetime.compare.aspx)
*   [Decimal.Compare 方法](http://msdn.microsoft.com/en-us/library/system.decimal.compare.aspx)

*用法：*

```
// operator            // named alternative
   x < y                  Compare(x, y) < 0
   x <= y                 Compare(x, y) <= 0
   x > y                  Compare(x, y) > 0
   x >= y                 Compare(x, y) >= 0 
```

实现[IComparable<T>](http://msdn.microsoft.com/en-us/library/4d7sx9hd.aspx)也是一个好主意。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:56:55.620

您有一个比较方法，返回值确定两个操作数是否相等 (0)，或者 x 是否小于 y，或者 x 是否大于 y。

例如，查看[`String.Compare`](http://msdn.microsoft.com/en-us/library/84787k22.aspx)方法。

# php - 在php中ssh2下使用php执行命令

> ID：13400047
> 
> 赞同：0
> 
> 时间：2012-11-15T14:54:21.373
> 
> 标签：php, ssh, exec

使用 Mint 终端，我的脚本使用 ssh2_connect 和 ssh2_auth-password 进行连接。成功登录后，我想运行一个命令，该命令将为我提供硬件 cpu。有没有一种方法可以用来在我的脚本中执行命令然后显示结果。我已经使用 system 和 exec 进行 ping 操作。如果我在终端中，我会登录。然后输入“获取硬件cpu”

在终端中它看起来像这样：

测试~$获取硬件cpu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:10:56.373

您需要访问外壳：

```
$connection = ssh2_connect($ip, $port);
$stream = ssh2_shell($connection);
fputs($stream, $input);
$buffer = fread($stream, 8192); 
```

看看这个例子：

```
$input = "ls\nexit\n";
$connection = ssh2_connect($host, $port);
ssh2_auth_password($connection, $user, $pass);
$stream = ssh2_shell($connection);
stream_set_blocking($stream, 1);
stream_set_timeout($stream, 2);
fputs($stream, $input);

while (!feof($stream)) {
        echo $buffer = fread($stream, $buffersize);
} 
```

您可能不得不手动设置`sleep()`，`fread()`因为人们在设置 ssh2 流阻塞时会遇到问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T14:11:02.343

你可以试试这个（需要[phpseclib，一个纯 PHP SSH2 实现](http://phpseclib.sourceforge.net/)）：

```
<?php
include('Net/SSH2.php');

$ssh = new Net_SSH2('www.domain.tld');
if (!$ssh->login('username', 'password')) {
    exit('Login Failed');
}

echo $ssh->exec("grep 'model name' /proc/cpuinfo");
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:07:13.277

我不知道这个“获取硬件”命令来自哪里。如果您想弄清楚是什么 CPU 为系统供电，那么

```
grep 'model name' /proc/cpuinfo 
```

将输出cpu的ID字符串：

```
marc@panic:~$ grep 'model name' /proc/cpuinfo
model name      : Intel(R) Core(TM)2 CPU          6600  @ 2.40GHz
model name      : Intel(R) Core(TM)2 CPU          6600  @ 2.40GHz 
```

# sql - 编写查询以显示来自两个不同表的数据

> ID：13400055
> 
> 赞同：0
> 
> 时间：2012-11-15T14:54:27.687
> 
> 标签：sql, tsql, sql-server-2012

我试图将 Vendors 表中的一列作为“VendorName”，并将 Invoices 表中 InvoiceTotal 列中的一列作为 InvoiceAverage。我正在尝试平均表中每个供应商的发票总额

```
SELECT InvoiceTotal
FROM Invoices
GROUP BY Invoices.InvoiceTotal
ORDER BY AVG(InvoiceTotal) 
```

据我所知，它没有给我任何我想要的东西

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T14:56:32.070

假设您加入字段 VendorId：

```
SELECT v.VendorName, AVG(i.InvoiceTotal) AS InvoiceAverage
FROM Invoices i
    JOIN Vendors v ON i.VendorId = v.VendorId
GROUP BY v.VendorName
ORDER BY AVG(i.InvoiceTotal) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:01:11.653

```
select VendorName, avg(InvoiceTotal) as 'some column name'
from Invoices
group by VendorName
-- order by avg(InvoiceTotal) desc/ asc 
```

您想按平均的值进行分组。这就是它的工作原理。

# css - DIV 内的图像和描述

> ID：13400058
> 
> 赞同：3
> 
> 时间：2012-11-15T14:54:38.187
> 
> 标签：css

我正在尝试将图像及其描述放在图像底部（以及不透明度为 0.8 的图像上方）。这两个元素都在 div 元素内。但启用显示标题。

```
.title {
    opacity:0.8;
    background-color:black;
    color:white;
    height:40px;
    width:100%;
    position:relative;
    bottom:0px;
    z-index:2;
    clear:both;
}

.tilebg {
    position:relative;
    top:0px;
    height:100%;
    z-index:0;
    opacity:1;
} 
```

我做了一个[例子](http://jsfiddle.net/wvcNC/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:11:21.333

以下是定位的工作原理：

`position:relative`- 这将当前元素设置为原点 (0,0)

`position:absolute`- 这将设置元素相对于其原点的位置。如果父母有`position:relative`，那将成为原点。否则，它会沿着 HTML 树向上直到找到一个，如果没有定义，则默认为 BODY。

所以：父母=相对，孩子=绝对

```
.item {
    opacity:1;
    background-color:grey;
    margin:20px;
    margin-left:20px;
    width:200px;
    height:200px;
    position:relative;
    background-image:url(http://i.imgur.com/vdDQgb.jpg);
}

.title {
    opacity:0.8;
    background-color:black;
    color:white;
    height:40px;
    width:100%;
    position:absolute;
    bottom:0px;
    z-index:2;
    clear:both;
    font-size:12px;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:20:39.030

我鼓励您使用新元素[`figure`](http://www.w3.org/wiki/HTML/Elements/figure)和[`figcaption`](http://www.w3.org/wiki/HTML/Elements/figcaption)元素，因为它们是为此目的而创建的：

```
<figure>
    <img src="http://placekitten.com/300/200" />
    <figcaption>This is the caption.</figcaption>
</figure> 
```

​使用以下 CSS：

```
figure {
    width: 300px; height: 200px;
    position: relative;  /* Permits placement figcaption absolutely */
}

figcaption {
    position: absolute;
    bottom: 0; left: 0; width: 100%;
    background: rgba(0,0,0,.8); /* Semi-transparent background */
} 
```

演示：http: [//jsfiddle.net/qu4a3/1/](http://jsfiddle.net/qu4a3/1/)

# jquery - jQuery UI Sortable 在第一次和最后一次禁用时失败

> ID：13400060
> 
> 赞同：1
> 
> 时间：2012-11-15T14:54:45.210
> 
> 标签：jquery, jquery-ui, jquery-ui-sortable

我有以下代码：

```
jQuery("#wiggle-available, #wiggle-current" ).sortable({
        connectWith: ".wiggle-connect",
        items: 'li.sortable',
        placeholder: "ui-state-highlight"
}).disableSelection(); 
```

所以，基本上我有 2 个可排序的列表，我可以在它们之间转移项目。问题是，在我的第二个列表中，我希望第一个和最后一个项目不可拖动且不可排序（它们没有`sortable`类，所以一切都很好）。

当列表中填充了 3 个以上的项目（2 个固定的项目和它们之间的一个）时，它可以正常工作，但是一旦我从中间删除了 1 个项目，我就不能在剩下的 2 个项目之间插入任何东西，仅在列表的末尾。

2 个问题： 1\. 是否有可能让我在 2 个不可排序的项目之间插入项目？2\. 是否可以禁用在列表末尾添加项目？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:19:06.777

找到了解决方案 :) 对于任何可能感兴趣的人：

解决方法是`sortable`在这两个不可排序的项目之间添加一个可排序的项目（带有类），高度为 0。这样用户就看不到它，也不能把它拖走。该列表始​​终有 3 个项目，但显示 2 个。它解决了我的两个问题:)

这*可能*会在调用时引起问题，`.sortable("serialize")`但在我的情况下，这不是问题，并且有解决方法。

# knockout.js - 淘汰赛验证禁用验证

> ID：13400063
> 
> 赞同：10
> 
> 时间：2012-11-15T14:54:51.477
> 
> 标签：knockout.js, knockout-validation

我有对项目进行验证的 ko.observableArrays。用户可以将项目标记为已删除。当它被标记为已删除时，我需要禁用对该项目的验证。

如何动态禁用验证？

示例：http: [//jsfiddle.net/3RZjT/2/](http://jsfiddle.net/3RZjT/2/)

```
<div data-bind="foreach: names">
    <input data-bind="value: name, valueUpdate: 'afterkeydown'" /> <a data-bind="click: deleteMe, text:deleted()?'undelete':'delete'" href="#">delete</a><br/>
</div>

function Person(name){
    var self = this;
    self.name = ko.observable(name).extend({ required: true});
    self.deleted = ko.observable(false);
    self.deleteMe = function(){ 
        self.deleted(!self.deleted());
        self.deleted.extend({ validatable: !self.deleted()});
    };
}

var viewModel = {
    names: ko.observableArray([new Person("Ken"), new Person("")])
};

ko.applyBindings(viewModel); 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T15:29:15.533

**更新** 旧答案对于 Knockout-Contrib 版本的验证无效（那是积极开发的分支）

[https://github.com/Knockout-Contrib/Knockout-Validation](https://github.com/Knockout-Contrib/Knockout-Validation)

使用 onlyIf 选项，例如

```
this.enable = ko.observable(true);
this.required = ko.observable().extend({ required: { onlyIf: this.enable } }); 
```

**旧答案**

尝试

```
this.property.extend({ validatable: false }); // disables all validation for property 
```

或者

```
this.property.extend({ required: false }); // disables required validation for property 
```

# c# - 使用变量类型进行强制转换

> ID：13400066
> 
> 赞同：0
> 
> 时间：2012-11-15T14:55:03.220
> 
> 标签：c#, casting

我尝试将 Object int 的变量类型转换为 var。

我的尝试是：

```
var dummy = (items[items.Count() - 1].GetType()) items[items.Count()-1]; 
```

我不知道我做错了什么，我看不到我的错误，但调试器说只有赋值、递减和“新对象”表达式可以用作命令......但这就是我正在做的......

有人可以告诉我我的错误吗？非常感谢，并为那个“初学者问题”感到抱歉。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:59:26.463

您需要使用[**Convert.ChangeType**](http://msdn.microsoft.com/en-us/library/dtb69x08.aspx)

```
var obj = Convert.ChangeType(d, items[items.Count() - 1].GetType()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:57:58.627

这是您遇到的错误的根源。

您的编译器将`(items[items.Count() - 1].GetType())`其视为表达式，而不是强制转换语句，因此它看到的是

```
getAValue() (items[items.Count() - 1].GetType()) 
```

这没有任何意义。

你应该像其他人所说的那样转换你的变量。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:00:45.140

强制转换是一种编译类型操作，您是在告诉编译器：“这个对象是 [在此处插入类型]”。 `GetType()`是返回特定类型（类型`Type`）的运行时方法。所以有几个问题，你不能在编译时构造中使用运行时方法。其次，在这种情况下，您实际上会强制转换（假设这是可能的）`Type`而不是说`String`（假设`GetType()`返回`String`）。

我不确定您要完成什么，但这可能是您想要做的：http: [//msdn.microsoft.com/en-us/library/dtb69x08.aspx](http://msdn.microsoft.com/en-us/library/dtb69x08.aspx)

另外，我认为您可能不理解是什么`var`（根据您的一些评论）。您“将事物转换为 var”，var 本质上是一种允许编译器推断类型的快捷方式。所以是这样的：

```
var myString = "this is a test"; 
```

相当于：

```
string myString = "this is a test"; 
```

# web-services - 无法使用 java 读取 SharePoint 列表

> ID：13400068
> 
> 赞同：4
> 
> 时间：2012-11-15T14:55:06.203
> 
> 标签：web-services, sharepoint, soap, jax-ws, webservices-client

在这里，我正在尝试阅读共享点列表。为此，我做了以下事情：我已经下载了从 URL 获得的 WSDL 文件，例如：sharepointsite.com/_vti_bin/Lists.asmx?WSDL。我已经执行了以下命令在目录“C:\Program Files\Java\jdk1.6.0_12\bin\wsimport.exe”-p com.microsoft.schemas.sharepoint.soap -keep -extension Lists 中生成类.wsdl。在我的 eclipse IDE java 应用程序中导入了这些类。

我写了下面的代码

/* 创建一个连接到给定的 SharePoint Web 服务的端口。

```
 * Authentication is done here. It also prints the authentication details

 * in the console.

 * @param userName SharePoint username

 * @param password SharePoint password

 * @return port ListsSoap port, connected with SharePoint

 * @throws Exception in case of invalid parameters or connection error.

 */

public static ListsSoap sharePointListsAuth(String userName, String password) throws Exception {

    ListsSoap port = null;

    if (userName != null && password != null) {

        try {

            Lists service = new Lists();

            port = service.getListsSoap();

            System.out.println("Web Service Auth Username: " + userName);

            ((BindingProvider) port).getRequestContext().put(BindingProvider.USERNAME_PROPERTY, userName);

            ((BindingProvider) port).getRequestContext().put(BindingProvider.PASSWORD_PROPERTY, password);

        } catch (Exception e) {

            throw new Exception("Error: " + e.toString());

        }

    } else {

        throw new Exception("Couldn't authenticate: Invalid connection details given.");

    }

    return port;

}
/**

 * Creates a string from an XML file with start and end indicators

 * @param docToString document to convert

 * @return string of the xml document

 */

public static String xmlToString(Document docToString) {

    String returnString = "\n-------------- XML START --------------\n";

    try {

        //create string from xml tree

        //Output the XML

        //set up a transformer

        TransformerFactory transfac = TransformerFactory.newInstance();

        Transformer trans;

        trans = transfac.newTransformer();

        trans.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");

        trans.setOutputProperty(OutputKeys.INDENT, "yes");

        StringWriter sw = new StringWriter();

        StreamResult streamResult = new StreamResult(sw);

        DOMSource source = new DOMSource(docToString);

        trans.transform(source, streamResult);

        String xmlString = sw.toString();

        //print the XML

        returnString = returnString + xmlString;

    } catch (TransformerException ex) {

        Logger.getLogger(Manager.class.getName()).log(Level.SEVERE, null, ex);

    }

    returnString = returnString + "-------------- XML END --------------";

    return returnString;

}
/**
02
 * Connects to a SharePoint Lists Web Service through the given open port,
03
 * and reads all the elements of the given list. Only the ID and the given
04
 * attributes (column names) are displayed, as well as a dump of the SOAP
05
 * response from the Web Service (for debugging purposes).
06
 * @param port an already authentificated SharePoint Online SOAP port
07
 * @param listName original name of the Sharepoint list that is going to be read
08
 * @param listColumnNames arraylist containing the various names of the Columns
09
 * of the SharePoint list that are going to be read. If the column name isn't
10
 * found, then an exception will be thrown
11
 * @param rowLimit limits the number of rows (list items) that are going to
12
 * be returned
13
 * @throws Exception
14
 */

public static void displaySharePointList(ListsSoap port, String listName, ArrayList<String> listColumnNames, String rowLimit) throws Exception {

    if (port != null && listName != null && listColumnNames != null && rowLimit != null) {

        try {

            //Here are additional parameters that may be set

            String viewName = "";

            GetListItems.ViewFields viewFields = null;

            GetListItems.Query query = null;

            GetListItems.QueryOptions queryOptions = null;

            String webID = "";

            //Calling the List Web Service

            GetListItemsResponse.GetListItemsResult result = port.getListItems(listName, viewName, query, viewFields, rowLimit, queryOptions, webID);

            Object listResult = result.getContent().get(0);

            if ((listResult != null) && (listResult instanceof ElementNSImpl)) {

                ElementNSImpl node = (ElementNSImpl) listResult;

                //Dumps the retrieved info in the console

                Document document = node.getOwnerDocument();

                System.out.println("SharePoint Online Lists Web Service Response:" + Manager.xmlToString(document));

                //selects a list of nodes which have z:row elements

                NodeList list = node.getElementsByTagName("z:row");

                System.out.println("=> " + list.getLength() + " results from SharePoint Online");

                //Displaying every result received from SharePoint, with its ID

                for (int i = 0; i < list.getLength(); i++) {

                    //Gets the attributes of the current row/element

                    NamedNodeMap attributes = list.item(i).getAttributes();

                    System.out.println("******** Item ID: " + attributes.getNamedItem("ows_ID").getNodeValue()+" ********");

                    //Displays all the attributes of the list item that correspond to the column names given

                    for (String columnName : listColumnNames) {

                        String internalColumnName = "ows_" + columnName;

                        if (attributes.getNamedItem(internalColumnName) != null) {

                            System.out.println(columnName + ": " + attributes.getNamedItem(internalColumnName).getNodeValue());

                        } else {

                            throw new Exception("Couldn't find the '" + columnName + "' column in the '" + listName + "' list in SharePoint.\n");

                        }

                    }

                }

            } else {

                throw new Exception(listName + " list response from SharePoint is either null or corrupt\n");

            }

        } catch (Exception ex) {

            throw new Exception("Exception. See stacktrace." + ex.toString() + "\n");

        }

    }
}
public static void main(String[] args) {

        try {

            //Authentication parameters

            String userName = "domain\\username";

            String password = "pass";

            //Opening the SOAP port of the Lists Web Service

            ListsSoap port = Manager.sharePointListsAuth(userName, password);

            /*

             * Lists Web service parameters

             * The list names below must be the *original* names of the list.

             * if a list or column was renamed from SharePoint afterwards,

             * these parameters don't change.

             */

            String listName = "listname";

            String rowLimit = "2";

            ArrayList<String> listColumnNames = new ArrayList<String>();

            listColumnNames.add("Name");

            listColumnNames.add("ID");

            //Displays the lists items in the console

            Manager.displaySharePointList(port, listName, listColumnNames, rowLimit);

        } catch (Exception ex) {

            System.err.println(ex);

        }

    } 
```

我收到以下异常：

Web 服务身份验证用户名：“域\用户名”java.lang.Exception：异常。请参阅 stacktrace.javax.xml.ws.soap.SOAPFaultException：引发了“Microsoft.SharePoint.SoapServer.SoapServerException”类型的异常。

```
 It would be helpfull if i get the specific exception from the server.With this expection i am unable to track my pgm. 
    I dont know where did i go wrong?  am i missing anything ?  any configuration is required ?

    Thanks in advance for your help 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-18T03:54:37.487

我有同样的问题，尝试使用 Authenticator ：

```
new BasicAuthentication(userName,password).authenticate(); 
```

我的 BasicAuthentication 类：

```
import java.net.Authenticator;
import java.net.PasswordAuthentication;

public class BasicAuthentication extends Authenticator
{
    private String username;
    private String password;

    public BasicAuthentication(String username, String password)
    {
        this.username = username;
        this.password = password;
    }

    public PasswordAuthentication getPasswordAuthentication()
    {
        return (new PasswordAuthentication(username,password.toCharArray()));
    }

    public void authenticate()
    {
        Authenticator.setDefault(this);
    }
} 
```

# mysql - 选择条目不为空的列名

> ID：13400071
> 
> 赞同：1
> 
> 时间：2012-11-15T14:55:14.483
> 
> 标签：mysql, select, null

我想要一个表中至少有一个非`NULL`数据条目的列的列表。

换句话说，我想获取以下至少返回一个条目的列名：

```
SELECT DISTINCT column_name FROM table WHERE column_name IS NOT NULL 
```

我尝试了以下方法：

```
SELECT column_name
FROM information_schema.columns
WHERE table_name = "table_name"
AND EXISTS (
    SELECT DISTINCT column_name FROM table_name WHERE column_name IS NOT NULL
) 
```

但这也会返回所有条目所在的列名`NULL`。

那么如何只获取那些没有`NULL`条目的列呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T17:26:19.110

从[`INFORMATION_SCHEMA.COLUMNS`](http://dev.mysql.com/doc/en/columns-table.html)表中创建一个包含您希望执行的 SQL 的字符串，然后从该字符串[准备一个语句](http://dev.mysql.com/doc/en/sql-syntax-prepared-statements.html)并执行它。

我们希望构建的 SQL 如下所示：

```
 SELECT 'column_a'
  FROM   table_name
  WHERE `column_a` IS NOT NULL
  HAVING COUNT(*)
UNION ALL
  SELECT 'column_b'
  FROM   table_name
  WHERE `column_b` IS NOT NULL
  HAVING COUNT(*)
-- etc. 
```

（可以省略`WHERE`子句并替换`COUNT(*)`为`COUNT(column)`，但我*认为*这在索引列上可能效率较低）。

这可以使用以下方法完成：

```
SET group_concat_max_len = 4294967295;

SELECT GROUP_CONCAT(
 ' SELECT ',QUOTE(COLUMN_NAME),
 ' FROM   table_name',
 ' WHERE `',REPLACE(COLUMN_NAME, '`', '``'),'` IS NOT NULL',
 ' HAVING COUNT(*)'
SEPARATOR ' UNION ALL ')
INTO   @sql
FROM   INFORMATION_SCHEMA.COLUMNS
WHERE  TABLE_SCHEMA = DATABASE()
   AND TABLE_NAME = 'table_name';

PREPARE stmt FROM @sql;
EXECUTE stmt;
DEALLOCATE PREPARE stmt; 
```

在[sqlfiddle](http://sqlfiddle.com/#!2/32193/28/3)上查看。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-23T09:39:22.163

使用此过程，这将打印至少有一个非空行的表的列名。

```
create or replace procedure list_col_notNull(tblName in varchar2)
as
lv_col_name varchar2(200);
lv_ctr number;
lv_sql varchar2(400);
CURSOR cur_col_name is
SELECT column_name
FROM USER_TAB_COLUMNS U
WHERE table_name = tblName order by column_name asc;
begin
open cur_col_name;

LOOP
    FETCH cur_col_name INTO lv_col_name; 
    EXIT WHEN cur_col_name%NOTFOUND; 
    lv_sql := 'select count(1) From ' || tblName || ' where ' || lv_col_name || ' is not null'  ;  
    EXECUTE IMMEDIATE lv_sql into lv_ctr;
    if lv_ctr > 0
    then
        dbms_output.put_line(lv_col_name);
    end if; 
```

# ruby-on-rails - 我们可以安装两个不同版本的 ruby 并将它们映射到同一服务器上各自版本的 rails 吗？

> ID：13400072
> 
> 赞同：3
> 
> 时间：2012-11-15T14:55:16.223
> 
> 标签：ruby-on-rails, ruby

我已经安装了运行良好的 Ruby 1.8.7 和 Rails 2.3.8。

现在，我需要安装 Rails 3.2.8 以安装 gem，我的目标是根据开发方式构建与 Rails 2.3.8 兼容的相同版本。

我尝试使用 **gem install rails -v=3.2.8 -include-dependencies安装 Rails 3.2.8**

但令我惊讶的是，当我检查**gem list rails**时，它只显示 Rails 2.3.8 并且我无法使用**rails *3.2.8* test**创建新应用程序。

我不确定，但我读到 Rails > 3.0 不适用于 Ruby 1.8.7，需要 Ruby>1.9

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:01:12.980

Rails 3.2 与 Ruby 1.8.7 兼容。你可以做的是拥有一个像 RVM 或 Rbenv 这样的 ruby​​ 版本管理器。我使用 RVM，但有些人更喜欢 Rbenv，因为它不会弄乱你的 shell。

使用版本管理器将允许您拥有不同版本的 ruby​​，并且使用 RVM，您可以为每个特定版本创建不同的 gemset。

**编辑**这是 Rails 3.2 发行说明的链接[http://guides.rubyonrails.org/3_2_release_notes.html](http://guides.rubyonrails.org/3_2_release_notes.html)

**编辑**

您可以使用几个命令。

`rvm list`

将列出您已安装的 ruby​​ 版本。

要安装一个 ruby​​ 版本，您需要执行类似`rvm install 1.9.3`使用该版本的操作，`rvm use 1.9.3`您甚至可以指定补丁级别并在不同版本之间切换。

现在，rvm 使用 gemsets 的概念，要创建 gemset，您可以使用以下命令在项目中设置 .rvmrc 文件

`rvm --create ruby-1.9.3-p286@some-project`

它将创建一组名为的 gem `some-project`，您可以在其中安装所需的任何 gem 版本。

请注意，命令也可以从命令行运行。这将分离每个项目的所有 gem，您可以像使用 ruby​​ 版本一样在 gemset 之间切换。然后在任何一个 gemset 中运行 gem install rails 和版本

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:06:48.123

您的 ruby​​ 版本对于 rails 2 和 3 都足够好。

尝试创建新的应用程序，如下所示：

```
rails _3.2.8_ new appname 
```

# javascript - 获取选择选项的值然后输出另一个选择选项

> ID：13400073
> 
> 赞同：1
> 
> 时间：2012-11-15T14:55:21.303
> 
> 标签：javascript, ajax

我是 AJAX 和 PHP 的新手，我有以下代码：

```
<head>
    <script type="text/javascript">
        function crimeselect(){
            var select = document.getElementById("crime").value;
        }
    </script>
</head>
<body>
    <select name="crime" id="crime" onChange="crimeselect();">
        <option value="CVPerson">Crimes VS Person</option>
        <option value="CVMO">Crimes VS Moral and Order</option>
        </select>

    <select id="CVPerson" onchange="">
        <option>Homicide</option>
        <option>Kidnapping</option>
    </select>

    <select id="CVMO" onchange="">
        <option>Alarm and Scandal</option>
        <option>Assault/Resistance to Authority</option>
    </select>
</body> 
```

我想要的是，当我选择“Crimes VS Person”时，ID 为“CVPerson”的选择选项只会出现，而 ID 为“CVHO”的选择选项不会出现。如果我选择“犯罪 VS 道德和秩序”也一样。

我不知道该怎么做。请有任何提示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:15:07.970

```
<head>
    <script type="text/javascript">
        function crimeselect(){

            document.getElementById(document.getElementById("crime").value).style.visibility = 'visible';         

        }
    </script>
</head>
<body>
    <select name="crime" id="crime" onChange="crimeselect();">
        <option value="CVPerson">Crimes VS Person</option>
        <option value="CVMO">Crimes VS Moral and Order</option>
        </select>

    <select id="CVPerson" onchange="" style="visibility:hidden;">
        <option>Homicide</option>
        <option>Kidnapping</option>
    </select>

    <select id="CVMO" onchange=""  style="visibility:hidden;">
        <option>Alarm and Scandal</option>
        <option>Assault/Resistance to Authority</option>
    </select>
</body>​​​ 
```

# java - 反射泛型获取字段值

> ID：13400075
> 
> 赞同：160
> 
> 时间：2012-11-15T14:55:24.020
> 
> 标签：java, reflection

我正在尝试通过反射获取字段的值。问题是我不知道该字段的类型，并且必须在获取值时决定它。

此代码导致此异常：

> 无法将 java.lang.String 字段 com....fieldName 设置为 java.lang.String

```
Field field = object.getClass().getDeclaredField(fieldName);
field.setAccessible(true);

Class<?> targetType = field.getType();
Object objectValue = targetType.newInstance();

Object value = field.get(objectValue); 
```

我尝试强制转换，但出现编译错误：

```
field.get((targetType)objectValue) 
```

或者

```
targetType objectValue = targetType.newInstance(); 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：174
> 
> 时间：2012-11-15T15:47:11.847

就像之前回答的那样，您应该使用：

```
Object value = field.get(objectInstance); 
```

另一种有时更受欢迎的方法是动态调用 getter。示例代码：

```
public static Object runGetter(Field field, BaseValidationObject o)
{
    // MZ: Find the correct method
    for (Method method : o.getMethods())
    {
        if ((method.getName().startsWith("get")) && (method.getName().length() == (field.getName().length() + 3)))
        {
            if (method.getName().toLowerCase().endsWith(field.getName().toLowerCase()))
            {
                // MZ: Method found, run it
                try
                {
                    return method.invoke(o);
                }
                catch (IllegalAccessException e)
                {
                    Logger.fatal("Could not determine method: " + method.getName());
                }
                catch (InvocationTargetException e)
                {
                    Logger.fatal("Could not determine method: " + method.getName());
                }

            }
        }
    }

    return null;
} 
```

另请注意，当您的类继承自另一个类时，您需要递归确定 Field。例如，获取给定类的所有字段；

```
 for (Class<?> c = someClass; c != null; c = c.getSuperclass())
    {
        Field[] fields = c.getDeclaredFields();
        for (Field classField : fields)
        {
            result.add(classField);
        }
    } 
```

* * *

## 回答 #2

> 赞同：154
> 
> 时间：2012-11-15T15:02:09.847

您应该将*对象*传递给*字段的**get*方法，所以

 *```
 Field field = object.getClass().getDeclaredField(fieldName);    
  field.setAccessible(true);
  Object value = field.get(object); 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2013-09-06T08:55:58.420

我在我的首选项类的 toString() 实现中使用反射来查看类成员和值（简单快速的调试）。

我正在使用的简化代码：

```
@Override
public String toString() {
    StringBuilder sb = new StringBuilder();

    Class<?> thisClass = null;
    try {
        thisClass = Class.forName(this.getClass().getName());

        Field[] aClassFields = thisClass.getDeclaredFields();
        sb.append(this.getClass().getSimpleName() + " [ ");
        for(Field f : aClassFields){
            String fName = f.getName();
            sb.append("(" + f.getType() + ") " + fName + " = " + f.get(this) + ", ");
        }
        sb.append("]");
    } catch (Exception e) {
        e.printStackTrace();
    }

    return sb.toString();
} 
```

我希望它会对某人有所帮助，因为我也搜索过。

* * *

## 回答 #4

> 赞同：13
> 
> 时间：2012-11-15T15:02:07.007

尽管我不太清楚您要实现什么，但我在您的代码中发现了一个明显的错误： `Field.get()`期望包含该字段作为参数的对象，而不是该字段的某些（可能）值。所以你应该有`field.get(object)`.

由于您似乎正在寻找字段值，因此您可以通过以下方式获得：

```
Object objectValue = field.get(object); 
```

无需实例化字段类型并创建一些空/默认值；或者也许我错过了一些东西。

* * *

## 回答 #5

> 赞同：10
> 
> 时间：2016-08-03T07:00:11.287

```
 Integer typeValue = 0;
 try {
     Class<Types> types = Types.class;
     java.lang.reflect.Field field = types.getDeclaredField("Type");
     field.setAccessible(true);
     Object value = field.get(types);
     typeValue = (Integer) value;
 } catch (Exception e) {
     e.printStackTrace();
 } 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2020-06-18T07:10:26.643

```
 ` 
//Here is the example I used for get the field name also the field value
//Hope This will help to someone
TestModel model = new TestModel ("MyDate", "MyTime", "OUT");
//Get All the fields of the class
 Field[] fields = model.getClass().getDeclaredFields();
//If the field is private make the field to accessible true
fields[0].setAccessible(true);
//Get the field name
  System.out.println(fields[0].getName());
//Get the field value
System.out.println(fields[0].get(model));
` 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2019-11-18T23:42:07.227

我在 Kotlin 中发布了我的解决方案，但它也可以与 java 对象一起使用。我创建了一个函数扩展，所以任何对象都可以使用这个函数。

```
fun Any.iterateOverComponents() {

val fields = this.javaClass.declaredFields

fields.forEachIndexed { i, field ->

    fields[i].isAccessible = true
    // get value of the fields
    val value = fields[i].get(this)

    // print result
    Log.w("Msg", "Value of Field "
            + fields[i].name
            + " is " + value)
}} 
```

看看这个网页：[https ://www.geeksforgeeks.org/field-get-method-in-java-with-examples/](https://www.geeksforgeeks.org/field-get-method-in-java-with-examples/)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-15T15:20:04.803

您使用错误的参数调用 get 。

它应该是：

```
Object value = field.get(object); 
```*

# jquery - jTemplate Foreach 不呈现单行

> ID：13400076
> 
> 赞同：0
> 
> 时间：2012-11-15T14:55:33.700
> 
> 标签：jquery, jtemplates

我正在使用标准的 Main/Row jTemplate 模式，但由于某种原因，foreach 仅在有超过一行（StatusDetail）时才有效。如果它是单行数据，它不会呈现（即 foreach 内的行。之前的表部分仍然呈现）。

```
Data:
{
    "MG": {
        "Status": "In Transit",
        "StatusDetail": {
            "StatusCode": "Actual Pickup",
            "Date": {
                "@type": "actual",
                "#text": "11/13/2012 09:00"
                },
            "Location": "Mentor, OH "
        }
    }
} 
```

j模板代码：

```
{#template MAIN}
<table id="results_hdr" cellpadding="5" cellspacing="0">
    <tr>
        <td class="FieldLabels">Status</td>
        <td>{$T.MG.Status}</td>
        <td>&nbsp;</td>
        <td>&nbsp;</td>
        <td class="FieldLabels">Name</td>
        <td>{$T.MG.Name}</td>
    </tr>
    <tr><td colspan="6" style="background-color:White;"></td></tr>
    <tr>
        <td>Date</td>
        <td colspan="3">Detail</td>
        <td colspan="2">Location</td>
    </tr>
    {#foreach $T.MG.StatusDetail as SD}
        {#include ROW root=$T.SD}
    {#/for}
</table>
<br />
{#/template MAIN}
{#template ROW}
    <tr>
        <td>
            {$T.Date["#text"]}</td>
        <td colspan="3">
            {$T.StatusCode}</td>
        <td colspan="2">
            {$T.Location}</td>
    </tr>
{#/template ROW} 
```

我错过了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:39:58.293

您正在尝试迭代，`$T.MG.StatusDetail`但它不是一个数组，因此该`{#foreach $T.MG.StatusDetail as SD}`语句没有按照您的预期进行。

将您的数据更改为以下内容，以便它`MG.StatusDetail`实际上是一个数组并且它将起作用：

数据：

```
var data = {
    "MG": {
        "Status": "In Transit",
        "StatusDetail": [
            {
                "StatusCode": "Actual Pickup",
                "Date": {
                    "type": "actual",
                    "text": "11/13/2012 09:00"
                },
                "Location": "Mentor, OH "
            }
        ]
    }
}; 
```

这是一个[演示](http://jsfiddle.net/axGcs/1/)。

# c++ - 从网络摄像头流式传输：帧没有引用计数是否正常？

> ID：13400082
> 
> 赞同：1
> 
> 时间：2012-11-15T14:56:07.680
> 
> 标签：c++, opencv, webcam

我有以下代码：

```
#include<opencv2/core/core.hpp>
#include<opencv2/highgui/highgui.hpp>
int main()
{
    cv::VideoCapture capture(0);
    cv::Mat frame;
    capture>>frame;
    cv::Mat img = frame.clone();
    cv::Mat img2 = frame; // here still the refcount stays null in xcode.
    return 0;
} 
```

然后

```
frame.refcount ==NULL; // could be wrong
img->refcount == 1; // good
img2.refcount ==NULL; // certainly wrong, should be pointing to 2, at the same address as frame.refcount. 
```

一切似乎都工作正常，但我调查了一些事情，结果发现 refcount`frame`只是一个空指针（并且在 之后保持不变`clone()`），而其他垫子（比如它的克隆）的 refcount 指向一个 int >= 0。

这是什么原因？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:29:19.187

[根据文档](http://opencv.willowgarage.com/documentation/cpp/basic_structures.html#mat)：

> `clone()`返回矩阵的深层副本，即复制数据。

所以**没有增加是有道理的`refcount`**。有关此主题的更多信息，请查看[内存管理和引用计数](http://docs.opencv.org/2.4.3rc/doc/user_guide/ug_mat.html#memory-management-and-reference-counting)。

# python - Python 3：在 __init__ 中给出一个命令来设置 self 的属性，需要使用“self”？

> ID：13400085
> 
> 赞同：0
> 
> 时间：2012-11-15T14:56:20.090
> 
> 标签：python, parameter-passing, self, default-parameters

我知道问题标题听起来很奇怪，但由于英语不是我的第一语言，我发现很难正式化。但是，我也许可以用更多的文字来解释它。

问题是，例如，我正在尝试创建一个名为“Foo”的类。

```
# ../myProject/Foo.py

class Foo:
    '''Represents an example class for stackoverflow''' 
```

现在所有 Foo 类的实例都有`function`属性，它只包含一个可以通过实例执行的函数。此外，还有一个`parameters`属性、一个元组或一个列表，其中包含在调用时应该使用的参数`function`。

```
 def __init__(self, function, parameters):
        self.function = function
        self.parameters = parameters

    def callFunction(self):
        if self.function:
            self.function(*self.parameters) 
```

这似乎工作正常，但是，问题是，我想给它一个默认值，以更改实例的属性。我基本上想做以下事情：

```
def __init__(self, function=setattr, \
        parameters=(self, "togglableAttribute", not self.togglableAttribute)): 
```

这样做会提高`NameError: name 'self' is not defined`. 我应该如何实现它才能让它工作，或者我应该想出一个解决方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:06:32.533

`self`是用于描述*实例*的典型变量名。但是，在创建函数时（在类创建时）评估默认参数。当然`self`还不存在，因为该类甚至还不存在——该类仍在构建过程中。

执行此操作的典型方法是检查哨兵；

```
def __init__(self, function=setattr, parameters=None):
    if parameters is None:
       parameters = (self, "togglableAttribute", not self.togglableAttribute) 
```

[请参阅我的](https://stackoverflow.com/a/13075096/748858)答案（及其下方的评论），讨论您可以用作哨兵的各种对象以及每个对象的各种优缺点。

# wpf - 扩展的 WPF 工具包 PropertyGrid 数字格式

> ID：13400086
> 
> 赞同：2
> 
> 时间：2012-11-15T14:56:20.933
> 
> 标签：wpf, xaml, propertygrid

我正在使用扩展 WPF 工具包中的 PropertyGird。我几乎可以做任何我需要的事情，但我无法格式化数字。

我有一个`double`属性，我希望它只显示两个十进制数字（其字符串格式应该是`"F2"`）。我已经尝试通过放置`[DisplayFormat(DataFormatString = "{F2}")]`属性，但它似乎没有任何效果（我仍然有我的 10 位数字）。

难道我做错了什么？我*真的*需要为该`double`类型创建一个 CustomEditor ，它将像这样格式化我的*所有*`double`属性吗？

任何帮助表示赞赏！

编辑：使用网格的 AutoGenerateProperties 选项自动绑定该属性。我没有明确的绑定。如果可能的话，我想保持这种方式，但这不是强制性的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-07-17T07:08:50.083

我终于在 PropertyGrid.EditorDefinitions 中找到了使用 DataTemplate 的方法。在下面的示例中，每个 Double 类型的属性都有一个格式为“F2”的“DoubleUpDown”编辑器。

```
xmlns:System="clr-namespace:System;assembly=mscorlib"
xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"

<xctk:PropertyGrid ...>
    <xctk:PropertyGrid.EditorDefinitions>
        <xctk:EditorTemplateDefinition>

            <xctk:EditorTemplateDefinition.TargetProperties>
                <xctk:TargetPropertyType Type="{x:Type System:Double}" />
            </xctk:EditorTemplateDefinition.TargetProperties>

            <xctk:EditorTemplateDefinition.EditingTemplate> 
                <DataTemplate>
                    <xctk:DoubleUpDown FormatString="F2" 
                                       Value="{Binding Value, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" />
                </DataTemplate>
            </xctk:EditorTemplateDefinition.EditingTemplate>

        </xctk:EditorTemplateDefinition>
    </xctk:PropertyGrid.EditorDefinitions> 
</xctk:PropertyGrid> 
```

通过在EditorTemplateDefinition.TargetProperties 中命名特定的属性，只有这些属性会受到后面的DataTemplate 的影响。

```
<xctk:EditorTemplateDefinition.TargetProperties>
    <System:String>Volume</System:String>
    <System:String>Weight</System:String>
</xctk:EditorTemplateDefinition.TargetProperties> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:09:33.187

我只能找到一种方法（非常肮脏）：

```
void PropertyGrid_SelectedObjectChanged(object sender, RoutedPropertyChangedEventArgs<object> e)
{
    foreach (var p in pg.Properties)
    {
        if (p.PropertyType == typeof(double)) // or filter by p.Name
            p.Value = string.Format("{0:F2}", p.Value);
    }
} 
```

# batch-file - 从批处理文件运行 GUI 不专业？

> ID：13400087
> 
> 赞同：0
> 
> 时间：2012-11-15T14:56:24.473
> 
> 标签：batch-file, software-distribution

我最近向我们的客户发布了一个软件，它将安装在一台机器上的一个位置，然后可能会安装在另外两个位置。它是一个原型，必须进行测试。

这是一个编译的 Matlab GUI，它运行扫描、进行一些图像分析并生成报告。这里一切都很好。但是我抱怨说我使用的批处理文件是过去 DOS 时代的东西，不应该使用而且看起来不专业......目前，用户应该在第一次使用之前在批处理文件中设置一个路径，然后总是运行批处理文件。此 bat 文件会终止一些进程以避免冲突，包括任何正在运行的 GUI 实例、设置结果路径并运行 GUI。我建议他们为这个 bat 文件创建一个带有漂亮标志的快捷方式（这样他们就看不到 .bat 扩展名；）），但他们仍然不高兴。

做什么可能不是这里的主要问题——客户永远是对的，我应该`.bat`以某种方式删除以使他们高兴。但是，使用 bat 文件发布技术而非大众软件真的如此不专业吗？还是只是一个人的看法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:07:57.770

我个人认为如果你已经有一个 GUI，然后用它来做预处理。使用批处理文件并没有错，但是当你有 GUI 时使用批处理文件似乎不是最好的方法。

或者，创建一个与主程序外观相同的 GUI，以询问用户所需的详细信息。对我来说，这与专业无关，而是用户做他们需要做的事情有多容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-30T07:24:05.097

批处理文件并非不专业。批处理“语言”有缺点和直接的问题（错误处理！！），但它完成了工作，这就是重点。

问题是它显示了程序的内部结构，有些人对此感到害怕。他们不想看到这样的东西，所以试图找到一个不赞成的标签。最快的解决方案是将批处理文件隐藏在“虚荣封面”后面，或者在这种情况下是一个 exe 文件，它隐藏了恐惧的眼睛。

一种简单的可能性是使用自解压 zip 文件，例如：[http ://www.7zsfx.info/en/](http://www.7zsfx.info/en/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:03:15.413

我认为对小型项目使用批处理文件没有任何问题（尤其是在测试阶段，如果这对您来说更容易并且可以更快地向客户交付一些东西）。但是，根据项目的大小，最好有一个带有适当图标的 EXE 交付给客户端，什么都没有。

我同意客户的观点，即 EXE*看起来*更专业。不管是不是……我不确定。无论这是否属实， *.bat*文件似乎都有些*重叠。*

我会说这类似于人们调用 PHP 程序*脚本*，因为很多时候它们是简单的脚本。但是，还有像 Cake 和 Kohanna 这样的框架，它们比人们通常将其归类为*脚本*的框架要多，但是，因为它是 PHP，所以仍然具有这种含义。

# php - 如何跨两个表进行更新和编辑？

> ID：13400089
> 
> 赞同：0
> 
> 时间：2012-11-15T14:56:31.317
> 
> 标签：php, mysql

我有两个这样创建的 MySQL 表：

```
CREATE TABLE book(id INT UNSIGNED NOT NULL AUTO_INCREMENT KEY, title VARCHAR(256),
book_id INT, author VARCHAR(128), year INT, httplink VARCHAR(256)) ENGINE MyISAM; 
```

和

```
CREATE TABLE excerpt(id INT UNSIGNED NOT NULL AUTO_INCREMENT KEY, book_id INT, excerpt_title
VARCHAR(256), year INT, measure VARCHAR(256), page VARCHAR(128)) ENGINE MyISAM; 
```

所以有一个书籍表......以及每本书的摘录表......它们由 book_id 链接。每本独特的书都有一个 book_id...并且该书的每个摘录都有相同的 book_id。

现在，我有一个 php 表单，允许用户在搜索条目后对其进行编辑：

```
<p>Edit Record</p>
<form method="post">
<p>Title:
<input type="text" name="title" value="$n"></p>
<p>Author:
<input type="text" name="author" value="$e"></p>
<p>Year:
<input type="integer" name="year" value="$p"></p>
<p>Mirlyn link:
<input type="text" name="link" value="$l"></p>
<p>Excerpt name:
<input type="text" name="excerpt" value="$ex"></p>
<p>Page numbers
<input type="text" name="page" value="$s"></p>
<input type="hidden" name="id" value="$id">
<p><input type="submit" value="Update"/> 
```

当用户点击链接旁边的编辑按钮时，以下字段会自动填充用户选择编辑的记录：标题、作者、年份。

如果用户不更改标题，但更改（或不更改）其他字段，那么更新记录的正确 MySQL 语句是什么？我相信我只需要更新“摘录”表。

但是...如果用户编辑标题...我该如何管理？我必须检查标题是否存在于“书”表中。如果是这样，我将不得不更改摘录的 book_id。如果没有，我必须将其添加到具有唯一 book_id 的“书”表中，然后在摘录表中适当地更改记录。帮助？

谢谢！

# php - 如何制作下拉列表？谷歌搜索示例

> ID：13400093
> 
> 赞同：0
> 
> 时间：2012-11-15T14:56:45.670
> 
> 标签：php, javascript, jquery, ajax, autocomplete

索引.php

```
<html>
<head>
    <title>ы</title>
<script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.4.3/jquery.min.js"></script>
<script type="text/javascript" src="jquery.autocomplete.js"></script>
</head>
<body>
<script type="text/javascript">
    $(document).ready(function(){
        $("#search").keyup(function(){
          $("#search").autocomplete("json.php", {
            delay:10,
            minChars:4,
            maxItemsToShow:3
            }
          );
          }); });
      //?word=" + $("#search-text").val()
</script>
<form action=""><input type="search" id="search"> <input type="submit"></form>
<body>
</html> 
```

json.php

```
<?php
echo json_decode($_GET['q']); 
```

如何使此代码工作？如何使用文件 json？在 php 中如何处理请求并将结果返回给自动完成功能？也许有更好的解决方案？官方文档不包含服务端代码示例！

看起来反应200ok。没有人。回声 json_decode ($ _GET ['q']); 错误在这里，问题是在哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:20:19.980

为什么要使用 php 进行自动完成？使用js是否比每次击键后重复请求更方便？

任何方式你都可以试试这个

```
<script>
    $(function() {
        var availableTags = [
            "ActionScript",
            "AppleScript",
            "Asp",
            "BASIC",
            "C",
            "C++",
            "Clojure",
            "COBOL",
            "ColdFusion",
            "Erlang",
            "Fortran",
            "Groovy",
            "Haskell",
            "Java",
            "JavaScript",
            "Lisp",
            "Perl",
            "PHP",
            "Python",
            "Ruby",
            "Scala",
            "Scheme"
        ];
        $( "#tags" ).autocomplete({
            source: availableTags
        });
    });
    </script> 
```

并在体内

```
<div class="ui-widget">
    <label for="tags">Tags: </label>
    <input id="tags" />
</div>

</body> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T08:46:33.473

您可以使用这些方法来填充您的 items 数组，然后检查字段中的值是否与其中任何一个匹配。

```
$q = strtolower($_GET["q"]);
if (!$q) return;

/* Connect to database */

/* Query Database */

$items = array();

/* Loop through results and add them to items array */

while ($row = mysqli_fetch_assoc($result)) {
    $items[$row['name']] = $row['value'];
}

foreach ($items as $key=>$value) {
    if (strpos(strtolower($key), $q) !== false) {
        echo "$key|$value\n";
    }
} 
```

搜索代码（没有数据库查询位）记录在[http://jquery.bassistance.de/autocomplete/demo/](http://jquery.bassistance.de/autocomplete/demo/)

这当然会在每次有人在输入字段中键入字母时生成数组，因此非常耗费服务器。

如上所述，一种更好的方法是使用 availableTags 变量并在加载时通​​过 PHP 将它们加载到 javascript 变量中。我建议为此使用 PHP json_encode 函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T19:33:57.660

```
$(function() {
    $( "#city" ).autocomplete({
        source: function( request, response ) {
            $.ajax({
                url: "http://sitetesting.kiev.ua/ajax.php",
                dataType: "jsonp",
                data: {
                    name_startsWith: request.term
                },
                success: function( data ) {
                    response( $.map( data.geonames, function( item ) {
                        return {
                            label: item.countryName
                        }
                    }));
                }
            });
        },
        minLength: 2
    });
}); 
```

# html - CSS3 / HTML5 的不均匀框阴影？

> ID：13400097
> 
> 赞同：7
> 
> 时间：2012-11-15T14:56:55.450
> 
> 标签：html, css

我正在尝试为网站创建不均匀的阴影效果，请参阅下面我需要实现的示例：

![在此处输入图像描述](../Images/79f12fc1f7a647b76978fea24771e991.png)

不幸的是，我认为这不能用 CSS3 来完成，据我所知，box-shadow 属性只能用于创建均匀分布的阴影。

但是，我对 CSS3/HTML5 的了解不是很好，所以我想知道是否有人知道如何在不使用我宁愿避免的图像/额外 div/相对和绝对定位的情况下实现这一目标？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:10:09.527

这是我最接近您的图像预览的内容，您可以将它们包装在定位的相对 div 中并相应地设置位置

[**演示**](http://jsfiddle.net/xKWj4/)

HTML

```
<div class="container"></div>
<div class="shadow"></div> 
```

CSS

```
.container {
    width: 300px;
    height: 200px;
    margin: 50px;
    background-color: #eeeeee;
    z-index: 1;
}

.shadow {
    -ms-transform: rotate(2deg); /* IE 9 */
    -webkit-transform: rotate(2deg); /* Safari and Chrome */
    -o-transform: rotate(2deg); /* Opera */
    -moz-transform: rotate(2deg); /* Firefox */
    box-shadow: 0 6px 16px -6px black;
    height: 20px;
    width: 300px;
    position: absolute;
    top: 225px;
    z-index: -1;
    left: 50px;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T15:05:22.560

我能想到的最好的办法是在你的 div 后面放置一个伪元素：

```
div::after{
    content:"";
    display:block;
    transform:rotate(5deg);
    box-shadow:1px 5px 50px #444;
    z-index:-1;
}​ 
```

**[演示](http://jsfiddle.net/M7ccq/2/)**

我想您想对这些值进行一些调整，并尝试尽可能接近您的原始值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:23:30.497

是的，您可以使用一些属性。IE：

html:

```
<div class="main">
  <div class="shadow-phantom">
  </div>
</div>​ 
```

CSS：

```
.main {
  width:100px;
  height:100px;
  background-color:#e1e1e1;
  margin:10px auto;
}  

.shadow-phantom {
 -webkit-border-radius: 12px 110px 20px 25px;
 border-radius: 12px 110px 20px 25px;
 margin: -4px 0px 0px -0px;
 -moz-background-clip: padding; 
 -webkit-background-clip: padding-box; background-clip: padding-box;
 -webkit-box-shadow: 7px 7px 10px 0px #AAA; 
      box-shadow: 7px 7px 10px 0px #AAA; 
    width:90px;
  height:100px;
  position:absolute;
  z-index:-1;

  -webkit-transform: rotate(5.5deg);  
 -moz-transform: rotate(5.5deg);  
  -ms-transform: rotate(5.5deg);  
   -o-transform: rotate(5.5deg);  
      transform: rotate(5.5deg); 
  }​ 
```

检查这个小提琴看看它在行动：http: [//jsfiddle.net/wandarkaf/MKV4Q/](http://jsfiddle.net/wandarkaf/MKV4Q/)

# asp.net-mvc - DevExpress MVC：不能使用自定义主题

> ID：13400098
> 
> 赞同：6
> 
> 时间：2012-11-15T14:57:02.140
> 
> 标签：asp.net-mvc, themes, devexpress

我正在使用 DevExpress MVC 并想使用自定义主题。我可以使用标准主题，但找不到我的自定义主题。

我使用 ASP.NET 12.1 Theme Builder 创建了自定义主题，并将其复制到我的项目中到 App_Themes/MyTheme

我使用以下代码添加了它：

[网络配置]

```
<devExpress>
    ...
    <themes enableThemesAssembly="true" styleSheetTheme="" theme="MyTheme" />
    ...
</devExpress> 
```

[全球.asax.cs]

```
protected void Application_PreRequestHandlerExecute(object sender, EventArgs e)
    {
        DevExpressHelper.Theme = "MyTheme";
    } 
```

[_Layout.cshtml]

```
 @Html.DevExpress().GetStyleSheets( 
        new StyleSheet { ExtensionSuite = ExtensionSuite.NavigationAndLayout, Theme ="MyTheme" }, 
        new StyleSheet { ExtensionSuite = ExtensionSuite.Editors, Theme ="MyTheme" }, 
        new StyleSheet { ExtensionSuite = ExtensionSuite.HtmlEditor, Theme ="MyTheme" }, 
        new StyleSheet { ExtensionSuite = ExtensionSuite.GridView, Theme ="MyTheme" }, 
        new StyleSheet { ExtensionSuite = ExtensionSuite.PivotGrid, Theme ="MyTheme" },
        new StyleSheet { ExtensionSuite = ExtensionSuite.Chart, Theme ="MyTheme" },
        new StyleSheet { ExtensionSuite = ExtensionSuite.Report, Theme ="MyTheme" },
        new StyleSheet { ExtensionSuite = ExtensionSuite.Scheduler, Theme ="MyTheme"  }
    ) 
```

[索引.cshtml]

```
@Html.DevExpress().GridView(
    settings =>
        {
            ...
            settings.Theme = "MyTheme";
            ...
  }).Bind(Model.SearchResult).GetHtml() 
```

当我使用“Aqua”（标准主题）而不是“MyTheme”时，我的控件将显示在 Aqua 主题中。首先使用“MyTheme”它只是显示默认的标准主题，现在它说“找不到'MyTheme'主题。”

有人可以帮帮我吗？谢谢，贾尼娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-04-04T13:06:26.057

确保你已经编译了你的主题并在你的 bin 文件夹中添加了对它的引用。

它在[此处的文档中进行了描述](https://documentation.devexpress.com/#ASPxThemeBuilder/CustomDocument10812)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-21T12:23:23.153

你使用的是什么版本的 Devexpress？

<1.6 版有自定义主题的错误。

# objective-c - 为 iOS 设备创建 wordpress 网站阅读器，即：仅当网站内容/提要更新时才显示通知/阅读内容

> ID：13400104
> 
> 赞同：3
> 
> 时间：2012-11-15T14:57:16.570
> 
> 标签：objective-c, ios, web-services, api, web-applications

我有一个想法来开发 iOS 应用程序，如果 wordpress 网站上更新了任何提要，它会更新用户。请告诉我如何实现相同的方式/步骤。

我已经尝试并在谷歌上搜索，但没有解决我的问题。这是我在 youtube 上得到的关于网站阅读器的一件事：[http](http://www.youtube.com/watch?v=Bk0d1npGoq4) ://www.youtube.com/watch?v=Bk0d1npGoq4 但是，我不必开发这样的应用程序来读取网站内容，我想展示网络上的提要更新后立即通知。

这是我想要开发其读者的网站 ( [http://www.webhostingbreak.com/ )。](http://www.webhostingbreak.com/)

请建议我一些可以帮助我完成任务的解决方案或逻辑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-06T16:42:26.880

您可以通过多种方式访问​​ Wordpress 博客的内容。

第一个也是最简单的解决方案是使用任何 Wordpress 上都可用的基本 RSS 提要，它与其他类型的网站兼容。

更具体地说，使用 Wordpress，您可以使用 CMS 嵌入的 XML-RPC API。此 API 需要在 Wordpress 网站上启用，并且每个请求都必须通过 Wordpress 网站的真实用户进行身份验证（您可以在应用程序中实现注册过程或在每个已安装的应用程序中使用通用用户）。

您有几个处理 XML-RPC 调用的库，例如[https://github.com/corristo/xmlrpc](https://github.com/corristo/xmlrpc)

# php - 如何在 SocialEngine 中获取当前用户地址？

> ID：13400107
> 
> 赞同：3
> 
> 时间：2012-11-15T14:57:21.440
> 
> 标签：php, object, socialengine

我正在尝试在 SocialEngine 中获取地址字段数据。

我通过以下方式获取当前用户：

```
$viewer = Engine_Api::_()->user()->getViewer(); 
```

我可以通过以下方式获取字段数组：

```
$fields = Engine_Api::_()->fields()->getFieldsValuesByAlias($viewer); 
```

返回：

```
Array (
    [profile_type] => 23
    [first_name] => firstname
    [last_name] => lastname
    [birthdate] => 1994-1-1
    [gender] => 8
    [website] => www.website.com ) 
```

**我必须调用哪个对象来获取当前用户地址字段，例如城市、州、邮政编码等？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T09:51:34.453

我假设您已经从控制面板添加了城市、州、邮政编码字段等。您需要编辑`engine4_user_fields_meta`数据库中的表并为这些自定义字段手动添加别名。

# python - 将字符串输入转换为整数

> ID：13400110
> 
> 赞同：-1
> 
> 时间：2012-11-15T14:57:29.473
> 
> 标签：python, string, python-3.x, int, converter

我无法使用下面的代码将字符串正确转换为整数。

我将`lang`输入作为字符串。我想接受任何输入，因为如果我将输入限制为整数，那么用户输入的任何字母都会导致错误。

这段代码：

```
lang=[]
def chooseLang():
    global lang
    while lang !='1' and lang != '2':
        print ('Select (1 or 2):')
        lang=input()
    return lang

def convertStr(lang):
    ret=int(lang)
    return ret   
#-----------------------Program-----------------------
chooseLang()
convertStr(lang)

c=2+lang
print (c) 
```

...导致此错误：

```
in <module> c=2+lang
TypeError: unsupported operand type(s) for +: 'int' and 'str' 
```

尝试在一个函数中执行所有操作具有相同的效果：

```
lang=[]    
def chooseLang():
    global lang
    while lang !='1' and lang != '2':
        print ('Select (1 or 2):')
        lang=input()
    return lang
    ret=int(lang)

chooseLang()
c=2+lang
print (c) 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:13:53.963

在第一个示例中，您忘记使用 convertStr() 函数的返回值：

```
lang = convertStr(lang) 
```

在您的第二个示例`ret = int(lang)`中，由于`return lang`之前的原因而无法访问。

### [例子](http://ideone.com/KmqNRg)

```
def choose_lang():
    lang = None # NOTE: this `lang` has nothing to do with the global `lang`
    while True: 
        try:
            lang = int(input("select (1 or 2)"))
        except ValueError:
            pass
        if lang not in [1, 2]:
            print("\ntry again")
        else:
            break
    return lang

lang = choose_lang()
c = 2 + lang
print(c) 
```

# java - Java：具有多个泛型的向量

> ID：13400114
> 
> 赞同：1
> 
> 时间：2012-11-15T14:57:46.280
> 
> 标签：java, generics, vector

是否可以采用 Vector 之类的对象并使其具有多个泛型？我知道创建一个类是可能的，但是普通 Java API 附带的其他类（如 Vectors、Stack 等）是否可以具有多个泛型？

例如：

```
Vector<String, Integer> vect = new Vector<String, Integer>();
vect.add("Hello!", 0); 
```

由此，一个索引将有两个值，一个字符串和整数。

提前致谢！！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:00:57.553

我不会使用 Vector，因为您可以使用 List。在您的情况下，您需要使用自定义类，例如

```
class MyClass {
    String s;
    int i;

    MyClass(String s, int i) {
        this.s = s;
        this.i = i;
    }
}

List<MyClass> list = new ArrayList<MyClass>();
list.add(new MyClass("Hello!", 0));

String s = list.get(0).s;
int i = list.get(0).i; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T15:02:09.583

集合，例如 Vector，只能包含一种类型的对象。您正在尝试存储 2 个对象。创建一个名为 StringIntegerTuple 的类，该类包含对要存储的对象的 2 个引用，然后声明一个 Vector 并存储复合对象。

尽管从语义上讲，您可能想要一个 HashMap

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T14:59:52.630

该类`Vector`实现了一个可增长的对象数组，我认为您正在寻找地图，`java.util.Map<key,value>`地图的实现是`HashMap<k,v>`

```
Map<Integer,String> map = new HashMap<Integer,String>();
map.put(1,"str"); 
```

# html - GMail HTML电子邮件使图像高7000px

> ID：13400115
> 
> 赞同：0
> 
> 时间：2012-11-15T14:57:48.093
> 
> 标签：html, css, email, gmail

我在所有其他电子邮件客户端（包括 hotmail）中都具有连续性（ish），但是使用 gmail 是另一回事。

由于未知原因，72px 高的图像被缩放到 7000px 高，代码：

```
<img src="headerbg.jpg" style="width:100%;height:70px;" /> 
```

gmail有什么常见的错误吗？

此外，在检查元素时，我看到了这个（你可以看到大部分我没有放入）：

```
<img src="http://gallery.mailchimp.com/663dc47a790bab652488be03b/images/
headerbg.3.jpg"
style="width:100%;min-height:70px;border:0;
line-height:100%;outline:none;text-decoration:none"> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T14:59:10.740

您的图像宽度很短。当您将其宽度设置为 100% 时，您将获得一个非常高的图像，因为浏览器会相应地对其进行缩放。

向我们展示您的电子邮件的原始 HTML。我怀疑 MailChimp 实际上正在将您的身高转换为`min-height`.

# python - 字符串比较如何在 python 上工作？

> ID：13400116
> 
> 赞同：4
> 
> 时间：2012-11-15T14:57:48.823
> 
> 标签：python, string

> **可能重复：**
> [Python 使用的字符串比较技术](https://stackoverflow.com/questions/4806911/string-comparison-technique-used-by-python)

```
>>> "spam" < "bacon"
False
>>> "spam" < "SPAM"
False
>>> "spam" < "spamalot"
True
>>> "Spam" < "eggs"
True 
```

**问题：**如何比较等长字符串。如果字符串长度不同怎么办，为什么“Spam”小于“eggs”？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:00:49.783

词法上。

比较第一个字节，如果第一个字节的序数值小于第二个字节，则它更小。如果更多，那就更大了。如果它们相同，则尝试下一个字节。如果是所有关系并且一个较长，则较短的一个较小。

```
>>> "a" < "zzz"
True
>>> "aaa" < "z"
True
>>> "b" < "a"
False
>>> "abc" < "abcd"
True
>>> "abcd" < "abce"
True
>>> "A" < "a"
True
>>> ord("A")
65
>>> ord("a")
97 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T14:59:46.307

由于在 ASCII 表中`A`出现在前面，因此in被认为比in小。`a``S``Spam``e``eggs`

```
>>> "A" < "a"
True
>>> "S" < "e"
True
>>> "S" < "eggs"
True 
```

请注意，比较中不考虑字符串长度。正如@MikeGraham 在下面的评论中正确指出的那样，从第一个字节开始比较每个字节的序数值。一旦发现不匹配，比较就会停止，并返回比较值，如上一个示例所示。

来自[文档 - 比较序列和其他类型](http://docs.python.org/2/tutorial/datastructures.html#comparing-sequences-and-other-types)： -

> 比较使用字典顺序：首先比较前两项，如果它们不同，则确定比较的结果；如果它们相等，则比较接下来的两项，依此类推，直到任一序列用完。

还在同一段中进一步： -

> 字符串的字典顺序使用单个字符的 ASCII 顺序

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T15:39:57.490

Python 中的字符串是按[字典顺序排列](http://en.wikipedia.org/wiki/Lexicographical_order)的，因此它们可以进行逻辑排序：

```
>>> print sorted(['spam','bacon','SPAM','spamalot','Spam','eggs'])
['SPAM', 'Spam', 'bacon', 'eggs', 'spam', 'spamalot'] 
```

对此有一些妥协，主要是使用 unicode。字母`é`将在字母之后排序`z` [，例如](https://stackoverflow.com/questions/1097908/how-do-i-sort-unicode-strings-alphabetically-in-python)：

```
>>> 'e' < 'z'
True
>>> 'é' < 'z'
False 
```

幸运的是，您可以使用排序函数、使用`locale`字符串或字符串的子类来对字符串进行任何您希望的排序。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T14:58:29.740

这是一个字典比较。

# c# - vs2012 构建失败，虽然它在本地运行

> ID：13400118
> 
> 赞同：-2
> 
> 时间：2012-11-15T14:57:57.317
> 
> 标签：c#, asp.net, visual-studio-2012

我在 vs2012 中创建了一个构建任务。

我跑了。

它抱怨缺少一些参考资料，

虽然我在我的项目上看到它们并且它们导致相对路径

（源代码管理中存在的文件夹）

我已经在本地擦除了 sln，

我`get latest`从源代码管理中做了并重建了它。

参考文献不见了。我已经修好了。重新运行任务并再次出现类似错误。

如果 sln 在我的机器和大学清洁机器上成功构建，那会怎样？

![在此处输入图像描述](../Images/be8eca50ced287e5210fd7ba7a7c7197.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T21:56:28.827

如果我不得不猜测，那将是以下之一：

1.  缺少的类型位于一个或多个未检入源代码管理的程序集中；或者
2.  这些程序集是通过在源代码管理中不是正确路径的路径引用来引用的。
3.  这些程序集不是构建服务器将拉下的正常项目结构的一部分。
4.  这些程序集在本地是 gac 的，您指的是 gac 的版本而不是正确的版本。
5.  这是一个网站项目，您团队中的*某个人*将这些程序集 gac'd 或安装在其他目录中，他们每次签入时都会搞砸项目。（在网站项目中很常见，在 Web 应用程序项目中非常不寻常）。

# include - Ext js 4 如何使用来自另一个应用程序的商店？

> ID：13400131
> 
> 赞同：1
> 
> 时间：2012-11-15T14:58:26.393
> 
> 标签：include, extjs4, extjs4.1

我的项目中有 BranchStore.js 和 BranchModel.js。我想在我所有的 ext js 4 应用程序中使用它。是否可以？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:43:32.377

这是可能的，但您需要`Ext.require`在每个项目中加载它们，然后才能使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:01:32.930

要么将代码放在 html 中的脚本标签中，要么使用 Ext.syncRequire('path.js'); 获取它们。常规的 Ext.require() 调用是异步的，并且在调用加载它之后代码不会立即可用。

# javascript - 限制Highcharts系列中的点数

> ID：13400134
> 
> 赞同：0
> 
> 时间：2012-11-15T14:58:36.630
> 
> 标签：javascript, highcharts

我正在使用折线图（Highcharts）来显示每秒动态馈送的预测数据。但是我只想在每个系列中显示 48 个数据。我可以轻松地向系列添加新点，但在添加新元素后找不到删除系列中第一个元素的方法。

```
setInterval(function () {
  $.get("cross/forecast", { numOfData: 1 }, (function (chart) {
    return function (data) {
      console.log(data);
      var d = jQuery.parseJSON(data);
      // I NEED TO REMOVE FIRST ELEMENTS IN EACH SERIES
      //... something like chart.series[0].removePoint(0,true)
      for (var i = 0; i < d.length; i++) {
        chart.series[0].addPoint(d[i][0], true);
        chart.series[1].addPoint(d[i][1], true);
        chart.series[2].addPoint(d[i][2], true);
      }
    };
  })(chart), "text");
}, 1000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:07:33.123

几乎......尝试：

```
chart.series[0].data[0].remove(); 
```

要删除第一个点（`data`是一个`array`，数组是基于0的）......[这里的工作示例](http://jsfiddle.net/FxY63/19/)

如果您想在删除周围添加一个 if 语句，您可以使用以下内容检查系列中的点数：

```
if (chart.series[0].data.length >= 49) {
  chart.series[0].data[0].remove();
} 
```

# java - 如何在数据库中正确存储结束日期

> ID：13400136
> 
> 赞同：0
> 
> 时间：2012-11-15T14:58:37.027
> 
> 标签：java, javascript, date, datetime, extjs

应用：Java + ExtJS

有很多不同的实体具有 java.util.Date 类型的属性：startDate 和 iesendDate（endDate 可以为 NULL）。可以选择带或不带时间部分的两个日期（例如，始终保留时间部分，如果未选择则为事件）。例如，像这样：

```
2010-07-01 00:00:00 
```

当用户没有时间选择 endDate 时，可能会出现问题。例如，期间从 2010 年 7 月 1 日开始，到 1010 年 7 月 4 日结束。现在在数据库中，它的存储方式如下：

```
startDate="2010-07-01 00:00:00"
endDate="2010-07-04 00:00:00". 
```

因此，该时期似乎在 2010-07-04 的第一秒结束。但正如用户假设的那样，endDate 是隐含的，例如，期间在 2010-07-04 的最后一秒结束。系统中有很多不同时期的日期比较。

在这种情况下如何正确存储结束日期？

我考虑了可能的解决方案，但所有这些似乎都有点错误：

1.  要像这样存储结束日期的时间部分：“2010-07-04 23:59:99”。但似乎结束日期不是 24 小时 - 而是（24 小时 - 0.(9) 毫秒），这可能是潜在的问题。时间部分看起来也很丑陋。
2.  要修改 ExtJs 组件，它将添加 1 天到用户在持久性阶段选择的日期，并在该日期显示给用户时再次减去 1 天（用户明确设置时间部分的情况除外）。我不喜欢这里有时间部分的日期和没有它的日期被区别对待。
3.  例如，仅将开始日期保存为 Date 对象，然后以秒为单位保存期间的长度。这种方法看起来相当不错——但必须重新设计整个应用程序，并且可能不太容易在结束日期上使用不同的比较。
4.  只需使用当前的 - 保存不包含时间的非包含结束日期，并且在日期比较期间要非常小心

有人可以解释解决此类问题的最广泛使用的做法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2021-11-17T21:13:24.807

我最近从您的第一种方法更改为第二种方法。

方法 1：“2010-07-04 23:59:99”应该是“2010-07-04 23:59:59”，但无论如何它确实很丑陋，从技术上讲，它会失去一秒钟。我确实遇到的另一个问题是，我想以与停止另一条记录相同的数据/时间开始一条记录。因此，有可能找到记录的继任者。而对于方法 1，这是无法做到的，因为时间将区分 1 秒。

方法2：结束日期将是“2010-07-05”，查询条件将`< endDate`代替`<= endDate`方法1。这里的结束日期意思是“直到”或“直到”或“最多”，而不像方法中的那样1“直至并包括”。出于这个原因，在新项目中我确实使用了tillDate，或者实际上我使用了serviceStart / serviceTill之类的东西。

缺点确实是在向用户显示时将其格式化为 -1 天。但对我来说，这是有道理的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:02:06.660

将结束日期添加为用户选择值的 +1 天。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-18T18:50:00.357

## 单独的模型和演示文稿

将存储在数据库中的结束时间与向用户显示的结束时间完全分开。

**在数据库中存储结束日期和时间：**由于您总是存储日期和时间，因此您应该清楚地存储真实的日期和时间。如果期间在 7 月 4 日至 5 日午夜结束，则存储此时间，因此`2010-07-05 00:00:00`.

**呈现给用户：**我不能说您的用户希望如何看到结束时间，您应该询问用户自己。也许他们会告诉你：

*   照原样。`2010-07-05 00:00:00`.
*   作为期间最后一天的 24 小时， `2010-07-04 24:00:00`.
*   仅作为日期的最后一天`2010-07-04`（我认为这不太可能，尤其是开始时间不是午夜）。
*   或者是其他东西。

所以，是的，你很可能必须在午夜结束时特别*为演示文稿*处理。它不像您需要*在业务逻辑中*特别对待它那样糟糕。

# java - 查找和数组中的最大值

> ID：13400144
> 
> 赞同：2
> 
> 时间：2012-11-15T14:59:05.677
> 
> 标签：java, arrays

我查看了其他问题，但不完全是我在这里面临的问题，这是我拥有的当前代码

```
public class Qn3 {
    public static void displayHighestMark(String[] names,int[] marks, int count)
    {
        int mark = 0;
        int currentArrayPosition;
       for(int i=0;i <= names.length;i++)
       {

          if(mark <= marks[i])
              mark = marks[i];
          currentArrayPosition  = i;
       }
       System.out.println(name[i]+" with marks "+mark);
    }

    public static void main(String[] args)
    {
        String[] names = new String[]{"jack","hello","A","b","c","d"};// = new String[];

         int[] marks = new int[]{1,2,3,8,5,6};
        displayHighestMark(names,marks, 45);
    }

} 
```

所以基本上我试图在标记数组中找到最高分。但我越来越期待 ArrayIndexOutOfBoundsException

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T14:59:40.023

```
 for(int i=0;i <= names.length;i++) 
```

应该

```
 for(int i=0;i < names.length;i++) 
```

因为您正在尝试获取`marks`超出范围的索引`ArrayIndexOutOfBoundsException`。数组索引从 0 开始，所以当你进行循环和查找时，总是需要寻找`<`而不是`<=`

请阅读本[教程](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/arrays.html)。

**编辑：**

```
if(mark <= marks[i])
{
              mark = marks[i];
          currentArrayPosition  = i;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:11:04.580

你应该改变

```
for(int i=0;i <= names.length;i++) 
```

至

```
for(int i=0;i < names.length;i++) 
```

`i`因为当变量等于时，您试图访问数组外部的项目，`names.length`因为数组的索引从`0`to开始`array's length - 1`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:03:08.467

将循环更改为

```
for(int i=0;i < names.length;i++) 
```

此外，为什么需要`count`变量作为方法参数之一。你没有使用它。

# javascript - 将多个下拉值附加到 URL

> ID：13400145
> 
> 赞同：1
> 
> 时间：2012-11-15T14:59:08.320
> 
> 标签：javascript, jquery, url, drop-down-menu, onchange

我正在尝试做类似的事情：

```
$('#dropdown1').change(function() {
    window.location = $(this).val();
}); 
```

我需要构建一个包含 2 个下拉列表和一个文本框的页面，并且我需要存储每个下拉列表的值，然后在提交表单时附加到 URL。

选择所有选项后，URL 需要与此类似：

```
http://www.domain.co.uk/search-results/?searchOptions=dropdown1=value1|dropdown2=value2|textarea1=value3 
```

我已经想出了如何存储下拉列表的值，但我似乎无法将其附加到 url .. 这是我要去的地方：

```
<script type="text/javascript">
function getValues() {
    var priceTo = document.form.priceTo.value;
    //alert (priceTo);
}

$(document).ready(function() {
    //var zip = $('#zip').val();
    var initialURL = 'http://www.domain.co.uk/search-results/?searchOptions=priceto='

    $('#form').submit(function(e) {
        window.location.href = initialURL + priceTo
        return false;
    });

});
</script>

<body>

<form id="form" name="form">
    Price:
    <select name="priceTo" id="priceTo" onchange="getValues()">
        <option value="5000">Up to £5,000</option>
        <option value="10000">Up to £10,000</option>
        <option value="20000">Up to £20,000</option>
        <option value="40000">Up to £40,000</option>
        <option value="80000">Up to £80,000</option>
    </select>
    <input type="submit" id="submit" value="submit"/>
</form>

</body> 
```

出于某种原因，这转到：http://www.domain.co.uk/search-results/?searchOptions=priceto=[object%20HTMLSelectElement]

编辑：我终于让它在大多数浏览器上工作，包括带有以下代码的 IE8：

```
<script type="text/javascript">
$(document).ready(function() {

    //var zip = $('#zip').val();
    var initialURL = 'http://www.selektvolvocars.co.uk/selekt-search-results/?searchOptions='

    $('#form').submit(function(e) {
        window.location.href = initialURL + priceTo.options[priceTo.selectedIndex].value + model.options[model.selectedIndex].value + '%7Czipcode=' +document.getElementById('zip').value + '%7Cproximitydistance=50'
        e.preventDefault();
    });

});
</script> 
```

出于某种原因，虽然它在 IE9 中不起作用......对我来说毫无意义，它只是吐出一个完全混乱的 URL。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:01:54.010

如果我理解正确：

```
var initialURL = 'http://www.domain.co.uk/search-results/?searchOptions=priceto='    
$('#form').submit(function(e) {
        window.location = initialURL + $("#priceTo").val() + "|" + $("#anyOtherSelects").val();
        e.preventDefault();
}); 
```

您可以删除其余的 Javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:14:11.540

你的 priceTo 是选择列表。使用以下命令获取所选值：

```
$('#form').submit(function(e) {
        window.location.href = initialURL + priceTo.options[priceTo.selectedIndex].value
        e.preventDefault();
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:15:13.047

您可以使用一个小辅助函数来获取一个`<select>`或`<input>`元素的 id 并返回它的值。例如：

```
<script type="text/javascript">
//Helper function to return id and value. The id parameter shouldn't have the # sign at its beginning
function getIdVal( id ) {
    return id + "=" + encodeURIComponent( $("#"+id).val() );
}
//run this when the document is loaded and ready
$(document).ready(function() {

    //var zip = $('#zip').val();
    var initialURL = 'http://www.domain.co.uk/search-results/?'

    $('#form').submit(function(e) {
        window.location.href = initialURL + getIdVal( "priceFrom" ) + "|" + getIdVal( "priceTo" );
        return false;
    });

});
</script> 
```

笔记：

*   使用 获取元素中当前`<option>`选定的值。`<select>``$(...).val()`
*   使用 encodeURIComponent() 对值进行编码是一种很好的编程习惯，只是为了确保没有奇怪的字符会破坏您在搜索查询 URL中使用`=`和作为记录和字段分隔符的约定。`|`

# performance - 为什么我的 UIView 不更新并显示中间结果？

> ID：13400147
> 
> 赞同：0
> 
> 时间：2012-11-15T14:59:13.770
> 
> 标签：performance, uiimage, dispatch-async

在我的应用程序中，我想将大量（相同的 PNG）文件堆叠在一起，并向用户显示图像结果和进度条。为了提高性能，我想出了以下代码，但只有当 for 循环完成时，我才会看到最终结果。对于大量图像，这不是我想要的，我真的很想看到中间结果。以下代码可能包含错误，我还找不到：

```
- (IBAction)doDrawLayers:(NSArray *)drawImages
{
    // Use dispath-queues for drawing intermediate result and progress. 
    _startDrawing = [NSDate date];
    dispatch_queue_t calcImage = dispatch_queue_create("calcImage", NULL);
    dispatch_async(calcImage, ^{
        _sldProgress.maximumValue = drawImages.count;
        _sldProgress.minimumValue = 0;
        _imageNr = 0;
        [_sldProgress setMaximumValue:drawImages.count];
        for (NSString *imageFile in drawImages) {
            @autoreleasepool {
                // Update in main queue.
                dispatch_async(dispatch_get_main_queue(), ^{
                    UIGraphicsBeginImageContext(_imageSize);
                    // Show progress update.
                    _lblProgress.text = [NSString stringWithFormat:@"%d %.2f sec", ++_imageNr, -[_startDrawing timeIntervalSinceNow]];
                    _sldProgress.value = _imageNr;
                    NSString *filePath = [[NSBundle mainBundle] pathForResource:imageFile ofType:nil];
                    [[UIImage imageWithContentsOfFile:filePath] drawAtPoint:CGPointMake(0., 0.)];
                    // Get CGImage from the offscreen image context.
                    _imageView.image = UIGraphicsGetImageFromCurrentImageContext();
                    UIGraphicsEndImageContext();
                });
            }
        }
    });
    // Finished calculating image, release dispatch.
    dispatch_release(calcImage);
} 
```

我也在努力解决放置 UIGraphicsBeginImageContext/UIGraphicsEndImageContext 对的最佳位置的问题，因为我想尽量减少正在使用的内存量并最大限度地提高整体性能。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-27T15:53:23.220

最后通过合并Apple的PhotoScroller（主要基于CATiledLayer）和LargeImageDownsizing示例代码的代码找到了解决方案。

# java - 属性文件在 put 和 remove 方法中表现异常

> ID：13400151
> 
> 赞同：0
> 
> 时间：2012-11-15T14:59:28.467
> 
> 标签：java, properties, put, fileinputstream, fileoutputstream

如果我在这种组合中使用它，代码会中断：保存一个值，删除一个值，保存一个值。当我第二次保存该值时，它甚至会将已删除的值添加回它。因此，如果我保存配置 1、2、3、4、删除 3 和保存 5，这将保存 3 以及最终值：1、2、3、4、5，即使我删除了 3。

这是我认为重要的代码

```
 /**
 * This is the save class.
 * This class contains the action for when the user clicks on the save button.
 */
package controller;
/**
 * These are the imports for the class.
 */
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Properties;
import model.ModelFacade;

public class Save {
    /**
     * These are the fields for the class.
     */
    ModelFacade mf = new ModelFacade();
    Properties prop = new Properties();

    /**
     * This method sets the entered value for the matching property.
     * 
     * @param property
     * @param value
     */
    public void setPropertyValue(String property, String value) {
        try {
            try{
                //set the properties value
                FileInputStream fis = new FileInputStream("config.properties");
                prop.load(fis);
                fis.close();
                prop.setProperty(property, value);
            }
                catch (IOException ex) {
            }

            //save properties to project root folder
            FileOutputStream fos = new FileOutputStream("config.properties");
            prop.store(fos, null);
            fos.close();
            System.out.println("saved " + property + " as " + value);
        } 
        catch (IOException ex) {
            ex.printStackTrace();
        }
    }
}

    /**
 * This is the delete class.
 * This class contains the action for when the user clicks on the delete button.
 */
package controller;
/**
 * These are the imports of the class.
 */
import java.io.FileInputStream;
import java.io.FileOutputStream;
import java.io.IOException;
import java.util.Enumeration;
import java.util.Properties;
import model.ModelFacade;

public class Delete {
    /**
     * These are the fields of the class.
     */
ModelFacade mf = new ModelFacade();
Properties prop = new Properties();

    /**
     * This method deletes the values of the selected config.
     * 
     * @param config
     */
    public void deleteAction(String config) {
        if(mf.checkProperty() == true){
            try { 
                FileInputStream fis = new FileInputStream("config.properties");
                prop.load(fis);
                fis.close();
                @SuppressWarnings("rawtypes")
                Enumeration em = prop.keys();
                int i = 0;
                while(em.hasMoreElements()){
                     Object obj = em.nextElement();
                     String str = (String)obj;
                     //If the property contains the configuration name in its name it will be deleted.
                     if(str.endsWith(config)){
                         i++;
                         System.out.println("Deleted: "+str);
                         prop.remove(str);
                         FileOutputStream fos = new FileOutputStream("config.properties");
                         prop.store(fos, null);
                         fos.close();
                     }
                }
                //The system prints a message of the missing configuration.
                if(i < 1){
                    System.out.println("The configuration could not be found.");
                }
            } 

            catch (IOException ex) {
                ex.printStackTrace();
            }

        }
        //The system prints a message that the property file could not be found.
        else{
            System.out.println("The property file could not be found.");
        }
    }
} 
```

这是正在使用的两种方法。我希望这是足够的信息对您有所帮助。很抱歉我的话太短了。我现在有点累而且时间很短。如果需要，我可以更详细地解释这一点。但我有点希望问题出在这段代码中。

# magento - 更改选择收音机上的文本

> ID：13400155
> 
> 赞同：3
> 
> 时间：2012-11-15T14:59:39.473
> 
> 标签：magento, select, checkbox

嗨，我需要一些关于这个脚本的帮助。我需要在选择单选标签的产品代码 div 上显示 sku。

是一些行 $j("input#attribute 和 input:radio 我无法修复

实际上，这可以获得可选择尺寸或颜色的 sku。

php代码

```
<?php
$_product    = $this->getProduct();
$_attributes = Mage::helper('core')->decorateArray($this->getAllowAttributes());
?>
<?php if ($_product->isSaleable() && count($_attributes)):?>
    <dl>
    <?php foreach($_attributes as $_attribute): ?>
        <dt><label class="required"><em>*</em><?php echo $_attribute->getLabel() ?></label></dt>

            <div class="input-box">
                <?php $configs = $this->getRegularConfig()?>
                <?php foreach($configs['attributes'] as $config):?>
                    <?php foreach($config['options'] as $value):?>
                        <dd<?php if ($_attribute->decoratedIsLast){?> class="last"<?php }?>>
                        <label class="label-radio-configurable" id="<?php echo (float)$value['price'] + (float) $_product->getPrice();?>">
                        <input type="radio" name="super_attribute[<?php echo $_attribute->getAttributeId() ?>]"
                                id="attribute<?php echo $_attribute->getAttributeId() ?>"
                                class="validate-custom-configurable"
                                value="<?php echo $value['id']?>"/>
                            <?php echo $value['label']?> (+ $<?php printf("%.2f", $value['price'])?>)
                        </label>
                    <?php endforeach;?>
                <?php endforeach;?>
                 </dd>
              </div>

    <?php endforeach; ?>
    </dl>
<?php endif;?> 
```

JS 脚本

```
<div id="productcode"></div>

<?php
$conf = Mage::getModel('catalog/product_type_configurable')->setProduct($_product);
$col = $conf->getUsedProductCollection()->addAttributeToSelect('*')->addFilterByRequiredOptions();
?>

<script type="text/javascript">

var Skus =new Array();

<?php
$count = 1;
$itemId = array();
foreach($col as $simple_product){
$itemId[] = array($simple_product->getSelectLabel() => $simple_product->getSku());
}

foreach($itemId as $val){
foreach($val as $k => $v){
echo 'Skus['.$count.'] = "'.$v.'";'. "\n";
$count++;
}
};

?>

$j(document).ready(function(){

$j("#productcode").html("Code: " +Skus[1]);

$j("input#attribute<?php echo $_attribute->getAttributeId() ?>").change(function(){
var position = $j("#attribute<?php echo $_attribute->getAttributeId() ?> input").index($j("#attribute<?php echo $_attribute->getAttributeId() ?> input:radio));

$j("#productcode").html(Skus[position] ? "Code: " +Skus[position] : "Code: " +Skus[1]);
});

});

</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-18T03:28:28.193

```
$j(document).ready(function() 
```

而不是`j`使用`jQuery`

因为jquery冲突

还

请在您的 jquery 文件中写入以下代码

```
jQuery.noConflict(); 
```

# tsql - T-SQL (2005) RANK OVER(PARTITION BY) 是答案吗？

> ID：13400157
> 
> 赞同：1
> 
> 时间：2012-11-15T14:59:45.043
> 
> 标签：tsql, sql-server-2005, stored-procedures, ranking

我有一个存储过程，它为前端进行分页并且工作正常。我现在需要修改该过程，将返回的 20 列中的四列分组，然后只返回每个组中包含最低优先级的行。因此，当resort_id、卧室、厨房和入住（日期）都匹配时，只返回具有最低优先级的行。我仍然必须维护分页功能。@startIndex 和 @upperbound 是从前端传递到过程中以进行分页的参数。我认为 RANK OVER (PARTITION BY) 是我无法完全弄清楚如何将它们组合在一起的答案。

```
SELECT I.id,
       I.resort_id,
       I.[bedrooms],
       I.[kitchen],
       I.[checkin],
       I.[priority],
       I.col_1,
       I.col_2 /* ..... (more cols) */
FROM  ( 
        SELECT  ROW_NUMBER() OVER(ORDER by checkin) AS rowNumber, 
        *
        FROM Inventory
      ) AS I  
WHERE  rowNumber >=  @startIndex
AND    rowNumber <   @upperBound
ORDER BY rowNumber 
```

修复后的示例2：

```
SELECT I.resort_id,
       I.[bedrooms],
       I.[kitchen],
       I.[checkin],
       I.[priority],
       I.col_1,
       I.col_2 /* ..... (more cols) */
FROM Inventory i 
JOIN 
( 
    SELECT ROW_NUMBER() OVER(ORDER BY h.checkin) as rowNumber, MIN(h.id) as id
    FROM Inventory h
    JOIN (
        SELECT  resort_id, bedrooms, kitchen, checkin, id, MIN(priority) as priority
        FROM Inventory
        GROUP BY resort_id, bedrooms, kitchen, checkin, id
    ) h2 on h.resort_id = h2.resort_id and 
            h.bedrooms = h2.bedrooms and 
            h.kitchen = h2.kitchen and 
            h.checkin = h2.checkin and 
            h.priority = h2.priority
    GROUP BY h.resort_id, h.bedrooms, h.kitchen, h.checkin, h.priority
) AS I2 
    on i.id = i2.id
WHERE  rowNumber >=  @startIndex
AND    rowNumber <   @upperBound
ORDER BY rowNumber 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:19:38.600

我会以这种方式完成它。

```
SELECT I.resort_id,
       I.[bedrooms],
       I.[kitchen],
       I.[checkin],
       I.[priority],
       I.col_1,
       I.col_2 /* ..... (more cols) */
FROM Inventory i 
JOIN 
( 
    SELECT ROW_NUMBER(ORDER BY Checkin) as rowNumber, MIN(id) id
    FROM Inventory h
    JOIN (
        SELECT  resort_id, bedrooms, kitchen, checkin id, MIN(priority) as priority
        FROM Inventory
        GROUP BY resort_id, bedrooms, kitchen, checkin
    ) h2 on h.resort_id = h2.resort and 
            h.bedrooms = h2.bedrooms and 
            h.kitchen = h2.kitchen and 
            h.checkin = h2.checkin and 
            h.priority = h2.priority
    GROUP BY h.resort_id, h.bedrooms, h.kitchen, h.checkin, h.priority
) AS I2 
    on i.id = i2.id
WHERE  rowNumber >=  @startIndex
AND    rowNumber <   @upperBound
ORDER BY rowNumber 
```

# cloudbees - 如何通过 CloudBees Jenkins“立即部署”功能部署非 Web Java 应用程序？

> ID：13400163
> 
> 赞同：3
> 
> 时间：2012-11-15T14:59:57.873
> 
> 标签：cloudbees

随着 CloudBees 现在支持 Java 应用程序的部署，是否可以使用 Jenkins“部署到 CloudBees”中的构建后操作来部署您的应用程序？此外，我想使用 Maven[程序集插件的 jar-with-dependencies](http://maven.apache.org/plugins/maven-assembly-plugin/descriptor-refs.html#jar-with-dependencies)目标，这样我就可以直接通过 Jenkins 将整个应用程序简单地自动部署到 CloudBees。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T13:36:04.440

虽然当前的 CloudBees 部署程序 Jenkins 插件似乎不支持这一点，但实际上它支持。以下是经过多次试验和错误对我有用的步骤：

1.  在 pom.xml 中包含 jar-with-dependencies maven 插件。我使用了`<goal>single</goal>`和`<descriptorRef>jar-with-dependencies</descriptorRef>`描述[here](http://maven.apache.org/plugins/maven-assembly-plugin/usage.html)。这将在您的目标文件夹中放置一个额外的 jar 文件`{artifactId}-{version}-jar-with-dependencies.jar`
2.  [通过CloudBees API](http://developer.cloudbees.com/bin/view/RUN/Java+Container)部署该 jar 。本页的最后一行解释了如何做到这一点。指定您的可运行 jar，确保 runtimeContainer=java，以及要上传的 jar 文件，它应该部署。尽管 CloudBees 说要使用 zip 文件，但 jar 文件也可以正常工作。
3.  一旦通过命令行部署了一次，您的应用程序 ID 现在会“记住”这些设置，因此只要您将 CloudBees 部署到同一个应用程序，就可以通过 Jenkins 完成。在您的 Jenkins 作业中，将“部署到 CloudBees”构建后操作添加到您的配置中。单击“添加 Web 应用程序”（奇怪，我知道，因为它不是 Web 应用程序！CloudBees 说他们会努力改变它......），选择 First Match（即使它是一个 Maven 项目，使用 First Match），输入您在步骤 2 中部署应用程序的应用程序 ID，然后输入 jar 文件的全名并再次尝试构建。它应该上传您的 jar 文件并在您的 CloudBees PaaS 中激活实例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:43:09.753

一旦你正确设置并最初使用 bees sdk 部署，它应该像战争通常那样从 Jenkins 上的部署器插件部署。

设置完成后，定义主类所在位置的设置在部署之间保持不变。

# railstutorial.org - Ruby on Rails Tutorial 3.2 by Michael Hartl 第 9 章 authentication_pages_spec.rb 在 utility.rb 中看不到 sign_in 方法

> ID：13400166
> 
> 赞同：3
> 
> 时间：2012-11-15T15:00:09.130
> 
> 标签：railstutorial.org

这是我在 StackOverflow 上的第一个问题，请耐心等待...

当我使用[清单 8.6](http://ruby.railstutorial.org/chapters/sign-in-sign-out?version=3.2#code-signin_success_tests)中的 authentication_pages_spec.rb 时，我的测试通过了。然后我在 'spec/support/utilities.rb' 中定义了 sign_in 方法，并根据代码[清单 9.5](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users?version=3.2#code-settings_link_test)修改 authentication_pages_spec.rb并在运行时

```
$ bundle exec rspec spec/requests/authentication_pages_spec.rb -e "Authentication" 
```

我明白了

```
1) Authentication signin with valid information 
     Failure/Error: before { sign_in user }
     NoMethodError:
       undefined method `sign_in' for #<RSpec::Core::ExampleGroup::Nested_1::Nested_2::Nested_2:0x007fc585a87cd8>
     # ./spec/requests/authentication_pages_spec.rb:31:in `block (4 levels) in <top (required)>' 
```

对于“有有效信息”下的所有六项测试。

似乎规范没有看到 sign_in 函数并且需要一些声明，无论如何我在 Github 上的 Michael Hartl 的代码中找不到这是在哪里完成的。

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-19T18:15:48.570

只需重新启动*spork*，它应该可以工作:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-02T05:16:43.960

基于末端的细微错误放置，我遇到了完全相同的错误消息。在这里分享，以防其他人遇到相同的测试失败并寻求可能的解决方案。

我的错误在于我如何编写utilities.rb，它是：

```
include ApplicationHelper

RSpec::Matchers.define :have_error_message do |message|
    match do |page|
        page.should have_selector('div.alert.alert-error', text: 'Invalid')
end

def sign_in(user)
    visit signin_path
    fill_in "Email",    with: user.email
    fill_in "Password", with: user.password
    click_button "Sign in"
    # # Sign in when not using Capybara as well.
    # cookies[:remember_token] = user.remember_token
    end
end 
```

块之后的最终`end`需要是什么`RSpec::Matchers`，应该是这样的：

```
include ApplicationHelper

RSpec::Matchers.define :have_error_message do |message|
    match do |page|
        page.should have_selector('div.alert.alert-error', text: 'Invalid')
    end
end

def sign_in(user)
    visit signin_path
    fill_in "Email",    with: user.email
    fill_in "Password", with: user.password
    click_button "Sign in"
    # # Sign in when not using Capybara as well.
    # cookies[:remember_token] = user.remember_token
    end 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T05:36:41.913

Hartl在代码[清单 9.6](http://ruby.railstutorial.org/chapters/updating-showing-and-deleting-users?version=3.2#code-sign_in_helper)`sign_in`中几乎立即解释了这个助手

# css - 为什么我的 CSS 下拉菜单在 Internet Explorer 中不显示？

> ID：13400168
> 
> 赞同：3
> 
> 时间：2012-11-15T15:00:14.753
> 
> 标签：css, internet-explorer, menu, pull

我以为我记得在 IE 中测试过我的菜单，但现在它不起作用。:( 它在 Chrome 和 FireFox 中完美运行。我尝试查看其他答案，但找不到适合我的答案。

你可以[**在这里查看我的网站**](http://www.compray.com)

先感谢您！我是 CSS 新手，这对我来说绝对是一场斗争。我以为我已经征服了这个，现在我只是努力不哭。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:08:50.123

您的和元素`<font>`之间有两次标记。`<ul>``<li>`

[http://validator.w3.org/check?uri=www.compray.com&charset=%28detect+automatically%29&doctype=Inline&group=0](http://validator.w3.org/check?uri=www.compray.com&charset=%28detect+automatically%29&doctype=Inline&group=0)

删除它们，它将正确呈现。

编辑：

如果您想要不同的字体大小，您是否尝试过：

```
 <ul id="mainmenu">
    <li><a href="">Home</a>
        <ul>
            <li><a href="">item 1</a></li>
            <li><a href="">item 2</a></li>
            <li><a href="">item 3</a></li>
        </ul>
    </li>
    <li><a href="">FAQ</a></li>
    <li><a href="">Products</a></li>
    <li><a href="">Service</a></li>
    <li><a href="">Contact Us</a></li>
</ul>

#mainmenu li { //font styles }
#mainmenu ul li { //font styles } 
```

此外，这就是它不起作用的原因，您缺少 dtd：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:07:13.140

您的文件无效。您需要做的第一件事是更正标记。如果你看[这里](http://validator.w3.org/check?uri=http://www.compray.com/&charset=%28detect%20automatically%29&doctype=Inline&group=0)，你会在你的标记中看到 18 个错误。

主要问题`<font>`是`<ul>`. 您只能在其中放置`<li>`标签`<ul>`，然后在其中放置您需要的任何元素`<li>`。

`<font>`标签已弃用，您应该使用[CSS](http://www.w3schools.com/css/)来设置元素的样式。

# facebook-graph-api - 通过应用程序访问令牌检索特定位置的帖子

> ID：13400169
> 
> 赞同：1
> 
> 时间：2012-11-15T15:00:18.607
> 
> 标签：facebook-graph-api, geolocation

我有一个网页可以检索粉丝页面的 Facebook 帖子。

该网页不需要访问者通过 FBConnect 登录。相反，创建了一个 Facebook 应用程序并通过以下链接获得了一个应用程序密码：graph.facebook.com/oauth/access_token?client_id=[APP_ID]&client_secret=[CLIENT_SECRET]&grant_type=client_credentials

因此，我可以使用上述应用程序的 access_token 使用以下 url 通过代码隐藏（php/.net）从粉丝页面检索帖子：

graph.facebook.com/cocacola/posts?access_token=[APPLICATION_ACCESS_TOKEN]

问题：我找不到任何特定位置的帖子。通过位置特定的帖子，我的意思是只有来自特定国家的人才能看到的帖子。

有没有人能够做到这一点？谢谢

# python - python 和 HTML 表单选项。我想使用 html 表单中的参数运行一个函数并获取结果

> ID：13400173
> 
> 赞同：1
> 
> 时间：2012-11-15T15:00:40.803
> 
> 标签：python, html, function, post, parameters

我有一个带有下拉列表和一些单选按钮的 HTML 表单。用户选择选项，然后我运行一个函数来获得一些结果。

在 POST 方法中，我使用 self.request.get(parameter) 并成功获取用户从下拉列表和单选按钮中选择的内容。然后我想运行函数“解决方案”并打印出结果。这是我的代码：

```
def post(self): 
   global results
   results=""
   problem = self.request.get('prob')
   time = self.request.get('q')
   cost = self.request.get('r')
   experience = self.request.get('exp')
   level = self.request.get('lev')
   results=solution(problem,time,cost,experience,level)
   self.response.out.write(results) 
```

但它只是打印出“无”我错过了什么吗？（函数解法正确，返回字符串，我单独查过）

# php - 如何将 PHP 变量传递给这个 Javascript 函数？

> ID：13400174
> 
> 赞同：0
> 
> 时间：2012-11-15T15:00:42.253
> 
> 标签：php, javascript

假设我有这个 PHP 变量：

```
$SelectedCountry = "USA";
$SelectedState = "Texas"; 
```

另一方面，我有这个 javascript 函数来显示所有可用的国家和州：

```
function print_country(country_id){
    // given the id of the <select> tag as function argument, it inserts <option> tags
    var option_str = document.getElementById(country_id);
    option_str.length=0;
    option_str.options[0] = new Option('Where do you live now?','');
    option_str.selectedIndex = 0;
    for (var i=0; i<country_arr.length; i++) {
        option_str.options[option_str.length] = new Option(country_arr[i],country_arr[i]);
    }
}

function print_state(state_id, state_index){
    var option_str = document.getElementById(state_id);
    option_str.length=0;    // Fixed by Julian Woods
    option_str.options[0] = new Option('Select state','');
    option_str.selectedIndex = 0;
    var state_arr = s_a[state_index].split("|");
    for (var i=0; i<state_arr.length; i++) {
        option_str.options[option_str.length] = new Option(state_arr[i],state_arr[i]);
    }
} 
```

我的问题是......如何使“美国”和“德克萨斯”成为`<option>`由这两个 javascript 函数生成的选择？谢谢。

注意 #1：您可以在此处查看 javascript 的完整代码：http: [//sourceforge.net/projects/countries/files/](http://sourceforge.net/projects/countries/files/)

注意#2：通过在我的 PHP 中添加这一行来调用这些函数：

```
<script type="text/javascript" src="scripts/countries.js"></script>
<script language="javascript">print_country("country");</script> 
```

所以基本上我需要你的帮助如何传递 PHP 变量，以便它可以被该 countries.js 文件内的 javascript 函数“接收”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:09:56.967

有两个答案：

1 使用 AJAX cal 并传回 JSON

```
$.ajax({
    url: '/myScript.php',
    success: function(data) {
        //Do something
    }
}); 
```

我的脚本.php

```
return json_encode($myVar); 
```

2 将 PHP 嵌入到 JavaScript

```
<script>
    var myPHPVariable = <?php echo $myVar; ?>
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:10:33.380

一种方法是回显一些 JavaScript 语句：

```
<script>
<?php
    echo "
          var SelectedCountry = '$SelectedCountry';
          var SelectedState = '$SelectedState';
    ";
?>
</script> 
```

然后只需在循环中使用它们来检查是否需要选择该选项。

但是，如果您要做很​​多此类事情，那么将 PHP 嵌入到 JavaScript 中并不是最好的方法。阅读 AJAX 和 PHP 的`json_encode()`功能。

# java - JavaPNS 替代品？

> ID：13400176
> 
> 赞同：0
> 
> 时间：2012-11-15T15:00:48.340
> 
> 标签：java, iphone, ios, apple-push-notifications

我工作的公司在使用 LGPL 软件方面存在问题，是否有 JavaPNS 的可行替代方案，或者它是 Java 和 APN 的明确领导者？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:04:54.910

维护 JavaAPNS 库需要时间和精力。如果您或您的公司不愿意帮助支持/改进它，但希望花费很多工时来使其稳定，那么请随意去其他地方。

你看过：

[https://github.com/notnoop/java-apns](https://github.com/notnoop/java-apns)

它说：根据新的 3 条款 BSD 许可证获得许可。

# asp.net - 如何从 DataTable 访问整数数据？

> ID：13400178
> 
> 赞同：1
> 
> 时间：2012-11-15T15:00:52.847
> 
> 标签：asp.net

如何从 DataTable 访问整数数据？

我这样做是为了得到一个字符串：

```
tbEvent.Text = dt.Rows[0].Field<String>(0); 
```

但这不起作用：

```
int numb = dt.Rows[0].Field<Int>(0); 
```

问候，茶

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:03:54.663

```
int i = Convert.ToInt32(dt.Rows[0]["field_name"]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:03:44.167

试试这个 ：-

```
tbEvent.Text = dt.Rows[0].Field<Int>(0).ToString(); 
```

我假设您尝试将值传递给文本框。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:05:32.663

**使用强类型访问！**

如果你的类型`int` 是

这

```
string g = dt.Rows[0].Field<String>(0); 
```

将失败 ！

*无法将“System.Int32”类型的对象转换为“System.String”类型*

但是，如果您知道它的 int 并且想要显示它的字符串表示形式：（或只是 ToString()）

```
string t=   dt.Rows[0].Field<int>(0).ToString(); 
```

要不就 ： `dt.Rows[0][0].ToString();`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T15:07:23.933

[`Field`](http://msdn.microsoft.com/en-us/library/bb301394%28v=vs.90%29.aspx)扩展方法不会适当地转换类型。它只是模拟一个强类型的`DataTable`. 因此，如果您知道 DataColumn 的类型是`int`这样的：

```
int result = dt.Rows[0].Field<int>(0); 
```

但如果它真的来了，`string`你需要相应地转换/解析它。

例如：

```
int result = int.Parse(dt.Rows[0].Field<String>(0)); 
```

或者更松散的类型（fe 因为它是 a`double`或者你不知道它是什么）

```
int result = int.Parse(dt.Rows[0][0].ToString()); 
```

# objective-c - NSPredicate count 个 NSString

> ID：13400183
> 
> 赞同：0
> 
> 时间：2012-11-15T15:01:08.323
> 
> 标签：objective-c, ios, nspredicate

我有`Entity`一个动作为的事件`Attribute`。该操作`NSString`将保存到我的 iOS 应用程序中每个事件的核心数据中。event.action 将始终是预定义的字符串，例如。“工作”“家”“午餐”

我如何使用它`NSPredicate`来检索最后 5 个操作并给我执行最多的操作？

有没有关于使用 NSPredicate 的好教程？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:49:48.557

您能否尝试以下方法，希望能指导您:)

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
NSEntityDescription *entity = [NSEntityDescription entityForName:@"Event"
        inManagedObjectContext:managedObjectContext];
[request setEntity:entity];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"SELF IN %@", @[@"Work", @"Home", @"Lunch"]]; //contain your actions

[request setPredicate:predicate];
request.fetchLimit = 5;// retrieve the last 5 actions
NSError *error;
NSArray *yourActions = [managedObjectContext executeFetchRequest:request error:&error];

for (Event *event in yourActions)
{
  // find the action that was perform the most in last 5 actions
} 
```

请给我一个反馈，所以我知道发生了什么，所以我可以编辑代码来帮助你:)。

感谢以下参考： [使用核心数据与 NSPredicate 和 NSDate](https://stackoverflow.com/questions/13312099/using-core-data-with-nspredicate-and-nsdate) [为 NSFetchedResultsController 动态设置 fetchLimit](https://stackoverflow.com/questions/6756148/dynamically-setting-fetchlimit-for-nsfetchedresultscontroller) [http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html#//apple_ref /doc/uid/TP40001794-CJBDBHCB](http://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Predicates/Articles/pUsing.html#//apple_ref/doc/uid/TP40001794-CJBDBHCB)

# java - 将 JComponents 添加到组件时可能会出现什么问题

> ID：13400189
> 
> 赞同：1
> 
> 时间：2012-11-15T15:01:24.273
> 
> 标签：java, swing, components, awt, jcomponent

我正在对使用 awt 组件实现屏幕的现有应用程序进行一些更改。在新元素中使用 swing 将使生活更轻松，但我知道混合 swing 和 awt 组件存在一些问题。

我想知道的是：

**在 java 6 之前，当有人将 swing 组件添加到 awt 容器时可能会出现什么问题？** （我的应用程序有自定义 mdi，每个窗口都是一个 awt 面板。我真正想做的是使用与我的窗口相同的 awt 面板，并使用 java 1.5 用 swing 实现其中的所有内容）

在某些论坛上，人们说 java6u 之后？如何修复混合 awt 和 swing 组件的一些问题。你知道还有什么问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:08:52.633

有关您的问题的答案，请参阅[混合重量级和轻量级组件。](http://www.oracle.com/technetwork/articles/java/mixing-components-433992.html)

这是问题的一个例子。

![在此处输入图像描述](../Images/a0165c581dddb636f14d7fc2203d48c3.png)

# mysql - 如何使用mysql检查一个表中的一行是否在另一个表中？

> ID：13400192
> 
> 赞同：0
> 
> 时间：2012-11-15T15:01:31.413
> 
> 标签：mysql, sql

我在 MySQL 中有两个表。它们都有两列。如何使用 MySQL 检查一个表中的一行是否在另一个表中？

例如，

```
table 1:
a, c
b, a
d, f

table 2:
a, k
c, a
g, m
c, l 
```

如何检查表 1 中的每一行： (a,c) (b,a) (d,f) 是否存在于表 2 中，然后在表 1 中创建一个新列，其中包含每行在表 2 中出现的时间？这里的顺序无关紧要，所以 (a,c) 与 (c,a) 相同。所以在这种情况下，表 1 中的一行 (a,c) 匹配表 2 中的一次。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:11:01.227

使用`LEFT JOIN`，因此`table1`即使没有记录，也会显示所有记录`table2`

```
SELECT  a.col1, a.col2, COUNT(b.col1)
FROM    table1 a
        LEFT JOIN table2 b
            ON a.col1 = b.col1 AND
                a.col2 = b.col2
GROUP BY a.col1, a.col2 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/be1bb/2)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T15:53:18.827

```
SELECT  a.col1, a.col2, COUNT(b.col1)
FROM table1 a LEFT JOIN table2 b
ON (a.col1 = b.col1 OR a.col1 = b.col2) 
AND (a.col2 = b.col1 OR a.col2 = b.col2)
GROUP BY a.col1, a.col2 
```

[http://sqlfiddle.com/#!2/89c17/1](http://sqlfiddle.com/#!2/89c17/1)

# java - 从 Tomcat 6.0 迁移到 WebSphere 8.5

> ID：13400193
> 
> 赞同：0
> 
> 时间：2012-11-15T15:01:36.153
> 
> 标签：java, jakarta-ee, tomcat, websphere

将 WAR 文件部署到 websphere 应用程序服务器时，出现以下错误：

```
1\. The EAR file could be corrupt and/or incomplete. Make sure that the application is at a compatible Java(TM) Platform, Enterprise Edition (Java EE) level for the current version of WebSphere(R) Application Server.
 2\. org.eclipse.jst.j2ee.commonarchivecore.internal.exception.DeploymentDescriptorLoadException: WEB-INF/web.xml 
```

我知道我当前的 web.xml 存在一些问题，但是在修复之前我如何才能找到这些问题。

```
Note: Exporting the WAR file from Eclipse 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T15:45:02.180

错误的 DeploymentDescriptorLoadException 消息意味着您的 web.xml 可能有问题。检查 PROFILE_HOME/logs/SERVER/SystemOut.log（如果从控制台部署）或 PROFILE_HOME/logs/wsadmin.traceout（如果从 wsadmin 部署）。其中一个日志应该有一个异常堆栈跟踪，其中包含一些包含真正问题的“原因”。

# c# - 将 C# 中的 DateTime 与 Access 中的 DateTime 进行比较时出现语法错误

> ID：13400194
> 
> 赞同：1
> 
> 时间：2012-11-15T15:01:49.450
> 
> 标签：c#, sql, datetime

我已经尝试了几种方法来完成这项工作，但我一直收到同样的错误。我正在尝试删除 tblList 中的 lisDate 列（其类型为 DateTime）等于日期（没有时间）的行。假设日期是 14/07/2012（2012 年 7 月 14 日），并且 dbConnection 是一个开放的 OleDbConnection：

```
string dt = string.Format("{0}/{1}/{2}", 14, 07, 2012);
OleDbCommand command = new OleDbCommand("DELETE FROM tblList WHERE CAST(lisDate as DATE) = #" + dt + "#", dbConnection);
command.ExecuteNonQuery(); 
```

这给出了以下错误：

> 查询表达式“CAST(lisDate as DATE) = #14/07/2012#”中的语法错误（缺少运算符）。

这可能是一个愚蠢的问题，因为我以前从未比较过 DateTime 值，但我会感谢您的帮助。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:07:49.393

我没有方便的 Access，但在 SQL 中，你有错误的代码。我会尝试这样的事情作为你的查询字符串：

```
"delete from tbllist where
cast(lisDate as varchar(9)) = '" +dt +"'" 
```

实际上，更好的是：

```
"delete from tbllist
where datepart(mm,lisDate) = '07' and
datepart(dd,lisDate) = '14' and
datepart(yy,lisDate = '2012'  -- obviously cancatinating in your values 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:17:08.217

尝试使用参数，它将提供隐式日期转换：

```
 string dt = string.Format("{0}/{1}/{2}", 14, 07, 2012);
        OleDbCommand command = new OleDbCommand("DELETE FROM tblList WHERE lisDate = [pDate]", dbConnection);
        OleDbParameter dateParm = command.Parameters.Add("pDate", OleDbType.Date);
        dateParm.Value = dt;
        command.ExecuteNonQuery(); 
```

**修订：**

一个更完整的解决方案结合了 Chris Dunaway 对支持日期和时间的精辟评论，如下所示：

```
 void DeleteByDate()
    {
        try
        {
            using (OleDbConnection dbConnection = new OleDbConnection())
            {
                dbConnection.ConnectionString = myConnectionString;
                dbConnection.Open();
                string dt = string.Format("{0}/{1}/{2}", 14, 07, 2012);
                using (OleDbCommand command = new OleDbCommand("DELETE FROM tblList WHERE lisDate = [pDate]", dbConnection))
                {
                    OleDbParameter dateParm = command.Parameters.Add("pDate", OleDbType.DBTimeStamp);
                    dateParm.Value = dt;
                    command.ExecuteNonQuery();
                }
            }
        }
        catch (Exception ex)
        {
            throw new Exception(ex.Message);
        }
    } 
```

# c++ - C++：字符（下一个字符）；它有什么作用

> ID：13400196
> 
> 赞同：3
> 
> 时间：2012-11-15T15:01:56.830
> 
> 标签：c++

这是做什么的：`char(nextChar)`。我没有名为 char 的变量。我是在这里调用 char 类构造函数还是什么？

```
int nextChar;
while ((nextChar == stream.get()) != EOF)
{
    // Convert it to a string for lookup in the symbol table
    string foundChar = "";
    foundChar += char(nextChar);

} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T15:03:06.617

它附加`char(nextChar)`到`std::string` `foundChar`using 重载`std::string::operator += (char)`，然后丢弃字符串。

`char(nextChar)`是从`int`to的转换`char`（因为`nextChar`被声明为`int`） - 等价于`(char)nextChar`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:06:26.943

this 的行为是未定义的，因为

```
while ((nextChar == stream.get()) != EOF) 
```

不考虑`stream.get()`而是`nextChar`比较这两个值。在那之后 nextChar 仍然保存它在（丢失的）初始化之后所做的内存垃圾。

可能它的目的是分配值并将其与 EOF 进行比较：

```
while ((nextChar = stream.get()) != EOF) 
```

此外`char(nextChar)`，有效地做与更常用的相同`(char)nextChar`，甚至更好`static_cast<char>(nextChar)`

顺便提一句：

```
int nextChar;

while ((nextChar = stream.get()) != EOF) { } 
```

可以安全地缩短为

```
while ((int nextChar = stream.get()) != EOF) { } 
```

只要你不需要`nextChar`在循环之外。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:22:17.533

语法`T(exp)`是一个强制转换，等价于`(T)(exp)`（但`T()`对应于默认构造函数，`T(exp1, exp2, ...)`也调用相应的构造函数）。这意味着

```
int* ptr;
int i = int(ptr); 
```

是允许的（在与 相同的条件和相同的含义下`reinterpret_cast<int>(ptr)`），而

```
int j = static_cast<int>(ptr);
int k(ptr); 
```

不是。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T15:22:24.660

char(nextChar) 是从 int 数据类型到 char 数据类型的类型转换 - 相当于 (char)nextChar

[有关更多详细信息，请转到以下链接](http://www.cplusplus.com/doc/tutorial/typecasting/)

# java - 在 JPanel 中使文本跟随光标

> ID：13400197
> 
> 赞同：1
> 
> 时间：2012-11-15T15:02:03.867
> 
> 标签：java, swing, graphics, awt, mouselistener

我正在尝试使特定的文本字符串跟随 JPanel 内的光标。我创建了一个扩展 JPanel 并实现 MouseMotionListener 的类。该代码似乎不起作用。显示文本，但不跟随光标。

```
package followthemouse;

import java.awt.Graphics;
import java.awt.event.MouseEvent;
import java.awt.event.MouseMotionListener;
import javax.swing.JPanel;

public class TheJPanel extends JPanel implements MouseMotionListener {

    private int x = 20;
    private int y = 20;

    @Override
    public void paintComponent(Graphics g)
    {
        super.paintComponent(g);
        g.drawString("I love your cursor!", x, y);

    }

    @Override
    public void mouseMoved (MouseEvent me)
    {
        x = me.getX();
        y = me.getY();
        repaint();
    }

    @Override
    public void mouseDragged (MouseEvent me)
    {

    }

} 
```

这是主要功能中的内容：

```
package followthemouse;

import javax.swing.JFrame;

/**
 *
 * @author Vikram
 */
public class FollowTheMouse extends JFrame{

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) {

        TheJPanel y = new TheJPanel();
        JFrame x = new JFrame("The TITLE");
        x.add(y);
        x.setSize(400, 400);
        x.setVisible(true);

    }
} 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:06:55.167

您应该将侦听器添加到面板。

插入以下构造函数：

```
public TheJPanel() {
    this.addMouseMotionListener(this);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:07:54.523

我认为您需要添加：

```
addMouseListener(y);
addMouseMotionListener(y); 
```

*   加上我认为在一个单独的类中编码会更好。您还可以扩展 MouseInputAdapter 而不是实现 MouseMotionListener。

# jquery - 是否可以在 jQuery mobile 中点击一个单词来选择它？

> ID：13400210
> 
> 赞同：0
> 
> 时间：2012-11-15T15:03:04.683
> 
> 标签：jquery, jquery-mobile

我正在考虑用 jQuery mobile 编写一个翻译应用程序，并想知道是否有可能在句子/段落/页面/等中点击一个单词，然后基本上“获取”该单词以在其他地方使用（例如将其添加到需要进一步研究的单词列表。

我也明白，在某些设备（即 Android）中，点击一个单词时可能会出现一个复制选项——如果可能的话，我也想禁用它。我已经看到了实现这一目标的各种方法，但是我只想明确表示我知道这是我知道的一个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:08:11.280

是的，如果这个词被某个元素包裹：

```
<p>
   This is de <span class="doSomething" >word</span>
</p> 
```

的JavaScript：

```
$(".doSomething").on("tap", ... 
```

所以，为了实现你想要的，我会用`span`标签包装每个单词

# css - Chrome 没有选择 @font-face OTF

> ID：13400212
> 
> 赞同：7
> 
> 时间：2012-11-15T15:03:06.487
> 
> 标签：css

[我的网站](http://www.inside-guides.co.uk/brentwood/pages/index.html)不会在 Chrome 中获取“proxima nova”otf 并且无法理解为什么.. 这是 CSS：

```
@font-face {
    font-family:'Proxima Nova';
    src: url("/Fonts/ProximaNova-Regular.otf") format('opentype');
} 
```

任何想法都非常感谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2018-03-01T13:30:20.477

刚遇到同样的问题，otf字体不需要指定格式，去掉`src`属性的最后一部分即可：

```
@font-face {
    font-family:'Proxima Nova';
    src: url("/Fonts/ProximaNova-Regular.otf");
} 
```

这条评论帮助我解决了这个问题：

[https://github.com/facebook/create-react-app/issues/2609#issuecomment-311231425](https://github.com/facebook/create-react-app/issues/2609#issuecomment-311231425)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T15:11:01.787

不同的浏览器喜欢不同的字体文件格式，例如 IE 只会承认 .eot，我认为我说 webkit 浏览器更喜欢 .ttf 文件是正确的。

使用[Squirrel 的字体生成器](http://www.fontsquirrel.com/fontface/generator)来创建您需要的所有各种字体文件，它还将为您提供一个示例，说明如何将它们全部正确地包含在您的 css 字体声明中

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-06-06T10:39:05.763

如果您在浏览器控制台中看到此字体请求的 404 错误，则问题不在于浏览器，而在于服务器端。解决方案是在 Web 服务器上的 IIS 中为 .otf 文件扩展名添加 mime 类型。由于 otf 是一种相当新的格式，它在 IIS serevr 的默认 mime 类型列表中不可用；您必须明确添加一个。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T15:13:27.580

最适合chrome的是base64

src: url(data:application/x-font-woff;charset=utf-8;base64

[http://www.fontsquirrel.com/fontface/generator](http://www.fontsquirrel.com/fontface/generator)

共同生成这个

# javascript - Cucumber 测试 Javascript 倒计时

> ID：13400216
> 
> 赞同：0
> 
> 时间：2012-11-15T15:03:15.127
> 
> 标签：javascript, ruby-on-rails, cucumber, capybara

我正在构建一个具有某种彩票功能的 Rails 应用程序，其中 n 票在某个时间结束时被选为中奖者。该网站有一个javascript倒计时，当它达到零时会触发一个事件。此事件将触发浏览器与服务器检查用户是否获胜。我有一个 Cucumber 功能，内容如下：

```
Feature: Notify Winners
  So that I can tell if I've won
  As an authenticated user
  I want to be notified if I've won when the countdown completes

  Scenario: I have a winning ticket
    Given I'm logged in
    And I have a winning ticket for today
    When I'm on the home page
    And the countdown completes
    Then I should see "congratulations" 
```

在这一点上，我怀疑此功能是否以合理的方式编写。据我所知，在 Cucumber 中，我无法验证倒计时何时真正完成（例如，通过监听 JS 事件）。

保持原样，“当倒计时完成时”步骤定义是我不确定如何定义的。关于如何更好地测试此功能的任何指示？

# erlang - 由于 gserialver.1.gz，rebar 无法生成释放

> ID：13400218
> 
> 赞同：2
> 
> 时间：2012-11-15T15:03:23.807
> 
> 标签：erlang, debian, rebar

当我运行`rebar generate`使用 reltool 生成节点时，它失败并显示以下错误消息：

```
ERROR: Unable to generate spec: read file info /usr/lib/erlang/man/man1/gserialver.1.gz failed 
```

为什么会发生这种情况，我该怎么办？

如果有帮助，我正在运行 Debian 挤压 (6.0.6)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:03:23.807

当rebar`Unable to generate spec`从 reltool 收到错误消息时打印；消息的其余部分直接来自 reltool。在这种情况下，reltool 试图获取 Erlang 目录中各种文件的文件信息，但由于`gserialver.1.gz`是一个悬空符号链接而失败。

你可能想知道为什么`gserialver.1.gz`安装在`/usr/lib/erlang`. 实际上不是，但 Debian 创建`/usr/lib/erlang/man`一个符号链接`/usr/share/man`：

```
$ ls -l /usr/lib/erlang/man
lrwxrwxrwx 1 root root 15 Nov 15 12:19 /usr/lib/erlang/man -> ../../share/man 
```

所以真正的罪魁祸首是`/usr/share/man/man1/gserialver.1.gz`，它是由包安装的`gcj-jre-headless`。有一个关于声称已修复[的错误报告；](http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=576298)但是，如果您的盒子不是这种情况，这里有一个命令可以将文件移开并让钢筋满意：

```
sudo dpkg-divert --divert /var/gserialver.1.gz --rename /usr/share/man/man1/gserialver.1.gz 
```

# c# - 如何防止来自外部的类实例化但保持其可用？

> ID：13400222
> 
> 赞同：2
> 
> 时间：2012-11-15T15:03:33.567
> 
> 标签：c#, factory, .net-assembly

我为一个程序集编写了一个类，该程序集只能由该程序集中的工厂实例化。

外部组装：

```
MyClass myClass = factoryInstance.GetInstanceOfMyClass(); 
```

应该禁止在外面实例化这个类

禁止：

```
MyClass myClass = new MyClass(); 
```

我见过一些复杂的方法。有没有我想念的简单方法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T15:04:49.313

最简单的方法应该是制作构造函数`internal`：

```
public class MyClass
{
    internal MyClass()
    {
    }
} 
```

只要您的工厂方法位于同一个程序集中，它就可以创建您的类的实例，但是程序集之外的任何代码都无法做到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T15:06:04.470

只需使构造函数在**内部**可见，这样它所包含的程序集之外的其他类就无法看到它。

**组装 1**

```
public class MyClass
{
  internal MyClass()
  {
    // ... code here ...
  }
}

public class MyFactory
{
  public MyClass GetInstanceOfMyClass()
  {
    return new MyClass();
  }
} 
```

**组装 2**

```
// Invalid
MyClass myClass = new MyClass();

// Valid
MyClass myClass = myFactoryInstance.GetInstanceOfMyClass(); 
```

然后你可以在程序集中（通过你的工厂）实例化这个类，但它不能在程序集之外实例化。

# maven - Weblogic fastswap webinf/lib 模块

> ID：13400223
> 
> 赞同：3
> 
> 时间：2012-11-15T15:03:37.123
> 
> 标签：maven, weblogic, weblogic-10.x, hotdeploy

我们使用 maven 来构建项目，并有一个带有依赖关系的 war 模块作为 jar 文件打包到 webinf/lib 中。jar 文件本身被配置为单独的 Maven 模块。我们希望为所有模块启用快速交换，因为重新部署整个应用程序需要大量时间

根据我收集到的信息，我了解到 weblogic fastswap 不监视 webinf/lib 目录。并且还可以选择将 jar 文件分解到 webinf/classes 目录中以进行快速交换。

如果出现上述情况（将 jar 爆炸到类文件夹中），这样做是否安全，或者遵循此操作是否会产生任何不利影响。

我想知道是否有替代/首选的方法来做到这一点。

任何帮助将不胜感激。

WebLogic 服务器版本：10.3

注意：这将仅在 dev 和 prod 中完成，依赖模块将再次打包在 webinf/jar 下

谢谢。

——问候，大师

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-09T09:09:46.440

正如您显然已经知道的那样，快速交换并不能解决您的问题。我建议查看一些重新部署解决方案（例如 JRebel）...

# c# - C# 中隐式实现成员和显式实现成员的黑白差异

> ID：13400229
> 
> 赞同：-4
> 
> 时间：2012-11-15T15:03:54.557
> 
> 标签：c#

> **可能重复：**
> [C#：接口 - 隐式和显式实现](https://stackoverflow.com/questions/143405/c-interfaces-implicit-and-explicit-implementation)

我正在阅读有关接口重新实现的信息。我不确定这是什么意思？“隐式实现成员和显式实现成员”

示例代码：

显式成员实现：

```
public interface IUndoable { void Undo(); }
public class TextBox : IUndoable
{
void IUndoable.Undo() { Console.WriteLine ("TextBox.Undo"); }
}
public class RichTextBox : TextBox, IUndoable
{
public new void Undo() { Console.WriteLine ("RichTextBox.Undo"); }
} 
```

隐式成员实现：

```
public class TextBox : IUndoable
{
public void Undo() { Console.WriteLine ("TextBox.Undo"); }
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T15:06:20.673

显式接口实现允许您实现具有相同签名的成员的不同接口。它还允许您隐藏接口实现（实现的成员只能通过接口类型的引用获得）：

```
public interface IUndoable 
{ 
   void Undo(); 
}

public interface IVeryUndoable 
{ 
   void Undo(); 
}

public class TextBox : IUndoable, IVeryUndoable
{
     void IUndoable.Undo() { Console.WriteLine ("TextBox.Undo"); }
     void IVeryUndoable.Undo() { Console.WriteLine ("TextBox.VeryUndo"); }
} 
```

在这种情况下，您有两个`Undo()`具有相同签名的方法。但是当你点击`.`你的文本框变量时，没有任何方法可用。您需要将文本框变量转换为显式实现的接口类型：

```
 IUndoable undoable = (IUndoable)textbox;
 undoable.Undo(); // now member available 
```

为什么要隐藏一些接口实现？保持你的对象 API 更干净。来自 .net 的示例：`List<T>`隐式实现`IList<T>`，但隐藏了非泛型的实现`IList`。因此，您可以传递非泛型`IList`预期的列表，但非泛型方法（如`Add(object value)`不会污染良好的泛型接口）。

与此相同`IDisposable`-您可以使用具有名称`Close`并显式实现的好方法`Dispose`（这将调用您的`Close`方法）。API 将是干净的 - 只有`Close`将是可见的。但是您的对象将可以在`using`块中使用。

# java - 使用 JDOMXpath 读取 XML

> ID：13400230
> 
> 赞同：0
> 
> 时间：2012-11-15T15:03:57.240
> 
> 标签：java, xml, xpath, jdom

我有以下 XML 文件 -

```
<?xml version="1.0" encoding="UTF-8"?>
<BatchOrders xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
  <BatchHeader>
     <ServiceProvider>123456789</ServiceProvider>
     </BatchHeader>
   <OrderDetails>
     <MessageType>HelloWorld</MessageType>
  <IssueDateTime>22/01/2012 00:00:00</IssueDateTime> 
  <receivedDateTime>22/01/2012 00:00:00</receivedDateTime> 
     <Status>TestStatus</Status>
  </OrderDetails>
  </BatchOrders> 
```

我想读入内容并将它们设置为我创建的字段。所以我在下面有以下代码（没有省略一些 - 我刚刚包含了我认为我需要展示的内容。下面是我创建的测试类 - 我也有一个作家作为这个类的一部分，它编写了一个XML 文件按我的预期很好地存储在磁盘上。我面临的问题是读取上面的文件并暂时显示读取到控制台的内容。

```
File        myFileRead = null;
FileReader  myFileReader = null;

try {

myFileRead    = new File("C:/Path/myfile.xml");
myRecord = new myRecord();
myFileReader = new FileReader(myFileRead);

myXPathReader reader = new myXPathReader(myFileReader);

while (reader.hasNext())
{
       record = reader.next();

//prints out then to cosole
} 
```

所以从上面我有 myRecord 类，其中我有用于例如 ServiceProvider 等的 getter/setter。然后我还有一个用于 myXpathReader 的类，它执行以下操作：

```
 private Document document;
    private List     batchorders;
    private Iterator iterator;

    public myXPathReader (Reader myFileReader)
    throws Exception 
    {
        SAXBuilder builder = new SAXBuilder();
        document = builder.build(myFileReader);      

        batchorders = new JDOMXPath("//BatchOrders").selectNodes(document);

        iterator = batchorders.iterator();
    }

   public int getSize() { return batchorders.size(); }

   public boolean hasNext() { return iterator.hasNext(); }

   public myRecord next() 
    throws Exception {

        Element element = (Element) iterator.next();

        myRecord record = new myRecord();

      record.setServiceProvider((new JDOMXPath("./ServiceProvider").stringValueOf(element)));
      //Some more sets ans close class etc... 
```

现在，如果我调试代码并在 iterator.next 上的元素之后，我可以看到文件内容已被正确读取。但是在我的控制台上，ServiceProvider 的值，实际上所有的值都被设置为空字符串“”。为了从 XML 中提取值，我在 JDOMXPath 上做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:25:15.867

在您的示例中，XML`ServiceProvider`不是 的子级，中间`BatchOrders`还有另一个级别 ( `BatchHeader`)。所以你的第二个 XPath 表达式可能应该是

```
BatchHeader/ServiceProvider 
```

代替`./ServiceProvider`

# drupal - Drupal 和 Twitter Bootstrap，跨越视图

> ID：13400232
> 
> 赞同：0
> 
> 时间：2012-11-15T15:04:02.280
> 
> 标签：drupal, twitter-bootstrap, drupal-views, responsive-design

假设我想要一个 Drupal 视图来显示未知数量的“项目”。我想每行显示 4 个项目（在页面宽度内）。

我通常会使用一个`row-fluid`容器，里面有 4`span3`件物品。

现在我将如何使用 Drupal Views 模块来实现这一点，以便如果我有 8 个元素（2 行 4 个）或 9 个元素（2 行 4 + 1 行只有 1 个元素）等，这将被重复。

如果这对 Views 模块不可行，你会建议什么方法？

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-08T06:02:53.947

使用[http://drupal.org/project/semanticviews](http://drupal.org/project/semanticviews)模块！你会发现这很容易。

# c# - 该名称在当前上下文中不存在

> ID：13400235
> 
> 赞同：-1
> 
> 时间：2012-11-15T15:04:07.910
> 
> 标签：c#

我收到了两个文件：Sumator.cs 和 Kalkulator.cs @ **Visual Studio 2012**

我想你不需要看那两个，但我确实把它们放在这里，去页面看看我的问题。

**Sumator.cs**代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Sumator2
{
class Sumator
{
    bool Status = false;
    double Suma = 0;
    public Kalkulator Kalk = new Kalkulator();
    public Sumator()
    {
    }

    public void ZmienStatus()
    {
        Status = !Status;
    }
    public string PokazStatus()
    {

        if (Status == true)
            return " Sumator włączony";
        else
            return " Sumator wyłaczony";

    }

    public void PokazWynikS()
    {
        if (Status == true)
            Suma += Kalk.Wynik;
        Console.WriteLine("Wynik działania : " + Kalk.L1.ToString() + " " + Kalk.Dzialanie.ToString() + " " + Kalk.L2.ToString() + " = " + Kalk.Wynik.ToString() + PokazStatus() + "   Suma= " + Suma.ToString());
    }

    public void Zeruj()
    {
        Suma = 0;
    }
}
} 
```

**Kalkulator.cs**代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Sumator2
{
class Kalkulator
{
    public double L1;
    public double L2;
    public double Wynik;
    public String Dzialanie = "";
    public Kalkulator()
    {
    }
      void Oblicz()
    {
        switch (Dzialanie)
        {
            case "+":
                Wynik = L1 + L2;
                break;
            case "-":
                Wynik = L1 - L2;
                break;
            case "*":
                Wynik = L1 * L2;
                break;
            case "/":
                Wynik = L1 / L2;
                break;

        }
    }
    public void PodajDzialanie(double licz1, double licz2, string dz)
    {
        L1 = licz1;
        L2 = licz2;
        Dzialanie = dz;
        Oblicz();

    }
    public void PokazWynik()
    {
        Console.WriteLine("Wynik działania : " + L1.ToString() + " " + Dzialanie.ToString() + " " + L2.ToString() + " = " + Wynik.ToString());
    }

}
} 
```

我已经为这两个编写了我的主要代码。 **Program.cs**代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Threading.Tasks;

namespace Sumator2
{
class Program
{
    static void Main(string[] args)
    {
        Sumator s1 = new Sumator();

        s1.ZmienStatus();

        bool userNum = true;
        while (userNum)
        {
            double userDouble;
            string userString = Console.ReadLine();

            if (userNum = double.TryParse(userString, out userDouble))
            {
                userDouble = Convert.ToDouble(userString);
                userNum = false;
            }
            else 
            {
                Console.WriteLine("Nie podano liczby!");
                userNum = true;
            }
        }

        s1.Kalk.PodajDzialanie(userDouble, 2, "*");
        s1.PokazWynikS();
        s1.Kalk.PokazWynik();

        s1.Kalk.PodajDzialanie(userDouble, 2, "+");
        s1.PokazWynikS();
        s1.Kalk.PokazWynik();

        Console.ReadKey();
    }
}
} 
```

问题是我想将 s1.Kalk.PodajDzialanie() 函数与这些参数一起使用：

```
 s1.Kalk.PodajDzialanie(userDouble, 2, "*"); 
```

我得到了如下错误：

```
 The name 'userDouble' does not exists in the current context 
```

我的意思是重量*？如果我喜欢，此功能可以正常工作：

```
 s1.Kalk.PodajDzialanie(2, 2, "*"); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T15:05:43.407

你`userDouble`在你的`while`循环中声明。一旦你离开那个循环，它就超出了范围。将它移到循环之前，你应该没问题。所以你有：

```
bool userNum = true;
double userDouble;
while (userNum)
{      
    string userString = Console.ReadLine();

    // Jesli sa liczby to convertujemy
    if (userNum = double.TryParse(userString, out userDouble))
    {
        userDouble = Convert.ToDouble(userString);
        userNum = false;
    }
    else 
    {
        Console.WriteLine("Nie podano liczby!");
        userNum = true;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T15:06:24.153

您在函数无权访问的范围内声明 userDouble。

将您的代码更改为：

```
static void Main(string[] args)
    {
        Sumator s1 = new Sumator();
        double userDouble; //moved declaration out of while loop

        s1.ZmienStatus();

        // Sprawdzanie czy w stringu sa liczby
        bool userNum = true;
        while (userNum)
        {

            string userString = Console.ReadLine();

            // Jesli sa liczby to convertujemy
            if (userNum = double.TryParse(userString, out userDouble))
            {
                userDouble = Convert.ToDouble(userString);
                userNum = false;
            }
            else 
            {
                Console.WriteLine("Nie podano liczby!");
                userNum = true;
            }
        }

        s1.Kalk.PodajDzialanie(userDouble, 2, "*");
        s1.PokazWynikS();
        s1.Kalk.PokazWynik();

        s1.Kalk.PodajDzialanie(userDouble, 2, "+");
        s1.PokazWynikS();
        s1.Kalk.PokazWynik();

        Console.ReadKey();
    } 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T15:06:42.673

你的变量 double userDouble; 在 while 循环中声明，您需要将其移到外面。或者 mvoe 你的 s1.Kalk.PodajDzialanie(userDouble, 2, "*"); 在while循环结束之前。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T15:06:48.270

您的变量`userDouble`在块内声明，而您尝试执行的调用位于该块之外；因此，该变量超出范围，因此在调用的上下文中不存在。

```
{
   declaration;
   work;
}

call; // doesn't work 
```

但这*确实*有效：

```
declaration;
{
    work;
}

call; // OK 
```

# shell - shell 内置命令的特定手册页，例如“source”

> ID：13400238
> 
> 赞同：4
> 
> 时间：2012-11-15T15:04:17.047
> 
> 标签：shell, command-line, manpage

如果您在命令行中执行以下任何操作

```
man source 
man readonly
man suspend
... 
```

输出与描述 shell 内置命令的手册页相同。

我在网上搜索了“来源”，发现了这个更具体的文档：

> Linux / Unix 命令：source
> 
> 命令库名称
> 
> source - 将文件或资源评估为 Tcl
> 脚本
> 
> 源文件名源-rsrc 资源名？文件名？
> 
> 源 -rsrcid 资源 ID ？文件名？

如何在终端中输出类似的内容？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T15:06:46.797

尝试在 shell 中执行此操作：

```
help source 
```

# c++ - 在 OpenCV 2.4.3 中重塑矩阵失败

> ID：13400239
> 
> 赞同：1
> 
> 时间：2012-11-15T15:04:17.323
> 
> 标签：c++, opencv, matrix, resize

我正在使用 OpenCV 2.4.3 创建和重塑这样的矩阵：

```
cv::Mat testMat = cv::Mat::zeros ( 500, 200, CV_8UC3 );
std::cout << "size of testMat: " << testMat.rows << " x " << testMat.cols << std::endl;

testMat.reshape ( 0, 1 );
std::cout << " size of reshaped testMat: " << testMat.rows << " x " << testMat.cols << std::endl; 
```

然后从输出中，我看到重塑后的 testMat 没有变化。我在旧版本的 OpenCV 中多次使用“reshape”，但在这个新版本中，我看不到任何变化。这是一个错误吗？还是我在这里使用不正确？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:26:11.717

reshape 返回一个新的 Mat 头

```
cv::Mat testMat = cv::Mat::zeros ( 500, 200, CV_8UC3 );
std::cout << "size of testMat: " << testMat.rows << " x " << testMat.cols << std::endl;

cv::Mat result = testMat.reshape ( 0, 1 );
std::cout << " size of original testMat: " << testMat.rows << " x " << testMat.cols << std::endl;
std::cout << " size of reshaped testMat: " << result.rows << " x " << result.cols << std::endl; 
```

# php - Json 用非 ascii 字符编码？

> ID：13400242
> 
> 赞同：2
> 
> 时间：2012-11-15T15:04:43.033
> 
> 标签：php, javascript, jquery, json

我知道 json_encode 需要 UTF-8 编码，我已经在使用它，但是在我将 php 数组传递给 javascript 的过程中，我无法按原样传输数据。

我将这些用于测试在 JS 标记之间的空模板 html 页面中。

```
$arrs=array("kağıtşim","üğçöşiö");
echo 'data_labels=json_encode($arrs);';

//The result is  ; 
data_labels=["ka\u00c4\u009f\u00c4\u00b1t\u00c5\u009fim","\u00c3\u00bc\u00c4\u009f\u00c3\u00a7\u00c3\u00b6\u00c5\u009fi\u00c3\u00b6"]; 
```

据我所知，没有错；文件是 UTF-8 没有 BOM 字符集是 UTF-8 标头设置为 UTF-8 与 DB 无关

我怎样才能恢复这个 json_encode 转换

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:07:17.460

您无需还原任何内容。当 JavaScript 解析器解析这些字符串时，它会自动将这些转义序列转换为正确的字符。

# scala - SBT 不会重新编译用 java 文件编写的 junit 测试用例

> ID：13400243
> 
> 赞同：5
> 
> 时间：2012-11-15T15:04:43.960
> 
> 标签：scala, testing, junit, sbt

我用 SBT 0.11.2 做了一个 Scala/Java 混合项目。我的 JUnit 测试配置是

```
resolvers += "twitter.com" at "http://maven.twttr.com/"

seq(com.github.retronym.SbtOneJar.oneJarSettings: _*)

libraryDependencies += "com.novocode" % "junit-interface" % "0.10-M2" % "test" 
```

当我用 Scala 编写 JUnit 测试用例时`@Test`，一切顺利。但是当我写一个 Java JUnit 测试用例，然后`test`在 sbt 中运行时，Java JUnit 测试无法重新配置。只执行用 Scala 编写的测试用例。

如何让 sbt 同时识别我的 Java 和 Scala 测试用例？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2014-07-19T20:08:29.490

原始问题可能迟到了，但是..

我一直在看这个。我的项目中的 JUnit 测试在我运行`sbt clean test`. 现在一切都像魅力一样工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-16T15:09:47.080

0.11.x 在检测 Java 测试时存在一个错误，该错误已[在 0.12.0 中修复](https://github.com/harrah/xsbt/commit/2525eeb7e66a6f95392bb33209cc111cc9986240)，尽管我认为它不会影响检测带注释的测试。您可以尝试提出一个最小的测试用例并检查最新的 sbt 版本（0.12.1）。如果问题仍然存在，请提交错误。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T10:17:07.763

你应该把你的测试类放入 src/test/java 并且你的类名应该以“Test”结尾（例如 myTest.java）

# javascript - Firebase 快照参考不会返回数据

> ID：13400254
> 
> 赞同：4
> 
> 时间：2012-11-15T15:05:33.613
> 
> 标签：javascript, firebase

我正在使用 firebase 并列出了具有某些优先级的人员列表。在我的一项职能中，设置和获取优先级工作正常。但在另一个方面，我只能设置并尝试获取项目的优先级返回“dataSnapshot.getPriority() 不是函数”。

```
var playersList = new Firebase('https://myfirebase.firebaseIO.com/players') 
var winnerSnapshot =  playersList.child(winner);
winnerSnapshot.setPriority('1300'); //This is working
var oldPriority = winnerSnapshot.getPriority(); //Not working 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:33:29.737

这里实际上有两种不同类型的对象在起作用。Firebase[参考](https://www.firebase.com/docs/firebase.html)和[DataSnapshot](https://www.firebase.com/docs/datasnapshot.html)。当您调用 new Firebase() 时，您会得到一个 Firebase 引用，它允许您写入数据（例如使用 set 或 setPriority）或附加回调以*读取*数据（例如使用 on 或 once）。

这些使用 on() 或 once() 注册的回调通过 DataSnapshot 接收数据，您可以在其上调用 .getPriority( *)*。查看[阅读数据](https://www.firebase.com/docs/reading-data.html)文档以获取完整的详细信息。

例如，要使您的示例正常工作，您可以执行以下操作：

```
var winner = "somebody";
var playersListRef = new Firebase('https://myfirebase.firebaseIO.com/players') 
var winnerRef =  playersListRef.child(winner);

// You use a firebase reference to write data.
winnerRef.setPriority('1300');

// You can also use a firebase reference to attach a callback for reading data.
winnerRef.once('value', function(winnerSnapshot) {
  // Inside your callback, you get a DataSnapshot that gives you access to the data.
  var priority = winnerSnapshot.getPriority();
}); 
```

# c# - 需要保护 WCF 数据，但仅限于一个部分

> ID：13400255
> 
> 赞同：0
> 
> 时间：2012-11-15T15:05:37.743
> 
> 标签：c#, asp.net, wcf, ssl

我有一个使用 BasicHttpBinding 的 WCF 服务设置，现在我需要创建一个允许用户上传文件的部分。这需要安全，因此我们正在考虑使用 SSL 从网站传输到 WCF。有谁知道我是否需要为 SSL 部分创建另一个 WCF 服务，或者它可以全部在一个 WCF 服务中，其中一部分是 BasicHTTPBinding，另一部分是 SSL 部分，因为我们不想使用 SSL所有调用，只是一些与文件上传相关的调用。

否则有另一种方法来解决这个问题吗？就像可能通过网站端的某种加密方法加密文件然后发送它一样，如果推荐的话，我们可以尝试这样做，所以没有 SSL 只是将加密文件发送到 WCF 以存储在服务器上。

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:11:34.753

是的，您需要 2 个具有单独合同的 WCF 服务，但它们可以托管在同一个站点上。

使用具有“传输安全性”的绑定配置您要使用 SSL 的那个。

# ghostscript - 多 PDF TO jpeg 删除文件

> ID：13400259
> 
> 赞同：0
> 
> 时间：2012-11-15T15:05:48.203
> 
> 标签：ghostscript

我有多页PDF，例如。~ 80 页

```
gs -dNumRenderingThreads=2 -c 30000000 setvmthreshold -f -dNOGC 
-sDEVICE=jpeg  -q -dSAFER -dNOPAUSE -dBATCH -dMaxBitmap=100000000 
-dJPEGQ=100 -r300 -dPDFFitPage -dFIXEDMEDIA 
  -sDEFAULTPAPERSIZE=a4 -sOutputFile='.$output_name.'temp%04d.jpg $input_file 
```

首先是试图拆分整个 pdf，但它开始在 --showpage 中显示错误 invalidfileaccess ...

文件没问题，因为首先我检查它是否存在现在我将 pdf 分块为 10 页 pdf，但仍然是同样的问题，在我循环运行分块 pdf 后，它会从循环中删除有错误的文件和所有其他文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:12:02.977

最可能的问题是目标或 /tmp 卷中的磁盘空间不足，或者可能是内存错误。

您应该从简化命令行开始；摆脱可能在 300 dpi 时根本没有做任何事情的 NumRenderingThreads，删除无关的 -c... -f 和 -dNOGC，这些限制了内存并阻止 GS 进行垃圾收集，这意味着它的内存使用量会不断增加。

删除 -dSAFER 因为它会影响文件写入。将 -sPAPERSIZE=a4 放在 -dFIXEDMEDIA 之前，因为操作数的顺序很重要。

如果这样可以解决问题，请一次返回一个命令，直到问题再次出现。

最后，您使用的是什么版本的 Ghostscript，请发布整个错误跟踪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T12:06:26.820

已解决的问题 TMP DIR 出现奇怪的情况需要 foreach export TMP diffrent dir

# django - 使用 django 和 mongodb 更新数据的动态 UI

> ID：13400263
> 
> 赞同：0
> 
> 时间：2012-11-15T15:06:06.377
> 
> 标签：django, mongodb

这是我要实现的目标的要点。我有一个用户列表，其中有一个固定的属性列表

```
EmployeeID
Employee
FirstName
LastName
SSN 
```

这可以很容易地在模型中创建，并且可以生成一个 UI 来输入这些值

我有另一个用户属性列表，它不是固定的，而是动态的。例如，如果员工已婚，如果他是毕业生，我想获取更多信息。基本上，员工的附加属性列表是无限的，并且特定于每个员工。它也在不断变化，因此无法提前计划。显然创建一个包含所有字段的表是没有意义的

```
EmployeeID (foreignKey Employee table)
IsMarried
SpouseName
IsGraduate
GraduationYear
GraduationMajor
GraduationMinor
IsCertified
... 
```

我认为像 mongodb 这样的 NoSql 数据库在这里很有意义。我相信我可以在 mongodb 记录中保存员工的员工 ID 和用户的相关信息。如何创建 UI，以便 HR 人员可以使用表单来编辑/输入此信息？每个用户将有一组不同的属性和相应的文本字段来显示/编辑。有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T22:12:04.363

对于使用关系数据库的动态属性，您可以尝试以下操作：

```
class Employee( models.Model ):
    firstname = models.CharField( max_length=50 )
    lastname  = models.CharField( max_length=50 )
    ssn       = models.IntegerField()

class EmployeeAttribute( models.Model ):
    ATTRIBUTE_CHOICES = (
        (0, 'is_married'),
        (1, 'spouse_name'),
        (2, 'is_graduate'),
               ...
    )
    name      = models.IntegerField( max_length=3, choices=ATTRIBUTE_CHOICES )
    value     = models.CharField( max_length=255 )
    employee  = models.ForeignKey( 'Employee' ) 
```

每当您想要添加一个新属性时，只需将其附加到属性选择元组中，并增加最后一个数字。

如果您的目标是不需要在每次需要添加新属性时都编写额外代码，请尝试以下操作：

```
class Employee( models.Model ):
    firstname = models.CharField( max_length=50 )
    lastname  = models.CharField( max_length=50 )
    ssn       = models.IntegerField()

class Attribute( models.Model ):
    name      = models.CharField( max_length=50 )

class EmployeeAttribute( models.Model ):
    attribute = models.ForeignKey( 'Attribute' )
    employee  = models.ForeignKey( 'Employee' ) 
```

使用这种方法，您至少可以创建一个区域，允许您通过 Django 管理员或自定义模板创建新属性。获取员工的**扩展**属性就像这样简单：

```
employee = Employee.objects.get( firstname='John', lastname='Doe' )
extended_attributes = employee.employee_attribute_set.all() 
```

# c# - 使用 C# 终止重复进程

> ID：13400264
> 
> 赞同：0
> 
> 时间：2012-11-15T15:06:13.343
> 
> 标签：c#, .net

因此，在我的程序开始时，我有一段代码检查该进程的另一个实例是否正在运行。

```
Process process = Process.GetCurrentProcess();
bool isProcessRunning = (Process.GetProcessesByName(process.ProcessName)).Length > 1; 
```

如果进程正在运行，那么我会打开一个消息框，说明进程已经在运行，并询问用户是否要终止当前进程并打开一个新进程。

如果对话结果是肯定的，那么我使用 process.kill 来关闭进程。问题是我将运行其中两个进程，那么如何指定要关闭哪个进程？进程名会完全一样，我想关闭先打开的那个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:18:01.770

```
private static void killps(string processName)
{
    Process[] process = Process.GetProcessesByName(processName);
    Process current = Process.GetCurrentProcess();
    foreach (Process p in process)
    {
        if (p.Id != current.Id)
        p.Kill();
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:10:33.800

循环遍历同名的进程并检查 Id 是否不同。如果是的话，杀了它。

```
Process process = Process.GetCurrentProcess();
var dupl = (Process.GetProcessesByName(process.ProcessName));
if( dupl.Length > 1 && MessageBox.Show("Kill?", "Kill duplicates?", MessageBoxButtons.YesNo) == DialogResult.Yes ) {
    foreach( var p in dupl ) {
        if( p.Id != process.Id )
            p.Kill();
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:10:14.673

使用它来终止当前正在启动的进程。根据程序路径位置，计数将为 2，并将终止：

```
if (System.Diagnostics.Process.GetProcessesByName(System.IO.Path.GetFileNameWithoutExtension(System.Reflection.Assembly.GetEntryAssembly().Location)).Count() > 1) System.Diagnostics.Process.GetCurrentProcess().Kill(); 
```

您还可以使用：

```
Process.Id 
```

在您使用 GetProcessesByName 获得当前流程后，以区别流程。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T15:18:24.743

您可以使用 Process.StartTime 属性并查看稍后启动的进程然后将其终止。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T15:44:08.557

我不久前使用本网站上另一个问题和答案中的一些 R&D（Ripoff 和 Deploy）写了这篇文章（找不到原版），它检查程序是否已经从同一路径运行（这允许多个只要 exe 是从不同的路径启动的实例）。我将另一个程序设为活动窗口（如果它被最小化，它甚至会恢复窗口），甚至从未告诉用户打开了一个重复的实例。

```
public static class SingleApplication
{
    [DllImport("user32.Dll")]
    private static extern int EnumWindows(EnumWinCallBack callBackFunc, int lParam);

    [DllImport("User32.Dll")]
    private static extern void GetWindowText(int hWnd, StringBuilder str, int nMaxCount);

    [DllImport("user32.dll", EntryPoint = "SetForegroundWindow")]
    private static extern bool SetForegroundWindow(IntPtr hWnd);

    [DllImport("user32.dll")]
    private static extern Boolean ShowWindow(IntPtr hWnd, Int32 nCmdShow);

    static Mutex mutex;
    const int SW_RESTORE = 9;
    static string sTitle;
    static IntPtr windowHandle;
    delegate bool EnumWinCallBack(int hwnd, int lParam);

    private static bool EnumWindowCallBack(int hwnd, int lParam)
    {
        windowHandle = (IntPtr)hwnd;
        StringBuilder sbuilder = new StringBuilder(256);
        GetWindowText((int)windowHandle, sbuilder, sbuilder.Capacity);
        string strTitle = sbuilder.ToString();
        if (strTitle == sTitle && hwnd != lParam)
        {
            ShowWindow(windowHandle, SW_RESTORE);
            SetForegroundWindow(windowHandle);
            return false;
        }
        return true;
    }

    /// <summary>
    /// Execute a form application. If another instance already running on the system activate previous one.
    /// </summary>
    /// <param name="frmMain">main form</param>
    /// <returns>true if no previous instance is running</returns>
    public static bool Run(System.Windows.Forms.Form frmMain)
    {
        if (IsAlreadyRunning())
        {
            sTitle = frmMain.Text;
            EnumWindows(new EnumWinCallBack(EnumWindowCallBack), frmMain.Handle.ToInt32());
            return false;
        }
        Application.Run(frmMain);
        return true;
    }

    /// <summary>
    /// Checks using a Mutex with the name of the running assembly's location
    /// </summary>
    /// <returns>True if the assembly is already launched from the same location, false otherwise.</returns>
    private static bool IsAlreadyRunning()
    {
        string strLoc = Assembly.GetEntryAssembly().Location;

        FileSystemInfo fileInfo = new FileInfo(strLoc);
        string name = fileInfo.Name;
        mutex = new Mutex(true, name);
        if (mutex.WaitOne(0, false))
        {
            return false;
        }
        return true;
    }
} 
```

它被用作以下

```
static class Program
{
    /// <summary>
    /// The main entry point for the application.
    /// </summary>
    [STAThread]
    static void Main()
    {
        Application.EnableVisualStyles();
        Application.SetCompatibleTextRenderingDefault(false);
        SingleApplication.Run(new Form1());
    }
} 
```

如果您愿意，您可以检查是否返回`true`或`false`返回`SingleApplication.Run()`以了解您的程序是否正在启动。它会阻塞直到`Application.Run()`正常退出并返回 true，或者如果程序已经在运行，它会立即返回 false。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-15T15:45:53.327

通过比较两个进程的开始时间。

```
 Process process = Process.GetCurrentProcess();
 Process [] duplicateProcess = Process.GetProcessesByName(process.ProcessName).ToArray();
 if (duplicateProcess.Length > 1)
 { 
        if (MessageBox.Show("Duplicate Found. Do you want to kill duplicate process", "Duplicate Process", MessageBoxButtons.YesNo, MessageBoxIcon.Question) == DialogResult.Yes)
        {
            foreach (Process p in duplicateProcess)
            {
                int res = DateTime.Compare(p.StartTime, process.StartTime);
                if (res < 0)
                {
                    // P process opened first
                    p.Kill();
                }
                else if ( res > 0 )
                {
                    // process Opened first
                    process.Kill();
                }
            }
        }
    } 
```

# ios - ViewForAnnotation 在 iPad 6.0 模拟器中工作，但在 iPad 5.1 模拟器中不起作用

> ID：13400270
> 
> 赞同：3
> 
> 时间：2012-11-15T15:06:33.223
> 
> 标签：ios, ios5, ios6, mkmapview, mkannotationview

我开始使用 iOS6 构建一个运行良好的应用程序，但后来由于更强大的原因，我不得不切换到 IOS5。但是，有一张地图一直给我带来问题。这张地图有许多类型的annotationView（例如电影院、餐馆、剧院......），每个都有自己的图像。当我从 iOS6 传递到 iOS5 时，我注意到 annotationView 的行为与以前不同，因为构造它们的委托方法的调用不再相同。我能做些什么？

```
-(void)viewDidLoad{

     //.....
     //extraction of elements from the tables in a database

  for(int i=0; i<7; i++){ //extraction tables from database

    //......

    for (int i =0; i< number; i++) { //extraction elements from tables

        self.chinaTable =[self.mutableArray objectAtIndex:i];

         CLLocationCoordinate2D coord=CLLocationCoordinate2DMake(self.chinaTable.latitudine, self.chinaTable.longitudine);

        AnnotationCustom *annotationIcone =[[AnnotationCustom alloc]initWithCoordinates:coord title:self.chinaTable.titolo subTitle:self.chinaTable.indirizzo];

        //.......

        [self.mapView addAnnotation:annotation];

        self.locationManager.delegate = self;
        self.mapView.delegate=self; //the problem is here

   }

  } 
```

委托方法

```
 - (MKAnnotationView *)mapView:(MKMapView *)mapview viewForAnnotation:(id 
  <MKAnnotation>)annotation 
  {
        NSLog (@"the name of the table is %@", self.nomeTabella);
        // this NSLog you get only the name of the last open table

       //..........
       if ([annotation isKindOfClass:[AnnotationCustom class]]){
          static NSString* AnnotationIdentifier = @"AnnotationIdentifier";
       MKAnnotationView *annotationView = (MKAnnotationView*) [mapView dequeueReusableAnnotationViewWithIdentifier:AnnotationIdentifier];
       annotationView = [[MKAnnotationView alloc]initWithAnnotation:annotation reuseIdentifier:AnnotationIdentifier];
      annotationView.annotation = annotation;
      AnnotationCustom *customAnnotation = (AnnotationCustom *)annotationView.annotation;

     //I create an annotation different depending on the name of the table of provenance

     if ([self.nomeTabella isEqualToString:@"Cinema"]){
            if(UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone){
                annotationView.image = [UIImage imageNamed:@"iphone_cinema.png"];

                customAnnotation.nomeTabella = self.nomeTabella;
                customAnnotation.ID = self.chinaTable.ID;
                customAnnotation.china = self.chinaTable;

           }else{
                annotationView.image = [UIImage imageNamed:@"ipad_cinema.png"];
                customAnnotation.nomeTabella = self.nomeTabella;
                customAnnotation.ID = self.chinaTable.ID;
                customAnnotation.china=self.chinaTable;
            }

            //......

  } 
```

委托方法**`viewForAnnotation`**不再在每个注解构建后被调用，而是仅在两个循环结束时调用，因此`annotationView`映射上只有内存中最后一个表的那些。我在哪里可以设置我委托方法以获得与以前相同的结果？***`ViewForAnnotation`***在 iPad 6.0 模拟器中工作正常，但在 iPad 模拟器 5.1 中不起作用，代码相同

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T19:31:15.073

我很惊讶听到`viewForAnnotation`每次施工后才调用它。这不是记录的方式，也不是其他任何人使用的方式。`viewForAnnotation`可以并且将在您的应用程序中的任何时候调用。如果用户滚动地图以致某些注释消失，则可以在他们向后滚动地图并重新出现注释时调用它。或者，如果用户切换到另一个视图或应用程序然后返回。

您需要*`viewForAnnotation`*检查`annotation`一些属性的变量，这些属性可以让您确定如何绘制该视图。您不能依赖以任何特定顺序调用它。周围有大量示例代码将向您展示如何`MKAnnotation`使用您自己的类来实现协议，您可以向该类添加一些内容来告诉您它所代表的东西是电影院还是餐馆或其他什么，然后您获取正确的图像放置它变成了`MKAnnotationView`想要`viewForAnnotation`的作为返回值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-23T15:56:23.767

你的代码对我来说似乎没问题。实际上，我也在开发一个使用 Maps 的 Iphone 应用程序，我正在像你一样做。只有一个问题，你为什么要使用：

```
if(UI_USER_INTERFACE_IDIOM()== UIUserInterfaceIdiomPhone) 
```

是检查用户是在运行 iPad 还是 iPhone？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T06:12:15.220

`viewForAnnotation`当您运行循环时（即添加 each 时`MKAnnotation`）不会被调用，因为您在 main 上`runLoop`。当你`viewDidLoad`完成并发生一个`runLoop`循环时，`MKAnnotation`s（当前地图位置上的那些）将被绘制在屏幕上，从而调用你的`delegate`. 因此，当您调试和单步`viewDidLoad`执行时，您看不到对`delegate`方法的调用是完全正常的。

有几件事：

*   您应该在循环之外设置您的委托方法。所以`self.locationManager.delegate`并且`self.mapView.delegate`应该在你的`for`循环之前设置，而不是在你的嵌套循环中设置一百万次。

*   您正在重用`i`作为`for...loop`变量。我希望这只是由于您删除了在此处发布的业务逻辑，而不是在您的实际代码中。它可以解释为什么只有你的最后一组注释似乎被呈现。

你确定你没有操纵`mapView.annotations`嵌套中的其他地方`for...loops`吗？检查`removeAnnotations`和`setAnnotations:`两者都可能导致 中的注释与`mapView`您期望的不同。

你能展示你的`annotation`对象是如何构造的吗？另一种可能性是您不小心改变了现有对象而不是创建新对象。

# javascript - 调用python脚本时getJson不起作用

> ID：13400271
> 
> 赞同：1
> 
> 时间：2012-11-15T15:06:37.070
> 
> 标签：javascript, python, html, getjson

我有以下简单的代码，但 getjson 不知何故不起作用。我的 python 脚本正确打印了一个 json 编码的值。任何人都可以提出任何建议吗？

HTML

```
<!DOCTYPE html>
<html>
 <head>
   <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js" type="text/javascript"></script>
 </head>
 <body>
   <script type="text/javascript">

   $.getJSON('weather.py', function(data) {
    console.log('callback works');
  });

   </script>
 </body>
</html> 
```

Python：

```
import json
from json import load
from urllib2 import urlopen
from pprint import pprint
import pycassa
from pycassa.pool import ConnectionPool
from pycassa.columnfamily import ColumnFamily
from pycassa.index import *

pool = pycassa.ConnectionPool('hr')
crime = pycassa.ColumnFamily(pool, 'crime')

##Pull all of the data and convert to JSON 
data = json.dumps([columns for key, columns in crime.get_range()])
return data 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:09:27.187

你不能从 Jquery 运行 python 脚本。

您需要让您的 python 脚本与网络服务器一起运行以提供响应。

起点：[http ://docs.python.org/2/howto/webservers.html](http://docs.python.org/2/howto/webservers.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:10:43.910

我假设您正确缩进了您的 python 脚本。我还假设您已经配置了网络服务器环境。除此之外

代替

```
return data 
```

你必须

```
print data 
```

在你的 python 脚本中。由于[$.getJSON](http://api.jquery.com/jQuery.getJSON/)将中继脚本的输出，而不是您返回的变量的内容。

# java - 防止 JPA 中的 N+1 选择

> ID：13400285
> 
> 赞同：7
> 
> 时间：2012-11-15T15:07:09.830
> 
> 标签：java, sql, performance, jpa

我有 JPA 实体 Order 与客户的多对一关系。它是双向的，因此 Customer 也有一个 OneToMany 字段的订单。两种关系都使用 EAGER 获取（或在 OpenJPA 获取计划中）。

当我从 Order 中选择时，我得到 1 个选择的订单和 N 个选择的 Customer.orders 字段。令我惊讶的是，OpenJPA、EclipseLink 和 Hibernate 都存在这个问题，即使我使用 JOIN FETCH（它在单向情况下确实有效）。

有没有解决这个问题的好方法？对于更复杂的图形，是否有解决 N+1 选择问题的解决方案？

编辑：我自己的研究结果： - 对于 OpenJPA（我正在使用）我还不知道解决方案 - 对于 Hibernate @Fetch(FetchMode.SUBSELECT) 解决了这个问题。使用@BatchSize 也有帮助，它可以同时选择给定数量的 customer.orders 字段。- 对于 EclipseLink，我发现了一个类似的功能 @BatchFetch(value=BatchFetchType.IN) 但在这种情况下它没有帮助，我想它不能在双向关系中有效地处理这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:50:54.250

看看：[什么是SELECT N+1？](https://stackoverflow.com/questions/97197/what-is-the-n1-selects-problem)因为那里有很多很好的信息。

如果您使用 Hibernate：[Hibernate - 第 19 章：提高性能 - 获取策略](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/performance.html#performance-fetching)

[我自己的个人解决方案是使用原生 SQL 和 tmp ids 表](https://stackoverflow.com/a/12927312/318174)，因为一般恕我直言，N+1 选择问题主要是批处理问题。否则延迟加载（通常是 N+1 解决方案）可能对性能有益。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-15T16:19:15.513

这是一个解决方案：

1.  将实体层与 API 层分开，并仅在您的应用程序内与 API 实例交互。在此上下文中的 api 也可以称为 DTO。

2.  从实体中完全删除关系。

3.  创建一个机制来表明您希望获取孩子。例如：将 fetchRequestList 传播到将 API 映射到实体的层（这样您就可以有条件地获取）。

4.  在查询执行期间，像往常一样收集父对象。

5.  使用带有基于 FK 到父 PK 的 IN 子句的命名参数化查询检索整个子集合。

6.  循环遍历结果并将它们与父母相匹配。

这将强制 ORM 执行 n+1 次查询而不是 n(n+1) 次查询。请记住，您现在必须使用自定义逻辑实现级联保存、删除、更新等。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T15:42:06.347

在任何 ORM 框架中，N+1 问题都很常见。你无法避免这一点。但是，这更多的是关于你采取什么样的方法来解决这个问题。您可以根据您的实现使用关联和延迟加载或急切加载日期。您还可以在单​​个查询中执行数据库映射并获取所有关联数据，然后将其映射到您的模型。由于数据库已编入索引，因此此操作可能比您使用 N+1 查询获取数据和映射更快（如果您的网络延迟允许）。

# haskell - 如何让这个 X11 代码工作？

> ID：13400289
> 
> 赞同：2
> 
> 时间：2012-11-15T15:07:16.027
> 
> 标签：haskell, x11

我试图按照[X11](http://www.haskell.org/haskellwiki/X_window_programming_in_Haskell) haskell 库上的教程进行操作，但遇到了一个问题 - 创建的窗口位于屏幕的左下角，而不是左上角，并且绘图（在方法中`drawInWin`）似乎没有做任何事情.

```
#!/usr/bin/runghc -Wall

module Main where
import Graphics.X11.Xlib
import System.Exit (exitWith, ExitCode(..))
import Control.Concurrent (threadDelay)

main :: IO ()
main = do
 dpy <- openDisplay ""
 let dflt = defaultScreen dpy
     border = blackPixel dpy dflt
     background = whitePixel dpy dflt
 rootw <- rootWindow dpy dflt
 win <- createSimpleWindow dpy rootw 0 0 100 100 1 border background
 setTextProperty dpy win "Hello World" wM_NAME
 mapWindow dpy win
 drawInWin dpy win
 sync dpy False
 threadDelay (10 * 1000000)
 exitWith ExitSuccess

drawInWin :: Display -> Window -> IO ()
drawInWin dpy win = do
 bgcolor <- initColor dpy "green"
 fgcolor <- initColor dpy "blue"
 gc <- createGC dpy win
 setForeground dpy gc bgcolor
 fillRectangle dpy win gc 0 0 100 100
 setForeground dpy gc fgcolor
 fillRectangle dpy win gc 2 2 96 96
 freeGC dpy gc

initColor :: Display -> String -> IO Pixel
initColor dpy color = do
 let colormap = defaultColormap dpy (defaultScreen dpy)
 (apros,real) <- allocNamedColor dpy colormap color
 return $ color_pixel apros 
```

基本上，我需要创建一个带有画布的简单窗口，我将在其上绘制一些线条。

我在那个片段中做错了什么？

版本：

```
X11 - 1.5.0.1
GHC - 6.12.1
OS - Linux Mint 10
Xorg - 1:7.5 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T20:55:35.457

X11 绑定的 1.5 版本中存在许多与 64 位正确性相关的错误。这些已在 1.6 版本中修复，因此升级应该可以解决这些问题。

# python - 命名空间包和 pip install -e

> ID：13400291
> 
> 赞同：6
> 
> 时间：2012-11-15T15:07:27.213
> 
> 标签：python, virtualenv, pip

我有一个`ns.pkg2`依赖包的`ns.pkg1`包。我制作了一个分支，将其发布到 git 并希望将我的版本安装到我的 virtualenv 中。我使用`pip install -e mygit`并以`ns.pkg`in`<env>/local/lib/python2.7/site-packages/ns/pkg1`和`ns.pkg2`in`<env>/src/ns.pkg2`结尾`<env>/lib/python2.7/site-packages/ns.pkg2.egg-link`。现在我可以导入`ns`，`ns.pkg1`但不能`ns.pkg2`。`pip install -e`如果没有调用，我找不到从 git 安装包的方法`setup.py develop`。另外，我不确定这不是模块代码的问题。

那么，是否可以从 tarball 和直接从 git 共同安装来自同一命名空间的两个模块？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-15T14:39:20.463

与命名空间安装`pip`相关的未解决问题： [https ://github.com/pypa/pip/issues/3](https://github.com/pypa/pip/issues/3)`--editable`

一种[解决方法已合并](https://github.com/pypa/pip/pull/541)，也许您可​​以通过以下方式解决您的问题：

```
$ pip install -e mygit --egg 
```

# sql - SQL 语句仅在存在更多记录时提取 1 条记录

> ID：13400297
> 
> 赞同：2
> 
> 时间：2012-11-15T15:07:47.537
> 
> 标签：sql, tsql

我这里有一个奇怪的！我有一个具有发布时间的数据库表，并且每分钟运行一个代码来查看是否要发布某些内容。我知道事实上有 3 条不同的记录以上午 09:00:00 作为时间。

当我运行以下代码时，我只得到一条记录：

```
SELECT * FROM AutoContentTimes WHERE FireTime = '09:00:00 AM' 
```

有什么问题，这很简单。FireTime 是 char(11)

提前谢谢了，

新杰克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:13:58.533

你可以`set rowcount 1`设置。

尝试`set rowcount 0`

并且，正如评论的那样，不要将时间存储为`char`. 使用适当的数据类型。

# scala - 通过将带有参数的方法传递给“成为”来更改 Akka 演员状态

> ID：13400300
> 
> 赞同：3
> 
> 时间：2012-11-15T15:07:49.533
> 
> 标签：scala, akka, actor

我`become`在我的 Akka 演员中使用时遇到了一些麻烦。基本上，我的演员有这样的结构：

```
// This is where I store information received by the actor
// In my real application it has more fields, though.
case class Information(list:List[AnyRef]) {
    def received(x:AnyRef) = {
        Information(list :+ x)
    }
}

class MyActor extends Actor {

    // Initial receive block that simply waits for a "start" signal
    def receive = {
        case Start => {
            become(waiting(Information(List())))
        }
    } 

    // The main waiting state. In my real application, I have multiple of
    // these which all have a parameter of type "Information"
    def waiting(info:Information):Receive = {

        // If a certain amount of messages was received, I decide what action
        // to take next.
        if(someCondition) {
            decideNextState(x)
        }

        return {
            case Bar(x) => {
                //
                // !!! Problem occurs here !!!
                //
                // This is where the problem occurs, apparently. After a decision has been
                // made, (i.e. decideNextState was invoked), the info list should've been
                // cleared. But when I check the size of the info list here, after a decision
                // has been made, it appears to still contain all the messages received
                // earlier.
                //
                become(waiting(info received x))
            }
        }
    }

    def decideNextState(info:Information) {
        // Some logic, then the received information list is cleared and 
        // we enter a new state.
        become(waiting((Information(List())))
    }
} 
```

很抱歉代码片段太长，但我真的不能让它更小。

出现问题的部分在评论中标注。我将参数传递给返回`Receive`部分函数的方法，然后将其传递给该`become`方法。但是，创建的部分函数似乎以某种方式保留了早期调用的状态。我发现这个问题有点难以解释，但我已尽力在代码中的注释中这样做，所以请阅读这些，我会回答任何不清楚的地方。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:46:45.727

你的逻辑有点复杂，但我会试一试可能是什么问题：

如果`someCondition`为真，那么您的参与者将进入一个状态，我们称其为 S1，其特征在于值 Information(List())。然后你返回（顺便说一句，`return`除非绝对必要，否则避免使用）一个接收方法，它将让你的演员进入状态 S2，其特征是列表 Information(somePreviousList :+ x)。因此，此时您的状态堆栈顶部有 S1。但是当您收到一条`Bar(x)`消息时，状态 S2 将被推送，从而覆盖 S1 并且您实际上转换到一个状态，该状态的特征是带有旧值的 Information + your new `x`。

或者类似的东西，你的演员中的递归有点令人着迷。

但我会建议重写该代码，因为看起来发生变化的状态是某种类型的信息，并且您正在使用 Akka 的演员状态转换来操纵这个状态，这根本不是最好的工具。`become`并且`unbecome`旨在用于从演员**行为**的不同状态过渡。也就是说，一个actor可以在任何时候有不同的行为并且你使用`become`和`unbecome`在这些行为之间进行改变。

为什么不做这样的事情？

```
class MyActor extends Actor {

    private var info = Information(List.empty)

    def receive = {
        case Start => info = Information(List()) //a bit redundant, but it's just to match 1:1 with your code
        case Bar(x) => {
            if (someCondition) {
                info = Information(List.empty)
            }
            info = info received x
        }
    }

} 
```

我可能没有捕捉到你的整个想法，但你明白了。

# xaml - 例外： DrawingSurfaceBackgroundGrid 必须是开始绘制的第一个元素

> ID：13400302
> 
> 赞同：1
> 
> 时间：2012-11-15T15:07:50.227
> 
> 标签：xaml, controls, windows-phone-8

运行我的应用程序时出现此异常。我导航到 XAML，调试器退出并显示以下消息：

> DrawingSurfaceBackgroundGrid 必须是开始绘制的第一个元素。

在 MainPage.xaml 上，当单击 MainPage.xaml 上的按钮时，我导航到此 DirectX.xaml 文件。我确保 DrawingSurfaceBackgroundGrid 是唯一的控件，所以它是第一个元素。我是不是把订单弄错了？（这里还显示了我的 App.xaml 和 MainPage.xaml）

**DirectXaml**

```
<phone:PhoneApplicationPage
    x:Class="GameWp8Dx.Hud.Tests.DirectX"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    mc:Ignorable="d"
    shell:SystemTray.IsVisible="True">

    <!--LayoutRoot is the root grid where all page content is placed-->
    <DrawingSurfaceBackgroundGrid x:Name="DrawingSurfaceBackground" Loaded="DrawingSurfaceBackground_Loaded">
    </DrawingSurfaceBackgroundGrid>

</phone:PhoneApplicationPage> 
```

**主页.xaml**

```
<phone:PhoneApplicationPage
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
    xmlns:toolkit="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone.Controls.Toolkit"
    xmlns:local="clr-namespace:GameWp8Dx"
    xmlns:i="clr-namespace:System.Windows.Interactivity;assembly=System.Windows.Interactivity" xmlns:ec="clr-namespace:Microsoft.Expression.Interactivity.Core;assembly=Microsoft.Expression.Interactions" 
    x:Class="GameWp8Dx.MainPage"
    mc:Ignorable="d"
    FontFamily="{StaticResource PhoneFontFamilyNormal}"
    FontSize="{StaticResource PhoneFontSizeNormal}"
    Foreground="{StaticResource PhoneForegroundBrush}"
    SupportedOrientations="Portrait" Orientation="Portrait"
    shell:SystemTray.IsVisible="True"
    local:TiltEffect.IsTiltEnabled="True"
    ApplicationBar="{StaticResource socialAppBar}"
    >

    <!--Transitions-->
    <toolkit:TransitionService.NavigationInTransition>
        <toolkit:NavigationInTransition>
            <toolkit:NavigationInTransition.Backward>
                <toolkit:TurnstileTransition Mode="BackwardIn"/>
            </toolkit:NavigationInTransition.Backward>
            <toolkit:NavigationInTransition.Forward>
                <toolkit:TurnstileTransition Mode="ForwardIn"/>
            </toolkit:NavigationInTransition.Forward>
        </toolkit:NavigationInTransition>
    </toolkit:TransitionService.NavigationInTransition>

<!--LayoutRoot is the root grid where all page content is placed-->
    <Grid x:Name="LayoutRoot">

        <phone:Panorama x:Name="test" HorizontalAlignment="Left" Height="686" VerticalAlignment="Top" Width="470"
            Title="{Binding Path=LocalizedResources.ApplicationTitle, Source={StaticResource ResourceKey=LocalizedStrings}}" TitleTemplate="{StaticResource MainPageTitleTemplate}" HeaderTemplate="{StaticResource MainPageHeaderTemplate}"> 
```

**应用程序.xaml**

```
<Application
    x:Class="GameWp8Dx.App"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:phone="clr-namespace:Microsoft.Phone.Controls;assembly=Microsoft.Phone"
    xmlns:shell="clr-namespace:Microsoft.Phone.Shell;assembly=Microsoft.Phone">

    <!--Application Resources-->
    <Application.Resources>

        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="CustomStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>

            <local:LocalizedStrings xmlns:local="clr-namespace:GameWp8Dx" x:Key="LocalizedStrings"/>

            <shell:ApplicationBar x:Key="inGameAppBar" IsVisible="True" IsMenuEnabled="False">
                <shell:ApplicationBarIconButton IconUri="/Assets/Icons/microphone.png" Text="record" Click="record_Click"/>
                <shell:ApplicationBarIconButton IconUri="/Assets/Icons/questionmark.png" Text="info"/>
                <shell:ApplicationBarIconButton IconUri="/Assets/Icons/map.png" Text="map" Click="map_Click"/>            
            </shell:ApplicationBar>
            <shell:ApplicationBar x:Key="socialAppBar" IsVisible="True" IsMenuEnabled="False">
                <shell:ApplicationBarIconButton IconUri="/Assets/Icons/appbar.twitter.png" Text="Tweet" Click="OnTweet"/>
                <shell:ApplicationBarIconButton IconUri="/Assets/Icons/appbar.twitter.bird.png" Text="Tweet" Click="OnTweetSharp"/>
                <shell:ApplicationBarIconButton IconUri="/Assets/Icons/appbar.facebook.png" Text="Share" Click="OnShare"/>
                <shell:ApplicationBarIconButton IconUri="/Assets/Icons/appbar.facebook.heart.png" Text="Like" Click="OnLike"/>
            </shell:ApplicationBar>
        </ResourceDictionary>
    </Application.Resources>

    <Application.ApplicationLifetimeObjects>
        <!--Required object that handles lifetime events for the application-->
        <shell:PhoneApplicationService
            Launching="Application_Launching" Closing="Application_Closing"
            Activated="Application_Activated" Deactivated="Application_Deactivated"/>
    </Application.ApplicationLifetimeObjects>
</Application> 
```

> **更新**

原来 TransitionFrame() 是罪魁祸首！将其改回 PhoneApplicationPage() 并且 DrawingSurfaceBackgroundGrid 工作顺利。

**应用程序.xaml.cs**

```
private void InitializePhoneApplication()
{
    if (phoneApplicationInitialized)
        return;

    // Create the frame but don't set it as RootVisual yet; this allows the splash
    // screen to remain active until the application is ready to render.
    RootFrame = new TransitionFrame();
    //RootFrame = new PhoneApplicationFrame();
    RootFrame.Navigated += CompleteInitializePhoneApplication;

    // Handle navigation failures
    RootFrame.NavigationFailed += RootFrame_NavigationFailed;

    // Handle reset requests for clearing the backstack
    RootFrame.Navigated += CheckForResetNavigation;

    // Ensure we don't initialize again
    phoneApplicationInitialized = true;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T19:57:13.137

我只是在这里猜测，但是您是否将 RootFrame 更改为特殊的 TransitionFrame？如果是这样，我假设这不适用于 DrawingSurfaceBackgroundGrid。您可能可以更改为 DrarwingSurface 并解决此问题。但是，由于用于与 XAML 交织的中间绘图层，DrawingSurface 对屏幕上显示的所有 DirectX 内容有额外的过度绘制。因此，在整页 D3D 内容上使用 DrawingSurface 可能会出现性能问题（在高清分辨率屏幕上更是如此）。

要了解这个问题，请尝试考虑如果您使用 DrawingSufaceBackgroundGrid 离开页面会发生什么情况？它应该动画吗？如果是这样，您需要将 XAML 动画应用于 D3D 内容，而 DrawingSurfaceBackgroundGrid 不支持该动画。DrawingSurface 支持它，但代价是有一个用于与 XAML 交织的中间绘图层。

我认为在糟糕的 DirectX 性能和缺少页面转换之间进行权衡，我会选择不进行页面转换。话虽如此，不同的应用程序会有不同的妥协。

另一种想法是，您可以根据是否需要全屏 D3D 在标准 PhoneApplicationFrame 和 TransitionFrame 之间切换。我还没有测试过类似的东西。

# javascript - Jquery Flot - 当用户缩放时使数据更加细化

> ID：13400307
> 
> 赞同：0
> 
> 时间：2012-11-15T15:08:02.310
> 
> 标签：javascript, jquery, jquery-plugins, flot

所以我试图设计一种方法来创建一个用户可以放大的漂亮图表。我想尝试创建一种效果，当用户缩放时，数据会变得更加细化。例如，假设我们正在查看日期/时间的计数。

当您处于默认缩放状态时，即 3 个月，您将每 24 小时看到 1 个数据点。我试图在你放大时得到它，并看到一个更小的数据块以获得更精细的数据。就像您正在查看一天一样，每个小时都会获得自己的数据点。

大家觉得用jquery Flot可以达到这样的效果吗？我在开始时将所有数据分解为几个小时，这只是计算应该显示多少数据的问题。

我已经可以使用缩放功能，但只需要弄清楚如何更改数据。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:40:23.597

Flot 不会自动执行此操作；您必须在缩放时注册一个回调，该回调遍历原始数组以挑选出来，即每个第 n 个样本，然后使用结果重绘绘图。

# c# - 使用互操作将 datagridview 导出到 excel

> ID：13400309
> 
> 赞同：0
> 
> 时间：2012-11-15T15:08:09.953
> 
> 标签：c#, excel, datagridview, interop, export

我想问是否有另一种方法可以从datagridview导出到excel。因为我是通过互操作完成的，而且对于大文件来说非常慢。现在我也想用互操作来做，但它应该更快地加载数据。

我使用的代码：

```
 for (int i = 1; i < dataGridView1.Columns.Count + 1; i++)
            {
                xlWorkSheet1.Cells[1, i] = dataGridView1.Columns[i - 1].HeaderText;
            }

            for (int i = 0; i <= dataGridView1.RowCount - 1; i++)
            {
                for (int j = 0; j <= dataGridView1.ColumnCount - 1; j++)
                {
                    DataGridViewCell cell = dataGridView1[j, i];
                    xlWorkSheet1.Cells[i + 2, j + 1] = cell.Value;
                }
            } 
```

现在我想导出的不是单元格，而是行。有的东西`object[,] values1`

我从excel导出到数据表的代码：

```
 object[,] values1 = (object[,])xlWorksheet1.UsedRange.Value2; // excelTb1
            for (int k = 0; k < values1.GetLength(1); )
            {
               excelTb1.Columns.Add((string)values1[1, ++k]);
            }

            object[] singleDValue = new object[values1.GetLength(1)];

            for (int i = 1; i < values1.GetLength(0); i++)
            {
                for (int k = 0; k < values1.GetLength(1); )
                {
                    singleDValue[k] = values1[i + 1, ++k];
                }

                excelTb1.LoadDataRow(singleDValue, System.Data.LoadOption.PreserveChanges);
            } 
```

有人可以告诉我如何从 datagridview 到 excel 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T05:34:34.710

我觉得这篇文章可能对你有很大帮助，它可以将datagridview导出到excel，最大数据6000行，速度比较快。

[9 种将数据导出到 Excel for ASP.NET 的解决方案](http://www.codeproject.com/Articles/164582/8-Solutions-to-Export-Data-to-Excel-for-ASP-NET)

# linux - Linux：创建随机目录/文件层次结构

> ID：13400312
> 
> 赞同：11
> 
> 时间：2012-11-15T15:08:11.310
> 
> 标签：linux, bash, shell, command-line-interface

为了测试一个工具，我需要一个目录，里面有一大堆不同的 Office 文件，而且嵌套结构很深。我已经在一个目录中有文件，但现在需要创建一些随机嵌套的子目录并将文件分散在其中。

我可以坐下来用我选择的编程语言编写一个合适的程序，但我想知道是否有 Linux 命令行工具 + Bash 的巧妙组合来实现我想要的。

编辑：澄清一下，我的输入是一个包含大约 200 个文件的目录。输出应该是包含这些文件或多或少均匀分布的目录层次结构。目录名称不应超过单个字母，长度随机变化并使用各种允许的字符（utf-8 文件系统）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-15T15:11:01.850

您可以使用 bash `brace-expansion`：

```
mkdir -p {a,b}/{e,f,g}/{h,i,j} 
```

* * *

```
├───a
│   ├───e
│   │   ├───h
│   │   ├───i
│   │   └───j
│   ├───f
│   │   ├───h
│   │   ├───i
│   │   └───j
│   └───g
│       ├───h
│       ├───i
│       └───j
└───b
    ├───e
    │   ├───h
    │   ├───i
    │   └───j
    ├───f
    │   ├───h
    │   ├───i
    │   └───j
    └───g
        ├───h
        ├───i
        └───j 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-15T15:49:01.393

这是一个生成随机目录结构的脚本：

```
#!/bin/bash

# Decimal ASCII codes (see man ascii)
ARR=( {48..57} {65..90} {97..122} )

# Array count
arrcount=${#ARR[@]}

# return a random string
get_rand_dir(){
    for ((i=1; i<$((RANDOM%30)); i++)) {
        printf \\$(printf '%03o' ${ARR[RANDOM%arrcount]});
    }
}

dir=/tmp/

# appending random characters to make a hierarchy
for ((i=0; i<$((RANDOM%100)); i++)) {
    dir+="$(get_rand_dir)/"
}

echo $dir
mkdir -p "$dir"

oldir=$(echo "$dir" | cut -d '/' -f1-3)

while [[ $dir ]]; do
    dir=${dir%/*}
    cd $dir
    for ((i=0; i<$((RANDOM%100)); i++)) {
        mkdir &>/dev/null -p $(get_rand_dir)
    }
done

tree "$oldir" 
```

**输出**

```
/tmp/x
├── egeDVPW
├── iOkr
├── l
├── o1gye8uF
├── q
│   ├── 4Dlrfagv
│   ├── 4Yxmoqf
│   ├── 8LkyIrXA
│   ├── 8m9kse8s
│   ├── aV
│   ├── in
│   │   ├── 12zdLso68HWlPK
│   │   │   ├── C
│   │   │   ├── DOYt8wUW
│   │   │   ├── FXP
│   │   │   ├── hFLem8
│   │   │   ├── hhHIv
│   │   │   ├── iD87kxs54x04
│   │   │   ├── oFM
│   │   │   ├── OjFT 
```

现在您可以创建一个 dirs 数组：

```
shopt -s globstar # require bash4
dirs=( /tmp/x/** )
printf '%s\n' ${dirs[@]} 
```

并用文件随机填充目录。你有足够的例子来做到这一点。我做了最辛苦的工作。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-11-09T16:43:39.140

感谢所有在这里发帖的人；事实证明，用特殊字符转义文件名并不是一件容易的事，所以我基于这里的那些构建了自己的脚本；以下是特殊字符文件名的行为方式：

```
$ ~/rndtree.sh ./rndpath 0 3 1
Warning: will create random tree at: ./rndpath
Proceed (y/n)? y
Removing old outdir ./rndpath
mkdir -p ./rndpath/";"/{")?DxVBBJ{w2","L,|+","^VC)Vn.6!"}/"D+,IFJ( LN"
> > > > > > > > > > > 
./rndpath
└── [       4096]  ;
    ├── [       4096]  )?DxVBBJ{w2
    │   ├── [       4096]  D+,IFJ( LN
    │   │   └── [        929]  r2.bin
    │   ├── [       8557]  %3fsaG# Rl;ffXf.bin
    │   └── [      19945]  Dzk .bin
    ├── [       4096]  L,|+
    │   ├── [       4096]  D+,IFJ( LN
    │   │   ├── [       2325]  6Qg#pe5j'&ji49oqrO.bin
    │   │   ├── [      16345]  #?.bin
    │   │   └── [       2057]  Uz-0XtLVWz#}0lI.bin
    │   ├── [       2543]  bbtA-^s22vdTu.bin
    │   └── [      10848]  K46+kh7L9.bin
    ├── [       4096]  ^VC)Vn.6!
    │   ├── [       4096]  D+,IFJ( LN
    │   ├── [      10502]  8yY,MqZ ^5+_SA^.r4{.bin
    │   └── [      17628]  ipO"|69.bin
    └── [      12376]  a2Y% }G1.qDir.bin

7 directories, 11 files
total bytes: 136823 ./rndpath 
```

这里有一个安全的 ASCII 子集：

```
$ ~/rndtree.sh ./rndpath 1 3 1
Warning: will create random tree at: ./rndpath
Proceed (y/n)? y
Removing old outdir ./rndpath
mkdir -p ./rndpath/"48SLS"/{"nyG","jIC6vj"}/{"PSLd5tMn","V R"}
> > > > > > > 
./rndpath
├── [       4096]  48SLS
│   ├── [       4096]  jIC6vj
│   │   ├── [       4096]  PSLd5tMn
│   │   ├── [       4096]  V R
│   │   │   ├── [        922]  lg.bin
│   │   │   └── [       9600]  VVYG.bin
│   │   ├── [      10883]  B7nt06p.bin
│   │   └── [      19339]  g5uT i.bin
│   ├── [       4096]  nyG
│   │   ├── [       4096]  PSLd5tMn
│   │   └── [       4096]  V R
│   │       └── [       6128]  1tfLR.bin
│   └── [       5448]  Jda.bin
└── [      18196]  KwEXu2O2H9s.bin 
```

在这两种情况下都应处理空格 - 但是，请注意子目录名称重复（而文件名不重复）。

脚本`rndtree.sh`：

```
#!/usr/bin/env bash

# http://stackoverflow.com/questions/13400312/linux-create-random-directory-file-hierarchy
# Decimal ASCII codes (see man ascii); added space
AARR=( 32 {48..57} {65..90} {97..122} )
# Array count
aarrcount=${#AARR[@]}

if [ "$1" == "" ] ; then
  OUTDIR="./rndpath" ;
else
  OUTDIR="$1" ;
fi

if [ "$2" != "" ] ; then
  ASCIIONLY="$2" ;
else
  ASCIIONLY=1 ;
fi

if [ "$3" != "" ] ; then
  DIRDEPTH="$3" ;
else
  DIRDEPTH=3 ;
fi

if [ "$4" != "" ] ; then
  MAXFIRSTLEVELDIRS="$4" ;
else
  MAXFIRSTLEVELDIRS=2 ;
fi

if [ "$5" != "" ] ; then
  MAXDIRCHILDREN="$5" ;
else
  MAXDIRCHILDREN=4 ;
fi

if [ "$6" != "" ] ; then
  MAXDIRNAMELEN="$6" ;
else
  MAXDIRNAMELEN=12 ;
fi

if [ "$7" != "" ] ; then
  MAXFILECHILDREN="$7" ;
else
  MAXFILECHILDREN=4 ;
fi

if [ "$8" != "" ] ; then
  MAXFILENAMELEN="$8" ;
else
  MAXFILENAMELEN=20 ;
fi

if [ "$9" != "" ] ; then
  MAXFILESIZE="$9" ;
else
  MAXFILESIZE=20000 ;
fi

MINDIRNAMELEN=1
MINFILENAMELEN=1
MINDIRCHILDREN=1
MINFILECHILDREN=0
MINFILESIZE=1
FILEEXT=".bin"
VERBOSE=0 #1

get_rand_dirname() {
  if [ "$ASCIIONLY" == "1" ]; then
    for ((i=0; i<$((MINDIRNAMELEN+RANDOM%MAXDIRNAMELEN)); i++)) {
      printf \\$(printf '%03o' ${AARR[RANDOM%aarrcount]});
    }
  else
    cat /dev/urandom | tr -dc '[ -~]' | tr -d '[$></~:`\\]' | head -c$((MINDIRNAMELEN + RANDOM % MAXDIRNAMELEN)) | sed 's/\(["]\)/\\\1/g'
  fi
  #echo -e " " # debug last dirname space
}

get_rand_filename() {
  if [ "$ASCIIONLY" == "1" ]; then
    for ((i=0; i<$((MINFILENAMELEN+RANDOM%MAXFILENAMELEN)); i++)) {
      printf \\$(printf '%03o' ${AARR[RANDOM%aarrcount]});
    }
  else
    # no need to escape double quotes for filename
    cat /dev/urandom | tr -dc '[ -~]' | tr -d '[$></~:`\\]' | head -c$((MINFILENAMELEN + RANDOM % MAXFILENAMELEN)) #| sed 's/\(["]\)/\\\1/g'
  fi
  printf "%s" $FILEEXT
}

echo "Warning: will create random tree at: $OUTDIR"
[ "$VERBOSE" == "1" ] && echo "  MAXFIRSTLEVELDIRS $MAXFIRSTLEVELDIRS ASCIIONLY $ASCIIONLY DIRDEPTH $DIRDEPTH MAXDIRCHILDREN $MAXDIRCHILDREN MAXDIRNAMELEN $MAXDIRNAMELEN MAXFILECHILDREN $MAXFILECHILDREN MAXFILENAMELEN $MAXFILENAMELEN MAXFILESIZE $MAXFILESIZE"

read -p "Proceed (y/n)? " READANS
if [ "$READANS" != "y" ]; then
  exit
fi

if [ -d "$OUTDIR" ]; then
  echo "Removing old outdir $OUTDIR"
  rm -rf "$OUTDIR"
fi

mkdir "$OUTDIR"

if [ $MAXFIRSTLEVELDIRS -gt 0 ]; then
  NUMFIRSTLEVELDIRS=$((1+RANDOM%MAXFIRSTLEVELDIRS))
else
  NUMFIRSTLEVELDIRS=0
fi

# create directories
for (( ifl=0;ifl<$((NUMFIRSTLEVELDIRS));ifl++ )) {
  FLDIR="$(get_rand_dirname)"
  FLCHILDREN="";
  for (( ird=0;ird<$((DIRDEPTH-1));ird++ )) {
    DIRCHILDREN=""; MOREDC=0;
    for ((idc=0; idc<$((MINDIRCHILDREN+RANDOM%MAXDIRCHILDREN)); idc++)) {
      CDIR="$(get_rand_dirname)" ;
      # make sure comma is last, so brace expansion works even for 1 element? that can mess with expansion math, though
      if [ "$DIRCHILDREN" == "" ]; then DIRCHILDREN="\"$CDIR\"" ;
      else DIRCHILDREN="$DIRCHILDREN,\"$CDIR\"" ; MOREDC=1 ; fi
    }
    if [ "$MOREDC" == "1" ] ; then
      if [ "$FLCHILDREN" == "" ]; then FLCHILDREN="{$DIRCHILDREN}" ;
      else FLCHILDREN="$FLCHILDREN/{$DIRCHILDREN}" ; fi
    else
      if [ "$FLCHILDREN" == "" ]; then FLCHILDREN="$DIRCHILDREN" ;
      else FLCHILDREN="$FLCHILDREN/$DIRCHILDREN" ; fi
    fi
  }
  DIRCMD="mkdir -p $OUTDIR/\"$FLDIR\"/$FLCHILDREN"
  eval "$DIRCMD"
  echo "$DIRCMD"
}

# now loop through all directories, create random files inside
# note printf '%q' escapes to preserve spaces; also here
# escape, and don't wrap path parts in double quotes (e.g. | sed 's_/_"/"_g');
# note then we STILL have to eval to use it!
# but now ls "$D" works, so noneed for QD
# unfortunately backslashes can make '%q' barf - prevent them
find "$OUTDIR" -type d | while IFS= read D ; do
  QD="$(printf '%q' "$(echo "$D")" )" ;
  [ "$VERBOSE" == "1" ] && echo "$D"; #echo "$QD"; ls -la "$D"; #eval "ls -la $QD";
  for ((ifc=0; ifc<$((MINFILECHILDREN+RANDOM%MAXFILECHILDREN)); ifc++)) {
    CFILE="$(get_rand_filename)" ;
    echo -n '> '
    [ "$VERBOSE" == "1" ] && echo "$D"/"$CFILE"
    cat /dev/urandom \
    | head -c$((MINFILESIZE + RANDOM % MAXFILESIZE)) \
    > "$D"/"$CFILE"
  }
done

echo
tree -a --dirsfirst -s "$OUTDIR"
echo "total bytes: $(du -bs $(echo "$OUTDIR"))" 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-18T15:22:01.310

我对给出的答案不太满意，所以我想出了自己的答案。以下内容采用我的输入文件并使用 /dev/urandom 收集 10 到 256 个可打印字符，放入更多目录分隔符，创建目录层次结构并将文件放入其中。

使用 urandom 会创建一些非常奇怪的目录名称，这对我的目的很有用。我敢肯定，真正的 Unix 大师可以进一步简化这一点。例如，目录构建可能可以在单个 awk 命令中完成。

```
#!/bin/bash
INDIR='files';

IFS=$'\n'
for FILE in `ls $INDIR/*`; do
    DIR=`cat /dev/urandom | \
         tr -dc '[ -~]' | \
         tr 'ABCDEF\\\\' '///////' | \
         head -c$((10 + $RANDOM % 256))`

    mkdir -p $DIR
    cp $FILE $DIR
done 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-10-17T02:27:45.277

这些解决方案都不够快，因为它们依赖 bash，所以我创建了一个生成伪随机目录层次结构的 Rust crate：[https](https://crates.io/crates/ftzz) ://crates.io/crates/ftzz 。

请注意，我只关心层次结构本身，而不是其内容，因此该程序会创建空文件或填充随机数据的文件。

# android - 如何在android中创建多个按钮

> ID：13400318
> 
> 赞同：1
> 
> 时间：2012-11-15T15:08:37.457
> 
> 标签：android

我尝试了下面的代码以编程方式创建多个按钮，但它根据我的应用程序创建了一个按钮，我需要根据输入创建一个按钮。例如，如果输入为 3，则意味着我需要在布局中创建三个按钮。供您参考，我附上了示例图像和我的代码。

```
for (int i = 0; i < array_of_btn_input.size(); i++) {
            LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
                    LinearLayout.LayoutParams.WRAP_CONTENT,
                    LinearLayout.LayoutParams.WRAP_CONTENT);

            LinearLayout layout = new LinearLayout(getApplicationContext());
            LinearLayout.LayoutParams params1 = new LinearLayout.LayoutParams(
                    LinearLayout.LayoutParams.WRAP_CONTENT,
                    LinearLayout.LayoutParams.WRAP_CONTENT);
            layout.setOrientation(LinearLayout.VERTICAL);
            layout.setLayoutParams(params);
            Button button1 = new Button(getApplicationContext());
            button1.setLayoutParams(params1);
            button1.setText("button");

            layout.addView(button1);
            main_layer.addView(layout);
} 
```

![在此处输入图像描述](../Images/5bca5c823f225c86224551ef58cfb146.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:25:21.643

如果在您的示例中，您的全局容器 (main_layer) 是相对布局或框架布局，则您已将它们放在彼此之上。所以你看不到延期交货的那个。

试试这个，

```
LinearLayout main_layer= (LinearLayout) findViewById(id.main_layer);

for (int i = 0; i < 10; i++) 
{
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT);

LinearLayout layout = new LinearLayout(getApplicationContext());
LinearLayout.LayoutParams params1 = new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT,LinearLayout.LayoutParams.WRAP_CONTENT);

layout.setOrientation(LinearLayout.VERTICAL);
layout.setLayoutParams(params);
Button button1 = new Button(getApplicationContext());
button1.setLayoutParams(params1);
button1.setText("button");

layout.addView(button1);
main_layer.addView(layout);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:13:22.747

您正在 for 循环中创建多个新的线性布局。需要将线性布局从 for 循环中取出，然后尝试在其中添加按钮。

第一次运行 for 循环创建一个新的线性布局并添加一个按钮

第二次运行 for 循环创建一个新的线性布局，并在之前添加的布局顶部添加一个按钮

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:15:55.150

在这里，您正在为每个按钮创建一个新的 LinearLayout...尝试更多类似...

```
LinearLayout.LayoutParams params = new LinearLayout.LayoutParams(
    LinearLayout.LayoutParams.WRAP_CONTENT,
    LinearLayout.LayoutParams.WRAP_CONTENT);
LinearLayout layout = new LinearLayout(getApplicationContext());
layout.setOrientation(LinearLayout.VERTICAL);
layout.setLayoutParams(params);

for (int i = 0; i < array_of_btn_input.size(); i++) {
    LinearLayout.LayoutParams params1 = new LinearLayout.LayoutParams(
            LinearLayout.LayoutParams.WRAP_CONTENT,
            LinearLayout.LayoutParams.WRAP_CONTENT);

    Button button1 = new Button(getApplicationContext());
    button1.setLayoutParams(params1);
    button1.setText("button");

    layout.addView(button1); 
```

}

main_layer.addView(布局);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T15:19:08.350

试试这个

```
LinearLayout llParent = (LinearLayout) findViewById(R.id.llParent);
llParent.removeAllViews();
for (int i = 0; i < array_of_btn_input.size(); i++) {
    BSView b = new BSView(this, new SimpleThumbBean(i + 1, bsList
            .get(i).getLabel(), bsList.get(i).getThumbUrl()));
    LinearLayout.LayoutParams llDynamic = new LinearLayout.LayoutParams(
            LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT);
    llDynamic.weight = 1f;
    llParent.addView(b, llDynamic);
} 
```

llParent 是一个已定义的布局，并确保在将布局动态添加到其中之前调用 removeAllViews()。

BSView 是我自己的自定义视图。您可以根据需要将 BSView 设置为普通 Button。

# jquery - JS 在 jsFiddle 中可以正常工作，但在我的dust.js 模板中却不行

> ID：13400320
> 
> 赞同：2
> 
> 时间：2012-11-15T15:08:51.840
> 
> 标签：jquery, dust.js

我有一些简单的 javascript 代码，我在 JS Fiddle 中测试过，在那里可以正常工作，但是在我的dust.js 模板中使用时，我不断收到“意外令牌非法”，但它没有告诉我哪个令牌是非法的。我已经检查了额外的字符。

```
 $(document).ready(function() {
  $('.edit').keydown(function(e) {
      if(e.which == 13) {
        $(this).blur().next().focus();
       return false;
  }

  });
})​ 
```

这是 jsFiddle 链接：http: [//jsfiddle.net/sxvX8/1/](http://jsfiddle.net/sxvX8/1/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:11:06.720

最后还有一个额外的字符，见下文：

```
$(document).ready(function() {
    $('.edit').keydown(function(e) {
        if(e.which == 13) {
            $(this).blur().next().focus();
           return false;
        }    
    });
})? // <--- EXTRA CHARACTER 
```

删除它，该错误应该消失。

# css - 为什么这里有两个冒号？跨度::之前

> ID：13400323
> 
> 赞同：32
> 
> 时间：2012-11-15T15:08:52.863
> 
> 标签：css, css-selectors

这是我正在查看的完整代码行，这里是它的上下文：[http ://acidmartin.wordpress.com/2011/02/24/custom-crossbrowser-styling-for-checkboxes-and-radio-buttons](http://acidmartin.wordpress.com/2011/02/24/custom-crossbrowser-styling-for-checkboxes-and-radio-buttons)

```
input[type="radio"] + span::before { content: ""; display: inline-block; width: 20px; height: 20px; background: url("sprite.png") no-repeat -20px 0; vertical-align: middle; } 
```

我对它的工作原理有一个很好的理解，但我不明白为什么有两个冒号，而不是 span 和 before 之间的一个冒号。

从我读过的内容来看，之前的选择器应该使用一个冒号。

[http://www.w3schools.com/cssref/sel_before.asp](http://www.w3schools.com/cssref/sel_before.asp)

在 w3c 上，我找不到任何有两个冒号的选择器，我也无法弄清楚为什么 span 除了“之前”之前的冒号之外还会有一个冒号。

[http://www.w3.org/TR/CSS2/selector.html](http://www.w3.org/TR/CSS2/selector.html)

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-11-15T15:11:39.553

它是一个*伪元素*，由[CSS Selectors Level 3](http://www.w3.org/TR/selectors/#gen-content)规范定义：

> `::before`和`::after`伪元素可用于描述在元素内容之前或之后生成的内容。

它实际上与 2 级规范定义的单冒号语法相同。3 级规范引入了一个额外的冒号来区分伪元素和伪类（使用单个冒号）。

这两种语法都适用于较新的浏览器，但较旧的浏览器将无法识别较新的`::`样式。

* * *

有关更多详细信息，您可以查看 3 级规范中的[语法](http://www.w3.org/TR/selectors/#grammar)，其中指出：

> '::' 开始一个伪元素，':' 一个伪类

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-15T15:12:04.053

[你可以在这里](http://www.impressivewebs.com/before-after-css3/)阅读一篇关于它的文章

但基本上是区分伪类和伪元素。使用两个冒号作为伪元素是 css3 标准，这与只有一个冒号的 CSS2 标准相反。

当浏览器想要同时满足 CSS2 和 CSS3 时，一两个冒号就可以了

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2020-09-13T18:06:05.817

双冒号选择器是伪元素。单冒号选择器是伪选择器。

# php - 获取通过 php 在 html5 中上传的价值图像

> ID：13400324
> 
> 赞同：0
> 
> 时间：2012-11-15T15:08:54.663
> 
> 标签：php, javascript, jquery, html

单击按钮提交后如何获取值图像上传，如`$_POST`php（通过 html5 上传图像）？

html5上传的例子在**[Here](https://developer.mozilla.org/samples/domref/file-click-demo.html)**

[https://developer.mozilla.org/samples/domref/file-click-demo.html](https://developer.mozilla.org/samples/domref/file-click-demo.html)

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:10:29.620

PHP 将使用有关上传文件的数据填充[`$_FILES`超全局。](http://php.net/manual/en/reserved.variables.files.php)该手册包含有关该主题的[扩展文档](http://www.php.net/manual/en/features.file-upload.post-method.php)（尽管您显然应该忽略有关提交表单的部分，因为您使用的是 JavaScript）。

# algorithm - 从一组元素中检索最近的元素

> ID：13400326
> 
> 赞同：2
> 
> 时间：2012-11-15T15:08:56.580
> 
> 标签：algorithm, search

我正在尝试一个想法，我有以下子问题：

我有一个`m`包含固定长度元组的大小列表`n`。

```
[(e11, e12, .., e1n), (e21, e22, .., e2n), ..., (em1, em2, .., emn)] 
```

现在，给定一些不属于列表的随机元组`(t1, t2, .., tn)`，我想找到属于列表的最接近的元组。

我使用以下距离函数（汉明距离）：

```
def distance(A, B):
    total = 0
    for e1, e2 in zip(A, B):
        total += e1 == e2
    return total 
```

一种选择是使用穷举搜索，但这对于我的问题是不够的，因为列表非常大。我想出的另一个想法是首先使用`kmedoids`对列表进行聚类并检索`K`medoids（聚类中心）。对于查询，我可以通过`K`调用距离函数来确定最近的集群。然后，我可以从该特定集群中搜索最近的元组。我认为它应该可以工作，但我不完全确定，如果查询元组位于集群的边缘是否可以。

但是，我想知道，如果你有更好的想法来解决这个问题，因为我的大脑现在完全是空白的。但是，我有一种强烈的感觉，可能有一种聪明的方法可以做到这一点。

只要能够降低查询的复杂性，需要预先计算的解决方案就可以了。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:18:28.883

您可以存储一个哈希表（字典/映射），它从一个元素（在元组中）映射到它出现在的元组：`hash:element->list<tupple>`.

现在，当您有一个新的“查询”时，您需要对`hash(element)`新“查询”的每个元素进行迭代，并找到最大的命中数。

**伪代码：**

```
findMax(tuple):
  histogram <- empty map  
  for each element in tuple:
     #assuming hash_table is the described DS from above
     for each x in hash_table[element]: 
         histogram[x]++ #assuming lazy initialization to 0
  return key with highest value in histogram 
```

* * *

另一种不完全遵循您想要的指标的替代方法是[kd tree](http://en.wikipedia.org/wiki/K-d_tree)。不同之处在于 kd 树还考虑了元素之间的“距离”（不仅是相等/不等）。
kd 树还要求元素具有可比性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:05:53.367

如果您的数据足够大，您可能希望在其上创建一些[倒排索引](http://en.wikipedia.org/wiki/Inverted_index)。

**具有n 个**元素的**m**个向量的数据。

 **数据：

```
0: 1, 2, 3, 4, 5, ...
1: 2, 3, 1, 5, 3, ...
2: 5, 3, 2, 1, 3, ...
3: 1, 2, 1, 5, 3, ...
...
m: m0, ... mn 
```

然后你想得到这样的**n个**索引：

索引0

```
1: 0, 3
2: 1
5: 2 
```

索引1

```
2: 0, 3
3: 3, 3 
```

索引2

```
3: 0
1: 1, 3
2: 2 
```

...

然后，您只搜索索引以获取包含任何查询元组值的元组并找到其中最接近的元组。

```
def search(query)
  candidates = []
  for i in range(len(query))
    value = query[i]
    candidates.append(indexes[i][value])

  # find candidates with min distance
  for candidate in candidates
    distance = distance(candidate, query)
    ... 
```

繁重的过程是创建索引，一旦你建立了它们，搜索就会非常快。**

# php - c++ 和 php 十六进制

> ID：13400327
> 
> 赞同：0
> 
> 时间：2012-11-15T15:09:01.643
> 
> 标签：php, c++, linux

我在 c++ 中的这段代码将整数转换为 HEX，但 php 中的输出不同

**C++：**

```
#include <iostream>
#include <stdlib.h>
#include <string>
#include <stdio.h>

using namespace std;

int main(){

  string str1("100106014020");
  int i;

  i = atoi(str1.c_str());
  printf ("HEX value is %X", i);

  return 0;
}

output:
HEX value is 4EC88D44 
```

**PHP：**

```
<?php
$num = '100106014020';
$nnum = (int)$num;
echo printf ("%X",$nnum);
?> 
```

输出：174EC88D4410

如何在 php 中获得与在 c++ 中相同的 HEX 值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:16:55.853

使用它只是一个编程错误`atoi`，因为您无法知道转换是否成功。要使用的正确函数是[`strtol`](http://linux.die.net/man/3/strtoll)（或`strtoll`）。更正后的程序应如下所示：

```
#include <cstdlib>
#include <cstdio>
#include <cstring>
#include <cerrno>

int main()
{
    const char * const str1 = "100106014020";
    char * e;
    long i = std::strtol(str1, &e, 0);

    if (e != 0)
    {
        std::printf("Conversion error: %s\n", strerror(errno));
    }
    else
    {
        std::printf("Conversion succeeded, value = 0x%lX\n", i);
    }
} 
```

对我来说，这说：

```
Conversion error: Numerical result out of range 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:13:31.007

你溢出了整数的容量。改用 long 。

# c# - 如何在运行时按列名获取值而不是列索引号？

> ID：13400328
> 
> 赞同：-2
> 
> 时间：2012-11-15T15:09:03.117
> 
> 标签：c#

我可以在运行时获取查找的值：

```
Id = this.dgDevLkp[row, 3].ToString().TrimEnd(); 
```

我想知道我是否可以做这样的事情：

```
Id = this.dgDevLkp[row, columnName].ToString().TrimEnd(); 
```

这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:00:08.783

感谢所有建议

以下代码对我有用

```
int ColumnIndex = this.dsDevLkp.Tables[dgtbsDevLkp.MappingName].Columns["ColumnName"].Ordinal;
Id = this.dgDevLkp[row, ColumnIndex].ToString().TrimEnd(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:15:20.303

为什么不使用 DataGridViewColumn 的`Index`属性？

[MSDN 链接](http://msdn.microsoft.com/en-us/library/system.windows.forms.datagridviewband.index.aspx)

例如：

```
Id = this.dgDevLkp[row, columnName.Index].ToString().TrimEnd(); 
```

其中“columnName”是 DataGridViewColumn 的名称。

# nsis - NSIS Change Header Image Based on Language Selection

> ID：13400331
> 
> 赞同：2
> 
> 时间：2012-11-15T15:09:07.700
> 
> 标签：nsis

I am using NSIS to create an installer. How can I change the header image (MUI_HEADERIMAGE_BITMAP) based on the users language selection at install?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:54:38.063

```
!define MUI_HEADERIMAGE
!define MUI_CUSTOMFUNCTION_GUIINIT myGuiInit
!include MUI2.nsh
!insertmacro MUI_PAGE_WELCOME
!insertmacro MUI_PAGE_COMPONENTS
...
!insertmacro MUI_LANGUAGE English
!insertmacro MUI_LANGUAGE Swedish

Function .onInit
    !insertmacro MUI_LANGDLL_DISPLAY
FunctionEnd

Function myGUIInit
    InitPluginsDir
    ${If} ${LANG_ENGLISH} = $Language
        File "/oname=$PluginsDir\langspecifichdr.bmp" "${NSISDIR}\Contrib\Graphics\Header\orange.bmp"
    ${Else}
        File "/oname=$PluginsDir\langspecifichdr.bmp" "${NSISDIR}\Contrib\Graphics\Header\win.bmp"
    ${EndIf}
    SetBrandingImage /IMGID=1046 "$PluginsDir\langspecifichdr.bmp"
FunctionEnd 
```

# javascript - Extjs Grid 面板 - 渲染后更改 enableColumnHide 属性

> ID：13400349
> 
> 赞同：5
> 
> 时间：2012-11-15T15:10:19.587
> 
> 标签：javascript, extjs, grid, extjs4.1

请帮忙！我正在使用 ExtJs 4.1 网格面板。

我正在寻找一种在渲染后更改网格 enableColumnHide 属性的方法。我在几个屏幕上重复使用相同的网格，并进行了细微的更改，主要是隐藏了一些列。

在其中一个屏幕中，我只剩下不应隐藏的列，因此我想从列标题菜单中完全删除该选项，但在进入其他屏幕之一时将其恢复。

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:49:28.183

我之前也遇到过类似的问题。你可以在这里查看我的解决方法：

[Extjs Grid 面板 - 使用 hideable=false 隐藏列](https://stackoverflow.com/questions/12950428/extjs-grid-panel-hide-a-column-with-hideable-false/)

基本上我已经注册到网格标题菜单的“beforeshow”事件，并根据每列上的“隐藏”属性隐藏菜单上的每个可隐藏列复选框项目。

你可以用“enableColumnHide”做同样的事情（只是隐藏“列”子菜单，它只是一个菜单项本身）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:31:48.067

似乎没有明显的方法可以做到这一点，但我发现了一个 hack -每次更改该值时都会更改并销毁标题菜单`enableColumnHide`。`headerCt`示例代码：

```
var checkbox = new Ext.form.field.Checkbox({
    renderTo: 'checkbox',
    boxLabel: 'enableColumnHide',
    checked: true,
    handler: function(sender, checked) {
        var h = grid.headerCt;
        h.enableColumnHide = checked;
        if (h.menu) {
            h.menu.destroy();
            h.menu = null;
        }
    }
}); 
```

通过在列上使用可隐藏也可以：

```
var checkbox = new Ext.form.field.Checkbox({
    renderTo: 'checkbox',
    boxLabel: 'enableColumnHide',
    checked: true,
    handler: function(sender, checked) {
        Ext.each(grid.columns, function(c){
            c.hideable = checked;
        });
    }
}); 
```

工作示例`enableColumnHide`：http: [//jsfiddle.net/M3Aqq/5/](http://jsfiddle.net/M3Aqq/5/)

工作示例`hideable`：http: [//jsfiddle.net/M3Aqq/9/](http://jsfiddle.net/M3Aqq/9/)

# html-email - 使用 Spring 集成发送 HTML 电子邮件

> ID：13400352
> 
> 赞同：2
> 
> 时间：2012-11-15T15:10:31.990
> 
> 标签：html-email, spring-integration

我正在将 spring 集成用于以发送电子邮件结束的过程。

但是，它是一封 HTML 电子邮件，我收到了它的源代码，而不是呈现的 HTML。

我尝试使用*spring-integration-mail 2.1.4*提供的邮件头丰富器来设置*内容类型*或激活*多部分*而没有结果。

*可以使用邮件标题丰富器完成还是应该以其他方式配置？*

最好使用纯 XML 配置。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2019-01-04T13:36:40.143

是的，您可以通过 XML 配置发送 HTML，您只需要按照您所说的通过标题丰富器设置内容类型，示例代码如下。

```
<int-mail:header-enricher id="emailheaderenricher">
        <int-mail:content-type value="text/html;"/>
        <int-mail:subject value="a subject"/>
        <int-mail:to value="mail@somewhere.org"/>
        <int-mail:from value="from@example.org"/>
</int-mail:header-enricher> 
```

# javascript - 在脚本中添加 fadeTo 方法

> ID：13400356
> 
> 赞同：2
> 
> 时间：2012-11-15T15:10:36.483
> 
> 标签：javascript, jquery

我想将 fadeTo 添加到此代码段中。当`this`添加`current`我希望它淡入的类时。但我不知道如何解决，以及我必须将`fadeTo();`参数放在哪里。

```
$(this).bind("click", function() {
            navClicks++;
            $(this).addClass('current').parents('ul').find('a').not($(this)).removeClass('current');
            offset = - (panelWidth*z);
            alterPanelHeight(z);
            currentPanel = z + 1;
            $('.panel-container', slider).animate({ marginLeft: offset }, settings.slideEaseDuration, settings.slideEaseFunction);
            if (!settings.crossLinking) { return false }; // Don't change the URL hash unless cross-linking is specified
        }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:24:02.173

我有一个“当前”类，我在点击时添加。在你的例子中，“点击我”，我想慢慢淡化你的“点击我”文本的绿色......别管皮卡丘！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:53:06.050

我不确定您要查找哪个 DOM 元素`fadeTo()`，但请看一下这个 jsfiddle：

> [http://jsfiddle.net/37XEp/1/](http://jsfiddle.net/37XEp/1/)

# magento - 使用按钮添加自定义折扣订单

> ID：13400358
> 
> 赞同：3
> 
> 时间：2012-11-15T15:10:40.477
> 
> 标签：magento, magento-1.7

我的模块有我的自定义折扣，没关系。

配置.xml：

```
<sales>
   <quote>
       <totals>
             <aver> 
                <class>Dani_Prueba_Model_Total_Aver</class> 
                <after>subtotal</after> 
             </aver>
        </totals>
    </quote>
</sales> 
```

我的模块：

```
<?php
class Dani_Prueba_Model_Total_Aver extends Mage_Sales_Model_Quote_Address_Total_Abstract{

    public function collect(Mage_Sales_Model_Quote_Address $address){

        $baseDiscount = 2.5;
        $discount = Mage::app()->getStore()->convertPrice($baseDiscount);

        $address->setCustomDiscount($baseDiscount);

        $address->setBaseGrandTotal($address->getBaseGrandTotal() - $baseDiscount);
        $address->setGrandTotal($address->getGrandTotal() - $discount);

        return $this;
    }

    public function fetch(Mage_Sales_Model_Quote_Address $address){
        $this->setCode('aver');
        $amount = $address->getCustomDiscount();
            if ($amount != 0){
                $address->addTotal(array(
                'code'  => $this->getCode(),
                'title' => 'Custom Discount',
                'value' => $amount
            ));
        }
        return $this;
    }
} 
```

这没关系，当我将产品添加到购物车时，会自动应用我的自定义折扣。

但现在我需要用一个按钮来做。当我将产品添加到购物车时，不应用折扣并且总数正确。但是当我单击一个按钮时，应用我的自定义折扣，并使用其他按钮“取消”取消折扣。我需要一些类似功能的优惠券代码。

我该怎么做？？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-15T15:48:23.077

为此，您需要向`sales/quote`表（可能还有`sales/order`表）添加另一个属性/列。

所以，在你的安装脚本中，执行这个（我也包括了销售/订单表/实体属性）：

```
$installer->addAttribute('order', 'use_special_coupon', array('type' => 'int', 'grid' => true, 'source' => 'adminhtml/system_config_source_yesno'));
$installer->addAttribute('quote', 'use_special_coupon', array('type' => 'int', 'grid' => true, 'source' => 'adminhtml/system_config_source_yesno'));
$installer->getConnection()->addColumn($installer->getTable('sales/quote'), 'use_special_coupon', 'TINYINT(1) unsigned default 0');
$installer->getConnection()->addColumn($installer->getTable('sales/order'), 'use_special_coupon', 'TINYINT(1) unsigned default 0'); 
```

然后，在您的控制器中，执行以下操作：

```
$quote = Mage::getSingleton('checkout/session')->getQuote();
$quote
    ->setUseSpecialCoupon(true)
    ->save(); 
```

或者，相反，在您的 removeAction 中：

```
$quote = Mage::getSingleton('checkout/session')->getQuote();
$quote
    ->setUseSpecialCoupon(false)
    ->save(); 
```

最后，在您的整个模型中，将其修改为：

```
<?php
class Dani_Prueba_Model_Total_Aver extends Mage_Sales_Model_Quote_Address_Total_Abstract{

    public function collect(Mage_Sales_Model_Quote_Address $address)
    {
        if ($address->getQuote()->getUseSpecialCoupon()) {
            $baseDiscount = 2.5;
            $discount = Mage::app()->getStore()->convertPrice($baseDiscount);

            $address->setCustomDiscount($baseDiscount);

            $address->setBaseGrandTotal($address->getBaseGrandTotal() - $baseDiscount);
            $address->setGrandTotal($address->getGrandTotal() - $discount);
        }
        return $this;
    }

    public function fetch(Mage_Sales_Model_Quote_Address $address){
        if ($address->getQuote()->useSpecialCoupon()) {            
            $this->setCode('aver');
            $amount = $address->getCustomDiscount();
            if ($amount != 0){
                $address->addTotal(array(
                    'code'  => $this->getCode(),
                    'title' => 'Custom Discount',
                    'value' => $amount
                ));
            }
        }
        return $this;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-20T16:59:06.073

作为已接受答案的后续行动，我想指出，难以将自定义总计反映在发票上的人（比如过去的我）将需要添加更多内容。

首先，您的列也需要添加到`sales/invoice`表中。

其次，Mage_Sales 使用 Convert 对象来传播从报价到订单到发票的数据。要`your_custom_total`包含在此流程中，请添加几个配置挂钩：

```
<global>
    <fieldsets>
        <sales_convert_quote>
            <your_custom_total><to_order>*</to_order></your_custom_total>
        </sales_convert_quote>
        <sales_convert_order>
            <your_custom_total><to_invoice>*</to_invoice></your_custom_total>
        </sales_convert_order>
    </fieldsets>
</global> 
```

现在，当报价转换为订单并将该订单转换为发票时，您的总额将包括在内。

但是，即使您的总计已保存在发票上，发票也不知道该总计如何影响其总计。因此，需要添加类似于报价地址总计模型的发票总计模型。

配置挂钩：

```
<global>
    <sales>
        <order_invoice>
            <totals>
                <namespace_custom>
                    <class>namespace/sales_order_invoice_total_custom</class>
                    <after>subtotal</after>
                </namespace_custom>
            </totals>
        </order_invoice>
    </sales>
</global> 
```

和班级：

```
class Package_Module_Model_Sales_Order_Invoice_Total_Custom extends Mage_Sales_Model_Order_Invoice_Total_Abstract
{
    public function collect(Mage_Sales_Model_Order_Invoice $invoice)
    {
        $invoice->setBaseGrandTotal($invoice->getBaseGrandTotal() + $invoice->getYourCustomTotal())
            ->setGrandTotal($invoice->getGrandTotal() + $invoice->getYourCustomTotal());
        return $this;
    }
} 
```

如果您的总数适用，您也可以镜像上述以将发票转换为贷项凭单。

此链接[http://magento.ikantam.com/qa/how-add-discount-total-magento](http://magento.ikantam.com/qa/how-add-discount-total-magento)解释了如何重写 adminhtml 块以在后端显示您的总数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-02-04T15:16:20.330

Joseph Maxwell，感谢您提供的出色解决方案！然而，

```
if ($address->getQuote()->useSpecialCoupon()) 
```

此代码应更改为以下代码

```
if ($address->getQuote()->getUseSpecialCoupon()) 
```

没有 GET 字，我遇到了以下错误：

```
Invalid method Mage_Sales_Model_Quote::useSpecialCoupon(Array 
```

并花了一些时间直到我意识到错误的原因。

# java - 具有单个日期字段的 Javabean 但需要使用日期范围对其进行搜索

> ID：13400360
> 
> 赞同：0
> 
> 时间：2012-11-15T15:10:43.923
> 
> 标签：java, jakarta-ee, javabeans

我有一个带有 date_observed 字段的 Javabean。现在我正在尝试创建一个表单，用户可以在其中搜索开始日期和结束日期之间的条目。

我是否应该创建另一个 Javabean 来扩展此 bean 以具有开始和结束日期字段，以便我可以从请求参数填充这些字段？

我想干净地将 bean 传递给我的 Dao 以生成 SQL 字符串，并且如果他们输入不正确的日期格式，也有办法进行表单验证。

通常我会做

```
public void processDate_observed(HttpServletRequest request, Comment comment) {
    String _date = FormUtil.getFieldValue(request, FIELD_DATE_OBSERVED);
    if (!"".equals(_date) && _date != null) {
        try {
            Date date = DateUtil.parse(_date);
            com.setDate_observed(date);
        } catch (ParseException e) {
            setError(FIELD_DATE_OBSERVED, e.getMessage());
        }
    }
} 
```

但我的评论 Javabean 没有字段`start_date`和`end_date`

而对于`dao.search(comment)`

```
 public List<Evaluatee> search(Comment comment) {
   SQL = ".... where date_observed > ? AND date_observed <= ?
         ps.setDate(1, comment.EXTENDED FIELD???)
         ps.setDate(2, comment.EXTENDED FIELD???)
   ...
    } 
```

这里的最佳做法是什么？创建一个全新的 Javabean，扩展我原来的 bean 还是将两个日期字段传递给 Dao？但是，如果我在 bean 中没有日期，你如何将表单验证传回表单？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:06:59.200

在您的 DAO 类中，您有一个以开始和结束日期作为参数的 serch 方法，这是一个很好的做法。

```
public List<Evaluatee> search(String startDate, String endDate) {
///CODE GOES HERE
} 
```

DAO 不需要有一个 Comment 对象作为参数，规则是数据库的每个表都需要是一个具有与表中相同字段的类。

# wcf - 如何使用用户名/密码认证配置 webHttpBinding

> ID：13400361
> 
> 赞同：1
> 
> 时间：2012-11-15T15:10:45.997
> 
> 标签：wcf, wcf-binding, wcf-security

我正在使用 webHttpBinding 为 json ajax 调用开发 WCF 服务。在我打开安全部分之前，该服务运行良好。这是我的 web.config。

```
 <serviceCredentials >
        <userNameAuthentication userNamePasswordValidationMode="Custom" customUserNamePasswordValidatorType="UserNamePasswordValidator, WebServices" />
      </serviceCredentials>
      <serviceAuthorization principalPermissionMode="Custom">
        <authorizationPolicies>
          <add policyType="AuthorizationPolicy, WebServices" />
        </authorizationPolicies>
      </serviceAuthorization>
      <!---->
    </behavior>
  </serviceBehaviors>
  <endpointBehaviors>
    <behavior name="WebHttpBehaviour">
      <enableWebScript />
      <webHttp automaticFormatSelectionEnabled="false" defaultBodyStyle="Wrapped" defaultOutgoingResponseFormat="Json" helpEnabled="true" />
    </behavior>
  </endpointBehaviors>
</behaviors> 
```

这是我的javascript调用。

```
$.ajax({
       headers: {
                "Authorization": "Basic " + Base64.encode('John:Doe')
            },
            type: "POST",
            url: "https://localhost/StatusService.svc/CheckStatus",
            data: JSON.stringify({"companyName":"test"}),
            contentType: "text/json; charset=utf-8",
            dataType: "json",
            processdata: false,
            success: function (data) {
                alert('ok!');
            },
            error: function (jqXHR, textStatus, errorThrown) {
                alert(textStatus + ' / ' + errorThrown);
            }
        });
```

我收到错误消息：执行 ajax 调用时出现对象错误。有什么我做错了吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-16T16:14:27.207

找到以下解决方案。效果很好。 [http://sameproblemmorecode.blogspot.com/2011/10/creating-secure-restfull-wcf-service.html](http://sameproblemmorecode.blogspot.com/2011/10/creating-secure-restfull-wcf-service.html)

# javascript - 自定义鼠标光标 Javascript 绘画应用程序

> ID：13400369
> 
> 赞同：1
> 
> 时间：2012-11-15T15:11:14.313
> 
> 标签：javascript, html

我正在开发一个允许用户在画布元素上绘图的 Web 应用程序。我正在使用 HTML5 和 javascript。

我想知道当用户选择绘画时鼠标是否可以更改为画笔图标，当用户选择擦除等时是否可以更改为橡皮擦图标等。

任何想法我可以如何实现这一目标？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T15:16:09.583

假设唯一的方法是使用 css cursor 属性并将 url 设置为您的图像：

```
body {
   cursor:url('/url/to/required/image.jpg');
} 
```

有关更多详细信息，请参阅：[https ://developer.mozilla.org/en-US/docs/CSS/cursor](https://developer.mozilla.org/en-US/docs/CSS/cursor)

或者用 JS 设置：

```
document.body.style.cursor = "url('/url/to/required/image.jpg')"; 
```

# java - 多字节字符 - 模式匹配

> ID：13400370
> 
> 赞同：0
> 
> 时间：2012-11-15T15:11:17.027
> 
> 标签：java

我正在读取 Shift-JIS 编码的 XML 文件并将其存储在 ByteBuffer 中，然后将其转换为字符串并尝试通过 Pattern & Matcher 查找字符串的开头和字符串的结尾。从这两个位置我尝试将缓冲区写入文件。它在没有多字节字符时工作。如果有一个多字节字符，我会在最后错过一些文本，因为 end 的值很少

```
static final Pattern startPattern = Pattern.compile("<\\?xml ");
static final Pattern endPattern = Pattern.compile("</doc>\n");

 public static void main(String[] args) throws Exception {
    File f = new File("20121114000606JA.xml");
    FileInputStream fis = new FileInputStream(f);
    FileChannel fci = fis.getChannel();
    ByteBuffer data_buffer = ByteBuffer.allocate(65536);
    while (true) {
      int read = fci.read(data_buffer);
      if (read == -1)
        break;
    }

    ByteBuffer cbytes = data_buffer.duplicate();
    cbytes.flip();
    Charset data_charset = Charset.forName("UTF-8");
    String request = data_charset.decode(cbytes).toString();

    Matcher start = startPattern.matcher(request);
    if (start.find()) {
      Matcher end = endPattern.matcher(request);

      if (end.find()) {

        int i0 = start.start();
        int i1 = end.end();

        String str = request.substring(i0, i1);

        String filename = "test.xml";
        FileChannel fc = new FileOutputStream(new File(filename), false).getChannel();

        data_buffer.position(i0);
        data_buffer.limit(i1 - i0);

        long offset = fc.position();
        long sz = fc.write(data_buffer);

        fc.close();
      }
    }
    System.out.println("OK");
  } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:14:28.543

使用**字符串索引**i0 和 i1 作为**字节位置**：

```
data_buffer.position(i0);
data_buffer.limit(i1 - i0); 
```

是错误的。由于 UTF-8 没有给出唯一的编码，`ĉ`被写为两个字符`c`+ 组合变音标记`^`，字符和字节之间的来回转换不仅昂贵而且容易出错（在特定数据的 rand 情况下）。

```
BufferedWriter out = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(
        new File(filename)), "UTF-8")); 
```

或者使用实现 CharSequence 的 CharBuffer。

* * *

而不是写入 FileChannel fc：

```
BufferedWriter out = new BufferedWriter(new OutputStreamWriter(new FileOutputStream(
        new File(filename)), "UTF-8"));
try {
    out.write(str);
} finally {
    out.close();
} 
```

CharBuffer 版本需要更多的重写，也涉及到模式匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:54:45.700

您的问题似乎与您对字节缓冲区的解码有关。您正在使用 UTF-8 CharSet 解码 Shift-JIS ByteBuffer。您需要将其更改为 Shift-JIS CharSet。这些是受[支持的字符编码](http://docs.oracle.com/javase/1.5.0/docs/guide/intl/encoding.doc.html)。

虽然我没有要测试的 Shift-JIS 文件，但您应该尝试将 CharSet.forName 行更改为：

```
Charset data_charset = Charset.forName("Shift_JIS"); 
```

此外，您的正则表达式逻辑有点偏离。我不会使用第二个匹配器，因为这会导致搜索重新开始并可能导致范围反转。相反，尝试获取当前匹配的位置，然后更改匹配器正在使用的模式：

```
Matcher matcher = startPattern.matcher(request);
if (matcher.find()) {
  int i0 = matcher.start();
  matcher.usePattern(endPattern);

  if (matcher.find()) {

    int i1 = matcher.end(); 
```

由于 Shift-JIS 是一个[两字节编码系统](http://en.wikipedia.org/wiki/Shift_JIS)，它应该干净地映射到 Java UTF-8 字符。这应该允许您将其与“START.*END”之类的单个模式匹配，并且只需使用组来获取您的数据。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-16T10:07:04.683

要正确转码此文件，您应该使用 Java 的 XML API。虽然有几种方法可以做到这一点，但这里有一个使用 javax.xml.transform 包的解决方案。首先，我们确实需要文档中引用的 djnml-1.0b.dtd 文件（以防它包含实体引用。）由于缺少此文件，因此此解决方案使用从提供的输入生成的 DTD，使用[Trang](http://www.thaiopensource.com/relaxng/trang.html)：

```
<?xml encoding="UTF-8"?>

<!ELEMENT doc (djnml)>
<!ATTLIST doc
  xmlns CDATA #FIXED ''
  destination NMTOKEN #REQUIRED
  distId NMTOKEN #REQUIRED
  md5 CDATA #REQUIRED
  msize CDATA #REQUIRED
  sysId NMTOKEN #REQUIRED
  transmission-date NMTOKEN #REQUIRED>

<!ELEMENT djnml (head,body)>
<!ATTLIST djnml
  xmlns CDATA #FIXED ''
  docdate CDATA #REQUIRED
  product NMTOKEN #REQUIRED
  publisher NMTOKEN #REQUIRED
  seq CDATA #REQUIRED
  xml:lang NMTOKEN #REQUIRED>

<!ELEMENT head (copyright,docdata)>
<!ATTLIST head
  xmlns CDATA #FIXED ''>

<!ELEMENT body (headline,text)>
<!ATTLIST body
  xmlns CDATA #FIXED ''>

<!ELEMENT copyright EMPTY>
<!ATTLIST copyright
  xmlns CDATA #FIXED ''
  holder CDATA #REQUIRED
  year CDATA #REQUIRED>

<!ELEMENT docdata (djn)>
<!ATTLIST docdata
  xmlns CDATA #FIXED ''>

<!ELEMENT headline (#PCDATA)>
<!ATTLIST headline
  xmlns CDATA #FIXED ''
  brand-display NMTOKEN #REQUIRED
  prefix CDATA #REQUIRED>

<!ELEMENT text (pre,p+)>
<!ATTLIST text
  xmlns CDATA #FIXED ''>

<!ELEMENT djn (djn-newswires)>
<!ATTLIST djn
  xmlns CDATA #FIXED ''>

<!ELEMENT pre EMPTY>
<!ATTLIST pre
  xmlns CDATA #FIXED ''>

<!ELEMENT p (#PCDATA)>
<!ATTLIST p
  xmlns CDATA #FIXED ''>

<!ELEMENT djn-newswires (djn-press-cutout,djn-urgency,djn-mdata)>
<!ATTLIST djn-newswires
  xmlns CDATA #FIXED ''
  news-source NMTOKEN #REQUIRED
  origin NMTOKEN #REQUIRED
  service-id NMTOKEN #REQUIRED>

<!ELEMENT djn-press-cutout EMPTY>
<!ATTLIST djn-press-cutout
  xmlns CDATA #FIXED ''>

<!ELEMENT djn-urgency (#PCDATA)>
<!ATTLIST djn-urgency
  xmlns CDATA #FIXED ''>

<!ELEMENT djn-mdata (djn-coding)>
<!ATTLIST djn-mdata
  xmlns CDATA #FIXED ''
  accession-number CDATA #REQUIRED
  brand NMTOKEN #REQUIRED
  display-date NMTOKEN #REQUIRED
  hot NMTOKEN #REQUIRED
  original-source NMTOKEN #REQUIRED
  page-citation CDATA #REQUIRED
  retention NMTOKEN #REQUIRED
  temp-perm NMTOKEN #REQUIRED>

<!ELEMENT djn-coding (djn-company,djn-isin,djn-industry,djn-subject,
                      djn-market,djn-product,djn-geo)>
<!ATTLIST djn-coding
  xmlns CDATA #FIXED ''>

<!ELEMENT djn-company (c)>
<!ATTLIST djn-company
  xmlns CDATA #FIXED ''>

<!ELEMENT djn-isin (c)>
<!ATTLIST djn-isin
  xmlns CDATA #FIXED ''>

<!ELEMENT djn-industry (c)+>
<!ATTLIST djn-industry
  xmlns CDATA #FIXED ''>

<!ELEMENT djn-subject (c)+>
<!ATTLIST djn-subject
  xmlns CDATA #FIXED ''>

<!ELEMENT djn-market (c)+>
<!ATTLIST djn-market
  xmlns CDATA #FIXED ''>

<!ELEMENT djn-product (c)+>
<!ATTLIST djn-product
  xmlns CDATA #FIXED ''>

<!ELEMENT djn-geo (c)+>
<!ATTLIST djn-geo
  xmlns CDATA #FIXED ''>

<!ELEMENT c (#PCDATA)>
<!ATTLIST c
  xmlns CDATA #FIXED ''> 
```

将此文件写入“djnml-1.0b.dtd”后，我们需要使用 XSLT 创建一个身份转换。您可以使用 TransformerFactory 上的 newTransformer() 方法来执行此操作，但此转换的结果没有很好地指定。使用 XSLT 将产生更清晰的结果。我们将使用这个文件作为我们的身份转换：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

  <xsl:output method="xml" version="1.0" encoding="UTF-8" indent="yes" omit-xml-declaration="no"/>

  <xsl:template match="@*|node()">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  </xsl:template>

</xsl:stylesheet> 
```

将上述 XSLT 文件另存为“identity.xsl”。现在我们有了 DTD 和身份转换，我们可以使用以下代码对文件进行转码：

```
import java.io.Closeable;
import java.io.File;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.FileOutputStream;
import java.io.IOException;
import java.io.InputStream;
import java.io.OutputStream;
import java.util.ArrayList;
import java.util.List;

import javax.xml.transform.Templates;
import javax.xml.transform.Transformer;
import javax.xml.transform.TransformerException;
import javax.xml.transform.TransformerFactory;
import javax.xml.transform.sax.SAXSource;
import javax.xml.transform.stream.StreamResult;
import javax.xml.transform.stream.StreamSource;

import org.xml.sax.EntityResolver;
import org.xml.sax.InputSource;
import org.xml.sax.SAXException;
import org.xml.sax.XMLReader;
import org.xml.sax.helpers.XMLReaderFactory;

...

File inFile = new File("20121114000606JA.xml");
File outputFile = new File("test.xml");
final File dtdFile = new File("djnml-1.0b.dtd");
File identityFile = new File("identity.xsl");

final List<Closeable> closeables = new ArrayList<Closeable>();
try {
  // We are going to use a SAXSource for input, so that we can specify the
  // location of the DTD with an EntityResolver.
  InputStream in = new FileInputStream(inFile);
  closeables.add(in);
  InputSource fileSource = new InputSource();
  fileSource.setByteStream(in);
  fileSource.setSystemId(inFile.toURI().toString());

  SAXSource source = new SAXSource();
  XMLReader reader = XMLReaderFactory.createXMLReader();
  reader.setEntityResolver(new EntityResolver() {
    public InputSource resolveEntity(String publicId, String systemId)
        throws SAXException, IOException {
      if (systemId != null && systemId.endsWith("/djnml-1.0b.dtd")) {
        InputStream dtdIn = new FileInputStream(dtdFile);
        closeables.add(dtdIn);

        InputSource inputSource = new InputSource();
        inputSource.setByteStream(dtdIn);
        inputSource.setEncoding("UTF-8");

        return inputSource;
      }
      return null;
    }
  });

  source.setXMLReader(reader);
  source.setInputSource(fileSource);

  // Now we need to create a StreamResult.
  OutputStream out = new FileOutputStream(outputFile);
  closeables.add(out);
  StreamResult result = new StreamResult();
  result.setOutputStream(out);
  result.setSystemId(outputFile);

  // Create a templates object for the identity transform.  If you are going
  // to transform a lot of documents, you should do this once and
  // reuse the Templates object.
  InputStream identityIn = new FileInputStream(identityFile);
  closeables.add(identityIn);
  StreamSource identitySource = new StreamSource();
  identitySource.setSystemId(identityFile);
  identitySource.setInputStream(identityIn);
  TransformerFactory factory = TransformerFactory.newInstance();
  Templates templates = factory.newTemplates(identitySource);

  // Finally we need to create the transformer and do the transformation.
  Transformer transformer = templates.newTransformer();
  transformer.transform(source, result);

} finally {
  // Some older XML processors are bad at cleaning up input and output streams,
  // so we will do this manually.
  for (Closeable closeable : closeables) {
    if (closeable != null) {
      try {
        closeable.close();
      } catch (Exception e) {
      }
    }
  }
} 
```

# python - 打开 bin 文件并将 ascii 转换为 hex

> ID：13400371
> 
> 赞同：1
> 
> 时间：2012-11-15T15:11:16.410
> 
> 标签：python, io, python-3.x, binary

我想从 bin 文件中打开一些数据

```
import io
data=io.open('bpsk_2m_b11.rd16','rb').read()
print (data) 
```

但似乎有一些 ASCII 符号，例如（我的意思是 '{' 和 'k','w' ）

b'\xde{\x1d\x86\xa0\x81kw\xbc\x8a'

我对整个格式化没问题，但是如何用十六进制替换那些 ASCII 符号？或者我应该使用其他模式来读取这个文件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:16:35.497

一切正常，`b'{'`只是另一种写作方式`b'\x7b'`：

```
>>> b'{' == b'\x7b'
True 
```

您可以使用以下辅助方法创建仅转义的字符串：

```
import binascii
def to_byte_escapes(b):
   return ''.join('\\x' + binascii.hexlify(byte) for byte in b) 
```

然后你会得到：

```
>>> print(to_byte_escapes(b'\xde{\x1d\x86\xa0\x81kw\xbc\x8a'))
\xde\x7b\x1d\x86\xa0\x81\x6b\x77\xbc\x8a 
```

# algorithm - Connect 4 评估数据集的算法

> ID：13400374
> 
> 赞同：2
> 
> 时间：2012-11-15T15:11:29.353
> 
> 标签：algorithm, artificial-intelligence

我正在开发一个 connect 4 AI，并且看到很多人都在使用[这个](http://archive.ics.uci.edu/ml/datasets/Connect-4)数据集，其中包含 8 层的所有法律职位及其最终结果。

我使用带有 alpha/beta 修剪的标准 minimax 作为我的搜索算法。看起来这个数据集可能对我的 AI 非常有用。但是，我正在尝试找到实现它的最佳方法。我认为最好的方法可能是处理列表，并使用棋盘状态作为最终结果（赢、输、平）的哈希值。

设计 AI 以使用这样的数据集的最佳方法是什么？我的想法是散列棋盘状态，并在正确的轨道上在传统的搜索算法（例如极小极大）中使用它吗？还是有更好的方法？

**更新**：我最终将大型移动数据库转换为简单的测试格式，其中 1 代表 X 和 -1 O。然后我使用了一个棋盘状态字符串，一个代表最终结果的整数，并将其放入`std::unsorted_map`（见[Stack Overflow With Unordered Map](https://stackoverflow.com/questions/13501257/stack-overflow-with-unordered-map)来解决我遇到的问题）。地图的表现非常出色。它构建得很快，而且查找速度很快。但是，我从来没有完全正确地进行搜索。当游戏中的回合数少于 8 时，仅搜索数据库，然后切换到常规的 alpha-beta 是解决问题的正确方法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-04T22:22:45.567

**你的方法似乎是正确的。**

对于前 8 步，使用 alpha-beta 算法，并使用查找表来评估每个节点在深度 8 处的值。
一旦你“用尽”表（在游戏中超过 8 步） - 你应该切换到常规的 alpha-beta 算法，以终止状态（游戏树中的叶子）结束。

这非常有帮助，因为：
请记住，搜索树的复杂性是`O(B^d)`-`B`分支因子（每个状态可能移动的数量）在哪里，并且`d`是直到结束所需的深度。
通过使用这种方法，您可以有效地减少`B`最大`d`等待时间（需要计算最长的移动），因为：

1.  **您的最大深度**显着缩小到`d-8`（仅适用于最后一步），有效减少`d`！
2.  **在这个游戏中，分支因素本身往往会**在几个动作后缩小（许多动作变得不可能或导致失败，不应该探索），这会减少`B`。
3.  在第一步中，您将开发节点的数量也缩小到`B^8`而不是`B^d`.

因此，正因为如此 - 使用这种方法可以显着减少最大等待时间。

* * *

另请注意：如果您发现优化不够 - 您可以随时扩展查找表（到 9,10，... 第一步），当然它会以指数方式增加所需空间 - 这是您需要检查的权衡并选择最能满足您需求的东西（如果主内存不够，甚至可以将整个游戏存储在文件系统中）

# java - 遇到麻烦 SUM PER ROW

> ID：13400375
> 
> 赞同：0
> 
> 时间：2012-11-15T15:11:29.657
> 
> 标签：java

我的代码有问题，我想逐行打印它，但我最终添加了所有这些数字-

应该看起来像这样 --> 第 0 行的总和是 "" 第 1 行的总和是 "" 第 2 行的总和是 ""

```
public class NewClass
{
          public static void main( String[] arg )
          {
           int[][] data = 
            { { 1, 2},
              { 2, 2},
              { 1, 2, 4, 5},
              { 2, 2, 4,},
              { 1, 1, 4, 5 },
              { 2, 1}};

               int sum = 0;

               for ( int row=0; row < data.length; row++)
                 for ( int col=0; col < data[row].length; col++)
                   sum = sum + data[row][col];

                System.out.println( sum );
              }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:12:37.073

您希望外部循环包括 sum 变量的初始化和打印：

```
for ( int row=0; row < data.length; row++) {
     int sum = 0;
     for ( int col=0; col < data[row].length; col++) {
          sum += data[row][col];
     }
     System.out.println("sum of row " + row + " is " + sum);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:12:44.970

在第一个循环内移动总和以及打印。

```
 for ( int row=0; row < data.length; row++)
        {
           int sum = 0;
          for ( int col=0; col < data[row].length; col++)
          {
           sum = sum + data[row][col];
          }
          System.out.println( sum );
        } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:16:48.273

有两个变量并累积它。

```
int totalSum = 0;
for (int row = 0; row < data.length; row++) {
    int rowSum = 0;
    for (int col = 0; col < data[row].length; col++) {
        rowSum = rowSum + data[row][col];
    }
    System.out.println("Sum of " + (row + 1) + " is " + rowSum);
    totalSum += rowSum;
}
System.out.println("TotalSum " + totalSum); 
```

# forms - Symfony2：如何嵌入带有可变标签的表单集合？

> ID：13400378
> 
> 赞同：2
> 
> 时间：2012-11-15T15:11:36.747
> 
> 标签：forms, symfony-2.1

多亏了[这个帮助](https://stackoverflow.com/questions/11822675/how-can-i-pass-extra-variable-in-symfony-form-builform-function)，我可以创建一个带有可变标签的表单。现在我想创建一个此类表单的集合，但我做不到。

准确地说：我有一个 MyField 类：

```
class MyField {
    protected label;
    protected userAnswer;

    public function setLabel($label){...}
    public function getLabel(){...}
    public function setUserAnswer($answer){...}
    public function getUserAnswer(){...}
} 
```

我还有一个 MyFieldType 类：

```
class MyFieldType extends AbstractType{
    public function buildForm(FormBuilderInterface $builder, array $options){
        $myField = $options['myField'];
        $builder->add('userAnswer', 'text', array('label' => $myField->getLabel()));
    }

    public function getDefaultOptions(array $options){
        return array('data_class' => '...\MyField',
                        'myField' => null);
    }
} 
```

并且，在控制器中：

```
public function MyAction(Request $request){
    ...
    $myField = new MyField();
    ...
    $form = $this->createForme(new MyFieldType(), $myField, array('myField' => $myField));
    ...
} 
```

综上所述，字段标签是 $myField->label。

现在我想用几个 MyFields 创建一个表单：我有一个 MyForm 类

```
class MyForm {
    protected myFields; // array of MyField
    public function setMyFields...
    public function getMyFields...
    public function addAField...
} 
```

而且我仍然希望字段标签为 $myField->label。那么，**我该如何定义 MyFormType ？**
我尝试了类似的东西：

```
class MyFormType extends AbstractType {
    public function buildForm(FormBuilderInterface $builder, array $options){
        $myFields = $options['myFields'];
        $builder->add('myFields', 'collection',
                array('type' => new MyFieldType(),
                    'options' => array('myField' => $myFields[0])));
    } 
```

它可以工作（当然所有字段都有相同的标签，我不希望这样），但我不知道如何给每个 MyFieldType 自己的 MyField ...

任何想法 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T18:59:56.183

我会创建这两种类型：

```
class MyFormType extends AbstractType {

    public function buildForm(FormBuilderInterface $builder, array $options){

        $builder->add('myFields', 'collection',
                array('type' => new MyFieldType());
    }

class MyFieldType extends AbstractType {
    public function buildForm(FormBuilderInterface $builder, array $options){

        $builder->add('label', 'text');
    } 
```

希望能帮助到你

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-17T01:52:50.277

我找到了一种方法来做我想做的事（感谢 nass600 的回答和我的回复）：我创建了一种新型字段（参见[http://symfony.com/en/doc/current/cookbook/form/create_custom_field_type .html](http://symfony.com/en/doc/current/cookbook/form/create_custom_field_type.html) ) 像这样：

```
class LabelType extends AbstractType{
    public function setDefaultOptions(OptionsResolverInterface $resolver){
    }

    public function getParent(){
        return 'text';
    }

    public function getName(){
        return 'label';
    }
} 
```

然后，我改变了 MyFieldType ：

```
class MyFieldType extends AbstractType{
    public function buildForm(FormBuilderInterface $builder, array $options){
        $builder->add('label', new LabelType())
                ->add('userAnswer', 'text');
    }

    public function getDefaultOptions(array $options){
        return array('data_class' => '...\MyField')
    }
} 
```

我还创建了一个 fields.html.twig，就像 Symfony 食谱中解释的那样，只有：

```
{% block label_widget %}
  {{ value }}
{% endblock %} 
```

而且，现在，在我的 myForm.html.twig 中：

```
...
{% for field in form.myFields %}
{% form_widget(field.label) %}
{% form_widget(field.userAnswer) %}
... 
```

适用于：

```
class MyFormType extends AbstractType {
    public function buildForm(FormBuilderInterface $builder, array $options){
        $myFields = $options['myFields'];
        $builder->add('myFields', 'collection',
                array('type' => new MyFieldType()));
    }
... 
```

再见

# javascript - 如何在 Cordova iOS 应用中启用缩放

> ID：13400380
> 
> 赞同：2
> 
> 时间：2012-11-15T15:11:43.843
> 
> 标签：javascript, raphael, cordova, cordova-2.0.0

我有一个通过 Cordova/PhoneGap 运行的网络应用程序来创建一个 iOS 应用程序。当我在移动 Safari 上运行该网站时，放大和缩小工作正常，但在 iPhone 和 iPad 上捏到缩放不再起作用。

Cordova 中有什么东西会阻止正常缩放工作吗？

该应用程序使用 RaphaelJS 插件，但仅此而已，除了 cordova js 库

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-24T17:32:09.990

![启用视口缩放](../Images/35b70a640889240a73cca64a3ec7d4dc.png)

您需要在 Cordova.plist 中启用 ViewportScale，默认设置为 NO。

# cmake - 如何使用 cmake 编译 autoconf 项目？

> ID：13400383
> 
> 赞同：1
> 
> 时间：2012-11-15T15:11:51.160
> 
> 标签：cmake, autoconf

我正在使用 cmake 构建我的项目，并且我希望它与名为 Project_A 的第三方库集成，该库使用 autoconf 生成 make，如何编写 CMakeLists.txt 来一起构建 Project_A 和我的项目？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:48:28.980

我认为在 CMake 中使用 ExternalProject 模块将是最好的解决方案。有关 api 的良好介绍，请参见[此处](http://www.kitware.com/media/html/BuildingExternalProjectsWithCMake2.8.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-21T18:12:09.133

如果您想要进行词法代码重用（即，复制粘贴代码而不是依赖依赖项），那么不要中途停止。通过以这种方式使用外部代码，您实际上是为了您的项目而声明对它的所有权，因此无需保留 autotool 构建。只需拉出代码并通过 cmake 构建它。不要费心尝试创建混合构建。

# touch-event - 扩展 Horizo ntal ScrollView 以阻止孩子的 ontouch 事件不起作用

> ID：13400384
> 
> 赞同：2
> 
> 时间：2012-11-15T15:11:52.610
> 
> 标签：touch-event, ontouchlistener, horizontalscrollview

我一直在尝试实现一个水平滚动视图，用户从图像列表中选择并显示在屏幕中央。

最初，我的问题是滚动非常不稳定。我正在使用 ontouch 事件来实现这些。基本上，我需要使用 ontouch 事件，因为我需要手动进行滚动。由于我在水平滚动视图内有一个线性布局，我发现我必须阻止子级（水平滚动视图内的线性布局）感应触摸事件。

为了解决这个问题，我遵循了许多帖子建议您需要阻止孩子访问 ontouch 事件的内容。因此，我定义了一个扩展 Horizo​​ntal ScrollView 的新类，并实现了 ontouch 事件和 onInterceptTouchEvent。

我的问题是这种方法不起作用，我继续收到以下消息，因为我做了这些更改：

> java.lang.RuntimeException：无法启动活动 ComponentInf0{com.demo.touch/com.demo.touch.EltouchActivity}：java.lang.ClassCastException：com.demo.touch.EltouchActivity 无法转换为 android.view.View$ OnTouchListener

我无法弄清楚我的问题是什么。谁能帮我这个？任何帮助将不胜感激，

理查德

这是 EltouchActivity 的代码（我的主要活动）：

```
package com.demos.touch;

import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.view.MotionEvent;
import android.view.View;
import android.view.View.OnClickListener;
import android.view.View.OnTouchListener;
import android.widget.AbsListView.OnScrollListener;
import android.widget.HorizontalScrollView;
import android.widget.ImageView;
import android.widget.LinearLayout;
import android.widget.ScrollView;
import android.widget.TextView;

 public class EltouchActivity extends Activity implements OnClickListener{

ImageView main, cow, horse, rooster, geese, dog, duck, goat;
float[] x = new float[10];
float[] y = new float[10];

   @Override
   public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.eltouch);

    main = (ImageView) findViewById(R.id.ivMain);
    cow = (ImageView) findViewById(R.id.ivCow);
    horse = (ImageView) findViewById(R.id.ivHorse);
    rooster = (ImageView) findViewById(R.id.ivRooster);
    geese = (ImageView) findViewById(R.id.ivGeese);
    dog = (ImageView) findViewById(R.id.ivDog);
    goat = (ImageView) findViewById(R.id.ivGoat);

    cow.setOnClickListener(this);
    horse.setOnClickListener(this);
    rooster.setOnClickListener(this);
    geese.setOnClickListener(this);
    dog.setOnClickListener(this);
    goat.setOnClickListener(this);

    MyHorScrollView hsv = (MyHorScrollView) findViewById(R.id.myhorscrlvw);
    hsv.setOnTouchListener((OnTouchListener) this);
  }

public void onClick(View arg0) {
    switch(arg0.getId()){
    case R.id.ivCow:
        main.setImageResource(R.drawable.cow);
        break;
    case R.id.ivDog:
        main.setImageResource(R.drawable.dog);
        break;  
    case R.id.ivDuck:
        main.setImageResource(R.drawable.duck);
        break;
    case R.id.ivDucklings:
        main.setImageResource(R.drawable.ducklings);
        break;
    case R.id.ivGeese:
        main.setImageResource(R.drawable.geeze);
        break;
    case R.id.ivGoat:
        main.setImageResource(R.drawable.goat);
        break;
    }

}

} 
```

这是我的 xml 文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:id="@+id/otherlayout"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" 
android:background="@drawable/shark_background_colored">

    <ImageView 
    android:layout_width="400dp"
    android:layout_height="280dp"
    android:src="@drawable/geeze"
    android:layout_gravity="center_horizontal"
    android:background="#e9ccdd"
    android:id="@+id/ivMain" />
<com.demos.touch.MyHorScrollView
    android:id="@+id/myhorscrlvw"
    android:layout_width="950dp"
    android:layout_height="304dp"
    android:layout_gravity="center_horizontal"
    android:scrollbars="none" 
    android:background="#ebee7c">

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal"
    android:id="@+id/horizontallayout"
    android:background="#e9a4dd"
    android:layout_gravity="center_vertical">

    <ImageView 
    android:layout_width="200dp"
    android:layout_height="200dp"
    android:src="@drawable/cow"
    android:layout_gravity="center_horizontal"
    android:id="@+id/ivCow" />
    <ImageView 
    android:layout_width="200dp"
    android:layout_height="200dp"
    android:src="@drawable/horse"
    android:layout_gravity="center_horizontal"
    android:id="@+id/ivHorse" 
    android:paddingLeft="25dp"/>
    <ImageView 
    android:layout_width="200dp"
    android:layout_height="200dp"
    android:src="@drawable/rooster"
    android:layout_gravity="center_horizontal"
    android:id="@+id/ivRooster" 
    android:paddingLeft="25dp"/>
   <ImageView 
    android:layout_width="200dp"
    android:layout_height="200dp"
    android:src="@drawable/geeze"
    android:layout_gravity="center_horizontal"
    android:id="@+id/ivGeese" 
    android:paddingLeft="25dp"/>
    <ImageView 
    android:layout_width="200dp"
    android:layout_height="200dp"
    android:src="@drawable/dog"
    android:layout_gravity="center_horizontal"
    android:id="@+id/ivDog" 
    android:paddingLeft="25dp"/>
    <ImageView 
    android:layout_width="200dp"
    android:layout_height="200dp"
    android:src="@drawable/duck"
    android:layout_gravity="center_horizontal"
    android:id="@+id/ivDuck" 
    android:paddingLeft="25dp"/>
    <ImageView 
    android:layout_width="200dp"
    android:layout_height="200dp"
    android:src="@drawable/goat"
    android:layout_gravity="center_horizontal"
    android:id="@+id/ivGoat" 
    android:paddingLeft="25dp"/>
</LinearLayout>
</com.arturo.ejemplodetouch.MyHorScrollView>
</LinearLayout> 
```

这是扩展 Horizo​​ntal ScrollView 的类：

```
package com.demos.touch;

import android.content.Context;
import android.util.AttributeSet;
import android.view.MotionEvent;
import android.view.View;
import android.widget.HorizontalScrollView;
import android.widget.TextView;

public class MyHorScrollView extends HorizontalScrollView{

   public MyHorScrollView(Context context) {
      super(context);
   }

   public MyHorScrollView(Context context, AttributeSet attrs, int defStyle) {
       super(context, attrs, defStyle);
   }

   public MyHorScrollView(Context context, AttributeSet attrs) {
        super(context, attrs);
   }

   public boolean onInterceptTouchEvent(MotionEvent ev) {
         return true;
   }

   public boolean onTouch(View arg0, MotionEvent arg1) {

      int action = arg1.getAction() & MotionEvent.ACTION_MASK;
      float currentX = 0;
      int pointerIndex = (arg1.getAction() & MotionEvent.ACTION_POINTER_INDEX_MASK) >>
      MotionEvent.ACTION_POINTER_INDEX_SHIFT;
      int pointerId = arg1.getPointerId(pointerIndex);

      float downX=0, totalX;
      int scrollByX = 0;
      float[] x = new float[10];
      float[] y = new float[10];

      switch(action){
        case MotionEvent.ACTION_DOWN:
        case MotionEvent.ACTION_POINTER_DOWN:
           downX=(int)arg1.getRawX();
           currentX=0;
           scrollByX = 0;
           break;
        case MotionEvent.ACTION_UP:
        case MotionEvent.ACTION_POINTER_UP:
        case MotionEvent.ACTION_CANCEL:
           currentX=(int)arg1.getRawX();
           scrollByX = (int)(downX - currentX);
           arg0.scrollBy(scrollByX, 0);//end scrolling
           break;   
        case MotionEvent.ACTION_MOVE:
           currentX=(int)arg1.getRawX();
           scrollByX = (int)(downX - currentX);//begin scrolling
           arg0.scrollBy(scrollByX, 0);
           downX = currentX;
           break;
       }
       return true;
    }
} 
```

# expressionengine - EE - 如何使用类别标签使当前段处于活动状态？

> ID：13400385
> 
> 赞同：1
> 
> 时间：2012-11-15T15:11:58.697
> 
> 标签：expressionengine

我正在使用 channel:categories 标签来拉入类别以进行部分导航。这很好用，但我也想将当前活动类别标记为导航中的活动项目以进行样式设置：

**一个类=“活动”**

我尝试了两种方法都不起作用。

尝试 1（根据[文档](http://expressionengine.com/user_guide/modules/channel/categories.html#examples)）：

```
<a {if active} class="active"{/if} href="{path='internal-staff-center/{category_url_title}'}">{category_name}</a> 
```

尝试2：

```
<a {if segment_2 == "{category_url_title}"}class="active"{/if}  href="{path='internal-staff-center/{category_url_title}'}">{category_name}</a> 
```

我会很感激从另一个观点那里得到一些意见。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:25:18.157

频道类别中的`{path}`变量将使用您的类别触发词或**C(n)** URL 段（C2、C15 等）输出路径。`{segment_2}`所以它实际上是你的`category_url_title`......它更有可能是值得怀疑的`{segment_3}`。

这些页面的示例 URL 结构是什么？

`{if segment_X == category_url_title}`只要比较是正确的，就应该工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:24:21.380

尝试

```
{if "{segment_2}" == "{category_url_title}"} class="current"{/if} 
```

# jquery - 带有淡入/淡出的文本到图像翻转

> ID：13400389
> 
> 赞同：4
> 
> 时间：2012-11-15T15:12:15.220
> 
> 标签：jquery, rollovers

我在这里找到并修改了一种创建文本到图像翻转的好方法：http: [//jsfiddle.net/pkZAW/12/](http://jsfiddle.net/pkZAW/12/)

```
 $( function() {
  $("#imglink").hover(
    function () {
      $(this).attr('small',$(this).html());
      $(this).html($(this).attr('full'));
    },
    function () {
       $(this).html($(this).attr('small'));
    }
  );
});​ 
```

但是，我需要淡入淡出的过渡，就像这里的缩略图一样：http: [//lydiafraserward.co.uk/index.php ?page=produce](http://lydiafraserward.co.uk/index.php?page=producing)

经过大量搜索，我无法将此过渡添加到脚本中：-？.. 有任何想法吗..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:10:56.370

我认为这种情况不需要 live() 。我不会在 mouseleave 函数上使用淡出，因为动画会叠加。

你也可以试试这个：

```
$( function() {
    $("#imglink").hover(
    function () {
        $(this).attr('small',$(this).html());
        $(this).stop(false,true).fadeOut(250,function() {
            $(this).html($(this).attr('full'));
            $(this).stop(false,true).fadeIn(250);
        });
   }, function () {
        $(this).html($(this).attr('small'));

   });
  }); 
```

编辑：使用锚标签周围的 span 标签修复闪烁效果：演示：http: [//jsfiddle.net/LYjvp/1/](http://jsfiddle.net/LYjvp/1/)

# iphone - 当我们导航到 MapTabBar 时重新加载地图

> ID：13400390
> 
> 赞同：2
> 
> 时间：2012-11-15T15:12:18.077
> 
> 标签：iphone, objective-c, ios

我有一个 tabBarView 控制器和一个 TableViewController。当我单击一行时，我想转到另一个选项卡，即带有地图的 UIViewController：

```
- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    if(storeName) 
       [self setMap];
}

- (void) setMap {

    NSLog(@"Name:%@\n", storeName);
    NSLog(@"Adress:%@\n", storeAddress);

        self.indexMapView.delegate = self;

        self.indexMapView.showsUserLocation = NO;

        self.locationManager = [[CLLocationManager alloc] init];
        [locationManager setDelegate:self];

        [locationManager setDistanceFilter:kCLDistanceFilterNone];
        [locationManager setDesiredAccuracy:kCLLocationAccuracyBest];

        [self.indexMapView setShowsUserLocation:YES];

        CLLocationCoordinate2D location = [self getLocationFromAddressString:self.storeAddress];

        NSLog(@"%g", location.latitude);

        MapViewAnnotation *mapAnnotation = [[MapViewAnnotation alloc] initWithTitle:@"Store location" coordinate:location];
        [self.indexMapView addAnnotation:mapAnnotation];

}

-(CLLocationCoordinate2D) getLocationFromAddressString:(NSString*) addressStr {

    NSLog(@"FFF");

    NSString *urlStr = [NSString stringWithFormat:@"http://maps.google.com/maps/geo?q=%@&output=csv",
                        [addressStr stringByAddingPercentEscapesUsingEncoding:NSUTF8StringEncoding]];

    NSError *error = nil;

    NSString *locationStr = [NSString stringWithContentsOfURL:[NSURL URLWithString:urlStr] encoding:NSUTF8StringEncoding error:&error];

    NSArray *items = [locationStr componentsSeparatedByString:@","];

    double lat = 0.0;
    double lon = 0.0;

    if([items count] >= 4 && [[items objectAtIndex:0] isEqualToString:@"200"]) {
        lat = [[items objectAtIndex:2] doubleValue];
        lon = [[items objectAtIndex:3] doubleValue];
    }
    else {
        NSLog(@"Address, %@ not found: Error %@",addressStr, [items objectAtIndex:0]);
    }

    CLLocationCoordinate2D location;
    location.latitude = lat;
    location.longitude = lon;

    return location;
} 
```

这就是我去 MapViewController 的方式：

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    MapViewController *mapViewController = [[MapViewController alloc]init];

    [mapViewController setStoreAddress:store.address];
    [mapViewController setStoreName:store.name];
    [mapViewController viewDidLoad];

    [self.tabBarController setSelectedIndex:4];
} 
```

问题是当我再次访问该页面时地图没有更新。当我尝试使用它时`PushSegue`，它可以工作。但我怎样才能使它与 TabBar 一起工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:14:23.277

好吧，看起来您注释掉了对 的调用`-setMap`，这意味着当视图加载时，不会发生任何感兴趣的事情。那是故意的吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T22:26:50.547

我想出了如何通过标签栏传递数据。您可以在这些链接中找到更多描述：

[iPhone：如何在标签栏应用程序中的多个视图控制器之间传递数据](https://stackoverflow.com/questions/2363777/iphone-how-to-pass-data-between-several-viewcontrollers-in-a-tabbar-app)

[将 managedObjectContext 传递给 UITabBarController 的视图](https://stackoverflow.com/questions/3970952/passing-a-managedobjectcontext-through-to-a-uitabbarcontrollers-views)

[本教程](http://klanguedoc.hubpages.com/hub/iOS-5-How-To-Share-Data-Between-View-Controllers-using-a-Singleton)也很有用。

# mysql - Mysql SQL 修剪 varchar 字段中的前导 0 而不修剪最后一个 0 之前。（点）

> ID：13400395
> 
> 赞同：1
> 
> 时间：2012-11-15T15:12:40.613
> 
> 标签：mysql, trim

我想清理 VARCHAR 字段中的“数字”。

```
Examples:
________________
a. 001    : 1
b. 01     : 1
c. 0      : 0
d. 00.1   : 0.1
e. 0.0    : 0
f. 0.001  : 0.001 
```

我考虑过：

```
TRIM(LEADING '0' FROM t.field) 
```

但这仅适用于 a 和 b 记录。其他人会变成 .1 或 .0，......
关于如何处理这个问题的任何想法？

编辑：对不起，我忘了添加基本信息。某些记录可能包含其他字符。即：0.1公里

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:14:08.323

试一试

```
SELECT CAST(fieldName AS DECIMAL(10,2))
FROM tableName 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:14:31.950

把它们当作数字？

```
UPDATE SET yourfield = CAST(yourfield AS signed) 
```

mysql 在进行实际更新时将重新转换为 varchar。

# field - 如果另一个字段在 Expressionengine 中有内容，我如何使一个字段成为必填字段

> ID：13400401
> 
> 赞同：2
> 
> 时间：2012-11-15T15:13:00.557
> 
> 标签：field, expressionengine, channel, required

我有一个名为 blog 的频道字段组 这个字段组有 3 个字段

*   {body}：文本区域，必填字段
*   {image}：文件字段，可选字段
*   {image_credit}：文本字段，可选字段，当{image}有内容时变成必填字段。

这背后的理由：一个条目只能是文本，但如果一个图像被发布，它必须有学分。

据我所知，EE 本身无法做到这一点，我在 Devot-ee 中搜索了一个附加组件，但无济于事。

我想在现场级别上解决这个问题。否则我必须在模板中编写一些代码，以检查 {image_credit}=="" 是否不发布任何 {image}。但这会导致混乱，为什么CP中显示的图像不会发布......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T17:50:04.993

我不知道有任何方法可以本地或使用插件来做到这一点，但插件可能就在那里。

我建议编写自己的 jQuery 验证。您可以将其弹出到该频道表单上某个字段的说明中。应该做得很好

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T23:31:19.320

如果您安装了`Pixel&Tonic's`Matrix 插件，您可以在此频道的字段组中创建一个新的 Matrix 字段。

Matrix 字段默认为零行，并包含两个字段列：

*   图片的图像字段（*必填*）
*   标题的文本字段（*必需*）

因此，如果有带有此条目的图像，则客户端单击`plus`图标以创建一行，并且必须同时填写图像和标题。如果没有图像，他们会保持原样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-16T05:50:10.680

Pixel & Tonic 也有[这个插件](http://devot-ee.com/add-ons/cp-css-js)，可以让你将自己的自定义 js 添加到控制面板。因此，您可以检查图像字段是否有内容，然后如果标题字段为空，则阻止提交表单。

# python - Python+SUDS：base64 编码中的 XML 请求

> ID：13400403
> 
> 赞同：1
> 
> 时间：2012-11-15T15:13:10.830
> 
> 标签：python, xml, base64, suds

我正在尝试在 Python 中创建一个客户端，它将与 Web 服务（NuSoap）进行通信。标识数据和查询以 XML 格式作为加密字符串 (base64) 发送。这个 XML 是：

```
<CV3Data version="2.0">
  <request>
    <authenticate>
      <user>m*****</user>
      <pass>m******</pass>
      <serviceID>b*******0</serviceID>
    </authenticate>
    <requests>
      <reqProducts>
        <reqProductRange start="9294" end="9296"/>
      </reqProducts>
    </requests>
  </request>
</CV3Data> 
```

这个 Web 服务有这个 wsdl：

```
<definitions xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:SOAP-ENC="http://schemas.xmlsoap.org/soap/encoding/" xmlns:tns="https://service.commercev3.com/CV3Data.xsd" xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/" xmlns:wsdl="http://schemas.xmlsoap.org/wsdl/" xmlns="http://schemas.xmlsoap.org/wsdl/" targetNamespace="https://service.commercev3.com/CV3Data.xsd">
 <types>
  <xsd:schema targetNamespace="https://service.commercev3.com/CV3Data.xsd">
   <xsd:import namespace="http://schemas.xmlsoap.org/soap/encoding/"/>
   <xsd:import namespace="http://schemas.xmlsoap.org/wsdl/"/>
  </xsd:schema>
 </types>    
 <message name="CV3DataRequest">
  <part name="data" type="xsd:base64Binary"/>
 </message>
 <message name="CV3DataResponse">
  <part name="return" type="xsd:base64Binary"/>
 </message>
 <portType name="CV3Data.xsdPortType">
  <operation name="CV3Data">
   <input message="tns:CV3DataRequest"/>
   <output message="tns:CV3DataResponse"/>
  </operation>
 </portType>
 <binding name="CV3Data.xsdBinding" type="tns:CV3Data.xsdPortType">
  <soap:binding style="rpc" transport="http://schemas.xmlsoap.org/soap/http"/>
  <operation name="CV3Data">
   <soap:operation soapAction="http://service.commercev3.com/index.php/CV3Data" style="rpc"/>
   <input>
    <soap:body use="encoded" namespace="http://soapinterop.org/" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
   </input>
   <output>
    <soap:body use="encoded" namespace="http://soapinterop.org/" encodingStyle="http://schemas.xmlsoap.org/soap/encoding/"/>
   </output>
  </operation>
 </binding>
 <service name="CV3Data.xsd">
  <port name="CV3Data.xsdPort" binding="tns:CV3Data.xsdBinding">
   <soap:address location="http://service.commercev3.com/index.php"/>
  </port>
 </service>
</definitions> 
```

我需要阅读 CV3Data。我会感谢工作建议。

有什么建议么？

# java - Criteria Builder 在 Select 语句中创建新对象

> ID：13400412
> 
> 赞同：20
> 
> 时间：2012-11-15T15:13:44.377
> 
> 标签：java, hibernate, jpa-2.0, jpql, criteria-api

我想知道是否可以创建这样的查询：

```
em.createQuery(
        "SELECT NEW EmpMenu(p.name, p.department.name) "
            + "FROM Project p ").getResultList(); 
```

也可以通过规范来做到这一点：

```
public Predicate toPredicate(Root<T> root, CriteriaQuery<?> query,
        CriteriaBuilder cb) {

    return ???;
} 
```

提前致谢！

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-15T18:55:27.157

是的，Criteria API 确实具有类似于 JPQL 构造函数表达式的构造。结果类是通过CriteriaBuilder 中的[构造方法设置的。](http://docs.oracle.com/javaee/6/api/javax/persistence/criteria/CriteriaBuilder.html#construct%28java.lang.Class,%20javax.persistence.criteria.Selection...%29)

您表示为条件查询的 JPQL 查询是：

```
CriteriaBuilder cb...
CriteriaQuery<EmpMenu> q = cb.createQuery(EmpMenu.class);
  Root<Project> c = q.from(Project.class);
  q.select(cb.construct(EmpMenu.class,
      c.get("name"), c.get("department").get("name"))); 
```

# php - PHP Error: Undefined offset error within foreach loop

> ID：13400414
> 
> 赞同：0
> 
> 时间：2012-11-15T15:13:49.900
> 
> 标签：php, arrays, foreach, compiler-errors

I have a csv file which I am trying to turn into a different structured array. First, I turn it into an array named all_data() constructed like this:

```
$data = file_get_contents($id . '.csv');
      $data_array = explode("\n", $data);
      foreach($data_array AS $data){
            $all_data[] = explode("\t", $data);
      } 
```

results look like this:

```
 array(5) {
      [0]=>
      array(2) {
        [0]=>
        string(10) "2012-11-14"
        [1]=>
        string(2) "10"
      }
      [1]=>
      array(2) {
        [0]=>
        string(10) "2012-11-14"
        [1]=>
        string(2) "10"
      }
      [2]=>
      array(2) {
        [0]=>
        string(10) "2012-11-14"
        [1]=>
        string(2) "10"
      }
      [3]=>
      array(2) {
        [0]=>
        string(10) "2012-11-14"
        [1]=>
        string(2) "10"
      }

      [4]=>
      array(1) {
        [0]=>
        string(0) ""
      }

} 
```

And then I turn it into im_arr() with the following code:

```
 foreach($all_data as $key => $value){
            $im_arr[$key][$value[0]] = $value[1];
       } 
```

The results:

```
array(5) {
  [0]=>
  array(1) {
    ["2012-11-14"]=>
    string(2) "10"
  }
  [1]=>
  array(1) {
    ["2012-11-14"]=>
    string(2) "10"
  }
  [2]=>
  array(1) {
    ["2012-11-14"]=>
    string(2) "10"
  }
  [3]=>
  array(1) {
    ["2012-11-14"]=>
    string(2) "10"
  }

  [4]=>
  array(1) {
    [""]=>
    NULL
  }
} 
```

And then, finally another foreach loop gives me the results I am looking for:

```
foreach ($im_arr as $val) {
    foreach ($val as $key => $val2) {
        $im_data[$key]=$val2;
    }
       } 
```

With the result for im_data() being:

```
array(2) {
  ["2012-11-14"]=>
  string(2) "10"
  [""]=>
  NULL
} 
```

Which would be perfect, since the array im_data() is exactly what I would like to get out of all_data(). However, when I am trying to put this code in another part of the program it doesn't work, and I am thinking it might be because of the warnings I receive:

"PHP Notice: Undefined offset: 1 in ... on line 93"

Line 93 corresponds to this line:

```
$im_arr[$key][$value[0]] = $value[1]; 
```

Here is the complete part of the code:

```
 $all_data = array();
  $im_arr=array();

$data = file_get_contents($id . '.csv');
      $data_array = explode("\n", $data);
      foreach($data_array AS $data){
            $all_data[] = explode("\t", $data);
      }

      foreach($all_data as $key => $value){
            $im_arr[$key][$value[0]] = $value[1];  //the line for the error
       }
    $im_data=array();  

foreach ($im_arr as $val) {
    foreach ($val as $key => $val2) {
        $im_data[$key]=$val2;
    }
       }

var_dump($im_data); 
```

I know there are many many questions posted for this same error, but I couldn't figure out the problem with this particular piece of code.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:28:17.283

This is the problem:

```
[4]=>
  array(1) {
    [0]=>
    string(0) ""
  } 
```

Just check that the data is set, and isn't empty before adding them to `$im_arr`:

```
foreach ($all_data as $key => $value) { 
  if (isset($value[0]) && isset($value[1]) && !empty($value[0]) && !empty($value[1])) {
    $im_arr[$key][$value[0]] = $value[1];
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:39:13.513

For every foreach i would pre-check if the first argument is an array

For instance ;

```
//Just add line below for every foreach (and add any required else statement if needed)
if(is_array($im_arr))
foreach ($im_arr as $val) {
    if(is_array($val))
    foreach ($val as $key => $val2) {
        $im_data[$key]=$val2;
    }
} 
```

# c# - 表单打开时关注文本框

> ID：13400417
> 
> 赞同：2
> 
> 时间：2012-11-15T15:13:55.337
> 
> 标签：c#, winforms

> **可能重复：**
> [表单加载的焦点问题](https://stackoverflow.com/questions/13388955/focus-issue-on-form-load)

我有一个用 VB 6.0 或 C++ 编写的 Activex 控件，可能在 C# WinForms 程序中将它用作 AxInterop，它非常像一个文本框，但有一些特殊的逻辑等......我们已经将它添加到工具栏...当表单加载时，我希望键盘焦点位于其中，因此我使用**了 .Focus**和**.Select**方法，但它仍然没有获得焦点。当我从 VS IDE 运行程序时：它获得了焦点。当我在 IDE 之外运行 .EXE 文件时：它没有获得焦点。

你怎么看？

这也是它的屏幕截图：

![在此处输入图像描述](../Images/db91f138234bc66e023094332e4efba9.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:44:54.867

当您尝试赋予它焦点时，您确定该组件是可见的吗？

如果您尝试在[`Form.Load`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.load.aspx)事件处理程序中进行聚焦，请尝试将其移至[`Form.Shown`](http://msdn.microsoft.com/en-us/library/system.windows.forms.form.shown.aspx)处理程序，或者也许[`Control.Enter`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enter.aspx).

行为上的差异可能归结为时间问题。[在 MSDN 上](http://msdn.microsoft.com/en-us/library/86faxx0d.aspx)查看打开表单上事件发生的顺序以获得更多想法。

# c# - 用于删除单词格式的正则表达式模式

> ID：13400421
> 
> 赞同：3
> 
> 时间：2012-11-15T15:13:58.917
> 
> 标签：c#, html, regex

我在使用正则表达式模式替换 HTML 标记中的项目时遇到问题。我要替换的值是：

```
<!--[if mso 9]-->
<style>
 p.MsoNormal<br />
 {margin-left:18.75pt;}<br />
</style>
<!--[endif]--> 
```

和

```
class="MsoNormal" 
```

我不是最擅长使用正则表达式，到目前为止我想出的模式是：

1.  `<!--(.*?)-->`
2.  `class=\"msonormal\"`
3.  `class=\"MsoNormal\"`

第 1 项删除以开头`<!--`和结尾的任何内容，`-->`但仅在不删除所有实例时才删除。

我认为第 2 项和第 3 项根本不起作用。

我在这里找到了一些关于模式的信息：

[有没有办法从 FCKEditor 中删除所有不必要的 MS Word 格式](https://stackoverflow.com/questions/1349837/is-there-a-way-to-strip-all-unnecessary-ms-word-formatting-from-fckeditor)

我要删除的完整文本列表如下：

```
 <!--[if !mso]><style>v\:* {behavior:url(#default#VML);}
o\:* {behavior:url(#default#VML);}
w\:* {behavior:url(#default#VML);}
.shape {behavior:url(#default#VML);}
</style><![endif]-->
<title>Blank</title>
<style>
    <!--
/* Font Definitions */
@font-face
    {font-family:Helvetica;
    panose-1:2 11 6 4 2 2 2 2 2 4;}
@font-face
    {font-family:"Cambria Math";
    panose-1:2 4 5 3 5 4 6 3 2 4;}
@font-face
    {font-family:Calibri;
    panose-1:2 15 5 2 2 2 4 3 2 4;}
@font-face
    {font-family:Tahoma;
    panose-1:2 11 6 4 3 5 4 4 2 4;}
@font-face
    {font-family:"Arial Black";
    panose-1:2 11 10 4 2 1 2 2 2 4;}
@font-face
    {font-family:"Palatino Linotype";
    panose-1:2 4 5 2 5 5 5 3 3 4;}
@font-face
    {font-family:"Trebuchet MS";
    panose-1:2 11 6 3 2 2 2 2 2 4;}
@font-face
    {font-family:"Matura MT Script Capitals";
    panose-1:3 2 8 2 6 6 2 7 2 2;}
/* Style Definitions */
p.MsoNormal, li.MsoNormal, div.MsoNormal
    {margin-top:0in;
    margin-right:0in;
    mso-margin-bottom-alt:auto;
    margin-left:0in;
    font-size:10.0pt;
    font-family:"Helvetica","sans-serif";
    color:#FFFFCC;
    mso-believe-normal-left:yes;}
a:link, span.MsoHyperlink
    {mso-style-priority:99;
    color:blue;
    text-decoration:underline;}
a:visited, span.MsoHyperlinkFollowed
    {mso-style-priority:99;
    color:purple;
    text-decoration:underline;}
p
    {mso-style-priority:99;
    mso-margin-top-alt:auto;
    margin-right:0in;
    mso-margin-bottom-alt:auto;
    margin-left:0in;
    font-size:12.0pt;
    font-family:"Times New Roman","serif";}
p.MsoAcetate, li.MsoAcetate, div.MsoAcetate
    {mso-style-priority:99;
    mso-style-link:"Balloon Text Char";
    margin-top:0in;
    margin-right:0in;
    mso-margin-bottom-alt:auto;
    margin-left:0in;
    font-size:8.0pt;
    font-family:"Tahoma","sans-serif";
    color:#FFFFCC;}
p.MsoNoSpacing, li.MsoNoSpacing, div.MsoNoSpacing
    {mso-style-priority:1;
    margin:0in;
    margin-bottom:.0001pt;
    font-size:12.0pt;
    font-family:"Times New Roman","serif";}
span.BalloonTextChar
    {mso-style-name:"Balloon Text Char";
    mso-style-priority:99;
    mso-style-link:"Balloon Text";
    font-family:"Tahoma","sans-serif";
    color:#FFFFCC;}
span.EmailStyle21
    {mso-style-type:personal;
    font-family:"Arial","sans-serif";
    color:black;}
span.EmailStyle22
    {mso-style-type:personal;
    font-family:"Arial","sans-serif";
    color:#0F243E;}
span.EmailStyle23
    {mso-style-type:personal;
    font-family:"Calibri","sans-serif";
    color:#1F497D;}
span.EmailStyle24
    {mso-style-type:personal;
    font-family:"Arial","sans-serif";
    color:#0F243E;}
span.EmailStyle25
    {mso-style-type:personal;
    font-family:"Calibri","sans-serif";
    color:#1F497D;}
span.EmailStyle26
    {mso-style-type:personal;
    font-family:"Calibri","sans-serif";
    color:#1F497D;}
span.EmailStyle27
    {mso-style-type:personal;
    font-family:"Calibri","sans-serif";
    color:#1F497D;}
span.EmailStyle28
    {mso-style-type:personal;
    font-family:"Calibri","sans-serif";
    color:#1F497D;}
span.EmailStyle29
    {mso-style-type:personal;
    font-family:"Calibri","sans-serif";
    color:windowtext;}
span.EmailStyle30
    {mso-style-type:personal;
    font-family:"Calibri","sans-serif";
    color:#1F497D;}
span.EmailStyle31
    {mso-style-type:personal;
    font-family:"Calibri","sans-serif";
    color:#1F497D;}
span.EmailStyle33
    {mso-style-type:personal-reply;
    font-family:"Calibri","sans-serif";
    color:#1F497D;}
.MsoChpDefault
    {mso-style-type:export-only;
    font-size:10.0pt;}
@page WordSection1
    {size:8.5in 11.0in;
    margin:1.0in 1.0in 1.0in 1.0in;}
div.WordSection1
    {page:WordSection1;}
-->
</style>
<!--[if mso 9]-->
<style>
    p.MsoNormal
    {margin-left:18.75pt;}
</style>
<!--[endif]--><!--[if gte mso 9]>
<o:shapedefaults v:ext="edit" spidmax="1026" />
<![endif]--><!--[if gte mso 9]>

<p class="MsoNormal"><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: #1f497d;"><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal"><span style="font-size: 11pt; font-family: Calibri, sans-serif; color: #1f497d;"><o:p>&nbsp;</o:p></span></p>
<p class="MsoNormal"><o:p>&nbsp;</o:p></p> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:31:07.837

通常，当您希望 Regexp 在每个可能的实例上运行时，您需要添加“g”运算符，即全局。在 C# 中，您通常会使用[Regexp.matches()](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.matches.aspx)查找每个实例，然后对它们进行操作。

至于 class="MsoNormal"，我在您的文本中找不到任何实例。您确定要搜索正确的模式吗？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:43:41.370

试试这个模式来捕捉第一组项目：

```
\<\!\-\-\[i[\w\s\p{P}\p{S}]+if\]\-\-\> 
```

关键是要尽可能避免`.*`，因为它会吃掉整个输入字符串，因此结束标准不匹配。

对于第 2 次和第 3 次，您只需要转义`=`符号，如`\=`. 他们会很好，但是尝试以下模式也可以捕获其他`Mso*`类：

```
class\=\"Mso[^\"]+\" 
```

# c# - 从数据表查询中获取数据

> ID：13400422
> 
> 赞同：0
> 
> 时间：2012-11-15T15:14:06.830
> 
> 标签：c#, list

我一直在尝试获取以下查询的结果并将数据添加到列表中，以便我可以删除重复项

```
var w = sqlData.AsEnumerable().Where(data => data.Field<String>("slideNo") == "5")
                .Select(data=> data.Field<String>("QuestionStartText")); 
```

此信息根据列给出数据，我想通过变量并将每个 inderviual 字符串放入 lsit

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:17:29.283

```
return sqlData
           .AsEnumerable()
           .Where(data => data.Field<String>("slideNo") == "5"))
           .Select(data=> data.Field<String>("QuestionStartText"))
           .Distinct()
           .ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:23:09.163

试试这个：-

```
var w = sqlData.AsEnumerable().Where(data => data.Field<String>("slideNo") == "5")
                .Select(data=> data.Field<String>("QuestionStartText")).Distinct().ToList(); 
```

# c# - 多个 For 循环

> ID：13400424
> 
> 赞同：0
> 
> 时间：2012-11-15T15:14:07.847
> 
> 标签：c#, for-loop

**编辑：**我已经更新了我的问题，我知道我可以将循环而不是 4 增加到 12，但我有单独的三个 for 循环的原因是因为这个；迭代第一个循环后，我必须单击轮播才能进入下一个迭代，因为您可以看到我更新的代码。- 抱歉，我在复制/粘贴时错过了代码。

我想遍历行，我的总行数是 3，每行有 4 列，例如：

```
row 1 has 4 columns
row 2 has 4 columns
row 3 has 4 columns 
```

我创建了 3 个单独的 for 循环并且我的代码可以工作，但我相信我的代码还有改进的空间，它可以在一个循环中而不是三个循环中吗？

这是代码：

```
//first row

for (int j = 0; j < 4; j++) 
{  
   string _image = String.Format("id('gen{0}')/a[{1}]/img", j, "1");                 
   string _text = String.Format("id('gen{0}')/a[{1}]", j, "2");
   ...........
   WaitForElement(By.XPath(_text)).Click();
}

_carouselDot = String.Format("id('HomePage1_Carousel1')/div/ul/li[{0}]/a", 2);
WaitForElement(By.XPath(_carouselDot)).Click();

//second row
for (int j = 4; j < 8; j++) 
{  
   string _image = String.Format("id('gen{0}')/a[{1}]/img", j, "1");                 
   string _text = String.Format("id('gen{0}')/a[{1}]", j, "2");
   ...........
   WaitForElement(By.XPath(_text)).Click();
}

_carouselDot = String.Format("id('HomePage1_Carousel1')/div/ul/li[{0}]/a", 3);
WaitForElement(By.XPath(_carouselDot)).Click();

//third row
for (int j = 8; j < 12; j++) 
{  
   string _image = String.Format("id('gen{0}')/a[{1}]/img", j, "1");                 
   string _text = String.Format("id('gen{0}')/a[{1}]", j, "2");
   ...........
   WaitForElement(By.XPath(_text)).Click();
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T15:16:46.733

是的，你可以有一个从 0 到 12 的循环......

```
for (int j = 0; j < 12; j++) 
{  
   string _image = String.Format("id('gen{0}')/a[{1}]/img", j, "1");                 
   string _text = String.Format("id('gen{0}')/a[{1}]", j, "2");
   ...........
   WaitForElement(By.XPath(_text)).Click();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T15:17:27.310

像这样？

```
for (int i = 0; i < 3; i++) 
{  
   for (int j = 0; j < 4; j++)
   { 
        code here
   }
} 
```

编辑：

因为您编辑了您的问题，所以现在看起来更好：

```
for (int i = 0; i < 12; i++)
       { 
            string _image = String.Format("id('gen{0}')/a[{1}]/img", j, "1");                 
            string _text = String.Format("id('gen{0}')/a[{1}]", j, "2");
            ...........
            WaitForElement(By.XPath(_text)).Click();

            if (i % 4 == 0)
            {
                _carouselDot = String.Format("id('HomePage1_Carousel1')/div/ul/li[{0}]/a", 2);
                WaitForElement(By.XPath(_carouselDot)).Click();
            }
       } 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-15T15:17:08.307

除了 j 的边界之外，我认为这三个块之间没有区别；那么为什么你不能只做一个循环呢？

```
for (int j = 0; j < 12; j++) 
... 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-15T15:16:51.560

这有什么问题——

```
for (int j = 0; j < 12; j++) 
{  
   string _image = String.Format("id('gen{0}')/a[{1}]/img", j, "1");                 
   string _text = String.Format("id('gen{0}')/a[{1}]", j, "2");
   ...........
   WaitForElement(By.XPath(_text)).Click();

   if(i % 4 == 3 && i != 11)
   {
      _carouselDot = String.Format("id('HomePage1_Carousel1')/div/ul/li[{0}]/a",
                                                                 (i/4 + 2));
       WaitForElement(By.XPath(_carouselDot)).Click();
   }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T15:20:20.627

您可以使用两个嵌套`for`块巧妙而有效地做到这一点：

```
int rows = 3;
int cols = 4;
for (int i = 0; i < rows; i++) 
{  
    for (int j = 0; j < cols; j++)
    { 
        int n = (cols * i) + j;
        string _image = String.Format("id('gen{0}')/a[{1}]/img", n, "1");                
        string _text = String.Format("id('gen{0}')/a[{1}]", n, "2");
        ...........
        WaitForElement(By.XPath(_text)).Click();
    }
    if (i < rows - 1) 
    {
        _carouselDot = String.Format("id('HomePage1_Carousel1')/div/ul/li[{0}]/a", 2);
        WaitForElement(By.XPath(_carouselDot)).Click();
    }
} 
```

这样很明显，您正在处理三个单独的行，并且您可以根据需要使用更简单的`if`子句在每行的末尾或开头进行特殊处理。

针对新问题进行了编辑，表明您可以`if()`在内部`for`块之后执行。

此外，避免代码中出现幻数是一种很好的做法。这样可以避免错误，例如，如果您需要更改行数或列数，您只需更改一个变量。

# php - 如何在 mssql 和 Php 中转义 & 和 '？

> ID：13400427
> 
> 赞同：0
> 
> 时间：2012-11-15T15:14:14.463
> 
> 标签：php, sql-server, preg-replace

我很确定在这种情况下我需要类似 preg_replace 的东西，但我不确定如果是的话，应该把它放在哪里。我有一个页面，允许人们搜索员工目录（PHP 和 MSSQL）。他们可以按姓氏、建筑物或部门进行搜索。姓氏和建筑物都很好，但我的三个部门有问题，其中两个有 & （即 Grants & Planning），当您单击该部门时，它不会返回任何结果，我认为是因为它没有将“&计划”识别为整个字符串的一部分。我遇到的另一个问题是我有一个部门中有一个 ' 并且它会引发错误

*   PHP 警告：mssql_query() [function.mssql-query]：消息：第 1 行：“s”附近的语法不正确。（严重性 15）在 C:\Inetpub\wwwroot\DACC\directory\dept.php 第 179 行

    *PHP 警告：mssql_query() [function.mssql-query]：消息：字符串“ORDER BY Lastname”之前的未闭合引号。（严重性 15）在 C:\Inetpub\wwwroot\DACC\directory\dept.php 第 179 行*

第179行是这个... `$query = mssql_query("SELECT * FROM directory WHERE Displayname = '$department' ORDER BY Lastname");`

这是按部门查询页面的其余代码....如果有人可以帮助我，我将不胜感激！`

```
$department = $_GET['dept'];

 // This will evaluate to TRUE so the text will be printed.
 if (isset($department)) {
 $query = mssql_query("SELECT * FROM directory WHERE Displayname = '$department' ORDER BY Lastname");//$query = mssql_query("SELECT * FROM directory WHERE department IN (SELECT id FROM departments WHERE name='$department') ORDER BY Lastname");
 $query2 = mssql_query(
 "SELECT TOP 1 directory.FirstName, directory.Lastname, directory.email,
 directory.phone, directory.office, directory.title, directory.displayname,                departments.id AS dept_id, departments.name AS dept_name, departments.url AS dept_url
 FROM directory
 INNER JOIN departments on directory.displayname = departments.name
 WHERE directory.displayname = '$department'
 ORDER BY directory.LastName");
 $numofrows = @mssql_num_rows($query);
 // Check if there were any records
 if (!mssql_num_rows($query)) {
echo 'No records found';
echo '<br /><a href="/directory/">Go Back</a>';
 } else {
 while($row1 = mssql_fetch_array($query2))
   {
  $dept_var = $row1['dept_name'];
 $dept_id = $row1['dept_id'];
 $dept_url = $row1['dept_url'];
    print "<h3><a href=\"$dept_url\">$dept_var</a></h3>";
 }
 print "<table id=\"directory_table\" width=\"480\">
 <tr>
 <th>Name</th>
 <th>Email</th>
 <th>Phone</th>
 <th>Office</th>
 <th>Title</th>
 </tr>";    
 for($i = 0; $i < $numofrows; $i++) 
{
$row = mssql_fetch_array($query);
    if($i % 2) 
    { 
    print '<tr bgcolor="#ffffff">';
    } 
else 
    { 
    print '<tr bgcolor="#eeeeee">';
    }

    print "<td>" . $row['Firstname'] . " " . $row['Lastname'] . "&nbsp;&nbsp;</td>";
    print "<td><a href=\"mailto:" . $row['email'] . "\">" . $row['email']. "</a>&nbsp;&nbsp;</td>";
    print "<td>" . $row['phone'] . "&nbsp;&nbsp;</td>";
    print "<td>" . $row['Office'] . "&nbsp;&nbsp;</td>";
    print "<td>" . $row['Title'] . "&nbsp;&nbsp;</td>";
    print "</tr>";
}
 print "</table>";
 }
 // Free the query result
 mssql_free_result($query);
 }
 else
 print "No Search Defined";
 ?> 
```

**编辑显示更改** 确定尝试了这个：

```
 $serverName = "localhost"; //serverName\instanceName
    $connectionInfo = array( "Database"=>"DACC", "UID"=>"daccweb", "PWD"=>"go");
    $conn = sqlsrv_connect( $serverName, $connectionInfo);

if( $conn ) {
 echo "Connection established.<br />";
}else{
 echo "Connection could not be established.<br />";
 die( print_r( sqlsrv_errors(), true));
}
//$conn = sqlsrv_connect("connection string here");
$queryParams = array($department);

//Selector links
print "<a href=\"/directory/\">Go back to main search</a><br />";
print "<u>Search for Employees:</u><br /><br />\n";

print "<br />";

//$officeloc = $_GET['building'];
$department = $_GET['dept'];

// This will evaluate to TRUE so the text will be printed.
if (isset($department)) {

$query = sqlsrv_query($conn, "SELECT * FROM directory WHERE Displayname = ? ORDER BY Lastname", $params);

$query2 = sqlsrv_query($conn, "SELECT TOP 1 directory.FirstName, directory.Lastname, directory.email,
directory.phone, directory.office, directory.title, directory.displayname,
 departments.id AS dept_id, departments.name AS dept_name, departments.url AS dept_url
 FROM directory
INNER JOIN departments on directory.displayname = departments.name
WHERE directory.displayname = ?
ORDER BY directory.LastName", $params); 
```

*NEW EDIT*
查询运行但不回显/打印结果 $query = sqlsrv_query($conn, "SELECT * FROM directory WHERE Displayname = ? ORDER BY Lastname", $params);

```
$query2 = sqlsrv_query($conn, "SELECT TOP 1 directory.FirstName, directory.Lastname, directory.email,
directory.phone, directory.office, directory.title, directory.displayname,
departments.id AS dept_id, departments.name AS dept_name, departments.url AS dept_url
FROM directory
INNER JOIN departments on directory.displayname = departments.name
WHERE directory.displayname = ?
ORDER BY directory.LastName", $params);

$numofrows = @@sqlsrv_has_rows($query);

// Check if there were any records
if (!@sqlsrv_has_rows($query)) {
echo 'No records found';
echo '<br /><a href="/directory/">Go Back</a>';
} else {

while($row1 = sqlsrv_fetch_array($query2))
  {
    $dept_var = $row1['dept_name'];
    $dept_id = $row1['dept_id'];
    $dept_url = $row1['dept_url'];

   print "<h3><a href=\"$dept_url\">$dept_var</a></h3>";
  //echo "</h3><br />";
    }

    print "<table id=\"directory_table\" width=\"480\">
    <tr>
<th>Name</th>
<th>Email</th>
<th>Phone</th>
<th>Office</th>
<th>Title</th>

</tr>"; 
for($i = 0; $i < $numofrows; $i++) 
{
$row = sqlsrv_fetch_array($query);
    if($i % 2) 
    { 
    print '<tr bgcolor="#ffffff">';
    } 
else 
    { 
    print '<tr bgcolor="#eeeeee">';
    }

    print "<td>" . $row['Firstname'] . " " . $row['Lastname'] . "&nbsp;&nbsp;</td>";
    print "<td><a href=\"mailto:" . $row['email'] . "\">" . $row['email']. "</a>&nbsp;&nbsp;</td>";
    print "<td>" . $row['phone'] . "&nbsp;&nbsp;</td>";
    print "<td>" . $row['Office'] . "&nbsp;&nbsp;</td>";
    print "<td>" . $row['Title'] . "&nbsp;&nbsp;</td>";
    print "</tr>";
}
print "</table>";
}

// Free the query result
sqlsrv_free_stmt($query);
}
else
print "No Search Defined"; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:17:06.123

你可以在 PHP 和 MSSQL 中使用 SQL 参数，看看这个：

[http://blogs.msdn.com/b/sqlphp/archive/2008/09/30/how-and-why-to-use-parameterized-queries.aspx](http://blogs.msdn.com/b/sqlphp/archive/2008/09/30/how-and-why-to-use-parameterized-queries.aspx)

您的参数值将自动转义，无需您进行任何工作。

您需要使用 sqlsrv 驱动程序，请参阅：[http ://www.php.net/manual/en/sqlsrv.setup.php](http://www.php.net/manual/en/sqlsrv.setup.php)

为了获得行数，我们还需要指定一些查询选项。（看看[http://www.php.net/manual/en/function.sqlsrv-num-rows.php](http://www.php.net/manual/en/function.sqlsrv-num-rows.php)和[http://msdn.microsoft.com/en-us/library/hh487160.aspx](http://msdn.microsoft.com/en-us/library/hh487160.aspx)）

```
$conn = sqlsrv_connect("connection string here");
$queryParams = array($department);
$queryOptions = array( "Scrollable" => "buffered" );
$query = sqlsrv_query($conn, "SELECT * FROM directory WHERE Displayname = ? ORDER BY Lastname", $queryParams, $queryOptions);

$query2 = sqlsrv_query($conn, "SELECT TOP 1 directory.FirstName, directory.Lastname, directory.email,
directory.phone, directory.office, directory.title, directory.displayname,
departments.id AS dept_id, departments.name AS dept_name, departments.url AS dept_url
FROM directory
INNER JOIN departments on directory.displayname = departments.name
WHERE directory.displayname = ?
ORDER BY directory.LastName", $queryParams, $queryOptions);

$numofrows = sqlsrv_num_rows($query); 
```

请注意，您构建数组的顺序必须与`?`查询中符号出现的顺序相匹配。由于您在每个查询中只使用一个参数并且它们是相同的，因此您只需要构建一个数组。

然后，您可以用 sqlsrv 函数替换所有 mssql 函数，有关函数列表及其用法，请参阅文档：[http ://www.php.net/manual/en/ref.sqlsrv.php](http://www.php.net/manual/en/ref.sqlsrv.php)

# jquery - 在 wookmark JQuery 插件中设置项目的高度

> ID：13400436
> 
> 赞同：1
> 
> 时间：2012-11-15T15:14:58.413
> 
> 标签：jquery, jquery-plugins

使用 Wookmark JQuery 插件渲染图块布局时遇到问题。这主要是因为每个项目的内容是图像和文本的组合（或者在某些情况下只是文本），因此内部高度是未知的。

我原以为我可以`<li class="nItem">`通过更新`applyLayout()`函数来设置高度来解决问题：

```
function applyLayout() {
  if(handler) handler.wookmarkClear();

  //set the height of the li
  $('#tiles li').each(function(){$(this).height($(this).height())})

  options = {
    autoResize: true,
    container: $('#gridMain'),
    offset: 10,
    itemWidth: 222
  };
  handler = $('#tiles li');
  handler.wookmark(options);
}; 
```

不幸的是，有时，某些项目内容仍会渗入其下方的下一个项目。

有没有办法处理磁贴中的动态内容？或者有人对修复有任何建议吗？

非常感谢

@贾斯汀里德

# vba - 使用 VBA 复制和粘贴立即下一行

> ID：13400437
> 
> 赞同：0
> 
> 时间：2012-11-15T15:14:59.277
> 
> 标签：vba

我有一个像这种格式的数据集：

```
 varname  Flag  Status
Product1    Y   
Product2    N   
Product3    N   
Product4    N   
Product5    N   
Product6    N   
Product7    Y   
Product8    Y   
Product9    Y   
Product10   Y 
```

现在，对于任何产品标志是“Y”，那么它应该在它旁边输入一行，然后复制该行并立即粘贴到该行下方。新表应如下所示：

```
varname   Flag  Status
Product1    Y   
Product1    Y   SOLD
Product2    N   
Product3    N   
Product4    N   
Product5    N   
Product6    N   
Product7    Y   
Product7    Y   SOLD
Product8    Y   
Product8    Y   SOLD
Product9    Y   
Product9    Y   SOLD
Product10   Y   
Product10   Y   SOLD 
```

此状态也应更新。我尝试了以下代码。但不幸的是，这段代码无法创建表。如果有人可以帮助我找到解决方案，我将不胜感激。

```
Sub RegInt2()
    Dim lngRow As Long
    Dim LR As Long
    For lngRow = Worksheets("Sheet1").UsedRange.Rows.Count To 1 Step -1
          LR = Worksheets("Sheet1").Range("A" & Rows.Count).End(xlUp).Row
        If UCase$(Worksheets("Sheet1").Cells(lngRow, 2).Value) = "R" Then
            Worksheets("Sheet1").Range("A" & CStr(lngRow + 1)).Select
            Selection.EntireRow.Insert , CopyOrigin:=xlFormatFromLeftOrAbove
            End If
            If UCase$(Worksheets("Sheet1").Cells(lngRow, 2).Value) = "R" Then
            Worksheets("Sheet1").Range("A" & LR).Copy Destination:=Sheets("Sheet1").Range("A" & Rows.Count).End(xlUp).Offset(1)

        End If
        Next

End Sub 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:24:11.990

这个怎么样？

```
Sub DuplicateSoldProducts()

Dim ProductRange As Range
Dim ProductCell As Range

Dim SourceSheet As Worksheet
Dim TargetSheet As Worksheet

'create a new worksheet
Set SourceSheet = Worksheets("Products")
Set TargetSheet = Worksheets.Add

SourceSheet.Select
Range("A1").Select

'put in titles
Range(ActiveCell, ActiveCell.End(xlToRight)).Copy
TargetSheet.Select
TargetSheet.Paste

SourceSheet.Select
Application.CutCopyMode = False

'set reference to block of products
Set ProductRange = Range(ActiveCell, ActiveCell.End(xlDown))

'go through product by product
For Each ProductCell In ProductRange.Cells

    'create row (and maybe copy) on target sheet
    TargetSheet.Select
    ActiveCell.Value = ProductCell.Value
    ActiveCell.Offset(0, 1).Value = ProductCell.Offset(0, 1).Value

    'go to next cell
    ActiveCell.Offset(1, 0).Select

    If UCase(ProductCell.Offset(0, 1).Value) = "Y" Then

        'create copy?
        ActiveCell.Value = ProductCell.Value
        ActiveCell.Offset(0, 1).Value = ProductCell.Offset(0, 1).Value
        ActiveCell.Offset(0, 2).Value = "Sold"

        'go to next cell
        ActiveCell.Offset(1, 0).Select

   End If

Next ProductCell

Range("A1").CurrentRegion.EntireColumn.AutoFit
Range("A1").Select

MsgBox "Done!" 
```

按 F8 逐行查看它是如何工作的！

# c - 失踪 ; 在“类型”错误之前

> ID：13400441
> 
> 赞同：0
> 
> 时间：2012-11-15T15:15:11.113
> 
> 标签：c, compiler-construction

这是我的代码的一部分，你知道是什么导致了这个缺失吗？在“类型”错误之前？当我在 main() 函数中删除 sort(arr, size) 时它消失了......

```
#include <stdio.h>

    void sort(int*, int);

    int main() {
        int arr[] = {5, 1, 3, 0, 9};
        int size = sizeof(arr) / sizeof(arr[0]);

        sort(arr, size);

        int i;
        for(i = 0; i < size; i++)
            printf("%d", arr[i]);

        getchar();
        return 0;
    }

    void sort(int *array, int size) {
        // ...
    } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:17:30.657

如果您使用的是正确的老式 C 语言，则无法在函数调用后定义变量。

所以就这样做：

```
#include <stdio.h>

    void sort(int*, int);

    int main() {
        int arr[] = {5, 1, 3, 0, 9};
        int size = sizeof(arr) / sizeof(arr[0]);
        int i;

        sort(arr, size);

        for(i = 0; i < size; i++)
            printf("%d", arr[i]);

        getchar();
        return 0;
    }

    void sort(int *array, int size) {
        // ...
    } 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T15:17:20.070

您很可能使用的是严格 C89 的编译器，因此不允许您在同一块中的非定义代码之后定义变量。移动`int i;`上面的`sort`调用，它应该再次工作：

```
int main() {
    int arr[] = {5, 1, 3, 0, 9};
    int size = sizeof(arr) / sizeof(arr[0]);
    int i;

    sort(arr, size);

    for(i = 0; i < size; i++)
        printf("%d", arr[i]);

    getchar();
    return 0;
} 
```

或者更好的是，如果您的编译器支持，请考虑使用 C99 标准。这甚至可以让你内联`int i`，即像这样：`for(int i = 0; i < size; i++)`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T15:17:24.900

你不能在 C99 C 之前的代码中声明变量。移动你的`int i`; 到块的开头，靠近其余的变量声明。

# swing - Swing：将一组组件放置在一个框架中

> ID：13400444
> 
> 赞同：2
> 
> 时间：2012-11-15T15:15:13.143
> 
> 标签：swing, layout, grouping, jcomponent

准确和简短地说：是否可以用一组组件（如复选框、单选按钮等）来布局框架容器，而不是将它们一个一个地添加到框架中？因此，将它们放置在框架中会容易得多。

```
private void initializaUI(){
    setSize(700, 600);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    //Panel container to wrap checkboxes and radio buttons
    JPanel panel = new JPanel(null);
    JPanel checkBoxPanel = new JPanel(new BoxLayout(panel, defaultCloseOperation, null));
    JPanel radioPanel_1 = new JPanel(new GridLayout());
    JPanel radioPanel_2 = new JPanel(new GridLayout());

    //Text field to display order
    JTextField orderField = new JTextField(20);
    orderField.setBounds(100, 100, 100, 20);

    //Button to process place the order
    JButton button = new JButton("Process Selection");
    button.setBounds(300, 100, 100, 40);

    //toppings check boxes
    checkBoxPanel.setVisible(true);
    checkBoxPanel.setBounds(100, 200, 100, 50);
    String Topping[] = {"Tomato", "Green Pepper", "Black Olives", "Mushrooms", "Extra Cheese", "Pepperoni", "Sausage"};
    checkBoxPanel.add(new JCheckBox("Tomato"));
    checkBoxPanel.add(new JCheckBox(Topping[1]));
    checkBoxPanel.add(new JCheckBox(Topping[2]));
    checkBoxPanel.add(new JCheckBox(Topping[3]));
    checkBoxPanel.add(new JCheckBox(Topping[4]));
    checkBoxPanel.add(new JCheckBox(Topping[5]));
    checkBoxPanel.add(new JCheckBox(Topping[6]));       
    //sizes radio buttons
    String size[] = {"Small:$6.50", "Medium:$8.50", "Large:$10.00"};
    JRadioButton radio = new JRadioButton(size[0]);
    radio.setBounds(100, 50, 100, 20);
    //  
    panel.add(checkBoxPanel);
    //
    setContentPane(panel); 
```

这是应该根据用户输入执行一些操作的代码。请帮助我使其清晰易读。这是错误：“字段 Component.x 不可见”

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:19:38.257

是的，这就是 a[`JPanel`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JPanel.html)的用途。它是一个空容器，具有内部布局管理器，可以放置在 a `JFrame`（或 another `JPanel`）内的任何位置。所以，只是给你一个例子，你可以有：

```
JPanel checkBoxPanel = new JPanel(new GridLayout(..));
JPanel fieldsPanel = new JPanel(new BoxLayout(..));

checkBoxPanel.add(new JCheckBox(..));

fieldsPanel.add(new JTextField(..));

frame.setLayout(new BorderLayout());
frame.add(checkBoxPanel, BorderLayout.NORTH);
frame.add(..) 
```

# qt - 执行 Google 测试后，Jenkins 构建脚本退出

> ID：13400445
> 
> 赞同：8
> 
> 时间：2012-11-15T15:15:13.243
> 
> 标签：qt, jenkins, googletest

我正在通过 Jenkins 构建一个 Qt GUI 应用程序。我添加了 3 个构建步骤：

*   构建测试可执行文件
*   运行测试可执行文件
*   使用 gcovr 编译覆盖率报告

由于某种原因，运行测试可执行文件的 shell 任务在执行后停止。连简单的`echo`都跑不掉。测试使用 Google Test 编写并输出 xUnit XML 文件，这些文件在构建后进行分析。一些测试启动应用程序用户界面，所以我安装了 jenkins xvnc 插件来让它们运行。

构建任务如下：

**建造**

```
cd $WORKSPACE/projectfiles/QMake
sh createbin.sh 
```

**测试**

```
cd $WORKSPACE/bin
./Application --gtest_output=xml 
```

**覆盖报告**

```
cd $WORKSPACE/projectfiles/QMake/out
gcovr -x -o coverage.xml 
```

现在，`echo`第一个构建任务末尾的 an 已正确打印，但`echo`第二个构建任务末尾的 an 未正确打印。因此，第三个构建任务甚至没有运行，尽管 Google 测试输出是可见的。我认为问题可能在于某些 Google 测试失败，但为什么脚本会因为测试失败而停止执行？

也许有人可以提示我为什么第二个任务停止。

**编辑**

控制台输出如下所示：

```
Updating svn://repo/ to revision '2012-11-15T06:43:15.228 -0800'
At revision 2053
no change for svn://repo/ since the previous build
Starting xvnc
[VG5] $ vncserver :10

New 'ubuntu:10 (jenkins)' desktop is ubuntu:10

Starting applications specified in /var/lib/jenkins/.vnc/xstartup
Log file is /var/lib/jenkins/.vnc/ubuntu:10.log

[VG5] $ /bin/sh -xe /tmp/hudson7777833632767565513.sh
+ cd /var/lib/jenkins/workspace/projectfiles/QMake
+ sh createbin.sh
... Compiler output ...
+ echo Build Done
Build Done
[VG5] $ /bin/sh -xe /tmp/hudson4729703161621217344.sh
+ cd /var/lib/jenkins/workspace/VG5/bin
+ ./Application --gtest_output=xml
Xlib:  extension "XInputExtension" missing on display ":10".
[==========] Running 29 tests from 8 test cases.
... Test output ...
 3 FAILED TESTS
Build step 'Execute shell' marked build as failure
Terminating xvnc.
$ vncserver -kill :10
Killing Xvnc4 process ID 1953
Recording test results
Skipping Cobertura coverage report as build was not UNSTABLE or better ...
Finished: FAILURE 
```

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2012-11-15T19:21:24.103

通常，如果一个**Build Step**失败，其余的将不会被执行。

请注意日志中的这一行：

```
[VG5] $ /bin/sh -xe 
```

使`-x`shell 在执行之前在控制台中打印每个命令。
如果任何命令失败，`-e`则使 shell 退出并出错。

在这种情况下，“失败”将是任何单个命令的返回码不为 0。
您可以通过直接在机器上运行来验证这一点：

```
./Application --gtest_output=xml
echo $? 
```

如果`echo $?`显示为 0，则表示上一条命令成功完成。如果它显示其他任何内容，则表示来自上一个命令（来自 ./Application）的错误代码，Jenkins 会这样对待它。

现在，这里有几件事在起作用。`/tmp/hudson4729703161621217344.sh`首先，如果一个命令失败（默认行为），您的第二个构建步骤（本质上是一个临时的 shell 脚本）将设置为失败。当构建步骤失败时，Jenkins 将停止并导致整个工作失败。

`set +e`您可以通过添加到第二个构建步骤的顶部来修复此特定行为。这不会导致脚本（构建步骤）由于单个命令失败而失败（它将显示命令错误，然后继续）。

但是，脚本（构建步骤）的总体结果是最后一个命令的退出代码。由于在您的 OP 中，脚本中只有 2 个命令，并且最后一个命令失败，因此尽管`+x`您已添加，但它会导致整个脚本（构建步骤）被视为失败。请注意，如果您将 an 添加`echo`为第三个命令，这实际上会起作用，因为最后一个脚本命令 (echo) 是成功的，但是这种“解决方法”不是您所需要的。

您需要的是在脚本中添加适当的错误处理。考虑一下：

```
set +e
cd $WORKSPACE/bin && ./Application --gtest_output=xml
if ! [ $? -eq 0 ]; then
    echo "Tests failed, however we are continuing"
else
    echo "All tests passed"
fi 
```

脚本中发生了三件事：

1.  首先，我们告诉 shell 不要在个别命令失败时退出

2.  然后我在第二行添加了基本的错误处理。`&&`意思是“仅当前一个成功时才执行。你永远不知道，也许 bin 文件夹丢失了，或者其他任何可能发生的事情。顺便说一句，`./Application`内部工作在相同的错误代码上等于 0 原则`cd``&&`

3.  最后，现在对`./Application`. 如果结果不是 0，那么我们表明它失败了，否则我们表明它通过了。请注意，这是因为最后一个命令不是（可能）失败`./Application`，而是`echo`来自 if-else 的任何一种可能性，脚本的总体结果（构建步骤）将是成功的（即 0），并且下一个构建步骤将被执行。

顺便说一句，您也可以将所有 3 个构建步骤放入一个构建步骤中，并进行适当的错误处理。

是的...这个答案可能比要求的要长一点，但我希望您了解 Jenkins 和 shell 如何处理退出代码。

# android - 通过 httpPost 将 base64 图像上传到服务器时出现问题

> ID：13400450
> 
> 赞同：1
> 
> 时间：2012-11-15T15:15:31.610
> 
> 标签：android, json, heap-memory, android-image

我正在对一个应用程序进行原型设计，在该应用程序中，我使用 JSON 和 HttpPost 将本地 SQLite 数据库的全部内容发送到远程 MySQL 数据库。

一切都适用于文本数据。现在我向聚会添加了图像，尽管我可以将图像作为 base64 字符串添加到我发送的 JSON 中。我的图像是 800 x 600 像素，每个大小或多或少 500kb。

如果我将我的应用程序手动生成的 JSON 粘贴到网页上，那很好，我得到了我的图像和其他所有内容。

使用应用程序上传脚本，我尝试上传一个带有 4 个图像的 JSON 字符串，但应用程序卡在我的进度对话框中，Logcat 一遍又一遍地显示：

```
11-15 14:32:27.809: I/dalvikvm-heap(15562): Grow heap (frag case) to 21.964MB for 2680048-byte allocation
11-15 14:32:27.840: D/dalvikvm(15562): GC_CONCURRENT freed 1744K, 30% free 20666K/29447K, paused 2ms+3ms
11-15 14:32:27.879: D/dalvikvm(15562): GC_FOR_ALLOC freed 4362K, 39% free 18049K/29447K, paused 16ms
11-15 14:32:27.918: D/dalvikvm(15562): GC_FOR_ALLOC freed 0K, 33% free 19794K/29447K, paused 22ms
11-15 14:32:27.918: I/dalvikvm-heap(15562): Grow heap (frag case) to 21.964MB for 2680276-byte    allocation
11-15 14:32:27.958: D/dalvikvm(15562): GC_CONCURRENT freed 1744K, 30% free 20667K/29447K, paused 1ms+4ms
11-15 14:32:27.997: D/dalvikvm(15562): GC_FOR_ALLOC freed 4362K, 39% free 18049K/29447K, paused 17ms
11-15 14:32:28.028: D/dalvikvm(15562): GC_FOR_ALLOC freed 0K, 33% free 19795K/29447K, paused 17ms 
```

它会永远持续下去。我敢打赌，图像太大而无法以这种方式发送，和/或我在某处泄漏了内存。

将大尺寸图像与 JSON 数据一起上传到服务器的更好方法是什么？否则，如何避免内存泄漏？

代码很标准...

从光标到 JSON：

```
private JSONObject get_images_data_JSON(Cursor c) {

    JSONObject image_jo = new JSONObject();

    //get unit identifier
    long unit_identifier = c.getLong(c.getColumnIndex("_id"));

    //set unit details
    try {

        image_jo.put("_id", unit_identifier);
        image_jo.put("unit_id", c.getLong(c.getColumnIndex("unit_id")));

        //encode blob in Base64 for json parsing
        String encodedImage = Base64.encodeToString(c.getBlob(c.getColumnIndex("image")), Base64.DEFAULT);

        image_jo.put("image", encodedImage);
        image_jo.put("caption", c.getString(c.getColumnIndex("caption")));

    } catch (JSONException e) {
        e.printStackTrace();
    }

    return image_jo;

}//end get_images_data_JSON 
```

和 POST 功能：

```
public String postData(JSONArray array) {

    String responseMessage = "";

    //set connection timeout values
    HttpParams myParams = new BasicHttpParams();

    //set timeout in milliseconds until a connection is established
    HttpConnectionParams.setConnectionTimeout(myParams, 10000);

    //set timeout for waiting data
    HttpConnectionParams.setSoTimeout(myParams, 10000);
    HttpClient httpclient = new DefaultHttpClient(myParams);

    //Get a string out of the JSONArray
    String json = array.toString();

    try {

        HttpPost httppost = new HttpPost(URL);
        httppost.setHeader("Content-type", "application/json");

        StringEntity se = new StringEntity(json);
        se.setContentEncoding(new BasicHeader(HTTP.CONTENT_TYPE, "application/json"));
        httppost.setEntity(se);

        HttpResponse response = httpclient.execute(httppost);
        InputStream inputStream = response.getEntity().getContent();
        responseMessage = inputStreamToString(inputStream);

        //log out response from server
        longInfo(responseMessage);

    }
    //show error if connection not working
    catch (SocketTimeoutException e) {
        e.printStackTrace();
        responseMessage = "unreachable";

    }

    catch (ConnectTimeoutException e) {
        e.printStackTrace();
        responseMessage = "unreachable";

    }

    catch (Exception e) {
        e.printStackTrace();
        responseMessage = "unreachable";

    }

    return responseMessage;

} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:32:44.353

您的解决方案只是将所有要发送到内存的数据加载。这很难扩展。考虑改用多部分实体。

```
File image1;
MultipartEntity entity = new MultipartEntity();
entity.addPart("json", new StringBody(serializedJson, Charset.forName("UTF-8"));
entity.addPart("image1", new FileBody(image1, "application/octet-stream"); 
```

此示例显示了我即将发送磁盘上可用文件的情况。通过为 AbstractContentBody 创建自己的实现，您应该能够发送位于数据库中的内容，而不会消耗太多内存......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-19T13:59:28.887

对于任何来到这里的人，我按照 Vajk 的建议解决了所有问题，这是我的新 POST 功能：

```
public String postData(Cursor images, JSONArray json_array) {

    int counter = 0;
    String responseMessage = "";

    try {
        HttpClient httpclient = new DefaultHttpClient();
        HttpPost httppost = new HttpPost(URL);

        //convert JSON array to String
        String json_encoded_string = json_array.toString();

        //MultipartEntity entity = new MultipartEntity(HttpMultipartMode.BROWSER_COMPATIBLE);
        MultipartEntity entity = new MultipartEntity();

        //add json data
        entity.addPart("json", new StringBody(json_encoded_string));

        //get all images plus data and add them to the Multipart Entity

        for (images_cursor.moveToFirst(); !images_cursor.isAfterLast(); images_cursor.moveToNext()) {

            counter++;

            //Get image as byte array
            byte[] image_ba = images_cursor.getBlob(images_cursor.getColumnIndex("image"));
            long image_unit_id = images_cursor.getLong(images_cursor.getColumnIndex("unit_id"));
            String image_caption = images_cursor.getString(images_cursor.getColumnIndex("caption"));

            //add image to multipart
            entity.addPart("image" + counter, new ByteArrayBody(image_ba, "image" + counter + ".jpg"));

            //add unit _id to multipart
            entity.addPart("image_unit_id" + counter, new StringBody(String.valueOf(image_unit_id)));

            //add caption to multipart
            entity.addPart("image_caption" + counter, new StringBody(String.valueOf(image_caption)));

        }

        httppost.setEntity(entity);

        HttpResponse response = httpclient.execute(httppost);
        InputStream inputStream = response.getEntity().getContent();
        responseMessage = inputStreamToString(inputStream);

        //log out response from server
        longInfo(responseMessage);

    }
    //show error if connection not working
    catch (SocketTimeoutException e) {
        e.printStackTrace();
        responseMessage = "unreachable";

    }

    catch (ConnectTimeoutException e) {
        e.printStackTrace();
        responseMessage = "unreachable";

    }

    catch (Exception e) {
        e.printStackTrace();
        responseMessage = "unreachable";

    }

    return responseMessage;
} 
```

有人可能会觉得这很有用；）

# sql - 计算发票总数

> ID：13400452
> 
> 赞同：0
> 
> 时间：2012-11-15T15:15:38.853
> 
> 标签：sql, tsql, sql-server-2012

```
SELECT VendorState, VendorCity
FROM Vendors JOIN COUNT(*)InvoiceDate as TotalInvoices ON Invoices
WHERE VendorState = 'NV' AND 'MI' 
```

我上面的尝试根本不起作用：/我想让它显示

如果状态是 NV 或 MI，则来自 Vendors 表的 VendorState

供应商城

和每个城市的 TotalInvoices，最后在 TOTAL 中从 Invoices 表中的 InvoiceDate 中提取它的计数

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:20:39.893

您不能以这种方式连接表。您需要在两个表之间共享一个共同的值，例如供应商 ID 或其他东西。

首先，它是：

```
select a.vendorstate, a.vendorcity, sum(invoices) as 'the sum'
from vendors a inner join invoices b on a.vendorid = b.vendorid
group by a.vendorstate, a.vendorcity
where state in ('NV','MI') 
```

这与您的其他问题类似

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:20:20.080

尝试

SELECT count(InvoiceDate) as [NumberInvoices], VendorState, VendorCity FROM Vendors inner JOIN Invoices ON **Vendor PK*** = **Invoices FK** WHERE VendorState in ('NV', 'MI') group by VendorState, VendorCity

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:29:46.000

您需要在`Invoices`表上指定外键才能`Vendors`加入`Invoices`. 这是一个例子：

```
SELECT v.VendorState, v.VendorCity, COUNT(i.InvoiceDate) AS Invoices
FROM Vendors v WITH(NOLOCK)
JOIN Invoices i WITH(NOLOCK) ON i.VendorID = v.VendorID
WHERE v.VendorState IN ('NV', 'MI')
GROUP BY v.VendorState, v.VendorCity
ORDER BY v.VendorState, v.VendorCity 
```

显然，您需要将连接更改`i.VendorID = v.VendorID`为此处应有的任何键。

# c# - LINQ GroupBy，同时保留所有对象字段

> ID：13400453
> 
> 赞同：4
> 
> 时间：2012-11-15T15:15:51.150
> 
> 标签：c#, .net, linq, lambda

我目前有这个样本数据表：

```
ID  | Policy ID     |   History ID  | Policy name
1   |   1           |    0          | Test
2   |   1           |    1          | Test
3   |   2           |    0          | Test1
4   |   2           |    1          | Test1 
```

其中，我想按策略 ID 和历史 ID (MAX) 进行分组，所以我要保留的记录是 ID 的 2 和 4：

```
 ID   | Policy ID     |   History ID  | Policy name
    2   |   1           |    1          | Test
    4   |   2           |    1          | Test1 
```

我尝试在 LINQ 中执行此操作，并且每次都遇到相同的问题。我可以将我的实体分组，但总是将它们分组到一个我必须重新定义属性的组中，而不是让它们从我的 Policy 对象中保留下来。如：

```
var policies = _context.Policies.GroupBy(a => a.intPolicyId)
                                            .Select(group => new {
                                                PolicyID = group.Key,
                                                HistoryID = group.Max(a => a.intHistoryID)
                                            }); 
```

这只是带出一个对象列表，其中包含“策略 ID”和“历史 ID”。我想要从 Policies 对象返回的所有属性，而不必重新定义它们，因为该对象中有大约 50 多个属性。

我试过：

```
 var policies = _context.Policies.GroupBy(a => a.intPolicyId)
                                                    .Select(group => new {
                                                        PolicyID = group.Key,
                                                        HistoryID = group.Max(a => a.intHistoryID)
                                                        PolicyObject = group;
                                                    }); 
```

但这会出错。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:17:53.877

按复合键分组

```
_context.Policies.GroupBy(a => new {a.intPolicyId, *other fields*}).Select(
    group=> new {
        PolicyId = group.Key.intPolicyId,
        HistoryId = group.Max(intHistoryId),
        *other fields*
    }
); 
```

另一种方法 - 获取历史记录，而不是加入其余数据，像这样（不能开箱即用，需要一些改进）

```
var historyIDs = _context.Policies.GroupBy(a=>a.intPolicyId).Select(group => new {
                                            PolicyID = group.Key,
                                            HistoryID = group.Max(a => a.intHistoryID)
                                        });

var finalData = from h in historyIDs
                join p in _context.Policies on h.intPolicyId equals p.intPolicyId
                select new {h.HistoryId, *all other policy fields*} 
```

还有另一种方式，更简单，不需要大量输入:)：

```
var historyIDs = _context.Policies.GroupBy(a=>a.intPolicyId).Select(group => new {
                                            PolicyID = group.Key,
                                            HistoryID = group.Max(a => a.intHistoryID)
                                        });

var finalData = from h in historyIDs
                join p in _context.Policies on h.PolicyId equals p.intPolicyId && h.HistoryId equals p.HistoryId
                select p 
```

基本上它有点等价于下面的 SQL 查询：

```
select p.*
from Policy p
inner join (
    select pi.policyId, max(pi.historyId)
    from Policy pi
    group by pi.policyId
) pp on pp.policyId = p.policyId and pp.historyId = p.historyId 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:21:14.923

在 LINQ to Objects 中，我会这样做

```
var policies = _context.Policies
    .GroupBy(a => a.intPolicyId)
    .Select(g => g.OrderByDescending(p => p.intHistoryID).First()); 
```

但你的`_context`impleis 可能涉及一个数据库，我不能 100% 确定这会翻译。

基本上它按您所期望的策略 ID 分组，然后在每个组中按历史 ID 排序，并从每个组中选择具有最高历史 ID 的行。它返回的类型与`Policies`.

# android - Android中Application类的目的是什么

> ID：13400455
> 
> 赞同：19
> 
> 时间：2012-11-15T15:15:56.110
> 
> 标签：android

Application 类的目的到底是什么。将它扩展到自定义子类有什么好处 为什么要使用它？全局变量可以存储在任何其他类中实现与 Application 相同的目标吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T15:20:56.420

好问题！

您的应用程序是一个在您的活动和服务运行时始终运行的上下文。

它也是第一个被创建和最后一个被销毁的上下文。因此，它围绕着您的应用程序的生命周期。

您可以使用应用程序类作为共享数据或组件的一种方式（例如，用于依赖注入）。例如，如果您想在活动之间共享单例，您可以在应用程序类中创建实例并提供一个 getter，然后所有其他上下文都可以通过

```
((cast to your class)getApplicationContext()).getFoo(); 
```

在某些用例中，您甚至需要在启动第一个活动之前做一些事情，然后在应用程序类的 onCreate 方法中进行。

另一方面，你不应该依赖类的`onDestroy`方法`Application`，因为它并不总是被调用。Android 上没有这方面的合同。

但这种情况很少见，而且通常您不需要重写应用程序类。例如，可以通过 RoboGuice 或 Dagger 以其他方式实现依赖注入。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-15T15:19:24.287

有两件事使这个类非常有用：

1.  应用程序类在任何其他活动之前实例化。
2.  它包含应用程序上下文

上下文为我们带来了大量资源：我们可以找出一些设备属性、加载一些资源、启动 SQLite 数据库等等。

所有这些都发生在任何活动加载之前，并且所有这些都对活动全局可用。

我的意思的简单示例：

```
public class App extends Application{
    private static Resources sResources;

    //--I want to load strings resources from anywhere--
    public static String loadStringResource(int resID) {
        return sResources.getString(resID);
    }

    @Override
    public void onCreate() {
        super.onCreate();

        sResources = getResources();

        //---I want to load all preferences when my app starts---
        PreferenceManager.setDefaultValues(this,R.xml.prefs,false);

    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:19:39.963

扩展`Application`类允许您集成到应用程序的生命周期中。

这对于存储全局应用程序级信息也很有用（尽管保持活动“独立”通常很好）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T15:21:25.623

Application 类知道 Application Context 并在您的应用程序加载时加载，因此它在您的活动开始之前为应用程序生命周期保存适当的回调。您很可能不想扩展此类。

从 API 文档：

> 通常不需要子类化 Application。在大多数情况下，静态单例可以以更模块化的方式提供相同的功能。如果您的单例需要全局上下文（例如注册广播接收器），则可以为检索它的函数提供一个 Context，该上下文在首次构造单例时在内部使用 Context.getApplicationContext()。

[http://developer.android.com/reference/android/app/Application.html](http://developer.android.com/reference/android/app/Application.html)

# sql - Postgres：查找“从此表”外键（更快的替代方案）

> ID：13400457
> 
> 赞同：2
> 
> 时间：2012-11-15T15:15:59.287
> 
> 标签：sql, postgresql, postgresql-9.1

有没有更快的替代[方案](https://stackoverflow.com/questions/1152260/postgres-sql-to-list-table-foreign-keys)：

在我们的服务器上花费将近 1 分钟。

```
SELECT
    tc.constraint_name, tc.table_name, kcu.column_name, 
    ccu.table_name AS foreign_table_name,
    ccu.column_name AS foreign_column_name 
FROM 
    information_schema.table_constraints AS tc 
    JOIN information_schema.key_column_usage AS kcu ON tc.constraint_name = kcu.constraint_name
    JOIN information_schema.constraint_column_usage AS ccu ON ccu.constraint_name = tc.constraint_name
WHERE constraint_type = 'FOREIGN KEY' AND tc.table_name='mytable'; 
```

也许使用 pg_class 元数据？，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:58:23.617

有一个问题：一个外键可以在2个或更多列上（FOREIGN KEY (b, c) REFERENCES other_table (c1, c2)）。您需要首先指定如何处理这些键。

这是我用来获取所有外键的查询，但它仅适用于简单（一列）外键。

```
SELECT pgcon.conname as constraint_name, 
       cast(pgcon.conrelid as regclass) as table_name,
       cast(pgcon.confrelid as regclass) as foreign_table_name,
       pga1.attname as column_name,
       pga2.attname as foreign_column_name
FROM pg_constraint pgcon
JOIN pg_attribute pga1 on (pgcon.conrelid = pga1.attrelid
                       and pga1.attnum = any(pgcon.conkey))
JOIN pg_attribute pga2 on (pgcon.confrelid = pga2.attrelid
                       and pga2.attnum = any(pgcon.confkey))
WHERE pgcon.conrelid = cast('table_name_here' as regclass)
  AND pgcon.contype = 'f' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T23:09:41.077

要获得相同的结果：

```
SELECT conname
      ,c.conrelid::regclass AS table_name
      ,(SELECT string_agg(a.attname, ', ') FROM pg_attribute a
        WHERE  a.attrelid = c.conrelid
        AND    a.attnum = ANY(c.conkey)) AS columns
      ,c.confrelid::regclass
      ,(SELECT string_agg(a.attname, ', ') FROM pg_attribute a
        WHERE  a.attrelid = c.confrelid
        AND    a.attnum = ANY(c.confkey)) AS foreign_columns
FROM   pg_constraint c
WHERE  c.conrelid = 'mytable'::regclass
AND    c.contype = 'f'
ORDER  BY c.conname; 
```

涵盖源自该表的外*键*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T20:42:28.170

您可以使用以下查询：

```
SELECT conname, pg_get_constraintdef(oid)
  FROM pg_constraint
 WHERE confrelid='mytable'::regclass; 
```

列`confrelid`仅设置为外键并[包含引用的表](http://www.postgresql.org/docs/current/interactive/catalog-pg-constraint.html#AEN89267)。

这一点的灵感来自[这个 depesz 的帖子](http://www.depesz.com/2012/09/24/concurrent-reindex-of-all-indexes-in-database/)。

# web-services - 在这种情况下，哪种 URL 方案会更好？

> ID：13400458
> 
> 赞同：0
> 
> 时间：2012-11-15T15:16:05.467
> 
> 标签：web-services, url-rewriting, subdomain

我正在构建一个处理不同国家项目的网络服务。到目前为止，请求类似于`example.com/item.php?country=us&id=1234`

这个想法是使用友好的名称重写这些 uri。我正在考虑两种可能的选择：

1.  us.example.com/1234
2.  example.com/us/1234

我的偏好是＃1，但我想知道每种方法的优缺点是什么。顺便说一句，管理员对服务器的访问不会成为问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:20:08.017

您的第一个解决方案 (us.example.com/...) 需要使用 DNS 条目和主机标头。可能您必须为每个国家/地区创建不同的站点（取决于您的托管平台）。

您的第二种方法（example.com/us/...）更简单，可能需要更少的工作和维护。

# javascript - jQuery添加延迟

> ID：13400462
> 
> 赞同：0
> 
> 时间：2012-11-15T15:16:08.070
> 
> 标签：javascript, jquery

嗨，我想在 jquery 中添加延迟。我试图把`$('.fade_test').delay(5000);`它工作，但 div 后三个不是下一个开始的。

链接到[jsfiddle](http://jsfiddle.net/hb5rt/2/)

**HTML**

```
<div class="fadein">
<div class="fade_test">one <button id="toggler" class="playin">Pause</button></div>
<div class="fade_test">two <button id="toggler" class="playin">Pause</button></div>
<div class="fade_test">three <button id="toggler" class="playin">Pause</button></div>
</div>​ 
```

**CSS**

```
.fadein { position:relative; height:332px; width:500px; }
.fadein .fade_test { position:absolute; left:0; top:0; } 
```

**JS**

```
var pauseplay;    

function startFader() {

    $x = $(".fade_test:visible").fadeOut(1000);
    $next = $x.next();
    if ($next.length == 0)
        $next = $(".fade_test:first-child");

    $next.fadeIn(1000);
    $('.fade_test').delay(5000);
}

function stopFader(){
    window.clearInterval(pauseplay);
console.log("stop");
}

   $('.fadein .fade_test:gt(0)').hide();

  pauseplay= window.setInterval(startFader, 2000);

var $button = $('.fadein #toggler');
$button.toggle(function() {
stopFader();  
$(this).toggleClass('playin pausin');
 $(this).text("Play");   
}, function() {

$(this).toggleClass('pausin playin');
 $(this).text("Pause");   
    pauseplay= window.setInterval(startFader, 2000);

}); 
```

非常感激任何的帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:18:14.170

不是 JQuery，但您可以使用 Javascript 非常简单的 setTimeout(fn,milliseconds);

**[这](https://stackoverflow.com/questions/10312963/javascript-settimeout)**是另一篇解释

```
function foo(){
   alert('foo');
}

setTimeout(foo,1000); 
```

# cakephp - Cakephp 1.3 select field options from list or enter new

> ID：13400467
> 
> 赞同：0
> 
> 时间：2012-11-15T15:16:21.300
> 
> 标签：cakephp

I have a cakephp 1.3 app which get's a person's consent to participate in a study. I'm trying to link inclusion criteria and exclusion criteria for the study on the Add study page. The HABTM relationship is setup and working(If there's only one way to select them) What I'm trying to do now is display the current Inclusion Criteria as a list of checkboxes the person adding the study can select, but I also want a field where new criteria can be entered as a comma seperated list. Right now it will save the checkboxes, but I want it to also add the text entered in the field as well. Screen showing the Add study as it sits now is below. I don't really know how I would go about doing that. Is there a way to do this or will I have to take the data entered, sort through it and then add it to $this->data[inclusion field data]? An example would be nice. :) I've added the code I have so far below the image. ![Add Study Screen](../Images/b7b22e06228ca561b24e4d07de631ba7.png)

Controller:

```
/**
   * Add a study.
   */
  function add() {
    if (!empty($this->data)) {

      //get the inclusions from the text data
      //Sort through the comma seperated list and add it to $this->data['Study']['Inclusions']???

      $this->Study->create();
      if ($this->Study->save($this->data)) {
        $this->Session->setFlash(__('The study has been saved', true));
        $this->redirect(array('action' => 'index'));
      } else {
        $this->Session->setFlash(__('The study could not be saved. Please, try again.', true));
      }
    }
    $this->set('inclusions', $this->Study->Inclusion->find('list', array(
      'fields' => array('id', 'name'), 
      'order' => 'Inclusion.name', 
      'recursive' => 0,
    )));
    $this->set('exclusions', $this->Study->Exclusion->find('list', array(
      'fields' => array('id', 'name'), 
      'order' => 'Exclusion.name', 
      'recursive' => 0,
    )));
    $this->set('forms', $this->Study->Form->find('list', array('order' => 'Form.name','recursive' => 0,)));
  } 
```

View:

```
<div class="studies form">
<?php echo $this->Form->create('Study', array('type' => 'file'));?>
  <fieldset>
    <legend><?php __('Add Study'); ?></legend>
  <?php
    echo $this->Form->input('studyname', array('label'=>'Study Name','required' => true));
    echo $this->Form->input('studynumber', array('label'=>'Study Number','required' => true));
    echo $this->Form->input('file', array('label'=>'Select Electronic Consent','type' => 'file'));
    echo $this->Form->input('consent_form_date');
  ?>
   <fieldset class="inclusion">
    <legend><?php __('Inclusions'); ?></legend>
   <div class="IncExc">
  <?php
    echo $this->Form->input('Inclusion',array(
        'label' => false,
        'type' => 'select',
        'multiple' => 'checkbox',
        'options' => $inclusions,
        'selected' => $html->value('Inclusion.Inclusion'),
    ));
  ?>
  </div>
  <?php
    echo $form->input('Inclusion.inclusions',array(
            'type' => 'text',
            'label' => __('Add New Inclusions',true),
            'after' => __('Seperate each new Inclusion with a comma.  Eg: family, sports, icecream',true)
    ));
  ?>
  </fieldset>
  <fieldset>
    <legend><?php __('Exclusions'); ?></legend>
   <div class="IncExc">
    <?php
    echo $this->Form->input('Exclusion',array(
        'label' => false,
        'type' => 'select',
        'multiple' => 'checkbox',
        'options' => $exclusions,
        'selected' => $html->value('Exclusion.Exclusion'),
    ));
 ?>
  </div>
  </fieldset>
  <fieldset style="width: 700px;">
    <legend><?php //__('Forms'); ?></legend>
    <?php /*
    echo $this->Form->input('Form',array(
        'label' => false,
        'type' => 'select',
        'multiple' => 'checkbox',
        'options' => $forms,
        'selected' => $html->value('Form.Form'),
    ));
*/ ?>
  </fieldset>
  </fieldset>
<?php echo $this->Form->end(__('Submit', true));?>
</div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:19:41.880

You are trying to do pretty much the same as he wanted to do: [Saving tags into a database table in CakePHP](https://stackoverflow.com/questions/10161604/saving-tags-into-a-database-table-in-cakephp/10162592#10162592)

What you have to do is:

1.  Check if the manual inclusion field is empty or not. If the field is empty ignore it and go to step 5
2.  If the field is not empty, split it at comma or whatever sign you want to use as a seperator. You can now validate it if you want to.
3.  Use all the inclusions of step 3 and save them in your custom or real inclusion table. You should keep track of those custom entries in some way, so you don't mess them up with those you provided. Save all the ids generated while saving within an array.
4.  Merge the collected ids of step 3 with those you got from the form which were given by you.
5.  Save all collected and given data to database

The answere in the post given above including the code there can be used to do that. You should get along with it pretty well if you read the whole post + code comments ;)

If you have any further questions, just ask ;)

Greetings func0der

# jquery - .each 函数中最后一个队列动画

> ID：13400468
> 
> 赞同：0
> 
> 时间：2012-11-15T15:16:23.127
> 
> 标签：jquery, jquery-animate, queue

我正在浏览一个动画列表，如下所示：

```
function katz_logo() {
    $('#logo')
    .delay(500)
    .animate({opacity: 1}, 1000)
    .queue(katz_subsites);
}

function katz_subsites() {
    var subsites = $('#subsites li'),
        subsitesLength = subsites.length;

    subsites.each(function(i) {
        $(this)
        .delay(i * 300)
        .animate({top:0, opacity: 1 }, 800);

        if (i === subsitesLength - 1) {
            alert('hi');
        }

    });
}

function katz_video() {
    if (!Modernizr.touch) {
        $('#home_video').delay(500).fadeIn(1000);
    }
}

katz_logo(); 
```

每个动画都被定义为一个函数，然后最终被调用`katz_logo()`以启动魔法。在`katz_subsites()`函数中，我遍历每个`li`可用的，然后我想要做的是`katz_video()`在到达最后一个元素后将函数排队，但即使我的警报实验也没有按预期工作。

所以 - 我遇到问题的部分是如何获取最后一个值（我发誓我一直在关注这里的其他答案），然后在达到之后如何排队。

任何帮助将不胜感激。谢谢！

# 更新

代码进度 - 仍然坚持以`each()`语句中的最后一个元素为目标，然后排队下一个动画：

```
function katz_logo() {
    $('#logo')
    .delay(500)
    .animate({opacity: 1}, 1000, katz_subsites);
}

function katz_subsites() {
    var subsites = $('#subsites li'),
        subsitesLength = subsites.length;

    subsites.each(function(i) {
        $(this)
        .delay(i * 300)
        .animate({top:0, opacity: 1 }, 800);

        if (i === subsitesLength - 1) {
            i.queue(katz_video);
        }

    });
}

function katz_video() {
    if (!Modernizr.touch) {
        $('#home_video').delay(500).fadeIn(1000);
    }
}

katz_logo(); 
```

工作代码：

```
function katz_logo() {
    $('#logo')
    .delay(500)
    .animate({opacity: 1}, 1000, katz_subsites);
}

function katz_subsites() {
    var subsites = $('#subsites li'),
        subsitesLength = subsites.length;

    subsites.each(function(i) {
        $(this)
        .delay(i * 300)
        .animate({top:0, opacity: 1 }, 800, (i===subsitesLength-1 ? katz_video : (function(){})) );
    });
}

function katz_video() {
    if (!Modernizr.touch) {
        $('#home_video').delay(500).fadeIn(1000);
    }
}

katz_logo(); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:22:35.420

我认为你错过了使用该`queue`函数，而不是你正在寻找的是添加一个回调，动画函数在完成时执行。

```
$('#logo')
  .delay(500)
  .animate({opacity: 1}, 1000, katz_subsites); 
```

编辑以回应评论 - 再次，同样的原则。
查看您的代码，大致如下：

```
subsites.each(function(i) {
  $(this)
    .delay(i * 300)
    .animate({top:0, opacity: 1 }, 800, 
      (i===subsitesLength-1 ? katz_video : (function(){})) );
}); 
```

# cython - 融合类型的c ++类

> ID：13400469
> 
> 赞同：3
> 
> 时间：2012-11-15T15:16:28.337
> 
> 标签：cython

我希望为一堆 c++ 类实现 python 包装器。在 pxd 的某个地方，我有：

```
cdef cppclass FooImpl1:
    FooImpl1()
    int foo()

cdef cppclass FooImpl2
    FooImpl2()
    int foo() 
```

我想知道我是否可以在 pyx python 包装器中写这样的东西：

```
ctypedef fused FooImpl:
    FooImpl1*
    FooImpl2*

cdef class Foo:
    cdef FooImpl impl
    def __cinit__(self, int selector):
        if selector == 1:
            self.impl = new FooImpl1()
        else:
            self.impl = new FooImpl2()

    def func(self):
        # depending on the object stored in impl FooImpl2::foo or FooImpl1::foo
        # will be called
        return self.impl.foo() 
```

有没有办法完成预期的行为？FooImpl1 和 FooImpl2 不共享抽象接口，它们是类的模板特化。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-03-24T00:34:55.727

As of this version (0.20), Cython doesn't support fused types in classes, only in function parameters and variables. [Here are the docs.](http://docs.cython.org/src/userguide/fusedtypes.html)

# entity-framework - Entity Framework Code First 5 Cascade Delete on many to many tables 错误

> ID：13400484
> 
> 赞同：7
> 
> 时间：2012-11-15T15:17:21.567
> 
> 标签：entity-framework, ef-code-first, code-first, entity-framework-5

我有这个模型

```
public class State
{
    public State()
    {
        this.Promotions = new List<Promotion>();
        this.Branches = new List<Branch>();
        this.Stores = new List<Store>();
    }

    public int Id { get; set; }
    public string Description { get; set; }

    public virtual ICollection<Promotion> Promotions { get; set; }
    public virtual ICollection<Store> Stores { get; set; }
    public virtual ICollection<Branch> Branches { get; set; }
}

public class Store
{
    public Store()
    {
        this.Promotions = new List<Promotion>();
        this.Branches = new List<Branch>();
    }

    public int Id { get; set; }
    public string Name { get; set; }

    public virtual ICollection<Promotion> Promotions { get; set; }
    public virtual ICollection<Branch> Branches { get; set; }

    public int StateId { get; set; } // Foreign key
    public virtual State State { get; set; } // Navigation Property
}

public class Branch
{
    public Branch()
    {
        this.Promotions = new List<Promotion>();
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public int StoreId { get; set; } // Foreign key
    public int StateId { get; set; } // Foreign key

    public virtual Store Store { get; set; } // Navigation Property
    public virtual State State { get; set; } // Navigation Property

    public virtual ICollection<Promotion> Promotions { get; set; }
}

    public class Promotion
{
    public Promotion()
    {
        this.Stores = new List<Store>();
        this.Branches = new List<Branch>();
        this.Productos = new List<Producto>();
    }

    public int Id { get; set; }
    public string Name { get; set; }
    public int StateId { get; set; }

    public virtual ICollection<Store> Stores { get; set; }
    public virtual ICollection<Branch> Branches { get; set; }
    public virtual ICollection<Product> Products { get; set; }

    public virtual State State { get; set; }

} 
```

这在我的上下文中：

```
// State
modelBuilder.Entity<State>()
    .HasMany(p => p.Promotions)
    .WithRequired(e => e.State)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<State>()
    .HasMany(s => s.Branches)
    .WithRequired(e => e.State)
    .WillCascadeOnDelete(false);

modelBuilder.Entity<State>()
   .HasMany(e => e.Stores)
   .WithRequired(e => e.State)
   .WillCascadeOnDelete(true);

 // Store
modelBuilder.Entity<Store>()
    .HasMany(b => b.Branches)
    .WithRequired(s => s.Store)
    .WillCascadeOnDelete(true);

// Many to many
modelBuilder.Entity<Store>().
  HasMany(p => p.Promotions).
  WithMany(s => s.Stores).
  Map(
   m =>
   {
       m.MapLeftKey("StoreId");
       m.MapRightKey("PromotionId");
       m.ToTable("Store_Promotion");
   });

modelBuilder.Entity<Promotion>().
 HasMany(e => e.Products).
 WithMany(p => p.Promotiones).
 Map(
  m =>
  {
      m.MapLeftKey("PromotionId");
      m.MapRightKey("ProductoId");
      m.ToTable("Promotion_Producto");
  });

modelBuilder.Entity<Branch>().
 HasMany(p => p.Promotiones).
 WithMany(b => b.Branches).
 Map(
  m =>
  {
      m.MapLeftKey("BranchId");
      m.MapRightKey("PromotionId");
      m.ToTable("Branch_Promotion");
  }); 
```

现在，如果我打开多个状态的 WillCascadeOnDelete （流畅映射中的前三个），我会收到错误

> 测试方法 Proj.Data.Tests.UnitTest1.TestPromotion 抛出异常：
> System.Data.SqlClient.SqlException：在表 'Branch' 上引入 FOREIGN KEY 约束 'FK_dbo.Branch_dbo.Store_StoreId' 可能会导致循环或多个级联路径。指定 ON DELETE NO ACTION 或 ON UPDATE NO ACTION，或修改其他 FOREIGN KEY 约束。无法创建约束。请参阅以前的错误。

我知道，我读过 Julie Lerman 的书：

> 某些数据库（包括 SQL Server）不支持指定级联删除指向同一个表的多个关系

由于多对多关系表具有来自两个相关表的级联删除，因此发生这种情况。

所以，我的问题是：这里唯一的选择是关闭父表上的级联删除并手动处理关系表上的删除？Entity Framework 5 对此没有任何解决方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-19T15:47:31.070

好的，我明白了这个问题。不是多对多关系，问题是这个

```
State -> Promotion -> PromotionStore
State -> Branch -> BranchPromotion
State -> Store -> StorePromotion 
```

然后 Store、Branch 和 Store 对 State 有 FK。因此，如果我删除 State PromotionStore 可以通过第一种和第三种可能性到达。

我最终做的是关闭 State 的级联删除并手动删除相关记录，如下所示：

```
public override void Delete(State state)
{
   DbContext.Entry(state).Collection(x => x.Promotions).Load();
   DbContext.Entry(state).Collection(x => x.Stores).Load();
   DbContext.Entry(state).Collection(x => x.Branches).Load();

   var associatedPromotions = state.Promotions.Where(p => p.StateId == state.Id);
   associatedPromotions.ToList().ForEach(r => DbContext.Set<Promotion>().Remove(r));

   var associatedStores = state.Stores.Where(e => e.StateId == state.Id);
   associatedStores.ToList().ForEach(e => DbContext.Set<Store>().Remove(e));

   var associatedBranches = state.Branches.Where(s => s.StateId == state.Id);
   associatedBranches.ToList().ForEach(s => DbContext.Set<Branch>().Remove(s));

   base.Delete(state);
} 
```

# powershell - 需要一个脚本来将构建输出发布到登台服务器

> ID：13400488
> 
> 赞同：0
> 
> 时间：2012-11-15T15:17:28.083
> 
> 标签：powershell, powershell-2.0

我正在尝试编写一个 PowerShell 脚本，该脚本将从源文件夹中复制一部分文件并将它们放入目标文件夹中。我玩了半天的“copy-item”和“remove-item”，无法得到想要的或一致的结果。

例如，当我多次运行以下 cmdlet 时，文件最终位于不同的位置？！？！：

```
copy-item -Path $sourcePath -Destination $destinationPath -Include *.dll -Container -Force -Recurse 
```

我一直在尝试我能想到但找不到正确解决方案的所有选项和命令组合。由于我确信我没有做任何非典型的事情，我希望有人可以减轻我的痛苦并为我提供正确的语法来使用。

源文件夹将包含大量具有各种扩展名的文件。例如，以下所有情况都是可能的：

*   .dll
*   .dll.config
*   。可执行程序
*   .exe.config
*   .lastcode分析成功
*   .pdb
*   .Test.dll
*   .vshost.exe
*   .xml
*   等等

该脚本只需要复制 .exe、.dll 和 .exe.config 文件，不包括任何 .test.dll 和 .vshost.exe 文件。如果目标文件夹不存在，我还需要脚本来创建它们。

感谢任何帮助我前进。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T22:27:09.260

尝试：

```
$source = "C:\a\*"
$dest =  "C:\b"

dir $source -include *.exe,*.dll,*.exe.config -exclude *.test.dll,*.vshost.exe  -Recurse | 
% {

 $sp = $_.fullName.replace($sourcePath.replace('\*',''), $destPath)

 if (!(Test-Path -path (split-path $sp)))
    {
     New-Item (split-path $sp) -Type Directory
    } 

    copy-item $_.fullname  $sp -force
  } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T19:23:14.490

只要文件在一个目录中，以下应该可以正常工作。它可能比需要的更冗长，但它应该是一个很好的起点。

```
$sourcePath = "c:\sourcePath"
$destPath = "c:\destPath"

$items = Get-ChildItem $sourcePath | Where-Object {($_.FullName -like "*.exe") -or ($_.FullName -like "*.exe.config") -or ($_.FullName -like "*.dll")}

$items | % {
    Copy-Item $_.Fullname ($_.FullName.Replace($sourcePath,$destPath))
} 
```

# powershell - $_.SubString($_.IndexOf("")) Powershell 帮助

> ID：13400492
> 
> 赞同：1
> 
> 时间：2012-11-15T15:17:33.143
> 
> 标签：powershell

我正在寻找隔离IPv4 地址的前**三个八位字节**

```
$IPAddress = Get-WmiObject Win32_NetworkAdapterConfiguration |
Where { $_.IPAddress } |
Select -Expand IPAddress |
where { $_ -like '*.*' } | % {
$_.SubString($_.IndexOf(""))
}

Write-host IP Address is $IPAddress 
```

我的输出目前是

```
IP Address is 192.168.10.78 
```

有人可以让我摆脱痛苦，告诉我我需要用 SubString / IndexOf 做什么，以便在包括 final 之后取消所有内容。所以它读

```
IP Address is 192.168.10 
```

对不起，但我是一个完整的新手，我花了 2 个小时来写/偷这 6 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:29:30.883

这是不使用子字符串

```
( Get-WmiObject Win32_NetworkAdapterConfiguration | Where { $_.IPAddress } | 
Select -Expand IPAddress  ) | % { $_.split('.')[0..2] -join '.' } 
```

这使用子字符串：

```
( Get-WmiObject Win32_NetworkAdapterConfiguration | Where { $_.IPAddress } | 
Select -Expand IPAddress  ) | % {$_.substring(0, $_.LastIndexOf('.')) } 
```

# c# - HtmlAgilityPack HtmlWeb.Load 返回空文档

> ID：13400493
> 
> 赞同：1
> 
> 时间：2012-11-15T15:17:34.703
> 
> 标签：c#, html, web-crawler, html-agility-pack

在过去的 2 个月里，我一直在 Web 爬虫应用程序中使用 HtmlAgilityPack，加载网页没有问题。

现在，当我尝试加载此特定网页时，文档 OuterHtml 为空，因此此测试失败

```
var url = "http://www.prettygreen.com/";
var htmlWeb = new HtmlWeb();
var htmlDoc = htmlWeb.Load(url);
var outerHtml = htmlDoc.DocumentNode.OuterHtml;
Assert.AreNotEqual("", pageHtml); 
```

我可以毫无问题地从站点加载另一个页面，例如设置

```
url = "http://www.prettygreen.com/news/"; 
```

在过去，我曾经遇到过编码问题，我玩弄了 htmlWeb.OverrideEncoding 和 htmlWeb.AutoDetectEncoding 却没有运气。我不知道这个网页可能是什么问题。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-16T11:44:08.310

该网站似乎需要启用 cookie。因此，为您的 Web 请求创建一个 cookie 容器应该可以解决问题：

```
var url = "http://www.prettygreen.com/";
var htmlWeb = new HtmlWeb();
htmlWeb.PreRequest += request =>
    {
        request.CookieContainer = new System.Net.CookieContainer();
        return true;
    };
var htmlDoc = htmlWeb.Load(url);
var outerHtml = htmlDoc.DocumentNode.OuterHtml;
Assert.AreNotEqual("", outerHtml); 
```

# php - 将数据插入mysql表

> ID：13400497
> 
> 赞同：3
> 
> 时间：2012-11-15T15:17:51.147
> 
> 标签：php, mysql

我刚刚安装了 xampp，但在将数据插入 MySQL 表时遇到问题。我插入的数据没有出现在 phpmyadmin 中。我不确定是什么问题。

任何帮助将不胜感激，这是我的代码：

```
<html>
<head>
<title>Test</title>
<body>
<form action="test.php" method="post">
Firstname: <input type="text" name="firstname" />
Lastname: <input type="text" name="lastname" />
Age: <input type="text" name="age" />
<input type="submit"name="submit" value="submit"/>
</form>

<?php 
$host ="localhost";
$username = "***";
$password = "***";
$database = "***";
$table ="persons";
$con = mysql_connect("localhost","***","***");
if (!$con)
{
 die('Could not connect: ' . mysql_error());
}
 mysql_select_db("bucksbug_mesovot", $con);

 $sql="INSERT INTO persons (firstname, lastname, age)
 VALUES('$_POST[firstname]','$_POST[lastname]','$_POST[age]')";

  if (!mysql_query($sql,$con))
  {
  die('Error: ' . mysql_error());
  }
   echo "Data inserted";

   mysql_close($con);

  ?>
  </body>
  </html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:27:12.873

尽管您应该真正切换到 PDO / mysqli 并使用绑定参数准备语句以避免 sql 注入和如果您的变量包含引号时破坏 sql 语句，但您可能也会遇到 PDO / mysqli 问题：您的密码（更改它！）包含一个`$`.

请参阅[键盘](http://codepad.org/YjTqFouW)上的以下示例：

```
<?php

function test($var)
{
  echo $var;
}

$test_var = "test$string";

test($test_var); 
```

输出：

```
test 
```

您将无法成功连接到数据库，因为您的密码永远不会正确。

改变：

```
"=c(p$zTTH2Jm" 
```

至：

```
'=c(p$zTTH2Jm' 
```

# android - 有没有办法在使用 Android Debug Bridge 安装应用程序时忽略 INSTALL_FAILED_VERSION_DOWNGRADE？

> ID：13400499
> 
> 赞同：131
> 
> 时间：2012-11-15T15:17:55.653
> 
> 标签：android, installation, adb

似乎最新的 Android 4.2 在尝试安装较低版本的 APK 时在安装时引入了这种错误情况。在早期版本的 Android 中，可以简单地通过 `adb install -r <link to APK>`. 出于调试目的，我经常需要重新测试旧的 APK；并且该`-r`标志将替换旧 Android 版本中的旧版本。这里有解决方法可以忽略`[INSTALL_FAILED_VERSION_DOWNGRADE]`吗？

* * *

## 回答 #1

> 赞同：310
> 
> 时间：2012-12-07T23:25:07.417

似乎最新版本的 adb 工具有一个“允许降级标志”，该标志未显示在 adb 帮助中，但显示在设备的“pm”帮助中。所以使用： `adb install -r -d <link to apk>`

* * *

## 回答 #2

> 赞同：23
> 
> 时间：2012-12-03T12:33:10.567

您可以尝试使用`adb uninstall -k <package>`然后安装较旧的 apk。从 adb 使用指南：

```
 adb uninstall [-k] <package> - remove this app package from the device
                                 ('-k' means keep the data and cache directories) 
```

我自己用我的 apk 尝试过，它似乎适用于大多数数据（一些数据，如 RawContacts 没有保存）

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-11-21T15:07:20.547

您是否在您的设备上启用了多个帐户（并通过 ADB 推送您的 apk）？如果是这样，您必须删除每个帐户中的 apk。完全卸载后，你的推送就OK了。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-05-17T21:09:34.820

就我而言，它是我的项目中包含的 Google Play 服务的旧版本。我正在使用安卓工作室。我在 SDK 上运行了更新，并导入了更新后的库，该错误就消失了。所以我的建议是：更新到您的项目引用的最新库。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-01-07T17:13:32.227

我也遇到了同样的问题。可以通过以下步骤解决，这比从设备中删除任何 apk 更容易 -

1) 在终端运行命令“adb logcat | grep -i version”

2) 查找特定的行，它将显示在 logcat 的末尾 -

```
"Downgrade detected: Update version code 5011  is older than current 9109" 
```

3）复制当前版本（例如9109）并将其粘贴到AndroidManifest.xml中，如下所示 -

```
android:versionCode="9109" 
```

现在清理并重建应用程序，它应该可以正常工作。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-09-25T09:07:35.600

尝试卸载以前安装的应用程序版本使用 -

```
adb uninstall com.package.name 
```

然后再次安装/运行您的应用程序

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-11-21T09:54:09.787

您可能已经从版本号高于您现在正在使用的副本的代码的单独副本安装。在任何一种情况下，卸载当前安装的副本，或打开设置 > 应用程序以确定已安装应用程序的版本号，并在 AndroidManifest 中增加您的 versionCode 以更高。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2020-04-10T05:45:57.540

这可能是 Google Play 服务依赖项的问题。

有时，情况并非如此：

a) 已安装应用程序的现有版本，无论是否更新

b) 设备上的另一个用户帐户上安装了应用程序的现有版本

所以错误信息只是假的。

就我而言，我有：

```
implementation 'com.google.android.gms:play-services-maps:16.0.0'
implementation 'com.google.android.gms:play-services-location:16.0.0'
implementation 'com.google.android.gms:play-services-gcm:16.0.0' 
```

但是当我尝试

```
implementation 'com.google.android.gms:play-services-maps:17.0.0'
implementation 'com.google.android.gms:play-services-location:17.0.0'
implementation 'com.google.android.gms:play-services-gcm:17.0.0' 
```

我遇到了与 androidX 相关的错误，因为我还没有升级到 androidX 并且还没有准备好这样做。我发现使用最新的 16.xy 版本可以工作，并且我不再收到错误消息。此外，我可以等到我准备好之后再升级到 androidX。

```
implementation 'com.google.android.gms:play-services-maps:16.+'
implementation 'com.google.android.gms:play-services-location:16.+'
implementation 'com.google.android.gms:play-services-gcm:16.+' 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2021-08-25T12:22:05.380

卸载现有安装的应用程序。

检查您是否更改了项目包名，由于包名，它与现有应用程序发生冲突。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2022-02-15T12:37:09.853

对我来说，只有这样才能正常工作：

```
adb install -t -r -d myapp.apk 
```

顺便说一句，我要替换和降级的应用程序是系统应用程序

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2021-03-23T07:00:46.377

就我而言：

第 1 步：运行

```
yarn start --reset-cache 
```

第 2 步：运行

```
yarn android 
```

* * *

## 回答 #12

> 赞同：-4
> 
> 时间：2019-04-24T12:43:25.343

对于面临小米问题的人：

```
adb shell pm uninstall <package_name> 
```

# iphone - 在 iphone 中存储 sqlite 数据库。无法取回。

> ID：13400503
> 
> 赞同：0
> 
> 时间：2012-11-15T15:18:03.913
> 
> 标签：iphone, objective-c, ios5, ios4

不知道我在做什么错误。请建议。在我的应用程序中，我正在创建一个数据库，当我下次重新启动应用程序时，看不到该数据库。我找到了问题所在，但没有找到解决方案。

```
 NSArray *dirPaths;
    NSString *docsDirectory;
    NSString *databasePath;
    dirPaths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES);
    docsDirectory = [dirPaths objectAtIndex:0];
    databasePath = [[NSString alloc] initWithString: [docsDirectory stringByAppendingPathComponent: @"MYDATABASE.db"]];
    NSLog (@" Database Path : %@ ",databasePath);
    const char *dbpath = [databasePath UTF8String]; 
```

不幸的是，我打印了以下路径。

```
Database Path : /var/mobile/Applications/27C4C465-0D65-44AA-BBB3-693G4D1CDD4D/Documents/MYDATABASE.db 
```

当我重新调用应用程序时，我得到了不同的路径，即：27C4C465-0D65-44AA-BBB3-693G4D1CDD4 被替换为其他值，这就是它无法正确定位数据库的原因。

我该如何解决这个问题？请建议。

# java - 为什么我不能在我的实现中将抽象方法设为静态？

> ID：13400510
> 
> 赞同：2
> 
> 时间：2012-11-15T15:18:35.897
> 
> 标签：java, compiler-construction

让我们假设 Java 中的以下场景

```
public interface Foo {
    Object bar();
}

public class Baz implements Foo {
    public Object bar() {
        //My implementation
    }
} 
```

为什么我不能制作`Baz.bar()`静态？

这样做会导致编译器错误`This static method cannot hide the instance method from Foo`添加`@Override`注释以`Baz.bar()`将编译器错误更改为`The method bar() of type Baz must override or implement a supertype method`

在我看来，从使用 interface 的任何人的角度来看`Foo`，实现类`Baz`仍将满足接口要求，同时使具有静态实现的方法可供任何显式使用`Baz`该类而无需实例化的人使用。

为什么编译器不允许这种情况？

**编辑**：

也许我不够清楚，但我实际上要问的是***为什么***不允许这样做，因为从我的角度来看，我并没有降低接口定义方法的可见性。

是的，我知道我在标题中使用了抽象这个词，而不是在问题中，但那是因为`abstract`关键字隐含在接口中。

**编辑 2**：

为了清楚说明我为什么要问这个问题，我将添加一个更接近现实的示例：

```
public interface DatabaseMapper<T extends DatabaseType> {
    Entry<T> convert(Entry);
}

public interface SQL extends DatabaseType {}

public class SQLEntry implements Entry<SQL> {}

public class SQLMapper implements DatabaseMapper<SQL> {
    public SQLEntry convert(Entry e) {
        //Convert some generic entry to the SQLEntry type
    }
} 
```

在这种情况下，我想强制所有`Mapper`实现都实现该`convert`方法，但同时，该方法可能不依赖于`SQLMapper`对象的内部状态，并且可能希望能够将泛型`Entry`转换为a`SQLEntry`无需经过可能包括数据库连接字符串等的实例化过程。

这就是我所面临的情况，以及为什么我想看看是否有人知道为什么用相同的方法无法实现这一点——例如，不必求助于`public static SQLEntry convertStatic(Entry e)`被覆盖的方法将其实现委托给的 a。

不过，我再次明白，由于编译器的工作方式，这在 Java 中是不可能的——我只是想理解*为什么会这样*。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:27:53.220

真正的答案是 Java 根本就不是这样定义的。在其他语言中，这是可能的。

例如，在 Scala 中没有静态方法，但您可以改为定义`object`单例的静态方法并允许这样做。在像 Smalltalk 或 Ruby 这样的动态语言中，类就像对象一样，这也是可能的。

但是在 Java 中，静态方法类似于全局方法。没有 , 的概念`self`，也没有`super`在静态方法中，因为它没有绑定到对象。结果继承/覆盖并不真正适用。

它表明，如果没有继承的概念，那么谈论 . 也是没有意义的`abstract`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:20:18.077

抽象方法应该被子类方法覆盖（定义）。您不能覆盖静态方法，因为它们与实例无关，而是与它们定义的特定类有关。

例如，使用非静态方法：

```
Foo b = new Baz();
Object result = b.bar(); 
```

静态是这样使用的：

```
Object result = Baz.bar2(); 
```

如果您真的希望 bar 是静态的并且还希望在实例级别覆盖，请执行以下操作：

```
public interface Foo {
    Object bar();
}

public class Baz implements Foo {
    @Override
    public Object bar() {
          return Baz.bar2();
    }
    public static Object bar2() {
     //your implementation
    }

} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:20:52.813

```
public class Baz implements Foo {
    public Object bar() {
        //My implementation
    }
 public static  Object bar() {
        //My implementation
    }
} 
```

因为，您的方法签名是相同的， bar () 没有重载。由于您在抽象类中声明了非静态 bar()，因此您被迫在此类中实现该方法。

# c - 在c中将数字扫描成字符串

> ID：13400514
> 
> 赞同：-1
> 
> 时间：2012-11-15T15:18:52.760
> 
> 标签：c, tolower

我有一个单词列表，可以说：

```
Hello
FAR
DC2012 
```

我需要将所有这些都扫描为字符串并将它们放入二叉树中。除了每当我扫描时，我的程序在第三个字符串“DC2012”处失败。我猜这是因为它有数字而且我正在使用“tolower”功能但我需要使用它所以我不确定。这是我的扫描代码：

```
while (fscanf(afp, "%s ", words) != NULL) {

            for(i=0; words[i]!='\0'; i++){
                words[i]=(char)tolower(words[i]);
            }
            printf("%s\n", words); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:47:11.033

它执行一个无限循环，使用`fgets()`而不是`scanf`. 而且您不需要强制转换`tolower()`.

# sharepoint - 日期和时间值问题 - Sharepoint 中的列表

> ID：13400515
> 
> 赞同：0
> 
> 时间：2012-11-15T15:19:03.383
> 
> 标签：sharepoint

有没有办法在 SharePoint 中制作“日期和时间”列，所以它会以这种方式运行：

- 如果在该列中输入的日期是今天，那么明天该列将为空。

为了更好地解释它，让我们这样说：

该列是预订列。用户输入他将停止做某事的日期：

column_1-column_2-column_3-RESERVATION_COLUMN

如果今天是 2012 年 1 月 1 日，而我将在 2012 年 1 月 5 日之前做某事，我将输入“05.01.2012”。在RESERVATION_COLUMN”中。当那一天到来时，或者后一天（不是真的）该列将是空的。

我尝试了一些方法，但我没有成功。有什么帮助吗？

在此先感谢，K。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T20:32:01.197

我能想到的唯一方法是使用工作流程。

使用工作流-> 等到第 1 天，然后将字段值设置为空白。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T06:43:26.220

您也可以创建 TimerJob，每天执行一次或几次。此计时器作业将使用您的参数查询列表项目，例如项目，其中日期字段中的值等于今天或小于今天。然后 TimerJob 将迭代和更新这个字段。

其他更困难的方法是编写您自己的具有特定行为的自定义数据时间字段。

# javascript - 关闭窗口时如何注销我的应用程序？

> ID：13400521
> 
> 赞同：8
> 
> 时间：2012-11-15T15:19:27.617
> 
> 标签：javascript, ajax, jsp, servlets

在我的聊天应用程序中，我有注销按钮，它工作正常。

现在，当我关闭浏览器窗口时，我也需要注销应用程序。我怎样才能做到这一点......

提前致谢...

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-15T15:23:21.997

对于客户端，没有确切的方法可以做到这一点。退出页面时不会触发任何事件。它应该通过服务器上的 Session End 事件来完成。

您可以尝试使用 onbeforeunload 或 unload，但竞争条件会阻止这种情况发生。并且它们不会因为浏览器崩溃、失去互联网连接等而触发。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2016-07-19T18:54:42.183

我最近在我的 angularJS 应用程序中处理了这个问题 - 主要问题是，如果你刷新，我不想让你注销，但如果你关闭选项卡，我确实想注销.. 带有 onbeforeunload/onunload 的 Ajax 请求不是保证等待响应，所以这是我的解决方案：

我在登录时设置了一个 sessionStorage cookie，它只是一个布尔值 - 当我收到登录响应时设置为 true

`sessionStorage.setItem('activeSession', 'true');`

显然，在注销时，我们将此标志设置为 false

当控制器初始化或使用 window.onload （在我的 app.js 文件中）时 - 我检查这个 activeSession bool .. 如果它是假的，我有这个小 if 语句 - 如果满足条件我调用我的注销方法**ONLOAD**代替卸载的

```
 var activeSession = sessionStorage.activeSession;
    if (sessionStorage.loggedOutOnAuth) {
        console.log('Logged out due to expiry already')
    }
    else if (!activeSession) {
        sessionStorage.loggedOutOnAuth = true;
        _logout()
    } 
```

基本上，“loggedOutAuth”布尔值让我知道，由于 sessionStorage 中没有 activeSession，我刚刚在页面加载时让你过期，所以你不会陷入循环

这对我来说是一个很好的解决方案，因为我不想实现心跳/websocket

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-15T15:22:45.727

将您的注销代码添加到[onunload](https://developer.mozilla.org/en-US/docs/DOM/window.onunload)事件。

```
window.onunload = function () {
    //logout code here...
} 
```

在 JQuery 中，您可以使用[.unload()](http://api.jquery.com/unload/)函数。请记住，您没有太多时间，因此您可以发送 Ajax 请求，但结果可能无法到达客户端。

另一个技巧是打开一个小的新窗口并在那里处理注销。

```
window.open("logout url","log out","height=10,width=10,location=no,menubar=no,status=no,titlebar=no,toolbar=no",true); 
```

如果要禁用关闭窗口（或至少警告用户），可以使用以下代码：

```
window.onbeforeunload = function(event) {
    //if you return anything but null, it will warn the user.
    //optionally you can return a string which most browsers show to the user as the warning message.
    return true;
} 
```

另一个技巧是每隔几秒钟就对客户端进行一次 ping 操作。如果没有回复，则假定用户已关闭窗口、浏览器已崩溃或存在网络问题导致聊天会话结束。在客户端，如果你没有收到这个 ping 包，你可以假设网络连接或服务器有问题，你可以显示注销警告（并且可以选择让用户重新登录）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T15:22:59.513

一些网站正在使用以下脚本来检测窗口是否关闭。

```
if(window.screenTop > 10000)
alert("Window is closed");
else
alert("Window stillOpen"); 
```

您需要添加正确的操作而不是`alert()`

也看看[这里](http://www.vijayjoshi.org/2009/07/07/faqjavascript-user-confirmation-on-close-button-of-browser/)- 我认为这是你需要检测窗户关闭的东西

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-16T08:37:48.707

我得到了解决方案，

```
window.onunload = function () {
    //logout code here...
} 
```

感谢所有支持我的人...

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-09T15:38:18.037

另一种方法是某种“keepalive”：浏览器页面每分钟左右用一个小的 ajax 请求“ping”服务器。如果服务器没有收到常规 ping，则会话将关闭并且不能再使用。

作为优化，如果我们在此期间向服务器发出另一个请求，则可以跳过 ping。

好处：

*   仍然可以打开多个窗口
*   F5/刷新没问题
*   可以向服务器提供一些使用统计信息

缺点：

*   当窗口关闭时，用户退出前会有延迟
*   使用少量网络带宽
*   服务器上的额外负载
*   用户可能会担心页面不断“打电话回家”
*   更难实施

我从来没有在网络应用程序中真正做到过这一点，我不确定我是否会这样做；只是把它作为一种选择。对于聊天应用程序来说，这似乎是一个不错的选择，服务器确实需要知道你是否还在。

除了轮询/ping，另一种可能性是在页面打开时保持“长时间运行的请求”打开。聊天应用程序需要一些这样的套接字来接收新消息和通知。如果页面关闭，则套接字也关闭，服务器可以注意到它已关闭。然后它会等待客户端建立新套接字的短暂时间，如果没有，我们假设页面已关闭并删除会话。这将需要在服务器上安装一些稍微不寻常的软件。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-08-27T03:26:42.260

我在这里遇到了这个问题，我有一个不同的解决方案：

```
 checkSessionTime();
    $interval(checkSessionTime, 2000);
    function checkSessionTime() {
        var now = (new Date()).getTime();
        if (!$localStorage.lastPing) {
            $localStorage.lastPing = now;
        }

        if ($localStorage.lastPing < now - 5000) {
            $localStorage.lastPing = undefined;
            AuthService.logout();
        } else {
            $localStorage.lastPing = now;
        }
    } 
```

我喜欢这个解决方案，因为它不会增加 ping 服务器的开销，也不会依赖窗口卸载事件。这段代码被放在了`$app.run`.

我正在使用带有 JWT 身份验证的角度，这种方式让我注销只是意味着摆脱身份验证令牌。但是，如果您需要完成会话服务器端，您可以构建 Auth 服务以在完成会话时执行一次 ping，而不是继续 ping 以保持会话处于活动状态。

这个解决方案解决了我的问题，因为我的意图只是为了防止不需要的用户在关闭选项卡并离开 PC 时访问他们的帐户。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-12-16T05:27:48.543

经过大量搜索后，我在 javascript 中编写了以下自定义代码，并在 c# 中编写了用于会话终止的服务器端代码。

如果同一网站在多个选项卡中打开，则下面的代码将被扩展，因此会话一直存在，直到网站的一个选项卡打开

```
//Define global varible 
var isCloseWindow = false;

 //Jquery page load function to register the events

 $(function () {
        //function for onbeforeuload
        window.onbeforeunload = ConfirmLeave;
        //function for onload
        window.onload = ConfirmEnter;

        //mouseover for div which spans the whole browser client area 
        $("div").on('mouseover', (function () {
        //for postback from the page make isCloseWindow global varible to false
            isCloseWindow = false;
        }));
        //mouseout event
        $("div").on('mouseout', (function () {
     //for event raised from tabclose,browserclose etc. the page make isCloseWindow global varible to false
            isCloseWindow = true;
        }));
    });
     //Key board events to track  the  browser tab or browser closed by ctrl+w or alt+f4 key combination
    $(document).keydown(function (e) {
        if (e.key.toUpperCase() == "CONTROL") {
            debugger;
            isCloseWindow = true;
        }
        else if (e.key.toUpperCase() == "ALT") {
            debugger;
            isCloseWindow = true;
        }
        else {
            debugger;
            isCloseWindow = false;
        }
    });

    function ConfirmEnter(event) {
        if (localStorage.getItem("IsPostBack") == null || localStorage.getItem("IsPostBack") == "N") {
            if (localStorage.getItem("tabCounter") == null || Number(localStorage.getItem("tabCounter")) == 0) {
                //cookie is not present
                localStorage.setItem('tabCounter', 1);

            } else {
                localStorage.setItem('tabCounter', Number(localStorage.getItem('tabCounter')) + 1);
            }
        }
        localStorage.setItem("IsPostBack", "N");
    }
    function ConfirmLeave(event) {
        if (event.target.activeElement.innerText == "LOGOUT") {
            localStorage.setItem('tabCounter', 0);
            localStorage.setItem("IsPostBack", "N");
        } else {
            localStorage.setItem("IsPostBack", "Y");
        }
        if ((Number(localStorage.getItem('tabCounter')) == 1 && isCloseWindow == true)) {
            localStorage.setItem('tabCounter', 0);
            localStorage.setItem("IsPostBack", "N");
            **Call Web Method Kill_Session using jquery ajax call**
        } else if (Number(localStorage.getItem('tabCounter')) > 1 && isCloseWindow == true) {
            localStorage.setItem('tabCounter', Number(localStorage.getItem('tabCounter')) - 1);
        }
    }

 //C# server side WebMethod
 [WebMethod]
  public static void Kill_Session()
    {
        HttpContext.Current.Session.Abandon();
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-07-05T22:04:46.217

对于这个问题，我尝试了 2 个解决方案：*window.onbeforeunload*事件和*sessionStorage*

*   由于 *window.onbeforeunload*不仅用于关闭浏览器，还用于重定向、标签刷新、新标签，因此它不是一个强大的解决方案。也有事件没有发生的情况：通过命令行关闭浏览器，关闭计算机

*   我切换到使用`sessionStorage`. 当用户登录时，我将 sessionStorage 变量设置为“true”；当应用程序加载时，我会检查这个变量是否存在，否则我会强制用户登录。但是我需要跨选项卡共享 sessionStorage 变量，这样用户在打开时不会被迫登录在同一个浏览器实例中的新选项卡中，我能够通过利用[存储事件](https://developer.mozilla.org/en-US/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API)来做到这一点；一个很好的例子可以在[这里找到](https://stackoverflow.com/questions/20325763/browser-sessionstorage-share-between-tabs)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2021-02-22T10:56:35.563

```
tabOrBrowserStillAliveInterval;

constructor() {
  // system should logout if the browser or last opened tab was closed (in 15sec after closing)
  if (this.wasBrowserOrTabClosedAfterSignin()) {
    this.logOut();
  }

  // every 15sec update browserOrTabActiveTimestamp property with new timestamp
  this.setBrowserOrTabActiveTimestamp(new Date());
  this.tabOrBrowserStillAliveInterval = setInterval(() => {
    this.setBrowserOrTabActiveTimestamp(new Date());
  }, 15000);
}

signin() {
  // ...
  this.setBrowserOrTabActiveTimestamp(new Date());
}

setBrowserOrTabActiveTimestamp(timeStamp: Date) {
  localStorage.setItem(
    'browserOrTabActiveSessionTimestamp',
    `${timeStamp.getTime()}`
  );
}

wasBrowserOrTabClosedAfterSignin(): boolean {
  const value = localStorage.getItem('browserOrTabActiveSessionTimestamp');

  const lastTrackedTimeStampWhenAppWasAlive = value
    ? new Date(Number(value))
    : null;
  const currentTimestamp = new Date();
  const differenceInSec = moment(currentTimestamp).diff(
    moment(lastTrackedTimeStampWhenAppWasAlive),
    'seconds'
  );

  // if difference between current timestamp and last tracked timestamp when app was alive
  // is more than 15sec (if user close browser or all opened *your app* tabs more than 15sec ago)
  return !!lastTrackedTimeStampWhenAppWasAlive && differenceInSec > 15;
} 
```

工作原理：如果用户关闭浏览器或关闭所有打开*的应用程序*选项卡，则在 15 秒超时后 - 将触发注销。

*   它适用于打开多个窗口
*   服务器上没有额外的负载
*   F5/刷新没问题

浏览器限制是我们在注销前需要 15 秒超时的原因。由于浏览器无法区分这些情况：浏览器关闭、选项卡关闭和选项卡刷新。所有这些动作都被浏览器视为相同的动作。所以 15 秒超时就像一种解决方法，只捕获浏览器关闭或关闭所有打开*的应用程序*选项卡（并跳过刷新/F5）。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2021-11-13T00:51:57.347

我最初[在这里](https://stackoverflow.com/questions/3888902/detect-browser-or-tab-closing/69950530#69950530)发布了这个，但为了连续性，我将在这里重新发布。

浏览器进行了更新，以便在离开应用程序时更好地吸引用户。事件 'visibilitychange' 可让您在页面从另一个选项卡中隐藏或关闭时进行跟踪。您可以跟踪文档可见性状态。属性 document.visibilityState 将返回当前状态。您将需要跟踪登录和退出，但它更接近目标。

更新的浏览器支持这一点，但 safari（我们知道）从不符合标准。您可以使用 'pageshow' 和 'pagehide' 在 safari 中工作。

您甚至可以使用诸如 sendBeacon 之类的新 API 在选项卡关闭且不应期待响应时向服务器发送单向请求。

我构建了一个用于跟踪它的类的快速端口。我不得不删除框架中的一些调用，所以它可能是错误的，但这应该让你开始。

```
export class UserLoginStatus
{
    /**
     * This will add the events and sign the user in.
     */
    constructor()
    {
        this.addEvents();
        this.signIn();
    }

    /**
     * This will check if the browser is safari. 
     * 
     * @returns {bool}
     */
    isSafari()
    {
        if(navigator && /Safari/.test(navigator.userAgent) && /Chrome/.test(navigator.userAgent))
        {
            return (/Google Inc/.test(navigator.vendor) === false);
        }
        return false;
    }

    /**
     * This will setup the events array by browser.
     * 
     * @returns {array}
     */
    setupEvents()
    {
        let events = [
            ['visibilitychange', document, () =>
            {
                if (document.visibilityState === 'visible')
                {
                    this.signIn();
                    return;
                }

                this.signOut();
            }]
        ];

        // we need to setup events for safari
        if(this.isSafari())
        {
            events.push(['pageshow', window, (e) =>
            {
                if(e.persisted === false)
                {
                    this.signIn();
                }
            }]);

            events.push(['pagehide', window, (e) =>
            {
                if(e.persisted === false)
                {
                    this.signOut();
                }
            }]);
        }

        return events;
    }

    /**
     * This will add the events.
     */
    addEvents()
    {
        let events = this.setupEvents();
        if(!events || events.length < 1)
        {
            return;
        }

        for(var i = 0, length = events.length; i < length; i++)
        {
            var event = events[i];
            if(!event)
            {
                continue;
            }

            event[1].addEventListener(event[0], event[3]);
        }
    }

    /**
     * 
     * @param {string} url 
     * @param {string} params 
     */
    async fetch(url, params)
    {
        await fetch(url, 
        {
            method: 'POST',
            body: JSON.stringify(params)
        });
    }

    /**
     * This will sign in the user.
     */
    signIn()
    {
        // user is the app
        const url = '/auth/login';
        let params = 'userId=' + data.userId;

        this.fetch(url, params);
    }

    /**
     * This will sign out the user.
     */
    signOut()
    {
        // user is leaving the app

        const url = '/auth/logout';
        let params = 'userId=' + data.userId;

        if(!('sendBeacon' in window.navigator))
        {
            // normal ajax request here
            this.fetch(url, params);
            return;
        }

        // use a beacon for a more modern request the does not return a response
        navigator.sendBeacon(url, new URLSearchParams(params));
    }
} 
```

# eclipse - 我可以在 GitHub 上放置一个已停产的 GPL 软件吗？

> ID：13400522
> 
> 赞同：-1
> 
> 时间：2012-11-15T15:19:31.360
> 
> 标签：eclipse, plugins, github, licensing, gpl

我最近正在研究一个在柏林大学开发的 Eclipse 建模插件，当我向他们询问时，该项目已停止并已终止。他们在他们的网站上声明该项目在 GPL 下，但我没有在源代码中找到任何 GPL 通知。他们在其网站上以 zip 格式提供源代码。

我想改进这个软件，我想让项目保持活力。但我需要它在源代码控制和适当的许可下。所以我希望它在 GitHub 或类似网站上进行进一步开发。

我可以将源代码移动到 GitHub 吗？正确的方法是什么？

项目名称为 ActiGra

项目网站为： [ActiGra网站](http://www.user.tu-berlin.de/lieske/tfs/projekte/actigra/)

[源压缩文件](http://www.user.tu-berlin.de/lieske/tfs/projekte/actigra/ActiGra.zip)

我感谢任何指南。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:46:53.897

你可以

*   采用
*   调整
*   分发

任何 GPL 项目，项目页面上的版权声明使讨论的项目变得干净（根据 GPL 许可）

# php - 使 cURL cookie 在连续 curl_exec 连接中工作

> ID：13400523
> 
> 赞同：0
> 
> 时间：2012-11-15T15:19:35.223
> 
> 标签：php, curl, web-crawler

我正在使用 cURL 和 DOM PHP 抓取网页。网络有一个产品部分，您可以在其中逐页查看所有产品，并且您还有用于更简洁搜索的子部分，在每页中列出了 9 个产品。

我需要存储子部分的信息以获取产品所属的信息。我从所有小节的 URL 开始，上面的程序显示了我如何尝试获取小节的下 9 个产品页面。

问题在于网络使用一些我认为它在 cookie 上的信息进行重定向，因为网络中没有发布跟踪。

例如：在所有产品部分，第二页的 URL 如下：

www.example.com/product/?n=2

任何小节的第一页都有一个唯一的 URL，例如：

www.example.com/product/subsection

问题是下一个小节页面（接下来的 9 个产品）的链接是

www.example.com/product/?n=2

URL 与所有产品部分相同，但它显示子部分产品。问题是我得到的是 ALL PRODUCTS 页面而不是 SUBSECTION 页面。

我尝试过使用 cookie，但没有得到明显的结果。有什么建议吗？

```
<?php
    private ckfile;

    public function main()
    {
        $this->ckfile = tempnam ("C:/Web/", "CURLCOOKIE");
        $copy = $this->get_page();

        $next_visit = $this->link_next($copy);
        while($next_visit != false){//it's not last page
            $copy = $this->get_page($next_visit,$get_name($next_visit));
            $next_visit = $this->link_next($copy);
        }
    }

    public function get_page($URL = "http://www.example.com" , $nombre = "example" )
    {       
        $ch = curl_init();
        $options = array(
                        CURLOPT_HTTPHEADER      => array("Accept-Language: es-es,en"),
                        CURLOPT_USERAGENT       => "Googlebot/2.1 (+http://www.google.com/bot.html)",
                        CURLOPT_AUTOREFERER     => true,         // set referer on redirect ,
                        CURLOPT_ENCODING        => "",               //allow all encodings
                        CURLOPT_FOLLOWLOCATION  => true,         // follow redirects
                        CURLOPT_HEADER          => false,               
                        CURLOPT_CONNECTTIMEOUT  => 120,          // timeout on connect 
                        CURLOPT_TIMEOUT         => 120,          // timeout on response 
                        CURLOPT_MAXREDIRS       => 10,           // stop after 10 redirects 
                        CURLOPT_COOKIEFILE      => $this->ckfile,
                        CURLOPT_COOKIEJAR       =>  $this->ckfile,
                        CURLOPT_RETURNTRANSFER  => true,
                        CURLOPT_URL             => $URL
                        );
        curl_setopt_array($ch, $options);

        $g = 'C:/Web/'.$nombre.'.html';
        if(!is_file($g)){
            $fp=fopen ($g, "w");
            curl_setopt ($ch,CURLOPT_FILE, $fp);
            $trash = curl_exec ($ch); // don't browse them       
            fclose($fp); 
        }
        curl_close ($ch);
    return $g;      
    }

    public function link_next($value)
    {
        # function that searches the DOM for a link and returns a well formed URL
            # or returns false if doesn't find one( last page)
    }
?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:24:15.923

要使用 curl multi 拨打多个电话：

```
$ch = curl_multi_init(); 
```

不是

```
 $ch = curl_init(); 
```

有关示例，请参阅此帖子[多个 PHP cUrl 帖子到同一页面](https://stackoverflow.com/questions/4368603/multiple-php-curl-posts-to-same-page)

# svn - Team Foundation Server 2012 中的 SVN 外部替代方案

> ID：13400532
> 
> 赞同：13
> 
> 时间：2012-11-15T15:20:00.843
> 
> 标签：svn

目前我们使用 SVN 进行源代码控制。由于开发环境中的额外功能和集成，我们希望迁移到 TFS 2012。

我们有很多运行在 asp.net 中的门户。在我们的门户中，我们使用了很多标准组件。目前所有门户网站都使用相同的代码库。这意味着每当我们更改共享代码库中的某些内容时（无论何时发布门户），它都会自动分发。我们非常习惯这种工作方式，并且我们知道在其他门户中存在破坏代码的风险。但是，在所有其他门户中发布更改将花费大量时间。所以要做到这一点，我们在 SVN 中使用外部。

我真的很想保持这个功能正常运行。所以我的问题是，有没有一种方法可以在 SVN 中创建一个类似外部的系统，或者是否有一种非常好的方法可以有效地替换这个功能。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T23:14:00.383

[Visual Studio Team Foundation Server Branching and Merging Guide](http://vsarbranchingguide.codeplex.com/)中有一些建议。

如果您下载“Everything”包并查看“所有指南”压缩包并阅读“高级版本控制指南”。

第 5-19 页（2.1 版）介绍了管理共享资源，那里有很多内容，总结一下 Stack Overflow 可能会对 Ranger 造成不公平，所以我只是指出您那里。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-05T22:07:04.990

底线：没有 TFS 没有等效于“svn:externals”。

代码共享很糟糕，会导致代码重复而不是代码重用。而是依赖于编译的代码。

您应该只依赖于共享库的“输出”而不是源文件。至于场景，我想不出建议在产品/解决方案之间共享源文件的场景。

原因是事情会很快变得复杂而笨拙。如果您将多个依赖项移动到一个共享库，这些库都更改为相同的代码并且它们交替地相互破坏，该怎么办。解决这个问题的唯一方法是开始将您的通用代码分支到其他项目中，这现在增加了一定程度的复杂性和集成，从长远来看永远无法处理，您最终将获得相同代码库的三个或更多版本时间。

你应该做的是有一个单一的核心组件被改变和构建以产生输出。然后可以根据需要将该输出拉入依赖于这些更改或不依赖于这些更改的其他项目中。这会导致更少的损坏、更好的架构和更少的技术债务。

您甚至可以使用托管在内部服务器上的 NuGet 来发布您的通用组件，并在新版本可用时通知每个消费者。

# c# - 优化比较多个事物的 foreach 循环

> ID：13400536
> 
> 赞同：-2
> 
> 时间：2012-11-15T15:20:12.280
> 
> 标签：c#, dictionary

> **可能重复：**
> [优化双 foreach 循环](https://stackoverflow.com/questions/13398909/optimizing-double-foreach-loop)

我正在尝试将双 foreach 循环变成单个 foreach 循环

```
foreach (KeyValuePair<Int64, MyObject> kvp in originCounts)
{
    foreach (KeyValuePair<Int64, MyObject> testkvp in originCounts)
    {
    //Run Comparison on testkvp ad kvp to see if all elements of object are the same
    }
} 
```

MyObject 是这样定义的

```
public class MyObject 
{
    public string FirstName{ get; set; }
    public string LastName{ get; set; }
    public int UserID { get; set; }
    public string Address { get; set; }
} 
```

反正有没有使用一个循环来做到这一点？当它们都相同时，我将它们添加到 Int64 列表中。是同一个字典。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:24:51.820

如果你有一个`IEnumberable`of `KeyValuePair`s 那么你可以做这样的事情：

```
public bool AreAllSame(IEnumberable<KeyValuePair<Int64, MyObject>> list)
{
  return list.Select(kv => kv.Value).Distinct().Count == 1;
} 
```

不确定它是否真的*经过优化*，但它更短！:-]

当然，无论您要比较什么，都需要具有可比性。

# python - py.test：如何自动检测子进程中的异常？

> ID：13400546
> 
> 赞同：5
> 
> 时间：2012-11-15T15:20:29.080
> 
> 标签：python, testing, multiprocessing, pytest

我在一个大量使用多处理的模块的上下文中在 Linux 上运行 py.test。子进程中的异常不会被检测为错误。示例测试文件`pytest_mp_test.py`：

```
import multiprocessing

def test_mp():
    p = multiprocessing.Process(target=child)
    p.start()
    p.join()

def child():
    assert False 
```

执行：

```
$ py.test pytest_mp_test.py 
================================== test session starts ===================================
platform linux2 -- Python 2.7.3 -- pytest-2.3.3
plugins: cov
collected 1 items 

pytest_mp_test.py .

================================ 1 passed in 0.04 seconds ================================ 
```

未检测到错误。使用以下命令调用时会打印异常`-s`：

```
$ py.test -s pytest_mp_test.py 
================================== test session starts ===================================
platform linux2 -- Python 2.7.3 -- pytest-2.3.3
plugins: cov
collected 1 items 

pytest_mp_test.py Process Process-1:
Traceback (most recent call last):
  File "/apps11/bioinfp/Python-2.7.3/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
  File "/apps11/bioinfp/Python-2.7.3/lib/python2.7/multiprocessing/process.py", line 114, in run
    self._target(*self._args, **self._kwargs)
  File "/home/bioinfp/jang/hobbyproggorn/gevent-messagepipe/gevent-messagepipe/pytest_mp_test.py", line 9, in child
    assert False
AssertionError: assert False
.

================================ 1 passed in 0.04 seconds ================================ 
```

当我手动查看测试日志时，我意识到什么时候有问题。但是，**我想知道是否有一种巧妙的方法可以在使用 py.test 的孩子中自动检测异常。**

我必须在父母中验证孩子的退出代码吗？这是唯一的方法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T15:39:23.153

经过进一步考虑，我认为仅在子进程中捕获预期异常并检查子进程的退出状态是一种非常干净可靠的解决方案，它不会在测试中添加额外的 IPC 组件。示例代码：

```
import multiprocessing
from py.test import raises

class CustomError(Exception):
    pass

def test_mp_expected_fail():
    p = multiprocessing.Process(target=child_expected_fail)
    p.start()
    p.join()
    assert not p.exitcode

def test_mp_success():
    p = multiprocessing.Process(target=child)
    p.start()
    p.join()
    assert not p.exitcode

def test_mp_unexpected_fail():
    p = multiprocessing.Process(target=child_unexpected_fail)
    p.start()
    p.join()
    assert not p.exitcode

def child_expected_fail():
    with raises(CustomError):
        raise CustomError

def child_unexpected_fail():
    raise TypeError

def child():
    pass 
```

执行：

```
$ py.test pytest_mp_test.py 
================================== test session starts ===================================
platform linux2 -- Python 2.7.3 -- pytest-2.3.3
plugins: cov
collected 3 items 

pytest_mp_test.py ..F

======================================== FAILURES ========================================
________________________________ test_mp_unexpected_fail _________________________________

    def test_mp_unexpected_fail():
        p = multiprocessing.Process(target=child_unexpected_fail)
        p.start()
        p.join()
>       assert not p.exitcode
E       assert not 1
E        +  where 1 = <Process(Process-3, stopped[1])>.exitcode

pytest_mp_test.py:23: AssertionError
------------------------------------ Captured stderr -------------------------------------
Process Process-3:
Traceback (most recent call last):
  File "/apps11/bioinfp/Python-2.7.3/lib/python2.7/multiprocessing/process.py", line 258, in _bootstrap
    self.run()
  File "/apps11/bioinfp/Python-2.7.3/lib/python2.7/multiprocessing/process.py", line 114, in run
    self._target(*self._args, **self._kwargs)
  File "/home/bioinfp/jang/hobbyproggorn/gevent-messagepipe/gevent-messagepipe/pytest_mp_test.py", line 31, in child_unexpected_fail
    raise TypeError
TypeError
=========================== 1 failed, 2 passed in 0.07 seconds =========================== 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-20T07:41:43.480

```
import pytest

@pytest.fixture
def runproc(request):
    import multiprocessing
    def Process(target):
        p = multiprocessing.Process(target=target)
        p.start()
        p.join()
        return p
    return Process

class CustomError(Exception):
    pass

def test_mp_expected_fail(runproc):
    p = runproc(child_expected_fail)
    assert not p.exitcode

def test_mp_success(runproc):
    p = runproc(target=child)
    assert not p.exitcode

def test_mp_unexpected_fail(runproc):
    p = runproc(child_unexpected_fail)
    assert not p.exitcode

def child_expected_fail():
    with pytest.raises(CustomError):
        raise CustomError

def child_unexpected_fail():
    raise TypeError

def child():
    pass 
```

如果你把这个“runproc”fixture 放到一个 conftest.py 文件中，你可以在项目的任何函数中接受“runproc”。

# visual-studio - web.config 与引用文件夹中的引用

> ID：13400552
> 
> 赞同：0
> 
> 时间：2012-11-15T15:20:54.867
> 
> 标签：visual-studio

我想知道在引用文件夹中添加引用和在 webconfig 文件中添加引用有什么区别。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:26:01.987

恕我直言，如果需要，使用 IDE 添加引用将负责复制/构建 DLL，而 web.config 仅在运行时（应用程序启动）检查引用，因此手动将它们添加到 web.config 可能是一个不太健壮的解决方案。

# asp.net - Asp.net 4.0 SQLServer 2008 在英国托管

> ID：13400554
> 
> 赞同：0
> 
> 时间：2012-11-15T15:20:59.587
> 
> 标签：asp.net, sql, sql-server-2008

我刚刚完成了自己的网络应用程序，我正在研究哪个是英国最好的网络托管解决方案？我将不胜感激任何输入，因为我发现很难通过 cr*p。谢谢，
阿德里安

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:35:45.887

不确定它是否真的适用于这个网站，因为它本身并不是直接编程......

无论如何，我使用[Hosting UK](http://www.hostinguk.net)作为我的虚拟主机，.NET 4.0 和 SQL 2008 数据库都可用，以及中等信任环境，因此您可以在应用程序中包含其他二进制文件。

我也发现他们的支持非常好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:37:26.650

我们使用[NimbusHosting](http://www.nimbushosting.co.uk)进行托管，并对他们的服务感到非常满意。他们提供 Windows 和 Linux 的 VPS 包。

我们目前只使用 Linux，所以很遗憾，我无法验证他们允许的 SQL Server 版本（很可能是 Express）。

# r - R中的蒙特卡洛积分

> ID：13400559
> 
> 赞同：0
> 
> 时间：2012-11-15T15:21:24.790
> 
> 标签：r

我需要将[蒙特卡洛](http://mathworld.wolfram.com/MonteCarloIntegration.html)积分应用于使用 R 的函数。我能够绘制方程，但不知道如何在其上绘制随机点。

将不胜感激有关如何做到这一点的任何见解。

我用来绘图的函数是基本的 plot() 函数，具有`x`所需的范围和`y`方程。

谢谢你。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T15:59:39.327

绘制曲线最好的方法是使用`curve`函数：

```
f = function(x) x^2 + 1   
curve(f(x), -2,2, ylim=c(0, 5)) 
```

然后，您可以通过以下`points`函数将点添加到绘图中：

```
points(runif(100, -2, 2), runif(100, 0, 6)) 
```

并使用比较计算蒙特卡罗估计：

```
N = 100000
sum(f(runif(N, -2, 2)) > runif(N, 0, 6))/N * (4*6) 
```

![在此处输入图像描述](../Images/9f7013d9ca1dabf8920c22dd78f26591.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:46:18.203

您可以使用生成随机点

```
xx <- runif(100,min=0,max=1)
yy <- runif(100,min=0,max=1) 
```

并将它们添加到现有的情节中

```
points(xx,yy) 
```

请参阅`?points`帮助页面。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:52:22.790

鉴于我对您的理解正确，这是我的解决方案版本。

基本代码：

```
 x<-seq(-4,4,0.1)
    y<-2*x^2-3*x
    plot(x,y)
    points(x, rnorm(length(x), 20, 10), col="red") 
```

这会将红色的随机点添加到您现有的函数中。

![视觉的](../Images/2f6f8369212981c7ae3d7390c24a7159.png)

# c# - 检索附加列值时 LINQ 错误无效列

> ID：13400561
> 
> 赞同：0
> 
> 时间：2012-11-15T15:21:26.160
> 
> 标签：c#, sql-server, linq, exception

我有以下 LINQ 查询。

```
 // Query the database
    IEnumerable<BestSeller> best_sellers = from bs in (db.smd_group)
                                           where bs.COMPANY == "SMD Textiles"
                                           where bs.DOCDATE > six_months_back
                                           where bs.CUSREF == customer.customer_ref
                                           group bs by bs.PRODCODE into g
                                           orderby g.Sum(x => x.MQTY) descending
                                           select new BestSeller()
                                           {
                                               product_code = g.Key.Trim(),
                                               total_quantity = Convert.ToString(g.Sum(x => x.MQTY)),
                                               // ERROR Occurs when the following line is removed
                                               //product_description = g.First().prd_prddes
                                           };

    // Get the top 25 products
    top25 = best_sellers.Take(25); 
```

如您所见，我已经注释掉了`BestSeller`创建对象的行。

我希望`product_description`在我的`BestSeller`对象中设置。所以我在下面添加了一行：

```
product_description = g.First().prd_prddes 
```

“prd_prddes”是包含我们产品描述的列的名称。

但是，一旦我将此行添加到我的查询中，我就会收到一个奇怪的错误：

> 列名“PRODCODE”无效。
> 
> 列名“PRODCODE”无效。
> 
> 列名“PRODCODE”无效。
> 
> 说明：执行当前 Web 请求期间发生未处理的异常。请查看堆栈跟踪以获取有关错误及其源自代码的位置的更多信息。
> 
> 异常详细信息：System.Data.SqlClient.SqlException：列名“PRODCODE”无效。列名“PRODCODE”无效。列名“PRODCODE”无效。

`product_description`列名 PRODCODE 显然不是无效的，因为如果我删除该行，它就可以正常工作。

这是非常奇特的...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:41:46.490

看起来您所拥有的任何内容都`g`没有名为`'PRODCODE'`

就个人而言，我会做的是，我只是`g`在您的 select 语句中选择，然后我会创建一个断点并使用调试器查看其中的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:10:46.133

您是否检查过所有`PRODCODE`结果是否有效？听起来可能一个为空或为空。这意味着您仍然可以按它进行分组，但是一旦您尝试选择它，它就会抛出该错误。

试试这个：

```
product_description = g.FirstOrDefault() == null 
    ? g.FirstOrDefault().prd_prddes  
    : "Empty"; 
```

如果第一项为空，它将回退并显示“空”。不过，我不确定第一项是否为空，所以它可能不起作用......

# php - Wordpress 和 Sessions，只选择 Wordpress

> ID：13400566
> 
> 赞同：0
> 
> 时间：2012-11-15T15:21:37.470
> 
> 标签：php, wordpress

我有 Wordpress 网站，我在其中设置了自己的表来存储用户登录凭据。人们可以很好地注册，但是当需要登录并创建会话时，它似乎不起作用。

这是在我的标题中：

```
<?php
// Initialize session
session_start();
// Initialize DB
include("functions/connect.php");
<span class="login">
      <?php  
        if(!empty($_SESSION['LoggedIn']) && !empty($_SESSION['Username']))  
        { 
      ?>
        <p>Welcome, <?php echo $_SESSION['Username']?></p>
      <?php 
        }
        else
        {
      ?>
        <p>Login</p><p>|</p><p>Signup</p>
      <?php } ?>
</span> 
```

这是在我的登录页面上。

```
<?php 
    if(isset($_POST['name']) && !empty($_POST['name']) AND isset($_POST['password']) && !empty($_POST['password']) AND isset($_POST['name']) && !empty($_POST['name'])){
                $username = mysql_escape_string($_POST['name']);
                $password = mysql_escape_string(md5($_POST['password']));

                $search = mysql_query("SELECT username, password, active FROM wp_thread_users WHERE username='".$username."' AND password='".$password."' AND active='1'") or die(mysql_error()); 
                $match  = mysql_num_rows($search);

                if($match > 0){
                    $msg = 'Login Complete! Thanks';
                    //$email = $row['EmailAddress'];  
                    $_SESSION['Username'] = $username;  
                    //$_SESSION['EmailAddress'] = $email;  
                    $_SESSION['LoggedIn'] = 1;  
                }else{
                    $msg = 'Login Failed!<br /> Please make sure that you enter the correct details and that you have activated your account.';
                }
            }

        ?>
        <!-- stop PHP Code -->

        <!-- title and description -->  
        <h2>Login Form</h2>
        <p>Please enter your name and password to login</p>

        <?php 
            if(isset($msg)){ // Check if $msg is not empty
                echo '<div class="statusmsg">'.$msg.'</div>'; // Display our message and add a div around it with the class statusmsg
            } ?>

        <!-- start sign up form --> 
        <form action="" method="post">
            <label for="name">Username:</label>
            <input type="text" name="name" value="" />
            <label for="password">Password:</label>
            <input type="password" name="password" value="" />

            <input type="submit" class="submit_button" value="login" />
        </form> 
```

我的代码可以在没有 Wordpress 的常规 php 页面上运行，但是一旦我登录 Wordpress 站点，它就会将我重定向到“wp-login.php”，它也从不存储会话。有什么帮助吗？

编辑：

忘了补充这是我的functions.php

```
add_action('init', 'initEverything');

function initEverything() {
    if(!session_id()) {
        session_start();
    }
} 
```

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:31:03.373

I know it's really annoying when people ask questions like this rather than help, but why aren't you just using WordPress's wp_users table? Then you can just log someone in with one line function `wp_signon`:

[http://codex.wordpress.org/Function_Reference/wp_signon](http://codex.wordpress.org/Function_Reference/wp_signon)

You might be creating extra work for yourself by not using WordPress's out-of-the-box user management stuff.

**EDIT:** Given our comments below, here's some pointers on simple ways to do what you're trying to do using WordPress's `wp_users`. I've done exactly what you're trying to achieve on other sites and I'd highly recommend not creating a custom user table.

**Custom user meta:** [http://codex.wordpress.org/Function_Reference/add_user_meta](http://codex.wordpress.org/Function_Reference/add_user_meta)

**Prevent users accessing wp-admin (one of many many simple ways of doing this):** [http://pento.net/2011/06/19/preventing-users-from-accessing-wp-admin/](http://pento.net/2011/06/19/preventing-users-from-accessing-wp-admin/)

I'm actually writing a blog post on how to do this at the moment so I'll let you know once it's up.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T01:29:47.670

我知道这现在已经过时了，但我终于创建了一个方法来做我认为你正在尝试做的事情。我可以充实一些内容，例如添加用户元数据，但我希望得到您的反馈并知道它是否对您有帮助：

[http://haveposts.com/2013/01/how-to-create-a-really-simple-custom-wordpress-login-and-sign-up-without-plugins/](http://haveposts.com/2013/01/how-to-create-a-really-simple-custom-wordpress-login-and-sign-up-without-plugins/)

这是博客的第一篇文章，因此欢迎您提出任何其他想法。

干杯，

杰克

# php - 使用 cakephp 将包含 url 的变量传递给 ajax 会导致错误

> ID：13400568
> 
> 赞同：0
> 
> 时间：2012-11-15T15:21:52.067
> 
> 标签：php, ajax, cakephp

传递变量时，我的 ajax 代码一切顺利，可以说“hello world”，但是当传递包含“hello world http//www.facebook.com”之类的变量时，实际上会导致很多问题。

实际上它是我遇到问题的变量“new_textarea”。为了澄清事情说，

```
var new_textarea = "hello world"; //successfully saves it to database 
```

但当

```
var new_textarea = "http://www.facebook.com" // will lead to problems 
```

这是我的ajax代码：

```
$.ajax({
url: '/learns/quickpostcomment/'+user_discussion_id+'/'+user_id+'/'+new_textarea+'/'+parent_id,
success: function(data){
}}); 
```

这是我的 cakephp：

```
public function quickpostcomment()
{
    $post = $this->params['pass'];
    $this->ClassroomComment->create();
    $this->ClassroomComment->set('classroom_id', $post[0]);
    $this->ClassroomComment->set('user_id', $post[1]);
    $this->ClassroomComment->set('comment', $post[2]);
    $this->ClassroomComment->set('parent_id', $post[3]);
    $this->ClassroomComment->save();
    die;
} 
```

到目前为止，我检查的所有内容都是触发问题的是变量包含 url 时变量上的“/”或斜杠。

有什么方法可以将变量传递给包含斜杠或 url 的 ajax？我非常需要帮助:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:28:02.260

尝试`encodeURIComponent()`在您的变量周围使用`new_textarea`。有关使用and的更多信息，请参阅[此答案](https://stackoverflow.com/a/3608791/343465)。`encodeURI()``encodeURIComponent`

在您的`quickpostcomment()`操作中，您可能需要使用[urldecode()](http://php.net/urldecode)函数`$post[2]`。我不记得蛋糕是否会自动为您执行此操作，但我怀疑确实如此。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T15:37:38.860

我认为您应该使用 Ajax 而不是 GET 发送 POST 请求。如果您正确构建发布的数据，您可以在您从标准 Cake 表单获取数据时在您的操作中获取它们。

```
jQuery.ajax({   
    url     : "<?php echo Router::url(array('controller' => 'learns', 'action' => 'quickpostcomment'), true); ?>,
    type    : "POST",
    cache   : false,
    data    : "data[ClassroomComment][user_discussion_id]=" + user_discussion_id + "&data[ClassroomComment][user_id]=" + user_id + "&data[ClassroomComment][new_textarea]=" + new_textarea + "&data[ClassroomComment][parent_id]=" + parent_id,
    success : function(data){

    }
}; 
```

然后，发布的数据将在您的控制器中可用：

```
$this->request->data['ClassroomComment'] 
```

# networking - 一般情况下UDP丢包？

> ID：13400569
> 
> 赞同：0
> 
> 时间：2012-11-15T15:21:53.013
> 
> 标签：networking, udp

我正在为游戏设计一个网络协议，其中包含 acked 事件和 non-acked 实时数据。仅出于设计考虑，当我将数据包大小保持在 512 字节以下且总吞吐量小于 128Kbps 时，我可以预期什么样的数据包丢失？

我正在寻找有关丢包百分比的实际数字，以及丢包的平均块（只有一个，或者通常是连续 4 个？）。

# android - android TTS 安装语言（如果不存在）

> ID：13400570
> 
> 赞同：2
> 
> 时间：2012-11-15T15:22:02.280
> 
> 标签：android

我尝试`JAPANESE`在我的 Android 4 设备上使用语言。

```
int value = tts.setLanguage(Locale.JAPANESE); 
```

但值为-2。

这是我的检查代码

```
protected void check(int requestCode, int resultCode, Intent data) {
        if (requestCode == 0) {
            switch (resultCode) {
            case TextToSpeech.Engine.CHECK_VOICE_DATA_PASS:
                tts = new TextToSpeech(this, this);
                break;
            case TextToSpeech.Engine.CHECK_VOICE_DATA_BAD_DATA:
            case TextToSpeech.Engine.CHECK_VOICE_DATA_MISSING_DATA:
            case TextToSpeech.Engine.CHECK_VOICE_DATA_MISSING_VOLUME:
                Intent installIntent = new Intent();
                installIntent.setAction(TextToSpeech.Engine.ACTION_INSTALL_TTS_DATA);
                startActivity(installIntent);
                break;
            case TextToSpeech.Engine.CHECK_VOICE_DATA_FAIL:
            default:
                Log.e(TAG, "Got a failure. TTS not available");
            }
        }
    } 
```

如果不存在，我想安装语言。但应用程序崩溃。这是正确的，我该怎么办？如何获得日语？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:31:03.967

You start your method by testing result code is equal to 0 and then have a swith on result code value (which you already know is equal to 0):

```
 if (requestCode == 0) {
        switch (resultCode) { 
```

As written in your code, if language is not installed `tts` will not be initialized and any further reference to it will crash you application.

You can see the correct way to do it in [An introduction to Text-To-Speech in Android](http://android-developers.blogspot.pt/2009/09/introduction-to-text-to-speech-in.html)

Regards.

# aggregate-functions - SPARQL 中的多个聚合

> ID：13400576
> 
> 赞同：3
> 
> 时间：2012-11-15T15:22:17.297
> 
> 标签：aggregate-functions, sparql

我有一个包含邮件存档数据的三重存储。因此，假设我有很多人 ( `foaf:Person`) 发送 ( `ex:hasSent`) 和接收 ( `ex:hasReceived`) 电子邮件 ( `ex:Email`)。

例子：

```
SELECT ?person ?email
WHERE {
    ?email  rdf:type   ex:Email.
    ?person rdf:type   foaf:Person;
            ex:hasSent ?email.
} 
```

当然，同样适用于`ex:hasReceived`。现在我想做一些统计和分析，即确定一个人发送和接收了多少封电子邮件。仅对一个谓词执行此操作是一种简单的聚合：

```
SELECT ?person (COUNT(?email) AS ?count)
WHERE {
    ?email  rdf:type   ex:Email.
    ?person rdf:type   foaf:Person;
            ex:hasSent ?email.
}
GROUP BY ?person 
```

但是，我还需要收到电子邮件的数量，我想这样做而不必发出单独的查询。所以我尝试了以下方法：

```
SELECT ?person (COUNT(?email1) AS ?sent_emails) (COUNT(?email2) AS ?received_emails)
WHERE {
  ?person rdf:type foaf:Person.

  ?sent_email rdf:type ex:Email.
  ?person ex:hasSent ?sent_email.

  ?received_email rdf:type ex:Email.
  ?person ex:hasReceived ?received_email.
}
GROUP BY ?person 
```

这似乎不对，因为发送和接收的电子邮件数量完全相同。我认为这是因为我的 SPARQL 语句导致一个人曾经发送和接收的所有邮件的交叉产品，对吗？

为了在每个人的基础上获得正确的统计数据，我需要做什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:30:52.313

`COUNT(?email1)`没有计算任何`?email1`未定义的东西。此外，正如您提到的，存在部分交叉产品 -`DISTINCT`会有所帮助。

尝试`(COUNT(DISTINCT ?sent_email) AS ?sent_emails)`

# orm - 从 postgres DB 在 Doctrine 2 中生成映射

> ID：13400579
> 
> 赞同：5
> 
> 时间：2012-11-15T15:22:24.870
> 
> 标签：orm, doctrine, zend-framework2

我正在使用 Doctrine 中的 ORM 从 Postgres DB 生成 xml 文件。我有复合主键的问题。

我有三个测试表：payment_plan、system_string、payment_plan_option。

表：

```
payment_plan:
   id                PK
   name_string_id    PK   FK  (system_string.id)

system_string:
   id                PK
   value         
   language_id   

payment_plan_option:
   id                PK
   payment_plan_id   PK     FK (payment_plan.id)
   price 
```

当我为表 *payment_plan*和*payment_plan_option*生成 XML 时，一切正常。

当我为表*payment_plan*和*system_string*生成时，出现错误：

```
[Doctrine\ORM\Mapping\MappingException]                                             
Single id is not allowed on composite primary key in entity Api\Entity\PaymentPlan 
```

我尝试向 payment_plan 添加一些字段，使其看起来像 payment_plan_option 但没有任何效果。

# ruby-on-rails - 如何在 Ruby on Rails 中动态创建允许浏览器缓存的缓存资产？

> ID：13400580
> 
> 赞同：0
> 
> 时间：2012-11-15T15:22:25.067
> 
> 标签：ruby-on-rails, ruby, caching

我有一个 Web 应用程序，它使用填充了数据的 .js 文件来驱动前端。这些文件可能很大，所以我希望浏览器缓存它们。它们是所有用户都可以使用的静态数据，因此我还希望对它们进行页面缓存，因为它们的创建可能很耗时。

驱动它们的数据在后端随机变化。因此，当数据发生变化时，我想使服务器页面缓存和用户的浏览器缓存失效，从而导致刷新。

该应用程序还具有大量静态资产，我们使用带有预编译的资产管道在生产中提供它们（无动态编译）。

我如何对这些文件进行页面缓存，以便在不影响完整 Rails 堆栈和浏览器缓存的情况下快速为所有用户提供服务……但在需要更新时也使两者无效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:16:36.863

也许这很容易

```
javascript_include_tag 'jquery.js', 'jquery-ui.js', :cache => 'cached/all' 
```

看一下[**关于缓存的 Rails API**](http://guides.rubyonrails.org/caching_with_rails.html)，[**Jammit gem**](http://documentcloud.github.com/jammit/)也很有用。

# java - 如何让 Google GIN 在 DevMode 中与 Google-Eclipse 插件一起工作？

> ID：13400581
> 
> 赞同：1
> 
> 时间：2012-11-15T15:22:31.313
> 
> 标签：java, gwt, dependency-injection, gwt-gin, google-eclipse-plugin

我正在试验我的第一个使用 GIN 的 GWT 应用程序。我本质上是在模仿他们的*入门*教程中的完全相同的源代码示例。在该教程的最后，作者提到您需要为 GWT 编译器提供指向已编译 Java 二进制文件的类路径。他们用于执行此操作的示例[是使用 Ant 目标完成的](http://code.google.com/p/google-gin/wiki/GinTutorial#Compilation)。

虽然我将有一个自动化的（Ant 驱动的）构建也模拟这个构建任务，但我希望能够从 Eclipse 内部运行/调试我的 GWT 应用程序，而无需启动 Ant 构建。

所以我问：在 Eclipse（开发模式）中运行我的 GWT 应用程序时，如何配置 GIN 库以指向已编译的类？提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:55:49.703

您需要做的就是将`gin.jar`（和依赖项，可能只是`guice.jar`）添加到项目的类路径中。

不应要求将*这些*复制`WEB-INF/lib/`到.`guice.jar``gin.jar`

# android - 我真的需要保存实例状态吗

> ID：13400586
> 
> 赞同：2
> 
> 时间：2012-11-15T15:22:49.177
> 
> 标签：android

我正在开发一个不支持屏幕旋转的应用程序。我真的需要保存所有活动的实例状态吗？android杀死活动有多罕见？如果活动被杀死并恢复，它只会像用户第一次看到它时那样看起来，如果系统已经杀死它，这可能是很久以前的事了。如果这种情况很少发生，对我来说这似乎不是一个糟糕的用户体验。你怎么看？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:36:45.047

It is a catastrophic UX if an application loses its state just because I went to the settings to change the screen brightness. This happens frequently on 512MB RAM devices - which are still sold in large quantities. There are even devices with 256MB produced right now.

Yes, it happens a lot. It will happen to certain users much more frequent than to others. Those users will have no pardon with your app.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:31:03.737

it really depends on the type of screens you are developing. When the activity contains a lot of data for example, it should be convenient to save the state of your activity (not all activities).

If you have several fields that the user must refill, it can be a bad experience especially if the virtual keyboard of device is not that easy (assume you are using a Galaxy mini for example)

In other words, it is a good practice but its up to you to decide if the user experience will be degraded or not

Serge

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T18:56:30.287

FWIW，我已经为我们当前的产品编写了几个单向应用程序，我觉得保存状态仍然很重要。当一切都是您返回时离开的方式时，它只会使应用程序更有用。

一般来说，这也不是很多工作。首先，请记住，如果您为布局中的视图分配 ID，则默认的 Activity.onSaveInstanceState() 将完成大部分工作。它会记住 Checkbox 状态、EditText 内容等。您需要保存的内容相对较少。以下是我在状态中保存的一些内容：

*   相关活动参数
*   列表查看位置信息
*   TabView 中的当前选项卡

活动参数是迄今为止最常见的。

# ruby-on-rails - 激活 Ruby RAKE 10.0.1，需要 10.0.0

> ID：13400587
> 
> 赞同：4
> 
> 时间：2012-11-15T15:22:49.830
> 
> 标签：ruby-on-rails, rake

当我尝试运行“rake test”时出现此错误：

```
avery@ubuntu:~/rails_projects/depot$ rake test
rake aborted!
You have already activated rake 10.0.1, but your Gemfile requires rake 10.0.0\. Using bundle exec may solve this.
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/runtime.rb:31:in `block in setup'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/runtime.rb:17:in `setup'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler.rb:116:in `setup'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/setup.rb:7:in `<top (required)>'
/home/avery/rails_projects/depot/config/boot.rb:6:in `<top (required)>'
/home/avery/rails_projects/depot/config/application.rb:1:in `<top (required)>'
/home/avery/rails_projects/depot/Rakefile:5:in `<top (required)>'
(See full trace by running task with --trace) 
```

当我尝试运行“bundle exec rake”时，我得到：

```
rake aborted!
Could not find a JavaScript runtime. See https://github.com/sstephenson/execjs for a list of available runtimes.
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/execjs-1.4.0/lib/execjs/runtimes.rb:51:in `autodetect'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/execjs-1.4.0/lib/execjs.rb:5:in `<module:ExecJS>'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/execjs-1.4.0/lib/execjs.rb:4:in `<top (required)>'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `require'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/coffee-script-2.2.0/lib/coffee_script.rb:1:in `<top (required)>'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `require'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/coffee-script-2.2.0/lib/coffee-script.rb:1:in `<top (required)>'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `require'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/coffee-rails-3.2.2/lib/coffee-rails.rb:1:in `<top (required)>'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/runtime.rb:68:in `require'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/runtime.rb:68:in `block (2 levels) in require'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/runtime.rb:66:in `each'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/runtime.rb:66:in `block in require'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/runtime.rb:55:in `each'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler/runtime.rb:55:in `require'
/home/avery/.rvm/gems/ruby-1.9.3-p327/gems/bundler-1.2.2/lib/bundler.rb:128:in `require'
/home/avery/rails_projects/depot/config/application.rb:7:in `<top (required)>'
/home/avery/rails_projects/depot/Rakefile:5:in `require'
/home/avery/rails_projects/depot/Rakefile:5:in `<top (required)>'
(See full trace by running task with --trace) 
```

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-16T14:25:51.120

你可能`rake 10.0.0`在你的`Gemfile.lock`.

删除`Gemfile.lock`可能会解决问题。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T22:10:36.840

对于问题的第一部分：我遇到了同样的问题并通过以下方式解决了它：

```
gem regenerate_binstubs 
```

在那之后

```
gem -V 
```

再次显示 10.0.0。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-16T10:50:26.990

## 第一个问题的答案

在您的`Gemfile`中，通过以下方式明确设置最新的 rake 版本

```
gem 'rake', '~> 10.0.1' 
```

然后运行

```
$ bundle update rake 
```

## 第二个问题的答案

把它放在你的`Gemfile`并运行 bundle install

```
gem 'therubyracer' 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-15T15:25:31.093

对于问题的第二部分，您只需将其添加到您的 Gemfile 中：

```
gem 'therubyracer' 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-07T21:32:05.727

If you've specified a rake version in your Gemfile that your project requires, eg:

```
gem 'rake', '~> 10.0.0' 
```

Try installing it again

```
bundle install 
```

# wordpress - 如何使用 zee 样式主题更改 Wordpress 标题中的字体

> ID：13400590
> 
> 赞同：2
> 
> 时间：2012-11-15T15:22:55.923
> 
> 标签：wordpress, fonts

我被困住了，我创建了一个带有 zee 风格主题的 WordPress 网站。我还应用了一个名为“FONT”的插件来编辑样式表并应用自定义字体。一切正常，我的字体已上传到我用来更改标题的[http://fontsforweb.com服务。](http://fontsforweb.com)更新 WordPress 和 zee 风格主题后，我所有的工作都消失了，我不能再使用那种字体了。[http://fontsforweb.com](http://fontsforweb.com)试图帮助我，他们进行了几次更新，但没有积极的结果。因此，我删除了该插件，并尝试通过将字体转换为 woff 格式并使用下面的代码自行完成，但仍然无法正常工作。恐怕我将不得不重做整个网站。请帮助我避免这种情况。

更新：我玩过其他主题，问题完全一样。在我看来，这是它自己制造这个问题的 WordPress。

`#logo h1 { font-size: 2.5em; color: #fff; font-family: "jadem___"; src: url('jadem___.woff'); }`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:26:47.243

我认为正确的方法是创建一个子主题并从那里编辑您的样式表。这篇文章比我能解释得更好[教程](http://www.webdesignerdepot.com/2011/12/creating-your-first-wordpress-child-theme/)

这将使您的主题经受住未来的考验，并在您更新时防止它发生变化。

更改字体也是您无需插件即可轻松完成的事情。再一次[，其他人可以比我更好地解释这一点](http://wpmu.org/adding-custom-fonts-to-wordpress-with-font-face-and-css/)

这可能看起来像是一个狡猾的答案，但我认为如果您检查这些链接，那将是有意义的。这是处理这个长期问题的正确方法，而且比看起来更容易。希望这可以帮助。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-29T10:32:45.590

“字体”插件现在使用 WOFF 文件格式，所以再试一次。

# java - Java - 覆盖文件的特定部分

> ID：13400591
> 
> 赞同：0
> 
> 时间：2012-11-15T15:22:58.113
> 
> 标签：java, file, io, random-access

我想使用 Java 更新文本文件的特定部分。我希望能够扫描文件并选择要更新的特定行，有点像在数据库中，例如给定文件：

```
ID Value
1  100
2  500
4  20 
```

我想插入 3 并更新 4，例如

```
ID Value
1  100
2  500
3  80
4  1000 
```

有没有办法实现这个（看似）简单的任务？我知道您可以附加到文件，但我对随机访问更感兴趣

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:24:44.973

将文件加载到内存中，更改您的值，然后重新写入文件

如果有一种方法可以在不加载文件的情况下插入文件，我还没有听说过。您必须先将其他数据移开。

除非您正在处理大文件，否则性能通常不是太大的问题

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:26:45.480

> 我知道您可以附加到文件，但我对随机访问更感兴趣

您正在尝试在文件中间插入和删除字节。你不能那样做。文件系统根本不（通常）支持这一点。您可以*覆盖*特定字节，但不能插入或删除它们。

*如果*您的记录是固定长度（以字节为单位），您可以使用随机访问更新特定记录，但看起来情况并非如此。

您可以将整个文件加载到内存中，也可以从原始文件中读取，将旧数据或新数据写入到新文件中，以每行为基础。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:28:59.247

您可以使用 java 中的随机访问文件来执行此操作，您可以使用可用的方法放置当前的写入和读取位置。[你可以在这里](http://docs.oracle.com/javase/tutorial/essential/io/rafs.html%22Here%22)探索更多

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T16:04:54.447

正如前面的答案所说，使用流是不可能做到这一点的。您可以尝试使用属性，即可以在文本文件中保存和修改的键值对。例如，您可以使用以下命令向文件添加新属性

```
setProperty(String key, String value) 
```

此方法添加一个新属性，或者如果已经存在，则使用选择的键修改属性的值。

显然，在文件末尾添加了新属性，但是缺少排序对于性能来说不是问题，因为对文件的访问是通过调用 Hashtable 方法 put 的 getProperty 方法进行的。

有关一些示例，请参见本教程：

[http://docs.oracle.com/javase/tutorial/essential/environment/properties.html](http://docs.oracle.com/javase/tutorial/essential/environment/properties.html)

# node.js - 使用express获取带有nodejs的静态目录？

> ID：13400593
> 
> 赞同：0
> 
> 时间：2012-11-15T15:23:03.057
> 
> 标签：node.js, express

我已经设置了在我的 nodejs 应用程序中使用的静态 web 目录：

```
app.use express.static(process.cwd(), 'www') 
```

这会打开所有静态文件，如 css、图像等，当我在根目录中时它可以工作

```
http://localhost:8124/ 
```

但是，如果我去 /tags 之类的地方，它不会调出静态文件：

```
http://localhost:8124/tags/ 
```

我在控制台上收到 404 错误，因为它试图访问 www 文件夹

> /标签/www/ ....

我不知道如何解决这个问题，谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:34:44.333

看起来您指的是静态资产，没有前导`/`，这会导致将相对资产地址附加到当前 URL。而是使用前导引用您的静态资产`/`

例如。`/www/style.css`而不是`www/style.css`

# javascript - 了解基于 CORS 的 XMLHttpRequest (responseText)

> ID：13400594
> 
> 赞同：20
> 
> 时间：2012-11-15T15:23:04.273
> 
> 标签：javascript, xmlhttprequest, cors

对于一个项目，我正在研究各种 HTML5 和 Javascript 元素以及它们周围的安全性，我现在正试图了解 CORS。

根据我的测试，如果我删除..

```
<?php
 header("Access-Control-Allow-Origin: *"); 
 header('Access-Control-Allow-Methods: GET, POST, OPTIONS');
 ?> 
```

..从尝试访问的页面中，我在 Chrome 的控制台日志中看到以下内容：

```
XMLHttpRequest cannot load http://www.bla.com/index.php. Origin http://bla2.com is not allowed by Access-Control-Allow-Origin. 
```

我理解这是正确的，但是 Wireshark 在返回中显示 HTTP/1.1 200 OK，并且在数据中显示了所请求页面的来源。那么，即使它实际上已被传输，是否只是浏览器和 Javascript 阻止了 responseText 以任何实质性方式被使用？

代码如下：

```
 function makeXMLRequest() {
  xmlhttp=new XMLHttpRequest();
xmlhttp.onreadystatechange = function() {
    if (xmlhttp.readyState==4) {
        alert(xmlhttp.responseText);
    }
}
xmlhttp.open("GET","http://www.bla.com/index.php",true);
xmlhttp.send();
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-15T15:40:07.143

对于像 GET 或 POST 这样的“简单”HTTP 动词，是的，整个页面都被获取，然后浏览器决定 JavaScript 是否可以使用这些内容。服务器不需要知道请求来自哪里；检查来自服务器的回复并确定是否允许 JS 看到内容是*浏览器的工作。*

For a "non-simple" HTTP verb like PUT or DELETE, the browser issues a "preflight request" using an OPTIONS request. In that case, the browser first checks to see if the domain *and* the verb are supported, by checking for `Access-Control-Allow-Origin` and `Access-Control-Allow-Methods`, respectively. (See the "*Handling a Not-So-Simple Request*" on the [CORS page](http://www.html5rocks.com/en/tutorials/cors/) of HTML5 Rocks for more information.) The preflight response also lists permissible non-simple headers, included in `Access-Control-Allow-Headers`.

This is because allowing a client to send a DELETE request to the server could be very bad, even if JavaScript never gets to see the cross-domain result -- again, remember that the server is generally not under any obligation to verify that the request is coming from a legitimate domain (although it *may* do so using the `Origin` header from the request).

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-15T15:25:30.097

> 那么，即使它实际上已被传输，是否只是浏览器和 Javascript 阻止了 responseText 以任何实质性方式被使用？

是的。您可以使用 JS 提出任何您喜欢的请求。

它是对同源策略阻止的数据的访问。

做恶意事情的请求（例如“ `POST http://bank.example/give/money?to=attacker`”或“ ” `POST http://forum.example.com/post?message=spamspamspamspam"`）称为[CSRF攻击](http://en.wikipedia.org/wiki/Cross-site_request_forgery)，必须由服务器进行防御。

# java - 我可以在 JAVA 中使用什么设计模式来满足这个要求

> ID：13400597
> 
> 赞同：2
> 
> 时间：2012-11-15T15:23:19.517
> 
> 标签：java, design-patterns

我在一个文件夹中有 3 种不同类型的文件。每个文件都有相同的数据保存到员工表中。

文件类型：

1.  XML
2.  Excel
3.  。文本

我编写了 3 个单独的类，它们有两种方法，将 filePath 作为 String 参数并返回`EmployeeVO`Object 或`List<EmployeeVO>`.

否则我想删除这些。

```
List<EmployeeVO>  list ;
 if(fileName.endsWith(".xml")){
    list =   XmlReader();
 }else if(fileName.endsWith(".EXCEL")){
    list =     ExcelReader();
 }else if(fileName.endsWith(".TXT")){
    list =     TxtReader();
 } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:24:20.630

我认为您可以在这里使用[**命令**](http://en.wikipedia.org/wiki/Command_pattern)模式。它可用于替换繁琐的 switch / if 块，这些块在您添加新选项时往往会无限增长。

另一种选择可能是[**工厂**](http://en.wikipedia.org/wiki/Factory_method_pattern)模式。您将 if / switch 包含在一个工厂中，该工厂负责处理丑陋并隐藏大量 ifs。

*当然，您可以将两者结合起来*。这仅取决于您的偏好和使用它的环境。

顺便说一句：**不要仅仅因为它们花哨就**使用它们，在你**需要**它们的地方使用它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T15:28:48.997

有时最简单的解决方案是最好的和最易读的：

```
switch(FilenameUtils.getExtension(fileName).toUpperCase()) {
    case "XML":
        return XmlReader();
     case "EXCEL":
        return next ExcelReader();
    case "TXT":
        return new TxtReader();
    default:
        //...
} 
```

我正在使用[`FilenameUtils.getExtension()`](http://commons.apache.org/io/api-release/org/apache/commons/io/FilenameUtils.html#getExtension%28java.lang.String%29)( [*source*](http://commons.apache.org/io/api-release/src-html/org/apache/commons/io/FilenameUtils.html#line.995) ) 并打开 Java 7 中的字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T15:28:58.560

您可以使用一种策略：

```
// class field holding association from readers to extension
Map<String, Reader> readers = new HashMap<String, Reader>();

// configuration (bean initialization for example)
readers.put("xml", xmlReader);
readers.put("xls", excelReader);
readers.put("txt", txtReader);

// execution would be something like:
List<EmployeeVO> list = readers.get(fileExtension).readList(); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T15:59:39.383

在我看来，您可以使用**责任链**设计模式。下面是一个非常好的示例，类似于您的情况。

[http://www.javacodegeeks.com/2012/09/chain-of-responsibility-design-pattern.html](http://www.javacodegeeks.com/2012/09/chain-of-responsibility-design-pattern.html)

希望能帮助到你。

更新：当我在看答案时，我同意在某些情况下，一个简单的解决方案也是最可取和最易读的。不过，如果您想使用设计模式来设计代码，我会说**责任链**的优势在于它可以消除代码中的所有 if{}else{} 语句。您只需要解析器和每个解析器的后继者。该解决方案可能存在一些性能缺点，但它会使代码更具可扩展性。在某些情况下，您需要进行交易，因此您应该考虑项目的要求。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-15T15:30:09.540

You have to use the Factory Pattern. Your XML, EXCEL, TEXT Readers should extend your base abstract class / interface Reader.

Based on the input passed, you should return the corresponding Reader.

public interface Reader {

```
public void save(File file) throws Exception; 
```

}

public class ReaderFactory {

```
public Reader getReader(File file) {
    Reader reader = null;
    if xml then reader = new XMLReader();
    else ....
} 
```

}

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-11-15T15:25:09.457

在某些时候，您将需要执行 if/else 逻辑，这是不可避免的。您可以将其移至`EmployeeFileParser`具有派生类和静态方法的类，该静态方法将根据文件后缀确定要实例化的方法。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-15T15:33:26.920

我会让每个读者决定它支持什么格式。简而言之：

*   创建一个超级阅读器类，如果需要，将特殊类（ExcelReader 等）包装在您自己的类中
*   在超类中添加一个抽象的 canProcess(String filename)，并在您的专门类中实现它（它应该确定专门的 readerclass 是否可以处理文件）
*   在超类中创建一个静态方法，该方法循环读取器类并确定要使用的类，并使用它

这样，您可以动态地为任何文件类型创建新的阅读器。

# python - DTD 验证失败 (Python)

> ID：13400601
> 
> 赞同：4
> 
> 时间：2012-11-15T15:23:47.020
> 
> 标签：python, xml, dtd, libxml2

我正在做一个 Python 脚本，它从作为输入传递的 XML + DTD 生成文件，但它失败了，因为 DTD 无法验证，而我“视觉上”没有看到任何问题。

这是我的代码：

```
DTD = 'scenario.dtd'

def OpenXML(xmlDesc):
    dtd = libxml2.parseDTD(None,DTD)
    ctxt = libxml2.newValidCtxt()
    doc = libxml2.parseDoc(xmlDesc)

    frags = doc.xpathEval('/scenario/config_script/param/*')
    for frag in frags:
        frag.unlinkNode()   # We remove children of param for validation

    if doc.validateDtd(ctxt, dtd) != 1:
        print "ERROR : DTD Validation failed ! "
        sys.exit()

    doc.freeDoc()
    dtd.freeDtd()

    return libxml2.parseFile(xmlDesc) 
```

所以这里是 DTD，以及我作为参数传递的 XML 字符串 (xmlDesc)

**原始 DTD (scenario.dtd)**

```
 <!ELEMENT scenario (name, description, config_script*)>
 <!ELEMENT name (#PCDATA)>
 <!ELEMENT description (#PCDATA)>
 <!ELEMENT config_script (param)>
 <!ELEMENT param ANY>

 <!ATTLIST scenario target (win32|win64|linux32|linux64) "win32">
 <!ATTLIST config_script name CDATA #REQUIRED>
 <!ATTLIST config_script repository CDATA #REQUIRED> 
```

**dtd 变量的值（函数的第一行）**

```
<!DOCTYPE none SYSTEM "scenario.dtd" [
 <!ELEMENT scenario (name, description, config_script*)>
 <!ELEMENT name (#PCDATA)>
 <!ELEMENT description (#PCDATA)>
 <!ELEMENT config_script (param)>
 <!ELEMENT param ANY>

 <!ATTLIST scenario target (win32|win64|linux32|linux64) "win32">
 <!ATTLIST config_script name CDATA #REQUIRED>
 <!ATTLIST config_script repository CDATA #REQUIRED>

]> 
```

**xml**（对我来说，一切都在同一行，但为了便于阅读，我换行了）

```
<config_scripts>
    <script name="reset" repository="config_os">
        <param>
            <user>
                <name/>
                <full_name/>
                <password/>
                <groups/>
            </user>
        </param>
    </script>
</config_scripts> 
```

我终于得到了这个错误->`ERROR : DTD Validation failed !`

另外，我可以在控制台中阅读：

```
No declaration for element config_script
No declaration for element script
No declaration for attribute name of element script
No declaration for attribute repository of element script
No declaration for element user 
No declaration for element full_name
No declaration for element password
No declaration for element groups 
```

但据我所知，它们是被宣布的......或者可能是因为我把所有标记都留空了？

有任何想法吗 ？

最好的问候，谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T18:41:33.527

我不确定 Python 代码是否有任何问题，但我可以告诉您您的 DTD 有什么问题。

首先，您的 doctype 声明应该与您的根元素的名称相匹配。你有`none`，但你的根元素是`config_scripts`.

`scenario.dtd`您正在加载从“scenario.dtd”中引用。您应该删除系统标识符。

在您的 xml 中，您有一个`script`未定义的元素。您确实有一个`config_script`定义，因此需要更改 XML 或 DTD。我在示例中更改了 DTD。（我还结合了 ATTLIST 声明。）

您也没有定义这些元素：`user`、`full_name`、`password`和`groups`.

下面是 DTD 的样子（对 XML 没有任何修改）：

```
<!DOCTYPE config_scripts [
<!ELEMENT scenario (name, description, config_script*)>
<!ELEMENT name (#PCDATA)>
<!ELEMENT description (#PCDATA)>
<!ELEMENT config_scripts (script)>

<!ELEMENT script (param)>
<!ATTLIST script 
           name CDATA #REQUIRED
           repository CDATA #REQUIRED> 

<!ELEMENT param ANY>

<!ELEMENT user (name,full_name,password,groups)>
<!ELEMENT full_name (#PCDATA)>
<!ELEMENT password (#PCDATA)>
<!ELEMENT groups (#PCDATA)>

<!ATTLIST scenario target (win32|win64|linux32|linux64) "win32">
]> 
```

XML 在 oXygen 中针对这个 DTD 进行验证，因此如果需要进行任何其他更改，很可能需要在 Python 代码中进行。

# c - 用英文打印一个整数

> ID：13400602
> 
> 赞同：5
> 
> 时间：2012-11-15T15:23:53.110
> 
> 标签：c, integer

我正在编写一个代码来显示 C 语言中任何正整数的数字。例如，整数 345 将显示为三四五。

我编写的代码适用于所有数字都大于 0 的整数。但某些整数（如 10、304、0 等）无法正确显示。为了挑战，不允许使用递归和数组。只允许循环和 if 构造。有什么建议么？

```
#include<stdio.h>
int main(void)
{
    int num, num_copy, accum = 1;

    printf("Enter an integer ");
    scanf("%i",&num);

    num_copy = num;

    while (num > 0){

    while (num > 9){
        num = num / 10;
        accum *= 10;
        }
        switch (num){

        case (1):
                printf("one ");
                break;
        case (2):
                printf("two ");
                break;
        case (3):
                printf("three ");
                break;
        case (4):
                printf("four ");
                break;
        case (5):
                printf("five ");
                break;
        case (6):
                printf("six ");
                break;
        case (7):
                printf("seven ");
                break;
        case (8):
                printf("eight ");
                break;
        case (9):
                printf("nine ");
                break;
        }
        num_copy = num_copy - (num*accum);
        num = num_copy;
        accum = 1;
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:20:34.160

哦！这听起来很有趣！没有数组也没有递归对吗？

因此，由于我们不能使用递归，我们需要向后构建数字：

```
#include<stdio.h>
int main(void)
{
    int num, backwards = 0, digit, backupzeros = 0;

    printf("Enter an integer ");
    scanf("%i",&num);            // get the number

    while(num > 0){
        digit = num % 10;    // pry off the last digit
        num /= 10;           // take off the digit

        if((backwards == 0) && (digit == 0))    // If it's a number that ends in 0
            backupzeros++;                   // save it, we'll use that later

        backwards = (backwards * 10) + digit; // glue it on backwards
    }

    // Now we have the number reversed. Next we need to print the digits

    while (backwards > 0){
        digit = backwards % 10;
        backwards /= 10;

        switch (digit){

        case 1:
                printf("one ");
                break;
        case 2:
                printf("two ");
                break;
        case 3:
                printf("three ");
                break;
        case 4:
                printf("four ");
                break;
        case 5:
                printf("five ");
                break;
        case 6:
                printf("six ");
                break;
        case 7:
                printf("seven ");
                break;
        case 8:
                printf("eight ");
                break;
        case 9:
                printf("nine ");
                break;
        default:
                printf("zero ");
                break;
        }
    }

    while(backupzeros > 0) {
        printf("zero ");
        backupzeros--;
    }

    return 0;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T15:35:04.517

如果您编写递归函数，它将帮助您避免用于以相反顺序打印的循环：

```
#include<stdio.h>

void print_num(int num)
{
if(num == 0) return;
print_num(num/10);

        switch (num%10){

        case (1):
                printf("one ");
                break;
        case (2):
                printf("two ");
                break;
        case (3):
                printf("three ");
                break;
        case (4):
                printf("four ");
                break;
        case (5):
                printf("five ");
                break;
        case (6):
                printf("six ");
                break;
        case (7):
                printf("seven ");
                break;
        case (8):
                printf("eight ");
                break;
        case (9):
                printf("nine ");
                break;
        case (0):
                printf("zero ");
                break;
        }
}

int main(void)
{
    int num, num_copy, accum = 1;

    printf("Enter an integer ");
    scanf("%i",&num);
    print_num(num);

    return 0;
} 
```

使用数组存储数字的非递归解决方案：

```
void print_num(int num)
{
int i=0,j;
int arr[256];

while(num)
{
arr[i++]=num%10;
num/=10;
}

for(j=i-1; j>=0;j--)
{
        switch (arr[j]){

        case (1):
                printf("one ");
                break;
        case (2):
                printf("two ");
                break;
        case (3):
                printf("three ");
                break;
        case (4):
                printf("four ");
                break;
        case (5):
                printf("five ");
                break;
        case (6):
                printf("six ");
                break;
        case (7):
                printf("seven ");
                break;
        case (8):
                printf("eight ");
                break;
        case (9):
                printf("nine ");
                break;
        case (0):
                printf("zero ");
                break;
        }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:47:57.820

这是很多年前的大学练习！

从 1 到 999 的整数

```
#define MAX_BUF 100

int main(){

    int num, i=0, j, digit;
    char *buf[MAX_BUF];

    printf("Integer: ");
    scanf("%d",&num);

    while(num){
        digit = num %10;
        num = num /10;

        switch(digit){
            case 0: buf[i++] = "zero"; break;
            case 1: buf[i++] = "one"; break;
            case 2: buf[i++] = "two"; break;
            case 3: buf[i++] = "three"; break;
            case 4: buf[i++] = "four"; break;
            case 5: buf[i++] = "five"; break;
            case 6: buf[i++] = "six"; break;
            case 7: buf[i++] = "seven"; break;
            case 8: buf[i++] = "eight"; break;
            case 9: buf[i++] = "nine"; break;
        }
    }

    for(j = i-1; j >= 0; j--){
        printf("%s-", buf[j]);
    }

    return 0;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T16:15:27.493

未经测试...

```
char *digitNames[10] = {
    "zero",
    "one",
    ...   // Too lazy to fill in the rest..
    "nine"
}

void displayNumber(uint32_t number) {
    int totalDigits = 0;
    int scale = 10;
    uint32_t divisor = 1000000000;
    uint32_t digit;

    do {
        scale--;
        digit = number / divisor;
        number -= digit * divisor;
        divisor /= 10;
        if(scale == 0) {
            fputs(stdout, digitNames[digit]);
        } else if( (digit != 0) || (totalDigits != 0) )
            printf("%s ", digitNames[digit]);
            totalDigits++;
        }
    } while(scale != 0);
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-15T15:27:05.067

"(..)但某些整数，如 10、304、0",

所有这些数字有什么共同点？“零”就是答案。

您还必须在开关中设置处理零的条件。

你可以这样做：

```
#include<stdio.h>
int main(void)
{
    int num, num_copy, accum = 1;

    printf("Enter an integer ");
    scanf("%i",&num);

    char str[15];
   sprintf(str, "%d", num);

    for(num = 0; str[i] != '\O'; num++)
    {
      switch (num){

        case (1):
                printf("one ");
                break;
        case (2):
                printf("two ");
                break;
        case (3):
                printf("three ");
                break;
        case (4):
                printf("four ");
                break;
        case (5):
                printf("five ");
                break;
        case (6):
                printf("six ");
                break;
        case (7):
                printf("seven ");
                break;
        case (8):
                printf("eight ");
                break;
        case (9):
                printf("nine ");
                break;
        case (0):
            printf("zero ");
                break;
        }
    }

    return 0;
} 
```

您可以使用`sprintf()`将整数转换为`char []`. 然后你只需要遍历那个数组。

# c - 如何避免普通“char”到：“unsigned char”或“signed char”转换的gcc警告？

> ID：13400605
> 
> 赞同：3
> 
> 时间：2012-11-15T15:24:04.583
> 
> 标签：c, linux, gcc, unsigned, signed

我的默认字符类型是 gcc 选项 (-funsigned-char gcc) 中设置的“无符号字符”。所以可以说，当我在代码中需要“unsigned char”时，我可以使用“char”。但是我收到了关于 (char*) 和 (unsigned char* 或 signed char*) 之间转换的警告：

`"error: pointer targets in passing argument 1 of 'test2' differ in signedness"`.

当我将 unsigned char* 变量传递给 char* 时，如何避免警告（知道我的系统具有编译器选项设置的默认 unsigned char）？

```
static void test2(char* a)      //char is unsigned by deafult as set by -funsigned-char gcc option
{
}

void    test1(void)
{
        // This passes, but if i change it to unsigned char (or 'signed char') it fails   
        // I dont want it to fail for "unsigned char c" since default char is unsigned.
        char    c = 65; 
        test2(&c);
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T15:50:32.547

开关`-funsigned-char`并`-fsigned-char`没有参考`char *`。

您可以使用`-Wno-pointer-sign`来关闭收到的警告。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-12T22:26:17.307

正确的解决方案是将正确类型的变量传递给函数，即如果函数需要纯字符，则声明纯字符并获取其地址，依此类推。

C 标准规定“char”、“signed char”和“unsigned char”是不同的类型。"char" 必须具有与 "signed char" 或 "unsigned char" 相同的行为，由编译器开关确定，但您不能互换使用它们。无论您是否使用 -funsigned-char，您都应该编写完全相同的代码。

另一张海报使用演员表的建议并不好。所做的只是抑制警告，明确禁用警告会更清楚（例如，使用编译指示，或在您的生成文件中全局关闭警告）。

演员表并没有解决代码的问题，它只是阻止编译器指出它。这是一个有点学术的观点，但在非 2 的补码系统上，带符号的字符可能有陷阱表示（它们与值 0 <= x <= CHAR_MAX 但不是其他值的布局兼容）。所以代码可能会崩溃。

根据您提供的详细信息，实际上您的最佳解决方案可能只是禁用警告并接受代码在这方面不可移植的事实。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-15T15:28:45.907

使用演员表：

```
char c = 65;   // weird magic :-(

test2((unsigned char *)(&c)); 
```

所有 char 类型都是布局兼容的，并且转换它们的指针不构成类型双关语或违反别名规则，因此您可以自由地这样做。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T15:49:39.307

最后我得到了答案：

-Wpointer-sign 由 -Wall 和 -pedantic 暗示。为了避免警告使用 -Wno-pointer-sign

# regex - 正则表达式捕获不以 A 结尾的单词

> ID：13400608
> 
> 赞同：0
> 
> 时间：2012-11-15T15:24:20.733
> 
> 标签：regex

wordA - 不能被捕获

单词 - 必须被捕获

这行不通....

```
\w+[^A]\b 
```

为什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:28:41.573

`[^A]`将匹配空间：

```
hello world
^^^^^^ 
```

* * *

尝试`look-behind`：

```
\w+(?<=[^A])\b 
```

* * *

如果您正在处理英语单词，请尝试以下操作：

```
\w+[a-zB-Z_]\b 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:38:18.130

尝试消极的回顾：

```
\w+\b(?<!A) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:55:20.880

实际上，我发现了第三种方式，这在我的情况下似乎可行：

```
\w+[^A\s]\b 
```

# android - Android究竟是如何判断是否在线的？

> ID：13400610
> 
> 赞同：15
> 
> 时间：2012-11-15T15:24:24.940
> 
> 标签：android, networking, connectivity

Android究竟是如何确定以下状态的区别的？

1.  网络接口处于活动状态（例如 Wifi 或 3G），但无法访问互联网。

2.  具有活动的网络接口，并且需要要求用户在网页上登录网络。

3.  具有活动的网络接口并且能够访问互联网。

它是否可能向固定 URL（可能在 google.com 上？）发送一个简单的 HTTP 请求并检查返回的文档是否符合预期？如果是这样，我们是否知道使用的 URL？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T23:26:53.073

**更新：**更新代码以避免`NetworkOnMainThreadException`

我目前正在使用以下方法来确定设备是否可以访问互联网：

```
public class NetworkConnectivityHelper {
    public void isDeviceConnectedToInternet(final Activity activity, final ResultCallback callback){

        new Thread(new Runnable() {
            @Override
            public void run() {
                boolean isDeviceConnectedToInternet = false;
                NetworkInfo activeNetworkInfo = ((ConnectivityManager) activity.getSystemService(Context.CONNECTIVITY_SERVICE)).getActiveNetworkInfo();

                if(activeNetworkInfo != null && activeNetworkInfo.isConnected()){
                    try {
                        InetAddress.getByName("google.com").isReachable(2);
                        isDeviceConnectedToInternet = true;
                    } catch (UnknownHostException e){
                        isDeviceConnectedToInternet = false;
                    } catch (IOException e){
                        isDeviceConnectedToInternet = false;
                    }
                }

                final boolean result = isDeviceConnectedToInternet;
                activity.runOnUiThread(new Runnable() {
                    @Override
                    public void run() {
                        callback.done(result);
                    }
                });

            }
        }).start();

    }

    public static abstract class ResultCallback{
        public abstract void done(boolean connected);
    }
} 
```

通过以下方式调用：

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    ....
    //Populate
    NetworkConnectivityHelper networkConnectivityHelper = new NetworkConnectivityHelper();
    networkConnectivityHelper.isDeviceConnectedToInternet(activity, new NetworkConnectivityHelper.ResultCallback() {
        @Override
        public void done(boolean connected) {
            if (connected) {
                //Yey, the device is connected. 
                //Now, do some work
            }else{
                //The device is disconnected
            }
        }
    });
    ....

} 
```

希望这可以帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-15T19:58:58.930

尝试这个：

```
public static boolean isNetworkAvailable(Context context)
{
    ConnectivityManager cm = (ConnectivityManager) context
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo info = cm.getActiveNetworkInfo();

    return (info != null);
} 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-15T19:52:24.903

是的，您也可以发送 ping :)

您应该在小型网络实用程序类中使用的订单操作是： - 检查接口是否在线 - 检查它是否能够打开到 Google.com 的套接字或 ping google.com

# java - 如果使用 java.util.concurrent 数据结构，我是否需要使用“同步”关键字来获取/添加？

> ID：13400612
> 
> 赞同：3
> 
> 时间：2012-11-15T15:24:40.050
> 
> 标签：java, multithreading, concurrency, synchronization, thread-safety

我的代码有一个在许多线程之间共享的数据结构，但我正在使用`LinkedBlockingQueue`，所以在下面的代码中是否需要**同步？**

```
public synchronized String getDirectory(){
    return directoryArray.poll();
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:25:43.903

不，它只会减慢您的应用程序而没有任何好处。`LinkedBlockingQueue#poll()`已经使用可重入锁实现了同步机制：

```
public E poll() {
    final AtomicInteger count = this.count;
    if (count.get() == 0)
        return null;
    E x = null;
    int c = -1;
    final ReentrantLock takeLock = this.takeLock;
    takeLock.lock();
    try {
        if (count.get() > 0) {
            x = dequeue();
            c = count.getAndDecrement();
            if (c > 1)
                notEmpty.signal();
        }
    } finally {
        takeLock.unlock();
    }
    if (c == capacity)
        signalNotFull();
    return x;
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-15T15:26:39.597

我认为您不需要额外的同步。根据文档 -[链接](http://download.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)

> BlockingQueue 实现是线程安全的。所有排队方法都使用内部锁或其他形式的并发控制以原子方式实现其效果。但是，批量收集操作 addAll、containAll、retainAll 和 removeAll 不一定以原子方式执行，除非在实现中另外指定。因此，例如，addAll(c) 在仅添加 c 中的一些元素后可能会失败（抛出异常）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-15T15:28:50.840

自`LinkedBlockingQueue`implements以来`BlockingQueue`，此[记录的行为](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/BlockingQueue.html)适用于它：

> `BlockingQueue`实现是线程安全的。所有排队方法都使用内部锁或其他形式的并发控制以原子方式实现其效果。

这意味着不需要额外的同步。

# ios - 为什么本地 PDF 无法仅在一台设备上绘制 UIDocumentInteractionController？

> ID：13400615
> 
> 赞同：2
> 
> 时间：2012-11-15T15:24:48.000
> 
> 标签：ios, pdf, render

我们有一个应用程序，其捆绑包中包含一堆 PDF。当用户点击按钮或选择表格单元格时，我们希望在 UIDocumentInteractionController 中显示相应的 PDF。

这在我的机器和大多数测试机器上都很好用，但是我有一个用户在他的 iPhone 上看不到任何预览。他给我发了一个屏幕截图；控制器已将其视图推送到导航堆栈上，并且在导航栏中有一个有效的“操作”菜单，在正确的文件名旁边。但是应该显示 PDF 本身的大空间只是深灰色。

那是在运行 6.0.1 的新 iPhone 上；在他的 iPad 上，同样运行 6.0.1，它运行良好；在我运行 5.0.1 的 iPhone 4S 上，它运行良好。“工作正常”意味着它推送完全相同的周围细节，包括文件名和操作菜单，但不是一个大的灰色空间，而是 PDF 的工作预览。

我的视图控制器层次结构由一个选项卡控制器组成，在每个选项卡中，一个导航控制器。同样的问题存在于导航堆栈深处的几个级别的表视图中，或者来自导航堆栈顶层的 HTML 视图中。呈现控制器的代码如下所示：

```
 self.DIC = [UIDocumentInteractionController interactionControllerWithURL:url];
        self.DIC.delegate = self;
        [self.DIC presentPreviewAnimated:YES]; 
```

唯一实现的委托方法是：

```
- (UIViewController *) documentInteractionControllerViewControllerForPreview: (UIDocumentInteractionController *) controller {
    if (curTabViewController) return curTabViewController;
    return tabCtrl;
} 
```

这将返回我在 tabBarController:didSelectViewController 中设置的当前导航视图控制器。我可以说这是有效的，因为 DIC 已将其视图推送到导航堆栈上，而不是模态弹出。

所以。知道为什么 UIDocumentInteractionController 无法在某些设备上而不是其他设备上绘制预览吗？

更新：我已经成功地设置了这个设备进行调试。日志文件中出现的唯一线索是这个错误：

```
Cannot find preview item for loaded proxy: <QLPreviewItemProxy: 0x1fd67820> - 
file://localhost/var/mobile/Applications/22DDE4EB-6FB6-4364-87D6-E3680E1E1A9B
/agilentJAL.app/BuiltInFiles/help/Getting_Started.pdf 
```

我搜索了互联网，发现[了这个问题](https://stackoverflow.com/questions/12712890/ios-6-0-quicklook-qlpreviewcontroller-errors-with-cannot-find-preview-item-for)，但它似乎不适用于我的情况。我已经仔细检查了路径，它看起来是正确的（并且 DIC 菜单可以成功地通过电子邮件发送文档，在 DropBox 中打开它等）知道还有什么可能导致这个错误吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-05-04T12:05:17.857

尝试访问导航控制器而不是标签栏。这为我解决了这个问题。在 documentInteractionControllerViewControllerForPreview 中：​

```
if let navigationController = self.navigationController {
    return navigationController
} else {
    return self
} 
```

# c# - 从 SmtpClient 获取 SMTP 服务器问候消息

> ID：13400621
> 
> 赞同：2
> 
> 时间：2012-11-15T15:25:10.753
> 
> 标签：c#, .net, smtp, smtpclient

有什么方法可以使用 .NET获取**SMTP 服务器问候消息**`SmtpClient`？

问候消息是 SMTP 服务器响应的第一行：

```
S: 220 smtp.example.com ESMTP Postfix    <----- I need this line
C: HELO relay.example.org
S: 250 Hello relay.example.org, I am glad to meet you
C: MAIL FROM:<bob@example.org>
S: 250 Ok
C: RCPT TO:<alice@example.com>
S: 250 Ok
C: RCPT TO:<theboss@example.com>
S: 250 Ok
C: DATA
S: 354 End data with <CR><LF>.<CR><LF>
C: From: "Bob Example" <bob@example.org>
C: To: "Alice Example" <alice@example.com>
C: Cc: theboss@example.com
C: Date: Tue, 15 January 2008 16:02:43 -0500
C: Subject: Test message
C:
C: Hello Alice.
C: This is a test message with 5 header fields and 4 lines in the message body.
C: Your friend,
C: Bob
C: .
S: 250 Ok: queued as 12345
C: QUIT
S: 221 Bye
{The server closes the connection} 
```

提前致谢！

沃特

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:34:05.443

SmtpClient 旨在抽象出诸如此类的 SMTP 细节。

您最好打开与 SMTP 服务器的[套接字](http://msdn.microsoft.com/en-us/library/600stss7.aspx)连接并从中[读取](http://msdn.microsoft.com/en-us/library/system.net.sockets.socket.receive.aspx)响应。

# .net - 序列化多个流 .NET

> ID：13400622
> 
> 赞同：0
> 
> 时间：2012-11-15T15:25:12.377
> 
> 标签：.net, sockets, serialization

我需要能够将文件+元数据发送到另一台计算机上的服务，并且该服务应该对数据进行操作并返回多个文件+元数据。

问题是文件有时非常大，因此在客户端或服务器分配内存来保存文件和相关元数据是不可行的。

我想知道是否有任何库可以包含文件流和其他数据，将它们组合成一个流，以便能够通过网络传输它们。

到目前为止，我最好的解决方案是首先发送包括文件长度在内的序列化元数据，然后将不同的文件流附加到该流，然后在另一端解构该流。希望有更优雅的方法来解决这个问题？

我想我正在寻找类似 BinaryFormatter 的东西，它支持对我希望序列化的流的内容进行序列化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:39:40.377

我的网络库可以毫无问题地发送非常大的流。而且它也可以做得非常快（当前的 HTTP 服务器实现在我的计算机上每秒处理 2700 个请求）。

您只需告诉库发送一个流，它就会使用块来完成。

检查 HTTP 服务器示例，因为它只是为正文执行此操作：[https ://github.com/jgauffin/griffin.networking/blob/master/Source/Protocols/Http/Griffin.Networking.Protocol.Http/HttpService.cs](https://github.com/jgauffin/griffin.networking/blob/master/Source/Protocols/Http/Griffin.Networking.Protocol.Http/HttpService.cs)

该`Context.Send(message.Body);`行将发送流（`FileStream`或其他）

# rest - ColdFusion 和 REST

> ID：13400625
> 
> 赞同：1
> 
> 时间：2012-11-15T15:25:16.387
> 
> 标签：rest, iis, coldfusion

根据[此博客条目](http://blogs.coldfusion.com/post.cfm/rest-support-in-coldfusion-part-i)，ColdFusion 中提供了 REST。但是，我有多个站点，所以当我导航到

本地主机/休息/示例/你好

我得到“Hello World”，但如果我去

[http://mysite.com/rest/Example/hello](http://mysite.com/rest/Example/hello)

我收到 HTTP 错误 500.0 - 请求的内部服务器错误 URL [http://mysite.com:80/jakarta/isapi_redirect.dll](http://mysite.com:80/jakarta/isapi_redirect.dll)

如果我转到 IP 地址，我会得到“Hello World”。

Aaron 发表了一条关于[错误 3348765](https://bugbase.adobe.com/index.cfm?event=bug&id=3348765)的评论，但我不确定这是否有助于我完成第一个概念验证工作。

问：如果我在 IIS 中定义了多个站点，如何让 REST 在 ColdFusion 中工作？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:40:40.593

看看这个： http: [//blogs.coldfusion.com/post.cfm/rest-support-in-coldfusion-part-i](http://blogs.coldfusion.com/post.cfm/rest-support-in-coldfusion-part-i)教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T17:46:03.057

显然，`mysite.com`这是一个非常不吉利的域名，因为很多人试图将其用于学习或测试目的。那只是一个网站，很可能他们没有 ColdFusion 10 REST Web 服务。

您的问题`localhost`似乎是网络服务器问题。如果你打开`http://localhost`，你看到的是同一个网站`http://127.0.0.1`吗？这些很容易是两个不同的虚拟主机（网站，在 IIS 方面）。

解决方案是检查您的 ColdFusion 是如何与 IIS 一起安装的。更好的解决方案是设置一些虚拟主机来玩代码，例如我有虚拟本地主机，如 localhost.coldfusion、localhost.railo 等。

希望这可以帮助。

# php - 为 foreach() 提供的参数无效 - 但输出显示

> ID：13400631
> 
> 赞同：1
> 
> 时间：2012-11-15T15:25:31.960
> 
> 标签：php, arrays, foreach

我正在根据查询结果显示可编辑字段。我知道查询运行正常，并且它返回一个数组。该数组正在正确填充表单字段，但是，我收到“为 foreach() 提供的参数无效”警告。我对此很陌生，对正在发生的事情一无所知。我很感激任何建议。

这是代码：

```
// Grab the profile data from the database
$query8 = "SELECT * FROM EDUCATION WHERE ID_NUM = '" . $_SESSION['IDNUM'] . "' ORDER BY RECORD";
$data = mysqli_query($dbc, $query8);

echo '<pre>' . print_r($data, true) . '</pre>'; 
$rowcount = 1;
while ($row = mysqli_fetch_assoc($data))
{
    if (is_array($row))
    {
        echo '<p> It is an Array</p>';
    }
    foreach($row as &$item)
    {
        $record = $row['RECORD'];
        $school = $row['SCHOOL'];
        $type = $row['TYPE'];
        $degree = $row['DEGREE'];
        $major = $row['MAJOR'];
        $grad = $row['GRAD'];

        ?>
        <form enctype="multipart/form-data" method="post" action="<?php echo $_SERVER['PHP_SELF']; ?>">

        <fieldset>
        <legend>Education History </legend>
        <?php
        echo '<input type="hidden" id="record" name="record" value="' . $record . '">';
        echo 'Rowcount' . $rowcount. '</br>';
        // Insert Listbox here
        $queryschool = "SELECT * FROM SCHOOL";
        $list = mysqli_query($dbc, $queryschool);
        if($list) 
        {
            echo 'School Type? ';
            echo '<select name="school_code">';
            while($row = mysqli_fetch_assoc($list))
            {
                echo "<option value={$row['CODE']}>{$row['TYPE']}" ;
                echo '</option>';
            }
            echo '</select>';
        }

        echo '<br />';
        echo '<label for="school">School Name:</label>';
        echo '<input type="text" id="school" name="school" size="40" maxlength="40" value="' . ( (!empty($school)) ? $school : "") . '" /><br />';

        // Insert Listbox here
        $querydegree = "SELECT * FROM DEGREE";
        $list = mysqli_query($dbc, $querydegree);
        if($list) 
        {
            echo 'Degree Type? ';
            echo '<select name="degree_code">';
            while($row = mysqli_fetch_assoc($list))
            {
                echo "<option value={$row['CODE']}>{$row['DEGREE']}";
                echo '</option>';
            }
            echo '</select>';
        }
        echo '<br />';
        echo '<label for="major">Field of study:</label>';
        echo '<input type="text" id="major" name="major" size="40" maxlength="40" value="' . ( (!empty($major)) ? $major : "") . '" /><br />';
        echo '<label for="grad">Did you graduate?:</label>';
        echo '<input type="radio" id="grad" name="grad" value="Y" ' . ($grad == "Y" ? 'checked="checked"':'') . '/>Yes ';
        echo '<input type="radio" id="grad" name="grad" value="N" ' . ($grad == "N" ? 'checked="checked"':'') . '/>No<br />';
        ?>
        </fieldset>
        <?php
        $rowcount++;
    }
}
;
echo '<label for="another">Do you need to enter more educational experience?:</label>';
echo '<input type="radio" id="another" name="another" value="Y" ' . ($another == "Y" ? 'checked="checked"':'') . '/>Yes ';
echo '<input type="radio" id="another" name="another" value="N" ' . ($another == "N" ? 'checked="checked"':'') . '/>No<br />';

?>

<input type="submit" value="Save Profile" name="submit" />
</form> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:30:17.807

```
foreach ($row as &$item) 
```

replace this with:

```
foreach ($row as $item) 
```

And then for each variable you should probably change

```
$record = $row['RECORD']; 
```

to

```
$record = $item['RECORD']; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:26:43.513

`foreach($row as &$item)`应该

```
 foreach($row as $item) 
```

没有必要在这里使用 foreach 你可以这样做

```
while ($row = mysqli_fetch_assoc($data))
{

$record = $row['RECORD'];
$school = $row['SCHOOL'];
$type = $row['TYPE'];
$degree = $row['DEGREE'];
$major = $row['MAJOR'];
$grad = $row['GRAD'];
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:28:49.810

您没有更改行项目，因此不要通过引用传递给 foreach。另外，您不应该使用 $item 而不是 $row 吗？做这个：

```
foreach($row as $item)
 {
  $record = $item['RECORD'];
  $school = $item['SCHOOL'];
  .... 
```

不要这样做：

```
foreach($row as &$item)
  {
  $record = $row['RECORD'];
  $school = $row['SCHOOL'];
  .... 
```

# php - 使用 fsockopen 时将 php 输出保存到变量中

> ID：13400634
> 
> 赞同：2
> 
> 时间：2012-11-15T15:25:35.513
> 
> 标签：php, telnet, fsockopen, fputs

我正在尝试构建一个 php 脚本，它连接到 telnet 服务器并运行一些命令。

我想将返回的命令输出保存到变量中。

示例： 指挥部：给我一个号码！服务器返回一个数字。假设它是 100。我想将数字 100 保存为变量。

这是我的源代码：

```
<?php  
# connecting
$fp=fsockopen("10.73.xxx.xxx",23);

# login
fputs($fp,"\r");
sleep(1);
fputs($fp,"user\r");
sleep(1);
fputs($fp,"password\r");

# commands
fputs($fp,"give me a number!\n");  //this returns the number I would like to save as variable

sleep(1);

fclose($fp);
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:29:16.087

你可能想要**[`stream_get_line`](http://php.net/manual/en/function.stream-get-line.php)**

```
$theData = stream_get_line($fp, 1024, "\n");
// 1024 = The maximum number of bytes to read from the handle.
// \n = string delimiter. 
```

# python - 可以使用 latin-1 编码写入标准输出，但不能写入文件（Python 2.6）

> ID：13400636
> 
> 赞同：4
> 
> 时间：2012-11-15T15:25:38.153
> 
> 标签：python, utf-8, latin1

我有 unicode 数据并希望将其写入文件。我正在使用python 2.6。我能够打印编码值，但无法将其写入文件。环境的默认编码是 UTF-8。也尝试使用编解码器，但也没有运气。这是我正在使用的示例代码片段。

```
#!/usr/bin/python
import sys
import codecs
import csv

sh = [u'T\xe9l\xe9vista S.A.', u'T\xe9l\xe9vista S.A.', 'Python']
print sys.stdout.encoding
f = codecs.open('listwrite.txt', 'w', encoding='latin-1')
for item in sh:
  f.write(item)
f.close()

for i in sh:
  print i.encode('latin-1') 
```

#

输出：

```
UTF-8
Télévista S.A.
Télévista S.A.
Python

Contents of listwrite.txt
TÃ©lÃ©vista S.A.TÃ©lÃ©vista S.A.Python 
```

#

如上所示，该文件是用 UTF-8 编码而不是 Latin-1 编写的。如何更改它并覆盖文件的默认编码。

**编辑：2**

此外，使用 csv 编写器编写会给出 UnicodeEncodeError: 'ascii' codec can't encode character u'\xe9' in position 1: ordinal not in range(128)

下面的代码：

```
#!/usr/bin/python
import sys
import codecs
import csv

sh = [u'T\xe9l\xe9vista S.A.', u'T\xe9l\xe9vista S.A.', 'Python']
print sys.stdout.encoding
c = csv.writer(codecs.open('listwrite.txt', 'w', encoding='latin-1'), quoting=csv.QUOTE_NONE)
c.writerow(sh)
f.close()

for i in sh:
  print i.encode('latin-1') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T18:41:53.097

我认为您从错误的角度解决了问题。在写入之前尝试对每一行进行编码：

```
import csv
sh = [u'T\xe9l\xe9vista S.A.', u'T\xe9l\xe9vista S.A.', 'Python']

f = open('listwrite.txt', 'wb') # binary mode
writer = csv.writer(f)
writer.writerow([item.encode('latin-1') for item in sh])
f.close() 
```

现在您有了一个正确的 latin1 编码文件：

```
$ cat listwrite.txt | iconv -f latin1
Télévista S.A.,Télévista S.A.,Python
$ file listwrite.txt 
listwrite.txt: ISO-8859 text, with CRLF line terminators 
```

# python - python循环并附加到列表

> ID：13400638
> 
> 赞同：0
> 
> 时间：2012-11-15T15:25:45.637
> 
> 标签：python

我有一个相对较小的 python 程序，它（部分）看起来像下面这样：

```
puredata=ClassOne()
stuff=ClassTwo()

for i in range(0,len(chunks)):
    print "this is in loop  i  = %d" % i
    temp=chunks[i]
    #do some stuff and get variable data.

    for k in range(0,len(data)):
        print "this is in loop  k  = %d" % k
        if puredata.tb in str(temp[k])!=False:
            print "This is valid data..continue calculations"
            puredata.pl,puredata.pt,puredata.pi=stuff.extracts(data[k])
            print "Length of pl puredata = %d" % len(puredata.pl)
            print "Length of pt puredata = %d" % len(puredata.pt)
            print "Length of pi puredata = %d" % len(puredata.pi)
        else:
            pass 
```

stuff.extracts() 吐出 3 个列表（类似于 self.a、self.b、self.c），然后我将其传递给 puredata.pl、puredata.pt、puredata.pi 和 ClassOne 只需调用列表 pl ,pt,pi。ClassTwo 看起来类似于：

```
class ClassTwo():
    def __init__(self):
      self.a=[]
      self.b=[]
      self.c=[]
# Start calculations
    def extracts(self,soup):
        # do stat modelling and calculations
          return self.a, self.b,self.c 
```

当我运行循环时，我发现数据似乎“附加”到了 puredata.pl,puredata.pt,puredata.pi 虽然我从未在代码中的任何地方使用过 .append() 。所以，在第一个循环中，puredata.pl、puredata.pt、puredata.pi 的长度是 10，在下一个循环中它变成 20，然后是 30..等等。

我觉得这很奇怪 - 我无法理解它。在某种程度上，这就是我想要的（我的意思是将数据附加到列表中），但我很困惑为什么它会附加，尽管我没有使用.append()。

对不起，如果这是一个 kn00b 问题 - 这里是 python 新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:34:11.037

根据您提供的内容，最可能的问题是，每次调用 stuff.extracts 时，stuff.a stuff.b 和 stuff.c 都会增长。如果在 ClassTwo 中执行的统计建模和计算对于每个数据 [k] 都是唯一的，那么在循环内声明 stuff = ClassTwo() 应该可以解决您的问题。

例如：

```
for k in range(0,len(data)):
    stuff = ClassTwo() 
```

# c - 优化蛮力算法还是替代方案？

> ID：13400639
> 
> 赞同：1
> 
> 时间：2012-11-15T15:25:48.713
> 
> 标签：c, algorithm, genetic-algorithm

我有一个简单的（强力）递归求解器算法，它需要大量时间来获取更大的 OpxCnt 变量值。对于小的 OpxCnt 值，没问题，就像一个魅力。随着 OpxCnt 变量变大，算法变得非常慢。这是意料之中的，但有任何优化或不同的算法吗？

我的最终目标是 :: 我想通过执行一些具有最小操作成本的读取操作来读取映射数组中的所有 True 值。这与最小读取操作数不同。在函数完成时，应该没有未读的 True 值。

map 数组由一些外部函数填充，任何成员可能是 1 或 0。

* * *

例如 ：：

地图[4] = 1; 地图[8] = 1;

Adr=4,Cnt=5 的 1 次读取操作成本最低 (35)

然而

2 次读取操作 Adr=4,Cnt=1 & Adr=8,Cnt=1 成本 (27+27=54)

* * *

```
#include <string.h>

typedef unsigned int    Ui32;

#define cntof(x)    (sizeof(x) / sizeof((x)[0]))

#define ZERO(x)     do{memset(&(x), 0, sizeof(x));}while(0)

typedef struct _S_MB_oper{

    Ui32    Adr;
    Ui32    Cnt;

}S_MB_oper;

typedef struct _S_MB_code{

    Ui32        OpxCnt;
    S_MB_oper   OpxLst[20];
    Ui32        OpxPay;

}S_MB_code;

char map[65536] = {0};

static int opx_ListOkey(S_MB_code *px_kod, char *pi_map)
{
    int  cost = 0;
    char map[65536];

    memcpy(map, pi_map, sizeof(map));

    for(Ui32 o = 0; o < px_kod->OpxCnt; o++)
    {
        for(Ui32 i = 0; i < px_kod->OpxLst[o].Cnt; i++)
        {
            Ui32 adr = px_kod->OpxLst[o].Adr + i;
            // ...
            if(adr < cntof(map)){map[adr] = 0x0;}
        }
    }

    for(Ui32 i = 0; i < cntof(map); i++)
    {
        if(map[i] > 0x0){return -1;}
    }

    // calculate COST...

    for(Ui32 o = 0; o < px_kod->OpxCnt; o++)
    {
        cost += 12;
        cost += 13;
        cost += (2 * px_kod->OpxLst[o].Cnt);
    }

    px_kod->OpxPay = (Ui32)cost; return cost;
}

static int opx_FindNext(char *map, int pi_idx)
{
    int i;

    if(pi_idx < 0){pi_idx = 0;}

    for(i = pi_idx; i < 65536; i++)
    {
        if(map[i] > 0x0){return i;}
    }

    return -1;
}

static int opx_FindZero(char *map, int pi_idx)
{
    int i;

    if(pi_idx < 0){pi_idx = 0;}

    for(i = pi_idx; i < 65536; i++)
    {
        if(map[i] < 0x1){return i;}
    }

    return -1;
}

static int opx_Resolver(S_MB_code *po_bst, S_MB_code *px_wrk, char *pi_map, Ui32 *px_idx, int _min, int _max)
{
    int pay, kmax, kmin = 1;

    if(*px_idx >= px_wrk->OpxCnt)
    {
        return opx_ListOkey(px_wrk, pi_map);
    }

    _min = opx_FindNext(pi_map, _min);
    // ...
    if(_min < 0){return -1;}

    kmax = (_max - _min) + 1;
    // must be less than 127 !
    if(kmax > 127){kmax = 127;}

    // is this recursion the last one ?
    if(*px_idx >= (px_wrk->OpxCnt - 1))
    {
        kmin = kmax;
    }
    else
    {
        int zero = opx_FindZero(pi_map, _min);
        // ...
        if(zero > 0)
        {
            kmin = zero - _min;
            // enforce kmax limit !?
            if(kmin > kmax){kmin = kmax;}
        }
    }

    for(int _cnt = kmin; _cnt <= kmax; _cnt++)
    {
        px_wrk->OpxLst[*px_idx].Adr = (Ui32)_min;
        px_wrk->OpxLst[*px_idx].Cnt = (Ui32)_cnt;

        (*px_idx)++;
        pay = opx_Resolver(po_bst, px_wrk, pi_map, px_idx, (_min + _cnt), _max);
        (*px_idx)--;

        if(pay > 0)
        {
            if((Ui32)pay < po_bst->OpxPay)
            {
                memcpy(po_bst, px_wrk, sizeof(*po_bst));
            }
        }
    }

    return (int)po_bst->OpxPay;
}

int main()
{
    int _max = -1, _cnt = 0;

    S_MB_code best = {0};
    S_MB_code work = {0};

    // SOME TEST DATA...

    map[ 4] = 1;
    map[ 8] = 1;
    /*
    map[64] = 1;
    map[72] = 1;
    map[80] = 1;
    map[88] = 1;
    map[96] = 1;
    */

    // SOME TEST DATA...

    for(int i = 0; i < cntof(map); i++)
    {
        if(map[i] > 0)
        {
            _max = i; _cnt++;
        }
    }

    // num of Opx can be as much as num of individual bit(s).
    if(_cnt > cntof(work.OpxLst)){_cnt = cntof(work.OpxLst);}

    best.OpxPay = 1000000000L; // invalid great number...

    for(int opx_cnt = 1; opx_cnt <= _cnt; opx_cnt++)
    {
        int rv;

        Ui32 x = 0;

        ZERO(work); work.OpxCnt = (Ui32)opx_cnt;

        rv = opx_Resolver(&best, &work, map, &x, -42, _max);
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T11:23:56.783

您可以使用**动态规划**来计算覆盖 中前 i 个真值的最低成本`map[]`。称之为 f(i)。正如我将解释的，您可以通过查看 j < i 的所有 f(j) 来计算 f(i)，因此这将花费真实值数量的二次方时间——比指数方式要好得多。您正在寻找的最终答案将是 f(n)，其中 n 是`map[]`.

第一步是预处理`map[]`成真值位置列表。（可以在原始`map[]`数组上执行 DP，但如果真值稀疏，这会更慢，并且不能更快。）

```
int pos[65536];    // Every position *could* be true
int nTrue = 0;

void getPosList() {
    for (int i = 0; i < 65536; ++i) {
        if (map[i]) pos[nTrue++] = i;
    }
} 
```

当我们只查看前 i 个真值的子问题时，我们知道第 i 个真值必须被以 i 结尾的读取覆盖。这个块可以从任何位置开始 j <= i; 我们不知道，所以我们必须测试所有这些并选择最好的。这里启用DP的关键属性（Optimal Substructure）是，**在任何i个大小的子问题的最优解中，如果覆盖第i个真值的读取从第j个真值开始，那么前面的j-1个真值必须是由 (j-1) 大小的子问题的最优解所覆盖。**

所以：f(i) = min(f(j) + score(pos(j+1), pos(i))，取最小值取所有1 <= j < i。pos(k)指的是位置中的第 k 个真值`map[]`， score(x, y) 是从位置 x 到位置 y 的读取的分数，包括在内。

```
int scores[65537];    // We effectively start indexing at 1
scores[0] = 0;    // Covering the first 0 true values requires 0 cost

// Calculate the minimum score that could allow the first i > 0 true values
// to be read, and store it in scores[i].
// We can assume that all lower values have already been calculated.
void calcF(int i) {
    int bestStart, bestScore = INT_MAX;
    for (int j = 0; j < i; ++j) {    // Always executes at least once
        int attemptScore = scores[j] + score(pos[j + 1], pos[i]);
        if (attemptScore < bestScore) {
            bestStart = j + 1;
            bestScore = attemptScore;
        }
    }

    scores[i] = bestScore;
}

int score(int i, int j) {
    return 25 + 2 * (j + 1 - i);
}

int main(int argc, char **argv) {
    // Set up map[] however you want
    getPosList();

    for (int i = 1; i <= nTrue; ++i) {
        calcF(i);
    }

    printf("Optimal solution has cost %d.\n", scores[nTrue]);
    return 0;
} 
```

## 从分数中提取解决方案

使用此方案，您可以计算最佳解决方案的*分数*：它只是 f(n)，其中 n 是 中的真值的数量`map[]`。为了实际构建解决方案，您需要回读 f() 分数表以推断做出了哪个选择：

```
void printSolution() {
    int i = nTrue;
    while (i) {
        for (int j = 0; j < i; ++j) {
            if (scores[i] == scores[j] + score(pos[j + 1], pos[i])) {
                // We know that a read can be made from pos[j + 1] to pos[i] in
                // an optimal solution, so let's make it.
                printf("Read from %d to %d for cost %d.\n", pos[j + 1], pos[i], score(pos[j + 1], pos[i]));
                i = j;
                break;
            }
        }
    }
} 
```

可能有几种可能的选择，但所有选择都会产生最佳解决方案。

## 进一步加速

上面的解决方案适用于任意评分函数。因为您的评分函数具有简单的结构，所以可能可以开发出更快的算法。

例如，我们可以证明存在一个间隙宽度，超过该宽度，将单个读数分成两个读数*总是有益的。*假设我们有一个从位置 xa 到 x 的读取，以及另一个从位置 y 到 y+b 的读取，其中 y > x。这两个单独读取的总成本为 25 + 2 * (a + 1) + 25 + 2 * (b + 1) = 54 + 2 * (a + b)。从 xa 延伸到 y+b 的单个读取将花费 25 + 2 * (y + b - x + a + 1) = 27 + 2 * (a + b) + 2 * (y - x)。因此，单次读取的成本降低了 27 - 2 * (y - x)。如果 y - x > 13，则此差异低于零：换句话说，包含跨越 12 或更多间隙的单个读取永远不会是最佳的。

为了利用这个属性，inside `calcF()`，最终读取可以按起始位置的降序（即宽度的递增顺序）尝试，并且一旦任何间隙宽度超过 12，内部循环就会停止。因为该读取和所有后续尝试的更广泛的读取将包含这个太大的差距，因此不是最理想的，它们不需要尝试。

# c# - Linq Lambda 从聚合中获取两个属性作为字符串

> ID：13400640
> 
> 赞同：5
> 
> 时间：2012-11-15T15:25:49.633
> 
> 标签：c#, linq, lambda, aggregate, anonymous-class

在对匿名选择的 linq 查询中，我想连接来自两个属性的字符串。

例如，在某些人群中查找最年长的人的全名。

```
var personsAndOldest = db.Persons.GroupBy(person => person.SomeThingThatCanBeGroupedForPerson).Select(a => new
            {
                FirstName = a.FirstOrDefault().FirstName,
                LastName = a.FirstOrDefault().LastName,
                BirthDate = a.FirstOrDefault().BirthDate,
                FullnameOfOldes = a.Aggregate((pers1, pers2) => pers1.BirthDate > pers2.BirthDate ? pers1 : pers2).FirstName + " " //How do I get LastName of the old one (without using the full aggregate again)
            }); 
```

我是否必须再次编写完整的聚合才能在名字和空格之后获取 LastName？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:30:50.817

你可以这样做

```
var personsAndOldest = db.Persons
    .GroupBy(person => person.SomeThingThatCanBeGroupedForPerson)
    .Select(g => new 
        {
            a = g.First(),
            o = g.Aggregate((pers1, pers2) =>
                pers1.BirthDate > pers2.BirthDate ? pers1 : pers2)
        })
    .Select(pair => new
        {
            FirstName = pair.a.FirstName,
            LastName = pair.a.LastName,
            BirthDate = pair.a.BirthDate,
            FullnameOfOldes = pair.o.FirstName + " " + pair.o.LastName
        }); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:37:13.810

您可以在 Select 中使用 lambda 语句：

```
var personsAndOldest = db.Persons.GroupBy(person => person.SomeThingThatCanBeGroupedForPerson).Select(a => 
    {
        var first = a.First();
        var oldest = a.Aggregate((pers1, pers2) => pers1.BirthDate > pers2.BirthDate ? pers1 : pers2);
        return new
        {
            FirstName = first.FirstName,
            LastName = first.LastName,
            BirthDate = first.BirthDate,
            FullnameOfOldes = oldest.FirstName + " " + oldest.LastName)
        };
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:45:28.460

*   您可以使用`let`来引入新的范围变量。
*   如果匿名类型等于分配属性的名称，则不需要指定属性名称
*   我认为`OrderBy`会找到最年长的人（但您可以使用汇总并比较性能）
*   我相信最年长的人是出生日期最少的人，因此您需要将聚合更改为`pers1.BirthDate < pers2.BirthDate ? pers1 : pers2`

所以

```
var personsAndOldest = from p in db.Persons
                       group p by p.SomeThingThatCanBeGroupedForPerson into g
                       let first = g.FirtOrDefault()
                       let oldest = g.OrderBy(x => x.BirthDate).FirstOrefault()
                       select
                       {
                           first.FirstName,
                           first.LastName,
                           first.BirthDate,
                           FullnameOfOldes = oldest.FirstName + " " + oldest.LastName
                       }; 
```

# ruby-on-rails-3 - 如何从 gem 中加载 rails 环境？

> ID：13400641
> 
> 赞同：2
> 
> 时间：2012-11-15T15:25:51.180
> 
> 标签：ruby-on-rails-3, gem

我需要 config/environment.rb。我怎样才能从宝石中做到这一点？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-11-15T17:16:45.427

您需要创建一个新项目来获取`config/environment.rb`文件和所有其他支持文件，如环境文件夹、应用程序等，

当您创建一个新项目时，它应该自动创建这些文件。您不需要手动创建它。

# php - 数组不应该显示在另一个数组中

> ID：13400644
> 
> 赞同：0
> 
> 时间：2012-11-15T15:25:58.663
> 
> 标签：php

我创建了一个函数，理论上应该从另一个数组创建一个数组（基本上我想做的是将它降低 1 级）。

我的问题是，当代码不应该在新数组中创建另一个数组时，它会以某种方式创建另一个数组。甚至更多的输出是相当奇怪的。最终的数组应该都在同一个级别，但它以某种方式创建它是多维的并且具有额外的值。

问题似乎在循环中，但我看不到在哪里

任何帮助表示赞赏。

```
 public function pullCompetencyByCID ( $cID ) {
                    $sql = 'SELECT * FROM ldc_competency_'.$this->lang.' WHERE cID='.$cID;
                    $result = $this->db->query($sql)->fetchAll(PDO::FETCH_ASSOC);                   
                         foreach ( $result as $key2 => $val2 ){
                                switch ($key2){
                                    case 'cName':       $cName = $val2;         
                                                        break;
                                    case 'cID':         $cID = $val2;
                                                        break;
                                    case 'cLevel':      $cLevel = $val2;
                                                        break;
                                    case 'cDetails':    $cDetails = $val2;
                                                        break;
                                    case 'cSummary':    $cSummary = $val2;
                                                        break;
                                }
                        }
                    $pullCompetency = array('cName'=>$cName,'cID'=>$cID, 'cLevel'=>$cLevel, 'cDetails'=>$cDetails, 'cSummary'=>$cSummary);          

                    return $pullCompetency;
    } 
```

该代码的输出是

```
 Array ( 
    [cName] => Array ( 
                        [cID] => 2 
                        [cName] => dos
                        [cLevel] => 2
                        [cDetails] => doss
                        [cSummary] => dosssss 
                         ) 
    [cID] => 2
    [cLevel] => 
    [cDetails] => 
    [cSummary] => 
) 
```

的输出`$result`只是

```
Array ( 
    [0] => Array ( 
                    cID] => 2 
                    [cName] => dos 
                    [cLevel] => 2 
                    [cDetails] => doss 
                    [cSummary] => dosssss
                     )
     ) 
```

为避免混淆，期望的结果应该是

```
 Array ( 
        [cID] => 2 
        [cName] => dos 
        [cLevel] => 2 
        [cDetails] => doss 
        [cSummary] => dosssss
         ) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:32:38.017

试试这个功能：

```
public function pullCompetencyByCID ( $cID ) {
    $sql = 'SELECT * FROM ldc_competency_'.$this->lang.' WHERE cID='.$cID;
    return $this->db->query($sql)->fetch(PDO::FETCH_ASSOC);                   
} 
```

您的函数似乎对从以下位置返回的数组进行了大量冗余工作：

```
PDOStatement::fetchAll(PDO::FETCH_ASSOC); 
```

另外：如果在您当前的函数中没有发现能力，PHP 将吐出/记录错误通知，因为诸如 $cName 之类的变量不会被初始化。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:31:04.483

Since you're doing `->fetchAll()`, $result is going to be a 2-D array of results:

```
foreach ( $result as $key2 => $val2 ){
                      ^-- row number
                               ^--- array row contents 
```

you then stuff that sub-array into your new array, causing your sub-arrays.

# c# - 区分 Microsoft Excel 中的保存和自动保存事件

> ID：13400645
> 
> 赞同：2
> 
> 时间：2012-11-15T15:25:59.397
> 
> 标签：c#, excel, office-interop, excel-addins, vba

我有两个 Microsoft Excel 2007/2010 C# Addin 项目。如何区分用户调用的常规“保存”/“另存为”命令和 Excel 本身定期调用的“自动保存”事件？

我知道在 Microsoft Word 中我可以通过`Application.WordBasic`对象访问 AutoSave 事件：

```
var oBasic = Application.WordBasic;
var fIsAutoSave = oBasic.GetType().InvokeMember("IsAutosaveEvent", BindingFlags.GetProperty, null, oBasic, null);
bool isAutoSave = int.Parse(fIsAutoSave.ToString()) == 1; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:17:43.913

通过网络：

> Excel 2003/2007 中没有自动保存功能。自动恢复保存不是真正的工作簿保存。它是保存在另一个文件中的信息，显然只有 Excel 可以用来从崩溃中恢复。用户无法打开此文件，或者至少我无法打开。

您可以为正在使用的工作簿关闭自动保存（Excel 2003 - 现在没有打开另一个）：

```
Tools -> Options -> Save 
```

然后滚动你自己的自动保存。

您可能对有关该主题的更多详细信息感兴趣的几个网站：http: [//support.microsoft.com/kb/289273](http://support.microsoft.com/kb/289273)

[http://social.msdn.microsoft.com/Forums/eu/isvvba/thread/e044e88d-4a8d-4d75-8513-42709f08d0b2](http://social.msdn.microsoft.com/Forums/eu/isvvba/thread/e044e88d-4a8d-4d75-8513-42709f08d0b2)

# jquery - 如何以这种方式使用 jQuery Quicksand 插件？

> ID：13400647
> 
> 赞同：3
> 
> 时间：2012-11-15T15:26:01.633
> 
> 标签：jquery, quicksand

这个演示看起来很简单，当我点击按钮时它只是动画一次。问题是：如何将“destination”再次更改为“source”？（应该有两组项目）

Javascript：

```
$('#source').quicksand( $('#destination li') ); 
```

HTML：

```
<ul id="source">
    <li data-id="iphone">iPhone OS</li>
    <li data-id="android">Android</li>
    <li data-id="winmo">Windows Mobile</li>
</ul>

<ul id="destination" class="hidden">
    <li data-id="macosx">Mac OS X</li>
    <li data-id="macos9">Mac OS 9</li>
    <li data-id="iphone">iPhone OS</li>
</ul> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T16:38:51.480

这是您正在寻找的神奇代码：

```
function doQuicksand(){

var newDestination = $('#source').clone();
$('#source').quicksand( $('#destination li') , function(){

$('#source').attr("id","tempSource");
$('#destination').replaceWith(newDestination);
$('#source').attr("id","destination").css("display","none");
$('#tempSource').attr("id","source");

});

} 
```

基本上是因为流沙似乎用目标替换了源，所以在你通常运行它之后，源和目标都具有相同的内容。这段代码所做的是事先复制源代码，然后在流沙完成它的工作后将其注入回去。

# c# - Word OpenXML wp14：anchorId 属性导致文本框对齐错误

> ID：13400649
> 
> 赞同：0
> 
> 时间：2012-11-15T15:26:09.037
> 
> 标签：c#, vb.net, ms-word, openxml, office-interop

所以。这是一个很难回答的问题：

我为 Word 2007 开发了一个 Word 插件，然后升级到 Word 2010。它在 2007 年很稳定，但是升级后一个重要功能停止工作，所以我不得不恢复我的更改。

停止的特定功能在文档中获取选定的图片，并在其旁边添加一个文本框，具有特定的格式。（我将在问题末尾提供代码）

最终版本可以安装在 2007 和 2010 版本中，但只能在 2007 年使用。直到今天！... [悬念]

偶然地，一位客户使用该插件在 Word 2010 上处理文档，令人惊讶的是，它成功了！

所以我去调查这个问题。我复制了一份工作文档和一份非工作版本的同一文档，并比较了两者的 OpenXML。

这是我发现的：

**工作文件**

这是工作文档上的图片标记：

```
<w:drawing>
    <wp:inline distT="0" distB="0" distL="0" distR="0">
        <wp:extent cx="3251200" cy="2285390"/>
        <wp:effectExtent l="19050" t="19050" r="25400" b="19685"/>
        <wp:docPr id="193" name="Imagem 48" descr="Elev. 4"/>
        <wp:cNvGraphicFramePr>
            <a:graphicFrameLocks xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main"/>
        </wp:cNvGraphicFramePr>
        <a:graphic xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main">
            <a:graphicData uri="http://schemas.openxmlformats.org/drawingml/2006/picture">
                <pic:pic xmlns:pic="http://schemas.openxmlformats.org/drawingml/2006/picture">
                    <pic:nvPicPr>
                        <pic:cNvPr id="0" name=""/>
                        <pic:cNvPicPr/>
                    </pic:nvPicPr>
                    <pic:blipFill>
                        <a:blip r:embed="rId33">
                            <a:lum/>
                        </a:blip>
                        <a:stretch>
                            <a:fillRect/>
                        </a:stretch>
                    </pic:blipFill>
                    <pic:spPr>
                        <a:xfrm>
                            <a:off x="0" y="0"/>
                            <a:ext cx="3251200" cy="2285390"/>
                        </a:xfrm>
                        <a:prstGeom prst="rect">
                            <a:avLst/>
                        </a:prstGeom>
                        <a:noFill/>
                        <a:ln w="19044" cmpd="sng">
                            <a:solidFill>
                                <a:srgbClr val="333333"/>
                            </a:solidFill>
                            <a:prstDash val="solid"/>
                        </a:ln>
                    </pic:spPr>
                </pic:pic>
            </a:graphicData>
        </a:graphic>
    </wp:inline>
</w:drawing> 
```

**不是工作文件**

这是非工作文档上的相同图片标记：

```
<w:drawing>
    <wp:inline distT="0" distB="0" distL="0" distR="0" wp14:anchorId="0FC2E46A" wp14:editId="42C17A65">
        <wp:extent cx="3251200" cy="2285390"/>
        <wp:effectExtent l="19050" t="19050" r="25400" b="19685"/>
        <wp:docPr id="50" name="Imagem 50" descr="Elev. 1"/>
        <wp:cNvGraphicFramePr>
            <a:graphicFrameLocks xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main"/>
        </wp:cNvGraphicFramePr>
        <a:graphic xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main">
            <a:graphicData uri="http://schemas.openxmlformats.org/drawingml/2006/picture">
                <pic:pic xmlns:pic="http://schemas.openxmlformats.org/drawingml/2006/picture">
                    <pic:nvPicPr>
                        <pic:cNvPr id="0" name=""/>
                        <pic:cNvPicPr/>
                    </pic:nvPicPr>
                    <pic:blipFill>
                        <a:blip r:embed="rId24">
                            <a:lum/>
                        </a:blip>
                        <a:stretch>
                            <a:fillRect/>
                        </a:stretch>
                    </pic:blipFill>
                    <pic:spPr>
                        <a:xfrm>
                            <a:off x="0" y="0"/>
                            <a:ext cx="3251200" cy="2285390"/>
                        </a:xfrm>
                        <a:prstGeom prst="rect">
                            <a:avLst/>
                        </a:prstGeom>
                        <a:noFill/>
                        <a:ln w="19044" cmpd="sng">
                            <a:solidFill>
                                <a:srgbClr val="333333"/>
                            </a:solidFill>
                            <a:prstDash val="solid"/>
                        </a:ln>
                    </pic:spPr>
                </pic:pic>
            </a:graphicData>
        </a:graphic>
    </wp:inline>
</w:drawing> 
```

唯一的区别在于第二行，工作文档的内容如下：

```
<wp:inline distT="0" distB="0" distL="0" distR="0"> 
```

另一个是：

```
<wp:inline distT="0" distB="0" distL="0" distR="0" wp14:anchorId="0FC2E46A" wp14:editId="42C17A65"> 
```

所以！不工作的文档图片有两个额外的属性`wp14:anchorId`和`wp14:editId`.

**功能：**

这是将文本框添加到图片并设置其格式的方法。

```
Sub AddTextBox(ByVal picture As Word.InlineShape)
  Dim textBox As Word.Shape =
    ActiveDocument.Shapes.AddTextbox(
        Orientation:=Microsoft.Office.Core.MsoTextOrientation.msoTextOrientationHorizontal,
        Left:=picture.Width + 10,
        Top:=0,
        Width:=MarginWidth - picture.Width - 10,
        Height:=picture.Height,
        Anchor:=picture.Range.Paragraphs(1).Range)

With textBox
    .RelativeHorizontalPosition = Word.WdRelativeHorizontalPosition.wdRelativeHorizontalPositionMargin
    .RelativeVerticalPosition = Word.WdRelativeVerticalPosition.wdRelativeVerticalPositionParagraph

    .Line.DashStyle = Microsoft.Office.Core.MsoLineDashStyle.msoLineSolid
    .Line.BackColor.RGB = RGB(255, 255, 255)
    .Line.Style = Microsoft.Office.Core.MsoLineStyle.msoLineSingle
    .Line.Weight = 0.25

    .LockAnchor = True
End With
EndSub 
```

**问题：**

如您所见，上面的方法将文本框与图像所在的段落顶部对齐。图像是内联的，因此，文本框顶部与图像顶部对齐。这就是 word 2007 和所提及的工作文件中发生的情况。

问题是：当我在不工作的文档上运行此方法时，文本框最终与 PAGE 的顶部对齐。无边际。

这份工作文件很特别。所有其他的行为都与 Word 2010 中的不工作一样。

我研究了 MSDN 文档，没有关于这些属性的信息。

所以，请：

1.  什么是属性`wp14:anchorId`和`wp14:editId`？
2.  以及如何让 Word 停止生成它们？
3.  或者当这些属性存在时如何阻止文本框进入页面顶部。

首先十分感谢。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-30T07:11:18.567

有两种类型的标签内联和锚。

```
<wp:anchor distT="0" distB="0" distL="114300" distR="114300" simplePos="0" relativeHeight="251658240" behindDoc="0" locked="0" layoutInCell="1" allowOverlap="1" wp14:anchorId="7E0D7E99" wp14:editId="66BEB3EF"> 
```

给定的属性 wp14:anchorId 和 wp14:editId 与锚点相关，但我可以在您的代码中看到，它位于内联标记中。

```
<wp:inline distT="0" distB="0" distL="0" distR="0" wp14:anchorId="0FC2E46A" wp14:editId="42C17A65"> 
```

内联标签应该只有。

```
<wp:inline distT="0" distB="0" distL="0" distR="0" xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing"> 
```

我认为这也会对其他人有所帮助。

谢谢。

# css - 在 Div Box 中居中 Div 框

> ID：13400650
> 
> 赞同：0
> 
> 时间：2012-11-15T15:26:10.470
> 
> 标签：css, html, alignment, center

我已将页脚添加到[EasyCareBath.com](http://www.easycarebath.com)，我可以让 div 正常工作，除了“.footer_box”，它不会居中。我添加了“左：15%”，当你把窗户炸开时，它不再对齐。我错过了什么还是我对 CSS 做了太多？

```
.footer_spacer {
    height: 50px;   
}
.footer_wrapper {
    height: 375px;
    background-color: #e6dccb;
}
.footer {
    border-top: 10px solid #789E65;
    box-shadow: 0 5px 20px rgba(0, 0, 0, 0.6);
    margin-top: 0px;
    /*min-width: 1007px;*/
    height: 235px;
    background-attachment: scroll;
    background-image: url(../images_footer/footer_bg.png);
    background-repeat: repeat-x;
    background-position: center top;
    position: relative;
}
.footer_box {
    height: 236px;
    width: 1007px;
    /*position: relative;*/
}
.footer_copyright {
    width: 100%;
    /* [disabled]height: 100px; */
    /*float: left;*/
    padding-top: 15px;
    position: relative;
    text-align: center;
    word-spacing: normal;
    font-family: Arial, Helvetica, sans-serif;
    font-size: 14px;
    font-weight: 100;
    font-variant: normal;
    text-transform: none;
    color: #354245;
}
#footer_col_01 {
    position:absolute;
    left:11px;
    top:3px;
    width:164px;
    /*height:230px;*/
    z-index:1;
}
#footer_col_02 {
    position:absolute;
    left:186px;
    top:3px;
    width:164px;
    /*height:230px;*/
    z-index:1;
}
#footer_col_03 {
    position:absolute;
    left:361px;
    top:3px;
    width:164px;
    /*height:230px;*/
    z-index:1;
}
#footer_col_04 {
    position:absolute;
    left:535px;
    top:3px;
    width:183px;
    /*height:230px;*/
    z-index:1;
}
#footer_col_05 {
    position:absolute;
    left:728px;
    top:3px;
    width:265px;
    /*height:230px;*/
    z-index:1;
    font-size: 14px;
}
footer {
    font-family: Arial, Helvetica, sans-serif;
    color: #fff;
    font-size: 11px;
    float: left;
    width: 100%;
}
footer a {
    color: #FFF;
    text-decoration: none;
}
footer a:hover {
    color: #FFF;
    text-decoration: underline;
}
footer h6 {
    font-family: Arial, Helvetica, sans-serif;
    font-size: 16px;
    font-weight: 500;
    color: #00A1CC;
    line-height: 46px;
    /*margin-bottom: -2px;*/
}
footer li {
    line-height: 18px;
    list-style-type: none;
    margin-left: 12px;
}
.footer_img_center {
    text-align: center;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T15:30:29.130

Alter your `.footer_box` rule to this:

```
.footer_box {
    height: 236px;
    width: 1007px;
    margin: 0 auto;
    position: relative;
    } 
```

The `margin: 0 auto;` centers the footer_box.

The `position: relative;` makes it so your absolutely positioned columns are positioned based on the `footer_box` instead of the body.

Side note / an analogy I've always liked: Think of the 'auto' as attaching a rubber band to that side of the item connected to the edge of the page... in this case, 'auto' is on the right AND the left, so - if there's a rubber band pulling from both left AND right, it will always center, regardless of screen size.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:30:48.430

Fix your css as following:

```
.footer_box {
    height: 236px;
    margin: 0 auto;
    position: relative;
    width: 1007px;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:32:19.487

你走在正确的轨道上：

```
.footer_box {
    height: 236px;
    width: 1007px;
    position: relative;
    margin: 0px auto;
} 
```

无论屏幕大小如何，左右两侧的自动边距将确保页脚始终居中。

# c# - 自然加入.net

> ID：13400652
> 
> 赞同：3
> 
> 时间：2012-11-15T15:26:24.060
> 
> 标签：c#, linq, join, pivot-table

我试图从 2 个表中在 Linq 中进行自然左连接

**2张桌子**

```
| questions |
+-----------+
| id        |
| question  |
+-----------+

|  answers  |
+-----------+
|  id       |
|  q_id (fk)|
|  answer   |
+-----------+ 
```

我试图为每个问题检索一行，但可以根据需要使用其他列

我不确定这是否可能

```
 ID   | Question   | Answer 1 | Answer 2 | An....
| view      |       |-----------------------------------------------+
+-----------+       |  1   |   question | answer1  | answer2  | ... |
| id        |       |  2   |   question | answer1  | answer2  | ... |
| question  |       |  3   |   question | answer1  | answer2  | ... |
| answer1   |  or   |  4   |   question | answer1  | answer2  | ... |
| answer2   |       |  5   |   question | answer1  | answer2  | ... |
| answer3   |       |  6   |   question | answer1  | answer2  | ... |
| answer... |       |  7   |   question | answer1  | answer2  | ... |
+-----------+       |-----------------------------------------------+ 
```

我的 C# Linq

```
 var joinedTable =
        from questions in db.Results
        join answers in db.Answers on questions.id equals answers.result_id
            into answers
        select new 
        { 
           questions.id, 
           TOTAL_ANSWERS = answers.Count(), 
           questions.SurveyDateCreated, 
           (answers.ForEach(a=> a.answer) as "Answer" + i++)
        }; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:07:01.897

您正在寻找的内容称为 PIVOT。最好的方法是在 SQL 中创建一个存储过程并在 SQL 中执行 PIVOT。使用 LINQ 是可能的，但很复杂。

使用 LINQ 进行数据透视：http: [//madhukap.blogspot.com/2011/05/pivot-with-linq.html](http://madhukap.blogspot.com/2011/05/pivot-with-linq.html) http://stackoverflow.com/questions/167304/is-it-possible-to-pivot-data-using -linq

# java - 如何将默认文件名设置为 Swing JFileChooser？

> ID：13400656
> 
> 赞同：7
> 
> 时间：2012-11-15T15:26:51.043
> 
> 标签：java, swing, file-io, jfilechooser

我想`Untitled.txt`在 this 的文本框中设置一个默认文件名`JFileChooser`。我可以设置这个吗？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-15T16:00:53.687

使用以下代码：

```
 JFileChooser fileChooser = new JFileChooser();
        File file = new File("C:/untitled.txt");
        fileChooser.setCurrentDirectory(file); 
```

您必须指定完整路径`untitled.txt`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-06-23T12:52:05.047

您必须使用 setSelectedFile 方法并将文件作为参数传递。该文件不必存在。
如果指定了文件的路径，则文件选择器将尝试指向文件目录（如果存在）

`JFileChooser fileChooser = new JFileChooser(); fileChooser.setSelectedFile(new File("C:\\file.txt")); fileChooser.showSaveDialog(null);`

# django - 在 django 上编辑用户配置文件

> ID：13400659
> 
> 赞同：1
> 
> 时间：2012-11-15T15:26:58.957
> 
> 标签：django

如何创建用户配置文件可编辑页面并在单击提交时使用 DJANGO 更新注册期间提供的详细信息（存储在数据库中的详细信息）？

为用户创建注册表单，就像我在开篇文章中所说的那样，我希望用户必须登录后才能编辑他在注册期间提供的内容，它将更新存储在数据库中的先前详细信息。

我知道我需要为它创建一个视图，但还没有到达如何调用注册期间提供的详细信息。好吧，也许使用 user.get_profile()

# 表格.py

```
from django import forms
from django.contrib.auth.models import User
from django.forms import ModelForm
from registeredmember.models import Registeredmember

class RegistrationForm(ModelForm):
    first_name      = forms.CharField(label=(u'First Name'))
    middle_name     = forms.CharField(label=(u'Middle Name'))
    last_name       = forms.CharField(label=(u'Last Name'))
    occupation      = forms.CharField(label=(u'Occupation'))
    income          = forms.IntegerField(label=(u'Income Amount'))
    age             = forms.IntegerField(label=(u'Age'))
    address_line1   = forms.CharField(label=(u'Address line 1'))
    address_line2   = forms.CharField(label=(u'Address line 2'))
    city            = forms.CharField(label=(u'City'))
    state           = forms.CharField(label=(u'State'))
    phone_no_Mobile = forms.IntegerField(label=(u'Phone Number (Home)'))
    phone_no_Work   = forms.IntegerField(label=(u'Phone Number (Work)'))
    purpose         = forms.CharField(label=(u'Purpose'))
    username        = forms.CharField(label=(u'Username'))
    email           = forms.EmailField(label=(u'Email Address'))
    password        = forms.CharField(label=(u'Password'), widget=forms.PasswordInput)
    password1       = forms.CharField(label=(u'Verify Password'), widget=forms.PasswordInput)

    class Meta:
        model = Registeredmember
        exclude = ('user','reference_number',)
    def clean_username(self):
        username = self.cleaned_data['username']
        try:
            User.objects.get(username=username)
        except User.DoesNotExist:
            return username
        raise forms.ValidationError('That username is already taken, please select another.')

    def clean_email(self):
        email = self.cleaned_data['email']
        try:
            User.objects.get(email=email)
        except User.DoesNotExist:
            return email
        raise forms.ValidationError('That email address is already in the database, please provide another.')

class LoginForm(forms.Form):
    username    = forms.CharField(label=(u'Username'),widget=forms.TextInput(attrs={'size': '30'}))
    password    = forms.CharField(label=(u'Password'), widget=forms.PasswordInput) 
```

# 视图.py

```
from django.http import HttpResponseRedirect
from django.contrib.auth.models import User
from django.contrib.auth.decorators import login_required
from django.shortcuts import render_to_response
from django.template import RequestContext
from registeredmember.forms import RegistrationForm, LoginForm
from registeredmember.models import Registeredmember 
from django.contrib.auth import authenticate, login, logout
import random, time
from random import randint

def userregistration(request):
    if request.user.is_authenticated():
            return HttpResponseRedirect('/profile/')
    if request.method == 'POST':
        form = RegistrationForm
        form = RegistrationForm(request.POST)
        if form.is_valid():
            user = User.objects.create_user(username=form.cleaned_data['username'], email = form.cleaned_data['email'], password = form.cleaned_data['password'])
            user.first_name = form.cleaned_data['first_name']
            user.last_name = form.cleaned_data['last_name']
            user.save()
            registeredmember = Registeredmember(user=user, prefix = form.cleaned_data['prefix'],first_name=form.cleaned_data['first_name'],\
                                                middle_name=form.cleaned_data['middle_name'],last_name=form.cleaned_data['last_name'],gender=form.cleaned_data['gender'],\
                                                occupation=form.cleaned_data['occupation'],income=form.cleaned_data['income'],age=form.cleaned_data['age'],\
                                                address_line1=form.cleaned_data['address_line1'],address_line2=form.cleaned_data['address_line2'],city=form.cleaned_data['city'],\
                                                state=form.cleaned_data['state'],phone_no_Mobile=form.cleaned_data['phone_no_Mobile'],phone_no_Work=form.cleaned_data['phone_no_Work'],\
                                                purpose=form.cleaned_data['purpose'])

            registeredmember.save()

            return render_to_response('carloan/regsuccessful.html',{'ref_no': ref_no}, context_instance=RequestContext(request))
        else:
            return render_to_response('carloan/register.html', {'form': form}, context_instance=RequestContext(request))
    else:
        '''user is not submitting the form, show them a blank registration form'''
        form = RegistrationForm()
        return render_to_response('carloan/register.html', {'form': form}, context_instance=RequestContext(request))

@login_required
def Profile(request):
    if not request.user.is_authenticated():
        return HttpResponseRedirect('/login/')
    registeredmember = request.user.get_profile
    return render_to_response('carloan/profile.html', {'registeredmember': registeredmember}, context_instance=RequestContext(request))

def LoginRequest(request):
    if request.user.is_authenticated():
        return HttpResponseRedirect('/profile/')
    if request.method =='POST':
        form = LoginForm(request.POST)
        if form.is_valid():
            username = form.cleaned_data['username']
            password = form.cleaned_data['password']
            registeredmember = authenticate(username=username, password=password)
            if registeredmember is not None:
                login(request, registeredmember)
                return HttpResponseRedirect('/profile/')
            else:
                return render_to_response('carloan/loginerror.html', context_instance=RequestContext(request))
        else:
            '''user is submitting a blank login form, notify him that he submitted a blank form''' 
            return render_to_response('carloan/loginblank.html', context_instance=RequestContext(request))

    else:
        '''user is not submitting the form, show the login form'''
        form = LoginForm()
        return render_to_response('carloan/login.html',{'form': form}, context_instance=RequestContext(request))

def LogoutRequest(request):
    logout(request)
    return render_to_response('carloan/logout.html', context_instance=RequestContext(request)) 
```

# 下面的代码给出了错误用户名已经存在，但是当我指定一个新的用户名时它会更新，虽然它不会更新用户名但其他字段

# 编辑配置文件的views.py

```
@login_required
def editprofile(request):
    registeredmember = request.user.get_profile()
    if request.method == 'POST':
        userprofile_edit = RegistrationForm(request.POST, instance = registeredmember)
        if userprofile_edit.is_valid():
            userprofile_edit.save()
            return HttpResponseRedirect('/profile/')
    else:
        userprofile_edit = RegistrationForm(instance = registeredmember)
    return render_to_response('carloan/editprofile.html', {'userprofile_edit': userprofile_edit}, context_instance=RequestContext(request)) 
```

# 用下面的代码整理出来：

# 表格.py

```
class EditForm(forms.ModelForm):
    class Meta:
        model = Registeredmember
        exclude = ('user','username','email','password','password1',) 
```

# 视图.py

```
@login_required
def editprofile(request):
    if request.method == 'POST':
        userprofile_edit = EditForm(request.POST, instance = request.user.get_profile())
        if userprofile_edit.is_valid():
            userprofile_edit.save()
            return HttpResponseRedirect('/profile/')
    else:
        userprofile_edit = EditForm(instance = request.user.get_profile())
    return render_to_response('carloan/editprofile.html', {'userprofile_edit': userprofile_edit}, context_instance=RequestContext(request)) 
```

谢谢你们...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:29:21.317

Django 1.5 和自定义用户模型将对此有所帮助，但同时您的 ModelForm 设置也很好。

要从其对象的实例初始化 ModelForm，请执行以下操作：

```
user_profile_form = RegistrationForm(request.POST, instance=request.user.get_profile()) 
```

该`request.POST`行中的 允许您`user_profile_form`使用用户的输入更新对象。它将很好地将您实例中的现有数据与用户的新信息合并。

然后，您可以将其打印到视图中，或者您可以这样做保存它：

```
if user_profile_form.is_valid():
    user_profile_form.save()
else
    # do other stuff 
```

# c++ - 在静态库段错误中绑定 lua

> ID：13400660
> 
> 赞同：0
> 
> 时间：2012-11-15T15:27:00.020
> 
> 标签：c++, lua

我正在尝试将 C++（功能）lua 扩展作为静态库绑定到主机 C++ 程序。
我做了一个简约的程序，看看它是否能正常工作。我目前有这个代码：

主.cpp：

```
#include "util.h"

int main()
{
    lua_State* L;
    startLua(L);//after the call to this is gets the segfault
    luaL_dofile(L,"test.lua");
} 
```

实用程序.h：

```
#ifndef _UTIL_FILE_INCLUDED_
#define _UTIL_FILE_INCLUDED_

extern "C" {
#include <lua.h>
#include <lualib.h>
#include <lauxlib.h>
}

//functions
int startLua(lua_State* start);

#endif 
```

实用程序.cpp：

```
#include "util.h"

int startLua(lua_State* start)
{
    //program never gets here
    start = lua_open();
    luaL_openlibs(start);
    return 0;
} 
```

生成文件：

```
CC=g++
CFLAGS=-c -Wall -fpermissive 
LFLAGS=-llua

all: util.a main.o 
    $(CC) $(LFLAGS) main.o util.a -o main
util.a: util.o util.h
    ar -cvq util.a util.o
util.o: util.cpp util.h
    $(CC) $(CFLAGS) util.cpp
main.o: main.cpp util.h
    $(CC) $(CFLAGS) main.cpp
clean:
    rm *.o *.a 
```

我还尝试从标头中取消定义 L 并纯粹在 main() 内部定义它，结果相同。

我在编译期间得到的唯一警告是“L 已定义但未使用”或“L 未初始化使用”。

在运行时，它首先立即给我一个段错误。

我并不经常使用图书馆，所以那里可能有问题，在这种情况下，这应该是一个简单的问题。

万一这很重要，我使用 gcc 4.7.2、lua 5.1.5 和 Arch Linux（更新）。

编辑：根据 GDB，问题出在这里：程序收到信号 SIGSEGV，分段错误。/usr/lib/liblua.so.5.1 中的 lua_gettop () 中的 0x00007ffff7bb6390

我从来没有遇到过lua的问题，将它编译成静态库是否可能是一个错误？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:24:24.010

```
lua_State* L;
startLua(L);//after the call to this is gets the segfault 
```

这是一个基本的 C 问题。C 中的参数在按值传递时不能*更改*它们的值。

`startLua`设置其参数的值。但这根本不影响`L`。这不是 C++（即使是，您也没有通过*引用*传递它）。如果你想影响`L`，那么你必须传递一个指向`L`自身的指针。如中`&L`，并且`startLua`必须采取`lua_State**`。并且要设置该值，它必须取消引用指针 ( `*start = lua_open()`)。

甚至更好，只需这样做：

```
lua_State *L = startLua(); 
```

并`startLua` *返回*Lua 状态。

# google-maps - 界内和界外的方向和距离

> ID：13400664
> 
> 赞同：2
> 
> 时间：2012-11-15T15:27:15.977
> 
> 标签：google-maps, google-maps-api-3

我尝试创建一个 WordPress 插件，它将结合使用 Google 地图方向和边界。

这是一个基于公里收费的应用程序，在边界内每公里成本低，在边界外每公里成本高。

所以问题是：

1.  有没有办法知道从边界点到边界边界的距离是多少
2.  有没有办法知道从边界外的点到边界边界的距离是多少？

请注意，边界区域将由 poligons 构成。我已经找到方法来检查一个点是在 poligon 中还是在 poligon 之外。

问题是我在上面的列表中描述的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T04:07:50.083

是的，API 中有一个函数可以测量 LatLng 之间的距离。

它在几何库中称为：computeLength()。

请阅读这个

[https://developers.google.com/maps/documentation/javascript/geometry](https://developers.google.com/maps/documentation/javascript/geometry)

距离和面积函数

两点之间的距离是它们之间最短路径的长度。这条最短路径称为测地线。在一个球体上，所有测地线都是一个大圆的片段。要计算此距离，请调用 computeDistanceBetween()，向其传递两个 LatLng 对象。

如果您有多个位置，则可以改为使用 computeLength() 来计算给定路径的长度。

距离结果以米为单位。

要计算多边形区域的面积（以平方米为单位），请调用 computeArea()，传递定义闭环的 LatLng 对象数组。

# powershell - 使用 Import-Clixml 加载部分数组

> ID：13400666
> 
> 赞同：1
> 
> 时间：2012-11-15T15:27:31.543
> 
> 标签：powershell

我这样做了：

```
gci -recurse | where { ! $_.PSIsContainer } | Sort-Object Length | Export-Clixml s:\Files.xml 
```

它创建了一个大小约为 3 GB 的文件。我可以按顺序加载元素而不是整个集合吗？我希望能够访问文件大小、完整路径和修改时间，并且真的不想用它制作一个 csv 文件（特别是因为我以后可能需要更多信息）......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:36:06.610

像这样？

```
gci -recurse | where { ! $_.PSIsContainer } |
 select length,fullname, lastwritetime | 
    Sort-Object Length | Export-Clixml s:\Files.xml 
```

# java - 如何将部分 XML 复制到新的 XML 文件？

> ID：13400672
> 
> 赞同：2
> 
> 时间：2012-11-15T15:27:47.783
> 
> 标签：java, xml

有人知道如何将 XML 文件的一部分复制到新的 XML 文件中吗？我有这个：

```
<?xml version="1.0"?><!DOCTYPE svg  PUBLIC '-//W3C//DTD SVG 1.1//EN' 'http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd'>

<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 500 401" height="401px" style="stroke: #818181;stroke-width: 1;stroke-linecap: round;stroke-opacity: 0.25;fill: #f4f3f0;" contentStyleType="text/css" zoomAndPan="magnify" preserveAspectRatio="xMidYMid meet" width="500px" enable_background="new 0 0 500 401" contentScriptType="application/ecmascript" version="1.1"><defs></defs><metadata><views><view w="500" zoomAndPan="magnify" preserveAspectRatio="xMidYMid meet" padding="0" h="401"><proj id="laea" lon0="16.693" lat0="45.723"></proj><bbox w="51.2" y="989.82" h="50.8" x="972.4"></bbox><llbbox lon1="180" lon0="-180" lat0="-90" lat1="90"></llbbox></view></views></metadata>
<g>
<path data-name="" d=" " data-fips=""></path>
<path data-name="" d="" data-fips=""></path>
</g>
</svg> 
```

我想复制除 g 标签中的数据以外的所有内容，我该怎么做？有人可以给我看代码吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:39:30.673

您可能正在寻找 XSLT。它是一个 java 技术/库，允许您定义一个 xml 结构到另一个的转换。它允许可重复的批处理操作和强大的动态语言，可以设置变量、使用条件语言等。您可以从命令行或从另一个应用程序内部运行它。

[http://en.wikipedia.org/wiki/XSLT](http://en.wikipedia.org/wiki/XSLT)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:43:57.200

在您的情况下，一个简单的正则表达式替换就足够了：

```
final String svmXML = "<?xml....."; // your XML here
final String svmXMlWithoutG = svmXML.replaceAll ("\\<g\\>(?s).*\\</g\\>", "")); 
```

除非您在某处使用[CDATA 。](http://en.wikipedia.org/wiki/CDATA)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T18:08:26.943

您可以通过两种方式实现这一目标。

**1\. XSLT：**

`<g>`在这里，您可以通过 for-each消除节点

**2\. 文件输入流：**

逐行读取文件并在检查行包含字符串之前写入新文件`<g>`并跳过它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T19:02:18.123

虽然您可以使用 XSLT 来做到这一点，但下面是仅使用标准 Java API（使用 DOM）的方式。

```
DocumentBuilderFactory factory = DocumentBuilderFactory.newInstance();
DocumentBuilder builder = factory.newDocumentBuilder();
Document document = builder.parse(/* get an InputStream of your data */);
Element root = document.getDocumentElement();
NodeList children = root.getElementsByTagName("g");
for (int i = 0; i < children.getLength(); ++i) {
    Node child = children.item(i);
    root.removeChild(child);
}
Transformer tr = TransformerFactory.newInstance().newTransformer();
StreamResult result = new StreamResult(/* Get an OutputStream to write to */);
DOMSource source = new DOMSource(document);
tr.transform(source, result); 
```

这样做可以避免正则表达式的脆弱性（这将适用于这种特定情况，但如果您需要开始变得更花哨，它们会很快与 XML 失控），并减少您必须做出的假设关于您的输入格式的方式。

# c++ - Visual Studio 2012 中使用 XAML 的 Visual C++

> ID：13400678
> 
> 赞同：0
> 
> 时间：2012-11-15T15:28:02.207
> 
> 标签：c++, xaml, user-interface

我正在尝试使用适用于 Windows 7 和 Visual Studio 2012 的 XAML 编写我的第一个 GUI。XAML 未在任何地方列为模板，我无法找到安装它的任何地方。

如果你能帮助我建立我的第一个项目，我将不胜感激！

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T21:05:52.357

[不幸的是，除了Windows 8 Store 应用程序](http://blogs.msdn.com/b/vcblog/archive/2012/08/24/10343401.aspx)之外，我认为 XAML 和 C++ 不支持（至少没有官方支持）。

有一个关于将 XAML 引入 C++ 桌面应用程序的讨论，可以在这里找到：[http ://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/9ae97df8-0bb1-40f0-bd4a-688a1c3b47a3/](http://social.msdn.microsoft.com/Forums/en-US/winappswithnativecode/thread/9ae97df8-0bb1-40f0-bd4a-688a1c3b47a3/)

此外，这个问题可能对您来说很有趣，它是关于将[WPF 与 C++ 结合使用。](https://stackoverflow.com/questions/4776355/does-wpf-work-with-c)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T21:50:08.680

除了@Johan Falk 的响应之外，您还可以创建一个 C# 项目并将其用作您的前端 GUI，并在同一解决方案中的单独 C++ 项目中执行任何后端逻辑。

# android - 奇怪的 xml 错误：不正确的行尾

> ID：13400684
> 
> 赞同：39
> 
> 时间：2012-11-15T15:28:35.503
> 
> 标签：android, eclipse, git, android-layout, egit

自 1 周前以来我还没有使用过 Eclipse。今天我启动它，我注意到它加载缓慢。启动时提示如下：

http://tinypic.com?ref=2zpk1g2" target="_blank"><img src=" [http://i48.tinypic.com/2zpk1g2.png"](http://i48.tinypic.com/2zpk1g2.png&quot) ;border="0" alt="图片和视频托管由 TinyPic"></a>">

我认为也许 Eclipse 已经更新了 Android 的某些内容，所以我更新到了最新的 ADT。现在我有同样的错误，但我有一个额外的大错误，我不知道是不是因为以前的错误。我已经尝试了查看 xml 层在许多设备中的外观的新功能。我尝试了 2 层，现在程序无法编译，因为它说：

> 行尾不正确：发现回车符 (\r) 没有对应的换行符 (\n)

一个 xml 的错误在这一行：

```
 android:layout_height="wrap_content"> 
```

另一个在：

```
 android:orientation="horizontal"> 
```

wtf发生了？我没有更改任何内容，也没有保存它，1 周前一切都很好。

* * *

## 回答 #1

> 赞同：101
> 
> 时间：2012-11-15T18:14:39.067

我刚遇到同样烦人的问题。我所做的是将整个代码复制到记事本中。然后从记事本中，将其粘贴回 xml 字段。我知道，这听起来很愚蠢，但它奏效了，我不知道为什么-__-”

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-11-23T21:22:50.767

简单的解决方案：

按：Ctrl + Shift + F 然后保存。这是格式的问题。这将格式化它。

* * *

## 回答 #3

> 赞同：23
> 
> 时间：2012-11-15T16:48:07.577

正如 Tor[在这里](https://groups.google.com/d/msg/android-developers/eNUuXQGImIk/Jc2IANnrjl8J)所说，这是因为他们已经解决了 xml 中“透明”行的问题，即当您单击一行时您在另一行时出现的奇怪错误。

正如他所说，如果你有这个错误是因为你有可能导致这个“透明”错误的文件，所以：

> 只需打开文件并调用 Ctrl-1；这将显示可用的快速修复，并且此行警告有一个快速修复，它将清除给定文件中的行尾。

（点击错误，按 ctrl+1，您将看到修复）

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2013-01-30T09:34:08.797

这是我也面临的一个非常有趣的问题。解决方案很简单。只需在同一页面上尝试以下操作。

`Ctrl`+ `A`, `Ctrl`+ `X`, 然后`Ctrl`+`V`

快乐编码。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2012-12-26T19:56:52.943

转到 Preference -> Android -> Lint 错误检查，然后搜索 ID = MangledCRLF，将其严重性更改为“错误”以下。这将解决错误的问题 - “不正确的行尾：找到回车符 (\r) 而没有相应的换行符 (\n)”

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2012-11-21T17:49:12.607

尝试清理项目：

`Project -> Clean... -> Clean All`

它对我有用。希望能帮助到你。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-11-18T13:59:21.567

最好的方法是通过 Android 布局编辑器使用 lint，并使用“修复”按钮。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-16T08:30:27.443

我对 Android SDK/ADT 21 xml 布局错误的解决方案。

> 行尾不正确：发现回车符 (\r) 没有对应的换行符 (\n)

例子：

```
<TextView
    android:id="@+id/text1"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
/> 
```

/>从这里...

在出现错误并按回车键后标记标签之间的空格，然后按 ctrl s（保存）将其删除。

...到这里<

```
<TextView
    android:id="@+id/text2"
    android:layout_width="match_parent"
    android:layout_height="wrap_content"
/> 
```

更新：如果标签之间只有一行，请在此处设置标记并按 ctrl+d（删除）和 ctrl+s（保存）

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-11-20T06:03:21.137

只是`Go to --> window`选项，然后单击`clear`选项和`ok`。

行尾不正确：发现回车符 (\r) 没有对应的换行符 (\n)。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2012-11-20T11:10:41.557

另一种可能的解决方案是格式化导致此错误的布局 xml 文件。如果您使用的是 Eclipse，请使用快捷键 Ctrl+i 并保存文件。有了这个，您应该能够永久消除该特定文件的此错误

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2012-12-04T03:54:28.413

这是因为您对代码的少数部分进行了注释。删除该代码并保存。这件事对我有用。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2013-01-22T10:53:34.700

这是更改您的 Lint 设置以进行永久修复的最佳解决方案之一 [单击此处](https://stackoverflow.com/questions/13400684/strange-xml-error-incorrect-line-ending/14045551#14045551)

**或**
这样做

**转到windows-> Preference -> Android -> Lint Error checks，然后搜索ID = MangledCRLF，将“error”下面的严重性更改为“warning”。它会解决你的问题**

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2013-03-08T05:10:48.580

只是剪切和粘贴。它会起作用的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-01-15T06:54:45.277

这是我遇到的解决方案

解决方案 1： - 打开布局文件 Ctrl+Shift+F（MacOSX 中为 Command+Shift+F）保存布局文件并关闭它。删除构建器可能创建的任何 .out 文件。清洁项目。

解决方案2： - 您也可以选择完整的代码，剪切它然后再次粘贴。这也不会干扰您的 xml 格式。

解决方案 3：对于少数编码人员来说，它在清理项目后就可以工作

希望这会有所帮助。如果我能提供任何帮助，请告诉我

* * *

## 回答 #15

> 赞同：-1
> 
> 时间：2012-11-15T17:20:54.470

也许你需要把 /> 放在最后，

试试这个：

```
android:layout_height="wrap_content"/> 
```

# angularjs - 无法从角度检索注射器

> ID：13400687
> 
> 赞同：53
> 
> 时间：2012-11-15T15:28:41.933
> 
> 标签：angularjs

我有这个应用程序有两个模块：

```
angular.module('components', []).directive('foo', function () { return {};});
angular.module('gaad', ['components']); 
```

有一堆与此模块相关的指令，我不包括在这里。该应用程序工作正常。但是，当我尝试检索模块的注入器时`gaad`：

```
var injector = angular.injector(['gaad', 'components']); //called after 'gaad' module initialization 
```

抛出错误：

```
Uncaught Error: Unknown provider: $compileProvider from components 
```

该应用程序现在非常大，我不知道应该在哪里寻找错误。所以我的问题是：我的问题**可能是什么原因？**

**编辑：** 我能够复制我的问题：http: [//jsfiddle.net/selbh/ehmnt/11/](http://jsfiddle.net/selbh/ehmnt/11/)

* * *

## 回答 #1

> 赞同：122
> 
> 时间：2012-11-15T18:16:36.500

在回答这个问题之前，我们需要注意**每个应用程序只有一个注入器实例，而不是每个模块**。从这个意义上说，不可能为每个模块检索一个注入器。当然，如果我们采用顶层模块，它代表了整个应用程序。从这个意义上说，应用程序和顶级模块似乎是等价的。这似乎是一个微妙的差异，但为了完全正确地回答这个问题，理解这一点很重要。

接下来，据我所知，您想*检索*而`$injector`不是创建它的新实例。问题是它将为指定为参数的模块（应用程序）`angular.injector`创建一个新实例。`$injector`这里必须明确指定主要的 AngularJS 模块 (ng)。因此，在此代码示例中：

```
var injector = angular.injector(['gaad', 'components']); 
```

您试图从“gaad”和“components”模块中定义的组件创建一个新的注入器，显然`$compileProvider`没有在您的自定义模块中定义。**将`ng`模块添加到列表中将通过创建一个新的注入器来“解决”问题**——这是您可能不希望发生的事情。

**要实际检索与正在运行的应用程序关联的注入器实例，**我们可以使用 2 种方法：

*   从 AngularJS JavaScript 中最简单的解决方案就是注入`$injector`实例：[http ://docs.angularjs.org/api/angular.injector](http://docs.angularjs.org/api/angular.injector)
*   从 AngularJS 世界之外 - 调用`angular.element([DOM element]).injector()`where [DOM element] 是`ng-app`定义 的圆顶元素（或该元素的任何子元素）。更多信息在这里：[http ://docs.angularjs.org/api/angular.element](http://docs.angularjs.org/api/angular.element)

这是显示注入器检索的 2 种方法的 jsFiddle：http: [//jsfiddle.net/xaQzb/](http://jsfiddle.net/xaQzb/)

另请注意，`$injector`在单元测试之外，直接使用并不是很常见的场景。从 AngularJS 世界之外检索 AngularJS 服务可能是有用的想法。更多信息：[Call Angular JS from legacy code](https://stackoverflow.com/q/10490570/1418796)。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-15T16:33:08.423

看来您还需要在注射器中包含 ng 。

```
var injector = angular.injector(['ng', 'b', 'a']); 
```

来自：[AngularJS：注入器](http://docs.angularjs.org/api/angular.injector)

> ng 模块必须显式添加。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-09-12T11:41:55.880

问题在于 Angular 代码的执行流程。要集成@pkozlowski.opensource 的答案和相关评论，请注意该`$injector`属性在模块代码执行后可用于 DOM 元素，因此当您访问该属性时（当您尝试访问该属性时`console.log`）该属性仍然是`undefined`.

您可以通过简单地将日志功能的执行设置为 0 超时来解决这个问题（即，不需要以毫秒为单位的显式延迟）。`$injector`这个 hack 之所以有效，是因为当堆栈为空时，即 Angular 的引导完成并且该属性可用于 DOM 元素时，将执行日志记录功能。

Angular 术语中的另一个（也许更好）解决方案是将您的`$injector`-accessing 代码包含在[运行块](http://docs.angularjs.org/guide/module)中（另请参见[相关 API](http://docs.angularjs.org/api/angular.Module)）。然后`$injector`可以很容易地将其作为普通服务注入到初始化函数中。这是可行的，因为当所有引导终止时，运行块会排队并异步执行。

您可以在下面找到两个小提琴，每个解决方案一个。

[0 超时 jsFiddle](http://jsfiddle.net/tetotechy/YHdH4/3/)

[运行块 jsFiddle](http://jsfiddle.net/tetotechy/kP4Bs/1/)

## 编辑

此外，通常不需要显式加载`ng`模块。在正常情况下，`ng`模型已经自动加载，除非你想手动引导 Angular 的代码。答案之一中引用的文档（隐含地，不幸的是）指的是Angular的手动引导过程，当您必须手动创建注入器并告诉它您要加载哪些模块时

# videochat - 视频聊天网站

> ID：13400693
> 
> 赞同：2
> 
> 时间：2012-11-15T15:28:51.587
> 
> 标签：videochat

*我正在尝试了解如何为videochat*构建网站界面。

*   *使用哪些技术？*
*   *是否有关于开发步骤的指南？*

我宁愿不为此使用 Flash……
是否可以在*html5 和 Javascript*中完成所有操作？

# cpu-architecture - 为什么存在指令/数据对齐？

> ID：13400694
> 
> 赞同：0
> 
> 时间：2012-11-15T15:28:51.820
> 
> 标签：cpu-architecture

我经常看到有关架构指令和数据的信息必须与字、半字等边界对齐。虽然遵循这些规则并不难，但我只是想知道是否有人能说出为什么（通常）存在这个要求？

编辑：基本上在这里找到了我的答案：[为什么数据结构对齐对性能很重要？](https://stackoverflow.com/questions/2006216/why-is-data-structure-alignment-important-for-performance)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T05:31:26.767

这是因为高效数据总线设计问题。通过对齐的 memoey 地址，数据可以有效地适应数据总线。

对于 32 位字加载，如果对齐，则连接 CPU 和 DRAM MEMORY 的所有 32 位数据总线。否则，计算机必须使用数据总线的低位一次，然后使用高位再次加载数据总线。

更重要的是，当前的缓存架构设计也利用了对齐约束

# android - 移植：Android/Linux 客户端/服务器套接字通信问题

> ID：13400695
> 
> 赞同：0
> 
> 时间：2012-11-15T15:28:51.557
> 
> 标签：android, linux, sockets, android-ndk, porting

我正在将服务器/客户端套接字应用程序从 Windows 移植到 Linux/Android，但我似乎无法弄清楚问题所在。

基本上，客户端所做的是将一串字符发送到服务器，服务器将字符串大写，然后将字符串回显给客户端，客户端打印出结果。在服务器回显大写字符串和客户端接收结果之间的某个地方，有一个错误，但即使使用调试器或 Wireshark，我也无法完全弄清楚。

服务器的strace：

```
socket(PF_INET, SOCK_STREAM, IPPROTO_TCP) = 3
bind(3, {sa_family=AF_INET, sin_port=htons(9099), sin_addr=inet_addr("0.0.0.0")}, 16) = 0
listen(3, 5)                            = 0
ioctl(3, FIONREAD, [134515712])         = -1 EINVAL (Invalid argument)
select(0, [], NULL, NULL, NULL) 
```

客户的踪迹：

```
socket(PF_INET, SOCK_STREAM, IPPROTO_TCP) = 3
connect(3, {sa_family=AF_INET, sin_port=htons(9099), sin_addr=inet_addr("127.0.0.1")}, 16) = 0
getpeername(3, {sa_family=AF_INET, sin_port=htons(9099), sin_addr=inet_addr("127.0.0.1")}, [16]) = 0
send(3, "four score and seven years ago\0\0"..., 128, 0) = 128
ioctl(3, FIONREAD, [0])                 = 0
select(0, [], NULL, NULL, {1, 0})       = 0 (Timeout)
write(2, "Exception code: 00000507, data: "..., 52Exception code: 00000507, data: 00000000 ((null):0)
) = 52
shutdown(3, 2 /* send and receive */)   = 0
close(3)                                = 0
exit_group(1)                           = ? 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T22:17:14.680

问题是 select() api 调用的第一个参数应该包含 Linux 上的 [highest socket FD value + 1]。

# spring - plsql数组输入和输出参数，无需使用jdbctemplate更改数据库

> ID：13400696
> 
> 赞同：0
> 
> 时间：2012-11-15T15:28:52.380
> 
> 标签：spring, jdbc, plsql

我正在将 jdbctemplate 用于数据库，需要将字符串和数字数组传递给匿名过程，不允许更改数据库.....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:39:24.780

不确定您的 plsql 块，但您可以使用 jdbc 遵循这种方法。尝试看看这个作品，希望这会有所帮助，否则提供反馈。

```
 String myArray[] = { "black", "blue", "orange", "red" };
    ArrayDescriptor des = 
        ArrayDescriptor.createDescriptor("ARRAY_TYPE", conn);
    // presume that you have created ARRAY_TYPE in your schema
    ARRAY array = new ARRAY(des, conn, myArray);
    CallableStatement cst = conn.prepareCall("call yourproc(?,?)");
    cst.setArray(1, array);
    cst.registerOutParameter(2, 
                             Types.INTEGER); // presume that second param is out
    cst.execute(); 
```

# c# - 无法在 IIS7.5 上调用 ASMX 方法

> ID：13400700
> 
> 赞同：1
> 
> 时间：2012-11-15T15:29:04.880
> 
> 标签：c#, web-services, iis-7, asmx, windows-server-2008-r2

我已经一整天都在寻找解决方案。我在客户的服务器上遇到了 asmx webservices 的问题。它们似乎部署正确，因为我可以毫无问题地调用 asmx 文件。现在，当我尝试调用一个方法时，绝对没有发生任何事情。IE 没有返回错误消息或类似的东西。我已经向 webmethods 添加了日志记录机制，但它们不记录任何内容，因此必须忽略方法调用（用户权限设置正确）。

为了理解这里的问题，我已经在测试机器上部署了这两个 web 服务。你猜怎么着，它们工作得很好。我不知道我在这里错过了什么。我希望你有一些建议。我唯一的猜测是，一定有人弄乱了 IIS 配置。我什至尝试在服务器上部署一个简单的 hello world webservice，但也没有运气。我无法调用该方法。

这些服务部署在 Windows Server 2008 R2 上，使用的 .NET Framework 是 .NET 2.0。IIS 版本是 7.5

如果您需要更多信息，请立即询问！

# hbase - HBASE 0.96 发布日期

> ID：13400701
> 
> 赞同：0
> 
> 时间：2012-11-15T15:29:05.767
> 
> 标签：hbase

有人知道 HBase 0.96 (Singularity) 何时发布的估计吗？我希望开始将它与 Hadoop 2.0 一起使用。我在 hbase.apache.org 上看不到任何东西。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-03T19:49:17.727

对于 HBase 或任何其他开源项目，最好的办法是咨询它的问题跟踪器。

对于您的特定问题，在 HBase JIRA 上跟踪[0.96 摘要](https://issues.apache.org/jira/browse/HBASE/fixforversion/12320040)应该会给您一个很好的“估计”。截至今天，有 6 个未解决的票证，其中两个有可用的补丁，所以第一个 RC 可能很快就会出现。

此外，邮件列表中也有[此讨论](http://apache-hbase.679495.n3.nabble.com/DISCUSSION-Sorting-out-issues-for-0-96-for-eventual-release-td4036318.html)。

# php - cake php 缺少数据库表

> ID：13400707
> 
> 赞同：1
> 
> 时间：2012-11-15T15:29:25.400
> 
> 标签：php, cakephp

我尝试在新主机上迁移蛋糕站点。一切似乎都很好，除了一个单一的动作。

错误：错误：未找到模型 Actualites 的数据库表actualites。

注意：如果要自定义此错误消息，请创建 app/views/errors/missing_table.ctp

route '/' => acceuil 控制器

```
<?php
class Accueil extends AppModel{
        public $name = 'Accueil';
        var $useTable = false;

        public function findPublicActualities(){

        }
}
?>

<?php
class AccueilController extends AppController{
        public $name = 'Accueil';
        public $helpers = array('Html');
        public $uses = array('Actualites');

        public function index(){
                $this->set( 'title_for_layout', 'Bienvenue' );
                $conditions = array("public" => "1");
                $actualites = $this->Actualites->find("all",
                                    array('conditions' => $conditions,
                                          'limit' => 5,
                                          'order' => 'poid ASC'));

                $this->set('actualites', $actualites);
        }
}
?> 
```

感谢您的帮助，这个问题让我抓狂！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:25:33.697

在 Cakephp 中，模型名称是表名称的单数，所以如果你有一个表狗，你的模型将被称为 Dog，所以我认为你的问题是你的模型名称与你的表相同，所以你可以修复它做这个：

```
 class Actualites extends AppModel {
     public $useTable = 'actualites';
 } 
```

它会起作用。

# java - 多对一子类外键

> ID：13400711
> 
> 赞同：1
> 
> 时间：2012-11-15T15:29:30.713
> 
> 标签：java, hibernate, hibernate-mapping

我在公共架构中有 2 个表事件和位置。我在从公共表继承的“其他”模式中有两个表。有 4 个类可以模仿这种设置（Event、Location、OtherEvent 和 OtherLocation）。我正在尝试使用 Hibernate 来持久保存 OtherEvent & Other Location。

每个活动都有 1+ 个地点。位置对事件没有意义。

如果我创建了一个 OtherEvent 并向它添加了一个 OtherLocation 并尝试保存它，那么休眠会将 OtherEvent 插入到 other.event 中，而休眠会将 OtherLocation 插入到 other.location 中（包括 event_id）。然后hibernate尝试做： UPDATE public.location set event_id=? 位置=？这失败了，因为我没有 public.location 的权限。我怎样才能阻止它进行此更新？或更改它，以便在 other.location 表上进行更新。

我尝试修改 public.hbm.xml 并更改：

```
<bag name="locations"> 
```

到

```
<bag name="locations" inverse="true"> 
```

这不会执行更新语句，但插入到 other.location 不包括 event_id 列（导致非空的 ConstraintViolation）。这是因为 Location 没有对 Event 对象的引用。

我根本无法更改数据库。我正在使用 Hibernate 4。我该怎么办？

以下是所有相关配置： 公共类：

```
public class Event{
    private String eventId;
    private List<Location> locations;
    //getters & setters
}

public class Location{
    private String locationId;
    private double lat;
    private double lon;
    //getters and setters
} 
```

公共表：

```
create table public.event{
    event_id varchar PRIMARY KEY,
    event_name varchar,
)

create table public.location(
    location_id varchar PRIMARY KEY,
    event_id varchar NOT NULL, --foreign key to public.event.event_id
    lat double,
    lon double
) 
```

公共.hbm.xml：

```
<hibernate-mapping schema="public">
    <class name="Event" table="event">
        <id name="eventId" column="event_id"/>
        <bag name="locations">
            <key column="event_id" not-null="true"/>
            <one-to-many class="Location">
        </bag>
    </class>
    <class name="Location" table="location">
        <id name="locationId" column="location_id"/>
        <property name="lat" column="lat"/>
        <property name="lon" column="lon"/>
    </class>
</hibernate-mapping> 
```

其他表：

```
create table other.event inherits public.event(
    other_information varchar
)

create table other.location inherits public.location(
    other_loc_information varchar
) 
```

其他类：

```
public class OtherEvent extends Event{
    private String otherInformation;
    //getter & setter
}

public class OtherLocation extends Location{
    private String otherLocInformation;
    //getter & setter
} 
```

其他.hbm.xml：

```
<hibernate-mapping schema="other">
    <union-subclass name="OtherEvent" extends="Event" table="event">
        <property name="otherInformation" column="other_information"/>
    </union-subclass>
    <union-subclass name="OtherLocation" extends="Location" table="location">
        <property name="otherLocInformation" column="other_loc_information"/>
    </union-subclass>
</hibernate-mapping> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:52:00.300

我会说解决方案非常接近。你说：

> 我根本无法更改数据库。我正在使用 Hibernate 4。我该怎么办？

所以我希望您可以更改代码和映射。如果我是对的，您可以更改代码和映射：`inverse`您尝试过的设置：

```
<bag name="locations" inverse="true"> 
```

应该解决它。在这种情况下，唯一的事情是，我们还必须显式分配`Location`给`Event`（不仅将其放入拥有集合中）。

`Location`应该有财产`Event`

```
public class Location{
    private String locationId;
    private Event event;
    private double lat;
    private double lon;
    //getters and setters
} 
```

映射应该是：

```
<class name="Location" table="location">
  <id name="locationId" column="location_id"/>
  <property name="lat" column="lat"/>
  <property name="lon" column="lon"/>
  <many-to-one name="Event" column="event_id" />
</class> 
```

因此，如果在代码中您将执行以下操作：

```
event.locations.add(location);
location.event = event; 
```

然后它应该只与 INSERTS 一起使用。反过来意味着，那个孩子会独自做所有的事情，所以它必须了解父母。

# c++ - 带有 STL 向量的模板函数因新分配器而中断

> ID：13400717
> 
> 赞同：0
> 
> 时间：2012-11-15T15:29:52.347
> 
> 标签：c++, templates, allocator

我有很多函数被定义为：

```
template<typename T>
void myFunction1(vector<T>& vin); 
```

重点是，我输入一个 STL 向量并做一些工作。

我最近需要将默认分配器更改为客户分配器。除非我将定义更改为：

```
template<typename T, typename Alloc>
void myFunction1(vector<T,Alloc>& vin); 
```

为了使它更复杂，我不会在所有情况下都使用重载分配器..

这是否意味着我必须用两个定义重写每个函数，一个是分配器的模板，另一个是没有分配器的定义？我真的希望这不是答案...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:35:27.840

一个更简单的解决方案可能是根据迭代器来实现您的函数，就像在标准库算法中所做的那样：

```
template <typename Iterator>
void myFunction1(Iterator1 first, Iterator2 last) { .... } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:36:22.270

拥有一个尊重完整类模板的单个函数模板就足够了。假设，这将：

```
template <typename T, typename Alloc>
void myFunction1(std::vector<T, Alloc> & v); 
```

*无论分配器是否默认，*每个向量都有这两个参数。**

 *然而，一个更有成效的成语其实是把整个容器做成一个模板：

```
template <typename V>
void myFunction1(V & v)
{
    typedef typename V::value_type value_type;
    // ...
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:33:36.597

我认为你也改变了你的模板。但好消息是您可以将模板更改为：

```
template <typename MyVector> 
void myFunction1(MyVector& vin); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T15:38:05.840

您不必为每个函数模板提供两个重载。只需提供两个参数之一。`std::vector`有两个模板参数，所以都可以推导出来就好了。*

# database - Occasional Blob not found error on a firebird database

> ID：13400720
> 
> 赞同：2
> 
> 时间：2012-11-15T15:30:02.347
> 
> 标签：database, delphi, firebird

I'm useing Firebird in conjunction with IBX (I know one should not do that but it's a legacy application I need to maintain...). When running that application (an apache shared module) under heavy load I occasionaly get an exception message "blob not found" - and that although the query was executed a hundered times before without any problems.

When googling for that problem I found that forced write should be enabled (which actually is the case) but nothing else....

The query by the way is rather simple. Just a "select * from" with a left out join attached. The problem occurs when reading a Blob (subtype text).....

# ruby-on-rails-3 - Rails 3.2 route not found when only number value sent in

> ID：13400724
> 
> 赞同：0
> 
> 时间：2012-11-15T15:30:09.790
> 
> 标签：ruby-on-rails-3, routes

I have this route:

```
match 'items/:location_no/:item_no' => 'items#location_item', :constraints => { :location_no => /.*/, :item_no => /.*/ } 
```

I call it with this link: `http://localhost:3000/items/whs/65484` which gives me this error:

```
No route matches {:action=>"edit", :controller=>"item_details"} 
```

The item number (it's not an id field) is 65484 but if I change it to have one alphabetical letter like 65484s (`http://localhost:3000/items/whs/65484s`) it goes into the correct controller (although it doesn't find the item because of the bogus **s** at the end). What can be causing it to not match the route when only number? I have tried to skip the constraints in the route with the same effect.

As requested, these are the item routes:

```
 item_details GET    /item_details(.:format)                          item_details#index
                          POST   /item_details(.:format)                          item_details#create
          new_item_detail GET    /item_details/new(.:format)                      item_details#new
         edit_item_detail GET    /item_details/:id/edit(.:format)                 item_details#edit
              item_detail GET    /item_details/:id(.:format)                      item_details#show
                          PUT    /item_details/:id(.:format)                      item_details#update
 autocomplete_item_name_items GET    /items/autocomplete_item_name(.:format)          items#autocomplete_item_name
       edit_item_history_item GET    /items/:id/edit_item_history(.:format)           items#edit_item_history
                        items GET    /items(.:format)                                 items#index
                              POST   /items(.:format)                                 items#create
                     new_item GET    /items/new(.:format)                             items#new
                    edit_item GET    /items/:id/edit(.:format)                        items#edit
                         item GET    /items/:id(.:format)                             items#show
                              PUT    /items/:id(.:format)                             items#update
                              DELETE /items/:id(.:format)                             items#destroy
                                     /items/:location_no/:item_no(.:format)           items#location_item {:location_no=>/.*/} 
```

# mysql - MySQL 结合两个查询

> ID：13400726
> 
> 赞同：12
> 
> 时间：2012-11-15T15:30:14.560
> 
> 标签：mysql

我有两个 MySQL 查询

```
QUERY:

SELECT sodnik_1 FROM prihodnji_krog  WHERE file_id='8778' AND sodnik_1 != ''
UNION 
SELECT sodnik_2 FROM prihodnji_krog  WHERE file_id='8778' AND sodnik_2 != ''
UNION
SELECT sodnik_3 FROM prihodnji_krog  WHERE file_id='8778' AND sodnik_3 != ''
UNION
SELECT sodnik_4 FROM prihodnji_krog  WHERE file_id='8778' AND sodnik_4 != ''

QUERY:
SELECT value FROM notification_sodniki WHERE user_id='16'

OUTPUT LOOKS LIKE THIS:

Name 1
Name 2
Name 3
Name 4

IN BOTH TABLES 
```

他们给了我 1 列。我想执行交叉连接并仅返回两个选择查询中都存在的值。那可能吗 ？

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-15T15:33:05.330

怎么样

```
SELECT * FROM
(
    SELECT sodnik_1 as value FROM prihodnji_krog  WHERE file_id='8778' AND sodnik_1 != ''
    UNION 
    SELECT sodnik_2 as value FROM prihodnji_krog  WHERE file_id='8778' AND sodnik_2 != ''
    UNION
    SELECT sodnik_3 as value FROM prihodnji_krog  WHERE file_id='8778' AND sodnik_3 != ''
    UNION
    SELECT sodnik_4 as value FROM prihodnji_krog  WHERE file_id='8778' AND sodnik_4 != ''
) x INNER JOIN 
(
    SELECT value FROM notification_sodniki WHERE user_id='16'
) y 
ON x.value = y.value 
```

当您在子句中使用子查询时`FROM`，就像您正在制作临时表一样。然后使用别名，您可以参考它们并执行`INNER JOIN`

# perl - 使用带空括号的 Perl 模块

> ID：13400733
> 
> 赞同：6
> 
> 时间：2012-11-15T15:30:36.077
> 
> 标签：perl

我正在尝试学习 Perl 并了解有关`use`模块的内容。

（假设`use strict; use warnings;`）

我知道`use File::Find;`加载模块的所有子例程。

我知道`use File::Find qw(find);`只加载`find`模块的子例程（尽管其他子例程我可以通过 使用`File::Find::finddepth`）。

那么做`File::Find ();`什么呢？具体来说，为什么是空括号？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-15T15:32:52.340

tl;dr ：它说不导出任何东西而不是默认值。

长版：

File::Find 具有`our @EXPORT = qw(find finddepth);`，因此默认情况下会导出这些子项。如果我们只是使用该模块然后尝试将其称为`find`错误，因为我没有将正确的参数传递给它`find`但`find` *确实*存在。

```
quentin@workstation:~ # perl
use File::Find;
find();

no &wanted subroutine given at /Users/david/perl5/perlbrew/perls/perl-5.16.1/lib/5.16.1/File/Find.pm line 1064. 
```

在语句中传递一个列表`use`会覆盖默认值并仅导出您要求的子项。空列表意味着不会导出任何列表，并且会因为`find`不存在而出错。这样的：

```
quentin@workstation:~ # perl
use File::Find ();
find();

Undefined subroutine &main::find called at - line 2. 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:36:35.570

> 那么 File::Find (); 是什么？做？具体来说，为什么是空括号？

简而言之，您**需要**-ing 这个模块并调用`File::Find::import`导入函数（如您的示例中的`find`和`finddepth`）。所以空括号意味着你不想导入任何东西，并且隐式禁止导入任何默认符号。

# javascript - allow empty input in jquery validation engine

> ID：13400735
> 
> 赞同：1
> 
> 时间：2012-11-15T15:30:39.570
> 
> 标签：javascript, regex

I am having this issue where I want an INPUT field to be just NUMBERS or EMPTY. If a user chooses to add a phone number or leave it blank if they don't want to.

I tried using this, but it requires a phone number if it's empty:

```
 "onlyNumberSp": {
                "regex": /^[0-9\ ]+$/,
                "alertText": "* Numbers only"
            }, 
```

Thank you

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:32:40.563

`/^[0-9]*$/`允许任意数量的数字，包括一个都没有（= 空字符串）。

如果您想保留空格，请使用`/^[0-9 ]*$/`（无需转义空格字符）。

# node.js - How to add an userbar in a jade template

> ID：13400741
> 
> 赞同：1
> 
> 时间：2012-11-15T15:30:53.063
> 
> 标签：node.js, express, pug

I am trying to understand how to set for exemple an userbar in my jade layout actualy I have my layout.jade:

```
doctype 5
html
head
    title= title
    link(rel='stylesheet', href='/stylesheets/style.css')
body
    include userbar
    block content 
```

In my include I only have the variable environment on my current page.

Don't bit me, I'll take an exemple in Symfony2 franmwork :D for exemple if you have this code in your layout

```
{% render "AcmeBundle:Acme:menu" %} 
```

It will call AcmeController and the menuAction() method regardless the current page

I would like to have the same system: the render in my jade page will call for exemple a requestHandler

```
exports.userbar = function(req, res){
    var user = 'ant';
    res.render('userbar', { user: user })
}; 
```

And now this will render my userbar :) But I don't know how to do it with jade

If I am not clear ask me questions

Thanks :)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:49:35.233

在您的情况下，您也必须`{% render "AcmeBundle:Acme:menu" %}`在每个页面中添加它。在快递方面，我认为您更容易完成相同的任务。你在这里有不同的选择。第一种选择是在特定的请求处理程序中使用`user`中间件，例如

添加一个快速中间件，它只查找用户并设置`app.locals`属性。`app.locals`对所有玉文件都可见。比如这个简单的中间件就足够了

```
var user = function(req, res, next)
{
   var user = db.find(...);
   app.locals({user: user});
   next(); // Do not render the page here, call the next() 
} 
```

然后在您的路由中，使用`var user`如下：

```
app.get('/your_desired_url', user, function(req, res) {
    res.render('your_required_jade_file')
}); 
```

您可以在任何您想要的请求处理程序中使用此方法；例如，

```
app.get('/your_desired_url2', user, function(req, res) {
    res.render('your_required_jade_file')
});

app.get('/your_desired_url2', user, function(req, res) {
    res.render('your_required_jade_file')
}); 
```

在第二个选项中，您可以将此中间件添加为通用中间件，例如

```
app.use(function(req, res, next) {
    var user = db.find(...);
    if(user) app.locals({user: user});
    else app.locals({user: null});

    next(); // Do not render the page here, call the next() 
}); 
```

在第二种情况下，您的所有请求都通过此函数传递，因此在 .jade 文件中，`user`变量始终可用。

在您的 .jade 结构中，您可以使用以下内容

`layout.jade`

```
!!! 5
html
  head
  body
    include userbar
    block content 
```

例如`dashboard.jade`：

```
extends ./layout
block content
  // Your dashboard specific content goes here.. 
```

我希望这能解决你的问题。

# c++ - Precision of multiplication by 1.0 and int to float conversion

> ID：13400742
> 
> 赞同：45
> 
> 时间：2012-11-15T15:31:02.173
> 
> 标签：c++, c, floating-point, type-conversion, precision

Is it safe to assume that the condition `(int)(i * 1.0f) == i` is true for any integer `i`?

* * *

## 回答 #1

> 赞同：72
> 
> 时间：2012-11-15T15:34:27.763

不。

如果`i`足够大`int(float(i)) != i`（假设 float 是 IEEE-754 单精度，`i = 0x1000001`足以证明这一点）那么这是错误的，因为乘以`1.0f`强制转换为`float`，即使随后的乘法不会改变值。

但是，如果`i`是 32 位整数并且*是*IEEE-754 双精度，`double`那么.*`int(i*1.0) == i`*

 ** * *

为了完全清楚，乘法`1.0f` *是*准确的。可能不是从`int`到的转换。`float`

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-11-15T15:45:14.047

不，[IEEE-754](http://en.wikipedia.org/wiki/IEEE_floating_point)浮点数具有比整数更大的动态范围，但以相同位宽的整数精度为代价。

例如看这个小片段的输出：

```
int main() {
        int x = 43046721;

        float y = x;

        printf("%d\n", x);
        printf("%f\n", y);
} 
```

`43046721`无法以 32 位`float`数字中可用的 24 位精度正确表示，因此输出如下所示：

```
43046721
43046720.000000 
```

事实上，我希望任何高于 16,777,216 的奇数在转换为 32 位`float`数字时都会出现同样的问题。

几个兴趣点：

*   这与隐式 int-to-float 转换有关，而不是与乘法本身有关。

*   这绝不是 C 独有的——例如 Java 也遇到完全相同的问题。

*   大多数编译器都有优化选项，通过忽略标准的某些限制，可能会影响处理此类转换的方式。在这种情况下，如果编译器优化了来回转换，则`(int)((float)x * 1.0f) == x`可能总是如此。`true``float`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-06-15T15:31:23.643

不，行为是实现定义的，因为 C 和 C++ 不需要 IEEE-754，尽管这是迄今为止最常见的表示。

为确保使用 IEEE-754：

*   在 C 中，使用`#ifdef __STDC_IEC_559__`
*   在 C++ 中，使用`std::numeric_limits<float>::is_iec559`常量

* * *

## 回答 #4

> 赞同：-5
> 
> 时间：2012-11-15T15:40:39.453

不，由于类型转换，所有整数都是绝对错误的。检查代码。

```
#include <stdio.h>

int main()
{
    int i = 0;
    for (; i < 2147483647; ++i) {
        if ((int)(i * 1.0f) != i) {
            printf("not equal\n");
            break;
        }
    }
    printf("out of the loop\n");
    getchar();
    return 0;
} 
```

此代码假定您采用 32 位整数*

# java - 用于分割空间的 StringTokenizer

> ID：13400748
> 
> 赞同：2
> 
> 时间：2012-11-15T15:31:03.857
> 
> 标签：java, android, jfreechart, simpledateformat, stringtokenizer

我有字符串遵循格式：

```
2012.11.15 22:00:00 1.2971 1.2974 1.2959 1.296 
```

我使用以下代码：

```
DateFormat df = new SimpleDateFormat("yyyy.MM.dd HH:mm:ss");
                String inputLine;
                in.readLine();
                while ((inputLine = in.readLine()) != null) {
                    StringTokenizer st = new StringTokenizer(inputLine);
                    Date date       = df.parse( st.nextToken() );
                    double open     = Double.parseDouble( st.nextToken() );
                    double high     = Double.parseDouble( st.nextToken() );
                    double low      = Double.parseDouble( st.nextToken() );
                    double close    = Double.parseDouble( st.nextToken() );
              ... 
```

但是方法 SimpleDateFormate 仅获取用作分隔符的日期/时间之间的日期和空间。
如何让日期与时间在一起？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:32:43.717

更好地使用 中的`split()`方法`String`，出于所有实际目的，它已`StringTokenizer`被[弃用](https://stackoverflow.com/questions/6983856/why-is-stringtokenizer-deprecated)，它仍然存在只是为了向后兼容。

尝试这样的事情：

```
String[] data = inputLine.split("\\s+"); 
```

现在，结果数组中的每个位置都将保存一段数据，您可以继续将其转换为适当的数据类型。特别是，对于日期（由实际日期和时间组成），请执行以下操作：

```
Date date = df.parse(data[0] + " " + data[1]); 
```

上面的优点是您可以忘记在标记器中获取下一个标记，并且从一开始您就会知道读取了多少元素（数组的长度）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T15:32:59.643

采用：

```
Date date       = df.parse( st.nextToken() + " " + st.nextToken() ); 
```

将两个“单词”传递给 SimpleDateFormat 对象。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:37:38.603

您创建一个`StringTokenizer`带有一个参数的构造函数（要标记的字符串）。此构造函数假定任何空格都是不同标记之间的分隔符。您的日期表示在中间有空格。因此`StringTokenizer`砍掉一半的日期，留下另一个作为第二个标记。

当您稍后使用空格来分隔其他字段时，直接的解决方案就是读取两个标记并重建组合字段：

```
 Date date = df.parse( st.nextToken()+" "+ st.nextToken()); 
```

# javascript - 具有实时结果的 JQuery 搜索

> ID：13400751
> 
> 赞同：0
> 
> 时间：2012-11-15T15:31:04.467
> 
> 标签：javascript, jquery, ajax

我正在使用我编写的脚本来获取页面下方显示的搜索结果，现在我猜这可以正常工作，但是当我输入长句子时，所有请求都会发送到服务器，当然响应会稍后出现并且有点堆积导致我想用它来显示结果的快速变化的 div，这真的很丑陋和烦人，我在互联网上找不到任何关于此的示例。

这是我的触发 ajax 调用的 AJAX 脚本。

```
$(".harmster_form_replace_onchange input[type=text]").live("keyup paste", function(e){

    if($(this).val().length >=2 || e.keyCode==8)
    {
        var form = $(this).closest('form');
        var target = $(form).attr("target");
        loader_img(target);
        var url = $(form).attr('action');
        $($(form).attr("target")).hide();
            $($(form).attr("target")).fadeIn('fast', function(){
            $.post(url, $(form).serialize(), function(data){
                $(target).html(data);
            });
        });
    }
    return false;
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:55:07.843

我过去所做的是在访问服务器之前创建一个短暂的延迟。以下是一些使用 jQuery 进行操作的示例：

[如何延迟 .keyup() 处理程序直到用户停止输入？](https://stackoverflow.com/questions/1909441/jquery-keyup-delay)

# ms-word - 将一个大的 CSV 文档数据复制到一个小得多的 Word 表中

> ID：13400753
> 
> 赞同：0
> 
> 时间：2012-11-15T15:31:21.160
> 
> 标签：ms-word

我有一个 5 行 4 列的 word 小表。

我有一个 100 行 4 列的 CSV 文档。

我想将 CSV 数据复制/粘贴到表格中。

我如何做到这一点，而不必提前创建表中的所有行然后粘贴？

我只能看到一种将 word 中的一行一次插入表中的方法？如何指定表格的大小？表属性不允许您控制？或者，如果您要粘贴更大的东西，有没有办法自动增加表格的大小。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:38:07.830

如果只需要在第 5 行之后追加数据，可以在 Excel 中选择 CSV 数据（减去表头行），将其复制，然后将其粘贴到 Word 文档中紧跟表格的行上；即不是第五行，而是第五行正下方的第一行。Word 应自动将数据作为行附加到表中。

我在 Windows 7 上使用 Excel 2007 和 Word 2007 对此进行了测试。仅当您粘贴的数据具有与 Word 表相同的列数时，它才有效。

希望这可以帮助！

# c++ - 填充 std::deque > 使用 boost::assign::list_of

> ID：13400755
> 
> 赞同：0
> 
> 时间：2012-11-15T15:31:26.057
> 
> 标签：c++, boost, c++98

是否可以初始化以下类型的对象：

```
std::deque<std::vector<std::string>> 
```

通过 boost::assign::list_of

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:38:30.927

尝试以下操作：

```
#include <boost/assign/list_of.hpp>
#include <deque>
#include <vector>
#include <iostream>
#include <string>

int main()
{
    std::deque<std::vector<std::string> > v =
        boost::assign::list_of
            (boost::assign::list_of("a")("b"))
            (boost::assign::list_of("c")("d"));

    std::cout << v[0][0] << "\n" <<
                 v[1][1] << "\n";
} 
```

*这是用最古老的编译器编译的，我有可用的 VC7，而不是 C++98。*

# json - 通过 json 搜索.wordpress

> ID：13400756
> 
> 赞同：3
> 
> 时间：2012-11-15T15:31:38.567
> 
> 标签：json, wordpress

我需要通过 wordpress json api 获取作者 ID。

例如：

> [http://eng.search.wordpress.com/?q=apple&page=2&s=date&f=json](http://eng.search.wordpress.com/?q=apple&page=2&s=date&f=json)

输出是：

> [{“标题”：“谣言：Ya se habla del lanzamiento del Samung Galaxy S IV para marzo de 2013”​​，“链接”：“http://techyzmundo.com/2012/11/15/rumor-ya-se- habla-del-lanzamiento-del-samung-galaxy-s-iv-para-marzo-de-2013/","epoch_time":"1352993240","author":"Techyzmundo","guid":"http:// /techyzmundo.com/2012/11/15/rumor-ya-se-habla-del-lanzamiento-del-samung-galaxy-s-iv-para-marzo-de-2013/","content":"Al mismo estilo que Apple, no ha pasado ni 6 meses hay se est\u00e1 hablando de una nueva versi\u00f3n del Equipo bandera de Samsung para marzo del pr\u00f3ximo [...]"},{"title........ ……”

json 输出中没有作者 ID。如何在 wordpress 搜索 url 中发送请求以获取作者 ID？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-14T09:57:13.770

您可以为此使用 WP User Query 类（[http://codex.wordpress.org/Class_Reference/WP_User_Query](http://codex.wordpress.org/Class_Reference/WP_User_Query)），并且因为您有用户 nicename，您可以将其用作查询参数。

例如：

```
$user_query = new WP_User_Query(array('nicename' => 'Techyzmundo')); 
```

这对你有用吗？

# matlab - 从矩阵中提取时间序列的列条目

> ID：13400760
> 
> 赞同：-1
> 
> 时间：2012-11-15T15:31:54.683
> 
> 标签：matlab, time-series

对于以下问题是否有更强大的方法：

```
d = 1+(20-1).*rand(365,5);
bthD = 1:5;
I = repmat(bthD',73,1);

for i = 1:length(d);
    q(i) = d(i,I(i));
end 
```

在这里，I 是指示需要矩阵的哪一列的索引。q 是我们的每一行都具有 I 指定的相应列号的结果。是否有另一种方法来找到 q？

修改后的问题：

我有数据：

```
d = 1+(20-1).*rand(365,5); 
```

我想在每行中找到与 I 中的索引相对应的值：

```
I = floor(1+(5-1).*rand(365,1)); 
```

这可以通过使用 for 循环轻松实现：

```
for i = 1:length(d);
    q(i) = d(i,I(i));
end 
```

但是，我想找到一种替代方式，即不涉及循环的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:05:34.497

使用线性索引：

```
ii = 1:length(d);
linear_index = sub2ind(size(d),ii,I(ii));
q = d(linear_index); 
```

[sub2ind](http://www.mathworks.com/help/matlab/ref/sub2ind.html)将行 ( `ii`) 和列 ( `I(ii)`) 索引转换为线性索引，您可以使用它一次抓取所有所需的元素。

# php - 匹配像 $Q1o1 这样的子字符串

> ID：13400762
> 
> 赞同：0
> 
> 时间：2012-11-15T15:32:07.017
> 
> 标签：php, regex

我需要在 $ 之后拉出这串字符

```
($Q1==1)and($Q4o=="55")and($Q1o1=="") 
```

我`$Q1`的意思`$Q4o`是这些`$Q1o1`

据我了解，正则表达式应该从`$`除`A-Za-z0-9_`. 你能帮我写正则表达式吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:36:19.493

This seems to work, at least in Ruby:

```
/\$\w*/ 
```

Be careful with the $, as $ is a reserved symbol in regular expressions that means "end of the string", so you need to escape it.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:37:14.453

`/\$([[:alnum:]]+)[[^:alnum:]]/`

您需要提取第一个括号表达式。

编辑：我更喜欢另一个建议，使用 \w*

# git - 如何使用 git-p4 取消搁置更改

> ID：13400764
> 
> 赞同：6
> 
> 时间：2012-11-15T15:32:09.833
> 
> 标签：git, perforce, git-p4

最新的 git-p4 脚本（[https://github.com/ermshiperete/git-p4](https://github.com/ermshiperete/git-p4)）有一个“搁置”但没有“取消搁置”命令。如何使用它取消搁置更改？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:59:24.660

不过，看起来你不能`git p4`，相反，你需要通过 Perforce 来完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2020-09-26T12:15:24.887

从 Git 2.18 (Q2 2018) 开始，有一个[`git p4 unshelve`命令](https://git-scm.com/docs/git-p4/2.18.0#_unshelve)

> 取消搁置将采用搁置的 P4 更改列表，并`git commit`在分支中生成等效项`refs/remotes/p4/unshelved/<changelist>`。

但它有缺陷：

^(“ （)^([man](https://git-scm.com/docs/git-p4#_unshelve))^） ”的“ `unshelve`”子命令在表示命名^第代祖先的地方使用不正确，已在 Git 2.29（2020 年第四季度）中更正。[`git p4`](https://github.com/git/git/blob/9f4588d72b035714d4524342479e375742ac05b3/Documentation/git-p4.txt#L174)`commit^N``commit~N``N`

请参阅[Luke Diamand ( ) 的](https://github.com/ldiamand42)[commit 0acbf59](https://github.com/git/git/commit/0acbf5997fa26747aec544d2ef6a27e4feb75e81)和[commit 677fa8d](https://github.com/git/git/commit/677fa8d1157c869974355e316d0e2349759d0325)（2020 年 9 月 19 日[）](https://github.com/ldiamand42)。^(（由)^([Junio C Hamano 合并 --](https://github.com/gitster)) ^([--](https://github.com/gitster))^在^([提交 9f4588d](https://github.com/git/git/commit/9f4588d72b035714d4524342479e375742ac05b3))^(中，2020 年 9 月 25 日）)[`ldiamand42`](https://github.com/ldiamand42)
^([`gitster`](https://github.com/gitster))

> ## [`git-p4 unshelve`](https://github.com/git/git/commit/677fa8d1157c869974355e316d0e2349759d0325): 添加提交中断`git-p4 unshelve`
> 
> ^(签字人：卢克·戴曼德)

> `git-p4 unshelve`用于`HEAD^$n`查找父提交，如果有其他提交则失败。

# cucumber - 如何阻止 selenium chromedriver 登录到屏幕

> ID：13400765
> 
> 赞同：2
> 
> 时间：2012-11-15T15:32:12.203
> 
> 标签：cucumber, capybara, selenium-chromedriver

如何阻止 selenium chromedriver 将错误记录到屏幕上？

我正在运行一些黄瓜测试，我使用 capybara 和 selenium chromedriver 来驱动测试。在过去的几周里，我注意到 Chromedriver 已开始将其错误消息记录到屏幕上。我的测试仍然运行良好，但错误阻塞了输出​​。

这是下面的输出：

```
Started ChromeDriver
port=9515
version=23.0.1240.0
log=C:\Gitrepos\Base Tests\chromedriver.log
[8244:5080:1115/151428:ERROR:gpu_info_collector_win.cc(91)] Can't retrieve a valid WinSAT assessment.
    Given I Select "Customer" from the "Search" gadget
    And I enter "Test Customer" for "Customer Name"
    And click "Search"
    And Select "Manage Customer" from the "Main Menu" drop down 
```

解决方案是从输出中删除以下行，或者可能修复错误。 **[8244:5080:1115/151428:ERROR:gpu_info_collector_win.cc(91)] 无法检索有效的 WinSAT 评估。**

我升级了驱动程序以修复一个不同的错误，但我最终得到了这个错误！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:04:00.257

尝试使用 STDERR 的重定向来启动 Chromedriver，例如

chromedriver.exe 2>c:\temp\err.log

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-12-29T22:22:34.743

我遇到了同样的问题，这就是抑制所有这些 chrome 消息的原因（chrome 打印了几种..）：

> ```
>  ChromeOptions chromeOptions = setupChromeOptions();
>     System.setProperty("webdriver.chrome.logfile", "\\path\\chromedriver.log");
>     System.setProperty("webdriver.chrome.driver", "\\path\\chromedriver.exe");
>     System.setProperty("webdriver.chrome.args", "--disable-logging");
>     System.setProperty("webdriver.chrome.silentOutput", "true");
>     driver = new ChromeDriver(chromeOptions); 
> ```

这适用于以下配置

> ```
>  selenium-chrome-driver-2.48.2.jar
>   chromedriver 2.20
>   selenium-java-2.48.2.jar 
> ```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-05-22T18:22:13.667

这是唯一有效的方法：

```
System.setProperty("webdriver.chrome.silentOutput", "true"); 
```

# php - 登录后如何设置和检查会话？

> ID：13400768
> 
> 赞同：1
> 
> 时间：2012-11-15T15:32:18.740
> 
> 标签：php, session, login

我是 PHP 新手，在登录页面上苦苦挣扎。我有以下“有效”的脚本，但现在我想设置一个会话，如果用户的密码正确，我可以转移到其他页面。所以我试图弄清楚其他页面上需要什么来检查会话。

从这里开始，如果我在我回来的页面上放这样的东西：

```
<?php
if($_SESSION['login'] = "1") {  
echo "you are logged in";
}
else
{
echo "you are not logged in";
}
?> 
```

似乎我一直收到我的成功信息。我一定不明白这是如何工作的。任何建议表示赞赏——如果我需要的话，我愿意完全重写这个。谢谢！

这是我当前的登录脚本：

```
<?php
// error reporting
ini_set('display_errors',1); 
 error_reporting(E_ALL);
$host="foo"; // Host name
$username="foo"; // Mysql username
$password="foo"; // Mysql password
$db_name="foo"; // Database name
$tbl_name="members"; // Table name
// Connect to server and select databse.
mysql_connect("$host", "$username", "$password")or die("cannot connect");
mysql_select_db("$db_name")or die("cannot select DB");
// username and password sent from form
$myusername=$_POST['myusername'];
$mypassword=$_POST['mypassword'];
// To protect MySQL injection (more detail about MySQL injection)
$myusername = stripslashes($myusername);
$mypassword = stripslashes($mypassword);
$myusername = mysql_real_escape_string($myusername);
$mypassword = mysql_real_escape_string($mypassword);
$sql="SELECT * FROM $tbl_name WHERE username='$myusername' and password='$mypassword'";
$result=mysql_query($sql);
// Mysql_num_row is counting table row
$count=mysql_num_rows($result);
// If result matched $myusername and $mypassword, table row must be 1 row
if($count==1) {
session_start();
$_SESSION['login'] = "1";
header ("Location: http://www.google.com");
}
else {  
session_start();
$_SESSION['login'] = '';
header ("Location: http://www.yahoo.com");
}
?> 
```

应用下面建议的更改，我在返回的页面中有以下内容：

```
<?php
session_start();
if ($_SESSION['login'] == "1") {  
echo "you are logged in";
}
else if ($_SESSION['login'] == "") 
{
echo "you are not logged in";
}
?> 
```

以及对我的登录脚本的以下更改：

```
if($count==1) {
session_start();
$_SESSION['login'] =="1";
header ("Location: login.php");
}
else {  
session_start();
$_SESSION['login'] == "";
header ("Location: login.php");
} 
```

现在无论如何，我都会收到“您尚未登录”的消息……嗯。

更新——好的——如果我不对我的脚本进行 == 更改，它似乎可以工作。如果我有

```
if($count==1) {
session_start();
$_SESSION['login'] = "1";
header ("Location: login.php");
}
else {  
session_start();
$_SESSION['login'] = "";
header ("Location: login.php");
} 
```

这在我回到的页面中：

```
<?php
session_start();
if ($_SESSION['login'] == "1") {  
echo "you are logged in";
}
else if ($_SESSION['login'] == "") 
{
echo "you are not logged in";
?> 
```

......这似乎工作。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:35:33.283

应该是： if ($_SESSION['login'] == "1")

因为你这样做的方式，它设置值并返回true。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-27T10:30:50.940

您的变量 $myusername 和 $mypassword 已为两个不同的功能指定，您打算将它们单独化......

# c# - 删除文件生成异常“找不到路径的一部分”

> ID：13400770
> 
> 赞同：2
> 
> 时间：2012-11-15T15:32:27.553
> 
> 标签：c#, .net, file, delete-file

我想删除一个目录及其所有文件，它的文件/目录的路径很长。

我要删除的文件路径很长（超过 260 个字符）。

尽管它很长，我如何删除这个文件？我正在使用以下代码：

```
foreach (string archiveFolder in Archives)
{
    try
    {
        DateTime creationTime = Directory.GetCreationTime(archiveFolder);
        DateTime now = DateTime.Now;
        DateTime passDate = creationTime.AddDays(numDaysBack);
        if (passDate.CompareTo(now) < 0)
        {
            try
            {
                Directory.Delete(archiveFolder, true);
            }
            catch (Exception e)
            {
            }
            //System.Console.WriteLine(creationTime);

        }
    }
    catch (Exception e)
    {
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2020-10-28T07:22:51.417

`\\?\`我通过将（长路径说明符）附加到 Directory.Delete 参数来解决在我要删除的目录的目录结构中存在具有长路径的文件的问题。

所以在你的事业中

```
 Directory.Delete(@"\\?\" + archiveFolder, true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:34:19.620

[Directory.Delete](http://msdn.microsoft.com/en-us/library/system.io.directory.delete.aspx)用于删除目录，删除文件使用[File.Delete](http://msdn.microsoft.com/en-us/library/system.io.file.delete.aspx)

他们都居住在`System.IO`，变化应该是微不足道的。

# c# - 有没有办法获得唯一的计算机 ID？

> ID：13400771
> 
> 赞同：0
> 
> 时间：2012-11-15T15:32:30.033
> 
> 标签：c#, javascript, html, silverlight, mac-address

我们正在寻找一种方法来了解我们的silverligth 或Web 应用程序在哪台计算机上运行。我们最初希望它通过 MAC 地址来完成，但我们发现 silverligth 无法访问 mac 地址。

我想知道有没有办法获得一个独特的计算机地址，比如 mac 地址或其他 pc 独特的地址？通过silverligth/javascript/html 或其他基于Web 的东西而没有在他们的PC 上安装任何东西？

谢谢马蒂

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T15:35:07.330

本教程将引导您完成它：

[http://code.msdn.microsoft.com/silverlight/ComputerID-fr-Silverlight-e07cbeb7](http://code.msdn.microsoft.com/silverlight/ComputerID-fr-Silverlight-e07cbeb7)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:48:51.960

通常，不可能为每台计算机获得 100% 唯一的标识符，但是可以让它有点唯一。我之前已经实现了一些 javascript/java 代码来做到这一点。它通过从客户端机器的一些特征生成哈希来工作：

*   安装在客户端机器上的字体
*   爪哇版
*   银光版
*   IP地址

该组合为每个客户端创建了一个有点唯一的标识符，尽管很可能多个客户端具有相同的标识符。或者类似的东西……那是很久以前的事了。

（整个事情很大程度上取决于安装 Java 或 Silverlight。用户还需要允许站点运行小程序......）

我建议不要那样做，而只是接受不太可能的事实，并为您的问题找到其他解决方案。

# python - BeautifulSoup 提取物

> ID：13400774
> 
> 赞同：3
> 
> 时间：2012-11-15T15:32:35.620
> 
> 标签：python, regex, beautifulsoup

我有一个 BeautifulSoup 的“问题”，尤其是 re 模块这是问题所在：

```
import re

from bs4 import BeautifulSoup

string = """
<div id="my_id">
    <ul>
        <li>something</li>
        <li class="color12">something</li>
        <li class="color45">something else</li>
    </ul>
</div>
"""
soup = BeautifulSoup(string)
li = soup.find_all('li', {'class': re.compile('color(\d+)')} )
for ele in li:
    print ele['class'] # will print colorXXXX but i would like to know how to get only this XXXX 
```

但我只想提取颜色后的数字。是否有可能或者我有义务使用类似的东西：

```
match = re.search(r'color(\d+)', str(ele['class']))
if match:
    print match.group(1) 
```

谢谢你的帮忙 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:34:29.400

您必须重新应用正则表达式。只需将其存储在变量中并重用：

```
colorpattern = re.compile(r'color(\d+)')

li = soup.find_all('li', {'class': colorpattern} )
for ele in li:
    print colorpattern.search(ele['class']).group(1) 
```

# sql - SQL Server 2008 和 XQUERY

> ID：13400775
> 
> 赞同：1
> 
> 时间：2012-11-15T15:32:36.650
> 
> 标签：sql, sql-server-2008

我目前在 SQL Server 中使用 Xquery 从 XML 中提取一些信息。

我遇到了麻烦，因为我必须将一些动态内容放在一个变量上，但它不起作用。

当我选择这个：

```
P.value('ListOrderItem[1]/OrderItem[1]/Item[sql:variable("@I")]/Seller[1]','VARCHAR(64)') 
```

`P`是我的路径，它很好，因为它可以与其他项目一起使用，但我必须在这个项目上做一个循环（在一个顺序中，你可以有很多项目......），所以这就是为什么我想把`@I`然后做一个循环这个变量。

PS：不要说把`[1]`变量放在后面，否则每次都会选择第一项。

编辑：“不起作用”是指当我输入“”时它只向我发送第一项`[1]`和错误消息，即`[sql:variable("@I")]`“value（）”需要一个单例（或空序列），找到的操作数输入'xdt:untypedAtomic *"

当然，我试过了，`'+@I'`但它仍然不起作用..

我的 XML 示例：

```
<ListOrderItem>
 <OrderItem>
  <Item>
   ...
  </Item>
  <Item>
   ...
  </Item>
 </OrderItem>
</ListOrderItem> 
```

最终编辑：我终于解决了这篇文章对我帮助很大的问题，很抱歉当时发帖。

[在 SQL Server 中使用 value() 从 xml 列获取多条记录](https://stackoverflow.com/questions/1393250/getting-multiple-records-from-xml-column-with-value-in-sql-server)

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T17:05:26.910

将整个表达式嵌入括号中，并`[1]`在末尾添加。

```
declare @XML xml = '
<ListOrderItem>
 <OrderItem>
  <Item>
   <Seller>1</Seller>
  </Item>
  <Item>
   <Seller>2</Seller>
  </Item>
 </OrderItem>
</ListOrderItem>'

declare @I int = 2

select @XML.value('(ListOrderItem[1]/OrderItem[1]/Item[sql:variable("@I")]/Seller[1])[1]','VARCHAR(64)') 
```

结果：2

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:43:28.213

尝试这个...

```
select v.x.value('.','varchar(20)')
from
   p.nodes('ListOrderItem/OrderItem//Seller[1]') v(x) 
```

# jquery - jQuery .filter（选择器）在Firefox中不起作用

> ID：13400788
> 
> 赞同：1
> 
> 时间：2012-11-15T15:33:13.030
> 
> 标签：jquery, firefox, google-chrome

我正在尝试使用 jQuery 的 .filter() 选项在一行中选择一个特定的 < td > 元素。

它在 Chrome 和 IE 中运行良好，但在 Firefox 中运行良好。有没有另一种方法可以在所有 3 中工作？或者至少在 Chrome 和 Firefox 中？

HTML：

```
<table>
    <tr id="r1">
        <td abbr='EventID'>1</td>
        <td>a</td>
    </tr>
    <tr id="r2">
        <td abbr='EventID'>2</td>
        <td>a</td>
    </tr>
    <tr id="r3">
        <td abbr='EventID'>3</td>
        <td>a</td>
    </tr>
    <tr id="r4">
        <td abbr='EventID'>4</td>
        <td>a</td>
    </tr>
</table> 
```

Javascript：

```
alert($('#r1').children('td').filter('[abbr="EventID"]')[0].innerText); 
```

这是脚本和标记的[小提琴](http://jsfiddle.net/uLv3x/3/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:35:51.193

试试这个：

```
alert($('#r1').children('td[abbr="EventID"]')[0].innerHTML); 
```

​</p>

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:36:36.590

因为只有一个元素它不会在数组中，所以不需要[0]。（您可能希望在将来进行检查以防止错误）。此外，它似乎只在 Firefox 中使用 text() 而不是 innerText 对我有用。

我在 Firefox 中运行的最终代码：

```
alert($('#r1').children('td[abbr="EventID"]').text()); 
```

[http://jsfiddle.net/3fcdH/3/](http://jsfiddle.net/3fcdH/3/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-05-07T08:19:22.277

如果您想获取行列表并对其进行过滤或迭代，请尝试以下操作。

**HTML**

```
<table>
    <tr class="row"><td abbr='EventID'>1</td><td>a</td></tr>
    <tr class="row"><td abbr='EventID'>2</td><td>a</td></tr>
    <tr class="row"><td abbr='EventID'>3</td><td>a</td></tr>
    <tr class="row"><td abbr='EventID'>4</td><td>a</td></tr>
</table> 
```

**JavaScript**

```
for (int i = 0; i < = 3; i++){
alert($('.row').children('td').filter('[abbr="EventID"]')[i].innerText);
} 
```

# php - 转换/更新已弃用的函数 ereg()

> ID：13400791
> 
> 赞同：0
> 
> 时间：2012-11-15T15:33:21.470
> 
> 标签：php, deprecated, ereg

> **可能重复：**
> [如何在 PHP 中将 ereg 表达式转换为 preg？](https://stackoverflow.com/questions/6270004/how-can-i-convert-ereg-expressions-to-preg-in-php)

我正在处理的站点已从 5.2.17 迁移到使用 php 5.3.16 的服务器我们遇到了函数 ereg 被弃用的问题。

如何通过以下几行解决问题？

```
1) ereg("^[0-9]*$", $v[1])
2) ereg("^[-A-Za-z' ]+$", $v[4])
3) ereg("^4[0-9]{12}([0-9]{3})?$", $v[1])
4) ereg("^5[1-5][0-9]{14}$", $v[1])
5) ereg("^3[47][0-9]{13}$", $v[1])
6) ereg($exp, $value) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:38:03.947

```
preg_match('/^[0-9]*$/', $v[1])
preg_match('/^[-A-Za-z\' ]+$/', $v[4])
preg_match('/^4[0-9]{12}([0-9]{3})?$/', $v[1])
preg_match('/^5[1-5][0-9]{14}$/', $v[1])
preg_match('/^3[47][0-9]{13}$/', $v[1]) 
```

不知道如何处理最后一个， $exp 需要是一个有效的模式：

# php - 通过 PHP 上传 Wordpress 附件

> ID：13400796
> 
> 赞同：3
> 
> 时间：2012-11-15T15:33:36.423
> 
> 标签：php, image, wordpress, featured

我正在尝试上传外部图像并通过 php 将其设置为特色图像

我使用的代码如下，

```
 $photo = new WP_Http();
        $photo = $photo->request( $article->largeURL );
        $attachment = wp_upload_bits( $photo_name . '.jpg', null, $photo['body'], date("Y-m", strtotime( $photo['headers']['last-modified'] ) ) );

        $filetype = wp_check_filetype( basename( $attachment['file'] ), null );

        $postinfo = array(
            'post_mime_type'    => $filetype['type'],
            'post_title'        => $article->heading . ' ',
            'post_content'  => '',
            'post_status'   => 'inherit',
        );
        $filename = $attachment['file'];
        $attach_id = wp_insert_attachment( $postinfo, $filename, $newId );
        if( !function_exists( 'wp_generate_attachment_data' ) )
            require_once(ABSPATH . "wp-admin" . '/includes/image.php');
        $attach_data = wp_generate_attachment_metadata( $attach_id, $filename );
        wp_update_attachment_metadata( $attach_id,  $attach_data );
        set_post_thumbnail($newId,$attach_id) 
```

它将图像上传到媒体但没有设置为特色图像，但是我认为问题出在图像上传中，“媒体”中的附件屏幕如下所示

[http://cl.ly/image/0z2k1b1d0m1J](http://cl.ly/image/0z2k1b1d0m1J)

这似乎表明一些信息没有正确通过，因为没有缩略图、名称或类型。

非常感谢所有帮助！谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-24T01:59:23.183

我会发表评论，但我还不允许。

1）您是从后端还是前端执行此操作？您可能需要一个[nonce 键](http://codex.wordpress.org/WordPress_Nonces)。
2) 开`set_post_thumbnail`，有`$newId = $post->ID`吗？这可能就是为什么它没有作为特色图片附加的原因。
3）您的文件名未保留扩展名/`$photo_name`未在代码中定义。[使用wp_handle_upload](http://codex.wordpress.org/Function_Reference/wp_handle_upload)可能会更好。

# tfs-migration - 在新机器上将 TFS2010 迁移到 TFS2012

> ID：13400798
> 
> 赞同：1
> 
> 时间：2012-11-15T15:33:41.900
> 
> 标签：tfs-migration

我在一台相当旧的机器上运行 TFS 2010，我想将它升级到 2012 并移至新机器。通过 MSDN 我找不到这样的升级路径。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:57:38.077

从 2010 -> 2012 的升级路径实际上让您完全卸载 2010，因此升级 + 迁移到另一个盒子几乎相同，只是添加了一个 db 备份/恢复。

在新机器上安装 TFS 2012，备份所有数据库并在新的 sql 服务器上恢复它们​​，通过向导运行，就像在当前机器上进行简单升级一样。

[http://blog.damianbrady.com.au/2012/06/03/upgrading-tfs2010-tfs2012-rc-done/](http://blog.damianbrady.com.au/2012/06/03/upgrading-tfs2010-tfs2012-rc-done/)

# asp.net - 如何从 asp.net 管道中删除静态文件

> ID：13400804
> 
> 赞同：2
> 
> 时间：2012-11-15T15:34:03.353
> 
> 标签：asp.net, asp.net-mvc, iis-7.5

我有一个问题。我需要将当前项目从经典模式切换到集成模式。我面临的主要阻塞问题 - 静态文件通过 asp.net 管道。是的，我知道 - 这是集成模式的标准行为。但是我怎么能只通过配置来做到这一点，我的意思是 web.config。当前项目有 asp.net web form 部分和 asp.net mvc 部分。所以在我的情况下，我需要处理无扩展名的 url 和 *.aspx。我需要这样的东西：

```
<location path="JS">
   <system.webServer>
       <modules runAllManagedModulesForAllRequests="false">
           <!-- here i will remove all modules -->
        </modules>
       <handlers>
           <!-- removing unnecessary handlers -->
       </handlers>
   </system.webServer>
</location> 
```

但是这段代码不起作用。我的情况有什么解决方案。我有表单身份验证，所以如果我只为 managedHandler 转动它 - 它适用于 aspx 部分，但不适用于 mvc 部分。如果我输入 preCondition=""，即它将处理所有请求，我的表单身份验证功能将适用于我不需要的静态文件。

# iphone - 没有正文的 json 格式的成功 http 请求的标准响应是什么？

> ID：13400806
> 
> 赞同：1
> 
> 时间：2012-11-15T15:34:14.207
> 
> 标签：iphone, json, http, response

标题有点问题，不好意思。

我正在与我工作中的服务器 gal 进行讨论，我们正在开发基于 REST json 标准的 iphone 应用程序，现在讨论的是，她说如果我向服务器发送请求，她可以返回响应代码 200（好的）和空的身体。我认为她需要在正文中发送 200 和空 json {}。

这里有错还是对？或者这只是我们必须同意的设计问题？

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:35:40.680

您应该发送`204 No Content`没有 body 和 no 的响应`Content-Type`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:22:35.590

200 当然可以与 0 的 Content-Length 一起使用。这里的问题是空正文是否是 application/json 媒体类型的有效实例（参见[http://www.ietf.org/rfc/rfc4627.txt](http://www.ietf.org/rfc/rfc4627.txt)）。我相信答案是：“不”。

# python - 如果在下载时更改名称，则无法识别 .ZIP

> ID：13400811
> 
> 赞同：4
> 
> 时间：2012-11-15T15:34:28.263
> 
> 标签：python, python-3.x, download, zip, unzip

我使用 Python 3.3 编写了 .zip 文件的下载和解压缩脚本。如果 .zip 的名称保持不变，这将毫无问题。如果我尝试在下载时更改 .zip 的名称，则`zipfile.is_zipfile()`不会将该文件识别为 .zip 文件 [尽管它仍会在 WinRAR 中解压缩]。

我通过传递`shutil.copyfileobj()`不同的 fdst 名称（不是整个路径）来更改名称。

使用的下载代码为：

```
import urllib.request
import shutil
import os, os.path

def mjd_downloader(url, destdir, destfilename=None):

    req = urllib.request.Request(url)
    response = urllib.request.urlopen(req)

    #if no filename passed by destfilename, retrieve filename from ulr
    if destfilename is None:
        #need to isolate the file name from the url & download to it
        filename = os.path.split(url)[1]

    else:
        #use given filename
        filename = destfilename

    #'Download': write the content of the downloaded file to the new file

    shutil.copyfileobj(response, open(os.path.join(destdir,filename), 'wb')) 
```

使用的解压码是：

```
import zipfile
from zipfile import ZipFile
import os, os.path
import shutil

def mjd_unzipper(zippathname, outfilebasename=None):
    #outfilebasename is a name passed to the function if a new name for 
    #the content is requried   
    if zipfile.is_zipfile(zippathname) is True:
        zfileinst = ZipFile(zippathname, 'r')
        zfilepath = os.path.split(zippathname)[0]
        zlen = len(zfileinst.namelist())
        print("File path: ", zfilepath)

        if outfilebasename is not None:
            for filename in zfileinst.namelist():
                memtype = os.path.splitext(filename)[1]
                outfilename = os.path.join(outfilebasename + memtype)
                print("Extracting: ", filename, " - to: ", outfilename)
                #curzfile = zfileinst.read(filename)
                curzfile = zfileinst.open(filename)
                shutil.copyfileobj(curzfile, open(
                    os.path.join(zfilepath, outfilename), 'wb'))
        else:
            for i in range(zlen):
                extractfile = zfileinst.namelist()[i]
                memtype = os.path.splitext(extractfile)[1]
                zfileinst.extract(extractfile, path = zfilepath)

        zipfile.ZipFile.close(zfileinst)
    else:
        print("Is not a zipfile")
        pass 
```

欢迎任何想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-27T21:47:23.250

我认为您的文件从未关闭：在下载脚本的第 24 行，您打开了目标文件以写入二进制数据。只有当您调用`close()`同一个文件时，数据才会从内存推送到文件（也有在不关闭文件的情况下调用的方法，但我现在不记得了）。

通常，最好使用以下`with`语句打开文件对象：

```
with open(os.path.join(destdir,filename), 'wb') as f:
    shutil.copyfileobj(response, f) 
```

当该`with`语句与文件对象一起使用时，它会在块的末尾自动关闭它们，如果您曾经`break`离开块，或者如果由于任何其他原因离开了块（可能是导致解释器退出的未处理异常） .

如果您不能使用该`with`语句（我认为一些较旧的 Python 版本不支持将其与文件对象一起使用），您可以在完成后对对象调用 close() ：

```
f = open(os.path.join(destdir,filename), 'wb')
shutil.copyfileobj(response, f)
f.close() 
```

我希望这就是原因，因为那将是一个简单的修复！

# ruby-on-rails - “Agile Web Development with Rails”中不推荐使用的代码示例 - 不知道如何继续

> ID：13400815
> 
> 赞同：1
> 
> 时间：2012-11-15T15:34:40.310
> 
> 标签：ruby-on-rails, routes, scaffolding

我刚开始研究 Ruby on Rails，并且一直在阅读 Dave Thomas 和 DHH 的“Agile Web Development with Rails”。这本书是 2005 年的，所以很多代码和终端命令都已经过时了，但我已经成功地达到了第 57 页，没有太多麻烦。在第 57 页，我使用 Rails 创建了一个名为“depot”的应用程序，现在他们希望我通过发出以下命令来使用它的脚手架功能：

```
ruby script/generate scaffold Product Admin 
```

由于这不起作用，我认为该程序在过去七年中略有变化，因此在我（成功）触发此命令之前并没有花费我太多的 Google 搜索：

```
rails generate scaffold Product Admin 
```

这似乎奏效了。至少我在终端中得到了带有绿色“创建”字样的列表，并且一个新的控制器和模型被添加到我的应用程序中。现在，步骤是启动服务器（简单）并转到`localhost:3000/admin`但现在我得到了臭名昭著的东西`No route matches [GET] "/admin"`，我不知道为什么。我`match ':controller(/:action(/:id))(.:format)'`已从 routes.rb 中取消注释，但它仍然会引发相同的错误。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:36:47.340

您可能只需要添加到您的 routes.rb 中：

```
get '/admin' 
```

或者

```
match '/admin' => 'admin#index' 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T16:30:30.770

您用于`scaffold`创建产品，管理员，您的默认 url 是`localhost:3000/products`，**复数**

另外，我强烈建议你获得这本书的最新版本。

# jquery - 如何将同位素项目放置在可滚动的 div 中并保留 jquery 悬停状态效果？

> ID：13400817
> 
> 赞同：1
> 
> 时间：2012-11-15T15:34:46.830
> 
> 标签：jquery, css, hover, overflow, jquery-isotope

我正在尝试实现三个功能：

1.  包含图像缩略图的可滚动 div
2.  可以按jquery isotope排序的
3.  将鼠标悬停在其他元素之上和直接容器之外时会显示一个 div。

目前我可以得到一个或另一个发生，即滚动条显示但悬停状态 div 在其他元素后面，或者我可以在其他元素前面获得悬停状态 div 但滚动条不显示。

**jsfiddle**

[http://jsfiddle.net/rwone/PUKjy/](http://jsfiddle.net/rwone/PUKjy/)

**脚本**

```
$(".magic").hover(

function() {
//console.log($(this).find('.hidden_db_data_div').position().left);
console.log($(this).position().top);
$(this).css("z-index", "999").find('.hidden_db_data_div').css({
'left': $(this).position().left + 40 + "px" + "!important",
'top': '-50px'
}).fadeIn(500);

}, function() {
$(this).css('z-index', '').find('.hidden_db_data_div').fadeOut(100);
}); 
```

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-25T02:14:17.543

**解决**

[http://jsfiddle.net/rwone/89P9m/](http://jsfiddle.net/rwone/89P9m/)

**代码**

```
$(".magic").each(function() {

var hiddenDiv = $(this).find(".hidden_db_data_div"),
parentElement = $(this),
api = {};

api.isOpen = false;

api.timeout = null;

api.position = function(){
hiddenDiv.css({
"top": parentElement.offset().top - $("#wrapper").offset().top - 50,
"left": parentElement.offset().left - $("#wrapper").offset().left +20 
});
}

api.resetTimeout = function(){

clearTimeout( api.timeout );
}

api.startShowing = function(){

api.resetTimeout();

api.timeout = setTimeout(function(){
api.show();        
},300);
}

api.startHiding = function(){

api.resetTimeout();

api.timeout = setTimeout(function(){
api.hide();        
},150);
}
api.show= function(){

if(!api.isOpen){

api.position();

hiddenDiv .fadeIn(500);

api.isOpen = true;

$("#isotope_container").bind("scroll.hiddendiv",api.position);

}
}

api.hide = function(){

if( api.isOpen ) {
api.isOpen = false;
$("#isotope_container").unbind("scroll.hiddendiv");     
hiddenDiv.fadeOut(100);
}

}

hiddenDiv.bind("mouseenter", function() {

api.resetTimeout();

}).bind("mouseleave", function() {

api.startHiding();

}).css("z-index", 100).appendTo("#wrapper"); 

$(this).data("hiddenApi",api );

}).bind("mouseenter", function() {

var api = $(this).data("hiddenApi");

api.startShowing();

}).bind("mouseleave", function() { // start closing timeout once mouse leaves isotope element

var api = $(this).data("hiddenApi");

api.startHiding();

}); 
```

# database - 访问和复制现有的 SQLite 数据库

> ID：13400818
> 
> 赞同：1
> 
> 时间：2012-11-15T15:34:49.233
> 
> 标签：database, eclipse, sqlite

我创建了一个名为“CookbookDB”的数据库并将其放入我的资产文件夹中。注意：我将表的主 id 字段更改为 _id。

我对这段代码有错误。有什么帮助吗？

错误：

```
11-08 21:20:25.074: D/dalvikvm(624): Not late-enabling CheckJNI (already on)
11-08 21:20:25.534: E/Trace(624): error opening trace file: No such file or directory (2)
11-08 21:20:25.734: E/SQLiteLog(624): (14) cannot open file at line 30174 of [00bb9c9ce4]
11-08 21:20:25.734: E/SQLiteLog(624): (14) os_unix.c:30174: (2) open(/data/data/com.cookbook.adiel/databases/CookbookDB) - 
11-08 21:20:25.755: E/SQLiteDatabase(624): Failed to open database '/data/data/com.cookbook.adiel/databases/CookbookDB'.
11-08 21:20:25.755: E/SQLiteDatabase(624): android.database.sqlite.SQLiteCantOpenDatabaseException: unknown error (code 14): Could not open database
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.database.sqlite.SQLiteConnection.nativeOpen(Native Method)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:209)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:193)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.database.sqlite.SQLiteConnectionPool.openConnectionLocked(SQLiteConnectionPool.java:463)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:185)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:177)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.database.sqlite.SQLiteDatabase.openInner(SQLiteDatabase.java:804)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.database.sqlite.SQLiteDatabase.open(SQLiteDatabase.java:789)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:694)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:669)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at com.cookbook.adiel.ExistingDBHandler.checkDataBase(ExistingDBHandler.java:61)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at com.cookbook.adiel.ExistingDBHandler.createDataBase(ExistingDBHandler.java:42)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at com.cookbook.adiel.MainActivity.onCreate(MainActivity.java:43)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.app.Activity.performCreate(Activity.java:5008)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.os.Looper.loop(Looper.java:137)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at java.lang.reflect.Method.invokeNative(Native Method)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at java.lang.reflect.Method.invoke(Method.java:511)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-08 21:20:25.755: E/SQLiteDatabase(624):  at dalvik.system.NativeStart.main(Native Method)
11-08 21:20:25.755: D/AndroidRuntime(624): Shutting down VM
11-08 21:20:25.755: W/dalvikvm(624): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
11-08 21:20:25.765: E/AndroidRuntime(624): FATAL EXCEPTION: main
11-08 21:20:25.765: E/AndroidRuntime(624): java.lang.Error: Database doesn't exist yet
11-08 21:20:25.765: E/AndroidRuntime(624):  at com.cookbook.adiel.ExistingDBHandler.checkDataBase(ExistingDBHandler.java:63)
11-08 21:20:25.765: E/AndroidRuntime(624):  at com.cookbook.adiel.ExistingDBHandler.createDataBase(ExistingDBHandler.java:42)
11-08 21:20:25.765: E/AndroidRuntime(624):  at com.cookbook.adiel.MainActivity.onCreate(MainActivity.java:43)
11-08 21:20:25.765: E/AndroidRuntime(624):  at android.app.Activity.performCreate(Activity.java:5008)
11-08 21:20:25.765: E/AndroidRuntime(624):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
11-08 21:20:25.765: E/AndroidRuntime(624):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
11-08 21:20:25.765: E/AndroidRuntime(624):  at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-08 21:20:25.765: E/AndroidRuntime(624):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-08 21:20:25.765: E/AndroidRuntime(624):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-08 21:20:25.765: E/AndroidRuntime(624):  at android.os.Handler.dispatchMessage(Handler.java:99)
11-08 21:20:25.765: E/AndroidRuntime(624):  at android.os.Looper.loop(Looper.java:137)
11-08 21:20:25.765: E/AndroidRuntime(624):  at android.app.ActivityThread.main(ActivityThread.java:4745)
11-08 21:20:25.765: E/AndroidRuntime(624):  at java.lang.reflect.Method.invokeNative(Native Method)
11-08 21:20:25.765: E/AndroidRuntime(624):  at java.lang.reflect.Method.invoke(Method.java:511)
11-08 21:20:25.765: E/AndroidRuntime(624):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-08 21:20:25.765: E/AndroidRuntime(624):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-08 21:20:25.765: E/AndroidRuntime(624):  at dalvik.system.NativeStart.main(Native Method) 
```

我的数据库处理程序类的复制方法部分：

```
private static String DB_PATH = "/data/data/com.cookbook.adiel/databases/";

     private static String DB_NAME = "CookbookDB";
 public void createDataBase() throws IOException{

         boolean dbExist = checkDataBase();

         if(dbExist){
             //do nothing, database already exists
         }
         else{
             this.getDatabaseName();
             try{
                 copyDataBase();
             }catch(IOException e){
                 throw new Error("Error copying database");
             }
         }
     }
private boolean checkDataBase(){
            SQLiteDatabase checkDB = null;
            try{
                String myPath = DB_PATH + DB_NAME;
                checkDB = SQLiteDatabase.openDatabase(myPath, null, SQLiteDatabase.OPEN_READONLY);
            }catch(SQLiteException e){
                throw new Error("Database doesn't exist yet");
            }

            if(checkDB != null){
                checkDB.close();
            }

            return checkDB!=null ? true : false;
        }

        private void copyDataBase() throws IOException{

            //Open your local db as the input stream
             InputStream myInput = myContext.getAssets().open(DB_NAME);

            // Path to the just created empty db
             String outFileName = DB_PATH + DB_NAME; // Same as String myPath in checkDataBase()

            //Open the empty db as the output stream
             OutputStream myOutput = new FileOutputStream(outFileName);

             //transfer bytes from myInput to myOutput
             byte[] buffer = new byte[1024];
             int length;
             while((length = myInput.read(buffer))>0){
                 myOutput.write(buffer, 0, length);
             }

             //Close the streams

             myOutput.flush();
             myOutput.close();
             myInput.close();

        } 
```

在启动器上：

```
ExistingDBHandler dbHandler = new ExistingDBHandler(this);
        try {
            dbHandler.createDataBase();
        } catch (IOException e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        }

        for(int i =1; i<stories.length + 1;i++){
            stories[i-1] = dbHandler.getStory(i);
        }

        List<StoryType> storyList = dbHandler.getAllStories();
        for(int i = 0; i<stories.length; i++){
            Log.d("Checking if db is working", "Story " + i);
        } 
```

任何帮助将不胜感激。谢谢！

# c++ - g++ STL 容器 initializer_list 行为在 4.4 和 4.7 之间的差异

> ID：13400819
> 
> 赞同：2
> 
> 时间：2012-11-15T15:34:49.983
> 
> 标签：c++, stl, c++11, initializer-list

下面的 c++0x/c++11 特性（初始化列表，包括 STL 容器）应该允许我`std::map`在声明时初始化这个 STL。而且，它在 g++ 4.7.2 中工作得很好，但我在尝试在 g++ 4.4.6 中编译它时遇到错误。根据 GCC 文档，这个 c++0x 功能在 4.4 中可用，但很明显（a）我做错了什么，或者（b）它在 g++ 4.4 中不完整。

```
std::map<std::string,std::vector<std::string>>
DbConnection::attrs_of_type = {
    { "http",           { "url", "ipaddress", "port",
                            "username", "password" } },
    { "email",          { "address", "full_name" } },
    { "ftp",            { "hostname", "ipaddress", "port",
                            "username", "password", "filename" } }
}; 
```

但是，当我尝试在 gcc 4.4.6 下编译时，我收到以下`no matching function call`错误，这是典型的“几乎无法理解”的方式：

```
database.cc:164: error: no matching function for call to ‘std::map<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > > > >::map(<brace-enclosed initializer list>)’
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_map.h:195: note: candidates are: std::map<_Key, _Tp, _Compare, _Alloc>::map(std::initializer_list<std::pair<const _Key, _Tp> >, const _Compare&, const _Alloc&) [with _Key = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Tp = std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, _Compare = std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, _Alloc = std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > > >]
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_map.h:181: note:                 std::map<_Key, _Tp, _Compare, _Alloc>::map(std::map<_Key, _Tp, _Compare, _Alloc>&&) [with _Key = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Tp = std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, _Compare = std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, _Alloc = std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > > >]
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_map.h:170: note:                 std::map<_Key, _Tp, _Compare, _Alloc>::map(const std::map<_Key, _Tp, _Compare, _Alloc>&) [with _Key = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Tp = std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, _Compare = std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, _Alloc = std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > > >]
/usr/lib/gcc/x86_64-redhat-linux/4.4.6/../../../../include/c++/4.4.6/bits/stl_map.h:150: note:                 std::map<_Key, _Tp, _Compare, _Alloc>::map() [with _Key = std::basic_string<char, std::char_traits<char>, std::allocator<char> >, _Tp = std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > >, _Compare = std::less<std::basic_string<char, std::char_traits<char>, std::allocator<char> > >, _Alloc = std::allocator<std::pair<const std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::vector<std::basic_string<char, std::char_traits<char>, std::allocator<char> >, std::allocator<std::basic_string<char, std::char_traits<char>, std::allocator<char> > > > > >] 
```

（是否可以更改粘贴的格式，因此不需要太多的水平滚动？）

反正。在这一点上，我试图弄清楚我必须做些什么才能让这个初始化在 g++ 4.4.6 中工作。`std::map`关于我声明或 的方式，我可以改变什么来`std::vector`解决问题吗？或者由于 g++ 4.4 中这个 c++11 功能的实现不同和/或不完整，是否必须使用完全不同的方法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-30T05:16:16.693

你的代码是正确的。g++-4.4 正式支持初始化列表。但我记得（我关注 wg21 论文）有一个问题，特别是在某些时候无法以您在委员会中所做的方式（使用嵌套）初始化容器。

`std::initializer_list`由于这些更改是在稍后完成的，g++-4.4 很可能没有完全支持语法。

# php - 将图像存储在数据库中具有唯一名称和路径的文件夹中

> ID：13400824
> 
> 赞同：1
> 
> 时间：2012-11-15T15:35:10.977
> 
> 标签：php, image, storage, directory

我通过json获取php文件中的图片编码数据。我的要求是将图像存储在服务器中的一个文件夹中，前提是应为每个图像分配一个唯一的名称。我对如何将图像存储在具有唯一名称的文件夹中然后再次将图像的路径存储在数据库中产生了很多疑问。我看过几个 StackOverflow 问题和在线资源，但无法清楚地了解它们。对于从事 PHP 工作的人来说，这个问题似乎很简单。但是作为 php 的新手和 Android 开发人员，我无法理解那些不太详细的答案。因此，如果有人可以帮助我提供代码片段和解释，我将不胜感激。我试图用尽可能清晰的注释来解释问题和代码。如果有任何错误，请轻描淡写。以下是我尝试并在某些点卡住的代码。提前致谢..

```
 <?php
    $response = array();

    // check for required fields
    if (isset($_POST['mailid']) && isset($_POST['category']) && isset($_POST['description']) && isset($_POST['contactNum']) && isset($_POST['lookingto']) && isset($_POST['image'])) {

        $usermail = $_POST['mailid'];
        $category = $_POST['category'];
        $description = $_POST['description'];
        $contactNum = $_POST['contactNum'];
        $lookingto = $_POST['lookingto'];
        $base=$_POST['image'];

        $binary=base64_decode($base);

        $folder = "images/"; // This is my folder "images" in which pics have to be stored.

        $file = fopen('storepic.jpg', 'wb');  // Here I have to give name dynamically to each pic provided that should be unique. Here I mentioned pic name as storepic.jpg, a static name.

        fwrite($file, $binary);

        fclose($file);

        // include db connect class
        require_once __DIR__ . '/db_connect.php';

        // connecting to db
        $db = new DB_CONNECT();

        // mysql inserting a new row
        $result = mysql_query("INSERT INTO details(usermail, category, description, contactnumber,posting_for) VALUES('$usermail', '$category', '$description','$contactNum','$lookingto')");

//// Even after giving dynamic name how can we store the path of the dynamic named image into database in the above query. For that what should be done here..

        // check if row inserted or not
        if ($result) {
            // successfully inserted into database
            $response["success"] = 1;

            // echoing JSON response
            echo json_encode($response);
        } else {
            // failed to insert row
            $response["success"] = 0;

            // echoing JSON response
            echo json_encode($response);
        }
    } else {

        $response["success"] = 0;

        // echoing JSON response
        echo json_encode($response);
    }
    ?> 
```

即使在其他 php 文件中，我也通过选择查询检索数据。我能够获得我插入的正常数据，可以在 Android 客户端应用程序上获得它。但话又说回来如何从路径中获取图像，以便稍后转换为 base64 编码数据，然后作为 json 响应回显..

**注意：-**我的 UI 不是表单。这是安卓用户界面。。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T17:31:32.230

```
 // A very basic field validation. You should really use mysqli* or PDO*.

    $fields = array(
        'usermail'    => 'mailid',
        'category'    => 'category',
        'description' => 'description',
        'contactNum'  => 'contactNum',
        'lookingto'   => 'lookingto',
        'binary'      => 'base',
    );
    $okay = true;
    foreach($fields as $var => $field)
    {
         if (!isset($_POST[$field]))
             $okay = false;
         if ('binary' == $var)
             ${$var} = base64_decode($_POST[$field]);
         else
             ${$var} = mysql_real_escape_string($_POST[$field]);
    }
    if (!$okay)
    {    
        $response["success"] = 0;
        Header("Content-Type: application/json;charset=UTF-8");
        die(json_encode($response));
    }

    $folder = "images/"; // This is my folder "images" in which pics have to be stored.

    $file   = tempnam($folder, 'image');

    $fp     = fopen($file, 'w');
    fwrite($file, $binary);    
    fclose($file);

    /* BUT WHAT IF THE FILE IS NOT JPEG?
       Then you use GD library and do:

       $gd = ImageCreateFromString($binary);
       if (!$gd)
       {
           // Abort. Image was invalid.
       }
       // Here you can even resize it.
       ImageJPEG($gd, $file, 75); // Quality 75%; useable values from 40 to 100
       ImageDestroy($gd);
    */

    ...

    $result = mysql_query("INSERT INTO details(usermail, category, description, contactnumber,posting_for) VALUES('$usermail', '$category', '$description','$contactNum','$lookingto')");

    // I assume that the above table has an unique ID. So we retrieve it
    $lastid = mysql_insert_id(); 

    rename($file, $newfile = sprintf("%s/img%08d.jpg", $folder, $lastid)); 
```

上面，*文件名不需要列名，*因为名称与行 ID 相同：如果 ID 为 1234，则图像为`images/img00001234.jpg`.

否则，您必须发出另一个查询：

```
 UPDATE details SET filename='$newfile' WHERE id = $lastid; 
```

## 检索

在所有情况下，您都会收到有关要检索的行的一些信息；至少它的 ID，或者无论如何你可以插入一个`WHERE`. 例如，如果您收到用户电子邮件（并且它是唯一键），您将使用`WHERE email='...'`.

因此，您将能够发出 a`SELECT * FROM details WHERE...`并且在这些详细信息中您将找到 ID 或`filename`字段。

在第一种情况下，您有足够的资源来*构建*文件名，甚至不需要数据库查询，但**请记住，任何知道 ID 的人现在都可以访问图像**，这可能是无害的，甚至是需要的（例如，用户公共头像图像）但是有时可能不是。

```
$lastid  = (int)$_REQUEST['id'];
$newfile = sprintf("%s/img%08d.jpg", $folder, $lastid); 
```

请注意，语法与上述相同；演员要记住，这是用户提供的`(int)`信息，可能包含各种恶意垃圾。

在第二种情况下，您将发出 a`WHERE`并从检索到的元组中获取 ID 或直接获取文件名字段。

拥有图像路径，您可以将其发送给用户......如果图像在那里。只是检查。

```
if (!is_readable($newfile))
{
    Header('HTTP/1.0 404 Not Found')
    readfile('/path/to/beautiful/error-page.html');
    die();
}
// if you are really paranoid, or want to support different quality images,
// you can $gd = imageCreateFromJPEG($newfile); here, check it succeeded or
// send 404 / 500 error if it failed, manipulate $gd and send it along with
// ImageJPEG($gd, '', $quality); instead of the readfile() down there. With
// this approach, you'll better not send Content-Length, though. This makes
// image DOWNLOADS more awkward (you don't see "104K of 1.3M downloaded").

Header('Content-Type: image/jpeg');
Header('Content-Length: ' . filesize($newfile));
readfile($newfile);
die(); 
```

……就是这样。在调用上述代码的 HTML 源代码中，您可能有：

```
<img class="avatar" src="images.php?id=<?php echo $details['id']; ?>" /> 
```

（当然，生成 HTML 的 PHP*需要*访问数据库和 fetch `$details`）。

还有其他设置允许“调用”PHP 以受保护的方式将数据库元组信息保存在 _GET 参数中，这样即使用户看到图像是通过

```
image.php?id=1234 
```

并且知道 Bob 的 ID 为 7654，但她仍然无法通过将 1234 更改为 7654 来检索图像，但我不知道这是否有人感兴趣。

使用 Web 浏览器，设置内容就足够了。使用 Internet Explorer，您可能需要文件以 . 结尾`.jpg`，而这又可能需要使用 URL 重写方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-27T05:11:42.503

```
 package com.example.test_image_save;

    import java.io.BufferedInputStream;
    import java.io.FileInputStream;
    import java.io.IOException;

    import android.app.Activity;
    import android.content.ContentValues;
    import android.content.Context;
    import android.content.Intent;
    import android.database.Cursor;
    import android.database.sqlite.SQLiteDatabase;
    import android.graphics.BitmapFactory;
    import android.net.Uri;
    import android.os.Bundle;
    import android.os.Environment;
    import android.provider.MediaStore;
    import android.view.View;
    import android.view.View.OnClickListener;
    import android.widget.Button;
    import android.widget.ImageView;
    import android.widget.TextView;
    import android.widget.Toast;

    public class MainActivity extends Activity implements OnClickListener {
    protected static TextView textView;
    protected static ImageView image1, image2;
    protected Button get_image, save_image, read_image;
    private String selectedImagePath;
    private static final int SELECT_PICTURE = 1;
    String DB_NAME = Environment.getExternalStorageDirectory() + "/test.db";
    String TABLE_NAME = "mytable";

    @Override
    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    image1 = (ImageView) findViewById(R.id.imageView1);
    image2 = (ImageView) findViewById(R.id.imageView2);
    textView = (TextView) findViewById(R.id.textView1);

    get_image = (Button) findViewById(R.id.get_image);
    get_image.setOnClickListener(this);

    save_image = (Button) findViewById(R.id.save_image);
    save_image.setOnClickListener(this);

    read_image = (Button) findViewById(R.id.read_image);
    read_image.setOnClickListener(this);

    }

    public void onClick(View v) {

    int id = v.getId();
    switch (id) {

    case R.id.get_image:
        Intent intent = new Intent();
        intent.setType("image/*");
        intent.setAction(Intent.ACTION_GET_CONTENT);
        startActivityForResult(
                Intent.createChooser(intent, "Select Picture"),
                SELECT_PICTURE);
        break;

    case R.id.save_image:
        createTable();
        saveInDB();
        break;

    case R.id.read_image:
        readFromDB();
        break;
    default:
        break;

    }
    }

    public void onActivityResult(int requestCode, int resultCode, Intent data) {
    if (resultCode == RESULT_OK) {
        if (requestCode == SELECT_PICTURE) {
            Uri selectedImageUri = data.getData();
            selectedImagePath = getPath(selectedImageUri);
            System.out.println("Image Path : " + selectedImagePath);
            image1.setVisibility(View.VISIBLE);
            image1.setImageURI(selectedImageUri);
        }
    }
    }

    @SuppressWarnings("deprecation")
    public String getPath(Uri uri) {
    String[] projection = { MediaStore.Images.Media.DATA };
    Cursor cursor = managedQuery(uri, projection, null, null, null);
    int column_index = cursor
            .getColumnIndexOrThrow(MediaStore.Images.Media.DATA);
    cursor.moveToFirst();
    return cursor.getString(column_index);
    }

    void createTable() {
    SQLiteDatabase myDb = openOrCreateDatabase(DB_NAME,
            Context.MODE_PRIVATE, null);
    String MySQL = "create table if not exists "
            + TABLE_NAME
            + " (_id INTEGER primary key autoincrement, name TEXT not null, image BLOB);";
    myDb.execSQL(MySQL);
    myDb.close();
    }

    void saveInDB() {
    SQLiteDatabase myDb = openOrCreateDatabase(DB_NAME,
            Context.MODE_PRIVATE, null);
    byte[] byteImage1 = null;
    String s = myDb.getPath();

    myDb.execSQL("delete from " + TABLE_NAME);          // clearing the table
    ContentValues newValues = new ContentValues();
    String name = "SachinImages";
    newValues.put("name", name);
    try {
        FileInputStream instream = new FileInputStream(selectedImagePath);
        BufferedInputStream bif = new BufferedInputStream(instream);
        byteImage1 = new byte[bif.available()];
        bif.read(byteImage1);
        newValues.put("image", byteImage1);
        long ret = myDb.insert(TABLE_NAME, null, newValues);
        if (ret < 0)
            textView.append("Error");
    } catch (IOException e) {
        textView.append("Error Exception : " + e.getMessage());
    }
    myDb.close();
    textView.append("\n Saving Details \n Name : " + name);
    textView.append("\n Image Size : " + byteImage1.length + " KB");
    textView.append("\n Saved in DB : " + s + "\n");
    Toast.makeText(this.getBaseContext(),
            "Image Saved in DB successfully.", Toast.LENGTH_SHORT).show();
    }

    void readFromDB() {
    byte[] byteImage2 = null;
    SQLiteDatabase myDb;
    myDb = openOrCreateDatabase(DB_NAME, Context.MODE_PRIVATE, null);
    Cursor cur = myDb.query(TABLE_NAME, null, null, null, null, null, null);
    cur.moveToFirst();
    while (cur.isAfterLast() == false) {
        textView.append("\n Reading Details \n Name : " + cur.getString(1));
        cur.moveToNext();
    }

    // /////Read data from blob field////////////////////
    cur.moveToFirst();
    byteImage2 = cur.getBlob(cur.getColumnIndex("image"));
    setImage(byteImage2);
    cur.close();
    myDb.close();
    Toast.makeText(this.getBaseContext(),
            "Image read from DB successfully.", Toast.LENGTH_SHORT).show();
    Toast.makeText(this.getBaseContext(),
            "If your image is big, please scrolldown to see the result.",
            Toast.LENGTH_SHORT).show();
    }

    void setImage(byte[] byteImage2) {
    image2.setImageBitmap(BitmapFactory.decodeByteArray(byteImage2, 0,
            byteImage2.length));
    textView.append("\n Image Size : " + byteImage2.length + " KB");
    }

    } 
```

# php - 使您的 PHP 网站成为 SAML 身份提供者

> ID：13400830
> 
> 赞同：7
> 
> 时间：2012-11-15T15:35:30.460
> 
> 标签：php, zend-framework, saml

故事是我需要让我的网站充当身份提供者（阅读：IDP）。网站本身在 Zend 平台上。Idea 正在制作一个 IDP 控制器，服务提供商（阅读：SP）通过该控制器联系 IDP。因为它必须是网站的一部分，所以我需要包含一些扩展，它可以很容易地用于响应来自 SP 的 SAML 请求。

我从以下位置找到了 PHP 扩展列表： [https ://wiki.surfnetlabs.nl/display/OSP/RFC++-+OpenSAMLphp,+a+new+PHP+library+for+SAML+2.0+support](https://wiki.surfnetlabs.nl/display/OSP/RFC+-+OpenSAMLphp,+a+new+PHP+library+for+SAML+2.0+support)

所有这些扩展几乎没有文档或太复杂。例如，我还没有找到在我的应用程序中使用 SimpleSamlPHP 的方法，并且从中提取有用的代码看起来非常耗时（我真的不再有）。此外，我发现所有这些都难以实施**到**网站中。

几天来，我一直在谷歌搜索和检查 github，试图找到使用某些库的简单方法（现在我正在尝试实现 Lasso，这似乎很合理，但不幸的是缺乏如何将其用作 IDP 的良好示例/信息）。

任何类型的批评、想法、帮助或教程/代码示例都会很有用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-16T01:51:36.973

我写了一篇关于如何使用 simplesamlphp 在开源软件 (Tiki-wiki) 上部署 IdP 以及如何将 IdP 连接到 google 或 salesforce 的指南。看一看：

[https://github.com/pitbulk/tiki-saml/blob/master/doc/tiki_wiki_as_idp.rst](https://github.com/pitbulk/tiki-saml/blob/master/doc/tiki_wiki_as_idp.rst)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:49:09.447

SimpleSAMLphp 一开始看起来很吓人，但它可以为您处理所有 SAML 响应。您是否查看过创建自定义身份验证模块 - [http://simplesamlphp.org/docs/stable/simplesamlphp-customauth](http://simplesamlphp.org/docs/stable/simplesamlphp-customauth)

你可以很容易地将这个模块与你现有的登录机制联系起来。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T17:37:21.903

查看 Ping Identity 的 PingFederate 和 PHP 集成工具包。或者，还有无代理集成工具包（而不是 PHP），它允许您使用 RESTful API 调用集成到 PingFed 服务器，而不是嵌入任何 PHP 库。

HTH，伊恩

# javascript - Jquery lock 语句或等价物？

> ID：13400833
> 
> 赞同：2
> 
> 时间：2012-11-15T15:35:34.067
> 
> 标签：javascript, jquery

我正在使用 jQuery 工具提示（tipsy 插件）在我的网站上显示验证错误。应客户的要求，我修改了插件以允许在悬停和焦点上显示工具提示。但是，当用鼠标单击一个字段时（而不是简单地使用 Tab 键），两个事件处理程序都会执行，并且工具提示上会出现闪烁，因为两次都尝试显示它。在这样的场景中防止多个事件处理程序执行的最干净的方法是什么？

# java - 过滤 AWT 文本字段输入文本

> ID：13400836
> 
> 赞同：1
> 
> 时间：2012-11-15T15:35:43.240
> 
> 标签：java, awt, textfield

在 jtextfield 中，可以通过覆盖 document 的 insertString 方法来限制 jtextfield 的输入。我如何在 awt 文本字段中执行这些操作？如何过滤 awt 文本字段的输入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T17:21:24.717

> 可以通过覆盖 document 的 insertString 方法来限制 jtextfield 的输入。

*   不可能`AWT TextField`，您可以仅将[DocumentListener](http://docs.oracle.com/javase/tutorial/uiswing/events/documentlistener.html)添加到[Swing JTextComponents](http://docs.oracle.com/javase/tutorial/uiswing/components/text.html)

> jtextfield 通过覆盖文档的 insertString 方法。

*   也许你需要使用`DocumentFilter`for `Swing JTextComponent`s

> 我如何在 awt 文本字段中执行这些操作？如何过滤 awt 文本字段的输入？

*   因为`AWT TextField`你可以使用

    1.  [文本监听器](http://docs.oracle.com/javase/7/docs/api/java/awt/event/TextListener.html)

    2.  [按键监听器](http://docs.oracle.com/javase/tutorial/uiswing/events/keylistener.html)

    3.  [从 AWTEvent 监听](http://docs.oracle.com/javase/7/docs/api/java/awt/AWTEvent.html)

# html - 需要jsp表单提交查询到特定路径

> ID：13400839
> 
> 赞同：2
> 
> 时间：2012-11-15T15:35:48.047
> 
> 标签：html, forms, jsp

我正在尝试在 jsp 中设置一个简单的表单，该表单将在提交的 URL 中放置一个搜索查询。

这是我到目前为止所拥有的：

```
<form action="search/" method="get" onsubmit="this.action+=this.q.value.trim();return true">
   <input type="text" id="q">
   <input type="submit" value="go">
</form> 
```

这是在我的 Web 应用程序的每个页面中包含的一个 jsp 中，当我位于应用程序的根目录时它可以工作。例如，如果我最初加载“http://localhost:8080/MyApp/”，然后在搜索表单中输入“123456”，它会将我带到“http://localhost:8080/MyApp/search/123456”，即是我想要的。但是，从那个页面，如果我再次搜索（例如“654321”），它会转到“http://localhost:8080/MyApp/search/search/654321”，这对我不起作用。无论我当时在哪个页面上，我都需要将 search/{query} 附加到应用程序路径的根目录。

如果可能的话，我想避免使用 javascript，不过我对 JSTL 很好。

我们欢迎所有的建议！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T16:22:14.313

只需为您的操作添加完整路径，以 / 开头。请注意，这取决于您的应用程序上下文，您可以使用：

```
<form action="${pageContext.request.contextPath}/search/"... 
```

它将在 dev 和 prod 中工作。

编辑 ：

路径：搜索将尝试从当前路径加载相对路径：http: [//domain.com/contact/search/](http://domain.com/contact/search/) 路径：/search 将尝试从域加载相对路径：http: [//domain.com/](http://domain.com/)

使用上面的上下文路径，无论它是否从 dev 更改为 prod，它都会起作用。

希望这可以帮助！

# java - 从非活动类附加 EditText

> ID：13400840
> 
> 赞同：0
> 
> 时间：2012-11-15T15:35:49.880
> 
> 标签：java, android, user-interface, view, android-activity

我无法将非活动类中的文本字符串附加到 EditText 视图。

我尝试将视图作为参数传递给类的构造函数。

基本问题是我无法在非 Activity 类中使​​用 findViewById。

我知道这是一个愚蠢的问题，但我已经尝试了很多，但根本无法做到这一点。

我的代码示例是：

```
 /*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */
package com.printtesting;

import android.app.Activity;
import android.widget.EditText;
import java.math.BigInteger;
import java.util.Random;
import java.util.Vector;
//import javax.swing.JOptionPane;

/**
 *
 * @author HP
 */
public class keyGenerator {

    /**
     * @param args the command line arguments
     */

      static  Vector check = new Vector();

      static protected BigInteger p= new BigInteger("161");
      static protected BigInteger q= new BigInteger("47");
      static protected Random s = new Random();
      static protected BigInteger n = new BigInteger("1");
      static protected BigInteger trails;
      static protected BigInteger lambda ;
      static protected BigInteger nsq  = new BigInteger("1");
      static protected BigInteger g = new BigInteger("1");
      static protected BigInteger temp = new BigInteger("1");

    static protected int maxbit;
    private static BigInteger two = new BigInteger("2");

    public keyGenerator() {
      //  p = new BigInteger(7,1,s);
                System.out.println(p.toString());
      /*  while(!isPrime(p) && ( (p.compareTo(two)==1) || (p.compareTo(two))==0) )
        {
                p = new BigInteger(7,1,s);

        System.out.println(p.toString());
        }*/
        System.out.println("P is " + p);

    //    q = new BigInteger(7,1,s);
      /*  while(!isPrime(q) && ( (q.compareTo(two)==1) || (q.compareTo(two))==0) )
        {
                q = new BigInteger(7,1,s);
        }*/
        System.out.println("Q is " + q);

        // TODO code application logic here

       // BigInteger oth = new BigInteger("132312"); 
       generateKey();

    }

    protected  void generateKey()
    {
   EditText et = (EditText) Activity.findViewByID(R.string.te);
    // N=pq
    n=n.multiply(p);
    n=n.multiply(q);
    ....
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:39:01.827

您不能这样做，因为 findViewByID 是实例方法，而不是静态方法。您需要做以下两件事之一：

1）将活动作为参数传递给此类。这将允许您在其上调用 findViewByID

2）将 EditText 作为参数传递（在活动类中调用 findViewByID 之后）。这将允许您只调用 setText 就可以了

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:40:48.143

```
EditText et = (EditText) Activity.findViewByID(R.string.te); 
```

您需要从活动中传递活动变量。

```
EditText et = (EditText) (activity var).findViewByID(R.string.te); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:42:35.390

您可以将 Edittext Activity 类的上下文传递给非 keyGenerator 类：

```
Context conn;
public keyGenerator(Context con) {
conn=con;
//Your Code...
} 
```

现在您可以将 keyGenerator 上的文本附加到 Edittext 为：

```
EditText et = (EditText)conn.findViewByID(R.string.te);
et.append("your text here"); 
```

您可以将 Current Context 传递给 keyGenerator 构造函数，如下所示：

```
keyGenerator obj=new keyGenerator(Current_Activity.this); 
```

# sql-server - 我的第一个表值函数和游标

> ID：13400842
> 
> 赞同：0
> 
> 时间：2012-11-15T15:35:53.813
> 
> 标签：sql-server, tsql, function, cursor, while-loop

我有这个查询：

```
SELECT name, lastname
FROM contestant 
WHERE  name= 'John'  AND lastname = 'Smith' 
```

我从上面的查询中得到了几个结果，我需要将它们用于以下查询：

```
SELECT  name, lastname,prize, city 
FROM draw
WHERE  name= name from table contestant  AND lastname= name from table contestant 
```

现在我正在构建一个带有游标和 WHILE 的表值函数，这样我就可以有一个带有结果的表。

这是我的尝试，你能帮我完成吗？为了理解这个 TSQL 章节，这对我很有帮助。谢谢！

```
CREATE FUNCTION [dbo].[myFunction]
(
    @name varchar (44),
    @lastname varchar (44) 
)
RETURNS 
@tmpTable TABLE 
(   
    name char(44),
    lastname char(44),
    prize varchar(44),
    city char(44)

)
AS
BEGIN

    DECLARE 
/* what do I have to input here */

    DECLARE myCursor CURSOR FOR

SELECT name, lastname
FROM contestant 
WHERE  name= @name  AND lastname = @lastname

    OPEN myCursor

    FETCH NEXT FROM myCursor INTO  /* what goes here?*/

    WHILE (@@FETCH_STATUS = 0) 
    BEGIN

 -- and here? 

        FETCH NEXT FROM myCursor INTO /* what goes here?*/

    END /*WHILE*/

    CLOSE myCursor
    DEALLOCATE myCursor

    INSERT INTO @tmpTable (name, lastname,prize, city)
    SELECT name, lastname,prize, city 
        FROM prize
        WHERE name = @name AND lastname = @lastname

    RETURN
END 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-16T05:49:11.527

好的，只要你明白：

1.  表格设计不正确 - 您应该在两个表格中都有一个参赛者键。
2.  连接是解决此问题的方法，而不是游标
3.  我在这里提供的是解决这个问题的最糟糕的方法，你需要从中学到的是，你永远不应该用它来解决这个问题！

但是在回答您的问题*时，我如何使用光标*，这里有一些未经测试的代码，希望能给您提供这个概念。

```
CREATE FUNCTION [dbo].[myFunction]
(
@name varchar (44),
@lastname varchar (44) 
)
RETURNS 
@tmpTable TABLE 
(   
name char(44),
lastname char(44),
prize varchar(44),
city char(44)
)
AS
BEGIN

DECLARE @c_name varchar (44)
DECLARE @c_lastname varchar (44) 

DECLARE myCursor CURSOR FOR

SELECT name, lastname
FROM contestant 
WHERE  name= @name  AND lastname = @lastname

OPEN myCursor

FETCH NEXT FROM myCursor INTO  @c_name, @c_lastname

WHILE (@@FETCH_STATUS = 0) 
BEGIN

    -- we've found a row. Name look for the matching row in prize
    INSERT INTO @tmpTable (name, lastname,prize, city)
    SELECT name, lastname,prize, city 
    FROM prize
    WHERE name = @c_name AND lastname = @c_lastname

    FETCH NEXT FROM myCursor INTO @c_name, @c_lastname

END /*WHILE*/

CLOSE myCursor
DEALLOCATE myCursor

RETURN
END 
```

作为比较，这是正确的解决方案：

```
SELECT draw.name, draw.lastname, draw.prize, draw.city
FROM 
draw
INNER JOIN
contestant 
ON draw.name = contestant.name
AND draw.lastname = contestant.lastname
WHERE  contestant.name= 'John'  
AND contestant.lastname = 'Smith' 
```

它更小、更简单、更快。

# ios - UIViewAnimation 立即播放，延迟被忽略

> ID：13400846
> 
> 赞同：3
> 
> 时间：2012-11-15T15:35:59.353
> 
> 标签：ios, uiview, uiviewanimation

我有一个简单的 UIViewAnimation，一旦我的视图被加载，它就会被调用。但是，无论我放置什么作为延迟值，它都会被忽略并且动画会立即播放。

```
[UIView beginAnimations:nil context:nil];
[UIView setAnimationDuration:100.0];
[UIView setAnimationDelay:2.0];
[UIView setAnimationCurve:UIViewAnimationCurveEaseInOut];
[UIView setAnimationDelegate:self];
[UIView setAnimationDidStopSelector:@selector(faceRight:finished:context:)];
_chooseLabelContainer.center = CGPointMake(originalCenter.x, 0 - _chooseLabelContainer.frame.size.height);
[UIView commitAnimations]; 
```

**更新：**作为一项测试，我已经处理了这种情况，并且在非延迟动画下方会立即发生，但是调度队列中的动画会按预期进行超时动画！UIView* objectToAnimate = self.hudController->_chooseLabelContainer;

```
dispatch_after(dispatch_time(DISPATCH_TIME_NOW, 2 * NSEC_PER_SEC), dispatch_get_current_queue(), ^{
    [UIView animateWithDuration:5.0 delay:2.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
        NSLog(@"Start Dispatch %@", NSStringFromCGPoint( objectToAnimate.center ) );
        objectToAnimate.center = CGPointMake(objectToAnimate.center.x, objectToAnimate.center.y+90);
    }completion:^(BOOL done){
        NSLog(@"Done Dispatch");
    }];

});

[UIView animateWithDuration:5.0 delay:2.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
    NSLog(@"Start %@", NSStringFromCGPoint( objectToAnimate.center ) );
    objectToAnimate.center = CGPointMake( objectToAnimate.center.x, objectToAnimate.center.y+30);
}completion:^(BOOL done){
    NSLog(@"Done");
}]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:40:55.450

这可能无法解决您的问题，但从 iOS 4 开始，Apple 建议您使用 UIView 动画块：

```
[UIView animateWithDuration:100.0 delay:2.0 options:UIViewAnimationOptionCurveEaseInOut animations:^{
    _chooseLabelContainer.frame = CGPointMake(originalCenter.x, 0 - _chooseLabelContainer.frame.size.height);
}completion:^(BOOL done){
    [self faceRight:finished:context]; //will of course generate errors since I don't know what arguments to pass.
}]; 
```

# javascript - javascript - 按下点时提示方法/字段

> ID：13400848
> 
> 赞同：1
> 
> 时间：2012-11-15T15:36:05.637
> 
> 标签：javascript, eclipse, api, bing-maps

我正在尝试使用 bing 地图学习 javascript。

如何键入点 (.) 并查看 API 提供的内容？不想每次找方法都去MSDN。例子：

```
mapTypeId:Microsoft.Maps.MapTypeId.road, 
```

除了道路（最后），还有其他选项，例如：birdseye、collinsBart 等。我知道这一点是因为我必须阅读[MapTypeId Enumeration](http://msdn.microsoft.com/en-us/library/gg427625.aspx)。如果我只能单击 MapTypeId 后的点并获取枚举，那会更容易。

有没有办法做到这一点？（我正在使用日食）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-18T12:08:20.060

Bing Maps v7 SDK 现在具有适用于 Visual Studio 的智能感知。您可以在这里找到所有相关信息：http: [//blogs.bing.com/maps/2014/09/04/the-art-of-intellisense-three-ways-to-use-intellisense-with-bing-maps -蜜蜂/](http://blogs.bing.com/maps/2014/09/04/the-art-of-intellisense-three-ways-to-use-intellisense-with-bing-maps-apis/)

# php - WP：如果语句

> ID：13400850
> 
> 赞同：1
> 
> 时间：2012-11-15T15:36:08.980
> 
> 标签：php, wordpress, if-statement

我在 WordPress 中创建了一个 2 语言网站，我需要说的是：

如果 html 方向是 RTL 使用一些代码，否则使用另一个代码......

我已经用我在 Joomla 中使用的传统方式进行了尝试

```
<?php    if( $this->direction=="rtl"){ ?> 
```

/images/slider/01.jpg" alt="Slider 01" title="#htmlcaption" /> /images/slider/02.jpg" alt="Slider 02" title="#htmlcaption" /> /images/slider /03.jpg" alt="Slider 03" title="#htmlcaption" /> /images/slider/04.jpg" alt="Slider 04" title="#htmlcaption" **/** > /images/slider/01.jpg" alt="Slider 01" title="#htmlcaption" /> /images/slider/02.jpg" alt="Slider 02" title="#htmlcaption" /> /images/slider /03.jpg" alt="滑块 03" title="#htmlcaption" /> /images/slider/04.jpg" alt="滑块 04" title="#htmlcaption" /> **提供经济高效且可靠的海上运输这**是一个带有链接的 HTML 标题示例。 **这**是一个带有链接的 HTML 标题示例。 **这**是一个带有链接的 HTML 标题示例。

但它总是说有一个致命的错误.. 我想我需要定义`$this`为 html 页面但是在 PHP 中怎么说呢？

：在第 7 行 C:\AppServ\www\wordpress\wp-content\themes\wp\index.php 的对象上下文中使用 $this

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:53:27.970

看来我们将它内置到另一个名为“language_attributes()”的函数中。试试这个：

```
// if ( function_exists( 'is_rtl' ) ) # You may need to utilize this if is_rtl() is not defined
if( is_rtl() == 'rtl' ){
    // DO RTL code
}else{
    // DO LTR code    
} 
```

基于以下信息：

[http://core.trac.wordpress.org/browser/tags/3.4.2/wp-includes/general-template.php#L0](http://core.trac.wordpress.org/browser/tags/3.4.2/wp-includes/general-template.php#L0)

[http://wpml.org/2011/06/creating-right-to-left-rtl-wordpress-sites/](http://wpml.org/2011/06/creating-right-to-left-rtl-wordpress-sites/)

[http://codex.wordpress.org/Right-to-Left_Language_Support](http://codex.wordpress.org/Right-to-Left_Language_Support)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:39:20.150

试试这个：

```
$script_name=$_SERVER['SCRIPT_NAME']; 
```

# git - 带有 Github 设置的 Gitflow

> ID：13400851
> 
> 赞同：2
> 
> 时间：2012-11-15T15:36:09.683
> 
> 标签：git, github, installation, git-flow, centralized

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-16T07:28:54.280

# opengl - Creating a 2D grid using openGL and vertex and fragment shaders

> ID：13400854
> 
> 赞同：0
> 
> 时间：2012-11-15T15:36:26.170
> 
> 标签：opengl, glsl, fragment-shader

OK so i have a really big square (grid) that I have made up using triangles, then applied a heightmap to bump it. What im trying to do now is get grid lines on it. I have figured out a way to do this but this results in 33 if statements in the fragment shader just for x and then another 33 for y. I have been told I can use what im doing now and implement it slightly differently (using some GLSL function) to only need 1 or 2 if statements. This is my current code (not all finished but gives you the idea of what im doing.)

```
#version 330

uniform sampler2D texture;

in vec2 texCoord;

layout (location=0) out vec4 fragColour;

void main(void) {

vec4 newColor;
vec2 line = texCoord * 32; // makes texCoords easier to number (as divided by 32 in the C++array)

if(line.x > 0 && line.x < 0.9)
{
    newColor = vec4(1.0,1.0,1.0,1.0);
}
else if(line.x > 1 && line.x < 1.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 2 && line.x < 2.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 3 && line.x < 3.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 4 && line.x < 4.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 5 && line.x < 5.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 6 && line.x < 6.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 7 && line.x < 7.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 8 && line.x < 8.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 9 && line.x < 9.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 10 && line.x < 10.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 11 && line.x < 11.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 12 && line.x < 12.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 13 && line.x < 13.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 14 && line.x < 14.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 15 && line.x < 15.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 16 && line.x < 16.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 17 && line.x < 17.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 18 && line.x < 18.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 19 && line.x < 19.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 20 && line.x < 20.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 21 && line.x < 21.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 22 && line.x < 22.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 23 && line.x < 23.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}
    else if(line.x > 24 && line.x < 24.9)
{
     newColor = vec4(1.0,1.0,1.0,1.0);
}

else
{
    newColor = vec4(0.0,0.0,0.0,1.0);
}

fragColour = newColor;
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T17:07:12.643

除非绝对必要（至少这是我上次编写 glsl 着色器时的标准建议），否则您不应使用控制流（依赖于统一以外的其他东西）。在您的情况下，不需要控制流。使用`step`、`smoothstep`和`mix`乘法来避免控制流。

您的“if/else”代码段可以使用类似这样的东西（未经测试的代码）来实现：

`fragColor = mix(vec4(0.0, 0.0, 0.0, 0.0), vec4(1.0, 1.0, 1.0, 1.0), step(fract(line.x), 0.9));`

或使用纹理查找。纹理查找可能比数值计算更快，具体取决于硬件（和纹理大小）

请注意，使用“step”可能会在远处的表面上产生锯齿状的非抗锯齿边缘和噪点/摩尔纹图案。“OpenGL 橙皮书”（“OpenGL 着色语言”）有一些例子可以解释如何处理它。但是，使用纹理查找可能更容易。首先，您可以尝试使用“smoothstep”而不是“step”。

或者，或者，您可以在实体渲染的景观之上以线框模式重新绘制整个景观。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T17:28:21.380

这很容易通过简单地扔下投影纹理来完成。它甚至不必“投射”；只需根据您的`line`. 事实上，那些看起来很像是你的纹理坐标。因此，只需创建一个内部为白色，外部为适当宽度的黑色的纹理。您甚至可以将其设为单通道以节省内存。

当然，您将需要纹理在 S 和 T 方向上重复。

# ruby-on-rails - EC2 instance running Rails app becomes unreachable

> ID：13400858
> 
> 赞同：1
> 
> 时间：2012-11-15T15:36:32.533
> 
> 标签：ruby-on-rails, amazon-web-services, amazon-ec2

I have a rails app running on several EC2 instances (using instance storage, not EBS). Frequently (more often than it seems like it should), an instance becomes unreachable (cannot ping or ssh, and Amazon ELB reports it as out of service). However, in the AWS console the instance still shows up as "running." Rebooting the instance doesn't help -- once an instance gets into this unreachable state, I can reboot it successfully, but it continues to be unreachable after reboot. The only alternative is to terminate it and start a new instance.

Any ideas why this might be occurring? Unfortunately I can't access the logs on the instance once it becomes unreachable, and my monitoring software does not show any spikes in any particular metric right before the instance becomes unreachable. The System Log for the instance that I can access through the AWS console is not informative (it seems to boot up fine).

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:42:12.833

没有看到服务器很难回答。但是，您可以通过停止实例的硬盘驱动器、从中卸载 EBS 驱动器并将其附加到活动实例来检查该实例的硬盘驱动器。然后，使用实时实例查看系统日志。我会查看硬盘驱动器是否已填满（这很容易占用服务器）。如果没有，我会查看系统日志以查看是否报告了错误。

# magento - I really no understand why where use Resource

> ID：13400863
> 
> 赞同：0
> 
> 时间：2012-11-15T15:36:44.977
> 
> 标签：magento

I really no understand why where use Resource.

I do this command (find and grep), and get file in Resource folder:

```
find . -type f | grep -P '/Resource/' 
```

Basically Catalog use

```
app/code/core/Mage/Catalog/Model/Resource/Eav/Mysql4 
```

Why not is it?

```
app/code/core/Mage/Catalog/Model/Mysql4 
```

In a few moments I thought would be that it uses EAV, but not, because Customer use EAV and no such this hierarchy.

Thanks everyone.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T22:16:57.790

Magento 的一位“老前辈”可能会提供更多关于更改背后原因的背景信息。Magento 核心团队在 Magento 1.6 中引入了 MMDB，以支持多个数据库后端。其中一项更改涉及围绕资源模型进行重构，如果资源模型仅支持一种类型的数据库，则使用“Mysql4”命名资源模型没有多大意义。[RDBMS 指南](http://www.magentocommerce.com/images/uploads/RDBMS_Guide.pdf)中的介绍有更多关于此更改的背景信息。

所以简短的回答是“Mysql4”是老派，而“资源”是新的热点，但它们几乎都有相同的目的。你会看到很多核心模块都有两种风格的资源模型。虽然这些`Mysql4`版本是为了兼容性，但它们只是扩展了它们的`Resource`等价物而不添加功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:51:07.527

该模块使用一个文件夹，该文件夹在 config.xml 中设置：

```
<global>
    <models>
        <catalog_resource>
            <class>Mage_Catalog_Model_Resource</class>
            ...
        </catalog_resource>
    </models>
</global> 
```

# c++ - C sqrt == long int

> ID：13400864
> 
> 赞同：-2
> 
> 时间：2012-11-15T15:36:46.727
> 
> 标签：c++, floating-accuracy

I don't know why if I have the following code:

```
int main() {
    long int height_cat, number_worker_cats, number_helper_cats, height_tree;
    bool flag;
    scanf("%ld%ld", &height_cat, &number_worker_cats);
    for (number_helper_cats = 1; ; ++number_helper_cats) {
        for (height_tree = 1; (long int)pow(number_helper_cats + 1, height_tree) <= height_cat; ++height_tree) {
            if ((long int)(pow(number_helper_cats + 1, height_tree) - height_cat) == 0 && (long int)(pow(number_helper_cats, height_tree) - number_worker_cats) == 0) {
                flag = true;
                break;
            }
        }
        if (flag) {
            break;
        }
    }
 printf("%ld, %ld\n", number_helper_cats, height_tree);
} 
```

I'm searching for `number_helper_cats` and `height_tree` which `(number_helper_cats +1)^height_tree = height_cat` and `number_helper_cats^height_tree = number_worker_cats` where `height_cat` and `number_worker_cats` are `integers`.

For example if `height_cat = 216` and `number_worker_cats = 125`, the code will stop on `number_helper_cats = 5` and `height_tree = 3` since `(5+1)^3 = 216` and `5^3 = 125`.

But if I have the following code it doesnt work, loops forever, why?

```
int main() {
    long int height_cat, number_worker_cats, number_helper_cats, height_tree;
    bool flag;
    scanf("%ld%ld", &height_cat, &number_worker_cats);
    for (number_helper_cats = 1; ; ++number_helper_cats) {
        for (height_tree = 1; pow(number_helper_cats + 1, height_tree) <= height_cat; ++height_tree) {
            if ((long int)(pow(number_helper_cats + 1, height_tree)) == height_cat &&
                        (long int)(pow(number_helper_cats, height_tree)) == number_worker_cats) {
                flag = true;
                break;
            }
        }
        if (flag) {
            break;
        }
    }
printf("%ld, %ld\n", number_helper_cats, height_tree);
} 
```

Everything is `long int` and every height_cat and number_worker_cats for testcase are true for the operations, another example height_cat = 5764801, number_worker_cats = 1679616, number_helper_cats = 6 and height_tree = 8 because (6 + 1)^8 = 5764801, 6^8 = 1679616\. But again the first code runs well, and the second one loops forever. pow are precise I mean 6^3 = 216 and 5^3 = 125 right? :p

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:48:47.593

的结果`pow`是`double`，并且`double`在很多情况下，数字并不精确。要测试与 a 的相等性`double`，一种常用方法是

```
if (abs(pow(number_helper_cats + 1, height_tree) - height_cat)) < 0.001); // 0.001 is an arbitrary small number
{
     ...
} 
```

Aand 用于测试`<=`，您应该使用`pow(number_helper_cats + 1, height_tree) <= height_cat + 0.001`.

但是，我必须提到，您的代码无法使用我的 gcc 4.7.2 产生您在问题中提到的无限循环。您所有的循环都正常结束。

# vba - Range.SpecialCells 具有不同的结果

> ID：13400867
> 
> 赞同：3
> 
> 时间：2012-11-15T15:36:53.517
> 
> 标签：vba, excel, excel-2007

这是另一个奇怪的问题。

我有这段代码，它使用过滤器从一张表中获取数据，并使用该`Range.SpecialCells()`方法查找要复制和粘贴的适当行。但是，如果我使用`Rows().SpecialCells()`或者如果我使用了由行`SpecialCells`数返回的范围的行属性是错误的。这就是我的意思：

```
With Worksheets("ret-" & sNumRet)
    .EnableAutoFilter = True
    .AutoFilter.Range.AutoFilter Field:=3, Criteria1:=sSection
    iLast = Range("C1").End(xlDown).Row
    numRows = .Range("B2:B" & iLast).SpecialCells(xlCellTypeVisible).Cells.Count
End With 
```

此代码产生大约 8k 行，这是一个有意义的数字。

```
With Worksheets("ret-" & sNumRet)
    .EnableAutoFilter = True
    .AutoFilter.Range.AutoFilter Field:=3, Criteria1:=sSection
    iLast = Range("C1").End(xlDown).Row
    numRows = .Rows("2:" & iLast).SpecialCells(xlCellTypeVisible).Rows.Count
End With 
```

结果是 4。

```
With Worksheets("ret-" & sNumRet)
    .EnableAutoFilter = True
    .AutoFilter.Range.AutoFilter Field:=3, Criteria1:=sSection
    iLast = Range("C1").End(xlDown).Row
    numRows = .Range("B2:B" & iLast).SpecialCells(xlCellTypeVisible).Rows.Count
End With 
```

结果也产生 4。这两个当然是错误的。我有 45k 行数据，我可以看到使用过滤器至少显示了几千行。这些陈述之间是否存在一些我缺少的含义？我希望它们在这里的上下文中几乎是等价的。

谢谢 ！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-15T15:59:05.010

这实际上与 无关`SpecialCells`，而是与 Excel 如何计算行数有关。 `Rows.Count`返回计数范围内每个连续`Area`的计数。例如，在立即窗口中：

```
? range("a2:a3,a5:a7").cells.Count 
```

返回 5

```
? range("2:3,5:7").rows.Count 
```

返回 2

```
? range("2:3,5:7").areas(1).rows.Count 
```

返回 2

```
? range("2:3,5:7").areas(2).rows.Count 
```

返回 3

如您所见，如果您不指定区域，则返回第一个区域。

要获得所有领域的答案，请遍历它们：

```
Sub CountRows()
Dim i As Long
Dim RowTotal As Long

With ActiveSheet.Range("2:3,5:7")
    For i = 1 To .Areas.Count
        RowTotal = RowTotal + .Areas(i).Rows.Count
    Next i
End With
Debug.Print RowTotal
End Sub 
```

# java - 将 Admob 6.2.1 SDK 添加到我的项目时遇到问题

> ID：13400868
> 
> 赞同：1
> 
> 时间：2012-11-15T15:36:53.363
> 
> 标签：java, android, xml, admob

我正在 API 9、2.3.3 上开发应用程序，然后我将构建更改为 4.0.3，因为由于 admob 的政策，除了 2.3.3 和 2.2 之外，我只安装了 4.0.3。

我曾尝试将 admob 嵌入到我的 Android 应用程序中，但从那以后一直失败。我终于在我的学校电脑上完成了它，它工作得很好。然而，我将我的项目导入到我自己的笔记本电脑中，试图编辑和添加更多代码，甚至没有编辑任何部分代码就开始出现许多问题。

我所知道的是我的学校电脑正在使用 eclipse indigo，而我正在使用 juno。是因为我没有正确导入我的代码还是我的 eclipse 版本或其他什么？这是我做的虚拟代码。

MainActivity.Java

```
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.main, menu);
    return true;
} 
```

XML

```
<com.google.ads.AdView android:id="@+id/adView"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    ads:adUnitId="the right code"
    ads:adSize="BANNER"
    ads:loadAdOnCreate="true"/> 
```

显现

```
 <activity 
        android:name="com.google.ads.AdActivity"
        android:configChanges="keyboard|keyboardHidden|orientation|screenLayout|uiMode|screenSize|smallestScreenSize"/>
<uses-sdk
    android:minSdkVersion="8"
    android:targetSdkVersion="15" /> 
```

所以就有了。我查看了许多网站寻求帮助，但无济于事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:47:15.023

在 Eclipse 的 sdk 管理器中检查更新和安装的 sdk，并检查是否安装了目标的 admob sdk。

并且不要忘记将您的应用程序目标设置为 google apis xy

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T21:39:47.353

当您在计算机之间移动项目时，您必须重新导入内容（因为它们的文件路径已更改）。尝试查看您的导入并查看 SDK 是否仍被导入。

不管是不是，如果您使用的是 ADT 工具`r-17`及更高版本，那么您必须在主目录中创建一个`libs/`文件夹，并将 adMob SDK 的副本放在那里。

希望这能解决你的问题

# vba - VBA Word formatting Selection.typetext

> ID：13400869
> 
> 赞同：5
> 
> 时间：2012-11-15T15:37:00.443
> 
> 标签：vba, formatting, ms-word

I am still a beginner with this. Can you tell my why this is not formatting the selection?

```
Selection.TypeText "title"

With Selection

        .Font.Bold = True
        .Font.Name = "Arial"
        .Font.ColorIndex = wdDarkBlue
        .ParagraphFormat.Alignment = wdAlignParagraphCenter
        .ParagraphFormat.SpaceAfter = 0
End With 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T15:58:24.523

它确实格式化了文本，但只有在命令*之后添加的文本。*`With Selection`

更改顺序，放在`Selection.TypeText "title"`最后，它会起作用。:)

# tfs - Hide PBIs that are "Done" from Sprint Board in TFS 2012

> ID：13400870
> 
> 赞同：3
> 
> 时间：2012-11-15T15:37:01.267
> 
> 标签：tfs

Is possible to hide "Done" pbis from the actual sprint board? For instance, if you not actually using Sprints, but want to continue to use the task board, once you complete a PBI (mark the state as done). I'd love it to vanish from the sprint board.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-18T03:58:09.583

[Team Foundation Task Board Enhancer](http://pascoal.net/task-board-enhancer/)是一个免费扩展，它提供了一个选项来折叠所有已完成的积压项目。可能是您可以得到的最接近的，而无需进行自己的自定义。

# google-chrome - Can you run multiple Chrome instances with different proxies?

> ID：13400871
> 
> 赞同：17
> 
> 时间：2012-11-15T15:37:03.030
> 
> 标签：google-chrome, proxy

I'm trying to run multiple instances of of Chrome with different proxies. Searching the web I've found that chrome supposedly supports 'chrome.exe --proxy-server="proxy:port" ' from the command line. But I've tried that and it doesn't work.

Is there any way to run multiple instances of Chrome with different proxies?

Thanks!

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2017-10-04T08:48:09.610

genkev 的回答是正确的。对于所有需要快速“复制和粘贴”解决方案的搜索引擎用户，请使用此链接目标（Windows）：

`"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --proxy-server="http://proxy01.your.proxy:3128" --user-data-dir="%LOCALAPPDATA%\Google\Chrome-proxy01\User Data"`

Chrome 将自行创建这个新文件夹“Chrome-proxy01”。有了这个，您可以使用不同的代理服务器拥有多个 chrome 快捷方式。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-22T00:52:28.313

如果您正在运行多个具有不同标志的 chrome 实例，我认为您需要[为 --user-data-dir 指定不同的路径](http://www.chromium.org/user-experience/user-data-directory)。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2022-02-01T08:41:58.437

如上一个答案所述，这样做的方法是：

*   传递 --proxy-server 参数
*   使用不同的代理服务器为每次启动传递**不同的用户数据目录路径**

```
"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --proxy-server="http://proxy01.your.proxy:3128" --user-data-dir="%LOCALAPPDATA%\Google\Chrome-proxy01\User Data" 
```

对于`%LOCALAPPDATA%\Google\Chrome-proxy01\User Data`使用不同代理的任何新实例，文件夹需要是唯一的。所以`%LOCALAPPDATA%\Google\Chrome-proxy02\User Data`用于第二次发射，`%LOCALAPPDATA%\Google\Chrome-proxy03\User Data`第三次发射等。

我还强烈建议使用该`--no-first-run`标志来摆脱烦人的弹出窗口，该弹出窗口会在每次使用新数据目录启动它时询问您是否要将 chrome 设置为默认浏览器

```
"C:\Program Files (x86)\Google\Chrome\Application\chrome.exe" --proxy-server="http://proxy01.your.proxy:3128" --user-data-dir="%LOCALAPPDATA%\Google\Chrome-proxy01\User Data" --no-first-run 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-08-03T22:04:37.463

是的，你可以运行它。为此：

1.  在要使用代理的配置文件中安装扩展[SwitchyOmega 。](https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif?hl=en)
2.  使用您想要的名称创建一个配置文件并输入您希望使用的代理的详细信息。
3.  使用应用更改按钮保存更改。
4.  使用 chrome 右上角的扩展按钮切换到您的代理。

此外，我还附上了扩展截图：

[![在此处输入图像描述](../Images/d98aed928ce424a300ec53f1fd5caf8f.png)](https://chrome.google.com/webstore/detail/proxy-switchyomega/padekgcemlokbadohgkifijomclgjgif?hl=en)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-10-05T15:25:01.913

截至 2014 年 10 月 5 日，运行多个版本或 Chrome 实例的最简单方法是使用 Google Chrome Portable，下载地址：http: [//portableapps.com/apps/internet/google_chrome_portable](http://portableapps.com/apps/internet/google_chrome_portable)

目前我正在运行 4 个独立的 Google Chrome v37.0.2062.124 实例。安装了一个实例，另外三个 Google Chrome 实例是可移植的。

这是打开所有 4 个 Chrome 实例时我的 Windows 7 任务栏的样子：http: [//image.bayimg.com/a024621496637cbdc2ad85324ed5e8e07b9f5453.jpg](http://image.bayimg.com/a024621496637cbdc2ad85324ed5e8e07b9f5453.jpg)

如果您想在 Google Chrome 启动后更改 Windows 任务栏上显示的 Google Chrome 图标，那么您应该点击此链接： [https ://superuser.com/questions/613851/is-it-possible-to-customize-任务栏图标，如果这样的话](https://superuser.com/questions/613851/is-it-possible-to-customize-taskbar-icons-if-so-how)

答案在评论中给出：您需要使用 Resource Tuner（使用试用版）或 Resource Hacker（免费）更改存储在 chrome.dll 中的图标。

当您运行完全独立的**Chrome**实例时，您可以通过该特定 Chrome 实例的 Chrome 设置**使****这些**单独的**Chrome**实例使用不同的代理。

 ***** * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-10-01T16:08:47.710

您可以创建多个“人”（设置>管理其他人>添加人）。然后，您可以为每个人打开一个实例（您不必为其他“人”登录谷歌）。然后，您可以为该实例配置代理。要获取图片中显示的菜单，只需单击右上角的个人资料图标。 [![在此处输入图像描述](../Images/d15e910fd85b856741c0951a00164489.png)](https://i.stack.imgur.com/BxmOn.png)****

# javascript - 检查弹出窗口是否以电话友好的方式关闭（检查 .closed 的值不起作用）

> ID：13400872
> 
> 赞同：3
> 
> 时间：2012-11-15T15:37:04.247
> 
> 标签：javascript, android

如果我使用 创建了一个弹出窗口`newWindow = window.open(url, name, dimensions)`，我如何检查窗口是否以适用于移动浏览器的方式关闭？

我尝试使用`if(newWindow.closed)`，这适用于 PC 上的 Chrome，也适用于 iPhone。但是，在我测试过的安卓手机上，这不起作用；弹出窗口关闭，但 newWindow.closed 不正确。**我应该使用什么测试来检查弹出窗口是否关闭？**

额外信息：在 Android 手机上访问我的页面时，我使用[jsconsole](http://jsconsole.com/?%3Alisten)`console.log(newWindow)`在弹出窗口关闭之前和之后记录 newWindow（带有）。当弹出窗口打开时，它在控制台中显示为`[object DOMWindow]`，一旦窗口关闭`console.log(newWindow)`，就会在 jsconsole 中打印一个空行。请注意，打印空白行与 jsconsole 的显示方式不同`null`，`undefined`或者`false`，它们的显示方式与我刚刚输入的完全相同。此外，尝试`if(newWindow.closed || !newWindow)`并不比刚刚`if(newWindow.closed)`做的好。似乎`newWindow`弹出窗口关闭后变成什么样的对象，它仍然是真实的。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-20T19:27:21.877

检查`if(newWindow.closed != false)`而不是`if(newWindow.closed)`解决我的问题并在我测试过的所有平台上工作。问题的原因似乎是在某些 Android 手机上，最终的值`newWindow.closed`不是`undefined`关闭`true`弹出窗口时的值。但是，无论您使用的是什么平台，都可以在窗口打开时`newWindow.closed`可靠地设置为。`false`

可以在此处找到一些可能解释此错误背后原因的相关讨论（尽管我无法确认其真实性）： [http ://code.google.com/p/android/issues/detail?id=21061](http://code.google.com/p/android/issues/detail?id=21061)

# c++ - 私有成员“current”的值在成员函数结束时异常更改

> ID：13400875
> 
> 赞同：2
> 
> 时间：2012-11-15T15:37:15.620
> 
> 标签：c++, private-members

我在课堂上的私有变量上遇到了一个非常奇怪的行为。

问题描述：类lapi_xmeef_table中私有成员“current”的值在成员函数结束时异常改变。

类 1：lapi_xmeef 类 2：lapi_xmeef_table（是 lapi_xmeef 的朋友，因此可以直接或通过公共接口访问 lapi_xmeef 中的私有变量）

```
class lapi_xmeef {
  friend class lapi_xmeef_table;
  ...
  short bias_frag_layer;
  int bias_frag_index;
  ...
  public:
    // Add constructor
    lapi_xmeef();
    // Add public interface
    ...
    void bias_frag(int *li, int *fi);

};

class lapi_xmeef_table {
  private:
    lapi_xmeef *current;
    ...
  public:
    lapi_xmeef_table(Lapi_ctl *ctl, int num_layer);
    ...
    void get_bias(int *li, int *fi);
    ...
}; 
```

lapi_xmeef_table 中称为“current”的私有变量是当前迭代器（lapi_xmeef 类）。

成员函数除了只读之外什么都不做，它从其私有成员中复制两个值。如下图所示

```
void lapi_xmeef::bias_frag(int *li, int *fi)
{
   *li = (short)bias_frag_layer;
   *fi = bias_frag_index;
} 
```

问题函数和变量：

```
void lapi_xmeef_table::get_bias(int *li, int *fi)
{
// current is (lapi_xmeef *) 0x2a9a93c7f0 (a valid address)
  current->bias_frag(li, fi);
// current is (lapi_xmeef *) 0x2a000000df (a invalid address)
} 
```

调用函数前 current is (lapi_xmeef *) 0x2a9a93c7f0 (a valid address) 之后，current is (lapi_xmeef *) 0x2a000000df (a invalid address)

每次调用成员函数时都不会发生这种情况，在这种奇怪的行为之前，它被多次调用而没有问题。

下次访问 current 中的成员时，由于取消引用无效地址而发生 seg 错误。

现在我的解决方案是在调用其成员函数之前有一个临时指针来保存 current 的值，然后在调用后恢复它。有用。

```
void lapi_xmeef_table::get_bias(int *li, int *fi)
{
  lapi_xmeef *temp = current;
  current->bias_frag(li, fi);
  current = temp;
} 
```

但我真的很想知道为什么以及如何解决它，而不是这种棘手的方式。

为什么私有变量的值被改变，预期是相同的？

访问私有变量的方式有什么问题吗？是需要前缀还是需要点“this”？我试过这个->current->bias_frag(li, fi); 这没有帮助。

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:49:45.810

可能发生的情况是您正在进行意外的*指针别名*。`li`or指针之一`fi`指向与 相同的位置`&current`，因此当您在 内部取消引用并分配给它们时`bias_frag`，您会不小心覆盖`current`它或它的一部分。

要修复它，您需要通过向后跟踪数据流来弄清楚为什么会得到别名指针。对于初学者，提高编译器的警告级别并修复所有警告。

不要试图通过保存`current`和恢复它的价值来解决它——这只是一个更大的问题的绷带，而不是一个长期的解决方案。你已经进入了未定义行为的领域，试图把自己挖出来是行不通的。

# python - 最长子列表的长度？

> ID：13400876
> 
> 赞同：29
> 
> 时间：2012-11-15T15:37:16.680
> 
> 标签：python, list

> **可能重复：**
> [Python 在列表中选择最长字符串的最有效方法？](https://stackoverflow.com/questions/873327/pythons-most-efficient-way-to-choose-longest-string-in-list)

我有一个清单 L

```
L = [[1,2,3],[5,7],[1,3],[77]] 
```

我想返回最长子列表的长度而不需要遍历它们，在本例中为 3，因为 [1,2,3] 的长度为 3，它是四个子列表中最长的。我试过 len(max(L)) 但这并没有达到我想要的效果。有什么方法可以做到这一点，还是我唯一的方法是循环？

* * *

## 回答 #1

> 赞同：61
> 
> 时间：2012-11-15T15:38:13.463

`max(L,key=len)`将为您提供长度最长的对象（`[1,2,3]`在您的示例中）-要实际获得长度（如果这是您所关心的全部），您可以这样做`len(max(L,key=len))`有点难看-我将其分成两行。或者您可以使用 ecatamur 提供的版本。

所有这些答案都有循环——在我的例子中，循环是*隐式*的，这通常意味着它们将在优化的本机机器代码中执行。如果你想一想，你怎么不看每个元素就知道哪个元素最长？

* * *

最后，请注意，这`key=function`不是特定于`max`. 许多 python 内置函数 ( `max`, `min`, `sorted`, `itertools.groupby`,...) 使用这个特定的关键字参数。绝对值得花一点时间来了解它是如何工作的以及它通常做什么。

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-15T15:38:17.940

尝试理解：

```
max(len(l) for l in L) 
```

# spring - 使用 spring-aop 进行日志记录

> ID：13400878
> 
> 赞同：1
> 
> 时间：2012-11-15T15:37:21.147
> 
> 标签：spring, logging, aop, spring-aop

我正在尝试向我的应用程序添加某种跟踪。它会像这样工作：我在我的配置中设置包名称，并记录对该包中类的公共方法的所有调用。

我不能在这里使用编织（由于一些技术原因），所以我尝试使用spring-proxy。我的切入点

```
execution(public *  com.my.package.*.*(..)) 
```

它工作正常。但是什么Spring使用Proxy或者CGLIB来代理类，所以每个类至少应该

*   有无参数构造函数
*   所有方法都应该是某个接口的实现

无法代理其他类。我可以不记录它们。但是 spring 创建了代理并破坏了我的应用程序。

我怎么能告诉spring：“如果它没有无参数构造函数并且它的某些方法不是接口的实现，请不要代理这个类”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T19:31:14.367

不确定您的问题的答案，但是，另一种进行跟踪的方法是使用注释：

```
public @interface Monitor {
} 
```

方面：

```
public aspect MonitoringAspect {
pointcut methodToMonitor() : execution(@Monitor * *(..));
} 
```

用法：

```
@Monitor
public void methodToBeMonitored() {
} 
```

这样你只会影响你想要的方法。我想对于一个大项目，这可能行不通，因为您想监视许多方法。

# ios - Xcode 注释取消注释问题

> ID：13400879
> 
> 赞同：8
> 
> 时间：2012-11-15T15:37:21.483
> 
> 标签：ios, xcode

我是 Xcode 的新手，发现一些令人沮丧的事情。我选择了几行代码并将它们注释掉。例如。

```
//      NSString* u = __txtUsername.text;
//      NSString* p = __txtPassword.text; 
```

然后我可以重新缩进代码，注释代码如下

```
 //      NSString* u = __txtUsername.text;
        //      NSString* p = __txtPassword.text; 
```

现在，如果我尝试取消注释注释代码 Xcode 会产生如下内容

```
//     //      NSString* u = __txtUsername.text;
//     //      NSString* p = __txtPassword.text; 
```

实际上，与其删除它，不如在开始`//`时添加更多内容，并从注释的重新缩进代码中删除确实令人沮丧。`//``//`

有什么解决办法吗，或者我做了一些可笑的事情？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-15T15:41:55.913

你是对的，Xcode 是愚蠢的。如果您遇到这种情况，请继续按 cmd-[ 将文本一直带到行首，然后取消注释，它应该可以工作。为什么 Xcode 不只是删除一行中的第一个 // 实例，这超出了我的理解。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-12-13T19:10:51.757

编辑器->结构->取消注释选择

如果选择中包含**没有注释**的行，则不会显示该选项

评论必须出现**在第一个位置**才能被视为这样

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-15T15:39:48.483

把`//`一直留到左边，否则取消注释功能确实不起作用。

如果您需要多行注释，最好的选择可能是使用以下语法：

```
/* 
    NSString* u = __txtUsername.text;
    NSString* p = __txtPassword.text;
*/ 
```

然后你只需要删除`/*`并`*/`取消注释代码块。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-15T15:39:48.863

如果我必须注释掉我使用的大量代码：

```
#if 0

code
code
code

#endif // 0 
```

如果代码量很小，我会手动完成。与某些工作相比，这几乎不是体力劳动，所以我不介意。

我从未在任何 IDE 上使用过*(un)comment-out命令。*

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-23T03:18:09.223

只要您只突出显示被注释掉的确切行，“取消注释”功能就可以正常工作。如果您在未注释代码的范围之外突出显示注释代码，那么它会将其视为您正在“添加”已注释掉的代码。如您所知，如果有意义的话，它会重新缩进并重新注释掉已经注释掉的代码。不应该有任何需要弄乱缩进...... Xcode应该把所有东西放回正确的地方。

不过，我喜欢 woz 的“/*... */”概念。如果有一个键盘快捷键可以使该方法更快一点，我会更喜欢它。快速突出显示行中的任何位置，然后按“cmd /”键击对我来说似乎不太精确和更快。

不确定自此发布以来这是否已在 Xcode 上修复，但我想我会对此发表评论。

祝大家好运。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-01-07T17:01:36.703

对于那些不想打字三遍，只是正常`cmd + /`工作的人，试试这个，我喜欢它。

[https://apps.apple.com/us/app/comment-here/id1406737173?mt=12](https://apps.apple.com/us/app/comment-here/id1406737173?mt=12)

下载它，打开它。它告诉你如何安装它。同样正如最后一步所说，删除以前的键盘映射，并分配一个新的。

# objective-c - 如何创建像 NSTableView 一样的 iO？

> ID：13400880
> 
> 赞同：1
> 
> 时间：2012-11-15T15:37:22.957
> 
> 标签：objective-c, uitableview, nstableview, xcode4.5, nstableviewcell

**`NSTableView`我想用 iOs 的“感觉”来创造一个好看的外观。**我创作的每一件`NSTableView`作品看起来都像是 90 年代后期的作品，在我看来感觉很糟糕。

*我知道有一些 iOs 行为在 Mac 上可能不需要，但它是一个很小且非常具体的表，只有一个列，我希望至少具有 iOs 的一些功能......*

我开始创建一个44 像素高度，上面`NSCustomCell`有`NSViews`不同元素（图片、标题、副标题）。它有点复制 的*外观*，`UITableView`但我不能自己**复制所有的运动模式**（弹性等）。是否有任何类/库可以帮助我完成此任务？或者有没有人以前做过这方面的工作并可以分享他的一些经验？

编辑：对于*“一些功能”*，我的意思是“动量”、“弹性”和类似于“拉动刷新”功能的东西。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:11:28.413

`NSTableView`并且在 OS X 10.7+ 上启动应用程序时自动`NSOutlineView`拥有*所有这些功能*（即使使用 10.6 SDK 编译并以 10.5 为目标）。并且考虑到您使用 NSView 作为单元格（仅在带有 10.7+ SDK 的 OS X 10.7+ 上可用）我没有看到问题，您必须自动拥有“动力”和“弹性”。试试 TableViewPlayground 演示，看看你做错了什么。

ps 10.6 有“动力”，但没有“弹性”。

# sql - 如何从选择中获取值并将其用作 sql 中的变量？

> ID：13400884
> 
> 赞同：0
> 
> 时间：2012-11-15T15:37:24.557
> 
> 标签：sql, sql-server, stored-procedures

我正在编写一个带有两个参数的 sql proc：@id 和 @id_group。

考虑这张表`group_info`

```
ID   ID_Group    SupercededBy   Superceded   status
1    1           null           null         H
2    1           null           null         U 
```

给定这些参数：

@id = 2 @id_group = 1

`The first thing`我需要做的是将行设置`SupercededBy`为`@id`, where `ID=@id and id_group=@id_group and status='H'`。

这是我写的陈述：

```
 update group_info
      set supercededby = @id
      where id_group=@id_group and status='H' 
```

`The second thing`我需要做的是将行设置为刚刚`Superceded`从上述语句更新的行。`id``SupercededBy`

所以在这个例子中，`row 2`'s`Superceded`应该被更新为`1`.

**但是如何写语句呢？**我猜这些陈述可能是这样的：

```
update group_info
      set superceded = **old_id**
      where id=@id 
```

我知道如何获得`old_id`，在这里

```
select id
    from group_info
    where id_group=@id_group and status='H' 
```

**但是我怎样才能使用上面的值和`select`语句的值呢？`insert``update``old_id`**

决赛桌应该是

```
ID   ID_Group    SupercededBy   Superceded   status
1    1           2              null         H
2    1           null           1            U 
```

我正在使用 MS SQL Server。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:42:44.047

`SELECT @variable = columnName FROM ...`可以这样使用语句：

```
DECLARE @oldId INT

select @oldId  = id
    from group_info
    where id_group=@id_group and status='H'

update group_info
      set superceded = @oldId 
      where id=@id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:58:24.357

有了这个定义

```
The second thing I need to do is to 
set the row’s Superceded to the id whose SupercededBy has been 
just updated from the above statements. 
```

这是一次大规模手术

```
update group_info
set supercededby = @id
where id_group=@id_group and status='H'

Select ID,supercededby  
into #tmp
from group_info
where id_group=@id_group and status='H'

update group_info
set superceded = #tmp.ID
from #tmp 
where group_info.ID=#tmp.supercededby

Drop table #tmp 
```

# java - JTable 未知错误，怎么办？

> ID：13400885
> 
> 赞同：0
> 
> 时间：2012-11-15T15:37:28.737
> 
> 标签：java, swing, user-interface, loops, jtable

嗨，伙计们，我需要为一个项目制作一个表格，并且我收到了很多错误，例如“非法类型开始”、“预期”以及很多括号和分号也丢失了，你能帮帮我吗？

这个想法是在一张表中显示教师对象中的所有元素......谢谢

```
 import javax.swing.*;
    import java.awt.*;
    import java.awt.event.*;

    public class DisplayTeachers extends JFrame
    {
private JTable table;
private JFrame f;
private int i = EnterTeacher.getArrSize();

public DisplayTeachers()
{
    setLayout(newFlowLayout());
    String[] columnNames =  {"Name", "Surname", "ID", "Pay", "Subject"};

    for (int count = 0; conut <= i; count++)
            {
    Object[][] data = {

            {
                subteach[i].getName(),
                subteach[i].getSurname(),
                subteach[i].getID(),
                subteach[i].getPay(),
                subteach[i].getSubjectID(),
            };

                      }
            };

table = new JTable (data, columnNames);
table.setPreferredScrollableViewportSize(new Dimension(550, 500));
table.setFillsViewportHeight(true);

JScrollPane sp = new JScrollPane(table);

f = new JFrame(Teachers);

f.add(scrollPane);
f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
f.setSize(550,400);
f.setVisible(true);

}

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T15:38:07.133

您的代码中的问题之一是 for 循环声明末尾的分号：

```
for (int count = 0; conut <= i; count++);
            { 
```

从 for 循环中删除分号

```
for (int count = 0; conut <= i; count++)
            { 
```

# c# - Javascript API 中的所有功能都包含在 XAML/C# API 中吗？

> ID：13400892
> 
> 赞同：1
> 
> 时间：2012-11-15T15:37:45.107
> 
> 标签：c#, javascript, xaml, windows-8

对于 Windows 8 和 RT，JavaScript API 中的所有功能是否也在用于 Windows 8/RT 开发的 XAML/C# 中？我听说它补充了大量的 API 功能，但不是 100%。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:55:50.057

是和否：

1.  是的，大多数 API 范例都是相同的。
2.  不，它们被称为不同的东西。
3.  不，它们的调用方式不同。
4.  不，它们并非都以相同的方式运行（返回值等）。

由于 JS 主要在 HTML 之上运行，并且 JS 是单线程的，并且是松散类型的，并且具有基于 lambda 和闭包/范围传递的传统，而不是传统的类构造，DOM 库和特性是也不同于 C# + XAML。

所以问题归结为您在谈论什么：
如果您的问题是：
“*我可以通过特定于 MS 的库以我选择的语言访问 Windows RT 功能吗？* ”
答案是肯定的。

如果您的问题是：
“*我可以在 JS/HTML 中做所有我可以在 C#/XAML 或 C++ 中做的事情吗？* ”
答案是否定的。

如果您的问题是：
“*我对语言 X 中 WinRT 方法调用/API 占用空间的了解是否直接翻译
（即：[CTRL+X|CTRL+C],CTRL+V/逐字）为语言 Y？* ”
答案没有。

因此，充分利用这一点的关键是了解什么是 RT 规范的一部分，哪些不是。
例如，XBox360 控制器支持：
在 JS 中不支持（至少不是我上次检查规范时——在开发版本期间）。

为什么不？
它不是 WinRT 支持的部分，ergo，不是 RT 库的一部分，ergo，无法从 JS RT 库访问。
但是在 C# 或 C++ 中使用 DirectInput/XInput，在 RT 应用程序中，您可以完全支持 360 控制器。

另一方面，WinRT 库中实际支持的所有内容（文件访问、网络摄像头/音频访问、Promises 等）在库内部都是可用的（可访问/以特定语言的方式运行），而与语言无关，并且在方法调用方面都以大致相同的速度运行（因为每种语言基本上都有一个用于访问 C++ 实现的包装器），但不一定是最终运行时（网络摄像头应用程序的 HTML5 画布应用程序可能比一个 C++ 应用程序......毫不奇怪）。

# c# - 将 VBA 代码注入 Excel 资源文件

> ID：13400893
> 
> 赞同：0
> 
> 时间：2012-11-15T15:37:46.200
> 
> 标签：c#, excel

假设我有一个 C# 项目，它有一个 Excel 工作簿作为资源，包含一些通用 VBA 模块。

在注入一些特定于客户端的 VBA 代码后，我需要提供该文件。你会推荐哪些图书馆来做这件事，你有没有为此目的的经验？

另外一个问题是，是否有任何 C# 工具允许在工作簿在内存中时运行宏？

提前谢谢了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:52:08.287

您可以通过`Excel Interop`和`VBE Interop`

我在 VBA 组件中添加如下：

```
 ExcelApp.VBE.ActiveVBProject.VBComponents.Add(Microsoft.Vbe.Interop.vbext_ComponentType.vbext_ct_StdModule).CodeModule.AddFromFile(...) 
```

然后我按如下方式运行它：

```
 ExcelApp.Run(YOUR MACRO NAME) 
```

# sql - 了解sql查询时间

> ID：13400896
> 
> 赞同：2
> 
> 时间：2012-11-15T15:37:51.357
> 
> 标签：sql, performance, oracle

我正在使用一个现有的 Oracle 数据库（我没有构建它，并且对它的表结构一无所知）。有些查询非常快，而其他看似非常相似的查询却非常慢。例如

```
SELECT a.price, c.banner_id, c.short_name
FROM ret_price_current a
  JOIN ret_store b ON a.store_id = b.store_id
  JOIN ret_banner c ON b.banner_id = c.banner_id
  JOIN ret_store2cbsa_csa d ON a.store_id = d.store_id
WHERE rownum<3

(1.09, 74, 'Safeway')
(1.09, 74, 'Safeway')
that took 0.243073940277 seconds 
```

但是如果我添加一个看似简单的 WHERE 条件：

```
SELECT a.price, c.banner_id, c.short_name
FROM ret_price_current a
  JOIN ret_store b ON a.store_id = b.store_id
  JOIN ret_banner c ON b.banner_id = c.banner_id
  JOIN ret_store2cbsa_csa d ON a.store_id = d.store_id
WHERE c.banner_id = 74
  AND rownum<3 
```

它已经运行了很多分钟而没有返回。到底是怎么回事？（作为参考，ret_price_current 有大约 3 亿个条目，而其他条目要小得多。）我想这与索引有关——有人可以指点我一本关于数据库算法的书（比如查询实际上是如何在后端工作的）所以我可以理解 wtf 是怎么回事吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-19T07:31:04.533

原因是在输出行时会在行上生成 ROWNUM。

您的第一个查询没有标准，因此它将吐出前 3 行并完成。您通常可以找到任何匹配得非常快的 3 行。

您的第二个必须找到符合条件的 3 行才能停止（并且它可能永远找不到这 3 行）。

查询完全不同，因此执行时间不同。

让它快速运行的方法是索引 c.banner_id （事实上，你所有的 FK）。

哎呀-刚刚注意到另一个答案的时间戳。无论如何，我将把它留在这里，因为它确实回答了问题，其中一条评论也是如此。

# objective-c - 鼠标事件在 OS X 中不起作用（Objective-c）

> ID：13400898
> 
> 赞同：1
> 
> 时间：2012-11-15T15:37:58.647
> 
> 标签：objective-c, macos

我有`NSOpenGLView`

。H

```
#import <Cocoa/Cocoa.h>

@interface MainOpenGLView : NSOpenGLView <NSWindowDelegate, NSSharingServiceDelegate, NSSharingServicePickerDelegate> 
@end 
```

.m

```
#import "MainOpenGLView.h"
@implementation MainOpenGLView

- (id)initWithCoder:(NSCoder *)coder {
    self = [super initWithCoder: coder];
    return self;
}

- (void)mouseDown:(NSEvent *)theEvent {

    NSLog(@"mouse down");

}
@end 
```

而且 mouseDown 方法不起作用。所有其他鼠标事件也是如此。我究竟做错了什么？

# java - Java - 获取触发鼠标事件的按钮名称

> ID：13400914
> 
> 赞同：1
> 
> 时间：2012-11-15T15:38:27.453
> 
> 标签：java, events, mouse, listeners

我有一个由几个类组成的 Java 程序。

**现在，我在名为Application**的类中制作了 Java 程序的接口。我在那里定义了几个按钮。

这就是我将鼠标侦听器添加到**Application**类中的按钮的方式：

我有另一个名为**DrawingCanvas**的类，其中包含许多鼠标事件处理程序。这些事件处理程序之一是 mousePressed。这是mousePressed的代码：

mousePressed 的问题是它无法识别按钮名称，例如“Button_Square”、“Button_Rectangle”等。这是因为这些按钮已在**Application**类中声明，而不是在**DrawingCanvas**类中声明。

请问如何获取触发鼠标事件的按钮的名称？不要忘记声明按钮的类与实现mouselisteners 和mousemotionlisteners 的类不同。谢谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:33:58.343

首先，您可以制作一个 DrawingCanvas 并将其作为应用程序类中的一个字段；在这里我要调用它`canvas`。现在，如果你所有的按钮做不同的事情，你可以给他们所有不同的 MouseListener：

```
Button_Rectangle.addMouseListener(new MouseListener()
{
    public void mousePressed(MouseEvent e)
    {
           if(!e.isControlDown())
           {
                 canvas.Shapes.add(new Rectangle(e.getX(), e.getY()));
           }
    }
    //handle other events, or don't directly implement MouseListener

});

Buuton_Circle.addMouseListener(new MouseListener()
{
    public void mousePressed(MouseEvent e)
    {
           if(!e.isControlDown())
           {
                 canvas.Shapes.add(new Circle(e.getX(), e.getY()));
           }
    }
    //handle other events, or don't directly implement MouseListener

}); 
```

很快...

无需通过使用不同的对象来确定来源。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T16:06:10.487

只要您要创建 8 个不同的侦听器，请使用 JButton 区分它们。

```
Button_Square.addMouseListener(new DrawingCanvas(Button_Square));
Button_Square.addMouseMotionListener(new DrawingCanvas(Button_Square));

Button_Rectangle.addMouseListener(new DrawingCanvas(Button_Rectangle));
Button_Rectangle.addMouseMotionListener(new DrawingCanvas(Button_Rectangle));

Button_Circle.addMouseListener(new DrawingCanvas(Button_Circle));
Button_Circle.addMouseMotionListener(new DrawingCanvas(Button_Circle));

Button_Triangle.addMouseListener(new DrawingCanvas(Button_Triangle));
Button_Triangle.addMouseMotionListener(new DrawingCanvas(Button_Triangle)); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-12-19T22:09:39.467

您可以阅读在按钮中设置的文本。如果该文本是唯一的，它将识别按钮。以下是我用来识别和控制 JToggleButtons 的逻辑。

请注意，一旦您拥有 Abstract 按钮，您就可以使用该按钮执行您想要的操作（例如获取/设置背景颜色），而无需解析 text 属性。

例子：

```
void PrintEventProperties(java.awt.event.MouseEvent evt) {
    AbstractButton EventSource = (AbstractButton)evt.getSource();
    System.out.println("Toggled on? " + EventSource.isSelected() );
    System.out.println("ID/text=" + EventSource.getText() );
    System.out.println("Color=" + EventSource.getBackground() );
} 
```

# ios - 访问安全 Web 服务器上的文档

> ID：13400918
> 
> 赞同：0
> 
> 时间：2012-11-15T15:38:33.310
> 
> 标签：ios, xcode, security, webserver, html-parsing

我正在尝试构建一个 iPad 应用程序来从 Web 服务器下载和显示文档（pdf、ppt、doc 等）。目前，它通过解析`hpple`服务器上的 HTML 结构（使用 ）来做到这一点。

例如，文件保存在：

```
Http://myserver.com/myFolders/myFiles/ 
```

应用程序转到该位置并使用 X-Path 查询遍历树，例如

```
"/html/body/ul/li/a" 
```

然后它将找到的任何文档下载到 iPad 上进行显示。

到目前为止，这工作得很好，但服务器是公开可访问的。

我的问题是，我将如何使用安全服务器做类似的事情？例如，是否可以对服务器进行密码保护，使用 iPad 上的用户名/密码连接到服务器并使用相同的系统？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-13T10:58:03.323

最后我决定不解析 HTML，因为似乎没有直接的方法可以做到这一点。相反，这些文档保存在 ASP.Net 服务器上，访问需要身份验证。

很高兴知道如何通过遍历 HTML 来做到这一点，但没什么大不了的。

# javascript - asp.net 中的确认消息框和页面重定向

> ID：13400919
> 
> 赞同：0
> 
> 时间：2012-11-15T15:38:34.073
> 
> 标签：javascript, redirect, navigation, confirm

我的 .aspx 文件中有以下 javascript 代码

```
<script type="text/javascript">

    function checkValidation() {

        if (confirm("Data is not saved") == true) {
            window.location.href = "http://www.google.com";             
            }
        else {
            window.history.back(-1);               
            }
    }
</script> 
```

当按下按钮时，调用上述方法，外部链接一切正常！！！但是，当我将语句更改为

```
window.location.href = "~/Company.aspx"; 
```

或者

```
window.location.href = '<%= Page.ResolveUrl("~/Company.aspx") %>'; 
```

链接不起作用。如果我尝试在我的项目中导航，链接将不起作用。我尝试了几个语句来使用 javascript 重定向到我的文件夹中的另一个页面。值得注意的是，有时 .aspx 文件不在同一级别。例如，我想为孩子导航到父母级别。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:47:58.153

试试这个：

```
window.location.href = '<%= ResolveUrl("~/Company.aspx") >'; 
```

或这个

```
window.location.href = '<%= ResolveClientUrl("~/Company.aspx") >'; 
```

希望这会有所帮助！

# ios - 有没有更好的方法在 iOS 应用程序中使用新的 Facebook 评论插件？

> ID：13400920
> 
> 赞同：2
> 
> 时间：2012-11-15T15:38:35.490
> 
> 标签：ios, facebook, facebook-comments

我看到了这个解决方案： [http ://suhinini.me/2011/05/24/embedding-facebook-social-comments-plugin-to-an-ios-application/](http://suhinini.me/2011/05/24/embedding-facebook-social-comments-plugin-to-an-ios-application/)

但还有其他解决方案吗？

使用FB SDK？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T18:21:06.713

还没有找到，所以不得不创建我自己的 :) 我个人等待 Facebook 提供他们自己的 SDK 解决方案，但是，AFAIU，没有。

# c++ - 错误：数组下标的类型“double * [double]”无效

> ID：13400921
> 
> 赞同：2
> 
> 时间：2012-11-15T15:38:40.563
> 
> 标签：c++, arrays, subscript

我正在尝试创建一个程序，它将所有实数放在一个数组中 - 数字的排序发生在一个单独的函数中 - 降序排列，然后打印出来。

以下是我目前拥有的程序，但根据编译器的说法，它有两个问题：（i）在第 22 行（`"return N[t];"`），我得到“ `error: invalid types 'double*[double]' for array subscript`”。
(ii) 在第 28 行 (" `cout << sort_array(Q[100]) << " " "`)，我得到 " `error: cannot convert 'double' to 'double*' for argument '1' to 'double* sort_array(double*)'`"。

我不太明白为什么会出现这两个错误，但我希望得到一些帮助来解决它们。

```
#include <iostream>
#include <cstdlib>

using namespace std;

double *sort_array (double *N) {
double t;
    int size=100, a, b;

for (t=0; t<size; t++)
        *N = rand()%250;

    for (a=1; a<size; a++) {
        for (b=size-1; b>=a; b--) {
            if (N[b-1] < N[b]) {
                t = N[b-1];
                N[b-1] = N[b];
                N[b] = t;
            }
        }
    }
    return N[t];
}

int main()
{
    double Q[100];
        cout << sort_array(Q[100]) << " ";
        cout << endl;

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T15:41:49.637

第一个错误是因为`N[t]`is a `double`（它的意思是“第 t 个元素`N`”），但是你的函数返回 a `double*`。实际上，您的函数看起来不应该返回任何东西。它对 指向的数据进行排序`N`，因此无需返回任何内容。您可能应该切换到`void`返回值。

第二个错误是因为`Q[100]`是 a `double`（它的意思是“ 的第 101 个元素`Q`，无论如何这是一个错误，因为最后一个元素`Q`是`Q[99]`，因为 C++ 中的数组索引从 0 开始，而不是 1），但是你的函数需要 a `double`。我假设你真正的意思是：

```
sort_array(Q) 
```

直接将指针传递给第一个元素。

请记住，在传递数组时，您只需要传递数组第一个元素的地址。在这种情况下，`Q`等价于`&Q[0]`但更容易编写。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:42:48.067

问题在于`sort_array(Q[100])`声明。这告诉编译器使用数组`sort_array`中的第 101 个双精度进行调用`Q`（实际上超出了范围）。您真的只想传递`Q`而不是`Q[100]`.

但是，请注意，`double*`例如传递 C 样式的数组会丢失长度信息，并且不是规范的 C++。相反，您可以使用它`vector`来携带数组和大小。

编辑：由于您正在就地修改数据，因此您的函数根本不需要返回任何内容。将其更改为 void 并在最后跳过返回。然后，您必须遍历向量/数组以打印出每个元素。`cout`不提供打印聚合的内置功能。

最后，[The Definitive C++ Book Guide and List](https://stackoverflow.com/questions/388242/the-definitive-c-book-guide-and-list)中的一本书可能会帮助您快速了解 C++ 概念。

# java - 如何为我的跨平台 Jar 调用特定于 OS X 的方法？

> ID：13400926
> 
> 赞同：5
> 
> 时间：2012-11-15T15:38:55.913
> 
> 标签：java, windows, macos, cross-platform

我有一个编译的可执行 JAR 文件在 Windows 平台上失败。

这样做的原因是因为我想正确集成某些特定于 OS X 的属性——例如**About window**。

即使我使用条件特别封锁了代码，JAR 仍然在`NoClassDefFoundError`执行的第一行就崩溃了。

```
if (isOSX()) {
    com.apple.eawt.Application application = com.apple.eawt.Application.getApplication();
    application.setAboutHandler(new com.apple.eawt.AboutHandler() {
        @Override
        public void handleAbout(com.apple.eawt.AppEvent.AboutEvent ae) {
            new AboutWindow();
        }
    });
    application.setDefaultMenuBar(MenuSystem.createMenu());
} 
```

是否可以将此代码包含在我的 JAR 文件中，以便我可以拥有一个一致的代码库？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2017-05-09T15:18:39.700

以[布赖恩的回答](https://stackoverflow.com/a/13400962/4660897)为基础，我能够使用以下代码使用 OS X 特定方法设置 Mac 停靠图标图像。与其他答案不同，此答案包含一个完整的示例，并且没有尝试将对象强制转换为 OS X 特定类对象的问题。

代码的作用：

1.  此代码不是导入 OS X 特定库，而是[`Class.forName(String)`](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName%28java.lang.String%29)用于获取`Class`与 OS X 特定类关联的对象。在此示例中，该`com.apple.eawt.Application`库用于设置停靠图标图像。
2.  [然后使用反射](https://stackoverflow.com/questions/37628/what-is-reflection-and-why-is-it-useful)来调用 OS X 特定类的方法。`getClass()`用于获取[`Application`](http://docs.oracle.com/javaee/6/api/javax/faces/application/Application.html)对象，`getMethod().invoke()`用于调用`getApplication()`和`setDockIconImage()`方法。

我已经包含了显示通常在 OS X 专有程序中使用的代码的注释，以明确反射代码正在替换什么。（如果您正在创建一个只需要在 Mac 上运行的程序，请参阅[如何更改 Java 程序的 Dock 图标？](https://stackoverflow.com/questions/6006173/how-do-you-change-the-dock-icon-of-a-java-program)了解设置停靠图标图像所需的代码。）

```
// Retrieve the Image object from the locally stored image file
// "frame" is the name of my JFrame variable, and "filename" is the name of the image file
Image image = Toolkit.getDefaultToolkit().getImage(frame.getClass().getResource(fileName));

try {
    // Replace: import com.apple.eawt.Application
    String className = "com.apple.eawt.Application";
    Class<?> cls = Class.forName(className);

    // Replace: Application application = Application.getApplication();
    Object application = cls.newInstance().getClass().getMethod("getApplication")
        .invoke(null);

    // Replace: application.setDockIconImage(image);
    application.getClass().getMethod("setDockIconImage", java.awt.Image.class)
        .invoke(application, image);
}
catch (ClassNotFoundException | IllegalAccessException | IllegalArgumentException
        | InvocationTargetException | NoSuchMethodException | SecurityException
        | InstantiationException e) {
    e.printStackTrace();
} 
```

[Although this code works, this method still seems to be a messy workaround, and it would be great if anyone has any other suggestions on how to include OS X specific code in a program used on Mac and Windows.]

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-15T15:40:35.663

您是否尝试过使用[Class.forName](http://docs.oracle.com/javase/6/docs/api/java/lang/Class.html#forName%28java.lang.String%29)动态加载周围的类？

```
Class.forName("com.myproject.ClassContainingApple"); 
```

这样，您可以在一个类中引用所有 Apple 特定的类，并将其动态加载到您的`isOSX()`分支中。您必须这样做，因为您无法加载引用其他不可用类的类 - 您必须确定您是否在 OSX 中，然后*才*加载引用仅 OSX 类的任何内容。

如果您有更多特定于操作系统的要求，一种可扩展的方法是在操作系统之后命名您的类，然后根据检测到的操作系统加载类名。例如调用你的类`WindowsExtensions`，`OSXExtensions`等等`LinuxExtensions`（你必须查找适当的名称 - 我只是提供示例）

例如，这是一个使用示例：

```
String className = ""java.util.ArrayList";
Class cls = Class.forName(className);
List list = (List)cls.newInstance(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:44:58.743

这是不可能的，因为 java 正在加载一个类（可能）在类的实例化期间使用的所有类，因此命名的类不可用。

您可以尝试将代码放在项目中的另一个类中，并且仅当您在 OSX 上运行时才实例化此类。

如果这不起作用，您必须使用反射，因为当您通过反射加载它时，VM 只能检测到此类。

高温高压

# iphone - 在仪器中发现泄漏的物体

> ID：13400927
> 
> 赞同：0
> 
> 时间：2012-11-15T15:38:58.183
> 
> 标签：iphone, memory-leaks, ios6

在 Instruments 中`[Photo photoWithFilePath]`发现了两个泄露的对象`[NSURL(NSURL) path]`

它显示 100.0%

```
photo = [Photo photoWithFilePath:[[NSBundle mainBundle] pathForResource:@"image6" ofType:@"png"]]; 
```

和

```
return UIApplicationMain(argc, argv, nil, NSStringFromClass([AppDelegate class])); 
```

任何想法如何解决这个问题

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:28:50.020

继续您的评论：

该方法返回一个自动释放的对象，所以我不认为它是泄漏的原因。但是，您使用照片的方式可能会将其保留在内存中，或者可能是其他类似 NSBundle 部分的东西。我认为这不会返回自动释放对象-您可能需要仔细检查。

# r - 交错 data.frame 的两列

> ID：13400931
> 
> 赞同：1
> 
> 时间：2012-11-15T15:39:05.183
> 
> 标签：r

我有一个这样的数据框：

```
 GN  SN  
  a   0.1   
  b   0.2   
  c   0.3   
  d   0.4   
  e   0.4 
  f   0.5 
```

我想要以下输出：

```
 GN    
  a      
  0.1      
  b      
  0.2      
  c    
  0.3 
```

谁能帮我？如何将第二列的元素“交错”到第一列的元素以获得所需的输出？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T15:43:18.507

首先让我们创建一些数据：

```
dd = data.frame(x = 1:10, y = LETTERS[1:10]) 
```

接下来，我们需要确保该`y`列是字符而不是因子（否则，它将被转换为数字）

```
dd$y = as.character(dd$y) 
```

然后我们转置数据帧并转换为向量：

```
as.vector(t(dd)) 
```

但是，一个更相关的问题是您**为什么**要这样做。

# java - 从行到列加法

> ID：13400936
> 
> 赞同：0
> 
> 时间：2012-11-15T15:39:19.747
> 
> 标签：java

此代码打印每行的总和....如何转换它以便打印每列的总和？谢谢，，

```
public class NewClass{
  public static void main( String[] arg )
  {
int[][] data = 
    { { 1, 2},
      { 2, 2},
      { 1, 2, 4, 5},
      { 2, 2, 4,},
      { 1, 1, 4, 5 },
      { 2, 1, }};

     for ( int row=0; row < data.length; row++)
        {
           int sum = 0;
          for ( int col=0; col < data[row].length; col++)
          {
           sum = sum + data[row][col];
          }
            System.out.print("Sum of Row " + row+" is :  ");
          System.out.println( sum );
        }         
      }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T16:41:46.850

您必须考虑到每行中的列数是不同的。

首先，您找到数据集中的最大列数，然后对列求和。

```
public class NewClass {
    public static void main(String[] arg) {
        int[][] data = { { 1, 2 }, { 2, 2 }, { 1, 2, 4, 5 }, { 2, 2, 4, },
                { 1, 1, 4, 5 }, { 2, 1, } };

        int maxColLength = 0;
        for (int row = 0; row < data.length; row++) {
            int colLength = data[row].length;
            if (colLength > maxColLength) {
                maxColLength = colLength;
            }
        }

        for (int col = 0; col < maxColLength; col++) {
            int sum = 0;
            for (int row = 0; row < data.length; row++) {
                if (col < data[row].length) {
                    sum = sum + data[row][col];
                }
            }
            System.out.print("Sum of Column " + col + " is :  ");
            System.out.println(sum);
        }
    }
} 
```

# python - 有没有办法通过 Pandas 中两列的逻辑比较进行分组？

> ID：13400938
> 
> 赞同：1
> 
> 时间：2012-11-15T15:39:28.970
> 
> 标签：python, pandas

我有一个具有以下结构的数据框：

```
<class 'pandas.core.frame.DataFrame'>
Int64Index: 1152 entries, 0 to 143
Data columns:
cuepos             1152  non-null values
response           1152  non-null values
soa                1152  non-null values
targetpos          1152  non-null values
testorientation    1152  non-null values
dtypes: float64(3), int64(2) 
```

`cuepos`column 和`targetpos`column 都包含`1`或的整数值`2`。

我想通过和之间的**一致性**对这些数据进行分组。换句话说，我想生成两组，一组用于其中的行，另一组用于其中。`cuepos``targetpos``cuepos == targetpos``cuepos != targetpos`

我似乎无法弄清楚我该怎么做。我看着使用分组功能，但这些似乎只作用于一列......还是我弄错了？有人可以指出我正确的方向吗？

提前致谢！BLZ

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-15T16:06:02.087

您可以按多列分组：

> df.groupby(['col1', 'col2']).apply(lambda x: x['col1'] == x['col2'], axis=1)

你也可以使用面具：

> df[df.col1==df.col2]

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-17T18:45:48.563

请注意，如果您的目标是进行分组计算，您*可以*这样做

```
df.groupby(df.col1 == df.col2).apply(f) 
```

结果将由 True/False 键入。

# apache-pig - 猪的 bincod 评估

> ID：13400940
> 
> 赞同：1
> 
> 时间：2012-11-15T15:39:32.793
> 
> 标签：apache-pig

我正在尝试用一些预先计算的值替换缺失的值。

所以我在这里发布了问题并遵循了建议，这是代码片段

```
input = LOAD 'data.txt' USING PigStorage(',') AS
(
id1:double  ,  id21:double  );

gin = foreach input generate
        id1 IS NULL ? 2 : id1,
        id2 IS NULL ? 4 : id2; 
```

但是我收到错误不匹配的输入“IS”，期望 SEMI_COLON？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T16:43:23.210

尝试在 bincond 中添加括号。以下内容适合我：

内容`input`：

```
0.9,1.11
,0.3
10.3, 
```

脚本：

```
inp = LOAD 'input' USING PigStorage(',') AS (id1:double, id2:double );

gin = foreach inp generate
    ((id1 IS NULL) ? 2 : id1),
    ((id2 IS NULL) ? 4 : id2);

DUMP gin; 
```

输出：

```
(0.9,1.11)
(2.0,0.3)
(10.3,4.0) 
```

# javascript - 如何将 JSON lib 格式的 JSON 日期转换为 Javascript 日期

> ID：13400941
> 
> 赞同：2
> 
> 时间：2012-11-15T15:39:31.823
> 
> 标签：javascript, json

Sourceforges JSON-lib (http://json-lib.sourceforge.net) 生成如下 JSON 日期格式：

```
{
    "date":10,
    "day":5,
    "hours":0,
    "minutes":0,
    "month":5,
    "nanos":0,
    "seconds":0,
    "time":1307660400000,
    "timezoneOffset":-60,
    "year":111 //this is 2011
} 
```

有没有一种简单的方法可以将其转换为 Javascript 日期对象，还是我应该手动设置日期对象上的所有变量？

我已经到处寻找，但没有运气！（抱歉，如果答案在某个地方，我似乎找不到它）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:41:36.027

看起来时间是以毫秒为单位的纪元，所以你可以这样做：`new Date(object['time'])`

您当然需要先将其解析为一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-10-09T08:25:16.660

[json-lib项目主页](http://json-lib.sourceforge.net/)上好像没有例子说明**Date**的过程，但是只要你搜索json-lib的API，你就会得到答案。

在这里，您可以使用下面的这种方法来处理**java.util.Date**类。您可以定义自己的格式模式并使用**JsonConfig**来注册用于处理**Date**类的自定义**JsonValueProcessor 。**

 **```
public static final JSON serializerObjWithFormatDate(Object javaObj){

    String pattern = "yyyy-MM-dd HH:mm:ss";

    final SimpleDateFormat fm =  new SimpleDateFormat(pattern);

    JsonConfig jsonCfg = new JsonConfig();

    jsonCfg.registerJsonValueProcessor(Date.class, new JsonValueProcessor() {

        @Override
        public Object processObjectValue(String key, Object value, JsonConfig cfg) {
            if (value == null) {  
                  return "";  
            } else {  
                  return fm.format((Date)value);
            }

        }

        @Override
        public Object processArrayValue(Object date, JsonConfig arg1) {
             return fm.format((Date)date);  
        }
    });

    return JSONSerializer.toJSON(javaObj ,jsonCfg);
} 
```

参数**javaObj**是具有**Date**类实例的 java 对象。

可能会有所帮助。**

# php - PHP mail() 返回 false 但没有记录错误

> ID：13400961
> 
> 赞同：3
> 
> 时间：2012-11-15T15:40:31.010
> 
> 标签：php, email

我已经为我们的内容人员编写了一个快速而肮脏的脚本，以将新闻通讯发送到分发列表。该脚本几个月来一直运行良好，因此使用 PEAR 邮件程序重写它在我的优先级列表中处于低位。今天脚本未能发送电子邮件。mail() 函数返回 false，电子邮件没有发出，但 error_get_last() 为空。我该怎么做才能弄清楚脚本突然停止工作的原因？提前致谢！

```
<?php
ob_start();
readfile("/html-email/tt-facstaff");
$facstaff_content = utf8_decode(ob_get_contents());
ob_start();
readfile("/html-email/tt-students");
$students_content = utf8_decode(ob_get_contents());
ob_end_clean();
ob_end_clean();

if($students_content === false || $facstaff_content === false) die("<h4>Failed to decode content.</h4>");
$all_content = $facstaff_content."\n\n".$students_content;

if(isset($_GET["go"]) && $_GET["go"] == "true"){
    $ppl = "redacted";
    $students = "redacted";
    $facstaff = "redacted";

    $subject = "Tech Times for ".date("m/d");
    $headers = "From: \"Tennessee Tech University\" <redacted>\r\n".
        "Reply-to: redacted\r\n".
        "MIME-Version: 1.0\r\n".
        "Content-type: text/html; charset=iso-8859-1\r\n".
        "X-Mailer: PHP/".phpversion();

    $ok1 = mail($students,$subject,$students_content,$headers."\r\nBcc:".$ppl);
    $ok2 = mail($facstaff,$subject,$facstaff_content,$headers);

    if($ok1 && $ok2){
        echo("<html><body><div><h1 style=\"width:800px; margin:40px auto; text-align:center;\">Tech Times has been sent.</h1></div></body></html>");
    }else{
        $error = error_get_last();
        var_dump($error);
        echo("<html><body><div><h2 style=\"width:800px; margin:40px auto; text-align:center; color:#FF0000;\">Failed to send one or both editions of Tech Times!</h2></div></body></html>");
    }
}

echo $all_content;
echo("<html><body><div style=\"width:800px; margin:40px auto; text-align:center;\"><a href=\"/html-email/tech-times?go=true\">Send Tech Times</a></div></body></html>");
?> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-15T15:43:59.773

1.  检查 sendmail 是否在服务器上运行。
2.  检查 /var/log/maillog

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:43:01.193

尝试在你的 mail() 函数之前添加这个：

```
error_reporting(E_ALL) 
```

另外，尝试运行：

> 服务发送邮件状态
> 
> 服务后缀状态

这将告知我们您正在使用哪些主要的邮件处理程序。

# c++ - 从控制台应用程序启动窗口应用程序？

> ID：13400963
> 
> 赞同：0
> 
> 时间：2012-11-15T15:40:37.520
> 
> 标签：c++, windows

我可能以完全错误的方式处理这个问题，因为我对 C++ 语言和这种应用程序的整体结构方式还很陌生，但我希望在这里确认正确的方法。

本质上，我有一个作为控制台应用程序运行的 cpp 文件和一个作为窗口应用程序运行的单独 cpp 文件。我希望能够在控制台应用程序中达到某个点时启动窗口应用程序。这可能吗？如果是这样，我将如何去做？

更多细节 - 控制台应用程序充当“服务器”，使用 winsock 与另一个控制台应用程序（客户端）进行通信。当控制台服务器应用程序到达某个点（客户端与其连接）时，我希望启动我创建的另一个窗口应用程序，它将使用 Directx 在屏幕上呈现某些图形。目前，我在单个 C++ 2010 Express 解决方案中将这两个 cpp 文件作为单独的项目。目前，这两个 cpp 文件之间没有链接，并且它们在单独运行时都可以正常运行。

如果需要更多细节，我可以提供它们，但我真的想知道这种方法总体上是否可行。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:47:30.780

如果您没有运行托管 C++ 应用程序，则[`CreateProcess`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms682425%28v=vs.100%29.aspx)可以使用规范的 WIN32 系统调用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:45:52.487

你只是想从另一个exe运行exe吗？

```
System::Diagnostics::Process::Start("C:\\Folder\\file.exe"); 
```

# object - ORM和ORP有什么区别？

> ID：13400966
> 
> 赞同：2
> 
> 时间：2012-11-15T15:40:43.220
> 
> 标签：object, orm, persistence

对象关系映射（ORM）和对象关系持久性（ORP）有什么区别？

据我所知，ORM 是一个框架，用于将关系表映射到应用程序域对象以及它们之间的关系。所以在 ORM 中你已经有了一个持久化的数据结构？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T18:23:06.460

ORP 包括：

*   实体
*   数据库连接
*   数据库
*   映射（ORM）
*   ETC..

我们几乎可以说这是同一件事，因为 ORM 是一个用作 ORP 的术语。两者都用于表示同一件事。

# php - 登录脚本未按要求工作

> ID：13400971
> 
> 赞同：2
> 
> 时间：2012-11-15T15:41:12.220
> 
> 标签：php, mysql, login

我是 php 新手，并试图开发一个登录脚本，但是当我输入值时它不起作用。我什至找不到错误，因为当我点击提交时，它只会刷新页面

这是我的代码

```
<?php include "../utilities/config.php"; 

foreach($_GET as $key=>$value)
{
${$key} = trim($value);
}
$error = '';
if($checking_member_availability == 'yes'){
if(empty($user_name)){
    $error .= "Please enter user name.<br />";
}
if(empty($password)){
    $error .= "Please enter password.<br />";
}
if(empty($error)){
        $sql = "select * from `".SITE_TABLE_PREFIX."user` where     email='".$user_name."' and pwd='".$password."'";
        $resultUser  = mysql_query($sql) or die(mysql_error().$sql);
        if(mysql_num_rows($resultUser)>0){
        $rowUser  = mysql_fetch_array($resultUser);
        $error .= '';
        $_SESSION['email']=$user_name;
        }else{
        $error .= "Please check Email and Password.";
    }
}

if(empty($error)){

    echo "myaccount.php";
}
else{
    echo "<font color='#A01D49'>$error</font>";
}
}
?> 
```

请任何人都可以帮助我我花了很多时间都没有成功

这是html代码

```
<script type="text/javascript" language="javascript">
function validation()
{
var password = trim(document.form1.password.value);
var user_name = trim(document.form1.user_name.value);
var type = trim(document.form1.type.value);
http.open("GET", "processor.php?checking_member_availability=yes&password="+
                    escape(password)+"&user_name="+   escape(user_name)+"&type=" + escape(type)  , true);
http.onreadystatechange = handleHttpResponse;
http.send(null);
return false;
}
</script>
</head>
<table width="241" border="0" cellspacing="0" cellpadding="0">
        <tr>
          <td><table width="100%" border="0" cellspacing="0" cellpadding="0" <?php   if($_SESSION['user_id']!=''){?> style="display:none;"<?php }?>>
              <tr>
                <td align="left" valign="top" class="loginBg">
                    <img src="img/logintxt.jpg" alt = '' width='100' height='29' border='0'>
                </td>
              </tr>
              <tr>
                <td align="left" valign="top" class="login"><form name="form1" id="form1" action="" method="post" onSubmit="return validation();">
                    <table width="100%" border="0" cellspacing="0" cellpadding="0">
                     <tr><td colspan="3"><span id="user"></span></td></tr>
                      <tr>
                        <td align="left" valign="middle" class="height"><label class="boldtxt">Email:</label></td>
                        <td align="left" valign="middle" class="heightMid"><input type="text" name="email" id="email" />
                        </td>
                      </tr>
                      <tr>
                        <td align="left" valign="middle"><label class="boldtxt">Password:</label></td>
                        <td align="left" valign="top"><table width="100%" border="0" cellspacing="0" cellpadding="0">
                            <tr>
                              <td align="left" valign="top"><input type="password" name="password" id='password' class="loginfld" />
                              </td>
                              <td align="left" valign="middle"><input type="image" src="img/submit.jpg" class="submit" onClick="return validation();" />
                              </td>
                            </tr>
                          </table></td>
                      </tr>
                      <tr>
                        <td align="left" valign="top">&nbsp;</td>
                        <td align="left" valign="top"><a href="forget_password.php" class="normalTxt">Forgot your password?</a><br />
                        </td>
                      </tr>
                    </table>
                  </form></td>
              </tr>
            </table></td>
        </tr>
        <tr>
          <td align="left" valign="top">
          <table width="100%" border="0" cellspacing="0" cellpadding="0">
                    <tr>
                      <td align="left" valign="top"><a href="provider_registration.php"><img src="images/applybut.jpg" alt="" border="0" class="apply" /></a></td>
                    </tr>
                    <tr>
                      <td align="left" valign="top">
                      <?=$value?>
                      </td>
                    </tr>
                    <tr>
                        <td align="left" valign="top">&nbsp;</td>
                    </tr>
                    <tr>
                      <td align="left" valign="top">&nbsp;</td>
                    </tr>
                </table>
          </td>
        </tr>
      </table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:57:43.433

好的，你有一个带有文件名的 echo 语句：

```
 echo "myaccount.php"; 
```

首先，你确定这是你想做的吗？我相信这会回显字符串“myaccount.php”。我相信你会想要包括“myaccount.php”

其次，您在 javascript 中引用了表单字段“user_name”，但您尝试访问的字段名称名为“email”。这也可能是问题的一部分。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-15T15:52:57.023

您正在使用 form `method="post"`，但正在寻找`$_GET`.

要么使用`method="get"`，要么`$_POST`！

正如您从评论中收集的那样，您的代码在安全性方面还有其他几个问题。不要灰心——每个人都曾经是初学者。但是，您确实应该阅读[SQL 注入](http://www.tizag.com/mysqlTutorial/mysql-php-sql-injection.php)并停止将所有 $_GET 值分配给字符串 - 完整命名每个字符串，即：

```
$user_name = trim($_GET['user_name']); 
```

祝你好运，坚持下去！

[编辑]啊，正如斯蒂芬在评论中正确指出的那样，JS 用于`get`提交帖子，所以实际上是“电子邮件”的字段名称是问题所在。

# c# - 向 ASP.net DataTable 添加行的最快编码方式

> ID：13400976
> 
> 赞同：0
> 
> 时间：2012-11-15T15:41:40.527
> 
> 标签：c#, asp.net, datatable, dataset

就将行添加到 DataTable 的编码速度而言，最快的方法是什么？我不需要知道列名和数据类型。是否可以在没有预先指定 dataTable 列的数量或名称的情况下添加行？

```
 DataTable t = new DataTable();
        t.Rows.Add(value1,
            value1,
            value2,
            value3,
            ...
            valueN
            );
        DataSet ds = new DataSet();
        ds.Tables.Add(t); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-15T15:48:04.583

要回答您的第一个问题：不，您必须在表上定义列。您不能只说“嘿，为所有这些值创建一个列”。不过，正如 Schmelter 先生所说，没有什么能阻止您即时创建列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:48:46.703

如果输入来自集合，您可以循环它以创建`DataColumns`具有正确类型的：

```
var data = new Object[] { "A", 1, 'B', 2.3 };
DataTable t = new DataTable();
// create all DataColumns
for (int i = 0; i < data.Length; i++)
{
    t.Columns.Add(new DataColumn("Column " + i, data[i].GetType()));
}
// add the row to the table
t.Rows.Add(data); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:46:59.240

在不知道行或列的情况下（您首先需要添加列，否则不可能）

```
 for(int intCount = 0;intCount < dt.Rows.Count; intCount++)
 {
  for(int intSubCount = 0; intSubCount < dt.Columns.Count; intSubCount++)
   {
         dt.Rows[intCount][intSubCount] = yourValue; // or assign to something
   }
 } 
```

# android - 为 JNI 应用程序设置 Android 构建环境

> ID：13400981
> 
> 赞同：0
> 
> 时间：2012-11-15T15:41:51.093
> 
> 标签：android, android-ndk, java-native-interface, installation, build-environment

我有一个专有的 JNI 应用程序，我需要为 MIPS 设备构建它。我已经阅读[了“Initializing a Build Environment”](http://source.android.com/source/initializing.html)、部分 NDK 文档、一些 Google Groups 线程和许多 StackOverflow 问题，但我仍然没有答案。

到目前为止，我已经使用 Google 的 repo 脚本检查了 Android 源代码，并将其放在`~/AndroidSource`. 我还分别下载了下的SDK`~/AndroidSDK`和下的NDK `~/AndroidNDK`。我正在尝试构建的代码位于单独的位置。SDK 和 NDK 二进制文件在我的路径中。对于构建，我尝试使用两个不同版本的 NDK 以及 Android 源代码树下的一个，并遇到了不同的问题。我当前的设置使用 NDK r8b，从 Android 源单独下载。

该应用程序有其`Android.mk`和`jni/Android.mk`。但是，后者中的几个指令指向路径，例如

```
frameworks/base/include
system/core/include 
```

没有前缀。我认为这些是为了指向 Android 源代码中的各个目录，所以我将它们符号链接到当前目录。在进行了更多的符号链接、makefile 和源代码攻击之后，我得到了要编译的应用程序，但目前我停留在链接阶段，有很多对丢失方法主体的引用。在整个过程中，我知道我做错了什么。

如果有任何问题，我在 Linux x86_64 主机上。

所以我的问题是：

为 JNI 应用程序设置构建环境的正确方法是什么？我应该设置哪些环境变量、符号链接和/或路径扩展？我是否需要在每次`ndk-build`调用之前或之前调用任何脚本？

另外，如果您纠正我弄错的任何概念或术语，我会很高兴。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-17T14:43:32.807

我在我的构建（YMMV）中使用以下内容。

*   作为编译器或链接器显式调用`arm-linux-androideabi-gcc`（应该在 PATH 中）。
*   NDK_PLATFORM=/path/to/android-ndk-r*/platforms/android-14
*   传递`-I"$(NDK_PLATFORM)/arch-arm/usr/include"`给编译器
*   传递`-nostdlib -L"$(NDK_PLATFORM)/arch-arm/usr/lib/" -lgcc -lc -lm`给链接器

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-17T15:58:18.763

您为系统标头符号链接 AOSP 树的方法是正确的。您现在需要的是为 MIPS 编译的系统库。获取它们的最简单方法是`adb pull`从目标设备（或仿真器映像）获取它们。但是您也可以自己构建这些库，作为 AOSP 构建的一部分（请参阅您下载的源代码树的构建说明）。

如果仍有任何问题，请运行`ndk-build`with 参数`V=1`并发布链接命令及其结果。

# javascript - JavaScript ...无法调用未定义的方法匹配

> ID：13400982
> 
> 赞同：2
> 
> 时间：2012-11-15T15:41:52.943
> 
> 标签：javascript

我收到此错误：`Uncaught TypeError: Cannot call method 'match' of undefined`在我的 JavaScript 中。我试图在没有 jQuery 的情况下编写这个，因为它将是网站上唯一的 js。

`<a href="...>`我的代码应该在链接到当前页面的导航中添加一个“活动”类。

我猜它可能是`contentLoaded`函数？....[来源](https://github.com/dperini/ContentLoaded/blob/master/src/contentloaded.js)

这是我的代码...（第 9 行出现错误）...[小提琴](http://jsfiddle.net/XHZEf/)

```
(function(window, document, undefined) { contentLoaded(window, function() {

  var page = document.location.pathname.match(/[A-z]+$/)[0],
      nav_anchors = document.getElementsByTagName('header')[0]
                            .getElementsByTagName('nav')[0]
                            .getElementsByTagName('a');

  for(i in nav_anchors)
    if(nav_anchors[i].href.match(/[A-z]+$/)[0] = page) //LINE 9 <-- Error
      nav_anchors[i].classList.add('active');

})
})(this, this.document) 
```

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-15T15:45:57.160

`NodeLists`有`length`,`item`和`namedItem`属性。

使用`for (var i = 0; i < foo.length; i++)`不`for i in foo`迭代它们并且只命中节点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T15:48:52.693

```
(function(window, document, undefined) { contentLoaded(window, function() {

  var page = document.location.pathname.match(/[A-z]+$/)[0],
      nav_anchors = document.getElementsByTagName('header')[0]
                            .getElementsByTagName('nav')[0]
                            .getElementsByTagName('a');

  for(var i=0;i<nav_anchors.length;i++)
    if(typeof nav_anchors[i].href != "undefined" && nav_anchors[i].href.match(/[A-z]+$/)[0] == page)
      nav_anchors[i].classList.add('active');

})
})(this, this.document) 
```

添加了检查是否`href`设置了锚点，以防您有没有 href 属性的页面锚点（例如`<a name="top">`使用 #top 调用）。在其中添加了第二个`=`，`IF`以使其按预期工作。并更正了 for 语法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:54:38.557

```
if(nav_anchors[i].href.match(/[A-z]+$/)[0] = page) //LINE 9 <-- Error 
```

在 JavaScript 中，等号`=`是赋值运算符。您可能是指双等号`==`，您可以在没有类型强制的情况下检查值（`5 == "5"`）或三等号`===`用于强类型检查（其中`5 !== "5"`）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-15T15:57:18.613

有时`document.location.pathname.match(/[A-z]+$/)`可以为空。如果你尝试使用`document.location.pathname.match(/[A-z]+$/)[0]`你不能访问 null 的 0 元素。

# wordpress - 我的 Financio WordPress 主题上的 jQuery 滑块出现问题

> ID：13400990
> 
> 赞同：1
> 
> 时间：2012-11-15T15:42:04.353
> 
> 标签：wordpress

我正在使用 financio Wordpress 主题，并且正在尝试使用您视频中的一些信息来更新滑块中的图像。由于某种原因，我的图片偏离了中心。你能看看，看看你能不能告诉我我做错了什么？我的网站是 www.brittanymcalpin.com

# blackberry - 单击时使 BitmapField 全屏显示

> ID：13400995
> 
> 赞同：0
> 
> 时间：2012-11-15T15:42:14.533
> 
> 标签：blackberry, java-me, fullscreen, bitmapfield

我正在编写一个可以进行直播的应用程序。单击时可以使位图字段全屏显示吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-16T07:27:16.507

最简单的方法（我可以在 2 分钟内想到）：

*   使您的位图可点击（[在此处](https://stackoverflow.com/questions/2145163/blackberry-invoke-a-click-event-on-bitmap-field)描述）
*   单击位图字段时，将其缩放为整个屏幕大小的新位图：

`Bitmap scaled = new Bitmap(Display.getWidth(), Display.getHeight());` `originalBitmap.scaleInto(scaled);`

*   创建一个新屏幕，仅包含一个 BitmapField（使用您的缩放位图）
*   推新屏幕。

# java - 使用 JQuery 将值设置为输入类型复选框

> ID：13400996
> 
> 赞同：2
> 
> 时间：2012-11-15T15:42:23.223
> 
> 标签：java, jquery, spring-mvc, checkbox

我正在使用 Spring MVC 创建一个这样的复选框：

```
<form:checkbox id="idVerifiable" path="verifiable"/> 
```

它让我产生：

```
<input id="idVerifiable" type="checkbox" value="false" name="verifiable"> 
```

如果我尝试：

```
$('#idVerifiable').val("true"); 
```

它设置了值但未选中复选框，如何更改它以使其工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T15:44:10.443

```
$('#idVerifiable').prop("checked", true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T15:43:27.777

试试这个，

```
$('#idVerifiable').attr("checked", true); 
```

或者

```
$('#idVerifiable').prop("checked", true); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-15T15:44:00.897

你可以这样做：

```
$('input[name=verifiable]').attr('checked', true); 
```

# matlab - 如何为此代码创建 MATLAB GUI？

> ID：13400997
> 
> 赞同：1
> 
> 时间：2012-11-15T15:42:31.167
> 
> 标签：matlab

大家好，我使用 MatLab 编写了这段代码，我需要设计一个 GUI，如下所示

*   绘制按钮：绘制路径。
*   扫描按钮：如果我想使用“图像采集”拍摄图像
*   静态文本：显示天使、物体数量和中心（个人）
*   轴：在处理后显示图像有什么我应该阅读的参考资料来帮助我吗？

编码：

```
im1=imread('C:\Users\Shadow Of Dark\Desktop\sample','jpeg');

im1=rgb2gray(im1);

level=graythresh(im1)

bwfram3=im2bw(im1,level);

bw2=bwareaopen(bwfram3,20);

se=strel('disk',10);

bw2=imclose(bw2,se);

bw2=imcomplement(bw2);

[labeled,numObjects] = bwlabel(bw2,4);

imshow(labeled);

numObjects

info=regionprops(labeled,'all');

centers=cat(2,info.Centroid)

hold on;

angles=zeros(1,numObjects);

j=0; 

for i=1:2:2*numObjects-2

  l = line([centers(i) centers(i+2)],[centers(i+1) centers(i+3)]);

  set(l,'linewidth',3,'color','r');

  angles(1,i-j)= atan((centers(i+1) - centers(i+3))/(centers(i) - centers(i+2)))*180/pi;
  j=j+1;
end

angles 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T16:10:04.780

首先，在纸上（或 Enterprise Architect，...）画出您想要的内容以及布局的位置。然后，想想你的过程的序列图，并写在论文中。稍后，将您的代码分成与您描述的步骤相关的一些功能。然后，使用 MATLAB 中的 GUI 编辑器创建一个 GUI，并将图形元素添加到您的布局中。最后，将您描述的每个功能链接到您的图形元素（阅读官方帮助）。

（或者，您可以更快地混合所有这些步骤，但这不是一种合适的方式）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T16:17:47.960

我发现此列表对于入门非常有用：http: [//www.mathworks.com/matlabcentral/fileexchange/24861-41-complete-gui-examples](http://www.mathworks.com/matlabcentral/fileexchange/24861-41-complete-gui-examples)

您可能还想查看已包含在 matlab 中的示例。

转到开始 > Matlab > 指南