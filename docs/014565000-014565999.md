# StackOverflow 问答 14565000-14565999

# autocomplete - 带有 jQ uery UI 模式对话框的 IE 8 自动完成

> ID：14565000
> 
> 赞同：0
> 
> 时间：2013-01-28T15:12:54.443
> 
> 标签：autocomplete, jquery-ui-dialog

我有一个带有许多文本字段的模态 jQuery 对话框。文本字段受标准 IE 8 自动完成（这是需要的）的影响。但是，当主机页面滚动到除顶部之外的任何位置时（在打开对话框之前或之后），自动完成 div 会偏移滚动距离（例如，它显示在相关文本框下方）。实际上，对话框跟随主机页面的滚动，但不跟随自动完成。即使在打开对话框之前已经滚动了主机页面，也会看到这种效果。

```
$("#InterestsDetailModalContainer").dialog({autoOpen: false});
$("#InterestsDetailModalContainer").dialog("option", "title", "Additional Interests Detail");
$("#InterestsDetailModalContainer").dialog("option", "height", 600);
$("#InterestsDetailModalContainer").dialog("option", "width", 1000);
$("#InterestsDetailModalContainer").dialog("option", "modal", true); 
```

我很难找到任何不涉及 jQuery 自动完成功能的东西，我在这里没有使用它。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:25:22.463

您可以在单行选择器中提及选项，如下所示：

```
 $("#InterestsDetailModalContainer").dialog({
                          autoOpen: false,
                          title: "Additional Interests Detail",
                          height: 600,
                          width: 1000,
                          modal: true,
    }); 
```

试试这个，这不是一个解决方案，但试试这个，让知道天气解决了。

# c# - 如何检查是否调用了静态构造函数？

> ID：14565009
> 
> 赞同：7
> 
> 时间：2013-01-28T15:13:06.943
> 
> 标签：c#, static-constructor

我有一些缓存来自数据库的数据的类，当调用它们的静态构造函数时，这些类会加载数据。

我需要在所有这些类中调用静态 Reload 方法，除了那些尚未初始化的类。

例如：城市缓存数据库中的数据

```
public class City
{
    public City Get(string key)
    {
        City city;
        FCities.TryGetValue(key, out city);
        return city;
    }
    private static Dictionary<string, City> FCities;

    static City()
    {
        LoadAllCitiesFromDatabase();
    }

    public static void Reload()
    {
        LoadAllCitiesFromDatabase();
    }

    private static void LoadAllCitiesFromDatabase()
    {
        // Reading all citynames from database (a very slow operation)
        Dictionary<string, City> loadedCities = new Dictionary<string, City>();
        ...
        FCities = loadedCities;
    }
} 
```

问题是 City 可能还没有被使用（它可能没有在这个服务中使用）并且没有理由从数据库中加载它。

我的 reload all 方法看起来很像这样：

```
public static class ReloadAll
{
    public static void Do()
    {
        foreach (Type classType in AppDomain.CurrentDomain.GetAssemblies().SelectMany(a => a.GetTypes()).Where(t => t.IsClass && !t.IsAbstract))
        {
            MethodInfo staticReload = classType.GetMethods().FirstOrDefault(m => m.IsStatic && m.IsPublic && m.ReturnType == typeof(void) && m.Name == "Reload" && m.GetParameters().Length == 0);
            if (staticReload != null)
            {
                if (StaticConstructorHasBeenCalled(classType))
                    staticReload.Invoke(null, null);
            }
        }
    }

    private bool StaticConstructorHasBeenCalled(Type classType)
    {
        // How do I check if static constructor has been called?
        return true;   
    }
} 
```

我需要一些帮助来实现 StaticConstructorHasBeenCalled。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-28T15:19:41.633

乍一看，我认为这可能是`<grin>`量子力学*哥本哈根解释*可能适用的问题（“*只要你看它，它就会改变*”）。`</grin>` 即你在课堂上做的任何事情来观察它是否已经被初始化可能会***导致***它自己初始化......

但是您不必在类中执行此操作，只需在其他位置（除了在任何这些静态类中）保留一个列表，该列表在每个静态类被初始化时填充。然后在您的重置功能中，只需遍历列表中的类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:24:28.013

If you have several of these classes, how about controlling their instantiation through a factory or manager class. This could keep track of which have been used and call the reload methods where appropriate.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T09:06:38.263

我问是否有任何方法可以查看是否调用了静态构造函数。我认为答案是否定的，但一种解决方法是创建一个可以跟踪存储库的管理器。目标是尽可能少地改变现有的类。

我对经理类的解决方案是：

```
public static class RepositoryManager
{
    public delegate void Reload();
    private static List<Reload> FRepositories = new List<Reload>();

    public static void Register(Reload repository)
    {
        lock (FRepositories)
        {
            FRepositories.Add(repository);
        }

        repository();
    }

    public static void ReloadAll()
    {
        List<Reload> list;
        lock (FRepositories)
        {
            list = new List<Reload>(FRepositories);
        }

        foreach (Reload repository in list)
            repository();
    }
} 
```

使用具有 City 类的示例，更改将仅限于静态构造函数。

```
public class City
{
    // ...

    static City()
    {
        RepositoryManager.Register(LoadAllCitiesFromDatabase);
    }

    // ...
} 
```

然后，我的 ReloadAll 方法将非常简单：

```
public void ReloadAll()
{
    RepositoryManager.ReloadAll();
} 
```

感谢您的所有回答，我已经奖励了每个建议某种经理作为解决问题的方法的人。

此解决方案的缺点是，每当有人创建需要不时重新加载/更新/清除的存储库时，他们必须记住使用 RepositoryManager。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T15:20:10.660

您可以使用单例模式，并添加一个字段来告诉您是否已经创建了唯一实例

实际上不需要做一个单例，只需要保留你的静态类，并在调用应该返回它的属性 getter 时加载数据：

```
static class City
{
   static bool _loaded = false;

   public bool Loaded { get { return _loaded; } }

   public static List<C> Data
   {
      get
      {
         if (!_loaded)
         {
             doLoading();
             _loaded = true
         }
      }
   }
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T15:37:20.947

您不应该在静态构造函数中使用长时间运行的操作，或者至少，它们不应该同步运行。静态构造函数隐式运行，当隐式执行需要大量时间时，它会产生有趣的错误:)

此外，如果您确实使用了静态构造函数、方法等维护状态的东西，请尝试将它们隔离在一个完全静态的类中，这样在大多数情况下，它们的行为就像单例一样。我会将实现更改为以下内容：

```
public static class CityRepository
{
   private static bool areCitiesLoaded;
   private List<City> cities;

   static CityRepository()
   {
     areCitiesLoaded = false;
     cities = new List<City>();
   }

   //method that will be called in all other method, to ensure
   //that the cities are loaded
   private static void EnsureLoad()
   {
      if (!areCitiesLoaded)
      {
        LoadAllCitiesFromDatabase();
        areCitiesLoaded = true;
      }
   }
}

public class City {} //city instance methods 
```

# c# - 延长asp.net会话结束日期？

> ID：14565012
> 
> 赞同：6
> 
> 时间：2013-01-28T15:13:14.033
> 
> 标签：c#, asp.net, .net, asp.net-mvc-3, session

asp.net 会话如何延长，**每个请求是否都会延长 Session 的结束日期**，是否足以通过 ajax 调用 void() 以将 Session 结束日期延长另一个时间段（默认 20 分钟左右......）

```
public void ResetSessionTime()
{

} 
```

还是我必须以某种方式调用会话：

```
public void ResetSessionTime()
{
    User currentUser = HttpContext.Current.Session[userSessionKey] as User;
} 
```

简单请求如何延长会话结束日期？

[这个](https://stackoverflow.com/questions/8886551/extend-session-time-on-button-click-event-server-side)问题声称每个回发都会延长会话......

[这个](http://msdn.microsoft.com/en-us/library/aa478952.aspx)关于 Session State Providers 的 MSDN ：

> “由 ASP.NET 创建的每个会话都有一个与之关联的超时值（默认为 20 分钟）。如果在会话超时内没有对会话的访问发生，则认为会话已过期，不再有效。 "

请求如何准确访问会话？

这个问题：[保持会话活动C＃](https://stackoverflow.com/questions/1881768/keeping-session-alive-c-sharp)没有回答如何通过请求延长会话结束日期，只是关于如何从客户端保持会话活动的意见

**编辑：**

根据[这篇文章](http://www.dotnetcurry.com/ShowArticle.aspx?ID=453)，需要从 IHttpHandler 扩展方法，以便访问当前会话...

```
public class KeepSessionAlive : IHttpHandler, IRequiresSessionState
{
    public void ProcessRequest(HttpContext context)
    {
        context.Session["KeepSessionAlive"] = DateTime.Now;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:01:22.760

每次发出请求时，会话超时都会重置。请求可以是页面加载或 ASYNC 调用之类的东西。

查看这个问题，了解如何通过定期对服务器进行 AJAX 调用来保持会话处于活动状态。（[保持 ASP.NET 会话打开/活动](https://stackoverflow.com/questions/1431733/keeping-asp-net-session-open-alive)）

# sql - 根据顺序选择和汇总最后的记录

> ID：14565015
> 
> 赞同：3
> 
> 时间：2013-01-28T15:13:17.233
> 
> 标签：sql, sql-server-2005

我在表格中有不同版本的费用。我想获取并汇总按类型分组的最后一笔费用。

所以我想添加 9.87、9.63、1.65。

我想要 Parent ID ， sum(9.87 + 9.63 + 1.65) 作为这个查询的结果。

我们使用 MSSQL

```
ID  ORDER   CHARGES     TYPE    PARENT ID           
1   1       6.45        1       1
2   2       1.25        1       1
3   3       9.87        1       1
4   1       6.54        2       1
5   2       5.64        2       1
6   3       0.84        2       1
7   4       9.63        2       1
8   1       7.33        3       1
9   2       5.65        3       1
10  3       8.65        3       1
11  4       5.14        3       1
12  5       1.65        3       1 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T15:15:57.977

```
WITH recordsList
AS
(
    SELECT Type, Charges,
            ROW_NUMBER() OVER (PArtition BY TYPE
                                ORDER BY [ORDER] DESC) rn
    FROM tableName
)
SELECT  SUM(Charges) totalCharge
FROM recordsLIst
WHERE rn = 1 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/a4488/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T15:16:04.130

用于`row_number()`标识要求和的行，然后对它们求和：

```
select SUM(charges)
from (select t.*,
             ROW_NUMBER() over (PARTITION by type order by id desc) as seqnum
      from t
     ) t
where seqnum = 1 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T17:27:31.523

或者，您可以使用窗口聚合`MAX()`：

```
SELECT SUM(Charges)
FROM (
  SELECT
    [ORDER],
    Charges,
    MaxOrder = MAX([ORDER]) OVER (PARTITION BY [TYPE])
  FROM atable
) s
WHERE [ORDER] = MaxOrder
; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T21:39:04.750

```
SELECT t.PARENT_ID, SUM(t.CHARGES)
FROM dbo.test73 t
WHERE EXISTS (
              SELECT 1
              FROM dbo.test73
              WHERE [TYPE] = t.[TYPE]
              HAVING MAX([ORDER]) = t.[ORDER]
              )
GROUP BY t.PARENT_ID 
```

[**SQLFiddle**](http://sqlfiddle.com/#!3/73b0c/1/0)上的演示[](http://sqlfiddle.com/#!3/73b0c/1/0)

# android - 从 Facebook 相册获取图片？

> ID：14565021
> 
> 赞同：1
> 
> 时间：2013-01-28T15:13:35.177
> 
> 标签：android, facebook-android-sdk

我正在创建图像查看器应用程序，我想让它变得简单并从 facebook 相册获取图像“诀窍是让 facebook 相册充当应用程序的图像数据库”，所以当我上传新图像时，它会自动显示在我的应用程序中..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:33:07.253

您可以通过 Graph API 从 Facebook 获取照片。取自这里[https://stackoverflow.com/a/5841825/1965084](https://stackoverflow.com/a/5841825/1965084)，看看下面的代码：

```
ImageView user_picture;
userpicture=(ImageView)findViewById(R.id.userpicture);
URL img_value = null;
img_value = new URL("http://graph.facebook.com/"+id+"/picture?type=large");
Bitmap mIcon1 = BitmapFactory.decodeStream(img_value.openConnection().getInputStream());
userpicture.setImageBitmap(mIcon1); 
```

我不确定，通知新上传图片的最佳方式是什么，但您第一次可以从这里不时检查元数据以获取新条目：

```
URL_TO_FACEBOOK + "me/albums" -> fetch albums
URL_TO_FACEBOOK + AlbumID + "/photos" -> to fetch photos of albums 
```

两个结果都是 json 代码，因此您可以使用[GSON进行映射](http://code.google.com/p/google-gson/)

**更新 1：** 首先在[此处](https://developers.facebook.com/docs/reference/api/album/)查看 Facebook Graph API 。尤其是[在这里，](https://developers.facebook.com/tools/explorer/?method=GET)您可以测试通过图形获取元数据的不同方法。基本原则是通过用户 ID（facebookname）和访问令牌（[在此处描述](https://developers.facebook.com/docs/reference/api/album/)）从用户那里获取所有专辑。然后你得到 JSON 输出作为回报，你可以映射到一个数组。要了解如何获取和映射 json 输出，您可以[在此处](https://stackoverflow.com/q/14248787/1965084)参考我之前的问题。

您的问题涉及一个复杂的过程，需要有关 facebook graph api、json 映射和通过 url 加载图像的知识。看看[这个具体的例子](https://stackoverflow.com/a/12385652/1965084)，它可能对你有用，但你需要了解 json 映射、apache http 客户端的使用和图形 api。

希望我的帖子对你有帮助，加油！

# git - Node.js + Git：如何避免将模块依赖添加到存储库

> ID：14565024
> 
> 赞同：6
> 
> 时间：2013-01-28T15:13:36.687
> 
> 标签：git, node.js, github, repository, npm

## 我的情况

我正在开发一个 Node.js 应用程序作为`npm`模块。

为了能够运行这个应用程序，我安装了所有`npm`依赖项。所以，我的项目包含一些`./node_module/`包含外部模块依赖构建的文件夹。

`git`我使用 GitHub 存储库维护我的项目并发布。

## 我的问题

我不想`npm`在 GitHub 上发布所有本地构建的模块依赖项。

我只想发布我自己的代码。我的模块的用户应该使用`npm install`来获取当前的构建依赖项。

## 我的问题

**使依赖项远离我的 GitHub 存储库**的最佳方法是什么？

感谢您的回答（或评论）。- 如果有任何不清楚的地方，请发表评论。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T15:19:42.610

在项目的根目录（上面`node_modules`的那个）中，将以下行添加到 .gitignore 文件的末尾（如果需要，请创建它）：

```
node_modules 
```

这将阻止 node_modules 文件被添加到 GitHub 存储库。

然后在同一目录中创建或打开 package.json 文件，并添加`dependencies`如下部分：

```
{
   "dependencies": {
      "module": "0.0.x",
      ...
   }
} 
```

通常，您需要使用 0.0.x 作为版本格式。这可确保您获得错误修复，但不会对依赖项进行破坏或重大更改，因此它们将与您的模块保持兼容。

`dependencies`package.json 将告诉 npm 安装您的模块时列出的任何内容。您可以[在此处阅读有关 package.json 的更多信息](http://blog.nodejitsu.com/package-json-cheat-sheet)。

这是整个过程的[一个很好的小概述。](http://anders.janmyr.com/2012/04/writing-node-module.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:21:30.690

为了防止模块被添加到您的 git 存储库（以及因此到 github），您可以将 node_modules 文件夹添加到您的 .gitignore 文件中。（正如@Kato 刚刚指出的那样）

但是，您可能会考虑将模块保留在您的存储库中，以确保每个人都有完全相同的版本。使用 npm install 可能会导致人们获得不同（更新）版本的模块。

这是一篇关于这个主题的好博文：[http ://www.futurealoof.com/posts/nodemodules-in-git.html](http://www.futurealoof.com/posts/nodemodules-in-git.html)

# web-services - Tomcat 6.0 部署错误

> ID：14565028
> 
> 赞同：0
> 
> 时间：2013-01-28T15:13:44.627
> 
> 标签：web-services, apache, jakarta-ee, tomcat, jax-ws

我在部署我的 Web 应用程序时遇到了问题，在不断指责我们的托管公司和他们的服务器之后，这让我困惑了 3 周。

首先，在 tomcat 5 上使用管理器可以很好地部署 Web 应用程序。

然后我要求更改为 tomcat 6，他们这样做了，现在应用程序没有部署，并给出了现在非常熟悉的严重：部署配置描述符 XXXX.xml 时出错。

但是在 Eclipse 中，我在 Tomcat 6 上构建并运行我的应用程序，效果很好！但是当我再次尝试通过管理器在本地服务器上部署打包的战争时，我得到了严重的错误。

我的部署描述符有问题，它对 tomcat 敏感，但在 eclipse 中不敏感。我在某处读到了关于区分大小写的信息，并且我已经仔细检查了这一点。

然后我尝试并注释掉了上下文 - 仍然无法正常工作，web.xml 中的所有内容除了欢迎文件列表。我仍然得到同样的错误。

我没有想法，很困惑。

下面我发布了 web.xml 和 context.xml （出于保密原因，我必须 XXXX 出名称）。

```
<?xml version="1.0" encoding="UTF-8"?>
<web-app xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns="http://java.sun.com/xml/ns/javaee" xmlns:web="http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" xsi:schemaLocation="http://java.sun.com/xml/ns/javaee http://java.sun.com/xml/ns/javaee/web-app_2_5.xsd" id="WebApp_ID" version="2.5">
  <display-name>XXXX</display-name>
  <welcome-file-list>
    <welcome-file>index.html</welcome-file>
    <welcome-file>index.htm</welcome-file>
    <welcome-file>index.jsp</welcome-file>
    <welcome-file>default.html</welcome-file>
    <welcome-file>default.htm</welcome-file>
    <welcome-file>default.jsp</welcome-file>
  </welcome-file-list>

  <servlet>
    <servlet-name>restSdkService</servlet-name>
    <servlet-class>org.apache.wink.server.internal.servlet.RestServlet</servlet-class>
    <init-param>
      <param-name>javax.ws.rs.Application</param-name>
      <param-value>com.XXXX.core.TestWebApp</param-value>
    </init-param>
  </servlet>

  <servlet-mapping>
    <servlet-name>restSdkService</servlet-name>
    <url-pattern>/*</url-pattern>
  </servlet-mapping>

  <resource-ref>
    <description>MySQL Datasource example</description>
    <res-ref-name>jdbc/XXXX</res-ref-name>
    <res-type>javax.sql.DataSource</res-type>
    <res-auth>Container</res-auth>
  </resource-ref>

</web-app> 
```

上下文.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<Context>
<Resource name="jdbc/emotifi" auth="Container" type="javax.sql.DataSource"
               maxActive="100" maxIdle="30" maxWait="10000"
               username="XXXX" password="XXXX" 
               driverClassName="com.mysql.jdbc.Driver"
               url="XXXX"/>

<Resource name="jdbc/emotifi_web" auth="Container" type="javax.sql.DataSource"
               maxActive="100" maxIdle="30" maxWait="10000"
               username="XXXX" password="XXXX" 
               driverClassName="com.mysql.jdbc.Driver"
               url="XXXX"/>

 </Context> 
```

# python - 如何将函数 zip 应用于 n-list

> ID：14565032
> 
> 赞同：0
> 
> 时间：2013-01-28T15:13:48.673
> 
> 标签：python, arrays, list

将函数 zip 应用于两个 alist 的示例如下：

```
x = [1, 2, 3]
y = [4, 5, 6]
zipped = zip(x, y)
#show
list(zipped)
[(1, 4), (2, 5), (3, 6)] 
```

但现在如果我有一些喜欢：

```
array = [   [1,2,3], [3,4,5] , [6,7,8] ... ] 
```

如何应用功能 zip 显示如下：

```
[(1,3,6,...),(2,4,7,...),(3,5,8,...),... (....) ] 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T15:14:38.447

您需要通过“splat”或“star”运算符[解包参数：](http://docs.python.org/2/tutorial/controlflow.html#unpacking-argument-lists)

```
zip(*array) 
```

例子：

```
>>> array = [   [1,2,3], [3,4,5] , [6,7,8]  ]
>>> print ( list(zip(*array)) )
[(1, 3, 6), (2, 4, 7), (3, 5, 8)] 
```

# c# - 资源和 ContentControl 模板

> ID：14565033
> 
> 赞同：0
> 
> 时间：2013-01-28T15:13:52.027
> 
> 标签：c#, wpf

在后面的代码中将 contentcontrols 模板设置为 xaml 时，我无法访问父 xaml 中包含的静态资源。

我有一个内容控制如下：

```
<ContentControl x:Name="ccMaterial">
  <ContentControl.Resources>
    <x:Array x:Key="BondListKey" Type="sys:Int32" 
             xmlns:sys="clr-namespace:System;assembly=mscorlib" />
  </ContentControl.Resources> 
</ContentControl> 
```

然后在代码隐藏中我将模板设置如下：

```
 string template = "<ControlTemplate xmlns='http://schemas.microsoft.com/winfx/2006/xaml/presentation'>" +
     "<ComboBox Grid.Column=\"1\" Grid.Row=\"0\" ItemsSource=\"{Binding Source={StaticResource BondListKey}}\"  />" +
"</ControlTemplate>";
ccMaterial.Template = (ControlTemplate)XamlReader.Parse(template); 
```

问题是当我尝试运行它时，我得到一个异常，说找不到资源“BondListKey”。谁能解释为什么？

如果您需要更多信息，请告诉我。

回应约翰斯的评论：

我有一个选项卡项，我希望能够根据用户在表单上其他位置的选择在该选项卡中显示不同的控件。例如，如果用户选择了汽车，我希望能够更改控制模板以包含用于发动机尺寸、燃料类型等的文本框，如果用户选择橙色，我希望能够更改控制模板以包含多样性和甜美。我怀疑我可以通过在选项卡上绘制所有可能的控件来获得此功能，然后根据数据触发器更改相关控件的可见/启用状态，但这可能涉及大量过滤控件（因为可能有很多用户选择类型）。理想情况下，我希望能够将所需的控件模板作为字符串提供，解析并分配给控件的模板，从而在运行时修改其内容。

请让我知道这是否没有意义或者您需要任何澄清:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:03:43.920

StaticResource 是在加载时执行一次的静态查找。如果当时没有找到目标资源，您会收到一个错误，这就是您现在看到的。因为您在 XamlReader 的上下文中加载模板，所以 XAML 中的资源不可用。在大多数情况下，解决方法是改用 DynamicResource 来提供一个在资源可用时更新的默认值，但 Binding Source 不是 DependencyProperty，因此不能使用 Dynamic。

无需使用 XamlReader，您只需在 XAML 中声明您的 XAML 并利用那里可用的上下文：

```
<ContentControl x:Name="ccMaterial">
    <ContentControl.Resources>
        <x:Array x:Key="BondListKey" Type="sys:Int32"
             xmlns:sys="clr-namespace:System;assembly=mscorlib" />
        <ControlTemplate x:Key="MyTemplate">
            <ComboBox Grid.Column="1" Grid.Row="0" ItemsSource="{Binding Source={StaticResource BondListKey}}"  />
        </ControlTemplate>
    </ContentControl.Resources>
</ContentControl> 
```

然后，您仍然可以使用以下代码从代码中加载：

```
ccMaterial.Template = ccMaterial.FindResource("MyTemplate") as ControlTemplate; 
```

# java - 安卓网络服务失败

> ID：14565042
> 
> 赞同：0
> 
> 时间：2013-01-28T15:14:24.657
> 
> 标签：java, android, web-services

大家好，我有一个 Web 服务可以帮助我完成登录过程，但是当我运行代码时，我收到错误消息“应用程序已意外停止......

这是我的网络服务：

```
package org.webserv.ws;

import java.sql.Connection;
import java.sql.DriverManager;
import java.sql.PreparedStatement;
import java.sql.ResultSet;

public class hello {
    public String authentication(String userName,String password) {
        String retrievedUserName = "";  
        String retrievedPassword = "";
        String status = "";

        try {
            Class.forName("com.mysql.jdbc.Driver");
            Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/android           app.","","admin");
            PreparedStatement statement =  con.prepareStatement("SELECT * FROM user account info. WHERE    username = '"+userName+"'AND password = '"+password+"'");
            ResultSet result = statement.executeQuery();

            while(result.next()){
                retrievedUserName = result.getString("username");
                retrievedPassword = result.getString("password");
            }

            if(retrievedUserName.equals(userName)&&retrievedPassword.equals(password)){
                status = "Success!";
            }
            else { status = "Login fail!!!"; }

        }
        catch(Exception e) { e.printStackTrace(); }

        return status; 
    }
} 
```

这里是logcat

> 212: E/AndroidRuntime(314): at dalvik.system.NativeStart.main(Native Method) 01-28 15:03:38.001: I/Process(314): 发送信号。PID：314 SIG：9

这是 AndroidLoginExampleActivity.java 文件

```
package com.androidlogin.ws;

import org.ksoap2.SoapEnvelope;
import org.ksoap2.serialization.PropertyInfo;
import org.ksoap2.serialization.SoapObject;
import org.ksoap2.serialization.SoapPrimitive;
import org.ksoap2.serialization.SoapSerializationEnvelope;
import org.ksoap2.transport.HttpTransportSE;

import android.app.Activity;
import android.os.Bundle;
import android.view.View;
import android.widget.Button;
import android.widget.EditText;
import android.widget.TextView;

public class AndroidLoginExampleActivity extends Activity {
private final String NAMESPACE = "http://ws.webserv.org";
private final String URL = "http://localhost:8080/androidapp./services/hello?wsdl";
private final String SOAP_ACTION = "http://ws.webserv.org/authentication";
private final String METHOD_NAME = "authentication";
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.main);
    Button login = (Button) findViewById(R.id.btn_login);
    login.setOnClickListener(new View.OnClickListener() {

        public void onClick(View arg0) {
            loginAction();

        }
    });
}

private void loginAction(){
    SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);

    EditText userName = (EditText) findViewById(R.id.tf_userName);
    String user_Name = userName.getText().toString();
    EditText userPassword = (EditText) findViewById(R.id.tf_password);
    String user_Password = userPassword.getText().toString();

  //Pass value for userName variable of the web service
    PropertyInfo unameProp =new PropertyInfo();
    unameProp.setName("userName");//Define the variable name in the web service method
    unameProp.setValue(user_Name);//set value for userName variable
    unameProp.setType(String.class);//Define the type of the variable
    request.addProperty(unameProp);//Pass properties to the variable

  //Pass value for Password variable of the web service
    PropertyInfo passwordProp =new PropertyInfo();
    passwordProp.setName("password");
    passwordProp.setValue(user_Password);
    passwordProp.setType(String.class);
    request.addProperty(passwordProp);

    SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);
    envelope.setOutputSoapObject(request);
    HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);

    try{
        androidHttpTransport.call(SOAP_ACTION, envelope);
           SoapPrimitive response = (SoapPrimitive)envelope.getResponse();

           TextView result = (TextView) findViewById(R.id.tv_status);
           result.setText(response.toString());

    }
    catch(Exception e){

    }
   } 
```

}

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:59:14.783

```
ksoap2-android-assembly-2.6.2-jar-with-dependencies.jar 
```

添加此 jar 文件 /libs 文件夹，以便`Eclipse ADT`自动将您的 jar 添加到应用程序的构建路径中。我希望这能帮到您。

谢谢！！

# javascript - HTML5 - 碰撞

> ID：14565055
> 
> 赞同：2
> 
> 时间：2013-01-28T15:14:59.477
> 
> 标签：javascript, html, collision

我正在开发一个自上而下的游戏，这个游戏将包含很多简单和复杂的碰撞。

在做了一些研究之后，我明白我必须始终将我的角色与我的代码中的“对象”进行比较——然后检查碰撞计算。

例如：

```
CheckCollisions(Player, Object); 
```

这意味着我必须将场景中的每个可碰撞对象添加到我的代码中：

```
CheckCollisions(Player, Building1);
CheckCollisions(Player, Building2);
CheckCollisions(Player, Trash);
CheckCollisions(Player, Bench1);
CheckCollisions(Player, Bench2);
CheckCollisions(Player, Office1);
CheckCollisions(Player, Office2); 
```

首先，我的对象甚至可能不是简单的矩形，它们可能是复杂的形状。其次，其中一些可能有自己的轮换。第三，如果我的场景中有数以万计的可收集对象会怎样？

难道没有更简单的方法来检查 HTML5/JS 游戏中的冲突吗？

这甚至可能吗？我真的只是在寻找一些建议和指示。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:26:02.653

游戏中的每个对象都有一个命名变量是非常少见的。通常，您将所有对象存储在一个数据结构（如数组）中，当您需要对所有对象执行某些操作时，您会对该数组执行 for 循环。

一些重要的对象，比如玩家角色，可以有一个自己的变量，但它们也应该在“所有对象”数组中，所以你不需要编写特殊的处理来包含玩家角色。

关于性能：当您检查所有内容时，需要执行的碰撞​​检查量呈二次方增加。但是当您只检查那些已经彼此接近的对象的碰撞时，您可以减少工作量。在检查碰撞之前，您：

1.  将比赛场地划分为矩形区域（这些区域必须至少与最大物体一样大）。
2.  然后将每个对象分配到其左上角所在的区域。
3.  然后，您获取每个区域，并检查其中的每个对象与该区域中的其他对象以及所有对象的碰撞，这三个区域从它的右侧、向下和右侧向下（对于与区域边界重叠的对象）。

当您有非常复杂的形状时，您还可以通过计算每个形状的边界矩形（它适合的最小可能矩形）来加速碰撞检测。在检查两个对象之间的碰撞之前，首先检查它们的边界矩形是否相交。如果不这样做，复杂形状就没有机会相交，您可以跳过所有复杂的计算。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:32:52.380

到目前为止，每个人都指出，对象数组比单独命名所有对象要好得多。

**一种可能对您有用的更简单的碰撞检测方法**是拥有一个跟踪所有占用空间的中心对象。例如，让我们暂时调用它`LocationTracker`。

假设您只使用 x 和 y 轴，您可以拥有一个存储 X 和 Y 位置的 Point 对象（如果您想花哨的话，可以使用 a `timestamp`）。`Point`每个对象在移动时都会发送一个包含它所占用的所有 s 的数组。例如，您可以调用`locationTracker.occupySpace(player[i], array(point(3,4), point(4,4), point(5,4))`等。

如果您的调用`occupySpace`返回 false，则没有任何点匹配并且您是安全的，如果它返回 true，那么您就会发生碰撞。

这样做的好处是，如果您有 x 个对象，而不是每次移动检查 x*x 次，而是检查 x 次最大值。

您不需要传递对象的所有点，只需要传递最外面的点。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T15:29:25.890

1 - 您不需要为游戏中的每个对象编写一行代码。将它们放入一个数组并循环该数组：

```
var collidableObjects = [Building1, Building2, Trash, Bench1, Bench2,Office1, Office2];
var CheckAllCollisions = function() {
    for (var i=0; i<collidableObjects.length; i++) {
        CheckCollisions(Player, collidableObjects[i]);
    }
} 
```

2 - 如果您有复杂的碰撞检查（即旋转的形状、多边形等），您可以先检查一个简单的矩形检查（或半径检查），然后更准确地检查第一个是否返回 true。

3 - 如果您计划拥有数万个对象，您应该拥有更智能的数据集合，例如按 X 坐标排序的对象，这样您就可以快速避免检查大于 Player.X+100 和小于 Player.X-100 的所有内容（使用二进制搜索），或将对象拆分为一个网格，然后只检查玩家周围 3x3 网格单元中的对象。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T15:24:09.193

更好的方法是将所有场景对象放入数组或树结构中，然后

```
for( var i=0; i<scene.length; i++ ) {
    scene[i].checkCollision( player );
} 
```

如果`.checkCollision()`为每个对象添加一个函数，则可以在其中处理任何特殊情况。

将播放器设置为矩形是个好主意，这样检查代码就不会变得太复杂。

使玩家对象的碰撞检查矩形略小于实际精灵；这使您的玩家的生活更轻松。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T15:27:05.567

首先，您应该始终将对象放在数组中。这包括敌人、子弹和其他类似的东西。这样，您的游戏就可以随意创建和销毁它们。

您似乎在谈论碰撞检查的实际频率，而不是碰撞检查方法。为此，我的建议是只对有限数量的对象进行碰撞检查。尝试使用网格，并且只检查与玩家在同一网格块中的对象的碰撞。

另一件有帮助的事情是在方法本身内部有很多“捷径”。在完成任何复杂的数学运算之前，可以快速轻松地检查这些内容。例如，您可以检查两个对象之间的距离。如果对象比它们最远的角更远，则不必检查碰撞。

您可以在自己独特的组合中使用很多这些方法。

# javascript - 如何根据屏幕尺寸在 div 中显示不同的图像？

> ID：14565056
> 
> 赞同：1
> 
> 时间：2013-01-28T15:15:03.157
> 
> 标签：javascript, html, css, image, jquery-plugins

所以我对此很陌生，但我想知道中间有一个大图像的网页，比如 github:windows 页面，你将如何根据屏幕大小处理该 div/区域内的图像？有没有办法让图像根据窗口大小或屏幕大小调整大小或被截断？使用媒体查询根据设备更改图片是典型的做法吗？这是如何在 css 中完成的（我可以在 css 中为 img 标签重新选择 src）？您是否必须使用窗口调整大小 js 事件来像砌体一样不断重新检查？

我知道这些问题很多（对不起），但我真的只是在寻找有关最佳实践方法的建议，因为我又是新手......

一直很感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:27:04.770

[自适应图像](http://adaptive-images.com/)可能是您正在寻找的。它提供基于屏幕大小的动态调整大小和图像缓存。它非常容易实现，并且依赖项很少。

# svg - IE10 在缩放时无法正确缩放背景 SVG（在 Surface/Windows 8 手机上）

> ID：14565057
> 
> 赞同：2
> 
> 时间：2013-01-28T15:15:04.173
> 
> 标签：svg, zooming, background-image, internet-explorer-10

有谁知道是否有解决方法？当用户缩放时，Internet Explorer 10 和 Window phone 8 无法正确缩放背景 SVG 图像。看起来 IE 在加载时光栅化了 SVG。

[这是一个示例：](http://cdpn.io/ABkiF)第一张图片是 SVG 作为背景图片。放大 MS Surface 或 Windows 8 手机，你会看到它模糊得可怕。

第二张图片是与 img 标签相同的 SVG。在 Surface 或 Windows 8 手机上缩放它，它可以按您预期的方式缩放（漂亮且干净）。

是否可以添加任何属性来使 IE10 正常运行？还是只是等待雷德蒙德的人来修复它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:27:06.300

问题是 IE 和 Firefox 等其他浏览器在显示 SVG 之前会对其进行光栅化，因此缩放时会变得块状。

解决此问题的最简单方法是使 SVG 文件大于所需大小。例如，如果用户可能进一步放大，则将尺寸加倍或更多。然后，您可以使用 CSS 调整 SVG 图像的大小，使其以正确的大小显示。这样图像自然会变大，不会变得块状，除非你进一步放大。在默认缩放级别，图像被缩小而不是放大，浏览器通常处理得更好。

[编辑：您可以在http://dbushell.com/2012/03/11/svg-all-fun-and-games/](http://dbushell.com/2012/03/11/svg-all-fun-and-games/)的“SVG 和 CSS 背景”标题下找到有关此问题的更多信息

# java - 按照 int 数组给定的顺序打印 String 数组

> ID：14565060
> 
> 赞同：1
> 
> 时间：2013-01-28T15:15:08.290
> 
> 标签：java, arrays, indexoutofboundsexception

我有一个带有随机数的 int 数组。而且我也已经填充了一个字符串数组。我试图以与数组中的顺序相对应的顺序显示（ `System.out.print`）数组。`String``int`

比如，如果`int array[]={3,1,2}`，如果是 inital `String array[]={"a","b","c"}`，那么我希望字符串数组打印为

```
stringArray[intArray]={c, a, b} 
```

在此示例中，`"a"`索引 0 处对应于数字 1，依此类推。

我想知道我是否可以做类似的事情（我试过了，但我得到了一个“超出范围”的异常，所以我想它仍然是可能的）：

```
for (int i=0; i<intArray.length; i++) {
    if(intArray[i] != 0) {
        System.out.println( stringArray[ intArray[i] ] );
    }
} 
```

我还尝试将循环的长度设置为length-1，但没有成功。

请注意，我试图使其以基本方式工作，没有对象或方法。我读过一些关于 a 的东西`TreeMap`，但这已经太先进了。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T15:17:36.990

请注意，数组索引**从零开始**，尝试减少从 int 数组检索到的值。

```
for (int i=0; i<intArray.length; i++) {
        if(intArray[i] != 0) {
            System.out.println( stringArray[ intArray[i]-1 ] );
        }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:19:12.277

您的循环很好，但您必须确保 int 数组在 [0..stringArray) 范围内具有 int 值。也就是说，如果您的 stringArray 大小为 5，则有效随机数在闭区间 [0,1,2,3,4]

# ruby-on-rails - 设计：注册时的关联模型：无法批量分配

> ID：14565063
> 
> 赞同：0
> 
> 时间：2013-01-28T15:15:25.507
> 
> 标签：ruby-on-rails, devise, user-management

`User`我使用默认选项在模型上设置设计。

我还有一个`Company`模型，需要在用户注册时添加添加的数据。公司所有者以相同的形式设置`User`登录方式和`Company`个人资料。

我用和设置`Company`模型，但在提交表单时我不断收到。[我为 Devise 用户](https://stackoverflow.com/questions/4307743/profile-model-for-devise-users)遵循Profile 模型？和来自 Stackoverflow 的其他人，但没有运气。`has_many :users``User``has_one :company``Can't mass-assign protected`

每当用户注册时，如何设置`User`和模型以添加必要的数据？`Company`用户数据`User`和公司数据`Company`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:36:54.130

您可以在创建用户后使用回调创建对象公司，例如在您的`User.rb`模型上添加：（我不知道您的公司属性，但您可以查看此示例）

```
after_create :first_company
 def first_company
  company = self.company.new(:title => "Company title here", :created_at => Time.now #add more attributes if required)
  board.save!
 end 
```

您必须添加`attr_accessible`从动作控制器接收到的属性。在您的模型上添加下一个代码以删除`Can't mass-assign protected`

`attr_accessible :title #...more attributes if required`

问候！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:43:02.887

我是如何让它工作的：

我的`User`模型有：

```
attr_accessible :company_attributes

belongs_to :company
accepts_nested_attributes_for :company 
```

我的`Company`模型有：

```
has_many :users 
```

`new.html.erb`from是添加了`devise/registrations`以下内容：

```
<% resource.build_company %>
<%= form_for(resource, :as => resource_name, :url => registration_path(resource_name)) do |f| %>
[ fields for User ]
<%= f.fields_for :company_attributes, resource.company do |company| %>
[ fields for Company ]
<% end %>
<% end %> 
```

# c# - 更改 XML 元素属性值时出现 NullReferenceException

> ID：14565064
> 
> 赞同：0
> 
> 时间：2013-01-28T15:15:26.060
> 
> 标签：c#, xml, windows-phone-7, nullreferenceexception, isolatedstorage

这是我更改 XML 元素属性值的方法：

```
using (IsolatedStorageFile myIsolatedStorage = IsolatedStorageFile.GetUserStoreForApplication())
{
    XDocument xml = null;
    using (IsolatedStorageFileStream isoFileStream = myIsolatedStorage.OpenFile("Stats_file.xml", FileMode.Open, FileAccess.Read))
    {
       xml = XDocument.Load(isoFileStream, LoadOptions.None);
       xml.Element("statrecords").SetElementValue("value", "2"); //nullreferenceexception
    }
    using (IsolatedStorageFileStream isoFileStream = myIsolatedStorage.OpenFile("Stats_file.xml", FileMode.Truncate, FileAccess.Write))
    {
       xml.Save(isoFileStream, SaveOptions.None);
    }
} 
```

在第 7 行我有 NullReferenceException。你知道如何无误地改变价值吗？

这是我的 XML 文件：

```
<?xml version='1.0' encoding='utf-8' ?>
<stats>
    <statmoney index='1' value='0' alt='all money' />
    <statrecords index='2' value='0' alt='all completed records' />
</stats> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:18:04.517

有两个问题。

你得到 a 的原因`NullReferenceException`是`xml.Element("statrecords")`它将尝试找到一个名为的*根*`statrecords`元素，而根元素被称为`stats`。

第二个问题是你试图设置一个*元素*值，而你想改变一个*属性*值，所以你应该使用[`SetAttributeValue`](http://msdn.microsoft.com/en-us/library/system.xml.linq.xelement.setattributevalue.aspx).

我想你想要：

```
xml.Root.Element("statrecords").SetAttributeValue("value", 2); 
```

编辑：我给出的代码适用于您提供的示例 XML。例如：

```
using System;
using System.Xml.Linq;

class Program
{
    static void Main(string[] args)
    {
        var xml = XDocument.Load("test.xml");
        xml.Root.Element("statrecords").SetAttributeValue("value", 2);
        Console.WriteLine(xml);
    }    
} 
```

输出：

```
<stats>
  <statmoney index="1" value="0" alt="all money" />
  <statrecords index="2" value="2" alt="all completed records" />
</stats> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:48:07.240

如果您`xml.Element()`在这种情况下使用，您将获得根元素。所以你应该使用[`Descendants()`](http://msdn.microsoft.com/en-gb/library/bb353813.aspx)和[`SetAttributeValue()`](http://msdn.microsoft.com/en-gb/library/system.xml.linq.xelement.setattributevalue.aspx)方法：

```
var elements = xml.Descendants( "stats" ).Elements( "statrecords" ).ToList(); 
//becuase you can have multiple statrecords
elements[0].SetAttributeValue("value", "2" ); 
```

# c# - 使用多个特殊异常类

> ID：14565072
> 
> 赞同：0
> 
> 时间：2013-01-28T15:15:47.237
> 
> 标签：c#, .net, exception, exception-handling

对于我们在我工作的公司开发的软件，我们使用第三方库，该库由我们经常联系的人开发。他的代码是用 C++ 编写的，我们在项目中使用 C#。

通常，他的库函数会返回错误代码。我决定使用不同的异常类来涵盖不同范围的错误代码。比如参数处理错误的一个异常类，主要操作错误的一个异常类，输入值错误的一个异常类等等。

他认为这不是一个好主意，并建议为库使用一个异常类来捕获所有错误，然后从 XML 文件中获取错误代码并将问题输出给用户。他认为，编写多个异常类是没有意义的。而且他还说他不能保证错误代码在不同版本的库中是相同的。

我认为拥有多个异常类是个好主意，因为：

1.  可能存在不同的情况，我们需要以不同的方式处理问题。也许当出现参数异常时，除了输出错误之外，还可以做其他事情。但是他认为他的库正在处理所有事情，我们应该停止操作并输出错误。除了显示错误消息之外，我也想不出许多我们需要以不同方式处理的案例的具体示例。但我觉得我们可能需要它，我担心我只是违反了 YAGNI 原则。
2.  我认为如果他错了，我们需要在不同的情况下以不同的方式处理事情，我将不得不引入条件代码（如果错误是 A 则执行此操作，如果 B 则执行此操作）。而且会很难处理。

我认为以一种我们可以以不同方式处理不同类型异常的方式来开发程序是一个更好的主意。但是那个人比我有更多的经验，而且他在公司里更有信誉（我是一个新的实习生）而且我对软件开发还很陌生，我觉得也许他是对的，我只是在尝试添加额外的代码，因为它看起来很漂亮，并且违反了 YAGNI 原则。

你认为我们应该上一门课还是多门课？如果您认为我们应该使用多个异常类，您的理由是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:24:40.820

如果错误代码可以从一个版本更改为另一个版本，那么再多的工作（或缺少它）都不会为您省去在某个时候必须以某种方式重新映射这些代码的麻烦。如果您有代码（或代码范围）异常，那么当错误代码确实发生变化时（您将重新安排抛出的异常，就像您一样*）*如果您没有专门的课程，则必须为一个例外调整消息）。

此外，在一般实践中，按照 .NET 约定，您应该为 BCL 提供的异常未恰当涵盖的特定异常创建一个专用的异常类（不包括使用其中的一些仅用于抽象的异常类）。

对于一些 Microsoft 输入，请考虑[以下内容](http://msdn.microsoft.com/en-gb/library/vstudio/ms229014%28v=vs.100%29.aspx)：

> 应用程序和库不应使用返回码来传达错误。

这：[_](http://msdn.microsoft.com/en-gb/library/vstudio/ms229021%28v=vs.100%29.aspx)

> 考虑抛出驻留在系统命名空间中的现有异常，而不是创建自定义异常类型。

但是，遵循[异常设计指南](http://msdn.microsoft.com/en-us/library/vstudio/ms229014%28v=vs.100%29.aspx)，

> [将] 帮助确保您在适当的情况下使用现有的例外，并在它们为您的图书馆增加价值的地方创建新的例外。

坚持你的枪。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:23:24.943

你是对的。对于不同类型的错误（对于不同的错误代码），最好使用多个异常类。异常在某种程度上是错误代码的继承者，因此最好使用异常。那家伙提供的方法再次使用错误代码，由一个异常类包装。

我想到了带有他的号码的 SqlException。通过检查错误代码来捕捉不同类型的错误真是太糟糕了。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:29:08.050

您绝对应该使用多个异常类。请注意，在命名空间中已经创建了大量的内置类，`System`例如`ArgumentNull`和朋友。

如果您想查看不使用多个异常的情况，请查看 COM interop。这是一个黑暗的地方，抛出了通用异常，并且它们的推理由一个 integer 来证明`HRESULT`。相信我，你不想重新创建它。

一个非常具体的用例是，例如，当您只想捕获某个异常时。IE

```
try
{
  lib.OpenFile(mypath);
}catch(FileNotFoundException e)
{
 //handle gracefully and possibly "ignore" this error 
} 
```

在这里，如果找不到文件，您想要执行一些其他操作。但是，如果`OpenFile`因为为空而引发异常`mypath`，您可能希望此异常冒泡并引发错误。（至少这样你就可以记录它或其他东西）。使用单个异常类，这变得更加痛苦

```
catch(MyException e)
{
  if(e.Reason=10)
  {
  }else{
    throw; //rethrow exception(which makes debugging more difficult)
  }
} 
```

# c# - 将内存流转换为双数组？

> ID：14565073
> 
> 赞同：2
> 
> 时间：2013-01-28T15:15:48.763
> 
> 标签：c#, fft, memorystream, naudio

我从波形文件中获得了原始音乐数据的 pcm 流，并希望将其转换为双数组（之后应用 fft）。

我现在得到的结果包含非常高或低的双数（1.0E-200 和 1.0E+300），我不确定这些是否正确。

这是我现在正在使用的代码：

```
WaveStream pcm = WaveFormatConversionStream.CreatePcmStream(mp3);
double[] real = new double[pcm.Length];
byte[] buffer = new byte[8];
int count = 0;

while ((read = pcm.Read(buffer, 0, buffer.Length)) > 0)
{
   real[count] = BitConverter.ToDouble(buffer, 0);
   count++;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:57:13.800

Your PCM stream is almost certainly 16 bit. So instead of `BitConverter.ToDouble` use `ToInt16` instead. Then divide by 32768.0 to get into the the range +/- 1.0

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-25T22:43:11.237

我意识到这个问题很老了；但是，我想我可能会提供这种替代方法来调用 BitConverter.ToDouble。

```
 public static double[] ToDoubleArray(this byte[] bytes)
    {
        Debug.Assert(bytes.Length % sizeof(double) == 0, "byte array must be aligned on the size of a double.");

        double[] doubles = new double[bytes.Length / sizeof(double)];
        GCHandle pinnedDoubles = GCHandle.Alloc(doubles, GCHandleType.Pinned);
        Marshal.Copy(bytes, 0, pinnedDoubles.AddrOfPinnedObject(), bytes.Length);
        pinnedDoubles.Free();
        return doubles;
    }

    public static double[] ToDoubleArray(this MemoryStream stream)
    {
        return stream.ToArray().ToDoubleArray();
    } 
```

# jquery - 如何使用 jQuery 从 DataTables 分页页面中删除一个类？

> ID：14565075
> 
> 赞同：0
> 
> 时间：2013-01-28T15:15:53.337
> 
> 标签：jquery, css, pagination, datatables, removeclass

这个问题很罗嗦，但让我解释一下：

我的 DataTable 表中有一个可以编辑的列（使用 jEditable）。

我为该列提供了一个类`jeditable`（通过 DataTables 选项），它采用了一些 CSS 格式（蓝色背景）。

然后我使用 jEditable 函数使列可编辑。

在特定点上，我想让该列不可编辑，并删除蓝色背景。

我调用`$(.jeditable).editable('disable')`它完全禁用了对我表的所有列的编辑。

我还要求`$('.jeditable').removeClass("jeditable");`删除蓝色背景 CSS 格式。正如预期的那样，这将从该列中删除蓝色背景。

但是，当我转到任何分页页面时，虽然它们不可编辑，但它们仍然是蓝色的，因为它们仍然有`jeditable`类。

是否有任何方法可以从 HTML 中的所有元素中删除一个类，无论它们是否可见？

# javascript - 从 Flash 调用 jQuery 函数

> ID：14565085
> 
> 赞同：4
> 
> 时间：2013-01-28T15:16:06.383
> 
> 标签：javascript, jquery, actionscript-3, actionscript

单击按钮时，我试图从我的 Flash 文件中调用 jQuery 函数。我试图在 stackoverflow 和 google 上搜索类似的问题，但我无法解决这个问题。

仅供参考，我在本地和在线都对此进行了测试，但没有结果。

Actionscript 3.0 调用：

```
    导入 flash.external.ExternalInterface；

    open_mc.buttonMode = true;
    open_mc.useHandCursor = true;

    open_mc.addEventListener(MouseEvent.CLICK, ClickFunc);
    函数 ClickFunc(evt:MouseEvent):void
    {
    ExternalInterface.call("openContainer", "open_god_dammit");
    }

```

jQuery：

```
    $(文档).ready(函数() {

        $("#eas_sidekick_container").hide();
        $("#eas_sidekick_container").css('width', '0px');

        函数 openContainer(open_god_dammit)
        {
            $("#eas_sidekick_container").show();
            $("#eas_sidekick_container").animate({
                宽度：'850px'              
            });
            $('html, body').animate({
                向左滚动：'850'
            });
        }   
    });

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:55:51.330

我终于找到了问题所在，这是由于我在 html 中嵌入 flash 的方式。

由于我在调用函数时以某种方式使用了 swfobject，因此它在调用函数时无法协同工作，因此我也将函数移至 document.ready 调用之外的函数上方，因此它是解决方案的一部分。

因此，如果您想调用外部 jQuery 函数，请不要使用 swfobject 将 Flash 嵌入到您的 html 文件中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:18:43.580

您的 openContainer 函数应该在内部 jQuery 函数之外：

```
$(document).ready(function() {

    $("#eas_sidekick_container").hide();
    $("#eas_sidekick_container").css('width', '0px');

});

function openContainer(open_god_dammit)
{
    $("#eas_sidekick_container").show();
    $("#eas_sidekick_container").animate({
        width: '850px'              
    });
    $('html, body').animate({
        scrollLeft: '850'
    });
} 
```

# c# - 使用操作系统的文化，而不是语言

> ID：14565090
> 
> 赞同：1
> 
> 时间：2013-01-28T15:16:12.220
> 
> 标签：c#, .net, cultureinfo, culture

在我们开发的应用程序中，我曾多次遇到同样的问题：

我们希望允许用户以他的格式（日期，货币，...）编辑/显示它的数据，但我们只想用英文显示应用程序（出于多种原因，它是一个专业的国际应用程序，在一个域中我们主要用英语交流）。

当我们管理整个应用程序时没有问题，但是我使用的大多数第三方专业框架（Telerik，DevExpress）都使用`CurrentCulture`正确的格式和相应的语言显示我的数据。

所以，即使我的电脑是英文的，我的区域设置设置为`fr-CH`，我也会有所有的第三方用户控件都是法文的。

我无法将 设置`CurrentCulture`为特定的文化并将我的用户控件的格式设置为其他格式（我会放弃我的默认格式）并且我不能让 成为默认格式，`CurrentCulture`因为我的第三方组件会使用另一种语言.

我试图建立自己的文化（`CultureAndRegionInfoBuilder`），但没有成功。当我更改语言时，我的应用程序仍然使用用户特定的语言。

**具体问题**

我正在使用日期编辑器（基本，它有一个文本输入，可以弹出一个日历）。我想在我的操作系统语言环境中显示日期（ch-FR，所以 2013 年 1 月 15 日将是“15.01.2013”​​），但我不希望当我显示日历月/日名称时以法语显示。

正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:22:30.570

为您的目的存储原始`CultureInfo`文件并尝试在 中编辑属性`CurrentCulture`和属性，也许这会解决您的问题。`CurrentUICulture``CurrentThread``System.Threading.Thread`

```
Thread.CurrentThread.CurrentCulture = new CultureInfo("en-US");
Thread.CurrentThread.CurrentUICulture = new CultureInfo("en-US"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T08:21:34.983

我通过自定义文化信息解决了我的问题：

```
private static void UpdateCultureInfoWithoutLangage()
{
    //We initialize a en-US cultureInfo and change all formats + number infor related
    CultureInfo cultureInfoEn = new CultureInfo("en-US");
    CultureInfo cultureInfoEnClone = (CultureInfo)cultureInfoEn.Clone();

    //Setting DateTimeFormat(Without changing translations)
    cultureInfoEnClone.DateTimeFormat.FirstDayOfWeek = CultureInfo.CurrentCulture.DateTimeFormat.FirstDayOfWeek;
    cultureInfoEnClone.DateTimeFormat.FullDateTimePattern = CultureInfo.CurrentCulture.DateTimeFormat.FullDateTimePattern;
    cultureInfoEnClone.DateTimeFormat.LongDatePattern = CultureInfo.CurrentCulture.DateTimeFormat.LongDatePattern;
    cultureInfoEnClone.DateTimeFormat.LongTimePattern = CultureInfo.CurrentCulture.DateTimeFormat.LongTimePattern;
    cultureInfoEnClone.DateTimeFormat.MonthDayPattern = CultureInfo.CurrentCulture.DateTimeFormat.MonthDayPattern;
    cultureInfoEnClone.DateTimeFormat.ShortDatePattern = CultureInfo.CurrentCulture.DateTimeFormat.ShortDatePattern;
    cultureInfoEnClone.DateTimeFormat.ShortTimePattern = CultureInfo.CurrentCulture.DateTimeFormat.ShortTimePattern;
    cultureInfoEnClone.DateTimeFormat.TimeSeparator = CultureInfo.CurrentCulture.DateTimeFormat.TimeSeparator;
    cultureInfoEnClone.DateTimeFormat.YearMonthPattern = CultureInfo.CurrentCulture.DateTimeFormat.YearMonthPattern;
    cultureInfoEnClone.NumberFormat = CultureInfo.CurrentCulture.NumberFormat;
    Thread.CurrentThread.CurrentCulture = cultureInfoEnClone;
    Thread.CurrentThread.CurrentUICulture = cultureInfoEnClone;
    Application.CurrentCulture = cultureInfoEnClone;
} 
```

# javascript - 如何从 jQuery .click() 内部调用方法并保持上下文？

> ID：14565095
> 
> 赞同：1
> 
> 时间：2013-01-28T15:16:40.520
> 
> 标签：javascript, jquery

我想拥有许多“infoItem”元素，每个元素都有自己的 jQuery 来管理它们。谁能告诉我为什么当我调用“displayText()”时，该函数中的元素不是包含点击处理程序的元素中的元素，而是页面上的最后一个元素？

![在此处输入图像描述](../Images/b40fd22c01c20cdd9ebaecd0c3822b40.png)

```
<html>
    <head>
        <script type="text/javascript" src="systemJavascript/jquery-1.8.3.min.js"></script>
    </head>
    <body>
        <div class="infoItem">
            <div class="menu">
                <span class="menuOne">one</span>
                <span class="menuTwo">two</span>
            </div>
            <div class="content">intro message</div>
        </div>
        <div class="infoItem">
            <div class="menu">
                <span class="menuOne">eins</span>
                <span class="menuTwo">zwei</span>
            </div>
            <div class="content">Introtext</div>
        </div>
    </body>

</html>
<script type="text/javascript">

    var INFOITEM = INFOITEM || {};

    INFOITEM.initialize = function(infoItem) {
        var elemMenuOne;
        var elemMenuTwo;
        var elemContent;

        this.defineVariables = function() {
            elemMenuOne = infoItem.find('.menuOne');
            elemMenuTwo = infoItem.find('.menuTwo');            
            elemContent = infoItem.find('.content');            
        }

        this.decorateElements = function() {
            elemMenuOne.css('background-color', 'beige');
            this.decorateAsLink(elemMenuOne);
            elemMenuTwo.css('background-color', 'beige');
            this.decorateAsLink(elemMenuTwo);
        }

        this.functionalizeElements = function() {
            that = this;
            elemMenuOne.click(function(e) {
                that.displayText('ONE');
            });
            elemMenuTwo.click(function(e) {
                that.displayText('TWO');
            });
        }

        this.displayText = function(text) {
            elemContent.html('you selected ' + text);
        }

        this.decorateAsLink = function(elem) {
            elem.css({
                'cursor' :'pointer',
                'text-decoration' : 'underline',
                'font-weight' : 'normal'
            });
        }

        this.defineVariables();
        this.decorateElements();
        this.functionalizeElements();
    }

    $('.infoItem').each(function(){
        INFOITEM.initialize($(this));
    });

</script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:21:57.047

`INFOITEM`是一个全局变量，因此您要为页面中的每个项目重置它，因此它始终指向最后一个元素：

```
$('.infoItem').each(function(){
        INFOITEM.initialize($(this));
    }); 
```

您最好将其滚动到 Jquery pluin 类型结构中，然后将其绑定到一个元素并传入相关元素。

这是一个让您入门的样板：

[http://stefangabos.ro/jquery/jquery-plugin-boilerplate-revisited/](http://stefangabos.ro/jquery/jquery-plugin-boilerplate-revisited/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T15:18:01.810

我解决这个问题的方法是为每个元素添加一个 ID，然后在点击事件中再次获取该项目，然后我可以将其传递给我可以适当操作它的任何方法，而不是内部变量。

```
 <html>
    <head>
        <script type="text/javascript" src="systemJavascript/jquery-1.8.3.min.js"></script>
    </head>
    <body>
        <div id="infoItem_123" class="infoItem">
            <div class="menu">
                <span class="menuOne">one</span>
                <span class="menuTwo">two</span>
            </div>
            <div class="content">intro message</div>
            <div class="contentOne">you clicked one</div>
            <div class="contentTwo">you clicked two</div>
        </div>
        <div id="infoItem_456" class="infoItem">
            <div class="menu">
                <span class="menuOne">eins</span>
                <span class="menuTwo">zwei</span>
            </div>
            <div class="content">Introtext</div>
            <div class="contentOne">du hast auf eins geklickt</div>
            <div class="contentTwo">du hast auf zwei geklickt</div>
        </div>
    </body>

</html>
<script type="text/javascript">

    var INFOITEM = INFOITEM || {};

    INFOITEM.initialize = function(infoItem) {
        var elemMenuOne;
        var elemMenuTwo;
        var elemContent;
        var elemContentOne;
        var elemContentTwo;
        var itemId;

        this.defineVariables = function() {
            elemMenuOne = infoItem.find('.menuOne');
            elemMenuTwo = infoItem.find('.menuTwo');            
            elemContent = infoItem.find('.content');            
            elemContentOne = infoItem.find('.contentOne');            
            elemContentTwo = infoItem.find('.contentTwo');            
            itemId = infoItem.attr('id');
        }

        this.decorateElements = function() {
            elemMenuOne.css('background-color', 'beige');
            this.decorateAsLink(elemMenuOne);
            elemMenuTwo.css('background-color', 'beige');
            this.decorateAsLink(elemMenuTwo);
            elemContentOne.hide();
            elemContentTwo.hide();
        }

        this.functionalizeElements = function() {
            that = this;
            elemMenuOne.click(function(e) {
                that.displayText($('#'+itemId), elemContentOne.html());
            });
            elemMenuTwo.click(function(e) {
                that.displayText($('#'+itemId), elemContentTwo.html());
            });
        }

        this.displayText = function(clickedInfoItem, text) {
            clickedInfoItem.find('.content').html(text);
        }

        this.decorateAsLink = function(elem) {
            elem.css({
                'cursor' :'pointer',
                'text-decoration' : 'underline',
                'font-weight' : 'normal'
            });
        }

        this.defineVariables();
        this.decorateElements();
        this.functionalizeElements();
    }

    $('.infoItem').each(function(){
        INFOITEM.initialize($(this));
    });

</script> 
```

# powershell - 每当导入 pscx 模块时，如何编写一些代码来运行？

> ID：14565096
> 
> 赞同：0
> 
> 时间：2013-01-28T15:16:42.160
> 
> 标签：powershell, pscx

导入模块时，Powershell 社区扩展 (pscx) 会覆盖标准的“帮助”函数，以使用提供的“less”函数，该函数又调用随 pscx 提供的 less.exe 命令。不幸的是，less.exe 使我广泛使用的“Console2”命令外壳包装器崩溃，所以我想覆盖 pscx 所做的事情。

我知道 PSCX 有一个偏好选项来帮助使用标准的“更多”功能而不是“更少”。我也知道我可以手动覆盖“less”功能。但是我只是偶尔使用 pscx，所以我不会将它加载到我的配置文件中，如果我忘记了这些覆盖中的任何一个，我可以通过键入“帮助”这样简单的操作来崩溃我的 powershell 会话！

我想要的是能够在我的配置文件中放置一些东西，以检测何时导入 pscx，然后覆盖 less 函数并适当地设置帮助首选项。

是否可以在 powershell 中定义这样的“导入后”类型的事件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:19:47.160

在你`$profile`添加`set-alias less more.com`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:25:54.760

您可以在模块加载后更改它：

```
$Pscx:Preferences.PageHelpUsingLess=$false 
```

# java - 带有 where 子句的 SQL 选择语句

> ID：14565097
> 
> 赞同：5
> 
> 时间：2013-01-28T15:16:50.957
> 
> 标签：java, mysql, sql

如果没有硬编码值，我将如何编写这个 sql 语句？

```
resultSet = statement
    .executeQuery("select * from myDatabase.myTable where name = 'john'");
// this works 
```

而是有类似的东西：

```
String name = "john"; 
resultSet = statement
    .executeQuery("select * from myDatabase.myTable where name =" + name);
// Unknown column 'john' in 'where clause' at
// sun.reflect.NativeConstructorAccessorImpl.newInstance0...etc... 
```

提前致谢..

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-28T15:18:46.793

**以目前的方式构建 SQL 查询是一个糟糕的主意，因为它为各种 SQL 注入攻击打开了大门**。要正确执行此操作，您必须改用[准备好的语句](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)。这也将解决您目前显然遇到的各种逃避问题。

```
PreparedStatement statement = connection.prepareStatement("select * from myDatabase.myTable where name = ?");    
statement.setString(1, name);    
ResultSet resultSet = statement.executeQuery(); 
```

请注意，这`prepareStatement()`是一个昂贵的调用（除非您的应用程序服务器使用语句缓存和其他类似设施）。从理论上讲，最好只准备一次语句，然后多次重用它（尽管*不是*同时）：

```
String[] names = new String[] {"Isaac", "Hello"};
PreparedStatement statement = connection.prepareStatement("select * from myDatabase.myTable where name = ?");

for (String name: names) {
    statement.setString(1, name);    
    ResultSet resultSet = statement.executeQuery();
    ...
    ...
    statement.clearParameters();
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T15:19:07.190

您缺少字符串周围的单引号，您的代码已更正：

```
String name = "john";
String sql = "select * from myDatabase.myTable where name = '" + name + "'";
// Examine the text of the query in the debugger, log it or print it out using System.out.println
resultSet = statement.executeQuery(sql); 
```

在执行查询之前打印/记录查询的文本以查看它是否正常。

如果你要做很多类似的查询，只有常量发生变化，考虑使用[准备好的语句](http://docs.oracle.com/javase/tutorial/jdbc/basics/prepared.html)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T16:50:07.147

这应该工作：

```
String name = "john"; 
resultSet = statement
    .executeQuery("select * from myDatabase.myTable where name =" + "'" + name + "'"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T15:18:01.253

您需要在值周围加上引号（'john' 而不是 john）...

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T15:26:29.143

尝试以下操作：

```
String name = "john"; 

resultSet = statement
      .executeQuery("select * from myDatabase.myTable where myTable.name = '" + name + "'"); 
```

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-01-28T15:18:51.450

`name`因为它是一个字符串，所以在您的值周围加上引号。

```
"select * from myDatabase.myTable where name ='" + name + "'" 
```

# python - SyntaxError: print 'string1 is: ', string1 中的无效语法

> ID：14565098
> 
> 赞同：0
> 
> 时间：2013-01-28T15:17:04.543
> 
> 标签：python, compiler-errors

> **可能重复：**
> [“打印”附近的语法错误？](https://stackoverflow.com/questions/12593502/syntaxerror-near-print)

我是python的第一次用户。我刚刚在我的计算机上安装了 Python 3.3，更新了 PATH 并尝试运行我刚刚从教程中复制并粘贴到新文件中的第一个 python 程序。我收到一条错误消息：

```
File "C:\Users\bmahnke\Desktop\python.py", line 23
      print 'string1 is: ', string1

SyntaxError: invalid syntax 
```

我不确定问题出在哪里，因为我是从教程站点获得的，我不确定，但几乎，他们不会在那里放置无法编译的文件。所以我想知道我做错了什么

这是我正在使用的python代码：

```
#! C:\Python33\python.exe

string1 = 'In this class,'
string2 = 'I am learning to program in'
string3 = 'PYTHON.'

print 'string1 is: ', string1
print 'string2 is: ', string2
print 'string3 is: ', string3
print 'Put them altogether and you get:'
print string1, string2, string3
print string1 + string2 + string3 
```

任何帮助表示赞赏，谢谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T15:19:28.763

[在 Python 3.3 中，`print()`是一个函数](http://docs.python.org/3/library/functions.html#print)（在 Python 2.x 中，它是一个语句）。所以现在正确的语法是：

```
print('string1 is: ', string1) 
```

有一个名为`2to3.py`将 Python 2 转换为 3 的工具。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:20:30.773

问题是在 Python 3`print`中不是语句，而是普通函数。只需将参数放在函数周围，就`(`可以了。`)``print`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:19:28.820

此代码适用于 Python 2.x。Python 3.x 中的打印语句与 Python 文档的[本节不同：](http://docs.python.org/3.0/whatsnew/3.0.html#print-is-a-function)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T15:19:30.613

在python3中，`print`是一个函数：

```
print('string1 is: ', string1) 
```

ETC

# javascript - jQuery流沙忽略溢出：动画上的自动

> ID：14565099
> 
> 赞同：0
> 
> 时间：2013-01-28T15:17:07.257
> 
> 标签：javascript, jquery, css, quicksand

我正在使用 jQuery 插件 Quicksand 列出一些文档供我的用户访问，我有数百个文档，所以我从一开始只显示其中的几个。

列表 (ul) 被构建为一次显示大约 20 个文档标题，其余的被隐藏。像[这样](https://www.dropbox.com/s/dauiikq5ht55yib/DefaultList.png)。在列表底部，您有一个指向*Show more*的链接，当您按下它时，会加载更多标题。父 div 没有扩展列表的高度，而是`overflow`具有 value属性`auto`。

该列表由 javascript 构建，它从 MySQL 数据库加载文档并隐藏除指定数量之外的所有文档。当您按“显示更多”（瑞典语中的“Visa fler”，如图所示）时，它会重新加载文档并从隐藏功能中排除一些其他文档。

问题是这样的：当我按*Show more*时，它​​会加载更多标题，但列表会忽略`overflow: auto`，并且列表会扩展到整个页面，就像[这样](https://www.dropbox.com/s/1mylwxdihwgx05q/ListWhileLoading.png)。大约一秒钟后，当它完成加载时，`overflow`应用了 -property 并且一切正常，但是加载时看起来不太好。

你有什么想法如何解决这个问题吗？你还需要知道什么吗？

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T12:06:06.613

我找到了一种解决方案。我补充说`atomic: true`，我丢失了一些动画，但它不再在父 div 之外流动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-05T13:32:35.820

快速浏览一下，似乎可以通过插件在容器上设置内联样式（宽度和高度）。您可能希望在过渡结束后覆盖它们，例如，

```
target.quicksand(source, {}, function () {
   target.css('width', '');
   target.css('height', '');
}); 
```

# java - 滑块左上角的文本框是什么？

> ID：14565100
> 
> 赞同：0
> 
> 时间：2013-01-28T15:17:07.240
> 
> 标签：java, gwt, slider

我在 SliderBarSimpleHorizo​​ntal 实例的左上角发现了一个隐藏的小文本框：

```
<input type="text" tabindex="-1" role="presentation" style="opacity: 0; height: 1px; width: 1px; z-index: -1; overflow: hidden; position: absolute;"> 
```

谁能告诉我这是什么黑客？
（gwt-slider-bar 主页：[http](http://code.google.com/p/gwt-slider-bar/) ://code.google.com/p/gwt-slider-bar/ ）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:17:52.630

这是 GWT 以与 Firefox 兼容的方式使小部件可聚焦的方式（Firefox 支持`tabindex="-1"`所有元素以使其可聚焦，但不支持`accesskey`不可默认聚焦的元素）：[https ://code.google.com /p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/client/ui/impl/FocusImplStandard.java](https://code.google.com/p/google-web-toolkit/source/browse/trunk/user/src/com/google/gwt/user/client/ui/impl/FocusImplStandard.java)

而且这个项目中的滑杆会延伸`FocusPanel`（这本身就是有争议的，因为它们不是面板）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:54:56.033

我刚刚浏览了源代码。我只看到 texbox 的一个用例，它位于 trunk/SliderBarMVP/src/com/kiouri/sliderbar/client/demo/interractive/InrerractiveSample.java

[SliderBarSimpleHorizo​​ntal](http://code.google.com/p/gwt-slider-bar/source/search?q=SliderBarSimpleHorizontal%20&origq=SliderBarSimpleHorizontal%20&btnG=Search%20Trunk)没有引用文本框或输入元素！！！

您可以通过代码搜索 - [http://code.google.com/p/gwt-slider-bar/source/search?q=SliderBarSimpleHorizo​​ntal+&origq=SliderBarSimpleHorizo​​ntal+&btnG= Search+Trunk](http://code.google.com/p/gwt-slider-bar/source/search?q=SliderBarSimpleHorizontal+&origq=SliderBarSimpleHorizontal+&btnG=Search+Trunk)

# javascript - (function(){})() 有这方面的文档吗？

> ID：14565101
> 
> 赞同：3
> 
> 时间：2013-01-28T15:17:15.620
> 
> 标签：javascript

> **可能重复：**
> [JavaScript 中的匿名函数如何工作？](https://stackoverflow.com/questions/1140089/how-does-an-anonymous-function-in-javascript-work)
> [这个 JavaScript 片段是什么意思？](https://stackoverflow.com/questions/6771406/what-does-this-javascript-snippet-mean)

我在我的脚本中使用：

```
(function(){
...[code]..
})() 
```

我找不到有关此的文档，当此表单采用 args 时，我看到了脚本。

```
(function(){
...[code]..
})(arg1,arg2) 
```

有人有关于这个javascript函数的链接或很好的解释吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:20:39.473

它被称为自执行匿名函数。

[这](http://markdalgleish.com/2011/03/self-executing-anonymous-functions/)是第一个谷歌结果，它提供了一个可靠的概述。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:19:02.800

这只是普通的 javascript。

你实例化一个匿名函数，然后用 2 个参数调用它。

我认为令人困惑的部分是操作的即时方面。

您本可以（以更高的成本）：

```
var hnd = function() {...};
hnd(arg1,arg2); 
```

# android - 无法从 GCMIntentService.class 启动活动

> ID：14565102
> 
> 赞同：0
> 
> 时间：2013-01-28T15:17:21.237
> 
> 标签：android, android-intent, android-activity

我有一个 GCMIntentService 类，在其中我得到了一些从我的服务器返回的消息。当某条消息到达我的应用程序时，我希望能够启动某个活动。例如，如果在我的 onMessage() 方法（onMethod() 是方法，并且在应用程序中从服务器接收消息的第一个位置）到达字符串 =“tomatoe”，我想开始一个特定的活动。我现在知道的开始活动的方式是：

```
Intent resactivity = new Intent(getApplicationContext(), ResponseActivity.class);
            resactivity.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
            startActivity(resactivity); 
```

问题是 GCMIntentService 不是扩展活动的类，我相信我不能为此目的使用此代码。是否有某种方法可以通过在该类中创建意图来从非活动的类启动活动？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T15:25:26.547

> 问题是 GCMIntentService 不是扩展活动的类，我相信我不能为此目的使用此代码。

`GCMIntentService`继承自`Context`，这`startActivity()`是定义的地方。

但是请记住，您的用户可能会用干草叉或机关枪攻击您，因为您会在随机时间点弹出活动，也许是在他们正在做的其他事情的中间。请将此行为配置为可配置，否则请非常确定您的用户会欣赏这些中断。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:40:50.667

您应该可以这样做： getApplication().startActivity(resactivity);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:27:56.690

当通知到达我的应用程序时，我发布了我通常用来启动活动的方法。查看所有配置并删除您不感兴趣的配置：

```
@Override
protected void onMessage(Context context, Intent intent) {
    String app_name = context.getString(R.string.app_name);
    String message =  intent.getStringExtra("payload");
    String ns = Context.NOTIFICATION_SERVICE;
    NotificationManager notificationManager = (NotificationManager) context.getSystemService(ns);
    int icono = R.drawable.ic_stat_notify;
    long time = System.currentTimeMillis();
    Notification notification = new Notification(icono, app_name, time);
    notification.defaults |= Notification.DEFAULT_SOUND;
    Intent notificationIntent = new Intent(context, ResponseActivity.class);
    PendingIntent pendingIntent = PendingIntent.getActivity(context, -1, notificationIntent, PendingIntent.FLAG_UPDATE_CURRENT);
    notification.when = System.currentTimeMillis();  
    notification.flags |= Notification.FLAG_AUTO_CANCEL; 
    notification.setLatestEventInfo(context, app_name, message, pendingIntent);
    notificationManager.notify(0, notification);
} 
```

# ember.js - Bootstrap 手风琴与 ember

> ID：14565104
> 
> 赞同：0
> 
> 时间：2013-01-28T15:17:33.997
> 
> 标签：ember.js

您好，我有一个属于我的小型 ember 应用程序的小问题。 [JSFiddle](http://jsfiddle.net/Z63Ur/6/)上传在这里。我使用 bootstrap 手风琴来可视化我的门票。当我单击“单击”时，它会在我的视图中添加另一个手风琴。但遗憾的是它无法打开或使用。我动态创建的每个手风琴都无法打开或关闭。没有抛出错误或异常，从我的角度来看，一切都应该正常工作。我的点击功能如下所示：

```
click: function() {
    this.counter++,
    name = this.name+this.counter.toString(),
    tre = App.Ticket.create({
        Text: "try",
       id: name
    });

    this.pushObject(tre);
}}); 
```

所属的html在这里：

```
<div class="accordion-group">
    {{#each content}}
       <div class="accordion-heading">
           <a class="accordion-toggle" data-toggle="collapse" data-parent="#accordion2" {{bindAttr href="id"}}>
                 Ticket ID/Störfall
           </a>
        </div>
        <div {{bindAttr id="id"}} class="accordion-body collapse in ">
             <div class="accordion-inner">
                 {{Text}}
             </div>
         </div>
     {{/each}}
</div> 
```

我希望你能帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:30:59.087

您可以将动作助手添加到手风琴链接标题

```
<a class="accordion-toggle" data-toggle="collapse" 
data-parent="#accordion2" 
{{bindAttr href="item.id"}} 
{{action "click" item target="view"}}>
     Ticket ID/Störfall
</a> 
```

然后在您的视图中实现一个点击处理程序事件

```
 App.TicketView = Em.View.extend({
        click:function(context) {
            var el = this.$('a[href='+context.get('id')+']');
            el.toggleClass('collapsed');
            this.$('#'+el.attr('href')).toggleClass('in');
        }
    }); 
```

这是一个工作[小提琴](http://jsfiddle.net/Z63Ur/13/)

# sql-server - sql计算本月的'x'工作日

> ID：14565107
> 
> 赞同：1
> 
> 时间：2013-01-28T15:17:37.680
> 
> 标签：sql-server

如果我想写一个查询，说我想知道当月的第四个工作日。你会怎么做？我不知道从哪里开始，主要是因为 7 月 4 日把我搞砸了……

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:27:02.157

大多数企业都有一个内部日历，表示组织的工作天数。这通常不包括周六、周日和组织选择遵守的任何公共假期。

我的第一条建议是看看这样的日历是否可供您使用。如果是，您的查询将变得微不足道。

假设这样的表： -

```
CREATE TABLE [dbo].[CalendarDays](
    [CalendarDayId] [int] IDENTITY(1,1) NOT NULL,
    [CalendarDate] [datetime] NOT NULL,
    [IsWorkingDay] [bit] NOT NULL,
) 
```

..您的查询变为...

```
SELECT MIN(CalendarDate) FROM CalendarDays 
WHERE CalendarDate >= '2013-01-01' AND IsWorkingDay = 1 
```

好消息是，即使您的组织没有日历，您也可以**创建一个**日历，用您对什么是工作日和什么不是工作日的最佳理解来填充它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:48:07.287

一个带有一些逻辑的简单循环将日期增加一天并检查工作日而不是假期就可以了。

```
BEGIN
-- some table with known holiday values
DECLARE @tblHolidays TABLE(holiday DATETIME)
INSERT INTO @tblHolidays(holiday) VALUES ('2013-7-4')
-- parameters
DECLARE @month DATETIME
DECLARE @businessDay INT
SET @month = '2013-7-1'
SET @businessDay = 5
-- logic, loop and find only business days
DECLARE @count INT
SET @count = 0
WHILE 1=1
    BEGIN
    IF DATENAME(weekday, @month) IN ('Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday')
     AND @month NOT IN (SELECT * FROM @tblHolidays)
        BEGIN SET @count = @count + 1 END
    IF @count < @businessDay
        BEGIN SET @month = @month + 1 END
        ELSE
        BEGIN BREAK END
    END
SELECT @month
END 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-28T15:31:12.590

试试下面的查询......它会帮助你......

```
DECLARE @startdate DATETIME 
DECLARE @count INT 
DECLARE @NDay INT 

SET @startdate='07/01/2013'  --Date of the month
SET @count=0 
set @NDay = 4 --Nth businessday

WHILE @count < @NDay 
  BEGIN 
      IF Datename(dw, @startdate) NOT IN ( 'Saturday', 'Sunday' ) 
        BEGIN 
            SET @startdate=Dateadd(dd, 1, @startdate) 
            SET @count=@count + 1 
        END 
      ELSE 
        BEGIN 
            SET @startdate=Dateadd(dd, 1, @startdate) 
        END 
  END 

SELECT @startdate - 1 'BussinessDay' 
```

结果`2013-07-04 00:00:00.000`.... 7 月的第 4 个工作日

# linux - 每次启动时 ifup eth0

> ID：14565110
> 
> 赞同：16
> 
> 时间：2013-01-28T15:17:51.503
> 
> 标签：linux, ubuntu-11.04

04和网卡默认内核不支持。所以，我将内核升级到 3.2 并且它支持它。但是，每次我重新启动机器时，都需要`sudo ifup eth0`启动它。

如何修改一些配置以自动调出 eht0？（不写`/etc/rc.local`，因为我挂载了NFS `/etc/fstab`，它需要先挂载`rc.local`）。

* * *

## 回答 #1

> 赞同：29
> 
> 时间：2013-01-28T15:27:51.553

在 Ubuntu 中，您必须为`/etc/network/interfaces`系统上的每个网络接口编辑和设置默认配置数据。

将两者`auto`和您的接口名称放在接口配置之前的单独行中，以便在启动时启动它。

示例：当你的配置是这样的

```
iface eth0 inet static
address 192.168.1.5
netmask 255.255.255.0
gateway 192.168.1.254 
```

你必须把它改成这个

```
auto eth0
iface eth0 inet static
address 192.168.1.5
netmask 255.255.255.0
gateway 192.168.1.254 
```

[网卡配置](http://www.cyberciti.biz/faq/setting-up-an-network-interfaces-file/)

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-28T15:34:10.157

你可以eidt**`/etc/sysconfig/network-scripts/ifcfg-eth0`**文件。搜索`ONBOOT`文件内容。并更改`ONBOOT=no`为`ONBOOT=yes`.

# php - 带有文本和图像的多部分表单数据

> ID：14565118
> 
> 赞同：0
> 
> 时间：2013-01-28T15:18:16.677
> 
> 标签：php, forms, multipartform-data

我有一个表单，用户必须在其中输入一些文本和图像。

```
<?php
 if(isset($_POST['name']))
 {
   echo "name";
   if(isset($_FILES['image']))
     echo "image";
 }
 echo <<<F
   <form method="post" action="test.php" enctype="multipart/form-data">
   <input type="text" name="name">
   <input type="file" name="image">
   </form>
 F;
?> 
```

在这个示例中，即使我没有选择任何图像，文本“图像”也会得到回显。我应该进行哪些修改，以便仅在我选择图像时才回显“图像”，如果没有，则提交表单的其余部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:26:12.860

改变

```
 if(is_uploaded_file($_FILES['image']['tmp_name'])) echo "image"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:33:13.837

你可以这样尝试：

```
if (isset($_FILES['image']) && $_FILES['image']['error'] == 0) 
```

**错误**字段包含一个 PHP 错误代码，当没有文件上传时它等于 4。

您可以在此处找到更多信息：http: [//php.net/manual/en/features.file-upload.errors.php](http://php.net/manual/en/features.file-upload.errors.php)

# angularjs - 指令中的 2 个“postLink”函数有什么区别？

> ID：14565121
> 
> 赞同：11
> 
> 时间：2013-01-28T15:18:36.160
> 
> 标签：angularjs, angularjs-directive

从 angularjs 的文档中，定义指令时，有一个`postLink`in`compile`和一个`postLink`in`link`

```
myModule.directive('directiveName', function factory(injectables) {
  var directiveDefinitionObject = {
    priority: 0,
    template: '<div></div>',
    templateUrl: 'directive.html',
    replace: false,
    transclude: false,
    restrict: 'A',
    scope: false,
    compile: function compile(tElement, tAttrs, transclude) {
      return {
        pre: function preLink(scope, iElement, iAttrs, controller) { ... },
        post: function postLink(scope, iElement, iAttrs, controller) { ... }
      }
    },
    link: function postLink(scope, iElement, iAttrs) { ... }
  };
  return directiveDefinitionObject;
}); 
```

他们之间有什么区别？我注意到`postLink`in`link`的参数小于in 的参数`compile`。还有其他区别吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-28T15:20:34.130

它们没有什么不同，您所拥有的只是文档中的伪代码。postLink 函数只是最重要的一个，因此有多种声明方式。

这里以[Plunker](http://plnkr.co/edit/c8WVtojWGVRAyEu0iLuW)为例...

...这是一些伪代码，显示了 postLink 函数的不同声明：

```
app.directive('dir1', function () {
   return function(scope, elem, attr) {
       //this is the same
   };
});

app.directive('dir2', function () {
   return {
       link: function(scope, elem, attr) {
           //this is the same
       }
   };
});

app.directive('dir3', function () {
   return {
      compile: function compile(tElement, tAttrs, transclude) {
         return {
           post: function postLink(scope, elem, attrs) {
              //this is the same
           }
         }
      }
   };
}); 
```

...你只需要一个。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-06-21T17:10:10.493

本质区别在于，在预链接功能中，子元素还没有被链接。但在post-link功能中，它有。

这对 DOM 操作有影响。由于链接的过程可能会进一步操作 DOM，因此只有当它的子节点已经被链接时，指令才可以安全地操作 DOM - 这仅在 post-link 函数中是正确的。

# ruby-on-rails - 在创建操作中在 Rails 控制器中创建或新建

> ID：14565122
> 
> 赞同：3
> 
> 时间：2013-01-28T15:18:36.303
> 
> 标签：ruby-on-rails

在 Rails 中，我们定义了`create`2 种方式的动作。有什么区别？

```
def create
  @shop = Shop.new(params[:shop])
  if @shop.save
    flash[:success] = 'Thanks for adding new shop.'
    redirect_to @shop
  else
    flash[:error] = 'Error adding review,  please try again.'
    redirect_to @shop
  end
end

# or

def create
  @shop = Shop.create(params[:shop])
  if @shop.save
    flash[:success] = 'Thanks for adding new shop.'
    redirect_to @shop
  else
    flash[:error] = 'Error adding review,  please try again.'
    redirect_to @shop
  end
end 
```

考虑到我们已经有：

```
def new
  @shop = Shop.new
end 
```

哪个更合适？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:28:55.127

此`def new`操作仅用于`New`视图（控制器`new`中的操作`Shop`将对应于`app/views/shop/new.html.erb`文件） - 它不进行任何创建：

```
def new
  @shop = Shop.new
end 
```

在该操作中没有提及`params[:shop]`，因为参数还不存在 - 这就是您在`New`视图中收集的内容。

您`def create`的操作是实际创建数据库条目的操作：

```
def create
  @shop = Shop.new(params[:shop])
  if @shop.save
    flash[:success] = 'Thanks for adding new shop.'
    redirect_to @shop
  else
    flash[:error] = 'Error adding review,  please try again.'
    redirect_to @shop
  end
end 
```

您正在使用`.new`而不是，`.create`以便您可以进行验证。此外，`Shop.new`调用实际上并没有创建记录——它就是`@shop.save`这样做的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:22:16.560

第一种方法不符合您的期望：

```
def create
  @shop = Shop.new(params[:shop]) # This won't create a new record on Shops table unless...
  @show.save                      # ...you do this
end

def create
  @shop = Shop.create(params[:shop]) # This will create a new record if everything is fine
  if @shop.save # This is redundant
    # ...
  end
end 
```

调用`create`then`save`是多余的。如果验证不成功，该`create`方法将尝试创建新记录并静默失败。另一方面，`save`将尝试创建新记录，但`nil`如果验证失败则返回，因此您可以在*if/else*块中使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T15:31:34.437

如果使用`Model.create`，则不需要显式保存对象。create 方法将为您执行此操作。如果你使用`Model.new`了，你需要通过@object.save 来保存对象。新方法不会为您做到这一点。

**使用 Model.new：**

```
def create
  @shop = Shop.new(params[:shop])
   if @shop.save
    flash[:success] = 'Thanks for adding new shop.'
    redirect_to @shop
  else
    flash[:error] = 'Error adding review,  please try again.'
    redirect_to @shop
  end
end 
```

**使用 Model.create：**

```
def create
  @shop = Shop.create(params[:shop])
   # if @shop.save (This is not required)
  if @shop 
    flash[:success] = 'Thanks for adding new shop.'
    redirect_to @shop
  else
    flash[:error] = 'Error adding review,  please try again.'
    redirect_to @shop
  end
end 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T15:21:40.533

在`create`控制器动作中，`Shop.new`没有跟随是没有用的`@shop.save`。通常它被分成这两个步骤来处理验证错误。我们使用来自用户的数据初始化商店。如果数据正常，我们保存商店。如果存在验证错误，我们会告诉用户重试。

或者我们需要在将记录保存到数据库之前进行一些复杂的属性初始化。

```
@user = User.new params[:user]
@user.reputation = fetch_reputation_from_stackoverflow

if @user.save
  # the usual steps here 
```

## 回复：问题编辑

> 考虑到我们已经有：

```
def new
  @shop = Shop.new
end 
```

行动中`new`的内容完全无关紧要。如果您的验证可能失败（或者您的模型可能无法成功创建），请使用`new`+`save`对。如果您确定输入数据正常并且模型将始终保存，则仅使用`create`（以下`save`是多余的）。

# matlab - 在处理二进制数时，如何从 char 格式转换为 double 格式？

> ID：14565125
> 
> 赞同：2
> 
> 时间：2013-01-28T15:18:43.157
> 
> 标签：matlab, binary, char, format, double

我有一段代码输出我想要的但格式错误

```
for k=1:100
    bin(k,:)=dec2bin(randi([0 31]),5);
end 
```

我希望输出是一个 100x5 双数组，每个单元格一位（0 或 1 个值）。

我已经尝试使用该`double()`功能...

```
for k=1:100
    bin(k,:)=double(dec2bin(randi([0 31]),5));
end 
```

...但这会返回正确的格式和错误的值。

我的行话可能有点离题，我很抱歉（我在错误的上下文中使用了单元格、双精度等吗？）

感谢你们对我的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:29:07.857

有很多方法可以做你想做的事。最简单的实际上是从一开始就生成二进制数组，没有循环：

```
bin = rand(100, 5) > 0.5 
```

其他选择：

1.  如果您有一个整数数组并且想要将其转换为位，则可以使用[`bitget`](http://www.mathworks.com/help/matlab/ref/str2num.html)而不是`dec2bin`在循环内：

    ```
    bin(k, :) = bitget(randi([0 31]), 5:-1:1) 
    ```

2.  如果您已经有一个表示二进制数的字符串数组，并且想要对其进行操作，则可以用空格分隔位，然后应用[`str2num`](http://www.mathworks.com/help/matlab/ref/bitget.html)：

    ```
    bin = reshape(str2num(sprintf('%c ', bin)), size(bin)) 
    ```

# gradle - gradle 没有任务排序所以如何实现这一点

> ID：14565131
> 
> 赞同：3
> 
> 时间：2013-01-28T15:18:52.110
> 
> 标签：gradle

因此，如果我们有一个 drop db 任务和一个 create db 任务以及一个 start server 任务和一个 runqtest 任务，我们想要

1.  有独立的任务，所以我可以自己调用 gradle dropdb （或其他）
2.  让 runqtest 依赖于 dropdb、createdb、populatedb、startserver

上面的数字 2 显然需要订购或将中断，并且 gradle 不像 ant 那样遵守任何订单。如何做到这一点？（我在这篇文章中读过很多关于这个的内容

[http://markmail.org/thread/wn6ifkng6k7os4qn#query:+page:1+mid:hxibzgim5yjdxl7q+state:results](http://markmail.org/thread/wn6ifkng6k7os4qn#query:+page:1+mid:hxibzgim5yjdxl7q+state:results)

尽管当您拥有 1\. e 取决于 c 和 d 2\. c 取决于 b、a 3\. d 取决于 a、b

由于 e 决定 c 将是第一个，构建将运行 b,a,c,d 所以它是完全确定的。我确实同意，如果您有订单，尽管像 ant 一样，并行化构建要困难得多，因为您不能只并行运行 c 和 d，因为订单很重要（而且从用户的角度来看更糟，大多数情况都无关紧要时间）。

如果他们会添加一个dependsOnOrdered，那么我们可以在绝对必要时进行订购。

或者有谁知道我们应该怎么做？这个问题是在 2009 年针对 gradle 提出的！！！！我仍然没有在 gradle 中看到关于如何在需要时执行订购的东西的文档。

院长

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T19:37:35.833

这是一种解决方案：

```
if (gradle.startParameter.taskNames.contains("qatest") {
    qatest.dependsOn startServer
    startServer.dependsOn populatedb
    populatedb.dependsOn createdb
    createdb.dependson dropdb 
} 
```

这种方法的局限性在于，它仅`qatest`在命令行上提供的初始任务的一部分时才有效。有时这已经足够好了，您可以添加检查以确保用户不会出错。

如果您更频繁地需要它，您可以添加一个小助手方法，以便更轻松地声明这样的工作流。类似的东西`workflow(qatest, dropdb, createdb, populatedb, startserver)`。

另一种方法是创建任务的“克隆”，并（仅）在克隆之间添加任务依赖项。同样，您可以将其隐藏在一些抽象后面。例如，`createWorkflowTask("startServer") { ... }`可以同时创建和配置 a`startServer`和`startServerWorkflow`task。

综上所述，Gradle 的可编程性使得克服“工作流”在 Gradle 中还不是一流概念的问题成为可能。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-05-10T15:36:26.620

Gradle 1.6 添加了一个替代解决方案，但它仍在孵化中：`mustRunAfter`. 请参阅[发行说明](http://www.gradle.org/docs/1.6/release-notes#force-a-task-to-run-after-another-task,-without-adding-a-dependency)。

# php - 在浏览器中编辑html

> ID：14565133
> 
> 赞同：8
> 
> 时间：2013-01-28T15:18:59.053
> 
> 标签：php, html, css, security

许多人都知道，人们可以使用大多数浏览器上提供的检查元素功能来编辑网站的 html 源代码。这是非常无害的，因为编辑只发生在本地机器上，而不是实际网站上。我担心它可能存在的一个安全问题，我想知道是否有人知道它的答案。

此功能如何影响提交的表单。通常可以隐藏字段并存储运行特定查询所需的值。我想知道人们是否在隐藏字段上更改了该值会损害网站的安全性？是否存在与此相关的任何安全威胁？我有办法轻松防御它，但我只是想知道这是否是一个值得防御的缺陷。

谢谢您的帮助。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T15:20:35.957

是的，是的，这是一个巨大的安全问题。

永远不要相信用户提供的数据，这意味着，通过代理，通过网页提交。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:21:45.973

这当然会产生负面影响。您必须确保访问者没有更改表单中的重要值。例如，在选择输入中，确保所选值是您自己在服务器端放入代码中的值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:25:00.710

是的，这绝对不仅值得考虑，而且是强制性的。

这就是为什么客户端验证还不够，**您需要对所有内容进行服务器端验证**。

这里有很多话要说，但这里有一些你应该考虑的检查：

*   文本输入的长度（它们适用的地方，它们应该在大多数情况下适用）。
*   允许的字符。我怀疑有很多名字中有数字。
*   数据类型（如果您需要一个数字，请确保它是一个数字）。
*   确保从选择和复选框收到的值实际上在预期数据列表中
*   特定格式（例如电子邮件地址）。
*   检查上传文件的文件扩展名、MIME 类型和大小

还有更多，这是我目前能想到的。

# matlab - 没有循环的Matlab矩阵运算

> ID：14565134
> 
> 赞同：2
> 
> 时间：2013-01-28T15:19:00.350
> 
> 标签：matlab, loops, optimization, for-loop, matrix

我对执行某些数组操作的代码有疑问。它变得太慢了，因为我正在使用循环。我正在尝试一段时间来优化这段代码，并用更少或没有循环来重写它。直到现在都没有成功。你能帮我解决这个问题吗：

```
YVal = 1:1:100000;
M_MAX = 1000;
N_MAX = 2000;
clear YTemp
tic
for M=1:1:M_MAX 
    for N = 1:1:N_MAX 
       YTemp(M,N) = sum(YVal (N+1:N+M)  ) - sum(YVal   (1:M)  );  
    end
end 
```

对于大`N_MAX`而`M_MAX`这两个循环的执行时间是非常高的。我该如何优化呢？

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:41:26.323

假设`YVal`大于`N_MAX+M_MAX`

```
sum1 = cumsum( YVal(1:(M_MAX+N_MAX)) ); % sum1(M) = sum(YVal(1:M)) 
```

如果我没记错的话

```
sum( YVal( N+1:N+M ) ) = sum1( N + M ) - sum1( N ) 
```

因此

```
YTemp( M, N ) = sum1( N + M ) - sum1( N ) - sum1( M ) 
```

使用[`ndgrid`](http://www.mathworks.com/help/matlab/ref/ndgrid.html)

```
[M N] = ndgrid( 1:M_MAX, 1:N_MAX );
YTemp = sum1( N + M ) - sum1( N ) - sum1( M ); 
```

我做对了吗？

**编辑：**
另一个没有`ndgrid`

```
sum1 = cumsum( YVal( 1 : (N_MAX+M_MAX) ) );
YTemp = bsxfun( @minus, ...
            bsxfun( @minus, ...
                sum1( bsxfun( @plus, 1:N_MAX, (1:M_MAX)' ) ) , sum1 ),...
                    sum1' ); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:28:06.507

您应该能够通过将不变项提升到内部循环之外来加快速度，例如

```
for M=1:1:M_MAX 
    sum2 = sum(YVal(1:M));
    for N = 1:1:N_MAX 
       YTemp(M,N) = sum(YVal(N+1:N+M)) - sum2;  
    end
end 
```

# perl - 用于大量文件解析的 perl 分叉实现

> ID：14565136
> 
> 赞同：0
> 
> 时间：2013-01-28T15:19:02.983
> 
> 标签：perl, fork

我已经实现了用于解析大文件的分叉概念，如下所示，但似乎不正确。我在代码中遇到的一些问题是一些变量没有被访问。

```
 #ALL the variable in Complete CAPS are global variable
    TLog("MSG",1,"Parent process $$");
    TLog("MSG",4,"Creating child process for $$");
    my $MAX_FORK       = 2;
    my $forkCount      = 0;
    my $processCounter = 0;
    my @childId   = ();

    foreach my $fileNameFasta (@{$ref_array_file}) {

        my $pid = fork();

        if ( $pid ) {

            TLog("MSG",1,"child process created : $pid");
            push @childId,$pid;

            $forkCount++;
        }
        elsif ( $pid == 0 ) {

            my $outputFile = $STAT_FILE;
            my $pidLocal   = $childId[$processCounter]; #Use of unintialized variable

            $outputFile =~s/\d{1,}\.txt$/$pidLocal\.txt/og; #hence naming of all ouput file are same                
            TLog("MSG",1,"For $pidLocal Creating output file for stat : $outputFile");

            open my $outputfh,'>',$outputFile;
            GenerateTupleCountFile($outputfh,$fileNameFasta);    
            close  $outputfh;

            TLog("MSG",5,"Calculation completed for $pidLocal");
            TLog("MSG",5,"Plz check the $outputFile");
            $processCounter++;

            exit(0);

        }

        if ( $forkCount >= $MAX_FORK ) {
            foreach (@childId) {
                   my $tmp = waitpid($_, 0);
                   TLog("MSG",5,"Process completed for with pid $tmp");
            }
        }
    }
} 
```

如果我错了，请给我正确的方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:29:32.743

一旦分叉发生，父母和孩子都是自主的。

`@childID`在之后，您永远不会在数组中设置任何内容，到`fork`那时孩子知道那里为它写了什么已经太晚了。你需要`getpid()`在孩子中使用，或者魔法变量—— `$$`，或者（如果你使用过[`use English '-no_match_vars';`](http://perldoc.perl.org/perlvar.html)）`$PID`或者`$PROCESS_ID`。父级从不递增`$processCounter`。

类似地，子级增加其副本`$processCounter`，但这不会影响父级中的变量。

# javascript - Chrome 和 IE 上的 Javascript XML 读取错误

> ID：14565137
> 
> 赞同：-1
> 
> 时间：2013-01-28T15:19:04.123
> 
> 标签：javascript, xml, xmlhttprequest

它适用于 Firefox，但不适用于 Chrome 和 IE。

我在本地试试。我在 httpObj.send(null) 上收到错误；线。

我该如何处理这个问题？

**HTML 文件**

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>XML READ</title>
    <script type="text/javascript">
//---
        function GetXml() {

            if (window.XMLHttpRequest) {

                var httpObj = new XMLHttpRequest();
            } else {

                var httpObj = new ActiveXObject("Microsoft.XMLHTTP");
            }

            httpObj.open("GET", "notification.xml", false);

        // Error Starts Here    
            httpObj.send( null );

            var xmlDocument = httpObj.responseXML;

            var xmlEl = xmlDocument.getElementsByTagName("haber");

  //--          
            for (i = 0; i < xmlEl.length; i++) {

                for (j = 0; j < xmlEl[i].childNodes.length; j++) {

                    if (xmlEl[i].childNodes[j].nodeType != 1) {
                        continue;
                    }

                    alert(xmlEl[i].childNodes[j].firstChild.nodeValue);
                }

            }

        }

    </script>
</head>
<body onload="GetXml()">
</body>
</html> 
```

**XML 文件**

```
 <?xml version="1.0" encoding="utf-8" ?>
    <notifications>

        <notification id="001">
            <name>First</name>
        </notification>

        <notification id="002">
            <name>Second</name>

        </notification>

    </notifications> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:53:47.737

如果您替换，您的代码可以在 chrome 和 IE 中运行

`xmlDocument.getElementsByTagName("haber");`

和

`xmlDocument.getElementsByTagName("notification");`

此外，当您说`I try it on local`确保它托管在服务器中时，例如 apache 并且服务器正在运行

**旧评论：** 检查有关浏览器可战斗性和正确 ajax 调用的链接

[http://www.w3schools.com/ajax/ajax_xmlfile.asp](http://www.w3schools.com/ajax/ajax_xmlfile.asp)

# javascript - Javascript - ZeroClipboard 复制的内容没有得到更新

> ID：14565140
> 
> 赞同：2
> 
> 时间：2013-01-28T15:19:17.330
> 
> 标签：javascript, jquery, copy, zeroclipboard

我有 2`pre`个块，每个块都用一个 div 包裹，并有一个复制按钮。

```
<div class="code">
    <a class="copy">copy</a>
    <pre>content of 1st pre</pre>
</div>

<div class="code">
    <a class="copy">copy</a>
    <pre>content of 2nd pre</pre>
</div> 
```

```
$('.code').on('mouseenter', function() {
    var copy_button = $(this).find('.copy');
    var clip = new ZeroClipboard(copy_button, {moviePath: 'ZeroClipboard.swf'});
    var content = $(this).find('pre').text();

    // at this point, content is always right
    // alert(content);

    clip.on('mousedown', function(client, args) {
        // the content doesn't get updated here
        alert(content);

        clip.setText(content);
    });
}); 
```

问题是，它似乎总是复制`first-mouseentered-div`.

假设我`first`鼠标进入 div2，然后单击复制，内容 ( `content of 2nd pre`) 复制得很好。但是当我尝试复制第一个 pre 时，内容没有得到更新，它仍然是`content of 2nd pre`.

我在这里做错了什么？我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:22:09.543

好的，我找到了另一个 jQuery 插件 - `zClip`，它是使用`Zero Clipboard library`. 它更易于使用和配置。

```
$('.copy').zclip({
    path: 'ZeroClipboard.swf',
    copy: function() {
        var tocopy = $(this).parent().find('pre').text();
        // formatting content
        // ...
        return tocopy;
    },
    beforeCopy:function(){
        // do something before copy
    },
    afterCopy:function(){
        // do something after copy
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:27:11.863

您继续在鼠标输入时添加越来越多的事件。这应该取消绑定事件，因此您不必每次都添加：

```
.on('mouseout', function(){
    $(this).unbind();
}); 
```

# objective-c - 使用 AVFoundation 从相册中选择图像

> ID：14565144
> 
> 赞同：0
> 
> 时间：2013-01-28T15:19:25.260
> 
> 标签：objective-c, cocoa-touch, ios6, avfoundation

是否可以实现`AVFoundation`：

从类似的相册中挑选图像`UIImagePickerControllerSourceTypePhotoLibrary`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:51:07.570

不是 AVFoundation，但您可以使用[AssetsLibrary](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/AssetsLibraryFramework/_index.html#//apple_ref/doc/uid/TP40009730)。从 UIImagePickerViewController 文档：

> 要创建用于浏览照片库的完全自定义的图像选择器，请使用 Assets Library 框架中的类。例如，您可以创建一个自定义图像选择器，以显示更大的缩略图图像，利用 EXIF 元数据（包括时间戳和位置信息），或者与 Map Kit 等其他框架集成。有关详细信息，请参阅资产库框架参考。从 iOS 4.0 开始可以使用 Assets Library 框架进行媒体浏览

照片应用程序可用的任何图像都可以使用`ALAssetsLibrary`类访问。请注意，您将完成您的工作；您必须创建 UI 以从头开始从照片库中挑选图像。

参考[可以在这里](http://developer.apple.com/library/ios/#documentation/AssetsLibrary/Reference/AssetsLibraryFramework/_index.html#//apple_ref/doc/uid/TP40009730)

# css - 如何修复 Internet Explorer 中丢失的徽标

> ID：14565151
> 
> 赞同：0
> 
> 时间：2013-01-28T15:19:32.733
> 
> 标签：css, image, internet-explorer

在这个网站：[renovationm.com](http://www.renovationm.com/)我在顶部和任何浏览器中都有一个徽标，除了 explorer 9（如客户所说）它很好，在 explorer 中它消失了！是什么导致它消失以及如何修复它..或排除故障？

我考虑包括一个像[http://code.google.com/p/ie7-js/](http://code.google.com/p/ie7-js/)这样的库，但我不认为对于那个特定的问题会有所帮助

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T15:21:04.457

也许 http:// 之后路径中的额外 / 是 IE 中的问题：

```
<img src="http:///renovationM.com/jobs/logo.png"> <!-- Notice the extra / -->
                 ^ 
```

# asp.net - 在图片框中显示图像（在本地机器中）的最佳方式是什么

> ID：14565154
> 
> 赞同：0
> 
> 时间：2013-01-28T15:19:41.487
> 
> 标签：asp.net, filepath

我正在 ASP.NET 中开发一个项目，但我被困在这种情况下；

我在本地机器上有一万张图像。我需要在 ASP.Net 的图片框中显示它们。我无法将所有图像复制到 Web 应用程序文件夹。所以我必须给出文件路径

> \\server\something\something.jpg

但这当然行不通。

我找到了一些解决方案，但它们不是很清楚，所以我没有成功。

所以我该怎么做 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:58:09.817

1.  在 IIS 中，在您的站点中定义一个虚拟子目录，目录的物理位置为`\\server\something`. 然后您将能够将图像虚拟 url 指定为`~/something.jpg`.

2.  使用代码隐藏返回图像（`aspx`页面或`ashx`处理程序） - 然后，在授予 IIS 用户足够的权限后，Web 应用程序将读取所需的图像并将其放入响应流中。

# centos - 无法在 CENTOS 上的节点中运行流星包

> ID：14565175
> 
> 赞同：0
> 
> 时间：2013-01-28T15:20:31.477
> 
> 标签：centos, meteor, centos6

我有一个流星应用程序，在 OSX 下的计算机上运行良好，但是当我将它复制到我的 CENTOS 6 服务器时，它给了我以下错误：

```
node main.js 

server/server.js:95
  Fiber(function () {
  ^
ReferenceError: Fiber is not defined
    at run (/root/bundle/server/server.js:95:3)
    at Object.<anonymous> (/root/bundle/server/server.js:156:1)
    at Module._compile (module.js:449:26)
    at Object.Module._extensions..js (module.js:467:10)
    at Module.load (module.js:356:32)
    at Function.Module._load (module.js:312:12)
    at Module.require (module.js:362:17)
    at require (module.js:378:17)
    at Object.<anonymous> (/root/bundle/main.js:1:63)
    at Module._compile (module.js:449:26) 
```

我确实安装了纤维包`npm install fibers`

为了避免任何冲突，我还将 server.js 中的端口号更改为 8282 而不是 80。

感谢您的帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T12:20:23.953

事实证明，您必须在流星项目中安装光纤，而不是作为全局包

# mysql - MySql 更新子选择

> ID：14565176
> 
> 赞同：0
> 
> 时间：2013-01-28T15:20:33.957
> 
> 标签：mysql, subquery

我有一个 mysql 数据库表，其中有一个电子邮件列，其中最多可以包含两封由分号分隔的电子邮件。我想要实现的是将电子邮件字段中的第二个电子邮件地址写入另一列 email2 这是我迄今为止尝试过的但没有成功：

```
UPDATE user AS u
SET email2 = (SELECT SUBSTRING_INDEX(email, ';', -1)
              FROM user
              WHERE user.id=u.id)
WHERE username LIKE "%;%" 
```

在搜索这个问题时，有一些解决方案在子查询中取消了第二个子查询，但没有一个真正符合我的问题。

如果有人有解决方案，请发布。我被困了至少2个小时。

非常感谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T15:22:20.337

无需使您的生活复杂化：

```
UPDATE user 
SET email2 = SUBSTRING_INDEX(email, ';', -1) 
WHERE username LIKE '%;%'; 
```

并清理同一查询中的第一列

```
UPDATE user 
SET 
  email2 = SUBSTRING_INDEX(email, ';', -1),
  email = SUBSTRING_INDEX(email, ';', 1),
WHERE username LIKE '%;%'; 
```

# ruby-on-rails - 为 i18n 格式化货币

> ID：14565181
> 
> 赞同：0
> 
> 时间：2013-01-28T15:20:44.773
> 
> 标签：ruby-on-rails, ruby-on-rails-3.2

在 config\application.rb 我添加了这行代码：

```
config.i18n.default_locale = :de 
```

然后我在这样的视图中写了一些用于测试的东西，但它仍然用美元格式化钱。它不应该通过我给它的语言环境来格式化吗？

```
<p>woo! I have this much money: <%= number_to_currency(9800.56) %></p> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:32:49.987

您需要在此处安装“de”语言环境`/config/locales/de.yml`才能正常工作，您可以在[此处](https://github.com/svenfuchs/rails-i18n/blob/master/rails/locale/de.yml)获取。如果找不到语言环境文件，rails 会假定它没有所需的信息并恢复为使用“en”。[请参阅number_to_currency locale conversion](https://stackoverflow.com/questions/7237592/number-to-currency-problem)中的类似问题。

# jquery - 单选按钮选择不使用jquery改变值

> ID：14565187
> 
> 赞同：0
> 
> 时间：2013-01-28T15:21:05.690
> 
> 标签：jquery

我有一组用于捐赠金额的单选按钮。有一个单选按钮可以停止您的捐赠，还有一个按钮可以处理表格。

这是HTML。我没有列出所有的单选按钮，但你明白了：

```
<form id="donationForm">

    <label for="xDollar1" class="amount" style="font-weight:bold;">$1</label>        
    <input type="radio" id="xDollar1" name="xDollar" value="1" <cfif #donation_amount# EQ 1>checked</cfif>>

    <label for="xDollar2" class="amount" style="font-weight:bold;">$2</label>
    <input type="radio" id="xDollar2" name="xDollar" value="2" <cfif #donation_amount# EQ 2>checked</cfif>>

    <cfif donation_amount neq 0>
        <input type="radio" id="xDollar0" name="xDollar" value="0">
    </cfif>

    <input type="button" id="sButton" value="Submit Dollar Energy Fund Donation">

</form> 
```

现在的jQuery：

```
$(document).ready(function(){
    $("input[name=xDollar][type=radio]").change(function(){
    //I have tried both setting a variable and using straight jquery in the following if statement
        if($("input[name=xDollar][type=radio]:checked").val() == 0){
            $("#sButton").val("Stop Donation");
        }
        ...
    }
}); 
```

我已经创建了一个实际工作的小提琴，但在我的网站上，它不是。有什么建议么？

[http://jsfiddle.net/rbmako69/sEedT/6/](http://jsfiddle.net/rbmako69/sEedT/6/)

# magento - 我的带有重写 url 的模块不加载布局

> ID：14565190
> 
> 赞同：0
> 
> 时间：2013-01-28T15:21:13.247
> 
> 标签：magento

我创建了模块并将 url 路径重写为：

```
<rewrite>
  <xxx>
    <from><![CDATA[#^/signup/(.*)#]]></from>
    <to>/xxx/index/index/address/$1/</to>
  </xxx>
</rewrite> 
```

并描述了此操作的布局：

```
<?xml version="1.0" encoding="UTF-8"?>
<layout version="0.1.0">

  <xxx_index_index translate="label">
    <remove name="yyy" /> 
```

如果 url 是“/xxx/index/index/address/yyy”，那么一切正常。但是如果 url 路径是“/signup/yyy”，那么控制器可以正常工作，但不会加载它的布局。

**UPD**：我在我的控制器中添加了句柄（感谢@mpaepper）“xxx_index_index”，然后使用以下方法获取句柄：`Zend_Debug::dump($this->getLayout()->getUpdate()->getHandles());`

```
array(6) {
  [0] =&gt; string(7) &quot;default&quot;
  [1] =&gt; string(13) &quot;STORE_default&quot;
  [2] =&gt; string(44) &quot;THEME_frontend_private_sales_theme_1_default&quot;
  [3] =&gt; string(17) &quot;signup_test2552_index&quot;
  [4] =&gt; string(19) &quot;customer_logged_out&quot;
  [5] =&gt; string(24) &quot;xxx_index_index&quot;
} 
```

相同的结果 - 默认布局。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:00:43.923

我对这些类型的重写不是很熟悉，但似乎重写没有设置正确的布局句柄。我会尝试`in your controller action`使用以下方法添加句柄：

```
$this->getLayout()->getUpdate()->addHandle('xxx_index_index'); 
```

# java - 使用不执行此操作的接口中指定的返回和参数类型相关的泛型实现方法

> ID：14565203
> 
> 赞同：4
> 
> 时间：2013-01-28T15:21:59.267
> 
> 标签：java, generics, visitor-pattern

在访问者模式中使用 java 泛型时，我遇到了一些麻烦。

我的代码是这样的：

```
public interface MyInterfaceVisitor<A, B> {
    public A visitMyConcreteObject(MyConcreteObject object, B parameter);
}

public interface MyObject {
    public <A, B> A accept(MyInterfaceVisitor<A, B> visitor, B parameter);
}

public class MyConcreteObject implements MyObject {
    @Override
    public <A, B> A accept(MyInterfaceVisitor<A, B> visitor, B parameter) {
        return visitor.visitMyConcreteObject(this, parameter);
    }
}

public class MyConcreteVisitor implements MyInterfaceVisitor<????> {

    @Override
    public <X extends C> X visitMyConcreteObject(MyConcreteObject object, Class<X> parameter) {
        // Do a lot of things.
        // Return an instance of the given class.
    }

    // This method is the entry point of the MyConcreteVisitor.
    public <X extends C> void someOtherMethod(Class<X> parameter) {
        MyObject m = ...;
        X x = m.accept(this, parameter);
        ...;
    }
}

public class C {}
public class Dog extends C {}
public class Cat extends C {}

public class Client {
    public static void main(String... args) {
        MyConcreteVisitor v = new MyConcreteVisitor();
        v.someOtherMethod(Cat.class);
        v.someOtherMethod(Dog.class);
    }
}

// We have other implementations of the visitor that does not matters, like this one.
public class SomeOtherConcreteVisitor implements MyInterfaceVisitor<String, Integer> {
    @Override
    public String visitMyConcreteObject(MyConcreteObject object, Integer parameter) {
        return "foo";
    }
} 
```

我需要找到什么是通用签名？？？？这使得代码可编译，允许 MyConcreteVisitor 类中的重写方法与 MyInterfaceVisitor 接口中的签名匹配。

我无法更改 MyInterfaceVisitor 接口中 visitMyObject 的签名，也无法更改其泛型。发生这种情况是因为存在 MyInterfaceVisitor 的其他实现，并且它们的泛型与来自 MyConcreteVisitor 的泛型无关。

MyConcreteVisitor 类本身不应具有泛型，因此编译器必须允许 a`MyConcreteVisitor v = new MyConcreteVisitor();`而不会生成 unchecked 或 rawtypes 警告。

如果我将具体的 visitMyObject 更改为`public C visitMyObject(MyObject object, Class<? extends C> parameter)`并声明 ???? 因为`<C, Class<? extends C>>`，我需要在 someOtherMethod 中添加一个演员表。

如何定义泛型类型使其可编译，而不会收到未经检查或 rawtypes 警告、更改接口或添加强制转换？这在java中是否可能，或者我滥用泛型太多了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:19:50.703

问题是您的实现正试图向`X extends C`方法引入另一个类型参数`visitMyConcreteObject`并用它解析`B`参数。您不能使用`visitMyConcreteObject`泛型，`X`而是尝试`B`使用由参数化的类型解析`X`，例如`Class<X>`，因为`B`在类声明中解析但`X`仅由类的方法声明。

据我所知，你有两个选择。要么`MyConcreteVisitor`通用`X`：

```
public class MyConcreteVisitor<X extends C> implements MyInterfaceVisitor<X, Class<X>> {

    @Override
    public X visitMyConcreteObject(MyConcreteObject object, Class<X> parameter) {
        // Do a lot of things.
        // Return an instance of the given class.
    }
} 
```

或者摆脱`X`并失去类型安全（超出具体类型`C`）：

```
public class MyConcreteVisitor implements MyInterfaceVisitor<C, Class<? extends C>> {

    @Override
    public C visitMyConcreteObject(MyConcreteObject object, Class<? extends C> parameter) {
        // Do a lot of things.
        // Return an instance of the given class.
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:14:03.550

我认为这就是您要寻找的东西：

```
public class MyConcreteVisitor implements MyInterfaceVisitor<Object,Class<?>> {

    @Override
    public Object visitMyConcreteObject(MyConcreteObject object, Class<?> parameter) {
        // Do a lot of things.
        // Return an instance of the given class.
    }

    // This method is the entry point of the MyConcreteVisitor.
    public <X> void someOtherMethod(Class<X> parameter) {
        MyObject m = ...;
        X x = parameter.cast(m.accept(this, parameter));
        ...;
    }
} 
```

# java - JSF 和 Primefaces graphicsImage 渲染属性更改但没有任何反应

> ID：14565204
> 
> 赞同：1
> 
> 时间：2013-01-28T15:21:58.947
> 
> 标签：java, ajax, jsf-2, primefaces

我有一个问题，我找不到任何解决方案。我正在使用`JSF 2.1`and `primefaces`，并且我有一个 bean，其中包含一个带有 getter 和 setter 的布尔变量。我`p:ajax`用来调用一个在更新时更新布尔值的方法`p:graphicImage`。

在调试期间这项工作正常；`p:graphicImage`将呈现的属性设置为 bean 的布尔变量。但是，当通过 ajax 更新图像时，会调用 getter 并返回正确的值 true，但不会渲染图像！

这是我的代码：

```
<p:panel>
    <p:panelGrid columns="3" cellpadding="5">
        <p:row>
            <p:column>
                <p:outputLabel value="#{msg.username}"></p:outputLabel>
            </p:column>
            <p:column>
                <h:inputText id="username" value="#{user.userName}">
                    <p:ajax listener="#{registationController.checkUserName}" event="blur" update="imgControl"/>
                </h:inputText>
            </p:column>
            <p:column id="imgControl">
                <p:graphicImage 
                        value="/resources/images/#{registationController.userNameAvailable}"
                        height="24px"  rendered="#{registationController.imgShow}"/>

            </p:column>
            <p:message for="username" id="msgUsername" severity="info"></p:message>
        </p:row>
    </p:panelGrid>
</p:panel> 
```

这是豆子：

```
@ManagedBean(name="registationController")
public class RegistrationController implements Serializable{

private static final long serialVersionUID = 1086976296682850824L;
@ManagedProperty(value="#{user}")
private User usr;
private MyLogger log;
private String userNameAvailable=null;
private boolean imgShow=false;

public void checkUserName(AjaxBehaviorEvent event){
    User tempUser=null;

    UserDAOImpl userDAOImpl=new UserDAOImpl();
    if(usr.getUserName()!="" && usr.getUserName()!=null){
        tempUser=userDAOImpl.selectUserByUsername(usr.getUserName());
        imgShow=true;
    } else {
        imgShow=false;
    }
    if(tempUser!=null){
        userNameAvailable="no.png";

    } else{
        userNameAvailable= "yes.png";
    }
}
public boolean isImgShow() {
    return imgShow;
}
others methods...
} 
```

任何想法为什么这不起作用？

谢谢，约翰

# vb.net - VB.NET System.Math 半径到度数

> ID：14565205
> 
> 赞同：0
> 
> 时间：2013-01-28T15:22:00.947
> 
> 标签：vb.net

我正在 VB.net 上制作计算器，我注意到该`System.Math`库使用弧度进行计算，我希望它以度数计算。有可能改变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:25:14.650

做就是了：

```
private function RadianToDegree(angle as double) as double
    return angle * (180.0 / Math.PI)
end function 
```

# angularjs - 是否可以为angularjs中`directive`的`compile`中的`postLink`函数中的元素设置一些值？

> ID：14565207
> 
> 赞同：0
> 
> 时间：2013-01-28T15:22:07.403
> 
> 标签：angularjs, angularjs-directive

angularjs的文档：

```
myModule.directive('directiveName', function factory(injectables) {
  var directiveDefinitionObject = {
    priority: 0,
    template: '<div></div>',
    templateUrl: 'directive.html',
    replace: false,
    transclude: false,
    restrict: 'A',
    scope: false,
    compile: function compile(tElement, tAttrs, transclude) {
      return {
        pre: function preLink(scope, iElement, iAttrs, controller) { ... },
        post: function postLink(scope, iElement, iAttrs, controller) {
                         // ????
                         // is it possible to set the content of iElement?
                    }
      }
    }
  };
  return directiveDefinitionObject;
}); 
```

在`postLink`函数里面`compile`，是否可以设置一些文本`iElement`？

我试过了：

```
iElement.html("some");
iElement.textContent = "some";
jQuery(iElement).html("some"); 
```

但似乎它们都没有奏效。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T10:19:59.307

`iElement.html("some");`应该按预期工作：http: [//jsfiddle.net/bmleite/vjnN7/](http://jsfiddle.net/bmleite/vjnN7/)

```
app.directive('someDirective', function() {
  return {
    priority: 0,
    template: '<div>Test...</div>',    
    replace: false,
    transclude: false,
    restrict: 'A',
    scope: false,
    compile: function compile(tElement, tAttrs, transclude) {
      return {
        pre: function preLink(scope, iElement, iAttrs, controller) {  },
        post: function postLink(scope, iElement, iAttrs, controller) {
                iElement.html('Some other test...');                         
             }
      }
    }
  };  
}); 
```

# map - OpenLayers：向标记事件注册功能不起作用

> ID：14565208
> 
> 赞同：2
> 
> 时间：2013-01-28T15:22:08.903
> 
> 标签：map, openlayers, marker

我在 OpenLayers 中有一张带有简单图层和标记图层的地图。标记层中的标记由 生成`data.rows`。对于每个标记，我想向“mousedown”（或“click”）事件注册一个函数，但这似乎不起作用。标记已添加到地图中，但单击后，未输入注册到事件的功能。

```
// Marker-Layer
    var markers = new OpenLayers.Layer.Markers("SABA")

    // Icon
    var size = new OpenLayers.Size(21, 25);
    var offset = new OpenLayers.Pixel(-(size.w / 2), -size.h);
    var iconPath = document.location.protocol + '//' + document.location.hostname + '/saba/modulesinst/sa/icons/pin.png';
    var icon = new OpenLayers.Icon(iconPath, size, offset);

    // Rows durchgehen
    Array.each(data.rows, function(item, index) {
        if (item.x != null && item.y != null) {
            var newmarker = new OpenLayers.Marker(new OpenLayers.LonLat(item.x, item.y), icon.clone())

            newmarker.events.register('mousedown', newmarker, function(evt) {
                alert(item.name);
                OpenLayers.Event.stop(evt);
            });
            markers.addMarker(newmarker);
        }
    });
    this.listMap.addLayer(markers); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T16:10:23.983

Openlayers 文档指出，您应该为此目的使用矢量图层而不是标记层：“标记是在浏览器中与地理数据交互的‘旧’方式。大多数新代码应尽可能使用矢量图层标记层”。

当您使用矢量图层时，您可以添加如下标记：

```
var marker = new OpenLayers.Feature.Vector(new OpenLayers.Geometry.Point(lon,lat), attributes);
vectorLayer.addFeatures(marker); 
```

您可以使用此代码来初始化矢量图层：

```
function selected (evt) {
    alert(evt.feature.id + " selected on " + this.name);
}
var layer = new OpenLayes.Layer.Vector("VLayer");
layer.events.register("featureselected", layer, selected); 
```

最后将选择功能控件添加到您的地图：

```
var control = new OpenLayers.Control.SelectFeature(layer);
map.addControl(control);
control.activate(); 
```

请参阅此[Openlayers 文档](http://docs.openlayers.org/library/overlays.html)

# android - 是否可以将一组图像添加到画布然后删除它们？

> ID：14565209
> 
> 赞同：0
> 
> 时间：2013-01-28T15:22:11.947
> 
> 标签：android, bitmap, arraylist, android-canvas

是否可以将一组图像添加到画布，然后删除单个图像？假设我声明了一个 ArrayList 并将我的图像添加到其中。然后我在画布上绘制它们。我怎样才能只删除一个图像而不是全部？这可能吗？

```
ArrayList<Integer> myImageList = new ArrayList<Integer>();
myImageList.add(R.drawable.image1);
myImageList.add(R.drawable.image2);
myImageList.add(R.drawable.image3);
canvas.drawBitmap(myImageList[0], 300, 400, null);
canvas.drawBitmap(myImageList[1], 300, 400, null);
canvas.drawBitmap(myImageList[2], 300, 400, null); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:00:13.473

这是不可能的，因为一旦您在画布上绘制了任何图像，该画布的位图的像素值就会改变。

您必须清除整个画布并在画布上重新绘制所有其他图像，

您可以做的一项优化是应用剪辑区域，在这种情况下，不要清除画布并按照以下步骤操作：

```
Region clip_region= region of the image(which you want to remove ) on the canvas;
canvas_object.clipRegion(clip_region); 
```

现在只清除 clip_region 区域并在画布上绘制所有其他图像，通过这种优化，您的应用程序将比没有 CLIP REGION 的情况下绘制更少的 cpu，

# html - TFHpple - iOS 中的 xpath - 让两个父母起来

> ID：14565214
> 
> 赞同：0
> 
> 时间：2013-01-28T15:22:23.847
> 
> 标签：html, ios, objective-c, xpath, hpple

想让两个父母（曾祖父母）或两个孩子下来？

```
<table style="background-color: #008000; border-style: none;" border="0" cellpadding="2" cellspacing="2">
  <tr>
    <td>
      <img height="5" width="5" border="0" src="https://spacer.gif" title="07:00,24hrs: B Shift /.../E704/RS704/Firefighter #2" alt="07:00,24hrs: B Shift /.../E704/RS704/Firefighter #2">
    </td>
  </tr>
</table>
<img height="2" width="2" border="0" src="https://spacer.gif" alt="">
  <img alt="" height="1" width="1" border="0" src="https://spacer.gif">
    </td>
    <TD ALIGN="RIGHT" VALIGN="TOP" width="17%">
      <a href="javascript:void(0)" title="01/15/2013" class="daylink" onClick="return DayClick('01/15/2013');">15</a>
    </TD>
    <td rowspan="2" width="5">
      <img alt="" height="1" width="1" border="0" src="https://spacer.gif">
    </td>
    </tr>
    <tr>
      <TD COLSPAN="2">
        <TABLE>
          <TR>
            <TD style="background-color: #41FFB9; " class="calexception">
              <a href="javascript:void(0)" onClick="return ShowRemoveExceptionWindow(&quot;4A30E80.fre01&quot;,&quot;3280530&quot;);" title="10hrs DetNonEMSStud(10),  07:00 - 17:00" style="color: #000000; text-decoration: none; font-weight: bold;">DetNonEMSStud(10)</a>
            </TD>
          </TR>
        </TABLE> 
```

IOS：

```
NSString *tutorialsXpathQueryString = @"//table/tr/td";
NSArray *tutorialsNodes = [tutorialsParser searchWithXPathQuery:tutorialsXpathQueryString];
NSLog(@"here is url: %@", tutorialsNodes);

NSMutableArray *newTutorials = [[NSMutableArray alloc] initWithCapacity:0];
for (TFHppleElement *element in tutorialsNodes) {

    Tutorial *tutorial = [[Tutorial alloc] init];
    [newTutorials addObject:tutorial];

    tutorial.url = [element objectForKey:@"style"];
    tutorial.title = [[element firstChild] objectForKey:@"title"]; 
```

我从中获得风格`<td>`和标题`<a>`就好了我还需要从中获得风格`<table>`

我对 obj-c 非常陌生，并且第一次尝试使用 XPATH，任何示例都会很棒！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:29:22.937

我没有使用过 TFHpple，但如果它支持标准 XPath，您应该能够`td`使用此 XPath 从 a 转到它的包含表：

```
ancestor::table[1] 
```

这个 XPath 选择最近的表，它是上下文节点的祖先，所以如果你有这个标记：

```
<table>
    <tr><td></td></tr>
    <tr>
       <td>
         <table><tr><td></td></tr></table>
         <table>
             <tr>
                 <td>Hey!</td>
             </tr>
         </table>
       </td>
    </tr>      
</table> 
```

您的上下文节点是`td`带有文本“嘿！”的，然后上面的 XPath 将选择第 6 行的表。

看起来 TFHpple 没有提供在上下文节点上评估 XPath 的方法。鉴于此，一个新的建议 - 每个元素只有一个父元素，所以如果你继续通过父元素，你最终应该找到表。向下走要困难得多，因为一个元素可以有任意数量的直接子代，每个子代都有自己的一组子代。我不太了解Objective-C，但是如果您可以确定表格只有两个级别，那么这样的事情可能会起作用：

```
TFHppleElement *table = [[element parent] parent]; 
```

如果不能保证 table 向上两层，那么应该有某种方法通过 parent 向上找到 table。这是伪代码，但希望你明白：

```
for (TFHppleElement *element in tutorialsNodes) {

    Tutorial *tutorial = [[Tutorial alloc] init];
    [newTutorials addObject:tutorial];

    tutorial.url = [element objectForKey:@"style"];
    tutorial.title = [[element firstChild] objectForKey:@"title"];

    TFHppleElement *table = [element parent];
    while(table != null && [table tagName] != "table") {
        table = [table parent]
    }

    // table should either be the parent table at this point, 
    //  or null if there was no parent table. 
```

# powershell - MSBuild 执行 Powershell Script 文件相对/绝对路径

> ID：14565217
> 
> 赞同：1
> 
> 时间：2013-01-28T15:22:38.980
> 
> 标签：powershell, msbuild

我有一个要与 MSBuild 一起运行的 power shell 脚本。脚本本身可以工作，我可以使用命令行传递路径变量；但是，当我尝试通过 MSbuild 传递变量时，路径中出现错误。

```
 <?xml version="1.0" encoding="utf-8" ?>
 <Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
    <Import Project="C:\Program Files (x86)\MSBuild\PowershellTask\Powershell.targets"/>

   <Target Name="Minify">
   <PropertyGroup>
       <FilePath>\Scripts</FilePath>
       <OutputPath>\MinifiedJS</OutputPath>
   </PropertyGroup>
   <Exec Command= "powershell.exe -command &quot;&amp;.\MinifyCSS.ps1&apos;$(FilePath)&apos;&apos;$(OutputPath)&apos;}&quot;" /> 
```

如何将路径传递到 MSBuild。/Scripts 和 /MinifiedJS 上的上述代码错误。这是错误：

powershell.exe -command "&{.\MinifyCSS.ps1'/Scripts''/MinifiedJS'}" 术语 '.\MinifyCSS.ps1/Scripts'/MinifiedJS' 未被识别为 cmdlet、函数、脚本的名称文件或可运行的程序。检查名称的拼写，或者如果包含路径，请验证路径是否正确并重试。在 line:1 char:41 + &{.\MinifyCSS.ps1'/Scripts''/MinifiedJS' <<<< } + CategoryInfo : ObjectNotFound: (.\MinifyCSS.ps1/Scripts'/MinifiedJS:String) [], CommandNotFoundException + FullyQualifiedErrorId：CommandNotFoundException

我还尝试将它们放在引号中并使用 .\ 之前。

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T18:13:47.290

尝试：

```
<?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">
<Import Project="C:\Program Files (x86)\MSBuild\PowershellTask\Powershell.targets"/>
<Target Name="Minify">
<PropertyGroup>
<FilePath>\Scripts</FilePath>
<OutputPath>\MinifiedJS</OutputPath>
</PropertyGroup>
<Exec Command="powershell.exe .\MinifyCSS.ps1 Scripts MinifiedJS" />
</Target>
</Project> 
```

# repository - GIT 和 Tortoise Repository 有什么区别？

> ID：14565220
> 
> 赞同：1
> 
> 时间：2013-01-28T15:22:47.263
> 
> 标签：repository

我是这个论坛的新手，但我发现活跃的开发人员很快就做出了回应。

我对“GIT”和乌龟“SVN”之间的技术差异有疑问。如果有人对此有工作，请给我详细说明。

感谢 tousif shaikh。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:29:06.553

您的意思肯定是 Git 和 svn 之间的区别？Tortoise 只是（大部分）svn 的 GUI。看看这篇 wiki 文章：[https](https://git.wiki.kernel.org/index.php/GitSvnComparison) ://git.wiki.kernel.org/index.php/GitSvnComparison 或在这个线程：[https](https://stackoverflow.com/a/161572/1758762) ://stackoverflow.com/a/161572/1758762 ：

SVN 是一个 repo 和很多客户。GIT 是一个包含大量客户端 repo 的 repo，每个 repo 都有一个用户。它是分散的，人们可以在本地跟踪自己的编辑，而无需将内容推送到外部服务器。

SVN 被设计为更加中心化，其中 GIT 基于每个用户拥有自己的 GIT 存储库，并且这些存储库将更改推回中央存储库。出于这个原因，GIT 为个人提供了更好的本地版本控制。

这么久...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-07-18T10:58:07.410

SVN 工作流程：

*   主干目录代表项目的最新稳定版本。
*   活动功能工作在分支下的子目录中开发

*   当一个特性完成时，特性目录被合并到主干并被删除。

Git工作流程：

*   Git 存储库将其所有分支和标签的完整历史记录存储在 .git 目录中。
*   最新的稳定版本包含在主分支中。主动功能工作是在单独的分支中开发的。
*   当一个特性完成后，特性分支被合并到 master 中并被删除。

# ruby - 红宝石循环。散列成字符串

> ID：14565221
> 
> 赞同：1
> 
> 时间：2013-01-28T15:23:03.217
> 
> 标签：ruby, oop, loops

我正在使用红宝石。我需要抓取每个键/值并将其放入一个字符串中。

到目前为止，我有：

```
values = ['first' => '1', 'second' => '2']
  @thelink = values.collect do | key, value |
  "#{key}=#{value}&"
  end 
```

当我打印时，`@thelink`我看到：

```
first1second2=& 
```

但我真正想要的是

```
first=1&second=2 
```

有人可以帮忙/解释一下吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:24:35.563

你在这里缺少一些微妙的东西`{}`vs `[]`。

请参阅 IRB 测试中的以下内容：

```
irb(main):002:0> {'first' => 1, 'second' => 2}
=> {"second"=>2, "first"=>1}

irb(main):003:0>  ['first' => 1, 'second' => 2]
=> [{"second"=>2, "first"=>1}]

irb(main):004:0> {'first' => 1, 'second' => 2}.class
=> Hash

irb(main):005:0>  ['first' => 1, 'second' => 2].class
=> Array 
```

与此类似：

```
irb(main):006:0> {'first' => 1, 'second' => 2}.collect { |key,value| puts "#{key}:#{value}" }
second:2
first:1
=> [nil, nil]

irb(main):007:0> ['first' => 1, 'second' => 2].collect { |key,value| puts "#{key}:#{value}" }
second2first1:
=> [nil] 
```

该数组有一个元素（散列），作为一个字符串，它是所有连接在一起的元素。这是这里要注意的重要一点。
另一方面，哈希通过将您期望的键/值对交给您来进行迭代。

希望有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:31:38.927

我认为您的代码有错字（哈希由 {} 而不是 [] 分隔）。试试这个

```
values = {'first' => '1', 'second' => '2'}
r = values.map{|k,v| "#{k}=#{v}"}.join('&')
puts r
#shows: first=1&second=2 
```

# regex - Regex for city with Apostrophe

> ID：14565225
> 
> 赞同：0
> 
> 时间：2013-01-28T15:23:08.767
> 
> 标签：regex, validation

Here's is my javascript regex for a city name and it's handling almost all cases except this.

```
^[a-zA-Z]+[\. - ']?(?:[\s-][a-zA-Z]+)*$ 
```

(Should pass)

*   Coeur d'Alene
*   San Tan Valley
*   St. Thomas
*   St. Thomas-Vincent
*   St. Thomas Vincent
*   St Thomas-Vincent
*   St-Thomas
*   anaconda-deer lodge county

(Should Fail)

*   San. Tan. Valley
*   St.. Thomas
*   St.. Thomas--Vincent
*   St.- Thomas -Vincent
*   St--Thomas

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:39:40.223

这匹配第一个列表中的所有名称，而不是第二个列表中的名称：

```
/^[a-zA-Z]+(?:\.(?!-))?(?:[\s-](?:[a-z]+')?[a-zA-Z]+)*$/ 
```

多行解释：

```
^[a-zA-Z]+     # begins with a word
(?:\.(?!-))?   # maybe a dot but not followed by a dash
(?:
 [\s-]         # whitespace or dash
 (?:[a-z]+\')? # maybe a lowercase-word and an apostrophe
 [a-zA-Z]+     # word
)*$            # repeated to the end 
```

要在任何地方允许点，但不允许两个点，请使用以下命令：

```
/^(?!.*?\..*?\.)[a-zA-Z]+(?:(?:\.\s?|\s|-)(?:[a-z]+')?[a-zA-Z]+)*$/

^(?!.*?\..*?\.) # does not contain two dots
[a-zA-Z]+       # a word
(?:
 (?:\.\s?|\s|-) # delimiter: dot with maybe whitespace, whitespace or dash
 (?:[a-z]+\')?  # maybe a lowercase-word and an apostrophe
 [a-zA-Z]+      # word
)*$             # repeated to the end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T07:50:50.160

试试这个正则表达式：

```
^(?:[a-zA-Z]+(?:[.'\-,])?\s?)+$ 
```

这确实匹配：

> Coeur d'Alene
> San Tan Valley
> St. Thomas
> St. Thomas-Vincent
> St. Thomas Vincent
> St Thomas-Vincent
> St-Thomas
> 蟒蛇-鹿小屋县
> Monte St.Thomas
> San。谭。谷
> 华盛顿特区

但不匹配：

> 圣托马斯
> 圣托马斯--文森特圣-托马斯-文
> 森特
> 圣--托马斯

（我允许它匹配`San. Tan. Valley`，因为那里可能有一个带有 2 个句点的城市名称。）

正则表达式的工作原理：

```
# ^         - Match the line start.
# (?:       - Start a non-catching group
# [a-zA-Z]+ - That starts with 1 or more letters.
# [.'\-,]?  - Followed by one period, apostrophe dash, or comma. (optional)
# \s?       - Followed by a space (optional)
# )+        - End of the group, match at least one or more of the previous group.
# $         - Match the end of the line 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:38:02.523

我认为以下正则表达式符合您的要求：

```
^([Ss]t\. |[a-zA-Z ]|\['-](?:[^-']))+$ 
```

另一方面，您可能会质疑使用正则表达式来做到这一点的想法......无论您的正则表达式有多复杂，总会有一些傻瓜找到一个新的不想要的模式来匹配......

通常当您需要有效的城市名称时，最好使用一些地理编码 API，例如[google geocoding API](https://developers.google.com/maps/documentation/geocoding/)

# iphone - Will self be retained by ARC in this situation?

> ID：14565228
> 
> 赞同：4
> 
> 时间：2013-01-28T15:23:17.890
> 
> 标签：iphone, ios, ipad, automatic-ref-counting

I have the following code inside a method:

```
UIImageView* imageBlk = self.image;
self.finishBlock = ^{
    imageBlk.hidden = YES;
} 
```

Under ARC, will self get retained by the block because image is a property of self? Who owns imageBlk? Self?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:13:38.063

**会`self`被块保留吗？**不，它不会。该`imageBlk`变量不是实例变量，因此块不需要保留`self`。在您发布的代码中无需担心保留周期。

**谁拥有`imageBlk`？** `imageBlk`是堆栈变量。该块将保留变量。ARC 负责这种保留，并在适当的时候适当地释放它。

**谁拥有`self`？**我们无法从这段代码中回答这个问题。曾经分配过该对象的人将拥有它。曾经保留它的人也拥有它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:29:57.043

不，as`imageBlk`不一样`self.image`！`imageBlk`是一个局部变量，不属于任何人。`imageBlk`块内部是一个只读副本，`imageBlk`而不是同一个变量。如果你希望它是同一个变量，你必须使用`__block`声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:02:45.330

代码很好。在块外声明的变量是只读的，你不能改变它的值。
但是......你不会改变价值！您只需在值上“调用一个方法”，即 [imgBlock setHideen:YES];
完全合法。一切都将完美无缺。Block 将根据需要保留 imgView。

# c# - Fastest way to set properties to null in C# 4

> ID：14565231
> 
> 赞同：1
> 
> 时间：2013-01-28T15:23:32.883
> 
> 标签：c#, ienumerable

What is the fastest way to set properties (any one) to `null` in an `IEnumerable`? Is `foreach` my only option?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T15:42:24.583

如果您有一个非常大的列表，您可以考虑并行执行此操作：

```
enumerable.AsParallel().ForAll(a => a.Value = null); 
```

但值得进行基准测试并牢记，您的对象现在需要是线程安全的。

**此处**的快速测试显示，当列表大小超过 1000 万个项目时，投资回报率*。较小的列表大小和设置并行处理的成本超过了好处。

*您的里程**会**有所不同

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:31:13.820

有两种方法可以实现您的目标：

1.  正如你提到的：

    ```
    foreach(var item in enumeration)
    {
        item.Property = null;
    } 
    ```

2.  您也可以使用 LINQ：

    ```
    enumeration.ToList().ForEach(item => item.Property = null); 
    ```

虽然第二种方式看起来更短且可读性更好，但它可能执行得更慢，因为正如 Jeppe Stig Nielsen 指出的那样，`IEnumerable`被转换为 a `List`（第一次枚举它）并且该列表再次被枚举，以最终设置属性。

因此，您是对的：`foreach`是您唯一的选择。但是`foreach`-representation 看起来像，您总是需要遍历集合以修改每个项目。

# c# - 使用 ServiceStack ORMLite 上的标识列在多对多表上插入的最佳方法

> ID：14565235
> 
> 赞同：1
> 
> 时间：2013-01-28T15:23:59.390
> 
> 标签：c#, ormlite-servicestack

昨天我发现了这个很棒的 ORM，并想对比 github 上提供的示例更复杂的东西进行一些测试。

这是我正在使用的模型

```
class BaseClass
{
    [AutoIncrement]
    public int Id { get; set; }

    [StringLength(200)]
    public string Name { get; set; }
}

[Alias("artist")]
class Artist : BaseClass
{

}

[Alias("genre")]
class Genre : BaseClass
{

}

[Alias("artistgenre")]
class ArtistGenre
{
    [PrimaryKey]
    public int Id { get; set; }

    [Alias("idgenre")]
    [References(typeof(Genre))]
    public int IdGenre { get; set; }

    [Alias("idartist")]
    [References(typeof(Artist))]
    public int IdArtist { get; set; }
} 
```

这就是我想要实现的目标（尽管它不起作用，因为在插入artistgenre 表时身份值是未知的）。

```
 if (dbConn.TableExists("artistgenre"))
                    dbConn.DropTable<ArtistGenre>();

                if (dbConn.TableExists("artist"))
                    dbConn.DropTable<Artist>();

                if (dbConn.TableExists("genre"))
                    dbConn.DropTable<Genre>();

                dbConn.CreateTables(false, typeof(Artist), typeof(Genre), typeof(ArtistGenre));

                var genres = new List<Genre>();
                genres.Add(new Genre() { Name = "Rock" });
                genres.Add(new Genre() { Name = "Pop" });
                genres.Add(new Genre() { Name = "Jazz" });
                genres.Add(new Genre() { Name = "Classic" });
                genres.Add(new Genre() { Name = "Bossanova" });

                var artists = new List<Artist>();
                artists.Add(new Artist() { Name = "Rush" });
                artists.Add(new Artist() { Name = "Queen" });
                artists.Add(new Artist() { Name = "Pat Metheny" });

                var ag = new List<ArtistGenre>();
                var a = artists.FirstOrDefault(c => c.Name == "Rush");
                var g = genres.FirstOrDefault(c => c.Name == "Rock");
                ag.Add(new ArtistGenre() { IdArtist = a.Id, IdGenre = g.Id });

                dbConn.SaveAll<Artist>(artists);
                dbConn.SaveAll<Genre>(genres);
                dbConn.SaveAll<ArtistGenre>(ag); 
```

除了添加每一行并获取其标识值之外，还有一个简单的解决方案吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:34:32.833

OrmLite 目前不使用自动递增 id atm 填充模型。获取自动增量 ID 的方式是`db.GetLastInsertId()`在每次插入后使用，例如：

```
artists.ForEach(artist => {
  db.Insert(artist);
  artist.Id = db.GetLastInsertId();
}); 
```

我建议将其包装在扩展方法中，以使其更好地使用。

# sql - VBScript / SQL help needed with query that joins three tables

> ID：14565236
> 
> 赞同：0
> 
> 时间：2013-01-28T15:24:07.293
> 
> 标签：sql, vbscript, dbase

I'm trying to build a query that will connect three tables and I want to run this query via VBscript.

This is my working version:

```
 sSQL = "SELECT OPNPOS.FUND, SECRTY.TKR, SECRTY.ISIN, OPNPOS.QTY, OPNPOS.LCL_ACCINC, PRIHST.PRICE / SECRTY.FACTOR AS CENA FROM (OPNPOS INNER JOIN SECRTY ON OPNPOS.TKR = SECRTY.TKR) INNER JOIN PRIHST ON SECRTY.TKR = PRIHST.TKR WHERE OPNPOS.FUND IN " & sFUND & " AND PRIHST.PRCDATE = #" & sDATA & "# ORDER BY OPNPOS.FUND" 
```

I need to change this query in order to see every element from OPNPOS table so I would change

```
FROM OPNPOS INNER JOIN 
```

to:

```
FROM OPNPOS LEFT JOIN 
```

but it gives me an error. Error: Join expression not supported. Code: 80004005

I know that there are some ways to workaround this but I've tried a lot of combinations and get no success ;/

Anyone can help me?

This is a bigger part of my VBScript:

```
Option Explicit

dim sDATA
sDATA = InputBox("Podaj datę w formacie MM/DD/YYYY.")

dim sPATH
sPATH = "M:\MFWIN\Data"

dim sFUND
sFUND = "('FOM','KRAKOWIA')"

dim sSQL 
sSQL = "SELECT OPNPOS.FUND, SECRTY.TKR, SECRTY.ISIN, OPNPOS.QTY, OPNPOS.LCL_ACCINC, PRIHST.PRICE / SECRTY.FACTOR AS CENA FROM (OPNPOS INNER JOIN SECRTY ON OPNPOS.TKR = SECRTY.TKR) INNER JOIN PRIHST ON SECRTY.TKR = PRIHST.TKR WHERE OPNPOS.FUND IN " & sFUND & " AND PRIHST.PRCDATE = #" & sDATA & "# ORDER BY OPNPOS.FUND"

dim conn, rs

Set conn = createobject("adodb.connection") 
Set rs = createobject("adodb.recordset") 
conn.Open "Driver={Microsoft dBASE Driver (*.dbf)};SourceType=DBF;Dbq="&sPATH 
rs.Open sSQL,conn 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:26:32.183

我认为这是因为您需要说：

```
Left Outer Join 
```

而不仅仅是

```
 Left Join 
```

# jsf - MyFaces：超过每个请求允许的最大参数

> ID：14565238
> 
> 赞同：0
> 
> 时间：2013-01-28T15:24:09.520
> 
> 标签：jsf, primefaces, request, websphere, myfaces

我参与的应用程序被部署到测试服务器（WebSphere 7），我们从那里得到了我们以前从未见过的错误：

这是关于超出每个请求允许的最大参数数量的消息，另外写入错误：

```
28.01.2013 15:51:38 SEVERE exceeding maximum Paramaters allowed per request -> 1000 ,current parameterSize-> 1000 cannot add more. 
28.01.2013 15:51:38 SEVERE An exception occurred 
javax.faces.FacesException: java.lang.IllegalArgumentException
org.apache.myfaces.shared_impl.context.ExceptionHandlerImpl.wrap(ExceptionHandlerImpl.java:241)
org.apache.myfaces.shared_impl.context.ExceptionHandlerImpl.handle(ExceptionHandlerImpl.java:156)
org.apache.myfaces.lifecycle.LifecycleImpl.executePhase(LifecycleImpl.java:191)
org.apache.myfaces.lifecycle.LifecycleImpl.execute(LifecycleImpl.java:118)
javax.faces.webapp.FacesServlet.service(FacesServlet.java:189)
com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1657)
com.ibm.ws.webcontainer.servlet.ServletWrapper.service(ServletWrapper.java:1597)
com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:131)
org.primefaces.webapp.filter.FileUploadFilter.doFilter(FileUploadFilter.java:79)
com.ibm.ws.webcontainer.filter.FilterInstanceWrapper.doFilter(FilterInstanceWrapper.java:188)
com.ibm.ws.webcontainer.filter.WebAppFilterChain.doFilter(WebAppFilterChain.java:116) 
```

我从未见过用于配置最大参数计数的参数，也没有在[http://myfaces.apache.org/core20/myfaces-impl/webconfig.html](http://myfaces.apache.org/core20/myfaces-impl/webconfig.html)中找到它。那么，这个`parameterSize`参数是什么，我在哪里可以配置呢？

该应用程序嵌入为**EAR**，使用**MyFaces 2.0.7**和**PrimeFaces 3.4**。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:58:09.437

感谢您`BalusC`的快速响应，通过异常来自 MyFaces 类，它是 WebSphere 设置

```
com.ibm.ws.webcontainer.maxParamPerRequest 

You can use this property to change the maximum number of parameters allowed in your inbound requests, based on your applications and environment. The maximum number of parameters allowed per inbound request (GET or POST) defaults to 10000\. 
```

来源：[http ://www-01.ibm.com/support/docview.wss?uid=swg21592923](http://www-01.ibm.com/support/docview.wss?uid=swg21592923)

# java - Hibernate Adding where clause on one-to-many mapping

> ID：14565241
> 
> 赞同：2
> 
> 时间：2013-01-28T15:24:17.610
> 
> 标签：java, database, hibernate, mapping

I have this set on my .hbm file.

```
<set name="subTopicsTb" table="subtopics_tb" inverse="true" lazy="false" fetch="select">
        <key>
            <column name="topic_id" />
        </key>
        <one-to-many class="com.topics.model.SubTopics" />
    </set> 
```

now, the default is that, hibernate get's all subtopics where the topic_id is the id. i want to filter the subtopics. adding something like where subTopics.date is not null thanks

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-29T10:53:51.397

这实际上有效，是`date`您数据库中的列名。`where`将原始 sql中的属性`set` **附加**到您的查询中，因此您必须指定它在您的数据库中而**不是 HQL**中：

```
<set name="subTopicsTb" table="subtopics_tb" inverse="true" lazy="false" 
    fetch="select" where="date is not null">
    <key>
        <column name="topic_id" />
    </key>
    <one-to-many class="com.topics.model.SubTopics" />
</set> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:51:38.663

添加 where 子句？我不知道你是如何在 XML 配置中设置的。但你可以在[这里](http://docs.jboss.org/hibernate/stable/annotations/reference/en/html_single/#entity-hibspec-collection)查看注释版本。

我在[stackoverflow](https://stackoverflow.com/questions/4907076/hibernate-where-equivalent-in-xml-configuration-for-restricting-collections)上找到了一些关于如何将 where 添加到 XML 的内容。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:54:47.007

您是否使用[HQL](http://docs.jboss.org/hibernate/core/3.3/reference/en/html/queryhql.html)来检索您的子主题？如果是这样，您可以在选择中包含过滤器。例如：

```
String query = "FROM SubTopic subtopic WHERE subtopic.date != null" 
```

# ember.js - 更改为路由器 v2 后无法创建控制器绑定

> ID：14565243
> 
> 赞同：0
> 
> 时间：2013-01-28T15:24:32.903
> 
> 标签：ember.js

刚刚将我的应用程序升级到 1.0.0-pre.4 并且正在将我的路由器更改为新的路由器 API，但是我似乎无法再在我的控制器之间创建绑定。

所以在我的主 ApplicationController 中，我有以下内容：

```
App.ApplicationController = Em.ArrayController.extend({
    user: App.User.create()
}); 
```

然后在路由器 API 的 v1 中，我有以下内容：

```
App.IndexController = Ember.ArrayController.extend({
    userBinding: 'App.router.applicationController.user',
}); 
```

但是，随着路由器 API 转换为 v1，App.router 不再被定义。我尝试的一切似乎都不起作用，即使将 userBinding 设置为 'App.ApplicationController.user' 也不起作用 - 就好像 applicationController 不再起作用一样。

我想要实现的是创建我的用户模型的一个实例，然后在多个路由/视图中共享它。

任何想法，将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:41:49.320

不幸的是，Ember 隐藏了单例控制器的所有实例，以防止用户实施不良实践代码。您不应该显式引用控制器，而应该将所有内容解耦并使用依赖注入将*事物*传递给您的控制器。

在之前的 Ember 版本中，我们`connectControllers`允许您将控制器相互连接，但现在在最新版本的 Ember 中，我们只需在路由器中使用“set”来传递其他控制器。

在您的示例中，您有一个 an`IndexController`和一个`UserController`，`userController`要从 中访问`indexController`，您需要执行以下操作：

（请记住，所有这些都发生在 Ember 的路由器中，您可以在此处阅读更多信息：http: [//emberjs.com/guides/routing/setting-up-a-controller/](http://emberjs.com/guides/routing/setting-up-a-controller/)）

```
App.UserRoute = Ember.Route.extend({
  setupController: function(controller) {
    this.controllerFor('index').set('userController', controller);
  }
}); 
```

您`indexController`现在可以从`userController`. 在模板中，这可能如下所示：

```
{{controller.userController.name}} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-06T04:10:45.307

在 ObjectControllers 中使用“需要”还有另一种解决方法。这是有关如何使用它的参考。 [http://eviltrout.com/2013/02/04/ember-pre-1-upgrade-notes.html](http://eviltrout.com/2013/02/04/ember-pre-1-upgrade-notes.html)

# antlr3 - antl3：测试解析器时的Java堆空间

> ID：14565258
> 
> 赞同：1
> 
> 时间：2013-01-28T15:25:09.143
> 
> 标签：antlr3

我正在尝试构建一个简单的配置文件阅读器来读取这种格式的文件：

```
A .-
B -...
C -.-.
D -..
E . 
```

这是我到目前为止的语法：

```
grammar def;

@header {
    package mypackage.parser;
}
@lexer::header { package mypackage.parser; }
file
    :   line+;

line    :   ID WS* CODE NEWLINE;

ID  :   ('A'..'Z')*
    ;

CODE    :   ('-'|'.')*;

COMMENT
    :   '//' ~('\n'|'\r')* '\r'? '\n' {$channel=HIDDEN;}
    |   '/*' ( options {greedy=false;} : . )* '*/' {$channel=HIDDEN;}
    ;

WS  :   ( ' '
        | '\t'
        ) {$channel=HIDDEN;}
    ;
NEWLINE:'\r'? '\n' ; 
```

这是我的测试台（junit4）

```
@Test
public void BasicGrammarCheckGood() {
       String CorrectlyFormedLine="A .-;\n";
       ANTLRStringStream input;
        defLexer lexer;
        defParser parser;

         input = new ANTLRStringStream(CorrectlyFormedLine);
        lexer = new defLexer(input);
        CommonTokenStream tokens = new CommonTokenStream(lexer);
         parser = new defParser(tokens);
         try {
        parser.line();
         }
         catch(RecognitionException re) { fail(re.getMessage()); } 
   } 
```

如果我使用正确的格式化字符串运行此测试 - 代码将退出而没有任何异常或输出。

但是，如果向解析器提供这样的无效字符串：“xA .-;\n”，代码会旋转一段时间，然后以“Java 堆空间”退出。

（如果我使用顶级规则“文件”开始测试，那么我会得到相同的结果 - 附加（重复）输出“第 1 行不匹配的输入 '' 期待 CODE”）

这里出了什么问题？我似乎从来没有得到无效输出的“RecognitionException”？

编辑：这是我的语法文件（片段），在这里提供建议后 - 这避免了“Java堆空间”问题。

```
file
    :   line+ EOF;

line    :   ID WS* CODE NEWLINE;

ID  :   ('A'..'Z')('A'..'Z')*
    ;

CODE    :   ('-'|'.')('-'|'.')*; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T22:35:41.230

您的某些词法分析器规则匹配零个字符（空字符串）：

```
ID  :   ('A'..'Z')*
    ;

CODE    :   ('-'|'.')*; 
```

当然，您的输入中有无限数量的空字符串，导致您的词法分析器不断产生标记，一段时间后导致堆空间错误。

始终让词法分析器规则匹配至少 1 个字符。

## 编辑

两个（小）备注：

1.  由于您将`WS`令牌放在隐藏通道上，因此您无需将它们添加到解析器规则中。所以`line`变成`line : ID CODE NEWLINE;`
2.  类似的东西`('A'..'Z')('A'..'Z')*`可以这样写：`('A'..'Z')+`

# java - 用于“流式传输”视频文件的 Java HTTP 进程

> ID：14565260
> 
> 赞同：7
> 
> 时间：2013-01-28T15:25:13.790
> 
> 标签：java, http, video, http-headers

我正在创建一个 Java 应用程序，它通过 http 将视频文件“流式传输”到浏览器（当前为 Chrome v24.x）。该视频被发送到 FFmpeg，并且其输出通过 HTTP 发送。

现在，一旦文件被完全编码，文件就会使用分块传输提供服务，并响应范围请求。示例标题：

### 要求

```
GET /file/9fe6b502-c127-47c2-b6d2-83ea58676a8d HTTP/1.1 : Host: localhost:1234 : Connection: keep-alive : Accept-Encoding: identity;q=1, *;q=0 : User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.56 Safari/537.17 : Accept: */* : Referer: http://localhost:1234/media/9fe6b502-c127-47c2-b6d2-83ea58676a8d : Accept-Language: en-US,en;q=0.8 : Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 : Cookie: plushContainerWidth=100%25; plushNoTopMenu=0 : Range: bytes=0- : 
```

### 回复

```
HTTP/1.1 206 Partial Content : Connection: close : Date: Mon, 28 Jan 2013 14:51:52 GMT : Content-Type: video/mp4 : Etag: "9fe6b502-c127-47c2-b6d2-83ea58676a8d" : Accept-Ranges: bytes : Content-Range: bytes 0-625825/625826 : Content-Length: 625826 : Transfer-Encoding: chunked : 
```

发送的数据为 625826 字节，不包括标头数据和分块开销。

现在，这工作得很好！

问题在于 GET 请求发生在文件编码完成之前。我试图通过 HTTP 立即开始发送文件，只使用没有内容长度属性或范围的分块传输，因为它们目前不知道。这会导致浏览器等待完整的文件（直到传输完成才开始播放）。另外，文件传输完成后，浏览器报视频错误，无法播放文件。示例标题：

### 要求

```
Request : GET /file/9fe6b502-c127-47c2-b6d2-83ea58676a8d HTTP/1.1 : Host: localhost:1234 : Connection: keep-alive : Accept-Encoding: identity;q=1, *;q=0 : User-Agent: Mozilla/5.0 (Macintosh; Intel Mac OS X 10_8_2) AppleWebKit/537.17 (KHTML, like Gecko) Chrome/24.0.1312.56 Safari/537.17 : Accept: */* : Referer: http://localhost:1234/media/9fe6b502-c127-47c2-b6d2-83ea58676a8d : Accept-Language: en-US,en;q=0.8 : Accept-Charset: ISO-8859-1,utf-8;q=0.7,*;q=0.3 : Cookie: plushContainerWidth=100%25; plushNoTopMenu=0 : Range: bytes=0- 
```

### 回复

```
HTTP/1.1 200 OK : Connection: close : Date: Mon, 28 Jan 2013 14:51:29 GMT : Content-Type: video/mp4 : Transfer-Encoding: chunked 
```

发送的数据为 625826 字节，不包括标头数据和分块开销。

有谁知道出了什么问题，或者如何在不知道文件全长的情况下开始播放视频？

谢谢你的时间，

詹姆士。

//编辑

由于对不完整文件的请求状态为“范围：字节 = 0-” - 我可以使用 Content-Range：字节 0-999/* 回复部分内容为“n”字节（例如，1000 字节）吗？

//EDIT 2 根据要求，这是我输出文件的代码。这是浓缩的，因为代码实际上跨越了几个类。

```
File f = new File(_filename);
RandomAccessFile raf = new RandomAccessFile(f, "r");
ChunkedOutputStream cos = new ChunkedOutputStream(_out, 1024 * 100);
byte[] bytes;

while (true){
    lBufferSizeMax = Math.min(lBufferSize, fc.length() - lCompleted);
    bytes = new byte[(int)lBufferSizeMax];

    lCurrentRead = fc.read(bytes);
    if (lCurrentRead == 0){
        break;
    }

    cos.write(bytes);
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-09T01:56:07.020

请注意，`ffmpeg`编码结束时可能会重写文件的某些部分。这意味着视频文件中的元数据直到最后都是不完整的，因此在此之前尝试流式传输文件的开头是没有用的。您可以检查用`ffmpeg`单个破折号替换命令行中的输出文件名并将标准输出重定向到文件。而不是`ffmpeg ... out.mov`做`ffmpeg ... - > out.mov`。如果您收到一条错误消息，指出该格式需要可搜索的输出，您就会受到影响。

我几乎完成了您正在尝试做的事情，结果在我的[Git repo](http://forkalsrud.org:8080/~knut/gitweb.cgi?p=album.git;a=tree;f=src/main/java/org/forkalsrud/album/video;hb=HEAD)中。我可以使用元数据玩游戏的容器格式是 FLV。不幸的是，这不是 iPad/iPhone 设备喜欢看到的。

# window - 警告：尝试呈现 在 其视图不在窗口层次结构中

> ID：14565263
> 
> 赞同：1
> 
> 时间：2013-01-28T15:25:18.403
> 
> 标签：window, warnings, hierarchy, segue, zbar

我试图获取扫描的 QR 码以显示视图控制器，其中包含有关代码所代表的项目的信息。当我尝试使用详细视图控制器时，它会出现：

```
Warning: Attempt to present <MachinesDetailViewController: 0x1e5bfc50> on <UITabBarController: 0x1f867d90> whose view is not in the window hierarchy! 
```

MainViewController 带有一个主标签栏控制器，但详细视图控制器位于带有标签栏控制器的导航控制器中。

这是我的 MainViewController.m 所在的位置。

```
 //
//  FirstViewController.m
//  Fitness Plus+
//
//  Created by Tom Brereton on 26/01/13.
//  Copyright (c) 2013 Tom Brereton. All rights reserved.
//

#import "MainViewController.h"
#import "MachinesDetailViewController.h"
@interface MainViewController ()

@end

@implementation MainViewController

@synthesize resultText, machineKeys, codeInt, machineArea, machineName;

- (IBAction)scanButton:(id)sender {

    NSLog(@"ehe");
    // ADD: present a barcode reader that scans from the camera feed
    ZBarReaderViewController *reader = [[ZBarReaderViewController alloc] init];
    reader.readerDelegate = self;
    reader.supportedOrientationsMask = ZBarOrientationMaskAll;

    ZBarImageScanner *scanner = reader.scanner;
    // TODO: (optional) additional reader configuration here

    // EXAMPLE: disable rarely used I2/5 to improve performance
    [scanner setSymbology: ZBAR_I25
                   config: ZBAR_CFG_ENABLE
                       to: 0];
    NSLog(@"Got here");
    // present and release the controller

    [self presentViewController: reader
                            animated: YES
                            completion:nil];

}

- (void) imagePickerController: (UIImagePickerController*) reader
 didFinishPickingMediaWithInfo: (NSDictionary*) info
{
    // ADD: get the decode results
    id<NSFastEnumeration> results =
    [info objectForKey: ZBarReaderControllerResults];
    ZBarSymbol *symbol = nil;
    for(symbol in results)
        // EXAMPLE: just grab the first barcode
        break;
    NSLog(@"Naht Here");

    // EXAMPLE: do something useful with the barcode data

    // Scan the machines.plist array and print it to the console.
    NSString *filePath = [[NSBundle mainBundle] pathForResource:@"machines" ofType:@"plist"];
    NSDictionary *machineDict = [NSDictionary dictionaryWithContentsOfFile:filePath];
    machineKeys = [machineDict objectForKey:@"Exercises"];
    machineArea = [machineDict objectForKey:@"Area"];
    resultText.text = symbol.data;

    //Convert code into integer value and put it inside codeInt
    codeInt = [symbol.data intValue];

    NSLog(@"Scanned Value: %@", [machineKeys objectAtIndex:codeInt]);
    // EXAMPLE: do something useful with the barcode image
    [self performSegueWithIdentifier:@"showDetailFromMain" sender:reader];
    // ADD: dismiss the controller (NB dismiss from the *reader*!)
    [self dismissViewControllerAnimated:YES completion:nil];

}

- (void) prepareForSegue:(UIStoryboardSegue *)segue sender:(id)reader {
    if ([[segue identifier] isEqualToString:@"showDetailFromMain"]) {
        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard" bundle:nil];
        MachinesDetailViewController *machineViewController = [storyboard instantiateViewControllerWithIdentifier:@"showMachineDetailViewController"];

        machineViewController = [segue destinationViewController];

        machineName = [machineKeys objectAtIndex:codeInt];
        [machineViewController setMachineNameLabel: machineName];
         }
}

- (void) viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

ZBar 的东西只是与 QR 扫描 API 有关。

这是 MachineDetailsViewController.m。

```
//
//  MachinesDetailViewController.m
//  Fitness Plus+
//
//  Created by Tom Brereton on 27/01/13.
//  Copyright (c) 2013 Tom Brereton. All rights reserved.
//

#import "MachinesDetailViewController.h"
@interface MachinesDetailViewController ()
@property(nonatomic, copy) NSString *title;
@end

@implementation MachinesDetailViewController
@synthesize machineLabel, machineName, instructionsLabel, typeLabel, mainMuscleLabel, otherMuscleLabel, equipmentLabel, machineDictionary, machineArray, mainMuscleLabelString, instructionLabelString, typeLabelString, otherMuscleLabelString, equipmentLabelString, title, machineNameLabel;

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view.
    // Set the Label text with the selected machine name
    machineName = machineNameLabel;
    mainMuscleLabel.text = mainMuscleLabelString;
    otherMuscleLabel.text = otherMuscleLabelString;
    equipmentLabel.text = equipmentLabelString;
    typeLabel.text = typeLabelString;
    instructionsLabel.text = instructionLabelString;
    self.navigationItem.title = machineName;
    NSLog(@"got it");

}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

@end 
```

谢谢，如果您需要更多信息，请询问。

*   汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T10:36:28.773

在同样的问题上苦苦挣扎，我的解决方案是这样调用 segue：

```
 [reader dismissViewControllerAnimated:YES completion:^{
    NSLog(@"Perform segue");
    [self performSegueWithIdentifier:@"showDetailFromMain" sender:self];
}]; 
```

我还必须将 segue 连接到视图而不是单个按钮。

希望这对你有用。

# ruby - 有线红宝石散列每个函数

> ID：14565273
> 
> 赞同：0
> 
> 时间：2013-01-28T15:26:05.827
> 
> 标签：ruby, hash, enumeration

好吧，我已经尝试了很多次，并试图弄清楚发生了什么......

假设我希望对散列中一堆对象的数量求和：

```
orders = [{:price => 100, :qty => 5}, {:price => 120, :qty => 10}, {:price => 50, :qty => 5}] 
```

我想对上面数组项中的每个哈希对象求和....

假设变量“sum”是结果：

```
sum = 0
sum = orders.each {|i| sum += i[:price] * i[:qty]} 
```

但它返回相同的哈希对象：

```
[{:price => 100, :qty => 5}, {:price => 120, :qty => 10}, {:price => 50, :qty => 5}] 
```

我认为结果应该是 0 + (100 * 5) + (120 * 10) + (50 * 5)

为什么会这样？

我的解决方案是执行以下操作： sum = 0 total = [] orders.each {|i| 总计 << i[:price] * i[:qty]} total.each {|i| 总和 += i}

我认为这根本不直观

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:29:48.043

因为 Hash#each 返回自身，如果给出块。请参阅此处的文档：[http ://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-each](http://www.ruby-doc.org/core-1.9.3/Hash.html#method-i-each)

做你想做的事的正确方法是

```
sum = orders.map {|o| o[:price] * o[:qty] }.inject(0, :+) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:30:32.917

是的，`Enumerable#each`返回它枚举的集合。您通常根本不使用它的返回值。您已经在修改块中的 sum，所以您很好。

```
sum = 0    
orders.each {|i| sum += i[:price] * i[:qty]} 
```

更好的方法是为此使用专门的方法

```
orders = [{:price => 100, :qty => 5}, {:price => 120, :qty => 10}, {:price => 50, :qty => 5}]

sum = orders.reduce(0) do |memo, item|
  memo + item[:price] * item[:qty]
end

sum # => 1950 
```

# c - Valrind 在 empyt 函数中报告“仍然可以访问”

> ID：14565275
> 
> 赞同：2
> 
> 时间：2013-01-28T15:26:06.840
> 
> 标签：c, valgrind

我正在使用 valgrind 检查我的 C 应用程序的内存使用情况。在第一次测试之后，valgrind 报告：

```
"still reachable: 2,248 bytes in 1 blocks". 
```

我检查了代码，但我无法仅仅看到问题。所以我开始注释代码部分以试图找出问题所在。

当我的代码中我只剩下时，我感到震惊

```
int main(void)
{

}; 
```

并且仍然收到消息，唯一的区别是字节数。

我真的很困惑这个...

这是完整的消息：

```
Running with options : valgrind --leak-check=full --show-reachable=yes

==2557== HEAP SUMMARY:
==2557==     in use at exit: 2,248 bytes in 1 blocks
==2557==   total heap usage: 362 allocs, 361 frees, 14,579 bytes allocated
==2557== 
==2557== 2,248 bytes in 1 blocks are still reachable in loss record 1 of 1
==2557==    at 0x4006171: calloc (vg_replace_malloc.c:593)
==2557==    by 0x4D72250B: monstartup (in /usr/lib/libc-2.15.so)
==2557==    by 0x8048650: __gmon_start__ (in /home/elias/Documents/SL_HTTP/Endosos/bin/Debug/Endosos)
==2557==    by 0x4005421: ??? (in /usr/local/lib/valgrind/vgpreload_memcheck-x86-linux.so)
==2557== 
==2557== LEAK SUMMARY:
==2557==    definitely lost: 0 bytes in 0 blocks
==2557==    indirectly lost: 0 bytes in 0 blocks
==2557==      possibly lost: 0 bytes in 0 blocks
==2557==    still reachable: 2,248 bytes in 1 blocks
==2557==         suppressed: 0 bytes in 0 blocks
==2557== 
==2557== For counts of detected and suppressed errors, rerun with: -v
==2557== ERROR SUMMARY: 0 errors from 0 contexts (suppressed: 0 from 0)
Profiling timer expired 
```

我在 Fedrora 17 中使用 gcc 4.7.2 进行编译

任何建议将被认真考虑。谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:36:48.813

这是完全可以安全忽略的。在这种情况下，这似乎是通过分析分配的内存（您可能正在编译启用了分析的代码或链接到某些库）。

你的环境会在调用之前做很多事情来设置`main`，这些事情可以分配内存。由于他们知道在程序退出之前将使用此内存，因此他们不会`free`在退出时打扰它，因为这只是花费时间而没有任何好处。大多数内存将被 valgrind 报告为“仍然可以访问”，并且可以安全地忽略。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:55:43.660

谢谢大家。

你是对的。

我使用的是 Code:Blocks 12.11，默认情况下它在编译器设置中启用了 -pg。

# picasa - API 控制台上的 Google 网络相册服务在哪里？

> ID：14565278
> 
> 赞同：2
> 
> 时间：2013-01-28T15:26:14.603
> 
> 标签：picasa

我想注册 Google 网络相册 API 来上传图片，但我在 API 控制台的服务中没有看到 Google 网络相册数据。

任何想法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-05-15T12:57:11.263

从[Picasa 网络相册数据 API 开发人员指南](https://developers.google.com/picasa-web/docs/2.0/developers_guide_protocol)部分“**使用 OAuth 2.0 授权请求**”：-

> 在 Google API 控制台的服务窗格中激活 Picasa 网络相册数据 API。（如果它未在控制台中列出，则跳过此步骤。）

然后，应用程序需要请求访问*范围*，在进一步的文档[使用 OAuth 2.0 访问 Google API](https://developers.google.com/accounts/docs/OAuth2)中进行了描述。在我的情况下，应用程序将作为服务运行而无需用户交互，因此相关部分是**Service accounts**。

当/如果我让它工作时，我会发布一些代码。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-12-13T23:06:03.247

确实，您没有在 google 控制台中明确启用 Picasa 网络相册数据 API。但是，我遇到了一个问题，我的 Picasa 访问停止工作。我得出的结论是，这是由于最近谷歌处理应用程序的方式发生了变化。我的应用是在旧控制台 ( [https://code.google.com/apis/console](https://code.google.com/apis/console) ) 中创建的。我在新控制台中创建了一个新项目，并将该 clientId/clientSecret 用于我的 OAuth，然后我的 picasa 访问再次开始工作（无需更改代码）。此处发布的完整详细信息：http: [//holtstrom.com/michael/blog/post/522/Google-OAuth2-with-PicasaWeb.html](http://holtstrom.com/michael/blog/post/522/Google-OAuth2-with-PicasaWeb.html)

# css - JavaFX css 控件自定义

> ID：14565280
> 
> 赞同：0
> 
> 时间：2013-01-28T15:26:20.980
> 
> 标签：css, javafx-2, javafx, fxml

我有 css 样式类：

```
.customTabPane {
     -fx-tab-min-height: 20;
}
.customTabPane:top *.tab-header-area {
    -fx-background-insets: 0, 0 0 1 0;
    -fx-padding: 5 0 0 0;
}

.customTabPane:top *.tab {
    -fx-padding:  0 0 0 0;
}

.customTabPane *.tab-header-background {
    -fx-background-color: red;
} 
```

但是 *.tab-header-area, *.tab-header-background 适用于应用程序中的所有 TabPane-s，而不仅仅是“customTabPane”（`tabPane.getStyleClass().add("customTabPane")`）。我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T12:32:57.820

我已经测试了您的用例，并且 css 仅应用于具有“customTabPane”样式类的 tabpane。再次检查您的代码。

```
@Override
public void start(Stage primaryStage) {

    TabPane tabPane = new TabPane();
    tabPane.getStyleClass().add("customTabPane");
    tabPane.getTabs().add(new Tab("tab 1"));

    TabPane tabPane2 = new TabPane();
    tabPane2.getTabs().add(new Tab("tab 2"));

    VBox root = new VBox();
    root.getChildren().addAll(tabPane,tabPane2);

    Scene scene = new Scene(root, 300, 250);
    scene.getStylesheets().add(this.getClass().getResource("style.css").toExternalForm());

    primaryStage.setScene(scene);
    primaryStage.show();
} 
```

# php - Zend_Dom_Query 多选

> ID：14565286
> 
> 赞同：0
> 
> 时间：2013-01-28T15:26:32.707
> 
> 标签：php, zend-framework, dom, zend-dom-query

我正在尝试使用 Zend_Dom_Query 从网页中获取一些特定内容。我得到了一个查询来从一个 dom 元素中获取内容。现在我想选择第二个 dom 元素来获取这个内容。

这是html：

```
<div class="blocks">
  <div class="w2">
    <h2>Some title</h2>
    <p>some text</p>
    <p>more text</p>
    <p class="more-info"><a href="#">link</a></p>
  </div>
  <div class="w2">
    <h2>Some title</h2>
    <p>some text</p>
    <p>more text</p>
    <p class="more-info"><a href="#">link</a></p>
  </div>
</div> 
```

到目前为止我的代码：

```
$client = new Zend_Http_Client();
$client->setUri('http://awsomewebsite');
$result = $client->request('GET');
$response = $result->getBody();
$dom = new Zend_Dom_Query($response);
foreach ($dom->query('div.w2') as $content) {
  echo $content->getElementsByTagName('h2')->item(0)->nodeValue; // this gives me the h2 value
  echo $content->getElementsByTagName('a')->item(0)->getAttribute('href');
} 
```

现在的问题是当有更多的锚链接时，这个解决方案不起作用。我的问题是：选择多个元素的正确方法是什么？或者我可以在这个 foreach 中使用新查询来选择正确的元素吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T03:34:47.053

```
$i=0;
foreach ($dom->query('div.w2') as $content) {
  echo $content->getElementsByTagName('h2')->item($i)->nodeValue; // this gives me the h2 value
  echo $content->getElementsByTagName('a')->item($i)->getAttribute('href');
  $i++;
} 
```

# vb.net - 搜索关键字将前面的文本发送到特定的文本框 vb.net

> ID：14565288
> 
> 赞同：0
> 
> 时间：2013-01-28T15:26:45.130
> 
> 标签：vb.net, textbox

我有一个 txt 文本文件，其中有几行如下：

```
SW1:bla bla bla
SW2:yada yada yada
SW3:yak yak yak 
```

我希望 vb net 查找行 SW1: 并将任何前面的内容放在 textbox1 中，就像明智的 sw2: 在 textbox2 中和 SW3: 在 textbox 3 中一样：

所有剩余的行都进入富文本框1

是否可以使用 vb.net 搜索关键字并将前面的文本发送到特定的文本框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:36:49.433

您可以使用ee`File.ReadAllLines`将整个文件加载到字符串数组中（文件中每行一个项目）。然后，您可以使用`String.StartsWith`and`String.SubString`方法来解析每一行，例如：

```
For Each line As String In File.ReadAllLines(filePath)
    If line.StartsWith("SW1:") Then
        TextBox1.Text = line.SubString(4)
    End If
    '...
Next 
```

或者，如果所有关键字的长度相同，则可以使用选择案例：

```
For Each line As String In File.ReadAllLines(filePath)
    Select Case line.SubString(0, 4)
        Case "SW1:"
            TextBox1.Text = line.SubString(4)
        ' ...
    End Select
Next 
```

或者，如果所有关键字都以冒号结尾，并且没有一个值包含该字符，则可以使用`String.Split`从每一行拆分键/值对：

```
For Each line As String In File.ReadAllLines(filePath)
    Dim parts() As String = line.Split(":"c)
    Select Case parts(0)
        Case "SW1"
            TextBox1.Text = parts(1)
        ' ...
    End Select
Next 
```

要将文件的其余部分读入富文本框中，有多种方法可以做到这一点，但最简单的方法之一是：

```
Dim builder As New StringBuilder()
For Each line As String In File.ReadAllLines(filePath)
    If line.StartsWith("SW1:") Then
        TextBox1.Text = line.SubString(4)
    Else If line.StartsWith("SW2:") Then
        TextBox2.Text = line.SubString(4)
    Else If line.StartsWith("SW3:") Then
        TextBox3.Text = line.SubString(4)
    Else
        builder.AppendLine(line)
    End If
Next
RichTextBox1.Text = builder.ToString() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:07:18.153

既然史蒂文先生已经得到了答案。也可以这样使用，。

```
Dim source = File.ReadAllLines("d:\source.txt")
sw1TextBox.Text = source.Where(Function(c) c.StartsWith("SW1:")).FirstOrDefault().Substring(4)
sw2TextBox.Text = source.Where(Function(c) c.StartsWith("SW2:")).FirstOrDefault().Substring(4)
sw3TextBox.Text = source.Where(Function(c) c.StartsWith("SW3:")).FirstOrDefault().Substring(4) 
```

# c# - 如何将bmp保存为pdf？

> ID：14565289
> 
> 赞同：0
> 
> 时间：2013-01-28T15:26:57.907
> 
> 标签：c#, visual-studio

我正在保存图像，但我需要将此图像转换为 pdf 并保存。我怎样才能做到这一点？

这是我使用的代码：

```
private void button3_Click(object sender, EventArgs e)
    {
        SaveFileDialog saveFileDialog1 = new SaveFileDialog();
        saveFileDialog1.FileName = "image.bmp";
        if (saveFileDialog1.ShowDialog() == DialogResult.OK)
        {

            Bitmap bitmap = new Bitmap(this.Width, this.Height);
            this.DrawToBitmap(bitmap, this.ClientRectangle);
            using (var Stream = saveFileDialog1.OpenFile())
            {
                bitmap.Save(Stream, ImageFormat.Bmp);
            }

        }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:28:32.913

您需要使用 PDF 库，例如[PDFSharp](http://www.pdfsharp.net/)。

这是一些将图像添加到 PDF的[示例代码：](http://www.pdfsharp.net/wiki/Graphics-sample.ashx#Draw_an_image_in_original_size_20)

```
void DrawImage(XGraphics gfx, int number)
{
  BeginBox(gfx, number, "DrawImage (original)");

  XImage image = XImage.FromFile(jpegSamplePath);

  // Left position in point
  double x = (250 - image.PixelWidth * 72 / image.HorizontalResolution) / 2;
  gfx.DrawImage(image, x, 0);

  EndBox(gfx);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:29:14.260

我使用[iTextSharp](http://sourceforge.net/projects/itextsharp/)转换为 PDF

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:30:33.813

Pdf 是一种容器格式。所以不能将位图保存**为**pdf，而是将位图嵌入到**pdf**中

iTextSharp 非常适合此请参阅[使用 ITextSharp 在 PDF 中插入图像](https://stackoverflow.com/questions/7115242/insert-an-image-in-pdf-using-itextsharp)

# html - 将图像与单行文本垂直对齐

> ID：14565290
> 
> 赞同：0
> 
> 时间：2013-01-28T15:27:01.650
> 
> 标签：html, css, alignment

我有一个不同国家的国旗列表，在它们下面我希望有这个国家的名字。当然列出标志是没有问题的，但我的问题是在国家名称的正上方对齐正确的图标。解决这个问题的最佳方法是什么，它会是 CSS 和表格的混合体吗？

这个想法是：

* * *

标志图标

阿尔巴尼亚

* * *

浏览器调整大小也是一个问题，因为我希望它们保持原样，这样它就不会在不同的屏幕尺寸/分辨率下搞砸

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:29:53.167

我建议将每个带有国家名称的国旗放在单独的浮动 div 中。

```
<div>
<img src="flag.jpg"/>
UK
</div>

<div>
<img src="flag.jpg"/>
USA
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:47:37.250

我建议使用标志作为元素的背景。它又好又干净：

这是演示：http: [//jsfiddle.net/zXBfL](http://jsfiddle.net/zXBfL)

HTML：

```
<div class="countryList">
    <div class="country" style="background-image: url(http://www.virtualglobaltaskforce.com/wp-content/themes/VGT/images/flag_uk.gif)">United Kingdom</div>
    <div class="country" style="background-image: url(http://www.virtualglobaltaskforce.com/wp-content/themes/VGT/images/flag_uk.gif)">Portugal</div>
</div> 
```

CSS：

```
.countryList .country {
    display: inline-block;
    padding: 80px 10px 10px 10px;
    border: 1px solid #666;
    margin-right: 5px;
    background-position: center 20px;
    background-repeat:no-repeat;
    width: 120px;
    text-align:center;
} 
```

# google-app-engine - 如何使用 maven 插件下载 GAE 日志？

> ID：14565302
> 
> 赞同：3
> 
> 时间：2013-01-28T15:27:27.110
> 
> 标签：google-app-engine, maven, logging, maven-gae-plugin

我正在使用 maven gae 插件来构建和部署 google appengine 应用程序（在 Windows 下）。一切都按预期工作。

但是 - 我注意到它也可以使用相同的插件下载 GAE。在我看来，它类似于：

```
mvn -DoutputFile=./test.log gae:logs 
```

应该可以工作-但是它只是卡在：

```
0% Beginning to retrieve log records... 
```

并且没有进一步 - 我做错了什么？

使用

```
mvn -e 
```

或者

```
mvn -X 
```

似乎没有提供任何有用的输出

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-16T20:58:26.790

我在 OSX 上也尝试了绝对路径，但它拒绝尊重`-DoutputFile`参数并将日志放入`target/gae.log`无论我尝试告诉它放置或命名它的位置。

所以去看看你的`project_dir/target/gae.log`文件

# ios - CustomBadge 在徽章周围呈现“grabage”

> ID：14565304
> 
> 赞同：0
> 
> 时间：2013-01-28T15:27:46.427
> 
> 标签：ios, ios6

我正在使用这个问题中讨论的 CustomBadge 库：[如何将徽章添加到标准 UIButton？](https://stackoverflow.com/questions/4722669/how-can-i-add-a-badge-to-a-standard-uibutton)

这是我的代码：

```
CustomBadge* customBadge = 
    [CustomBadge customBadgeWithString:@"$2.99"
                       withStringColor:[UIColor whiteColor]
                        withInsetColor:[UIColor redColor]
                        withBadgeFrame:YES
                   withBadgeFrameColor:[UIColor whiteColor]
                             withScale:1.0
                           withShining:NO];
 customBadge.frame = CGRectMake(self.btnUpgrade.frame.size.width - customBadge.frame.size.width + 15, -15, customBadge.frame.size.width, customBadge.frame.size.height);

[self.btnUpgrade addSubview:customBadge]; 
```

我得到了我的期望：

![自定义徽章](../Images/006bf29ad5a2eaf9e2e997a820b9d361.png)

我正在使用导航控制器。当我进入另一个 ViewController 并返回时，我的徽章得到一个“尾巴”：

![坏自定义徽章](../Images/326badf89df86b4fd32a7476c4870e8a.png)

如果我摆脱 customBadge.frame 线，徽章会正确呈现（虽然在错误的位置）。

代码在 viewWillAppear 上执行：

任何线索可能导致这种情况？

CustomBadge 代码位于：[https ://github.com/ckteebe/CustomBadge/blob/master/Classes/CustomBadge.m](https://github.com/ckteebe/CustomBadge/blob/master/Classes/CustomBadge.m)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:41:44.627

我想问题出在路径上。所以，要解决它，我会：

*   检查您是否从您想要的点开始路径，而不是从随机点开始。这意味着您需要在调用`CGContextMoveToPoint`之前先调用`CGContextBeginPath`
*   `CGContextClosePath`在使用之前关闭 ( ) 每个路径。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:37:49.523

当我在上面的代码中更改 customBadge 的框架时，看起来 CustomBadge 的 drawRect 使用了不同大小的矩形。也许它与 clipToBounds 与 maskToBounds 有关。

我添加了这个快速修复：

```
CustomBadge* customBadge = 
    [CustomBadge customBadgeWithString:@"$2.99"
                       withStringColor:[UIColor whiteColor]
                        withInsetColor:[UIColor redColor]
                        withBadgeFrame:YES
                   withBadgeFrameColor:[UIColor whiteColor]
                             withScale:1.0
                           withShining:NO];

    // copy the graphics of the badge into a UIImage
    UIGraphicsBeginImageContext(customBadge.bounds.size);
    [customBadge.layer renderInContext:UIGraphicsGetCurrentContext()];
    UIImage *viewImage = UIGraphicsGetImageFromCurrentImageContext();
    UIGraphicsEndImageContext();

    // position the UIImageView at the top right hand side of the button
    UIImageView* badgeHolder = [[UIImageView alloc] initWithFrame:CGRectMake(self.btnUpgrade.frame.size.width - customBadge.frame.size.width + 15, -15, customBadge.frame.size.width, customBadge.frame.size.height)];

    // put the badge's image in a UIImageView
    [badgeHolder setImage:viewImage];

    [self.btnUpgrade addSubview:badgeHolder]; 
```

# java - 从 1.7 升级到 2.0 后 GWT 错误加载模块

> ID：14565305
> 
> 赞同：1
> 
> 时间：2013-01-28T15:27:49.093
> 
> 标签：java, gwt, intellij-idea

在我的项目中，我使用了 gwt 1.7，但最近我升级到了 2.0。现在我有这个错误：

```
 ERROR: Unable to find 'portal.gwt.xml' on your classpath; could be a typo, or maybe you forgot to include a classpath entry for source?
    ERROR: Failed to load module 'portal' from user agent 'Mozilla/5.0 (X11; Ubuntu; Linux i686; rv:18.0) Gecko/20100101 Firefox/18.0' at localhost:40456 
```

Portal - 是要加载的模块的名称。我真的没有这个文件，而是我有 Application.gwt.xml 其中包含：

```
<module rename-to="portal">

    <!-- Inherit the core Web Toolkit stuff.                        -->
    <inherits name='com.google.gwt.user.User'/>
    <inherits name='com.extjs.gxt.ui.GXT'/>
    <inherits name='com.google.gwt.http.HTTP'/>

    <source path="client"/>
    <source path="data"/>
    <source path="com.extjs.gxt.ui.client.data.BaseModel"/>
    <source path="com.thoughtworks.xstream.XStream"/>

    <!-- Inherit AMPS Applica module. -->
    <inherits name="com.example.core.application.AmpsApplicationApi"/>
    <inherits name="com.example.core.domain.CoreDomainApi"/>

    <!--  inherit css based theme -->

    <!-- Specify the app entry point class.                         -->
    <entry-point class='com.example.portal.ui.client.Application'/>

    <!-- Specify the application specific style sheet.              -->
    <stylesheet src='Application.css'/>
    <!--<stylesheet src='loginPage.css'/>-->

</module> 
```

以前好像可以用，现在不行了。

PS 我正在使用 Intellij Idea 12

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:20:48.650

我假设这是在开发时（即不是在编译时）；我敢打赌，您仍在使用 HostedMode 而不是 DevMode（或类似的东西）。

附带说明一下，HostedMode 将从 GWT 2.5.1 开始删除。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:27:01.533

请在更新 clsspath 之前删除所有调试和运行配置。

创建一个新配置并尝试运行。

# asp.net-web-api - AutofacWebApiDependencyResolver 用法

> ID：14565307
> 
> 赞同：1
> 
> 时间：2013-01-28T15:27:51.760
> 
> 标签：asp.net-web-api, autofac

的用途是`AutofacWebApiDependencyResolver`什么？

我这样设置：

```
GlobalConfiguration.Configuration.DependencyResolver = 
    new AutofacWebApiDependencyResolver(container); 
```

但是如何在我`ApiController`的 s 中访问它？

`DependencyResolver.Current`不是`AutofacWebApiDependencyResolver`，它的 MVC 版本。

`.Current`在下可用`AutofacDependencyResolver`但不在 下可用`AutofacWebApiDependencyResolver`。如何在 web api 中访问 web api 版本？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:35:59.437

正如您向自己展示的那样...用于`GlobalConfiguration.Configuration.DependencyResolver`访问此解析器，就像您最初设置它时所做的一样（它是一个静态对象，可以从 Web API 中的任何地方访问）。

或者，使用请求依赖范围 - 无论您有权访问当前请求（即在 中`MessageHandler`）：

```
var myservice = request.GetDependencyScope().GetService(typeof(IMyService)) as IMyService 
```

这将`IMyService`使用当前设置解决`AutofacWebApiDependencyResolver`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-05T18:07:28.067

试试直截了当的方法：`this.Configuration.DependencyResolver`，实例在`this`哪里。`ApiController`

# javascript - 创建一个始终打开的窗口

> ID：14565310
> 
> 赞同：0
> 
> 时间：2013-01-28T15:27:56.050
> 
> 标签：javascript, user-interface, window, user-experience

> **可能重复：**
> [弹出窗口总是在顶部](https://stackoverflow.com/questions/3602802/popup-window-always-on-top)

在我的 Web 应用程序中，有一个打开分数图表的按钮。图表作为新窗口打开，以便用户可以将其放在主窗口旁边：

```
javascript:window.open('chart',..., 'left=50,top=50,toolbar=no,location=no,status=no,directories=no,dependent=yes,menubar=no, width=400,height=600,scrollbars=yes') 
```

但是，当用户将主窗口设为全屏，然后打开乐谱图，然后单击主窗口时——乐谱图在主窗口下“消失”了。

我怎样才能让分数图表始终保持在顶部（当然，直到用户关闭它）？

实现相同目标的其他想法也将受到欢迎......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:31:54.223

您可以使用 jquery 对话框将窗口作为主窗口内的“窗口”打开，这样主窗口和分数图表是相同的。

```
var $div = $("<div/>");
$("#OpenScoreChartButton").click(function() {
    $div.load('chart.aspx?... ', function() {
       $div.dialog(); 
    });
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:35:56.787

将 div 放在页面顶部而不是浏览器窗口上怎么样？弹出窗口通常被浏览器默认阻止。实现这一点的一种方法是使用这样的 javascript 插件：[https://github.com/ajayhada/SimpleDialog/wiki](https://github.com/ajayhada/SimpleDialog/wiki)，或者可能是 Jquery UI 对话框，请参阅[http://jqueryui.com/dialog/](http://jqueryui.com/dialog/)

# ruby-on-rails - ActiveRecord：高效计算总和

> ID：14565312
> 
> 赞同：2
> 
> 时间：2013-01-28T15:28:00.210
> 
> 标签：ruby-on-rails, ruby, rails-activerecord

我想显示活动的分析。这是一些上下文：

*   不同公司为特定广告收集活动统计信息
*   通常，不止一家公司为同一个广告生成统计数据
*   统计数据收集在一个名为 DailyStat 的模型中
*   每个活动都涉及许多可能会或可能不会收集统计数据的公司
*   活动和公司通过活动联系起来

广告系列 -> 广告 -> DailyStat

DailyStats 既属于广告又属于公司，具体取决于生成统计数据的公司。

模型如下所示：

```
class DailyStat < ActiveRecord::Base
  attr_accessible :ad, :clicks, :company, :date, :impressions

  belongs_to :ad
  belongs_to :company
end

class Ad < ActiveRecord::Base  
  belongs_to :campaign
  has_many :daily_stats
end

class Campaign < ActiveRecord::Base
  has_many :campaignizations, :dependent => :destroy
  has_many :companies, :through => :campaignizations

  has_many :ads, :dependent => :destroy
end

class Company < ActiveRecord::Base

  has_many :campaignizations, :dependent => :destroy
  has_many :campaigns, :through => :campaignizations

end 
```

现在，我想做的最有效的是：

*   检索特定广告系列的印象摘要（按公司）
*   检索特定广告系列的每个广告的印象摘要（按公司）

作为 ActiveRecord 的新手，我尝试过使用包含、总和等，但似乎无法理解如何从活动到公司分组的统计数据（没有迭代所有广告）。

我的问题：

1.  解决这个问题的有效方法是什么？
2.  将活动信息非规范化并添加到 DailyStats 是否有意义？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:08:45.550

可以使用 arel / AR 实现复杂*的*聚合计算，虽然有些复杂......这里有一个例子（不确定它是否有效，但你明白了）：

检索特定广告系列的印象摘要（按公司）：

```
DailyStat
  .joins(  company: {campaignizations: :campaign} )
  .where(  Campaign.arel_table[:id].eq arbitrary_id )
  .group(  DailyStat.arel_table[:company_id] )
  .select([ 
             DailyStat.arel_table[:impressions].sum, 
             DailyStat.arel_table[:company_id] 
          ]) 
```

正如我所说，我不知道这是否有效 - 在使用组 + 选择 AND 对象实例化时，您可能会遇到很多意想不到的问题（不要忘记 AR 会`DailyStat`为返回的每一行实例化一个对象，无论它是否有意义或不是），所以你最好坚持使用原始 SQL / 纯 Arel `select_all`。

如果您的 RDBMS 允许，另一个要考虑的选项是使用 DB 视图。稍加修改，就可以使用 AR 模型来访问数据库视图，就好像它是一张表一样......这非常有用。

# .net - 业务层实现

> ID：14565314
> 
> 赞同：1
> 
> 时间：2013-01-28T15:28:03.560
> 
> 标签：.net, design-patterns, logic, csla

在我最近对业务层开发领域的好奇和经常令人沮丧的旅行中，我发现了很多比较苹果（CSLA.NET）和橙子（Nhibernate）的讨论，但很少有人真正比较.NET业务逻辑中的当前状态开发技术（规则实施、逻辑验证、数据转换、数据一致性）

我希望编制一份通常用于实现业务层的技术（框架、模式）列表。目标主要是在 .NET 下运行的电子商务网站

（我们可以开始关于 Java 的新讨论——建议我们先坚持一种技术以避免任何混淆）

这个想法是让我和我的堆栈交换者伙伴了解有哪些不同的工具、框架、模式来实现业务层，而不是浪费他们的时间迷失在 ORM 和其他数据访问模式的世界中。

建议我们使用以下模板保持事情一致 1\. Framework / Pattern Name: 2\. Pro's: 3\. Con's: 4\. 我们什么时候应该使用这个：

欢迎提出建议。

干杯，山姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-11T06:48:47.110

当讨论业务层框架和领域驱动与以数据为中心的设计时，我经常向人们推荐以前的一些帖子。

[http://forums.lhotka.net/forums/p/3465/17247.aspx#17247](http://forums.lhotka.net/forums/p/3465/17247.aspx#17247)

和

[http://forums.lhotka.net/forums/t/10243.aspx](http://forums.lhotka.net/forums/t/10243.aspx)

都不错。

# ios - 带有自签名 SSL 的 RESTful 服务

> ID：14565316
> 
> 赞同：4
> 
> 时间：2013-01-28T15:28:09.690
> 
> 标签：ios, rest, ssl, security

我们正在构建一个端到端的解决方案，允许我们的客户通过移动应用程序访问托管在他们自己的服务器中的 ERP 数据。版本 1 将是一个 iOS 应用程序。

我们需要确保客户端和服务器之间的流量使用 SSL 加密。问题在于我们希望服务器的安装尽可能无缝，因此我们不希望客户经历购买和安装 SSL 证书的过程。甚至没有提到必须每年更新该证书。

我们正在考虑创建一个自签名 CA 证书并使用它为每个客户端创建子证书以安装在他们的服务器上（以及公共 CA 证书）。我们将自动化创建子证书的过程，并将其作为设置过程的一部分。该证书也将有一个非常长的到期日期，不处理到期。但是，如果我们使用此证书，来自客户端的请求将不受信任，因为 CA 将不受信任。

1.  可以将 CA 添加到 iOS 应用程序或设备吗？
2.  此实现是否存在安全问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-06T15:02:10.337

我有一个非常相似的情况。到目前为止，我刚刚创建了自签名证书，并且只是对客户端进行了编程以忽略允许不受信任的 SSL 证书。如果有更好的答案，我很乐意听到。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2017-05-07T17:22:52.080

现在是 2017 年，[letsencrypt](https://letsencrypt.org)现在存在，它提供免费的域验证和 TLS 证书签名，以便浏览器/操作系统 HTTPS 或 TLS 库和框架接受它们，并且通过[certbot](https://certbot.eff.org)设置自动更新相对容易。我不会在这里描述它，因为它是特定于部署的，但他们有很好的文档。结合它们可能是最好的解决方案。

由于各种原因，捆绑和使用自签名证书严重欠佳，并且没有理由再这样做了（除了可能是严重的懒惰），所以不要这样做。

免费仅适用于基本的域验证证书，即letsencrypt.org 验证您拥有您所说的域（并且certbot 用于自动化该过程）。如果需要，您仍然需要为额外的验证步骤付费。但是，对于您的应用程序和服务器之间的内部 TLS 连接，您只需要验证域，因为您只需要确保您正在与您的服务器通信。额外的步骤更侧重于让客户对公司充满信心，因此他们可以更加安心地提供敏感数据。一般来说，如果他们正在使用你的应用程序，这表明他们已经信任你的公司，所以额外的验证并不重要（而且可能对客户来说是不可见的）。

在开发中，如果您想使用自签名证书，这可能仍然有意义。查看[我](https://stackoverflow.com/a/43833922/5920499)对[这个问题](https://stackoverflow.com/questions/42455377/how-to-install-self-signed-certificate-in-ios-10/)的回答，了解如何为 iOS 设备上的所有应用安装自签名证书。

# ruby-on-rails - YAML 和 Rails：没有从 nil 到整数的隐式转换

> ID：14565319
> 
> 赞同：0
> 
> 时间：2013-01-28T15:28:18.377
> 
> 标签：ruby-on-rails, ruby, yaml, erb

我正在使用三个辅助方法创建一个 Rails 引擎。一个加载 YAML 配置文件，另一个确定 YAML 配置文件中的选项是否存在，如果存在，则返回 YAML 配置选项的值。否则，它返回 Rails 应用程序名称和字符串`':chat'`：

```
def config_file
  YAML.load_file(Rails.root.join('config', 'kouventa.yml'))
end

# This helper gets the name of the Rails app you're in.
# It also appends a :chat to it.
def app_name
  yaml = config_file
  name = Rails.application.class.to_s.split('::').first

  if yaml[:app][:name] == true
    yaml[:app][:name]
  else
    "#{name.uncapitalize}:chat"
  end
end 
```

问题是，如果我包含`<%= app_name %>`在我的 ERB 模板中，它会引发以下错误：`no implicit conversion from nil to integer`

这是完整的跟踪：

```
/Users/chris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:297:in `initialize'
/Users/chris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:297:in `open'
/Users/chris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/psych.rb:297:in `load_file'
/Users/chris/src/railssrc/kouventa/app/helpers/kouventa/application_helper.rb:4:in `config_file'
/Users/chris/src/railssrc/kouventa/app/helpers/kouventa/application_helper.rb:10:in `app_name'
/Users/chris/src/railssrc/kouventa/app/views/layouts/kouventa/application.html.erb:16:in `___sers_chris_src_railssrc_kouventa_app_views_layouts_kouventa_application_html_erb___3103356657825490294_70127840047660'
actionpack (3.2.11) lib/action_view/template.rb:145:in `block in render'
activesupport (3.2.11) lib/active_support/notifications.rb:125:in `instrument'
actionpack (3.2.11) lib/action_view/template.rb:143:in `render'
actionpack (3.2.11) lib/action_view/renderer/template_renderer.rb:59:in `render_with_layout'
actionpack (3.2.11) lib/action_view/renderer/template_renderer.rb:45:in `render_template'
actionpack (3.2.11) lib/action_view/renderer/template_renderer.rb:18:in `render'
actionpack (3.2.11) lib/action_view/renderer/renderer.rb:36:in `render_template'
actionpack (3.2.11) lib/action_view/renderer/renderer.rb:17:in `render'
actionpack (3.2.11) lib/abstract_controller/rendering.rb:110:in `_render_template'
actionpack (3.2.11) lib/action_controller/metal/streaming.rb:225:in `_render_template'
actionpack (3.2.11) lib/abstract_controller/rendering.rb:103:in `render_to_body'
actionpack (3.2.11) lib/action_controller/metal/renderers.rb:28:in `render_to_body'
actionpack (3.2.11) lib/action_controller/metal/compatibility.rb:50:in `render_to_body'
actionpack (3.2.11) lib/abstract_controller/rendering.rb:88:in `render'
actionpack (3.2.11) lib/action_controller/metal/rendering.rb:16:in `render'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:40:in `block (2 levels) in render'
activesupport (3.2.11) lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
/Users/chris/.rvm/rubies/ruby-1.9.3-p194/lib/ruby/1.9.1/benchmark.rb:295:in `realtime'
activesupport (3.2.11) lib/active_support/core_ext/benchmark.rb:5:in `ms'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:40:in `block in render'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
activerecord (3.2.11) lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:39:in `render'
actionpack (3.2.11) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
actionpack (3.2.11) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
actionpack (3.2.11) lib/abstract_controller/base.rb:167:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/rendering.rb:10:in `process_action'
actionpack (3.2.11) lib/abstract_controller/callbacks.rb:18:in `block in process_action'
activesupport (3.2.11) lib/active_support/callbacks.rb:403:in `_run__1576663026866565057__process_action__3352794237780824881__callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.11) lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.11) lib/abstract_controller/callbacks.rb:17:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/rescue.rb:29:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
activesupport (3.2.11) lib/active_support/notifications.rb:123:in `block in instrument'
activesupport (3.2.11) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
activesupport (3.2.11) lib/active_support/notifications.rb:123:in `instrument'
actionpack (3.2.11) lib/action_controller/metal/instrumentation.rb:29:in `process_action'
actionpack (3.2.11) lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
activerecord (3.2.11) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
actionpack (3.2.11) lib/abstract_controller/base.rb:121:in `process'
actionpack (3.2.11) lib/abstract_controller/rendering.rb:45:in `process'
actionpack (3.2.11) lib/action_controller/metal.rb:203:in `dispatch'
actionpack (3.2.11) lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
actionpack (3.2.11) lib/action_controller/metal.rb:246:in `block in action'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:73:in `call'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:36:in `call'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:601:in `call'
railties (3.2.11) lib/rails/engine.rb:479:in `call'
railties (3.2.11) lib/rails/railtie/configurable.rb:30:in `method_missing'
journey (1.0.4) lib/journey/router.rb:68:in `block in call'
journey (1.0.4) lib/journey/router.rb:56:in `each'
journey (1.0.4) lib/journey/router.rb:56:in `call'
actionpack (3.2.11) lib/action_dispatch/routing/route_set.rb:601:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
rack (1.4.4) lib/rack/etag.rb:23:in `call'
rack (1.4.4) lib/rack/conditionalget.rb:25:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/head.rb:14:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/params_parser.rb:21:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/flash.rb:242:in `call'
rack (1.4.4) lib/rack/session/abstract/id.rb:210:in `context'
rack (1.4.4) lib/rack/session/abstract/id.rb:205:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/cookies.rb:341:in `call'
activerecord (3.2.11) lib/active_record/query_cache.rb:64:in `call'
activerecord (3.2.11) lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `_run__2096171487662296236__call__865153784229083501__callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:405:in `__run_callback'
activesupport (3.2.11) lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
activesupport (3.2.11) lib/active_support/callbacks.rb:81:in `run_callbacks'
actionpack (3.2.11) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/reloader.rb:65:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
railties (3.2.11) lib/rails/rack/logger.rb:32:in `call_app'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `block in call'
activesupport (3.2.11) lib/active_support/tagged_logging.rb:22:in `tagged'
railties (3.2.11) lib/rails/rack/logger.rb:16:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/request_id.rb:22:in `call'
rack (1.4.4) lib/rack/methodoverride.rb:21:in `call'
rack (1.4.4) lib/rack/runtime.rb:17:in `call'
activesupport (3.2.11) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
rack (1.4.4) lib/rack/lock.rb:15:in `call'
actionpack (3.2.11) lib/action_dispatch/middleware/static.rb:62:in `call'
railties (3.2.11) lib/rails/engine.rb:479:in `call'
railties (3.2.11) lib/rails/application.rb:223:in `call'
railties (3.2.11) lib/rails/railtie/configurable.rb:30:in `method_missing'
unicorn (4.5.0) lib/unicorn/http_server.rb:552:in `process_client'
unicorn (4.5.0) lib/unicorn/http_server.rb:628:in `worker_loop'
unicorn (4.5.0) lib/unicorn/http_server.rb:500:in `spawn_missing_workers'
unicorn (4.5.0) lib/unicorn/http_server.rb:142:in `start'
unicorn (4.5.0) bin/unicorn_rails:209:in `<top (required)>'
/Users/chris/.rvm/gems/ruby-1.9.3-p194/bin/unicorn_rails:19:in `load'
/Users/chris/.rvm/gems/ruby-1.9.3-p194/bin/unicorn_rails:19:in `<main>'
/Users/chris/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `eval'
/Users/chris/.rvm/gems/ruby-1.9.3-p194/bin/ruby_noexec_wrapper:14:in `<main>' 
```

# php - 同一数据库上的加密密钥？

> ID：14565326
> 
> 赞同：0
> 
> 时间：2013-01-28T15:28:39.507
> 
> 标签：php, mysql, encryption, centos

我在将一些敏感数据传递给数据库之前对其进行加密。到目前为止，每个用户都有自己的 enc/decr 密钥存储在数据库中（并且密钥本身是带有主密码的 encr。

我想知道它是否增加了将每个用户的密钥存储在同一服务器上的不同数据库中的任何安全性。说得通？

此外，我将“主”密钥保存在仅在加密时包含的单独文件中，我正在考虑以尽可能少的权限“锁定”它（CentOS 服务器）。我应该授予文件什么级别的权限？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:38:49.730

除非您有不同的 mysql 用户访问不同的数据库，否则将数据存储在不同的数据库中不会增加安全性。

如果您想将密码存储在数据库中并且需要能够对其进行解密以供使用，您将需要一个主密钥，该主密钥应存储在您的服务器（而不是数据库）上一个很少有人可以访问的安全位置。

此外，您应该确保将来能够更改该密钥（例如，可以将现有加密数据转换为使用新密钥的脚本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:31:34.663

如果您的密钥在数据库中的任何位置，您可能没有它。这就像锁上你的车——把钥匙挂在门把手上。

存储密码的正确方法是对密码进行哈希（而不是加密！）然后存储哈希。然后您散列登录尝试并与存储的散列进行比较。无法重新创建原始密码。

# java - 在广播接收器通知中实现服务

> ID：14565327
> 
> 赞同：0
> 
> 时间：2013-01-28T15:28:51.630
> 
> 标签：java, android, service, notifications, broadcastreceiver

我创建了一个用于在特定日期和时间显示通知的类。这是用于创建通知的类的源代码：

```
public class TimeAlarm extends BroadcastReceiver {

    public static NotificationManager mNotificationManager;
    public static int SIMPLE_NOTFICATION_ID = 0;

    @Override
    public void onReceive(Context context, Intent intent) {
        mNotificationManager = (NotificationManager) context
                .getSystemService(Context.NOTIFICATION_SERVICE);
        CharSequence from = "Scheduled Training";
        CharSequence message = "Please attend the scheduled training";

        PendingIntent contentIntent = PendingIntent.getActivity(context, 0,
                new Intent(context, TextToSpeechScreen.class), 0);

        //OLD CODE

        Notification notifyDetails = new Notification(R.drawable.ic_launcher,
                "Barclays Scheduled Training", System.currentTimeMillis());

        notifyDetails.setLatestEventInfo(context, from, message, contentIntent);
        notifyDetails.flags |= Notification.FLAG_AUTO_CANCEL;
        // Play default notification sound
        notifyDetails.defaults |= Notification.DEFAULT_SOUND;

        // Vibrate if vibrate is enabled
//      notifyDetails.defaults |= Notification.DEFAULT_VIBRATE;

        mNotificationManager.notify(SIMPLE_NOTFICATION_ID, notifyDetails);
    }
} 
```

这是我从活动中调用以在特定时间设置通知的方法：

```
// setting alarm

    public void setOneTimeAlarm() {

        // the time set
        Calendar calendar = GregorianCalendar.getInstance();

        // calendar.setTime(model.getStartDate());
        calendar.setTime(new Date());
        calendar.set(Calendar.HOUR_OF_DAY, model.getStartTimeHour());
        // calendar.set(Calendar.HOUR_OF_DAY, 10);
        calendar.set(Calendar.MINUTE, model.getStartTimeMinutes());
        // calendar.set(Calendar.MINUTE, 53);
        calendar.set(Calendar.SECOND, 0);

        Intent intent = new Intent(this, TimeAlarm.class);
        PendingIntent pendingIntent = PendingIntent.getBroadcast(this, 0,
                intent, count);
        am.set(AlarmManager.RTC_WAKEUP, calendar.getTimeInMillis(),
                pendingIntent);

    } 
```

一切正常，现在我需要在**TimeAlarm类中实现****服务**，以便可以从后台进程触发通知。我应该如何实现这个？是否可以使用后台进程发送通知？提前致谢！

# linux - 如何检查是否已从信号处理程序进行系统调用？

> ID：14565329
> 
> 赞同：0
> 
> 时间：2013-01-28T15:28:55.163
> 
> 标签：linux, linux-kernel, system-calls

如果系统调用是从信号处理程序调用的，我正在尝试以不同的方式运行它，但我找不到检查这种情况的方法。当前线程或任务结构中是否有我可以检查的标志？TIF_SIGPENDING 似乎不起作用...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T02:55:36.483

现在没有这样的标志。TIF_SIGPENDING 是一个标志信号挂起，而不是正在处理的信号。该系统设计为在信号处理程序从未关闭的情况下工作。系统调用和信号处理程序的执行是序列化的。

一种方法是回溯用户空间调用堆栈以在信号帧中搜索架构的特殊幻数，如 arch/i386/kernel/signal.c - setup_frame() 中所指出的：

```
/*
 * This is popl %eax ; movl $,%eax ; int $0x80
 *
 * WE DO NOT USE IT ANY MORE! It's only left here for historical
 * reasons and because gdb uses it as a signature to notice
 * signal handler stack frames.
 */
err |= __put_user(0xb858, (short __user *)(frame->retcode+0));
err |= __put_user(__NR_sigreturn, (int __user *)(frame->retcode+2));
err |= __put_user(0x80cd, (short __user *)(frame->retcode+6)); 
```

但是既然你正在改变内核，为什么不直接破解它呢？只需操作 handle_signal/sys_sigreturn/sys_rt_sigreturn 中的计数器。而且你需要覆盖所有的异常，这样的信号处理程序永远不会调用 sigreturn。

# bash - 解析 pom.xml 时如何让 XMLStarlet 提取多个开发人员角色？

> ID：14565330
> 
> 赞同：1
> 
> 时间：2013-01-28T15:28:57.887
> 
> 标签：bash, command-line-interface, pom.xml, xmlstarlet

我正在用一个奇怪的层次结构中**的 bash 脚本**解析数百个 pom，以将所有项目的概述提取到一个报告中（maven-info-projects:project-team 不能一次性完成的事情）。由于未公开的原因，我不想弄乱父 pom 或尝试配置 maven-info-projects 部分。

我正在使用[XMLStarlet](http://xmlstar.sourceforge.net/)，因为它已安装，而[xmllint](http://xmlsoft.org/xmllint.html)未安装。

给定一个 pom.xml 提取，其中包含：

```
<developer>
   <id>devId</id>
   <name>Developer Name</name>
   <email>dev@nowhere.com</email>
   <roles>
      <role>Project manager</role>
      <role>Developer</role>
   </roles>
</developer> 
```

如何通过一次调用[XMLStarlet](http://xmlstar.sourceforge.net/)来提取所有开发人员信息，包括多个角色？

目前，我可以通过以下方式提取大部分信息：

```
# Developers
locate_section_values $pom_file_name "/x:project/x:developers/x:developer" \
    "concat( \
        x:id, '|', x:name, '|', x:email, '|', x:roles, '|', \
        x:organization, '|', x:organizationUrl, '|', x:timezone
     )" 
```

在哪里

```
function locate_section_values(){
  local xml_file=$1
  local section=$2
  local value_table=$3

  OLD_IFS=$IFS
  IFS=$'\n'
  xml_values=()
  xml_values=(`xmlstarlet sel -B -N x="http://maven.apache.org/POM/4.0.0" -t -m "$section" -v "$value_table" -nl $xml_file`)
  IFS=$OLD_IFS
} 
```

然后我拆分结果：

```
 for developer in ${xml_values[@]}; do
    IFS='|' 
    set $developer # split into $1, $2, etc using | as seperator
    #echo "id:${1}, name:${2}, roles:${4}"

    if [ -n "${1}" ]; then # id
      developer_id=${1}
      developer_ids+=( $developer_id )
    fi
    ... 
```

问题是，具有多个角色的开发人员将他们的角色连接起来：

```
 Project managerDeveloper 
```

有没有办法告诉对 xmlstarlet 的原始调用将多个角色组合成一个逗号分隔的列表？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T00:09:09.390

我认为以下内容大致提供了您想要的内容，但是您必须将界面更改为`locate_section_values`：

```
xmlstarlet sel -T -B -N x="http://maven.apache.org/POM/4.0.0" \
   -t -m "/x:project/x:developers/x:developer" -v "x:id" -o "|" \
   -v "x:name" -o "|" -v "x:email" -o "|" \
   -m "x:roles/x:role" -v "." -o "," -b -o "|" \
   -v "x:organization" -o "|" -v "x:organizationUrl" -o "|" \
   -v "x:timezone" --nl 
  $pom_file_name 
```

这会将角色生成为逗号*终止*的列表，因为它更容易编码。

* * *

`locate_section_values`无`eval`：

```
function locate_section_values() {
    local xml_file=$1 # $local_project_dir/$fixed_name/pom.xml
    local section=$2 #/x:project/x:modules/x:module
    local value_table=("${@:3}")

    OLD_IFS=$IFS
    IFS=$'\n'
    xml_values=($(xmlstarlet sel -B -N x=http://maven.apache.org/POM/4.0.0 \
        -t -m "$section" "${value_table[@]}" --nl "$xml_file"))
    IFS=$OLD_IFS
} 
```

称呼：

```
locate_section_values "$pom_file_name" '/x:project/x:developers/x:developer' \
      -v 'x:id' -o '|' -v 'x:name' -o '|' -v 'x:email' -o '|' \
      -m 'x:roles/x:role' -v '.' -o ', ' -b -o '|' \
      -v 'x:organization' -o '|' -v 'x:organizationUrl' -o '|' \
      -v 'x:timezone' 
```

循环开发人员并提取字段：

```
for developer in "${xml_values[@]}"; do
    # get | separated fields
    IFS='|' read id name email roles org orgUrl timezone <<<"$developer"

    if [ -n "$roles" ]; then # roles
        developer_roles_csv=${roles%, } # strip trailing comma
    fi

    echo "$name ($id) has roles: $developer_roles_csv."

done # developer 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:17:36.540

根据[@npostavs](https://stackoverflow.com/a/14573548/1491089)提供的答案，我有以下工作：

```
function locate_section_values(){
  local xml_file=$1 # $local_project_dir/$fixed_name/pom.xml
  local section=$2 #/x:project/x:modules/x:module
  local value_table=${@:3}

  OLD_IFS=$IFS
  IFS=$'\n'
  xml_values=()
  xml_cmd="xmlstarlet sel -B -N x=\"http://maven.apache.org/POM/4.0.0\" \
      -t -m \"$section\" $value_table -nl $xml_file"
  xml_values=(`eval $xml_cmd`)
  IFS=$OLD_IFS
} 
```

如果我这样称呼它，它会解析开发人员：

```
 # Developers
  locate_section_values $pom_file_name "/x:project/x:developers/x:developer" \
      -v \"x:id\" -o \"\|\" -v \"x:name\" -o \"\|\" -v \"x:email\" -o \"\|\" \
      -m \"x:roles/x:role\" -v \".\" -o \", \" -b -o \"\|\" \
      -v \"x:organization\" -o \"\|\" -v \"x:organizationUrl\" -o \"\|\" \
      -v \"x:timezone\" 
```

我可以使用“developer_roles_csv=${4%??}”轻松删除尾随的“逗号和空格”：

```
 OLD_IFS=$IFS
  IFS=$'\n'
  for developer in ${xml_values[@]}; do
    IFS='|' 
    set $developer # split into $1, $2, etc using | as seperator

    ....

    if [ -n "${4}" ]; then # roles
      developer_roles_csv=${4%??} # strip trailing comma
      .....
    fi

    ....

  done # developer
  IFS=$OLD_IFS 
```

# jquery - 使用控制器（MVC）和路由值更新数据源

> ID：14565331
> 
> 赞同：0
> 
> 时间：2013-01-28T15:29:01.243
> 
> 标签：jquery, asp.net-mvc, kendo-ui

我们正在使用 Kendo-UI 和 ASP MVC。

当我第一次定义一个图表时，我把动作名称、控制器名称和路由值：

```
.DataSource(datasource => datasource
         .Read(read => read.Action("DataForEvo", "Home", new { seriename = "Default", category = "Default" })) 
```

但后来（在客户端），我需要用新数据重新加载图表。我在同一页面中有 2 个图表，底部是“条形图”，顶部是“折线图”，当用户单击条形图的任何系列时，折线图应使用相关数据进行更新。

在“条形图”中，我有系列点击事件：

```
.Events(ev => ev.SeriesClick("onSeriesClick"))) 
```

我可以在哪里获得系列名称、类别和价值。从这里使用 jquery 我可以得到图表

```
var Chart = $("#chart").data("kendoChart"); 
```

并且...可能存在一种方法或方式来使用新的“路由值”再次调用该操作。

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-05T21:01:48.370

使用 read.Data() 方法设置一个 javascript 函数：

```
.DataSource(datasource => datasource
     .Read(read => read.Data("SetData")) 
```

javascript 函数应返回您的数据对象：

```
function SetData() { return { seriesname: "Foo", category: "Bar" }; } 
```

# php - 将所有根域 url 移动到子目录

> ID：14565336
> 
> 赞同：1
> 
> 时间：2013-01-28T15:29:11.367
> 
> 标签：php, wordpress, .htaccess, url-rewriting, url-rewrite-module

大家好，我是stackoverflow的新手，而不是php开发人员

我正在尝试将我的 wordpress 网站移动到子目录

例如：http://blog.site.com -> http://blog.site.com/blog

我做了一些谷歌，找到了一些 htaccess 文件的代码

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www.)?blog.site.com$
RewriteRule ^(/)?$ blog [L] 
```

这将我的主页重定向到 http://blog.site.com/blog。但不是
http://blog.site.com/index.php/category/pageName/

现在在做更多的谷歌之后，我又得到了一个 htaccess 代码

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www.)?blog.site.com$ [NC]
RewriteCond %{REQUEST_URI} !^/blog/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /blog/$1
RewriteCond %{HTTP_HOST} ^(www.)?blog.site.com$ [NC]
RewriteRule ^(/)?$ blog/index.php [L] 
```

使用此代码 http://blog.site.com/index.php/category/pageName/ 正在读取来自 http://blog.site.com/blog/index.php/category/pageName/ 的响应
但不重定向

我想重定向所有 url 示例 http://blog.site.com/........ --> http://blog.site.com/blog/......

帮帮我……谢谢……

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T20:05:59.853

```
RewriteEngine on
RewriteCond %{HTTP_HOST} ^(www.)?blog.site.com$ [NC]
RewriteCond %{REQUEST_URI} !^/blog/
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /blog/$1 [R,L] 
```

添加的 R 是重定向..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T01:38:25.123

感谢 Ferry Kobus 的回复

我也得到了一种解决方案，它几乎相同并且工作完美。

> 重写引擎开启
> 
> RewriteCond %{HTTP_HOST} ^(www.)?blog.site.com$
> 
> RewriteCond %{REQUEST_URI} !^/blog/
> 
> 重写规则 ^(.*)$ /blog/$1 [L,R=301]

无论如何再次感谢。

# c# - .NET Random 类中的设计目标/偏好

> ID：14565337
> 
> 赞同：1
> 
> 时间：2013-01-28T15:29:12.713
> 
> 标签：c#, .net, random

我在一些项目中使用了 .NET 的 Random 类，但我经常想知道的一件事是为什么它被设计为实例对象，而不是具有返回随机值的静态方法。

例如：

```
Random rnd = new Random()
int x = rnd.Next(0, 255); 
```

是否有任何理由或设计选择来说明为什么它没有同时使用实例和静态方法进行设计，以便我可以这样做：

```
int x = Random.Next(0, 255); 
```

是否有任何原因没有实现此功能，因为我认为它会很有用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:34:36.947

`System.Random`有两个构造函数，一个是裸的，一个是接受种子的（生成任何随机数的基础）。

如果这是一个静态方法，那么您要么需要每次都传递种子，要么允许某种默认值。

您可能想检查这个 SO question，了解为什么种子真的很重要。

[如何播种随机类以避免获得重复的随机值](https://stackoverflow.com/questions/1785744/how-do-i-seed-a-random-class-to-avoid-getting-duplicate-random-values)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:52:44.043

如果有`Random.Next`您建议的静态方法，则必须将其设计为多个线程同时调用它不会破坏状态。当前`Random`类不支持多个并发用户。

此外，如果只有一个`Random`实例，您的代码不能有两个部分依赖于不同的随机序列。我在用 C 编码时多次遇到这个问题，它有一个全局随机数生成器。我最终不得不编写自己的每个实例生成器。

使随机数生成器成为实例类而不是静态类可以为您提供更大的灵活性。如果您只想在程序中使用一个全局对象，请在全局范围内声明并使用它，就像只有一个静态`Random`对象一样。它最终是一行额外的代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:36:04.957

Random 作为实例对象允许您配置 Randomgenerator；

> 为不同的 Random 对象提供相同的种子值会导致每个实例产生相同的随机数序列。

这在例如测试时会变得非常方便

请参阅[随机构造函数 (Int32)](http://msdn.microsoft.com/en-us/library/ctssatww.aspx)

# java - 如何以编程方式为 TestNG 创建测试？

> ID：14565342
> 
> 赞同：2
> 
> 时间：2013-01-28T15:29:29.153
> 
> 标签：java, automation, testng

我正在编写一个库来为我的 JPA`@Entity`类自动生成单元测试。简而言之：用户提供字段-> 值对的多重映射，我的库为它们生成测试。

示例测试数据：

```
lastName -> some name, some other name
firstName -> some first name, some other first name 
```

假设我有一个包含测试的类：

```
public class PersonTest
{
    @Test
    public void personNotValidNullLastname() {
        // ...
    }

    @Test
    public void personNotValidTooLongLastname() {
        // ...
    }

    @Test
    public void personNotValidDateofbirth() {
        // ...
    }

    @Test
    public void personValidAddressType() {
       // ...
    }
    // ...
} 
```

如果我执行这些测试，我会从 TestNG 控制台获得一些不错的输出：

```
PASSED: personNotValidDateofbirth
PASSED: personNotValidNullLastname
PASSED: personNotValidTooLongLastname
PASSED: personValidAddressType 
```

现在我想即时创建一些测试。如果我将`@Factory`注释与这样的方法一起使用：

```
@Factory
public Object[] generateTests() {
    // ...
} 
```

这个工厂创建了我的自定义类的实例：

```
public class EntityFieldTest
{
    // ...

    @Test
    public void doTest()
    {
        testMethod.run(VALIDATOR, entityClass, field, value);
    }
}

// Note that testMethod is an anonymous function parametrized elsewhere 
```

它将运行我生成的所有测试，但输出并没有说太多：

```
PASSED: doTest
PASSED: doTest
PASSED: doTest
PASSED: doTest 
```

如何执行我的测试方法以实现更详细的结果，例如`PersonTest`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:40:03.863

使`EntityFieldTest` 实现[`org.testng.ITest`](http://testng.org/javadoc/org/testng/ITest.html)和覆盖[`getTestName()`](http://testng.org/javadoc/org/testng/ITest.html#getTestName%28%29)。您提到您正在`EntityFieldTest`工厂内部创建实例，因此请提供一个`EntityFieldTest`构造函数，该构造函数接受代表该测试名称的字符串。然后在中返回该值`getTestName()`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:41:17.223

您可以创建自定义记录器： http: [//testng.org/doc/documentation-main.html#logging](http://testng.org/doc/documentation-main.html#logging)并生成您喜欢的报告。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:02:51.207

看起来也许您应该改用一些验证器类。确保已经创建了核心测试是个好主意，但是除了提供存根之外，最好将任何精力投入到实际验证属性状态的类中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T23:40:40.217

你检查过[DataProviders](http://testng.org/doc/documentation-main.html#parameters-dataproviders)吗？

它将为您提供为测试用例提供数据的选项。您也可以从文件中读取测试用例输入并传递给测试功能。每个@Test 方法都需要用@Dataprovider(name=.., [class=..]

所以你的 personValidAddressType 看起来像

```
@Test(dataProvider = "validAddressType", dataProviderClass = TestCaseData.class)
public void personValidAddressType(TestCase testCase) {...} 
```

在 TestCaseData 中，

```
@DataProvider(name = "validAddressType")
public static Iterator<Object[]> getTestCases() {
    //returns your test case
} 
```

提到的链接中的示例在类似情况下对我有帮助。您还可以让数据提供者返回 Object[][] 而不是迭代器

# iphone - UINavigationBar 的屏幕间标题动画

> ID：14565343
> 
> 赞同：0
> 
> 时间：2013-01-28T15:29:32.520
> 
> 标签：iphone, ios, objective-c, xcode, ipad

我创建了一个弹出窗口，其中有几个屏幕都由导航控制器控制。我已经看到了这样的示例，在这些示例中，当您在屏幕之间切换时，导航栏的标题和“完成”按钮始终位于相同的位置并且从不动画。发生的唯一变化是出现的“后退”按钮。

我试图模仿同样的行为，但事情并不完全准确。

每当屏幕转换时，标题和完成按钮都会向左滑动并淡出，就像视图的正常动画一样。我需要他们留在原地，只有视图动画。此外，正在自动生成的“后退”按钮（我没有创建它，但导航栏正在创建一个）被标记为前一个屏幕的标题。我需要它只是“回来”。如何自定义自动生成的按钮？或者至少停止它的创建，这样我就可以自己创建一个按钮？

一些代码...

```
 //popover and navbar creation

SettingsPopoverView *settingsPopoverView = [[SettingsPopoverView alloc] initWithNibName:@"SettingsPopoverView" bundle:[NSBundle mainBundle]];
UINavigationController *nav = [[UINavigationController alloc]
                               initWithRootViewController:settingsPopoverView];

popover = [[UIPopoverController alloc] initWithContentViewController:nav];
popover.delegate = self;
popover.popoverContentSize = CGSizeMake(320, 497);
[popover presentPopoverFromRect:Button.frame inView:self.view permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES]; 
```

然后稍后在我的代码中，一旦用户在第一个弹出窗口中进行选择

```
//screen navigation call when selection is made
[self.navigationController pushViewController:selectionView animated:YES]; 
```

同样，这组代码使我的导航栏动画化，并在下一个视图上自动生成带有错误标签的后退按钮。我需要停止导航栏的动画并更改后退按钮的标签。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T18:54:00.290

这是一种方法。在故事板中，我在视图控制器的顶部添加了一个导航栏，并在其下方添加了一个容器视图，占据了屏幕的其余部分。我删除了容器视图附带的视图控制器，并将其替换为导航控制器。我在检查器中取消选中导航控制器的“显示导航栏”框。我添加了一些其他控制器，这些控制器的按钮连接到 segues 以推送到下一个队列，并给这些控制器标题。在第一个控制器中，即带有容器视图的控制器中，我添加了以下代码：

```
@implementation ViewController {
    IBOutlet UINavigationBar *bar;
    UINavigationController *nav;
    UIBarButtonItem *backButton;
    UIBarButtonItem *done;
}

- (void)viewDidLoad {
    [super viewDidLoad];
    nav  = (UINavigationController *)self.childViewControllers[0];
    nav.delegate = self;
}

- (void)navigationController:(UINavigationController *)navigationController willShowViewController:(UIViewController *)viewController animated:(BOOL)animated {
    UINavigationItem *item = [[UINavigationItem alloc] initWithTitle:viewController.title];
    if (done == nil) done = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemDone target:self action:@selector(doneClicked)];
    [item setRightBarButtonItem:done];

    if (navigationController.viewControllers.count >1) {
        if (backButton == nil)  backButton = [[UIBarButtonItem alloc] initWithTitle:@"Back" style:UIBarButtonItemStyleBordered target:self action:@selector(backToPrevious)];
        [item setLeftBarButtonItem:backButton];
        [bar setItems:@[item] animated:NO];
    }else{
        [bar setItems:@[item] animated:NO];
    }
}

-(void)backToPrevious {
    [nav popViewControllerAnimated:YES];
}

-(void)doneClicked {
    NSLog(@"Done Clicked");
} 
```

# c - 如何从结构定义中生成函数？

> ID：14565345
> 
> 赞同：2
> 
> 时间：2013-01-28T15:29:32.823
> 
> 标签：c, parsing, code-generation, deserialization

我正在编写一个用于反序列化数据的库。我有像这样的结构定义：

```
#ifndef SEARCHRESULTS_H
#define SEARCHRESULTS_H

typedef struct {
    char *url;
} SearchResult;

typedef struct {
    int count;
    SearchResult *searchResults;
} SearchResults;

#endif 
```

由于 C 缺乏反射，所有函数都必须手动编写，但我相信应该有一种很好的方法来解析标题、查找`struct`名称和字段并生成函数（伪 C）：

```
#include "SearchResults.h"
#include "pdata_serialization.h"

void SearchResult_parse(pdata *data, SearchResult *obj) {
    obj->url = strdup(data->values["url"]);
}

void SearchResult_free(SearchResult *obj) {
    free(obj->url);
    free(obj);
}

void SearchResults_parse(pdata *data, SearchResults *obj) {
    obj->count = data->values["count"];
    obj->searchResults = malloc(sizeof(SearchResult) * obj->count);
    for (int i = 0; i < obj->count; i++)
        SearchResult_parse(data->values["searchResults"][i], &obj->searchResults[i]);
}

void SearchResults_free(SearchResults *obj) {
    for (int i = 0; i < obj->count; i++)
        SearchResult_free(&obj->searchResults[i]);
    free(obj);
} 
```

我不是在寻找一个完整的解决方案，而是一个理智和最小的想法和一个小例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-09T12:53:01.953

用[GNU Autogen](http://www.gnu.org/software/autogen/manual/autogen.html)解决了这个问题。我将标题转换为定义文件，每个结构一个：

```
// SearchResult.def
AutoGen Definitions struct;
struct = {
    type = "char *";
    name = "url";
};

// SearchResults.def
AutoGen Definitions struct;
struct = {
    type = "SearchResult *";
    name = "searchResults";
}; 
```

并编写了以下不太漂亮的模板：

```
[= AutoGen5 Template h c =][=
    (define model (string-substitute (def-file) ".def" ""))
=][=
    CASE (suffix)
=][=
    == h
=][=
    (make-header-guard "")
=]

typedef struct _[= (. model) =] {[=
    FOR struct =]
    [=
        (get "type")
    =][=
        (get "name")
    =];[=
        IF (and (*== (get "type") "*") (not (== (get "type") "char *"))) =]
    size_t [= (get "name") =]Count;[=
        ENDIF =][=
    ENDFOR struct
=]
} [= (. model) =];

#endif /* [= (. header-guard) =] */
[=
    == c
=]#include "[= (. header-file) =]"
#include "pdata_serialization.h"

void [= (. model) =]_parse(pdata *data, [= (. model) =] *obj) {[=
    FOR struct =][=
        IF (== (get "type") "char *")
    =]
    obj->[= (get "name") =] = strdup(data->values["[= (get "name") =]"]);[=
        ELIF (*== (get "type") "*")
    =]
    obj->[= (get "name") =]Count = data->values["[= (get "name") =]Count"];
    obj->[= (get "name") =] = malloc(sizeof([= (string-substitute (get "type") " *" "") =]) * obj->[= (get "name") =]Count);
    for (size_t i = 0; i < obj->[= (get "name") =]Count; i++)
        [= (string-substitute (get "type") " *" "") =]_parse(data->values["[= (get "name") =]"][i], &obj->[= (get "name") =][i]);[=
        ENDIF
    =][=
    ENDFOR struct
=]
}

void [= (. model) =]_free([= (. model) =] *obj) {[=
    FOR struct =][=
        IF (== (get "type") "char *")
    =]
    free(obj->[= (get "name") =]);[=
        ELIF (*== (get "type") "*")
    =]
    for (size_t i = 0; i < obj->[= (get "name") =]Count; i++)
        [= (string-substitute (get "type") " *" "") =]_free(&obj->[= (get "name") =][i]);
    free(obj->[= (get "name") =]);[=
        ENDIF
    =][=
    ENDFOR struct
=]
    free(obj);
}
[= ESAC =] 
```

有用！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:19:13.300

我建议将解析后的数据作为键值对存储在[哈希表中](http://en.wikipedia.org/wiki/Hash_table)，以便您查找实体。

当然，对于请求的属性不可用的情况（例如，url 属性丢失），您必须采取措施。根据您在哈希表中存储信息的方式，还存在类型安全问题。但也许值得将键值对存储为字符串，并在需要时将它们转换为数字或其他内容。

# http - 在 MVC4 上上传复杂模型中的多个文件

> ID：14565346
> 
> 赞同：1
> 
> 时间：2013-01-28T15:29:33.133
> 
> 标签：http, file-upload, razor, asp.net-mvc-4

所以，这是一个一直困扰着我的具有挑战性的问题。

我有一个“复杂”的模型结构：

费用报表

*   费用*

    *   费用档案*

一个 ExpenseReport 包含一个 Expenses 列表，它可能（或可能不）包含一个 ExpenseFile 对象列表。

ExpenseFile 对象包含（以及其他属性）一个**byte[]**来存储文件数据。

我已经设法为此创建了整个视图，它由一个表格结构组成，用户可以在其中向报告添加/删除费用，并且在每个单独的费用行上，用户可以添加/删除费用文件。所有这些都是使用 jquery/ajax 完成的。ExpenseFile EditorTemplate 包含一个

```
<input type="file" name="FileData" id="FileData" /> 
```

所以用户可以选择对应的文件。

模型结构（即 Report、Expense 和 ExpenseFile 对象层次结构）正确绑定，唯一的例外是 ExpenseFiles 的文件数据，它始终为空！

我知道输入文件可以在控制器中通过

```
ControllerBlahBlah(... IEnumerable<HttpPostedFileBase> FileData) 
```

或者我可以实现一个自定义 ModelBinder 来获取这样的文件数据

```
var file = controllerContext.HttpContext.Request.Files["FileData"] 
... 
```

但是有没有办法让默认模型绑定器将每个输入文件绑定到对应的 ExpenseFile？

我问这个是因为如果没有，我可能不得不实现一个自定义活页夹，这会很痛苦，因为我不知道如何弄清楚如何绑定每个活页夹

```
controllerContext.HttpContext.Request.Files["FileData"] 
```

到正确的文件。

任何帮助/想法表示赞赏。

笔记：

*   其他一切都正确绑定，每个嵌套列表项都包含[正确的前缀](http://www.joe-stevens.com/2011/06/06/editing-and-binding-nested-lists-with-asp-net-mvc-2/)等；

*   FileData 是我的 ExpenseFile 模型中 byte[] 属性的名称；

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:38:55.723

刚刚想通了。这是答案，以防有人偶然发现同样的问题：

*   我在我的 ExpenseFile 模型视图上添加了一个 HttpPostedFileBase 属性；
*   我为 HttpPostedFileBase 创建[了自己的 EditFor](https://stackoverflow.com/questions/9682061/html-editorfor-image)；
*   然后，在我的 ExpenseFile 视图中，我使用

    @Html.EditorFor(model => model.postedFile)

代替

```
<input type="file" name="FileData" id="FileData" /> 
```

现在文件数据正确绑定，我所要做的就是将 HttpPostedFileBase 的数据转换为服务器端（控制器）上的 byte[]。

# java - Google App Engine Eclipse 插件登录：我出现白屏

> ID：14565348
> 
> 赞同：3
> 
> 时间：2013-01-28T15:29:44.850
> 
> 标签：java, eclipse, google-app-engine

我尝试使用 Gooel App Engine 插件登录 Eclipse，但输入登录信息后出现白屏。

（我试图用Chrome在Eclipse中更改为默认浏览器来解决问题，但使用的浏览器仍然是ie。）

我有很多项目（GAE），我按项目使用不同的登录信息

![在此处输入图像描述](../Images/aade03e96105e93b78bd8cf069da6b66.png)

此外，如果您在此白页上右键单击“查看源代码”，您可以看到，有来自 Google 的正确答案页面。但是，此页面无法在浏览器窗口中正确显示。所以，没有办法点击页面的按钮来完成登录。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-06T20:32:29.930

这不是真正的解决方案，而是解决方法。与用于 https 连接和/或证书管理的 eclipse 内部浏览器的错误行为有关的问题。eclipse for win64 会发生这种情况。为了避免这个问题，我使用 eclipse for win32 代替。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-10-06T20:19:29.383

我遇到了这个问题，不得不求助于使用命令提示符来部署我的项目。

从命令提示符（您可以使用 Eclipse 中可用的终端）导航到您的项目目标并输入以下命令：

```
"C:\Program Files\appengine-java-sdk-1.7.5\bin\appcfg.cmd" update war 
```

如果这是您第一次这样做，您应该会收到要求您提供电子邮件和密码的提示。

请注意，如果您使用 Maven 创建应用程序，您将改为调用 Maven 命令：

```
mvn appengine:update 
```

# .htaccess - 为什么 htaccess RewriteRule 重定向站点？

> ID：14565351
> 
> 赞同：0
> 
> 时间：2013-01-28T15:29:51.950
> 
> 标签：.htaccess

我有以下 htaccess 文件

```
redirect 301 /index.php/medical-services/botox.html http://www.mysite.ca/medical-services/toronto-botox.php
redirect 301 /index.php/about-us.html http://www.mysite.ca/about-us/
redirect 301 /index.php/contact-us.html http://www.mysite.ca/contact-us.php
redirect 301 /index.php/contact/name.html http://www.mysite.ca/contact-us.php
redirect 301 /index.php/blog/ http://www.mysite.ca/blog/
#lots of 301 redirects
redirect 301 /glisodin-skin-nutrients.php http://www.mysite.ca/

<IfModule mod_rewrite.c>
Options -Indexes
Options +FollowSymlinks

RewriteEngine On

RewriteBase /

RewriteCond %{HTTP_HOST} !^www\.mysite\.ca$
RewriteRule (.*) http://www.mysite.ca/$1 [R=301,L]

RewriteRule ^mobile$ /newsite2/mobile/ [L]

RewriteRule    ^$    newsite2/    [L]
RewriteRule    (.*) newsite2/$1    [L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !contests
RewriteCond %{REQUEST_FILENAME} !administrator
RewriteCond %{REQUEST_FILENAME} !shop
RewriteRule ^newsite2/(.*)$ ./newsite2/$1 [QSA,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !contests
RewriteCond %{REQUEST_FILENAME} !administrator
RewriteCond %{REQUEST_FILENAME} !shop
RewriteRule ^(.*)$ /newsite2/$1 [QSA,L]  
</IfModule> 
```

但是当我尝试输入时，让我们说：

[http://skinvitality.ca/freebotox/](http://skinvitality.ca/freebotox/) 它重定向到 [http://skinvitality.ca/newsite2/freebotox/](http://skinvitality.ca/newsite2/freebotox/)

我已经尝试了一切，但没有任何效果。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:40:20.227

这些行：

```
RewriteRule    (.*) newsite2/$1    [L]
RewriteRule ^(.*)$ /newsite2/$1 [QSA,L] 
```

重写

```
RewriteRule (.*) http://www.skinvitality.ca/$1 [R=301,L] 
```

# c# - 将时间差与固定时间段进行比较

> ID：14565352
> 
> 赞同：2
> 
> 时间：2013-01-28T15:29:52.137
> 
> 标签：c#

我想将时差与两年长进行比较。

```
 public const long TwoYears = 2 * 365 * 24 * 3600;
        string currTime = DateTime.Now.ToString("yyyyMMddHHmmss");
        string recordTime = fileName.Split('_','-').Last();// format is 'yyyyMMddHHmmss'
        long diff = (long.Parse(currTime)) - (long.Parse(recordTime));
        if (diff < TwoYears)
            Console.WriteLine(fileName); 
```

我做对了吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T15:31:47.063

只需将`-2`年份添加到日期并与任何内容进行比较

```
if (dateTimeVar > DateTime.Now.AddYears(-2))
{
    // code...
} 
```

如果您的日期来自字符串，请使用[DateTime.ParseExact](http://msdn.microsoft.com/en-us/library/w2sa9yss.aspx)并指定`format`要转换的日期。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:40:49.907

不，因为您将日期表示为有序数字。更合适的解决方案是：

```
String recordTime = fileName.Split('_','-').Last();// format is 'yyyyMMddHHmmss'
DateTime recordDateTime = DateTime.ParseExact( recordTime , "yyyyMMddHHmmss", CultureInfo.InvariantCulture );

if ( recordDateTime.AddYears(2) < DateTime.Now )
{
    Console.WriteLine(fileName);
} 
```

编辑：从下面的评论中可以看出，最好添加年份并比较 DateTimes。

# python - Python：右移>> 26

> ID：14565357
> 
> 赞同：2
> 
> 时间：2013-01-28T15:30:03.757
> 
> 标签：python, python-3.x, binary

```
0010 1101 1011 0100 0111 1100 1000 0101 
```

我想右移 26，但失败了

```
print(bin(00101101101101000111110010000101) >> 26) 
```

并且调试错误是 SyntaxError: invalid token

右移 26 应该是返回 1011

这个怎么样？

```
0010 1101 1011 0100 0111 1100 1000 0101 
```

移位 0010 1101 1011 0100 0111 1100 1000 0101>>22 返回 10110110 并用 00001111 返回 0110 转换为十进制 6 ？

使用 00001111？如何使用 00001111 执行此操作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:33:53.697

你的使用`bin()`是错误的。[该文件指出](http://docs.python.org/2/library/functions.html#bin)：

> 将整数转换为二进制字符串。

既然那不是你所追求的，那是错误的。您正在尝试右移一个字符串，这是不可能的。

你的意思是：

```
print(0b00101101101101000111110010000101 >> 26) 
```

或者，如果您希望将答案作为二进制字符串：

```
print(bin(0b00101101101101000111110010000101 >> 26)) 
```

在这里，前缀`0b`在 Python 中用于二进制数字文字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:32:15.323

`bin`返回一个字符串，它是字符串的二进制表示。

```
print (0b00101101101101000111110010000101 >> 26) 
```

我认为应该工作。

您看到的语法错误是因为`0`在 python3.x 中不能以整数文字开头——在 python2.x 中，这意味着您想要声明八进制文字。

例如（python2.x）：

```
>>> print 025
21 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T15:34:43.383

*   给你的二进制数加上前缀，`0b`以向 Python 表明它是一个二进制数。
*   首先右移，然后将其转换为二进制。

试试这个：

```
print(bin(0b00101101101101000111110010000101 >> 26)) 
```

编辑：输出：

```
0b1011 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T15:34:57.953

阅读[Python bin()](http://docs.python.org/2/library/functions.html#bin)的文档，看起来您应该传递 bin() 一个十进制整数，因此它将 00101101101101000111110010000101 解释为十进制。

# mysql - 如何使用 NAME 进行用户搜索？

> ID：14565360
> 
> 赞同：-1
> 
> 时间：2013-01-28T15:30:13.673
> 
> 标签：mysql

我正在根据用户的名字和用户的姓氏进行用户搜索。所以我想要一些应该指导我的搜索案例，让我让搜索引擎搜索并给出有效的结果......！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:48:26.250

我不明白你的意思，但我猜你正在寻找这样的东西......

```
 SELECT * FROM TABLE WHERE First_Name LIKE '%John%' OR Last_Name LIKE '%Doe%' 
```

# jquery - jquery .getscript() 脚本完全加载并执行时的回调

> ID：14565365
> 
> 赞同：46
> 
> 时间：2013-01-28T15:30:22.487
> 
> 标签：jquery, ajax

从 jquery api 页面 [http://api.jquery.com/jQuery.getScript/](http://api.jquery.com/jQuery.getScript/)

> ## 成功回调
> 
> 一旦脚本被加载但不一定执行，回调就会被触发。
> 
> ```
> $.getScript("test.js", function() {
>     foo();
> }); 
> ```

如果`foo()`函数依赖于test.js，则无法成功执行。

我在 google map api 中看到了类似的东西，但在这种情况下，您可以在 ajax 脚本 url 中指定回调函数。但总的来说，有没有一种明显的方法可以等到 ajax 脚本执行后再进行回调？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2016-09-16T08:15:54.477

我知道这是一个老问题，但我认为包含“完成”的两个答案都没有被他们的所有者解释，它们实际上是最好的答案。

投票最多的答案要求使用“async:false”，这反过来会创建一个不是最佳的同步调用。另一方面，自 1.5 版（可能更早？）以来，jquery 引入了 promise 和 promise 处理程序，在这种情况下，我们尝试异步加载脚本并等待它完成运行。

定义的回调[getScript 文档](https://api.jquery.com/jquery.getscript/)

> 一旦脚本被加载但不一定执行，回调就会被触发。

相反，您需要寻找的是承诺的行为方式。在这种情况下，当您正在寻找一个异步加载的脚本时，您可以使用“then”或“done”看看[这个线程](https://stackoverflow.com/questions/5436327/jquery-deferreds-and-promises-then-vs-done)，它很好地解释了差异。

只有当一个承诺被解决时才会调用基本完成。在我们的例子中，当脚本成功加载并完成运行时。所以基本上在你的代码中这意味着：

```
$.getScript("test.js", function() {
    foo();
}); 
```

应改为：

```
$.getScript("test.js").done(function(script, textStatus) {
    console.log("finished loading and running test.js. with a status of" + textStatus);
}); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-11-22T03:32:10.260

# `$.getScript(...)`+`setInterval(...)`为我工作：

```
$.getScript('https://www.google.com/recaptcha/api.js')
  .done(function() {
    var setIntervalID = setInterval(function() {
      if (window.grecaptcha) {
        clearInterval(setIntervalID);
        console.log(window.grecaptcha);
        letsWorkWithWindowDotGreptcha();
      };
    }, 300);
  });

  function letsWorkWithWindowDotGreptcha() {
    // window.greptcha is available here....
  } 
```

一旦`variable`定义了我们正在寻找的（在我的情况下`window.grecaptcha`，我可以调用 a `closure function`which can be `abstracted out`。

祝你好运...

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-07-06T09:59:37.117

```
$.getScript( "ajaxFile/myjs.js" )
.done(function( s, Status ) {
    console.warn( Status );
})
.fail(function( jqxhr, settings, exception ) {
    console.warn( "Something went wrong"+exception );
}); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2013-01-28T15:37:45.770

你可以使用ajax

```
jQuery.ajax({
        async:false,
        type:'GET',
        url:script,
        data:null,
        success:callback,
        dataType:'script'
    }); 
```

异步是假的，因为你想加载和执行脚本，在成功回调之后你可以调用你的函数 foo()

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-08-18T17:32:44.653

我今天面临同样的问题，并提出了一个基于承诺和间隔计时器的解决方案：

```
$.getScript("test.js", function() {
    var $def = $.Deferred();
    if (typeof foo === 'undefined') { // "foo" isn't available
        var attempts = 0;
        // create an interval
        // that will check each 100ms if the "foo" function
        // was loaded
        var interval = setInterval(function() {
            if (typeof foo !== 'undefined') { // loaded
                window.clearInterval(interval);
                $def.resolve();
            }
            // after X unsuccessfull attempts, abort the operation
            else if (attempts >= 100) {
                window.clearInterval(interval);
                $def.reject('Something went wrong');
            }

            attempts++;
        }, 100);
    }
    else { // "foo" is available
        $def.resolve();
    }
    return $def.promise();
}).then(function() {
    // at this point "foo()" is definitely available.
}).fail(function() {
    // deal with the failure
}); 
```

想法是您加载一个给定的脚本，该脚本将公开一些`foo`仍然不存在的变量（您的问题示例中的函数），因此在`getScript`您加载脚本后检查该变量是否存在，如果不存在，则创建一个间隔将不断检查变量是否可用，并且只有当满足此条件时，您才会解决承诺。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2020-08-06T06:42:38.483

如前所述`then`，当脚本加载但未执行`done`时`$.getScript`回调触发可能是早期......间隔可能是解决这个问题的一种方式，但在我看来它似乎不是很优雅。

我的解决方案是在异步加载的脚本中触发一个事件，例如：

```
jQuery( document ).trigger( 'loadedeventsjs' ); 
```

在我的主脚本中，我可以绑定到该事件，例如：

```
jQuery( document ).on( 'loadedeventsjs', function() {

    jQuery( '#mainmenu_wrapper' ).on( 'swiperight', menuout );

} ); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-07-13T13:32:18.913

恐怕该解决方案需要轮询依赖项。或者，脚本需要包装在像 AMD 这样的预定义回调中。

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2014-04-08T07:42:20.173

$getScript 像这样使用

```
$.getScript( "js/jquery.raty.min.js" )
    .done(function( script, textStatus ) {
          console.log( textStatus );
         }
          }); 
```

这对我来说很好用

# r - 如何在 R 的格子条形图中改变非分组因子的颜色？

> ID：14565366
> 
> 赞同：2
> 
> 时间：2013-01-28T15:30:24.470
> 
> 标签：r, plot, lattice

我正在尝试使用格子图形在条形图中绘制数据。我想按一个因素对条形图进行排序，并按另一个因素对条形图进行分组（即，按第一个因素定位，按第二个因素定位对比）。但是，我想按第一个（即位置）因素为条形着色。

在以下示例中，绘图以成对的红色和蓝色条形呈现。相反，我想要两个相邻的红色条、两个相邻的蓝色条和两个相邻的绿色条。

```
library(lattice)

data = runif( 6 )
facA = rep( c( "a", "b", "c" ), each = 2 )
facB = rep( c( "1", "2" ), 3 )
df = data.frame( "FactorA" = facA, "FactorB" = facB, "Data" = data )
df$FactorA = = as.factor( FactorA )
df$FactorB = = as.factor( FactorB )
test_colors = c( "red", "blue", "green" )
test_plot = barchart(FactorA ~ Data, groups = FactorB, data = df, 
                     horizontal = TRUE, col = test_colors, origin = 0 )
plot( test_plot ) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:53:46.923

这并不完美，但我认为它可以解决问题（如果我理解正确你的问题）。

```
barchart( FactorB ~ Data | FactorA, data = df, groups=FactorA, 
          horizontal = TRUE, col = test_colors, origin = 0,  layout=c(1,3)) 
```

`Factor B ~ Data | FactorA`意味着它将您的数据划分为`FactorA`与这些组中的每一个相对应的面板中，并根据`FactorB`. 颜色遵循已定义为`groups`.

![在此处输入图像描述](../Images/5fab82036b3d1c57217cdec648c74982.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:35:37.263

如果你想用 'ggplot2' 来做这件事，你可以这样写：

```
ggplot(df, aes(x=FactorA, y=data, group=FactorB, fill=FactorA)) +
geom_bar(stat="identity", position="dodge") + 
coord_flip() 
```

从那里开始，它只是适合您口味的化妆品剪裁，包括选择填充颜色。

# java - Eclipse 和 Team City 插件

> ID：14565370
> 
> 赞同：1
> 
> 时间：2013-01-28T15:30:32.353
> 
> 标签：java, eclipse, ide, teamcity, integration

我为 Java 开发人员使用 Eclipse，为我的存储库使用 Team City 进行持续集成和 tortoiseSVN。我已经安装了所有必要的插件，但是每当我从 Eclipse 中选择**TeamCity->Remote run**时，我都会收到以下消息：

**没有找到适合远程运行的修改文件。**

我的配置中可能缺少什么想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:20:40.490

您是否检查过您是否正确配置了构建路径和指向 TortoiseSVN 的服务器

在 > Administration > Project > Create Build Configuration > VCS> New VCS Root>

使用适当的用户名和密码后确保从 CI 服务器连接

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T16:16:28.413

我的错...我正在执行*commit 和 push*。为了使**远程运行**选项起作用，您首先需要在本地存储库中提交，然后**远程运行**并在测试满意时*推送。*

# ios - 根据给定的大小创建一个空字符串（由空格组成）

> ID：14565376
> 
> 赞同：1
> 
> 时间：2013-01-28T15:30:36.387
> 
> 标签：ios, nsstring

在 Iphone 应用程序中，有没有办法在标签文本中添加空格以创建空白空间（由大小指定）。这背后的想法是我想将第二个字符串附加到标签上，但以固定大小分隔。

像这样的东西：

```
//first we append a string containing only spaces to create a width of 100
label1.text = [label1.text stringByAppendingString:[self getSpaceStringByWidth:100 font:label1.font];
//then we append the second string
label1.text = [label1.text stringByAppendingString:@"something else to append"];

-(NSString*)getSpaceStringByWidth:(CGFloat)width andFont:(UIFont*)font
{
    //This method takes the width needed and the font used and returns a string containing only empty spaces that will create an empty space before appending the second string
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:44:54.877

你需要像这样得到它的当前大小..

```
NSDictionary *attr = [NSDictionary dictionaryWithObject:[label1 font]
                                                 forKey:NSFontAttributeName];
NSSize stringSize = [label1.text sizeWithAttributes:attr];
NSSize sizeOfSpace = [@" " sizeWithAttributes:attr]; 
```

然后处理你想要的大小，像其他人描述的那样循环并添加空间，直到你满意为止。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:35:18.077

也许这有帮助：

```
NSString *concatenateString = [[myString1 stringByAppendingString:@" "] stringByAppendingString:myString2]; 
```

编辑（看到@AKV 回答后）

```
for(int i=0; i<number ;i++){
   string=[string stringByAppendingString:@" "];
}

NSString *concatenateString = [[myString1 stringByAppendingString:string] stringByAppendingString:myString2]; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:34:16.907

基本的呢

```
for(int i=0; i<number ;i++){
   string=[string stringByAppendingString:@" "];
} 
```

# php - 如何使用Javascript从字段中发布数据

> ID：14565377
> 
> 赞同：0
> 
> 时间：2013-01-28T15:30:39.907
> 
> 标签：php, javascript, jquery, ajax, jquery-post

您好我正在尝试制作一个页面，该页面将使用`$.post`Javascript 中的方法在按下空格键时将数据从实时文本字段发布到另一个脚本。我希望通过另一个名为*save.php的文件发布名为**index.php*的页面中的数据。我希望textfield 的值成为 post 变量的值。我该怎么做？以下是我到目前为止的代码...*`txt_a``text`*

 *```
<html>   
<head>
    <script type="text/javascript">
        function event_a() {
            if (event.keyCode == 13) { 
               $(document).ready(function(){
                   txt=$document.getElementsByName('txt_a')[0].value;
                   $.post("save.php",{text:txt});
               };
            };
        }
    </script>
</head>
<body>
    <form method="POST" name="" action="">
        <input name="txt_a" type="text" id="txt_a" onkeypress="event_a()"/>
    </form>
</body>
</html> 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:37:06.163

这应该让你开始：

```
$(function(){

    $('#txt_a').keyup(function(e){

        if(e.which === 13) {

            $.post('save.php',{text: $(this).val()}, function(data){
                //do something with the response
            });
        }

    });

}); 
```

在**save.php**中：

```
$text = isset($_POST['text']) ? $_POST['text'] : null; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:36:35.687

您的 javascript 函数应该看起来更像这样：

```
function event_a(event) { // event needs to be defined as arg to use.
  if (event.keyCode == 13) { // ready is used to trigger code when the page is ready, not needed here
    var txt=$('txt_a').val(); // assuming you are using jQuery, you can access the value like this
    $.post("save.php",{text:txt});
  }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:42:49.120

为什么要将变量从一个文件传递到另一个文件？使用 $_SESSION 在多个页面中保存和检索设置的数据/变量。*

# android - 从活动中获取视图片段？

> ID：14565379
> 
> 赞同：1
> 
> 时间：2013-01-28T15:30:52.837
> 
> 标签：android, android-layout, android-fragments

我正在尝试获取在 onCreateView () (Fragment) 中创建的视图以通过 findviewbyId 修改组件但始终返回 null

例如

这是我片段中的 onCreateView

```
public View onCreateView(final LayoutInflater inflater,
            final ViewGroup container, Bundle savedInstanceState) {

        View view = inflater.inflate(R.layout.myLayout, container, false);

        return view;
    } 
```

并从我的活动调用片段中添加例如。

```
FragmentTransaction ft = getFragmentManager().beginTransaction();

                Fragment newFragment = new myFragment();

                ft.replace(main_container.getId(), newFragment).commit();

/*and i need modify the text button with setText() of View create in my fragment 
eg*/
View  myViewFragment = newFragment.getView();

Button b = (Button) myViewFragment.findViewById(R.id.mybuttoninfragment);

b.setText("Hello World"); 
```

但总是返回null，我该如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-08T22:28:19.520

这是因为 ft.replace(main_container.getId(), newFragment).commit(); 只需*请求启动*片段事务，但它只会在下一次主线程有空闲 CPU 周期时才会真正完成（因此调用 onCreateView() ）。

所以，你必须等待调用

```
View  myViewFragment = newFragment.getView(); 
```

等到以后（例如在 onClick() 方法中）

# ninject - 在 Ninject 2+ 中禁用非显式绑定类的隐式绑定/注入

> ID：14565380
> 
> 赞同：9
> 
> 时间：2013-01-28T15:30:54.780
> 
> 标签：ninject, ninject-3

如果您从 NInject 请求未绑定的对象，则默认行为是（如果有合适的构造函数可用）似乎是创建适当对象的实例。

我想禁用此行为（我遇到了一个难以调试的问题，因为某些东西是自动绑定的，而不是在模块中获取我的自定义绑定）。 [这个问题](https://stackoverflow.com/questions/3846839/does-ninject-automatically-inject-non-bound-classes/3847976#3847976)暗示这是可能的，但我无法从 NInject wiki 中找到答案。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T16:11:03.083

`SelfBindingResolver`创建后从内核组件中删除：

```
kernel.Components.RemoveAll<IMissingBindingResolver>();
kernel.Components.Add<IMissingBindingResolver, DefaultValueBindingResolver>(); 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2014-04-16T20:32:43.140

以下是删除 的更好、更直接的方法`SelfBindingResolver`，而不假设`DefaultValueBindingResolver`是唯一的其他`IMissingBindingResolver`组件：

```
kernel.Components.Remove<IMissingBindingResolver, SelfBindingResolver>(); 
```

该`Remove<T, TImplementation>()`方法可能仅在最新版本的 Ninject 中添加，但这对我使用 Ninject 3.2.2.0 有效。

# url-rewriting - Nginx 重写域和 URL

> ID：14565382
> 
> 赞同：4
> 
> 时间：2013-01-28T15:31:04.403
> 
> 标签：url-rewriting, nginx, rewrite

我正在使用多个服务器名称配置 nginx，并尝试设置以下重写规则

```
redirect / on old.domain.com to new.domain.com/specific_page.php
redirect old.domain.com/$1 to new.domain.com/$1 
```

在我的“服务器”配置中，我已经有第一个重写条件工作，但我找不到编写第二个的方法。

```
if ($host = 'old.domain.com' ) {
    rewrite  ^/  http://new.domain.com/my-specific/link/list/info.php  permanent;
    rewrite  ^/(.*)$  http://old.domain.com/$request_uri?  permanent;
} 
```

任何想法如何轻松处理这种情况？（我意识到这可能是一个不寻常的设置。）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:30:00.327

实际上我设法解决了我的问题：

```
if ($host = 'old.domain.com' ) {
    rewrite  ^/$  http://new.domain.com/my-specific/link/list/info  permanent;
    rewrite  ^(.*)$  http://old.domain.com$request_uri?  permanent;
} 
```

第一个重写规则 ^/$ 仅匹配[http://old.domain.com/](http://old.domain.com/)并将其重写为请求的 URL
第二个重写规则 ^(.*)$ 匹配[http://old.domain.com后面的任何内容/](http://old.domain.com/)并仅重写域。

# ruby-on-rails - 多态模型用户关联

> ID：14565383
> 
> 赞同：0
> 
> 时间：2013-01-28T15:31:07.447
> 
> 标签：ruby-on-rails

导轨 3.2。我正在使用以下代码关联`user_id`到记录：

```
 # review.rb
  class Review < ActiveRecord::Base
    belongs_to :reviewable, :polymorphic => true, :counter_cache => true
  end

  # reviews_controller.rb
  def create
    @review = @reviewable.reviews.new(params[:review])
    @review.user_id = current_user.id
    if @review.save
      flash[:success] = 'Thanks for adding your review.'
      redirect_to @reviewable
    else
      flash[:error] = 'Error adding review,  please try again.'
      redirect_to @reviewable
    end
  end 
```

我想找到一种使用它的方法，但它一直说`current_user`未定义，但我可以找到`current_user`对象：

```
 def create
    @review = @reviewable.current_user.reviews.create(params[:review]
    if @review.save
      flash[:success] = 'Thanks for adding your review.'
      redirect_to @reviewable
    else
      flash[:error] = 'Error adding review,  please try again.'
      redirect_to @reviewable
    end
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:20:27.387

如果您可以将代码发布到 @reviewable 对象，它可能有助于给出更具体的答案。但是，如果你想要一个班轮，你可以这样做：

```
@review = @reviewable.reviews.build(params[:review].merge({:user_id => current_user.id}) 
```

但就个人而言，我认为您的原件看起来更好，因为它更容易阅读。

作为附加说明，您的第二个示例还调用了创建和保存。您不需要同时调用两者，因为 create 在接受参数散列时保存对象。如果您想初始化一个对象，以某种方式对其进行修改，然后稍后保存，则保存非常好用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:18:14.720

我认为这不起作用的原因是因为`current_user`是一种未在可审查中定义的方法。

可评论可能属于用户，在这种情况下`@reviewable.user.reviews.create...`可能是有效的。

# c# - 如何在winforms的工具箱中创建透明标签

> ID：14565386
> 
> 赞同：0
> 
> 时间：2013-01-28T15:31:17.940
> 
> 标签：c#, winforms

我有一个 `System.Windows.Forms.ToolStrip`包含一个`Label`.

有一个特殊的`ToolStrip`花哨背景。但标签只是灰色的。 ![工具栏](../Images/47f074e5f2ab55b5ab29deab210c3e56.png)

不能使用透明度，因为它的父级`ToolStrip`是一个表单。也无法更改父级，因为其中的控件集合`ToolStrip`是只读的。

是否可以创建一个`Label`透明且有`ToolStrip`父级的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:52:40.807

如果您只是删除分配的背景颜色，`ToolStripLabel`那么它应该继承其父级的背景`ToolStrip`。我使用自`ToolStripRenderer`定义为工具条绘制自定义背景，并且我的标签不需要任何特殊处理即可继承父级的背景。只要确保您没有尝试分配背景颜色。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:36:28.063

试一试。

将标签的背景色设置为 Color.Transparent。然后，您必须将标签直接添加到您希望标签在其上显示为透明的控件的控件集合中。

# struts2 - struts2 s：选择值ognl表达式

> ID：14565387
> 
> 赞同：2
> 
> 时间：2013-01-28T15:31:18.250
> 
> 标签：struts2, ognl

[`s:select`](http://struts.apache.org/release/2.3.x/docs/select.html)在我见过的标签的 Struts2 教程中：

```
<s:select label="Pets"
       name="petIds"
       list="petDao.pets"
       listKey="id"
       listValue="name"
       multiple="true"
       size="3"
       required="true"
       value="%{petDao.pets.{id}}"
/>                          ^  ^ 
```

我的问题：为什么`value="%{petDao.pets.{id}}"`？为什么不简单`value="%{petDao.pets.id}"`呢？那些尾随花括号是什么意思？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T10:28:27.430

这是一个[OGNL 列表投影](http://commons.apache.org/ognl/language-guide.html#Projecting_Across_Collections)，用于从 中获取所有`id`值作为列表`petDao.pets`，这意味着其中的所有值都`<s:select>`将被预先选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:50:07.397

没有必要；我怀疑这是标签源文件中错误的结果。

它可以与它一起使用，但不是必需的，它将无法通过 IDE 验证（如果 IDE 支持 S2 和/或 OGNL，例如 IntelliJ），并且我已经做了更新说明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:43:47.640

主要原因是因为 %{} 语法用于强制 OGNL 评估，否则 Struts 会将值视为字符串文字。

例如，

`<s:property value="name" />`

将在值堆栈中查找名称属性，即通过调用 getName() 检索到的值。

如果您想强制它使用文字值“name”，您将需要使用 %{} 语法 -

`<s:property value="%{'name'}" />`

资料来源： http: [//www.coderanch.com/t/420711/Struts/Struts](http://www.coderanch.com/t/420711/Struts/Struts)

# javascript - 为什么我的“其他”不起作用？

> ID：14565390
> 
> 赞同：1
> 
> 时间：2013-01-28T15:31:25.870
> 
> 标签：javascript, jquery

> **可能重复：**
> [如果 id 不存在，为什么 $('#id') 返回 true？](https://stackoverflow.com/questions/2076988/why-does-id-return-true-if-id-doesnt-exist)

我有一个非常简单的js函数：

```
function refresh(ltr) {
    if (board.find('p:contains("' + ltr + '")')) {
        board.find('p:contains("' + ltr + '")').show();
    } else {
        alert('Hello.');  
    }
} 
```

显然我将一个字符串传递给 ltr，如果它包含该字符串，它可以正常工作，但如果不是，它不会触发警报......

你知道为什么吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-28T15:32:58.863

因为`.find`返回一个 jQuery 对象，它总是计算为`true`

尝试一个布尔表达式：

```
if( board.find('p:contains("' + ltr + '")').length > 0 ) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T15:33:14.610

`board.find()`将始终返回一个 jQuery 集合，该集合的评估结果为真。你需要：

```
board.find(...).length 
```

# sql - SQL 多 int 查询作为参数

> ID：14565391
> 
> 赞同：1
> 
> 时间：2013-01-28T15:31:27.727
> 
> 标签：sql, list, stored-procedures

**代码**

```
Create Table TestTable(
   prop1 int, 
   prop2 int
)

insert into TestTable values (1,5)
insert into TestTable values (2,3)
insert into TestTable values (3,5)
insert into TestTable values (4,3)
insert into TestTable values (5,5) 
```

**情况**

我创建了这个小测试只是为了用作示例，但它与我想要的相似。

情况是我有一个这样的存储过程：

```
create procedure TestProc
   @TestParamater <type> 
as
begin
     select * from TestTable where prop1 in @TestParameter 
```

**问题**

参数应该是什么类型以支持以下查询：

```
exec TestProc (select prop1 from TestTable where prop2 = 5) -- resulting in 3 prop1's 
```

如果不使用临时表或用户定义的表，这可能吗？

如果没有，我该如何使用它（使用临时表）但仍在查询中......

如：

```
select * 
from TestTable 
where prop1 in (insert and select everything that's in the temptable) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:41:32.810

您可以在存储过程中使用*动态 SQL ，*

```
Create Procedure TestProc
    @sqlQuery NVarchar(4000)   
AS
    Declare @inQuery AS NVarchar(4000)
    SET @inQuery = 'SELECT * FROM TestTable where prop1 in (' + @sqlQuery + ')' 
    EXECUTE(@inQuery)
GO 
```

用法，

```
EXEC TestProc ('select prop1 from TestTable where prop2=5') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:35:28.047

为什么不将 prop2 作为 int 传递给您的存储过程？

就像是：

```
SELECT * 
FROM TestTable 
WHERE prop1 IN (SELECT prop1 FROM TestTable WHERE prop2=5) 
```

或者实际上：

```
SELECT * 
FROM TestTable 
WHERE prop1 IN (SELECT prop1 FROM TestTable WHERE prop2=@prop2) 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!2/86ba2/1)。

祝你好运。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:35:45.290

除非您使用动态 SQL，否则您无法使用单一类型做您想做的事。在这种情况下，您可以将列表作为逗号分隔的列表传入。

您*可以*将列表作为字符串放入，因此生成的查询将使用以下内容：

```
where ','+@TestParameter+',' like '%,'+cast(prop1 as varchar(255))+',%' 
```

这将产生与`in`. 您必须将这些值连接在一起才能生成字符串参数。

第二个查询，我就是不明白。您是什么意思“插入并选择临时表中的所有内容”？只需先加载临时表，然后在查询中使用它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T15:38:08.497

你不能把整个东西放在你的 sp 中并提供 prop2 而不是 prop1 吗？

# ruby-on-rails - Rails - 事务和回滚

> ID：14565392
> 
> 赞同：0
> 
> 时间：2013-01-28T15:31:32.860
> 
> 标签：ruby-on-rails, ruby, transactions, rollback

我试图让事务正常工作，因为我需要保存@event，以便我可以将给定的@event.id 分配给它的依赖项。

我提出了 ActiveRecord::Rollback，但它什么也没做。我知道它也很成功，因为它显示了之前输入的 :notice。我在网上发现的另一个问题是没有引发异常。我开始使用保存！抛出异常。这给了我一个异常 ActiveRecord::RecordInvalid 并且当我抢救异常时它不会回滚。我感谢任何帮助或想法谢谢。

注意：如果@EVENT 已经存在，则此事务的后半部分是要做什么。我还没有调试那部分，因为在我可以让这个事务正常工作之前，这个事件永远不会存在

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-30T14:33:47.410

发现是 MySQL 服务器正在运行一个不支持事务的 MyISAM 引擎。

# angularjs - 使用 $routeParams 时 angular.js 模块化控制器“未定义”

> ID：14565394
> 
> 赞同：7
> 
> 时间：2013-01-28T15:31:34.310
> 
> 标签：angularjs

以下在控制台中返回错误“ReferenceError: ThingCtrl is not defined”

```
var myApp = angular.module('myApp', []);

myApp.config(['$routeProvider', function($routeProvider) {
$routeProvider.
    when('/things', {templateUrl: 'partial.html', controller: ThingCtrl}).
    when('/things/:id', {templateUrl: 'detail.html', controller: ThingCtrl}).
otherwise({redirectTo: '/things'});
 }]);

myApp.controller('ThingCtrl', ['$scope', '$routeParams', function($scope, $routeParams) {
$scope.thing = [
    {
        'title':'first thing',
        'first':'one',
        'second': 'two',
        'third': 'three'
    }
];

}]); 
```

但是，当控制器定义为：

```
function ThingCtrl($scope, $routeParams) {
        $scope.thing = [
    {
        'title':'first thing',
        'first':'one',
        'second': 'two',
        'third': 'three'
    }
  ]
}; 
```

为什么它不能使用模块化语法？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T15:40:58.473

我相信问题出在这里：

```
when('/things', {templateUrl: 'partial.html', controller: ThingCtrl}) 
```

这告诉 Angular 指向 ThingCtrl 对象，该对象未定义并导致错误。

尝试将控制器名称用引号括起来，如下所示：

```
when('/things', {templateUrl: 'partial.html', controller: 'ThingCtrl'}) 
```

这应该允许 Angular 正确使用依赖注入。

# type-conversion - 什么被认为是恒定的？

> ID：14565397
> 
> 赞同：0
> 
> 时间：2013-01-28T15:31:37.227
> 
> 标签：type-conversion, constants

视为恒定是什么意思？

我在谷歌搜索过它，但它没有在任何地方提及。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:59:03.850

认为某事就是相信它是这样的。因此，如果某事被认为是恒定的，那么我们就有理由相信它是恒定的——也许是经验证据。但也有可能是我们错了。

物理学家更愿意从理论上解释为什么特定属性是恒定的，而不是仅仅依靠观察。

在编程中，没有这样的不确定性。我们依靠我们的语言编译器和运行时来确保常量就是这样。

# c - 连续扫描流缓冲区中字符串的最佳方法

> ID：14565400
> 
> 赞同：1
> 
> 时间：2013-01-28T15:31:45.793
> 
> 标签：c, callback, stream, buffer

我有这种情况，我的函数连续接收各种长度的数据。数据可以是任何东西。我想找到在此数据中寻找特定字符串的最佳方法。该解决方案将需要以某种方式缓冲以前的数据，但我无法解决这个问题。

这是问题的一个例子：

数据输入 -> [\x00\x00\x01\x23B][][LABLABLABLABLA\x01TO][KEN][BLA\x01]...

如果每个 [...] 代表一个数据块，而 [] 代表一个没有项目的数据块，那么扫描字符串 TOKEN 的最佳方法是什么？

**更新：** 我意识到这个问题有点复杂。[] 不是分隔符。我只是用它们来描述上面例子中块的结构。此外，TOKEN 本身也不是静态字符串。它是可变长度的。我认为逐行读取的最佳方法是，问题是如何将可变长度的流缓冲区读取到行中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:54:58.180

搜索 TOKEN 的最简单方法是：

*   尝试从流中的位置 0 开始匹配“TOKEN”
*   尝试从流中的位置 1 开始匹配“TOKEN”
*   ETC

因此，您需要缓冲的只是流中等于“TOKEN”长度的字节数（5 个字节，或者实际上是 4 个字节）。在每个位置尝试匹配“TOKEN”，这可能需要等到您至少有 5 个字节读入缓冲区。如果匹配失败，倒回到你开始匹配的地方，加一。由于您不会倒带超过您正在搜索的字符串的长度（减一），这就是您真正需要的所有缓冲区。

那么技术问题是，当您从流中连续读取时，如何维护 5 字节的缓冲数据。一种方式是所谓的“循环缓冲区”。另一种方法，尤其是在令牌很小的情况下，是使用更大的缓冲区，并且每当您离结尾太近时，将所需的字节复制到开头并重新开始。

如果您的函数是一个回调，为每个新数据块调用一次，那么您将需要从一次调用到下一次调用保持某种状态，以允许跨越两个数据块的匹配。如果幸运的话，您的回调 API 包含一个“用户数据指针”，您可以将其设置为指向您喜欢的任何包含缓冲区的结构。如果没有，您将需要全局或线程局部变量。

如果流具有高数据速率，那么您可能需要考虑使用 KMP 算法或其他方式加快速度。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:10:43.207

对不起，我投票删除了我之前的答案，因为我对这个问题的理解不正确。我没有仔细阅读并认为 [] 是令牌分隔符。

对于您的问题，我建议您基于一个简单的计数器构建一个小型状态机：对于每个字符，您执行以下伪代码之类的操作：

```
if (received_character == token[pos]) {
    ++pos;
    if (pos >= token_length) {
        token_received = 1;
    }
}
else {
    pos = 0; // Startover
} 
```

这需要最少的处理器周期和最少的内存，因此您不需要缓冲除了刚刚收到的块之外的任何内容。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2015-09-15T07:30:47.190

如果指针包含在内存中，则可以假设您可以分配一个相同大小的对象来读取（例如`char input_array[needle_size];`）。

要开始搜索过程，请使用文件中的字节填充该对象（例如`size_t sz = fread(input_array, 1, input_size, input_file);`）并尝试匹配（例如`if (sz == needle_size && memcmp(input_array, needle, needle_size) == 0) { /* matched */ }`.

如果匹配失败或者您想在成功匹配后继续搜索，请将位置向前推进一个字节（例如`memmove(input_array, input_array + 1, input_size - 1); input_array[input_size - 1] = fgetc(input_file);`，再试一次。

在评论中提出了一个担忧，即这个想法复制了太多字节。虽然我不认为这种担忧有很大的好处（因为没有证据表明有重要价值），但可以通过使用循环数组来避免复制；我们在该边界之前和之后插入新字符`pos % needle_size`并比较区域，就好像它们分别是尾部和头部一样。例如：

```
void find_match(FILE *input_file, char const *needle, size_t needle_size) {
    char input_array[needle_size];
    size_t sz = fread(input_array, 1, needle_size, input_file);
    if (sz != needle_size) {
        // No matches possible
        return;
    }

    setvbuf(input_file, NULL, _IOFBF, BUFSIZ);
    unsigned long long pos = 0;
    for (;;) {
        size_t cursor = pos % needle_size;
        int tail_compare = memcmp(input_array, needle + needle_size - cursor, cursor),
            head_compare = memcmp(input_array + cursor, needle, needle_size - cursor);
        if (head_compare == 0 && tail_compare == 0) {
            printf("Match found at offset %llu\n", pos);
        }
        int c = fgetc(input_file);
        if (c == EOF) {
            break;
        }
        input_array[cursor] = c;
        pos++;
    }
} 
```

# ios - 在应用程序上的许多用户之间共享核心数据

> ID：14565402
> 
> 赞同：1
> 
> 时间：2013-01-28T15:31:47.960
> 
> 标签：ios, objective-c, core-data

我想开发一个 iOS 应用程序作为许多用户的平台。是否可以让我的应用程序的多个用户在同一个核心数据数据库上共享资源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:47:14.987

iCloud 的另一个替代方案（存在整个所有权问题）是拥有一个远程存储数据的在线服务器。

然后，您可以创建一个 Web 服务来将数据从服务器存储和检索到设备上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:42:43.920

是的，这可以`custom url scheme`在 iphone 的帮助下使用 a 来完成`iCloud URL`。但它有一些阴暗面。如果您使用自定义 url 方案，则只有一个应用程序“拥有”数据。另一个应用程序必须从主应用程序导入数据。

另一种方法是`system pasteboard`剪贴板。你可以在上面放东西，然后用一个 URL 启动另一个应用程序，告诉另一个应用程序检查粘贴板。还有系统粘贴板。

有关自定义 URL 方案的更多信息，[请查看此链接](http://mobileorchard.com/lite-to-paid-iphone-application-data-migrations-with-custom-url-handlers/)

# blackberry-10 - 使用 BES 为 BlackBerry 10 应用程序推送设置

> ID：14565403
> 
> 赞同：1
> 
> 时间：2013-01-28T15:31:52.703
> 
> 标签：blackberry-10

如何让我的 BlackBerry 10 应用程序与新发布的 BES 版本兼容？我想支持集中推出应用程序和用户设置。

我已经搜索了网络，但到目前为止还没有找到任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-11T18:12:51.783

我们与黑莓进行了交谈，目前 BES10 无法做到这一点。计划于 2014 年底在 BES12 中实施。

# ios - AVPlayer 无明显原因暂停

> ID：14565405
> 
> 赞同：7
> 
> 时间：2013-01-28T15:31:55.347
> 
> 标签：ios, avplayer

播放视频时，我看到`AVPlayer`似乎与应用活动无关的费率更改通知。

当我的应用收到`UIApplicationDidEnterBackgroundNotification`通知时，我告诉`AVPlayer`to `pause`。逻辑是它应该回到用户离开的同一个地方的前台。如果我在去后台时不调用`pause`，则不会出现问题。

发送给玩家的事件序列是`pause`, `seekToTime:`, `play`。通常，这可以正常工作，但是在应用程序被发送到后台然后返回到前台之后，每次`play`调用都会导致`AVPlayer`. `-[AVPlayer play]`第一个是 1，第二个是紧随其后的 0。只要该播放器实例在使用中，每次调用都会继续这种模式  。

我可以设置断点，`-[AVPlayer pause]`当速率变为 0 时，我看不到它被击中。如果我注释掉`seekToTime:`调用，问题就会消失。如果我使用`seekToTime:completionHandler:`，我也会遇到同样的问题，尽管我的块的`finished`参数是`YES`.

除了“我该如何解决这个问题”之外，我对有关如何检测与/`AVPlayer`无关的利率变化原因的任何细节感兴趣。（似乎永远不会触发断点。）`play``pause``-[AVPlayer setRate:]`

（*一种几乎可行的解决方法是在进入后台时保存播放器位置，让它播放，并在返回前台时固定位置。这也需要对音频电平进行一些操作，这可能是可行的，但另一个问题是并非所有背景通知都表明视图已被遮挡（例如，双击主页按钮）。这会导致我的解决方法在应用程序中断但仍可见时显示令人分心的移动图像。*）

建议？

* * *

（*最后一点额外信息：在我尝试过的所有情况下，如果我从后台返回并且然后进行了一次搜索。我可以做一些事情来降低它的频率，但除了摆脱 AVPlayer 并创建一个新实例之外，我可以做一些事情来消除它。这会导致很长的延迟，但比完全故障要好......我猜测。*

*我有一些证据表明寻道距离会影响结果，这表明错误可能出在底层缓冲机制中。在不知道导致速率变化的原因（播放/暂停除外）的情况下，我看不到进一步调查的方法。*)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-11-25T13:53:59.593

你可能会得到一个`AVPlayerItemPlaybackStalledNotification`.

尝试这个：

```
[[NSNotificationCenter defaultCenter]
  addObserverForName:AVPlayerItemPlaybackStalledNotification
  object:cell.avPlayerItem
  queue:[NSOperationQueue mainQueue]
  usingBlock:^(NSNotification *note) {
    DDLogVerbose(@"%@", @"AVPlayerItemPlaybackStalledNotification");
  }]; 
```

但是，Apple 文档说`Playback will continue once a sufficient amount of media has subsequently been delivered.`（[https://developer.apple.com/library/iOS/documentation/AVFoundation/Reference/AVPlayerItem_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009532-CH1-SW83](https://developer.apple.com/library/iOS/documentation/AVFoundation/Reference/AVPlayerItem_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009532-CH1-SW83)）

这不会发生在我或你身上。

我仍在追查原因。

* * *

**编辑：**

这对我来说是个问题。什么时候`AVPlayerItem.likelyToKeepUp`是，那么它就不会发生。

不知道为什么它没有恢复。

* * *

**编辑：**

在 Apple 文档中，存在无法恢复播放的情况：

> 该属性传达了对可玩性的预测。此预测中考虑的因素包括 I/O 吞吐量和媒体解码性能。当属性playbackBufferFull 指示YES 时，playbackLikelyToKeepUp 可能指示NO。在这种情况下，播放缓冲区已达到容量，但没有统计数据来支持未来可能会继续播放的预测。
> 
> **是否继续播放媒体由您决定。**

# javascript - 通过偏移定位绝对元素

> ID：14565406
> 
> 赞同：1
> 
> 时间：2013-01-28T15:31:56.010
> 
> 标签：javascript, jquery-ui, drop-down-menu, css-position, jquery-hover

我在页面上有一个下拉菜单，并希望菜单从左侧的主要项目下拉。它现在下降到右边。

我在这里有一个[jsfiddle](http://jsfiddle.net/T8hFW/)。

正如你所看到的，它现在下降到右侧并调整页面大小以适应。我希望菜单下降到左侧并保持所有尺寸不变。有没有简单的方法。我知道 jQuery 菜单小部件可以做到这一点，但我还有其他问题。

该按钮位于页面中间的某个位置，因此理想情况下，我希望下拉菜单相对于父级下拉，而不仅仅是 jsfiddle 显示的固定在右侧。希望这可以澄清。

代码：

文档就绪

```
 $(document).ready(function () {
    // Menus
    $('ul.menu').hide();

    $('ul#viewMenu li').hover(function () {
        $(this).children('ul.menu').animate({ opacity: 'show' }, 'slow');
    }, function () {
        $(this).children('ul.menu').animate({ opacity: 'hide' }, 'fast');
    });
    }); 
```

CSS

```
 ul#viewMenu   { overflow: hidden; }

    ul#viewMenu li { float:left; display: block; text-align: left; line-height: 40px; }
    ul#viewMenu li a { line-height: 40px; }

    ul#viewMenu ul.menu { position: absolute; }
    ul#viewMenu ul.menu li { float: none; } 
```

HTML

```
 <div style="display: inline-block; float: right;">
<ul id="viewMenu" style="list-style: none; margin: 0; padding: 0;">
    <li style="display: block; float: left;"> <a class="nav-button view-type-button" style="text-align: center;" href="#"
        title="Change the things.">
                <span>
                    <img src="~/Content/themes/base/images/empty.png" style="height: 48px; width: 49px;" alt="Things" />
                </span>
            </a>

        <ul class="view-menu-item view-menu-bottom-right menu"
        style="width: 170px !important">
            <li> <a class="nav-button" href="#" title="View data.">
                        <span class="thing1-calendar-button"></span>
                        <span>This 1</span>
                    </a>

            </li>
            <li> <a class="nav-button" href="#" title="View data.">
                        <span class="thing2-calendar-button"></span>
                        <span>This 2</span>
                    </a>

            </li>
            <li> <a class="nav-button" href="#" title="View data.">
                        <span class="thing3-calendar-button"></span>
                        <span>This 3</span>
                    </a>

            </li>
        </ul>
    </li>
</ul> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:50:47.740

原来我需要做的就是从 jQuery 偏移值中获取当前绘制的位置。然后设置绝对元素的 CSS 位置。简单...当您知道如何操作时！

```
var position = $('ul#viewMenu ul.menu').offset();

$('ul#viewMenu ul.menu').css({ top: (position.top) + 'px', left: (position.left - 160) + 'px' });

$('ul.menu').hide();

$('ul#viewMenu li').hover(function () {
    $(this).children('ul.menu').animate({ opacity: 'show' }, 'slow');
}, function () {
    $(this).children('ul.menu').animate({ opacity: 'hide' }, 'fast');
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:35:14.567

简单的。只要给这个：

```
ul#viewMenu ul.menu {
    position: absolute;
    right: 0;
} 
```

### 小提琴：http: [//jsfiddle.net/praveenscience/T8hFW/1/](http://jsfiddle.net/praveenscience/T8hFW/1/)

# java - 当'IN list'为空和非空列表时避免查询重复

> ID：14565407
> 
> 赞同：0
> 
> 时间：2013-01-28T15:31:58.500
> 
> 标签：java, sql, jdbc, jdbctemplate

```
 public static final String UPDATE_DOCUMENTS_WITH_TO_DELETE_FLAG_FOR_USER_SQL = "\n" +
          "UPDATE document d \n" +
          "SET d.indexed = :flagValue \n" +
          "WHERE d.user_id = :userId \n" +
          "AND d.to_delete = :toDelete";

  public static final String UPDATE_DOCUMENTS_WITH_TO_DELETE_FLAG_FOR_USER_WITH_EXCEPTIONS_SQL = "\n" +
          "UPDATE document d \n" +
          "SET d.indexed = :flagValue \n" +
          "WHERE d.user_id = :userId \n" +
          "AND d.to_delete = :toDelete \n" +
          "AND d.id NOT IN (:exceptForDocuments)";

  public int markUserDocumentsToDeleteAsUnindexed(String userId,Collection<String> exceptForDocuments) {
    Map<String,Object> params = Maps.newHashMap();
    params.put("flagValue",false);
    params.put("userId",userId);
    params.put("toDelete",1);
    params.put("exceptForDocuments",exceptForDocuments);
    if ( exceptForDocuments.isEmpty() ) {
      return jdbcTemplate.update(UPDATE_DOCUMENTS_WITH_TO_DELETE_FLAG_FOR_USER_SQL, params);
    }
    else {
      return jdbcTemplate.update(UPDATE_DOCUMENTS_WITH_TO_DELETE_FLAG_FOR_USER_WITH_EXCEPTIONS_SQL,params);
    }
  } 
```

有没有办法使用单个查询来执行两个更新？

因为实际使用`UPDATE_DOCUMENTS_WITH_TO_DELETE_FLAG_FOR_USER_WITH_EXCEPTIONS_SQL`查询似乎对 H2 有效，但对 MySQL 无效。有什么想法可以避免这种查询重复吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:37:18.540

问题很可能是因为并非每个驱动程序都可以处理参数化数组/集合。如果您可以完全控制`exceptForDocuments`内容，则可以自己将其序列化为 SQL（通过简单的清理检查），然后在不使用参数的情况下有条件地附加它。

# iphone - didFinishLaunchingWithOptions 中的位置视图

> ID：14565408
> 
> 赞同：0
> 
> 时间：2013-01-28T15:32:11.830
> 
> 标签：iphone, ios, ipad

我正在寻找 4 天，但无法找到任何解决方案。

在我的 iOS 应用程序中，我正在尝试使用推送通知，那里没有问题。我收到通知，并且`didReceiveRemoteNotification`使用以下代码的方法我可以毫无问题地访问详细视图。

```
NSDictionary *aps = [userInfo objectForKey:@"aps"];
NSArray *array = [[aps objectForKey:@"acme"] componentsSeparatedByString:@","];
NSArray *fixtureArray = [[CreateFixture alloc] createFixtureWithArray:array andStyle:@"single"];

UINavigationController *navController = (UINavigationController *)self.window.rootViewController;
UIViewController *root = navController.topViewController;
FPViewController *vc = [[FPViewController alloc] init];
[vc createViewWithArray:fixtureArray];

NSArray *vcs = [NSArray arrayWithObjects:root, vc, nil];
[navController setViewControllers:vcs animated:YES]; 
```

`didFinishLaunchingWithOptions`当我完全关闭应用程序并发送通知时，我的应用程序按预期打开。我在以下`if`语句中使用相同的代码：

```
if (launchOptions != nil)
{
NSDictionary* dictionary = [launchOptions objectForKey:UIApplicationLaunchOptionsRemoteNotificationKey];
    if (dictionary != nil)
    {
        same code above
    }
} 
```

但！！！这次我的详细视图提出了不同的 xy 和宽度高度。所以应用程序变得毫无用处。一些标签和按钮没有看到一些视图更大和一些其他视图。我找不到任何解决方案请帮助！（所有视图、标签、按钮等都是以编程方式创建的）我将 autoresizingMask 用于横向和纵向窗口。我愿意接受任何建议。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:03:58.220

我不知道有什么区别，但是更改推送详细信息视图代码可以解决问题。

这是我的旧代码

```
NSDictionary *aps = [userInfo objectForKey:@"aps"];
NSArray *array = [[aps objectForKey:@"acme"] componentsSeparatedByString:@","];
NSArray *fixtureArray = [[CreateFixture alloc] createFixtureWithArray:array andStyle:@"single"];

UINavigationController *navController = (UINavigationController *)self.window.rootViewController;
UIViewController *root = navController.topViewController; //delete
FPViewController *vc = [[FPViewController alloc] init];
[vc createViewWithArray:fixtureArray];

NSArray *vcs = [NSArray arrayWithObjects:root, vc, nil]; //delete
[navController setViewControllers:vcs animated:YES]; //delete 
```

我删除了根视图控制器和 setViewControllers: 方法。

并添加了 pushViewController: animated: 方法。

```
[navController pushViewController:vc animated:YES]; 
```

希望有同样问题的人不要失去 5 天。祝大家好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:59:17.303

我认为覆盖该`drawRect`方法可以解决这个问题。并在 drawRect 方法中设置框架

# windows - Powershell 排序和过滤

> ID：14565412
> 
> 赞同：1
> 
> 时间：2013-01-28T15:32:28.547
> 
> 标签：windows, sorting, powershell

我有一个包含详细数据的 csv 文件，比如列 A、B、C、D 等。列 A 和 B 是类别，C 是时间戳。

我正在尝试创建一个摘要文件，为 A 和 B 的每个组合显示一行。它应该从原始数据中选择 C ​​是最近日期的行。

以下是我解决问题的尝试。

```
Import-CSV InputData.csv |  `
Sort-Object -property @{Expression="ColumnA";Descending=$false}, `
@{Expression="ColumnB";Descending=$false}, `
@{Expression={[DateTime]::ParseExact($_.ColumnC,"dd-MM-yyyy HH:mm:ss",$null)};Descending=$true} | `
Sort-Object ColumnA, ColumnB -unique `
 | Export-CSV OutputData.csv -NoTypeInformation 
```

首先读取文件，然后按所有 3 列对所有内容进行排序，第二个 Sort-Object 调用应该取每一行的第一行。但是，带有 -unique 开关的 Sort-Object 似乎选择了一个随机行，而不是第一个。因此，对于每个 AB 组合，这确实得到了一行，但不是对应于最近的 C 的那一行。

有什么改进建议吗？数据集非常大，所以逐行浏览文件很尴尬，所以更喜欢powershell解决方案。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:08:28.463

你应该调查一下`Group-By`。我没有创建示例 CSV（你应该提供它:-)）所以我没有测试过这个，但我认为它应该可以工作：

```
Import-CSV InputData.csv |  `
Select-Object -Property *, @{Label="DateTime";Expression={[DateTime]::ParseExact($_.ColumnC,"dd-MM-yyyy HH:mm:ss",$null)}} | `
Group-Object ColumnA, ColumnB | `
% {
    $sum = ($_.Group | Measure-Object -Property ColumnD -Sum).Sum
    $_.Group | Sort-Object -Property "DateTime" -Descending | Select-Object -First 1 -Property *, @{name="SumD";e={ $sum } } -ExcludeProperty DateTime
} | Export-CSV OutputData.csv -NoTypeInformation 
```

这将返回输入的相同列（日期时间从输出中排除）。

# mysql - mysql 通过电子邮件提醒低于指定金额的值

> ID：14565420
> 
> 赞同：0
> 
> 时间：2013-01-28T15:32:55.273
> 
> 标签：mysql, cron, alert

我正在运行一个简单的 mysql 数据库，它包含客户家中温度传感器的值。如果温度低于或高于预设值，我一直在寻找不同的方法来创建电子邮件警报。

有一些方法可以通过一个简单的 php 脚本来完成此操作，以便从我收集的内容中运行 cron 作业，但它们的问题是它需要以这种方式“搁置”一段时间当 cron 运行时，客户不会每五分钟收到一次警报。

同样作为这个项目的未来问题，有没有办法从用户存储在 sql db 中的值创建 cron 作业？这样用户就可以自定义警报？

对不起，如果没有说清楚，如果需要，我会整天坐在电脑旁边回答这方面的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:39:06.183

要解决您的问题，请创建一个`alerts`表来跟踪上次警报的时间。根据您的平台，PHP 可能会[安排 cron 作业](https://stackoverflow.com/questions/4421020/use-php-to-create-edit-and-delete-crontab-jobs)。您可以将用户设置保存在表中并让 PHP 创建/更新/删除 cron 作业。

# twitter-bootstrap - Angular e2e睾丸测试：如何判断可见性？

> ID：14565424
> 
> 赞同：4
> 
> 时间：2013-01-28T15:32:59.390
> 
> 标签：twitter-bootstrap, angularjs, modal-dialog, karma-runner

**问题**

有没有人成功测试过单击按钮时是否显示引导模式？

**细节**

我正在编写一个 Testacular 测试，检查单击按钮时是否显示 Bootstrap 模式。问题是即使我可以看到窗口弹出并且可见，调用也会`css('display')`返回。`'none'`

我想知道 Bootstrap Modal 是否发生了一些奇怪的事情，它复制了一个 html 块，然后用不同的 id 显示它。我当然希望不会！

**代码**

***场景***

```
describe('e2e', function() {

  beforeEach(function() {
    browser().navigateTo('/chessClub/');
  });

  it('should display editor when add member button clicked', function() {
    expect(element('title').text()).toBe("Chess Club");

      expect(element('#myModal').css('display')).toBe('none'); //as expected, it is none
              //click the button to show the modal
      element('#addMemberButton','Add Member Button').click();

              //this 2nd expect still return 'none'
      expect(element('#myModal').css('display')).toBe('block');

  });

}); 
```

***测试输出***

```
Chrome 25.0 e2e should display editor when add member button clicked FAILED
    expect element '#myModal' get css 'display' toBe "block"
    /Users/jgordon/learning/chessClub/web-app/test/e2e/scenarios.js:17:4: expected "block" but was "none" 
```

***html***

```
<!-- Modal -->
<div id="myModal" class="modal hide fade" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true">
    <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
        <h3 id="myModalLabel">{{editorLabel}}</h3>
    </div>
    <div class="modal-body">
        <form>
            <label>
                Name
            </label>
                <input type="text" ng-model="editedMember.name" placeholder="John Doe">
            <label>
                Grade
            </label>
                <input type="text" ng-model="editedMember.grade">
            <label>
                Ladder Position
            </label>
                <input type="text" ng-model="editedMember.ladderPosition">
        </form>
    </div>
    <div class="modal-footer">
        <button class="btn" data-dismiss="modal" aria-hidden="true">Close</button>
        <button class="btn btn-primary" ng-click="saveMember()">Save changes</button>
    </div>
</div> 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-06T07:27:36.693

一种方法，虽然有点 hacky 是使用`:visible`选择器并计算有多少匹配项

```
expect(element('#someElement:visible').count()).toBe(1); 
```

[来源](https://coderwall.com/p/7v0-ca)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:50:18.700

我最终只需要打电话`sleep(1)`进行测试。我猜显示模态的代码不如测试检查样式的速度快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-16T12:49:34.840

我设法执行以下操作来检查元素是否隐藏：

```
expect(element("#id_element").css("display")).toBe("none"); 
```

并检查此元素是否可见：

```
expect(element("#id_element").css("display")).not().toBe("none"); 
```

我相信这不是最好的方法。但这很简单，它对我有用。

干杯!

# android - Eclipse 将 VideoView 的文件路径标记为不正确

> ID：14565428
> 
> 赞同：0
> 
> 时间：2013-01-28T15:33:05.363
> 
> 标签：android, android-videoview

我在这里有一个 VideoView 但 Eclipse 说`raw cannot be resolved to a verable`并且`apw cannot be resolved to a variable`在线`videoHolder.setVideoURI(Uri.parse(@raw/apw.avi));`

```
getWindow().setFormat(PixelFormat.TRANSLUCENT);
    VideoView videoHolder = (VideoView) findViewById(R.id.VideoView);
    videoHolder.setMediaController(new MediaController(this));
    videoHolder.setVideoURI(Uri.parse(@raw/apw.avi));
    videoHolder.requestFocus();
    videoHolder.start(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:40:55.827

试试这种方式：

```
Uri videouri = Uri.parse("android.resource://" + getPackageName() + "/raw/apw");
videoHolder.setVideoURI(videouri); 
```

谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:52:19.853

您必须将视频复制到项目的 res/raw 文件夹中。它必须采用受支持的格式（3gp、wmv、mp4）并在文件名中使用小写、数字、下划线和点命名：apw.mp4

当您在代码中使用此资源时，您将通过生成的 R 静态引用 - 它将删除文件扩展名：R.raw.apw

```
VideoView videoHolder = (VideoView) findViewById(R.id.VideoView);
videoHolder.setMediaController(new MediaController(this));
String uri = "android.resource://" + getPackageName() + "/" + R.raw.apw;
videoHolder.setVideoURI(Uri.parse(uri));
videoHolder.requestFocus();
videoHolder.start(); 
```

# windows - 错误 193: '%1 不是 Windows Server 2003 上的有效 Win32 应用程序

> ID：14565435
> 
> 赞同：6
> 
> 时间：2013-01-28T15:33:14.630
> 
> 标签：windows, service

我想得到一些帮助，我在尝试启动 Windows 服务时遇到了这个错误，这让我发疯了。详情如下：

*   我有一个在 VB.NET (VS 2012) 上开发的 Windows 服务，它是为 x86 机器编译的。
*   我使用 InstallUtil 和“​​SC CREATE”命令在客户的服务器上安装服务（在 Windows Server 2003 下运行）。
*   当我尝试启动服务时，我收到以下错误消息：“无法在本地计算机上启动服务。错误 193：0xc1”
*   我查看了事件查看器以获取一些线索，但我找不到任何非常有用的信息：在“应用程序”选项卡中，服务没有记录任何记录，所以我认为它甚至没有运行一行代码。在“系统”选项卡中，服务控制管理器记录了以下错误消息：“%1 不是有效的 Win32 应用程序。”

我在网络上进行了长时间的研究，提供的唯一解决方案是检查 Windows 注册表以找到服务的 ImagePath，并在路径的开头和结尾添加一些引号。这应该可以解决问题，但在我的情况下它不起作用。我已经修改了几次 ImagePath（我添加和删除了引号，尝试使用双引号和三引号），但我没有得到任何积极的结果。

有人可以帮我解决这个问题吗？提前致谢...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T08:12:40.607

我认为您使用的 .net 框架和 windows server 2003 存在可战斗性问题。您使用 .net 4.5 吗？Windows server 2003 无法运行以 net framework 4.5 为目标的应用程序。

[http://www.microsoft.com/visualstudio/eng/products/compatibility](http://www.microsoft.com/visualstudio/eng/products/compatibility)

因此，您可以将目标框架更改为 4.0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-02-11T05:58:33.903

我的问题是由于在项目属性的应用程序窗格中将我的服务项目配置为**类库**而不是**Windows 应用程序。**

[![Visual Studio 2015 项目属性窗口](../Images/bcfd5f2cdc62729509670205d925d70e.png)](https://i.stack.imgur.com/ND9OI.png)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-21T11:16:38.413

相同的原始问题，但 Win Server 2019，也没有通过引用注册表 ImagePath 来解决。但是，已通过对路径的文件夹部分使用 NTFS 符号链接来解决。

例如，代替 Service 的 ImagePath 注册表项是：

`D:\My Folder\My File.thing`

在提升权限的 Cmd 提示符下创建 Windows 符号链接：

`d:>mklink /D "myfold~1" "My Folder"`

然后使用注册表 ImagePath 中的符号链接

`D:\myfold~1\My File.thing`

# jboss - JBoss 重新部署给出 NameNotFoundException: ORB not bound

> ID：14565438
> 
> 赞同：8
> 
> 时间：2013-01-28T15:33:37.003
> 
> 标签：jboss, redeploy, orb

我在 Windows 7 桌面上运行 JBoss 6.1.0.Final。当我重新部署我的耳朵时，我总是得到这样的堆栈；

```
16:23:32,560 WARN  [org.jboss.kernel.plugins.dependency.StartStopLifecycleAction] Error during stop for jboss-switchboard:appName=foretag-ear,module=foretag-ejb-4.0.0-SNAPSHOT,name=ArbetsstalleDAO: javax.naming.NameNotFoundException: ORB not bound
        at org.jnp.server.NamingServer.getBinding(NamingServer.java:771) [:5.0.5.Final]
        at org.jnp.server.NamingServer.getBinding(NamingServer.java:779) [:5.0.5.Final]
        at org.jnp.server.NamingServer.unbind(NamingServer.java:349) [:5.0.5.Final]
        at org.jnp.interfaces.NamingContext.unbind(NamingContext.java:873) [:5.0.5.Final]
        at org.jboss.util.naming.Util.unbind(Util.java:151) [jboss-common-core.jar:2.2.17.GA]
        at org.jboss.util.naming.Util.unbind(Util.java:141) [jboss-common-core.jar:2.2.17.GA]
        at org.jboss.switchboard.mc.SwitchBoardImpl.unbindFromRelevantContext(SwitchBoardImpl.java:303) [:1.0.0-alpha-15]
        at org.jboss.switchboard.mc.SwitchBoardImpl.stop(SwitchBoardImpl.java:102) [:1.0.0-alpha-15]
        at sun.reflect.GeneratedMethodAccessor432.invoke(Unknown Source) [:1.6.0_34]
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25) [:1.6.0_34]
        at java.lang.reflect.Method.invoke(Method.java:597) [:1.6.0_34] 
```

这是一个警告，但我们相信它会因为各种原因搞乱 JNDI 空间。我用谷歌搜索了这个，但没有找到太多有用的信息。一个建议是运行所有配置，但它与该配置也是相同的堆栈跟踪。有什么想法，或者你认为我们真的可以忽略这个堆栈吗？

亲切的问候，

扬·吉瓦斯

# c# - 如何防止 SQL 注入攻击？

> ID：14565440
> 
> 赞同：4
> 
> 时间：2013-01-28T15:33:40.373
> 
> 标签：c#, sql, sql-injection, sql-server-2012

目前，我正在通过执行类似的操作来创建 SQL 查询

```
string SQLQuery = "SELECT * FROM table WHERE ";
foreach(word in allTheseWords)
{
     SQLQuery = SQLQuery + " column1 = '" + word + "' AND";
} 
```

我知道这可能会导致 SQL 注入攻击。我不知道如何将数组作为参数传递

```
where report in @allTheseWords 
```

===========

我正在使用 SQL Server 2012

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:35:12.710

不幸的是，如果不为表值参数添加用户定义的类型，就无法将数组作为参数传递。绕过此限制的最简单方法是在循环中为数组的每个元素创建单独命名的参数，然后将值绑定到这些元素中的每一个：

```
string SQLQuery = "SELECT * FROM table WHERE column1 in (";
for(int i = 0 ; i != words.Count ; i++) {
    if (i != 0) SQLQuery += ",";
    SQLQuery += "@word"+i;
}
...
for(int i = 0 ; i != words.Count ; i++) {
    command.Parameters.Add("@word"+i, DbType.String).Value = words[i];
} 
```

您还可以创建一个临时表，在其中插入单个单词，然后执行与临时单词表进行内连接的查询。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:43:12.633

使用 ADO，您可以在 params 的帮助下完成

```
SqlConnection Con = new SqlConnection(conString);
SqlCommand Com = new SqlCommand();
string SQLQuery = "SELECT * FROM table WHERE ";
int i=1;
foreach(word in words)
{
      Com.Parameters.Add("@word"+i.ToString(),SqlDbType.Text).Value = word;
      SQLQuery = SQLQuery + " column1 = '@word"+i.ToString()+"' AND ";
      i++;
}
Com.CommandText =SQLQuery; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T17:26:04.887

[以下](http://msdn.microsoft.com/library/ms182310%28VS.100%29.aspx)是微软的建议：

1.  使用代码分析来检测 Visual Studio 项目中容易出现 sql 注入的区域；
2.  请参阅有关如何降低攻击风险的文章：

简而言之，他们谈论：

*   使用存储过程。
*   使用参数化的命令字符串。
*   在构建命令字符串之前验证用户输入的类型和内容。

顺便说一句，您可以在构建过程中启用静态分析并对其进行配置，以便当安全规则被破坏时，构建也会中断。确保您的团队编写安全代码的好方法！

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T15:36:18.597

对于 SQL Server，您将使用[Table-Valued Parameter](http://msdn.microsoft.com/en-us/library/bb510489.aspx)。SQL 有一个结构，它表示同一类型的多个项目的集合。它被称为表。它没有数组。

* * *

当然，您应该更新的查询：

```
where report in @allTheseWords 
```

不等同于您的原始查询，但可能更接近意图。在使用构造的查询中`AND`，您是说*同一*行中的*同一*列必须等于多个不同的单词。除非所有单词都相等，否则这将永远不会返回任何行。更新后的查询回答是否*有任何*单词匹配，而不是*all*。

 **** * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-28T15:36:27.407

您需要使用准备好的语句。处理这些的方式是您编写查询并为要使用的值放置占位符。这是一个例子：

```
SELECT * FROM table WHERE column1 = @word 
```

然后，您必须经历一个准备阶段，SQL 引擎知道它需要将参数绑定到查询。然后，您可以执行查询。SQL 引擎应该知道何时以及如何解释您绑定到查询的参数。

这里有一些代码可以做到这一点：

```
SqlCommand command = new SqlCommand(null, rConn);

// Create and prepare an SQL statement.
command.CommandText = "SELECT * FROM table WHERE column1 = @word";
command.Parameters.Add ("@word", word);
command.Prepare();
command.ExecuteNonQuery(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T18:26:30.813

```
I combine the use of params with HtmlEncoding(to get rid of special characters where not needed). Give that a shot.

using (SqlConnection conn = new SqlConnection(conString))
{     
    string sql = "SELECT * FROM table WHERE id = @id";
    using (SqlCommand cmd = new SqlCommand(sql, conn))
    {
        cmd.paramaters.AddWithValue("@id", System.Net.WebUtility.HtmlEncode(id));
        conn.Open();
        using (SqlDataReader rdr = cmd.ExecuteReader())
        {

        }
    }
} 
```***

# javascript - Rails：UJS没有执行

> ID：14565442
> 
> 赞同：0
> 
> 时间：2013-01-28T15:33:56.073
> 
> 标签：javascript, ruby-on-rails, unobtrusive-javascript

在我看来，我有一些 UJS 旨在替换部分内容。.js 文件如下所示：

```
transition("#content_container", "<%= escape_javascript(render 'users/show') %>");
librarySorter("User", "<%= @user.username %>"); 
```

转换函数按预期执行，但 librarySorter 未执行。我检查了萤火虫，它确实出现在我的回复中，如下所示：

```
librarySorter("User", "tbaron"); 
```

更奇怪的是，如果我将该行复制并粘贴到我的 firebug 控制台中，它会正常运行并执行。我已经修改了几个小时，但我仍然不知道为什么它不起作用。有任何想法吗？

作为参考，下面是 librarySorter 的样子（在 application.js 中）：

```
function librarySorter(library_type, id){
  function publication_sort_binder(type, order, name){
    $("#overview_table").animate({opacity: 0}, 400);
    $("#sort_method").html(type+' '+order);
    var url = library_type == "User" ? '/users/'+id+'/owned_publications' : '/groups/'+id+'/overview_sort'
    $.ajax({
      type: 'GET',
      data: {'function':type+' '+order},
      url: url,
      success: function() {
        $("#publication_sort_arrow").remove();
        var arrow = (order == 'ASC') ? '&darr;' : '&uarr;';
        $('#sort_'+name).unbind("click").click(function() {
          publication_sort_binder(type, (order == 'ASC') ? 'DESC' : 'ASC', name);
      }).append("<span id='publication_sort_arrow'> "+arrow+"</span>");
      }
    });
  }
  $('#sort_title').click(function() {
    publication_sort_binder("publications.title", "DESC", "title");
  })
  $('#sort_author').click(function() {
    publication_sort_binder("contributors.name", "DESC", "author");
  })
  $('#sort_review_date').click(function() {
    publication_sort_binder("reviews.created_at", "DESC", "review_date");
  })
  $('#sort_review_vote').click(function() {
    publication_sort_binder("reviews.votes_sum", "DESC", "review_vote");
  })
  $('#sort_children_total').click(function() {
    publication_sort_binder("updates.replies_count", "DESC", "children_total");
  })
} 
```

# assembly - ARM 汇编：算术移位/逻辑移位

> ID：14565444
> 
> 赞同：3
> 
> 时间：2013-01-28T15:33:59.470
> 
> 标签：assembly, arm, shift

我有点不知道这两个操作有什么不同。所以我读到算术移位与逻辑移位基本相同，唯一的区别是它以某种方式保持最高位或有符号位。

因此，当我在 101110 上执行 LSL #2 并假设此二进制文件是无符号二进制文件时，结果将是：111000 并且进位位将在 CPSR 中设置，对吗？

当我对同一个号码执行 ASL #2 时，结果会是什么？它如何保持有符号位？上述二进制文件中的 ASR #2 怎么样？结果会是 101011 吗？

不幸的是，我只找到了关于算术移位的非常粗略的描述。提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2016-11-20T08:28:00.507

我很难理解 LSR 和 ASR 之间的真正区别，但希望这张图片能帮助你理解它们。在 LSR( `Logical Shift Right`) 中，MSB( `Most Significant Bit`) 被 0 替换，其中在 ASR( `Arithematic Shift Right`) 中，MSB 与移位前的早期 MSB 相同。（左移类似）ASR 在计算双补码表示中的有符号值时很有用。

[![在此处输入图像描述](../Images/3aba358ef49be6c79bcca8909a49749e.png)](https://i.stack.imgur.com/YZwEM.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:48:06.290

您的示例没有多大意义，因为您的数字只有 6 位，所以第 31 位始终是`0`.

`ASL`是 的同义词，您可以在[ARM 官方文档](http://infocenter.arm.com/help/index.jsp?topic=/com.arm.doc.dui0497a/CIHDDCIF.html)或此[ARM 参考站点](http://www.peter-cockerell.net/aalp/html/ch-3.html)`LSL`中查看移位操作行为。

# windows-8 - 为什么 SystemTriggerType.NetworkStateChange 会触发多次？

> ID：14565445
> 
> 赞同：0
> 
> 时间：2013-01-28T15:34:06.520
> 
> 标签：windows-8, background-process

我正在尝试检查 Windows 8 上后台任务中的网络状态更改。您可以[在 msdn](http://msdn.microsoft.com/en-us/library/windows/apps/xaml/jj553413.aspx)上找到有关注册后台任务的确切详细信息。

我已经注册了几个事件来测试哪个是最合适的：

```
BackgroundTaskManager.RegisterBackgroundTask(
    BackgroundTaskManager.NetworkTaskEntryPoint,
    Constants.NetworkAvailable,
    new SystemTrigger(SystemTriggerType.NetworkStateChange, false),
    new SystemCondition(SystemConditionType.InternetAvailable));
BackgroundTaskManager.RegisterBackgroundTask(
    BackgroundTaskManager.NoNetworkTaskEntryPoint,
    Constants.NetworkUnAvailable,
    new SystemTrigger(SystemTriggerType.NetworkStateChange, false),
    new SystemCondition(SystemConditionType.InternetNotAvailable));
BackgroundTaskManager.RegisterBackgroundTask(
    BackgroundTaskManager.InternetTaskEntryPoint,
    Constants.InternetAvailable,
    new SystemTrigger(SystemTriggerType.InternetAvailable, false),
    null); 
```

为了测试我启用飞行模式并禁用它。我收到以下事件（系统触发器/条件）：

*   NetworkStateChange/InternetNotAvailable
*   程序“[xxx] backgroundTaskHost.exe: Managed (v4.0.30319)”已退出，代码为 1 (0x1)。
*   NetworkStateChange/InternetNotAvailable
*   程序“[xxx] backgroundTaskHost.exe: Managed (v4.0.30319)”已退出，代码为 1 (0x1)。
*   NetworkStateChange/InternetNotAvailable
*   程序“[xxx] backgroundTaskHost.exe: Managed (v4.0.30319)”已退出，代码为 1 (0x1)。
*   NetworkStateChange/InternetNotAvailable
*   程序“[xxx] backgroundTaskHost.exe: Managed (v4.0.30319)”已退出，代码为 1 (0x1)。
*   NetworkStateChange/InternetAvailable InternetAvailable (SystemTrigger)
*   NetworkStateChange/InternetAvailable
*   程序“[xxx] backgroundTaskHost.exe: Managed (v4.0.30319)”已退出，代码为 1 (0x1)。
*   NetworkStateChange/InternetAvailable
*   程序“[xxx] backgroundTaskHost.exe: Managed (v4.0.30319)”已退出，代码为 1 (0x1)。
*   NetworkStateChange/InternetAvailable
*   程序“[xxx] backgroundTaskHost.exe: Managed (v4.0.30319)”已退出，代码为 1 (0x1)。

所以我得到 NetworkStateChange 条件不可用 4 次，条件可用 4 次和 InternetAvailable 一次（这是正确的）。

在后台任务中，我只做以下代码进行测试：

```
public void Run(IBackgroundTaskInstance taskInstance)
{
    // keep track that we're no longer connected
    Debug.WriteLine("Background " + taskInstance.Task.Name + " Starting...");
    ApplicationData.Current.LocalSettings.Values[BackgroundTaskManager.NetworkConnectedKey] = true;
} 
```

我也尝试过添加 GetDeferral()，但由于没有异步代码，因此没有真正的问题。请注意，所有方法中的代码也是相同的，所有任务只注册一次。

# xslt - 使用 Scripting Functoid 将单个元素映射到记录

> ID：14565448
> 
> 赞同：0
> 
> 时间：2013-01-28T15:34:13.840
> 
> 标签：xslt, scripting, mapping, biztalk

我正在尝试创建从源架构到目标架构上的同一记录的两个不同元素（Element1 和 Element2）之间的映射，以及其中的一个元素，如以下格式所示。

```
<coverages>
  //If Element1(Source Schema element) has data
  <coverage>
    <CoverageTypeCd>Data1</CoverageTypeCd>
  </coverage>    

  //If Element2(Source Schema element) has data
  <coverage>
    <CoverageTypeCd>Data2</CoverageTypeCd>
  </coverage>
</coverages> 
```

我现在正在尝试检查元素（源模式）上是否存在值，然后尝试将其提供给脚本函数。我不知道我应该如何生成整个
`<coverage>`节点并仍然发送相应`<coverageTypeCd>`的记录，如上所示。我相信应该使用 Inline XSLT 来完成。我真的需要有人的帮助。

提前致谢。

如果您需要有关某事的其他详细信息，请告诉我。

**更新**

大家好，我自己找到了答案。我用作`Inline XSLT Call template`脚本类型，它完成了这项工作。我将此脚本应用于 Source Schema 上的不同元素以映射 Coverage 记录

```
<xsl:template name="CoverageTemplate1"> 
  <xsl:param name="Element1" /> 
  <xsl:element name="Coverage"> 
    <xsl:element name="CoverageTypeCd">
      <xsl:value-of select="$Element1" />
    </xsl:element> 
  </xsl:element> 
</xsl:template> 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T15:27:21.613

我自己找到了答案。我使用“内联 XSLT 调用模板”作为脚本类型，它完成了这项工作。我将此脚本应用于 Source Schema 上的不同元素以映射 Coverage 记录

```
<xsl:template name="CoverageTemplate1"> 
<xsl:param name="Element1" /> 
<xsl:element name="Coverage">
 <xsl:element name="CoverageTypeCd"><xsl:value-of    
select="$Element1" /></xsl:element>     
</xsl:element> 
</xsl:template> 
```

谢谢

# cordova - jquery mobile：输入后文本输入调整大小

> ID：14565449
> 
> 赞同：0
> 
> 时间：2013-01-28T15:34:14.990
> 
> 标签：cordova, jquery-mobile

我目前正在与 apache cordova / phonegap 结合使用一个 jquery 移动项目。我试图实现一个简单的用户界面，但是在使用文本输入时会出现问题。

当我触摸输入并在其中输入一些单词时，一切都很好。离开输入后，它会调整为更小的尺寸和属于它的标签。我尝试了很多并用谷歌搜索，但我没有解决方案。

我会向您发布我的代码并希望有人得到提示。

谢谢你。

```
 <div data-role="page">

        <!-- data-position="fixed" verursacht Probleme mit den Textinputs -->

        <div data-role="header" data-position="fixed" data-tap-toggle="false">
            <h1>Storage Test</h1>
        </div>

        <div data-role="content">

            <input type="text" name="filename" id="filename" value=""/>

            <!-- Console -->
            <ul data-inset="true" data-role="listview" id="console" style="width:50%">
                <li data-role="list-divider" role="heading">Console</li>
            </ul>

            <!-- Control -->
            <ul data-inset="true" data-role="listview" id="control" style="width:48%; position:fixed; top:58px; right: 1%">

                <li data-role="list-divider" role="heading">Control</li>

                <li data-role="fieldcontain">
                    <label for="filename">Filename:</label>
                    <input type="text" name="filename" id="filename" value=""/>
                </li>

                <li>
                    <button data-theme="b" type="submit">Save to file system</button>
                </li>

            </ul>

        </div>

    </div>

</body> 
```

# qt - QT 函数参数

> ID：14565455
> 
> 赞同：-1
> 
> 时间：2013-01-28T15:34:22.470
> 
> 标签：qt

您好，我是 QT 的新手，我想制作一个 Log 类。我制作了**Log.cpp**，下面的代码将日志消息保存在**Log.txt**文件中，但问题出在函数参数`QString msg`中。我希望用户通过调用键入需要保存的消息`logs.log_message("My log message").`

```
#include "log.h"

void Log::log_message(QString msg)
{
    QFile file("Log.txt");
    if(!file.open(QIODevice::Append | QIODevice::WriteOnly | QIODevice::Text))
        return;
    QTextStream out(&file);
    out << msg \n";
} 
```

当我尝试在主函数中调用该方法时出现错误：

```
Log logs;
logs.log_message('Database initialized'); 
```

**问题 ：**

> C:\Users\ikac\Desktop\workspace\QT\Phonebook-build-desktop-Qt_4_8_1_for_Desktop_- *MSVC2010* _Qt_SDK__Debug..\Phonebook\main.cpp:15: error: C2015: too many characters in constant
> 
> C:\Users\ikac\Desktop\workspace\QT\Phonebook-build-desktop-Qt_4_8_1_for_Desktop_- *MSVC2010* _Qt_SDK__Debug..\Phonebook\main.cpp:15：错误：C2660：'Log::log_message'：函数不占用 1论据
> 
> C:\Users\ikac\Desktop\workspace\QT\Phonebook-build-desktop-Qt_4_8_1_for_Desktop_- *MSVC2010* _Qt_SDK__Debug..\Phonebook\log.cpp:5: error: C2511: 'void Log::log_message(QString)' : 重载在“日志”中找不到成员函数
> 
> c:\users\ikac\desktop\workspace\qt\phonebook\log.h:8：见“日志”的声明
> 
> C:\Users\ikac\Desktop\workspace\QT\Phonebook-build-desktop-Qt_4_8_1_for_Desktop_- *MSVC2010* _Qt_SDK__Debug..\Phonebook\log.cpp:10：错误：C2017：非法转义序列
> 
> C:\Users\ikac\Desktop\workspace\QT\Phonebook-build-desktop-Qt_4_8_1_for_Desktop_- *MSVC2010* _Qt_SDK__Debug..\Phonebook\log.cpp:10：错误：C2001：常量换行

**编译器输出：**

> 16:22:00：为项目电话簿运行构建步骤... 16:22:00：配置未更改，跳过 qmake 步骤。16:22:00：开始：“D:\QT\QtCreator\bin\jom.exe”main.cpp ..\Phonebook\main.cpp(15)：错误 C2015：常量中的字符过多 ..\Phonebook\ main.cpp(15) : 错误 C2660: 'Log::log_message' : 函数不接受 1 个参数 log.cpp ..\Phonebook\log.cpp(5) : 错误 C2511: 'void Log::log_message(QString) ' : 在 'Log' c:\users\ikac\desktop\workspace\qt\phonebook\log.h(8) 中找不到重载的成员函数：参见 'Log' 的声明 ..\Phonebook\log.cpp(10) : 错误 C2017: 非法转义序列 ..\Phonebook\log.cpp(10) : 错误 C2001: 常量生成代码中的换行符... cl -c -nologo -Zm200 -Zc: wchar_t- -zi -MDd -GR -EHsc -W3 -w34100 -w34189 -DUNICODE -DWIN32 -DQT_LARGEFILE_SUPPORT -DQT_DLL -DQT_SQL_LIB -DQT_GUI_LIB -DQT_CORE_LIB -DQT_HAVE_MMX -DQT_HAVE_3DNOW -DQT_HAVE_SSE -DQT_HAVE_MMXEXT -DQT_HAVE_SSE2 -DQT_THREAD_SUPPORT -I“d：\ QT \桌面\Qt\4.8.1\msvc2010\include\QtCore" -I"d:\QT\Desktop\Qt\4.8.1\msvc2010\include\QtGui" -I"d:\QT\Desktop\Qt\4.8\. 1\msvc2010\include\QtSql" -I"d:\QT\Desktop\Qt\4.8.1\msvc2010\include" -I"d:\QT\Desktop\Qt\4.8.1\msvc2010\include\ActiveQt" -I“调试”-I“。” -I"..\电话簿"-I"." -I"d:\QT\Desktop\Qt\4.8.1\msvc2010\mkspecs\win32-msvc2010" -Fodebug\@C:\Users\ikac\AppData\Local\Temp\main.obj.5108.31.jom D: \QT\QtCreator\bin\jom.exe -f Makefile.Debug jom: C:*MSVC2010* _Qt_SDK__Debug\Makefile.Debug [debug\main.obj] 错误 2
> 
> jom 1.0.8 - 增强你的核心
> 
> jom: C:\Users\ikac\Desktop\workspace\QT\Phonebook-build-desktop-Qt_4_8_1_for_Desktop_- *MSVC2010* _Qt_SDK__Debug\Makefile [debug] 错误 2 16:22:05: The process "D:\QT\QtCreator\bin\ jom.exe”退出并显示代码 2。构建项目电话簿时出错（目标：桌面）执行构建步骤“Make”时

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:41:03.457

使用`logs.log_message("Database initialized");`. 单引号用于 c++ 中的字符，而不是字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:46:21.720

您需要在引号内传递您的字符串，即**“”**

用这个：

`logs.log_message("Database initialized");`

# android - 第二次打开 SupportMapFragment 时出错

> ID：14565460
> 
> 赞同：55
> 
> 时间：2013-01-28T15:34:25.753
> 
> 标签：android, android-maps-v2, supportmapfragment

第二次打开我的 SupportMapFragment（Android 地图 v2）（调用 setContentView）时，我收到以下错误：

```
01-28 16:27:21.374: E/AndroidRuntime(32743): FATAL EXCEPTION: main
01-28 16:27:21.374: E/AndroidRuntime(32743): android.view.InflateException: Binary XML file line #6: Error inflating class fragment
01-28 16:27:21.374: E/AndroidRuntime(32743):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:704)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at android.view.View.inflate(View.java:16119)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at mypackage.MyView.<init>(HitsView.java:26)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at mypackage.MenuListFragment.onItemClick(MenuListFragment.java:133)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at android.widget.AbsListView.performItemClick(AbsListView.java:1086)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2855)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at android.widget.AbsListView$1.run(AbsListView.java:3529)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at android.os.Handler.handleCallback(Handler.java:615)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at android.os.Handler.dispatchMessage(Handler.java:92)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at android.os.Looper.loop(Looper.java:137)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at android.app.ActivityThread.main(ActivityThread.java:4745)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at java.lang.reflect.Method.invokeNative(Native Method)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at java.lang.reflect.Method.invoke(Method.java:511)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at dalvik.system.NativeStart.main(Native Method)
01-28 16:27:21.374: E/AndroidRuntime(32743): Caused by: java.lang.IllegalArgumentException: Binary XML file line #6: Duplicate id 0x7f04003b, tag null, or parent id 0x0 with another fragment for com.google.android.gms.maps.SupportMapFragment
01-28 16:27:21.374: E/AndroidRuntime(32743):    at android.support.v4.app.FragmentActivity.onCreateView(FragmentActivity.java:285)
01-28 16:27:21.374: E/AndroidRuntime(32743):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:676)
01-28 16:27:21.374: E/AndroidRuntime(32743):    ... 20 more 
```

XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:map="http://schemas.android.com/apk/res-auto"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >
    <fragment
        android:id="@+id/hits_map"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        class="com.google.android.gms.maps.SupportMapFragment"
        map:mapType="normal"
        map:uiZoomControls="false"
        map:uiZoomGestures="true"
        map:cameraZoom="13"
        map:uiRotateGestures="true"
        map:uiTiltGestures="true"/>
</RelativeLayout> 
```

MyView.class：

```
public class MyView extends RelativeLayout {
    private GoogleMap map;

    public MyView(Context context, FragmentActivity activity) {
        super(context);
        inflate(activity, R.layout.activity_hits, this);
        this.map = ((SupportMapFragment) activity.getSupportFragmentManager()
            .findFragmentById(R.id.hits_map)).getMap();
    }
} 
```

我不知道这个错误是什么意思。有人可以解释一下吗？

* * *

## 回答 #1

> 赞同：83
> 
> 时间：2013-04-04T13:47:48.363

**更新：** 作为替代解决方案（我认为更好），您可以使用描述的 MapView：[here](https://stackoverflow.com/questions/20919048/android-android-view-inflateexception-binary-xml-file-line-8-error-inflatin/20971284#20971284)

我在使用选项卡实现时遇到了类似的问题。使用 Google Maps V2，您会被 SupportMapFragment 困住，因此无法选择使用 MapView。在 juanmeanwhile 的帖子和评论 #1 之间（[https://code.google.com/p/gmaps-api-issues/issues/detail?id=5064#c1](https://code.google.com/p/gmaps-api-issues/issues/detail?id=5064#c1)），我设法弄清楚我做错了什么。

因此，对于其他任何收到 Duplicate id 错误的人，请确保您以编程方式声明片段，而不是在 XML 中。这可能意味着嵌套布局。

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:map="http://schemas.android.com/apk/res-auto"
   android:layout_width="match_parent"
   android:layout_height="match_parent" >

<!-- Lots of fancy layout -->   

<RelativeLayout
        android:id="@+id/map"
        android:layout_width="match_parent"
        android:layout_height="wrap_content">
    </RelativeLayout>
</RelativeLayout> 
```

然后您需要以编程方式创建您的片段，但需要仔细考虑片段生命周期（[http://developer.android.com/reference/android/app/Fragment.html#getChildFragmentManager()](http://developer.android.com/reference/android/app/Fragment.html#getChildFragmentManager())）。为确保在正确的时间创建所有内容，您的代码应如下所示（取自注释 #1）。

```
public class MyFragment extends Fragment {

private SupportMapFragment fragment;
private GoogleMap map;

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
    return inflater.inflate(R.layout.layout_with_map, container, false);
}

@Override
public void onActivityCreated(Bundle savedInstanceState) {
    super.onActivityCreated(savedInstanceState);
    FragmentManager fm = getChildFragmentManager();
    fragment = (SupportMapFragment) fm.findFragmentById(R.id.map);
    if (fragment == null) {
        fragment = SupportMapFragment.newInstance();
        fm.beginTransaction().replace(R.id.map, fragment).commit();
    }
}

@Override
public void onResume() {
    super.onResume();
    if (map == null) {
        map = fragment.getMap();
        map.addMarker(new MarkerOptions().position(new LatLng(0, 0)));
    }
}
} 
```

希望这可以节省一些时间。

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2013-02-04T15:56:55.317

不要在布局中声明 de SupportMapFragment，而是以编程方式进行，并确保使用 getChildFragmentMananger 而不是经典的 getFragmentManager() 来创建片段。

```
 mMapFragment = SupportMapFragment.newInstance();
    FragmentTransaction fragmentTransaction =
             mMapFragment.getChildFragmentManager().beginTransaction();
     fragmentTransaction.add(R.id.map_root, mMapFragment);
     fragmentTransaction.commit(); 
```

保留此 SupportMapFragment mMapFragment，因为您需要它来检索 GoogleMap 对象：

```
 GoogleMap map = mMapFragment.getMap(); 
```

* * *

## 回答 #3

> 赞同：24
> 
> 时间：2013-09-19T22:05:24.743

我花了半天时间解决了这个问题，只找到了解决方法。在课堂上覆盖您的`onCreate`方法`YourFragment`：

```
public void onCreate(Bundle savedInstanceState) {
    setRetainInstance(true); 
    super.onCreate(savedInstanceState);     
} 
```

并覆盖你的`onDestroy`方法：

```
@Override
public void onDestroyView() {
    super.onDestroyView();
    try {
        SupportMapFragment fragment = (SupportMapFragment) getActivity()
                                          .getSupportFragmentManager().findFragmentById(
                                              R.id.multi_inns_on_map);
        if (fragment != null) getFragmentManager().beginTransaction().remove(fragment).commit();

    } catch (IllegalStateException e) {
        //handle this situation because you are necessary will get 
        //an exception here :-(
    }
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-08-29T01:07:04.467

我整天都在寻找这个问题的解决方案，在这里阅读了所有的workaroung，我找到了解决问题的方法。我将发布所有代码，因为这个问题缺乏完整的答案，只是一些与完整场景匹配并且对任何人都有帮助的小片段。

```
public class LocationFragment extends Fragment implements View.OnClickListener {

    private GoogleMap googleMap;
    private static View rootView;
    private SupportMapFragment supportMapFragment;

    public LocationFragment() {
    }

    @Override
    public void onDestroyView() {
        super.onDestroyView();
    }

    @Override
    public void onCreate(Bundle savedInstanceState) {
        setRetainInstance(true);
        super.onCreate(savedInstanceState);
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        if(savedInstanceState == null) {

            if (rootView != null) {
                ViewGroup parent = (ViewGroup) rootView.getParent();
                if (parent != null)
                    parent.removeView(rootView);
            }

            try{
                if(rootView == null)
                {
                    rootView = inflater.inflate(R.layout.fragment_location, container, false);
                }

                supportMapFragment = (SupportMapFragment) getFragmentManager().findFragmentById(R.id.map);
                LocationUtility locationUtility = LocationUtility.getInstance(context);
                GoogleMap googleMap =  locationUtility.initilizeMap(supportMapFragment);

              //More code

            } catch (Exception e)
            {
                e.printStackTrace();
            }
        }

        return rootView;
    }

} 
```

通过调试，您会注意到片段如何操作无关紧要，onDestroyMethod 等不需要botter，因为null 的验证只对对象的当前实例进行操作。

享受！;)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-09-12T04:49:11.527

我遇到了这个问题，在我的 android 日志中发现我的硬件加速没有打开。在我的 AndroidManifest 中打开它后，我多次显示地图不再是问题。我使用的是 x86 模拟器。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-12-18T02:46:44.273

经过大量的点击和尝试，我终于设法在我的应用程序中完美地使用 MapView Fragment，结果如下所示：-

[![在此处输入图像描述](../Images/f4e6be9a797a7fa130f46419296e987a.png)](https://i.stack.imgur.com/yFugi.png)

，这是我的 MapView 片段类：-

```
import android.content.Context;
import android.location.Location;
import android.location.LocationListener;
import android.location.LocationManager;
import android.os.Bundle;
import android.support.v4.app.Fragment;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.Toast;

import com.google.android.gms.maps.CameraUpdateFactory;
import com.google.android.gms.maps.GoogleMap;
import com.google.android.gms.maps.GoogleMap.OnMapClickListener;
import com.google.android.gms.maps.MapFragment;
import com.google.android.gms.maps.model.BitmapDescriptorFactory;
import com.google.android.gms.maps.model.CameraPosition;
import com.google.android.gms.maps.model.LatLng;
import com.google.android.gms.maps.model.MarkerOptions;
import com.serveroverload.yago.R;

public class HomeFragment extends Fragment implements LocationListener {
    // Class to do operations on the Map
    GoogleMap googleMap;
    private LocationManager locationManager;

    public static Fragment newInstance() {
        return new HomeFragment();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
            Bundle savedInstanceState) {
        View v = inflater.inflate(R.layout.home_fragment, container, false);
        Bundle bdl = getArguments();

        // setuping locatiomanager to perfrom location related operations
        locationManager = (LocationManager) getActivity().getSystemService(
                Context.LOCATION_SERVICE);

        // Requesting locationmanager for location updates
        locationManager.requestLocationUpdates(
                LocationManager.NETWORK_PROVIDER, 1, 1, this);

        // To get map from MapFragment from layout
        googleMap = ((MapFragment) getActivity().getFragmentManager()
                .findFragmentById(R.id.map)).getMap();

        // To change the map type to Satellite
        // googleMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);

        // To show our current location in the map with dot
        // googleMap.setMyLocationEnabled(true);

        // To listen action whenever we click on the map
        googleMap.setOnMapClickListener(new OnMapClickListener() {

            @Override
            public void onMapClick(LatLng latLng) {
                /*
                 * LatLng:Class will give us selected position lattigude and
                 * longitude values
                 */
                Toast.makeText(getActivity(), latLng.toString(),
                        Toast.LENGTH_LONG).show();
            }
        });

        changeMapMode(3);

        // googleMap.setSatellite(true);
        googleMap.setTrafficEnabled(true);
        googleMap.setBuildingsEnabled(true);
        googleMap.setMyLocationEnabled(true);

        return v;
    }

    private void doZoom() {
        if (googleMap != null) {
            googleMap.animateCamera(CameraUpdateFactory.newLatLngZoom(
                    new LatLng(18.520430, 73.856744), 17));
        }
    }

    private void changeMapMode(int mapMode) {

        if (googleMap != null) {
            switch (mapMode) {
            case 0:
                googleMap.setMapType(GoogleMap.MAP_TYPE_NONE);
                break;

            case 1:
                googleMap.setMapType(GoogleMap.MAP_TYPE_NORMAL);
                break;

            case 2:
                googleMap.setMapType(GoogleMap.MAP_TYPE_SATELLITE);
                break;

            case 3:
                googleMap.setMapType(GoogleMap.MAP_TYPE_TERRAIN);
                break;

            case 4:
                googleMap.setMapType(GoogleMap.MAP_TYPE_HYBRID);
                break;

            default:
                break;
            }
        }
    }

    private void createMarker(double latitude, double longitude) {
        // double latitude = 17.385044;
        // double longitude = 78.486671;

        // lets place some 10 random markers
        for (int i = 0; i < 10; i++) {
            // random latitude and logitude
            double[] randomLocation = createRandLocation(latitude, longitude);

            // Adding a marker
            MarkerOptions marker = new MarkerOptions().position(
                    new LatLng(randomLocation[0], randomLocation[1])).title(
                    "Hello Maps " + i);

            Log.e("Random", "> " + randomLocation[0] + ", " + randomLocation[1]);

            // changing marker color
            if (i == 0)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_AZURE));
            if (i == 1)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_BLUE));
            if (i == 2)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_CYAN));
            if (i == 3)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_GREEN));
            if (i == 4)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_MAGENTA));
            if (i == 5)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_ORANGE));
            if (i == 6)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_RED));
            if (i == 7)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_ROSE));
            if (i == 8)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_VIOLET));
            if (i == 9)
                marker.icon(BitmapDescriptorFactory
                        .defaultMarker(BitmapDescriptorFactory.HUE_YELLOW));

            googleMap.addMarker(marker);

            // Move the camera to last position with a zoom level
            if (i == 9) {
                CameraPosition cameraPosition = new CameraPosition.Builder()
                        .target(new LatLng(randomLocation[0], randomLocation[1]))
                        .zoom(15).build();

                googleMap.animateCamera(CameraUpdateFactory
                        .newCameraPosition(cameraPosition));
            }
        }

    }

    /*
     * creating random postion around a location for testing purpose only
     */
    private double[] createRandLocation(double latitude, double longitude) {

        return new double[] { latitude + ((Math.random() - 0.5) / 500),
                longitude + ((Math.random() - 0.5) / 500),
                150 + ((Math.random() - 0.5) * 10) };
    }

    @Override
    public void onLocationChanged(Location location) {

        if (null != googleMap) {
            // To get lattitude value from location object
            double latti = location.getLatitude();
            // To get longitude value from location object
            double longi = location.getLongitude();

            // To hold lattitude and longitude values
            LatLng position = new LatLng(latti, longi);

            createMarker(latti, longi);

            // Creating object to pass our current location to the map
            MarkerOptions markerOptions = new MarkerOptions();
            // To store current location in the markeroptions object
            markerOptions.position(position);

            // Zooming to our current location with zoom level 17.0f
            googleMap.animateCamera(CameraUpdateFactory.newLatLngZoom(position,
                    17f));

            // adding markeroptions class object to the map to show our current
            // location in the map with help of default marker
            googleMap.addMarker(markerOptions);
        }

    }

    @Override
    public void onStatusChanged(String provider, int status, Bundle extras) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderEnabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onProviderDisabled(String provider) {
        // TODO Auto-generated method stub

    }

    @Override
    public void onDestroyView() {
        // TODO Auto-generated method stub
        super.onDestroyView();

        locationManager.removeUpdates(this);

        android.app.Fragment fragment = getActivity().getFragmentManager()
                .findFragmentById(R.id.map);
        if (null != fragment) {
            android.app.FragmentTransaction ft = getActivity()
                    .getFragmentManager().beginTransaction();
            ft.remove(fragment);
            ft.commit();
        }
    }

} 
```

我的 Xml 文件如下所示：-

```
<?xml version="1.0" encoding="utf-8"?>
<fragment xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/map"
    android:name="com.google.android.gms.maps.MapFragment"
    android:layout_width="match_parent"
    android:layout_height="match_parent" /> 
```

**需要注意的最重要的一点是，不要将 app.Fragment 与 v4.Fragments 混合使用，否则应用程序会严重崩溃。**

如您所见，我已使用 app.Fragment 附加和删除我的 MapView 片段

希望它会帮助某人

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-08-19T07:56:19.057

我尝试了这里提出的各种解决方案，恕我直言，最好的一个是 MapView。无论如何，我找到了另一种可以满足您需求（或可能不适合）的解决方案。

我的`SupportMapFragment`里面`ViewPager+FragmentPagerAdapter`有 3 个标签。所以我只是以一种永远不会破坏所在选项卡的方式配置 ViewPager `SupportMapFragment`。

```
viewPager.setOffScreenPageLimit(2);
viewPager.setAdapter(...); 
```

通过此调用，ViewPager 将始终在当前页面之后维护两页，在当前页面之前维护两页，因此我的三个选项卡中的任何一个都不会被销毁/重新创建。

问题解决了 ：）

注意内存消耗会增加

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-09-02T18:10:29.807

```
private MainActivity mainActObj;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    mainActObj = getMainActivity();
}

@SuppressWarnings("unchecked")
@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {

    if (mainActObj.mapView == null) {
        return mainActObj.mapView = inflater.inflate(R.layout.fragment_map,
                null);
    }

    else {
        ViewGroup parent = (ViewGroup) mainActObj.mapView.getParent();
        if (parent != null) {
            parent.removeView(mainActObj.mapView);
        }

        try {
            return mainActObj.mapView = inflater.inflate(
                    R.layout.fragment_map, container, false);
        } catch (InflateException except) {
            return mainActObj.mapView;
        }
    }

} 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-01-09T09:41:35.160

试试这个代码

```
 @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
         finder = new LocationFinder(getActivity());

             view = inflater.inflate(R.layout.fragment_secondfragement, container, false);

                        initMap();

      //  getLocation();
        return view;

    }

    public void initMap(){

        if (map == null) {
            mapFragment = (SupportMapFragment) getChildFragmentManager()
                    .findFragmentById(R.id.map);
        }

        map = mapFragment.getMap();
        map.setMyLocationEnabled(true);
        map.getUiSettings().setMyLocationButtonEnabled(true);

    }
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-14T07:10:08.353

我有**同样的问题**，并**通过动态创建谷歌地图来解决。**您要做的是创建一个扩展**SupportMapFragment**类的类。

> 此方法适用于**姜饼棒棒糖**和**嵌套片段**，因为它将动态创建地图，因此不必担心删除片段或类似的东西。

**第1步：**

```
public class DynamicMapFragment extends SupportMapFragment {

    public GoogleMap googleMap;
    public View mOriginalContentView;
    public static int statusGooglePlayService;    

    @Override
    public void onCreate(Bundle arg0) {
        super.onCreate(arg0);
    }

    @Override
    public View onCreateView(LayoutInflater mInflater, ViewGroup parent,
            Bundle arg2) {

        mOriginalContentView = super.onCreateView(mInflater, parent, arg2);

       //this is for getting height of the phone screen
        DisplayMetrics displaymetrics = new DisplayMetrics();
        getActivity().getWindowManager().getDefaultDisplay()
                .getMetrics(displaymetrics);
        int height = displaymetrics.heightPixels;

        //Here you can define the height of the map as you desire
        FrameLayout.LayoutParams parentLayout = new FrameLayout.LayoutParams(
                FrameLayout.LayoutParams.MATCH_PARENT, height / 3);

        mOriginalContentView.setLayoutParams(parentLayout);
        return mOriginalContentView;
    }

    @Override
    public View getView() {
        return mOriginalContentView;
    }

    @Override
    public void onInflate(Activity arg0, AttributeSet arg1, Bundle arg2) {
        super.onInflate(arg0, arg1, arg2);
    }

    @Override
    public void onActivityCreated(Bundle savedInstanceState) {
        super.onActivityCreated(savedInstanceState);
        googleMap = getMap();

        statusGooglePlayService = GooglePlayServicesUtil
                .isGooglePlayServicesAvailable(getActivity());
        if (statusGooglePlayService == ConnectionResult.SUCCESS) {
            if (googleMap != null) {
                // do whatever you want to do with map
            }
        } else {
            Dialog dialog = GooglePlayServicesUtil.getErrorDialog(
                    statusGooglePlayService, getActivity(), -1);
            dialog.show();
        }
    }

} 
```

> 然后从Activity中调用上面创建的类，Fragment像这样：

**第2步：**

```
//Calling the method from a fragment
private void createMap(View rootView) {
        FrameLayout mapLayout = (FrameLayout)rootView.findViewById(R.id.location_map);
        FragmentTransaction mTransaction = getActivity()
                .getSupportFragmentManager().beginTransaction();
        SupportMapFragment mFRaFragment = new DynamicMapFragment();
        mTransaction.add(mapLayout.getId(), mFRaFragment);
        mTransaction.commit();

        try {
            MapsInitializer.initialize(activity);
        } catch (Exception e) {
            e.printStackTrace();
        }
    } 
```

> 片段的 XML 布局，您必须添加**Framelayout而不是****地图**的片段

 ****第三步：**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <FrameLayout
        android:id="@+id/location_map"
        android:layout_width="match_parent"
        android:layout_height="250dp"
        android:layout_weight="0" />

      <!--  You can add any other view also whatever you want to add 

      <Button
        android:layout_width="match_parent"
        android:layout_height=""wrap_content""
        android:layout_weight="0" />    -->

</LinearLayout> 
```

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-11-03T10:45:09.910

只需穿上 onCreateView

```
if (view != null) {
        ViewGroup parent = (ViewGroup) view.getParent();
        if (parent != null)
            parent.removeView(view);
    }

view = inflater.inflate(R.layout.map, container, false); 
```**

# javascript - 为什么过滤器和分页不能一起工作

> ID：14565469
> 
> 赞同：1
> 
> 时间：2013-01-28T15:34:43.803
> 
> 标签：javascript, jquery

我有一个必须按页面过滤和显示结果的功能。准备好文件后，一切似乎都很好。这些项目由页面分隔。如果我单击复选框或日期，它会根据需要过滤元素，因此它也可以正常工作。但问题是当函数过滤项目时没有创建新的分页。例如：我有 28 个项目。它们显示 3 页 - 10 件/页。如果我过滤并且过滤结果是 12 项，则该功能不会制作 2 页：第一页 10 项，第二页 2 项……但一切都在第一页上，并且页数没有改变。这是我的代码：

[jsFiddle](http://jsbin.com/oqufun/2/edit)

我试图让“点击”功能像这样“直播”：

```
$('label.check, .calendar a').live('click', function(){
   //the code
}) 
```

但我不知道为什么它不工作并且正在刹车。

我也尝试替换这个`match`-es：

```
var pages = Math.ceil(match.length/page); 
```

和

```
match.slice(first_item, last_item).show(); 
```

，`$('.widget.left:visible')`但它仍然没有工作。

那么为什么`live`不工作呢？我认为如果确实如此，并且给我的比赛一个实时结果，其余的都会起作用，但是......有人可以帮忙吗？

编辑：我不知道，但我的 js 不在 jsfiddle 中运行。我已经尝试过 jsfiddle 和 jsbin 但仍然没有。抱歉，我不知道如何修复它，但代码肯定会运行。它是复制/粘贴的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:52:03.193

你说 ：

> 但一切都在第一页上，页数没有改变。

因为在你的 JSBin`$`中没有定义。这意味着未定义 JQuery，所有其他库也顺便说一句。

我快速添加了 JQuery 和 JQuery UI，它是第一次工作（例如，当我单击美国时）。在它似乎被冻结之后。由于我没有您的所有依赖项，因此我停止了调试。

[http://jsbin.com/oqufun/4/edit](http://jsbin.com/oqufun/4/edit)

# c++ - force FLTK to redraw without event Handles

> ID：14565470
> 
> 赞同：1
> 
> 时间：2013-01-28T15:34:48.800
> 
> 标签：c++, event-handling, redraw, fltk

I'm using Fltk to render openGL graphs. currently I'm debugging a global array which is sorted by a heapsort function. My purpose is to see after each swap of elements in the heapsort function a graphical swap of elements. but I don't want to catch an event from FLTK event_handle for every time i need to redraw after I swapped and waiting at breakpoint. (the heapsort function and the opengl render part are running in 2 different threads (if that doesn't has to go without saying)). So the first try I had was to use:

```
Fl::add_timeout(1.0, MyRedrawCallback, (void *)&myWindow);

Fl::run();

void MyRedrawCallback(void *myWindow)

{

    MyWindow *pMyWindow;

    pMyWindow = (MyWindow *) myWindow;
    pMyWindow->redraw();
    Fl::repeat_timeout(1.0, MyRedrawCallback, (void *)&pMyWindow);
} 
```

But every Time the callback is called the 2nd time i get an "Access violation reading"

I'm suggesting that FL::run starts a different thread so maybe the first time is still in same thread so the address of redraw is still usable but after that I'm in a different thread and the function at address is not that what I'm expecting?!

But I already took a different way because I wasn't sure i cant even use the timeout on this way. So i was looking for a way to get an event that's eq to "set amount of time passed" or "nothing is happening for..." but there isn't such a handle I'm right?

Finally is there a way to let FLTK execute commands even outside the eventloop? or is there another way to solve my problem?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T13:55:16.537

Please take a look at the following example, taken from here: [http://seriss.com/people/erco/fltk/#OpenGlInterp](http://seriss.com/people/erco/fltk/#OpenGlInterp)

```
#include <FL/Fl.H>
#include <FL/Fl_Gl_Window.H>
#include <FL/gl.h>
#include <math.h>

//
// Demonstrate interpolating shapes
// erco 06/10/05
//

class Playback : public Fl_Gl_Window {
    int frame;
    // Linear interpolation between two values based on 'frac' (0.0=a, 1.0=b)
    float Linterp(float frac, float a, float b) {
        return( a + ( frac * (b - a) ));
    }
    // Sinusoidal easein/easeout interpolation between two values based on 'frac' (0.0=a, 1.0=b)
    float SinInterp(float frac, float a, float b) {
        float pi = 3.14159;
        frac = (sin(pi/2 + frac*pi ) + 1.0 ) / 2.0;     // 0 ~ 1 -> 0 ~ 1
        return(Linterp(frac,a,b));
    }
    // DRAW SIMPLE SHAPE INTERPOLATION
    //     Interpolation is based on the current frame number
    //
    void DrawShape(int frame) {
        // Calculate a fraction that represents the frame# being shown
        float frac = ( frame % 48 ) / 48.0 * 2;
        if ( frac > 1.0 ) frac = 2.0-frac;      // saw tooth wave:  "/\/\/\"

        static float a_xy[9][2] = {
            { -.5, -1\. }, { 0.0, -.5 }, { -.5, -1\. }, { 0.0, -.5 },
            { 0.0, 0.0 },
            { 0.0, -.5 }, { +.5, -1\. }, { 0.0, -.5 }, { +.5, -1\. },
        };
        static float b_xy[9][2] = {
            { -.25, -1\. }, { -.50, -.75 }, { -.75, -1.0 }, { -.50, -.75 },
            { 0.0, 0.0 },
            { +.50, -.75 }, { +.75, -1.0 }, { +.50, -.75 }, { +.25, -1.0 }
        };
        // Linterp a and b to form new shape c
        float c_xy[9][2];
        for ( int i=0; i<9; i++ )
            for ( int xy=0; xy<2; xy++ )
                c_xy[i][xy] = SinInterp(frac, a_xy[i][xy], b_xy[i][xy]);
        // Draw shape
        glColor3f(1.0, 1.0, 1.0);
        glBegin(GL_LINE_STRIP);
        for ( int i=0; i<9; i++ )
            glVertex2f(c_xy[i][0], c_xy[i][1]);
        glEnd();
    }
    // DRAW THE WIDGET
    //    Each time we're called, assume
    //
    void draw() {
        if (!valid()) {
            valid(1);
            glLoadIdentity();
            glViewport(0,0,w(),h());
        }
        glClear(GL_COLOR_BUFFER_BIT);
        // Draw shape 4x, rotated at 90 degree positions
        glPushMatrix();
            DrawShape(frame); glRotatef(90.0, 0, 0, 1);
            DrawShape(frame); glRotatef(90.0, 0, 0, 1);
            DrawShape(frame); glRotatef(90.0, 0, 0, 1);
            DrawShape(frame);
        glPopMatrix();
        // Advance frame counter
        ++frame;
    }
    // 24 FPS TIMER CALLBACK
    //     Called 24x per second to redraw the widget
    //
    static void Timer_CB(void *userdata) {
        Playback *pb = (Playback*)userdata;
        pb->redraw();
        Fl::repeat_timeout(1.0/24.0, Timer_CB, userdata);
    }
public:
    // Constructor
    Playback(int X,int Y,int W,int H,const char*L=0) : Fl_Gl_Window(X,Y,W,H,L) {
        frame = 0;
        Fl::add_timeout(1.0/24.0, Timer_CB, (void*)this);       // 24fps timer
        end();
    }
};

int main() {
     Fl_Window win(500, 500);
     Playback  playback(10, 10, win.w()-20, win.h()-20);
     win.resizable(&playback);
     win.show();
     return(Fl::run());
} 
```

This example more/less does exactly what you want. Greg Ercolano has more FLTK examples on his web-site. I recommend taking a look at [http://seriss.com/people/erco/fltk/](http://seriss.com/people/erco/fltk/) .

# tridion - 更改富文本架构字段 Tridion 2009 中的文档类型

> ID：14565476
> 
> 赞同：7
> 
> 时间：2013-01-28T15:35:15.223
> 
> 标签：tridion, tridion2009

我是一名不时使用 Tridion 的前端开发人员（技术水平不是很高）。我正在寻找一种方法来更改 Tridion 2009 富文本模式字段中的文档类型，以允许我使用数据属性（用于工具提示弹出框）。目前富文本字段设置为严格或过渡。我需要将其设置为 HTML5（我知道这可以在 2011 年进行一些更改。我不确定有哪些更改。）就目前而言，默认情况下，在这些模式中的任何一种发布时，数据属性都会被删除。选择 HTML5 可纠正此问题。

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T16:03:42.817

2009 年的富文本字段不允许这一切。但是您可以使用模板在发布时转换字段。例如：您可以获取链接上的标题属性并将其转换为您选择的数据属性。我意识到这有点尴尬，但也许它会成功。

您可以使用 XSLT 介体在 C# 模板或 XSLT 中执行此操作。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T19:14:06.397

请您澄清一下“前端”开发。您是在编写 Tridion GUI 还是使用来自 Tridion 的内容编写 Web 应用程序？

如果是后者，您当然可以在 RTF 内容到达应用服务器之前使用 XPath 或 XSL 对其进行转换。

如果是前者，听起来像是升级到 2011 年了！:-)

# android - 微信Android SDK入门

> ID：14565479
> 
> 赞同：11
> 
> 时间：2013-01-28T15:35:21.420
> 
> 标签：android, sdk, wechat

我已经从微信网站下载了SDK示例：http: [//dev.wechat.com/document/gettingstart/android/](http://dev.wechat.com/document/gettingstart/android/)

我在三星 Galaxy Spica i5700 上使用了 Eclipse 和 ADT，目标平台为 Android 2.2。

问题是提供的demo应用程序只能启动微信，而其他所有的函数调用对微信应用程序没有任何影响。

我正在通过 Eclipse 进行调试，我看到对微信的 API 调用返回成功，但微信并没有真正响应演示应用程序的任何请求。例如，如果我想在“Moments”上分享文本或将图像发送到当前场景（聊天会话），什么都不会发生，但也不会发生错误。

有没有人让它工作这个演示应用程序？

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2014-07-22T07:41:11.400

添加调试密钥库后对我有用：将微信的调试密钥（在包根文件夹中找到）添加到（Window -> Preferences -> Android -> Build -> Custom debug keystore）然后清理并再次构建

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-06-17T06:14:41.527

我有同样的问题。

Mange 使用以下步骤解决它：

1.  重新添加 libammsdk.jar
2.  添加 proguard.cfg 与

    -keep class com.tencent.mm.sdk.openapi.WXMediaMessage { *;}

    -keep class com.tencent.mm.sdk.openapi.** 实现 com.tencent.mm.sdk.openapi.WXMediaMessage$IMediaObject {*;}

3.  将微信的调试密钥（在包根文件夹中找到）添加到（ Window -> Preferences -> Android -> Build -> Custom debug keystore ）

4.  您可能需要清理和构建甚至重新启动 Eclipse。

5.  （可选）运行应用程序，点击发送消息（跳转到发消息界面），然后获取令牌（获取微信访问令牌）

希望这会有所帮助。:)

*****将微信演示应用程序安装到手机后，请勿删除自定义调试密钥库中的调试密钥，因为其他应用程序由于签名不同而无法工作。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-30T15:01:04.907

现在我正在尝试做同样的事情。

看看这些链接（当我不小心点击[http://dev.wechat.com/document/](http://dev.wechat.com/document/)页面上的“分享时刻” - “入门 - iOS”时，我发现了第一个链接，是的，这非常不合逻辑）：

[http://dev.wechat.com/document/gettingstart/timeline/](http://dev.wechat.com/document/gettingstart/timeline/)

[http://dev.wechat.com/document/api/timeline/](http://dev.wechat.com/document/api/timeline/)

似乎那里描述的api可以在任何地方使用，不仅在iOS上，因为这只是http-requests。

希望它会帮助你和我:-)

# api - 如何使用 Asana API 获取用户图片？

> ID：14565482
> 
> 赞同：1
> 
> 时间：2013-01-28T15:35:29.500
> 
> 标签：api, asana

我正在尝试使用 Asana API 显示用户图片，但 /users/id 服务只返回 id、邮件、名称、工作区。我怎样才能？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T01:08:20.557

(I work at Asana, too)

We recently added the ability to fetch (but not change) the user's photo. Check out the [updated documentation](https://asana.com/developers/api-reference/users) (specifically the "photo" attribute of the user model is what you're looking for).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-05T23:29:29.363

在 API 提供对照片的访问之前，我们一直在使用的一个有用的解决方法是从 Asana 中获取用户的电子邮件地址，然后尝试从 Gravatar 中提取图片。显然，它要求用户在 Gravatar 注册，并且他们的图片可能与 Asana 中的不同……但对于许多情况来说已经足够了。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T17:04:42.623

（我在 Asana 工作）

API 目前不提供对用户个人资料照片的访问权限。这是我们正在考虑在未来添加的内容，但我无法提供时间表上的任何细节。

# javascript - 在 v8 中将函数模板添加到全局对象原型

> ID：14565483
> 
> 赞同：5
> 
> 时间：2013-01-28T15:35:41.860
> 
> 标签：javascript, c++, v8

在 V8 中，我想通过添加一些函数来修改全局内置 Array 对象的原型。在 JavaScript 中，我会这样做，例如：

```
Array.prototype.sum = function() { 
    // calculate sum of array values
}; 
```

如何在 C++ 中实现相同的结果？我在全局 ObjectTemplate 中添加了一些全局函数模板，但我不确定如何对假定存在的本机对象原型执行相同操作。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-01T13:43:30.500

本机实现：

```
Handle<Value> native_example(const Arguments& a) {
   return String::New("it works");
} 
```

* * *

分配给原型（请注意，由于某种原因，我们需要原型的原型）

```
Handle<Function> F = Handle<Function>::Cast(context->Global()->Get(String::New("Array")));
Handle<Object> P = Handle<Object>::Cast (F->GetPrototype());
P = Handle<Object>::Cast(P->GetPrototype());
P->Set(String::New("example"), FunctionTemplate::New(native_example)->GetFunction(), None); 
```

javascript用法：

```
var A = [1,2,3]
log("A.example= " + A.example)
log("A.example()= " + JSON.stringify(A.example())) 
```

# spring - 错误 mvn tomcat:run 但可以在 eclipse tomcat 中执行

> ID：14565484
> 
> 赞同：1
> 
> 时间：2013-01-28T15:35:43.717
> 
> 标签：spring, maven, tomcat, java-7

我有一个包含不同模块的 Maven 项目，如下所示：

*   我的项目
    *   测试库
    *   常见的
    *   客户
    *   公共服务器
    *   网络服务器

我可以在 Eclipse 的 tomcat 中执行 webserver 没有问题，我可以用 Maven 编译它没有问题但是当我尝试`mvn tomcat:run`webserver 模块时，它抱怨它没有找到一个共同定义的类：

```
SEVERE: Context initialization failed
java.lang.NoClassDefFoundError: com/myproject/core/MyException
    at java.lang.Class.getDeclaredConstructors0(Native Method)
    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2404)
    at java.lang.Class.getDeclaredConstructors(Class.java:1853)
    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.determineCandidateConstructors(AutowiredAnnotationBeanPostProcessor.java:229)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.determineConstructorsFromBeanPostProcessors(AbstractAutowireCapableBeanFactory.java:962)
    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:935) 
```

我在 pom 中设置了依赖项（它可以编译，所以我不知道发生了什么）。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:04:18.403

问题是我像这样从父文件夹运行

```
mvn -pl webserver tomcat:run 
```

如果我做

```
cd webserver
mvn tomcat:run 
```

然后它工作

# nsuserdefaults - 将布尔值保存到 AppWillTerminate 上的 NSdefaults 不起作用

> ID：14565489
> 
> 赞同：0
> 
> 时间：2013-01-28T15:35:58.937
> 
> 标签：nsuserdefaults

我试图在应用程序终止时注销用户（因为在这种特殊情况下，用户数据不会经常更改，进入后台时无需注销）。

所以这是我的代码：

```
 - (void)applicationWillTerminate:(UIApplication *)application
   {
        User *user = [[User alloc]init];
        [user logout];
   } 
```

我首先尝试像这样注销用户，但它没有用：

```
 - (void)applicationWillTerminate:(UIApplication *)application
  {
     [[NSUserDefaults standardUserDefaults] setBool:NO forKey:@"logged_in"];
  } 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:00:10.663

如果您希望立即更新默认值，则应在更新后同步：

```
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

如文档所述（khm，请查阅**文档**），`NSUserDefaults`该类不会立即将更改保存到磁盘，只是偶尔一次。

# google-analytics - 如何手动填充谷歌分析 UTM 变量

> ID：14565494
> 
> 赞同：0
> 
> 时间：2013-01-28T15:36:27.950
> 
> 标签：google-analytics

我希望能够手动设置 UTM 变量

因此，与其拥有一个网页

[http://mysite.net/index.html?utm_source=source&utm_medium=inbound&utm_campaign=campname](http://mysite.net/index.html?utm_source=source&utm_medium=inbound&utm_campaign=campname)

我希望能够用 javascript 设置这些。浏览文档我找不到这些的任何设置方法，只有设置键方法。

[https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCampaigns](https://developers.google.com/analytics/devguides/collection/gajs/gaTrackingCampaigns)

我也试过

```
_gaq.push(['_trackPageview', '/index.html?utm_source=source&utm_medium=inbound&utm_campaign=campname']); 
```

尽管据我所知这是行不通的。我现在可以看到让它工作的唯一方法是使用哈希值设置它们：

即： http: [//mysite.net/index.html#utm_source=In+House&utm_medium=email&utm_campaign=Fall+email+offers](http://mysite.net/index.html#utm_source=In+House&utm_medium=email&utm_campaign=Fall+email+offers)

```
_gaq.push(['_setAllowAnchor', true]); 
```

有没有更好的办法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:58:43.420

**编辑**

实际上，似乎[有一种方法可以](https://stackoverflow.com/questions/934119/track-campaigns-with-google-analytics-without-query-string-parameters/4082585#4082585)使用 GA 代码来做到这一点！

**上一个答案**

我过去也需要这样做，但我无法在页面上找到任何方法。我相信你能真正做到这一点的唯一方法是阅读 GA 的 __utmz cookie 并用你想要的值重写 cookie。

例子：

如果您访问 www.mysite.com 时没有 url 参数，这就是 __utmz 通常的样子（cookie 中的数字会有所不同）：

**网址：** [http ://www.mysite.com](http://www.mysite.com)

**__utmz cookie 值：** 97566023.1329384140.1.1.utmcsr=(direct)|utmccn=(direct)|utmcmd=(none)

如果您要使用 URL 中的值访问该 URL（这是官方的做法），则如下所示：

**网址：** [http ://mysite.net/index.html?utm_source=In+House&utm_medium=email&utm_campaign=Fall+email+offers](http://mysite.net/index.html?utm_source=In+House&utm_medium=email&utm_campaign=Fall+email+offers)

**__utmz cookie 值：** 97566023.1329384140.1.1.utmcsr=在家里|utmccn=秋季电子邮件优惠|utmcmd=电子邮件

并且 cookie 将在随后的页面查看中具有这些值，您将在请求 URL 中的 utmcc URL 参数中看到它们发送到 GA。所以基本上你可以将 __utmz cookie 更改为你想要的值。编写一个包装函数来轻松设置它可能会更方便。老实说，我不知道为什么 GA 不提供一种方法来使用烘焙的包装函数来做到这一点......

# java - 在 Java 中使用 dsnless 连接：如何在 jar 文件中获取 db 的 URL 以及如何将 db 放入 jar

> ID：14565497
> 
> 赞同：1
> 
> 时间：2013-01-28T15:36:36.893
> 
> 标签：java, jdbc, dsn, jdbc-odbc

我知道如何使用 dsnless 从 jar 文件中访问数据库，但我需要使用 dsnless 连接在 jar 文件中获取 db 的 url（我不知道这是否可能）。

我试过下面的代码

```
String a=getClass().getResourceAsStream("/homedei.mdb").toString();

Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection con = DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ="+a,"",""); 
```

还有这个

```
Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
Connection con = DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ="+ new File("homemedi.mdb").getAbsolutePath(),"",""); 
```

还有这个。

我在 youtube 中看到这个在 jar 文件中插入 img 文件并创建一个类文件，如下所示

```
import java.io.InputStream;
final public class ResourcesProvider 
{
    public static InputStream load(String path)
    {
        InputStream input=ResourcesProvider.class.getResourceAsStream(path);
        if(input==null)
        {
            input=ResourcesProvider.class.getResourceAsStream("/"+path);
        }
        return input;
    }
} 
```

并尝试

```
String a=ResourcesProvider.load("/homemedi.mdb").toString();

Class.forName("sun.jdbc.odbc.JdbcOdbcDriver");
 con = DriverManager.getConnection("jdbc:odbc:Driver={Microsoft Access Driver (*.mdb)};DBQ="+a,"",""); 
```

以上都出现在`NullPointerException`

我没有明确的想法`getSource()`或`getClass().getResourceAsStream()`

你也可以用儿童词解释吗？

我已经读过这个链接： [应用程序不会写入 MS DB](https://stackoverflow.com/questions/5404559/application-wont-write-to-ms-db)

我想知道如何将 db 的 url 转换为字符串或任何其他方法

谢谢

# java - Java Swing JList，无法设置最小宽度

> ID：14565501
> 
> 赞同：0
> 
> 时间：2013-01-28T15:36:42.837
> 
> 标签：java, swing, awt, layout-manager, jlist

尝试简单地创建一个具有指定可见行数但最小宽度的 JList。似乎“setMinimumSize()”什么也没做……

```
import java.awt.*;
import java.awt.event.*;
import javax.swing.*;

public class UserInterface 
{   
    final static private int HEIGHT = 400;
    final static private int WIDTH = 650;

    public static void main(String[] args) {

    JPanel content = new JPanel();

    String[] entries = { "Entry 1", "Entry 2", "Entry 3",
    "Entry 4", "Entry 5", "Entry 6" };

    DefaultListModel sampleModel = new DefaultListModel();

    for(int i=0; i<entries.length; i++)
        sampleModel.addElement(entries[i]);

    JList sampleList = new JList(sampleModel);

    sampleList.setMinimumSize(new Dimension(1000,1000));
    sampleList.setMaximumSize(new Dimension(1000,1000));

    content.add(sampleList);

    //main window frame
    JFrame window = new JFrame("NAD Assignment 1");
    window.setSize(WIDTH, HEIGHT);
    window.setContentPane(content);
    window.setLocationRelativeTo(null);
    window.setVisible(true);

    window.addWindowListener(new WindowAdapter()
    {
        public void windowClosing(WindowEvent e)
        {
            System.exit(0); 
        }
    });
}
} 
```

setPreferredSize() 似乎有效，但它覆盖了我在 setVisibleRowCount() 中设置的任何内容：

```
public static void main(String[] args) {

    JPanel content = new JPanel();

    String[] entries = { "Entry 1", "Entry 2", "Entry 3",
    "Entry 4", "Entry 5", "Entry 6" };

    DefaultListModel sampleModel = new DefaultListModel();

    for(int i=0; i<entries.length; i++)
        sampleModel.addElement(entries[i]);

    JList sampleList = new JList(sampleModel);

    sampleList.setPreferredSize(new Dimension(200,10));
    sampleList.setVisibleRowCount(8);

    content.add(sampleList);

    //main window frame
    JFrame window = new JFrame("NAD Assignment 1");
    window.setSize(WIDTH, HEIGHT);
    window.setContentPane(content);
    window.setLocationRelativeTo(null);
    window.setVisible(true);

    window.addWindowListener(new WindowAdapter()
    {
        public void windowClosing(WindowEvent e)
        {
            System.exit(0); 
        }
    });
} 
```

如何在我的 JList 上设置最小宽度并使用 setVisibleRowCount 指定高度？谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T17:13:27.613

您的代码有几处问题。

1.  **始终**使用 SwingUtilities 调用 Swing 应用程序。这可确保在事件调度线程 (EDT) 上创建和执行 Swing 组件。

2.  将数据创建与 GUI 创建分开。这使您可以一次专注于代码的一部分。此外，将您的代码放入类方法中，而不是尝试在 main 方法中编写所有内容。

3.  将您的应用程序分解成越来越小的部分，直到您可以不加思索地对每个部分进行编码。想法是分解您的应用程序。

4.  您**必须**使用 Swing 布局。我选择了`BorderLayout`，但另一种布局可能更适合您的需求。学习[Oracle 的布局管理器可视化指南，](http://docs.oracle.com/javase/tutorial/uiswing/layout/visual.html)直到您能够在睡梦中描述 Swing 布局管理器。

5.  最后，`JList`将其包含在`JScrollPane`.

.

```
import java.awt.BorderLayout;
import java.awt.Dimension;
import java.awt.event.WindowAdapter;
import java.awt.event.WindowEvent;

import javax.swing.DefaultListModel;
import javax.swing.JFrame;
import javax.swing.JList;
import javax.swing.JPanel;
import javax.swing.JScrollPane;
import javax.swing.SwingUtilities;

public class UserInterface implements Runnable {
    final static private int    HEIGHT  = 400;
    final static private int    WIDTH   = 650;

    private String[]            entries = { "Entry 1", "Entry 2", "Entry 3",
            "Entry 4", "Entry 5", "Entry 6" };

    private DefaultListModel    sampleModel;

    public UserInterface() {
        this.sampleModel = new DefaultListModel();
    }

    @Override
    public void run() {
        createPartControl();
    }

    protected void createPartControl() {
        JPanel content = new JPanel();
        content.setLayout(new BorderLayout());

        for (int i = 0; i < entries.length; i++) {
            sampleModel.addElement(entries[i]);
        }

        JList sampleList = new JList(sampleModel);
        sampleList.setMinimumSize(new Dimension(1000, 1000));
        sampleList.setMaximumSize(new Dimension(1000, 1000));

        JScrollPane scrollPane = new JScrollPane(sampleList);

        content.add(scrollPane, BorderLayout.CENTER);

        // main window frame
        JFrame window = new JFrame("NAD Assignment 1");
        window.setSize(WIDTH, HEIGHT);
        window.setContentPane(content);
        window.setLocationRelativeTo(null);
        window.setVisible(true);

        window.addWindowListener(new WindowAdapter() {
            public void windowClosing(WindowEvent e) {
                System.exit(0);
            }
        });

    }

    public static void main(String[] args) {
        SwingUtilities.invokeLater(new UserInterface());
    }

} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T20:40:51.090

```
// assuming Strings are being used:    
sampleList.setPrototypeCellValue("1234567890");  // or whatever 
```

请参阅：[JList.setPrototypeCellValue(Object)](http://docs.oracle.com/javase/6/docs/api/javax/swing/JList.html#setPrototypeCellValue%28java.lang.Object%29 "JList#setPrototypeCellValue(...)")

# javascript - 用 jQuery 做一些依赖于元素 id 的事情

> ID：14565510
> 
> 赞同：0
> 
> 时间：2013-01-28T15:36:55.833
> 
> 标签：javascript, jquery, click

我在点击动作中有一些功能。如果我的 html 列表元素的最后一个有一些 id，我需要停止这个函数，所以我这样做但函数不起作用......你能帮帮我吗？

```
carousel_controls_buttons.on('click', function(){
    var settings_list_last_element_id = settings_menu_element.attr('id') == 'r_00';
    if (settings_menu_element.last(id === settings_list_last_element_id)) {
    }
    else {
        renumNext();
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:40:22.863

尝试改变：

`if (settings_menu_element.last(id === settings_list_last_element_id))`

到

`if (settings_menu_element.last().attr('id') === settings_list_last_element_id)`

**编辑：**

```
if (settings_menu_element.last().attr('id') === settings_list_last_element_id){
    return false;
} else {
    renumNext();
} 
```

甚至更好：

```
if (settings_menu_element.last().attr('id') !== settings_list_last_element_id){
    renumNext();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:39:46.593

你的 if 语句看起来有点奇怪。尝试这样的事情：

```
carousel_controls_buttons.on('click', function(){

    // Do nothing if last element has a certain id-attribute
    if (settings_menu_element.last().attr("id") === 'r_00') {
        return false;
    }

    renumNext();
}); 
```

# ios - 粒子引擎在设备上比在模拟器上慢得多

> ID：14565518
> 
> 赞同：1
> 
> 时间：2013-01-28T15:37:29.347
> 
> 标签：ios, ipad, opengl-es, opengl-es-2.0

我已经为 iPad 游戏实现了粒子引擎。在 iPad Simulator 上，我获得了非常好的帧速率，粒子 > 500 个（远远超过我的需要）。然而，在 iPad 本身上，我得到了完全不同的结果。只有 10 个粒子（我需要更多的粒子）我只能得到一个非常差的帧速率......

作为基础，我采用本教程来实现我的粒子发射器类：[http](http://www.71squared.com/en/article/806/iphone-game-programming-tutorial-8-particle-emitter) ://www.71squared.com/en/article/806/iphone-game-programming-tutorial-8-particle-emitter （使用 OpenGL ES 1 )

因为我使用的是OpenGL ES 2.0，所以我写了自己的渲染方法：

```
- (void) renderParticles:(RenderMode)renderMode ofParticleEmitter:(ParticleEmitter*)particleEmitter xOffset:(int)xoffset yOffset:(int)yoffset
{

PointSprite *vertices = [particleEmitter getVertices];

for (int p = 0; p < particleEmitter.particleCount; p++) {

    CC3GLMatrix *modelView = [CC3GLMatrix matrix];
    // Translate the Modelviewmatrix
    [modelView populateFromTranslation:CC3VectorMake(_cameraX, _cameraY, -5.0)];

    [modelView translateByX:vertices[p].x + xoffset];
    [modelView translateByY:vertices[p].y + yoffset];
    [modelView translateByZ:101.0];  

    [modelView scaleByX:2.0];
    [modelView scaleByY:2.0];

    glUniformMatrix4fv(_modelViewUniformT, 1, 0, modelView.glMatrix);

    glBindTexture(GL_TEXTURE_2D, [particleEmitter getTexture]);

    // Create and Bind a rectangular VBO
    [self calcCharacterVBOwithCols:1 rows:1 currentCol:1 currentRow:1];    

    glVertexAttribPointer(_positionSlotT, 3, GL_FLOAT, GL_FALSE, sizeof(Vertex), (GLvoid*) 0);
    glEnableVertexAttribArray(_positionSlotT);

    // Fragment Shader value
    float opacity = 1.0;
    glUniform1f(_opacity, opacity);

    // Normal render, add Texture coordinates

    // Activate Texturing Pipeline and Bind Texture
    glVertexAttribPointer(_texCoordSlot, 2, GL_FLOAT, GL_FALSE, sizeof(Vertex), (GLvoid*) (sizeof(float) * 3));
    glEnableVertexAttribArray(_texCoordSlot);

    glDrawElements(GL_TRIANGLES, sizeof(IndicesLayer)/sizeof(IndicesLayer[0]), GL_UNSIGNED_BYTE, 0);

    glDisableVertexAttribArray(_texCoordSlot);
    glDisableVertexAttribArray(_positionSlotT);

    [self destroyCharacterVBO];
}
} 
```

我错过了关于粒子的一些要点吗？我怎样才能更好地在设备上获得更好的帧速率？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:10:09.947

问题似乎是为每个粒子一次又一次地分配粒子纹理，即使它们都使用相同的纹理。

所以通过绑定纹理

```
glBindTexture(GL_TEXTURE_2D, [particleEmitter getTexture]); 
```

在循环遍历所有粒子之前，我得到了与模拟器相当的更快的帧速率。

# css - 使用 CSS 进行背景模糊

> ID：14565520
> 
> 赞同：47
> 
> 时间：2013-01-28T15:37:52.057
> 
> 标签：css, popup, aero-glass

我希望在我的网站上的弹出窗口上具有**Vista/7-aero-glass 风格的效果**，并且它需要是动态的。只要该站点仍然*可以*在所有现代浏览器上运行，我就可以接受这不是跨浏览器的效果。

我的第一次尝试是使用类似的东西

```
#dialog_base {
  background:white;
  background:rgba(255,255,255,0.8);

  filter:blur(4px);
  -o-filter:blur(4px);
  -ms-filter:blur(4px);
  -moz-filter:blur(4px);
  -webkit-filter:blur(4px);
} 
```

然而，正如我所预料的那样，**这导致对话的*内容***变得模糊而背景保持清晰。**有没有办法使用 CSS 来模糊半透明元素的背景而不是其内容？**

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-05-13T13:18:42.543

**华侨城。2016 更新**

由于`-moz-element()`除 FF 之外的其他浏览器似乎不广泛支持该属性，因此有一种更简单的技术可以在不影响容器内容的情况下应用模糊。在这种情况下，与 svg 模糊滤镜结合使用伪元素是理想的选择。

**[使用伪元素检查演示](http://jsfiddle.net/otinanaipali/bwx1d977/)**

*（演示在 FF v49、Chrome v53、Opera 40 中进行了测试 - IE 似乎不支持使用 css 或 svg 过滤器进行模糊）*

* * *

（到目前为止）在没有 js 插件的情况下在后台产生模糊效果的唯一方法是将`-moz-element()`属性与`svg`模糊过滤器结合使用。您可以将`-moz-element()`一个元素定义为另一个元素的背景图像。然后应用`svg`模糊滤镜。可选：如果您的背景`fixed`就位，您可以使用一些 jQuery 进行滚动。

[**在这里查看我的演示**](http://jsfiddle.net/otinanaipali/cJvPH/)

我知道这是一个相当复杂的解决方案，并且仅限于 FF（`element()`目前仅适用于 Mozilla 的`-moz-element()`属性），但至少过去在 webkit 浏览器中实现了[一些努力](https://bugs.webkit.org/show_bug.cgi?id=44650)，并希望它会[在未来](http://code.google.com/p/chromium/issues/detail?id=108972)实现。

* * *

## 回答 #2

> 赞同：25
> 
> 时间：2015-08-24T16:19:56.630

在主要浏览器的最新版本中，您可以使用背景过滤器属性。

**HTML**

```
<div>backdrop blur</div> 
```

**CSS**

```
div {
    -webkit-backdrop-filter: blur(10px);
    backdrop-filter: blur(10px);
} 
```

或者如果您需要不支持的浏览器的不同背景颜色：

```
div {
    background-color: rgba(255, 255, 255, 0.9);
}

@supports (-webkit-backdrop-filter: none) or (backdrop-filter: none) {
    div {
        -webkit-backdrop-filter: blur(10px);
        backdrop-filter: blur(10px);
        background-color: rgba(255, 255, 255, 0.5);  
    }
} 
```

演示：[JSFiddle](http://jsfiddle.net/bdq81u9c)

文档：[Mozilla 开发者：背景过滤器](https://developer.mozilla.org/en-US/docs/Web/CSS/backdrop-filter)

是给我的吗？：[CanIUse](https://caniuse.com/#feat=css-backdrop-filter)

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-09-02T18:28:07.757

您可以使用伪元素来定位内容的背景，使用与背景相同的图像，但使用新的 CSS3 过滤器进行模糊处理。

你可以在这里看到它的作用：http: [//codepen.io/jiserra/pen/JzKpx](http://codepen.io/jiserra/pen/JzKpx)

我这样做是为了自定义选择，但我添加了模糊背景效果。

* * *

## 回答 #4

> 赞同：8
> 
> 时间：2013-01-28T17:03:19.310

使用 2 个背景图像是一种简单且非常常见的技术：一个清晰的和一个模糊的。您将清晰的图像设置为主体的背景，将模糊的图像设置为容器的背景图像。模糊图像必须设置为固定定位，并且对齐是 100% 完美的。我以前用过它，它工作。

```
body {
    background: url(yourCrispImage.jpg) no-repeat;
}

#container {
    background: url(yourBlurryImage.jpg) no-repeat fixed;
} 
```

您可以在以下小提琴中看到一个工作示例：http: **[//jsfiddle.net/jTUjT/5/](http://jsfiddle.net/jTUjT/5/)**。尝试调整浏览器大小并确保对齐永远不会失败。

* * *

`element()`如果Mozilla 以外的其他浏览器仅支持 CSS ，`-moz-element()`您可以创建出色的效果。[**使用 Mozilla**](http://jsfiddle.net/3z6ns/)观看此演示。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-04-28T15:06:17.293

使用为内容调整大小的空元素作为背景，并将内容放置在模糊元素上。

```
#dialog_base{
  background:white;
  background:rgba(255,255,255,0.8);

  position: absolute;
  top: 40%;
  left: 50%;
  z-index: 50;
  margin-left: -200px;
  height: 200px;
  width: 400px;

  filter:blur(4px);
  -o-filter:blur(4px);
  -ms-filter:blur(4px);
  -moz-filter:blur(4px);
  -webkit-filter:blur(4px);
}

#dialog_content{
  background: transparent;
  position: absolute;
  top: 40%;
  left: 50%;
  margin-left -200px;
  overflow: hidden;
  z-index: 51;
} 
```

背景元素可以在内容元素内部，但不能相反。

```
<div id='dialog_base'></div>
<div id='dialog_content'>
    Some Content
    <!-- Alternatively with z-index: <div id='dialog_base'></div> -->
</div> 
```

如果内容的大小并不总是一致，这并不容易，但它确实有效。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2013-07-24T01:37:55.660

你可以通过 iframe 来实现它......我做了一些东西，但我现在唯一的问题是同步这些 div 以同时滚动......这很糟糕，因为它就像你加载 2 个网站，但我发现的唯一方法......我猜你也可以使用 div 和溢出...

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2013-12-15T02:59:21.927

您希望它以哪种方式动态？如果想让弹窗成功映射到背景，则需要创建两个背景。它需要使用`element()`or`-moz-element()`和过滤器（对于 Firefox，使用 SVG 过滤器，`filter: url(#svgBlur)`因为 Firefox 还不支持`-moz-filter: blur()`？）。在撰写本文时，它仅适用于 Firefox。

**[在此处查看演示。](http://css-class.com/test/css/3/image/blurred-diffused-backdrop-overflow.htm)**

我仍然需要创建一个简单的演示来展示它是如何完成的。欢迎您查看源代码。

# sql - 基于另一个表列创建计算列

> ID：14565522
> 
> 赞同：0
> 
> 时间：2013-01-28T15:38:04.763
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2012

`Title nvarchar(max)`如何根据另一个表的列创建计算列？

我想`Title`在表 1 中创建一个基于 table2 的计算列`docId = DocId`。我一直在尝试将其添加为 SSMS 中的计算列，但它不会让我这样做。

表格1

```
AssetId  Title   DocId
======================== 
```

表2

```
DocId  Title      
=========================
5      Disaster       
10     Recovery        
15     Pending 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:41:22.580

计算列的定义明确指出这些列必须在同一个表中（[此处](http://msdn.microsoft.com/en-us/library/ms174979%28v=sql.105%29.aspx)）。

你可能想要的是一个视图。

```
create view vw_table1 as
    select t.AssetId, d.Title, t.docid
    from table1 t left outer join
         table2 d
         on t.docid = d.docid 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:43:31.087

您不能使用另一个表列创建计算列。但是您可以将表 1 定义为 AssetId、DocId 并根据需要创建视图。

```
CREATE VIEW YouVIEW
AS
SELECT T1.AssetId, T1.DocId, T2.Title
FROM Table1 T1
    JOIN Table2 T2
       ON T1.DocId = T2.DocId 
```

这是参数化的内联函数

```
CREATE FUNCTION dbo.GetValue (@DocId INT)
RETURNS TABLE
AS
RETURN
    (SELECT T1.AssetId, T1.DocId, T2.Title 
     FROM Table1 T1 
        JOIN Table2 T2 
           ON T1.DocId = T2.DocId 
     WHERE T1.DocID = @DocId
    )
GO 
```

# java - JavaMail - 获取正文文本的第一部分返回 null

> ID：14565525
> 
> 赞同：0
> 
> 时间：2013-01-28T15:38:10.973
> 
> 标签：java, null, jakarta-mail, multipart, mime-message

我编写了一个方法，可以递归地将消息的多个`BodyPart`'s 的内容添加`Multipart`到字符串中。我不知道为什么，但字符串中的第一个短语是`null`- 为什么？

代码：

```
protected void dumpPart(Part p, Email email) throws MessagingException, IOException
    {
        if (p.isMimeType("text/plain"))
        {
            if (!p.getContent().toString().equals(null))
                email.setBody((String)p.getContent());
        }
        else if (p.isMimeType("multipart/*"))
        {
            Multipart mp = (Multipart)p.getContent();

            for (int x = 0; x < mp.getCount(); x++)
            {
                dumpPart(mp.getBodyPart(x), email);
            }
        }
    } 
```

输出：

```
nullWe did not answer protests to our Order 637 filing... 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:53:42.887

“p.getContent().toString().equals(null)” 总是为假。

email.setBody 是做什么的？

# c# - 从 C#.Net 2010 调用 VB6 函数

> ID：14565527
> 
> 赞同：-1
> 
> 时间：2013-01-28T15:38:23.503
> 
> 标签：c#, vb6, pinvoke

我想从 C# PInvoke 用 VB6 编写的函数。我们可以像这样在VB6中调用这个函数：

```
Declare Function ApplyNNet Lib " location of the DLL file" (MyNNetType As String, MyAddress As String, MyInput() As Double) As Variant 
```

我在 C# 中的代码是：

```
[DllImport("NNetApply.dll", EntryPoint = "ApplyNNet", CallingConvention = CallingConvention.StdCall)] 
public static extern IntPtr ApplyNNet(string type, string add, double[,] data);
//run ANN with data
string address = @"C:\Users\PNGE-User\Desktop\Faegheh\Project\Neural Network For Pressure Vs q,x,y\P ve x,y,q\P ve x,y,q";
        double[,] P = new double[no_data,2];
        var P_ = ApplyNNet("Back Prop", address, data); 
```

当我调试我的代码时，会出现一个错误：

> 尝试读取或写入受保护的内存。这通常表明其他内存已损坏。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T16:32:16.563

首先，我假设 DLL 实际上不是用 VB6 编写的。`Declare`您显示用于调用该函数的代码的事实与此相矛盾。所以我假设 DLL 是用其他语言（例如 C++）编写的，并且您当前正在从 VB6 调用 DLL。

调用 DLL 的 VB6 代码声明如下：

```
Declare Function ApplyNNet Lib "DLLFileName" (MyNNetType As String,
    MyAddress As String, MyInput() As Double) As Variant 
```

您的 C# 版本如下所示：

```
[DllImport("NNetApply.dll", EntryPoint = "ApplyNNet", 
    CallingConvention = CallingConvention.StdCall)] 
public static extern IntPtr ApplyNNet(string type, string add, double[,] data); 
```

有两个明显的区别：

1.  第三个参数不匹配。而不是`double[,]`你需要`double[]`.
2.  返回值不匹配。VB6 变体无法与`IntPtr`. 您需要在 C# 代码中将返回值声明为类型`object`。

所以pinvoke应该是：

```
[DllImport("NNetApply.dll")] 
public static extern object ApplyNNet(string type, string add, double[] data); 
```

**更新**

使用此声明，您会收到 pinvoke 错误：

> PInvoke 限制：不能返回变体。

我不确定您如何在 pinvoke 中解决此问题。在您的情况下，我想我会创建一个 VB6 项目来包装 DLL 并将其公开为 COM 接口。然后，我将向您的 C# 项目添加 COM 引用并继续。

# visual-studio-2012 - Visual Studio 需要对此项目进行非功能性更改

> ID：14565528
> 
> 赞同：22
> 
> 时间：2013-01-28T15:38:31.773
> 
> 标签：visual-studio-2012, visual-studio-2010

我用 VS 2012 打开了一个在 VS 2010 SP 中创建的 C# 项目。一个单向转换窗口出现在我继续转换的地方。

完成后，我收到以下警告：

> Visual Studio 需要对此项目进行非功能性更改，以使项目能够在此版本和 Visual Studio 2010 SP1 中打开，而不会影响项目行为。

...但它没有说明*哪些*非功能性变化。有人可以给我线索吗？

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-08-21T16:03:09.377

我不确定为什么会发生这种情况，但我发现在 VS2012 中首次打开 VS2010 SharePoint 2010 项目以及其他更改后，将以下节点添加到 .csproj 文件中：

```
<ProjectMode>SharePointCustomization</ProjectMode>
<TargetOfficeVersion>15.0</TargetOfficeVersion>
<FileUpgradeFlags>0</FileUpgradeFlags>
<UpgradeBackupLocation>blah\blah\blah</UpgradeBackupLocation>
<OldToolsVersion>4.0</OldToolsVersion> 
```

我发现如果我手动编辑csproj文件并在下次打开项目时删除了以下三个节点没有打开升级日志并且问题得到解决：

```
<FileUpgradeFlags>0</FileUpgradeFlags>
<UpgradeBackupLocation>blah\blah\blah</UpgradeBackupLocation>
<OldToolsVersion>4.0</OldToolsVersion> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-01-10T14:36:31.507

删除 .csproj 文件中节点“FileUpgradeFlags”、“OldToolsVersion”的内容可以解决问题。

```
<FileUpgradeFlags></FileUpgradeFlags>
<OldToolsVersion></OldToolsVersion> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-26T15:39:07.217

如果您查看 .csproj 文件，您将看到：

```
< Import Project="$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props"     

 Condition="Exists('$(MSBuildExtensionsPath)\$(MSBuildToolsVersion)\Microsoft.Common.props')" /> 
```

和

```
< OldToolsVersion>4.0< /OldToolsVersion> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-11-28T11:49:59.560

将此行从**True**更改为**False**

```
<SaveServerSettingsInUserFile>True</SaveServerSettingsInUserFile>

<SaveServerSettingsInUserFile>False</SaveServerSettingsInUserFile> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-09-29T03:11:49.270

在我们的例子中，删除触发升级的项目文件中的以下 2 个设置元素可以解决问题：

*Project/PropertyGroup*的子元素：

```
<ProductVersion>8.0.50727</ProductVersion> 
```

*项目*的子元素：

```
<Import Project="$(MSBuildExtensionsPath32)\Microsoft\VisualStudio\WCF\Microsoft.VisualStudio.ServiceModel.targets" /> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2017-05-14T13:08:29.883

通过打开 .csproj 文件并更改它，我在一个大型多项目中解决了 VS2013 中的问题

```
<FileUpgradeFlags>
</FileUpgradeFlags> 
```

像这样

```
<FileUpgradeFlags></FileUpgradeFlags> 
```

# flash - 将非 Adob e swf 文件导入 flash builder - actionscript

> ID：14565533
> 
> 赞同：0
> 
> 时间：2013-01-28T15:38:55.010
> 
> 标签：flash, actionscript, air, flash-builder

我正在做一个 ActionScript 移动项目。

有没有办法将非 Adob​​e swf 文件导入 Flash Builder？

我试过这个：

[Flash builder 中的外部 swf](https://stackoverflow.com/questions/7842480/a-an-external-swf-in-flash-builder)

但我收到错误：“找不到类型或不是编译时常量：MySwfMyg。”

是不是因为我使用的是非 Adob​​e 文件——比如 Vectorian Giotto？

谢谢

# jquery - 回调动画 jquery ui 删除元素

> ID：14565536
> 
> 赞同：0
> 
> 时间：2013-01-28T15:39:00.230
> 
> 标签：jquery, jquery-ui, draggable, jquery-ui-draggable

我正在尝试使用 jQuery UI 拖放 div 后对其进行动画处理。我正在使用 jQuery UI docs () 中的“停止”事件。

但是，我真的很难让已经放下的对象能够对其进行动画处理。这是我目前所处的位置，尽管我尝试了几件似乎不起作用的事情：

```
 $('.item').draggable({
            stop: function (event, ui) {
                $(ui.draggable).animate({ bottom: 0 }, { duration: 1000, easing: 'easeOutBounce' });
            }
        }); 
```

这是使用 jQuery 1.9.0 和 jQuery UI 1.10.0。

我确信这一定很简单——我就是无法让它工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:53:43.437

两个问题，这里是固定代码：

```
 $('.item').draggable({
            stop: function (event, ui) {
                $(this).animate({ "top": "0px" }, { duration: 1000, easing: 'easeOutBounce' });
            }
        }); 
```

首先 - ui.draggable 实际上并没有选择任何东西，而是返回未定义。更改为`this`影响拖动的元素。

此外，jQuery 没有读取 CSS 属性`bottom`。你必须以某种方式使用`top`才能达到你想要的效果。以同样的方式，`left`会工作，但`right`不会。

小提琴：http: [//jsfiddle.net/klatzkaj/kjtD8/](http://jsfiddle.net/klatzkaj/kjtD8/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:50:51.540

更改`ui.draggable`（这没什么）`this`，它会影响拖动的 div。请注意，根据您的布局，动画可能不会出现，但我可以让它与此一起使用：

[http://jsfiddle.net/T4UDp/](http://jsfiddle.net/T4UDp/)

由于可拖动本身发生变化`top`，`bottom: 0`因此单独不起作用。

# c++ - Boost：反序列化通过 ZeroMQ 拉式套接字传递的自定义 C++ 对象

> ID：14565538
> 
> 赞同：1
> 
> 时间：2013-01-28T15:39:06.917
> 
> 标签：c++, boost, zeromq, boost-serialization

我在这里写的文字是我之前在 Boost 的另一个线程中打开的后续问题[：序列化/反序列化通过 ZeroMQ 拉式套接字传递的自定义 C++ 对象](https://stackoverflow.com/questions/14480161/boost-serializing-de-serializing-a-custom-c-object-passed-over-zeromq-pull-so)。早期线程中的编译问题已通过使用 textarchive 类型而不是 binaryarchive 解决，但现在我在反序列化时遇到运行时问题。为方便起见，我在这里用一个新的问题陈述重复前面的文本。我对 C++ 领域相对较新，并感谢任何进一步的帮助。

**描述：**

我有一个名为**GenericMessage**的 C++ 类，它只包含一个 id 和数据作为其成员（参见下面的代码片段 2 - GenericMessage.hxx）。我的意图是序列化这个类的一个实例，并通过实现推送模式的 ZeroMQ 套接字发送它。

序列化和发送任务已在**ZMQHandler 类（参见 sendToBE 函数）中实现，该类位于下面****代码片段 3**所示的头文件名 ZMQHandler.hxx 中。此类由下面第四个**代码片段**中所示的**TestFE.cxx**实例化。

 **GenericMessage 实例的接收和反序列化在**TestBE.cxx**中实现， 可在下面的**第 5 个代码片段**中找到。我的意图是通过 ZMQ 套接字（即拉套接字）接收 GenericMessage 实例，对其进行反序列化，然后将其成员打印到标准输出。

**问题陈述：**

当我运行接收器（即 TestBE.cxx）时，我在这里验证了我可以通过 ZMQ 套接字将数据从 TestFE.cxx 传输到 TEstBE.cxx。但是，当我尝试反序列化 TestBE.cxx 中第 28 行的输入存档时，我得到了下面第一个代码片段中显示的异常（请参见下面的第 5 个代码片段，第 28 行已被标记）。

在代码片段 5 中的 TestBE.cxx 中实现的这个反序列化过程中是否缺少一些东西？为什么你认为我得到这个例外？可能是我在 ZMQHandler.cxx 中实现的序列化过程中缺少 st（代码片段 3 - 函数 sendToBE）。提前致谢。

**代码片段 1 GDB 输出和回溯**

```
$ gdb TestBE 
GNU gdb (GDB) 7.5-ubuntu
.....
(gdb) r
 Starting program: /TestBE 
 [Thread debugging using libthread_db enabled]
 Using host libthread_db library "/lib/i386-linux-gnu/libthread_db.so.1".
 [New Thread 0xb7c12b40 (LWP 16644)]
 [New Thread 0xb7411b40 (LWP 16645)]
 Connecting to FE... 
```

**！！！！！！！！！！！！！！！！！！！！！这里开始！！！！！！！！！！！！！！！！！！！！！！！！！！！**

```
 **CHAR [22 serialization::archive 9 0 1 0
 0 1 12 Hello there!]
 terminate called after throwing an instance of 'std::logic_error'
 what():  basic_string::_S_construct null not valid** 
```

**！！！！！！！！！！！！！！！！！！！！！！！！这里结束！！！！！！！！！！！！！！！！！！！！！！！！！！！**

```
 Program received signal SIGABRT, Aborted.
 0xb7fdd424 in __kernel_vsyscall ()
 (gdb) bt
 #0  0xb7fdd424 in __kernel_vsyscall ()
 #1  0xb7c7a1df in raise () from /lib/i386-linux-gnu/libc.so.6
 #2  0xb7c7d825 in abort () from /lib/i386-linux-gnu/libc.so.6
 #3  0xb7e608ad in __gnu_cxx::__verbose_terminate_handler() () from /usr/lib/i386-  linux-gnu/libstdc++.so.6
 #4  0xb7e5e4f3 in ?? () from /usr/lib/i386-linux-gnu/libstdc++.so.6
 #5  0xb7e5e52f in std::terminate() () from /usr/lib/i386-linux-gnu/libstdc++.so.6
 #6  0xb7e5e825 in __cxa_rethrow () from /usr/lib/i386-linux-gnu/libstdc++.so.6
 #7  0x0804c1d4 in    boost::archive::detail::pointer_iserializer<boost::archive::text_iarchive,    GenericMessage<std::string> >::load_object_ptr (this=0x8054444, ar=..., 
 x=@0x805cb40: 0x805cb50, file_version=0) at    /usr/include/boost/archive/detail/iserializer.hpp:327
 #8  0xb7f3839d in boost::archive::detail::basic_iarchive::load_pointer(void*&,  boost::archive::detail::basic_pointer_iserializer const*,  boost::archive::detail::basic_pointer_iserializer const* (*) (boost::serialization::extended_type_info const&)) () from  /usr/lib/libboost_serialization.so.1.49.0
 #9  0x0804bea9 in    boost::archive::detail::load_pointer_type<boost::archive::text_iarchive>::invoke<GenericMes     sage<std::string>*> (ar=..., t=@0xbfffef70: 0xbfffeff8)
 at /usr/include/boost/archive/detail/iserializer.hpp:524
 #10 0x0804be55 in boost::archive::load<boost::archive::text_iarchive,                                  GenericMessage<std::string>*> (ar=..., t=@0xbfffef70: 0xbfffeff8)
 at /usr/include/boost/archive/detail/iserializer.hpp:592
 #11 0x0804be36 in   boost::archive::detail::common_iarchive<boost::archive::text_iarchive>::load_override<Gener icMessage<std::string>*> (this=0xbfffef84, t=@0xbfffef70: 0xbfffeff8)
  at /usr/include/boost/archive/detail/common_iarchive.hpp:66
 #12 0x0804be14 in  boost::archive::basic_text_iarchive<boost::archive::text_iarchive>::load_override<GenericMe ssage<std::string>*> (this=0xbfffef84, t=@0xbfffef70: 0xbfffeff8)
  at /usr/include/boost/archive/basic_text_iarchive.hpp:65
 #13 0x0804bdf2 in boost::archive::text_iarchive_impl<boost::archive::text_iarchive>::load_override<GenericMes sage<std::string>*> (this=0xbfffef84, t=@0xbfffef70: 0xbfffeff8)
  at /usr/include/boost/archive/text_iarchive.hpp:82
 #14 0x0804bcec in      boost::archive::detail::interface_iarchive<boost::archive::text_iarchive>::operator>> <GenericMessage<std::string>*> (this=0xbfffef84, t=@0xbfffef70: 0xbfffeff8)
 at /usr/include/boost/archive/detail/interface_iarchive.hpp:60
 #15 0x0804b2a1 in main () at TestBE.cxx:28 
```

**代码片段 2 (GenericMessage.hxx)**

```
#include <iostream>
#include <string>
#include <sstream>
#include <boost/serialization/serialization.hpp>
#include <boost/archive/text_oarchive.hpp>
#include <boost/archive/text_iarchive.hpp>

template <class T>
class GenericMessage {
public:
  GenericMessage(): 
    beId(-1), 
    data(NULL)
  {}

  GenericMessage(int id, T msg): 
    beId(id), 
    data(msg)
  {}

  ~GenericMessage(){}

  T getData()
  {
    return data;
  }

  std::string toString()
  {
     std::ostringstream ss;
     ss << getBeId();
     std::string ret =  ss.str();

    return ret;
  }

  void setBeId(int id)
  {
    beId = id;
  }

  int getBeId()
  {
    return beId;
  }

  private:
      friend class boost::serialization::access;

  int beId;
  T data;

  template <class Archive>
  void serialize(Archive & ar, const unsigned int version)
  {
      ar & beId;
      ar & data;
  }

 }; 
```

**代码片段 3 (ZmqHandler.hxx)**

```
#include "zmq.hpp"
#include "GenericMessage.hxx"
#include <unistd.h>
#include <cassert>

template <class A>
class ZmqHandler {
public:

ZmqHandler():
mContext(1),
mOutbHandlerSocket(mContext, ZMQ_PUSH)
{    
    mOutbHandlerSocket.bind ("tcp://*:5555");       
}

~ZmqHandler() {}

void sendToBE(GenericMessage<A> *theMsg)
{
   std::ostringstream archive_stream;
   boost::archive::text_oarchive archive(archive_stream);

   try
   {
     archive << theMsg;
   } catch (boost::archive::archive_exception& ex) {
      std::cout << "Archive Exception during deserializing:" << std::endl;
      std::cout << ex.what() << std::endl;           
   } catch (int e) {
       std::cout << "EXCEPTION " << e << std::endl; 
   }

   std::string outbound_data_ = archive_stream.str();
   const char * buf = outbound_data_.c_str();    
   int len = strlen((const char*)buf);
   std::cout << "LENGTH [" << len << "]" << std::endl;

   zmq::message_t msgToSend(len);

   memcpy ((char *) msgToSend.data(), buf, len);

   if(memcmp((char *) msgToSend.data(), buf, len) != 0)
   {
     std::cout << "memcpy error!" << std::endl;
   }

   mOutbHandlerSocket.send(msgToSend);
   std::cout << "SENT request: [" << theMsg->toString() << "]" << std::endl;
 }   

  private:  
     zmq::context_t mContext;
     zmq::socket_t mOutbHandlerSocket;         
 }; 
```

**代码片段 4 (TestFE.cxx)**

```
 #include "ZmqHandler.hxx"

  int main ()
  {
     ZmqHandler<std::string> zmqHandler;
     int counter = 1;

     while(1)
     {  
        std::string data = "Hello there!\0";
        GenericMessage<std::string> msg(counter, data);
        zmqHandler.sendToBE(&msg);
        counter++;
       sleep(1);
      }

    return 0;
 } 
```

**代码片段 5 (TestBE.cxx)**

```
 #include "zmq.hpp"
 #include "GenericMessage.hxx"
 #include <fstream>

 int main ()
 {
    //  Prepare our context and socket
    zmq::context_t context (1);
    zmq::socket_t socket (context, ZMQ_PULL);

    std::cout << "Connecting to FE..." << std::endl;
    socket.connect ("tcp://localhost:5555");

    while(1){
       zmq::message_t reply;
       socket.recv (&reply);

       const char *buf = static_cast<const char*>(reply.data());
       std::cout << "CHAR [" << buf << "]" << std::endl;

       std::string input_data_(buf); 
       std::istringstream archive_stream(input_data_);
       boost::archive::text_iarchive archive(archive_stream);
       GenericMessage<std::string> *theMsg;

       try
       {
       /* !!!!!!!!!! LINE 28 is the following !!!!!!!!!!*/
         archive >> theMsg;
       } catch (boost::archive::archive_exception& ex) {
          std::cout << "Archive Exception during deserializing:" << std::endl;
          std::cout << ex.what() << std::endl;           
       } catch (int e) {
          std::cout << "EXCEPTION " << e << std::endl; 
       }

       std::cout << "ID" << theMsg->getBeId() << std::endl; 
       std::cout << "Data" << theMsg->getData() << std::endl; 

     }

    return 0;
   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:39:25.810

您声明`theMsg`为指针 ( `GenericMessage<std::string> *theMsg;`)。

尝试将该行更改为`GenericMessage<std::string> theMsg;`.`

**你的异常的真正来源**

在`GenericMessage`默认构造函数中，您`data`使用`NULL`. 但是，不允许`std::string`使用`NULL`指针初始化 a。不要`data`在默认构造函数中初始化您的成员。

```
GenericMessage()
: beId(-1) 
{} 
```

只要您的类型`T`具有默认构造函数，编译器就会在生成模板时处理其初始化。

**（希望）有用的提示＃1**

a 中的数据缓冲区`zmq::message_t`（通常）不是以 NULL 结尾的。收到消息后，请注意如何将缓冲区转换为字符串。

```
// snip
zmq::message_t reply;
socket.recv (&reply);

const char *buf = static_cast<const char*>(reply.data());
std::cout << "CHAR [" << buf << "]" << std::endl;

//std::string input_data_(buf);  // assumes a null-term string
std::string input_data_( buf, reply.size() ); 
// snip 
```

**（希望）有用的提示 #2**

另外，我注意到**ZmqHandler.hxx**中的一些内容。

```
// snip
std::string outbound_data_ = archive_stream.str();
const char * buf = outbound_data_.c_str();    
int len = strlen((const char*)buf);
std::cout << "LENGTH [" << len << "]" << std::endl;

zmq::message_t msgToSend(len);

memcpy ((char *) msgToSend.data(), buf, len);

if(memcmp((char *) msgToSend.data(), buf, len) != 0)
{
  std::cout << "memcpy error!" << std::endl;
}
// snip 
```

你不需要检查 memcpy 的结果（除非你想检查它的返回值）。整个块可以更改为这样的：

```
std::string outbound_data_ = archive_stream.str();
// no need to use the c-style string function 'strlen'
int len = outbound_data_.length();
std::cout << "LENGTH [" << len << "]" << std::endl;

zmq::message_t msgToSend(len);
memcpy( msgToSend.data(), outbound_data_.data(), len ); 
```**

# objective-c - 下载的数据始终为零

> ID：14565542
> 
> 赞同：0
> 
> 时间：2013-01-28T15:39:20.293
> 
> 标签：objective-c, facebook, ios6, download

```
FBFriendPickerViewController *friendPicker = [[FBFriendPickerViewController alloc] init];
friendPicker.fieldsForRequest = [[NSSet alloc] initWithObjects:@"picture", nil];
[friendPicker loadData];
[friendPicker presentModallyFromViewController:self
                                      animated:YES
                                       handler:^(FBViewController *sender, BOOL donePressed) {
                                           if (donePressed) {
NSURL *profilePictureURL = [NSURL URLWithString:friend[@"picture"][@"data"][@"url"]];
                                                               NSURLRequest *profilePictureURLRequest = [NSURLRequest requestWithURL:profilePictureURL cachePolicy:NSURLRequestUseProtocolCachePolicy timeoutInterval:10.0f]; // 
NSLog(profilePictureURL.absoluteString);
                                                               [NSURLConnection sendAsynchronousRequest:profilePictureURLRequest
                                                                                                  queue:[NSOperationQueue mainQueue]
                                                                                      completionHandler:^(NSURLResponse* response, NSData* receivedData, NSError* error)
                                                                {
                                                                    UIimage *userpic = [UIImage imageWithData:receivedData];
                                                                }]; 
```

网址不为空： [https ://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash4/370130_506171594_768019817_q.jpg](https://fbcdn-profile-a.akamaihd.net/hprofile-ak-ash4/370130_506171594_768019817_q.jpg)

但是 receivedData 为零——我尝试了不同的方法从 url 下载数据。

谁能说这段代码有什么问题？这些代码正在运行，但前段时间开始返回 nil 数据。

# uml - Active class versus passive class

> ID：14565544
> 
> 赞同：15
> 
> 时间：2013-01-28T15:39:30.247
> 
> 标签：uml, specifications, class-diagram

**In UML specification superstructure 2.5(still Beta, page 203)**

> A Class may be designated by setting isActive to true as active (i.e., each of its instances is an active object). When isActive is false the Class is passive (i.e., each of its instances executes within the context of some other object).

*   I wonder if there is a simple example illustrates the differences in applying each one of them?
*   And elaborate this concept a bit?

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-28T18:19:23.660

By definition,

> **Active Objects** In UML, active classes, *and therefore active objects*, exist in their own thread of operations and have their own address space. If execution, or code activity, is thought of in terms of flow, active objects can start or control that flow. Active objects, *in other words, are sequential and do something: modify variables, change program behavior, and so on.* In UML, active classes and objects are distinguished by having a thicker border than passive objects.
> 
> **Passive objects** in UML do not generally have the ability to modify or begin the flow of execution, because they must wait for another object to call them. Instead, *passive objects are generally used to store information*, and in many cases this information may be shared between multiple other objects. **This may allow passive objects to be accessed concurrently, not sequentially.** To make sure that the data contained inside has a high integrity, UML allows for passive objects to insist that they be accessed sequentially; if two threads attempt to call the same sequential passive object, that object can delay the second thread until the first has finished with it.

A helpful example could be found [Here](http://www.codeproject.com/Articles/56617/Applied-Long-Running-Active-Object-Pattern)

# c++ - 跨两个不同进程的 QSharedMemory

> ID：14565545
> 
> 赞同：3
> 
> 时间：2013-01-28T15:39:30.743
> 
> 标签：c++, qt, ipc

我想在两个不同的 Qt 应用程序之间共享一个变量。我正在考虑为此目的使用 QSharedMemory。我面临的问题是识别 Qt 应用程序中的共享内存区域。如何确保两个应用程序使用相同的共享内存？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T15:46:52.190

共享内存区域由一个键标识——一个传递给[构造函数](http://doc.qt.digia.com/qt/qsharedmemory.html#QSharedMemory)的字符串参数，或者稍后使用[`setKey`](http://doc.qt.digia.com/qt/qsharedmemory.html#setKey).

您需要生成一个密钥并将其值传递给两个应用程序；使用它，他们都将访问相同的共享内存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:52:19.147

除了 Mike Seymour 已经说过的 Qt 有很多示例代码（很可能也在您的系统上），因此您可以查看此[示例](http://doc.qt.io/qt-5/qtcore-ipc-sharedmemory-example.html)以及[文档](http://doc.qt.io/qt-5/qsharedmemory.html)

# java - 具有自定义异常单词匹配的 Android 上的 Speech to Text

> ID：14565548
> 
> 赞同：5
> 
> 时间：2013-01-28T15:39:45.893
> 
> 标签：java, android, speech-to-text, soundex, metaphone

我希望能够使用 Android 的 Speech-To-Text 引擎来识别句子中各种不寻常的单词。

举个例子，“脑电图”这个词来自 STT 作为“电子供应图”。当我使用 Soundex 或 Metaphone 将所说的内容与硬编码值进行比较时，该值似乎永远不会匹配或随机匹配。如果我使用阈值（例如，Math.abs(str1.compareTo(str2)) <= 1），那么匹配会变得非常松散，几乎任何东西都会匹配。

本质上，我想做的类似于通过背诵报价从报价数据库中查找报价。问题似乎更多地在于 Google 的 Speech-To-Text 引擎使用的有限词集。

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T12:55:36.660

您可以尝试使用或不使用基于语法的语音识别的[CMUSphinx 。](http://cmusphinx.sourceforge.net/)

查看[Inimesed](https://github.com/Kaljurand/Inimesed)应用程序。这是一个开源的 Android 应用程序，它使用 CMUSphinx 进行基于 JSGF 的语音识别。在这种情况下，语法是根据用户的通讯录编译的。您可以简单地丢弃这部分并拥有包含所有短语的固定语法。

如果问题更多是你有包含偶尔不寻常单词的自由形式的句子，那么基于语法的语音识别可能不起作用。在这种情况下，使用 n-gram 语言模型进行识别，但在字典中包含所有不寻常的单词。

# windows-phone-8 - 如何在 WP8 上的自定义商店中编辑联系人时收到通知

> ID：14565552
> 
> 赞同：2
> 
> 时间：2013-01-28T15:39:58.243
> 
> 标签：windows-phone-8, store, contact

我在这里遇到了一些严重的问题：我正在创建一个处理联系人同步的 Windows Phone 8 应用程序，但是我无法判断是否应该在服务器上更新本地联系人，因为我没有发现任何东西可以通知我的应用程序我的联系人商店中的联系人已被编辑（使用本机联系人应用程序）。

我需要一个修订号之类的东西。到目前为止，我发现的是 ContactChangeRecord 类，但它需要一个联系人存储修订版，而我的似乎总是相同的，即使在联系人更改 (1) 之后也是如此。

有人能帮助我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-11T11:40:02.840

联系人存储的修订号应该更改。您可以检测到您的联系人存储中所做的任何更改：

```
ContactStore cloudContactStore = await ContactStore.CreateOrOpenAsync(ContactStoreSystemAccessMode.ReadWrite, ContactStoreApplicationAccessMode.ReadOnly);

     // Assuming you already have created the contactStore and made some changes from the 
     // device like deleting, or renaming a contact
        var changeList = await cloudContactStore.GetChangesAsync(5);

        foreach (var change in changeList)
        {
            // Each change record returned contains the change type, remote and local ids, and revision number
            Debug.WriteLine(String.Format("Change Type: {0}\nLocal ID: {1}\nRemote ID: {2}\nRevision Number: {3}",
                change.ChangeType.ToString(),
                change.Id,
                await remoteIDHelper.GetUntaggedRemoteId(cloudContactStore, change.RemoteId),
                change.RevisionNumber));
            // Get the contact associated with the change record using the Id property.
            var contact = await cloudContactStore.FindContactByIdAsync(change.Id);
            if (contact != null)
            {
            }
        } 
```

检查 Visual Studio 的调试输出。您应该看到带有所做更改类型（创建、修改、删除）的联系人 ID [http://msdn.microsoft.com/en-us/library/windows.phone.personalinformation.contactchangetype.aspx](http://msdn.microsoft.com/en-us/library/windows.phone.personalinformation.contactchangetype.aspx)

查看此示例：[http](http://www.getcodesamples.com/src/3D34679D/F29F8FA4) ://www.getcodesamples.com/src/3D34679D/F29F8FA4了解更多详情

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-26T11:14:53.940

修订号是联系人存储类的属性之一。还有某种“日志”，您可以在其中检查操作类型。

# cobol - 链接部分上的 Cobol 无效编号

> ID：14565555
> 
> 赞同：1
> 
> 时间：2013-01-28T15:40:07.120
> 
> 标签：cobol, gnucobol

所以，我正在研究 Cobol 并且当我尝试构建我的代码时，我收到以下错误：

> soma.cob:8：错误：无效的级别号“链接部分”

文件 soma.cob 是：

```
IDENTIFICATION DIVISION.
PROGRAM-ID.    SOMA.

data division.
working-storage section.
77 RESPT PIC 9(2) VALUE ZEROS.

linkage-section.
01 CAMP1 PIC 9(2).
01 CAMP2 PIC 9(2).

PROCEDURE DIVISION USING CAMP1 CAMP2.
    COMPUTE RESPT = CAMP1+CAMP2\.        
    DISPLAY RESPT. 
```

那么，问题出在哪里？？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T16:52:52.657

而不是`linkage-section.`，您需要编写`linkage section.`.

# java - NumberFormatException：无效的 int：“1”

> ID：14565558
> 
> 赞同：2
> 
> 时间：2013-01-28T15:40:16.860
> 
> 标签：java, android, algorithm, loops, .obj

我正在尝试制作一个简单的算法，将 .obj 文件转换为我的程序可以使用的数据。

这是输入字符串数据示例：“v 1.000000 -1.000000 -1.000000”“f 1 2 3 4”

```
file = new BufferedReader(new InputStreamReader(am.open("test.obj"))); //Loads the .obj
        String out = " ";
        try{
            while((out=file.readLine()) != null){ //Grabs a line from the file and checks so that it aint null
                int index = 1;
                int nextIndex = 1;
                if(out.startsWith("v")){Log.w("OBJs", out); //If line starts with "v", go ahead
                    while(index != out.lastIndexOf(" ")){ //checks so the index is not the last index of an empty space " "
                        nextIndex = out.indexOf(" ", index +1); //Looks for the next occurance of an empty space from +1 of current empty space
                        vertices.add(Float.valueOf(out.substring(index, nextIndex))); //Grabs the string in between the two spaces
                        index = nextIndex;// 
                        }
                    vertices.add(Float.valueOf(out.substring(index, out.length())));//Grabs the last variable from the file as the above while is now false
                    }

                int index2 = 1;
                int nextIndex2 = 1;
                if(out.startsWith("f")){Log.w("OBJs", out);// THis works exactly as above, gives error and i dunno why
                    while(index2 != out.lastIndexOf(" ")){
                        nextIndex2 = out.indexOf(" ", index2 +1);
                        edges.add(Integer.valueOf(out.substring(index2, nextIndex2)));
                        Log.w("OBJs", out.substring(index2, nextIndex2)); 
                        index2 = nextIndex2;

                    }
                    edges.add(Integer.valueOf(out.substring(index2, out.length())));
                }

            }
        } 
```

这导致：

```
FATAL EXCEPTION: main
java.lang.RuntimeException: Unable to start activity ComponentInfo{my.stuffs.blodvite/my.stuffs.blodvite.MainActivity}: java.lang.NumberFormatException: Invalid int: " 1" 
```

而这只发生在第二个循环部分，我试图收集面部信息。收集顶点完美无缺，我对两者都使用完全相同的算法，所以我不明白问题是什么。还有一件有趣的事情是，当我上次关闭 eclipse 时，我认为它确实有效，不知道发生了什么，或者我是否记错了。哦，正如您从代码中看到的那样，它将读取的行打印到 Log cat。这就是结果。

```
01-26 23:42:13.916: W/OBJs(18442): v 1.000000 -1.000000 -1.000000
01-26 23:42:13.916: W/OBJs(18442): v 1.000000 -1.000000 1.000000
01-26 23:42:13.916: W/OBJs(18442): v -1.000000 -1.000000 1.000000
01-26 23:42:13.916: W/OBJs(18442): v -1.000000 -1.000000 -1.000000
01-26 23:42:13.916: W/OBJs(18442): v 1.000000 1.000000 -0.999999
01-26 23:42:13.916: W/OBJs(18442): v 0.999999 1.000000 1.000001
01-26 23:42:13.916: W/OBJs(18442): v -1.000000 1.000000 1.000000
01-26 23:42:13.916: W/OBJs(18442): v -1.000000 1.000000 -1.000000
01-26 23:42:13.916: W/OBJs(18442): f 1 2 3 4 
```

所以它清楚地表明顶点收集工作没有错误，但是面收集在第一次迭代时停止。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:36:00.853

This happens because you have a leading space in " 1". As already pointed out by @Raghav Sood, you can call trim on your Strings before trying to parse to int to get it to work. You can also simply take the substring starting at index2+1 (i.e. skipping the first space).

I am curious why you didn't simply use StringTokenizer for this.

# .htaccess - 将所有流量从一个域重定向到另一个域

> ID：14565560
> 
> 赞同：11
> 
> 时间：2013-01-28T15:40:19.737
> 
> 标签：.htaccess, mod-rewrite

我想要做的是自动为我的一个网站重定向域

`www.domain1.com`至`www.domain2.co.uk`

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^www.domain1.com\. [NC]
RewriteRule (.*) http://%www.domain2.com\%{REQUEST_URI} [R=301,NC,L] 
```

我查看了该网站的答案，上面是我从另一个答案编辑的代码，但它不起作用。

我希望它在 .htaccess 文件中 - 这是最好的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-28T15:55:38.650

要从 to 重定向`www.domain1.com`，`www.domain2.co.uk`您可以尝试以下操作：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?domain1\.com [NC]
RewriteRule ^(.*)$ http://www.domain2.co.uk/$1 [R=301,NC,L] 
```

# joomla - 诊断缓慢的初始负载

> ID：14565566
> 
> 赞同：0
> 
> 时间：2013-01-28T15:40:34.400
> 
> 标签：joomla, web, performance-testing, pagespeed, rackspace

您如何诊断最初加载缓慢的网站？也就是说，它最多 10 秒无响应，然后在此之后快速加载。

您可以在此处查看加载图表：[http ://www.webpagetest.org/result/130128_XV_GVN/3/details/](http://www.webpagetest.org/result/130128_XV_GVN/3/details/)

我知道“某事”正在减慢速度，但我不知道是什么。有没有办法知道是什么导致了延迟？

编辑：以下是 Joomla 调试模式的值：

```
Application 0.013 seconds (+0.013); 1.33 MB (+1.327) - afterLoad
Application 0.783 seconds (+0.770); 9.53 MB (+8.199) - afterInitialise
Application 0.952 seconds (+0.169); 11.00 MB (+1.473) - afterRoute
Application 1.164 seconds (+0.212); 12.76 MB (+1.758) - afterDispatch
Application 2.453 seconds (+1.289); 19.04 MB (+6.287) - beforeRenderModule mod_roknavmenu ()
Application 2.858 seconds (+0.405); 20.91 MB (+1.865) - afterRenderModule mod_roknavmenu ()
Application 2.977 seconds (+0.119); 20.98 MB (+0.075) - beforeRenderModule mod_login (Member Access)
Application 3.012 seconds (+0.035); 21.09 MB (+0.102) - afterRenderModule mod_login (Member Access)
Application 3.019 seconds (+0.008); 21.09 MB (-0.000) - beforeRenderModule mod_hot_joomla_carousel (Front Page Carousel)
Application 3.033 seconds (+0.014); 21.13 MB (+0.040) - afterRenderModule mod_hot_joomla_carousel (Front Page Carousel)
Application 3.057 seconds (+0.024); 21.12 MB (-0.010) - beforeRenderModule mod_rokgallery (FP RokGallery)
Application 3.793 seconds (+0.736); 29.68 MB (+8.570) - afterRenderModule mod_rokgallery (FP RokGallery)
Application 3.847 seconds (+0.053); 29.64 MB (-0.048) - afterRender 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T07:54:55.747

尝试禁用 Rok 模块和插件。检查这是否改变了任何东西。如果您使用的是 memcached 缓存，请尝试禁用它或最终更改为 Files。即使您的磁盘速度较慢，文件缓存也可以改善站点。Memcached 有时会给出与预期相反的结果。

还要尝试找出您的问题是否与您正在使用的 CloudFlare 服务有关。只需创建一个子域直接进入您的后端托管，看看响应时间是否不同。

如果没有任何帮助并且您在 Joomla 调试输出中看不到问题，那么是时候进行服务器端调试了。我假设您使用的是 linux 托管。了解 dns 解析是否在您的服务器上运行良好。只需使用 ping、dig 或 host 来查询任何域名的 IP 地址。如果您看到名称解析暂停，请先修复您的解析器。

如果您正在使用 CGI 运行 php，那么您可以尝试[跟踪](http://linux.die.net/man/1/strace)php 进程并找出它是否会暂停某些东西，例如。可能正在等待连接到数据库？另一种方法是使用[xdebug](http://xdebug.org/) php 模块并进行功能跟踪。您可以使用 xdebug 将 php 作为 CGI 或服务器模块运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T08:15:50.283

我同意上面的评论，任何基于框架的模板通常都很慢，要查看这是否是问题，只需将 beez 菜单分配给主页，看看它有多大的不同。

通常时间如此之高意味着您的缓存配置不正确，和/或主页上的许多模块未优化，和/或大量文章。所有这些都有解决方案，但请进行一些测试，以便我们确定主要问题。

最好使用非实时副本，这样您就可以在不中断当前站点的情况下使用它。

1.  将站点置于调试模式（来自全局配置）并重新加载主页。您应该会在页面下方看到一个包含加载时间的表格。拯救他们。
2.  分配另一个模板，创建正确的模块位置，以便它加载与您当前家相同的内容。节省加载时间
3.  验证您的缓存插件是否已启用，并且您的缓存已在配置中以适当的时间启用*。清除缓存，然后进行定时页面加载（保存时间），然后立即重新加载页面。通过比较这两次，我们有望了解哪个是有问题的扩展或问题。

这只是一些基本的诊断，一旦你发回我们可以走得更远。

*   适当的缓存时间：如果您每小时获得 2 次点击，并且您的缓存设置为默认的 15 分钟，那么您根本没有使用缓存！！！如果您每小时获得 400 次点击，那么只有 4 次将用于生成缓存，即 1% 的请求会更慢。您的命中率越低，缓存时间就应该越长以使其有效。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:40:34.140

我会将其归结为主机和/或您正在运行的繁重模板 + 附加扩展。由于 JavaScript 和 CSS 文件的数量和大小，我一直发现 Rockettheme 模板及其框架非常繁重。

你可以做的是，备份网站并在本地主机上运行它，比如[WampServer](http://www.wampserver.com/en)，看看加载速度是否有任何差异。

如果您看到该站点运行得更快，您可能需要考虑使用不同的主机。如果没有太大区别，那么我认为可能需要不同的模板。

希望这可以帮助

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2014-10-16T08:06:50.963

您的问题听起来像是 TTFB（第一个字节的时间）问题，并且可能与繁重的数据库查询、缓慢的主机性能、繁重的页面呈现直接相关，这些都会导致服务器的响应时间过长。

我同意上面的评论，首先在本地安装的服务器上检查性能（我在这里使用 WAMP 服务器）。您还可以对 joomla 框架进行一些修改，并通过添加来自组件和插件渲染的附加信息来增强调试功能。

对于调试组件，您需要编辑文件libraries/joomla/application/component/helper.php并替换

```
$contents = self::executeComponent($path); 
```

和

```
if (constant('JDEBUG')) {
JProfiler::getInstance('Application')->mark('beforeExecuteComponent ' . $option.' ('.$task.')');
}
$contents = self::executeComponent($path);
if (constant('JDEBUG')) {
JProfiler::getInstance('Application')->mark('afterExecuteComponent ' . $option.' ('.$task.')');
} 
```

对于插件编辑 library/joomla/event/dispacher.php 并替换

```
if (is_object($this->_observers[$key]))
{
$args['event'] = $event;
$value = $this->_observers[$key]->update($args);
}
// Fire the event for a function based observer.
elseif (is_array($this->_observers[$key]))
{
$value = call_user_func_array($this->_observers[$key]['handler'], $args);
} 
```

有了这个：

```
if (constant('JDEBUG'))
{
$pluginName = '';
if (is_object($this->_observers[$key])) {
$pluginName = get_class($this->_observers[$key]);
}
JProfiler::getInstance('Application')->mark('Execute Plugin ' . $pluginName.'::'.$event.' - START');
}
// Fire the event for an object based observer.
if (is_object($this->_observers[$key]))
{
$args['event'] = $event;
$value = $this->_observers[$key]->update($args);
}
// Fire the event for a function based observer.
elseif (is_array($this->_observers[$key]))
{
$value = call_user_func_array($this->_observers[$key]['handler'], $args);
}
if (constant('JDEBUG'))
{
JProfiler::getInstance('Application')->mark('Execute Plugin ' . $pluginName.'::'.$event.' - END');
} 
```

现在您可以检查插件、模块的加载顺序以及每次加载需要多长时间。

# asp.net-mvc - 从另一个区域内的操作渲染局部视图

> ID：14565567
> 
> 赞同：5
> 
> 时间：2013-01-28T15:40:36.060
> 
> 标签：asp.net-mvc

我有一个 ASP.Net MVC 项目，它被分成“区域”

在“A”区域的视图上，我希望通过“B”区域内的控制器呈现部分视图。

我在“A”区域内的视图中有以下内容

```
Html.RenderAction("Index", "AreaBHome", new { Area="AreaB"}); 
```

这似乎不起作用。

有谁知道如何做到这一点？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T15:43:29.610

用这个

```
 Html.RenderAction("action", "controller", new { area = "Area", model = ViewData.Model }).. 
```

或这个

```
@Html.Partial("~/Views/ControllerName/_PartialView.cshtml", Model) 
```

# vtk - 将分析（.hdr、.img）格式转换为元图像（.mhd、.raw）

> ID：14565570
> 
> 赞同：0
> 
> 时间：2013-01-28T15:40:38.827
> 
> 标签：vtk, medical

我目前正在开展一个项目，该项目需要我从 MRI 扫描中分割皮肤层，清理图像并将其写入表面文件以进行进一步处理。但是，我在 3D 医学图像处理方面没有太多经验（过去一年我一直在涉足 VTK 的表面），几乎没有任何图像处理经验。正如标题所示，扫描以分析格式（.hdr 标头和 .img 数据）提供，而我在其上运行的分割算法需要 MetaImage（.mhd 标头和 .raw 数据）输入文件。目前，我通过在 Volview 中打开它来手动转换每个扫描并保存为 mhd 卷。正如您所想象的那样，这变得越来越乏味，因此我正在寻找自动化流程的最佳方法。

我使用的是 64 位 Windows 7，并且安装了 VTK 5.10.0.RC1、MinGw 和 Python 2.7 的工作版本（以及 Matlab R2011a，尽管我目前没有使用它）。Google 展示了使用 ITK 和 Matlab 的可能解决方案。但是，安装上述软件包并让它们一起工作非常麻烦，我非常不愿意对当前设置进行任何更改。我的计划不会浪费时间在接下来的几周内调试神秘的编译错误。

我的问题是：什么软件或方法可以让我尽可能快速、轻松地（安装）自动将分析转换为 MetaImage 文件？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T06:46:29.117

对于这样的事情，我真的可以推荐 DeVIDE 软件包 ( [http://code.google.com/p/devide/](http://code.google.com/p/devide/) )。它包括你需要的一切，包括一个包含 cmake、swig、Python、numpy、matplotlib、wxPython、gdcm、VTK、ITK 和 DeVIDE 本身的 Python 发行版。此外，您可以通过可视化编程快速测试和原型化您的解决方案。

我不完全确定，但我相信您需要 ITK 用于分析格式，如果您不想经历安装的麻烦，它也包含在 DeVIDE 中。

# entity-framework - EF 4\. 通过 LINQ to Entities 选择两级层次结构

> ID：14565571
> 
> 赞同：0
> 
> 时间：2013-01-28T15:40:39.697
> 
> 标签：entity-framework, linq-to-entities, entity

有 Cars 实体集，每辆 Car 都有一组 AdvancedCode。最近我使用方法表示法从我的 EF 存储中选择层次结构。它看起来像这样：

```
repository.Cars.Where(a => a.AgentId == userAgent.AgentId)
      .Include(a => a.AdvancedCodes)
      .Where(a => a.CarId != null).ToList() 
```

我收到了汽车的集合，每辆汽车都收集了 AdvancedCodes。太好了。现在我需要切换到 LINQ-to-Entities 表示法来执行多个 LEFT 连接和更复杂的 SELECT：

```
from cr in context.Cars
from ac in context.AdvancedCodes.Where(a => a.CarId == cr.CarId).DefaultIfEmpty()
from c in context.Contacts.Where(a => a.AdvancedCodeId == ac.AdvancedCodeId).DefaultIfEmpty()
from ag in context.Agents.Where(a => a.AgentId == ac.AdvancedCodeId).DefaultIfEmpty()
where ac.AgentId == agentId && ac.CarId != null && cr.IsApproved == true
select new CarCodeModel
{
     CarBrand = cr.CarBrand.BrandName,
     RegNumber = cr.RegNumber, 
     ContactDate = c.DateCreated,
     ContactCode = ac.Code,
     CodeCreationDate = ac.DateCreated,
     IsUsed = c.CoId != null,
     RecepientName = ag.AgentName
}; 
```

没关系，但这次我得到了一组平面 2D 数据，我需要以某种方式迭代并拆分两个相关的集合。有没有办法编写更复杂的查询来获得与 .Include 方法之后相同的两级集合集？

# javascript - 内容可编辑的 div 插入符号位置

> ID：14565572
> 
> 赞同：3
> 
> 时间：2013-01-28T15:40:46.217
> 
> 标签：javascript, html, range, contenteditable, caret

> 可能重复： [在 contentEditable div 中获取插入符号位置](https://stackoverflow.com/questions/3972014/get-caret-position-in-contenteditable-div)

我有一个 contenteditable div，我正在尝试使用以下代码在非 IE 浏览器上获取此 div 内的插入符号位置：

```
 var caretPosition = 0, containerEl = null, sel, range;
  if (window.getSelection) 
  {
    sel = window.getSelection();
    if (sel.rangeCount) {
        range = sel.getRangeAt(0);
        if (range.commonAncestorContainer.parentNode == editableDiv) {
            caretPosition = range.endOffset;
         }
      }
   } 
```

它为单行上的文本正确返回插入符号位置，但我有多行文本，似乎对于每一新行，每行的插入符号位置以 0 开头。我的问题是我需要插入符号位置包括在前几行中找到的字符数，例如，对于第二行

caretPosition = 第一行的字符数 + 第二行插入符号前面的字符数。

它仅返回第二行插入符号前面的字符数。我怎样才能实现这种行为？或者我怎样才能有另一个范围，其中包括在上面的行中找到的文本？

任何建议都非常感谢，谢谢！

# c# - 为 Int Array 赋值（不重复！）

> ID：14565579
> 
> 赞同：1
> 
> 时间：2013-01-28T15:40:53.807
> 
> 标签：c#

我需要为具有 1000 个元素的 IntArray 随机分配值。但是元素不能重复。我用这个代码...

```
public int[] Numbers()
{
    Random random = new Random();
    int check;

    for (int i = 0; i < numbers.Length; i++)
    {
        check = random.Next(0, 9999);

        while (!numbers.Contains(check))
        {
            numbers[i] = check;
        }
    }

    return numbers;
} 
```

但随后，大量数字获得默认值 (0)。我究竟做错了什么 ？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T15:44:11.750

您的逻辑有点偏离 - 如果 Contains() 失败，您仍需要分配该索引：

```
for (int i = 0; i < numbers.Length; i++)
{
    check = random.Next(0, 9999);

    while (numbers.Contains(check))
    {
        // The number existed, so recompute...
        check = random.Next(0, 9999);
    }

    numbers[i] = check;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:44:18.770

如果条目已经存在，您将跳过它们，这就是它们为 0 的原因。更改您的`while`循环：

```
for (int i = 0; i < numbers.Length; i++)
{
    check = random.Next(0, 9999)
    while (numbers.Contains(check))
    {
        check = random.Next(0, 9999)
    }

    numbers[i] = check;
} 
```

`numbers`尽管生成 N 个不同的随机数的性能更高（交换内存与循环）的方法：

```
int ii = 0;
var numbers = new int[N];
var used = new HashSet<int>(); // much faster on lookups than Array.Contains
while (used.Count < N)
{
    var check = random.Next();
    if (used.Add(check)) numbers[ii++] = check;
    // alternatively: if (used.Add(numbers[ii] = check)) ii++;
}

return numbers; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:45:58.307

当检查失败时，您会跳过一个数字。更改循环，以便如果检查失败，您会在循环继续之前生成一个新数字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T16:12:07.527

你可以做这样的事情，虽然它不一定是最好的：

```
var rnd = new Random();
var result = Enumerable.Range(0, 10000).OrderBy(i => rnd.Next()).Take(1000).ToArray(); 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-01-28T15:49:27.547

另一种看待这个问题的方法是对包含 1000 个项目的订单数组进行洗牌。您可以使用以下内容：

```
 public T[] Shuffle<T>(T[] array)
        {
                var random = _random;
                for (int i = array.Length; i > 1; i--)
                {
                        // Pick random element to swap.
                        int j = random.Next(i); // 0 <= j <= i-1
                        // Swap.
                        T tmp = array[j];
                        array[j] = array[i - 1];
                        array[i - 1] = tmp;
                }
                return array;
        } 
```

然后像这样使用它

```
 int[] values = new int[1000]
                for (int i=0; i<999; i++)
                   values[i] = i;

                values = Shuffle<int>(values);
                foreach (int item in values)
                {
                        Response.Write(item);
                }
                Response.Write("</br>");
                values = Shuffle<int>(values);
                foreach (int item in values)
                {
                        Response.Write(item); //this will generate a unique random from 0-999
                } 
```

从[这里获取的代码示例](http://forums.asp.net/t/1778021.aspx/1)

# jquery - jQuery slideDown slideUp错误

> ID：14565584
> 
> 赞同：0
> 
> 时间：2013-01-28T15:41:07.713
> 
> 标签：jquery, slidedown, slideup

当我将鼠标悬停在元素上时，我正在使用以下代码为`slideDown`/效果设置动画。似乎工作正常，但是当鼠标不再悬停在元素上时，`slideUp`不会启动。`slideDown``slideUp`

```
$('div.guest-tile-holder').hover(function() {
    $(this).find('div.options-bar').slideDown('slow');
}), function() {
    $(this).find('div-options-bar').slideUp('slow');
}; 
```

我缺少什么`slideUp`来工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:42:44.847

在第二个悬停函数中存在语法错误（第 3 行的右括号应该在第 5 行）和拼写错误。你正在寻找`'div-options-bar'`，而不是`'div.options-bar'`

```
$('div.guest-tile-holder').hover(function() {
    $(this).find('div.options-bar').slideDown('slow');
}, function() {
    $(this).find('div.options-bar').slideUp('slow');
}); 
```

# ios - 带有链接回视图控制器的按钮的自定义对象

> ID：14565586
> 
> 赞同：0
> 
> 时间：2013-01-28T15:41:09.740
> 
> 标签：ios, objective-c, uibutton

我有视图控制器和一个自定义对象，它将返回一个带有按钮的视图。我将按钮的目标设置为视图控制器上的方法。我只想让这个对象创建我想要的视图，然后将它返回给我`addSubview:`。

```
CreateView.m

//create button
[button addTarget:(view controller) action:@selector(buttonMethod) forControlEvents:UIControlEventTouchUpInside]; 
```

我怎样才能做到这一点？将视图控制器的 self 传递给方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:47:36.063

所以 CreateView 基本上是一个负责创建视图的工厂？那么是的，将指向 viewController 的指针传递给该方法。

例如

```
@interface CreateView : NSObject {
}
+ (UIView*)createViewFor:(id)target;
@end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T09:25:43.633

请试试这个。它可以帮助您解决这个问题。

```
[button addTarget:self action:@selector(buttonMethod:) forControlEvents:UIControlEventTouchUpInside];

-(void)buttonMethod:(id)sender
{
  CreateView *c=[CreateView alloc]initWithNibName:@"CreateView" bundle:nil];
  [self.view addSubview:c.view];
} 
```

# java - 在 XmlRpc 服务中获取 cookie

> ID：14565587
> 
> 赞同：1
> 
> 时间：2013-01-28T15:41:11.337
> 
> 标签：java, spring, apache, tomcat6, xml-rpc

我建议你这将是一个很长的帖子，因为我真的不知道我想做的事情是否可行，我什至在定义我的需求时遇到了一些问题。
基本上，我被要求扩展一个`Apache XML-RPC Server`，以便可以访问 cookie。我查看了一些文档，我需要扩展的服务是按照官方[Apache 指南](http://ws.apache.org/xmlrpc/server.html)创建的。我的服务看起来像（取自指南的示例代码）：

```
package org.apache.xmlrpc.demo;
public class Calculator {
  public int add(int i1, int i2) {
    return i1 + i2;
  }
  public int subtract(int i1, int i2) {
    return i1 - i2;
  }
} 
```

我们用来公开这个服务的 servlet 是标准的[org.apache.xmlrpc.webserver.XmlRpcServlet](http://ws.apache.org/xmlrpc/apidocs/org/apache/xmlrpc/webserver/XmlRpcServlet.html)，我们在`Tomcat6`. 也就是说，我需要修改`Calculator`才能从 cookie 中获取一些数据，比如

```
public int add(int i1, int i2) {
  Cookie[] cookies = //how to do this?
  return i1 + i2;
} 
```

由于我们正在使用`Spring`我尝试修改`Calculator`请求`Autowired`，例如

```
package org.apache.xmlrpc.demo;
@Configurable
@Scope("request")
public class Calculator {

  @Autowired HttpServletRequest request;
  //...
} 
```

但通过这种方式我获得了一个例外

```
 Failed to invoke method searchFlights in class com.bravofly.bsa4.server.FlightsServiceXmlRpc: 
No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? 
If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: 
In this case, use RequestContextListener or RequestContextFilter to expose the current request.

    org.apache.xmlrpc.common.XmlRpcInvocationException: Failed to invoke method searchFlights in class com.bravofly.bsa4.server.FlightsServiceXmlRpc: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.
        at org.apache.xmlrpc.server.ReflectiveXmlRpcHandler.invoke(ReflectiveXmlRpcHandler.java:129)
        at org.apache.xmlrpc.server.ReflectiveXmlRpcHandler.execute(ReflectiveXmlRpcHandler.java:106)
        at org.apache.xmlrpc.server.XmlRpcServerWorker.execute(XmlRpcServerWorker.java:46)
        at org.apache.xmlrpc.server.XmlRpcServer.execute(XmlRpcServer.java:86)
        at org.apache.xmlrpc.server.XmlRpcStreamServer.execute(XmlRpcStreamServer.java:200)
        at org.apache.xmlrpc.webserver.XmlRpcServletServer.execute(XmlRpcServletServer.java:112)
        at org.apache.xmlrpc.webserver.XmlRpcServlet.doPost(XmlRpcServlet.java:196)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:159)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:202)
        at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:175)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662)
    Caused by: java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.
        at org.springframework.web.context.request.RequestContextHolder.currentRequestAttributes(RequestContextHolder.java:131)
        at org.springframework.web.context.support.WebApplicationContextUtils.currentRequestAttributes(WebApplicationContextUtils.java:231)
        at org.springframework.web.context.support.WebApplicationContextUtils.access$0(WebApplicationContextUtils.java:230)
        at org.springframework.web.context.support.WebApplicationContextUtils$RequestObjectFactory.getObject(WebApplicationContextUtils.java:245)
        at org.springframework.web.context.support.WebApplicationContextUtils$RequestObjectFactory.getObject(WebApplicationContextUtils.java:1)
        at org.springframework.beans.factory.support.AutowireUtils$ObjectFactoryDelegatingInvocationHandler.invoke(AutowireUtils.java:178)
        at $Proxy73.getCookies(Unknown Source)
        at com.bravofly.bsa4.server.FlightsServiceXmlRpc.searchFlights(FlightsServiceXmlRpc.java:57)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.xmlrpc.server.ReflectiveXmlRpcHandler.invoke(ReflectiveXmlRpcHandler.java:115)
        ... 31 more
    Caused by:
    java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet/DispatcherPortlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.
        at org.springframework.web.context.request.RequestContextHolder.currentRequestAttributes(RequestContextHolder.java:131)
        at org.springframework.web.context.support.WebApplicationContextUtils.currentRequestAttributes(WebApplicationContextUtils.java:231)
        at org.springframework.web.context.support.WebApplicationContextUtils.access$0(WebApplicationContextUtils.java:230)
        at org.springframework.web.context.support.WebApplicationContextUtils$RequestObjectFactory.getObject(WebApplicationContextUtils.java:245)
        at org.springframework.web.context.support.WebApplicationContextUtils$RequestObjectFactory.getObject(WebApplicationContextUtils.java:1)
        at org.springframework.beans.factory.support.AutowireUtils$ObjectFactoryDelegatingInvocationHandler.invoke(AutowireUtils.java:178)
        at $Proxy73.getCookies(Unknown Source)
        at com.bravofly.bsa4.server.FlightsServiceXmlRpc.searchFlights(FlightsServiceXmlRpc.java:57)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
        at java.lang.reflect.Method.invoke(Method.java:597)
        at org.apache.xmlrpc.server.ReflectiveXmlRpcHandler.invoke(ReflectiveXmlRpcHandler.java:115)
        at org.apache.xmlrpc.server.ReflectiveXmlRpcHandler.execute(ReflectiveXmlRpcHandler.java:106)
        at org.apache.xmlrpc.server.XmlRpcServerWorker.execute(XmlRpcServerWorker.java:46)
        at org.apache.xmlrpc.server.XmlRpcServer.execute(XmlRpcServer.java:86)
        at org.apache.xmlrpc.server.XmlRpcStreamServer.execute(XmlRpcStreamServer.java:200)
        at org.apache.xmlrpc.webserver.XmlRpcServletServer.execute(XmlRpcServletServer.java:112)
        at org.apache.xmlrpc.webserver.XmlRpcServlet.doPost(XmlRpcServlet.java:196)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:641)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:722)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:305)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:159)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:202)
        at net.bull.javamelody.MonitoringFilter.doFilter(MonitoringFilter.java:175)
        at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:243)
        at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:210)
        at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:222)
        at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:123)
        at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:472)
        at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:168)
        at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:99)
        at org.apache.catalina.valves.AccessLogValve.invoke(AccessLogValve.java:929)
        at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:118)
        at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:407)
        at org.apache.coyote.http11.AbstractHttp11Processor.process(AbstractHttp11Processor.java:1002)
        at org.apache.coyote.AbstractProtocol$AbstractConnectionHandler.process(AbstractProtocol.java:585)
        at org.apache.tomcat.util.net.JIoEndpoint$SocketProcessor.run(JIoEndpoint.java:310)
        at java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886)
        at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908)
        at java.lang.Thread.run(Thread.java:662) 
```

因为我确定我`web.xml`通过添加正确配置了`RequestContextFilter`，句子

> 您是指实际 Web 请求之外的请求属性，还是在原始接收线程之外处理请求？

在异常中让我觉得 XmlRpcServlet 在一个完全隔离的线程中运行（不知何故）我的计算器服务。如果我的猜测是正确的，有没有办法在我的服务中获取请求？如果我的猜测是错误的，我做错了什么？您是否还需要一些配置文件（`web.xml`,`spring-context.xml`等）来更好地评估我的问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T08:48:56.467

我们找到了一种解决方法，它可能对他人和未来再次对我们自己有用，所以我留下我们的解决方案作为参考，我们从另一个角度看待问题。
我们意识到`XmlRpcServlet`它实际上是一个 servlet（真是令人惊讶），所以我们认为应该有一种`doPost`方法来处理请求。查看`XmlRpcServlet`infact的源代码`doPost`，因此我们只需创建`CustomXmlRpcServlet`并覆盖读取那里的 cookie 的方法，将所需的值保存到已经可供我们使用的服务器对象中。

```
public class CustomXmlRpcServlet extends XmlRpcServlet
{

  @Override
  public void doPost(HttpServletRequest request, HttpServletResponse response) throws IOException, ServletException{
    Cookie[] cookies = request.getCookies();
    //...
    super.doPost(request, response);
  }
  //...
  //Tough we do not have other customization, here it is possible to add additional method and/or override existing ones
} 
```

我们花了几天时间试图实现我们最初的目标，然后一个简单的视角改变以一种干净简单的方式解决了我们的问题。很高兴能在一个团队中！

# java - ScheduledExecutorService 只调用一个线程

> ID：14565588
> 
> 赞同：0
> 
> 时间：2013-01-28T15:41:15.820
> 
> 标签：java, concurrency, executorservice

我想从队列中提取多个文件并同时解析它们。但是，我的执行程序只调用一个线程：

```
private static ScheduledExecutorService parsingExec ;
protected static BlockingQueue<Path> queue = new LinkedBlockingQueue<>();
int threadPoolSize = 10;
parsingExec = Executors.newScheduledThreadPool(threadPoolSize);
parsingExec.scheduleAtFixedRate(new MyParser(queue), 0, 0, TimeUnit.MILLISECONDS); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-28T16:08:55.483

来自 Javadoc 的`scheduleWithFixedRate()`：

> 创建并执行一个周期性动作，该动作在给定的初始延迟后首先启用，随后在给定的周期内启用；也就是说，执行将在 initialDelay 之后开始，然后是 initialDelay+period，然后是 initialDelay + 2 * period，依此类推。如果任务的任何执行遇到异常，则后续执行将被抑制。否则，任务只会通过取消或终止执行者来终止。如果此任务的任何执行时间超过其周期，则后续执行可能会延迟开始，但不会同时执行。

此方法用于调度单个任务，以多次执行。需要注意的关键是您的任务一次*只会执行一个实例。*如果您想同时执行多个任务，那么您应该使用例如固定线程池。

```
final ExecutorService parsingExec = Executors.newFixedThreadPool(threadPoolSize);
for(final int i = 0; i < threadPoolSize; i++) {
    parsingExec.submit(new MyParser(queue));
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:09:22.877

```
parsingExec.scheduleAtFixedRate(new MyParser(queue), 0, 1, TimeUnit.MILLISECONDS); 
```

此行计划一个 Runnable。您必须为要同时安排的每个线程调用一次此行。我认为您应该拆分`queue`并将拆分的部分提供给您的构造函数，并为每个部分安排一次。也`scheduleAtFixedRate`永远重复工作，我认为你不希望这种行为。如果您只想执行一次，请`submit`改用：

```
//split the queue in parts before
for(int i = 0; i < numberOfQueueParts; i++) {
    parsingExec.submit(new MyParser(queuePart));
} 
```

# mysql - 计算频率

> ID：14565589
> 
> 赞同：0
> 
> 时间：2013-01-28T15:41:15.810
> 
> 标签：mysql, frequency, calculated-columns

我有带有模态 V1、V2、V3、V4 和其他变量调用的变量版本表，它可以是 1 或 0。我需要做的是计算 1 的频率到每个模态的总行数版本：对于 V1 的 ex，我有 6 行调用等于 1，全局有 13 行，我需要创建变量 freq 来指示 6/13。我现在要做的是创建 2 个表：第一个表的行数等于每个调用 1

```
version Version Call=1 
             V1      6
             V2      4
             V3      8
             V4      3 
```

第二个表格是每个版本的总行数

```
 Version Call total
     V1      13
     V2      14
     V3      15
     V4      23 
```

然后我加入这两个表并计算频率。我想问是否没有其他方法可以做到这一点？

这是我的代码：

```
create table Call1 select *, count(*) as call1 from Version where call like '1'group by Version;
create table Calltotal select *, count(*) as calltot from Version group by Version;
update Calltotal change Version Version1 VARCHAR(2);
alter table Call1 add index (Version);
alter table Calltot add index(Version1);
create table final select * from Call1 left join Calltot on Call1.version=Calltot.version1;
alter table final add frequency INT NOT NULL;
update final set frequency=call1/Calltot; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:52:05.200

一个指针...

```
SELECT thing
     , COUNT(CASE WHEN other_thing = 10 THEN 'foo' END) x 
     , COUNT(*) y  
  FROM my_table 
 GROUP 
    BY thing; 
```

# x509certificate - PyOpenSSL 读取证书/pkey 文件

> ID：14565597
> 
> 赞同：8
> 
> 时间：2013-01-28T15:41:47.987
> 
> 标签：x509certificate, pyopenssl

这就是我创建证书的方式

```
 from OpenSSL import crypto

  cert = crypto.X509()
  cert.get_subject().C            = countryName
  cert.get_subject().ST           = stateOrProvinceName
  ... 
```

[这](http://www.themacaque.com/?p=1057)是一代的样子。
现在，如何使用 PyOpenSSL 从普通文件中提取这些值fomr 证书？

所以这就是我想出的

```
def certext(certstr):
  p1 = Popen(['printf', certstr], stdout=PIPE)
  p2 = Popen(['openssl', 'x509', '-text'], stdin=p1.stdout, stdout=PIPE)
  p1.stdout.close()
  output = p2.communicate()[0]
  return output 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-06-18T21:00:14.653

您可以按如下方式加载 PEM 证书：

```
import OpenSSL.crypto

st_cert=open(certfile, 'rt').read()

c=OpenSSL.crypto
cert=c.load_certificate(c.FILETYPE_PEM, st_cert) 
```

和一个私钥：

```
st_key=open(keyfile, 'rt').read()
key=c.load_privatekey(c.FILETYPE_PEM, st_key) 
```

其中 certfile 和 keyfile 是文件名。

# html - 如何垂直对齐图像？

> ID：14565598
> 
> 赞同：-3
> 
> 时间：2013-01-28T15:41:50.317
> 
> 标签：html, css, image, alignment

我需要垂直对齐图像。因此，进入页面时屏幕大小无关紧要。

我需要创建 .css 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:48:34.940

您可以尝试使用此代码

```
<img class="yourNeed">

.yourNeed {
   vertical-align: top;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:44:29.013

您可以`vertical-align:top`在 css 中使用它。

# java - 如何构建 Swing 应用程序

> ID：14565599
> 
> 赞同：8
> 
> 时间：2013-01-28T15:41:53.247
> 
> 标签：java, swing, user-interface

我在 Swing 或 GUI 设计方面并没有太多经验（大学中的一些 WPF 应用程序差不多就是它的高度），但是我的任务是在工作中重构 Swing 遗留应用程序的一部分。

我被要求重构的部分围绕着一个弹出窗口，该窗口可以根据某个值对象以三种不同的格式显示。这 3 种不同的格式都共享一些基本字段，然后有条件地确定附加的字段。负责这个 GUI 元素的类大约有 5k 长，我认为它应该分成三个子类，在基类中共享它们都扩展的东西。但是我完全不知道这是否是正确的方法。

谁能强调一些用于处理共享按钮/字段等元素的不同挥杆组件的策略？

另外，有没有大型的 OSS swing 应用可以借鉴？

更多信息：我正在开发的应用程序是一个大型遗留应用程序，目前其结构相当可怕。我是团队的新手（而且是一个相当新的毕业生，所以在这方面没有太多经验），并且被要求尝试分解其中一个负责显示此弹出窗口的大型课程成更小更易维护的组件。本质上，应用程序中有一个弹出窗口，允许用户响应某些事件，根据他们需要响应的请求的子类型，它具有三种不同的外观。大部分 GUI 元素在所有三种子类型中都是一致的，因此我很想知道继承是否是这里的最佳方法，或者是否有其他策略来处理这个问题？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-01-28T17:43:18.180

看了评论，我想我可以回答这个问题。真正的答案需要一本书。

1.  将您的 GUI 分解成尽可能多的嵌套`JPanel`s 来描述您的 GUI。`JPanel`使用 a的简单嵌套`BorderLayout`优于使用 a 的复杂`JPanel`嵌套`GridBagLayout`。需要明确的是，我并不是在批评`GridBagLayout`. 在创建表单时很有用。但它不是唯一的 Swing 布局管理器。

2.  将每个嵌套`JPanel`放入自己的类中。

3.  使用 Swing 组件时使用组合。当且仅当您的类将覆盖其中一种`JComponent`方法时才使用继承。

4.  每个`JPanel`都有自己的`JButton`,`JLabel`等组件。 `JBUtton`A 是为`JPanel`A 定义的，`JButton`B 是为`JPanel`B 定义的，即使 GUI 的用户认为它们是同一个按钮。您可以通过创建一个包含标签和按钮文本的 GUI 模型来最小化重复。您必须通过编写A 和B 可以执行的 common`ActionListener`来消除重复的操作代码（按下按钮时执行的代码） 。`JButton``JButton`

5.  Swing 应用程序**必须**以调用`SwingUtilities.invokelater()`. 这可确保在事件调度线程 (EDT) 上定义和使用 Swing 组件。

6.  在 Swing 应用程序中只使用**一个。** `JFrame`

7.  每个 JPanel都**必须**定义一个 Swing 布局管理器。

8.  某些组件，例如`JList`and `JTable`，在包含在`JScrollPane`.

我确定我忘记了一些事情，但这应该是一个好的开始。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T17:53:15.663

如果您要设置一个创建 50% 共享代码的抽象类，然后从那里扩展呢？

例如：

```
abstract class BasePopupPanel extends JPanel {

    public void initialize() {
        // Initialize all the shared code here.
        // eg. add(new JButton("TEST");
    }
} 
```

现在您创建实际的弹出面板：

```
public class GiraffePopupPanel extends BasePopupPanel {

    public void initialize() {
        super.initialize();
        // Here you do all the initializations for this class.
    }
} 
```

您可以根据需要创建任意数量的这些。当需要添加它们时......

...假设您有一个名为 的方法`displayPopup`，那么签名将如下所示：

```
public void displayPopup(BasePopupPanel popup) {
    // do stuff regarding JDialogs, etc.
    // ...
    popup.initialize();
    // do more stuff...
} 
```

我希望这能让你对如何重构你的类有一个看法。

# ruby-on-rails - 如何为轮胎构建自定义 to_indexed_json 方法？

> ID：14565600
> 
> 赞同：1
> 
> 时间：2013-01-28T15:41:55.403
> 
> 标签：ruby-on-rails, ruby, json, elasticsearch, tire

我想实现这样的目标：

```
 def to_indexed_json
    { 
      if source.respond_to?(:app_id)
        app_id: source.app_id
      end
      id: self.id,
      content: self.content
    }.to_json
  end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:54:10.537

```
def to_indexed_json
  result = {id: self.id, content: self.content}
  result.merge!(app_id: source.app_id) if source.respond_to?(:app_id)
  result.to_json
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:14:27.217

```
data = Hash.new
if source.respond_to?(:app_id)
  data['app_id']: source.app_id
end
data['id']: self.id,
data['content']: self.content
data.to_json 
```

# tfs - 自动将项目添加到文件夹

> ID：14565603
> 
> 赞同：1
> 
> 时间：2013-01-28T15:42:06.703
> 
> 标签：tfs, msbuild, build-automation, tibco

这是关于我的项目的简要说明。

通过使用构建定义，当我执行构建时，必须执行两个步骤

1.  生成文件
2.  部署我生成的文件

为此，我需要使用“将项目添加到文件夹..”来添加我在第一步完成后生成的文件。并且，为第二步再次执行构建...

如何自动将项目添加到文件夹？我只想运行一次构建..

如果我的解释不清楚，请告诉我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T00:46:57.570

当您在构建代理上运行构建定义时，您正在执行构建工作流程，该工作流程将执行一些准备步骤，最终它将运行 msbuld 来构建您的项目/解决方案。您可以修改构建工作流，但该过程具有更大的学习曲线，并且您需要熟悉 Windows Workflow Foundation，这就是我将专注于 msbuild 部分的原因。

一般规则是以某种方式将您的 msbuild 目标插入 msbuild 进程的生命周期并运行您的例程，例如创建该额外文件并将其添加到适当的位置。如果您有一个名为**mywebapplication.csproj**的 Web 应用程序项目，您可以创建**mywebapplication.wpp.targets** msbuild 文件，该文件将成为您的 Web 应用程序构建过程的一部分，并且您可以触发自己的目标。例如

```
<Target Name="MyTarget" AfterTargets="CoreCompile"> </Target> 
```

**CoreCompile**是作为 .NET/Sdk/Visual Studio 安装的一部分的目标。您也可以使用其他目标。在示例中，“MyTarget”将在您触发项目编译后执行。在您的目标中，您可以创建文件。

对于 Web 应用程序，如果您使用 msdeploy 发布它，您可以使用集合将您之前创建的自己的文件添加到部署包中，如果您这样做，您的文件将被自动部署。您可以在上面示例中的“MyTarget”中执行此操作。[http://sedodream.com/](http://sedodream.com/)是一个能给你很多想法的好博客，他是构建自动化过程的主要人物，如果你想真正熟悉部署过程，一定要买他的书。这里他解释了如何将自己的文件添加到部署包中

[http://sedodream.com/2012/10/09/VSWebPublishHowToIncludeFilesOutsideOfTheProjectToBePublished.aspx](http://sedodream.com/2012/10/09/VSWebPublishHowToIncludeFilesOutsideOfTheProjectToBePublished.aspx)

对于其他类型的项目，您需要创建自己的 msbuild 项目并运行它。再次，您可以拥有自己的目标，您可以在其中对文件进行处理，您可以通过调用`<msbuild/>`任务明确构建您的项目和解决方案。

我希望这会有所帮助。

比塞尔

# mobile - 如何在 Jquery Mobile 上定位弹出窗口？

> ID：14565604
> 
> 赞同：0
> 
> 时间：2013-01-28T15:42:07.533
> 
> 标签：mobile, popup, css-position, navbar, popupmenu

我使用弹出窗口（Jquery Mobile）制作了一个列表视图菜单，但是当单击导航栏时，弹出窗口的位置显示为原点。我希望我的列表视图菜单在单击时看起来像一个下拉菜单。我已经在我的 css 和 javascript 上设置了位置，但它不影响显示。那么，有人可以帮我让显示位置看起来像下拉菜单吗？

这是屏幕截图：

[图像菜单](https://docs.google.com/file/d/0B6MtEMbZDsHCUlRCSHV1dnE3aTg/edit)

如何使弹出窗口位于导航栏下方，使其看起来像下拉菜单？

这是CSS：

```
div#popupMenu{
    float: left;
    max-width: 100%;
    min-height: 100%;
} 
```

我也在使用javascript，但没有影响：

```
$( ".selector" ).popup( "open", x:0, y:200 ); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-02T21:03:30.197

我也在为弹出定位而苦苦挣扎。我使用这个标记接近了：

```
<!-- menu trigger -->
<a data-icon="gear"
   data-iconpos="notext"
   href="#menu"
   data-rel="popup"
   data-position-to="#menu-anchor"
   data-transition="slidedown">Menu</a>

<!-- menu position helper -->
<div id="menu-anchor"></div>

<!-- menu -->
<div id="menu" data-role="popup">
    <ul data-role="listview" data-inset="true">
        <li><a href="/">Link 1</a></li>
        <li><a href="/">Link 2</a></li>
        <li><a href="/">Link 3</a></li>
    </ul>
</div> 
```

触发器和菜单可以去任何地方。但是，锚点必须位于页面顶部附近的某个位置。jQM 尝试将中心`#menu`与中心对齐，`#menu-anchor`但由于锚点位于屏幕顶部，它会尝试将顶部与屏幕顶部对齐，从而为您提供几乎预期的结果。

[**演示在这里**](http://jsfiddle.net/salman/2ArPk/)

# c# - 对接口或其他抽象类型进行编程

> ID：14565605
> 
> 赞同：1
> 
> 时间：2013-01-28T15:42:09.733
> 
> 标签：c#, oop, interface, abstraction

在[关于接口编程的 SO 问题中，](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface)评论[者](https://stackoverflow.com/questions/383947/what-does-it-mean-to-program-to-an-interface#comment10126857_383982)说 -

> 这个问题的大多数答案都有一个普遍的误解，即“编程到接口”意味着使用接口语言结构；这是完全错误的！这是我看到的第一个正确说明“编程到接口”的答案意味着：不要将您的“客户端代码”不必要地绑定到具体/特定的子类实现，因为如果您以后决定使用不同的实现来更改它，您需要做更多的工作来撤消所有不必要的绑定。即程序到/绑定到没有实现细节的东西。例如抽象基类。;)

可以请一些人扩展这一点，最好是与c#有关。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:53:51.713

我的解释是，答案只是将“接口”的概念扩展为意味着绑定到*任何*一组属性和方法，无论是“纯”接口（即`interface`C# 中的接口）还是绑定到特定的*实现*。答案的要点是，您*可以*将一个类本身视为“接口”，因此您应该对您的使用所需的最低基类进行编程（通用`List`合同与更具体的`ArrayList`合同就是该示例）。

`System.IO`您在绑定到抽象`TextReader`类与（不存在的）`ITextReader`接口的类中经常看到这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:48:20.557

例子：

如果您有一种方法可以让“动物”在您的手机游戏中运行，您可以定义一个 `IAnimal`界面，并为每个动物定义自己的运行机制。

```
public interface IAnimal {
   Run(); 
}

public Dog : IAnimal{
   public void Run() {
       //DOG RUN CHINEMATICS
   }
}

public Elephant: IAnimal{
   public void Run() {
       //ELEPHANT RUN CHINEMATICS
   }
} 
```

因此，您将具体实现隐藏在**抽象**`IAnimal`背后（通常称为接口契约）。

因此，在您的物理引擎运行期间，您可以简单地定义**一种**方法：

```
public void RunAnimal(IAnimal animal) {
    animal.Run(); 
} 
```

并称之为：

```
RunAnimal(new Dog());         //WILL CALL DOG CONCRETE METHOD
RunAnimal(new Elephant());    //WILL CALL ELEPHANT CONCRETE METHOD 
```

因此，对于`RunAnimal`方法*，动物的具体实施细节*隐藏在`IAnimal`“墙”后面。

**编辑**

因此，对于“为什么对接口进行编程而不是简单地使用接口构造”这个问题的答案？是：

您可以使用它来构建或基于架构的`interface`工具*。*只需使用或with即可实现相同的目的。所以“接口编程”：是通过记住向消费者代码隐藏具体实现细节（尽可能多地）进行编程，以确保程序的最大*可维护性*、*灵活性*和*可扩展*性。使用, , , 随便你。`interface``contract``abstract base class``simple base class``virtual methods`***`interface``abstract class``base class`***

 **** * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T15:53:22.480

1.  使用接口，您只有方法的签名

2.  使用抽象类，您可以设置子类的通用行为，因此编写通用代码

3.  对于 C# 来说，多重继承是不可能的，所以

你可以实现多个接口而不是继承多个抽象类

1.  当您创建分布式组件（例如 WCF Remoting 等）时，您需要实现接口以便与您的客户端进行通信。

2.  您可以使用接口来标记类***

# php - 如果检测到 php 致命错误，如何配置 nginx 以转到静态 html 页面？

> ID：14565606
> 
> 赞同：1
> 
> 时间：2013-01-28T15:42:10.233
> 
> 标签：php, redirect, error-handling, nginx

我有一个网站正在积极测试错误修复开发。我们的开发团队很小（有时 2-4 人），测试组大约 25-30 人。我们网站上有一些脚本处理访问 MS ADFS 登录，有时在开发中它不能正常工作，因为......好吧，有人测试/修复它。

发生这种情况时，我会收到大量门票。人们收到关于名为“trust.php”的文件的标准错误。目前，trust.php 做了什么并不重要，只是人们看到一条“服务器错误”消息，表明它已停止维护，当然他们都会立即让我知道。当然，由于 trust.php 中的脚本没有良好的错误处理程序，我知道它是 500 错误或其他一些 php 错误。但我只需要让用户知道'我们知道这没问题，我们正在努力。我们使用 magento，我知道在所有 zend、varien 和自定义代码的某个地方，有一些没有 try-catch 的 php 代码。我没写完：）

禁止进行大量配置，有没有办法告诉 nginx 在遇到 php 错误时重定向到不使用 php 的静态 html 文件？谢谢！

BTW：我很乐意接受其他解决方案，但我需要在测试环境中快速实施它，如果只是为了提高测试人员的信心。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:46:47.933

[http://arnisoft.com/285/nginx-custom-error-handling/](http://arnisoft.com/285/nginx-custom-error-handling/)

这有帮助吗？我认为它只是归结为 PHP 向下游发送 500 错误到 nginx，在这种情况下，应该将 nginx 设置为在遇到 500 错误时提供文件。

# hibernate - 当我设置 FetchType.LAZY 时如何加载 OneToMany 数据

> ID：14565612
> 
> 赞同：-1
> 
> 时间：2013-01-28T15:42:27.353
> 
> 标签：hibernate

我设置了@OneToMany(fetch = FetchType.LAZY)。但有时我想加载要使用的数据。我使用休眠4

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:45:01.287

访问延迟加载的集合将加载元素

# jquery - 跨域资源共享 - CORS

> ID：14565618
> 
> 赞同：-1
> 
> 时间：2013-01-28T15:42:48.873
> 
> 标签：jquery, cors

尝试从一台服务器到另一台服务器进行跨源调用。不能让它工作。因此，使用适用于此示例 [http://arunranga.com/examples/access-control/preflightInvocation.html的代码制作了一个测试页面](http://arunranga.com/examples/access-control/preflightInvocation.html)

这是我的示例页面，代码相同： [http ://webcosmo.com/test.html](http://webcosmo.com/test.html)

但是我收到 403 禁止错误。

有人吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:04:26.733

您的资源缺少`Access-Control-Allow-Origin`标题。因此 CORS 无法使用它。尝试将此添加到您的响应标头中：

```
Access-Control-Allow-Origin: * 
```

[阅读此](https://developer.mozilla.org/en-US/docs/HTTP/Access_control_CORS#Access-Control-Allow-Origin)内容以获取有关标头的更多信息`Access-Control-Allow-Origin`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-08T15:37:21.027

如果您添加`Access-Control-Allow-Origin: *`，那么您的指令将`withCredentials`不起作用。最佳实践是从请求中添加直接来源。在 PHP 中，您可以使用`$_SERVER['HTTP_ORIGIN'];`

ps您还可以将来源与您信任的域进行比较并提供有限的访问权限。

# android - Android 布局：如何避免嵌套权重？

> ID：14565621
> 
> 赞同：10
> 
> 时间：2013-01-28T15:42:58.380
> 
> 标签：android, layout, android-fragments, user-experience

伙计们。我正在尝试为包含 4 个不同片段、一个列表片段和三个与细节相关的片段的活动编写布局。我试着让它看起来像下图 ![在此处输入图像描述](../Images/75456cc117e6a1173e745b6fce239665.png)

使用 LinearLayout，我可以获得列表片段和详细信息区域（其他三个片段应该在的位置）之间的 30/70 比率。但是，在处理这三个片段时，我真的不知道如何将它们保持在我期望它们具有的比率内，因为您不能使用 weightSum 属性嵌套布局。

我一直在尝试使用 RelativeLayouts，但不想使用“wrap_content”值，因为某些内容比其他内容大，从而破坏了我想要实现的外观。

有没有办法做到这一点？我知道 TableLayouts，但 AFAIK 它们就像 HTML 表格：与数据一起使用的东西，而不是作为布局工具......

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T17:45:10.653

嵌套权重应该可以正常工作，尽管 eclipse 显示了“嵌套权重对性能不利”的提示，但我已经使用了几次。

您应该尝试以下方法：

```
<LinearLayout android:id="@+id/main_layout"
    android:layout_height="match_parent"
    android:layout_width="match_parent"
    android:weightSum="1"
    android:orientation="horizontal">

    <LinearLayout android:id="@+id/layout_fragment_a"
        android:layout_height="match_parent"
        android:layout_width="0dp"
        android:layout_weight="0.5"/>

    <LinearLayout android:id="@+id/layout_container_b_c"
        android:layout_height="match_parent"
        android:layout_width="0dp"
        android:layout_weight="0.5"
        android:weightSum="1"
        android:orientation="vertical">

        <LinearLayout android:id="@+id/layout_fragment_b"
            android:layout_height="0dp"
            android:layout_width="match_parent"
            android:layout_weight="0.7"/>

        <LinearLayout android:id="@+id/layout_fragment_c"
            android:layout_height="0dp"
            android:layout_width="match_parent"
            android:layout_weight="0.3"/>

    </LinearLayout>

</LinearLayout> 
```

这就是我其他时候的做法。xml 可能有一些失败和拼写错误（现在在响应框中写正确：P）但它应该可以帮助您了解这个想法：一个主要布局（main_layout）使用完整空间并包含两个二级布局，每个布局宽度为 50%（ fragment_a 和 container_b_C) 以及第二级布局中的另一个拖曳布局将该布局中的空间分割为 70/30 (fragment_b 和 fragment_c) :)

希望能帮助到你！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:03:44.017

为什么不尝试：

```
<LinearLayout android_width="30.0" android_height="fill_parent"/>
<LinearLayout android_width="50.0" android_height="fill_parent"/>
<LinearLayout android_width="50.0" android_height="fill_parent">
      <LinearLayout android_width="fill_parent" android_height="70.0"/>
      <LinearLayout android_width="fill_parent" android_height="30.0"/>
</LinearLayout> 
```

我没有测试它（现在不在我的 Eclipse 工作空间上），但这应该可以解决问题......

# python - float 没问题，int 给出错误的输出 python 2.7

> ID：14565622
> 
> 赞同：0
> 
> 时间：2013-01-28T15:42:59.293
> 
> 标签：python, numbers

> **可能重复：**
> [为什么这个除法在 python 中不起作用？](https://stackoverflow.com/questions/1787249/why-doesnt-this-division-work-in-python)

我有这个并且工作正常

```
def roi(stake, profit):
    your_roi = profit / stake * 100
    return your_roi

def final_roi():
    roi1 = roi(52, 7.5)
    print "%.2f"  % roi1

final_roi() 
```

但如果我将利润数字更改为 int（意味着权益和利润都将具有 int 值），例如 52、7，它给出的输出为 0.00。那里有什么问题？我认为它已被格式化为精度为 2 的浮点数。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:45:28.197

在 python2.x中，`/`如果两个参数都是整数类型，则进行整数除法（结果是整数，向下截断）。“简单”的解决方法是：

```
from __future__ import division 
```

在脚本的最顶部，或者在划分之前从其中一个参数中构造一个浮点数：

```
your_roi = float(profit) / stake * 100 
```

Python 也有一个整数除法运算符 ( `//`)，因此您仍然可以根据需要执行整数除法 - 即使您`from __future__ import division`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:45:41.880

如果利润为`integer`，则除法将是整数除法而不是双除法，您会将结果向下舍入到最接近的整数。即使您将数字格式化为浮动打印，它仍然是 0，因为它在上面的分配中被四舍五入。

# javascript - Youtube API javascript 错误（找不到 .swf 文件）

> ID：14565624
> 
> 赞同：0
> 
> 时间：2013-01-28T15:43:03.037
> 
> 标签：javascript, api, youtube, youtube-api

这里是网站。看起来我得到了三个 js 错误。

[http://thomaspalumbo.com/mostlymozart/](http://thomaspalumbo.com/mostlymozart/)

![我的 js 控制台](../Images/d1f7b753f410efd3de846f3c8fb01141.png)

“下一步”按钮在某些时候没有响应。我做了一些研究，但我不知道如何解决这些错误。我所有的 js 都在我的 index.html 文件中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:44:21.493

网站加载对我来说很好。你确定这不仅仅是你的错误吗？

# mongodb - $all 查询不返回结果

> ID：14565629
> 
> 赞同：1
> 
> 时间：2013-01-28T15:43:21.343
> 
> 标签：mongodb

我正在我的 Auction 收藏中尝试进行此类查询，目的是返回所有文档，其中包含：`item == 2770`和`dump == ObjectId("5104f03a46ab64d404000000") or ObjectId("51067f4946ab644003000000") or ObjectId("5106924e46ab64c81c000000")`.

```
{
    item: 2770,
    dump: {
        $all: [
            ObjectId("5104f03a46ab64d404000000"),
            ObjectId("51067f4946ab644003000000"),
            ObjectId("5106924e46ab64c81c000000")
        ]
    }
} 
```

这个查询没有返回任何东西，但是这个（请注意，我使用 $all 运算符中包含的转储）返回给我一个文档列表。我是否忽略了有关 $all 运算符行为的某些内容？

```
{
    item: 2770,
    dump: ObjectId("5106924e46ab64c81c000000")
} 
```

这是我的拍卖收藏中的文档示例

```
{
    _id: ObjectId("5106924e46ab64c81c000237"),
    auc: 1560105766,
    item: 2770,
    owner: "Ozrael",
    bid: 450000,
    buyout: 450000,
    quantity: 20,
    timeLeft: "VERY_LONG",
    dump: ObjectId("5106924e46ab64c81c000000"),
    faction: "horde",
    bidPricePerUnit: 22500,
    buyoutPricePerUnit: 22500
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T15:28:58.030

我在查询中使用了错误的运算符，[$all](http://docs.mongodb.org/manual/reference/operator/all/)匹配整个数组，如文档中所述。

匹配包含任一指定值的文档的正确运算符是[$in](http://docs.mongodb.org/manual/reference/operator/in/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:51:52.193

当您使用`$all`时，结果集的每个文档都应该具有所有提到的值。您示例中的文档应具有以下结构：

```
{
    _id: ObjectId("5106924e46ab64c81c000237"),
    auc: 1560105766,
    item: 2770,
    owner: "Ozrael",
    bid: 450000,
    buyout: 450000,
    quantity: 20,
    timeLeft: "VERY_LONG",
    dump: [
            ObjectId("5104f03a46ab64d404000000"),
            ObjectId("51067f4946ab644003000000"),
            ObjectId("5106924e46ab64c81c000000")
          ],
    faction: "horde",
    bidPricePerUnit: 22500,
    buyoutPricePerUnit: 22500
} 
```

# internet-explorer-8 - angularjs locationprovider Internet Explorer 8

> ID：14565630
> 
> 赞同：2
> 
> 时间：2013-01-28T15:43:25.163
> 
> 标签：internet-explorer-8, angularjs

我正在使用 angular.js 并且遇到了 IE8 问题。

它将我的站点从 examplepage.local/the/path 重定向到 examplepage.local/#/the/path 并显示一个空白页面。

我已经激活了 HTML5Mode

```
$locationProvider.html5Mode(false); 
```

它在 chrome 或 firefox 等浏览器中运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-05T09:15:06.650

在 Angular 的文档中，它说：“在旧版浏览器中打开常规 URL -> 重定向到 hashbang URL”，所以这似乎是预期的行为。

但是，这里有一些信息供您参考。一个人确实解决了它并为它发布了一个片段。

[https://groups.google.com/forum/#!topic/angular/XujWvUl0nXg](https://groups.google.com/forum/#!topic/angular/XujWvUl0nXg)

# magento - 用于图像的第二个 Linux 服务器（与 Magento 组合）

> ID：14565631
> 
> 赞同：0
> 
> 时间：2013-01-28T15:43:27.833
> 
> 标签：magento, ubuntu, media

我在 Magento 网上商店工作，我有两台服务器。1) www.myserver.com 2) media.myserver.com

每天晚上，服务器 1 媒体文件夹中的内容都会复制到服务器 2 的媒体文件夹中。

所以在服务器 2 上我**只有**图像（没有 php 等），但我想加快速度:-) 这样做的正确方法是什么？我怎样才能加快速度？我需要什么样的缓存。

我应该使用 Apache，还是有其他服务器只用于媒体文件？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:36:04.820

Nginx 被认为是该任务的合适候选者。您可能会发现这个问题很有趣 [Nginx 为 apache 提供静态内容和代理](https://stackoverflow.com/questions/6392296/nginx-serving-static-content-and-proxy-to-apache)

# regex - 在每次出现异常之前添加“std::”的 Sed 脚本（在 catch 中）

> ID：14565639
> 
> 赞同：0
> 
> 时间：2013-01-28T15:43:48.250
> 
> 标签：regex, sed

我的任务是在公司重新编译一个遗留的 C++ 项目，在创建一个 32 位 chroot 之后，完成编译依赖项的所有无聊工作等等，我终于发现大多数文件都使用标准的异常类无需添加 'using namespace std' 或在其前面加上 'std::'。

我创建了一个简单的 sed 脚本来批量更改所有文件。但有时替换不是我想要的。我的脚本是这样的：

`sed -r 's/(catch.*)[^std::](exception)/\1 std::\2/' File.cpp`

但是当我运行它时，我会得到这样的东西（只是替换）：

```
}catch std::exception& e){
}catch(const std::exception& e){
}catch(const std::exception& e){ 
```

原来的行是这样的：

```
}catch(exception& e){
}catch(const exception& e){
}catch(const exception& e){ 
```

因此，当 catch 后面跟着“（异常”）时，我遇到了问题，并且当它后面跟着 (const ...) 时它工作正常

我试图通过尝试匹配第一个反向引用表达式中的 ( 即通过将其更改为 "(catch.*\()" 来稍微更改正则表达式，但它仍然不起作用。

任何人都可以帮我解决这个问题吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:54:04.520

`[^std::]`不做你认为它做的事，它匹配一个不是`'s'`, `'t'`, `'d'`, or之一的单个字符`':'`，并且它匹配的任何字符都不会被放回你的替换中，这就是你丢失`(`字符的原因。另外，我敢打赌，如果您仔细观察，您已经更改`catch(const exception`为`catch(const  std::exception`额外的空间。

你可能想要：

```
sed -r 's/(catch.*[^:])(exception)/\1std::\2/' File.cpp 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:57:14.420

该`[^std::]`部分是伪造的，因为它匹配*不是*,或的*单个*字符，这不是您想要的。相反，您希望跳过包含该零件的所有实例。这对我有用： *`s``t``d``:``std::exception`*

 *```
sed -r '/catch.*std::exception/!s/(catch.*)(exception)/\1 std::\2/' File.cpp 
```*

# jquery - 由于较低的表格拉伸固定标题宽度

> ID：14565640
> 
> 赞同：0
> 
> 时间：2013-01-28T15:43:49.470
> 
> 标签：jquery, css, internet-explorer-8

我有一个流畅的布局。标题在 div 上有一个背景中继器 1x100 png。它根据需要填充到视口的右侧。

但是，在这个页面的主体 div 中还有一个数据表。而且，在大多数视口上，它会导致水平滚动，因为其中有很多东西。

向右滚动时，标题不存在。

有没有办法使用 jquery 或其他方式使标题拉伸到表格的宽度？在渲染之前，我不知道桌子有多大。我尝试用 110% 和其他宽度来修改它，但它永远不会准确取决于内容，因为表格是流畅的，也没有空白换行符，并且更长的标题会拉伸单元格。

这是一个 ie8 内网，因此任何修复都必须在此浏览器中工作。

html 非常基本，pseducode 看起来像

```
<div id=wrap>
<div id=header></div>
<div id=tablearea><table>WIDE TABLE HERE</table></div>
</div> 
```

我希望包装器会在调整大小时拉伸，但事实并非如此。

有什么技巧可以让标题正确绘制吗？我喜欢直接使用 CSS，但不反对 javascript/jquery hack。

同样，ie8 是我们的产品线（不幸的是），所以它必须在这方面发挥作用。

我做了一个快速的油漆工，但是所有的 imgur、tinypic 等网站都在办公室被封锁，所以我似乎无法在任何地方托管它。如果有人对此也有任何提示，将不胜感激（通过下午）。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T17:09:00.010

[http://jsfiddle.net/cZ9Vu/1](http://jsfiddle.net/cZ9Vu/1)

```
#wrap, #tablearea {overflow-x: auto;} 
```

# android - Android - 缺少 AndroidManifest 声明的错误在哪里？

> ID：14565641
> 
> 赞同：2
> 
> 时间：2013-01-28T15:43:54.690
> 
> 标签：android, service, android-manifest

我有一些服务，它的唯一工作方式是在 AndroidManifest.xml 中定义它。但是，如果我不注册它，那么我希望日志中的某个地方会出现错误。这是真的吗，如果是的话，错误在哪里？如果不是，那么没有记录错误是否合理？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:49:44.057

它应该做一个日志。我认为它说明了一些类似的东西

> 找不到 .YourServiceName 您是否在清单中声明了此项目？

在您致电时，您的日志中应该有类似的内容`startService();`

# c# - C# HttpClient.SendAsync HttpMethod.Get - 如何使用附加值更新 cookie

> ID：14565645
> 
> 赞同：1
> 
> 时间：2013-01-28T15:44:08.140
> 
> 标签：c#, http-headers, asp.net-web-api, dotnet-httpclient, sendasync

我正在尝试使用 C# HttpClient 类发送带有 cookie 的 Http Get 消息。 `HttpClient.GetAsync`只接受 URL。所以，我不能使用那种方法。我发现该`HttpClient.SendAsync`方法让我可以通过以下方式发送 cookie。

```
HttpRequestMessage GETRequest = new HttpRequestMessage(HttpMethod.Get, completeUrl);
GETRequest.Content = new FormUrlEncodedContent(formVals);
HttpResponseMessage GETResponse = client.SendAsync(GETRequest).Result; 
```

但是在执行时，它会说 -

> “无法发送具有此动词类型的内容主体”

我知道 Get 消息是获取数据而不是发布数据的理想选择。但在我的情况下，cookie 存储在客户端以保存客户端首选项，我必须通过 Http Get 消息（通过 HttpClient 类）将它们发送给客户端。

我不想重新初始化 HttpClient 对象；这将改变它的 SessionID。我不想将内容添加到获取消息。我只是问是否有任何其他方法可以使用附加值更新获取消息 cookie。

请告诉我如何处理这个问题。提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:50:51.003

您应该使用 CookieContainer 类，如本[答案](https://stackoverflow.com/a/12374486/1966937)所示。这将在 HTTP 标头中设置 cookie（它们应该放置的位置）。

# android - Gson 2.2.2 仅在 4.2.1 上导致 stackoverflow

> ID：14565647
> 
> 赞同：10
> 
> 时间：2013-01-28T15:44:13.473
> 
> 标签：android, json, gson, stack-overflow, android-4.2-jelly-bean

我正在为 android 开发一个应用程序，它使用 JSON 字符串从服务器下载兴趣点。一切正常，但自从我开始在 4.2.1 上进行测试后，我收到了以下错误：

```
01-28 15:32:14.167: E/AndroidRuntime(31174): FATAL EXCEPTION: AsyncTask #1
01-28 15:32:14.167: E/AndroidRuntime(31174): java.lang.RuntimeException: An error occured while executing doInBackground()
01-28 15:32:14.167: E/AndroidRuntime(31174):    at android.os.AsyncTask$3.done(AsyncTask.java:299)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at java.util.concurrent.FutureTask.finishCompletion(FutureTask.java:352)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at java.util.concurrent.FutureTask.setException(FutureTask.java:219)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at java.util.concurrent.FutureTask.run(FutureTask.java:239)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at android.os.AsyncTask$SerialExecutor$1.run(AsyncTask.java:230)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1080)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:573)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at java.lang.Thread.run(Thread.java:856)
01-28 15:32:14.167: E/AndroidRuntime(31174): Caused by: java.lang.StackOverflowError
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:371)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:375)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:380)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.$Gson$Types.resolve($Gson$Types.java:355)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:117)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.Gson.getAdapter(Gson.java:353)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.<init>(ReflectiveTypeAdapterFactory.java:82)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.createBoundField(ReflectiveTypeAdapterFactory.java:81)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:118)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.Gson.getAdapter(Gson.java:353)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.<init>(ReflectiveTypeAdapterFactory.java:82)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.createBoundField(ReflectiveTypeAdapterFactory.java:81)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.getBoundFields(ReflectiveTypeAdapterFactory.java:118)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory.create(ReflectiveTypeAdapterFactory.java:72)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.Gson.getAdapter(Gson.java:353)
01-28 15:32:14.167: E/AndroidRuntime(31174):    at com.google.gson.internal.bind.ReflectiveTypeAdapterFactory$1.<init>(ReflectiveTypeAdapterFactory.java: 
```

奇怪的是，它在我尝试过的所有其他版本上都能正常工作......

这是我认为它崩溃的行：

```
 Gson g = new Gson();
    JSONResponse jsonResponse = g.fromJson(serverReply, JSONResponse.class); <--- 
```

和我正在尝试创建的课程：

```
/**
 * The JSONResponse from the server
 * @author Tom
 *
 */
public class JSONResponse {
    private String          status;
    private PointOfInterest result;

    /**
     * Creates a JSONResponse object 
     * @param json
     * @return
     */
    static JSONResponse convertJSONToResponse(String json){
        Gson gson = new Gson();
        JSONResponse jsonResponse = gson.fromJson(json, JSONResponse.class);
        return jsonResponse;
    }

    /**
     * Get Point of Interest
     */

    public PointOfInterest getPointofInterest(){
        return result;
    }

    public String getStatus(){
        return status;
    }

    /**
     * Get PrivateSection, area we can put our own data
     */
    /*
    public String getPrivateSection(){
        return privateSection;
    }
    */
    /**
     * Creates a JSONResponse object 
     * @param json
     * @return
     */
    String convertJSONResponseToJSON(){
        Gson gson = new Gson();
        return gson.toJson(this);
    }
} 
```

请注意我知道我在这里使用的糟糕的设计模式，这个应用程序是为我在大学学习的移动应用程序课程，所以放轻松！

**编辑** 原来将 gson 降级到 1.7.1 对我有用。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-28T17:15:40.823

事实证明，正如 Erik Nedwidek 指出的那样，这是一个错误。我采取了简单的方法并将 gson 从[2.2.2](http://code.google.com/p/google-gson/downloads/detail?name=google-gson-2.2.2-release.zip)降级到[1.7.1](http://code.google.com/p/google-gson/downloads/detail?name=google-gson-1.7.1-release.zip&can=2&q=)，现在一切都很好！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T15:57:16.390

查看此错误报告。[http://code.google.com/p/google-gson/issues/detail?id=440](http://code.google.com/p/google-gson/issues/detail?id=440)

评论 #12：

> 我相信是在 API 17 中，WeakReference 和 SoftReference 的内部更改为自引用，这会触发这种情况。你是在使用 Gson 来序列化 WeakReference 还是 SoftReference？如果是，您应该为这些类型编写自己的 TypeAdapter。

您的代码中的某些内容导致了循环引用，并且由于它一直工作到 4.2.1 (API 17)，它很可能是 Java 类之一。它仍然可能是您的代码，但我非常怀疑。

# python - 无法在日期时间字段中使用 python 和 mysql 插入无

> ID：14565652
> 
> 赞同：0
> 
> 时间：2013-01-28T15:44:23.207
> 
> 标签：python, mysql, datetime, insert, null

考虑以下代码：第一个查询不起作用，而第二个查询起作用。问题是......因为我需要通过一个函数预先编写一个查询，所以这个函数返回一个变量作为'val'。所以我需要让第一个查询工作。第二个查询仅通过示例添加，以显示当按字面意思使用“val”的内容时会发生什么。请帮忙！所以，我想插入一个日期时间，但也可以接受“无”。当前的错误是：

```
 query = query % db.literal(args)
TypeError: not enough arguments for format string 
```

现在脚本：

```
#!/usr/bin/python

import MySQLdb as mdb

def prepare():
# Assume a database named 'db_test'
    conn = mdb.connect(host   = 'localhost', \
                       user   = 'test',      \
                       passwd = 'test',      \
                       db     = 'db_test')

    cur = conn.cursor()

    cur.execute("DROP TABLE IF EXISTS TBL_TEST")
    cur.execute("CREATE TABLE TBL_TEST(Moo1 DATETIME, Moo2 DATETIME)")

    return cur

if __name__ == '__main__':
    qry = "INSERT INTO TBL_TEST (Moo1, Moo2) VALUES (%s, %s)"
    val = "('2012-04-03 08:40:39', None)"

    cur = prepare()
    cur.execute(qry, val) # NOK
    cur.execute("INSERT INTO TBL_TEST (Moo1, Moo2) VALUES (%s, %s)", ('2012-04-03 08:40:39', None)) # OK 
```

相信我 - 我搜索了世界但没有任何成功..提前谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:47:35.200

你`val`是一个字符串，它应该是一个元组：

```
val = ('2012-04-03 08:40:39', None) 
```

# jquery - 用作 javascript 触发器的 CSS 属性/值多好啊

> ID：14565659
> 
> 赞同：-1
> 
> 时间：2013-01-28T15:44:45.057
> 
> 标签：jquery, html, css, media-queries

我想以特定的屏幕尺寸将 DOM 对象移动到另一个对象中。我[受到这个答案的启发，](https://stackoverflow.com/a/6461561/1127213)但我使用的布局可以通过 LESS 更改，所以即使它我在我不想用作触发器的对象上使用固定宽度。我喜欢它，因为它是轻量级的，而且它需要 equire.js 或 modernizr 之类的东西来模拟媒体查询，而且它很适合我的目的。

我现在使用 1px 的下边距，但我对此并不满意，所以我正在寻找最无用且意义更少的 CSS 来使用它作为触发器。我听说过 css3 的“迁移”，但似乎它仍然是一个不完整的草案，并且没有在任何浏览器中实现。如果我是对的浏览器甚至没有阅读它。至少它没有出现在萤火虫中。

这就是我所做的：

css

```
@media screen and (min-width: 768px) {

    .sidebar-secondary {
        margin-bottom: 1px;
    }

}

@media screen and (min-width: 992px) {

    .sidebar-secondary {
        margin-bottom: 0;
    }

} 
```

js

```
var sidebar_move = function(){
    if ( $(".sidebar-secondary").css("margin-bottom") === "1px") {
        $(".sidebar-secondary").appendTo(".sidebar-primary");
    }
}

window.setInterval(sidebar_move, 1000); 
```

知道我是否可以使用“无用”的 CSS 值。一些没有人使用的东西。我喜欢它对我来说尽可能没有冲突，并且从其他人那里改变 css 不应该受到干扰，所以保证金是一个非常糟糕的解决方案。

由于几乎每个人似乎都认为我应该用 java 脚本来膨胀我的代码，我想知道这样做的原因。

顺便说一句，如果我理解这一点，我认为这比用javascript拉窗口宽度更可靠，这就是为什么存在像eqire.js这样的复杂脚本还是我错了？

让 js 依赖 css 有什么不好？我想将它用于这个特定的事情，而不是别的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:53:40.907

我只是建议使用[Enquire.js](http://wicky.nillia.ms/enquire.js/)：它可能很有用，而不涉及无用的 css 规则

您的示例只是：

```
enquire.register("screen and (min-width:768px)", {

    match : function() { 
        $(".sidebar-secondary").appendTo(".sidebar-primary"); 
    },

    unmatch : function() {
        /* e.g. remove .sidebar-secondary from .sidebar-primary */
    }
}).listen(); 
```

我认为这种方法比使用依赖于 css 规则的 javascript 更干净。事实上，你建议的方法

*   您的应用程序的维护变得更加困难（除了您之外，任何人都可能破坏页面的功能，只需更改该特定规则即可）；
*   javascript 和 css 是严格绑定的，当一个好的规则是让 css 远离 javascript（反之亦然）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-15T16:03:33.673

我一直在使用类似于您一直在做的事情（我知道这是一岁了，但它似乎没有 OP 想要的答案，这是我自己的谷歌搜索带来的第一个链接之一向上）。

```
/*  Normal CSS  */
.mediaQueryTracker {
     width:auto;
}

/* Mobile Example */
@media only screen and (max-width: 479px) {
     .mediaQueryTracker {
          width:479px;
     }
} 
```

至于Javascript：

```
var mobile_handler = function() {
    if ( $(".mediaQueryTracker").css("width") != "auto") {
        // Do stuff
    }
} 
```

您可以将此类分配给一个显示为 hidden 或 none 的 empy div，或者您可以让您的主容器或包装在 HTML 中为其分配 mobileQueryTracker 类，但该值将根据当前的媒体查询而改变。您可以通过检查它是否未设置为自动来为每个指定的尺寸或仅“捕获所有”移动尺寸做特定的事情。

更简单的是，您可以跳过“mobileQueryTracker”名称，只使用容器的宽度或换行。

# php - 尝试使用 ajax 提交表单，但 $_POST-array 为空

> ID：14565664
> 
> 赞同：-1
> 
> 时间：2013-01-28T15:45:00.553
> 
> 标签：php, javascript, jquery, ajax

我正在尝试使用 ajax 将 javascript 数组发送到新页面。关于 SO 有很多问题，在搜索完答案后，我决定像这样使用 Ajax：

```
var test = {}; 
test['a1'] = 1;  
test['a2'] = 2;

$(document).ready(function(){
$('#form').submit(function(e){

    $.ajax({
        url: 'newpage.php',
        data: {test:test},
        type: 'post',
        success: function(data) {
        alert(data);
        }
    });
    window.open('newpage.php', 'formres','width=800,height=800,resizeable,scrollbars');
    e.preventDefault();
});

}); 
```

它的工作原理是新窗口按原样打开 - 但 $_POST 数组为空。我究竟做错了什么？

编辑：我试过 {test:test}, {'test':test} 并且只是测试。我将尝试序列化数据，看看会发生什么。@Louis H：谢谢，没想到。我将尝试使用 Firebug。非常感谢，你们所有人！

Edit2：尽管测试数组没有通过，但我仍然感到困扰。正如 Kevin B 指出的那样，发布请求应该包含参数 a1 和 a2，但事实并非如此。如果我发现我做错了什么，我会再次发布。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:03:00.503

尝试

```
$(this).serialize() 
```

为您的数据。这会将表单序列化为正确的发布数据，$_POST 可以使用这些数据

更多信息：[http ://api.jquery.com/serialize/](http://api.jquery.com/serialize/)

也许你想在弹出窗口中显示这篇文章的结果？那么你应该在回调函数中打开窗口。

```
$('#form').submit(function(e){

    $.ajax({
        url: 'newpage.php',
        data: $(this).serialize(),
        type: 'post',
        success: function(data) {
            alert(data);
            window.open('newpage.php', 'formres','width=800,height=800,resizeable,scrollbars');
        }
    });

    return false;
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:09:18.650

嗯，请尝试添加

```
'async': false, 
```

这用于在打开新窗口之前等待发送 POST。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-02-17T09:34:05.403

两年后，我发现这仍然有意义。必须为 设置内容标题`POST`，在 Javascript 中，您可以这样做：

```
 xhr.setRequestHeader("Content-type", "application/x-www-form-urlencoded"); 
```

# c++ - 寻找具有点积、叉积和其他常见操作的良好 3D 空间矢量类

> ID：14565672
> 
> 赞同：1
> 
> 时间：2013-01-28T15:45:21.957
> 
> 标签：c++, vector, geometry

3D 空间向量被广泛使用。但是我找不到一个专门用于它的好的小型图书馆。有人有好的建议吗？小型库可以有一些基本的几何实体，例如三角形。非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:57:13.930

试试 GLM。它是免费且跨平台的。我已经使用过它，一旦你通过了糟糕的文档，它就相当不错了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T18:30:22.087

您可能还对[Boost 的 uBLAS 感兴趣](http://www.boost.org/doc/libs/release/libs/numeric/ublas/doc/index.htm)

# ios - 创建缓冲区 OpenGLES 2

> ID：14565675
> 
> 赞同：0
> 
> 时间：2013-01-28T15:45:32.247
> 
> 标签：ios, opengl-es-2.0, render, framebuffer

我在使用 opengles 创建帧缓冲区时遇到了一些问题。对于我的应用程序，我像这样创建主帧缓冲区：

```
glGenFramebuffers( 1, &viewFramebuffer );
glGenRenderbuffers( 1, &viewRenderbuffer );

glBindFramebuffer( GL_FRAMEBUFFER, viewFramebuffer );
glBindRenderbuffer( GL_RENDERBUFFER, viewRenderbuffer );
[ Context renderbufferStorage : GL_RENDERBUFFER fromDrawable : ( CAEAGLLayer* )self.layer ];
glFramebufferRenderbuffer( GL_FRAMEBUFFER, GL_COLOR_ATTACHMENT0, GL_RENDERBUFFER, viewRenderbuffer );

glGetRenderbufferParameteriv( GL_RENDERBUFFER, GL_RENDERBUFFER_WIDTH, &backingWidth );
glGetRenderbufferParameteriv( GL_RENDERBUFFER, GL_RENDERBUFFER_HEIGHT, &backingHeight );

if ( itUsesDepthBuffer )
{
    glGenRenderbuffers( 1, &depthRenderbuffer );
    glBindRenderbuffer( GL_RENDERBUFFER, depthRenderbuffer );
    glRenderbufferStorage( GL_RENDERBUFFER, GL_DEPTH_COMPONENT16, backingWidth, backingHeight );
    glFramebufferRenderbuffer( GL_FRAMEBUFFER, GL_DEPTH_ATTACHMENT, GL_RENDERBUFFER, depthRenderbuffer );
}

if ( glCheckFramebufferStatus( GL_FRAMEBUFFER ) != GL_FRAMEBUFFER_COMPLETE )
{
    NSLog( @"failed to make complete framebuffer object %x", glCheckFramebufferStatus( GL_FRAMEBUFFER ) );
    [ self destroyFramebuffer ];

    return NO;
} 
```

但是函数 glGetRenderbufferParameteriv 为 GL_RENDERBUFFER_WIDTH 和 GL_RENDERBUFFER_HEIGHT 返回 0，最终 glCheckFramebufferStatus 返回错误，因为帧缓冲区附件不完整。

你知道为什么会这样吗？

先感谢您。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-04T14:04:40.560

好的，我修复了它，它无法呈现缓冲区存储：

```
[ Context renderbufferStorage : GL_RENDERBUFFER fromDrawable : ( CAEAGLLayer* )self.layer ]; 
```

出于某种原因，我的“self.layer”没有返回正确的。

# java - 尝试使用海象进行图形可视化时出现 Java NoclassDefFoundError

> ID：14565678
> 
> 赞同：0
> 
> 时间：2013-01-28T15:45:37.573
> 
> 标签：java, graph, walrus

我在尝试使用海象进行图形可视化时遇到了这个 NoclassDefFoundError，尽管我安装了 J3D。我正在使用以下命令

```
java -cp  mp.jar;antlrall-mod.jar;libsea.jar;walrus.jar H3Main 
```

在窗户上。

有人可以帮忙吗？

# sql - 如何保护部署到另一个实体的应用程序中的数据和更新数据？

> ID：14565680
> 
> 赞同：1
> 
> 时间：2013-01-28T15:45:40.140
> 
> 标签：sql, vb.net, security, refresh, data-protection

我开发了一个带有携带数据的 SQL Server 的 VB.Net 应用程序。

此应用程序将部署到另一个业务。该应用程序允许用户生成基本费用和调整后的费用，并以 PDF 文档的形式输出。该应用程序与 Microsoft Office 交互。

我希望基本费用得到保护。用户可以通过应用程序界面调整他们的费用，但基本费用总是由我指定并偶尔更新。

- 有没有办法在他们的位置保护 SQL Server，这样即使他们的 DBA 也无法更改数据？

- 将新数据发送到他们的安装的最干净的方法是什么？

我的想法是发送一个带有当前值的小型密码保护、带时间戳的 Access 数据库。然后，应用程序将在应用程序启动时将 Access 字段加载到 SQL Server 数据库。

这是一个坏主意吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:21:10.123

> 有没有办法在他们的位置保护 SQL Server，这样即使他们的 DBA 也无法更改数据？

不可以。如果用户可以物理访问数据，他们可以修改数据。即使您能够使用某种全盘加密方案或类似的方式来存储数据库，您的应用程序也必须以某种方式读取它。

> 将新数据发送到他们的安装的最干净的方法是什么？

我必须同意@RB。多于。要么将数据存储在您控制并具有某种客户端/服务器模型的机器中，要么让您的应用程序每隔几个小时或一天检查一次新值或类似的东西。

当然，也可以截获和修改通过网络传输的数据，因此如果数据存储在客户的机器上，您的更新可能会很顺利。

# css - jquery-ui 1.9.2 上可拖动 div 的堆栈选项重置元素 z-index

> ID：14565682
> 
> 赞同：0
> 
> 时间：2013-01-28T15:45:46.560
> 
> 标签：css, jquery-ui, z-index, draggable, jsplumb

我有几个（动态生成的）div，它们的 z-index 在 css 中设置为 120：

```
.plugin {
        position: absolute;
        z-index: 120;
    } 
```

它们包含一个标题（位于顶部）和一个画布：

```
.plugin_title {
        font-size: 13px;
        color: rgba(255, 255, 255, 0.9);
        font-family: arial;
        background-color: #300;
        z-index: 150;
    }
.plugin_canvas {
        position: relative;
        background-color: black;
        border: 1px solid #300;
        border-bottom-right-radius: 5px;
        z-index: 120;
    } 
```

当我创建它们时，我会：

```
var div = $( '<div class="plugin ' + audioclass + '" id="'+ id + '"</div>').width(width + 2).height(height + 2);
var ctx = $( '<canvas class="plugin_canvas" width="' + width + '" height="'+ height + '" />', {width: width, height: height} );
var title = $( '<div class="plugin_title"> ' +name + ' </div>');
title.appendTo(div);
ctx.appendTo(div);
div.appendTo('#plugin_area'); 
```

然后调用`jsplumb.draggable`使它们可拖动（jsplumb 只是调用 jquery's `.draggable()`）

```
jsPlumb.draggable(div, {cursor: "move", handle: title, opacity: 0.9, stack: ".plugin", scroll: true}) 
```

问题是当我拖动其中一个 .plugin div 时，它的 z-index 被重置为 1（并且每次拖动它时都会增加，因为该`stack`选项）。相反，我希望 z-index 从 120（.plugin div 的原始 z-index 值）开始并从该值递增。

jqueryui 1.7 有一个`min`用于该`stack`选项的参数。在jqueryui 1.9.2（我正在使用的版本）中，您只能指定一个选择器，并且据我所知，堆叠应该从元素预先存在的z-index开始。相反，它似乎在 1 处任意重新开始。我错过了什么？

（jsplumb：1.3.16，jqueryui：1.9.2，jquery：1.8.1。请注意我不能回滚到旧版本的 jquery-ui）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T13:45:57.223

解决使用

```
$(".plugin").each(function() {
            // always use a radix when using parseInt
            var index_current = parseInt($(this).css("zIndex"), 10);
            if((20 - index_current) > 0) {
                $(this).css("zIndex", 20 + index_current);
            }
        }); 
```

还在 jqueryUI 中报告并修复了[错误](http://bugs.jqueryui.com/ticket/9077)。

# javascript - 适用于 Android 的指南针/方向模型

> ID：14565699
> 
> 赞同：3
> 
> 时间：2013-01-28T15:46:31.457
> 
> 标签：javascript, android, api, compass-geolocation

我想知道您是否可以就我正在为 Android 应用程序编写 Javascript 编码的项目提供帮助。我们正在寻找一个模型来存储我们的指南针/方向值，并找到了 2009 w3c 文档[The Compass API](http://dev.w3.org/2009/dap/system-info/compass.html)

该文档建议将以下模型用作 Web IDL 对象：

```
interface Orientation : Object {

    readonly attribute DOMTimeStamp timestamp;
    readonly attribute float        declination;
    readonly attribute float        fieldStrength;
    readonly attribute float        horizontalStrength;
    readonly attribute float        inclination;
    readonly attribute float        x;
    readonly attribute float        y;
    readonly attribute float        z;

}; 
```

我们想知道这是否是用于创建指南针或方向对象的最佳模型，或者是否有任何更新或替代方案？

非常感谢

莱斯利

# sqlite - bb10 中的 SQLite 加密

> ID：14565710
> 
> 赞同：1
> 
> 时间：2013-01-28T15:46:52.533
> 
> 标签：sqlite, encryption, blackberry-10

我需要知道是否有一种方法可以在黑莓 10 操作系统中加密我的**整个**数据库，因为我尝试将我的 android 应用程序转移到 BB10。从我在互联网上的搜索中，我没有找到任何有用的东西可以提供帮助。我确实知道黑莓 10 默认情况下使用了很好的加密，但我想知道是否还有更多我可以使用的东西。

我需要一些可以像我在 Android 上使用的[SQLCipher一样工作的东西。](http://sqlcipher.net/)我可以使用任何备份计划吗？

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T06:28:36.730

我不确定你真正想要什么：

*   是否要使用 Android 运行时打包您的应用程序（apk 到 bar 的转换）

> Blackberry Android 运行时的一大限制是您不能使用本机库。似乎 SQLCypher 是本机的，因此您将无法使用它。我看到两种选择：
> 
> *   确保您的应用程序将 SQL DB 保存到安全存储中，并信任 BlackBerry。
>     
>     
> *   找到一种解决方法，加密数据库的值或使用内存支持的数据库并在序列化数据时加密数据。

或者

*   你想将你的 android 应用程序移植到 Cascades 吗？简短的回答是你可以编译和捆绑你想要的任何库与你的 BB10 应用程序。

> 您应该尝试为 BB10 编译 SQLCypher。OpenSSL (libcrypto) 已经是 SDK 的一部分，因此您应该能够使用它。
> 
> 使用随 BB10 SDK 安装的快捷方式启动带有 SDK 环境变量的终端，以编译 SQLCypher。
> 
> 然后，一旦你有了你的库 (.so) 和头文件 (.h)，将它们复制到你的项目中以使用它们。一个小问题是模拟器使用 x86 而设备使用 arm 代码，因此您必须确保您的“.pro”文件和“bar-descriptor.xml”考虑到这些情况。

# c - 使用 char * 返回字符串的内联声明

> ID：14565712
> 
> 赞同：3
> 
> 时间：2013-01-28T15:47:04.470
> 
> 标签：c, char

先给大家打个招呼，先在这里发帖。

今天我发现自己想知道这段代码是否正确，它是一个朋友为微控制器写的，我没有机会再问他了。

该程序运行正常，但我无法真正决定它是否靠运气运行（不要相信编程运气）。我什至不知道这篇文章的标题是否正确，如果有误导，请见谅。编码：

```
char  *textStatusErrorMessage( unsigned int codeStatus )
{
    switch ( codeStatus ) {

    case STATUS_1:
        return ( (char  *) " Status: 1 " );
        break;     
    case STATUS_2:
        return ( (char  *) " Status: 2 " );
        break;      
    default:
        sprintf( tmpBuf, " UNKNOWN STATUS   %03d ", codeStatus );
        return ( (char  *) tmpBuf ); //tmpBuf is global
        break;
    }
} 
```

更确切地说，这种语法对我来说有点晦涩难懂。

```
return ( (char  *) " Status: 1 " ); 
```

它返回一个字符 * 什么？“状态：1”字符串保存在哪里？堆/栈？？？

由于它的实现，字符串在函数的范围内，我假设在使用 return 语句离开函数后，我无法控制函数本身返回的指针中将写入的内容。

从我看到的方式来看，我将拥有一个具有不同可能字符串选项的全局数组，并返回一个指向 CASE 选择的正确选项的指针。所以我知道我返回的指针指向一个定义明确的内存区域。

那么这段代码是否错误？哪个是最正确的解决方案？

谢谢丹

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T15:50:36.040

理论上，这段代码是有效的；字符串文字（例如`" Status: 1 "`）的类型为`char[]`，并且生命周期等于整个程序的生命周期。

但是，有几个问题：

1.  在字符串文字的情况下，如果有任何东西试图修改返回的字符串，那么就会发生**未定义的行为**。实际上，这个函数应该返回 a `const char *`。

2.  不清楚在哪里`tmpBuf`声明，也不清楚它是否指向足够的内存来保存正在写入的数据。

3.  只有*一个* `tmpBuf`，所以每次调用这个函数时，`tmpBuf`都会被覆盖。这可能会导致难以跟踪的错误。

4.  演员表是不必要的。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T15:51:07.413

> 它返回一个`char *`什么？

它将`char[]`字符串文字是的转换为 a `char*`。这不是必需的，因为它会自动转换为`char*`那里。

> “状态：1”字符串保存在哪里？堆/栈？？？

Typically, string literals are stored in the data (or rodata) segment of a programme. But that isn't important, what's relevant is that string literals have static storage duration, so the code is valid and the returned pointers don't point to local variables that don't exist after the function returns.

# c# - winforms - MDI 表单中的消息框在应用程序关闭之前多次显示

> ID：14565716
> 
> 赞同：0
> 
> 时间：2013-01-28T15:47:14.467
> 
> 标签：c#, winforms, visual-studio-2010, mdi

我知道即使在 StackOverflow 中也有类似问题的示例，但我很难理解问题的性质，因此 - 解决我的自定义案例。

我现在拥有的是这段代码：

```
bool closingPending = false;
private void MyFormN_FormClosing(object sender, FormClosingEventArgs e)
        {
            if (closingPending) return;
            //DialogResult answer = MessageBox.Show("Do you want to save changes ?", "Save",
            if (MessageBox.Show("Do you want to save changes ?", "Save",
                                   MessageBoxButtons.YesNoCancel,
                                   MessageBoxIcon.Information,
                                   MessageBoxDefaultButton.Button3) == DialogResult.Yes)
            {
                closingPending = true;
                MessageBox.Show("To Do - validate and save");
            }
            if (MessageBox.Show("Do you want to save changes ?", "Save",
                                   MessageBoxButtons.YesNoCancel,
                                   MessageBoxIcon.Information,
                                   MessageBoxDefaultButton.Button3) == DialogResult.Cancel)
            {
                closingPending = true;
                e.Cancel = true;
            }
            if (MessageBox.Show("Do you want to save changes ?", "Save",
                                   MessageBoxButtons.YesNoCancel,
                                   MessageBoxIcon.Information,
                                   MessageBoxDefaultButton.Button3) == DialogResult.No)
            {
                closingPending = true;
                 Application.Exit();
            }
        } 
```

这是我的尝试和我从这里的其他帖子中获得的一些想法的结果。但是当我执行此代码时会发生什么 - 通过按下`[x]`窗口的 ，我会显示消息框，但无论我单击哪个按钮，表单都会显示多次。在添加之前`closingPending`，我很确定这个问题仅在我尝试时发生`Application.Exit()`。当我尝试这个例子时，这个`closingPending`例子起作用了：

```
if(closingPending) return;
if (MessageBox.Show("This application is closing down because of " + e.CloseReason.ToString() + ". Do you really want to close it ?", "", MessageBoxButtons.YesNo) == DialogResult.No)
    {                
        e.Cancel = true;
    }
    else
    {
        closingPending = true;
        Application.Exit();
    } 
```

但是，我对导致问题的原因有所了解，但距离完全理解或解决它还有很长的路要走。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:54:24.653

试试下面的东西......它会解决你的问题......

```
DialogResult result = MessageBox.Show("Do you want to save changes ?", "Save",
                                   MessageBoxButtons.YesNoCancel,
                                   MessageBoxIcon.Information,
                                   MessageBoxDefaultButton.Button3);

            switch (result)
            {

                case DialogResult.Yes: 
                    closingPending = true;
                    MessageBox.Show("To Do - validate and save");
                    break;

                case DialogResult.No: 
                    closingPending = true;
                    Application.Exit();
                    break;

                case DialogResult.Cancel:
                    closingPending = true;
                    e.Cancel = true;
                    break;
            } 
```

# regex - 为什么 OrientDB 不使用索引来搜索“LIKE”运算符？

> ID：14565718
> 
> 赞同：5
> 
> 时间：2013-01-28T15:47:15.793
> 
> 标签：regex, database-performance, sql-like, graph-databases, orientdb

尽管存在索引，但在按文本模式搜索记录时，我发现 OrientDB 太慢（至少比 Neo4j 慢得多），即使在相对较小（150K）的数据集上也是如此。

例如，我有“用户名”属性的 UNIQUE 和 FULLTEXT 索引，但如下所示 OrientDB 不使用任何索引。

```
orientdb> explain select username from P where username like 'log%'    

Profiled command '{current:#10:152060,documentReads:152061,documentAnalyzedCompatibleClass:152061,recordReads:152061,elapsed:6.5357623,resultType:collection,resultSize:88}' in 6,537000 sec(s):
{
  "@type": "d", "@version": 0, 
  "current": "#10:152060", 
  "documentReads": 152061, 
  "documentAnalyzedCompatibleClass": 152061, 
  "recordReads": 152061, 
  "elapsed": 6.5357623, 
  "resultType": "collection", 
  "resultSize": 88, 
  "@fieldTypes": "documentReads=l,documentAnalyzedCompatibleClass=l,recordReads=l,elapsed=f"
} 
```

有什么方法可以加快 OrientDB 中的模式搜索？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T17:09:12.397

为了使用全文索引，您应该使用 containstext 运算符，例如：

```
explain select username from P where username containstext 'log' 
```

或试试这个：

```
 explain select username from P where username >= 'log' and username < 'loh' 
```

# linux - 如何安全地杀死 Linux 进程？

> ID：14565724
> 
> 赞同：0
> 
> 时间：2013-01-28T15:47:34.280
> 
> 标签：linux, signals, sigterm

连续向 FAT32 分区写入文件 (~1/s) 的嵌入式 Linux 系统在中断时偶尔会损坏分区。该过程可以通过两种方式中断：重启，或使用 musb_hdrc/gadget 通过 USB 将文件复制到主机或从主机复制文件。musb_hdrc/gadget 用于将分区的访问从内部嵌入式控制切换到 USB，以便与外部主机传输文件。解决方案可能是做一个`killall process-name`，但这会安全地杀死 Linux 进程吗？IOW：该过程是否会完成任何已经启动的文件 IO，或者仍然存在损坏的分区？根据[killall 手册页](http://linux.die.net/man/1/killall) `If no signal name is specified SIGTERM is sent.`是否需要在代码中添加一些东西以确保 kill 是干净的和/或是否有一个特殊的 killall 信号名称来进行干净的 kill？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T15:52:45.330

如果代码写得很好，该进程应该捕获`SIGTERM`并干净地停止它正在做的事情并干净地关闭每个打开的资源。

如果您无法修改代码，并且您已经观察到`SIGTERM`信号残酷地停止了该过程（就像 a 一样`SIGKILL`），我想您无法很好地停止它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:53:56.333

模错误，不会因为杀死执行常规文件 I/O 的进程而导致分区（和文件系统）损坏（即不能将分区作为设备使用，操作原始块）。

如果进程不关心处理或忽略信号，`SIGTERM`则会以同样无情的方式杀死它`SIGKILL`。对于实际上试图在信号上正常退出的进程，`SIGTERM`意味着*你会关闭*，而`SIGKILL`只是杀死（不可能抓住它）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T16:33:13.983

好吧，您可以修改您的应用程序以捕获除 SIGKILL 之外的任何信号。
可以在信号处理程序中执行关闭操作或清理
以下是设置处理程序以在某些致命信号发生时删除临时文件的简单示例：

```
#include <signal.h>

 void
 termination_handler (int signum)
 {
   printf ("Caught signal %d\n", sig);
   switch(signum)
   {
       case SIGINT:
       printf ("CTRL C not allowed\n");
       break;

       case SIGTERM:
       struct temp_file *p;
       for (p = temp_file_list; p; p = p->next)
           unlink (p->name);
       exit(1);
       break;

       default:
   ...
   }
 }

 int
 main (void)
 {
   ...
   if (signal (SIGINT, termination_handler) == SIG_IGN)
     signal (SIGINT, SIG_IGN);
   if (signal (SIGHUP, termination_handler) == SIG_IGN)
     signal (SIGHUP, SIG_IGN);
   if (signal (SIGTERM, termination_handler) == SIG_IGN)
     signal (SIGTERM, SIG_IGN);
   ...
 } 
```

在 SIGTERM 的情况下，信号处理程序之后的代码将不会执行。

# jquery - jquery-ui 菜单作为上下文菜单

> ID：14565730
> 
> 赞同：4
> 
> 时间：2013-01-28T15:47:44.370
> 
> 标签：jquery, jquery-ui, jquery-ui-contextmenu

如何在鼠标右键单击时使用[http://jqueryui.com/menu/](http://jqueryui.com/menu/)作为上下文菜单。有插件之类的吗？

jquery-1.9.0 jquery-ui-1.10.0

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-02T11:22:14.760

在这里，我为此目的启动了一个插件：[jquery-ui-contextmenu](https://github.com/mar10/jquery-ui-contextmenu) （支持委托和从 JS 对象创建菜单定义）。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T16:19:51.873

这是从 jquery ui 示例页面快速破解的解决方案： [jsBin](http://jsbin.com/ejahak/1/edit "关联")

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-16T15:30:50.020

您可以使用我编写的名为[Audero Context Menu](https://github.com/AurelioDeRosa/Audero-Context-Menu)的插件。

# django - Django grappelli 似乎无法查看其所有媒体文件

> ID：14565733
> 
> 赞同：5
> 
> 时间：2013-01-28T15:47:51.330
> 
> 标签：django, nginx, gunicorn, django-grappelli

我在 Ubuntu 服务器上运行 django 1.4 和 grappelli 2.4.3，我在生产时通过 Windows 网络系统查看它们。当我使用 RDP 在 Ubuntu 机器上查看时，开发服务器上一切正常。

settings.py 的相关部分是：

```
STATIC_ROOT = os.path.join(os.path.dirname(__file__), '../03_static_files/collected/')
STATIC_URL = '/static/'
STATICFILES_DIRS = (
    # Put strings here, like "/home/html/static" or "C:/www/django/static".
    # Always use forward slashes, even on Windows.
    # Don't forget to use absolute paths, not relative paths.
    os.path.join(os.path.dirname(__file__), '../03_static_files/'),
    os.path.join(os.path.dirname(__file__), '../03_static_files/admin/'),
    os.path.join(os.path.dirname(__file__), '../03_static_files/filebrowser/'),
    os.path.join(os.path.dirname(__file__), '../03_static_files/grappelli/'),
)
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
#    'django.contrib.staticfiles.finders.DefaultStorageFinder',
)

INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',

    # apps I added but didn't create
    'south',
    'grappelli',
    'filebrowser',
    'tinymce',
    'haystack',
    'gunicorn',
    'debug_toolbar',
    'taggit',

    # Uncomment the next line to enable the admin:
    'django.contrib.admin',
    # Uncomment the next line to enable admin documentation:
    'django.contrib.admindocs',

    # apps I created
    'community',
    'fts',
    'guidance',
    'news',
) 
```

我已经运行`collectstatic`了，但管理站点显然只是部分呈现。它肯定会选择一些 CSS，因为某些元素是样式化的。但它并没有吸引其他人，因为它看起来很乱。我的 Nginx 或 Gunicorn 错误日志都没有显示任何 404，如果我将浏览器直接指向它们，我可以下载所有 css 和 js 文件。

管理站点当前在 IE8 和 IE9 中看起来像这样：

![半渲染的grappelli](../Images/9fb8cfbf65f149fb7e5a4af5fb66f351.png)

该网站的其他一切运行良好。Django 调试工具栏说（工作的）开发服务器版本和上面的生产版本正在呈现相同的模板。删除 grappelli 后，正常的 django 管理员会正确显示。我尝试从更改我的 Nginx conf 文件

```
location /admin/media/ {
    root /path/to/django/contrib;
} 
```

至

```
location /admin/media/ {
    root /path/to/grappelli;
} 
```

没有变化。谁能告诉我哪里出错了？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-05T21:03:17.570

检查静态媒体是否存在。

检查所有这些设置...

```
STATIC_URL = '/static/' 
STATIC_ROOT is something like os.path.join(PROJECT_PATH, "static"),
ADMIN_MEDIA_PREFIX = '/static/grappelli/' (or whatever your static directory is) 
```

接下来检查你的

```
DEBUG = False or True ?
TEMPLATE_DEBUG = DEBUG 
```

如果为 false，它将使用 nginx 提供文件，但不会

另一个例子...

```
STATIC_URL = '/static/'
STATIC_ROOT = '/home/foo/devel/static'
MEDIA_URL = '/media/'
MEDIA_ROOT = '/home/foo/devel/media'
# the following is deprecated but is it seems grappelly requires it
ADMIN_MEDIA_PREFIX = STATIC_URL + "grappelli/"
STATIC_FILES = ()
STATICFILES_FINDERS = (
    'django.contrib.staticfiles.finders.FileSystemFinder',
    'django.contrib.staticfiles.finders.AppDirectoriesFinder',
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-06T12:39:15.967

黑暗中的另一个镜头：您是否偶然`TEMPLATE_DIRS`在开发和生产方面有不同的设置？看截图，这似乎不是静态文件的问题。就像 diegueus9 已经指出的那样，grappelli css 样式似乎已加载，但模板是来自库存 Django admin 的模板。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-02-06T08:04:13.453

似乎 Django 1.4.3 对其管理静态文件进行了一些更改，而 Grappelli 尚未设法遵循这些更改。我没有花时间检查这是否是模板或静态文件级别本身的问题，但我提供了一种解决方法。

您可以将您的 Django 设置降级到 1.4.2，直到他们修复它，或者像我一样，暂时禁用`'django.contrib.admin'`（`INSTALLED_APPS`只需注释该行或任何有效的内容），运行`collectstatic -c`然后再次启用管理员。无论哪种方式，您都将在 Grappelli 部署中拥有正确的样式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T19:47:23.227

我最好的客人没有看你的 settings.py 是你的应用程序“grappelli”是在 django 的管理员**之后**安装的，而不是**之前**。[在设置](https://django-grappelli.readthedocs.org/en/2.4.3/quickstart.html#setup)文档中查看该警告

显然您的 css 和 js 是正确的，但渲染不好，因为您的应用程序正在渲染 django.contrib.admin 的模板。

请确保在之前放置 grappelli：

```
INSTALLED_APPS = (
    'django.contrib.auth',
    'django.contrib.contenttypes',
    'django.contrib.sessions',
    'django.contrib.sites',
    'django.contrib.messages',
    'django.contrib.staticfiles',
    'grappelli',
    'django.contrib.admin',
) 
```

# dos - MS DOS XCOPY 命令 - 复制 0 文件时的操作

> ID：14565736
> 
> 赞同：0
> 
> 时间：2013-01-28T15:47:54.107
> 
> 标签：dos, xcopy

我创建了一个简单的 XCOPY 命令来将文件从源位置复制到目标位置。该命令基于某个事件执行。

XCOPY 源*.FLT 目标\

如果源文件不存在，或者目标文件夹丢失，它会给出一条消息：“0 个文件已复制”。如果没有复制文件，是否可以提示警告消息，如 Windows 对话框？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T05:02:22.277

`ErrorLevel`命令失败时使用set。

```
0 = No Issue/Success
2 = Abort
4 = File Not Found
... 
```

只需检查 ErrorLevel 是否为 0 以外的任何值。

```
if ErrorLevel 1 echo Error 
```

有关`if /?`更多详细信息，请参阅。

请注意，ErrorLevel if 比较的评估如下`if ErrorLevel >= Number then`。

# fortran - 为什么 Fortran 中有隐含的 SAVE 属性？

> ID：14565739
> 
> 赞同：7
> 
> 时间：2013-01-28T15:48:00.767
> 
> 标签：fortran

如果我在 Fortran 声明语句中初始化一个变量，该变量会隐式接收一个 SAVE 属性，并且初始化表达式只会执行一次。

例如下面的程序

```
program test
implicit none

    call foo()
    call foo()

contains

    subroutine foo ()
        integer :: i = 0

        i = i + 1
        write(*,*) i
    end subroutine foo
 end program test 
```

将打印

```
1
2 
```

由于这在许多其他语言中都不同，我想知道为什么 Fortran 标准委员会选择了这种行为？

非常感谢！麦克风

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T15:50:08.677

这主要是由于历史原因。旧的编译器（Fortran IV(66) 和之前的编译器）主要使用静态内存来生成程序。旧机器甚至没有任何堆栈。因此程序的行为，因为变量被定义为`save`。

变量初始化的前身，`DATA`语句，更像是定义静态内存的初始内容（类似于汇编中数据段的指令），而不是您可能从 C 中知道的 on call 变量初始化。语法变得类似于稍后的 C 变体。

# python - 用于在同一包中进行测试的 Python 导入

> ID：14565744
> 
> 赞同：-1
> 
> 时间：2013-01-28T15:48:10.050
> 
> 标签：python, unit-testing, pydev

我的项目层次结构是这样的

```
project 
       src
          fruit_pkg
            count_fruits.py
       test
          fruit_pkg
             test_count_fruits.py 
```

现在说在模块内部`count_fruits.py`我有一个名为`addition`. 为了测试`addition`，我是否必须`count_fruits`使用导入模块

```
my_mod = __import__("fruit_pkg.count_fruits")
cnt_fruit = getattr(my_mod,"count_fruits") 
```

然后为我的测试做类似的事情

```
def my_test(self):
  #some work happen here
  cnt_fruit.addition(blah, blah)
  #more work happen here 
```

或者：由于`src`和`test`代码都在同一个包`fruit_pkg`中，有没有更简单的方法来访问里面的函数`count_fruits`。

对于并行，在 Java 中，如果 the`src`和 junit 测试代码都在同一个包中，则根本不需要导入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:06:09.370

您必须导入模块（因为这是您在另一个模块的命名空间中获取对模块或其任何内容的引用的方式），因为测试代码和产品代码位于不同的模块中，但您没有以像你一样复杂的方式来做。你可以：

```
from fruit_pkg.count_fruits import count_fruits as cnt_fruit 
```

再说一次，看起来您的项目结构可能过于复杂。Python 通常比 Java 更喜欢扁平化的组织，所以很有可能将`count_fruits`方法直接放在`fruit_mod`模块中而不是完全有 可能更有意义`fruit_pkg`。这将使您的项目更易于导航，并消除导入语句中的冗余：

```
from fruit_mod import count_fruits 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:07:41.023

在 Python 中将一个包拆分为多个路径并不是那么简单。[pkgutil.extend_path](http://docs.python.org/2/library/pkgutil.html#pkgutil.extend_path)可以解决问题，但需要您将此代码放入您`__init__.py`的包中：

```
from pkgutil import extend_path
__path__ = extend_path(__path__, __name__) 
```

请注意，仅加载 (PYTHONPATH)`__init__.py`中该名称空间的第一个。`sys.path`因此，您应该确保`__init__.py`构成您的包裹的所有部分都相同。

总而言之，这很容易出错，我建议您重新组织代码并将测试放入自己单独的命名空间中。摆弄`__path__`一个包裹会引起很多麻烦。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:10:49.483

如果您使用的是[py.test](http://pytest.org)`__init__.py` ，则必须在`test`and`test/fruit_pkg`文件夹中放置一个空文件，然后`test_fruit_counts.py`以任何您想要的方式导入您的模块，例如

```
from src.fruit_pkg.count_fruits import * 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T16:12:22.807

除非`fruit_pkg`是命名空间包；它只能从一个目录中获得。看看`sys.modules['fruit_pkg']`就知道是哪一个了。

您可以将测试移至`src/fruit_pkg/test/test_count_fruits.py`或不使用相同的顶级名称来测试包。

无论哪种方式，要导入模块：

```
from fruit_pkg import count_fruits 
```

# android - 将对象从一个活动传递到另一个活动

> ID：14565755
> 
> 赞同：5
> 
> 时间：2013-01-28T15:48:34.760
> 
> 标签：android, android-activity

我在我的一项活动中有一个文件，我会写入它（类似于日志文件）。我想将它传递给另一个活动并附加一些其他信息。我该怎么做？我听说过 Parcelable 对象，但我不知道这是否是正确的解决方案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:02:19.707

在 Appicaltion 类中存储变量[不是一个好的 OOP 概念](https://stackoverflow.com/questions/3826905/singletons-vs-application-context-in-android)。正如您已经提到的，通常由 Parcelable 完成，这是您的模型类实现它的示例：

```
 public class NumberEntry implements Parcelable {

        private int key;
        private int timesOccured;
        private double appearRate;
        private double forecastValue;

        public NumberEntry() {

            key = 0;
            timesOccured = 0;
            appearRate = 0;
            forecastValue = 0;
        }
    public static final Parcelable.Creator<NumberEntry> CREATOR = new Parcelable.Creator<NumberEntry>() {
            public NumberEntry createFromParcel(Parcel in) {
                return new NumberEntry(in);
            }

            public NumberEntry[] newArray(int size) {
                return new NumberEntry[size];
            }
        };
/**
     * private constructor called by Parcelable interface.
     */
    private NumberEntry(Parcel in) {
        this.key = in.readInt();
        this.timesOccured = in.readInt();
        this.appearRate = in.readDouble();
        this.forecastValue = in.readDouble();
    }

    /**
     * Pointless method. Really.
     */
    @Override
    public int describeContents() {
        return 0;
    }

    @Override
    public void writeToParcel(Parcel dest, int flags) {
        dest.writeInt(this.key);
        dest.writeInt(this.timesOccured);
        dest.writeDouble(this.appearRate);
        dest.writeDouble(this.forecastValue);
    } 
```

然而，正如其他人所说，Parcelable 本身就是一个[糟糕的设计](https://stackoverflow.com/questions/4076946/parcelable-where-when-is-describecontents-used)，所以如果你没有遇到性能问题，实现 Serializable 也是另一种选择。

# javascript - Chrome：对光标样式进行更新时，选择框中的选定值“闪烁”

> ID：14565758
> 
> 赞同：2
> 
> 时间：2013-01-28T15:48:45.727
> 
> 标签：javascript, google-chrome, select

只是一个小的外观问题，我花了几个小时来找出问题所在并在这个问题上创建一个 jsfiddle ( [http://jsfiddle.net/josi/FUWBk/9/](http://jsfiddle.net/josi/FUWBk/9/) )

我发现如果您定期对光标样式进行更新，则打开的选择框的当前标记值会跳回它的默认选择值。

没有此代码：

```
document.body.style.cursor = 'progress'; 
```

和

```
document.body.style.cursor = ''; 
```

一切正常。

只需打开我的 jsfiddle 并单击“Let's go”。将打开的弹出窗口移开并打开选择框并将鼠标悬停在某些选项上并等待。

有人有解决方法吗？

编辑：Firefox 没问题

# c# - 报告 (C#) 中的打印功能如何工作？如何使用网络共享的打印机打印图像？

> ID：14565759
> 
> 赞同：0
> 
> 时间：2013-01-28T15:48:50.723
> 
> 标签：c#, .net, wpf

我有一个 Windows 服务，我在其中编写了一些代码来打印图像文件，我使用的打印机是通过网络（本地网络）共享的。但我面临着许可问题。打印机不打印图像。当我尝试使用同一台打印机在水晶报表中打印文档时，它工作正常。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:03:17.347

您必须使用具有打印权限的登录名来运行该*服务*。

另一个问题是服务没有提供与普通 UI 应用程序相同大小的 UI 堆栈（因为它没有 UI）。因此，您可能会遇到打印问题，因为打印方法通常在 UI 框架库（WPF、WinForms 等）中

# python - Django DeleteView 重定向到变量位置

> ID：14565762
> 
> 赞同：0
> 
> 时间：2013-01-28T15:49:13.297
> 
> 标签：python, django

我希望能够在 Django 1.5c1（包括确认页面）中使用 DeleteView CBV，但是让用户被重定向到他/她单击对象的位置。

例如，这是我的网站基于事件的结构的粗略轮廓：

```
/events/week/2013/03/   - ListView, shows 3rd week of 2013's Events
/events/month/2013/01/  - ListView, shows January of 2013's Events
/events/year/2013/      - ListView, show 2013's Events
/events/53/             - DetailView, shows a specific Event 
```

在这些事件列表中的任何一个上，我都可以有一个出现在它们上面的事件。我没有让事件的 URL 依赖于用户导航的列表（例如 /events/year/2013/53/），而是选择在独立的 URL 上提供事件（例如 /events/53/ ）。

**在这种情况下，我希望能够在我的事件的 DetailView 上有一个删除按钮，该按钮重定向回用户导航的 ListView。**

我考虑过：

*   如果它是我的 URLconf 中的 ListView，它将查看以前的 URL 并将其添加到会话中的中间件。这有几个缺点，其中之一是需要将可以单击 Event 的 DetailView 的每个可能位置列入白名单。
*   在 DetailView 上的删除按钮上，附加`?next={{ request.META.HTTP_REFER }}`到 DeleteView 的 URL 并以某种方式将其添加到删除表单中，但是传递了整个引用者的 URL（例如 /events/53/delete/?next=www.site.com/events/year/ 2013/)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T20:34:46.530

尝试像这样的混合：

```
class RedirectURLView(View):

    def get_success_url(self):
        next_url = self.request.GET.get('next')

        if next_url:
            return next_url
        else:
            return super(RedirectURLView, self).get_success_url() 
```

然后附加`?next={{ request.path }}`到网址

# html - 如何设置此对齐方式？

> ID：14565763
> 
> 赞同：0
> 
> 时间：2013-01-28T15:49:13.053
> 
> 标签：html, css

“新”和“这是新闻”。它们不会水平对齐。我怎样才能把它们放在同一行？

这是演示[http://jsfiddle.net/CtCuk/2/](http://jsfiddle.net/CtCuk/2/)

![在此处输入图像描述](../Images/6bb898a7846794775d9f916f6114e8ef.png)

**HTML**

```
<div class="top_page">
    <div class='container-general'>
        <div class="annouce-row">    
            <div class='title'>
                New
            </div>
            <div class='annoucement'>
                Here is News
            </div>
        </div>
    </div>
</div> 
```

**CSS**

```
.top_page{
    text-align: center;
    width: auto;
    max-width: 900px;
    margin: 50px auto 20px;
}

.annouce-row{
    width: 800px;
}

.title {
    padding: 20px 10px;
    background-color: rgb(123, 0, 218);
    border-top-left-radius: 6px;
    border-bottom-left-radius: 6px;
    margin: 1px;
    color: rgb(255, 255, 255);
    font-size: 22px;
    width: 70px;
}

.announcement {
    font-size: 24px;
    font-weight: 200;
    color: rgb(0, 174, 218);
    margin-left: 0px;
    width: 600px;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:56:24.713

```
.annouce-row div {
    width: 100px;
   display: inline-block;
} 
```

[http://jsfiddle.net/CtCuk/6/](http://jsfiddle.net/CtCuk/6/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:52:38.043

```
.annouce-row
{
     overflow:hidden;
}
.title
{
    float:left;
}
.annoucement
{
    float:left;
    margin-left:10px;
    margin-top:20px; //Change this as much as it suits you
} 
```

没有 div 类`.announce`，它的`.annoucement`，看看这个[http://jsfiddle.net/AliBassam/cqh49/](http://jsfiddle.net/AliBassam/cqh49/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T15:53:28.917

您是否尝试将： `float:left;` 放入您的CSS属性中？![在此处输入图像描述](../Images/ad0dc1965ebdbf4a0e4a85163958fb4a.png)

# c# - 将应用程序设置从外部文件复制到 app.config

> ID：14565764
> 
> 赞同：1
> 
> 时间：2013-01-28T15:49:15.233
> 
> 标签：c#, .net, installation, app-config

我试图弄清楚更新现有应用程序的 app.config 文件以包含新的应用程序设置而不覆盖预先存在的设置值的最佳做法是什么。

因此，从头开始，我有一个项目，它通过 Visual Studio 安装项目内置到 MSI 中，并且该 MSI 用于安装应用程序。此应用程序已安装在大约 1000 多个位置。现在，在应用程序的新版本中，我们有一个新的应用程序设置来定义 Web 服务端点。但是，安装项目不会使用新设置部署新的 app.config，因为安装项目就像那样愚蠢，并且它们只会安装一个 app.config，如果它不存在，或者现有的有匹配创建和修改日期，以避免覆盖用户定义的配置。

现在，由于我无法覆盖 app.config，我想也许我会将 app.config 更改部署为单独的 XML 文件，并且在应用程序启动时，我将加载这个单独的 XML 文件，将所有设置复制出来它，与实际的 app.config 文件中的内容进行比较，任何缺失的内容我都会保存到 app.config 文件中。

但我在从外部 XML 文件加载配置并将其复制到 app.config 时遇到问题。我该怎么做呢？还有其他更好的方法来管理更新 app.config 文件吗？什么是最佳实践？

我更熟悉 Java，这对于属性文件来说是一件非常简单的事情，但对于 .NET 配置文件来说似乎并不那么简单。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:58:56.820

据我所知，没有开箱即用的方法。

我会通过将文件解析为 XDocument，然后检查 doc.Element("settingName") 是否为空来做到这一点。如果是，则该设置不存在，您可以添加默认值。如果节点确实存在，则用户已定义自定义设置。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T18:17:51.330

您可以添加指向外部 app.config 的链接。 [http://blog.andreloker.de/post/2008/06/Keep-your-config-clean-with-external-config-files.aspx](http://blog.andreloker.de/post/2008/06/Keep-your-config-clean-with-external-config-files.aspx)

[http://www.dotnetfunda.com/articles/article969-external-appsetting-file-for-your-appsettings-in-config-file.aspx](http://www.dotnetfunda.com/articles/article969-external-appsetting-file-for-your-appsettings-in-config-file.aspx)

# iad - iBooks 中的 iAd - 这可能吗？

> ID：14565765
> 
> 赞同：-3
> 
> 时间：2013-01-28T15:49:23.850
> 
> 标签：iad, ibooks

考虑在 iBook 中包含 iAd。这是否可能，因为我似乎无法在任何地方找到对此选项的参考。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:29:21.590

据我所知，iBooks 中不能有广告。在 iBooks 中赚钱的唯一方法是出售您的书。

# c++ - C++ - 不正确的 ASCII 值（“ë”）

> ID：14565766
> 
> 赞同：5
> 
> 时间：2013-01-28T15:49:25.613
> 
> 标签：c++, png, ascii, decoder

首先，我为我会犯的任何英语错误道歉，但是 15 岁和法语并没有帮助......

我正在尝试借助文件格式规范（[http://www.libpng.org/pub/png/spec/1.2/PNG-Contents.html](http://www.libpng.org/pub/png/spec/1.2/PNG-Contents.html)）对 PNG 解码器进行编程，但我遇到了一个奇怪的问题。

规范说 PNG 文件的前 8 个字节总是包含以下（十进制）值：137 80 78 71 13 10 26 10。

当我测试这个简单的程序时：

```
int main() 
{
    ifstream file("test.png");

    string line;
    getline(file, line);

    cout << line[0] << endl;
} 
```

输出是“ë”，它代表 ascii 表中的 137。很好，它匹配第一个字节。

但是，当我这样做时`int ascii_value = line[0];`，输出值为 -119，这不是正确的 ascii 值。

当我用另一个字符（如“e”）尝试同样的事情时，它确实输出了正确的 ascii 值。

有人可以解释我做错了什么以及解决方案是什么？我个人认为这是扩展 ascii 表的问题，但我不确定。

谢谢大家 ！**我会将签名的字符转换为未签名的字符**！

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-28T15:52:46.977

您的系统`char`类型是有符号的，这就是它的值可以为负数的原因。

您需要明确并放弃标志：

```
const unsigned char value = (unsigned char) line[0]; 
```

请注意，您的机器似乎正在使用[二进制补码中的-119 = 137。](http://en.wikipedia.org/wiki/Two%27s_complement)所以这些位本身确实是正确的，这一切都是为了正确地解释它们。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T15:52:13.987

`char`在 C++ 中，既可以是有符号的也可以是无符号的^(1))，这取决于它的实现。对于您的编译器（实际上是大多数情况），它似乎已签名：

任何大于 128 的字符值都表示为负数。-119 恰好对应于*无符号*字符值 137。换句话说，以下成立：

```
unsigned char c = 137;
assert(static_cast<signed char>(c) == -119); 
```

但请注意，这是特定于实现的，因此您通常不能依赖这些值。

* * *

^(1)) And 与 and 都是不同的*类型*。`signed char``unsigned char`

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-28T15:52:54.313

ASCII 仅涵盖 0 .. 127。ASCII 表中没有 137。

也没有“扩展的 ASCII 表”之类的东西。有几十个（相互不兼容的）ASCII 扩展。哎呀，从技术上讲，即使是 Unicode 也是“扩展的 ASCII”。

您得到 -119 是因为在您的编译器`char`中是有符号类型，涵盖从 -128 到 127 的值。（-119 是 137 - 256）。您可以通过显式转换为来获得您期望的值`unsigned char`：

```
int value = static_cast<unsigned char>(line[0]); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T15:52:29.683

当您允许符号扩展时，就会发生这种情况。扩展 ASCII 表中的字符设置了它们的高位（符号位）。

-119 是`0x89`. 137也是`0x89`。

尝试

```
int ascii_value = line[0] & 0x00FF; 
```

或者

```
int ascii_value = (unsigned char)line[0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T15:53:37.513

137 = -119 = 0x89。如果你 cast `(unsigned) (unsigned char)(line[0])`，你会得到它来打印整数值 137。

类型`char`（它是 的基本类型`std::string`）[通常]是一个有符号值，范围为 -128-127。任何高于 127 的都是负数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-28T15:57:13.713

C++ 没有指定`char`是有符号类型还是无符号类型。这意味着“扩展”的 ASCII 字符（0..127 范围之外的字符，其最高位设置）可能被解释为负值；看起来这就是你的编译器所做的。

要获得您期望的无符号值，您需要将其显式转换为`unsigned char`类型：

```
int ascii_value = static_cast<unsigned char>(line[0]); // Should be 137 
```

# kendo-ui - Kendo UI 通过控件复制数据

> ID：14565768
> 
> 赞同：2
> 
> 时间：2013-01-28T15:49:30.343
> 
> 标签：kendo-ui, kendo-grid

是否可以采用 2 个单独的 Kendo UI 网格并能够通过 UI 控件来回传递数据（如前进和后退箭头）？

该模式将采用左侧的主列表，选择项目并在右侧有一个精炼的列表。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T16:06:59.113

如果可能并且不难做到，但你必须自己做，所以你需要：

1.  关于 KendoUI`Grid`及其`DataSource`公开的事件的一些知识。
2.  一些关于 JavaScript + jQuery 的知识，可以帮助您进行验证并避免错误。

让我们有以下网格定义：

```
var grid1 = $("#grid1").kendoGrid({
    dataSource:  ds1,
    selectable:  "multiple",
    navigatable: true,
    pageable:    false,
    columns:     [
        { field: "name", title: "Name" },
        { field: "lastName", title: "Last Name" }
    ]
}).data("kendoGrid");

var grid2 = $("#grid2").kendoGrid({
    dataSource:  ds2,
    selectable:  "multiple",
    navigatable: true,
    pageable:    false,
    columns:     [
        { field: "name", title: "Name" },
        { field: "lastName", title: "Last Name" }
    ]
}).data("kendoGrid"); 
```

我们定义了两个按钮：

1.  用于将选定的行从复制`grid1`到`grid2`
2.  用于将选定的行从复制`grid2`到`grid1`

按钮定义为：

```
<div><a href="#" id="copySelectedToGrid2" class="k-button">&gt;</a></div>
<div><a href="#" id="copySelectedToGrid1" class="k-button">&lt;</a></div> 
```

以及用于管理它的 JavaScript：

```
$("#copySelectedToGrid2").on("click", function (idx, elem) {
    moveTo(grid1, grid2);
});

$("#copySelectedToGrid1").on("click", function (idx, elem) {
    moveTo(grid2, grid1);
}); 
```

最后`moveTo`会是这样的：

```
function moveTo(from, to) {
    var selected = from.select();
    if (selected.length > 0) {
        var items = [];
        $.each(selected, function (idx, elem) {
            items.push(from.dataItem(elem));
        });
        var fromDS = from.dataSource;
        var toDS = to.dataSource;
        $.each(items, function (idx, elem) {
            toDS.add({ name: elem.name, lastName: elem.lastName });
            fromDS.remove(elem);
        });
        toDS.sync();
        fromDS.sync();
    }
} 
```

[这里](http://jsfiddle.net/OnaBai/2qXKy/)的例子

# ios - NSFetchedResusltsController 宣布了一个动作，但它应该是一个更新

> ID：14565769
> 
> 赞同：2
> 
> 时间：2013-01-28T15:49:30.327
> 
> 标签：ios, cocoa, core-data, nsfetchedresultscontroller

我有一个从 NSFetchedResultsController 获取数据的表格视图。它根据 NSDate 属性将数据组织成部分。在每个部分中，数据也由 NSDate 属性组织。

有时，我必须调用网络服务来检索一些数据来更新我的列表。该数据可以是现有数据的插入或更新。

这是我的问题：当核心数据结束数据记录时，我的 NSFetchedResultsController 要求它的委托移动一些行......但这些行应该已经更新，而不是移动。

这些行对应于我刚刚更新的一些实体。但是更新永远不会发生在我用来排序数据的属性上。这些行不应该移动！事实上，这个错误不会发生在我更新的每个实体上，而只是其中一些。他们总是一样的，但他们没有什么特别的，他们和其他人一样......

我在 Apple 的文档中阅读了一篇关于移动对象的文章，这些对象有时报告为已更新，但不幸的是，这不是我的问题。

从创建 NSFetchedResultsController（及其请求、谓词和 sortDescriptors）、处理 NSFetchedResultsController 通知的更改、注册数据等开始，那里有很多代码。告诉你想要什么，我会张贴的。

提前谢谢你们！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:59:30.640

只是猜测，您可能对更新和 Web 服务使用相同的上下文。如果是，您应该至少有两个上下文，一个用于控制器，一个用于更新。

然后，您可以合并两者，暂时将获取的控制器从委托中退出。并在更新完成后重新分配，然后重新发出 fetch。您避免了许多可能会在一段时间内冻结您的 UI 的单元格移动。

此外，NSFetchedResultsController 不仅会在保存上下文时做出反应，还会在创建新实体但未保存时做出反应。

这是通过调用：

```
NSManagedObject *mo = [[NSManagedObject alloc] initWithEntity:myEntityDesc insertIntoManagedObjectContext:ctx]; 
```

一个新的单元格在 tableview 中占据了它的位置，所有其他单元格都被移动了。

如果调用了“移动”，听起来您的 UIViewController 仍然是您获取的控制器的委托。

通常的方法，至少对我来说或从我所看到的情况来看，是让控制器重新发出 fetch，然后在你的表视图上调用 reloadData。

否则，请记住，即使您更改了关系，您的控制器也会对这些更改做出反应。

要调试，您可以将 UIViewController 注册为 NSManagedObjectContextObjectsDidChangeNotification NSManagedObjectContextObjectsDidSaveNotification 的观察者，放置断点并查看触发错误移动的属性。

# android - Android：MediaPlayer getCurrentPosition() 卡住

> ID：14565770
> 
> 赞同：3
> 
> 时间：2013-01-28T15:49:42.877
> 
> 标签：android, android-mediaplayer

我正在根据 MediaPlayer 更新 SeekBar。有时它会停止更新进度，它会卡住，我得到相同的值。（但是声音没有卡住。）这些是我的 logcat 消息，我打印出进度，你可以看到它一直运行良好，直到 2048 年，然后它停止并在一段时间后继续更新。这是为什么？（我注意到从android 4.0开始，我的另一部android 2.2的手机上就没有这个问题了）

```
01-28 16:41:21.446: D/MyMediaPlayer(10342): progress:  56 / 10472
01-28 16:41:21.501: D/MyMediaPlayer(10342): progress:  107 / 10472
01-28 16:41:21.556: D/MyMediaPlayer(10342): progress:  158 / 10472
01-28 16:41:21.610: D/MyMediaPlayer(10342): progress:  209 / 10472
01-28 16:41:21.657: D/MyMediaPlayer(10342): progress:  261 / 10472
01-28 16:41:21.704: D/MyMediaPlayer(10342): progress:  311 / 10472
01-28 16:41:21.759: D/MyMediaPlayer(10342): progress:  362 / 10472
01-28 16:41:21.806: D/MyMediaPlayer(10342): progress:  413 / 10472
01-28 16:41:21.837: D/dalvikvm(307): GC_CONCURRENT freed 1835K, 16% free 19932K/23495K, paused 3ms+12ms, total 101ms
01-28 16:41:21.860: D/MyMediaPlayer(10342): progress:  458 / 10472
01-28 16:41:21.907: D/MyMediaPlayer(10342): progress:  514 / 10472
01-28 16:41:21.962: D/MyMediaPlayer(10342): progress:  565 / 10472
01-28 16:41:22.009: D/MyMediaPlayer(10342): progress:  616 / 10472
01-28 16:41:22.063: D/MyMediaPlayer(10342): progress:  667 / 10472
01-28 16:41:22.118: D/MyMediaPlayer(10342): progress:  718 / 10472
01-28 16:41:22.165: D/MyMediaPlayer(10342): progress:  770 / 10472
01-28 16:41:22.212: D/MyMediaPlayer(10342): progress:  820 / 10472
01-28 16:41:22.267: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:22.313: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:22.368: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:22.415: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:22.470: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:22.524: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:22.571: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:22.626: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:22.673: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:22.727: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:22.774: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:22.829: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:22.884: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:22.931: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:22.985: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:23.032: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:23.087: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:23.142: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:23.188: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:23.243: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:23.290: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:23.345: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:23.392: D/MyMediaPlayer(10342): progress:  2048 / 10472
01-28 16:41:23.454: D/MyMediaPlayer(10342): progress:  2054 / 10472
01-28 16:41:23.501: D/MyMediaPlayer(10342): progress:  2105 / 10472
01-28 16:41:23.556: D/MyMediaPlayer(10342): progress:  2155 / 10472
01-28 16:41:23.602: D/MyMediaPlayer(10342): progress:  2207 / 10472
01-28 16:41:23.657: D/MyMediaPlayer(10342): progress:  2258 / 10472
01-28 16:41:23.712: D/MyMediaPlayer(10342): progress:  2309 / 10472
01-28 16:41:23.751: D/MyMediaPlayer(10342): progress:  2360 / 10472
01-28 16:41:23.813: D/MyMediaPlayer(10342): progress:  2411 / 10472 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:51:12.223

我曾经注意到一个类似的问题，`getCurrentPosition()`即没有返回正确的值。

请参阅此处：[Acer Iconia A200 上的 VideoView getCurrentPosition() 异常](https://stackoverflow.com/questions/9437304/videoview-getcurrentposition-irregularity-on-acer-iconia-a200)

我从来没有发现是什么导致它返回不正确的位置。然而，我采用的解决方法只是通过存储我开始播放视频的时间戳并参考该时间戳来确定视频播放了多长时间来自己跟踪时间。似乎是多余的，但是当内置方法没有时，这至少给了我正确的值。

# c# - 通过大量控件提高 Winforms 性能

> ID：14565773
> 
> 赞同：2
> 
> 时间：2013-01-28T15:49:54.857
> 
> 标签：c#, .net, winforms

在构建具有大量控件（500+）的多个表单时，有什么方法可以提高性能？

我们的控件布局在一个标签+每行6个文本框的配置中，如下所示：

[![图片](../Images/8855173415039f33609e4b4dd73d1430.png)](https://i.stack.imgur.com/BlvPA.png)

我们使用以下容器来构建我们的控件：

*   DevExpress 的 XtraLayoutControl
*   每行周围的面板并手动移动
*   普通表控件

我们不能使用网格，因为必须根据具体情况隐藏文本框，并且我们的表单必须看起来非常接近打印输出。此外，每一行都有自己的数据类型，因此我们需要为每一行添加验证和编辑器。

表格控件是性能最高的，每个表单加载大约需要 2 秒。

由于每一个都将代表我们软件中的一个文档，并且我们允许用户一次打开多个文档，因此我们正试图找到一种提高性能的方法。

一个建议是缓存实际表单并拥有一个存储数据的状态对象。但是，我们允许用户一次查看多个文档。

另一个建议是分部分加载文档并在加载时显示每个部分。这并不理想，因为我们以拥有与打印输出几乎一模一样的文档而闻名。

是否有任何其他可用的策略，或者我们是否应该硬着头皮告诉我们的客户该程序将比它的 VB6 前身慢？

我们正在重新开发的表单设计示例如下：[链接](https://web.archive.org/web/20120912051058/http://www.twisoftware.com/docs/weldingsoftware/Weldspec-ASME-PQR.pdf)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T16:28:26.770

复杂的数据类型处理和东西是给你的，这是午餐前 5 分钟的示例，显示了多少 winforms 很糟糕以及多少 WPF 规则：

```
namespace WpfApplication5
{

public partial class MainWindow : Window
{
    private List<Item> _items;
    public List<Item> Items
    {
        get { return _items ?? (_items = new List<Item>()); }
    }

    public MainWindow()
    {
        InitializeComponent();

        Items.Add(new Item() {Description = "Base metal Thickness"});

        for (var i = 32; i > 0; i--)
        {
            Items.Add(new Item() {Description = "Metal Specification " + i.ToString()});
        }

        Items.Add(new Item() { Description = "Base metal specification" });

        DataContext = this;
    }
}

public class Item: INotifyPropertyChanged
{
    private List<string> _values;
    public List<string> Values
    {
        get { return _values ?? (_values = new List<string>()); }
    }

    public event PropertyChangedEventHandler PropertyChanged;

    public string Description { get; set; }

    protected virtual void OnPropertyChanged(string propertyName)
    {
        var handler = PropertyChanged;
        if (handler != null) 
            handler(this, new PropertyChangedEventArgs(propertyName));
    }

    public Item()
    {
        Values.Add("Value1");
        Values.Add("Value2");
        Values.Add("Value3");
        Values.Add("Value4");
        Values.Add("Value5");
        Values.Add("Value6");
    }
}
} 
```

XAML：

```
<Window x:Class="WpfApplication5.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" Height="350" Width="525">
    <ItemsControl ItemsSource="{Binding Items}">
        <ItemsControl.ItemTemplate>
            <DataTemplate>
                <StackPanel Orientation="Horizontal">
                    <TextBlock Text="{Binding Description}" Width="130"/>
                    <ItemsControl ItemsSource="{Binding Values}">
                        <ItemsControl.ItemsPanel>
                            <ItemsPanelTemplate>
                                <StackPanel Orientation="Horizontal"/>
                            </ItemsPanelTemplate>
                        </ItemsControl.ItemsPanel>
                        <ItemsControl.ItemTemplate>
                            <DataTemplate>
                                <TextBox Text="{Binding Path=.}" Margin="2" Width="90"/>
                            </DataTemplate>
                        </ItemsControl.ItemTemplate>
                    </ItemsControl>
                </StackPanel>
            </DataTemplate>
        </ItemsControl.ItemTemplate>
    </ItemsControl>
</Window> 
```

我看到您在这里还有其他几个要求，例如隐藏 texbox 和其他东西。如果这些行是不同的数据类型并不重要，你只需要做一个**ViewModel**（在这种情况下是 my `public class Item`，它保存你想在屏幕上显示的数据，并让用户能够交互和。

例如，您可以将类`List<string>`内部替换为`Item`更复杂的内容，并添加一些诸如此类`public bool IsVisible {get;set;}`的属性。

我强烈建议你看看 WPF（至少对于这个屏幕来说）。

将我的代码复制并粘贴到一个新的 -> WPF 项目中，您可以自己查看结果。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T16:11:38.573

`We can't use a grid as the text boxes have to be hidden on a case-by-case basis.`

我不明白为什么这会阻止使用`DataGridView`. 通过将属性设置为 ，可以将特定`DataGridViewCell`设置为只读。然后，您可以使用该事件来隐藏只读单元格的值。如果我没记错的话，代码将类似于：`ReadOnly``true``DataGridView.CellFormatting`

```
private void grid_CellFormatting(object sender, DataGridViewCellFormattingEventArgs e)
{
    DataGridView grid = (DataGridView)sender;
    if (grid[e.ColumnIndex, e.RowIndex].ReadOnly)
    {
        e.Value = string.Empty;
        e.FormattingApplied = true;
    }
} 
```

# php - 确定条件语句的 url

> ID：14565774
> 
> 赞同：-1
> 
> 时间：2013-01-28T15:49:55.100
> 
> 标签：php

我正在尝试根据包含以下条件的帖子列表的 URL 在一个标签上添加或删除类

```
<?php
    if (($featured['featured']==true) AND (basename($_SERVER["REQUEST_URI"]) != 'featured-questions'))
       return 'featured';
?> 
```

现在，如果没有分页和 url 输出，这可以正常工作

```
http://example.com/featured-questions 
```

我现在添加了分页，第 2 页的 url 输出如下

```
http://example.com/featured-questions
http://example.com/featured-questions?start=2
http://example.com/featured-questions?start=3
http://example.com/featured-questions?start=4 
```

那么如何确定这种类型的 URL 并根据需要有条件地应用类呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:54:56.480

尝试：

```
<?php
    if (($featured['featured']==true) AND empty(strstr($_SERVER["REQUEST_URI"], 'featured-questions')))
       return 'featured';
?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:35:13.293

嗨，下面的解决方案适用于我的问题，以防有人需要。

```
$url = 'http://' . $_SERVER['SERVER_NAME'] . $_SERVER['REQUEST_URI'];

if (($featured['featured']==true) AND (strpos($url,'featured-questions') == false) )
    return 'featured'; 
```

# c - 如何保护动态字符不被第二个动态字符覆盖？

> ID：14565778
> 
> 赞同：1
> 
> 时间：2013-01-28T15:50:01.760
> 
> 标签：c, dynamic, char, overwrite

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char print_two(char *reg, char *s)
{
    int i, l_s = (int) strlen(s), l_reg = (int) strlen(reg);
    for(i = 0; i < l_reg; i++)
    {
        printf("\n %c \n", reg[i]);
    }
    return 0;
}

int main(void)
{
    char reg;
    printf("Give a rule: ");
    scanf("%s", &reg);

    char s;
    printf("Give a string: ");
    scanf("%s", &s);

    print_two(&reg, &s);
    return 0;
} 
```

程序开始：

```
Give a rule: qwert
Give a string: asdf
result:
d
q
a
s
d
f 
```

我怎样才能避免被`reg`覆盖`s`？

我尝试了 realloc，malloc - 0 效果。

两个变量应该是动态的。

有可能吗？

* * *

用户给出 55 个字符 -> 数组 55

用户给出 100 个字符 -> 数组 100

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:09:52.633

根据您对其他答案的评论，如果您可以使用 GNU 库扩展（主要在 Linux 或 Windows MinGW 上），您可以使用`%ms`scanf 格式字符串，如下所示：

```
char *reg = NULL; // set to NULL to get segfault on uninitialized use
printf("Give a rule: ");
scanf("%ms", &reg); // scanf will malloc enough space to reg

// check for null in case scanf failed to read anything for some reason
// could also check return value of scanf, which is number of items it got
if (reg != NULL) {
  // process reg
}

free(reg); // free(NULL) is not an error, it just does nothing
reg = NULL; // set to NULL to get segfault on uninitialized use 
```

其他答案显示了如何使用标准 C 的固定大小的缓冲区。尽管根据[`man scanf`注释部分](http://www.kernel.org/doc/man-pages/online/pages/man3/scanf.3.html#NOTES)，`%ms`可能在未来的 POSIX 标准中。GNU 也有较旧的`%as`，但`%ms`在受支持时应该首选（即在任何现代 GNU 系统中）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:58:12.357

`scanf("%s", ...)`正在从标准输入读取字符串。您的变量 reg 和 s 为一个字符分配存储空间，而不是为完整的字符串分配存储空间。您需要将其更改`char reg[128]`为例如，如果您的输入字符串最长为 128 个字符。为了防止缓冲区溢出，您还应该考虑使用 scanf 限制扫描输入的长度`scanf("%127s", ...)`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:55:39.803

您不能将字符串（多个字符）读入单个字符，例如`char s`.

您需要预留更多空间：

```
char reg[128], s[128]; 
```

否则内存中的随机事物将被覆盖，并且您将获得未定义的行为。

# php - 为什么这个查询会失败？

> ID：14565779
> 
> 赞同：0
> 
> 时间：2013-01-28T15:50:06.927
> 
> 标签：php, jquery, psql

```
<?php

$connect = pg_connect("dbname=$dbase host=".$host." user=".$user." password=".$pass) or die("I sense a disturbance in the force ");

$action = $_POST['action'];

switch($action){
case 'bagSubmit' : bagSubmit(); break;
}

function bagSubmit(){
    $sql = 'SELECT * FROM cntrt';
    $query = pg_query($connect,$sql) or die('could not connect');
}
?> 
```

上面的 php 返回“无法连接”。sql 查询在数据库中执行良好。这是我在 php 中执行查询的正常程序（以前一直有效）。现在唯一的区别是我从 jquery 调用 php。jquery 也执行得很好，这可以从返回查询失败（“无法连接”）的事实中得到证明。我错过了什么？

```
$.ajax({
    url: 'functions.php',
data: {action: 'bagSubmit'},
type: 'post',
success: function(response){
    $('body').append(response);
}
}); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-28T15:52:10.550

$connect 未定义。你需要

```
function bagSubmit(){
    global $connect;
    $sql = 'SELECT * FROM cntrt';
    $query = pg_query($connect,$sql) or die('could not connect');
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-28T15:53:30.303

```
<?php
    $host = "10.10.10.129";
    $user = "postgres";
    $pass = "";
    $dbase = "attest";
    $connect = pg_connect("dbname=$dbase host=".$host." user=".$user." password=".$pass) or die("I sense a disturbance in the force ");

    $action = $_POST['action'];

    switch($action){
        case 'bagSubmit' : 
            bagSubmit($connect); 
            break;
    }

    function bagSubmit($connect){
        $sql = 'SELECT * FROM cntrt';
        $query = pg_query($connect,$sql) or die('could not connect');
    }
?> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T15:53:50.397

而不是使用全局变量，只需将`$connect`对象传递给您的函数：

```
function bagSubmit($connect){
    $sql = 'SELECT * FROM cntrt';
    $query = pg_query($connect,$sql) or die('could not connect');
} 
```

并这样称呼它：

```
bagSubmit($connect); 
```

# xml - 使用 XSL 转换 XML，然后将输出格式化为 HTML

> ID：14565781
> 
> 赞同：1
> 
> 时间：2013-01-28T15:50:07.530
> 
> 标签：xml, xslt, xslt-grouping

我需要使用 XSL 格式化 XML 输入以获得更方便的结构。作为处理的下一步，我想将其转换为 HTML。假设我有以下输入：**（0）**

```
<list>
<item item-id="1" second-item-id="1" third-item-id="1"/>
<item item-id="1" second-item-id="1" third-item-id="2"/>
<item item-id="1" second-item-id="2" third-item-id="1"/>
<item item-id="1" second-item-id="3" third-item-id="1"/>

<item item-id="2" second-item-id="1" third-item-id="1"/>
<item item-id="2" second-item-id="1" third-item-id="2"/>
<item item-id="2" second-item-id="1" third-item-id="3"/>
<item item-id="2" second-item-id="2" third-item-id="1"/>

<item item-id="3" second-item-id="1" third-item-id="1"/>
<item item-id="3" second-item-id="1" third-item-id="2"/>
<item item-id="3" second-item-id="1" third-item-id="3"/>
<item item-id="3" second-item-id="1" third-item-id="4"/>
</list> 
```

和以下 XSL 模板：**(1)**

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet 
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

  <xsl:output indent="yes"/>

  <xsl:key name="itemKey" match="item" use="@item-id"/>
  <xsl:key name="secondItemKey" match="item" use="concat(@item-id, '|', @second-item-id)"/>

  <xsl:template match="list">
    <xsl:copy>
      <xsl:copy-of select="@*"/>
      <xsl:apply-templates select="item[generate-id() = generate-id(key('itemKey', @item-id)[1])]"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="item">
    <item item-id="{@item-id}">
      <xsl:apply-templates select="key('itemKey', @item-id)[generate-id() = generate-id(key('secondItemKey', concat(@item-id, '|', @second-item-id))[1])]" mode="evt"/>
    </item>
  </xsl:template>

  <xsl:template match="item" mode="evt">
    <second-item second-item-id="{@second-item-id}">
      <xsl:apply-templates select="key('secondItemKey', concat(@item-id, '|', @second-item-id))" mode="bus"/>
    </second-item>
  </xsl:template>

  <xsl:template match="item" mode="bus">
    <third-item third-item-id="{@third-item-id}"/>
  </xsl:template>    

</xsl:stylesheet> 
```

它给了我很好的 XML：**（2）**

```
<?xml version="1.0"?>
<list>
    <item item-id="1">
        <second-item second-item-id="1">
            <third-item third-item-id="1"/>
            <third-item third-item-id="2"/>
        </second-item>
        <second-item second-item-id="2">
            <third-item third-item-id="1"/>
        </second-item>
        <second-item second-item-id="3">
            <third-item third-item-id="1"/>
        </second-item>
    </item>
    <item item-id="2">
        <second-item second-item-id="1">
            <third-item third-item-id="1"/>
            <third-item third-item-id="2"/>
            <third-item third-item-id="3"/>
        </second-item>
        <second-item second-item-id="2">
            <third-item third-item-id="1"/>
        </second-item>
    </item>
    <item item-id="3">
        <second-item second-item-id="1">
            <third-item third-item-id="1"/>
            <third-item third-item-id="2"/>
            <third-item third-item-id="3"/>
            <third-item third-item-id="4"/>
        </second-item>
    </item>
</list> 
```

我有另一个将 XML # **2**转换为 html 的 XSL：

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="1.0">
    <xsl:output indent="yes" method="html"/>
    <xsl:template match="list">
        <xsl:for-each select="item">
            <h2><xsl:value-of select="concat(local-name(),' ',@item-id)"/></h2>
            <ul>
                <xsl:for-each select="second-item">
                    <li><xsl:value-of select="concat(local-name(),' ',@second-item-id)"/></li>
                    <ul>
                        <xsl:for-each select="third-item">
                            <li><xsl:value-of select="concat(local-name(),' ',@third-item-id)"/></li>
                        </xsl:for-each>
                    </ul>
                </xsl:for-each>
            </ul>
        </xsl:for-each>
    </xsl:template>
</xsl:stylesheet> 
```

所以这是一个问题：我想一步处理带有两个模板（或合并的模板）的输入 xml。我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:12:34.703

如果您对将它们合并在一起感到满意，那么这应该同时完成两者的工作：

```
<xsl:stylesheet
  xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
  version="1.0">

  <xsl:output indent="yes"/>

  <xsl:key name="itemKey" match="item" use="@item-id"/>
  <xsl:key name="secondItemKey" match="item" use="concat(@item-id, '|', @second-item-id)"/>

  <xsl:template match="list">
    <xsl:copy>
      <xsl:copy-of select="@*"/>
      <xsl:apply-templates select="item[generate-id() = generate-id(key('itemKey', @item-id)[1])]"/>
    </xsl:copy>
  </xsl:template>

  <xsl:template match="item">
    <h2>
      <xsl:value-of select="concat('item ', @item-id)"/>
    </h2>
    <ul>
      <xsl:apply-templates select="key('itemKey', @item-id)[generate-id() = generate-id(key('secondItemKey', concat(@item-id, '|', @second-item-id))[1])]" mode="evt"/>
    </ul>
  </xsl:template>

  <xsl:template match="item" mode="evt">
    <li>
      <xsl:value-of select="concat('second-item ', @second-item-id)"/>
    </li>
    <ul>
      <xsl:apply-templates select="key('secondItemKey', concat(@item-id, '|', @second-item-id))" mode="bus"/>
    </ul>
  </xsl:template>

  <xsl:template match="item" mode="bus">
    <li>
      <xsl:value-of select="concat('third-item ', @third-item-id)"/>
    </li>
  </xsl:template>

</xsl:stylesheet> 
```

有一种非常简单的方法可以将它们都放在一个 XSLT 中并一个接一个地运行，但我想到的方法需要使用该`node-set()`函数，不幸的是，该函数位于每个 XSLT 实现的不同名称空间中。您使用的是哪种 XSLT 处理器？

# makefile - 当只有一个文件更改时执行目标

> ID：14565787
> 
> 赞同：1
> 
> 时间：2013-01-28T15:50:24.420
> 
> 标签：makefile, sass, gnu-make, compass-sass

是否可以同时将一个规则依赖于两个文件，并在其中一个文件发生更改时仅执行一次规则？

我正在将 SASS 源文件的编译添加到我的 Makefile 中。我用 Compass 编译它们，但它有自己的配置，其中指定了源文件夹和目标文件夹。Compass 不带任何参数执行，并将所有更改的 SASS 文件编译成相应的 CSS 文件。

假设我有两个 SASS 文件：

```
folder1/file1.scss
folder2/file2.scss 
```

如果两个文件都改变了，只执行一次 compass 编译两个文件，不需要执行两次 Compass。我可以创建一个 Makefile，如果其中一个或两个文件都被更改，我只能在其中执行一次编译吗？说这样的话：

```
folder_out1/file1.css folder_out2/file2.css: folder1/file1.scss folder2/file2.scss
  compass compile 
```

**编辑**- 适用于 FreeBSD 的修正脚本（有一些小的改动）：

```
#!/usr/bin/env bash

# Start fresh: delete all files and folders
rm -rf folder folder_out Makefile.mock mock_compass
# Create the input folder and files
mkdir folder
echo 1 > folder/file1.scss
echo 2 > folder/file2.scss

# Create mock compass command that creates output directories and copies
# input files to output files without transforming them
echo '
#!/usr/bin/env bash

if ! [ -d folder_out ]; then
    mkdir folder_out
fi
cp folder/file1.scss folder_out/file1.css
cp folder/file2.scss folder_out/file2.css' > ./mock_compass
chmod +x mock_compass

# Create the Makefile
echo -e '
# Disable implicit rules to simplify debugging output
.SUFFIXES:
%: %,v
%: RCS/%
%: RCS/%,v
%: s.%
%: SCCS/s.%

folder_out/file1.css folder_out/file2.css: folder/file1.scss folder/file2.scss
\t@echo Running compass
\t./mock_compass
' > Makefile.mock

# Test it!

echo 'Initial build:'
gmake -f Makefile.mock
echo

echo 'Changing only file1'
touch folder/file1.scss
gmake -f Makefile.mock
echo

echo 'Changing only file2'
touch folder/file2.scss
gmake -f Makefile.mock
echo

echo 'Changing both'
touch folder/file1.scss folder/file2.scss
gmake -f Makefile.mock
echo 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T18:16:02.823

是的，这两行本身就是一个正确的 Makefile，可以完全按照您的意愿行事。

但是，您是否有机会在 Mac 上执行此操作？不幸的是，Mac 文件系统只有 1 秒的文件时间戳分辨率，在这种情况下可能会对 Make 造成严重破坏。

这是一个测试脚本：

```
#!/bin/bash

# Start fresh: delete all input and output folders
rm -rf folder{1,2,_out{1,2}}
# Create input folders and files
mkdir folder1
mkdir folder2
echo 1 > folder1/file1.scss
echo 2 > folder2/file2.scss

# Create mock compass command that creates output directories and copies
# input files to output files without transforming them
echo '
if ! [ -d folder_out1 ]; then
    mkdir folder_out{1,2}
fi
cp folder1/file1.scss folder_out1/file1.css
cp folder2/file2.scss folder_out2/file2.css' > ./mock_compass
chmod +x mock_compass

# Create the Makefile
echo '
# Disable implicit rules to simplify debugging output
.SUFFIXES:
%: %,v
%: RCS/%
%: RCS/%,v
%: s.%
%: SCCS/s.%

folder_out1/file1.css folder_out2/file2.css: folder1/file1.scss folder2/file2.scss
    @echo Running compass
    ./mock_compass
' > Makefile.mock

# Test it!

echo 'Initial build:'
make -f Makefile.mock
echo

echo 'Changing only file1'
touch folder1/file1.scss
make -f Makefile.mock
echo

echo 'Changing only file2'
touch folder2/file2.scss
make -f Makefile.mock
echo

echo 'Changing both'
touch folder1/file1.scss folder2/file2.scss
make -f Makefile.mock
echo 
```

一切在技术上都是正确的，但是当你在 Mac 上运行它时，你会得到不正确的输出：

```
Initial build:
Running compass
./mock_compass

Changing only file1
make[1]: `folder_out1/file1.css' is up to date.

Changing only file2
make[1]: `folder_out1/file1.css' is up to date.

Changing both
make[1]: `folder_out1/file1.css' is up to date. 
```

输入文件在创建输出文件后更改，但在同一秒内，因此它们的创建顺序不会保存在磁盘上。当 Make 重新运行时，它会看到两者完全相同的时间戳，并假设它们是最新的。您可以通过`ls -lT`在脚本中添加调用并将`-d`标志添加到 Make 运行来验证这一点。

一个 hacky 解决方法是将`mock_compass`调用更改为：

```
./mock_compass && sleep 1 # mac timestamp resolution is 1 second :( 
```

然后导致测试脚本产生正确的输出：

```
Initial build:
Running compass
./mock_compass && sleep 1 # mac timestamp resolution is 1 second :(

Changing only file1
Running compass
./mock_compass && sleep 1 # mac timestamp resolution is 1 second :(

Changing only file2
Running compass
./mock_compass && sleep 1 # mac timestamp resolution is 1 second :(

Changing both
Running compass
./mock_compass && sleep 1 # mac timestamp resolution is 1 second :( 
```

但也将脚本的运行时间从 0 秒增加到 4 秒 :'(

如果您对此有更好的解决方法，请告诉我！

# sql - 如何使用sql从日期字段按月分组

> ID：14565788
> 
> 赞同：113
> 
> 时间：2013-01-28T15:50:27.990
> 
> 标签：sql, sql-server, tsql

如何从日期字段中仅按月分组（而不是按天分组）？

这是我的日期字段的样子：

```
2012-05-01 
```

这是我当前的 SQL：

```
select  Closing_Date, Category,  COUNT(Status)TotalCount from  MyTable
where Closing_Date >= '2012-02-01' and Closing_Date <= '2012-12-31'
and Defect_Status1 is not null
group by  Closing_Date, Category 
```

* * *

## 回答 #1

> 赞同：135
> 
> 时间：2013-01-28T16:01:01.677

我会用这个：

```
SELECT  Closing_Date = DATEADD(MONTH, DATEDIFF(MONTH, 0, Closing_Date), 0), 
        Category,  
        COUNT(Status) TotalCount 
FROM    MyTable
WHERE   Closing_Date >= '2012-02-01' 
AND     Closing_Date <= '2012-12-31'
AND     Defect_Status1 IS NOT NULL
GROUP BY DATEADD(MONTH, DATEDIFF(MONTH, 0, Closing_Date), 0), Category; 
```

这将在每个月的第一天分组，所以

```
`DATEADD(MONTH, DATEDIFF(MONTH, 0, '20130128'), 0)` 
```

会给`'20130101'`。我通常更喜欢这种方法，因为它将日期保留为日期。

或者你可以使用这样的东西：

```
SELECT  Closing_Year = DATEPART(YEAR, Closing_Date),
        Closing_Month = DATEPART(MONTH, Closing_Date),
        Category,  
        COUNT(Status) TotalCount 
FROM    MyTable
WHERE   Closing_Date >= '2012-02-01' 
AND     Closing_Date <= '2012-12-31'
AND     Defect_Status1 IS NOT NULL
GROUP BY DATEPART(YEAR, Closing_Date), DATEPART(MONTH, Closing_Date), Category; 
```

这真的取决于你想要的输出是什么。（在您的示例中，关闭年份不是必需的，但如果日期范围跨越年份边界，则可能是）。

* * *

## 回答 #2

> 赞同：46
> 
> 时间：2013-01-28T16:00:35.657

使用[DATEPART](http://msdn.microsoft.com/en-us/library/ms174420.aspx)函数从日期中提取月份。

所以你会做这样的事情：

```
SELECT DATEPART(month, Closing_Date) AS Closing_Month, COUNT(Status) AS TotalCount
FROM t
GROUP BY DATEPART(month, Closing_Date) 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2016-10-05T01:55:57.300

我使用[FORMAT](https://msdn.microsoft.com/en-us/library/hh213505.aspx)函数来完成此操作：

```
select
 FORMAT(Closing_Date, 'yyyy_MM') AS Closing_Month
 , count(*) cc 
FROM
 MyTable
WHERE
 Defect_Status1 IS NOT NULL
 AND Closing_Date >= '2011-12-01'
 AND Closing_Date < '2016-07-01' 
GROUP BY FORMAT(Closing_Date, 'yyyy_MM')
ORDER BY Closing_Month 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2017-10-04T10:25:00.403

通过添加`MONTH(date_column)`.`GROUP BY`

```
SELECT Closing_Date, Category,  COUNT(Status)TotalCount
FROM   MyTable
WHERE  Closing_Date >= '2012-02-01' AND Closing_Date <= '2012-12-31'
AND    Defect_Status1 IS NOT NULL
GROUP BY MONTH(Closing_Date), Category 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-11-15T14:37:35.253

尝试这个：

```
select min(closing_date), date_part('month',closing_date) || '-' || date_part('year',closing_date) AS month,
Category, COUNT(Status)TotalCount 
FROM MyTable
where Closing_Date >= '2012-02-01' AND Closing_Date <= '2012-12-31'
AND Defect_Status1 is not null
GROUP BY month, Category,
ORDER BY 1 
```

这样，您将按连接的日期格式进行分组，并由 -

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-04-23T14:18:14.693

DATEPART 函数在 MySQL 5.6 上不起作用，而是使用 MONTH('2018-01-01')

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2020-09-15T02:47:36.167

SQL Server 2012 以上版本，

```
SELECT  format(Closing_Date,'yyyy-MM') as ClosingMonth,
        Category,  
        COUNT(Status) TotalCount 
FROM    MyTable
WHERE   Closing_Date >= '2012-02-01' 
AND     Closing_Date <= '2012-12-31'
AND     Defect_Status1 IS NOT NULL
GROUP BY format(Closing_Date,'yyyy-MM'), Category; 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-11-06T08:08:03.357

```
SELECT  to_char(Closing_Date,'MM'), 
        Category,  
        COUNT(Status) TotalCount 
FROM    MyTable
WHERE   Closing_Date >= '2012-02-01' 
AND     Closing_Date <= '2012-12-31'
AND     Defect_Status1 IS NOT NULL
GROUP BY Category; 
```

* * *

## 回答 #9

> 赞同：-1
> 
> 时间：2013-01-28T16:00:44.080

您可以使用 Year()、Month() Day() 和 datepart() 来做到这一点。

在您的示例中，这将是：

```
select  Closing_Date, Category,  COUNT(Status)TotalCount from  MyTable
where Closing_Date >= '2012-02-01' and Closing_Date <= '2012-12-31' 
and Defect_Status1 is not null 
group by Year(Closing_Date), Month(Closing_Date), Category 
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2018-06-27T12:33:53.277

试试下面的代码

```
SELECT  Closing_Date = DATEADD(MONTH, DATEDIFF(MONTH, 0, Closing_Date), 0), 
        Category,  
        COUNT(Status) TotalCount 
FROM    MyTable
WHERE   Closing_Date >= '2012-02-01' 
AND     Closing_Date <= '2012-12-31'
AND     Defect_Status1 IS NOT NULL
GROUP BY DATEADD(MONTH, DATEDIFF(MONTH, 0, Closing_Date), 0), Category; 
```

# ios - UIScrollView 作为另一个 UIScrollView 的子视图

> ID：14565789
> 
> 赞同：0
> 
> 时间：2013-01-28T15:50:30.270
> 
> 标签：ios, uiscrollview

是否可以有一个小的垂直滚动视图作为另一个更大的垂直滚动视图的子视图？

我做了一个小原型。当滚动视图不是分层的（例如，如果我将它们并排放置），两者都可以正确滚动。但是如果我把一个作为另一个的子视图，那么当我平移它时只有子滚动视图滚动，而当我平移它时顶部滚动视图似乎被锁定。

我设想如果用户平移嵌入的滚动视图（下图中的 subSV），那么只有嵌入的滚动视图会滚动。类似地，如果用户平移顶部滚动视图，那么只有顶部滚动视图会移动，并且嵌入的滚动视图可能会滚动出可见内容。

您知道执行此操作的任何示例代码吗？

![UIScrollView 作为另一个 UIScrollView 的内容](../Images/358db518ca74304d51443b7492813112.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:59:30.640

显然从 3.0 开始完全支持，并且应该是自动的（参见[http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/UIScrollView_pg/NestedScrollViews/NestedScrollViews.html](http://developer.apple.com/library/ios/#documentation/WindowsViews/Conceptual/UIScrollView_pg/NestedScrollViews/NestedScrollViews.html)）。他们还提供了示例代码，其中可能包含嵌套`UIScrollView`s 的示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T17:10:09.957

我能够以编程方式使其工作，但不使用 StoryBoard。这是一段简单的代码：

```
UIScrollView *topSV = [[UIScrollView alloc] initWithFrame:CGRectMake(100.0f, 100.0f, 600.0f, 600.0f)];
topSV.backgroundColor = [UIColor scrollViewTexturedBackgroundColor];
topSV.contentSize = CGSizeMake(2000.0f, 2000.0f);

UIScrollView *subSV = [[UIScrollView alloc] initWithFrame:CGRectMake(10.0f, 10.0f, 200.0f, 200.0f)];
subSV.backgroundColor = [UIColor whiteColor];
subSV.contentSize = CGSizeMake(2000.0f, 2000.0f);

[topSV addSubview:subSV];

[self.window addSubview:topSV]; 
```

# c# - 一些简单的表结构建议

> ID：14565790
> 
> 赞同：0
> 
> 时间：2013-01-28T15:50:30.373
> 
> 标签：c#, .net, sql-server

数据库的菜鸟，正在寻找一些建议/指针来帮助我入门。

我需要创建一个数据库来保存一些用户的详细信息以及他们必须每周完成的任务列表。然后，此数据将用于显示用户表以及作业的每周完成状态。该表也应该能够显示我前几周的状态。

作业列表必须允许添加新作业和删除旧作业。

我目前有以下表格：

```
-----
User
-----
ID
Name
Email

A number of users will be entered into this table.

----
Job
----
ID
Name
Description

A list of jobs (starting at 4) which each user has to mark as completed each week, this list must be able to grow.

---------
WorkDone
---------
ID
User_ID
Job_ID
Timestamp

Used to record when a user has marked a job as complete. 
```

我的桌子结构还好吗，还是我从错误的角度来看这个？我需要编写一个允许我返回的查询：

```
User.ID (1)  |  Job 1 completed status  |  Job 2 completed status  |  Job (n) completed status
User.ID (2)  |  Job 1 completed status  |  Job 2 completed status  |  Job (n) completed status
User.ID (n)  |  Job 1 completed status  |  Job 2 completed status  |  Job (n) completed status 
```

我在这里没有运气，我只是在寻找那个“doh”当然的时刻。

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:10:04.533

如果你想要返回的结果像

userid, job 1 status,job 2 status, job 3 status
userid(2), job 1 status,job 2 status, job 3 status

您需要旋转结果集，使用游标，或者使用 coalesce 操作符运行 try。

让数据适应这种模式会容易得多

用户 ID，作业 1
用户 ID，作业2
用户 ID，作业 3
...
...
用户 ID（2），作业 1
用户 ID（2），作业 2
....

用于此的 sql 将**基于设置**并**运行得更快**

```
Select * 
from join workdone as w 
inner join job as j on w.jobid = j.jobid
inner user as u on u.userid = w.userid 
```

# asp.net - 从远程客户端访问网站时出现 http 403 错误

> ID：14565791
> 
> 赞同：0
> 
> 时间：2013-01-28T15:50:33.320
> 
> 标签：asp.net, authentication, iis-7

我创建了一个 asp.net 网站，可以从运行在同一域上的客户端浏览器访问该网站。

我在 IIS 7.5 上托管了该站点

我已从 IIS 部分下的功能视图中禁用匿名身份验证并启用 Windows 身份验证。

我在网站的 web.config 中添加了以下内容：

```
<authorization>
  <allow users="group\BizTalk Application Users" />
  <deny users="?" />
</authorization> 
```

在托管网站的服务器上运行时，我可以从浏览器打开网站。但是，如果我随后使用相同的凭据登录到同一域中的不同服务器，当我尝试浏览该站点时，我会收到 http 403 错误。

在对上述内容不满意后，我尝试禁用该站点的所有安全性。我禁用了 Windows 身份验证并启用了匿名身份验证，但仍然出现相同的错误。我检查了服务器上的 IIS 日志，可以看到 403 的子代码是 18。

我在客户端上运行了 fiddler 并看到以下请求/响应：

**要求**

```
GET http://tst-bts01/Vasanta.Int.SEOPSupportApp/Orders.aspx HTTP/1.1
Accept: image/jpeg, image/gif, image/pjpeg, application/x-ms-application,       application/xaml+xml, application/x-ms-xbap, application/vnd.ms-excel, application/vnd.ms-  powerpoint, application/msword, */*
Accept-Language: en-GB
User-Agent: Mozilla/4.0 (compatible; MSIE 7.0; Windows NT 6.1; WOW64; Trident/4.0;   SLCC2; .NET CLR 2.0.50727; .NET CLR 3.5.30729; .NET CLR 3.0.30729; .NET4.0C; .NET4.0E)
Accept-Encoding: gzip, deflate
Connection: Keep-Alive
Host: tst-bts01 
```

**回复**

```
HTTP/1.1 403 Forbidden
Server: Microsoft-IIS/7.5
X-Powered-By: ASP.NET
Date: Tue, 29 Jan 2013 10:24:34 GMT
Content-Length: 0 
```

我尝试更改托管该站点的应用程序池。我已经尝试禁用对公司代理（isa 服务器）的调用，现在已经没有想法了。

谁能告诉我我做错了什么？

谢谢，罗伯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:38:57.267

403有点像红鲱鱼。要生成的第一个错误是 401.2。我为此定义了一个自定义页面，并且重定向到此自定义页面导致了 403。

# antlr - ANTLR 4 树注入/重写运算符

> ID：14565794
> 
> 赞同：16
> 
> 时间：2013-01-28T15:50:44.543
> 
> 标签：antlr, antlr3, antlr4

在 ANTLR 3 中，您可以执行以下操作：

```
 andExpression
  :  (andnotExpression        -> andnotExpression)
     (AND? a=andnotExpression -> ^(AndNode $andExpression $a))* 
  ; 
```

知道如何在新版本中做到这一点吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2013-01-28T19:25:26.553

正如 Sam (280Z28) 所提到的，ANTLR 4 没有重写运算符。

在生成解析器时，ANTLR 4 创建了一些侦听器类，您可以使用它们来侦听所有解析器规则的“进入”和“退出”事件。

此外，ANTLR 4 支持“直接左递归规则”，因此您的表达式规则可以在单个规则中定义，如下所示：

```
grammar Expr;

parse
 : expression EOF
 ;

expression
 : '(' expression ')'
 | IDENTIFIER
 | NOT expression
 | expression AND? expression
 | expression OR expression
 ;

LPAREN     : '(';
RPAREN     : ')';
NOT        : 'NOT';
AND        : 'AND';
OR         : 'OR';
IDENTIFIER : [a-zA-Z_] [a-zA-Z_0-9]*;
SPACE      : [ \t\r\n]+ -> skip; 
```

解析输入`"a b OR NOT c AND d"`时，将创建以下解析树：

![在此处输入图像描述](../Images/7f35cee35be9f32022d3270a46632250.png)

*（使用[ANTLRWorks2](http://tunnelvisionlabs.com/products/demo/antlrworks)创建的图像，谢谢 Sam！非常令人印象深刻的 IDE，我喜欢它！）*

生成解析器和侦听器类：

```
java -cp antlr-4.0-complete.jar org.antlr.v4.Tool Expr.g4
```

并生成以下类，可让您帮助“走”树：

```
public class ExprBaseListener implements ExprListener {

    @Override public void enterExpression(ExprParser.ExpressionContext ctx) { }
    @Override public void exitExpression(ExprParser.ExpressionContext ctx) { }

    @Override public void enterParse(ExprParser.ParseContext ctx) { }
    @Override public void exitParse(ExprParser.ParseContext ctx) { }

    @Override public void enterEveryRule(ParserRuleContext<Token> ctx) { }
    @Override public void exitEveryRule(ParserRuleContext<Token> ctx) { }
    @Override public void visitTerminal(TerminalNode<Token> node) { }
    @Override public void visitErrorNode(ErrorNode<Token> node) { }
} 
```

现在您需要检查`ExprParser.ExpressionContext`以查看匹配的替代方案`expression`，这就是“树标签”派上用场的地方。更改`expression`规则如下：

```
expression
 : '(' expression ')'           # EXPR
 | IDENTIFIER                   # ID_EXPR
 | 'NOT' expression             # NOT_EXPR
 | expression 'AND'? expression # AND_EXPR
 | expression 'OR' expression   # OR_EXPR
 ; 
```

并重新生成解析器和侦听器，您会看到`ExprBaseListener`现在看起来像这样：

```
public class ExprBaseListener implements ExprListener {
    @Override public void enterAND_EXPR(ExprParser.AND_EXPRContext ctx) { }
    @Override public void exitAND_EXPR(ExprParser.AND_EXPRContext ctx) { }

    @Override public void enterOR_EXPR(ExprParser.OR_EXPRContext ctx) { }
    @Override public void exitOR_EXPR(ExprParser.OR_EXPRContext ctx) { }

    @Override public void enterEXPR(ExprParser.EXPRContext ctx) { }
    @Override public void exitEXPR(ExprParser.EXPRContext ctx) { }

    @Override public void enterNOT_EXPR(ExprParser.NOT_EXPRContext ctx) { }
    @Override public void exitNOT_EXPR(ExprParser.NOT_EXPRContext ctx) { }

    @Override public void enterID_EXPR(ExprParser.ID_EXPRContext ctx) { }
    @Override public void exitID_EXPR(ExprParser.ID_EXPRContext ctx) { }

    @Override public void enterParse(ExprParser.ParseContext ctx) { }
    @Override public void exitParse(ExprParser.ParseContext ctx) { }

    @Override public void enterEveryRule(ParserRuleContext ctx) { }
    @Override public void exitEveryRule(ParserRuleContext ctx) { }
    @Override public void visitTerminal(TerminalNode node) { }
    @Override public void visitErrorNode(ErrorNode node) { }
} 
```

即，为每个标签`expression`创建一个单独的进入和退出方法。

现在，假设您只对`AND`表达式的输入事件感兴趣。您可以创建一个自定义类来扩展它`ExprBaseListener`并覆盖`enterAND_EXPR`：

```
public class ExprWalker extends ExprBaseListener {

    @Override 
    public void enterAND_EXPR(ExprParser.AND_EXPRContext ctx) { 
        java.util.List<ExprParser.ExpressionContext> e = ctx.expression();
        System.out.println("AND -> " + e.get(0).getText() + ", " + e.get(1).getText());
    }
} 
```

为了测试这一切，创建一个小的驱动程序类：

```
import org.antlr.v4.runtime.*;
import org.antlr.v4.runtime.tree.*;

public class Main {

    public static void main(String[] args) throws Exception {

        String input = "a b OR NOT c AND d";
        ExprLexer lexer = new ExprLexer(new ANTLRInputStream(input));
        ExprParser parser = new ExprParser(new CommonTokenStream(lexer));
        ParseTree tree = parser.parse();
        ParseTreeWalker walker = new ParseTreeWalker();
        walker.walk(new ExprWalker(), tree);
    }
} 
```

并运行它：

```
java -cp antlr-4.0-complete.jar org.antlr.v4.Tool Expr.g4
javac -cp antlr-4.0-complete.jar *.java
java -cp .:antlr-4.0-complete.jar 主要
```

之后，您将看到以下内容打印到您的控制台：

```
AND -> a, bornotcANDd
AND -> NOTc, d
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-28T18:08:53.150

ANTLR 4 没有重写运算符或`output=AST`类似 ANTLR 3 的选项。由 ANTLR 4 解析器生成的树是解析树，其形状由语法规则隐式定义。

# java - 如果java中的对象和类名相同，如何静态调用方法

> ID：14565799
> 
> 赞同：1
> 
> 时间：2013-01-28T15:51:00.330
> 
> 标签：java

```
class SomeClass
{
    static public void someStaticMethod(){};
}

SomeClass SomeClass=new SomeClass();
SomeClass.someStaticMethod(); 
```

如何调用对象名与类名相同的任何类的静态方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T15:56:02.013

你不需要做任何事情——它会照原样工作（尽管使用这样一个令人困惑的代码几乎没有意义）。

[JLS #6.5.2](http://docs.oracle.com/javase/specs/jls/se7/html/jls-6.html#jls-6.5.2)中指定了如何处理不明确的名称。尤其：

> 如果 AmbiguousName 是一个简单的名称，由一个标识符组成：
> 
> *   如果标识符出现在具有该名称的局部变量声明（第 14.4 节）或参数声明（第 8.4.1 节、第 8.8.1 节、第 14.20 节）或字段声明（第 8.3 节）的范围内（第 6.3 节），则AmbiguousName 被重新分类为 ExpressionName。
> *   [...]
> *   否则，如果在包含标识符的编译单元（第 7.3 节）中声明了该名称的类型，要么通过单一类型导入声明（第 7.5.1 节），要么通过按需类型导入声明（ §7.5.2)，或通过单静态导入声明 (§7.5.3)，或通过按需静态导入声明 (§7.5.4)，然后将 AmbiguousName 重新分类为 TypeName。

因此，在您的情况下，`SomeClass`将是您在上面声明的一行的变量，它优先于类型。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T15:52:37.227

变量名不应大写，因此您将拥有：

```
SomeClass.someStaticMethod(); 
```

对于静态的，并且：

```
someClass.someNonStaticMethod(); 
```

对于非静态版本。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:51:53.797

不要以大写字母开头的实例名称！

你应该写：

```
SomeClass someClass=new SomeClass(); 
```

或者更好：

```
SomeClass someObject=new SomeClass(); 
```

如果您遵循这些非常常见的规则，您将不会遇到此问题。（我试图猜测这个'-1'来自哪里！！！）

# c# - 在 Firefox 中获取完整的文件路径

> ID：14565801
> 
> 赞同：0
> 
> 时间：2013-01-28T15:51:02.563
> 
> 标签：c#, filepath

我正在使用**ASP .Net MVC 4.0、vs10**

在我的一个按钮单击事件中，我得到了这样的公司名称：

```
if (Request.Form["NAMEbtnImport"].Length > 0)
            {
                if (Request.Form["NAMEbtnUpload"].Length > 0 && Request.Form["NAMEtxtCompany"].Length > 0 )
                {
                    Session["CompanyName"] = Request.Form["NAMEtxtCompany"].ToString();
                    var x = collection.GetValue("NAMEbtnUpload"); 
                    filePath = x.AttemptedValue.ToString();
                    filePath = Request.Form["NAMEbtnUpload"];
                    string fileName = Path.GetFileName(filePath);                                        //var path = Path.Combine(Server.MapPath("~/Uploads"), filePath);
                    if (System.IO.File.Exists(filePath))
                    {
                        System.IO.File.Copy(filePath, Server.MapPath("~/Uploads/" + fileName));
                    }
                    companyName = Request.Form["NAMEtxtCompany"].ToString();
                    newFilePath = "Uploads/" + fileName;
                    ViewBag.CompanyName = companyName;
                } 
```

这是我的 html：**[编辑]**

```
<input type="file" value="Upload" id="IDbtnUpload" name="NAMEbtnUpload"/> 
```

这在 IE 中运行良好。文件路径已满。但在 Firefox 中，只有文件名正在接收。collection 和 request.form 都输出相同的数据。

这里有什么问题？对不起我糟糕的英语。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:03:33.347

Internet Explorer 将完整的文件路径发送到服务器；火狐没有。

这是浏览器作者的安全决定；你无能为力。

此外，您似乎正在`File.Copy`尝试将源上传文件复制到服务器上的某个位置。这仅用于复制*本地*文件 - 如果浏览器未在服务器上运行，它将不起作用！

你需要使用类似的东西

```
<asp:FileUpload  runat="server" ID="fuSample" /> 
```

在您的`aspx`文件中和

```
if (fuSample.HasFile)
{
    fuSample.SaveAs(
        Server.MapPathMapPath("~/Uploads/" + fuSample.FileName));
} 
```

在你的代码隐藏中。

编辑：如果你被香草卡住了`<input type="file" id="someID" ... />`，试试

```
var file = this.Context.Request.Files["someID"];
if (file != null)
    file.SaveAs(Server.MapPathMapPath("~/Uploads/" + file.FileName)); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T15:58:38.317

您是否希望访问客户端计算机上的完整文件路径？你不应该这样做，也不应该这样做。

允许这样做的浏览器会带来安全风险。

如果我误解了您要做什么，请提前道歉！

编辑：要在 MVC 中处理文件上传，您可以在操作中使用 HttpPostedFileBase。像这样的东西：

```
<input type="file" name="file"> 
```

和

```
//POST FORM

        public ActionResult form_Post(HttpPostedFileBase file)
        {

              if (file != null && file.ContentLength > 0)
                {
                  file.SaveAs(mySavePath);
                 }
         } 
```

编辑：以及更多关于文件保存的代码以供您最新评论：

```
 var fileName = Path.GetFileName(file.FileName);

                var path = Path.Combine(Server.MapPath("/myupload/path/"), fileName);

                if (!System.IO.File.Exists(path))
                {
                    file.SaveAs(path);
                } 
```

# mongodb - 如何在 orbeon 表单构建器表单中激活 mongodb 持久层

> ID：14565805
> 
> 赞同：0
> 
> 时间：2013-01-28T15:51:08.643
> 
> 标签：mongodb, persistence, orbeon

> **可能重复：**
> [如何在 Orbeon 中添加 MongoDB 数据源](https://stackoverflow.com/questions/14441279/how-to-add-mongodb-data-source-in-orbeon)

如何在 orbeon 表单构建器表单中激活 mongodb 持久层？

[这里](http://wiki.orbeon.com/forms/doc/developer-guide/form-runner/persistence-api)讨论了持久化 api ，我可以使用浏览器访问我在 url:8080/orbeon/fr/services/mongo 下设置的 mongodb 服务。

但是那里没有数据，我不知道如何将数据发布到服务。

# facebook - 如何将 Facebook 的电子邮件添加到范围？

> ID：14565812
> 
> 赞同：0
> 
> 时间：2013-01-28T15:51:41.197
> 
> 标签：facebook, email, scope

我知道如何获取标准电子邮件 (cezary.kowalski@o2.pl)。如何获取 Facebook 的电子邮件（cezary.kowalski.56481@facebook.com）？

[屏幕](http://scr.hu/0fde/iidir)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:55:14.900

Facebook 的电子邮件 ID 只不过是`username`拥有该域的 facebook 用户`facebook.com`因此，如果您只是拥有`username`任何 facebook 用户的电子邮件，那么您也将拥有他/她的 facebook 电子邮件。只是`username@facebook.com`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:09:02.427

我不认为这是可能的。您将收到用户的主要电子邮件。以前，用户无法与应用程序共享他们的直接电子邮件，因此会共享代理电子邮件。但是我不再看到这个选项了。

无论如何，您可以快速查看用户 FQL 表以检查可用字段：

```
SELECT contact_email, email, email_hashes, proxied_email FROM user WHERE uid=me() 
```

您也可以[在这里](https://developers.facebook.com/tools/explorer/?fql=SELECT%20contact_email,%20email,%20email_hashes,%20proxied_email%20FROM%20user%20WHERE%20uid=me%28%29)自己尝试。

# c++ - x86 EXE 中是否有分配 winapi 调用？

> ID：14565813
> 
> 赞同：0
> 
> 时间：2013-01-28T15:51:45.923
> 
> 标签：c++, memory, memory-management, x86, opcodes

在 C++ 编译的 EXE 中如何处理分配？如果您没有代码，分配管理器是否已融入应用程序，从而无法跟踪分配/取消分配？或者是否有 WinAPI 调用或类似的内存分配？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:54:57.057

通常，分配功能由您的*C 运行时库*提供。该库又是由您的供应商编写的。Microsoft 的 Visual C++ 可能会使用 Windows 内核例程来实现分配，但您应该查看文档和/或询问您的供应商。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T15:57:01.690

通常两者都有。普通代码通过标准库中内置的堆管理器分配内存。反过来，这会从操作系统分配更大的内存块，然后允许其余代码从那个大块中分配更小的内存。

堆管理器是否实际在应用程序中取决于它是如何编译和链接的。如果它在 DLL 中使用标准库，那么它将使用标准库 DLL 中的代码。如果它静态链接到标准库，那么堆管理器代码将链接到可执行文件本身。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T15:58:34.790

内存分配的基础确实是一些 WinAPI 调用（通常是[堆](http://msdn.microsoft.com/en-us/library/windows/desktop/aa366711%28v=vs.85%29.aspx)功能）。这些被“隐藏”在`operator new`and`malloc`和其他相关功能的后面。您应该能够识别对堆函数的调用，但在原始堆和实际内存分配调用之间可能有几层函数。

编辑：显然，如果程序被编译为使用 C 运行时作为 .DLL，则实际执行分配的代码根本不在可执行文件中 - 它会在 DLL 中。

当然，编写代码的程序员很可能： 1\. 没有使用 C/C++，在这种情况下，所有的赌注都没有了。2\. 以某种方式编写自己的内存管理版本，例如使用[VirtualAlloc](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa366887%28v=vs.85%29.aspx)

# sql - 在特定月份的sql中查找日期之间的差距

> ID：14565817
> 
> 赞同：1
> 
> 时间：2013-01-28T15:52:00.870
> 
> 标签：sql, sql-server, tsql

```
我在一个表中有 4 列 `BenefitKey、MemberKey、StartDate、Enddate`

给定这样的数据：

    开始日期 结束日期
    ------------------------------
    20110315 20110316
    20110317 20110320
    20110321 20110325
    20110326 20121202
    20121203 20121210
    20121211 20121215
    20121225 20121231

我需要找到 12 月份之间的缺失差距并使用 SQL 查询来填补空白

这里缺少的差距是从“20121216”到“20121224”。我有 1000 行这样的行，所以我需要一个 SQL 查询。我找到了一些解决方案，但仍然不正确，这是我写的
创建表 #BenfitDim（成员名称 varchar（30），成员密钥 int，成员有效日期日期时间，成员终止日期日期时间）

    插入 #BenfitDim 值（'tom',231,'2012-11-18','2012-11-23'）
    插入 #BenfitDim 值（'tom',231,'2012-11-24','2012-12-12'）
    插入 #BenfitDim 值（'tom',231,'2013-01-01','2999-12-12'）
    插入 #BenfitDim 值（'jack',344,'2011-06-27','2012-12-07'）
    插入 #BenfitDim 值（'jack',344,'2012-12-01','2015-12-31'）
    插入 #BenfitDim 值（'nick',243,'2012-12-01','2012-12-07'）
    插入 #BenfitDim 值（'joy',234,'2012-12-08','2012-12-14'）
    插入 #BenfitDim 值（'tim',364,'2012-12-25','2012-12-30'）
    插入 #BenfitDim 值（'tim',364,'2013-01-15','2013-01-30'）
    插入 #BenfitDim 值（'杰瑞'，365，'2011-9-15'，'2012-12-31'）
    插入 #BenfitDim 值（'杰瑞'，365，'2013-01-15'，'2013-01-30'）
    插入 #BenfitDim 值（'杰瑞'，365，'2011-01-15'，'2012-01-30'）

    选择会员密钥，
           成员名字，
           DATEADD(DAY,1,T1.MemberTerminationDate)AS MemberEffectiveDate,
           DATEADD(DAY,-1,D.MemberEffectiveDate)AS MemberTerminationDate
    从
           #BenfitDim AS T1 交叉申请（
                                    SELECT MIN(MemberEffectiveDate)AS MemberEffectiveDate
                                      来自#BenfitDim AS T
                                      WHERE T.MemberEffectiveDate > T1.MemberEffectiveDate
                                      AND T.MemberKey = T1.MemberKey)D
     WHERE DATEADD(DAY,1,T1.MemberTerminationDate) D.MemberEffectiveDate

执行后，您会发现丢失的序列，但仍然存在一个小问题，我们如何处理表中“jack”的重叠数据并正确获取丢失的序列。

```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T15:52:55.067

你有一张包含完整年份日期的表格吗？如果没有，您需要创建一个来查找缺失的日期。否则，您可以使用非常慢的游标。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:49:09.963

如果您的数据具有这种格式且没有重叠，那么以下查询将为您提供两个日期*之间的间隔：*

```
select enddate+1 as startdate,
       (select MIN(startdate) - 1 from t t2 where t2.startdate > t.enddate
       ) as enddate
from t
where enddate+1 not in (select startdate from t) 
```

我在这里使用相关子查询，因为在我看来，它使查询的结构更清晰。间隔`enddate+1`在下一个开始日期前一天开始并结束。`enddate+1`并且，当它本身不是开始日期时，只有一个间隙。

如果这产生了正确的结果，那么您可以使用以下方法将这些值插入到您的表中：

```
insert into t(startdate, enddate)
    select enddate+1 as startdate,
           (select MIN(startdate) - 1 from t t2 where t2.startdate > t.enddate
           ) as enddate
    from t
    where enddate+1 not in (select startdate from t) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T15:57:44.873

假设您的表名为“Benefits”。

沿着这条线的东西会解决你的问题吗？

```
SELECT A.EndDate + 1 AS GapFrom,
    (SELECT MIN(StartDate) - 1 
     FROM Benefits WHERE StartDate > A.EndDate) AS GapUntil
FROM Benefits A
LEFT JOIN Benefits B WHERE A.EndDate + 1 = B.StartDate
WHERE B.BenefitKey IS NULL 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T15:59:18.790

您想要做的是一个自我加入，您将在其中加入先前的记录，例如：

```
SELECT …,startDate, endDate
  FROM Table t, Table t2
 WHERE t2.id=t1.id+1 
```

（这假设 ID 是连续的，如果不是，则执行以下操作：

```
 WHERE t1.enddate < MIN(t1.startdate) 
```

这应该让您按日期顺序获得下一条记录。

然后堵住这个洞很简单：

```
INSERT INTO table
   VALUES blah, blah, t.endDate+1, t2.startDate-1 
```

（日期上的伪代码，您必须使用您的版本支持的任何功能进行数学运算，例如 DATEADD。）

# android-ndk - 使用独立工具链获取“无法打开 crtbegin_dynamic.o：没有这样的文件或目录”

> ID：14565820
> 
> 赞同：2
> 
> 时间：2013-01-28T15:52:06.883
> 
> 标签：android-ndk

我正在使用一个独立的工具链，我正在尝试交叉编译 FreeType2。当我跑...

```
./configure --host=arm-linux-androideabi --without-zlib --prefix=/tmp/freetype 
```

它失败了以下...

```
configure:2954: arm-linux-androideabi-gcc --sysroot=/tmp/my-toolchain/sysroot -V >&5
arm-linux-androideabi-gcc: error: unrecognized option '-V'
arm-linux-androideabi-gcc: fatal error: no input files
compilation terminated.
configure:2965: $? = 1
configure:2954: arm-linux-androideabi-gcc --sysroot=/tmp/my-toolchain/sysroot -qversion >&5
arm-linux-androideabi-gcc: error: unrecognized option '-qversion'
arm-linux-androideabi-gcc: fatal error: no input files
compilation terminated.
configure:2965: $? = 1
configure:2985: checking whether the C compiler works
configure:3007: arm-linux-androideabi-gcc --sysroot=/tmp/my-toolchain/sysroot -std=gnu99       conftest.c  >&5
/private/tmp/my-toolchain/bin/../lib/gcc/arm-linux-androideabi/4.6/../../../../arm-linux-androideabi/bin/ld: error: cannot open crtbegin_dynamic.o: No such file or directory 
```

从我读到的所有内容来看，这是一个 sysroot 问题，但如您所见，我添加了 sysroot 并且我使用的是独立工具链。

有谁知道我错过了什么？

# servlets - 如何为 Jetty 中的所有上下文添加服务器类？

> ID：14565825
> 
> 赞同：1
> 
> 时间：2013-01-28T15:52:14.977
> 
> 标签：servlets, jetty, slf4j, logback

我已将码头配置为使用 slf4j 和 logback。版本 8.x

根据这个地方[http://dev.eclipse.org/mhonarc/lists/jetty-users/msg02859.html](http://dev.eclipse.org/mhonarc/lists/jetty-users/msg02859.html)您可以将这些类添加到每个上下文的码头服务器类列表中，因此Web应用程序看不到slf4j 服务器类。

我不想为我部署的每场战争都这样做。是否可以只配置一次服务器的所有类和资源（默认情况下 webapps 可见 $JETTY_HOME/resources/logback.xml）在已部署的 webapps 的类加载器中不可用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T17:45:51.747

是的，您可以拥有一个参与[webapps 部署生命周期的](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/deploy/AppLifeCycle.html)类。

示例类：

```
package example.deploy.logging.config;

import org.eclipse.jetty.deploy.App;
import org.eclipse.jetty.deploy.AppLifeCycle;
import org.eclipse.jetty.deploy.graph.Node;
import org.eclipse.jetty.server.handler.ContextHandler;
import org.eclipse.jetty.webapp.WebAppContext;

public class LoggingConfigBinding implements AppLifeCycle.Binding
{
    public String[] getBindingTargets()
    {
        return new String[]
        { "deploying" };
    }

    public void processBinding(Node node, App app) throws Exception
    {
        ContextHandler handler = app.getContextHandler();
        if (handler == null)
        {
            throw new NullPointerException("No Handler created for App: " + app);
        }

        if (handler instanceof WebAppContext)
        {
            WebAppContext webapp = (WebAppContext)handler;
            webapp.addSystemClass("org.slf4j.");
        }
    }
} 
```

然后，您将拥有一段 XML，将其加载到[DeploymentManager](http://download.eclipse.org/jetty/stable-8/apidocs/org/eclipse/jetty/deploy/DeploymentManager.html)

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE Configure PUBLIC "-//Jetty//Configure//EN" "http://www.eclipse.org/jetty/configure.dtd">
<Configure id="Server" class="org.eclipse.jetty.server.Server">
  <Ref id="DeploymentManager">
    <Call name="addLifeCycleBinding">
      <Arg>
        <New class="example.deploy.logging.config.LoggingConfigBinding">
        </New>
      </Arg>
    </Call>
  </Ref>
</Configure> 
```

有关更完整的示例，请参阅[在 Jetty 上的 Logback 中筛选日志](http://wiki.eclipse.org/Jetty/Tutorial/Sifting_Logs_with_Logback)（注意：logback 是 slf4j 日志记录实现）。

# sql - 在 Oracle 10g 中将行转换为列

> ID：14565826
> 
> 赞同：4
> 
> 时间：2013-01-28T15:52:18.203
> 
> 标签：sql, oracle, plsql, pivot, procedure

我有一些查询，返回以下数据：

```
T_REF   T_CUR_CODE   T_TERM   T_TERM_MAX   T_REST1   T_RATE1   T_REST2   T_RATE2   T_REST3    T_RATE3

1       RUR          181      365          5000      10,8      50000,01  11,1      500000,01  11,2
1       RUR          366      730          5000      11,4      50000,01  11,55     500000,01  11,6
1       USD          181      365          100       5,9       1500,01   6,1       20000,01   6,55
1       EUR          181      365          100       5,7       1500,01   5,9       20000,01   6
1       USD          366      730          100       6,3       1500,01   6,4       20000,01   6,6
1       EUR          366      730          100       6,05      1500,01   6,2       20000,01   6,3 
```

如您所见，此查询描述了参考费率。每个速率取决于数量（t_rest）和持续时间（t_term 和 t_term_max）。我需要对 1 个参考和每种货币的所有汇率进行分组（3 行，6 个汇率）：

```
T_REF   T_CUR_CODE   T_RATE_1   T_TERM_1   T_TERM_MAX_1   T_REST_1   T_RATE_2   T_TERM_2   T_TERM_MAX_2   T_REST_2   T_RATE_3   T_TERM_3   T_TERM_MAX_3   T_REST_3   T_RATE_4   T_TERM_4   T_TERM_MAX_4   T_REST_4   T_RATE_5   T_TERM_5   T_TERM_MAX_5   T_REST_5   T_RATE_6   T_TERM_6   T_TERM_MAX_6   T_REST_6

1       RUR          10,8       181        365            5000       11,1       181        365            50000,01   11,2       181        365            500000,01  11,4       366        730            5000       11,55      366        730            50000,01   11,6       366        730            500000,01 
```

我在存储过程中将它用作动态查询（dbms_sql 包），在生成查询之前，我现在每行有多少汇率（此示例值为 3）以及每种货币有多少不同的条款（此处值为 2）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T15:09:23.743

我必须在这里提到，Oracle 不允许动态枢轴。你可以在[这里](https://forums.oracle.com/forums/thread.jspa?threadID=2302816)阅读。

我只能建议您可以通过查询使用静态数据透视。

我已经稍微修改了您的数据 - 我已将该`T_REF`列用作序列号。这是我的解决方案：

```
WITH tbl AS (
SELECT 1 T_REF
       , 'RUR' T_CUR_CODE
       , 181 T_TERM
       , 365 T_TERM_MAX
       , 5000 T_REST1
       , '10,8' T_RATE1
       , '50000,01' T_REST2
       , '11,1' T_RATE2
       , '500000,01' T_REST3
       , '11,2' T_RATE3
FROM DUAL
UNION
SELECT 2, 'RUR', 366, 730, 5000, '11,4', '50000,01', '11,55', '500000,01', '11,6' FROM dual
UNION
SELECT 3, 'EUR', 181, 365, 100, '5,7', '1500,01', '5,9', '20000,01', '6' FROM dual
UNION
SELECT 4, 'EUR', 366, 730, 100, '6,05', '1500,01', '6,2', '20000,01', '6,3' FROM dual
UNION
SELECT 5, 'USD', 181, 365, 100, '5,9', '1500,01', '6,1', '20000,01', '6,55' FROM dual
UNION
SELECT 6, 'USD', 366, 730, 100, '6,3', '1500,01', '6,4', '20000,01', '6,6' FROM dual
)
SELECT t_cur_code
       , COUNT(*) AS cnt
       , MAX(CASE MOD(t_ref, 2) WHEN 1 THEN T_RATE1 ELSE NULL END) AS t_rate_1
       , MAX(CASE MOD(t_ref, 2) WHEN 1 THEN T_TERM ELSE NULL END) AS T_TERM_1
       , MAX(CASE MOD(t_ref, 2) WHEN 1 THEN T_TERM_MAX ELSE NULL END) AS T_TERM_MAX_1
       , MAX(CASE MOD(t_ref, 2) WHEN 1 THEN T_REST1 ELSE NULL END) AS T_REST_1
       , MAX(CASE MOD(t_ref, 2) WHEN 1 THEN T_RATE2 ELSE NULL END) AS T_RATE_2
       , MAX(CASE MOD(t_ref, 2) WHEN 1 THEN T_TERM ELSE NULL END) AS T_TERM_2
       , MAX(CASE MOD(t_ref, 2) WHEN 1 THEN T_TERM_MAX ELSE NULL END) AS T_TERM_MAX_2
       , MAX(CASE MOD(t_ref, 2) WHEN 1 THEN T_REST2 ELSE NULL END) AS T_REST_2
       , MAX(CASE MOD(t_ref, 2) WHEN 1 THEN T_RATE3 ELSE NULL END) AS T_RATE_3
       , MAX(CASE MOD(t_ref, 2) WHEN 1 THEN T_TERM ELSE NULL END) AS T_TERM_3
       , MAX(CASE MOD(t_ref, 2) WHEN 1 THEN T_TERM_MAX ELSE NULL END) AS T_TERM_MAX_3
       , MAX(CASE MOD(t_ref, 2) WHEN 1 THEN T_REST3 ELSE NULL END) AS T_REST_3
       , MAX(CASE MOD(t_ref, 0) WHEN 1 THEN T_RATE1 ELSE NULL END) AS t_rate_4
       , MAX(CASE MOD(t_ref, 0) WHEN 1 THEN T_TERM ELSE NULL END) AS T_TERM_4
       , MAX(CASE MOD(t_ref, 0) WHEN 1 THEN T_TERM_MAX ELSE NULL END) AS T_TERM_MAX_4
       , MAX(CASE MOD(t_ref, 0) WHEN 1 THEN T_REST1 ELSE NULL END) AS T_REST_4
       , MAX(CASE MOD(t_ref, 0) WHEN 1 THEN T_RATE2 ELSE NULL END) AS T_RATE_5
       , MAX(CASE MOD(t_ref, 0) WHEN 1 THEN T_TERM ELSE NULL END) AS T_TERM_5
       , MAX(CASE MOD(t_ref, 0) WHEN 1 THEN T_TERM_MAX ELSE NULL END) AS T_TERM_MAX_5
       , MAX(CASE MOD(t_ref, 0) WHEN 1 THEN T_REST2 ELSE NULL END) AS T_REST_5
       , MAX(CASE MOD(t_ref, 0) WHEN 1 THEN T_RATE3 ELSE NULL END) AS T_RATE_6
       , MAX(CASE MOD(t_ref, 0) WHEN 1 THEN T_TERM ELSE NULL END) AS T_TERM_6
       , MAX(CASE MOD(t_ref, 0) WHEN 1 THEN T_TERM_MAX ELSE NULL END) AS T_TERM_MAX_6
       , MAX(CASE MOD(t_ref, 0) WHEN 1 THEN T_REST3 ELSE NULL END) AS T_REST_6
FROM tbl
GROUP BY t_cur_code
; 
```

这可能看起来很长，但它非常简单。我已经`COUNT(*)`在选择列表中使用过，因此您可以看到您拥有多少行或记录`T_CUR_CODE`。如果数字不是 2，那么是时候为您更改查询了。

我使用`MAX`了在多行中只选择一个值的函数，其余的值应该是`null`.

我希望这有帮助。

# c# - 为什么 ISession 保存不插入？

> ID：14565827
> 
> 赞同：1
> 
> 时间：2013-01-28T15:52:18.767
> 
> 标签：c#, sql, nhibernate, save

似乎插入已成功完成，但该项目实际上从未插入到表中。

**如果我在插入后立即进行控制台转储，它会将项目显示为已插入，但是当我在表上显示数据时，它不会反映此更改。**

如果我选择“**显示表数据**”，则不会反映更改，但我在服务器资源管理器中启动新的插入和查询，那么它会反映正确的更改。

GITHUB 项目：[https ://github.com/Fabii23/NHibernate.git](https://github.com/Fabii23/NHibernate.git)

SQL 输出：

```
INSERT INTO Products (Name, Category, Discontinued) VALUES (@p0, @p1
, @p2);@p0 = 'Barley and Oats' [Type: String (0)], @p1 = 'Grains' [Type: String
(0)], @p2 = 0 [Type: Int32 (0)]
NHibernate: select @@IDENTITY 
```

* * *

```
try
{             
    //Try an insert
    using (ISession session = NHibernateTest.NHibernateHelper.GetCurrentSession())
            {
                using (ITransaction transaction = session.BeginTransaction())
                {
                    int _bool = 1;
                    var product = new Product("Wonder Bread", "Bread", _bool);
                    session.Save(product);
                    transaction.Commit();
                }
            }

        }
        catch (Exception e)
        {
            Console.WriteLine("Error occurred :" + e.Message);
            Console.WriteLine("Error occurred :" + e);
        }
} 
```

* * *

请注意，ID**自动递增**

表列：

**整数**ID | **字符串** 名称 | **字符串** 类别 | **停产**|

* * *

sql输出：

```
NHibernate: INSERT INTO Products (Name, Category, Discontinued) VALUES (@p0, @p1
, @p2);@p0 = 'Wonder Bread' [Type: String (0)], @p1 = 'Bread' [Type: String (0)]
, @p2 = 1 [Type: Int32 (0)]
NHibernate: select @@IDENTITY 
```

* * *

```
<?xml version="1.0" encoding="utf-8" ?>
<hibernate-mapping xmlns="urn:nhibernate-mapping-2.2" assembly="HibernateExample" namespace="HibernateExample.Domain" >
  <class name="Product" table="Products">
    <id name="Id" type="integer">
      <generator class="identity"/>
    </id>
    <property name="Name" type="string"/>
    <property name="Category" type="string"/>
    <property name="Discontinued" />
  </class>
</hibernate-mapping> 
```

## 休眠规格：

```
 <hibernate-configuration xmlns="urn:nhibernate-configuration-2.2" >
    <session-factory>
      <property name="connection.driver_class"> NHibernate.Driver.SqlServerCeDriver</property>
        <property name="dialect">NHibernate.Dialect.MsSqlCeDialect</property>
      <property name="connection.connection_string">Data Source=FirstSample.sdf;</property>
      <property name="show_sql">true</property>
    </session-factory>
  </hibernate-configuration> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T09:50:26.240

根据您在 github 上发布的代码，您应该知道将要更新的数据库是位于 bin\debug 目录（用于调试模式）中的数据库，而不是位于项目源目录根目录的数据库。

还要注意，每次重新编译应用程序时，该数据库都会被覆盖（并重新初始化）。

* * *

如果您更改此行，它是否会改变某些内容：

```
<property name="connection.connection_string">Data Source=FirstSample.sdf;</property> 
```

到

```
<property name="connection.connection_string">Data Source=FirstSample.sdf;FLUSH INTERVAL=1</property> 
```

（根据[http://social.msdn.microsoft.com/Forums/en-US/sqlce/thread/cac9593a-4ee2-4f62-897f-96204af45a27/](http://social.msdn.microsoft.com/Forums/en-US/sqlce/thread/cac9593a-4ee2-4f62-897f-96204af45a27/)）

另请参阅[解决 SQL Server Compact Edition 数据库文件中的损坏](https://stackoverflow.com/q/7343194/1236044)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T18:32:51.933

基于@Jbl 的评论。只是在等待@Jbl 发表他的评论作为答案，这样我就可以接受了。

这是对正在发生的事情的确切解释。

来源：http: [//msdn.microsoft.com/en-us/library/ms233817.aspx](http://msdn.microsoft.com/en-us/library/ms233817.aspx)

来源：http: [//blogs.msdn.com/b/vsdata/archive/2009/07/31/debugging-with-local-database-file.aspx](http://blogs.msdn.com/b/vsdata/archive/2009/07/31/debugging-with-local-database-file.aspx)

有一个属性“Copy to Output Directory”，默认值为“Copy if newer”（如果您使用.mdf 或.mdb 文件，默认值为“Copy always”）。您可以查看此 MSDN 文档以了解此属性的含义。简而言之，本地数据库文件将被复制到输出目录，**并且该数据库将被更新**。

在应用程序开发期间，对数据所做的任何更改（在应用程序中的运行期间）都会对 bin 文件夹中的数据库进行。例如，当您按 F5 调试应用程序时，您将连接到 bin 文件夹中的数据库。只有当您使用服务器资源管理器、数据库资源管理器或其他可视化数据库工具编辑数据库架构或数据时，才会更改根项目文件夹中的数据库文件。

# css - 让 Matrix 在 IE8 过滤器上工作

> ID：14565830
> 
> 赞同：2
> 
> 时间：2013-01-28T15:52:19.823
> 
> 标签：css, internet-explorer-8, transform

我正在做一个项目，我在导航栏上创建了箭头末端。问题是转换在 IE8 或更低版本上不起作用，所以我想为 IE 实现过滤器 css 以使其正常运行，但是，我无法让它正常运行。对象不会像矩阵告诉它的那样旋转 45 度。我不知道代码中是否还有其他东西阻止它旋转或什么。我将不胜感激有关如何解决此问题的任何反馈。

```
.navbar .nav > li > a:before {
    background: #3b679e; 
    background: linear-gradient(left top, #3b679e 0%,#2b88d9 50%,#207cca 51%,#7db9e8 100%); 
        background: -moz-linear-gradient(left top, #3b679e 0%, #2b88d9 50%, #207cca 51%, #7db9e8 100%); 
        background: -webkit-gradient(linear, left top, right bottom, color-stop(0%,#3b679e), color-stop(50%,#2b88d9), color-stop(51%,#207cca), color-stop(100%,#7db9e8)); 
        background: -webkit-linear-gradient(left top, #3b679e 0%,#2b88d9 50%,#207cca 51%,#7db9e8 100%); 
        background: -o-linear-gradient(left top, #3b679e 0%,#2b88d9 50%,#207cca 51%,#7db9e8 100%); 
        background: -ms-linear-gradient(left top, #3b679e 0%,#2b88d9 50%,#207cca 51%,#7db9e8 100%);  
    border-top:1px solid white;
    border-right:1px solid white;
    border-radius:0 8px 0 0;
    content: ' ';
    filter:progid:DXImageTransform.Microsoft.Matrix(M11=0.7071067811865474, M12=-0.7071067811865477, M21=0.7071067811865477, M22=0.7071067811865474, SizingMethod='auto expand');
    height: 27px;
    margin-left:-34px;
    position: absolute;
    top:0;
    -webkit-transform: rotate(45deg);
    -webkit-transform-origin: 0 0;
    -moz-transform: rotate(45deg);
    -moz-transform-origin: 0 0;
    -o-transform: rotate(45deg);
    -o-transform-origin: 0 0;
    -ms-transform: rotate(45deg);
    -ms-transform-origin: 0 0;
    -sand-transform:rotate(45deg);
    transform: rotate(45deg);
    transform-origin: 0 0;
    width: 28px;
} 
```

我曾尝试使用 transformie 和 cssSandpaper 的 polyfill，但它们也无法纠正此问题。旋转应用于 .navbar .nav > li > a:before 规则。

[http://jsfiddle.net/rsxavior/sTP5F/2/](http://jsfiddle.net/rsxavior/sTP5F/2/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T13:32:06.787

我发现了为什么这不起作用，我将发布以供将来参考，以防有人遇到同样的问题。IE8 不会将矩阵应用于伪类，例如:before 和:after。我需要在 a 元素中添加一个空的 span 标签并更改边距以使其按预期工作。

# node.js - 空闲时间和用户时间为负值？

> ID：14565832
> 
> 赞同：0
> 
> 时间：2013-01-28T15:52:22.047
> 
> 标签：node.js, cpu, cpu-usage

我正在通过该`os.cpus()`函数监视我的 NodeJS 应用程序的 CPU 使用率。在打印函数的返回值时，我注意到一些内核的用户时间和空闲时间显示为负值。这甚至可能吗？

编辑：

这是该函数调用的返回对象中的一个 CPU。

```
{ model: 'Intel(R) Xeon(R) CPU           E7540  @ 2.00GHz',
    speed: 1064,
    times: { 
        user: -599586196,
        nice: 46900,
        sys: 726751700,
        idle: -1356274912,
        irq: 1000 
    } 
}, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:33:57.873

此错误是由于`node_os.cc`Node.JS 的 /src 文件夹中的文件中的转换错误。问题和解决方案显示在这里[https://github.com/joyent/node/commit/50e88d0](https://github.com/joyent/node/commit/50e88d0)。事实上，我使用的是旧版本的节点（0.8.12）。升级到最新版本修复了该错误。

# angularjs - 在angularjs中将编译的dom转换为html代码

> ID：14565835
> 
> 赞同：8
> 
> 时间：2013-01-28T15:52:38.027
> 
> 标签：angularjs, angularjs-directive

我写了一个指令，它有一个`postLink`，我编译了一些 html 代码并用 angularjs 渲染它。但问题是我无法从生成的 DOM 中获取 html 代码。

我的代码是：

```
app.directive("showResultAsText", ['$compile', function ($compile) {
    return {
        restrict: 'A',
         compile: function compile(tElement, tAttrs, transclude) {
            console.log('compile');
            var watchModal = tAttrs["showResultAsText"];
            var elem = jQuery(tElement);
            var oriHtml = elem.html();
            elem.empty();
            return {
                post: function postLink(scope, iElement, iAttrs, controller) {
                    scope.$watch(function () {
                        return scope.$eval(watchModal);
                    }, function (newVal) {
                        if (newVal) {
                            var s = $compile(angular.element(oriHtml))(scope);
                            console.log(s);
                            console.log(s[0]);
                            console.log(s[0].outerHTML);
                            console.log($('<div>').append(s[0]).html());
                            iElement.text(s[0].outerHTML);
                        }
                    });
                }
            }
        }
    }
} 
```

你可以看到我用来`console.log`打印的值`s`。在控制台中，它输出：

![在此处输入图像描述](../Images/572ce99a291328684e760eaa713b3f34.png)

您可以看到`console.log(s)`并`console.log(s[0])`拥有很多信息，但是当我使用 时`outerHTML`，内部按钮都不见了。

我也尝试使用 jquery: `jQuery(s[0]).html()`，但同样的事情发生了。

`s`将其转换为 html 代码的正确方法是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-10T07:00:55.470

如果你能提供一个 plunkr / jsFiddle-example 会更容易，但我想我知道出了什么问题。您被控制台愚弄了-当您执行console.log（s）时，它不会立即记录（它是异步的）-控制台获取对dom元素s [0]的引用，并且到了准备打印角度完成了它的渲染。另一方面， s[0].outerHTML 和 s.html() 是同步的，所以你得到了预角渲染的结果。要解决这个问题，你可以做一个简单的 setTimeout：

```
setTimeout(function(){ console.log(s[0].outerHTML); }); 
```

Angular 现在应该有时间在回调之前进行渲染（我认为您不需要延迟，但我可能错了）。您还可以使用 angular $timeout-service 使用 $scope.$apply 包装回调函数 - 请参阅[http://docs.angularjs.org/api/ng.$timeout](http://docs.angularjs.org/api/ng.%24timeout)

# angularjs - Angular JS路由导致无限循环

> ID：14565841
> 
> 赞同：12
> 
> 时间：2013-01-28T15:52:48.400
> 
> 标签：angularjs

我试图弄清楚为什么页面在点击时没有导航到它的模板。URL 更新，我没有 JS 错误。我相信它*会加载*文件，但随后它会无限加载控制器。我`console.log('test!')`在 SessionsController 的实例化中放入了一个之后发现了这一点。

**布局**

```
<div ng-view></div> 
```

**我的观点**

```
<a href="/testing"> My link of seriousness </a> 
```

**我的JS**

```
window.MainController = function($scope, $route, $routeParams, $location) {
  $scope.$route = $route;
  $scope.$location = $location;
  $scope.$routeParams = $routeParams;
  console.log($route);
  console.log($location);
  console.log($routeParams);
};

MainController.$inject = ["$scope", "$route"];

window.app = angular.module('web_client', [], function($routeProvider, $locationProvider) {
  return $routeProvider.when('/testing', {
    templateUrl: '/partials/other_stuff/index.html',
    controller: 'MyController'
  });
});

window.MyController = function($scope, $http) {
  console.log('Infinite Loop!');
}; 
```

而在`partials/sessions/new.html`，我又大又亮：

```
FOOBAR! 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-19T19:09:29.317

我以前也遇到过同样的问题，我认为根本原因是`<ng-view>`在这种情况下也使用了它。该路由已经加载了一个模板 URL，所以我相信使用 ng-view 指令会导致该模板被递归加载，从而导致无限循环。

尝试删除 ng-view，而是将所有视图标记直接放在您在路由的 templateUrl 中指定的 .html 模板中。或者，如果它是共享模板，请尝试使用 ng-include 代替（例如`<div ng-include src="'/path/to/template.html'"></div>` ，不要忘记路径周围的单引号将其标识为字符串，而不是范围变量引用！）。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2014-03-01T20:49:12.323

**相同症状的问题**

我最近在我的一个项目中解决了类似的问题。我将 console.log("Video Page Controller Loaded") 添加到我正在调试的控制器中。同样，它会记录该文本，直到我关闭选项卡。

**我的解决方案：**

我为模板文件引用了错误的名称。

```
when('/videos', {
  templateUrl: 'templates/video-list.tpl.html',
  controller: 'VideoListCtrl'
}) 
```

当我应该有的时候：

```
when('/videos', {
  templateUrl: 'templates/video-list.html',
  controller: 'VideoListCtrl'
}) 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-28T16:23:28.113

我唯一看到的是缺少括号和缺少逗号。你可以试试这个：

```
$routeProvider
  .when("/login", {
    templateUrl: "sessions/new.html",
    controller: SessionsController
  })
  .otherwise({
    redirectTo: "/"
  }); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2015-06-21T17:44:34.920

有同样的“无限重装”问题，亚历克斯约翰逊让我思考。事实上，如果 templateURL 的路径是空的（这是我的情况）或错误的路径，就会发生无限的资源重新加载。对我来说，解决方案很简单：我**用`templateURL: ''`.`template: ''`**

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2016-03-06T20:46:49.047

我遇到了同样的问题，最终意识到我实际上并没有创建我告诉它加载到我的 app.config 中的部分 html 文件——如果它找不到模板文件，Angular 似乎进入了无限循环控制器功能。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-02-18T14:55:06.767

1.  检查部分视图路径是否正确（检查您是否获得部分视图的 HTTP 代码 302。您可以使用 morgan 和 Node+Express 打印每个请求的 HTTP 代码）

    2.  如果路径正确，那么当浏览器缓存静态数据时，您仍然可能会出现无限循环。您可以禁用 chrome 中的缓存。为此：
        *   打开开发者控制台
        *   点击开发者控制台中的设置按钮
        *   检查选项“禁用缓存（当 DevTools 打开时）”
        *   重启服务器并刷新页面，开发者控制台处于打开状态

对我来说，解决路径问题并禁用缓存后问题解决了

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-11-17T05:11:26.120

我的问题是模板 URL 不正确，然后开始触发与 URL 模式匹配的路由。仔细检查您的`templateUrl`路径是否正确。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2015-06-18T12:53:34.893

使用 Rack 应用程序遇到了类似的问题。解决方案是：

```
use Rack::Static, urls: ["/js", "/css", "/templates"] 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-11-30T21:00:09.060

我的问题与指定没有初始“/”的templateUrl有关，不仅在我的路由器上，而且在我的指令上！

# sql - SQL Server：“无法将值 NULL 插入列”但列不为空

> ID：14565842
> 
> 赞同：1
> 
> 时间：2013-01-28T15:52:53.767
> 
> 标签：sql, sql-server, sql-server-2008

我的脚本在 SQL Server 表中执行一些插入时遇到了一个奇怪的问题。直到今天它一直运行良好，但现在每次都失败，但是没有对代码进行任何更改。

它返回错误

> *无法将值 NULL 插入“IRS VAT Prod_ Posting Group”列，表“NAV_2009_Test.dbo.TEST Pxx 2011$Interface Invoice”；列不允许空值。*

如您所见，该`[IRS VAT Prod_ Posting Group]`列应插入`VAT`- 根本没有任何列为空。

我尝试更改列以允许 NULLS 查看会发生什么，但这没有任何区别。

这是我的 SQL 语句：

```
INSERT INTO dbo.[TEST Pxx 2011$Interface Invoice] (
    [Entry Type],
    [Entry ID],
    [Reservation Contract],
    [Date],
    [Residential No_],
    [Gast Nr],
    Gastbezeichnung,
    [Moveware Customer No_],
    [Account No_],
    [Residential Cost Type],
    Description,
    Verrechnungsart,
    [Invoicing interval],
    Quantity,
    [Unit Price],
    Amount,
    [VAT Prod_ Posting Group],
    [Last Invoicing],
    [Next Invoicing],
    [Special Event],
    [Increase %],
    [Cost Unit],
    [Area Code],
    [From Date],
    [To Date],
    Address,
    [Post Code],
    City
)
VALUES
    (
        1,
        '590313',
        '1055',
        '2013-01-28',
        '',
        '1062',
        N'Jan Kling',
        '100127',
        '3030',
        '1',
        N'Sideboard ',
        '1',
        '1',
        '1',
        '17',
        '17',
        'VAT',
        '01-01-1753 00:00:00:000',
        '01-01-1753 00:00:00:000',
        '-',
        '0',
        '321',
        '',
        '2012-09-03',
        '2012-09-10',
        N'Zehnderweg 31',
        '4600',
        N'Olten'
); 
```

正如我所说，没有对代码进行任何更改，所以我想知道服务器上是否出现了问题。

任何人都可以解释一下吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T16:04:28.440

`IRS VAT Prod_ Posting Group`您的插入查询中根本没有提到该列。此列很可能`NOT NULL`没有默认值。

# entity-framework - 实体框架 - 与假外键的关系（数据库中没有外键）

> ID：14565845
> 
> 赞同：8
> 
> 时间：2013-01-28T15:52:55.703
> 
> 标签：entity-framework, ef-code-first, entity-relationship

我有很多表都有 TextID 列，它指的是翻译表。翻译表还需要 LanguageID 以获取所需语言的翻译文本。我的问题是我的数据库中没有 LanguageID，它是在系统中预定义的，我不知道如何使用 Fluent API 定义它，即这可以是我的模型：

```
public partial class MyEntity
{    
    public short ID { get; set; }
    public Nullable<int> TextID { get; set; }
    [NotMapped]
    public Nullable<int> LanguageID { get; set; }
    public virtual TEXT_TRANSLATION Translation { get; set; }
} 
```

和翻译表：

```
public partial class TEXT_TRANSLATION
{
    [Key, Column(Order = 0)]
    public int TextID { get; set; }

    [Key, Column(Order = 1)]
    public int LanguageID { get; set; }

    public string TranslatedText { get; set; } 
} 
```

基本上我需要这样的导航：

```
myEntity.Translation.TranslatedText 
```

在使用 SQL 时，我会这样做：

```
Left Join TEXT_TRANSLATION ON 
  MyEntity.TextID = TEXT_TRANSLATION.TextID 
  AND TEXT_TRANSLATION.LanguageID = 1033 
```

基本上我想使用 TextID 外键并只获得**一个**翻译 - LanguageID 是静态的并且在上下文中预定义。

我无法更改现有的数据库架构。如果我不需要在我的代码中映射 LanguageID 字段，那将是完美的，只需在映射中使用它，就像系统参数一样。EF甚至可以吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T19:00:53.803

如果你`LanguageID`是静态的，你可以尝试使用这个 hack。

定义您的实体，例如：

```
public class Entity {
    public int Id { get; set; }
    public int TextId { get; set; }
    public Translation Translation { get; set; }
}

// No LanguageId in translation
public class Translation {
    public int TextId { get; set; }
    public string TranslatedText { get; set; }
} 
```

并将这个流畅的映射添加到`OnModelCreating`您的派生中`DbContext`：

```
// Define foreign key
modelBuilder.Entity<Entity>()
            .HasRequired(e => e.Translation)
            .WithMany()
            .HasForeignKey(e => e.TextId);

// Trick - EF believes that only TextId is PK. Without this trick you cannot
// make navigation property on your entity
modelBuilder.Entity<Translation>()
            .HasKey(t => t.TextId);

// If you are going to insert translations as well your TextId cannot be 
// handled as autogenerated column
modelBuilder.Entity<Translation>()
            .Property(t => t.TextId)
            .HasDatabaseGeneratedOption(DatabaseGeneratedOption.None);

// The HACK - conditional mapping. This tells EF to "see" only records
// with LanguageId set to 1033\. Without this hack you cannot filter 
// translations for only single language.
modelBuilder.Entity<Translation>()
            .Map(m => {
                        m.Requires("LanguageId").HasValue(1033);
                        m.ToTable("Translations");   
                    }); 
```

该 hack 基于用于 TPH 映射的概念，但在这种情况下，您仅使用单个实体类型来仅加载预定义的记录子集`LanguageId`。即使来自主要实体的 FK 也应该可以工作，因为您不必翻译相同的`TextId`内容 - 这意味着它们也具有相同的`LanguageId`内容，这是不可能的，因为`TextId`并`LanguageId`形成主键。

我不确定此解决方案中是否存在任何隐藏问题。我只是快速尝试了一下，它奏效了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T16:43:44.353

如果你做了这样的事情怎么办：

```
public partial class MyEntity
{    
    public short ID { get; set; }
    public Nullable<int> TextID { get; set; }
    [NotMapped]
    public Nullable<int> LanguageID { get; set; }
    public virtual ICollection<TEXT_TRANSLATION> Transations {get;set;}

    public IQueryable<TEXT_TRANSLATION> Translation
    {
      get
      {
          return this.Translations.Where( t => t.LanguageID == this.LanguageID );
      }
    }
} 
```

虚拟 ICollection 将存储所有翻译的列表，无论语言如何，Translation 属性将为您执行 .Where()

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-28T17:08:59.700

即使 T_T 表很大，我也看不出你怎么能以另一种方式做到这一点（好吧，至少需要“在某个地方加载所有内容”）。

```
public static class Translator {
  private static Dictionary<int, Dictionary<int, string>> translations_;

  static Translator() {
    translations_ = new Dictionary<int, Dictionary<int, string>>();
  } 

  public static void PopulateTranslator(Repository repo) {//or something to go to your db
     translations_ = repo.TEXT_TRANSLATIONs.ToList()
                     .GroupBy(m => m.LanguageId)
                     .ToDictionary(g => g.Key, 
                                   g=> g.ToDictionary(x => x.TextID,
                                                      x=> x.TranslatedText)
                                   );
  }
  public static string GetTranslation(int languageId, int? textId) {
      if (textId == null || !translations.ContainsKey(languageId)
         return something or throw;
      var dic = translations[languageId];
      var id = Convert.ToInt32(textId);
      if (!dic.ContainsKey(id)
          return something or throw;

      return dic[id);

  } 
```

如果用户可以更新翻译，您将`Translator.PopulateTranslator(<something to access your db>)`在您的应用程序启动时调用，可能会进行重置。

然后在您的实体中，而不是

```
public virtual TEXT_TRANSLATION Translation { get; set; } 
```

你将会拥有

```
public string TranslatedText {
    get { return Translator.GetTranslation(LanguageID, TextId);}
} 
```

**编辑** 另一种方法是使用 resx 文件而不是 db 数据，但我想你还有其他限制。

# android - 在 android 中使用 Corona SDK 的脚本

> ID：14565851
> 
> 赞同：2
> 
> 时间：2013-01-28T15:53:05.263
> 
> 标签：android, coronasdk

我是开发 .lua 插件的新手。我想知道是否可以将用 LUA（Corona SDK）编写的脚本集成到我们的应用程序中。如果可能的话，您可以分享用作教程的链接，因为我找不到任何

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-21T16:09:54.653

您可以使用 Corona Enterprise 来做到这一点。

Corona Enterprise 使 Corona 作为您的应用程序的库运行，因此 Corona Enterprise 完全按照您的意愿行事。

否则，不，你不能这样做。

# android - 无法声明按钮，Eclipse 不断抛出错误

> ID：14565852
> 
> 赞同：2
> 
> 时间：2013-01-28T15:53:06.280
> 
> 标签：android, button, layout-inflater

我试图放置一个按钮，但我不知道为什么 Eclipse 一直向我抛出这个错误“局部变量按钮可能尚未初始化”。我在 xml 文件“rssfeedadapter_layout”中添加了一个按钮。但我不能在代码中调用它。我正在尝试这个：

RssReaderListAdapter.java

```
package com.rssfeed.adapter;

import java.io.IOException;
import java.io.InputStream;
import java.net.HttpURLConnection;
import java.net.MalformedURLException;
import java.net.URL;
import java.util.List;

import org.json.JSONException;
import org.json.JSONObject;

import com.rssfeed.R;
import com.rssfeed.helper.RssFeedStructure;

import android.app.Activity;
import android.graphics.Bitmap;
import android.graphics.BitmapFactory;
import android.text.SpannableString;
import android.text.Spanned;
import android.text.style.UnderlineSpan;
import android.util.Log;
import android.view.LayoutInflater;
import android.view.View;
import android.view.ViewGroup;
import android.widget.ArrayAdapter;
import android.widget.ImageButton;
import android.widget.ImageView;
import android.widget.TextView;

public class RssReaderListAdapter extends ArrayAdapter<RssFeedStructure> {

List<RssFeedStructure> imageAndTexts1 =null;
public RssReaderListAdapter(Activity activity, List<RssFeedStructure> imageAndTexts) {
super(activity, 0, imageAndTexts);
imageAndTexts1 = imageAndTexts;

}

@Override
public View getView(int position, View convertView, ViewGroup parent) {

Activity activity = (Activity) getContext();
LayoutInflater inflater = activity.getLayoutInflater();

View rowView = inflater.inflate(R.layout.rssfeedadapter_layout, null);
TextView title = (TextView) rowView.findViewById(R.id.feed_text);
TextView description = (TextView) rowView.findViewById(R.id.feed_updatetime);
ImageButton button = (ImageButton) button.findViewById(R.id.button_web);//Eclipse keeps throwing error in this line
ImageView imageView = (ImageView) rowView.findViewById(R.id.feed_image);
ImageLoader imgLoader;
imgLoader = new ImageLoader(activity);
        Log.d("rssfeed", "imageAndTexts1.get(position).getImgLink() :: " +imageAndTexts1.get(position).getImgLink() +" :: " +imageAndTexts1.get(position).getTitle());
        title.setText(imageAndTexts1.get(position).getTitle());
        description.setText(imageAndTexts1.get(position).getDescription());
        if(imageAndTexts1.get(position).getImgLink() !=null){

            String imageUrl= imageAndTexts1.get(position).getImgLink();
            imgLoader.DisplayImage(imageUrl, imageView);

            }

return rowView;

}

} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T15:55:28.973

采用

```
ImageButton button = (ImageButton) rowView.findViewById(R.id.button_web); 
```

代替

```
ImageButton button = (ImageButton) button.findViewById(R.id.button_web); 
```

您需要使用`rowView`从`rssfeedadapter_layout`布局而不是按钮获取初始化按钮

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T15:55:33.800

改变：

```
button.findViewById(R.id.button_web); 
```

到：

```
rowView.findViewById(R.id.button_web); 
```

# php - Xampp 没有更新我的 php 代码

> ID：14565853
> 
> 赞同：0
> 
> 时间：2013-01-28T15:53:08.787
> 
> 标签：php, web, xampp

我最近又开始用 php 编码了。好吧，我的问题很简单。Xampp 或任何东西都不会更新我的文件，但如果我故意构造另一个错误。

代码：

```
public function getPosts($from, $to){
        $query = "SELECT DISTINCT * FROM entries LIMIT ". $from .",". $to;
        $result = mysql_query($query);

        $posts = array();
        $i = 0;
        while($row = mysql_fetch_array($result)){
            $p = "f";
            $i++;
        }
        mysql_free_result($result);
        return $posts;
    } 
```

> 解析错误：语法错误，意外的 'Post' (T_STRING)，第 13 行 C:\xampp\htdocs\websitews\webapi\Post.php 中的预期变量 (T_VARIABLE)

我正在创建一个 Post 类型的新对象，但没有留下任何东西 - 根本没有！`$p = "f";`只是测试我删除后它是否会更新`$p = new Post();`

你能告诉我我做错了什么吗？^.^ 谢谢！我吓坏了！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:11:28.743

你从未结束你的 SQL 查询

```
 $query = "SELECT DISTINCT * FROM entries LIMIT ". $from .",". $to; 
```

应该

```
 $query = "SELECT DISTINCT * FROM entries LIMIT '". $from ."','". $to"'"; 
```

看看这对你有什么作用

# web-applications - 带有码头嵌入式服务器的 Wicket 应用程序

> ID：14565859
> 
> 赞同：2
> 
> 时间：2013-01-28T15:53:29.790
> 
> 标签：web-applications, jetty, wicket, embedded-jetty, rundeck

如何在我的 wicket 应用程序中启用一个 jetty 嵌入式服务器，它可以让我以像上面这样的守护程序方式控制我的应用程序：

```
java -jar wicket_jetty_webapp.jar start
java -jar wicket_jetty_webapp.jar stop
java -jar wicket_jetty_webapp.jar status 
```

使用 Grails 框架的 Rundeck 应用程序以这种方式工作。谷歌优化使用相同的方法。对我来说，以同样的方式使用 Web 应用程序真是太棒了。

有人知道用 maven 解释这个主题的好资源或文章吗？

此外，可以配置码头以提供实时更新功能，如播放框架提供或使用 JRebel？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-06-03T15:52:59.593

如果使用 maven，您可以提供以下帮助：

聚甲醛：

> ```
>  <!--  JETTY DEPENDENCIES FOR TESTING  -->       <dependency>
>       <groupId>org.eclipse.jetty.aggregate</groupId>
>       <artifactId>jetty-all-server</artifactId>
>       <version>${jetty.version}</version>             <scope>provided</scope>
>   </dependency>   </dependencies>     <build>         <resources>             <resource>
>           <filtering>false</filtering>
>           <directory>src/main/resources</directory>           </resource>             <resource>
>           <filtering>false</filtering>
>           <directory>src/main/java</directory>
>           <includes>
>               <include>**</include>
>           </includes>
>           <excludes>
>               <exclude>**/*.java</exclude>
>           </excludes>             </resource>         </resources>        <testResources>             <testResource>
>           <filtering>false</filtering>
>           <directory>src/test/resources</directory>           </testResource>             <testResource>
>           <filtering>false</filtering>
>           <directory>src/test/java</directory>
>           <includes>
>               <include>**</include>
>           </includes>
>           <excludes>
>               <exclude>**/*.java</exclude>
>           </excludes>             </testResource>         </testResources>        <plugins>           <plugin>
>           <inherited>true</inherited>
>           <groupId>org.apache.maven.plugins</groupId>
>           <artifactId>maven-compiler-plugin</artifactId>
>           <version>2.5.1</version>
>           <configuration>
>               <source>1.6</source>
>               <target>1.6</target>
>               <encoding>UTF-8</encoding>
>               <showWarnings>true</showWarnings>
>               <showDeprecation>true</showDeprecation>
>           </configuration>            </plugin>           <plugin>
>           <groupId>org.mortbay.jetty</groupId>
>           <artifactId>jetty-maven-plugin</artifactId>
>           <version>${jetty.version}</version>
>           <configuration>
>               <connectors>
>                   <connector implementation="org.eclipse.jetty.server.nio.SelectChannelConnector">
>                       <port>8080</port>
>                       <maxIdleTime>3600000</maxIdleTime>
>                   </connector>
>                   <connector implementation="org.eclipse.jetty.server.ssl.SslSocketConnector">
>                       <port>8443</port>
>                       <maxIdleTime>3600000</maxIdleTime>
>                       <keystore>${project.build.directory}/test-classes/keystore</keystore>
>                       <password>wicket</password>
>                       <keyPassword>wicket</keyPassword>
>                   </connector>
>               </connectors>
>           </configuration>            </plugin>           <plugin>
>           <groupId>org.apache.maven.plugins</groupId>
>           <artifactId>maven-eclipse-plugin</artifactId>
>           <version>2.9</version>
>           <configuration>
>               <downloadSources>true</downloadSources>
>           </configuration>            </plugin>       </plugins> 
> ```

主类：

```
public class Main {

    public static void main(String[] args) throws Exception {
        int timeout = (int) Duration.ONE_HOUR.getMilliseconds();

        Server server = new Server();
        SocketConnector connector = new SocketConnector();

        // Set some timeout options to make debugging easier.
        connector.setMaxIdleTime(timeout);
        connector.setSoLingerTime(-1);
        connector.setPort(8080);
        server.addConnector(connector);

        Resource keystore = Resource.newClassPathResource("/keystore");
        if (keystore != null && keystore.exists()) {
            // if a keystore for a SSL certificate is available, start a SSL
            // connector on port 8443.
            // By default, the quickstart comes with a Apache Wicket Quickstart
            // Certificate that expires about half way september 2021\. Do not
            // use this certificate anywhere important as the passwords are
            // available in the source.

            connector.setConfidentialPort(8443);

            SslContextFactory factory = new SslContextFactory();
            factory.setKeyStoreResource(keystore);
            factory.setKeyStorePassword("wicket");
            factory.setTrustStoreResource(keystore);
            factory.setKeyManagerPassword("wicket");
            SslSocketConnector sslConnector = new SslSocketConnector(factory);
            sslConnector.setMaxIdleTime(timeout);
            sslConnector.setPort(8443);
            sslConnector.setAcceptors(4);
            server.addConnector(sslConnector);

            System.out.println("SSL access to the quickstart has been enabled on port 8443");
            System.out.println("You can access the application using SSL on https://localhost:8443");
            System.out.println();
        }

        WebAppContext bb = new WebAppContext();
        bb.setServer(server);
        bb.setContextPath("/");
        bb.setWar("src/main/webapp");

        // START JMX SERVER
        // MBeanServer mBeanServer = ManagementFactory.getPlatformMBeanServer();
        // MBeanContainer mBeanContainer = new MBeanContainer(mBeanServer);
        // server.getContainer().addEventListener(mBeanContainer);
        // mBeanContainer.start();

        server.setHandler(bb);

        try {
            System.out.println(">>> STARTING EMBEDDED JETTY SERVER, PRESS ANY KEY TO STOP");
            server.start();
            System.in.read();
            System.out.println(">>> STOPPING EMBEDDED JETTY SERVER");
            server.stop();
            server.join();
        } catch (Exception e) {
            e.printStackTrace();
            System.exit(1);
        }
    } 
```

我帮忙=)

# bash - 在浮点 bash printf 上填充零

> ID：14565863
> 
> 赞同：5
> 
> 时间：2013-01-28T15:53:37.933
> 
> 标签：bash, printf, precision

我想在 bash 中打印一个浮点数，并用填充零填充范围 %5.3f。我知道 printf 函数。

我的问题如下：

```
printf "0%5.3f\n" 3.00 
```

按预期返回，

```
03.000 
```

但线

```
printf "0%5.3f\n" 23.00 
```

而是给

```
023.000 
```

这当然不是我想要的。

有什么建议吗？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-28T16:02:26.620

你`0` *必须*把:`%`

```
printf "%06.3f\n" 23.00 
```

请注意，我还将最小字段宽度增加到 6，否则不会发生填充（3 个小数位，一个点，小数点前只留下一个数字）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T16:02:55.207

如果有的话，0 必须在百分号的右侧。我没有 linux 系统在工作，但是尝试`printf "%05.3f\n" 23.00`.

# sql - ORACLE SQL case where with '>' operator

> ID：14565873
> 
> 赞同：1
> 
> 时间：2013-01-28T15:53:54.717
> 
> 标签：sql, oracle, oracle10g

我有一个表，其中每个条目的序列号可以是 1 或 2。我想根据当前年份的值选择其中一个选项。是否可以在 where 语句中执行以下操作：

```
(CASE sequence_number 
    WHEN cy.curyr < '41' THEN '1' 
    ELSE '2' 
       END ) sequence_number 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:57:16.607

正确的语法是：

```
(CASE WHEN cy.curyr < '41' THEN '1' 
      ELSE '2' 
 END ) as sequence_number 
```

就您的查询而言，您只需删除初始的`sequence_number`.

另外，您确定要进行字符串比较吗？这样做时，'5' < '41' 的计算结果为 false。

如果您不想要字符串比较：

```
(CASE WHEN cast(cy.curyr as int) < 41 THEN 1
      ELSE 2 
 END ) as sequence_number 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T16:00:53.853

where 子句中的正确方法是

```
and sequence_number = case when cy.curyr < '41' then 1 else 2 end 
```

是`curyr`一个字符串吗？

# opencv - 在 Beaglebone 中使用 openCV 编译 C++ 代码

> ID：14565876
> 
> 赞同：0
> 
> 时间：2013-01-28T15:54:17.680
> 
> 标签：opencv, g++, beagleboard

我用 C++ 编写了以下代码，这些代码使用 openCV 在 Beaglebone 中运行：

```
 #include <unistd.h>
    #include <stdlib.h>
    #include <stdio.h>
    #include <string.h>
    #include <errno.h>
    #include <fcntl.h>
    #include <termios.h>
    #include <sys/types.h>
    #include <sys/stat.h>
    #include <netinet/in.h>
    #include "opencv/cv.h"
    #include "opencv/highgui.h" 

    using namespace cv;
    using namespace std;

    int main(int argc, char *argv[])
    {
         CvCapture *capture = 0;
         Mat img3;
         Mat src;

         capture = cvCaptureFromCAM(0);

         vector<int> p;
         p.push_back(CV_IMWRITE_PNG_COMPRESSION);
         p.push_back(9);

         while (1) {
              img3 = cvQueryFrame(capture);
              cvtColor(img3, img3, CV_BGR2GRAY);
              pyrDown(img3, src, Size( img3.cols/2, img3.rows/2 ) );
              if (!imwrite("/home/root/Desktop/website/fig3bmp.bmp",src,p)) {
                  printf("mat not saved!!!\n"); 
              }
         }

         return 0; 
    } 
```

我尝试使用：“g++ -o CamaraTest CamaraTest.cpp”编译代码，但它不起作用，我得到的所有错误都类似于：“undefined reference to: cv ...”

我已经检查了文件“cv.h”和“highgui.h”是否在目录“/usr/include/opencv”中。

如何编译此代码？任何建议都会有很大帮助。

提前致谢。

格斯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:59:21.467

这些“未定义引用：cv...”消息是由于缺少库而导致的*链接器*错误 - 您需要在 g++ 命令行中链接 OpenCV 库，例如：

```
$ g++ -Wall -g -o CamaraTest CamaraTest.cpp `pkg-config --cflags --libs opencv` 
```

# c# - “null this”是可接受的扩展方法使用吗？

> ID：14565881
> 
> 赞同：9
> 
> 时间：2013-01-28T15:54:36.133
> 
> 标签：c#, .net, null, extension-methods, guid

所以，我真的很喜欢使用扩展方法……也许有点太多了。所以，我要问一下我最近的享受，以确保我不会走得太远。

场景是我们有一个`Guid?`传入的变量。如果变量为 null 或`Guid.Empty`，那么我们想要使用不同的 Guid。所以，我写了一个扩展方法让它读起来像英语：

```
 internal static Guid OrIfEmpty(this Guid? guid, Guid other)
    {
        if (!guid.HasValue || guid.Value == Guid.Empty)
        {
            return other;
        }
        return guid.Value;
    } 
```

这自动意味着“null this”不会引发异常。例如，这将起作用：

```
((Guid?)null).OrIfEmpty(other); 
```

如果不使用扩展方法，这是不可能的，而且在我看来可能会产生误导。但是，它是如此简洁和干净！所以你怎么看？这是一件可以接受的事情吗，还是会让其他程序员感到困惑？

此外，我确信在其他情况下我会做这样的事情并检查`this`null，但这是我现在拥有的最好的例子。

注意：我并不是真的`Guid?`特别询问这项业务。我在询问更多关于实现的整体模式（有一个`this`可以的扩展方法`null`）

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T16:06:52.547

> 如果不使用扩展方法，这是不可能的

当然可以，只是 make 是一个常规的静态方法调用（所有扩展方法都是）：

> 在我看来可能会产生误导

我同意，因为*看起来*您正在对实例调用实例方法`null`。这可能会更糟：

```
string s = null;
string n = s.OrIfEmpty("empty"); 
```

乍一看，这似乎是一个明显的`NullReferenceException`等待发生，但它按设计编译和工作。

由于您的问题实际上只是征求意见，因此没有一个正确答案，但我当然会谨慎并记录扩展方法以表明`this`参数可能是`null`. 或者（正如@quezalcoatl 暗示的那样）重命名它以更明确地支持`null`值：

```
internal static Guid OrIfNullOrEmpty(this Guid? guid, Guid other) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T16:02:03.220

我个人认为会有更多的开发人员更好更快地理解（所以最终意味着代码更干净）：

```
if (!guid.HasValue || guid.Value == Guid.Empty)
{
    return other;
} 
```

而不是：

```
((Guid?)null).OrIfEmpty(other); 
```

因此，这取决于您是为自己编写代码，还是您编写的内容可以得到其他人的支持。就我个人而言，我认为增加的价值不值得“怪异”:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T16:04:54.040

通常，扩展方法应该检查空值。毕竟，扩展方法只不过是添加了一些语法糖的静态方法，以便编译器可以将其视为实例方法。

例如，如果你有这个：

```
public static class MyExtensions
{
    public static IEnumerable<TSource> Frob<TSource>(this TSource source)
    {
        // do stuff here
    }
} 
```

然后，您可以通过两种不同的方式调用它：

```
var foo = new List<int>();
var bar = foo.Frob();  // called like an instance method
var barby = MyExtensions.Frob(foo); // called like a static method 
```

虽然使用普通实例方法，您可以假设它`this`不为空，但您不能使用扩展方法做出该假设。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-28T16:06:02.367

我认为这没有任何问题。只记得

`string.IsNullOrEmptyOrWhitespace`

来自标准库。

一般来说，这取决于**您**将如何处理该空案例。如果您以正常方式使用该函数，并且该函数在该特殊情况下正常运行 - 一切正常。但是，如果您的函数进入调试模式并开始重新配置系统，那么您已经越过了最小惊讶原则，这*并不好*

-- 注意：正如@JeppeStigNielsen 准确指出的那样，INOEOW**不是**当前版本的.Net 中的扩展方法。我确信我曾多次使用它作为扩展方法，但很可能它是在某些 CTP 版本上，或者它可能是旧版本 .Net 的自定义插件，它根本不存在。对困惑感到抱歉！尽管如此，“这都是关于正确命名的”仍然成立！:)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-28T16:08:48.697

我认为这没关系。请注意，带有的示例并`Nullable<Guid>`没有*那么*糟糕，因为所谓`null`的类型`Nullable<Guid>`是 的真实和现有值`Nullable<Guid>`，而不是“无”。

这就是为什么你也可以在这种“null”上使用实例方法，如

```
Guid? g = null;
g.GetValueOrDefault();  // OK; real instance method 
```

将其与引用类型一起使用更加“奇怪”：

```
internal static string OrIfEmpty(this string str, string other)
{
  return string.IsNullOrEmpty(str) ? other : str;
} 
```

因为那样你就可以在“真正的”空值上调用它：

```
string s = null;
s.OrIfEmpty("unspecified");  // OK; s is a true null reference 
```

# android - 谷歌地图不显示

> ID：14565885
> 
> 赞同：2
> 
> 时间：2013-01-28T15:54:43.863
> 
> 标签：android, google-maps, google-maps-android-api-2

我正在尝试使用谷歌地图创建一个应用程序。我使用了谷歌地图 api v2，但地图没有显示出来。我只看到一个带有缩放按钮的灰色屏幕。

有任何想法吗？我很确定错误不在 API 密钥中。

这是我的代码..

安卓清单：

```
<?xml version="1.0" encoding="utf-8"?>
<manifest xmlns:android="http://schemas.android.com/apk/res/android"
    package="com.examplemaps.rs"
    android:versionCode="1"
    android:versionName="1.0" >

    <uses-sdk
        android:minSdkVersion="8"
        android:targetSdkVersion="17" />

    <permission
        android:name="com.examplemaps.rs.MAPS_RECEIVE"
        android:protectionLevel = "signature"/>

    <uses-permission android:name="com.examplemaps.rs.MAPS_RECEIVE" />
    <uses-feature android:glEsVersion="0x00020000"
        android:required="true"/>
    <uses-permission android:name="android.permission.INTERNET"/>
    <uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE"/>
    <uses-permission android:name="com.examplemaps.rs.READ_GSERVICES" />
    <uses-permission android:name="android.permission.ACCESS_COARSE_LOCATION"/>
    <uses-permission android:name="android.permission.ACCESS_FINE_LOCATION"/>

    <application
        android:allowBackup="true"
        android:icon="@drawable/ic_launcher"
        android:label="@string/app_name"
        android:theme="@style/AppTheme" >

        <activity
            android:name="com.examplemaps.rs.Home"
            android:label="@string/app_name" >
            <intent-filter>
                <action android:name="android.intent.action.MAIN" />

                <category android:name="android.intent.category.LAUNCHER" />
            </intent-filter>
        </activity>

        <meta-data
    android:name="com.google.android.maps.v2.API_KEY"
    android:value="AIzaSyB5aBact***myAPI key"/>

    </application>

</manifest> 
```

主页.java：

```
 package com.examplemaps.rs;

import android.os.Bundle;
import android.support.v4.app.FragmentActivity;
import android.view.Menu;

public class Home extends FragmentActivity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_home);
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_home, menu);
        return true;
    }

} 
```

和activity_home.xml

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Home" >

  <fragment xmlns:android="http://schemas.android.com/apk/res/android"
      android:id="@+id/map"
       android:name="com.google.android.gms.maps.SupportMapFragment"
       android:layout_width="wrap_content"
       android:layout_height="match_parent" />

</RelativeLayout> 
```

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T19:16:41.620

我发现了错误。在 Android Manifest 中，我已将 READ_GSERVICES 替换为：

```
 <uses-permission android:name="com.google.android.providers.gsf.permission.READ_GSERVICES"/> 
```

现在，它工作正常！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T15:58:10.863

我从未尝试过，但我很确定 MapView 应该在 MapFragment 内（如果是 Activity，则应该是 MapActivity）。

你试过谷歌地图视图片段吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T17:34:19.850

您说您确定错误不在于 API 密钥，但您是否检查过您的 API 密钥是否与您用于编译项目的帐户相对应？（即您是否使用调试令牌或发布令牌获得了 API 密钥）。

另一件要尝试的事情（当然，如果你还没有的话）是设备上的测试。我以前在模拟器上遇到过灰色瓷砖问题，但在真实设备上没有这样的问题。

否则，[Asaf Nevo](https://stackoverflow.com/users/1092770/asaf-nevo)的答案可能更准确，`MapViews`应该倾向于 a`MapActivity`或类似，并确保您正在构建 Android 的**Google API**版本。请参阅[MapFragment](http://developer.android.com/reference/com/google/android/gms/maps/MapFragment.html)。

取自[谷歌地图](https://developers.google.com/maps/documentation/android/)：

*   **地图现在封装在 MapFragment 类**中，它是 Android 的 Fragment 类的扩展。现在您可以将地图添加为更大活动的一部分。使用 MapFragment 对象，您可以在较小的屏幕（例如手机）上单独显示地图，或者在较大屏幕的设备（例如平板电脑）上作为更复杂 UI 的一部分。
*   因为**地图封装在 MapFragment 类中**，所以可以通过扩展 Android 标准 Activity 类来实现，而不是扩展版本 1 中使用的 MapActivity。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T19:12:05.667

您是否确保设备上实际安装了“地图”应用程序？即[https://play.google.com/store/apps/details?id=com.google.android.apps.maps&hl=en](https://play.google.com/store/apps/details?id=com.google.android.apps.maps&hl=en)

我有一些没有安装地图的旧设备，并且有相同的症状（带有缩放按钮但没有地图内容的灰屏）。

# elasticsearch - 如何查看 ElasticSearch 索引的内容？

> ID：14565888
> 
> 赞同：60
> 
> 时间：2013-01-28T15:54:50.207
> 
> 标签：elasticsearch

我配置了一个自定义分析器并将一些文档放入索引中。现在我想调试我的设置，这样我就可以看到哪些 n-gram 实际进入了索引。

当我之前使用 Solr 时，有可能看到哪些字符串作为键保存在索引中，以及它们的频率。

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2018-05-29T06:58:03.137

您可以使用以下 CURL 查看任何现有索引。请在运行前将 index-name 替换为您的实际名称，它将按原样运行。

**查看索引内容**

```
curl -H 'Content-Type: application/json' -X GET https://localhost:9200/index_name?pretty 
```

并且输出将包括一个索引（参见输出中的设置）及其映射，它看起来像下面的输出 -

```
{
  "index_name": {
    "aliases": {},
    "mappings": {
      "collection_name": {
        "properties": {
          "test_field": {
            "type": "text",
            "fields": {
              "keyword": {
                "type": "keyword",
                "ignore_above": 256
              }
            }
          }
       }
    },
    "settings": {
      "index": {
        "creation_date": "1527377274366",
        "number_of_shards": "5",
        "number_of_replicas": "1",
        "uuid": "6QfKqbbVQ0Gbsqkq7WZJ2g",
        "version": {
          "created": "6020299"
        },
        "provided_name": "index_name"
      }
    }
  }
} 
```

**查看该索引下的所有数据**

```
curl -H 'Content-Type: application/json' -X GET https://localhost:9200/index_name/_search?pretty 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-29T02:08:19.223

如果您还没有将太多数据索引到索引中，您可以在要调试的字段上使用 term facet query 来查看标记及其频率：

```
curl -XDELETE 'http://localhost:9200/test-idx'
echo
curl -XPUT 'http://localhost:9200/test-idx' -d '
{
    "settings": {
        "index.number_of_shards" : 1,
        "index.number_of_replicas": 0
    },
    "mappings": {            
        "doc": {
            "properties": {
                "message": {"type": "string", "analyzer": "snowball"}
            }
        }
    }

}'
echo
curl -XPUT 'http://localhost:9200/test-idx/doc/1' -d '
{
  "message": "How is this going to be indexed?"
}
'
echo
curl -XPOST 'http://localhost:9200/test-idx/_refresh'
echo
curl -XGET 'http://localhost:9200/test-idx/doc/_search?pretty=true&search_type=count' -d '{
    "query": {
        "match": {
            "_id": "1"
        }
    },
    "facets": {
        "tokens": {
            "terms": {
                "field": "message"
            }
        }
    }
}
'
echo 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-09-09T13:33:05.403

我可以推荐[Elasticvue](https://elasticvue.com/)，它是现代的、免费的和开源的。它允许通过浏览器插件非常容易地访问您的 ES 实例（支持 Firefox、Chrome、Edge）。但也有更进一步的方法。

只需确保在 elasticsearch.yml 中设置[cors 值即可](https://github.com/cars10/elasticvue#elasticsearch-configuration)。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-11-03T13:44:42.640

您甚至可以添加术语（索引术语）的大小。看看[Elastic Search：如何查看索引数据](https://stackoverflow.com/questions/8954785/elastic-search-how-to-see-the-indexed-data)

# php - PHP 无法发送会话缓存限制器

> ID：14565896
> 
> 赞同：0
> 
> 时间：2013-01-28T15:55:10.847
> 
> 标签：php, captcha

所以我被要求将验证码添加到某人很久以前创建的 PHP 页面中。我对 PHP 很糟糕，但我做过其他编程，所以我一直在尝试把它拼凑起来。这是到目前为止我得到的代码，当验证码输入正确时，一切正常，但如果输入错误，页面会重新加载并显示错误消息，并在错误下方显示无效条目的正确消息。感谢您的任何建议！

错误是：警告：session_start() [function.session-start]：无法发送会话缓存限制器 - 标头已发送（输出开始于 /var/www/vhosts/tinypaws.org/httpdocs/adoptapp.php:53） /var/www/vhosts/tinypaws.org/httpdocs/adoptapp.php 第 290 行

这就是我所拥有的...

```
 <!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Tinypaws Rescue &amp; Sanctuary</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<script language="JavaScript" type="text/JavaScript">
<!--
alert("We are sorry to say that someone has flooded our email with spam for ugg boots and knock off luggage.  This overloaded the system and it shut down our delivery.  We are going through each of them today 1/21/13 to answer all the legitimate applications."  + '\n' + '\n' + "Thank you and please email again for follow up.");
function MM_preloadImages() { //v3.0
  var d=document; if(d.images){ if(!d.MM_p) d.MM_p=new Array();
    var i,j=d.MM_p.length,a=MM_preloadImages.arguments; for(i=0; i<a.length; i++)
    if (a[i].indexOf("#")!=0){ d.MM_p[j]=new Image; d.MM_p[j++].src=a[i];}}
}

function MM_swapImgRestore() { //v3.0
  var i,x,a=document.MM_sr; for(i=0;a&&i<a.length&&(x=a[i])&&x.oSrc;i++) x.src=x.oSrc;
}

function MM_findObj(n, d) { //v4.01
  var p,i,x;  if(!d) d=document; if((p=n.indexOf("?"))>0&&parent.frames.length) {
    d=parent.frames[n.substring(p+1)].document; n=n.substring(0,p);}
  if(!(x=d[n])&&d.all) x=d.all[n]; for (i=0;!x&&i<d.forms.length;i++) x=d.forms[i][n];
  for(i=0;!x&&d.layers&&i<d.layers.length;i++) x=MM_findObj(n,d.layers[i].document);
  if(!x && d.getElementById) x=d.getElementById(n); return x;
}

function MM_swapImage() { //v3.0
  var i,j=0,x,a=MM_swapImage.arguments; document.MM_sr=new Array; for(i=0;i<(a.length-2);i+=3)
   if ((x=MM_findObj(a[i]))!=null){document.MM_sr[j++]=x; if(!x.oSrc) x.oSrc=x.src; x.src=a[i+2];}
}
//-->
</script>
</head>
<style>
<!--
A:link {color:#FFFFFF; text-decoration: underline}
A:visited {color:#6699CC; text-decoration: line-through}
A:active {color:#000000; text-decoration: line-through}
A:hover {color:#000000; text-decoration: underline}
-->
</style>

<body bgcolor="#336699" link="#FFFFFF" vlink="#6699CC" alink="#000000" onLoad="MM_preloadImages('button7contactrollover2.jpg','button7homerollover2.jpg','button7eventsrollover2.jpg','button7availablerollover2.jpg','button7adoptedrollover2.jpg','button7appsrollover2.jpg','button7forsalerollover2.jpg','button7donaterollover2.jpg','button7sponsorrollover2.jpg','button7flyersrollover2.jpg','button7foarollover2.jpg','button7youthvolrollover2.jpg','button7faqrollover2.jpg','button7linksrollover2.jpg')">
<p align="center"><img src="tpbanner23.jpg" width="669" height="328"></p>
<table width="91%" height="1017" border="3" align="center" bordercolorlight="#333366" bordercolordark="#FFFFFF">
  <tr> 
    <td width="2%" height="1007" valign="top"><p><a href="index.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('homeroll','','button7homerollover2.jpg',1)"><img src="button7home.jpg" name="homeroll" width="141" height="54" border="0"></a></p>
      <p><a href="events.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('eventroll','','button7eventsrollover2.jpg',1)"><img src="button7events.jpg" name="eventroll" width="141" height="54" border="0"></a></p>
      <p><a href="contact.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('contactroll','','button7contactrollover2.jpg',1)"><img src="button7contact.jpg" name="contactroll" width="141" height="54" border="0"></a></p>
      <p><a href="surrender.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('surrenderroll','','button7surrenderrollover2.jpg',1)"><img src="button7surrender.jpg" name="surrenderroll" width="141" height="54" border="0"></a></p>
      <p><a href="available.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('availableroll','','button7availablerollover2.jpg',1)"><img src="button7available.jpg" name="availableroll" width="141" height="54" border="0"></a></p>
      <p><a href="adopted.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('adoptroll','','button7adoptedrollover2.jpg',1)"><img src="button7adopted.jpg" name="adoptroll" width="141" height="54" border="0"></a></p>
      <p><a href="apps.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('approll','','button7appsrollover2.jpg',1)"><img src="button7apps.jpg" name="approll" width="141" height="54" border="0"></a></p>
      <p><a href="forsale.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('saleroll','','button7forsalerollover2.jpg',1)"><img src="button7forsale.jpg" name="saleroll" width="141" height="54" border="0"></a></p>
      <p><a href="donate.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('donateroll','','button7donaterollover2.jpg',1)"><img src="button7donate.jpg" name="donateroll" width="141" height="54" border="0"></a></p>
      <p><a href="sponsor.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('sponsorroll','','button7sponsorrollover2.jpg',1)"><img src="button7sponsor.jpg" name="sponsorroll" width="141" height="54" border="0"></a></p>
      <p><a href="petsitting.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('petsitroll','','button7petsitrollover2.jpg',1)"><img src="button7petsit.jpg" name="petsitroll" width="141" height="54" border="0"></a></p>
      <p><a href="flyers.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('flyerroll','','button7flyersrollover2.jpg',1)"><img src="button7flyers.jpg" name="flyerroll" width="141" height="54" border="0"></a></p>
      <p><font color="#FFFFFF" size="3" face="Geneva, Arial, Helvetica, sans-serif"><strong><a href="fta.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('ftaroll','','button7foarollover2.jpg',1)"><img src="button7foa.jpg" name="ftaroll" width="141" height="54" border="0"></a></strong></font></p>
      <p><a href="jessica.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('jessicaroll','','button7jessicarollover2.jpg',1)"><img src="button7jessica.jpg" name="jessicaroll" width="141" height="54" border="0"></a></font></strong></p>
      <p><font color="#FFFFFF" size="3" face="Geneva, Arial, Helvetica, sans-serif"><strong><font color="#FFFFFF" size="3" face="Geneva, Arial, Helvetica, sans-serif"><strong><a href="youthvolunteer.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('youthroll','','button7youthvolrollover2.jpg',1)"><img src="button7youthvol.jpg" name="youthroll" width="141" height="54" border="0"></a></strong></font></strong></font></p>
      <p><strong><font color="#FFFFFF" size="3" face="Geneva, Arial, Helvetica, sans-serif"><a href="faq.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('faqroll','','button7faqrollover2.jpg',1)"><img src="button7faq.jpg" name="faqroll" width="141" height="54" border="0"></a><strong></strong></font></strong></p>
      <p><strong><a href="links.html" onMouseOut="MM_swapImgRestore()" onMouseOver="MM_swapImage('linkroll','','button7linksrollover2.jpg',1)"><img src="button7links.jpg" name="linkroll" width="141" height="54" border="0"></a></strong></p></td>
    <td width="98%" height="4518" align="center" valign="top"> <p>&nbsp;</p>
      <p align="center"> </p>
      <center>
      </p> 
      <table width="78%" height="139" border="0" align="center">
        <tr> 
          <td height="135"> <div align="center"> 
              <p align="center"><font color="#666699" size="4"><strong><font color="#FFFFFF" size="3" face="Geneva, Arial, Helvetica, sans-serif">Please 
                fill out this application if you are interested in adopting from 
                Tinypaws Rescue &amp; Sanctuary.<strong> When you have been approved 
                for Adoption and have chosen your new family member, please print 
                and sign the <a href="AdoptionContract.jpg">Adoption Contract</a>. 
                You can mail or fax it to the available address. Please contact 
                us if you have any questions.</strong></font></strong></font></p>
              <p align="center"><font color="#666699" size="4" face="Geneva, Arial, Helvetica, sans-serif"><strong><font color="#FFFFFF" size="3">All 
                starred (*) fields are required.</font></strong></font></p>
            </div></td>
        </tr>
      </table>
      <?php
   if ($_SERVER['REQUEST_METHOD'] != 'POST'){
      $me = $_SERVER['PHP_SELF'];
?>
      <form name="form1" method="post"
         action="<?php echo $me;?>">

        <p><strong><font color="#FFFFFF" size="3" face="Geneva, Arial, Helvetica, sans-serif">Name*:</strong></p>
        <p> 
          <input name="Name" type="text" id="Name" size="50" maxlength="50">
        </p>
        <p>&nbsp; </p>
        <p><strong>Date*:</strong></p>
        <p> 
          <input name="Date" type="text" id="Date" size="50" maxlength="50">
        </p>
        <p>&nbsp; </p>
        <p><strong>Full Address*:</strong></p>
        <p> 
          <textarea name="FullAddress" cols="50" rows="6" id="FullAddress"></textarea>
        </p>
        <p>&nbsp; </p>
      <p><strong>Day Phone Number*:</strong></p>
        <p><strong> 
          <input name="Phone" type="text" id="Phone" size="50" maxlength="50">
          </strong></p>
        <p>&nbsp;</p>
        <p><strong>Evening Phone Number:</strong></p>
        <p><strong> 
          <input name="Evephone" type="text" id="Evephone" size="50" maxlength="50">
        </strong></p>
        <p>&nbsp; </p>
        <p><strong>Email*:</strong></p>
        <p><strong> 
          <input name="Email" type="text" id="Email" size="50" maxlength="50">
        </strong></p>
        <p>&nbsp; </p>
        <p><strong>What type of animal are you interested in adopting?*:</strong></p>
        <p> 
          <textarea name="Interest" cols="50" rows="6" id="Interest"></textarea>
        </p>
        <p>&nbsp; </p>
        <p><strong>Do you have a specific animal you would like to adopt? If so, what is the animal's name?:</strong></p>
        <p> 
          <textarea name="Specific" cols="50" rows="6" id="Specific"></textarea>
        </p>
        <p>&nbsp; </p>
        <p><strong>Who is adopting the animal companion?*:</strong></p>
        <p> 
          <textarea name="Whoadopt" cols="50" rows="6" id="Whoadopt"></textarea>
        </p>
        <p>&nbsp; </p>
        <p><strong>Why do you want an animal companion?*:</strong></p>
        <p><strong> 
          <textarea name="Whyadopt" cols="50" rows="6" id="Whyadopt"></textarea>
          </strong></p>
        <p>&nbsp;</p>
        <p><strong>What traits are you looking for in an animal?*:</strong></p>
        <p> 
          <textarea name="Traits" cols="50" rows="6" id="Traits"></textarea>
        </p>
        <p>&nbsp; </p>
        <p><strong>Have you ever shared your home with an animal before?* If yes, please provide us with detals.</strong></p>
        <p> 
          <textarea name="Sharehome" cols="50" rows="6" id="Sharehome"></textarea>
        </p>
        <p>&nbsp; </p>
        <p><strong>Do you still have the animal?*:</strong></p>
        <p>
          <input name="Stillhave" type="text" id="Stillhave" size="50" maxlength="50">
        </p>
        <p>&nbsp; </p>
        <p><strong>If no, what happened to it?*:</strong></p>
        <p> 
          <textarea name="Happened" cols="50" rows="6" id="Happened"></textarea>
        </p>
        <p>&nbsp; </p>
        <p><strong>If you are a current or previus animal owner, please tell us about your animal.</strong></p>
        <p><strong>Was the animal adopted from a rescue group?* If yes, when/which group?*:</strong></p>
        <p>
          <textarea name="Rescuegroup" cols="50" rows="6" id="Rescuegroup"></textarea>
        </p>
        <p>&nbsp; </p>
        <p><strong>What type of litter will you use?*:</strong> </p>
        <p> 
           <input name="Litter" type="text" id="Litter" size="50" maxlength="50">
        </p>
        <p>&nbsp; </p>
        <p><strong>Who is your veterinarian?* Please provie name, address, and phone number.</strong></p>
        <p>
          <textarea name="Vet" cols="50" rows="6" id="Vet"></textarea>
          </strong></p>
        <p>&nbsp;</p>
        <p><strong>Will the new pet live with other animals?* If yes, please provide us with details.</strong></p>
        <p><strong> 
          <input name="Otheranimals" type="text" id="Otheranimals" size="50" maxlength="50">
          </strong></p>
        <p>&nbsp;</p>
        <p><strong>Have you owned multiple animals at the same time before?*:</strong></p>
        <p><strong> 
          <textarea name="Multi" cols="50" rows="6" id="Multi"></textarea>
          </strong></p>
        <p>&nbsp;</p>
        <p><strong>How do you plan to house the animal(s)?*:</strong></p>
        <p><strong> 
          <input name="Housing" type="text" id="Housing" size="50" maxlength="50">
          </strong></p>
        <p>&nbsp;</p>
        <p><strong>Do you currently have any other animals that the animal will interact with?* If yes, what animals?*:</strong></p>
        <p> 
          <textarea name="Interactanimal" cols="50" rows="6" id="Interactanimal"></textarea>
        </p>
        <p>&nbsp; </p>
        <p><strong>How do you plan to supervise interactions?*:</strong></p>
        <p> 
          <textarea name="Supervise" cols="50" rows="6" id="Supervise"></textarea>
          </strong></p>
        <p>&nbsp;</p>
        <p><strong>How many people live in your household?* Please count adults and children seperately.</strong></p>
        <p><strong> 
          <input name="Humancount" type="text" id="Humancount" size="50" maxlength="50">
          </strong></p>
        <p>&nbsp;</p>
        <p><strong>Ages of the children?*:</strong></p>
        <p><strong> 
          <input name="Childage" type="text" id="Childage" size="50" maxlength="50">
          </strong></p>
        <p>&nbsp;</p>
        <p><strong>Do the other adults agree to the adoption?*:</strong></p>
        <p><strong> 
          <input name="Otheradults" type="text" id="Otheradults" size="50" maxlength="50">
          </strong></p>
        <p>&nbsp;</p>
        <p><strong>Do you rent your home?* If yes, does your landlord allow pets?*:</strong></p>
        <p><strong> 
          <input name="Rent" type="text" id="Rent" size="50" maxlength="50">
          </strong></p> 
        <p>&nbsp; </p>
        <p><strong>If there are children in the household, briefly describe how they will interact with the animal*:</strong></p>
        <p> 
          <textarea name="Childinteract" cols="50" rows="6" id="Childinteract"></textarea>
          </strong></p>
        <p>&nbsp; </p>
        <p><strong>How do your children get along with animals?*:</strong></p>
        <p> 
          <textarea name="Getalong" cols="50" rows="6" id="Getalong"></textarea>
          </strong></p>
        <p>&nbsp;</p>
        <p><strong>Will you supervise your children with the animal?*:</strong></p>
        <p><strong> 
          <input name="Childsupervise" type="text" id="Childsupervise" size="50" maxlength="50">
          </strong></p>
        <p>&nbsp; </p>
        <p><strong>How much help do you expect in caring for the animal?*:</strong></p>
        <p> 
          <textarea name="Carehelp" cols="50" rows="6" id="Carehelp"></textarea>
          </strong></p>
        <p>&nbsp;</p>
        <p><strong>Are you willing to do most of the work yourself?*:</strong></p>
        <p><strong> 
          <input name="Carework" type="text" id="Carework" size="50" maxlength="50">
          </strong></p>
        <p>&nbsp; </p>
        <p><strong>What type of living arrangement do you plan to provide?*:</strong></p>
        <p> 
          <textarea name="Livingarrange" cols="50" rows="6" id="Livingarrange"></textarea>
          </strong></p>
       <p><strong>Tiny 
          Paws requires all adopters to sign a contract stating the following:</strong></p>
        <p><br>
          <strong>1\. You will provide the animal with a balanced diet as recommended 
          by Tiny Paws.</strong></p>
        <p><strong>2\. 
          You will provide veterinary care as necessary by a qualified veterinarian.</strong><p>
        <p><strong>5\. 
          You will take the animal into consideration when making housing choices.</strong></p>
        <p><strong>6\. 
          You will agree to be responsible for the animal for the rest of his 
          or her life.</strong></p>
        <p><strong>7\. 
          You will not breed the animal and will return it to the rescue if it 
          is no longer wanted.</strong></p>
        <p><strong>8\. 
          You will not have any animal surgically altered except for neutering.</strong></p>
        <p>&nbsp;</p>
        <p><strong>Are you willing to sign such a contract?*:</strong></p>
        <p><strong> 
          <input name="Contract" type="text" id="Contract" size="50" maxlength="50">
          </strong></p></font>

          <img src="CaptchaSecurityImages.php" alt="" />
          Security Code: <input id="security_code" name="security_code" type="text" />

        <p>&nbsp;</p>
        <p> <input type="submit" name="Submit" value="Submit">
         </p>
        <p> 
          <input type="reset" name="Reset" value="Reset">
        </p></center>

      </form>
      <center>
 <?php
   } 

    else {

   session_start();
if(($_SESSION['security_code'] == $_POST['security_code']) && (!empty($_SESSION['security_code'])) ) {

    $recipient = 'blakefinley94@gmail.com'; //help@tinypaws.org
      $subject = 'Adoption application';
      $from = stripslashes($_POST['Name']);
      $date = stripslashes($_POST['Date']);
      $fulladdress = stripslashes($_POST['FullAddress']);
      $phone = stripslashes($_POST['Phone']);
      $evephone = stripslashes($_POST['Evephone']);
      $email = stripslashes($_POST['Email']);
      $interest = stripslashes($_POST['Interest']);
      $specific = stripslashes($_POST['Specific']);
      $whoadopt = stripslashes($_POST['Whoadopt']);
      $whyadopt = stripslashes($_POST['Whyadopt']);
      $traits = stripslashes($_POST['Traits']);
      $sharehome = stripslashes($_POST['Sharehome']);
      $stillhave = stripslashes($_POST['Stillhave']);
      $happened = stripslashes($_POST['Happened']);
      $rescuegroup = stripslashes($_POST['Rescuegroup']);
      $litter = stripslashes($_POST['Litter']);
      $vet = stripslashes($_POST['Vet']);
      $otheranimals = stripslashes($_POST['Otheranimals']);
      $multi = stripslashes($_POST['Multi']);
      $housing = stripslashes($_POST['Housing']);
      $interactanimal = stripslashes($_POST['Interactanimal']);
      $supervise = stripslashes($_POST['Supervise']);
      $humancount = stripslashes($_POST['Humancount']);
      $childage = stripslashes($_POST['Childage']);
      $otheradults = stripslashes($_POST['Otheradults']);
      $rent = stripslashes($_POST['Rent']);
      $childinteract = stripslashes($_POST['Childinteract']);
      $getalong = stripslashes($_POST['Getalong']);
      $childsupervise = stripslashes($_POST['Childsupervise']);
      $carehelp = stripslashes($_POST['Carehelp']);
      $carework = stripslashes($_POST['Carework']);
      $livingarrange = stripslashes($_POST['Livingarrange']);
      $contract = stripslashes($_POST['Contract']);

      $mime_boundary = "----tiny paws----".md5(time());

        $msg .= "--$mime_boundary\n";
        $msg .= "Content-Type: text/html; charset=UTF-8\n";
        $msg .= "Content-Transfer-Encoding: 8bit\n\n";
        $msg .=     "<html>".
                "<b>From:</b><br>".
                "$from<br><hr><br>".
                "<b>Date:</b><br>".
                "$date<br><hr><br>".
                "<b>Full Address:</b><br>".
                "$fulladdress<br><hr><br>".
                "<b>Phone:</b><br>".
                "$phone<br><hr><br>".
                "<b>Evening Phone:</b><br>".
                "$evephone<br><hr><br>".
                "<b>Email Address:</b><br>".
                "$email<br><hr><br>".
                "<b>What type of animal are you interested in?:</b><br>".
                "$interest<br><hr><br>".
                "<b>Is there a specific animal you would like to adopt? If so, what is the animal's name?:</b><br>".
                "$specific<br><hr><br>".
                "<b>Who is adopting the animal companion?:</b><br>".
                "$whoadopt<br><hr><br>".
                "<b>Why do you want an animal companion?:</b><br>".
                "$whyadopt<br><hr><br>".
                "<b>What traits are you looking for in an animal?:</b><br>".
                "$traits<br><hr><br>".
                "<b>Have you ever shared your home with an animal before?:</b><br>".
                "$sharehome<br><hr><br>".
                "<b>Do you still have the animal?:</b><br>".
                "$stillhave<br><hr><br>".
                "<b>If no, what happened to it?:</b><br>".
                "$happened<br><hr><br>".
                "<b>Was the animal adopted from a rescue group?:</b><br>".
                "$rescuegroup<br><hr><br>".
                "<b>What type of litter will you use?:</b><br>".
                "$litter<br><hr><br>".
                "<b>Who is your veterinarian?:</b><br>".
                "$vet<br><hr><br>".
                "<b>Will the new pet live with other animals?:</b><br>".
                "$otheranimals<br><hr><br>".
                "<b>Have you owned multiple animals at the same time before?:</b><br>".
                "$multi<br><hr><br>".
                "<b>How do you plan to house the animals?:</b><br>".
                "$housing<br><hr><br>".
                "<b>Do you currently have any other animals that the animal will interact with?:</b><br>".
                "$interactanimal<br><hr><br>".
                "<b>How do you plan to supervise interactions?:</b><br>".
                "$supervise<br><hr><br>".
                "<b>How many people live in your household?:</b><br>".
                "$humancount<br><hr><br>".
                "<b>Ages of the children?:</b><br>".
                "$childage<br><hr><br>".
                "<b>Do the other adults agree to the adoption?:</b><br>".
                "$otheradults<br><hr><br>".
                "<b>Do you rent your home?:</b><br>".
                "$rent<br><hr><br>".
                "<b>If there are children in the household, briefly describe how they will interact with the animal:</b><br>".
                "$childinteract<br><hr><br>".
                "<b>How do your children get along with animals?:</b><br>".
                "$getalong<br><hr><br>".
                "<b>Will you supervise your children with the animal?:</b><br>".
                "$childsupervise<br><hr><br>".
                "<b>How much help do you expect in caring for the animal?:</b><br>".
                "$carehelp<br><hr><br>".
                "<b>Are you willing to do most of the work yourself?:</b><br>".
                "$carework<br><hr><br>".
                "<b>What type of living arrangement do you plan to provide?:</b><br>".
                "$livingarrange<br><hr><br>".
                "<b>Are you willing to sign such a contract?:</b><br>".
                "$contract<br><hr><br></html>\n";
                $msg .= "--$mime_boundary--\n\n";

                $headers = "From: Adoption Application Page <blakefinley94@gmail.com>\n"; //help@tinypaws.org
                $headers .= "MIME-Version: 1.0\n";
                $headers .= "Content-Type: multipart/alternative; boundary=\"$mime_boundary\"\n";

                mail($recipient, $subject, $msg, $headers);

        print '<meta http-equiv="refresh" content="0;URL=process.html">'; 

    unset($_SESSION['security_code']);
} else {
error_reporting(0);
echo "Something doesn't look right... Try entering the captcha again.";
}

    }
?> 

      </center></td>
  </tr>
</table>
<p align="center"><font color="#FFFFFF">&copy;2006 Tinypaws 
Rescue &amp; Sanctuary All rights reserved.<BR>Website maintained by <a href='mailto:blakefinley94@gmail.com'>Blake Finley</a>.<BR>
    All content on this site is the property of 
Tinypaws Rescue &amp; Sanctuary. It may not be used in part or in whole without 
expressed written permission</FONT></P></ST1:PLACE></BODY></HTML> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T15:56:43.853

在将任何输出发送到浏览器之前，您必须启动会话。因此，您必须将 移动`session_start();`到文件的顶部。

（那是因为为了启动会话，服务器必须发送带有响应头的会话 cookie - 并且在发送一些正常的输出（http 正文）头之后不能再发送）

# c# - 删除 Lucene.net Indexe 更新/构建上的 HTML 标记

> ID：14565897
> 
> 赞同：0
> 
> 时间：2013-01-28T15:55:23.433
> 
> 标签：c#, asp.net, lucene.net

是否可以让 Lucene.net 从我存储在 lucene.net 字段中的字符串中删除所有 html-tags？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:39:33.020

我不知道 Lucene.net 有任何内置的 HTML ，但是使用[HTMLAgilityPack 之](http://htmlagilitypack.codeplex.com/)类的解析器`Analyzer`编写自己的代码应该足够简单。`Analyzer/Tokenizer`

# java - 通过 JSON 向 Google Places 添加位置详细信息

> ID：14565900
> 
> 赞同：0
> 
> 时间：2013-01-28T15:55:29.230
> 
> 标签：java, android, json, google-places-api

我正在向使用 Google Places API 的 Android 应用程序添加位置，当我搜索这些地方时，我得到了名称、纬度和经度，但我无法检索格式化的地址或格式化的电话号码。我想知道是否无法添加地址、电话号码、网站等位置详细信息，或者我做错了什么。这是我正在使用的 HTTP 帖子：

```
public JSONObject addPlace(double lat, double lng, String type, String name) throws Exception {
    try {
        Log.v(LOG_KEY, "Adding Place...");
         String vic = "5/48 Pirrama Road, Pyrmont";
         String formtd_address = "5/48 Pirrama Road, Pyrmont NSW, Australia";
         String formtd_phone_number = "(02) 9374 4000";
         String myUrl = "http://maps.google.com/maps/place?cid=10281119596374313554";
         String myWebsite = "http://www.google.com.au/";

        HttpPost post = new HttpPost(PLACE_ADD_URL);
        String postBody = 
                    "{"+
                          "\"location\": {" +
                            "\"lat\": " + lat + "," +
                            "\"lng\": " + lng +
                           "}," + 
                           "\"accuracy\":50.0," +
                           "\"name\": \"" + name + "\"," +
                           "\"types\": [\"" + type + "\"]," +
                           "\"vicinity\":\""+ PlaceAdd.vic +"\","+
                           "\"formatted_address\":\""+ PlaceAdd.formtd_address +"\","+
                           "\"formatted_phone_number\":\""+ PlaceAdd.formtd_phone_number +"\","+
                           "\"url\":\""+ PlaceAdd.myUrl +"\","+
                           "\"website\":\""+ PlaceAdd.myWebsite +"\","+  
                           "\"language\": \"en\" " +

                      "}"; 

        StringEntity se = new StringEntity(postBody,HTTP.UTF_8);
        post.setEntity(se);
        ResponseHandler<String> responseHandler=new BasicResponseHandler();
        String responseBody = new DefaultHttpClient().execute(post, responseHandler);
        JSONObject response = new JSONObject(responseBody);
        Log.v(LOG_KEY, "Requested URL= " + PLACE_ADD_URL); 

        return response;

    } catch (HttpResponseException e) {
        Log.v(LOG_KEY, e.getResponse().parseAsString());
        throw e;
    }

    catch (IOException e) {
        // TODO: handle exception
        throw e;
    }
} 
```

所以我想我有两个问题。您可以在将应用内的位置添加到 Google Places API 时添加地点详细信息吗？如果可以，我的代码有问题吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T03:47:38.587

根据[文档](https://developers.google.com/places/documentation/actions#PlaceReports)，Place Reports 仅支持请求`location`中`accuracy`的`name`、、、`types`和`language`参数。如果您认为支持添加地点详细信息的有用功能，`POST`请提交[Places API - 功能请求。](https://code.google.com/p/gmaps-api-issues/issues/entry?template=Places%20API%20-%20Feature%20Request)

# java - KSoap2 HTTPS 连接到 Web 服务

> ID：14565908
> 
> 赞同：2
> 
> 时间：2013-01-28T15:55:39.993
> 
> 标签：java, android, https, axis2, ksoap2

我正在使用 KSOAP2 调用 Web 服务。起初，我尝试在没有任何安全性（只有 HTTP）的情况下使用它，结果是成功的。现在，我已将 SSL 安全性添加到我的 Web 服务（它在 Apache Axis2 上运行），但我无法使用 KSOAP2 从我的 Android 应用程序进行连接。我一直在寻找，我能得到的唯一答案是那些告诉我我应该信任所有不受信任的证书（创建一个假的信任管理器）的人：

[使用 ksoap2-android 的不受信任的证书](https://stackoverflow.com/questions/4646121/not-trusted-certificate-using-ksoap2-android)

[带有 HTTPS 的 KSOAP 2 Android](https://stackoverflow.com/questions/3440062/ksoap-2-android-with-https)

他们总是粘贴相同的代码：

```
private TrustManager[] trustAllCerts = new TrustManager[]{
new X509TrustManager() {
    public java.security.cert.X509Certificate[] getAcceptedIssuers() {
        return null;
    }
    public void checkClientTrusted(
        java.security.cert.X509Certificate[] certs, String authType) {
    }
    public void checkServerTrusted(
        java.security.cert.X509Certificate[] certs, String authType) {
    }
}
}; 
```

这不是我要找的。这个答案，即使有效，也只是一种变通方法，并不能解决问题，只是避免了它。我想知道的是，是否有一种方法可以修改 Android cacerts 并添加我的不受信任的证书，或者只是做一些事情以避免我刚才谈到的解决方案。如果可能的话，我不想创建一个新的信任管理器。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-15T08:18:27.883

如果您正在使用模拟器，请不要使用 10.0.2.2 作为服务器 ip。对我来说，它不起作用。

尝试在物理设备上测试您的应用（通过 Wifi）

# vba - 检查是否存在 CommandBarButton

> ID：14565912
> 
> 赞同：1
> 
> 时间：2013-01-28T15:55:55.027
> 
> 标签：vba, outlook, outlook-2003

我在 VbaProject.OTM 文件的*ThisOutlookSession*中使用以下内容将 2 个自定义按钮添加到新邮件的*标准*工具栏：

```
Dim outl As Object
Dim msg As Object
Set outl = CreateObject("Outlook.Application")
Set msg = outl.CreateItem(0)
msg.Display (False)

Dim objBar As Office.CommandBar
Dim objButton As Office.CommandBarButton

Set objBar = Application.ActiveWindow.CommandBars("Standard")
Set objButton = objBar.Controls.Add(msoControlButton)

With objButton
    .caption = "button1"
    .OnAction = "macro1"
    .TooltipText = "Description"
    .faceId = 487
    .Style = msoButtonIconAndCaption
    .BeginGroup = True
End With

Set objButton = objBar.Controls.Add(msoControlButton)

With objButton
    .caption = "button2"
    .OnAction = "macro2"
    .TooltipText = "Description"
    .faceId = 2525
    .Style = msoButtonIconAndCaption
    .BeginGroup = True
End With

msg.Close 1 
```

问题是每次 Outlook 启动时都会添加按钮（对于我愿意将 OTM 文件部署到的其他计算机来说，这是必需的）。有没有办法在添加按钮之前检查它是否已经存在？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:03:20.780

你的按钮是`toolbar`. 因此检查工具栏的存在。

```
If IsToolbar("Standard") Then 
  '-- do something
  Else 
  '-- create tool bar and add the buttons
End If 
```

或者试试这个：

```
For Each Contrl in Application.CommandBars("Standard").Controls
   If .Caption <> "button1" then
      '-- create it
   End If
Next Contrl 
```

* * *

## 根据 OP 的评论进行编辑：

因此，让我们坚持错误捕获...（未经测试的代码，因此您可能必须在最后尝试一下以获得正确的语法）

```
Dim ctlCBarControl As CommandBarControl
On Error Resume Next    
Set ctlCBarControl = Application.CommandBars("Standard").Controls("button1")

   If Err <> 0 Then
      '-- no button exists, you may add it
      Err = 0
   Else
      '-- the button is there.. 
   End If
End if 
```

* 参考：[CommandBar 控件](http://msdn.microsoft.com/en-us/library/office/aa141695%28v=office.10%29.aspx)

# php - 使用另一个表中的值将动态复选框写入表

> ID：14565914
> 
> 赞同：0
> 
> 时间：2013-01-28T15:55:56.773
> 
> 标签：php, mysql, checkbox

问题的当前摘要：我正在从表“main”中提取信息，其中列出了特定 ID 的目标编号和目标名称（最多可以有 10 行）。这些显示在网页上的表格中。我在第一列中添加了反映表中行数的复选框。代码如下，这部分工作正常。输出为 3 列，复选框、目标编号、目标名称，以及最多 10 行，具体取决于表中该特定 ID 的信息量。

目标.php

```
<tr>
        <td valign=top colspan=3>
            Current Goals<br>
                <?php
                //this data is being pulled from 'main'
                    $result = mysql_query("SELECT * FROM main WHERE idnumber = $idnumber ORDER BY goalnumber");
                    if ($result) {
                    $total_rows = mysql_numrows($result);
                    } else { $total_rows = 0; }
                    print "<table border=1 width=400>\n";
                    print "<tr> \n";
                    print "<th> Checkbox </th> \n";
                    print "<th> Goal Number </th> \n";
                    print "<th> Goal Name </th> \n";
                    print "</tr> \n";
                    //}
                    $i = 0;
                    while ( $i < $total_rows )
                    {
                    $goalno = intval(mysql_result($result, $i, "goalnumber"));
                    $goalname = mysql_result($result, $i, "goalname");
                    $goal_id = intval(mysql_result($result, $i, "goal_id"));
                    print "<tr> \n";
                    print "<td> <center><input type=\"checkbox\" name=\"goal_id_$i\" value=\"$goalnumber - $goalname\"></td> \n";
                    print "<td> $goalnumber </td> \n";
                    print "<td> $goalname </td> \n";
                    print "</tr> \n";
                    $i = $i + 1;
                    }
                ?>
                </table>
        </td> 
```

一旦用户选中这些复选框中的 1-10 个并提交表单，我需要将所述选择的值传递给数据库（每个选择都应写入数据库表“updated_goals”中的一个新字段。在提交​​时下面的文件被调用。请注意，我正在将复选框值写入同一个数据库“updated_goals”中的不同表。我不确定代码哪里出错了，但目标是写入复选框的值，将“$goalnumber - $goalname”放入goal_id 字段。

目标提交.php

```
// process data in table: updated_goals
$query = "SELECT idnumber from updated_goals where idnumber = {$_POST['idnumber']}";
$result = mysql_query($query);
$total_rows = mysql_numrows($result);

            //writing data to 'updated_goals'

        if (isset($_POST ['goal_id_$i'])) { $goal_id = ReplaceQuotes($_POST['goal_id_$i']); } else { $goal_id = ""; }

    $query = "INSERT INTO updated_goals ( ";
    $query .= "goal_id ";
    $query .= ") VALUES ( ";
    $query .= "'$goal_id' ";
    $query .= ")"; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:16:58.360

可能的解决方案：

更改此行：

```
if (isset($_POST ['goal_id'][$i])) { $goal_id = ReplaceQuotes($_POST['goal_id'][$i]); } else { $goal_id = ""; } 
```

至

```
if (isset($_POST ['goal_id_'.$i])) { $goal_id = ReplaceQuotes($_POST['goal_id_'.$i]); } else { $goal_id = ""; } 
```

或更改此行

```
print "<td> <center><input type=\"checkbox\" name=\"goal_id_$i\" value=\"$goalnumber - $goalname\"></td> \n"; 
```

至

```
print "<td> <center><input type=\"checkbox\" name=\"goal_id[$i]\" value=\"$goalnumber - $goalname\"></td> \n"; 
```

如果数组用于输入名称，例如： inputname[] 它可以通过 $_POST['inputname'][index] 或 $_GET['inputname'][index] 通过 POST 或 GET 获取

# jquery - 重复加载大型 JSON 数据时的内存泄漏

> ID：14565917
> 
> 赞同：-1
> 
> 时间：2013-01-28T15:55:58.817
> 
> 标签：jquery, debugging, memory-leaks, httprequest

即使没有处理或存储返回的数据，也会发生这种情况。

这是上下文：

HTML 包含

```
<table border="0" cellpadding="2" cellspacing="0" class="formPanel" style="width:100%">
        <tbody><tr>
            <td>
                <span style="vertical-align:middle;">
    <span>Date:
        <input id="datePicker" name="DatePicker" maxlength="10" value="20130128"/>
    </span>
        <input id="go-btn" style="width:80px;" type="button" value="Go"/>
                </span>
            </td>
        </tr>
    </tbody></table> 
```

JavaScript 是

```
$(function(){
    // Extracted the previously anonymous function to reduce memory used to store "compiled code"
    function processData(data) {
        //process data
    }
    // Extracted the previously anonymous function to reduce memory used to store "compiled code"
    function clickHandler() {
        var keys = ['googlechrome','firefox','opera', 'webkit', 'ie']; 
        for(var i = 0; i < keys.length; i++) {
            /* Previously a method call
             */        
            var date = $("#datePicker").val().replace(/-/g, ''),
                // A local URL, That returns a max of 5MB.
                url  = "/get_usage?date="+date;

            url += '&user_agent=' + keys[i];
            url += "&min_count=250";

            $.getJSON(url, processData);
        } 

    }
    $("#go-btn").click(clickHandler);
}); 
```

一键接收到的数据实际大小约为 10MB，但是当我检查 Chrome 任务管理器中的内存列时，超过 30MB，一段时间后它收集了大约 4MB 的垃圾（不知道这是否无关）。

我怀疑 jQuery 的 getJSON 方法，因为在删除它并将数组大小增加十倍时，整体内存并没有太大差异。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-09T21:34:01.460

> 正如我在问题中提到的，在删除包含 $.getJSON 方法的行时，我没有内存泄漏。我猜这是 Erik 提到的 JSONP 调用的问题。感谢您的回复

# c++ - 连接套接字的限制 boost::asio

> ID：14565920
> 
> 赞同：4
> 
> 时间：2013-01-28T15:56:10.817
> 
> 标签：c++, linux, boost-asio

我有一个问题，我将 boost::asio 用于我的服务器侦听器实现，但是当连接的套接字计数 > 1000-1100 时使用 boost::asio 我有一个错误 - “打开的文件太多”

我该如何解决？

谢谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-28T16:03:15.323

这不是 boost::asio 问题。这是操作系统级别的问题。尝试`ulimit -a`在命令行上执行，您会看到“打开文件”有限制。这是允许进程拥有的文件描述符的数量。它可以更改，但这是您收到错误的原因。

这个堆栈溢出问题“[如何更改 Linux 中打开文件的数量限制？](https://stackoverflow.com/questions/34588/how-do-i-change-the-number-of-open-files-limit-in-linux) ”讨论了如何更改此限制。简短的回答是，这并不是特别简单。这是一个操作系统级别的配置参数。

# c++ - 在 Objective-C 类中使用 C++ 类作为协议

> ID：14565922
> 
> 赞同：1
> 
> 时间：2013-01-28T15:56:19.440
> 
> 标签：c++, objective-c, class, inheritance

我在纯 c++ 中有一个抽象类（带有纯虚函数），我必须在一个目标 c 类中实现它，我该怎么做？

如果我声明，

```
@interface MyClass : NSObject <MyOtherClass> 
```

它抛出一个错误，告诉协议未在 MyOtherClass 中定义

C++类的定义：

```
class MyOtherClass
{
    virtual void myFunc() = 0;
}; 
```

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T15:59:24.230

协议是 Objective-C 的一个特性，而不是 C++。

您的 MyClass 不能使用任何非 Objective-c 类作为其协议。

正如*JeremyP 所说*

> 通过将扩展名更改为 .mm 或将文件类型更改为`sourcecode.cpp.objcpp`.

# actionscript-3 - ActionScript3 URLLoader 不加载页面或响应 Event.Complete

> ID：14565924
> 
> 赞同：0
> 
> 时间：2013-01-28T15:56:24.017
> 
> 标签：actionscript-3, actionscript

我有一个类[http://pastie.org/5910058](http://pastie.org/5910058)（完整代码[https://gist.github.com/4656909](https://gist.github.com/4656909)）但是当我调用该`authorize`方法时，`Event.COMPLETE`它永远不会被调用。

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:09:05.267

将`HTTPStatusEvent.HTTP_RESPONSE_STATUS`处理程序添加到加载程序并查看`status`事件的属性。我的猜测是正在发生的两件事之一：您收到非 200 状态返回（意味着 URL 在某种程度上是错误的）或下载本身从未完成。

或者，您每次都在重用加载程序。因此，如果您`authorize()`多次调用，之前的加载程序将被遗忘，并且永远不会调度 COMPLETE 事件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T14:20:50.777

我猜这是沙盒限制，因为在本地我能够 URLLoad 谷歌，当我尝试从客户端访问私有 api 时我不知道我的想法，那样会暴露密钥。

# java - 在打开关联 URL 的 JFrame 中使用 JEditorPane 的可点击图像

> ID：14565926
> 
> 赞同：0
> 
> 时间：2013-01-28T15:56:32.250
> 
> 标签：java, image, swing, url, jeditorpane

嗨，我正在尝试向用户展示一个简单的 Jframe，用户可以在其中看到前 10 名 MMO 的图像。我已经有一个简单的 html 文件，其中的图像将用户带到正确的游戏 Web URL。

```
 public static void main(String[] args) throws Exception {
    String url = "exmaple web address etc http//..";
    JEditorPane editor = new JEditorPane(url);
    editor.setEditable(false);
    JScrollPane pane = new JScrollPane(editor);
    JFrame frame = new JFrame("Top 10 MMO's");
    frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    frame.getContentPane().add(pane);
    frame.setSize(400, 300);
    frame.setVisible(true);

    public void HyperLinked(HyperlinkEvent e) throws URISyntaxException {
    if (e.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
        if (Desktop.isDesktopSupported()) {
            try {
                Desktop.getDesktop().browse(e.getURL().toURI());
            } catch (IOException | URISyntaxException e1) {
            }
        }
    }
} 
```

示例 html 代码包含图像，每个图像都有自己的可点击网址

```
 </p>
            <p>
                <h4>Dungeons and Dragons</h4>
                <a href="http://www.ddo.com/" target="_blank"><img src="images/ddo.jpg" alt="Dungeons and Dragons Online" width="351" height="144" border="0" /></a>
            </p>
            <p>
                <h4>Lord of the Rings</h4>
                <a href="http://www.lotro.com/en?lang=en_GB&" target="_blank"><img src="images/lotro.jpg" alt="Lord of the Rings" width="351" height="144" border="0" /></a>
            </p>
            <p>
                <h4>Aion</h4>
                <a href="http://www.aionfreetoplay.com/website/" target="_blank"><img src="images/aion.jpg" alt="Aion" width="351" height="144" border="0" /></a>
            </p>
            <p> 
```

下面的图片示例不允许发布为新用户规则等 [http://s14.postimage.org/7xt52lbox/mmoset.jpg](http://s14.postimage.org/7xt52lbox/mmoset.jpg)

我能够显示图像，并且我知道它们是可点击的并且仅在 JFrame 中工作我无法点击它们，想知道我是否需要添加鼠标点击或其他东西？

我会很感激反馈或一些帮助，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:05:34.680

你几乎明白了。

```
 editor.addHyperlinkListener(new HyperlinkListener() {
        @Override
        public void hyperlinkUpdate(HyperlinkEvent e) {
            if (e.getEventType() == HyperlinkEvent.EventType.ACTIVATED) {
                if (Desktop.isDesktopSupported()) {
                    try {
                        Desktop.getDesktop().browse(e.getURL().toURI());
                    } catch (IOException | URISyntaxException e1) {
                    }
                }
            }
        }
    }); 
```

# heroku - Rails 3.2.11 部署 Heroku 错误

> ID：14565929
> 
> 赞同：0
> 
> 时间：2013-01-28T15:56:41.780
> 
> 标签：heroku, ruby-on-rails-3.2, web-deployment, cedar

我将应用程序上传到heroku，在上传过程中，它没有显示任何错误迹象。

然而，当我“打开heroku”它时，页面上唯一呈现的是“我们很抱歉，但出了点问题”。

所以我只是在这里发布heroku日志。

有趣的是，确切的代码集完美地在我的本地机器上运行。

这让我感到困惑，尝试了两天并坚持下去，请帮助。

```
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal/instrumentation.rb:40:in `block in render'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/core_ext/benchmark.rb:5:in `block in ms'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal/instrumentation.rb:83:in `cleanup_view_runtime'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal/renderers.rb:28:in `render_to_body'
2013-01-28T15:43:42+00:00 heroku[router]: at=info method=GET path=/home/index host=warm-beach-3817.herokuapp.com fwd=221.127.133.168 dyno=web.1 queue=0 wait=0ms connect=2ms service=138ms status=500 bytes=643
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_view/renderer/template_renderer.rb:34:in `determine_template'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_view/renderer/abstract_renderer.rb:3:in `find_template'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_view/lookup_context.rb:109:in `find'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/railties/controller_runtime.rb:24:in `cleanup_view_runtime'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal/instrumentation.rb:39:in `render'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal/implicit_render.rb:10:in `default_render'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal/implicit_render.rb:5:in `send_action'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/abstract_controller/base.rb:167:in `process_action'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:414:in `_run__3392054954454753443__process_action__93841041959637154__callbacks'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/abstract_controller/callbacks.rb:18:in `block in process_action'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/notifications.rb:123:in `block in instrument'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/notifications/instrumenter.rb:20:in `instrument'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/notifications.rb:123:in `instrument'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal/instrumentation.rb:29:in `process_action'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:73:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:73:in `dispatch'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal/params_wrapper.rb:207:in `process_action'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:36:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:68:in `block in call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `each'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/session/abstract/id.rb:210:in `context'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/railties/controller_runtime.rb:18:in `process_action'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/abstract_controller/base.rb:121:in `process'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/abstract_controller/rendering.rb:45:in `process'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/journey-1.0.4/lib/journey/router.rb:56:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/routing/route_set.rb:601:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.2.1/lib/warden/manager.rb:35:in `block in call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal.rb:203:in `dispatch'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.2.1/lib/warden/manager.rb:34:in `catch'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/warden-1.2.1/lib/warden/manager.rb:34:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/best_standards_support.rb:17:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/etag.rb:23:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/conditionalget.rb:25:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/head.rb:14:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/params_parser.rb:21:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/flash.rb:242:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal/rack_delegation.rb:14:in `dispatch'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal.rb:246:in `block in action'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/abstract_controller/rendering.rb:110:in `_render_template'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_view/renderer/renderer.rb:17:in `render'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_view/renderer/renderer.rb:36:in `render_template'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/session/abstract/id.rb:205:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/cookies.rb:341:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/query_cache.rb:64:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb:479:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/callbacks.rb:28:in `block in call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `_run__854204767247210329__call__2389741480887842989__callbacks'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal/rendering.rb:10:in `process_action'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:479:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:223:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in `method_missing'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:81:in `block in pre_process'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:79:in `catch'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:79:in `pre_process'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:54:in `process'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/connection.rb:39:in `receive_data'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run_machine'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/callbacks.rb:27:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_call_callbacks'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/backends/base.rb:63:in `start'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/eventmachine-1.0.0/lib/eventmachine.rb:187:in `run'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/server.rb:159:in `start'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/runner.rb:187:in `run_command'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/bin/thin:6:in `<top (required)>'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/controllers/controller.rb:86:in `start'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/runner.rb:152:in `run!'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:385:in `_run_process_action_callbacks'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:81:in `run_callbacks'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/callbacks.rb:405:in `__run_callback'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bin/thin:23:in `<main>'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/bin/thin:23:in `load'
2013-01-28T15:43:42+00:00 app[web.1]: 
2013-01-28T15:43:42+00:00 app[web.1]: 
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/remote_ip.rb:31:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/debug_exceptions.rb:16:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:32:in `call_app'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:16:in `block in call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/tagged_logging.rb:22:in `tagged'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/rack/logger.rb:16:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/request_id.rb:22:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/methodoverride.rb:21:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/runtime.rb:17:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/cache/strategy/local_cache.rb:72:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/lock.rb:15:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_dispatch/middleware/static.rb:62:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:136:in `forward'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:245:in `fetch'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:185:in `lookup'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal/instrumentation.rb:30:in `block in process_action'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:51:in `call'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal/rescue.rb:29:in `process_action'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/abstract_controller/callbacks.rb:17:in `process_action'
2013-01-28T15:43:42+00:00 app[web.1]:   vendor/bundle/ruby/1.9.1/gems/rack-cache-1.2/lib/rack/cache/context.rb:66:in `call!' 
```

**宝石文件：**

```
source 'https://rubygems.org'
ruby "1.9.3"

gem 'rails', '3.2.11'

gem 'jquery-rails'
gem "friendly_id"
gem 'simple_form'
gem 'devise'
gem "twitter-bootstrap-rails"
gem 'kaminari'
gem "therubyracer"
gem "less-rails"

gem 'coffee-rails', '~> 3.2.1'
gem 'uglifier', '>= 1.0.3'

group :assets do
  gem 'sass-rails',   '~> 3.2.3'
end

group :development, :test do
  gem 'sqlite3'
  gem 'hirb'
  gem 'haml-rails'
end
group :production do
  gem 'thin'
  gem 'pg'
end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T20:09:23.600

我在使用之前遇到过问题

```
gem "therubyracer" 
```

并部署到heroku。

我发现解决方案是切换到 from

```
gem "twitter-bootstrap-rails" 
```

至

```
gem 'bootstrap-sass', '2.1' 
```

取消对 therubyracer 宝石的要求。

希望这可以帮助。

# javascript - Node.js - 页面超时 - 发送后无法设置标题

> ID：14565931
> 
> 赞同：1
> 
> 时间：2013-01-28T15:56:44.643
> 
> 标签：javascript, node.js, express, mongoose

我正在使用 mongoose、express、mongodb 运行 node.js 应用程序。我有一个“团队”页面，该页面目前显示数据库中的团队列表，它以前工作得非常好，但是由于我在下面的代码中添加了……我可以导航到 pge 并查看它，并且之后，如果我刷新页面或尝试再次加载团队页面，页面超时并且无法加载，但在终端中它确实显示`GET /team`

这是我添加的代码：

路线/index.js

```
var getAllMeta = function(req, res, next){
  Team.getAllMeta(function(err, teamsList){
    if(!err && teamsList){
      req.teamsList = teamsList;
    }
    next(err);
  });
};

  app.get('/team', getAllMeta, function(req, res){
    util.log('Serving request for url[GET] ' + req.route.path);
    if(req.session.user){
      res.render('team', {'teamsList' : req.teamsList} );
    } else {
      res.redirect('/');
    }
  }); 
```

HTML 代码是 .jade ，其中仅包含以下代码以使用 teamsList 显示团队：

```
div#teamListDiv
  -if(teamsList.length > 0){
    -each team in teamsList
      a.teamLink(id="#{team.key}", href="#") #{team.name}
      br
  -}else{
    h3 No teams till now..
  -} 
```

所以它工作得很好，但是一旦刷新或重新加载，它就会超时并且什么都不做。任何帮助深表感谢。

编辑：让它加载后，这是终端的错误代码

```
Error: Can't set headers after they are sent.
    at ServerResponse.OutgoingMessage.setHeader (http.js:645:11)
    at ServerResponse.res.setHeader (/Users/sweetest_viv/nodeapps/tournamentManager/node_modules/express/node_modules/connect/lib/patch.js:59:22)
    at next (/Users/sweetest_viv/nodeapps/tournamentManager/node_modules/express/node_modules/connect/lib/proto.js:162:13)
    at pass (/Users/sweetest_viv/nodeapps/tournamentManager/node_modules/express/lib/router/index.js:107:24)
    at nextRoute (/Users/sweetest_viv/nodeapps/tournamentManager/node_modules/express/lib/router/index.js:100:7)
    at callbacks (/Users/sweetest_viv/nodeapps/tournamentManager/node_modules/express/lib/router/index.js:164:11)
    at Promise.getAllMeta (/Users/sweetest_viv/nodeapps/tournamentManager/routes/index.js:17:5)
    at Promise.addBack (/Users/sweetest_viv/nodeapps/tournamentManager/node_modules/mongoose/lib/promise.js:128:8)
    at Promise.EventEmitter.emit (events.js:96:17)
    at Promise.emit (/Users/sweetest_viv/nodeapps/tournamentManager/node_modules/mongoose/lib/promise.js:66:38) 
```

index.js 第 17 行的代码是

```
next(err); 
```

这是我在上面发布的 getAllMeta 函数

编辑 2： Team.getAllMeta

```
Team.statics.getAllMeta = function(cb){
  var query = this.find({}, 'key name', cb);
  return query.exec(cb);
}; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T19:18:16.347

问题是你的中间件

```
var getAllMeta = function(req, res, next){
  Team.getAllMeta(function(err, teamsList){
    if(!err && teamsList){
      req.teamsList = teamsList;
    }
    next(err);
  });
}; 
```

`next(err)`**每次都**被调用。即使没有错误。Express 将错误转发给 errorHandler，同时您尝试在`/team`路由处呈现您的页面。因此错误`Can't set headers after they are sent`。

将以下内容放入您的`if () {}`声明中

```
return next(); 
```

这可以防止调用`next(err)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T21:00:52.730

问题出在`Team.getAllMeta`：

```
Team.statics.getAllMeta = function(cb){
  var query = this.find({}, 'key name', cb);
  return query.exec(cb);
}; 
```

注意你是如何`cb`多次通过的。它被多次调用，第二次出现错误。因此，您的线路`next(err);`会触发两次。第一次，它做你想做的事。第二次`err`是非空的，它转到默认的错误处理程序，它尝试构建有关错误的响应，但由于标头已经发送而失败，您不能这样做两次。

# java - 删除所有不可打印字符的正则表达式

> ID：14565934
> 
> 赞同：8
> 
> 时间：2013-01-28T15:56:57.397
> 
> 标签：java, android, regex

我希望从字符串中删除所有不可打印的 ascii 字符，同时保留不可见的字符。我认为这会起作用，因为空格 \n \r 是不可见字符但不是不可打印的？基本上我得到了一个带有�字符的字节数组，我不希望它们在其中。所以我试图将其转换为字符串，在再次将其用作字节数组之前删除�字符。

Space 现在在我的代码中可以正常工作，但是现在 \r 和 \n 不起作用。什么是正确的正则表达式来保留这些？还是有比我正在做的更好的方法？

```
public void write(byte[] bytes, int offset, int count) {

    try {
        String str = new String(bytes, "ASCII");
        str2 = str.replaceAll("[^\\p{Print}\\t\\n]", "");
        GraphicsTerminalActivity.sendOverSerial(str2.getBytes("ASCII"));

    } catch (UnsupportedEncodingException e) {

        e.printStackTrace();
    }

     return;
 }

} 
```

编辑：我试过 [^\x00-\x7F] 这是 ascii 字符的范围....但是符号仍然通过，很奇怪。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-01-28T18:29:16.943

以下正则表达式将仅匹配可打印文本

```
[^\x00\x08\x0B\x0C\x0E-\x1F]* 
```

以下正则表达式将找到不可打印的字符

```
[\x00\x08\x0B\x0C\x0E-\x1F] 
```

贾维代码：

```
boolean foundMatch = false;
try {
    Pattern regex = Pattern.compile("[\\x00\\x08\\x0B\\x0C\\x0E-\\x1F]");
    Matcher regexMatcher = regex.matcher(subjectString);
    foundMatch = regexMatcher.find();
    //Relace the found text with whatever you want
} catch (PatternSyntaxException ex) {
    // Syntax error in the regular expression
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-28T19:09:33.467

在这里，我更喜欢更简单的解决方案。顺便说一句，您忽略了偏移量和计数。下面的解决方案会覆盖原始数组。

```
public void write(byte[] bytes, int offset, int count) {
    int writtenI = offset;
    for (int readI = offset; readI < offset + count; ++readI) {
        byte b = bytes[readI];
        if (32 <= b && b < 127) {
            // ASCII printable:
            bytes[writtenI] = bytes[readI]; // writtenI <= readI
            ++writtenI;
        }
    }
    byte[] bytes2 = new byte[writtenI - offset];
    System.arraycopy(bytes, offset, bytes2, 0, writtenI - offset);
    //String str = new String(bytes, offset, writtenI - offset, "ASCII");
    //bytes2 = str.getBytes("ASCII");
    GraphicsTerminalActivity.sendOverSerial(bytes2);
} 
```

# windows - 我无法在我的 PC 中启动 IIS

> ID：14565942
> 
> 赞同：0
> 
> 时间：2013-01-28T15:57:18.050
> 
> 标签：windows, iis

即使我标记了所有需要的选项，我也无法启动 IIS。我不知道发生了什么？

![在此处输入图像描述](../Images/510152a829a0cd9489390c9a10b198a2.png)

![在此处输入图像描述](../Images/63112a7888861bf49ada0ad79862e46d.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:07:27.630

由于您的操作系统版本，您应该查看[IIS Express 。](http://www.microsoft.com/en-us/download/details.aspx?id=1038)

要启动 IIS，请输入 cmd

```
net start w3svc 
```

# ios - 在 Objective C 中使用双工（双向）委托

> ID：14565946
> 
> 赞同：1
> 
> 时间：2013-01-28T15:57:36.863
> 
> 标签：ios, delegates

我在 Objective C 中有 2 个课程。

A类：ViewController B类：UITableViewController

在 Storyboard 中，我添加了一个 B 类对象，并使用 A 类的回调调用。我使用 Ah 类中的委托解决了这个问题：

```
#import "ClassB"

@interface ClassA : ViewController
< ClassBDelegate >
{ 
id<ClassADelegate> _delegateClassA;
} 
```

在上午班：

```
@implementation ClassA

@synthesize delegateClassB = _delegateClassB;

@end 
```

Bh级

```
@protocol ClassBDelegate

- (void)helloWorld

@end

@interface ClassB : UITableViewController
{
id<ClassBDelegate> _delegate;
@property (nonatomic, readwrite) id<ClassBDelegate> delegate;
} 
```

在 Bm 类中，我可以正确使用委托：

```
[_delegate helloWorld]; 
```

问题是，我也想使用相反的方式，从 A 到 B 类的委托。我不能使用相同的方式以另一种方式解决问题，因为如果我在 B 和 A 之间使用导入，它会进行循环导入并且我无法编译代码。

有什么建议吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:00:39.337

您可以在一个文件中添加所有协议，独立于 viewControllers。示例 Protocols.h/m 并毫无问题地导入此文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T11:31:29.223

不可能将您的 A 类委托给 B 类和 B 类委托给 A 类。这是因为要创建一个委托，您需要导入另一个类，并将委托设置为另一个类。

我使用[单例解决了这个问题](http://en.wikipedia.org/wiki/Singleton_pattern)

使用 Singleton，您可以像往常一样将外部类的普通委托委托给主要类 (A)。将单例实现为静态接口，可以使用主类（A）中的共享指针来调用单例中的函数回调，并使用从单例到 B 的委托。

使用这种方法，您将解决循环标题问题。希望这对您有所帮助。

# ruby-on-rails-3 - 如何在编辑视图中获取 datetime_picker 字段以使用 ActiveRecord 配置的时区而不是数据库的 UTC 值显示值？

> ID：14565951
> 
> 赞同：0
> 
> 时间：2013-01-28T15:58:07.667
> 
> 标签：ruby-on-rails-3, datetime, datetimepicker

我正在使用`config.time_zone = 'Central Time (US & Canada)'`. 当我创建新记录时，它将日期时间转换为 UTC 并将其存储在数据库中。在我的 show.html.erb 中，它显示在 -0600 就好了。但是，在***编辑***现有 Event 对象时，_form.html.erb 以 UTC 显示日期时间，而不转换为 CST。

我已经解决了很多问题并在谷歌上搜索了一遍，但我真的迷路了。我的理解是，唯一正确显示它的字段类型是 datetime_select。

编辑：我遇到问题的代码是：

```
<%= f.datetime_picker :start_date, :dateFormat => 'yy-mm-dd', :showOn => "both", :minDate => DateTime.now, :buttonImageOnly => true, :buttonImage => "/images/calendar_icon.png", :class => "span2" %> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:51:41.200

如果您正在设置时区，则可以`Time.zone.parse(field_name)`在尝试显示它的任何地方使用。

编辑：如果您希望它在编辑屏幕中显示为这样，您始终可以在控制器中的编辑操作中对其进行格式化，以便正确格式化为表单。

# c - 即使它是唯一的输入，如何从 scanf 获取换行符

> ID：14565956
> 
> 赞同：7
> 
> 时间：2013-01-28T15:58:13.693
> 
> 标签：c, scanf

我正在做作业，要求我读取一个`n`表示循环大小的整数，然后读取一行字符`n`次数并在用户输入后立即打印它。所以我使用`scanf`然后我用`printf`. 问题是如果用户的输入只是一个换行符，它应该打印另一个`\n`，但是`scanf`当它是一个时似乎忽略了输入`\n`。

有什么方法可以完成这项任务，`scanf`或者我应该尝试其他方法吗？

```
int i;
scanf("%d", &i);
for(int ct=0; ct<i; ct++)
{
    char buff[28];
    scanf("%s", buff); // if I just press enter here
    prtinf("%s\n", buff); // then I must get \n\n here
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-28T16:10:18.623

使用`fgets`to read in a line 更简单，更健壮：

```
if (!fgets(buff, 28, stdin))
{
    // reading failed, do appropriate error handling
    // we're just exiting here
    exit(EXIT_FAILURE);
}
// We have successfully read in a line, or at least the first 27
// characters of the line. Check whether a full line was read,
// if it was, whether the line was empty
size_t l = strlen(buff);    // <string.h> must be included
if (buff[l-1] == '\n')
{
    // a full line was read, remove trailing newline unless
    // the line was empty
    if (l > 1)
    {
        buff[l-1] = 0;
    }
}
else
{
    // the input was too long, what now?
    // leave the remaining input for the next iteration or
    // empty the input buffer?
}
printf("%s\n",buff); 
```

它不起作用，`scanf("%s",buff)`因为大多数`scanf`转换都会忽略前导空格：

> 输入空白字符（由`isspace`函数指定）将被跳过，除非规范包含`[`、`c`或`n`说明符。

因此，如果用户输入一个空行，则`scanf`忽略该输入，除非其格式是异常之一。

您可以改用`scanf`字符集格式，

```
scanf("%27[^\n]%*c", buff); 
```

读取所有字符直到换行符（但仅限`28 - 1`于此处以避免缓冲区溢出），然后使用换行符而不存储它（转换说明符`*`中的`%*c`禁止赋值），这将处理完全由空格组成的非空行，其中`%s`转换不会。但是，如果输入的第一个字符是换行符，则`%27[^\n]`转换失败（感谢[chux](https://stackoverflow.com/users/2410359/chux)引起注意），换行符留在输入缓冲区中，如果换行符不是，后续使用该格式的扫描也会失败从输入缓冲区中删除。

`scanf`据我所知，使用有点健壮（但丑陋；并且不处理太长的输入）循环需要在扫描之前检查换行符，例如

```
for(int ct = 0; ct < i; ++ct)
{
    int ch = getchar();
    if (ch == EOF)
    {
        // something bad happened; we quit
        exit(EXIT_FAILURE);
    }
    if (ch == '\n')
    {
        // we had an empty line
        printf("\n\n");
    }
    else
    {
        // The first character was not a newline, scanning
        // with the character set format would have succeeded.
        // But we don't know what comes next, so we put the
        // character back first.
        // Although one character of pushback is guaranteed,
        if (ungetc(ch,stdin) == EOF)
        {
            // pushback failed
            exit(EXIT_FAILURE);
        }
        scanf("%27[^\n]%*c",buff);
        printf("%s\n",buff);
    }
} 
```

使用`fgets`，真的。它更好。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T16:16:53.273

我有两个解决方案：

*   使用`fgets`而不是`scanf`.
*   `\n`在字符串末尾附加 a ，因为您知道使用将以 . 结束输入`\n`。

## 第一个解决方案：

```
...
char buf[28];
fgets(buf, 28, stdin);
... 
```

## 第二种解决方案：

```
#include <string.h>

...
char buf[28];
scanf("%s", buf);
strcat(buf, "\n"); // add the newline to the string
... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:00:35.470

一种选择是使用一次读取一行，`gets`然后使用解析每一行`sscanf`。

根据评论编辑：使用`fgets`更合适，因为您可以避免缓冲区溢出。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-11-05T06:42:40.543

是的，如果您使用正确的格式说明符，scanf()**可以**
做到这一点： -- 接受不超过 27 个字符的字符串和
-- 接受该字符串的所有字符（包括空格），换行符 '\n' 除外，和
-- 要查看 scanf() 是否进行了任何转换，请编写：

```
scanRet = scanf("%27[^\n]s", buf);  // fills buf[28] with a string. 
if(scanRet < 1) printf("Sorry, scanf didn't change buf[] array.\n"); 
```

警告！重复的 scanf() 调用或转换通常会被用户的意外输入和/或 stdin 中剩余的“垃圾”破坏。您可以像这样在每个 scanf() 调用之间清除标准输入：

```
char junk; 
do {
  junk = getc(stdin);
  printf("junk: %c (int %d)\n", junk, (int)junk); // show me the junk we cleared
}
while(junk != '\n' || junk != EOF); 
```

这是我仅使用 scanf() 的最佳“干净”解决方案：

```
char buf[28] = "";      // sets buf[0] = '\0';
char junk;
int i, iMax, scanRet;

  printf("how many lines? (integer>0):\n");
  scanRet = scanf(" %d", &iMax);
  if(scanRet < 1) {
    printf("Sorry, I couldn't read your integer. Bye.\n");
    return 1;    // error exit.
  }
  printf("please enter %d lines of text (<=27 chars/line):\n",iMax);
  for(i=0; i<iMax; i++) {
    // but first, clear any leftover junk in stdin;
    do {
      junk = getc(stdin);
      printf("junk: %c (int %d)\n", junk, (int)junk); // VERBOSE.
    }
    while (junk != '\n' && junk != EOF);
    // THEN try to read user's latest text string:
    scanRet = scanf("%27[^\n]",buf); // [^\n]== accept ALL chars except newline
    if(scanRet < 1) {  // format conversion failed. Nothing new in buf.
      printf("(empty line)\n");
    }
    else {
      printf("%s\n", buf); // non-empty user string 
    }
  }
  return 0;  // normal exit.
} 
```

# xml - Linq to XML - 仅在某些情况下创建 Xelement

> ID：14565957
> 
> 赞同：2
> 
> 时间：2013-01-28T15:58:22.570
> 
> 标签：xml, linq, linq-to-xml

我是 linq to xml 的新手，并尝试执行以下操作。我正在从我收到的一些对象中创建一个新的 xml。

我有一个名为“Scale”的 XElement 有一个 Bool 值“DynamicScale”，如果是`False`，我需要创建两个`XElements`作为 的后代`Scale`，如果是`True`，我不需要这些元素。

```
 <Scale DynamicScale="False">
    <LowScale>0</LowScale>
    <HighScale>10000</HighScale>
  </Scale> 
```

有没有办法`If`在这个创建过程中添加一个语句？或任何其他建议来处理这种需求？如果我想能够做到这一点（我知道这是不可能的）。欢迎任何简单的方法。

```
new XElement("Scale",
    new XAttribute("DynamicScale", c.DynamicScale),
    if (c.DynamicScale == false)
    {
        new XElement("LowScale", c.LowScale),
        new XElement("HighScale", c.HighScale),
    }) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-28T16:00:20.930

使用[三元运算符](http://msdn.microsoft.com/en-us/library/ty67wk28%28v=vs.110%29.aspx)

```
new XElement(
    "Scale",
    new XAttribute("DynamicScale", c.DynamicScale), 
    c.DynamicScale ? 
        null: 
        new[]
        { 
            new XElement("HighScale", c.HighScale),
            new XElement("LowScale", c.LowScale)
        }
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-28T16:11:17.513

```
new XElement("Scale",
     new XAttribute("DynamicScale",  c.DynamicScale),
     c.DynamicScale ? null : new XElement("LowScale", c.LowScale),
     c.DynamicScale ? null : new XElement("HighScale", c.HighScale)); 
```

对于非动态比例，这将产生

```
 <Scale DynamicScale="False">
    <LowScale>0</LowScale>
    <HighScale>10000</HighScale>
  </Scale> 
```

对于动态比例

```
 <Scale DynamicScale="True"/> 
```

或更短的版本：

```
new XElement("Scale",
     new XAttribute("DynamicScale",  c.DynamicScale),
     c.DynamicScale ? null : new XElement[] {
                  new XElement("LowScale", c.LowScale),
                  new XElement("HighScale", c.HighScale) }
     ); 
```

# eclipse - 多个 Eclipse 项目中的多个 Git 分支

> ID：14565958
> 
> 赞同：13
> 
> 时间：2013-01-28T15:58:28.373
> 
> 标签：eclipse, git, svn, branch

我们正在从 Subversion 转换到 Git，而我在 Git 中苦苦挣扎的一件事是切换分支的方法。

我的理解是，无论是在命令行还是在 Eclipse 中使用 EGit，切换到不同的分支都会将 Eclipse 工作区文件夹的内容替换为所需分支的内容。这意味着任何时候只能打开一个分支。

在 SVN 中，我可以安排我的 Eclipse 工作区，类似于：

```
Workspace/
   Project1Branch/
   Project2Branch/
   Project3/
   Project4Branch/ 
```

是否可以在同一个 Eclipse/Egit 工作区（或任何其他环境）中同时打开多个 Git 分支？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-30T17:09:00.397

经过@MarkLeightonFisher 的大量测试和健全性检查后，似乎*不可能**同时*在同一个 Eclipse 工作区中打开多个 Git 分支。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-03-05T15:57:19.263

实际上，您不能将同一个 git 存储库中的多个分支导入工作区，因为它只有一个工作目录，其中只能包含一个已检查的分支。这是一个非常合理的解决方法，可以适应 git 的这个特性（我做了，效果很好）：将 git 存储库克隆到第二个目录（或第三个或第四个目录），然后通过编辑手动更改项目名称 .project 和更改 <name> 元素。您现在可以将此项目与原始项目一起导入，并在同一工作区中同时处理多个分支。警告：对“关闭项目”菜单项非常友好，这样您就可以避免交叉编辑（有时当您打开许多具有相同文件名的源窗口时会感到困惑......）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-08-17T11:16:31.697

实际上我设法做到了：

一个 git 存储库可以有多个工作区：这称为“工作树”。（限制是，由于显而易见的原因，您不能在 2 个不同的工作树中检出同一个本地分支。好吧，您不应该这样做，但是某些命令可能会导致您处于这种情况。）

[https://git-scm.com/docs/git-worktree](https://git-scm.com/docs/git-worktree)

然后，您可以为每个工作树创建一个 eclipse-workspace。

# geojson - 国会选区的 topoJSON

> ID：14565963
> 
> 赞同：24
> 
> 时间：2013-01-28T15:58:44.743
> 
> 标签：geojson

有人看过美国国会选区的 topoJSON 文件吗？或者，如果我可以找到坐标或 geoJSON 文件，是否容易转换为弧？

* * *

## 回答 #1

> 赞同：69
> 
> 时间：2013-01-28T16:52:25.120

官方制图边界更有可能以 shapefile 而非 GeoJSON 或 TopoJSON 的形式出现，尽管在这种情况下，您可以在 GitHub 上的[jsongeo/cd113](https://github.com/jsongeo/cd113) 存储库 ( [cd113.topojson](https://github.com/jsongeo/cd113/raw/master/cd113.topojson) ) 中找到两者。

要直接从美国人口普查局获取数据，谷歌搜索将引导您找到第 113 届国会的[TIGER/Line shapefile](http://www.census.gov/geo/maps-data/data/tiger-line.html)。（国会选区从国会到国会略有不同，所以要小心使用合适的版本！）点击“按层排序的 FTP 站点”，你会发现隐秘命名的[CD113](http://www2.census.gov/geo/tiger/TIGERrd13/CD113/)文件夹，在最底部，[tl_rd13_us_cd113 .zip](http://www2.census.gov/geo/tiger/TIGERrd13/CD113/tl_rd13_us_cd113.zip)，一个 38M 压缩的 shapefile，其中包含整个美国的国会选区。这个文件太大了，你可以直接使用，但是你可以按照[Let's Make a Map](http://bost.ocks.org/mike/map/)教程来使用[ogr2ogr](http://www.gdal.org/ogr2ogr.html)和[topojson](https://github.com/mbostock/topojson)将 shapefile 转换为更易于管理的表示形式。

具体来说，首先将 Shapefile 转换为 GeoJSON（101MB！）：

```
ogr2ogr -f GeoJSON districts.json tl_rd13_us_cd113.shp 
```

然后将 GeoJSON 转换为 TopoJSON 并简化（仅 472KB）：

```
topojson -s 7e-9 --id-property=+GEOID -o us-congress-113.json -- districts.json 
```

现在，几何 id ( ) 的前两位数字`d.id / 1000 | 0`是州 FIPS 代码（请参阅[us-state-names.tsv](https://gist.github.com/4090846#file-us-state-names-tsv)），后两位数字是该州内的国会选区编号 ( `d.id % 1000`)。简化 ( `-s`) 是可选的，但如果您在浏览器中显示静态地图，这通常是个好主意；我调整了阈值以保留大约一半的点，但是您可以通过使用更大的阈值来使文件更小。

你有它：

[![美国第 113 个国会选区](../Images/261de79a9dcd5b94c6507c8cebcbb554.png)](http://bl.ocks.org/4657115)

您可能希望将 TopoJSON 文件与 us.json 中的*土地和州**特征*结合起来[，](https://gist.github.com/4090846#file-us-json)因为在大多数地图中，您需要将国会选区裁剪到土地边界，并在州之间绘制一些额外的边界。这可以通过使用 topojson 二进制文件的多个输入参数组合 TopoJSON 文件来完成。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-16T22:23:56.760

另一个很好的资源是美国 github repo：

[https://github.com/unitedstates/districts](https://github.com/unitedstates/districts)

该存储库具有每个国会选区的 kml 和 geojson 文件，按日期位于单独的文件夹中。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-28T16:34:01.293

此人口普查局链接将介绍并引导您访问要查找的数据的 shapefile：

[http://www.census.gov/geo/www/cob/](http://www.census.gov/geo/www/cob/)

shapefile 可以转换为 geojson 和 topojson 文件。这是一个基本教程，它将向您介绍许多注意事项：

[http://bost.ocks.org/mike/map/](http://bost.ocks.org/mike/map/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-09-28T20:41:25.830

我为 d3 v4 制作了这个数据集并调整了投影，也许它适合您的需求：

[http://bl.ocks.org/rveciana/fe6b452c853146e674dd6dd09c1cc6e3](http://bl.ocks.org/rveciana/fe6b452c853146e674dd6dd09c1cc6e3)[![在此处输入图像描述](../Images/441460cb5d9f31b064107b62e3757479.png)](https://i.stack.imgur.com/Ykix2.png)*

# javascript - 在 Sencha Touch 2 的 2 级详细视图导航的第一个详细视图中，Itemtap 未在列表视图上触发

> ID：14565964
> 
> 赞同：0
> 
> 时间：2013-01-28T15:58:51.227
> 
> 标签：javascript, listview, navigation, dom-events, sencha-touch-2

我有一个类别页面，它深入到零售商列表，然后深入到零售商详细信息页面。当我单击一个类别时，我会看到该类别的零售商列表。然后，我可以单击任何零售商并查看其详细信息。我可以看到详细信息，返回并查看其他零售商的详细信息。但是，如果我回到类别列表，然后单击另一个类别，然后获取零售商列表，则无法单击零售商查看零售商详细信息页面。我不确定为什么这不起作用，或者我什至是否使用最佳方式来传递这些数据。

我处理事件的控制器：

```
Ext.define('MyApp.controller.Retailers', {
    extend: 'Ext.app.Controller',

    config: {
        refs: {
            retailersView: 'retailersView',
            categoriesView: 'categoriesView',
            categoryList: '#categoryList',
            retailerList: '#retailerList',
        },

        control: {
            categoryList: {
                itemtap: 'onCategoryItemTap',
                disclose: 'onCategoryDisclose'
            },
            retailerList: {
                itemtap: 'onRetailerItemTap',
                disclose: 'onRetailerDisclose'
            }
        }
    },

    onCategoryItemTap: function (list, index, target, record, e) {
        this.showRetailerList(list, record);
    },

    onCategoryDisclose: function(list, record) {
        this.showRetailerList(list, record);
    },

    showRetailerList: function(item, record) {
        var retailersByCategory = Ext.getStore('retailersStore');
        retailersByCategory.clearFilter();
        retailersByCategory.filter('category_id', record.data.id);
        this.getCategoriesView().push({
            xtype: 'retailersView',
            data: retailersByCategory
        });
    },

    onRetailerItemTap: function (list, index, target, record, e) {
        console.log('itemtap fired!');
        this.showRetailerDetail(list, record);
    },

    onRetailerDisclose: function(list, record) {
        console.log('disclose fired!');
        this.showRetailerDetail(list, record);
    },

    showRetailerDetail: function(item, record) {
        var offersForRetailer = Ext.getStore('offersStore');
        offersForRetailer.clearFilter();
        offersForRetailer.filter('retailer_id', record.data.id);
        record.data.offersStore = offersForRetailer;
        item.up('navigationview').push({
            xtype: 'retailerDetail',
            data: record.data
        });
    }

}); 
```

我的分类页面：

```
Ext.define('MyApp.view.Categories', {
    extend: 'Ext.navigation.View',
    xtype: 'categoriesView',

    requires: [
        'MyApp.store.Categories',
        'Ext.List',
        'Ext.field.Search'
    ],

    config: {
        navigationBar: {
            items: [
                {
                    xtype: 'button',
                    text: 'Help',
                    id: 'categoriesHelp',
                    align: 'right'
                }
            ]
        },
        items: [
            {
                xtype: 'container',
                //title: 'Retailers',
                layout: {
                    type: 'vbox'
                },
                items: [
                    {
                        xtype: 'listView',
                        ui: 'round',
                        id: 'categoryList',
                        store: 'Categories',
                        itemTpl: '{name}'
                    }
                ]
            }
        ]

    },

    initialize: function() {
        this.callParent();

    }

}); 
```

我的零售商页面：

```
Ext.define('MyApp.view.Retailers', {
    extend: 'Ext.Container',
    xtype: 'retailersView',

    requires: [
        'MyApp.store.Retailers',
        'Ext.List',
        'Ext.field.Search'
    ],

    config: {
        layout: {
            type: 'vbox'
        },
        scrollable: {
            direction: 'vertical',
            directionLock: true
        },
        items: [
            {
                xtype: 'listView',
                id: 'retailerList',
                itemTpl: [
                    '<div class="listingImage">',
                        '<img width="80" height="80" src="{imgUrl}" />',
                    '</div>',
                    '<div>',
                        '<span class="listingName">{name}</span>',
                    '</div>',
                    '<div>',
                        '<tpl if="total_offers &gt; 0">',
                        '<span class="listingOffers">{total_offers} offers</span>',
                        '</tpl>',
                        '<span class="listingDistance">{distance} km</span>',
                    '</div>'
                ].join(''),
                flex: 1
            }
        ]
    },

    initialize: function() {
        this.callParent();
        console.log(this.config.data.data.length + ' retailers in this category');
        this.down('#retailerList').setStore(this.config.data);
    }

}); 
```

我的零售商详细信息页面：

```
Ext.define('MyApp.view.detail.Retailer', {
    extend: 'Ext.Container',
    xtype: 'retailerDetail',

    requires: [
        'Ext.dataview.List',
        'Ext.SegmentedButton',
        'Ext.Img'
    ],

    config: {
        scrollable: {
            direction: 'vertical',
            directionLock: true
        },
        layout: 'vbox',
        items: [
            {
                xtype: 'container',
                id: 'retailerBasicDetail',
                flex: 1,
                items: [
                    {
                        xtype: 'container',
                        cls: 'retailer-detail-container',
                        items: [
                            {
                                xtype: 'container',
                                layout: 'hbox',
                                flex: 1,
                                items: [
                                    {
                                        xtype: 'container',
                                        id: 'offer-detail-image-container',
                                        items: [
                                            {
                                                xtype: 'img',
                                                cls: 'offerDetailImg',
                                                id: 'retailerImg'
                                            }
                                        ]
                                    },
                                    {
                                        xtype: 'container',
                                        layout: 'vbox',
                                        items: [
                                            {
                                                xtype: 'container',
                                                id: 'retailer-detail-basic',
                                                flex: 1,
                                                tpl: [
                                                    '<div class="offer-detail-name">',
                                                        '<h3>{name}</h3>',
                                                    '</div>',
                                                    '<div class="offer-detail-distance">',
                                                        '<span>Nearest location: {distance} km</span>',
                                                    '</div>'
                                                ].join('')
                                            },
                                            {
                                                xtype: 'container',
                                                cls: 'offer-detail-actions',
                                                layout: 'hbox',
                                                flex: 1,
                                                items: [
                                                    {
                                                        xtype: 'button',
                                                        cls: 'retailer-detail-contact-button',
                                                        id: 'retailer-detail-contact-button'
                                                    },
                                                    {
                                                        xtype: 'button',
                                                        cls: 'retailer-detail-map-button',
                                                        id: 'retailer-detail-map-button'
                                                    }
                                                ]
                                            }
                                        ]

                                    }
                                ]
                            },
                            {
                                xtype: 'container',
                                flex: 1,
                                id: 'retailer-detail-description',
                                tpl: [
                                    '<div class="retailer-detail-about">',
                                        '<p>{description}</p>',
                                    '</div>'
                                ].join('')
                            }
                        ]
                    }

                ]
            },
            {
                xtype: 'list',
                id: 'retailerOffersList',
                scrollable: 'false',
                flex: 1,
                ui: 'round',
                itemTpl: '<strong>{offer}</strong>',
                onItemDisclosure: true
            }
        ]
    },

    initialize: function() {
        this.callParent();
        this.down('#retailerImg').setSrc(this.config.data.imgUrl);
        this.down('#retailer-detail-description').setData(this.config.data);
        this.down('#retailer-detail-basic').setData(this.config.data);
        this.down('#retailerBasicDetail').setData(this.config.data);

        var offersForRetailer = Ext.getStore('offersStore');
        offersForRetailer.clearFilter();
        offersForRetailer.filter('retailer_id', this.config.data.id);
        this.down('#retailerOffersList').setStore(offersForRetailer);
    }    
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T18:41:51.733

毕竟我能够解决这个问题。我花了很多时间试图弄清楚为什么在返回导航视图中的第一个（初始列表视图）后事件甚至不会在第一个详细列表视图上触发。

事实证明，我`id`在我的列表中使用它并且也在控制器中使用它。这无疑会在内部导致组件销毁问题（但该错误从未在代码中的某处报告和屏蔽）。在切换到`itemId`并更新我的选择器后，它现在可以正常工作了。

希望这可以帮助某人。

# tfs - TFS 任务和错误：如果发现错误，我应该重新打开任务吗？

> ID：14565965
> 
> 赞同：5
> 
> 时间：2013-01-28T15:58:53.497
> 
> 标签：tfs, agile

任务完成后，开发人员将其关闭。QA 团队开始测试相关的用户故事。

我的问题是：一旦 QA 团队发现了一个错误，除了他们打开了一个错误之外，他们是否应该重新打开任务和相关的用户故事？

使用 TFS 2012 和敏捷模板

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-28T20:19:38.077

如下面用户故事工作项的工作流程图所示，如果“代码完成且单元测试通过”，则进入“已解决”状态。如果“验收测试失败”，则进入“活动”状态并重新分配给开发人员。只有在“验收测试通过”时才进入“关闭”状态。

更多信息可以在[这里](http://msdn.microsoft.com/en-us/library/dd380634.aspx)找到。

![用户故事的状态图](../Images/d4d670faf67d5e8dcf7a397c78e77472.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-28T19:01:52.097

*在用户故事完成之前，您不应该关闭它。如果还有测试要做，那么它还没有完成！*

我很好的解决方案是在用户故事下创建额外的任务进行测试。当测试失败时，您应该在用户故事下创建相关的错误，这将允许您查询仍然有错误的用户故事。

# google-apps-script - 如何在没有网格线的谷歌电子表格中创建新工作表

> ID：14565966
> 
> 赞同：0
> 
> 时间：2013-01-28T15:58:53.233
> 
> 标签：google-apps-script, google-sheets

我需要使用 google 电子表格脚本创建一个没有网格线的工作表，并且我正在使用：

```
NewSheet=ss.insertSheet(SheetName); 
```

但是，默认设置为“带有网格线”，所以我尝试了：

```
NewSheet=ss.insertSheet(SheetName, ss.getNumSheets() , {template:OtherSheet} ); 
```

它有效，但新工作表包含所有其他内容，我需要删除所有内容。有什么方法可以创建新工作表并关闭网格线？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-28T16:28:30.013

我认为 Google Apps Script API 目前不支持它。

正如您所建议的，克隆现有工作表并从中删除所有内容应该可以解决问题。

# mysql - 计算sql查询的输出行数？

> ID：14565967
> 
> 赞同：0
> 
> 时间：2013-01-28T15:58:57.677
> 
> 标签：mysql

```
SELECT 
    `list_type`.`type`
FROM
    `events`
        INNER JOIN
    `list_type` ON `events`.`type` = `list_type`.`id`
WHERE
    `events`.`date` BETWEEN '2012-01-01' AND '2012-12-31'
        AND `events`.`center_id` = 2
GROUP BY `events`.`name`

Baseline
Baseline
Baseline
Baseline
Baseline
Baseline
Baseline
Special Events
Special Events
Special Events 
```

但我希望它像这样计算每种类型

```
Baseline    7
Special Events  3 
```

所以我尝试了这个

```
SELECT 
    `list_type`.`type`,
    COUNT(*)
FROM
    `events`
        INNER JOIN
    `list_type` ON `events`.`type` = `list_type`.`id`
WHERE
    `events`.`date` BETWEEN '2012-01-01' AND '2012-12-31'
        AND `events`.`center_id` = 2
GROUP BY `events`.`name` 
```

但它给了我这个：

```
Baseline    45
Baseline    3
Baseline    56
Baseline    23
Baseline    12
Baseline    9
Baseline    2
Special Events  5
Special Events  4
Special Events  18 
```

它正在计算每个名称和类型的数量，而不是输出表单查询。我也试过 COUNT( `list_type`. `type`) 谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:01:12.067

`GROUP`然后由`list_type.type`

```
SELECT  list_type.type,
        COUNT(*) totalCount
FROM    events
        INNER JOIN list_type 
            ON events.type = list_type.id
WHERE   events.date BETWEEN '2012-01-01' AND '2012-12-31'
        AND events.center_id = 2
GROUP   BY list_type.type 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:01:18.603

不要分组`events.name`

尝试按 分组`list_type`。`type`

由于您是按事件分组的，因此它会根据事件为您提供结果和数字！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:09:54.840

您始终可以使用子查询计算查询的结果，如下所示：

```
SELECT type, count(*)
FROM (
  ...your query above...
) s
GROUP BY type 
```

它肯定会奏效，但不一定是最好的方法。我认为您应该按以下方式分组`list_type.type`：

```
GROUP BY list_type.type 
```

然后您必须为每种类型计算不同的事件名称，如下所示：

```
SELECT 
    `list_type`.`type`,
    COUNT(DISTINCT `events`.`name`) 
```

# ios - 如何将我的新视图添加到情节提要？

> ID：14565970
> 
> 赞同：0
> 
> 时间：2013-01-28T15:59:12.460
> 
> 标签：ios, xcode, storyboard

我从模板 Master/Detail 项目开始。然后我添加了另一个`ViewController`带有 xib 的 . 我希望此视图成为应用程序启动时显示的视图。问题是我不知道如何将它添加到情节提要中。

我可以向 Storyboard 添加一个新的空视图，但我无法将它与`ViewController`我刚刚创建的文件链接起来。我是否需要通过向情节提要中添加新视图来重新开始，并在那里布置我的视图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:07:39.610

是的，如果您只是在情节提要中创建新视图，那将是最简单的。如果您在 xib 中设置了复杂的视图，则可以复制并粘贴到情节提要中的新控制器中（首先从控制器中删除空视图）。之后，您将视图复制到新控制器中，您可以将其类更改为您创建的子类。

# javascript - 从 JavaScript 代码执行 Genexus 的事件

> ID：14565972
> 
> 赞同：0
> 
> 时间：2013-01-28T15:59:13.793
> 
> 标签：javascript, events, execute, genexus

我正在尝试从 JavaScript 代码执行 Genexus 事件，但它不起作用。任何想法或建议？我实际上正在使用 Genexus 9 + Java + Web

这是我尝试调用 Genexus 事件的 de JS 代码：

```
 function validar(e)
    {
    tecla = (document.all) ? event.keyCode : e.which; 
        if (tecla==13)
            GX_setevent('PRUEBA');          
            gxSubmit(); 
    } 
```

非常感谢你的帮助！！祝你今天过得愉快！！:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T17:21:31.740

我认为您缺少事件名称。这应该有效：

```
function validar(e)
{
    tecla = (document.all) ? event.keyCode : e.which;
    if (tecla == 13)
    {
        GX_setevent('E\'PRUEBA\'.');
        gxSubmit();
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T15:06:37.853

我正在使用这种语法。

```
Event EventName [KEY]
EndEvent 
```

其中 KEY 是分配给事件的功能键。

例如

```
 Event 'PRUEBA' 13
   //YOUR CODE
 EndEvent 
```

当您按 F13 时，将触发事件 PRUEBA。

仅适用于功能键，不适用于 Enter

# jquery - 比例数计算。5000比例240

> ID：14565980
> 
> 赞同：0
> 
> 时间：2013-01-28T15:59:29.713
> 
> 标签：jquery

我试图找到数字的比例。我使用 Jcanvas 构建了一个圆形范围滑块。总角度为 240 度。我想在这个值之间保留一个数字。

示例：5,000 与 240 的比例。基本上，当我将手柄滑向 240 标记时，它将等于 5,000。

5000 将是 240 标记，数字之间的任何地方都会调整，说 120 标记将等于 2500。

我希望我能清楚地解释这一点。试图扩展我的 Jquery 数学知识。

谢谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:06:36.867

您的每个增量都`slider`应该添加`5000/240`到实际值中。

因此：

```
0 in slider = 0
120 in slider = 120 * 5000 / 240 = 2500
240 in slider = 5000 
```

在伪代码中：

```
value := sliderValue * 5000 / 240 
```

# git - 更改远程服务器 URL

> ID：14565981
> 
> 赞同：2
> 
> 时间：2013-01-28T15:59:32.710
> 
> 标签：git, svn

基本上，当我在公司的网络中时，我必须从以下位置切换远程服务器的 URL：

`https://svn.companyurl.com:444`

至

`svn://192.168.1.143/path/to/repo`

我想这与网络的设置方式有关。

2 个 URL 指向同一个存储库。它们只是在公司网络内部和公司网络外部有所不同。什么是更改这些 URL 并确保我不必重新开始链接 2 个存储库的好方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-28T16:40:01.507

也许您可以声明两个不同的遥控器？当您在公司的网络中时，例如`office`远程推送和拉取，以及在家时`home`远程。

添加遥控器只需运行：

```
git remote add office svn://192.168.1.143/path/to/repo 
```

编辑：

这对 git 来说是正确的，但我刚刚意识到你实际上是 usig `git-svn`。尝试手动将新遥控器添加到`git-svn`配置中。（[http://www.kernel.org/pub/software/scm/git/docs/git-svn.html#_configuration](http://www.kernel.org/pub/software/scm/git/docs/git-svn.html#_configuration)）

# ios - Facebook FQL 最新消息 我朋友的照片

> ID：14565983
> 
> 赞同：1
> 
> 时间：2013-01-28T15:59:37.100
> 
> 标签：ios, facebook, request, facebook-fql, photos

我想获得自上周以来我朋友的最新照片列表要获得此解决方案，我在 FQL 中执行此请求：

```
 SELECT src_big ,owner,created FROM photo WHERE album_object_id IN

(SELECT object_id FROM album WHERE owner IN

(SELECT uid2 FROM friend WHERE uid1=me()) 
AND modified_major > 1359158400) AND created > 1359158400 ORDER BY created DESC 
```

它可以工作，但是当我使用拥有 100 多个朋友的 Facebook 帐户测试我的应用程序 (iOS) 时 => 我没有所有最新照片

有些朋友没有考虑到...

我不知道找到解决方案

自上周以来，您是否知道要获取我朋友的所有最新照片？

谢谢你的帮助，我很失望...

# c# - 如何使用数据集中的值填充集合

> ID：14565986
> 
> 赞同：0
> 
> 时间：2013-01-28T15:59:46.653
> 
> 标签：c#, .net, datatable, dataset

这是一个新手问题，我正在尝试在 C# 中构建一个`UserOrgs`将为用户设置属性的类（每个用户可以有多个）

到目前为止，我有这个：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.SqlClient;
using System.Data;

/// <summary>
/// Summary description for clsRepUser
/// </summary>
public class clsUser
{
    private string userid;
    private List<string> userorgs;

    public string UserID
    {
        get
        {
            return userid;
        }
        set
        {
            userid = value;
        }
    }

    public List<string> UserOrgs
    {
        get
        {
            return userorgs;
        }
        set
        {
            userorgs = value;
        }
    }

    clsConn cCon = new clsConn();
    String connStr = "";
    public clsUser()
    {

    }

    public DataSet GetUserOrg(string UserID)
    {
        DataSet ds = new DataSet();
        SqlConnection conn = new SqlConnection(cCon.getConn());

        SqlCommand cmd = new SqlCommand("sp_getUserOrgs", conn);

        // 2\. set the command object so it knows
        // to execute a stored procedure
        cmd.CommandType = CommandType.StoredProcedure;

        // 3\. add parameter to command, which
        // will be passed to the stored procedure
        cmd.Parameters.Add(
            new SqlParameter("@UserID", UserID));

        try 
        {
            // Open the connection and execute the Command
            conn.Open();
            SqlDataAdapter sqlDA = new SqlDataAdapter();

            sqlDA.SelectCommand = cmd;
            sqlDA.Fill(ds);
        } 
        catch (Exception ex) 
        {
        } 
        finally 
        {
            conn.Close();
        }

        return ds;    
    }
} 
```

我现在如何`UserOrgs`从函数中填充该用户的属性`GetUserOrg`？或者我在这方面做得不够好？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:04:41.913

我会使用 orm，linqtosql 对新手来说很容易。如果您坚持使用数据表和数据读取器

您将需要遍历返回的结果并将返回值填充到您的对象中。

[这是一个很好的入门入门。](http://csharp-station.com/Tutorial/AdoDotNet/Lesson04)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:09:39.320

我认为有3种方式：

1.  您可以使用泛型`Lazy<>`
2.  将属性替换为方法`GetUserOrganizations()`。它更清楚。如果你想获得“新鲜”的组织。
3.  将获取逻辑移至另一层（BI、DAL）。那么用户类型就像数据合约。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-28T16:16:27.587

您正在使用存储过程，因此很难为您提供准确的代码，但想法是遍历 DataSet 的所有行，并使用 .Add() 方法将该行的元素添加到列表中。像这样的东西：

```
foreach (DataRow dr in ds.Tables[0].Rows) {  
  userorgs.Add(dr["orgs_column"].ToString()); 
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-28T16:39:11.053

您可以尝试使用此代码 - 基于`DataSet.Tables[0].Rows`

```
using(var conn = new SqlConnection(cCon.getConn())
{
        using(var cmd = new SqlCommand("sp_getUserOrgs", conn))
        {
           cmd.CommandType = CommandType.StoredProcedure;
           cmd.Parameters.Add(new SqlParameter("@UserID", UserID));

          try 
          {
            conn.Open();
            SqlDataAdapter sqlDA = new SqlDataAdapter();

            sqlDA.SelectCommand = cmd;
            sqlDA.Fill(ds);

            foreach (DataRow dr in ds.Tables[0].Rows) 
            {  
               userorgs.Add(dr["orgs_column"].ToString()); 
            }
          } 
          catch (Exception ex) 
          {
            //treat your exception
          } 
      }       
  } 
```

# c# - 使用 VS2012 GUI 将 ListBox 绑定到 List

> ID：14565990
> 
> 赞同：0
> 
> 时间：2013-01-28T16:00:06.140
> 
> 标签：c#, visual-studio-2012

我觉得这是一个如此基本的问题，但我花了 2 天时间试图让它工作但没有成功。感谢您的时间。

### 问题定义

*   Visual Studio Express 2012 - Visual C# Windows 窗体项目
*   类和成员
    *   我的表格 ( `Form`)
        *   我的列表框 -`ListBox`
    *   我的数据元素
        *   名 -`string`
        *   姓 -`string`
    *   我的数据管理器
        *   我的数据列表 -`List<MyDataElement>`

使用 GUI，我如何绑定`myListBox`到`myDataList`？更具体地说，我如何进行实例化`MyDataManager`以便`myListBox`填充列表的值？

### 已采取的步骤

我可以毫无困难地创建数据源，但我无法让 ListBox 显示基础列表的内容。我努力了：

*   将 ListBox 绑定到独立`MyDataManager`对象
*   创建一个`MyForm`类型的成员`MyDataManager`并将 ListBox 绑定到该成员

我也无法工作。我也尝试更改 DisplayMember 属性无济于事。

顺便说一句，我可以通过`myListBox.DataSource = myDM.myDataList`在 main 方法中手动设置 DataSource （例如， `MyForm`.

### 示例代码

```
public class MyDataElement
{
    public string firstName { get; set; }
    public string lastName { get; set; }

    public override string ToString()
    {
        return firstName + " " + lastName;
    }
}

public class MyDataManager
{
    public List<MyDataElement> myDataList { get; set; }

    // Constructor.
    public MyDataManager()
    {
        myDataList = new List<MyDataElement>();

        // Populate list for testing purposes.
        myDataList.Add(new MyDataElement { firstName = "John", lastName = "Smith" });
        myDataList.Add(new MyDataElement { firstName = "Jane", lastName = "Doe" });
    }
} 
```

在主要方法中`MyForm`：

```
// ...
myDM = new myDataManager();
InitializeComponents();
// ... 
```

我也试过颠倒这个顺序。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T16:05:34.977

您需要使用 Resources 将 View 的 DataContext 与 MyDataManager 绑定（在您的情况下，MyDataManager 被视为 ViewModel），请参阅这些[anwsers](https://stackoverflow.com/questions/4590446/how-do-i-set-a-viewmodel-on-a-window-in-xaml-using-datacontext-property)。VS GUI 将能够找到您的 MyDataManager 类成员。希望能帮助到你

# android - notifyDataSetChanged 弄乱了我的列表视图

> ID：14565991
> 
> 赞同：1
> 
> 时间：2013-01-28T16:00:06.687
> 
> 标签：android, android-listview

我正在尝试使用`notifyDataSetChanged`, 来更新我的列表视图，以便将其中的一行从密码点更改为纯文本并返回密码点。

在我的适配器中（根据此处的评论对其进行了更改），我检查了该行中对象的类型。如果该行是密码，我将其设置为

```
setTransformationMethod(new PasswordTransformationMethod()); 
```

为了将密码文本变成点。稍后在我的活动中，单击该行会将其类型更改为“notPass”，并且我正在尝试刷新我的列表视图以`notifyDataSetChanged`将其表示为可见文本。

```
public class UserAccountAdapter extends ArrayAdapter<UserAccountData> {
    Context context;
    int layoutResourceId;
    UserAccountData data[] = null;
    TreeSet<String> mSeparatorsSet = new TreeSet<String>();

    public UserAccountAdapter(Context context, int layoutResourceId,
            UserAccountData[] data) {
        super(context, layoutResourceId, data);
        this.layoutResourceId = layoutResourceId;
        this.context = context;
        this.data = data;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        View row = convertView;
        UserAccountDataHolder holder = null;

        if (row == null) {
            LayoutInflater inflater = ((Activity) context).getLayoutInflater();
            row = inflater.inflate(layoutResourceId, parent, false);

            holder = new UserAccountDataHolder();
            holder.imgIcon = (ImageView) row.findViewById(R.id.imgUserAccountIcon);
            holder.txtTitle = (TextView) row.findViewById(R.id.txtTitle);

            row.setTag(holder);
        } else {
            holder = (UserAccountDataHolder) row.getTag();
        }

        UserAccountData userAccountData = data[position];
        holder.txtTitle.setText(userAccountData.title); 
        //hold

er.txtTitle.setTransformationMethod(new PasswordTransformationMethod());
            holder.imgIcon.setImageResource(userAccountData.icon);
        if(userAccountData.type.equals("pass")){

            ((TextView) row.findViewById(R.id.txtTitle)).setTransformationMethod(new PasswordTransformationMethod());
        }
        else{
            ((TextView) row.findViewById(R.id.txtTitle)).setTransformationMethod(null);
        }

        return row;
    }

    static class UserAccountDataHolder {
        ImageView imgIcon;
        TextView txtTitle;
    }
    } 
```

我给适配器的对象是：

```
public class UserAccountData {
    public int icon;
    public String type;
    public String title;
    public UserAccountData(){
        super();
    }

    public UserAccountData(int icon, String title, String type) {
        super();
        this.icon = icon;
        this.title = title;
        this.type = type;
    }
    public void setType(String type){
        this.type = type;
    }

} 
```

我处理 clickListener 的活动部分是：

```
 usersArray = new UserAccountData[user_data.size()];
 user_data.toArray(usersArray);

 final UserAccountAdapter adapter = new UserAccountAdapter(this,
                                        R.layout.user_accounts_row, usersArray);

 userAccountsListView = (ListView) findViewById(R.id.userAccounts);
 userAccountsListView.setAdapter(adapter);

 userAccountsListView.setOnItemClickListener(new OnItemClickListener() {
        @Override
            public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {
            if(adapter.getItem(position).type.equals("pass")){
                adapter.getItem(position).setType("notPass");
                adapter.notifyDataSetChanged();

            }
            else if(adapter.getItem(position).type.equals("notPass")){
                adapter.getItem(position).setType("pass");
                adapter.notifyDataSetChanged();

            } 
```

现在，当我单击带点的密码字段时，该字段仍然是点，并且用户/电子邮件/电话类型的一些但不是所有其他字段也变成点

知道我在做什么错吗？

更新：解决了这个问题。1) 需要一个 else if，而不是 if / if。2）根据评论之一更改了适配器

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-28T16:13:05.263

在 getView 方法的适配器类中，您不会重置类型为“未通过”的字段的转换。

```
if(userAccountData.type.equals("notPass")){
        holder.txtTitle.setTransformationMethod(null);
    } 
```

您可以使用“getItemAtPositionMethod”获取相关数据，而不是直接使用该位置作为数组索引

```
listView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> parent, View view,
                int position, long id) {

        UserAccountData uad = (UserAccountData)parent.getItemAtPosition(position);
            //your code

        }); 
```

尝试在每个 getView 调用中直接设置值：

```
@Override
public View getView(int position, View convertView, ViewGroup parent) {
    View row = convertView;
    UserAccountDataHolder holder = null;

    if (row == null) {
        LayoutInflater inflater = ((Activity) context).getLayoutInflater();
        row = inflater.inflate(layoutResourceId, parent, false);
    }

    UserAccountData userAccountData = data[position];
    TextView tvTitle = (TextView) row.findViewById(R.id.txtTitle);

    if(userAccountData.type.equals("pass")){
        tvTitle.setTransformationMethod(new PasswordTransformationMethod());
    }

    if(userAccountData.type.equals("notPass")){
        tvTitle .setTransformationMethod(null);
    }
 } 
```

}

# objective-c - Xcode - 使用来自不同 ViewControllers 的 var

> ID：14565992
> 
> 赞同：0
> 
> 时间：2013-01-28T16:00:07.043
> 
> 标签：objective-c

我有 2 个视图控制器。一个用于我的配置，一个用于我正在构建的测试应用程序。所以我想要的是在我的 konfigViewController 中设置一个文本字段，并在我的 mainViewController 中使用这个值输入到这个文本字段中。

那么如何在这些不同的 ViewController 之间建立连接呢？我已经尝试将 kconfigViewController.h 包含在 mainViewController.m 中。

在 konfigViewController.h 中声明了文本字段。Viewcontroller 也链接到 .h &.m 文件。

# android - Appmobi 应用程序在 Wifi 上工作，但在 3g 上显示黑屏

> ID：14565994
> 
> 赞同：3
> 
> 时间：2013-01-28T16:00:10.503
> 
> 标签：android, networking, wifi, 3g, appmobi

我有一个使用 appMobi 制作的精彩应用程序，但不幸的是，它放弃了奇怪的问题，它在 WiFi 上工作得非常好，但在 3g 网络上却不行。任何人都可以提出可能是什么问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-28T19:20:24.463

我对 appMobi 不太了解，但我相信这是您连接套接字的方式，也许可以看看或者询问 appMobi，如果他们为您设置了它，他们可能会提供帮助，否则请查看此链接，也许它会是更多服务[我的应用程序通过 WiFi 运行。但在android中不超过3G？有什么猜测吗？](https://stackoverflow.com/questions/3312065/my-app-works-over-wifi-but-not-over-3g-in-android-any-guesses?rq=1)祝你好运！！