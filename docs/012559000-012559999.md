# StackOverflow 问答 12559000-12559999

# c++ - 智能相机和图像处理

> ID：12559001
> 
> 赞同：0
> 
> 时间：2012-09-24T04:52:34.507
> 
> 标签：c++, image, graphics, camera

我对图形编程和图像处理非常感兴趣。我对我见过的一些程序很感兴趣，例如 QR 扫描仪，它可以从相机中获取图像并用它做一些事情，但我不一定知道从哪里开始学习这样的东西。在参加了语言课程并了解 C++ 的基础知识后，我知道了相当多的 Java，但我仍在学习，我不反对必须学习一门新语言并从头开始进入这类事情。是否有任何现有的文本或教程可以很好地为个人指明正确的方向以开始使用计算机图像处理？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-08T11:25:02.063

图像处理领域是巨大的，并且随着时间的推移变得越来越大。由于您是图像处理的初学者，我建议您使用可以帮助您的第三方工具包。我们使用一个名为 Leadtools 的工具包，它可能会对您有所帮助，因为它们有教程和很好的帮助文件来实现您在 C++ 中的图像处理要求。您可以检查此页面作为开始： [处理图像](http://www.leadtools.com/help/leadtools/v175/main/clib/dllsteps/tutimgproc.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:12:39.753

在谷歌搜索更多关于@paddy 在评论中提到的内容之后，我决定 OpenCV 是适合我的方式。

# iphone - iPhone 5 模拟器不是信箱，而是白条

> ID：12559006
> 
> 赞同：0
> 
> 时间：2012-09-24T04:53:05.313
> 
> 标签：iphone, ios5, ios-simulator, iphone-5

我有两个要在 iPhone 5 模拟器上测试的应用程序。两者都将在更新以处理 iPhone 5 的新分辨率之前发布。我的第一个应用程序信箱很好地在模拟器中，底部和顶部有黑条。然而，另一个应用程序没有信箱，而是有一个大的白条，与正常运行的应用程序上的两个黑条的高度相等。我已经删除了“自动添加”-586@2x.png 文件。我还取消了所有视图上的“自动调整子视图”复选框（这是我将第一个应用程序正确转到信箱的方式）。我不知道有什么不同。我检查了所有项目设置，两个应用程序之间看起来相同。我已经完成了一个干净的构建，我已经从模拟器中删除了该应用程序以强制生成一个新副本。没有什么能解决我的问题。有任何想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:37:59.753

好的，我解决了我的问题，事实证明这是我的错误，我将模拟器设置为 Retina 4 英寸和 iOS 6，但在 XCode 中选择了 iPhone 5.0 模拟器进行调试。一旦我将它设置为 iPhone 6.0 模拟器，它就正确地出现了信箱。

# c++ - 动态数组到两个函数

> ID：12559007
> 
> 赞同：1
> 
> 时间：2012-09-24T04:53:05.420
> 
> 标签：c++

我创建了一个程序，该程序将通过使用指针从用户将输入的整数集合中找到最大值和最小值来使用动态数组。

我实际上可以获得最大值的输出，但不是最小值；我发现我的动态数组通过max的函数计算后会为0，并使我的min成为min的赋值值。

我不知道为什么会这样-我尝试了很多方法，但是这些方法都没有用，所以有人可以解释原因，并在可能的情况下提供解决方案或给我一些提示以了解如何通过解决方案吗？

* * *

谢谢你的回复

好像我的代码让你感到困惑

对不起

程序意图从一定数量的整数中获取最大和最小数字

我想说的是，从max函数计算后，动态数组中的数据会变成0，当程序经过min函数时，它不会运行，因为已经设置了动态数组中的数据为 0

所以实际上我想问的是有没有办法让动态数组中的数据在max函数之后不会变成0？

对不起我的英语不好

```
#include <iostream>
using namespace std;

void max(int*, int);
void min(int*, int);

int main()
{
   int *ptr;
   int i;
   int size;

   cout << "how many integer: ";
   cin >> size;

   ptr = new int[size];

   for (i = 0; i < size; i++)
   {
      cout << "integer#" << i << ": ";
      cin >> *ptr + i;
   }

   max(ptr, size);
   min(ptr, size);

   delete [] ptr;

   return;
}

void max(int* ptr, int size)
{
   int i;
   int j;
   int max = 0;

   for (i = 0; i < size; i++)
   {
      while (*ptr + i != 0)
      {
         j = *ptr + i % 10;

         if (j > max)
         {
            max = j;
         }

         *ptr + i /= 10;
      }
   }

   cout << max << endl;
}

void min(int* ptr, int size)
{
   int i;
   int j;
   int min= 0;

   for (i = 0; i < size; i++)
   {
      while (*ptr + i != 0)
      {
         j = *ptr + i % 10;

         if (j < min)
         {
            min= j;
         }

         *ptr + i /= 10;
      }
   }

   cout << min<< endl;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:08:41.290

我不知道你用的是什么编译器，但你的代码甚至没有在我的 GCC 4.6 上进行一些修改就无法编译。

1.  都`*ptr + i`变成了`*(ptr + i)`。
2.  `return;`最后`main()`变成`return 0;`.

另一个问题是在函数中`void min(int* ptr, int size)`，您正在初始化`min`为`0`. 您真正应该做的是`int min = std::numeric_limits<int>::max();`使其`min`具有尽可能高的整数值。不要忘记`#include <limits>`.

这是一个在不修改原始数组的情况下找到***最小数字***和***最大数字的代码（一个很好的做法），***

```
void max(int* ptr, int size) {
    int i;
    int j;
    int temp;
    int max = 0;

    for(i = 0; i < size; i++) {
        temp = *(ptr + i);
        while (temp != 0) {
            j = temp % 10;
            if (j > max)
                max = j;
            temp /= 10;
        }
    }

    cout << max << endl;
}

void min(int* ptr, int size) {
    int i;
    int j;
    int temp;
    int min = 10;

    for(i = 0; i < size; i++) {
        temp = *(ptr + i);
        while (temp != 0) {
            j = temp % 10;
            if (j < min)
                min = j;
            temp /= 10;
        }
    }

    cout << min<< endl;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T04:57:15.873

这里的一个问题是运算符的优先级。

您正在尝试使用`*ptr + i`来访问第 i 个元素。Dereferencing( `*`) 具有最高优先级并在添加之前进行评估。

`*(ptr +i)`或更常见的`ptr[i]`应该可以解决问题。

# unit-testing - 收集每个 JUnit 测试的运行时间

> ID：12559010
> 
> 赞同：0
> 
> 时间：2012-09-24T04:53:20.183
> 
> 标签：unit-testing, junit, jenkins

有没有办法轻松收集每个单元测试的运行时间（例如使用surefire或一些Jenkins插件），以便我可以列出我的前10个最慢的单元测试？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:40:47.750

Jenkins 中没有内置任何东西可以做到这一点，但是您可以添加一个构建步骤来处理 JUnit 报告 XML 文件并提取执行时间，然后将数据格式化为 HTML 并使用[HTML Publisher 插件](https://wiki.jenkins-ci.org/display/JENKINS/HTML+Publisher+Plugin)来显示结果在构建页面上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-25T04:50:25.940

我最终做的是安装 Sonar 作为 Jenkins 的插件。Sonar 可以按运行时间顺序显示单元测试。当然，它还包含很多其他有用的信息，我不知道我们之前是如何管理的 :)

# mysql - 临时表而不是连接

> ID：12559011
> 
> 赞同：0
> 
> 时间：2012-09-24T04:53:39.307
> 
> 标签：mysql, sql, join

以下查询按预期工作。但是从中选择数据的汇总表太大。查询需要很多时间。

```
SELECT s.date_time AS date_time,SUM(s.requests) AS sum_requests,SUM(s.impressions) AS sum_views,SUM(s.clicks) AS sum_clicks,SUM(s.conversions) AS sum_conversions,
SUM(s.total_revenue) AS sum_revenue,SUM(s.total_revenue)  AS sum_spend,
SUM(s.total_basket_value) AS sum_bv,SUM(s.total_num_items) AS sum_num_items,SUM(s.total_pubrevenue) AS sum_pubrevenue
FROM ox_data_summary_ad_hourly AS s 
INNER JOIN ox_banners AS d ON (d.bannerid=s.ad_id) 
INNER JOIN ox_campaigns AS m ON (m.campaignid=d.campaignid) 
INNER JOIN ox_clients AS a ON (a.clientid=m.clientid) 
LEFT JOIN ox_zones AS z ON (z.zoneid=s.zone_id) 
LEFT JOIN ox_affiliates AS p ON (p.affiliateid=z.affiliateid)
WHERE a.agencyid = 3 AND z.zone_type = 'application' AND z.delivery = 8 
AND s.date_time>='2012-07-01 00:00:00' AND s.date_time<='2012-07-01 23:59:59' 
GROUP BY date_time 
```

我需要简化连接。有没有办法为所有连接创建一个临时表，然后将该表连接到基表。这是我到目前为止所尝试的。

```
drop table if exists test.helper;
create table test.helper 
select d.network_type , d.is_network, d.bannerid, p.agencyid, z.zone_type, z.delivery , z.zoneid
FROM ox_banners as d
INNER JOIN ox_campaigns AS m ON (m.campaignid=d.campaignid) 
INNER JOIN ox_clients AS a ON (a.clientid=m.clientid) 
left JOIN ox_agency as oa ON (oa.account_id = a.clientid)
left JOIN ox_affiliates AS p ON (p.agencyid = oa.agencyid)
left JOIN ox_zones AS z ON (z.affiliateid = p.affiliateid);

alter table test.helper add key(bannerid, zoneid); 
```

但与原始表连接时，它不会返回正确的结果。

```
SELECT s.ad_id, s.date_time AS date_time,SUM(s.requests) AS sum_requests,SUM(s.impressions) AS sum_views,SUM(s.clicks) AS sum_clicks,SUM(s.conversions) AS sum_conversions,
SUM(s.total_revenue) AS sum_revenue,SUM(s.total_revenue)  AS sum_spend,
SUM(s.total_basket_value) AS sum_bv,SUM(s.total_num_items) AS sum_num_items,SUM(s.total_pubrevenue) AS sum_pubrevenue
FROM ox_data_summary_ad_hourly AS s 
inner JOIN test.helper  AS d ON (d.bannerid=s.ad_id )
where d.agencyid = 3 AND d.zone_type = 'application' AND d.delivery = 8  and s.date_time>='2012-07-01 00:00:00' AND s.date_time<='2012-07-01 23:59:59' 
GROUP BY date_time 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:08:02.317

首先，我将`LEFT JOIN`s替换为`INNER JOINS`. 由于您`WHERE`在 ox_zones 上有一个子句，因此无论如何创建的空值`LEFT JOIN`都会退出。外部连接显然很昂贵，应尽可能避免。

在合理的现代 RDBMS 上，通过创建临时表来事后猜测查询计划器通常会适得其反。您的所有连接条件是否都已编入索引？您的`WHERE`子句中引用的列是否已编入索引？

# c# - 无需任何 SQL r 数据库服务器即可将动态创建的 datagridview 数据导出到 xml

> ID：12559017
> 
> 赞同：1
> 
> 时间：2012-09-24T04:54:06.373
> 
> 标签：c#, .net

嗨，任何人都可以在这个问题上帮助我，就像我试图从 datagridview 中的数据创建 XML 文件一样。问题是 datagridview 是动态创建的 n 它取决于用户在他创建的 n 列中输入数据的行数。Datagridview 包含具有整数和字符串的列。所以初始化列 n 行有点困难，因为我是新手。请帮我解决这个问题..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T05:08:25.160

请参阅已接受的解决方案[并](https://stackoverflow.com/questions/3109009/how-to-make-a-datatable-from-datagrid-without-any-datasource)`DataTable`手动创建

```
DataTable dt = new DataTable();
foreach(DataGridViewColumn col in dgv.Columns)
{
   dt.Columns.Add(col.HeaderText);    
}

foreach(DataGridViewRow row in dgv.Rows)
{
    DataRow dRow = dt.NewRow();
    foreach(DataGridViewCell cell in row.Cells)
    {
        dRow[cell.ColumnIndex] = cell.Value;
    }
    dt.Rows.Add(dRow);
} 
```

创建这个之后`DataTable`，创建一个`DataSet`并使用`WriteXml`

```
DataSet ds = new DataSet();
ds.Tables.Add(dt);
ds.WriteXml("your local path here"); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T05:10:07.433

```
 DataSet ds = new DataSet(); 

    DataTable dt = (DataTable)gv.DataSource;// if data source is dynamic data table it will wokr

    ds.Tables.Add(dt);

    string xml = ds.GetXml(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T05:07:49.860

```
 private XElement GetData(DataGridView dgv)
    {
        var elem = new XElement("data");
        foreach (DataGridViewRow row in dgv.Rows)
        {
            elem.Add(new XElement("row",
                row.Cells
                .Cast<DataGridViewCell>()
                .Select(a => new XElement(a.OwningColumn.Name, a.Value))));
        }

        return elem;
    } 
```

# c++ - C++ 电影座位

> ID：12559021
> 
> 赞同：2
> 
> 时间：2012-09-24T04:54:30.803
> 
> 标签：c++, stl, vector, permutation, next

在过去的几天里，我一直在疯狂地试图解决这个座位分配问题，并想知道是否有人可以帮助我。

**说明说：**

假设一组 n 名学生一起来上课（或看电影），并且恰好有 n 个座位在 1 排连续可用。给定 m 对座位的偏好，你要确定有多少学生想要就座来统计偏好。

**输入**

输入将仅来自键盘。输入将包含多个测试用例。每个测试用例以两个整数 0 < n 和 0 ≤ m 开始，其中 n 是要坐下的学生数量，m 是偏好数量。为简单起见，假设学生的编号从 0 到 n - 1。然后是 m 行，每行描述一个偏好，其中一行由三个整数 a、b 和 c 组成，满足 0 ≤ a < b < n 和 0 < |c| <名词。如果 c 是正数，那么青少年 a 和 b 最多希望坐在 c 个座位之间。如果 c 为负数，则 a 和 b 至少要分开 -c 个座位。输入结束由一条由 n = m = 0 组成的线表示。

**输出**

每个测试用例的输出是一行，其中包含满足所有输入约束的组的可能座位安排的数量。

**样本输入**

3 1

0 1 -2

3 0

0 0

**样本输出**

2

6

```
#include <vector>
#include <algorithm>
#include <string>
#include <iostream>
#include <iterator>

using namespace std;

struct Preference
{
int a;
int b;                     //Struct with three preferences
int c;
};

int main()
{
int a,b,c,students,numpref;
int count = 0;

vector<Preference> prefs;              //Vector with struct to store preferences
Preference case1;

cout<<"Enter number of students and preferences: ";
cin>>students>>numpref;          //Total Number of students and preferences are entered

for(int i = 0; i<=numpref; i++)
{
cin>>case1.a>>case1.b>>case1.c;
prefs.push_back(case1);                  //Stores preferences in vector
cout<<endl;
}

vector<int> v2(a);               //Second vector created to store list of students

sort(v2.begin(), v2.end());

while(next_permutation(v2.begin(), v2.end()))  
                                  //Finds all permutations of student seating
{

}

system("PAUSE");
return 0;
} 
```

我知道它不完整，但我主要是想弄清楚如何将每一行偏好与正确的排列进行比较，然后计算结果。我考虑过获取用户输入的向量中每个元素的位置（例如：示例中的 0,1），并检查找到的每个排列是否有 0 和 1，它们之间至少有 2 个座位。但这行不通。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:13:05.323

你认为的算法可以工作，但是很慢。我在您不完整的代码中发现了一些错误。

```
for(int i = 0; i<=numpref; i++) 
```

我认为这应该是

```
for(int i = 0; i<numpref; i++) 
```

# sql-server-2008 - 具有多个表的 SQL Server 2008 子查询

> ID：12559023
> 
> 赞同：0
> 
> 时间：2012-09-24T04:54:39.913
> 
> 标签：sql-server-2008

我有 4 张桌子

表 1 - 图纸提交-DTS

```
SUBMISSION-ID, 
DRAWING-ID,
INWARD-ID,
REVISION NO,
COMMENT DATE,
COMMENTS FORWARDED TO WED,
STATUS OF DRWG,
RECVD AT FFM,
REMARKS,
Last,
Remarks2,
Drawing Sheet, 
```

表 2 - 绘图-主-DTS

```
DRAWING-ID,
DRAWING CSD NO,
DRAWING TITLE,
ENGINEER INCHARGE, 
```

表 3 - LI 项目

```
PROJECT TITLE,
LI PROJECT NO, 
```

表 4 - 向内

```
INWARD-ID,
REFERENCE NO,
LI PROJECT NO,
TYPE OF INCOMING DOC, 
```

所有表都与该表中的一个字段相关。

表 4 中的参考编号、表 2 中的图纸 CSD 编号和表 3 中的 LI 项目编号是唯一的。

当图纸 CSD 编号将具有新的修订编号时，将生成新的参考编号。在该特定图纸 CSD 编号的最后参考编号上检查图纸 CSD 编号是否延迟。

我想要表 4 中的最后一个参考编号，表 1 中 DRWG 和 Recvd 的状态，表 2 中的负责工程师和图纸标题作为结果。我们将只提供 LI Project No 作为输入。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:10:15.857

您可能可以使用简单的拖放“访问样式”UI 来完成此操作（尽管我很少建议它，除非完全是初学者）。我猜这`[LI PROJECT NO]`是一个整数字段...

```
CREATE PROC dbo.GetLIProjectInfo (@LIProjNo INT)
AS
-- I got this from stackoverflow.com, see http://stackoverflow.com/questions/12559023/sql-server-2008-subquery-with-multiple-tables
BEGIN
   SELECT TOP (1)
      i.[REFERENCE NO],
      ds.[STATUS OF DRWG],
      ds.[RECVD AT FFM],
      dm.[DRAWING TITLE],
      dm.[ENGINEER INCHARGE]
   FROM dbo.[DRAWING SUBMISSIONS-DTS] AS ds
   JOIN dbo.[DRAWING-MAIN-DTS] AS dm
     ON dm.[DRAWING-ID] = ds.[DRAWING-ID]
   JOIN dbo.[Inward] AS i
     ON i.[INWARD-ID] = ds.[INWARD-ID]
   JOIN dbo.[LI PROJECTS] AS p
     ON p.[LI PROJECT NO] = i.[LI PROJECT NO]
   WHERE i.[LI PROJECT NO] = @LIProjNo
   ORDER BY i.[REFERENCE NO] DESC;
END 
```

编辑：

对于每行`[DRAWING CSD NO]`，您需要决定是希望 LIProjNo 过滤器过滤图纸列表还是仅过滤项目列表。

```
CREATE PROC dbo.GetLIProjectInfo (@LIProjNo INT)
AS
-- I got this from stackoverflow.com, see http://stackoverflow.com/questions/12559023/sql-server-2008-subquery-with-multiple-tables
BEGIN
   SELECT *
   FROM 
   (SELECT DISTINCT [DRAWING CSD NO]
     FROM dbo.[DRAWING-MAIN-DTS]) AS csd
   OUTER APPLY --Could be CROSS APPLY if you need
   (SELECT TOP (1)
      i.[REFERENCE NO],
      ds.[STATUS OF DRWG],
      ds.[RECVD AT FFM],
      dm.[DRAWING TITLE],
      dm.[ENGINEER INCHARGE]
   FROM dbo.[DRAWING SUBMISSIONS-DTS] AS ds
   JOIN dbo.[DRAWING-MAIN-DTS] AS dm
     ON dm.[DRAWING-ID] = ds.[DRAWING-ID]
   JOIN dbo.[Inward] AS i
     ON i.[INWARD-ID] = ds.[INWARD-ID]
   JOIN dbo.[LI PROJECTS] AS p
     ON p.[LI PROJECT NO] = i.[LI PROJECT NO]
   WHERE i.[LI PROJECT NO] = @LIProjNo
   AND dm.[DRAWING CSD NO] = csd.[DRAWING CSD NO]
   ORDER BY i.[REFERENCE NO] DESC) as inf
   ORDER BY csd.[DRAWING CSD NO];
END 
```

编辑：

因为您只需要与提供的项目相关的图纸：

```
CREATE PROC dbo.GetLIProjectInfo (@LIProjNo INT)
AS
-- I got this from stackoverflow.com, see http://stackoverflow.com/questions/12559023/sql-server-2008-subquery-with-multiple-tables
BEGIN
   WITH Numbered AS (
   SELECT 
      ROW_NUMBER() OVER (PARTITION BY dm.[DRAWING CSD NO] ORDER BY i.[REFERENCE NO] DESC) AS RowNum,
      i.[REFERENCE NO],
      ds.[STATUS OF DRWG],
      ds.[RECVD AT FFM],
      dm.[DRAWING TITLE],
      dm.[ENGINEER INCHARGE]
   FROM dbo.[DRAWING SUBMISSIONS-DTS] AS ds
   JOIN dbo.[DRAWING-MAIN-DTS] AS dm
     ON dm.[DRAWING-ID] = ds.[DRAWING-ID]
   JOIN dbo.[Inward] AS i
     ON i.[INWARD-ID] = ds.[INWARD-ID]
   JOIN dbo.[LI PROJECTS] AS p
     ON p.[LI PROJECT NO] = i.[LI PROJECT NO]
   WHERE i.[LI PROJECT NO] = @LIProjNo
   )
   SELECT *
   FROM Numbered
   WHERE RowNum = 1;
END 
```

# jquery - Jquery datepicker min max 设置

> ID：12559028
> 
> 赞同：1
> 
> 时间：2012-09-24T04:54:55.207
> 
> 标签：jquery, jquery-ui, datepicker

通过设置

```
minDate: "-1M", 
maxDate: "+1M", 
```

我得到**minDate 为 24/Aug/2012**和**maxDate 为 24/oct/2012**。
我希望 minDate 作为上个月的开始日期，即 **01/Aug/2012**和 maxDate 作为下个月的结束日期**31/oct/2012**。

我应该如何配置日期选择器来获取它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:29:43.263

您需要自己计算日期：

```
var minDate = new Date();
minDate.setMonth(minDate.getMonth()-1, 1);
var maxDate = new Date();
maxDate.setMonth(maxDate.getMonth()+2, 0);
$("#datepicker").datepicker( {
    ...
    minDate: minDate,
    maxDate: maxDate,
    ...
}); 
```

# columnheader - 修复列标题 - Outsystems

> ID：12559029
> 
> 赞同：0
> 
> 时间：2012-09-24T04:55:01.320
> 
> 标签：columnheader, outsystems

我正在使用 Outsystems 开发一个应用程序，其中有一个项目列表，其中指定了项目的不同属性。列表很大，当我向下滚动时，我可以看到列表的内容，但我无法判断列标题，因为一旦向下滚动，它们就不可见了。

那么这个问题有什么解决方案吗？我尝试过使用“固定表”小部件，但它没有成功。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:36:58.637

这是一个通用的*固定表头*问题。您可以使用并非特定于 OutSystems 平台的解决方案来解决它。请检查[此答案](https://stackoverflow.com/questions/673153/html-table-with-fixed-headers)或此[jQuery Plugin for Fixed header tables](http://fixedheadertable.com/)。

如果您在使用带有 OutSystems 的 jQuery 方面需要任何帮助，您可以查看 João Rosado 在[此线程](http://www.outsystems.com/NetworkForums/ViewTopic.aspx?TopicId=7548&Topic=Integration-of-jQuery)中的帖子。

# join - 如何在 cakephp 中将连接查询结果更改为 $this->paginate

> ID：12559030
> 
> 赞同：0
> 
> 时间：2012-09-24T04:55:06.113
> 
> 标签：join, pagination, cakephp-2.0

这是我的加入查询代码：

```
$options['joins'] = array(
                array('table' => 'employees',
                    'alias' => 'Employees',
                    'type' => 'INNER',
                    'foreignKey' => 'employee_id',
                    // 'fields' => 'Users.user', <- get rid of this
                    'conditions' => array(
                        'TravancoDSREmployee.emp_id = Employees.employee_id'
                    )
                )
            );
        $options['fields'] = array('TravancoDSREmployee.*','Employees.*'); // <- insert this
        $options['conditions'] = array( 'TravancoDSREmployee.created_emp_id' => $emp_id);
        $result = $this->TravancoDSREmployee->find('all', $options);
        $this->set('result', $result); 
```

我想用分页设置它。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:01:11.990

请查看下面给出的网址。

[http://garbers.co.za/2011/05/03/easy-way-to-generate-cakephp-habtm-joins-for-use-in-pagination/](http://garbers.co.za/2011/05/03/easy-way-to-generate-cakephp-habtm-joins-for-use-in-pagination/)

您可以尝试的代码是

```
$fields = array('TravancoDSREmployee.*','Employees.*'); // <- insert this
$conditions = array( 'TravancoDSREmployee.created_emp_id' => $emp_id);
$joins = array();
$joins[] = array(
    'table' => 'employees',
            'alias' => 'Employees',
            'type' => 'INNER',
            'foreignKey' => 'employee_id',
            // 'fields' => 'Users.user', <- get rid of this
            'conditions' => 'TravancoDSREmployee.emp_id = Employees.employee_id',
      );

$this->paginate = compact('fields' , 'joins' , 'conditions');
$result = $this->paginate('TravancoDSREmployee');
$this->set('result', $result); 
```

希望对你有帮助

谢谢

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:10:25.247

首先，您必须将条件传递给控制器​​中的分页属性。之后，您可以调用分页函数。将您的 $result 变为：

```
$this->paginate = array('TravancoDSREmployee' => $options);
$result = $this->paginate('TravancoDSREmployee');
$this->set('result', $result); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:18:39.007

好，我知道了：

这对我有用：

```
$this->paginate['TravancoDSREmployee'] = array(
            'limit' => 3, 
            'contain' => '', 
            'conditions' => array('TravancoDSREmployee.created_emp_id' => $emp_id),
            'fields' => array('TravancoDSREmployee.*','Employees.*'),
            'joins' => array(array('table' => 'employees', 'type' => 'INNER', 'alias' => 'Employees', 'conditions' => array('TravancoDSREmployee.emp_id = Employees.employee_id')))
            );
        $result = $this->paginate('TravancoDSREmployee');
        $this->set('result',$result); 
```

我参考了这个链接以获得解决方案： [http ://planetcakephp.org/aggregator/items/3544-using-mysql-inner-join-in-cakephp-pagination](http://planetcakephp.org/aggregator/items/3544-using-mysql-inner-join-in-cakephp-pagination)

# objective-c - 非指定初始化程序可以调用超级的指定初始化程序吗？

> ID：12559032
> 
> 赞同：3
> 
> 时间：2012-09-24T04:55:25.357
> 
> 标签：objective-c

可以做到以下几点吗？

1) 非指定初始化程序调用超类的指定初始化程序
2) 类的指定初始化程序调用超类的非指定初始化程序？

或者流程必须是：

a) 指定初始化器必须调用超类的指定初始化器
b) 非指定初始化器必须调用自己类的指定初始化器

如果违反上述（1）或（2），会发生什么？（或者，如果我们必须始终遵循（a）和（b），那么背后的原因是什么？）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T06:42:51.623

*   1：没有。
*   2：是的。
*   答：有争议。
*   乙：是的。

指定初始化器的意义在于它是知道如何正确设置手头对象的初始化器。类中的所有其他初始化程序都应该调用指定的初始化程序；如果他们不这样做，则对象可能无法正确初始化。

Apple 的 Cocoa 文档讨论了[如何处理多个初始化器](http://developer.apple.com/library/ios/#documentation/general/conceptual/DevPedia-CocoaCore/MultipleInitializers.html)，它包括以下内容：

> 采用完整的初始化参数的类的初始化器通常是指定的初始化器。子类的指定初始化程序必须通过向 super 发送消息来调用其超类的指定初始化程序。

这有点模棱两可——听起来子类的指定初始化程序必须调用其超类的指定初始化程序。但我认为这不是真正的意图。这里真正的重点是指定的初始化器有责任通过发送消息来确保超类被正确初始化`super`。如果您碰巧通过调用`super`的非指定初始化程序之一来做到这一点，那么只要该初始化程序最终导致调用指定的初始化程序，那应该没问题。出于这个原因，我不认为（2）是一个问题。

进一步阅读我们有：

> 便利（或辅助）初始化程序——可以包括 init——不调用 super。

所以他们在这里说的是指定初始化程序和任何其他初始化程序之间的一个重要区别是指定初始化程序是唯一向`super`.

回到（1），如果您有一个调用 的“非指定”初始化程序`[super init]`，那并不是真正的非指定初始化程序。您的方法通过向 发送初始化消息来承担指定初始化程序的责任`super`。这*不一定*是个问题——请注意 UIView 有两个指定的初始化程序——但它违反了通常的约定，所以你应该有一个很好的理由这样做。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T06:46:32.887

由于创建指定的初始化程序是不正式的，因此是否违反规则取决于您。

具有多个初始化器的类的常见做法是将接受最多参数的类设为指定初始化器，并让所有其他初始化器调用它。只有指定的初始化程序才能调用超类的指定初始化程序，这遵循相同的规则。

如果其他人将您的类子类化并调用指定的初始化程序，则他们确定所有实例变量都已正确初始化。如果您的课程不遵循这些常见做法，您可能会为自己创建一个混乱的课程，但让其他人更难使用它。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-24T08:39:37.490

> 可以做到以下几点吗？
> 
> 1) 非指定初始化器调用超类的指定初始化器

它实际上**必须**完成，因为作为子类实现者，您无法知道超类指定初始化程序中的代码并自己实现它而无需占用代码。你没有其他合理的方法来初始化超类。

无论您是子类还是外部客户端，您都必须调用指定的初始化程序。上面引用的文档不正确。

> 2）一个类的指定初始化器调用超类的非指定初始化器？

如果非指定的初始化器由超级提供并实现调用指定的初始化器，那么在父级上调用任何初始化器绝对没有问题。

先前的答案看起来您必须在自己的代码中基本上实现所有超类构造函数，而无需代码。错误的。这就是存在超类初始值设定项的原因，这样您就可以在没有代码的情况下安全地扩展它们。

# iphone - iPhone5的hw.machine值是多少？

> ID：12559043
> 
> 赞同：3
> 
> 时间：2012-09-24T04:57:26.920
> 
> 标签：iphone

我之前使用**uidevice-extension**来获取设备类型。这是**uidevice-extension**中 iphone5 的值：

```
if ([platform isEqualToString:@"iPhone5,1"])    return @"iPhone5"; 
```

我不确定 iphone5 的值是否正确，因为它是在 iphone5 发布日期之前更新的。感谢您提供任何信息！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T08:10:47.117

iPhone 5 GSM - iPhone5,1

iPhone 5 CDMA - iPhone5,2

iPod 5 - iPod5,1

Info taken from the iOS file names. Please check [http://osxdaily.com/2012/09/19/ios-6-ipsw-direct-download-links/](http://osxdaily.com/2012/09/19/ios-6-ipsw-direct-download-links/)

# sql - 从数据映射器查询中创建唯一集的有效方法

> ID：12559047
> 
> 赞同：0
> 
> 时间：2012-09-24T04:58:06.440
> 
> 标签：sql, ruby, sinatra, datamapper

我正在使用 DataMapper 和 Sinatra，我正在尝试从 DataMapper 实体属性创建一组独特的元素。我在数据库中搜索条目集合。这些条目都有一个“类别”属性。我想找到一种有效的方法来制作所有独特类别类型的新数组。

谢谢

# python - 对于每 x 个文件；创建新目录并移动文件——使用 Python

> ID：12559055
> 
> 赞同：3
> 
> 时间：2012-09-24T04:59:05.427
> 
> 标签：python, directory, move, shutil

我有一个包含几千个文件的目录。我希望能够在较大的导演中创建子目录，并将 150 个文件（按扩展名过滤）移动到每个新创建的目录中。我希望得到一些指导来帮助我前进。这是我开始的小事：

```
wd = os.chdir(r'foobar')

allgzs=[]

for file in os.listdir(wd):
    if file.endswith('asc.gz'):
       allgzs.append(file)

for gz in allgzs:

# For every 150 .gz files: 
# Create directory -- os.mkdir?
# Move files into directory  -- shutil.move? 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T06:25:40.883

我想出了一个`grouper`函数来产生一个长序列的运行`n`：

```
import itertools
def grouper(S, n):
    iterator = iter(S)
    while True:
        items = list(itertools.islice(iterator, n))
        if len(items) == 0:
            break
        yield items 
```

从那里，您可以非常简洁地执行您想要的操作：

```
import glob, os, shutil
fnames = sorted(glob.glob('*asc.gz'))
for i, fnames in enumerate(grouper(fnames, 150)):
    dirname = 'batch%d' % i
    os.mkdir(dirname)
    for fname in fnames:
        shutil.move(fname, dirname) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T05:07:30.583

让我们看看，我将列举在这种情况下我会做什么。

*   获取文件列表 - X
*   循环遍历所有文件 - X
*   确保文件只有一个句点 - O
*   过滤掉不需要的扩展 - X
*   将想要的扩展添加到新列表 - O
*   循环遍历新列表中的所有文件 - O
*   将它们添加到列表中并使用计数器，以便您知道何时有 150 - O
*   当您有 150 个文件时，将它们全部移动 - O
*   回到循环 - O
*   一旦你遍历所有并复制，你就完成了。

你有它。此外，这绝不是最有效或最好的方法，这就是我的方式。

编辑：示例代码：

```
wantedexts = [".jpg",".png",".randomext"]
wantedfiles = []

for f in files: #the files from the folder
    allowedext = 0
    for exts in wantedexts:
        if f.endswith(exts):
            allowedext = 1
            break
    if allowedext:
        wantedfiles.append(f)

counter = 0
countertwo = 0 #used to tell when you get to the end of the files
copyfiles = []
for f in wantedfiles:
    if counter == 150 or countertwo == len(wantedfiles):
        for fc in copyfiles:
            copy    #too lazy to type in real copy code
        counter = 0
        copyfiles = []
    copyfiles.append(f)
    counter += 1
    countertwo += 1 
```

几乎为您编写了代码，但无论如何。Countertwo 用于复制最后的项目（因为可能会剩下一些）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T06:24:05.517

如果您热衷于保留已经编写的代码，这里有一个直观的方式来完成它：

```
import os
import shutil

wd = os.chdir(r'foobar')

allgzs=[]

for file in os.listdir(wd):
    if file.endswith('asc.gz'):
       allgzs.append(file)

n = 1
name = "subdir%i" %n
for gz in allgzs:
    if not os.path.exists(name):
        os.mkdir(name)
    shutil.move(gz, name)
    if len(os.listdir(name)) == 150:
        n += 1
        name = "subdir%i" %n 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T05:34:27.667

我只是在这里使用列表推导来制作文件名列表。您的名单将来自`os.listdir`或`glob.glob('*asc.gz')`

```
>>> files = ['foo{}.gz'.format(i) for i in range(5000)]
>>> for i, fname in enumerate(files):
...     if i%150 == 0:
...         dirname = "bar{}".format(i//150)
...         os.mkdir(dirname)
...     print fname,"-->", dirname
...     shutil.move(fname, dirname)
... 
foo0.gz --> bar0
foo1.gz --> bar0
foo2.gz --> bar0
foo3.gz --> bar0
foo4.gz --> bar0
foo5.gz --> bar0
... 
```

这里的技巧是记录我们正在处理的文件的数量并除以将`150`其映射到目录中。`//`仅表示整数除法（与`/`Python2 中相同）

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T05:08:54.470

您可以为此使用[glob](http://docs.python.org/library/glob.html)模块

```
for file in glob.glob('*.gz'):
    #Do Stuff 
```

# android - init.rc 中的 mkdir

> ID：12559056
> 
> 赞同：1
> 
> 时间：2012-09-24T04:59:12.743
> 
> 标签：android, system, mkdir

**初始化文件**

第264行---`mkdir /data/misc/radio 0770 radio radio`

我想将 /data/misc/radio 的权限更改为 0775。

我在上面的行旁边写了这个： Line No-265--- `chmod 0775 /data/misc/radio`。

如果我将第 264 行更改为此 --- `mkdir /data/misc/radio 0775 radio radio`..

这条线有什么问题？有人说如果 mkdir 失败（如果目录已经存在）那么权限将不会设置为 0775。因此，如果 mkdir 失败，为了确保权限更改为 0775，我们在不同的行中编写了 chmod 命令。

但是有这么多 mkdir 命令正在创建具有不同权限的不同目录，那么如果我们按照上述情况进行操作，那么我们应该为每个 mkdir 命令提供不同的 chmod 命令吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-07-25T18:44:51.500

当 init 执行 init.rc 脚本时，如果目录不存在，mkdir 将根据您提供的权限创建目录，如果目录存在，则根据 mkdir 命令设置权限。

来自函数中的 aosp system/core/init/builtins.c`do_mkdir()`

```
ret = make_dir(args[1], mode);
/* chmod in case the directory already exists */
if (ret == -1 && errno == EEXIST) {
    ret = _chmod(args[1], mode);
}
if (ret == -1) {
    return -errno;
} 
```

# java - 为什么除非我们从服务器读取 POST 响应，否则 HTTP POST 不起作用？

> ID：12559058
> 
> 赞同：0
> 
> 时间：2012-09-24T04:59:27.160
> 
> 标签：java, http-post

我正在为一个站点编写一个上传器类，在上传文件后，我正在读取该站点的上传响应。如果我没有阅读响应，则文件没有上传。我的代码如下，

```
 String charset = "UTF-8";

        File binaryFile = new File("C:\\TestVideoFile.flv");
        String boundary = Long.toHexString(System.currentTimeMillis());
        System.out.println(boundary);// Just generate some unique random value.
        String CRLF = "\r\n"; // Line separator required by multipart/form-data.
        URLConnection connection = new URL(UPLOAD_URL).openConnection();
        connection.setDoInput(true); 
        connection.setDoOutput(true);
        connection.setRequestProperty("Content-Type", "multipart/form-data; boundary=" + boundary);
        PrintWriter writer = null;
        try {
            OutputStream output = connection.getOutputStream();
            writer = new PrintWriter(new OutputStreamWriter(output, charset), true); // true = autoFlush, important!
            writer.append("--" + boundary).append(CRLF);
            writer.append("Content-Disposition: form-data; name=\"file\"; filename=\"" + binaryFile.getName() + "\"").append(CRLF);
            writer.append("Content-Type: " + URLConnection.guessContentTypeFromName(binaryFile.getName())).append(CRLF);
            writer.append("Content-Transfer-Encoding: binary").append(CRLF);
            writer.append(CRLF).flush();
            InputStream input = null;
            try {
                input = new FileInputStream(binaryFile);
                long filelen = binaryFile.length();
                System.out.println("Length : " + filelen);
                int dataRead = 0;
                byte[] buffer = new byte[1024];
                for (int length = 0; (length = input.read(buffer)) > 0;) {

                    output.write(buffer, 0, length);
                }
                System.out.println("Now only terminating the file write loop");
                output.flush(); // Important! Output cannot be closed. Close of writer will close output as well.
            } catch (Exception e) {
                System.out.println(e);
            } finally {
                if (input != null) {
                    try {
                        input.close();
                    } catch (IOException logOrIgnore) {
                        System.out.println(logOrIgnore);
                    }
                }
            }
            writer.append(CRLF).flush(); // CRLF is important! It indicates end of binary boundary.

            // End of multipart/form-data.
            writer.append("--" + boundary + "--").append(CRLF);

            System.out.println("Sending username");
            // Send normal param.
            writer.append("--" + boundary).append(CRLF);
            writer.append("Content-Disposition: form-data; name=\"user\"").append(CRLF);
            writer.append("Content-Type: text/plain; charset=" + charset).append(CRLF);
            writer.append(CRLF);
            writer.append(username).append(CRLF).flush();
            System.out.println("Sending password");
            writer.append("--" + boundary).append(CRLF);
            writer.append("Content-Disposition: form-data; name=\"password\"").append(CRLF);
            writer.append("Content-Type: text/plain; charset=" + charset).append(CRLF);
            writer.append(CRLF);
            writer.append(password).append(CRLF).flush();

            System.out.println("Reading response from server");

            BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream()));
            String k = "", tmp = "";
            while ((tmp = br.readLine()) != null) {
                System.out.println(tmp);
                k += tmp;
            }
            if (k.contains("Successfully")) {
                System.out.println("File Uploaded successfully into PutLocker :)");
                String downloadLink = parseResponse(k, "<link>", "</link>");
                System.out.println("Download Link : " + downloadLink);
            } else {
                System.out.println("Upload failed :(");
            }

          } catch (Exception e) {
            System.out.println(e);
        } finally {
            if (writer != null) {
                writer.close();
            }
        } 
```

如您所见，我正在以下行中将数据写入服务器，

```
for (int length = 0; (length = input.read(buffer)) > 0;) {

                        output.write(buffer, 0, length);
                    } 
```

但在此之后，我必须执行以下操作，

```
 BufferedReader br = new BufferedReader(new InputStreamReader(connection.getInputStream()));
                String k = "", tmp = "";
                while ((tmp = br.readLine()) != null) {
                    System.out.println(tmp);
                    k += tmp;
                } 
```

为什么我必须读取服务器的响应才能使上传成功？

有人可以解释一下吗？

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:31:14.920

如果您尝试向服务器发布内容并且在您完全发送消息之前连接被中断，那么服务器将停止处理不完整的请求。一旦服务器完成接收请求并且您不等待得到它的响应，那么您将永远不知道您的请求是否成功发送。因此，URLConnection 旨在等待您得到响应。

另一个原因是您可能希望先构建和配置 URLConnection，然后在需要时通过调用`getInputStream`or发送它`getResponseCode`。您可以更好地控制希望交易发生的时间。

您不需要总是`getInputStream`，只需调用`getResponseCode`即可完成请求。但是，整个输入流仍会发送到您的代码，但它们会被丢弃。

# sql-server-2008 - 在数据返回时应用 order by

> ID：12559060
> 
> 赞同：0
> 
> 时间：2012-09-24T04:59:57.700
> 
> 标签：sql-server-2008, sql-order-by

我有一个存储过程，它返回这样的数据

```
ReportLabelID   AssessmentLinkId
TextBox7            10207
RadioButton2        10207
TextArea2           10207
FullName5           10207
FullName5           10211
RadioButton2        10211
TextArea2           10211
TextBox7            10211 
```

我想要的是按字母顺序对返回数据及其 AssessmentLinkId 进行排序，也像这样

```
ReportLabelID   AssessmentLinkId
FullName5           10207
RadioButton2        10207
TextArea2           10207
TextBox7            10207
FullName5           10211
RadioButton2        10211
TextArea2           10211
TextBox7            10211 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:51:13.347

正如上面 Marc B 所建议的那样

```
ORDER BY AssessmentLinkID, ReportLabelID 
```

为我做了诀窍谢谢

# android - Android 4.0+ 上的组播 RTP

> ID：12559064
> 
> 赞同：3
> 
> 时间：2012-09-24T05:00:07.527
> 
> 标签：android, multicast, rtp

Android 现在拥有原生[RTP](http://developer.android.com/reference/android/net/rtp/package-summary.html)和[多播](http://developer.android.com/reference/java/net/MulticastSocket.html)API。那么多播和/或广播 RTP 呢？我在文档中没有看到有关如何启用此功能的任何内容？我对客户端和服务器都感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T10:57:09.257

据我所知，通过对软件包的大量研究和测试，可以使用and`android.net.rtp`发送*到*多播地址（音频），但如果您尝试使用多播地址，您将不会收到任何东西。`AudioStream``AudioGroup``AudioStream.associate()`

我在 Android 问题跟踪器上为此打开了一个错误报告，这里： [https ://code.google.com/p/android/issues/detail?id=61289](https://code.google.com/p/android/issues/detail?id=61289)

请记住，许多 Android 设备实际上并不支持向网络发送 IGMP 加入数据包（[http://www.programmingmobile.com/2012/01/multicast-and-android-big-headache.html](http://www.programmingmobile.com/2012/01/multicast-and-android-big-headache.html)就是其中之一有关这方面的信息）。

因此，您需要确保您的网络基础设施设置为将多播 UDP 数据包传送到您的设备。一些网络允许在交换机/路由器/接入点等上设置静态多播组。

# jquery - jQuery Cycle Plugin 抛出错误：“没有方法‘循环’”

> ID：12559065
> 
> 赞同：1
> 
> 时间：2012-09-24T05:00:16.700
> 
> 标签：jquery, jquery-cycle

我正在尝试在一个项目上实现[jQuery Cycle 插件](http://jquery.malsup.com/cycle/)，但它引发了以下错误（并且无法初始化）：

```
Uncaught TypeError: Object [object Object] has no method 'cycle' 
```

我正在使用 jQuery 版本`1.8.0`，插件是 version `2.9999.6`。

我做了一些谷歌搜索，但我看不到很多关于这个错误的引用，而且我发现的那些似乎不相关。任何朝着正确方向的轻推将不胜感激！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:07:14.913

应该在您的标签中使用`src=`而不是：`type=``<script>`

```
<!-- Add Cycle Plugin -->
<script src="js/plugins/jquery.cycle.all.js"></script> 
```

或者，如果您希望它是非阻塞的，您可以使用 jQuery 加载脚本：

```
<script type="text/javascript">
$(document).ready(function() {
    $.getScript('js/plugins/jquery.cycle.all.js', function(){
        $('.feature').cycle({ fx: 'fade' }); 
    });
});
</script> 
```

# java - 在Android中计算手势距离

> ID：12559066
> 
> 赞同：7
> 
> 时间：2012-09-24T05:00:17.203
> 
> 标签：java, android

我正在尝试找到一种方法来计算手势期间行进的距离。我可以使用 MotionEvent.ACTION_DOWN 和 MotionEvent.ACTION_UP 或 MotionEvent.ACTION_MOVE 获得两点之间的距离。但这并不能说明进入一个圈子。它会计算 0，因为您一直向后移动。我正在寻找总行驶距离，最好以像素为单位，以便在需要时进一步操作它。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-09-24T05:18:21.217

您可以使用MotionEvent的*历史资料。*根据 API Doc 的示例，您可以这样做（为简单起见，我的示例不涉及多点触控）：

在 ACTION_MOVE 和 ACTION_UP 上执行此操作，其中`startX`,`startY`将是最后一个已知坐标，例如来自最后一个 ACTION_DOWN 事件。

```
float getDistance(float startX, float startY, MotionEvent ev) {
    float distanceSum = 0;
    final int historySize = ev.getHistorySize();
    for (int h = 0; h < historySize; h++) {
        // historical point
        float hx = ev.getHistoricalX(0, h);
        float hy = ev.getHistoricalY(0, h);
        // distance between startX,startY and historical point
        float dx = (hx - startX);
        float dy = (hy - startY);
        distanceSum += Math.sqrt(dx * dx + dy * dy);
        // make historical point the start point for next loop iteration
        startX = hx;
        startY = hy;
    }
    // add distance from last historical point to event's point
    float dx = (ev.getX(0) - startX);
    float dy = (ev.getY(0) - startY);
    distanceSum += Math.sqrt(dx * dx + dy * dy);
    return distanceSum;
} 
```

![示例图像](../Images/7f7af19cdb3181d899e02decf7798a42.png)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T05:12:24.973

一阶近似值是对检测到的每一个微小运动的局部长度求和：

上`ACTION_DOWN`

```
total = 0;
xPrec = ev.getX();
yPrec = ev.getY(); 
```

上`ACTION_MOVE`

```
final float dx = ev.getX() - xPrec;
final float dy = ev.getY() - yPrec;
final float dl = sqrt(dx * dx + dy * dy);
total += dl;
xPrec = ev.getX();
yPrec = ev.getY(); 
```

在`ACTION_UP`你可以做任何你想做的事情，`total`其中​​包含你的路径的总近似长度。

如果您阅读有关`MotionEvent` [http://developer.android.com/reference/android/view/MotionEvent.html](http://developer.android.com/reference/android/view/MotionEvent.html)的官方文档，您将看到名为**Batching**的部分，它解释了一个给定的运动事件可以将多个运动样本批处理在一起。为了获得最佳的一阶近似值，您需要使用 `getHistorySize`, `getHistoricalX`,来消耗所有这些样本`getHistoricalY`。不要忘记处理位于`getX`和中的最新样本`getY`。

如果您需要更好的近似值，我建议您阅读有关曲线拟合问题[http://en.wikipedia.org/wiki/Curve_fitting](http://en.wikipedia.org/wiki/Curve_fitting)，但由于触摸事件的频率非常快，您可能不需要这样做并获得满足一阶近似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T05:11:37.680

我不知道这是否是*最好*的方法，但是您可以在每次 MotionEvent.ACTION_MOVE 触发到数组时捕获数据点，然后在完成手势后计算从点到点的累积距离……到点。

# android - 如何在使用phonegap的android应用程序中的jquery组合框中使用动态源

> ID：12559067
> 
> 赞同：11
> 
> 时间：2012-09-24T05:00:24.420
> 
> 标签：android, jquery, jquery-ui, cordova

我正在使用 phonegap 开发一个 android 应用程序。在我使用 jquery 组合框的应用程序中有一个自动完成选择框。当我为组合框使用静态源时，组合框工作正常。但我必须使用动态源，因为有大量数据。数据存储在 sqlite 数据库中。数据中有大约 12000 个项目，我想过滤掉它以仅显示大约 10 个项目，在组合框中键入了起始字母。但是组合框只显示前 10 个项目，而不是在数据库中搜索每个键入的单词。仅在按下退格键时才搜索数据库。

这是组合框代码：

```
function loadCustomer(){

    //console.log('No rows affected!');
    //navigator.notification.alert(results.rows.item(0).name);

            (function( $ ) {
        $.widget( "ui.customer", {
            _create: function() {
                var input,
                    self = this,
                    select = this.element.hide(),
                    selected = select.children( ":selected" ),
                    value = selected.val() ? selected.text() : "",
                    wrapper = this.wrapper = $( "<span>" )
                        .addClass( "ui-customer" )
                        .insertAfter( select );

                input = $( "<input id='customer_input' autofocus>" )
                    .appendTo( wrapper )
                    .val( value )
                    .addClass( "ui-state-default ui-customer-input" )
                    .autocomplete({
                        delay: 0,
                        minLength: 0,
                        autofocus:true,
                        source: function( request, response ) {
                            var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex(request.term), "i" );
                            response( select.children( "option" ).map(function() {
                                var text = $( this ).text();
                                if ( this.value && ( !request.term || matcher.test(text) ) )
                                    return {
                                        label: text.replace(
                                            new RegExp(
                                                "(?![^&;]+;)(?!<[^<>]*)(" +
                                                $.ui.autocomplete.escapeRegex(request.term) +
                                                ")(?![^<>]*>)(?![^&;]+;)", "gi"
                                            ), "<strong>$1</strong>" ),
                                        value: text,
                                        option: this
                                    };
                            }) );
                        },
                        select: function( event, ui ) {
                            ui.item.option.selected = true;
                            self._trigger( "selected", event, {
                                item: ui.item.option
                            });
                            show_balance();
                            updateGrid();
                            $("#next_link").focus();
                        },
                        search: function(event, ui) {var db = window.openDatabase("Database", "1.0", "Cordova Demo", 2097152);
                            db.transaction(selectCustomer, errorCB);},
                        change: function( event, ui ) {
                            if ( !ui.item ) {
                                var matcher = new RegExp( "^" + $.ui.autocomplete.escapeRegex( $(this).val() ) + "$", "i" ),
                                    valid = false;
                                select.children( "option" ).each(function() {
                                    if ( $( this ).text().match( matcher ) ) {
                                        this.selected = valid = true;
                                        return false;
                                    }
                                });
                                if ( !valid ) {
                                    // remove invalid value, as it didn't match anything
                                    $( this ).val( "" );
                                    select.val( "" );
                                    input.data( "autocomplete" ).term = "";
                                    return false;
                                }
                            }
                        }
                    })
                    .focus(function() {
       $(this).autocomplete("search", "");})
                    .addClass( "ui-widget ui-widget-content ui-corner-left" );

                input.data( "autocomplete" )._renderItem = function( ul, item ) {
                    return $( "<li></li>" )
                        .data( "item.autocomplete", item )
                        .append( "<a>" + item.label + "</a>" )
                        .appendTo( ul );
                };

                $( "<a>" )
                    .attr( "tabIndex", -1 )
                    .attr( "title", "Show All Items" )
                    .appendTo( wrapper )
                    .button({
                        icons: {
                            primary: "ui-icon-triangle-1-s"
                        },
                        text: false
                    })
                    .removeClass( "ui-corner-all" )
                    .addClass( "ui-corner-right ui-customer-toggle" )
                    .click(function() {
                        // close if already visible
                        if ( input.autocomplete( "widget" ).is( ":visible" ) ) {
                            input.autocomplete( "close" );
                            return;
                        }

                        // work around a bug (likely same cause as #5265)
                        $( this ).blur();

                        // pass empty string as value to search for, displaying all results
                        input.autocomplete( "search", "" );
                        input.focus();
                    });
            },

            destroy: function() {
                this.wrapper.remove();
                this.element.show();
                $.Widget.prototype.destroy.call( this );
            }
        });
    })( jQuery );

    $(function() {
        $( "#customer" ).customer();

    });
    return false;

    } 
```

这是从数据库中选择数据的代码：

```
function selectCustomer(tx) {
        requestterm=$("#customer_input").val();
        tx.executeSql('SELECT * FROM CUSTOMER WHERE name LIKE "'+requestterm+'%" LIMIT 10', [], selectCustomerSuccess, errorCB);

    }

function selectCustomerSuccess(tx, results) {

  if (!results.rowsAffected) {
    //console.log('No rows affected!');
    //navigator.notification.alert(results.rows.item(0).name);
     var len = results.rows.length;

    var options = '<option value=""></option>';
            for (var i=0; i<len; i++) {
                options += '<option value="' + results.rows.item(i).custid + '">' + results.rows.item(i).name + '</option>';
            }
            $("#customer").html(options);
            $('#customer option:first').attr('selected', 'selected');

return false;

  }

    } 
```

请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T13:59:10.703

你有两个问题：

# 1) 查询只返回十个结果

您的查询仅返回 10，因为您`LIMIT 10`在其中有一个。所以（我认为）你想要`selectCustomer()`看起来像这样：

```
function selectCustomer(tx) {
    requestterm=$("#customer_input").val();
    tx.executeSql('SELECT * FROM CUSTOMER WHERE name LIKE "'+requestterm+'%"', [], selectCustomerSuccess, errorCB);
} 
```

# 2) 小部件仅在按下退格键时搜索

我不确定这个。[文档](http://docs.jquery.com/UI/Autocomplete#events)说只执行“`search`在请求（源选项）开始之前，在满足 minLength 和延迟之后。”。可能是您的查询由于某种原因需要一段时间才能执行，而当它们赶上时您正在按退格键只是巧合？另外，您是否尝试过向`parse`自动完成小部件添加功能？`parse`允许您通过在 之后立即调用来过滤搜索结果`search`，这样可以帮助您调试它。

# android - 在不同时间显示两个不同的状态通知

> ID：12559068
> 
> 赞同：1
> 
> 时间：2012-09-24T05:00:45.627
> 
> 标签：android, sqlite, service, notifications, notificationmanager

好的，所以我查看了 StackOverflow 上的所有线程，但找不到与我的情况相关的线程，所以我希望你们能在这里帮助我。:)

我有一个应用程序需要为在不同时间设置的不同提醒显示多个（2 个或更多）状态通知。例如：提醒 1 设置为上午 9:40，因此会在上午 9:40 弹出通知。提醒 2 设置在上午 10:10，因此在上午 9:40 已经弹出的通知*下方*会在上午 10:10 弹出另一个*不同的状态通知。*

 *当提醒消失时，我的应用程序没有其他通知时，我的代码有效。但是，如果存在现有通知（我们称之为提醒 1）并且用户没有关闭它，则新通知（我们称之为提醒 2）永远不会出现，并且提醒 1 只是将其时间戳更新为提醒 2 的时间本来应该关掉的。基本上，我的代码不适用于应该在不同时间发出并彼此共存的多个*单独的提醒。*

这是我在通知中设置提醒名称时的代码：

```
 /* Create a unique notifID that increments itself by 1 every time a new reminder is saved. */
int notifID = 0;
notifID = notifID + 1;

Toast toast = Toast.makeText(context, context.getString(R.string.reminder_saved),  Toast.LENGTH_LONG);
 toast.show();

c.set(mYear, mMonth, mDay); //Set the notification date.
c.set(Calendar.HOUR_OF_DAY, pHour); //Set the notification hour.
c.set(Calendar.MINUTE, pMinute); //Set the notification minute.
c.set(Calendar.SECOND, 0); //Set the notification second (always 0).

//Use AlarmManager to trigger the notification/alarm.
                AlarmManager alarmManager = (AlarmManager) getSystemService(ALARM_SERVICE);                 

                //Get the current date and time.
                Calendar calendar = Calendar.getInstance();       

                //Set the time for the notification to occur.
calendar.set(Calendar.YEAR, mYear);
calendar.set(Calendar.MONTH, mMonth);
calendar.set(Calendar.DAY_OF_MONTH, mDay);                 
calendar.set(Calendar.HOUR_OF_DAY, pHour);
calendar.set(Calendar.MINUTE, pMinute);
calendar.set(Calendar.SECOND, 0);

//PendingIntent to launch activity when the alarm triggers.                    
Intent i = new Intent();

/* Assign a notification ID to each notification. Because it is incremented by 1 for each new notification (see lines 1 and 2), there shouldn't be any duplicates. */
i.putExtra("NotifID", notifID);
    /* Get the name of reminder from the textbox and pass it into the intent. */
i.putExtra("Reminder_Name", editRemindMeTo.getText().toString());

                PendingIntent displayIntent = PendingIntent.getActivity(
                getBaseContext(), 0, i, 0);               

                //Set the alarm to trigger.
alarmManager.set(AlarmManager.RTC_WAKEUP, 
calendar.getTimeInMillis(), displayIntent);

Intent intent = new Intent(this, ViewLocalReminders.class);
startActivity(intent); 
```

这是我的实际通知代码（它位于扩展 Activity 的单独文件中）：

```
public class DisplayReminderNotification extends SherlockActivity {

@SuppressWarnings("deprecation")
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    //Get the notification ID from the saved reminder (see previous code block).
    int notifID = getIntent().getExtras().getInt("NotifID");

    //PendingIntent stores the Activity that should be launched when the user taps the notification.
    Intent i = new Intent();
    i.putExtra("NotifID", notifID);

    PendingIntent detailsIntent = 
        PendingIntent.getActivity(this, 0, i, 0);

    //Get the name of the reminder from the previous activity (see previous code block)
    String reminderName = getIntent().getExtras().getString("Reminder_Name");

    NotificationManager nm = (NotificationManager)
        getSystemService(NOTIFICATION_SERVICE);
    Notification notif = new Notification(
        R.drawable.flag_red_large, 
        "App Name",
        System.currentTimeMillis());

    CharSequence from = "App Name";
    //Print the name of the reminder as the notification body.
    CharSequence message = reminderName;        
    notif.setLatestEventInfo(this, from, message, detailsIntent);

    //Pause for 100ms, vibrate for 250ms, pause for 100ms, and vibrate for 500ms.
    notif.defaults |= Notification.DEFAULT_SOUND;
    notif.vibrate = new long[] { 100, 250, 100, 500};        
    nm.notify(notifID, notif);

    //Destroy the activity/notification.
    finish();
} 
```

}

有谁知道我在这里做错了什么？几天来我一直试图弄清楚这个问题，这让我发疯了。当他们有不同的名字并在不同的时间响起时，我只需要 2 个或更多的提醒来共存。同样，当我的应用程序只发出一个通知时，一切都运行良好。仅当我在通知抽屉中收到一个未触及的通知并且另一个尝试进入时，它才起作用。我猜我的 notifID 有问题，但我不知道它可能是什么。感谢你的帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:39:32.073

好的，所以我终于想通了！我的解决方案可能不适用于每个人的特定应用程序类型，但如果您遇到同样的问题，它应该可以为你们指明正确的方向。我从数据库中检索每个提醒的数据，因此我只需将通知 ID 设置为数据库中的主键。每个提醒都有自己唯一的主键，因此使用该键也会给我一个唯一的通知 ID！:D

非常感谢所有帮助我指出正确方向的人。:)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:13:02.797

将 uniqueID 声明为静态，并且每次触发意图时都必须增加 uniqueID..

在您的情况下，notifID 应该在触发意图后增加..

```
Intent intent = new Intent(this, ViewLocalReminders.class);
startActivity(intent);
notifID++ 
```

试试这个。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T05:42:41.620

```
public void onCreate() {

                // TODO Auto-generated method stub
                 notifyServiceReceiver = new NotifyServiceReceiver();
                 super.onCreate();
                 }

                 @Override
                 public int onStartCommand(Intent intent, int flags, int startId) {

                 // TODO Auto-generated method stub

                MY_NOTIFICATION_ID = intent.getExtras().getInt("UNIQUE");

                 IntentFilter intentFilter = new IntentFilter();
                 intentFilter.addAction(ACTION);
                 registerReceiver(notifyServiceReceiver, intentFilter);

                 // Send Notification
                 notificationManager = (NotificationManager)getSystemService(Context.NOTIFICATION_SERVICE);
                 myNotification = new Notification(R.drawable.app_icon,"Notification!",System.currentTimeMillis());
                 Context context = getApplicationContext();
                 String notificationTitle = "My App";
                 String notificationText = ""+TEXT;
                 Intent myIntent = new Intent(getApplicationContext(), NotesOnRollAppActivity.class);
                 PendingIntent pendingIntent= PendingIntent.getActivity(getBaseContext(),MY_NOTIFICATION_ID, myIntent,Intent.FLAG_ACTIVITY_NEW_TASK);
                // myNotification.defaults |= Notification.DEFAULT_SOUND;
                /* myNotification.sound = Uri.parse("android.resource://com.project.temp"+R.raw.femaleaud);*/

                     myNotification.sound = Uri.parse("android.resource://com.project.temp/"+ R.raw.femaleaud_converted);   

                 myNotification.flags |= Notification.FLAG_AUTO_CANCEL;
                 myNotification.setLatestEventInfo(context, notificationTitle,notificationText,pendingIntent);
                 notificationManager.notify(MY_NOTIFICATION_ID, myNotification);

                 return super.onStartCommand(intent, flags, startId);
        } 
```

这是我使用的工作代码。希望你能得到它。。*

# group-by - SQL Query Group by Foreign key 请问如何？

> ID：12559071
> 
> 赞同：2
> 
> 时间：2012-09-24T05:01:16.683
> 
> 标签：group-by, sql-server-2008-r2, foreign-keys, key

我的数据库中有两个这样的表：

```
Genre: Horror, Romance, Commedy, 
Film: film1, film2, film3,film4,film5,film6 
```

在 Film 表中，我有一个外键，它连接到 Genre 表的主键。这是我的问题：

我想获取所有电影并按类型分组并显示在数据列表中，查询应该是什么？

我想要的结果是这样的：

```
Commedy: film5, film6

Horror: film1, film 2

Romance: film3, film4 
```

现在我使用这个查询：

```
Select genre,film
from Genre
inner join film on film.genrID=genre.genreID
order by genre,film ASC 
```

我得到了这个结果：

```
Horror: film1

Horror: film2

Romance: film3...

... 
```

我想按类型对电影进行分组。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T06:01:40.540

SQL Server 2008：

```
SELECT um.genre,
                 CONVERT(varchar(1000),  stuff(  
                          (SELECT   
                              ', ' +  film 
                              FROM tbl_Film p2  
                              WHERE p2.genreid=um.id  
                              ORDER BY film  
                              FOR XML PATH('')  
                           ) 
                           ,1,2, ''  
                       ))AS film

               FROM tbl_Film p1   
               inner join tbl_Genre um on um.id=p1.genreid   
              GROUP BY    
              um.id,um.genre 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:35:24.123

MySQL：

```
Select genre, group_concat(film) films
    from Genre
    inner join film on film.genrID=genre.genreID
    group by Genre.genreID, genre
    order by genre,films ASC 
```

甲骨文：

```
Select genre, wm_concat(film) films
    from Genre
    inner join film on film.genrID=genre.genreID
    group by genrID, genre
    order by genre,films ASC 
```

我没有要测试的 MS SQL Server，但这必须有效：

```
select a.genre, SUBSTRING(d.Films,1, LEN(d.Films) - 1) FilmList
from 
  (
    SELECT genrID,genre
    FROM Genre
  ) a
CROSS APPLY
  (
    SELECT [film] + ', ' 
    FROM (
      Select genrID,film
      from Genre
      inner join film on film.genrID=genre.genreID
    ) AS B 
    WHERE A.genrID = B.genrID 
    FOR XML PATH('')
  ) D (Films) 
```

# crystal-reports - 为什么 Crystal Reports 做细节部分的笛卡尔积？

> ID：12559075
> 
> 赞同：0
> 
> 时间：2012-09-24T05:01:39.333
> 
> 标签：crystal-reports

假设我有下面的 3 个表，并在 UserID 字段上创建从表 1 到表 2 以及从表 1 到表 3 的连接。如果我创建两个详细信息部分，一个带有表 2 数据，第二个带有表 3 数据，水晶将产生 8 行结果，就好像它正在做表 2 和 3 的笛卡尔积一样。我希望它只输出 4 行。解决方案是使用子报告，但我想知道为什么要这样做？

表格1

```
UserID Name
1      'John Smith' 
```

表 2

```
GameID UserID Score
1      1      50
2      1      60 
```

表3

```
CarID  UserID  Make
1      1       Acura
2      1       Tata 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:26:19.763

Crystal 这样做是因为其他 2 张桌子（游戏、汽车）不相关。userid 字段向每个表发送信息请求。然后两个表都将信息发回给它，水晶显示检索到的信息。如果您在报告中添加了诸如 max(carid) 和 max(gameid) 之类的标准，您将得到两者的单一答案，您也可以尝试仅使用 max(carid) 来查看是否仍会获得所有游戏 ID（这取决于关于如何创建连接）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T11:54:24.873

根据您加入表格的方式获得四行（[Table 2] 中的 2 行 X [Table 3] 中的 2 行）

因为您有两个“详细信息”部分，所以您又得到了四行。

Games 和 Cars 没有逻辑关系，因此您应该将这些表之一移动到相关的子报表中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T05:20:41.913

您可以在每个详细信息部分使用一个子报告，并在每个子报告中使用以下两个查询

选择 USERID, Name ,Score, Make FROM [Table 1] inner join [Table 2] on [Table 1].userID= [Table 2].USERID

选择 USERID, Name , Make FROM inner join [Table 3] on [Table 1].userID= [Table 3].USERID

# css - css div 浮动

> ID：12559077
> 
> 赞同：-4
> 
> 时间：2012-09-24T05:02:01.123
> 
> 标签：css, html

我`<div>`在一个容器中有两个标签。其中一个向右浮动，另一个向左浮动。我正在尝试将它们排成一行，但问题是右侧的位于左侧的下方，并且根本不浮动。

[http://tinkerbin.com/QuHxRQXO](http://tinkerbin.com/QuHxRQXO)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:34:01.727

检查这个[小提琴](http://jsfiddle.net/venkateshwar/aeFx3/)。

它不是在正确的浮动，因为您正在为您`div`的 's 提供填充，这使您的`.rightside`div 降到最低。而不是给`div`' 填充填充给内部元素。

而不是给`px`你`div`的给百分比。它可以帮助您理解模式。

我从您的 div 中删除了填充，并向内部元素添加了填充，如下所示。

```
h4,p{padding:5px;} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:28:52.140

```
It  is working fine. I have checked except.

change
<font color= "#FFFFFF"><b>Site Contents</b>
 to
<font color= "#FFFFFF"><b>Site Contents</b></font>

<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
<title> new document </title>
<style type="text/css">
.subcontent{width:750px;}
.menu {
background-color :#FFD700;
float: left;
padding-bottom: 100px;
width:170px;
font-family: Verdana;
font-size: 12px;
}
.rightside {
background-color: #FFF;
float:left;
width:540;
padding-left:10px;
}
</style>
</head>
<body>
<div class="subcontent">
<div class="menu">
    <div class="submenu"  style= "background-color:#A80000; text-align:center; width:120px; padding:10px"> 
        <font color= "#FFFFFF"><b>Site Contents</b></font>
    </div>

    <h4><b>Virtual Tour</b></h4>
    <P>Explore the lab to know the insights of the new world!</p>
    <h4><b>Experiments</b></h4>
    <P>There is lot more to it that would fascinate you.</P>
    <h4>Lab History</h4>
    <P> Find out the need to make it underground.</P>
 </div>

 <div class = "rightside">
      <div id="separator" style="background-color: #A80000; height: 20px">
      </div>
          <p id="para1"> Located 2,341 feet beneath the surface in an old iron mine, the lab is deep enough that particle physics experiments see less than 100,00 times the cosmic radiation than on the surface, allowing sensitive searches for exotic particles like neutrinos and dark matter.</P>
     </div>
  </div>
 </body>
</html> 
```

# android - 如果您有 Bitmap ArrayList，如何在 Android 中获取位图文件名

> ID：12559080
> 
> 赞同：0
> 
> 时间：2012-09-24T05:02:05.720
> 
> 标签：android, bitmap, arraylist, drawable

我有一个位图的 ArrayList。我想获取任何位图的位图文件的名称，比如说

```
ArrayListName.get(5); 
```

我已经搜索过，但找不到任何解决我的问题的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:05:21.323

> 我想获取任何位图的位图文件的名称

AFAIK 无法从位图中获取位图的名称。在将位图添加到 ArrayList 时，您必须明确存储位图文件的名称。然后您可以根据存储的具有相似索引的位图名称列表获取位图名称。

# c# - C# - 从 .net 4.0 的下拉列表中删除重复的项目

> ID：12559081
> 
> 赞同：0
> 
> 时间：2012-09-24T05:02:20.820
> 
> 标签：c#, linq, drop-down-menu

.net framework 4.0 中遇到的问题

我目前有 2 个下拉列表，其中一个用于月份选择，另一个用于年份选择。

他们的两个数据源都是来自 SQL 的数据表，它返回以年和月为列的行。然后我使用 datatextfield 和 datavaluefield 来指定要使用的列。例子：

```
string sql = "select.... group by...";//the query

DataTable dtMonthYear = db.getDataTable(sql); //got the datatable

ddlMonth.DataSource = dtMonthYear;
ddlMonth.DataTextField = "Month";
ddlMonth.DataValueField = "Month";
ddlMonth.DataBind();

ddlYear.DataSource = dtMonthYear;
ddlMonth.DataTextField = "Year";
ddlMonth.DataValueField = "Year";
ddlYear.DataBind(); 
```

正因为如此，这一年会有重复的项目，我希望消除重复的项目。

我发现 linq 可以做到这一点，但不幸的是我的框架只到 4.0 并且不能使用 datarowextension。这是我得到的链接：[LINQ query on a DataTable](https://stackoverflow.com/questions/10855/linq-query-on-a-datatable)

有人有其他想法吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:21:04.803

您可以[`Linq-To-DataSet`](http://msdn.microsoft.com/de-de/library/vstudio/bb386977%28v=vs.90%29.aspx)在 .NET 4 中使用（甚至在 3.5 中）：

```
DataTable years = dtMonthYear.AsEnumerable()
                  .GroupBy(r => r.Field<int>("Year"))
                  .Select( g => g.OrderBy(r => r.Field<int>("Month")).First())
                  .CopyToDataTable(); 
```

请注意，您需要添加`using System.Linq;`

# asp.net-mvc - Telerik kendo 是否与 MVC 中的 ImageResizer 一起使用？

> ID：12559082
> 
> 赞同：0
> 
> 时间：2012-09-24T05:02:47.320
> 
> 标签：asp.net-mvc, kendo-ui, imageresizer

在我的 MVC 项目中成功使用 kendo 有一段时间了，只是决定也添加 ImageResizer。一旦我通过 nuget 安装了 ImageResizer 以及它的 MvcRoutingShim，它就破坏了我的剑道菜单。这是一个相当基本的菜单：

```
Html.Kendo().Menu().Name("Menu").BindTo(Html.MvcSiteMap(provName).Provider.RootNode.ChildNodes,
                  mappings => mappings.For<MvcSiteMapNode>(binding => binding
                      .ItemDataBound((item, node) =>
                      { 
                              item.ActionName = node.Action;
                              item.ControllerName = node.Controller;
                              item.RouteValues.Add("area", node.Area);
                      })
                          .Children(node => node.ChildNodes)))
              .Render(); 
```

但是当我尝试跑步时，我得到了一个

```
The method or operation is not implemented 
```

例外，具有以下堆栈跟踪：

```
at System.Web.HttpContextBase.get_Items()
   at ImageResizer.Plugins.MvcRoutingShim.StopRoutingRoute.GetRouteData(HttpContextBase httpContext)
   at System.Web.Routing.RouteCollection.GetRouteData(HttpContextBase httpContext)
   at Kendo.Mvc.Infrastructure.Implementation.RouteDataCache.RouteDataFactory(String url)
   at Kendo.Mvc.Infrastructure.Implementation.RouteDataCache.<GetRouteData>c__AnonStorey1B.<>m__26()
   at Kendo.Mvc.Infrastructure.Implementation.NoCache.Get[T](String key, Func`1 defaultValueFactory)
   at Kendo.Mvc.Infrastructure.Implementation.RouteDataCache.GetRouteData(String key, String url)
   at Kendo.Mvc.Infrastructure.Implementation.AuthorizationContextCache.GetAuthorizationContext(RequestContext request, String controllerName, String actionName, RouteValueDictionary routeValues)
   at Kendo.Mvc.Infrastructure.Implementation.ControllerAuthorization.IsAccessibleToUser(RequestContext requestContext, String controllerName, String actionName, RouteValueDictionary routeValues)
   at Kendo.Mvc.Infrastructure.Implementation.NavigationItemAuthorization.IsAccessibleToUser(RequestContext requestContext, INavigatable navigationItem)
   at Kendo.Mvc.UI.NavigatableExtensions.IsAccessible(INavigatable item, INavigationItemAuthorization authorization, ViewContext viewContext)
   at Kendo.Mvc.UI.NavigationItemContainerExtensions.WriteItem[TComponent,TItem](TItem item, TComponent component, IHtmlNode parentTag, INavigationComponentHtmlBuilder`1 builder)
   at Kendo.Mvc.UI.Menu.<WriteHtml>c__AnonStorey71.<>m__1FC(MenuItem item)
   at Kendo.Mvc.Extensions.EnumerableExtensions.Each[T](IEnumerable`1 instance, Action`1 action)
   at Kendo.Mvc.UI.Menu.WriteHtml(HtmlTextWriter writer)
   at Kendo.Mvc.UI.WidgetBase.Render()
   at Kendo.Mvc.UI.Fluent.WidgetBuilderBase`2.Render()
   at ASP._Page_Views_Shared__Layout_cshtml.Execute() in c:\Code\StandardProject\4.4.3.0\Server\MVC\CoBRAMVC4Portal\Views\Shared\_Layout.cshtml:line 60
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy()
   at System.Web.Mvc.WebViewPage.ExecutePageHierarchy()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.WebPages.WebPageBase.<>c__DisplayClass7.<RenderPageCore>b__6(TextWriter writer)
   at System.Web.WebPages.HelperResult.WriteTo(TextWriter writer)
   at System.Web.WebPages.WebPageBase.Write(HelperResult result)
   at System.Web.WebPages.WebPageBase.RenderSurrounding(String partialViewName, Action`1 body)
   at System.Web.WebPages.WebPageBase.PopContext()
   at System.Web.WebPages.WebPageBase.ExecutePageHierarchy(WebPageContext pageContext, TextWriter writer, WebPageRenderingBase startPage)
   at System.Web.Mvc.RazorView.RenderView(ViewContext viewContext, TextWriter writer, Object instance)
   at System.Web.Mvc.BuildManagerCompiledView.Render(ViewContext viewContext, TextWriter writer)
   at System.Web.Mvc.ViewResultBase.ExecuteResult(ControllerContext context)
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResult(ControllerContext controllerContext, ActionResult actionResult)
   at System.Web.Mvc.ControllerActionInvoker.<>c__DisplayClass1a.<InvokeActionResultWithFilters>b__17()
   at System.Web.Mvc.ControllerActionInvoker.InvokeActionResultFilter(IResultFilter filter, ResultExecutingContext preContext, Func`1 continuation) 
```

有没有其他人让剑道与 imageresizer 一起工作？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:26:40.637

似乎 Kendo 正在从 MvcRoutingShim 请求路由数据，但提供了一个非功能性的 HttpContextBase 实例。

MvcRoutingShim 期望 context.Items 可以访问，但它在这里抛出了 NotImplementedException。

该文件位于 /Core.Mvc/StopRoutingRoute.cs 中。

```
 public override RouteData GetRouteData(System.Web.HttpContextBase httpContext) {
        if (httpContext.Items[_contextItemsFlag] != null)
            return new RouteData(this, new StopRoutingHandler());
        return null;
    } 
```

将其更改为

```
 public override RouteData GetRouteData(System.Web.HttpContextBase httpContext) {
        try{
           if (httpContext.Items[_contextItemsFlag] != null)
                return new RouteData(this, new StopRoutingHandler());
        }catch(NotImplementedException){}

        return null;
    } 
```

应该在不引入副作用的情况下解决问题。不幸的是，HttpContextBase 没有提供一种在没有 try/catch 的情况下“避免”NotImplementedException 的方法。*类型比较会很脆弱并且会破坏单元测试，尽管如果 httpContext没有*被子类化，额外的“快速退出路径”可能会在 99% 的场景中加速它。

# php - 您的 SQL 语法有错误

> ID：12559084
> 
> 赞同：2
> 
> 时间：2012-09-24T05:03:40.383
> 
> 标签：php, mysql, syntax

想知道是否有人可以在此找到错误：

```
 $sqlinsert = "LOAD DATA LOCAL INFILE 
\'$target_path\' INTO TABLE 'db_usergroup' 
FIELDS TERMINATED BY \',\' ENCLOSED BY \'\"\' ESCAPED BY \'\\\\\' 
LINES TERMINATED BY \'\\r\\n\'"; 
```

`$target_path`其确切名称略有不同，但示例如下：

```
temp/24_09_12_16_57_27_invoice_example.csv 
```

我收到此错误：

```
 An error occurred. The file could not be imported. 
Error with MySQL Query: You have an error in your SQL syntax; 
check the manual that corresponds to your MySQL server version 
for the right syntax to use near 
'\'temp/24_09_12_16_57_27_invoice_example.csv' INTO TABLE 
'db_usergroup' FIELDS T' at line 1 
```

非常感谢所有帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:11:32.250

为什么要转义目标路径中的引号？我不认为这是必要的。

您通常可以通过检查 之后的前几个字符来准确判断错误是什么`for the right syntax to use near`，这似乎表明反斜杠有问题。

尝试：

```
$sqlinsert = "LOAD DATA LOCAL INFILE '$target_path' INTO TABLE ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:23:32.020

`'db_usergroup'`是无效的。单引号将该`'`表名转换为一个字符串，MySQL 将使用该字符串。您不需要引用/转义表或字段名称，除非它们是保留字。为此，您使用反引号，例如

```
LOAD DATA ... `db_usergroup` ...
              ^--          ^-- 
```

* * *

跟进：

```
$sqlinsert = <<<EOL
LOAD DATA LOCAL INFILE '$target_path'
INTO TABLE db_usergroup
FIELDS TERMINATED BY ','
ENCLOSED BY '"'
ESCAPED BY '\\' 
LINES TERMINATED BY '\r\n'
EOL; 
```

# php - PHP CURL POST 字段

> ID：12559087
> 
> 赞同：0
> 
> 时间：2012-09-24T05:03:48.677
> 
> 标签：php, zend-framework

所以这就是问题所在。我正在尝试使用 PHP CURL 帖子调用我的 api，就像这样

```
<?php
        $ch = curl_init();
        $data = array('page' => $pageid);
        $data = json_encode($data);

        $fields = 'data=' . urlencode($data);

        /*echo $fields; ## data=%7B%22page%22%3A%222%22%7D */

        curl_setopt($ch, CURLOPT_URL, 'http://www.myurl.com/api/gallery');
        curl_setopt($ch, CURLOPT_POST, 1);
        curl_setopt($ch, CURLOPT_POSTFIELDS, $fields);
        curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);

        $result =curl_exec($ch);

        $products=json_decode($result,true);
?> 
```

在我使用zend框架的API中，我收到了这样的数据

```
<?php
        $data = json_decode($this->_getParam('data',''), true);
        $query = array();
        $query['status'] = '1';
        $query['pid']   = (isset($data['pid']))? $data['pid'] : '';
        $query['search'] = (isset($data['search']))? $data['search'] : '';
        $query['orderby'] = (isset($data['sort']))? $data['sort'] : 'latest';
        $query['page'] = (isset($data['page']))? $data['page'] : '1';
        $query['pagelimit'] = (isset($data['pagelimit']))? $data['pagelimit'] : '2';
?> 
```

当我检查查询中的值时，它没有收到使用 CURL 传递的“页面”值。我做错了什么吗？

干杯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:50:18.697

首先，您应该检查正确返回 POST 变量的 _getParam 方法。

然后，请注意，您应该在一个真正的 json 字符串上使用 json_decode！您应该解码 url 数据变量（$this->_getParam('data','') 的结果），然后将其传递给 json_decode！

我假设您的 _getParam 方法正常工作，然后：

```
$data = json_decode(urldecode($this->_getParam('data','')), true);
$query = array();
.
.
. 
```

# macos - 下拉菜单选项的背景颜色在 Safari、Chrome + MAC 中不起作用

> ID：12559093
> 
> 赞同：4
> 
> 时间：2012-09-24T05:04:20.540
> 
> 标签：macos, drop-down-menu, safari, cross-browser, osx-leopard

我有一个下拉框，我根据某些条件将选项的背景颜色设置为灰色。问题是它在 Windows 机器上几乎所有浏览器都可以正常工作，但在 MAC OS 上的 Safari 和 Chrome 中却不能正常工作。

我使用颜色作为：

*   颜色名称：`Gray`,
*   十六进制颜色代码：`#CCCCCC`和
*   但所有三个都`rgb(204,204,204)` 不起作用。

我做了护目镜，发现 MAC 中的 safari 存在一些问题。我不知道如何解决这个问题。mac 论坛上有一个未回复的公开帖子：

[http://www.mac-forums.com/forums/web-design-hosting/144101-drop-down-background-color-mac-safari-not-working.html](http://www.mac-forums.com/forums/web-design-hosting/144101-drop-down-background-color-mac-safari-not-working.html)。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T05:40:41.537

正如您所发现的，在某些浏览器和操作系统下，下拉菜单被激活时出现的`<select>`菜单无法设置样式。您将需要使用此控件的操作系统默认外观。

# youtube-api - YouTube 视频管理

> ID：12559096
> 
> 赞同：1
> 
> 时间：2012-09-24T05:04:48.947
> 
> 标签：youtube-api

我想建立一种有效的方式来管理我们的 YT 频道（600 多个视频）。我正在使用 YT API 来检索数据，使用此页面： http: [//gdata.youtube.com/demo/index.html#Response](http://gdata.youtube.com/demo/index.html#Response)

问题是它似乎没有给我标签（关键字）、状态（未列出/私有/公共）和注释。

到目前为止，我已经设法将 XML 文件导入 Excel 并开始使用数据透视表，但如果有人可以帮助我获取这些数据，或者将我指向可以帮助管理大型 YouTube 频道的第三方工具，那就是伟大的。

谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:38:30.833

[公开回复中不再提供](http://apiblog.youtube.com/2012/08/video-tags-just-for-uploaders.html)关键字。如果您需要在您的帐户中检索视频的关键字，您必须使用拥有这些视频的帐户的凭据进行[适当授权的请求。](https://developers.google.com/youtube/2.0/developers_guide_protocol_authentication)

公开回复中仅返回公开视频（不足为奇）。相同类型的授权请求将返回私有视频和不公开视频。

注释不会通过 Data API 暴露在任何地方。

当您对视频提要提出授权请求时，请确保您为用户“默认”请求[上传提要](https://developers.google.com/youtube/2.0/developers_guide_protocol_video_feeds#User_Uploaded_Videos)，而不是进行搜索并使用 author=ACCOUNT 参数，这样[不会为您提供所需的信息](http://apiblog.youtube.com/2012/03/keeping-things-fresh.html).

# android - 添加第二个表时数据库操纵器的问题

> ID：12559103
> 
> 赞同：0
> 
> 时间：2012-09-24T05:05:37.160
> 
> 标签：android, sqlite

这个数据操纵器允许我： 1\. 创建表角色（“人”），我可以毫无问题地添加病人和医生。

```
package com.example.citas.medicas;

import android.content.Context;
import android.database.Cursor;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteStatement;
import java.util.ArrayList;
import java.util.List;

public class DataManipulator
{
private static final  String DATABASE_NAME = "mydatabase.db";
private static final int DATABASE_VERSION = 1;
static final String TABLE_NAME = "Personas";
private static Context context;
static SQLiteDatabase db;
private SQLiteStatement insertStmt;
private static final String INSERT = "insert into " + TABLE_NAME + " (nombre,cedula,fechanacimiento,telefonocasa,telefonomovil,tipo) values (?,?,?,?,?,?)";

public DataManipulator(Context context) {
    DataManipulator.context = context;
    OpenHelper openHelper = new OpenHelper(DataManipulator.context);
    DataManipulator.db = openHelper.getWritableDatabase();
    this.insertStmt = DataManipulator.db.compileStatement(INSERT);
}

public long insert(String nombre,String cedula,String fechanacimiento,String telefonocasa,String telefonomovil,String tipo) {
    this.insertStmt.bindString(1, nombre);
    this.insertStmt.bindString(2, cedula);
    this.insertStmt.bindString(3, fechanacimiento);
    this.insertStmt.bindString(4, telefonocasa);
    this.insertStmt.bindString(5, telefonomovil);
    this.insertStmt.bindString(6, tipo);
    return this.insertStmt.executeInsert();
}

public void deleteAll() {
    db.delete(TABLE_NAME, null, null);
}

public List<String[]> selectAll()
{
    List<String[]> list = new ArrayList<String[]>();
    Cursor cursor = db.query(TABLE_NAME, new String[] { "id","nombre","cedula","fechanacimiento","telefonocasa","telefonomovil","tipo" }, null, null, null, null, "name asc"); 
    int x=0;
    if (cursor.moveToFirst()) {
       do {
            String[] b1=new String[]{cursor.getString(0),cursor.getString(1),cursor.getString(2),
            cursor.getString(3),cursor.getString(4),cursor.getString(5),cursor.getString(6)};
            list.add(b1);
            x=x+1;
       } while (cursor.moveToNext());
    }
    if (cursor != null && !cursor.isClosed()) {
       cursor.close();
    } 
    cursor.close();
    return list;
}

public void delete(int rowId) {
    db.delete(TABLE_NAME, null, null); 
}

private static class OpenHelper extends SQLiteOpenHelper {
    OpenHelper(Context context) {
         super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }
    @Override
    public void onCreate(SQLiteDatabase db) {
         db.execSQL("CREATE TABLE " + TABLE_NAME + " (id INTEGER PRIMARY KEY, nombre TEXT, cedula TEXT, fechanacimiento TEXT, telefonocasa TEXT, telefonomovil TEXT, tipo TEXT)");
    }
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) 
    {
         db.execSQL("DROP TABLE IF EXISTS " + TABLE_NAME);
         onCreate(db);
    }
}
} 
```

但是当我使用第二个“datamanipulator2”（从第一个数据操纵器复制粘贴）时，它应该创建表 Citas（“约会”），所以我可以添加一个约会，但它给出了一个错误说：

```
09-23 22:40:57.202: E/AndroidRuntime(889): android.database.sqlite.SQLiteException: no such table: Citas: , while compiling: insert into Citas (nombrepaciente,fechacita,horacita,nombredoctor) values (?,?,?,?) 
```

我注意到如果我将数据库版本（在“datamanipulator2”中）更改为 2，我可以解决这个问题

```
DATABASE_VERSION = 2; 
```

但我想知道：A）另一种避免此错误的方法，我的意思是，我想将两个数据操纵器都保留为“DATABASE_VERSION = 1;” 总的来说，我认为这对我来说听起来更好，除非完全有必要“datamanipulator”的值为 1 而“datamanipulator2”的值为 2。B）为什么会发生这种情况？这是正常行为吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:16:58.660

如果查看 SQLiteOpenHelper 类，onCreate 仅在第一次创建数据库时调用。如果数据库的版本发生更改，则调用 onUpgrade。版本的更改正是为了这个目的——提供了一个钩子来创建额外的表等。

因此，有 2 个选择： 1\. 在重新安装应用程序之前完全删除数据库，以便在版本 1 中创建两个表。 2\. 在添加更多表时不断增加版本。

在开发周期中，我建议使用选项 1。

希望这可以帮助...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:37:11.873

两个表的主键列不能具有相同的列名。在您的情况下，两个表都具有相同的列名`id INTEGER PRIMARY KEY`。尝试这样的事情：

```
@Override
public void onCreate(SQLiteDatabase db) 
{
    db.execSQL(create_table_sql);
} 
```

在创建第二个表之前，用不同的主键列名（例如：）更改变量“create_table_sql” `id_2 INTEGER PRIMARY KEY`。

# java - 用户输入长度的异常处理

> ID：12559104
> 
> 赞同：1
> 
> 时间：2012-09-24T05:05:37.280
> 
> 标签：java, exception, exception-handling

我有一个小型 ATM 程序，我正在使用异常处理。我在我的程序开始时有一个 try catch，它将把它发送到异常处理 - 在程序的底部。

假设用户输入一个 5 位数字......例如：12345。然后它会检查号码，我让它检查用户号码是否 < 5 然后发送错误，但我想要它做的是检查是否长度 < 或 > 大于 5 然后发送错误。这是我现在的程序代码...

```
import java.util.ArrayList;
import java.util.Scanner;

    public class BankMain
    {
    private double availableBal =80;
    private double totalBal =100;
    private double availableBal2 =480;
    private double totalBal2 =500;
    private double availableBal3 =80;
    private double totalBal3 =100;
    ArrayList<Integer> cardNum = new ArrayList<Integer>();
    static Scanner input = new Scanner(System.in);

    private String error;           //String the error from the exception
    {
        error = "error";
    }

    public void cardNumbers(){

            Scanner cards = new Scanner(System.in);
            Scanner input = new Scanner(System.in);
            Scanner keyboard = new Scanner(System.in);

            try{

            System.out.println("Please select a 5 digit card number");

            cardNum.add(input.nextInt());
            checkNumber();

            }

            catch(invalidNumber err){

                System.out.println("Caught Error: " + err.getError());
            }

            System.out.println("Thank you! You're card number is " +cardNum);

            System.out.println("Type 'c' to go back to main menu.");
            String value = keyboard.next();

            if(value.equalsIgnoreCase("c")){
                menu();

    }

    else if (!keyboard.equals('c')){

        System.out.println("Invalid Entry!");

    }

}

    public void menu(){

    System.out.println("ATM Menu:");
    System.out.println();
    System.out.println("1 = Create Account");
    System.out.println("2 = Account Login");
    System.out.println("3 = Exit ATM");
    query();
                }

        public void startAtm()
        {
            menu();

        }

        public void drawMainMenu()
        {

            AccountMain main3 = new AccountMain();
            int selection;

            System.out.println("\nATM main menu:");
            System.out.println("1 - View account balance");
            System.out.println("2 - Withdraw funds");
            System.out.println("3 - Add funds");
            System.out.println("4 - Back to Account Menu");
            System.out.println("5 - Terminate transaction");
            System.out.print("Choice: ");
            selection =input.nextInt();

            switch(selection)
            {
            case 1:
                viewAccountInfo();
                break;
            case 2:
                withdraw();
                break;
            case 3:
                addFunds();
                break;
            case 4:
                AccountMain.selectAccount();
                break;
            case 5:
                System.out.println("Thank you for using this ATM!!! goodbye");
            }
        }

        public void viewAccountInfo()
        {
            System.out.println("Account Information:");
            System.out.println("\t--Total balance: $"+totalBal);
            System.out.println("\t--Available balance: $"+availableBal);
            drawMainMenu();
        }

        public void viewAccountInfo2()
        {
            System.out.println("Account Information:");
            System.out.println("\t--Total balance: $"+totalBal2);
            System.out.println("\t--Available balance: $"+availableBal2);
            drawMainMenu();
        }

        public void deposit(int depAmount)
        {
            System.out.println("\n***Please insert your money now...***");
            totalBal =totalBal +depAmount;
            availableBal =availableBal +depAmount;
        }

        public void checkNsf(int withdrawAmount)
        {
            if(totalBal -withdrawAmount < 0)
                System.out.println("\n***ERROR!!! Insufficient funds in you accout***");
            else
            {
                totalBal =totalBal -withdrawAmount;
                availableBal =availableBal -withdrawAmount;
                System.out.println("\n***Please take your money now...***");
                }
        }

        public void addFunds()
        {
            int addSelection;

            System.out.println("Deposit funds:");
            System.out.println("1 - $20");
            System.out.println("2 - $40");
            System.out.println("3 - $60");
            System.out.println("4 - $100");
            System.out.println("5 - Back to main menu");
            System.out.print("Choice: ");
            addSelection =input.nextInt();

            switch(addSelection)
            {
            case 1:
                deposit(20);
                drawMainMenu();
                break;
            case 2:
                deposit(40);
                drawMainMenu();
                break;
            case 3:
                deposit(60);
                drawMainMenu();
                break;
            case 4:
                deposit(100);
                drawMainMenu();
                break;
            case 5:
                drawMainMenu();
                break;
            }
        }

        public void withdraw()
        {
            int withdrawSelection;

            System.out.println("Withdraw money:");
            System.out.println("1 - $20");
            System.out.println("2 - $40");
            System.out.println("3 - $60");
            System.out.println("4 - $100");
            System.out.println("5 - Back to main menu");
            System.out.print("Choice: ");
            withdrawSelection =input.nextInt();

            switch(withdrawSelection)
            {
            case 1:
                checkNsf(20);
                drawMainMenu();
                break;
            case 2:
                checkNsf(40);
                drawMainMenu();
                break;
            case 3:
                checkNsf(60);
                drawMainMenu();
                break;
            case 4:
                checkNsf(100);
                drawMainMenu();
                break;
            case 5:
                drawMainMenu();
                break;
            }
        }

public void query(){

    Scanner keyboard = new Scanner(System.in);
    double input = keyboard.nextInt();  

    if (input == 2){

        BankMainPart2 main2 = new BankMainPart2();

        System.out.println("Please enter your 5 digit card number.");
         BankMainPart2.loginCard(cardNum);

    }
    else if (input == 1){

        cardNumbers();

    }

    else if (input == 3){
        System.out.println("Thank you, have a nice day!");
        System.exit(0);

    }

}

public void checkingMenu()
{

    AccountMain main3 = new AccountMain();
    int selection;

    System.out.println("\nATM main menu:");
    System.out.println("1 - View account balance");
    System.out.println("2 - Withdraw funds");
    System.out.println("3 - Add funds");
    System.out.println("4 - Back to Account Menu");
    System.out.println("5 - Terminate transaction");
    System.out.print("Choice: ");
    selection =input.nextInt();

    switch(selection)
    {
    case 1:
        viewAccountInfo2();
        break;
    case 2:
        withdraw();
        break;
    case 3:
        addFunds();
        break;
    case 4:
        AccountMain.selectAccount();
        break;
    case 5:
        System.out.println("Thank you for using this ATM!!! goodbye");
    }
}

private static void checkNumber() throws invalidNumber              //run the check activation exception
{
    if(input.nextInt() == 5)
  {
        System.out.println("Works!");
  }
    else{

     throw new invalidNumber("invalid number");
 }  
}

    public static void main(String args[])
    {
        BankMain myAtm = new BankMain();
        myAtm.startAtm();
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:08:47.317

将数字转换为字符串，然后用于`length()`检查位数

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T05:20:04.567

```
 System.out.println("Please select a 5 digit card number");

        String s=input.next();

        //Here check the nu. digits by using length()

        cardNum.add(s);

        checkNumber(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T05:13:36.550

事实上，你的程序应该挂起（你没有在你的问题中指定这个，所以我的假设可能不正确）。您调用`input.nextInt()`了两次，这将使您的程序期望您的用户提供两组数字。

为了解决这个问题，我建议您首先使用该`nextLine()`方法将用户的输入作为字符串读取。然后，您将执行以下操作：

```
String userInput = input.nextLine().trim();
checkNumber(userInput);
cardNum.add(Integer.parseInt(userInput); 
```

此外，`checkNumber`由于我们现在正在阅读整行，因此将失败，因此您必须进行以下更改：

*   您将不得不遍历您的字符并使用[`isDigit`](http://docs.oracle.com/javase/7/docs/api/java/lang/Character.html#isDigit%28char%29)来确保您的每个字符都是数字 **或**

*   使用排序的正则表达式`^\\d{5}$`以确保字符串完全由 5 个数字组成。对于正则表达式，您可以查看[本](http://www.vogella.com/articles/JavaRegularExpressions/article.html)教程以使您走上正轨。如果您是初学者，这可能看起来有点不知所措，但*通常*建议使用正则表达式对字符串进行数据验证。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T05:13:15.270

您需要获取整个代码，然后检查它的长度是否 == 5，您需要使用以下方法将输入转换为字符串：

```
String.valueOf(int i) 
```

或者

```
Integer.toString(int i) 
```

或者只是使用以下命令将其读取为字符串：

```
string givenCode = yourScan.next(); 
```

然后检查长度：

```
if (givenCode.length() == 5) 
```

# jquery - jQuery 过渡效果，如 Flash

> ID：12559106
> 
> 赞同：1
> 
> 时间：2012-09-24T05:05:55.553
> 
> 标签：jquery, jquery-effects

我已经查看了网页上的 jQuery 过渡效果，例如本网站[http://bit.ly/2eMkoB](http://bit.ly/2eMkoB)上的图像滑块 Flash，但在 jQuery 上找不到类似的过渡效果

如何在 jQuery 上复制这种从左到右箭头过渡效果的过渡？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:20:52.170

我希望这段代码可以帮助您并回答您的问题。

**HTML：**

```
<div id="background">
    <div id="transition">
       <div class="pointer"></div>
       <div class="behind-pointer"></div>
    </div>
</div>
<div style="clear:both"></div> 
```

**CSS：**

```
#transition {
  height : 100%;
  width : 100%;
}

.pointer {
  width : 0;
  height : 0;
  border-left: 70px solid transparent; /* Arrow width */
  float : left;
}

.behind-pointer {
  background-color : white; /* Color transition */
  height : 100%;
}

#background {
  height : 150px;
  width : 250px;
  background-color: black;
} 
```

**jQuery :**

```
$(document).ready(function(){
    var color = $("#transition .behind-pointer").css("background-color");
    var transition = $("#transition");
    var transition_pointer = $("#transition .pointer");
    var left_width = new Number(transition_pointer.css("border-left-width").replace("px", ""));
    var behind_pointer = $("#transition .behind-pointer");

    transition.css("width", (transition.width() + left_width) + "px");
    transition.css("position", "relative").css("left", "-" + left_width + "px");
    transition_pointer.css("border-bottom", transition.height()/2 + "px solid " + color)
      .css("border-top", $("#transition").height()/2 + "px solid "+ color);
    behind_pointer.css("margin-left", left_width + "px");

    var width = transition.width();
    transition.animate({
        left : width - left_width,
        width : 0
    }, 2000, function(){ transition.hide(); });
}); 
```

[这里](http://jsfiddle.net/charlesjourdan/NDm3y/6/)有一个 jsFiddle 例子

# javascript - 使用javascript使数字右对齐，其他数字左对齐

> ID：12559110
> 
> 赞同：0
> 
> 时间：2012-09-24T05:06:42.503
> 
> 标签：javascript, css, ruby-on-rails-3

我使用了这个 javascript 函数：

```
$(document).ready(function(){
    $("td").each(function() {
       if (parseInt($(this).text()) > 0) {
            $(this).css("text-align", "right");
        }
    });
}); 
```

这样，所有数字都右对齐。但我希望输入的字符串应该左对齐。我认为通过使用 NaN 是可能的，但我不知道如何使用它。有人可以告诉我使用 NaN 或其他功能的方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:10:03.423

你可以这样做：

```
$(document).ready(function(){
    $("td").each(function() {
       var item = $(this);
       if (item.text().match(/^-?\d+$/)) {
            item.css("text-align", "right");
        } else {
            item.css("text-align", "left");
        }
    });
}); 
```

工作示例：http: [//jsfiddle.net/jfriend00/MyqrG/](http://jsfiddle.net/jfriend00/MyqrG/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:34:41.890

为什么不能使用`typeof`运算符来确定数字和字符串之间的关系。

```
$( document ).ready( function() {
    $( "td" ).each( function() {
       var textVal = $( this ).text();
       var type = !isNaN(parseFloat(textVal)) && isFinite(textVal);

       if ( !type ) {
            $( this ).css( "text-align", "left" );
       } else if ( type ) {
            $( this ).css( "text-align", "right" );
       }
    });
}); 
```

希望能帮助到你。

# vba - 使用 Excel 检索网站 xml

> ID：12559111
> 
> 赞同：0
> 
> 时间：2012-09-24T05:07:05.287
> 
> 标签：vba, excel

在 Excel2003 中，我试图从雅虎财经中检索一些内容。

到目前为止，我有一个非常简单的子：

```
Public Sub test(BaseRange As Range)

    Dim xmlObject As New MSXML2.XMLHTTP60
    Dim xmlDoc As New MSXML2.DOMDocument

    With xmlObject
        Call .Open("GET", "http://biz.yahoo.com/research/earncal/20110923.html", False)
        Call .send
    End With

    With ActiveSheet.Range("F2")
        .Value = xmlObject.responseXML.XML
    End With

End Sub 
```

子执行没有错误，并且 xmlObject.responseText 似乎包含页面 html 文本，但 xmlObject.responseXml.XML 为空。除了 resonsetext 一切实际上都是空的。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T16:10:39.643

值得指出的是，已经有一个开源项目可以做到这一点： http: [//excel-dna.net/2011/04/28/financial-analytics-suite-finansu-made-with-excel-dna/](http://excel-dna.net/2011/04/28/financial-analytics-suite-finansu-made-with-excel-dna/)

我希望这对你有用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T03:58:42.347

如果服务器返回 XML 响应，则 responseXml 中只有内容。似乎您的 URL 返回 HTML 而不是 XML。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-08-17T15:15:47.893

这是我用于欧洲央行外汇汇率的。

```
Sub ecb_fx()
ActiveWorkbook.XMLIMPORT url:= _

        "https://www.ecb.europa.eu/stats/eurofxref/eurofxref-hist.xml", ImportMap:=Nothing, _
        Overwrite:=True, Destination:=Range("$B$6")
End Sub 
```

# php - php变量字符串连接

> ID：12559121
> 
> 赞同：1
> 
> 时间：2012-09-24T05:08:33.440
> 
> 标签：php

我有以下 php var ：

```
$mail_from=$full_name." <".$user_obj->getEmailAddress().">"; 
```

但只有 $full_name`$mail_from.The $user_obj->getEmailAddress()`未分配给`$mail_from`.

我`var_dump`都`$full_name`得到`$user_obj->getEmailAddress()`了价值。

怎么了？

这是 var_dump 值：

```
$full_name : string(12) "TAN CHEN WEI"
$user_obj->getEmailAddress() : string(26) "level2@hartalega-bb.com.my"
$mail_from : string(41) "TAN CHEN WEI " 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:14:08.820

**尝试逃跑**

```
$mail_from=$full_name . "&lt;" . $user_obj->getEmailAddress() . "&gt;"; 
```

**演示**--- 运行以下代码：[http ://writecodeonline.com/php/](http://writecodeonline.com/php/)

```
function getEmailAddress(){
    return "user@example.com";
}

$full_name = "My Name";
$mail_from = $full_name ."&lt;". getEmailAddress() . "&gt;" ;
echo $mail_from; 
```

**检查手册**： http: [//php.net/manual/en/function.htmlspecialchars.php](http://php.net/manual/en/function.htmlspecialchars.php)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T05:16:35.727

```
 $mail_from="{$full_name}{'<'}{$user_obj->getEmailAddress()}{'>'}"; 
```

使用双引号连接两个以上的字符串，而不是多个 '.' 运营商。PHP 被迫与每个 '.' 重新连接。操作员。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-24T05:22:53.817

再次检查`$user_obj->getEmailAddress()`并尝试简单的方法，例如

```
$mail_from="{$full_name} <{$user_obj->getEmailAddress()}>"; 
```

# javascript - filepicker.io 将选项添加到 makedrop 窗格

> ID：12559123
> 
> 赞同：1
> 
> 时间：2012-09-24T05:08:41.213
> 
> 标签：javascript, filepicker.io

你能告诉我如何设置 makedroppane 函数的选项吗？我不知道。这是我的示例代码。

我知道它需要是一个字典数组，但我不确定要放它。在示例中，它只有 [0]。选项设置的实际文档中的示例会很好。

```
filepicker.setKey('###########');
var options = {
    "multiple": true
};
filepicker.makeDropPane($('#exampleDropPane')[0],options, {
    dragEnter: function() {
        $("#exampleDropPane").html("Drop to upload");
    },
    dragLeave: function() {
        $("#exampleDropPane").html("Drop files here");
    },
    progress: function(percentage) {
        $("#exampleDropPane").text("Uploading ("+percentage+"%)");
        $("#pb").css('width', (percentage)+'%');
    },
    done: function(data) {
        console.log(data);
        alert('done');
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:21:22.637

looks like you just need to combine your options into one map:

```
filepicker.makeDropPane($('#exampleDropPane')[0], {
   multiple: true,
   dragEnter: function() {
    //  $("#pb").addClass('show');
    $("#exampleDropPane").html("Drop to upload");
   },
   dragLeave: function() {
    //      $("#pb").addClass('show');
    $("#exampleDropPane").html("Drop files here");
   }, ...
  }); 
```

The syntax is `filepicker.makeDropPane(dropPane, options)` - more information at [https://developers.filepicker.io/docs/web/#local-drop](https://developers.filepicker.io/docs/web/#local-drop)

# iphone - 更新现有的 iphone 应用程序

> ID：12559128
> 
> 赞同：0
> 
> 时间：2012-09-24T05:09:17.440
> 
> 标签：iphone, ipad

我在 Appstore 有一个 iphone 游戏应用程序，但几天前我收到一封来自苹果的邮件，我必须更改应用程序的名称，他们收到一封来自一家公司的邮件，说这个名称是他们的商标名称。所以我决定更改名称。我需要知道我可以更新现有的名称更改应用程序吗？还是我需要删除二进制文件并将其作为新应用程序发布？当我用该应用程序的更改名称更新现有应用程序时，它会反映在 iTunes 商店中吗？

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:15:25.350

是的，它会自动反映在 iTunes 商店中，您尽自己的一份力，其余的将由苹果来管理 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:12:20.403

是的，您可以更改现有应用程序的名称，但它只会在您上传新版本时反映出来。[这可能会有所帮助](https://stackoverflow.com/questions/9487875/iphone-change-app-name)

# java - 如何在 UNIX 中获取 Java 类的返回值

> ID：12559129
> 
> 赞同：0
> 
> 时间：2012-09-24T05:09:24.887
> 
> 标签：java, shell, unix

请建议一种从我的 UNIX 课程中获取返回字符串的方法。

这是我的示例类：

```
package com.mytest.package.main;

    public class DateExtractor {

        public static String getDate() {
          return "20120924";
        }

        public static void main (String[] args) {
           system.out.println(getDate());
        }

    } 
```

还有我的 UNIX 脚本：

```
JAVA_BIN="/usr/bin"
log_dir="/usr/tmp/log"
JVM_OPTION="-Xms512m -Xmx2g -DprojectName=mytestproj -Dlog.dir=$log_dir"
CP="/usr/tmp"
MAIN_CLASS=com.mytest.package.main.DateExtractor

$NOHUP $JAVA_BIN/java ${JVM_OPTION:-} -classpath $CP $MAIN_CLASS 
```

预期结果：

```
echo $Data_from_getDate
20120924 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:19:10.170

使用: `SimpleDateFormat`, 有很多日期格式

[日期格式示例](http://www.javablogging.com/java-simpledateformat-examples/)

```
 SimpleDateFormat simpleDateFormat = new SimpleDateFormat("dd/MM/yy");
    String dateAsString = simpleDateFormat.format(new Date());
    System.out.println(dateAsString); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T05:17:00.137

您可以从程序返回 int 代码（通常 0 表示成功，其他任何内容都是错误）并在 $? shell 变量 - 但不是字符串。使用 println 和`your-program-here-`在 shell 中获取输出。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T05:20:51.627

你不能返回字符串，UNIX 程序有一个整数返回值（你可以用`System.exit(value)`.

您在 Java 中打印的所有内容都会输出到标准输出，并且通常会打印在终端上。

您可以将输出存储在一个变量中

```
Data_from_getDate=$( $NOHUP $JAVA_BIN/java ${JVM_OPTION:-} -classpath $CP $MAIN_CLASS )
echo $Data_from_getDate 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T05:21:51.647

Two recommendations:

Put the output of your program on the standard output

```
System.out.println(getDate()); 
```

To echo the result in your unix script

```
echo `$JAVA_BIN/java ${JVM_OPTION:-} -classpath $CP $MAIN_CLASS` 
```

# symfony - Doctrine2 一对多、自引用关系

> ID：12559132
> 
> 赞同：5
> 
> 时间：2012-09-24T05:09:55.203
> 
> 标签：symfony, doctrine-orm, one-to-many, relationship, self-reference

在我的“主题”实体中，我有一个一对多、自引用的关系`$parent:$children`。

```
class Topic
{
    /** @ORM\Id 
    * @Column(type="integer")
    * @ORM\GeneratedValue(strategy="IDENTITY")
    */
    private $id;

    /** @Column(length=40, unique=true) */
    private $name;

    /**
     * @ORM\ManyToOne(targetEntity="Topic", inversedBy="children")
     */
    private $parent;

    /**
     * @ORM\OneToMany(targetEntity="Topic", mappedBy="parent")
     */
    private $children;
} 
```

我可以加入表格来获得这样的父子层次结构：

```
return $this->getEntityManager()->createQuery('
    SELECT t, c FROM My\xxxBundle\Entity\Topic t 
    LEFT JOIN t.children c
    WHERE t.parent IS NULL
')
->getArrayResult(); 
```

这是正确的输出：

```
array
  0 => 
    array
      'id' => int 1
      'name' => string 'Parent 1'
      'slug' => string 'p-1'
      'description' => null
      'children' => 
        array
          0 => 
            array
                'id' => int 2
                'name' => string 'Child 1-1'
                'slug' => string 'c-1-1'
                'description' => null
          1 => 
            array
                'id' => int 3
                'name' => string 'Child 1-2'
                'slug' => string 'c-1-2'
                'description' => null
  1 => 
    array
      'id' => int 4
      'name' => string 'Parent 2'
      'slug' => string 'p-2'
      'description' => null
      'children' => 
        array
          empty
... 
```

但如果我尝试获取 SELECT 语句中的特定列：

`SELECT t.name, c.name FROM My\xxxBundle\Entity\Topic t`

我得到一个子实体的平面数组，即只有`c.name`. 如果父母没有孩子，我只会得到一个空值作为它的名字：

```
 1 => 
    array (size=1)
      'name' => string 'Child 1-1' (length=14)
  2 => 
    array (size=1)
      'name' => string 'Child 1-2' (length=14)
  3 => 
    array (size=1)
      'name' => null
  4 => 
    array (size=1)
      'name' => string 'Child 3-1' (length=5) 
```

根据 Mark 的建议，我重命名了子实体的名称字段：

```
SELECT t.name, c.name AS child_name FROM My\xxxBundle\Entity\Topic t 
```

但我仍然得到错误的格式：

```
array
  0 => 
    array
      'name' => string 'Parent 1'
      'child_name' => string 'Child 1-1'
  1 => 
    array
      'name' => string 'Parent 1'
      'child_name' => string 'Child 1-2'
  2 => 
    array
      'name' => string 'Parent 2'
      'child_name' => string 'Child 2-1' 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T09:17:01.747

问题是您选择了两个具有相同名称的字段（主题中的名称字段和子项中的名称字段）。创建数组键时，这些名称相互冲突。解决此问题的方法是重命名字段之一：

```
SELECT t.name, c.name AS child_name FROM My\xxxBundle\Entity\Topic t 
```

您获得平面数组的原因是因为您没有选择实体，而是从这些实体中选择单个值。

有关更多信息，请参阅 DQL 文档： [http ://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#select-queries](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#select-queries)

**编辑** 您从查询中获得的当前结果是合乎逻辑的。它与您在运行等效 SQL 查询时获得的结果相匹配。您当前正在做的是从两个数据库表中获取两个值。您真正想要的是格式化为数组的两个部分实体。

您可以尝试使用[Partials](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/reference/dql-doctrine-query-language.html#partial-object-syntax)。这是教义中仅选择实体的几个字段的一种方式。你将它与 ->getArrayResult() 结合起来，你可能会得到正确的输出

```
return $this->getEntityManager()->createQuery('
    SELECT partial t.{name}, partial c.{name}
    FROM My\xxxBundle\Entity\Topic t 
    LEFT JOIN t.children c
    WHERE t.parent IS NULL
')
->getArrayResult(); 
```

# ios - 应用内购买 谢谢！警报

> ID：12559136
> 
> 赞同：2
> 
> 时间：2012-09-24T05:10:18.343
> 
> 标签：ios, objective-c, app-store, in-app-purchase

我有多年前设置的带有产品 X 的应用 A。然后我有最近设置的带有产品 Y 的应用程序 B。我现在注意到以下几点：

```
iOS 6/app A/product X : after purchase app store provides "Thank You" alert
iOS 5/app A/product X : no alert
iOS 6/app B/product Y : no alert
iOS 5/app B/product Y : no alert 
```

有人知道这里发生了什么吗？两个应用程序中的购买代码是相同的。

# android - TimePickerFragment .show() 错误 - Android

> ID：12559137
> 
> 赞同：0
> 
> 时间：2012-09-24T05:10:22.080
> 
> 标签：android, mobile

我在我的 Android 应用程序中创建的 TimePickerFragment 对象遇到了一个非常奇怪的错误，希望有人能帮助我。创建对象的代码如下：

```
public void showTimePickerFragment(View v){
    TimePickerFragment newFrag = new TimePickerFragment();
    newFrag.show(getFragmentManager(), "timePicker");
} 
```

出于某种原因，我在 .show() 上遇到错误。我收到的错误信息是：

```
The method show(FragmentManager, String) in the type DialogFragment is not applicable for the arguments (FragmentManager, String) 
```

我不确定我是否只是在这里忽略了某些东西，但这对我来说确实是一个令人困惑的错误消息。我尝试将“getFragmentManager()”更改为“getSupportFragmentManager()”，但这会导致参数出错！

我还已经导入了这个应用程序所需的所有类，所以这不是问题。

如果有人需要查看更多代码，我完全可以在这里发布。任何帮助将不胜感激！！！

谢谢大家！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:36:42.263

该错误来自没有为类使用正确的导入（因此该方法需要与您提供的类型不同的类型）。确保您仅使用兼容性包中的类或 android SDK 中的普通类。

# mysql - MySQL 查询优化（7.6 秒运行）

> ID：12559141
> 
> 赞同：2
> 
> 时间：2012-09-24T05:10:54.113
> 
> 标签：mysql, optimization, profiling, left-join, innodb

这是我的查询：

```
SELECT `users`.`id`, `users`.`username`, `users`.`profile_picture_url`, `users`.`credits_offered`, `users`.`country_id`, `users`.`user_level`, `users`.`credits`
FROM `users`
LEFT JOIN `history` ON `history`.`actor_id` = 100 AND `history`.`receiver_id` = `users`.`id`
LEFT JOIN `blocked` ON `blocked`.`actor_id` = 100 AND `blocked`.`receiver_id` = `users`.`id`
WHERE `history`.`receiver_id` IS NULL
AND `blocked`.`receiver_id` IS NULL
AND `users`.`instagram_active` = 1
AND `users`.`banned` = 0
AND `users`.`shown_to_others` = 1
AND `users`.`featured_user` = 0
AND `users`.`id` IN(
SELECT `user_id` FROM `interests` WHERE `interest` IN(
SELECT `interest` FROM `interests` WHERE `user_id` = 100 AND `active` = 1))
AND `users`.`id` <> 100
AND `users`.`featured_user` = 0
ORDER BY (`users`.`credits` >= `users`.`credits_offered`) DESC, `users`.`credits_offered` DESC, `users`.`credits` DESC
LIMIT 0, 25 
```

用户表：

```
CREATE TABLE `users` (
 `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
 `instagram_id` int(11) NOT NULL,
 `username` varchar(100) COLLATE utf8_unicode_ci NOT NULL,
 `bio` text COLLATE utf8_unicode_ci,
 `website` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
 `profile_picture_url` varchar(255) COLLATE utf8_unicode_ci NOT NULL,
 `full_name` varchar(200) COLLATE utf8_unicode_ci NOT NULL,
 `media_count` int(11) unsigned NOT NULL,
 `followed_by_count` int(11) unsigned NOT NULL,
 `follows_count` int(11) unsigned NOT NULL,
 `last_updated` datetime NOT NULL,
 `last_updated_instagram` datetime NOT NULL,
 `instagram_active` tinyint(1) DEFAULT NULL,
 `last_login` datetime NOT NULL,
 `inserted_on` datetime NOT NULL,
 `banned` tinyint(1) NOT NULL DEFAULT '0',
 `banned_reason` text COLLATE utf8_unicode_ci,
 `oauth_token` varchar(150) COLLATE utf8_unicode_ci NOT NULL,
 `user_level` tinyint(4) NOT NULL,
 `shown_to_others` tinyint(1) NOT NULL DEFAULT '1',
 `credits_offered` tinyint(1) unsigned NOT NULL DEFAULT '2',
 `active` tinyint(1) NOT NULL DEFAULT '1',
 `email` varchar(255) COLLATE utf8_unicode_ci DEFAULT NULL,
 `registered_ip` varchar(17) COLLATE utf8_unicode_ci DEFAULT NULL,
 `credits` int(11) NOT NULL,
 `email_notifications` tinyint(1) NOT NULL DEFAULT '1',
 `todays_followers` int(11) NOT NULL DEFAULT '0',
 `todays_followers_hour` int(11) NOT NULL,
 `total_followers` int(11) NOT NULL,
 `credits_yesterday` int(11) NOT NULL,
 `email_is_verified` tinyint(1) NOT NULL DEFAULT '0',
 `email_announcements` tinyint(1) NOT NULL DEFAULT '1',
 `email_credits` tinyint(1) NOT NULL DEFAULT '1',
 `verification_code` varchar(25) COLLATE utf8_unicode_ci DEFAULT NULL,
 `country_id` bigint(20) unsigned DEFAULT NULL,
 `browser_info_id` bigint(20) unsigned DEFAULT NULL,
 `featured_user` tinyint(1) NOT NULL DEFAULT '0',
 `emailed_credits` tinyint(1) NOT NULL DEFAULT '0',
 `followers_same_interests` tinyint(1) NOT NULL DEFAULT '0',
 UNIQUE KEY `id` (`id`),
 UNIQUE KEY `instagram_id` (`instagram_id`),
 KEY `country_id` (`country_id`),
 KEY `browser_info_id` (`browser_info_id`),
 KEY `username` (`username`,`instagram_active`,`banned`),
 CONSTRAINT `users_ibfk_1` FOREIGN KEY (`country_id`) REFERENCES `countries` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
 CONSTRAINT `users_ibfk_2` FOREIGN KEY (`browser_info_id`) REFERENCES `browser_info` (`id`) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=3524 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

兴趣表：

```
CREATE TABLE `interests` (
 `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
 `user_id` bigint(20) unsigned NOT NULL,
 `interest` varchar(25) COLLATE utf8_unicode_ci NOT NULL,
 `inserted_dt` datetime NOT NULL,
 `active` tinyint(1) NOT NULL DEFAULT '1',
 UNIQUE KEY `id` (`id`),
 KEY `user_id` (`user_id`),
 KEY `interest` (`interest`),
 CONSTRAINT `interests_ibfk_1` FOREIGN KEY (`user_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=11828 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

封锁表：

```
CREATE TABLE `blocked` (
 `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
 `actor_id` bigint(20) unsigned NOT NULL,
 `receiver_id` bigint(20) unsigned DEFAULT NULL,
 `blocked_reason` enum('Skipped','Blocked') COLLATE utf8_unicode_ci NOT NULL,
 `inserted_dt` datetime NOT NULL,
 `active` tinyint(1) NOT NULL DEFAULT '1',
 `browser_info_id` bigint(20) unsigned DEFAULT NULL,
 UNIQUE KEY `id` (`id`),
 KEY `actor_id` (`actor_id`,`receiver_id`),
 KEY `receiver_id` (`receiver_id`),
 KEY `browser_info_id` (`browser_info_id`),
 CONSTRAINT `blocked_ibfk_1` FOREIGN KEY (`actor_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `blocked_ibfk_2` FOREIGN KEY (`receiver_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `blocked_ibfk_3` FOREIGN KEY (`browser_info_id`) REFERENCES `browser_info` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=35800 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

历史表：

```
CREATE TABLE `history` (
 `id` bigint(20) unsigned NOT NULL AUTO_INCREMENT,
 `actor_id` bigint(20) unsigned NOT NULL,
 `receiver_id` bigint(20) unsigned NOT NULL,
 `credits` int(11) NOT NULL,
 `dt` datetime NOT NULL,
 `browser_info_id` bigint(20) unsigned DEFAULT NULL,
 UNIQUE KEY `id` (`id`),
 KEY `actor_id` (`actor_id`,`receiver_id`),
 KEY `browser_info_id` (`browser_info_id`),
 KEY `receiver_id` (`receiver_id`),
 CONSTRAINT `history_ibfk_1` FOREIGN KEY (`browser_info_id`) REFERENCES `browser_info` (`id`) ON DELETE SET NULL ON UPDATE CASCADE,
 CONSTRAINT `history_ibfk_5` FOREIGN KEY (`actor_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE,
 CONSTRAINT `history_ibfk_6` FOREIGN KEY (`receiver_id`) REFERENCES `users` (`id`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB AUTO_INCREMENT=148552 DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci 
```

我在探查器上运行查询，这就是我得到的：

```
Status  Time

starting    0.000009
Waiting for query cache lock    0.000003
Waiting on query cache mutex    0.000003
checking query cache for query  0.000150
checking permissions    0.000004
checking permissions    0.000001
checking permissions    0.000002
checking permissions    0.000002
checking permissions    0.000004
Opening tables  0.000113
System lock 0.000018
Waiting for query cache lock    0.000003
Waiting on query cache mutex    0.000068
init    0.000122
optimizing  0.000031
statistics  0.000171
preparing   0.000070
executing   0.000003
Sorting result  0.000096
optimizing  0.000007
statistics  0.000010
preparing   0.000146
optimizing  0.000006
statistics  0.000025
preparing   7.110198
Sending data    0.000589
end 0.000009
query end   0.000011
closing tables  0.000070
freeing items   0.000045
logging slow query  0.000003
cleaning up 0.000014 
```

**所以平均“准备”这个查询需要 7.11 秒。**这太长了，如果我更擅长 SQL，我觉得可以缩短它。有人能帮我吗？我已经添加了所有需要弄清楚的表格。被这个卡住了一段时间。

说明： id select_type table type possible_keys key key_len ref rows Extra 1 PRIMARY users range id id 8 NULL 1880 using where; Using filesort 1 PRIMARY history ref actor_id,receiver_id actor_id 16 const,bradley_instapromote.users.id 1 使用 where；使用索引；不存在 1 PRIMARY 被阻止 ref actor_id,receiver_id actor_id 17 const,bradley_instapromote.users.id 1 使用 where；使用索引 2 DEPENDENT SUBQUERY 兴趣 index_subquery user_id user_id 8 func 2 使用 where 3 DEPENDENT SUBQUERY 兴趣 index_subquery user_id,interest interest 77 func 6 使用 where

解释 IMG： ![在此处输入图像描述](../Images/c9590bbda3c1a30937f5b4caa71be7cb.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-23T17:06:57.780

将子选择转换为连接

```
SELECT `users`.`id`, `users`.`username`, `users`.`profile_picture_url`, `users`.`credits_offered`, `users`.`country_id`, `users`.`user_level`, `users`.`credits`
FROM `users`
INNER JOIN interests AS a ON (a.user_id = users.user_id)
INNER JOIN interests AS b ON (a.interest = b.interes AND b.user_id = 100 and b.active = 1)
LEFT JOIN `history` ON `history`.`actor_id` = 100 AND `history`.`receiver_id` = `users`.`id`
LEFT JOIN `blocked` ON `blocked`.`actor_id` = 100 AND `blocked`.`receiver_id` = `users`.`id`
WHERE `history`.`receiver_id` IS NULL
AND `blocked`.`receiver_id` IS NULL
AND `users`.`instagram_active` = 1
AND `users`.`banned` = 0
AND `users`.`shown_to_others` = 1
AND `users`.`featured_user` = 0
AND `users`.`id` <> 100
AND `users`.`featured_user` = 0
ORDER BY (`users`.`credits` >= `users`.`credits_offered`) DESC, `users`.`credits_offered` DESC, `users`.`credits` DESC
LIMIT 0, 25 
```

或者运行查询获取兴趣列表，然后在用户查询中直接使用

# ruby-on-rails - 在 Rails/ActiveRecord 列名中使用问号字符

> ID：12559142
> 
> 赞同：40
> 
> 时间：2012-09-24T05:10:54.890
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, activerecord, ruby-on-rails-3.2

为了与 Ruby 在布尔方法（例如）中使用问号的习惯保持一致`person.is_smart?`，我想对 Rails 中的 ActiveRecord 字段做同样的事情：

```
rails generate model Person is_smart?:boolean 
```

我实际上并没有运行上述语句。我假设数据库字段中不能有问号。rails 会适当地处理这个问题吗？最好的做法是简单地在模型上留下问号吗？

使用 Rails 3.2.8

* * *

## 回答 #1

> 赞同：94
> 
> 时间：2012-09-24T05:23:38.713

`smart?`如果有一个名为 的字段，Rails 将自动生成该方法`'smart'`。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-04-05T10:24:06.093

如果您碰巧`:enum`在模型中使用了一个“陷阱”，请注意，因为它将值存储为整数。active record 提供的问号 attr 方法期望在数据库中分别将 0 或 1 评估为 false / true。例如：

```
class Person
  enum mood: ['happy', 'sad', 'bored']
end

p = Person.new(mood: 'happy') # this would store mood as 0 in db
p.mood? #=> false

p.mood = 'sad' # saves as 1 in db
p.mood? #=> true

p.mood = 'bored' # saves as 2 in db
p.mood? #=> true 
```

要了解此方法的工作原理，请参阅[rails source](https://github.com/rails/rails/blob/master/activerecord/lib/active_record/attribute_methods/query.rb#L10)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-20T21:08:35.193

实际上，我使用的是 Rails 4，我不能在没有问号的情况下调用我的布尔列

```
pry(main)> User.where(is_validated: false).first.is_validated
  User Load (0.9ms)  SELECT "users".* FROM "users" WHERE "users"."is_validated" = 'f' ORDER BY "users"."id" ASC LIMIT 1
=> nil
[13] pry(main)> User.where(is_validated: false).first.is_validated?
  User Load (0.8ms)  SELECT "users".* FROM "users" WHERE "users"."is_validated" = 'f' ORDER BY "users"."id" ASC LIMIT 1
=> false 
```

# android - Android 动态自定义列表视图

> ID：12559143
> 
> 赞同：0
> 
> 时间：2012-09-24T05:10:56.950
> 
> 标签：android

我正在从 sqlite 数据库中检索提供优惠的国家/地区列表。

我想在应按国家/地区显示的 ListView 中显示这些优惠。例如：假设印度有 5 个报价，那么它应该显示：印度，然后是所有 5 个报价；然后是其他国家和他们的报价等等..

数据应以复选框显示。如果未选中该复选框，则应突出显示该项目。代码如下

```
_arrayAdapterActiveCards = new ArrayAdapter<Card>(this, R.layout.active_card_list_item, _activeUserCards)
{
    LayoutInflater layout_inflater = LayoutInflater.from(getApplicationContext());

    @Override
    public Card getItem(int position)
        {
            return _activeUserCards.get(position);
        }

    @Override
    public long getItemId(int position)
        {
            return position;
        }

    @Override
    public View getView(final int position, View convertView, ViewGroup parent)
        {

            Card select_card = getItem(position);

            if (convertView == null)
                {
                    convertView = layout_inflater.inflate(R.layout.active_card_list_item, null);
                }

            String selected_card = select_card.getBankName() + " - " + select_card.getCardName().replaceAll("\\s+$", "");

            final ViewHolder holder = new ViewHolder();
            holder.card_name_view = (TextView) convertView.findViewById(R.id.active_card_name_view);
            holder.card_name_view.setText(selected_card);
            holder._checkBox = (CheckBox) convertView.findViewById(R.id.active_card_checkbox);
            holder._checkBox // here implement check box facility
            .setOnClickListener(new OnClickListener()
                {

                    @Override
                    public void onClick(View v)
                        {
                            String savedItems = null;

                            if (!_listViewForActiveCards.isItemChecked(position))
                                {
                                    Log.d(TAG, "Value of position  = " + position);
                                }

                            _arrayAdapterActiveCards.notifyDataSetChanged();
                        }

                });

            return convertView;
        }

    class ViewHolder
        {
            TextView card_name_view;
            CheckBox _checkBox;
        }
};

_arrayAdapterActiveCards.setNotifyOnChange(true);
_listViewForActiveCards.setAdapter(_arrayAdapterActiveCards);
for (int i = 0; i < _noOfCountry; i++)
{
    final LayoutInflater inflater = (LayoutInflater) getSystemService(Context.LAYOUT_INFLATER_SERVICE);
    _fragmentLayoutActiveCard = (LinearLayout) inflater.inflate(R.layout.fragment_layout, null);
    _fragmentLayoutActiveCard.setId(i);
    _lLayout = (LinearLayout) findViewById(R.id.countryAndCardListLayout);
    _countryText[i] = new TextView(this);
    _countryText[i].setLayoutParams(new LayoutParams(LayoutParams.FILL_PARENT, LayoutParams.WRAP_CONTENT));
    _countryText[i].setText(_countryName[i].toUpperCase());
    _countryText[i].setTextColor(Color.BLACK);
    _lLayout.addView(_countryText[i]);
    _lLayout.addView(_fragmentLayoutActiveCard);
    _listViewForActiveCards = (ListView) findViewById(R.id.fragmentCardList);
    getCardFromDataBaseTestMethodActiveCard(_countryName[i]);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:15:49.797

我就是这样理解你的问题的。一个一个地显示每个国家和他们的报价（通过数据库检索的信息）。为此，您可能必须实现自定义数组适配器并相应地显示它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:21:25.577

Try this: [http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/](http://jsharkey.org/blog/2008/08/18/separating-lists-with-headers-in-android-09/)

** Please provide code in proper format. It will help you to get your answer correctly and quickly.

# regex - 固定位置和长度字段的正则表达式

> ID：12559144
> 
> 赞同：1
> 
> 时间：2012-09-24T05:11:03.423
> 
> 标签：regex

我正在研究一个正则表达式，以从具有固定宽度间距的大型机日志行中提取确切的字符（...正则表达式不是我的强项，顺便说一句）。

我想提取 Status 字段的字段值，它是包含下面示例事件中显示的 、 和 值`SUCCESSFUL AUDIT`的`LOGON COMPLETE`固定长度字段。`FINAL FAILED AUDIT`

这个固定长度字段有很多值，所以我不能像我试图做的那样真正提取文字字符串值。

相反，我想提取从事件位置 54 开始的任何字符，并且长度*正好是 18 chars*。

任何有关正则表达式或方法等的帮助或想法，将不胜感激。

```
528 LOGON   39690  SECURITY LAPTOP    8481 USER AB11 SUCCESSFUL AUDIT  BBB908AFB 06/20/12 09:11:43PM    
528 LOGON   39692  SECURITY LAPTOP    8495 USER AB11 LOGON COMPLETE    BBB908AFB 06/20/12 09:12:12PM    
528 LOGOFF  39699  SECURITY DESKTOP   4476 USER ABEQ FINAL FAILED AUDITAADAFCC01 06/20/12 09:55:49PM 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T22:21:12.347

考虑以下通用正则表达式的 powershell 示例。

`.{53}(.{18})`

# 例子

```
 $Matches = @()
    $String = '528 LOGON   39690  SECURITY LAPTOP    8481 USER AB11 SUCCESSFUL AUDIT  BBB908AFB 06/20/12 09:11:43PM    
528 LOGON   39692  SECURITY LAPTOP    8495 USER AB11 LOGON COMPLETE    BBB908AFB 06/20/12 09:12:12PM    
528 LOGOFF  39699  SECURITY DESKTOP   4476 USER ABEQ FINAL FAILED AUDITAADAFCC01 06/20/12 09:55:49PM
528 LOGON   39690  SECURITY LAPTOP    8481 USER AB11 REMEBER TO VOTE   BBB908AFB 06/20/12 09:11:43PM'
    Write-Host start with 
    write-host $String
    Write-Host
    Write-Host found
    ([regex]'.{53}(.{18})').matches($String) | foreach {
        write-host "key at $($_.Groups[1].Index) = '$($_.Groups[1].Value)'"
        } # next match 
```

# 产量

```
start with
528 LOGON   39690  SECURITY LAPTOP    8481 USER AB11 SUCCESSFUL AUDIT  BBB908AFB 06/20/12 09:11:43PM    
528 LOGON   39692  SECURITY LAPTOP    8495 USER AB11 LOGON COMPLETE    BBB908AFB 06/20/12 09:12:12PM    
528 LOGOFF  39699  SECURITY DESKTOP   4476 USER ABEQ FINAL FAILED AUDITAADAFCC01 06/20/12 09:55:49PM
528 LOGON   39690  SECURITY LAPTOP    8481 USER AB11 REMEBER TO VOTE   BBB908AFB 06/20/12 09:11:43PM

found
key at 53 = 'SUCCESSFUL AUDIT  '
key at 159 = 'LOGON COMPLETE    '
key at 265 = 'FINAL FAILED AUDIT'
key at 367 = 'REMEBER TO VOTE   ' 
```

# 概括

*   `.{53}`跳过前 53 个字符（注意字符串中的第一个位置为零）
*   `(.{18})` 查找并返回 18 个字符宽的字段

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:58:23.267

1.  正则表达式是这个简单问题的复杂解决方案。
2.  由于输入格式和所需输出的偏移量是固定的，只需逐行读取输入，并进行一些小的字符串处理。
3.  如果仍然需要正则表达式，这是一个起点（尽管在您自己的输入数字 54 和 18 中与您想要的答案不匹配，所以我尝试使用 47 和 16 代替，您可以根据需要进行修改）：

    (?<=[a-zA-Z0-9 ]{47})([a-zA-Z0-9 ]{16})

    [http://regexr.com?328dm](http://regexr.com?328dm)

# asp.net-mvc - 客户端验证 mvc4 中的部分页面

> ID：12559145
> 
> 赞同：0
> 
> 时间：2012-09-24T05:11:08.827
> 
> 标签：asp.net-mvc, client-side, validation

我有一个带有单个开始表单 HTML 属性的视图。在表单内部，我有两个部分，在每个部分中，我有几个字段和一个用于更新这些字段的按钮。我对这两个部分都使用了一个模型。

我的问题是，当我在第 1 节中单击按钮进行客户端验证时，即使第 2 节正在得到验证，我也不想验证。

所以基本上我想使用单个表单属性和单个模型在客户端单独验证每个部分。

我的模特班

```
Required(ErrorMessage = "Please enter Current Password.")]
[DataType(DataType.Password)] 
public string Password { get; set; } 

[Required(ErrorMessage = "Please enter New Password.")] 
[DataType(DataType.Password)] 
public string NewPassword { get; set; } 

[Required(ErrorMessage = "Please enter Confirm Password.")] 
[DataType(DataType.Password)] 
[Compare("NewPassword", ErrorMessage = "New password must match Confirm Password")] 
public string ConfirmPassword { get; set; } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:51:44.983

所以你有一些时间需要一些字段，而有些时间不需要，这是你的问题。在模型类中删除 required 像这样添加到客户端。

```
@Html.TextBoxFor(model => model.user_password, new { @class = "required", 
@type = "password" }) 
```

但我戴你请检查控制中的手动验证。

# sql - 如何清除分配给存储过程中表变量的自动递增值

> ID：12559148
> 
> 赞同：0
> 
> 时间：2012-09-24T05:11:40.383
> 
> 标签：sql, sql-server

我有一个存储过程，其表变量包含一个属性作为`Id int NOT NULL IDENTITY(1,1)`. 在每次执行中，它的值都会附加上一个。

我想清除每次执行中的值，`Id`并且在每次执行中它应该*以 1 开头*。

这是我创建的代码

```
create procedure OnetPlus_processing 
as
begin
declare @input_data table (
  Id int NOT NULL IDENTITY(1,1),
  jobid int,
  title varchar(400),
  jobtitle varchar(400),
  titlerev varchar(400),
  jobtitlerev varchar(400)
)

insert into @input_data
select jobid ,title,jobtitle,titlerev,jobtitlerev
from job.dbo
left outer join ..................... 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:38:31.433

您无法重置`IDENTITY`表变量的列。表变量在`DBCC CHECKIDENT`nor中均无效`TRUNCATE TABLE`，您不能删除该表并重新创建它。

`IDENTITY`您可以修改插入其中的查询以使用`ROW_NUMBER()`表达式，而不是使用列。

例如，如果您目前有：

```
INSERT INTO @T (Col1,Col2)
SELECT ColA,ColB from <source query> ORDER BY ColA 
```

`IDENTITY`从 s 的定义中删除`@T`s`ID`并使用：

```
INSERT INTO @T (ID,Col1,Col2)
SELECT ROW_NUMBER() OVER (ORDER BY ColA),ColA,ColB from <source query> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:12:55.560

试试这个，

```
DBCC CHECKIDENT (mytable, RESEED, 1) 
```

需要注意的是，为了使用`DBCC CHECKIDENT`你需要`dbo (db_owner)`.

# c# - 使用odbc连接open office

> ID：12559151
> 
> 赞同：4
> 
> 时间：2012-09-24T05:12:15.600
> 
> 标签：c#, odbc, openoffice.org

想知道是否有一种方法可以使用 odbc 连接到 open office calc（与 MS Excel 相同）并运行 sql 命令。我可以在 C# 中使用 Excel 和 odbc 来做到这一点。这可以在 C# 中使用 odbc 和 open office calc 完成吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:22:10.007

```
provider=Microsoft.ACE.oledb.12.0;datasource=path of db 
```

try to have this connection string

# javascript - 将javascript数组转换为textarea

> ID：12559155
> 
> 赞同：2
> 
> 时间：2012-09-24T05:12:22.890
> 
> 标签：javascript, arrays, textarea

只是自学javascript，我试图让我的代码读取用户的输入，然后将它们打印到文本区域，但到目前为止我还没有成功。

到目前为止，我只是使用警报来测试我的代码是否将输入存储在我设置的数组中。

```
<HTML>
  <HEAD>
    <TITLE>Test Input</TITLE>
    <SCRIPT LANGUAGE="JavaScript">
    var TestVar = new Array();

    var i = 0;
    function testResults (form) {
        TestVar[i] = form.inputbox.value;
        alert ("You typed: " + TestVar[1]);
        i++;

    }
    </SCRIPT>
  </HEAD>
  <BODY>
    <FORM NAME="myform" ACTION="" METHOD="GET">Enter a name into the box: <BR>
      <INPUT TYPE="text" NAME="inputbox" VALUE=""><P>
      <INPUT TYPE="button" NAME="button" Value="Click"
       onClick="testResults(this.form)">

      <form name="myform" action="" method="POST">
        <div align="center">

        <textarea cols="40" rows="5" name="output">'Now we are inside the area - which is nice.' this.TestVar[i];</textarea>
      </FORM>
  </BODY>
</HTML> 
```

我知道它的基本知识，但我似乎无法正确理解，感谢您提供的任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:18:35.293

调用`alert`应该写成如下

```
alert ("You typed: " + TestVar[i]); 
```

代替`i`你写的`1`。

并且，在做之前`i++`，添加以下行：

```
form.output.value += TestVar[i]; 
```

现在，您正在`textarea`动态更改 的内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T05:18:50.167

更新您的声明

```
alert ("You typed: " + TestVar[1]); // Here you are passing 1, which is telling to get value at index 1. 
```

至

```
alert ("You typed: " + TestVar[i]);  //You are storing at i index so get it again from i index. 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T05:22:57.357

Ok, i just went ahead to fix something up...minor corrections in your sample. (and some edits to satisfy my syntax specific eyes) I used jQuery. (use native JS incase you don't want to use it)

```
var TestVar = new Array();
function testResults(form) {
   TestVar.push(form.inputbox.value);
   $("#outputTa").val(TestVar);
} 
```

The form is just the same, just added an Id="outputTa" to the textarea

```
<form name="myform" action="" method="GET">
Enter a name into the box:
<br>
<input type="text" name="inputbox" value=""><p>
    <input type="button" name="button" value="Click" onclick="testResults(this.form)">
    <form name="myform" action="" method="POST">
    <div align="center">
        <textarea cols="40" rows="5" id="outputTa" name="output"></textarea>
    </form> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T06:05:24.010

这里有一个解决方案：

```
<html>
<head>
<title>Test Input</title>
<script language="JavaScript">
var TestVar = new Array();
var i = 0;
function testResults() {
    TestVar[i] = document.getElementById("userinput").value;

    var textAreaOutput = document.getElementById("output");
    textAreaOutput.value += TestVar[i]
    i++;
}
</script>
</head>
<body>

<form id="inputForm" name="inputForm" action="" method="GET">Enter a name into the box: <br/>
    <INPUT TYPE="text" name="inputbox" value="" id="userinput"/><p/>
    <INPUT TYPE="button" name="button" Value="Click" onClick="javascript:testResults(this.form);"/>
</form>

<form id="outputForm" name="outputForm" action="" method="POST">
    <div align="center">
        <textarea cols="40" rows="5" id="output" name="output">'Now we are inside the area - which is nice.' </textarea>
    </div>
</form>

</body>
</html> 
```

请注意几点：

1.  您有两个名称完全相同的标签“myform”。此外，您的表单定义不是有效的 HTML，因为您有两个打开标签和一个结束标签。

2.  通过向标签添加“id”属性，可以使用 document.getElementById() 来引用它们。这是选择标签的一种非常精确和方便的方法。

学习原生 Javascript 无疑是一件好事。不过，请务必查看 jQuery 和其他 Javascript 库。在 jQuery 中选择和操作标签比在原生 Javascript 中更容易、更方便。

玩得开心！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T05:21:08.770

```
<SCRIPT LANGUAGE="JavaScript">

    function testResults (form) {
        TestVar= form.inputbox.value;
        alert ("You typed: " + TestVar);
    }
    </SCRIPT> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T05:22:44.883

This is what you want to do.. I have used jQuery, you can remove jQuery and use native javascript..

HTML:

```
<HTML>
<BODY>
<FORM id="myform" NAME="myform" ACTION="" METHOD="GET">Enter a name into the box: <BR>
<INPUT id="inputbox" TYPE="text" NAME="inputbox" VALUE=""><P>
<INPUT id="clickBtn" TYPE="button" NAME="button" Value="Click">
<form name="myform" action="" method="POST">
<div align="center">

<textarea id="textarea" cols="40" rows="5" name="output">

</textarea>
</FORM>
</BODY>
</HTML> 
```

Javascript:

```
$("#clickBtn").click(function(){
    var form = $("#myform");

    $("#textarea").val($("#textarea").val() + $("#inputbox").val());
}); 
```

​ [JSFiddle link](http://jsfiddle.net/KXqKr/)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-24T05:28:34.723

```
<HTML>
  <HEAD>
    <TITLE>Test Input</TITLE>
    <SCRIPT LANGUAGE="JavaScript">
    var TestVar = new Array();

    var i = 0;
    function testResults (form) {
     //   alert(form)
        TestVar[i] = form.elements[0].value
          var tempValue= document.getElementById("txtArea").value;
          document.getElementById("txtArea").value=tempValue + TestVar[i];
        }
    </SCRIPT>
  </HEAD>
  <BODY>
    <FORM NAME="myform" ACTION="" METHOD="GET">Enter a name into the box: <BR>
      <INPUT TYPE="text" NAME="inputbox" VALUE=""><P>
      <INPUT TYPE="button" NAME="button" Value="Click"
       onClick="testResults(this.form)">

      <form name="myform" action="" method="POST">
        <div align="center">

        <textarea id="txtArea" cols="40" rows="5" name="output"></textarea>
      </FORM>
  </BODY>
</HTML>​ 
```

# android - 如何从android中的每个listview项目调用不同的意图

> ID：12559157
> 
> 赞同：0
> 
> 时间：2012-09-24T05:12:36.700
> 
> 标签：android, android-intent, android-emulator

我的列表视图中有超过 10 行，我正在使用 JSON 从 Web URL 获取记录，但现在我想为每一行调用特定的意图，例如：-对于第一行，我想调用 ( [`this`](http://domainname.com/s/a))，对于第二行，( [http://domainname.com/s/b](http://domainname.com/s/b)）等等，所以请建议我需要在我的 ListActivity 类中添加哪些代码以及在哪里调用......

```
public class MainActivity extends Activity {

ListView mListView;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);    

    // URL to the JSON data 
    String strUrl = "http://domainname.in/first.php/count/";

    // Creating a new non-ui thread task to download json data 
    DownloadTask downloadTask = new DownloadTask();

    // Starting the download process
    downloadTask.execute(strUrl);

    // Getting a reference to ListView of activity_main
    mListView = (ListView) findViewById(R.id.lv_count);
 } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:01:09.673

您可以通过编写自己的自定义适配器来实现这一点。如下所示：

```
 class CustomAdapter extends ArrayAdapter {

    HashMap<String, String> map;
    ArrayList mList;
    public CustomAdapter(Context context, int resource,
            int textViewResourceId, HashMap<String, String> map) {
        super(context, resource, textViewResourceId);
        this.map = map;
        mList = new ArrayList<String>(map.keySet());
    }

    @Override
    public int getCount() {
        return mList.size();
    }

    @Override
    public Object getItem(int position) {
        return mList.get(position);
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        // do your stuff with layouts.
        String item = (String)mList.get(position);
        // either you can set the url as tag to view so that the same url will be
        //retrieved when an item is clicked or declare the map as global variable.
        String url = map.get(item);
        convertView.setTag(url);
        return convertView;
    }
} 
```

/// 在你的活动中

```
@Override
public void onItemClick(AdapterView<?> adapter, View view,
        int position, long id) {
    // you can get the url from the tag
    String url = view.getTag().toString();
    // or else declare the HashMap as global variable which will be accessible through out the class.
    String url = new ArrayList<String>(map.keySet()).get(position);
    // Now launch web with this url
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:19:31.423

您需要`ListView`使用为每个项目指定的 URL 附加数据，并且您可以处理 ListView`onItemClick()`从选定项目的基础获取 ListView 项目获取 URL 并在 WebView 中打开链接。

# c - 我编码不正确吗？

> ID：12559164
> 
> 赞同：2
> 
> 时间：2012-09-24T05:13:13.687
> 
> 标签：c, gcc

几十年前我做过一些 C 编程。我正在尝试重新学习语言。我写了这个。我得到了一些意想不到的东西。当我将“short int”更改为“int”时，它似乎有效。任何人都可以查看我的代码以查看它是否有任何问题或者这是编译器问题。我在 Linux 上使用 gcc。

```
#include <stdio.h>

int main(void) {

    short int age = 0;
    short int num_1_yr_olds = 0;
    short int num_2_and_3_yr_olds = 0;
    short int num_above_3_yr_olds = 0;

    while(1) {

        printf ("Enter age: ");
        scanf ("%d", &age);

        if (age < 1) {
            break;
        }

        switch (age) {
            case 1:
                ++num_1_yr_olds;
                break;
            case 2:
            case 3:
                ++num_2_and_3_yr_olds;
                break;
            default:
                ++num_above_3_yr_olds;
                break;
        }
    }
    printf ("Number of 1 year olds = %d\n", num_1_yr_olds);
    printf ("Number of 2 and 3  year olds = %d\n", num_2_and_3_yr_olds);
    printf ("Number above 3 year olds = %d\n", num_above_3_yr_olds);
} 
```

输入

```
Enter age: 1
Enter age: 1
Enter age: 1
Enter age: -1 
```

输出

```
Number of 1 year olds = -1
Number of 2 and 3  year olds = 0
Number above 3 year olds = 0 
```

num_1_yr_olds 值被搞砸了。我期望一个 3，我得到一个 -1。无论输入如何，num_1_yr_olds 的值都会变为 -1。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-24T05:15:29.877

你的问题出在这里：

```
short int age = 0;
:
scanf ("%d", &age); 
```

您确实需要确保您的数据类型与您的格式字符串匹配。a 的正确格式说明符`short int`是`%hd`，不是`%d`。

一些编译器实际上会检查这个并警告你。

可能发生的是数据和格式字符串的未对齐导致`short int`成为“错误”值，因此计数被搞砸了。

* * *

更深入地说，对于像 x86 这样的二进制补码、小端架构，将 an 扫描`int`到 a`short`可能会将最低有效的一半放入`age`，将最高有效的一半放入`num_1_year_olds`（如果它与内存相邻`age`）。

从图形上看，这样想可能更清楚：

```
 shorts in memory
                     +-----------------------+
What scanf("%hd") =< |          age          | \
  will write to.     +-----------------------+  = What scanf("%d")
                     |    num_1_year_olds    | /    will write to.
                     +-----------------------+
                     | num_2_and_3_year_olds |
                     +-----------------------+
                     | num_above_3_year_olds |
                     +-----------------------+ 
```

所以，当你进入时`1`，`age`成为`1`和`num_1_year_olds`成为`0`。

每次您这样做时，它都会增加，`num_1_year_olds`因为`age`它会在您下次获得输入时`1`被覆盖。`scanf`

当您最终输入`-1`（二进制补码中的所有 1 位）时，`age`变为.`-1``num_1_year_olds`

然后，因为`age`小于一，循环中断，值就是你所看到的：`{-1, 0, 0}`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T05:15:44.433

尝试

```
scanf ("%hd", &age); 
```

由于年龄是短整数类型。

# android - 默认短信编辑器设置启用 false

> ID：12559166
> 
> 赞同：1
> 
> 时间：2012-09-24T05:13:16.743
> 
> 标签：android

在我的应用程序中，我希望用户发送消息，但消息正文不可编辑。它应该由应用程序构建，用户只能发送该 SMS 并阅读它。所以我使用了以下代码：

```
Uri uri = Uri.parse("smsto:9860xxxxxx");   
Intent it = new Intent(Intent.ACTION_SENDTO, uri);   
it.putExtra("sms_body", "The SMS text");   
startActivity(it); 
```

如何设置短信编辑器窗口启用，并设置自定义消息正文？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-25T12:47:10.813

使用此代码为了发送 SMS 消息：

```
private void sendSMS(String phoneNumber, String message, final int k){   
    String SENT = "SMS_SENT";
    String DELIVERED = "SMS_DELIVERED";

    Intent sentIntent = new Intent(SENT);
    Intent deliveredUntent = new Intent(DELIVERED);

    PendingIntent sentPI = PendingIntent.getBroadcast(this, 0,sentIntent, 0);        
    PendingIntent deliveredPI = PendingIntent.getBroadcast(this, 0,deliveredUntent, 0);

    //---when the SMS has been sent---
    sentReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode()){
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS sent "+k,Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_GENERIC_FAILURE:
                    Toast.makeText(getBaseContext(), "Generic failure",Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NO_SERVICE:
                    Toast.makeText(getBaseContext(), "No service",Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_NULL_PDU:
                    Toast.makeText(getBaseContext(), "Null PDU",Toast.LENGTH_SHORT).show();
                    break;
                case SmsManager.RESULT_ERROR_RADIO_OFF:
                    Toast.makeText(getBaseContext(), "Radio off",Toast.LENGTH_SHORT).show();
                    break;
            }
        }
    };

    //---when the SMS has been delivered---
    deliverReceiver = new BroadcastReceiver() {
        @Override
        public void onReceive(Context arg0, Intent arg1) {
            switch (getResultCode()){
                case Activity.RESULT_OK:
                    Toast.makeText(getBaseContext(), "SMS delivered", Toast.LENGTH_SHORT).show();
                    break;
                case Activity.RESULT_CANCELED:
                    Toast.makeText(getBaseContext(), "SMS not delivered", Toast.LENGTH_SHORT).show();
                    break;                      
            }           
        }
    };  

    try{
        registerReceiver(sentReceiver, new IntentFilter(SENT));
        registerReceiver(deliverReceiver, new IntentFilter(DELIVERED));
    } catch (Exception e) {
        e.printStackTrace();
    }

    SmsManager sms = SmsManager.getDefault();
    sms.sendTextMessage(phoneNumber, null, message, sentPI, deliveredPI); 
} 
```

# c++ - 静态库架构剥离

> ID：12559168
> 
> 赞同：2
> 
> 时间：2012-09-24T05:13:36.410
> 
> 标签：c++, ios, static-libraries, universal-binary

我有一些为 iOS 平台编译的静态库。为 iPhone 设备（armv6、armv7）和 iPhone 模拟器（i386）编译库，然后**打包成一个通用库静态库**（armv6、armv7、i386）。

这种方法的优点是我必须处理单个库文件。缺点是库文件的大小可能会变得非常大（例如：对于所有 3 种体系结构的几乎所有 Boost C++ 库都为 300Mb+）。在 iOS App Store 上发布应用程序时，这将是一个问题。

Lipo 可以提取应用程序所针对的架构（例如：iOS 设备的 armv6/armv7）。

但是，**我想知道 Xcode 是否会自动剥离未使用的架构？**例如：如果我为 armv6、armv7 构建，Xcode 会删除 i386 架构吗？

**您使用的其他策略是什么？**例如：为每个架构创建一个库文件？

谢谢

# node.js - 当 .ejs 文件更改时，是否有类似 nodemon 的东西会重新启动节点应用程序？

> ID：12559176
> 
> 赞同：25
> 
> 时间：2012-09-24T05:14:25.307
> 
> 标签：node.js

有没有类似 nodemon 的东西可以处理 .ejs 文件更改？

nodemon 将检测 .js 或 .coffee 文件中的更改并重新启动您的节点应用程序。但它不会检测到查看文件的更改。我已经给作者发了电子邮件，但他们没有回应。

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-30T21:56:17.687

当您发布问题时，这可能没有实现，但您只需传递选项

```
-e coffee,js,ejs 
```

请参阅文档：[https ://github.com/remy/nodemon](https://github.com/remy/nodemon)

`supervisor`是另一种选择，但是当我上次使用它时，它正在吃 CPU。现在可能已经解决了，但我会坚持使用`nodemon`.

* * *

## 回答 #2

> 赞同：18
> 
> 时间：2012-09-24T16:16:59.743

您可以使用主管。[https://github.com/isaacs/node-supervisor](https://github.com/isaacs/node-supervisor)或`npm install supervisor -g`

如果您需要查看某些文件，只需更新 -e 参数。所以你会运行类似于

```
supervisor -e 'js|ejs|node|coffee' app.js 
```

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-05-09T10:56:39.800

在你的 packages.json 中使用它

```
"scripts":{
"start":"nodemon -e js,ejs,html -w . -w public -w views -w routes -w models server.js"
} 
```

Supervisor 经常占用我大约 20% 的 CPU

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T11:19:45.437

1.  您可以使用自写的监视器包装 ejs，该监视器将监视文件更改并清除模板缓存。
2.  您可以将模板引擎更改为已经支持热重载的模板引擎。我推荐你[ECT](http://ectjs.com)。它支持从框中自动重新加载模板（带有`watch`选项），并且比 EJS 和许多其他方法[快几倍。](http://ectjs.com/#benchmark)

# java - 如何使用 java 将 YYYDD 转换为 YYYY-MM_DD 格式

> ID：12559177
> 
> 赞同：0
> 
> 时间：2012-09-24T05:14:44.403
> 
> 标签：java, date, valueconverter

我正在以 的格式获取日期`YYYDD`，我想将其转换为`YYYY-MM-DD`，我尝试了几种方法但没有运气，任何人有解决方案请建议。

在谷歌上搜索后，我得到了下面的链接，它具有转换上述数据格式的功能，但它要求两个参数，一个是输入日期字符串，第二个是要添加的天数。任何建议 [translateDateStr](http://grepcode.com/file/repo1.maven.org/maven2/org.agmip.translators/translator-dssat/1.0/org/agmip/translators/dssat/DssatCommonInput.java#DssatCommonInput.translateDateStr%28java.lang.String,java.lang.String%29)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T05:24:55.680

使用[`SimpleDateFormat`](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)：

```
 SimpleDateFormat format1 = new SimpleDateFormat("yyDDD");
     SimpleDateFormat format2 = new SimpleDateFormat("yyyy-MM-dd");

     String oldDate = "12060";
     Date d = format1.parse(oldDate);
     String newDate = format2.format(d)

     System.out.println(newDate); 
```

将打印出“2012-02-29”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T11:22:59.810

使用乔达时间

```
import org.joda.time.LocalDate;
import org.joda.time.format.DateTimeFormat;
import org.joda.time.format.DateTimeFormatter;

String yyyddd_date= "00130";
DateTimeFormatter inputFormat = DateTimeFormat.forPattern("yyDDD");
DateTimeFormatter outputFormat = DateTimeFormat.forPattern("yyDDD");
String outputformatdatestring = LocalDate.parse(yyyddd_date, inputFormat).toString(outputFormat); 
```

格式代码（来自[http://joda-time.sourceforge.net/api-release/index.html](http://joda-time.sourceforge.net/api-release/index.html)）

```
Symbol  Meaning                      Presentation  Examples
------  -------                      ------------  -------
G       era                          text          AD
C       century of era (>=0)         number        20
Y       year of era (>=0)            year          1996

x       weekyear                     year          1996
w       week of weekyear             number        27
e       day of week                  number        2
E       day of week                  text          Tuesday; Tue

y       year                         year          1996
D       day of year                  number        189
M       month of year                month         July; Jul; 07
d       day of month                 number        10
a       halfday of day               text          PM
K       hour of halfday (0~11)       number        0
h       clockhour of halfday (1~12)  number        12

H       hour of day (0~23)           number        0
k       clockhour of day (1~24)      number        24
m       minute of hour               number        30
s       second of minute             number        55
S       fraction of second           number        978

z       time zone                    text          Pacific Standard Time; PST
Z       time zone offset/id          zone          -0800; -08:00; America/Los_Angeles

'       escape for text              delimiter
''      single quote                 literal       ' 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T05:24:55.210

使用 SimpleDateFormat：

```
SimpleDateFormat format = new SimpleDateFormat("yyDDD");
Date date = format.parse("12060", 0); 
```

为了以您想要的格式存储日期，您会做类似的事情，只是从另一个方向......

[http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/text/SimpleDateFormat.html)

# html - textarea 的 cols 属性是否应该指示比列数少 1？

> ID：12559180
> 
> 赞同：0
> 
> 时间：2012-09-24T05:15:12.313
> 
> 标签：html, textarea

我能找到的每个资源都说 textarea 的 cols 属性表示水平行中平均字符宽度的数量。然而，在 Chrome、Firefox 和 Safari（都在 OSX 上）中，将 textarea 的 cols 设置为（例如）80，使用等宽字体，将允许您在换行之前键入 81 个字符。这不是一个四舍五入的问题。cols=1 添加相同的数量。这也不是填充或边距问题；剥离所有样式的行为都是相同的。它只是列，而不是行。

这是指定的行为吗？如果是这样，为什么不在规范或数百个在线指南/资源中？如果这是一个非官方的约定，它是否足够可靠，我总是可以为 80 列设置 cols=79，而不是设置 css 宽度？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:07:56.590

的指定含义`cols`是“指定平均字符宽度中的可见宽度”，Windows平台的浏览器遵循这个。当然，如果字体不是等宽字体，“平均字符宽度”就成为一个模糊的概念，浏览器在宽度分配上可能会有所不同。

包装是一个不同的问题。HTML 4.01 规范仍然反映了在 textarea 中没有自动换行的旧想法，但浏览器通常拒绝这一点。默认情况下，它们会自动换行比该`cols`值更长的行，这在 Windows 浏览器上是准确的。

可以使用`wrap`非标准属性控制自动换行，但`wrap=off`它确实是使浏览器按照 HTML 4.01“标准”运行的唯一方法！

在 HTML5 草案中，[`wrap`属性](http://www.w3.org/TR/html5/the-textarea-element.html#attr-textarea-wrap)被定义，但只有值`soft`，`hard`所以它没有描述任何实现旧行为的方法。

作为一项规则，你不应该太担心这一点。`cols`根据您期望对用户最有用的内容设置属性。80 的值通常太大了。55 或 60 对应于正常的最佳线长度。并且为了方便书写，除非数据是计算机代码或预先格式化的文本，否则字体应设置为某种比例字体，这样您就不会得到每行字符的确切最大数量。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T05:31:32.560

有两件事要为此负责。

1.  **滚动条**

    根据 W3C 的说法，滚动条有额外的空间。[请参阅W3C](http://www.w3.org/TR/html401/interact/forms.html#adef-cols-TEXTAREA)的注释。

    > cols = 数字 [CN]
    > 
    > 此属性以平均字符宽度指定可见宽度。用户应该能够输入比这更长的行，因此当内容超出可见区域时，用户代理应该提供一些方法来滚动控件的内容。用户代理可以包装可见的文本行以保持长行可见，而无需滚动。

2.  **字体大小**

    `cols``100%`仅当您的字体大小为浏览器默认字体大小时，该属性才有效。如果你改变，它不会工作。任何隐式/显式`font-size`css 规则都会改变行为。

# jquery - 关于事件冒泡和 stopPropagation 的混淆，然后允许冒泡

> ID：12559183
> 
> 赞同：0
> 
> 时间：2012-09-24T05:15:25.457
> 
> 标签：jquery, events, stoppropagation

我的菜单是这样工作的：每个菜单项（例如，下面的菜单项之一）都位于`<td>`嵌套在 ANOTHER 中的表中`<td>`。该外部`<td>`有一些 onclick 事件处理程序（这里称为“processMenuClick()”）。

```
<td onClick="processMenuClick(<item-dependent-arguments>);">
    <table>
        <tr>
            <td class="innermenuitem">Menu Item One</td>
       </tr>
    </table></td> 
```

在某些情况下，我希望阻止菜单响应点击。为了测试这将如何工作，我制作了两个按钮。一个将 event.stopPropagation 应用于每个`<td>`“innermenuitem”类，如下所示：

```
<button onclick="javascript:stopit()">Test the disable menu functionality</button>

<script type="text/javascript">
function stopit()
{
    $("td.innermenuitem").click(function(event)
    {
        event.stopPropagation();
    })
}
</script> 
```

这似乎工作得很好。当我点击按钮时，菜单停止响应点击。但现在说我想重新启用菜单。click 处理程序在外​​部仍然不受干扰`<td>`。所以我希望我的第二个按钮禁用我已应用于内部的 stopPropagation `<td>`。那有意义吗？如果是这样，它是如何完成的？

注意：请注意，上面应该允许我禁用菜单并重新启用它，而无需将外部重新绑定`<td>`到其处理程序。这很重要，因为传递给“processMenuClick()”的参数仅在服务器上是已知的。如果我必须重新绑定处理程序，我将不得不想办法通过某种回发来召​​回它们。但我认为，既然我所做的就是停止从内部冒泡事件`<td>`，假设有办法撤消这个（并允许事件再次冒泡）我应该是金子。但是阅读其他线程似乎 stopPropagation 仅用于一个事件，而不是我想的那样，这基本上就像`<td>`. 有人可以让我直截了当吗？（希望能解决我的问题

段落

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:19:46.883

```
function startIt(){
     $('td.innermenuitem').off('click');
} 
```

stop 它应该与 on 方法绑定以使其尽可能简单。

```
function stopIt(){
    $('td.innermenuitem').on('click', function(event){
       event.stopPropagation();
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-09-28T18:19:26.980

还有一种不使用 jQuery 的方法：
dataSend
在**onclick**中发送一个 ajax 请求，您可以访问该**事件** ，因此在调用后，冒泡会通过**event.stopPropagation();停止。**
没有 stopPropagation 的 div '1' 中的点击事件也将被激活

```
<div id='1' class='mnb_bookinfo' 
onclick='dataSend(cBookInfo,34)';>

<div id='2' class='mnb_bookedit' 
onclick="dataSend(cBookEdit,34);event.stopPropagation();">
<img src='misc/mnb/icon_edit.svg' width=32 height=32>
</div>

</div> 
```

# android - 如何在eclipse最新版本eclipse juno中添加android？

> ID：12559187
> 
> 赞同：-1
> 
> 时间：2012-09-24T05:15:48.453
> 
> 标签：android, eclipse

最近我从[eclipse 网站](http://www.eclipse.org/downloads/)下载了最新版本的 eclipse ，我刚刚安装了它，但我在 eclipse 中找不到 android（在我的旧版本中，它位于**Project --> Properties --> Android**下）任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:21:42.943

To install the ADT plugin in eclipse

[http://developer.android.com/sdk/installing/installing-adt.html](http://developer.android.com/sdk/installing/installing-adt.html)

# iphone - 启动 IOS 应用程序时删除 PhoneGap 徽标

> ID：12559188
> 
> 赞同：0
> 
> 时间：2012-09-24T05:15:57.947
> 
> 标签：iphone, html, ios, xcode, cordova

IOS 应用程序开发与电话差距。首次安装/启动应用程序时，会出现 PhoneGap 徽标（带有文本 - 'iphone视网膜'），需要将其删除。我无法弄清楚它是图像还是 css，它位于何处以及如何将其删除。任何建议将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:55:50.760

您需要删除当前的 Default.png 文件并放入您自己的**Default.png 文件（noraml 为 320x480）**。对于 ratina 图像，请保留**Default@2x.png (640x960) 文件**。

# ruby-on-rails-3 - Postgresql 通过自制软件与山狮 OS X

> ID：12559192
> 
> 赞同：10
> 
> 时间：2012-09-24T05:16:38.343
> 
> 标签：ruby-on-rails-3, osx-mountain-lion, homebrew, rails-postgresql

这让我烦恼不已。

我正在使用 OS 10.8.2 (Mountain Lion) 的 Mac 上使用 Postgresql 设置 Rails 3.2 环境。

我基本上遵循[Railscast](http://railscasts.com/episodes/342-migrating-to-postgresql)中的指示，并通过 Homebrew 安装了 postgresql 9.2.0 版。但每当我这样做

```
which psql 
```

和

```
psql --version 
```

它总是向我显示预装了 Mountain Lion 的系统 postgresql 的位置和版本（`/usr/bin/psql`分别是 9.1.4 版），而不是我使用 Homebrew 安装的 Postgresql 的位置和版本（`/usr/local/bin`分别是 9.2.0 版） ）。

我还设置了一个启动代理，以便在我启动系统时自动启动 postgresql。

我什至尝试按照这个[博客](http://metacog.tumblr.com/post/28333408639/setting-up-a-development-environment-on-mountain-lion)的指示，运行时仍然得到相同的结果`which psql`。

但是，当我这样做时：

```
ps -ef | grep postgres 
```

我收到以下结果：

```
501   556   120   0 Fri02AM ??         0:00.12 /usr/local/bin/postgres -D /usr/local/var/postgres -r /usr/local/var/postgres/server.log 
```

这是否意味着我正在运行 postgresql 的自制版本？

我必须卸载系统postgresql吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-25T19:11:49.503

另一种选择是使用 Heroku 的 Postgres.app，我个人觉得这更容易设置和管理。

[http://postgresapp.com/](http://postgresapp.com/)

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-24T05:29:25.473

通过将目录路径（/usr/local/bin）添加到配置文件中， `~/.bash_profile` 您将解决上述问题。

要了解更多信息，[请参阅此链接。](http://www.jonathandean.com/2011/08/postgresql-8-4-on-mac-os-x-10-7-lion/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-09T09:33:34.100

如果您使用**Heroku 的 Postgres.app**，请添加

```
导出 PATH=/Applications/Postgres.app/Contents/MacOS/bin:$PATH
```

到 ~/.bash_profile，它应该可以解决问题。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-14T09:03:24.247

尝试添加：

```
export PATH=/usr/local/bin:$PATH 
```

在你的 ~/.bash_profile

我认为这适用于通过 Homebrew 安装 Postgres

# java - 带有 java Swing 的 MVC 模式

> ID：12559194
> 
> 赞同：2
> 
> 时间：2012-09-24T05:16:45.967
> 
> 标签：java, swing, model-view-controller

我有一个使用 MVC 模式开发 Java Swing 应用程序的想法。我在下面描述了我的想法，请告诉我，这是将 MVC 模式用于 java Swing 的正确方法吗？

*   这是视图

![在此处输入图像描述](../Images/ff5740ddb3ed6362ed8dae88e641e608.png)

以下方法用于获取和设置上述视图的名称，

```
//at top of the view its model and controller is defined as
    Model model = null;
    Controller controller = null;

//constructor
public view(){
   this.model = new Model();
   this.controller = new Controller(this, model);//controller takes view and model as its parameters.
}

public void v_addShowNameButtonsActionListener(ActionListener al){
    btnActionListener.addActionListener(al);
}

public String v_getName(){
    return txtName.getText();// txtName is the name of the text field.
}

public void v_setName(String name){
    txtName.setText(name);
} 
```

*   这是控制器

> ```
>  /*at the top of the controller define the view and model*/
> 
>     View view = null;
>     Model model = null;
> 
>     /* constructor of the controller*/
>     public Constructor(View view, Model model){
>       this.view = view;
>       this.model = model;
>     }   
> 
>     class CreateShowNameButtonsActionListener implements ActionListener{
>       @Override
>       public void actionPerformed(ActionEvent e) {
>           Connection con = null;
>           try{
>               con = ******************** /*get the data base connection*/    
>               view.setName(model.m_getName(con));
>           }catch(Exception ex){
>               ex.printStackTrace();
>           }finally{
>               con.close();
>           }
>       }
>     } 
> ```

*   这是模型

> ```
> Public class Model{
>    public String m_getName(Connection con){
>       String name;
> 
>       name = ******* //do database queries and set get the name form the database
> 
>       return name;
>    }
> } 
> ```

我已经简要描述了我将在 java Swing 中实现 MVC 模式的方式。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T05:21:19.873

A change I would make maybe would be to do all database related operations within the model, that is, even managing my own database connections. This will allow the `Controller` class to be completely independent from the where and the how you get the data.

All that the `Controller` needs to know is that it needs to call the `Model` to get whatever information it needs to eventually pass on to the `View`.

As an extra note as well, it is usually a good idea to implement an extra layer between the `Controller` and the `Model`, known as a `Service` layer. This *usually* comes in handy when you also need to expose certain similar functionality through other means, such as REST. This will allow you to write all your queries in the `Model` layer, then, any extra customization will be done within the `Service` layer. This will allow the `Controller` and REST API to deliver the same functionality without either cluttering the `Model` layer or else have duplicate code in the `Controller` and REST API.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T05:24:15.140

一切看起来都很好，除了

```
 class CreateShowNameButtonsActionListener implements ActionListener{
                  @Override
                  public void actionPerformed(ActionEvent e) {
                      Connection con = null;
                      try{
                          con = ******************** /*get the data base connection*/    
                          view.setName(model.m_getName(con));
                      }catch(Exception ex){
                          ex.printStackTrace();
                      }finally{
                          con.close();
                      }
                  }
                } 
```

这里不应该有任何数据库调用，它应该只对模型进行 getter 调用，数据库连接代码应该移动到模型。

希望能帮助到你 ...

# java - 将视频从一个设备流式传输到另一个设备时，谁是服务器，谁是客户端？

> ID：12559198
> 
> 赞同：1
> 
> 时间：2012-09-24T05:17:20.790
> 
> 标签：java, android, sockets, serversocket

我正在编写一个 Android 应用程序，其中设备 1 通过套接字连接到设备 2 并开始向其流式传输实时视频。在这种情况下，谁是服务器，谁是客户端？在我的应用程序中，设备 2 将监听连接。一旦它`accepts()`，设备 1 将视频流式传输到设备 2。

我要问的是`ServerSocket`去哪里，常规`Socket`去哪里？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:28:57.037

ServerSocket 应该在设备 1（服务器）上运行，设备 2（客户端）将消耗视频。

下面是一个例子： [http ://www.exampledepot.com/egs/java.net/CreateClientSocket.html](http://www.exampledepot.com/egs/java.net/CreateClientSocket.html)

# android - SQLite 数据库后应用程序崩溃

> ID：12559201
> 
> 赞同：4
> 
> 时间：2012-09-24T05:17:48.333
> 
> 标签：android, android-sqlite

我有一部分代码在查询数据库后返回一个数组，但是当我运行应用程序时，它崩溃了

```
//info is the name of the object of the type DataBase
    info.open();
    String[] data = info.queryAll();
    info.close(); 
```

数据库代码的一部分，我试图检索某一列的所有数据库行

```
public String[] queryAll() {
    String[] columns = new String[] { KEY_NAME };
    Cursor cursor = ourDatabase.query(DATABASE_TABLE, columns, null, null,
            null, null, null);
    if (cursor != null) {
        try {
            final int nameColumnIndex =                     cursor.getColumnIndex(KEY_NAME);
            List<String> names = new ArrayList<String>();
            while (cursor.moveToNext()) {
                names.add(cursor.getString(nameColumnIndex));
            }
            return names.toArray(new String[names.size()]);
        } finally {
            cursor.close();
        }
    }
    return null;

} 
```

是因为我的数据库一开始是空的吗？如果是这样，我该如何更正代码？所有建议都会有所帮助'谢谢

LOGCAT

```
09-23 22:26:47.780: E/AndroidRuntime(2825): FATAL EXCEPTION: main
09-23 22:26:47.780: E/AndroidRuntime(2825): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.contactlist/com.example.contactlist.Contacts}: android.database.sqlite.SQLiteException: no such table: mycontacts (code 1): , while compiling: SELECT Contact_name FROM mycontacts
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.app.ActivityThread.access$600(ActivityThread.java:130)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.os.Handler.dispatchMessage(Handler.java:99)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.os.Looper.loop(Looper.java:137)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.app.ActivityThread.main(ActivityThread.java:4745)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at java.lang.reflect.Method.invokeNative(Native Method)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at java.lang.reflect.Method.invoke(Method.java:511)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at dalvik.system.NativeStart.main(Native Method)
09-23 22:26:47.780: E/AndroidRuntime(2825): Caused by: android.database.sqlite.SQLiteException: no such table: mycontacts (code 1): , while compiling: SELECT Contact_name FROM mycontacts
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.database.sqlite.SQLiteConnection.nativePrepareStatement(Native Method)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.database.sqlite.SQLiteConnection.acquirePreparedStatement(SQLiteConnection.java:882)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.database.sqlite.SQLiteConnection.prepare(SQLiteConnection.java:493)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.database.sqlite.SQLiteSession.prepare(SQLiteSession.java:588)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.database.sqlite.SQLiteProgram.<init>(SQLiteProgram.java:58)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.database.sqlite.SQLiteQuery.<init>(SQLiteQuery.java:37)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.database.sqlite.SQLiteDirectCursorDriver.query(SQLiteDirectCursorDriver.java:44)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.database.sqlite.SQLiteDatabase.rawQueryWithFactory(SQLiteDatabase.java:1314)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.database.sqlite.SQLiteDatabase.queryWithFactory(SQLiteDatabase.java:1161)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1032)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.database.sqlite.SQLiteDatabase.query(SQLiteDatabase.java:1200)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at com.example.contactlist.DBContact.queryAll(DBContact.java:97)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at com.example.contactlist.Contacts.onCreate(Contacts.java:38)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.app.Activity.performCreate(Activity.java:5008)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
09-23 22:26:47.780: E/AndroidRuntime(2825):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
09-23 22:26:47.780: E/AndroidRuntime(2825):     ... 11 more 
```

数据库代码

```
public class DBContact {

    public static final String KEY_ROWID = "_id";
    public static final String KEY_NAME = "Contact_name";
    public static final String KEY_PERSONALPHONE = "Personal_Phonenumber";
    public static final String KEY_HOMEPHONE = "Home_Phonenumber";
    public static final String KEY_OFFICEPHONE = "Office_Phonenumber";

    private static final String DATABASE_NAME = "Contact_name";
    private static final String DATABASE_TABLE = "mycontacts";
    private static final int DATABASE_VERSION = 1;

    // Instance of the class DbHelper
    private DbHelper ourHelper;
    private final Context ourContext;
    private SQLiteDatabase ourDatabase;

    public static final String[] KEYS_ALL = { DBContact.KEY_ROWID,
            DBContact.KEY_NAME, DBContact.KEY_PERSONALPHONE,
            DBContact.KEY_HOMEPHONE, DBContact.KEY_OFFICEPHONE };

    private static class DbHelper extends SQLiteOpenHelper {

        private static final String DATABASE_CREATE = "create table contacts (_id integer primary key autoincrement, "
                + "Contact_name text not null, Personal_Phonenumber text not null, Home_Phonenumber text not null, Office_Phone text not null); ";

        public DbHelper(Context context) {
            super(context, DATABASE_NAME, null, DATABASE_VERSION);
            // TODO Auto-generated constructor stub
        }

        @Override
        public void onCreate(SQLiteDatabase ourDatabase) {
            // TODO Auto-generated method stub
            try {
                ourDatabase.execSQL(DATABASE_CREATE);
            } catch (SQLException e) {
                e.printStackTrace();
            }
        }           

        @Override
        public void onUpgrade(SQLiteDatabase ourDatabase, int oldVersion, int newVersion) {
            // TODO Auto-generated method stub
            ourDatabase.execSQL("DROP TABLE IF EXISTS contacts");
            onCreate(ourDatabase);

        }

    }

    // Context of constructor withhin our Class
    public DBContact(Context c) {
        ourContext = c;
    }

    // Opens the database
    public DBContact open() throws SQLException {
        // Constructor for DB Helper class takes in a Context
        // Context is passed in is "ourContext" for within our class

        ourHelper = new DbHelper(ourContext);
        // Passes in DB Name and Version
        // ourDatabase is of type SQLite DataBase
        ourDatabase = ourHelper.getWritableDatabase();
        return this;
    }

    // Closes the database connection
    public void close() {
        // refer to our DbHelper and close the SQLite DataBase Helper
        ourHelper.close();
        ourHelper = null;
        ourDatabase = null;
    }

    // Deletes the Row
    public boolean deleteRow(long rowId) {
        return ourDatabase.delete(DATABASE_TABLE, DBContact.KEY_ROWID + "="
                + rowId, null) > 0;
    }

    public String[] queryAll() {
        String[] columns = new String[] { KEY_NAME };
        Cursor cursor = ourDatabase.query(DATABASE_TABLE, columns, null, null,
                null, null, null);
        if (cursor != null) {
            try {
        final int nameColumnIndex = cursor.getColumnIndex(KEY_NAME);
        List<String> names = new ArrayList<String>();
        cursor.moveToFirst();
        while (cursor.moveToNext()) {
            names.add(cursor.getString(nameColumnIndex));
        }
        return names.toArray(new String[names.size()]);
    } finally {
        cursor.close();
   }
        }
        return null;
    }

    /*public Cursor queryAll(){
    String[] columns = new String[] {KEY_NAME};
        return   ourDatabase.query(DATABASE_TABLE, columns, null, null, null, null, null);
    if(data == null){
        columns[0] = "NO CONTACTS PRESENT";
        return columns;
    }else{
        return columns;
    }

    }*/

    public long newRow(String name, String pphone, String hphone, String ophone) {
        // TODO Auto-generated method stub
        ContentValues newvalue = new ContentValues();
        newvalue.put(KEY_NAME, name);
        newvalue.put(KEY_PERSONALPHONE, pphone);
        newvalue.put(KEY_HOMEPHONE, hphone);
        newvalue.put(KEY_OFFICEPHONE, ophone);
        return ourDatabase.insert(DATABASE_TABLE, null, newvalue);

    }

    public String getName(Long l) {
        // TODO Auto-generated method stub
        String[] columns = new String[] { KEY_ROWID, KEY_NAME,
                KEY_PERSONALPHONE, KEY_HOMEPHONE, KEY_OFFICEPHONE };
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "="
                + 1, null, null, null, null);
        if (c != null) {
            c.moveToFirst();
            String name = c.getString(1);
            return name;
        }
        return null;
    }

    public String getPphone(Long l) {
        // TODO Auto-generated method stub
        String[] columns = new String[] { KEY_ROWID, KEY_NAME,
                KEY_PERSONALPHONE, KEY_HOMEPHONE, KEY_OFFICEPHONE };
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "="
                + 1, null, null, null, null);
        if (c != null) {
            c.moveToFirst();
            String Pphone = c.getString(2);
            return Pphone;

        }
        return null;
    }

    public String getHphone(Long l) {
        // TODO Auto-generated method stub
        String[] columns = new String[] { KEY_ROWID, KEY_NAME,
                KEY_PERSONALPHONE, KEY_HOMEPHONE, KEY_OFFICEPHONE };
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "="
                + 1, null, null, null, null);
        if (c != null) {
            c.moveToFirst();
            String Hphone = c.getString(3);
            return Hphone;

        }
        return null;
    }

    public String getOphone(Long l) {
        // TODO Auto-generated method stub
        String[] columns = new String[] { KEY_ROWID, KEY_NAME,
                KEY_PERSONALPHONE, KEY_HOMEPHONE, KEY_OFFICEPHONE };
        Cursor c = ourDatabase.query(DATABASE_TABLE, columns, KEY_ROWID + "="
                + 1, null, null, null, null);
        if (c != null) {
            c.moveToFirst();
            String Ophone = c.getString(4);
            return Ophone;

        }
        return null;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:31:41.630

您正在创建另一个表

```
private static final String DATABASE_CREATE = "create table contacts (_id integer  
primary key autoincrement, "
            + "Contact_name text not null, Personal_Phonenumber text not null, 
Home_Phonenumber text not null, Office_Phone text not null); "; 
```

在这里，您正在创建联系人表，而不是您需要的表

利用

```
mycontacts 
```

而不是

```
contacts 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:39:00.933

在您的 create table 语句中，您的表称为联系人：

```
private static final String DATABASE_CREATE = "create table contacts (_id integer primary key autoincrement, "
        + "Contact_name text not null, Personal_Phonenumber text not null, Home_Phonenumber text not null, Office_Phone text not null); "; 
```

然而在您的查询中，它的 mycontacts：

```
private static final String DATABASE_TABLE = "mycontacts"; 
```

这可以解释为什么错误告诉您表 mycontacts 不存在。

尝试将常量更改为：

```
private static final String DATABASE_TABLE = "contacts"; 
```

哪个应该解决这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T16:17:29.030

```
 private static final String DATABASE_CREATE = "create table contacts (_id integer primary key autoincrement, "
                + "Contact_name text not null, Personal_Phonenumber text not null, Home_Phonenumber text not null, Office_Phone text not null); "; 
```

上述代码中的 Office_Phone 与声明不匹配。还有别人说的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T05:49:35.600

您是否创建了`mycontacts`表，如果没有，您应该扩展`SQLiteOpenHelper`并覆盖`onCreate`，如下所示：

```
 @Override
    public void onCreate(SQLiteDatabase db) {
            db.execSQL("HERE IS YOUR SQL STATEMENT FOR CREATING mycontacts TABLE");
    } 
```

每次需要查询数据库时，都可以使用自己的 SQLiteOpenHelper 的[getReadabledatabase()获取数据库实例；](http://developer.android.com/reference/android/database/sqlite/SQLiteOpenHelper.html#getReadableDatabase%28%29)

# java - 无法以编程方式创建 AZURE VM

> ID：12559207
> 
> 赞同：3
> 
> 时间：2012-09-24T05:18:40.330
> 
> 标签：java, windows, azure

我们正在尝试使用 Azure 公开的 REST API 通过 Java 中的 HTTPClient 创建虚拟机。我们正在使用以下请求 URL 和 XML，但我们收到“错误请求”响应。

[https://management.core.windows.net/](https://management.core.windows.net/) {subscription-id}/services/hostedservices/{existing hoster service name}/deployments

```
<Deployment xmlns="http://schemas.microsoft.com/windowsazure" xmlns:i="http://www.w3.org/2001/XMLSchema-instance">
  <Name>TestVMAnandP</Name>
  <Label>bXl2bQ==</Label>
  <RoleList>
    <Role>
      <RoleName>TestVMAnandP</RoleName>
      <RoleType>PersistentVMRole</RoleType>
      <ConfigurationSets>
        <ConfigurationSet>
          <ConfigurationSetType>LinuxProvisioningConfiguration</ConfigurationSetType>
          <HostName>TestVMAnandP</HostName>
          <UserName>root</UserName>
          <UserPassword>test</UserPassword>
        </ConfigurationSet>
      </ConfigurationSets>
      <DataVirtualHardDisks>
        <DataVirtualHardDisk>
          <Lun>10</Lun>
          <LogicalDiskSizeInGB>50</LogicalDiskSizeInGB>
        </DataVirtualHardDisk>
      </DataVirtualHardDisks>
      <OSVirtualHardDisk>
        <SourceImageName>srini2-srini2-2012-08-23.vhd</SourceImageName>
        <MediaLink>http://sriniteststore.blob.core.windows.net/vhds/srini2-srini2-2012-08-23.vhd</MediaLink>
      </OSVirtualHardDisk>
      <RoleSize>ExtraSmall</RoleSize>
    </Role>
  </RoleList>
  <VirtualNetworkName>MyNetwork</VirtualNetworkName>
</Deployment> 
```

如果我们尝试在 URL 中提供与 vm 名称相同的服务名称，则会收到 404 错误。我们已经尝试了网络中给出的大多数示例，并替换了值，但一切都给了我们 400 错误。如果我们能得到一些帮助，那就太好了。

错误：

我得到两种不同的错误：

* * *

```
Error 1 : When i use new <service-name> inside the below URL .management.core.windows.net/<subscription-id>/services/hostedservices/<service-name>/deployments/                          -------------------------------------------------------------------   Response message--->Not Found---404
java.io.FileNotFoundException: management.core.windows.net/84cc18f5-5bdd-4c95-9d69-862c12c53507/services/hostedservices/anand/deployments
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
Caused by: java.io.FileNotFoundException: management.core.windows.net/84cc18f5-5bdd-4c95-9d69-862c12c53507/services/hostedservices/anand/deployments
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source) 
```

* * *

```
Error 2 : when i use an existing available <service-name> in the below URL  management.core.windows.net/<subscription-id>/services/hostedservices/<service-name>/deployments/                                                   
Response message--->Bad Request---400
java.io.IOException: Server returned HTTP response code: 400 for URL: management.core.windows.net/84cc18f5-5bdd-4c95-9d69-862c12c53507/services/hostedservices/azurecogservice/deployments
    at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)
    at sun.reflect.NativeConstructorAccessorImpl.newInstance(Unknown Source)
Caused by: java.io.IOException: Server returned HTTP response code: 400 for URL: management.core.windows.net/84cc18f5-5bdd-4c95-9d69-862c12c53507/services/hostedservices/azurecogservice/deployments
    at sun.net.www.protocol.http.HttpURLConnection.getInputStream(Unknown Source) 
```

---------------------有效的 XML--------------- ----------------------------------

```
<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Deployment xmlns="http://schemas.microsoft.com/windowsazure">
    <Name>190bed4a</Name>
    <DeploymentSlot>Production</DeploymentSlot>
    <Label>190bed4a</Label>
    <RoleList>
        <Role>
            <RoleName>SuseOpenVm_rolec8fc</RoleName>
            <RoleType>PersistentVMRole</RoleType>
            <ConfigurationSets>
                <ConfigurationSet>
                    <ConfigurationSetType>LinuxProvisioningConfiguration
                    </ConfigurationSetType>
                    <HostName>SuseOpenVm_rolec8fc</HostName>
                    <UserName>anandsrinivasan</UserName>
                    <UserPassword>Cloud360</UserPassword>
                    <DisableSshPasswordAuthentication>false</DisableSshPasswordAuthentication>
                </ConfigurationSet>
                <ConfigurationSet>
                    <ConfigurationSetType>NetworkConfiguration</ConfigurationSetType>
                    <DisableSshPasswordAuthentication>false</DisableSshPasswordAuthentication>
                    <InputEndpoints>
                        <InputEndpoint>
                            <LocalPort>22</LocalPort>
                            <Name>SSH</Name>
                            <Port>22</Port>
                            <Protocol>TCP</Protocol>
                        </InputEndpoint>
                    </InputEndpoints>
                </ConfigurationSet>
            </ConfigurationSets>
            <OSVirtualHardDisk>
                <MediaLink>https://portalvhdsvf842yxvkhbg4.blob.core.windows.net/vhds/190bed4a.vhd</MediaLink>
                <SourceImageName>SUSE__openSUSE-12-1-20120603-en-us-30GB.vhd</SourceImageName>
            </OSVirtualHardDisk>
            <RoleSize>Small</RoleSize>
        </Role>
    </RoleList>
    <VirtualNetworkName>anand360NW</VirtualNetworkName>
</Deployment> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:32:12.447

每当我遇到 REST API 问题时，我都会首先尝试通过门户完成我想要做的事情。在您的情况下，我尝试使用用户名 root 和密码 test 创建一个 Linux VM（TestVMAnandP）。我立即注意到以下错误：

*   不允许使用用户名“root”
*   密码至少应为 8 个字符
*   密码应包含以下 3 项：
    *   小写字符
    *   一个大写字符
    *   一个号码
    *   一个特殊的字符

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:52:13.213

不久前我一直在做同样的事情。

我建议您查看我在 Cloudify GitHub 存储库中使用此 API 的 java REST 客户端的实现：

[https://github.com/CloudifySource/cloudify/blob/master/esc/src/main/java/org/cloudifysource/esc/driver/provisioning/azure/client/MicrosoftAzureRestClient.java](https://github.com/CloudifySource/cloudify/blob/master/esc/src/main/java/org/cloudifysource/esc/driver/provisioning/azure/client/MicrosoftAzureRestClient.java)

另一个很好的参考是我的 Microsoft 提供的 node.js sdk。您可以浏览代码并查看哪里出错了：

[https://github.com/WindowsAzure/azure-sdk-for-node/blob/master/lib/services/serviceManagement/servicemanagementservice.js](https://github.com/WindowsAzure/azure-sdk-for-node/blob/master/lib/services/serviceManagement/servicemanagementservice.js)

希望能帮助到你

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T12:38:01.140

服务管理 API 文档严重混乱。如果你是受害者，我不会感到惊讶。您可以尝试的一件事是更改

```
<LogicalDiskSizeInGB>50</LogicalDiskSizeInGB> 
```

元素到

```
<LogicalSizeInGB>50</LogicalSizeInGB> 
```

在您的 DataVirtualHardDisk 元素下。

我建议这样做的原因是，如果您查看 Get Data Disk (http://msdn.microsoft.com/en-us/library/windowsazure/jj157180.aspx) 的文档，它会提到您得到 **LogicalDiskSizeInGB**作为响应元素之一，但是当您执行此函数时，您返回的元素是**LogicalSizeInGB**。

这又是一种预感。试试看。

**更新**

您可能想要做的另一件事是解析异常以获得更多详细信息。在 .Net 中，我们得到一个 WebException（抱歉，很久没有在 Java 中工作了）所以我通常做的是读取该异常的响应，然后返回一个包含更多细节的 XML。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T06:20:03.213

错误代码 400/4xx 表示请求有问题。错误代码 404 明确表示“服务器未找到任何与给定 URI 匹配的内容”。那么您能否验证 OSVertualHardDisck 中提供的信息是否正确。

```
<OSVirtualHardDisk>
        <SourceImageName>srini2-srini2-2012-08-23.vhd</SourceImageName>
        <MediaLink>http://sriniteststore.blob.core.windows.net/vhds/srini2-srini2-2012-08-23.vhd</MediaLink>
      </OSVirtualHardDisk> 
```

**更新**

是您尝试使用的服务 [http://msdn.microsoft.com/en-us/library/windowsazure/jj157194.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/jj157194.aspx)

您可以在此处查看错误代码说明 [http://msdn.microsoft.com/en-us/library/windowsazure/ee460801.aspx](http://msdn.microsoft.com/en-us/library/windowsazure/ee460801.aspx)

您使用的目标 URL 可能无效或服务器不期望。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T23:49:31.467

Anand，这个 API 有问题。我已经在[流利的管理](http://fluentmanagement.elastacloud.com)中实现了这一点 ，不幸的是 XML 是依赖于顺序的。

如果这不准确，您可以在 400 到 500 个 HTTP 异常之间循环。我将使用`powershell`详细模式编写您的 VM 创建，并让您的应用程序按照您看到的确切顺序使用 XML，它应该没问题。

在接下来的几天里，我将在[http://blog.elastacloud.com](http://blog.elastacloud.com)上发布一个 java 服务管理客户端示例，它使用一个`.publishsettings`文件来发出请求，这可能对您有所帮助。

# javascript - 如何从 .t pl 文件中动态出现的数字中删除逗号

> ID：12559208
> 
> 赞同：32
> 
> 时间：2012-09-24T05:18:48.177
> 
> 标签：javascript, jquery, gwt

我想从 .tpl 文件中的数字中删除逗号（例如将 1,125 更改为 1125 ）。该值是动态的`${variableMap[key]}`

* * *

## 回答 #1

> 赞同：75
> 
> 时间：2012-09-24T05:23:33.847

```
var a='1,125';
a=a.replace(/\,/g,''); // 1125, but a string, so convert it to number
a=parseInt(a,10); 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：20
> 
> 时间：2017-03-06T21:53:37.787

```
var a='1,125'
a=a.replace(/\,/g,'')
a=Number(a) 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-01-28T18:59:06.510

You can use the below function. This function can also handle larger numbers like 123,123,123.

```
function removeCommas(str) {
    while (str.search(",") >= 0) {
        str = (str + "").replace(',', '');
    }
    return str;
}; 
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-05-24T22:09:36.920

```
var s = '1,125';
s = s.split(',').join(''); 
```

希望有帮助。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2020-08-05T12:03:56.780

您可以使用正则表达式进行更改，因为它比拆分连接更快

```
var s = '1,125';
s = s.replace(/,/g, '');

//output 1125 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-11-06T11:04:58.550

传入值可能并不总是字符串。如果传入的值是数字，则替换方法将不可用，并且您将收到错误消息。建议使用 isNaN 查看是否为数字，然后假设为字符串，否则进行替换。

```
if(isNaN(x)) {
    x = parseInt(x.replace(/[,]/g,''));
} 
```

（不是万无一失的，因为 'not number' 并不能证明它是一个字符串，但除非你正在做一些非常奇怪的事情应该足够好）。您还可以将其他符号添加到字符组以删除其他杂散字符（例如货币符号）。

# c# - 用于第三方 WPF 控制的 MVVM

> ID：12559210
> 
> 赞同：-1
> 
> 时间：2012-09-24T05:18:51.253
> 
> 标签：c#, wpf, mvvm

我们正在使用使用 WPF 开发且不支持 MVVM 的第三方图表控件。现在我们需要添加更多功能，并且应该支持按需添加/删除功能。我们需要创建具有新功能的 Wrapper Chart 控件，并且应该支持 MVVM。这个 dll/Module 将被其他一些模块/项目使用。

注意：对于每个新功能，我们都创建了 Handler 并组成了现有的图表控件。所以我们能够支持按需添加/删除功能。

问题：如何支持 MVVM，是否应该为每个 FeatureHandler 创建包装 FeatureHandler(View) 并且看起来像 MVVM 的 ViewModel？这部分需要澄清......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:07:15.593

不支持 MVVM 是什么意思？我听起来不太可能使用 WPF 开发的图表控件不会以依赖属性的形式公开属性。你有这个第三方图表控件的链接吗？

# django - Django 开发服务器的终端输出中的蓝色文本是什么意思？

> ID：12559213
> 
> 赞同：2
> 
> 时间：2012-09-24T05:19:10.507
> 
> 标签：django

有时，像“[24/Sep/2012 00:42:30] "GET / HTTP/1.1" 200 1904' 这样的正常终端绿色线之后的行是我正常的终端绿色，有时它们是蓝色的。我的网页显示发生了变化，它并不完全跟随蓝色/绿色输出的变化，但我在想知道输出颜色的变化意味着什么可能会给我一个关于正在发生的事情的线索。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:34:53.523

据我所知，正在从缓存中挑选蓝色的。

**编辑：**

来自[维基百科](http://en.wikipedia.org/wiki/List_of_HTTP_status_codes)：

*304 未修改*

表示资源自上次请求后未修改。[2] 通常，HTTP 客户端提供像 If-Modified-Since 标头这样的标头来提供比较的时间。使用它可以节省服务器和客户端的带宽和重新处理，因为与服务器重新处理的整个页面相比，只需发送和接收标头数据，然后使用服务器和客户端的更多带宽再次发送.

# php - 在我的网站上使用 Google Plus 登录

> ID：12559217
> 
> 赞同：5
> 
> 时间：2012-09-24T05:19:32.463
> 
> 标签：php, google-plus

我对网络开发很陌生。我用 Google plus 搜索了登录，发现了几个很好的教程。但它们似乎很旧（其中大部分来自 2011 年）。为什么？

我尝试了下面的代码块。

```
<script type="text/javascript" language="javascript">    
   $("#packagesGrid").load('https://www.googleapis.com/oauth2/v1/userinfo?alt=json&access_token=ya29.ahes6zt9yv2qaeej5ycn21fn9maokp15scwqkcal3guqxxez7odtjg&token_type=bearer&expires_in=3600');    
</script> 
```

我只是手动将令牌复制粘贴到 jQuery 加载函数上的 url。但是页面上没有填充任何内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T05:38:10.117

Google API 使用**OAuth 2.0**协议进行身份验证和授权。Google 支持多种 OAuth 2.0 流程，涵盖常见的 Web 服务器、JavaScript、设备、已安装的应用程序以及服务器到服务器的场景。Google 已弃用旧版 OAuth。

**这是它的工作原理**：[https ://developers.google.com/accounts/docs/OAuth2](https://developers.google.com/accounts/docs/OAuth2)

**要开始编码**，

[https://code.google.com/p/google-plus-php-starter/](https://code.google.com/p/google-plus-php-starter/)

只需下载项目并按照提到的步骤操作即可。

我最近尝试过这个，它工作**100%**正常。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-28T14:22:20.090

我现在正在参加 Google 演示，显然他们刚刚推出了[Google+ 登录](https://developers.google.com/+/)，它可以让你更优雅地做这样的事情。

真的，我对此一无所知，但它确实值得一看。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-24T05:36:24.420

我建议使用以下教程[Login with Google Account OAuth](http://www.9lessons.info/2012/09/login-with-google-account-oauth.html)。它解释了调用正确的方法并将用户数据保存到您的数据库中。另外，它是今天发布的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-01-22T12:14:17.880

为此，您必须使用 google 客户端 Api library for php

之后，您需要生成一些密钥（如客户端 ID、客户端密钥、Google 的简单 API 密钥）

那么您必须使用这些 API 并使用生成的密钥。您可以在相应的网站上找到完整的程序和文件...

如果您需要工作教程。

# c# - 以只读方式读取 HttpRuntime.Cache 项

> ID：12559219
> 
> 赞同：7
> 
> 时间：2012-09-24T05:19:40.620
> 
> 标签：c#, asp.net, .net, caching, httpruntime.cache

我正在使用 a`HttpRuntime.Cache`来存储将在会话中频繁访问的对象列表。

我使用以下代码行从缓存中获取项目：

```
List<chartData_Type> _chartData = 
             (List<chartData_Type>)HttpRuntime.Cache.Get("rollingMonth"); 
```

但是，不幸的是，当我更新**_chartData**时，它也会更新缓存的项目。

我怎样才能简单地获取缓存项目的副本？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T05:32:05.503

这就是 .NET 的工作方式，因为 Cache 只引用 .NET的*指针*。`List`不知道你`chartData_Type`是值类型还是引用类型。

如果是值类型，则很容易使用：

```
List<chartData_Type> list = new List<chartData_Type>(_chartData); 
```

但是如果引用类型比较复杂，你需要为你的类实现*[DeepCopy](http://www.codeproject.com/Articles/23832/Implementing-Deep-Cloning-via-Serializing-objects#xx3984032xx)*方法，然后`DeepCopy`为列表中的每个对象做。

`DeepClone`方法：

```
public static class CloneHelper
{
    public static T DeepClone<T>(T obj)
    {
        using (var ms = new MemoryStream())
        {
            var formatter = new BinaryFormatter();
            formatter.Serialize(ms, obj);
            ms.Position = 0;

            return (T) formatter.Deserialize(ms);
        }
    }
} 
```

为了使用此方法，`chartData_Type`必须标记类`[Serializable]`：

```
[Serializable]
class chartData_Type
{} 
```

因此，您可以手动进行深度克隆：

```
var cloneChartData = _chartData.Select(d => 
                                       CloneHelper.DeepClone<chartData_Type>(d))
                        .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T05:31:32.390

List 是一种引用类型，_chartData 保存存储在缓存中的原始对象的地址。这就是为什么当您更新 _chartData 时，它也会更新缓存的对象。如果您想要一个单独的对象，请克隆缓存的对象。请参阅下面的参考

[http://www.codeproject.com/Articles/33364/ASP-NET-Runtime-Cache-Clone-Objects-to-Preserve-Ca](http://www.codeproject.com/Articles/33364/ASP-NET-Runtime-Cache-Clone-Objects-to-Preserve-Ca)

[http://www.codeproject.com/Articles/45168/ASP-NET-Runtime-Cache-Clone-Objects-to-Preserve-Ca](http://www.codeproject.com/Articles/45168/ASP-NET-Runtime-Cache-Clone-Objects-to-Preserve-Ca)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T05:24:27.060

利用：

```
List<chartData_Type> list = new List<chartData_Type>(_chartData); 
```

它会将所有项目从 复制`_chartData`到`list`。

# mod-security - 如何为 mod 安全性创建例外？

> ID：12559221
> 
> 赞同：4
> 
> 时间：2012-09-24T05:19:44.770
> 
> 标签：mod-security

当我检查日志时，我发现 Mod_security 阻止了站点操作所需的一些文件。到目前为止，我在 apache 配置文件中为每个域禁用了它。我只想在某些页面上禁用某些规则。我阅读的实现示例特定于红帽和其他发行版。我使用 apache 2.8 和 mod_security 2 运行 Centos 5（服务器托管多个站点）

在 centos 上，加载的 mod_security 包含在顶部，如下所示：

```
Include "/usr/local/apache/conf/modsec2.conf" 
```

上述文件调用位于同一目录中的 modsec2.user.conf。

这是我到目前为止所做的：

我的服务器没有名为 modsecurity.d 的目录供我创建如下文件：

```
/etc/httpd/modsecurity.d/modsecurity_localrules.conf 
```

所以我创建了一个名为：

```
whitelist.conf 
```

在：

```
 /usr/local/apache/conf/ 
```

然后我在其中添加了一个包含：

```
/etc/httpd/conf/modsec2.conf/ 
```

规则如下：

```
<LocationMatch "/wp-admin/post.php">
  SecRuleRemoveById 950006
</LocationMatch> 
```

但规则不起作用。我想知道 whitelist.conf 是否放置在正确的位置。

然后我创建了2个文件：

```
modsecurity_crs_15_customrules.conf
modsecurity_crs_60_customrules.conf 
```

并将它们放在：

```
/home/cpeasyapache/src/modsecurity-apache_2.5.12/rules 
```

上面的路径是我发现的：

```
modsecurity_crs_10_config.conf 
```

它包含主要规则，尽管我没有看到任何其他文件调用它。

基本规则位于：

```
/home/cpeasyapache/src/modsecurity-apache_2.5.12/rules/base_rules 
```

看来我的 mod_security 已安装并配置了最少的功能。我想将其添加到 httpd.conf：

```
<IfModule security2_module>
Include /home/cpeasyapache/src/modsecurity-apache_2.5.12/rules/modsecurity_crs_10_config.conf
Include /home/cpeasyapache/src/modsecurity-apache_2.5.12/rules/base_rules/*.conf
Include /home/cpeasyapache/src/modsecurity-apache_2.5.12/rules/optional_rules/*.conf
Include /home/cpeasyapache/src/modsecurity-apache_2.5.12/rules/modsecurity_crs_15_customrules.conf
Include /home/cpeasyapache/src/modsecurity-apache_2.5.12/rules/modsecurity_crs_60_customrules.conf
</IfModule> 
```

你们到底是怎么做的？

先感谢您

# symfony - Symfony 分析器工具栏不显示数据库查询

> ID：12559224
> 
> 赞同：2
> 
> 时间：2012-09-24T05:20:04.630
> 
> 标签：symfony, symfony-2.1

在全新安装的 MAC OS X Lion、最新 MAMP 和 Symfony 2.1.3-DEV 版本中，Profiler 工具栏似乎没有在调试工具栏中显示 DB 查询的数量。我使用 1 个内连接和 2 个左连接执行查询，并使用 \Doctrine\Common\Util\Debug::dump($entity); 查看完整转储。

有谁知道可能发生了什么？这太奇怪了，我不知道从哪里开始搜索！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-02T09:01:53.323

太愚蠢了，调试在 app_dev.php 中被禁用

# java - 将 URL 列表转换为树

> ID：12559227
> 
> 赞同：4
> 
> 时间：2012-09-24T05:20:57.353
> 
> 标签：java, swing, sitemap, jtree

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:05:09.847

您可以将 UrlTree 定义为嵌套的 HashMaps

```
public class UrlTree {

  private final Map<String, UrlTree> branches = new HashMap<String, UrlTree>();

  public void add(String[] tokens, int i) {
    if (i >= tokens.length) {
      return;
    }

    final String token = tokens[i];

    UrlTree branch = branches.get(token);

    if (branch == null) {
      branch = new UrlTree();
      branches.put(token, branch);
    }

    branch.add(tokens, i + 1);
  }

  ...
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-25T16:24:02.393

您需要以[`TreeModel`](http://docs.oracle.com/javase/7/docs/api/javax/swing/tree/TreeModel.html)反映您观察到的目录结构的层次结构的方式实现。[`FileTreeModel`](https://dzone.com/articles/taking-new-swing-tree-table-a-)是一个示例，它[`ac.Name`](http://applecommander.cvs.sourceforge.net/viewvc/applecommander/AppleCommander/src/com/webcodepro/applecommander/ui/ac.java?revision=1.45&view=markup)是一个简单的类，用于解析老式文件系统的路径。另请参阅[*如何使用树*](http://docs.oracle.com/javase/tutorial/uiswing/components/tree.html)。[此处](https://codereview.stackexchange.com/a/4447/6692)`Outline`说明的 NetBeans 实例将是一个不错的替代视图。

# java - Ebean 重复密钥更新

> ID：12559240
> 
> 赞同：2
> 
> 时间：2012-09-24T05:22:03.193
> 
> 标签：java, playframework-2.0, ebean

无论如何要为ebean保存做一个“重复条目更新”吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T05:54:34.003

在您的控制器中很容易做到这一点，即。同时从请求中绑定表单

```
 ...
Some some = form().bindFromRequest().get();
if (some.id == null){
    some.save();
} else {
    some.update(some.id)
} 
```

这样，该语句将适用于所有数据库引擎，而不仅仅是具有上述功能的数据库引擎。

此外，您可以通过覆盖`save()`和类`update()`来完成模型中的技巧`Model`

# php - PHP fread文件指针位置

> ID：12559249
> 
> 赞同：1
> 
> 时间：2012-09-24T05:22:55.173
> 
> 标签：php, fread

我想知道**fread**函数如何在文件中移动文件指针。

让我们考虑以下场景：

```
<?php
$file=fopen(binary.txt,rb);
fread($file,0x594);
function(fread($file,0x1a8), ....); // some function w/ first argument as fread O/P
?> 
```

代码简要概述：

它将以只读模式打开一个二进制文件。我想知道我的理解是否正确：

1.  fread 函数的第一次调用会将**文件指针**移动到位置**0x594**。

由于二进制文件中第一个字节的位置被认为是 0，而 fread 函数正在读取 0x594 个字节，那么文件指针的新位置会是什么？

0x593 还是 0x594？

1.  第二个 fread 函数将从前一个文件指针位置开始读取。那么，每次调用 fread 函数时，文件指针的位置都被保留了吗？

这意味着，在一系列 fread 函数调用中，每个 fread 函数从前一个 fread 函数设置的文件指针的位置开始读取字节？

在这种情况下，它将开始从位置 0x594 到 (0x594+0x1a8) 或**0x73c**读取字节？

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T05:45:20.557

您可以使用[ftell()](http://php.net/ftell)自己进行调查。文件指针的当前位置是文件基础结构的固有部分，PHP 只是在 libc/glibc 的 fopen/fread/etc 实现之上...

但是，考虑一下：

```
$fh = fopen('somefile.txt', 'r'); 
```

文件指针现在将位于零位置，因为没有读取任何数据。

```
$data = fread($fh, 500); 
```

文件指针现在将位于位置 500，因为它作为先前 fread 调用的一部分读取位置 0->499（500 字节）。

```
$data = fread($fh, 0); // makes no sense to read 0 bytes, but hey... 
```

仍然在第 500 位

```
$data = fread($fh, 1); // now at 501
$data = fread($fh, 2); // now at 503 
```

ETC...

基本上，使用 ftell() 来检查自己。ftell() 用于检索文件指针的当前位置，因此您可以使用记住您所在的位置。然后，您可以使用 rewind()、fseek() 等...将指针全部移动，然后直接跳回您所在的位置而不会丢失位置：

```
$old_loc = ftell($fh); // 503
fseek($fh, 9999);
fseek($fh, 20000); // jump around a bit
fseek($fh, $old_loc); // back to 503, ready to resume reading where we left off. 
```

# javascript - 使用 JavaScript、HTML 和 PHP 的字体大小按钮

> ID：12559252
> 
> 赞同：0
> 
> 时间：2012-09-24T05:23:22.550
> 
> 标签：javascript, button

我想使用 JavaScript/JQuery 在我的 PHP/HTML 页面上创建三个按钮，通过按下相应的按钮，我可以设法增加按钮中文本的大小。此外，我想为我网站的其他内容保留此选择。我怎样才能做到这一点 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:26:43.970

将字体大小值存储在[`SESSION`](http://php.net/manual/en/session.examples.basic.php)或中[`COOKIES`](http://www.quirksmode.org/js/cookies.html)。

当您移动到另一个页面时，获取该值并再次设置字体大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:48:58.440

请参阅此示例，使用 jquery [**demo**](http://jsfiddle.net/26byY/2/)。

# php - 在 PHP 中遍历 Mysql 行

> ID：12559253
> 
> 赞同：0
> 
> 时间：2012-09-24T05:23:25.230
> 
> 标签：php, mysql, sql

> **可能重复：**
> [如何通过 php 中的 mysql 查询逐行迭代](https://stackoverflow.com/questions/2285600/how-to-iterate-by-row-through-a-mysql-query-in-php)

我需要遍历 mysql 行。例如，如果问题 id 为 1，则所有答案都必须显示在问题 1 下。我是 php 的初学者，有人可以帮助我吗？

![在此处输入图像描述](../Images/bc53ae455172542f75ba60a6cb54cffe.png)

* * *

```
<?php
            $result = select("SELECT * FROM questions WHERE question_id=1");
            $row = mysql_fetch_array($result);

        ?>
<table width="581" height="299" border="1">
  <tr>
    <td>Union Assurance Questionnaire</td>
  </tr>
  <tr>
    <td>1.<?php echo $row['questions']; ?>

    </td>
  </tr>
  <tr>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
  </tr>
</table>
  <?php
            $result = select("SELECT * FROM questions WHERE question_id=2");
            $row = mysql_fetch_array($result);

        ?>
<table width="581" height="299" border="1">

  <tr>
    <td>2.<?php echo $row['questions']; ?>

    </td>
  </tr>
  <tr>
    <td>&nbsp;</td>
  </tr>
  <tr>
    <td>&nbsp;</td>
  </tr>
</table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:29:27.193

像这样使用

```
<?php
while($row = mysql_fetch_array($result))
{
?>
<table width="581" height="299" border="1">
<tr>
<td>Union Assurance Questionnaire</td>
</tr>
<tr>
<td>1.<?php echo $row['questions']; ?>

</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
<tr>
<td>&nbsp;</td>
</tr>
</table>
<?php
}
?> 
```

您必须`while() loop`用于迭代所有可能的答案。

# java - 如何在java中重新排列结果集数据的行？

> ID：12559254
> 
> 赞同：0
> 
> 时间：2012-09-24T05:23:29.523
> 
> 标签：java, javabeans, resultset

```
 List userProcessedCountCol = new ArrayList();
                  while (iResultSet1.next()) {
                        afRealTimeIssuance afRealTimeIssuance = new afRealTimeIssuance();
                        Integer i = 0;

                        afRealTimeIssuance.setSub_channel(iResultSet1.getString(++i));
                        afRealTimeIssuance.setAgent_names(iResultSet1.getString(++i));
                        afRealTimeIssuance.setFtd(iResultSet1.getDouble(++i));
                        afRealTimeIssuance.setMtd(iResultSet1.getDouble(++i));
                        afRealTimeIssuance.setQtd(iResultSet1.getDouble(++i));

                        userProcessedCountCol.add(afRealTimeIssuance);
} 
```

afRealTimeIssuance 在哪里 `ActionForm`

使用上面的代码片段，我得到如下输出

```
1             A             100
2             B             200
3             C             300
4             D             400 
```

但我想将输出重新排列为

```
2            B              200
4            D              400
3            C              300
1            A              100 
```

简而言之，我想根据需要重新排列行。如何根据一个特定值排列结果集数据。请指导

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:45:10.763

您可以在此处充当两个级别：

*   数据库级别
*   Java级别

在数据库级别，操作要返回的结果顺序的唯一方法是在 sql 查询中使用“ORDER BY ASC/DESC”。请注意，您不能依赖任何其他方式从数据库中获取有序结果。

在 java 级别，您可以像这样存储您的对象： - 使用可排序的集合。使您的操作表单具有可比性或实现一个比较器，允许您根据需要对元素进行排序。然后您可以使用[此方法](http://docs.oracle.com/javase/6/docs/api/java/util/Collections.html#sort%28java.util.List,%20java.util.Comparator%29)按您自己的标准获取有序集合。

您也可以考虑使用[TreeSet](http://docs.oracle.com/javase/6/docs/api/java/util/TreeSet.html)而不是 ArrayList 这种数据结构将允许您只添加数据，并且给定您预先定义的比较器，它将始终进行排序。但是，加法具有对数复杂性，因此由您决定。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:20:27.800

有两种方法可以做到这一点。您可以修改查询以使用 ORDER BY 子句来排列结果。其次，您可以实现 Comparator 接口并定义比较器类并使用 Collection.sort(List list,Comparator c) 对数据进行排序。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T05:44:18.500

ResultSet 不能手动重新排列（仅使用 sql）。您可以重新排列的是您保存对象的数据结构

您可以使用行对象的 ArrayList 并将每一行插入到您想要的**位置。**

让我们在你的例子中说，在while循环中：

```
userProcessedCountCol.add(index, element); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T05:29:45.497

在 SQL 查询中使用`ORDER BY`子句，或者使用. 前者更容易并将负载放在数据库上，后者更通用，因为您可以根据外部信息进行排序。`Collections.sort()``List``Comparator<afRealTimeInssuance>`

附带说明一下，您应该使用[Java 约定](http://www.oracle.com/technetwork/java/javase/documentation/codeconvtoc-136057.html)命名您的类：`AFRealTimeInssuance`而不是`afRealTimeInssuance`.

# wamp - 设置 WAMP 以在 LAN 上运行

> ID：12559258
> 
> 赞同：1
> 
> 时间：2012-09-24T05:23:36.083
> 
> 标签：wamp, lan

我已经在 Windows 7 PC 上安装了 WAMP，它在本地运行良好，作为 localhost。

我希望局域网上的 PC 能够查看本地服务器。当他们在浏览器中加载我的 PC 的 IP 地址时，他们会收到“您无权访问 / 在此服务器上”的错误消息。

我遵循[了本指南](http://www.logicspot.com/posts/viewing-a-locally-hosted-website-with-your-smartphone/)，但问题仍然存在。回顾一下：

*   我为专用和域连接的端口 80 添加了一个入站异常到 Windows 防火墙。
*   我编辑了 Apache 的 httpd.conf 以包括：

> 听 80
> 
> 听 192.168.0.5:80
> 
> <目录“c:/wamp/www/wordpress/”>
> 允许来自所有
> </Directory>

*   我编辑了 httpd-vhosts.conf 以包括：

> <VirtualHost 192.168.0.5:80>
> DocumentRoot "C:/wamp/www/wordpress"
> </VirtualHost>

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:31:50.153

顶级文件夹必须具有正确的权限集（在您的情况下`c:/wamp/www/`）。尝试改变

```
< Directory "c:/wamp/www/wordpress/" > allow from all < /Directory > 
```

和

```
< Directory "c:/wamp/www/" > allow from all < /Directory > 
```

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:30:45.270

在我本地的 Wordpress 中，Wordpress 地址和站点地址都使用 localhost。

我把这个改成IP地址，问题就解决了。

# iphone - 如何在 iPhone 中重置倒计时？

> ID：12559267
> 
> 赞同：0
> 
> 时间：2012-09-24T05:24:15.967
> 
> 标签：iphone, ios, timer, reset

我在 iPhone 应用程序中工作，使用 NSTimer 创建时间计数以在屏幕中设置，例如最初 100，然后像 99、98、97 等那样经过...完成后，用户按确定按钮导航到上一个屏幕，然后再次进入游戏屏幕，在经过的时间从上一个经过的时间开始，如 66、65、64 等...我想要，当用户再次进入游戏屏幕时时间计数从 100 开始，如何解决这个问题？请帮助我

提前致谢

我试过这个：

```
- (void)viewDidLoad
{
   timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(elapsedTime) userInfo:nil repeats:YES];
}

-(void)elapsedTime
{
    static int i = 100;
    NSLog(@"i:%d",i);

    lbl.text = [NSString stringWithFormat:@"%d",i];    

    i--;
    if(i<0)
    {
        [timer invalidate];
        timer = nil;
    }
}

- (void)alertView:(UIAlertView *)alertView clickedButtonAtIndex:(NSInteger)buttonIndex
{
    [timer invalidate];
    timer = nil;
    [self.navigationController popViewControllerAnimated:YES];
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:28:29.627

**将int i**定义为 .h 文件中的类变量

```
 - (void)viewDidLoad
{
  timer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(elapsedTime) userInfo:nil repeats:YES];
  i = 100;
}

-(void)elapsedTime
{ 
   i--;
   if(i<0)
   {
     //show alertView here
     [timer invalidate];
     timer = nil;
   }
} 
```

# endianness - 写入磁盘时的字节顺序

> ID：12559269
> 
> 赞同：0
> 
> 时间：2012-09-24T05:24:19.683
> 
> 标签：endianness

我正在研究一个小端系统。假设我有以下数据写入磁盘中的扇区：

```
$ hexdump file
04eb 0008 ...
$ cat file > /dev/sdb 
```

现在当我把它读回内存时，它在内存中会是什么样子，为什么？

# mysql - 如何在 SQL 表中的 2 个数据之间进行选择？

> ID：12559272
> 
> 赞同：1
> 
> 时间：2012-09-24T05:24:49.687
> 
> 标签：mysql

我有 2 个这样的表：

```
Table 1
-------
ID
score

Table 2
-------
ID
score_from
score_to 
```

如果基于表 2 中的 score_from 和 score_to 在 Table1 中有 score='12' ，我如何从表 2 中获取 ID？

```
Contents of Table1:
----------------------
ID          |Score   |
----------------------
1           |12      |
----------------------
2           |40      |
----------------------

Contents of Table2:
------------------------------
ID       |score_from|score_to|
------------------------------
1        |0         |20      |
------------------------------
2        |21        |40      |
------------------------------ 
```

如果我从 table1 获得 score='12'，我该如何编写查询以在 table2 中获取 ID='1'？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:27:27.540

试试这个，

```
SELECT a.`ID`, a.`Score`, b.`ID`, b.`score_from`, b.`score_to`
FROM   table1 a, table2 b
WHERE  (a.score BETWEEN b.score_from AND b.score_to) AND
        (a.score = 12) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/e53c9/7)

或者如果你只想要`ID`

```
SELECT b.`ID`
FROM   table1 a, table2 b
WHERE  (a.score BETWEEN b.score_from AND b.score_to) AND
        (a.score = 12) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/e53c9/9)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:29:00.723

```
select t2.id from table t1 ,table t2
where t1.score between t2.score_from and t2.score_to; 
```

# mongodb - 为 MongoDB 实现隔离级别

> ID：12559275
> 
> 赞同：2
> 
> 时间：2012-09-24T05:25:12.323
> 
> 标签：mongodb, isolation-level

[如 MongoDB 的文档](http://docs.mongodb.org/manual/tutorial/perform-two-phase-commits/)和 MongoDB[食谱](http://cookbook.mongodb.org/patterns/perform-two-phase-commits/)中所述，我已经在 MongoDB 之上实现了 2PC 协议。

基本上，这很好用：我现在有一个*全有或全无*的语义，这基本上就是我想要的。

不幸的是，现在一切都以“隔离级别”运行`uncommitted read`（我知道 MongoDB 根本没有隔离级别，因此引用了引号）。

我想做的是实现隔离级别`committed read`，`non-repeatable read`并且`phantom reads`-而且，这将是最佳的-“可序列化”。

但是，我对如何执行此操作一无所知。`Committed read`无论如何，这似乎是最简单的选择。

任何想法、提示、链接……在哪里可以找到关于如何实现这一目标的其他信息？

# git - git 如何处理将一个 git 存储库放置在另一个存储库中？

> ID：12559276
> 
> 赞同：2
> 
> 时间：2012-09-24T05:25:15.660
> 
> 标签：git, directory, nested

我一直在阅读作者指示的一篇文章：在现有存储库中创建一个新存储库，并想知道这是否是他忽略的错误。我稍后会和他核实。

这些是我要检查的条件：

1.  将现有目录制作成存储库并且已经签入主项目的文件也将签入新（子）存储库的条件。这可能吗？

2.  首次签入包含 git 存储库的目录树时

3.  当在存储库下创建一个新的空存储库时，要么通过 git init，要么通过将 .git 存储库复制到新目录或空目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:59:17.810

正如“ [git仓库中的Git仓库](https://stackoverflow.com/questions/5980960/git-repository-in-a-git-repository)”中提到的，嵌套仓库大多被父仓库忽略（只记录了一个gitlink）

因此，对父存储库的任何操作都不会对嵌套存储库产生影响。

如果您将嵌套存储库声明为子模块，那么您可以签出父存储库*和*嵌套存储库，但该子模块将始终引用固定提交。
如果对子模块进行了任何修改，都需要commit，push *，*然后回到父repo，commit，push（记录子模块新的fixed commit）。
请参阅“[子模块的真实性质](https://stackoverflow.com/questions/1979167/git-submodule-update/1979194#1979194)”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T05:30:04.637

如果你想这样做，如果你想拥有嵌套的存储库，你应该使用[子模块。](http://git-scm.com/book/en/Git-Tools-Submodules)顶级存储库将跟踪所有子存储库的最新提交，在它们内部，事情可以如你所愿。如果没有这个，git 将以未记录和不受支持的方式运行，因此您可能不应该尝试它。

# iphone - 如何在表格单元格上添加可点击按钮？

> ID：12559277
> 
> 赞同：5
> 
> 时间：2012-09-24T05:25:38.387
> 
> 标签：iphone, ios, xcode, uitableview, uibutton

我在表格视图单元格中动态添加一个按钮。按钮显示在桌子上，但我无法点击它们。这是我的代码，

这是我的 tableviewcell 类代码：

MessageTableViewCell.h

```
#import <UIKit/UIKit.h>
@interface MessageTableViewCell : UITableViewCell {
{IBOutlet UIButton *chat_pic_btn;}}
@property (nonatomic, retain) UIButton *chat_pic_btn;
@end; 
```

MessageTableViewCell.m

```
- (id)initWithStyle:(UITableViewCellStyle)style reuseIdentifier:(NSString *)reuseIdentifier {if (self = [super initWithStyle:style reuseIdentifier:reuseIdentifier]) {chat_pic_btn=[[UIButton alloc]init];
[self.contentView addSubview:chat_pic_btn];}} 
```

消息表.m

```
-(void)customActionPressed :(id)sender
{
    UIAlertView *alertView = [[UIAlertView alloc] initWithTitle:@"Custom Button Pressed" 
                                                        message:[NSString stringWithFormat: @"You pressed the custom button on cell"]  
                                                       delegate:self cancelButtonTitle:@"Great" 
                                              otherButtonTitles:nil];
    [alertView show];
}

- (UITableViewCell *)tableView:(UITableView *)myTableView cellForRowAtIndexPath:(NSIndexPath *)indexPath {

    static NSString *CellIdentifier = @"CellIdentifier";
    MessageTableViewCell *cell = (MessageTableViewCell *)[myTableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        // cell = [[MessageTableViewCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier];
        cell = [[MessageTableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }
cell.chat_pic_btn.frame = CGRectMake(180, 24, 70,35);
            [cell.chat_pic_btn setImage:[UIImage imageNamed:@"done.png"]forState:UIControlStateNormal];
            [cell.chat_pic_btn addTarget:self action:@selector(customActionPressed:) forControlEvents:UIControlEventTouchDown];
return cell;
} 
```

请帮帮我。谢谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T07:28:28.013

我建议您删除 TableViewCell 中的 Button 插座。只需在 cellForRowAtIndexPath 中动态创建按钮：我创建了一个 SampleCell 类，它是 UITableViewCell 的子类，它有一个 UILabel 出口，我称之为“lbl”。这应该适用于您的代码，假设您的选择器与您放置 tablview 的类在同一个类上；

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"SampleCell";
    SampleCell *cell = (SampleCell *) [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        NSArray* topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"SampleCell" owner:self options:nil];
        for (id currentObject in topLevelObjects) {
            if ([currentObject isKindOfClass:[UITableViewCell class]]) {
                cell = (SampleCell *)currentObject;
                break;
            }
        }
    }
    // Configure the cell.
    cell.lbl.text = @"Hello";
    UIButton *button = [UIButton buttonWithType:UIButtonTypeRoundedRect];

    //set the position of the button
    button.frame = CGRectMake(cell.frame.origin.x + 100, cell.frame.origin.y + 20, 100, 30);
    [button setTitle:@"World" forState:UIControlStateNormal];   
    [button addTarget:self action:@selector(customActionPressed:) forControlEvents:UIControlEventTouchUpInside];
    button.backgroundColor= [UIColor clearColor];
    [cell.contentView addSubview:button];

    return cell;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-07-10T21:14:35.507

确保在单元格视图和按钮中将 UserInteraction 设置为 YES

```
self.userInteractionEnabled = YES; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T06:01:06.130

[http://www.roostersoftstudios.com/2011/05/01/iphone-custom-button-within-a-uitableviewcell/](http://www.roostersoftstudios.com/2011/05/01/iphone-custom-button-within-a-uitableviewcell/)

这可能会帮助你

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T05:30:28.707

```
UIButton *yourBtn = [[UIButton alloc] initWithFrame:CGRectMake(0,0, 50, 50)];
[yourBtn setImage:[UIImage imageNamed:@"yourImage.png"] forState:UIControlStateNormal];
[yourBtn addTarget:self action:@selector(submitBtnPress:) forControlEvents:UIControlEventTouchUpInside];

cell.accessoryView = yourBtn; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T05:31:48.067

您没有为按钮提供任何控制事件或将其更改为`UIControlEventTouchUpInside`from`UIControlStateNormal`并且只执行一次:)

# javascript - 将键映射到值并允许对键进行迭代的 Javascript 对象

> ID：12559282
> 
> 赞同：0
> 
> 时间：2012-09-24T05:26:37.587
> 
> 标签：javascript, jquery

我需要在 javascript 中创建允许使用键获取值并迭代键的对象。主要要求是按键获取值，但需要迭代以按值（整数）维护条目的排序顺序。

我该如何去创建这样一个对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:29:48.737

1.  JavaScript 中的所有对象都是 JSONeable！（真的是一个词吗）。
2.  JavaScript 中的所有对象都是键值映射的集合。
3.  `for` `in`循环遍历对象的键。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T05:33:14.923

```
sampleJson={
"1":"john",
"2":"johny"
} 
```

您可以使用 for in 循环进行迭代

```
for(key in sampleJson){
//ur code
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T06:44:19.767

本机对象并不完全支持您正在寻找的内容，但是创建一个围绕本机对象的包装器以提供额外的功能是相当简单的。

一种可能的方法：

```
function KeySortArr(obj) {
    this.obj = obj || {};
}

KeySortArr.prototype = {
    get: function(key) {
        return this.obj[key];
    },

    set: function(key, value) {
        this.obj[key] = value;
    },

    keys: function() {
        var keys = [];
        for(var i in this.obj) {
            if (this.obj.hasOwnProperty(i))
                keys.push(i);
        }
        return keys;
    },

    getKeysSortedByValue: function() {
        var obj = this.obj;
        return this.keys().sort(function(a, b) {
            return obj[a] > obj[b];
        });
    }
}; 
```

用法：

```
var arr = new KeySortArr();
arr.set("test", 4);
arr.set("another", 2);
arr.set("ok", 60);
arr.set("last", 14); 
```

然后如下：

```
arr.getKeysSortedByValue(); 
```

回报：

```
["another, "test", "last", "ok"] 
```

换句话说，键按其关联值排序。这可能不是您想要的，但应该很接近。

# android - 如何发现最近的通话是否未接？

> ID：12559285
> 
> 赞同：1
> 
> 时间：2012-09-24T05:26:47.610
> 
> 标签：android

我正在开发一个在有未接电话时发送短信的应用程序。如果有人来电，而接收者无法接听电话，则该电话将成为未接电话（未接听），因此应用程序将向来电者发送短信。

如何确定最近的呼叫是否是未接（未接听）电话？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:54:17.680

您可以使用[PhoneStateListener](http://developer.android.com/reference/android/telephony/PhoneStateListener.html)来监听呼叫状态的变化`CALL_STATE_RINGING`，`CALL_STATE_IDLE`这表明电话没有被拿起。

有关如何从此链接检查您的通话记录的示例

[http://www.anddev.org/video-tut__-_querying_and_displaying_the_calllog-t169.html](http://www.anddev.org/video-tut_-_querying_and_displaying_the_calllog-t169.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:35:22.403

检查[this answer](https://stackoverflow.com/a/7995442/1629707)，您可以使用`android.provider.CallLog.Calls.MISSED_TYPE`指定呼叫类型。

# java - 桌面客户端网络服务器，聊天应用程序

> ID：12559286
> 
> 赞同：2
> 
> 时间：2012-09-24T05:26:53.040
> 
> 标签：java, jsp, tomcat, servlets, livechat

谁能给我制作桌面客户端和网络服务器聊天应用程序的指南。我必须在java（客户端和服务器）中做这个项目，对于服务器端我正在使用tomcat在Jsp / servlet中工作，但是如何使客户端应用程序与Web服务器通信以及如果两个客户端想要聊天会是什么遵循的最佳方法...？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:48:00.607

常见的设计有两种，[客户端拉取](https://en.wikipedia.org/wiki/Pull_technology)和[服务器推送](https://en.wikipedia.org/wiki/Push_technology)。每个都有自己的优点和缺点。

客户端拉取需要您定期向服务器发出请求，这可能会导致服务器上的流量负载，但它更容易实现。

服务器推送要求您在客户端运行“服务器”，等待目标服务器推送消息。这听起来更有效率，但如果您有数百万个客户端连接到您的服务器，您可能会一直打开大量连接（端口），这可能会浪费资源。这更难实现，因为您还需要制作客户端服务器。

# java - 如何在 JTable 行中设置自定义对象

> ID：12559287
> 
> 赞同：7
> 
> 时间：2012-09-24T05:27:17.017
> 
> 标签：java, swing, user-interface, jtable, tablemodel

我应该先告诉这一点，这与渲染表格单元格无关。

这是我使用基于`User`我的数据库中的对象的二维数组构建的 TableModel。

```
 List<User> userList = userManagerService.getAllUsers();

    /* String[] col_user = {"Username", "Name", "Phone", .... } */
    String[][] data = new String[userList.size()][col_user.length];
    int i = 0;
    for (User user : userList) {
        String[] userdata = new String[col_user.length];
        userdata[0] = user.getUserUsername();
        userdata[1] = user.getUserName();
        userdata[2] = user.getUserPhone();
        userdata[3] = user.getUserNic();
        userdata[4] = user.getUserAddress();
        userdata[5] = user.getUserEmail();

        data[i++] = userdata;
    }

    VstTableItemModel tiModel = new VstTableItemModel(data, col_user);
    dataTable.setModel(tiModel); 
```

我的问题是如何`User`使用表格中的选定行取回对象。请注意，我不能创建一个新`User`对象并用行数据填充它。我必须得到查询的`User`对象（对象`userList`）。那么，他们有什么方法可以设置带有表格行的对象吗？

这是我的`VstTableItemModel`课。

```
public class VstTableItemModel extends AbstractTableModel {

    ArrayList<Object[]> data;
    String[] header;

    public VstTableItemModel(Object[][] obj, String[] header) {
        this.header = header;
        data = new ArrayList<Object[]>();

        for (int i = 0; i < obj.length; ++i) {
            data.add(obj[i]);
        }
    }

    @Override
    public int getRowCount() {
        return data.size();
    }

    @Override
    public int getColumnCount() {
        return header.length;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {
        return data.get(rowIndex)[columnIndex];
    }

    @Override
    public String getColumnName(int index) {
        return header[index];
    }

} 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-24T05:43:52.127

与其`User`在创建模型之前拆分对象，不如将其直接添加到模型中并让模型为您完成工作......

例如

```
public class VstTableItemModel extends AbstractTableModel {

    private List<User> users;

    public VstTableItemModel(List<User> users) {

        this.users = new ArrayList<User>(users);

    }

    @Override
    public int getRowCount() {
        return users.size();
    }

    @Override
    public int getColumnCount() {
        return 6;
    }

    @Override
    public Object getValueAt(int rowIndex, int columnIndex) {

        Object value = "??";
        User user = users.get(rowIndex);
        switch (columnIndex) {
            case 0:
                value = user.getUserUsername();
                break;
            case 1:
                value = user.getUserName();
                break;
            case 2:
                value = user.getUserPhone();
                break;
            case 3:
                value = user.getUserNic();
                break;
            case 4:
                value = user.getUserAddress();
                break;
            case 5:
                value = user.getUserEmail();
                break;
        }

        return value;

    }

    @Override
    public Class<?> getColumnClass(int columnIndex) {
        return // Return the class that best represents the column...
    }

    /* Override this if you want the values to be editable...
    @Override
    public void setValueAt(Object aValue, int rowIndex, int columnIndex) {
        //....
    }
    */

    /**
     * This will return the user at the specified row...
     * @param row
     * @return 
     */
    public User getUserAt(int row) {
        return users.get(row);
    }

} 
```

这样，你应该能够做类似的事情......

```
List<User> userList = userManagerService.getAllUsers();
VstTableItemModel tiModel = new VstTableItemModel(userList); 
```

现在，当您需要...您可以获取代表特定行的用户...

```
User user = tiModel.getUserAt(rowIndex); 
```

# android - 在不同的 Android 设备上同步音频播放

> ID：12559292
> 
> 赞同：8
> 
> 时间：2012-09-24T05:27:30.970
> 
> 标签：android, synchronization, audio-streaming

我很好奇如何在多个 android 设备上同步播放相同的音频？[iOS 的seedio](http://www.theverge.com/2012/8/2/3214678/seedio-ios-music-sync-loudspeaker-app)就是我所说的一个例子。

我可以想到两种可能的情况。缓存每个设备上的音频并精确同步播放开始时间。使用类似 RTP 的协议实时同步播放。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-21T02:38:54.503

My suggestion would be to cache the audio an every device and then synchronize the playback.

NTP can get you surprisingly good clock synchronization.

Then maybe you redo the clock sync ever so often and restart playback from a common point in the file after to account for drift in clock speeds. How often you need this will vary based on how much clock drift there is on the devices.

An interesting research project.

# php - PEAR SOAP_client 错误

> ID：12559295
> 
> 赞同：0
> 
> 时间：2012-09-24T05:27:41.347
> 
> 标签：php, pear

我收到错误

> 命名参数 torrent 不在调用参数中。

用于 Pear SOAP_client 和 Torcache API

这是我的代码

```
$client = new SOAP_Client ( 'http://torcache.net/torcache.wsdl' );
$infoHash = $client->cacheTorrent( base64_encode( file_get_contents( 'mytorrent' ) ) );
echo ($infoHash); 
```

这是从他们的 API 页面链接的；[https://torcache.net/api](https://torcache.net/api)

我有点困惑如何从这里开始？有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T11:57:09.567

使用 PHP5 的 SoapClient 而不是 PEAR 的 Web 服务的快速调试，如下所示：

```
$client = new SoapClient ( 'http://torcache.net/torcache.wsdl' );
var_dump($client->__getFunctions()); 
```

产生以下结果：

> array(1) { [0]=> string(36) "string cacheTorrent(string $torrent)" }

查看他们的代码示例，这意味着您需要传入实际 .torrent 文件的 base64 编码内容。根据函数签名和以前使用 SOAP Web 服务的经验，我认为您应该尝试将代码调整为：

```
$client = new SOAP_Client ( 'http://torcache.net/torcache.wsdl' ); 
echo ($infoHash);$infoHash = $client->cacheTorrent( array('torrent' => base64_encode(file_get_contents('test.torrent')) ) ); 
```

您需要确保在与此脚本相同的目录中确实有一个名为 test.torrent 的 torrent 文件。

# symfony-1.4 - 为整个 php 进程设置默认的推进连接

> ID：12559296
> 
> 赞同：1
> 
> 时间：2012-09-24T05:27:43.133
> 
> 标签：symfony-1.4, propel

Propel 1.6 和 Symfony 1.4

我正在寻找一种以编程方式为整个 php 进程的长度设置默认推进连接的方法。问题是我正在使用替代数据库进行测试，并且我有很多代码目前没有通过 PropelPDO 对象。

这可以做到吗？有小费吗？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-21T23:51:10.807

所以，解决这个问题的方法是使用以下，非常干净和甜蜜：

```
//override the "default" "propel" dsn and set it to our testing db!
\Propel::setConnection(
    "propel",
    Propel::getConnection(SqliteSetup::$databaseName)
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T10:03:26.567

为什么不在你的环境中使用`databases.yml`？

```
dev:
  propel:
    class:        sfPropelDatabase
    param:
      classname:  DebugPDO
    etc, etc

stage:
  propel:
    class:        sfPropelDatabase
    param:
      classname:  PropelPDO
  etc, etc

prod:
  propel:
    class:        sfPropelDatabase
    param:
      classname:  PropelPDO
  etc, etc 
```

# javascript - 在每个幻灯片过渡中暂停多个 youtube Iframe 视频

> ID：12559301
> 
> 赞同：1
> 
> 时间：2012-09-24T05:28:44.903
> 
> 标签：javascript, iframe, youtube, youtube-api, flexslider

我是 YouTube Iframe API 的新手，当用户移动到另一张幻灯片时，我试图暂停幻灯片中的几个嵌入式 Iframe 视频（jQuery flexslider 插件）。如果播放器没有暂停，则视频将继续播放，并且由于幻灯片放映中将有多个视频，因此当显示新幻灯片时，我需要每个视频都暂停。iframe 不是通过 API 插入的，但由于我使用的 CMS 已经存在于 html 中。

我已经阅读了 API 参考和我在此处找到的几个答案，但是在用户切换到新幻灯片时无法弄清楚如何暂停任何/每个 Iframe 视频。

在我最近的尝试中，如下面的代码所示，我尝试在单击链接时暂停 iframe，因为页面上唯一的链接将用于导航到下一张和上一张幻灯片。我还尝试在通过 flexslider API 提供的幻灯片转换事件上暂停所有视频，但没有成功。

```
var players = {}; //players storage object
function onYouTubeIframeAPIReady(){
    $('iframe[id]').each(function(){
        var identifier = this.id;
        var frameID = getFrameID(identifier);
        if (frameID) { // if iframe exists
            players[frameID] = new YT.Player(frameID, {
                events: {
                    "onStateChange" : createYTEvent(frameID, identifier)
                }
            });            
        }
    });
}

//returns a function to enable  multiple events
function createYTEvent(frameID, identifier){
    return function (event){
        var player = players[frameID]; //set player reference
        var done = false;

        $('a').click(function(){

            player.pauseVideo();
            return false;

        });        
    }
} 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-30T23:18:23.320

对不起我的英语，我是法国人，但我最近遇到了同样的问题，也许我认为我将来可以帮助你或其他人。

与您的不同之处在于我只使用 1 个播放器加载 4 个视频的列表，而不是 4 个播放器。

**有我的HTML：**

```
<div id='videos'>
    <div id="player">
        <!-- the iframe drectly write in the html, with a list of videos (4 in the example) -->
        <iframe id="ytplayer" type="text/html" width="640" height="360" src="https://www.youtube.com/embed/youtubeVideoId1?playlist=youtubeVideoId2,youtubeVideoId3,youtubeVideoId4&version=3" frameborder="0" allowfullscreen></iframe>
    </div>
        <!-- below, the buttons for switching the 4 videos -->
        <span id='pagination'>
            <a onclick='video_slide(0);' id='puce1'></a>
            <a onclick='video_slide(1);' id='puce2'></a>
            <a onclick='video_slide(2);' id='puce3'></a>
            <a onclick='video_slide(3);' id='puce4'></a>
        </span>
    </div>
</div> 
```

**和我的 Javascript：**

```
<script type="text/javascript">
    // call the youtube API
    var tag = document.createElement('script');
    tag.src = "//www.youtube.com/iframe_api";
    var firstScriptTag = document.getElementsByTagName('script')[0];
    firstScriptTag.parentNode.insertBefore(tag, firstScriptTag);

    // init the player
    var player;
    function onYouTubeIframeAPIReady() {
        player = new YT.Player('ytplayer', {
            events: {
                // the function "onPlayerStateChange is call when the player load, 
                   play, pause or stop a video
            'onStateChange': onPlayerStateChange
            }
        });
    }

    function onPlayerStateChange(event) {
        // if a new video is buffering (the event.data is -1 when buffering, 
           1 when playing, 2 when paused ...)
        if (event.data == -1) {
            // it mean that the player pass at the next video, 
               so we call the bellow function to turn on the corresponding button
            getTheRightPuce();
        }
    }
    // I add a function to recognize the current video playing, 
       and turn on the right button automatically when at the end of a video, 
       the player pass on the next one
    function getTheRightPuce(){
        var vidIndex = player.getPlaylistIndex();

        $("#pagination a").css('backgroundColor','#000000');

        if (vidIndex==0){$("#puce1").css('backgroundColor','red');}
        else if (vidIndex==1){$("#puce2").css('backgroundColor','red');}
        else if (vidIndex==2){$("#puce3").css('backgroundColor','red');}
        else if (vidIndex==3){$("#puce4").css('backgroundColor','red');}
    }

    // the function called by the buttons, change the current video 
       on the player and turn on the corresponding button, 
       the parameter is the index of the video in the play-list 
       (0 for the first, 1 for second...)
    function video_slide(sld){

        player.playVideoAt(sld);

        $("#videos").css('display','none');
        $("#pagination a").css('backgroundColor','#000000');
        $("#videos").fadeIn(500);
        if (sld==0){$("#puce1").css('backgroundColor','red');}
        else if (sld==1){$("#puce2").css('backgroundColor','red');}
        else if (sld==2){$("#puce3").css('backgroundColor','red');}
        else if (sld==3){$("#puce4").css('backgroundColor','red');}
    }
</script> 
```

我试图让它尽可能清晰。

我希望这会帮助你或其他人:)

# c# - IComparable 与作为泛型类型参数发送的枚举 (C#)

> ID：12559306
> 
> 赞同：1
> 
> 时间：2012-09-24T05:29:12.980
> 
> 标签：c#, .net, generics, enums, icomparer

> **可能重复：**
> [C# 中的两个枚举何时相等？](https://stackoverflow.com/questions/1683706/when-are-two-enums-equal-in-c)

我有以下类作为简单状态机的一部分。

请注意，所有泛型类型参数都必须是枚举。这已在构造函数中强制执行（此处未显示）。

```
// Both [TState] and [TCommand] will ALWAYS be enumerations.
public class Transitions<TState, TCommand>: List<Transition<TState, TCommand>>
{
    public new void Add (Transition<TState, TCommand> item)
    {
        if (this.Contains(item))
            throw (new InvalidOperationException("This transition already exists."));
        else
            this.Add(item);
    }
}

// Both [TState] and [TCommand] will ALWAYS be enumerations.
public class Transition<TState, TCommand>
{
    TState From = default(TState);
    TState To  = default(TState);
    TCommand Command = default(TCommand);
}

public sealed class TransitionComparer<TState>:
    IComparer<TState>
{
    public int Compare (TState x, TState y)
    {
        int result = 0;

        // How to compare here since TState is not strongly typed and is an enum?
        //    Using ToString seems silly here.

        result |= x.From.ToString().CompareTo(y.From.ToString());
        result |= x.To.ToString().CompareTo(y.To.ToString());
        result |= x.Command.ToString().CompareTo(y.Command.ToString());

        return (result);
    }
} 
```

以上确实可以编译，但我不确定这是否是处理作为泛型类型参数传入的枚举的正确方法。

注意：比较功能不需要记住排序。相反，它需要检查确切的重复项。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T05:59:32.763

> 注意：比较功能不需要记住排序。相反，它需要检查确切的重复项。

在这种情况下，您不应该实施`IComparer<T>`. 您应该正在实施`IEqualityComparer<T>`- 或者更简单地说，是 make `Transition`implement `IEquatable<Transition>`。

请注意，据我们所见，您目前没有在其余代码中*使用。*`TransitionComparer`听起来你真的不需要为每个枚举值编写自己的比较代码——你只是想把它们结合起来。不幸的是枚举没有实现`IEquatable<T>`，这使得在没有装箱的情况下更难做到这一点——这对性能有多重要？

这是一个示例相等性实现`Transition`：

```
public class Transition<TState, TCommand>
    : IEquatable<Transition<TState, TCommand>>
{
    // I assume in reality these are properties?
    TState From = default(TState);
    TState To  = default(TState);
    TCommand Command = default(TCommand);

    public override bool Equals(object other)
    {
        return Equals(other as Transition<TState, TCommand>);
    }

    public bool Equals(Transition<TState, TCommand> other)
    {
        if (other == null)
        {
            return false;
        }
        return From.Equals(other.From) &&
               To.Equals(other.To) &&
               Command.Equals(other.Command);
    }

    public int GetHashCode()
    {
        int hash = 17;
        hash = hash * 31 + From.GetHashCode();
        hash = hash * 31 + To.GetHashCode();
        hash = hash * 31 + Command.GetHashCode();
        return hash;
    }
} 
```

编辑：为了避免为平等而装箱，我怀疑您*要么*需要某种委托来获取基础值（如果您需要支持具有不同基础类型的值，那将非常痛苦）*，或者可能使用*[Unconstrained Melody](http://unconstrained-melody.googlecode.com)之类的东西，它使用IL 重写以在编译时强制执行约束，并允许您更有效地检查基于底层值的相等性。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T06:02:37.177

我什么也看不见

```
(int)(object)x.From.CompareTo((int)(object)y.From); 
```

枚举是装箱的。我不知道如何避免这种情况。

# php - 在页面刷新时与 twilio 通话保持联系

> ID：12559307
> 
> 赞同：2
> 
> 时间：2012-09-24T05:29:23.907
> 
> 标签：php, twilio

我需要帮助才能在通话过程中与通话保持联系。我使用了 twilio Doc 上给出的以下代码。

**PHP 部分在这里**

```
$token = new Services_Twilio_Capability(TW_ID, TW_TOKEN);
$token->allowClientIncoming($_SESSION['emp_id']); 
```

**JS部分：**

```
Twilio.Device.setup("<?php echo $token->generateToken();?>");

$("#call").click(function() {  
  params = { "tocall" : $('#tocall').val()};
  connection = Twilio.Device.connect(params);
});

$("#hangup").click(function() {  
  Twilio.Device.disconnectAll();
});

Twilio.Device.ready(function (device) {
        $('#status').text('Ready');
        console.log(Twilio.Device.status());
});

Twilio.Device.incoming(function (conn) {                        
        startCall(conn);
}); 
```

在页面上加载该`Twilio.Device.ready()`功能使用户登录接收呼叫，但用户刷新页面呼叫断开，或者如果用户尝试在会话期间更新客户端信息等操作断开呼叫。希望你能理解。

但现在不知道如何解决这个问题。一种选择是我必须在 url 上使用哈希值，例如`#status`.

请帮助我提供任何替代解决方案或修改此代码..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:48:30.727

您可以为此使用会话...将令牌值存储在会话中。

```
$_SESSION['token']=$your_token; 
```

像这样访问

```
<?php echo $_SESSION['token'];?> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T20:43:15.497

您可以采取几种不同的选择。

*   当呼叫连接时，通过对您的服务器的 POST 请求将呼叫状态存储在服务器上。然后当客户端刷新页面时，将传入（现有）调用推送到客户端。
*   使用 HTML5 localStorage 或类似方法将调用状态存储在客户端。当页面加载时，您的 JS 应该检查 localStorage 中是否存在调用。如果此数据库中存在调用，则连接到与以前相同的端点。

# mapreduce - 如何通过 oozie 调度 Hbase Map-Reduce 作业？

> ID：12559311
> 
> 赞同：1
> 
> 时间：2012-09-24T05:29:26.480
> 
> 标签：mapreduce, hbase, oozie

我想通过 Oozie 安排 Hbase Map-Reduce 作业。我面临以下问题。

```
How/Where  to specify these properties in oozie workflow ?
(    i> Table name for Mapper/Reducer 
     ii> scan object for Mapper         )

    Scan scan = new Scan(new Get());

    scan.setMaxVersions();

    scan.addColumn(Bytes.toBytes(FAMILY),
            Bytes.toBytes(VALUE));
    scan.addColumn(Bytes.toBytes(FAMILY),
            Bytes.toBytes(DATE));

    Job job = new Job(conf, JOB_NAME + "_" + TABLE_USER);
    // These two properties :-
    TableMapReduceUtil.initTableMapperJob(TABLE_USER, scan,
            Mapper.class, Text.class, Text.class, job);
    TableMapReduceUtil.initTableReducerJob(DETAILS_TABLE,
            Reducer.class, job); 
```

或者

`please let me know the best way to schedule a Hbase Map-Reduce Job by Oozie .`

谢谢 ：） ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T09:47:56.773

**安排 Hbase Map_Reduce 作业的最佳方式（据我说）是将其安排为 .java 文件。** *它运行良好，无需编写代码将扫描更改为字符串等。所以我正在安排我的作业，如 java 文件，直到我得到更好的选择。*

```
workflow-app xmlns="uri:oozie:workflow:0.1" name="java-main-wf">
<start to="java-node"/>
<action name="java-node">
    <java>
          <job-tracker></job-tracker>
        <name-node></name-node>
        <configuration>
            <property>
                <name>mapred.job.queue.name</name>
                <value>${queueName}</value>
            </property>
        </configuration>
        <main-class>org.apache.oozie.example.DemoJavaMain</main-class>
        <arg>Hello</arg>
        <arg>Oozie!</arg>
     <arg>This</arg>
        <arg>is</arg>
     <arg>Demo</arg>
        <arg>Oozie!</arg>

    </java>
    <ok to="end"/>
    <error to="fail"/>
</action>
<kill name="fail">
    <message>Java failed, error message[${wf:errorMessage(wf:lastErrorNode())}]</message>
</kill>
<end name="end"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-06-12T09:29:41.690

您也可以使用`<Map-reduce>`tag 来调度作业，但它不像 java 文件那样调度它那么容易。它需要相当大的努力，但可以考虑作为一种替代方法。

```
 <action name='jobSample'>
        <map-reduce>
            <job-tracker>${jobTracker}</job-tracker>
            <name-node>${nameNode}</name-node>
            <configuration>
                <!-- This is required for new api usage -->
                <property>
                    <name>mapred.mapper.new-api</name>
                    <value>true</value>
                </property>
                <property>
                    <name>mapred.reducer.new-api</name>
                    <value>true</value>
                </property>
                <!-- HBASE CONFIGURATIONS -->
                <property>
                    <name>hbase.mapreduce.inputtable</name>
                    <value>TABLE_USER</value>
                </property>
                <property>
                    <name>hbase.mapreduce.scan</name>
                    <value>${wf:actionData('get-scanner')['scan']}</value>
                </property>
                <property>
                    <name>hbase.zookeeper.property.clientPort</name>
                    <value>${hbaseZookeeperClientPort}</value>
                </property>
                <property>
                    <name>hbase.zookeeper.quorum</name>
                    <value>${hbaseZookeeperQuorum}</value>
                </property>
                <!-- MAPPER CONFIGURATIONS -->
                <property>
                    <name>mapreduce.inputformat.class</name>
                    <value>org.apache.hadoop.hbase.mapreduce.TableInputFormat</value>
                </property>
                <property>
                    <name>mapred.mapoutput.key.class</name>
                    <value>org.apache.hadoop.io.Text</value>
                </property>
                <property>
                    <name>mapred.mapoutput.value.class</name>
                    <value>org.apache.hadoop.io.Text</value>
                </property>
                <property>
                    <name>mapreduce.map.class</name>
                    <value>com.hbase.mapper.MyTableMapper</value>
                </property>
                <!-- REDUCER CONFIGURATIONS -->
                <property>
                    <name>mapreduce.reduce.class</name>
                    <value>com.hbase.reducer.MyTableReducer</value>
                </property>
                <property>
                    <name>hbase.mapred.outputtable</name>
                    <value>DETAILS_TABLE</value>
                </property>
                 <property>
                    <name>mapreduce.outputformat.class</name>
                    <value>org.apache.hadoop.hbase.mapreduce.TableOutputFormat</value>
                </property>

                <property>
                    <name>mapred.map.tasks</name>
                    <value>${mapperCount}</value>
                </property>
                <property>
                    <name>mapred.reduce.tasks</name>
                    <value>${reducerCount}</value>
                </property>
                <property>
                    <name>mapred.job.queue.name</name>
                    <value>${queueName}</value>
                </property>
            </configuration>
        </map-reduce>
        <ok to="end" />
        <error to="fail" />
    </action>
    <kill name="fail">
        <message>Map/Reduce failed, error
            message[${wf:errorMessage(wf:lastErrorNode())}]</message>
    </kill>
    <end name='end' /> 
```

要了解有关属性名称和值的更多信息，请转储配置参数。此外，扫描属性是扫描信息的一些序列化（Base 64 编码版本），因此不确定如何指定 -

```
scan.addColumn(Bytes.toBytes(FAMILY),
            Bytes.toBytes(VALUE)); 
```

# twitter - 使用开放图为 fb、g+ 和 twitter 自定义共享图像

> ID：12559315
> 
> 赞同：0
> 
> 时间：2012-09-24T05:30:01.360
> 
> 标签：twitter, facebook-opengraph, google-plus

是否可以为 Facebook、Google+ 和 Twitter 提供自定义共享图像？

我已经在文档的头部设置了打开的图形标签。

谢谢

**更新：**

对于脸书：

`<a href="http://www.facebook.com/share.php?u=url" target="_blank" ><img src="fb-img"/></a>`

对于推特：

`<a href="http://twitter.com/home?status=<my-status>" target="_blank"><img src="twitter-img" /></a>`

仍在寻找 google+

顺便说一句，与 Facebook 的 sharer.php v/s share.php 有什么区别吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-23T15:27:15.887

我找到了使用 Facebutton 实现自定义共享按钮的最佳解决方案：转到 facebook 开发人员页面，您将必须阅读以下文章，该文章将向您解释如何在页面顶部使用元标记 (HTML)： [https：/ /developers.facebook.com/docs/sharing/webmasters](https://developers.facebook.com/docs/sharing/webmasters)

基本上你需要在你的页面上添加一个分享按钮，对吧？因此，您需要做的首先是在页面顶部添加页面要求您提供的元标记。然后一切就这么简单。在 facebook 为您提供分享按钮的代码后，现在当您单击它时，它将显示您在元标记上指定的图像。看看那个页面，你会发现实现它是多么容易。

Twitter 我还没有为谷歌实现它:(

# xml - WCF 所需的 XML 列表类型

> ID：12559319
> 
> 赞同：0
> 
> 时间：2012-09-24T05:30:32.163
> 
> 标签：xml, wcf, rest

我正在将 xml 数据的单个帖子从 android 应用程序 (java) 发送到 .net 4 WCF Web 服务。xml创建如下

```
 xmlBuilder.append("<?xml version=\"1.0\" encoding=\"UTF-8\"?>");
  xmlBuilder.append("<LogDeviceCommunication
  xmlns=\"http://schemas.datacontract.org/2004/07/conxEntities\">");
  xmlBuilder.append("<DeviceID>").append(DeviceID).append("</DeviceID>");
  xmlBuilder.append("<ID>").append(ID).append("</ID>");
  xmlBuilder.append("<Info>").append(Info).append("</Info>");
  xmlBuilder.append("<Line>").append(Line).append("</Line>");
  xmlBuilder.append("<Tab>").append(Tab).append("</Tab>");
  xmlBuilder.append("<Time>").append(new DateTime(Time).toDateTimeISO()).append
  ("</Time>");
  xmlBuilder.append("</LogDeviceCommunication>"); 
```

WCF方法如下

```
 [OperationContract]
  [WebInvoke(UriTemplate = "AddDeviceCommunicationLog", RequestFormat = 
  WebMessageFormat.Xml, BodyStyle = WebMessageBodyStyle.Bare, Method = "POST")]
  string AddDeviceCommunicationLog(LogDeviceCommunication deviceCommunicationEntry); 
```

我想更改为发送 LogDeviceCommunication 列表以加快速度，但不确定将什么用作父元素，即

```
<parent element>
  <logdevicecommunication>...</logdevicecommunication>
  <logdevicecommunication>...</logdevicecommunication>
  <logdevicecommunication>...</logdevicecommunication>
</parent element> 
```

对 WCF 的调用通常会返回一个 List 作为 ArrayOf.... 但发布时自然不存在这种类型。我是否需要创建一个消息合同或类似的？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T13:12:28.533

您只需要一个集合数据合同类型，例如：

```
[CollectionDataContract(Name="WhateverYouWantToCallTheRootElement")]
public class LogDeviceCommunications: Collection<LogDeviceCommunication>  {} 
```

然后更改您的操作方法以采用这种新类型的参数。

# iphone - 如何在 ios 4 及更高版本中缓存整个网页

> ID：12559320
> 
> 赞同：0
> 
> 时间：2012-09-24T05:30:37.533
> 
> 标签：iphone, uiwebview, ios4, http-caching

我是 iphone 开发的新手。我想知道如何在 ios 4 及更高版本中进行缓存？我得到了很多答案，但现在我很困惑，不知道从哪里开始。

在我的项目中，我正在做 http 请求并使用显示结果`UIWebView`

在这里，我想缓存http数据。因此，下次应用程序再次启动时，它将从缓存中重新加载数据。

如何缓存 IOs 4 及以上版本的网页数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T04:47:14.123

我已经使用 ASIHTTPRequest 缓存了整个网页。[我浏览了 ASIHTTPRequest：这里是它的链接。](http://allseeing-i.com/ASIHTTPRequest/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T06:47:19.663

您将不得不使用 Core Data 通过在其中建模数据来在本地存储数据。您将需要阅读核心数据编程指南：这里是它的链接。 [http://developer.apple.com/library/mac/documentation/cocoa/Conceptual/CoreData/CoreData.pdf](http://developer.apple.com/library/mac/documentation/cocoa/Conceptual/CoreData/CoreData.pdf)

在您了解了如何存储数据之后，您将能够在下次启动应用程序时轻松加载它。我不确定如何在本地将 web 视图的数据存储为 html 页面，尽管这也可以是一种替代方法。希望对你有帮助！！！干杯！！

# facebook-graph-api - 如何获取将 facebook 应用程序的图像共享给用户时间轴的代码？

> ID：12559324
> 
> 赞同：1
> 
> 时间：2012-09-24T05:30:49.213
> 
> 标签：facebook-graph-api

我可以获得**Facebook 应用程序**的正确代码，它允许将应用程序的结果图像分享或发布到用户墙（**时间轴**）。

目前我正在使用下面的代码；-

```
 $attachment = array(
   'message' => 'this is my message',
   'name' => 'This is my demo Facebook application!  https://apps.facebook.com/whoisyourmillionare/',
   'caption' => "Caption of the Post",
   'description' => 'this is a description',
   'picture' => 'http://www.nasa.gov/images/content/297522main_image_1244_946-710.jpg');
   $result = $facebook->api('/me/feed/', 'post', $attachment); 
```

输出如图**1 所示**

其实我需要像**图片2**

![在此处输入图像描述](../Images/e535beaa33cc27cee14b5ac9c855bc8f.png)

# visual-studio-2010 - 为什么在 Asp.Net MVC 应用程序中部署后图像和脚本文件路径无法解析

> ID：12559328
> 
> 赞同：0
> 
> 时间：2012-09-24T05:31:21.623
> 
> 标签：visual-studio-2010, image, deployment, iis-7, relative-path

我在 Visual Studio 2010 中开发了一个 Asp.Net MVC 应用程序。到目前为止一切顺利。在图像和脚本执行的路径分辨率方面，一切都在 Visual Studio 中完美运行。当我使用 MVC 的默认模板时，我使用的是“../../Script/ *******.js”类型的路径。在我构建用于部署的包并在 IIS 中部署后，图像和脚本引用停止工作。我认为这可能是路径解析问题。我尝试使用“~/Script/***.js”，但它也不起作用。有人可以提出为什么会这样吗？***

 **** * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-25T10:41:12.253

考虑在您的任何 asp.net MVC 项目中使用两件事。

1) 使用 _Layout.cshtml 为常见站点元素使用布局，并在其中包含所有 javascript 和 css 文件，除非必要，否则不要将其放在任何其他 .cshtml 页面上。[看这里如何使用 _Layout.cshtml](http://www.asp.net/mvc/tutorials/mvc-music-store/mvc-music-store-part-3)

2）第二件事总是使用 @Url.Content() 指令来定义你的路径，例如

```
<link href="@Url.Content("~/Content/Site.css")" rel="stylesheet" type="text/css" />
<script src="@Url.Content("~/Scripts/jquery-1.5.1.min.js")" type="text/javascript"></script> 
<script src="@Url.Content("~/Scripts/modernizr-1.7.min.js")" type="text/javascript"></script> 
```

这两种方式总是可以帮助您并且即使您部署包也不会出现问题。

以上希望有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T05:46:48.580

我们在asp.net中使用URL Rewriting时遇到的这类问题，而asp.net mvc默认有一个URL Rewriting。

因此，当您使用脚本或 url 和 js 时，您可以像这样设置路径。

```
@Url.Content("~/Your Url or Your script or Your js File ") ; 
```

我想这会对你有所帮助。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T05:35:09.647

MVC 内置了生成 url 的函数，因此请使用这些函数而不是硬编码 url

```
@Url.Content("~/yourpath") 
```

当您将 webapp 部署到 IIS 上时，您的站点设置为作为虚拟目录运行，因此网站根目录不再与应用程序根目录相同，MVC 必须 `ActionLinks,Url.Contents`解析 Url。

[MSDN 帮助](http://msdn.microsoft.com/en-us/library/system.web.mvc.urlhelper.content.aspx)***

# c# - 不通过单击设置按钮更新 datagridview 中的所有多个选定单元格值

> ID：12559330
> 
> 赞同：3
> 
> 时间：2012-09-24T05:31:31.507
> 
> 标签：c#, winforms

```
 private void dataGridView1_CellContentClick
    (object sender,DataGridViewCellEventArgs e) 
    {
        int i,j;
        i = dataGridView1.CurrentCell.RowIndex;
        j = dataGridView1.CurrentCell.ColumnIndex;
        txtcellvalue.Text = dataGridView1.Rows[i].Cells[j].Value.ToString(); 
    }

    private void Setvaluebutton_Click(object sender, EventArgs e)
    {
        int i = 0;
        //foreach(DataGridViewRow datagridviewrow in dataGridView1.Rows)
        //{
            i = dataGridView1.SelectedCells[0].RowIndex;
            string study = dataGridView1.Rows[i].Cells[2].Value.ToString(); 
            txtcellvalue.Text = dataGridView1.Rows[i].Cells[3].Value.ToString();
            txtcellvalue1.Text = dataGridView1.Rows[i].Cells[4].Value.ToString();
            string unit = dataGridView1.Rows[i].Cells[5].Value.ToString();
            i = i + 1;
            DialogResult dr = MessageBox.Show
            ("Would like to update the click yes!!",
             "values", MessageBoxButtons.YesNo);
            if (dr == DialogResult.Yes)
            {
                db.OpenDB();
                string query = "Update [table] set [status]=" + study + ",
                [limit]='" + txtcellvalue.Text + "' ,[limit2]='" + txtcellvalue1.Text
                 + "',[unit]='" + unit + "' where [tno]=" + i + ";";
                db.Update(query);
                DatagridviewMethod();
                db.CloseDB();

            }
            else
            {
                DatagridviewMethod();
            }
      // }                         

    } 
```

在这里，我试图在datagridview中显示所有数据库表值。在datagridview中显示所有值后，尝试替换datagridview中的单元格值，我可以编辑和替换另一个值，但在更新时它只会更新一行值而不是所有其他行（所有选定的行）在 datagridview 中一次的值。请给我任何建议吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-28T19:26:19.750

如果我正确理解了您的代码，那么每当您运行该方法时，它只会在一行上执行，因为变量 [i] 永远不会更新。即使您选择了多行，它也会保持不变，因为 [i] 将始终指向您当前或“活动”行（在代码中的任何地方都不会更改）。要解决这个问题，请尝试遍历 SelectedRows 集合，例如

```
foreach (DataGridViewRow dgvrow in dataGridView1.SelectedRows) {
    string study = dgvrow.Cells[2].Value.ToString();
    txtcellvalue.Text = dgvrow.Cells[3].Value.ToString();
    txtcellvalue1.Text = dgvrow.Cells[4].Value.ToString();
    string unit = dgvrow.Cells[5].Value.ToString();

    if (MessageBox.Show("Would like to update the click yes!!",
        "values", MessageBoxButtons.YesNo) ==
        System.Windows.Forms.DialogResult.Yes) {
            // ETC...
    }
    else {  }
} 
```

# c# - 使用 IDispatchMessageFormatter.DeserializeRequest 时确定 WCF 方法的参数类型

> ID：12559337
> 
> 赞同：1
> 
> 时间：2012-09-24T05:32:10.183
> 
> 标签：c#, wcf-rest

我们有一个自定义 IDispatchMessageFormatter（可以使用属性应用于任何特定方法）来处理与我们的 RESTful WCF 服务之间的 JSON 请求。我已经实现了 DeserializeRequest 方法，但只需要在运行时确定将查询字符串参数转换为什么类型。例如，如果方法是：

```
[MyCustomOperationBehavior]
[WebGet("/thethings/{thing1}/{thing2}/{number1}")]
public MyReturnThing Foo(string thing1, string thing2, int number1) 
```

我需要知道 WebOperationContext.Current.IncomingRequest.UriTemplateMatch.BoundVariables 集合中的第三个参数应该是一个 int。WCF 堆栈显然可以做到这一点，但我不确定如何访问从调度格式化程序中调用的方法。对此的任何帮助将不胜感激！

# javascript - 附加的 Div 无法正常工作

> ID：12559341
> 
> 赞同：0
> 
> 时间：2012-09-24T05:32:24.443
> 
> 标签：javascript, asp.net-mvc

我正在开发 MVC 3 应用程序并使用剃刀语法。

在这个应用程序中，我提供评论功能。

当用户单击添加评论按钮时，它会保存在 DB 中，并且还会附加在当前 Div 中。

请检查图像...

*这是添加新评论之前的图像...*

![在此处输入图像描述](../Images/2cf32a40f8a486d1673755a38c83db92.png)

*这张图片是在添加新评论后...*

![在此处输入图像描述](../Images/de77e62ddcb03d4d8e47237b0b07554d.png)

现在，我的问题是当用户单击新添加的评论的删除按钮时，我想显示味精-“删除过程从这里开始......”但它现在正在工作......

这是我的代码...

```
<script src="../../Scripts/jquery.validate.min.js" type="text/javascript"></script>

@model  IEnumerable<CRMEntities.Comment>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>

//Button which Saves currently added comment in DB as well display on screen...
<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">
    $(document).ready(function () {
        $('#AddCommentButton').click(function () 

        {     

       // alert("clicked");
            $.ajax({

                type: 'post',
                url: '/Comment/SaveComments',
                dataType: 'json',
                data:
                { 

                 'comments' : $('#Comment').val(), 
                 'EType' : @Html.Raw(Json.Encode(ViewBag.EType)), 
                  'EId' : @Html.Raw(Json.Encode(ViewBag.EId))

                },
                success: function (data) {

                    $("p.p12").append('<div style="background-color:#FAFAFA;">Recently Added... <br /><a href="@Url.Action("Details", "Employee", new { id = "__id__" })'.replace('__id__', data.OwnerID) + '">' + data.OwnerName + '</a>'+ data.cmtDateTime +'<button type="button" id=' + data.Id  + ' class="deleteComment">Delete</button></span><br />' + data.msg + '</div>')

                }

            });
        });
    });
</script>

</head>
<body>

@{

     <div class="ParentBlock">

    @foreach (var item in Model)
    {
        <div class="OwnerClass" id="OwnerName">

         <span class="EmpName"> @Html.ActionLink(item.Owner.FullName, "Details", "EMployee", new { id = item.OwnerId }, new { @style = "color:#1A6690;" })</span>

           @Html.DisplayFor(ModelItem => item.CommentDateTime)

          <span class="EmpName"><button type="button" id = "@item.Id" class="deleteComment">Delete</button></span>

        <p class="CommentP">
           @Html.DisplayFor(ModelItem => item.CommentText)
        </p>

        </div>

    }

     <p class="p12">

      </p>

</div>

      <p id="ClassPara" class="ShowComments" onclick="chkToggle()">Show All Comments</p>

}

   @Html.TextArea("Comment", "", 5, 80, "asdsd")

    <input type="button" value="Add Comment" id="AddCommentButton"/>                         
    <input type="button" value="Clear" onclick="clearText()"/>                    

    <br />

</body>
</html>

<script src="../../Scripts/jquery.js" type="text/javascript"></script>
<script type="text/javascript">

//   Working code - Deletes the comment from DB and removes hide the current Div
////////////////////////////////////////////////////////

    $(document).ready(function () {
        $(".deleteComment").click(function ()
         {
            alert("Delete process start here...");

         });
    });

</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:48:10.663

使用 JQuery`[on][1]`代替`click`; 前者将在文档被修改时动态处理事件，而后者在您调用它时将事件连接一次。

```
$("body").on("click", ".deleteComment", function ()
     {
        alert("Delete process start here...");
     }); 
```

# compilation - OCAML 编译错误 Out_of_memory

> ID：12559342
> 
> 赞同：1
> 
> 时间：2012-09-24T05:32:39.620
> 
> 标签：compilation, ocaml, out-of-memory

当我在我的共同服务器上编译 OCaml ocaml-4.00.0 的最新版本的源时，我有以下 Out_of_memory 错误消息：“致命错误：异常 Out_of_memory 执行此命令时退出代码 2：../ocamlcomp.sh -c -g -warn-error A -wa -I camlp4/boot -I camlp4 -I stdlib -o camlp4/boot/camlp4boot.cmo camlp4/boot/camlp4boot.ml"

我最初的 bash 命令是：make world

有人知道这个错误可能来自哪里吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:48:04.820

我最近多次编译了 OCaml 4.00.0，并且保存了一些日志。您在此处给出的确切失败命令出现在日志的一半左右，然后继续成功构建编译器。我会由此得出结论，您实际上内存不足。即，编译占用的内存比您的系统可用的内存多。这可能吗？（我不知道您所说的共享服务器是什么意思。）

# javascript - Knockout 是完全由事件驱动的吗？

> ID：12559344
> 
> 赞同：0
> 
> 时间：2012-09-24T05:32:47.900
> 
> 标签：javascript, jquery, .net, knockout.js

好吧，我基本上是在探索淘汰赛并了解它必须提供的不同功能。我真的很喜欢模板和两种方式的绑定，并对其进行了一些观察。现在，它最近在我们公司为可能的模块实现了，但是关于它是如何被事件驱动的以及它是多么美丽，这是一个非常大的话题。

好吧，当他们争辩说它是非常受事件驱动的时候，他们将它与 JQuery 相提并论。他们的论点是，在 JQuery 中，任何人都可以进来并将按钮的 onClick 绑定到任何地方，有时当没有将所有控件的所有事件保存在同一个位置的设定标准时，它会变得混乱，这使得代码难以管理。

我的论点是，可能是 Jquery 需要显式管理代码来实现这一点，但事件驱动编程不是专有的吗？asp.net 网页拥有它的代码多年，经典的 ASP 和古老的 JavaScript 以及它的所有 OnClick 事件怎么样？

我在这里错过了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:14:37.893

好吧，事件并不新鲜。自从按钮控件出现以来，它就应该以一种或另一种方式存在。但不同之处在于事件的使用方式以及您的可维护性。

在 jQuery 和 Knockout 上，我认为这不是事件的问题，而是设计模式的问题。jQuery，使用事件（是的，在某些情况下有更多代码），但它没有指定要使用的特定模式。另一方面，KnockoutJS 引入了具有双向数据绑定的 MVVM 模式，这将为您提供编写复杂应用程序所需的结构。

在我看来，使用模式肯定会增强代码的可维护性。你甚至可以用纯 jQuery 实现 MVVM、MVC 或 MVP。但这需要更多的努力，因为 jQuery 并不是专门为此工作的。例如，如果您使用 BackboneJS，它可以让您按照 MVC 模式组织代码，并且您可以使用 jQuery 进行事件绑定。

每个库都有自己的位置，具体取决于用例。对于简单的单向事件处理，您可能不需要淘汰视图模型，而只需使用 jQuery 进行清理即可。但是对于具有高双向消息传递的复杂 UI，淘汰赛将用更少的代码完成工作。

也采取其他方案... Knockout 需要您使用其自定义属性篡改 HTML。如果更改 HTML 不适合您怎么办？jQuery 在那里有一个更好的用例。根据用例使用 jQuery、Knockout、Backbone 或 BoilerplateJS.. 不仅仅是因为有人认为它很酷 :)

# c# - 在 C# 中使用 linq 更改主键

> ID：12559345
> 
> 赞同：1
> 
> 时间：2012-09-24T05:32:54.863
> 
> 标签：c#, linq

如何在 c# 中使用 linq 更改主键我尝试

```
db.SubmitChange(); 
```

发生错误。然后我意识到 linq 不允许更改我的 c# 程序中的主键字段我该如何解决这个问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:36:08.723

您不能使用 LINQ 更新主键。您需要从数据库中删除该行并使用新的主键添加一个新行。您可以**使用 SQL**在数据库中执行此操作，但它应该是**唯一**的并且**不应该违反任何外键约束**。

# spring-mvc - 无法读取 jsp 上的标签库

> ID：12559346
> 
> 赞同：0
> 
> 时间：2012-09-24T05:33:00.773
> 
> 标签：spring-mvc, jsp-tags

嗨，我正在使用 Spring MVC 3.0 框架。当我尝试通过 jsp 显示某些内容时，我收到一条错误消息，提示无法从 JAR 文件中读取 TLD“META-INF/spring-form.tld”，尽管存在 jar 文件。 .

以下是 jsp 上的代码：

```
<%@page import="java.util.ArrayList"%>
<%@page import="java.util.List"%>
<%@page contentType="text/html" pageEncoding="UTF-8"%>
<%@ taglib uri="http://www.springframework.org/tags/form" prefix="form"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c"%>
<%@ taglib uri="http://java.sun.com/jsp/jstl/functions" prefix="fn"%>
<link rel="stylesheet" href="./css/main_style.css" type="text/css"></link>

<script  language=Javascript>

    var indexVal=1;

    var fields = document.getElementsByName("languages");
    function getLang(){
        for (var i = 0; i < fields.length; i++)
        {
            alert(fields[i].value);
        }
    }
    function addLang(){
        var newLang = '<td> <select name="languages"><c:forEach var="item" items="${languageList}"><option><c:out value="${item.displayText}"/></option></c:forEach></select> <a href="#" onclick="addLang();return false;">+</a> <a href="#" onclick="removeLang(this); return false;">-</a> </td>';
        var table = document.getElementById("langTable");
        var trElement = document.createElement("tr");
        trElement.innerHTML = newLang;
        table.appendChild(trElement); 
```

我使用的罐子清单如下：

*   eclipselink-jpa-modelgen-2.3.0
*   eclipselink-2.3.0
*   javax.persistence-2.0
*   org.eclipse.persistence.jpa.jpql_1.0.0
*   aopalliance-1.0
*   commons-dbcp-1.4
*   公共池-1.5.6
*   mysql-connector-java-5.1.13-bin
*   休眠支持罐子
*   jstl11 罐子
*   Spring 3.0 罐子

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:05:39.113

spring-form.tld 位于 spring-webmvc jar 中。确保你的类路径中有它。

# asp.net - XLST 在 web.sitemap 中查找 ASP.NET 角色

> ID：12559349
> 
> 赞同：1
> 
> 时间：2012-09-24T05:33:42.000
> 
> 标签：asp.net, xslt, menu, sitemap

我正在使用使用 VS.net 2010 创建的 web.sitemap 以及 XSLT 来创建一个干净的 CSS 菜单。
我已经修改了[Cyotec](http://cyotek.com/blog/using-xslt-to-display-an-asp-net-sitemap-without-using-tables)的 xslt 以去除第一个节点，但是到目前为止我无法弄清楚如何在其中搜索以仅根据用户的角色显示链接。

XSLT 如下：

```
<?xml version="1.0" encoding="utf-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:map="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" exclude-result-prefixes="map">
  <xsl:output method="xml" encoding="utf-8" indent="yes"/>

  <xsl:template name="mapNode" match="/">
    <ul id="main-menu">
      <xsl:apply-templates select="*"/>
    </ul>
  </xsl:template>

  <xsl:template match="/*/*">
    <xsl:apply-templates select="*"/>
  </xsl:template>

  <xsl:template match="map:siteMapNode">
    <xsl:if test="/siteMap/SiteMapNode[@roles != 'Admin']">
            <li>
          <a href="{substring(@url, 2)}" title="{@description}">
            <xsl:value-of select="@title"/>
          </a>

          <xsl:if test="map:siteMapNode">
            <xsl:call-template name="mapNode"/>
          </xsl:if>

        </li>
    </xsl:if>
  </xsl:template>

</xsl:stylesheet> 
```

XML 如下所示：

```
<?xml version="1.0" encoding="utf-8" ?>
<siteMap xmlns="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" >
  <siteMapNode url="~/" title=""  description="Anon" roles="*">
    <siteMapNode url="~/anon.aspx" title="Anon"  description="Anon" roles="*" />
    <siteMapNode url="~/admin1.aspx" title="Admin1"  description="Admin Only" roles="Admin"/>
    <siteMapNode url="~/admin2.aspx" title="Admin2"  description="Admin Only" roles="Admin">
      <siteMapNode url="~/admin3.aspx" title="Admin3"  description="Admin Only" roles="Admin"/>
    </siteMapNode>
  </siteMapNode>
</siteMap> 
```

我只想输出角色的 url 标题和描述！= Admin 没有搜索，一切都可以正常工作。
有没有人能够阐明“if”功能，或者提出更好的方法来实现这一点？
提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:33:37.097

您当前**xsl:if**条件的问题....

```
<xsl:if test="/siteMap/SiteMapNode[@roles != 'Admin']"> 
```

....是第一个正斜杠意味着它是一个绝对路径，从根元素开始，所以所有的**xsl:if**都是说是否有任何**SiteMapNode**，直接在**siteMap**元素下，不是管理员角色. 这意味着在您的情况下它总是正确的。

你真的只想检查当前元素的角色

```
<xsl:if test="@roles != 'Admin'"> 
```

但是，有一种更简洁的方法可以做到这一点。删除**xsl:if**条件，只使用一个单独的模板来匹配管理员角色元素，并忽略它们。

```
<xsl:template match="map:siteMapNode[@roles='Admin']"/> 
```

这是完整的 XSLT

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:map="http://schemas.microsoft.com/AspNet/SiteMap-File-1.0" exclude-result-prefixes="map">
   <xsl:output method="xml" encoding="utf-8" indent="yes"/>

   <xsl:template name="mapNode" match="/">
      <ul id="main-menu">
         <xsl:apply-templates select="*"/>
      </ul>
   </xsl:template>

   <xsl:template match="/*/*">     
      <xsl:apply-templates select="*"/>     
   </xsl:template>     

   <xsl:template match="map:siteMapNode[@roles='Admin']"/>

   <xsl:template match="map:siteMapNode">
      <li>
         <a href="{substring(@url, 2)}" title="{@description}">
            <xsl:value-of select="@title"/>
         </a>
         <xsl:if test="map:siteMapNode">
            <xsl:call-template name="mapNode"/>
         </xsl:if>
      </li>
   </xsl:template>
</xsl:stylesheet> 
```

应用于您的示例 XML 时，将输出以下内容

```
<ul id="main-menu">
   <li>
      <a href="/anon.aspx" title="Anon">Anon</a>
   </li>
</ul> 
```

Do note the template that matches the admin role element is more specific that the template that matches any **SiteMapNode** element and so the XSLT processor will give priority to this when matching.

# oracle - 使用 SQL*Plus 在远程 Oracle 服务器上运行命令行命令

> ID：12559350
> 
> 赞同：0
> 
> 时间：2012-09-24T05:33:52.797
> 
> 标签：oracle, sqlplus

我有一台在 windows server 2008 中运行 Oracle 10g 服务器的机器。我想备份数据库。我还想备份用户使用我的网站上传的 Oracle 服务器保存在硬盘上的一些文件。

我可以使用 sql developer 和 sqlplus 连接到 Oracle 服务器。我可以在服务器上运行 sql 查询。

为了备份数据库，我必须运行命令“exp”（这是我知道的唯一备份数据库的方法）。可能还有其他方法，但还有另一个问题，因此我必须运行 dos 命令。这个问题是备份文件。这些文件存储在 c:\mydir 中。文件夹 mydir 无论如何都无法通过 Web 访问，并且不是共享文件夹。

连接到oracle服务器后，我尝试在sqlplus中运行“host”，即在“sql>”提示符下。该命令成功运行，但在本地机器上，而不是在 oracle 服务器上。

编辑：“host”命令由 sqlplus 提供，不是 oracle 命令，意味着不能在查询中使用。Sqlplus 即使连接到远程机器，也可以在本地机器上运行“host”命令。

目标是让 sqlplus 在远程机器上运行“host”命令，或者从 pl/sql 查询（独立于 sqlplus）内部运行 dos 命令。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:32:16.387

除了贾斯汀所写的：

如果您想获取数据库的逻辑快照，则新的[DataPump](http://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_overview.htm)工具比旧的（和已弃用的）`exp`工具更受欢迎。

DataPump 是一个命令行工具 ( `expdp`)，但也有一个通过 Oracle 包和过程的 SQL API。

[数据泵 API](http://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_api.htm)（包括示例）
[DBMS_DATAPUMP](http://docs.oracle.com/cd/B28359_01/server.111/b28319/dp_overview.htm)（参考）

但是如果你想要一个“真正的”备份，你应该看看[RMAN](http://docs.oracle.com/cd/B28359_01/backup.111/b28270/toc.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:11:49.873

可以在数据库服务器上创建一个 Java 存储过程，该过程在 Oracle 服务器上执行[操作系统命令](http://asktom.oracle.com/pls/apex/f?p=100:11:0%3a%3a%3a%3aP11_QUESTION_ID:952229840241)。但是使用导出实用程序来备份数据库是非常不寻常的——它只创建一个逻辑备份而不是更合适的物理备份。通过 SQL*Plus 连接到数据库并在服务器操作系统上生成作业来运行备份是非常不寻常的。在数据库服务器上使用 Windows 调度程序创建一个作业会更有意义，该调度程序运行您想要运行的任何导出命令。

# assembly - leal (%eax, %eax) 有什么作用？

> ID：12559357
> 
> 赞同：2
> 
> 时间：2012-09-24T05:34:54.950
> 
> 标签：assembly, x86, att, addressing-mode

做什么`leal (%eax, %eax)`？%eax * 2 处的内容是否会相乘，因为它有括号？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T05:56:42.300

它将使用`eax`和`eax`、IOW、2*之和加载目标操作数`eax`。

# php - 动态变化 使用PHP点击链接的内容？

> ID：12559361
> 
> 赞同：1
> 
> 时间：2012-09-24T05:35:20.783
> 
> 标签：php, javascript, dynamic

我的网页上有一个区域，其中包含不同`<div>`的信息容器。当我的导航栏中的一个链接被按下时，一个`<div>`会淡出，另一个会淡入。我想做的是让这些内容之一`<div>`充满动态信息，当一个链接被按下时“页面”将更改从哪个数据库加载信息，然后显示或淡入`<div>`新信息。

须藤：

```
<a href = "#" onClick = "changeContent('dynamicDiv'); [Set which database to load the information from]; "> View information </a>

<div id = "dynamicDiv">
<?php include 'file.php' ?>
</div> 
```

文件.php

```
**Find which database to load information from and display content** 
```

我考虑过使用 $GLOBAL 变量，但我不确定如何从链接设置这些变量，而且它也不会重新加载 div 内容。

我也考虑过使用表单，但我不确定这样做的“正确”方式是什么，并且当重新加载页面时`<div>`，默认显示的内容将被加载，而不是`<div id = "dynamicDiv>`

非常欢迎任何建议/想法....

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T05:39:00.103

在这种情况下，您应该使用 ajax。

AJAX 用于在不重新加载页面的情况下从服务器更改页面内容。

你可以使用这个[JQUERY AJAX](http://api.jquery.com/jQuery.ajax/)和[JQUERY LOAD](http://api.jquery.com/load/)

```
$(document).ready(function(){

$("#changediv").load("load.php?id=1");

}) 
```

在 load.php $id=$_GET['id'];

```
// use that id for dynamic query in database
$query="SELECT *.....";
$result=mysql_query($query);
echo mysql_fetch_array($result);//somthing like that 
```

所有在 php 中回显的单词在 ajax 中都变成了响应。

# c# - WinRT 中 Metro 应用程序的 XMPP 库

> ID：12559363
> 
> 赞同：5
> 
> 时间：2012-09-24T05:35:22.250
> 
> 标签：c#, xmpp, windows-runtime, ejabberd, agsxmpp

您能否列出一些支持 WinRT 中 Metro 应用程序的 XMPP 库？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:29:00.350

MatriX 可用于 WinRT ( [https://www.ag-software.net/matrix-xmpp-sdk/](https://www.ag-software.net/matrix-xmpp-sdk/) )

# ruby-on-rails - 部署一个 ruby on rails 应用程序

> ID：12559367
> 
> 赞同：1
> 
> 时间：2012-09-24T05:35:52.047
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, rubygems

我正在尝试在 Rails 应用程序上部署一个 ruby​​。它使用 mysql 作为数据库。我想做的是将它作为 Windows 可执行文件分发。它应该是这样一种方式，用户可以点击应用程序，一切都会加载，并会出现一个全屏浏览器窗口。这样用户就不会知道它是一个浏览器，也不需要安装 ruby​​ 组件来运行应用程序。

我正在使用 3.2.6 ， ruby​​ 1.9.3 ， gem 1.8.24 有没有人做过这样的事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:13:48.173

好吧，您可以创建一个可移植的发行版 - 自解压存档，它将提取您的 Rails 应用程序、带有所有必要 gem 的预配置 Ruby 包和一个 bat 文件，它将将 Ruby 添加到 PATH 变量、运行 Rails 服务器并打开浏览器窗户。我想，让 MySQL 可移植肯定会让人头疼。

主要缺点之一是几乎零级兼容性 - 某些 gem 无法在某些系统上运行，数据库驱动程序不兼容等。

我曾经尝试用 Apache+MySQL+PHP 做同样的事情，最终使用一台共享 PC 作为服务器，仅将浏览器启动器作为独立应用程序分发。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:22:56.963

我会尝试用你的应用程序需要的所有东西预先打包一个虚拟 linux 盒子，然后发布它。

而且，是的，我也对最终答案很感兴趣 :-)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T09:37:48.640

这可能是 JRuby 的工作。

尝试在您的开发机器上安装 JRuby 并查看您的应用程序是否在 JRuby 中运行而没有任何兼容性问题。如今，这很有可能。

在 JRuby 中运行您的应用程序使您能够将所有 Ruby、Rails、gem 和应用程序打包为单个 .war 文件，然后可以将其部署在像 Tomcat 这样的 java 应用程序服务器中（使用类似[warbler](http://caldersphere.rubyforge.org/warbler/ "莺")的工具）

这仍然留给您安装所有基础设施（数据库、java、java 应用程序服务器等）的任务。

# java - Android/Facebook API 获得会员以来

> ID：12559371
> 
> 赞同：0
> 
> 时间：2012-09-24T05:36:28.380
> 
> 标签：java, android

我想弄清楚如何才能获得我在 Facebook 上注册的确切日期。

我正在使用此代码从 facebook 获取数据（使用 JSON），但我无法弄清楚如何获取成员，因为

```
 JSONObject profile = new JSONObject(json);
 ////////
 String ID = profile.getString("id"); 
```

有什么办法可以做到吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:47:53.460

简短的回答：没有

长答案：Facebook API、Graph API 和 FQL 没有该规定。话虽如此，Facebook 网站（用户，而非开发人员）也不会向帐户持有人提供该信息。

Facebook 可能有也可能没有理由不透露该信息。对 SO 的搜索给出了这个链接： http: [//facebook.stackoverflow.com/a/8821957/450534](http://facebook.stackoverflow.com/a/8821957/450534)。尽管这个问题的平台是`python`，但可用的 API 选项本质上仍然跨平台通用。

# perl - Apache2 从 CGI 内部重新加载配置

> ID：12559378
> 
> 赞同：3
> 
> 时间：2012-09-24T05:37:16.477
> 
> 标签：perl, apache, cgi

我正在开发一个简单的 Perl 应用程序，它复制另一个 Perl 应用程序并构建所有必需的 Apache 配置文件。

我似乎无法弄清楚的是如何即时重新加载 apache 配置。我知道我可以进行系统调用并在那里重新加载 apache，但这意味着我必须获得对这个应用程序的 root 访问权限，这有点吓人。

有没有办法让 apache 从 CGI 容器中重新加载其配置文件？

- - - - - - - - - - - - -附加信息 - - - - - - - - - - - - --------

我做了更多的研究，问题是 Apache 必须以提升的权限运行才能绑定到端口 80。所以一种解决方案是将 Apache 设置为在另一个端口上运行并通过 iptables 将该端口转发到 80。（这可能是最后的手段，但却是一个非常混乱的解决方案）。

这让我明白了，Apache 应该能够维护其当前的端口绑定并重新检查其配置文件，我所做的只是添加另一个脚本别名。

有没有办法在不重新加载的情况下添加新的脚本别名？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T05:46:16.193

您还可以选择重新加载配置：

```
/etc/init.d/httpd reload 
```

或者

```
 apachectl -k graceful 
```

但不幸的是，那些`root`也需要。这与正常重启的不同之处在于**当前打开的连接不会中止**。副作用是旧的日志文件不会立即关闭。这意味着如果在日志轮换脚本中使用，可能需要大量延迟以确保在处理旧日志文件之前关闭它们。

此外，如果使用 daemontools 运行 Apache，您可以通过以下方式执行此操作：

```
svc -h /service/apache 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T01:39:15.907

很抱歉提出一个问题，然后不给其他人回答的机会，但我想出了一个解决方案，我希望它可以帮助其他人。

我必须做的就是不理会配置，如果没有 root 权限或一些花哨的端口转发，就不可能以我需要的方式重新加载（这会使这个应用程序的可移植性比我想要的要低）。

因此，Apache 似乎唯一动态加载的是文件系统。

我所做的是使用 mod_rewrite 重定向脚本请求并将它们简单地放入 /var/www/appname/copyname/cgi-bin/

# c - 嵌入式 C 中的空函数有什么用？

> ID：12559384
> 
> 赞同：2
> 
> 时间：2012-09-24T05:37:59.023
> 
> 标签：c, function

我正在开发一个嵌入式项目，并且在项目的源代码（在 C 中）中包含一个用于检查以太网类型是轮询还是中断的函数。我们有如下功能

```
 unsigned char mode(void);

    unsigned char xmode(void)
    {
         if(mode())
            return 1;
      return 0;
    } 
```

函数 mode() 没有主体。当函数 mode() 被函数 xmode() 调用时会发生什么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T06:55:06.813

扩展之前的答案。

这不是一个“空”函数，它是一个原型。

编译器使用它为您拥有主体的函数输出目标代码。它需要能够正确设置函数调用并确保它处理任何转换等。目标代码将包含对函数的引用，链接器将用正确的值替换这些引用。

这也意味着编译器可以为您进行错误检查并获得比链接器更多的信息。有趣的是，C 标准曾经允许隐式声明函数。

（为了清楚起见，这是简化的。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T06:49:16.207

在上面的代码`unsigned char mode(void);`中告诉编译器该函数`mode()`存在并且它不接受任何参数但返回一个`unsigned char`.

这并没有真正定义功能。它只定义了调用它的方式。这个东西叫做a `function prototype`。

该函数`mode()`稍后在同一个文件或另一个文件（可能是程序集文件）中定义。

函数原型的常见用途之一是实现递归。

考虑函数`a()`和`b()`，每个调用另一个，并在同一个文件中定义：

```
void a()
{
  b();
}

void b()
{
  a();
} 
```

当编译器看到`b()`内部时`a()`，它根本不知道`b()`真正是什么或应该是什么。显然，如果您更改定义`a()`and的顺序`b()`，您将遇到同样的问题，但现在`a()`不会在`b()`.

为了解决这个问题，你添加了一个原型：

```
void b();

void a()
{
  b();
}

void b()
{
  a();
} 
```

现在编译器将知道什么`b()`是（函数）并知道如何调用和使用它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T05:40:44.057

这将无法链接，或者您正在链接的文件包含实际`mode()`功能。

# jquery - 对多个元素使用 jquery 插件

> ID：12559393
> 
> 赞同：1
> 
> 时间：2012-09-24T05:38:43.457
> 
> 标签：jquery, jquery-plugins

我还是 jquery 插件的新手。我刚刚创建了一个插件，最终让我感到困惑。这是我拥有的快速类似代码：

```
(function(a) {
var writting = {
   container : "",
   textarea : "",

   init : function(el) {
      this.container = a(el);
      this.textarea = a("> textarea.wtxt", this.container);
   },

   manageLink : {
      initialise : function() {
         a("> .link_container > .toggleLink", writting.container).click(function() {
            writting.manageLink.removePreviousLink();
            a(this).toggleClass("hide");
         });
      },

      removePreviousLink : function() {
         // implementation
      },

      // all other functions
   }
}

a.fn.writting = function() {
   writting.init(this);
}
})(jQuery);

$(function() {
    $("#writting_box1").writting();
    $("#writting_box2").writting();
}); 
```

基本上会有很多书写框，上面的代码不会对#writting_box1 做任何事情，它总是对 writting_box2 / 最后声明的任何书写框生效。

谢谢你。

# java - Can 语句 n != n 在多线程环境中返回 true

> ID：12559394
> 
> 赞同：7
> 
> 时间：2012-09-24T05:38:51.250
> 
> 标签：java, multithreading

> **可能重复：**
> [如何模拟构造函数竞争条件？](https://stackoverflow.com/questions/2614066/how-to-simulate-constructor-race-conditions)
> [如何围绕未正确发布的值展示竞争条件？](https://stackoverflow.com/questions/2624638/how-to-demonstrate-race-conditions-around-values-that-arent-published-properly)

我从《java concurrency in practice》得到以下代码：

```
public class Holder{

  private int n;
  public Holder(int n){this.n = n;}
  public void assertSanity(){
     if(n != n) throw new AssertionError("This statement is false.");

  }

} 
```

我只是想知道条件`n != n`，在某种情况下可能是这样吗？</p>

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:51:14.063

我的猜测是你在问类似于这些问题的东西：

*   [如何围绕未正确发布的值展示竞争条件？](https://stackoverflow.com/questions/2624638/how-to-demonstrate-race-conditions-around-values-that-arent-published-properly)
*   [如何模拟构造函数竞争条件？](https://stackoverflow.com/questions/2614066/how-to-simulate-constructor-race-conditions)

我猜这本书是在讨论在对象完全构造之前共享对对象的引用的可能性，所指的行为是不正当的发布。

假设`n != n`分解为以下步骤：

```
Access n on the right side of the operand
Access n on the left side of the operand
Compare values 
```

那么不难想象`n`在前两步之间改变的值的情况。现在我知道你在想什么，“但`n`从未改变”。实际上是这样，因为在该实例`Holder`的构造函数完全运行之前，两个线程可以共享对该实例的访问。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T05:43:32.027

据推测，编译器会将其优化为始终为假，但如果不是，那么是的，在多线程环境中它可以返回真。

假设左边的 n 被复制到 aa 寄存器中。然后当前线程中断，下一个线程修改n，然后我们回到第一个线程。现在右侧的 n 被复制到一个寄存器，然后调用比较操作（在两个寄存器上）。

在这种情况下，它们会有所不同。

编辑：如果您查看下面 nhantdh 注释中的字节码，您会看到在 n 上执行了两次加载，因此两者之间的修改中断可能导致表达式评估为真。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T05:57:07.630

我想理论上这是可能的，因为`n`is not `volatile`。这意味着线程可以构造一个`Holder`对象，但设置的值对于`n`在调用比较操作的不同内核上运行的不同线程是不可见的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T06:57:15.363

该值将始终相同。

只要变量是原始类型，变量是非静态的并且您没有设置器，您就可以创建任意数量的类实例。这些实例永远不会在变量“n”中共享相同的“对象”/实例。

如果您在再次调用构造函数后更改该值，则该值可能会有所不同，例如 setter 或反射。

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-09-24T05:43:34.823

我从 C++ 中知道这个表达式。`n`如果不是数字，它可以是真的。请参阅[在 C++ 中检查双精度（或浮点数）是否为 NaN](https://stackoverflow.com/questions/570669/checking-if-a-double-or-float-is-nan-in-c)

# android - 链接 MainActivity 和 Overlay 类

> ID：12559399
> 
> 赞同：1
> 
> 时间：2012-09-24T05:39:29.963
> 
> 标签：android, onclick, overlay, mapquest

我目前正在使用 mapquest 进行 MapView，并且需要将叠加层添加到位置。目前我的 MapView 正在工作，但没有出现覆盖。关于如何解决它的任何想法？还可以在叠加层上创建一个 onClick 以将我带到 ListView 吗？谢谢提前！！

*我的主要活动*

```
public class QMapsActivity extends MapActivity {

protected MapView map;
AnnotationView annot;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(getLayoutId());      
    init();       
    annot = new AnnotationView(map);

}

protected void init() {
    // TODO Auto-generated method stub
    this.setupMapView();    

}

protected void setupMapView() {
    // set the zoom level, center point and enable the default zoom controls 
    map = (MapView) findViewById(R.id.map);
    map.getController().setZoom(16);
    map.getController().setCenter(new GeoPoint(1.309503,103.777793));
    map.setBuiltInZoomControls(true);

}

protected int getLayoutId() {
    return R.layout.main;
}

@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
}
} 
```

还有**我的 Overlay 课**

```
public class QPoiOverlay extends QMapsActivity{

protected void init() {
    super.init();
    setupMapView();

}

protected void addPoiOverlay() {
    // TODO Auto-generated method stub
    Drawable icon = getResources().getDrawable(R.drawable.location_marker);
    final DefaultItemizedOverlay poiOverlay = new DefaultItemizedOverlay(icon);

    OverlayItem loc1 = new OverlayItem(new GeoPoint (1.308763,103.777321), "area","area");
    poiOverlay.addItem(loc1);
    OverlayItem loc2 = new OverlayItem(new GeoPoint (1.309498,103.777101), "area","area");
    poiOverlay.addItem(loc2);
    OverlayItem loc3 = new OverlayItem(new GeoPoint (1.311531,103.778318), "area","area");
    poiOverlay.addItem(loc3);
    OverlayItem loc4 = new OverlayItem(new GeoPoint (1.308071,103.77841), "area","area");
    poiOverlay.addItem(loc4);

    poiOverlay.setOnFocusChangeListener(new ItemizedOverlay.OnFocusChangeListener() {

        @Override
        public void onFocusChanged(ItemizedOverlay Overlay, OverlayItem newFocus) {
            // when focused item changes, recenter map and show info
            map.getController().animateTo(newFocus.getPoint());
            Toast.makeText(map.getContext().getApplicationContext(), newFocus.getTitle() + ": " + 
                    newFocus.getSnippet(), Toast.LENGTH_SHORT).show();

            int lastTouchedIndex = poiOverlay.getLastFocusedIndex();
            if(lastTouchedIndex>-1){
                OverlayItem tapped = poiOverlay.getItem(lastTouchedIndex);
                annot.showAnnotationView(tapped);

            }

        }           
    });

    map.getOverlays().add(poiOverlay);
    map.invalidate();

} 

} 
```

# android - 异步任务错误

> ID：12559401
> 
> 赞同：-2
> 
> 时间：2012-09-24T05:39:42.990
> 
> 标签：android, android-asynctask

我在android中工作。在我的项目中有一个JSON解析字段，我实现了AsyncTask，但我的代码中出现以下错误。谁能解决这个问题并帮助我完成我的项目。![在此处输入图像描述](../Images/03417a80889fbffbf3159dcaf01aec2b.png)

以下是我的课......

```
 import java.util.ArrayList;
    import java.util.HashMap;

    import org.json.JSONArray;
    import org.json.JSONException;
    import org.json.JSONObject;

    import android.app.ListActivity;
    import android.app.ProgressDialog;
    import android.content.Intent;
    import android.os.AsyncTask;
    import android.os.Bundle;
    import android.view.View;
    import android.widget.AdapterView;
    import android.widget.AdapterView.OnItemClickListener;
    import android.widget.ListAdapter;
    import android.widget.ListView;
    import android.widget.SimpleAdapter;

    public class MyListActivity extends ListActivity {

        // url to make request
        private static String url = "https://maps.googleapis.com/maps/api/place/textsearch/json?query=restaurants+in+Sydney&sensor=true&key=AIzaSyD38pak_katUfSR92WE2_O2b9y0JSp5htA";

        // JSON Node names
        private static final String TAG_CONTACTS = "results";
        private static final String TAG_ID = "id";
        private static final String TAG_NAME = "name";
        private static final String TAG_ADDRESS = "formatted_address";
        private static final String TAG_GENDER = "rating";

        // contacts JSONArray
        JSONArray contacts = null;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);
            setContentView(R.layout.main);
        new LoadData().execute();

        }

    class LoadData extends AsyncTask<String, String, String>
        {
        // Hashmap for ListView
            ArrayList<HashMap<String, String>> contactList = new ArrayList<HashMap<String, String>>();
        protected String doInBackground(String... args) {

            MyListActivity pl1 = new MyListActivity();
            // Creating JSON Parser instance
            JSONParser jParser = new JSONParser();

            // getting JSON string from URL
            JSONObject json = jParser.getJSONFromUrl(url);

            try {
                // Getting Array of Contacts
                contacts = json.getJSONArray(TAG_CONTACTS);

                // looping through All Contacts
                for(int i = 0; i < contacts.length(); i++){
                    JSONObject c = contacts.getJSONObject(i);

                    // Storing each json item in variable
                    String id = c.getString(TAG_ID);
                    String name = c.getString(TAG_NAME);
    //              String email = c.getString(TAG_EMAIL);
                    String formatted_address = c.getString(TAG_ADDRESS);
                    String rating = c.getString(TAG_GENDER);

                    // Phone number is agin JSON Object
    //              JSONObject phone = c.getJSONObject(TAG_PHONE);
    //              String mobile = phone.getString(TAG_PHONE_MOBILE);
    //              String home = phone.getString(TAG_PHONE_HOME);
    //              String office = phone.getString(TAG_PHONE_OFFICE);

                    // creating new HashMap
                    HashMap<String, String> map = new HashMap<String, String>();

                    // adding each child node to HashMap key => value
                    map.put(TAG_ID, id);
                    map.put(TAG_NAME, name);
                    map.put(TAG_ADDRESS, formatted_address);
                    map.put(TAG_GENDER, rating);
    //              map.put(TAG_EMAIL, email);
    //              map.put(TAG_PHONE_MOBILE, mobile);

                    // adding HashList to ArrayList
                    contactList.add(map);
                }
            } catch (JSONException e) {
                e.printStackTrace();
            }
            return null;
        }    
        protected void onPostExecute(String file_url) {
            /**
             * Updating parsed JSON data into ListView
             * */
            ListAdapter adapter = new SimpleAdapter(this, contactList,
                    R.layout.listview_item_row,
                    new String[] { TAG_NAME, TAG_ADDRESS, TAG_GENDER,}, new int[] {
                            R.id.txtTitle, R.id.txtTitle1, R.id.txtTitle3 });

            setListAdapter(adapter);

            // selecting single ListView item
            ListView lv = getListView();

            // Launching new screen on Selecting Single ListItem
            lv.setOnItemClickListener(new OnItemClickListener() {

                public void onItemClick(AdapterView<?> parent, View view,
                        int position, long id) {
                    // getting values from selected ListItem
    //              String name = ((TextView) view.findViewById(R.id.name)).getText().toString();
    //              String cost = ((TextView) view.findViewById(R.id.formatted_address)).getText().toString();
    //              String description = ((TextView) view.findViewById(R.id.mobile)).getText().toString();

                    // Starting new intent
                    Intent in = new Intent(getApplicationContext(), ProfileViewActivity.class);
    //              in.putExtra(TAG_NAME, name);
    //              in.putExtra(TAG_EMAIL, cost);
    //              in.putExtra(TAG_PHONE_MOBILE, description);
                    startActivity(in);

                }
            });

            }

    }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:44:11.323

```
ListAdapter adapter = new SimpleAdapter(this, contactList,
                R.layout.listview_item_row,
                new String[] { TAG_NAME, TAG_ADDRESS, TAG_GENDER,}, new int[] {
                        R.id.txtTitle, R.id.txtTitle1, R.id.txtTitle3 }); 
```

代替`this`

和`MyListActivity.this`

```
ListAdapter adapter = new SimpleAdapter(MyListActivity.this, contactList,
                R.layout.listview_item_row,
                new String[] { TAG_NAME, TAG_ADDRESS, TAG_GENDER,}, new int[] {
                        R.id.txtTitle, R.id.txtTitle1, R.id.txtTitle3 }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T06:03:13.273

**说明**：

`this`将提供对*LoadData* AsyncTask的*onPostExecute*函数的引用。但是你需要你的类的引用，所以用**MyListActivity.this**替换它。

 ***因此

```
ListAdapter adapter = new SimpleAdapter(MyListActivity.this, contactList,
            R.layout.listview_item_row,
            new String[] { TAG_NAME, TAG_ADDRESS, TAG_GENDER,}, new int[] {
                    R.id.txtTitle, R.id.txtTitle1, R.id.txtTitle3 }); 
```***

# android - 如何在 __turn_mmu_on 阶段后调试 Linux 内核引导过程？

> ID：12559402
> 
> 赞同：0
> 
> 时间：2012-09-24T05:39:43.743
> 
> 标签：android, linux, linux-kernel, embedded-linux, mmu

我正在尝试在自定义硬件上启动基于 Linux 内核 3.0.1 的 Android 4.0.1（冰淇淋三明治）。

我能够`__enable_mmu`使用串行端口调试 Linux Kernel 3.0.1 引导过程，直到在 head.S 中定义的函数。

但是一旦`__turn_mmu_on`执行功能，我就无法调试启动过程。

我已经浏览了 linux-arm-kernel 邮件列表档案并且我已经尝试过他们的`printascii()`工作。但是我仍然无法在`__turn_mmu_on`.

在这里，我之前可以获取日志，`__turn_mmu_on`因此我的串行控制台端口工作正常。

还有一件事——我没有 JTAG。

谁能提供打开MMU后如何调试Linux内核引导过程的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-28T14:09:31.013

很可能您有内存转换配置问题。打开 MMU 后，必须使用已映射到原始硬件地址（您之前使用的）的虚拟地址访问串行设备。

要调试您的问题，您需要确保已设置正确的虚拟地址并且内存映射配置是设备的配置。通常设备内存映射是静态完成的，因此如果您看不到源文件中的错误，您也应该能够在调用`__enable_mmu`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-27T03:29:05.517

-

你好，我不知道你的问题，但有一些想法。

在Linux源代码中，有以下几点，

/* * 启用 MMU。这完全改变了可见
* 内存空间的结构。您将无法通过此跟踪执行。
* 如果您对此有疑问，*请*在向列表发送另一篇文章之前检查 linux-arm-kernel
* 邮件列表存档。
*
* r0 = cp#15 控制寄存器
* r1 = 机器 ID
* r2 = atags 或 dtb 指针
* r9 = 处理器 ID
* r13 =完成时要跳转到的*虚拟*
地址 *
* 其他寄存器取决于完成时调用的函数
*/ 。对齐 5
.pushsection .idmap.text, "ax"
ENTRY(__turn_mmu_on)
....
....
__turn_mmu_on_end:
ENDPROC(__turn_mmu_on)
.popsection

因此，在调用 __turn_mmu_on 之后无法跟踪流程似乎很正常。

但是，根据您使用 printascii() 的结果，您是否调试过为什么它对您不可用？

你知道 printascii() 在没有任何配置的情况下是否易于使用？使用前是否有任何必要的设置？你是否为它提供了一个可运行的环境？

由于缺少 JTAG，打印可能是唯一剩下的一种方法，因此调试 printascii() 可能对您来说是必须的。

谢谢。

# asp.net-mvc-3 - 我如何在 Kendo MVC Grid 中实现这一点？

> ID：12559404
> 
> 赞同：0
> 
> 时间：2012-09-24T05:39:50.660
> 
> 标签：asp.net-mvc-3, kendo-ui

我只是在我的 MVC3 项目中使用 Kendo UI Hierarchy Grid。层次结构约为 2 级。我需要使用我自己的自定义操作链接自定义第二级层次结构以添加详细信息。

执行流程很简单。Kendo Grid 将填充默认记录。如果用户选择查看任何记录的内部详细信息，它应该显示另一个层次结构网格，其中包含用于添加新记录的操作链接。

这是我的子网格代码：

```
<script id="pordersTemplate" type="text/kendo-tmpl">

@Html.ActionLink("Create PoDetails", "Create", "PoDetails", new { id = "#=Id#" }, null)   
 // Here i need to get the current selected ID to use it on the create page.

    @(Html.Kendo().Grid<Models>()
        .Name("PoDetails_#=Id#")
        .Columns(columns =>
        {

            columns.Bound(o => o.Copies).Width(140).ClientTemplate(Html.ActionLink("\\#=Copies\\#", "Edit", "PoDetails", new { Id = "id" }, null).ToHtmlString().Replace("id", "\\#=Id\\#"));
            columns.Bound(o => o.Title).Width(150);
            columns.Bound(o => o.UnitPrice).Width(200);
            columns.Bound(o => o.Account).Width(200);
            columns.Bound(o => o.Status).Width(200);
            columns.Command(command => command.Destroy()).Width(110).Title("Action");
        })

        .DataSource(dataSource => dataSource
        .Ajax()
        .Read(read => read.Action("HierarchyBinding_PoDetails", "Porders", new { PoId = "#=Id#" }))
        .Batch(false)
        .ServerOperation(true)
        .Events(events => events.Error("error_handler"))
        .Model(model => model.Id(p => p.Id))
        .Destroy("Delete", "PoDetails")
        )
        .Pageable()
        .Sortable()
        .Groupable()
        .Filterable()
        .ToClientTemplate()
) 
```

请告诉我一些建议以将此操作链接添加到网格中。

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-04T13:05:34.343

你为什么不使用工具栏：

```
@(Html.Kendo().Grid<Models>()
    .Name("PoDetails_#=Id#")
    .Columns(columns =>
    {

        columns.Bound(o => o.Copies).Width(140).ClientTemplate(Html.ActionLink("\\#=Copies\\#", "Edit", "PoDetails", new { Id = "id" }, null).ToHtmlString().Replace("id", "\\#=Id\\#"));
        columns.Bound(o => o.Title).Width(150);
        columns.Bound(o => o.UnitPrice).Width(200);
        columns.Bound(o => o.Account).Width(200);
        columns.Bound(o => o.Status).Width(200);
        columns.Command(command => command.Destroy()).Width(110).Title("Action");
    })

    .ToolBar(t => t.Create().Text("Create PoDetails")) // <-- add here the toolbar

    .DataSource(dataSource => dataSource
        .Ajax()
        .Read(read => read.Action("HierarchyBinding_PoDetails", "Porders", new { PoId = "#=Id#" }))

        // and here map the create event with your custom action
        .Create(c => c.Action("Create", "PoDetails", new { id = "#=Id#" }))

        .Batch(false)
        .ServerOperation(true)
        .Events(events => events.Error("error_handler"))
        .Model(model => model.Id(p => p.Id))
        .Destroy("Delete", "PoDetails")
    )
    .Pageable()
    .Sortable()
    .Groupable()
    .Filterable()
    .ToClientTemplate()
) 
```

# jquery - 如何选择不是当前元素的直接祖先的元素？

> ID：12559405
> 
> 赞同：2
> 
> 时间：2012-09-24T05:39:55.323
> 
> 标签：jquery, jquery-selectors

**HTML：**

```
<div class="group">
    <div class="link"><a class="add_link" href="javascript:">add</a></div>
    <p class="values">test....</p>
    <input type="text" class="box1" value="10" />
    <input type="text" class="box2" value="20" />
    <input type="text" class="box3" value="30" />
    <input type="text" class="final" value="100" />
</div>

<div class="group">
    <div class="link"><a class="add_link" href="javascript:">add</a></div>
    <p class="values">test....</p>
    <input type="text" class="box1" value="5" />
    <input type="text" class="box2" value="10" />
    <input type="text" class="box3" value="15" />
    <input type="text" class="final" value="700" />
</div>
<div class="group">
    <div class="link"><a class="add_link" href="javascript:">add</a></div>
    <p class="values">test....</p>
    <input type="text" class="box1" value="103" />
    <input type="text" class="box2" value="230" />
    <input type="text" class="box3" value="350" />
    <input type="text" class="final" value="770" />
</div> 
```

**jQuery：**

```
$('.add_link').click(function(){

    value=$(this).parent('div').next('p').next('input.box1').next('input.box2').next('input.box3').next('input.final').val();
    alert(value);

}); 
```

**jsfiddle**：http: [//jsfiddle.net/Thn6A/](http://jsfiddle.net/Thn6A/)

当我单击类**add_link**的元素时，我想选择其组的类**最终**值。我已经为它编写了上面的代码，这似乎可行，但我想要一个更直接的选择器来定位元素。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T05:43:12.977

有很多方法，但我想说这是最简单的：

```
$('.add_link').click(function(event){
    event.preventDefault(); //Instead of href="javascript:"
    var value = $(this).closest(".group").find(".final").val();
    alert(value);
}); 
```

此外，您可以使用该`event`对象来阻止单击的默认操作，而不是将其添加到您的`href`属性中。

阅读更多：[http ://api.jquery.com/closest](http://api.jquery.com/closest)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T05:47:51.247

你可以这样做：

```
$('.add_link').click(function(){
  var value=$(this).parent().siblings('.final').val();
    alert(value);          
}); 
```

***工作演示：http:*** [//jsfiddle.net/saji89/Wcs7t/](http://jsfiddle.net/saji89/Wcs7t/)

不同方法的比较：http: [//jsperf.com/closest-find-vs-parent-siblings](http://jsperf.com/closest-find-vs-parent-siblings)

发现最快的方法是：
`var value=$(this).parent().find('.final').val();`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T05:45:49.980

试试这个

```
$('.add_link').click(function(){
        value=$(this).parent('div').siblings('input.final').val();
        alert(value);    
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T05:54:36.623

您可以使用`last-child`获取任何标签的最后一个值。

看看这个[http://jsfiddle.net/2u4SM/](http://jsfiddle.net/2u4SM/)

# c# - System.Enum 作为具有约束的泛型类型参数

> ID：12559406
> 
> 赞同：2
> 
> 时间：2012-09-24T05:40:08.337
> 
> 标签：c#, .net, generics, enums, constraints

> **可能重复：**[在 C# 中](https://stackoverflow.com/questions/1331739/enum-type-constraints-in-c-sharp)
> [创建将 T 约束为枚举枚举类型约束的通用方法](https://stackoverflow.com/questions/79126/create-generic-method-constraining-t-to-an-enum)

考虑以下类：

```
public class Transition<TState>
{
    public Transition ()
    {
        if (!typeof(TState).IsEnum)
            throw (new ArgumentException("[TState] has to be of type [System.Enum]."));
    }
} 
```

理想情况下，这应该声明为：

```
public class Transition<TState> where TState: System.Enum
{
} 
```

当然，上述内容会产生编译时错误。我的问题是为什么这被定为非法。大多数消息来源解释说这是非法的，但没有解释原因。有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T05:44:21.677

正如[Eric Lippert 所说](https://stackoverflow.com/a/1331811/1011959)，我引用

> 在有人设计、规范、实施、测试、记录和发布该功能之前，所有功能都未实现。到目前为止，没有人为此做过。没有什么特别不寻常的理由。我们还有很多其他事情要做，预算有限，而这件事从来没有超过“这不是很好吗？” 语言设计团队的讨论。”

# javascript - 使用javascript查找html页脚标签

> ID：12559414
> 
> 赞同：-1
> 
> 时间：2012-09-24T05:41:25.490
> 
> 标签：javascript, html

我在 html 文件中有一个像这样的页脚标记 `<footer data-role="footer" data-theme="b"> <h4 > My Web Site </h4> </footer>` 我想使用 javascript 隐藏这个页脚请帮帮我。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T05:44:58.877

您可以使用`document.querySelector`或`document.getElementsByTagName`。

```
document.querySelector('footer').style = 'display: none' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T05:45:48.027

您可以为此页脚分配一个 id，然后使用[document.getElementById](https://developer.mozilla.org/en-US/docs/DOM/document.getElementById)检索它并隐藏它：

```
document.getElementById('footer_id').style = 'display: none;'; 
```

作为替代方案，[`document.getElementsByTagName`](https://developer.mozilla.org/en-US/docs/DOM/document.getElementsByTagName)如果您无法修改标记，您可以使用该功能。

```
var footers = document.getElementsByTagName('footer');
footers[0].style = 'display: none;'; 
```

`<footer>`显然，如果您的标记中有多个元素，该`getElementsByTagName`函数将返回所有这些元素，您必须从数组中选择正确的元素。

# cocoa-touch - 为什么 pickerView:titleForRow:forComponent: 不是数据源协议的一部分？

> ID：12559416
> 
> 赞同：2
> 
> 时间：2012-09-24T05:41:35.773
> 
> 标签：cocoa-touch, uipickerview

使用 UIPickerView 让我有点困惑。

为什么 pickerView:titleForRow:forComponent: 不是数据源协议的一部分？这是将数据放到视图上的主要方法。但它不是数据源协议的一部分，而是委托协议的一部分。

为什么这个方法是可选的？我不必实施它，但没有它我看不到太多。但我必须实现 numberOfComponentsInPickerView: 和 numberOfRowsInComponent:。

这感觉不完整且不正确。

# php - 不使用表单或会话发送 php 值？

> ID：12559417
> 
> 赞同：1
> 
> 时间：2012-09-24T05:41:37.707
> 
> 标签：php, javascript, forms, session

有没有办法让我在不使用 FORM 或 SESSION 方法的情况下将 $_POST 值发送到另一个页面？因为表单方法已经在页面本身内部使用，但我需要将 1 个变量发送到另一个页面以进行确认。

一个简单的 php 或 javascript 会很棒！

这是价值

```
<input name="sig"  id="sig" type="text" value="<?php echo $_POST["sig"]; ?>" /> 
```

应该捕获下一页上的代码的代码

```
<?php
$pass = $_POST['password'];
$password = "service2012";  // Modify Password to suit for access, Max 10 Char.
if ( $pass != $password) {
    header("Location: https://www.login.html");
}
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T05:44:49.483

是的，通过 javascript 发送

**编辑：**

```
<script>
function sendval(){
  var d=document.getElementById("password").value;
  document.location.href='otherpage.php?password='+d;
}
</script> 
```

你的**otherpage.php**

```
<?php 
$pass = $_GET['password']; 
$password = "service2012"; // Modify Password to suit for access, Max 10 Char. 
if ( $pass != $password) { 
    header("Location: login.html";); 
} 
?> 
```

这是粗略的代码，

您可以随心所欲地调用该函数。

您也可以使用 ajax 发送变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T06:10:09.140

`GET`如果您将密码传递给其他页面，那么使用值没有意义。到目前为止，所有解决方案都是`GET`值，任何人都可以修改。它通常是不安全的，并且会创建一个[XSS 向量](https://www.owasp.org/index.php/XSS_Filter_Evasion_Cheat_Sheet)。

我想了解您为什么要将密码传递到下一页，因为通常，您设计应用程序以便用户输入密码一次，然后创建一个 SESSION 变量。

然后在需要用户登录的每个页面上检查此 SESSION。您可以使用任何流行的编程语言来了解如何创建 SESSION。对于 PHP：

```
<?php
session_start(); 
$_SESSION['page'] = 'SomePage'; // store session data
echo "Page = ". $_SESSION['page']; //retrieve data
?> 
```

理想情况下，您应该创建一个会话，然后传递此会话变量来代替传递`POST`数据。

如果您需要进一步澄清，请告诉我。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T05:45:19.030

如果您想发送一些重要数据，例如密码，我强烈建议您使用 POST 方法，如果您不想这样做，请使用

```
<form action="main.php" method="GET">
$pass = $_GET['password'];
$password = "service2012";  // Modify Password to suit for access, Max 10 Char.
if ( $pass != $password) {
    header("Location: https://www.login.html");
}//this is insecure method 
```

使用类似的链接

```
http:/website.com/main.php?data=1

//data is variable which you want to send 
```

并在 main.php

```
$data=$_GET['data'] ; 
```

您可以使用全局`$_GET`数组简单地获取数据

创建一个简单的链接`<a href="main.php?data=1">link</a>`，或者您可以使用`onclick="main.php?data=1"`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T05:46:22.033

您可以`URL`像这样编辑您的变量：

`www.server.com/abc.php?variable=value`;

在 abc.php 页面中，您将获得该值。

# sql - 如何在sql中一次执行两个存储过程

> ID：12559419
> 
> 赞同：0
> 
> 时间：2012-09-24T05:41:52.903
> 
> 标签：sql

我有两个存储过程`input_data`和`Processing_data`. 向`input_data`发送数据`Processing_data`，它会将另一个 id 发送回`input_data`。所以我需要同时运行两个存储过程？我怎样才能做到这一点？请帮我。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:10:46.220

我认为我们不需要知道数据库系统来回答这个问题。您从 input_data 过程调用 processing_data 过程，它会做一些事情然后将值返回给 input_data，对吗？

这是一个示例，但实际实现*将*取决于您使用的系统：

```
CREATE PROCEDURE input_data AS
   DECLARE @return_val INT
   EXEC  @return_val = processing_data(some_other_value)
   PRINT 'Done' 
```

# java - 为 mysql 服务设置超时，在 Windows 中使用 java 程序后无法启动/停止

> ID：12559420
> 
> 赞同：1
> 
> 时间：2012-09-24T05:41:59.233
> 
> 标签：java, mysql, windows, eclipse, service

在 Windows 中，我正在尝试编写一个 java 程序来停止 mysql 服务并更新 my.ini 文件，然后启动 mysql 服务。它可以成功运行。我可以检查使用 java 代码启动/停止的 mysql 服务的状态。如果发生任何意外情况，则指定的服务无法启动/停止，并且它也可以循环。请检查我的代码：

```
public void processStatusOfMySQLService() {

    String[] commandScript = { "cmd.exe", "/c", "sc", "query", "MySQL" };

    String STATE_PREFIX = "STATE              : ";

    Process process;

    try {

        process = new ProcessBuilder(commandScript).start();

        InputStream is = process.getInputStream();

        InputStreamReader isr = new InputStreamReader(is);

        BufferedReader br = new BufferedReader(isr);

        String line;

        while ((line = br.readLine()) != null) {

            // check that the temp string contains the status prefix

            int indexStatus = line.indexOf(STATE_PREFIX);

            if (indexStatus >= 0) {

                // compare status number to one of the states

                String stateStr = line.substring(

                        indexStatus + STATE_PREFIX.length(),

                        indexStatus + STATE_PREFIX.length() + 1);

                int state = Integer.parseInt(stateStr);

                switch (state) {

                case (1): 

                    // service stopped

                    break;

                case (4):

                    // service started

                    break;

                case (2):

                case (3):

                    // service pending

                    try {

                        Thread.sleep(1000);

                        processStatusOfMySQLService();

                    } catch (InterruptedException e) {

                        e.printStackTrace();

                    }

                }

            }

        }

        br.close();

        isr.close();

        is.close();

        process.destroy();

    } 
```

如果服务无法启动/停止，我需要在特定时间后中断循环。如何设置合适的超时值？？？

# android - 如何为警报对话框创建动画？

> ID：12559427
> 
> 赞同：0
> 
> 时间：2012-09-24T05:42:40.653
> 
> 标签：android, android-animation, customdialog

我有一个 android 应用程序，它使用自定义警报对话框来显示图像及其描述。

我想做这个对话框

1.  像在 iPhone 中一样从中心弹出。

2.  取消时向下推至中心。

我知道可以通过应用动画/样式来实现。我怎样才能为此目的制作样式？如何使用它？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2017-08-05T09:33:54.333

对话框，在 doc 中定义，是一个小窗口，提示用户做出决定或输入附加信息。对话框不会填满屏幕，通常用于需要用户采取行动才能继续的模式事件。通过它的子类（AlertDialog、ProgressDialog、AppCompatDialog、...），它们成为 Android 中的警报系统。为了让它们出现/退出时更令人兴奋，我们可以轻松地为它们设置动画。在本技巧中，我提供了一种通过样式资源来完成此技巧的方法。

[http://www.devexchanges.info/2015/10/showing-dialog-with-animation-in-android.html](http://www.devexchanges.info/2015/10/showing-dialog-with-animation-in-android.html)

# css - CSS导航绝对/固定定位问题？

> ID：12559432
> 
> 赞同：2
> 
> 时间：2012-09-24T05:43:32.407
> 
> 标签：css, positioning, css-position, absolute

我一直在自学 CSS，并决定尝试用我目前所掌握的知识制作一个网站。所以我决定做一个固定的导航栏，跟随网络浏览器的位置，我遇到了一个问题。无论出于何种原因，当我更改浏览器窗口大小时，我添加的链接之一不会停留在导航栏中。有人可以看看我的代码吗？请忽略草率，因为我只是第一次尝试。

这是我的 HTML。“secondnavlinks” div id 不会留在导航栏中：

```
<div id="nav">

<div id="secondnavlinks">
<ul>
<li><a href="#">Ambient Bookmarklet</a></li>
</ul>
</div>

<div id="class1">
<ul>
<li><a href="#">Saved</a></li>
<li><a href="#">Folders</a></li>
</ul>
</div>

<div id="header">
<img src="ambientfollowhead.gif" alt="ambientfollow" width="160" height="35" />
</div>

</div> 
```

这是CSS：

```
#nav {
position: fixed;
border: 1px solid #DDDDDD;
top:-1px;
left:109px;
width:85%;
height: 46px;
background-color: white;
z-index: !important 99;
} 
```

（跳过“class1”div）

```
#secondnavlinks ul {
position: absolute;
display: inline;
list-style-type: none;
}

#secondnavlinks ul li {
display: inline;
text-align: center;
float: left;
font-family: klavika-light;
list-style-type: none;
position: absolute;
left: 950px;
white-space: nowrap;
}

#secondnavlinks ul li > a {
text-decoration: none;
color: inherit;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:07:23.120

如果您试图制作一个跟随 Web 浏览器位置的固定导航栏，您应该使用`%`值而不是`px`值。

[**检查这个演示**](http://jsfiddle.net/libinvbabu/w69FM/)

在那个演示中，我将值更改为 %，删除了一些绝对位置等。

希望这是你正在尝试的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:09:24.713

起初，这似乎是固定元素内部的定位。稍微研究了一下，我想我找到了罪魁祸首......看起来你的问题是'left：950px;' - 这个值不会独立于浏览器，并且会改变结果/弹出具有特定宽度的元素。

Like *Libin* mentioned, you want to be looking into Fluid Layout design using relational values instead of fixed values. So when you rescale your browser everything is set correctly.

Start looking into Media Queries & the use of relational values such as % and Ems.

Here's a useful resource for converting px values to ems etc: [http://pxtoem.com/](http://pxtoem.com/)

Also if you want to go through tutorials / courses on the subject, I've included a couple of links below that have helped me in the past:

*   [http://www.codeschool.com/courses/journey-into-mobile](http://www.codeschool.com/courses/journey-into-mobile) ( Check out the free first lesson )
*   [http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-a-crash-course-in-css-media-queries/](http://net.tutsplus.com/tutorials/html-css-techniques/quick-tip-a-crash-course-in-css-media-queries/)
*   [http://www.css-tricks.com/css-media-queries/](http://www.css-tricks.com/css-media-queries/)

Also, - Here's the proof that using absolute & relative won't pop normally inside the fixed nav bar: [http://jsfiddle.net/JQT7u/2/](http://jsfiddle.net/JQT7u/2/)

Good Luck!

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T06:07:59.327

检查这个[链接](http://jsfiddle.net/venkateshwar/aeFx3/1/)

你想要这样吗？

从您的问题中不清楚设计应该如何。

顺便说一句，链接出来是因为您提供了内部 div 的`position:absolute`. 所以链接失去了与主 div 的关系`Nav`。

如果您想了解更多关于 CSS 定位工作的信息，请点击此[链接](https://developer.mozilla.org/en-US/docs/CSS/position)。

# c# - 在更改方向时，媒体停止播放并在 Metro 风格应用程序中触发媒体失败事件（Windows 8）

> ID：12559434
> 
> 赞同：0
> 
> 时间：2012-09-24T05:43:34.320
> 
> 标签：c#, windows-8, microsoft-metro

这个问题出现在 w8 windows metro 风格的应用程序中。我使用 c# 作为我的编程语言。我在页面中添加了一个媒体元素，并使用该媒体元素播放托管在我的本地主机中的媒体文件。当我改变模拟器的方向播放媒体后，我得到媒体失败事件并且媒体停止播放。

如何解决这个问题呢？这是Windows方面的错误吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T10:45:07.220

这篇博文应该回答您的问题：[Visual Studio 2012's Simulator 导致视频在方向改变时停止播放](http://blogs.msdn.com/b/mediasdkstuff/archive/2012/08/31/visual-studio-2012-s-simulator-causes-video-to-stop-playback-when-orientation-is-changed.aspx)

> 这实际上是模拟器中的一个已知问题。不幸的是，我不知道何时或是否会解决此问题。团队已经意识到了这个问题，所以我希望我们会在未来的某个时候看到修复，我只是不能说什么时候。好消息是这个问题不会影响平板/平板电脑/表面设备。

# ios - IOS-在UIViewControler中加载两个AQGridView

> ID：12559435
> 
> 赞同：1
> 
> 时间：2012-09-24T05:43:38.093
> 
> 标签：ios, aqgridview

现在我在 UIViewController 中加载了一个 AQGridView，它工作得很好，但是我想再加载一个 AQGridView，我不知道如何，有人帮助我，谢谢你阅读这篇文章

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T20:35:07.887

您只需实例化 AQGridView 的新实例并将其作为子视图添加到 UIViewController 的视图中。如果没有您提供的更多信息，很难得到比这更具体的信息。它应该看起来像这样：

```
 AQGridView *gridView = [[AQGridView alloc] initWithFrame:CGRectMake(0, 0, self.view.frame.size.width/2, self.view.frame.size.height)];
    gridView.dataSource = self;
    gridView.delegate = self;
    [self.view addSubview:gridView]; 
```

然后，您需要像第一个一样使用数据源和委托方法配置网格视图。

# java - 如何在不压缩android中的整个文件夹的情况下压缩文件夹中包含的多个文件？

> ID：12559436
> 
> 赞同：1
> 
> 时间：2012-09-24T05:43:40.047
> 
> 标签：java, android, zip

这是我的要求我有一个文件夹（比如：主文件夹），其中包含三个项目

> 一个文件夹和两个文本文件我只想压缩主文件夹中包含的这三个项目。现在我正在用主文件夹压缩内容，压缩后的文件夹名称是“temp.zip”，当我解压缩这个时，我我正在获取“主文件夹”。但我的要求是当我解压缩“temp.zip”时，它应该只显示主文件夹的内容。任何人都可以帮助我实现这一目标吗？谢谢你。

**编辑**：这是我用来压缩文件的代码 这是我压缩文件的代码

```
public void zipFolder(String srcFolder, String destZipFile)
        throws Exception {
    ZipOutputStream zip = null;
    FileOutputStream fileWriter = null;
    fileWriter = new FileOutputStream(destZipFile);
    zip = new ZipOutputStream(fileWriter);
    addFolderToZip("", srcFolder, zip);
    zip.flush();
    zip.close(); 
```

}

```
 private void addFolderToZip(String path, String srcFolder,
        ZipOutputStream zip) throws Exception {
    File folder = new File(srcFolder);
    for (String fileName : folder.list()) {
        if (path.equals("")) {
            addFileToZip(folder.getName(), srcFolder + "/" + fileName, zip);
        } else {
            addFileToZip(path + "/" + folder.getName(), srcFolder + "/"
                    + fileName, zip);

        }
    }
} 
```

private void addFileToZip(String path, String srcFile, ZipOutputStream zip) 抛出异常 {

```
 File folder = new File(srcFile);
    if (folder.isDirectory()) {
        addFolderToZip(path, srcFile, zip);
    } else {
        byte[] buf = new byte[1024];
        int len;
        FileInputStream in = new FileInputStream(srcFile);
        zip.putNextEntry(new ZipEntry(path + "/" + folder.getName()));
        while ((len = in.read(buf)) > 0) {
            zip.write(buf, 0, len);
        } 
```

}
}

**我用这些参数调用 zipfolder 方法：** zipFolder(srcfolder,destipath + "/" + "temp.zip");

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:28:35.587

在 Android 中将一组单独的文件压缩到一个 zip 中应该非常简单。这里有一个很好的教程可以帮助您入门：

[http://www.jondev.net/articles/Zipping_Files_with_Android_%28Programmatically%29](http://www.jondev.net/articles/Zipping_Files_with_Android_%28Programmatically%29)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T09:33:56.860

[我刚刚从这个帖子](https://stackoverflow.com/questions/166340/write-a-password-protected-zip-file-in-java)复制

从马特答案中引用我成功地使用了这个库。

> 您可以尝试 Zip4j，这是一个处理 zip 文件的纯 Java 库。它支持PKWare和AES加密方法的加密/解密。
> 
> [http://www.lingala.net/zip4j/](http://www.lingala.net/zip4j/)
> 
> 主要特征：
> 
> *   从 Zip 文件中创建、添加、提取、更新、删除文件
> *   读/写受密码保护的 Zip 文件
> *   支持 AES 128/256 加密
> *   支持标准 Zip 加密
> *   支持 Zip64 格式
> *   支持 Store (No Compression) 和 Deflate 压缩方式
> *   从拆分 Zip 文件中创建或提取文件（例如：z01、z02、...zip）
> *   支持 Unicode 文件名
> *   进度监视器
> 
> 执照：
> 
> *   Zip4j 在 Apache 许可证下发布，版本 2.0

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T07:38:08.447

```
try {
    String zipFile = "/locations/data.zip";
    String srcFolder = "/locations";

    File folder = new File(srcFolder);
    String[] sourceFiles = folder.list();

    //create byte buffer
    byte[] buffer = new byte[1024];

    /*
     * To create a zip file, use
     *
     * ZipOutputStream(OutputStream out) constructor of ZipOutputStream
     * class.
     */
    //create object of FileOutputStream
    FileOutputStream fout = new FileOutputStream(zipFile);

    //create object of ZipOutputStream from FileOutputStream
    ZipOutputStream zout = new ZipOutputStream(fout);

    for (int i = 0; i < sourceFiles.length; i++) {
        if (sourceFiles[i].equalsIgnoreCase("file.csv") || sourceFiles[i].equalsIgnoreCase("file1.csv")) {
            sourceFiles[i] = srcFolder + fs + sourceFiles[i];
            System.out.println("Adding " + sourceFiles[i]);
            //create object of FileInputStream for source file
            FileInputStream fin = new FileInputStream(sourceFiles[i]);

            /*
             * To begin writing ZipEntry in the zip file, use
             *
             * void putNextEntry(ZipEntry entry) method of
             * ZipOutputStream class.
             *
             * This method begins writing a new Zip entry to the zip
             * file and positions the stream to the start of the entry
             * data.
             */

            zout.putNextEntry(new ZipEntry(sourceFiles[i].substring(sourceFiles[i].lastIndexOf("/") + 1)));

            /*
             * After creating entry in the zip file, actually write the
             * file.
             */
            int length;

            while ((length = fin.read(buffer)) > 0) {
                zout.write(buffer, 0, length);
            }

            /*
             * After writing the file to ZipOutputStream, use
             *
             * void closeEntry() method of ZipOutputStream class to
             * close the current entry and position the stream to write
             * the next entry.
             */

            zout.closeEntry();

            //close the InputStream
            fin.close();

        }
    }

    //close the ZipOutputStream
    zout.close();

    System.out.println("Zip file has been created!");

} catch (IOException ioe) {
    System.out.println("IOException :" + ioe);
} 
```

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2012-09-24T06:53:20.993

在 Windows 中，您可以通过以下步骤实现此目的，

1.打开主文件夹并选择要添加到 zip 文件中的文件 2.右键单击 -> 添加到存档 3.选择存档格式为 zip 并单击“确定”

# maxima - Maxima中的展平矩阵

> ID：12559438
> 
> 赞同：3
> 
> 时间：2012-09-24T05:44:00.420
> 
> 标签：maxima

如何展平由Maxima中的其他矩阵组成的矩阵？

我的意思是，如果我将一个矩阵作为一个新矩阵中的一个元素，我将无法直接访问底层元素。外矩阵的维数没有变化！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-25T06:39:03.917

试试这个功能`mat_unblocker`。

# vb.net - 如何使用 process.start 将命令行参数传递给 .exe 文件（例如静默模式）

> ID：12559446
> 
> 赞同：1
> 
> 时间：2012-09-24T05:44:40.217
> 
> 标签：vb.net, processstartinfo, commandargument

我在这个应用程序中有一个 vb.net windows 应用程序我想在静默模式下运行另一个 exe 文件，为此我首先在命令行中运行这个 exe 文件它正在工作。但我不知道如何通过这些参数vb.coding process.start 。

通过命令行我已经通过了这样的。 **D:\myapps>sample.exe /s /v/qn** （工作正常）

但通过编码我已经通过了这样

```
 Directory.SetCurrentDirectory(Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location))
        Dim info As New System.Diagnostics.ProcessStartInfo
        info.FileName = Path.GetDirectoryName(Assembly.GetExecutingAssembly().Location) + "\sample.exe"
        info.Arguments = "/s /v/qn"
        Dim process As New System.Diagnostics.Process
        process.StartInfo = info
        process.Start()
        MessageBox.Show(info.Arguments.ToString())
        process.Close() 
```

这不起作用此代码有什么问题请帮助我..

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T07:25:46.127

```
Process.Start("D:\myapps\sample.exe", "/s /v/qn") 
```

# c# - 如何在 Active Directory 中创建管理员角色并限制我的应用程序中的页面

> ID：12559457
> 
> 赞同：0
> 
> 时间：2012-09-24T05:45:24.880
> 
> 标签：c#, asp.net, active-directory, web-config, roles

在我使用 Windows 身份验证的应用程序中，我一直在手动创建存储在 SQL 中的用户角色/成员资格（在 web.config 中启用了 System.Web.Security.SqlRoleProvider）。

```
 <add name="AspNetSqlRoleProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="connMembership" applicationName="/" /> 
```

但是现在，当我发布应用程序时，我需要更改为使用公司的 Active Directory 组

```
<add name="AspNetActiveDirectoryMembershipProvider" type="System.Web.Security.ActiveDirectoryMembershipProvider, System.Web, Version=4.0.0.0, Culture=neutral,PublicKeyToken=b03f5f7f11d50a3a" connectionStringName="ADService" attributeMapUsername="sAMAccountName"   /> 
```

和

```
 <add name="AspNetWindowsTokenRoleProvider" type="System.Web.Security.WindowsTokenRoleProvider" applicationName="/" /> 
```

我有两个问题（对不起，我对这一切真的很陌生！）

1) 现在在我的 web.config 中使用 ActiveDirectoryMembershipProvider 和 WindowsTokenRoleProvider，如何限制用户访问应用程序的不同页面？（即使用 Roles.IsUserInRole(username, "ADGroupName") 是唯一的方法吗？

2) 如何使用 Active Directory 创建“管理员”类型的角色？我问是因为之前（仍在使用 SqlRoleProvider 时）我能够为自己创建一个管理员组，以便将自己添加到可以访问所有页面/功能的 SQL 中

```
i.e Roles.AddUserToRole(userName, Admin). 
```

但现在由于我是受限 AD 组的一员，我不知道如何使用某种形式的管理员安全组来覆盖以将自己添加到其中。

非常感谢您的建议！

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-04T06:26:47.123

这是为了回答您的问题，如果有其他方法可以限制页面访问，是的，您可以从 Web.config

在 Web.Config 文件中，您可以为每个页面添加以下内容：

```
<authentication mode="Windows" />

<location path="MyPage1.aspx">
    <system.web>
      <authorization>
        <allow roles="ActiveDirectoryRoleName" />
        <allow users="DOMAIN\USER1, DOMAIN\USER2" />
        <deny users="*" />
      </authorization>
    </system.web>
</location> 
```

或者，如果您想对网站进行全局限制，则：

```
<authentication mode="Windows" />

<authorization>
    <allow roles="ActiveDirectoryRoleName" />
<allow users="DOMAIN\USER1, DOMAIN\USER2" />
    <deny users="*" />
</authorization> 
```

# android - 如何在使用数据加载列表视图之前在具有列表视图的活动中显示进度条（圆圈）

> ID：12559461
> 
> 赞同：145
> 
> 时间：2012-09-24T05:46:03.993
> 
> 标签：android, android-listview

我有一个`ListView`第二次`activity.OnItemClick`调用网络服务并尝试获取数据。之后，我将转到第三项活动，其中也有`ListView`对以前活动`ListView`项目的描述。

我想在填充之前显示一个进度对话框`ListView`。

我不明白如何做到这一点`ListView`？有人知道怎么做吗？

我的代码-

第三活动.java

```
 package com.google.iprotect;

import java.io.IOException;
import java.util.ArrayList;
import java.util.HashMap;
import java.util.Map;

import org.json.JSONArray;
import org.json.JSONException;
import org.json.JSONObject;
import org.xmlpull.v1.XmlPullParserException;

import com.google.iprotect.layout.TitleBarLayout;

import android.app.Activity;
import android.app.ListActivity;
import android.app.ProgressDialog;
import android.content.Intent;
import android.content.res.ColorStateList;
import android.content.res.XmlResourceParser;
import android.os.AsyncTask;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.view.View.OnClickListener;
import android.widget.AdapterView;
import android.widget.LinearLayout;
import android.widget.ListView;
import android.widget.ProgressBar;
import android.widget.AdapterView.OnItemClickListener;
import android.widget.TextView;

public class ThirdActivity extends ListActivity implements OnItemClickListener{

    JSONArray jArray1,jArray2;
    String one,two,three,tablename;
    String color,r;
    JSONObject responseJSON;
    TitleBarLayout titlebarLayout;
    final ArrayList<Tables> arraylist = new ArrayList<Tables>();
    TextView tableName;
    ColorStateList colorStateList1;
    String email1,password1;
    protected void onCreate(Bundle savedInstanceState) {
        // TODO Auto-generated method stub
        super.onCreate(savedInstanceState);
        setContentView(R.layout.thirdactivity);

        ListView lv=getListView();
        lv.setOnItemClickListener(this);

        tablename=getIntent().getExtras().getString("Table Name");
        email1 = getIntent().getExtras().getString("email");
        password1 =getIntent().getExtras().getString("password");

        titlebarLayout = new TitleBarLayout(ThirdActivity.this);
        titlebarLayout.setLeftButtonText("go Back");
        titlebarLayout.setRightButtonText("Logout");
        titlebarLayout.setTitle(tablename);
        titlebarLayout.setLeftButtonSize(70,40);
        titlebarLayout.setRightButtonSize(70,40);
        //titlebarLayout.setLeftButtonLeftDrawable(R.drawable.refresh);

        //titlebarLayout.setRightButtonLeftDrawable(R.drawable.buttonrefresh);
        //titlebarLayout.setLeftButtonBackgroundColor(Color.rgb(255,255,255));
        //titlebarLayout.setRightButtonBackgroundColor(Color.rgb(34,49,64));
        //titlebarLayout.setLeftButtonTextColor(Color.rgb(255,255,255));
        //titlebarLayout.setRightButtonTextColor(Color.rgb(255,255,0));     

        XmlResourceParser parser1 =getResources().getXml(R.color.colorstatelist);

        try {
            colorStateList1 = ColorStateList.createFromXml(getResources(), parser1);
            titlebarLayout.setRightButtonTextColor(colorStateList1);
        } catch (XmlPullParserException e) {    
            e.printStackTrace();
        } catch (IOException e) {

            e.printStackTrace();
        }

        OnClickListener listener = new OnClickListener() {

            public void onClick(View v) {
                // TODO Auto-generated method stub
                if (v.getId() == R.id.left_button) {
                    Intent intent = new Intent(ThirdActivity.this,SecondActivity.class);
                    intent.putExtra("email", email1);
                    intent.putExtra("password", password1);
                    startActivity(intent);
                    finish();

                } else if (v.getId() == R.id.right_button) {
                    Intent intent = new Intent(ThirdActivity.this,
                            MainActivity.class);
                    //intent.setFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);
                    intent.setFlags( Intent.FLAG_ACTIVITY_CLEAR_TASK | Intent.FLAG_ACTIVITY_NEW_TASK);
                    ThirdActivity.this.startActivity(intent);

                }
            }
        };
        titlebarLayout.setLeftButtonOnClickListener(listener);
        titlebarLayout.setRightButtonOnClickListener(listener);

        updateTableList();

    }

    private void updateTableList() {
        // TODO Auto-generated method stub
        //final ProgressDialog pd1=ProgressDialog.show(this, "Calling Webservice", "Waiting...", true, false);

        final ProgressBar pbHeaderProgress = (ProgressBar) findViewById(R.id.pbHeaderProgress);

        new AsyncTask<Void, Void, Void>() {

            protected void onPreExecute() {
                // TODO Auto-generated method stub
                super.onPreExecute();
                pbHeaderProgress.setVisibility(View.VISIBLE);
            }

            protected Void doInBackground(Void... params) {
                r = invokeWebService1(tablename);
                //pd1.dismiss();

                try {
                    responseJSON = new JSONObject(r);
                    //json reading
                    jArray1 = responseJSON.getJSONArray("FirstThree");//get JSONArray jArray1 from JSONObject with name FirstThree
                    jArray2 = responseJSON.getJSONArray("Color");//get JSONArray jArray2 from JSONOobject with name Color
                    JSONObject json_data1 = null;
                    JSONObject json_data2 = null;

                    for (int i = 0; i < jArray1.length(); i++) {
                        json_data1 = jArray1.getJSONObject(i);//get JSONObject json_data1 from JSONArray at index i;
                        one = json_data1.getString("One");//get value from JSONObject json_data1 with key "One"
                        two = json_data1.getString("Two");
                        three = json_data1.getString("Three");
                        json_data2 = jArray2.getJSONObject(i);
                        color = json_data2.getString("color");//get value from JSONObject json_data2 with key "color"

                        Tables tables = new Tables();
                        //set value to Tables Class
                        tables.column1 = one;
                        tables.column2 = two;
                        tables.column3 = three;
                        tables.tableName=tablename;
                        tables.color=color;
                        //add Tables object into ArrayList<Tables>
                        arraylist.add(tables);

                        Log.i("ONE", json_data1.getString("One"));
                        Log.i("TWO", json_data1.getString("Two"));
                        Log.i("THREE", json_data1.getString("Three"));
                        Log.i("color",""+ json_data2.getString("color"));
                    }

                } catch (JSONException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                return null;
            }

            protected void onPostExecute(Void result) {
                pbHeaderProgress.setVisibility(View.GONE);

                //Custom Adapter for ListView
                TableDetailAdapter adaptor = new TableDetailAdapter(ThirdActivity.this,
                        R.layout.table_data_list_item, arraylist);
                setListAdapter(adaptor);
            }
        }.execute();

    }

    protected String invokeWebService1(String tablename2) {
        // TODO Auto-generated method stub
        String response = "";
        try {
            WebService webService = new WebService(
            "http://sphinx-solution.com/iProtect/api.php?");

            // Pass the parameters if needed
            Map<String, String> params = new HashMap<String, String>();
            params.put("action", "getTableRecords");
            params.put("tablename", tablename2);
            params.put("email", email1);
            params.put("password", password1);

            // Get JSON response from server the "" are where the method name
            // would normally go if needed example
            response = webService.WebGet("auth", params);

        } catch (Exception e) {
            Log.d("Error: ", e.getMessage());
        }
        return response;
    }

    public void onItemClick(AdapterView<?> arg0, View arg1, int position, long arg3) {
        // TODO Auto-generated method stub

        Log.v("", "Click ListItem Number "+position);
        Intent intent = new Intent(ThirdActivity.this,FourthActivity.class);
        intent.putExtra("Json", responseJSON.toString());//sending json Object as a string to next activity
        intent.putExtra("Table Name", tablename);
        intent.putExtra("email", email1);
        intent.putExtra("password", password1);
        intent.putExtra("Item No", position);
        startActivity(intent);

    }

} 
```

第三活动.xml

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/linlaHeaderProgress"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical"
    tools:context=".ThirdActivity" >

    <include
        android:id="@+id/titlebar"
        layout="@layout/titlebar_layout" />

    <ProgressBar
        android:id="@+id/pbHeaderProgress"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center"
        android:layout_weight="2" >
    </ProgressBar>

    <ListView
        android:id="@android:id/list"
        android:layout_width="match_parent"
        android:layout_height="260dp" 
        android:layout_weight="5.04">
    </ListView>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="@dimen/titlebar_height"
        android:layout_alignParentBottom="true"
        android:background="@color/footer_bg_color"
        android:gravity="bottom"
        android:orientation="horizontal" >

        <include
            android:id="@+id/footer"
            android:layout_height="@dimen/titlebar_height"
            android:layout_gravity="bottom|center_horizontal"
            layout="@layout/footer_layout" />
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：176
> 
> 时间：2012-09-24T05:59:36.777

在加载`activity`. 在您的情况下，其中包含一个`ListView`。

*在操作栏中*

如果您使用的是`ActionBar`，您可以`ProgressBar`这样调用（这可以在您的`onCreate()`

```
requestWindowFeature(Window.FEATURE_INDETERMINATE_PROGRESS);  
setProgressBarIndeterminateVisibility(true); 
```

在您完成显示列表后，将其隐藏。

```
setProgressBarIndeterminateVisibility(false); 
```

*在布局中（XML）*

```
<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_weight="1"
    android:orientation="vertical" >

    <LinearLayout
        android:id="@+id/linlaHeaderProgress"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:orientation="vertical"
        android:visibility="gone" >

        <ProgressBar
            android:id="@+id/pbHeaderProgress"
            style="@style/Spinner"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content" >
        </ProgressBar>
    </LinearLayout>

    <ListView
        android:id="@+id/list"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:cacheColorHint="@android:color/transparent"
        android:divider="#00000000"
        android:dividerHeight="0dp"
        android:fadingEdge="none"
        android:persistentDrawingCache="scrolling"
        android:smoothScrollbar="false" >
    </ListView>
</LinearLayout> 
```

在您的活动（Java）中，我使用 AsyncTask 为我的列表获取数据。所以，在 AsyncTask 中`onPreExecute()`我使用这样的东西：

```
// CAST THE LINEARLAYOUT HOLDING THE MAIN PROGRESS (SPINNER)
LinearLayout linlaHeaderProgress = (LinearLayout) findViewById(R.id.linlaHeaderProgress);

@Override
protected void onPreExecute() {    
    // SHOW THE SPINNER WHILE LOADING FEEDS
    linlaHeaderProgress.setVisibility(View.VISIBLE);
} 
```

并且在`onPostExecute()`将适配器设置为之后`ListView`：

```
@Override
protected void onPostExecute(Void result) {     
    // SET THE ADAPTER TO THE LISTVIEW
    lv.setAdapter(adapter);

    // CHANGE THE LOADINGMORE STATUS TO PERMIT FETCHING MORE DATA
    loadingMore = false;

    // HIDE THE SPINNER AFTER LOADING FEEDS
    linlaHeaderProgress.setVisibility(View.GONE);
} 
```

编辑：这是加载几个之一时在我的应用程序中的外观`ListViews`

![在此处输入图像描述](../Images/8d6c8b0c53afcc4fa202a8421940b934.png)

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2015-02-17T12:32:22.597

你可以更容易地做到这一点。
资料来源：[http](http://www.tutorialspoint.com/android/android_loading_spinner.htm)
://www.tutorialspoint.com/android/android_loading_spinner.htm 它帮助了我。

布局：

```
<ProgressBar
   android:id="@+id/progressBar1"
   style="?android:attr/progressBarStyleLarge"
   android:layout_width="wrap_content"
   android:layout_height="wrap_content"
   android:layout_centerHorizontal="true" /> 
```

> 在 xml 中定义后，您必须通过 ProgressBar 类在 java 文件中获取它的引用。其语法如下：

```
private ProgressBar spinner;
spinner = (ProgressBar)findViewById(R.id.progressBar1); 
```

> 之后，您可以使其消失，并在需要时通过 setVisibility 方法将其带回来。其语法如下：

```
spinner.setVisibility(View.GONE);
spinner.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #3

> 赞同：21
> 
> 时间：2013-08-19T09:33:14.193

我用这个来加载列表视图可能会有所帮助。

**activity_main.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:paddingLeft="5dp"
android:paddingRight="5dp" >

<LinearLayout
    android:id="@+id/progressbar_view"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_horizontal"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:gravity="center_horizontal"
        android:orientation="horizontal" >

        <ProgressBar
            style="?android:attr/progressBarStyle"
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal" />

        <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:layout_gravity="center_vertical|center_horizontal"
            android:text="Loading data..." />
    </LinearLayout>

    <View
        android:layout_width="fill_parent"
        android:layout_height="1dp"
        android:background="#C0C0C0" />
</LinearLayout>

<ListView
    android:id="@+id/listView"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:layout_alignParentTop="true"
    android:layout_marginTop="1dip"
    android:visibility="gone" />

</RelativeLayout> 
```

我的 MainActivity 课程是，

```
public class MainActivity extends Activity {
ListView listView;
LinearLayout layout;
List<String> stringValues;
ArrayAdapter<String> adapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);
    listView = (ListView) findViewById(R.id.listView);
    layout = (LinearLayout) findViewById(R.id.progressbar_view);

    stringValues = new ArrayList<String>();

    adapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, stringValues);

    listView.setAdapter(adapter);
    new Task().execute();
}

class Task extends AsyncTask<String, Integer, Boolean> {
    @Override
    protected void onPreExecute() {
        layout.setVisibility(View.VISIBLE);
        listView.setVisibility(View.GONE);
        super.onPreExecute();
    }

    @Override
    protected void onPostExecute(Boolean result) {
        layout.setVisibility(View.GONE);
        listView.setVisibility(View.VISIBLE);
        adapter.notifyDataSetChanged();
        super.onPostExecute(result);
    }

    @Override
    protected Boolean doInBackground(String... params) {
        stringValues.add("String 1");
        stringValues.add("String 2");
        stringValues.add("String 3");
        stringValues.add("String 4");
        stringValues.add("String 5");

        try {
            Thread.sleep(3000);
        } catch (Exception e) {
            e.printStackTrace();
        }
        return null;
    }
}
} 
```

此活动显示进度 3 秒，然后它将显示列表视图，而不是将数据静态添加到 stringValues 列表，您可以在 doInBackground() 中从服务器获取数据并显示它。

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2015-09-12T08:51:06.713

请使用[tutorialspoint.com](http://www.tutorialspoint.com/android/android_progress_circle.htm)上的示例。整个实现只需要几行代码，无需更改您的 xml 文件。希望这可以帮助。

第 1 步：导入库

```
import android.app.ProgressDialog; 
```

第 2 步：声明 ProgressDialog 全局变量

```
ProgressDialog loading = null; 
```

第 3 步：启动新的 ProgressDialog 并使用以下属性（请注意，此示例仅涵盖基本的圆形加载栏，没有实时进度状态）。

```
loading = new ProgressDialog(v.getContext());
loading.setCancelable(true);
loading.setMessage(Constant.Message.AuthenticatingUser);
loading.setProgressStyle(ProgressDialog.STYLE_SPINNER); 
```

第 4 步：如果您使用的是 AsyncTasks，您可以开始在 onPreExecute 方法中显示对话框。否则，只需将代码放在按钮 onClick 事件的开头即可。

```
loading.show(); 
```

第 5 步：如果您使用的是 AsyncTasks，您可以通过将代码放在 onPostExecute 方法中来关闭进度对话框。否则，只需在关闭按钮 onClick 事件之前放置代码。

```
loading.dismiss(); 
```

使用我的 Nexus 5 android v4.0.3 对其进行了测试。祝你好运！

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2012-09-24T05:55:46.890

你在扩展 ListActivity 吗？

如果是这样，请在您的 xml 中放置一个带有以下行的循环进度对话框

```
<ProgressBar
android:id="@android:id/empty"
...other stuff...
/> 
```

现在，进度指示器将显示，直到您获得所有列表视图信息，并设置适配器。此时，它会回到listview，进度条会消失。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-09-18T18:07:08.063

```
ProgressDialog dialog = ProgressDialog.show(Example.this, "", "Loading...", true); 
```

* * *

## 回答 #7

> 赞同：2
> 
> 时间：2017-01-05T13:24:57.940

在drawable中创建一个任意名称的xml文件（比如progressBar.xml）并添加`<color name="silverGrey">#C0C0C0</color>`color.xml。

```
<?xml version="1.0" encoding="utf-8"?>
<rotate xmlns:android="http://schemas.android.com/apk/res/android"
    android:fromDegrees="0"
    android:pivotX="50%"
    android:pivotY="50%"
    android:toDegrees="720" >

    <shape
        android:innerRadiusRatio="3"
        android:shape="ring"
        android:thicknessRatio="6"
        android:useLevel="false" >
        <size
            android:height="200dip"
            android:width="300dip" />

        <gradient
            android:angle="0"
            android:endColor="@color/silverGrey"
            android:startColor="@android:color/transparent"
            android:type="sweep"
            android:useLevel="false" />

    </shape>
</rotate> 
```

现在在你有你的 listView 的 xml 文件中添加以下代码：

```
 <ListView
            android:id="@+id/list_form_statusMain"
            android:layout_width="match_parent"
            android:layout_height="wrap_content">
        </ListView>

        <ProgressBar
            android:id="@+id/progressBar"
            style="@style/CustomAlertDialogStyle"
            android:layout_width="60dp"
            android:layout_height="60dp"
            android:layout_centerInParent="true"
            android:layout_gravity="center_horizontal"
            android:indeterminate="true"
            android:indeterminateDrawable="@drawable/circularprogress"
            android:visibility="gone"
            android:layout_centerHorizontal="true"
            android:layout_centerVertical="true"/> 
```

在 AsyncTask 方法中：

```
@Override
protected void onPreExecute()
{
    progressbar_view.setVisibility(View.VISIBLE);

    // your code
} 
```

在 onPostExecute 中：

```
@Override
protected void onPostExecute(String s)
{
    progressbar_view.setVisibility(View.GONE);

    //your code
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-08-22T08:36:15.387

您可以添加`ProgressBar`到列表视图页脚：

```
private ListView listview;
private ProgressBar progressBar; 
```

...

```
progressBar = (ProgressBar) LayoutInflater.from(this).inflate(R.layout.progress_bar, null);

listview.addFooterView(progressBar); 
```

布局/progress_bar.xml

```
<?xml version="1.0" encoding="utf-8"?>
<ProgressBar xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/load_progress"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:indeterminate="true"
     /> 
```

当数据加载到适配器视图调用时：

```
 listview.removeFooterView(progressBar); 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2017-11-09T23:34:44.817

我建议您在使用 listview 或 recyclerview 时使用*SwipeRefreshLayout*。像这样

```
 <android.support.v4.widget.SwipeRefreshLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/swiperefresh"
    android:layout_width="match_parent"
    android:layout_height="match_parent">

        <android.support.v7.widget.RecyclerView
            android:id="@+id/card_recycler_view"
            android:scrollbars="vertical"
            android:layout_width="match_parent"
            android:layout_height="match_parent"/>

</android.support.v4.widget.SwipeRefreshLayout> 
```

仅包装您的视图，这将在加载数据或向下滑动屏幕时创建刷新动画，就像我们在许多应用程序中所做的那样。
以下是如何使用它的文档：
[https ://developer.android.com/training/swipe/add-swipe-in​​terface.html](https://developer.android.com/training/swipe/add-swipe-interface.html) [https://developer.android.com/training/swipe/respond-refresh-request。 html](https://developer.android.com/training/swipe/respond-refresh-request.html)

快乐编码！

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2018-08-13T03:04:43.870

在按钮 onClick 选项或您的需要中使用它。

```
final ProgressDialog progressDialog;
progressDialog = new ProgressDialog(getApplicationContext());
progressDialog.setMessage("Loading..."); // Setting Message
progressDialog.setTitle("ProgressDialog"); // Setting Title
progressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER); // Progress Dialog Style Spinner
progressDialog.show(); // Display Progress Dialog
progressDialog.setCancelable(false);
new Thread(new Runnable() {
    public void run() {
        try {
            Thread.sleep(5000);
        } catch (Exception e) {
            e.printStackTrace();
        }
        progressDialog.dismiss();
    }
}).start(); 
```

* * *

## 回答 #11

> 赞同：-1
> 
> 时间：2019-02-12T21:23:01.543

进程栏：

依赖：

```
 implementation 'com.github.castorflex.smoothprogressbar:library:1.0.0' 
```

XML:

```
 <fr.castorflex.android.smoothprogressbar.SmoothProgressBar
        xmlns:android="http://schemas.android.com/apk/res/android"                
        xmlns:app="http://schemas.android.com/apk/res-auto"
        android:id="@+id/myProcessbar"
        android:layout_width="match_parent"
        android:layout_height="10dp"
        android:indeterminate="true" /> 
```

在 Res-> 颜色

```
 <color name="pocket_color_1">#ff1635</color>
      <integer-array name="pocket_background_colors">
          <item>@color/pocket_color_1</item>
      </integer-array>

      <color name="pocket_color_stop">#00ff00</color>
      <integer-array name="pocket_background_stop">
          <item>@color/pocket_color_stop</item>
      </integer-array> 
```

在主要：

```
 public class MainActivity extends AppCompatActivity{
        SmoothProgressBar smoothProgressBar;

        @Override
        protected void onCreate(Bundle savedInstanceState) {
          super.onCreate(savedInstanceState);
          setContentView(R.layout.activity_main);
          smoothProgressBar=findViewById(R.id.myProcessbar);
          showProcessBar();
          stopAnimation();    // call when required to stop process
        }

        public void showProcessBar(){
          smoothProgressBar.setVisibility(View.VISIBLE);
          smoothProgressBar.setIndeterminateDrawable(new SmoothProgressDrawable.Builder(getApplicationContext())
            .interpolator(new AccelerateInterpolator())
            .progressiveStart(true)
            .progressiveStopSpeed(1000)
            .build());
          smoothProgressBar.setSmoothProgressDrawableBackgroundDrawable(
          SmoothProgressBarUtils.generateDrawableWithColors(
                    getResources().getIntArray(R.array.pocket_background_colors),
                    ((SmoothProgressDrawable)  smoothProgressBar.getIndeterminateDrawable()).getStrokeWidth()));
        }

        public void stopAnimation(){
          smoothProgressBar.setSmoothProgressDrawableBackgroundDrawable(
          SmoothProgressBarUtils.generateDrawableWithColors(
                    getResources().getIntArray(R.array.pocket_background_stop),
                    ((SmoothProgressDrawable)  smoothProgressBar.getIndeterminateDrawable()).getStrokeWidth()));
          smoothProgressBar.progressiveStop();
          Handler handler=new Handler();
          handler.postDelayed(new Runnable() {
            @Override
            public void run() {
               smoothProgressBar.animate().alpha(0.0f).setDuration(6000).translationY(1000);
               smoothProgressBar.setVisibility(View.GONE);
            }
          },1000);
}

      } 
```

* * *

## 回答 #12

> 赞同：-2
> 
> 时间：2016-01-20T13:14:03.150

我正在使用这个：

```
loading = ProgressDialog.show(example.this,"",null, true, true); 
```

# gwt - Google 可视化：如何在 GWT 中制作简单的条形图

> ID：12559466
> 
> 赞同：1
> 
> 时间：2012-09-24T05:46:21.730
> 
> 标签：gwt, google-visualization

我正在用谷歌可视化制作我的第一个图表，试图制作一个简单的条形图

我从这个例子中得到了这个：

```
 VerticalPanel vp = new VerticalPanel();
        Options options = Options.create();
        options.setHeight(240);
        options.setTitle("Company Performance");
        options.setWidth(400);
        options.set3D(true);

        DataTable data = DataTable.create();
        data.addColumn(ColumnType.STRING, "Year");
        data.addColumn(ColumnType.NUMBER, "Sales");
        data.addColumn(ColumnType.NUMBER, "Expenses");
        data.addRows(4);
        data.setValue(0, 0, "2004");

        VisualizationWidget<BarChart, BarChart.Options> widget = 
          BarChart.createWidget(data, options);
        BarChart viz = widget.getVisualization();
        Label status = new Label();
        viz.addSelectHandler(new SelectionDemo(viz, status));
        vp.add(status);
        vp.add(widget); 
```

这条线

```
 VisualizationWidget<BarChart, BarChart.Options> widget = 
          BarChart.createWidget(data, options); 
```

说

```
 VisualizationWidget cannot be resolved to a type 
```

编译错误：

```
 [ERROR] Line 150:  VisualizationWidget cannot be resolved to a type
  [ERROR] Line 151:  The method createWidget(DataTable, PieChart.Options) is undefined for the type BarChart
  [ERROR] Line 154:  SelectionDemo cannot be resolved to a type 
```

我无法理解这个 VisualizationWidget 是什么，如果你能指导我如何解决这个问题

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T05:55:57.080

它表明您可能忘记在项目中添加 Visualization jar 的依赖项。您可以尝试手动将依赖项添加到项目中的 .gwt.xml 文件中：

```
 <inherits name='com.google.gwt.visualization.Visualization'/> 
```

**在您的.html**文件中添加以下代码：

```
 <script type="text/javascript" src="http://www.google.com/jsapi"></script>
   <script type="text/javascript">
    google.load("visualization", "1", {'packages' : ["corechart"] });
    </script> 
```

**代码**

```
@Override
    public void onModuleLoad() {

          VerticalPanel vp = new VerticalPanel();
            final Options options = Options.create();
            options.setHeight(240);
            options.setTitle("Company Performance");
            options.setWidth(400);
            options.set3D(true);

             DataTable data = DataTable.create();
            data.addColumn(ColumnType.STRING, "Year");
            data.addColumn(ColumnType.NUMBER, "Sales");
            data.addColumn(ColumnType.NUMBER, "Expenses");
            data.addRows(4);
            data.setValue(0, 0, "2004");

            BarChart barChart=new BarChart(data, options);

            vp.add(barChart);
            RootPanel.get().add(vp);

            Runnable onLoadCallback = new Runnable() {
                public void run() {
                  Panel panel = RootPanel.get();

                  // Create a pie chart visualization.
                  BarChart pie = new BarChart(createTable(), options);
                  panel.add(pie);
                }
              };

              VisualizationUtils.loadVisualizationApi(onLoadCallback, BarChart.PACKAGE);

    }
      private AbstractDataTable createTable() {
            DataTable data = DataTable.create();
            data.addColumn(ColumnType.STRING, "Task");
            data.addColumn(ColumnType.NUMBER, "Hours per Day");
            data.addRows(2);
            data.setValue(0, 0, "Work");
            data.setValue(0, 1, 14);
            data.setValue(1, 0, "Sleep");
            data.setValue(1, 1, 10);
            return data;
          } 
```

# coffeescript - Coffeescript 中的“未定义”

> ID：12559467
> 
> 赞同：1
> 
> 时间：2012-09-24T05:46:25.113
> 
> 标签：coffeescript, undefined

```
b

if b? 
```

转换为

```
b;

if (typeof b !== "undefined" && b !== null) 
```

如果我设置`b = []`，我得到`if (b != null) {`

在哪里`undefined`？在数组中捕获未定义（在唯一之后）是个问题。

当我这样做的时候

```
a = [1,1,2,2,3,3,4,444,4,4,4]
a.unique() 
```

我可以得到这样的东西：

```
a = [1,2,3,4,444,undefined] 
```

而且我无法捕捉到这个，因为以防万一`a?[key]`- 我只检查了`!= null`

我应该做什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:17:15.820

我没有看到问题。`undefined == null`在 JavaScript 中为真，`undefined != null`为假，因此`if(b != null)`涵盖了这种`b === undefined`情况。像这样的东西：

```
a = [ undefined ]
if(a[0]?)
    console.log('if')
else
    console.log('else') 
```

将按`else`预期在控制台上生成，因此：

```
a = undefined
if(a?[0])
    console.log('if')
else
    console.log('else') 
```

# c - 指向结构指针成员的指针

> ID：12559469
> 
> 赞同：0
> 
> 时间：2012-09-24T05:46:46.047
> 
> 标签：c, struct

我有“哈希”，它是指向结构的指针。我正在尝试获取它的成员统计信息，这也是一个指针。我以为我可以这样做： hash->stats 但这似乎返回了参考统计数据结构。“->”应该只是取消引用左侧的变量吗？

```
struct statistics {
    unsigned long long count;   
   ...
};

struct hashtable {
    GHashTable * singleton; //Single Hash Table to Store Addresses
    struct statistics *stats;   //Statistics Table
};

    GHashTable *ghash = g_hash_table_new(NULL, NULL);
    struct hashtable *hash = (struct hashtable *) malloc(sizeof(struct hashtable));

//Works but why isn't hash->stats ok?
    memset(&hash->stats, 0, sizeof(struct statistics)); 
```

如果我此时尝试这个：

```
struct statistics *st = hash->stats; 
```

我得到：

```
incompatible types when initializing type 'struct statistics *' using type 'struct 
     statistics' 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T06:38:11.777

你的代码行

```
 memset(&hash->stats, 0, sizeof(struct statistics)); 
```

是完全错误的。是`hash->stats`一个指针。它的大小是 32 或 64 位。当您获取它的地址时，例如`&hash->stats`，结果是一个指向结构的地址，非常接近其末端。

调用`memset`清除指针字段本身和它之后的内存，即在结构之后。您破坏了堆中的一些内存。这将导致未定义的行为或崩溃。你应该写这样的东西：

```
 struct hashtable *hash = (struct hashtable*)malloc(sizeof(struct hashtable));
   struct statistics *stts = (struct statistics*)malloc(sizeof(struct statistics));

   hash->stats = stts;
   memset(hash->stats, 0, sizeof(struct statistics)); 
```

这将初始化您的数据。另外，当您完成数据结构时，您需要释放内存。

# java - java中的MS SQL连接

> ID：12559471
> 
> 赞同：0
> 
> 时间：2012-09-24T05:46:53.623
> 
> 标签：java, sql-server, jdbc, netbeans-7

我们如何连接到 MS SQL 2008 服务器 win jdk 1.6？

当我通过 netbeans 连接它时

```
url = jdbc:sqlserver://192.168.0.4:1434;databaseName=pollbooth 
```

或者

```
url = jdbc:sqlserver://192.168.0.4:1434/pollbooth 
```

当我已经正确配置 MS SQl 驱动程序 sqljdbc.jar 和 sqljdbc4.jar 时，它会发送

```
can't establish a connection to given url using 
com.microsoft.sqlserver.jdbc.SQLServerDriver(JRE). 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:06:47.317

以下链接将帮助您连接到 MSSQL Server 数据库。

[http://msdn.microsoft.com/en-us/library/ms378428(v=sql.90).aspx](http://msdn.microsoft.com/en-us/library/ms378428(v=sql.90).aspx)

# nginx - 如果服务返回错误，Nginx 服务跨域请求失败

> ID：12559472
> 
> 赞同：5
> 
> 时间：2012-09-24T05:46:55.193
> 
> 标签：nginx, cors

我正在我的网络应用程序中发出跨域请求。

我已经在 Nginx 上设置了 CORS 标头。一切正常，除非服务返回 404、400、500 等错误，而不是接收错误代码，服务失败并显示`Origin *********** is not allowed by Access-Control-Allow-Origin`.

任何想法为什么会发生这种情况？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-09T06:15:20.193

[在这里](https://serverfault.com/questions/431274/nginx-services-fails-for-cross-domain-requests-if-the-service-returns-error)找到答案：

不幸的是 add_header 不适用于 200、204、301、302 或 304 以外的状态码。您可以在此处的文档中找到它。

你也许可以使用这个插件来做你想做的事：

[http://wiki.nginx.org/NginxHttpHeadersMoreModule](http://wiki.nginx.org/NginxHttpHeadersMoreModule)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-24T22:13:14.280

从 nginx 的 v1.7.5 开始，您可以在 add_header 行的末尾添加“always”来解决这个问题。

# windows - Node.js：聊天的运行示例？

> ID：12559474
> 
> 赞同：0
> 
> 时间：2012-09-24T05:47:15.583
> 
> 标签：windows, apache, node.js

尝试在 Windows x64 上设置 node.js 聊天示例。

命令行：

```
D:\Websites\dev\chat>node server.js
Server at http://127.0.0.1:8001/ 
```

现在，当服务器部分运行时，尝试`http://dev/chat/index.html`

提交名称后，它给我“连接到服务器时出错”。

[http://chat.nodejs.org/](http://chat.nodejs.org/)上的相同错误消息

事情真的有效吗？=)

我是否需要设置 Apache 的 mod_proxy 来处理 /join 到端口 8001？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:41:43.650

一些问题与使用有关`http://dev/chat/index.html`，我怀疑还有：

> 我是否需要设置 Apache 的 mod_proxy 来处理 /join 到端口 8001？

Node 的[`http`模块](http://nodejs.org/api/http.html)更多地用于创建服务器，而不是用于与其他服务器（如 Apache）集成。（这是可能的，例如[iisnode](https://github.com/tjanczuk/iisnode)，但不是默认值。）

在`node server.js`运行时，您应该能够`index.html`通过以下任一方式访问：

```
http://localhost:8001/
http://127.0.0.1:8001/ 
```

然后，`/join`、`/recv`、`/send`等应该能够通过相同的原点进行路由。

否则，使用`http://dev/`有两个问题：

1.  请求将根据当前地址进行路由。例如，[`/join`](https://github.com/ry/node_chat/blob/master/client.js#L470)将 request`http://dev/join`而不是`http://127.0.0.1:8001/join`，可能会导致`404`响应。而且，即使您修改了客户端脚本以指定来源...

2.  [同源政策](http://en.wikipedia.org/wiki/Same_origin_policy)。请求的页面不能[毫无例外](http://www.w3.org/TR/cors/)`http://dev/`地发出 Ajax 请求，这个演示没有建立。`http://127.0.0.1:8001`

# assembly - NOPL 在 x86 系统中做了什么？

> ID：12559475
> 
> 赞同：41
> 
> 时间：2012-09-24T05:47:18.873
> 
> 标签：assembly, x86, nop

x86机器中NOPL的作用是什么？感觉好像什么都没做，但为什么总是在汇编代码里呢？

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2012-09-24T05:49:54.063

`NOP`是一个单字节的“无操作”操作，字面意思是“无操作”。NOPW、NOPL 等是等效的无所事事，但占用 word 和 long-sized 字节。

例如

```
NOP // 1byte opcode
NOP // 1byte opcode 
```

相当于做

```
NOPW // 2byte opcode. 
```

它们对于填充内容非常方便，因此代码序列从特定的内存边界开始，占用了几个字节的指令空间，但实际上并没有做任何事情。

NOP 对 CPU 的唯一影响是将`IP`/增加`EIP`1。NOPx 等效项将增加 2、4 等...

* * *

## 回答 #2

> 赞同：44
> 
> 时间：2012-09-24T11:23:34.737

根据[John Fremlin 的博客：AMD64 上 NOP 的操作数](http://john.freml.in/amd64-nopl)，`nopw`等`nopl`是`gas`语法，而不是 AT&T 语法。

下面是`gas`为不同`nop`的[`gas`源代码](https://sourceware.org/git/gitweb.cgi?p=binutils-gdb.git;a=blob;f=gas/config/tc-i386.c;hb=binutils-2_30#l1211)生成的指令编码，指令长度为 3 到 15 个字节。请注意，有些与英特尔推荐的`nop`形式相同（见下文），但不是全部。特别是，在long 中，以不同`nop`的形式`gas`使用多个（最多 5 个）连续`0x66`的操作数前缀`nop`，而 Intel 推荐的形式从不在任何一条推荐的指令中`nop`使用多个操作数前缀。`0x66``nop`

`nop`来自**gas** 2.30[源代码](https://sourceware.org/git/gitweb.cgi?p=binutils-gdb.git;a=blob;f=gas/config/tc-i386.c;hb=binutils-2_30#l1211)的编码（重新格式化以提高可读性）：

 **```
/* nopl (%[re]ax) */
static const unsigned char alt_3[] = {0x0f,0x1f,0x00};
/* nopl 0(%[re]ax) */
static const unsigned char alt_4[] = {0x0f,0x1f,0x40,0x00};
/* nopl 0(%[re]ax,%[re]ax,1) */
static const unsigned char alt_5[] = {0x0f,0x1f,0x44,0x00,0x00};
/* nopw 0(%[re]ax,%[re]ax,1) */
static const unsigned char alt_6[] = {0x66,0x0f,0x1f,0x44,0x00,0x00};
/* nopl 0L(%[re]ax) */
static const unsigned char alt_7[] = {0x0f,0x1f,0x80,0x00,0x00,0x00,0x00};
/* nopl 0L(%[re]ax,%[re]ax,1) */
static const unsigned char alt_8[] = {0x0f,0x1f,0x84,0x00,0x00,0x00,0x00,0x00};
/* nopw 0L(%[re]ax,%[re]ax,1) */
static const unsigned char alt_9[] =
  {0x66,0x0f,0x1f,0x84,0x00,0x00,0x00,0x00,0x00};
/* nopw %cs:0L(%[re]ax,%[re]ax,1) */
static const unsigned char alt_10[] =
  {0x66,0x2e,0x0f,0x1f,0x84,0x00,0x00,0x00,0x00,0x00};
static const unsigned char *const alt_patt[] = {
  f32_1, f32_2, alt_3, alt_4, alt_5, alt_6, alt_7, alt_8,
  alt_9, alt_10
}; 
```

英特尔使用不同的语法，并且`nop`' 可用于从 1 到 9 字节的所有指令长度。有几个不同`nop`的 '，因为所有`nop`' 都长于两个字节，都接受 1 个操作数。一字节`nop`( `0x90`) 与 同义`xchg (e)ax,(e)ax`。

[英特尔® 64 和 IA-32 架构软件开发人员手册，第 2 卷（2A、2B 和 2C）：指令集参考，AZ，第 4 章：指令集参考，MZ](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)列出`nop`了针对不同指令长度的推荐形式：

```
Table 4-12\. Recommended Multi-Byte Sequence of NOP Instruction

Length   Assembly                                   Byte Sequence
2 bytes  66 NOP                                     66 90H
3 bytes  NOP DWORD ptr [EAX]                        0F 1F 00H
4 bytes  NOP DWORD ptr [EAX + 00H]                  0F 1F 40 00H
5 bytes  NOP DWORD ptr [EAX + EAX*1 + 00H]          0F 1F 44 00 00H
6 bytes  66 NOP DWORD ptr [EAX + EAX*1 + 00H]       66 0F 1F 44 00 00H
7 bytes  NOP DWORD ptr [EAX + 00000000H]            0F 1F 80 00 00 00 00H
8 bytes  NOP DWORD ptr [EAX + EAX*1 + 00000000H]    0F 1F 84 00 00 00 00 00H
9 bytes  66 NOP DWORD ptr [EAX + EAX*1 + 00000000H] 66 0F 1F 84 00 00 00 00 00H 
```

所以除了`nop`英特尔推荐的这些，还有很多其他`nop`的。正如 Marc B 在他的回答中提到的那样，除了将指令与特定的内存边界对齐之外，`nop`'s 在自修改代码、调试和逆向工程中也非常有用。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-10-13T05:08:38.507

实际上，在需要修补代码时，汇编代码中会使用 NOP。

因为新指令的大小可能与旧指令的大小不同，所以需要填充。

填充指令的作用应该与 NOP 相同，尽管它可能占用几个字节。

我们插入更复杂的指令（如 66 90）而不是几个 NOP 的原因是，一条指令通常比几个 NOP 执行得更快。**

# jquery - 在查找之前更改搜索框中文本框的值

> ID：12559476
> 
> 赞同：1
> 
> 时间：2012-09-24T05:47:21.897
> 
> 标签：jquery, jqgrid, jqgrid-php

我正在尝试在 jgrid 中实现复杂的搜索功能。但我想在用户按下查找按钮之前更改用户在搜索框中指定的值。

![在此处输入图像描述](../Images/207d81db32c26f78d17eb5b6a9358fc5.png)

1.  在这里你可以看到值`17 20 35 36 37 53 54`，我希望这些值用逗号分隔，所以在我点击 find 之前，我想更改文本框中的值，所以谁能告诉我我该怎么做？

2.  此外，我想知道如何自定义此搜索框的外观，而不是`id`，`is in`我想要一些用户友好的 UI，用户可以在其中简单地输入值并点击查找，但我不知道如何更改此搜索的外观框注入我们自己的外观并使搜索框不可拖动

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:48:26.070

您可以使用逗号`split()`将其拆分为空格上的数组，然后`.join()`再次使用逗号作为分隔符（无论如何默认）。

```
$("input[type='text']").blur(function(){
  var value = this.value;
  this.value = value.split(' ').join(',');
}); 
```

演示：http: [//jsfiddle.net/mJaqm/](http://jsfiddle.net/mJaqm/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T11:03:34.837

我建议您阅读[答案](https://stackoverflow.com/a/8953934/315935)，其中我展示了如何根据需要实现更复杂的用户输入更改。

在搜索对话框的情况下，您可以像使用工具[栏搜索](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:toolbar_searching)一样使用[onSearch](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:singe_searching#options)回调。`beforeSearch`

主要思想是可以在方法`postData`方面获得jqGrid的内部参数的参考`getGridParam`。的`filters`属性`postData`表示过滤器序列化为 JSON 字符串（有关详细信息，请参阅[文档](http://www.trirand.com/jqgridwiki/doku.php?id=wiki:advanced_searching#options)）。因此，您可以根据需要转换`postData.filters`为对象（使用`$.parseJSON`）修改，转换回 JSON 字符串（使用 JSON.stringify）并将结果放回`postData.filters`. 如果您在内部进行所有更改`onSearch`或`beforeSearch`回调，则将使用修改后的过滤器。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T05:50:09.623

您可以将其添加到`onBlur`文本框的事件中，该事件在光标被移开时触发：

```
$("#theid").blur(function() {
    value = value.split(' ').join(',');
}); 
```

# security - 使用 IPsec 确保对等方之间的流量始终加密

> ID：12559480
> 
> 赞同：2
> 
> 时间：2012-09-24T05:47:42.147
> 
> 标签：security, centos, vpn, ipsec

我在 CentOS 6 中使用 openswan (opens/wan) 在两对之间实现了 IPsec 连接。这运行良好，我可以看到流量已加密。但是，如果由于某种原因 IPsec 隧道不再存在（可能有人将其关闭，可能它崩溃等），流量仍将作为未加密流量在对等方之间流动。

如何确保始终使用 IPsec 加密发送这两个对等方之间的流量，或者不接受对等方之间的流量。

iptables 似乎没有帮助，因为数据包经过 iptables 规则两次，一次加密一次，一次未加密。

提前致谢。

# android - 下载的图片无法显示

> ID：12559481
> 
> 赞同：0
> 
> 时间：2012-09-24T05:47:47.030
> 
> 标签：android, image, url

我以前致力于从 sd 卡中获取图像，并在列表视图中显示它，该图像使用：

```
imgView.setImageURI(Uri.parse(ImagePath)); 
```

现在，我正在尝试使用以下几行显示来自 URL 的图像，但图像未显示在列表视图中，以下是使用的行：

```
imgView.setImageBitmap(getBitmapFromURL(ImagePath)); 
```

其中，getBitmapFromURL 是：

```
public static Bitmap getBitmapFromURL(String src) {
        try {
            URL url = new URL(src);
            HttpURLConnection connection = (HttpURLConnection) url.openConnection();
            connection.setDoInput(true);
            connection.connect();
            InputStream input = connection.getInputStream();
            Bitmap myBitmap = BitmapFactory.decodeStream(input);
            return myBitmap;
            }
        catch (IOException e) {
            e.printStackTrace();
            return null;
        }
    } 
```

没有显示异常，只是没有显示图像。

急需解决方案......

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T05:57:29.057

这是一个同步加载。（我个人不会使用这个原因，如果要加载的图像太多，应用程序有点滞后）..

```
URL url = new URL(//your URL);
Bitmap bmp = BitmapFactory.decodeStream(url.openConnection().getInputStream());
imageView.setImageBitmap(bmp);//your imageview 
```

如果我是你，我会学习 Async 或惰性适配器。

**编辑** 我忘记了我从哪里得到这些代码（感谢您提供了一位出色的代码作者）

这里是

```
 public Bitmap getBitmap(String bitmapUrl) {
      try {
        URL url = new URL(bitmapUrl);
        return BitmapFactory.decodeStream(url.openConnection().getInputStream()); 
      }
      catch(Exception ex) {return null;}
    }

    public enum BitmapManager {
    INSTANCE;

    private final Map<String, SoftReference<Bitmap>> cache;
    private final ExecutorService pool;
    private Map<ImageView, String> imageViews = Collections
            .synchronizedMap(new WeakHashMap<ImageView, String>());
    private Bitmap placeholder;

    BitmapManager() {
        cache = new HashMap<String, SoftReference<Bitmap>>();
        pool = Executors.newFixedThreadPool(5);
    }

    public void setPlaceholder(Bitmap bmp) {
        placeholder = bmp;
    }

    public Bitmap getBitmapFromCache(String url) {
        if (cache.containsKey(url)) {
            return cache.get(url).get();
        }

        return null;
    }

    public void queueJob(final String url, final ImageView imageView,
            final int width, final int height) {
        /* Create handler in UI thread. */
        final Handler handler = new Handler() {
            @Override
            public void handleMessage(Message msg) {
                String tag = imageViews.get(imageView);
                if (tag != null && tag.equals(url)) {
                    if (msg.obj != null) {
                        imageView.setImageBitmap((Bitmap) msg.obj);
                    } else {
                        imageView.setImageBitmap(placeholder);
                        Log.d(null, "fail " + url);
                    }
                }
            }
        };

        pool.submit(new Runnable() {

            public void run() {
                final Bitmap bmp = downloadBitmap(url, width, height);
                Message message = Message.obtain();
                message.obj = bmp;
                Log.d(null, "Item downloaded: " + url);

                handler.sendMessage(message);
            }
        });
    }

    public void loadBitmap(final String url, final ImageView imageView,
            final int width, final int height) {
        imageViews.put(imageView, url);
        Bitmap bitmap = getBitmapFromCache(url);

        // check in UI thread, so no concurrency issues
        if (bitmap != null) {
            Log.i("inh","Item loaded from cache: " + url);
            imageView.setImageBitmap(bitmap);
        } else {
            imageView.setImageBitmap(placeholder);
            queueJob(url, imageView, width, height);
        }
    }

    private Bitmap downloadBitmap(String url, int width, int height) {
        try {
            Bitmap bitmap = BitmapFactory.decodeStream((InputStream) new URL(
                    url).getContent());

            bitmap = Bitmap.createScaledBitmap(bitmap, width, height, true);
            Log.i("nandi2 ako", ""+bitmap);
            cache.put(url, new SoftReference<Bitmap>(bitmap));
            return bitmap;
        } catch (MalformedURLException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        return null;
    } 
```

}

现在调用它

```
String fbAvatarUrl = "//Your URL";

    BitmapManager.INSTANCE.loadBitmap(fbAvatarUrl, //Your ImageView, 60,60);
            //60 60 is my desired height and width 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:01:22.433

我以前遇到过这种问题，你可以参考[这个线程](https://stackoverflow.com/questions/5940487/bitmapfactory-decodestreaminputstream-is-returns-null-for-non-null-inputstream)，如果没有运气，试试我的代码，

```
 public static Bitmap loadImageFromUrl(String url) {
        URL m;
        InputStream i = null;
        BufferedInputStream bis = null;
        ByteArrayOutputStream out =null;
        try {
            m = new URL(url);
            i = (InputStream) m.getContent();
            bis = new BufferedInputStream(i,1024 * 8);
            out = new ByteArrayOutputStream();
            int len=0;
            byte[] buffer = new byte[1024];
            while((len = bis.read(buffer)) != -1){
                out.write(buffer, 0, len);
            }
            out.close();
            bis.close();
        } catch (MalformedURLException e1) {
            e1.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }
        byte[] data = out.toByteArray();    
        Bitmap bitmap = BitmapFactory.decodeByteArray(data, 0, data.length);        
        return bitmap;
    } 
```

# c# - 如何将 textvalue 和 value 属性赋予组合框？

> ID：12559490
> 
> 赞同：0
> 
> 时间：2012-09-24T05:48:11.463
> 
> 标签：c#, winforms, combobox

我在 Windows 应用程序中有一个表单，如下图所示：

![我的窗口来自](../Images/e00df328b71c512fb3d1dc1d358c4743.png)

我尝试使用此代码在“Designer.cs”的组合框中显示文本：

```
this.cmbLanguage.FormattingEnabled = true;
this.cmbLanguage.Items.AddRange(new object[] {
    Language.LSelectLang.LANGUAGE_ENGLISH,               //"English",
    "Chinese_TC",
    "Chinese_SC",
    Language.LSelectLang.LANGUAGE_GERMAN,                //"German",
    Language.LSelectLang.LANGUAGE_FRENCH,                //"French",
    Language.LSelectLang.LANGUAGE_JAPANESE,              //"Japanese",
    Language.LSelectLang.LANGUAGE_SPANISH,               //"Spanish",
    Language.LSelectLang.LANGUAGE_HINDI});               //"Hindi"}); 
```

没关系，但我还想传递一个值类型来访问组合框中的特定文本显示。

那么，如何在我的组合框中传递它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:07:34.510

不幸的是，Win Form 并没有`ListItem`像 Web 那样定义，但是你可以定义自己的类，然后重写`ToString`方法：

```
public class YourItem<T>
{
    public string Text { get; set; }
    public T Value { get; set; }

    public override string ToString()
    {
        return Text;
    }
} 
```

然后你可以使用：

```
var item = new YourItem<string>() { 
             Text = "text", 
             Value = "value" 
       };

cmbLanguage.Items.Add(item); 
```

访问值：

```
 var selectedItem = (YourItem<string>) cmbLanguage.SelectedItem;
    var value = selectedItem.Value; 
```

# objective-c - 当应用程序在主 window.xib 上运行时如何使用新的 nib 文件加载应用程序

> ID：12559491
> 
> 赞同：0
> 
> 时间：2012-09-24T05:48:12.010
> 
> 标签：objective-c, ios, xcode, ipad, xib

我有一个示例应用程序，其中有委托方法、主控制器和 mainwindow.xib。当我的应用程序被加载时，它直接加载到 mainwindow.xib 上。但我想做一些改变，比如添加按钮和其他 UI 东西。但我没有笔尖文件。所以我添加了名为 Newview.xib 的新 nib 文件名。那么如何加载这个 nib 文件呢？

所以我的要求是如何在启动时加载这个 nib 文件，我必须在 appdelegate 方法中进行哪些更改。正在运行的当前代码如下

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions {  

    mainController = [[MainController alloc] init];

    [window addSubview:mainController.view];
    [window makeKeyAndVisible];

    return YES;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:13:04.477

goto `MainWindow.xib`，转到其*属性检查*器 -> 视图控制器将 nib 名称更改为 Newview。！！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T06:10:25.820

如果您想使用自定义 Newview.xib 作为窗口，您可以在项目的 info.plist 文件中指定它。将“Main nib file base name”（NSMainNibFile）值更改为“Newview”。

# ios - iOS-Hierarchy-Viewer 构建失败：链接器命令失败，退出代码为 1

> ID：12559497
> 
> 赞同：1
> 
> 时间：2012-09-24T05:49:01.153
> 
> 标签：ios, linker, command, hierarchy, viewer

我找到了一个名为“ [iOS-Hierarchy-Viewer](https://github.com/glock45/iOS-Hierarchy-Viewer) ”的项目，可以检查 ios 原生视图。所以我创建了一个名为“ViewViewer”的项目，并作为“安装”的解决方法只是 README.md 描述。但是，当我构建它时，它失败了。

错误：

```
Ld /Users/hundsun/Library/Developer/Xcode/DerivedData/iphone-gsuyenresnoeexcuqguzciigntxr/Build/Products/Debug-iphonesimulator/ViewViewer.app/ViewViewer normal i386
cd /Users/hundsun/Documents/projects/ViewViewer
setenv MACOSX_DEPLOYMENT_TARGET 10.6
......
Undefined symbols for architecture i386:
  "_OBJC_CLASS_$_NSAttributeDescription", referenced from:
      objc-class-ref in libiOSHierarchyViewer_fat.a(HVCoreDataHandler.o)
  "_OBJC_CLASS_$_NSRelationshipDescription", referenced from:
      objc-class-ref in libiOSHierarchyViewer_fat.a(HVCoreDataHandler.o)
  "_OBJC_CLASS_$_NSFetchRequest", referenced from:
      objc-class-ref in libiOSHierarchyViewer_fat.a(HVCoreDataHandler.o)
  "_OBJC_CLASS_$_NSEntityDescription", referenced from:
      objc-class-ref in libiOSHierarchyViewer_fat.a(HVCoreDataHandler.o)
ld: symbol(s) not found for architecture i386
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

对不起，我对 ios、object-C、C 和 xcode 的了解很少。感谢您告诉我如何逐步解决问题。谢谢你的详细回答！！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T13:29:14.350

请将 CoreData.framework 添加到框架部分。

# ruby - 如何让 Thin 在不同的端口上运行？

> ID：12559500
> 
> 赞同：7
> 
> 时间：2012-09-24T05:49:16.070
> 
> 标签：ruby, linux, sinatra, thin

我有一个非常基本的测试应用程序。当我执行此命令时，服务器会忽略我指定的端口并在端口 4567 上运行 Thin。为什么我指定的端口会被忽略？

```
$ruby xxx.rb start -p 8000

== Sinatra/1.3.3 has taken the stage on 4567 for production with backup from Thin
>> Thin web server (v1.4.1 codename Chromeo)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:4567, CTRL+C to stop 
```

xxx.rb 文件

```
require 'Thin'

rackup_file = "config.ru" 

argv = ARGV
argv << ["-R", rackup_file ] unless ARGV.include?("-R")
argv << ["-e", "production"] unless ARGV.include?("-e")

puts argv.flatten

Thin::Runner.new(argv.flatten).run! 
```

config.ru 文件

```
require 'sinatra'
require 'sinatra/base'

class SingingRain < Sinatra::Base
    get '/' do
        return 'hello'
    end
end

SingingRain.run! 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-09-24T03:01:41.890

```
#\ -p 8000 
```

把它放在 config.ru 的顶部

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-25T11:21:12.523

您的问题出在以下行：

```
SingingRain.run! 
```

这是 Sinatra 的[`run`方法](https://github.com/sinatra/sinatra/blob/v1.3.3/lib/sinatra/base.rb#L1343-1345)，它告诉 Sinatra 启动自己的 Web 服务器，默认情况下在 4567 端口上运行。这在您的`config.ru`文件中，但`config.ru`只是 Ruby，因此该行就像在任何其他`.rb`文件中一样运行。这就是您看到 Sinatra 在该端口上启动的原因。

当您使用 CTRL-C 停止此服务器时，Thin 将尝试继续加载`config.ru`文件以确定要运行的应用程序。您实际上并未在 中指定应用程序`config.ru`，因此您会看到如下内容：

```
^C>> Stopping ...

== Sinatra has ended his set (crowd applauds)
/Users/matt/.rvm/gems/ruby-1.9.3-p194/gems/rack-1.4.1/lib/rack/builder.rb:129:in `to_app': missing run or map statement (RuntimeError)
        from config.ru:1:in `<main>'
        ... 
```

此错误只是告诉您您实际上并未指定要在配置文件中运行的应用程序。

代替`SingingRain.run!`, 使用：

```
run SingingRain 
```

`run`是一个 Rack 方法，用于指定要运行的应用程序。您也可以这样做`run SingingRain.new`——Sinatra 采取措施使您能够在此处仅使用类本身或实例。

现在的输出应该是：

```
>> Thin web server (v1.4.1 codename Chromeo)
>> Maximum connections set to 1024
>> Listening on 0.0.0.0:8000, CTRL+C to stop 
```

您没有收到`== Sinatra/1.3.2 has taken the stage on 4567 for production with backup from Thin`消息，因为 Sinatra 没有运行其内置服务器，它只是您配置的瘦服务器。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-09-24T06:14:10.310

在你的 config.ru 添加

> 设置：端口=> 8000

另外我强烈建议将 Sinatra 与乘客 + nginx 之类的东西一起使用，这使得部署到生产环境变得轻而易举。但是，如果您要部署到 heroku，则不必担心这一点。

# objective-c - 当手机被锁定并打开应用程序时，iOS 6 本地通知失败

> ID：12559510
> 
> 赞同：1
> 
> 时间：2012-09-24T05:50:03.040
> 
> 标签：objective-c, ios, ios5, notifications, ios6

我有一个具有基本警报功能的应用程序。在我的 applicationWillResignActive: 方法中，我将其设置为创建通知以触发警报。这非常有效，我相信这是正确的方法（如果您认为有更好的方法，请告诉我）。

仅在特定情况下，仅在 iOS 6 上，当应用程序未“退出”（从未按下主页按钮）但用户只是锁定手机或手机自动锁定时，通知不会关闭。

我已经跟踪了代码，并且确实正在创建通知，并且它在 iOS 5 中运行良好。

这是我的代码：

```
- (void)applicationWillResignActive:(UIApplication *)application
{
    [UIApplication sharedApplication].idleTimerDisabled = NO;

    [alarm setupForBackground];
    if ([alarm isRunning]) {
        [alarm stop];
    }
} 
```

这是通知创建方法：

```
- (void)setupForBackground
{
    UILocalNotification* alarmNotification = [[UILocalNotification alloc] init];
    if (alarmNotification) {
        alarmNotification.fireDate = alarmDate;
        alarmNotification.timeZone = [NSTimeZone defaultTimeZone];
        alarmNotification.repeatInterval = 0;
        alarmNotification.soundName = @"NotificationSound.aif";
        [[UIApplication sharedApplication] scheduleLocalNotification:alarmNotification];
    }
} 
```

我一直在寻找答案，但找不到任何关于通知更改的说明。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T21:38:49.277

我有一个半解决方案。显然，如果您将 AlertBody 添加到通知中，则它可以工作。

我认为这是 iOS 6 中的一个错误。正如我提到的它在 iOS 5 中有效，文档没有提到有这样的要求，如果应用程序退出（主页按钮是按下）。

仍然很想知道我的理解是否正确以及是否应该向 Apple 提交错误报告。

有人想吗？

# asp.net-mvc - jQuery Ajax 调用控制器

> ID：12559515
> 
> 赞同：5
> 
> 时间：2012-09-24T05:50:17.220
> 
> 标签：asp.net-mvc, jquery

我是 Ajax 的新手，如果在下拉列表中选择了某些项目，我会尝试禁用复选框。我需要将 mlaId 传递给 RecipientsController.cs 中的 GetMlaDeliveryType(int Id) 方法。

我不确定如何在 javascript 函数 checkMlaDeliveryType(mlaId) 中设置 ajax 调用。

```
 //  MLA Add  disable express checkbox if delivery type is electronic
        $('.AddSelectedMla').change(function () {

            var deliveryType = checkMlaDeliveryType($('.AddSelectedMla').val());

            // disable express option if delivery type is Electronic
            if (deliveryType == "Mail") {
                $(".mlaExpressIndicator").removeAttr("disabled");
            }else{
                $(".mlaExpressIndicator").attr('checked', false).attr("disabled", true);
            }

        })

        // ajax call to get delivery type - "Mail" or "Electronic"
        function checkMlaDeliveryType(mlaId)
        {
            $.ajax({
                type: "GET",
                url: "/Recipients/GetMlaDeliveryType/" ,
                data: mlaId,
                dataType: ,
                success: 
            });

        }

RecipientsController.cs

    public string GetMlaDeliveryType(int Id) 
    {
        var recipientOrchestrator = new RecipientsOrchestrator();

        // Returns string "Electronic" or "Mail"
        return recipientOrchestrator.GetMlaDeliveryTypeById(Id);
    } 
```

编辑：

这是最终的 javascript 看起来如何工作

```
//  MLA Add  disable express checkbox if delivery type is electronic
$('.AddSelectedMla').change(function () {

    checkMlaDeliveryType($('.AddSelectedMla').val());
})

// ajax call to get delivery type - "Mail" or "Electronic"
function checkMlaDeliveryType(mlaId)
{
    $.ajax({
        type: 'GET',
        url: '@Url.Action("GetMlaDeliveryType", "Recipients")',
        data: { id: mlaId },
        cache: false,
        success: function (result) {
            // disable express option if delivery type is Electronic
            if (result == "Mail") {
                $(".mlaExpressIndicator").removeAttr("disabled");
            } else {
                $(".mlaExpressIndicator").attr('checked', false).attr("disabled", true);
            }
        }
    });

} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T05:53:10.477

```
$.ajax({
    type: 'GET',
    url: '/Recipients/GetMlaDeliveryType',
    data: { id: mlaId },
    cache: false,
    success: function(result) {

    }
}); 
```

然后修复您的控制器操作，使其返回 ActionResult，而不是字符串。JSON 适合您的情况：

```
public string GetMlaDeliveryType(int Id) 
{
    var recipientOrchestrator = new RecipientsOrchestrator();

    // Returns string "Electronic" or "Mail"
    return Json(
        recipientOrchestrator.GetMlaDeliveryTypeById(Id), 
        JsonRequestBehavior.AllowGet
    );
} 
```

现在，您的成功回调将直接传递给您的模型的 javascript 实例。您无需指定任何`dataType`参数：

```
success: function(result) {
    // TODO: use the result here to do whatever you need to do
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T05:53:09.133

在 Ajax 调用中设置`data`，使其键与控制器上的参数匹配（即`Id`）：

```
data: { Id: mlaId }, 
```

另请注意，使用`@Url.Action(actionName, controllerName)`获取操作 URL 是一种更好的做法：

```
url: '@Url.Action("GetMlaDeliveryType", "Recipients")' 
```

# git - 如何将 hg repo 镜像到 git repo？

> ID：12559517
> 
> 赞同：1
> 
> 时间：2012-09-24T05:50:23.663
> 
> 标签：git, version-control, mercurial, dvcs

这个问题有点类似于[Is there a tool similar to repo or git-repo for hg/Mercurial?](https://stackoverflow.com/questions/8138710/is-there-a-tool-similar-to-repo-or-git-repo-for-hg-mercurial) ，不同之处在于我的重点是如何将该 hg repo 镜像到 git repo？

有没有像 git hg clone 这样的命令？

我想使用 git 来管理我的代码，但是一些开源代码只是托管在 hg 上，那么如何将它们镜像到 git repo？

顺便说一句，我可以将 hg repo 推送到多个 hg repos 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:59:02.137

[以懒惰的方式](http://geekswithblogs.net/gregorymalcolm/archive/2012/03/17/mirroring-mercurial-and-git-changes-the-lazy-way.aspx)[镜像](http://hg-git.github.com/)git 和 mercurial repos

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T08:00:15.260

1使用 hg-git[从 hg 镜像到 git](https://stackoverflow.com/a/12557927/960558)（并返回）

2 是的，您可以在本地仓库的 [path] 部分中拥有任意数量的任何（支持）类型的远程仓库，并通过一组连续推送或在帮助下将推送组合到新命令中推送到所有和任何这些仓库别名

# objective-c - 一次性释放实例资源？

> ID：12559518
> 
> 赞同：0
> 
> 时间：2012-09-24T05:50:28.720
> 
> 标签：objective-c, grand-central-dispatch

我需要在一种`-invalidate`方法中保护一些代码以使串行队列无效，以便这些代码运行一次，就像`dispatch_once`在单例范式中一样。

我的直觉是：

```
@property(nonatomic, readonly, getter=isValid) BOOL valid;
@property(nonatomic) dispatch_queue_t serialQueue;
...
- (void)invalidate {
    if ([self isValid]){
        dispatch_sync(self.serialQueue, ^{
            if ([self isValid]) {
                _valid = NO;
                // relinquish resources here
            }
        });
        if (self.serialQueue) {
            dispatch_release (self.serialQueue);
        }
    }
} 
```

此`-invalidate`方法将被显式调用或由`-dealloc`. 而且我想确保资源将被放弃一次且仅一次。

这个实现是线程安全的吗？

`dispatch_once`以每个实例的方式实现块是更好的方法吗？

```
@property(nonatomic, readonly) dispatch_once_t invalidated;
...
- (void)invalidate {
    dispatch_once(&_invalidated, ^{
        dispatch_sync(logQueue, ^{
            // double check
            if (self.isValid) {
                self.valid = NO;
                // relinquish things
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T08:43:57.140

如果`invalidate`不需要是线程安全的，你可以这样做

```
- (void)invalidate {
    if ([self isValid]) {
        _valid = NO;
        // relinquish resources here
    }
} 
```

因为设置`_valid = NO`已经保证该函数只被调用一次。

如果必须以线程安全的方式进行失效，事情会变得更复杂一些。你可以使用`dispatch_once`. 缺点是这真的只工作一次。因此，如果您稍后再次验证您的对象，则失效将不再起作用。

或者，您可以使用其中一种[同步](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/Multithreading/ThreadSafety/ThreadSafety.html)方法，例如`@synchronized`：

```
- (void)invalidate {
    @synchronized(self) {
        if ([self isValid]) {
            _valid = NO;
            // relinquish resources here
        }
    }
} 
```

# php - 加入表后得到错误的值 - MySQL - PHP

> ID：12559520
> 
> 赞同：0
> 
> 时间：2012-09-24T05:50:36.670
> 
> 标签：php, mysql, sql, join

我必须使用 4 个表生成报告，我尝试了很多连接，但我得到了错误的值:(

希望有人能帮助我。

员工分配表：

```
----------------------------
| Tid | StaffId | Planned  |
----------------------------
| 123 |   2     | 10:00:00 |
| 123 |   4     | 05:00:00 |
| 124 |   2     | 09:00:00 |
---------------------------- 
```

实际工作量表：

```
--------------------------------------------
| Tid | StaffId | ActualEffort  | logdate  |
--------------------------------------------
| 123 |   2     | 05:00:00      |2012-09-01|
| 123 |   4     | 05:00:00      |2012-09-01|
| 123 |   2     | 06:00:00      |2012-09-03|
| 124 |   2     | 09:00:00      |2012-09-04|
-------------------------------------------- 
```

项目清单表：

```
-------------------
| ProjectId | Tid |
-------------------
|    1      | 123 |
|    2      | 124 |
------------------- 
```

项目名称表：

```
-------------------
| Id  | name      |
-------------------
| 1   | project1  |
| 2   | project2  |
------------------- 
```

以下是我正在使用的查询：

```
SELECT P.id AS projectid,P.name,
SEC_TO_TIME(SUM(TIME_TO_SEC(A.planned)))planned,SEC_TO_TIME(SUM(TIME_TO_SEC(E.actualeffort)))actual FROM actualeffort E 
INNER JOIN staffassign A ON A.tid = E.tid
INNER JOIN projectlist L ON L.tid = A.tid
INNER JOIN projectname P ON P.id = L.projectid 
WHERE E.logdate BETWEEN FROM_UNIXTIME('1346475600') AND FROM_UNIXTIME('1348290000')
GROUP BY P.id 
```

我得到这个：

```
---------------------------------------------
| projectid | name     | planned | actual   |
---------------------------------------------
|     1     | project1 | 15:00:00| 12:00:00 |
|     2     | project2 | 09:00:00| 09:00:00 |
--------------------------------------------- 
```

但它应该是这样的：

```
---------------------------------------------
| projectid | name     | planned | actual   |
---------------------------------------------
|     1     | project1 | 15:00:00| 16:00:00 |
|     2     | project2 | 09:00:00| 09:00:00 |
--------------------------------------------- 
```

我很困惑，我不知道我在哪里加入了错误。

有人请帮助我，我对此感到震惊。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:31:52.907

WHERE 过滤器可能是错误的。请注意，条件中的第一个日期时间从“08:00:00”开始 -

```
SELECT FROM_UNIXTIME('1346475600') dt1, FROM_UNIXTIME('1348290000') dt2;
+---------------------+---------------------+
| dt1                 | dt2                 |
+---------------------+---------------------+
| 2012-09-01 08:00:00 | 2012-09-22 08:00:00 |
+---------------------+---------------------+ 
```

的类型`ActualEffort`。`logdate`字段是日期；值“2012-09-01”小于“2012-09-01 08:00:00”。所以改变这个条件或使用 DATE 函数 -

```
WHERE
  E.logdate BETWEEN
  DATE(FROM_UNIXTIME('1346475600')) AND DATE(FROM_UNIXTIME('1348290000')) 
```

* * *

**（已编辑）**

一方面，当您仅在列上加入时`StaffAssign`，您会得到一个迷你[笛卡尔积](http://en.wikipedia.org/wiki/Cartesian_product "Cartesian product (Wikipedia)")，因为两个表都包含不止一行，并且没有其他特定条件可以建立 1:1 或最多, 1:N 行之间的关系。`ActualEffort``Tid``Tid=123``Tid`

但事实上，1:N 也不会这样做：虽然它不会给您笛卡尔积效应，但它会导致一侧的值重复，从而导致 SUM 失真。

因此，in`StaffAssign`和 in 的数据`ActualEffort`必须分别聚合，*然后*加入，如下所示：

```
SELECT
  pl.ProjectId,
  pn.name,
  sa.Planned,
  ae.ActualEffort
FROM ProjectList pl
  JOIN ProjectName pn
    ON pn.Id = pl.ProjectId
  LEFT JOIN (SELECT Tid, SEC_TO_TIME(SUM(TIME_TO_SEC(Planned))) Planned FROM StaffAssign GROUP BY Tid) sa
    ON sa.Tid = pl.Tid
  LEFT JOIN (SELECT Tid, SEC_TO_TIME(SUM(TIME_TO_SEC(ActualEffort))) ActualEffort FROM ActualEffort GROUP BY Tid) ae
    ON ae.Tid = pl.Tid
 GROUP BY ProjectId; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:11:31.640

您的 SQL 中有一个错误：您不想加入 p.ProjectID 而不是 p.id

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T05:54:50.353

试试这个查询

```
SELECT P.id AS projectid,P.name,
SEC_TO_TIME(SUM(TIME_TO_SEC(A.planned)))planned,SEC_TO_TIME(SUM(TIME_TO_SEC(E.actualeffort)))actual FROM actualeffort E 
INNER JOIN staffassign A ON A.tid = E.tid
INNER JOIN projectlist L ON L.tid = A.tid
INNER JOIN projectlist L ON L.tid = E.tid        // you have not added this line
INNER JOIN projectname P ON P.id = L.projectid 
WHERE E.logdate BETWEEN FROM_UNIXTIME('1346475600') AND FROM_UNIXTIME('1348290000')
GROUP BY P.id 
```

`L`和之间的连接`E`应该存在。

# ios - ios coverflow 一次显示许多项目，例如三个而不是一个

> ID：12559521
> 
> 赞同：0
> 
> 时间：2012-09-24T05:50:52.333
> 
> 标签：ios, coverflow

我想实现如下图所示的coverflow（而不是一次显示1，它可以一次显示很多，比如3）。有人可以帮助我的方法，或者带我去任何教程将不胜感激![在此处输入图像描述](../Images/d541991f7eda90f7d006c930d9910bdc.png) 提前谢谢你

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-27T06:19:20.710

我从你的问题中了解到的是你想要实现coverflow。

所以你可以通过将 UIScrollView 添加到 UItableView Cell 来实现这一点，如果你只想要一行，那么只需使用我们的几个 tableView 委托方法。

[本教程可帮助您继续。如果您需要任何帮助，请返回。](http://www.raywenderlich.com/4723/how-to-make-an-interface-with-horizontal-tables-like-the-pulse-news-app-part-2)

**编辑：**

也看看这篇文章：[检查这里](https://stackoverflow.com/questions/4324514/horizontal-uiscrollview-inside-a-uitableviewcell)

# ruby-on-rails - 投票/类似资源的路由和控制器设计

> ID：12559522
> 
> 赞同：1
> 
> 时间：2012-09-24T05:50:57.703
> 
> 标签：ruby-on-rails, ruby-on-rails-3, rest, routes

我有一个类似的模型，记录哪个用户喜欢哪个记录。我使用了多态关联，因此用户可以喜欢许多模型。

目前我使用嵌套资源来处理喜欢。

```
POST   /items/:item_id/likes
DELETE /items/:item_id/likes/:id 
```

`like_id`现在由于某些原因，我想通过设计更好的路线来摆脱使用。这是因为缓存片段视图会更容易。

请注意，`item`模型只是少数几个模型之一，`likable`如果可能的话，我想避免代码重复。

设计不会使用`like_id`但也允许在控制器中更好地重用代码的路由和控制器的好方法是什么？

***可能的实施***

我在想这样的路线：

```
POST   /items/:item_id/like
DELETE /items/:item_id/like 
```

我不会使用嵌套的资源。相反，我`like`在项目控制器中放置了一个动作。它将确定请求是 a`POST`还是 a`DELETE`并采取相应的行动。然而，这不会感觉干燥。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:08:39.993

我不一定了解 Rails，但在 Zend Framework 中，我会创建一个前端控制器插件，以将所有使用方法“LIKE”和“UNLIKE”的请求路由到特定控制器，然后推断出请求了哪个路由，然后是哪个资源请求，然后以请求用户的名义执行必要的操作以“喜欢”或“不喜欢”该资源。

为什么？因为用户是“喜欢”或“不喜欢”有问题的资源，而不是“创建喜欢”或“删除喜欢”。当然，在后端，“喜欢”是缓存或数据库中创建或删除的记录——但资源的语义不一定等同于用于持久化该资源的任何方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-04-27T15:14:46.133

您需要的是奇异资源。

**路线.rb**

```
resources :items do 
  resource :like, only: [:create, :destroy]
end 
```

**likes_controller.rb**

```
class LikesController < ApplicationController

    before_action :load_likeable

    def create
        @like = Like.where(likeable: @likeable, user: current_user).first_or_create
        redirect_back(fallback_location: @likeable)
    end

    def destroy
        @like = Like.find_by(likeable: @likeable, user: current_user).destroy
        redirect_back(fallback_location: @likeable)
    end

    private

    def load_likeable
        klass = [Recording].detect { |c| params["#{c.name.underscore}_id"] }
        @likeable = klass.find(params["#{klass.name.underscore}_id"])
    end

end 
```

**likes_helper.rb**

```
module LikesHelper

    def like_button_for(item)
        if item.liked
            form_tag recording_like_path(item), method: :delete do
                button_tag "UnLike"
            end
        else
            form_tag recording_like_path(item), method: :post do
                button_tag "Like"
            end
        end
    end

end 
```

*item.liked 是来自 Item 模型的方法*

# c++ - Windows RT ARM 平台上的 SQLite3 崩溃

> ID：12559528
> 
> 赞同：1
> 
> 时间：2012-09-24T05:51:23.600
> 
> 标签：c++, sqlite, windows-8, arm

我目前正在通过 Visual Studio 2012 中的扩展和更新管理器使用 SQLite3 v3.7.14 下载。当我为 Win32 编译时，它可以工作，但是当我在 ARM 上编译和运行时它没有。每当我尝试设置 sqlite3_temp_directory 时它就会崩溃。我觉得我正在关注这里的文档（[http://www.sqlite.org/c3ref/temp_directory.html](http://www.sqlite.org/c3ref/temp_directory.html)）。

```
void init()
{
    // Set the temporary directory for sqlite prior to opening the database
    LPCWSTR zPath = Windows::Storage::ApplicationData::Current->TemporaryFolder->Path->Data();
    char zPathBuf[MAX_PATH + 1];
    memset(zPathBuf, 0, sizeof(zPathBuf));
    WideCharToMultiByte(CP_UTF8, 0, zPath, -1, zPathBuf, sizeof(zPathBuf), NULL, NULL);
    sqlite3_temp_directory = sqlite3_mprintf("%s", zPathBuf); // CRASHES HERE ON WINRT

    auto localDataPath = Windows::Storage::ApplicationData::Current->LocalFolder->Path;
    std::wstring path(localDataPath->Data());
    path += L"\\database.sql";

    sqlite3_open16(path.c_str(), &m_DB);
} 
```

我想知道我是否错过了什么？我不知道如何调试这个，也找不到任何在 WinRT 上使用 SQLite3 或正确使用 sqlite3_temp_directory 的好例子。

更新：

事实证明，如果我绕过官方预编译的 .lib/.dll 文件包含原始 sqlite3.h/.c 文件，上述代码将按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T01:12:42.707

SQLite3 团队通知我确实有问题。问题本身存在于 SQLite3 代码库或 Microsoft MSVC 编译器中，他们正在积极寻找解决方案。

事实证明，只有在启用优化时才会出现问题，主要原因是 /Og 开关。您可以暂时禁用构建优化来解决此问题。

# ruby - 你如何在 Rakefile 中为 IronWorker 上传工人？

> ID：12559529
> 
> 赞同：2
> 
> 时间：2012-09-24T05:51:23.480
> 
> 标签：ruby, ironworker

我知道您可以使用 IronWorker CLI 工具从命令行执行此操作，但我想使用 Rakefile 使其更有条理并从配置文件加载我的配置。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T05:51:23.480

这是一个加载本地 config.yml 文件的示例，`rake workers:upload`您可以上传所有工作人员：

```
require 'uber_config'
require 'iron_worker_ng'

@config = UberConfig.load
p @config

namespace :workers do
  task :upload_email do
    client = IronWorkerNG::Client.new(@config['iron'])
    # Upload the code
    code = IronWorkerNG::Code::Base.new('workers/email_worker')
    client.codes.create(code)
  end
  task :upload_lead do
    client = IronWorkerNG::Client.new(@config['iron'])
    # Upload the code
    code = IronWorkerNG::Code::Base.new('workers/lead_worker')
    client.codes.create(code)
  end
  task :upload do
    Rake::Task["workers:upload_email"].invoke
    Rake::Task["workers:upload_lead"].invoke
  end

end 
```

# c - 将 xpath 与 Expat xml 解析器一起使用

> ID：12559531
> 
> 赞同：0
> 
> 时间：2012-09-24T05:51:34.650
> 
> 标签：c

我已经使用 Expat xml 解析器来解析 xml。我需要知道 Expat 是否支持 xpath 的功能，即如果我想使用 xpath 在运行时修改 xml 并将修改后的 xml 作为输入传递给 api（这里在 xml 中提到了 api 名称，由expat 解析器）。在这里我想通过expat解析xpath命令，所以请建议expat是否支持这个。我使用的是c语言。

谢谢普里亚

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T05:57:27.427

据我所知， expat**仅**解析 XML，这意味着它不会以任何方式对其进行转换，因此对您的问题的简短回答是**NO**。

# php - 使用延迟加载的图像加载

> ID：12559532
> 
> 赞同：1
> 
> 时间：2012-09-24T05:51:34.913
> 
> 标签：php, jquery, image, lazy-loading

我已经使用[http://www.appelsiini.net/projects/lazyload](http://www.appelsiini.net/projects/lazyload)这个插件来加载图像。

当我向下滚动页面图像正在加载时它工作正常，但我需要在页面加载时显示第一行图像。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:04:20.643

默认情况下，当图像出现在屏幕上时会加载它们。如果您希望图像更早加载，您可以设置阈值参数。将阈值设置为 200 会使图像在可见之前加载 200 像素。

```
$("img.lazy").lazyload({ threshold : 200 }); 
```

所以在你的情况下，页面的第一行有多远？

```
$(function() {
    var $firstRow = $('table:first tr:first'), 
    threshold = $firstRow.offset().top + $firstRow.height();
    $("img.lazy").lazyload({ threshold : threshold });
}); 
```

或类似的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:05:01.557

在运行的网站演示页面中，显示第一行页面正在加载，请参阅此[DEMO](http://jsfiddle.net/r2c4G/)

```
$(function() {
          $("img").lazyload({
              effect : "fadeIn",
              /*
              appear : function(elements_left, settings) {
                  console.log("appear");
                  console.log(elements_left);
                  //console.log(this, elements_left, settings);
              },
              load : function(elements_left, settings) {
                  console.log("load");
                  console.log(elements_left);
                  //console.log(this, elements_left, settings);
              }
              */
          });
      });​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-27T21:27:17.253

您的图像缺少宽度和高度属性。没有它们，延迟加载将无法正常工作。`document.ready`在不知道宽度和高度的情况下，浏览器无法知道事件触发时图像在布局中的位置。正确的图像标签如下所示：

```
<img class="lazy" src="img/grey.gif" data-original="img/example.jpg"  width="640" heigh="480"> 
```

# sql - 如何将更改传播到另一个数据库？

> ID：12559533
> 
> 赞同：1
> 
> 时间：2012-09-24T05:51:36.180
> 
> 标签：sql, sql-server, triggers, replication, mirroring

我想让一个数据库中对多个表进行的任何数据更改被复制（镜像？）到另一个数据库的类似表中。两个数据库（在谈论我想要同步的表时）具有相似的表结构（模式）。这些表包含很少更改的数据，但如果数据确实发生了变化，我希望同时传播这些更改。

这些表包含某种参考数据。原始数据库是主要数据库。另一个用于一些操作（在线？？）任务，但它需要原始数据库中的几个参考表。那么，是否可以进行这种复制（如果“是”，而不是如何）？还是最初的方法是错误的？

似乎镜像数据库是一个比我需要的更复杂的操作。简单的触发器似乎更适合这样做。但是我对如何准确地做到这一点以及这是否是我应该这样做的方式有点困惑。

原始数据库在 ms sql server 2005 上。目标数据库在 ms sql server 2000 上。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:31:35.183

您不能使用触发器执行此操作（至少不能*仅使用*触发器）。您需要考虑不可用性并具有将更新排队的能力。正确的技术是复制，[事务复制](http://msdn.microsoft.com/en-us/library/ms151176.aspx)或[合并复制](http://msdn.microsoft.com/en-us/library/ms152746.aspx)。

# apache-flex - 如何在 HSlider 上隐藏曲目

> ID：12559536
> 
> 赞同：0
> 
> 时间：2012-09-24T05:52:00.237
> 
> 标签：apache-flex, flex4, flex4.5, flex-spark

有没有办法在 HSlider 中隐藏轨道，如果可能的话，只有按钮接受鼠标交互？

我想将两个 HSlider 叠加在一起，制作一个伪多拇指滑块并隐藏其中一个滑块的轨迹（这样您就可以单击另一个拇指）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T09:18:47.680

您需要为没有轨道或不可见轨道的 HSlider 创建自定义皮肤

# cocos2d-iphone - cocos2d-x 中的 facebook/twitter 集成？

> ID：12559537
> 
> 赞同：2
> 
> 时间：2012-09-24T05:52:12.483
> 
> 标签：cocos2d-iphone, cocos2d-x

我在 cocos2d-x 中遇到了 facebook/twitter 集成的问题。我不知道如何在 cocos2d-x 中进行 facebook/twitter 集成。如果有人知道这件事，请帮助我。

是否可以在 cocos2d-x 中实现 facebook/twitter 集成？

如果可能的话，当它移植到 android/ios/etc 时会发生什么。它会正常工作吗？

谢谢...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-27T23:12:42.123

我编写了一个简单的库来将 Java 和 Objective C 与 C++ (Cocos2dx) 连接起来。您可以在所需平台中搜索 Facebook SDK 集成的任何教程，并使用我的库简单地从 C++ 发送和接收消息。我还写了一个完整的 Wiki 来使用这个库，请看一下。

库源页面：[https ://github.com/aajiwani/EasyNDK-for-cocos2dx](https://github.com/aajiwani/EasyNDK-for-cocos2dx)

维基页面：[http ://cocos2d-x.org/projects/cocos2d-x/wiki/EasyNDK](http://cocos2d-x.org/projects/cocos2d-x/wiki/EasyNDK)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-20T22:14:20.590

您可以在两个平台上使用官方 SDK。创建一个通用 C++ 接口，FB 和 Twitter 各一个，带有响应回调。我们暂时将 FB 版本称为“FacebookInterface.h”。然后，您可以创建“FacebookInterface-android.cpp”，它使用 JNI 连接 Facebook Android SDK，并通过 JNI 将其结果返回到您的 C++ 代码。您需要将此 cpp 文件添加到您的 jni/Android.mk 中。

然后，您可以创建一个“FacebookInterface-ios.mm”，将其包含在 Xcode 中以用于您的 iOS 构建。该文件将实现标头函数，并使用 Facebook iOS SDK。由于该文件将是一个 *.mm Objective-C++ 文件，如果它是用 Objc 编写的，您可以与 FB iOS SDK 交互。

这样做的好处是您使用的是官方 SDK，而不是 C++ 分支。您还可以从那些使用本身实现多线程的高级库的 SDK 中受益，因此您不必在 C++ 中使用 pthread 和 libcurl。

缺点是你必须弄乱 Android JNI，但我向你保证，一旦你弄清楚如何使用它的挑剔细节，它真的一点也不坏。

为了使事情更容易一些，您可能会考虑在某些点统一您的界面。例如，您的登录界面可能在 FB 和 Twitter 之间是相同的。它要么成功，要么不成功。您可能想要定义一个接口函数，允许您接收响应状态（OK 或 Error），即 FB 访问令牌。但是，您可能还需要一个类似的函数，其中包含一个额外的 Twitter 密钥参数。两种途径都会导致相同的结果——用户可以登录，你要么成功要么失败。SDK 应该能够以图形方式处理该问题，然后您的界面将需要处理各种情况，例如当用户关闭带有或不带有有效令牌的 SDK 弹出对话框时等。您还需要所有 FB/Twitter api调用以某种方式通过此接口进行路由，

这是一项有些艰巨的任务，但肯定可以分解成碎片。最糟糕的部分可能是 Android JNI。这不好玩，但这不是世界上最糟糕的事情。

# drupal - 在 Drupal 中定义模块内部的全局变量

> ID：12559540
> 
> 赞同：1
> 
> 时间：2012-09-24T05:52:32.283
> 
> 标签：drupal, global-variables

我试图在我的模块中保存一个全局变量并从另一个函数访问它。我不想将它存储在 $_SESSION 中，因为我需要这个变量应用程序范围。以下是我正在尝试的代码，但它根本不起作用。

```
 function popmeup_menu() {
    $items['example/feed'] = array(
    'title' => 'Example RSS feed',
     'page callback' => 'popmeup_page',
     'access arguments' => array('access content'),
     'type' => MENU_CALLBACK
    );
    return $items;
  }

    function popmeup_page() {
      print variable_get($xmlt, "");
    }

    function popmeup_comment_insert($comment) {
      variable_set($xmlt,"xmltoreturn");
    } 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T06:24:24.640

要存储全局变量，请将其存储在`$GLOBALS`superglobal 中。

或者，也许，您可以使用静态值。

`$GLOBALS`： http: [//php.net/manual/en/reserved.variables.globals.php](http://php.net/manual/en/reserved.variables.globals.php)

`static`变量： http: [//php.net/manual/en/language.oop5.static.php](http://php.net/manual/en/language.oop5.static.php)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-24T06:37:41.403

如果您只需要一个地方来在相同的请求中存储您的变量，以便访问不同的函数，那么请查看[drupal_static](http://api.drupal.org/api/drupal/includes!bootstrap.inc/function/drupal_static/7)。如果您需要跨多个请求跟踪您的变量，那么 $_SESSION 就是您要查看的地方。

Mārtiņš Briedis 对 static_variables 的看法是正确的，而 drupal_static 只是形式化的实现方式。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-02T16:24:13.013

`popmeup_comment_insert()`（[hook_comment_insert()](http://api.drupal.org/api/drupal/modules!comment!comment.api.php/function/hook_comment_insert/7)的实现）在与`popmeup_page()`. 因此，当相关页面请求完成时，任何静态或全局变量都会自动重置。

您唯一的选择是使用 Drupal 变量，或从您的模块中使用的自定义数据库表。我会丢弃 Drupal 变量，因为它们是在 Drupal 引导期间加载的，即使没有请求它们的值来构建页面内容。在您的情况下，由于您在输出页面时需要这些值，我宁愿使用自定义数据库表。

当您使用`hook_comment_insert()`它来填充它时，您应该考虑不同的用户可以同时插入新评论，或者在调用您的页面回调之前。您的代码应该需要考虑这一点。如果两个不同的用户创建了一个新评论，应该在数据库中保存哪个值？

# c# - 无法清除 GridView 的最后一个数据源

> ID：12559542
> 
> 赞同：2
> 
> 时间：2012-09-24T05:53:00.037
> 
> 标签：c#, asp.net, gridview

首先，我选择页面加载上的所有记录，如下所示：

```
OleDbCommand objCmd = new OleDbCommand("SELECT * FROM MyTable", mycon);
objCmd.CommandType = CommandType.Text;
DataTable dtTemp = new DataTable();
OleDbDataReader rd = objCommand.ExecuteReader();
if (rd.HasRows)
{
    dtTemp.Load(rd);
    gvTemp.DataSource = dtTemp;
    gvTemp.DataBind();
} 
```

在 GridView( `gvTemp`) 中，我是这样传入`MemID`的`CommandArgument`：

```
<asp:TemplateField HeaderText="Action" ItemStyle-Width="80px">
    <ItemTemplate>
        <asp:LinkButton ID="lbtnStart" runat="server" CommandArgument='<%# Eval("MemID") %>' CommandName="Start">Start</asp:LinkButton>
    </ItemTemplate>
</asp:TemplateField> 
```

所以当我点击`Start`,`gvTemp_RowCommand`被触发并且我想得到`CommandArgument`( `MemID`) 。所以我这样做是为了实现它：

```
protected void gvTemp_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "Start")
    {
        Response.Redirect("AddMem.aspx?MemID=" + e.CommandArgument.ToString());
    }
} 
```

这工作很好。但问题就在这里。
当用户搜索特定记录时，我会`gvTemp`像这样重新加载：

```
OleDbCommand objCmd = new OleDbCommand("SELECT * FROM MyTable WHERE MemID = ?", mycon);
objCmd.Parameters.Add(myParam); 
objCmd.CommandType = CommandType.Text;
DataTable dtTemp = new DataTable();
OleDbDataReader rd = objCommand.ExecuteReader();
if (rd.HasRows)
{
    dtTemp.Load(rd);
    gvTemp.DataSource = dtTemp;
    gvTemp.DataBind();
} 
```

执行此查询，我只得到一条记录。当我点击时`Start`，`gvTemp_RowCommand`被解雇。但我正在`e.CommandArgument`使用旧的数据源。（即 的前 1`MemID`个`SELECT * FROM MyTable`）。因此，在绑定实际 DataSource 之前，我像这样清除 GridView：

```
gvTemp.DataSource = null;
gvTemp.DataBind();
gvTemp.DataSource = dtTemp;
gvTemp.DataBind(); 
```

但我仍然在`e.CommandArgument`使用旧的数据源。那么我错过了什么？或者有没有其他方法可以达到同样的效果？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T06:12:57.857

在每个按钮单击时都会发生回发并发生页面加载事件，因此在您的情况下，这可能是加载先前数据源的原因。所以你必须检查 IsPostBack 条件。

尝试这样的事情：

```
if(!IsPostBack)
   //Your code or method for selecting all records. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:18:08.703

你为什么不简单地删除`Response.Redirect(itself)`并使用方法和属性呢？

```
private string MemID{
    get { return (String)ViewState["MemID"]; }
    set { ViewState["MemID"] = value; }
}

private void BindGrid()
{
    // copy your sql,datasource and databind stuff here, use the MemID property for the parameter
}

protected void gvTemp_RowCommand(object sender, GridViewCommandEventArgs e)
{
    if (e.CommandName == "Start")
    {
        MemID = e.CommandArgument.ToString());
        BindGrid();
    }
} 
```

# iphone - 在目标c的第三类中创建不同类的对象并修改细节

> ID：12559544
> 
> 赞同：0
> 
> 时间：2012-09-24T05:53:01.970
> 
> 标签：iphone, objective-c, ios

我是IOS开发的新手。我有包含以下内容的课程。细节：

```
@interface GeoFenceReferenceDetails : NSObject {
    NSString* directionType;
    NSString* fenceCode;
    NSNumber* fenceId;
    NSString* fenceName;
    NSString* geoFenceType;
} 
```

另一个用于创建字典的“实用程序”类：

```
-(NSDictionary *) createGeoReferenceDict2: (GeoFenceReferenceDetails *) geoFenceDetails {    
return [NSDictionary dictionaryWithObjectsAndKeys:
        geoFenceDetails.directionType, @"directionType",
        geoFenceDetails.fenceCode, @"fenceCode",
        geoFenceDetails.fenceId, @"fenceId",
        geoFenceDetails.fenceName, @"fenceName",
        geoFenceDetails.geoFenceType, @"geoFenceType",
        nil];
} 
```

现在我想在第三个类中创建一个 GeoFenceReferenceDetails 对象，它以下列方式提供输出：

```
{
directionType = None;
fenceCode = 12;
fenceId = 81;
fenceName = "ABC";
geoFenceType = Circle;
} 
```

这就是我正在做的事情。我在第三类中创建 GeoFenceReferenceDetails 的“fenceDetails”对象，然后执行以下操作：

```
 fenceDetails = [[GeoFenceReferenceDetails alloc] init];

fenceDetails.fenceId=[NSNumber numberWithInt:121];
 NSLog(@"%i",[fenceDetails.fenceId intValue]);
  NSDictionary* geoFenceReference = [[Utility sharedInstance] createGeoReferenceDict2:fenceDetails];

NSLog(@"%@ ",[geoFenceReference description]); 
```

但我得到的只是

```
{

} 
```

你能帮助我吗 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:03:56.583

这意味着您的字典对象未分配或不包含任何值。

您需要检查的事项很少。

1.  检查是否`sharedInstance`分配`Utility`对象。
2.  还要确保它的字典对象`geoFenceReference`不为零。
3.  放置断点调试代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:22:42.033

将此添加到您的 .h 接口类声明中：

```
@interface GeoFenceReferenceDetails : NSObject {
    NSString* directionType;
    NSString* fenceCode;
    NSNumber* fenceId;
    NSString* fenceName;
    NSString* geoFenceType;
}
@property (nonatomic, retain) NSString *directionType;
@property (nonatomic, retain) NSString *fenceCode;
@property (nonatomic, retain) NSString *fenceId;
@property (nonatomic, retain) NSString *fenceName;
@property (nonatomic, retain) NSString *geoFenceType; 
```

这到你的 .m 实现文件

```
@synthesize directionType, fenceCode, fenceId, fenceName, geoFenceType;

- (void)dealloc {
    self.directionType = nil;
    self.fenceCode = nil;
    self.fenceId = nil;
    self.fenceName = nil;
    self.geoFenceType = nil;
    [super dealloc];
}

- (NSString *)description {
return [NSString stringWithFormat:@"%@ %@ %@ %@ %@ %@", self, self.directionType, self.fenceCode, self.fenceId, self.fenceName, self.geoFenceType];
} 
```

在没有 IDE 的情况下写了这个，所以我为拼写错误道歉，如果有的话。希望这可以帮助。

# sql - SQL Server 等效于 WM_CONCAT 函数

> ID：12559551
> 
> 赞同：4
> 
> 时间：2012-09-24T05:53:46.170
> 
> 标签：sql, database, oracle, sql-server-2008, tsql

> **可能重复：**
> [将字段值连接到 SQL Server 中的字符串](https://stackoverflow.com/questions/1621747/concat-field-value-to-string-in-sql-server)

WM_CONCAT 的 SQL Server 等效项是什么？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-24T05:58:35.097

您没有等效的功能，但您仍然可以模拟（使用`CROSS APPLY`和`FOR XML PATH('')`）。例子，

```
USERID  ADDRESSLINE1
==========================
1       First Street
1       Second Street
2       32th Street
2       24th Street
2       25th Street 
```

将导致

```
USERID  ADDRESSLIST
============================
1       First Street, Second Street
2       32th Street, 24th Street, 25th Street 
```

使用此查询：

```
SELECT  a.UserID, 
        SUBSTRING(d.Addresses,1, LEN(d.Addresses) - 1) AddressList
FROM
        (
            SELECT DISTINCT UserID
            FROM tableName
        ) a
        CROSS APPLY
        (
            SELECT [AddressLine1] + ', ' 
            FROM tableName AS B 
            WHERE A.UserID = B.UserID 
            FOR XML PATH('')
        ) D (Addresses) 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!3/826be/3)

# javascript - 0奇怪结果的javascript力量？

> ID：12559552
> 
> 赞同：4
> 
> 时间：2012-09-24T05:54:01.813
> 
> 标签：javascript, exponent

我在这段代码中使用 chrome：

```
var startbet = 1;
var shot = 0;
var bet = startbet * 2^shot; 
```

n^0=n 在这种情况下
它应该等于 1 而不管 n

这是javascript的错误还是有些人相信0的力量应该以不同的方式处理？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T06:00:36.000

在 Javascript 中，`^`运算符是[按位 XOR](https://developer.mozilla.org/en-US/docs/JavaScript/Guide/Expressions_and_Operators#Bitwise_operators)，而不是指数。

正如 Mikhail 所说，您必须使用[Math.pow()](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Math/pow)来计算指数。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T05:56:54.867

我认为您需要改用[Math.pow](http://www.w3schools.com/jsref/jsref_pow.asp)

# grails - grails中数据的分页

> ID：12559559
> 
> 赞同：0
> 
> 时间：2012-09-24T05:54:42.040
> 
> 标签：grails, pagination

我从后端团队以***JSON***格式获取数据。现在我希望在选择标准时对这些数据进行**分页**，例如如果我从下拉列表中选择 20，我希望对这 1000 个数据进行分页，在每页上显示 20 个数据。后端请求在这里不做。我使用*grails*作为我的语言。

谢谢 ！提前。

# c++ - OpenGL绑定时已经绑定

> ID：12559561
> 
> 赞同：2
> 
> 时间：2012-09-24T05:54:44.563
> 
> 标签：c++, performance, opengl, graphics, binding

我正在用 OpenGL 3.2+ 编写引擎。可渲染对象有一个网格（又名 VAO）和几个材质（又名着色器和程序）。所有可渲染对象都存储在渲染队列中，该队列对材质和网格的渲染过程进行排序，从而需要最少的 OpenGL 绑定调用。

但是，有时它会绑定已经绑定的对象，我的问题是：OpenGL 是否会自动检测您何时尝试绑定已绑定的对象并跳过所有昂贵的操作，或者您是否必须实现一个系统才能检测一个对象是否已经自己绑定？

如果 OpenGL 没有检测到这一点，通过 glGet* 获取对象名称并与您尝试绑定的对象进行比较或自己跟踪当前绑定的对象是否可能更快？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:16:41.293

我不相信规范要求执行此类检查，但每个主要实现都需要。但是，如果您决定自己做 - 为什么不自己存储值呢？glGet 在这里没有特别的兴趣。顺便说一句，材质和着色器不是一回事。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:15:27.737

通常，当您启用某些内容时，您需要在不需要它之后将其禁用。因此答案是：您必须跟踪程序中所做的事情。

我能想到的最简单的例子是：

```
glEnable(GL_TEXTURE_2D);
glBindTexture( 0, id );
// render
glDisable(GL_TEXTURE_2D); 
```

# scribe - 水槽 vs 卡夫卡 vs 其他

> ID：12559570
> 
> 赞同：19
> 
> 时间：2012-09-24T05:55:55.523
> 
> 标签：scribe, flume

可能以前有人问过这个问题，但鉴于这些技术已经成熟，我认为今天再次考虑是件好事。我们希望使用 Flume、kafka、scribe 或其他之一将流式 facebook 和 twitter 个人资料信息存储到 hbase 中，以便稍后进行分析。我们正在考虑使用水槽，但我没有使用其他技术来做出明智的决定。任何能够揭示一些光芒的人都会很棒！非常感谢。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-11-13T14:18:04.447

Mediawiki（维基百科）经历了这一点，并发表了一篇很好的文章，介绍了他们如何选择（Kafka）与 Scribe、Flume 等。

[http://www.mediawiki.org/wiki/Analytics/Kraken/Request_Logging](http://www.mediawiki.org/wiki/Analytics/Kraken/Request_Logging)

新链接：
[https ://wikitech.wikimedia.org/wiki/Analytics/Archive/Hadoop_Logging_-_Solutions_Recommendation](https://wikitech.wikimedia.org/wiki/Analytics/Archive/Hadoop_Logging_-_Solutions_Recommendation)

后人总结：

> “我们的推荐是 Apache Kafka，这是一个为吞吐量而设计的分布式发布-订阅消息系统。我们评估了大约十几个 [1] 来自分布式日志收集、CEP / 流处理和实时领域的最佳系统消息系统。虽然这些系统提供了惊人的相似特性，但它们在实现上却大不相同，并且每个系统都专门针对特定的工作配置文件（附录中提供了更全面的技术讨论）。
> 
> “Kafka 之所以脱颖而出，是因为它专门用于吞吐量并明确分布在其架构的所有层中。有趣的是，它还非常关注资源节约 [2] 以提供合理的权衡，以放松保证以换取性能——这可能不会发生Facebook 或 Google 作为他们设计的系统中的一个重要功能。约束孕育创造力。
> 
> “此外，Kafka 有一些操作读者特别感兴趣的好处。虽然它是用 Scala 编写的，但它附带了一个本地 C++ 生产者库，可以嵌入到我们的缓存服务器的模块中，从而无需在其上运行 JVM其次，生产者可以配置为批处理请求以优化网络流量，但不要创建需要额外维护的持久本地日志。Kafka 的 I/O 和内存使用由操作系统而不是 JVM [3 ]。
> 
> “Kafka 是由 LinkedIn 编写的，现在是一个 Apache 项目。在 LinkedIn 的生产中，每个数据中心大约有 10,000 个生产者由 8 个 Kafka 服务器处理。这些集群将它们的流整合到一个分析数据中心，Kafka 通过一个开箱即用的简单的镜像配置。
> 
> “这些功能非常适合我们的预期用例；即使是我们不打算使用的那些——例如按“主题”类别进行分片和路由——也很有趣，并且在我们扩展目标时可能在未来证明是有用的。
> 
> “本文档的其余部分将更详细地探讨这些主题……”

# c# - 使用 NTLM 身份验证获取用户和组详细信息

> ID：12559573
> 
> 赞同：2
> 
> 时间：2012-09-24T05:56:02.060
> 
> 标签：c#, ntlm

我想使用**NTLM**身份验证获取所有用户和组的详细信息。

NTLM 是否使用**Active Directory**来存储所有用户名？NTLM 和**Windows 身份验证**是相同的身份验证方法吗？

如果是，那么在这种情况下**域的用途是什么？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T06:06:36.050

> **NTLM**是否使用**Active Directory**来存储所有用户名？

是的，用户名存储在 Active Directory 中。NTLM 只是一个质询/响应身份验证协议，其中客户端从不通过网络发送密码。

> NTLM 和**Windows 身份验证**是相同的身份验证方法吗？

是的，有很多名称都引用了相同的身份验证机制：

*   HTTP 协商身份验证
*   NT 认证
*   NTLM 身份验证
*   域认证
*   Windows 集成身份验证
*   Windows NT 质询/响应身份验证

或者干脆

*   Windows 身份验证。

> 如果是，那么在这种情况下**域的用途是什么？**

如前所述，客户端从不通过网络发送他的密码。因此，为了确保客户端的身份，服务器与域控制器通信以质询客户端，如果客户端成功响应，则表明他就是他声称的那个人。

现在回到你原来的问题：

> 我想使用**NTLM**身份验证获取所有用户和组的详细信息。

您需要查询您的域控制器 (AD) 才能检索此信息。这是[一个示例](https://stackoverflow.com/a/5310317/29407)，显示如何获取给定用户名的组。

# ruby-on-rails - Typhoeus 不会关闭 https 连接

> ID：12559575
> 
> 赞同：2
> 
> 时间：2012-09-24T05:56:38.613
> 
> 标签：ruby-on-rails, http, https, connection-pooling, typhoeus

我正在使用 Typhoeus 处理我网站上对外部 API 的所有 HTTP 调用，直到最近它一直运行良好。一段时间后，我的 Rails 网站开始没有响应。我注意到当我执行 netstat 时，有大量的连接处于 CLOSE_WAIT 状态，它们是由以下代码生成的。

```
 requests = []
  hydra = Typhoeus::Hydra.new
  urls.each_with_index do |url, index|
    request = Typhoeus::Request.new(url, :timeout => 5000)
    request.on_complete do |response|
      begin
        resp = JSON.parse(response.body)

        if resp["error"]
          p "no deal found for #{factual_ids[index]}"
          { :deals => nil }
        else
          { :deals => resp["merchant"]["deals"] }
        end
      rescue Exception => e
        p e.message
        { :deals => nil }
      end
    end

    requests << request
    hydra.queue(request)
  end

  hydra.run 
```

我发现与在其他 HTTP 调用中使用 Typhoeus 的方式不同的是，上面的 url 都是 HTTPS url。我不知道这是否有任何意义，但这是我此刻唯一能想到的。有没有人见过这个？是否有一个选项我可以传递到 Typheous 以在连接完成后强制关闭连接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-06T20:30:36.563

您使用的是哪个操作系统和 Typhoeus 版本？一些使用 ubuntu 的人似乎遇到了类似的问题。Typhoeus 0.5 尚未发布，但它是支持 forbid_reuse 选项的候选版本。

```
Typhoeus::Request.new(url, :timeout => 5000, :forbid_reuse => true) 
```

这就是问题所在：[https](https://github.com/typhoeus/typhoeus/issues/205) ://github.com/typhoeus/typhoeus/issues/205 ，这里是 libcurl 文档：[http](http://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTFORBIDREUSE) ://curl.haxx.se/libcurl/c/curl_easy_setopt.html#CURLOPTFORBIDREUSE 。

Typhoeus 0.5 的代码如下所示：

```
requests = []
Typhoeus.on_complete do |response|
  begin
    resp = JSON.parse(response.body)

    if resp["error"]
      p "no deal found for #{factual_ids[index]}"
      response.options[:response_body] = { :deals => nil }
    else
      response.options[:response_body] = { :deals => resp["merchant"]["deals"] }
    end
  rescue Exception => e
    p e.message
    response.options[:response_body] = { :deals => nil }
  end
end

hydra = Typhoeus::Hydra.new
urls.each_with_index do |url, index|
  request = Typhoeus::Request.new(url, :timeout => 5000)
  requests << request
  hydra.queue(request)
end

hydra.run 
```

# php - 使用 facebook php api 获取备用电子邮件

> ID：12559578
> 
> 赞同：0
> 
> 时间：2012-09-24T05:56:49.950
> 
> 标签：php, facebook, facebook-graph-api

我想使用 facebook php sdk 来提取登录到我的应用程序的用户的所有相关详细信息。我知道这可以通过 facebook->api('/me') API 来完成。

我正在尝试获取用户的电子邮件地址。除此之外，我还想获取用户的备用电子邮件地址。

我知道有些人过去曾尝试过这样做，但 facebook api 不支持获取备用电子邮件地址。这是否仍然成立。? 我没有看到任何文件表明该功能最近已实施。想加倍肯定。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:05:40.547

抱歉，老兄，但 Facebook 没有提供带有用户对象的备用电子邮件地址。以下是可访问的字段。

[https://developers.facebook.com/docs/reference/api/user/](https://developers.facebook.com/docs/reference/api/user/)

备用电子邮件地址永远不会被披露，因为它用于找回忘记的密码和更多其他选项。

# iphone - 自由手绘重叠 UIColor 的混合模式

> ID：12559580
> 
> 赞同：2
> 
> 时间：2012-09-24T05:57:05.780
> 
> 标签：iphone, objective-c, ios, cocoa-touch, uiview

我正在使用核心图形在 UIView 上进行自由手绘。现在我想用 alpha 值为 0.5 的颜色绘制，当我第一次绘制时，它可以很好地使用颜色。但是当我在同一条线上重绘时，颜色会变暗（颜色重叠）。如何消除那些已经写在 UIView 上的点并且只用浅色绘制一次？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:58:18.913

看起来你只需要清除你的上下文。

```
clearContextBeforeDrawing to YES 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-02T06:20:57.377

使用这个清除当前点的矩形......

```
 CGContextClearRect(context, CGRectMake(currentPoint.x, currentPoint.y, lineWidth, lineHeight)); 
```

# android - Android 只能从左向右滑动

> ID：12559588
> 
> 赞同：4
> 
> 时间：2012-09-24T05:58:03.597
> 
> 标签：android, swipe, swipe-gesture, onfling

我是Android的初学者。我**只需要从左向右**滑动，**不要从右向左滑动**。为此我想做什么？所有的例子都显示从左到右和从右到左？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:13:38.313

看看这里接受的解决方案 -[在网格布局上进行手势检测](https://stackoverflow.com/questions/937313/android-basic-gesture-detection)

该解决方案解释了如何实现一个简单的手势监听器，并记录从左到右和从右到左的滑动。示例中的相关代码位于 GestureDetector`onFling`覆盖方法中。基本上，如果点 1 (e1) 减去点 2 (e2) 大于设定的最小滑动距离，那么您就知道它是从右到左的。如果点 2 (e2) 减去点 1 (e1) 大于最小滑动距离，则从左到右。

```
// right to left swipe
if(e1.getX() - e2.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
    Toast.makeText(SelectFilterActivity.this, "Left Swipe", Toast.LENGTH_SHORT).show();
}  
// left to right swipe
else if (e2.getX() - e1.getX() > SWIPE_MIN_DISTANCE && Math.abs(velocityX) > SWIPE_THRESHOLD_VELOCITY) {
     Toast.makeText(SelectFilterActivity.this, "Right Swipe", Toast.LENGTH_SHORT).show();
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:02:45.940

你可以使用`Drag and Drop` 你可以学习这个教程这是非常好的教程

[http://www.vogella.com/articles/AndroidDragAndDrop/article.html](http://www.vogella.com/articles/AndroidDragAndDrop/article.html)

你可以看看

[http://developer.android.com/guide/topics/ui/drag-drop.html](http://developer.android.com/guide/topics/ui/drag-drop.html)

# javascript - RequireJS 模块与库中的网络工作者

> ID：12559590
> 
> 赞同：3
> 
> 时间：2012-09-24T05:58:15.743
> 
> 标签：javascript, requirejs, web-worker

与大多数网络工作者的用例一样，我有一段可能需要一段时间才能运行的代码——它基于一堆数据构建了一个 Excel 工作表。但是，由于工作簿可以有多个工作表，我应该尝试并行运行它们（除此之外，尽可能大，最好不要让 UI 冻结一两秒10k+ 行文件）。

无论如何，问题在于，由于这是一个库，我希望最终用户必须做的事情尽可能少。我已经知道我可以传递所需模块的绝对路径（通过 require.toUrl），以及构建这些 xml 结构所需的所有数据。我知道我可以传递这些结构很容易回来。不幸的是，虽然我不知道 requirejs 来自哪里。

那么，requirejs 有没有办法引用它自己的路径呢？假设它没有，“要求”用户在 requirejs 的配置上添加一个参数来告诉 requirejs 文件在哪里是否合适？或者我应该把它作为图书馆本身的必需参数吗？或者也许在脚本中添加一个 ID 以引入 requirejs 并从中读取 src？

基本上，可以做到这一点的侵入性最小的方式是什么，而不是把我自己或我的用户画到角落里。

# iphone - Sharekit错误iOS 6

> ID：12559592
> 
> 赞同：1
> 
> 时间：2012-09-24T05:58:22.957
> 
> 标签：iphone, objective-c, ios6, sharekit

在构建应用程序期间，我在 ios 6 版本中遇到了 sharekit 错误。

错误描述如下 -

**ShareKit/Core/SHK.m:35:9: '/usr/include/objc/objc-class.h' 文件未找到**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T06:02:46.630

代替

```
#import </usr/include/objc/objc-class.h> 
```

和

```
#import <objc/runtime.h> 
```

# iphone - 如何在 iOS 6.0 中将彩色图像更改为黑白图像？

> ID：12559595
> 
> 赞同：1
> 
> 时间：2012-09-24T05:58:43.907
> 
> 标签：iphone

我正在使用下面的代码来转换黑白图像。它工作正常。但我改变了该图像的亮度和对比度。应用程序仅在 iOS 6.0 上崩溃。我正在使用任何不推荐使用的方法？请帮我。使用此链接更改亮度和对比度[https://github.com/esilverberg/ios-image-filters](https://github.com/esilverberg/ios-image-filters)

```
- (UIImage *)convertImageToGrayScale:(UIImage *)image
{
    CGRect imageRect = CGRectMake(0, 0, image.size.width, image.size.height);
    CGColorSpaceRef colorSpace = CGColorSpaceCreateDeviceGray();
    CGContextRef context = CGBitmapContextCreate(nil, image.size.width, image.size.height, 8, 0, colorSpace, kCGImageAlphaNone);
    CGContextDrawImage(context, imageRect, [image CGImage]);
    CGImageRef imageRef = CGBitmapContextCreateImage(context);
    UIImage *newImage = [UIImage imageWithCGImage:imageRef];
    CGColorSpaceRelease(colorSpace);
    CGContextRelease(context);
    CFRelease(imageRef);
    return newImage;
} 
```

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:00:40.433

检查以下链接以获取已弃用的方法列表

[https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html](https://developer.apple.com/library/ios/#releasenotes/General/RN-iOSSDK-6_0/_index.html)

[http://www.bgr.com/2012/07/16/ios-6-download-beta-3-change-log/](http://www.bgr.com/2012/07/16/ios-6-download-beta-3-change-log/)

[https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/_index.html](https://developer.apple.com/library/mac/#releasenotes/DeveloperTools/RN-Xcode/_index.html)

# x11 - 有没有办法完全禁用 pixman

> ID：12559602
> 
> 赞同：2
> 
> 时间：2012-09-24T05:59:37.630
> 
> 标签：x11, cairo, armv7, clutter, pixman

我在我的手臂目标上安装了 pixman，为了进行基准测试，我想完全禁用 pixman（如果可能的话！）。有没有办法在不实际删除它的情况下很好地做到这一点。

我知道 PIXMAN_DISABLE 标志，但这会完全关闭它还是只是它的工作方式会改变（比如打开或关闭 sse2）？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T06:10:06.097

Cairo 将 pixman 用于后端无法自行绘制的所有内容，以及图像后端绘制的所有内容。所以没有办法禁用它。

# signalr - SignalR - 如何将客户端重新连接到服务器（如何重新启动 SignalR）

> ID：12559605
> 
> 赞同：6
> 
> 时间：2012-09-24T06:00:16.960
> 
> 标签：signalr, signalr-hub, signalr.client

SignalR 存在以下问题，用户从移动设备访问我的网站。问题是当手机锁定或用户转到另一个应用程序时，服务器上会触发 Disconnect() 方法（我尝试向服务器发送消息并等待它通过 SignalR 回复但没有来自在服务器上触发 Disconnect 方法后的服务器）。在此之后，它会随着客户端不再连接到服务器而缝合。

客户端如何告诉服务器它回来了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-27T17:17:43.147

You can stop the connection:

```
$.connection.hub.stop() 
```

and then restart it via

```
$.connection.hub.start(); 
```

In the next version of SignalR we will take care of this for you, but for the interim you will have to manage it yourself. I'd recommend detecting on the client if the server is dead and then running the stop -> start.

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-09T15:56:26.657

我们有类似的情况从移动设备连接。在我们的例子中，调用 .Stop() 或尝试处理现有连接需要 30 秒，具体取决于底层连接处于非活动状态的时间。（底层协议有一个可以配置的超时）

我们的解决方案是清理所有已处理的事件并取消对集线器连接对象的引用 - 然后在重新激活应用程序后使用新实例重新开始。这工作可靠，几乎是即时的。服务器断开连接事件也会正确触发，尽管它是为每个断开连接的实例触发的。

我在这篇文章[Best practice for reconnecting SignalR 2.0 .NET client to server hub](https://stackoverflow.com/questions/23375043/best-practice-for-reconnecting-signalr-2-0-net-client-to-server-hub)中记录了我们的旅程和解决方案。希望它是有帮助的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-05T13:12:54.017

我认为服务器上的断开连接会触发客户端订阅从内存中删除。

因此，当客户端回来时，服务器并不知道客户端。

# symfony - 更改密码在 FOS 用户包中不起作用 + Sonata 用户包 +sonata Admin 包

> ID：12559606
> 
> 赞同：3
> 
> 时间：2012-09-24T06:00:23.843
> 
> 标签：symfony, fosuserbundle, sonata-admin

我可以使用 Sonata 用户包将 FOS 包集成到奏鸣曲管理包。我的登录工作正常。现在我想将 FOSUserBundle 中的更改密码等功能添加到奏鸣曲管理包

我可以使用 FOS User Bundle 访问配置文件功能

本地主机/myproject/web/app_dev.php/profile

但是更改密码也是一样

localhost/myproject/web/app_dev.php/change-password 无法访问。

我想将它与 SonataAdminBundle 集成为

localhost/myproject/web/app_dev.php/admin/change-password

你能建议我在哪里改变或者我哪里出错了吗？

在我的路由中，我有

```
fos_user_security:
    resource: "@FOSUserBundle/Resources/config/routing/security.xml"

fos_user_profile:
    resource: "@FOSUserBundle/Resources/config/routing/profile.xml"
    prefix: /profile

fos_user_register:
    resource: "@FOSUserBundle/Resources/config/routing/registration.xml"
    prefix: /register

fos_user_resetting:
    resource: "@FOSUserBundle/Resources/config/routing/resetting.xml"
    prefix: /resetting

fos_user_change_password:
    resource: "@FOSUserBundle/Resources/config/routing/change_password.xml"
    prefix: /change-password 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T08:02:19.630

您是否设置了更改密码的路线？

```
fos_user_change_password:
    resource: "@FOSUserBundle/Resources/config/routing/change_password.xml"
    prefix: /profile 
```

# php - 在codeigniter中创建javascript函数

> ID：12559607
> 
> 赞同：-2
> 
> 时间：2012-09-24T06:00:34.250
> 
> 标签：php, javascript

您好我正在尝试创建一个我已经拥有 php 方法的 javascript 函数。一旦我可以发送 url/path 数据，它就会执行该功能。

我正在尝试将 post_id 发送到 php 函数（我可以通过 myurl.com/dashboard/post_id 完成），但我想通过 javascript 来完成。

这是我到目前为止所拥有的（不是很多）：

```
<script type="text/javascript">
function vote(type,post_id) 
        {
        }
</script> 
```

进而：

onclick="投票('up','');"

我想发送 post_id （使用变量 TYPE: ）

myurl.com/dashboard/vote/$post_id

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:25:29.280

**客户端**（*使用 jquery*）

* * *

```
$(document).ready(function(){
    $('#vote').click(function(e){
        e.preventDefault();
        post_id = _________ (retrieve the post_id from the target here)
        $.ajax({

            url: 'mysite/controller/method/', /*put your url */
            type: 'POST',
            data: { TYPE: post_id},                
            success: function(data){alert('success')},
            error: function(){alert('request could not be completed')}

        })
    })
}) 
```

**服务器端**

* * *

```
public function getVote(){

            $vote = $_POST['vote'];
            //Do rest of the coding.

    } 
```

# android - Xml 响应检索问题

> ID：12559609
> 
> 赞同：0
> 
> 时间：2012-09-24T06:00:36.110
> 
> 标签：android, eclipse, eclipse-plugin

我是 android 开发和 eclipse Juno 版本的新手。我一直在尝试 xml 解析。在调试执行行以检索 xml 时，最终出现以下错误。

```
// defaultHttpClient
DefaultHttpClient httpClient = new DefaultHttpClient();
HttpPost httpPost = new HttpPost(url);
//Below Line Shows the Source not found error.
HttpResponse httpResponse = httpClient.execute(httpPost); 
```

错误：

```
Class File Editor
Source not found
The source attachment does not contain the source for the file DefaultRequestDirector.class.

You can change the source attachment by clicking Change Attached source below:

Change Attached Source...

The source attachment does not contain the source for the file DefaultRequestDirector.class. 
```

但我可以在 Android 4.1==>org.apache.http.impl.client 包中看到 DefaultRequestDirector.class。尝试使用 Cmd+Shift+O 组合键，还尝试了 eclipse 中的“清洁”选项，但最终遇到了同样的问题。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:10:11.603

试试下面的代码......看看它是否有帮助：

```
HttpClient httpclient = new DefaultHttpClient();
HttpConnectionParams.setConnectionTimeout(httpclient.getParams(), 10000);
HttpPost httppost = new HttpPost(url);
HttpResponse response = httpclient.execute(httppost); 
```

# android - JSONArray 无法转换为 JSONObject 错误

> ID：12559612
> 
> 赞同：6
> 
> 时间：2012-09-24T06:00:44.267
> 
> 标签：android, json, parsing

获取 json 数据时出现错误：

> JSONArray 无法转换为 JSONObject

json生成代码：

```
JSONObject parent = new JSONObject();
DatabaseHandler dbh = new DatabaseHandler(getApplicationContext());  
            for(int i=0; i < allEds.size(); i++){
                String edsText = allEds.get(i).getText().toString();                                           
               //spinner = allSpns.get(i);
               String spinSelected=allSpns.get(i).getSelectedItem().toString();                  
               try
                {
                   JSONObject json = new JSONObject();          
                   json.put("Id", i);
                   json.put("FieldName", edsText);
                   json.put("FieldType",spinSelected);
                   parent.accumulate("data", json);

                }
                catch (JSONException e)
                {
                        // TODO Auto-generated catch block
                        e.printStackTrace();
                }                   

            }
Generated json is   
            {"data":
[{"FieldType":"Account Number","FieldName":"r","Id":0},
  {"FieldType":"Net      Banking Id","FieldName":"tt","Id":1}
 ]}
code for json read
------------------
JSONObject jsonObj = new JSONObject(folderStructure);
        JSONObject data = jsonObj.getJSONObject("data"); 
        String id = data.getString("Id"); 
        String value = data.getString("FieldName"); 
        Log.d("Item name: ", value); 
```

在阅读上面的 json 时出现错误代码有什么问题吗？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-24T06:08:05.150

改变

```
JSONObject data = jsonObj.getJSONObject("data"); 
```

到

```
JSONArray data = jsonObj.getJSONArray("data"); 
```

因为数据的值是 JsonArray 而不是 JSONObject。

要获取单独的 Id 和字段名称，您应该遍历这个 JSONArray，如下所示：

```
for(int i=0; i<data.length(); i++)
{
     JSONObject obj=data.getJSONObject(i);
     String id = obj.getString("Id"); 
        String value = obj.getString("FieldName"); 
        Log.d("Item name: ", value);
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2017-10-11T07:04:23.497

使用此方法：

```
private void showJSON(String response) {
        list = new ArrayList<>();
        String name = null;
        try {

            JSONArray jsonObject = new JSONArray(response);
            for(int i = 0; i < jsonObject.length(); i++) {
                JSONObject obj = jsonObject.getJSONObject(i);
                //store your variable
                list.add(obj.getString("Name"));
            }
//            JSONArray result = jsonObject.getJSONArray("");
//            JSONObject collegeData = result.getJSONObject(0);
//            list.add(jsonObject.getString(collegeData.getString("Name")));
            Toast.makeText(getActivity(), name, Toast.LENGTH_LONG).show();
            city_list.addAll(list);
            adapter.notifyDataSetChanged();
        } catch (JSONException e) {
            e.printStackTrace();
            // Toast.makeText(getApplicationContext(), response, Toast.LENGTH_LONG).show();
        }

    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T06:10:25.853

`data`是一个数组，而不是一个对象：

```
JSONArray data = jsonObj.getJSONArray("data"); 
```

# java - Java - 克隆 getter 方法中的属性

> ID：12559614
> 
> 赞同：8
> 
> 时间：2012-09-24T06:00:59.470
> 
> 标签：java, coding-style, clone, getter-setter

伙计们，

我正在经历这里提到的 Java 最佳编码实践
[http://viralpatel.net/blogs/most-useful-java-best-practice-quotes-java-developers/](http://viralpatel.net/blogs/most-useful-java-best-practice-quotes-java-developers/)

第二句说，

> 引用 2：永远不要公开类的实例字段

我同意这是绝对正确的，但我被困在下面这句话下面几行作者的建议。

他说，

* * *

```
private String[] weekdays = 
    {"Sun", "Mon", "Tue", "Thu", "Fri", "Sat", "Sun"};

public String[] getWeekdays() {
    return weekdays;
} 
```

但是写getter方法并不能完全解决我们的问题。该阵列仍然可以访问。使其不可修改的最佳方法是返回数组的克隆而不是数组本身。因此getter方法将更改为

```
public String[] getWeekdays() {
    return weekdays.clone();
} 
```

* * *

我自己从未`clone()`在 Java 类的任何 getter 方法中使用过。

我想知道（***因为它被提到是一种良好的做法***） - 为什么一个`should use`/`shouldn't use` `clone()`内部吸气剂方法？在哪些情况下？

它是否有资格成为 Java 的良好编码实践？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T06:54:13.273

*Joshua Bloch在***“Effective Java”**一书中对此进行了讨论。有一个部分称为*“在需要时制作防御性副本”*（第 2 版第 39 节）。

 **[https://www.informit.com/articles/article.aspx?p=31551&seqNum=2](https://www.informit.com/articles/article.aspx?p=31551&seqNum=2)

一本讨论此类主题的好书。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T06:08:37.550

```
private String[] weekdays =      
    {"Sun", "Mon", "Tue", "Thu", "Fri", "Sat", "Sun"};  

public String[] getWeekdays() 
{     
    return weekdays; 
} 
```

如果不使用`clone`方法，这个类的用户可以做很多不道德的事情：

1.  改变天数，
2.  更改日期的名称，
3.  ...

但是，返回一个克隆不会影响类和它的数据。因此，班级的其他用户不会受到影响。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-24T06:27:09.390

如果你想保证整个对象图（包含数组）是不可变的，你可以继续`clone() or System.arraycopy()`。`get()`这通常在公开数组的 API 是*公共*的并且对数组中的值有限制或当对象被多个线程访问时完成。在这种情况下，不变性很重要。

假设您有一个具有方法的`GroceryStore`对象。`getItemsSortedByPrice()`您将项目保留在按价格维护订单的数组中，但如果您返回此数组，客户端代码可能会修改它并破坏对象的（内部）不变量。

如果这是内部代码（即）不是公共 API 的一部分，并且您知道您不会修改数组，那么克隆/应对可能没有必要，因为它会损害性能而没有真正的好处。

一切都取决于上下文。

数组只是对象，适用于普通对象的所有（不）可变性规则/实践也适用于数组。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T06:48:23.347

我认为您的用例与建议的 Java 代码不匹配。该示例适用于与您不同的用例。

最终的数组对我来说听起来像[Enums](http://docs.oracle.com/javase/tutorial/java/javaOO/enum.html)，我认为这更符合您的要求。**

# android - 如何在表面视图上绘制 nXn 度量或网格

> ID：12559621
> 
> 赞同：2
> 
> 时间：2012-09-24T06:02:11.840
> 
> 标签：android, bitmap, surfaceview, android-canvas

如何在曲面视图上绘制 nXn 度量。我的表面视图有一个具有缩放效果和平移（拖动）的图像。那么如何在该 Surface View 上绘制 nXn 度量。请帮助不要从任何教程中获得任何想法。

# c# - 如何将货币金额转换为单词中的货币

> ID：12559623
> 
> 赞同：1
> 
> 时间：2012-09-24T06:02:19.780
> 
> 标签：c#, .net, algorithm, currency

> **可能重复：**
> [将数字转换为单词 C#](https://stackoverflow.com/questions/2729752/converting-numbers-in-to-words-c-sharp)

我需要一种算法将货币金额转换为文字货币。主要要求是有一个通用算法，因此它将文化信息作为参数以及实际数量，并相应地以文字显示数量，反之亦然。

例如，

*   输入：1157259.50（林吉特 - 马来西亚货币）
*   输出：一百万一十五万七千二百五十九令吉和五十美分

# php - 正则表达式在同一个正则表达式中包含一个字符串但不包含其他字符串

> ID：12559625
> 
> 赞同：0
> 
> 时间：2012-09-24T06:02:26.590
> 
> 标签：php, regex

所以我使用目录迭代器来获取所有这样的php文件：

```
$file_list = new RegexIterator($iterator_instance, '/^.+\.php$/'); 
```

现在`$file_list`包含所有具有`.php`扩展名的文件。但是，我希望能够获取所有 php 文件，但**跳过**带有名称**视图**的文件夹，但我不确定如何编写这样的正则表达式，因为我不擅长它。

我只想获取所有`.php`文件，而不是从名为**views**的文件夹中获取。

* * *

**更新：**

```
$dir_iterator = new RecursiveDirectoryIterator($path);
$iterator = new RecursiveIteratorIterator($dir_iterator);
$file_list = new RegexIterator($iterator, '/^.+\.php$/');
// foreach stuff now 
```

在这里，我只想从返回的文件/文件夹名称中跳过名为**views**的文件夹，如果也可以修改上面的正则表达式来解决这个问题，我会很高兴。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T06:04:58.170

你可以使用`CallbackFilterIterator`（PHP 5.4）

```
// Assuming $file_list is based on a FilesystemIterator
$iter = new CallbackFilterIterator($file_list, function($current) {
    return strpos('/views/', $current->getReaPath()) === false;
}); 
```

对于 PHP 5.3：

```
class DirectoryFilter extends FilterIterator {
    public function accept() {
        $current = $this->getInnerIterator()->current();
        return strpos('/views/', $current->getReaPath()) === false;
    }
}
$iter = new DirectoryFilter($file_list); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-24T06:13:46.523

您可以使用此正则表达式：

```
'%^(?!.*[\\\\/]views?[\\\\/]).+\.php$%' 
```

**解释：**

```
^         # Start of string
(?!       # Assert that it's impossible to match the following here:
 .*       #  any number of characters
 [\\\\/]  #  a path delimiter (backslash or forward slash)
 views?   #  followed by view or views
 [\\\\/]  #  followed by a path delimiter
)         # End of lookahead assertion
.+        # Match one or more characters
\.php     # Match .php
$         # End of string 
```

# cassandra - Cassandra 读/写性能

> ID：12559631
> 
> 赞同：2
> 
> 时间：2012-09-24T06:03:02.737
> 
> 标签：cassandra

我在不同的硬件上测试 Cassandra 已经有一段时间了。

1.  首先我有 2 个 CPU 和 6 GB RAM
2.  然后我更改为 16 个 CPU 和 16 GB RAM（其中只有 6 GB 可供我的测试使用）。

我在新机器上遇到了一件奇怪的事情；写入速度更快，但读取速度比旧机器慢两倍。

有谁知道为什么会发生这种情况？

此外，如果我尝试同时运行选择和更新，则选择比只有选择查询的情况更快。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T13:56:21.697

磁盘之间有什么区别？它们都是7200 RPM吗？新机器的磁盘要大得多吗？由于查找时间，磁盘的大小确实会减慢您的读取速度。大多数人运行最大 1T 并且听到一些运行 500G 磁盘。我们计划使用 1T 磁盘，但仅使用 500G 和 cassandra 之上的 playOrm 开源项目（您也可以通过拥有 1T 磁盘来优化读取，但只在内圈上写入，因此速度更快）。

另一种情况听起来是特定于测试用例的......选择可能读取相同的更新值，在这种情况下它可能会从内存中获取它们......不太确定那里。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-06-06T22:37:03.597

Check if the garbage collection is taking more time. When you increased memory and if you are using the default settings for the JVM then your JVM size has increased and might be its spending more time doing garbage collection

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-06-06T19:30:16.530

我同意 Dean 的观点，你有测试用例特定的行检索可能会改变你的请求结果。执行一些命中数据库不同部分的检索:)

SSD 与硬盘性能在 cassandra 中不作解释。更喜欢 SSD 7200 RPM！

# java - 在 selenium webdriver 中导航回来时，Firefox 浏览器无法恢复页面

> ID：12559633
> 
> 赞同：1
> 
> 时间：2012-09-24T06:03:09.907
> 
> 标签：java, selenium-webdriver

我在 Firefox 中使用 selenium webdriver。

driver.navigate().back();

我浏览页面，当我浏览页面时，出现以下异常。在浏览器中，它说文档已过期。

org.openqa.selenium.StaleElementReferenceException：在缓存中找不到元素 - 页面可能在查找后已更改命令持续时间或超时：23 毫秒有关此错误的文档，请访问：[http ://seleniumhq.org/exceptions /stale_element_reference.html](http://seleniumhq.org/exceptions/stale_element_reference.html) 构建信息：版本：'2.21.0'，修订：'16552'，时间：'2012-04-11 19:09:00' 系统信息：os.name：'Windows 7'，os.arch：'x86' , os.version: '6.1', java.version: '1.6.0_20' 驱动程序信息: driver.version: RemoteWebDriver at sun.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method) at sun.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java :39) 在 org.openqa.selenium.remote.ErrorHandler.createThrowable(ErrorHandler. java:175) 在 org.openqa.selenium.remote.RemoteWebDriver 的 org.openqa.selenium.remote.ErrorHandler.throwIfResponseFailed(ErrorHandler.java:128)。在 org.openqa.selenium.remote.RemoteWebElement.getText(RemoteWebElement.java:141) 在 run.DriverImpl 在 org.openqa.selenium.remote.RemoteWebElement.execute(RemoteWebElement.java:245) 处执行(RemoteWebDriver.java:459) .startScrapingFromThePage(DriverImpl.java:48) at ui.SAFSPUserInterface.startButtonClicked(SAFSPUserInterface.java:311) at ui.SAFSPUserInterface$1.actionPerformed(SAFSPUserInterface.java:62) at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:1995 ) 在 javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2318) 在 javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:387) 在 javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:242) 在 javax .swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:236) 在 java。awt.Component.processMouseEvent(Component.java:6263) at javax.swing.JComponent.processMouseEvent(JComponent.java:3267) at java.awt.Component.processEvent(Component.java:6028) at java.awt.Container.processEvent (Container.java:2041) 在 java.awt.Component.dispatchEventImpl(Component.java:4630) 在 java.awt.Container.dispatchEventImpl(Container.java:2099) 在 java.awt.Component.dispatchEvent(Component.java: 4460) 在 java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4574) 在 java.awt.LightweightDispatcher.processMouseEvent(Container.java:4238) 在 java.awt.LightweightDispatcher.dispatchEvent(Container.java:4168) 在 java. awt.Container.dispatchEventImpl(Container.java:2085) 在 java.awt.Window.dispatchEventImpl(Window.java:2478) 在 java.awt.Component.dispatchEvent(Component.java:4460) 在 java.awt.EventQueue.dispatchEvent(EventQueue.java:599) at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:269) at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:184) at java.awt.EventDispatchThread.pumpEventsForHierarchy (EventDispatchThread.java:174) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java: 122)174) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:122)174) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:169) 在 java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:161) 在 java.awt.EventDispatchThread.run(EventDispatchThread.java:122)

该页面包含 Ajax 和 javascript 调用。任何人都可以帮助我吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T10:33:39.780

首先，您粘贴的异常与向后导航无关。您有一个导致异常的陈旧元素的句柄。当您对页面中的 HTML 元素有 WebElement 引用时，会发生 StaleElementException，该 HTML 元素可能由于页面上的交互而被删除/丢失。所以你的 WebElement 是不存在的 DOM 元素的代理是无效的。

当导航回最初通过 POST 请求加载的页面时，webdriver中也存在这个[已知问题。](http://code.google.com/p/selenium/issues/detail?id=3611)因此，您期望的页面可能尚未实际加载。解决firefox中回发警告的方法是重新发出navigation().back()，即回退两次。

# java - Java 自动装箱规则

> ID：12559634
> 
> 赞同：10
> 
> 时间：2012-09-24T06:03:10.100
> 
> 标签：java, autoboxing

我是一个java新手，对下面的例子很困惑。可以认为“==”符号将比较整数之间的值和来自int的*“自动装箱”*整数之间的值，并比较整数之间的引用地址吗？

双打和0/0呢？

```
import edu.princeton.cs.introcs.*;

public class Autoboxing {

    public static void cmp(Integer first, Integer second) {
        if (first < second)
            StdOut.printf("%d < %d\n", first, second);
        else if (first == second)
            StdOut.printf("%d == %d\n", first, second);
        else if (first > second)
            StdOut.printf("%d > %d\n", first, second);
        else
            StdOut.printf("%d and %d are incomparable\n", first, second);
    }

    public static void main(String[] args) {
        cmp(new Integer(42), 43);
        cmp(new Integer(42), new Integer(42));
        cmp(43, 43);
        cmp(142, 142);

        Integer a0 = 1000;
        int b0 = 1000;
        Integer c0 = 1000;
        StdOut.println("a0==b0?" + (a0==b0));
        StdOut.println("a0==c0?" + (a0==c0));
        StdOut.println("b0==c0?" + (b0==c0));

        double x1 = 0.0, y1 = -0.0;
        Double a1 = x1, b1 = y1;
        StdOut.println(x1 == y1);
        StdOut.println(a1.equals(b1));

        double x2 = 0.0/0.0, y2 = 0.0/0.0;
        Double a2 = x2, b2 = y2;
        StdOut.println(x2 != y2);
        StdOut.println(!a2.equals(b2));
    }

} 
```

结果是：

```
42 < 43
42 and 42 are incomparable
43 == 43
142 and 142 are incomparable
=====
a0==b0?true
a0==c0?false
b0==c0?true
=====
true
false
=====
true
false 
```

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-24T06:36:42.323

`arithmetic operators`当,`comparison operators`出现时会发生拆箱。

例如：

```
Integer a = 10;
a = a+10; //1.unboxing a to int 2.calculate a+10 3.boxing 20 to Integer.
System.out.print(a > 10); //1.unboxing a to int 2\. compare 
```

但是什么时候`==`出现，就看情况了。

如果拳击类型出现在 上`both side`，它会比较`the reference`。但是如果基础类型出现在 上`one side`，并且另一边是拳击类型，则拳击类型将`unboxing`成为基本类型。

例如：

```
Integer a = new Integer(129);
Integer b = new Integer(129);
System.out.println(a == b); // compare reference return false
System.out.println(a == 129); // a will unboxing and compare 129 == 129 return true 
```

PS：在`Java.lang.Integer` 缓存中支持 JLS 要求的 -128 和 127（含）之间的值的自动装箱的对象标识语义。 [查看源代码](http://hg.openjdk.java.net/jdk7/jdk7/jdk/diff/4c3f752993a5/src/share/classes/java/lang/Integer.java)

所以：

```
Integer a = 127;
Integer b = 127; //cached, the same as b a==b return ture

Integer c = 129;
Integer d = 129; // not cached, c==d return false 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-24T06:07:24.443

这是[自动装箱和拆箱](http://docs.oracle.com/javase/tutorial/java/data/autoboxing.html)教程。

你也可以通过[JLS#5.1.7。拳击转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.7)和[JLS#5.1.8。拆箱转换](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.8)

`0.0 / 0.0`是你至少在数学`NaN`上无法比较。`infinity`我想这就是为什么这种比较不起作用的原因。

来自[JLS #4.2.3。浮点类型、格式和值](http://docs.oracle.com/javase/specs/jls/se7/html/jls-4.html#jls-4.2.3)

> 正零和负零比较相等；因此表达式 0.0==-0.0 的结果为真，而 0.0>-0.0 的结果为假
> 
> NaN 是无序的，所以：
> 
> *   如果一个或两个操作数都是 NaN，则数值比较运算符 <、<=、> 和 >= 返回 false（第 15.20.1 节）。
>     
>     
> *   如果任一操作数为 NaN，则相等运算符 == 返回 false。
>     
>     
> *   特别是，如果 x 或 y 为 NaN，则 (x=y) 将为假。
>     
>     
> *   如果任一操作数为 NaN（第 15.21.1 节），则不等式运算符 != 返回 true。
>     
>     
> *   特别是，当且仅当 x 为 NaN 时 x!=x 为真。

如果您检查[Double#equals](http://docs.oracle.com/javase/6/docs/api/java/lang/Double.html#equals%28java.lang.Object%29)方法，它有两个例外

> 也有值 true。但是，有两个例外：
> 
> *   如果 d1 和 d2 都表示 Double.NaN，则 equals 方法返回 true，即使 Double.NaN==Double.NaN 的值为 false。
>     
>     
> *   如果 d1 表示 +0.0 而 d2 表示 -0.0，或者反之亦然，则相等测试的值为 false，即使 +0.0==-0.0 的值为 true。

**此定义允许哈希表正常运行。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T06:09:15.930

`==`如果变量是原始类型，则只能用于检查变量是否相等。对于对象变量，`==`用于比较对象的引用。如果要比较对象的值，请使用`.equals()`方法。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T06:25:58.377

我不建议将盒装整数与 == 进行比较，因为它仅适用于某些值。

# c# - 如何使用 Rhino 模拟单元测试静态构造函数

> ID：12559637
> 
> 赞同：2
> 
> 时间：2012-09-24T06:03:26.490
> 
> 标签：c#, testing, rhino-mocks

我正在使用 Visual Studio 2012 和 MSTest 进行单元测试。为了生成模拟，我使用免费的 Rhino Mocks。但是我无法为静态构造函数编写单元测试用例。我正在执行操作，例如使用静态构造函数初始化 WCF 服务。有人可以建议我如何为静态构造函数编写单元测试或对其进行一些重构吗？

示例代码：

```
static PublisherSubscriber()
{ 
    _isServiceInitializing = true;
    Initialize();
    _mefInitializer = MEFInitializer.GetInstance();
    _subscriptionManagerInstance = SubscriptionManager.GetInstance();
    requestManagerInstance = RequestManager.GetInstance();
} 
```

在上面的代码中，订阅管理器和请求管理器在初始化时初始化数据存储。最终的要求是模拟这种无法注入静态构造函数的依赖关系，或者一种重构代码以使其可单元测试的方法

# javascript - 不同领域的重载功能后自动对焦

> ID：12559642
> 
> 赞同：0
> 
> 时间：2012-09-24T06:04:02.430
> 
> 标签：javascript, jquery, reload, autofocus

我有一个表格，例如： Country1 - State1 - City1 - （三个都是下拉菜单）

这些是具有唯一 ID 的 3 个不同字段，我可以添加更多行，这将给我 Country2 - State2 - City2

如果我选择国家，我将重新加载页面以加载 state1（或 state2 one）下拉列表下的状态列表，依此类推..（由 jquery 完成）。现在，我希望每当我选择 country1 或 2 时，在重新加载页面后，它应该分别关注 state1 或 2 或至少分别关注 country1 或 2。

我不知道，这是否可能..但我需要这个:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:33:59.310

我建议您使用 AJAX 重新加载页面的某些部分。重新加载整个页面会浪费服务器端和客户端的资源。当你已经加载了 DOM 时，只刷新你想从服务器获取的部分是有意义的。

使用 jQuery，你可以想出类似的东西：

```
$.ajax({
    url: 'http://somedomain.tld/your_script_url',
    data: {
        country:$('#country_input').val(),
    },
    dataType:'json',
    type:'POST'
}); 
```

URL 应返回文本、HTML 或 JSON。`dataType`您应该根据返回的内容修改值。

此外，`type`应该是`GET`OR `POST`。

您可以使用`$("#your_id").focus();`来关注一个元素。

这不仅可以为您节省大量服务器端的处理，还可以帮助您编写一个通用函数来为页面上的每个选择元素执行此任务。

# sql-server-2008 - T-SQL 将列填充到另一列

> ID：12559643
> 
> 赞同：0
> 
> 时间：2012-09-24T06:04:05.523
> 
> 标签：sql-server-2008, tsql

我有两列（`A, B`）像这样......

```
A           B
12_18_19    20 
```

我想在这样的同一`SELECT`语句中添加第三列（C）......

```
C
12_18_20_19 
```

换句话说，我的列`A`由“_”分隔，因此 column 的倒数第二个索引`A`应该是 column `B`。

如果可能的话，我会在这样的同`SELECT`一条语句中完成所有这些......

```
A         B    C
12_18_19  20   12_18_20_19 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T06:05:49.620

怎么样：

```
SELECT 
    A, B, 
    C = SUBSTRING(A, 1, LEN(A) - CHARINDEX('_', REVERSE(A))) + 
        '_' + B + 
        SUBSTRING(A, LEN(A) + 1 - CHARINDEX('_', REVERSE(A)), 999)
FROM 
    dbo.YourTable 
```

有点牵扯，主要也是因为T-SQL没有`LASTCHARINDEX()`函数。

第一个表达式将`A`列解析到最后一个`_`分隔符，并获取之前的所有内容。然后它附加 a`_`和 column `B`，然后从最后一个分隔符*之后*抓取所有内容并将其附加。`_``A`

正如 Andriy M 在他的评论中正确提到的那样：如果`A`or `B`are `NULL`，那么整个结果也是 NULL。如果列是空字符串，或者`A`不包含任何`_`字符，您可能会收到错误（因为解析将失败）或[意外的混乱结果](http://sqlfiddle.com/#!3/d41d8/4604)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:55:10.397

在 Andriy 的分析之后进行编辑以处理更多情况。

尽管@Marc_s 的回答有效，但这是一个稍微好一点的解决方案

```
SELECT A,B, stuff(a+'  ', len(A)+2- charindex('_',reverse(A)+'_') 
,0, case when A='' then B ELSE B+'_' end) C 
FROM 
(SELECT '12_18_19' A, '20' B) t 
```

用您的表格替换最后一行

# linux - 使用 for 循环在每个单词之前和之后添加 3 个星号

> ID：12559648
> 
> 赞同：1
> 
> 时间：2012-09-24T06:04:25.130
> 
> 标签：linux, bash

我有一个无法完成此脚本的问题。这是有效的脚本的一部分。这也是一个 linux bash 脚本。

```
echo -n "Please enter file "
read file
if [ -f $file ]
then
        echo "$file found."
else
        echo "$file not found."
fi 
```

使用“for”循环编写一个脚本，该循环打印文件的每个单词，每个单词前后都带有 3 个星号 (*)。该脚本应提示用户输入文件名，并且必须验证文件是否存在以及该文件是否为常规文本文件。
**提示：**`for`在循环中使用 cat、read 和 file 命令以及 if 语句。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:24:04.200

您可以使用此脚本：

```
echo -n "Please enter file "
read file
if [ -f $file ]
then
        echo "$file found."
        if [[ $(file -b $file) == 'ASCII text' ]]
         then
         for word in $(cat $file)
          do echo "***$word***"
         done
        else
         echo "$file is not a regular text file"
        fi
else
        echo "$file not found."
fi 
```

使用此输入文件：

```
word1 word2
word3 
```

这个脚本给出：

```
Please enter file test.inp
test.inp found.
***word1***
***word2***
***word3*** 
```

# android - BalloonItemizedOverlay 自定义视图框架布局在 android 中有 2 个选项卡？

> ID：12559650
> 
> 赞同：1
> 
> 时间：2012-09-24T06:04:53.447
> 
> 标签：android, google-maps, tabs

我正在创建一个应用程序，其中我使用“地图活动”显示了一张谷歌地图，然后根据我的需要动态标记一些地理点。现在 ontap 的 pin（标记）我已经显示了一些我需要的信息，直到一切正常。但现在的要求就像自定义布局打开的 pin 的 ontap，它有 2 个选项卡 - 1 个显示信息，2 个有按钮。我不怎么在气球覆盖视图中做到这一点？

# xcode - 删除xcode中未使用的插座

> ID：12559653
> 
> 赞同：6
> 
> 时间：2012-09-24T06:05:02.773
> 
> 标签：xcode, outlet

在 Xcode 中，我创建了一个插座并将其连接起来。然后我通过单击连接检查器中的交叉删除连接。但是，未使用的插座总是出现在那里。如何删除未使用的插座。（我已经删除了.m文件中的代码）

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-07-10T14:27:44.877

这很简单，只需单击删除按钮

```
Connections Inspector panel 
```

![点击 X](../Images/abec1bd94f58ffba064dbeb0070bed05.png)

# android - 成功时会打印 Toast 错误消息

> ID：12559662
> 
> 赞同：0
> 
> 时间：2012-09-24T06:05:44.950
> 
> 标签：android

我的代码如下所示。如果登录成功或 15 秒未登录，它总是显示请求超时消息。如果提交成功，则始终打印“请求超时”Toast 消息。如何停止打印“请求超时”吐司？它应该仅在应用程序过程不成功 15 秒时打印。

```
import android.widget.TextView;
import android.widget.Toast;

     public class AgAppTransPayToLinkAccount extends Activity {

    TextView lblPTLWelcomeToPayToLinkAccountPage;
    TextView lblPTLPinno;
    TextView lblPTLAmount;

    EditText txtPTLpinno;
    EditText txtPTLamount;

    Button btnPTLsubmit;
    Button clearPTLButton;
    Button btnPTLgoback;

  boolean value=true;

    String sms;
    ProgressDialog PayToLinkAccountProgressDialog = null;
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.agapptranspaytolinkaccount);
        sms=LoginScreen.item.toString();

        lblPTLPinno = (TextView) findViewById(R.id.lblPTLPinno);
        lblPTLPinno.setText("PIN Number :" );

        txtPTLpinno=(EditText) findViewById(R.id.txtPTLpinno);

        lblPTLAmount = (TextView) findViewById(R.id.lblPTLAmount);
        lblPTLAmount.setText("Amount :" );

        txtPTLamount=(EditText) findViewById(R.id.txtPTLamount);

        btnPTLsubmit =(Button) findViewById(R.id.btnPTLsubmit);

     btnPTLsubmit.setTextColor(getResources().getColor(R.color.text_color_blue));

        btnPTLsubmit.setOnClickListener(new OnClickListener()
        {
        public void onClick(View v)

        {
            showProgress();
            submitPTLA();

        }

  });

    clearPTLButton =(Button) findViewById(R.id.clearPTLButton);

        clearPTLButton.setTextColor(getResources().getColor(R.color.text_color_blue));

    clearPTLButton.setOnClickListener(new OnClickListener()
        {
        public void onClick(View v)

        {

                txtPTLpinno.setText("");
                txtPTLamount.setText("");

        }

  });

    btnPTLgoback=(Button) findViewById(R.id.btnPTLgoback);

       btnPTLgoback.setTextColor(getResources().getColor(R.color.text_color_blue));

    btnPTLgoback.setOnClickListener(new OnClickListener()
            {
            public void onClick(View v)

            {
                finish();

            }
            });

         }

    private void submitPTLA() {
         String message;
        String mobilenumber= LoginScreen.smsmobileno;

         if (txtPTLpinno.getTextSize()==0 ||txtPTLamount.getTextSize()==0)
         {

             AlertDialog.Builder altDialog= new AlertDialog.Builder(this);
             altDialog.setMessage("Please Enter Complete Information!");

         }
         else
         {

             if (( sms.compareTo("SMS")==0))
                 {
                 SmsManager smsmanager = SmsManager.getDefault();

      message="AGLIA"+AgAppHelperMethods.varMobileNo+AgAppHelperMethods.varMobileNo+
       txtPTLpinno.g
      etText().toString()+txtPTLamount.getText().toString();
     smsmanager.sendTextMessage(mobilenumber, null, message, null,null);
         }
             else
            { 

             Intent j = new   

         Intent(AgAppTransPayToLinkAccount.this,AgAppTransPTLAResponse.class);

             Bundle bundle = new Bundle();

                bundle.putString("pinno",txtPTLpinno.getText().toString());

                bundle.putString("amount",txtPTLamount.getText().toString());

                j.putExtras(bundle);

             startActivity(j);
        value=false;
             PayToLinkAccountProgressDialog.dismiss();

        }

      }

      }
    private void showProgress()
    {    

        PayToLinkAccountProgressDialog =   
     ProgressDialog.show(AgAppTransPayToLinkAccount.this,null, "Processing please 
       wait...", true); 
        if (PayToLinkAccountProgressDialog != null) {
            try
            {
            Handler handler = new Handler();
            handler.postDelayed(new Runnable()
            {
            @Override
            public void run()
            {
                PayToLinkAccountProgressDialog.dismiss();
    if(value)
                {
                Toast.makeText(AgAppTransPayToLinkAccount.this, "Request   
     TimeOut " , Toast.LENGTH_SHORT).show();
     }
            }
            }, 15000); // <--- here is the time adjustment.
            }
            catch (Exception e)
            {
            }
            }
    }
      } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:26:20.363

创建一个布尔变量并在成功提交时设置其值。然后在 showProgress() 中读取 run 方法中的布尔值

```
PayToLinkAccountProgressDialog.dismiss();
if(value)
{
 Toast.makeText(AgAppTransPayToLinkAccount.this, "Request    TimeOut " ,Toast.LENGTH_SHORT).show();
} 
```

# iphone - iPhone：只有月份和年份字段的日期选择器

> ID：12559665
> 
> 赞同：1
> 
> 时间：2012-09-24T06:05:47.737
> 
> 标签：iphone, datepicker

我想显示一个日期选择器，用户将只输入信用卡到期日的月份和年份。是否有任何选择器只显示月份和年份选项？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:09:04.413

您可能需要制作自己的选择器。但是，您不必将其子类化或其他任何东西；只需使用通用 UIPickerView 并从您的`UIPickerViewDelegate/UIPickerViewDataSource`方法中返回适当的值。

或者这是获得相同效果的解决方案。要使用此代码片段，您应该在“Indentity 检查器”的“自定义类”中的 nib 文件中将 UIPickerView 替换为 CDatePickerViewEx。

.h 文件

```
#import <UIKit/UIKit.h>

@interface CDatePickerViewEx : UIPickerView <UIPickerViewDelegate, UIPickerViewDataSource> 

@property (nonatomic, strong, readonly) NSDate *date;
-(void)selectToday;

@end 
```

.m 文件

```
#import "CDatePickerViewEx.h"

// Identifiers of components

    #define MONTH ( 0 )
    #define YEAR ( 1 )

// Identifies for component views

    #define LABEL_TAG 43

    @interface CDatePickerViewEx()

    @property (nonatomic, strong) NSIndexPath *todayIndexPath;
    @property (nonatomic, strong) NSArray *months;
    @property (nonatomic, strong) NSArray *years;

    -(NSArray *)nameOfYears;
    -(NSArray *)nameOfMonths;
    -(CGFloat)componentWidth;

    -(UILabel *)labelForComponent:(NSInteger)component selected:(BOOL)selected;
    -(NSString *)titleForRow:(NSInteger)row forComponent:(NSInteger)component;
    -(NSIndexPath *)todayPath;
    -(NSInteger)bigRowMonthCount;
    -(NSInteger)bigRowYearCount;
    -(NSString *)currentMonthName;
    -(NSString *)currentYearName;

@end 
```

# visual-studio-2010 - 对于两个不同的系统，JIT 生成的机器代码是否相同？

> ID：12559669
> 
> 赞同：3
> 
> 时间：2012-09-24T06:06:28.063
> 
> 标签：visual-studio-2010, jit, machine-code

我是 C# 初学者，
JIT 在运行时生成的机器代码对于具有完全相同配置的两个不同系统是否相同？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:57:11.893

我找到了一篇关于你的问题[的好文章。](http://24x7aspnet.blogspot.com/2009/10/just-in-time-jit-compiler-in.html)它相当长，所以我提取了最重要的部分：

*   编译可以针对目标 CPU 和应用程序运行的操作系统模型进行优化。例如，当 JIT 检测到 CPU 支持它们时，它可以选择 SSE2 CPU 指令。
*   系统能够收集有关程序在其所在环境中实际运行情况的统计信息，并且可以重新排列和重新编译以获得最佳性能。

因此，事实上，反汇编可能不仅跨平台不同，而且在同一系统上运行时也不同。

# java - PrimeFaces AutoComplete 更改默认大小

> ID：12559670
> 
> 赞同：6
> 
> 时间：2012-09-24T06:06:30.610
> 
> 标签：java, jsf-2, primefaces

我正在尝试更改自动完成的大小（primefaces 3.3），我尝试了以下所有选项，但大小保持不变。

```
size="600"
Style="width:600px;"
StyleClass > css file with width:600px; 
```

但它们都没有增加尺寸，所以我该怎么做。

注意：我注意到，如果我指定（宽度 > PanelGrid 大小），那么面板网格大小会自动更改，但 autoComplete 仍然是默认大小。

更新：我的自动完成代码

```
<p:autoComplete id="autoTest" value="#{testMB.selectedTest}" 
completeMethod="#{testMB.completeTest}" var="test" 
itemLabel="#{test.name}" itemValue="#{test}" converter="#{testConverter}"
forceSelection="TRUE"  queryDelay="1000" multiple="TRUE" size="600" 
process="@this"> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2015-05-05T15:16:35.403

`inputStyle`我通过使用属性更改了 Primefaces 5.2 中自动完成的默认大小。

例子：

```
inputStyle="width: 100px" 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-24T09:21:18.077

只需要改变`size`;

```
 size="30"

    <p:autoComplete id="yourId" value="#{YourBean.value}" completeMethod="#{YurBean.complete}" size="30"/> 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-11T14:08:09.043

要更改 AutoComplete 的大小，您需要为 AutoComplete 覆盖 primefaces 的默认 styleClass。使用 firebug，您可以准确地找出样式类名称。如果您使用萤火虫检查自动完成元素，您可以覆盖样式类，如`.ui-autocomplete-input.ui-inputfield { width : 50px !important;
}`

!important 在这里被指出坚持高优先级。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-06-10T14:01:28.907

`[multiple]="true"`如果我们使用指令，最重要的是解决方案不起作用。另外这个问题也在primeNg论坛上问过，没有解决办法。

如果您不使用上述`[multiple]="true"`指令，则以下解决方案将起作用。

*   `[style]="{'width':'100%'}" [inputStyle]="{'width':'100%'}"`

*   `class="p-autocomplete"`在样式文件中，您可以将此类定义为 `.p-autocomplete{ width: 100%; }`

请检查所有这些。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-08-28T15:12:10.937

像这样使用：

```
<p:autoComplete 
  ...
  style = "width: 100%"
  inputStyle = "width: 100%" /> 
```

只需将 100% 更改为您需要的像素大小..

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-25T11:48:34.990

我知道的最简单的方法是：在页面中添加样式标签，将此类放入其中：.ui-inputfield 具有此属性：宽度：600px；

但请注意，您将更改页面中的所有输入:)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-29T17:19:00.070

我使用下面的CSS做到了

```
.ui-autocomp .ui-inputfield {
clear: left;
cursor: text;
list-style-type: none;
margin: 0;
min-height: 1px;
overflow: hidden;
width: 250px;
} 
```

只需要确保选择不超过250px，否则关闭图标+额外文本将不可见。

注意：我从 primeface css 文件中得到了这个

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2018-02-14T15:56:25.640

这对我来说可以用 [multiple]="true" 更改 p:autoComplete 的宽度。

首先，使用浏览器检查 Primefaces 生成的 html 和 css 代码，并寻找 p:autoComplete 的样式。就我而言，使用 Primefaces 6.1，样式定义如下：

`.ui-autocomplete-multiple-container.ui-inputfield {...`

然后，以这种方式在样式文件中使用 autoComplete 的 id：

`#myAutoCompleteId .ui-autocomplete-multiple-container.ui-inputfield { width: 330px !important; }`

这样，您可以为每个自动完成获得不同的宽度。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-01-23T15:02:07.247

我知道是很久了，但是！在深入挖掘风格之后，这些在 PF 6.1 的多个自动完成中对我有用：

```
.ui-autocomplete{
width: 100% !important;
}
.ui-autocomplete-input{
width: 100% !important;
}
.ui-autocomplete-multiple {
width: 98% !important;
}
.p-autocomplete {
width: 98% !important;
}
.ui-autocomplete-multiple-container {
width: 100% !important;
} 
```

根据您的需要进行调整。

# c++ - 如何在地图中存储模板对象

> ID：12559677
> 
> 赞同：1
> 
> 时间：2012-09-24T06:07:36.490
> 
> 标签：c++, map

我有模板类

```
template<class T1 ,class T2, class T3>
class server_fd
{
  T1 servport;
  T2 server_ip;
  T3 servobj;
  int local_port;

public:
  server_fd(const T1& servport, const T2& server_ip,const T3 servobj) {
    this->servport=servport;
    this->server_ip=server_ip;
    this->servobj=servobj;   

    cout <<"check \n"<<this->server_ip;
  }
}; 
```

现在我想将这个类的对象存储在地图中，所以我像这样声明地图..

```
 map<int,server_fd* > MapPairList; 
```

在此之后，当我编译我的代码时，它给出了这个错误错误：模板参数 2 无效错误：模板参数 4 无效

但是，如果我不使用模板类，我可以成功定义地图。

有没有其他方法来定义用于存储模板类对象的映射？请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:27:23.770

如果您可以以某种方式抽象对这些类型的访问，您可以让您的模板类继承自抽象基类，而不仅仅是在映射中保留指向基类的指针。

它被称为类型擦除，您可以在此处获取更多信息[类型擦除技术](https://stackoverflow.com/questions/5450159/type-erasure-techniques)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T22:33:39.113

尝试将基类添加到您的模板类：

```
class server_fd_entry {};

template<class T1 ,class T2, class T3>
class server_fd
{
    <snip>
}

...

map<int,server_fd_entry* > MapPairList; 
```

这样，无论模板参数如何，地图都可以存储所有 server_fd 类型。但是，我可以看到这会导致很多向下转换，因此替代方法是确保在声明地图时指定所有模板参数：

```
map<int,server_fd<int,int,int>* > 
```

这样，您只能存储一种特定类型的 server_fd，但如果这就是您所需要的，它可能会更整洁。

# ruby-on-rails - 如何在生产模式下在 Rails 应用程序中实现 CDN？

> ID：12559685
> 
> 赞同：0
> 
> 时间：2012-09-24T06:08:06.317
> 
> 标签：ruby-on-rails, cdn

我的开发服务器中有我的应用程序，现在我计划为应用程序中使用的所有资产实施 CDN。

我怎么能用 Rails 做到这一点？是否有任何可用的 gem 来执行此操作或必须进行任何手动配置？

我尝试用谷歌搜索这个主题，但发现主要针对 Cloud front Heroku 的建议。

**注意：**我在我的服务器中使用 Ngnix，并打算从不同的供应商那里购买 CDN。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T14:11:12.907

找到了解决方案

**实现自定义cdn url的步骤**

1）设置资产路径`config/environment/production.rb`

> config.action_controller.asset_host = "http://cdn.mydomain.com"

2）重命名所有样式和js文件如下图（如果错过这一步，第3步提到的asset_path标签将不起作用）

```
assets/stylesheets/styles.css => assets/stylesheets/styles.css.erb 
```

3) 更新样式表代码如下所示

```
background: url(<%= asset_path "sprite/top-tile.png" %>) repeat-x scroll 0 -77px transparent !important; 
```

**注意：**但请确保在 NGINX 中设置 Access-Control-Allow-Origin "* or cdn url"。只有这样，您才能从 cdn url 访问您的字体系列，因为 Firefox 和 IE 默认情况下不允许这样做。

# jquery - 基于for循环计数器递增表行id

> ID：12559686
> 
> 赞同：0
> 
> 时间：2012-09-24T06:08:20.810
> 
> 标签：jquery, asp.net-mvc-3, html-table

我想通过运行一个循环来创建几行，如下面的代码所示：

```
<table>
    <% for (var i = 0; i <= 2; i++)
       { %>
       <tr id="Row" +"i"> // i want to give unique row ID based on my "i" variable
       <td><%:Html.TextBoxFor(m=>m.ChildData[i].ChildName) %></td>
       </tr>
       <%} %>
</table> 
```

在结果表中，我希望每一行都有一个唯一的 ID：

```
<tr id="Row1">,<tr id="Row2">,<tr id="Row3">, etc. 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:10:28.873

```
<table>
    <% for (var i = 0; i <= 2; i++) { %>
        <tr id="Row<%= i %>"> 
            <td>
                <%= Html.TextBoxFor(m => m.ChildData[i].ChildName) %>
            </td>
       </tr>
    <% } %>
</table> 
```

但是，如果您需要这些 id 来使用 javascript 操作行，那么您真的不需要分配任何 id。例如，jQuery 为您提供了允许您传递选择器的当前索引的函数。例如：

```
$('table tr').each(function(index, row) {
    // build the id, the same way as if you were building it on the server
    var id = 'Row' + (index + 1);

    // get the corresponding textbox that's inside this row
    var textbox = $('input[type="text"]', row);

    ...
}); 
```

# c# - 我应该在重新绑定时使用 Jquery- $.remove() 吗？

> ID：12559696
> 
> 赞同：3
> 
> 时间：2012-09-24T06:09:23.387
> 
> 标签：c#, javascript, jquery, asp.net, html

我有从服务器端生成的 html 表：

```
 DataTable dt2 = new Claims_Service().ASO_MOD_Get_Nulls();
           myGridView.DataSource = dt2;
           myGridView.DataBind(); 
```

该表有行，每行都有一个按钮。

在客户端我写：

```
 $(".myGridView").on('click', '.myButton', function ()
        {
          ...
        } 
```

现在假设我需要在服务器端重新绑定。（重新绑定 === 完整回发并重新生成页面）

我应该在重新绑定之前使用 jQuery`remove`函数来释放*事件并防止内存泄漏吗？*

另外，如果我写的话，你的答案会不会有所不同：

```
$(".myGridView .myButton").on('click',function () 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:16:22.620

当您通过完整的 POST 或 GET 请求重新加载页面时，无需删除处理程序。在任何情况下，[remove()](http://api.jquery.com/remove/)都会从 DOM 中移除元素，而不是简单地移除事件处理程序。要删除要使用的事件处理程序[off()](http://api.jquery.com/off/)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:16:55.443

如果这样写：

```
$(".myGridView").on('click', '.myButton', function () { /* your code */ }); 
```

内存泄漏不是问题，因为您在 dom 气泡上对所有“.myButton”事件进行模式匹配。

尽管

```
$(".myGridView .myButton").on('click',function () { /* your code */ }); 
```

附加到所有单独的“.myButton”事件

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T06:16:34.877

`on`将回调应用于任何`.myButton`元素，[无论何时将其添加到页面](http://jqapi.com/#p=on)（它与旧方法执行相同的工作`live`）。使用`remove`不会清理您的客户端绑定。

您应该[使用`off`](http://jqapi.com/#p=off)或阻止原始绑定（如果重新绑定是通过页面回发完成的）。

# iphone - 在 UISplitView 的主视图中添加子视图

> ID：12559702
> 
> 赞同：0
> 
> 时间：2012-09-24T06:10:00.310
> 
> 标签：iphone, ios, uisplitview

我想在 UISplitView 的 masterView 中添加一个子视图（如谷歌分页），我只是添加了一个子视图，但子视图也使用 masterView tableView 滚动，我如何修复该 subView 不使用 tableView 滚动？可能是我走错了路，请指导我正确的方式，我如何在 UISplitView 的 masterView 中添加子视图。

谢谢

```
- (void)viewDidLoad
{
[super viewDidLoad];

UIView *barView=[[UIView alloc]initWithFrame:CGRectMake(0, 500, 300,50)];
barView.backgroundColor=[UIColor redColor];
[self.view addSubview:barView];
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:30:55.093

UITableView 是 UIScrollView 的子类，所以如果你的主视图控制器的主视图是一个表格，那么任何子视图当然会滚动。解决方案是创建一个视图，该视图将包含表和您的`barView`. 一个普通的旧 UIView 可以正常工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:20:10.170

像这样尝试..它对你有帮助。您可以更改子视图的框架。`scrollViewDidScroll`在委托上设置框架。

```
- (void) scrollViewDidScroll:(UIScrollView *)scrollView
{
    if (self.tableView)
    {
        NSLog(@"X = %f,Y = %f",scrollView.contentOffset.x,scrollView.contentOffset.y);
        NSLog(@"%f,%f",scrollView.contentSize.width,scrollView.contentSize.height);
        table_Y_Position = scrollView.contentOffset.y;
        barView.frame = CGRectMake(275, 665+scrollView.contentOffset.y, 31, 31);
    }
} 
```

# c# - 使用 AxOWC11.AxSpreadsheet 上下文菜单

> ID：12559704
> 
> 赞同：0
> 
> 时间：2012-09-24T06:10:03.103
> 
> 标签：c#

如何禁用某些菜单，如剪切、粘贴、在`AxOWC11.AxSpreadsheet`右键菜单中插入新行/列，我正在使用下面的代码，但没有从中得到正确的解决方案

```
void spreadSheet_BeforeContextMenu(object sender, 
                         AxOWC11.ISpreadsheetEventSink_BeforeContextMenuEvent e)
{
    //Here i am getting all the menu items but not able to disable it....
    //e.menu
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T12:10:34.270

通过使用以下事件，我的问题解决了

```
private void spreadSheet_BeforeContextMenu(object sender, AxOWC11.ISpreadsheetEventSink_BeforeContextMenuEvent e) 
{ 
 e.cancel.Value = true; 
} 

private void spreadSheet_StartEdit(object sender, AxOWC11.ISpreadsheetEventSink_StartEditEvent e) 
{ 
 e.cancel.Value = true; 
} 

private void spreadSheet_BeforeKeyDown(object sender, AxOWC11.ISpreadsheetEventSink_BeforeKeyDownEvent e) 
{ 
 if (e.keyCode != 67)//Ctrl + C 
 { 
  e.cancel.Value = true; 
 }
} 
```

# c# - 在块之外创建一个对象的范围

> ID：12559709
> 
> 赞同：1
> 
> 时间：2012-09-24T06:10:22.357
> 
> 标签：c#, oop

我们可以在一个块或函数内初始化一个对象（之前没有声明它），以便它也可以在它的块外使用......？

这里 Type2 是 Type1 的派生类

例如：

```
if(a==b)
{ Type1 obj = new Type1();}
else
{Type2 obj = new Type2();}

obj.getFunction(); 
```

我有一个基类 USER 派生类 ADMIN，必须在用户登录时根据用户的角色创建一个对象，然后再使用该对象，这样我就不需要每次都检查用户的角色..（我是新手）

**这可能吗？？**

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T06:11:38.700

为什么不简单地在作用域上执行函数呢？您无法访问范围之外的变量。（*除非看到 Jon Skeet 的回答（竞技场上的最佳球员步骤）......*）

```
if(a==b)
{ 
    TYPE1 obj = new TYPE1();
    obj.function(); 
}
else
{
    TYPE2 obj = new TYPE2();
    obj.function(); 
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T06:12:51.463

该变量只能是一种或另一种类型 - 否则编译器如何知道之后允许哪些成员访问？

如果有一些通用的基类型（基类或接口）声明`function`，那应该是变量的类型：

```
BaseType obj;
if (a == b)
{
    obj = new Type1();
}
else
{
    obj = new Type2();
}
obj.Function(); // Name fixed to follow conventions 
```

这会更简单：

```
BaseType obj = a == b ? (BaseType) new Type1() : new Type2();
obj.Function(); 
```

如果它们*真的是*不同的类型，那么您实际上是在调用完全独立的方法，那么*您*需要在每个块中声明变量并在那里调用该方法，或者如果您使用的是 C# 4 或更高版本，您*可以*使用动态类型：

```
dynamic obj = a == b ? (dynamic) new Type1() : new Type2();
obj.Function(); 
```

您真的应该尝试考虑这是否是一个真正常见的函数，在这种情况下它*应该*在基类型中声明，或者您有两个同名的函数是否只是巧合，在这种情况下试图以同样的方式对待他们是一个坏主意。（假设您重构一种类型以更改方法名称，例如...）

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-09-24T06:13:14.850

> 我们可以在块或函数内创建一个变量（之前不声明它），以便它也可以在其块外使用......？

不，你不能那样做。您必须在块外部定义变量，以便您也可以在外部访问它。

# spring - AspectJ 表达式'@within' 不会影响没有公共成员的具体类

> ID：12559713
> 
> 赞同：2
> 
> 时间：2012-09-24T06:10:33.813
> 
> 标签：spring, abstract-class, aop, aspectj, pointcut

这是我的示例类：

```
public abstract class AbstractAgent {
    public void count(List<Movie> movies) {
        sum(movies);
    }

    protected abstract void sum(List<Movie> movies);
}

@Broker
public class DefaultAgent extends AbstractAgent {

    @Override
    protected void sum(List<Movie> movies) {
        Validate.notNull(movies);
    }

} 
```

方面定义：

```
@Aspect
@Component
public class DaoObserver {

    @Pointcut("@within(source.service.Broker)")
    public void withinBroker() {
    }

    @AfterReturning("withinBroker()")
    public void alertBroker(JoinPoint jp) {
        System.out.println("Cached broker execution of {"
                + jp.getSignature().toShortString() + "}");
    }
} 
```

我发现 DefaultAgent 的实例没有被代理！

试行如下：

```
applicationContext.getBeansOfType(AbstractAgent.class); 
```

建议我可以找到类似“DefaultAgent$$EnhancerByCGLIB$$ae10cb14”的东西，但仍然是“DefaultAgent”。

然后我发现**如果我将一个公共方法添加**到类'DefaultAgent'中它会起作用。

进一步挖掘我发现根本原因在于 aspectj weaver：

*org.aspectj.weaver.patterns.WithinAnnotationPointcut.matchInternal（阴影）*

```
@Override
protected FuzzyBoolean matchInternal(Shadow shadow) {
    ResolvedType enclosingType = shadow.getIWorld().resolve(shadow.getEnclosingType(), true);
    if (enclosingType.isMissing()) {
        shadow.getIWorld().getLint().cantFindType.signal(new String[] { WeaverMessages.format(
                WeaverMessages.CANT_FIND_TYPE_WITHINPCD, shadow.getEnclosingType().getName()) }, shadow.getSourceLocation(),
                new ISourceLocation[] { getSourceLocation() });
    }
    annotationTypePattern.resolve(shadow.getIWorld());
    return annotationTypePattern.matches(enclosingType);   **<--- AbstractAgent**
} 
```

是aspectj weaver的bug吗？我该如何解决它，因为我在实际业务中有许多具体的子类，并且它是模式“模板”的标准实现。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T11:58:55.827

找到解决方案：@target 适合这种情况。

完美地描述了@within 和@target 之间的区别。

我是多么愚蠢！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T10:59:59.123

在没有分析问题的情况下（我通常在没有 Spring 的情况下使用 AJ）并且没有太多时间，我建议您在 AJ 用户邮件列表中提出您的问题。那里的人真的很能干，可能会发现它是否是一个错误。如果您很确定它是一个，请打开 Bugzilla 票证。

# c# - Microsoft.Live.LiveConnectException while using Live SDK in C#/XAML metro app

> ID：12559714
> 
> 赞同：0
> 
> 时间：2012-09-24T06:10:34.850
> 
> 标签：c#, xaml, exception, microsoft-metro, live

I am developing a metro app in C#/XAML. I was just coding my self a simple app for uploading and downloading files to my skydrive. I have followed [this](http://babaandthepigman.wordpress.com/2012/03/17/skydrive-upload-c-metro/) article, it says to register my app [here](http://go.microsoft.com/fwlink/?LinkId=227628). Moreover I searched and found [this][http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/ac748f7f-f077-4bc0-a3f5-1365288f72e7] thread, then I register my app at [here][https://manage.dev.live.com/build], so login is successful but when I try to upload something I am getting "Microsoft.Live.LiveConnectException" at this line.

```
await liveConnectClient.BackgroundUploadAsync("me/skydrive", file.Name, file, OverwriteOption.Rename); 
```

How can I use skydrive for my app for downloading and uploading ? I can't find any good example. I also saw [PhotoSky][http://code.msdn.microsoft.com/windowsapps/Live-SDK-Windows-Developer-8ad35141] demo app but it also throws "Microsoft.Live.LiveConnectException".

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:17:44.947

Make sure that your App capabilities include the internet (Client) capability. If it doesn't then you can allow it through your project properties.

[http://msdn.microsoft.com/en-us/library/windows/apps/hh465399.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh465399.aspx)

**Update:**

I found a workaround to your issue [here](http://social.msdn.microsoft.com/Forums/en-US/messengerconnect/thread/2292cd84-d0cc-4f03-b0f8-a3622db154d0). It is the last post in the thread, see if it works for you. It suggests that you have to use `IStorageFile` for your file, if you're using that then I guess it's an issue with the Live SDK.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-12T19:08:07.713

Problem solved. I didn't associated my app with store. I recommend to read each line of the [MSDN document](http://msdn.microsoft.com/en-us/library/dn631820.aspx#associate_your_app_with_the_store) carefully to new users.

# iphone - iPhone 的闪存有多少个编程/擦除周期？

> ID：12559720
> 
> 赞同：5
> 
> 时间：2012-09-24T06:11:01.810
> 
> 标签：iphone, hardware, video-capture

不确定这是解决这个问题的正确网站，但由于这里有很多聪明人，也许有人知道。

我正在构建一个需要连续捕获视频的应用程序，但只保留最后几分钟（比如 5~15）。通过将视频拆分为 30 秒的文件并删除最近的文件，很容易实现这一点。但是，这意味着该应用程序一直在写入和擦除大文件，我担心它会磨损设备的闪存。

我一直试图找到 iPhone（和流行的 Android 手机）的市盈率周期规范，但没有成功。有人知道答案吗？

PS 只是为了缓解一个小问题：在此视频捕获期间设备已连接到电源，因此电池耗尽不是问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:22:13.323

我不会担心的。典型的 NAND 闪存有 100k+ 写入周期

我确信 iOS 有一个智能文件操作系统，它可以均匀地分配写入以减少特定位置的磨损。我也确信一旦它开始发生在某些扇区上，它会将它们标记为坏扇区并将它们重新定位到健康的位置，就像普通 HDD 也会发生一样。

此外，每 30 秒在同一位置书写也不是特别频繁。你需要 140 年才能磨损相同的闪光位置。我很可能您的大部分数据都保留在缓存中，而实际上从未写入闪存。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T10:16:14.860

擦除周期的数量很大程度上取决于所使用的闪存类型。单级 NAND 通常有 100k+ 擦除周期，而多级 NAND 大约为 10k。根据经验，MLC 比 SLC 更便宜且密度更高。

NAND 控制器——无论是在软件还是硬件中实现，都执行磨损均衡、坏块管理和纠错，并且一些擦除单元被保留以替换被认为无法挽救的块。

有许多可能的硬件架构可用于在手机中连接 NAND 设备。

Apple 将 MLC 设备直接挂在应用处理器上（我假设是这样）。

Android 手机中更常见的情况是使用小型 NOR 设备作为引导加载程序和内核，然后使用带有 ext4 文件系统的 eMMC NAND 闪存设备来处理其他所有内容。eMMC 本质上是与可移动媒体卡相同的芯片。但封装后可直接安装到设备中，并带有嵌入式 NAND 阵列管理。

在任何一种情况下，底层的 NAND 性能都从应用程序空间中大量抽象出来。当您考虑到基于 MLC 的 SSD 设备是针对敲击它们的企业用户销售时，智能手机上产生的任何负载都不太可能成为问题。

# c++ - LNK 2028：未解决的令牌

> ID：12559722
> 
> 赞同：1
> 
> 时间：2012-09-24T06:11:18.707
> 
> 标签：c++, hyperlink

我正在尝试编译使用 FFTW 库的开源软件（我使用的是 MS VC++ 2008）。我已经构建并链接了库文件，但是我收到了一些 LINK 2028 和 2019 错误。有什么想法可以帮助我建立吗？

```
Error   92  error LNK2028: unresolved token (0A00053A) "extern "C" void __cdecl fftw_free(void *)" (?fftw_free@@$$J0YAXPAX@Z) referenced in function "public: virtual __thiscall music::FftwAnalyser::~FftwAnalyser(void)" (??1FftwAnalyser@music@@$$FUAE@XZ)   spectrumanalyserfftw.obj
Error   93  error LNK2028: unresolved token (0A000546) "extern "C" struct fftw_plan_s * __cdecl fftw_plan_dft_1d(int,double (*)[2],double (*)[2],int,unsigned int)" (?fftw_plan_dft_1d@@$$J0YAPAUfftw_plan_s@@HPAY01N0HI@Z) referenced in function "public: __thiscall music::FftwAnalyser::FftwAnalyser(unsigned int,class music::Parameters const &)" (??0FftwAnalyser@music@@$$FQAE@IABVParameters@1@@Z) spectrumanalyserfftw.obj
Error   94  error LNK2028: unresolved token (0A000559) "extern "C" void * __cdecl fftw_malloc(unsigned int)" (?fftw_malloc@@$$J0YAPAXI@Z) referenced in function "public: __thiscall music::FftwAnalyser::FftwAnalyser(unsigned int,class music::Parameters const &)" (??0FftwAnalyser@music@@$$FQAE@IABVParameters@1@@Z)   spectrumanalyserfftw.obj
Error   95  error LNK2028: unresolved token (0A00059D) "extern "C" void __cdecl fftw_execute(struct fftw_plan_s * const)" (?fftw_execute@@$$J0YAXQAUfftw_plan_s@@@Z) referenced in function "public: virtual class music::Chromagram * __thiscall music::FftwAnalyser::chromagram(class music::AudioData const &)" (?chromagram@FftwAnalyser@music@@$$FUAEPAVChromagram@2@ABVAudioData@2@@Z)    spectrumanalyserfftw.obj
Error   96  error LNK2028: unresolved token (0A000669) "extern "C" void __cdecl fftw_destroy_plan(struct fftw_plan_s *)" (?fftw_destroy_plan@@$$J0YAXPAUfftw_plan_s@@@Z) referenced in function "public: virtual __thiscall music::FftwAnalyser::~FftwAnalyser(void)" (??1FftwAnalyser@music@@$$FUAE@XZ)    spectrumanalyserfftw.obj
Error   97  error LNK2019: unresolved external symbol "extern "C" void __cdecl fftw_free(void *)" (?fftw_free@@$$J0YAXPAX@Z) referenced in function "public: virtual __thiscall music::FftwAnalyser::~FftwAnalyser(void)" (??1FftwAnalyser@music@@$$FUAE@XZ)    spectrumanalyserfftw.obj
Error   98  error LNK2019: unresolved external symbol "extern "C" void __cdecl fftw_destroy_plan(struct fftw_plan_s *)" (?fftw_destroy_plan@@$$J0YAXPAUfftw_plan_s@@@Z) referenced in function "public: virtual __thiscall music::FftwAnalyser::~FftwAnalyser(void)" (??1FftwAnalyser@music@@$$FUAE@XZ) spectrumanalyserfftw.obj
Error   99  error LNK2019: unresolved external symbol "extern "C" struct fftw_plan_s * __cdecl fftw_plan_dft_1d(int,double (*)[2],double (*)[2],int,unsigned int)" (?fftw_plan_dft_1d@@$$J0YAPAUfftw_plan_s@@HPAY01N0HI@Z) referenced in function "public: __thiscall music::FftwAnalyser::FftwAnalyser(unsigned int,class music::Parameters const &)" (??0FftwAnalyser@music@@$$FQAE@IABVParameters@1@@Z)  spectrumanalyserfftw.obj
Error   100 error LNK2019: unresolved external symbol "extern "C" void * __cdecl fftw_malloc(unsigned int)" (?fftw_malloc@@$$J0YAPAXI@Z) referenced in function "public: __thiscall music::FftwAnalyser::FftwAnalyser(unsigned int,class music::Parameters const &)" (??0FftwAnalyser@music@@$$FQAE@IABVParameters@1@@Z)    spectrumanalyserfftw.obj
Error   101 error LNK2019: unresolved external symbol "extern "C" void __cdecl fftw_execute(struct fftw_plan_s * const)" (?fftw_execute@@$$J0YAXQAUfftw_plan_s@@@Z) referenced in function "public: virtual class music::Chromagram * __thiscall music::FftwAnalyser::chromagram(class music::AudioData const &)" (?chromagram@FftwAnalyser@music@@$$FUAEPAVChromagram@2@ABVAudioData@2@@Z) spectrumanalyserfftw.obj 
```

谢谢！

# java - 如何在 XML 文档中存储数据？

> ID：12559727
> 
> 赞同：-3
> 
> 时间：2012-09-24T06:11:55.697
> 
> 标签：java, android

我有一个问题：如何在 XML 文档中写入/更新数据。

XML文件的路径：`MyProject/res/xml/contacts.xml`

xml代码示例：

```
<contacts>
    <contact choise="0" phone="0" />
</contacts> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:39:37.483

请注意 res 文件是静态的，不能在运行时更改。它也不可取。更好的是，您可以将其保存在数据库存在的内部文件中，将其复制到 sdcard 中，对其进行编辑并将其推回内部存储器并从 sdcard 中删除文件。

# asp.net - 当 SQL Server 数据行等于指定值时如何发送电子邮件警报

> ID：12559729
> 
> 赞同：0
> 
> 时间：2012-09-24T06:12:10.860
> 
> 标签：asp.net, sql-server, sql-server-2008, email, c#-4.0

在这里，我有一个带有日期类型列的 sql server 数据表。我想在存储日期和当前日期的差小于五个时向指定的电子邮件地址发送电子邮件警报。我该怎么做？我用 ASP.NET 做这个，后面的代码是 C#。请解释一下如何做到这一点。提前致谢..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:27:23.340

实现这一点的最佳方法是创建一个 Windows 服务并使其每隔 x 分钟运行一次。在此 Windows 服务中，您只需要检查您所需的条件，如果它是真的，只需发送电子邮件，否则处于空闲状态。

要不然

您也可以通过使用触发器来实现这一点，但这仅在表上有任何插入/更新并匹配您的条件时才会触发。这不会一直检查，但只有在表上有任何操作时才会触发。

# c# - 在运行时创建通用数组

> ID：12559730
> 
> 赞同：7
> 
> 时间：2012-09-24T06:12:30.213
> 
> 标签：c#, generics, reflection

c#中有没有办法做这样的事情：

```
public void Foo<T>()
{
    T[] arr = Goo() as T[];
} 
```

Goo 在哪里返回一个`object[]`，使用反射或其他什么？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T06:15:05.023

您可以使用 LINQ：

```
public void Foo<T>()
{
    T[] arr = Goo().OfType<T>().ToArray();
} 
```

在您的示例中，如果两种类型完全匹配，您将投射`object[]`到which 也将起作用：`T[]`

```
public void Foo<T>()
{
    T[] arr = Goo() as T[];
    if (arr != null)
    {
        // use the array
    }
} 
```

例如，这将在以下情况下工作：

```
public object[] Goo()
{
    return new string[] { "a", "b" };
} 
```

然后像这样调用Foo：

```
Foo<string>(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:38:31.603

也许最简单和最可靠的方法是复制数组，逐项进行强制转换：

```
public void Foo<T>()
{
    T[] arr = Array.ConvertAll(Goo(), x => (T)x);
} 
```

这是一个“ `unbox.any`”，这意味着（对 JIT）：

*   如果结果是引用类型，则进行`castclass`（即保留引用类型检查）`T`
*   做一个`unbox`if`T`结果是值类型

* * *

引用类型的数组是*协变*的，这意味着 a`T[]`可以*表示*为 a `object[]`。正因为如此，结果有可能`Goo()` *实际上*是`T[]`. 我们可能还想测试一下：

```
public T[] Foo<T>()
{
    var tmp = Goo();
    T[] arr = tmp as T[];
    if(arr == null && tmp != null) {
        arr = Array.ConvertAll(Goo(), x => (T)x);
    }
    return arr;
} 
```

一个令人烦恼的问题是我们现在有不同的语义——在某些情况下它是同一个数组，在某些情况下它是被复制的。如果我们*改变*数组，这可能会出现问题。

# java - 如何使用 EditText 和 onTextChanged

> ID：12559733
> 
> 赞同：0
> 
> 时间：2012-09-24T06:12:59.890
> 
> 标签：java, android, eclipse

我为 5 个 EditTexts 创建了一个 Common TextWatcher。如何检测 onTextChanged for EditText 中的文本更改？

```
 private  class CustomTextWatcher implements TextWatcher {
            double valuesMeasure;
            public void beforeTextChanged(CharSequence s, int start, int count,int after) {}
            public void onTextChanged( final CharSequence s, int start, int before,int count) 
            {
                checkEditTextIsFilledorNot();
                try
                {
                valuesMeasure=Double.valueOf(s.toString());}
                catch(Exception e)
                {Log.i("Error", e.getMessage());}
                if(valuesMeasure==0)
                {
                }
                else if(valuesMeasure>=0.001&&valuesMeasure<=30.000)
                {
                }
                else
                {
                    AlertDialog.Builder builder = new AlertDialog.Builder(TrapezoidalActivity.this);
                    builder.setMessage("Enter All Values Betweeen 0.001 and 30 for all the fields.")
                    .setCancelable(false)
                    .setNegativeButton("Close", new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            s.subSequence(0,s.length()-1);
                            s.toString();
                            dialog.cancel();
                        }
                    });
                    AlertDialog alert = builder.create();
                    alert.show();
                }

            }
            public void afterTextChanged(Editable s) {
            }
        } 
```

以上是我的代码...如何在 Edittext 中获取文本更改？
我这样称呼Edittext

```
edittext.addTextChangedListener(new CustomTextWatcher()); 
```

# android - 从后台服务向服务器发送 http 请求失败

> ID：12559735
> 
> 赞同：1
> 
> 时间：2012-09-24T06:13:17.893
> 
> 标签：android, httprequest

我正在通过在 Android 的后台服务中工作向服务器发送 HTTP 请求。只有当设备通过 USB 电缆连接到计算机时，他才能正常工作。如果设备未连接到计算机 - 服务仍会发送请求，但它们没有到达服务器。如果我再次将设备插入计算机 - 所有发送的请求都会立即发送到服务器。

我正在使用 AsyncTask 发送请求。

Web 服务运行良好，我用 hurl.it 对其进行了测试。我不明白是什么原因。

**编辑：**
我正在发送请求 ->

```
 URL url = null;
    URLConnection connection = null;

    InputStream inputStream = null;

    String strURL = String.format("%s/%s", serviceURL, params);
    try{
    url = new URL(strURL);
    connection = url.openConnection();
    connection.connect();

    inputStream = new BufferedInputStream(url.openStream());
    }catch(IOException ioe){
        ioe.printStackTrace();
    } 
```

**工作解决方案**
我真的很震惊，当我发现对服务器的请求不仅应该从后台线程调用，还应该通过提供接口的回调构造来调用。

在我的服务中，我正在启动 AsyncTask

```
MyTask task = new MyTask(); 
task.execute((Void)null); 
```

并在服务类中实现接口 AsyncTaskHost

```
...
@Override
public void onTaskStart(){
    // sending http request to server using method from above
}
@Override
public void onTaskFinish(){
    // doing additional work here, after getting response from request
} 
```

我的界面：

```
public interface AsyncTaskHost{
    public void onTaskStart();
    public void onTaskFinish();
} 
```

我的异步任务类：

```
public class UploadCoordinates extends AsyncTask<Void, Integer, Void> {
private AsyncTaskHost taskHost;
private Context context;

public UploadCoordinates(Context context, AsyncTaskHost taskHost) {
    this.taskHost = taskHost;
    this.context = context;
}

@Override
protected Void doInBackground(Void... params) {
    taskHost.onTaskStart();

    return null;
}

@Override
protected void onPreExecute() {
    super.onPreExecute();
}

@Override
protected void onProgressUpdate(Integer... progress) {
    super.onProgressUpdate(progress);
}

@Override
protected void onPostExecute(Void param) {
    if (isCancelled()) {
        return;
    }

    taskHost.onUploadFinish();
}
} 
```

现在一切正常。没有接口，异步任务不想在没有 USB 电缆的情况下工作。我不知道，这对我来说很神奇（或者 Android 操作系统会阻止所有请求、端口或类似的东西）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T09:34:50.277

取决于你想做什么，你也可以从 jsoup.org 尝试 jsoup

判断它仅在连接 USB 电缆时才有效，这有点奇怪。尝试在您的计算机上停用您的互联网并仅在您的手机上启用它。可能是某些常规 Internet 共享设置受到干扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:50:35.813

看看这是否有帮助：

```
URL url = null;
InputStream inputStream = null;

String strURL = String.format("%s/%s", serviceURL, params);
HttpClient httpclient = new DefaultHttpClient();
HttpConnectionParams.setConnectionTimeout(httpclient.getParams(), 10000);

 try{
    url = new URL(strURL);
    HttpPost httppost = new HttpPost(url);

    HttpResponse response = httpclient.execute(httppost);

    inputStream = new BufferedInputStream(url.openStream());
  }catch(IOException ioe){
    ioe.printStackTrace();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-16T08:09:03.133

我知道我要回答的帖子有点旧，因为我遇到了同样的问题，它消化了我 2-3 个小时来解决。问题是通过模拟器向“本地”服务器发送请求时，如果你写

```
http://localhost:8080/yourapp/yourServelt 
```

它不会向服务器发送请求。您必须提及您机器的 IP 地址，即

```
http://10.0.0.15:8080/yourapp/yourServlet 
```

# java - 公开源代码中的私人信息

> ID：12559741
> 
> 赞同：1
> 
> 时间：2012-09-24T06:13:58.413
> 
> 标签：java, encryption, open-source

我们决定通过 github 向公众提供我们的源代码。我们有一些我们无法向公众分享的信息，例如我们的应用程序用来发送电子邮件的电子邮件和一些社交媒体凭证。将信息保密的最佳做法是什么？

我们在应用程序的 app-engine 中使用 java。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T06:18:32.207

将该数据保存在本地计算机或不同的非公共存储库中的属性文件中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:21:19.327

从属性文件或数据库中读取此数据，并且不要将文件/数据库包含在源存储库中。如果您之前在存储库中提交了包含私有信息的代码，则需要创建不包含任何私有信息历史记录的新存储库。据我所知，没有办法从现有存储库中删除这些信息并保留您的历史记录。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T06:17:33.700

加密您想要保密的信息，[`AES Crypt`](http://www.aescrypt.com/)并尽量不要泄漏代码中的引用（如果可以的话，让解密来自另一个不是本地的源，最好通过 API）。

# android - 如何通过在 Android 中使用复选框来更改列表项的大小？

> ID：12559744
> 
> 赞同：-1
> 
> 时间：2012-09-24T06:14:24.103
> 
> 标签：android

谁能告诉我如何使用复选框来更改 Android 列表视图中的项目大小？

当复选框未选中时，列表视图中的项目为正常大小。

当复选框被选中时，列表视图中的所有项目都会放大。

代码或提示会有所帮助，谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:35:26.100

这是为了根据复选框状态在适配器的 getview 中检查和设置列表视图项的大小。

```
if(!isChecked)
{
   convertView.setLayoutParams(new ListView.LayoutParams(NormalWidth,  
    Normalheight));
}
else
{
 convertView.setLayoutParams(new ListView.LayoutParams(EnlargeWidth,  
    Enlargeheight));
} 
```

对于复选框选中的更改，您可以编写如下：

```
mCheckBox.setOnCheckedChangeListener(new OnCheckedChangeListener() 
{

@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked)
{
    this.isChecked = isChecked;
    adapter.notifyDataSetChanged();   /* this line will Refress the listview so you can change the value of isChecked variable then it will change the size of listview item.*/
}
}); 
```

# iphone - uitableview中tablefooter的大小没有增加

> ID：12559745
> 
> 赞同：0
> 
> 时间：2012-09-24T06:14:31.367
> 
> 标签：iphone, uitableview, footer

表格页脚的大小没有增加，似乎默认情况下是固定的。我们怎样才能改变它？我正在为此使用下面提到的代码，但它不起作用。任何人都可以帮助我吗？提前致谢。

```
- (UIView *)tableView:(UITableView *)tableView viewForFooterInSection:(NSInteger)section {

    UIView *view = [[[UIView alloc] initWithFrame:CGRectMake(0, 0, 320, 200)] autorelease];
    view.backgroundColor = [UIColor colorWithPatternImage:[UIImage imageNamed:@"blue-bg.jpg"]];
    return view;

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:40:24.987

在您确认 UITableViewDelegate 的 .h 文件中，您可以按下命令按钮，然后单击 UITableViewDelegate，它将带您进入协议，您可以在其中找到可用于自定义表格视图的所有相关方法。是的，如何做到这一点的方式已经得到解答。祝你好运！！干杯！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:18:24.430

```
-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section
{
    return 50;
} 
```

# php - 使用 facebook graph api 更新状态

> ID：12559749
> 
> 赞同：0
> 
> 时间：2012-09-24T06:14:50.747
> 
> 标签：php, facebook, facebook-graph-api

我正在使用下面的代码来更新 facebook 中的用户状态。它在 2 个月前运行良好。现在问题是使用该应用程序登录 facebook 后需要花费太多时间来加载 nd 错误消息就像“这个网页有一个重定向循环”。请给出一个想法，使 tis 代码工作

```
 <?php
 //include the Facebook PHP SDK
 include_once 'facebook.php';

 //instantiate the Facebook library with the APP ID and APP SECRET
 $facebook = new Facebook(array(
  'appId' =>'id',
    'secret' =>'xyz',
    'cookie' => true
 ));
 $user = $facebook->getUser();

 if($user) {

    //do stuff when already logged in
 if( session_id() ) 
 {

 } else {
    session_start();
 }

 $access_token = $facebook->getAccessToken();

 $permissions_needed = array('publish_stream', 'read_stream', 'offline_access', 'manage_pages');
 foreach($permissions_needed as $perm) {
    if( !isset($permissions_list['data'][0][$perm]) || $permissions_list['data'][0]     $perm] !            =      1 ) {
       $login_url_params = array(
     'scope' => 'publish_stream,read_stream,manage_pages',
     'fbconnect' =>  1,
     'display'   =>  "page",
     'next' => 'http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']
    );
    $login_url = $facebook->getLoginUrl($login_url_params);
     header("Location: {$login_url}");
    exit();
    }
  }
   $accounts = $facebook->api(
  '/me/accounts',
     'GET',
  array(
  'access_token' => $access_token
   )
 );
    $parameters = array(
     'message' =>'hi ansari.....',  
      'link' =>'www.yahoo.com',
    'name' =>"vijesh",
    'caption' =>'',
    'description' =>"mydescription"
   );

   $newpost = $facebook->api(
 '/me/feed',
  'POST',
  $parameters
  );

   } 
    else 
    {
    $login_url_params = array(
  'scope' => 'publish_stream,read_stream,manage_pages',
  'fbconnect' =>  1,
  'redirect_uri' => 'http://'.$_SERVER['HTTP_HOST'].$_SERVER['REQUEST_URI']
     );
      $login_url = $facebook->getLoginUrl($login_url_params);

           //redirect to the login URL on facebook
        header("Location: {$login_url}");
         $accounts = $facebook->api(
       '/me/accounts',
      'GET',
          array(
            'access_token' => $access_token
          )
       );

    $parameters = array(
  'message' =>'Hi gud evening',  
  'link' =>'www.yahoo.com',
 'name' =>"vijesh",
 'caption' =>'my Try',
 'description' =>"mydescription"
  );

    $newpost = $facebook->api(
     '/me/feed',
      'POST',
        $parameters
   );

      exit();
    }
   ?> 
```

提前致谢

# objective-c - 创建自定义标签栏

> ID：12559750
> 
> 赞同：0
> 
> 时间：2012-09-24T06:14:52.713
> 
> 标签：objective-c, ios, tabs, uitabbarcontroller

我正在尝试创建一个自定义标签栏，它在屏幕底部有 3 个标签。我想在屏幕顶部有一个视图（大小为 320x40）。每个选项卡始终出现在此视图中。我怎样才能做到这一点？谢谢，

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:29:04.713

我使用了下面链接中的几个之一，因为我没有足够的时间来编写自己的。相当不错的实施。

[自定义 TabBar 控件](http://www.cocoacontrols.com/search?utf8=%E2%9C%93&q=tabbar)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:51:40.997

请细化以下链接

[http://kurrytran.blogspot.in/2011/10/ios-5-tutorial-creating-custom-tab-bar.html](http://kurrytran.blogspot.in/2011/10/ios-5-tutorial-creating-custom-tab-bar.html)

[如何创建自定义标签栏...在标签栏中添加自定义图像（无需 xib 更改）](https://stackoverflow.com/questions/4710298/how-can-i-create-custom-tab-bar-add-custom-images-in-tab-bar-without-xib-cha)

他们俩都很好教你。希望这个有帮助:)

# java - Java 中的复活节日期和 UML 方法语法

> ID：12559751
> 
> 赞同：0
> 
> 时间：2012-09-24T06:14:52.887
> 
> 标签：java, class, date, methods, uml

我编写了一个名为 Easter 的类（见下文）和一个名为 EasterTester 的测试器类（也在下面）来执行它并插入年份值。目标是实现高斯算法，计算任何指定年份的复活节星期天的月份和日期。

我的代码工作正常，但我对我正在关注的书有点困惑。它告诉我不要实现第一个代码链接底部的两个 getter 方法，因为我“不需要它们”。就我的代码而言，我绝对需要它们。有什么我错过的吗？

此外，它列出了我建议用作的“复活节类公共接口”：

计算复活节（int aYear）：字符串

“UML 方法语法表明该方法接受一个整数参数并返回一个字符串。” 我不明白这个评论，因此，我不明白如何编辑我的代码以遵循这些准则。

如果有人可以就困境/问题提供任何澄清，我将不胜感激！

代码：/** * * @author b_t * */

复活节类{

```
/**
 * @param n is the month
 * @param p is the day
 */
private int n;
private int p;

// Comments via Cay Horstmann's "Big Java" 4th ed. on page 169; p.4.19

// Let y be the year (such as 1800 or 2001).

/**
 * 
 * @param y this will hold the year that users enter
 */
Easter(int y) {

    // Divide y by 19 and call the remainder a. Ignore the quotient.
    int a = y % 19;

    // Divide y by 100 to get a quotient b and a remainder c.
    int b = y / 100;
    int c = y % 100;

    // Divide b by 4 to get a quotient d and a remainder e.
    int d = b / 4;
    int e = b % 4;

    // Divide 8 * b + 13 by 25 to get a quotient g. Ignore the remainder.
    int g = (8 * b + 13) / 25;

    // Divide 19 * a + b - d - g + 15 by 30 to get a remainder h. Ignore the quotient.
    int h = (19 * a + b - d - g + 15) % 30;

    // Divide c by 4 to get a quotient j and a remainder k.
    int j = c / 4;
    int k = c % 4;

    // Divide a + 11 * h by 319 to get a quotient m. Ignore the remainder.
    int m = (a + 11 * h) / 319;

    // Divide 2 * e + 2 * j - k - h + m + 32 by 7 to get a remainder r. Ignore the quotient.
    int r = (2 * e + 2 * j - k - h + m + 32) % 7;

    // Divide h - m + r + 90 by 25 to get a quotient n. Ignore the remainder.
    n = (h - m + r + 90) / 25;

    // Divide h - m + r + n + 19 by 32 to get a remainder p.
    p = (h - m + r + n + 19) % 32;

}
/**
 * 
 * @return n returns the month in which a given year's Easter Sunday will take place
 */
public int getEasterSundayMonth() {

    return n;
}
/**
 * 
 * @return p returns the day in which a given year's Easter Sunday will take place
 */
public int getEasterSundayDay() {

    return p;
} 
```

}

这里是测试类：

公共类 EasterTester {

```
public static void main(String[] args)

   {
      Easter myEaster = new Easter(2002);

      System.out.println("In 2002, Easter Sunday is: " + "month = " + myEaster.getEasterSundayMonth() + " and day = " + myEaster.getEasterSundayDay());

      Easter myEaster2 = new Easter(2012);

      System.out.println("In 2012, Easter Sunday is: " + "month = " + myEaster2.getEasterSundayMonth() + " and day = " + myEaster2.getEasterSundayDay());

   }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T06:20:49.680

本书对UML的使用是这样的：

```
calculateEaster(int aYear): String 
```

真的*只是*意味着你有一个像这样的公共方法：

```
public String calculateEaster(int aYear) 
```

（顺便说一下，参数名称很糟糕。如果书中建议使用、或名称之前的前缀`a`，请忽略它......并且可能会得到一本更好的书。）`an``my``the`

我认为接口会更好（在Java语法中）

```
public LocalDate calculateEaster(int year) 
```

...使用[Joda Time](http://joda-time.sf.net)的`LocalDate`课程。如果您不想使用它，请使其返回 a`java.util.Calendar`或可能返回 a `java.util.Date`。（这些类都不是真正的意思，它们的名字所暗示的，也不是理想的，但我们走了......）

`String`...而不是像书中推荐的那样返回 a 。但是，就对象*实例*的含义而言，这从根本上是不同的。在您的情况下，它代表一年中的一天（尽管它不记得*哪*一年，这很奇怪）。这本书的建议是不应该有*任何*实例状态——你将构建一个`EasterCalculator`而不是代表一个复活节的实例。

顺便说一句，这段代码很糟糕：

```
/**
 * @param n is the month
 * @param p is the day
 */
 private int n;
 private int p; 
```

您的 Javadoc 注释试图记录单个*字段*，就好像它是具有两个参数的*方法一样。*对于有效的 Javadoc，您需要：

```
/** The month of the year */
private int n;

/** The day of the month */
private int p; 
```

*然而，这些字段需要*记录的事实表明它们的名字很糟糕。你为什么不直接打电话给他们`month`呢`day`？

# mysql - 活动记录（mysql db）文本字段中的字符数是否有限制

> ID：12559762
> 
> 赞同：3
> 
> 时间：2012-09-24T06:15:35.557
> 
> 标签：mysql, ruby-on-rails, activerecord, text

这是我的架构：

```
create_table "delayed_jobs", :force => true do |t|
    t.integer  "priority",   :default => 0
    t.integer  "attempts",   :default => 0
    t.text     "handler"
    t.text     "last_error"
    t.datetime "run_at"
    t.datetime "locked_at"
    t.datetime "failed_at"
    t.string   "locked_by"
    t.string   "queue"
    t.datetime "created_at"
    t.datetime "updated_at"
  end 
```

我正在为电子邮件使用延迟工作。我的一封电子邮件有一个很长的处理程序（50000+）个字符，当它保存在处理程序文本字段中时，这恰好被切断了。一个文本字段通常可以占用多少个字符，我应该如何增加它？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T06:22:24.700

MySQL 支持 4 种 TEXT 字段类型

> （TINYTEXT、TEXT、MEDIUMTEXT 和 LONGTEXT）

每种类型的限制是

```
> TINYTEXT  256 bytes     TEXT  65,535 bytes     MEDIUMTEXT  16,777,215 bytes   
> LONGTEXT  4,294,967,295 bytes 
```

您可以进行相应的更改。注意：以字节为单位的大小是字符数

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T10:38:52.507

在我的消息模型中，我遇到了类似的问题。最初在创建模型时，消息正文被定义为字符串

```
create_table :messages do |t|
  t.string :body, 
......
end 
```

这将我的消息正文截断为 256 个字符。所以我用另一个迁移更改了该列：

```
def up
  change_table :messages do |t|
    t.change :body, :text
  end
end 
```

正如 mhasan 在他的回答中概述的那样， :text 的长度为 65535 个字节。如果您需要更长的时间，可以使用 :mediumtext 或 :longtext 代替

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T08:36:04.203

据我所知，Ruby 本身对字符串的长度没有任何限制，因此存储在 Rails 中的字符串受到数据库功能的限制。

# css - 伪元素未显示

> ID：12559763
> 
> 赞同：16
> 
> 时间：2012-09-24T06:15:41.340
> 
> 标签：css, pseudo-element

伪元素未显示在 div 上。我正在使用精灵图像，但我也尝试了非精灵图像，但没有。我尝试了多种策略，例如定位绝对、使用 z-index、边距等。如果我没有弄错或者显然我做错了什么，我似乎做对了。我是社区的新手，在这里和谷歌都搜索过，但没有结果显示它为什么没有显示。代码如下，这是最基本的尝试。感谢所有花时间提供帮助的人。

```
.test {
    display:inline-block;
    background:#fff;
    width:60%;
}

.test:before,
.test:after {
     background:url("/imgs/Sprite2.png") repeat-y;
}

.test:before,
.test:after {
    position:relative;
    display:inline-block;
    vertical-align:top;
    width:27px;
    height:100%;
}

.test:before {
    content:"";
    background-position:0 0;
}

.test:after {
    content:"";
    background-position:-55px 0;
} 
```

我现在让它工作了。代码如下。我可以发誓我已经试过了，但我第一次做的时候肯定做错了什么。

```
 .test {
     background:#fff;
     width:60%;margin:0  0 60px 5%;
 }

 .test:before,
 .test:after {
     content:"";
     background:url("/imgs/Sprite2.png") repeat-y;
     position:absolute;
     top:0;
     width:27px;
     height:100%;
 }

 .test:before {
     right:100%;
     background-position:0 0;
 }

 .test:after {
     left:100%;
     background-position:-55px 0;
 } 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T06:29:28.377

## 编辑：

这是中`height:100%;`提到的一个问题`.test:before,.test:after`

你需要提到`height:100%`to `.test`and for `html`and `body`also,

请参阅下面的 CSS 建议更改：

**试试这个：**

```
body, html { height: 100%; }

.test{ 
    display:inline-block; 
    background:#fff; 
    width:60%;
    height: 100%; /*added height*/
}

.test:before,
.test:after{
    content:"";
    background:url("/imgs/Sprite2.png") repeat-y;
    position:relative;
    display:inline-block;
    vertical-align:top;
    width:27px;
    height:100%;   
}

.test:before{ background-position:0 0 }
.test:after{ background-position:-55px 0 } 
```

[**工作演示**](http://jsfiddle.net/rYXm8/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-28T13:17:14.303

这是正确的答案，因为我从未表明我使用按钮回答了它。我只是把它放在顶部，认为它会被认为是已回答。基本上我一定是第一次在某个地方做错了什么。希望这对遇到类似地雷问题的人有所帮助。

```
.test {
    background: #fff;
    width: 60%;
    margin: 0 0 60px 5%
}

.test:before, .test:after {
    content: "";
    background: url("/imgs/Sprite2.png") repeat-y;
    position: absolute;
    top: 0;
    width: 27px;
    height: 100%
}

.test:before {
    right: 100%;
    background-position: 0 0
}

.test:after {
    left: 100%;
    background-position: -55px 0
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-04T14:06:07.240

似乎问题在于您的 css 属性未正确声明/排列。从我所看到的，您首先声明了您的**背景图像**，但**内容**是最后用**background-position**声明的。

我在 Glyphicon 字体上遇到了我自己的问题，直到我实现了 keaukraine 提到的关于声明**显示**属性的内容之前没有显示。

但有时人们往往会忘记声明将导致预期结果消失的**内容属性。**

所以应该这样安排：

```
element:before {
  content: "\e013"; // or content: ""
  background:url("background_image.png");
  background-position: 0 0;
  display: inline-block;
} 
```

# html - canvas5在擦除对象时创建矩形

> ID：12559764
> 
> 赞同：1
> 
> 时间：2012-09-24T06:15:43.643
> 
> 标签：html, canvas

> **可能重复：**
> [HTML5 Canvas 中的取消绑定功能](https://stackoverflow.com/questions/12564365/unbind-function-in-html5-canvas)

我创建了一个使用矩形、画笔和橡皮擦的画布。如果我选择画笔然后橡皮擦它工作正常但是当我选择 Reactangle 然后橡皮擦。它在擦除对象时开始在背景中创建反应角。

如何取消绑定 context.rect(); 功能。

请建议。

# ios - 如何知道IP地址是否在本地网络中，xcode

> ID：12559767
> 
> 赞同：1
> 
> 时间：2012-09-24T06:16:02.890
> 
> 标签：ios, ip-address, ping

我想知道 IP 地址是否在本地网络中使用我的 objective-c(Xcode) 程序。但是，问题是对于每个 IP 地址（即使它不在网络中），结果都是成功的。这是代码，请帮助我如何查找 IP 地址是否正确位于本地网络中。

```
 bool success = false;
            const char *host_name = [@"192.168.0.115" cStringUsingEncoding:NSASCIIStringEncoding];

            SCNetworkReachabilityRef reachability = SCNetworkReachabilityCreateWithName(NULL,
                                                                                        host_name);
            SCNetworkReachabilityFlags flags;
            success = SCNetworkReachabilityGetFlags(reachability, &flags);
            bool isAvailable = success && (flags & kSCNetworkFlagsReachable) &&
            !(flags & kSCNetworkFlagsConnectionRequired);
            if (isAvailable)
            {
              //success
              //connect to IP address                      

            }
            else
            {
               //Not success
            } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:43:35.317

使用此代码

```
Reachability* reachability = [[Reachability reachabilityWithHostName: @"www.apple.com"] retain]; // does not work with local IP, ARC is not used.
NetworkStatus netStatus = [reachability currentReachabilityStatus]; 
```

`netStatus`会给你状态。

**更新**

`Reachability reachabilityWithHostName:`不适用于本地 IP，因为它无法解析地址。因此，此解决方案不能回答问题。但是，正如下面评论中@Kerberos 所引用的，这个[启用了 ARC 的库](https://github.com/ebley/reachabilityWithAddressPing)可用于检查与本地 IP 地址的连接。

# windows - 在 Rails 3 中使用 Paperclip 裁剪照片时遇到的错误

> ID：12559769
> 
> 赞同：2
> 
> 时间：2012-09-24T06:16:05.007
> 
> 标签：windows, ruby-on-rails-3, paperclip, crop

嗨，我正在尝试使用回形针和 imagemagick 裁剪照片。我在裁剪照片时遇到了一些错误。以下是错误堆栈：

```
?[32mCommand?[0m :: convert "C:/Users/Anand/AppData/Local/Temp/120120924-3568-tx
2bxy.jpg[0]" -crop 103x103+0+0 -auto-orient "C:/Users/Anand/AppData/Local/Temp/1
20120924-3568-tx2bxy20120924-3568-16dij9c"
?[32mCommand?[0m :: file -b --mime "C:/Users/Anand/AppData/Local/Temp/120120924-
3568-tx2bxy20120924-3568-16dij9c"
[paperclip] Error while determining content type: Cocaine::CommandNotFoundError
?[32mCommand?[0m :: identify -format %wx%h "C:/Users/Anand/AppData/Local/Temp/12
0120924-3568-tx2bxy.jpg[0]"
  ?[1m?[36m (0.0ms)?[0m  ?[1mrollback transaction?[0m
Completed 500 Internal Server Error in 145552ms

NoMethodError (undefined method `exitstatus' for nil:NilClass):
  app/models/user.rb:14:in `reprocess_photo'
  app/models/user.rb:14:in `reprocess_photo'
  app/models/user.rb:14:in `reprocess_photo'
  app/models/user.rb:14:in `reprocess_photo'
  app/models/user.rb:14:in `reprocess_photo'
  app/models/user.rb:14:in `reprocess_photo'
  app/models/user.rb:14:in `reprocess_photo'
  app/controllers/users_controller.rb:67:in `block in update'
  app/controllers/users_controller.rb:66:in `update'

  Rendered E:/Ruby192/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispa
tch/middleware/templates/rescues/_trace.erb (10.0ms)
  Rendered E:/Ruby192/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispa
tch/middleware/templates/rescues/_request_and_response.erb (1.0ms)
  Rendered E:/Ruby192/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispa
tch/middleware/templates/rescues/diagnostics.erb within rescues/layout (51.0ms)
Exiting 
```

模型/user.rb 文件：

```
class User < ActiveRecord::Base
  attr_accessible :name,:photo,:crop_x,:crop_y,:crop_w,:crop_h
  has_attached_file :photo,:styles => {:small=>"100x100#",:large=>"500x500>"},:processors => [:cropper]
  attr_accessor :crop_x,:crop_y,:crop_w,:crop_h
  after_update :reprocess_photo,:if=>:cropping?

  def cropping?
    !crop_x.blank? && !crop_y.blank? && !crop_w.blank? && !crop_h.blank?
  end

  private 

  def reprocess_photo
    photo.reprocess!
  end

end 
```

我的 lib/paperclip_processros/cropper.rb

```
module Paperclip
  class Cropper < Thumbnail
    def transformation_command
      if crop_command   
        #this generates command :
        #this is right #convert "C:/Users/Anand/AppData/Local/Temp/1.jpg[0]" -crop 102x102+0+0 -auto-orient "C:/Users/Anand/AppData/Local/Temp/120120924-2336-qbzroo20120924-2336-1jqbiiv.jpg"
        crop_command + super.first.sub(/ -crop \S+/, '')
      else
        super
      end
    end

    def crop_command
      target = @attachment.instance
      if target.cropping?
        " -crop #{target.crop_w}x#{target.crop_h}+#{target.crop_x}+#{target.crop_y} "
      end
    end
  end
end 
```

我的配置/env./dev.rb

```
 Paperclip.options[:swallow_stderr] = false
 Paperclip.options[:command_path] = "C:/Program Files/ImageMagick-6.7.9-Q16/" 
```

当我在裁剪后更新照片时，它会循环播放。有什么解决办法？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-30T19:38:11.927

我很确定您遇到了与我最初遇到的相同问题，即重新处理！方法正在保存 ActiveRecord 父级，然后触发 after_update 回调，从而导致您的 reprocess_photo 方法再次被调用。最终结果是一个有点递归的循环，直到你的机器用完可分配的内存才会停止。

解决这个问题的简单方法是添加一个名为 processing 的布尔属性，它允许您确定我们是否已经在重新处理图像。

```
attr_accessor :processing 
```

如果图像已被处理，则更改您的 reprocess_photo 以返回。

```
 def reprocess_photo
    # don't crop if the user isn't updating the photo
    #   ...or if the photo is already being processed
    return unless (cropping? && !processing)
    self.processing = true
    photo.reprocess!
    self.processing = false
  end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-28T21:19:16.153

尝试改变

```
 Paperclip.options[:command_path] = "C:/Program Files/ImageMagick-6.7.9-Q16/" 
```

到

```
 Paperclip.options[:command_path] = 'C:/PROGRA~1/IMAGEM~1.0-Q' 
```

似乎找不到 image-Magick

# asp.net-mvc-3 - 将数据从 Foreach 循环中具有相同模型的部分视图传递到控制器

> ID：12559775
> 
> 赞同：0
> 
> 时间：2012-09-24T06:16:37.763
> 
> 标签：asp.net-mvc-3, view, partial

我正在研究 MVC3 项目，我需要将具有相同模型实例的部分视图中的数据传递到控制器。

主视图包含模型为 `@model Models.Patients.PatientNewVisitModel`

```
@foreach (var item in Model.woundList)
{
   @Html.Partial("PatientNewVisitPartialView",item.Wound)                                
} 
```

部分视图包含模型为

`@model Models.Patients.PatientNewVisitModel.Wound`

这是从主视图的foreach语句呈现的

控件已显示，但我无法在`PatientNewVisitModel`模型下的控制器中获取相应的值。

[HttpPost]

```
 public ActionResult PatientNewVisit(PatientNewVisitModel objPatientNewVisitModel)
    {
        return null;
    } 
```

请帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:54:15.723

在伤口局部视图中，您可以执行以下操作：

```
@{ var index = Guid.NewGuid(); }
@Html.Hidden("Wounds.Index", index)

@Html.TextBox("Wounds[" + index + "].Property1", Model.Property1)
@Html.TextBox("Wounds[" + index + "].Property2", Model.Property2) 
```

# python - Python PyAudio 安装在 windows 上导入 PortAudio V19 的问题

> ID：12559778
> 
> 赞同：1
> 
> 时间：2012-09-24T06:16:44.273
> 
> 标签：python, windows-7, installation, portaudio, pyaudio

我正在尝试为应用程序安装 PyAudio，以记录来自麦克风输入的音频剪辑。我从可执行文件（Windows 7，python 2.6）安装了 PyAudio。但是，当我尝试在代码中导入此库时，出现以下错误。

```
Please build and install the PortAudio Python bindings first. 
```

我尝试了[Python PyAudio 安装问题（使用 PortAudio）](https://stackoverflow.com/questions/12486628/python-pyaudio-installation-problems-with-portaudio?answertab=active#tab-top)提供的解决方案，但是当我使用[http://www.lfd.uci.edu/~gohlke/pythonlibs/#pyaudio提供的可执行文件安装它时收到以下错误消息](http://www.lfd.uci.edu/~gohlke/pythonlibs/#pyaudio)

```
Traceback (most recent call last):
  in <module>
    import pyaudio
  File "C:\Python26\lib\site-packages\pyaudio.py", line 99, in <module>
    import _portaudio as pa
ImportError: DLL load failed: %1 is not a valid Win32 application. 
```

我尝试构建[PortAudio v19](http://portaudio.com/)，但它也不适合我。我被困在这一点上，我将不胜感激在这方面的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2018-12-12T20:40:23.073

为此，您需要先安装 brew。检查[此](https://docs.brew.sh/Homebrew-and-Python)链接。然后，写下你的命令

```
brew install portaudio 
```

一旦安装了portaudio，运行

```
pip install python-pyaudio 
```

# android - 如何使用不同的经纬度值绘制路线？

> ID：12559784
> 
> 赞同：6
> 
> 时间：2012-09-24T06:17:24.053
> 
> 标签：android, google-maps

我正在实现一个与地图活动相关的应用程序。

根据我的要求，我在我的数据库中保存了许多 lat long 值，
如下所示：

id 经纬度 1 17.490431 78.407435 2 17.488221 78.409667 3 17.48249 78.414559 4 17.470292 78.426747

我的要求是从数据库中获取所有纬度/经度，并使用纬度/经度绘制路线。

如果有人知道解决方案，请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T10:58:49.550

首先，您必须知道如何在两个地理点之间绘制路线。

[从我的位置到android中目标位置的距离计算](https://stackoverflow.com/questions/10683554/distance-calculation-from-my-location-to-destination-location-in-android)

[Android - 在两个地理点之间绘制路线](https://stackoverflow.com/questions/8222396/android-to-draw-a-route-between-two-geo-points)

[https://stackoverflow.com/questions/10551034/how-to-draw-line-between-two-pointslatitude-and-longitude-in-google-map-in-and](https://stackoverflow.com/questions/10551034/how-to-draw-line-between-two-pointslatitude-and-longitude-in-google-map-in-and)

[通过让我的点到目的地点来绘制路线](https://stackoverflow.com/questions/10393589/draw-route-by-getting-my-point-to-destination-point)

[借助保存在数据库中的纬度和经度值绘制路线](https://stackoverflow.com/questions/6275140/drawing-routes-with-the-help-of-latitude-and-longitude-values-saved-in-database)

按照链接和网上冲浪。那里有很多资源。

# hadoop - 生成素数的并行算法（可能使用 Hadoop 的 map reduce）

> ID：12559788
> 
> 赞同：14
> 
> 时间：2012-09-24T06:18:01.123
> 
> 标签：hadoop, parallel-processing, mpi, primes, number-theory

生成素数是我经常尝试的一个玩具问题，尤其是在尝试新的编程语言、平台或风格时。

我正在考虑尝试使用 Hadoop（Map Reduce）编写质数生成算法或质数测试算法。

我想我会发布这个问题来获取提示、参考、算法和方法。

虽然我的主要兴趣是基于 Map Reduce 的算法，但我不介意查看新的 Hadoop 编程模型或例如使用[PiCloud](http://www.picloud.com/)

关于质数生成，我似乎有一些有趣的问题：[here](https://stackoverflow.com/questions/960980/fast-prime-number-generation-in-clojure)、[here](https://stackoverflow.com/questions/1538644/c-determine-if-a-number-is-prime)和[here](https://stackoverflow.com/questions/7847442/prime-number-generation-algorithm)，但没有任何与 Parallel 方法相关的问题引起我的注意。

提前致谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-24T11:10:01.390

这是[一种](http://en.wikipedia.org/wiki/Haskell_features#Prime_numbers)基于映射和归约（[折叠](http://en.wikipedia.org/wiki/Fold_(higher-order_function)#Tree-like_folds)）的算法。它表达了[埃拉托色尼的筛子](http://en.wikipedia.org/wiki/Sieve_of_Eratosthenes)

     **P** = {3,5,7, ...} \ **U** {{ *p ² , p ² +2p, p ² +4p,* ...} | *p*中的**p** }

对于奇数素数（即没有 2）。折叠树无限向右加深，像这样：

[![在此处输入图像描述](../Images/8d8f66b7e7b91152b5e5d1e3a637bdf8.png)](https://i.stack.imgur.com/LZdjL.gif)

其中每个素数标记该素数的奇数倍流，例如**7** : *49, 49+14, 49+28, ... ，它们全部合并以获得所有合**数**，*然后在合数之间的*差距*。它在 Haskell 中，所以时间由惰性求值机制隐式处理[（以及算法调整，每个比较节点总是让左边的*第一个*数字通过而不要求右边的数字，因为它保证是反正更大）]。

*可以使用奇数代替奇数作为生成倍数的种子，以简化事情（具有明显的性能影响）*。**

 *作品可以自然地划分为连续素数正方形之间的片段。Haskell 代码如下，但我们也可以将其视为可执行伪代码[（其中`:`是列表节点惰性构造函数，`f(x)`编写了函数调用`f x`，括号仅用于分组）]：

```
primes = 2 : g []
  where
    g ps = 3 : minus [5,7..] (_U [[p*p, p*p+2*p..] | p <- g ps])
    _U ((x:xs):t) = x : union xs (_U (pairs t))
    pairs ((x:xs):ys:t) = (x : union xs ys) : pairs t

union (x:xs) (y:ys) = case compare x y of 
    LT -> x : union  xs (y:ys) 
    EQ -> x : union  xs    ys 
    GT -> y : union (x:xs) ys

minus (x:xs) (y:ys) = case compare x y of
    LT -> x : minus  xs (y:ys) 
    EQ ->     minus  xs    ys 
    GT ->     minus (x:xs) ys 
```

讨论在[这里](http://www.haskell.org/haskellwiki/Prime_numbers)。更复杂、更懒惰的调度在[这里](http://www.haskell.org/haskellwiki/Prime_numbers_miscellaneous#Implicit_Heap)。[这个 SO 答案](https://stackoverflow.com/a/8871918/849891)也显示了（相关）Haskell 代码在生成器方面的近似翻译；[这是](https://stackoverflow.com/a/10733621/849891)Python 中的一个。*

# mod-rewrite - Mod rewrite - 将带有参数的 url 重定向到新的 url

> ID：12559790
> 
> 赞同：2
> 
> 时间：2012-09-24T06:18:07.050
> 
> 标签：mod-rewrite, apache2

我需要一些帮助将具有特定参数值的 url 重定向到新 url。例如，我如何将这两个 id 为 123 和 345 的 url 重定向到一个新的 url？

重定向

[http://testserver.xyz.com/abc/content/content.jsp?contentId=123](http://testserver.xyz.com/abc/content/content.jsp?contentId=123) http://testserver.xyz.com/abc/content/content.jsp?contentId=345

到

[https://newpage.silkroad.com/](https://newpage.silkroad.com/)

任何帮助将不胜感激

TIA

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T16:42:35.490

使用 mod_rewrite，将这些规则添加到文档根目录中的 htaccess 文件或 vhost/server 配置中：

```
RewriteEngine On
RewriteCond %{QUERY_STRING} contentId=123 [OR]
# add however any more id's here, with `[OR]` flags
RewriteCond %{QUERY_STRING} contentId=345 
RewriteRule ^/?abc/content/content\.jsp$ https://newpage.silkroad.com/? [L,R=301] 
```

# uiviewcontroller - UIViewControllerHierarchyInconsistency 在 ios5 中有效，但在 ios6 中无效

> ID：12559792
> 
> 赞同：4
> 
> 时间：2012-09-24T06:18:11.230
> 
> 标签：uiviewcontroller, ios6, xcode4.5

在我更新到 ios6 之前，我有一个完美的工作项目。

当我在一个栏项目上标签以显示一个带有视图的弹出窗口时，应用程序崩溃了......

这是我得到的错误

```
 "reason: 'A view can only be associated with at most one view controller at a time! View <UIView: 0xaa7d730; frame = (20 0; 748 1024); autoresize = RM+BM; layer = <CALayer: 0xaa7d790>> is associated with <TYOFormViewController: 0xaa7d8b0>. Clear this association before associating this view with <TYOFormViewController: 0x14c68a70>.'" 
```

这是声明 UIViewController 和 UIPopoverController 的方法。

```
 - (IBAction)TestDriveTapped:(id)sender{
if (PopoverController != nil) {
    [PopoverController dismissPopoverAnimated:YES];
    self.PopoverController = nil;
}
if (self.PopoverController == nil) {
    UIViewController *bookTestDrive =[[TYOFormViewController alloc] initWithNibName:@"TYOBookTestDriveForm" bundle:nil];

   UIPopoverController *poc  = [[UIPopoverController alloc]
                           initWithContentViewController:bookTestDrive];

   [poc presentPopoverFromBarButtonItem:sender permittedArrowDirections:UIPopoverArrowDirectionAny animated:YES];
     self.PopoverController = poc;
} else {
    if (PopoverController != nil) {
        [PopoverController dismissPopoverAnimated:YES];
        self.PopoverController = nil;
    }
} 
```

}

错误说我必须清除与 TYOFormViewController 的关联才能将其与 TYOFormViewController 关联....这是怎么发生的？？？

希望你能在这个问题上得到你的帮助......整天都被它困住了......

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T14:16:10.440

我在加载一堆 xib 文件时也发生了这种情况。解决方案是进入界面生成器并删除与文件所有者具有相同类名的任何视图控制器对象。所以在我的情况下，这些文件现在只包含视图和子视图，连接到文件的所有者 - 没有控制器。

在解释 xib 文件时，iOS 6 的底层肯定发生了一些变化。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-27T19:46:59.147

iOS 6 稍微改变了视图/控制器的处理。这打破了我的应用程序中加载了 xib 的内容的弹出框，我遇到了和你一样的错误。我发现我已经在我的原始（损坏的版本）中手动分配并初始化了视图控制器代码，然后手动将视图分配给它（实际上忽略了 xib 中的控制器）。在以前的 iOS 版本中运行良好，但不是 6.0。

我的解决方法是清理代码，摆脱手动创建视图控制器，让 iOS 从 xib 为我加载它。

```
 NSArray* nibViews =  [[NSBundle mainBundle] loadNibNamed:@"InfoView" owner:self options:nil];
  InfoView* infoView = [ nibViews objectAtIndex: 0];
  InfoViewController *infoViewController = [ nibViews objectAtIndex: 1]; 
```

不需要从控制器分配给视图（反之亦然）。

我建议您同时查看弹出框控制器和内容控制器，以查找控制器和视图之间的任何直接分配。

# php - 查询连接三个表 yii

> ID：12559794
> 
> 赞同：4
> 
> 时间：2012-09-24T06:18:23.540
> 
> 标签：php, mysql, yii

如何将mysql查询转换为yii。？

我有 3 张桌子

1.  用户头
2.  顾客
3.  客户评级

这是我的 sql 查询

```
SELECT t.email 
FROM   otz_user_header t 
       JOIN otz_customers r 
         ON t.user_id = r.customer_user_id 
       JOIN otz_customer_ratings cr 
         ON cr.customer_user_id = r.customer_user_id 
WHERE  r.rate_auto_approve = 0 
       AND r.rate_email_time IS NOT NULL 
       AND r.total_rating_count IS NOT NULL 
       AND cr.rating_date < Curdate() 
       AND cr.rating_date > Date_sub(Curdate(), INTERVAL 7 day) 
```

如何将此查询转换为 yii ？

提前致谢。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-24T06:42:27.117

“itachi”答案是正确的，但如果你正在寻找 activerecord 方式......

型号：**用户头**

关系：

```
'activeCustomers' => array(
     self::HAS_MANY, 
     'Customer', 
     'customer_user_id', 
     'condition' => 'activeCustomers.rate_auto_approve=0 
                  AND activeCustomers.rate_email_time IS NOT NULL 
                  AND activeCustomers.total_rating_count IS NOT NULL'
), 
```

型号：**客户**

关系：

```
'lastWeekRatings' => array(
     self::HAS_MANY, 
     'CustomerRating', 
     'customer_user_id', 
     'condition' => 'lastWeekRatings.rating_date < CURDATE() 
        AND lastWeekRatings.rating_date > DATE_SUB( CURDATE(), INTERVAL 7 DAY )'
), 
```

下面的代码返回与您的查询相同的模型对象。（我没有测试过）

```
$useremails = UserHeader::model()
     ->with('activeCustomers', 'activeCustomers.lastWeekRatings')
     ->findAll(array(
           'select' => 't.email'
      ));
print_r($useremails); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-24T06:31:44.583

**USE DAO（*数据访问对象*）**

**模型**

* * *

```
public function test(){
        $sql = "SELECT t.email
            FROM otz_user_header t
            JOIN otz_customers r ON t.user_id = r.customer_user_id
            JOIN otz_customer_ratings cr ON cr.customer_user_id = r.customer_user_id
            WHERE r.rate_auto_approve =0
            AND r.rate_email_time IS NOT NULL
            AND r.total_rating_count IS NOT NULL
            AND cr.rating_date < CURDATE( )
            AND cr.rating_date >DATE_SUB( CURDATE( ) , INTERVAL 7
            DAY )";

        return Yii::app()->db->createCommand($sql)->queryAll();
            } 
```

# objective-c - 在 iPad 6.0 模拟器中运行应用程序时出现布局问题

> ID：12559796
> 
> 赞同：2
> 
> 时间：2012-09-24T06:18:29.017
> 
> 标签：objective-c, ios, xcode, ipad, ios6

在将我的 XCode 升级到 4.5 并在 iPad 6.0 模拟器上测试应用程序之后，这对我来说有点不确定。

详细信息- 当我在 iPad 6.0 模拟器上运行应用程序时，会出现很多视图/布局和方向问题。但是，当我在 iOS 6 iPad 设备上从 App Store 下载相同的应用程序时，我的应用程序运行良好。

我正在模拟器上对其进行测试，以支持我的 iOS 6 应用程序。发生这种情况的原因可能是什么？

谢谢

阿克

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:00:34.800

看看我发布到[这个其他类似问题](https://stackoverflow.com/a/12549513/119114)的答案。

基本上，我也看到了你所看到的。

我链接到的答案有一个指向预发布 Apple 开发者论坛的链接（需要开发者帐户才能访问），其中讨论了这个问题（如果我正确阅读了您的描述）。如果您滚动到线程的底部，您会看到多个开发人员表示，和您一样，他们看到他们现有的应用程序（在 App Store 上）在 iOS 6 设备上运行没有问题。

只是当用 Xcode 4.5**编译**，然后在 iOS 6 设备（或模拟器）上运行时，他们看到了问题。由于您在商店中的应用程序是使用*旧*版本的 Xcode 编译的，因此当前拥有您的应用程序的 iOS 6 用户应该没问题。

但是，当您开始提交使用 Xcode 4.5 构建的**新**应用程序或更新时，您应该进行我在另一篇文章中列出的修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-29T03:51:54.703

在以编程方式为子视图设置框架时，您可以使用 self.view.frame 而不是使用，

```
[[UIScreen Mainscreen] bounds] 
```

这将返回当前设备的帧。例如，如果您使用 3.5 英寸视网膜屏幕，它将返回帧 (0 ,0, 320, 480)，如果您使用 4 英寸视网膜，它将返回帧 (0 ,0, 320, 568)。所以很容易处理布局问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-02T22:48:13.417

也许自动布局已激活！我听说这是一个**尚未在模拟器上修复的****错误**女巫。等待更新，那么它应该适合你！:D

 *** * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-30T08:18:33.477

在阅读了 iOS 6 中的 UIOrientation 委托方法更改后，我进行了这些更改以解决问题-

1）使用此方法重置布局 -

```
- (void)willAnimateRotationToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation duration:(NSTimeInterval)duration 
```

2）如果这个代表无法获得设备的当前方向，我用它来获得它 -

```
UIInterfaceOrientation orientation= [[UIApplication sharedApplication] statusBarOrientation];
    [self willAnimateRotationToInterfaceOrientation:orientation duration:1.0f]; 
```

这些东西解决了我的问题。

感谢您的帮助和回复。:)**

# sql - SQL 逻辑运算符优先级或和 ()

> ID：12559798
> 
> 赞同：-1
> 
> 时间：2012-09-24T06:18:39.280
> 
> 标签：sql, oracle10g, operators, operator-precedence

我正在改变这个

```
(NVL(N.col1,'-') <> NVL(O.col1,'-')) OR
(NVL(N.col2,-1) <> NVL(O.col2,-1)) 
```

到

```
NVL(N.col1,'-') <> NVL(O.col1,'-') OR
NVL(N.col2,-1) <> NVL(O.col2,-1) OR 
```

在触发器的 when 子句中，因为它超出了允许的大小。我去掉了括号。有人可以确认运营商不会有任何影响吗？还请提供有关运算符优先级的任何文档是否可用。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:22:19.627

在这里您可以参考运营商。

1.  [http://msdn.microsoft.com/en-us/library/ms190276.aspx](http://msdn.microsoft.com/en-us/library/ms190276.aspx)
2.  [http://docs.oracle.com/html/A95915_01/sqopr.htm](http://docs.oracle.com/html/A95915_01/sqopr.htm)
3.  [http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-PRECEDENCE](http://www.postgresql.org/docs/current/static/sql-syntax-lexical.html#SQL-PRECEDENCE)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:26:19.120

是的，无论有无括号，在所有符合 SQL 标准的 SQL 产品中，结果都应该相同。

比较运算符（如`<>`）的优先级高于逻辑运算符（如 ）`AND`。

# c++ - 如何在 VCL 表单应用程序中创建和调用函数

> ID：12559799
> 
> 赞同：-2
> 
> 时间：2012-09-24T06:18:40.840
> 
> 标签：c++, function, undefined

我正在使用 C++ Builder，并且在为某些表单操作创建函数后得到了一些帮助。我已经尝试了下面的代码，但没有运气。

这是我的代码：

```
int calculateAndDisplayImportantAppointments()
{
    int integerNumberOfImportantAppointments = calCalendar.getNumberOfImportantAppointments();
    if (integerNumberOfImportantAppointments > 0)
    {
        // itoa is not standard (like any of this is)
        WCHAR strN[32];
        swprintf(strN, L"%d", integerNumberOfImportantAppointments);

        // not familiar with ShowMessage(), but I *think* this will work.
        ShowMessage("You have " + UnicodeString(strN) + " important appointments. Do you wish to view them?");
    }

    return integerNumberOfImportantAppointments;
} 
```

我收到以下错误：`calculateAndDisplayImportantAppointments`尝试调用此函数时调用未定义的函数。

我可以帮忙解决这个问题吗？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-25T07:33:24.407

抱歉，非常简单的解决方案。

该函数需要写在声明它的代码部分之上。

# java - 在线程“main”java.lang.NoSuchMethodError：main？

> ID：12559800
> 
> 赞同：0
> 
> 时间：2012-09-24T06:18:51.637
> 
> 标签：java, runtime-error

这是我的代码。我不明白为什么我一直收到这个？

它应该递归地将基数从基数 10 更改为任何给定的基数。

任何帮助都是极好的。

```
 import java.util.Scanner;

 public class Recursion{

        public static void main(String[] args)
        {
                try {   System.out.println(" Please input the base you would like to convert into " );
                        Scanner BaseIn = new Scanner (System.in);
                        int base1 = BaseIn.nextInt();

                        System.out.println( "Now input the number you would like to convert" );
                        Scanner NumIn = new Scanner (System.in);
                        int number = NumIn.nextInt();

                        BaseConversion (number, base1);
                    }

                catch (Exception e)
                {
                System.out.print("somethigng stupid");
                }
        }

        public String BaseConversion(int num, int base)
        {
                if (num < base)
                {
                return new String ("" + num);
                }
                else
                {
                return BaseConversion (num/base, base) + new String("" + (num % base));
                }
        }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:32:13.657

您不能从静态上下文中进行非静态引用。您的上述代码甚至无法编译，因为您正试图从静态主方法调用非静态方法（BaseConversion）。

在创建 BaseConversion 方法后尝试运行您的代码`static`..

建议： - 请遵循编码约定，以使您的代码更有意义。您的方法和变量名称始终遵循驼峰式（以小写字母开头，随后的单词以大写字母开头）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:32:02.353

您必须给出要运行的*类*的名称，而不是*方法*的名称。

在这种情况下

```
java Recursion 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T06:49:03.143

`BaseConversion`是实例方法，您需要类的实例才能访问它。

所以你应该像这样调用它

```
`new Recursion().baseConversion(number, base1)` //I have changed name according to java conventions. 
```

否则将其声明为`static`

您的课程将如下所示。你现在可以继续你的逻辑

```
public class Recursion {

public static void main(String[] args) {
    try {
        System.out
                .println(" Please input the base you would like to convert into ");
        Scanner BaseIn = new Scanner(System.in);
        int base1 = BaseIn.nextInt();

        System.out
                .println("Now input the number you would like to convert");
        Scanner NumIn = new Scanner(System.in);
        int number = NumIn.nextInt();

        System.out.println(new Recursion().baseConversion(number, base1));
    }

    catch (Exception e) {
        System.out.print("somethigng stupid");
    }
}

public String baseConversion(int num, int base) {
    if (num < base) {
        return new String("" + num);
    } else {
        return baseConversion(num / base, base)
                + new String("" + (num % base));
    }
}

} 
```

# c# - 对象引用未设置为对象的实例 5

> ID：12559805
> 
> 赞同：1
> 
> 时间：2012-09-24T06:19:57.843
> 
> 标签：c#, asp.net, jqgrid

这是我的问题：

我无法显示数据库中的所有记录。
有错误提示
未将对象引用设置为对象的实例。

我真的不知道我将如何解决这个问题。

这是错误..

```
strProjectID = Request.QueryString["ProjectID"].ToString(); 
```

这是代码...

```
protected void Page_Load(object sender, EventArgs e) 
    {

        strProjectID = Request.QueryString["ProjectID"].ToString();
        if (JQGrid1.AjaxCallBackMode != AjaxCallBackMode.None)            
        {               
            // save the last grid state in session - to be used for exporting                
            Session["gridFilterPageState"] = JQGrid1.GetState();            
        }
    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:21:15.587

如果没有`ProjectID`查询字符串参数传递给您在空实例上调用 .ToString 的请求。因此，请确保在调用页面时传递此查询字符串参数：`/WebFormName.aspx?ProjectID=123`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:23:45.610

当您指定的参数没有在给定的url中传递时会出现此问题...确保指定的参数必须通过url传递...您可以通过以下方式检查请求是否包含给定的参数：

```
if(Request.QueryString["ProjectID"] !=null)
{
   strProjectID = Request.QueryString["ProjectID"].ToString();
} 
```

如果你真的想要没有检查并且根本没有错误，你可以这样做：

```
 strProjectID = Convert.ToString(Request.QueryString["ProjectID"]); 
```

`empty string`如果`Querystring`不包含，它将返回`ProjectID`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T06:26:21.033

用下面的这段代码替换您的代码。

```
protected void Page_Load(object sender, EventArgs e) 
{
    if(Request.QueryString["ProjectID"] != null)
    {
       strProjectID = Request.QueryString["ProjectID"].ToString();
    }

    if (JQGrid1.AjaxCallBackMode != AjaxCallBackMode.None)            
    {               
        // save the last grid state in session - to be used for exporting                
        Session["gridFilterPageState"] = JQGrid1.GetState();            
    }
} 
```

**说明：**问题是QueryString 中可能不存在*ProjectID 。*因此，为了安全起见，最好有一个空检查。

# python - 异常未通过 IOError：[Errno 2]

> ID：12559810
> 
> 赞同：0
> 
> 时间：2012-09-24T06:20:32.623
> 
> 标签：python, python-2.7, ioerror, except

我有一个我正在使用 py 2.7 开发的简单游戏，它使用 pickle 来读取和写入保存文件。

我是自学成才，一周前才开始学习。我通常可以在网上找到我的问题的解决方案，但是这个解决方案花费的时间太长了，所以我需要一些帮助。

*问题*是我有这个尝试/除了

```
 f = file("VTSave2.pkl", "rb")
        try:
            game = load(f)
            print "Game has been loaded from save 2."
        except IOError:
            pass 
```

在保存阅读的事情中。VTSave2.pkl 当前不存在——我正在使用这个事实来测试 try/except。

虽然我确实得到了相应的错误 [Errno 2]，但 IOError 传递器并没有做蹲下。我得到了一个退出程序和一个回溯，而不是“加载取消”。

我犯了什么愚蠢的错误吗？有什么我应该知道的吗？我应该提供更多信息吗？非常感谢您的宝贵时间！

*编辑：谢谢！现在可以了。由于有人尝试“纠正”代码的格式，并且在我采用它时最终破坏了我的程序，因此我删除了所有不再与问题相关的代码，以避免引诱错误的清理。谢谢！*

正确的工作代码：

```
 try:
        f = open("VTSave2.pkl", "rb")
        game = load(f)
        print "Game has been loaded from save 2."
    except IOError:
        pass 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T06:23:52.787

这引发了异常

```
f = file("VTSave2.pkl", "rb") 
```

你需要在之后移动它`try:`

如果您仔细阅读回溯，您应该会看到在该行号处引发了异常

旁白：`file()`已弃用。你应该使用`f = open("VTSave2.pkl", "rb")`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:27:06.903

你`print "Load cancelled."`的`else`部分不会像你一样被执行`if`。

您可能需要重新考虑它。

# r - 打开 R 控制台窗口时的默认大小

> ID：12559813
> 
> 赞同：4
> 
> 时间：2012-09-24T06:21:09.070
> 
> 标签：r

当我打开我的默认 RGui（不是 R Studio 或任何花哨的东西）时，会出现一个全屏灰色 RGui 窗口和一个小小的白色“R 控制台”。我如何

**a)**使“R 控制台”在打开 RGui 时最大化。

**b)**使当我打开 RGui 时，它占据了我全屏的一部分，而不是我的整个屏幕。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2018-09-04T13:51:37.757

由于 Google 几乎不可能找到相关的控制台主题，因此我最终在尝试了解*Rconsole*文件`R`的内容和用法时偶然发现了该解决方案。

 *Rconsole文件位于*：*`${R_HOME}/etc/Rconsole` . 它的设置在安装阶段由您的选择设置为默认设置，但可能包含许多其他地方没有的其他选项。与其他一些自定义设置文件不同，例如：

```
.RData
.Renviron
.Rhistory
.Rprofile 
```

该`Rconsole`文件不是“*点*”。因此，您最好将默认路径从上面的路径复制到您的`R_USER`主目录并在那里进行编辑。

设置 R 应用程序窗口默认大小的关键是确保您编辑 MDI 相关部分，使其显示为：

```
...
#--------------------------------------
# Style
#--------------------------------------
# This can be 'yes' (for MDI) or 'no' (for SDI).
MDI = yes
...
# Dimension of MDI frame in pixels
# Format (w*h+xorg+yorg) or use -ve w and h for offsets from right bottom
# This will come up maximized if w==0
# MDIsize = 0*0+0+0
# MDIsize = 1000*800+100+0
MDIsize = -50*-50+50+50  # 50 pixels space all round

# The internal pager can displays help in a single window
# or in multiple windows (one for each topic)
# pagerstyle can be set to `singlewindow' or `multiplewindows'
pagerstyle = multiplewindows
... 
```

这里就是`MDIsize`设置默认窗口大小。如果其中的第一个值是`0`，则窗口将最大化。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2012-10-13T13:25:48.913

安装时，您可以选择基于 HUD/GUI 的选项，这样在打开时，白色控制台会占据整个 RGui 窗口，而 RGUI 窗口约为屏幕大小的 25%。我忘记了您选择的选项，但是当您安装时`.exe`，系统会要求您在两个基于 HUD 的选项之间进行选择...选择另一个...无法真正解释，但如果您是关注。*

# c# - 重命名客户端的参数类型

> ID：12559817
> 
> 赞同：0
> 
> 时间：2012-09-24T06:21:24.273
> 
> 标签：c#, wcf, wcf-client

有没有办法重命名 WCF 服务客户端的类型？

例如，我有两个版本（V1 和 V2）的服务。对于每个版本，我都有相同的模型（Model1 和 Model2），但版本发生了变化（所以我将其重命名为 Model1V1、Model1V2 等）。

我希望这两种服务的客户都将模型类型视为 Model1 和 Model2。

我知道我可以重命名运营合同。

```
[ServiceContract]
public interface ServiceV1
{
    [OperationContract]
    Model1V1 SomeOp(Model2V1 arg);
}

[ServiceContract]
public interface ServiceV2
{
    [OperationContract]
    Model1V2 SomeOp(Model2V2 arg);
}

[DataContract]
public class Model1V1
{
    ...
}
[DataContract]
public class Model2V1
{
    ...
}
[DataContract]
public class Model1V2
{
    ...
}
[DataContract]
public class Model2V2
{
    ...
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:34:27.797

如果客户端是从 WSDL/MEX 生成的，那么这应该很简单：

```
[DataContract(Name = "Model1")]
public class Model1V1
{ ... 
```

ETC

如果客户正在使用程序集共享，那么它就无法完成，AFAIK。

# iphone - 如何使应用程序支持 ios6 和 iphone 5

> ID：12559818
> 
> 赞同：1
> 
> 时间：2012-09-24T06:21:31.963
> 
> 标签：iphone, ios, ios6, iphone-5

我在 App Store 中有一个应用程序，我需要为 ios6 和 iphone5 更新该应用程序。当现有应用程序已经提交到应用商店时，要采取哪些步骤来更新现有应用程序？

我在mac中安装了xcode4.5。如果我在 iOS 6 中构建应用程序，iOS 5 是否支持它？我应该如何制作同时支持 iOS 5 和 iOS 6 的应用程序？

编辑

```
 public static bool IsTall
    {
        get {
            return UIDevice.CurrentDevice.UserInterfaceIdiom
            == UIUserInterfaceIdiom.Phone
            && UIScreen.MainScreen.Bounds.Height
            * UIScreen.MainScreen.Scale >= 1136;
        }
    }

static UIImage tableViewBackgroundImage = null;
public static UIImage TableViewBackgroundImage
{
    get
    {
        if (tableViewBackgroundImage == null)
            tableViewBackgroundImage = IsTall 
                ? UIImage.FromFile("Images/TableViewBackground-568h@2x.png")
                : UIImage.FromFile("Images/TableViewBackground.png");
        return tableViewBackgroundImage;
    }
} 
```

我用上面的代码为 iphone 5 制作应用程序。但我不知道把上面的代码放在哪里。任何人都可以使用这个代码，请与我分享。

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T06:26:41.163

1.  确保摘要中的**部署目标** 设置`5.0`为支持 iOS 5+ 设备。
2.  为 iPhone 5`Default-568h@2x`的**启动图像**添加图像。
3.  检查xib 文件和情节提要中的**自动调整大小元素，以在 3.5 英寸和 4 英寸显示器上产生可接受的结果（您可以在模拟器中检查）。**

其余的应该“正常工作”。

# java - 如何使用 slf4j 记录器以某些颜色显示错误消息？

> ID：12559821
> 
> 赞同：1
> 
> 时间：2012-09-24T06:21:52.587
> 
> 标签：java, slf4j

如何使用`slf4j`记录器以某些颜色显示错误消息？
在这方面的任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-27T14:51:17.463

无法更改`slf4j`日志的颜色，因为没有格式化程序。SLF4J 是您的应用程序和一些日志记录工具之间的中间件，例如 Log4j 或 Logback。

您可以更改 Log4j 输出中的颜色，如此[处](https://stackoverflow.com/questions/7848325/making-a-log4j-console-appender-use-different-colors-for-different-threads)所述。

# css - Visualforce 页面中的迷你页面布局 CSS

> ID：12559828
> 
> 赞同：0
> 
> 时间：2012-09-24T06:22:54.197
> 
> 标签：css, salesforce, apex-code

我有一个 VF 页面，它使用 Apex`StandardSetController()`来显示标准对象记录的列表（我的页面中的案例）。作为 Salesforce 标准功能的迷你页面布局存在一些 CSS 问题。

在悬停时，迷你页面布局按预期显示，但位置是绝对的。我有可滚动的视图，所以当我在滚动后悬停在记录上时（在以前隐藏的记录上），迷你页面布局显示在绝对位置而不是当前位置。

我敢肯定这与`StandardSetController()`. 是否有针对这种情况的 CSS 补丁。由于类和 CSS 可能在新版本中从 Salesforce 端更改，因此更改标准 CSS 是否是一种正确的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-25T06:54:18.293

如果您认为可以应用正确的 CSS 来调整迷你页面，请找到迷你页面 div 类或 ID 是什么，并将更正后的 CSS 放在 visualforce 页面顶部的样式标记中。

```
<apex:page>
<style>
div.minipagelayout { position:relative; } or something
</style>
...
</apex:page> 
```

# ruby - 覆盖字符串的一部分

> ID：12559830
> 
> 赞同：0
> 
> 时间：2012-09-24T06:23:25.380
> 
> 标签：ruby, string, ruby-1.9.3

是否有一种简单的方法来覆盖字符串，类似于以下内容或类似内容？

```
s = "123456"
r1 = "abc"
s.loverwrite(r1) # => "abc456"
s.coverwrite(r1) # => "12abc6"  (or "1abc56")
s.roverwrite(r1) # => "123abc"

r2 = "abcdefghi"
s.loverwrite(r2) # => "abcdef"
s.coverwrite(r2) # => "bcdefg"  (or "cdefgh")
s.roverwrite(r2) # => "defghi" 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:31:22.783

很容易`[]=`：

```
class String
  def loverwrite(s)
    dup.tap{|result| result[0, s.length] = s[0, length]}
  end
end 
```

# c# - 如何合并两个选择查询？

> ID：12559831
> 
> 赞同：1
> 
> 时间：2012-09-24T06:23:29.600
> 
> 标签：c#, sql-server

我解决了那个查询......但现在我必须合并这两个查询：

```
(SELECT Zila,
COUNT(AbhidayMaster.OfficeRegId) As AbhidayPaidSansthan,
SUM(AbhidayMaster.TotalEmp) As TotalWorkerPaid
FROM PanjikaranMaster, AbhidayMaster
WHERE PanjikaranMaster.OfficeRegId=AbhidayMaster.OfficeRegId
AND AbhidayMaster.DipositDate Between ('2012-06-22') AND ('2012-09-19') GROUP BY Zila)

Select 
((SELECT count(distinct OfficeRegId) FROM PanjikaranMaster)
 -
(SELECT count(distinct OfficeRegId) FROM AbhidayMaster)) As AbhidayNotPaidSansthan 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:25:21.943

怎么样：

```
SELECT 
   Zila, 
   COUNT(AbhidayMaster.OfficeRegId) As AbhidayPaidSansthan ,
   SUM(AbhidayMaster.TotalEmp) As TotalWorkerPaid
FROM 
   PanjikaranMaster
INNER JOIN
   AbhidayMaster ON PanjikaranMaster.OfficeRegId = AbhidayMaster.OfficeRegId
WHERE
   AbhidayMaster.DipositDate BETWEEN '20120622' AND '20120919'
GROUP BY 
   Zila 
```

我更改了您的 JOIN 语法以使用正确的 ANSI/ISO 标准 JOIN - 一个显式`INNER JOIN`的 JOIN 条件就在它所属的位置（请参阅[要踢的坏习惯：使用旧式 JOIN](https://sqlblog.org/2009/10/08/bad-habits-to-kick-using-old-style-joins)以了解为什么“旧式” JOIN 是真是个坏主意，应该避免）。

我还将您的日期字符串文字更改为语言和区域设置安全-格式为`YYYYMMDD`（**无破折号**！）

# php - Javascript EventSource 与 xmlhttprequest 同时与 PHP 服务器交互

> ID：12559832
> 
> 赞同：0
> 
> 时间：2012-09-24T06:23:35.130
> 
> 标签：php, javascript, xmlhttprequest

我正在尝试在 javascript 中使用 EventSource。但是一旦我使用它们，我就会遇到一些麻烦。首先，在重新加载页面时，EventSource 无法重新连接。其次，使用它会阻止 XmlHttpRequests 正常工作。在下面的代码中，如果我注释了 event_source 相关代码，则 xml 请求可以正常工作。如果我创建事件源并添加侦听器，则 xml 请求永远不会成功。

```
envent_source = new EventSource('event-source.php');
envent_source.addEventListener('update', function(event) {
  console.log("update event");
}, false);

var request = new XMLHttpRequest();
request.onreadystatechange = function() {
  if (this.readyState == this.DONE) {
    if (this.status == 200)
      console.log("received");
  }
}
request.open("GET", "document.xml");
request.send(); 
```

我错过了什么吗？EventSource 需要谨慎使用吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T22:51:56.367

[正如vinyar](https://stackoverflow.com/users/1427309/vinayr)所指出的，问题不是客户端而是服务器端。在我的例子中，服务器使用 php 会话来确保来自同一客户端的请求的互斥执行。因此，GET 请求处于等待状态，直到事件源脚本终止。

更多信息：[PHP 脚本的同时请求](https://stackoverflow.com/questions/1430883/simultaneous-requests-to-php-script)

# java - JTable行排序而不更改“Sl No”列

> ID：12559835
> 
> 赞同：0
> 
> 时间：2012-09-24T06:23:51.613
> 
> 标签：java, swing, jtable, comparator, tablerowsorter

在我`JTable`的其他列中，我有一个“序列号”列，它只是对表中的记录进行编号。我希望在通过单击`JTable`列标题对行进行排序时修复此列。排序正常，但“序列号”在此过程中混淆了。有什么办法可以保留“序列号”吗？列在我对行进行排序时固定？

感谢您对此的帮助。

例子：

SlNo 姓名
1 约翰
2 彼得
3 亚历克

通过（单击“名称”列）对其进行排序后，我得到了这个：

SlNo 姓名
3亚历克
1 约翰
2 彼得

但是，我希望结果为：

SlNo 姓名
1亚历克
2 约翰
3 彼得

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:32:16.853

您是否尝试过实现自己的[TableRowSorter](http://docs.oracle.com/javase/7/docs/api/javax/swing/table/TableRowSorter.html)？

看看[排序和过滤](http://docs.oracle.com/javase/tutorial/uiswing/components/table.html#sorting)

**更新**

我一直在挖掘代码来检查这一点。这是可行的，但你将不得不重新发明轮子才能让它发挥作用。

默认实现只是将行/列值一起比较`getValueAt(row, column)`（等），实际上过滤器提供了更多有价值的信息：P ...

你真正想要覆盖的方法是私有的......（`DefaultRowSorter.compare`），但我不确定它会以任何方式做你想要的......

您剩下的唯一解决方案是从头开始实施您的解决方案（从 开始`RowSorter`），它能够为您提供执行子组排序所需的所有信息。诸如表格模型，比较行和列之类的东西...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-01-15T13:04:03.583

一个非常简单的实现是

```
public class siNo implements RowSorterListener {
    JTable table;
    public siNo(JTable table) {
        this.table = table;
    }

    @Override
    public void sorterChanged(RowSorterEvent e)
    {
        for (int i = 0; i < table.getRowCount(); i++) {
            table.setValueAt(Integer.toString(i+1), i, 0);
        }
    }
} 
```

**您的课程包含表格**

```
sorter.setSortable(0, false);
sorter.addRowSorterListener(new siNo()); 
```

# python - 数据库反射在 sqlalchemy 中引发错误

> ID：12559839
> 
> 赞同：0
> 
> 时间：2012-09-24T06:24:12.670
> 
> 标签：python, mysql, sqlalchemy

我正在尝试使用 sqlalchemy 的反射功能，但遇到了问题。

这是**我要反映的 mysql 表**。

```
| Country | CREATE TABLE `Country` (
  `Code` varchar(8) NOT NULL,
  `Country` varchar(64) NOT NULL,
  `IsValid` varchar(1) DEFAULT 'Y',
  PRIMARY KEY (`Code`)
) ENGINE=InnoDB DEFAULT CHARSET=latin1 | 
```

**反射代码（sch.py​​）。**

```
from sqlalchemy.ext.declarative import declarative_base
import sqlalchemy
import eng

#Base = sqlalchemy.ext.declarative.declarative_base()
Base = declarative_base()

country = Table('Country',eng.Meta,autoload=True)
class Country(Base):    
    __tablename__ = country
    __mapper_args = {
        'primary_key' : [country.c.Code]
    } 
```

**英语.py**

```
import sqlalchemy
import sqlalchemy.orm

eng = sqlalchemy.create_engine('mysql://user:pass@host/db',echo=True)

Meta = sqlalchemy.MetaData()
Meta.bind = eng

sesDec = sqlalchemy.orm.sessionmaker(bind=eng) 
```

当`import sch`我得到错误。

```
import sqlalchemy
from sch import Country
import eng

ses = eng.sesDec()

res = ses.query(Country.Code.label('Code'),Country.Country.label('Country'))

for rec in res.filter(Country.IsValid == 'Y').filter(Country.Code.like('A%')).order_by(Country.Code).all():
    print rec 
```

**错误（堆栈跟踪的底部）**

```
 File "/pythonlib/lib64/python2.4/site-packages/sqlalchemy/sql/expression.py", line 4198, in description
    return self.name.encode('ascii', 'backslashreplace')
AttributeError: 'Table' object has no attribute 'encode 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:54:19.267

```
class Country(Base):    
    __tablename__ = country 
```

你的意思是`__table__ = country`？

# android - 如何使用 fastscroll 和 albhabet 索引器实现 ListView

> ID：12559843
> 
> 赞同：4
> 
> 时间：2012-09-24T06:24:25.630
> 
> 标签：android, android-layout, android-intent, android-emulator, android-widget

请帮助我对此感到震惊 2 天。我想用 fastscroll 和 albhabet 索引器实现 ListView，如联系人应用程序/下图所示。我正在使用 SimpleAdapter 来填充 ListView。从图中可以看出，通过从右侧的字母索引器中选择一个字母，listView 的选择会转到相应的 ListItem。请分享一些例子。提前谢谢你。EX：下面是我的代码，它只是对字母进行排序，当我点击 E 时，与 E 相关的字母数据是 gng 到 diaplay ..但是当我触摸字母时，它没有在中间显示 E 文本框。

![在此处输入图像描述](../Images/3fde15c38ecd4f7959634ef45236e07b.png)

如何在中间显示 E 文本框..当我触摸 fastscroll 中间文本框时必须显示。

MainActivity.java

```
 public class MainActivity extends Activity implements SearchView.OnQueryTextListener,SearchView.OnCloseListener {

private ListView listView;
private SearchView search;
EfficientAdapter objectAdapter;
EfficientAdapter2 objectAdapter1;
int textlength=0;
private CheckBox checkStat, checkRoutine, checkTat;
 private GestureDetector mGestureDetector;

    // x and y coordinates within our side index
    private static float sideIndexX;
    private static float sideIndexY;

    // height of side index
    private int sideIndexHeight;

    // number of items in the side index
    private int indexListSize;

    // list with items for side index
    private ArrayList<Object[]> indexList = null;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
   setContentView(R.layout.homempleb);
   Log.i("scan"," txtScanResult ");

   Arrays.sort(CountriesList.name);
ActionItem nextItem     = new ActionItem(); 
final QuickAction quickAction = new QuickAction(this, QuickAction.VERTICAL);
quickAction.addActionItem(nextItem);
quickAction.setOnDismissListener(new QuickAction.OnDismissListener()           {            
    @Override
    public void onDismiss() {
        Toast.makeText(getApplicationContext(), "Dismissed", Toast.LENGTH_SHORT).show();
    }
});

listView = (ListView) findViewById(R.id.homelistView);
listView.setTextFilterEnabled(true);
objectAdapter = new EfficientAdapter(this);
 mGestureDetector = new GestureDetector(this, new SideIndexGestureListener());
listView.setAdapter(objectAdapter);

}
 @Override
    public boolean onTouchEvent(MotionEvent event)
    {
        if (mGestureDetector.onTouchEvent(event))
        {
            return true;
        } else
        {
            return false;
        }
    }

    private ArrayList<Object[]> createIndex(String[] strArr)
    {
        ArrayList<Object[]> tmpIndexList = new ArrayList<Object[]>();
        Object[] tmpIndexItem = null;

        int tmpPos = 0;
        String tmpLetter = "";
        String currentLetter = null;
        String strItem = null;

        for (int j = 0; j < strArr.length; j++)
        {
            strItem = strArr[j];
            currentLetter = strItem.substring(0, 1);

            // every time new letters comes
            // save it to index list
            if (!currentLetter.equals(tmpLetter))
            {
                tmpIndexItem = new Object[3];
                tmpIndexItem[0] = tmpLetter;
                tmpIndexItem[1] = tmpPos - 1;
                tmpIndexItem[2] = j - 1;

                tmpLetter = currentLetter;
                tmpPos = j + 1;

                tmpIndexList.add(tmpIndexItem);
            }
        }

        // save also last letter
        tmpIndexItem = new Object[3];
        tmpIndexItem[0] = tmpLetter;
        tmpIndexItem[1] = tmpPos - 1;
        tmpIndexItem[2] = strArr.length - 1;
        tmpIndexList.add(tmpIndexItem);

        // and remove first temporary empty entry
        if (tmpIndexList != null && tmpIndexList.size() > 0)
        {
            tmpIndexList.remove(0);
        }

        return tmpIndexList;
    }
    @Override
    public void onWindowFocusChanged(boolean hasFocus)
    {
        super.onWindowFocusChanged(hasFocus);

        final ListView listView = (ListView) findViewById(R.id.homelistView);
        LinearLayout sideIndex = (LinearLayout) findViewById(R.id.sideIndex);
        sideIndexHeight = sideIndex.getHeight();
        sideIndex.removeAllViews();

        // TextView for every visible item
        TextView tmpTV = null;

        // we'll create the index list
        indexList = createIndex(CountriesList.name);

        // number of items in the index List
        indexListSize = indexList.size();

        // maximal number of item, which could be displayed
        int indexMaxSize = (int) Math.floor(sideIndex.getHeight() / 20);

        int tmpIndexListSize = indexListSize;

        // handling that case when indexListSize > indexMaxSize
        while (tmpIndexListSize > indexMaxSize)
        {
            tmpIndexListSize = tmpIndexListSize / 2;
        }

        // computing delta (only a part of items will be displayed to save a
        // place)
        double delta = indexListSize / tmpIndexListSize;

        String tmpLetter = null;
        Object[] tmpIndexItem = null;

        // show every m-th letter
        for (double i = 1; i <= indexListSize; i = i + delta)
        {
            tmpIndexItem = indexList.get((int) i - 1);
            tmpLetter = tmpIndexItem[0].toString();
            tmpTV = new TextView(this);
            tmpTV.setText(tmpLetter);
            tmpTV.setGravity(Gravity.CENTER);
            tmpTV.setTextSize(20);
            LayoutParams params = new LayoutParams(LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT, 1);
            tmpTV.setLayoutParams(params);
            sideIndex.addView(tmpTV);
        }

        // and set a touch listener for it
        sideIndex.setOnTouchListener(new OnTouchListener()
        {
            @Override
            public boolean onTouch(View v, MotionEvent event)
            {
                // now you know coordinates of touch
                sideIndexX = event.getX();
                sideIndexY = event.getY();

                // and can display a proper item it country list
                displayListItem();

                return false;
            }
        });
    }

    class SideIndexGestureListener extends
    GestureDetector.SimpleOnGestureListener
 {
   @Override
    public boolean onScroll(MotionEvent e1, MotionEvent e2,
        float distanceX, float distanceY)
{
    // we know already coordinates of first touch
    // we know as well a scroll distance
    sideIndexX = sideIndexX - distanceX;
    sideIndexY = sideIndexY - distanceY;

    // when the user scrolls within our side index
    // we can show for every position in it a proper
    // item in the country list
    if (sideIndexX >= 0 && sideIndexY >= 0)
    {
        displayListItem();
    }

    return super.onScroll(e1, e2, distanceX, distanceY);
}
  }

    public void displayListItem()
    {
    // compute number of pixels for every side index item
    double pixelPerIndexItem = (double) sideIndexHeight / indexListSize;

    // compute the item index for given event position belongs to
    int itemPosition = (int) (sideIndexY / pixelPerIndexItem);

    // compute minimal position for the item in the list
    int minPosition = (int) (itemPosition * pixelPerIndexItem);

    // get the item (we can do it since we know item index)
    Object[] indexItem = indexList.get(itemPosition);

    // and compute the proper item in the country list
    int indexMin = Integer.parseInt(indexItem[1].toString());
    int indexMax = Integer.parseInt(indexItem[2].toString());
    int indexDelta = Math.max(1, indexMax - indexMin);

    double pixelPerSubitem = pixelPerIndexItem / indexDelta;
    int subitemPosition = (int) (indexMin + (sideIndexY - minPosition) / pixelPerSubitem);

    ListView listView = (ListView) findViewById(R.id.homelistView);
    listView.setSelection(subitemPosition);
    } 
```

高效适配器.java

```
 public class EfficientAdapter extends BaseAdapter {
 private LayoutInflater mInflater;
  private Context context;

  public EfficientAdapter(Context context) {
mInflater = LayoutInflater.from(context);
this.context=context;

  }

 public int getCount() {
return CountriesList.name.length;
 }

     public Object getItem(int position) {

return position;
 }

      public long getItemId(int position) {
return position;
   }

         public View getView(int position, View convertView, ViewGroup parent) {
ViewHolder holder;
if (convertView == null) {
    convertView = mInflater.inflate(R.layout.homemplebrowview, null);
    holder = new ViewHolder();
    holder.text1 = (TextView) convertView
            .findViewById(R.id.name);
    holder.text2 = (TextView) convertView
            .findViewById(R.id.mrn);
    holder.text3 = (TextView) convertView
            .findViewById(R.id.date);
    holder.text4 = (TextView) convertView
            .findViewById(R.id.age);
    holder.text5 = (TextView) convertView
            .findViewById(R.id.gender);
    holder.text6 = (TextView) convertView
            .findViewById(R.id.wardno);
    holder.text7 = (TextView) convertView
            .findViewById(R.id.roomno);
    holder.text8 = (TextView) convertView
            .findViewById(R.id.bedno);                  
    holder.btnList = (Button)convertView.findViewById(R.id.listbutton);
 //   holder.btnList.setOnClickListener(this);

    holder.btnList.setOnClickListener(new OnClickListener() {

        @Override
        public void onClick(View v) {                       
            Intent next=new Intent(context, SeviceDetails.class);
            context.startActivity(next);
        }
    });

    convertView.setTag(holder);
} else {
    holder = (ViewHolder) convertView.getTag();
}

holder.text1.setText(CountriesList.name[position]);
holder.text2.setText(CountriesList.mrn[position]);
holder.text3.setText(CountriesList.actualstart[position]);
holder.text4.setText(CountriesList.age[position]);
holder.text5.setText(CountriesList.gender[position]);
holder.text6.setText(CountriesList.wardNo[position]);
holder.text7.setText(CountriesList.roomNo[position]);
holder.text8.setText(CountriesList.bedNo[position]);

return convertView;
     }
     static class ViewHolder {
public Button btnList;
public TextView text8;
public TextView text7;
public TextView text6;
public TextView text5;
public TextView text4;
public TextView text1;
public TextView text2;
public TextView text3;
     }

  @Override
     public void notifyDataSetChanged()
  {
super.notifyDataSetChanged();
      }

    } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2015-11-23T04:49:33.403

这是ListView中字母索引的简单代码，它使用2个java程序文件

1.我们处理listview索引的MainActivity文件

2.CustomAdapter.java 文件，它是BaseAdapter 的子类，用于列出元素。

```
MainActivity.java

public class MainActivity extends Activity implements View.OnClickListener
{
    private Map<String, Integer> mapIndex;
    private String[] fruits;
    private ListView fruitsList;

    @Override
    protected void onCreate(Bundle savedInstanceState)
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        init();
        fruitsList.setAdapter(new CustomAdapter(this, Arrays.asList(fruits)));

        getIndexList(fruits);
        displayIndex();
    }

    private void init()
    {
        fruitsList = (ListView)findViewById(R.id.list_fruits);
        fruits = getResources().getStringArray(R.array.fruits_array);
        Arrays.sort(fruits);
    }

    private void getIndexList(String[] fruits)
    {
        mapIndex = new LinkedHashMap<String, Integer>();
        for(int i=0; i<fruits.length; i++)
        {
            String fruit = fruits[i];
            String index = fruit.substring(0,1);

            if(mapIndex.get(index) == null)
                mapIndex.put(index, i);
        }
    }

    private void displayIndex()
    {
        LinearLayout indexLayout = (LinearLayout)findViewById(R.id.side_index);
        List<String> indexList = new ArrayList<String>(mapIndex.keySet());

        TextView textView;
        for(String index : indexList)
        {
            textView = (TextView) getLayoutInflater().inflate(R.layout.alphabetindicator, null);
            textView.setText(index);
            textView.setOnClickListener(this);
            indexLayout.addView(textView);
        }
    }

    @Override
    public void onClick(View v) {
        TextView selectedTextView  = (TextView) v;
        fruitsList.setSelection(mapIndex.get(selectedTextView.getText()));
    }
} 
```

CustomAdaper.java

```
public class CustomAdapter extends BaseAdapter
{
    private Context context;
    private List<String> listItem;
    private LayoutInflater layoutInflater;

    CustomAdapter(Context context, List<String> listItem) {
        this.context = context;
        this.listItem = listItem;
    }

    @Override
    public View getView(int position, View convertView, ViewGroup parent) {
        ViewHolder viewHolder;
        if (convertView == null) {
            viewHolder = new ViewHolder();
            layoutInflater = (LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
            convertView = layoutInflater.inflate(R.layout.indexindicator, parent, false);
            viewHolder.textView = (TextView) convertView.findViewById(R.id.listitem);
            convertView.setTag(viewHolder);
        } else {
            viewHolder = (ViewHolder) convertView.getTag();
        }
        viewHolder.textView.setText(listItem.get(position));
        return convertView;
    }

    static class ViewHolder {
        TextView textView;
    }

    @Override
    public int getCount() {
        return listItem.size();
    }

    @Override
    public Object getItem(int position) {
        return listItem.get(position);
    }

    @Override
    public long getItemId(int position) {
        return 0;
    }
} 
```

activity_main.xml

```
<LinearLayout>
    <ListView
        android:id="@+id/list_fruits"
        android:layout_width="0dp"
        android:layout_weight="1"
        android:layout_height="wrap_content"
        android:scrollbars="none">
    </ListView>

    <LinearLayout
        android:id="@+id/side_index"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:background="@color/white"
        android:gravity="center_horizontal"
        android:orientation="vertical" >
    </LinearLayout>
</LinearLayout> 
```

字母指示器.xml

```
<?xml version="1.0" encoding="utf-8"?>
    <TextView xmlns:android="http://schemas.android.com/apk/res/android"
        android:id="@+id/side_list_item"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:gravity="center"
        android:padding="3dp"
        android:textSize="14sp" /> 
```

索引指标.xml

```
<LinearLayout
    android:layout_height="wrap_content"
    android:layout_width="match_parent"
    android:orientation="vertical">
    <TextView
        android:id="@+id/listitem"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:gravity="left"
        android:padding="3dp"
        android:textColor="#000000"
        android:textSize="14sp" />
</LinearLayout> 
```

最后，在 strings.xml 文件中包含一个字符串数组（根据您的需要替换/增加项目）

```
<string-array name="fruits_array">
        <item>Cantalope</item>
        <item>Date</item>
        <item>Grape</item>
        <item>Gooseberry</item>
        <item>Guava</item>
        <item>Honeydew melon</item>
        <item>Elderberry</item>
        <item>Fig</item>
        <item>Grapefruit</item>
</string-array> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-09-11T14:21:40.237

事实上，做起来真的很简单。这是我在我的应用程序中所做的。您可以添加适当的参数，它简单易懂。

// charsContainer 是一个线性布局，其中包含您将触及的所有字符。它们自动适合线性布局，因此它们都是可见的，因为您稍后在 chars TextView 上关联的权重值

```
final LinearLayout charsContainer = (LinearLayout) findViewById(R.id.charsContainer);

// alphabetical_index is a framelayout which contains charsContainer and alphabetical_index_indicator, this is for the indicator to be visible over selected character.

final FrameLayout alphabetical_index = (FrameLayout) findViewById(R.id.alphabetical_index);

// alphabetical_index_indicator is an image displayed when your finger touches a character and move up and down 

final ImageView alphabetical_index_indicator = (ImageView) findViewById(R.id.alphabetical_index_indicator);

for (int i = 0; i < chars.size() ; i++) {

    TextView charTextView = new TextView(this);
    charTextView.setLayoutParams(new LinearLayout.LayoutParams(LinearLayout.LayoutParams.WRAP_CONTENT, 0, 1));
    charTextView.setText(chars.get(i).toString());
    charTextView.setTextColor(Color.GRAY);
    charTextView.setTextSize(11);
    charTextView.setPadding(convertValueToDP(4), 0, convertValueToDP(4), 0);
    charsContainer.addView(charTextView);

}

alphabetical_index.setOnTouchListener(new View.OnTouchListener() {

    @Override

    public boolean onTouch(View v, MotionEvent event) {

        int alphabetical_index_top = (int) alphabetical_index.getTop();
        int alphabetical_index_bottom = (int) alphabetical_index.getBottom();

        boolean hasBackKey = KeyCharacterMap.deviceHasKey(KeyEvent.KEYCODE_BACK);
        boolean hasHomeKey = KeyCharacterMap.deviceHasKey(KeyEvent.KEYCODE_HOME);

        if(hasBackKey || hasHomeKey){
            alphabetical_index_bottom = ((int) alphabetical_index.getY()) + alphabetical_index.getHeight();
        }else{
            alphabetical_index_bottom = ((int) alphabetical_index.getY()) + alphabetical_index.getHeight() - convertValueToDP(36);
        }

        switch (event.getAction()) {

            case MotionEvent.ACTION_DOWN:

                // Do
                getListView().setVerticalScrollBarEnabled(false);
                break;

            case MotionEvent.ACTION_MOVE:

                int x = (int) event.getX();
                int y = (int) event.getY();

                if(alphabetical_index_indicator.getVisibility() == View.GONE){
                    alphabetical_index_indicator.setVisibility(View.VISIBLE);
                    getListView().setVerticalScrollBarEnabled(false);
                    Animation anim = AnimationUtils.loadAnimation(MyActivity.this, R.anim.fadein);
                    alphabetical_index_indicator.startAnimation(anim);
                }

                if (y > alphabetical_index_top && (y - charsContainer.getChildAt(0).getHeight()) > alphabetical_index_top && y < alphabetical_index_bottom) {
                    alphabetical_index_indicator.setY(y - charsContainer.getChildAt(0).getHeight());
                }
                for (int i = 0; i < charsContainer.getChildCount(); i++) {

                    View child = charsContainer.getChildAt(i);

                    if (y > child.getTop() && y < child.getBottom()) {

                        Character character = ((TextView) child).getText().toString().charAt(0);

                        for (int j = 0; i < listViewStringArray.size(); j++) {
                            if (listViewStringArray.get(j).toUpperCase(Locale.getDefault()).charAt(0) == character) {
                                getListView().setSelection(j);
                                break;
                            }
                        }

                    }

                }

                // Do
                break;

            case MotionEvent.ACTION_CANCEL:
                // Do
                getListView().setVerticalScrollBarEnabled(true);
                break;

            case MotionEvent.ACTION_UP:

                Animation anim = AnimationUtils.loadAnimation(MyActivity.this,R.anim.fadeout);
                anim.setAnimationListener(new Animation.AnimationListener() {
                    @Override
                    public void onAnimationStart(Animation animation) {

                    }

                    @Override
                    public void onAnimationEnd(Animation animation) {
                        alphabetical_index_indicator.setVisibility(View.GONE);
                        getListView().setVerticalScrollBarEnabled(true);
                    }

                    @Override
                    public void onAnimationRepeat(Animation animation) {

                    }
                });
                alphabetical_index_indicator.startAnimation(anim);

                break;
        }
        return true;
    }
});

public static int convertValueToDP(float dp){

    DisplayMetrics metrics = Resources.getSystem().getDisplayMetrics();
    float px = dp * (metrics.densityDpi / 160f);
    return (int)px;
} 
```

# java - 如何检查字符串是日期

> ID：12559844
> 
> 赞同：0
> 
> 时间：2012-09-24T06:24:33.787
> 
> 标签：java, date, date-format

我需要根据所有可能的 dateFormats 检查字符串，并且需要检查其有效日期与否。

我面临的问题是**我无法预测日期格式，因为它来自其他一些网络资源**。一个例子是`September 21 2012 1255 PM ET`，。但格式可能会有所不同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:46:44.597

我建议您实现自己的 Parse 方法并使用正则表达式来确定应该如何解析字符串。您不应该期望在不知道它是哪种格式的情况下解析任何格式的日期。

就我个人而言，我会实现这样的东西（但话又说回来，我已经有一段时间没有编写 Java 代码了）：

```
public SimpleDateFormat ParseDate(string s)
{
SimpleDateFormat parsedDate;
if(s.matches("0?[1-9]|[12][0-9]|3[01])/(0?[1-9]|1[012])/((19|20)\\d\\d"))
   parsedDate = new SimpleDateFormat("MM/dd/yyyy");
else if(s.matches([PATTERN2]))
   parsedDate = new SimpleDateFormat([DATE PATTERN 2]);
...
return parsedDate;
} 
```

等等...

推荐阅读：

[http://docs.oracle.com/javase/tutorial/essential/regex/](http://docs.oracle.com/javase/tutorial/essential/regex/)
[http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/6/docs/api/java/text/SimpleDateFormat.html)

# jquery - 带有 rel 值的 jQuery 过滤器选择菜单

> ID：12559845
> 
> 赞同：3
> 
> 时间：2012-09-24T06:24:36.743
> 
> 标签：jquery, regex, drop-down-menu, filter

我使用此代码过滤我的`<select>`菜单：

```
jQuery.fn.filterByText = function(textbox) {
    return this.each(function() {
        var select = this;
        var options = [];
        $(select).find('option').not('option:first-child').each(function() {
            options.push({value: $(this).val(), text: $(this).text(), rel: $(this).attr('rel')});
        });
        $(select).data('options', options);

        $(textbox).bind('change keyup', function() {
            var options = $(select).empty().data('options');
            var search = $.trim($(this).val());
            var regex = new RegExp(search,"gi");

            $.each(options, function(i) {
                var option = options[i];
                if(option.text.match(regex) !== null) {
                    $(select).append(
                        $('<option>').text(option.text).val(option.value)
                    );
                }
            });
        });
    });
}; 
```

如您所见，我使用`.not('option:first-child')`排除第一个`<option>`标签。

**这段代码有两个问题，它工作正常，但我需要在过滤中包含该属性，并且我想在清除文本框时`rel`重新添加。`option:first-child`**

我已将其添加`rel: $(this).attr('rel')`到我的`options`数组中，但我不确定如何将其添加回过滤结果中？

我可以创建`var original = [];`并将所有原始值推入其中吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:40:00.217

要在过滤中包含 rel 属性，您几乎完成了这项工作。只需添加**`.attr('rel', option.rel)`**：

```
$('<option>').text(option.text).val(option.value).attr('rel', option.rel) 
```

而不是重新添加第一个`option`，您可以保留它，并删除其他：

```
$(select).children("option").not(":first").remove(); 
```

**编辑** *（如何检索“数据”属性）*：

您可以这样做（可使用变量缓存改进）：

```
var options = $(select).data('options');
$(select).children("option").not(":first").remove(); 
```

或像这样，以保持可链接性：

```
var options = $(select).children("option:not(:first)").remove().end().data('options'); 
```

**编辑后的答案**

```
$(select).children("option").not(":first")
$(select).find('option').not('option:first-child') 
```

**儿童 VS 发现：**

> .children() 方法与 .find() 的不同之处在于 .children() 仅沿 DOM 树向下移动一个级别，而 .find() 也可以向下遍历多个级别以选择后代元素（孙子等）。

由于`options`是元素的直接子`select`元素，因此最好使用 children()。

**:first VS :first-child**

> :first 伪类等价于 :eq(0)。它也可以写成:lt(1)。虽然这仅匹配一个元素，但 :first-child 可以匹配多个：每个父元素一个。

我们只有一个父母（我们的`select`）。所以两者都在这里工作。 **但是，请注意：**

> 因为 :first 是一个 jQuery 扩展而不是 CSS 规范的一部分，所以使用 :first 的查询不能利用原生 DOM querySelectorAll() 方法提供的性能提升。为了在使用 :first 选择元素时获得最佳性能，首先使用纯 CSS 选择器选择元素，然后使用 .filter(":first") *（或此处为 .not(":first"))*。

通常，这完全取决于情况/上下文。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:44:44.360

尝试这样的属性：

```
attr('rel', option.rel) 
```

不需要 in `$('select').data('option')`，因为您将它们存储在数组中。使用 object `caching`，无需包装 3 次选项即可获得 3 个值。

演示它的样子：http: [//jsfiddle.net/BSDdZ/](http://jsfiddle.net/BSDdZ/)

# iphone - 处理OpenURL 方法。显示 modalviewcontroller 并传递 url 信息

> ID：12559848
> 
> 赞同：1
> 
> 时间：2012-09-24T06:24:47.297
> 
> 标签：iphone, xcode, delegates, appdelegate

我的应用程序委托中的 handleOpenURL 方法遇到了一些问题。我有一个应该正常显示的 rootviewcontroller，但是当在我的应用程序中打开一个文件时，我需要 handleOpenURL 方法来呈现一个新的 viewcontroller 并发送 url 信息。问题是我无法从我的应用程序委托中呈现模态视图控制器。此外，当我尝试在我的 rootviewcontroller 中调用一个方法来呈现 modalviewcontroller 我得到

```
 Warning: Attempt to present ... whose view is not in the window hierarchy! 
```

所以，我想我只是在寻找一种解决方案，它将呈现一个新的模式视图控制器并将 url 信息传递给该类。这是应用程序委托方法。

```
- (void)handleOpenURL:(NSURL *)url {

} 
```

谢谢你的帮助

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T06:53:22.383

在你的 RootViewController 中，创建一个 appDelegate 的实例，就像

```
 YourAppDelegate *appDelegate = (YourAppDelegate *)[[UIApplication sharedApplication]delegate];
    appDelegate.rootViewControllerInstance = self; 
```

然后主题

```
[appDelegate handleOpenURL:yourURL]; 
```

还创建一个 callBackFunction 例如：

`-(void)callBack:(NSUrl *)url;`

现在在 appDelegate 类中创建一个`property`你的`RootViewController`

并在`appDelegate` 您的函数中以这种方式指定..

```
- (void)handleOpenURL:(NSURL *)url {
[rootViewControllerInstance callBackUrl:url];
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:35:42.503

1.  在情节提要中，通过添加一个新的视图控制器并将其类设置为您正在呈现的视图控制器来添加您想要呈现的视图控制器。
2.  按住 Control 从根视图控制器拖动到新控制器，这将创建一个`segue`.
3.  设置`identifier`segue 的名称，将其自定义为模态显示。
4.  在根视图控制器中，调用`[self performSegueWithIdentifier:@"MySegueIdentifier"];`.
5.  在`prepareForSegue`根视图控制器中设置任何属性，包括例如 URL。

# javascript - 鼠标移动和触摸移动

> ID：12559858
> 
> 赞同：2
> 
> 时间：2012-09-24T06:25:34.347
> 
> 标签：javascript, jquery

我真的很喜欢[这种视觉效果](http://lab.simurai.com/monster/)。我想通过 touchmove 在 iphone 或 ipad 中使用它。谁能帮我这个？

这是JS：

```
$(document).bind('mousemove',function(e){
    var docW = $(window).width();
    var docH = $(window).height();

    var diffX = (docW/2) - e.clientX;
    var diffY = (docH/2)-100 - e.clientY;

    var dist = distance(docW/2,docH/2, e.clientX, e.clientY);
    var distM = distance(docW/2,(docH/2)+60, e.clientX, e.clientY);

        // eye                          
        var eye_background = Math.floor( diffX /-30 ) +'px '+ Math.floor( diffY /-30 ) +'px';       
        var eye_translate = Math.floor(diffX/-50 )+'px, '+ Math.floor(diffY/-100 )+'px';    
        $(".eye").css({"background-position":eye_background, "-webkit-transform":'translate3d('+eye_translate+',0)',"-moz-transform":'translate('+eye_translate+')',"-o-transform":'translate('+eye_translate+')',"-ms-transform":'translate('+eye_translate+')' });

}); 
```

基本上，我的问题是如何在苹果上进行这项工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:05:04.453

您应该在 mousedown 上启动一个侦听器并在 mouseup 上停止它。同时，监听器将循环*（例如 requestanimationfame 或 setInterval() ）*您的`//eye`方法。

例如，这是 webGL 中的一个常见过程。 [例子](https://github.com/mrdoob/three.js/blob/master/examples/canvas_geometry_panorama_fisheye.html#L144)

[http://api.jquery.com/mousedown/](http://api.jquery.com/mousedown/)

[http://api.jquery.com/mouseup/](http://api.jquery.com/mouseup/)

# twitter-bootstrap - 如何使 Bootstrap 顶级菜单项在移动视图中可点击？

> ID：12559863
> 
> 赞同：2
> 
> 时间：2012-09-24T06:25:58.307
> 
> 标签：twitter-bootstrap

更确切地说...

使用 Bootstrap，我有一个带有子菜单项（[小提琴](http://jsfiddle.net/pkdsleeper/Ye5Nq/)）的导航菜单。

但是，在移动视口中，它...*有点多。*链接太多。

我希望能够完成两件事：

1.  隐藏子导航项目，然后...
2.  使顶级项目可点击（href 解析为页面）

我一直在寻找引导站点，但找不到任何东西。

是否可以使用本机引导程序？

如果需要脚本，请提供一些*“指针”*。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:12:32.523

您希望能够在移动设备上扩展子菜单项吗？如果是这样，将顶级链接变成直接 URL 可能是不切实际的。
该场景的一些“指针”（使用已经与 Bootstrap 插件集成的 jQuery）：

```
$('.nav .dropdown-menu').hide();  
$('.nav .dropdown-toggle').on('click', function() {
  $('.nav .dropdown-menu').toggle();
}); 
```

或者，如果您只想在移动设备*上*显示顶级链接，您可以将链接目标存储在自定义数据属性中并动态更改 href 值：

```
$('.nav .dropdown-menu').hide();
$('.nav .caret').hide();
$('.nav .dropdown-toggle').each(function() {
  $(this).attr('href', $(this).data('name'));
}); 
```

同时为每个链接添加“数据名称”属性。

```
<a href="#" data-name="page.php">Page</a> 
```

祝你好运！

# objective-c - 如何将 NSString 值传递给 Objective-C 中的另一个属性

> ID：12559867
> 
> 赞同：0
> 
> 时间：2012-09-24T06:26:25.983
> 
> 标签：objective-c, xcode, methods, nsstring

基本上，我有这个 if 语句：

```
NSString *loginResult = [resultsArray valueForKey:@"statusMsg"];
if ([loginResult isEqualToString:@"success"])
{
    [self successDialog]; // Success
}
else 
{
    [self failedDialog]; // Failed
} 
```

如果成功，这是解析的 JSON：

```
{"results":{"statusMsg":"success"}} 
```

如果失败，解析的 JSON 会有所不同：

```
{"results":{"statusMsg":"password incorrect."}} 
```

我想将键**statusMsg**返回的字符串值传递给 failedDialog 方法内的警报视图。failedDialog 方法定义为：

```
- (void)failedDialog:(NSString *)errorMessage
{
    UIAlertView *dialog = [[UIAlertView alloc] initWithTitle:kRegFailed
                                                     message:errorMessage
                                                    delegate:self
                                           cancelButtonTitle:kOK
                                           otherButtonTitles:nil, nil];
    dialog.tag = 2;
    [dialog show];  
} 
```

我该怎么做才能让警报视图返回错误消息。蒂亚！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:29:40.470

如果您的 resultsArray 是 NSArray 对象，想知道为什么要这样做

```
NSString *loginResult = [resultsArray valueForKey:@"statusMsg"]; 
```

把它放在你的头文件中

```
- (void)failedDialog:(NSString *)errorMessage; 
```

试试这个，假设你的**jsonDict = { "results" :{ "statusMsg" : "password wrong." } }**

```
[self failedDialog:[NSString stringWithString:[[jsonDict objectForKey:@"results"]objectForKey:@"statusMsg"]]]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:33:23.197

**编辑**：

```
NSDictionary *jsonDictionary = [NSJSONSerialization JSONObjectWithData:data options:kNilOptions error:&error];

NSString *loginResult = [[jsonDictionary objectForKey:@"results"] objectForKey:@"statusMsg"];
if ([loginResult isEqualToString:@"success"])
{
    [self successDialog]; // Success
}
else 
{
    [self failedDialog:loginResult]; // Failed
} 
```

# xml - 每个具体的错误类异常的 nHibernate 表

> ID：12559870
> 
> 赞同：0
> 
> 时间：2012-09-24T06:26:44.193
> 
> 标签：xml, nhibernate, exception, mapping

在 nHibernate 中使用 Table per 具体方式为以下类层次结构创建 xml 映射文件时遇到一些问题。我不断收到“错误的类异常”错误。谁能帮我指出正确的方向？

这是我的抽象/父类的定义：

```
public abstract partial class AlertSpecification
{
    private long _alertSpecificationId;
    private string _specificationName;
    private bool _active;
    private int _createdBy;
    private DateTime _createdOn;

    public virtual long AlertSpecificationId
    {
        get { return _alertSpecificationId; }
        set { _alertSpecificationId = value; }
    }

    public virtual string SpecificationName
    {
        get { return _specificationName; }
        set { _specificationName = value; }
    }

    public virtual bool Active
    {
        get { return _active; }
        set { _active = value; }
    }

    public virtual int CreatedBy
    {
        get { return _createdBy; }
        set { _createdBy = value; }
    }

    public virtual DateTime CreatedOn
    {
        get { return _createdOn; }
        set { _createdOn = value; }
    }
} 
```

这是我的第一个子类的定义：

```
public partial class ComponentSpecification : AlertSpecification
{
    private string _vehicleType;

    public virtual string VehicleType
    {
        get { return _vehicleType; }
        set { _vehicleType = value; }
    }          
} 
```

这是我的第二个子类的定义：

```
public partial class ColdVehicleSpecification : AlertSpecification
{
    private double _sigmaThreshold;

    public virtual double SigmaThreshold
    {
        get { return _sigmaThreshold; }
        set { _sigmaThreshold = value; }
    }        
} 
```

这是我的映射文件的定义：

```
<?xml version="1.0" encoding="utf-8"?>
    <hibernate-mapping xmlns="urn:nhibernate-mapping-2.2"        

     namespace="IS.QueryPerformanceTest.Model" assembly="IS.QueryPerformanceTest.Model" >
        <class name="AlertSpecification" abstract="true">
        <cache usage="read-write"/>    
       <id name="AlertSpecificationId" type="Int64">      
           <generator class="hilo"/>
       </id>
    <property name="SpecificationName" column="Name" />
    <property name="Active" />
    <property name="CreatedBy" />
    <property name="CreatedOn" />  
    <union-subclass name="ColdVehicleSpecification"   table="AlertSpecificationColdVehicle">
        <property name="SigmaThreshold" column="CVSigmaThreshold" />      
    </union-subclass>   
    <union-subclass name="ComponentSpecification" table="AlertSpecificationComponent">
        <property name="VehicleType" column="VehicleType" />      
    </union-subclass>
    </class>
</hibernate-mapping> 
```

在我的控制器中，我使用以下代码检索数据：

```
var repo = new NHComponentSpecificationRepository(ObjectFactory.GetInstance<ISession>

());

var cvRepo = new 

NHColdVehicleSpecificationRepository(ObjectFactory.GetInstance<ISession>());

var allComponentSpecs = repo.FindAll();
var allColdVehicleSpecs = cvRepo.FindAll(); 
```

这是我得到的错误：ID 为 1 的对象不是指定的子类：IS.QueryPerformanceTest.Model.ColdVehicleSpecification（加载对象属于错误的类 [IS.QueryPerformanceTest.Model.ComponentSpecification]）

请注意，对 repo.FindAll() 的第一次调用以正确的类型返回正常。然而，第二次通话失败。由于某些原因，即使我在代码中指定加载 ColdVehicleSpecification，它也总是尝试加载 ComponentSpecification。

这是 NHColdVehicleSpecificationRepository 中 FindAll 的实现：

```
public IList<ColdVehicleSpecification> FindAll()
{
    var result = _session.Query<ColdVehicleSpecification>().ToList();

    return result;
} 
```

有谁知道这里有什么问题？

如果您需要更多信息，请告诉我。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:58:00.660

层次结构有一个 ID 生成器。当您加载 ID 为 1 的对象时，NH 会找到有问题的类型。如果您尝试将其加载为其他类型，则会崩溃。

```
ComponentSpecification cs = new ComponentSpecification ();
session.Store(cs);
var csId = cs.Id;

// later on,
// crashes with a cast exception
var cvs = session.Get<ColdVehicleSpecification>(csId); 
```

如果这不是问题，您需要提供一些代码。

# java - Google App Engine 数据存储区中的 Upvote 和 Downvote 设计

> ID：12559871
> 
> 赞同：1
> 
> 时间：2012-09-24T06:26:45.000
> 
> 标签：java, google-app-engine

我在 Google App Engine 中使用 Java。

场景是用户可以对文章对象投赞成票和反对票。用户每篇文章只能投票一次。对此最好的实现是什么？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:11:52.310

创建一个 Vote 实体，其键是用户 ID 和文章 ID。这样，您无需查询即可获得用户投票，并且您不需要交易来创建用户投票。

# zipoutputstream - ZipOutputStream FTP客户端

> ID：12559874
> 
> 赞同：0
> 
> 时间：2012-09-24T06:27:08.053
> 
> 标签：zipoutputstream

```
FTPClient ftpClient;

ZipOutputStream zipOut = null;   
zipOut = new ZipOutputStream(ftpClient.storeFileStream("a.zip")); 

String str;
byte []conarr=str.getBytes();

zipOut.putNextEntry(new ZipEntry("1.txt")); 
zipOut.write(conarr);
zipOut.close(); 
```

如果`str`只有几个字符，没关系，但如果`str`是几十kB，则zip文件有错误。

# php - 在 PHP MySQL 中从逗号分隔的字符串中查找精确值

> ID：12559876
> 
> 赞同：8
> 
> 时间：2012-09-24T06:27:12.890
> 
> 标签：php, mysql, regex

我有一个产品表，其中包含一个名为“类别”的字段，用于将产品相关的类别 ID 保存为逗号分隔值。我正在使用正则表达式从一个类别中搜索产品。

假设有记录包含`4,24,1,31` 我的表达是，

```
..WHERE categories REGEXP ',?4,?' 
```

但这会返回类别的产品`4`和`24`

我只需要显示 category `4`。

我错过了什么吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T06:29:50.363

采用

```
WHERE categories REGEXP "(^|,)4(,|$)" 
```

`4`如果被逗号包围或在字符串的开头/结尾，则匹配。

在您当前的版本中，两个逗号都是完全可选的，因此`4`in`24`匹配。

# php - 多维数组，找到项目并移动到顶部？

> ID：12559878
> 
> 赞同：5
> 
> 时间：2012-09-24T06:27:23.547
> 
> 标签：php, arrays, multidimensional-array

我正在尝试执行某种函数来查找（在以下数组中）id 为 2 的对象，并将其移动到数组的顶部。这是原始数组：

```
Array
(
    [0] => stdClass Object
        (
            [id] => 177
            [startdate] => 2014-08-02
        )

    [1] => stdClass Object
        (
            [id] => 178
            [startdate] => 2014-08-02
        )

    [2] => stdClass Object
        (
            [id] => 2
            [startdate] => 2014-07-28
        )

    [3] => stdClass Object
        (
            [id] => 82
            [startdate] => 2014-07-28

        )

    [4] => stdClass Object
        (
            [id] => 199
            [startdate] => 2013-10-10
        )
) 
```

这是我希望它输出的内容（使用移动的数组项）：

```
Array
(

    [0] => stdClass Object
        (
            [id] => 2
            [startdate] => 2014-07-28
        )
    [1] => stdClass Object
        (
            [id] => 177
            [startdate] => 2014-08-02
        )

    [2] => stdClass Object
        (
            [id] => 178
            [startdate] => 2014-08-02
        )

    [3] => stdClass Object
        (
            [id] => 82
            [startdate] => 2014-07-28

        )

    [4] => stdClass Object
        (
            [id] => 199
            [startdate] => 2013-10-10
        )
) 
```

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-24T06:34:01.040

```
function customShift($array, $id){
    foreach($array as $key => $val){     // loop all elements
        if($val->id == $id){             // check for id $id
            unset($array[$key]);         // unset the $array with id $id
            array_unshift($array, $val); // unshift the array with $val to push in the beginning of array
            return $array;               // return new $array
        }
    }
}

print_r(customShift($data, 2)); 
```

# algorithm - 以最小成本找到建筑物的共同高度

> ID：12559882
> 
> 赞同：5
> 
> 时间：2012-09-24T06:27:43.553
> 
> 标签：algorithm

这是某个编程竞赛的一个问题（我不知道它到底属于哪个编程竞赛，我在一年前看到过）。问题如下：

有 N 个建筑物，每个建筑物都有自己的高度（不一定是唯一的）

```
{h1,h2,h3,...,hn} 
```

我们必须让所有相同高度的建筑物都说h。

允许的操作是：

1.  我们可以给建筑物增加一些高度。
2.  我们可以从建筑物中移除一些高度。

移除/添加单位高度需要与每栋建筑物相关的成本。假设 c(i) 是为建筑物移除/增加单位高度的成本。相应的费用如下：

```
{c1,c2,c3,...,cn} 
```

假设我们有足够的可用高度（单位），我们必须找到使所有建筑物具有相同高度所需的最小成本。

输入：第一行将指定 N 个建筑物的数量。（1<=N<=100000）。第二行输入将是建筑物的高度。

```
{h1,h2,h3,...,hn} 
```

第三行输入将给出成本数组

```
 {c1,c2,c3.....,cn} 
```

输出

输出将只是所需的最低成本。

样本输入：

```
3

2 1 3

10 1000 1 
```

样本输出

```
12 
```

解释：将所有高度为 1 的建筑物制作成 10*(2-1) + 1000*(1-1) + 1*(3-1) 即 12。

我知道蛮力方法是O（n ^ 2）。

我认为的蛮力方法如下：

无论常见的高度 h 是什么，它都必须从

```
 {h1,h2,h3,....,hn} 
```

即 h 必须等于任何 h(i) 。现在检查每个 h(i) 我可以计算 O(n^2) 中的答案。

有可能做得更快吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:09:59.203

**O(n log(n)) 解决方案**：

令 h(i) 表示第 i 个建筑物的高度，让 c(i) 表示第 i 个建筑物的成本。

1.  Step-1：根据各个建筑物的高度，按降序对建筑物进行排序。让这种安排称为 P。即 P(1) 是最大建筑物的高度，P(n) 是最小建筑物的高度。这需要 O(n log n)。
2.  第 2 步：将建筑物的所有高度相加。让 S 表示这个总和。这一步需要 O(n) 时间。
3.  步骤 3：如果我们使所有高度小于第 i 个建筑物的建筑物的高度等于 SORTED ARRAY P 中第 i 个建筑物的高度，则让 Cost_of_Increase(i) 表示成本，即如果我们使 Cost_of_Increase(i)建筑物 P(i-1), P(i-2), ... P(n) 等于第 P(i) 个建筑物的高度。

现在使用这个递归：

Cost_of_Increase(i) = Cost_of_Increase(i-1) + ( h(i)-h(i-1) )*( 第 P(i-1) 个建筑物到第 P(n) 个建筑物的成本总和)

注意在上面的递归中，i和i-1的顺序是按照P的顺序，即排序的顺序。

现在让 Cost_of_decrease(i) 表示如果我们使所有高度大于第 i 个建筑物的建筑物等于 SORTED ARRAY P 中第 i 个建筑物的高度的成本，即 Cost_of_decrease(i) 如果我们使建筑物 P(1 ), P(2), ... P(i-2), P(i-1) 等于第 P(i) 个建筑物的高度。

为此，请使用此递归：

Cost_of_decrease(i) = Cost_of_decrease(i+1) + ( h(i+1)-h(i) )*( 第 P(1) 个建筑物到第 P(i-1) 个建筑物的成本总和)

因此，使所有建筑物的高度等于 P(i) th 建筑物的总成本为：

Cost_of_Increase(i) + Cost_of_decrease(i)。

一旦我们对所有建筑物都有了这个，只需检查哪个成本最小，这就是答案。

希望能帮助到你 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:58:16.610

算法结束后对所有建筑物的高度进行[三元搜索](http://en.wikipedia.org/wiki/Ternary_search)或使用[爬山](http://en.wikipedia.org/wiki/Hill_climbing)算法。对于每个高度，您可以以线性时间计算成本，因此总体复杂度将为 O(N * log(H))，其中 H 是可能产生的最大高度。

编辑：这是一个应该为你工作的伪代码片段（这是类似爬山的方法）

```
 typedef long long ll;
  ll get_cost(int h) {
    if (h < 0 || h > MAX_HEIGHT) {
      return MAX_VAL; // some unreachable positive value
    }
    ...
  }

  int main() {
    ...
    int current = 0;
    int leftp, rightp;
    ll cv, lv, rv;
    ll step = SOME_BIG_ENOUGH_VALUE;
    while (step > 0) {
      leftp = current - step;
      rightp = current + step;
      cv = get_cost(current);
      lv = get_cost(leftp);
      rv = get_cost(rightp);
      if (cv <= rv && cv <= lv) {
        step /= 2;
      } else if (lv < rv) {
        current = leftp;
      } else {
        current = rightp;
      }
    }
    ...
  } 
```

# winforms - 动态控件及其在窗口窗体中的面板中的位置？C#.Net？

> ID：12559883
> 
> 赞同：0
> 
> 时间：2012-09-24T06:27:47.827
> 
> 标签：winforms

在窗口窗体中，我动态创建了一个面板，因为我想放置动态创建的标签，现在我想以整齐的格式放置标签，我的意思是逐行对齐。每次我创建标签并将标签绑定到面板时，直到数据存在于数据集中。所以我想妥善安排那个标签，有没有参考，非常感谢，谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:36:25.077

您可以尝试使用*FlowLayoutPanel*而不是普通的*Panel*。

将其设置为您想要的方向，可选择换行，您将自动组织内容。

或者，您需要遍历面板的标签并设置（伪，垂直方向）：

currentLabel.Top = prevLabel.Top + prevLabel.height + mySpacing

# php - 日期时间转换为仅日期 php

> ID：12559894
> 
> 赞同：0
> 
> 时间：2012-09-24T06:29:24.147
> 
> 标签：php, mysql, sql, datetime

我想转换这个由 MySQL 生成的日期时间，我想把它转换为月份和日期。这是我目前的格式`2012-09-17 00:55:56`

我只想将其转换`September 17`为

如何使用 PHP 代码做到这一点？

提前致谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T06:31:49.793

为什么不直接`MYSQL`使用**[DATE_FORMAT()](http://davidwalsh.name/format-date-mysql-date_format)**

```
SELECT DATE_FORMAT('2012-09-17 00:55:56','%M %d') 
```

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/d41d8/2272)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:31:58.423

```
date("F d",strtotime($datefromdatabase)); //with leading zero in date 
```

或者

```
date("F j",strtotime($datefromdatabase)); //without leading zero in date 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T19:02:19.077

[日期](http://www.php.net/datetime)时间解决方案：-

```
$date = DateTime::createFromFormat('Y-m-d h:i:s', getDateSomeHow());
echo $date->format('F d'); 
```

# c++ - 将集合与集合集合进行比较的最佳算法

> ID：12559905
> 
> 赞同：5
> 
> 时间：2012-09-24T06:30:14.713
> 
> 标签：c++, algorithm, set, subset

在作为特定集合的子集的有限集合中找到集合的最佳算法是什么？

例如，如果

```
A = {1, 2}
B = {2, 3, 4}
C = {3, 5}
D = {6} 
```

X =`{1, 2, 3, 5}`

那么，A 和 C 是 X 的子集。

有没有一种算法可以以线性时间复杂度做到这一点？

**实现注意：**集合的成员通常来自非常有限的范围，因此，使用 C++ bitset 来实现算法可能是一个好主意。不能吗？

**编辑：**集合中的集合数量通常非常大于 X 中的元素数量（在示例中）。有没有办法根据 X 中的元素数量来做到这一点？可能使用哈希或其他东西？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T06:32:54.917

让我们暂时假设 64 个可能的元素。

那么，如果将每个元素表示为一个位，则可以使用一个 64 位长的整数来表示每个集合，那么：`a & b`是 和的集合 [交集](http://en.wikipedia.org/wiki/Intersection_%28set_theory%29)。如果（且仅当）是then的子集。`a``b`
`a``b``a & b == a`

当然，如果您需要超过 64 位，您可以使用 bitset。

对于大范围的元素，可以使用哈希表存储（一次）超集，然后迭代潜在的子集以检查是否所有元素都在其中。
它在输入大小中是线性的（平均情况）。

* * *

**编辑：（**回复已编辑的问题）

除非您预先存储了一些有关数据的信息 - 否则无法做到最好`O(|X| + n*min{m,|X|})`Where |X| 是集合 X 的大小， 是集合`n`的数量， 是集合`m`的平均大小。
这样做的原因是因为在最坏的情况下，您需要读取所有集合中的所有元素（因为您为每个集合读取的最后一个元素决定了它是否是子集），因此如果没有先前的知识，我们将无法取得更好的效果套。

建议的解决方案是：
Bitset：`O(|X|*n)`
哈希解决方案：（`O(|X| + min{m,|X|}*n)`平均情况）

尽管散列解决方案提供了更好的渐近复杂度，但对于位集来说，常数要好得多——因此位集解决方案可能会更快`|X|`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:30:12.437

如果您没有时间限制来构建一些额外的结构，那么 O(log(n)) 解决方案是将代表个体集的位序列存储在[Trie](http://en.wikipedia.org/wiki/Trie)中。

您不必像 Amit 所假设的那样将您的集合（也称为位串）与所有其他集合进行比较。如果您有一个排序的位串集合，那么每次比较显然会将变体的数量减少一半。是的，当然，构建 bitset trie 的时间类似于 O(n*log(n))，但它是一个预处理。

# asp.net-mvc - MVC4 Web API 服务器端验证展示

> ID：12559906
> 
> 赞同：1
> 
> 时间：2012-09-24T06:30:30.090
> 
> 标签：asp.net-mvc, validation, asp.net-web-api, unobtrusive

参考。这个微软官方视频： [http ://www.asp.net/web-api/videos/getting-started/custom-validation](http://www.asp.net/web-api/videos/getting-started/custom-validation)

我下载了代码并运行它。没关系。

然后，我从 html 文件中删除所有客户端验证属性（data-val-*）。它没有正常工作。我在网页上看不到验证消息。

我的问题是如何规范服务器端验证消息以及如何将它们显示为客户端验证。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:41:32.143

为什么要删除验证属性？这正是为您提供验证消息的原因。要更改验证测试，您需要在模型属性上设置适当的验证属性，例如，

```
[Required]
public string Genre { get; set; }

[Range(1, 100)]
[DataType(DataType.Currency)]
public decimal Price { get; set; }

[StringLength(5)]
public string Rating { get; set; } 
```

如[这篇关于 ASP.NET MVC 4 模型验证的帖子所述](http://www.asp.net/mvc/tutorials/mvc-4/getting-started-with-aspnet-mvc4/adding-validation-to-the-model)。

# c# - C# Datagridview 最后一个索引越界

> ID：12559907
> 
> 赞同：1
> 
> 时间：2012-09-24T06:30:52.947
> 
> 标签：c#, datagridview, cells

大家好，我是新来的=）

在最小的麻烦情况下，我需要您的帮助，为我节省时间 =)

问题在于，我想要 datagridview 单元格值并将值保存到数组中。

到目前为止它工作正常，但它只是读取第一行单元格，然后在该过程之后它只是告诉索引超出范围，但我不明白为什么。

```
foreach (DataGridViewRow row in dataGridView1.Rows)     //wo soll er sich aufhalten -> zeilen
                {

                    **if (row.Cells[i].Value == null)**
                    {
                        MessageBox.Show("This row is empty");
                        break;
                    }
                        if (row.Cells[i].Value != null)
                        {
                            UnsortArray[i] = row.Cells[i].Value.ToString();
                            MessageBox.Show(UnsortArray[i]);
                            ++i;
                        }

                } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:36:51.987

```
 foreach (DataGridViewRow row in dataGridView1.Rows)   
                    {
                      for (int i=0; i<= dataGridView1.Columns.Count; i++)
{
                        **if (row.Cells[i].Value == null)**
                        {
                            MessageBox.Show("This row is empty");

                        }
                            if (row.Cells[i].Value != null)
                            {
                                UnsortArray[i] = row.Cells[i].Value.ToString();
                                MessageBox.Show(UnsortArray[i]);

                            }

    }

                    } 
```

另外，我不明白您为什么要在循环中执行 messageBox.show 。它应该在循环之外。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-24T06:37:17.533

```
foreach (DataGridViewRow row in dataGridView1.Rows)     //wo soll er sich aufhalten -> zeilen
                {

                    if (row.Cells[i].Value == null)
                        MessageBox.Show("This row is empty")
                    else
                        {
                            UnsortArray[i] = row.Cells[i].Value.ToString();
                            MessageBox.Show(UnsortArray[i]);
                   //    ++i;  dont need to increment if you want to read only specific column
                        }
                } 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-24T06:43:00.793

试试下面的代码>>

```
for(int i=0;i<dataGridView1.Rows.Count;i++)
                {

                    if (dataGridView1.Rows[i].cells[i].Value==null)**
                    {
                        MessageBox.Show("This row is empty");
                        break;
                    }

                    else
                        {
                          UnsortArray[i] = dataGridView1.Rows[i].cells[i].Value.ToString();
                            MessageBox.Show(UnsortArray[i]);

                        }

                } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-24T06:55:21.027

使用不同的索引变量`UnSortArray`（比如说 j）。`i`是要存储的值的单元格的索引`UnSortArray`

**代码**

```
 foreach (DataGridViewRow row in dataGridView1.Rows)     
            {

                if (row.Cells[i].Value == null)
                {
                    MessageBox.Show("This row is empty")
                }
                else
                    {
                        UnsortArray[j] = row.Cells[i].Value.ToString();
                        MessageBox.Show(UnsortArray[j]);
                        ++j;
                    }
            } 
```

# php - PHP - 变量分配中的程序逻辑

> ID：12559911
> 
> 赞同：3
> 
> 时间：2012-09-24T06:31:17.350
> 
> 标签：php, mysql, database, logic, business-logic

我在公司网站上有 5 个销售人员。现在，当有查询时，它应该按以下比例分配

销售A : 销售B : 销售C : 销售D : 销售E = 1 : 2 : 1 : 1 : 1

我用 mysql 作为数据库在 php 中创建了我的网站。

1.是否有可能在不使用数据库的情况下实现上述目标

2.如果需要数据库，最好的数据库设计是什么。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:33:53.190

这个逻辑必须在 PHP 代码中实现，而不是在数据库级别。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:40:37.323

获取要插入的行的数据库 ID 的六 (1+2+1+1+1)[模数。](http://en.wikipedia.org/wiki/Modulo_operation)然后根据此分配销售人员。

```
// Quick and dirty example
switch($nextId % 6) {
    case 0:
        $salesperson = 'SalesA';
        break;
    case 1:
    case 2:
        $salesperson = 'SalesB';
        break;
    case 3:
        $salesperson = 'SalesC';
        break;
    case 4:
        $salesperson = 'SalesD';
        break;
    case 5:
        $salesperson = 'SalesE';
        break;
} 
```

这也可以通过使用`AFTER INSERT`触发器在数据库级别完成。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:30:59.460

数据库设计：

```
teams

id   title  ratio
1    TeamA  1
2    TeamB  2
3    TeamC  1
4    TeamD  1
5    TeamE  1 
```

可能有两种创建表的方法：使用或不使用关系数据

```
enquiries

id   team_id enquiry
1    1       something
2    2       something else
3    2       something
4    3       something else 
```

在这种情况下，当您将数据插入查询表时，您应该注意团队比例。

样本：

```
SELECT e.id AS enquiry_id, e.enquiry, t.title 
FROM enquiries e 
JOIN teams t
  ON t.id=e.team_id 
```

您也可以选择非关系查询表

```
enquiries

id   enquiry
1    something
2    something else
3    something 
```

对于此表，您在选择查询时必须关心团队比例

样本：

```
$teams = array();

$query = "SELECT id, title, ratio FROM teams";
$sql = $mysqli->query($query);
while($row = $sql->fetch_assoc()) {
    $teams[] = $row;
}

$query = "SELECT * FROM enquiries";
$sql = $mysqli->query($query);

$team = 0;
$i    = 0;
while($row = $sql->fetch_assoc()) {
    if($i >= $teams[$team]['ratio']) {
        $team = $team == count($teams) ? 0 : ($team + 1);

        $i = 0;
    }

    $teams[$team]['enquiries'][] = $row;
    $i++;
}

print_r($teams); 
```

# java - Java：如何在 java 中将 File 对象转换为 String 对象？

> ID：12559917
> 
> 赞同：11
> 
> 时间：2012-09-24T06:31:50.653
> 
> 标签：java

> **可能重复：**
> [如何从文件内容创建 Java 字符串](https://stackoverflow.com/questions/326390/how-to-create-a-java-string-from-the-contents-of-a-file)

我有一个 html 文件，我想用它来提取信息。为此，我正在使用 Jsoup。现在要使用 Jsoup，我需要将 html 文件转换为字符串。我怎样才能做到这一点？

```
File myhtml = new File("D:\\path\\report.html")'; 
```

现在，我想要一个包含 html 文件中内容的 String 对象。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-09-24T06:35:57.587

我使用[apache common IO](https://commons.apache.org/proper/commons-io/javadocs/api-2.4/org/apache/commons/io/FileUtils.html)将文本文件读入单个字符串

```
String str = FileUtils.readFileToString(file); 
```

简单而“干净”。您甚至可以轻松设置文本文件的编码。

```
String str = FileUtils.readFileToString(file, "UTF-8"); 
```

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-24T06:37:34.320

使用像[Guava](http://docs.guava-libraries.googlecode.com/git/javadoc/com/google/common/io/Files.html)或[Commons / IO](http://commons.apache.org/io/api-release/org/apache/commons/io/FileUtils.html)这样的库。他们有oneliner方法。

番石榴：

```
Files.toString(file, charset); 
```

公地/ IO：

```
FileUtils.readFileToString(file, charset); 
```

如果没有这样的库，我会编写一个辅助方法，如下所示：

```
public String readFile(File file, Charset charset) throws IOException {
    return new String(Files.readAllBytes(file.toPath()), charset);
} 
```

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-09-24T06:35:29.780

使用 Java 7，它很简单：

```
final String EoL = System.getProperty("line.separator");
List<String> lines = Files.readAllLines(Paths.get(fileName),
        Charset.defaultCharset());

StringBuilder sb = new StringBuilder();
for (String line : lines) {
    sb.append(line).append(EoL);
}
final String content = sb.toString(); 
```

但是，它确实有一些小注意事项（例如处理不适合内存的文件）。

我建议您查看官方 Java 教程中的[相应部分](http://docs.oracle.com/javase/tutorial/essential/io/charstreams.html)（如果您有以前的 Java，情况也是如此）。

正如其他人指出的那样，您可能会发现 sime 3rd 方库很有用（例如 Apache commons I/O 或 Guava）。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-09-24T06:47:18.830

使用文件输入流读取文件并将文件内容附加到字符串。

```
import java.io.File;
import java.io.FileInputStream;
import java.io.IOException;

public class CopyOffileInputStream {

    public static void main(String[] args) {

        //File file = new File("./store/robots.txt");
        File file = new File("swingloggingsscce.log");

        FileInputStream fis = null;
        String str = "";

        try {
            fis = new FileInputStream(file);
            int content;
            while ((content = fis.read()) != -1) {
                // convert to char and display it
                str += (char) content;
            }

            System.out.println("After reading file");
            System.out.println(str);

        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (fis != null)
                    fis.close();
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-24T06:36:17.127

`myhtml`您可以将to的所有内容复制`String`如下：

```
Scanner myScanner = null;
try
{
    myScanner = new Scanner(myhtml);
    String contents = myScanner.useDelimiter("\\Z").next(); 
}
finally
{
    if(myScanner != null)
    {
        myScanner.close(); 
    }
} 
```

当然，您可以添加一个`catch`块来正确处理异常。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-24T06:36:31.860

顺便说一句，Jsoup 有获取文件的方法：http://jsoup.org/apidocs/org/jsoup/Jsoup.html#parse(java.io.File,% [20java.lang.String](http://jsoup.org/apidocs/org/jsoup/Jsoup.html#parse(java.io.File,%20java.lang.String) )

* * *

## 回答 #7

> 赞同：-1
> 
> 时间：2012-09-24T06:35:59.833

为什么您不逐行读取文件并将其添加到 StringBuffer 中？

到达文件末尾后，您可以从 StringBuffer 中获取字符串。

# android - Android：在用户输入的位置上显示谷歌地图

> ID：12559924
> 
> 赞同：3
> 
> 时间：2012-09-24T06:32:31.360
> 
> 标签：android, google-maps-api-3, android-maps

> **可能重复：**
> [如何获取用户输入的名称并在edittext中搜索相应的位置](https://stackoverflow.com/questions/10208985/how-to-get-the-name-entered-by-the-user-and-search-that-respective-location-in-e)

我实际上已经编写了一个代码，用于在 android 中按用户显示谷歌地图。用户在编辑文本中输入我在 JSON 中用于获取纬度和经度的位置，并将地图指向该纬度和经度。现在我面临的问题是我已经将用户输入的位置 dat 存储在一个名为 location 的变量中，并且我已经在 J​​SON 中传递了 dat 变量。但是每当我运行程序并输入任何位置时，地图都会指向海得拉巴附近。
我已经在 tabview 中实现了这段代码这是我的代码......

这里的基本问题是来自json的纬度和经度没有被传递到其他页面......

```
protected void onCreate(Bundle savedInstanceState)
{
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mapview);

        Et = (EditText) findViewById(R.id.edt); 
        Bt = (Button) findViewById(R.id.Search);
        location = Et.getText().toString();
       final String readTwitterFeed = readTwi("http://maps.googleapis.com/maps/api/geocode/json?address=+location+&sensor=false");
       Bt.setOnClickListener(new OnClickListener() 
       {
           String strUrl,lon;
           public void onClick(View v)
           {
               try
                {           

                    JSONObject jsonObject =new JSONObject(readTwitterFeed).getJSONArray("results").getJSONObject(0).getJSONObject("geometry").getJSONObject("location");

                    strUrl=jsonObject.getString("lat");
                    lon=jsonObject.getString("lng");
                    Log.i("location",strUrl);
                    Log.i("longtin",lon);
                }
                catch (Exception e) 
                {
                    e.printStackTrace();
                }
               Intent intent=new Intent(MapView.this,MapsActivity.class);
               intent.putExtra("lat",strUrl);
               intent.putExtra("lng",lon);
               startActivity(intent);
           }

        });
  }
private String readTwi(String url)
{
    StringBuilder builder = new StringBuilder();
    HttpClient client = new DefaultHttpClient();
    HttpGet httpGet = new HttpGet(url);
    try {
      HttpResponse response = client.execute(httpGet);
      StatusLine statusLine = response.getStatusLine();
      int statusCode = statusLine.getStatusCode();
      if (statusCode == 200) {
        HttpEntity entity = response.getEntity();
        InputStream content = entity.getContent();
        BufferedReader reader = new BufferedReader(new InputStreamReader(content));
        String line;
        while ((line = reader.readLine()) != null) {
          builder.append(line);
        }
      } else {
        Log.e(MapView.class.toString(), "Failed to download file");
      }
    } catch (ClientProtocolException e) {
      e.printStackTrace();
    } catch (IOException e) {
      e.printStackTrace();
    }
    return builder.toString();
} 
```

# svn - 解决树冲突

> ID：12559929
> 
> 赞同：90
> 
> 时间：2012-09-24T06:33:27.260
> 
> 标签：svn, tortoisesvn, tree-conflict

如何解决当前场景中的树冲突。

```
C:\DevBranch
C:\MyBranch 
```

我更新了两个分支。编辑 MyBranch 然后提交回来。现在想将这些更改合并到 DevBranch。当我进行合并时，我得到“树冲突”

```
The last merge operation tried to add the file 'abc.def', but it was already added locally.

How do you want to resolve this conflict?
Keep the file from repository
Keep the local file 
```

我该如何解决？

* * *

## 回答 #1

> 赞同：175
> 
> 时间：2012-09-24T06:53:26.360

你可以做些什么来解决你的冲突是

```
svn resolve --accept working -R <path> 
```

`<path>`你的冲突在哪里（可以是你的回购的根源）。

说明：

*   `resolve`要求`svn`解决冲突
*   `accept working`指定保留您的工作文件
*   `-R`代表递归

希望这可以帮助。

**编辑：**

总结以下评论中所说的话：

*   `<path>`应该是冲突的目录（`C:\DevBranch\`在 OP 的情况下）
*   冲突的根源很可能是
    *   要么使用`svn switch`命令
    *   `Switch working copy to new branch/tag`或在创建分支时检查了该选项
*   有关冲突的更多信息可以在[Tortoise 文档的专用部分中](http://tortoisesvn.net/docs/release/TortoiseSVN_en/tsvn-dug-conflicts.html)找到。
*   为了能够运行该命令，您应该将 CLI 工具与 Tortoise 一起安装：

![命令行客户端工具](../Images/c11ed9a1673567dfa3011fa086bd1e07.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-01-30T05:00:24.457

基本上，如果分支上的文件夹结构有一些重组，就会出现树冲突。您需要删除冲突文件夹并使用`svn cleanup`一次。希望这能解决你的冲突。

# winforms - webbrowser.document 抛出 Specified cast is not valid 异常

> ID：12559930
> 
> 赞同：2
> 
> 时间：2012-09-24T06:33:33.267
> 
> 标签：winforms, c#-4.0

我的页面上有一个 WebBrowser 控件。在浏览器控件中显示的页面上触发一些 javascript。当我尝试保存我的网页时，我收到了这个错误

```
String strHtml = _browser.Document.Body.OuterText;
File.WriteAllText("C:\saveme.html", strHtml); 
```

这行 _browser.Document.Body.OuterText 抛出异常

```
Exception:: Specified cast is not valid.
at System.Windows.Forms.UnsafeNativeMethods.IHTMLDocument2.GetLocation()
at System.Windows.Forms.WebBrowser.get_Document().... 
```

我也使用过 Invoke 但不起作用，有什么我错过的吗

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-24T06:52:30.543

您是否从 UI 线程访问 WebBrowser 控件？如果没有，请尝试从 UI 线程访问它或使用[Dispatcher.Invoke](http://msdn.microsoft.com/en-us/library/ms604732.aspx)。有关更多详细信息，请参阅[“指定的强制转换无效”错误](https://stackoverflow.com/questions/9566337/c-sharp-specified-cast-is-not-valid-error)。

否则，文档可能尚未完成加载。等到[DocumentCompleted](http://msdn.microsoft.com/en-us/library/system.windows.forms.webbrowser.documentcompleted.aspx)事件触发以确保文档已加载，然后访问该属性。有关详细信息，请参阅 [WebBrowser.Document.Body 始终为空](https://stackoverflow.com/questions/8141061/webbrowser-document-body-is-always-null)。

# objective-c - AFNetworking 同步请求

> ID：12559935
> 
> 赞同：1
> 
> 时间：2012-09-24T06:33:45.657
> 
> 标签：objective-c, ios5, afnetworking

我想同步使用 AFNetworking http 客户端。我不知道该怎么做。我选择这样做的原因是因为我通过单击按钮进行服务器调用。在我处理完响应之前，我不希望用户与 UI 交互。示例代码将非常有帮助。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-06-17T16:56:43.433

不。只是不要。

在用户方面，它会冻结所有内容并使您的应用程序感觉错误。至少您可以使用异步请求和这样的加载器：[https](https://github.com/samvermette/SVProgressHUD) ://github.com/samvermette/SVProgressHUD 示例：

```
[SVProgressHUD show];

NSURLRequest *request = [NSURLRequest requestWithURL:[NSURL URLWithString:@"https://gowalla.com/users/mattt.json"]];
AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

[SVProgressHUD dismiss];

} failure:nil]; 
```

# file-upload - 未找到文件异常，片段在其他项目中完美运行

> ID：12559940
> 
> 赞同：0
> 
> 时间：2012-09-24T06:34:00.660
> 
> 标签：file-upload, playframework, playframework-1.x

下面的 scippet 效果很好，我已经在许多项目中使用它。但是，对于这个项目，我得到了一个找不到文件的异常。

```
try {
        FileInputStream is = new FileInputStream(file);
        String original = file.getName();

        Logger.debug("Filename in upload pf %s ", original);
        IOUtils.copy(is, new FileOutputStream(Play.getFile(original)));

        PfParser p1 = new PfParser();
        p1.read(original, month, year);

        Payroll.index();

    } catch (FileNotFoundException e) {
        Logger.error(e, "Exception in uploadSheet: ");
        e.printStackTrace();
    } catch (IOException e) {
        Logger.error(e, "Exception in uploadSheet: ");
        e.printStackTrace();
    } 
```

这是读取方法，我尝试了几种组合，将其注释掉：

```
FileInputStream myInput = new FileInputStream(
                System.getProperty("user.dir") + inputFile);
        w = Workbook.getWorkbook(myInput);
        // w = Workbook.getWorkbook(new File(inputFile));
        // w = Workbook.getWorkbook(new File(System.getProperty("user.dir"),
        // inputFile)); 
```

这会将文件上传到文件`C:\Program Files (x86)\Apache Software Foundation\Tomcat 6.0\webapps\ROOT\WEB-INF\application`夹。

我正在尝试使用 Jexcel 读取 excel 文件。我在服务器上遇到的错误：

```
java.io.FileNotFoundException: foo.xls (The system cannot find the file specified)
    at java.io.FileInputStream.open(Native Method)
    at java.io.FileInputStream.<init>(Unknown Source)
    at java.io.FileInputStream.<init>(Unknown Source) 
```

尝试其他（注释掉的）行，只会给出错误的变化。

```
java.io.FileNotFoundException: C:\Program Files (x86)\Apache Software Foundation\Tomcat 6.0\foo.xls (The system cannot find the file specified) 
```

我了解它与绝对和相对路径有关的问题，但似乎无法找到解决方案。在我的本地机器 Ubuntu 上进行编码和测试时，我没有收到任何错误。只有当我部署到 Windows 服务器时，我才会遇到这些问题。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:51:17.170

当文件不在您在 FileInputStream 构造函数中提供的绝对/相对路径上时，会出现**FileNotFound异常。**

```
FileInputStream is = new FileInputStream(file); 
```

我怀疑您没有在 FileInputStream 构造函数中给出正确的位置。如果您编写完整的spinet，包括文件位置等，那就太好了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T05:17:33.367

我改变了线路

`IOUtils.copy(is, new FileOutputStream(Play.getFile(original)));`

至

`IOUtils.copy(is, new FileOutputStream("./" + original));`

上传现在有效。

# grails - Grails：根据页面大小加载数据

> ID：12559944
> 
> 赞同：0
> 
> 时间：2012-09-24T06:34:46.460
> 
> 标签：grails

我有一个显示数据的视图->在发送到后端的请求之后解析的 json。

请求参数包含页面广告页面大小，默认为 page=1，页面大小为 20。

现在我需要一个分页视图，通过允许用户每页选择 10 条记录、20 条记录和 100 条记录来帮助查看记录。解析的 json 数据已经在视图中可用。PLz，请帮助我，当用户第一次打开页面时，我应该怎么做才能只显示 20 条记录，当他选择 100 条记录时，页面应该显示 100 条记录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:15:26.943

我在想你有一个`HTML drop down`说 20 个结果（以及 50 和 100 等等），然后当他改变这个时，它应该显示在页面上，对吗？
为此，您可以为下拉`onChange()`事件设置一个事件处理程序，该事件处理程序对您的服务器进行 AJAX 调用（并传递所需的结果数量以及偏移量（如果有）作为参数） - 并返回您可以显示的结果。
我就是这样做的。

# python - xargs：将“find”tests.py 传递给 manage.py 测试

> ID：12559947
> 
> 赞同：0
> 
> 时间：2012-09-24T06:35:07.223
> 
> 标签：python, django, macos, bash, nose

我尝试在 django 项目目录中执行以下 bash 命令。我正在`django-nose`用作TestRunner。

```
find . -name \tests.py -print0 | xargs -0 -Ixxx ./manage.py test xxx --settings=project_name.conf.test.settings 
```

但我收到以下错误（取决于 tests.py 文件的数量）：

```
OSError: No such file /Users/user/Projects/project_name/{} 
```

同样没有`-print0`停止`tests.py`

完整回溯（没有命令`-print0`：

```
nosetests --verbosity 1 ./project_name/backend/tests.py
./project_name/contrib/auth/tests.py
./project_name/frontend/tests.py
 --failed --stop --nocapture --debug=DEBUG --nologcapture
To reuse old database "test_db" for speed, set env var REUSE_DB=1.
To reuse old database "test_db1" for speed, set env var REUSE_DB=1.
Creating test database for alias 'default'...
Creating schema msg
Creating schema dict
Creating test database for alias 'db2'...
Creating schema msg
Creating schema dict
E
======================================================================
ERROR: Failure: OSError (No such file /Users/user/Projects/project_name/{})
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/user/.virtualenvs/project_name/lib/python2.7/site-packages/nose/failure.py", line 39, in runTest
    raise self.exc_class(self.exc_val)
OSError: No such file /Users/user/Projects/project_name/{}

----------------------------------------------------------------------
Ran 1 test in 0.001s

FAILED (errors=1)
Destroying test database for alias 'default'...
Destroying test database for alias 'db2'... 
```

`xargs`在这种情况下使用的正确方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T06:50:47.677

以下命令是正确的：

```
find . -name \tests.py -print0 | xargs -0 -Ixxx ./manage.py test xxx --settings=project_name.conf.test.settings 
```

我只是`rm .noseids`在运行它之前做过。如果您`./manage.py test`使用错误的参数执行，它总是会导致问题。然后`.noseids`每次都写入并执行。

# perl - 当路径带有空格时，使用 perl 制作存档

> ID：12559948
> 
> 赞同：1
> 
> 时间：2012-09-24T06:35:07.680
> 
> 标签：perl

如何在 perl 脚本中使用带空格的路径，运行存档推荐？

说这是带有我需要的路径的命令：

```
C:\\"Program Files"\\7-Zip\\7z.exe a d:\\views\\"My views" d:\\"Public view" 
```

有人有想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T06:40:35.650

如果您使用[`system`](http://perldoc.perl.org/functions/system.html)带有多个参数的命令，则每个参数都未经修改地传递给调用的程序：

```
system 'C:\Program Files\7-Zip\7z.exe', 'a',
       'd:\views\My views', 'd:\Public view'; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-24T06:47:25.877

虽然这不是 Perl 问题，但您可以使用此语法

```
"C:\Program Files\7-Zip\7z.exe" a target.zip "c:\path with spaces\example.pdf" 
```

如果您需要从 perl 脚本中调用

```
$cmd = q!"C:\Program Files\7-Zip\7z.exe" a target.zip "c:\path with spaces\example.pdf"!;
system $cmd; 
```

# html - 较大的字体大小在右对齐文本中向右移动

> ID：12559952
> 
> 赞同：1
> 
> 时间：2012-09-24T06:35:23.823
> 
> 标签：html, css

当我更改右对齐文本的字体大小时，我遇到了奇怪的行为。当我降低字体大小时，文本向左移动。更具体地说，最右边字符的右侧与其余字符一起以较小的字体向左更远。

HTML

```
<dl class="date-term">
<dt>24 Sep 2012</dt>
<dd>Lots of thinking and reading about writing this weekend, but no doing.</dd>
</dl> 
```

CSS

```
p , dd
{
font-size: 1.125em;
line-height: 1.375em;
margin: 1.375em 0 1.375em 0;
color: inherit;
}
dl.date-term dt
{
float: left;
width: 5.8em;
margin-top: 0.250em;
text-align: right;
font-size: 0.8em;   /* de-emphasize */
color: #7e8b8c;     /* Make it more subdued */
}
dl.date-term dd
{
margin-left: 6.0em; /* .5em greater then width of dt above */
} 
```

.2em 是 2 或 3 px 我的目标是让 dt 和 dd 靠得更近。有问题的页面可以在[这里看到：](http://www.zetcho.com) 如果我减小 dt 的宽度，即使字体较小，它也会换行。我已经在 OS X 上的 Safari 和 Firefox 中尝试过。

感谢您的帮助，柯特

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:24:51.700

要使 dt 和 dt 更接近，只需减少`margin-left`master.css`dl.date-term dd`行号：388 上的

```
dl.date-term dd {
margin-left: 5em;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:39:04.000

删除 line-height 似乎为我解决了这个问题。

可能值得研究字体配置的速记/其他选项：http: [//css-tricks.com/snippets/css/font-shorthand/](http://css-tricks.com/snippets/css/font-shorthand/)

JSFiddle 示例：http: [//jsfiddle.net/UAbUu/](http://jsfiddle.net/UAbUu/)

也可能值得研究使用相对值而不是 margin-top 等。

# javascript - 点击链接放大图片

> ID：12559955
> 
> 赞同：1
> 
> 时间：2012-09-24T06:35:29.303
> 
> 标签：javascript, c#, image, asp.net-mvc-3, popup

```
 @foreach (var item in Model)
  { 
        <img src='ShowShowcaseImage/@Html.Encode(item.ProductID)' id='@item.ProductID'  />
        <b>@Html.DisplayFor(m => item.ProductName)</b>
        <a href="#"  class="enlargeImg" id="@item.ProductID">Enlarge</a>
  }

<div id="EnlargeContent" class="content">
    <span class="button bClose"><span>X</span></span>

    <div style="margin: 10px;" id="imageContent">
    </div>

    <p align="center"></p>
</div> 
```

//弹出javascript

```
$('.enlargeImg').bind('click', function (e) {
            $.post('/Home/EnlargeShowcaseImage/' + $(this).attr('id'), null, function (data) {
         document.getElementById("imageContent").innerHTML +=  data;
            });

            $('#EnlargeContent').bPopup();
 });
    }); 
```

// C#方法

```
 public ActionResult EnlargeShowcaseImage(string id)
            {

                var imageData = //linq query for retrive bytes from database;
                StringBuilder builder = new StringBuilder();
                if (imageData != null)
                    builder.Append("<img src='" + imageData.ImageBytes + "' />");
                return Json(builder);

            } 
```

我想在单击放大链接时显示放大图像的弹出窗口。图像以字节存储在数据库中。每个产品的数据库中存储了两张图像——一张是缩略图，另一张是放大的。我正在显示缩略图，我想在单击放大链接时显示放大的图像。我无法从数据库中检索它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T06:54:27.703

> 我无法从数据库中检索它

所以你的问题是关于从数据库中检索图像，对吧？它与 ASP.NET MVC 完全无关？

不幸的是，您没有告诉我们您是使用一些 ORM 框架来访问您的数据库还是使用普通的 ADO.NET。假设您使用的是普通的 ADO.NET：

```
public byte[] GetImage(string id)
{
    using (var conn = new SqlConnection("YOUR CONNECTION STRING COMES HERE"))
    using (var cmd = conn.CreateCommand())
    {
        conn.Open();
        // TODO: replace the imageData and id columns and tableName with your actual
        // database table names
        cmd.CommandText = "SELECT imageData FROM tableName WHERE id = @id";
        cmd.Parameters.AddWithValue("@id", id);
        using (var reader = cmd.ExecuteReader())
        {
            if (!reader.Read())
            {
                // there was no corresponding record found in the database
                return null;
            }

            const int CHUNK_SIZE = 2 * 1024;
            byte[] buffer = new byte[CHUNK_SIZE];
            long bytesRead;
            long fieldOffset = 0;
            using (var stream = new MemoryStream())
            {
                while ((bytesRead = reader.GetBytes(reader.GetOrdinal("imageData"), fieldOffset, buffer, 0, buffer.Length)) > 0)
                {
                    stream.Write(buffer, 0, (int)bytesRead);
                    fieldOffset += bytesRead;
                }
                return stream.ToArray();
            }            
        }
    }
} 
```

如果您使用的是一些 ORM，它可能很简单：

```
public byte[] GetImage(string id)
{
    using (var db = new SomeDataContext())
    {
        return db.Images.FirstOrDefault(x => x.Id == id).ImageData;
    }
} 
```

然后在您的控制器操作中：

```
public ActionResult EnlargeShowcaseImage(string id)
{
    var imageData = GetImage(id);
    if (imageData != null)
    {
        // TODO: adjust the MIME Type of the images
        return File(imageData, "image/png");
    }

    return new HttpNotFoundResult();
} 
```

并且在您的视图中，您应该`<img>`在单击按钮时创建一个指向此控制器操作的标记：

```
$('.enlargeImg').bind('click', function (e) {
    $('#imageContent').html(
        $('<img/>', {
            src: '/Home/EnlargeShowcaseImage/' + $(this).attr('id')
        })
    );
    $('#EnlargeContent').bPopup();
}); 
```

但是像这样在 javascript 中将 url 硬编码到您的控制器操作是非常糟糕的做法，因为当您部署应用程序时它可能会中断。如果您决定更改路线的模式，它也可能会中断。你不应该像这样硬编码网址。我建议您在服务器上生成此 url。

例如，我看到您订阅了某个`.enlargeImage`元素。让我们假设这是一个锚。以下是正确生成它的方法：

```
@Html.ActionLink("Enlarge", "EnlargeShowcaseImage", "Home", new { id = item.Id }, new { @class = "enlargeImage" }) 
```

然后调整点击处理程序：

```
$('.enlargeImg').bind('click', function (e) {
    // Cancel the default action of the anchor
    e.preventDefault();

    $('#imageContent').html(
        $('<img/>', {
            src: this.href
        })
    );
    $('#EnlargeContent').bPopup();
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:45:51.103

试试 jQuery，

这是一个 [http://superdit.com/2011/06/11/hover-image-zoom-with-jquery/](http://superdit.com/2011/06/11/hover-image-zoom-with-jquery/)

[http://demo.superdit.com/jquery/zoom_hover/](http://demo.superdit.com/jquery/zoom_hover/)

# iphone - 将 Char 数组转换为 Long int

> ID：12559963
> 
> 赞同：0
> 
> 时间：2012-09-24T06:36:04.600
> 
> 标签：iphone, objective-c, char, long-integer

如何在obj c中将Char数组转换为long

```
 unsigned char *composite[4]; 
composite[0]=spIndex;
composite[1]= minor;
composite[2]=shortss[0];
composite[3]=shortss[1]; 
```

我需要将其转换为 Long int ..任何人请帮忙

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T07:00:29.097

如果您正在考虑转换本质上已经是二进制数的内容，那么简单的类型转换就足够了，但您需要反转索引以获得与 Java 相同的结果：`long value = *((long*)composite);`

如果你有很多这样的场景，你也可以考虑这个：

```
union {
  unsigned char asChars[4];
  long asLong;
} value;

value.asChar[3] = 1;
value.asChar[2] = 9;
value.asChar[1] = 0;
value.asChar[0] = 10;

// Outputs 17367050
NSLog(@"Value as long  %ld",value.asLong); 
```

# dns - 多个服务器上的单个域

> ID：12559964
> 
> 赞同：5
> 
> 时间：2012-09-24T06:36:06.257
> 
> 标签：dns, load-balancing

我有一个需要分布在多台服务器上以实现负载平衡的域。我也有我的应用程序来告诉服务器应该处理某些请求。

现在，我将其设置为使用 www1、www2 等子域，并且只是重定向到每个服务器，但这很丑陋。

我需要一种代理请求的方法，并且用户始终只能看到 www，而不管实际服务请求的 IP 是什么......

我读了一点apache代理的东西，但我仍然很困惑这样的场景如何在不改变www的情况下提供页面和视频等资源。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-24T06:48:42.277

您可以在 DNS 表中为每个子域输入多个 IP 地址。如果您的 DNS 服务器支持它，您可以在每个请求上轮换这些条目以获得简单的循环负载平衡器（请参阅[http://en.wikipedia.org/wiki/Round-robin_DNS](http://en.wikipedia.org/wiki/Round-robin_DNS)）

但是，更好的解决方案是拥有一个负载平衡服务器来处理对您网站的所有请求。通过这种方式，您可以立即在负载平衡中添加和删除 Web 服务器。因此，当您需要对一台服务器进行一些维护时，您只需将其从轮换中取出即可。

许多负载平衡器还会检查 Web 服务器是否还活着并自动删除死服务器。这将显着增加您的正常运行时间。

# android - 在数组列表的视图持有者文本视图中设置文本

> ID：12559966
> 
> 赞同：0
> 
> 时间：2012-09-24T06:36:15.747
> 
> 标签：android, arraylist, hashmap, baseadapter

我正在实现列表视图，我有用户 BaseAdapter 类。我正在尝试从数组列表中在持有者的文本视图字段中设置文本，但没有任何成功。问题出在 getView 方法的`HashMap<String, ArrayList<String>> map = list.get(position); holder.txtFirst.setText(map.get(FIRST_COLUMN).toString());` 一部分。
**编辑：** 我的主要活动类（**postExecute 方法**），我在其中设置列表适配器类的键和值。代码如下：

```
protected void onPostExecute(ArrayList<ArrayList<String>> result) {

        ArrayList<String> conceptID = new ArrayList<String>(result.get(0));
        ArrayList<String> conceptDesc = new ArrayList<String>(result.get(1));

        listForSearchConcepts = new ArrayList<HashMap<String,ArrayList<String>>>();
        HashMap<String, ArrayList<String>> temp = new HashMap<String,ArrayList<String>>();
        temp.put(FIRST_COLUMN,conceptID);
        listForSearchConcepts.add(temp);
        temp.put(SECOND_COLUMN,conceptDesc);
        listForSearchConcepts.add(temp);
        listviewAdapter adapter = new listviewAdapter(MainActivity.this, listForSearchConcepts);
        listView.setAdapter(adapter);
    }` 
```

但是下面是我的适配器类代码：

```
public class listviewAdapter extends BaseAdapter
{
public ArrayList< HashMap < String,ArrayList < String > > > list;
Activity activity;

public listviewAdapter(Activity activity, ArrayList<HashMap<String,ArrayList<String>>> listForSearchConcepts) {
    super();
    this.activity = activity;
    this.list = listForSearchConcepts;
}

public int getCount() {
    // TODO Auto-generated method stub
    return list.size();
}

public Object getItem(int position) {
    // TODO Auto-generated method stub
    return list.get(position);
}

public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

private class ViewHolder {
       TextView txtFirst;
       TextView txtSecond;
       TextView txtThird;
       TextView txtFourth;
  }

public View getView(int position, View convertView, ViewGroup parent) {
    // TODO Auto-generated method stub

    // TODO Auto-generated method stub
            ViewHolder holder;
            LayoutInflater inflater =  activity.getLayoutInflater();

            if (convertView == null)
            {
                convertView = inflater.inflate(R.layout.listview_row, null);
                holder = new ViewHolder();
                holder.txtFirst = (TextView) convertView.findViewById(R.id.FirstText);
                holder.txtSecond = (TextView) convertView.findViewById(R.id.SecondText);
                convertView.setTag(holder);
            }
            else
            {
                holder = (ViewHolder) convertView.getTag();
            }

            HashMap<String, ArrayList<String>> map = list.get(position);
            holder.txtFirst.setText(map.get(FIRST_COLUMN).toString());
            //holder.txtSecond.setText(map.get(SECOND_COLUMN).get(1));
            //holder.txtThird.setText(map.get(THIRD_COLUMN));
            //holder.txtFourth.setText(map.get(FOURTH_COLUMN));

        return convertView;
} 
```

}

我还附上了我实际运行应用程序的屏幕截图：
![输出列表视图](../Images/d2e28cc71be3a0cf1f7f16333b52d1b3.png)

有什么建议吗？
谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-24T07:27:31.383

我强烈建议你用类替换你的 hasmaps 和 arraylists。Java 使用映射列表处理结构的能力很差。它在java中看起来很丑。您可以创建`Concept`包含 2 个字段的类：`id`和`description`. 在`postExecute`方法中，您将列表转换为概念列表。像这样的东西：

概念类：

```
public class Concept {

    public String id;
    public String description;
} 
```

onPostExecute 方法：

```
protected void onPostExecute(List<List<String>> result) {

    List<String> conceptID = result.get(0);
    List<String> conceptDesc = result.get(1);

    List<Concept> listForSearchConcepts = new ArrayList<Concept>();
    for (int i = 0; i < conceptID.size(); i++) {
        Concept concept = new Concept();
        concept.id = conceptID.get(i);
        concept.description = conceptDesc.get(i);
        listForSearchConcepts.add(concept);
    }
    ListViewAdapter adapter = new ListViewAdapter(MainActivity.this, listForSearchConcepts);
    listView.setAdapter(adapter);
} 
```

ListViewAdapter 类：

```
class ListviewAdapter extends BaseAdapter
{
    public List<Concept> list;
    Activity activity;

    public ListviewAdapter(Activity activity, List<Concept> listForSearchConcepts) {
        super();
        this.activity = activity;
        this.list = listForSearchConcepts;
    }

    public int getCount() {
        return list.size();
    }

    public Object getItem(int position) {
        return list.get(position);
    }

    public long getItemId(int position) {
        return 0;
    }

    private class ViewHolder {
        TextView txtFirst;
        TextView txtSecond;
        TextView txtThird;
        TextView txtFourth;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        // TODO Auto-generated method stub

        // TODO Auto-generated method stub
        ViewHolder holder;
        LayoutInflater inflater =  activity.getLayoutInflater();

        if (convertView == null)
        {
            convertView = inflater.inflate(R.layout.listview_row, null);
            holder = new ViewHolder();
            holder.txtFirst = (TextView) convertView.findViewById(R.id.FirstText);
            holder.txtSecond = (TextView) convertView.findViewById(R.id.SecondText);
            convertView.setTag(holder);
        }
        else
        {
            holder = (ViewHolder) convertView.getTag();
        }

        Concept concept = list.get(position);
        holder.txtFirst.setText(concept.id);
        holder.txtSecond.setText(concept.description);

        return convertView;
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T06:47:06.387

是的，仅由于这些行而发生错误。

```
HashMap<String, ArrayList<String>> map = list.get(position);      
holder.txtFirst.setText(map.get(FIRST_COLUMN).toString());

HashMap<String, ArrayList<String>> map = list.get(position); 
/* this hashmap will give a hashmap of arraylist So first you have to get the arralist with its related key from the hashmap. Then you can go for getting the column from that arralist. */

/*
holder.txtFirst.setText(map.get(FIRST_COLUMN).toString());
But here you are getting the column from the hashmap that is wrong. you can get only arraylist from the hashmap with key.
*/ 
```

# ruby - 需要跟踪用户的 github 凭据的 Ruby gem

> ID：12559969
> 
> 赞同：1
> 
> 时间：2012-09-24T06:36:22.703
> 
> 标签：ruby, rubygems, gem, github-api

我正在编写一个 ruby​​ gem，它有一个命令行界面（使用 Thor）我称之为“myrubygem”。

用户应该能够执行以下操作：

```
myrubygem init 
```

这应该要求提供 github 登录名和密码，并使用 github api 在 github 上创建一个存储库（除了我希望 gem 做的其他一些事情）。

```
myrubygem push 
```

这应该提交并将一些文件推送到 repo 。这可能是一个重复的操作，我不想一直询问用户他的 github 登录名和密码。此外，将密码存储在文本文件中也不是一个好主意。

有没有办法缓存凭据，以便只有第一个命令需要提示，其余命令可以记住凭据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T07:18:41.400

在尝试了几件事来解决这个问题之后，我将回答我自己的问题并解释我最终做了什么。

1) 保存 Oauth 令牌

这是我尝试的第一件事。我向用户询问了 Github 登录名和密码，使用 github_api gem 使用 Api 进行身份验证。然后我创建了一个具有足够权限的 OAuth 令牌。我存储了这个 OAuth 令牌并使用它来登录。

这很混乱，有安全问题，看起来有问题。

所以我最终这样做了：

2）将责任交给系统git命令

我使用来自 ruby​​ 的系统命令来使用“git”命令来执行所有 git 操作。Git 会询问用户登录详细信息，它知道如何缓存登录信息。更少的头痛和更少的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T06:47:15.663

不适`github`用于cookies？然后，您应该根据需要存储和呈现 cookie 内容。维基百科条目可能在这里有所帮助：[http ://en.wikipedia.org/wiki/HTTP_cookie](http://en.wikipedia.org/wiki/HTTP_cookie)

# android - 单击按钮到另一个页面然后返回当前页面后如何确保数据保留在活动中？

> ID：12559972
> 
> 赞同：0
> 
> 时间：2012-09-24T06:36:25.380
> 
> 标签：android, button, android-intent, android-listview, android-activity

我有一个用户创建事件的应用程序。用户需要从一个名称列表的 ListView 活动中检索某个名称。

我在单击链接到另一个活动（日历活动）的日期按钮后确保名称应保留在活动中，然后返回到当前活动时遇到问题。

我的 3 页代码：

`ListView`Create_Events.java - 用于从活动中获取某个名称以及`btnDate onClickListener`链接到另一个活动（日历活动）的代码

```
Bundle bundle = getIntent().getExtras();  
        if(bundle != null)
        {

            String date = bundle.getString("date");

            txtDate.setText(date);  

        }

        Bundle b = getIntent().getExtras();
        if(b != null)
        {
            String name = bundle.getString("name");
            txtName.setText("Create an event for:" +name);
        }

buttonDate = (Button) findViewById(R.id.btnDate);
        buttonDate.setOnClickListener(new View.OnClickListener()
        {

            @Override
            public void onClick(View v)
            {
                Intent calIntent = new Intent(Create_Events.this, Calendar_Event.class);
                startActivity(calIntent);

            }

        });

ContactsList.java --  the ListView of the names which is passed to the Create_Events page.

    Cursor cursor = null;

               cursor = (Cursor) l.getItemAtPosition(position);
               Intent intent = new Intent(ContactsList.this, Create_Events.class);
               intent.putExtra("name", cursor.getString(cursor.getColumnIndex(buddyDB.KEY_NAME)));
               startActivity(intent); 
```

我需要这方面的帮助。
提供的任何帮助将不胜感激。提前致谢！=)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T07:05:45.283

您可以通过保存当前屏幕状态来获得此行为，您可以使用共享首选项或其他方式（xml，数据库，..），这样在您离开活动（onPause）之前，您可以保存您需要的任何信息..和on (onResume) 如果信息存在（它不是第一次加载活动），

## 收集数据并将其放在屏幕上..

如果这对您来说太多了并且您只需要保存名称字符串，请尝试这样做： [如何在 Android 中声明全局变量？](https://stackoverflow.com/questions/708012/android-how-to-declare-global-variables)

希望能帮助到你...

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-15T09:29:55.783

好的，我从您的问题中了解到，您希望在从另一项活动回来后将您的数据保留在屏幕上。比如活动 A--> 活动 B--> 活动 A

因此，在活动 A 的清单文件中设置

```
 android:launchmode="singletop" 
```

并且，当您从活动 B 回到活动 A 时

设置意图意图=新意图（ActivtyB.this，ActivityA.class）；意图.addFlags（意图.FLAG_ACTIVITY_CLEAR_TOP）；开始活动（意图）；

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T07:06:04.337

您可以使用 SharedPreferences 存储名称，同时使用 bundle 存储日期。

从contactLists.java 添加这些代码

```
private void SavePreferences(String key, String value)
{
    SharedPreferences sharedPref = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
    SharedPreferences.Editor editor = sharedPref.edit();
    editor.putString(key, value);
    editor.commit();
}

private void LoadPreferences()
{
    SharedPreferences sharedPref = getSharedPreferences("MY_SHARED_PREF", MODE_PRIVATE);
    String name = sharedPref.getString("name", "");

} 
```

然后将名称设置为将显示在 listView 上的 textView。然后在 create_events 页面中加载首选项，即使您转到另一个活动，也会显示该名称。如果您还有任何问题，请告诉我。（：

# php - .htaccess - 重定向无效的 URL

> ID：12559973
> 
> 赞同：0
> 
> 时间：2012-09-24T06:36:27.270
> 
> 标签：php, .htaccess, mod-rewrite

我有以下网址： `www.domain.com.au/--xyz-75/`

请建议我如何将此网址重定向到主页，即`www.domain.com.au`使用.htacees。

public_html 文件夹中的 .htaccess 文件。

应用程序是用 php 开发的。

如果在 .htaccess 中不可能，那么还有其他方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-07-29T11:24:57.473

have you tried adding this line of code in your .htaccess file:

```
Redirect 301 /--xyz-75/ / 
```

this will simply redirect from your url to root which is "www.domain.com.au" in your example.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T07:06:08.330

结合其他答案，必须打开重写引擎才能使此解决方案起作用，

```
RewriteEngine on
Redirect /--xyz-75/index.php http://www.domain.com.au/ 
```

另一种方法是在文件`www.domain.com.au/--xyz-75/`夹内的 index.html（或 index.php）文件中使用简单的 HTML 代码：

```
<meta http-equiv="refresh" content="1;URL=http://www.domain.com.au/" /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T06:43:04.037

在`.htaccess`：

```
Redirect /--xyz-75/index.php http://www.domain.com.au/ 
```

在您的 PHP 文件中，您有很多选项可以做到这一点。使用 PHP 标头位置：

```
<?php header("Location: http://www.domain.com.au/"); ?> 
```

使用 JS，问题是它只有在用户浏览器中启用 JS 时才能工作：

```
<script type="text/javascript">
window.location = "http://www.domain.com.au/"
</script> 
```

并使用 HTML：

```
<meta http-equiv="REFRESH" content="0;url=http://www.domain.com.au/"> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-24T06:44:10.527

在 .htacces 中试试这个

```
RewriteEngine on    
Redirect /--xyz-75/ http://www.domain.com.au/ 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-06-13T02:16:00.420

试试这个解决方案：

```
RewriteEngine On 
#if requested filename is not a existing file
RewriteCond %{REQUEST_FILENAME} !-f
#if requested filename is not a existing directory
RewriteCond %{REQUEST_FILENAME} !-d 
#Rewrite the url
RewriteRule ^--([^/]+)/?$ http://example.com [R,L] 
```

这重定向：

```
example.com/--foo 
```

至

```
example.com 
```

# android - 将图像从drawable保存到Android中的内部文件存储

> ID：12559974
> 
> 赞同：10
> 
> 时间：2012-09-24T06:36:28.320
> 
> 标签：android, drawable, file-storage

我在可绘制文件夹中保存了大约 10 张图像。我想将它们移动到内部文件存储。

这可能吗？

我进行了很多搜索，但是我只找到了可以将图像从给定路径保存到内部文件系统的链接，**但是我想将可绘制文件夹中的图像保存到 Android 的内部文件存储中，**并且我想通过代码来实现这一点。

任何帮助将不胜感激。

谢谢你。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2013-02-08T05:09:29.133

**从drawble资源将图像保存到sdcard：**

假设您`ic_launcher`的可绘制对象中有一个图像。然后从此图像中获取位图对象，例如：

```
Bitmap bm = BitmapFactory.decodeResource( getResources(), R.drawable.ic_launcher); 
```

可以使用以下方式检索 SD 卡的路径：

```
String extStorageDirectory = Environment.getExternalStorageDirectory().toString(); 
```

然后在按钮单击时保存到 sdcard：

```
File file = new File(extStorageDirectory, "ic_launcher.PNG");
    outStream = new FileOutputStream(file);
    bm.compress(Bitmap.CompressFormat.PNG, 100, outStream);
    outStream.flush();
    outStream.close(); 
```

不要忘记添加`android.permission.WRITE_EXTERNAL_STORAGE`权限。

# .net - 错误：无法将参数值从字符串转换为 Int32

> ID：12559982
> 
> 赞同：1
> 
> 时间：2012-09-24T06:36:58.880
> 
> 标签：.net, sql-server

当我在 Web 表单中填写所有数据时，下面的存储过程**工作正常**，但如果我留下一些列，如 AwardName2、Authority2、AwardYear2 和 Remarks2（我在表中将此列称为 NULL），程序会抛出错误“无法将参数值从字符串转换为 Int 32" 。我必须在存储过程中进行哪些更改？请帮忙。

```
 ALTER PROCEDURE [dbo].[usp_RegPage2]  
     @Vendor_ID VARCHAR(16), @EmpDetailsDocPath VARCHAR(200), @EmpTotalNo INT,
     @EmpAbove5Years INT, @EmpEnggDesign INT, @EmpProContract INT, @QADocPath VARCHAR(200), 
     @QAStandard VARCHAR(50), @QADocument CHAR(3), @QAControl CHAR(3), @HSEDocPath VARCHAR(200),
     @HSEStandard VARCHAR(15), @HSEDocument CHAR(3), @HSEControlManual CHAR(3),
     @AuthorityDocPath VARCHAR(200), @AwardName1 VARCHAR(50), @Authority1 VARCHAR(50),  
     @AwardYear1 INT,@Remarks1 VARCHAR(70),@AwardName2 VARCHAR(50),
     @Authority2 VARCHAR(50), @AwardYear2 INT, @Remarks2 VARCHAR(70), @AwardName3 VARCHAR(50), 
     @Authority3 VARCHAR(50), @AwardYear3 INT, @Remarks3 VARCHAR(70),
     @AwardName4 VARCHAR(50), @Authority4 VARCHAR(50), @AwardYear4 INT, @Remarks4 VARCHAR(70),
     @BritishStandard CHAR(3), @AmericanStandard CHAR(3), @OtherStandard VARCHAR(50),      
     @REManpower CHAR(3), @RESubContract CHAR(3), @RELabourPath VARCHAR(200),
     @REEquipmentPath VARCHAR(200), @REShop CHAR(3), @REAssemblyyard CHAR(3), 
     @RESizeofShop INT,@REHouse CHAR(3),@REOutSource CHAR(3),@ProjectDocPath VARCHAR(200),      
     @CmpVision VARCHAR(200), @CmpFullRegDate DATE = NULL
     AS   SET @CmpFullRegDate  = COALESCE(@CmpFullRegDate,GETDATE());
     BEGIN   
   INSERT INTO dbo.RegPage2     
   (Vendor_ID,EmpDetailsDocPath,EmpTotalNo,EmpAbove5Years,EmpEnggDesign,EmpProContract,
    QADocPath,QAStandard,QADocument,QAControl,HSEDocPath,HSEStandard,HSEDocument,
    HSEControlManual,AuthorityDocPath,AwardName1,Authority1,AwardYear1,Remarks1,
    AwardName2,Authority2,AwardYear2,Remarks2,AwardName3,Authority3,AwardYear3,Remarks3,
    AwardName4,Authority4,AwardYear4,Remarks4,BritishStandard,AmericanStandard,      
    OtherStandard,REManpower,RESubContract,RELabourPath,REEquipmentPath,REShop,
    REAssemblyyard,RESizeofShop,REHouse,REOutSource,ProjectDocPath,CmpVision,CmpFullRegDate) 
    VALUES       
    (@Vendor_ID,@EmpDetailsDocPath,@EmpTotalNo,@EmpAbove5Years,@EmpEnggDesign,@EmpProContract,
     @QADocPath,@QAStandard,@QADocument,@QAControl,@HSEDocPath,@HSEStandard,@HSEDocument,
   @HSEControlManual,@AuthorityDocPath,@AwardName1,@Authority1,@AwardYear1,@Remarks1,@AwardName2,
   @Authority2,@AwardYear2,@Remarks2,@AwardName3,@Authority3,@AwardYear3,@Remarks3,
   @AwardName4,@Authority4,@AwardYear4,@Remarks4,@BritishStandard,@AmericanStandard,   
   @OtherStandard,@REManpower,@RESubContract,@RELabourPath,@REEquipmentPath,@REShop,
   @REAssemblyyard,@RESizeofShop,@REHouse,@REOutSource,@ProjectDocPath,
   @CmpVision,@CmpFullRegDate)    
   END 
```

C# 代码

```
 protected void BtnRegPage2Save_Click(object sender, EventArgs e)
      {
      SqlConnection SqlCon = new SqlConnection(GetConnectionString());
      SqlCommand cmd = new SqlCommand();
      cmd.CommandType = CommandType.StoredProcedure;
      cmd.CommandText = "usp_RegPage2";
      cmd.Parameters.Add("@Vendor_ID", SqlDbType.VarChar).Value = lblPage2ID.Text;
      cmd.Parameters.Add("@EmpDetailsDocPath", SqlDbType.VarChar).Value = AFU7.FileName;
      cmd.Parameters.Add("@EmpTotalNo", SqlDbType.Int).Value = txtTotalEmp.Text.Trim();
      cmd.Parameters.Add("@EmpAbove5Years", SqlDbType.Int).Value = txtstability.Text.Trim();
      cmd.Parameters.Add("@EmpEnggDesign", SqlDbType.Int).Value = txtEnggDesign.Text.Trim();
      cmd.Parameters.Add("@EmpProContract", SqlDbType.Int).Value = txtProContract.Text.Trim();
      cmd.Parameters.Add("@QADocPath", SqlDbType.VarChar).Value = AFU8.FileName;
      cmd.Parameters.Add("@QAStandard", SqlDbType.VarChar).Value = ddlQACertificate.Text.Trim();
      cmd.Parameters.Add("@QADocument", SqlDbType.Char).Value = ddlQSDocument.Text.Trim();
      cmd.Parameters.Add("@QAControl", SqlDbType.Char).Value = ddlQCManual.Text.Trim();
      cmd.Parameters.Add("@HSEStandard", SqlDbType.VarChar).Value = ddlHSECertificate.Text;
      cmd.Parameters.Add("@HSEDocument", SqlDbType.Char).Value = ddlHSEDocument.Text;
      cmd.Parameters.Add("@HSEControlManual", SqlDbType.Char).Value = ddlHSEManual.Text;
      cmd.Parameters.Add("@HSEDocPath", SqlDbType.VarChar).Value = AFU9.FileName;
      cmd.Parameters.Add("@AuthorityDocPath", SqlDbType.VarChar).Value = AFU3.FileName;
      cmd.Parameters.Add("@AwardName1", SqlDbType.VarChar).Value = txtAward1.Text.Trim();
      cmd.Parameters.Add("@Authority1", SqlDbType.VarChar).Value = txtAuthority1.Text.Trim();
      cmd.Parameters.Add("@AwardYear1", SqlDbType.Int).Value = txtYear1.Text.Trim();
      cmd.Parameters.Add("@Remarks1", SqlDbType.VarChar).Value = txtRemarks1.Text.Trim();
      cmd.Parameters.Add("@AwardName2", SqlDbType.VarChar).Value = txtAward2.Text.Trim();
      cmd.Parameters.Add("@Authority2", SqlDbType.VarChar).Value = txtAuthority2.Text.Trim();
      cmd.Parameters.Add("@AwardYear2", SqlDbType.Int).Value = txtYear2.Text.Trim();
      cmd.Parameters.Add("@Remarks2", SqlDbType.VarChar).Value = txtRemarks2.Text.Trim();
      cmd.Parameters.Add("@AwardName3", SqlDbType.VarChar).Value = txtAward3.Text.Trim();
      cmd.Parameters.Add("@Authority3", SqlDbType.VarChar).Value = txtAuthority3.Text.Trim();
      cmd.Parameters.Add("@AwardYear3", SqlDbType.Int).Value = txtYear3.Text.Trim();
      cmd.Parameters.Add("@Remarks3", SqlDbType.VarChar).Value = txtRemarks3.Text.Trim();
      cmd.Parameters.Add("@AwardName4", SqlDbType.VarChar).Value = txtAward4.Text.Trim();
      cmd.Parameters.Add("@Authority4", SqlDbType.VarChar).Value = txtAuthority4.Text.Trim();
      cmd.Parameters.Add("@AwardYear4", SqlDbType.Int).Value = txtYear4.Text.Trim();
      cmd.Parameters.Add("@Remarks4", SqlDbType.VarChar).Value = txtRemarks4.Text.Trim();
      cmd.Parameters.Add("@BritishStandard", SqlDbType.Char).Value = ddlBritishStd.Text.Trim();
      cmd.Parameters.Add("@AmericanStandard", SqlDbType.Char).Value = ddlAmericanStd.Text.Trim();
      cmd.Parameters.Add("@OtherStandard", SqlDbType.VarChar).Value = txtOthers.Text.Trim();
      cmd.Parameters.Add("@REManpower", SqlDbType.Char).Value = ddlOwnManpower.Text.Trim();
      cmd.Parameters.Add("@RESubContract", SqlDbType.Char).Value = ddlSubContract.Text.Trim();
      cmd.Parameters.Add("@RELabourPath", SqlDbType.VarChar).Value = AFU4.FileName;
      cmd.Parameters.Add("@REEquipmentPath", SqlDbType.Char).Value = AFU5.FileName;
      cmd.Parameters.Add("@REShop", SqlDbType.Char).Value = ddlAtShop.Text;
      cmd.Parameters.Add("@REAssemblyyard", SqlDbType.Char).Value = ddlAssembly.Text;
      cmd.Parameters.Add("@RESizeofShop", SqlDbType.Int).Value = txtAssemblysize.Text;
      cmd.Parameters.Add("@REHouse", SqlDbType.Char).Value = ddlInHouse.Text;
      cmd.Parameters.Add("@REOutSource", SqlDbType.Char).Value = ddlOutSourcing.Text;
      cmd.Parameters.Add("@ProjectDocPath", SqlDbType.VarChar).Value = AFU6.FileName;
      cmd.Parameters.Add("@CmpVision", SqlDbType.VarChar).Value = txtVision.Text.Trim();
      cmd.Connection = SqlCon;
      try
      {
         SqlCon.Open();
         cmd.ExecuteNonQuery();
      }
      catch (Exception ex)
      {
         throw new Exception(ex.Message);
      }
      finally
      {
         SqlCon.Close();
         SqlCon.Dispose();
      }
     } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T07:25:45.527

在表中使您的列为 NULL 并不意味着您的 PROC 会自动将 null 分配给与该列对应的参数

罪魁祸首可能是`@AwardYear`和其他`int`参数。您需要从代码中传递 DBNull

```
if(String.IsNullOrEmpty(AwardYear))
   command.Parameters.AddWithValue("@AwardYear", DBNull.Value);
else
   command.Parameters.AddWithValue("@AwardYear", Convert.ToInt32(AwardYear)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-24T07:15:37.017

只需交叉检查您在 proc 中传递的所有数据类型是否与表中列的数据类型相同。因为我猜您表中的某些列是 int 并且对于它们，您在 sproc 中传递了 varchar 参数。

# java - 阿帕奇骆驼 | FTP | 仅使用单个文件

> ID：12559983
> 
> 赞同：2
> 
> 时间：2012-09-24T06:37:00.467
> 
> 标签：java, ftp, apache-camel

我正在尝试读取 ftp 目录中的所有文本文件，并对其进行解析。如果解析成功，则将它们移动到不同的目录（不是默认目录，即 .done 目录），如果解析失败，则文件应保留在 ftp 目录中。这个概念看起来很简单，但是我的路由只从 ftp 读取一个文件，并且路由在获取一个文件后自行结束。

以下是代码：

```
@Override
    public void configure() throws Exception {

         from(EndPointConstants.DIRECT + GetDriverProductInfo.class.getSimpleName())  
        .pollEnrich(ftp://ingestion_user@10.207.6.42/fantics?password=******&recursive=true)
        .to("file://test/readFile") 
```

是否与 pollEnrich 相关，它只能获取单个文件并且该过程不会递归地发生？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T07:06:08.040

> 如果解析成功，则将它们移动到不同的目录（不是默认目录，即 .done 目录）

使用类似这个例子的东西：

```
.to("file://test/readFile?autoCreate=true&moveFailed=.failed/${date:now:yyyyMMdd}/${file:name}&move=.processed/${date:now:dd-MM-yyyy}/${file:name}") 
```

从骆驼文档（[FTP/SFTP/FTPS 组件](http://camel.apache.org/ftp2.html)）：

> 默认情况下，FTP 使用者将在远程 FTP 服务器上保留已使用的文件不变。如果您希望它删除文件或将它们移动到另一个位置，则必须明确配置它。例如，您可以使用 delete=true 删除文件，或使用 move=.done 将文件移动到隐藏的 done 子目录中。常规文件使用者不同，因为它默认将文件移动到 .camel 子目录。Camel 默认不为 FTP 使用者执行此操作的原因是，默认情况下它可能缺少移动或删除文件的权限。

所以你可以使用例如：

```
&noop=false

&move

&delete=false 
```

**编辑：**

我认为你应该想出这样的东西（下面的代码），因为 pollEnrich() 不适合这种情况。

（强烈建议不要使用以下代码，而不是使用示例）

```
from("direct:scan")
    .process(new Processor()
    {
        public void process(Exchange exchange) throws Exception
        {
            ConsumerTemplate consumerTemplate = exchange.getContext().createConsumerTemplate();
            ProducerTemplate producerTemplate = exchange.getContext().createProducerTemplate();
            producerTemplate.setDefaultEndpointUri("file:..");
            producerTemplate.send(consumerTemplate.receive("ftp:.."));
        }
    }); 
```

干杯!

# sql - ANSI SQL 语句出错

> ID：12559994
> 
> 赞同：1
> 
> 时间：2012-09-24T06:37:50.853
> 
> 标签：sql, ms-access, ansi-sql

```
select t2.s_studentreference
        , t1.p_surname
        , t1.p_forenames
        , t3.e_reference
        , t3.e_name
    from capd_a t1
    right outer join capd_b t2
      on (t2.s_id = t1.p_id)
    join capd_c t3 
      on ((t3.e_student=t1.p_id) and (t3.e_reference='D /YR2A2/12')) 
```

我收到此错误：

```
Syntax Error (Missing Operator) on (t2.s_id = t1.p_id)
        join capd_c t3 
          on ((t3.e_student=t1.p_id) and (t3.e_reference='D /YR2A2/12')) 
```

知道我的查询有什么问题吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T06:53:39.450

Access 有一个变态版本的 SQL，而不是 ISO/ANSI 标准。当连接两个以上的表时，它真的很喜欢（阅读：需要）括号。对于括号内允许的连接类型（LEFT、RIGHT、INNER）也有限制：

```
from 
   (                           --- required
     capd_a t1 
INNER join capd_b t2           --- RIGHT join turned into INNER
  on (t2.s_id = t1.p_id)
   )                           --- required
INNER join capd_c t3 
  on ((t3.e_student=t1.p_id) and (t3.e_reference='D /YR2A2/12')) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T08:13:16.273

尝试在 Access 查询设计器中构建您的查询。来自不同的数据库系统，您可能不太喜欢查询设计器，但我建议您尝试一下，因为它将帮助您创建 Access 数据库引擎可以接受的 SQL。

您面临的差异包括：

1.  当您的查询包含超过 2 个数据源并且对它们的位置要求很高时，Access 需要括号。
2.  db 引擎不将 JOIN 识别为`INNER JOIN`. 您必须始终指定连接类型 ( `INNER`; `LEFT`; 或`RIGHT`)。
3.  引擎会接受`RIGHT OUTER JOIN`，但查询设计器会将其更改为 just `RIGHT JOIN`。所以它并没有真正的区别，但我提到它只是为了避免混淆。

如果您不能容忍查询设计器，我将提供此作为起点。

```
select t2.s_studentreference
        , t1.p_surname
        , t1.p_forenames
        , t3.e_reference
        , t3.e_name
    from (capd_a t1
    inner join capd_b t2
      on t2.s_id = t1.p_id)
    inner join capd_c t3 
      on t3.e_student=t1.p_id
where t3.e_reference='D /YR2A2/12' 
```

我两次都使用内部联接，因为在某些情况下，Access 会在同一个查询中加入`LEFT`或`RIGHT`加入并加入。`INNER`我不确定`RIGHT`在这种情况下您的加入是否会成为问题，但两者`INNER`都肯定会起作用。因此，首先让所有其余的查询语法正常工作，然后根据需要修改您的连接类型。

我`t3.e_reference='D /YR2A2/12'`从`ON`to`WHERE`子句移到了。这是我的偏好，但我认为这两种方式都不会产生影响。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T06:42:12.227

由于您的查询包含`t3.e_reference='D /YR22/A12'`在`ON`语句范围内，应将其排除在`ON`语句范围之外，并将其单独写入`ON`语句范围之外......

你可以这样做；

```
select t2.s_studentreference
        , t1.p_surname
        , t1.p_forenames
        , t3.e_reference
        , t3.e_name
    from capd_a t1
    right outer join capd_b t2
      on (t2.s_id = t1.p_id)
    join capd_c t3 
      on (t3.e_student=t1.p_id)
 and (t3.e_reference='D /YR2A2/12') 
```

或者，您可以`WHERE`在查询中使用 use 子句：

```
 SELECT t2.s_studentreference
            , t1.p_surname
            , t1.p_forenames
            , t3.e_reference
            , t3.e_name
        FROM capd_a t1
        RIGHT OUTER JOIN capd_b t2
          ON (t2.s_id = t1.p_id)
        JOIN capd_c t3 
          ON (t3.e_student = t1.p_id)
     WHERE t3.e_reference='D /YR2A2/12' 
```