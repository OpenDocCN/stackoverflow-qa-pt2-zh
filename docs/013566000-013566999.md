# StackOverflow 问答 13566000-13566999

# javascript - 从 IE8 中的窗口对象访问变量不起作用

> ID：13566001
> 
> 赞同：4
> 
> 时间：2012-11-26T13:38:51.507
> 
> 标签：javascript, internet-explorer

我有以下脚本：

```
xxx = 12232;
for (var j in window) { 
    if (j==='xxx') alert('hey');
} 
```

如果我在 Chrome 或 Firefox 中执行，我会收到警告对话框打印“嘿”。

如果我在 IE8 中执行，我不会。

显然，这是一段代码，以证明我无法在 IE8 中从窗口访问变量。

有人可以解释为什么会这样吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T13:48:53.700

该片段显示的不是您无法访问 IE8 中的[隐](http://blog.niftysnippets.org/2008/03/horror-of-implicit-globals.html)式全局，而是表明 IE8 中的隐式全局不是[enumerable](http://ecma-international.org/ecma-262/5.1/#sec-12.6.4)，这是完全不同的事情。

您仍然可以正常访问它：

```
display("Creating implicit global");
xxx = 12232;
display("Enumerating window properties");
for (var j in window) { 
  if (j==='xxx') {
    display("Found the global");
  }
}
display("Done enumerating window properties");
display("Does the global exist? " + ("xxx" in window));
display("The global's value is " + xxx);
display("Also available via <code>window.xxx</code>: " +
        window.xxx);

function display(msg) {
  var p = document.createElement('p');
  p.innerHTML = String(msg);
  document.body.appendChild(p);
} 
```

[实时复制](http://jsbin.com/eyubej/1)| [来源](http://jsbin.com/eyubej/1/edit)

对我来说，在 IE8 上，输出：

```
创建隐式全局
枚举窗口属性
完成枚举窗口属性
全局存在吗？真的
全局值为 12232
也可通过 window.xxx 获得：12232
```

在 Chrome 上，全局是可枚举的：

```
创建隐式全局
枚举窗口属性
找到了全球
完成枚举窗口属性
全局存在吗？真的
全局值为 12232
也可通过 window.xxx 获得：12232
```

隐式全局变量是一个**坏主意^(TM)**。强烈建议不要使用它们。如果您**必须**创建一个全局变量（而您几乎从不这样做），请明确执行：

*   具有`var`全局范围（在 IE8 上，它似乎也创建了一个不可枚举的属性）

*   或者通过分配给`window.globalname`（在 IE8 上，它创建一个可枚举的属性）

我已将这些结果（对我来说有点奇怪）添加到我的[JavaScript 全局变量](https://stackoverflow.com/a/4862268/157247)答案中，该答案讨论了不同类型的全局变量，因为我没有触及那里的可枚举性。

# php - 如我所料，带有 continue 的 php if 语句以相反的方式工作

> ID：13566009
> 
> 赞同：0
> 
> 时间：2012-11-26T13:39:13.683
> 
> 标签：php, continue

所以我有时间戳：

1.  开始：1353441600 截止：1353736800（开始 < 截止）
2.  开始：1353790800 截止：1353736800（开始>截止）

我有php声明：

```
if ($eventStarted < $todaysCutoff) continue; 
```

我希望这个语句显示 1，但它显示 2。这是正确的，我不明白吗？现在对我来说就像休息一样。

```
<?php
if (tribe_is_day()) {
        $eventStarted = strtotime(tribe_get_start_date(null, false, 'Y-m-d H:i:s'));
        $eventEnded = strtotime(tribe_get_end_date(null, false, 'Y-m-d H:i:s'));
        $todaysCutoff = strtotime($current_url_date . ' 06:00:00');

            echo ' Start: ' . $eventStarted . ' Cutoff: ' . $todaysCutoff . ' End: ' . $eventEnded;

        if ($eventStarted < $todaysCutoff) continue;
} ?> 
```

我真笨 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:40:43.873

`continue`关键字在 for 或 while 等循环内使用。您的代码不包含循环，或者您“做错了（TM）”。:)

[http://php.net/manual/en/control-structures.continue.php](http://php.net/manual/en/control-structures.continue.php)

# c# - 在 asp.net mvc 项目中使用 jquery(append()) 添加块

> ID：13566013
> 
> 赞同：1
> 
> 时间：2012-11-26T13:39:35.417
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3

我在使用 jquery 在我的 asp.net mvc 项目中添加具有特定属性的块时遇到了麻烦。我需要根据下拉列表中的内容（通过 c# 创建）将块添加到页面中 我在视图中创建了一个隐藏块（查看下面的代码），它使用“列表”中的选项制作“选择”标签

```
<div id="other" class="EqItem">
   <p>Else: @Html.DropDownList("else", Model.ModEq("",""))</p>
   <p>Serial №: @Html.TextBox("serialelse")</p>
</div> 
```

加载页面后，我使用一个函数从 DOM 中删除这个块，并将这个块的 html 代码复制到一个变量中（blockToAdd）

```
function BlockDelete()
{
    blockToAdd = $("#other").html();
    $("#other").remove();
} 
```

然后我使用这个变量动态地将块添加到我的页面中（下面的函数）

```
function ShowListEtc()
{
  for (c = 0; c < 15; c++)
  {
     if (!$("#divotherlist" + c + "").length) {
       id = "divotherlist" + c + "";
       clas = "EqItem";
       blockToAdd = blockToAdd.trim();
       $(".rightside").append('<div id="' + id + '">' + blockToAdd 
            + '<p><img id ="' + id + 'D"src="/Images/delete.png" 
            onclick="Delete(id)"></p></div>');
       $("#" + id).attr('class', clas);
       $("#"+id).show();
       selectid = "othersel" + c;
       $("#" + id).find("select").attr('id', selectid);
       $('#' + selectid + ' option').each(function () { 
          this.setAttribute('id', TransL(this.text) + c); 
          this.setAttribute('onclick', 'MakeNameParent(id)') 
       });
       break;
    }
  }
} 
```

关键是我尝试在创建的块中更改属性（附加（'）但它们没有应用！当我第一次编写代码时，它工作了，但突然停止工作，然后我尝试使用 .prepend 代替的.append，它开始工作了一段时间，但重新打开项目后，它又停止工作了！请告诉我我做错了什么！谢谢！

# objective-c - UISwitch 在 UIScrollView 中没有响应

> ID：13566014
> 
> 赞同：4
> 
> 时间：2012-11-26T13:39:36.460
> 
> 标签：objective-c, ios, cocoa-touch

我遇到了奇怪的错误，不知道为什么会这样。

我有 UIScrollView，其中有 12 个视图。其中大多数包含 UISwitch 按钮和标签。视图的大小是动态的（取决于 label.text 的长度）。一切正常并显示，除了底部的两个视图。它们确实显示出来，按预期初始化。然而，它们中的 UISwitches 不起作用，单击或触摸它们没有任何作用。他们俩都不例外（都是复制粘贴）。我已经仔细检查了 IBOutlets，它们很好。我怀疑 scrollView 有问题。也许超过某个点它不再接收输入？尽管我可以上下滚动并且一切都按预期显示。

有什么想法要检查吗？

我已经将这两个视图与第一个视图进行了切换。并且更多的底部视图变得无响应，就像有一条线，超过它的 ui 没有响应。想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T14:35:50.620

您说开关在一个视图中（12 个之一）并且该视图在滚动视图上，
也许 UISwitch 超出了视图范围？尝试设置该视图`.clipsToBounds = YES;`，您还能看到开关吗？如果否，则意味着开关超出范围，因此您没有触摸事件。放大该视图以解决该问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:07:40.127

1.  检查正确。如果启用了 UISwitch 和 UIscrollview 用户交互。
2.  检查是否在 UIscrollview 的框架内添加了 UISwitch。

# google-maps - Google 或 Bing 地图 API - 创建和使用您自己的地图

> ID：13566016
> 
> 赞同：0
> 
> 时间：2012-11-26T13:39:43.443
> 
> 标签：google-maps, bing-maps

我需要的是以下内容。

每当我在我的网站中添加任何对象实例时，我都需要服务器在 Google 地图或 Bing 地图中将对象的位置添加到我自己的地图中（Bing 地图文档更清晰，因此我将使用 Bing）。

以后，每当我在我的站点中查看对象时，地图应该指向对象的位置以及同一张地图中的其他地图对象。

如何做到这一点？我是否需要将所有坐标和对象描述保存在我的服务器中，或者以某种方式保存在 google 或 bing 中。

我浏览了文档，但找不到我需要的任何信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:11:17.753

您需要将它们存储在您的服务器上并将它们加载到您网页上的地图中。google（融合表）和 bing（空间数据服务）都可以通过提供者存储它们，但是如果您已经为您的网站存储了一个副本，那么最好将它们保留在地图上而不是保留两个副本。

我不确定你的技术水平，但最好的架构方法是这样的：

1) 编写一个数据库查询，查找要在地图上显示的对象，理想情况下，通过用户可以用来过滤站点其他地方的对象的任何内容进行过滤。按地理边界框（可以在地图上任意一点看到的纬度和经度范围）向此查询添加过滤器。边界框过滤器只是一个简单的 sql BETWEEN 子句，但意味着您不必将每个对象都加载到地图上。

2) 编写一个“webservice”，使用 1) 中的数据库查询并将结果转换为 JSON。这种方法将导致 javascript 中的映射代码和 web 服务中的服务器端代码之间更清晰的分离。

3) 使用 javascript 在 Bing 中编写您的映射前端，并使用 Jquery 之类的东西从 web 服务中读取数据，因为地图移动时重新加载知道应该显示在新地图视图上的数据。由于数据将采用 JSON 格式，因此更容易，因为 JSON 只会为您提供对象的 javascript 版本

# css - 当您显示谷歌地图时，Chrome 会隐藏 iframe 滚动条

> ID：13566022
> 
> 赞同：0
> 
> 时间：2012-11-26T13:40:00.533
> 
> 标签：css, google-maps, google-chrome, iframe, scrollbar

我想在带有滚动条的 IFrame 中显示谷歌地图。

```
<!DOCTYPE HTML>
<html>
<head>
    <title></title>
</head>
<body>
    A website
    <br />
    <iframe src="http://parkall.hu/teszt/parkolok/index.html" 
     style="overflow: scroll; width: 540px; height: 630px;"></iframe>
</body>
</html> 
```

它适用于最新的 Firefox (v17)，但不适用于 Chrome (v23)，奇怪的是，Chrome 会显示滚动条片刻，然后隐藏。如果您发现要抓住不可见的东西，滚动条仍然可用....

你有没有注意到这一点？也许它可以用 CSS 解决，但我无法找到，HTML5 不支持 scrolling="yes" 属性。当然，如果我将 scr 更改为 wikipedia.org，它会显示滚动条。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:52:12.103

谷歌地图很有可能会尝试使用 javascript 从其 iframe 中禁用滚动条。在这种情况下，您将需要一些自己的 javascript 来应对页面加载后几秒钟的问题（通过使用 setTimeout()）。

您需要在 setTimeout 中更改的内容取决于隐藏滚动条的情况。由于示例不完整，我无法确定究竟发生了什么。

请将您的代码放入 jsfiddle.net 并回复链接，以便我们检查确切的问题。

# qt - Qt 中具有不同客户端的服务器

> ID：13566026
> 
> 赞同：1
> 
> 时间：2012-11-26T13:40:07.803
> 
> 标签：qt

我需要创建一个应用程序：

*   拥有一台服务器

*   使用连接到服务器并发送 8 个长数据的客户端（来自 8 个传感器的数据：雨、空气湿度、风速......） 1 个传感器数据/长数据（传感器数据从自定义 USB 设备获取）

*   用户客户端。最终用户运行这种类型的客户端以连接到服务器以从传感器检索数据。

我以前用过 Qt，只用一种类型的客户端创建客户端-服务器应用程序。我也设法创建了这个应用程序，只是规模较小（使用了 5 个字，并且客户端同时连接到服务器）。我使用了 Qt 网络示例财富线程服务器和 [http://goo.gl/srypT](http://goo.gl/srypT)和阻塞财富客户端示例。

我如何识别哪个客户是哪个？（因为他们每次连接到互联网时都有不同的 ip）。在我的小规模应用程序中，我创建了某种协议，但必须有更有效的方法来做到这一点。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:18:45.913

我假设您想要识别客户端**类型**（“传感器客户端”与“用户客户端”），而不是单个客户端实例。

如问题中所述，执行此操作的直接方法是实现协议。对于您的用例，这可能非常简单：

*   让“传感器客户端”发送一个“写入”命令（像“w”这样的字符就足够了），然后是您的传感器数据。然后服务器接收到“w”命令并知道他需要从客户端读取传感器数据。
*   让“用户客户端”发送一个“读取”命令（例如字符“r”）。当服务器收到“r”命令时，它知道它需要向客户端发送数据。

如果出于某种原因，您甚至不想实现这样一个简单的协议，您还可以设置两个单独的 QTcpServer 实例，它们在不同的端口上侦听，比如说 8192 和 8193。然后您的“传感器客户端”将连接到端口 8192 ，并且服务器通过端口号知道客户端将发送数据。您的“用户客户端”将连接到端口 8193，并且服务器知道客户端需要数据并将发送所需的数据。

在任何情况下，您都应该知道不涉及身份验证和授权，任何知道简单协议和/或端口号的客户端都可以发送和接收数据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:20:47.387

要识别客户，您必须使用某种客户 ID。通常，某种散列（MD5 摘要、UUID 或 GUID）用作客户端 ID。当客户端连接到服务器时，这个客户端 ID 必须从客户端发送到服务器。

客户端被识别和接受后会发生什么，取决于连接的类型（协议）。如果您使用有状态协议，只要客户端使用它，相同的连接就会保持打开状态，因此无需重新识别客户端。如果使用无状态连接（例如 HTTP），每次客户端需要数据（即：文档、页面等）到服务器。

处理这样的客户端/服务器架构的一种更简单、更有效的方法是使用现有的、经过验证的某种服务器。例如，您可以使用 Wt (http://www.webtoolkit.eu/wt/blog) 之类的 RESTful Web 服务器，前提是您已经在使用 C++。

更好的是，我会使用基于 Ruby 或 Python 的 RESTful Web 服务框架，例如：

[http://www.sinatrarb.com/](http://www.sinatrarb.com/)

[http://bottlepy.org/docs/dev/](http://bottlepy.org/docs/dev/)

[http://flask.pocoo.org/](http://flask.pocoo.org/)

或者新的 Ruby-on-Rails API：

[http://blog.steveklabnik.com/posts/2012-11-22-introducing-the-rails-api-project](http://blog.steveklabnik.com/posts/2012-11-22-introducing-the-rails-api-project)

[https://github.com/rails-api/rails-api](https://github.com/rails-api/rails-api)

用 Ruby 或 Python 开发服务器更快、更容易。客户端可以以任何方式开发（使用 Qt 的 C++、Web 浏览器中的 Javascript 和许多其他方式）

# java - java.lang.NoClassDefFoundError：org/apache/jsp/_xxx 错误名称：com/ibm/_jsp/_xxx

> ID：13566029
> 
> 赞同：1
> 
> 时间：2012-11-26T13:40:10.287
> 
> 标签：java, jsp, jakarta-ee, websphere-7

我有一个我无法弄清楚的问题。

## 语境 ：

*   是 7.0.0.19 版本（没有 preCompileJsp）

> 原因：java.lang.ClassLoader.defineClassImpl(Native Method) at java.lang.ClassLoader.defineClass(ClassLoader) 的 java.lang.NoClassDefFoundError: org/apache/jsp/_xxx (错误名称：com/ibm/_jsp/_xxx) .java:275) 在 java.lang.ClassLoader.defineClass(ClassLoader.java:212) 在 com.ibm.ws.jsp.webcontainerext.JSPExtensionClassLoader.defClass(JSPExtensionClassLoader.java:181) 在 com.ibm.ws.jsp。 webcontainerext.JSPExtensionClassLoader._loadClass(JSPExtensionClassLoader.java:133)

它是唯一出现问题的 JSP，并且仅在特定环境中（在具有相同配置的其他环境中没有问题）xxx.class 很好地存在于我的 profile/tmp 目录中，而其他 jsp 在同一目录中（都给出没问题）并且文件系统未满。

## 测试

1.  我在同一个目录下复制了 xxx.jsp 到 xxxNew.jsp
2.  我可以毫无问题地访问xxxNew.jsp（所以没有编码问题）
3.  所以我做了一个从 xxx.jsp 到 xxx1.jsp 的 mv 并且访问新命名的 jsp 没有问题
4.  我删除了tmp目录下的xxx.class
5.  我将 mv 返回到第一个名称（xxx.jsp），但仍然在 tmp 目录中使用新的 xxx.class 得到错误。

websphere 中是否有可以解释这一点的类缓存？（在 war 模块中找不到 dynacache 的 cachespec.xml）。

为什么 Websphere 尝试从 org.apache.jsp 包而不是 com.ibm._jsp 中查找类？（AS 如何选择从 URL 到类的映射？）

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T12:34:07.347

是否选择了 Websphere JRE？

在 Eclipse 中：

右键单击您的项目属性-> Jave 构建路径-> 选择库选项卡。如果未选择 Websphere JRE 条目。选择 JRE System Libary 条目并单击编辑，然后选择 Wepshere JRE..

这解决了我的类似问题。希望这会有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-04T14:51:59.963

通过重新部署（抑制和部署）应用程序解决了这个问题。

# magento - Magento 获得选择的运输和计费方式地址字段

> ID：13566033
> 
> 赞同：7
> 
> 时间：2012-11-26T13:40:23.570
> 
> 标签：magento, checkout

如何在结帐时获取所选的运输和计费字段？（我想在侧边栏中显示它们）

我在 shipping.phtml 中使用它，但当然这仅适用于当前的“地址”（我想在 methods.phtml 和其他页面中使用它）

```
$this->getAddress()->getFirstname() 
```

所以我认为这会成功......

```
Mage::getSingleton('checkout/session')->getShippingAddress()->getFirstname() 
```

但它没有，有人有小费吗？

补充：这个对我帮助很大，但我卡住了：-S [我如何获得用户在结帐时选择的运输方式？](https://stackoverflow.com/questions/6032936/how-do-i-get-the-shipping-method-the-user-has-chosen-during-checkout)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T13:53:17.583

送货地址和帐单地址是报价对象的子代。所以这样的事情应该有效：

```
Mage::getSingleton('checkout/session')->getQuote()->getShippingAddress()->getFirstname(); 
```

# c# - 当我可以在 C# 中使用浮点数或双精度时，为什么还要使用整数？

> ID：13566038
> 
> 赞同：0
> 
> 时间：2012-11-26T13:40:49.330
> 
> 标签：c#, integer

目前刚学C#。

我不明白为什么有人可以使用浮点数或双精度数时会使用整数..

浮点数将添加/减去整数和十进制数，那么为什么有人会打扰使用普通的旧整数呢？

似乎 floats 或 double 会处理 Integer 可以处理的任何事情。数也..

谢谢！

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T13:45:48.767

主要原因与我们经常喜欢使用整数分数而不是固定精度小数的原因相同。对于有理分数，(1/3) 乘以 3 始终为 1。(1/3) 加 (2/3) 始终为 1。(1/3) 乘以 2 为 (2/3)。

为什么？因为整数分数是精确的，就像整数是精确的一样。

但是对于固定精度的实数——它就不那么漂亮了。如果 (1/3) 是`.33333`，那么 3 次 (1/3) 将不是 1。如果 (2/3) 是`.66666`，那么 (1/3)+(2/3) 将不是一。但是如果 (2/3) 是`.66667`，那么 (1/3) 乘以 2 将不是 (2/3) 并且 1 减去 (1/3) 将不是 (2/3)。

而且，当然，您无法通过使用更多位置来解决此问题。没有小数位数可以让您准确表示 (1/3)。

浮点是一种固定精度的实数格式，很像我上面的固定精度小数。它并不总是遵循您可能期望的幼稚规则。请参阅经典论文[What Every Computer Scientist Should Know About Floating-Point Arithmetic](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)。

为了回答您的问题，首先近似地，您应该尽可能使用整数，并且仅在必须时使用浮点数。而且您应该始终记住浮点数的精度有限，比较两个浮点数以查看它们是否相等可能会产生您可能意想不到的结果。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:58:06.933

这里给出的大多数答案都直接涉及数学概念。使用整数有纯粹的计算原因。几个跳到脑海：

1.  循环计数器，是的，我知道你可以在 for 循环中使用小数/双精度，但你真的需要那种复杂程度吗？
2.  内部枚举值
3.  数组索引

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T13:42:31.777

正如你在[这里](http://msdn.microsoft.com/en-us/library/ms228360%28v=vs.80%29.aspx)看到的，不同的类型都有自己的大小。

例如，在使用大型数据库时，`int`或`float`可能会加倍所需的大小。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T13:42:46.050

您有不同的数据类型，因为它们使用不同数量的位来存储数据。

通常，整数比双精度型使用更少的内存，这就是为什么不只使用最大可能的数据类型的原因。

[http://en.wikipedia.org/wiki/Data_type](http://en.wikipedia.org/wiki/Data_type)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T13:56:01.900

使用整数的主要原因是内存消耗和性能。

1.  在大多数情况下，双精度数存储在 64b 内存块中（与 int 的 32b 相比）并使用有点复杂的表示标准（在某些情况下是实际值的近似值）
2.  需要计算螳螂和指数的复杂表示。
3.  在大多数情况下，它需要使用专用的协处理器进行浮点运算
4.  对于整数，可以使用补码和移位来加速算术运算。
5.  许多用例更适合（自然）使用整数，例如索引数组、循环、提醒除法、计数等。

此外，如果您需要使用表示实数的类型来完成所有这些操作，您的代码将更容易出错。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T13:42:35.877

有几个原因。性能、内存，甚至不希望看到小数（无需使用格式字符串）。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T13:45:48.907

[浮点数](http://en.wikipedia.org/wiki/Floating_point)：

> 在计算中，浮点描述了一种表示**近似实数**的方法，该方法可以支持广泛的值。通常，数字大致表示为固定数量的有效数字，并使用指数进行缩放。

[整数](http://en.wikipedia.org/wiki/Integer_%28computer_science%29)：

> 在计算机科学中，整数**是**整数数据类型的数据，表示数学整数的某个有限子集的数据类型。

因此，精度是一个论据。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-11-26T13:50:11.550

有几个原因。首先，就像人们已经说过的那样，double 存储 64 位数值，而 int 只需要 32 位。

浮动是另一种情况。int 和 float 都存储 32 位数字，但 float 不太精确。浮点值最多可精确到 7 位，但除此之外它只是一个近似值。如果您有较大的数字，或者在某些情况下您有意只强制使用没有小数的整数值，则 int 是要走的路。如果您不关心精度损失并希望允许更大范围的值，则可以使用 float 代替。

# javascript - 如何在 SVG 中沿整个 textPath 扩展文本

> ID：13566042
> 
> 赞同：2
> 
> 时间：2012-11-26T13:41:00.030
> 
> 标签：javascript, svg

如何使路径上的文本（[见屏幕截图](http://yadi.sk/d/Hcn85Jxh0unbg)）扩展，使其跟随整个 textPath？

我尝试使用[`method`属性](http://www.w3.org/TR/SVG11/text.html#TextPathElementMethodAttribute)值`stretch`，但它不像我预期的那样工作 - 它不会沿路径拉伸文本。

有没有办法让它在所有浏览器中都能正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T14:54:55.540

在整个 textPath 上展开文本的方法是使用`textLength`属性。另请参阅[this other question](https://stackoverflow.com/questions/6800478/svg-textpath-determine-when-text-goes-beyond-the-path)，了解如何计算`textLength`. 这是如何做到的：

```
<svg viewBox="0 0 500 300" version="1.1">
     <defs>
         <path id="s3" d="M 10,90 Q 100,15 200,70" />
     </defs>
     <text font-size="20">
         <textPath xlink:href="#s3" textLength="205">
           Short text
         </textPath>
     </text>
     <use xlink:href="#s3" fill="none" stroke="black" stroke-width="1"/>
 </svg> 
```

可视示例：http: [//jsfiddle.net/zkZ2n/](http://jsfiddle.net/zkZ2n/)

![在此处输入图像描述](../Images/290475393bf9718c14fe259b7e0a0e64.png)

这是 Firefox 不支持的错误报告`textLength`：[https ://bugzilla.mozilla.org/show_bug.cgi?id=569722](https://bugzilla.mozilla.org/show_bug.cgi?id=569722)

# python - 在 re.sub 中使用带有变量的“r”

> ID：13566052
> 
> 赞同：4
> 
> 时间：2012-11-26T13:41:24.647
> 
> 标签：python, regex

我需要这样做：

```
text = re.sub(r'\]\n', r']', text) 
```

但是使用`find`and`replace`作为变量：

```
find = '\]\n'
replace = ']'
text = re.sub(find, replace, text) 
```

我应该把`r`（生的）放在哪里？它不是一个字符串。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T13:42:42.163

`r''`是[字符串文字语法](http://docs.python.org/2/reference/lexical_analysis.html#string-literals)的一部分：

```
find = r'\]\n'
replace = r']'
text = re.sub(find, replace, text) 
```

语法绝不是特定于`re`模块的。但是，指定正则表达式是原始字符串的主要用例之一。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T13:46:53.683

简短的回答：你应该把它`r`和字符串放在一起。

`r`前缀是字符串语法的一部分。使用`r`，Python 不会解释引号内的反斜杠序列，例如`\n`,等。`\t`如果没有`r`，您必须键入每个反斜杠两次才能将其传递给`re.sub`.

```
r'\]\n' 
```

和

```
'\\]\\n' 
```

是写相同字符串的两种方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T13:43:40.560

保持`r'...'`

```
find = r'\]\n'
replace = r']'
text = re.sub(find, replace, text) 
```

或与

```
find = '\\]\\n'
replace = ']'
text = re.sub(find, replace, text) 
```

# jquery - jQuery 重构

> ID：13566061
> 
> 赞同：0
> 
> 时间：2012-11-26T13:41:45.157
> 
> 标签：jquery, html, tabs, refactoring

我经常花 10 到 20 分钟查看 jQuery 片段，以找到缩短代码的方法。

现在这段代码我一直在看一遍又一遍，但只是想知道人们将如何重构它，或者他们是否真的会重构它。

```
$("#tabs ul li").first().addClass("activeTab");
$("#tabs div").hide().first().show();
$("#tabs ul li a").click(function(){
    $("#tabs div").hide();
    $("#tabs").find($(this).attr('href')).show();
}); 
```

当我试图提高我在 jQuery 中的编码技能时，这更像是一个好奇的问题，而不是寻求帮助的呼声。

/* 编辑

链接附加[的jsFiddle](http://jsfiddle.net/pCLsG/)

您所有精彩建议的最终结果是。

```
var $c = $("#tabs"), $t = $c.find("li"), $d = $c.find("div");
$d.not(":first").hide();
$t.find("a").click(function() {
    $d.hide().filter($(this).attr('href')).show();
}).closest("li").first().addClass("activeTab"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T13:51:04.223

我将重构如下。不需要每次都创建 jQuery 对象，引用它以备将来使用。

```
 var $tabs = $("#tabs");

    $tabs.find("li:first").addClass("activeTab");
    $tabs.find('div').not(':first').hide();
    $tabs.find("a").click(function() {
        $("#tabs div").hide().filter($(this).attr('href')).show();
    }) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T13:53:09.343

我会重构选择器，因此遍历 Dom 的成本会更低。它会是这样的：

```
var $tabsControl = $("#tabs"),
    $tabs = $tabsControl.find("ul > li"),
    $tabsContent = $tabsControl.find("div");

$tabs.first().addClass("activeTab");
$tabsContent.hide().first().show();
$tabs.find("a").click(function() {
    $tabsContent.hide();
    $tabsControl.find($(this).attr("href")).show();
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:50:33.803

我个人认为这段代码还可以，但会进行重构`$("#tabs div").hide().first().show();`以使其更具可读性，也许是：

```
$("#tabs div").not(":first").hide(); 
```

# android - phonegap 媒体声音在 5 次后停止播放

> ID：13566064
> 
> 赞同：8
> 
> 时间：2012-11-26T13:42:12.757
> 
> 标签：android, jquery, cordova, jquery-mobile, media-player

如果用户正确回答问题，我需要播放“正确”的声音，如果不正确，我需要播放“错误”的声音。声音开始播放，但在第五次我回答正确之后，第四次输出“正确”的声音已经第五次了，听不到声音。音乐似乎最多只能播放 4 次。造成这种情况的可能原因是什么？

**更新*** 我在我的 stopAudio() 中添加了 media.release，但到目前为止可以听到第 6 次（改进）的声音，但它仍然不适合我的情况。（很多问题需要同样的音效）

js.文件

```
// Audio player
    var my_media = null;
    var mediaTimer = null;

    // Play audio
    function playAudio(src) {
        // Create Media object from src
        my_media = new Media(src, null, soundCB);
        my_media.play();
    }

    function soundCB(err){
        console.log("playAudio():Audio Error: "+err);
    }

    // Stop audio
    // 
    function stopAudio() {
        if (my_media) {
            alert("AQA");
            my_media.stop();
            my_media.release();
        }
        clearInterval(mediaTimer);
        mediaTimer = null;
    } 
```

/////问题部分//////

```
$("#answer").live('tap', function(event){   

if(buttonAns==true) {
    $this= $(this);     
    buttonAns = false;   
var choice = $this.attr("class");   
if((correctAnsNo == 0 && choice =="answer0")||(correctAnsNo == 1 && choice =="answer1")||(correctAnsNo == 2 && choice =="answer2")){

        playAudio('/android_asset/www/audio/fall.mp3'); //falling sound     
        correct = parseInt(correct)+2;  

        playAudio('/android_asset/www/audio/correct.mp3'); //dingdong
    }else{          
        playAudio('/android_asset/www/audio/wrong1.wav');           
    }
    if(quesNo < wordsNo ){ 
        setTimeout(function() {    
            buttonAns = true;                       
            db.transaction(queryQuesDB, errorCB);
        },1800); 
    }else{
        endLevel();         
    } 
} else {
    event.preventDefault();
}       
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T15:47:21.300

Android 有有限数量的资源来播放声音。每次要播放文件时，您都会不断创建一个新的 Media 对象。您需要释放不使用的声音。如果您需要多次播放这些声音，请考虑创建单独的媒体对象来保存对这些声音的引用。

阅读[media.release](http://docs.phonegap.com/en/2.2.0/cordova_media_media.md.html#media.release)。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-02-14T09:15:28.670

我有同样的问题。我做的解决方案：

```
 if(media){ 
       media.stop();
       media.release();
     }
     media = new Media(...); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-21T01:39:25.713

这是我的诀窍：我在它完成播放或发生错误时释放它。

```
function playAudio(url) {
    try {

        var my_media = new Media(url,
            // success callback
            function () {
                **my_media.release();**
            },
            // error callback
            function (err) {
                **my_media.release();**
            });

        // Play audio
        my_media.play();
    } catch (e) {
        alert(e.message);
    }
} 
```

# go - 为什么我的 golang 频道会引发死锁错误？

> ID：13566065
> 
> 赞同：9
> 
> 时间：2012-11-26T13:42:14.717
> 
> 标签：go

```
package main

import (
    "fmt"
    "sync"
)

func push(c chan int,wg sync.WaitGroup) {
    for i := 0; i < 5; i++ {
        c <- i
    }
    wg.Done()
}

func pull(c chan int,wg sync.WaitGroup) {
    for i := 0; i < 5; i++ {
        result,ok := <- c
        fmt.Println(result,ok)
    }
    wg.Done()
}

func main() {
    var wg sync.WaitGroup
    wg.Add(2)
    c := make(chan int)

    go push(c,wg)
    go pull(c,wg)

    wg.Wait()
} 
```

**输出：**

```
localhost:src kuankuan$ go run goroutine.go 
0 true
1 true
2 true
3 true
4 true
throw: all goroutines are asleep - deadlock!

goroutine 1 [semacquire]:
sync.runtime_Semacquire(0x42130100, 0x42130100)
    /usr/local/go/src/pkg/runtime/zsema_amd64.c:146 +0x25
sync.(*WaitGroup).Wait(0x42120420, 0x0)
    /usr/local/go/src/pkg/sync/waitgroup.go:79 +0xf2
main.main()
    /Users/kuankuan/go/src/goroutine.go:31 +0xb9

goroutine 2 [syscall]:
created by runtime.main
    /usr/local/go/src/pkg/runtime/proc.c:221
exit status 2 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-11-26T13:51:58.390

它死锁的原因是结构是按值传递而不是按引用传递的。

当您将 WaitGroup 传递给您的函数时，您需要传递*指针*而不是值。否则将使用 WaitGroup 的副本。

这是您的工作示例：

```
package main

import (
    "fmt"
    "sync"
)

func push(c chan int,wg *sync.WaitGroup) {
    for i := 0; i < 5; i++ {
        c <- i
    }
    wg.Done()
}

func pull(c chan int,wg *sync.WaitGroup) {
    for i := 0; i < 5; i++ {
        result,ok := <- c
        fmt.Println(result,ok)
    }
    wg.Done()
}

func main() {
    var wg sync.WaitGroup
    wg.Add(2)
    c := make(chan int)

    go push(c,&wg)
    go pull(c,&wg)

    wg.Wait()
} 
```

# ios - 在空的 UITextView 中启用返回键

> ID：13566067
> 
> 赞同：4
> 
> 时间：2012-11-26T13:42:22.710
> 
> 标签：ios, uitextview

在我的应用程序中，即使 UITextView 为空，我也需要在 UITextView 上启用 Return Key。默认情况下，在用户未输入任何符号之前，返回键被禁用。我怎么能做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-26T13:54:35.070

> 即使 UITextView 为空，我也需要在 UITextView 上启用 Return Key。

实际上，无论文本视图是否为空，都默认启用返回键。但是，如果要将返回键默认设置为禁用，则需要将 设置`enablesReturnKeyAutomatically`为`YES`。正如 Apple Doc 所说：

> 此属性的默认值为 NO。如果将其设置为 YES，则当文本输入区域不包含文本时，键盘将禁用返回键。一旦用户输入任何文本，返回键就会自动启用。

# python - 如何正确处理确认事件？

> ID：13566071
> 
> 赞同：0
> 
> 时间：2012-11-26T13:42:32.963
> 
> 标签：python, oop, tkinter

我正在尝试创建具有 2 个输入区域（用于登录名和密码）和确认按钮（按下此按钮后 - 代码将读取区域值）的框架。但是我不知道如何在`App`不使用一些全局函数的情况下在课堂上做到这一点。

```
from Tkinter import *

class App:

    def __init__(self, master):

        frame_credentials = Frame(master, width=100, height=200)
        frame_credentials.pack()

        self.label_login = Label(frame_credentials, text='login')
        self.text_login = Entry(frame_credentials, width=15)
        self.label_pass = Label(frame_credentials, text='password')
        self.text_pass = Entry(frame_credentials, show="*", width=15)
        self.button_ok = Button(frame_credentials, text="Login")

        self.label_login.grid(row=0, column=0)
        self.text_login.grid(row=1, column=0)
        self.label_pass.grid(row=2, column=0)
        self.text_pass.grid(row=3, column=0)
        self.button_ok.grid(row=0, column=1, rowspan=4)
        self.button_ok.bind("<Button-1>", enter_in)

    def enter_in(self):
        print self.text_login, self.text_pass

root = Tk()

app = App(root)

root.mainloop() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:29:10.383

不要绑定到`<Button-1>`; 相反，使用该`command`属性并为其指定对象中方法的名称。例如：

```
class App:
    def __init__(...):
        ...
        self.button_ok = Button(..., command=self.enter_in)
        ...
    def enter_in(self):
        <put your login logic here> 
```

# mysql - 在 WSO2 BAM 2.0 中使用数据源

> ID：13566077
> 
> 赞同：2
> 
> 时间：2012-11-26T13:42:43.803
> 
> 标签：mysql, hive, wso2, wso2bam

我想使用 MySQL 数据库将 Hive 分析脚本的结果存储在 BAM 2.0.1 中。查看提供的示例，我可以看到我必须使用许多属性 (mapred.jdbc.*) 传递连接信息。

有没有办法使用 Carbon 数据源而不是直接的 jdbc 连接？我主要关心的是在脚本中使用明文密码，这在关注安全的组织中是一个很大的障碍。

TIA

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T06:32:33.647

是的，有可能。您可以使用 wso2.carbon.datasource.name 参数来传递碳数据源的名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:09:24.707

需要使用密码，因为 Carbon 框架中尚未正确实现服务器到服务器的身份验证。但在最近的将来，我们希望通过改进 BAM 来消除这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T17:20:54.343

使用 chamibuddhika 所描述的属性就可以了。下面的表声明显示了一个完整的示例：

```
CREATE EXTERNAL TABLE IF NOT EXISTS BatchSummaryByWeek(
execYear SMALLINT,
execWeek SMALLINT,
job_name STRING,
exit_code INT,
totalExecutions INT,
avgElapsed FLOAT,
maxElapsed INT,
minElapsed INT
) 
STORED BY 
'org.wso2.carbon.hadoop.hive.jdbc.storage.JDBCStorageHandler' 
TBLPROPERTIES ( 
'wso2.carbon.datasource.name' = 'MYSQL_BAM',
'hive.jdbc.update.on.duplicate' = 'true' , 
'hive.jdbc.primary.key.fields' = 'execYear,execWeek,job_name,exit_code' , 
'hive.jdbc.table.create.query' = 'CREATE TABLE BatchSummaryByWeek(execYear INTEGER, execWeek SMALLINT,job_name VARCHAR(250), exit_code INT,totalExecutions INT, avgElapsed FLOAT, maxElapsed INT,minElapsed INT)' ); 
```

# c - 如何检查文件是否有内容或不使用C？

> ID：13566082
> 
> 赞同：5
> 
> 时间：2012-11-26T13:42:55.057
> 
> 标签：c, file, file-io, lcc-win32

我有一个源文件`file1`和一个目标文件`file2`，在这里我必须将内容从 移动 `file1`到`file2`.

所以我必须先做一些验证。

1.  我必须检查源文件是否存在？我可以用这个检查：

    ```
    fp = fopen( argv[1],"r" );
    if ( fp == NULL )
    {
        printf( "Could not open source file\n" );
        exit(1);
    } 
    ```

2.  然后我必须检查源文件是否有任何内容？如果它是空的，我必须抛出一些错误信息。

这是我到目前为止所尝试的。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-11-26T13:49:39.520

C版：

```
if (NULL != fp) {
    fseek (fp, 0, SEEK_END);
    size = ftell(fp);

    if (0 == size) {
        printf("file is empty\n");
    }
} 
```

C++ 版本（从[这里](https://stackoverflow.com/questions/2390912/checking-for-an-empty-file-in-c)窃取）：

```
bool is_empty(std::ifstream& pFile)
{
    return pFile.peek() == std::ifstream::traits_type::eof();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T13:53:11.340

看看有没有要读的字符

```
int c = fgetc(fp);
if (c == EOF) {
    /* file empty, error handling */
} else {
    ungetc(c, fp);
} 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-11-26T14:05:48.000

您也可以使用该方法在*不*打开文件的情况下执行此操作`stat`。

```
#include <sys/stat.h>
#include <errno.h>

int main(int argc, char *argv[])
{

     struct stat stat_record;
     if(stat(argv[1], &stat_record))
         printf("%s", strerror(errno));
     else if(stat_record.st_size <= 1)
         printf("File is empty\n");
     else {
         // File is present and has data so do stuff...
     } 
```

因此，如果该文件不存在，您将点击第一个`if`并收到如下消息：`"No such file or directory"`

如果文件存在且为空，您将收到第二条消息`"File is empty"`

此功能在 Linux 和 Windows 上都存在，但在 Win 上是`_stat`. 我还没有测试 Windows 代码，但你可以[在这里](http://msdn.microsoft.com/en-us/library/14h5k7ff.aspx)看到它的例子。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-26T13:52:27.460

```
fseek(fp, 0, SEEK_END); // goto end of file
if (ftell(fp) == 0)
 {
      //file empty
 }
fseek(fp, 0, SEEK_SET); // goto begin of file
// etc; 
```

[ftell 和示例的参考](http://www.cplusplus.com/reference/cstdio/ftell/)

[fseek 和示例的参考](http://www.cplusplus.com/reference/cstdio/fseek/)

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-11-26T13:46:50.117

您可以使用[fseek](http://www.cplusplus.com/reference/cstdio/fseek/) using`SEEK_END`然后[ftell](http://www.cplusplus.com/reference/cstdio/ftell/)来获取文件的大小（以字节为单位）。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T14:45:10.673

打开数据并计算文件的每个字节是很痛苦的。最好要求操作系统为您提供有关您要使用的文件的详细信息。正如 Mike 之前所说，API 依赖于您的操作系统。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-11-26T13:45:57.427

您可以检查文件大小是否> 0

在您检查文件的代码存在之后（在您关闭文件之前），您添加以下代码

```
 size = 0
    if(fp!=NULL)
    {
        fseek (fp, 0, SEEK_END);

        size = ftell (fp);
        rewind(fp);

    }
    if (size==0)
    {
      // print your error message here
     } 
```

# javascript - ES6：公共符号与私有符号

> ID：13566084
> 
> 赞同：0
> 
> 时间：2012-11-26T13:43:06.307
> 
> 标签：javascript, ecmascript-harmony, ecmascript-6

我一直在寻找有关如何在 ECMAScript 6 中将符号指定为公共或私有的讨论。

据我了解，将使用类似于以下的模式创建私有符号：

```
var itemManager = (function() {

    var items = new Symbol(/* possible string description? */);

    return {

        [items]: [ ],

        getItems: function() {
            return this[items].slice();
        },

        addItem: function(item) {
            this[items].push(item);
        }

    };

})(); 
```

但是我如何将`items`符号指定为公共？在 ES6 中是否可以使用公共符号，或者它们只是私有的（`Object.getOwnPropertyNames`例如不显示）？此外，默认情况下公共符号是否可枚举（显示在 中`Object.keys`）？

任何人都可以将我链接到相关信息吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:40:40.657

非私有名称及其语义，以及一般名称的精确句法支持都尚未完全确定。因此，目前还没有任何东西可以将您链接到。你能得到的最好的结果是在 es-discuss 上挖掘相关线程。

# drupal - 在 Drupal 上的用户/ID 上显示更多字段

> ID：13566087
> 
> 赞同：0
> 
> 时间：2012-11-26T13:43:17.347
> 
> 标签：drupal, drupal-7, drupal-modules, drupal-views

我正在寻找在 user/11 的默认视图中显示我在用户上添加的自定义字段的方法。它仅显示用户名和历史记录。

我可以对此进行查看，但我想使用原始页面（用户/ID）。

谢谢你的帮助 ！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:43:04.903

看看下面`Administration » Configuration » People » Account settings » Manage fields`，找到面板`*Fieldname* field settings`。当有人通过将字段设为“公开”来查看用户的个人资料时，您应该能够使该字段可见。

# yii - 3模型在cgridview中使用yii框架查询数据

> ID：13566089
> 
> 赞同：0
> 
> 时间：2012-11-26T13:43:34.477
> 
> 标签：yii, yii-extensions

我们如何使用 3 个模型在 cgridview 中完成以下查询结果。？

```
select a.id,
   a.name,
   b.group_id,
   c.id,
   c.client_id,
   c.title
from           users_phone_numbers a,
 phone_number_group_assignment b,
                 client_groups c
where    a.id = b.phone_number_id
and      b.group_id=c.id; 
```

请回复谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:06:49.487

使用[CArrayDataProvider](http://www.yiiframework.com/doc/api/1.1/CArrayDataProvider)

```
$rawData=Yii::app()->db->createCommand('... query ...')->queryAll();
$dataProvider=new CArrayDataProvider($rawData, array(
    'id'=>'a.id',
    'sort'=>array(
        'attributes'=>array(
              'a.name, b.group_id, ...',
        ),
     ),
)); 
```

作为 DataProvider传递`$dataProvider`给您的网格视图。

# java - 特定类文件的 Ant 编译器警告

> ID：13566091
> 
> 赞同：2
> 
> 时间：2012-11-26T13:43:41.123
> 
> 标签：java, ant, compiler-construction, compiler-warnings, suppress-warnings

我想忽略特定文件引发的来自 ant 的警告。

为什么有警告不是强制性的，我只想找到一种方法来忽略任何形成特定类文件的警告。

有没有办法做到这一点？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-23T21:52:42.243

```
<target name="compile">
    <mkdir dir="${classes.dir}" />
    <javac
        classpathref="project.classpath"
        bootclasspath="${javac.bootclasspath}"
        compiler="${javac.compiler}"
        debug="${javac.debug}"
        deprecation="${javac.deprecation}"
        destdir="${classes.dir}"
        fork="${javac.fork}"
        memoryMaximumSize="${javac.memoryMaximumSize}"
        nowarn="${javac.nowarn}"
        srcdir="${source.dir}"
        source="${javac.source}"
        target="${javac.target}"
        encoding="UTF-8"
    >
        <compilerarg value="-XDignore.symbol.file"/>

    </javac>
</target> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T13:58:50.153

我认为您的意思是“在运行 Ant 脚本时抑制来自 javac 的编译警告”？

您没有提供警告示例，但通常您可以查看[@SuppressWarnings](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/SuppressWarnings.html)注释。可悲`"unchecked"`的是，只有 JLS 需要，而所有其他都依赖于实现 - 您可以尝试

```
localhost:~$ javac -X
  -Xlint:{all,cast,deprecation,divzero,empty,unchecked,fallthrough,path,
          serial,finally,overrides,-cast,-deprecation,-divzero,-empty,-unchecked,
          -fallthrough,-path,-serial,-finally,-overrides,none} 
```

查看您选择的 JDK 支持的那些。

**编辑：**不可能以这种方式抑制“内部专有 API”类型的警告，参见。[这个错误 ID](http://bugs.sun.com/bugdatabase/view_bug.do?bug_id=6476630)。但是，它应该可以使用（未​​记录的）`-XDignore.symbol.file`命令行选项`javac`（参见例如[错误 6544224](http://bugs.sun.com/view_bug.do?bug_id=6544224)）。

*真正的*解决方案当然是不使用这些 API...

干杯，

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T18:58:13.593

javac ant 任务具有 nowarn 属性，可在编译时关闭所有警告。但是要使某个特定类的警告静音，您只需修改您的 java 文件。

这里是 [http://ant.apache.org/manual/Tasks/javac.html](http://ant.apache.org/manual/Tasks/javac.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T02:54:41.753

将[@SuppressWarnings](http://docs.oracle.com/javase/7/docs/api/java/lang/SuppressWarnings.html)添加到您的类定义中。例子：

```
@SuppressWarnings
public class MyClass {
} 
```

您可以通过传递字符串参数来抑制特定警告，例如：`@SuppressWarnings("unchecked")`。请参阅[Java 中有效的 @SuppressWarnings 警告名称列表是什么？](https://stackoverflow.com/questions/1205995)对于一个列表。

# c# - 类库中的通用“调试”功能

> ID：13566096
> 
> 赞同：1
> 
> 时间：2012-11-26T13:44:09.827
> 
> 标签：c#

我在一个项目中使用了几个类库，其中一个是典型的“project.common.dll”库，其中包含一些常见的帮助函数。其中一个函数是创建调试输出的调试函数。现在我想通过使用用户级属性（应用程序设置）来启用/禁用调试输出。如何在此类库中引用主应用程序的 program.cs 中定义的变量？

更新：谢谢大家。我可能会在我的基础应用程序中创建一个静态方法来执行检查（是否调试），然后调用公共库中的调试函数。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T13:47:53.127

你不能。

您需要做的是在类库本身中拥有属性，当您在主应用程序中创建它的实例时，将用户设置传入：

```
var debug = new DebugInstance { Output = this.Output }; 
```

或设置参数，如果它是一个静态类：

```
StaticDebug.Output = this.Output; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T13:51:23.430

您可以使用[ConditionalAttribute](http://msdn.microsoft.com/en-us/library/system.diagnostics.conditionalattribute.aspx)：

```
[Conditional("DEBUG")]
public static void WriteDebugInfo()
{
    Trace.WriteLine("what ever...")
} 
```

这样，当您在 Debug 模式下构建时，会调用该方法；在发布模式下没有。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:47:09.390

在 Debug 类的构造函数上使用参数（如果类是静态的，则使用静态构造函数）。

# android - 从 android 联系方式中启动我的应用程序 Intent

> ID：13566097
> 
> 赞同：0
> 
> 时间：2012-11-26T13:44:19.780
> 
> 标签：android, android-contacts

我想从 android 联系方式中启动我的应用程序 Intent，就像 Whatsapp 一样。我的意思是，当您转到本机联系人应用程序并打开联系人的详细信息时，您应该会在显示的详细信息中看到我自己的应用程序要执行的操作。这是可能的，因为 Whatsapp 做到了。

你能帮助我吗？

请。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T01:18:07.047

是的，我可以帮助你，但你可能不喜欢这个答案。

从技术上讲，您*可以*通过意图过滤器捕获来自“联系人”的传出意图来响应本机联系人应用程序中的点击。问题是联系人应用程序没有发布传出意图的名称。您必须自己在 Android 开源项目中寻找它们。

此外，您不能添加联系人应用程序尚未添加的任何内容。通讯录应用程序不支持这一点。

您可以编写自己的联系人应用程序版本，并提供附加任何您想要的操作的能力。

# javascript - 变量内容不保存在函数中

> ID：13566098
> 
> 赞同：0
> 
> 时间：2012-11-26T13:44:24.540
> 
> 标签：javascript

我有一个我找不到解决方案的问题。在我的代码中有一个名为`list`. 该变量`list`应该使用 检索输入元素，但在语句结束后`getElementsByName()`该变量为空（即`list.length == 0`） 。`if`在下面的代码中，在`for`循环的开头`list.length`是零或未定义。

为什么会这样？

功能是：

```
function chekRadioToAnswer() {
    var signAnswers = new Array(0, 0, 0, 0);
    var grades = [[0, 5, 10, 15], [15, 12, 10, 5, 0], [0, 5, 10, 15, 20], [0, 0, 20, 30]];
    var answers = new Array(0, 0, 0, 0, 0, 0);

    for (num = 2; num <= 5; num++) {
        if (num == 2) {
            list = document.getElementsByName("answer2"); 
        }
        if (num == 3) {
            list = document.getElementsByName("answer3"); 
        }
        if (num == 4) {
            list = document.getElementsByName("answer4"); 
        }
        if (num == 5) {
            list = document.getElementsByName("answer5"); 
        }

        for (i = 0; i < list.length; i++) {
            if (list[i].checked) {
                var value = document.getElementById("hiddenAnswers").getAttribute("value");
                 document.getElementById("hiddenAnswers").setAttribute("value", (value + grades[num - 2][i]));
                 break;
             }
        }

        list.length = 0;
    }
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:48:15.210

如果您尝试创建一个输入数组，您需要首先声明 list 并为其分配一个空数组：

```
var list = []; 
```

然后使用`push`添加到数组中：

```
//If you are going to use getElementsByName, take the first member of the array

var rdo = document.getElementsByName("answer3");

for (var x = 0; x < rdo.length; x++){
  if (rdo[x].checked){
    list.push(rdo[x]);
  }
} 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T13:52:01.043

`whatever = document.getElementsByName(name)``whatever`如果没有找到给定名称的元素，则分配一个空数组。确保您的元素名称正确。

`var`用关键字声明变量也很好。这可以防止许多令人毛骨悚然的错误。

# jquery - Flexslider 视口高度在调整大小时无响应

> ID：13566100
> 
> 赞同：2
> 
> 时间：2012-11-26T13:44:37.167
> 
> 标签：jquery, height, responsive-design, flexslider

我正在尝试在每张幻灯片上将 Flexslider 与基于文本的内容一起使用，这意味着幻灯片和视口的垂直高度需要根据窗口的宽度动态改变。

在加载时，Flexslider 初始化，随后的一些 jQuery 使所有幻灯片与视口具有相同的高度，并使每张幻灯片中的内容垂直居中。如果您不调整浏览器的大小，这很好。但是，如果您这样做，则会出现几个问题：

*   如果更改窗口大小，则视口的高度已经在加载时设置，并且不会改变，因此缩小窗口会使文本溢出并消失，扩展它会使幻灯片看起来很空白。
*   奇怪的是，如果您在*页面加载*时调整窗口大小，那么视口会假定一个相当大的高度。

还有另一个可能与此相关的问题： * 在加载时，我短暂地看到 Flexslider 初始化时出现五彩斑斓的混乱。

我的代码如下所示：

```
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
<script src="/link/to/flexslider.js"></script>
<script type="text/javascript" charset="utf-8">
    var verticalCenterer = function () {
            $(this).css('margin-top', ($(this).parent().height()-($(this).outerHeight()))/2);
        };

    var carouselInit = function() {
        var carouselHeight = $('.flex-viewport').innerHeight();
        $('.slides li').css('height',carouselHeight);
        $('p').each(function()
            {
            $(this).css('margin-top', ($(this).parent().height()-($(this).outerHeight()))/2);
            }
        );
        }

    $(window).load(function() {
      $('.carousel').flexslider({
        animation: "slide",
        slideshowSpeed: 2000,
        animationSpeed: 500,
        directionNav: false,
        pausePlay: true,
        pauseText: '',
        playText: '',
        start: carouselInit
      });
       alert('Wait a moment');
    });

    $(window).resize(carouselInit);

    </script>

<div class="carousel">
    <ul class="slides">
    <li style="background: #ff9999;">
        <p>Lorem ipsum dolor sit amet 1; Lorem ipsum dolor sit amet 2; Lorem ipsum dolor sit amet 3; Lorem ipsum dolor sit amet 4; Lorem ipsum dolor sit amet 5; Lorem ipsum dolor sit amet 6; Lorem ipsum dolor sit amet 7; Lorem ipsum dolor sit amet 8; Lorem ipsum dolor sit amet 9; <strong>Lorem ipsum dolor sit amet 10</strong>; Lorem ipsum dolor sit amet 11; Lorem ipsum dolor sit amet 12; Lorem ipsum dolor sit amet 13; Lorem ipsum dolor sit amet 14; <strong>Lorem ipsum dolor sit amet 15</strong>.</p>
    </li>
    <li style="background: #9999ff;">
        <p>A shorter one</p>
    </li>
    <li style="background: #99ff99;">
        <p>Test text test text Test text test text Test text test text Test text test text Test text test text Test text test text Test text test text Test text test text</p>
    </li>
  </ul>
</div> 
```

我还做了[一个例子 jsfiddle](http://jsfiddle.net/6FMrL/3/)：

*   幻灯片标记和页面特定的 JavaScript 都在 HTML 中。
*   JavaScript 包含最新的缩小 Flexslider 代码。
*   我已经设置了一个在负载时运行的警报，以冻结多幻灯片的混乱。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:23:43.263

只需评论以下内容：

```
....
//$(window).resize(carouselInit);

        </script>

<div class="carousel">
.... 
```

在关闭脚本标记之前在代码中注释 $(window).resize(carouselInt)。检查以下工作示例：http: [//jsfiddle.net/saidbakr/6FMrL/9/](http://jsfiddle.net/saidbakr/6FMrL/9/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-15T08:04:57.413

我遇到了同样的问题，并通过使用以下代码更改每个浏览器调整大小的视口大小和幻灯片宽度来修复它：

```
 $(window).on('resize', function () {

        if ($('.flexslider').length > 0) {

            $('.flexslider').each(function () {

                $(this).find('.flex-viewport').css('height', 'auto');

                $(this).find('>.slides').each(function () {
                    let height = $(this).css('height');
                    $(this).find('> li').css('width', height);
                });

            });
        }
    }); 
```

# linux - 无法通过 ssh 连接到 Amazon ec2 服务器上的端口 443

> ID：13566101
> 
> 赞同：0
> 
> 时间：2012-11-26T13:44:36.853
> 
> 标签：linux, security, ssh, amazon-ec2, firewall

我在端口 443 上的 Amazon EC2 (linux) 机器上运行 ssh。

然而我无法 ssh 它，因为我在防火墙后面。

当我做
http://host:443

显示以下消息：SSH-2.0-OpenSSH_5.3

这意味着 ssh 显然正在侦听端口 443，并且该端口甚至可以访问（通过浏览器）。但是，当我从桌面命令行（或腻子）执行 ssh 时，它就不起作用了。

是防火墙正在检查数据包并阻止它吗？有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:46:49.010

你在做`ssh -p 443 host`吗？很抱歉说很明显......但有时显而易见的是我们无法理解。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T07:37:38.367

工作！腻子还需要代理条目:)

# ios - iOS：选项卡项目图像未加载

> ID：13566104
> 
> 赞同：0
> 
> 时间：2012-11-26T13:44:38.827
> 
> 标签：ios

我想使用`self.tabBarItem.image = [UIImage imageNamed:@"home_icon.png"];`看起来很简单来更改标签栏项目的图像，但我无法让它运行。注意：我只是将文件名从 first 替换为 home_icon。该代码使用名称“first”。

详细信息：我从标准选项卡式应用程序开始，只更改了这一行代码。Xcode 然后加载 64x64 图像。我在项目中放置了一个 home_icon.png 文件，并确保它是一个 30x30 png 文件。文档说：“此方法在系统缓存中查找具有指定名称的图像对象，如果存在则返回该对象。如果匹配的图像对象尚未在缓存中，则此方法从指定文件加载图像数据，缓存它，然后返回结果对象。” 为什么我不能在这里简单地引用不同的文件？我不明白这里实际引用了什么。原行是`self.tabBarItem.image = [UIImage imageNamed:@"first"];`, 以引用 first.png。

**我试过的（到目前为止看到答案）**：

*   使用 home_icon，而不是 home_icon.png
*   使用`UIImage *img = [UIImage imageNamed:@"home.png"]; self.tabBarItem.image = img;`
*   添加 2x 文件
*   检查输出控制台。没有提到错误。（应用程序仍然成功引用旧文件）。
*   检查目标。文件被添加到目标

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:48:13.400

从末尾删除“.png”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:52:57.877

你应该试试下面的代码；

```
UIImage *img = [UIImage imageNamed:@"image.png"];
[[tabBarController.viewControllers objectAtIndex:tabImageIndex] tabBarItem].image=img; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:54:40.470

使用以下代码更改标签栏的背景。您可以根据您的标签添加不同的不同图像。

```
- (BOOL)tabBarController:(UITabBarController *)tabBarController shouldSelectViewController:(UIViewController *)viewControllers{
    NSUInteger index=[[tabBarController viewControllers] indexOfObject:viewControllers];

    switch (index) {
        case 0:
            [tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"tab_act21.png"]];

            break;
        case 1:
            [tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"tab_act22.png"]];
            break;
        case 2:
            [tabBarController.tabBar setBackgroundImage:[UIImage imageNamed:@"tab_act23.png"]];
            break;
        default:
            break;
    }

    return YES;
} 
```

如果您只想更改标签栏项目图像，则使用以下代码。

```
self.tabbarcontroller.tabBarItem.image=[UIImage imageNamed:@"Someimage.png"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T14:15:13.233

你确定 [UIImage imageNamed:@"home.png"] 返回不为零吗？签入控制台

```
NSLog(@"%@", [UIImage imageNamed:@"home.png"]); 
```

如果是这样，请尝试将图像添加到 Build Phases -> Copy Bundle Resources

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-11-26T17:30:41.010

解决方案是在 png 文件中仅使用 alpha 通道。有关详细信息，请参阅[http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/mobilehig/IconsImages/IconsImages.html)。

# ravendb - RavenDb LuceneQuery 建议搜索

> ID：13566108
> 
> 赞同：1
> 
> 时间：2012-11-26T13:44:41.000
> 
> 标签：ravendb

我想尝试利用 RavenDb 中的 Suggest 功能。使用*session.Advanced.LuceneQuery*时可以这样做吗？

我正在使用高级选项，因为我在返回类型未知的多映射场景中进行索引，这会阻止使用强类型的 Linq 查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:13:03.040

使用 LuceneQuery 时，需要自己调用 store.DatabaseCommands.Suggest()。

# mysql - mysql：如何在字段已更新时自动更新时间戳

> ID：13566115
> 
> 赞同：2
> 
> 时间：2012-11-26T13:44:59.127
> 
> 标签：mysql, timestamp, sql-update

我有一个简单的数据库表，其中包含很少的文章数据库字段，其中一个时间戳包含对文章进行的最后一次更新的时间。

我使用“ON UPDATE CURRENT_TIMESTAMP”

问题是我只想在这条记录的某些字段发生变化时才更新，而不是全部。

即对于每篇文章，我都有一个字段给出访问者阅读文章的次数。每次网络访问后不得更新...只有在我更改标题、作者等时...

理想情况下，使用一个不错的 mysql 命令...

* * *

我编写了以下代码：

```
CREATE TRIGGER `actu_lastupdate_date` BEFORE UPDATE ON `actuality`
 FOR EACH ROW BEGIN
    if NEW.title <> OLD.title OR NEW.chapeau = OLD.chapeau OR NEW.content = OLD.content
    then
        SET NEW.LastUpdate_date = current_timestamp;
    end if;
END 
```

似乎即使另一个记录字段正在更改，时间戳也会更新。应该有什么不好的地方。我会调查的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:47:52.510

您可以编写一个触发器来添加更新时间戳

```
delimiter |
CREATE TRIGGER actu_lastupdate_date AFTER UPDATE on actuality
FOR EACH ROW
BEGIN
    if (NEW.title <> OLD.title 
         OR NEW.chapeau <> OLD.chapeau 
         OR NEW.content <> OLD.content)
        AND (NEW.other_column = OLD.other_column 
         OR NEW.other_column2 = OLD.other_column2)
    then
        SET NEW.LastUpdate_date = current_timestamp;
    end if;
END
|
delimiter ; 
```

# sql - 按可空列分组

> ID：13566117
> 
> 赞同：6
> 
> 时间：2012-11-26T13:45:05.527
> 
> 标签：sql, oracle

如您所知，Oracle 在 GROUP BY 查询中将 NULL 视为一个“值”。是否有一种解决方法来分组数据，将 NULL 视为不同的值。例如：

药片：

```
colA     colB
 A         1 
 A         5 
<null>     3 
<null>     2 
```

`select colA, min(colB) from t group by colA`返回：

```
colA     colB
 A         1 
<null>     2 
```

但我想要一个查询返回：

```
colA     colB
 A         1 
<null>     3 
<null>     2 
```

提前致谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T13:47:28.953

```
SELECT colA, MIN(colB)
FROM t
WHERE colA IS NOT NULL
GROUP BY colA
UNION ALL
SELECT colA, colB
FROM t
WHERE colA IS NULL 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T14:28:26.683

@lc 的回答很好，但仅针对这项运动，这里有另一种解决方案：

```
SELECT  colA, min(colB)
FROM t
GROUP BY nvl(colA, rownum),colA 
```

这是一个[sqlfiddle](http://www.sqlfiddle.com/#!4/d5954/6)演示

# java - XText：7 种语言教程无法解析示例 1 脚本中对 JvmIdentifiableElement 的引用

> ID：13566121
> 
> 赞同：0
> 
> 时间：2012-11-26T13:45:36.560
> 
> 标签：java, eclipse, xtext

我正在关注 XText 主页 ( [http://www.eclipse.org/Xtext/7languages.html](http://www.eclipse.org/Xtext/7languages.html) )中的 7 种语言教程

在第一个示例“脚本”中，我设法让几乎所有东西都运行起来，但标识符范围似乎存在问题。

我正在运行编辑器并为空脚本生成代码，但尝试编写任何有用的东西都行不通。

我从教程中逐字输入语法和模型推断器的代码，还尝试使用来自 github repo 的版本和示例[https://github.com/xtext-dev/seven-languages-xtext](https://github.com/xtext-dev/seven-languages-xtext)

**演示脚本**

```
val i = 1 
```

**demo.java**生成

```
public class demo {
    public static void main(final String[] args) {
        final int i = 1;
    }
} 
```

这工作正常

现在这是导致问题的输入

**错误脚本**

```
println("test") 
```

这报告了两个错误：

*错误 1*

```
Description: Couldn't resolve reference to JvmIdentifiableElement 'println'.
Resource: error.script
Path: /org.xtext.scripting.demo/scripting
Location: line: 3 /org.xtext.scripting.demo/scripting/demo.script
Type: Scripting Problem 
```

*错误 2*

```
Description: This expression is not allowed in this context, since it doesn't cause any side effects.
Resource: error.script
Path: /org.xtext.scripting.demo/scripting
Location: line: 1 /org.xtext.scripting.demo/scripting/error.script
Type: Scripting Problem 
```

我在 2.4.0 版本中使用 XText 插件

有什么建议可以更改以使此示例按照教程中的说明工作吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:59:06.650

您必须将 xbase.lib 的依赖项添加到包含脚本文件的项目中。

# android - 使用 Shared Preferences 在 android 应用中存储 pin

> ID：13566124
> 
> 赞同：2
> 
> 时间：2012-11-26T13:45:40.100
> 
> 标签：android, arrays, string, sharedpreferences

我正在尝试使用共享首选项存储 pin，因为我有两个不同的活动，即 EnterPin 和 ConfirmPin。

对于 EnterPin，我有 [起始代码]

```
package com.example.textsmslock;

import java.io.FileOutputStream;
import java.io.IOException;
import java.io.OutputStreamWriter;

import android.app.Activity;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.os.Bundle;
import android.support.v4.app.NavUtils;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;

public class EnterPin extends Activity {
public String[] pin = new String[4];
public Button[] buttons = new Button[10];
public int counter = 0;
public String FILENAME = "pin_file";
public static final String PinCode = "1234";

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_enter_pin);
    //getActionBar().setDisplayHomeAsUpEnabled(true);

    buttons[1] = (Button)findViewById(R.id.button1);
    buttons[2] = (Button)findViewById(R.id.button2);
    buttons[3] = (Button)findViewById(R.id.button3);
    buttons[4] = (Button)findViewById(R.id.button4);
    buttons[5] = (Button)findViewById(R.id.button5);
    buttons[6] = (Button)findViewById(R.id.button6);
    buttons[7] = (Button)findViewById(R.id.button7);
    buttons[8] = (Button)findViewById(R.id.button8);
    buttons[9] = (Button)findViewById(R.id.button9);
    buttons[0] = (Button)findViewById(R.id.button0);

    //Restore the preferences
    SharedPreferences settings = getSharedPreferences(PinCode, 0);

}
public void button1(View view)
{
    if(counter < 3)
    {
        pin[counter] = "1";
        counter++;
    }
    else
    {
        PinEntered();
    }
}
public void button2(View view)
{
    if(counter < 3)
    {
        pin[counter] = "2";
        counter++;
    }
    else
    {
        PinEntered();
    }
} 
public void button3(View view)
{
    if(counter < 3)
    {
        pin[counter] = "3";
        counter++;
    }
    else
    {
        PinEntered();
    }
}
public void button4(View view)
{
    if(counter < 3)
    {
        pin[counter] = "4";
        counter++;
    }
    else
    {
        PinEntered();
    }
}
public void button5(View view)
{
    if(counter < 3)
    {
        pin[counter] = "5";
        counter++;
    }
    else
    {
        PinEntered();
    }
}
public void button6(View view)
{
    if(counter < 3)
    {
        pin[counter] = "6";
        counter++;
    }
    else
    {
        PinEntered();
    }
}
public void button7(View view)
{
    if(counter < 3)
    {
        pin[counter] = "7";
        counter++;
    }
    else
    {
        PinEntered();
    }
}
public void button8(View view)
{
    if(counter < 3)
    {
        pin[counter] = "8";
        counter++;
    }
    else
    {
        PinEntered();
    }
}
public void button9(View view)
{
    if(counter < 3)
    {
        pin[counter] = "9";
        counter++;
    }
    else
    {
        PinEntered();
    }
}
public void button0(View view)
{
    if(counter < 3)
    {
        pin[counter] = "0";
        counter++;
    }
    else
    {
        PinEntered();
    }
}
public void PinEntered()
{
if(counter == 3)
    {
        putString(pin,0);

    }
}
} 
```

[结束代码]

对于 ConfirmPin，我有 [起始代码]

```
package com.example.textsmslock;

import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.FileNotFoundException;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.util.ArrayList;
import java.util.List;

import android.os.Bundle;
import android.content.Context;
import android.content.Intent;
import android.content.SharedPreferences;
import android.view.Menu;
import android.view.MenuItem;
import android.view.View;
import android.widget.Button;
import android.widget.TextView;
import android.support.v4.app.NavUtils;

public class ConfirmPin extends EnterPin {
public String[] pinconfirm = new String[4];
public Button[] buttons = new Button[10];
public int counter = 0;
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_confirm_pin);
    //getActionBar().setDisplayHomeAsUpEnabled(true);
    buttons[1] = (Button)findViewById(R.id.button1);
    buttons[2] = (Button)findViewById(R.id.button2);
    buttons[3] = (Button)findViewById(R.id.button3);
    buttons[4] = (Button)findViewById(R.id.button4);
    buttons[5] = (Button)findViewById(R.id.button5);
    buttons[6] = (Button)findViewById(R.id.button6);
    buttons[7] = (Button)findViewById(R.id.button7);
    buttons[8] = (Button)findViewById(R.id.button8);
    buttons[9] = (Button)findViewById(R.id.button9);
    buttons[0] = (Button)findViewById(R.id.button0);
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    getMenuInflater().inflate(R.menu.activity_confirm_pin, menu);
    return true;
}

@Override
public boolean onOptionsItemSelected(MenuItem item) {
    switch (item.getItemId()) {
        case android.R.id.home:
            NavUtils.navigateUpFromSameTask(this);
            return true;
    }
    return super.onOptionsItemSelected(item);
}
public void button1(View view)
{
    if(counter < 3)
    {
        pinconfirm[counter] = "1";
        counter++;
    }
    else
    {
        ConfirmingPin();
    }
}
public void button2(View view)
{
    if(counter < 3)
    {
        pinconfirm[counter] = "2";
        counter++;
    }
    else
    {
        ConfirmingPin();
    }
} 
public void button3(View view)
{
    if(counter < 3)
    {
        pinconfirm[counter] = "3";
        counter++;
    }
    else
    {
        ConfirmingPin();
    }
}
public void button4(View view)
{
    if(counter < 3)
    {
        pinconfirm[counter] = "4";
        counter++;
    }
    else
    {
        ConfirmingPin();
    }
}
public void button5(View view)
{
    if(counter < 3)
    {
        pinconfirm[counter] = "5";
        counter++;
    }
    else
    {
        ConfirmingPin();
    }
}
public void button6(View view)
{
    if(counter < 3)
    {
        pinconfirm[counter] = "6";
        counter++;
    }
    else
    {
        ConfirmingPin();
    }
}
public void button7(View view)
{
    if(counter < 3)
    {
        pinconfirm[counter] = "7";
        counter++;
    }
    else
    {
        ConfirmingPin();
    }
}
public void button8(View view)
{
    if(counter < 3)
    {
        pinconfirm[counter] = "8";
        counter++;
    }
    else
    {
        ConfirmingPin();
    }
}
public void button9(View view)
{
    if(counter < 3)
    {
        pinconfirm[counter] = "9";
        counter++;
    }
    else
    {
        ConfirmingPin();
    }
}
public void button0(View view)
{
    if(counter < 3)
    {
        pinconfirm[counter] = "0";
        counter++;
    }
    else
    {
        ConfirmingPin();
    }
}

public void ConfirmingPin()
{
          SharedPreferences settings = getSharedPreferences(PinCode, 0);
      SharedPreferences.Editor editor = settings.edit();
      editor.putString(pinconfirm, 0);

      editor.commit();
}
} 
```

当我调用 putString 时出现错误，有人可以向我解释为什么吗？我做错了 sharedPreferences 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:54:23.600

您正在使用[`putString(String key, String value)`](http://developer.android.com/reference/android/content/SharedPreferences.Editor.html#putString%28java.lang.String,%20java.lang.String%29)错误的类型。您正在尝试添加 a`stringarray`而不是`string`作为Also 作为您添加`putString();` 的相同值的键，这也应该是。如果您不想 pinconfirm 中的第一项：`putString();``int``string`

```
editor.putString("PIN", pinconfirm[0].ToString()); 
```

如果要添加数组中的所有内容，可以执行类似将其保存为单个逗号分隔字符串的操作：

```
StringBuilder sb = new StringBuilder();
for (int i = 0; i < pinconfirm.length; i++) {
   sb.append(pinconfirm[i]).append(",");
}
editor.putString("pinconfirm", sb.toString()); 
```

然后，当您从 SharedPreferences 获取字符串时，只需像这样解析它：

```
String[] pinconfirm= pinconfirms.split(","); 
```

# arrays - 如何找到多个数组项的所有组合

> ID：13566134
> 
> 赞同：1
> 
> 时间：2012-11-26T13:46:16.910
> 
> 标签：arrays, algorithm, sorting

假设这些是起始数组：

```
[a,b,c]
[d]
[e,f] 
```

什么算法可以产生以下数组？

```
[a,d,e]
[a,d,f]
[b,d,e]
[b,d,f]
[c,d,e]
[c,d,f] 
```

起始数组的数量可以变化。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:51:38.640

取决于语言，但形式上是这样的（当您指定 3 个数组时）

```
for el1 in first_array do
  for el2 in second_array do
    for el3 in third_array do
      begin
        create new element in result array as [e1, el2, el3]
      end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T16:03:12.983

假设有 k 个数组，分别包含 n [1]、 n [2] ... n [k]个元素。
写所有组合很像用[混合基数](http://en.wikipedia.org/wiki/Mixed_radix)写所有数字。
因此，只需遍历从 0 到 (n [1] n [2] ...n [k] -1) 的所有可能数字，并用从数组中获取的“数字”以混合基数表示形式将其写下来 - 只需要两个嵌套循环。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T13:51:44.993

你能想到的最简单的算法就是你能拥有的最好的算法。由于答案是大小，因此所有数组的乘法维度在这里并没有太大的改进。我个人建议使用递归，因为数组的数量不能太大，而不会使结果数组的数量非常大。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T14:35:24.133

另一种方法是图形方法，您从原始集开始，顺时针移动它们的内容并存储组合。示例首先旋转最后一行，最后一次旋转后移动最后 - 1 行（在本例中为 d，但您不能旋转它），因此您将旋转第一行。这就像二进制和。

```
[a,b,c]     [a,b,c]---->[b,c,a]     [b,c,a]---->[c,a,b]     [c,a,b]              
[d]         [d]         [d]         [d]         [d]         [d]    
[e,f]------>[f,e]------>[e,f]------>[f,e]------>[e,f]------>[f,e] 
```

PD：你只会保存每个数组的第一个元素。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-08-29T08:26:04.603

上面提出的解决方案有一个很大的问题，开发人员需要知道前面的数组数量并相应地创建循环的数量。

C# 中的以下解决方案根据您实际拥有的数组数量动态执行它，并且它与类型无关：

```
 static void Main(string[] args)
    {
        List<List<char>> masterListChar = new List<List<char>>();
        List<char> c1 = new List<char>() { 'a', 'b', 'c' };
        List<char> c2 = new List<char>() { 'd' };
        List<char> c3 = new List<char>() { 'e', 'f'};
        masterListChar.Add(c1);
        masterListChar.Add(c2);
        masterListChar.Add(c3);

        //PrintCombinations(masterListInt);
        PrintCombinations(masterListChar);
        Console.ReadKey();
    }

    public static void PrintCombinations<T>(List<List<T>> masterArray)
    {
        T[] combination = new T[masterArray.Count];
        WalkOnSubArray(combination, masterArray, 0);
    }

    public static void WalkOnSubArray<T>(T[] combination, List<List<T>> masterArray, int masterIndex)
    {
        List<T> currentArray = masterArray[masterIndex];
        for (int i = 0; i < currentArray.Count; ++i)
        {
            combination[masterIndex] = currentArray[i];

            if(masterIndex != masterArray.Count - 1)
                WalkOnSubArray(combination, masterArray, masterIndex + 1);
            else
                Console.WriteLine(String.Join(",", combination));
        }
    } 
```

# jsf - 自定义链接如rich:simpleTogglePanel

> ID：13566135
> 
> 赞同：0
> 
> 时间：2012-11-26T13:46:20.723
> 
> 标签：jsf, richfaces, jsf-1.2

我想改变 rich:simpleTogglePanel 的样式，使其看起来像一个常见的链接。

[http://livedemo.exadel.com/richfaces-demo/richfaces/simpleTogglePanel.jsf?c=simpleTogglePanel&tab=usage](http://livedemo.exadel.com/richfaces-demo/richfaces/simpleTogglePanel.jsf?c=simpleTogglePanel&tab=usage)

这个页面准确地显示了我想要做什么以及我现在得到什么。我想做一些看起来与每个示例下方的“查看源代码”链接完全相同的事情。我使用的代码与“客户端开关类型”示例中的代码相同：

```
 <rich:simpleTogglePanel switchType="client" label="Client Switch Type" height="90px">
                    The switching between showing and hiding the toggle panel content
                    performs on the client side.
 </rich:simpleTogglePanel> 
```

我的目标是在搜索栏下创建一个“高级搜索”链接。该面板将包含高级搜索内容。（额外的字段）

我正在使用 JSF 1.2 和 Richfaces。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T03:55:47.063

我不确定我是否完全理解你的问题。有 2 个变体可以看到您的问题。

`1`. 使`rich:simpleTogglePanel`as 链接下的内容可点击。为此，您可以尝试以下代码。

`<rich:simpleTogglePanel switchType="client" label="Client Switch Type" height="90px">`

```
<rich:dataGrid var="links" value="#{yourBean.linksList}" columns="6"      
     width="877px">

<h:commandLink actionListener="#{yourBean.someAction}">
</h:commandLink>

</rich:simpleTogglePanel> 
```

`2`. 如果您希望`rich:simpleTogglePanel`标题显示为链接

```
 <rich:simpleTogglePanel switchType="client" label="Client Switch Type" height="90px">
               <f:facet name="header" >
                 <h:panelGroup>
                    <h:outputText value="yourLinkName" styleClass="linkClass">
                    </h:outputText>  
                 </h:panelGroup>
 </rich:simpleTogglePanel>

<style type="text/css">
 .linkClass{
 text-decoration: underline;
 }
</style> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T04:05:42.010

如果您想要一个盒子打开和关闭并轻松设置样式，最好的方法是使用 jQuery 制作它。由于 RichFaces 已经加载了 jQuery，你可以这样做：

```
<a href="#" onclick="jQuery('#content').toggle();return false;">Your link</a>
<div id="content" style="display: none">Your content</div> 
```

当然你可以使用 RichFaces 组件，但是你必须重写许多 CSS 类或者禁用 RichFaces 皮肤，这将禁用每个组件的样式。

**编辑：**`<a4j:loadScript src="resource://jquery.js"/>`如果您没有在视图中使用任何 ajax 组件，则必须强制 RichFaces 加载 jQuery 库。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T10:54:02.410

如果你想让栏消失，你必须覆盖默认的 CSS 并添加更多的。

下面是代码，

```
<rich:simpleTogglePanel switchType="client" label="Client Switch Type" height="90px">

<f:facet name="closeMarker">
                                        <h:panelGroup styleClass="open">
                                            <h:outputText styleClass="yourClass" value="yourText"/>
                                        </h:panelGroup>
                                </f:facet>

</rich:simpleTogglePanel>

<style type="text/css">
.open {
background-color: white;
}
</style> 
```

您将不得不覆盖这些默认 CSS 以实现您的其他影响。Rich-stglpanel、rich-stglpanel-header、rich-stglpnl-marker 等。

详情请参考[RichFaces-SimpleTogglePanel 指南](http://docs.jboss.org/richfaces/latest_3_3_X/en/devguide/html/rich_simpleTogglePanel.html)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-27T11:58:11.793

首先，感谢您的回答！

我要求一种方法来更改 simpleTogglePanel，使其看起来像提到的页面中的查看源链接，但我发现这是错误的方法。

我使用 ah:commandLink 实现了我的目标：

```
<h:commandLink value="Advanced Search" action="#{MyBean.toggleHiddenPanel }" /> 
```

更改我的 bean 中的布尔值并使用渲染属性来显示/隐藏我需要的字段：

```
<h:panelGrid id="hiddenPanel" columns="4" >

                    <h:outputText value="date1:" rendered="#{MyBean.hiddenPanel}" />
                    <rich:calendar value="#{MyBean.date1}" rendered="#{MyBean.hiddenPanel}"
                        locale="US" popup="true" datePattern="d/M/yy HH:mm"
                        cellWidth="24px" cellHeight="22px" style="width:200px" />

                    <h:outputText value="date2:" rendered="#{MyBean.hiddenPanel}" />
                    <rich:calendar value="#{MyBean.date2}" locale="US" rendered="#{MyBean.hiddenPanel}"
                        popup="true" datePattern="d/M/yy HH:mm" cellWidth="24px"
                        cellHeight="22px" style="width:200px" />

                    <br />
                    <h:outputText value="Another field:" rendered="#{MyBean.hiddenPanel}" />

</h:panelGrid> 
```

ps.：我改了变量的名字，因为项目是保密的

# php - 如何使用 PHP cURL 为 POST 请求更改地址栏位置

> ID：13566136
> 
> 赞同：0
> 
> 时间：2012-11-26T13:46:21.980
> 
> 标签：php, curl

我正在使用以下代码使用 cURL 发送 POST 请求。这是完美的工作。我唯一的问题是地址栏中的位置不会自行更新。

发送此请求的网页是 www.somedomain.com/merge.php，但在帖子执行后地址栏仍然显示 www.somedomain.com/merge.php 而不是 www.somedomain.com/preview.php

我试过使用 curl_setopt($c, CURLOPT_FOLLOWLOCATION, 1); 没有运气。

```
$c = curl_init();
curl_setopt($c, CURLOPT_URL, 'www.somedomain.com/preview.php');
curl_setopt($c, CURLOPT_POST, true);
curl_setopt($c, CURLOPT_POSTFIELDS, 'landscape=true');
curl_exec ($c);
curl_close ($c); 
```

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:50:40.560

你误解了发生了什么。涉及三方：

```
client (browser)  <---->   your server  <---->   somedomain.com 
```

客户端向您的服务器发送 HTTP 请求，您的服务器向 somedomain.com 发送 HTTP 请求。您的服务器将收到响应，客户端与它无关。如果要重定向客户端，则需要从服务器向客户端发出适当的 HTTP 响应，告诉它重定向到其他地方。因为客户端正在与您的服务器对话，而不是 somedomain.com。无论您的服务器和 somedomain.com 之间发生什么，都与它无关。

如果您希望客户端直接向 somedomain.com 发送 POST 请求，您需要创建一个 POST 到 somedomain.com 的表单或使用 Javascript 触发等效的东西。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:48:46.227

您不能使用 cURL 来执行此操作，因为请求不是在浏览器中启动的，而是来自 PHP。

如果您希望浏览器更新 URL，那么您应该查看在当前页面中发布 FORM。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T13:49:20.970

当您使用 curl 发出请求时，您正在以编程方式访问 url，这仅发生在服务器端。

这不会更改地址栏中的 url。

如果您想重定向到新网址，请使用

```
header('redirect', 'http://newurl.com'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T13:51:01.670

这是不可能的。您使用 cURL 并从服务器发出请求。但是您可以在客户端更改 URL。

您可以使用

`Header("Location:http://www.somedomain.com/preview.php")` curl_close($c) 之后；

但我认为这不是正确的解决方案。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-01-09T21:40:51.313

这不可能。

这是[PHP Post & Redirect with cURL Same As HTML Form上的同一个问题](https://stackoverflow.com/questions/17148266/php-post-redirect-with-curl-same-as-html-form?answertab=active#tab-top)

尽管该问题已关闭，但您可以阅读有效答案以帮助您澄清问题。

# objective-c - 在另一个视图控制器中标记结果

> ID：13566141
> 
> 赞同：0
> 
> 时间：2012-11-26T13:46:43.127
> 
> 标签：objective-c, ios

早上好家伙，

我有个问题。我有一个进行计算的应用程序。如果我在同一个 ViewController 中插入标签，我会观看所有内容。

如何在另一个视图中插入相同的标签？

这是有计算的视图。

H。

```
#import <UIKit/UIKit.h>

@interface ViewController : UIViewController

@property (strong, nonatomic) IBOutlet UITextField *textField1;
@property (strong, nonatomic) IBOutlet UITextField *textField2;

@property (strong, nonatomic) IBOutlet UIButton *result;

@property (strong, nonatomic) IBOutlet UIDatePicker *data;

@end 
```

M。

```
//
//  ViewController.m
//  IEcigarette
//
//  Created by Federico on 24/11/12.
//  Copyright (c) 2012 Federico. All rights reserved.
//

#import "ViewController.h"
#import "ResultViewController.h"

@interface ViewController ()
@property (strong, nonatomic) NSString * myString;

@property (strong, nonatomic) UILabel * myLabel;
@end

@implementation ViewController

-(IBAction)calculate:(id)sender{

    NSDate *past = _data.date ;
    NSDate *now = [NSDate date];

    NSCalendar *gregorianCalendar = [[NSCalendar alloc]
                                     initWithCalendarIdentifier:NSGregorianCalendar];
    NSUInteger unitFlags = NSDayCalendarUnit;
    NSDateComponents *components = [gregorianCalendar components:unitFlags
                                                        fromDate:past
                                                          toDate:now
                                                        options:0];
    int z = [components day];
    int a = ([_textField1.text intValue]);
    int b = a*([_textField2.text intValue]);

    int r = b * z / 20;

    _myLabel.text = [[NSString alloc] initWithFormat:@"%d", r];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
}

- (BOOL)textFieldShouldReturn:(UILabel *)myLabel {

    [myLabel resignFirstResponder];

    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone) {
        [self performSegueWithIdentifier:@"detail" sender:self];
    }

    return YES;
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender {
    if ([segue.identifier isEqualToString:@"detail"]) {

        ResultViewController* destVC = (ResultViewController*)segue.destinationViewController;

        destVC.myString = self.myLabel.text;
        destVC.navigationItem.title = self.myLabel.text;

    }
}

@end 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:03:35.177

为什么您还尝试将相同的标签插入另一个视图。只需将 label.text （字符串）传递给另一个视图控制器的字符串。然后使用该字符串并在 viewdidload 方法中使用该字符串创建一个新标签。您还可以使用 nsuserdefaults 传递值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:05:49.417

您*可以*在共享和调用中保留对它的引用：

```
[yourLabel removeFromSuperview];
[yourViewController.view addSubview:yourLabel]; 
```

对于您要在其上显示的每个视图控制器。

但是，如果您共享的内容几乎可以用作 UILabel，我建议您为每个视图控制器使用单独的 UILabel 实例，并在视图之间共享 .text 值。您可以在 prepareForSegue 中传递值，将其保存到 NSUserDefaults，将其设置为某个共享对象/单例的属性。

# c++ - 从命令行使用 CMD 中指定的变量或从另一个程序的系统调用调用 c++

> ID：13566142
> 
> 赞同：0
> 
> 时间：2012-11-26T13:46:44.530
> 
> 标签：c++, batch-file

嗨，我对编程比较陌生。

我想创建一个 C++ 程序，当你在 CMD 中调用它时，你可以传递变量。

例如在 cmd

Myprograme.exe 11 32 232 以便在计算中使用这些值。

C++

```
int main(float A, float B, float C){
float sum= A+B+C;
cout << sum;
return 0;
} 
```

我的问题是我不知道你会怎么称呼这个过程，甚至谷歌它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:54:57.787

的标准签名`main`如下：

```
int main(int argc, const char **argv) 
```

`argc`是提供给程序的命令行参数的数量（包括参数编号 0，它是程序的名称）。

`argv`是一个以 nul 结尾的字符串数组，每个字符串都包含适当的命令行参数。`argv[argc]`是一个空指针。

您可以使用这些来解析命令行参数并将它们传递给您的计算。

例如，如果您在命令行上发出以下命令：

```
myprog.exe a bb c 
```

*   `argc`将是 4
*   `argv[0]`将会`"myprog.exe"`
*   `argv[1]`将会`"a"`
*   `argv[2]`将会`"bb"`
*   `argv[3]`将会`"c"`
*   `argv[4]`将是空指针

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:50:26.953

main 方法可以有两个参数：

```
int main(int argc, char** argv)
{
} 
```

`argc`是参数的数量，并且`argv`是一个包含每个参数值的 char* 数组。然后，您可以根据需要将 char* 转换为 float。注意，第一个参数是程序本身的名称。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:51:20.730

你总是有一个主要的功能，比如

```
int main(int argc, char **argv)
{
} 
```

第一个参数是参数的数量，argv 指向作为参数的 argc `char*`。这意味着你得到的是字符数组而不是浮点数，这是完全可以理解的，因为你也可以写

Myprograme.exe ab cde fg

有关如何将 char* 转换为 float 的信息，请参阅[将 char* 转换为 float 或 double](https://stackoverflow.com/questions/10605653/converting-char-to-float-or-double)。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T14:56:26.113

回答你的第一个问题。
这被称为`command line argumants`。
您可以使用此关键字搜索它。

这就是你试图做的。首先像这样定义主函数。

```
int main(int argc, char *argv[]) {
float sum,a,b,c;
a=atof(argv[0]);
b=atof(argv[1]);
c=atof(argv[2]);
sum=a+b+c;
cout<<sum;
} 
```

现在您可以传递`Myprograme.exe 11 32 232`将返回 275的参数

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-30T00:35:59.520

@danial weaber 这是一个很好的例子，但它并没有达到正确的总和。那是因为它没有找到 c。

你的例子应该是：

```
 #include <iostream>
    using namespace std;

    int main(int argc, char** argv) 
    {

        float sum,a,b,c;

        sum=atof(argv[0]);
        a=atof(argv[1]);
        b=atof(argv[2]);
        c=atof(argv[3]);

        sum=a+b+c;

        cout<<sum;
    } 
```

只是想指出这一点，这样当他们使用... Myprograme.exe 11 32 232 运行它时，它将返回 275。

此外，某些 ide 可能无法正确运行您的代码。很多时候使用notepadd++然后在命令行中编译你的代码，你可能会得到正确的结果。祝你好运

# vba - 在幻灯片中使用 VBA 添加日期时间字段

> ID：13566143
> 
> 赞同：1
> 
> 时间：2012-11-26T13:46:46.607
> 
> 标签：vba, powerpoint

我想通过宏向我的演示文稿/幻灯片添加一个自动显示当前日期的字段。

```
 Shape shape = [Find a text shape to edit]
 shape.TextFrame.TextRange.Text = "Some Text  | " + [Field showing Current date] 
```

我不想插入包含当前日期的文本：

```
 Shape shape = [Find a text shape to edit]
 shape.TextFrame.TextRange.Text = "Some Text  | " + DateTime.Now 
```

正如我所描述的，生成的文本形状应该包含一些常量文本 + 一个显示当前日期的字段。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T21:47:17.953

这将在您的文本框中插入一个时间/日期字段：

```
Dim oSh As Shape
Set oSh = ActiveWindow.Selection.ShapeRange(1)

With oSh.TextFrame.TextRange
    .Text = "Some text | "
    .InsertDateTime ppDateTimeHmm, True
End With 
```

# artifactory - 人工 Web 界面未正确显示

> ID：13566148
> 
> 赞同：0
> 
> 时间：2012-11-26T13:47:00.053
> 
> 标签：artifactory

我在 linux 服务器上安装了 artifactory (2.6.5)。启动它，现在我想通过网络界面配置一些东西。但是网络界面看起来不应该。安装后我唯一编辑的是 jetty.xml 文件中的默认端口。

不知道这种外观的原因（见截图）是什么。所以任何帮助表示赞赏。

![截图](../Images/73187b65790ce506b6d51dc90afbdbd5.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:46:32.753

有几件事可能会导致这种情况：

1.  剩余的浏览器缓存（很可能）。
2.  被浏览器阻止的 UI 资源（不太可能）。

第一种情况可以通过清除浏览器缓存并重新加载页面轻松解决。

第二种情况可能需要您调查哪些资源被阻止（使用浏览器的控制台）并调整安全设置/规则。

# javascript - JavaScript Internals 101：提升变量和函数

> ID：13566154
> 
> 赞同：1
> 
> 时间：2012-11-26T13:47:20.967
> 
> 标签：javascript, hoisting

考虑以下示例：

```
var company = 'Apple',
    log = console.log;

function f1() {
    log(company);
    var company = 'Twilio';
    log(company)
}

function f2() {
    log(company());

    function company() {
        return 'Zynga';
    }
}

function f3() {
    log(company());
    var company = function() { return 'RIM'; };
}

log(company);
log('---');
f1();
log('---');   
f2();
log('---');
f3(); 
```

萤火虫的输出是：

```
"Apple"
---
undefined
"Twilio"
---
"Zynga"
---
TypeError: company is not a function 
```

那么为什么`f3`在其他人工作正常的情况下提升给我错误呢？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:59:03.610

让我们重写您的`f3`函数以显示变量提升后的样子：

```
function f3() {
    log(company());
    var company = function() { return 'RIM'; };
} 
```

变成：

```
function f3() {
    var company; // declaration hoisted

    log(company());
    company = function() { return 'RIM'; };
} 
```

现在您可以看到您正在尝试执行未定义的变量，而不是函数（因此出现“不是函数”错误）。

请注意，这与 的输出不同，`f2`因为函数声明是作为一个单元提升的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:57:08.213

变量被提升，但设置它不是。

在调用after 之前，不会设置`company`in的值。您可以在 中看到相同的行为。`f3``log(company())``f1`

# android - 是否有恢复（出厂配置）Android 设备的标准方法？

> ID：13566157
> 
> 赞同：0
> 
> 时间：2012-11-26T13:47:36.723
> 
> 标签：android, recovery

我很快就会开始“玩”安卓平板电脑的内核，我想先检查恢复过程，以便能够在内核处理不当的情况下恢复出厂配置的平板电脑。

所以，我想知道是否有恢复安卓设备的标准方法，或者每个安卓设备都有自己的恢复过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:53:19.997

设置 -> 备份和重置 -> 恢复出厂数据

我认为这相当于擦除 /data 和 /cache 分区。

# objective-c - 在 iOS 6 上触摸标注时会触发标注下的注释

> ID：13566158
> 
> 赞同：1
> 
> 时间：2012-11-26T13:47:36.613
> 
> 标签：objective-c, ios, mapkit

我在使用这些注释时遇到问题...

首先，在 iOS 6 设备上打开应用程序时，图钉将显示在标注顶部，可以通过以下方式修复：

```
- (void)didMoveToSuperview {
  [super didMoveToSuperview];
  [self.superview bringSubviewToFront:self];
} 
```

来自：[自定义注释视图在 iOS6 上不起作用](https://stackoverflow.com/questions/12605249/custom-annotation-view-do-not-work-on-ios6)

现在，当我点击标注时，下方的引脚会触发关闭当前标注并打开新标注。

我已经尝试过覆盖：

```
touchesBegan:, touchesMoved: and touchesEnded 
```

并且不在其中调用 super ，以防止调用传播到其后面的层-没有任何运气...

有什么想法吗？它在 iOS 5 上运行良好...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T07:39:28.770

在添加注释之前尝试设置您的代表 - 如果您还没有

# javascript - setInterval 和 Internet Explorer

> ID：13566159
> 
> 赞同：5
> 
> 时间：2012-11-26T13:47:38.557
> 
> 标签：javascript, jquery

我已经上下搜索，但尚未找到允许 setInterval 在任何版本的 Internet Explorer 中工作的东西。

下面是我现在正在使用的代码......

```
<script type="text/javascript">

$(document).ready(function () {
    $('#varRefresh').load('reload.php');

    window.setInterval("refreshVar();", 5000); //**** every 5 seconds
});

function refreshVar() {
    $('#varRefresh').load('reload.php');
}
</script>

<div id="varRefresh">
</div> 
```

谁能指出我正确的方向，以便我可以让它在 IE 中工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-28T10:39:40.773

您尝试加载的页面可能只是被缓存了。

您可以强制 Internet Explorer 不缓存页面，如下所示： [阻止 Internet Explorer 8 中的页面缓存](https://stackoverflow.com/a/11082256/1419007)。

或者，您可以简单地将时间戳附加到 URL；因为该 URL 对 IE 来说是新的，所以它总是会加载最新版本。

### 例子：

```
$(document).ready(function () {
    $('#varRefresh').load('reload.php?'+new Date().getTime());

    window.setInterval(refreshVar, 5000); //**** every 5 seconds
});

function refreshVar() {
    $('#varRefresh').load('reload.php?'+new Date().getTime());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-05-31T05:28:23.153

[Working Fiddle](http://jsfiddle.net/BhT8M/) tested on Chrome, FireFox, Safari, Opera, Internet Explorer and android browser.

```
<script type="text/javascript">

$(document).ready(function () {
    $('#varRefresh').load('reload.php');
    refreshVar();
});

function refreshVar() {
    var refresh = setInterval(function(){
    $('#varRefresh').load('reload.php');
    }, 5000);
}
</script>

<div id="varRefresh">
</div> 
```

Hope it helps!

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T13:50:55.680

尝试替换此行：

```
window.setInterval("refreshVar();", 5000);   //**** every 5 seconds 
```

有了这个：

```
window.setInterval(refreshVar, 5000);   //**** every 5 seconds 
```

（使第一个参数成为函数引用而不是字符串）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T13:51:15.193

不要将函数的名称作为字符串文字传递，而是尝试将函数作为引用传递，如下所示：

```
window.setInterval(refreshVar, 5000); 
```

* * *

## 回答 #5

> 赞同：-2
> 
> 时间：2012-11-26T13:52:13.290

尝试改用 setTimeout()。看看这个资源： [http ://www.w3schools.com/jsref/met_win_settimeout.asp](http://www.w3schools.com/jsref/met_win_settimeout.asp)

# excel - Excel 宏日期格式在文件打开时更改

> ID：13566163
> 
> 赞同：4
> 
> 时间：2012-11-26T13:47:48.000
> 
> 标签：excel, vba

我有一个奇怪的问题，每当我手动将我的 csv 文件打开到 excel 中时，日期在英国语言环境中的格式正确显示 - dd/mm/yyyy。但是，我有一个宏可以打开我的 csv 文件，我得到一些日期格式为 mm/dd/yyyy，而其他日期格式为 dd/mm/yyyy。该模式似乎是不正确的模式似乎是当 是当天的一位数时，因此 05/11/2012 现在显示为 11/05/2012，但 15/11/2012 与 csv 完全相同文件。

任何帮助都会很棒。

谢谢贾尔兹

```
Sub openfile()
'
' openfile Macro
'

   Workbooks.Open filename:= _
    "c:\myfile.csv"
   Range("A1:J46").Select
   Selection.Copy
End Sub 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T20:34:43.877

VBA 使用美国的默认本地（即使您在不同的语言环境中），所有格式都设置为它（日期分隔符、小数分隔符）。您可以使用 local 属性绕过它：

```
 Call Workbooks.Open(Filename:="c:\myfile.csv", local:=True) 
```

# javascript - 如何使用 javascript 检测文本大小和位置？

> ID：13566169
> 
> 赞同：2
> 
> 时间：2012-11-26T13:48:05.037
> 
> 标签：javascript, html, css, size

![在此处输入图像描述](../Images/63cd0d7d80a70c2d890ba2cc9be0c1c6.png)

这是网站上的一个简单文本，我想知道`My First Heading`多少像素以及在哪个位置的长度和高度......如何通过javascript检测它？谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:53:21.157

```
var header = document.getElementById("yourHeadingId");
var w = header.offsetWidth;  //Width
var h = header.offsetHeight; //Height
var x = header.offsetLeft;   //Top left corner x position.
var y = header.offsetTop;    //Top left corner y position. 
```

要更改标题的内容：

```
while(header.firstChild) {
    header.removeChild(header.firstChild);
}
header.appendChild(document.createTextNode("some new content")); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:51:52.920

`element.offsetWidth`/`element.offsetHeight`用于元素尺寸。 `element.offsetTop`/`element.offsetLeft`用于左上角位置（相对于它的[offsetParent](https://developer.mozilla.org/en-US/docs/DOM/element.offsetParent)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:52:53.183

您可以使用`clientHeight`和`clientWidth`来计算这些值。像

```
document.getElementById("DOMID").clientWidth 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T13:56:44.887

您可以使用 display: inline style... 创建一个临时 h1 元素，然后获取 offsetWidth。试试这个：

```
<script type="text/javascript">
    var domId = 'dom-id' + Math.random();
    var temp = document.createElement('div');
    var body = document.getElementsByTagName('body')[0];
    body.appendChild(temp);
    var text = document.getElementsByTagName('h1')[0].innerHTML;
    var width = null;
    var tempH1 = null;

    temp.innerHTML = '<h1 style="display: inline" id="' + domId + '">' + text + '</h1>';

    tempH1 = document.getElementById(domId);
    width = tempH1.offsetWidth;
    body.removeChild(temp);

    alert(width);
</script> 
```

# asp.net-mvc - History.js、书签和 asp.net mvc

> ID：13566182
> 
> 赞同：1
> 
> 时间：2012-11-26T13:48:57.903
> 
> 标签：asp.net-mvc, history.js, single-page-application

使用历史 js 并为单页应用程序添加书签时。使用这些不存在的页面时如何使索引页面返回（因为我只有一个“真实”页面，即索引页面）？一种选择是制作许多控制器，它们都返回索引页面。但这似乎是一个糟糕的解决方案。我想要的是在我写的任何内容上返回索引页面（网络浏览器 url 保持不变）。

或者我应该如何解决这个问题？

# validation - Codeigniter 表单验证 $_POST 嵌套字段

> ID：13566183
> 
> 赞同：1
> 
> 时间：2012-11-26T13:49:08.713
> 
> 标签：validation, codeigniter

我需要通过 AJAX 调用在 codeigniter 中设置表单验证规则该调用生成一个 $_POST 数组，我在其中嵌套来自不同表单 (1:N) 的数据，然后我以这种方式设置验证规则：

```
$this->form_validation->set_rules($field, $label , $rules); 
```

并且 $_POST 数组将与此类似：

```
field1: value1
field2: value2
field3: value3
field4: value4
field5: value5
field6: value6      
id: 86
operation: "add" 
```

显然，某些表单可能有冲突的名称，这种解决方案是不可靠的。

例如

```
field1:value1
field1:value2 
```

名字是动态给出的，所以我不能改变它们。

我选择在 $_POST 数组中嵌套值：

```
form: 
    form1: 
           field1: value1
           field2: value2
    form2: 
           field1: value3
           field2: value4
    form3: 
           field1: value5
           field2: value6
id: 86
operation: "add" 
```

但现在 form_validation 坏了。

```
 $this->form_validation->set_rules('form[form1['.fieldN .']', $label   , $rules); 
```

没有按预期工作：我无法验证。查看 Form_validation.php 库，set_rules 第一个参数是一个字符串，它的值可以是一个数组，但我不能更深入地嵌套例如数组数组。有办法做到这一点？任何提示？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:51:28.787

您可以查看此链接以[参考](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html)如何为所有字段使用单个数组设置规则。

您可以像这样在嵌套数组中为同一数组中的不同表单设置规则。

```
$config['login_form'] = array (
                        array 
                        (
                            'key' => 'email', 
                            'value' => 'Email',
                            'rule' => 'trim|required|valid_email|xss_clean'
                        ),
                        array
                        (
                            'key' => 'passwd', 
                            'value' => 'Password',
                            'rule' => 'trim|required|alpha_numeric|xss_clean'
                        )
                      );
 $config['login_form_error_code_1'] = 'The email or password you entered is incorrect';                       

 $config['add_user_form'] = array(
                            array(
                                    'key' => 'user_email',
                                    'value' => ' User Email',
                                    'rule' => 'trim|required|valid_email|callback_duplicate_user_email_check|xss_clean'
                                    ),
                            array(
                                    'key' => 'user_name',
                                    'value' => 'User Name',
                                    'rule' => 'trim|required|xss_clean'
                                     ),
                            array(
                                    'key' => 'user_phone',
                                    'value'=> 'Mobile',
                                    'rule' => 'trim|required|integer|min_length[10]|max_length[10]|xss_clean'
                                    ),
                            array
                            (
                                    'key' => 'user_password',
                                    'value' => 'Password',
                                    'rule' => 'trim|required|min_length[8]|alpha_numeric|xss_clean'
                            )

    ); 
```

现在，您在同一数组 $config 中针对不同形式的所有规则。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T14:01:23.053

您可以像这样将数组作为字段名称传递

```
$this->form_validation->set_rules('options[]', 'Options', 'required'); 
```

请参阅在 Codeigniter 的验证类中使用数组的[详细文档](http://ellislab.com/codeigniter/user-guide/libraries/form_validation.html#arraysasfields)。

# knockout.js - knockout.js 需要将 style:width 绑定到计算的

> ID：13566187
> 
> 赞同：1
> 
> 时间：2012-11-26T13:49:27.977
> 
> 标签：knockout.js

简而言之，这就是我需要完成的事情：'根据计算值的变化动态改变样式'

我有一个可观察的数组，其初始集为 3。

我确实使用了一个模板，数组中的每个元素都进入了一个单独的 div（我在 css 中将它们浮动到左侧）

```
<script type="text/html" id="feedsTemplate">
<div style="float:left;" data-bind="style: { width: $root.CurrentColumnWidth()+'px'}">
    <strong data-bind="text: SearchTerm"></strong>
</div>
</script> 
```

这是我的视图模型：

```
var viewModel = {
    Feeds: ko.observableArray([
        new Feed("Boston"),
        new Feed("NewYork"),
        new Feed("Chicago", ),
    ]),

    GetLatestFeeds: function () { getLatestFeeds(); },
    FeedsCounter: ko.observable(3),
    CurrentColumnWidth:  ko.computed (function()
    {           
        return ((GetCurrentPageWidth() / this.FeedsCounter));
    },this)
}; 
```

根据该数组中的元素数量，我计算将放置每个元素的 div 的宽度。（我试过不使用counter，直接引用viewModel.Feeds.length，但是好像observableArray中没有length）

我遇到的问题是，在 Feeds 中的元素数量增加后，由于服务器的更新，div 宽度没有重新计算。这是更新功能：

函数 getLatestFeeds() {

```
 $.getJSON('/Feed/GetUpdatedFeeds', function (data)
    {
        $.each(data, function ()
        {
            viewModel.Feeds.push(new Feed(this.SearchTerm, this.FeedItems));
            viewModel.FeedsCounter = viewModel.FeedsCounter + 1;
        });
    });
} 
```

据我了解，来自 www.knockoutjs.com：“......并且每当 firstName 或 lastName 更改时它们都会更新（您的评估器函数将在其任何依赖项发生更改时调用一次，并且您返回的任何值都将被传递到观察者，例如 UI 元素或其他计算的 observables）。”

每当 FeedsCounter 发生变化时，计算的 var 也会更新，并且因为我将它绑定到 div 的 css，宽度也应该发生变化。这不会发生。

将不胜感激任何帮助/建议/指针。

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T13:58:40.740

当你从 observable 获得价值时，你应该使用`()`它，因为它是一个函数。设置值相同：

```
var viewModel = {
    Feeds: ko.observableArray([
        new Feed("Boston"),
        new Feed("NewYork"),
        new Feed("Chicago", ),
    ]),

    GetLatestFeeds: function () { getLatestFeeds(); },
    FeedsCounter: ko.observable(3),
    CurrentColumnWidth:  ko.computed (function()
    {           
        return ((GetCurrentPageWidth() / this.FeedsCounter()));
    },this)
};

function getLatestFeeds() {

    $.getJSON('/Feed/GetUpdatedFeeds', function (data)
    {
        $.each(data, function ()
        {
            viewModel.Feeds.push(new Feed(this.SearchTerm, this.FeedItems));
            viewModel.FeedsCounter(viewModel.FeedsCounter() + 1);
        });
    });
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T13:55:57.477

```
viewModel.FeedsCounter = viewModel.FeedsCounter + 1; 
```

应该

```
viewModel.FeedsCounter(viewModel.FeedsCounter() + 1); 
```

**注意：** FeedsCounter 变量是对*observable*的引用；这基本上是一个函数，而不是对 int 的引用。

见[http://knockoutjs.com/documentation/observables.html](http://knockoutjs.com/documentation/observables.html)

# android - 无法在清单中设置元数据

> ID：13566196
> 
> 赞同：0
> 
> 时间：2012-11-26T13:49:46.640
> 
> 标签：android

我试图将一个字符串放入清单并检索它。不幸的是，它不起作用。它不打印任何东西而不是“hieutot”。如何解决？

```
@Override
public void onCreate(final Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_main);

    Log.d("HieuND", "TESSSSSSSSSSSS");

    setApplicationId(this, "hieutot");
    final String s = getMetadataApplicationId(this);
    Log.d("HieuND", s);

}

public static void setApplicationId(final Context context, final String applicationId) {
    try {
        final ApplicationInfo ai = context.getPackageManager().getApplicationInfo(
                context.getPackageName(), PackageManager.GET_META_DATA);
        if (ai.metaData != null) {
            ai.metaData.putString("test", applicationId);
        }
    } catch (final PackageManager.NameNotFoundException e) {
        throw new RuntimeException(e);
    }
}

public static String getMetadataApplicationId(final Context context) {
    try {
        final ApplicationInfo ai = context.getPackageManager().getApplicationInfo(
                context.getPackageName(), PackageManager.GET_META_DATA);
        if (ai.metaData != null) {
            final String s = ai.metaData.getString("test");
            Log.d("HieuND", "zz = " + s);
            return s;
        }
    } catch (final PackageManager.NameNotFoundException e) {
        // if we can't find it in the manifest, just return null
    }

    return null;
} 
```

显现

```
<application
    android:icon="@drawable/ic_launcher"
    android:label="@string/app_name"
    android:theme="@style/AppTheme" >
    <activity
        android:name=".MainActivity"
        android:label="@string/title_activity_main" >
        <intent-filter>
            <action android:name="android.intent.action.MAIN" />
            <category android:name="android.intent.category.LAUNCHER" />
        </intent-filter>
    </activity>

    <meta-data android:name="test" android:value=""/>
</application> 
```

# ruby-on-rails - Ruby 的 `File.exist?` ThreadError

> ID：13566198
> 
> 赞同：2
> 
> 时间：2012-11-26T13:49:51.083
> 
> 标签：ruby-on-rails, rack, ruby-on-rails-2, ruby-1.8.7

`File.exist?`在中间件中使用 Ruby 的方法时遇到错误。我不知道为什么。

这是背景。我正在改进一些旧的 web 应用程序，它托管大约 100GB 的照片并且还在增长。我需要在我的计算机上复制生产环境，但我不想下载所有这些文件。如果应用程序可以检查给定文件是否存在于我的文件系统中并提供它或重定向到生产服务器，那就太好了。

我以为我可以将简单的机架应用程序作为中间件：

```
require 'rack/utils'

class FetchMissingPicturesMiddleware
  def initialize(app)
    @app = app
  end

  def call(env)
    if env["PATH_INFO"].starts_with? "/system/attachments/" && !File.exist?(Rails.root.join('public').join(env["PATH_INFO"][1..-1]))
      [307, { "Location" => "http://production.example.com" + env["PATH_INFO"] }, ""]
    else
      @app.call(env)
    end
  end
end 
```

但是，会引发以下错误（并非总是如此，对于某些图片它只是有效）：

```
[2012-11-26 14:28:12] ERROR ThreadError: thread 0x10aed55e8 tried to join itself
    /Users/skale/.rvm/gems/ruby-1.8.7-p371/gems/actionpack-2.3.9/lib/action_controller/reloader.rb:31:in `lock'
    /Users/skale/.rvm/gems/ruby-1.8.7-p371/gems/actionpack-2.3.9/lib/action_controller/reloader.rb:31:in `run'
    /Users/skale/.rvm/gems/ruby-1.8.7-p371/gems/actionpack-2.3.9/lib/action_controller/dispatcher.rb:108:in `call'
    /Users/skale/.rvm/gems/ruby-1.8.7-p371/gems/rails-2.3.9/lib/rails/rack/static.rb:31:in `call'
    /Users/skale/.rvm/gems/ruby-1.8.7-p371/gems/rack-1.1.3/lib/rack/urlmap.rb:47:in `call'
    /Users/skale/.rvm/gems/ruby-1.8.7-p371/gems/rack-1.1.3/lib/rack/urlmap.rb:41:in `each'
    /Users/skale/.rvm/gems/ruby-1.8.7-p371/gems/rack-1.1.3/lib/rack/urlmap.rb:41:in `call'
    /Users/skale/.rvm/gems/ruby-1.8.7-p371/gems/rails-2.3.9/lib/rails/rack/log_tailer.rb:17:in `call'
    /Users/skale/.rvm/gems/ruby-1.8.7-p371/gems/rack-1.1.3/lib/rack/content_length.rb:13:in `call'
    /Users/skale/.rvm/gems/ruby-1.8.7-p371/gems/rack-1.1.3/lib/rack/handler/webrick.rb:48:in `service'
    /Users/skale/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/httpserver.rb:104:in `service'
    /Users/skale/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/httpserver.rb:65:in `run'
    /Users/skale/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/server.rb:173:in `start_thread'
    /Users/skale/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/server.rb:162:in `start'
    /Users/skale/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/server.rb:162:in `start_thread'
    /Users/skale/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/server.rb:95:in `start'
    /Users/skale/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/server.rb:92:in `each'
    /Users/skale/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/server.rb:92:in `start'
    /Users/skale/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/server.rb:23:in `start'
    /Users/skale/.rvm/rubies/ruby-1.8.7-p371/lib/ruby/1.8/webrick/server.rb:82:in `start'
    /Users/skale/.rvm/gems/ruby-1.8.7-p371/gems/rack-1.1.3/lib/rack/handler/webrick.rb:14:in `run'
    /Users/skale/.rvm/gems/ruby-1.8.7-p371/gems/rails-2.3.9/lib/commands/server.rb:111
    script/server:6:in `require'
    script/server:6 
```

我对这个问题感到惊讶，因为它在由`Rack::Lock`. 之前移动这个中间件`Rack::Lock`没有帮助。删除`File.exist?`错误后消失了。这是 Ruby 1.8.7，在 Rails 2.3.9 上有最新的 (1.8.24) ruby​​gems。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T16:23:15.997

实际上，问题有点不同。响应数组的最后一个元素也应该是一个数组。

错误的：

```
[307, { "Location" => "http://production.example.com" + env["PATH_INFO"] }, ""] 
```

好的：

```
[307, { "Location" => "http://production.example.com" + env["PATH_INFO"] }, []] 
```

# python - 如何使用 pip 从 git 子目录安装？

> ID：13566200
> 
> 赞同：126
> 
> 时间：2012-11-26T13:49:53.390
> 
> 标签：python, git, pip

我有一个包含许多文件夹的 git 存储库，其中一个是可通过 pip 安装的 python 模块，如下所示：

```
repo.git/
repo.git/folder1/
repo.git/folder2/
repo.git/mymodule/
repo.git/mymodule/__init__.py
repo.git/mymodule/setup.py
repo.git/mymodule/... 
```

现在我必须执行以下操作才能安装：

```
git clone http://server/repo.git
cd repo
pip install mymodule
cd ..
rm -rf repo 
```

是否可以直接使用 pip 安装模块而无需显式克隆？

我试过：

```
pip install git+https://server/repo.git/mymodule/
pip install git+https://server/repo.git:mymodule/ 
```

但我得到：

```
IOError: [Errno 2] No such file or directory: '/tmp/pip-88tlLm-build/setup.py' 
```

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2013-10-22T11:33:43.043

有一个关于此功能的[拉取请求](https://github.com/pypa/pip/pull/1215)，它似乎已在一个月前合并到开发分支。语法[如下](https://github.com/pnasrat/pip/commit/abf27b5bd207024b35885fd1fddd7803b488a3d4)：

```
pip install -e git+https://git.repo/some_repo.git#egg=version_subpkg&subdirectory=repo # install a python package from a repo subdirectory 
```

我们可能需要等待一段时间，直到它被合并到 master 并被分发。

**更新**：现在可以在[https://pip.pypa.io/en/stable/cli/pip_install/#vcs-support](https://pip.pypa.io/en/stable/cli/pip_install/#vcs-support)获得并记录如下：

> 对于 setup.py 不在项目根目录中的项目，使用“子目录”组件。“子目录”组件的值应该是从项目根目录开始到 setup.py 所在位置的路径。
> 
> 因此，如果您的存储库布局是：
> 
> ```
> - pkg_dir/
>   - setup.py  # setup.py for package ``pkg``
>   - some_module.py
> - other_dir/
>   - some_file
> - some_other_file 
> ```
> 
> 你需要使用
> 
> ```
> pip install -e vcs+protocol://repo_url/#egg=pkg&subdirectory=pkg_dir 
> ```

注意：在 Windows 上，您必须将 URL 放在双引号中，否则您将收到错误消息“'subdirectory' 无法识别为内部或外部命令”。例如，使用：

> ```
> pip install -e "vcs+protocol://repo_url#egg=pkg&subdirectory=pkg_dir" 
> ```

* * *

## 回答 #2

> 赞同：40
> 
> 时间：2018-06-19T14:27:04.030

[正确答案下的评论之一](https://stackoverflow.com/questions/13566200/how-can-i-install-from-a-git-subdirectory-with-pip/50930840#comment42223717_19516714)已经说明了这一点，但只是为了强调这个问题：从 Linux 命令行执行此操作时，您**必须**转义-`&`字符，因为 & 告诉命令行在后台运行命令：

```
git+https://git.repo/some_repo.git#egg=version_subpkg\&subdirectory=repo 
```

注意＆符号前的反斜杠。转义行为可能取决于 Linux 发行版；我不是专家。
如果您忽略这一点，您可能会遇到如下神秘错误：

```
bash: (...) command not found 
```

# acl - 我可以修改 vagrant 中共享文件夹的所有权吗？

> ID：13566201
> 
> 赞同：38
> 
> 时间：2012-11-26T13:49:55.823
> 
> 标签：acl, chef-infra, vagrant

我使用*vagrant*和*chef*在虚拟机中开发自己的博客。为了方便访问 wordpress 文件夹，我创建了一个共享文件夹。

基本上 wordpress 文件夹在我的主机上，并作为*共享文件夹*安装在 VM 中的 /var/www/wordpress 中。配置类似于：

```
config.vm.share_folder "foo", "/guest/path", "/host/path" 
```

`vagrant:vagrant`我的问题是，即使我在主机上更改它，我的 VM 中的所有权也始终存在。VM 中的所有权更改被忽略。

我不能`chown`用来将上传目录的所有权设置为`www-data:www-data`.

可以使用`chmod`并将访问限制更改为`777`，但这是一个非常丑陋的 hack。

这是我真正想要的。这可能吗？：

*   开发：从我的主机访问共享文件夹。
*   访问限制：在 VM 上，所有文件和文件夹都应具有适当且安全的所有权和访问限制。

* * *

## 回答 #1

> 赞同：39
> 
> 时间：2012-11-26T16:39:01.067

正如@StephenKing 建议的那样，您可以更改整个目录的选项。

相关功能没有记录，但[来源](http://rubydoc.info/gems/vagrant/Vagrant/Config/VMConfig:share_folder)告诉我们：

```
# File 'lib/vagrant/config/vm.rb', line 53

def share_folder(name, guestpath, hostpath, opts=nil)
  @shared_folders[name] = {
    :guestpath => guestpath.to_s,
    :hostpath => hostpath.to_s,
    :create => false,
    :owner => nil,
    :group => nil,
    :nfs   => false,
    :transient => false,
    :extra => nil
  }.merge(opts || {})
end 
```

基本上，您可以为整个文件夹设置组、所有者和 acl，这比在主机上将所有内容设置为可写的要好得多。我还没有找到任何方法来更改嵌套目录的所有权。

这是一个快速修复：

```
config.vm.share_folder "v-wordpress", "/var/www/wordpress", "/host/path", :owner => "www-data", :group => "www-data" 
```

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-10-31T12:16:40.190

@john-syrinek

在 1.2+

```
config.vm.synced_folder "src/", "/srv/website",
  owner: "root", group: "root" 
```

[http://docs.vagrantup.com/v2/synced-folders/basic_usage.html](http://docs.vagrantup.com/v2/synced-folders/basic_usage.html)

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-11-26T15:55:06.903

您可以允许更改来宾内部的所有权：

```
config.vm.share_folder "foo", "/guest/path", "/host/path", {:extra => 'dmode=777,fmode=777'} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-03-05T17:23:07.503

跟进@StephenKing 和@aycokoster 很棒的技巧，我有一个用于以只读方式挂载另一个目录的用例。

我添加了

```
config.vm.share_folder "foo", "/guest/path", "/host/path", :extra => 'ro' 
```

和

```
# discard exit status because chown `id -u vagrant`:`id -g vagrant` /host/path is okay

vagrant up || true 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-01-23T16:46:16.730

正如其他答案所指出的那样，您可能应该使用`owner`and`group`配置选项设置正确的所有者和组。

但是，有时这不起作用（例如，当目标用户仅在稍后在配置期间创建时）。在这些情况下，您可以重新挂载共享：

```
sudo mount -t vboxsf -o uid=`id -u www-data`,gid=`id -g www-data` /path/to/share /path/to/share 
```

# cocoa - 编程启动 NSSlider 拖动

> ID：13566202
> 
> 赞同：1
> 
> 时间：2012-11-26T13:50:06.320
> 
> 标签：cocoa, nsslider

我想以编程方式启动滑块操作。`NSTextView`因此，在显示滑块的 a 中按下某些文本也会自动`mousedown`在滑块上启动事件，因此您可以立即拖动而不是按两次。我应该采取什么方法？我应该侦听全局鼠标事件然后手动更新滑块位置，还是可以以某种方式模仿系统`mouseDown`/`mouseMoved`调用`NSSlider`？

# ios - 如何将 UI 外观定制与 View Controller 分开？

> ID：13566203
> 
> 赞同：0
> 
> 时间：2012-11-26T13:50:05.653
> 
> 标签：ios, model-view-controller

在 HTML + CSS 中，如果我想创建三个外观相同的按钮，我可以在 div 中添加一个类，并在 CSS 中定义外观。这样当我想再次更新外观时，我只能更新CSS。

在 iOS 中，我通常在 View Controller 中初始化并定义 UI Control 的外观。如何将 UI 外观定制与 View Controller 分开？有没有关于它的最佳实践、设计模式或框架？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:31:23.853

我一直在`initialize`应用程序委托的方法中进行所有 UIAppearance 自定义。你可以使用`appearanceWhenContainedIn:`方法来做一个 div 和 CSS 的等价物。

```
[[UIBarButtonItem appearanceWhenContainedIn:[UINavigationBar class], 
     [UIPopoverController class], nil] setTintColor:myPopoverNavBarColor]; 
```

# c++ - 为什么 C++ 中的这个复制构造函数不能编译？

> ID：13566206
> 
> 赞同：0
> 
> 时间：2012-11-26T13:50:13.490
> 
> 标签：c++, constructor, compilation, copy

我是复制构造函数的新手，所以也许我只是不知道它们是如何工作的，但我不明白为什么这不起作用。以下是构造函数的实现：

```
Heap::Heap(void){ // New empty Heap with default capacity.
   h_capacity = 10;
   A = new int[h_capacity];
   h_size = 0;
}

Heap::Heap(int c){ // New empty Heap with capacity c.
   A = new int[c];
   h_capacity = c;
   h_size = 0;
}

Heap::Heap(int * B, int s, int c){ // New Heap with capacity c containing first s elements of B.
   A = new int[c];
   h_capacity = c;

   A = new int[h_capacity];

   for (int i = 0; i < s; i++){
      (A[i]) = B[i];
   }

   h_size = s;
}

Heap::Heap( const Heap & H ){ // Copy constructor.
   h_capicity = H->h_capicity;
   h_size = H->h_size;

   A = new int[h_capicity];

   for (int i = 0; i < h_size; i++){
      (A[i]) = H->A[i];
   } 
```

这是头文件：

```
#include <iostream>
using namespace std;

class Heap{

public:
      // Constructors and Destructor
      Heap();  // New empty Heap with default capacity.
      Heap(int c); // New empty Heap with capacity c.
      Heap(int * B, int s, int c); // New Heap with capacity c containing first s elements from B.
      Heap( const Heap & H ); // Copy constructor.
      ~Heap(); // Destructor.

      // Size and Capacity
      bool empty() {return h_size == 0;}; // True iff Heap is empty.
      int size(){ return h_size ;}; // Current size of Heap.
      int capacity(){ return h_capacity ;}; // Current capacity.

      // Operators
      Heap operator+( const Heap & H ) const; // New Heap with combined contents and capacity of operands.

      // Modifiers
      void insert(int x); // Insert element x.
      int extract_min(); // Remove and return the minimum element.

      // Display
      void display(); // Print a string representation of the heap contents to standard out.

private:
      int* A ; // Array containing heap contents.
      int  h_capacity ; // Max number of elements (= size of A).
      int h_size ; // Current number of elements.

      void trickle_up(int i);// Repairs ordering invariant after changing root.
      void trickle_down(int i);// Repairs ordering invariant after adding a leaf.
      void make_heap();// Restores ordering invariant to entier contents.
}; 
```

但是当我编译时，我得到：

```
heap.cpp: In copy constructor ‘Heap::Heap(const Heap&)’:
heap.cpp:34: error: ‘h_capicity’ was not declared in this scope 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T13:51:28.420

你拼错`h_capacity`了`h_capicity`。

此外，正如其他人指出的那样，您需要修复`->`. 编译器会在适当的时候抱怨这一点。:)

PS不要忘记定义赋值运算符。

`Heap(int c);`PPS 标记为可能是有意义的`explicit`，以防止从`int`到的不需要的隐式转换`Heap`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:53:48.173

```
h_capicity = H->h_capicity; 
```

容量拼写错误

```
int  h_capacity 
```

此外，当您访问 H（您作为指针复制的堆对象）时，您将收到一个错误，它是一个引用，因此它应该是：

```
h_capacity = H.h_capacity; 
```

寻找更多使用`->`而不是的问题`.`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T13:52:30.440

你声明了

```
int  h_capacity ; // Max number of elements (= size of A). 
```

你正在使用

```
h_capicity = H->h_capicity; 
```

# css - 在 JavaFX CSS 文件中声明变量

> ID：13566210
> 
> 赞同：26
> 
> 时间：2012-11-26T13:50:30.073
> 
> 标签：css, javafx-2

我一直在检查 Oracle 在 JavaFX 运行时库中分发的“caspian.css”，我看到他们已经将一些颜色值声明为变量。例如：

```
-fx-base: #d0d0d0; // Caspian.css, Line 47 
```

...然后他们将其用作其他属性的值，例如：

```
-fx-color: -fx-base; // Caspian.css, Line 96 
```

**现在**，我要做的是声明一个测量单位（`-fx-radius-default: 10px`），然后在每次需要设置控件的半径时使用它，例如：

```
-fx-border-radius: -fx-radius-default;
-fx-background-radius: -fx-radius-default; 
```

到目前为止，我一直没有成功。我的问题是：这可能吗？

* * *

*编辑：添加实验细节*

# 细节

这是我在 JavaFX Scene Builder 1.1 上创建的 Experiment.fxml 文件：

```
<?xml version="1.0" encoding="UTF-8"?>

<?import java.lang.*?>
<?import java.net.*?>
<?import java.util.*?>
<?import javafx.scene.control.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.paint.*?>

<AnchorPane id="AnchorPane" maxHeight="-Infinity" maxWidth="-Infinity" minHeight="-Infinity" minWidth="-Infinity" prefHeight="400.0" prefWidth="600.0" xmlns:fx="http://javafx.com/fxml">
  <children>
    <TextArea layoutX="200.0" layoutY="119.0" prefWidth="200.0" styleClass="track" wrapText="true" />
  </children>
  <stylesheets>
    <URL value="@css/Experiment.css" />
  </stylesheets>
</AnchorPane> 
```

以下是`css/Experiment.css`我使用过的：

```
* {
    -fx-radius-default: 10px;
}
.track {
    -fx-border-radius: -fx-radius-default;
    -fx-border-color: black;
} 
```

不幸的是，这不起作用，给出如下错误消息：

> 在从样式表文件中的规则“*.track”解析“-fx-border-radius”时无法解析“-fx-radius-default”：/home/abdullah/codebase/src/package/css/Experiment.css

如果我使用纯语法 ( `-fx-border-radius: 10px`)，那没有问题。

我在这里做错了什么？

* * *

*编辑：结论*

# 结论：不可能

当前版本的 JavaFX 似乎无法实现我正在寻找的内容，因为“ [JavaFX CSS 参考指南](http://docs.oracle.com/javafx/2/api/javafx/scene/doc-files/cssref.html#typecolor)”仅提及“查找的颜色”，而不是“变量”的通用概念。不过，这将是一个很好的功能……只是说……

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-26T14:17:35.190

不幸的是，它似乎只适用于颜色。但是您需要确保您的变量在使用它的规则中是“可见的”：

```
* {
   -fx-base2: #e00;
}
.track {-fx-background-color: -fx-base2;} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2017-01-23T11:36:49.707

我知道这是一个相当古老的问题，但我找不到与我类似的方法的任何答案。正如前面的答案已经说过，除了颜色之外，标准 css 是不可能的。（如果我错了请纠正我）

不过，如果您使用*[less](http://lesscss.org/)*是可能的。我在我的一个 JavaFX 项目中使用较少，而且效果非常好。你只需要配置你的构建过程来编译你的 less 文件并生成实际的 css 文件。我在我的项目中使用了 maven，您可以在下面找到我的构建配置。

```
<build>
    <!-- exclude less files from output directory -->
    <resources>
        <resource>
            <directory>src/main/resources</directory>
            <excludes>
                <exclude>**/*.less</exclude>
            </excludes>
        </resource>
    </resources>

    <plugins>

        <plugin>
            <artifactId>maven-compiler-plugin</artifactId>
            <version>3.3</version>
            <configuration>
                <source>1.8</source>
                <target>1.8</target>
            </configuration>
        </plugin>

        <plugin>
            <groupId>org.apache.maven.plugins</groupId>
            <artifactId>maven-resources-plugin</artifactId>
            <version>3.0.2</version>
        </plugin>

        <plugin>
            <groupId>com.zenjava</groupId>
            <artifactId>javafx-maven-plugin</artifactId>
            <version>8.7.0</version>
            <configuration>
                <mainClass>com.example.project.Main</mainClass>
            </configuration>
        </plugin>

        <plugin>
            <artifactId>maven-assembly-plugin</artifactId>
            <configuration>
                <archive>
                    <manifest>
                        <mainClass>com.example.project.Main</mainClass>
                    </manifest>
                </archive>
                <descriptorRefs>
                    <descriptorRef>jar-with-dependencies</descriptorRef>
                </descriptorRefs>
                <appendAssemblyId>false</appendAssemblyId>
            </configuration>
        </plugin>

        <!-- maven less plugin which I'm using to compile the less files -->
        <plugin>
            <groupId>biz.gabrys.maven.plugins</groupId>
            <artifactId>lesscss-maven-plugin</artifactId>
            <version>1.2.1</version>
            <executions>
                <execution>
                    <goals>
                        <goal>compile</goal>
                    </goals>
                    <configuration>
                        <sourceDirectory>${project.basedir}/src/main/resources/com/example/project</sourceDirectory>
                        <outputDirectory>${project.build.outputDirectory}/com/example/project</outputDirectory>
                    </configuration>
                </execution>
            </executions>
        </plugin>
    </plugins>
</build> 
```

有了这个配置，我现在可以少用，定义自定义变量也没有问题。我在我的项目中使用了一个*color-catalogue.less*文件，所有其他 less 文件都可以通过 import 属性导入。也许这个解决方案可以帮助任何人。

* * *

**编辑**：如果有人感兴趣，可以在[这里](https://github.com/grill2010/JavaFXWithLess)找到一个工作示例。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2018-06-04T08:47:10.213

对您的答案稍作修正：数字也可以，而不仅仅是颜色。

例如：

```
*{
    -preferred-scroll-bar-thumb-size: 25;
}

.scroll-bar:vertical .thumb {
    -fx-pref-width: -preferred-scroll-bar-thumb-size;
} 
```

对我有用，JavaFx 将值“25”作为“25px”（如果我写了“25px”，它会失败）。它并不像使用 less/sass 那样完全是变量，但它可以帮助那些不需要更多的人。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2019-06-25T22:53:08.893

我将我的 css 代码分开。

我创建了一个名为 all.css 的导入器文件，代码如下：

```
@import url("Root.css");
@import url("Base.css");
... 
```

在 Root.css 文件中，我设置了变量：

```
.root {
    -fx-color1: #FFFF00;
    -fx-color2: rgb(255,255,0);
    -fx-color3: rgba(255,255,0, 0.5);
} 
```

* * *

现在，我可以在导入（Root.css）之后在所有导入代码中调用变量。例如在 Base.css 中。

```
.bg-yellow1 {
    -fx-background-color: -fx-color1;
} 
```

就是这样！

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2019-03-28T14:41:52.097

在[grill2010的解决方案](https://stackoverflow.com/a/41805478/2549593)插件中：
我建议在“生成资源”阶段将SCSS与maven的构建器（插件）一起使用到CSS中。因此，您可以为任何选择器使用具有任何数字或颜色的变量。

我正在使用这种情况，它工作正常:)

PS 对于当前的 OpenJFX 版本，您不能直接在 CSS 文件中执行此操作。

```
 <plugins>
                <plugin>
                <groupId>com.github.warmuuh</groupId>
                <artifactId>libsass-maven-plugin</artifactId>
                <version>0.2.10-libsass_3.5.3</version>
                <executions>
                    <execution>
                        <phase>generate-resources</phase>
                        <goals>
                            <goal>compile</goal>
                        </goals>
                    </execution>
                </executions>
                <configuration>
                    <outputPath>${project.build.directory}/generated-sources/resources</outputPath>
                    <inputPath>${basedir}/src/main/resources</inputPath>
                    <!--<includePath>${basedir}/src/sass-plugins/</includePath>-->
                    <outputStyle>nested</outputStyle>
                    <generateSourceComments>false</generateSourceComments>
                    <generateSourceMap>false</generateSourceMap>
                    <sourceMapOutputPath>${project.build.directory}/generated-sources/resources
                    </sourceMapOutputPath>
                    <omitSourceMapingURL>true</omitSourceMapingURL>
                    <embedSourceMapInCSS>false</embedSourceMapInCSS>
                    <embedSourceContentsInSourceMap>false</embedSourceContentsInSourceMap>
                    <precision>5</precision>
                    <enableClasspathAwareImporter>true</enableClasspathAwareImporter>
                    <copySourceToOutput>false</copySourceToOutput>
                </configuration>
            </plugin>

            <plugin>
                <groupId>org.codehaus.mojo</groupId>
                <artifactId>build-helper-maven-plugin</artifactId>
                <version>3.0.0</version>
                <executions>
                    <execution>
                        <phase>generate-sources</phase>
                        <goals>
                            <goal>add-source</goal>
                        </goals>
                        <configuration>
                            <sources>
                                <source>${project.build.directory}/generated-sources/resources</source>
                            </sources>
                        </configuration>
                    </execution>
                </executions>
            </plugin>
        </plugins> 
```

# javascript - 获取 HTML 字符串中的所有图像

> ID：13566214
> 
> 赞同：1
> 
> 时间：2012-11-26T13:50:35.147
> 
> 标签：javascript, jquery, ajax

我总是遇到麻烦，我正在使用 AJAX 加载文件：

```
$.ajax({
    url: fullHref,
    success : function(result) {
        console.log(fullHref+" was loaded via AJAX");
        saveImages(result);
    }
}); 
```

并尝试遍历所有图像`result`：

```
function saveImages(file){
    console.log("savesImages enterd");
    $(file).find('img').each(function(){
        console.log("The file has this image : "+$(this).attr('src'));
    });
}
} 
```

我也试过：

*   `$('img',file)`
*   `$('img',$(file))`
*   `$('img',$(file).html())`

然而它并没有进入循环。

有什么建议么？我正在使用 Chrome，我**不想**使用正则表达式。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-26T13:54:41.680

尝试`filter()`而不是查找：

```
$(file).filter('img').each(function() { /* ... */ }); 
```

`find()``img`如果字符串中的元素都在根级别，则向下查找不是您想要的 DOM 树。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T14:02:39.543

只需创建一个新节点并设置`innerHTML`它。

```
$('<span></span>').html(file).find('img').each(... 
```

# mysql - SQL查询，如果另一列等于x，则获取一列

> ID：13566218
> 
> 赞同：1
> 
> 时间：2012-11-26T13:50:52.640
> 
> 标签：mysql, sql

假设我有一张像这样的桌子

```
 x      y  
10    5  
10    8  
10    12  
11    9  
11    14  
11    12  
14    12  
14    5  
14    11 
```

如果 y = 5，我需要返回所有具有相同值的 x 组所以我需要一个查询来返回值为 10 或 14 的 x 组。查询：

```
select x, y from table ... 
```

应该给我这样的回报：

```
x y  
10 5  
10 8  
10 12  
14 12  
14 5  
14 11 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:52:55.150

```
select x, y
from your_table
where x in 
(
  select distinct x
  from your_table
  where y = 5
) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:52:34.393

```
SELECT *
FROM tableName
WHERE x in
    (
        SELECT DISTINCT x
        FROM tableName
        WHERE y = 5
    ) 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/f50d5/1)

或者join也可以解决

```
SELECT  a.*
FROM    tableName a
        INNER JOIN
        (
            SELECT DISTINCT x
            FROM tableName
            WHERE y = 5
        ) b ON a.x = b.x 
```

*   [SQLFiddle 演示](http://sqlfiddle.com/#!2/f50d5/3)

# grails - 400 错误请求

> ID：13566224
> 
> 赞同：-1
> 
> 时间：2012-11-26T13:51:09.313
> 
> 标签：grails, cloud-foundry

我尝试`cloudfoundry`第一次使用。

我在其中创建了一个简单的应用程序`grails`并安装了`cloud-foundry`插件。插件安装正确。我试图运行`prod cf-push`命令但收到此错误。关于这个错误的任何想法？

```
org.cloudfoundry.client.lib.CloudFoundryException: 400 Bad Request (Invalid application description) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T20:07:08.130

可能值得尝试使用 VMC（如果您安装了它）。

打包您的 Grails 应用程序

```
grails prod war 
```

然后用 vmc 部署

```
vmc push [app name here] --path target/ 
```

按照交互式提示进行操作，但 VMC 应该将 war 文件识别为 Grails 应用程序

# apache - 使用 Apache VirtualHost 创建通配符子域

> ID：13566226
> 
> 赞同：17
> 
> 时间：2012-11-26T13:51:16.490
> 
> 标签：apache, virtualhost, wildcard-subdomain

我想有这种情况：

1.  如果用户使用此 URL 请求：`example.com`或`www.example.com`，用户将`index.php`在此目录中看到`/home/admin1/public_html/`

2.  但是当用户请求使用其他子域（通配符）例如：`freediscount.example.com`时，用户将`index.php`在此路径中看到：`/home/admin1/public_html/userweb/freediscount.example.com`

我的主机技术支持建议我使用这种方法： http: [//www.wiredstudios.com/php-programming/setting-up-wildcard-dns-for-subdomains-on-cpanel.html](http://www.wiredstudios.com/php-programming/setting-up-wildcard-dns-for-subdomains-on-cpanel.html)

基于该教程，PHP 有一项新工作......当用户请求子域时重定向到特定文件夹。我不喜欢这种方法。对我来说，如果 Apache 能处理这个会更好。

几乎接近我需要的是这种方法：[Virtualhost For Wildcard Subdomain and Static Subdomain](https://stackoverflow.com/questions/758351/virtualhost-for-wildcard-subdomain-and-static-subdomain)

但是，我的设置有问题`VirtualHost`，如何`VirtualHost`针对这种情况正确创建？

这是我已经完成但没有工作的内容：

```
## I think this one is for www or without www, automatically generated with WHM
<VirtualHost xx.xx.xx.xx:80> 
ServerName example.com
ServerAlias www.example.com
DocumentRoot /home/admin1/public_html
</VirtualHost>

## Here's what I'm trying to add
<VirtualHost xx.xx.xx.xx:80>
    ServerName example.com
    DocumentRoot /home/admin1/public_html/userweb/*
</VirtualHost> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-06-02T00:05:54.910

使用 Apache 虚拟主机绝对可以使用通配符子域。

我有基本相同的要求，并设法让它与 Apache 的`mod_vhost_alias.so`模块一起工作。`http-vhosts.conf`在你的文件中试试这个：

```
DocumentRoot "/home/admin1/public_html/userweb/" 
<Directory "/home/admin1/public_html/userweb/"> 
    Options None 
    AllowOverride None 
    Order allow,deny 
    Allow from all 
</Directory>

<VirtualHost *:80>
    DocumentRoot /home/admin1/public_html/
    ServerName www.example.com
</VirtualHost>

<VirtualHost *:80> 
    VirtualDocumentRoot /home/admin1/public_html/userweb/%1.example.com/ 
</VirtualHost>

<VirtualHost *:80>
    DocumentRoot /home/admin1/public_html/
    ServerName example.com
</VirtualHost> 
```

请注意，我没有对此进行测试，但它非常接近对我有用的解决方案。

我的解决方案的全部细节在这里： http: [//www.calcatraz.com/blog/wildcard-subdomains-in-apache-1422](http://www.calcatraz.com/blog/wildcard-subdomains-in-apache-1422)

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-26T14:03:58.867

试试这个：

```
NameVirtualHost *:80

<VirtualHost *:80>
  DocumentRoot /home/admin1/public_html/
  ServerName www.example.com
</VirtualHost>

<VirtualHost *:80>
  DocumentRoot /home/admin1/public_html/userweb/freediscount.example.com
  ServerName  other.example.com
  ServerAlias *.example.com
</VirtualHost>

<VirtualHost *:80>
  DocumentRoot /home/admin1/public_html/
  ServerName example.com
</VirtualHost> 
```

虚拟主机的顺序及其特殊性很重要。

# javascript - Javascript：“TypeError：$(...).html(...).html(...).css 不是函数”

> ID：13566231
> 
> 赞同：0
> 
> 时间：2012-11-26T13:51:26.470
> 
> 标签：javascript, ajax, jquery

我正在尝试编写一个计算一段文本中音节数量的函数，我知道它不会那么准确，它只是我目前需要的一个简单版本，它大致计算了音节的数量。

```
whenkeydown = function(max_length) {
$("#my_text").unbind().keyup(function() {
    //check if the appropriate text area is being typed into
    if (document.activeElement.id === "my_text") {
        //get the data in the field
        var text = $(this).val();

        function countSyllables(words) {
            console.log(words);
            for (var z; z < words.length; z++) {
                word = word[z].toLowerCase();                                     
                if(word.length <= 3) { return 1; }                             
                word = word.replace(/(?:[^laeiouy]es|ed|[^laeiouy]e)$/, '');   
                word = word.replace(/^y/, '');                                 
                syllables = word.match(/[aeiouy]{1,2}/g).length; 
                syllableCount += syllabes   
                }              
        return syllableCount
        }

        var syllableCount = countSyllables(text)

        $("#noOfSyllables").html("").html(syllableCount).css("color", "#F7860C"); //orange 
```

我在（aptana/firefox）调试器中得到的错误是“TypeError: $(...).html(...).html(...).css is not a function”，这是否意味着我的函数确实什么都不退？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T13:55:23.630

您的变量`syllableCount`永远不会在您的函数中设置`countSyllables`。

我希望看到一个`var syllableCount = 0;`

```
function countSyllables(words) {
    var syllableCount = 0;
    ... 
```

第二个问题。

您将 text() 视为它返回一个数组。它是一个单一的字符串。

# c# - C# - 所有文本框的列表

> ID：13566234
> 
> 赞同：1
> 
> 时间：2012-11-26T13:51:27.723
> 
> 标签：c#, visual-studio-2010, c#-4.0

我有一个 C++ 代码，其中 txtControls 的类型为 std::vector txtControls;

```
for(int i=0;i<txtControls.size();++i)
{
  if(txtControls[i]->GetValue() != "")
  {
    if(watermarkCheckControls[i]->IsChecked())
      xml += "<field display='yes' ";
    else
      xml += "<field display='no' ";
  }
} 
```

我还想检查文本框是否不为空/空。我想在 C# 中实现相同的功能我在 Windows 窗体应用程序中有各种文本框

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:53:46.627

在表单的构造函数中，调用 InitializeControls() 后，用它们填充自定义数组：

```
TextBox[] myTextBoxes = new TextBox[] {this.xxxx, this. yyyy} 
```

当然，您可以在类级别创建数组。

您不能在设计时使用 IDE 和控件属性填充数组（据我所知）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:05:54.847

```
for (int i = 0; i < txtControls.Length; i++) {
   if (!string.IsNullOrWhiteSpace(txtControls[i].Text)) {
       // do something now that you know the text isn't null, empty string, or white space.
   }
} 
```

# android - Android CSS 布局不会使用全屏宽度

> ID：13566236
> 
> 赞同：1
> 
> 时间：2012-11-26T13:51:29.080
> 
> 标签：android, css, android-layout

我目前正在开发一个移动网站。你可以在这里看到它：`http://m.mayojobs.ie`。简而言之，该网站列出了招聘广告、搜索菜单和“加载更多职位”按钮。

布局在 iPhone（Safari 和 Chrome）中看起来不错，但出于某种原因，在 Android 中，每个职位列表只使用了大约三分之一的屏幕。它不应该这样做。

此外，屏幕底部的 Google Advert 应该是 300 x 250，但由于某种原因很小。

几天来我一直试图解决这个问题，但无法弄清楚。

如果你们中的任何人知道为什么会发生这种情况，我将非常感谢您的帮助。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:55:43.320

尝试在浏览器设置中查看缩放可能在“远”。

你也可以试试

```
<meta name="viewport" content="user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" /> 
```

# c++ - 静态与共享库安全性

> ID：13566248
> 
> 赞同：1
> 
> 时间：2012-11-26T13:52:08.890
> 
> 标签：c++, security, shared-libraries, static-libraries

考虑一个提供接受密码或许可证密钥或敏感数据的功能的库，共享库和静态库在安全性方面有什么区别吗？

是否可以“嗅探”在共享库上执行的调用？或者用伪造的共享库替换原始共享库并“打印”传递给该库的函数调用的所有参数？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T13:57:18.447

一般来说，是的，可以用您自己的提供相同接口的版本替换共享库，在 linux 中，您可以设置 LD_LIBRARY_PATH 例如告诉它在哪里查找库，在 Windows 中，您可以将 DLL 放在搜索路径中。

但是，如果您能做到这一点，您也可以用原始版本的更改版本替换主程序，因此除了拦截数据的困难之外，安全性并没有太多差异。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:17:58.593

确实，替换共享库是捕获密钥的一种简单方法。但是，当您静态链接库时，在正在运行的应用程序中设置断点并捕获密钥也不难。因此，作为库开发人员，您需要忍受它——这个问题没有好的解决方案。抵制窃取密钥和使用“盗版”库的方法主要是非技术性的 - 跟踪用户并拒绝支持未注册的用户，通过网站上的受限区域提供更新等。

# list - 煎茶触摸滚动位置

> ID：13566251
> 
> 赞同：2
> 
> 时间：2012-11-26T13:52:13.913
> 
> 标签：list, scroll, sencha-touch-2

我有一个在 ListPaging 插件的帮助下部分加载的列表。当我更改视图并返回到同一个列表时，只加载最后一个项目。我可以加载下一页但我不能加载以前的。

因此，我从服务器发送从 0 开始并在最后一个索引中结束的数据。但在这种情况下，滚动位置会丢失，刷新后会自动滚动到顶部。

我怎样才能保持滚动位置，或者有没有办法像 ListPaging 插件为下一页加载以前的记录？

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T05:47:36.427

我认为你面临的问题是这个

[list-scrollToTopOnRefresh](http://docs.sencha.com/touch/2-1/#!/api/Ext.dataview.DataView-cfg-scrollToTopOnRefresh)

这在默认情况下设置为 true 将其设置为 false 并重试...希望它有帮助

# jakarta-mail - 如何使用 javax.mail.internet.MimeMulitpart 读取邮件正文

> ID：13566253
> 
> 赞同：0
> 
> 时间：2012-11-26T13:52:15.697
> 
> 标签：jakarta-mail

我正在尝试阅读邮件的正文内容，但我不断收到以下“消息”字符串...但不是实际的邮件正文

发送日期：5 月 21 日星期一 14:56:47 CAT 2012 发件人：{FROM} 主题：测试消息：***javax.mail.internet.MimeMultipart@320e7a***

关于我可能缺少什么的任何帮助/建议？提前谢谢你 Faheem

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:46:48.000

邮件可以是纯文本、html 或 Multipart(text + attachments)、Multipart Alternative(text + html) 等。
您必须遍历每个邮件`BodyPart`以了解其类型，然后相应地获取内容。这个 javamail FAQ[条目](http://www.oracle.com/technetwork/java/javamail/faq/index.html#mainbody)可以帮助你。

# android - ViewPager, Fragment, 不活动后恢复活动时 GridView 消失

> ID：13566254
> 
> 赞同：0
> 
> 时间：2012-11-26T13:52:17.443
> 
> 标签：android, gridview, android-viewpager

有没有人对此有答案。我已经查看了所有代码，但无法弄清楚？是否有任何 onResume 等我忘记了？我使用自定义 GridViewAdapter 谢谢

更新：

```
public static void bindGridView(final Activity context) {
    if (mGridView == null) {
        mGridView = (GridView)v.findViewById(R.id.grid_view_n1);
    }
    mFavortieAdapter = new GridViewInfo(context,FavoriteTextList, FavoriteDrawableList, FavoriteID);
    mGridView.setAdapter(mFavortieAdapter);
    mGridView.setSelection(0);

    // Implement On Item click listener
    mGridView.setOnItemClickListener(new OnItemClickListener() {
        @Override
        public void onItemClick(AdapterView<?> arg0, View arg1, int position,
                long arg3) {
            String db_int = FavoriteIntent.get(position);
            getApplicationName(db_int, context);
        }
    });
} 
```

这在 onCreate 中被调用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T18:20:04.847

DeeV 让我朝着正确的方向前进。我研究了 GridView 是如何保存/重建的，显然 gridView 在恢复后不为空，因此不会再次调用。

从此行中删除了 if 语句：

```
if (mGridView == null) {
    mGridView = (GridView)v.findViewById(R.id.grid_view_n1);
} 
```

感谢 DeeV

# c++ - 模板内类型名分配的目的是什么

> ID：13566255
> 
> 赞同：9
> 
> 时间：2012-11-26T13:52:20.393
> 
> 标签：c++, templates

我遇到了这段代码（我试图包括所有细节，以防我遗漏了什么）：

```
template< typename TYPE = TYPE_with_an_arbitrarily_long_name,
          typename KIND = KIND_with_an_arbitrarily_long_name>

class Foo
{
public:
    virtual void bar(TYPE& t, KIND& k) = 0;
}; 
```

我不明白的部分是模板内的分配：

```
template <typename TYPE = TYPE_with_an_arbitrarily_long_name, .. 
```

我一直在试图了解它的影响，但到目前为止我无法产生任何效果。以下是我尝试过的一些东西：

```
#include <iostream>
#include <typeinfo>
using namespace std;

template<typename T>
void foo(T t) {
    cout << typeid(t).name() << " ";
}

template<typename T = int>
void bar(T t) {
    cout << typeid(t).name() << " ";
}

template<typename T = double>
void baz(T t) {
    cout << typeid(t).name() << " ";
}

int main()
{
    cout << "\nfoo: ";
    foo(3); foo<int>(3); foo<double>(3);
    cout << "\nbar: ";
    bar(3); bar<int>(3); bar<double>(3);
    cout << "\nbaz: ";
    baz(3); baz<int>(3); baz<double>(3);
    return 0;
} 
```

打印出来：

```
foo: i i d
bar: i i d
baz: i i d 
```

所以我的问题是：

1.  里面赋值有什么作用`template`？
2.  在上面的例子中使用它的目的是什么？
3.  没有第三个问题。

任何帮助表示赞赏..

**编辑**结果函数只能用 c++11 编译

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T14:00:36.573

这称为“默认模板参数”，并指定使用哪种类型，当没有指定时 - 类似于默认函数参数。这种技术广泛用于类 - 查看[`std::vector`](http://en.cppreference.com/w/cpp/container/vector)or的定义[`std::string`](http://en.cppreference.com/w/cpp/string/basic_string)，您会发现它们有多个默认类型参数。

函数模板的默认类型参数的最佳用途是当类型参数不能轻易地从实际参数中推断出来，并且没有明确指定时 - 然后编译器将使用默认值。在您的示例中，不需要默认类型，因为它可以很容易地从实际调用参数中推断出来。

直到 C++0x 的默认类型参数只允许用于类模板——它们不能与函数模板一起使用。使用 C++0x 时它发生了变化，但一些较旧的编译器（例如 Visual C++ 2008）不允许您使用它们。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-11-26T13:58:58.787

这些不是赋值，而是模板类型参数的“默认值”，就像函数的默认值参数有类似的语法一样。当未指定显式参数时使用它们。

对于您的示例中`bar`的`baz`函数模板，它没有任何意义，因为对于这些函数，`T`将派生自指定的参数。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-26T14:00:12.773

函数模板可能不是演示默认模板参数的最佳构造。这与模板结构类似：

```
#include <iostream>
#include <typeinfo>

template<typename T = int>
struct foo {
   static void f() {
      std::cout << typeid(T).name() << "\t";
   }
};

template<typename T = double>
struct bar {
   static void f() {
      std::cout << typeid(T).name() << "\t";
   }
};

int main() {
  foo<>::f(); foo<int>::f();  foo<double>::f();  std::cout << std::endl;
  bar<>::f(); bar<int>::f();  bar<double>::f();  std::cout << std::endl;
} 
```

运行这个，我得到：

```
% ./a.out 
i   i   d   
d   i   d 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-26T14:02:27.687

1.  模板参数列表中的“赋值”是默认参数，就像在函数参数列表中一样。这意味着在您的示例中，`Foo<>`与 相同`Foo<TYPE_with_an_arbitrarily_long_name, KIND_with_an_arbitrarily_long_name>`，并且`Foo<int>`与 相同`Foo<int, KIND_with_an_arbitrarily_long_name>`。
2.  它不会在您的示例中使用。您根本不使用`Foo`，并且 和 的参数`baz`将`bar`始终由编译器从给定的参数中推导出来。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T14:01:41.970

这些是默认模板参数。您可以使用模板默认参数来简化它们的使用。

例如，当您有两个模板参数并为最后一个参数指定默认类型时，您必须只指定一种类型。

[`std::vector`](http://www.cplusplus.com/reference/vector/vector/)，例如，定义为

```
template < class T, class Allocator = allocator<T> > class vector; 
```

这里你有一个默认的模板参数`Allocator`，所以你可以只用一个参数定义向量

```
std::vector<int> v; 
```

* * *

## 回答 #6

> 赞同：-3
> 
> 时间：2012-11-26T14:00:11.903

您正在寻找的是“模板专业化”

这是一些[示例/说明的链接](http://publib.boulder.ibm.com/infocenter/lnxpcomp/v8v101/index.jsp?topic=/com.ibm.xlcpp8l.doc/language/ref/explicit_specialization.htm)

# ios - UISplitViewController 与 Storyboard 2 级 TableView

> ID：13566256
> 
> 赞同：-1
> 
> 时间：2012-11-26T13:52:21.700
> 
> 标签：ios, xcode, tableview, uisplitviewcontroller

我有一个使用 XCode 模板并使用 StoryBoard 创建的 UISplitViewController。它可以很好地在 te masterView 中详细显示行选择的数据。

我想在 masterView 中添加另一个 tableview，以获得 2 个级别的 masterView。在第一个表视图中显示第 0 项、第 1 项、第 2 项。然后当点击其中一个时，在同一个 MasterView 中使用其他行值推送另一个表视图。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:06:57.057

在 MasterViewController.m 中，添加以下代码。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    NewMasterViewController *masterViewController = [[NewMasterViewController alloc] init];
    [self.navigationController pushViewController:masterViewController animated:YES];
} 
```

# android - 如何在我的应用中使用新安卓手机的连拍模式？

> ID：13566257
> 
> 赞同：5
> 
> 时间：2012-11-26T13:52:20.270
> 
> 标签：android, android-camera

似乎很多新的安卓手机都为他们的相机配备了这种连拍模式功能，并在他们的原生相机应用程序中使用它。我想知道他们是否在他们的应用程序中使用了一个 api，或者他们只是在循环拍照，我不确定，所以有人愿意解释一下吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:03:22.667

它没有官方的 API，但在你开始循环 .takePicture() 之前，你可能应该在[图片回调](http://developer.android.com/reference/android/hardware/Camera.PictureCallback.html)中再次调用它，以避免在拍照时因任何原因出现延迟而占用整个 CPU： )

# android - 如何为整个应用应用自定义字体？

> ID：13566258
> 
> 赞同：-3
> 
> 时间：2012-11-26T13:52:21.340
> 
> 标签：android, custom-controls

> **可能重复：**
> [Android：想要为整个应用程序而不是运行时设置自定义字体](https://stackoverflow.com/questions/4395309/android-want-to-set-custom-fonts-for-whole-application-not-runtime)

我知道有以下方法可以做到这一点。但我想将字体应用于整个应用程序。那可能吗？

```
TextView txt = (TextView) findViewById(R.id.customfont);
Typeface font = Typeface.createFromAsset(getAssets(), "fonts/Molot.otf");
txt.setTypeface(font); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T13:56:09.953

但是，如果您查看接受的回复，则不可能为整个应用程序提供一个：

[Android：想要为整个应用程序而不是运行时设置自定义字体](https://stackoverflow.com/questions/4395309/android-want-to-set-custom-fonts-for-whole-application-not-runtime)

他们有一个解决方案，可以更轻松地将其设置为任何视图 :) 另一种方法是创建自定义小部件来替换 TextView，但如果您也需要其他小部件上的字体，它会变得非常混乱！

# c++ - MFC C++ 指向函数新手的指针

> ID：13566266
> 
> 赞同：1
> 
> 时间：2012-11-26T13:52:53.193
> 
> 标签：c++, pointers, mfc

我有很多项目的解决方案。
我想在公共项目中创建一个接收数组和函数指针的类。
此类是该解决方案上其他项目的成员。每个项目类都可以将其作为成员。

在 common 里面的类的构造函数上，我如何传递函数的指针？如何在公共类中设置一个成员，该成员保存我稍后要调用的函数的位置？

我的目标是我可以使用指针调用该函数 - 而我在公共项目中找到的类的代码中..

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:12:33.477

> 在 common 里面的类的构造函数上，我如何传递函数的指针？如何在公共类中设置一个成员，该成员保存我稍后要调用的函数的位置？

```
typedef void(*FUNCPTR)(int); 
```

这定义了我的函数指针类型，但它也将函数限制为下面的签名（返回 void 并采用 1 个 int 参数），您需要为函数签名定义它。

```
void myFunction( int someParam )
{
    //DoSomething with someParam
}

class Foo
{
private:
    FUNCPTR mFunction; //Holds pointer

public:
    Foo( FUNCPTR function) : mFunction(function) {} //Initialise instance

    void callFunc() {mFunction(1);} //call function
};

int main(unsigned int argc, const char** argv)
{
    Foo myFoo(myFunction);

    myFoo.callFunc();
} 
```

在 C++ 中，您可能会更好，但是考虑使用函数对象，在其中创建对象并定义一个`operator()`接受正确参数和返回类型的函数对象，但可以让您获得对象和多态性的所有灵活性......

请参阅[C++ Functors - and their use 以](https://stackoverflow.com/questions/356950/c-functors-and-their-uses)获得一些讨论和细节

# java - 将非空键和值放入哈希表时出现 NullPointerException

> ID：13566270
> 
> 赞同：3
> 
> 时间：2012-11-26T13:53:06.307
> 
> 标签：java, nullpointerexception, hashtable

当 put() 的两个参数都不是 null 时，以下代码中会发生 java.util.Hashtable 的空指针异常：

```
import java.util.Hashtable;

interface action
{
   void method();
}

class forclass implements action
{
  public void method()
  {
    System.out.println("for(...){");
  }
}

class ifclass implements action
{
  public void method()
  {
    System.out.println("if(..){");
  }
}

public class trial
{
  static Hashtable<String,action> callfunc;
  //a hashtable variable
  public static void init()
  {
    //System.out.println("for"==null); //false
    //System.out.println(new forclass() == null); //false
    callfunc.put("for",new forclass()); //exception occuring here
    callfunc.put("if",new ifclass());
    //putting values into the hashtable
  }
  public static void main(String[] args)
  {
    init(); //to put stuff into hashtable
    action a = callfunc.get("for");
    //getting values for specified key in hashtable
    a.method();
    callfunc.get("if").method();
  }
} 
```

线程“main”中的异常 java.lang.NullPointerException -
在 trial.init(trial.java:33)
at trial.main(trial.java:38)
为什么会发生这个异常？我如何解决它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T13:54:11.150

你还没有初始化你的`Hashtable`： -

```
static Hashtable<String,action> callfunc; // Reference points to null 
```

> 当 put() 的两个参数都不为空时

你应该使用`HashMap`, 允许`1 null key`, 避免`NPE`在使用`put`with时得到`null key`, 方法在`Hashtable`throws的情况下`NPE`, 因为它不允许`null keys, or value`。

**因此，将您的声明更改为： -**

```
static Hashtable<String,action> callfunc = new Hashtable<String, action>(); 
```

甚至更好：-

```
static Map<String, action> callfunc = new HashMap<String, action>(); 
```

* * *

作为旁注，您应该遵循`Java Naming Convention`您的代码。所有的类名和接口名，应以`UpperCase`字母开头，后跟`CamelCasing`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T13:54:47.377

`callfunc`参考为空而不是输入。

尝试这个：

```
static Hashtable<String,action> callfunc = new Hashtable<String,action>() 
```

此外[，这篇](https://stackoverflow.com/questions/40471/differences-between-hashmap-and-hashtable)文章对于您是否想要`Hashtable`或`HashMap`

# drupal - Drupal7 多语言网站中未显示菜单

> ID：13566271
> 
> 赞同：0
> 
> 时间：2012-11-26T13:53:07.520
> 
> 标签：drupal, drupal-7, translation, drupal-modules

我正在制作一个 drupal7 网站，并添加了法语。

我将 MULTILINGUAL - INTERNATIONALIZATION 与“菜单翻译”一起使用：

*   主菜单（法语）设置为“固定语言”：法语
*   主菜单（英文）设置为“固定语言”：英文
*   我添加了一个“翻译集”，并在上面设置了 2 个菜单。

当我选择 FR 语言时，菜单显示法语菜单 (OK) 当我选择 EN 语言时，不显示菜单

（两个菜单中都有元素:-)）

有没有人可以帮助我？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:49:56.233

有很多问题要意识到节点没有设置为好的语言，而不仅仅是菜单项。

希望能帮助到你

# asp.net-mvc - 基于视图模型上的属性的网格排序

> ID：13566280
> 
> 赞同：3
> 
> 时间：2012-11-26T13:53:32.353
> 
> 标签：asp.net-mvc, entity-framework, viewmodel

我正在开发一个 ASP.NET MVC4 Web 应用程序。它使用实体框架进行数据访问。许多页面包含网格。这些需要支持分页、排序、过滤和分组。为了性能，需要在数据库上进行网格过滤、排序、分页等（即实体框架需要生成合适的 SQL 查询）。一种复杂的情况是，表示网格行的视图模型是通过组合来自多个业务实体（表）的数据来构建的。这可能只是简单地从一个实体向下获取数据，或者通过基于相关业务实体的值来计算它。建议使用什么方法来处理这种情况？有谁知道网络上的一个很好的例子？大多数在视图模型和业务域模型之间都有一个简单的映射。

更新 28/11 - 进一步阐明网格的初始显示和分页工作表现良好。（见下面的评论）问题是当用户单击的列没有直接映射到基础业务表上的列时，您如何处理排序/排序（和过滤）。我正在寻找一个通用的解决方案来实现这一点，因为系统将有大约 100 个网格，每个网格有许多列，并且试图在每列的基础上处理这个问题将是不可维护的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T16:26:05.863

如果您希望能够订购未在数据库中预先计算的计算字段或对其执行任何数据库操作，那么您将必须预先计算该值并将其存储在数据库中。反正我不知道。

唯一的其他解决方案是将分页和排序等移动到 Web 服务器，我相信您并不想这样做，因为您必须计算所有值才能找到它们的顺序。

因此，如果您想实现您想要的 - 我认为您必须执行以下操作，但我很乐意听到其他解决方案：

**数据库级别更改：**

1.  为视图模型中的每个计算字段添加一个可空列。

2.  编写一个 SQL 脚本来计算这些值。

3.  如有必要，将列设置为 Not Null

**应用级别更改：**

1.  在您的添加和编辑页面中，您必须计算这些值并将它们与其余数据一起提交

您现在可以在数据库级别对这些进行查询，并根据需要使用 Queryable。

# windows - Windows 中的全局 Subversion SSH 配置/在 Windows 上将 Subversion 项目签出为 SYSTEM

> ID：13566283
> 
> 赞同：1
> 
> 时间：2012-11-26T13:53:43.603
> 
> 标签：windows, svn, ssh, windows-server-2003

我正在尝试通过 SVN+SSH 从 Windows Server 2003 机器设置预定的 Subversion 提交作为任务。我希望以系统用户身份执行提交脚本。所以我猜，为了让它工作，我也需要将存储库签出为 SYSTEM - 但到目前为止我无法实现它。

我已经能够通过我自己的用户通过 SSH 实现上述目标。我做了以下事情：

1.  我在本地颠覆配置中添加了一个 [tunnels] 实体：

    ssh = plink.exe -i "C:/Keys/my_key.ppk"

2.  将密钥添加到`authorized_keys`运行 Subversion 的服务器上的文件中

3.  我使用如下脚本检查了存储库：

    svn co svn+ssh://user@server/path/to/repo/ C:\Local\Project\Path

我现在想为 SYSTEM 用户重现上述步骤，以便以后能够运行预定的提交。我面临的问题是我不知道如何将存储库签出为 SYSTEM，因为：

1.  我不知道用于将存储库签出为 SYSTEM 的语法
2.  我不知道全局（或系统的）Subversion 配置存储在 Windows Server 2003 上的什么位置。我已经尝试过 :`C:\Documents and Settings\Default User\Application Data\Subversion`和`C:\Documents and Settings\Administrator\Application Data\Subversion`，但没有成功。

我还在某个地方读到了我可能可以`svn switch`用于我想要的东西，但不知道如何`svn switch`作为 SYSTEM。我还考虑为 svn check-out 或 switch 编写脚本并将它们作为 SYSTEM 运行，但是我仍然需要全局 SVN 配置来添加`my_key.ppk`。

我希望上面的描述足够清楚。我已经为此苦苦挣扎了很长时间，并且自己总结起来也遇到了问题。任何提示表示赞赏。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-01T16:49:24.827

作为一个方面，这似乎并不完全偏离主题：[https ://serverfault.com/q/9325/122307](https://serverfault.com/q/9325/122307)

这不是您问题的真正答案，但它可能会解决您的问题：为什么不使用`svn <command> --config-dir ARG`or `svn <command> --config-option ARG`？

您可以像这样指定配置文件/选项，从而能够设置 [隧道]。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-02T05:21:30.183

@cxxl在提到时**确实回答**`--config-dir`了问题。我将尝试阐明问题

> 我猜，为了让它工作，我需要将存储库签出为 SYSTEM

错误和错误的猜测，因为在 SSH-auth 的情况下，**本地存储的用户身份验证数据**不用于执行 ssh 远程身份验证。每用户授权目录

```
\%AppData%\Subversion\auth>dir /W
...
[svn.simple]                [svn.ssl.client-passphrase]
[svn.ssl.server]            [svn.username]
... 
```

仅包含用于 http|https|svn 和基于证书的客户端身份验证的**存储凭据，****不**包含与 ssh 相关的存储库

即您在 LSA 脚本下执行的文件必须能够 * 读取工作副本文件（在*任何其他*真实本地用户下签出），也许可以写入（无法回忆对 .svn 目录权限的要求） * 读取并因此使用预定义和精细 -调整 Subversion 的配置文件（隧道部分），可以是任何其他用户的配置

PS：`swn switch`更改工作副本存储库的链接URL，与用户没有共同点

# events - 向 Excel 文本框添加事件侦听器（失去焦点）

> ID：13566287
> 
> 赞同：3
> 
> 时间：2012-11-26T13:53:56.057
> 
> 标签：events, vba, excel, textbox

当用户使用 Excel 中的文本框完成操作时，我需要触发子程序或命令。

我尝试过使用 AfterUpdate() 事件和 LoseFocus() 事件，如下所示：

```
Public Sub Kommentar_AfterUpdate()

MsgBox ("Hurray")

End Sub 
```

文本框被命名`Kommentar`并位于工作表内`Radio`。另外，代码应该写在哪里？我已经尝试将它放在 Radio 表的代码表中，以及一个单独的模块中。

任何提示，提示或答案表示赞赏！

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T15:28:20.887

对于嵌入式 ActiveX Excel 控件 - 在 VBA 中的移动工作表中添加以下内容。TextBox1 是控件的名称：

```
Private Sub TextBox1_LostFocus()

End Sub 
```

对于用户表单 - 使用以下内容，其中 Textbox1 是您的文本框的名称：

```
Private Sub TextBox1_Exit(ByVal Cancel As MSForms.ReturnBoolean)

End Sub 
```

如果您不想失去文本框的焦点，可以将 Cancel bool 设置为 True。此外，代码放置在用户窗体>>右键单击>>查看代码中。

# xml - 如何在 Pentaho Kettle PDI 中设置 HTTP 客户端以获取 XML 步骤

> ID：13566288
> 
> 赞同：2
> 
> 时间：2012-11-26T13:53:56.600
> 
> 标签：xml, pentaho, tweets, kettle

我想找到一种使用 Kettle PDI 4.2.3 将 Twitter 搜索结果转换为可处理格式的详细方法。

到目前为止，我有以下步骤：

第 1 步：生成行 在第一行我插入链接 [Twitter 搜索结果](http://twitter.com/search/realtime?q=%22I%27m%20at%22%204sq%20colruyt%20OR%20delhaize%20OR%20carrefour%20OR%20mcdonalds%20OR%20quick%20OR%20pizzahut%20OR%20%22pizza%20hut%22%20near%3aBrussels%20within:20km%20since:2012-11-20%20until:2012-11-25%20&src=typd)

限制=1

第 2 步：HTTP 客户端在这里我进行了设置，以便我接受来自上一个字段的 URL。在输出字段中，我编写了 job-xml。在字段选项卡中，我不知道该怎么做。如果我按下获取字段，它将给我生成行中的单个字段。但我把它留空。

第 3 步：获取 XML 数据这是我遇到问题的地方。目前的情况是： - 在文件选项卡中，我检查了从字段中获取 Xml 并编写了“job-xml”。我将其余部分留空 - 在 Content 选项卡 Namespace Aware 中，如果没有检查任何文件，则不要引发错误。Loop XPath 是空的。如果我按 Get XPath Nodes，它会显示“请提供 XML 片段”。通常它应该给我节点选项。如果我用包含 xml 代码的文本文件输入替换 HTTP 客户端，我将获得节点的选项。-在“字段”选项卡中，我当然无法获取字段，因为它需要我指定 XPath

所以我被困在这里。通常我想从 HTTP 客户端获取 Tweeter 字段，然后继续执行下一步，例如选择值和 Excel 输出。

如果有人能弄清楚我做错了什么并且可以帮助我将推文变成 excel，我将永远感激:)

先感谢您

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:25:56.610

最好的做法是将 twitter xml 写入一个文件，然后您可以将该文件用于您的 XML 片段。这有点傻，但是只有当你从文件中读取 xml 时，你可以选择节点等的 get xml 东西才有效。

所以设置 Xpath 和文件中的所有内容，测试它，一旦它工作切换回 xml 就在一个字段中。

# wpf - 用线连接 ScatterViewItems

> ID：13566293
> 
> 赞同：1
> 
> 时间：2012-11-26T13:54:16.143
> 
> 标签：wpf, binding, pixelsense, scatterview

我想在 ScatterViewItems 之间画线，但它不适用于我在这里找到的内容。有一条线，但未连接到椭圆的中心。有人看到我的错误吗？这是我所拥有的：

```
 <Grid>
    <s:ScatterView>
        <s:ScatterViewItem Height="250" Width="500" Background="Transparent" Orientation="0" HorizontalAlignment="Right" Margin="0,70,-764,-70" d:LayoutOverrides="HorizontalAlignment, Width">
            <s:ScatterView Height="250" Width="500" Background="BlueViolet">
                <s:ScatterViewItem Background="Transparent" Center="100,145" Orientation="0">
                    <Label Content="Knoten A" Background="WhiteSmoke" Foreground="Black"/>
                </s:ScatterViewItem>
                <s:ScatterViewItem x:Name="StartItem" CanMove="False" CanRotate="False" Margin="0" Center="10,125" Background="Transparent">
                    <Ellipse Width="10" Height="10" Fill="Transparent" Stroke="Black" Margin="0,0,0,0"/>
                </s:ScatterViewItem>
                <s:ScatterViewItem x:Name="EndItem" CanMove="False" CanRotate="False" Margin="0" Center="490,125" Background="Transparent">
                    <Ellipse Width="10" Height="10" Fill="Transparent" Stroke="Black" Margin="0,0,0,0"/>
                </s:ScatterViewItem>
                <s:ScatterViewItem Background="Transparent">
                    <Canvas Name="LineHost"/>
                </s:ScatterViewItem>
            </s:ScatterView>
        </s:ScatterViewItem>
    </s:ScatterView>
</Grid> 
```

和 C#

```
 Line line = new Line { Stroke = Brushes.Black, StrokeThickness = 2.0 };
        BindLineToScatterViewItems(line, StartItem, EndItem);
        LineHost.Children.Add(line);

private void BindLineToScatterViewItems(Line line, ScatterViewItem StartItem, ScatterViewItem EndItem)
    {
        BindingOperations.SetBinding(line, Line.X1Property,
                                     new Binding {Source = StartItem, Path = new PropertyPath("ActualCenter.X")});
        BindingOperations.SetBinding(line, Line.Y1Property,
                                     new Binding { Source = StartItem, Path = new PropertyPath("ActualCenter.Y") });

        BindingOperations.SetBinding(line, Line.X2Property,
                                    new Binding { Source = EndItem, Path = new PropertyPath("ActualCenter.X") });
        BindingOperations.SetBinding(line, Line.Y2Property,
                                     new Binding { Source = EndItem, Path = new PropertyPath("ActualCenter.Y") });
    } 
```

![在中间某处划线](../Images/38b55ba0458738331a5110aba74563b6.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T14:12:28.733

如果我使用 Canvas 而不是 ScatterView 和 ScatterViewItem 并且订单是这样的

```
 <s:ScatterView>
        <Canvas Name="LineCanvas2" Width="500" Height="250" Background="Aquamarine">
            <Canvas Background="Transparent" Name="LineCanvas"/>
            <s:ScatterView Width="500" Height="250" Background="Transparent">
                <s:ScatterViewItem ... 
```

连接线的定位没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:01:44.457

您的线路的起点和终点是您的 Startitem 的 ActualCenter.X/ActualCenter.Y。如果您的 Startitem 的 ActualCenter 为 10/100，您将在 10/100 到 10/100 之间画一条线，这就是您看不到任何线的原因。不要`Source = Startitem`在方法的最后两行设置，而是`BindLineToScatterViewItems`尝试设置`Source = EndItem`。

希望这可以帮助。

# arrays - R中的向量矩阵

> ID：13566296
> 
> 赞同：5
> 
> 时间：2012-11-26T13:54:30.950
> 
> 标签：arrays, r, matrix

是否可以在 R 中创建向量矩阵？我的意思是这个矩阵的元素必须是向量。例如`mat[1,3] == c(6,8,9)`

我必须创建 40x40 矩阵，我需要手动填充它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T13:58:47.803

这不是一个`matrix`，而是一个`array`：

```
myarray <- array(1:24, c(2,4,3))
myarray[1,3,]
#[1]  5 13 21 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T16:10:46.797

好吧，您可以向列表添加维度，使其类似于矩阵，其中元素可以是您想要的任何内容，包括不同长度的向量。例如：

```
foo <- as.list(numeric(2^2))
dim(foo) <- c(2,2)

# Assignment per element:
foo[[1,1]] <- 1:4
foo[[1,2]] <- 1:10
foo[[2,1]] <- "foo"
foo[[2,2]] <- list(foo) 
```

给你一个奇怪的对象：

```
> foo
     [,1]      [,2]      
[1,] Integer,4 Integer,10
[2,] "foo"     List,1 
```

每个元素基本上都是一个向量。尽管如此，这几乎不是最好的方法。如果向量的长度相同，则 Roland 描述的数组更合适。

# asp.net - 在 C# 中以小块下载大文件

> ID：13566302
> 
> 赞同：3
> 
> 时间：2012-11-26T13:54:37.603
> 
> 标签：asp.net, c#-4.0, httpwebrequest, websocket

我需要下载一些超过 25 MB 的文件，但我的网络只允许请求 25 MB 的文件。

我正在使用以下代码

```
 const long DefaultSize = 26214400;
    long Chunk = 26214400;
    long offset = 0;
    byte[] bytesInStream;
    public void Download(string url, string filename)
    {
        long size = Size(url);
        int blocksize = Convert.ToInt32(size / DefaultSize);
        int remainder = Convert.ToInt32(size % DefaultSize);
        if (remainder > 0) { blocksize++; }

        FileStream fileStream = File.Create(@"D:\Download TEST\" + filename);
        for (int i = 0; i < blocksize; i++)
        {
            if (i == blocksize - 1)
            {
                Chunk = remainder;

            }

            HttpWebRequest req = (HttpWebRequest)System.Net.WebRequest.Create(url);
            req.Method = "GET";
            req.AddRange(Convert.ToInt32(offset), Convert.ToInt32(Chunk+offset));
            HttpWebResponse resp = (HttpWebResponse)req.GetResponse();
            // StreamReader sr = new StreamReader(resp.GetResponseStream());

            using (Stream responseStream = resp.GetResponseStream())
            {
                bytesInStream = new byte[Chunk];
                responseStream.Read(bytesInStream, 0, (int)bytesInStream.Length);
                // Use FileStream object to write to the specified file
                fileStream.Seek((int)offset, SeekOrigin.Begin);
                fileStream.Write(bytesInStream,0, bytesInStream.Length);
            }
            offset += Chunk;

        }
        fileStream.Close();

    }
    public long Size(string url)
    {
        System.Net.WebRequest req = System.Net.HttpWebRequest.Create(url);
        req.Method = "HEAD";
        System.Net.WebResponse resp = req.GetResponse();
        resp.Close();
        return resp.ContentLength;

    } 
```

它可以在磁盘上正确写入内容，但内容无法正常工作

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:03:24.367

您应该检查在写入之前读取了多少，如下所示（并且您不需要记住要查找的偏移量，写入时查找是自动的）：

```
int read;
do
{
    read = responseStream.Read(bytesInStream, 0, (int)bytesInStream.Length);
    if (read > 0)
        fileStream.Write(bytesInStream, 0, read);
}
while(read > 0); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:38:40.303

有一个类似的 SO questions 可能对您有帮助 [Segmented C# file downloader](https://stackoverflow.com/questions/1831279/segmented-c-sharp-file-downloader)

和

[如何打开多个连接以下载单个文件？](https://stackoverflow.com/questions/8397060/how-to-open-multiple-connections-to-download-single-file)

还有这个代码项目文章 [http://www.codeproject.com/Tips/307548/Resume-Suppoert-Downloading](http://www.codeproject.com/Tips/307548/Resume-Suppoert-Downloading)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-12-29T08:31:53.537

范围从零开始，您应该从上限中减去 1。

```
request.Headers.Range = new System.Net.Http.Headers.RangeHeaderValue(offset, chunkSize + offset - 1); 
```

我在以下链接中发布了正确的代码片段： [https ://stackoverflow.com/a/48019611/1099716](https://stackoverflow.com/a/48019611/1099716)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-17T10:33:39.173

Akka 流可以帮助使用多线程从 System.IO.Stream 下载小块文件。[https://getakka.net/articles/intro/what-is-akka.html](https://getakka.net/articles/intro/what-is-akka.html)

Download 方法会将字节追加到以 long fileStart 开头的文件中。如果文件不存在，fileStart 值必须为 0。

```
using Akka.Actor;
using Akka.IO;
using Akka.Streams;
using Akka.Streams.Dsl;
using Akka.Streams.IO;

private static Sink<ByteString, Task<IOResult>> FileSink(string filename)
{
    return Flow.Create<ByteString>()
        .ToMaterialized(FileIO.ToFile(new FileInfo(filename), FileMode.Append), Keep.Right);
}

private async Task Download(string path, Uri uri, long fileStart)
{
    using (var system = ActorSystem.Create("system"))
    using (var materializer = system.Materializer())
    {
       HttpWebRequest request = WebRequest.Create(uri) as HttpWebRequest;
       request.AddRange(fileStart);

       using (WebResponse response = request.GetResponse())
       {
           Stream stream = response.GetResponseStream();

           await StreamConverters.FromInputStream(() => stream, chunkSize: 1024)
               .RunWith(FileSink(path), materializer);
       }
    }
} 
```

# mysql - 如何对后续行进行分组（基于标准）然后对它们进行计数[MySQL]？

> ID：13566303
> 
> 赞同：3
> 
> 时间：2012-11-26T13:54:38.250
> 
> 标签：mysql, count, group-by

假设我有这样一张桌子（按日期排序）：

```
id | name | type  | date 
 1 | A    | 1     | 01-08-2012
 2 | A    | 2     | 01-08-2012
 3 | B    | 1     | 02-09-2012
 4 | A    | 1     | 01-10-2012
 5 | A    | 4     | 01-10-2012
 6 | A    | 5     | 02-10-2012 
```

我想将具有相同“名称”值的后续行分组并计算它们：

```
name | count 
A    | 2
B    | 1
A    | 3 
```

我正在考虑编写一个存储过程并使用游标，但我也想知道是否有更简单的解决方案，例如使用嵌套 SELECT 等。

我的问题非常类似于：[如何对数组进行分组并对其进行计数](https://stackoverflow.com/questions/5255281/how-to-group-array-and-count-them)，但这个问题涉及 PHP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:53:54.773

为此，我使用了几个变量，即表结构，我创建了自己的变量来进行测试，它是：

```
create table abc (id int, name varchar(20),type int);

insert into abc values 
( 1 , 'A'    , 1  ),
( 2 , 'A'    , 2 ),
( 3 , 'B'    , 1  ),
( 4 , 'A'    , 1  ),
( 5 , 'A'    , 4  ),
( 6 , 'A'    , 5  ) 
```

查询结束是这样的：

```
set @a:='';
set @counter:=1;
set @groupby:=0;
select *,count(REPEATED) from (select name,if(@a=name,@counter:=@counter+1,@counter:=1) as rep,if(@counter=1,@groupby:=@groupby+1,@groupby) as repeated,@a:=name type from abc) as t group by repeated 
```

如果您有任何问题，请告诉我，您可以看到它在[SQLFIDDLE中有效。](http://www.sqlfiddle.com/#!2/61395/95)

在 SQLFIDDLE

# alloy - 计数量词 - 如何

> ID：13566311
> 
> 赞同：2
> 
> 时间：2012-11-26T13:54:59.903
> 
> 标签：alloy

比方说，我必须对棋盘进行建模，并且我想说“A”垂直上的至少 5 个方格是空的。我如何在合金中做到这一点？任何其他数字不同于 0 或 1 的示例都会很好。换句话说，当“some”不够精确时，我该怎么办？谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:03:24.487

您可以使用基数运算符 (#) 来断言关系中元组的数量，例如，

```
#r >= 5 
```

表示关系`r`必须至少有 5 个元组。

您还可以将基数运算符与任意表达式一起使用，例如，

```
#board.cells >= 5 
```

或者

```
#{c: Cell | c in board.cells and ...} >= 5 
```

# scheme - 高阶过程 - 对构造（cons, car, cdr）

> ID：13566315
> 
> 赞同：0
> 
> 时间：2012-11-26T13:55:11.877
> 
> 标签：scheme, procedure, cons, cdr

我需要在 Scheme 中创建这个程序：my-cons、my-car、my-cdr。

它应该像这样工作：

> （定义 p1（我的缺点 3 8））
> 
> (p1 #t)
> 
> 3
> 
> (p1 #f)
> 
> 8
> 
> (我的车 p1)
> 
> 3
> 
> (my-cdr p1)
> 
> 8

现在，我只有这个：

> （定义我的缺点
> 
> (λ (xy)
> 
> （缺点 xy）
> 
> (让 ((a (汽车 (cons xy)))))
> 
> ```
>  (lambda (a)
>   (if (equal? a #f) y x))))) 
> ```

但在这段代码中，我不能在定义的 p1 上应用 my-cons 或 my-cdr 有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:06:24.510

首先，有一些无关的代码`my-cons`似乎不属于这里。这就够了：

```
(define my-cons
  (lambda (x y)
    (lambda (a)
      (if a x y)))) 
```

（此外，您不需要将布尔值与`#t`or进行比较`#f`——它可以按`if`原样使用。）

现在你有`my-cons`返回一个函数，它返回`x`或者`y`取决于它的参数。您可以在实现`my-car`and时使用它`my-cdr`：

```
(define my-car
  (lambda (c)
    (c #t)))

(define my-cdr
  (lambda (c)
    (c #f))) 
```

# php - 如何在codeigniter中插入多列？

> ID：13566317
> 
> 赞同：0
> 
> 时间：2012-11-26T13:55:11.540
> 
> 标签：php, mysql, codeigniter, html-table, create-table

我想将 2 列插入数据库 [artikel & pengarang]，当我保存该表单时，它将插入`$data`到表 artikel 和 $data 到表 pengarang [IDArtikel from Artikel &nama_pengarang]。

这是我的文章 SQL：

```
CREATE TABLE `artikel`(
`IDArtikel` INT(11)NOT NULL AUTO_INCREMENT,
`IDJurnal` INT(11)NOT NULL,
`IDKategori` INT(11)NOT NULL,
`judul` VARCHAR(255)NOT NULL,
`abstract` text NOT NULL,
`nama_file` VARCHAR(255)NOT NULL,
`dilihat` INT(50)NOT NULL,
`didownload` INT(50)NOT NULL,
`created_time` datetime NOT NULL DEFAULT '0000-00-00 00:00:00',
`created_by` VARCHAR(255)NOT NULL,
`updated_time` datetime NOT NULL,
`updated_by` VARCHAR(255)NOT NULL,
PRIMARY KEY(`IDArtikel`))ENGINE = INNODB DEFAULT CHARSET = utf8; 
```

这是 Pengarang SQL：

```
CREATE TABLE `pengarang`(
`IDPengarang` INT(11)NOT NULL AUTO_INCREMENT,
`IDArtikel` INT(11)NOT NULL,
`nama_pengarang` VARCHAR(255)NOT NULL,
PRIMARY KEY(`IDPengarang`))ENGINE = INNODB DEFAULT CHARSET = utf8; 
```

这是我的观点：

```
<h3><?= $title; ?></h3><?php echo form_open("admin/artikel/buat/"); ?>
<table width="95%">
    <tr>
        <td><b>Pilih Referensi Jurnal</b></td>
        <td>
            <input type="hidden" name="IDJurnal" id="IDJurnal" value="<?php echo $IDJurnal; ?>" />
            <input type="text" name="volume" id="volume" value="<?php echo $volume; ?>" readonly="readonly"  class="sedang" />
        <?php echo anchor_popup('admin/artikel/popup', 'Referensi Jurnal', array('class' => 'button')); ?>
    </td>
</tr>
<tr>
    <td><b>Kategori</b></td>
    <td>
        <?php
            echo form_dropdown('IDKategori', $kategori) . "";
        ?>
        </td>
    </tr>
    <tr>
        <td width="125"><strong>Judul</strong></td>
        <td><input type="text" name="judul" class="panjang"></td>
    </tr>
    <tr>
        <td width="125"><strong>Pengarang</strong></td>
        <td>
            <input type="text" name="pengarang" class="panjang">
        </td>
    </tr>
    <tr>
        <td><b>Abstract</b></td>
        <td>
        <?php
            $data = array('name' => 'abstract');
            echo $this->ckeditor->editor($data['name']);
        ?>
        </td>
    </tr>
    <tr>
        <td></td>
        <td>
            <input type="submit" class="button" value="Simpan">
            <input type="button" class="button" value="Batal" onClick="javascript: history.go(-1)" />
        </td>
    </tr>
<?php
            echo form_close();
?> 
```

这是我的控制器：

```
function buat() {
    if ($this->input->post('judul')) {
        $this->MArtikel->addArtikel();
        $this->session->set_flashdata('message', 'Artikel telah di buat !');
        redirect('admin/artikel/index', 'refresh');
    } else {
        // konfigurasi ckfinder dengan ckeditor
        $this->load->library('ckeditor');
        $this->load->library('ckfinder');
        $this->ckeditor->basePath = base_url() . 'asset/ckeditor/';
        $this->ckeditor->config['toolbar'] = 'Full';
        $this->ckeditor->config['language'] = 'en';
        $this->ckfinder->SetupCKEditor($this->ckeditor, '../../../asset/ckfinder/');

        $data['title'] = "Tambah Artikel";
        $data['main'] = 'admin/artikel/artikel_buat';
        $data['jurnal'] = $this->MJurnal->getJurnalDropDown();
        $data['kategori'] = $this->MKategori->getKategoriDropDown();
        $this->load->vars($data);
        $this->load->view('dashboard/template');
    }
} 
```

这是我的模型

```
function addArtikel() {
    $now = date("Y-m-d H:i:s");
    $data = array(
        'IDJurnal' => $this->input->post('IDJurnal'),
        'IDKategori' => $this->input->post('IDKategori'),
        'judul' => $this->input->post('judul'),
        'abstract' => $this->input->post('abstract'),
        'created_time' => $now,
        'created_by' => $_SESSION['username']
    );

    $this->db->insert('artikel', $data);
} 
```

pengarang中的表格，可以插入多个数据

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:01:50.823

[看看 $this->db->insert_batch();](http://ellislab.com/codeigniter/user-guide/database/active_record.html#insert)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:45:32.307

在模型中创建新函数在模型中`addPengarang`添加以下代码，并根据您的要求更改数据数组的值，它将在 Pengarng 表中插入值

```
function addPengarang() { 
   $data = array(
        'IDPengarang' => 'value for IDPegarang',
        'IDArtikel' => 10,
        'nama_pengarang' => 'value for nama pengarang'
    );

    $this->db->insert('pengarang', $data);
} 
```

# html - 带有滚动中间单元格的HTML“表格”？

> ID：13566323
> 
> 赞同：2
> 
> 时间：2012-11-26T13:55:41.717
> 
> 标签：html, css, html-table

我在 Stack Overflow 中经历了几十个例子，但我似乎不能完全正确地做到这一点，它开始让我希望我选择了一个不同的职业！

我需要一个固定高度和固定宽度的三行表格。

第 1 行的高度是可变的，应该根据内容增长和缩小，没有垂直滚动条。

第 3 行应固定在表格底部的高度。

第 2 行应占用所有剩余空间，但如果内容太大，则应包含垂直滚动条。

基本上，这是向用户显示电子邮件消息。第 1 行将包含所有标题和任何可选的标题、附件等（这就是它需要可变高度的原因）。

第 2 行是消息的正文，带有滚动条。

第 3 行用于操作按钮、删除、转发等。

整个东西需要固定高度和宽度，因为我需要将它嵌入到 JQuery 对话框 DIV 中。

在我的问题标题中，我将表格放在引号中，因为我很高兴有一个纯 CSS 的解决方案，只要它按描述工作。我的主要目标是我们以跨浏览器的方式实现上述功能。

希望你能帮忙！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T14:11:45.827

首先，这是一个演示：[little link](http://jsfiddle.net/9vwYn/)。

我所做的是不直接将文本包含在中间单元格中，而是给出它`position: relative;`，然后在其中创建一个`div`包含以下内容的内容：

```
position: absolute;
top: 0;
bottom: 0;
right: 0;
left: 0;
overflow: auto; 
```

正如您在上面的演示中看到的那样，它可以完成这项工作。

希望有帮助！

# codeigniter - CodeIgniter 中的 xsd 验证

> ID：13566326
> 
> 赞同：0
> 
> 时间：2012-11-26T13:55:55.707
> 
> 标签：codeigniter, xsd

我正在使用 CodeIgniter，我想用下面的 xsd 验证 xml

```
<?xml version="1.0"?>
<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified">
    <xsd:simpleType name="non_empty_string">
        <xsd:restriction base="xsd:string">
            <xsd:minLength value="1" />
        </xsd:restriction>
    </xsd:simpleType>

    <xsd:element name="xml">
        <xsd:complexType>
            <xsd:sequence>
                <xsd:element name="item">
                    <xsd:simpleType>
                        <xsd:union memberTypes="non_empty_string xsd:integer"/>
                    </xsd:simpleType>
                </xsd:element>
            </xsd:sequence>
        </xsd:complexType>
    </xsd:element>
</xsd:schema> 
```

当我试图针对这个 xsd 验证 xml 时，**只有第一个成员类型得到验证 (non_empty_string )**，而不是第二个，猜猜为什么会这样。谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:46:55.827

您可以使用 XMLReader 根据 xsd 文件验证您的 XML。有关更多信息， 请参阅此[链接](http://de.php.net/manual/en/xmlreader.setschema.php)[http://de.php.net/manual/en/xmlreader.setschema.php](http://de.php.net/manual/en/xmlreader.setschema.php)

# css - CSS2剪裁固定宽度自动高度可能吗？

> ID：13566328
> 
> 赞同：0
> 
> 时间：2012-11-26T13:55:59.097
> 
> 标签：css

我使用这个 css 属性来剪辑 div 内的内容：

```
div {
   position: absolute;
   clip: rect(0px,200px,100px,0px);
   overflow: none;
   width: 200px;
} 
```

此刻，您看到剪切区域的高度和宽度固定为 100x200。我想保持固定宽度，但我需要高度是自动的，我的意思是，相对于 div 内容。这可能吗？我试过：

```
rect(0px,200px,auto,0px)
rect(0px,200px,100%,0px) 
```

但他们接缝不起作用。有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:27:53.493

`none`的有效值是`overflow`? 不应该`hidden`吗？

[http://www.w3schools.com/cssref/pr_pos_overflow.asp](http://www.w3schools.com/cssref/pr_pos_overflow.asp)

# python - 在 django-tasypie ToOneField 中从外键添加字段

> ID：13566335
> 
> 赞同：1
> 
> 时间：2012-11-26T13:56:16.087
> 
> 标签：python, django

使用 django-tasypie 时，除了资源 url 之外，有没有一种方法可以从相关对象中添加一个额外的字段？

我有一个相册模型和一个照片模型。

```
class Album(models.Model):
    title = models.CharField(_('Album Name'), max_length=250, default=_('Untitled Album'))

class Photo(models.Model):
    album = models.ForeignKey(Album) 
```

我在 api 中有这些作为 ModelResources：

```
class PhotoResource(ModelResource):
    album = fields.ToOneField('ampwefly.apps.photos.api.AlbumResource', 'album')

class AlbumResource(ModelResource):
    photo = fields.ToManyField(PhotoResource, 'photo_set', related_name='photo', full=True) 
```

就目前而言，当我访问单张照片的 url 时，我可以返回以下内容：

```
{
    album: "/api/v1/album/2/",
    description: "",
    id: "1",
    image: "/uploads/uploads/users/images/e-jey.jpg",
    resource_uri: "/api/v1/photo/1/",
    uploaded: "2012-11-22T22:42:26.051779"
} 
```

如果我使用：

```
album = fields.ToOneField('ampwefly.apps.photos.api.AlbumResource', 'album', full=True) 
```

这将返回专辑的所有字段，但我想做的是除了 Resource url 之外还返回标题，例如：

```
{
    album: {
        id: "2",
        resource_uri: "/api/v1/album/2/",
        title: "Untitled Album"
    },
    description: "",
    id: "1",
    image: "/uploads/uploads/users/images/e-jey.jpg",
    resource_uri: "/api/v1/photo/1/",
    uploaded: "2012-11-22T22:42:26.051779"
} 
```

获得上述结果的建议解决方案是什么？

# c# - Windows Phone 7.1 XNA 项目交换了 x 和 y 坐标

> ID：13566336
> 
> 赞同：0
> 
> 时间：2012-11-26T13:56:18.290
> 
> 标签：c#, xna, windows-phone-7.1, coordinate

我使用 C# 从 Visual Studio 模板创建了一个 Windows Phone XNA 游戏。出于某种原因，当在屏幕上的某个坐标处绘制对象时，我的 (0,0) 坐标在右侧，并且 x 和 y 坐标交换了。

这是我所拥有的（其他一切都作为模板）

```
 Vector2 pos; // My objects
 Texture2D pic; // My objects

 pos = new Vector2(300, 100); //in My LoadContent Menthod
 pic = Content.Load<Texture2D>("line"); //in My LoadContent Menthod

 spriteBatch.Begin(); // in my draw method
 spriteBatch.Draw(pic, pos, Color.White);
 spriteBatch.End(); 
```

我的对象在 (100,300) 处绘制，右上角为 (0,0)

有谁知道如何解决这一问题？

# android - 是否可以在 android 2.3 设备中流式传输 m3u8 视频播放列表？

> ID：13566341
> 
> 赞同：0
> 
> 时间：2012-11-26T13:56:38.300
> 
> 标签：android, video-streaming, http-live-streaming

我尝试了很多替代方法来实现 2.3 版 android 的实时视频流式传输 m3u8 播放列表，但无法做到。任何人都可以提出相同的建议。蒂亚...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:26:33.013

如果不使用 vitamio 播放器，您将无法使用低于 3.0 的 Android 版本玩 m3u8。

你可以从这个网址 下载它[https://dl.dropbox.com/s/9s65mxj67ix4t3d/Vitamio-SDK.7z?dl=1](https://dl.dropbox.com/s/9s65mxj67ix4t3d/Vitamio-SDK.7z?dl=1) 只需下载它并将这个库添加到你的项目中。

# youtube - 如何计算来自 youtube 频道的总观看次数？

> ID：13566343
> 
> 赞同：0
> 
> 时间：2012-11-26T13:56:43.387
> 
> 标签：youtube, youtube-api

我想使用 PHP 中的 Youtube API 从 youtube 上的频道获取总观看次数（所有视频）。我没有找到任何方法来做到这一点。有人知道吗？在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T22:41:55.553

您可以使用新的 YouTube Analytics API

[https://developers.google.com/youtube/analytics/v1/available_reports](https://developers.google.com/youtube/analytics/v1/available_reports)

您可以修改示例应用程序的代码以在客户端调用该api：

[https://developers.google.com/youtube/analytics/v1/sample-application](https://developers.google.com/youtube/analytics/v1/sample-application)

并做这样的事情来获得每天的观看次数：

```
var request = gapi.client.youtubeAnalytics.reports.query({
      // Convert dates to YYYY-MM-DD strings for start-date and end-date parameters.
      'start-date': formatDateString(lastWeek),
      'end-date': formatDateString(today),
      // Identify channel for which you're retrieving data.
      ids: 'channel==' + channelId,
      dimensions: 'day',
      metrics: 'views'
    }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-08T02:21:38.277

这是代码（不要忘记用您的 YouTube 用户名重命名您的用户名）：

```
$xdoc = new DomDocument;
$xdoc->Load('http://gdata.youtube.com/feeds/api/users/yourUserName');
$ytstat = $xdoc->getElementsByTagName('statistics')->item(0);
$total_views = $ytstat->getAttribute(totalUploadViews);
echo $total_views; 
```

# javascript - 检测 chrome 中的元素样式变化

> ID：13566346
> 
> 赞同：8
> 
> 时间：2012-11-26T13:56:53.103
> 
> 标签：javascript, google-chrome

我正在尝试找到一种方法来检测元素样式的变化，但我运气不佳。下面的代码适用于我定义的新属性，例如 tempBgColor，但我无法覆盖/隐藏现有属性，例如颜色。我知道 jquery 有一个监视功能，但它只检测来自 jquery api 的更改，而不是直接更改像 elem.style.color 这样的样式的值。

```
var e = document.getElementById('element');
e.style.__defineGetter__("color", function() {
   return "A property";
});
e.style.__defineSetter__("color", function(val) {
    alert("Setting " + val + "!");
}); 
```

任何指针？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-11-26T14:28:56.067

您应该可以使用[MutationObserver](https://developer.mozilla.org/en-US/docs/DOM/MutationObserver)来执行此操作- 请参阅[**演示**](http://jsfiddle.net/AXDyQ/)（仅限 Webkit），这是一种新的、闪亮的方式来获取有关 DOM 更改的通知。旧的，现在已弃用的方式是[Mutation events](https://developer.mozilla.org/en-US/docs/DOM/Mutation_events)。

Demo 只是在单击段落时将旧值和新值登录到控制台。请注意，如果旧值是通过非内联 CSS 规则设置的，则旧值将不可用，但仍会检测到更改。

**HTML**

```
<p id="observable" style="color: red">Lorem ipsum</p>​ 
```

**JavaScript**

```
var MutationObserver = window.WebKitMutationObserver;

var target = document.querySelector('#observable');

var observer = new MutationObserver(function(mutations) {
  mutations.forEach(function(mutation) {
    console.log('old', mutation.oldValue);
    console.log('new', mutation.target.style.cssText);
  });    
});

var config = { attributes: true, attributeOldValue: true }

observer.observe(target, config);

// click event to change colour of the thing we are observing
target.addEventListener('click', function(ev) {
    observable.style.color = 'green';
    return false;
}, false); 
```

感谢[这篇博](https://hacks.mozilla.org/2012/05/dom-mutationobserver-reacting-to-dom-changes-without-killing-browser-performance/)文，上面的一些代码。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-06-15T21:59:58.350

打开 Chrome 的开发者工具，您可以找到您感兴趣的样式更改的元素，右键单击它，选择“Break on...”和“属性修改”。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T15:14:19.880

这是一个使用 setTimeout 和 undescorejs 的幼稚实现。

找出进行了哪些更改的唯一方法是遍历样式对象属性。

这是现场[示例](http://plnkr.co/edit/tALDCm?p=preview)

```
$( function () {
  var ele = document.getElementById('ele'), 
      oldStyle = {};

function checkEquality() {
  style = _.clone(ele.style);
  if (!_.isEqual(style, oldStyle)) {
    console.log('Not equal');
    oldStyle = _.clone(style);
  } else {
    console.log('Equal');
  }
  _.delay(checkEquality, 2000);
}

checkEquality();

$('a#add_prop').on('click', function () {
  var props = $('#prop').val().replace(/ /g, '').split(':');
  console.log(props);
  $(ele).css(props[0], props[1]);
});

$('#prop').on('keydown', function (e) {
  if (e.keyCode == 13) {
    $('a#add_prop').trigger('click');    
  }
});

}); 
```

# .net - RDLC 报告中的 RepeatWith 属性

> ID：13566348
> 
> 赞同：1
> 
> 时间：2012-11-26T13:57:02.090
> 
> 标签：.net, reporting-services, rdlc

`RepeatWith`RDLC 报告中属性的用途是什么？

我正在尝试创建一个包含列表的报告，列表中有 1 个表格和 1 个文本框，它们与页面右侧对齐，宽度为 1 厘米，页面高度为 1，就像标记一样。

我的问题是，如果表格超过一页，我的标记文本框只显示第一页。我认为该`RepeatWith`属性会帮助我，但我不明白它的作用。

看我的油漆工作:)

![在此处输入图像描述](../Images/15b133c12ba712bd67b5bb7859adcd08.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T10:15:49.233

首先，您不能在包含数据区域的数据区域中使用 RepeatWith，在您的示例中，您有一个列表（数据区域）内的文本框，该列表再次包含一个表（数据区域）。

我试图放置一个将呈现大约 5 页的表格，因此它将被重复，以及一个与表格对齐的文本框，我在 tablix 上设置了 RepeatWith 引用。

当我预览报告时，我看到 4-5 页，并且在所有这些页面上我都看到了我的文本框。

# sql - PostgreSQL - 将窗口函数分配给别名

> ID：13566350
> 
> 赞同：1
> 
> 时间：2012-11-26T13:57:09.500
> 
> 标签：sql, postgresql

我正在尝试将 ROW_NUMBER()... 设置为别名，以便可以在 OFFSET 中引用它。例如`OFFSET some_alias - 1`。我需要从更大的查询中获取包含 ROW_NUMBER() 的单行。这是我的工作代码（得到正确的 ROW_NUMBER()，但没有被正确的数量抵消）：

```
WITH FirstQuery AS (
    SELECT "RepInitials", COUNT("OrderStatus"), ROW_NUMBER()OVER(ORDER BY COUNT("OrderStatus") DESC)
    FROM "tblBulkSalesQuery"
    WHERE "OrderStatus" = 'CMC'
    GROUP BY "RepInitials"
)
SELECT "RepInitials", COUNT("OrderStatus"), ROW_NUMBER()OVER(ORDER BY COUNT("OrderStatus") DESC)
    FROM "tblBulkSalesQuery"
    WHERE "OrderStatus" = 'CMC'
    GROUP BY "RepInitials"
    LIMIT 1
    OFFSET 1; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:00:59.740

```
select *
from (
    SELECT "RepInitials", 
           COUNT("OrderStatus") as order_status_count, 
           ROW_NUMBER() OVER (ORDER BY COUNT("OrderStatus") DESC) as rn
    FROM "tblBulkSalesQuery"
    WHERE "OrderStatus" = 'CMC'
    GROUP BY "RepInitials"
) as t
where rn = 1 
```

**编辑**：

这`t`是嵌套选择（“派生表”）的别名。PostgreSQL 要求每个派生表都有自己的“名称”，而这只能通过分配别名来完成。

它几乎与以下内容相同：

```
with t as (
  ... here goes the real select ...
)
select *
from t 
where rn = 1; 
```

# c++ - 无法让 pcre 在 C++ 中工作

> ID：13566356
> 
> 赞同：3
> 
> 时间：2012-11-26T13:57:33.233
> 
> 标签：c++, ubuntu, pcre

我对 c++ 很陌生，因为我仍在学习它的基础知识

安。我想在其中使用 pcre，但到目前为止还没有成功。

我正在运行 Ubuntu，并且在我最近的尝试中尝试安装 libpcre3-dev 包（我应该提到我对 Linux 也很陌生）

我包括pcre

```
#include <pcrecpp.h> 
```

目前，每当我尝试定义 RE 对象时，都会收到错误“未定义对 pcrecpp::RE::no_arg 的引用”

```
pcrecpp::RE reg("fys|smi|int|fok|arv|kar"); 
```

谁能向我解释我做错了什么，或者给我一个关于如何做的分步指南。

而且我确实知道 c++ 有一个正则表达式库，但是由于我习惯于从 php 进行 pcre，这就是我想要的

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:00:23.370

您应该传递`-lpcrecpp`命令行以将您的程序与 PCRE 库链接。仅在头文件中包含声明是不够的。

# windows - Win7计划任务分钟设置？

> ID：13566358
> 
> 赞同：0
> 
> 时间：2012-11-26T13:57:44.560
> 
> 标签：windows, windows-7, scheduled-tasks

我必须每分钟处理一个 bat 文件，但 win7 计划任务不允许每分钟。最低5分钟。我可以将计划任务win7设置为每分钟吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:11:58.127

[`http://www.splinterware.com/products/wincron.htm`](http://www.splinterware.com/products/wincron.htm)为之使用。

我与 splinterware 没有任何关系

或安装 cygwin 并改用 cronjob

# asp.net-mvc-4 - mvc 4 rc中的Windsor Dependencies注入参数化的apicontroller

> ID：13566359
> 
> 赞同：0
> 
> 时间：2012-11-26T13:57:44.527
> 
> 标签：asp.net-mvc-4, asp.net-web-api, dependencies, castle-windsor

因此，我使用[Mark Seemann 的](http://blog.ploeh.dk/2012/10/03/DependencyInjectionInASPNETWebAPIWithCastleWindsor.aspx)示例在 MVC 4 RC Web Api 中使用 Windsor 进行依赖注入，但我收到异常说它无法解析对我的 ApiController 的依赖

```
public class StatisticsController : ApiController
{
    private readonly ILogger _logger;
    private readonly IClickMessageProducer _producer;

    public StatisticsController(ILogger logger, 
        IClickMessageProducer clickMsgProducer)
    {
        _logger = logger;
        _producer = clickMsgProducer;
    }

    public string Get(string msg, string con) {...}
} 
```

我的 Global.asax 看起来像这样：

```
protected void Application_Start()
    {
        // different configs removed for brevity

        BootstrapContainer();
    }

    private static IWindsorContainer _container;

    private static void BootstrapContainer()
    {
        _container = new WindsorContainer()
            .Install(FromAssembly.This(), new ProducerInstaller())
            .Install(FromAssembly.This(), new WebWindsorInstaller());

        GlobalConfiguration.Configuration.Services.Replace(
            typeof(IHttpControllerActivator),
            new WindsorHttpControllerActivator(_container));
    } 
```

安装人员为 Windsor 提供了所需的参考资料`IClickMessageProducer`。我`IController`在一个真正的 MVC 4 项目中使用它，所以我相信这部分是有效的。

要指定，这是我在尝试通过`StatisticsController`对 API 的 GET 调用访问方法时收到的错误消息：

```
<Error>
<Message>An error has occurred.</Message>
<ExceptionMessage>
    Can't create component 'APIMVC.Controllers.StatisticsController'
    as it has dependencies to be satisfied. 
    'APIMVC.Controllers.StatisticsController' is waiting for the following 
    dependencies: - Service 'Castle.Core.Logging.ILogger' which was not registered.
</ExceptionMessage>
<ExceptionType>Castle.MicroKernel.Handlers.HandlerException</ExceptionType>
<StackTrace>...</StackTrace>
</Error> 
```

调用是这样的：“http://localhost:60000/api/statistics?msg=apitest&con=apimvc”

如果有人有一个工作示例或只是对我的 Windsor 实施问题的评论，我会很高兴看到它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-28T15:25:56.513

您的 ILogger 实现未在 Windsor 中注册。从 StatisticsController 中删除 ILogger 参数，然后重试。如果它有效，您将需要注册一个 ILogger 实现。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:01:51.947

`_container = new WindsorContainer().Install(FromAssembly.This(), new ProducerInstaller()).Install(FromAssembly.This(), new WebWindsorInstaller());`

这是错误的部分。如您所见，我调用`Install(FromAssembly.This())`两次女巫导致`LoggerInstaller`尝试添加`LoggingFacility`两次导致错误。

新的实现如下所示： `_container = new WindsorContainer().Install(FromAssembly.This(), new ProducerInstaller(), new WebWindsorInstaller());`

# visual-studio - NServiceBus“没有可用的源”

> ID：13566361
> 
> 赞同：0
> 
> 时间：2012-11-26T13:57:54.823
> 
> 标签：visual-studio, nservicebus, asp.net-web-api, nservicebus3

我正在开发一个使用 NServiceBus 的 web api 项目。每次我启动我的 NserviceBus 主机时，调试过程都会中断，我会收到“无可用源”消息，我无法弄清楚发生了什么。我可以从我的 api 项目发送消息，主机将通过简单地继续跳过错误来接收它，但每次我启动主机时都会收到该消息。

我的 nservicebus 配置：

```
 // nservicebus configuration
        Configure.WithWeb()
                 .DefaultBuilder()
                 .ForWebApi()
                 .Log4Net()
                 .XmlSerializer()
                 .MsmqSubscriptionStorage()
                 .MsmqTransport()
                     .IsTransactional(false)
                     .PurgeOnStartup(false)
                 .UnicastBus()
                    .ImpersonateSender(false)
                 .CreateBus()
                 .Start(() => Configure.Instance.ForInstallationOn<NServiceBus.Installation.Environments.Windows>().Install()); 
```

我的 web.config：

```
<configSections>
<section name="MsmqTransportConfig" type="NServiceBus.Config.MsmqTransportConfig, NServiceBus.Core" />
<section name="UnicastBusConfig" type="NServiceBus.Config.UnicastBusConfig, NServiceBus.Core" />
</configSections>

<MsmqTransportConfig ErrorQueue="Error" NumberOfWorkerThreads="1" MaxRetries="5" />
<UnicastBusConfig>
<MessageEndpointMappings>
  <add Messages="Messages" Endpoint="Domain" />
</MessageEndpointMappings>
</UnicastBusConfig> 
```

app.config：

```
<configSections>
<section name="MsmqTransportConfig" type="NServiceBus.Config.MsmqTransportConfig, NServiceBus.Core" />
<section name="MessageForwardingInCaseOfFaultConfig" type="NServiceBus.Config.MessageForwardingInCaseOfFaultConfig, NServiceBus.Core" />
</configSections>
<MsmqTransportConfig ErrorQueue="error" NumberOfWorkerThreads="1" MaxRetries="5" />
<MessageForwardingInCaseOfFaultConfig ErrorQueue="error" /> 
```

我的处理程序实现了 IHandleMessages，当我继续通过错误消息时，它似乎处理了消息，并且端点被配置为服务器。当 NServiceBus 的控制台窗口出现时，如果队列中已有消息，我会收到错误消息，告诉我端点未配置为发布者。

我正在使用 NServiceBus 3.0.0。

感谢您的任何意见。

# javascript - 离开编辑的html表单前提示确认

> ID：13566364
> 
> 赞同：6
> 
> 时间：2012-11-26T13:58:00.190
> 
> 标签：javascript, angularjs, forms

如果用户试图留下未保存的已编辑表单，则会弹出一个消息框

“此页面要求您确认是否要离开 - 您输入的数据可能不会保存。离开页面并留在页面上”

我们可以通过浏览器的一些特殊功能来调用这个确认框吗？我想在 AngularJS 应用程序中实现它

![在此处输入图像描述](../Images/16c39f387303a832f92bc971a5814a7e.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T14:15:12.250

Warlock 的回答部分正确，但这样做会破坏可测试性。

在 Angular 中，你会想要使用[$window](http://docs.angularjs.org/api/ng.$window)，并且你会想要`$dirty`在你的表单上观看。您需要有一个命名的表格，请注意`name="myForm"`下面。然后你可以`$watch` `$dirty`在你的表格上`$scope`：

```
app.controller('MainCtrl', function($scope, $window) {
  $scope.name = 'World';
  var win = $window;
  $scope.$watch('myForm.$dirty', function(value) {
    if(value) {
      win.onbeforeunload = function(){
        return 'Your message here';
      };
    }
  });
}); 
```

HTML

```
<form name="myForm">
  Name: <input type="text" ng-model="name"/>
</form> 
```

这是一个演示：[http://plnkr.co/edit/3NHpU1](http://plnkr.co/edit/3NHpU1)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T14:03:36.360

您可以使用“onbeforeunload”事件。语法如下：

```
window.onbeforeunload = function () {
    return "Your text string you want displayed in the box";
} 
```

此事件将弹出您在上面描述的确认对话框，询问用户是否真的想要离开页面。

希望这可以帮助。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-02-01T22:14:22.010

如果您想在确定您的表单脏时取消路由更改，您可以这样做：

```
$rootScope.$on('$locationChangeStart', function(event) {
  event.preventDefault();
}); 
```

这将取消路由并让您留在当前页面。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-10-22T18:06:43.103

我喜欢@blesh 的回答，但我认为它无法解释内部 url 更改（例如，如果您在应用程序上使用 ngView 并访问不同的内部视图）。window.onbeforeunload 永远不会在哈希 # 更改时被调用。在这种情况下，您必须同时监听 window.onbeforeunload 和 $locationChangeStart：

```
app.controller('OtherCtrl', ['$scope', '$window', '$location', '$rootScope', function($scope, $window, $location, $rootScope) {
  $scope.message = "This time you get a confirmation.";
  $scope.navigate = function() {
    $location.path("/main");
  }
  var getMessage = function() {
    if($scope.myForm.$dirty) {
      return $scope.message;
    } else {
      return null;
    }
  }
  $window.onbeforeunload = getMessage;
  var $offFunction = $rootScope.$on('$locationChangeStart', function(e) {
    var message = getMessage();
    if(message && !confirm($scope.message)) {
      e.preventDefault();
    } else {
      $offFunction();
    }
  });
}]); 
```

在此处查看 plunkr：http://plnkr.co/edit/R0Riek?p= [preview](http://plnkr.co/edit/R0Riek?p=preview)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-05-20T08:35:10.187

您可以使用 jQuery 使用这个简单的不显眼的代码轻松保护您的表单。放在`</body>`结束标签之前。

```
(function () {
    jQuery('form').one('change', function () {
        window.onbeforeunload = function () {
            return 'Form protection';
        };
    });
})(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-11-26T14:13:08.987

我认为您需要使用`$window.alert`or`$window.confirm`或 beforeroutechange

[角度文档](http://docs.angularjs.org/api/ng.%24route)

# asp.net-mvc-3 - 使用 i18n.DataAnnotations 。它究竟是如何工作的？

> ID：13566365
> 
> 赞同：0
> 
> 时间：2012-11-26T13:58:02.730
> 
> 标签：asp.net-mvc-3, razor, localization, internationalization

我正在使用 asp.net mvc 3 实现一个多语言站点。
一位朋友向我推荐了这个项目[https://github.com/danielcrenna/i18n](https://github.com/danielcrenna/i18n)

到目前为止，我已经成功地使它在控制器和视图（剃刀）中工作，但在数据注释中却没有。

例如

```
public class LogOnModel
{
    [i18n.DataAnnotations.Email]
    [Required(ErrorMessage = "Required Field")]
    [i18n.DataAnnotations.DataType(DataType.EmailAddress)]
    public string Email { get; set; }

    [i18n.DataAnnotations.Required(ErrorMessage = "Required Field")]
    [DataType(DataType.Password)]
    [i18n.DataAnnotations.Display(Name = "Password")]
    public string Password { get; set; }

    [i18n.DataAnnotations.Display(Name = "Remember me?")]
    public bool RememberMe { get; set; }
} 
```

每当构建成功时，上面的代码应该会在 .po 文件中生成新条目。但是什么也没有发生。

有没有人有这方面的知识？提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-15T18:40:13.873

似乎使用 i18n v1 无法使 i18n.DataAnnotations 正常工作，我在 github [https://github.com/turquoiseowl/i18n/issues/104上提出了问题](https://github.com/turquoiseowl/i18n/issues/104)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-29T13:00:24.940

我无法评论您在 GitHub 上使用的 i18n 框架，但如果它有帮助，.NET 中有类似的东西。在 .NET 中执行此操作的方式不是基于 .po，而是基于编译成附属程序集的资源。

对于 MVC，您可以使用[DisplayAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.displayattribute.aspx)来指定包含您希望使用的资源字符串的类型。验证消息有等效的属性。

# android - 当键盘出现时，ActionBar 会离开屏幕

> ID：13566369
> 
> 赞同：10
> 
> 时间：2012-11-26T13:58:08.593
> 
> 标签：android, keyboard, android-actionbar

如何将 ActionBar 保持在原位？看截图。活动标签是半隐藏的。

![在此处输入图像描述](../Images/8976e4c243f3462207522d8a6c059956.png)

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-26T14:30:25.533

尝试 `android:windowSoftInputMode="adjustResize"`在清单中使用“活动”元素

# android - 在 apktool 中更改 png

> ID：13566371
> 
> 赞同：1
> 
> 时间：2012-11-26T13:58:23.500
> 
> 标签：android, eclipse

我已经在我的 Mac 上使用 apktools 反编译了一个 apk，并且想知道是否可以更改 apktools 上的 png 图标和启动画面，如果可以，因为没有我可以在网上找到的指导

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:02:13.087

如果要更改 APK 中的图像文件，则不需要 apktools。
只需将 png 文件替换为 zip 实用程序，然后使用 jarsigner（可通过 Java 开发工具包或 Android SDK 获得）对应用程序进行签名。

# android - Android Spinner 移除 OnItemSelectedListener

> ID：13566372
> 
> 赞同：4
> 
> 时间：2012-11-26T13:58:23.727
> 
> 标签：android, android-spinner, android-2.3-gingerbread

其他人有问题，因为它不起作用，我有问题它正在工作（它不应该）

我有一个数据模型，它已保存，需要加载回 GUI，Activity。它有一些微调值。

数据被放置到一个通用的可访问类，一个引用持有者。

活动的 onCreate 它将检查是否处于编辑模式：

```
editMode = getIntent().getBooleanExtra(EDIT_MODE_KEY, false); 
```

它将从 xml 加载 UI 元素，并开始选择、填充值。在编辑模式和创建模式下，它应该选择具有数据模型的值。在运行时（在 onResume() 之后）有一些工作流程：是在 spinner1 处选择了某些东西，而不是应该刷新 spinner2 适配器内容等等。

它不起作用，`.setSelection(positiontoSelect);`所以我添加了一个延迟的帖子，现在正在工作。

我的问题是：我想删除临时选择侦听器，调用选择并添加回侦听器。

这是代码，应该修改：

```
 if (editedTimezonePosition > -1) {                        
                final int positiontoSelect = editedTimezonePosition;
                new Handler().postDelayed(new Runnable() {
                    public void run() {
                        OnItemSelectedListener listener = spSelectTimezone.getOnItemSelectedListener();
                        spSelectTimezone.setOnItemSelectedListener(null);
                        spSelectTimezone.setSelection(positiontoSelect);
                        spSelectTimezone.setOnItemSelectedListener(listener);                   
                    }
                }, 250);            
            } 
```

设置为 null 侦听器无效：我正在回调我的侦听器方法。

如果您有任何解决方法的想法，请分享！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:43:12.000

您可以在`onItemSelected`方法中放置一个计数器变量。如果它是 0（意味着第一次调用该方法），除了递增变量之外什么都不做。如果它大于 0，则执行其余代码。

```
private int mSpinnerSelectionCount=0;

public void onItemSelected(AdapterView<?> parent, View view,
    int pos, long id) {
        if(mSpinnerSelectionCount == 0){
            mSpinnerSelectionCount++;
        } else {
            // Your normal selection code here
        }    
    } 
```

# php - 我的查询不会执行

> ID：13566378
> 
> 赞同：-1
> 
> 时间：2012-11-26T13:58:46.363
> 
> 标签：php, database, forms, pdo

我一直在编写一个包含安装程序的脚本，现在我陷入了无法执行查询的部分。我正在使用 PDO。

所以，我的问题是第二个`try`块内的两个查询没有被执行。

这是我的代码：

```
<?php
$root_path = '../';
require("{$root_path}includes/functions_captcha.php");

$sub    = (isset($_GET['sub'])) ? $_GET['sub'] : '';
$step   = (isset($_POST['step'])) ? (int) $_POST['step'] : 0;
$submit = (isset($_POST['submit'])) ? true : false;

$driver_options = '';
$db_errors = array();

$drivers = PDO::getAvailableDrivers();
foreach ($drivers as $driver)
{
    $driver_options .= '<option value="' . $driver . '">' . $driver . '</option>';
}
?>
<!DOCTYPE html>
<html>
<head>
    <title>Q&amp;A CAPTCHA &bull; Installation</title>
    <link type="text/css" rel="stylesheet" href="../admin/style/stylesheet.css" />
</head>
<body>
    <div id="main">
        <a href="index.php"><h1>Q&amp;A CAPTCHA Installation</h1></a>

        <div class="content">
            <?php if (!$sub || ($sub == 'database' && !$step) && !$submit): ?>
            <form method="post" action="?sub=database">
            <table width="100%">
                    <tr class="table_top">
                        <th align="center" colspan="2">Database settings</th>
                    </tr>

                <tr class="row1">
                    <td><strong>Database type:</strong></td>
                    <td><select name="driver"><?php echo $driver_options; ?></select></td>
                </tr>
                <tr class="row2">
                    <td><strong>Database server hostname:</strong></td>
                    <td><input type="text" name="hostname" placeholder="localhost" required value="" /></td>
                </tr>
                <tr class="row1">
                    <td><strong>Database name:</strong></td>
                    <td><input type="text" name="name" required value="" /></td>
                </tr>
                <tr class="row2">
                    <td><strong>Database username:</strong></td>
                    <td><input type="text" name="username" required value="" /></td>
                </tr>
                <tr class="row1">
                    <td><strong>Database password:</strong></td>
                    <td><input type="password" name="password" value="" /></td>
                </tr>
                <tr>
                    <td align="center" colspan="2">
                        <input type="submit" name="submit" value="Proceed to next step &raquo;" />
                        <input type="hidden" name="step" value="2" />
                    </td>
                </tr>
            </table>
            </form>
            <?php endif; ?>
            <?php if ($sub == 'database' && $step == 2 && $submit): ?>
                <?php 
                    try {
                        $db = new PDO("{$_POST['driver']}:host={$_POST['hostname']};dbname={$_POST['name']}", $_POST['username'], $_POST['password']);

                        try {
                            $db->beginTransaction();
                            $time = time();

                            $sql = "CREATE TABLE captcha_config (
                                id mediumint(8) UNSIGNED NOT NULL auto_increment,
                                question varchar(255) DEFAULT '' NOT NULL,
                                date int(11) UNSIGNED DEFAULT '0' NOT NULL
                                answers TEXT DEFAULT '' NOT NULL);";
                            $db->query($sql);

                            $sql = "INSERT INTO captcha_config 
                                (question, date, answers) VALUES (
                                'What color can the sky have?', {$time}, 'Blue~~Grey~~Orange');";
                            $db->query($sql);

                            $db->commit();
                        }
                        catch (PDOException $e)
                        {
                            $db->rollBack();
                            $db_errors[] = (strpos($e->getMessage(), ']') !== false) ? substr(strrchr($e->getMessage(), ']'), 1) : $e->getMessage();
                        }
                    }
                    catch (PDOException $e)
                    {
                        $db_errors[] = (strpos($e->getMessage(), ']') !== false) ? substr(strrchr($e->getMessage(), ']'), 1) : $e->getMessage();
                    }

                    $db_errors = implode('<br />', $db_errors);
                ?>
            <form method="post" action="?sub=config">
            <table width="100%">
                <tr class="table_top">
                    <th align="center" colspan="2">Database connection</th>
                </tr>
                <tr class="row1">
                    <td align="center"><?php echo (empty($db_errors)) ? '<strong style="color: green;">Connection was successful</strong>' : "<strong style='color: red;'>{$db_errors}</strong>"; ?></td>
                </tr>
                <tr>
                    <td align="center">
                        <?php if (empty($db_errors)): ?> 
                            <input type="submit" name="submit" value="Proceed to next step &raquo;" />
                        <?php else: ?> 
                            <a href="index.php" class="button">&laquo; Back to previous step</a>
                        <?php endif; ?>
                        <input type="hidden" name="step" value="3" />
                    </td>
                </tr>
            </table>
            </form>
            <?php endif; ?>
        </div>
    </div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:43:23.610

您在创建表 stmt 加上主键行中缺少逗号

```
 try {

                        $db->beginTransaction();
                        $time = time();
                        $sql = "CREATE TABLE captcha_config (
                            id mediumint(8) UNSIGNED NOT NULL auto_increment,
                            question varchar(255) DEFAULT '' NOT NULL,
                            date int(11) UNSIGNED DEFAULT '0' NOT NULL,
                            answers TEXT DEFAULT '' NOT NULL,
            PRIMARY KEY (id));";
                        $db->query($sql);

                        $sql = "INSERT INTO captcha_config 
                            (question, date, answers) VALUES (
                            'What color can the sky have?', {$time}, 'Blue~~Grey~~Orange');";
                        $db->query($sql);

                        $db->commit();
                    } 
```

显示表格：

```
+----------------------+
| Tables_in_jonah_junk |
+----------------------+
| _adminfiles          |
| _adminlang           |
| _adminlog            |
| _adminprivs          |
| _adminroles          |
| _adminusers          |
| captcha_config       |
| sometable            |
+----------------------+
8 rows in set (0.00 sec)

mysql> select * from captcha_config;
+----+------------------------------+------------+--------------------+
| id | question                     | date       | answers            |
+----+------------------------------+------------+--------------------+
|  1 | What color can the sky have? | 1353940684 | Blue~~Grey~~Orange |
+----+------------------------------+------------+--------------------+ 
```

# mysql - 在 Windows Server 上运行时，Sphinx searchd 问题

> ID：13566385
> 
> 赞同：0
> 
> 时间：2012-11-26T13:59:05.603
> 
> 标签：mysql, sphinx, config, indexer

我正在使用 sphinx 来索引我的内容。我在我的开发环境（xampp）中使用了它，它运行良好。现在我把它带到服务器（相同的配置文件），它给我带来了麻烦。

我有一台带有 Plesk 面板的 VPS Windows 2008 服务器。我是管理员。问题是当我运行索引器工具时，它告诉我它找到了 0 个文档并索引了 0 个文档。因此，就访问数据库而言，它似乎工作正常，但它只是没有找到任何文档。有没有人有任何想法，我花了一整天的时间玩配置和数据库，但没有成功。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:21:06.540

那么也许 sphinx 试图索引的数据库表是空的？

无论哪种方式都建议在运行索引器时添加调试命令行开关。例如--verbose、--print-queries 等。它们可能会给你一个更好的线索，问题出在哪里。

# c# - 非事务队列上的 MSMQ 错误

> ID：13566388
> 
> 赞同：2
> 
> 时间：2012-11-26T13:59:09.743
> 
> 标签：c#, msmq

拥有从队列中窥视消息的简单代码

```
message = myQueue.Peek(TimeOutForPeek); 
```

另一方面，消息只是发送到队列：

```
sendQueue.Send(message); 
```

如果 myQueue 是事务性的，那么一切正常。但如果不是，在运行一段时间后我得到异常（见下文）并且处理停止。

> System.Messaging.MessageQueueException (0x80004005)：操作在完成之前被取消。在 System.Messaging.MessageQueue.ReceiveCurrent（TimeSpan 超时，Int32 操作，CursorHandle 游标，MessagePropertyFilter 过滤器，MessageQueueTransaction internalTransaction，MessageQueueTransactionType transactionType）在 System.Messaging.MessageQueue.Peek（TimeSpan 超时）

什么可能导致这种差异以及如何处理这种故障？我对 MSMQ 不是很熟悉，任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T12:46:46.867

我不能完全确定它，但至少错误消息显然表明有一个长时间运行的进程没有在一定时间内完成。

正如您在上面的评论中所说，在短时间内收到了 3000-5000 条消息，我想当错误发生时接收系统仍在忙于处理它们，并且没有尽快返回以在 a 之前阅读下一条消息发生超时。

可能您正在达到系统的资源限制？

您的描述将适合...例如，机器正在接收如此多的消息，但在下一条消息到达之前无法足够快地处理它们。

如果它适用于事务队列，我怀疑 MSMQ 资源处理在两种情况下都不同。

看看 John Breakwell 非常详细的博文[Insufficient Resources？逃跑，逃跑！](http://blogs.msdn.com/b/johnbreakwell/archive/2006/09/18/insufficient-resources-run-away-run-away.aspx)并检查是否有一些你能找到有用的东西。里面有很多东西。

其他想法：

如果您的接收端是单线程的，如果您还没有这样做（如果适用于您的场景），请考虑并行处理消息。这可能有助于在新消息到达之前更快地将消息从队列中取出。

# class - 将鼠标悬停在其他 CSS 类上时更改类属性

> ID：13566389
> 
> 赞同：1
> 
> 时间：2012-11-26T13:59:10.083
> 
> 标签：class, css, html

当“left1_sub”类悬停时，我试图为“left2”类的 div 提供边框半径。

我已经搜索了很多解决方案，但似乎没有什么对我有用。

它的 html：[http](http://web318.login-11.hoststar.at/ben/kleinraum/wp/menuimg/index.html) ://web318.login-11.hoststar.at/ben/kleinraum/wp/menuimg/index.html 和完整的 css：[http ://web318.login-11.hoststar.at/ben /kleinraum/wp/menuimg/style.css](http://web318.login-11.hoststar.at/ben/kleinraum/wp/menuimg/style.css)

```
.left1_sub{
     padding-top:2%;
     padding-bottom:2%;
     width: 100%;
   float: left;
   background-color: #cccccc
 }

.left1_sub:hover ~ .left2 {border-radius: 10px;}

.left2{

   float: left;
   margin-right: 20px;
   margin-top: 20px;
   width: 500px;
   height:600px;
   background-color: #ccccff
} 
```

只是向 css3 介绍自己，如果有失败，请见谅。

本

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:46:51.653

这可以很容易地用 jQuery 或类似的东西来完成。

如果对使用 jQuery 感到舒服，这样的东西会起作用。

首先，在 CSS 中创建一个具有边框半径的类：

```
.rounded { border-radius: 5px; /* (or whatever) */ } 
```

然后，在`<script>`标签中：

```
jQuery(document).ready(function($) {
     var obj = $('.left1_sub'),
         target = $('.left2');

     obj.hover(
          //mouse in
         function(){
            target.addClass('rounded');
         //mouse out    
         },function(){
            target.removeClass('rounded');
     });

}); 
```

[http://jsfiddle.net/wGzgB/11/](http://jsfiddle.net/wGzgB/11/)

# php - 在 wordpress 中使用 get_header 时添加页首间距

> ID：13566396
> 
> 赞同：0
> 
> 时间：2012-11-26T13:59:44.007
> 
> 标签：php, css, wordpress, space

使用此代码时在页面顶部添加空格：

```
<?php get_header(); ?> 
```

但在正常情况下，代码是正确的，而不是页面顶部的空间

添加 get_header 后的图片：

![在此处输入图像描述](../Images/081a6f57a3ec1b642148e4c7e0ed9ddd.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:08:31.190

如果您只是添加了空格或换行符，那么 HTML 只会删除它们。

您必须添加一些标签`<br>`或使用 CSS 来添加所需的空间。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:24:36.553

如果我理解你的问题..试试这个：

```
* {
    margin:0; padding:0;
}
body {
    padding-top: 50px;
} 
```

然后根据您的需要进行调整。

# jquery - 如何在 IE 中包含跨域 javascript 库？

> ID：13566413
> 
> 赞同：0
> 
> 时间：2012-11-26T14:00:58.060
> 
> 标签：jquery, django, internet-explorer, heroku, cross-domain

我的网站在 Heroku 上运行，静态资产在 AWS S3 上。所以所有包括来自's3.amazonaws.com' 现在这在 chrome 和 firefox 上运行得非常好，但在 IE 上却不行。尝试加载 js 文件时显示权限被拒绝错误。

我阅读[了绕过同源策略的方法，](https://stackoverflow.com/questions/3076414/ways-to-circumvent-the-same-origin-policy)但仍然不清楚哪些是最好的跨浏览器解决方案。

# c# - 在 xna 项目中配置模型/纹理位置的最佳方法是什么

> ID：13566416
> 
> 赞同：2
> 
> 时间：2012-11-26T14:01:03.680
> 
> 标签：c#, 3d, xna, mesh

我想知道我下面使用的方法是否是在屏幕上绘制之前确定模型位置的正确方法。因为当我想创建一个复制我的模型的地板时。我发现自己面临着“Z-fighting”问题^ ^。

非常感谢你

在绘制之前将代码示例放在我的模型上的位置：

```
model_Position.X = (float) 1.0;
model_Position.Z = (float) 3.0;
model_Position.Y = (float) 5.0;

// Draw the model. A model can have multiple meshes, so loop.
foreach (ModelMesh mesh in model_ground_land1.Meshes)
{
    // This is where the mesh orientation is set, as well 
    // as our camera and projection.
    foreach (BasicEffect effect in mesh.Effects)
    {
        effect.EnableDefaultLighting();
        effect.World = transforms[mesh.ParentBone.Index]  *
    Matrix.CreateRotationY(model_Rotation) * Matrix.CreateTranslation(model_Position);
        effect.View = View;
        effect.Projection = Projection;
    }
    // Draw the mesh, using the effects set above.
    mesh.Draw();
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-16T09:34:26.050

据我所知，您的方法对于定位模型是正确的。关于 Z 战斗问题，当两个 3D 面在同一平面上绘制时相互重叠时会发生。正如您所说的“复制模型”，这听起来像是问题所在，而不是模型定位本身。要解决战斗，您可以`GraphicsDevice.RasterizerState.DepthBias`在绘制模型的第二个副本之前设置一些非零值。从[文档](http://msdn.microsoft.com/en-us/library/microsoft.xna.framework.graphics.renderstate.depthbias%28v=XNAGameStudio.10%29.aspx)中：

> “z-bias 值高的多边形出现在值低的多边形前面，不需要对绘制顺序进行排序。例如，值为 1 的多边形出现在值为 0 的多边形前面。”

# wpf - 当绑定值为空时，WPF 绑定到不同的属性路径

> ID：13566417
> 
> 赞同：0
> 
> 时间：2012-11-26T14:01:04.223
> 
> 标签：wpf, xaml, data-binding

我需要做一些类似于 PriorityBinding 的事情，除了在绑定为 null 时使用较低优先级的绑定（而不是在绑定像 PriorityBinding 中那样无效时）。我似乎无法找到一种“好”的方法来做到这一点，除了创建两个重复的控件，每个控件都有我想要使用的每个绑定并根据绑定是否为空来触发它们的可见性。必须有更好的方法，因为我不想每次需要更改某些内容时都更新两个控件（重复代码 == 不好）。

例子：

当 SelectedItem.SelectedItem 不为空时：

```
<ContentControl Content="{Binding SelectedItem.SelectedItem}"/> 
```

当 SelectedItem.SelectedItem 为空时：

```
<ContentControl Content="{Binding SelectedItem}"/> 
```

使用这样的样式不起作用：

```
<ContentControl Content="{Binding SelectedItem.SelectedItem}">
    <ContentControl.Style>
        <Style TargetType="ContentControl">
            <Style.Triggers>
                <DataTrigger Binding="{Binding SelectedItem.SelectedItem}" Value="{x:Null}">
                    <Setter Property="Content" Value="{Binding SelectedItem}"/>
                </DataTrigger>
            </Style.Triggers>
        </Style>
    </ContentControl.Style>
</ContentControl> 
```

我猜这不起作用，因为样式中的绑定试图使用 ContentControl 的 Content 属性作为它们的源，因此 DataTrigger 正在测试`SelectedItem.SelectedItem.SelectedItem.SelectedItem`。有任何想法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:22:18.383

您可以使用 MultiBinding 来实现您想要的：

```
<ContentControl Content="{Binding SelectedItem.SelectedItem}">
    <ContentControl.Content>
        <MultiBinding Converter="{StaticResource ResourceKey=myConverter}">
            <Binding Path="SelectedItem"/>
            <Binding Path="SelectedItem.SelectedItem"/>
        </MultiBinding>
    </ContentControl.Content>
</ContentControl> 
```

您的转换器可能看起来像

```
public class MyMultiConverter:IMultiValueConverter
{
   public object Convert(object[] values, Type targetType, object parameter, CultureInfo culture)
   {
      if (values[1] == null)
          return values[0];

      return values[1];
   }

   public object[] ConvertBack(object values, Type[] targetType, object parameter, CultureInfo culture)
   {
      return null;
   }
} 
```

# java - 在 MVC 模式中自动调用重复值和一些方法

> ID：13566424
> 
> 赞同：2
> 
> 时间：2012-11-26T14:01:34.560
> 
> 标签：java, swing, model-view-controller, design-patterns, jbutton

请看下面的代码

```
package test;

import java.awt.*;
import java.awt.event.*;
import java.beans.PropertyChangeEvent;
import java.beans.PropertyChangeListener;

import javax.swing.*;
import javax.swing.event.SwingPropertyChangeSupport;

public class MainGui {
   public MainGui() {
      new WizardPanel().setVisible(true);
   }

   public static void main(String[] args) {
      try {
         UIManager.setLookAndFeel(UIManager.getSystemLookAndFeelClassName());
         new MainGui();
      } catch (Exception e) {
         e.printStackTrace();
      }
   }
}

class WizardPanel extends JDialog {
   private JPanel cardPanel, buttonPanel;
   private JButton next;
   private CardLayout c1;
   private SimpleModel simpleModel = new SimpleModel();

   private FileSelector fileSelector;
   private DelemeterSelector delemeterSelector;

   public WizardPanel() {
      fileSelector = FileSelector.getInstance();
      delemeterSelector = DelemeterSelector.getInstance();

      fileSelector.setModel(simpleModel); //!!
      delemeterSelector.setModel(simpleModel); //!!

      cardPanel = new JPanel();
      c1 = new CardLayout();
      cardPanel.setLayout(c1);

      cardPanel.add(fileSelector, "1");
      cardPanel.add(delemeterSelector, "2");

      c1.show(cardPanel, "1");

      buttonPanel = new JPanel();
      buttonPanel.setLayout(new FlowLayout(FlowLayout.RIGHT));

      next = new JButton("Next");
      next.addActionListener(new WizardPanel.NextButtonAction()); 

      buttonPanel.add(next);

      // Creating the GUI
      this.setLayout(new BorderLayout());
      this.add(cardPanel, "Center");
      this.add(buttonPanel, "South");

      this.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);
      this.setResizable(true);
      this.pack();
      this.setVisible(true);

   }

   private class NextButtonAction implements ActionListener {
      public void actionPerformed(ActionEvent ae) {

         // c1.show(cardPanel, "2");
         c1.next(cardPanel); //!!

      }
   }
}

class FileSelector extends JPanel {
   private JLabel fileName, description;
   private JTextField fileTxt;
   private JButton browse;

   private GridBagLayout gbl;
   private GridBagConstraints gbc;
   private SimpleModel simpleModel;

   private static FileSelector instance = null;

   private FileSelector() {
      // Intializing instance variables
      fileName = new JLabel("File Name: ");
      description = new JLabel("Specify the source of the data");

      fileTxt = new JTextField(10);

      browse = new JButton("Browse");
      browse.addActionListener(new ActionListener() {

         @Override
         public void actionPerformed(ActionEvent e) {
            if (simpleModel != null) {
               simpleModel.setFileText(fileTxt.getText());
            }
         }
      });

      gbl = new GridBagLayout();
      gbc = new GridBagConstraints();

      // Creating GUI
      this.setLayout(new GridLayout(2,1));

      this.add(description);
      this.add(locationPanel());

      this.setBorder(BorderFactory.createEmptyBorder());
   }

   public void setModel(SimpleModel simpleModel) {
      this.simpleModel = simpleModel;
   }

   private JPanel locationPanel() {
      JPanel panel = new JPanel();
      panel.setLayout(new FlowLayout());

      panel.add(fileName);
      panel.add(fileTxt);
      panel.add(browse);

      return panel;
   }

   public static FileSelector getInstance() {
      if (instance == null) {
         instance = new FileSelector();
      }

      return instance;
   }
}

class DelemeterSelector extends JPanel {
   private JLabel description;
   private JRadioButton tabBtn, semicolanBtn, commaBtn, spaceBtn;
   private JTextArea txtArea;
   private JScrollPane scroll;
   private ButtonGroup btnGroup;

   private GridBagLayout gbl;
   private GridBagConstraints gbc;
   private SimpleModel simpleModel;

   private String str;

   private static DelemeterSelector instance = null;

   private DelemeterSelector() {
      description = new JLabel(
            "What delemeter separates your fields? Select the appropreiate delemeter");

      tabBtn = new JRadioButton("Tab");
      tabBtn.addItemListener(new RadioAction());
      semicolanBtn = new JRadioButton("Semicolan");
      semicolanBtn.addItemListener(new RadioAction());
      commaBtn = new JRadioButton("Comma");
      commaBtn.addItemListener(new RadioAction());
      spaceBtn = new JRadioButton("Space");
      spaceBtn.addItemListener(new RadioAction());

      btnGroup = new ButtonGroup();
      btnGroup.add(tabBtn);
      btnGroup.add(semicolanBtn);
      btnGroup.add(commaBtn);
      btnGroup.add(spaceBtn);

      txtArea = new JTextArea(20, 70);

      scroll = new JScrollPane(txtArea);

      gbl = new GridBagLayout();
      gbc = new GridBagConstraints();

      this.setLayout(new GridLayout(3,1));

      // Creating the GUI
      this.add(description);
      this.add(radioPanel());
      this.add(scroll);      
   }

   private JPanel radioPanel() {
      JPanel panel = new JPanel();
      panel.setLayout(new FlowLayout());

      panel.add(tabBtn);
      panel.add(semicolanBtn);
      panel.add(commaBtn);
      panel.add(spaceBtn);

      panel.setBorder(BorderFactory
            .createTitledBorder("Choose the Delimeter that seperates your fields"));

      return panel;
   }

   //!!
   public void setModel(final SimpleModel simpleModel) {
      this.simpleModel = simpleModel;
      simpleModel.addPropertyChangeListener(new PropertyChangeListener() {

         @Override
         public void propertyChange(PropertyChangeEvent evt) {
            txtArea.append("File Text: " + simpleModel.getFileText() + "\n");            
         }
      });
   }

   public static DelemeterSelector getInstance() {
      if (instance == null) {
         instance = new DelemeterSelector();
      }

      return instance;
   }

   private class RadioAction implements ItemListener
   {
       public void itemStateChanged(ItemEvent ae)
       {
           if(ae.getStateChange()==ItemEvent.SELECTED){
           if(ae.getSource().equals(commaBtn))
           {
               str = ".";
           }
           else if(ae.getSource().equals(spaceBtn))
           {
               str = " ";
           }
           else if(ae.getSource().equals(semicolanBtn))
           {
               str = ";";
           }

           simpleModel.setDelemeter(str);}
       }
   }
}

class SimpleModel {
   public static final String FILE_TEXT = "file text";
   public static final String FILE_DELEMETER = "dELEMETERtext";
   private SwingPropertyChangeSupport pcSupport = 
      new SwingPropertyChangeSupport(this);
   private String fileText;
   private String str;

   public void addPropertyChangeListener(PropertyChangeListener listener) {
      pcSupport.addPropertyChangeListener(listener);
   }

   public void removePropertyChangeListener(PropertyChangeListener listener) {
      pcSupport.removePropertyChangeListener(listener);
   }

   public void setFileText(String fileText) {
      String oldValue = this.fileText;
      String newValue = fileText;
      this.fileText = fileText;
      pcSupport.firePropertyChange(FILE_TEXT, oldValue , newValue);

   }

   public String getFileText() {
      return fileText;
   }

   public void setDelemeter(String str)
   {
       String oldValue = this.str;
      String newValue = str;
      this.str = str;
      pcSupport.firePropertyChange(FILE_DELEMETER, oldValue , newValue);

      System.out.println(str);
   }

} 
```

此代码使用 MVC 设计模式。它从第一个滑动窗口记录 JTextField 的文本。当用户移动到第二个窗口时，它会在 JTextArea 中显示您在第一个窗口中键入的文本。

现在，单击那里分配的任何单选按钮。您将看到 JTextArea 正在显示在第一个窗口中输入的数据，即使我没有在`getFileText()`那里调用该方法。`getFileText()`每当我单击 JRadioButton 时，它似乎一直在调用方法并继续更新 JTextArea。但是在 JRadioButton 的动作类中，我从来没有调用过这样的动作，我只是设置了 delemeter ！！

为什么会发生这个错误？请帮忙！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T15:06:21.883

你的问题是这一行：

```
 simpleModel.addPropertyChangeListener(new PropertyChangeListener() {

     @Override
     public void propertyChange(PropertyChangeEvent evt) {
        txtArea.append("File Text: " + simpleModel.getFileText() + "\n");            
     }
  }); 
```

结合这些：

```
 public void setFileText(String fileText) {
      String oldValue = this.fileText;
      String newValue = fileText;
      this.fileText = fileText;
      pcSupport.firePropertyChange(FILE_TEXT, oldValue , newValue);

   }

   public void setDelemeter(String str)
   {
       String oldValue = this.str;
      String newValue = str;
      this.str = str;
      pcSupport.firePropertyChange(FILE_DELEMETER, oldValue , newValue);

      System.out.println(str);
   } 
```

您没有检查被触发的属性的名称（在第一组代码中），所以当`setFileText`or`setDelemeter`被调用时，`firePropertyChange`将执行并显示文件名。

最简单的解决方案是检查属性的名称，如下所示：

```
 simpleModel.addPropertyChangeListener(new PropertyChangeListener() {

     @Override
     public void propertyChange(PropertyChangeEvent evt) {
        if(evt.getPropertyName().equale(SimpleModel.FILE_TEXT)
            txtArea.append("File Text: " + simpleModel.getFileText() + "\n");            
     }
  }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T14:27:23.233

我没有仔细阅读所有代码，但请注意，更改单选按钮时会收到两个事件。我用于取消选择第一个按钮，并用于选择新按钮。

您可以在 中检查状态`ItemEvent`。参见`ItemEvent#getStateChange`and`ItemEvent.SELECTED`和`ItemEvent.DESELECTED`常量。

请注意，如果您只想在选择按钮时触发操作，则将 an 附加`ActionListener`到单选按钮会更容易。这在[单选按钮教程](http://docs.oracle.com/javase/tutorial/uiswing/components/button.html#radiobutton)中进行了说明。

# ios - 如何在音频录制 iphone sdk 上以图形方式显示采样率

> ID：13566434
> 
> 赞同：2
> 
> 时间：2012-11-26T14:02:06.533
> 
> 标签：ios

我想使用 AVAudioRecorder 以图形方式显示录音。如何根据录制的声音频率以图形方式显示采样率？请帮忙。

# c# - 如何使这个 C# 方法更通用？

> ID：13566436
> 
> 赞同：1
> 
> 时间：2012-11-26T14:02:12.927
> 
> 标签：c#

我有这个方法：

```
public partial class Client : ConfigItem
{
    public void ValidateForInsert(ASystem defaultSystem, IEnumerable<Client> currentConfig)
    {
        if (this.Source == defaultSystem.SystemName)
        {
            throw new InvalidOperationException(AMessage);
        }
        if (SomeOtherValidation())
        {
            throw new InvalidOperationException(AnOtherMessage);
        }
    }
} 
```

它将存在于许多不同的类型上，所有这些类型都继承自 CofigItem

所有代码都是相同的，所以我想把它移到基类中。除了参数包含 IEnumerable< *ThisClassesType* > currentConfig

如果我把它放在基类中`IEnumerable<ConfigItem>`，我必须用它来调用它：

`client.ValidateOnInsert(defaultSystem, currentConfig.Cast<ConfigItem>());`

这似乎有点愚蠢，因为诸如此类的*东西*`client`总是基于.*`ConfigItem`*

 *反正有没有像这样的东西：

`public void ValidateOnInsert(ASystem system, IEnumerable<T> currentConfig) where T : ConfigItem`（？）

或者只是以任何方式使整洁，不需要重复的代码或大量的转换？

谢谢，

`J1M`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:13:04.680

目前尚不清楚这是否会起作用，因为您没有使用输入序列显示任何代码，但这*可能会*起作用：

```
public void ValidateForInsert<T>(ASystem defaultSystem,
                                 IEnumerable<T> currentConfig)
    where T : ConfigItem 
```

所以这是一个通用方法，采用一系列类型的项目`T`，其中`T`必须是`ConfigItem`或从它派生的某种类型。*

# c# - List 上的不同运算符

> ID：13566443
> 
> 赞同：10
> 
> 时间：2012-11-26T14:02:56.533
> 
> 标签：c#, linq, axapta

我试图从 Ax 存储库中获取不同的字符串值，但我得到了很多相同的字符串（字符串只包含数字）

```
var ret = context.XInventTransBackOrder
    .Where(i => i.BatchRouteId != "")
    .Select(i => i.BatchRouteId)
    .Distinct()
    .ToList(); 
```

我哪里错了？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T14:27:36.917

你有没有尝试过

```
var ret = context.XInventTransBackOrder
    .Where(i => i.BatchRouteId != "")
    .Select(i => i.BatchRouteId)
    .ToList();
ret = ret
    .Distinct()
    .ToList(); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-11-26T14:45:35.977

例如，如果`BatchRouteId`是`XElement`，那么可能会执行对象引用比较。在这种情况下，将代码更改为

```
var ret = context.XInventTransBackOrder
    .Where(i => i.BatchRouteId != null && !String.IsNullOrEmpty(i.BatchRouteId.Value))
    .Select(i => i.BatchRouteId.Value)
    .Distinct()
    .ToList(); 
```

* * *

**更新#1**

请注意，某些类型实现了隐式转换，使您认为它们是另一种类型。您可以将 a 传递`string`给`XName`参数而无需显式强制转换，并且`string`将自动转换为`XName`.

* * *

**更新#2**

根据 nk2003dec 的评论，上下文是`LinqToDynamicsAx`. 我不知道这个接口，但可能它没有实现`Distinct`。在这种情况下，您可以使用`System.Linq.Enumerable.AsEnumerable<TSource>`扩展方法将上下文从 XY-LINQ 更改为 Object-LINQ

```
var ret = context.XInventTransBackOrder
    .Select(i => i.BatchRouteId)
    .Where(id => id != "")
    .AsEnumerable()
    .Distinct()
    .ToList(); 
```

我也倒过来了`Select`，`Where`因为这简化了访问`BatchRouteId`

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2017-11-06T08:32:51.480

X++ 没有不同的运算符。延迟执行将尝试在 ToList() 上执行，并因此而失败。

# javascript - asp.net web 应用程序 - 警报/消息框

> ID：13566448
> 
> 赞同：-1
> 
> 时间：2012-11-26T14:03:11.730
> 
> 标签：javascript, asp.net, .net

我有一个 asp.net 网络应用程序。单击按钮时，会在服务器端执行一些代码。如果代码成功执行，我希望向用户显示一个警报弹出框，通知他们操作成功完成。

有任何想法吗？

亲切的问候，菲奥娜

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:07:48.033

谷歌“alert asp.net”将为您提供大量使用 javascript 警报功能的解决方案。

更好的是，谷歌搜索“jquery alert asp.net”将为您提供 jquery 解决方案（一个 html 模式弹出窗口，它是当前页面的模式，但允许您切换到选项卡式浏览器中的其他选项卡）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:08:56.280

服务器端代码和 clide 端代码在不同的上下文中运行，我认为您最好的方法是使用 ajax 或 jquery 发布，例如：

```
$.post(url,parameters, function(){
    //this code runs after the post
    alert('my message')
    }
); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:12:14.223

我建议你几个解决方案。

1.  创建一个`onclick`对您的业务代码执行 AJAX 调用的 Javascript 事件处理程序。呼叫的`success`回调将显示警报。参考[这里](http://api.jquery.com/jQuery.ajax/)。我更喜欢这个解决方案。

    ```
    $.ajax({
        type: 'POST',
        url: 'path/to/my/business/handler.ashx',
        data: ({/*my json data*/}),
        error: function (request, status, error) {
            alert("Something wrong here!");
            return false;
        },
        success: function (returnData) {
            alert("Everything fine here!");
        }
    }); 
    ```

2.  `onclick`使用服务器端事件处理程序管理事件。执行业务逻辑后，您可以注册一个执行警报的 javascript 脚本。参考[这里](http://msdn.microsoft.com/en-us/library/btf44dc9.aspx)。

    ```
    ClientScriptManager cs = Page.ClientScript;
    Type csType = this.GetType();
    cs.RegisterClientScriptBlock(csType, "handler", @"<script language='javascript' type='text/javascript'>alert('Eveything fine here!');</script>"); 
    ```

# xml-rpc - 使用 XML-RPC 上传时，附件在 Bugzilla 中以 base64 格式存储

> ID：13566451
> 
> 赞同：1
> 
> 时间：2012-11-26T14:03:21.010
> 
> 标签：xml-rpc, bugzilla

我正在为 Bugzilla 编写一个 XML-RPC 接口，用户可以在其中使用 Excel 宏在 Bugzilla 中创建错误。这工作正常。但是如果用户上传截图并将其作为附件添加到错误中，则图像无法在浏览器中显示。[我已经在这里](https://stackoverflow.com/questions/13516982/add-an-attachment-to-bugzilla-using-xml-rpc-in-vba)问过一个类似的问题。现在我发现base64编码的数据在保存到数据库之前没有转换回二进制。起初我认为 XML 文件可能不正确（即图像的数据类型`<string>`不是，`<base64>`但我验证 XML 是正确的。数据类型是`<base64>`）。但是，数据仍然以 base64 格式存储在数据库中。从网站手动上传截图时，数据库中的截图数据是二进制的。所以我认为 XML-RPC 框架应该将 base64 编码的图像数据转换回 8 位二进制。但事实并非如此。有谁知道还有什么问题？

# c++ - 将apache重定向到不同的模块

> ID：13566454
> 
> 赞同：0
> 
> 时间：2012-11-26T14:03:27.183
> 
> 标签：c++, apache, apache2

我目前有一个 apache 模块，它在被调用时会执行许多操作，其中之一是以字符串的形式修改 URL。我随后想重定向到这个 URL。不幸的是，没有太多的文档可以帮助我完成这个，有做过类似的人可以请教吗？

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T09:31:14.903

您可以将 apr_table_add 函数与 headers_out 一起使用，该函数包含响应标头。

```
apr_table_add(r->headers_out, "Location", your_url);

return HTTP_MOVED_PERMANENTLY; 
```

# matlab - 将 OpenCV 源代码编译到 Matlab

> ID：13566458
> 
> 赞同：1
> 
> 时间：2012-11-26T14:03:36.433
> 
> 标签：matlab, opencv, compilation

我正在尝试在 Matlab 中编译 C++ 代码。源代码使用 OpenCV 库。当我写：

> > mex myfile.cpp

我收到以下错误：

> > 致命错误 C1083：无法打开包含文件：'opencv2/opencv.hpp' 没有这样的文件或目录

我正在使用 Matlab r2012b 并在 Windows 7 上使用 Visual c++ 2010 express。

请问有什么解决办法吗？

谢谢你。

编辑：我做了以下但得到另一个错误：

```
 mex -v -largeArrayDims Calib.cpp -I"C:\opencv\build\include" ... 
-L"C:\opencv\build\x86\vc10\lib"  -lopencv_calib3d240d -lopencv_core240d ... 
-lopencv_highgui240d -lopencv_imgproc240d -llibCam

->     Default options filename found in C:\Users\Ali\AppData\Roaming\MathWorks\MATLAB\R2012b 
    ---------------------------------------------------------------- 
    ->    Options file           = C:\Users\Ali\AppData\Roaming\MathWorks\MATLAB\R2012b\mexopts.bat 
          MATLAB                 = C:\Programmes\MATLAB\R2012b 
    ->    COMPILER               = cl 
    ->    Compiler flags: 
             COMPFLAGS           = /c /GR /W3 /EHs /D_CRT_SECURE_NO_DEPRECATE /D_SCL_SECURE_NO_DEPRECATE /D_SECURE_SCL=0 /DMATLAB_MEX_FILE /nologo /MD 
             OPTIMFLAGS          = /O2 /Oy- /DNDEBUG 
             DEBUGFLAGS          = /Z7 
             arguments           =  -IC:\opencv\build\include 
             Name switch         = /Fo 
    ->    Pre-linking commands   =  
    ->    LINKER                 = link 
    ->    Link directives: 
             LINKFLAGS           = /dll /export:mexFunction /LIBPATH:"C:\Programmes\MATLAB\R2012b\extern\lib\win32\microsoft" libmx.lib libmex.lib libmat.lib /MACHINE:X86 kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib /nologo /manifest /incremental:NO /implib:"C:\Users\Ali\AppData\Local\Temp\mex_LVNr2V\templib.x" /MAP:"Calib.mexw32.map" 
             LINKDEBUGFLAGS      = /debug /PDB:"Calib.mexw32.pdb" 
             LINKFLAGSPOST       =  
             Name directive      = /out:"Calib.mexw32" 
             File link directive =  
             Lib. link directive =  
             Rsp file indicator  = @ 
    ->    Resource Compiler      = rc /fo "mexversion.res" 
    ->    Resource Linker        =  
    ---------------------------------------------------------------- 

    --> cl  -IC:\opencv\build\include /c /GR /W3 /EHs /D_CRT_SECURE_NO_DEPRECATE /D_SCL_SECURE_NO_DEPRECATE /D_SECURE_SCL=0 /DMATLAB_MEX_FILE /nologo /MD /FoC:\Users\Ali\AppData\Local\Temp\mex_LVNr2V\Calib.obj -IC:\Programmes\MATLAB\R2012b\extern\include -IC:\Programmes\MATLAB\R2012b\simulink\include /O2 /Oy- /DNDEBUG Calib.cpp 

    Calib.cpp 
        Contents of C:\Users\Ali\AppData\Local\Temp\mex_LVNr2V\mex_tmp.rsp: 
      C:\Users\Ali\AppData\Local\Temp\mex_LVNr2V\Calib.obj 

    --> link /out:"Calib.mexw32" /dll /export:mexFunction /LIBPATH:"C:\Programmes\MATLAB\R2012b\extern\lib\win32\microsoft" libmx.lib libmex.lib libmat.lib /MACHINE:X86 kernel32.lib user32.lib gdi32.lib winspool.lib comdlg32.lib advapi32.lib shell32.lib ole32.lib oleaut32.lib uuid.lib odbc32.lib odbccp32.lib /nologo /manifest /incremental:NO /implib:"C:\Users\Ali\AppData\Local\Temp\mex_LVNr2V\templib.x" /MAP:"Calib.mexw32.map"  @C:\Users\Ali\AppData\Local\Temp\mex_LVNr2V\mex_tmp.rsp  C:\opencv\build\x86\vc10\lib\libCam.lib 
    C:\opencv\build\x86\vc10\lib\opencv_calib3d240d.lib C:\opencv\build\x86\vc10\lib\opencv_core240d.lib C:\opencv\build\x86\vc10\lib\opencv_highgui240d.lib C:\opencv\build\x86\vc10\lib\opencv_imgproc240d.lib  

    LINK : error LNK2001: symbole externe non résolu mexFunction 
    C:\Users\Ali\AppData\Local\Temp\mex_LVNr2V\templib.x : fatal error LNK1120: 1 externes non résolus 

      C:\PROGRA~3\MATLAB\R2012B\BIN\MEX.PL: Error: Link of 'Calib.mexw32' failed. 

    Error using mex (line 206)
    Unable to complete successfully. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:35:23.723

您应该将包含标志和链接库添加到命令行。那是，

`mex myfile.cpp -I header_path -l opencv_libraries`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T15:37:01.177

请试试：

```
mex -largeArrayDims Calib.cpp -IC:\opencv\build\include -LC:\opencv\build\x86\vc10\lib...
 -l opencv_calib3d240d -l opencv_core240d -l opencv_highgui240d -l opencv_imgproc240d 
```

**顺便说一句，您链接 opencv_< > d** .lib 而不是 opencv_< >.lib 文件是否有特殊原因？

# wpf - 在 ComboBox 的右上角放置一个小图像

> ID：13566461
> 
> 赞同：1
> 
> 时间：2012-11-26T14:03:56.237
> 
> 标签：wpf, combobox, styles, contentpresenter

我有一个普通的组合框。

![在此处输入图像描述](../Images/a37d328a8737471734e6fc6a7983a7ff.png)

现在我想在右上角放置一个 16x16px 的小图像。

![在此处输入图像描述](../Images/024b0959719ecd549c8a19dd16021ec2.png)

我试过这段代码：

```
 <ComboBox HorizontalAlignment="Left" Margin="95,49,0,0" VerticalAlignment="Top" Width="211" Height="37">
        <ComboBox.Style>
            <Style TargetType="{x:Type ComboBox}">

                <Setter Property="Template">
                    <Setter.Value>
                        <ControlTemplate>
                            <Border>
                                <StackPanel>
                                    <ContentPresenter/>
                                    <Image Source="/WpfApplication6;component\accept_16.png" Width="16" />
                                </StackPanel>
                            </Border>
                        </ControlTemplate>
                    </Setter.Value>
                </Setter>

            </Style>
        </ComboBox.Style>
    </ComboBox> 
```

但它只显示图像，而不是组合框......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:15:32.003

将`ComboBox`and`Image`嵌套在 a的内部，并与左上角`Grid`对齐。那么你就不会用过于简化的`Image`替代相当复杂的了：`ControlTemplate`

```
<Grid>
    <ComboBox/>
    <Image HorizontalAlignment="Left" VerticalAlignment="Top"/>
</Grid> 
```

为了可重用性，使用它创建一个 UserControl：

```
<UserControl x:Class="StackOverflow.UserControl1"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:local="clr-namespace:StackOverflow"
             mc:Ignorable="d" 
             d:DesignHeight="300" d:DesignWidth="300">
    <Grid>
        <ComboBox/>
        <Image HorizontalAlignment="Left" VerticalAlignment="Top"/>
    </Grid>
</UserControl> 
```

然后根据需要多次将其插入到 XAML 中：

```
<local:UserControl1/> 
```

但是，如果您坚持重新模板化 ComboBox，请考虑修改完整的模板。考虑 ComboBox 的以下“默认”控件模板（和依赖项）：

```
 <Style x:Key="ComboBoxFocusVisual">
        <Setter Property="Control.Template">
            <Setter.Value>
                <ControlTemplate>
                    <Rectangle Margin="4,4,21,4" SnapsToDevicePixels="true" Stroke="{DynamicResource {x:Static SystemColors.ControlTextBrushKey}}" StrokeThickness="1" StrokeDashArray="1 2"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <LinearGradientBrush x:Key="ButtonNormalBackground" EndPoint="0,1" StartPoint="0,0">
        <GradientStop Color="#F3F3F3" Offset="0"/>
        <GradientStop Color="#EBEBEB" Offset="0.5"/>
        <GradientStop Color="#DDDDDD" Offset="0.5"/>
        <GradientStop Color="#CDCDCD" Offset="1"/>
    </LinearGradientBrush>
    <SolidColorBrush x:Key="ButtonNormalBorder" Color="#FF707070"/>
    <Geometry x:Key="DownArrowGeometry">M 0 0 L 3.5 4 L 7 0 Z</Geometry>
    <Style x:Key="ComboBoxReadonlyToggleButton" TargetType="{x:Type ToggleButton}">
        <Setter Property="OverridesDefaultStyle" Value="true"/>
        <Setter Property="IsTabStop" Value="false"/>
        <Setter Property="Focusable" Value="false"/>
        <Setter Property="ClickMode" Value="Press"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <Themes:ButtonChrome x:Name="Chrome" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsPressed}" SnapsToDevicePixels="true">
                        <Grid HorizontalAlignment="Right" Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}">
                            <Path x:Name="Arrow" Data="{StaticResource DownArrowGeometry}" Fill="Black" HorizontalAlignment="Center" Margin="3,1,0,0" VerticalAlignment="Center"/>
                        </Grid>
                    </Themes:ButtonChrome>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="true">
                            <Setter Property="RenderPressed" TargetName="Chrome" Value="true"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Fill" TargetName="Arrow" Value="#AFAFAF"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <LinearGradientBrush x:Key="TextBoxBorder" EndPoint="0,20" MappingMode="Absolute" StartPoint="0,0">
        <GradientStop Color="#ABADB3" Offset="0.05"/>
        <GradientStop Color="#E2E3EA" Offset="0.07"/>
        <GradientStop Color="#E3E9EF" Offset="1"/>
    </LinearGradientBrush>
    <Style x:Key="ComboBoxEditableTextBox" TargetType="{x:Type TextBox}">
        <Setter Property="OverridesDefaultStyle" Value="true"/>
        <Setter Property="AllowDrop" Value="true"/>
        <Setter Property="MinWidth" Value="0"/>
        <Setter Property="MinHeight" Value="0"/>
        <Setter Property="FocusVisualStyle" Value="{x:Null}"/>
        <Setter Property="ScrollViewer.PanningMode" Value="VerticalFirst"/>
        <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type TextBox}">
                    <ScrollViewer x:Name="PART_ContentHost" Background="Transparent" Focusable="false" HorizontalScrollBarVisibility="Hidden" VerticalScrollBarVisibility="Hidden"/>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <Style x:Key="ComboBoxToggleButton" TargetType="{x:Type ToggleButton}">
        <Setter Property="OverridesDefaultStyle" Value="true"/>
        <Setter Property="IsTabStop" Value="false"/>
        <Setter Property="Focusable" Value="false"/>
        <Setter Property="ClickMode" Value="Press"/>
        <Setter Property="Background" Value="Transparent"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ToggleButton}">
                    <Themes:ButtonChrome x:Name="Chrome" BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderPressed="{TemplateBinding IsPressed}" RoundCorners="false" SnapsToDevicePixels="true" Width="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}">
                        <Path x:Name="Arrow" Data="{StaticResource DownArrowGeometry}" Fill="Black" HorizontalAlignment="Center" Margin="0,1,0,0" VerticalAlignment="Center"/>
                    </Themes:ButtonChrome>
                    <ControlTemplate.Triggers>
                        <Trigger Property="IsChecked" Value="true">
                            <Setter Property="RenderPressed" TargetName="Chrome" Value="true"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Fill" TargetName="Arrow" Value="#AFAFAF"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
    </Style>
    <ControlTemplate x:Key="ComboBoxEditableTemplate" TargetType="{x:Type ComboBox}">
        <Grid x:Name="Placement" SnapsToDevicePixels="true">
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="Auto"/>
            </Grid.ColumnDefinitions>
            <Popup x:Name="PART_Popup" AllowsTransparency="true" Grid.ColumnSpan="2" IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Placement="Bottom">
                <Themes:SystemDropShadowChrome x:Name="Shdw" Color="Transparent" MaxHeight="{TemplateBinding MaxDropDownHeight}" MinWidth="{Binding ActualWidth, ElementName=Placement}">
                    <Border x:Name="DropDownBorder" BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}" BorderThickness="1" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}">
                        <ScrollViewer x:Name="DropDownScrollViewer">
                            <Grid RenderOptions.ClearTypeHint="Enabled">
                                <Canvas HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                                    <Rectangle x:Name="OpaqueRect" Fill="{Binding Background, ElementName=DropDownBorder}" Height="{Binding ActualHeight, ElementName=DropDownBorder}" Width="{Binding ActualWidth, ElementName=DropDownBorder}"/>
                                </Canvas>
                                <ItemsPresenter x:Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Contained" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                            </Grid>
                        </ScrollViewer>
                    </Border>
                </Themes:SystemDropShadowChrome>
            </Popup>
            <Themes:ListBoxChrome x:Name="Border" BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Grid.ColumnSpan="2" RenderMouseOver="{TemplateBinding IsMouseOver}" RenderFocused="{TemplateBinding IsKeyboardFocusWithin}"/>
            <TextBox x:Name="PART_EditableTextBox" HorizontalContentAlignment="{TemplateBinding HorizontalContentAlignment}" IsReadOnly="{Binding IsReadOnly, RelativeSource={RelativeSource TemplatedParent}}" Margin="{TemplateBinding Padding}" Style="{StaticResource ComboBoxEditableTextBox}" VerticalContentAlignment="{TemplateBinding VerticalContentAlignment}"/>
            <ToggleButton Grid.Column="1" IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Style="{StaticResource ComboBoxToggleButton}"/>
        </Grid>
        <ControlTemplate.Triggers>
            <Trigger Property="IsKeyboardFocusWithin" Value="true">
                <Setter Property="Foreground" Value="Black"/>
            </Trigger>
            <Trigger Property="IsDropDownOpen" Value="true">
                <Setter Property="RenderFocused" TargetName="Border" Value="true"/>
            </Trigger>
            <Trigger Property="HasItems" Value="false">
                <Setter Property="Height" TargetName="DropDownBorder" Value="95"/>
            </Trigger>
            <Trigger Property="IsEnabled" Value="false">
                <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                <Setter Property="Background" Value="#FFF4F4F4"/>
            </Trigger>
            <MultiTrigger>
                <MultiTrigger.Conditions>
                    <Condition Property="IsGrouping" Value="true"/>
                    <Condition Property="VirtualizingPanel.IsVirtualizingWhenGrouping" Value="false"/>
                </MultiTrigger.Conditions>
                <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
            </MultiTrigger>
            <Trigger Property="HasDropShadow" SourceName="PART_Popup" Value="true">
                <Setter Property="Margin" TargetName="Shdw" Value="0,0,5,5"/>
                <Setter Property="Color" TargetName="Shdw" Value="#71000000"/>
            </Trigger>
            <Trigger Property="ScrollViewer.CanContentScroll" SourceName="DropDownScrollViewer" Value="false">
                <Setter Property="Canvas.Top" TargetName="OpaqueRect" Value="{Binding VerticalOffset, ElementName=DropDownScrollViewer}"/>
                <Setter Property="Canvas.Left" TargetName="OpaqueRect" Value="{Binding HorizontalOffset, ElementName=DropDownScrollViewer}"/>
            </Trigger>
        </ControlTemplate.Triggers>
    </ControlTemplate>
    <Style x:Key="ComboBoxStyle1" TargetType="{x:Type ComboBox}">
        <Setter Property="FocusVisualStyle" Value="{StaticResource ComboBoxFocusVisual}"/>
        <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.WindowTextBrushKey}}"/>
        <Setter Property="Background" Value="{StaticResource ButtonNormalBackground}"/>
        <Setter Property="BorderBrush" Value="{StaticResource ButtonNormalBorder}"/>
        <Setter Property="BorderThickness" Value="1"/>
        <Setter Property="ScrollViewer.HorizontalScrollBarVisibility" Value="Auto"/>
        <Setter Property="ScrollViewer.VerticalScrollBarVisibility" Value="Auto"/>
        <Setter Property="Padding" Value="4,3"/>
        <Setter Property="ScrollViewer.CanContentScroll" Value="true"/>
        <Setter Property="ScrollViewer.PanningMode" Value="Both"/>
        <Setter Property="Stylus.IsFlicksEnabled" Value="False"/>
        <Setter Property="Template">
            <Setter.Value>
                <ControlTemplate TargetType="{x:Type ComboBox}">
                    <Grid x:Name="MainGrid" SnapsToDevicePixels="true">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="*"/>
                            <ColumnDefinition MinWidth="{DynamicResource {x:Static SystemParameters.VerticalScrollBarWidthKey}}" Width="0"/>
                        </Grid.ColumnDefinitions>
                        <Popup x:Name="PART_Popup" AllowsTransparency="true" Grid.ColumnSpan="2" IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}" Margin="1" PopupAnimation="{DynamicResource {x:Static SystemParameters.ComboBoxPopupAnimationKey}}" Placement="Bottom">
                            <Themes:SystemDropShadowChrome x:Name="Shdw" Color="Transparent" MaxHeight="{TemplateBinding MaxDropDownHeight}" MinWidth="{Binding ActualWidth, ElementName=MainGrid}">
                                <Border x:Name="DropDownBorder" BorderBrush="{DynamicResource {x:Static SystemColors.WindowFrameBrushKey}}" BorderThickness="1" Background="{DynamicResource {x:Static SystemColors.WindowBrushKey}}">
                                    <ScrollViewer x:Name="DropDownScrollViewer">
                                        <Grid RenderOptions.ClearTypeHint="Enabled">
                                            <Canvas HorizontalAlignment="Left" Height="0" VerticalAlignment="Top" Width="0">
                                                <Rectangle x:Name="OpaqueRect" Fill="{Binding Background, ElementName=DropDownBorder}" Height="{Binding ActualHeight, ElementName=DropDownBorder}" Width="{Binding ActualWidth, ElementName=DropDownBorder}"/>
                                            </Canvas>
                                            <ItemsPresenter x:Name="ItemsPresenter" KeyboardNavigation.DirectionalNavigation="Contained" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}"/>
                                        </Grid>
                                    </ScrollViewer>
                                </Border>
                            </Themes:SystemDropShadowChrome>
                        </Popup>
                        <ToggleButton BorderBrush="{TemplateBinding BorderBrush}" Background="{TemplateBinding Background}" Grid.ColumnSpan="2" IsChecked="{Binding IsDropDownOpen, Mode=TwoWay, RelativeSource={RelativeSource TemplatedParent}}" Style="{StaticResource ComboBoxReadonlyToggleButton}"/>
                        <ContentPresenter ContentTemplate="{TemplateBinding SelectionBoxItemTemplate}" ContentTemplateSelector="{TemplateBinding ItemTemplateSelector}" Content="{TemplateBinding SelectionBoxItem}" ContentStringFormat="{TemplateBinding SelectionBoxItemStringFormat}" HorizontalAlignment="{TemplateBinding HorizontalContentAlignment}" IsHitTestVisible="false" Margin="{TemplateBinding Padding}" SnapsToDevicePixels="{TemplateBinding SnapsToDevicePixels}" VerticalAlignment="{TemplateBinding VerticalContentAlignment}"/>
                    </Grid>
                    <ControlTemplate.Triggers>
                        <Trigger Property="HasDropShadow" SourceName="PART_Popup" Value="true">
                            <Setter Property="Margin" TargetName="Shdw" Value="0,0,5,5"/>
                            <Setter Property="Color" TargetName="Shdw" Value="#71000000"/>
                        </Trigger>
                        <Trigger Property="HasItems" Value="false">
                            <Setter Property="Height" TargetName="DropDownBorder" Value="95"/>
                        </Trigger>
                        <Trigger Property="IsEnabled" Value="false">
                            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
                            <Setter Property="Background" Value="#FFF4F4F4"/>
                        </Trigger>
                        <MultiTrigger>
                            <MultiTrigger.Conditions>
                                <Condition Property="IsGrouping" Value="true"/>
                                <Condition Property="VirtualizingPanel.IsVirtualizingWhenGrouping" Value="false"/>
                            </MultiTrigger.Conditions>
                            <Setter Property="ScrollViewer.CanContentScroll" Value="false"/>
                        </MultiTrigger>
                        <Trigger Property="ScrollViewer.CanContentScroll" SourceName="DropDownScrollViewer" Value="false">
                            <Setter Property="Canvas.Top" TargetName="OpaqueRect" Value="{Binding VerticalOffset, ElementName=DropDownScrollViewer}"/>
                            <Setter Property="Canvas.Left" TargetName="OpaqueRect" Value="{Binding HorizontalOffset, ElementName=DropDownScrollViewer}"/>
                        </Trigger>
                    </ControlTemplate.Triggers>
                </ControlTemplate>
            </Setter.Value>
        </Setter>
        <Style.Triggers>
            <Trigger Property="IsEditable" Value="true">
                <Setter Property="BorderBrush" Value="{StaticResource TextBoxBorder}"/>
                <Setter Property="Background" Value="{DynamicResource {x:Static SystemColors.WindowBrushKey}}"/>
                <Setter Property="IsTabStop" Value="false"/>
                <Setter Property="Padding" Value="3"/>
                <Setter Property="Template" Value="{StaticResource ComboBoxEditableTemplate}"/>
            </Trigger>
        </Style.Triggers>
    </Style> 
```

# php - 从 android 通过 JSON 到 mysql 阿拉伯语

> ID：13566464
> 
> 赞同：3
> 
> 时间：2012-11-26T14:04:00.543
> 
> 标签：php, android, mysql, json, arabic

这是我的 Java 文件。我正在尝试发送无效的阿拉伯字母而不是我收到的阿拉伯单词`???? ????? ?????`。

我可以从 MySQL 中读取阿拉伯语，但我无法将阿拉伯语添加到 MySQL。

```
public class NewSecret extends Activity {

// Progress Dialog
private ProgressDialog pDialog;

JSONParser jsonParser = new JSONParser();
EditText inputName;
EditText inputDesc;

// url to create new product
private static String url_create_product = "http://laylakaylif.com/android/add_secrets.php";

// JSON Node names
private static final String TAG_SUCCESS = "success";

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    // fullScreen
    requestWindowFeature(Window.FEATURE_NO_TITLE);
    getWindow().setFlags(WindowManager.LayoutParams.FLAG_FULLSCREEN,
            WindowManager.LayoutParams.FLAG_FULLSCREEN);

    setContentView(R.layout.add);

    // Edit Text
    inputName = (EditText) findViewById(R.id.inputName);
    inputDesc = (EditText) findViewById(R.id.inputDesc);

    LinearLayout ll = (LinearLayout) findViewById(R.id.Lina);

    AdView ad2 = new AdView(NewSecret.this, AdSize.SMART_BANNER,
            "a150b0de6e44a18");
    ll.addView(ad2);
    ad2.loadAd(new AdRequest());

    // Create button
    Button btnCreateProduct = (Button) findViewById(R.id.btnCreateProduct);

    if (inputName.getText().toString().length() <= 0)
        inputName.setError("الرجاء اضافة عنوان!");

    if (inputDesc.getText().toString().length() <= 10)
        inputDesc.setError("الرجاء اضافة نص السر ..");

    // button click event
    btnCreateProduct.setOnClickListener(new View.OnClickListener() {

        public void onClick(View view) {
            // creating new product in background thread
            new CreateNewProduct().execute();
        }
    });
}

/**
 * Background Async Task to Create new product
 * */
class CreateNewProduct extends AsyncTask<String, String, String> {

    /**
     * Before starting background thread Show Progress Dialog
     * */
    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        pDialog = new ProgressDialog(NewSecret.this);
        pDialog.setMessage("إضافة سر جديد ...");
        pDialog.setIndeterminate(false);
        pDialog.setCancelable(true);
        pDialog.show();
    }

    /**
     * Creating product
     * */
    protected String doInBackground(String... args) {
        String title = inputName.getText().toString();
        String description = inputDesc.getText().toString();

        String htmltitle;
        String deshtml;

        htmltitle = TextUtils.htmlEncode(title);
        deshtml = TextUtils.htmlEncode(description);

        // Building Parameters
        List<NameValuePair> params = new ArrayList<NameValuePair>();
        params.add(new BasicNameValuePair("title", htmltitle));
        params.add(new BasicNameValuePair("description", deshtml));

        // getting JSON Object
        // Note that create product url accepts POST method
        JSONObject json = jsonParser.makeHttpRequest(url_create_product,
                "POST", params);

        // check log cat fro response
        Log.d("Create Response", json.toString());

        // check for success tag
        try {
            int success = json.getInt(TAG_SUCCESS);

            if (success == 1) {
                // successfully created product
                Intent i = new Intent(getApplicationContext(),
                        AllSecrets.class);
                startActivity(i);

                // closing this screen
                finish();
            } else {
                // failed to create product
            }
        } catch (JSONException e) {
            e.printStackTrace();
        }

        return null;
    }

    /**
     * After completing background task Dismiss the progress dialog
     * **/
    protected void onPostExecute(String file_url) {
        // dismiss the dialog once done
        pDialog.dismiss();
    }

}
} 
```

这是我的 PHP JSON 文件：

```
 <?php
 header("Content-Type:application/json;charset=utf-8"); //global encoding since this is the config file -- for Arabic support
/*
 * Following code will create a new product row
 * All product details are read from HTTP Post Request
 */

// array for JSON response
$response = array();

// check for required fields
/*if (isset($_POST['title']) && isset($_POST['description'])) {

    $title = json_encode($_POST['title'], JSON_UNESCAPED_UNICODE);
    $description = json_encode($_POST['description'], JSON_UNESCAPED_UNICODE);
*/

if (isset($_REQUEST['title']) && isset($_REQUEST['description'])) {
    echo $_REQUEST['title'].'<br/>';
/*
    $title = json_decode($__REQUEST['title']);
    $description = json_decode($__REQUEST['description']);
*/

    $title = $_REQUEST['title'];
    $description = $_REQUEST['description'];

    // include db connect class
    require_once 'db_connect.php';

    // connecting to db
    $db = new DB_CONNECT();

    //setting the connection charset
     mysql_set_charset('utf8',$db);
     mysql_query("SET NAMES 'utf8'");
     mysql_query("SET CHARACTER_SET utf8;");

    // mysql inserting a new row
    mysql_query("SET NAMES 'UTF8'");
    $result = mysql_query("INSERT INTO secrets(title ,  description) VALUES('$title', '$description')");

    // check if row inserted or not
    if ($result) {
        // successfully inserted into database
        $response["success"] = 1;
        $response["message"] = "Secret successfully added.";

        // echoing JSON response
        echo json_encode($response);
    } else {
        // failed to insert row
        $response["success"] = 0;
        $response["message"] = "Oops! An error occurred.";

        // echoing JSON response
        echo json_encode($response);
    }
} else {
    // required field is missing
    $response["success"] = 0;
    $response["message"] = "Required field(s) is missing";

    // echoing JSON response
    echo json_encode($response);
}
?> 
```

JSON解析器代码：

```
import java.io.BufferedReader;
import java.io.IOException;
import java.io.InputStream;
import java.io.InputStreamReader;
import java.io.UnsupportedEncodingException;
import java.util.List;

import org.apache.http.HttpEntity;
import org.apache.http.HttpResponse;
import org.apache.http.NameValuePair;
import org.apache.http.client.ClientProtocolException;
import org.apache.http.client.entity.UrlEncodedFormEntity;
import org.apache.http.client.methods.HttpGet;
import org.apache.http.client.methods.HttpPost;
import org.apache.http.client.utils.URLEncodedUtils;
import org.apache.http.impl.client.DefaultHttpClient;
import org.json.JSONException;
import org.json.JSONObject;

import android.util.Log;

public class JSONParser {

    static InputStream is = null;
    static JSONObject jObj = null;
    static String json = "";

    // constructor
    public JSONParser() {

    }

    // function get json from url
    // by making HTTP POST or GET method
    public JSONObject makeHttpRequest(String url, String method,
            List<NameValuePair> params) {

        // Making HTTP request
        try {

            // check for request method
            if(method == "POST"){
                // request method is POST
                // defaultHttpClient
                DefaultHttpClient httpClient = new DefaultHttpClient();
                HttpPost httpPost = new HttpPost(url);
                httpPost.setEntity(new UrlEncodedFormEntity(params));

                HttpResponse httpResponse = httpClient.execute(httpPost);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();

            }else if(method == "GET"){
                // request method is GET
                DefaultHttpClient httpClient = new DefaultHttpClient();
                String paramString = URLEncodedUtils.format(params, "utf-8");
                url += "?" + paramString;
                HttpGet httpGet = new HttpGet(url);

                HttpResponse httpResponse = httpClient.execute(httpGet);
                HttpEntity httpEntity = httpResponse.getEntity();
                is = httpEntity.getContent();
            }           

        } catch (UnsupportedEncodingException e) {
            e.printStackTrace();
        } catch (ClientProtocolException e) {
            e.printStackTrace();
        } catch (IOException e) {
            e.printStackTrace();
        }

        try {
            BufferedReader reader = new BufferedReader(new InputStreamReader(
                    is, "iso-8859-1"), 8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                sb.append(line + "\n");
            }
            is.close();
            json = sb.toString();
        } catch (Exception e) {
            Log.e("Buffer Error", "Error converting result " + e.toString());
        }

        // try parse the string to a JSON object
        try {
            jObj = new JSONObject(json);
        } catch (JSONException e) {
            Log.e("JSON Parser", "Error parsing data " + e.toString());
        }

        // return JSON String
        return jObj;

    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-07T23:13:28.987

有关如何解决发布非拉丁字符（阿拉伯语或其他）的问题，请在您的 php 页面中使用此命令：

```
header('Content-Type: text/html; charset=utf-8' );

mysql_query("SET NAMES 'utf8'");

mysql_query("CHARACTER SET utf8 COLLATE utf8_general_ci"); 
```

并且肯定你必须在你的 httpeEntity 中使用 UTF，你的 MySQL 数据库也必须用 UTF-8 编码

我希望这为寻找相同问题的人提供一些信息

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T14:43:38.820

```
JSONObject json = jsonParser.makeHttpRequest(url_create_product, "POST", params); 
```

我不知道您使用的是什么 JSONParser。它不是标准平台的一部分；网络上有几十个不同的类都用这个名字，其中许多包括这样的一行：

```
httpPost.setEntity(new UrlEncodedFormEntity(params)); 
```

这是一个问题，因为 a 的[默认](http://developer.android.com/reference/org/apache/http/protocol/HTTP.html#DEFAULT_CONTENT_CHARSET)编码`UrlEncodedFormEntity`是 ISO-8859-1 而不是 UTF-8。如果要传递 UTF-8，请将其作为参数[包含：](http://developer.android.com/reference/org/apache/http/client/entity/UrlEncodedFormEntity.html#UrlEncodedFormEntity%28java.util.List%3C?%20extends%20org.apache.http.NameValuePair%3E,%20java.lang.String%29)

```
httpPost.setEntity(new UrlEncodedFormEntity(params, "UTF-8")); 
```

如果这不是问题，建议发布 JSONParser 代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-12-11T13:03:52.617

只需进行排序 utf8_general_ci

# ms-access - 访问 iif 查询为 false 时不执行任何操作

> ID：13566465
> 
> 赞同：3
> 
> 时间：2012-11-26T14:04:01.393
> 
> 标签：ms-access

我的情况/问题：

```
TableA
id, postalcode, region 
```

我要在 ( `postalcode`) 中添加值的字段的标准：

```
=IIf([tableA.Region]="Chicago","60064",[postalcode]) 
```

我需要完成的是一个 iif 查询，其中：

在字段`postalcode`中，如果字段区域等于，我会检查条件`Chicago`。如果是这样，请用邮政编码填写该字段，`60064`如果不是，则什么都不做

对于什么都不做的部分，我使用字段名称，这是错误的吗？我是否使用正确字段中的条件（我要添加的字段？）我正在使用选择查询？

如您所见，我是访问查询中的菜鸟...

有人可以给我正确的 iff 声明吗？提前谢谢，D

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:19:00.123

我建议您`table.Region`以不同的方式使用括号，或者完全消除那里的括号。

```
=IIf([tableA].[Region]="Chicago","60064",[postalcode])
=IIf(tableA.Region="Chicago","60064",[postalcode]) 
```

如果这不能解决您要解决的问题，请告诉我们有关该问题的更多信息。如果您收到错误消息，请告诉我们它的内容。

大胆猜测，该代码作为查询中的字段表达式不会在查询结果集中为您提供可编辑的列。如果您想根据您的条件预加载列值，但随后允许用户更改值，请使用表单。在表单的 On Current 事件中，根据需要加载值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-10-07T01:16:51.617

据我了解，

> 如果不做任何事

如果条件为假，您无需返回任何内容。

您需要的是该`WHERE`子句而不是`IIF`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-11-09T12:40:40.430

这是一个死旧的帖子，但我认为这就是你想要的：

```
=Like IIf([tableA.Region]="Chicago","60064",'*') 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-17T18:00:45.980

如果我正确理解了您的问题，如果不是芝加哥，您是否需要邮政编码中的 NULL 值？

=IIf([tableA].[Region]="芝加哥","60064","")

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-04-12T19:34:21.370

请添加另一个 IIF 查询作为 OR

> IIf([Forms]![Run_Macro Form]![ReturnType_DrpDwn]="Monthly",[Forms]![Run_Macro Form]![Cmb_Per_Ending],#1/1/2010#)
> 
> > IIf([Forms]![Run_Macro Form]![ReturnType_DrpDwn]="Quarterly",#1/1/2010#,#1/1/2025#)

# php - 选择两个字符之间的 Subbtr 字段

> ID：13566467
> 
> 赞同：0
> 
> 时间：2012-11-26T14:04:12.017
> 
> 标签：php, mysql

我在选择部分字符时遇到问题。这是我的领域的内容：

```
[{"index":1,"image":"un-nouveau-test-d-annonce_12_1.jpg","thumbnail":"un-nouveau-test-d-annonce_12_1_t.jpg"}] 
```

我只想选择`un-nouveau-test-d-annonce_12_1_t.jpg`。但是，所有领域的名称都不同。

```
field1 : un-nouveau-test-d-annonce_12_1_t.jpg
field2 : hello_ads_2.jpg 
```

所以，我希望我的“选择”选择地址末尾的第一个字母（u 或 h）（在所有情况下都是 jpg）。

我有这个 ：

```
$img = "SELECT
    SUBSTR(images, LOCATE('l\":\"',images)+1, 
    (CHAR_LENGTH(images) - LOCATE('l\":\"',REVERSE(images)) - LOCATE('l\":\"',images))) 
    FROM  mq74m_adsmanager_ads";

$resultimg = mysql_query($img) or die(mysql_error());
if (mysql_num_rows($resultimg) > 0)
{
    while ($rowimg = mysql_fetch_array($resultimg))
    {
        echo $rowimg['images'];
    }
} 
```

但结果是空的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:08:20.297

从数据库中提取所有内容，然后应用 json_decode ，您将获得一个数组。之后，您可以执行 $result[$i]['image'] 其中 $i 是索引。

# android - 如何压缩文件夹以在android中制作docx文件？

> ID：13566468
> 
> 赞同：2
> 
> 时间：2012-11-26T14:04:23.373
> 
> 标签：android, docx, zipfile

我正在尝试制作一个可以打开 docx 文件以读取、编辑和保存它的 Android 应用程序。

我的想法是将存档中的所有 xml 文件提取到临时文件夹。在这个文件夹中，我们可以编辑 .docx 中的内容`/word/document.xml`。问题是当我压缩这个临时文件夹以创建一个新的 docx 文件并替换旧文件时，在新的 docx 存档中，路径就像`/mnt/sdcard/temp/"all files xml go here"`xml 文件应该在第一级一样。

有人可以帮我解决这个问题吗？这是压缩临时目录的方法

注意：我使用的 dir2zip 参数的值为`/mnt/sdcard/temp/***.docx`

```
public void zipDir(String dir2zip, ZipOutputStream zos)
{
    try
   {
        //create a new File object based on the directory we
        //have to zip File   
        File zipDir = new File(dir2zip);

        //get a listing of the directory content
        String[] dirList = zipDir.list();
        byte[] readBuffer = new byte[2156];
        int bytesIn = 0;

        //loop through dirList, and zip the files
        for(int i=0; i<dirList.length; i++)
        {
            File f = new File(zipDir, dirList[i]);
            if(f.isDirectory())
            {
                    //if the File object is a directory, call this
                    //function again to add its content recursively
                String filePath = f.getPath();
                zipDir(filePath, zos);
                    //loop again
                continue;
            }
            //if we reached here, the File object f was not a directory
            //create a FileInputStream on top of f
            FileInputStream fis = new FileInputStream(f);
            //create a new zip entry
            ZipEntry anEntry = new ZipEntry(f.getPath());
            //place the zip entry in the ZipOutputStream object
            zos.putNextEntry(anEntry);
            //now write the content of the file to the ZipOutputStream
            while((bytesIn = fis.read(readBuffer)) != -1)
            {
                zos.write(readBuffer, 0, bytesIn);
            }
           //close the Stream
           fis.close();
        }
    }
    catch(Exception e)
    {
        //handle exception
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T07:04:53.943

我已经设法自己解决了。问题出在这一行：

```
 File f = new File(zipDir, dirList[i]); 
```

它应该是

```
 File f = new File(dirList[i]); 
```

如果包含参数 zipDir，则在存档中将使用目录的绝对路径！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-10T10:04:17.343

通过进行以下两项修改，我现在设法使原始海报的代码在 Mac 和 Windows 上运行：

1：为每个目录添加一个ZipEntry：不要简单地忽略它

2：从ZipEntry名称中去掉目录名称

注意：zipinfo 很有用

这是一个适合我的程序：

```
import java.io.*;
import java.util.zip.*;

public class zipdoc
{
    String savedDir = null;

    public void zipDir(String dir2zip, ZipOutputStream zos)
    {
        try
       {
            if (savedDir == null)
                savedDir = dir2zip;
            // create a new File object based on the directory we
            // have to zip File   
            File zipDir = new File(dir2zip);

            //get a listing of the directory content
            String[] dirList = zipDir.list();
            byte[] readBuffer = new byte[2156];
            int bytesIn = 0;

            // loop through dirList, and zip the files
            for (int i=0; i<dirList.length; i++)
            {
                File f = new File(zipDir, dirList[i]);
                if (f.isDirectory())
                {
                    // if the File object is a directory, call this
                    // function again to add its content recursively
                    System.out.println("Adding dir: " + f); 
                    // create a new zip entry
                    ZipEntry anEntry = new ZipEntry(f.getPath().substring(savedDir.length()+1) + "/");
                    // place the zip entry in the ZipOutputStream object
                    zos.putNextEntry(anEntry);

                    String filePath = f.getPath();
                    zipDir(filePath, zos);
                    // loop again
                    continue;
                }
                else if (!f.getName().equals(".DS_Store"))
                {
                    // if we reached here, the File object f was not a directory
                    // and it's not the MacOSX special .DS_Store
                    // create a FileInputStream on top of f
                    System.out.println("Adding file: " + f);
                    FileInputStream fis = new FileInputStream(f);
                    // create a new zip entry
                    ZipEntry anEntry = new ZipEntry(f.getPath().substring(savedDir.length()+1));
                    // place the zip entry in the ZipOutputStream object
                    zos.putNextEntry(anEntry);
                    // now write the content of the file to the ZipOutputStream
                    while((bytesIn = fis.read(readBuffer)) != -1)
                    {
                        zos.write(readBuffer, 0, bytesIn);
                    }
                   // close the Stream
                   fis.close();
                }
            }
        }
        catch(Exception e)
        {
            // handle exception
            System.out.println(e);
        }
    }

    public void zipit(String inDir, String outFile)
    {
        try {
            ZipOutputStream zos = new ZipOutputStream(new FileOutputStream(new File(outFile)));
            zos.setMethod(0);
            zos.setMethod(ZipOutputStream.DEFLATED);
            zos.setLevel(0);

            zipDir(inDir, zos);
            zos.finish();
            zos.close();
        }
        catch (Exception e)
        {
            System.out.println(e);
        }
    }

    public static void main (String args[]) {
        zipdoc z1 = new zipdoc();

        // Check there are sufficient params if desired
        // first param is directory to be 'zipped', second is resulting
        // filename (??.docx)
        // eg java zipdoc dir1 newDoc.docx

        z1.zipit(args[0], args[1]);

        System.out.println("Finished creating " + args[1]);
    }
} 
```

# jquery - 如何将一个 GET 参数替换为另一个？

> ID：13566473
> 
> 赞同：1
> 
> 时间：2012-11-26T14:04:43.287
> 
> 标签：jquery, ajax

我有一个站点，其中包含人们在他们的计算机上安装的应用程序。应用程序使用 get 参数访问我的站点`param`：`mysite.com?param=sometext`。

由于最近的升级和与另一个系统的集成，我的站点现在需要参数`p`: `mysite.com?p=sometext`。我需要页面更改参数而不刷新页面（当用户发送`param`参数时我需要将其转换为`p`参数）。

有没有办法用 jQuery/AJAX 做到这一点？也许还有别的？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:16:45.850

jQuery 和 AJAX 是客户端技术。您安装的用户群的限制大概是您无法在客户端更改任何内容，除非说服所有人重新安装应用程序；在那种情况下，这些对你没有帮助。

由于您无法更改来自客户端应用程序的请求，因此您唯一可以做的就是让服务器端响应`param=x`与`p=x`. 这似乎是最容易做到的，方法是更改​​接收请求的脚本以允许可互换使用任一参数名称。

如果您也无法更改脚本，那么您唯一剩下的策略就是在 Web 服务器级别更改请求。例如，如果您使用带有 mod_rewrite 的 Apache，您可以在配置中添加如下内容：

```
RewriteCond %{QUERY_STRING} param=([^&]+)
RewriteRule /myscriptpath /myscriptpath?p=%1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:41:57.960

在实践中可能不是最有用的答案，因为它并非在所有地方都受支持，但所有现代浏览器都支持一种名为`pushState`. 该方法可以更新地址栏中的 url，而无需强制页面重新加载。

这是一个支持它的表格：http: [//caniuse.com/#search=pushstate](http://caniuse.com/#search=pushstate)

如果您想了解更多关于如何使用它的信息，您可以从这里开始：[https ://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history](https://developer.mozilla.org/en-US/docs/DOM/Manipulating_the_browser_history)

# python - 没有变量赋值的 Python 类实例

> ID：13566476
> 
> 赞同：4
> 
> 时间：2012-11-26T14:04:55.787
> 
> 标签：python, class, memory

如果我创建一个类的实例而不将它分配给一个变量，它会在我每次运行代码时占用内存吗？或者在包含实例的代码行执行后内存是否释放？

例如：

```
class TestClass():
    def __init__(self):
        self.Moto = "Moto"
    def printIt(self):
        print self.Moto 
```

所以如果我这样使用它：

```
TestClass().printIt() 
```

是不是每行执行一次就占用越来越多的内存？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:05:28.633

**不，该实例将自动被垃圾收集。**确切的机制取决于 Python 实现。CPython 使用引用计数并会在`TestClass().printIt()`.

但是，如果您要保留对新构造对象的一个​​或多个引用，则该对象将在被引用期间一直保持活动状态。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T14:16:45.093

不，该对象将立即被垃圾收集，即使*当*垃圾收集器“启动”并实际释放该对象时，也是依赖于实现的。

如果我们查看 CPython 源代码，我们可以看到该对象立即被释放：

```
/* Include/object.h */
#define Py_DECREF(op)                                   \
    do {                                                \
        if (_Py_DEC_REFTOTAL  _Py_REF_DEBUG_COMMA       \
        --((PyObject*)(op))->ob_refcnt != 0)            \
            _Py_CHECK_REFCNT(op)                        \
        else                                            \
        _Py_Dealloc((PyObject *)(op));                  \
    } while (0) 
```

并且`_Py_Dealloc`定义为：

```
#define _Py_Dealloc(op) (                               \
    _Py_INC_TPFREES(op) _Py_COUNT_ALLOCS_COMMA          \
    (*Py_TYPE(op)->tp_dealloc)((PyObject *)(op)))
#endif /* !Py_TRACE_REFS */ 
```

所以如你所见`tp_dealloc`，负责释放内存的槽被直接调用。

其他实现，如 PyPy、IronPython 或 Jython 可能不会立即释放内存，这可能会导致内存使用量*暂时*增加。

In particular I believe in Jython everything depends on the Java garbage collector, which is not guaranteed to free the memory as soon as it can. Even calling `System.gc()` is a mere suggestion for the garbage collector but it does not force it to free the memory.

# java - 检查应用程序是否安装在设备 android 代码上

> ID：13566479
> 
> 赞同：6
> 
> 时间：2012-11-26T14:05:13.293
> 
> 标签：java, android

我从 url（我的服务器）下载了 apk 文件并将其保存在 sdcard 中。如果用户从 sdcard 安装它，我想知道是否有任何应用程序安装成功或应用程序安装在设备中的通知。已安装的应用程序是否有任何回调

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-26T14:31:35.243

试试这个代码：

```
protected boolean isAppInstalled(String packageName) {
        Intent mIntent = getPackageManager().getLaunchIntentForPackage(packageName);
        if (mIntent != null) {
            return true;
        }
        else {
            return false;
        }
    } 
```

轻松获取应用程序包名：在 中搜索您的应用程序`google play website`，然后您将获取 id 参数（它是应用程序的包名）。示例：您将在 google play 上的 Youtube 应用程序上进行搜索，您会在此 url 中找到它：

[https://play.google.com/store/apps/details?id=com.google.android.youtube&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5nb29nbGUuYW5kcm9pZC55b3V0dWJlIl0](https://play.google.com/store/apps/details?id=com.google.android.youtube&feature=search_result#?t=W251bGwsMSwxLDEsImNvbS5nb29nbGUuYW5kcm9pZC55b3V0dWJlIl0)。

包名是 id 参数，所以它是： `com.google.android.youtube`

然后当你想测试时，你将拥有：

```
String packageName = "com.google.android.youtube";
boolean isYoutubeInstalled = isAppInstalled(packageName); 
```

**加：**如果你想得到你设备中所有已安装应用程序的列表，你可以在本[教程中找到你的答案](http://www.android-ios-tutorials.com/101/get-list-of-all-installed-apps-in-android/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:08:20.953

```
final Intent mainIntent = new Intent(Intent.ACTION_MAIN, null);
mainIntent.addCategory(Intent.CATEGORY_LAUNCHER);
final List pkgAppsList = context.getPackageManager().queryIntentActivities( mainIntent, 0); 
```

您将获得 Android 上所有已安装应用程序的列表。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T14:09:46.453

使用它来检查是否安装了应用程序

```
PackageManager pm = context.getPackageManager();

        List<ApplicationInfo> list = pm.getInstalledApplications(0);

        for (int i = 0; i < list.size(); i++) {         
            if(list.get(i).packageName.equals("com.my package")){
                    //do what you want
                    }

        } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2016-06-09T13:04:40.750

在 Youtube Player API 中，您可以访问[YoutubeIntents](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeIntents#Public_Methods)类并使用[isYoutubeInstalled](https://developers.google.com/youtube/android/player/reference/com/google/android/youtube/player/YouTubeIntents#isYouTubeInstalled(android.content.Context))来验证设备是否具有 Android 应用程序。

# symfony - google、facebook、yahoo 的 Symfony2 用户提供程序，链接在，

> ID：13566480
> 
> 赞同：0
> 
> 时间：2012-11-26T14:05:15.880
> 
> 标签：symfony

是否有任何用户提供程序的实现可以通过主要社交网络（如（谷歌、脸书、雅虎、链接...）向 Symfony2 应用程序提供用户身份验证？

Somethink像堆栈溢出登录过程......

谢谢你。

神话冲刺

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:24:23.390

我从未使用过它，但[HWIOAuthBundle](http://knpbundles.com/hwi/HWIOAuthBundle)看起来很有希望。

如果这不起作用，您可以在 KNPBundles.com 上搜索其他[OAUTH](http://knpbundles.com/)捆绑[包](http://knpbundles.com/search?q=oauth)

# sql - Sql server 2008：访问数据库属性的权限

> ID：13566486
> 
> 赞同：0
> 
> 时间：2012-11-26T14:05:30.787
> 
> 标签：sql, sql-server, sql-server-2008, sql-server-2008-r2, ssms

在 sql server 2008 中可以查看数据库属性的最低权限（服务器角色和用户映射）是多少？现在我在用户映射中只给出了 public 和 datareader，在服务器角色中给出了 public。当我右键单击数据库并单击属性时，我收到类似“用户''没有权限运行 DBCC showfilestats for database'”的错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-03T13:55:57.163

您需要有权访问 db_owner 固定数据库角色或 Sysadmin 固定服务器角色。

# android - 如果没有空间，操作栏将选项卡转换为列表导航

> ID：13566493
> 
> 赞同：7
> 
> 时间：2012-11-26T14:06:01.360
> 
> 标签：android, android-actionbar, actionbarsherlock

我有一个带有徽标、标题、2 个选项卡和搜索功能的操作栏。在手机（3.5 英寸）上一切正常。操作栏有 2 行。徽标标题和搜索功能出现在第一行，选项卡出现在第二行。 ![在此处输入图像描述](../Images/ba207cbe6c330b213817151f02e38be4.png)

在我的平板电脑 (7") 上，所有内容都显示在一行上。但是当我单击搜索图标时，选项卡将转换为列表。 ![选项卡作为列表导航](../Images/3df3c805da0e00044774f72c1f830bb0.png)

如何在我的 7" 平板电脑上将 (sherlock) 操作栏分成 2 行？或者有其他方法可以解决这个问题吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-27T16:22:54.290

在 ActionBarSherlock 中，有一个布尔值（abs__action_bar_embed_tabs）决定了 Tabs 是否应该嵌入到 ActionBar 中，这个值存储在两个文件中。

*   在值/abs__bools.xml 中。这是错误的。
*   在 values-w480/abs__bools.xml 中。是真的。

这意味着仅当设备宽度大于 480dp 时才会嵌入选项卡。

如果你想自己控制，你可以在自己的项目中创建 values-w480，并将 abs__action_bar_embed_tabs 设置为 false 以覆盖库项目中的值。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-27T12:05:26.593

我找到了一个解决方案来分隔代码中的选项卡。

```
private void embeddedTabs(Object actionBar, Boolean embed_tabs) {

try {

        if (actionBar instanceof ActionBarWrapper) {
            //ICS and forward
            try {
                Field actionBarField = actionBar.getClass().getDeclaredField("mActionBar");
                actionBarField.setAccessible(true);
                actionBar = actionBarField.get(actionBar);
            } catch (Exception e) {
                Log.e("", "Error enabling embedded tabs", e);
        }
    }
    Method setHasEmbeddedTabsMethod = actionBar.getClass().getDeclaredMethod("setHasEmbeddedTabs", boolean.class);
    setHasEmbeddedTabsMethod.setAccessible(true);
    setHasEmbeddedTabsMethod.invoke(actionBar, embed_tabs);
} catch (Exception e) {
    Log.e("", "Error marking actionbar embedded", e);
} 
```

}

但现在我有一个新问题。选项卡不会完全填满选项卡栏。 [操作栏选项卡不填满选项卡栏](https://stackoverflow.com/questions/13583885/actionbar-tabs-dont-fill-the-tabbar)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-08-26T09:04:36.520

这种方法对我来说很好：

只需放置导航方法，添加添加选项卡后：

```
... // adding tabs 
```

`bar.setNavigationMode(ActionBar.Navigation_mode_tabs);`

# c# - Visual Studio 2010 自动完成 - 演示者如何做到这一点？

> ID：13566494
> 
> 赞同：0
> 
> 时间：2012-11-26T14:06:06.177
> 
> 标签：c#, visual-studio-2010

我正在观看*[Entity Framework Code First to a New Database](http://msdn.microsoft.com/en-us/data/jj193542)*中的视频。请注意演示者是如何编写博客类的，并且所有内容都是自动编写的。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:10:27.733

这是使用 IDE 的 IntelliSense 功能。如果您观看，演示者会键入“prop”，然后使用制表符来完成代码。试试看。

这是一个相关的问题：*[在 Visual Studio 中创建属性的快捷方式？](https://stackoverflow.com/questions/3871270/short-cut-to-create-properties-in-visual-studio)*

有关更多信息（和更多代码片段），请查看[MSDN 文章](http://msdn.microsoft.com/en-us/library/z41h7fat%28v=vs.110%29.aspx)，如果您想创建自己的文章，请参阅*[创建代码片段](http://msdn.microsoft.com/en-us/library/ms165393(v=vs.80).aspx)*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:10:59.607

这些被称为*代码片段*。Visual Studio 包含许多预定义的，但您也可以创建**[自己的](http://msdn.microsoft.com/en-us/library/ms165394.aspx)**. 它们是 IDE 的 IntelliSense 代码完成工具的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:11:55.660

试试`p``tab``tab`；这是使用命名片段的简写`prop`- 然后您可以更改类型和名称，使用`←`和`→`在标记之间移动。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T14:14:31.173

# javascript - 创建一个 JS 购物车。请告知添加到购物车

> ID：13566495
> 
> 赞同：2
> 
> 时间：2012-11-26T14:06:16.650
> 
> 标签：javascript, cart, shopping

创建一个 JavaScript 购物车。对如何存储添加的购物车数据感到困惑。

我一直在努力做到这一点，所以当用户点击添加到购物车时，它会将一个变量添加到另一个变量。然而，这并没有那么顺利。我应该创建一个对象还是走不同的路线。下面我将更多地解释我打算如何使我的系统工作。

一页有项目。在项目下有一个添加到购物车按钮。我希望将信息添加到变量中。从添加价格开始。然后该信息将通过 html 表单发布到支付网关。

请注意，我这样做是出于个人兴趣，并且不会在实时网站上进行。只是一个学习曲线。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:11:35.113

你可能想看看：[http ://simplecartjs.org/](http://simplecartjs.org/)

但是如果您想从头开始构建它，您可能希望将购物车的内容存储在[cookie](http://www.w3schools.com/js/js_cookies.asp)中，因为如果刷新页面，这也会保存内容。我可能会在 cookie 中使用 JSON（因为它只接受字符串，不接受数组）。

如果您想进一步澄清我正在做的事情，请问:)

# django - 如何使用带有 gunicorn/nginx 的 SSL 防止重定向循环？

> ID：13566496
> 
> 赞同：3
> 
> 时间：2012-11-26T14:06:17.370
> 
> 标签：django, nginx, gunicorn, django-middleware

使用 SSL 中间件将某些 URL 重定向到 HTTPS 时出现重定向循环。我该怎么办？

我的 nginx 配置设置为将请求转发到 gunicorn。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:06:17.370

这里有几个步骤。

首先，修改中间件检查 SSL 的方式：

```
 def _is_secure(self, request):
    if request.is_secure():
      return True

    if 'HTTP_X_SSL_PROTOCOL' in request.META:
      return True

    return False 
```

然后更改您的 nginx 配置，如下所示：

```
server {
    listen 80;
    listen 443 ssl;

    ...

    location / {

        ...
        proxy_set_header X-SSL-Protocol $ssl_protocol;
        proxy_pass http://localhost:8000/;
    }
} 
```

`proxy_set_header`只有在不为空时才会传递`ssl_protocol`，即它是安全连接。

重启nginx就完成了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-03-31T18:41:23.570

添加到汤姆的答案。如果您使用 Heroku 或其他负载均衡器，以下内容可能也会有所帮助。

```
def _is_secure(self, request):
    if request.is_secure():
      return True

    if 'HTTP_X_SSL_PROTOCOL' in request.META:
      return True

    # check the forwarded request's protocol
    if request.META.get('HTTP_X_FORWARDED_PROTO')=='https':
        return True

    return False 
```

# c - 比较列表项，并在 c 中按顺序排序

> ID：13566501
> 
> 赞同：1
> 
> 时间：2012-11-26T14:06:53.017
> 
> 标签：c, sorting, linked-list

代码已编译，但是，我的代码中存在逻辑错误。我想比较数组中的字符串，然后在列表中按顺序列出它们。我不知道如何在不使用索引的情况下比较列表项，以及如何将当前名称与下一个名称进行比较。任何人都可以帮忙吗？

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

/* these arrays are just used to give the parameters to 'insert',
   to create the 'people' array */
char names[][10]= {"Simon", "Suzie", "Alfred", "Chip", "John", "Tim",
      "Harriet"};
int ages[7]= {22, 24, 106, 6, 18, 32, 24};

/* declare your struct for a person here */
typedef struct Record{
    char *name;
    int age;
    struct Record *next;
}   Record;

//set the head pointer at the start of the list
Record *headptr = NULL;

int compare_people( Record *a, Record *b)
{
     return strcmp((*(Record *)a).name, (*(Record *)b).name);
}

static void insert (Record *p, char *s, int n) {

    /* create a new space for the new person */
    Record *ptr = ( Record *) malloc(sizeof(Record));

    /* check if it is succeeded  */ 
    if( ptr == NULL){  
        abort();
        printf("memory allocation fail"); 
        exit(1);  
    }else{
        printf("memory allocation to person  - %s - \n", s);      
    }

    //set the data for the new person
    ptr->name=s;
    ptr->age=n;
    ptr->next= NULL;

    //ptr= NULL; 
    //printf("%i", p->age);

    /*  do not compare when the list is empty*/
    if(headptr==NULL)
    {
        ptr->next=headptr;
        headptr=ptr;
        printf("ok1\n");

    }else{
        Record *tail = headptr;

        /* go through all the list */
        while(tail->next!=NULL)
        {     
            if(compare_people(ptr->name,tail->name)== 1){
            tail = tail->next;
        }else{
            tail->next=headptr;
            }
        }//while

        //tail->next=ptr;
    }  
}  

int main( int argc, char **argv) {

    /* declare the people array here */
    Record *p=headptr;
    headptr = NULL;

    //insert the members and age into the unusage array. 
    for (int i=0; i < 7; i++) {
         insert (p,names[i], ages[i]);
         /* do not dereference the pointer */
    }

    /* print out a line before printing the names and ages */
    printf("\n");

    //set the pointer at the start of the list 
    p = headptr;

    /* print the people array here*/
    for ( int i=0; i < 7; i++, p = p->next ) {
        printf("The name is: %s, the age is:%i\n", p->name, p->age);
    }

    /* This is the third loop for call free to release the memory allocated by malloc */
    /* the free()function deallocate the space pointed by ptr. */
    for( int i=0; i<7; i++){
        free(p->next);
    } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:26:46.390

此代码看起来不正确：

```
Record *tail =headptr;
/* go through all the list */
while(tail->next!=NULL)
{   
  if(compare_people(ptr->name,tail->name)== 1){
    tail = tail->next;
  } else {
    tail->next=headptr;
  }
} //while 
```

如果您想在 之后插入一些东西`tail`，只需设置`tail->next = headptr`将（a）泄漏当前之后的任何内容，`tail`并且（b）将您的链表变成一个没有结束的循环。

如果你想插入`ptr`到你的列表中，你可能应该做类似的事情

```
ptr->next = tail->next; 
tail->next = ptr; 
```

...然后跳出循环。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:36:49.897

**第一个主要问题**在这里：

```
Record *tail =headptr;
/* go through all the list */
while(tail->next!=NULL) {
... 
```

你永远不会进入这个`while()`循环。在第一次迭代中，您这样做了：

```
ptr->next= NULL;  // setting the pointer's next pointer to NULL
...
headptr=ptr;     // have headptr point at what ptr is pointing to 
```

这意味着`headptr->next`将是`NULL`。然后在上面的代码片段中，您设置`tail`为`headptr`, 因此您`tail->next`将`NULL`永远不会执行该循环。

**第二个主要问题**在这里：

```
if(compare_people(ptr->name,tail->name)== 1){ 
```

您正在向该函数传递一个字符串（record->name 是一个字符串），但在函数本身中，您已将其设置为：

```
int compare_people(Record *a, Record *b) 
```

将记录（不是 a `char *`）作为输入。一旦您解决了第一个问题并实际使用了此功能，这将杀死您。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:13:51.673

您可能必须使用双重链表（添加指向列表前一条记录的指针）。然后将更容易对列表的元素进行排序。我希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T14:55:17.680

您的代码包含许多错误。我无法查看您的代码和评论的所有错误。我试图修复你的代码。

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

char names[][10]= {"Simon", "Suzie", "Alfred", "Chip", "John", "Tim",
      "Harriet"};
int ages[7]= {22, 24, 106, 6, 18, 32, 24};

/* declare your struct for a person here */
typedef struct Record{
  char *name;
  int age;
  struct Record *next;
}  Record;

//set the head pointer at the start of the list
Record *headptr = NULL;

int compare_people(char *a, char *b)
{

  return strcmp(a, b);
}

void insert (char *s, int n) {
     Record *t, *pnew, *prv;
     int i;
     prv=NULL;
     pnew=(Record *)malloc(sizeof(struct Record));
     if(pnew == NULL){  
        abort();
        printf("memory allocation fail"); 
        exit(1);  
    }else{
        printf("memory allocation to person  - %s - \n", s);      
    }
     pnew->name = s;
     pnew->age = n;
     pnew->next = NULL;
     if (headptr==NULL)
     {
        headptr = pnew;
        return;
     }
     for (t=headptr;t!=NULL;t=t->next) { // look for the right place to insert in order to get a tri list
         if (compare_people(s,t->name)<0) {        
            pnew->next=t;
            if (prv!=NULL)
               prv->next = pnew;
            else
               headptr=pnew;
            return;
         }
         prv=t;
     }
     prv->next=pnew;
     return;       
}

int main(int argc, char **argv) {

  Record *p, *q;
  int i;

  for (i=0; i < 7; i++) {
     insert (names[i], ages[i]);
  }

   printf("\n");

  for (p = headptr; p!=NULL; p = p->next) {
    printf("The name is: %s, the age is:%i\n", p->name, p->age);
  }

  /* To free your linked list: */
  p = headptr;
  while (p!=NULL){
    q = p;
    p = p->next;
    free(q);
  }
} 
```

上述代码执行的输出：

```
linux$ ./test
memory allocation to person  - Simon - 
memory allocation to person  - Suzie - 
memory allocation to person  - Alfred - 
memory allocation to person  - Chip - 
memory allocation to person  - John - 
memory allocation to person  - Tim - 
memory allocation to person  - Harriet - 

The name is: Alfred, the age is:106
The name is: Chip, the age is:6
The name is: Harriet, the age is:24
The name is: John, the age is:18
The name is: Simon, the age is:22
The name is: Suzie, the age is:24
The name is: Tim, the age is:32 
```

# javascript - 如何使用 jQuery 指定文本框中允许哪些字符？

> ID：13566503
> 
> 赞同：-1
> 
> 时间：2012-11-26T14:07:00.333
> 
> 标签：javascript, jquery, textfield

[http://jsfiddle.net/WhP8q/](http://jsfiddle.net/WhP8q/)

我正在尝试将输入限制为字母数字、0-9、AZ、az。

我引用的 ASCII 表：[http](http://www.asciitable.com/) ://www.asciitable.com/ 这是我目前所拥有的

```
$(function() {
    $("input").bind("keydown paste", function(e) {
        var code = (e.keyCode ? e.keyCode : e.which);
        var c = code;
        var letterAllowed = ((c > 47 && c < 58) || (c > 64 && c < 90) || (c > 96 && c < 123))
        if (code > 32 && !letterAllowed) {
            return false;
        }
    });
});​ 
```

现在，波浪号 (~) 字符被阻止输入到该字段中，但其他特殊/移位字符，例如 !@#$% 都被输入到文本字段中。我很确定我的逻辑是合理的，但我的问题是对 javascript 绑定有一些误解？身份证

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:20:03.987

仅在某些情况下阻止字符输入在 javascript 中非常复杂，因为在[`keypress`事件](http://quirksmode.org/dom/events/keys.html)（您想要阻止的事件）您不知道`value`输入之后，而只知道[`keycode`](http://quirksmode.org/js/keys.html)按下的键（甚至不知道结果字符肯定）。此外，您将需要关心特殊键，例如 or 。

我会推荐这样的东西：

```
$("input").on("keypress keyup paste", function(e) {
    this.value = this.value.replace(/[^a-zA-Z0-9]/g, '');
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:20:29.027

如果限制您输入的字符，您可以替换不是字母数字的字符。

```
<input type='text' id="txtAlphaNumeric"/>
<input type='text' id="txtNumeric"/>
<input type='text' id="txtAlphabet"/>
<script type="text/javascript">
$(function() {
    $('#txtNumeric').keyup(function() {
        if (this.value.match(/[^0-9]/g)) {
            this.value = this.value.replace(/[^0-9]/g, '');
        }
    });
    $('#txtAlphabet').keyup(function() {
        if (this.value.match(/[^a-zA-Z]/g)) {
            this.value = this.value.replace(/[^a-zA-Z]/g, '');
        }
    });
    $('#txtAlphaNumeric').keyup(function() {
        if (this.value.match(/[^a-zA-Z0-9]/g)) {
            this.value = this.value.replace(/[^a-zA-Z0-9]/g, '');
        }
    });
});
</script> 
```

答案来自：[jquery 只允许字母数字](http://4rapiddev.com/javascript/jquery-allow-only-numeric-characters-or-only-alphabet-characters-in-textbox/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:17:36.227

事实证明，我需要执行以下操作：

```
$("input").keypress(function(e){
        var code = e.charCode; 
```

charCode 将给出键入字母的实际字符代码，而不是最后按下的键的 ascii 代码

见[http://api.jquery.com/keypress/](http://api.jquery.com/keypress/)

# linux - /proc/devices 仍然显示未注册的设备

> ID：13566504
> 
> 赞同：3
> 
> 时间：2012-11-26T14:07:11.317
> 
> 标签：linux, character, device, linux-device-driver

我正在学习编写我的第一个 Linux 字符驱动程序，但似乎无法使其按预期工作。

驱动模块的 init 和 exit 函数代码如下：

```
static int __init one_init(void)
{
    int result;
    printk(KERN_DEBUG "In ones init call");
    result = alloc_chrdev_region(&onedev, 0, 4, "one");
    printk("Allocated device major: %d, first minor: %d",MAJOR(onedev),MINOR(onedev));
    return 0;
}

static void __exit one_exit(void)
{
    unregister_chrdev_region(onedev,4);
    printk(KERN_DEBUG "In ones exit call");
} 
```

卸载驱动程序后，我的设备仍然显示`/proc/devices`，其退出函数调用`unregister_chrdev_region`.

`dmesg`命令打印显示我的驱动程序的 init 和 exit 调用已进行。

我看到了一些相关的问题，但答案并没有解决我看似简单的问题。

我在做什么或期待错了什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-02-24T06:22:34.087

在终端中使用“rmmod modulename”。这应该卸载模块并删除关联。

# iphone - UITabBarContoller --> UISplitViewContoller

> ID：13566505
> 
> 赞同：0
> 
> 时间：2012-11-26T14:07:12.500
> 
> 标签：iphone, ios, ipad, ios5, ios-simulator

`UISplitViewController`我想从详细视图控制器显示全屏视图控制器。但我希望`UITabBar`仍然可见。当我`presentViewController`它会隐藏我的`UITabBar`. 任何人都可以建议我的流程吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T22:38:34.963

您不必将您的嵌套`UIViewController`在`UINavigationController`.

然后代替

```
[someViewController presentViewController: anotherViewController]; 
```

你必须打电话

```
[someNavigationController presentViewController:anotherViewController]; 
```

这会成功的。

请注意，它将`anotherViewController`在堆栈的顶部添加`viewControllers`.

删除它只需调用`dismissViewController`导航控制器！

# eclipse - 查找和替换 - 正则表达式

> ID：13566508
> 
> 赞同：1
> 
> 时间：2012-11-26T14:07:15.377
> 
> 标签：eclipse, css

由于 IE10 已经问世，而且它们没有使用动画前缀或关键帧，我决定将它们从我的项目中删除。这是一个非常大的项目，所以我不想手动删除行。这是我要删除的示例：

```
@-ms-keyframes fadestars {
    0% { opacity: 1; }
    25% { opacity: 0.2; }
    30% { opacity: 1; }
    50% { opacity: 0.2;}
    55% { opacity: 1; }
    60% { opacity: 0.2; }
    65% { opacity: 1; }
    75% { opacity: 0.5; }
    100% { opacity: 1; }
}

-ms-animation: fadestars 30s linear 1s infinite; 
```

所以我想删除这些，我知道我需要 2 个不同的表达式来删除它们。我尝试的关键帧如下：

```
-ms-keyframes(.*?\{[.\n]*?\}) 
```

这并不成功，任何了解 eclipse 中正则表达式的人都可以帮助我，我将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:36:07.153

我已经回答了我自己的问题。所以我希望这对任何人都有帮助。下面的代码可用于搜索 -ms- 的任何关键帧（对于 -moz- 也可以更改此前缀，因为它们不再需要 freom v16 的 firefox）并且可以帮助将它们从您自己的项目中删除。节省了我很多时间

```
@-ms-keyframes \w+ \{\R(.|\R)*?\R\} 
```

# scheme - 为什么 cons 的第二个参数必须是一个列表

> ID：13566509
> 
> 赞同：4
> 
> 时间：2012-11-26T14:07:18.243
> 
> 标签：scheme, the-little-schemer

我正在读一本叫做**小阴谋家**的书。

在阅读之前，我已经阅读了 SICP 的**前三章**。

我的问题是**为什么 cons 的第二个参数必须是 list**。

但是，`(cons a b)`适用于所有值 a 和 b 和

`(car (cons a b))`=一个

`(cdr (cons a b))`= b

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:23:55.267

to 的第二个参数`cons`不一定*是*一个列表。*仅*当您正在构建列表（正确或其他方式）时，它才是列表。如果单元格的`cdr`一部分`cons`不是列表，则完全有效，例如，在构建关联列表时：

```
(define lookup-table (list (cons 'x 10) (cons 'y 20) (cons 'z 30)))
(assoc 'z lookup-table)
=> '(z . 30) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2019-07-15T11:46:00.107

并非所有 Lisp 实现都允许非列表作为 cons 的第二个参数。例如，请参阅[https://scheme.cs61a.org/](https://scheme.cs61a.org/)

# php - 在 Yii 控制器中使用 renderPartial 调用函数

> ID：13566515
> 
> 赞同：1
> 
> 时间：2012-11-26T14:07:44.070
> 
> 标签：php, yii, renderpartial

来自控制器的代码：

```
public function actionSomeName($param){
    do something here...

    $this->renderPartial('_formCalculations', array(
        'modelX'=>$modelX,
        'modelY'=>$modelY,
    )); 

} 
```

我想在我看来调用该函数，但它不起作用。是否`$this->renderPartial`正确？我认为不是，因为它只是为了观看？但是我必须使用哪个功能呢？

```
$this->renderPartial('Controllername/Somename',array("param"=>"value")); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-17T05:56:19.800

Surly 你不能单独使用 renserPartial，但你可以这样做：

```
$body = $this->renderPartial('Controllername/Somename',array("param"=>"value"),true); 
```

在这段代码中，您拥有该视图文件的脚本，您可以在需要的任何地方使用它们。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:02:27.730

您不能直接在视图中调用控制器/操作。

您可以用户渲染/渲染部分。**Render/renderPartial 引用视图文件，而不是控制器操作**

您也可以将您的逻辑放入代码中（在您的示例中，“在这里做某事......”部分）但这不是好的 MVC！

另一种选择是使用[小部件](http://yiitutorials.net/easy/creating-a-widget-with-the-yii-framework)

# eclipse - Eclipse：打开类和对象的语法高亮

> ID：13566517
> 
> 赞同：9
> 
> 时间：2012-11-26T14:07:47.317
> 
> 标签：eclipse, syntax-highlighting

是否有可能像在 Visual Studio 中一样在 Eclipse 中打开类和对象的突出显示？目前仅突出显示变量名称。

左：Eclipse，右：Visual Studio 2012

图片：（[http://image-uploader.de/bild.php/9468,unbenanntHU9EZ.jpg](http://image-uploader.de/bild.php/9468,unbenanntHU9EZ.jpg)）

![Eclipse（左）和 Visual Studio（右）之间的视觉差异](../Images/63292bfe0393792c7d8c6eaa5b1d7926.png)

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-11-26T14:14:26.490

首选项 -> Java -> 编辑器 -> 语法着色

然后只需打开/关闭您想要突出显示的内容。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-11-26T14:10:15.767

试试这个

```
Window -> Preferences -> Java -> Editor -> Mark Occurrences 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T14:11:08.780

此处完整说明如何添加高级语法标记[http://www.javalobby.org/forums/thread.jspa?threadID=15586](http://www.javalobby.org/forums/thread.jspa?threadID=15586)

# exception - 在 Clojure 中捕获 ExceptionInfo 的 Slingshot 选择器语法

> ID：13566519
> 
> 赞同：2
> 
> 时间：2012-11-26T14:07:55.803
> 
> 标签：exception, exception-handling, clojure, try-catch

如果我使用 Slingshot 的`try+`and `catch`，很容易编写一个选择器来匹配地图的内容：

```
(defn dosomething (throw+ {:some :data}))
(try+ (dosomething)
    (catch [:some :data] ;; recover)) 
```

但是，如果我想使用`ex-info`，则 catch 选择器与 的数据不匹配`ExceptionInfo`：

```
(defn dosomething (throw (ex-info "A message" {:some :data}))) 
```

显然，我可以捕获`ExceptionInfo`或编写自定义谓词来匹配数据，我只是想知道我是否遗漏了有关 Slingshot 或的东西`ex-info`，因为我被引导相信它们比这更顺利地协同工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T23:01:14.053

我不太确定你为什么要抛出 ExceptionInfo，我的理解是它只是任意数据的载体，你可以用 throw+ 正常抛出。

```
(throw+ {:some :data :msg "A message"}) 
```

或者，如果重点是您不想使用 throw+，那么我认为没有一种完全直接的方法可以捕获它。你必须做类似的事情

```
(catch (-> % ex-data :some (= :data)) myerr (foo myerr)) 
```

我不知道想要使用 try+ 而不是 throw+ 的用例是什么。

# perl - 在 Perl 中添加哈希值

> ID：13566521
> 
> 赞同：0
> 
> 时间：2012-11-26T14:08:03.447
> 
> 标签：perl, hash, reference

问题是我正在尝试创建一个散列散列，然后向每个散列添加更多元素。我正在从一个文件中读取，我正在匹配各种项目，我想将它们存储在不同的子哈希中 - （'Category'，'Item'，'Description'，'Score'）。

稍后我需要将它们存储在[CSV](https://en.wikipedia.org/wiki/Comma-separated_values)文件中，但目前我只是想打印它们，但我遇到了很多错误。

这是我的代码：

```
use strict;
use warnings;

my %MacroA = ('Category', 'Item', 'Description', 'Score');

open (my $file, '<', 'Layout.txt') or die $!;

while (my $line = <$file>) {

    if ($line  =~ /\b(layout)\b,/) {
        $MacroA{Category}++;
    }
    elsif ($line =~ /,([\w\s]+?),/) {
        $MacroA{Item}++;
    }
    elsif ($line =~ /,\b(\w+?.\d+?)\b,/g) {
        $MacroA{Desciption}++;
    }
    elsif ($line =~ /,\b(pass|fail)\b/) {
        $MacroA{Score}++;
    }
}

close $file;

foreach my $categories (keys %{ $MacroA{$Category}}) {
    print $categories, "\n";
}
foreach my $items (keys %{ $MacroA{$Item}}) {
    print $items, "\n";
}
foreach my $descriptions (keys %{ $MacroA{$Description}}) {
    print $descriptions, "\n";
}
foreach my $scores (keys %{ $MacroA{$Score}}) {
    print $scores, "\n";
} 
```

我得到的错误：

```
Global symbol "$Category" requires explicit package name at MacroA.pl line 29.
Global symbol "$Item" requires explicit package name at MacroA.pl line 32.
Global symbol "$Description" requires explicit package name at MacroA.pl line 35.
Global symbol "$Score" requires explicit package name at MacroA.pl line 38.
Execution of MacroA.pl aborted due to compilation errors. . . 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T15:58:35.817

您的问题只是代表了一些基本的误解，任何编程初学者最终都会努力克服这些误解。评论是完全正确的：当这种事情发生时，阅读你的错误并尝试使用一些好的教程或书籍来理解它们。我会尽力帮助你，虽然我不太清楚你想要达到什么目的。

你说你想创建一个“散列哈希”，但从你的代码的外观来看，你只是在创建一个计数散列，你可以在其中跟踪每个第一级“键”的次数（类别，项目等）出现在您正在读取的文件中。这不是现在的散列散列 -`%MacroA`目前仅包含一层散列。

第一个问题是您尝试使用要使用的键列表来定义散列。

```
my %MacroA = ('Category', 'Item', 'Description', 'Score'); 
```

您实际上是在尝试传递`array`您的密钥。如果你给一个散列一个数组，它会将第一个元素解释为它的键，第二个作为该键的值，第三个作为第二个键，依此类推。所以你最终会得到这个

```
%MacroA = (
    Category => Item,
    Description => Score
) 
```

要仅为一级键初始化散列，您可以为每个键指定初始计数 0：

```
my %MacroA = ('Category', 0, 'Item', 0, 'Description', 0, 'Score', 0); 
```

这通常用箭头符号写，`=>`以使事情更清楚

```
my %MacroA = ('Category' => 0, 'Item' => 0, 'Description' => 0, 'Score', 0); 
```

要初始化第二级键的哈希，您可以这样做（正如您在评论中正确建议的那样）：

```
my %MacroA = ('Category' => {}, 'Item' => {}, 'Description' => {}, 'Score', {}); 
```

实际上，您甚至不需要将散列初始化为具有空值的键，因为 Perl 将在您第一次使用时使用自动激活来初始化一个空键。所以你真正需要做的就是像这样初始化散列变量

```
my %MacroA; 
```

我将在这里猜测一下，并假设您打算将类别、描述等作为您的第一级键，然后将您在文件中找到的任何内容作为第二级键。我想你想计算第二级键出现的次数。

目前，您的哈希正在跟踪 Category、Item... 键，因为您正在递增使用这些键存储的值：

```
$MacroA{Category}++; 
```

因为您的正则表达式匹配将返回它们匹配到标量变量的任何内容`$1`，您可以使用它来增加第二级哈希，如下所示：

```
$MacroA{Category}->{$1}++; 
```

最后，在打印出您的计数时，您犯了一个简单的错误，即使用变量引用您的键字符串：

```
$MacroA{$Category} 
```

您可能打算为每个第一级键使用一个字符串：

```
$MacroA{'Category'}; 
```

Perl 认为您正在尝试使用未定义的变量`$Category`，因此会抛出您遇到的错误。

最后，如果您`Dumper`在代码中的某些点打印数据结构的格式化日志，它肯定会帮助您理解。只需使用代码

```
use Data::Dumper;
print Dumper(\%MacroA); 
```

在脚本中的任何时间点查看该`%MacroA`时间点的结构。

# linq - Linq 查询结果到带有动态列的表

> ID：13566522
> 
> 赞同：0
> 
> 时间：2012-11-26T14:08:14.373
> 
> 标签：linq, linq-to-entities

拥有三个表（我正在尝试做的简化方法）我正在尝试使用动态列构建一个表。

布局应该是一个网格，显示每个所有者拥有哪些许可证。这是从我首先需要进行不同选择以获取表的标题列的表中检索的。

![在此处输入图像描述](../Images/b7368058f8272afbea35fa6af947890d.png)

这是我检索表标题以获取动态列的方法

```
var tableHeader = (from l in Licenses
join lt in LicenseTypes on l.LicenseTypeId equals lt.ID
where l.Category == 1
select new 
{
    l.LicenseTypeId,
    lt.Name
}).Distinct().OrderBy (x =>x.Name ) 
```

![在此处输入图像描述](../Images/5adcf6eee599fd049b750974bf0e64cd.png)

我不太清楚将这个查询与我的 headerquery 一起使用来组成我的表的最佳选择是什么

```
var tableData = (from l in Licenses select l) 
```

一种方法是迭代 tableData 并为每个不同的所有者构建数据行并让子查询检索诸如所有者名称之类的数据以呈现在网格中。然而，这将导致对数据库的一系列事务，所以我想知道这是否可以以更优雅的方式完成。

这是为我的示例生成数据的脚本：

```
if exists (select * from sysobjects where name = 'LicenseType') drop table LicenseType
if exists (select * from sysobjects where name = 'License') drop table License
if exists (select * from sysobjects where name = 'LicenseOwner') drop table LicenseOwner
go

create table LicenseType
(
    ID int not null primary key,
    Name nvarchar(30) not null
)

create table LicenseOwner
(
    ID int not null primary key,    
    Name nvarchar(30) not null
)

create table License
(
    ID int not null primary key,
    LicenseTypeId int null references LicenseType(ID),
    LicenseOwnerId int null references LicenseOwner(ID),
    Status nvarchar(30),
    Category int not null
)

insert LicenseType values (1, 'A001')
insert LicenseType values (2, 'A002')
insert LicenseType values (3, 'A003')
insert LicenseType values (4, 'A004')
insert LicenseType values (5, 'C001')
insert LicenseType values (6, 'X001')

insert LicenseOwner values (1, 'Owner 1')
insert LicenseOwner values (2, 'Owner 2')
insert LicenseOwner values (3, 'Owner 3')
insert LicenseOwner values (4, 'Owner 4')
insert LicenseOwner values (5, 'Owner 5')

insert License values (1, 1, 1, 'OK', 1)
insert License values (2, 2, 1, 'Invalid', 1)
insert License values (3, 3, 1, 'OK', 1)
insert License values (4, 6, 1, 'Pending', 1)
insert License values (5, 1, 1, 'OK', 1)
insert License values (6, 2, 1, 'OK', 1)
insert License values (7, 6, 1, 'Invalid', 1) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-28T19:58:01.013

如果您很高兴最终得到一个数据表，那么您可以执行以下操作。

```
var data = (from r in Licenses 
            where r.Category == 1
            select new 
            { 
                 Owner       = r.LicenseOwner.Name , 
                 LicenseType = r.LicenseType.Name,  
                 Status      = r.Status 
            }
            ).ToList(); 
```

这应该通过一次数据库查找来检索您需要的所有信息，并且可以在需要时进行过滤（如示例中仅选择类别 1）

然后，您可以使用 ToLookup 按所有者对所有（内存中的）记录进行分组，即

```
var lookup = data.ToLookup(r => r.Owner , 
                           r => new   
                              { 
                              License = r.LicenseType  , 
                              Status = r.Status
                              } 
                           ).OrderBy(r=>r.Key); 
```

然后检索列名并从中构建数据表。

```
var columns = (from r in data 
                    orderby r.LicenseType 
                    select r.LicenseType
                  ).Distinct().ToList();

DataTable dt = new DataTable();
dt.Columns.Add("Owner");
foreach(var r in columns)
    dt.Columns.Add(r); 
```

然后从查找中填充数据表

```
foreach(var r in lookup)
{
    DataRow dr = dt.NewRow();
    dr["Owner"]  = r.Key ;

    foreach(var column in columns)
        dr[column] = "";

    foreach(var entry in r)
        dr[entry.License] = entry.Status;
    dt.Rows.Add(dr);
} 
```

如果您包含对 System.Data.DataSetExtensions 的引用，您可以使用 linq 查询生成的数据表，例如

```
 var owner1 = (from r in dt.AsEnumerable() 
                  where r.Field<string>("Owner") == "Owner 1"      
                  select r
              ).SingleOrDefault(); 
```

# wpf - 在一个父窗口上使用两个相同的用户控件时出现绑定错误

> ID：13566523
> 
> 赞同：1
> 
> 时间：2012-11-26T14:08:15.750
> 
> 标签：wpf, data-binding, user-controls

我有一个这样定义的用户控件：

XAML：

```
<UserControl>
<Grid x:Name="LayoutRoot">
    <TabControl x:Name="TabControl" ItemsSource="{Binding Products}" >
        <TabControl.ContentTemplate>
            <DataTemplate>
                <Grid>
                    <ListView ItemsSource="{Binding Features}" Name="FeaturesListView">
                        <ListView.View>
                            <GridView>
                                <GridViewColumn x:Name="FeatureHeader" DisplayMemberBinding="{Binding Name}"  />
                                <GridViewColumn x:Name="CounterHeader" DisplayMemberBinding="{Binding Counter}" />
                                <GridViewColumn x:Name="ExpireDateHeader"  DisplayMemberBinding="{Binding ExpireDate}" />
                            </GridView>
                        </ListView.View>
                    </ListView>
                </Grid>
            </DataTemplate>
        </TabControl.ContentTemplate>
    </TabControl>
</Grid> 
```

后面的代码：

```
public partial class LicenseInfoControl : UserControl
{
    public LicenseInfoControl(ShowableLicense license)
    {
        InitializeComponent();
        DataContext = license;
    }
} 
```

因此，如果我对一个窗口使用一个用户控件：

```
<Window>
    <Grid>
        <local:LicenseInfoControl x:Name="LicenseInfoControl"/>
    </Grid>
</Window> 
```

效果很好。但如果我使用其中两个：

```
<Window>
    <Grid>
        <local:LicenseInfoControl x:Name="FileLicenseInfoControl"/>
        <local:LicenseInfoControl x:Name="SamLicenseInfoControl"/>
    </Grid>
</Window> 
```

两个 ListView 都是空的。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-03T09:20:43.417

绑定效果很好。问题是，如果 TabControl 有一个 TabItem - 它在加载窗口并且数据暴露在其中时被选中。但是如果 TabControl 有两个 TabItems - 没有一个被选中，并且感觉绑定不起作用。但是，如果您选择选项卡项之一 - 数据会立即公开。所以决定是在具有两个用户控件的窗口构造函数中设置 SelectedIndexes （在我的例子中是 LicenseInfoControl）：

```
FileLicenseInfoControl.ProductTabControl.SelectedIndex = 0;
SamLicenseInfoControl.ProductTabControl.SelectedIndex = 0; 
```

# zend-framework - Zend Rest Controller 将 GET 映射到 indexAction

> ID：13566526
> 
> 赞同：0
> 
> 时间：2012-11-26T14:08:21.603
> 
> 标签：zend-framework, rest

我有一个扩展 Zend_Rest_Controller 的 REST 设置。当我调用某个资源时，通过 HTTP GET 方法它尝试执行`indexAction()`不`getAction()`

当我`$this->_request->getActionName()`在`preDispatch()`它产生的`index`时候使用它记录动作名称时，它应该映射到`get`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:10:52.140

[请参阅此处的文档](http://framework.zend.com/manual/1.12/en/zend.controller.router.html#zend.controller.router.routes.rest)：

> 注意：如果 Zend_Rest_Route 不能匹配一个有效的模块、控制器或动作，它将返回 FALSE 并且路由器将尝试使用路由器中的下一个路由进行匹配。

所以看起来你的控制器没有`getAction()`功能，或者你使用了错误的控制器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-17T17:53:35.500

这是预期的行为。GET 返回实体的单个实例，例如 myhost.com/book/1 将返回 ID 为 1 的书籍。相反，myhost.com/book 将返回所有可用书籍的列表。

只需尝试以下操作：

```
curl -v -H "Accept: application/json" -X GET http://myhost.com/book/1 
```

对比

```
curl -v -H "Accept: application/json" -X GET http://myhost.com/book 
```

第一个调用将委托给 getAction()，第二个调用将委托给 indexAction()

# html - 莫名其妙的 HTML/CSS 行为

> ID：13566527
> 
> 赞同：4
> 
> 时间：2012-11-26T14:08:22.910
> 
> 标签：html, css

我有一个**简单的 html**页面和一个相当**简单的 css**，它让我发疯 - 我根本*不明白这里发生了什么*（最初的任务是创建一个简单的联系表格，使用modernizr，但我已经剥离了一切） ：

```
<html>
<head>
    <style>
        body {
            font-size: 16px;
            line-height: 26px;
        }

        label {
            float: left;
            margin-top: 4px;
        }

        input {
            border: 1px solid #ccc;
            margin: 4px;
        }

        input:focus {
            border: 2px solid #900;
        }
    </style>

</head>
<body>
    <label>1:</label><input id="1" /><br />
    <label>2:</label><input id="2" /><br />
    <label>3:</label><input id="3" /><br />

</body>
</html> 
```

带有标签的三行和输入框的左边距增加，如果我将焦点设置为任何输入，下面的会跳回（至少在 Chrome 和 FF 中）。**为什么？**

现在，如果我删除几乎***任何***css 属性，事情就会变得陌生：

1.  上面的原文可以在[这里](http://www.schreiberx.de/stackoverflow/weird_html_css_everything_in.html)找到。
2.  如果我删除了*正文*线**（甚至只删除了*line-height: 26px;* part!!**），左边距就会消失（为什么？），请[在此处查看](http://www.schreiberx.de/stackoverflow/weird_html_css_no_body.html)。
3.  如果我删除*input:focus*线，则不再发生跳转（为什么？），请[在此处查看](http://www.schreiberx.de/stackoverflow/weird_html_css_no_focus.html)。
4.  如果我删除*边框：1px solid #ccc;* 从*输入*，边距消失了（为什么？？？），检查[这里](http://www.schreiberx.de/stackoverflow/weird_html_css_no_input_border.html)。

还有其他的相互依赖关系。这在 jsfiddle 和其他在线工具中不会发生，但可以在本地轻松复制。

**底线：整个行为对我来说似乎完全陌生，我希望 CSS Sherlock Holmes 可以阐明这里发生的事情。**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:22:14.697

问题在于编号列表。

您正在设置一个边距顶部，并使行高大于文本本身。这通常很好，但这会使数字大于输入框。

您正在强制使用新线，`<br />`它们不能自然地浮动到它们应该在的位置，因为之前的数字对于它的“线”来说“太大”。

我正在努力解释它，但要修复它，您可以添加`line-height: 2;`到输入框或您提到的任何修复程序，或者最好将其全部替换为有序列表。

如果您仍然不明白，请尝试`border: 1px solid #000;`在标签上设置，您会明白我的意思。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T14:19:03.713

意外的行为是因为`labels`它们在相同的`float`上下文中起作用，而没有`clear`破坏它。所以当你告诉你的第二个`label`到`float`左边时，它会找到前一个标签，因此“堆叠”到右边。

将以下内容添加到您的 CSS（如果您坚持使用`br`标签）：

```
br {
    clear: both;
} 
```

# javascript - 为什么我的拉斐尔笔触的宽度或不透明度不同？

> ID：13566528
> 
> 赞同：3
> 
> 时间：2012-11-26T14:08:26.520
> 
> 标签：javascript, raphael

出于某种原因，我的笔画在我的图纸中没有显示为相同的宽度或不透明度。在下面的小提琴中，我假设矩形和路径都应该具有相同的笔画，但它们显然不同。我在我的项目中遇到了类似的问题，除了路径有宽的灰色笔划，而矩形有适当的瘦黑色笔划。有谁知道使笔划看起来像 1px 黑色笔划而不是这些稍微透明的模糊 2px 笔划的重置？

这是我的代码（[jsFiddle](http://jsfiddle.net/Wryte/2NfQw/)）：

```
var paper = Raphael(0,0,200,200);

paper.rect(0,0,50,50);
paper.path("M0,0,200,200");​ 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:16:16.943

将零更改为 0.5：

```
var paper = Raphael(0,0,200,200);

paper.rect(0.5,0.5,50,50);
paper.path("M0,0,200,200");​ 
```

[http://jsfiddle.net/H4xyX/](http://jsfiddle.net/H4xyX/)

想象一下你的盒子顶部边缘的线，从 (0,0) 到 (0,50) 和 1 像素宽。发生的事情是，您的笔画围绕这条线绘制 - 在线上方半个像素，下方半个像素，因此模糊。线的宽度范围从 -0.5 变为 +0.5。

如果您将偏移量设置为 0.5，则线宽现在从 0 变为 1 - 完全填充单个像素。

# jquery - 修改JQuery滑动面板例程

> ID：13566532
> 
> 赞同：3
> 
> 时间：2012-11-26T14:08:37.210
> 
> 标签：jquery

我是 Qjuery 的新手，正在努力学习足以完成我的网站。

不久前，sg3s 写了一个最出色的小提琴，它完成了我正在寻找的大部分内容。这是：http: [//jsfiddle.net/sg3s/RZpbK/](http://jsfiddle.net/sg3s/RZpbK/)

```
jQuery(function($) {

$('a.panel').click(function() {
    var $target = $($(this).attr('href')),
        $other = $target.siblings('.active'),
        animIn = function () {
            $target.addClass('active').show().css({
                left: -($target.width())
            }).animate({
                left: 0
            }, 500);
        };

    if (!$target.hasClass('active') && $other.length > 0) {
        $other.each(function(index, self) {
            var $this = $(this);
            $this.removeClass('active').animate({
                left: -$this.width()
            }, 500, animIn);
        });
    } else if (!$target.hasClass('active')) {
        animIn();
    }
}); 
```

});​</p>

我想对此进行两到三个更改，我花了整个周末的大部分时间试图解决这个问题，但没有成功。

1：有一个可以完全关闭面板的第四个触发器（可能是“trigger0”）。前一个面板将关闭，并且不会打开新面板，除非有人点击了触发器 0 之外的其他触发器之一。

2：我想给触发按钮添加背景图片，表示它被选中。

3：我不知道这是否可以做到，或者这是否只是 JQuery 的副产品。如果您可以按一次后退按钮以返回上一页，而不是按与您按触发按钮相同的次数按它，那就太好了。

鲍勃，对任何这些项目的任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T18:47:47.210

一个迟到的答案，但我认为这会解决你上面的问题

1.  添加一个新面板并使其隐藏带有“.active”类集的面板，请参见小提琴代码
2.  我添加了背景颜色（使用相同类型的代码轻松更改为图像，我只是手边没有图像）。在 Click 功能中，首先删除所有背景，`$('a.panel').css('background', '');`然后在当前单击的项目上设置背景`$(this).css('background', 'red');`
3.  添加`event.preventDefault();`到您的单击事件功能，这将禁用 href 的默认行为（导航到 href）。从而使您的历史记录保持干净，“后退按钮将带您返回上一页。

小提琴基于你的问题

**[http://jsfiddle.net/7YHFa/](http://jsfiddle.net/7YHFa/)**

# django - Django - Ajax 表单在发送数据时失败

> ID：13566533
> 
> 赞同：0
> 
> 时间：2012-11-26T14:08:46.827
> 
> 标签：django, jquery

我正在尝试设置我的表单按钮以保存表单而不重新加载页面。

一切看起来都正确；但我想我错过了一些东西。这是我的代码：

**ajax部分：**

```
$('#submit').click(function() {

        var title = $('#id_title').val();
        var body = $('#id_body').val();
        var isdraft = $('#id_isdraft').is(':checked');

        var ajaxOptions = {
            type: 'post',
            url: '/admin/post/save/',
            data: {
                'title': title,
                'body': body,
                'isdraft': isdraft
            },
            success: function(){
                alert("save success");
             },
            error: function(){
                alert("fail");
             }
           };

        $.ajax(ajaxOptions);
}); 
```

**视图部分：**

```
@require_POST
def save_post(request):
     title = request.POST['title']
     body = request.POST['body']
     isdraft = request.POST['isdraft']
     owner = request.user 

     post = Post(title=title, body=body, isdraft=isdraft, owner=owner)
     post.save()

     return HttpResponse(200) 
```

**网址部分：**

```
url(r'^admin/post/save/', view='save_post', name='save_post'), 
```

当我点击提交按钮时；ajax 错误函数调用。

谢谢你

编辑：

在火狐上；它将数据保存到数据库中。它显示错误但再次保存。

但在控制台 [runserver lines] 中；有一个错误：

```
Exception happened during processing of request from ('10.10.10.1', 42526)
Traceback (most recent call last):
  File "/usr/lib/python2.6/SocketServer.py", line 560, in process_request_thread
    self.finish_request(request, client_address)
  File "/usr/lib/python2.6/SocketServer.py", line 322, in finish_request
    self.RequestHandlerClass(request, client_address, self)
  File "/opt/sosyate_/sosyate_env/lib/python2.6/site-packages/django/core/servers/basehttp.py", line 139, in __init__
    super(WSGIRequestHandler, self).__init__(*args, **kwargs)
  File "/usr/lib/python2.6/SocketServer.py", line 618, in __init__
    self.finish()
  File "/usr/lib/python2.6/SocketServer.py", line 661, in finish
    self.wfile.flush()
  File "/usr/lib/python2.6/socket.py", line 297, in flush
    self._sock.sendall(buffer(data, write_offset, buffer_size))
error: [Errno 32] Broken pipe 
```

但在铬; 没有这样的错误。它只是抛出我在 ajax 函数下定义的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:42:49.680

我发现装饰器不适用于 ajax 请求。我建议删除它并将检查放在方法中

```
def save_post(request):
    if request.method == 'POST':
         title = request.POST['title']
         body = request.POST['body']
         isdraft = request.POST['isdraft']
         owner = request.user 

         post = Post(title=title, body=body, isdraft=isdraft, owner=owner)
         post.save()

         return HttpResponse(200) 
```

# try-catch - 当从 catch 抛出异常时，C# final 块没有执行

> ID：13566535
> 
> 赞同：2
> 
> 时间：2012-11-26T14:09:00.590
> 
> 标签：try-catch, finally

当我放入`SecondMain()`try blcok 时，里面的最后一个块`secondMain()`正在执行。但是当我把它放在外面时它没有执行。为什么不执行？

```
static void Main(string[] args)
    {

        try
        {
            SecondMain(args); //try putting 
            Console.WriteLine("try 1"); 
            throw new Exception("Just fail me");              
        }            
        finally
        {
            Console.WriteLine("finally");
        }

    }

    static void SecondMain(string[] args)
    {

        try
        {
            throw new StackOverflowException();
        }
        catch (Exception)
        {
            Console.WriteLine("catch");
            throw;
        }
        finally
        {
            Console.WriteLine("finally");
        }

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:38:05.007

我尝试了您的代码，无论是从 try 块外部还是内部调用 SecondMain() 方法都没有关系。

程序总是崩溃，因为您不处理异常，.Net 环境中的 MainExceptionHandler 必须处理这个问题。他得到一个未处理的异常并退出你的程序。

试试这个，现在我认为你的代码表现得像预期的那样。

```
static void Main(string[] args)
{

    try
    {
        SecondMain(args); //try putting 
        Console.WriteLine("try 1"); 
        throw new Exception("Just fail me");              
    }
    catch(Exception)
    {
        Console.WriteLine("Caught");
    }      
    finally
    {
        Console.WriteLine("finally");
    }

}

static void SecondMain(string[] args)
{

    try
    {
        throw new StackOverflowException();
    }
    catch (Exception)
    {
        Console.WriteLine("catch");
        //throw;
    }
    finally
    {
        Console.WriteLine("finally");
    }

} 
```

我希望这是您正在寻找的答案。

# html - 从 HTML Web 文档 .NET 中获取文本

> ID：13566544
> 
> 赞同：1
> 
> 时间：2012-11-26T14:09:47.857
> 
> 标签：html, vb.net, text, web, document

基本上我想做的是从 HTML Web 文档中获取文本，

```
<a href="showthread.php?tid=2632829">1</a> 
<a href="showthread.php?tid=2342818">1</a> 
<a href="showthread.php?tid=2342818">1</a> 
<a href="showthread.php?tid=2342818">1</a> 
....
.... 
```

所有这些链接都在不同的行中，并且它们之间还有许多其他脚本。现在的问题是我想`1</a>`在这些文档中搜索“”并获取链接

```
showthread.php?tid=11digitnumber 
```

然后我想将它们逐行放置在richtextbox中

```
 showthread.php?tid=11digitnumber
    showthread.php?tid=11digitnumber
    showthread.php?tid=11digitnumber

... 
```

到目前为止我所做的是使用

```
source = WebBrowser1.DocumentText.ToString() 
```

早些时候我有一些运气使用

```
dim ss,variable as string

variable = ss.Substring(ss.LastIndexOfAny(">1</a> ") - 27, 27)
output:
showthread.php?tid=11digitnumber 
```

但我只能使用一次，除了文档中有很多这样的文件

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:25:39.903

你只需要玩一些逻辑，比如：

```
myOriginPoint = your starting point (usually 0)

myLastOccurrence = your last point (usually with LastIndexOf) 
```

然后你可以使用一个循环和一个时间列表，如：

```
List<String> urls = new List<String>();

while(myOriginPoint < myLastOccurrence )
{

    //retrieve the keyword
    var urlFound = your logic to retrieve the url

    //save the keyword 
    urls.Add(urlFound);

    //move to next position 

    myOriginPoint = indexOf  +1;

} 
```

顺便说一句，您还可以在 .Net 中使用 WebClient，更好地从 url 检索数据：http: [//msdn.microsoft.com/en-us/library/system.net.webclient.aspx](http://msdn.microsoft.com/en-us/library/system.net.webclient.aspx)

我希望它有所帮助，

# javascript - 在 JS 中将月份名称转换为月份编号的最简单方法？（一月 = 01）

> ID：13566552
> 
> 赞同：49
> 
> 时间：2012-11-26T14:10:12.663
> 
> 标签：javascript, date

只想将**Jan**转换为**01**（日期格式）

我可以使用`array()`，但正在寻找另一种方式......

有什么建议吗？

* * *

## 回答 #1

> 赞同：93
> 
> 时间：2012-11-26T14:16:56.163

只是为了好玩，我这样做了：

```
function getMonthFromString(mon){
   return new Date(Date.parse(mon +" 1, 2012")).getMonth()+1
} 
```

奖励：它还支持完整的月份名称：-D 或仅返回 -1 的新改进版本 - 如果您愿意，可以将其更改为抛出异常（而不是返回 -1）：

```
function getMonthFromString(mon){

   var d = Date.parse(mon + "1, 2012");
   if(!isNaN(d)){
      return new Date(d).getMonth() + 1;
   }
   return -1;
 } 
```

抱歉所有编辑 - 超越自己

* * *

## 回答 #2

> 赞同：55
> 
> 时间：2012-11-26T14:19:36.050

其他方式;

```
alert( "JanFebMarAprMayJunJulAugSepOctNovDec".indexOf("Jun") / 3 + 1 ); 
```

* * *

## 回答 #3

> 赞同：40
> 
> 时间：2012-11-26T14:16:44.403

如果你不想要一个数组，那么一个对象呢？

```
const months = {
  Jan: '01',
  Feb: '02',
  Mar: '03',
  Apr: '04',
  May: '05',
  Jun: '06',
  Jul: '07',
  Aug: '08',
  Sep: '09',
  Oct: '10',
  Nov: '11',
  Dec: '12',
} 
```

* * *

## 回答 #4

> 赞同：19
> 
> 时间：2014-05-26T07:34:57.377

做同样的另一种方法

```
month1 = month1.toLowerCase();
var months = ["jan", "feb", "mar", "apr", "may", "jun", "jul", "aug", "sep", "oct", "nov", "dec"];
month1 = months.indexOf(month1); 
```

* * *

## 回答 #5

> 赞同：14
> 
> 时间：2016-11-27T12:50:28.053

如果您使用 moment.js：

```
moment().month("Jan").format("M"); 
```

* * *

## 回答 #6

> 赞同：9
> 
> 时间：2012-11-26T14:23:28.740

我通常用来做一个函数：

```
function getMonth(monthStr){
    return new Date(monthStr+'-1-01').getMonth()+1
} 
```

并称之为：

```
getMonth('Jan');
getMonth('Feb');
getMonth('Dec'); 
```

* * *

## 回答 #7

> 赞同：7
> 
> 时间：2021-03-25T00:24:11.753

对于 2021 年仍在寻找这个答案的任何人，[`toLocaleDateString`](https://caniuse.com/date-tolocaledatestring)现在都得到了广泛的支持

```
let monthNumberFromString = (str) => {
  return new Date(`${str} 01 2000`).toLocaleDateString(`en`, {month:`2-digit`})
}
// monthNumberFromString(`jan`) returns 01 
```

* * *

## 回答 #8

> 赞同：4
> 
> 时间：2016-05-23T12:29:06.260

```
function getMonthDays(MonthYear) {
  var months = [
    'January',
    'February',
    'March',
    'April',
    'May',
    'June',
    'July',
    'August',
    'September',
    'October',
    'November',
    'December'
  ];

  var Value=MonthYear.split(" ");      
  var month = (months.indexOf(Value[0]) + 1);      
  return new Date(Value[1], month, 0).getDate();
}

console.log(getMonthDays("March 2011")); 
```

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2014-11-12T18:56:35.360

```
var monthNames = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec']; 
```

然后只需调用 monthNames[1] 那将是二月

所以你总是可以做出类似的东西

```
 monthNumber = "5";
  jQuery('#element').text(monthNames[monthNumber]) 
```

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2016-08-18T11:10:30.013

这是所选答案的修改版本：

```
getMonth("Feb")
function getMonth(month) {
  d = new Date().toString().split(" ")
  d[1] = month
  d = new Date(d.join(' ')).getMonth()+1
  if(!isNaN(d)) {
    return d
  }
  return -1;
} 
```

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2015-01-06T19:22:18.033

这是另一种方式：

```
var currentMonth = 1
var months = ["ENE", "FEB", "MAR", "APR", "MAY", "JUN", 
              "JUL", "AGO", "SEP", "OCT", "NOV", "DIC"];

console.log(months[currentMonth - 1]); 
```

* * *

## 回答 #12

> 赞同：1
> 
> 时间：2021-11-24T17:55:08.243

```
function getNumericMonth(monthAbbr) {
      return (String(['January',
        'February',
        'March',
        'April',
        'May',
        'June',
        'July',
        'August',
        'September',
        'October',
        'November',
        'December'].indexOf(monthAbbr) + 1).padStart(2, '0'))
    }

   console.log(getNumericMonth('September'));
```

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2018-12-10T15:04:58.293

这是一个简单的单线函数

```
//ECHMA5
function GetMonth(anyDate) { 
   return 'Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec'.split(',')[anyDate.getMonth()];
 }
//
// ECMA6
var GetMonth = (anyDate) => 'Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec'.split(',')[anyDate.getMonth()]; 
```

# sql - 将一千条记录导入数据库的最快方法是什么？

> ID：13566555
> 
> 赞同：-1
> 
> 时间：2012-11-26T14:10:18.497
> 
> 标签：sql, database, sql-server-2008, database-administration

**将一千条记录导入数据库的最快方法是什么？**

我不是在寻找最好的答案——我只是想听到他们已经做了一些工作来调整他们的查询的性能。如果他们将完全记录的单个记录插入到一​​个数据仓库大小的系统中，我们将在未来遇到问题。（是的，我实际上与一个 BI 开发人员合作过，他在完全恢复模式下每晚执行数百万次单独的插入，并认为性能是数据库的问题。）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-12T16:23:45.480

> 将一千条记录导入数据库的最快方法是什么？

在非常一般的意义上，执行此操作的最快*过程*通常涉及某种形式的[批量插入](http://msdn.microsoft.com/en-us/library/ms175915.aspx)，可能要注意忽略参照完整性、约束、触发器等的选项（如果这对您的应用程序有意义），并且可能在不记录整个事情的[恢复模型。](http://msdn.microsoft.com/en-us/library/ms189275.aspx)

如果您来自您的应用程序，您可能会查看类似 .net [SqlBulkCopy](http://msdn.microsoft.com/en-us/library/system.data.sqlclient.sqlbulkcopy.aspx)类的内容，而不是像上面那样编写文件。

与往常一样，在尝试获得绝对最佳性能的方法时，请在您的环境中测试多种方法。

> 我不是在寻找最佳答案

那么请告诉我们您在寻找什么。

> 我只是想听到他们已经完成了一些工作来调整查询的性能。

好吧，我已经在一个平台上工作了六年，该平台一次插入数千条记录，每天数百次，并且尽可能接近表现得像一个性能良好的网络应用程序。当我开始维护这个东西时，批量插入是我的第一个“修复”之一，从那时起我们已经做了很多优化。我敢肯定，其他人有更极端的要求并使用类似的方法。并不是说这些对答案真的很重要。

更新：关于硬件的一句话：

我敢肯定，任何在重复将大量记录填充到数据库中时寻求绝对最佳性能的人都会希望[获得一些可用的最佳硬件](http://www.codinghorror.com/blog/2008/12/hardware-is-cheap-programmers-are-expensive.html)。我相信这个讨论将超出本网站的范围。

# c# - SqlConnection - 从池中获取连接之前经过的超时时间

> ID：13566556
> 
> 赞同：0
> 
> 时间：2012-11-26T14:10:20.443
> 
> 标签：c#, asp.net, sql-server, connection

任何人都可以在下面代码中的任何地方看到此日志记录到数据库代码的连接可能会泄漏吗？我偶尔会收到标题中的错误，但在运行此应用程序时并非总是如此。

我唯一要尝试的是包括： SqlConnection.ClearAllPools(); 处置前。这会帮助还是导致过度负荷？

```
 private void InsertToDb(EventLogDto e, string connectionString)
    {
        var cmd = new SqlCommand();
        using (var sqlConn = new SqlConnection(connectionString))
        {
            try
            {
                // Open the connection.
                sqlConn.Open();

                // Build the SqlCommand object
                cmd = BuildSqlCommand(e, sqlConn);

                // Execute the Stored Proc.
                cmd.ExecuteNonQuery();
            }
            catch (Exception ex)
            {
                Logger.Instance.Fatal(ex);
            }
            finally
            {
                sqlConn.Close();
                sqlConn.Dispose();
            }
        }
    } 
```

其中 BuldSqlCommand(e, sqlConn); 是：

```
private SqlCommand BuildSqlCommand(EventLogDto e, SqlConnection sqlConn)
    {
        var cmd = new SqlCommand
        {
            CommandText = "dbo.InsertEventLog",
            CommandType = CommandType.StoredProcedure,
            Connection = sqlConn
        };

        InsertValue(cmd.Parameters, "@EventId", e.EventId);
        InsertValue(cmd.Parameters, "@DateCreated", e.EventDate);
        InsertValue(cmd.Parameters, "@Severity", e.Severity);
        InsertValue(cmd.Parameters, "@Message", e.Message);
        InsertValue(cmd.Parameters, "@Source", e.Source);
        InsertValue(cmd.Parameters, "@TargetSite", e.TargetSite);
        InsertValue(cmd.Parameters, "@StackTrace", e.StackTrace);

        return cmd;
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:24:34.840

试试这个，看看它是否有帮助。

```
try {
    using (var sqlConn = new SqlConnection(myConnectionString)) {
        using (SqlCommand cmd = sqlConn.CreateCommand()) {
            sqlConn.Open();
            AttachParameters(cmd, e);
            cmd.ExecuteNonQuery();
        }
    }
} catch (Exception ex) {
    Logger.Instance.Fatal(ex);
} 
```

如果它仍然发生，我猜它是因为 Fatal()。

# pdf - Itext 表格定位

> ID：13566557
> 
> 赞同：0
> 
> 时间：2012-11-26T14:10:22.087
> 
> 标签：pdf, itext

我正在用java开发一个itext项目。基本上，在我的项目中，我在每个页面上动态放置了 2 个徽标（每个页面顶部有一个徽标，页面底部有一个地址图像）。但是，当我想在页面上添加一个表格时，如果表格有这么多行，在某个点上，表格的行变成地址图像，但我希望行换行到另一个页面，所以行表和地址图像不混合。

这是我想解释的图片：

[http://img801.imageshack.us/img801/8074/tablejj.jpg](http://img801.imageshack.us/img801/8074/tablejj.jpg)

谢谢你的帮助。

这是我的主要爱好：

公共静态无效主要（字符串[]参数）{

```
 EventQueue.invokeLater(new Runnable() {

        public void run() {
            try {

                final denem2321 frame = new denem2321();
                frame.setVisible(true);

                // ///////////////

                frame.getMntmNewMenuItem_1().addActionListener(
                        new ActionListener() {

                            @Override
                            public void actionPerformed(ActionEvent e) {
                                final Teklif frame1 = new Teklif(list
                                        .getSelectedItem(), contactName
                                        .get(list.getSelectedItem()),
                                        hashMapReferansNameAndUrl);

                                frame1.setVisible(true);
                                JOptionPane.showMessageDialog(
                                        frame,
                                        list.getSelectedItem()
                                                + " firması için bir teklif hazırlayınız");

                                String imageUrl = "/Users/nofear/workspace/deneme23/pics/a4-ust.png";
                                String imageUrlAlt = "pics/a4-alt.png";

                                try {
                                    imageust = Image
                                            .getInstance(imageUrl);
                                } catch (BadElementException e3) {
                                    // TODO Auto-generated catch block
                                    e3.printStackTrace();
                                } catch (MalformedURLException e3) {
                                    // TODO Auto-generated catch block
                                    e3.printStackTrace();
                                } catch (IOException e3) {
                                    // TODO Auto-generated catch block
                                    e3.printStackTrace();
                                }

                                try {
                                    imageAlt = Image
                                            .getInstance(imageUrlAlt);
                                } catch (BadElementException e3) {
                                    // TODO Auto-generated catch block
                                    e3.printStackTrace();
                                } catch (MalformedURLException e3) {
                                    // TODO Auto-generated catch block
                                    e3.printStackTrace();
                                } catch (IOException e3) {
                                    // TODO Auto-generated catch block
                                    e3.printStackTrace();
                                }

                                imageust.setAbsolutePosition(
                                        0f,
                                        document.getPageSize()
                                                .getHeight()
                                                - imageust
                                                        .getHeight()-15
                                                );
                                imageAlt.setAbsolutePosition(
                                        0f, 0);

                                System.out
                                        .println("HEIGTG"
                                                + (document
                                                        .getPageSize()
                                                        .getHeight() - imageust
                                                        .getHeight()));

                                frame1.getButtonAl().addActionListener(
                                        new ActionListener() {

                                            @Override
                                            public void actionPerformed(
                                                    ActionEvent arg0) {

                                                try {
                                                    final PdfWriter writer = PdfWriter
                                                            .getInstance(
                                                                    document,
                                                                    new FileOutputStream(
                                                                            "output.pdf"));
                                                    document.open();

                                                    final PdfContentByte cb = writer
                                                            .getDirectContent();

                                                    writer.setPageEvent(new PdfPageEvent() {

                                                        @Override
                                                        public void onStartPage(PdfWriter arg0, Document arg1) {

                                                        }

                                                        @Override
                                                        public void onSectionEnd(PdfWriter arg0, Document arg1, float arg2) {
                                                            // TODO Auto-generated method stub

                                                        }

                                                        @Override
                                                        public void onSection(PdfWriter arg0, Document arg1, float arg2, int arg3,
                                                                Paragraph arg4) {
                                                            // TODO Auto-generated method stub

                                                        }

                                                        @Override
                                                        public void onParagraphEnd(PdfWriter arg0, Document arg1, float arg2) {
                                                            // TODO Auto-generated method stub

                                                        }

                                                        @Override
                                                        public void onParagraph(PdfWriter arg0, Document arg1, float arg2) {
                                                            // TODO Auto-generated method stub

                                                        }

                                                        @Override
                                                        public void onOpenDocument(PdfWriter arg0, Document arg1) {
                                                            // TODO Auto-generated method stub

                                                        }

                                                        @Override
                                                        public void onGenericTag(PdfWriter arg0, Document arg1, Rectangle arg2,
                                                                String arg3) {
                                                            // TODO Auto-generated method stub

                                                        }

                                                        @Override
                                                        public void onEndPage(PdfWriter arg0, Document arg1) {

                                                            try {
                                                                cb.addImage(imageust);
                                                                cb.addImage(imageAlt);
                                                            } catch (DocumentException e) {
                                                                // TODO Auto-generated catch block
                                                                e.printStackTrace();
                                                            }

                                                        }

                                                        @Override
                                                        public void onCloseDocument(PdfWriter arg0, Document arg1) {
                                                            // TODO Auto-generated method stub

                                                        }

                                                        @Override
                                                        public void onChapterEnd(PdfWriter arg0, Document arg1, float arg2) {
                                                            // TODO Auto-generated method stub

                                                        }

                                                        @Override
                                                        public void onChapter(PdfWriter arg0, Document arg1, float arg2,
                                                                Paragraph arg3) {
                                                            // TODO Auto-generated method stub

                                                        }
                                                    });

                                                    // now draw a line below
                                                    // the headline
                                                    cb.setLineWidth(1f);

                                                    cb.stroke();

                                                    // ////////////////////////////////////

                                                    try {
                                                        bfArial = BaseFont
                                                                .createFont(
                                                                        "C:/Windows/Fonts/arial.ttf",
                                                                        "Cp1254",
                                                                        BaseFont.NOT_EMBEDDED);
                                                    } catch (DocumentException e1) {
                                                        // TODO
                                                        // Auto-generated
                                                        // catch block
                                                        e1.printStackTrace();
                                                    } catch (IOException e1) {
                                                        // TODO
                                                        // Auto-generated
                                                        // catch block
                                                        e1.printStackTrace();
                                                    }

                                                    Font baslikFont = new Font(
                                                            bfArial, 24,
                                                            Font.BOLD);

                                                    Font pdfBaslikFont = new Font(
                                                            bfArial, 16,
                                                            Font.NORMAL);

                                                    Font pdfTarihFont = new Font(
                                                            bfArial, 12,
                                                            Font.NORMAL);

                                                    Font altBaslik = new Font(
                                                            bfArial, 12,
                                                            Font.BOLD);

                                                    Font normalWritingFont = new Font(
                                                            bfArial, 12,
                                                            Font.NORMAL);

                                                    final ColumnText ct = new ColumnText(
                                                            cb);

                                                    Calendar currentDate = Calendar
                                                            .getInstance();
                                                    SimpleDateFormat formatter = new SimpleDateFormat(
                                                            "yyyy/MMM/dd");
                                                    String dateNow = formatter
                                                            .format(currentDate
                                                                    .getTime());

                                                    Phrase firmaBaslik = new Phrase(frame1.getTextField_teklifHazirlananFirmaAdi().getText(),
                                                            baslikFont);

                                                    Phrase pdfAltBaslik = new Phrase("WEB SİTESİ TASARIM ve PROGRAMLAMA ANLAŞMASI",pdfBaslikFont);

                                                    Phrase tarih = new Phrase(dateNow, pdfTarihFont);

                                                    Phrase alanAdlari = new Phrase("Sitenin Yayınlanacağı Alan Adları: ",altBaslik);
                                                    Phrase alanAdlarIcerik = new Phrase(frame1.getTextArea_alanAdlari().getText(),normalWritingFont);

                                                    Phrase webHosting = new Phrase("\n\nWebhosting & Yayınlama: ",altBaslik);
                                                    Phrase weHostingIcerik = new Phrase(frame1.getTextArea_webHosting().getText(),normalWritingFont);

                                                    Phrase siteDil = new Phrase("\n\nSitenin Dili: ",altBaslik);
                                                    Phrase siteDilIcerik = new Phrase(frame1.getTextArea_dil().getText(),normalWritingFont);

                                                    Phrase amac = new Phrase("\n\nAmaç: ",altBaslik);
                                                    Phrase amacIcerik = new Phrase(frame1.getTextArea_amac().getText(),normalWritingFont);

                                                    Phrase kullilanProgs = new Phrase("\n\nKullanılacak Programlar: ",altBaslik);
                                                    Phrase kullanilanProgsIcerik = new Phrase(frame1.getTextArea_kullanilacakProgramlar().getText(),normalWritingFont);

                                                    ct.setSimpleColumn(
                                                            firmaBaslik,
                                                            60,
                                                            750, /* width */
                                                            document.getPageSize()
                                                                    .getWidth() - 40,
                                                            30,
                                                            25,
                                                            Element.ALIGN_CENTER);
                                                    ct.go();

                                                    ct.setSimpleColumn(
                                                            pdfAltBaslik,
                                                            60,
                                                            650, /* width */
                                                            document.getPageSize()
                                                            .getWidth() - 40,
                                                            30,
                                                            25,
                                                            Element.ALIGN_CENTER);
                                                    ct.go();

                                                    ct.setSimpleColumn(
                                                            tarih,
                                                            60,
                                                            625, /* width */
                                                            document.getPageSize()
                                                            .getWidth() - 40,
                                                            30,
                                                            25,
                                                            Element.ALIGN_CENTER);
                                                    ct.go();

                                                    ct.setSimpleColumn(
                                                            alanAdlari ,
                                                            60,
                                                            550, /* width */
                                                            document.getPageSize()
                                                            .getWidth() - 40,
                                                            30,
                                                            25,
                                                            Element.ALIGN_LEFT);
                                                    ct.setSimpleColumn(
                                                            alanAdlarIcerik ,
                                                            60,
                                                            550, /* width */
                                                            document.getPageSize()
                                                            .getWidth() - 40,
                                                            30,
                                                            13,
                                                            Element.ALIGN_LEFT);

                                                    ct.setSimpleColumn(
                                                            webHosting ,
                                                            60,
                                                            525, /* width */
                                                            document.getPageSize()
                                                            .getWidth() - 40,
                                                            30,
                                                            25,
                                                            Element.ALIGN_LEFT);

                                                    ct.setSimpleColumn(
                                                            weHostingIcerik ,
                                                            60,
                                                            525, /* width */
                                                            document.getPageSize()
                                                            .getWidth() - 40,
                                                            30,
                                                            13,
                                                            Element.ALIGN_LEFT);

                                                    ct.setSimpleColumn(
                                                            siteDil ,
                                                            60,
                                                            525, /* width */
                                                            document.getPageSize()
                                                            .getWidth() - 40,
                                                            30,
                                                            13,
                                                            Element.ALIGN_LEFT);

                                                    ct.setSimpleColumn(
                                                            siteDilIcerik ,
                                                            60,
                                                            525, /* width */
                                                            document.getPageSize()
                                                            .getWidth() - 40,
                                                            30,
                                                            13,
                                                            Element.ALIGN_LEFT);

                                                    ct.setSimpleColumn(
                                                            amac ,
                                                            60,
                                                            525, /* width */
                                                            document.getPageSize()
                                                            .getWidth() - 40,
                                                            30,
                                                            13,
                                                            Element.ALIGN_LEFT);

                                                    ct.setSimpleColumn(
                                                            amacIcerik ,
                                                            60,
                                                            525, /* width */
                                                            document.getPageSize()
                                                            .getWidth() - 40,
                                                            30,
                                                            13,
                                                            Element.ALIGN_LEFT);

                                                    ct.setSimpleColumn(
                                                            kullilanProgs ,
                                                            60,
                                                            525, /* width */
                                                            document.getPageSize()
                                                            .getWidth() - 40,
                                                            30,
                                                            13,
                                                            Element.ALIGN_LEFT);

                                                    ct.setSimpleColumn(
                                                            kullanilanProgsIcerik ,
                                                            60,
                                                            525, /* width */
                                                            document.getPageSize()
                                                            .getWidth() - 40,
                                                            30,
                                                            13,
                                                            Element.ALIGN_LEFT);

                                                    ct.go();

                                                    PdfPTable table = new PdfPTable(
                                                            2)          ;                                           
                                                    table.setTotalWidth(document
                                                            .getPageSize()
                                                            .getWidth() - 5);
                                                    table.getDefaultCell()
                                                            .setPadding(2);
                                                    table.getDefaultCell()
                                                            .setBorderWidth(1);
                                                    table.getDefaultCell()
                                                            .setHorizontalAlignment(
                                                                    Element.ALIGN_CENTER);

                                                    float[] columnWidths = {
                                                            10f, 2f, };

                                                    try {
                                                        table.setWidths(columnWidths);
                                                    } catch (DocumentException e) {
                                                        // TODO Auto-generated
                                                        // catch block
                                                        e.printStackTrace();
                                                    }
                                                    // table.setSpacingBefore(5f);

                                                    // Code 2
                                                    table.getDefaultCell()
                                                            .setGrayFill(0.9f);

                                                    table.addCell("WEB TASARIM VE PROGRAMLAMA");

                                                    table.addCell("TUTAR");
                                                    table.getDefaultCell()
                                                            .setBackgroundColor(
                                                                    new BaseColor(
                                                                            255,
                                                                            255,
                                                                            255));

                                                    document.add(table);
                                                    document.newPage();
                                                    document.add(new Paragraph("Yeni Sayfa"));

                                                } catch (Exception e) {
                                                } finally {
                                                    document.close();

                                                }

                                            }
                                        });

                            }
                        });

            } catch (Exception e) {
                e.printStackTrace();
            }

        }
    });
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T17:33:23.503

这是一个不问的问题。当表格不适合当前页面时，iText 会自动打断表格，并将剩余部分转发到下一页。

您正在使用页面事件添加页眉和页脚，这没问题，但是：

1.  您应该定义 Document 对象的边距，以便它们考虑您作为页眉/页脚添加的图像的高度。
2.  您并没有真正在`table`对象中添加太多内容，但是我看到您使用`ColumnText`的绝对位置似乎没有考虑任何边距。

无论如何：您的代码写得不好。你应该把它清理干净。例如：您定义页面事件的方式是疯狂的。你应该使用`PdfPageEventHelper`. 我很确定没有其他人，但我会仔细查看您当前状态的代码。清理！

# php - Apache基准不一致

> ID：13566558
> 
> 赞同：1
> 
> 时间：2012-11-26T14:10:26.390
> 
> 标签：php, apache, benchmarking

我正在使用 apache 基准测试在本地服务器上测试我的网站主页，并且我预计会得到一些一致的结果，因为它是本地的，对网站没有永恒的影响。

但是，我得到了截然不同的结果，任何人都可以解释一下：

```
ab -n 10 -c 1 -g benchmark-data.txt http://dev.local/ 
```

-

```
starttime       seconds ctime   dtime   ttime   wait
Mon Nov 26 13:53:49 2012        1353938029      0       693     693     670
Mon Nov 26 13:53:52 2012        1353938032      0       891     891     865
Mon Nov 26 13:53:48 2012        1353938028      0       975     975     950
Mon Nov 26 13:53:51 2012        1353938031      0       1212    1212    1191
Mon Nov 26 13:53:53 2012        1353938033      0       1344    1344    1324
Mon Nov 26 13:53:45 2012        1353938025      0       1352    1353    1335
Mon Nov 26 13:53:54 2012        1353938034      0       1398    1398    1379
Mon Nov 26 13:53:49 2012        1353938029      0       1409    1409    1391
Mon Nov 26 13:53:55 2012        1353938035      0       1430    1430    1411
Mon Nov 26 13:53:46 2012        1353938026      0       1509    1509    1489

starttime       seconds ctime   dtime   ttime   wait
Mon Nov 26 14:01:51 2012        1353938511      0       515     515     497
Mon Nov 26 14:01:49 2012        1353938509      0       685     685     667
Mon Nov 26 14:01:49 2012        1353938509      0       752     752     731
Mon Nov 26 14:01:51 2012        1353938511      0       870     870     848
Mon Nov 26 14:01:50 2012        1353938510      0       872     872     855
Mon Nov 26 14:01:48 2012        1353938508      0       894     894     873
Mon Nov 26 14:01:47 2012        1353938507      0       902     902     883
Mon Nov 26 14:01:45 2012        1353938505      0       933     933     909
Mon Nov 26 14:01:46 2012        1353938506      0       1202    1202    1184
Mon Nov 26 14:01:42 2012        1353938502      0       3009    3009    2991

starttime       seconds ctime   dtime   ttime   wait
Mon Nov 26 14:02:45 2012        1353938565      0       916     917     892
Mon Nov 26 14:02:40 2012        1353938560      0       994     994     974
Mon Nov 26 14:02:44 2012        1353938564      0       1032    1032    1009
Mon Nov 26 14:02:39 2012        1353938559      0       1255    1255    1235
Mon Nov 26 14:02:37 2012        1353938557      0       1319    1319    1302
Mon Nov 26 14:02:36 2012        1353938556      0       1355    1355    1338
Mon Nov 26 14:02:41 2012        1353938561      0       1375    1376    1350
Mon Nov 26 14:02:48 2012        1353938568      0       1429    1429    1405
Mon Nov 26 14:02:46 2012        1353938566      0       1689    1689    1663
Mon Nov 26 14:02:42 2012        1353938562      0       1982    1982    1964 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:13:53.460

即使外部干扰的可能性很低，因为您在 localhost 中运行该站点，但由于其他因素（例如

*   您机器上的当前负载
*   其他应用程序的内存使用情况

等等

还尝试使用更高的`n`. 类似`-n100`或可能是什至`-n1000`

# timeout - 大约 1 分钟后跨域上传失败

> ID：13566560
> 
> 赞同：3
> 
> 时间：2012-11-26T14:10:28.843
> 
> 标签：timeout, xmlhttprequest, cross-domain, access-control

我们有一个使用 javascript 的 XMLHttpRequest 上传文件的跨域进程（它允许进度事件向用户显示进度条），在 web.config 中设置所需的配置后，此过程可以正常工作：

```
<httpProtocol allowKeepAlive="true">
  <customHeaders>
    <add name="Access-Control-Allow-Origin" value="*"/>
  </customHeaders>
</httpProtocol> 
```

问题是在尝试上传大文件（超过100 MB）时，请求需要很长时间（超过1分钟），XMLHttpRequest捕获失败事件，响应如下（如google chrome显示的那样）在控制台中）：

```
XMLHttpRequest cannot load http://oursite.net/Controller/UploadFile. Origin http://secondsite.net is not allowed by Access-Control-Allow-Origin. 
```

但是经过服务器端的测试，文件上传保存了，所以Action完全是在服务器上执行的！！

我们认为这个问题是由诸如超时之类的东西引起的（因为当请求没有经过 1 分钟时不会出现这个问题）。

注意：服务器端是一个 Asp.net MVC 项目。任何想法？

# r - 按组添加 ID 列

> ID：13566562
> 
> 赞同：22
> 
> 时间：2012-11-26T14:10:36.657
> 
> 标签：r, validation, unique

我想根据两列纬度和经度在 R 中创建一个唯一 ID，以便重复的位置具有相同的集群 ID。

例如：

```
LAT        LONG    Cluster_ID
13.5330 -15.4180   1
13.5330 -15.4180   1
13.5330 -15.4180   1
13.5330 -15.4180   1
13.5330 -15.4170   2
13.5330 -15.4170   2
13.5330 -15.4170   2
13.5340 -14.9350   3
13.5340 -14.9350   3
13.5340 -15.9170   4
13.3670 -14.6190   5 
```

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-11-26T14:22:11.653

这是使用`interaction`.

```
d <- read.table(text='LAT LONG
13.5330 -15.4180 
13.5330 -15.4180 
13.5330 -15.4180 
13.5330 -15.4180 
13.5330 -15.4170 
13.5330 -15.4170 
13.5330 -15.4170 
13.5340 -14.9350 
13.5340 -14.9350 
13.5340 -15.9170 
13.3670 -14.6190', header=TRUE)

d <- transform(d, Cluster_ID = as.numeric(interaction(LAT, LONG, drop=TRUE)))

#       LAT    LONG Cluster_ID
# 1  13.533 -15.418          2
# 2  13.533 -15.418          2
# 3  13.533 -15.418          2
# 4  13.533 -15.418          2
# 5  13.533 -15.417          3
# 6  13.533 -15.417          3
# 7  13.533 -15.417          3
# 8  13.534 -14.935          4
# 9  13.534 -14.935          4
# 10 13.534 -15.917          1
# 11 13.367 -14.619          5 
```

编辑：合并@Spacedman 的建议以提供`drop=TRUE`给`interaction`.

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-11-26T14:24:10.120

数据：

```
dat <- read.table(text="
LAT        LONG
13.5330 -15.4180
13.5330 -15.4180
13.5330 -15.4180
13.5330 -15.4180
13.5330 -15.4170
13.5330 -15.4170
13.5330 -15.4170
13.5340 -14.9350
13.5340 -14.9350
13.5340 -15.9170
13.3670 -14.6190", header = TRUE) 
```

这些命令创建一个以 id 开头的变量`1`：

```
comb <- with(dat, paste(LAT, LONG))
within(dat, Cluster_ID <- match(comb, unique(comb))) 
```

输出：

```
 LAT    LONG Cluster_ID
1  13.533 -15.418          1
2  13.533 -15.418          1
3  13.533 -15.418          1
4  13.533 -15.418          1
5  13.533 -15.417          2
6  13.533 -15.417          2
7  13.533 -15.417          2
8  13.534 -14.935          3
9  13.534 -14.935          3
10 13.534 -15.917          4
11 13.367 -14.619          5 
```

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2012-11-27T04:52:04.453

`.GRP`已添加到`data.table`1.8.3，允许您执行以下操作：

```
# Your data, as a data.frame
dat <- read.table(text='LAT LONG
13.5330 -15.4180 
13.5330 -15.4180 
13.5330 -15.4180 
13.5330 -15.4180 
13.5330 -15.4170 
13.5330 -15.4170 
13.5330 -15.4170 
13.5340 -14.9350 
13.5340 -14.9350 
13.5340 -15.9170 
13.3670 -14.6190', header=TRUE)

# Convert it to a data.table
# with keys as the combination of LAT and LONG
library(data.table)
DT <- data.table(dat, key="LAT,LONG")
DT[, Cluster_ID:=.GRP, by=key(DT)]
DT
#        LAT    LONG Cluster_ID
#  1: 13.367 -14.619          1
#  2: 13.533 -15.418          2
#  3: 13.533 -15.418          2
#  4: 13.533 -15.418          2
#  5: 13.533 -15.418          2
#  6: 13.533 -15.417          3
#  7: 13.533 -15.417          3
#  8: 13.533 -15.417          3
#  9: 13.534 -15.917          4
# 10: 13.534 -14.935          5
# 11: 13.534 -14.935          5 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-01-06T14:43:23.973

比较性能建议的解决方案：

```
df <- read.table(text='LAT LONG
13.5330 -15.4180 
13.5330 -15.4180 
13.5330 -15.4180 
13.5330 -15.4180 
13.5330 -15.4170 
13.5330 -15.4170 
13.5330 -15.4170 
13.5340 -14.9350 
13.5340 -14.9350 
13.5340 -15.9170 
13.3670 -14.6190', header=TRUE)
f1 <- function(df, cols) {
    df$id <- as.numeric(interaction(df[cols], drop = TRUE))
    df
}
f2 <- function(df, cols) {
    comb <- do.call(paste, c(as.list(df[cols]), sep = "."))
    df$id <- match(comb, unique(comb))
    df
}
f2(df, 1:2)
#>       LAT    LONG id
#> 1  13.533 -15.418  1
#> 2  13.533 -15.418  1
#> 3  13.533 -15.418  1
#> 4  13.533 -15.418  1
#> 5  13.533 -15.417  2
#> 6  13.533 -15.417  2
#> 7  13.533 -15.417  2
#> 8  13.534 -14.935  3
#> 9  13.534 -14.935  3
#> 10 13.534 -15.917  4
#> 11 13.367 -14.619  5
microbenchmark::microbenchmark(f1(df, 1:2), f2(df, 1:2))
#> Unit: microseconds
#>         expr     min      lq      mean   median       uq      max neval cld
#>  f1(df, 1:2) 486.400 510.422 575.26659 573.3945 594.1165 1622.243   100   b
#>  f2(df, 1:2)  72.952  79.208  86.09265  83.5275  89.7195  159.740   100  a 
```

# ios - 缩进表格视图内容

> ID：13566563
> 
> 赞同：0
> 
> 时间：2012-11-26T14:10:43.193
> 
> 标签：ios, uitableview

我对iOS中的TableView有一个相当简单的问题，有没有办法缩进tableview中单元格的内容，例如我有一个字符串数组，我想让它们在ui上显示为交替系列文本，它看起来像一个对话日志。例如。

```
I am Hercules
                     I am Delilah
If you are Delilah
             Then I am your lover 
```

这没有求助于自定义单元格，但是，如果自定义单元格是唯一的，你能告诉我如何/从哪里开始吗？

TIA

海市蜃楼

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:15:41.157

在您的 `cellForRowAtIndexPath`方法中，执行以下操作：

```
if (indexPath.row % 2 == 0) {
  [cell.textLabel setTextAlignment:UITextAlignmentLeft];
} else {
  [cell.textLabel setTextAlignment:UITextAlignmentRight];
} 
```

更新了正确的对齐方式，感谢 paul polo

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:15:32.453

您可以在方法中创建单元格时进行连接`tableView : (UITableView *)tableView cellForRowAtIndexPath`：

1.  根据`indexPath`您是创建奇数还是偶数单元格进行检查。
2.  为单元格内的标签设置文本alingment。（你也可以改变它的原点）

你完成了！

# java - 将功能委托给 Java 中的子类

> ID：13566570
> 
> 赞同：1
> 
> 时间：2012-11-26T14:11:08.687
> 
> 标签：java, oop, inheritance, interface

我有一些可以编组为一些文本表示的对象模型（例如命令）。我有两个选择：

1.  假设 Command 的每个子类都会正确地覆盖“toString”
2.  使用每个孩子都应该实现的“marshal”和“unmarshal”方法创建接口。

对于这样的委派，哪种选择更好？我的意思是，toString 的含义非常接近，但它并不能保证子类不使用 toString 的标准实现。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:11:58.437

**我认为使用显式方法的方法要优越得多。**您已经大致确定了原因：

> 假设 Command 的每个子类都会正确地覆盖“toString”

每个接触代码的维护程序员都需要意识到这个假设。如果他们突然决定某个类`toString()`包含一条额外的信息（比如调试）会很好，那么代码将意外中断。

> 使用每个孩子都应该实现的“marshal”和“unmarshal”方法创建接口。

这使得 API 明确，难以实现，并且更难意外破坏或误用。

这也意味着可以在编译时捕获某些错误。你可以有一个方法，`IMarshallable`编译器不会让你传递任何不实现接口的东西。对于第一种方法，每个对象都有一个`toString()`方法，编译器无法知道特定对象是否`toString()`实现了您的编组协议。这意味着它无法在编译时诊断出这种类型的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:13:58.817

您绝对应该使用接口和/或抽象类（方法）。依赖*toString*是个坏主意。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:16:48.083

我通常不会期望`toString()`实现除诊断或类似功能之外的任何功能。

我宁愿实现一个编组/解组机制。请注意，这可能非常强大。例如，您将源/目的地作为参数提供给`marshall()`/`unmarshall()`机制，并且对象可以与源/目的地进行调解，以一种或多种模式（本质上是*访问者*模式）编组自己

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-26T14:18:24.143

> 我的意思是， toString 的含义非常接近

的目的`toString`是为一个对象提供一个文本表示，它是供人们阅读的，主要用于调试。这就是 API 文档`java.lang.Object.toString()`所说的：

> 返回对象的字符串表示形式。通常，toString 方法返回一个“以文本方式表示”该对象的字符串。结果应该是一个简洁但信息丰富的表示，易于人们阅读。

这并不意味着以某种机器可读的格式返回字符串，并且您可以再次将其转换回（解组）为对象。

因此，`toString()`这并不意味着您似乎想要将它用于：将对象转换为字符串（编组），然后可以将其转换回对象（解组）。

最好创建一个声明`marshal`和`unmarshal`方法的接口，并使需要此功能的类实现此接口。通过使类实现接口，也可以立即清楚该类支持此功能。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-12-09T12:14:08.767

你可以使用库类`org.apache.commons.lang3.builder.ToStringBuilder`。`toString`它提供了所有属性值的深度。有几个设置。

# cordova - 通过 cmd 创建新的 Cordova2.2/android/phonegap 项目时出错

> ID：13566571
> 
> 赞同：2
> 
> 时间：2012-11-26T14:11:17.460
> 
> 标签：cordova

嗨，我正在尽力设置 phonegap/cordova 2.2 并在运行“create”时收到以下错误

```
C:\cordova-2.2.0\incubator-cordova-android\bin>create
Missing one of the following:
JDK: http://java.oracle.com
Android SDK: http://developer.android.com
Apache ant: http://ant.apache.org 
```

（我知道没有添加任何参数，但无论如何它都是相同的味精）

我将环境变量设置为：

**ANDROID_HOME** C:\Program Files (x86)\Android\android-sdk

**ANT_HOME** C:\Program Files\ANT\apache-ant-1.8.4

**JAVA_HOME** C:\Program Files\Java\jdk1.7.0_09

但我似乎无法让它做任何事情！

任何帮助深表感谢。

问候

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-30T17:58:50.410

[我之前在另一个线程中回答了这个问题](https://stackoverflow.com/a/13650568/535467)，但请务必检查诸如正确设置 PATH 变量、使用新`.bash_profile`文件更新终端以及拥有最新版本的 ANT 等内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-27T21:56:32.803

您是否正确设置了路径？

我必须确保来自 Android 的*平台工具*和*工具*在路径中，以及来自 Ant 和 Java 主文件夹的*bin*文件夹中。

此外，如果您在此处遵循当前版本的 Android 入门指南：http: [//docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android](http://docs.phonegap.com/en/2.2.0/guide_getting-started_android_index.md.html#Getting%20Started%20with%20Android)

我不得不使用实际的“PhoneGap”包（这个： http: [//phonegap.com/download#](http://phonegap.com/download#)）与指南链接到的“Cordova”包。

# javascript - 我可以显示/隐藏 div 的一部分吗？

> ID：13566573
> 
> 赞同：0
> 
> 时间：2012-11-26T14:11:25.230
> 
> 标签：javascript, jquery, html, css

我正在为网站创建包括表格的侧边栏。

我想：

*   一开始只显示五行
*   通过单击侧边栏底部的链接，将显示 15 行，并且链接文本将更改。
*   通过在 div 完全打开时再次单击链接，侧边栏仅再次显示前五个，并且链接文本再次变回第一个。

所以我正在寻找某种切换 div 功能来为我执行此操作，但我希望 div 的一部分始终可见。

这是我的侧边栏截图：[http://cl.ly/image/390J2u2z1W1Z](http://cl.ly/image/390J2u2z1W1Z)

有没有人可以很好地解决我的问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T14:13:15.247

这完全取决于您的内容到底是什么，但最简单的方法是改变`div`高度以符合您的要求或使用两个`div`s（一个用于“缩短”版本，另一个用于“完整”并相应地显示/隐藏它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:26:03.240

**只需查看此[*演示*](http://jsfiddle.net/matmuchrapna/ZAtX8/5/)**

**JS：**

```
$('.js_toggle').on('click', function(event) {
    $('table').toggleClass('full-table');

    event.preventDefault();
});​ 
```

**HTML：**

```
<table>
    <tr>
        <td>tr01</td>
        <td>tr02</td>
    </tr>
    …
    <tr>
        <td>tr01</td>
        <td>tr02</td>
    </tr>
</table>

<a href="#" class="js_toggle">toggle_table</a> 
```

**CSS：**

```
table tr:nth-child(n+6) {
    display: none;
}

table.full-table tr {
    display: block;
}
​ 
```

​</p>

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T14:15:02.010

向您不想首先显示的行添加一个类

```
<tr class="toggle"> ..... </tr> 
```

CSS：

```
tr.toggle { display: none; } 
```

侧边栏链接：

```
<a href="#" id="toggle">Toggle</a> 
```

然后使用 jQuery toggle() 打开和关闭

```
<script>
  $(function(){
     $('a#toggle').click(function(e)
     {
         e.preventDefault();
         $('tr.toggle').toggle();
     });

  });
 </script> 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-11-26T14:13:04.950

将您的 main`<div>`分成多个较小`<div>`的 s ......然后隐藏整个 internal `<div>`s。使用 jQuery`.toggle`或`.hide`/`.show`函数。

# regex - 如何使用 grep 将 HTML 特定标签之间的内容与属性匹配？

> ID：13566574
> 
> 赞同：16
> 
> 时间：2012-11-26T14:11:32.103
> 
> 标签：regex, grep, html-parsing

如果我想匹配标签中包含的文本及其在 HTML 文件中的结束标签，我应该在命令*grep*中使用哪个正则表达式？`<div class="Message">``</div>`

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-26T14:32:11.477

这是一种使用方法`GNU grep`：

```
grep -oP '(?<=<div class="Message"> ).*?(?= </div>)' file 
```

如果您的标签跨越多行，请尝试：

```
< file tr -d '\n' | grep -oP '(?<=<div class="Message"> ).*?(?= </div>)' 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T14:15:56.497

您可以通过指定正则表达式来做到这一点：

```
grep -E "^<div class=\"Message\">.*</div>$" input_files 
```

并不是说这只会打印在同一行上找到的附件。如果您的标签跨越多行，您可以尝试：

```
tr '\n' ' ' < input_file | grep -E "^<div class=\"Message\">.*</div>$" 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T15:55:24.657

你不能只用 grep 可靠地做到这一点。您需要使用 HTML 解析器解析 HTML。

如果 HTML 代码有如下内容怎么办：

```
<!--
<div class="Message">blah blah</div>
--> 
```

你会在那个被注释掉的代码上得到一个错误的命中。以下是一些[其他示例](http://htmlparsing.com/regexes.html)，其中仅正则表达式选项会使您失败。

考虑使用`XML::Grep`Perl 模块中的 xmlgrep，如下所述：[使用 grep 提取 html 文件的标题](https://stackoverflow.com/questions/3833088/extract-title-of-a-html-file-using-grep)

# .net - PropertyDescriptor 有什么区别。属性类型和组件类型？

> ID：13566578
> 
> 赞同：3
> 
> 时间：2012-11-26T14:11:40.880
> 
> 标签：.net

[.NET PropertyDescriptor](http://msdn.microsoft.com/en-us/library/vstudio/system.componentmodel.propertydescriptor%28v=vs.100%29.aspx)上的 PropertyType 和 ComponentType 有什么区别？

文档并没有真正解释

> PropertyType 在派生类中重写时，获取属性的类型。
> 
> ComponentType 在派生类中重写时，获取此属性绑定到的组件的类型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-11-26T14:17:13.013

就普通财产而言：

```
class Foo
{
    public int Bar { get; set; }
} 
```

如果我们现在看`Foo.Bar`via `TypeDescriptor`，组件类型是`Foo`; 属性类型是`Int32`。基本上，`ComponentType`是`DeclaringType`属性的（在反射方面）。因此，如果您正在编写自定义`PropertyDescriptor`实现，则`PropertyType`是*data*的类型，并且`ComponentType`是*目标实例*的预期类型。

# javascript - 从 javascript 访问 Microsoft Excel RTD 服务器？

> ID：13566581
> 
> 赞同：2
> 
> 时间：2012-11-26T14:11:55.763
> 
> 标签：javascript, excel, rtd, real-time-data

是否有任何用于访问 MS Excel RTD 服务器的 javascript 库？我想从 javascript 从 RTD 服务器检索实时数据并将其显示在浏览器中。我不想在服务器端这样做，因为它可能成为我的 Web 服务器的可扩展性问题。（我不想使用任何 activeX 控件，因为我想让它可用于 IE、Chrome 和 FireFox。）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T00:08:04.957

没有我知道的。但是，您可以使用 django（或 flask 等）和一个简单的 python [RTD 客户端](https://code.google.com/p/pyrtd/)从您的 RTD 服务器收集信息。然后，您可以让基于浏览器的客户端向该（本地）Web 服务器询问相同的信息。

# c# - Windows 窗体返回空白

> ID：13566584
> 
> 赞同：0
> 
> 时间：2012-11-26T14:12:02.183
> 
> 标签：c#, winforms

谁能明白为什么我的纬度经度和海拔高度的表格框变回空白？我一直在寻找几个小时，不明白为什么！

```
namespace DistanceEstimatorFinal
{
    public partial class Form1 : Form
    {
        public Form1()
        {
            InitializeComponent();
        }

        private void textBox1_TextChanged(object sender, EventArgs e)
        {
            dataPoints mydataPoints = new dataPoints();
            dataPoint a = mydataPoints.getItem(0);
            latTextBox.Text = a.CurLatitude;
            longTextbox.Text = a.CurLongtitude;
            eleTextBox.Text = a.CurElevation;

        }
    }
} 
```

以上是我的表格

```
namespace DistanceEstimatorFinal
{
    public class dataPoints
    {
        List<dataPoint> Points;
        public void DataPoints()
        {
            Points = new List<dataPoint>();
            TextReader tr = new StreamReader("c:/users/tom/documents/visual studio 2010/Projects/DistanceCalculator3/DistanceCalculator3/TextFile1.txt");
            string input;
            while ((input = tr.ReadLine()) != null)
            {
                string[] bits = input.Split(',');
                dataPoint a = new dataPoint(bits[0],bits[1],bits[2]);              
                Points.Add(a);  

            }

            tr.Close();
        }

        internal dataPoint getItem(int p)
        {
            if (p < Points.Count)
            {
                return Points[p];
            }
            else
                return null;
        }
    }
} 
```

这是我的点类，它从用逗号分隔的文本文件中绘制点

```
namespace DistanceEstimatorFinal
{
    class dataPoint
    {
        private string latitude;
        private string longtitude;
        private string elevation;

        public dataPoint(string Latitude, string Longtitude, string Elevation)
        {

            // TODO: Complete member initialization
            this.latitude = Latitude;
            this.longtitude = Longtitude;
            this.elevation = Elevation;

        }

        public string CurLongtitude { get { return this.longtitude; } }
        public string CurLatitude { get { return this.latitude; } }
        public string CurElevation { get { return this.elevation; } }

    }
} 
```

上面是保存单个点并将它们发回的类

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:16:47.710

至少您的问题之一是：

```
namespace DistanceEstimatorFinal
{
    public class dataPoints
    {
        List<dataPoint> Points;
        public void DataPoints()
        {
        ... 
```

您的类被调用`dataPoints`，但您试图创建一个构造函数但调用了它`DataPoints`（注意这种情况）。`dataPoints`创建对象时，此代码不会运行。

正如影子向导向导指出的那样，您的构造函数不能有返回类型。如果您匹配大小写，您的编译器会告诉您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-26T14:16:48.787

C# 区分大小写，并且具有构造函数的特殊语法。就目前而言，您作为“构造函数”的方法将永远不会运行。

正确的代码是：

```
public class dataPoints
{
    List<dataPoint> Points;
    public dataPoints()
    {
        //constructor code here...
    }
} 
```

如您所见，构造函数也不能有返回类型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-11-26T14:18:31.773

`textBox1_TextChanged`仅在最终用户更改文本框时调用。您的代码似乎表明您要初始化文本框。

我建议重写 OnLoad 方法，然后设置文本框。就像是：

```
protected override OnLoad()
{
        dataPoints mydataPoints = new dataPoints();
        dataPoint a = mydataPoints.getItem(0);
        latTextBox.Text = a.CurLatitude;
        longTextbox.Text = a.CurLongtitude;
        eleTextBox.Text = a.CurElevation;
} 
```

我还没有检查其余的代码。但这是首先要解决的问题。

我假设 new dataPoints() 将读取您感兴趣的任何数据。让构造函数加载数据**不是标准做法。**但是，您的代码暗示了意图。

# php - PHP + MySQL：从其他表中选择相关记录并链接到不同的 php 页面

> ID：13566588
> 
> 赞同：0
> 
> 时间：2012-11-26T14:12:26.680
> 
> 标签：php, mysql

我有一个学校 php 列表页面。该页面将显示来自 MySQL 主表(schools)(pk) 的学校列表。我想在链接到其他 php 页面的列表中添加一个按钮。另一个php页面将显示来自其他相关表（add_info）（fk）的数据。

现在，我将这些代码用于我的 index.php 页面：

```
 $sql = "SELECT school.sid AS ID, school.name AS name GROUP BY school.sid desc LIMIT $offset, $rowsperpage";
}

$result = mysql_query($sql, $conn) or trigger_error("SQL", E_USER_ERROR); 
```

这是我新添加的按钮，但我无法让它工作，因为它来自另一个表：

```
<?php
        if($f["schoolstaff"]=="")
        {
        ?>
        <img src="images/nostaff.png"  />
        <?php
        }
        else
        {
        ?>  
        <a href= "<?php echo $f["schoolstaff"];?>" target="_blank" </a><img src="images/staff.png" width="77" height="26" />
            <?php
        }
        ?>

       <?php
       if($cek=="no")
       {
       ?>
       <table width="700" border="0" cellspacing="0" cellpadding="0">
         <tr>
           <td>SORRY, NO RESULTS FOUND.</td>
         </tr>
       </table>
       <?php
       }
    //} 
```

我仍然是 php 的初学者，我找不到从其他相关表中检查数据是否为空的方法。我怎么能这样做并将其链接到具有相同 schoolid 的 addinfo_school.php ？非常感谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:59:24.270

你几乎拥有它。

解决方案取决于传递`schoolid`to的方法`addinfo_school.php`：

方法一`GET`：

为此，您应该使用`a`与此类似的标签：

```
<a href="addinfo_school.php?schoolid=<?php echo $schoolid?>" target="_blank"><img src="images/staff.png" width="77" height="26" /></a> // $schoolid is a php variable where you have the id you want to pass. Also notice the `img` tag is inside the `a` tag. 
```

在`addinfo_school.php`你会收到这样的变量：

```
$schoolid=$_GET['schoolid']; 
```

方法二`POST`：

为此，您应该使用 javascript/jquery 通过 POST 发送变量，或使用 FORM。如果您需要有关此的更多信息，请询问我，但它会更长一些。

接收变量`addinfo_school.php`：

```
$schoolid=$_POST['schoolid']; 
```

# c++ - 从不同基类的基指针转换为基类（最好没有dynamic_cast）

> ID：13566593
> 
> 赞同：0
> 
> 时间：2012-11-26T14:12:34.530
> 
> 标签：c++, inheritance, casting, multiple-inheritance

```
class Model {};

class AbstractModel {};
class TableModel : public AbstractModel {};

class CustomerModel : public TableModel, public Model {};
class ItemModel : public TableModel, public Model {};
... 
```

要求是每个 TableModel 子类必须提供一组在所有子类（CustomerModel、ItemModel、...）之间共享的特性。由于 TableModel 和 AbstractModel 是不可变的，因此一组特性在 Model 类中定义并在每个子类（CustomerModel、ItemModel...）中实现。

现在的问题是应用程序的其他部分只能访问 AbstractModel 指针，并且为了访问 Model 中定义的一组特性，这个指针必须从 AbstractModel 转换为 Model（我们假设每个 TableModel 子类也实现 Model ）。

有没有可能在不使用 dynamic_cast 的情况下这样做？对提供相同功能的不同设计有何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:31:05.907

首先，没有`dynamic_cast`. 但是，您的要求对我来说听起来有点奇怪。“每个 TableModel 子类都必须提供一组特性”听起来很像 TableModel 应该使用纯虚函数定义该集合。你说 TableModel 是不可变的，所以我猜你是从某种库/框架中得到它，并且正在实现你自己的一组子类，我们正在谈论的是*你的一组需求。*在这种情况下，我建议您派生一个 TableModel 抽象类，将您的需求定义为纯虚函数，并从该抽象类派生实际实现：

```
//immutable/library
class AbstractModel {};
class TableModel : public AbstractModel {};

//your code:
class MyOwnTableModel : public TableModel
{
public: 
  void implementThisRequrement() = 0;
};

class CustomerModel : public MyOwnTableModel { /*...*/ };
class ItemModel : public MyOwnTableModel { /*...*/ }; 
```

之后，您需要做的只是`dynamic_cast`从 AbstractModel 到 MyOwnTableModel 的简单向下转换（），无需交叉转换。然而，如果你能告诉我们更多关于你所拥有的设计的信息，也许有一个更简单、更好的解决方案——`dynamic_cast`几乎永远都是一些设计缺陷的证据。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:19:20.133

首先，为什么不使用dynamic_cast？

二、为什么不让TableModel继承Model呢？（毕竟，“表模型”听起来像是“模型”的特殊版本）

“不可变”是指在 Java/.NET 意义上，对象一旦创建就不能更改其状态？或者您的意思是您不能更改这些类，因为它们是某个库的一部分？我的第一个猜测是第一个。

如果您不想使用 dynamic_cast（这是 C++ 的 RTTI 功能的一部分），则必须实现自己的 RTTI 形式。例如，Microsoft 的 MFC 通过从包含运行时类型信息的 CObject 超类派生所有类来做到这一点。Microsoft COM 还通过要求所有接口从 IUnknown 接口派生来做到这一点，该接口包含一个基本上等同于 dynamic_cast 的 QueryInterface 方法。

# jquery - 如何取消单个文件的上传，使用 Blueimp jQuery File Upload

> ID：13566594
> 
> 赞同：1
> 
> 时间：2012-11-26T14:12:39.253
> 
> 标签：jquery, file-upload, blueimp

我正在使用[Blueimp jQuery File Upload](http://blueimp.github.com/jQuery-File-Upload/)，它工作正常，但我在取消其中一个文件的上传时遇到了问题。

当我添加一个文件时，我将一个带有一些额外输入和一个按钮的字段集附加到 html 中 - “取消”。我需要的是这样的：

```
$(".cancelUpload").on("click", function(){
      //remove this file from the queue, The data and the file will not be uploaded
}) 
```

这是我的代码的一部分

```
$('#MappeFile').fileupload({
        dataType : 'json',
        autoUpload : false,
        maxNumberOfFiles : undefined,
        maxFileSize : 2000,
        minFileSize : undefined,
        acceptFileTypes : /.+$/i,
        url : "/ajax/UploadFile.php",
        add : function(e, data) {
            $("#fileUploadButton").removeClass("toHide").on("click", function() {
                $('#progress .bar').show();
                if ($.browser.msie && parseInt($.browser.version, 10) < 10) {
                    $('#progress .bar').css({
                        "background" : "url(images/progressbar.gif) no-repeat",
                        "width" : "100%"
                    })
                } else {
                    $('#progress .bar').css({
                        'background-color' : "#2694E8",
                        'width' : '0%'
                    });
                }
                data.formData=$("form").serializeArray();
                data.submit();
                $("#fileUploadButton").off("click").addClass("toHide")

            })
        },
        change : function(e, data) {
            $.each(data.files, function(index, file) {

                filesCount++;
                vOutput = "<fieldset class='FileUploadFieldset'>"
                vOutput += "<legend>" + file.name + "</legend>"
                vOutput += "<label>Dateiname:</label><input type='text' value='"+file.name+"' name='Dateiname"+filesCount+"' size='50' class='UploadDateiName inputMaske'/><input type='text' class='toHide originName' name='originName"+filesCount+"' value='"+file.name+"'/>"
                vOutput += "<label>Dokumentdatum</label><input type='text' name='Datum"+filesCount+"' class='UploadDatum inputMaske'>"
                vOutput += "<label>Berater:</label><select name='Berater"+filesCount+"' class='UploadBeraterSelect inputMaske'></select>"
                vOutput += "<fieldset><legend>Kategorie:</legend><div class='UploadKategorie'></div></fieldset>"
                vOutput += "<fieldset><legend>Bemerkung:</legend><textarea name='Bemerkung"+filesCount+"' class='UploadBemerkung inputMaske'></textarea></fieldset>"
                vOutput += "<input type='button' class='cancelUpload neuButton' value='cancel'/>"
                vOutput += "</fieldset>"
                $("#MappeFilesToUpload").append(vOutput);   
            });
        }
    }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T14:35:35.730

如果您使用的是[fileupload-ui.js](http://blueimp.github.com/jQuery-File-Upload/js/jquery.fileupload-ui.js)，您只需要添加一个类“cancel”，它将自动绑定到 cancelHandler。

尝试更新这一行：

```
 vOutput += "<input type='button' class='cancelUpload neuButton' value='cancel'/>" 
```

至：

```
 vOutput += '<div class="cancel"> <button> cancel </button> </div>' 
```

如果您只使用核心插件，请查看此行以了解您需要做什么。

从[fileupload-ui.js](http://blueimp.github.com/jQuery-File-Upload/js/jquery.fileupload-ui.js)：

```
 _initEventHandlers: function () {
        this._super();
        this._on(this.options.filesContainer, {
            'click .start button': this._startHandler,
            'click .cancel button': this._cancelHandler,
            'click .delete button': this._deleteHandler
        });
        this._initButtonBarEventHandlers();
    },

    .
    .
    .

    _cancelHandler: function (e) {
        e.preventDefault();
        var template = $(e.currentTarget).closest('.template-upload'),
            data = template.data('data') || {};
        if (!data.jqXHR) {
            data.errorThrown = 'abort';
            this._trigger('fail', e, data);
        } else {
            data.jqXHR.abort();
        }
    }, 
```

# c# - SqlCommand 和 ExecuteReader 返回非公共成员

> ID：13566595
> 
> 赞同：-1
> 
> 时间：2012-11-26T14:12:46.463
> 
> 标签：c#, sql, sql-server

我使用 SqlCommand 从 .sql 文件执行脚本查询。

我用 ExecuteReader 得到结果。

但是值是非公共成员，我无法访问它。

知道为什么以及如何解决这个问题吗？

# 代码

```
string root = AppDomain.CurrentDomain.BaseDirectory;
string script = File.ReadAllText(root + @"..\SGBD\select_user_from_all_bases.sql");
string connectionString = @"Data Source=(local);Integrated Security=SSPI";
var conn = new SqlConnection(connectionString);

conn.Open();

var users = new SqlCommand(script, conn).ExecuteReader();

foreach (var user in users)
{

}

conn.Close(); 
```

![在此处输入图像描述](../Images/f277320b68c47adf8106fec16c49188c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:17:19.160

这是因为 ExecuteReader() 返回的是 SqlDataReader，而不是条目。

[查看 SqlDataReader 的文档以了解您应该如何做](http://msdn.microsoft.com/en-ie/library/system.data.sqlclient.sqldatareader%28v=vs.80%29.aspx)：

```
private static void ReadOrderData(string connectionString)
{
    string queryString =
        "SELECT OrderID, CustomerID FROM dbo.Orders;";

    using (SqlConnection connection =
               new SqlConnection(connectionString))
    {
        SqlCommand command =
            new SqlCommand(queryString, connection);
        connection.Open();

        SqlDataReader reader = command.ExecuteReader();

        // Call Read before accessing data.
        while (reader.Read())
        {
            Console.WriteLine(String.Format("{0}, {1}", reader[0], reader[1]));
        }

        // Call Close when done reading.
        reader.Close();
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:21:42.777

如前所述，您可能不应该使用`foreach`. 出于兼容性原因，需要实现它，但`while (reader.Read())`这里的循环更简单。也就是说，您可以根据`foreach`需要使用任何方式。这些`user`值实现`IDataRecord`了，您可以使用该接口来访问这些值。

```
foreach (IDataRecord user in reader)
{
    // access user[0], user["field"], etc. here
} 
```

# phpmyadmin - phpmyadmin 中的“结构”选项卡下未显示列

> ID：13566605
> 
> 赞同：6
> 
> 时间：2012-11-26T14:13:13.267
> 
> 标签：phpmyadmin, structure

我第一次设置了 phpmyadmin，一切似乎都运行良好，除了在“结构”选项卡下没有显示任何列。这被证明是有问题的，因为我希望删除/更改我的一些列。我无法找到任何关于为什么会发生这种情况的信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-15T14:44:19.493

我遇到过同样的问题。原因是更改了`/tmp`目录的写权限。

**我在phpmyadmin** SQL 选项卡中运行`Describe TABLENAME;`命令时失败，并显示无法写入目录的错误消息。**`/tmp`**

 **所以我已经更改了权限，问题就`/tmp`消失`chmod`了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-02T03:44:22.120

我遇到了这个问题，重新启动 Mysql Server 有帮助。

我不知道实际的问题是什么......

-FT

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-17T11:02:37.577

当类型列包含 ű 或 ő 字符时，我遇到了同样的问题。例如 enum('műszaki','stb')。áíóé 等其他字符不会出现此错误。正如我所见，一切都设置为 UTF-8。所以对我来说解决方案是：

在 phpMyAdmin 版本 4.0.4 中，我在第 3018 行更改了 Util.class.php。

```
//$displayed_type .= substr($printtype, 0, $GLOBALS['cfg']['LimitChars']);
$displayed_type .= mb_substr($printtype, 0, $GLOBALS['cfg']['LimitChars']); 
```

在旧版本的 phpMyAdmin 中，我更改了 tbl_structure.php 第 276 行。

```
//$type = '<abbr title="' . $type . '">' . substr($type, 0, $GLOBALS['cfg']['LimitChars']) . '</abbr>';
$type = '<abbr title="' . $type . '">' . mb_substr($type, 0, $GLOBALS['cfg']['LimitChars']) . '</abbr>'; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-12-17T07:58:00.090

/tmp 文件夹的正确权限：

```
chmod 1777 /tmp 
```**

# encoding - Windows 商店应用程序中的 GET/POST 请求参数编码问题

> ID：13566607
> 
> 赞同：0
> 
> 时间：2012-11-26T14:13:16.337
> 
> 标签：encoding, windows-runtime, http-get, url-encoding

我正在编写一个 Windows 商店应用程序，并在我的 DAL 中从 Web 服务获取 XML 数据。我正在使用站点 API 公开的 HTTP GET 请求和响应。

我能够从不需要参数的各种方法中成功获取数据，或者获取整数参数..

当我不得不使用字符串参数时，问题开始了，英文字符串成功传递，但希伯来语字符串没有。

当我使用网站 API 开发的测试表单时，在 textBox 中输入“נאפיס”，它返回一个 XML 罚款，并且通过嗅探器，我看到字符串被编码为 %E3%E9%F7%F1%E9

当我自己从同名代码构建 URI 时，我只得到 XML 的模式，我看到字符串被编码为 %D7%93%D7%99%D7%A7%D7%A1%D7%99 - 意思使用 UTF-8 编码的 URL..

我尝试将其编码为希伯来语并解码回 utf-8，并得到了这个字符串：ðàôéñ 当我把它放在这样的工具中时： [http](http://coderstoolbox.net/string/) ://coderstoolbox.net/string/ 我看到如果我对那个字符串进行 URL 编码（ ðàôéñ) 我将得到所需的 %F0%E0%F4%E9%F1。

所以我将该字符串发送到 api，但它再次显示为 %C3%B0%C3%A0%C3%B4%C3%A9%C3%B1 ang 只返回没有实际数据的 XML 架构。

我尝试的另一种方法是对希伯来语单词进行不同的编码。由于 WinRT 不支持“httputility”，我不得不用反射器将它导入回来.. 必须告诉你，这不好玩..

我最终得到了带有 %u05e0%u05d0%u05e4%u05d9%u05e1 的编码“נאפיס”当我从浏览器中使用它时：

[http://new.rest.co.il/WebService/RestWS.asmx/SearchRestsByName?Keyword=%u05e0%u05d0%u05e4%u05d9%u05e1](http://new.rest.co.il/WebService/RestWS.asmx/SearchRestsByName?Keyword=%u05e0%u05d0%u05e4%u05d9%u05e1)

它工作得很好，获取实际的 XML 数据，并且在嗅探器中，参数保持不变（%u05e0%u05d0%u05e4%u05d9%u05e1）。

但是当我从我的代码中使用它时，我再次只得到架构，并且在嗅探器中，我看到字符串被编码为：%25u05e0%25u05d0%25u05e4%25u05d9%25u05e1 意味着它再次被 URL 编码！

我对此感到非常绝望..我尝试了所有组合..

有人对此有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-01T12:36:31.140

在发送到 fb 之前，您应该先 json_encode 然后 json_decode，这样就可以了。这是一个 PHP 示例：

```
$album_details = array(
  'message'=> 'Live photos from our app',                      
  'name'=> $title, // This can be any non-english characters that can be in unicode
  'access_token'=>$pageAccessToken
);

$jsonStr = json_encode($album_details); // THIS IS KEY IN WHATEVER PLATFORM
$decoded_album_settings = json_decode($jsonStr, true); // THIS IS KEY IN WHATEVER PLATFORM

$create_album = $this->facebook->api('/'.$this->facebookPageId.'/albums', 'post', $decoded_album_settings); 
```

这个想法来自这里：[https ://stackoverflow.com/a/3806967/1200166](https://stackoverflow.com/a/3806967/1200166)

# animation - 从 FBX 加载蒙皮信息

> ID：13566608
> 
> 赞同：11
> 
> 时间：2012-11-26T14:13:16.913
> 
> 标签：animation, 3d, skinning, fbx

我正在尝试将 FBX 文件的解析器编写为可在我的游戏引擎中使用的自定义模型格式，但我目前仍在提取每个骨骼所需的矩阵。我想我也可能迷失在剥皮理论中......

我设法提取了网格的骨骼层次结构，并将变形簇的权重和索引附加到我的顶点。现在我需要提取（两个？）我需要在我的引擎中进行蒙皮的矩阵。

基本上，在我的格式中，我也希望它看起来像这样：

//骨骼ID

//父骨骼ID

//矩阵1

//矩阵2

现在，对于矩阵......我是否正确假设其中至少一个应该是“绑定姿势矩阵”，即我的骨架的默认位置？如何从 FBX 中提取它？这个矩阵对于整个网格是均匀的吗？

至于第二个，我真的不知道，我试过查看 ViewScene 和 ImportScene 示例，但我不明白。我读了一些关于“局部空间矩阵”的东西，我猜这是每个骨骼的单独位置、旋转和比例？

感谢您提供任何帮助或建议，我现在不知所措，可能是因为我对此视而不见。几乎到了放弃 FBX 转而支持 COLLADA 的地步。

Edit1：引擎还没有绘图功能，因为我想在继续之前完成这项工作。我找到了一个我认为我理解的例子，也许这里有人可以确认它是否正确。

```
//TEST CODE
        //This lFbxLinkMatrix is the skeleton's transform when the binding happened. 
        //It is the same as the matrix in bindpose if the bindpose is complete.
        // Multiply lClusterGlobalInitPosition by Geometric Transformation
        FbxAMatrix clusterGlobalInitPosition;
        cluster->GetTransformLinkMatrix(clusterGlobalInitPosition);

        FbxAMatrix clusterGeometry = GetGeometry(cluster->GetLink());
        clusterGlobalInitPosition *= clusterGeometry;

        skeleton->at(boneListPosition).bindMatrix = clusterGlobalInitPosition;

        // Compute the shift of the link relative to the reference.
        //lVertexTransformMatrix = RGCP.Inverse() * CGCP * CGIP.Inverse() * RGIP * RG;
        // CGCP = position of bone
        // RGCP = mesh position
        FbxAMatrix offsetMatrix;
        FbxNode* boneNode = cluster->GetLink();

        FbxAMatrix CGIP, RGIP, vertexTransformMatrix;

        cluster->GetTransformLinkMatrix(CGIP);
        cluster->GetTransformMatrix(RGIP);

        vertexTransformMatrix = CGIP.Inverse() * RGIP;

        skeleton->at(boneListPosition).localBoneMatrix = vertexTransformMatrix; 
```

所以基本上，当我想计算我的动画时，我得到网格世界矩阵的逆矩阵，将它与代表我的动画帧的矩阵相乘，乘以我的绑定矩阵的逆矩阵，该骨骼的父绑定矩阵和最终的父变换矩阵?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-22T03:05:05.540

首先需要知道mesh的原始顶点位置不在世界空间中。（例如：您将看到您的角色在 3ds max 中站立，但如果您直接导出网格数据，它会躺下。）

同样的事情也发生在骨架树的所有变换节点上。这意味着，即使只有一个单位矩阵的骨骼，网格也需要通过 FBX 场景的根节点进行变换，然后是骨骼节点的局部矩阵。（因为根节点也是骨骼节点的父节点），

顺便说一句，如果您使用函数 FbxAxisSystem::ConvertScene() 来转换网格的轴系，那么该操作也仅适用于根节点的变换矩阵，而不适用于网格的顶点。

要正确计算顶点的位置，需要找到网格所在的FbxNode，然后调用其EvaluateGlobalTransform()函数得到全局变换矩阵，并用它来变换网格顶点的位置。（法线的逆转置矩阵。）

我不知道您在代码的函数 GetGeometry() 中究竟做了什么： `FbxAMatrix clusterGeometry = GetGeometry(cluster->GetLink());`

但这是我获取骨骼绑定姿势矩阵的方法： `FbxAMatrix BoneBindPoseMatrix; pCluster->GetTransformLinkMatrix(BoneBindPoseMatrix).`

为了检索骨骼的节点，我还使用`FbxNode* pBoneNode = pCluster->GetLink()`, 并调用`pBoneNode->EvaluateLocalTransform( CurrentTime )`来获取当前时间骨骼的局部变换矩阵。但是我做了一件特别的事情：记得我是通过根节点的全局变换矩阵来转换网格的吧？所以对于骨架的根节点，我需要通过调用得到它的全局变换矩阵 `FbxAMatrix BoneInitPoseGlobalTransform = pBoneRootNode->EvaluateGlobalTransform()`，然后求逆。而我的根骨骼的局部变换矩阵将是：`BoneLocalTransform = InvBoneInitPoseGlobalTransform * BoneLocalTransform;`我们只需要对骨骼的根节点做它。

为皮肤设置动画时，我遍历整个骨架树，对于每个骨骼节点，我通过以下方式计算其全局变换矩阵：`BoneGlobalTransform = BoneLocalTransform * ParentBoneGlobalTransform;`但是在将矩阵传递给着色器之前，我需要做：`BlendMatrix = Bone.InvBindPoseMatrix * BoneGlobalTransform;`不要忘记我已经转换了位置根节点的顶点数。

就是这样，上面的代码在 D3D 和 OpenGL 下都运行良好。我希望它可以帮助你。:D

# openlayers - 开放层中的图像层

> ID：13566617
> 
> 赞同：1
> 
> 时间：2012-11-26T14:13:37.163
> 
> 标签：openlayers

我必须使用`OpenLayers.Layer.Image`openlayers 创建一个图像层。图像暂时是静态图像。该图像代表我要捕获的整个区域。我有图像所代表的区域角点的纬度和经度。当我将这些纬度作为界限时，图像会被拉伸。

我想知道如何显示定义了边界的静态图像，一旦我开始缩放，图像就会缩放。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T08:21:58.600

OpenLayers.Layer.Image 为此目的应该没问题：http: [//jsfiddle.net/cv3uC/4/](http://jsfiddle.net/cv3uC/4/) （您必须使用不同的地图属性来获得所需的初始范围、缩放级别数等）。

如果您的图像被拉伸，则边界可能不正确。计算图像和边界的宽度/高度比。他们应该是一样的。

```
var bounds = new OpenLayers.Bounds(10, 10, 260, 297);
var size = new OpenLayers.Size(250, 287);

alert(
    'Image ratio: ' + 
    (size.w / size.h).toString() +
    ' Bounds ratio: ' +
    (bounds.getWidth() / bounds.getHeight()).toString()
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T23:04:03.267

你想做的有点复杂（对不起）。

为了使图像层表现得像地图，可以放大和缩小，您需要将图像转换为地图。

您可以使用QGIS的*地理参考插件对您的图像进行地理参考，并使用*[Maptiler 之](http://www.maptiler.org/)类的工具从您的参考图像创建图块。当您拥有正确创建的地图切片时，您可以使用 Opanlayers TMS 图层来显示数据。（或者只是将其用作带有 Geoserver 的 WMS）

希望这会有所帮助，或者至少可以为 Goole 提供一些东西！

# java - 如何将输入的信息存储在字符串中？

> ID：13566618
> 
> 赞同：0
> 
> 时间：2012-11-26T14:13:45.293
> 
> 标签：java, jtextfield

我需要我在文本字段中输入的内容存储在一个字符串中，这样我就可以在另一个类中使用该字符串。

```
public void jButton1_actionPerformed(ActionEvent e) {
    String sql = "Select * from clients where username=? and password=?";
    try {
        pst = conn.prepareStatement(sql);
        pst.setString(1, jTextField.getText());

        pst.setString(2, new String(jPasswordField.getPassword())); // / 
```

我需要在 jTextField 中输入的这个用户名作为字符串存储。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:22:36.187

您可以将文本放入 PreparedStatement 中，如下所示：

```
pst.setString(1, jTextField.getText()); 
```

您可以使用相同的方法将其保存在字符串中：

```
String username = jTextField.getText(); 
```

# objective-c - PFQueryTableViewController 与本地化CaseInsensitiveCompare

> ID：13566621
> 
> 赞同：0
> 
> 时间：2012-11-26T14:13:56.707
> 
> 标签：objective-c, ios, localization, parse-platform

有没有办法让 PFQueryTableViewController 像 NSStringslocalizedCaseInsensitiveCompare 一样排序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T11:30:22.380

Héctor Ramos（Parse.com 的解决方案架构师）回答（在电子邮件中）：

> 修改的本地化CaseInsensitiveCompare 是特定于 iOS 的，但是 PFQuery 在 Parse 的后端执行。Parse 不支持这种排序。我建议使用标准排序进行查询，然后使用带有localizedCaseInsensitiveCompare 的NSSortDescriptor 在客户端对结果数组进行排序。

感谢 Hector 的回答，这很有效——我做到了。但是它会破坏分页。

# mysql - PHP - 如何循环 2 组数组并将它们混合在一起？

> ID：13566629
> 
> 赞同：0
> 
> 时间：2012-11-26T14:14:19.503
> 
> 标签：mysql, arrays, loops, foreach

我在循环数组并将它们混合为一组新数据时遇到问题。第一组数组是房间 ID。另一组是日期范围。我想每天在数组中包含房间 ID 的范围内循环。

**这是我的资源：**

```
$_rid=array("5","6");
$date_range=getDays('2012-11-30','2012-12-05');
$_sid=md5(time()); 
```

**获取两天之间的日期函数：**

```
function getDays($strDateFrom,$strDateTo) {
  // takes two dates formatted as YYYY-MM-DD and creates an
  // inclusive array of the dates between the from and to dates.

  // could test validity of dates here but I am already doing
  // that in the main script

  $aryRange=array();

  $iDateFrom=mktime(1,0,0,substr($strDateFrom,5,2),     substr($strDateFrom,8,2),substr($strDateFrom,0,4));
  $iDateTo=mktime(1,0,0,substr($strDateTo,5,2),     substr($strDateTo,8,2),substr($strDateTo,0,4));

  if ($iDateTo>=$iDateFrom) {
    array_push($aryRange,date('Y-m-d',$iDateFrom)); // first entry

    while ($iDateFrom<$iDateTo) {
      $iDateFrom+=86400; // add 24 hours
      array_push($aryRange,date('Y-m-d',$iDateFrom));
    }
  }
  return $aryRange;
} 
```

**所以我写道：**

```
foreach($_POST[vid] as $_vidz){//5-6
    foreach($date_range as $val0){  
    //get cost from villas_rate each date
    $sql_rCost="select vr_cost from villas_rate where vr_id='$_vidz'";
    //echo $sql_rCost."<hr />";
    $result_rCost=mysql_db_query($dbname,$sql_rCost);
    while($rec_rCost=mysql_fetch_array($result_rCost)){
        $_rCostDBcost=explode("-",str_replace(",","",$rec_rCost['vr_cost']));   
            $_rate=$_rCostDBcost[$_rtype-1];//rate starts with 0
            $_date=$val0;
            $sql_cBk="insert into booking_customer values('','$_sid','$_vidz','$_rate','$_agc','$_date')";
            echo $sql_cBk."<br />";             
        }
    }
} 
```

**结果** 应该是好的结果。但它只为数组 $_rid=5 中的一个值循环。

```
insert into booking_customer values('','e1eb3f2e2c0fe99780c0354fa699a827','5','2012-11-30')
insert into booking_customer values('','e1eb3f2e2c0fe99780c0354fa699a827','5','2012-12-01')
insert into booking_customer values('','e1eb3f2e2c0fe99780c0354fa699a827','5','2012-12-02')
insert into booking_customer values('','e1eb3f2e2c0fe99780c0354fa699a827','5','2012-12-03')
insert into booking_customer values('','e1eb3f2e2c0fe99780c0354fa699a827','5','2012-12-04')
insert into booking_customer values('','e1eb3f2e2c0fe99780c0354fa699a827','5','2012-12-05') 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:26:53.840

May be you used input's names like `<input name="vid" .. <input name="vid" ..` in your HTML form and in this case you have trouble here:

```
foreach($_POST[vid] as $_vidz) 
```

You should using names with `[]` like `<input name="vid[]" .. <input name="vid[]" ..`

Or in `villas_rate` didn't exists records with `vr_id = 6`

# java - 2 java.util.Date 之间的月数，不包括月份中的某天

> ID：13566630
> 
> 赞同：6
> 
> 时间：2012-11-26T14:14:22.760
> 
> 标签：java, date, jodatime

我想要 2 之间`java.util.Date`的月数，而不计算月中的天数。所以我只想要比较中的年份和月份。

### 例子：

```
 monthsBetween(new Date(2012,01,28), new Date(2012,02,01)) ---> 1

 monthsBetween(new Date(2012,02,27), new Date(2012,02,28)) ---> 0

 monthsBetween(new Date(2012,03,28), new Date(2012,07,01)) ---> 4 
```

我已经使用 Joda-time 尝试过这个（返回 0，预期为 1）：

```
private static int monthsBetween(final Date fromDate, final Date toDate) {
    DateTime date1 = new DateTime().withDate(2012, 1, 20);
    DateTime date2 = new DateTime().withDate(2012, 2, 13);
    PeriodType monthDay = PeriodType.yearDayTime().withDaysRemoved();
    Period difference = new Period(date1, date2, monthDay);
    int months = difference.getMonths();

    return months;
 } 
```

还有这个（相同的结果），使用 Joda-time：

```
private static int monthsBetween(final Date fromDate, final Date toDate) {
        return Months.monthsBetween(new DateTime(fromDate), new   DateTime(toDate).getMonths();
    } 
```

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T14:19:08.827

你问的是整月的数量——这与说“忽略月份部分”不同。

首先，我建议使用[`LocalDate`](http://www.joda.org/joda-time/apidocs/org/joda/time/LocalDate.html)而不是[`DateTime`](http://www.joda.org/joda-time/apidocs/org/joda/time/DateTime.html)计算。理想情况下，根本不要使用`java.util.Date`，并以您的输入作为`LocalDate`开始（例如，将文本直接解析为该文本，或者您的数据来自何处。）在两个日期中将月份中的日期设置为 1，*然后*获取差异以月为单位：

```
private static int monthsBetweenIgnoreDays(LocalDate start, LocalDate end) {
    start = start.withDayOfMonth(1);
    end = end.withDayOfMonth(1);
    return Months.monthsBetween(start, end).getMonths();
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T15:39:20.610

此版本基于 JDK 日历：

```
public static void main(String[] args) throws Exception {
    SimpleDateFormat f = new SimpleDateFormat("yyyy-MM-dd");
    Date d1 = f.parse("2012-01-01");
    Date d2 = f.parse("2012-02-02");
    int n = differenceInMonths(d1, d2);
    System.out.println(n);
}

private static int differenceInMonths(Date d1, Date d2) {
    Calendar c1 = Calendar.getInstance();
    c1.setTime(d1);
    Calendar c2 = Calendar.getInstance();
    c2.setTime(d2);
    int diff = 0;
    if (c2.after(c1)) {
        while (c2.after(c1)) {
            c1.add(Calendar.MONTH, 1);
            if (c2.after(c1)) {
                diff++;
            }
        }
    } else if (c2.before(c1)) {
        while (c2.before(c1)) {
            c1.add(Calendar.MONTH, -1);
            if (c1.before(c2)) {
                diff--;
            }
        }
    }
    return diff;
} 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2015-03-30T16:25:04.570

如果您在 int 值中有年份和月份：

```
months = (year2-year1)*12 + month2 - month1; 
```

一年有12个月。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2021-06-05T16:49:50.483

# *java.time*

`java.util`日期时间 API 及其格式化 API已`SimpleDateFormat`过时且容易出错。建议完全停止使用它们并切换到[现代 Date-Time API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html) ^*。

**使用`java.time`现代 API 的解决方案：**由于您不需要时间和时区来考虑您的要求，因此[`LocalDate`](https://docs.oracle.com/javase/tutorial/datetime/iso/date.html)最适合您的要求。

**演示：**

```
import java.time.LocalDate;
import java.time.temporal.ChronoUnit;
import java.time.temporal.TemporalAdjusters;

public class Main {
    public static void main(String[] args) {
        // Test
        System.out.println(monthsBetween(LocalDate.of(2012, 1, 28), LocalDate.of(2012, 2, 1)));
        System.out.println(monthsBetween(LocalDate.of(2012, 2, 27), LocalDate.of(2012, 2, 28)));
        System.out.println(monthsBetween(LocalDate.of(2012, 3, 28), LocalDate.of(2012, 7, 1)));
    }

    static int monthsBetween(final LocalDate fromDate, final LocalDate toDate) {
        return Math.toIntExact(
                    ChronoUnit.MONTHS.between(
                            fromDate.with(TemporalAdjusters.firstDayOfMonth()),
                            toDate.with(TemporalAdjusters.firstDayOfMonth())
                    )
                );
    }
} 
```

**输出：**

```
1
0
4 
```

[`ONLINE DEMO`](https://ideone.com/Chuufj)

## 如果您需要使用`java.util.Date`：

出于任何原因，如果您需要对 的对象执行此操作`java.util.Date`，您可以将 的对象转换`java.util.Date`为`Instant`using [`Date#toInstant`](https://docs.oracle.com/javase/8/docs/api/java/util/Date.html#toInstant--)，根据需要可以转换为其他`java.time`类型。

**演示：**

```
import java.text.ParseException;
import java.text.SimpleDateFormat;
import java.time.ZoneOffset;
import java.time.ZonedDateTime;
import java.time.temporal.ChronoUnit;
import java.time.temporal.TemporalAdjusters;
import java.util.Date;
import java.util.Locale;
import java.util.TimeZone;

public class Main {
    public static void main(String[] args) throws ParseException {
        // Test
        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd", Locale.ENGLISH);
        sdf.setTimeZone(TimeZone.getTimeZone("Etc/UTC"));

        System.out.println(monthsBetween(sdf.parse("2012-01-28"), sdf.parse("2012-02-01")));
        System.out.println(monthsBetween(sdf.parse("2012-02-27"), sdf.parse("2012-02-28")));
        System.out.println(monthsBetween(sdf.parse("2012-03-28"), sdf.parse("2012-07-01")));
    }

    static int monthsBetween(final Date fromDate, final Date toDate) {
        ZonedDateTime zdtFrom = fromDate.toInstant().atZone(ZoneOffset.UTC);
        ZonedDateTime zdtTo = toDate.toInstant().atZone(ZoneOffset.UTC);

        return Math.toIntExact(
                    ChronoUnit.MONTHS.between(
                            zdtFrom.with(TemporalAdjusters.firstDayOfMonth()),
                            zdtTo.with(TemporalAdjusters.firstDayOfMonth())
                    )
                );
    }
} 
```

**输出：**

```
1
0
4 
```

[`ONLINE DEMO`](https://ideone.com/Dpp4Xg)

从**[Trail: Date Time](https://docs.oracle.com/javase/tutorial/datetime/index.html)**了解更多关于`java.time`现代[日期时间 API](https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html) ^*的信息。

**一些重要的注意事项：**

1.  构造函数`java.util.Date(int, int, int)`已被弃用。
2.  `java.util.Date`并且[`java.util.Calendar`](https://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#set(int,%20int,%20int))月份是基于 0 的，即一月是月份#0。但是，`SimpleDateFormat`将 1 月视为第 1 个月。
3.  以 0 为前缀的`int`数字被认为是八进制数，只能支持 0-7 范围内的数字。您遇到编译错误并非偶然，因为您只使用了 07 之前的月份。例如，如果您使用 08 或 09，您就会遇到编译错误。

* * *

^(* 出于任何原因，如果您必须坚持使用 Java 6 或 Java 7，则可以使用[***ThreeTen-Backport，***](http://www.threeten.org/threetenbp/)它将大部分*java.time*功能向后移植到 Java 6 和 7。如果您正在为 Android 项目和 Android API 工作level 仍然不符合 Java-8，请检查[Java 8+ APIs available through desugaring](https://developer.android.com/studio/write/java8-support-table)和[How to use ThreeTenABP in Android Project](https://stackoverflow.com/questions/38922754/how-to-use-threetenabp-in-android-project)。)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-06-21T20:06:59.313

```
/**
 * Gets number of months between two dates. 
 * <p>Months are calculated as following:</p>
 * <p>After calculating number of months from years and months from two dates,
 * if there are still any extra days, it will be considered as one more month.
 * For ex, Months between 2012-01-01 and 2013-02-06 will be 14 as 
 * Total Months = Months from year difference are 12 + Difference between months in dates is 1  
 * + one month since day 06 in enddate is greater than day 01 in startDate.
 * </p>
 * @param startDate
 * @param endDate
 * @return
 */
public static int getMonthsBetweenDates(Date startDate, Date endDate)
{
    if(startDate.getTime() > endDate.getTime())
    {
        Date temp = startDate;
        startDate = endDate;
        endDate = temp;
    }
    Calendar startCalendar = Calendar.getInstance(); 
    startCalendar.setTime(startDate);
    Calendar endCalendar = Calendar.getInstance();
    endCalendar.setTime(endDate);

    int yearDiff = endCalendar.get(Calendar.YEAR)- startCalendar.get(Calendar.YEAR);
    int monthsBetween = endCalendar.get(Calendar.MONTH)-startCalendar.get(Calendar.MONTH) +12*yearDiff;

    if(endCalendar.get(Calendar.DAY_OF_MONTH) >= startCalendar.get(Calendar.DAY_OF_MONTH))
        monthsBetween = monthsBetween + 1;
    return monthsBetween;

} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-04-24T13:38:59.950

我只会获取日历实例的年和月字段，将年转换为月并获得差异。

```
private static int monthsBetween(final Date s1, final Date s2) {
    final Calendar d1 = Calendar.getInstance();
    d1.setTime(s1);
    final Calendar d2 = Calendar.getInstance();
    d2.setTime(s2);
    int diff = (d2.get(Calendar.YEAR) - d1.get(Calendar.YEAR)) * 12 + d2.get(Calendar.MONTH) - d1.get(Calendar.MONTH);
    return diff;
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-03-07T06:24:06.387

它也适用于闰年

```
public static int getNumberOfMonths(Date fromDate, Date toDate) {
    int monthCount = 0;
    Calendar cal = Calendar.getInstance();
    cal.setTime(fromDate);
    int c1date = cal.get(Calendar.DATE);
    int c1month = cal.get(Calendar.MONTH);
    int c1year = cal.get(Calendar.YEAR);
    cal.setTime(toDate);
    int c2date = cal.get(Calendar.DATE);
    int c2month = cal.get(Calendar.MONTH);
    int c2year = cal.get(Calendar.YEAR);
    System.out.println(" c1date:"+c1date+" month:"+c1month+" year:"+c1year);
    System.out.println(" c2date:"+c2date+" month:"+c2month+" year:"+c2year);
    GregorianCalendar grCal = new GregorianCalendar();
    boolean isLeapYear1 = grCal.isLeapYear(c1year);
    boolean isLeapYear2 = grCal.isLeapYear(c2year);
    monthCount = ((c2year - c1year) * 12) + (c2month - c1month);
    if(isLeapYear2 && c2month == 1 && c2date == 29){
        monthCount = monthCount+ ((c1date == 28)?0:1);
    }else if(isLeapYear1 && c1month == 1 && c1date == 29){
        monthCount = monthCount+ ((c2date == 28)?0:1);
    }else{
        monthCount = monthCount+ ((c2date >= c1date)?0:1);
    }
    return monthCount;

} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2017-08-16T00:09:35.590

这将在几个月内为您带来差异

```
(endCal.get(Calendar.YEAR)*12+endCal.get(Calendar.MONTH))-(startCal.get(Calendar.YEAR)*12+startCal.get(Calendar.MONTH)) 
```

# iphone - 种子随机数生成器

> ID：13566632
> 
> 赞同：1
> 
> 时间：2012-11-26T14:14:26.707
> 
> 标签：iphone, objective-c, random

ObjC 上最好的种子随机数生成器是什么？

我必须在 2 部不同的 iPhone 上生成相同的随机数序列，因此必须对其进行播种。这就是为什么我不能使用`arc4rand()`.

注意：最好的意思是最快/最不可预测的关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:18:54.433

C++ 标准库自带的[Mersenne Twister 实现](http://www.cplusplus.com/reference/random/mt19937/)非常好。由于它是 C++，因此您需要创建一个包装器，以便您可以从 C 和 ObjC 代码中调用它，或者将使用它的文件重命名为具有 .mm (Objective-C++) 扩展名。

我正在考虑这样的事情，在标题中：

```
#ifdef __cplusplus
extern "C" {
#endif

struct rng_state;
struct rng_state* create_rng(unsigned seed);
void destroy_rng(struct rng_state* rng);
unsigned long long rng_random_unsigned(struct rng_state* rng, unsigned long long max);

#ifdef __cplusplus
}
#endif 
```

然后，在包含上述内容的 .cpp 文件中：

```
#include <random>
struct rng_state
{
  std::mt19937* rng;
};
struct rng_state* create_rng(unsigned seed)
{
  std::mt19937* engine = new std::mt19937(seed);
  rng_state* state = new rng_state;
  state->rng = engine;
}
void destroy_rng(struct rng_state* rng)
{
  delete rng->rng;
  delete rng;
}
unsigned long long rng_random_unsigned(struct rng_state* rng, unsigned long long max)
{
  std::uniform_int_distribution<unsigned long long> distribution(0, max);
  return distribution(*rng->rng);
} 
```

I haven't tested the above, but it should be pretty close. You can then include the header in your C/ObjC files as usual, create a rng with a seed, get a bunch of random numbers, and destroy the rng when you're done. You can also add more generator functions if needed - the library comes with different random distributions you can use.

# asp.net - 在 IIS 7 中设置过期时间

> ID：13566633
> 
> 赞同：1
> 
> 时间：2012-11-26T14:14:28.240
> 
> 标签：asp.net, iis

我必须在 IIS 7 中为我的应用程序的静态文件设置过期时间。使用下面的对话框：我将其设置为 10 天。

![在此处输入图像描述](../Images/6ad3e0e7615b36b183bfaf1a7a5a152e.png)

但是当我在 Chrome 中使用 PageSpeed 插件查看我的页面分析时，我发现文件没有过期。

![在此处输入图像描述](../Images/25cb44f2cecdcb644190015c590bde10.png)

我是否也必须在我的应用程序配置中做一些事情？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:13:56.460

您可以在 web.config 文件中执行此操作：

```
<?xml version="1.0"?>
<configuration>
  <!-- Cache Settings -->
  <location path="data">
    <system.webServer>
      <staticContent>
        <clientCache cacheControlMode="UseMaxAge" cacheControlMaxAge="10.00:00:00"/>
      </staticContent>
    </system.webServer>
  </location>
</configuration> 
```

对于路径值，您可以执行以下操作：images\interface *（示例）*
对于 cacheControlMaxAge：10 = days = DD.HH:MM:SS

# cluster-analysis - 适用于非常小的集群的聚类算法

> ID：13566634
> 
> 赞同：5
> 
> 时间：2012-11-26T14:14:29.083
> 
> 标签：cluster-analysis, data-mining, text-processing, rapidminer, dbscan

我正在尝试在大约 5000 条记录的列表中查找重复项。每条记录都是一个人的姓名和地址，但都在一个字段中输入不一致，所以我正在尝试一种模糊匹配方法。我的方法（使用rapidminer）是对文本进行一些预处理（即标记化，删除常见和不相关的单词，例如“先生”等），生成TF-IDF并使用DBSCAN对匹配记录进行聚类。这很有效，并给出了很好的结果，但是当我尝试运行完整的数据集时需要很长时间。这也会导致很多只有一个元素的簇，我不知道这会如何影响 DBSCAN 的计算时间。

是否有一种聚类算法可以更快地处理此类数据，或者是否有更好的方法来解决这个问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T18:16:34.090

你确定*集群*是最好的方法吗？

对我来说，这听起来好像你在做**近乎重复的检测**，即你定义了一些阈值，只是想找出在这个相似性阈值内是否有任何其他对象。如果您使用的 DBSCAN 具有较低的 minPts 值（例如 minPts=2），那么您实际上并没有在使用 DBSCAN。

如果 DBSCAN 生成单元素簇，则它的实现不正确。DBSCAN 中不能有单元素簇；这些是噪声对象，应该这样对待。

我不知道 RapidMiner 中 DBSCAN 的质量。**如果它是基于 Weka 代码的，那就是垃圾**（即，甚至都不要费心去尝试 Weka！）。而且真的很慢。它至少拼写错误：DBScan 不正确，它是一个缩写，应该拼写为 DBSCAN...

天真地实施 DBSCAN 是复杂的`O(n^2)`。如果你有一个好的索引来支持查询，它可以在`O(n log n)`. 如果你有一个非常糟糕的实现，它可能会因为数据结构效率低下而下降`O(n^3)`......（从快速检查来看，rapidminer 应该在`O(n^2)`，但由于使用 可能会浪费大量内存`LinkedList<Integer>`，并且垃圾收集器会可能要花很多钱）

5000 个对象实际上并没有那么多。所以很可能问题不在于聚类算法的复杂性（我已经在 60 秒内使用 ELKI 在单个 CPU 上对 100000 个对象运行了 DBSCAN），而是**距离计算**。快速浏览一下 rapidminer，我看不出它是否支持稀疏向量、稀疏向量上的有效余弦相似度，甚至没有预计算向量长度以充分利用向量稀疏性的技巧（以预处理每个对象和存储为代价）一个额外的双）。现在显然，如果您的向量与文本向量一样具有 1% 的稀疏度，那么使用低效的非稀疏距离计算将花费大约 100 倍的时间，计算大量的 0。

我刚刚在类似文本的数据集上使用 ELKI 运行 DBSCAN。它没有你的那么大：只有 3333 个观测值和 50 个维度，以及 13% 的稀疏性）。运行 DBSCAN 需要 7 秒，epsilon=0.001，minpts=3，余弦相似度；未启用索引加速。所以很明显，问题似乎不在于 DBSCAN，而在于 RapidMiner 实现。请注意，ELKI 与稀疏数据一起使用有点棘手。您需要以正确的输入格式输入数据，正确设置一些过滤器等 - 我现在不推荐给初学者。这更要强调它可能是 RapidMiner 的相似函数实现杀死了你的运行时。

我不想阻止您使用 DBSCAN。从聚类的角度来看，它是你能找到的最合适的算法之一：它支持任意距离函数（k-means 不支持），你不需要事先知道聚类的数量（显然你不需要't) 并且它也会选择不将所有内容聚类（显然你有很多非聚类对象）。

但是，**我相信您根本*不想*进行*聚类***。**您似乎对重复检测感兴趣，我假设您可以通过例如将文档加载到 Lucene 或 Xapian 等文本搜索引擎中并查询**专用文本搜索引擎来查看您是否有更好的性能和结果质量附近重复。而这些文本搜索引擎真的很擅长：匹配文本。我认为比 rapidminer 好得多。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T09:16:10.103

您的问题不是*聚类*，而是**[近似字符串匹配](http://en.wikipedia.org/wiki/Approximate_string_matching)**。

您可能需要查看**[Levenshtein 编辑距离](http://en.wikipedia.org/wiki/Levenshtein_distance#Computing_Levenshtein_distance)**或使用[几个](https://github.com/seatgeek/fuzzywuzzy) [现有](https://github.com/kiyoka/fuzzy-string-match)选项之一。

# variables - XSL 在测试时使用变量

> ID：13566636
> 
> 赞同：1
> 
> 时间：2012-11-26T14:14:33.657
> 
> 标签：variables, xslt

我在尝试使用`when test=...`.

当我输出`$tcbrand`它时，它会输出，`'Direct'`但是当我对其进行操作时，它会返回`false`并击中 else 块。我究竟做错了什么？

```
 <fo:static-content flow-name="header-normal" font-size="10pt">  

                <xsl:variable name="tcbrand" select="smf:entity[@type='d2501b79-f888-4aa8-9fcf-a667a4c47c84']"/>

                <fo:block font-size="10pt" text-align="left">
                    <fo:inline font-weight="normal">Brand: <xsl:value-of select="$tcbrand"/></fo:inline>
                </fo:block>

                <xsl:choose>
                    <!--<xsl:if test="$image = 'hello' ">-->
                    <xsl:when test="string($tcbrand)='Direct'">
                        <fo:block text-align="right" space-before="0mm">
                            <fo:external-graphic src="url('C:\Program Files (x86)\numerointeractive\whitemail\Images\18-30.png')" />
                        </fo:block>             
                    </xsl:when>

                    <xsl:otherwise>                         
                            <fo:block text-align="right" space-before="0mm">
                                <fo:external-graphic src="url('C:\Program Files (x86)\numerointeractive\whitemail\Images\ecom2.jpg')" />
                            </fo:block>             
                    </xsl:otherwise>                                
                </xsl:choose> 
```

这是生成的 xml，我正在对其进行操作：

```
 <smf:entity id="48659" type="d2501b79-f888-4aa8-9fcf-a667a4c47c84" confidence="1.0" author="2e0b99b3-9cba-4736-a59b-fe00b5f62871" validated="true" preferred="false" requiresComponentExtraction="false" changeTime="2012-11-26T14:47:28.840Z" nonPersistedId="false" modified="false">
           <smf:value>Direct</smf:value>
        </smf:entity> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T15:35:48.633

```
<xsl:variable name="tcbrand" select="smf:entity[@type='d2501b79-f888-4aa8-9fcf-a667a4c47c84']"/> 
```

将`tcbrand`变量设置为`smf:entity`元素。元素的字符串值是其所有后代文本节点的串联，对于

```
<smf:entity id="48659" type="d2501b79-f888-4aa8-9fcf-a667a4c47c84" confidence="1.0" author="2e0b99b3-9cba-4736-a59b-fe00b5f62871" validated="true" preferred="false" requiresComponentExtraction="false" changeTime="2012-11-26T14:47:28.840Z" nonPersistedId="false" modified="false">
       <smf:value>Direct</smf:value>
    </smf:entity> 
```

表示一个换行符、七个空格、“直接”、另一个换行符和另外四个空格。这不等于“直接”。我可以想到三个可能的解决方法：你可以使用

```
<xsl:strip-space elements="*"/> 
```

在样式表的顶部，这将导致它完全忽略输入文档中的所有仅空白文本节点，您可以`normalize-space`在进行测试时：

```
<xsl:when test="normalize-space($tcbrand)='Direct'"> 
```

或者您可以在变量声明点获取子`<smf:value>`元素的值而不是父元素的值`<smf:entity>`

```
<xsl:variable name="tcbrand"
  select="smf:entity[@type='d2501b79-f888-4aa8-9fcf-a667a4c47c84']/smf:value"/> 
```

或在测试时

```
<xsl:when test="$tcbrand/smf:value='Direct'"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:26:49.517

在您的示例中，您的变量似乎`tcbrand`包含一个文档节点而不是文本字符串。

我怀疑它`Direct`在您的示例中打印的原因是因为这是所选节点的文本内容。这将在 test 属性中评估为 false ，因为变量不包含文字 string `Direct`。

要从选定的注释中选择文本值，请`/text()`在变量声明中使用，例如

```
 <xsl:variable name="tcbrand" select="smf:entity[@type='d2501b79-f888-4aa8-9fcf-a667a4c47c84']/text()"/> 
```

`text()`'何时应该在[我的 XPath 表达式末尾使用 /text()](http://www.xquery.com/tips_and_tricks/using_text_in_XPath.html)？[在网站 xquery.com 上](http://www.xquery.com/tips_and_tricks/using_text_in_XPath.html)：

> 您可能已经看到很多在 XPath 表达式末尾使用 /text() 的示例，并且您可能想知道，我应该这样做吗？有什么缺点吗？
> 
> 在某些情况下，您确实希望将 /text() 附加到 XPath 表达式以强制 XQuery 考虑 XPath 表达式的文本值；典型情况是当您想要动态创建结果元素的值时；像这样的东西：

```
<title>{$doc//book[1]/book-title}</title> 
```

> ... 生成此输出：

```
<title>
    <book-title>La Divina Commendia</book-title>
</title> 
```

> 但是，如果您尝试创建的内容实际上是这样的：

```
<title>La Divina Commendia</title> 
```

> ……那么您需要指示 XQuery 使用元素的文本值，一个简单的方法是将 /text() 附加到 XPath 表达式：

```
<title>{$doc//book[1]/book-title/text()}</title> 
```

# facebook - 验证 Facebook 用户

> ID：13566637
> 
> 赞同：-1
> 
> 时间：2012-11-26T14:14:37.210
> 
> 标签：facebook, authentication

我有一个获取用户访问令牌和 userId 的网页（使用 js api）。我想将我得到的 fb userId 发送到我网站上的登录页面，但显然我需要确保用户确实是他所说的那个人。

问题是：检查[https://graph.facebook.com/me?access_token=ACCESS_TOKEN是否足够](https://graph.facebook.com/me?access_token=ACCESS_TOKEN)

并比较我得到的用户ID和上面页面中的用户ID？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-27T06:09:36.417

如果您使用了 FB 登录功能，您无法确定该用户是他声称的那个人。之后，您只需检索用户会话即可再次获取他的详细信息。

请注意，您可以使用客户端和服务器端代码，而无需重新验证。

# web - 一页网站的SEO

> ID：13566641
> 
> 赞同：1
> 
> 时间：2012-11-26T14:14:52.533
> 
> 标签：web, seo

我要创建一个新网站，我正在考虑将整个网站制作为一个页面，例如

[http://www.demdous.com/examples/html/laboratory/2/](http://www.demdous.com/examples/html/laboratory/2/)

所以这将是搜索引擎优化的一个问题?
最好是让网站多页而不是一页还是没有意义？
将来谷歌将能够像这样划分它
![在此处输入图像描述](../Images/75d58d903a47051d3c921519a750d88e.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:37:44.220

在开始之前，您应该通读本文档并确保您可以满足 google 的 ajax 要求。如果不能，您可能需要考虑向服务器发出往返请求的页面。 [https://developers.google.com/webmasters/ajax-crawling/docs/getting-started](https://developers.google.com/webmasters/ajax-crawling/docs/getting-started)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T23:52:36.620

我会质疑您为什么要像您提供的示例一样将其设为单页网站。

这是一个风格的选择吗？简单的问题？也就是说，搜索引擎优化仍然主要与您网站的内容、返回您网站的高质量链接以及您的社交媒体存在有关。

只要您注意这些因素（以及针对 HTML5 和 Ajax 优化等技术问题），您应该没问题。

# python - 使用python动态计算excel行数

> ID：13566645
> 
> 赞同：0
> 
> 时间：2012-11-26T14:15:05.163
> 
> 标签：python, excel, hash

我正在编写一个解析 Excel 文件的 Python 脚本。此脚本的目的是计算第 1 列中的每个单元格值，即第 2 列中的值的数量。

例如，一个看起来像这样的 Excel 文件：

```
12    abc
12    abc
12    efg
12    efg
13    hij
13    hij
13    klm 
```

我的脚本将返回：

```
For cell value 12 : 2 values "abc", 2 values "efg" and for cell value 13 : 2 values "hij" and 1 value "klm". 
```

我尝试在 Python 中使用哈希，这就是我想要做的：

```
import xlrd
workbook = xlrd.open_workbook('myexcelfile.xls')
worksheet = workbook.sheet_by_name('myexcelsheet')
num_rows = worksheet.nrows - 1
num_cells = worksheet.ncols - 1
first_col = 0
scnd_col = 1
curr_row = 1
hash = []
while curr_row < num_rows:
curr_row += 1
curr_cell = -1
print 'IN ROW', curr_row
while curr_cell < num_cells:
        curr_cell += 1
        print 'IN CELL', curr_cell
        cell0_val = int(worksheet.cell_value(curr_row,first_col))
        cell1_val = worksheet.cell_value(curr_row,scnd_col)
        print 'CELL VALUE', cell0_val, cell1_val
        hash[cell0_val][cell1_val]+=1 
```

我当然以错误的方式使用该哈希，但我真的是 Python 新手，我在网上找不到任何符合我真正想要的好的例子。任何帮助将不胜感激。谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:01:34.113

你也可以这样做：

```
from itertools import groupby
from operator import itemgetter
from collections import Counter
import xlrd

workbook = xlrd.open_workbook('myexcelfile.xls')
sheet = workbook.sheet_by_name('myexcelsheet')

as_list = sorted([sheet.row_values(rownum) for rownum in range(sheet.nrows)],
                 key=itemgetter(1))

for cell_value, vals in groupby(as_list, itemgetter(0)):
    letter_values = [v[1] for v in vals]
    occurrences = dict(Counter(letter_values))

    print 'For cell value {}:'.format(int(cell_value))
    print ', '.join('{} values {}'.format(str(c), v) 
                    for v, c in occurrences.items()) 
```

并根据需要格式化输出。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:31:22.560

你的意思是[字典](http://docs.python.org/2/tutorial/datastructures.html#dictionaries)。
也许在每个键中放一个列表。首先是`hash = {}`

如果只有两列，则不需要第二个循环。做这样的事情

```
cell0_val = int(worksheet.cell_value(curr_row,first_col))
cell1_val = worksheet.cell_value(curr_row,scnd_col)

if cell0_val in hash:
    hash[cell0_val].append(cell1_val)
else:
    hash[cell0_val] = [cell1_val] 
```

你应该得到类似的东西`hash= {12: ['abc', 'abc', 'efg', 'efg'], 13: ['hij', 'hij', 'klm']}`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:54:18.400

我会使用双层字典：

所以你的字典定义：

celldict = dict() # 或 celldict = {}

```
import xlrd
workbook = xlrd.open_workbook('myexcelfile.xls')
worksheet = workbook.sheet_by_name('myexcelsheet')

num_rows = worksheet.nrows - 1
num_cells = worksheet.ncols - 1

first_col = 0
scnd_col = 1

# Read Data into double level dictionary
celldict = dict()
for curr_row in range(num_rows)  :

    #print 'IN ROW',curr_row
    cell0_val = int(worksheet.cell_value(curr_row,first_col))
    cell1_val = worksheet.cell_value(curr_row,scnd_col)

    # if this cell number isn't in my cell dict add it
    if not cell0_val in celldict :

        celldict[cell0_val] = dict()

    # if the entry isn't in the second level dictionary then add it, with count 1

    if not cell1_val in celldict[cell0_val] :
        celldict[cell0_val][cell1_val] = 1

    # Otherwise increase the count
    else :
        celldict[cell0_val][cell1_val] += 1

# Outputs Dictionary hierachy
print   celldict
# Outputs it more pretiliy
for cellval in celldict :
    print "For cell value ", cellval  ,":"
    for cellval2 in celldict[cellval] :
        print cellval2," values", celldict[cellval][cellval2] 
```

# android - 带有 CursorAdapter 的 ListView 中的复选框侦听器

> ID：13566648
> 
> 赞同：2
> 
> 时间：2012-11-26T14:15:09.380
> 
> 标签：android, listview, checkbox, android-cursoradapter

我有一个与[这篇文章](https://stackoverflow.com/questions/5444355/android-listview-with-checkbox-problem)非常相似的问题。在我的 ListView 的每一行中，我都有一个带有侦听器的复选框。侦听器更新数据库行。

```
@Override
public void bindView(View v, Context context, Cursor c) {
    TextView tvA = (TextView) v.findViewById(R.id.adi_tv_activity);
    CheckBox cb = (CheckBox) v.findViewById(R.id.adi_cbox);
    tvA.setText(c.getString(c.getColumnIndex("name")));
    final long id = c.getLong(c.getColumnIndex("_id"));
    final Context ctx = context;
    cb.setOnCheckedChangeListener(new OnCheckedChangeListener(){
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
            ObjDBF dbf = new ObjDBF(ctx); //Object thet update db
            if(isChecked) {
                dbf.tbActivitiesUpdateState(id, true);  
            } else {   
                dbf.tbActivitiesUpdateState(id, false);     
            }
        }               
    });
    if (c.getBoolean(c.getColumnIndex("state"))) {
        cb.setChecked(true);
    } else {
        cb.setChecked(false);
    }
} 
```

我有2个问题。

1.  滚动问题。移动列表我丢失了从屏幕上消失的行的复选框状态。
2.  每当我使用 setChecked 时，都会调用侦听器导致新的数据库更新。

为了解决滚动问题，我想在每次更新数据库时使用 adapter.changeCursor，但对于第二个问题，它会导致循环。

我也尝试在上面链接的帖子的第二个答案中使用一个数组，但它使用方法 getView od 适配器，我有一个 cursorAdapter 并在 newView 和 bindView 中工作

我该如何解决这个问题？

编辑： auselen 解决方案有效，但它创建并摧毁了很多听众，还有其他更有效的解决方案吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:56:45.037

为避免在侦听器上触发回调，您应该取消注册现有的，然后再次`cb.setOnCheckedChangeListener(null)`设置。`cb.setChecked(c.getBoolean(c.getColumnIndex("state")))``cb.setOnCheckedChangeListener()`

但是，您应该考虑使用它的更好方法`OnCheckedChangeListener`，因为您最终会创建超出需要的侦听器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-13T08:03:19.860

```
private SparseBooleanArray bolarray;
public class ViewHolder{
        CheckBox checked_displayName;
        int contact_id;
        String displayName;
        boolean isChecked=false;
    }

public void bindView(View v, Context context, Cursor cursor) 
{

ViewHolder viewHolder=new ViewHolder();

viewHolder.checked_displayName=(CheckBox) 
v.findViewById(R.id.checked_displayName);

viewHolder.displayName=cursor.getString(cursor.getColumnIndex(PROJECTION[0]));

viewHolder.checked_displayName.setText(viewHolder.displayName);

viewHolder.checked_displayName.setTag(viewHolder);

if(!bolarray.get(viewHolder.contact_id)){
            bolarray.put(viewHolder.contact_id, false);
            viewHolder.checked_displayName.setChecked(false);
            viewHolder.isChecked=false;
        }else{

            bolarray.put(viewHolder.contact_id, true);
            viewHolder.checked_displayName.setChecked(true);
            viewHolder.isChecked=true;
        } 
```

# javascript - 比较Javascript中的日期字符串

> ID：13566661
> 
> 赞同：0
> 
> 时间：2012-11-26T14:15:59.367
> 
> 标签：javascript, knockout.js

我想看看我的数组中的一个项目是否是今天创建的，所以我使用 arrayFilter 过滤数组中的每个元素，问题是，我无法让我的过滤器正常工作：

```
return ko.utils.arrayFilter(self.enquiries(), function (enquiry) {
    var include = true;

    if (self.onlyToday()) {
        var formatted = $.datepicker.formatDate("dd/mm/yy", new Date());

        include = include && +enquiry.EnquiryDate.indexOf(+formatted > -1);
    }

    return include;
}); 
```

这是我的数据的样子：

```
formatted: 26/11/2012
enquiry.EnquiryDate: 08/11/2012 08:46:46 
```

很明显，这`enquiry`应该被过滤，因为它不是今天创建的。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:27:34.187

这里有几个问题。

1.  您将字符串放入 中`formatted`，然后使用`+formatted > -1`. `+formatted`will always be `NaN`, which is never `> -1`(它也永远不等于`-1`和 never `< -1`)。

2.  您正在设置`include`，`true`然后执行`include = include && ...`. 后面的部分`&&`永远不会被评估，因为`&&`is`true`和 JavaScript（像大多数现代语言一样）左侧的部分会使表达式短路。

3.  如果`enquiry`指的是一个对象，`+enquiry`除非`NaN`你覆盖了它的`valueOf`.

4.  您正在比较*strings*，这意味着比较的最重要部分将在左侧 - 但您的日期字符串的格式是最重要的值在*右侧*。因此，例如，string*小于* `"01/01/2013"`string *，*即使它们所代表的日期当然不是这样**。**如果你想有意义地比较日期*字符串*，它们必须在左边有年份，然后是月份，然后是日期。 *`"02/02/2012"`*

 **根据您引用的`enquiry.EnquiryDate`字符串，您可以执行以下操作：

```
var today = $.datepicker.formatDate("yy/mm/dd", new Date());
return ko.utils.arrayFilter(self.enquiries(), function (enquiry) {
    var parts, enqDate;

    parts = enquiry.EnquiryDate.split(' ')[0].split('/');
    enqDate = parts[2] + '/' + parts[1] + '/' + parts[0];
    return enqDate === today;
}); 
```

以上注意事项：

*   请注意，我得到的是今天的日期，左边是年份。

*   我删除了该位，因为如果过滤器为假`self.onlyToday()`，过滤器不会做任何事情。`self.onlyToday()`我的猜测是你想要在这个过滤器函数之外进行检查，你要么调用这个过滤器，要么不调用。

*   由于`enquiry.EnquiryDate`是日期*和*时间字符串，以空格分隔，首先我们将其拆分为空格，然后我们将第一部分（日期）拆分为`/`. 然后我们按`yy/mm/dd`顺序重新组合。

*   现在我们知道我们可以`===`在字符串上执行以查看查询日期是否等于今天。

当然，您可以使用`Date`对象进行此比较，但无论如何您只需要将`enquiry.EnquiryDate`字符串解析为`Date`对象，并且您只需要日分辨率（而不是毫秒分辨率），因此使用字符串比较似乎是合理的。**

# c - 关于c中“不是陈述”的优化？

> ID：13566662
> 
> 赞同：5
> 
> 时间：2012-11-26T14:16:12.077
> 
> 标签：c, gcc, assembly, compiler-optimization, logical-operators

在学习编译器优化时，我在 C 中`C`使用`Linux`版本`GCC`Tounderstant `gcc version 4.4.5 (Ubuntu/Linaro 4.4.4-14ubuntu5.1)`
( `not a statement`nop) 编写代码。我首先编写了两个代码`y.c`并`x.c`使用`generate their compiled assembly code`选项`gcc -S`。

拳头代码**yc**

```
desktop:~$ cat y.c
main()
{
int i=0;
}
desktop:~$ gcc -S y.c
desktop:~$ 
```

第二个代码**xc**

```
desktop:~$ cat x.c
main()
{
int i=0;

/* Loops and if*/
while(0);
for(;0;);
if(0);

/* Arithmetic Operations */
i * i;
i / i;
i - i;
i + i;
i % i;
 +i;
 -i;

/* Comparison operators */
i == i;
i != i;
i < i;
i > i;
i >= i;
i <= i;

/* Bitwise Operations*/
i ^ i;
i | i;
i & i;
 ~i;
i << i;
i >> i;

/* Address Operatins*/ 
 &i;
 *(&i);
 (&i)[i];

/* Ternary conditional operation*/
 i? i : i;

/* Other Operations*/ 
 sizeof(i);
 (char)i;

/* Not-Logical Operation*/ 
 !i; 

/* Logical AND , OR Operators */ 
// i && i;  // Commented && operation 
// i || i;  // Commented || operation
}
desktop:~$ gcc -S x.c 
```

**注意**：这次最后两行`x.c`被注释掉了。
正如我所期待的那样。它们生成的汇编代码没有区别。我比较`x.s`并`y.s`使用`diff`命令。

```
desktop:~$ diff x.s y.s
1c1
<   .file   "x.c"
---
>   .file   "y.c"
desktop:~$ 
```

但是当我在`x.c`.

```
i && i;  
i || i; 
```

再次使用 -S 选项编译 xc 并与 ys 进行比较

```
desktop:~$ tail  x.c  
 sizeof(i);
 (char)i;

/* Not-Logical Operation*/ 
 !i; 

/* Logical AND , OR Operators */ 
i && i;  // unCommented && operation 
i || i;  // unCommented || operation
}
desktop:~$ gcc -S x.c
desktop:~$ diff x.s y.s
1c1
<     .file    "x.c"
---
>     .file    "y.c"
10,21d9
<     movl    -4(%ebp), %eax
<     testl    %eax, %eax
<     je    .L3
<     movl    -4(%ebp), %eax
<     testl    %eax, %eax
< .L3:
<     movl    -4(%ebp), %eax
<     testl    %eax, %eax
<     jne    .L8
<     movl    -4(%ebp), %eax
<     testl    %eax, %eax
< .L8:
desktop:~$ 
```

**问题**：
我就是不明白为什么表达式`i || i`和`i && i`不等价`'not a statement'`？

为什么编译器将这两个语句转换为可执行文件（我们可以反汇编`objdump`得到相同的代码）。这两个表达式有什么特别之处。它们不包括`=`操作。

他们是否更改（设置/重置）CPU 标志寄存器？我觉得不是！

甚至`/`丢弃可能导致除以零错误的除法运算。

**编辑**：添加答案

`i || i`和`i && i`表达式没有什么特别之处。两者都等同于 NOT A STATEMENT。并且可以通过`GCC compiler` 一些额外的努力来移除。

要删除这个： 标志很有用：`-o2`这 是我的尝试！ `-o3`

```
desktop:~$ gcc -o2 -S y.c 
desktop:~$ gcc -o2 -S x.c 
desktop:~$ diff x.s y.s -y
    .file   "x.c"                         |     .file   "y.c"
    .text                               .text
    .p2align 4,,15                        <
.globl main                         .globl main
    .type   main, @function                     .type   main, @function
main:                               main:
    pushl   %ebp                            pushl   %ebp
    movl    %esp, %ebp                      movl    %esp, %ebp
    popl    %ebp                          |     subl    $16, %esp
                                  >     movl    $0, -4(%ebp)
                                  >     leave 
```

RHS 中的额外行是由于文件之间未对齐。

我还喜欢添加信息，`JAVA`编译器会`C#`在没有任何标志的情况下丢弃此表达式。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:26:29.110

使用 启用优化`-O2`，您应该会看到多余的代码消失。

# mysql - Rails Active Record 订单问题

> ID：13566663
> 
> 赞同：1
> 
> 时间：2012-11-26T14:16:14.947
> 
> 标签：mysql, ruby-on-rails, activerecord

我有一个名为 Event 的模型类和一个字段“when”。我试图在 desc 时返回事件顺序，所以这里是代码。

```
@events = Event.order("'when' DESC") 
```

我使用 MySQL 作为数据库。但**返回的结果没有排序**。

我查看了控制台，并将生成的 sql 归档，这似乎没问题

```
SELECT `events`.* FROM `events` ORDER BY 'when' DESC 
```

我也在控制台中运行这个 sql，它返回了排序结果。“何时”有什么特别之处吗？

如果我将查询更改为`Event.order("events.when DESC")`，则返回排序结果

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:17:20.727

它应该是反引号，而不是单引号。

```
@events = Event.order("`when` DESC") 
```

当您使用它时`single quote`，`when`它不再是一列，而只是一个字符串值。*转义*tableName 和 columnName时，您应该使用反引号而不是单引号。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:20:28.807

您可以删除要添加到该字段的单引号。它应该与整个事物的引号一起使用，例如：

```
@events = Event.order("column_name DESC") 
```

这对于 column_names 通常是正确的，除非在您的情况下 where`when`是保留字。所以你需要反引号：

```
 @events = Event.order("`when` DESC") 
```

但是，我仍然建议您更改您的列名，您最终会遇到使用保留字的复杂情况。`when`在我看来也不是很具有描述性，是：创建/订购事件的时间？活动什么时候开始？活动什么时候结束？也许一个`occurring_at`或`date_occurring`列名会更详细。

# haskell - 数据和新类型之间的惰性/严格性

> ID：13566673
> 
> 赞同：16
> 
> 时间：2012-11-26T14:16:49.517
> 
> 标签：haskell, lazy-evaluation, algebraic-data-types, newtype

我很难理解为什么这两个片段在所谓的“穷人严格分析”下会产生不同的结果。

第一个示例使用`data`（假设一个正确的 Applicative 实例）：

```
data Parser t a = Parser {
        getParser ::  [t] -> Maybe ([t], a) 
    }

> getParser (pure (,) <*> literal ';' <*> undefined ) "abc"
*** Exception: Prelude.undefined 
```

第二种用途`newtype`。没有其他区别：

```
newtype Parser t a = Parser {
        getParser ::  [t] -> Maybe ([t], a) 
    }

> getParser (pure (,) <*> literal ';' <*> undefined ) "abc"
Nothing 
```

`literal x`是一个解析器，如果其参数与第一个标记匹配，则成功使用一个输入标记。所以在这个例子中，它失败了，因为`;`不匹配`a`。但是，该`data`示例仍然看到下一个解析器未定义，而该`newtype`示例没有。

我已经阅读[了 this](https://stackoverflow.com/questions/2649305/why-is-there-data-and-newtype-in-haskell)、[this](https://stackoverflow.com/questions/5889696/difference-between-data-and-newtype-in-haskell)和[this](http://www.haskell.org/haskellwiki/Newtype#The_messy_bits)，但对它们的理解不够深入，无法理解为什么第一个示例未定义。在我看来，在这个例子中，`newtype`比答案*更*懒惰`data`，与答案所说的相反。（至少[还有一个人](https://stackoverflow.com/questions/2649305/why-is-there-data-and-newtype-in-haskell#comment18152293_2650051)也对此感到困惑）。

**为什么切换 from`data`会`newtype`改变这个例子的定义？**

* * *

这是我发现的另一件事：使用这个 Applicative 实例，`data`上面的解析器输出未定义：

```
instance Applicative (Parser s) where
  Parser f <*> Parser x = Parser h
    where
      h xs = 
        f xs >>= \(ys, f') -> 
        x ys >>= \(zs, x') ->
        Just (zs, f' x')

  pure a = Parser (\xs -> Just (xs, a)) 
```

而对于这个实例，`data`上面的解析器*不会*输出 undefined （假设有一个正确的 Monad 实例`Parser s`）：

```
instance Applicative (Parser s) where
  f <*> x =
      f >>= \f' ->
      x >>= \x' ->
      pure (f' x')

  pure = pure a = Parser (\xs -> Just (xs, a)) 
```

* * *

完整的代码片段：

```
import Control.Applicative
import Control.Monad (liftM)

data Parser t a = Parser {
        getParser ::  [t] -> Maybe ([t], a) 
    }

instance Functor (Parser s) where
  fmap = liftM

instance Applicative (Parser s) where
  Parser f <*> Parser x = Parser h
    where
      h xs = f xs >>= \(ys, f') -> 
        x ys >>= \(zs, x') ->
        Just (zs, f' x')

  pure = return

instance Monad (Parser s) where
  Parser m >>= f = Parser h
    where
      h xs =
          m xs >>= \(ys,y) ->
          getParser (f y) ys

  return a = Parser (\xs -> Just (xs, a))

literal :: Eq t => t -> Parser t t
literal x = Parser f
  where
    f (y:ys)
      | x == y = Just (ys, x)
      | otherwise = Nothing
    f [] = Nothing 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-26T15:16:12.610

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-11-26T15:16:50.450

# php - 如何在 Wordpress 中隐藏模板？

> ID：13566676
> 
> 赞同：5
> 
> 时间：2012-11-26T14:17:03.547
> 
> 标签：php, wordpress, wordpress-theming

有没有办法在管理员中隐藏模板文件？

例如，我有一个模板，只有在安装了特定插件时才可用，而且我已经知道如何检查插件是否处于活动状态。但是如何隐藏模板？

例如，我想在下面隐藏“Blogger 重定向”模板：

![图片只是一个例子...](../Images/ed310ab1ca9512bd92634f45d0f0e71e.png)

我找到了几个链接，但所有解决方案似乎都已弃用。

**编辑：** *如果有人对我如何检查 pluin 是否处于活动状态感兴趣，我会使用以下功能：*

```
function isPluginActive($plugin){
        if ( in_array( $plugin, apply_filters( 'active_plugins', get_option( 'active_plugins' ) ) ) )
        {
            return true;
        }
        return false;
    } 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-11-26T14:33:32.363

**更新 - 正如安德鲁在以下评论中指出的那样，请注意：**

> 谨慎使用此代码，如果您有任何页面使用从选择中删除的模板，更新页面将导致它恢复为默认模板

* * *

我不确定是否有 PHP 方法可以做到这一点 - 你必须查看`WP_Theme`类，但从我的第一眼来看，这可能是不可能的，因为为了获取所有模板，类使用了一个名为的内部函数[`scandir()`](http://core.trac.wordpress.org/browser/tags/3.4.2/wp-includes/class-wp-theme.php#L965)它扫描当前主题目录并`.php`从那里获取所有文件。然后它会查找相应的`Template Name:`标识符，如果存在，它将被添加到模板列表中。

因此，我建议您添加一个小 JS，从页面模板选择中删除此选项。这是一个代码片段：

```
function my_remove_page_template() {
    global $pagenow;
    if ( in_array( $pagenow, array( 'post-new.php', 'post.php') ) && get_post_type() == 'page' ) { ?>
        <script>
            (function($){
                $(document).ready(function(){
                    $('#page_template option[value="sidebar-page.php"]').remove();
                })
            })(jQuery)
        </script>
    <?php 
    }
}
add_action('admin_footer', 'my_remove_page_template', 10); 
```

`sidebar-page.php`这将从下拉列表中删除模板。条件是仅在页面的添加和编辑屏幕上添加脚本。

根据您的情况调整并享受:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T14:27:21.863

WordPress 不提供任何挂钩，因此您无法将其从 PHP 中删除。

我能想到的另一种选择是您可以使用 JavaScript 动态删除它。在页面中包含一段 JavaScript `add post`，它将从`select`元素中删除该选项。

我知道这不是一个干净的解决方案，但我认为这是目前唯一可能的方法。

**编辑**：

另一种选择是在插件激活时将模板文件复制到主题目录，并在插件停用时删除模板文件。

这假定模板仅由该插件使用。

# java - 将文件发送到移动客户端应用程序的最佳实践

> ID：13566678
> 
> 赞同：1
> 
> 时间：2012-11-26T14:17:18.120
> 
> 标签：java, web-services, rest, ftp, download

我们正在为移动构建一个后端 Java EE 应用程序，主要是使用 Jersey Restful Web 服务构建所有服务。

我们现在的任务是将Sharepoint上当前存在的一些文件/图像/视频传输到移动设备上，我的问题主要是实现这一目标的最佳实践是什么，我有以下想法

1.  将文件从共享点获取到我们的服务器，然后移动端可以通过 Restful Web 服务流式传输它们
2.  获取文件并将它们放在代理服务器下并通过 Restful Web 服务将 URL 发送到移动设备

真心觉得还有其他更好的方法，请指点我或者发有用的链接

# .net - 通过已建立的连接与防火墙后面的设备对话 - 如何？

> ID：13566684
> 
> 赞同：2
> 
> 时间：2012-11-26T14:17:35.880
> 
> 标签：.net, tcp

防火墙后面的设备建立并维护与我的服务器的**套接字连接。**我通过已建立的连接与设备对话。这种模式叫什么，我在哪里可以获得更多信息、.net 代码示例等？

**背景**- 我们的设备只有串行端口，我们在客户现场使用 GSM 调制解调器。然后，我们从办公室调用每个调制解调器来检索数据。问题是移动宽带（GPRS/UMTS 等），尤其是用于少量数据的 M2M-one 很便宜。电路交换数据（呼叫调制解调器和传真）价格昂贵，在某些国家/地区已弃用、不受支持甚至不可用（泰国）。所以我们正在反转模式并在调制解调器中使用 GPRS+TCP 套接字功能。

**我已经**在我的“自动数据检索器”中实现了这一点，用于发送定义的数据包（例如“给我你的序列号”）并期待对我的请求的响应（等到整个响应以已知字节数和/或已知停止序列）。

**我想要实现**的是类似于串行端口（轮询缓冲区并读取所有新字节）或事件模型（SendBytes / NewBytesReceived）或者更现代的东西（反应式扩展？）。

**我的最终目标**是一个小型服务器，它只做这个，允许多个程序连接到远程设备。然后我可以运行一个“配置”应用程序来配置设备 98，同时允许“自动数据检索器”与设备 13、18 和 27 一起工作。

额外的问题 - 你会给这个服务器/模式起什么名字？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T17:03:21.383

防火墙经过编程，因此它们会将设备启动的任何 tcp 连接的答案转发回原始设备。

防火墙后面的设备必须始终是发起连接的设备。

服务器很简单，只需等待预定义端口中的连接，然后创建一个新线程来处理每个新的传入连接。这样服务器可以同时处理多个连接。

请记住，如果连接长时间处于空闲状态，防火墙可能会失去与原始设备的关联。您可以实现保持活动机制，或者在每次设备空闲时关闭连接。

# css - 当您将鼠标悬停在css中的div之外时，如何使链接出现？

> ID：13566685
> 
> 赞同：0
> 
> 时间：2012-11-26T14:17:36.657
> 
> 标签：css

我在输入特定 div 时无法更改链接的外观。目的是当我将鼠标悬停在特定的 div 上时，链接将出现在 div 中，直到我将鼠标移出 div 区域，然后链接将再次消失。如果有人知道解决方案，请随时回答这个问题。

谢谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:19:12.020

```
div a {display:none;}
div:hover a {display:block;} 
```

当 div 未悬停时，这会隐藏链接。不利的一面是，这会在悬停时改变 div 的高度。一个解决方案是这样的：

```
div a {visibility:hidden;}
div:hover a {visibility:visible;} 
```

或者，您可以为链接提供与 div 相同的背景颜色并在悬停时更改它。

# qt - 创建 QGraphicsView 对象的 QListView

> ID：13566687
> 
> 赞同：1
> 
> 时间：2012-11-26T14:17:45.463
> 
> 标签：qt, model-view-controller, qlistview, qabstractlistmodel

我希望能够创建一个垂直的项目列表，该列表的外观与您在 PowerPoint 中看到的内容相似，它显示了代表每张幻灯片的垂直磁贴列表。

我相信使用 a`QListView`和 a`QAbstractListModel`是解决这个问题的正确方法。我的子`QAbstractListModel`类包含一个`QList`. `QGraphicsViews`因此，每个图块（或幻灯片）都是一个`QGraphicsView`. 我花了很多时间试图在互联网上找到一个类似的例子，我也一直在使用 Qt 的例子，但运气不佳。

这是我的模型课...

我可以在 中收到“ADDING”消息`addgvw`，但在 中无法收到“HERE”消息`data`。

```
myDataModel::myDataModel(QObject *parent) : QAbstractListModel(parent)
{
}

QVariant myDataModel::data(const QModelIndex &index, int role) const
{
    if (!index.isValid())
    {
        return QVariant();
    }

    cGraphicsViewWrapper* gvw = GVWrapperList.at(index.row());

    if (role == Qt::DisplayRole)
    {
        qDebug() << "HERE";

        //Return the QGraphicsView object to display
        return QVariant::fromValue(gvw->gvwView());
    }

    return QVariant();
}

int myDataModel::rowCount(const QModelIndex &parent) const
{
    Q_UNUSED(parent);

    return GVWrapperList.size();
}

void myDataModel::addgvw(int role, cGraphicsViewWrapper& gvw)
{
    if (role == Qt::EditRole)
    {
        beginInsertRows(QModelIndex(), GVWrapperList.size(), GVWrapperList.size());

        GVWrapperList.append(&gvw);

        qDebug() << "ADDING " << GVWrapperList.size() << rowCount();

        endInsertRows();
    }
} 
```

这就是我使用模型类的方式......

在我的小部件类的构造函数中，我调用

```
myGVWWidget::myGVWWidget(QWidget *parent) :
    QWidget(parent),
    ui(new Ui::myPlottingWidget)
{
    ui->setupUi(this);

    Model = new myDataModel(this);

    ui->GWVListView->setModel(Model);

    connectAllSignals();
} 
```

...然后在创建新图块的函数中，创建图块后，我调用...

```
Model->addChart(Qt::EditRole, *gvw); 
```

最后，我的小部件是空的:(

编辑：我想补充一下，因为我认为我可能会被问到，出于多种原因，我对转换为 QPixMap 并显示图块的图像不感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:51:08.730

您的问题是`QAbstractItemView`，朋友希望`DisplayRole`data 是 QString 而不是别的：

[http://doc.qt.digia.com/qt/qt.html#ItemDataRole-enum](http://doc.qt.digia.com/qt/qt.html#ItemDataRole-enum)

您最好的选择是使用`QListWidget`确实可以`QWidget`用于项目的方法：http: [//doc.qt.digia.com/qt/qlistwidget.html#setItemWidget](http://doc.qt.digia.com/qt/qlistwidget.html#setItemWidget)

此外，使用`QGraphicsView`会带来巨大的开销。`QGraphicsView`是一个非常复杂的小部件，`QGraphicsScene`它需要更复杂。如果列表中有多个项目，请为性能下降做好准备。

你真的是在夸大其词。:)

# asp.net-mvc - 如何将 MEF 与 ASP.NET MVC 4 和 ASP.NET Web API 集成

> ID：13566688
> 
> 赞同：29
> 
> 时间：2012-11-26T14:17:57.070
> 
> 标签：asp.net-mvc, asp.net-mvc-4, asp.net-web-api, mef

如何将[托管可扩展性框架](http://mef.codeplex.com/)(MEF) 与 ASP.NET MVC 4 和 ASP.NET Web API 集成到同一个项目中？

考虑一个示例应用程序，其中包含一个 MVC 控制器`HomeController`和一个 Web API 控制器`ContactController`。两者都有 type 的属性`IContactRepository`，它们依赖 MEF 来解决。问题是如何将 MEF 插入 MVC 和 Web API，以便通过 MEF 创建实例。

**家庭控制器：**

```
/// <summary>
/// Home controller. Instruct MEF to create one instance of this class per importer,
/// since this is what MVC expects.
/// </summary>
[Export]
[PartCreationPolicy(CreationPolicy.NonShared)]
public class HomeController : Controller
{
    [Import]
    private IContactRepository _contactRepository = null;

    public ActionResult Index()
    {
        return View(_contactRepository.GetAllContacts());
    }
} 
```

**联系人控制器：**

```
/// <summary>
/// Contact API controller. Instruct MEF to create one instance of this class per importer,
/// since this is what Web API expects.
/// </summary>
[Export]
[PartCreationPolicy(CreationPolicy.NonShared)]
public class ContactController : ApiController
{
    [Import]
    private IContactRepository _contactRepo = null;

    public Contact[] Get()
    {
        return _contactRepo.GetAllContacts();
    }
} 
```

**IContactRepository 和 ContactRepository：**

```
public interface IContactRepository
{
    Contact[] GetAllContacts();
}

[Export(typeof(IContactRepository))]
public class ContactRepository : IContactRepository
{
    public Contact[] GetAllContacts()
    {
        return new Contact[] {
            new Contact { Id = 1, Name = "Glenn Beck"},
            new Contact { Id = 2, Name = "Bill O'Riley"}
        };
    }
} 
```

**接触：**

```
public class Contact
{
    public int Id { get; set; }
    public string Name { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-11-26T14:17:57.070

解决方案是实现[System.Web.Mvc.IDependencyResolver](http://msdn.microsoft.com/en-us/library/system.web.mvc.idependencyresolver%28v=vs.98%29.aspx)和[System.Web.Http.Dependencies.IDependencyResolver](http://msdn.microsoft.com/en-us/library/system.web.http.dependencies.idependencyresolver%28v=vs.108%29.aspx)`Application_Start`并在您的方法中分别使用 ASP.NET MVC 和 ASP.NET Web API 注册您的实现。

在这个例子中，我们将创建一个类`MefConfig`，它实现了一个方法，该方法`RegisterMef`被调用`Application_Start`以安装我们的依赖解析器。该类`MefDependencyResolver`实现了两者`System.Web.Mvc.IDependencyResolver`，`System.Web.Http.Dependencies.IDependencyResolver`并且因此处理了 MVC 和 Web API 的依赖关系解析职责。

**Application_Start，把它放在你的 Global.asax.cs 中：**

```
public class WebApiApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        [...]
        MefConfig.RegisterMef();
    }
} 
```

**MefDependencyResolver 和 MefConfig：**

```
/// <summary>
/// Resolve dependencies for MVC / Web API using MEF.
/// </summary>
public class MefDependencyResolver : System.Web.Http.Dependencies.IDependencyResolver, System.Web.Mvc.IDependencyResolver
{
    private readonly CompositionContainer _container;

    public MefDependencyResolver(CompositionContainer container)
    {
        _container = container;
    }

    public IDependencyScope BeginScope()
    {
        return this;
    }

    /// <summary>
    /// Called to request a service implementation.
    /// 
    /// Here we call upon MEF to instantiate implementations of dependencies.
    /// </summary>
    /// <param name="serviceType">Type of service requested.</param>
    /// <returns>Service implementation or null.</returns>
    public object GetService(Type serviceType)
    {
        if (serviceType == null)
            throw new ArgumentNullException("serviceType");

        var name = AttributedModelServices.GetContractName(serviceType);
        var export = _container.GetExportedValueOrDefault<object>(name);
        return export;
    }

    /// <summary>
    /// Called to request service implementations.
    /// 
    /// Here we call upon MEF to instantiate implementations of dependencies.
    /// </summary>
    /// <param name="serviceType">Type of service requested.</param>
    /// <returns>Service implementations.</returns>
    public IEnumerable<object> GetServices(Type serviceType)
    {
        if (serviceType == null)
            throw new ArgumentNullException("serviceType");

        var exports = _container.GetExportedValues<object>(AttributedModelServices.GetContractName(serviceType));
        return exports;
    }

    public void Dispose()
    {
    }
}

public static class MefConfig
{
    public static void RegisterMef()
    {
        var asmCatalog = new AssemblyCatalog(Assembly.GetExecutingAssembly());
        var container = new CompositionContainer(asmCatalog);
        var resolver = new MefDependencyResolver(container);
        // Install MEF dependency resolver for MVC
        DependencyResolver.SetResolver(resolver);
        // Install MEF dependency resolver for Web API
        System.Web.Http.GlobalConfiguration.Configuration.DependencyResolver = resolver;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-11T20:17:11.857

@aknuds1 答案是迄今为止我见过的将 MEF 集成到 DependencyResolver 中的最佳答案。我能够很容易地扩展它以在 MEF2 中使用基于约定的组合。MefConfig 类是所有需要改变的地方，而且不需要太多。

```
/// <summary>
///     Responsible for configuring MEF for the application.
/// </summary>
public static class MefConfig
{
    /// <summary>
    ///     Registers MEF conventions and exports.
    /// </summary>
    public static void RegisterMef()
    {
        // Register MVC/API conventions
        var registrationBuilder = new RegistrationBuilder();
        registrationBuilder.ForTypesDerivedFrom<Controller>().SetCreationPolicy(CreationPolicy.NonShared).Export();
        registrationBuilder.ForTypesDerivedFrom<ApiController>().SetCreationPolicy(CreationPolicy.NonShared).Export();
        var assemblyCatalog = new AssemblyCatalog(Assembly.GetExecutingAssembly(), registrationBuilder);
        var aggregateCatalog = new AggregateCatalog(assemblyCatalog);
        var container = new CompositionContainer(aggregateCatalog);
        var resolver = new MefDependencyResolver(container);
        // Install MEF dependency resolver for MVC
        DependencyResolver.SetResolver(resolver);
        // Install MEF dependency resolver for Web API
        GlobalConfiguration.Configuration.DependencyResolver = resolver;
    }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-12T18:04:01.983

你可以看看这个[http://kennytordeur.blogspot.be/2012/08/mef-in-aspnet-mvc-4-and-webapi.html](http://kennytordeur.blogspot.be/2012/08/mef-in-aspnet-mvc-4-and-webapi.html)。它解释了如何在 Asp.net MVC 4/Web Api 项目中使用 MEF。还有一个基于此代码的[Nuget 包。](http://kennytordeur.blogspot.be/2012/11/nuget-package-integrated-mef-in-aspnet.html)这样您就可以非常轻松快速地对其进行测试。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-03-21T08:25:15.257

@aknuds1 的解决方案有效，但在*每次 API 调用*时都会泄漏内存。我已经修改了他的解决方案来修复泄漏。

```
public class MefDependencyResolver : System.Web.Http.Dependencies.IDependencyResolver, System.Web.Mvc.IDependencyResolver
{
    private readonly CompositionContainer container;
    private readonly List<Lazy<object, object>> exports = new List<Lazy<object, object>>();
    private readonly object syncRoot = new object();

    public MefDependencyResolver(CompositionContainer container)
    {
        this.container = container;
    }

    public IDependencyScope BeginScope()
    {
        return new MefDependencyResolver(container);
    }

    /// <summary>
    /// Called to request a service implementation.
    /// 
    /// Here we call upon MEF to instantiate implementations of dependencies.
    /// </summary>
    /// <param name="serviceType">Type of service requested.</param>
    /// <returns>Service implementation or null.</returns>
    public object GetService(Type serviceType)
    {
        if (serviceType == null) throw new ArgumentNullException(nameof(serviceType));

        var serviceExport = container.GetExports(serviceType, null, null).FirstOrDefault();
        if (serviceExport == null) return null;

        lock (this.syncRoot)
        {
            exports.Add(serviceExport);
        }

        return serviceExport.Value;

    }

    /// <summary>
    /// Called to request service implementations.
    /// 
    /// Here we call upon MEF to instantiate implementations of dependencies.
    /// </summary>
    /// <param name="serviceType">Type of service requested.</param>
    /// <returns>Service implementations.</returns>
    public IEnumerable<object> GetServices(Type serviceType)
    {
        if (serviceType == null) throw new ArgumentNullException(nameof(serviceType));

        var serviceExports = container.GetExports(serviceType, null, null);
        if (!serviceExports.Any()) return Enumerable.Empty<object>();

        lock (this.syncRoot)
        {
            exports.AddRange(serviceExports);
        }

        return serviceExports.Select(x => x.Value);
    }

    public void Dispose()
    {
        lock (this.syncRoot)
        {
            foreach (var e in exports)
            {
                this.container.ReleaseExport(e);
            }

            exports.Clear();
        }
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-06-13T15:58:01.100

这是我在 MVC4 项目中使用的一种更简单的方法。

```
public static class MefConfig
{
     public static CompositionContainer MefContainer = null;

     public static void Initialise()
     {
          AggregateCatalog cat = new AggregateCatalog();
          cat.Catalogs.Add(new AssemblyCatalog(Assembly.GetExecutingAssembly()));
          MefContainer = new CompositionContainer(cat);
      }
}

public class MefFilterAttribute : ActionFilterAttribute
{
   public override void OnActionExecuting(ActionExecutingContext filterContext)
   {
      MefConfig.MefContainer.ComposeParts(filterContext.Controller);
   }        
} 
```

在 Application_Start 中运行 MefConfig.Initialise() 并在 FilterConfig.RegisterGlobalFilters(GlobalFilterCollection filters) 中放置 filters.Add(new Filters.MefFilterAttribute());

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-09-18T02:31:07.537

我遵循@akanuds1 的回答，但我还必须将 ControllerFactory 更改为：

```
public class MefControllerFactory : DefaultControllerFactory
{
    private readonly CompositionContainer compositionContainer;

    public MefControllerFactory(CompositionContainer compositionContainer)
    {
        this.compositionContainer = compositionContainer;
    }

    protected override IController GetControllerInstance(System.Web.Routing.RequestContext requestContext, Type controllerType)
    {
        var export = compositionContainer.GetExports(controllerType, null, null).SingleOrDefault();

        IController result;

        if (null != export)
        {
            result = export.Value as IController;
        }
        else
        {
            result = base.GetControllerInstance(requestContext, controllerType);
            compositionContainer.ComposeParts(result);
        }

        return result;
    }
} 
```

Glogal.asax.cs

```
protected void Application_Start()
{
    ...
    var container = MefConfig.Register();
    ControllerBuilder.Current.SetControllerFactory(new MefControllerFactory(container));
} 
```

# mongodb - 从 mongodb 数据库中删除表

> ID：13566693
> 
> 赞同：4
> 
> 时间：2012-11-26T14:18:28.657
> 
> 标签：mongodb, command, putty

我对 mongodb 真的很陌生。我想在 mongodb 数据库中的一张表中查看数据。我尝试使用 `db.table_name.remove` `db.table_name.drop`但没有任何效果。反应也很奇怪。

```
function () {
if (arguments.length > 0) {
    throw "drop takes no argument";
}
this.resetIndexCache();
var ret = this._db.runCommand({drop:this.getName()});
if (!ret.ok) {
    if (ret.errmsg == "ns not found") {
        return false;
    }
    throw "drop failed: " + tojson(ret);
}
return true;
} 
```

所以请告诉我完全删除表格的命令。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:23:08.503

您的语法错误，在删除和删除后使用**() 。**响应（结果）应该是**true**或**false**。有关更多信息，请参阅[http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell](http://www.mongodb.org/display/DOCS/Overview+-+The+MongoDB+Interactive+Shell)

# mysql - MySQL SELECT 增量计数器

> ID：13566695
> 
> 赞同：47
> 
> 时间：2012-11-26T14:18:31.363
> 
> 标签：mysql, database, select, counter

这是我的 MySQL 查询：

```
SELECT name FROM table; 
```

我怎样才能同时选择一个增量计数器`name`？预期输出：

```
Jay 1
roy 2
ravi 3
ram 4 
```

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-11-26T14:19:14.080

```
select name,
      @rownum := @rownum + 1 as row_number
from your_table
cross join (select @rownum := 0) r
order by name 
```

这部分：

```
cross join (select @rownum := 0) r 
```

可以在不需要单独查询的情况下引入变量。所以第一个查询也可以分解成两个查询，如下所示：

```
set @rownum := 0;

select name,
      @rownum := @rownum + 1 as row_number
from your_table
order by name; 
```

例如在存储过程中使用时。

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2019-04-26T11:03:33.830

在 MySQL 8 及更高版本中，您还可以使用 [`ROW_NUMBER()`Window 函数](https://dev.mysql.com/doc/refman/8.0/en/window-function-descriptions.html#function_row-number)。

```
SELECT
    name,
    ROW_NUMBER() OVER ()
FROM table 
```

结果：

```
Jay  1
roy  2
ravi 3
ram  4 
```

* * *

如 juergen d 所示，将 an 放入`ORDER BY`确定性查询将是一个好主意。

`ORDER BY`可以独立应用于查询和计数器。所以：

```
SELECT
    name,
    ROW_NUMBER() OVER (ORDER BY name DESC)
FROM table
ORDER BY name 
```

会给你一个按降序排列的计数器。

结果：

```
Jay  4
ram  3
ravi 2
roy  1 
```

* * *

## 回答 #3

> 赞同：11
> 
> 时间：2019-11-22T16:41:53.220

```
SELECT name,
      @rownum := @rownum + 1 as row_number
FROM your_table
   ,
   (select @rownum := 0) r 
```

我更喜欢使用逗号而不是`CROSS JOIN`因为它执行得更快。使用`CROSS JOIN`将添加一个额外的步骤，即向表中添加一列。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2021-01-28T22:14:56.067

`GROUP BY`如果您的查询有语句，则使用交叉连接和逗号的解决方案将不起作用。对于这种情况，您可以使用子选择：

```
SELECT (@row_number := @row_number + 1) AS rowNumber, res.*
FROM
(
  SELECT SUM(r.amount) 
  FROM Results r 
  WHERE username = 1 
  GROUP BY r.amount
) res
CROSS JOIN (SELECT @row_number := 0) AS dummy 
```

# github - 一起工作时避免头部分离

> ID：13566697
> 
> 赞同：1
> 
> 时间：2012-11-26T14:18:38.017
> 
> 标签：github, detach

对于我的课程，我必须和我的搭档一起编写一些代码。为了能够在代码项目上一起工作，我们认为 GitHub 可能是完美的，因为它具有同时处理单个文件的修订和可能性（至少我们认为这是可能的）。

我们将 Github 用于所有 git 内容，当我们中的一个人编写代码时，他首先确保 repo 显示“同步”，然后提交他的内容并再次同步。但是我们中的一个人（或者我们两个人）有时会遇到分离的头部问题。我们俩都不明白我们做错了什么。我们正在研究一个分支（主），所以我认为不应该有任何“分支问题”或类似的东西。

所以基本上，我想知道我们必须做些什么来避免这种事情，因为有时我们也会丢失一些代码。或者如果我们同时处理一个文件做错了。

例子：

1.  我的搭档在“os_mem_drivers.c”和“os_memory_strategies.c”中做了一些事情。
2.  我正在研究“os_memory.c”和“os_memheap_drivers.c”，现在想提交。
3.  因此，我打开了 Github，想要提交并遇到同步冲突（谈论 git rebase 等）

# git - Git：在 git 视觉日志上看不到提交

> ID：13566700
> 
> 赞同：0
> 
> 时间：2012-11-26T14:18:50.363
> 
> 标签：git, gitk, smartgit

我一直在通过玩它的命令和阅读东西来学习 git。这是我可以看到的，我期待一个类似于我在右边所做的图表。

这很令人困惑，因为我看不到其他提交，所以树应该是什么样子？为什么我看不到我的提交？

![在此处输入图像描述](../Images/68b48785253cb1dacb1f2975590875dd.png)

这是我所做的：

*   `c08b318`提交了一个名为 README.md 的文件并推送到 master
*   创建了一个名为`somethingnew`
*   `643f1b0`在分支上修改 README.md`somethingnew`然后提交修改后的文件
*   checkout master 分支做了 2 次提交`1029180`和`ad34cc2`
*   然后移动结帐`somethingnew`创建了一个名为 NewFile.txt 的新文件并提交了该文件`a526cd9`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:43:10.067

Try `gitk --all`，它将显示存储库中的所有分支和标签。

默认情况下，你得到的只是当前分支的祖先。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:38:40.400

Git 提交日志是分支本地的，因此在此处发生合并之前 - 您不会在可视日志中看到该提交，除非您已签出该分支。

```
spiders-iMac:git-practice david$ git checkout master
spiders-iMac:git-practice david$ git log --oneline
f1aa76b Contents added to FileA
3c5a4fc Initial commit on master

spiders-iMac:git-practice david$ git checkout somethingnew
Switched to branch 'somethingnew'

spiders-iMac:git-practice david$ git log --oneline
187cd79 Merge branch 'master' into somethingnew
f1aa76b Contents added to FileA
a8fe187 Added FileB on branch somethingnew
3c5a4fc Initial commit on master

spiders-iMac:git-practice david$ git reflog
187cd79 HEAD@{0}: checkout: moving from master to somethingnew
f1aa76b HEAD@{1}: checkout: moving from somethingnew to master
187cd79 HEAD@{2}: checkout: moving from master to somethingnew
f1aa76b HEAD@{3}: checkout: moving from somethingnew to master
187cd79 HEAD@{4}: merge master: Merge made by the 'recursive' strategy.
a8fe187 HEAD@{5}: checkout: moving from master to somethingnew
f1aa76b HEAD@{6}: commit: Contents added to FileA
3c5a4fc HEAD@{7}: checkout: moving from somethingnew to master
a8fe187 HEAD@{8}: commit: Added FileB on branch somethingnew
3c5a4fc HEAD@{9}: checkout: moving from master to somethingnew
3c5a4fc HEAD@{10}: commit (initial): Initial commit on master
spiders-iMac:git-practice david$ 
```

# javascript - 在注册表 jsp 上生成唯一 ID

> ID：13566705
> 
> 赞同：-1
> 
> 时间：2012-11-26T14:18:56.203
> 
> 标签：javascript, html, jsp

我想在提交表单上生成一个唯一代码（例如：xxxxxxxxxxx xx）。完成注册表中的信息后，应用程序将在另一个表格的输出中生成一个唯一代码。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:23:29.713

使用 javascript math.random() 是您最直接的选择：

```
var random = (Math.random()).toString().split('.')[1] 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T14:21:25.623

有一些已经回答您的问题的帖子 -

[生成唯一 ID](https://stackoverflow.com/questions/9060428/generate-unique-id)

或者你可以参考这里 - [http://www.javapractices.com/topic/TopicAction.do?Id=56](http://www.javapractices.com/topic/TopicAction.do?Id=56)

# windows - Heroku Toolbelt Windows - Rails 控制台命令历史

> ID：13566725
> 
> 赞同：2
> 
> 时间：2012-11-26T14:19:39.260
> 
> 标签：windows, heroku, irb

在 Windows 上使用 Heroku 工具带时是否可以获得 Rails 控制台命令行历史记录？

```
heroku run console 
```

这不适用于使用版本 2.33.1 的 Windows 7。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-31T00:54:16.310

这应该做的工作：

```
heroku run rails c 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-10-24T19:03:57.367

我知道这是 6 年后的事，但我最近为此发布了一个项目。

[Archer：Heroku、Docker 等的 Rails 控制台历史](https://github.com/ankane/archer)

# xcode - Tapku 库：TKCalendarDayTimelineView (iPhone)

> ID：13566726
> 
> 赞同：2
> 
> 时间：2012-11-26T14:19:50.863
> 
> 标签：xcode, ios6, tapku

早上好（下午，晚上）。
我在我的应用程序中使用 TKCalendarMonthView 和 TKCalendarDayTimelineView。
第一个没有任何问题（我使用了[http://developinginthedark.com/posts/iphone-tapku-calendar-markers](http://developinginthedark.com/posts/iphone-tapku-calendar-markers)）。
我对 TKCalendarDayTimelineView 有疑问。网上没有例子。

我初始化 TKCalendarDayTimelineView

```
(.h):

#import "TKCalendarMonthView.h"
#import "TKCalendarDayTimelineView.h"

@interface BDThirdViewController : UIViewController <TKCalendarMonthViewDelegate,      TKCalendarMonthViewDataSource, TKCalendarDayTimelineViewDelegate> {
    TKCalendarMonthView *calendarMonth;
    TKCalendarDayTimelineView *calendarDay;
    .......
}

(.m):
calendarDay = [[TKCalendarDayTimelineView alloc] init];
calendarDay.delegate = self;
calendarDay.frame = CGRectMake(0, 0, 320, 300); 
```

并获得：（图片）[http://index01d.com/ci2m/w85xvg](http://index01d.com/ci2m/w85xvg)

你有任何使用 TKCalendarDayTimelineView 的例子吗？请帮助我，我是ios开发的新手。

提前致谢

# snackjs - 零食分离功能在 IE 中不起作用

> ID：13566727
> 
> 赞同：2
> 
> 时间：2012-11-26T14:19:56.670
> 
> 标签：snackjs

我正在使用`snackjs`图书馆。

`wrap.detach(namespace)``'Object Expected'`在 IE8中抛出 错误。

解释：

```
detach: function (namespace){
      listenerMethod(this, 'detach', namespace, null, true)
      this.data(namespace, null)
      return this
},
function listenerMethod(wrapper, method, namespace, args){
    var data = wrapper.data(namespace)
    if (data)
    snack.each(data, function (listener){
      listener[method].apply(wrapper, args)
    })
    return wrapper
} 
```

传入的第四个参数`listenerMethod(this, 'detach', namespace, null, true)` 是`null`

`listener[method].apply(wrapper, args)` 给出错误也是如此。

这是因为在 IE8

`function.apply(obj , null)`会抛出错误。

# jquery-mobile - jQuery Mobile 中选择列表的“请选择”占位符文本？

> ID：13566728
> 
> 赞同：1
> 
> 时间：2012-11-26T14:19:58.603
> 
> 标签：jquery-mobile

我在 jQuery Mobile 的表单中使用选择列表。我希望默认值为“请选择”或其他一些占位符文本。目前我正在做以下事情：

```
<label class="select">Age</label>
<select>
           <option value="">Please select</option>
           <option value="">18</option>
           <option value="">19</option>
           <option value="">20</option>
           <option value="">21</option>
           <option value="">22</option>
        </select> 
```

但是有没有标准的方法来做到这一点？例如，我不希望用户能够在选择“请选择”选项的情况下提交表单。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-08T12:03:54.047

你可以试试这样：

```
 <option value="-1" selected="selected" disabled="disabled" >Select one...</option> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:24:13.373

Bringing the default one on top of the list is generally good practice. You should assign values to your option's elements. For instance the default one can be 0\.

```
<option value="0">Please select</option> 
```

And than on submit you can check if the value submitted is 0, return false; or something.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:06:16.323

在 jQM 中可以这样做：

```
<option value="" data-placeholder="true">Change Category</option> 
```

# iphone - Apple 推送通知在生产证书中不起作用

> ID：13566734
> 
> 赞同：0
> 
> 时间：2012-11-26T14:20:22.083
> 
> 标签：iphone, xcode, notifications

我遵循： [tutorial-part-12](http://www.raywenderlich.com/3443/apple-push-notification-services-)。它适用于开发证书，但不适用于生产证书。

我已经在我的 php.ini 中更改了沙箱 `ssl://gateway.push.apple.com:2195`。

我用这个步骤创建了 production.pem。

```
$ openssl x509 -in aps_developer_identity.cer -inform der 
    -out PushChatCert.pem

$ openssl pkcs12 -nocerts -out PushChatKey.pem -in PushChatKey.p12 
```

输入导入密码：MAC 验证 OK 输入 PEM 密码：验证 - 输入 PEM 密码：

```
$ cat PushChatCert.pem PushChatKey.pem > ck.pem 
```

然后我将我的 ck.pem 上传到我的共享主机。这没有什么错误，但它不会推送通知。

在我的 php 中，它说：*连接到 APNS 消息已成功传递*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:31:29.150

当使用“实时”服务器而不是沙箱服务器时，您必须使用临时分发证书而不是开发人员证书来构建和签署您的应用程序。

# mysql - 如何使用数据导出 MySQL 模式？

> ID：13566735
> 
> 赞同：32
> 
> 时间：2012-11-26T14:20:24.720
> 
> 标签：mysql

我在 MySQL 查询浏览器中有一个完整的架构，其中包含许多包含数据的表。现在我想将这个包含所有表/数据的完整数据库发送给我的同事。如何将其发送给我的同事，以便他可以将这个完整的模式放置在他的 MySQL Query 浏览器中？

谢谢。

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2012-11-26T14:32:11.983

我不确定您在哪里工作，您可以将其导出到文件，然后发送给您的朋友。（root 是我的本地主机用户名）

```
mysqldump -u root -p --databases DB_NAME >databasename.sql 
```

PS：mysqldump 实际上是您的 /MySQL\MySQL Server 5.6\bin 中存在的可执行文件

例如 [在 Windows 上]

```
C:\Program Files (x86)\MySQL\MySQL Server 5.6\bin\mysqldump.exe 
```

或 [在 Linux 上]

```
/usr/bin/mysqldump 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-11-26T14:29:46.973

您可以使用[mysqldump](http://dev.mysql.com/doc/refman/5.1/en/mysqldump.html)命令。

如果您使用 MySQL Workbench，请打开服务器管理选项卡，您可以使用 GUI 界面从那里 [导出到磁盘。](http://dev.mysql.com/doc/workbench/en/wb-manage-server-export-to-disk.html)

有转储到单个文件或目录的选项，以及是否包含数据。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T14:22:47.117

您可以使用 phpMyAdmin 将数据库导出为 *.sql 文件。

或者编写一个 C++/C#/Java 等程序来生成这样的语句。

[http://fragments.turtlemeat.com/mysql-database-backup-restore-phpmyadmin.php](http://fragments.turtlemeat.com/mysql-database-backup-restore-phpmyadmin.php)

我和龟肉没有任何关系

# r - R在另一个数据框中逐列选择数据框中的列

> ID：13566739
> 
> 赞同：1
> 
> 时间：2012-11-26T14:20:29.950
> 
> 标签：r, subset

尝试对我的数据进行子集化时遇到问题，也许您可​​以帮助我。我需要的是当该列值等于第二个数据框中的列的值时，按列对第一个数据框中的数据进行子集化。

以下是我正在使用的数据框：

```
> head(places)
  Zona   Poble     lat       lon      alt
1    1  Zorita 40.7353 -0.165748  691.867
2    1 Morella 40.6287 -0.113284  955.719
3    1 Forcall 40.6621 -0.209759  753.882
4    2 Benasal 40.3943 -0.126111  848.171
5    2    Cati 40.4532  0.060409  667.610
6    2  Fredes 40.7079  0.167981 1194.730

> head(data)
      date   time stat_id     lat     lon    tempc
1 20121122 000000       1 40.7353 -0.1657  7.98737
2 20121122 000000       2 40.6287 -0.1133  6.49903
3 20121122 000000       3 40.6621 -0.2098  7.72955
4 20121122 000000       4 40.3943 -0.1261  7.98837
5 20121122 000000       5 40.4532  0.0604 10.35480
6 20121122 000000       6 40.7079  0.1680  6.00769 
```

如您所见，数据帧“地点”中的三个第一位置属于 Zona == 1，并与数据帧“数据”中的三个第一行共享纬度/经度。我想在places.dat 上选择与Zona == i 共享纬度/经度的数据行。

我正在尝试的 R 脚本是

```
datos=read.table("data.dat",header=T)
places=read.table("places.dat",header=T)

data=as.data.frame(datos)
place=as.data.frame(pobles)

data$time[data$time == 0] = "000000"

subset(data,data$lat == place$lat[place$Zona == 1]) 
```

因此，子集将在 data.dat 中每次显示三行，但它只选择三行中的两行，如下所示

```
> subset(data,data$lat == place$lat[place$Zona == 1])
         date   time stat_id     lat     lon    tempc
1    20121122 000000       1 40.7353 -0.1657  7.98737
2    20121122 000000       2 40.6287 -0.1133  6.49903
385  20121122  30000       1 40.7353 -0.1657  7.00632
386  20121122  30000       2 40.6287 -0.1133  4.83684
769  20121122  60000       1 40.7353 -0.1657  6.55283
770  20121122  60000       2 40.6287 -0.1133  4.85467
1153 20121122  90000       1 40.7353 -0.1657  6.35216
1154 20121122  90000       2 40.6287 -0.1133  5.66342
1537 20121122 120000       1 40.7353 -0.1657 11.47750
1538 20121122 120000       2 40.6287 -0.1133 10.30310
1921 20121122 150000       1 40.7353 -0.1657 13.87090
1922 20121122 150000       2 40.6287 -0.1133 11.90640
2305 20121122 180000       1 40.7353 -0.1657 10.30840
2306 20121122 180000       2 40.6287 -0.1133  7.61322
2689 20121122 210000       1 40.7353 -0.1657  6.29745
2690 20121122 210000       2 40.6287 -0.1133  6.63173
3073 20121123 000000       1 40.7353 -0.1657  4.78633
3074 20121123 000000       2 40.6287 -0.1133  5.31070
3457 20121123  30000       1 40.7353 -0.1657  6.84001
3458 20121123  30000       2 40.6287 -0.1133  6.88369
3841 20121123  60000       1 40.7353 -0.1657  5.71790 
```

肯定我错过了什么，你能帮我吗？任何想法或提示将不胜感激。

谢谢

数据文件可在此处获得：

*   data.dat [http://ubuntuone.com/7XLDg7woFQKjqiRRJeiuQs](http://ubuntuone.com/7XLDg7woFQKjqiRRJeiuQs)
*   places.dat [http://ubuntuone.com/2mO8TrAbGBzr5jTTLWlxaq](http://ubuntuone.com/2mO8TrAbGBzr5jTTLWlxaq)

**编辑** 根据@AR的回答，我尝试使用此代码来选择数据，但不确定它是否只是正确的方式。

```
for(i in 1:128) {
  for(j in 1:2) {
    a=sqrt((place$lat[i]-datos$lat[j])^2+(place$lon[i]-datos$lon[j])^2)
    n=which.min(a)
    while(n <= 9344) {
      b=cbind(i,n,datos$tempc[n],place$Zona[i])
      n=n+128
    }
  }
} 
```

并得到：

```
> b
       i    n           
[1,] 128 9217 10.1198 30 
```

它只给出最后一个 i 值的值，我想保存所有值。当然这是一个基本的，但我无法弄清楚，请耐心等待，因为我不是一个有经验的 R 用户。再次感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T16:09:41.650

首先，您需要将lon 的小数位四舍五入到 4 位**。**可能这就是您遇到问题的原因：

```
places=read.table("places.dat",header=T)
places=round(places$lon,digits=4)

datos[which((datos$lat==places$lat & datos$lon==places$lon) & places$Zona==1),] 
```

此条件的结果为 146 分。

**编辑 1**（根据肖恩的评论）

我假设在我的回答中，在**某些地方**，lat是圆的而不是长的。

但正如 Sean 所指出的，比较浮动不是一个好主意。最好计算每个**位置**点和**datos**点之间的距离，并选择距离最小的一个，低于一个最小距离（例如**datos 中点**之间距离的一半），作为匹配的一个。

**编辑 2**

尝试这样的事情：

```
b=matrix(nrow=dim(places)[1],ncol=5)
a=c()
data.p=c()
n=c()
for(i in 1:dim(places)[1]) {
  for(j in 1:dim(data)[1]) {
    a[j]=sqrt((places$lat[i]-data$lat[j])^2+(places$lon[i]-data$lon[j])^2)
  }   
  data.p[i]=which.min(a)
  n[i]=min(a)
}
b=cbind(places=1:(dim(places)[1]),data=data.p,distance=n,tempc=data$tempc[data.p],Zona=places$Zona) 
```

比做一些查询：

```
b[which(b[,3]<1),]
b[which(b[,3]<0.00001),] 
```

# c# - 将带有内部连接的 SQL 语句转换为 LINQ

> ID：13566744
> 
> 赞同：0
> 
> 时间：2012-11-26T14:20:44.810
> 
> 标签：c#, sql, linq

我必须使用 LINQ 在 C# 中进行一些查询。我用 SQL 请求尝试了我的逻辑。它看起来像这样：

```
SELECT DISTINCT test_laktationen.lom, test_laktationen.laktanfang, test_laktationen.laktende, b_milch_hms_diagnose.diagnose
FROM            test_laktationen INNER JOIN
                         b_milch_hms_diagnose ON test_laktationen.lom = b_milch_hms_diagnose.lom AND b_milch_hms_diagnose.behanddatum BETWEEN 
                         test_laktationen.laktanfang AND test_laktationen.laktende INNER JOIN
                         b_milch_hms_kalbung ON test_laktationen.lom = b_milch_hms_kalbung.lom AND test_laktationen.laktanfang = b_milch_hms_kalbung.kalbedatum
WHERE        (b_milch_hms_diagnose.diagnose LIKE '6.01.01.%' OR
                         b_milch_hms_diagnose.diagnose LIKE '6.01.02.%' OR
                         b_milch_hms_diagnose.diagnose LIKE '6.01.03.%' OR
                         b_milch_hms_diagnose.diagnose LIKE '6.01.04.%') AND (b_milch_hms_kalbung.gebverlauf = 3 OR
                         b_milch_hms_kalbung.gebverlauf = 4) 
```

这就像它应该的那样工作，但现在我必须从数据表中提出这个请求。LINQ可以做到这一点吗？解决这个问题的好做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:33:39.180

您将需要一个数据上下文来执行直接访问。我会推荐 Linq2Sql 类文件 (*.dbml) 来启动它。使用服务器资源管理器在 Linq2Sql 类中创建数据结构后，您的 linq 语句将如下所示：

```
var context = new MyLinq2SqlContext();

var results = (from lak in context.test_laktationen
    join milch in context.b_milch_hms_diagnose
        on lak.lom equals milch.lom
    join kalbung in context.b_milch_hms_kalbung 
        on lak.lom equals kalbung.lom and lak.laktanfang equals kalbung.kalbedatum
    where 
        (milch.diagnose.StartsWith("6.01.01") ||
        milch.diagnose.StartsWith("6.01.02") ||
        milch.diagnose.StartsWith("6.01.03") ||
        milch.diagnose.StartsWith("6.01.04")) &&
       (kalbung.gebverlaug == 3 || kalbung.geberlauf == 4) &&
       ((milch.behanddatum > lak.laktanfang && milch.behanddatum < lak.laktende) ||     (milch.behanddatum < lak.laktanfang && milch.behanddatum > lak.laktende))
    select new {
            lak.lom, 
            lak.laktanfang,
            lak.laktende,
            milch.diagnose
    }).Distinct(); 
```

这可能需要在最后的“where”子句中进行调整，以确保“between”部分正确。`BETWEEN`不会从 Linq 本地转换为，但只要您可以预测哪个值可能更大，就可以对其进行编码。

# xml - Dradis + XSLT：Microsoft XML 2003：处理

> ID：13566745
> 
> 赞同：4
> 
> 时间：2012-11-26T14:20:46.583
> 
> 标签：xml, xslt, ms-word, ms-office

我想创建一个可以在 Word 中打开的 XML 文件（使用 Word 2003 XML）。我正在尝试将单个图像嵌入到文档中，如下所示：

![在此处输入图像描述][1]

[http://shrani.najdi.si/?3J/Sm/2YDPWrKn/win.png](http://shrani.najdi.si/?3J/Sm/2YDPWrKn/win.png)

我在外部网站上发布了图像，因为我不被允许在这里上传。

问题是，如果我使用类似以下的内容（带有相应的参考），这将起作用：

```
 <pkg:part pkg:name="/word/media/image1.png" pkg:contentType="image/png" pkg:compression="store">
    <pkg:binaryData>iVBORw0KGgoAAAANSUhEUgAAAdoAAAECCAIAAADW64G6AAAAAXNSR0IArs4c6QAAPu1JREFUeF7t</pkg:binaryData>
  </pkg:part> 
```

但是由于我正在从以下位置解析数据：自定义数据 --> XML --> XSLT --> Word，所以我不想使用这种方法，因为它需要我更改 XML 文档中各个位置的引用，这是做不到的。

我想使用以下方法，但它不起作用：

```
 <w:p>
    <w:r>
    <w:pict>
    <w:binData w:name="02000001.jpg">iVBORw0KGgoAAAANSUhEUgAAAdoAAAECCAIAAADW64G6AAAAAXNSR0IArs4c6QAAPu1JREFUeF7t</w:binData>
    <v:shape id="_x0000_i1025" style="width:100%;height:auto" type="#_x0000_t75">
      <v:imagedata src="02000001.jpg"></v:imagedata>
    </v:shape>
</w:pict>
    </w:r>
    </w:p> 
```

这里有问题的行是“”行，这导致了混乱。尝试使用 Word/Oxygen 打开该文档时，出现以下错误：

```
There is no schema or DTD associated with the document. You can create an association either with the Associate Schema action or configuring in the Options the Preferences/Document Type Association list, or by creating a Validation Scenario. 
```

如果我删除该行，文档将正常打开，但图片未显示。如您所见，我正在尝试在 binData 中使用图像的 base64 表示。

我实际上想要做的是处理 Dradis 文档，它看起来像这样：

```
#[Red]#

This is my new vulnerability.

!http://www.google.com/.../test.png! 
```

我直接将它输入到 Dradis 中，所以上面实际上是文本的明文表示。我在 Dradis 中编写了一些进一步的代码，为我执行以下操作（在将数据发送到 XSLT 转换之前）：

```
#[Red]#

This is my new vulnerability.

#[Picture]#
iVBORw0KGgoAAAANSUhEUgAAAdoAAAECCAIAAADW64G6AAAAAXNSR0IArs4c6QAAPu1JREFUeF7t 
```

您可以看到在该链接上可访问的实际图片已下载，并且图片的 base64 表示已插入明文而不是链接中。

接下来发生的事情是将此数据发送到 XSLT，该 XSLT 必须创建可以用 Word 成功打开的 XML 文档。在这里，我必须找到 #[Picture]# 元素，解析它们，然后插入我正在尝试使用的 XML（我发布此消息的实际问题）。

所以我的问题是：如何将上述 XML 代码（不起作用的代码）更改为将在 Word 中成功打开并显示内部黑色图像的表示形式？

Ps：我不确定为什么架构错误，我正在使用以下架构：

```
 <pkg:part pkg:name="/word/document.xml" pkg:contentType="application/vnd.openxmlformats-officedocument.wordprocessingml.document.main+xml">
    <pkg:xmlData>
      <w:document mc:Ignorable="w14 wp14" 
        xmlns:wpc="http://schemas.microsoft.com/office/word/2010/wordprocessingCanvas" 
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
        xmlns:o="urn:schemas-microsoft-com:office:office" 
        xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" 
        xmlns:m="http://schemas.openxmlformats.org/officeDocument/2006/math" 
        xmlns:v="urn:schemas-microsoft-com:vml" 
        xmlns:wp14="http://schemas.microsoft.com/office/word/2010/wordprocessingDrawing" 
        xmlns:wp="http://schemas.openxmlformats.org/drawingml/2006/wordprocessingDrawing" 
        xmlns:w10="urn:schemas-microsoft-com:office:word" 
        xmlns:w="http://schemas.openxmlformats.org/wordprocessingml/2006/main" 
        xmlns:w14="http://schemas.microsoft.com/office/word/2010/wordml" 
        xmlns:wpg="http://schemas.microsoft.com/office/word/2010/wordprocessingGroup" 
        xmlns:wpi="http://schemas.microsoft.com/office/word/2010/wordprocessingInk" 
        xmlns:wne="http://schemas.microsoft.com/office/word/2006/wordml" 
        xmlns:wps="http://schemas.microsoft.com/office/word/2010/wordprocessingShape"
      >
        <w:body> 
```

如果您有任何想法，请告诉我。

# python - 循环遍历多个字典，而不仅仅是 python 中的最后一个字典

> ID：13566747
> 
> 赞同：0
> 
> 时间：2012-11-26T14:20:48.947
> 
> 标签：python, xml, dictionary

我在 python 中的字典有问题，由于“Namit Kewat”，我目前正在从传入的 xml 中获取我想要的信息。当我打印输出时，它列出了它找到的所有东西，每一个都在自己的字典中，这很好。

但是，当我尝试对“输出”字典进行循环以查找所有“活动”键及其包含的值时。它只返回一个值，即在模式中找到的最后一个“活动”的值。

所以我的问题是，如何在所有这些字典上进行迭代或 for 循环等。我希望字典被称为“输出”，并且在我传入的 xml 中会有许多“AssetEquipment”部分。如果字典不是办法，那么请提出更好的解决方案。本质上，我的目标是迭代许多“AssetEquipment”以获取值，然后将其扩展以涵盖 xml 文件中的其他内容，例如“AssetSupport”。所以有很多需要多个版本/实例的组。

谢谢你。

```
import xml.etree.cElementTree as ET
tree = ET.parse('test.xml')
for elem in tree.getiterator():
    if elem.tag=='{http://www.namespace.co.uk}AssetEquipment':
        output={}
        for elem1 in list(elem):
            if elem1.tag=='{http://www.namespace.co.uk}Active':
                output['Active']=elem1.text
            if elem1.tag=='{http://www.namespace.co.uk}Direction':
                output['Direction']=elem1.text
            if elem1.tag=='{http://www.namespace.co.uk}Location':
                for elem2 in list(elem1):
                    if elem2.tag=='{http://www.namespace.co.uk}RoomLocation':
                        for elem3 in list(elem2):
                            if elem3.tag=='{http://www.namespace.co.uk}Room':
                                output['Room']=elem3.text
        print output 
```

示例输入（保持小，因为它太大而无法发布所有内容）：

```
<AssetEquipment>
    <Name>PC123</Name>
    <Active>Yes</Active>
    <Direction>Positive</Direction>
    <Location>
        <RoomLocation>
            <Room>18</Room>
        </RoomLocation>
    </Location>
</AssetEquipment>
<AssetEquipment>
    <Name>PC256</Name>
    <Active>No</Active>
    <Direction>Positive</Direction>
    <Location>
        <RoomLocation>
            <Room>19</Room>
        </RoomLocation>
    </Location>
</AssetEquipment> 
```

样本输出，通过打印：

```
{'Direction': 'Positive', 'Active': 'Yes', 'Room': '18'}
{'Direction': 'Positive', 'Active': 'No', 'Room': '19'} 
```

通过 for 循环：

```
def isactive():
    for key in output:
        print output.get("Active")

No
No 
```

期望的输出：

```
Yes
No 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:33:40.713

两个问题：

1.  您正在覆盖每个 AssetEquipment 的输出字典。它适用于内联 print 语句，但您以后不能循环遍历结果。您应该将每个输出字典保存在列表中。

    ```
    results = []
    for elem in tree.getiterator():
        if elem.tag=='{http://www.namespace.co.uk}AssetEquipment':
            output={}
            results.append(output)
            ... 
    ```

2.  您需要遍历结果列表，而不是遍历单个输出字典的键

    ```
    def isactive():
        for output in results:
            print output.get("Active") 
    ```

# c++ - 将现有 C++ 框架链接到 Objective-C + Cocoa 应用程序

> ID：13566749
> 
> 赞同：0
> 
> 时间：2012-11-26T14:21:13.687
> 
> 标签：c++, objective-c, macos, cocoa, multiplatform

我在学校为 windows 开发了一个工作框架，其中包含 windows 工作所需的所有类和方法。这是几个类的一部分的示例，我不会在这里粘贴所有代码。

Widget.h（基类）

```
class Widget {
    public:
        Widget(...);
        ...
        virtual std::string getLabel() const;
        virtual void setLabel(const std::string label);
        ...
    private:
        std::string m_label;
        Widget* m_parent;
        Measure m_position; // struct: int x, int y
        Measure m_size;
}; 
```

按钮.h

```
class Button : public Widget {
    public:
        Button(...);
        ...
        virtual void setTarget(Widget* target);
        ...
    private:
        Widget* m_target;
}; 
```

LineEdit.h

```
class LineEdit : public Widget {
    public:
        LineEdit(...);
        ...
        virtual void setMaximumLenght(int lenght);
        ...
    private:
        int m_maximumLength;
}; 
```

等等……这些都只是头文件，我在对应的`.cpp`文件里面实现了方法等。

我这段时间的作业是在 Objective-C 和 Cocoa 中为 Mac 的 OS-X 实现它们，因此标头在 OS-X 和 Windows 中都可以使用。我可以自己休息，但我想知道如何在 OS-X 中使用这些头文件，因此只需将实现重写为一个`.m`文件，而不是`.cpp`. 有任何想法吗？我对这个东西很陌生。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:45:13.123

您可以在同一个项目中合并 .cpp 文件和 .m 文件，这意味着如果您的实现没有任何特定于 Windows 的代码，您可以将其添加到项目中并进行编译。还有*Objective-C++*的概念。`.mm`有了它，您可以使用 C++ 和 Objective-C在文件中编写代码并在它们之间进行调用。

另一方面，如果您真的需要在 Objective-C 中实现所有内容，则需要重写头文件以定义 Objective-C 类（不是 C++ 类）以及重写实现。

# python - 线程执行时 Python GUI 没有响应

> ID：13566751
> 
> 赞同：2
> 
> 时间：2012-11-26T14:21:19.470
> 
> 标签：python, multithreading, user-interface, qtablewidget

我有 Python GUI，在一个 for 循环中，我从一些 dll 调用函数，该函数返回用于逐行填充 tableWidget 的值。所有这一切都很好，除了我无法在它仍在填充时滚动表（而 dll 函数计算事物 - 每行 7-8 秒）所以我尝试使用这样的线程：

```
q = Queue.Queue()
for i in (0, numberOfRows):
    threading.Thread(target=self.callFunctionFromDLL, args=(arg1,arg2, q)).start()
    result = q.get()
    ... do something with "result" and populate table row....

def callFunctionFromDLL(self, arg1, arg2, q):
    result = self.dll.functionFromDLL(arg1, arg2)
    q.put(result) 
```

但是直到从 q.get 传递结果之前 GUI 仍然没有响应（functionFromDLL 工作 7-8 秒，并且在 GUI 填充行时我可以滚动表格）。我之前并没有真正使用过线程，所以任何建议或示例如何做到这一点将不胜感激。

我也试过这种方式，同样的事情，当 functionFromDLL 工作时 gui 仍然没有响应：

```
for i in (0, numberOfRows):
    t = threading.Thread(target=self.callFunctionFromDLL, args=(arg1,arg2))
    t.start()
    t.join()
    result = self.result
    ... do something with "result" and populate table row....

def callFunctionFromDLL(self, arg1, arg2):
    self.result = self.dll.functionFromDLL(arg1, arg2) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-27T15:10:56.950

如果您正在使用该`tkinter`模块，您可能会从[Directory Pruner 4](http://code.activestate.com/recipes/578154/)的实施方式中获得一些帮助。为了解决大多数 GUI 库不能很好地与线程一起使用的事实，该配方利用了代码下方列出的一些自定义模块。模块`affinity`、`threadbox`和`safetkinter`提供程序使用的 GUI 库的线程安全包装。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:24:32.470

CPython（你可能拥有的）有一个全局解释器锁，它打败了很多多线程。这是一个已证明难以解决的已知问题。（查找“Python GIL”以获取更多信息。）其他一些实现，例如 Jython，没有这个问题。

# web-services - 在服务器中，每个客户端请求的 3D 渲染静止图像的速度有多快？

> ID：13566756
> 
> 赞同：0
> 
> 时间：2012-11-26T14:21:30.943
> 
> 标签：web-services, 3d, render

我正在尝试制作一项服务，该服务需要在服务器上快速渲染简单的 3D 场景，然后将它们作为 JPEG 返回。它应该能够容纳大量用户（客户端），以便根据客户端请求提供渲染图像。用户->HTML->服务器->（可能是渲染农场）->结果显示。

现在的技术真的可以像衣服一样渲染 3D 场景后，在 5 秒内快速返回吗？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:45:23.460

它还取决于您从哪里加载模型和纹理....如果它们是您的并且您从服务器加载它们，那么应该可以快速运行....将生成渲染图像的服务器端软件也会影响时间取决于它准备场景的速度。下一个问题是服务器功能，当然还有客户端网络连接速度 :)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T17:02:29.937

你的口袋越深，它走得越快（爬行，飞行，以曲速旅行）！但是如果你问类似“我可以为实时光线追踪渲染器构建渲染农场，口袋里有 1000 美元吗？” 然后不 - 技术还没有在这里（或那里）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T23:12:48.493

我在 5 年前使用 DirectX 和 nVidia GPU 制作的一个简单的解决方案可以在动态加载资源的同时每台服务器每秒响应 20 个请求。我们受限于 32 位硬件，因此我们没有足够的内存来保存进程内存中的所有常用资源，因此，资源管理是瓶颈。

对于一个特定的客户，我们在一个大 IP 后面使用 5 台机器，这将占我估计项目预算的一小部分。

有了今天的 64 位内存空间和更强大的 GPU，是的，很有可能做一些中小规模的事情，而花费的成本不超过几台 PC 的价格。

# objective-c - 当我们更新任何 mac 应用程序时，它会重置 NSUserDefault 值与否

> ID：13566759
> 
> 赞同：0
> 
> 时间：2012-11-26T14:21:48.987
> 
> 标签：objective-c, macos, nsuserdefaults

我只是想确保，当我们在 Mac Store 上上传新版本的 mac 应用程序时，它将能够读取通过先前版本存储的用户默认值的先前值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:25:41.523

更新后不应删除您的数据，除非用户先删除应用程序。

# c++ - boost::posix_time::microsec_clock CPU 密集吗？

> ID：13566763
> 
> 赞同：5
> 
> 时间：2012-11-26T14:22:03.027
> 
> 标签：c++, boost

我想使用 Boost 获得毫秒精度的时间。（精度不需要毫秒级，接近即可。）

参考[Local time with milliseconds](https://stackoverflow.com/questions/3134821/local-time-with-milliseconds)等，表示应该使用微秒时钟：

```
boost::posix_time::microsec_clock::local_time(); 
```

根据我的经验，使用标准的、低影响的系统调用（即`::GetTicks()`在 Windows 上）不可能获得精确到微秒的时间（假设有类似的精度）。相反，需要发出 CPU 密集型调用以提高超过毫秒（到微秒）的精度。

正如我所提到的，我不需要微秒级的精度 - 只是有点接近毫秒级的精度。但是，Boost.Date_Time 不提供任何“millisec_clock” - 它提供`second_clock`，并且下一个渐变是`microsec_clock`，中间没有“millisec_clock”。

`microsec_clock`如前所述，如果我使用MILLIseconds 来获取 MILLIseconds，我会受到 CPU 密集型调用的打击吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-24T19:54:36.387

我使用 boost::date_time 对象做了一个辅助对象，用于测量函数内花费的时间，特别是我使用了 microsec_clock::local_time()。

我正在使用这个对象来测量对不同函数的几百万个快速调用（一个压力测试用例），突然间我开始注意到我无法解释我的流程的很多执行时间。经过一些实验，我删除了大部分这些计数器，我的代码的总执行时间从 ~23 分钟到约 12 分钟（约 50% !!）

因此，根据我的经验回答您的问题，microsec_clock::local_time() 很昂贵。

看到这个后，我使用 microsec_clock::universal_time() 而不是 microsec_clock::local_time() 进行了测试，这绝对是我运行时间的改进。它仍然增加了大约 3 分钟，但比 10 分钟要好：P。考虑一下，我想问题是 local_time() 偏移了时间值以考虑时区，在我的情况下不需要（因为我只需要时间差异）。我仍然需要进行测试以检查其他方法是否更快（例如clock_gettime）。

我希望这是您正在寻找的答案类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:43:15.290

根据[相关文档](http://www.crystalclearsoftware.com/libraries/date_time/release_1_33/date_time/posix_time.html)：

> 在大多数 Win32 平台上，它是使用 ftime 实现的。Win32 系统通常无法通过此 API 实现微秒级分辨率。如果更高的分辨率对您的应用程序至关重要，请测试您的平台以查看达到的分辨率。

ftime 似乎不是一个过于繁重的功能（[这是一个关于它如何工作的问题](https://stackoverflow.com/questions/212645/how-does-ftime-windows-internal-time-work)），但我想这取决于你对 CPU 密集型的想法。

# c# - 从发布操作重定向到另一个网站

> ID：13566765
> 
> 赞同：0
> 
> 时间：2012-11-26T14:22:03.473
> 
> 标签：c#, asp.net-mvc, redirect, asp.net-mvc-4

我有一个`post`动作，成功后我想将用户重定向到另一个网站。这是我的操作代码：

```
 [HttpPost]
    public ActionResult RegistartionComplete(Customer customer)
    {
        if (ModelState.IsValid)
        {
            db1.Entry(customer).State = EntityState.Modified;
            db1.SaveChanges();
            return Redirect(@"http://www.google.com");
        }
        return View(customer);
    } 
```

问题是在`db1.SaveChanges()`执行之后我被重定向到同一页面（根据url）但带有一条`Internet Explorer cannot display the webpage`消息。当使用断点进行测试时，我看到它`return Redirect(@"http://www.google.com");`已执行，但它只是将我返回到相同的操作视图。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:50:30.590

看起来一切都应该按预期运行，并且在我的测试中运行良好。我建议尝试以下方法：

*   在不更改实体状态和保存的情况下尝试重定向。如果模型有效，只需执行重定向。
*   可能尝试将返回 View(customer) 包装在 ELSE 块中。我知道如果模型是有效的，它不应该被击中，但我看到了更疯狂的事情发生。

# python - Python进程不释放内存

> ID：13566776
> 
> 赞同：3
> 
> 时间：2012-11-26T14:22:37.140
> 
> 标签：python, python-2.7, sqlalchemy

我有一个包含以下数据的字典，

```
my_dict = {'item_1': <generator object continuation_stripper at 0xda78640>,
           'only_display_attrs': <generator object continuation_stripper at 0xda78690>,
           'item_2': <generator object continuation_stripper at 0xda786e0>} 
```

我正在尝试遍历一个 dict 值`only_display_attrs`，这个 dict 值是一个生成器对象。

这是我的代码，

```
for item in my_dict['only_display_attrs']:
    yield i 
```

注意：`only_display_attrs`是一个`SQLAlchemy`生成器对象。

此循环为 30,000 行数据消耗高达 1100 mb 的内存，并且在手动终止进程之前不会释放内存。

谁能帮我理解这背后的原因。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:29:31.883

相关位是您对产生的值所做的事情。如果你把它们留在身边，那么内存将永远不会被释放。但是在显示的代码中，没有内存被用完（除非`continuation_stripper`代码中有错误）。

# google-maps-api-3 - 信息窗口布局的更改不会反映在地图上

> ID：13566777
> 
> 赞同：0
> 
> 时间：2012-11-26T14:22:42.240
> 
> 标签：google-maps-api-3, google-fusion-tables

我有一个 Google Fusion Table，并正在使用 Google Maps API 在 Google Map 上绘制其数据。

最初，我更改了信息窗口布局，这反映在我自己的域中的地图版本中。

但是，信息窗口布局的后续更改并未显示。

但是，当在融合表编辑器中查看地图视图时，信息窗口确实会显示所做的所有更改。只是我的版本使用了未更新的 API。

这是我编写的信息窗口布局 HTML：

```
<div class='googft-info-window' style='font-family: sans-serif'>
<h4 style="font-size: 16px; margin: 0;">{restaurant}</h4>
<span style="color:#999; font-size: 12px;text-transform:uppercase;">{postcode}</span>
<a href='{website}' target='_blank'>{website}</a><br><br>
Recommended by: <a href='{review_link}' target='_blank'>{review}</a><br>
"{excerpt}"
</div> 
```

如您所见，它只是纯 HTML，所以我认为这不是问题。似乎 API 未能显示信息窗口布局更改。其他一切都按应有的方式工作并按应有的方式进行更新。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-28T08:04:38.247

您是否在 JavaScript 中指定了模板 ID？每个地图选项卡都有自己的信息窗口模板。**您可以通过Tools > Publish**获取其 ID，并查看生成的 URL 的*tmplt*参数。这篇文章有更多细节：

[https://developers.google.com/fusiontables/docs/samples/style_and_template_ids](https://developers.google.com/fusiontables/docs/samples/style_and_template_ids)

# ruby-on-rails - 仅为 RSpec 模型测试加载 ActiveRecord

> ID：13566778
> 
> 赞同：1
> 
> 时间：2012-11-26T14:22:45.963
> 
> 标签：ruby-on-rails, activerecord, rspec-rails

我想加快我的模型测试。在看到这个 [http://iain.nl/testing-activerecord-in-isolation](http://iain.nl/testing-activerecord-in-isolation)之后，我认为如果我只需要 active_record 而不是加载 spec_helper.rb 就可以实现，它会为每个测试文件加载整个 Rails 堆栈. 我正在使用带有 factory_girl 的 rspec-rails。但到目前为止，它对我不起作用。每次我运行一个文件时，整个迁移都会运行，这是不可接受的。在整个迁移运行之前，我会遇到一些错误。有人有更好的主意吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-16T02:24:38.100

我最近做了类似的事情。

看看这是否有帮助：[http ://technorattle.wordpress.com/2013/01/10/activerecord-outside-rails/](http://technorattle.wordpress.com/2013/01/10/activerecord-outside-rails/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-16T02:44:34.360

如果您希望通过不必每次都重新加载 Rails 环境来加快测试速度，您应该考虑使用 Spork、Guard 和 Guard::Spork。Spork 允许您运行一个单独的、“干净的”测试服务器，而 Guard 允许您通过观察文件的更改来保持它在后台运行。

叉叉：[https ://github.com/sporkrb/spork](https://github.com/sporkrb/spork)

卫兵::Spork: [https://github.com/guard/guard-spork](https://github.com/guard/guard-spork)

永远有用的 Railscast：[http ://railscasts.com/episodes/285-spork](http://railscasts.com/episodes/285-spork)

# visual-studio-2010 - 为什么 VS 会为 WCF 客户端的 xs:nonNegativeInteger 属性生成字符串属性？

> ID：13566781
> 
> 赞同：3
> 
> 时间：2012-11-26T14:22:58.753
> 
> 标签：visual-studio-2010, wcf, wsdl, type-conversion

我正在使用 VS2010 构建 WCF 客户端。我们使用的 Web 服务定义了一些作为 xs:nonNegativeInteger 返回的数据。但是，VS2010 在生成 WCF 客户端代码后，会为这些 xs:nonNegativeInteger 属性生成具有字符串类型属性的类。

我想知道为什么会这样，以及是否以及如何告诉 VS2010 将其映射从 xs:nonNegativeInteger 调整为整数而不是字符串。

（我无法更改我们使用的 Web 服务的 wsdl ......而且我也犹豫是否要简单地更改生成的代码以防我们需要更新服务引用，因此通过配置进行某种数据类型映射将是理想的。）

谢谢大家！

我们使用的 WSDL 示例片段：

```
<xs:element minOccurs="0" name="blub" type="xs:nonNegativeInteger" /> 
```

生成的 WCF 客户端代码的示例片段：

```
<System.Xml.Serialization.XmlElementAttribute(DataType:="nonNegativeInteger", Order:=0)>  _

Property blub() As String 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:24:14.610

您似乎已将 SvcUtil 配置为使用.`XmlSerializer`而不是`DataContractSerializer`. MSDN 说`XmlSerializer`会将*xs:nonNegativeInteger序列化为* [字符串](http://msdn.microsoft.com/en-us/library/system.xml.serialization.xmlelementattribute.datatype.aspx)，同时`DataContractSerializer`将[其序列化为 Int64](http://msdn.microsoft.com/en-us/library/ms733112.aspx)（在每个页面中搜索“nonNegativeInteger”）。

如果您出于某种原因不想使用`DataContractSerializer`，最好的选择是利用生成的代理类作为`partial`类并创建一个单独的属性（或`int`或`long`）来封装转换逻辑，而不影响 WCF 如何序列化/反序列化该字段。

顺便说一句：如果这种`string`转换真的让你烦恼，请[在 CodePlex 中投票支持这个问题](http://xsd2code.codeplex.com/workitem/14731)。

# c++ - C++：二进制 std::string 到十进制

> ID：13566785
> 
> 赞同：5
> 
> 时间：2012-11-26T14:23:07.327
> 
> 标签：c++

我想将 64 位二进制字符串转换为 64 位整数（无符号）。在 C++ 中是否有任何库函数可以做到这一点？

编辑：

我用：

```
main()
{
std::string st = "010111000010010011000100010001110110011010110001010111010010010110100101011001010110010101101010" ;

uint64_t number;
number = strtoull (st.c_str (),NULL,2);
cout << number << " " ;

char ch = std::cin.get();
cout << ch ;

   return 0;
} 
```

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T14:29:36.187

您可以使用[`strtoull()`](http://www.cplusplus.com/reference/cstdlib/strtoull/)base 2 的函数（如果您点击链接，则有一个示例）。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-11-26T15:00:08.343

如果你有 C++11 - 你可以使用`std::bitset`例如。

```
#include <iostream>
#include <bitset>

int main()
{
    const std::string s = "0010111100011100011";
    unsigned long long value = std::bitset<64>(s).to_ullong();
    std::cout << value << std::endl;
} 
```

或者`std::stoull`

```
#include <iostream>
#include <string>

int main()
{
    const std::string s = "0010111100011100011";
    unsigned long long value = std::stoull(s, 0, 2);
    std::cout << value << std::endl;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-03-19T17:31:51.327

以下代码可能是将二进制字符串转换为其整数值的最简单方法。在不使用 bitset 或 boost 的情况下，这适用于任何长度的二进制字符串。

```
std::string binaryString = "10101010";  
int value = 0;
int indexCounter = 0;
for(int i=binaryString.length()-1;i>=0;i--){

    if(binaryString[i]=='1'){
        value += pow(2, indexCounter);
    }
    indexCounter++;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-07-24T06:27:39.300

将二进制字符串转换为整数，将二进制字符串（最多 64 位）转换为 long。使用位移位比 pow() 稍微高效一些。

```
#include <iostream>
#include <stdio.h>
#include <string>

using namespace std;

string getBinaryString(int value, unsigned int length, bool reverse) {
    string output = string(length, '0');
    if (!reverse) {
        for (unsigned int i = 0; i < length; i++) {
            if ((value & (1 << i)) != 0) {
                output[i] = '1';
            }
        }
    }
    else {
        for (unsigned int i = 0; i < length; i++) {
            if ((value & (1 << (length - i - 1))) != 0) {
                output[i] = '1';
            }
        }
    }
    return output;
}

unsigned long getInteger(const string& input, size_t lsbindex, size_t msbindex) {
    unsigned long val = 0;
    unsigned int offset = 0;
    if (lsbindex > msbindex) {
        size_t length = lsbindex - msbindex;
        for (size_t i = msbindex; i <= lsbindex; i++, offset++) {
            if (input[i] == '1') {
                val |= (1 << (length - offset));
            }
        }
    }
    else { //lsbindex < msbindex
        for (size_t i = lsbindex; i <= msbindex; i++, offset++) {
            if (input[i] == '1') {
                val |= (1 << offset);
            }
        }
    }
    return val;
}

int main() {
    int value = 23;
    cout << value << ": " << getBinaryString(value, 5, false) << endl;
    string str = "01011";
    cout << str << ": " << getInteger(str, 1, 3) << endl;
} 
```

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-11-26T14:51:45.930

你可以试试这个。如果您不需要它是通用的，您可以指定类型并取消 Number：

```
template <typename Number>
Number process_data( const std::string& binary )
{
    const Number * data_ptr;
    Number data;

    data_ptr = reinterpret_cast<const Number*>(binary.data());
    data = *data_ptr;

    return data;
} 
```

# jquery - jquery string '之间的数组

> ID：13566787
> 
> 赞同：0
> 
> 时间：2012-11-26T14:23:07.797
> 
> 标签：jquery, arrays, jqplot

我是 jQuery 新手，我有一个小问题。我正在使用 jQplot 插件，并且我有代码：

```
var plotName = ['bearShevaPlot', 'haifaPlot', 'tiberiasPlot', 'kfarSabaPlot', 'netanyaPlot', 'rishonLezionPlot', 'rehovotPlot', 'telAvivPlot'];
var chartName = ['bearShevaCity', 'haifaCity', 'tiberiasCity', 'kfarSabaCity', 'netanyaCity', 'rishonLezionCity', 'rehovotCity', 'telAvivCity'];
$.each(plotName,function(a,b){
        chartName[a];
        //console.log(chartName[a] +', '+ b);
        var b = $.jqplot('/*chartName[a]*/', [haifa], {
          seriesColors: ["#FF2B00"],
          title:'',
          seriesDefaults: {showMarker:false,lineWidth:2,shadow:false},
          grid:{background:'#4C4C4C'},
          axes: {
                xaxis: {
                    min: 1,
                    max: 12,
                    tickOptions:{
                              formatString:'%.0f'
                        },
                },
         },
       });
}); 
```

现在我在评论中有chartName[a] (/ *chartName[a]* /) 我需要为这个数组串起字符串，但我不知道如何用它周围的'char(') 来做......

感谢您的帮助，对不起我的英语不好:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:27:13.883

这是你想要的吗？

```
$.jqplot('/*'+chartName[a]+'*/', ... 
```

# wpf - XAML ListView 取消选择的背景颜色不起作用

> ID：13566789
> 
> 赞同：1
> 
> 时间：2012-11-26T14:23:14.610
> 
> 标签：wpf, xaml

我将此代码用于我的列表视图：

```
<Style TargetType="ListViewItem">
    <Style.Resources>
        <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Green"/>
        <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Red"/>
    </Style.Resources>
</Style> 
```

但是红色不起作用。它仍然是默认的灰色。

编辑：

也试过这个：

```
 <Style x:Key="MyListView" TargetType="{x:Type ListView}">
    <Setter Property="ItemContainerStyle">
        <Setter.Value>
            <Style TargetType="ListBoxItem">
                <Style.Resources>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightBrushKey}" Color="Green"/>
                    <SolidColorBrush x:Key="{x:Static SystemColors.HighlightTextBrushKey}" Color="Green"/>
                    <SolidColorBrush x:Key="{x:Static SystemColors.ControlBrushKey}" Color="Red"/>
                    <SolidColorBrush x:Key="{x:Static SystemColors.ControlTextBrushKey}" Color="Red"/>
                </Style.Resources>
            </Style>
        </Setter.Value>
    </Setter>
</Style> 
```

结果相同。

# ios - 如何在PhoneGap textarea中隐藏键盘完成按钮？

> ID：13566791
> 
> 赞同：2
> 
> 时间：2012-11-26T14:23:17.123
> 
> 标签：ios, html, cordova

我有一个文本区域，它位于 UIWebView 中，即在 PhoneGap 纯 html 中。我想在该文本框的焦点上隐藏完成的上一个/下一个按钮.. 怎么样？！

* * *

## 回答 #1

> 赞同：-4
> 
> 时间：2012-11-26T14:26:59.787

You want to read up on html controls of the keyboard in iOS:

[http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html](http://developer.apple.com/library/ios/#documentation/StringsTextFonts/Conceptual/TextAndWebiPhoneOS/KeyboardManagement/KeyboardManagement.html)

# grails - 如何从服务方法中找到运行 Grails 应用程序的主机名？

> ID：13566792
> 
> 赞同：1
> 
> 时间：2012-11-26T14:23:18.940
> 
> 标签：grails, service

我在控制器中使用 request.getServerName() ，但我正在将我的功能移动到服务中。如何找到运行应用程序的主机名？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:27:28.490

If you *know* that the service method will only ever be called from a controller action then you can use the Spring [`RequestContextHolder`](http://static.springsource.org/spring/docs/3.0.x/javadoc-api/org/springframework/web/context/request/RequestContextHolder.html) to get access to the current [`GrailsWebRequest`](http://grails.org/doc/latest/api/org/codehaus/groovy/grails/web/servlet/mvc/GrailsWebRequest.html), and from there the `request` object. But you might be better off passing in the `request` from the controller or simply trusting `grailsApplication.config.grails.serverURL` - ideally services shouldn't depend directly on web-tier classes.

If you need this info in a context where you can't use the injected `grailsApplication` (a constructor, field initializer or static method/closure) then you can access the config via `grails.util.Holders`.

# java - 使用外部包进行 Logback

> ID：13566795
> 
> 赞同：0
> 
> 时间：2012-11-26T14:23:24.183
> 
> 标签：java, logback

我使用 Logback 从集成框架中记录。所有集成都在同一个 Java VM 中运行，并使用一个 logback.xml 进行配置。它们都在单独的包中，我已经对其进行了设置，因此它们都使用滚动文件附加程序（仅使用简单的 class="xyz" 等）登录到自己的文件中。这工作正常。

但是，所有集成都引用了另一个 jar 文件，它是一个共享库。我可以为这个共享库中的类设置一个附加程序，但是将日志转到另一个文件会使跟踪变得非常困难。例如，第一个日志将出现在 integration_one.txt 中，下一个出现在 shared_lib.txt 中，下一个出现在 integration_one.txt 中。

我需要配置 logback，以便共享库日志最终与调用它的集成在同一个文件中。

我能想到的唯一方法是将包 x 中开始的线程中的所有日志记录到文件 y 中，但我不知道可以完成此操作的配置。

有人有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:45:43.653

不幸的是，Logback 不能那样工作。

jar 文件中的类无疑会初始化它们自己的附加程序，并且通常使用它们的完全限定类名来这样做。

控制向其附加日志的文件的配置部分使用该完全限定的类名将日志条目定向到适当的文件。

简而言之，一个类可以将其日志定向到一个或多个附加程序，但我不知道使用第三方代码的任何方式可以根据某些外部因素将相同的类日志记录到不同的附加程序。

如果您在 jar 文件中编写了类，那么您可能会根据上下文向它们传递一个记录器以供使用，但我猜您没有源代码或不想修改它。

# java - 匹配相同数量的代表

> ID：13566799
> 
> 赞同：1
> 
> 时间：2012-11-26T14:23:31.100
> 
> 标签：java, regex

我有一堆电话号码，我希望能够判断一个号码是否看起来“有趣”。我的意思是，一个有重复数字的数字。例如：

```
822222222
822333444
822222999 
```

基本上，822 + 两组相同的三个数字。

我正在用 JAVA 做这个，到目前为止我有这个：

```
if (number.matches("^((822|654|611)\\d{3}\\d{3})$")) 
```

这显然与这些数字匹配，但它也匹配：

```
822315487 
```

这不是一个特殊的数字。（不要注意654和611的数字，我也需要考虑。）

我该怎么办？如何构造一个匹配相同数字 3 次的正则表达式？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T14:29:52.287

核心问题是`\d`匹配任何数字，所以你说的是任何数字的 3x，而不是相同数字的 3x。所以你需要捕捉那个数字，然后重复两次。

```
^822(\d)\1{2}(\d)\2{2}$ 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T14:27:42.620

How about the following for the final six digits:

```
(000|111|222|333|444|555|666|777|888|999){2} 
```

# regex - Perl 正则表达式在模式匹配之前全局插入换行符

> ID：13566800
> 
> 赞同：0
> 
> 时间：2012-11-26T14:23:31.190
> 
> 标签：regex, perl, global

我正在努力在匹配字符串之前插入换行符，该字符串由句点后跟 2 或 3 个字符（字母数字）并以另一个句点结尾。如果可能，这需要是作用于整个文件的单个语句。

就像是 （？）：

```
$contents =~ s/\.{2,3}\./\n\.<what goes here?>\./g; 
```

具体来说，我正在分两步处理包含许多目录记录的文件。步骤 1：从文件中删除所有回车符。第 2 步：查找文本字符串，例如 .AUTH。和.RE。甚至 0.856。并使这些中的每一个都成为新行的开始。我可以通过一系列特定的替换来做到这一点，

```
$contents=~s/\.RE\./\n\.RE\./g;
$contents=~s/\.AUTH\./\n\.AUTH\./g;
$contents=~s/\.TITL\./\n\.TITL\./g; 
```

但我的理解是，我也可以用一条语句更有效地做到这一点（使用正则表达式内置变量？）

谢谢，

汤姆

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:44:02.077

要删除所有换行符，请使用

```
$contents =~ s/\n//g; 
```

要添加所需的换行符，请使用

```
$contents =~ s/(?=[.][a-z\d]{2,3}[.])/\n/ig; 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T14:31:10.243

```
$contents =~ s/(\.\w{2,3}\.)/\n$1/; 
```

使用括号记住匹配的字符串，使用 $1 在替换部分引用它。

# xcode - 奇怪的错误断言失败：(slab->magic == SLAB_MAGIC (bucket_idx))

> ID：13566805
> 
> 赞同：2
> 
> 时间：2012-11-26T14:23:43.327
> 
> 标签：xcode, ios5, gridview, assertion

`IOS-5`我正在使用以下示例代码开发应用程序： [GridView](https://github.com/gmoledina/GMGridView)

```
 Assertion failed: (slab->magic == SLAB_MAGIC (bucket_idx)), function slab_dealloc, file x-alloc.c, line 567. 
```

我更改了代码，出现了这个错误。这个错误是关于什么的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T16:00:39.147

这很可能是内存损坏。我只是遇到了同样的错误，原因是我正在调用`release`我忘记的东西`retain`。

# c++ - 使用 C++ 编译时删除 `restrict` 关键字的宏

> ID：13566807
> 
> 赞同：7
> 
> 时间：2012-11-26T14:23:46.300
> 
> 标签：c++, macros, c-preprocessor

我需要在 C++ 项目中包含一些最初用**C编写的标头。**在头文件中，使用了[`restrict`关键字](http://en.wikipedia.org/wiki/Restrict)，这会导致 C++ 的语法错误。

我正在寻找一个预处理器宏来检查我是否使用 C++ 编译器进行编译并`restrict`在这种情况下删除关键字。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-11-26T14:25:24.610

```
#ifdef __cplusplus
#define restrict
#endif 
```

应该这样做。`restrict`is 不是 C++ 中的关键字，因此`#define`将其设置为空是没有问题的。

或者，正如[Arne Mertz](https://stackoverflow.com/users/1838266/arne-mertz)所建议的，更好的是，拥有

```
extern "C" {
#define restrict
// include C headers here
#undef restrict
} 
```

在 C++ 源代码中包含 C 头文件的位置。

# java - Java - 获取Windows中所有用户的路径

> ID：13566808
> 
> 赞同：2
> 
> 时间：2012-11-26T14:23:47.210
> 
> 标签：java, path, shortcut

我正在努力写入所有用户的快捷方式目录，并且我相信它可以正常工作，但是我获取路径的方式似乎不正确。而且我不知道这是否是检查所有用户路径是否存在的正确方法，或者是否有更好的方法。这应该能够在 windows xp - windows 8 和 windows server 2000 - 2012 上工作。这是代码：

```
 int pathOne = 0;
        int pathTwo = 0;
        String allUserPath = "";

        File sourceOne = new File("C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\");  
        if (sourceOne.exists())
        {
            pathOne = 1;
        }

        File sourceTwo  = new File("C:\\Documents and Settings\\All Users\\Start Menu\\");
        if (sourceTwo.exists())
        {
            pathTwo = 1;
        }

        if (pathOne == 1 && pathTwo == 0)
        {
        allUserPath = "C:\\ProgramData\\Microsoft\\Windows\\Start Menu\\Programs";
        }

        if (pathTwo == 1 && pathOne== 0)
        {
        allUserPath = "C:\\Documents and Settings\\All Users\\Start Menu\\Programs";
        } 
```

更新：做一些研究我发现你可以执行命令行查询。

```
 public static final String REG_QRY_CMD="reg query ";
 public static final String SHORT_CUT_REG_KEY="HKCU\\Software\\Microsoft\\Windows\\CurrentVersion\\Explorer\\Shell Folders";

String str = REG_QRY_CMD+"\""+
            SHORT_CUT_REG_KEY+"\""+ " /v " + "\""+ "Programs" +"\""; 
```

现在这将使我进入当前用户的程序文件夹：示例“C:\Documents and Settings\al\Start Menu\Programs”或“E:\Documents and Settings\meg\Start Menu\Programs”有没有办法我可以切片吗？至少获得“？：\文档和设置\”？这样我至少可以将它添加到所有用户中，而不仅仅是当前用户。这样，猜测工作会更少，效果会更好。谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:00:18.543

在其他语言的系统上，您需要更多。

一种策略是使用当前用户的信息来获取所有用户的目录。

系统信息可以从：

```
System.getProperties().list(System.out); 
```

不幸`System.getProperty("user.home")`的是，只有可能感兴趣。使用该目录，您可以解释所有用户目录。

java.awt.Desktop 也是如此，JDIC 库可能值得研究。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-11-26T14:39:06.273

您应该首先使用安装程序，但您可以使用该代码中的某些内容：

```
 FileSystemView fsv = FileSystemView.getFileSystemView();
    File[] roots = fsv.getRoots();
    for (int i = 0; i < roots.length; i++)
    {
     System.out.println("Root => " + roots[i]);
    } 
```

这将返回根目录的列表。

此外，您可以使用 fsv.getHomeDirectory())，这应该在 Windows 上返回例如“C:\Documents and Settings\daniel\Desktop”。

尽管如此，您应该避免使用“C:”作为先验的系统驱动器。

# c# - 如何在 Microsoft Visual Studio 2012 中使用本地数据库文件添加/编辑/检索数据

> ID：13566815
> 
> 赞同：4
> 
> 时间：2012-11-26T13:48:42.980
> 
> 标签：c#, sql, visual-studio-2012

我想开发使用数据库的应用程序。我在基于 Web 的数据库利用（mysql、pdo、mssql 和 php 和旧式 asp）方面经验丰富（作为业余爱好者），所以我的 SQL 知识相当不错。

我已经做过的事情..

*   创建表单应用程序
*   添加四个文本框（名字、姓氏、电子邮件、电话）
*   添加了数据网格控件
*   使用“Microsoft SQL Server 数据库文件 (SqlClient)”创建了数据库连接
*   创建了一个表，其中的字段对应于四个文本框。

我现在想要做的是，当点击一个按钮时，使用 SQL 插入四个编辑框的内容。我不想使用任何对我隐藏 SQL 的“包装器”代码。我想尽可能地利用我在 SQL 方面的经验。

所以我想我要问的是我现在如何编写必要的代码来运行 SQL 查询以插入该数据。我显然不需要知道 SQL 代码，只需要使用“本地数据库文件”连接来运行 SQL 查询的 c# 代码。

一个问题可能是 - 有没有比使用“Microsoft SQL Server 数据库文件”连接类型更好/更简单的方法（我使用它是因为它看起来是一种无需设置整个sql服务器）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:19:11.040

第一个示例是基于我认为更容易理解的总体视图，但由于易受 SQL 注入的影响，这不是推荐的方法（更进一步的更好方法）。但是，我觉得它更容易理解。

```
private void InsertToSql(string wordToInsert)
  {
        string connectionString = Data Source=myServerAddress;Initial Catalog=myDataBase;Integrated Security=SSPI; User ID=myDomain\myUsername;Password=myPassword;

        string queryString = "INSERT INTO table_name (column1) VALUES (" + wordToInsert + ")"; //update as you feel fit of course for insert/update etc

    using (SqlConnection connection = new SqlConnection(connectionString))
    {
        connection.Open()
        SqlDataAdapter adapter = new SqlDataAdapter();
        SqlCommand command = new SqlCommand(queryString, connection);        

        command.ExecuteNonQuery();
        connection.Close();
    }
} 
```

我还建议将其包装在 try/catch 块中，以确保连接在出错时关闭。

我无法对此进行测试，但我认为没关系！

再次不要在现场执行上述操作，因为它允许 SQL 注入 - 改为使用参数。但是，如果您具有 PHP 背景（只是为了让自己舒服），可能会认为执行上述操作会更容易。

这使用参数：

```
public void Insert(string customerName)
{
try
   {
    string connectionString = Data Source=myServerAddress;Initial Catalog=myDataBase;Integrated Security=SSPI; User ID=myDomain\myUsername;Password=myPassword;

    using (SqlConnection connection = new SqlConnection(connectionString))
    {
    connection.Open();
    connection.Open() SqlCommand command = new SqlCommand( "INSERT INTO Customers (CustomerName" + "VALUES (@Name)", connection);

    command.Parameters.Add("@Name", SqlDbType.NChar, 50, " + customerName +");
    command.ExecuteNonQuery();
    connection.Close();
    }
 catch()
 {
     //Logic in here
 }
 finally()
 {
    if(con.State == ConnectionState.Open)
    {
        connection.Close();
    }
 } 
```

}

然后您只需更改 SQL 字符串即可选择或添加！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:42:58.213

下面是使用参数插入数据，我认为这是一种更好的方法：

```
 var insertSQL = "INSERT INTO yourTable (firstName, lastName, email, phone) VALUES (firstName, lastName, email, phone)";

            string connectionString = "Data Source=myServerAddress;Initial Catalog=myDataBase;Integrated Security=SSPI; User ID=userid;Password=pwd;"

            using (var cn = new SqlCeConnection(connectionString))
            using (var cmd = new SqlCeCommand(insertSQL, cn))
            {
                cn.Open();

                cmd.Parameters.Add("firstName", SqlDbType.NVarChar);
                cmd.Parameters.Add("lastName", SqlDbType.NVarChar);
                cmd.Parameters.Add("email", SqlDbType.NVarChar);
                cmd.Parameters.Add("phone", SqlDbType.NVarChar);

                cmd.Parameters["firstName"].Value = firstName;
                cmd.Parameters["lastName"].Value = lastName;
                cmd.Parameters["email"].Value = email;
                cmd.Parameters["phone"].Value = phone;
                cmd.ExecuteNonQuery();

            } 
```

这是从数据库中选择数据并填充 datagridview：

```
 var dt = new DataTable();

            string connectionString = "Data Source=myServerAddress;Initial Catalog=myDataBase;Integrated Security=SSPI; User ID=userid;Password=pwd;"

            using (var cn = new SqlCeConnection(connectionString )
            using (var cmd = new SqlCeCommand("Select * From yourTable", cn))
            {
                cn.Open();

                using (var reader = cmd.ExecuteReader())
                {
                    dt.Load(reader);

                    //resize the DataGridView columns to fit the newly loaded content.
                    yourDataGridView.AutoSize = true;                                       yourDataGridView.AutoResizeColumns(DataGridViewAutoSizeColumnsMode.AllCells);

                    //bind the data to the grid
                    yourDataGridView.DataSource = dt;
                }
            } 
```

# node.js - 在虚拟吸气剂中添加参数

> ID：13566817
> 
> 赞同：4
> 
> 时间：2012-11-26T14:24:08.197
> 
> 标签：node.js, virtual, mongoose

我想做的是这样的：

```
Schema
.virtual('getSomething')
.get(function(what) {
    if (!what) {
        return this.somethingElse
    } else {
        return this.something[what]
    }
}) 
```

问题是我们不能在虚拟 getter 中传递参数，我怎样才能在不复制代码的情况下实现这样的目标？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-11-26T14:39:11.567

将其添加为[实例方法](http://mongoosejs.com/docs/guide.html#methods)而不是虚拟 getter。

```
schema.methods.getSomething = function(what) {
    if (!what) {
        return this.somethingElse
    } else {
        return this.something[what]
    }
}; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T14:39:29.327

Getter 不接受任何参数，因为它们应该替换正常的“获取属性”功能，不带括号。所以你需要定义一个方法：

```
Schema.methods.getSomething = function(what) {
    if (!what) {
        return this.somethingElse;
    } else {
        return this.something[what];
    }
}; 
```

然后你可以简单地调用：

```
mySchemaObject.getSomething( "test" ); 
```

# c# - unhandled exception: system.typeInitializationException

> ID：13566820
> 
> 赞同：0
> 
> 时间：2012-11-26T14:24:17.703
> 
> 标签：c#, asp.net, selenium, selenium-webdriver

I am using selenium webdriver to navigate to website and send keys. It is working fine in development environment/computer. But I am getting error, when im trying to run through different computer.

```
namespace McaidWebToolImport
{
  class Program
  {
    static void Main(string[] args)
    {
        Console.WriteLine("Enter the batch number: ");
        string batchnumber = Console.ReadLine();

        if (batchnumber != "")
        {
            IWebDriver driver1 = new InternetExplorerDriver(@"C:\IEDriverServer\");
            driver1.Navigate().GoToUrl("http://website.com/webtool/physPop.asp?b=" + batchnumber);

            System.Threading.Thread.Sleep(2000);
            driver1.Quit();                
        }
        else
        {
            Console.WriteLine("Re-run the application with valid batch number");
            Console.WriteLine("\n\nPress Esacpe key (Esc) to exit");                
            while (Console.ReadKey(true).Key != ConsoleKey.Escape);             
        }
    }
  }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:05:51.820

您可以尝试处理异常（try/catch），然后您可以检查 InnerException 并获取有关失败原因的更多详细信息。

可能是您的开发机器上存在但目标机器上不存在的程序集。

# c# - asp.net profile table and german characters

> ID：13566830
> 
> 赞同：0
> 
> 时间：2012-11-26T14:24:49.537
> 
> 标签：c#, asp.net, oracle, encoding, special-characters

I have a question about storing special characters (umlauts, german characters, etc) in the profile tables in SQL with asp.net.

We feed this information into another database with form submissions, and we found that when these fields reached the end database, some characters like ö or ä, etc were coming in as their ascii codes like `&#228;` and `&#246;`.

I looked back into the aspnet_Profile table and looked for the source data and found that the characters had been stored that way in the database.

My question is. Is there a way to store these characters as ö or ä in sql server, or do I need to encode/decode (which?) when I pull them out of the profile to show on the webpage and insert into the end database (which is Oracle and can handle these characters).

if i have to encode/decode each field from the profile table, do i do it when i submit the data to the profile? or when i retrieve the data form the profile for the website/record insert to Oracle?

sorry if it's a newbie question, but i am a newbie!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-05T21:47:41.347

问题是如果您直接构建 SQL 而不是使用参数来传递值。

如果您构建一个 INSERT 语句，例如：

```
string cmd = string.Format("INSERT INTO FOO (col) VALUES ({0})", value); 
```

Oracle 可能没有意识到您正在传递一个 Unicode 字符串并将其转义。这也让您对潜在的 SQL 注入黑客持开放态度，但这是另一回事。

您需要为传递到数据库的任何值使用参数。例如：

```
using (var conn = new OracleConnection(connectionString)) {
    using (var command = new OracleCommand("INSERT INTO FOO (col) VALUES (?)")) {
        command.Connection = conn;
        command.Parameters.AddWithValue("?", value);
        command.ExecuteNonQuery();
    }
} 
```

# css - CSS div 之间的水平间距

> ID：13566831
> 
> 赞同：0
> 
> 时间：2012-11-26T14:24:56.310
> 
> 标签：css

[![](../Images/5c2dd6c3e0199127690817940ff85b6c.png)](https://i.imgur.com/r1LZg.png?1 "链接到图像。")

如您所见，第一个（黄色轮廓）div 和第二个（红色轮廓）div 之间存在间隙。我已经尝试了几件事，但到目前为止没有任何效果。

```
#borderLeft{

    background: url(../01_templates/borderLeft.png) left no-repeat;
    display:inline;
    position relative;
    left:50px;
    float:left;
    width:133px;
    border:1px dotted yellow;

}

#border{

    background: url(../01_templates/borderCenter.png) left repeat-x;
    display:inline;
    position:inherit;
    width:100%;
    border:1px dotted red;
    margin-right:116px;

}

#borderRight{

    background: url(../01_templates/borderRight.png) left no-repeat;
    display:inline;
    float:right;
    position:absolute;
    right:0px;
    border:1px dotted yellow;
    width:133px;

}

<div id="borderLeft"></div>
<div id="border"></div>
<div id="borderRight"></div> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:47:15.273

OP的原始问题可以通过设置s来`font-size: 0`解决。`div`

以下是基于[flexbox](https://css-tricks.com/snippets/css/a-guide-to-flexbox/)的现代方法。

```
.parent {
  display: flex;
}

.parent div {
  border: 1px solid black;
  width: 25%;
}

.parent .double {
  border-color: red;
  flex-grow: 2;
}
```

```
<div class="parent">
  <div></div>
  <div class="double"></div>
  <div></div>
</div>
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:42:16.897

可能是物业造成的`display: inline;`。内联元素总是在它们之间显示不是它们的一部分的空白`padding`或`margin`。

如果这是导致它的原因，这里有一些解决方案。您可以消除代码中元素之间的任何空白，如下所示：

```
<div id="borderLeft"></div><div id="border"></div><div id="borderRight"></div> 
```

或者你可以浮动它们。

```
div { float: left; } 
```

可能还有其他解决方案，但我发现自己通常会避免`display: inline;`——尤其是在结构元素上，比如 div——因为那个空白。

# javascript - Javascript onclick 函数

> ID：13566833
> 
> 赞同：-1
> 
> 时间：2012-11-26T14:25:17.707
> 
> 标签：javascript, jquery, onclick

Q1：我的观点是创建与数组行一样多的按钮。我在这里有一些错误：s

```
<script type="text/javascript">
var myArray = [];

$('#button').click(function(){

var value1 = $('#value1').val();
var value2 = $('#value1').val();
var value3 = $('#value1').val();
var newArray = []; 
var newArray[0] = value1;
var newArray[1] = value2;
var newArray[2] = value3;
myArray.push(newArray);

$("#save").append(
    $("<button>").click(function() {
        myFunction.apply(null, myArray);
    }).text("Click me!")
   );
   });

});

function myFunction(value1,value2,value3)
{
var jsonData = $.ajax({
url: "file.php?value1=" + value1 + "&value2=" + value2 + "&value3=" + value3
dataType: "json",
async: false
}).responseText;
(...)
}
//edited: problem maybe found. I said buttons dont do anything because of this.
OUTPUT: file.php?value1=paul,23,USA&value2=undefined&value3=undefined
//it seems that value1 gets all values :s
</script>

<div id ="save"></div> 
```

我正在寻找一个返回类似这样的解决方案：

例如：

```
<!--<button onclick="myFunction(name,age,country)">Click me</button>-->
<button onclick="myFunction(paul,23,USA)">Click me</button>
<button onclick="myFunction(john,23,USA)">Click me</button> 
```

用更多细节编辑了我的代码

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:33:22.050

这是因为`myArray`' 的第一项是数组 ( `newArray`) 你应该只调用一个数组参数尝试调用下面的函数，它应该可以工作，

```
myFunction.apply(null, newArray);
//or
myFunction.apply(null, [value1,value2,value3]); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:35:57.200

猜猜这有帮助：

```
 <div  id="save">
    </div>      
    <script type="text/javascript">
        function addButtons(myArray){
            for(i=0;i<myArray.length;i++)
            {
                var button = $('<button id="btn_'+i+'" onclick="myFunction(this);">Click me</button>')
                $(button).data('details',myArray[i]).appendTo("#save");
            }
        }
        function myFunction(element){
            alert($(element).data('details'));
        }
    </script> 
```

# iphone - 检测wifi热点iOS

> ID：13566834
> 
> 赞同：3
> 
> 时间：2012-11-26T14:25:20.810
> 
> 标签：iphone, objective-c, ios

有没有办法检测iOS中是否启用了wifi热点？

我可以通过检查格式为 172.20.10.x 的 iphone 的 ip 或状态栏颜色和高度的变化来检测是否有任何活动的热点连接可用

但只是启用热点-检查这种情况是概率

正在关注这里的代码[http://jorudolph.wordpress.com/2011/07/22/ios-detect-personal-hotspot/#respond](http://jorudolph.wordpress.com/2011/07/22/ios-detect-personal-hotspot/#respond)

谁可以帮我这个事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2016-11-29T11:40:39.913

如果任何设备连接到热点，您可以通过以下方式收到短信：-

```
UIApplication *app = [UIApplication sharedApplication];
UILabel *subviews12 = [[app valueForKey:@"statusBar"] valueForKey:@"doubleHeightLabel"]; 
```

# java - FingerPaint Erasing 显示一条黑线

> ID：13566837
> 
> 赞同：1
> 
> 时间：2012-11-26T14:25:25.390
> 
> 标签：java, android, graphics

早上好，

我的部分应用程序具有写下一些手写笔记的能力。我正在使用指纹示例中的片段在我的应用程序中实现“橡皮擦”：

```
mPaint.setXfermode(new PorterDuffXfermode(
        PorterDuff.Mode.CLEAR));
mPaint.setStrokeWidth(45);
mPaint.setStrokeCap(Paint.Cap.ROUND); 
```

问题是每当我擦除用户已擦除的黑色路径时。一旦用户拿起他们的手指，它就消失了，但在他们擦除时它就在那里。我的朋友告诉我，PorterDuff 模式不应该实时使用，但我不相信他。这是我的更多代码，以防我做了一些愚蠢的事情：

```
mPaint = new Paint();
mPaint.setAntiAlias(true);
mPaint.setDither(false);
mPaint.setColor(Color.BLACK);
mPaint.setStyle(Paint.Style.STROKE);
mPaint.setStrokeJoin(Paint.Join.ROUND);
mPaint.setStrokeCap(Paint.Cap.BUTT);
mPaint.setStrokeWidth(6);
mBitmap = Bitmap.createBitmap(800, 480,Bitmap.Config.ARGB_8888);
bBitmap = Bitmap.createBitmap(800, 480,Bitmap.Config.ARGB_8888);
bBitmap.eraseColor(Color.WHITE);
mCanvas = new Canvas(mBitmap);
mPath = new Path();
mBitmapPaint = new Paint();
maxX = maxY = 100;
minX = 750;
minY = 400;

//

private void touch_up() {
    mPath.lineTo(mX, mY);
    mCanvas.drawPath(mPath, mPaint);
    mPath.reset();
}

//

protected void onDraw(Canvas canvas) {    
    canvas.drawBitmap(bBitmap, 0, 0, null);
    canvas.drawBitmap(mBitmap, 0, 0, mBitmapPaint);
    canvas.drawPath(mPath, mPaint);
} 
```

有可能做我想让这个橡皮擦做的事情吗？有一个更好的方法吗？我的朋友真的是对的吗？

此外，我尝试将白色绘制为擦除，但它不起作用，因为有时用户正在标记下方的图像。我可以通过并使每个白色像素都透明，但这似乎效率极低。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-10-25T23:36:03.500

我找到了一种正确执行此操作的方法，它可以用手指擦除，而不会出现黑色笔划。这是我的解决方案：

```
@Override
public boolean onTouchEvent(MotionEvent event) {
    float x = event.getX();
    float y = event.getY();

    switch (event.getAction()) {
    case MotionEvent.ACTION_DOWN:
        if(isEraseMode()){
            mPaint.setXfermode(new PorterDuffXfermode(PorterDuff.Mode.CLEAR));
        }
        touch_start(x, y);
        invalidate();
        break;
    case MotionEvent.ACTION_MOVE:
        touch_move(x, y);
        if(isEraseMode()){
            mPath.lineTo(mX, mY);
            mCanvas.drawPath(mPath, mPaint);
            mPath.reset();
            mPath.moveTo(x, y);            
                }
        invalidate();
        break;
    case MotionEvent.ACTION_UP:
        touch_up();
        invalidate();
        break;
    }
    return true;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-27T20:55:39.567

好的，所以我想出了一个解决方案。我会把这个留给遇到类似问题的人：

```
case MotionEvent.ACTION_DOWN:
mPaint.setStrokeWidth(25);
            mPaint.setXfermode(new PorterDuffXfermode(
                    PorterDuff.Mode.CLEAR));
            mCanvas.drawCircle(x, y, 10, mPaint);
            isErase = true;
            invalidate();
        }
        touch_start(x, y);
        invalidate();
        break;
case MotionEvent.ACTION_MOVE:   
        if(isErase)
        {
            mCanvas.drawCircle(x, y, 20, mPaint);
        }
        else{
            touch_move(x, y);
        }invalidate();
        break; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-12T17:44:12.783

我也有同样的问题。

最后，我想出了解决方案。不要使用从 传递的画布`onDraw()`，而是使用`mCanvas`在构造函数中创建的画布。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-01-30T17:15:27.353

（解决方法）它会让你变得不透明。初始化画布后，可能在`onCreate`您的活动中。 `myCanvasView.setAlpha(0.99f);`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-11-17T03:54:38.583

我同意@Rovers，只需`canvas`以这种方式更改：

```
@Override
protected void onDraw(Canvas canvas) {
    canvas.drawBitmap(canvasBitmap, 0, 0, canvasPaint);
    if (!erase) {
        canvas.drawPath(drawPath, drawPaint);
    } else {
        drawCanvas.drawPath(drawPath, drawPaint);
    }
} 
```

有两种 canvas into`onDraw`方法 -->`drawCanvas`和`canvas`.

# autofac - 我可以使用 autofac 添加特定于租户的控制器吗？

> ID：13566838
> 
> 赞同：1
> 
> 时间：2012-11-26T14:25:29.507
> 
> 标签：autofac, multi-tenant

我开始使用 autofac 的多租户集成，我有一个问题：我可以添加一个仅适用于特定租户的控制器吗？我知道您可以覆盖在基本容器中注册的控制器，但我想要一个仅对注册的租户可用的控制器？那可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-27T17:39:38.490

虽然我还没有尝试过，但我相信您可以通过一些手动注册来做到这一点。

问题是，如果您使用自动注册主容器中的所有控制器，`builder.RegisterControllers(theAssembly)`那么所有控制器将自动被拾取 - 包括特定于租户的控制器。（假设特定于租户的租户与其他所有内容都在程序集中。）

为了方便您自己，您可能希望将特定于租户的内容拆分为单独的程序集。然后要获得仅适用于一个租户的控制器，它会是这样的：

```
var builder = new ContainerBuilder();
builder.RegisterControllers(commonControllerAssembly);
var appContainer = builder.Build();
var tenantStrategy = new MyTenantIdentificationStrategy();
var mtc = new MultitenantContainer(tenantStrategy, appContainer);

// Register the tenant-specific stuff when you configure the tenant.
mtc.ConfigureTenant(
  "tenant-1",
  b => b.RegisterControllers(tenantControllerAssembly));

// And don't forget to set the resolver.
DependencyResolver.SetResolver(new AutofacDependencyResolver(mtc)); 
```

就像任何其他特定于租户的依赖项一样。

当 MVC 尝试解析控制器的实例时，它从 DependencyResolver 执行，它将以多租户方式运行，并且只有在正确的租户发出请求时才能解析控制器。如果其他租户向该控制器发出请求，控制器将不会在已注册组件列表中找到，因此它们会收到错误消息。

请注意，如果您将控制器放在主应用程序程序集未引用的单独程序集中，您可能还需要将其告知 ASP.NET 编译系统，否则将无法正确找到控制器类型。将其添加到`system.web/compilation/assemblies`列表中：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
    <system.web>
        <compilation>
            <assemblies>
                <add assembly="The.Name.Of.Your.Assembly.Here" />
            </assemblies>
        </compilation>
    </system.web>
</configuration> 
```

但是，就像我说的，我还没有尝试过。我只做过控制器覆盖。

# google-analytics - 谷歌分析事件跟踪报告夸大的事件值

> ID：13566843
> 
> 赞同：1
> 
> 时间：2012-11-26T14:25:38.857
> 
> 标签：google-analytics

我们最近在我们的网站上免费发布了两种字体（尽管建议可选择捐赠）。我决定我们应该使用事件功能通过 Google Analytics 跟踪下载，所以我们最终将相应的 JS 片段添加到下载表单（提交时），类似于以下内容：

```
_gaq.push(['_trackEvent', 'Typeface', 'Download', 'Typeface #1', parseInt($('input[name=amount]').val(), 10) || 0]); 
```

我还决定我们不妨使用 GA 来跟踪捐赠，因此您可能已经注意到可选捐赠金额作为事件值参数发送。已经有一个浏览器端的纯数字验证，如果它为空（NaN），它会将其设置为 0，因此我们完全确定它始终是一个整数（参数的必需类型）。

我在我们的 GA 配置文件中配置了两个不同的目标（每种字体一个），使用两个不同的事件作为它们各自的条件，正如我一直在阅读的关于该主题的每个指南中所建议的那样。

然而，一些报告的数据似乎有些夸大。据 GA 称，截至目前，总共 550 个事件中有 455 个独特事件，这似乎还可以，但显然它的价值**超过了 100 万美元**。而且，相信我，我们还没有收到这么多的钱，至少现在还没有。

根据 GA：*事件价值是一个事件或一组事件的总价值。它是通过将每个事件的值乘以事件发生的次数来计算的。*

我以为我可以为同一事件的不同实例设置单独的值，甚至 GA 文档也让我相信他们的例子，所以我真的不明白为什么它被报告为如此夸大的总价值。

我的假设有问题吗？这是我想要完成的正确方法吗？我是否应该忘记使用这种方法跟踪捐款，而改用我也一直在阅读的电子商务功能？

我没有检查任何捐赠成功完成的验证，所以我只剩下一个估计，我可以接受。也许有人开玩笑地注销了一些夸张的金额，然后从未完成捐赠过程？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T15:14:27.300

您的假设是正确的：您可以为每个事件设置单独的值，并且“报告根据每个事件计数添加总值”（如[doc](https://developers.google.com/analytics/devguides/collection/gajs/eventTrackerGuide#Values)中所述）。

您的方法的主要问题是您提到的那个：您在表单验证、确认之前甚至在您告诉访问者必须通过 PayPal 进行捐赠之前计算捐赠。所以是的：有些人可能注销了一些夸大的金额，或者根本没有完成捐赠过程。

我建议您在 PayPal 付款后使用电子商务跟踪，以避免未经确认的捐赠跟踪以及使用目标值来监控金额的重复数据删除。

# c# - ShowDialog 与耦合 Minimize 使应用程序在“Alt + Tab”列表中消失

> ID：13566848
> 
> 赞同：1
> 
> 时间：2012-11-26T14:25:52.737
> 
> 标签：c#, wpf

在我的 WPF 应用程序中，我有一个普通`MainWindow`的设置按钮。单击“设置”按钮时，我想要一个单独的“设置”窗口来打开模式。

```
public partial class MainWindow : Window
{
    //...

    // On Settings button click ...
    var settingsWindow = new SettingsWindow();
    settingsWindow.Owner = this;
    settingsWindow.ShowDialog();
} 
```

尽管事实上，这`SettingsWindow`不仅仅是一个小的“确定/取消”对话框，我希望它是模态的（所以我使用`ShowDialog()`），因为在应用程序流程继续之前需要完成一些配置内容。`SettingsWindow`带有最小/最大/关闭按钮的普通窗口也是如此。

如果用户最小化`SettingsWindow`，`MainWindow`不仅应该被推到后台，而且也应该被最小化。这样做可以正常工作：

```
public partial class SettingsWindow : Window
{
    // ...
    protected override void OnStateChanged(EventArgs e)
    {
        base.OnStateChanged(e);
        if (WindowState == WindowState.Minimized && Owner != null)
        {
            Owner.WindowState = WindowState.Minimized;
        }
        if (WindowState == WindowState.Normal && Owner != null)
        {
            Owner.WindowState = WindowState.Normal;
        }
    }
} 
```

当`SettingsWindow`和`MainWindow`最小化时，我可以通过在图标上单击鼠标将它们恢复为正常 WindowState，但我无法通过使用“Alt + Tab”来实现这一点，因为应用程序在此列表中消失了。在“Win-Key + Tab”列表中，该应用程序仍然存在。

是否可以将应用程序保留在“Alt + Tab”列表中？`SettingsWindow.WindowStyle`所以`SingleBorderWindow`没有`ToolWindow`。_

我知道，这个问题与[此](https://stackoverflow.com/questions/3760571/showdialog-makes-app-window-disappear-from-windows-alt-tab-list)类似，但目标有点不同。

# .net - WPF DataBinding - 绑定到更改引用对象的代码隐藏变量

> ID：13566851
> 
> 赞同：0
> 
> 时间：2012-11-26T14:26:07.863
> 
> 标签：.net, wpf, data-binding, datacontext, selecteditem

**我想做的事：** 我有一个 ListBox 绑定到一个`ObservableCollection<MyClass>`. 当我选择一个项目时，我想在一些标签中显示它的一些属性。这里的步骤是什么？我已将标签的内容设置为`{Binding Path=PropertyName}`. 他们应该是什么`DataContext`？

**我打算怎么做：**我在窗口的代码隐藏中保留了一个私有变量，`MyClass selectedItem`我希望所有绑定都指向该变量及其属性。在我看来，在代码逻辑中绑定到具有明确含义的变量，而不是绑定到表示元素的选定项，这似乎更“语义”。

此变量可以并且将在任何给定时间引用不同的 MyClass 实例（我将在 ListBox SelectionChanged 处理程序中更改它）。我希望绑定反映这一点 - 始终指向 selectedItem 当前引用的实例的属性。这会*起作用*吗？绑定是否总是指向变量指向的对象？或者它会指向我设置绑定时变量正在引用的对象吗？（后者是我的猜测）

**我能想到的可能替代方案：**绑定到列表框的 SelectedItem 而不是引用它的变量。如果这是要走的路，如何使其类型安全？如何确保绑定知道它不是使用通用 ListBoxItem，而是使用 MyClass 实例，所以它可以看到它的属性？需要这个吗？

有什么建议或解释为什么我很愚蠢，或者有经验的人提供的替代方法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-26T14:35:51.357

我建议使用您的替代方法，我认为这是做您想做的事情的常用方法。如果您未在代码隐藏或 XAML 中填写您的 ListBox，则 SelectedItem 属性将保存 MyClass 实例而不是 ListBoxItem 实例。

然后，您可以将 ListBox 的 SelectedItem 属性作为标签的 DataContext，或者在 ViewModel 中创建一个 MyClass 类型的属性，将其绑定到 SelectedItem 属性（Mode=TwoWay）。然后你可以像这样绑定到它的属性：

```
<Label Text="{Binding Path=MySelectedItem.Text}"/> 
```

在这种情况下，标签的 DataContext 必须是 ViewModel。

# c# - C# 中的嵌套命名空间

> ID：13566854
> 
> 赞同：1
> 
> 时间：2012-11-26T14:26:13.517
> 
> 标签：c#, .net, visual-studio-2010

[这个](https://stackoverflow.com/a/13466505/258482)对另一个问题的回答是什么意思？

> 是的，可以创建嵌套命名空间。但是，我相信这样的首选方法是创建一个资源文件
> 
> 这为您带来了额外的好处，即无需更改代码即可进行更改，并支持多种语言。

我正在创建几个命名空间，我希望它们都在一个命名空间（`MyNamespace`）下，但我不想去更改所有代码以添加嵌套接口，并且命名它们`MyNamespace.N1`与智能感知不太兼容。

编辑：我的主要问题是`namespace MyNamespace.N1 { }`似乎不适用于重命名和类似的东西。它甚至是真正的嵌套命名空间声明吗？

基本问题：带有句点的命名空间声明是两个命名空间。那么，为什么当我重命名它时，它对重命名不正确。我的问题可能含糊不清，但我有这样一个问题，我认为肯定会有很多其他人遇到它。如果没有，那么只需关闭它，我会尝试以其他方式解决它。

* * *

我试图弄清楚如何将项目中的所有名称空间放在一个名称空间下。因此，您将使用`MyProject.MyN1.MyClass`. 如果我声明命名空间`namespace MyProject.MyN1 { }`，然后尝试重命名它，智能感知只会将“MyProject”视为命名空间，MyN1 是外围设备。但我真的想重命名“MyN1”，它不喜欢这样做。

好吧，我试过了，现在我不确定我的问题是什么。正如我所描述的，它工作正常。我认为如果我尝试在命名空间声明中添加或删除一个句点，它不会正确重命名它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-28T20:26:51.600

一种可能可行的方法是使用全局查找和替换。您实际尝试做的是将两个命名空间重命名为一个，但它不会让您这样做。

# c++ - 为什么我的程序中的枚举之一具有奇怪的值 131075？

> ID：13566855
> 
> 赞同：0
> 
> 时间：2012-11-26T14:26:13.833
> 
> 标签：c++

我确实调试了这段代码：

```
result = conn_process(conn, 1, 0);
if (result == CG_ERR_OK) continue;
if (result == CG_ERR_TIMEOUT)
{
    break;   // i'm here!
} 
```

正如我在调试器中一样，`break;`我认为这`result == CG_ERR_TIMEOUT`是真的。在当地人中，我确实看到：

```
 result  131075  unsigned int 
```

在 Watch 我确实看到：

```
 CG_ERR_TIMEOUT  error: identifier 'CG_ERR_TIMEOUT' out of scope 
```

去定义向我展示了这样的代码：

```
enum {
CG_ERR_OK = 0,
CG_ERR_INTERNAL = CG_RANGE_BEGIN,
CG_ERR_INVALIDARGUMENT,
CG_ERR_UNSUPPORTED,
CG_ERR_TIMEOUT,
CG_ERR_MORE,
CG_ERR_INCORRECTSTATE,
CG_ERR_DUPLICATEID,
CG_ERR_BUFFERTOOSMALL,
CG_ERR_OVERFLOW,
CG_ERR_UNDERFLOW,
CG_RANGE_END
}; 
```

所以我只是想知道为什么 CG_ERR_TIMEOUT == 131075。多么奇怪的神奇数字？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T14:28:23.220

Because CG_RANGE_BEGIN is 131072 (which is 0x20000).

```
enum {

    CG_ERR_OK = 0,
    CG_ERR_INTERNAL = CG_RANGE_BEGIN,   // == 131072 
```

From now on every enum value is the previous one plus 1:

```
 CG_ERR_INVALIDARGUMENT,             // == 131072 + 1 = 131073
    CG_ERR_UNSUPPORTED,                 // == 131073 + 1 = 131074
    CG_ERR_TIMEOUT,                     // == 131074 + 1 = 131075
    CG_ERR_MORE,                        // etc.
    CG_ERR_INCORRECTSTATE,
    CG_ERR_DUPLICATEID,
    CG_ERR_BUFFERTOOSMALL,
    CG_ERR_OVERFLOW,
    CG_ERR_UNDERFLOW,
    CG_RANGE_END

}; 
```

# javascript - 目标链接 href="" 与 jQuery

> ID：13566856
> 
> 赞同：0
> 
> 时间：2012-11-26T14:26:14.660
> 
> 标签：javascript, jquery

我正在尝试使用 jQuery 来定位以下内容：

```
<link rel="stylesheet" href="css/test.css"> 
```

我不知道如何设置默认路径（css文件夹）？

```
<button data-button="test">Just a Test</button>

<script>
var button = $('button'),
    link = $('link'),
    stylesheet = $(this).data('button');

    button.on('click', function() {
        console.log(this);
        link.attr('href', stylesheet + '.css');
});
</script> 
```

现在，只有当 css 位于 root 中时，这才会在按钮单击时更改 css ... 那么我如何告诉他 CSS 默认路径位于“css/”。

试图寻找没有成功。

PS 一个与 JS 相关的问题，但与问题标题无关。

什么是更好和正确的：

```
var $something = $('#something');
or
var something = $('#something'); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T14:30:18.473

就这么简单

```
link.attr('href', 'css/' + stylesheet + '.css'); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-11-26T14:31:15.767

如果要切换样式表，则应改用[备用样式表](http://www.w3.org/Style/Examples/007/alternatives.en.html)。

```
<link rel="alternate stylesheet" href="css/test1.css">
<link rel="alternate stylesheet" href="css/test2.css" disabled> 
```

在 jQuery 中，您可以删除/添加`disabled`属性以切换样式表：

```
var links = $("link[rel='alternate stylesheet']");
var button = $("button");

button.on('click', function() {
    links.filter(":disabled").prop("disabled", false).siblings().prop("disabled", true);
}); 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-11-26T14:30:06.280

为什么不简单地`css/`在代码本身中提及路径

```
link.attr('href', 'css/'+stylesheet + '.css'); 
```

要回答你的另一个问题，

`var $something`并且`var something`都是有效的变量名。你的选择。

# java - XML 数字签名和 JAX-WS

> ID：13566857
> 
> 赞同：2
> 
> 时间：2012-11-26T14:26:15.940
> 
> 标签：java, xml, web-services, jax-ws, digital-signature

我正在开发一个 JAX-WS Web 服务，它必须根据 XML 数字签名规范验证传入的 SOAP 消息。我必须操纵传入的消息以匹配在签名之前对引用所做的一些转换，并且未在 XML 文档中报告。我使用 JDOM 来做到这一点。我注意到一个奇怪的行为，我可以验证第一条传入的消息，但随后的消息（签名和引用）验证失败。如果我重新启动应用程序服务器（Websphere），我可以验证第一条消息。这个问题是否与后续 Web 服务调用之间共享的脏数据有关？

这是 SOAP 处理程序的实现：

```
@Override
public boolean handleMessage(SOAPMessageContext messageContext) {

    // get the message from the context 
    SOAPMessage message = messageContext.getMessage(); 

    // is an outgoing message?
    Boolean isOutgoing = (Boolean) messageContext.get(MessageContext.MESSAGE_OUTBOUND_PROPERTY);

    if(!isOutgoing){
        // incoming message...

        // Retrieve the SOAP part of the incoming message
        SOAPPart soapPart = message.getSOAPPart();

        InputStream inStream = null;

        try {

            Document doc = null;           
            // Retrieve the SOAP Envelope of the incoming message
            Source source = soapPart.getContent();  

            inStream = ((StreamSource)source).getInputStream();
            // Instantiate a Document containing the SOAP Envelope
            DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
            dbf.setNamespaceAware(true);
            DocumentBuilder db = dbf.newDocumentBuilder();
            doc = db.parse(inStream); 

            // Use JDOM to retrieve the CommandMessage element and add the xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" namespace declaration
            org.jdom2.input.DOMBuilder jdomBuilder = new org.jdom2.input.DOMBuilder();                  
            org.jdom2.Document jdomDocument = jdomBuilder.build(doc);
            org.jdom2.Element jdomBodyElement = jdomDocument.getRootElement().getChild("Body", org.jdom2.Namespace.getNamespace("soap", "http://schemas.xmlsoap.org/soap/envelope/"));              
            org.jdom2.Element jdomCommandMessageElement = jdomBodyElement.getChild("CommandMessage", org.jdom2.Namespace.getNamespace("", "http://www.cryptomathic.com/ckms"));             
            jdomCommandMessageElement.addNamespaceDeclaration(org.jdom2.Namespace.getNamespace("xsi", "http://www.w3.org/2001/XMLSchema-instance"));
            // Instantiate W3C Document to be validated
            org.jdom2.Document jdomSignedDocument = new org.jdom2.Document(jdomCommandMessageElement.detach());     
            org.jdom2.output.DOMOutputter outputter = new org.jdom2.output.DOMOutputter();
            Document signedDocument = outputter.output(jdomSignedDocument);
            // Find Signature element
            NodeList nl = signedDocument.getElementsByTagNameNS(XMLSignature.XMLNS, "Signature");

            // Create a DOMValidateContext and specify a KeyValue KeySelector and document context
            DOMValidateContext valContext = new DOMValidateContext(new KeyValueKeySelector(), nl.item(0)); 

            // Create a DOM XMLSignatureFactory that will be used to unmarshal the 
            // document containing the XMLSignature 
            XMLSignatureFactory fac = XMLSignatureFactory.getInstance("DOM");

            // unmarshal the XMLSignature
            XMLSignature signature = fac.unmarshalXMLSignature(valContext);

            boolean coreValidity = signature.validate(valContext);                                      

            // Check core validation status
            if (coreValidity == false) {
                System.out.println("Signature failed core validation"); 
                boolean sv = signature.getSignatureValue().validate(valContext);
                System.out.println("signature validation status: " + sv);
                // check the validation status of each Reference
                Iterator i = signature.getSignedInfo().getReferences().iterator();
                for (int j=0; i.hasNext(); j++) {
                    Reference ref = (Reference) i.next();
                    boolean refValid = ref.validate(valContext);
                    System.out.println("ref["+j+"] validity status: " + refValid);
                }
            } else {
                System.out.println("Signature passed core validation");
            }

        } catch (Exception e) {
            // TODO Auto-generated catch block
            e.printStackTrace();
        } finally {
            try {
                inStream.close();
            } catch (IOException e) {
                // TODO Auto-generated catch block
                e.printStackTrace();
            }
        }

    }

    return true; 
} 
```

这是第一个请求的控制台输出：

> 签名通过核心验证

但是对于后续请求：

> 签名未通过核心验证
> 
> 签名验证状态：false
> 
> ref[0] 有效性状态：false

问候，乔瓦尼

# function - Scala中的函数类型“约束”返回值

> ID：13566858
> 
> 赞同：1
> 
> 时间：2012-11-26T14:26:25.877
> 
> 标签：function, scala, compiler-construction, types

仅仅基于抽象函数/方法的类型，似乎可以有效地断言实现方法的合法返回*值。*我直觉地觉得（大部分）下面的编译器行为是有道理的，但我希望能清楚地解释为什么我应该能够断言

```
def f[T](t: T): T 
```

只能是标识函数（除了 E 类也可以编译）。我可以理解*我们对 T 一无所知，*因为它是无限的，但这种解释存在差距。报告“发现 scala.Int(42) required Int”的编译器并没有让我更接近光明。

```
trait A{ def f[T](t: T): T }
// compiles
class B extends A{ override def f[Int](t: Int): Int = t }
// does not compile
class C extends A{ override def f[Int](t: Int): Int = t + 1 }
// does not compile
class D extends A{ override def f[Int](t: Int): Int = 42 }
// compiles
class E extends A{ override def f[Int](t: Int): Int = 42.asInstanceOf[Int] }
// compiles
class F extends A{ override def f[Int](t: Int): Int = identity(t) } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:41:40.410

您的示例中的问题是您`Int`的示例中的**不是**正常的 32 位整数类型（即`scala.Int`）；相反，您有一个类型参数，它恰好被命名为`Int`. 这让您感到困惑：您认为您的`Int`is `scala.Int`，但事实并非如此，它是一个名称混乱的类型参数。

所以，例如这个：

```
class C extends A{ override def f[Int](t: Int): Int = t + 1 } 
```

并不意味着您正在定义一个采用`scala.Int`; 您正在定义一个带有名称的类型参数的方法`Int`。您可以给它任何其他名称，例如`X`，那么它将完全相同：

```
class C extends A{ override def f[X](t: X): X = t + 1 } 
```

它不编译是因为类型参数没有约束，所以编译器不知道该类型有`+`方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:58:37.843

Jesper 对主要问题有正确的答案：`[Int]`没有填写`Int`for的类型`T`，而是创建了一个新的泛型类型参数，名称令人困惑`Int`。

但我也有一个附录：

您有点太相信用户不会做鬼鬼祟祟的事情，即使它在运行时有效。

```
def f[T](t: T): T = (t match {
  case i: Int => -i
  case s: String => s.reverse
  case b: Boolean => !b
  case o: Option[_] => None
  case s: Seq[_] => throw new Exception("Ack")
  case _ => t
}).asInstanceOf[T] 
```

不再完全是身份功能，是吗？如果您禁止匹配和`asInstanceOf`异常等，那么它必须是身份。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-11-26T16:56:49.080

由于还没有人回答问题的另一部分：

通常，此属性称为*参数*性，您从中获得的保证称为*自由定理*。顺便说一句，这仅在您忽略类型大小写（和未标记的副作用）时才成立，因此 Scala 的很大一部分不计算在内。

# objective-c - 在“现代”Objective-C 中将 iVar 放在哪里？

> ID：13566862
> 
> 赞同：83
> 
> 时间：2012-11-26T14:26:34.813
> 
> 标签：objective-c

Ray Wenderlich 的“iOS6 by Tutorials”一书有一个关于编写更“现代”的 Objective-C 代码的非常好的章节。在一个部分中，这些书描述了如何将 iVar 从类的头文件移动到实现文件中。由于所有 iVar 都应该是私有的，这似乎是正确的做法。

但到目前为止，我找到了 3 种方法。每个人都在做不同的事情。

1.) 将 iVars 放在花括号内的 @implementantion 下（这就是书中的做法）。

2.) 将 iVars 放在不带花括号的 @implementation 下

3.) 将 iVars 放在 @implementation 上方的私有接口中（类扩展）

所有这些解决方案似乎都可以正常工作，到目前为止我还没有注意到我的应用程序的行为有任何差异。我想没有“正确”的方法，但我需要编写一些教程，我只想为我的代码选择一种方法。

我应该走哪条路？

**编辑：我在这里只谈论 iVars。不是属性。只有对象本身需要的附加变量，并且不应暴露于外部。**

代码示例

1)

```
#import "Person.h"

@implementation Person
{
    int age;
    NSString *name;
}

- (id)init
{
    self = [super init];
    if (self)
    {
        age = 40;
        name = @"Holli";
    }
    return self;
}
@end 
```

2)

```
#import "Person.h"

@implementation Person

int age;
NSString *name;

- (id)init
{
    self = [super init];
    if (self)
    {
        age = 40;
        name = @"Holli";
    }
    return self;
}
@end 
```

3)

```
#import "Person.h"

@interface Person()
{
    int age;
    NSString *name;
}
@end

@implementation Person

- (id)init
{
    self = [super init];
    if (self)
    {
        age = 40;
        name = @"Holli";
    }
    return self;
}
@end 
```

* * *

## 回答 #1

> 赞同：163
> 
> 时间：2012-11-26T21:12:25.423

将实例变量放在`@implementation`块中或类扩展中的能力是“现代 Objective-C 运行时”的一个特性，每个版本的 iOS 和 64 位 Mac OS X 程序都使用它。

如果要编写 32 位 Mac OS X 应用程序，则必须将实例变量放在`@interface`声明中。不过，您可能不需要支持 32 位版本的应用程序。自 5 年前发布的 10.5 (Leopard) 版本以来，OS X 就支持 64 位应用程序。

因此，假设您只编写将使用现代运行时的应用程序。你应该把你的 ivars 放在哪里？

## 选项 0：在`@interface`（不要这样做）

首先，让我们回顾一下为什么我们*不想*将实例变量放在`@interface`声明中。

1.  将实例变量放在 an`@interface`中会向该类的用户公开实现的细节。这可能会导致那些用户（甚至在使用自己的类时您自己！）依赖于他们不应该依赖的实现细节。（这与我们是否声明 ivars 无关`@private`。）

2.  将实例变量放入 an`@interface`使得编译时间更长，因为任何时候我们添加、更改或删除 ivar 声明，我们都必须重新编译每个`.m`导入接口的文件。

所以我们不想将实例变量放在`@interface`. 我们应该把它们放在哪里？

## 选项 2：在`@implementation`没有大括号的情况下（不要这样做）

接下来，让我们讨论您的选项 2，“将 iVars 放在 @implementantion 下，不要使用花括号块”。这不**声明**实例变量！你在谈论这个：

```
@implementation Person

int age;
NSString *name;

... 
```

该代码定义了两个全局变量。它不声明任何实例变量。

`.m`如果您需要全局变量，即使在您的文件中定义全局变量也很好`@implementation`- 例如，因为您希望所有实例共享某些状态，例如缓存。但是你不能使用这个选项来声明 ivars，因为它没有声明 ivars。（此外，您的实现私有的全局变量通常应该被声明`static`以避免污染全局命名空间和链接时错误的风险。）

这留下了您的选择 1 和 3。

## 选项 1：`@implementation`带大括号（Do It）

通常我们想使用选项 1：把它们放在你的主`@implementation`块中，用大括号，像这样：

```
@implementation Person {
    int age;
    NSString *name;
} 
```

我们把它们放在这里是因为它使它们的存在保密，防止了我前面描述的问题，而且通常没有理由将它们放在类扩展中。

那么我们什么时候想使用您的选项 3，将它们放在类扩展中？

## 选项 3：在类扩展中（仅在必要时执行）

几乎没有理由将它们放在与类的`@implementation`. 我们不妨把它们放在`@implementation`那种情况下。

但有时我们可能会编写一个足够大的类，以至于我们想将其源代码分成多个文件。我们可以使用类别来做到这一点。例如，如果我们正在实现`UICollectionView`（一个相当大的类），我们可能决定将管理可重用视图（单元和补充视图）队列的代码放在单独的源文件中。我们可以通过将这些消息分成一个类别来做到这一点：

```
// UICollectionView.h

@interface UICollectionView : UIScrollView

- (id)initWithFrame:(CGRect)frame collectionViewLayout:(UICollectionViewLayout *)layout;
@property (nonatomic, retain) UICollectionView *collectionViewLayout;
// etc.

@end

@interface UICollectionView (ReusableViews)

- (void)registerClass:(Class)cellClass forCellWithReuseIdentifier:(NSString *)identifier;
- (void)registerNib:(UINib *)nib forCellWithReuseIdentifier:(NSString *)identifier;

- (void)registerClass:(Class)viewClass forSupplementaryViewOfKind:(NSString *)elementKind withReuseIdentifier:(NSString *)identifier;
- (void)registerNib:(UINib *)nib forSupplementaryViewOfKind:(NSString *)kind withReuseIdentifier:(NSString *)identifier;

- (id)dequeueReusableCellWithReuseIdentifier:(NSString *)identifier forIndexPath:(NSIndexPath*)indexPath;
- (id)dequeueReusableSupplementaryViewOfKind:(NSString*)elementKind withReuseIdentifier:(NSString *)identifier forIndexPath:(NSIndexPath*)indexPath;

@end 
```

好的，现在我们可以实现 in 中的主要`UICollectionView`方法，`UICollectionView.m`并且可以实现管理可重用视图的方法`UICollectionView+ReusableViews.m`，这使我们的源代码更易于管理。

但是我们的可重用视图管理代码需要一些实例变量。这些变量必须暴露给 中的主类`@implementation`，因此编译器将在文件`UICollectionView.m`中发出它们。`.o`而且我们还需要将这些实例变量暴露给 中的代码`UICollectionView+ReusableViews.m`，以便这些方法可以使用 ivars。

这是我们需要类扩展的地方。我们可以将可重用视图管理 ivars 放在私有头文件中的类扩展中：

```
// UICollectionView_ReusableViewsSupport.h

@interface UICollectionView () {
    NSMutableDictionary *registeredCellSources;
    NSMutableDictionary *spareCellsByIdentifier;

    NSMutableDictionary *registeredSupplementaryViewSources;
    NSMutableDictionary *spareSupplementaryViewsByIdentifier;
}

- (void)initReusableViewSupport;

@end 
```

我们不会将此头文件发送给我们库的用户。我们只需将其导入 in`UICollectionView.m`和 in `UICollectionView+ReusableViews.m`，以便*需要*查看这些 ivars 的所有内容都可以看到它们。我们还引入了一个方法，我们希望 main`init`方法调用该方法来初始化可重用视图管理代码。我们将从`-[UICollectionView initWithFrame:collectionViewLayout:]`in调用该方法`UICollectionView.m`，并在 in 中实现它`UICollectionView+ReusableViews.m`。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-11-26T20:11:32.083

选项2完全错误。这些是全局变量，而不是实例变量。

选项 1 和 3 基本相同。这完全没有区别。

选择是将实例变量放在头文件还是实现文件中。使用头文件的好处是您有一个快速简便的键盘快捷键（Xcode 中的 Command + Control + Up）来查看和编辑您的实例变量和接口声明。

缺点是您在公共标头中公开了类的私有详细信息。这在某些情况下是不可取的，特别是如果您正在编写代码供其他人使用。另一个潜在的问题是，如果您使用的是 Objective-C++，最好避免将任何 C++ 数据类型放在头文件中。

实现实例变量在某些情况下是很好的选择，但对于我的大部分代码，我仍然将实例变量放在标题中，因为这对我作为在 Xcode 中工作的编码人员来说更方便。我的建议是做任何你觉得对你更方便的事情。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-11-26T14:31:46.420

很大程度上它与 ivar 对子类的可见性有关。子类将无法访问`@implementation`块中定义的实例变量。

对于我计划分发的可重用代码（例如库或框架代码），我不希望公开实例变量以供公众检查，然后我倾向于将 ivars 放在实现块中（您的选项 1）。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2012-11-26T14:30:59.337

您应该将实例变量放在实现之上的私有接口中。选项 3。

要阅读的文档是[Objective-C 中的编程](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/ProgrammingWithObjectiveC/EncapsulatingData/EncapsulatingData.html#//apple_ref/doc/uid/TP40011210-CH5-SW6)指南。

从文档中：

> 您可以定义没有属性的实例变量
> 
> 最佳做法是在您需要跟踪值或另一个对象的任何时候对对象使用属性。
> 
> 如果确实需要在不声明属性的情况下定义自己的实例变量，可以将它们添加到类接口或实现顶部的大括号内，如下所示：

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-11-26T14:31:07.623

公共 ivars 应该真正在 @interface 中声明属性（可能是您在 1 中所想的）。私有 ivars，如果您正在运行最新的 Xcode 并使用现代运行时（64 位 OS X 或 iOS），可以在 @implementation (2) 中声明，而不是在类扩展中声明，这很可能是你的重新考虑在3。

# c# - how to execute sql select statement in c#

> ID：13566868
> 
> 赞同：1
> 
> 时间：2012-11-26T14:26:49.510
> 
> 标签：c#, sql, sql-server, database, select

i have a little problem here: i have a combobox that gets its values from column in database and i use it to enter data back to another palce in database like

```
comboBox2.DataSource = ds1.Tables[0];
comboBox2.DisplayMember = "DoctorName";
comboBox2.ValueMember = "DoctorCode";
comboBox2.BindingContext = this.BindingContext; 
```

this fill the combobox with the name of doctors and the value will be the code of doctor then

```
 SqlConnection con = new SqlConnection(@"Data Source=.\SQLEXPRESS;AttachDbFilename=c:\users\administrator\documents\visual studio 2010\Projects\Clinic\Clinic\Clinc.mdf;Integrated Security=True;Connect Timeout=30;User Instance=True");
        con.Open();
        SqlCommand cmd1 = new SqlCommand("SELECT   Doctors.DoctorCode, Doctors.DoctorName, SessionReservations.SessionCode, SessionReservations.PatientCode, SessionReservations.ExaminationCode, SessionReservations.DoctorCode AS Expr1, SessionReservations.SessionMonth, SessionReservations.SessionYear   FROM  Doctors INNER JOIN   SessionReservations ON Doctors.DoctorCode = SessionReservations.DoctorCode    WHERE  (Doctors.DoctorCode = @DoctorCode) AND (SessionReservations.SessionMonth = @month) AND (SessionReservations.SessionYear = @year)", con);
        SqlDataAdapter da2 = new SqlDataAdapter(cmd1);
        DataSet ds2 = new DataSet();

        try
        {

            da2.InsertCommand.Parameters.Add("@DoctorCode", SqlDbType.Int).Value = Convert.ToInt32(comboBox2.SelectedValue);
            da2.InsertCommand.Parameters.Add("@month", SqlDbType.Int).Value = comboBox1.SelectedValue;
            da2.InsertCommand.Parameters.Add("@year", SqlDbType.Int).Value = textBox2.Text;

            da2.Fill(ds2);
            cmd1.ExecuteReader();
            con.Close();
} 
```

this code is for selecting specific rows and the select statment is working right in sql manager but while running it gives error that

> "System.NullReferenceException: Object reference not set to an instance of an object. at Clinic.DoctorMoneyCall.button1_Click(Object sender, EventArgs e) in C:\Users\Administrator\documents\visual studio 2010\Projects\Clinic\Clinic\DoctorMoneyCall.cs:line 45"

i just don't understand what's going wrong

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T15:17:34.690

似乎您正在尝试运行选择命令，但您正在将参数添加到插入命令。

```
 da2.SelectCommand.Parameters.Add("@DoctorCode", SqlDbType.Int).Value = Convert.ToInt32(comboBox2.SelectedValue);
        da2.SelectCommand.Parameters.Add("@month", SqlDbType.Int).Value = comboBox1.SelectedValue;
        da2.SelectCommand.Parameters.Add("@year", SqlDbType.Int).Value = textBox2.Text; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:30:54.743

错误消息意味着您使用的对象之一为空。con 对象是否正确初始化？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:31:26.623

您似乎在该文档的第 45 行传递了一个为 null 的变量。确保所有值都不为空。

# rpc - at-most-once and exactly-once

> ID：13566869
> 
> 赞同：13
> 
> 时间：2012-11-26T14:26:51.963
> 
> 标签：rpc, semantics, execution

I am studying Distributed Systems and when it comes to the RPC part, I have heard about these two semantics (at-most-once and exactly-once). I understand that the at-most-once is used on databases for instances, when we don't want duplicate execution.

First question:

How is this achieved? How does the server know that it shouldnt execute the request again? It might be a duplicate but it might be a legitimate request as well.

The second question is:

What is the difference between the two semantics in the title? I can read :). I know that at-most-once might not be executed at all but, what does exactly-once do that guarantees the execution?

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2020-11-20T10:44:26.760

对于您的第二个问题，以下是对不同[类型的消息语义](https://www.ably.io/blog/achieving-exactly-once-message-processing-with-ably/#types-of-messaging-semantics)的一个很好的解释：

**最多一次语义：**从工程复杂性的角度来看，最容易实现的语义类型，因为它可以通过即发即弃的方式完成。系统的组件很少需要有状态。虽然它是最容易实现的，但最多一次也是最不理想的消息语义类型。它不提供绝对的消息传递保证，因为每条消息都传递一次（最佳情况）或根本不传递。

**至少一次语义：**这是对最多一次语义的改进。可能有多次尝试传递消息，因此至少有一次尝试成功。换句话说，消息可能会重复，但不会丢失。虽然作为系统范围的特性并不理想，但至少一次语义对于数据重复无关紧要的用例或在消费者端可以进行重复数据删除的场景来说已经足够好了。

**Exactly-once 语义：**最终的消息传递保证和数据完整性方面的最佳选择。顾名思义，exactly-once 语义意味着每条消息都只传递一次。消息既不能丢失也不能传递两次（或多次）。Exactly-once 是迄今为止最可靠的消息传递保证。这也是最难实现的。

![消息传递语义的高级概述](../Images/dbe820222a822ff74c1d06a4f5b04307.png)

[这就是这篇关于Exactly-once 消息处理](https://www.ably.io/blog/achieving-exactly-once-message-processing-with-ably/)的博客文章的全部内容（披露：我为[Ably](https://www.ably.com/)工作）

希望这可以帮助

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-06T12:41:10.713

在**最多一次语义**的情况下，请求在失败的情况下再次发送，但请求在服务器上过滤重复。

在**恰好一次语义**中，请求被再次发送，请求被过滤为重复，并且保证服务器在失败后重新启动并从崩溃的地方开始处理请求。

但是**只有一次**是无法实现的，因为客户端发送请求时会发生什么，在它到达服务器之前，服务器崩溃了。无法跟踪请求。

[http://de.wikipedia.org/wiki/Remote_Procedure_Call#Fehlersemantik](http://de.wikipedia.org/wiki/Remote_Procedure_Call#Fehlersemantik)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-13T06:31:25.720

纠正赫斯珀的回答-

早些时候，恰好有一次 RPC 无法实现，但 2015 年的一篇研究论文 [1] 证明这是可能的。基本上，RIFL 范式保证了被执行的 RPC 的一次执行的安全性被持久存储

[1]：李、科林等人。“实现大规模和低延迟的线性化。” 第 25 届操作系统原理研讨会论文集。ACM, 2015

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-06-07T15:38:12.997

Bump，我也在研究这个，发现这个，希望它有帮助（帮助我），

> 至少一次与最多一次？
> 
> 让我们举个例子：
> 如果客户端和服务器保持运行，则获取锁，如果
> 客户端失败，客户端会收到锁，它可能有或没有锁（服务器需要一个计划！）
> 如果服务器失败，客户端可能有锁或没有
> - 至少 -一次：客户端一直在尝试
> 最多一次：客户端将收到异常
> 客户端在异常情况下会做什么？
> 需要实现一些特定于应用程序的协议
> 问服务器，我有锁吗？
> 服务器需要有一个计划来记住重新启动时的状态，
> 例如，在磁盘上存储锁。
> 至少一次（如果我们从不放弃）
> 客户继续尝试。服务器可能多次运行程序
> 
> 如果请求不是幂等的
> 但很难使所有请求幂等， 服务器必须使用应用程序状态来处理重复项
> ，例如，服务器在磁盘上存储良好，每个请求都有锁和 req id
> 检查表，
> 即使服务器失败并重新启动，我们也会得到正确的语义
> 什么是正确的？
> 取决于使用 RPC 的位置。
> 简单的应用程序：
> 最多一次很酷（更像是过程调用）
> 更复杂的应用程序：
> 在两种情况下都需要一个应用程序级计划
> 一次不明确会给你一个帮助
> => 处理机器故障使 RPC 与过程调用不同

引自分布式系统和范例第 2 版

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-04-05T21:21:09.067

对于第一个问题，我认为每个请求都应该附加一个唯一的 ID。因此，即使客户端发送了两个具有完全相同命令的请求，服务器也能够通过请求的唯一 ID 进行过滤和区分。

对于第二个问题，我认为本文有助于定义 rpc 调用的语义。[http://www.cs.unc.edu/~dewan/242/f97/notes/ipc/node27.html](http://www.cs.unc.edu/~dewan/242/f97/notes/ipc/node27.html)

# javascript - How to obtain Google Analytics visitor unique id?

> ID：13566874
> 
> 赞同：2
> 
> 时间：2012-11-26T14:27:07.593
> 
> 标签：javascript, google-analytics, google-analytics-api

I know that second value after splitting `__utma` cookie is a visitor unique id. How can I obtain that in proper way? Something like this: `var uid = _ga.visitor.getUid();`

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T14:54:15.163

```
_gaq.push(function(){
  var tracker = _gat._getTrackers()[0];
  var visit_code = tracker._visitCode();

  console.log(visit_code);
}); 
```

**更新**

`_visitCode()`是一种未记录的方法，但据我所知，它已经存在了至少一年。我的猜测是谷歌不会摆脱它，因为它正在集中精力实施具有不同方法的[通用分析。](https://developers.google.com/analytics/devguides/collection/analyticsjs/index)

您在此处拥有的 2 个选项是使用此未记录的方法或使用也具有未记录格式的 cookie。所以两者都有些不可靠。

在此发布时，Universal Analytics 仍处于测试阶段。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-02-24T04:46:02.733

按照这个：[https ://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApi_gat#_gat._getTrackerByName](https://developers.google.com/analytics/devguides/collection/gajs/methods/gaJSApi_gat#_gat._getTrackerByName)

获取跟踪器：

```
var tracker = _gat._getTrackerByName(); 
```

现在获取访问代码：

```
var visitcode = tracker._visitCode(); 
```

或一个班轮：

```
var visitcode = _gat._getTrackerByName()._visitCode(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:50:40.007

我认为正确且唯一的方法是`__utma`按照您的说法拆分 cookie。由于您可以并且可以假设第二个值始终是 id 这非常安全

# mysql - Difference between ADD FOREIGN KEY and ADD CONSTRAINT fk_foreign_key

> ID：13566876
> 
> 赞同：4
> 
> 时间：2012-11-26T14:27:15.137
> 
> 标签：mysql, sql

Does the following in MySQL:

```
alter table TABLE_A 
ADD CONSTRAINT fk_id (id) REFERENCES TABLE_B(id) 
ON DELETE CASCADE ON UPDATE CASCADE; 
```

do the same as

```
alter table TABLE_A 
ADD FOREIGN KEY (id) REFERENCES TABLE_B(id); 
```

except that it also adds a BTREE index on the relationship? Or do they complement each other?

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T14:49:39.617

两个查询或多或少相同，但根据[手册](http://dev.mysql.com/doc/refman/5.5/en/innodb-foreign-key-constraints.html)，`FOREIGN KEY`两个查询中都应该存在。

> ```
> [CONSTRAINT [symbol]] FOREIGN KEY
> [index_name] (index_col_name, ...)
> REFERENCES tbl_name (index_col_name,...)
> [ON DELETE reference_option]
> [ON UPDATE reference_option] 
> ```

这样做的好处`CONSTRAINT [symbol]`是您可以命名约束而不是 MySQL 为您生成名称；此符号在数据库中必须是唯一的，并且可以用于以后删除约束。

生成的符号名称可以通过创建后查看表结构来查看：

```
SHOW CREATE TABLE TABLE_A; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-19T07:19:33.893

**CONSTRAINT**语法纯粹用于命名目的，因此您可以使用该名称在表的任何其他列中实现约束。

你对这个问题的[回答](https://stackoverflow.com/questions/12652629/differences-between-foreign-key-and-constraint-foreign-key)

# c# - Advice Needed : MVC4 and Jquery Ajax

> ID：13566884
> 
> 赞同：0
> 
> 时间：2012-11-26T14:27:45.237
> 
> 标签：c#, asp.net-mvc, jquery

Need some advice - doing a project with MVC 4 - used to Forms and Ajax.

Normally I do AJAX calls

My code looks like this :

```
$.ajax({
                type: "POST",
                contentType: "application/json; charset=utf-8",
                url: "@SiteConfig.BaseUrl/assessment/getquestion",
                data: "{'AssessmentId':" + "'" + AssessmentId + "'" + ",'PageNumber':" + PageIndex + "}",
                dataType: "json",
                beforeSend: function(){
                    $('#ajaxLoader').show();
                    $('#questionContainer').hide();
                },
                success: function (msg) {
                    var data = msg.d;
},
                complete: function(){
                    $('#ajaxLoader').hide();
                    $('#questionContainer').show();
                },
                error:function (request, status, error){
                    alert(request.responseText);
                    alert(request);

                    $('#ajaxLoader').hide();
                    //window.location = '@SiteConfig.BaseUrl/questionnaire';
                }   
            });

[HttpPost]
public JsonResult GetQuestion(Guid AssessmentId, Int32 PageNumber)
{
   ... my code
   return this.Json(assessmentInfo, JsonRequestBehavior.AllowGet);
} 
```

I keep getting HTML that is returned instead of JSON - it basically just sends me the HTML for the entire page back in the method - what am I doing wrong?

Debugging the problem yields the following result from javascript: Javascript : SyntaxError: JSON.parse: enexpected character

Furthermore, if I add a breakpoint to the C# GetQuestion method, it is not being hit.

Could this be a URL routing issue?

Also, for the guys that are commenting on Naming conventions : the purpose of this method is to get a question. Naming conventions should follow business logic first, then technical conventions. Calling the method postquestion implies that I am posting a question which doesnt make sense at all.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:38:06.380

您应该像这样编辑您的 GetQuestion 方法：

```
[HttpPost]
public JsonResult GetQuestion(Guid AssessmentId, Int32 PageNumber)
{
   //my code
   return this.Json(myClass,JsonRequestBehavior.AllowGet);
} 
```

还请正确命名约定，如果有什么，请调用方法 GET。如果您发布某些内容，请调用 POST 方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:44:49.920

好的，我发现了问题。

确实是导致问题的路由问题。

# sql-server - Efficient Date Comparisons in SQL

> ID：13566885
> 
> 赞同：3
> 
> 时间：2012-11-26T14:27:47.447
> 
> 标签：sql-server, tsql, sql-server-2005

I hope this question provides all of the necessary information, but please do request more if anything is unclear. This is my first question on stack overflow so please bear with me.

I am running this query on SQL Server 2005.

I have a large derived dataset (i'll provide a small subset later) which has 4 fields; ID, Year, StartDate, EndDate

Within this data set the ID may (correctly) appear multiple times with different date combinations.

The question I have is what ways are there to identify if a record is 'new' I.E it's start date does not fall between the start and end date of any other records for the same id.

For an example take the data set below (I hope this table comes out correctly!);

```
+----+------+------------+------------+
| ID | Year | Start Date |  End Date  |
+----+------+------------+------------+
|  1 | 2007 | 01/01/2007 | 10/10/2007 |
|  1 | 2007 | 01/01/2007 | 05/04/2007 |
|  1 | 2007 | 05/04/2007 | 08/10/2007 |
|  1 | 2007 | 15/10/2007 | 20/10/2007 |
|  1 | 2007 | 25/10/2007 | 01/01/2008 |
|  2 | 2007 | 01/01/2007 | 01/01/2008 |
|  2 | 2008 | 01/01/2008 | 15/07/2008 |
|  2 | 2008 | 10/06/2008 | 01/01/2009 |
+----+------+------------+------------+

```

If we say nothing existed before 2007 then Row 1 and Row 6 are 'new' at that time.

Rows 2,3,7 and 8 are not 'new' as they either join the end of a previous record or overlap it to form a continuous date period (take rows 6 and 7 there are no 'breaks' between 01/01/2008 and 01/01/2009)

Row 4 and 5 would be considered a new record as it does not attach directly to the end of the previous period for ID 1 or overlap any of the other periods.

Currently to get this data set I have to put all of my data into temporary tables and then join them together on various fields to remove the records I don't want.

Firstly I remove rows where the startdate equals the enddate of another row for that ID (This would get rid of rows 3 and 7)

Then I remove rows where the the start date is between the startdate and enddate of other records for that ID (this would remove rows 2 and 8)

That would leave me withRows 1,4,5 and 6 as the 'new' records which is correct.

Is there a more efficient way to do this such as in some sort of loop, CTE or *cough* Cursor?

As per the above, if there is anything unclear don't hesitate to ask and I will try and provide you with the information you request.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:41:21.047

尝试

```
;with cte as
(
    Select *, row_number() over (partition by id order by startdate) rn from yourtable
)
select distinct t1.* 
from cte t1
     left join cte t2 
     on t1.ID = t2.ID
     and t1.EndDate>=t2.StartDate and t1.StartDate<=t2.EndDate
     and t1.rn<>t2.rn
where t2.ID is null
or t1.rn=1 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T16:30:11.730

**如果**每一行都有一个唯一标识符，这应该可以工作：

```
select * from 
tbl t3 
left outer join
(
select distinct t1.id as id_inside, t1.recno as recno_inside
from 
tbl t1 inner join 
tbl t2 on
t1.id = t2.id and
(t1.startdate <> t2.startdate or t1.enddate <> t2.enddate) and
(t1.startdate >= t2.startdate and t1.enddate <= t2.enddate)
 ) t4 on
t3.id = t4.id_inside and
t3.recno = t4.recno_inside
where
id_inside is null and
recno_inside is null 
```

[sqlfiddle](http://sqlfiddle.com/#!3/eab95/1/0)

# c# - Dynamic in the immediate window causes 'Microsoft.CSharp.RuntimeBinder.Binder' is not defined or imported error

> ID：13566887
> 
> 赞同：68
> 
> 时间：2012-11-26T14:27:58.663
> 
> 标签：c#, .net, visual-studio, dynamic, immediate-window

If I use `dynamic` in the immediate window of Visual Studio I get an error

> Predefined type 'Microsoft.CSharp.RuntimeBinder.Binder' is not defined or imported

How can I fix that?

* * *

## 回答 #1

> 赞同：120
> 
> 时间：2012-11-26T15:46:48.727

您应该在所选项目或启动项目中添加对 Microsoft.CSharp 库的引用。您的项目应参考 .NET Framework 4 或更高版本。

[MSDN 关于即时窗口上下文：](http://msdn.microsoft.com/en-us/library/f177hahy(v=vs.80).aspx)

> 在为设计时表达式评估建立上下文时，Visual Studio 会引用解决方案资源管理器中当前选定的项目。如果在解决方案资源管理器中未选择任何项目，Visual Studio 会尝试根据启动项目评估该函数。如果无法在当前上下文中评估该函数，您将收到一条错误消息。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2014-02-11T16:29:46.520

有两件事很重要。检查以下内容：

1.  您的项目属性引用**.NET Framework 4 或更高版本**（如果不是这种情况，请更改它：右键单击项目，选择“属性...”菜单项，然后选择作为目标框架“.NET Framework 4 “ （或更高））
2.  您已添加**“Microsoft.CSharp”程序集**作为参考（请注意，需要重新加载项目的步骤 1\. 必须先完成，然后才能执行此操作）

之后，您可以使用该`dynamic`类型。需要在所选项目或启动项目中添加引用，以便在即时窗口的范围内可用。

* * *

**注意：** [在这里](https://www.red-gate.com/simple-talk/dotnet/c-programming/working-with-the-dynamic-type-in-c/?utm_source=simpletalkdotnet&utm_medium=pubemail&utm_content=20181127-slota1&utm_term=simpletalkmain)，我找到了一篇关于C# 中的**动力学**、它如何工作以及你可以用它做什么的好文章。

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2015-04-10T06:13:36.180

1.  转到项目->添加参考。
2.  从侧边栏和框架中选择程序集
3.  检查 Microsoft.CSharp

快乐编码！

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2014-07-26T11:03:49.217

命名空间：Microsoft.CSharp.RuntimeBinder

程序集：Microsoft.CSharp（在 Microsoft.CSharp.dll 中）

示例
[http://stepbystepdotnet.wordpress.com/2012/08/06/predefined-type-microsoft-csharp-runtimebinder-binder-is-not-defined-or-importedtestproject1/](http://stepbystepdotnet.wordpress.com/2012/08/06/predefined-type-microsoft-csharp-runtimebinder-binder-is-not-defined-or-importedtestproject1/)

[http://msdn.microsoft.com/en-us/library/microsoft.csharp.runtimebinder.binder%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.csharp.runtimebinder.binder%28v=vs.110%29.aspx)

[http://msdn.microsoft.com/en-us/library/microsoft.csharp.runtimebinder%28v=vs.110%29.aspx](http://msdn.microsoft.com/en-us/library/microsoft.csharp.runtimebinder%28v=vs.110%29.aspx)

# c# - asp.net c# user login web developer express 2010

> ID：13566889
> 
> 赞同：0
> 
> 时间：2012-11-26T14:28:06.953
> 
> 标签：c#, asp.net, visual-web-developer

I am very new to asp.net and c# using web developer express 2010.

I have created a standard web application using web developer express 2010 which comes with membership and roles.

Let say, if i want to create a user with username and password, demo and demo, how do i do that? and for example, let say i want to assign demo role to user, and let demo user to view certain links, how can i do that in asp.net?

In php,

for example,

```
 if($_POST['username'] == 'demo' && $_POST['password'] == 'demo') {
       $_SESSION['demo'] = true;
   }

   ....

   if($_SESSION['demo'])
       //codes 
```

Please help me thanks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:03:05.397

您看过这个视频教程吗：将用户添加到您的会员系统。
[http://www.asp.net/web-forms/videos/authentication/adding-users-to-your-membership-system](http://www.asp.net/web-forms/videos/authentication/adding-users-to-your-membership-system)

# json - Different output from json_decode on different servers

> ID：13566890
> 
> 赞同：0
> 
> 时间：2012-11-26T14:28:12.283
> 
> 标签：json, unicode

I am currently hosting a PHP Facebook app on Heroku, in which I use cURL to obtain data about users from the Graph API.

I am having problems where the data returned contains unicode characters, in that json_decode on the Heroku system isn't outputting the unicode characters correctly. The output on my local system (identical code) is fine.

Looking at the raw JSON returned from Graph, I can see that it contains unicode escapes eg

```
{"id":"100003517896374","name":"Sky\u00e9     Mont\u00e1na","first_name":"Sky\u00e9","last_name":"Mont\u00e1na","link":"http:\/\/www.facebook.com\/skye.montana.73","username":"skye.montana.73","gender":"female","locale":"en_US"} 
```

On my local system, json_decode converts this to the following object:

```
stdClass Object ( [id] => 100003517896374 [name] => Skyé Montána [first_name] => Skyé [last_name] => Montána [link] => http://www.facebook.com/skye.montana.73 [username] => skye.montana.73 [gender] => female [locale] => en_US ) 
```

On the Heroku system it is converted as follows:

```
stdClass Object ( [id] => 100003517896374 [name] => SkyÃ© MontÃ¡na [first_name] => SkyÃ© [last_name] => MontÃ¡na [link] => http://www.facebook.com/skye.montana.73 [username] => skye.montana.73 [gender] => female [locale] => en_US ) 
```

My understanding of json_decode is that it will recognise and correctly interpret unicode. In this case, on Heroku, it appears to be recognising unicode, but not interpreting it correctly.

Is there some PHP setting I need to make to fix this? Is it something to do with magic_quotes perhaps? I've set both servers to have the same magic_quotes option (Off) but it makes no difference.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:57:11.053

好的，像往常一样，在 SO 上发帖 5 分钟后，我找到了答案。

Apache 有一个 AddDefaultCharset 指令。这可以设置为关闭，在响应标头中不添加任何内容；On，其中 iso-8859-1 作为内容类型添加到响应头中；或特定字符集，其中该集作为内容类型添加到响应标头。

在我的本地 Apache 环境中，我使用 AddDefaultCharset 将默认字符集设置为 UTF-8，这将覆盖 HTML 页面的元标记中设置的任何内容。

在 Heroku 上，AddDefaultCharset 设置为关闭，这意味着字符集始终由 HTML 页面中的元标记确定。

我的 EPIC FAIL 是我在元标记中有错字。这在我的本地环境中看不到，因为 Apache 设置优先，但在 Heroku 中可以看到，其中内容类型取决于元标记设置。

# sublimetext2 - Sublime Text 2：将 Makefile.local 识别为 Makefile

> ID：13566898
> 
> 赞同：4
> 
> 时间：2012-11-26T14:28:38.400
> 
> 标签：sublimetext2

如何配置 Sublime Text 2 以便它识别名为`Makefile.local`Makefile 的文件，因此在打开此文件时不必手动执行“设置语法：Makefile”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-11-26T14:48:23.493

将标签添加`<string>Makefile.local</string>`到文件中的`<array>`部分**`Makefile.tmLanguage`**。

```
<dict>
    <key>fileTypes</key>
    <array>
        <string>Makefile.local</string>
        <string>GNUmakefile</string>
        <string>makefile</string>
        <string>Makefile</string>
        <string>OCamlMakefile</string>
        <string>make</string>
    </array>
    <key>name</key>
... 
```

要查找文件，请单击`Preferences | Browse Packages...`菜单。

该文件可用于更改更多[语法定义](http://sublimetext.info/docs/en/extensibility/syntaxdefs.html "SublimeText - 语法定义")选项。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-24T02:33:41.003

您可以根据文件的内容打开语法高亮。

例如，我有许多命名`Makefile.msp430`和类似的 makefile，第一行如下：

```
#-*-Makefile-*- vim:syntax=make 
```

这是其他编辑器（例如 vim）的典型做法。

但是，要使其正常工作，您需要修改 `Makefile.tmLanguage`文件。

1.  在以下位置找到文件（适用于 Ubuntu 中的 Sublime Text 3）：

    ```
    /opt/sublime_text/Packages/Makefile.sublime-package 
    ```

请注意，这实际上是一个 zip 文件。复制它，最后用 .zip 重命名，然后从中提取 Makefile.tmLanguage 文件。

2.  `Makefile.tmLanguage`通过在“fileTypes”部分之后添加“firstLineMatch”键和字符串来编辑新的。在下面的示例中，最后两行是新的（应该由您添加）。该`<string>`部分包含正则表达式，它将启用与第一行匹配的文件的语法突出显示。此表达式可识别两种模式：“ `#-*-Makefile-*-`”和“ `vim:syntax=make`”，但您可以改进它。

    ```
    <key>fileTypes</key>
    <array>
        <string>GNUmakefile</string>
        <string>makefile</string>
        <string>Makefile</string>
        <string>OCamlMakefile</string>
        <string>make</string>
    </array>

    <key>firstLineMatch</key>
    <string>^#\s*-\*-Makefile-\*-|^#.*\s*vim:syntax=make</string> 
    ```

3.  将新`Makefile.tmLanguage`的放在用户设置目录中：

    ```
    ~/.config/sublime-text-3/Packages/User/Makefile.tmLanguage 
    ```

从现在开始，匹配第一行规则的文件应该打开语法高亮。

# php - 为什么在此处添加 element.getAttribute() 会使我的 php 脚本返回错误 500？

> ID：13566901
> 
> 赞同：0
> 
> 时间：2012-11-26T14:28:47.683
> 
> 标签：php, xml, xmldom

这是我用来解析远程 XML 的代码：

```
$xmlDoc = new DOMDocument();
$xmlDoc->load("http://www.bnr.ro/nbrfxrates.xml");

$x = $xmlDoc->documentElement;
foreach ($x->childNodes AS $item)
{
    if($item->nodeName == 'Body')
        foreach ($item->childNodes AS $body_item)
        {
            if($body_item->nodeName == 'Cube')
                foreach ($body_item->childNodes AS $cube_item)
                {                                                   
                    print " - ".$cube_item->nodeName . " : ".$cube_item->getAttribute("currency")." = ". $cube_item->nodeValue . "<br>";

                }

        }
} 
```

如果我删除 getAttribute 部分脚本运行顺利，但添加它会导致它返回错误 500。

如果您想检查它或其他什么，该 xml 可在该地址获得。

激活错误报告后，我发现错误是：`Object of class DOMText could not be converted to string`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:45:35.050

问题是`childNodes`同时提供常规节点和文本节点。您只能调用`getAttribute()`常规元素节点（类型 1）。在执行之前先检查它们是否不是文本节点`print`：

```
foreach ($body_item->childNodes AS $cube_item)
{
   // Only attempt to print the regular DOM elements                          
   if ($cube_item->nodeType == 1)
   {
     print " - ".$cube_item->nodeName . " : ".$cube_item->getAttribute("currency")." = ". $cube_item->nodeValue . "<br>";
   }
} 
```

如果在您的`foreach`循环中您要检查`nodeType`每个 的`childNodes`，您很可能会看到类似于`3 1 3 1 3 1`空白文本和常规元素节点交替出现的内容，而您只需要元素节点 ( `1`)

[MDN 有一个 DOM 节点类型的参考列表](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeType)。

顺便说一句，使用完整代码快速验证修复会产生：

```
 - Rate : AED = 0.9514<br>
 - Rate : AUD = 3.6518<br>
 - Rate : BGN = 2.3169<br>
 - Rate : BRL = 1.6787<br>
 - Rate : CAD = 3.5182<br>
 - Rate : CHF = 3.7628<br>
 - Rate : CNY = 0.5613<br>
 - Rate : CZK = 0.1790<br>
 - Rate : DKK = 0.6076<br>
 - Rate : EGP = 0.5726<br>
 - Rate : EUR = 4.5313<br>
 - Rate : GBP = 5.5990<br>
 - Rate : HUF = 1.6075<br>
 - Rate : INR = 0.0627<br>
 - Rate : JPY = 4.2601<br>
 - Rate : KRW = 0.3217<br>
 - Rate : MDL = 0.2836<br>
 - Rate : MXN = 0.2692<br>
 - Rate : NOK = 0.6169<br>
 - Rate : NZD = 2.8782<br>
 - Rate : PLN = 1.1019<br>
 - Rate : RSD = 0.0405<br>
 - Rate : RUB = 0.1127<br>
 - Rate : SEK = 0.5268<br>
 - Rate : TRY = 1.9469<br>
 - Rate : UAH = 0.4288<br>
 - Rate : USD = 3.4950<br>
 - Rate : XAU = 196.3192<br>
 - Rate : XDR = 5.3606<br>
 - Rate : ZAR = 0.3937<br> 
```

# ruby-on-rails - Ruby电子表格未打开远程文件

> ID：13566902
> 
> 赞同：3
> 
> 时间：2012-11-26T14:28:48.783
> 
> 标签：ruby-on-rails, ruby, spreadsheet

我正在尝试使用 Ruby Spreadsheet gem 打开远程存储的电子表格。我的代码如下

```
require 'spreadsheet'
require 'open-uri'

book = Spreadsheet.open(url) 
```

它向我返回 Errno::ENOENT 的错误：没有这样的文件或目录

通过将 url 放入浏览器，它可以很好地下载，所以我知道 url 很好。我有一些使用 FasterCSV 的非常相似的代码，它工作得非常好，所以如果这是电子表格的问题，或者我做错了什么，那就徘徊。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-26T15:23:16.147

您没有使用`open-uri`，它将获取 URL 并将其作为对象公开（在大多数情况下`StringIO`，它的工作方式类似于对象）。如果您这样做，`IO`该课程可能会起作用：`Spreadsheet`

```
book = Spreadsheet.open(open(url)) 
```

第二个是将对象发送到的`open`from which 。`OpenURI``StringIO``Spreadsheet.open`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:45:40.323

据我所知，在[https://github.com/zdavatz/spreadsheet/blob/master/lib/spreadsheet.rb](https://github.com/zdavatz/spreadsheet/blob/master/lib/spreadsheet.rb)，您需要先下载该文件，然后再打开它。Spreadsheet 类的 open 方法需要一个 IO 对象或磁盘上的物理路径：

`def open io_or_path, mode="rb+" ...`

# delphi - 直接从过程/函数获取 TAdvEdit.Text

> ID：13566905
> 
> 赞同：-1
> 
> 时间：2012-11-26T14:28:53.830
> 
> 标签：delphi, delphi-xe2

您好，我收到错误 E2197：**[DCC 错误] proj1.pas(34)：E2197 常量对象不能作为 var 参数传递**：

```
unit proj1;

interface

uses
  Winapi.Windows, Winapi.Messages, System.SysUtils, System.Variants, System.Classes, Vcl.Graphics,
  Vcl.Controls, Vcl.Forms, Vcl.Dialogs, Vcl.StdCtrls, AdvEdit;

type
  TForm1 = class(TForm)
    AdvEdit1: TAdvEdit;
    Button1: TButton;
    procedure Button1Click(Sender: TObject);
  private
    { Private declarations }
  public
    { Public declarations }
  end;

var
  Form1: TForm1;

implementation

{$R *.dfm}

procedure SetEditText(const instr: string; out outstr: string);
begin
  outstr := instr;
end;

procedure TForm1.Button1Click(Sender: TObject);
begin
  SetEditText('Pippo', AdvEdit1.Text);
end;

end. 
```

当然，我可以解决写作：

```
procedure TForm1.Button1Click(Sender: TObject);
var sText: string
begin
  SetEditText('Pippo', sText);
  AdvEdit1.Text := sText;
end; 
```

但是当我有很多 AdvEdit 时，就很难了。然后我问，是否可以在某些模式下直接将 TAdvEdit.Text 作为参数在我的程序中解决问题？非常感谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-26T14:41:18.033

我认为那`Text`是一种财产。而且您不能将属性传递给`var`or`out`参数。您只能将变量传递给这些类型的参数。

您需要找到一种不同的方式来编写代码。你想出了一个这样的想法，但对我来说它似乎不必要地复杂。我看不到任何比以下更简单的东西：

```
AdvEdit1.Text := 'Pippo'; 
```

怎么会有比这更简单的代码呢？您至少需要指定以下内容：

*   目标控制。
*   我们正在处理`Text`财产。
*   我们正在分配的事实。
*   新值。

上面的代码就是这样做的，仅此而已。

# html - GWAN unescape_html()

> ID：13566909
> 
> 赞同：2
> 
> 时间：2012-11-26T14:29:03.080
> 
> 标签：html, escaping, g-wan

代码片段：

```
U8 test[20] = "+45%201234%205678";
printf("\n%s\n",test);
unescape_html(test);
printf("%s\n",test); 
```

输出

```
+45%201234%205678
45 1234 5678 
```

我的“+”号去哪儿了？错误或功能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:50:06.570

在 URL 编码`+`中用于替换空格。确保你没有得到`" 45 1234 5678"`事实。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:53:36.877

当 URL 被编码时，该`+`符号表示一个空格，因此您的函数`unescape_html()`正在删除该`+`符号

例如：

```
http://www.example.com/?text=A+blue+sky&something_else=A+red+sky 
```

# ruby-on-rails - 如何更正语法高亮以在 Sublime/Textmate 2 中设置 Rails 链接或表单字段“类”

> ID：13566910
> 
> 赞同：16
> 
> 时间：2012-11-26T14:29:09.310
> 
> 标签：ruby-on-rails, ruby, textmate, sublimetext2, sublimetext

**背景：**在 Sublime Text 和 Textmate 中，当在 Rails 的 link_to 或表单字段中使用新的 ruby​​ 哈希格式时，“类”一词被错误地突出显示：

![在此处输入图像描述](../Images/2d4cd5e6e25a74fa7d6c5ae454cd48f2.png)

**目标：**有什么方法可以像使用旧格式一样正确突出显示“类”关键字：

![在此处输入图像描述](../Images/cfee90ad91a211e720a234e2819e869f.png)

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-11-26T16:02:48.767

我认为这与语法突出显示的优先级有关。因为 ruby​​ 的关键字匹配“class”，所以它试图突出显示它，就好像你有`class MyClass`. 而旧的哈希格式有前面`:`阻止它被选为关键字。

**免责声明**：我不是这方面的专家，我只是在修补，以下对我有用。

如果您编辑 Ruby.tmLanguage 文件（在 Packages/Ruby 中），您可以将定义关键字的部分移到定义新 ruby​​ 1.9 哈希语法的部分下方。这样，它应该优先考虑新的哈希语法。

查找`<dict>`包含以下内容的条目：

```
<dict>
  ....
  <key>name</key>
  <string>keyword.control.ruby</string>
</dict> 
```

并将其放在条目下方，例如：

```
<dict>
  ....
  <key>name</key>
  <string>constant.other.symbol.ruby.19syntax</string>
</dict> 
```

# google-docs - 如何防止用户复制 Google Docs / Google Drive 中的共享文档

> ID：13566912
> 
> 赞同：1
> 
> 时间：2012-11-26T14:29:19.657
> 
> 标签：google-docs, google-drive-api, copy-protection

我使用 Google Drive 仅与某些用户共享文档。在某些情况下，用户可以查看它们、添加评论甚至编辑它们。但是，如果我不想让他们复印怎么办。那可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:31:53.740

不，它不是，真的。使用已经从他们的机器上查看某种**副本**，所以最好不要向他们展示你的文档。

# linux - Net::SSH2 从 Windows 7 到 ssh 到 VMWare Guest CentOS 6.2 不使用公钥和私钥

> ID：13566913
> 
> 赞同：1
> 
> 时间：2012-11-26T14:29:30.777
> 
> 标签：linux, windows, perl, ssh-keys

我无法从 Windows 7 SSH 到 VMWare Guest CentOS 6.2

我的笔记本电脑上有 Windows 7 64 位操作系统。在上面安装了草莓 Perl 5.16.2。我还安装了 VMWare Player 并在其上运行 CentOS 6.2。

使用我在网上找到的文章，我已经成功地从 PUTTY 无密码地 SSH 到 CentOS 6.2。

我在 CentOS 6.2 上创建了用户 perl514。使用下面的脚本，如果我使用用户名和密码登录，一切正常。但它不适用于我使用 PUTTY 随附的 SSH KEYGEN 工具创建的公钥和私钥。

下面给出的是脚本：

```
 #!C:\strawberry\perl\bin\perl.exe

    use Modern::Perl;
    use Net::SSH2;

    my $hostname = '192.168.247.128';
    my $username = 'perl514';
    my $password = 'redhat';

    my $ssh2 = Net::SSH2->new();
    say "Connecting to $hostname";

    $ssh2->connect("$hostname") || die "PROBELM - $!";

    #$ssh2->auth_password("$username","$password") || die "Username/Password not #right";#COMMENTED OUT. This Works. Stuff given below does not work.
    $ssh2->auth_publickey ("perl514", "C:\\Users\\winuser\\Documents\\perl\\work\\putty_priv.ppk",
                   "C:\\Users\\winuser\\Documents\\perl\\work\\public.pub") || die "ERROR", $ssh2->error;

    my $chan = $ssh2->channel();
    $chan->blocking(0);
    $chan->exec('ls -la');
    while (<$chan>){ print } 
```

我收到以下错误：

```
 Connecting to 192.168.247.128
    ERROR-19LIBSSH2_ERROR_PUBLICKEY_UNVERIFIEDInvalid public key at ssh2.pl line 17. 
```

使用用户名和密码，它可以正常工作。但不是用公钥和私钥。

我很确定我在某个地方出错了。请帮助我。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T17:03:24.757

Net::SSH2 expects the key files to be in the OpenSSH format that is different to that used by PuTTY.

You should be able to convert to OpenSSH format using the PuTTY GUI. For instance, see [How to convert SSH keypairs generated using PuttyGen(Windows) into key-pairs used by ssh-agent and KeyChain(Linux)](https://stackoverflow.com/questions/2224066/how-to-convert-ssh-keypairs-generated-using-puttygenwindows-into-key-pairs-use) .

**update**:

Detailed conversion steps:

*   Open PuTTY key generator
*   Load the private key into it
*   On the conversions menu, export the private key in OpenSSH format
*   Select and copy with the mouse the public key for OpenSSH from the box under "*Public key for pasting into OpenSSH authorized_keys file*" and paste it into a new file with the same name as the one you have given to the private key with ".pub" appended.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-02-05T10:25:29.647

我没有在 CentOS vm 上安装 ssh 服务器。安装 ssh 服务器后，它工作了。

```
yum -y install openssh-server openssh-clients 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-27T11:40:36.863

很抱歉回答这个问题而不是发表评论，但评论部分不允许我将步骤放在另一个步骤之下。我检查了您的链接，这是我的理解：

```
 1.Open PuttyGen
    2.Click Load
    3.Load your private key
    4.Go to Conversions->Export OpenSSH and export your private key 
```

我知道上面的步骤是在 Windows Box 上运行的，但是下面的步骤呢？它们要在 CentOS Guest 上运行吗？不确定我是否必须在 CentOS 6.2 来宾操作系统中复制 putty 创建的私钥。另一个问题是 Puttygen 创建的私钥在其中包含私钥和公钥。

```
 5.Copy your private key to ~/.ssh/id_dsa (or id_rsa).

     6.Create the RFC 4716 version of the public key using ssh-keygen

    ssh-keygen -e -f ~/.ssh/id_dsa > ~/.ssh/id_dsa_com.pub

     7.Convert the RFC 4716 version of the public key to the OpenSSH format:

    ssh-keygen -i -f ~/.ssh/id_dsa_com.pub > ~/.ssh/id_dsa.pub 
```

我这样做的原因是，一旦这个测试设置工作，我将使用类似的方法登录到一些 NAS 阵列（基于 linux）来运行一些报告。因此，问题。

# c# - 字典 无法访问值项。C＃

> ID：13566915
> 
> 赞同：2
> 
> 时间：2012-11-26T14:29:32.863
> 
> 标签：c#, dynamic, dictionary

我正在玩字典和字典中新的花哨的 4.0 动态类型。

我有一本字典：

```
Dictionary<dynamic, dynamic> dynamicDic 
```

我这样填充它：

```
dynamicDic.Add("First", new Class1());
dynamicDic.Add("Second", new Class2()); 
```

为了测试/练习 Class1 和 Class2 非常简单：

```
public class Class1
{
    public string Element { get; set; }

    public List<Class2> Class2 { get; set; }
}

public class Class2
{
    public string Property { get; set; }

    public string Field;
} 
```

我创建了另外两个映射 class1 和 class2 的类，它们实际上是相同的，因此 ClassMap1 和 ClassMap2。我将只包括 CalssMap1：

```
public class ClassMap1: BaseClassMap1
{
    public ClassMap1()
    {
        var r = new Class1();
        Children = new Dictionary<string, dynamic>
            {
                {"Element", r.GetType().GetProperty("Element")},
                {"Class1", r.GetType().GetProperty("Class1")}
            };
        Name = "Root";
        ObjectType = typeof (Class1);
        Parent = "RootElement";
        HasParent = false;
        HasChildren = true;
        IsClass = r.GetType().IsClass;
    }
} 
```

我创建了一个基类： BaseClass1()

```
public class BaseClass1
{
    private String _Name;

    public String Name
    {
        get { return _Name; }
        set { _Name = value; }
    }

    private Type _ObjectType;

    public Type ObjectType
    {
        get { return _ObjectType; }
        set { _ObjectType = value; }
    }

    private String _Parent;

    public String Parent
    {
        get { return _Parent; }
        set { _Parent = value; }
    }

    private Dictionary<string, dynamic> _Children;

    public Dictionary<string, dynamic> Children
    {
        get { return _Children; }
        set { _Children = value; }
    }

    private bool _HasParent;

    public bool HasParent
    {
        get { return _HasParent; }
        set { _HasParent = value; }
    }

    private bool _HasChildren;

    public bool HasChildren
    {
        get { return _HasChildren; }
        set { _HasChildren = value; }
    }

    private bool _IsClass;

    public bool IsClass
    {
        get { return _IsClass; }
        set { _IsClass = value; }
    }
} 
```

我用数据填充类，什么数据并不重要:)

然而，当我尝试通过 Linq 语句访问这些​​值时：

```
var a = _classObjects.SingleOrDefault(x => x.Key == node.Name).Value; 
```

a 只给我：-

```
a.Equals(), a.GetType(), a.GetEnumerator() or a.ToString() 
```

我希望能够让它这样做（使用智能感知）......

```
a.Children
a.Name
a.HasParent 
```

ETC...

有人知道我哪里出错了吗？

哎呀完全错了......对不起：| 以上编辑...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:40:44.407

`dynamic`类都是关于运行时（而**不是**编译时）发现的。您如何期望 Intellisense 知道该做什么？

使用`dynamic`类会产生很高的性能开销。我真的建议你做到：`Dictionary<string, dynamic> dynamicDic`。

或定义 a`MyBaseClass`并使其：`Dictionary<string, MyBaseClass> myDic`.

# excel - excel 2007 XY 查找

> ID：13566922
> 
> 赞同：0
> 
> 时间：2012-11-26T14:30:11.420
> 
> 标签：excel

早上好。我一直在寻找一些代码，无论是公式还是 VBA 来查找表中的值。我有两个表，我希望用新表从旧表迁移数据。两张表相对相同。

```
 A     B    C    D    E
1   Store 1234 2345 3456 4567
2   1234  0    5    10   15
3   2345  5    0    20   25    
4   3456  10   20   0    35
5   4567  15   25   35   0 
```

它基本上是一个里程表，其中包含位置到位置的距离。我正在寻找一种方法，当由于添加了新位置而导致行列不完全匹配时，将旧表中的值带入新表中。我知道如何进行 vlookup，但是这会做我正在寻找的... D2“5”

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:42:54.997

应该能够做一个索引和匹配组合来找到它。I1 = 从，K1 = 到您只需在这些单元格中输入位置并获得您想要的范围。

```
 =INDEX(A1:E5, MATCH(I1,A1:E1,0), MATCH(K1,A1:A5,0)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T14:43:32.563

您可以将 IF 公式用于 vlookup 吗？摘要：如果你能提供完整的数据和预期的数据`=IF((vlookup)=something),do this, else)` ，我很乐意进一步研究这个问题。`BEFORE``AFTER`

另外，也许`=DGET`对你有用？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-09-23T17:11:48.313

我用这个公式稍微修改了一下，效果很好， =INDEX($A$1:$G$7, MATCH(B12,$A$1:$A$7,0), MATCH(C12,$A$1:$G$1,0 ))

等式的第一部分是整个表格，包括 X 和 Y 坐标。接下来的两部分是 X 和 Y 坐标（如果你愿意，你可以交换这些轮次）

所以 x 和 y 的请求信息被放在单元格 C12 和 B12 以及下面的所有单元格中......然后我使用美元符号修复所有其他查找单元格，所以我可以使用自动填充，并在 E12 中输入（这是结果将出现的地方。

你可以在附件中看到表格（或者如果我被允许附上它）。我在 A 列中查找 B12 (3)，然后在第 1 行中查找 C12 (6) 并返回交叉点处的值（在本例中返回“r”）。

或者如果愚蠢的网页没有坚持让我获得 10 声望，将会有附件......希望你明白这个想法......

# c# - Chrome在下载时修改长文件名（使用c#FileContentResult）

> ID：13566928
> 
> 赞同：2
> 
> 时间：2012-11-26T14:30:29.667
> 
> 标签：c#, google-chrome, filecontentresult

在生成的报告列表中，有一个下载它们的链接。这些报告的内容存储在数据库中。当我执行下载报告时，请使用以下代码：

```
return new FileContentResult (report.FileContents, mimeType)
{
    FileDownloadName = report.Title + report.Extension
}; 
```

在许多情况下，文件名超过 50 个字符，当我使用 Google Chrome 下载报告时，浏览器会忽略标题中生成的文件名并尝试使用下载链接的最后一个参数保存文件，这种情况下是报告的 ID ，例如：下载链接是[http://appname.com/report/download/123](http://appname.com/report/download/123)，浏览器返回的是“ **123.pdf** ”，但应该是“ **Relatório de probabilidade e risco de processos.pdf** ”。但是当我使用 Mozilla Firefox 或 IE 时，并没有出现这个问题。

有没有人经历过这种情况？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T16:55:26.387

问题与字符数无关，而是指特殊字符。我创建了一个删除特殊字符的函数并尝试了文件名。

功能：

```
/// <summary>
/// Remove characters from string
/// </summary>
public static string RemoveSpecialCharacters(string text, bool allowSpace)
{
    var normalizedString = text;

    // Prepare the symbol table.
    var symbolTable = new Dictionary<char, char[]>();

    symbolTable.Add('a', new char[] { 'à', 'á', 'ä', 'â', 'ã' });
    symbolTable.Add('c', new char[] { 'ç' });
    symbolTable.Add('e', new char[] { 'è', 'é', 'ë', 'ê' });
    symbolTable.Add('i', new char[] { 'ì', 'í', 'ï', 'î' });
    symbolTable.Add('o', new char[] { 'ò', 'ó', 'ö', 'ô', 'õ' });
    symbolTable.Add('u', new char[] { 'ù', 'ú', 'ü', 'û' });

    // Replaces the symbols.
    foreach (var key in symbolTable.Keys)
    {
        foreach (var symbol in symbolTable[key])
        {
            normalizedString = normalizedString.Replace(symbol, key);
        }
    }

    // Remove the other special characters.
    if (allowSpace)
        normalizedString = System.Text.RegularExpressions.Regex.Replace(normalizedString, @"[^0-9a-zA-Z.-_\s]+?", string.Empty);
    else
        normalizedString = System.Text.RegularExpressions.Regex.Replace(normalizedString, @"[^0-9a-zA-Z.-_]+?", string.Empty);

    return normalizedString;
} 
```

更正的代码：

```
...

string reportName = StringUtils.RemoveSpecialCharacters(report.Title, true);

return new FileContentResult(report.FileContents, mimeType)
{
    FileDownloadName = reportName + report.Extension
}; 
```

感谢您的关注。

# c# - VS2005 .NET 2.0 和 C# 和 x86 目标平台

> ID：13566930
> 
> 赞同：1
> 
> 时间：2012-11-26T14:30:45.593
> 
> 标签：c#, visual-studio-2005, x86, uac

我在 Windows Vista 上使用 VS2005。我使用 .NET 2.0 在 C# 中创建了一个非常简单的 Windows 应用程序，这是一个带有关闭按钮的表单。

由于有必要的库，我需要 VS-option 目标平台“x86”。如果我在 Vista 上构建并将应用程序传输到 X64 Windows 7 计算机，则应用程序需要管理员权限才能执行（UAC-Message-Dialog），我想避免这种情况。

如果使用 VS 选项目标平台“anyCPU”，这可以正常工作，但我需要目标平台“x86”的解决方案。

有谁能够帮我？

我想要做的是更改代码或项目配置以避免Windows7（x64）上的UAC-Message-Dlg。但我不知道我必须做什么。我需要“x86”选项，因为我们想使用 x86 库。测试代码非常简单（见下文），所以我认为问题出在项目配置中：

```
// Project code:
using System;
using System.Collections.Generic;
using System.ComponentModel;
using System.Data;
using System.Drawing;
using System.Text;
using System.Windows.Forms;

namespace Updater2
{
  public partial class Form1 : Form
  {
    public Form1( )
    {
      InitializeComponent( );
    }

    private void toolStripButton1_Click( object sender, EventArgs e )
    {
      Close( );
    } // -- toolStripButtonClose_Click
  } // - Form1
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:20:05.630

您可能正在尝试将文件写入 C:/ 或 C:/Program Files 文件夹。尝试将任何文件写入该文件`%Current User%`夹以避免 UAC。除此之外，在没有看到您的任何代码的情况下，我无法提供更多解决方案。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T09:03:36.533

问题是程序名称中的“**更新”一词。**

当可执行文件的名称中包含“更新”、“安装”或“设置”等词时，Windows 会假定它可能是一个安装程序，很可能需要管理权限。因此，这些程序被迫在启用 UAC 的系统上以提升提示运行。

它也不仅仅是可执行文件的名称。如果重命名文件不能解决问题，应用程序的版本信息中也可能包含这些关键字。具有以下内容将导致相同的行为：

```
[assembly: AssemblyTitle("Setup DVD Player")] 
[assembly: AssemblyProduct("Instal President")] // Yes, even with the misspelling. 
```

简单的方法是重命名应用程序并避免使用这些关键字。

正确的出路是在可执行文件中包含应用程序清单。

# php - 我应该使用什么来格式化地址国家格式的邮政地址

> ID：13566937
> 
> 赞同：5
> 
> 时间：2012-11-26T14:31:07.543
> 
> 标签：php, string-formatting, zend-framework2, street-address

我需要将邮政地址格式化为国家/地区的格式，并且正在寻找一些可以做到这一点的 PHP 库。我使用使用 Locale 的 zend 框架 2，但不幸的是，目前似乎无法处理这个问题。

```
examples

NL    RECIPIENT
      STREET_NAME HOUSE_NUMBER
      POSTAL_CODE LOCALITY
      COUNTRY

US    RECIPIENT
      HOUSE_NUMBER STREET_NAME [STREET_TYPE] [STREET_DIRECTION] [BUILDING] [FLOOR] [APARTMENT]
      LOCALITY PROVINCE_ABBREVIATION POSTAL_CODE
      COUNTRY

UK    RECIPIENT
      [FLOOR] [APARTMENT]
      [BUILDING]
      [HOUSE_NUMBER] STREET_NAME
      [DEPENDENT_LOCALITY]
      LOCALITY
      POSTAL_CODE 
```

（来源[http://www.addressdoctor.com/en/countries-data/address-formats.html](http://www.addressdoctor.com/en/countries-data/address-formats.html)）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T14:34:58.613

在制作国际网站时，我不得不面对同样的问题。

解决方案是打印由地址的所有连接部分组成的字符串，并在可能的情况下使用 Google Map API 正确格式化地址。

```
var g = new google.maps.Geocoder();

function format_address(raw_address) {

    g.geocode({address: raw_address}, function (a, status) {

        if (status === "OK") {

            var splt = a[0].formatted_address.split(new RegExp(",", "g"));

            var i = 0;
            var res = "";

            for(i = 0; i < splt.length-1; i++)
                res += $.trim(splt[i]) + '<br/>';

            res +=  $.trim(splt[splt.length-1]);

            $('#address').html(res);
        }
        else if (status == "OVER_QUERY_LIMIT") {

                   //wait 500ms and try again

        }
        else { 
             $('#address').(raw_adress);

        }
    });
} 
```

# iphone - 如何在 iPhone 邮件中打开文档时提供“共享”选项

> ID：13566951
> 
> 赞同：1
> 
> 时间：2012-11-26T14:31:51.250
> 
> 标签：iphone, objective-c, uidocumentinteraction, cfbundleidentifier

所以我一直在阅读“ [iOS 文档交互编程主题](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/DocumentInteraction_TopicsForIOS/Articles/OpeningSupportedFileTypes.html)”。我已经能够通过 Mail 实现“使用 myapp 打开”选项，想知道如何根据指定的文件类型将选项更改为“与 myapp 共享”？这是我尝试过的：

```
<key>CFBundleDocumentTypes</key>
<array>
    <dict>
        <key>CFBundleTypeName</key>
        <string>Document</string>
        <key>LSHandlerRank</key>
        <string>Alternate</string>
        <key>CFBundleTypeRole</key>
        <string>Owner</string>
        <key>LSItemContentTypes</key>
        <array>
            <string>public.data</string>
        </array>
    </dict>                
</array> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-05T17:01:09.623

结果是爬取其他网站，同样做不到:-(

# javascript - 从prototype.js 迁移

> ID：13566956
> 
> 赞同：0
> 
> 时间：2012-11-26T14:32:13.157
> 
> 标签：javascript, prototypejs, internet-explorer-10

prototype.js 正在扩展原生对象，很少更新。我们在大型应用程序中使用它，迁移到另一个 JavaScript 库对我们来说非常昂贵。您认为考虑到 IE 10 和新的 EMCAScrip，我们可以继续使用它多久？

# .net - 反序列化枚举包装器

> ID：13566960
> 
> 赞同：0
> 
> 时间：2012-11-26T14:32:33.373
> 
> 标签：.net, json, entity-framework, asp.net-mvc-4

编辑：对代码进行了更改，以使其在服务器端正常运行。仍然收到错误：

“无法将当前 JSON 对象（例如 {"name":"value"}）反序列化为类型 'BareCupboard.Models.RecipeIngredient[]'，因为该类型需要 JSON 数组（例如 [1,2,3]）才能正确反序列化. 要修复此错误，请将 JSON 更改为 JSON 数组（例如 [1,2,3]）或将反序列化类型更改为正常的 .NET 类型（例如，不是整数等原始类型，而不是集合类型像数组或列表），可以从 JSON 对象反序列化。也可以将 JsonObjectAttribute 添加到类型以强制它从 JSON 对象反序列化。路径“消息”，第 1 行，位置 11。”

我成功地反序列化了我的服务器端代码，以供客户端用于普通实体框架模型。但是，我为我的枚举创建了一个包装器，以使服务器端交互能够以下拉列表等格式修改数据。

在 deearlizing 枚举陷入自引用循环时，它会出现。

对以这种方式创建的对象进行反序列化的正确方法是什么。

```
public enum ingredientType
{
    grams = 1,
    kilograms = 2,
    millileters = 3,
    liters = 4,
    pinch = 5,
    teaspoon = 6,
    tablespoon = 7,
    whole = 8,
    Cup = 9
}

public class ingredientWrapper
{
    private ingredientType _t;
    public int value
    {
        get
        {
            return (int)_t;
        }
        set
        {
            _t = (ingredientType)value;
        }
    }
    public ingredientType EnumValue
    {
        get
        {
            return _t;
        }
        set
        {
            _t = value;
        }
    }

    public static implicit operator ingredientWrapper(ingredientType i)
    {
        return new ingredientWrapper { EnumValue = i };
    }

    public static implicit operator ingredientType(ingredientWrapper iw)
    {
        return iw.EnumValue;
    } 
```

它在客户端被反序列化和消费：

```
 public async Task<IEnumerable<Recipe>> GetAll()
    {
        HttpResponseMessage response = await _Recipeclient.GetAsync(RecipeServiceUrl);
        var jsonString = await response.Content.ReadAsStringAsync();
        return JsonConvert.DeserializeObject<Recipe[]>(jsonString);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:08:00.063

```
public int value
{
    get
    {
        return value;
    }
    set
    {
    }
} 
```

导致无限递归。你可以试试这个

```
public int value { get; set; } 
```

# excel - 搜索一列以匹配另一列中的数据并计算出现次数

> ID：13566961
> 
> 赞同：0
> 
> 时间：2012-11-26T14:32:33.453
> 
> 标签：excel, formula

我在网上搜索过，但找不到任何具体的内容。

我有下面的 A 列，我需要搜索此列并找出 B 列中的数据出现的次数，在下面的示例中，有 4 (70011x3 + 70014x1)。

```
A                        B
h323:70011               70011
70007                    70012
70011                    70013
h323:70014               70014
sip:70011@domain.com     70015 
```

我需要在 Excel 中使用什么公式？提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:12:24.020

...我不知道是否有一种简单的方法可以使用单个工作表函数来执行此操作，但我可以想到 2 种方法来完成此操作（并且很想看看是否有人能弄清楚该怎么做这在我想不到的一个简单的工作表函数中）。

无论哪种方式，我的解决方案是：

## 1）使用数组公式：

这将如下所示：

```
A                        B               C
h323:70011               70011          {=SUM(--ISNUMBER(FIND(B1,$A$1:$A$5,1)))}
70007                    70012          {=SUM(--ISNUMBER(FIND(B2,$A$1:$A$5,1)))}
...etc 
```

请注意，对于此解决方案，**您必须在最后将其作为数组公式**(Hit `ctrl`++ `shift`)`enter`输入，但是当您向下拖动 C 列并对其求和时，您将得到正确的总数。这个问题的挑战在于它并不能真正在一个单元格中为您提供答案。

## 2）使用自定义 VBA 函数（我的首选方法）：

您可以编写自己的 VBA 函数来非常容易地做到这一点。我创建的一个是：

```
 Function MyFunc(CriteriaRng As Range, SearchRange As Range) As Double

  Dim CriteriaCl As Range
  Dim SearchCl As Range

  Dim RunningTotal As Double: RunningTotal = 0

     For Each CriteriaCl In CriteriaRng
        For Each SearchCl In SearchRange
        If InStr(1, SearchCl.Value, CriteriaCl.Value) > 0 Then RunningTotal = RunningTotal + 1
        Next SearchCl
     Next CriteriaCl

  MyFunc = RunningTotal

  End Function 
```

然后，您所能做的就是在任何单元格类型中输入`=myfunc(B1:B5,A1:A5)`，您将得到正确的答案。

希望这可以帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-26T15:29:12.903

该函数`COUNTIF`采用通配符。

使用 excel 2007，您可以简单地引用整列：

```
=COUNTIF(A:A,"*"&B1&"*") 
```

对于 2003 或更低版本，您必须将范围作为单元格引用

```
=COUNTIF(A1:A2000,"*"&B1&"*") 
```

请注意，数字必须格式化为文本，或者您可以添加**countif**以覆盖数字

```
=COUNTIF(A:A,"*"&B1&"*")+COUNTIF(A:A,B1) 
```

然后，您可以`SUM`在列上使用 a 来获取总数。

# entity-framework - 使用原始 SqlQuery 在实体框架中查询抽象类

> ID：13566962
> 
> 赞同：2
> 
> 时间：2012-11-26T14:32:50.303
> 
> 标签：entity-framework, abstract-class

我正在尝试使用 SqlQuery() 方法（代码优先）查询抽象实体。

```
public abstract class UserComment
{
    ... [internals]
}

public class BlogComment : UserComment
{
    ... [internals]
}

var result = Context.Database.SqlQuery<UserComment>(
                 @"select * from [UserComments] where ... [internals]",
                 new SqlParameter("user_id", user.Id)); 
```

这给了我错误：

```
   System.ArgumentNullException：值不能为空。
   参数名称：构造函数

```

如果我将抽象类型更改为具体..

```
Context.Database.SqlQuery<BlogComment> 
```

...一切正常。

是否可以使用原始查询来查询抽象类？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:42:16.130

我没有尝试过，但我希望答案是否定的。您不能创建抽象类的实例，而这正是 EF 在具体化原始查询的结果集时试图做的事情。

# jquery - 使用 jquery 修改 span 内容

> ID：13566963
> 
> 赞同：1
> 
> 时间：2012-11-26T14:32:50.677
> 
> 标签：jquery

我在页脚 div 中有以下 html：

```
 <span itemprop="telephone"><a href="tel:01 XX XX XX XX">01 XX XX XX XX</a></span> 
```

我想在此范围内动态更改电话号码。有2个问题：

*   span 正在使用微格式数据，所以我无法根据 itemprop 找到我的发现，但我猜我需要使用电话来建立它？

*   我可以更新嵌入标签之间的 01 XX XX XX XX 但是 href 值呢？

任何人都可以帮忙吗？

我试过这个不起作用

```
 function getPhone() {
        var span = $('.wcb_row2');
        if (!span.length) return;
        return $('.wcb_row2').find('a');
    }

    function replacenumber(num) {
        if( num == 'undefined' || num== null )
        return;
        var newnum = getPhone();
        (newnum.html( newnum.html().replace(/tel:*[ ]*\d{2}[ ]\d{2}[ ]\d{2}[ ]\d{2}[ ]\d{2}/, 'tel: ' + num) ))
    }

    replacenumber( num); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:37:27.423

基本上你不是在改变`span`内容，而是在其中操纵锚点`a`......

你试过做这样的事情吗？

```
var yourNumber = /* whatever needs to be */
$("a", "[itemprop=telephone]")
    .text(yourNumber)
    .attr("href", "tel:" + yourNumber); 
```

## 一般建议 - 了解您使用的内容

如果我能给你一个一般性的建议，那就是学习。很明显，您不熟悉所有 jQuery 功能并且对正则表达式不熟悉。

因此，我建议您使用 jQuery API。这是一个小型图书馆，您应该在大约一个小时左右的时间内完成它。你应该熟悉它的所有功能，这样你至少会知道是否有东西可以使用。您可以稍后在需要时阅读它们的使用详细信息，但您至少应该知道它们在那里。

不要误会我的意思。我正在努力帮助您，因为它会让您更有效率，并且您将来能够编写更多可维护的代码。

# .net - .Net 中打印页面的页数

> ID：13566964
> 
> 赞同：1
> 
> 时间：2012-11-26T14:32:59.227
> 
> 标签：.net, printing

我希望能够在我从我的应用程序打印的页面上放置诸如“第 1 页，共 7 页”之类的页码。因此，我实施了两次打印例程。第一遍打印到一个文件，并在我完成后自动取消。第一遍的总页数用于将数据发送到打印机的第二遍。

这是生成两种类型的 PrintDocuments 的代码

```
 public static PrintDocument CreatePrintDocument(PrinterConfiguration printerConfig)
    {
        PrintDocument document = new PrintDocument();
        document.PrinterSettings.PrinterName = printerConfig.PrinterName;
        document.DefaultPageSettings.Landscape = printerConfig.IsLandscape;
        document.PrintController = new StandardPrintController(); 
        return document;
    }

    public static PrintDocument CreatePrintDocumentThatCancelsPrint(PrinterConfiguration printerConfig)
    {
        PrintDocument document = CreatePrintDocument(printerConfig);
        document.PrinterSettings.PrintToFile = true;
        document.PrinterSettings.PrintFileName = CreateTempFileName();
        document.EndPrint += (sender, e) => { e.Cancel = true; };
        return document;
    } 
```

问题是 PrintToFile 并不总是有效。在一台 Windows XP 测试计算机上，我得到一个 Win32Exception - 执行第一次通过时句柄无效。所以经过一番谷歌搜索后，我发现不支持从代码设置 PrintDocument.PrintToFile 。

> “PrintToFile 属性仅由 PrintDialog 使用，不能以编程方式设置。” [http://msdn.microsoft.com/en-us/library/system.drawing.printing.printersettings.printtofile.aspx](http://msdn.microsoft.com/en-us/library/system.drawing.printing.printersettings.printtofile.aspx)

那么，为什么不直接打印到打印机并在 EndPrint 事件中取消呢？那么，如果打印到“XPS Document Writer”打印机，那么用户将在第一遍和第二遍得到“另存为”问题。

所以问题是；打印到“XPS Document Writer”时，如何进行两次打印而不看到“另存为”对话框两次？

**解析度**

正如 JonB 指出的那样，我需要查看 PreviewPrintController，因为它是一个打印控制器，允许我与所选打印机进行静默交互。

```
public static PrintDocument CreatePrintDocument(PrinterConfiguration printerConfig)
{
    PrintDocument document = new PrintDocument();
    document.PrinterSettings.PrinterName = printerConfig.PrinterName;
    document.DefaultPageSettings.Landscape = printerConfig.IsLandscape;
    document.PrintController = new StandardPrintController(); 
    return document;
}

public static PrintDocument CreatePrintDocumentThatCancelsPrint(PrinterConfiguration printerConfig)
{
    PrintDocument document = new PrintDocument();
    document.PrinterSettings.PrinterName = printerConfig.PrinterName;
    document.DefaultPageSettings.Landscape = printerConfig.IsLandscape;
    document.PrintController = new PreviewPrintController();        
    document.EndPrint += (sender, e) => { e.Cancel = true; };
    return document;
} 
```

# hadoop - ColumnFamilyInputFormat - 无法获得输入拆分

> ID：13566966
> 
> 赞同：4
> 
> 时间：2012-11-26T14:33:00.303
> 
> 标签：hadoop, nosql, cassandra, elastic-map-reduce

当我尝试使用 ColumnFamilyInputFormat 类从 hadoop 访问 Cassandra 时，我遇到了一个奇怪的异常。在我的 hadoop 进程中，这是我连接到 cassandra 的方式，包括 cassandra-all.jar 版本 1.1：

```
private void setCassandraConfig(Job job) {
    job.setInputFormatClass(ColumnFamilyInputFormat.class);
    ConfigHelper.setInputRpcPort(job.getConfiguration(), "9160");
    ConfigHelper
        .setInputInitialAddress(job.getConfiguration(), "204.236.1.29");
    ConfigHelper.setInputPartitioner(job.getConfiguration(),
            "RandomPartitioner");
    ConfigHelper.setInputColumnFamily(job.getConfiguration(), KEYSPACE,
            COLUMN_FAMILY);
    SlicePredicate predicate = new SlicePredicate().setColumn_names(Arrays
            .asList(ByteBufferUtil.bytes(COLUMN_NAME)));
    ConfigHelper.setInputSlicePredicate(job.getConfiguration(), predicate);
    // this will cause the predicate to be ignored in favor of scanning
    // everything as a wide row
    ConfigHelper.setInputColumnFamily(job.getConfiguration(), KEYSPACE,
            COLUMN_FAMILY, true);
    ConfigHelper.setOutputInitialAddress(job.getConfiguration(),
            "204.236.1.29");
    ConfigHelper.setOutputPartitioner(job.getConfiguration(),
            "RandomPartitioner");
}

public int run(String[] args) throws Exception {
    // use a smaller page size that doesn't divide the row count evenly to
    // exercise the paging logic better
    ConfigHelper.setRangeBatchSize(getConf(), 99);

    Job processorJob = new Job(getConf(), "dmp_normalizer");
    processorJob.setJarByClass(DmpProcessorRunner.class);
    processorJob.setMapperClass(NormalizerMapper.class);
    processorJob.setReducerClass(SelectorReducer.class);
    processorJob.setOutputKeyClass(Text.class);
    processorJob.setOutputValueClass(Text.class);
    FileOutputFormat
            .setOutputPath(processorJob, new Path(TEMP_PATH_PREFIX));
    processorJob.setOutputFormatClass(TextOutputFormat.class);
    setCassandraConfig(processorJob);
    ...
} 
```

但是当我运行 hadoop（我在亚马逊 EMR 上运行它）时，我得到了下面的异常。并不是说 ip 是 127.0.0.1 而不是我想要的 ip...

有什么提示吗？我可能做错了什么？

```
2012-11-22 21:37:34,235 ERROR org.apache.hadoop.security.UserGroupInformation (Thread-6): PriviledgedActionException as:hadoop cause:java.io.IOException: Could not get input splits 
2012-11-22 21:37:34,235 INFO org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob (Thread-6): dmp_normalizer got an error while submitting java.io.IOException: Could not get input splits at 
    org.apache.cassandra.hadoop.ColumnFamilyInputFormat.getSplits(ColumnFamilyInputFormat.java:178) at 
    org.apache.hadoop.mapred.JobClient.writeNewSplits(JobClient.java:1017) at 
    org.apache.hadoop.mapred.JobClient.writeSplits(JobClient.java:1034) at 
    org.apache.hadoop.mapred.JobClient.access$700(JobClient.java:174) at 
    org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:952) at 
    org.apache.hadoop.mapred.JobClient$2.run(JobClient.java:905) at 
    java.security.AccessController.doPrivileged(Native Method) at 
    javax.security.auth.Subject.doAs(Subject.java:396) at 
    org.apache.hadoop.security.UserGroupInformation.doAs(UserGroupInformation.java:1132) at 
    org.apache.hadoop.mapred.JobClient.submitJobInternal(JobClient.java:905) at 
    org.apache.hadoop.mapreduce.Job.submit(Job.java:500) at 
    org.apache.hadoop.mapreduce.lib.jobcontrol.ControlledJob.submit(ControlledJob.java:336) at 
    org.apache.hadoop.mapreduce.lib.jobcontrol.JobControl.run(JobControl.java:233) at 
    java.lang.Thread.run(Thread.java:662) Caused by: java.util.concurrent.ExecutionException: java.io.IOException: failed connecting to all endpoints 127.0.0.1 at 
    java.util.concurrent.FutureTask$Sync.innerGet(FutureTask.java:222) at 
    java.util.concurrent.FutureTask.get(FutureTask.java:83) at 
    org.apache.cassandra.hadoop.ColumnFamilyInputFormat.getSplits(ColumnFamilyInputFormat.java:174) ... 13 more Caused by: java.io.IOException: failed connecting to all endpoints 127.0.0.1 at 
    org.apache.cassandra.hadoop.ColumnFamilyInputFormat.getSubSplits(ColumnFamilyInputFormat.java:272) at 
    org.apache.cassandra.hadoop.ColumnFamilyInputFormat.access$200(ColumnFamilyInputFormat.java:77) at 
    org.apache.cassandra.hadoop.ColumnFamilyInputFormat$SplitCallable.call(ColumnFamilyInputFormat.java:211) at 
    org.apache.cassandra.hadoop.ColumnFamilyInputFormat$SplitCallable.call(ColumnFamilyInputFormat.java:196) at java.util.concurrent.FutureTask$Sync.innerRun(FutureTask.java:303) at 
    java.util.concurrent.FutureTask.run(FutureTask.java:138) at 
    java.util.concurrent.ThreadPoolExecutor$Worker.runTask(ThreadPoolExecutor.java:886) at 
    java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:908) ... 1 more 
2012-11-22 21:37:39,319 INFO com.s1mbi0se.dmp.processor.main.DmpProcessorRunner (main): Process ended 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-17T03:39:19.723

我能够通过更改 cassandra 配置来解决问题。listen_address 需要是一个有效的外部 ip 才能工作。

异常似乎与它无关，我花了很长时间才找到答案。最后，如果你在 cassandra 配置中指定 0.0.0.0 并尝试从外部 ip 访问它，你会收到这个错误，说在 127.0.0.1 找不到主机。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2015-06-28T17:48:57.710

就我而言，这是错误的键空间名称问题，请仔细查看您传递给 ConfigHelper.setInputColumnFamily 方法的内容。

# java - ActivityMonitor getHits() 不起作用

> ID：13566967
> 
> 赞同：2
> 
> 时间：2012-11-26T14:33:01.427
> 
> 标签：java, android

我试过这个测试，但 getHits() 总是返回 0。任何人都可以帮助我吗？

```
 public void testSettingsAboutShazamClickOnLink() {

    Instrumentation inst = getInstrumentation();
    IntentFilter intentFilter = new IntentFilter(android.content.Intent.ACTION_SENDTO);
    intentFilter.addDataScheme("mailto");

    ActivityMonitor monitor = inst.addMonitor(intentFilter, null, false);
    final Intent emailIntent = new Intent(android.content.Intent.ACTION_SENDTO);
    emailIntent.setData(Uri.parse("mailto:"));
    emailIntent.addFlags(Intent.FLAG_ACTIVITY_NEW_TASK);

    assertEquals(0, monitor.getHits());
    inst.getContext().startActivity(emailIntent);        
    monitor.waitForActivityWithTimeout(5000);
    assertEquals(1, monitor.getHits());
    inst.removeMonitor(monitor);
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-11T17:44:48.810

我解决了这个问题。我使用了Robotium的Solo，显然Solo插入了一个匹配每个Filter的ActivityMonitor，所以当你调用startActivity时，它会调用Instrumentation类中的execStartActivity，其代码是

```
 Context who, IBinder contextThread, IBinder token, Activity target,
    Intent intent, int requestCode) {
    IApplicationThread whoThread = (IApplicationThread) contextThread;
    if (mActivityMonitors != null) {
        synchronized (mSync) {
            final int N = mActivityMonitors.size();
            for (int i=0; i<N; i++) {
                final ActivityMonitor am = mActivityMonitors.get(i);
               if (am.match(who, null, intent)) {
                   am.mHits++;
                    if (am.isBlocking()) {
                        return requestCode >= 0 ? am.getResult() : null;
                    }
                   break;
                }
            }
       }
    } 
```

一旦有一个 ActivityMonitor 匹配某个东西，该监视器的 mHits 就会增加，“周期”就会中断。鉴于调用 Solo 是我做的第一件事，第一个要检查的 ActivityMonitor 是 Solo 的，因为它匹配所有内容，在未检查之后添加的任何其他 ActivityMonitors，因此不会为其他监视器增加 mHits 变量。如果你想了解更多，请看 Instrumentation 类的 execStartMonitor 方法，记住这个方法是在调用 startActivity 之后调用的。

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/app/Instrumentation.java#Instrumentation.execStartActivity%28android.content.Context%2Candroid .os.IBinder%2Candroid.os.IBinder%2Candroid.app.Activity%2Candroid.content.Intent%2Cint%29](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/1.5_r4/android/app/Instrumentation.java#Instrumentation.execStartActivity%28android.content.Context%2Candroid.os.IBinder%2Candroid.os.IBinder%2Candroid.app.Activity%2Candroid.content.Intent%2Cint%29)

# android - Android不调整大小？

> ID：13566969
> 
> 赞同：0
> 
> 时间：2012-11-26T14:33:03.360
> 
> 标签：android, layout, scaling

我正在 Eclipse 的 4in 模拟器上开发我的应用程序。我的手机是 4.6 英寸的 android 设备，当我在那里测试时，内容无法正确缩放。

看起来手机将内容保持在相同的大小，它只是将所有内容向上移动并将多余的空间留空。

根据我的阅读，我认为只要我使用 dp 而不是 in，它就应该保持相同的布局。这是否意味着我的图像也需要是 dp ？

有什么建议么？

编辑：

这是一些代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:background="@drawable/tfltestbg2"
    android:orientation="vertical" >

    <ImageView
            android:layout_width="fill_parent"
            android:layout_height="55dp"
            android:background="@drawable/tfl_header_port" 
            android:gravity = "center_horizontal"
            android:layout_gravity = "center_horizontal"/>

    <LinearLayout
        android:layout_width="fill_parent"
        android:layout_height="40dp"
        android:orientation="horizontal" 
        android:layout_gravity = "center"
        android:gravity = "center"
>

        <Button
            android:id="@+id/buttonTakePic"
            android:layout_width="100dp"
            android:layout_height="match_parent"
            android:layout_gravity="left"
            android:gravity = "left"
            android:background="@drawable/takepic_button" />

        <Button
            android:id="@+id/mMegaGalleryButton"
            android:layout_width="120dp"
            android:layout_height="match_parent"
            android:layout_gravity="center"
            android:gravity = "center"
            android:background="@drawable/add_fotos" />

        <Button
            android:id="@+id/mGalleryButton"
            android:layout_width="100dp"
            android:layout_height="match_parent"
            android:layout_gravity="right"
            android:gravity = "right"
            android:background="@drawable/selectpic" 
            android:paddingLeft = "10dp"
            android:paddingRight = "10dp"/>

    </LinearLayout>

    <LinearLayout
        android:id="@+id/image_container"
        android:layout_width="match_parent"
        android:layout_height="300dp"
        android:layout_gravity="center"
        android:background="@drawable/outline_box"
        android:gravity="center">

        <FrameLayout
            android:layout_width = "match_parent"
            android:layout_height = "fill_parent"
            android:gravity = "center"
            android:layout_gravity = "center">

            <ImageView
                android:id="@+id/image"
                android:layout_width="match_parent"
                android:layout_height="match_parent"
                android:layout_gravity="center"
                android:background = "@drawable/blank"
                android:gravity="center" />

            <ImageView
                android:id="@+id/picsImage"
                android:layout_width = "100dp"
                android:layout_height = "100dp"
                android:layout_gravity="center"
                android:gravity="center"
                android:background = "@drawable/picture_box"/>
        </FrameLayout>
    </LinearLayout>

    <Button
        android:id="@+id/mEditButton"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_gravity="center"
        android:background="@drawable/edit_pic_button" />

    <View
        android:layout_width="match_parent"
        android:layout_height="10dp" />

    <Button
        android:id="@+id/buttonUploadPic"
        android:layout_width="wrap_content"
        android:layout_height="50dp"
        android:layout_gravity="center"
        android:background="@drawable/upload_pic_button" />

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T15:07:30.417

如果将应用程序用于不同尺寸的屏幕，请使用相对布局而不是线性布局，并且不要使用硬编码的尺寸，如 40dp、50dp。

[相对布局](http://developer.android.com/reference/android/widget/RelativeLayout.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-04-13T22:17:47.500

将固定 dp 转换为重量的最简单方法：

改变这个：

android:layout_width="100dp"

对此：

android:layout_width="0dp"

android:layout_weight="100"

为所有按钮执行此操作，它们看起来与 4" 中的完全一样，并且可以在任何屏幕上完美缩放。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T15:21:34.040

您的布局中的问题是您在错误的地方使用了固定值！相反`android:layout_width="100dp"`，在按钮中（在水平布局中）你应该使用`android:layout_width="fill_parent"`.
您必须为此按钮设置非零值，`layout_weight`以便它们可以与此布局中的其他兄弟共享空间。

# c# - 奇怪的 EF 行为 - 意外的长时间

> ID：13566978
> 
> 赞同：1
> 
> 时间：2012-11-26T14:33:39.337
> 
> 标签：c#, database, performance, entity-framework

我有EF，首先是数据库。我有三个模型类`A`：`B`和`C`。模型与`A`具有 m2m 关系，`B`并且与`B`具有 m2m 关系`C`。

我列出了`A`与相关`B`和的子集`C`。

在测试环境中，子集中有大约 20 个模型`A`，只有少数有任何相关`B`，如果有，在大多数情况下它只是一个。

模型`B`一直只有一个相关`C`的。我不想更改它，因为将来会有更多`C`与 one 相关的内容`B`。

我的第一种方法是：

```
var listA = new Entities(...).As.Where(...).ToList();
foreach (var objA in listA){
    var listC = objA.Bs.ToList().Select(b => b.FirstOrDefault(c => ...)).ToList();
} 
```

它花了大约 164 毫秒 - 相当长。

所以我想优化它。

如您所见，在第一行`IQueryable<A>`更改为`List<A>`. 我认为，此时此刻，查询已被执行。

当我想获得`Bs`for`A`和`C`for`B`时，我认为会执行另一个查询。

然后我搜索并找到了`Include`方法。在第二种方法中，我像这样使用它：

```
var listA = new Entities(...).As.Include("Bs.Cs").Where(...).ToList();
foreach (var objA in listA){
    var listC = objA.Bs.ToList().Select(b => b.FirstOrDefault(c => ...)).ToList();
} 
```

在我看来，执行应该需要大约 10 毫秒，但现在需要 550 毫秒。

当我只是列出`As`没有相关`Bs`的`Cs`内容时，大约需要 10 毫秒。

我究竟做错了什么？

编辑：抱歉，C 对 B 有 FK。但我认为它不会改变任何东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T10:03:57.910

如果您的 DbContext 支持“默认情况下为真”的延迟加载，那么每当您调用时都会对数据库产生很多命中`objA.Bs.ToList()`，`b => b.FirstOrDefault(c => ...)` **那是因为您没有在第一个`listA`查询**中包含这些导航属性。

**无论如何尝试使用 Include 方法**

```
var listA = new Entities(...).As.Include("Bs").Include("Bs.Cs").Where(...).ToList(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-03T14:05:21.937

根据我的经验，相关对象的显式加载要快一些。请尝试使用对象 Load() 方法加载并使用 IsLoaded 检查它是否已加载。另外关闭延迟加载和显式打开连接可能会有所帮助。

类似以下内容可能会有所帮助。

```
var listA = from o in context where (...) select o;
foreach (var i in listA)
            {
                if (!i.Bs.IsLoaded)
                    i.Bs.Load();
                if (i.Bs != null)
                {
                    if (!i.Bs.Cs.IsLoaded)
                        i.Bs.Cs.Load();
                }

            } 
```

# c# - 在 Devexpress 的 NavBarGroup 中自定义展开/折叠按钮

> ID：13566979
> 
> 赞同：0
> 
> 时间：2012-11-26T14:33:59.290
> 
> 标签：c#, .net, winforms, devexpress

我有一个 NavBarControl，其中包含 NavBarGroups 的集合。NavBarGroup 有一个标题和容器控件。NavBarGroups 可以折叠/展开。展开/折叠按钮位于右侧。默认情况下，它看起来像双上/下箭头。我想自定义此按钮以更改其外观以指示折叠/展开状态。

（在 Windows 窗体中使用 Devexpress）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:06:28.303

为了将来参考，DevExpress 的自助和在线支持非常彻底，他们会在 24 小时内为付费订阅者回答此类问题，通常会提供代码示例。

在这种情况下，有两种方法可以实现您的目标（假设您使用的是相对较新的 DevExpress 版本），如此[处](http://www.devexpress.com/Support/Center/Question/Details/Q447259)所述。

做你想做的事情的“正确方法”是用你自己的图标制作自定义皮肤；您可以使用他们的皮肤编辑器打开您当前的皮肤，进行更改并保存。他们控件的外观和感觉的几乎每个方面都被蒙皮，您可以对它们进行相当大的更改。

部署自定义皮肤并不是那么复杂，但对于您想要达到的效果来说可能有点矫枉过正。另一个选项是自定义绘制组标题。该帖子附有一个示例，这是一个这样做的工作示例，但您基本上实现了[CustomDrawGroupCaption](http://documentation.devexpress.com/#WindowsForms/DevExpressXtraNavBarNavBarControl_CustomDrawGroupCaptiontopic)事件并进行自己的绘画，包括根据组状态所需的任何图标。

# perl - 如果我的代码中没有诊断，为什么 Perl 会编译 diagnostics.pm？

> ID：13566980
> 
> 赞同：25
> 
> 时间：2012-11-26T14:34:06.260
> 
> 标签：perl, devel-nytprof

当我查看[CGI 程序的](http://perl-hunting.blogspot.de/2010/01/use-develnytprof-with-cgi-and-apache.html)[Devel::NYTProf](https://metacpan.org/module/Devel::NYTProf) v4的输出时，我在报告Source Code Files 中遇到了*- 按独占时间排序，然后按名称排序*。`diagnostics.pm`

 *![诊断.pm](../Images/01460d48235b0769cacae7a58d0a0b0c.png)

首先，我不明白为什么会出现在生产代码中。我深入研究了报告，发现它是由`main::BEGIN@17`. 反过来，这就是以下行：

```
# spent 34µs (26+8) within main::BEGIN@15 which was called: # once (26µs+8µs) by main::RUNTIME at line 15
use strict;
# spent 34µs making 1 call to main::BEGIN@15 # spent 8µs making 1 call to strict::import

# spent 36µs (17+19) within main::BEGIN@16 which was called: # once (17µs+19µs) by main::RUNTIME at line 16
use warnings;

# spent 36µs making 1 call to main::BEGIN@16 # spent 19µs making 1 call to warnings::import

# spent 292ms (171+121) within main::BEGIN@17 which was called: # once (171ms+121ms) by main::RUNTIME at line 17
no diagnostics;
# spent 292ms making 1 call to main::BEGIN@17

# spent 135µs (27+108) within main::BEGIN@18 which was called: # once (27µs+108µs) by main::RUNTIME at line 18
use Carp qw( carp croak ); 
```

所以这似乎是罪魁祸首。我拔掉了`no diagnostics`线路，电话就没有了，有效地节省了大约 300 毫秒的时间。

以下是[perldoc`use`](http://perldoc.perl.org/functions/use.html)关于`no`关键字的说明：

> 有一个相应的 no 声明 unimports 使用导入的含义，即它调用 unimport Module LIST 而不是 import。它的行为与 import 对 VERSION、省略或空 LIST 或未找到 unimport 方法的行为一样。
> 
> ```
> no integer;
> no strict 'refs';
> no warnings; 
> ```

所以这是我的实际问题：**我是否正确假设如果我调用`no diagnostics`，它实际上是在`unimport`ed 之前加载的？**

调用`no diagnostics`类似于这段代码吗？

```
BEGIN {
  require diagnostics.pm;
  diagnostics->unimport;
} 
```

因此，仅取消导入从未导入的东西是不是一个坏主意，因为这实际上首先加载了它？

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-11-26T14:38:06.217

> 我是否正确假设如果我调用`no diagnostics`，它实际上是在未导入之前加载的？

是的。它确实完全等同于

```
BEGIN {
  require diagnostics;
  diagnostics->unimport;
} 
```

所以`no module`命令实际加载并编译模块；包括执行不在任何**sub**、 BEGIN 块等中的代码；对于给定模块的所有依赖项都相同（对于内部的每次**使用**/**需要**）。*

# android - 通过网络在移动设备上录制音频

> ID：13566981
> 
> 赞同：1
> 
> 时间：2012-11-26T14:34:09.877
> 
> 标签：android, iphone, windows-phone-7, mobile-website, voice-recording

我希望能够通过让用户通过在网页上按下按钮来触发录制来在手机上录制音频。根据我所阅读的内容，HTML 5 支持（某种）音频录制，但并非所有浏览器都实现了它。许多类似的问题都是 6-15 个月大的，似乎对录音的支持正在迅速发展。

所以我想知道的是，这可以在今天还是在未来 3-6 个月内完成，还是我必须为各种手机创建原生应用程序？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T13:19:42.117

可能类似 Cordova 的框架是适合您的一种方式。您将能够创建 html 应用程序，Cordova build 将为您创建适用于所有平台的本地包。

科尔多瓦 (PhoneGap) 主页

[http://phonegap.com/](http://phonegap.com/)

特殊录音垫片

[http://docs.phonegap.com/en/1.9.0/cordova_media_capture_capture.md.html](http://docs.phonegap.com/en/1.9.0/cordova_media_capture_capture.md.html)

# r - 如何使用 R 中的另一个日期列部分替换列的数据

> ID：13566982
> 
> 赞同：0
> 
> 时间：2012-11-26T14:34:10.407
> 
> 标签：r

我有一个示例数据集，如下所示

```
sampDate <- as.Date(c("2011-09-01","2011-09-02","2011-09-03","2011-09-04","2011-09-05", "2011-09-06"), format ="%Y-%m-%d")

p1 <- c( 10,  6.1, 11.1,  9.1,  10.1, 7)
p2 <- rep(1,6)

df <- data.frame(sampDate,p1,p2);df

    sampDate   p1  p2
1 2011-09-01 10.0  1
2 2011-09-02  6.1  1
3 2011-09-03 11.1  1
4 2011-09-04  9.1  1
5 2011-09-05 10.1  1
6 2011-09-06  7.0  1 
```

我想用零替换 p2 列中的 1，它们从日期 2011-09-01 到 2011-09-03，而不是零，以便生成的数据框是这样的；

```
 sampDate   p1  p2
1 2011-09-01 10.0  0
2 2011-09-02  6.1  0
3 2011-09-03 11.1  0
4 2011-09-04  9.1  1
5 2011-09-05 10.1  1
6 2011-09-06  7.0  1 
```

我一直在尝试使用`ifelse`和其他索引运算符，但我只是遇到了一堵砖墙。如果我能得到一个索引方法，那将是最好的，因为我的数据集很大。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:44:15.150

```
within(df, p2 <- replace(p2, sampDate>="2011-09-01" & sampDate<="2011-09-03", 0)) 
```

会成功的。

```
 sampDate   p1 p2
1 2011-09-01 10.0  0
2 2011-09-02  6.1  0
3 2011-09-03 11.1  0
4 2011-09-04  9.1  1
5 2011-09-05 10.1  1
6 2011-09-06  7.0  1 
```

# java - java ArrayList 包含不同的对象

> ID：13566983
> 
> 赞同：9
> 
> 时间：2012-11-26T14:34:22.537
> 
> 标签：java, object, arraylist

是否可以创建 `ArrayList<Object type car,Object type bus> list = new ArrayList<Object type car,Object type bus>()`；

我的意思是将来自不同类的对象添加到一个数组列表中？

谢谢。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-11-26T14:36:41.603

是的，有可能：

```
public interface IVehicle { /* declare all common methods here */ }
public class Car implements IVehicle { /* ... */ }
public class Bus implements IVehicle { /* ... */ }

List<IVehicle> vehicles = new ArrayList<IVehicle>(); 
```

该`vehicles`列表将接受任何实现`IVehicle`.

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-11-26T14:36:01.973

是的你可以。但是您需要一个对象类型的通用类。在你的情况下，这将是`Vehicle`.

例如：

车辆等级：

```
public abstract class Vehicle {
    protected String name;
} 
```

巴士等级：

```
public class Bus extends Vehicle {
    public Bus(String name) {
        this.name=name;
    }
} 
```

车类：

```
public class Car extends Vehicle {
    public Car(String name) {
        this.name=name;
    }
} 
```

主类：

```
public class Main {
    public static void main(String[] args) {
        Car car = new Car("BMW");
        Bus bus = new Bus("MAN");
        ArrayList<Vehicle> list = new ArrayList<Vehicle>();
        list.add(car);
        list.add(bus);
   }
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2012-11-26T14:37:18.547

使用**多态性**。假设您有一个and的父类`Vehicle`。`Bus``Car`

```
ArrayList<Vehicle> list = new ArrayList<Vehicle>(); 
```

您可以添加类型的对象`Bus`，`Car`或`Vehicle`添加到此列表，因为 Bus *IS-A* Vehicle、Car *IS-A* Vehicle 和 Vehicle *IS-A* Vehicle。

从列表中检索对象并根据其类型进行操作：

```
Object obj = list.get(3);

if(obj instanceof Bus)
{
   Bus bus = (Bus) obj;
   bus.busMethod();
}
else if(obj instanceof Car)
{
   Car car = (Car) obj;
   car.carMethod();
}
else
{
   Vehicle vehicle = (Vehicle) obj;
   vehicle.vehicleMethod();
} 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-11-26T14:39:10.993

不幸的是，您不能指定多个类型参数，因此您必须为您的类型找到一个公共超类并使用它。一个极端的情况是使用`Object`：

```
List<Object> list = new ArrayList<Object>(); 
```

请注意，如果您检索项目，您需要将结果转换为您需要的特定类型（以获得完整功能，而不仅仅是通用功能）：

```
Car c = (Car)list.get(0); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-09-29T12:59:45.853

创建一个类并使用多态性。然后在点击中拾取对象，使用instanceof。

# asp.net - 在 ASP 中，创建动态文本框并为其赋值？

> ID：13566984
> 
> 赞同：1
> 
> 时间：2012-11-26T14:34:23.453
> 
> 标签：asp.net, database

我正在处理一个网页，我会将我拥有的数据连接到数据库。所以我的问题是如何创建不同数量的标签并为它们分配值或数据而不丢失它们？我在一个网页上工作，我有新标签的占位符，但我不知道如何将它们保留在那里并为它们分配值以便将它们保存在数据库中。以下是我的代码的一部分，我放置了占位符在执行时创建更多标签。

```
<tr> 
<td style="text-align:right"><b><br /><br />
   <asp:Label ID="lblAudioLabel" runat="server">Audio:</asp:Label>
   <br /><br /></b>
</td> 
<td><br /><br />
   <asp:Label ID="lblPrimary" runat="server"></asp:Label>
   <br />
   <asp:PlaceHolder ID="placeHolderAudio" runat="server" /><br />
</td> 
</tr> 
```

我需要添加的数字每次都会有所不同。所以，我想每次在占位符中有多个号码时添加一个新号码。我是 ASP 新手，所以任何帮助对我都有很大帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T14:47:43.417

我认为您的要求基本上是每次保存文本框值，然后使用文本框添加新值，如果我对您的要求有正确的理解，那么您可以做的是从文本框中创建这些值的列表并将其添加到查看状态和下次当页面回发时，您可以再次创建新的文本框并通过获取它们的视图状态在其中填充值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-27T22:29:13.013

我建议使用内置的 ASP.NET 数据绑定控件而不是占位符方法。

这是一个很好的教程，解释了 ASP.NET 中数据绑定的基础知识。它较旧，从 2004 年开始，但仍然非常适用。

[掌握 ASP.NET 数据绑定](http://www.codeproject.com/Articles/8659/Mastering-ASP-NET-DataBinding)

高温高压

# magento - 1.4.1.1 版问题 汇总特价

> ID：13566986
> 
> 赞同：2
> 
> 时间：2012-11-26T14:34:36.483
> 
> 标签：magento

我正在使用 magento 1.4.1.1 并尝试使用朋友（Daniel Sloof）的线索 [http://stackoverflow.com/questions/9411971/round-special-price-only-in-magento] 没有工作。在恢复 bkp 之前。

我正在使用组合产品，需要为所有组客户申请四舍五入的折扣价，批发：30%，批发：40%，批发：50%

我尝试使用：app/code/core/Mage/Core/Model/Store.php

```
public function roundPrice($price)  
{
return round((ceil($price*10)/10), 2);
} 
```

问题出在购物车中，这个四舍五入小计，它不能。或者更简单的方法（正确）来做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-27T09:38:41.750

roundPrice 方法用于向用户显示价格的大多数地方，因此这肯定会改变网站上显示的其他价格。

您可以尝试覆盖产品模型中的 getSpecialPrice 方法。这可以通过将 app/code/core/Mage/Catalog/Model/Product.php 复制到 app/code/local/Mage/Catalog/Model/Product.php 并在那里修改来完成。

```
/**
 * Returns special price
 *
 * @return float
 */
public function getSpecialPrice()
{
    return $this->_getData('special_price');
} 
```

改成：

```
/**
 * Returns special price
 *
 * @return float
 */
public function getSpecialPrice()
{
    return round((ceil($this->_getData('special_price')*10)/10), 2);
} 
```

**我没有对此进行测试**，它很可能会导致问题，如果不进一步查看，我不确定，可能有一些地方 Magento 在不使用这种方法的情况下以另一种方式获得特价，所以你必须自己测试:)

# c# - ViewBag 中的 unicode 输出

> ID：13566989
> 
> 赞同：2
> 
> 时间：2012-11-26T14:34:41.957
> 
> 标签：c#, string, asp.net-mvc-3, unicode, viewbag

从我的控制器中，我将带有 unicode 的向上箭头 (&uarr) 或向下箭头 (&darr) 分配给要在视图中使用的 ViewBag。

当然我希望输出变成一个箭头，但这不起作用并且输出变成一个字符串（例如&uarr）。

**控制器：**

```
...
ViewBag.Arrow = "&uarr;";
... 
```

**看法：**

```
...
ViewBag.Arrow <br /> // <--- &uarr;
... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-26T14:40:40.893

您必须使用 输出`@Html.Raw(ViewBag.Arrow)`，这样您的字符串将逐字呈现，而不是编码（这就是问题所在）。

使用简单的输出`@ViewBag.Arrow`会导致 asp.net mvc 对您的值进行编码以实现安全的 html 输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-26T14:48:27.823

使用起来`@MvcHtmlString.Create(ViewBag.Arrow)`比`@Html.Raw(...`. 请在此处查看我的答案，原因是：[Writing/outputing HTML strings unscaped](https://stackoverflow.com/questions/4281424/asp-net-mvc-razor-output-html-string-non-escaped/5084995#5084995)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-11-26T14:38:35.550

你可以尝试这样的事情：

```
WebUtility.HtmlDecode(ViewBag.Arrow); 
```

# sql - 如何在触发器中获取sql语句

> ID：13566995
> 
> 赞同：0
> 
> 时间：2012-11-26T14:35:04.140
> 
> 标签：sql, sql-server, triggers

我为每个表插入、更新、删除触发器以记录操作。我正在从删除、插入并将这些数据包装到 xml 之前和之后检索数据。但是有些日志不能显示之前和更新值。我的sql语句是：

```
USE [cop]

GO
SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
ALTER TRIGGER [dbo].[Delete]   ON  [dbo].[Seanslar]   
    AFTER DELETE 
AS 
BEGIN 

SET NOCOUNT ON 

DECLARE @deleted AS XML 
SET @deleted = (select * from deleted for xml AUTO, ELEMENTS XSINIL)

DECLARE @logIslem TINYINT 
SET @logIslem = 3 

DECLARE @tableName VARCHAR(200) 
SELECT @tableName = OBJECT_SCHEMA_NAME( parent_id ) + '.' + OBJECT_NAME( parent_id ) 
  FROM sys.triggers 
 WHERE object_id = @@PROCID  

DECLARE @xmlToChar NVARCHAR(MAX)
SET @xmlToChar = CAST(@deleted AS nvarchar(MAX))

IF LEN(@xmlToChar)<10 
BEGIN 
    IF EXISTS(select * from deleted)
        select @xmlToChar = CAST(seans_id AS NVARCHAR(MAX)) from deleted
    ELSE
        SET @xmlToChar = 'Deleted is empty!'
END

DECLARE @allXml AS XML  
SET @allXml = '<'+@tableName+'>'+ @xmlToChar +'</'+@tableName+'>'  

INSERT INTO [dbo].[Logla]
    ([logIslem], [trgKullanici_id], [tabloAdi], [logXml])     
VALUES           
    (@logIslem, SUSER_NAME(), @tableName, @allXml)

  END 
```

有什么方法可以学习在触发器中执行的“sql语句”？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-26T16:22:49.180

没有实用的方法来捕获由该语句触发的*DML触发器内正在执行的 SQL 语句文本。*

您可以使用*DDL*（元数据）触发器执行此操作，但不能使用*DML*（正常）触发器。

* * *

是的，有一种或两种***非常***不切实际的方法可以做到这一点，但我真的不推荐它们，除非：

1.  你非常非常精通 SQL，并且
2.  你真的，真的需要得到它，并且
3.  您可以负担大量的开发和测试时间

# php - Symfony 1.4 表单字段取决于配置

> ID：13566996
> 
> 赞同：1
> 
> 时间：2012-11-26T14:35:14.473
> 
> 标签：php, forms, configuration, symfony-1.4

我在我的 php 项目中使用 symfony 1.4。我有一个可以根据用户配置进行扩展的表单。如果用户为任务选择了额外的标签或预算，则该信息应该嵌入到表单类中，并在表单部分（附加输入）中显示为小部件。

例如：

1.  管理员希望只有基本任务没有 buget 或标签。编辑或创建新任务时仅显示 TasksForm 小部件。

2.  管理员希望有带有标签的基本任务。TasksForm 显示附加字段，使用户能够选择标签。

3.  管理员希望拥有所有选项（标签 + 预算）

db中的关系是：

```
Tasks:
  columns:
    name: string(127)
    created_at: timestamp
    updated_at: timestamp

Budget:
  columns:
    task_id: integer
    budget_prognosis: integer
    budget_used: integer
  relations:
    Tasks:
      local: task_id
      foreign: id
      type: one

TaskHasLabel:
  columns:
    task_id: 
      type: integer
      primary: true
    label_id:
      type: integer
      primary: true
  relations:
    Tasks:
      local: task_id
      foreign: id
      type: one
      onDelete: CASCADE
    Labels:
      local: label_id
      foreign: id
      type: one
      onDelete: CASCADE

Labels:
  columns:
    name: string(127)
  relations:
    Tasks:
      class: Task
      local: label_id
      foreign: task_id
      refClass: TaskHasLabel 
```

目的是在未来轻松更改表单的配置并添加新的配置选项。我知道我可以通过为每个组合创建单独的表单来做到这一点，但我不想重复自己。另一个想法是将所有字段组合在一个表单中并隐藏它们，但在我看来这不是一个好主意。我想到了通过表单构造函数中的参数进行配置，但我也不确定。在这种情况下，最佳做法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-26T15:37:43.297

在所有可能性中：

*   子类化表单，这样您就不会“重复自己”。如果您只有一两个选择，这很好，但如果选择更多，它很快就会成为问题（如果只有 2 个选项并且所有组合都有效，则为 4 种形式）。
*   为每个选项创建一个表单。然后，使用构造函数参数，为用户想要显示的每个附加功能添加嵌入式表单。如果用户无权查看数据，这也允许您阻止显示某些选项（如果信息隐藏在浏览器中，这些选项将可用）。

嵌入式表单在 SF1.4 中运行良好（请参阅[此处](http://symfony.com/legacy/doc/more-with-symfony/1_4/en/06-Advanced-Forms#chapter_06_embedding_forms)）。这将是我的解决方案。它还使 MVC 保持工作。如果你的模型使用 Doctrine，你也可以阅读[这个](http://symfony.com/legacy/doc/more-with-symfony/1_4/en/06-Advanced-Forms#chapter_06_easily_embedding_doctrine_related_forms)。

# sql-server-2008 - SQL Server 2008 本地连接字符串

> ID：13566997
> 
> 赞同：0
> 
> 时间：2012-11-26T14:35:16.610
> 
> 标签：sql-server-2008, tcp, database-connection, connection-string

我正在尝试通过在我的 Windows Server 2008 R2 机器上连接到 SQL Server 2008 在 *本地运行单元测试。*

我有以下两个连接字符串——第一个不起作用，但第二个起作用。

```
DOES NOT WORK
Data Source=XX.YY.ZZ.AAA;Initial Catalog=db_name;Trusted_Connection=Yes;Persist Security Info=True;MultipleActiveResultSets=True

WORKS
Data Source=myserver1\SQLEXPRESS;Initial Catalog=db_name;Trusted_Connection=Yes;Persist Security Info=True;MultipleActiveResultSets=True 
```

**唯一的区别是数据源属性！** 第二个有效，但第一个无效。我假设连接尝试通过 TCP 实际连接到 SQL 服务器，但这是否应该阻止我实际登录？

# nginx - nginx 连接限制

> ID：13566998
> 
> 赞同：2
> 
> 时间：2012-11-26T14:35:20.257
> 
> 标签：nginx, php

我们有 2 台 nginx 服务器以 1000reqs/秒的速度完美运行，在 3 台具有 TCP 连接的 php5-fpm 服务器前面。我们认为一台 nginx 服务器就足够了，并将我们所有的流量重定向到它。但是，服务器的服务速度不能超过 750reqs/sec。它具有千兆以太网并且其上的总流量不超过 100mbits (Debian 6.0)

我们找不到任何原因，在谷歌搜索后发现它可能与 TCP 问题有关。但是我们似乎不太可能对这个连接数和带宽（大约 70 兆位/秒）进行任何更改。后来我们将一半的流量重定向回另一个 nginx，再次达到 1000reqs/秒。

我们一直在查看 nginx 错误和访问日志。是否有任何工具或文件可以帮助我们找到问题的解决方案？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-28T20:45:49.470

大多数 linux 发行版都有[28232 个可用的临时端口](http://en.wikipedia.org/wiki/Ephemeral_port)。服务器需要为每个连接提供一个临时端口，以便为新连接释放主要端口（即 http 服务器端口 80）。

因此，如果服务器正在处理 php5-fpm 通过 TCP 生成的内容的每秒 1000 个请求，那么您将分配 2000 个端口/秒。情况并非如此，可能 5% 的 PHP 和 95% 的静态（无端口分配）和 IIRC nginx<->php-fpm 为后续请求保持端口打开。有很多因素会影响这些数字，但为了争论，让我们说 1000 端口分配/秒。

从表面上看，这似乎不是问题，但默认情况下，端口不会立即释放并可供新连接使用。这种行为有多种原因，我强烈建议在此处（或其他任何地方）任意进行详细更改之前彻底了解[TCP 。](http://en.wikipedia.org/wiki/Transmission_Control_Protocol)

主要是一种称为 TIME_WAIT 的连接状态（套接字在关闭后等待处理仍在网络中的数据包，[netstat 手册页](http://linux.die.net/man/8/netstat)）是阻止端口被释放以供重用的原因。在最近的（全部？）Linux 内核上，TIME_WAIT 被硬编码为 60 秒，根据[RFC793](https://www.rfc-editor.org/rfc/rfc793)，连接可能会在 TIME_WAIT 中停留长达四分钟！

**这意味着至少 1000 个端口将使用至少 60 秒**。在现实世界中，您需要考虑传输时间、保持活动请求（多个请求使用相同的连接）和服务端口（在 nginx 和后端服务器之间）。让我们任意将其降低到 750 个端口/秒。

在大约 37 秒内，所有可用端口都将用完（28232 / 750 = 37）。这是个问题，因为释放一个端口需要 60 秒！

要查看所有正在使用的端口，请运行[apache bench](http://httpd.apache.org/docs/2.2/programs/ab.html)或类似的东西，它可以生成您正在调整的每秒请求数。然后运行：

```
root:~# netstat -n -t -o | grep timewait 
```

你会得到类似的输出（但很多很多行）：

```
tcp        0      0 127.0.0.1:40649         127.1.0.2:80            TIME_WAIT   timewait (57.58/0/0)
tcp        0      0 127.1.0.1:9000          127.0.0.1:50153         TIME_WAIT   timewait (57.37/0/0)
tcp        0      0 127.0.0.1:40666         127.1.0.2:80            TIME_WAIT   timewait (57.69/0/0)
tcp        0      0 127.0.0.1:40650         127.1.0.2:80            TIME_WAIT   timewait (57.58/0/0)
tcp        0      0 127.0.0.1:40662         127.1.0.2:80            TIME_WAIT   timewait (57.69/0/0)
tcp        0      0 127.0.0.1:40663         127.1.0.2:80            TIME_WAIT   timewait (57.69/0/0)
tcp        0      0 127.0.0.1:40661         127.1.0.2:80            TIME_WAIT   timewait (57.61/0/0) 
```

对于分配的端口总数：

```
root:~# netstat -n -t -o | wc -l 
```

如果您收到失败的请求，该数字将位于/接近 28232。

**如何解决问题？**

1.  将临时端口的数量从 28232 增加到 63976。

    ```
    sysctl -w net.ipv4.ip_local_port_range="1024 65000" 
    ```

2.  允许 linux 在超时到期之前重用 TIME_WAIT 端口。

    ```
    sysctl -w net.ipv4.tcp_tw_reuse="1" 
    ```

3.  额外的 IP 地址。