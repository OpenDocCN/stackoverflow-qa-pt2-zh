# StackOverflow 问答 14487000-14487999

# microsoft-metro - 后台音频流应用程序认证失败

> ID：14487000
> 
> 赞同：0
> 
> 时间：2013-01-23T18:43:08.150
> 
> 标签：microsoft-metro, audio-streaming, windows-store-apps

我提交了一个后台音频应用程序进行认证，但失败了，原因有两个，我不知道为什么。

原因一：

> 此应用无法正确响应播放、暂停或播放/暂停事件中的至少一个。

我了解需要满足 、 和 的事件，并且已经在代码中这样做（并在它们正在工作的平板电脑和本地设备上进行了测试`MediaControl`）`Play`。但是，由于停止媒体流并重新启动它需要比预期更长的时间，我同时使用了“暂停”和“停止”。`Pause``Stop``PlayPause``MediaElement.Pause()`

我读[了另一篇](https://stackoverflow.com/questions/12907731/allowing-suspension-of-a-windows-store-app-when-audio-is-paused)在认证阶段遇到类似问题的帖子。有人建议`MediaElement.PlaybackRate = 0;`改用。但是，这对于长时间的暂停并不理想，因为流不会继续前进。

我想知道的是我这样做是否正确？对于我的所有`MediaControl`活动，我已确保该`MediaControl.IsPlaying`属性也已正确设置。

此外，它失败的另一个原因是：

> 应用在 Windows ACK 中的性能测试失败。有关详细信息，请参阅以下链接：运行的测试用例：http: [//msdn.microsoft.com/en-us/library/windows/apps/hh920274.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh920274.aspx)

我已经针对 ACK 运行了我的应用程序，一切都通过了。我唯一能想到的是，`suspend mode`当按下硬件（或屏幕上的）媒体控制暂停按钮时，应用程序没有进入。我在`App_Suspending`事件中放置了一个调试器，但它从来没有命中。

由于描述太模糊，我不确定这是否是问题所在。但如果是这种情况，我能知道如何强制应用进入暂停模式吗？我尝试在`Window.Current`班级和`Application.Current`班级中寻找，但无济于事。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-26T07:20:40.480

在发布应用程序近 10 次尝试后，我终于找到了问题的根源，这也感谢微软人员的一些猜测工作。

我的应用程序将在应用程序启动后自动开始`MediaElement`流式传输。支持后台的音频将阻止应用程序通过 WACK，因为它永远不会进入挂起模式！

因此，为了通过商店的 WACK，我不得不删除自动启动功能，现在应用程序在商店中！（呼）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:05:54.443

对于您的第一个问题，请确保您的媒体元素已准备好使用：

```
while (CurrentTrack.CurrentState == MediaElementState.Opening || CurrentTrack.CurrentState == MediaElementState.Buffering)
{
   await Task.Delay(100);
}

CurrentTrack.Play(); 
```

此外，当视图卸载时，您必须停止您的媒体元素。

问候。

# android - 将联系人作为 vcf 导出到 SD 卡

> ID：14487002
> 
> 赞同：0
> 
> 时间：2013-01-23T18:43:15.423
> 
> 标签：android, contacts, sd-card, vcf-vcard

我一直在尝试使用以下代码将联系人导出为 vcf 文件：

```
b5.setOnClickListener(new 

OnClickListener()
{

public void onClick(View v){
getVCF();
}

public static void getVCF() 

{

final String vfile = "POContactsRestore.vcf";

Cursor phones = mContext.getContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null,null, null, null);

phones.moveToFirst();
for(int i =0;i<phones.getCount();i++)
{
  String lookupKey =    phones.getString(phones.getColumnIndex(ContactsContract.Contacts.LOOKUP_KEY));
 Uri uri = Uri.withAppendedPath(ContactsContract.Contacts.CONTENT_VCARD_URI, lookupKey);

AssetFileDescriptor fd;
 try 
 {
     fd = mContext.getContentResolver().openAssetFileDescriptor(uri, "r");
     FileInputStream fis = fd.createInputStream();
     byte[] buf = new byte[(int) fd.getDeclaredLength()];
     fis.read(buf);
     String VCard = new String(buf);
     String path = Environment.getExternalStorageDirectory().toString() + File.separator + vfile;
     FileOutputStream mFileOutputStream = new FileOutputStream(path, true);
                mFileOutputStream.write(VCard.toString().getBytes());           
     phones.moveToNext();                           
     Log.d("Vcard",  VCard);
 } 
 catch (Exception e1) 
 {
      // TODO Auto-generated catch block
      e1.printStackTrace();
 }

 }
 } 
```

问题是这给了我一个“nullpointerexception”，老实说我不太了解调试器。请帮我。

我该如何解决？

编辑1：

我不确定 Logcat 到底应该说什么，但所有错误都如下所示：

```
com.android.exchange   Strict Mode      null
com.android.exchange   Strict Mode      android.app.ServiceConnectionLeaked: Service com.android exchange 
```

调试窗口突出显示这一行：

```
Cursor phones = mContext.genContentResolver().query(ContactsContract.CommonDataKinds.Phone.CONTENT_URI, null, null, null, null); 
```

谢谢你的帮助。

编辑2：

OK调试窗口说：

```
Thread[<1>main](Suspended (exception NullPointerException))
MainActivity$1.getVCF()line:71
MainActivity$1.onClick(View)line:63 
```

LogCat 窗口只显示我之前发布的错误。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-02-08T14:33:42.540

（在问题编辑中回答。转换为社区 wiki 答案。见[将问题的答案添加到问题本身时的适当操作是什么？](https://meta.stackoverflow.com/questions/267434/what-is-the-appropriate-action-when-the-answer-to-a-question-is-added-to-the-que)）

OP写道：

> 只是为了让你知道我是如何修复它的；我刚刚摆脱了上下文中的“静态”标签：
> 
> ```
> public class MainActivity extends Activity
> {
>  static Context mContext; 
> ```
> 
> 为了
> 
> ```
> public class MainActivity extends Activity
> {
>  Context mContext; 
> ```
> 
> 我花了一整天才找出问题所在。

# matlab - matlab中的等高线图

> ID：14487004
> 
> 赞同：1
> 
> 时间：2013-01-23T18:43:20.240
> 
> 标签：matlab, matlab-figure, contour

我使用内置的等高线函数在 matlab 中制作了等高线图。它在图中绘制一组线，每条线代表一个轮廓。我想获得构成这些轮廓中的每一个的数据点。我怎样才能做到这一点？

因此，给定一个等高线图，我将如何获得构成每条等高线方程的实际基础数据点。例如，如果轮廓最终是直线并且其中一条轮廓线穿过原点，我希望能够获得描述这条线的数据点。例如 [0 0.1 0.2 0.3 0.4 ; 0 0.25 0.5 0.75 1]。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:55:34.417

`[C,h] = contour(...)`返回一个轮廓矩阵 ，`C`其中包含`x, y`由低级函数派生的轮廓线的坐标和轮廓级别，以及一个对象`contourc`的句柄。该函数使用轮廓矩阵来标记轮廓线。也是一个只读的轮廓组属性，您可以从返回的句柄中获取它。如果 X 或 Y 的间距不规则，contour 使用规则间距的等高线网格计算等高线，然后将数据转换为 X 或 Y。`h``contourgroup``clabel``C``ContourMatrix`

顺便说一句，这段文字取自[Matlab 文档](http://www.mathworks.com/help/matlab/ref/contour.html)...

# asp.net-mvc - Orchard - 字段包装器

> ID：14487005
> 
> 赞同：1
> 
> 时间：2013-01-23T18:43:21.280
> 
> 标签：asp.net-mvc, razor, orchardcms, orchardcms-1.6

我正在尝试对自定义表单中的字段使用包装器视图，但是当我这样做时，包装器内容显示得很好，但我丢失了我的字段。我已经查看了[有关放置的本教程，](http://docs.orchardproject.net/Documentation/Understanding-placement-info)并且正在尝试使用包装器功能将分隔符放入我的自定义表单中以分解问题，但它不起作用。

例如，我的表单上有一个询问姓名的问题。在我的展示位置文件中，我有以下内容

```
<!-- content:2.[section].[questionNumber] -->
<Place Fields_Common_Text_Edit-Name="Content:2.1.1"/>
<Place Fields_Input_Edit-PhoneNumber="Content:2.1.2"/>
... 
```

这很好用，但我想在某些组/问题部分之间放置一系列分隔标题，例如这个是“一般信息”

因此，我将放置文件的名称行更改为...

```
<Place Fields_Common_Text_Edit-Name="Content:2.1.1;Wrapper=GeneralInfoHeader"/>
<Place Fields_Input_Edit-PhoneNumber="Content:2.1.2"/> 
```

这完美地工作，我的标题出现了，但现在我的名字问题消失了，我的第一个可见问题是电话号码。根据我使用的教程，我的包装视图看起来像这样

```
<h3>General Information</h3>
<hr>
@Model.Html 
```

但是@Model.Html 的行实际上并没有输出我的字段。如何让包装器为 Fields 工作？（果园 1.6）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T23:42:21.397

好吧，包装器只是一段单独的 Razor 代码，它就像您的视图的父级一样。所以你需要告诉他们展示你的内容。

因此，您需要`@Display(Model.Metadata.ChildContent)`在包装器中显示字段本身。

# mysql - 如何在Mysql中重置root用户密码

> ID：14487009
> 
> 赞同：0
> 
> 时间：2013-01-23T18:43:33.507
> 
> 标签：mysql, root, mysql-5.1

我忘记了**Mysql 中的 ROOT 密码**，我没有该系统的管理员权限，我该如何重置它？我尝试了大多数方法，通过在 Google 上搜索所有我**为用户 'root'@'localhost' 拒绝访问（使用密码是/否）**。请帮我重设那个密码。提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:52:49.827

[http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html](http://dev.mysql.com/doc/refman/5.0/en/resetting-permissions.html)

*   如何重置根密码
*   C.5.4.1.1。重置 Root 密码：Windows 系统
*   C.5.4.1.2。重置 Root 密码：Unix 系统
*   C.5.4.1.3。重置 Root 密码：一般说明

祝你好运！

# asp.net-mvc - ActionLink 使用带有块 HTML 代码的 T4MVC

> ID：14487012
> 
> 赞同：1
> 
> 时间：2013-01-23T18:43:39.490
> 
> 标签：asp.net-mvc, razor, t4mvc

有没有办法让这个工作：

```
@foreach (var item in Model.CategoryListByKeywordsDetails)
{
    <li>
        @Html.ActionLink("ver >", MVC.Ad.ListByCategory(item.Id, (string)ViewBag.keywords))
        {
            <em>@Html.DisplayFor(modelItem => item.SearchCount)</em> @Html.DisplayFor(modelItem => item.Name) <span class="float-right">ver ></span>
        }
    </li>
} 
```

我想要结果（我放了空格来显示 HTML 代码）：

```
<a href="/Ad/ListByCategory?categoryId=1&keywords=alfa">
    <em>6</em>Carros
    <span class="float-right">ver &gt;</span>
</a> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T19:48:17.790

你不能用任何`@Html.ActionLink`重载来做到这一点。在标签`@Url.Action`内使用：`a`

```
<a href="@Url.Action(MVC.Ad.ListByCategory(item.Id, (string)ViewBag.keywords))">
    <em>@Html.DisplayFor(modelItem => item.SearchCount)</em> @Html.DisplayFor(modelItem => item.Name) 
    <span class="float-right">ver &gt;</span>
</a> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T20:05:14.693

我认为您的问题是在操作链接中包含一些 HTML 代码。您可以简单地使用“a”标签：

```
 @foreach (var item in Model.CategoryListByKeywordsDetails)
    {
        <li>
          <a href="@Url.Action(MVC.Ad.ListByCategory(item.Id, (string)ViewBag.keywords))">                
                    <em>@item.SearchCount</em>@item.Name<span class="float-right">ver &gt;</span>
          </a>
        </li>
} 
```

# database - Redis：获取可用于排序集的所有分数

> ID：14487013
> 
> 赞同：8
> 
> 时间：2013-01-23T18:43:39.697
> 
> 标签：database, nosql, redis

我需要获得可用于 redis 排序集的所有分数。

```
redis>  ZADD myzset 10 "one"

(integer) 1

redis>  ZADD myzset 20 "two"

(integer) 1

redis>  ZADD myzset 30 "three"

(integer) 1 
```

现在我想检索 myzset 的所有分数，即。10,20,30。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T18:58:09.823

**编辑**：由于您之前对值大小的问题并不明显，因此我做了一些额外的研究。

根据当前文档，无法仅从排序集中获得分数。

要获得分数，您需要做的是同时将它们添加到单独的集合中，并在需要时从那里获取它们。

不过，您可能首先应该做的是尝试将您的问题以不同的方式映射到数据结构中。我无法从您的问题中看出您为什么需要获得分数，但可能还有其他方法可以更好地映射到 Redis 的问题。

--

我不确定是否有任何方法可以在不获取密钥的情况下获得所有分数，但`ZRANGE`至少会获得您正在寻找的信息；

```
redis>  ZADD myzset 10 "one"
(integer) 1

redis>  ZADD myzset 20 "two"
(integer) 1

redis>  ZADD myzset 30 "three"
(integer) 1

redis> ZRANGE myzset 0 -1 WITHSCORES
["one","10","two","20","three","30"] 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-24T17:45:34.997

解决此问题的一种方法是使用服务器端 Lua 脚本。

考虑以下脚本：

```
local res = {}
local result = {}
local tmp = redis.call( 'zrange', KEYS[1], 0, -1, 'withscores' )
for i=1,#tmp,2 do
   res[tmp[i+1]]=true
end
for k,_ in pairs(res) do
   table.insert(result,k)
end
return result 
```

您可以使用[EVAL](http://redis.io/commands/eval)命令执行它。

它使用 zrange 命令提取 zset 的内容（带有分数），然后构建一个集合（在 Lua 中用一个表表示）以去除多余的分数，最后构建回复表。所以 zset 的值永远不会通过网络发送。

如果 zset 中的项目数非常多，则此脚本存在缺陷，因为它将整个 zset 复制到 Lua 对象中（因此它占用内存）。但是，很容易更改它以增量迭代 zset（每 20 个项目 20 个项目）。例如：

```
local res = {}
local result = {}
local n = redis.call( 'zcard', KEYS[1] )
local i=0
while i<n do
   local tmp = redis.call( 'zrange', KEYS[1], i, i+20, 'withscores' )
   for j=1,#tmp,2 do
      res[tmp[j+1]]=true
      i = i + 1
   end
end
for k,_ in pairs(res) do
   table.insert(result,k)
end
return result 
```

请注意，我是 Lua 的新手，所以可能有更优雅的方法来实现相同的目标。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-02-17T15:37:14.720

您需要传递可选参数 WITHSCORES。请参阅此处的文档[：](http://redis.io/commands)

> ZREVRANGE key start stop [WITHSCORES] 按索引返回排序集中的成员范围，分数从高到低排序

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-11-26T06:30:49.177

当涉及到 ruby​​ 时，以下命令将执行

```
redis.zrange("zset", 0, -1, :with_scores => true)
# => [["a", 32.0], ["b", 64.0]] 
```

源[Ruby 文档](http://www.rubydoc.info/github/redis/redis-rb/Redis:zrange "Ruby 文档")

# desire2learn - desire2learn：创建用户 API 路径

> ID：14487018
> 
> 赞同：1
> 
> 时间：2013-01-23T18:44:00.630
> 
> 标签：desire2learn

我正在尝试使用路径

```
POST /d2l/api/lp/(D2LVERSION: version)/users/ 
```

我遇到了一个错误。我希望文档中没有我遗漏的东西，因为据我所知，这应该可行。

```
HTTP/1.1 400 Bad request
Cache-Control: private
Content-Length: 0
Server: Microsoft-IIS/7.5
X-XSS-Protection: 0
X-Powered-By: ASP.NET
Date: Wed, 23 Jan 2013 18:37:07 GMT 
```

我发送的数据如下所示：

```
{
    "OrgDefinedId":"190006002",
    "FirstName":"Jesty",
    "MiddleName":"Q",
    "LastName":"McTest",
    "ExternalEmail":"privateemail@gmail.com",
    "UserName":"190006002",
    "RoleId":115,
    "IsActive":true,
    "SendCreationEmail":true
} 
```

我的 PHP 代码现在看起来像这样：

```
 $random_hash = "xxBOUNDARYxx";
    $request ="--".$random_hash.
              "\r\nContent-Type: application/json\r\n\r\n$data\r\n\r\n--".
              $random_hash;

    $length=strlen($request);
    $url = $opContext->createAuthenticatedUri($url,"POST");

    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$url); 
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLINFO_HEADER_OUT, true);
    curl_setopt($ch, CURLOPT_HTTPHEADER, array("HTTP/1.1", "Content-Type: multipart/form-data; boundary=xxBOUNDARYxx","Content-Length:".$length));
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST,true);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $request);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
    return curl_exec($ch); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:28:50.373

好的，经过几个小时的修补，我想通了。我发布的原始代码基于通过 API 发布个人资料图像的代码。仅发布 JSON 的代码要简单得多。这是一个通用的 PHP 函数，用于通过 POST 方法将 JSON 发送到 Valence

```
/*
*  $opContext is your user context object
*  $url is the route
*  $data is the well formed JSON in a string ( use json_encode() ) 
*  $ct is the count of json fields
*/

static function basic_post($opContext,$url,$data,$ct){
    $url = $opContext->createAuthenticatedUri($url,"POST"); 
    $ch = curl_init();
    curl_setopt($ch, CURLOPT_URL,$url); 
    curl_setopt($ch, CURLOPT_HEADER, true);
    curl_setopt($ch, CURLINFO_HEADER_OUT, true);
    curl_setopt($ch, CURLOPT_BINARYTRANSFER, true);
    curl_setopt($ch, CURLOPT_POST,$ct);
    curl_setopt($ch, CURLOPT_POSTFIELDS, $data);
    curl_setopt($ch, CURLOPT_SSL_VERIFYPEER, false);
    curl_setopt($ch, CURLOPT_RETURNTRANSFER,true);
    return curl_exec($ch);  
} 
```

# internationalization - Yii 核心消息翻译

> ID：14487020
> 
> 赞同：0
> 
> 时间：2013-01-23T18:44:04.527
> 
> 标签：internationalization, yii, translation

我想将 yii 核心英文信息翻译成我的语言。但我找不到要翻译的原始（英文）信息文件。我在哪里可以找到这个文件或如何获得最新的英文信息来翻译？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:51:50.627

该文件是框架/消息/de/yii.php

[您可以在此处](http://www.yiiframework.com/wiki/18/how-to-customize-yii-core-messages/)找到有关如何自定义它的详细信息

# android - 在没有项目的情况下长按 ListView 调用上下文菜单

> ID：14487022
> 
> 赞同：0
> 
> 时间：2013-01-23T18:44:09.367
> 
> 标签：android, listview, contextmenu

在我的应用程序中，我有一个`ListView`，我注册了上下文菜单。在长按时，我调用上下文菜单并从那里处理长按发生的项目。这工作正常。然而，用户可以将项目添加到列表中（单独的功能，与此处无关），并且“添加项目”是上下文菜单中的项目之一。这个项目不依赖于我长按哪个项目。

当活动开始时，列表中只有一项 - 在它下面的列表是空的。当我长按该项目时，上下文菜单会按我的意愿显示，但是当我长按列表的空白区域时，什么也没有发生。我正在使用几乎标准的代码：

```
itemList = (ListView)this.findViewById(R.id.order_items);
this.registerForContextMenu(itemList);

...

@Override
public void onCreateContextMenu(ContextMenu menu, View v, ContextMenuInfo menuInfo) {
    super.onCreateContextMenu(menu, v, menuInfo);
    MenuInflater inflater = getMenuInflater();
    inflater.inflate(R.menu.order_popup, menu);
    menu.setHeaderTitle(null);
} 
```

如何在列表的空白处长按时弹出上下文菜单？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-09T22:47:29.013

ListView 只会占用它需要的空间。我不认为点击空白空间对用户来说也不是很直观。为什么不在屏幕底部添加一个菜单按钮或简单按钮。

# c++ - 删除存储在数组中的特定类对象

> ID：14487023
> 
> 赞同：2
> 
> 时间：2013-01-23T18:44:11.597
> 
> 标签：c++, arrays, class, object

> **可能重复：**
> [删除存储在数组中的特定类对象](https://stackoverflow.com/questions/14485780/deleting-specific-class-objects-stored-in-an-array)

我正在尝试删除类对象数组中的特定元素。我正在用它后面的元素覆盖我要删除的元素。我的算法有效，但输出不正确，在调试并逐步完成代码之后，似乎我的对象只是不复制，有没有办法复制类对象，我查找了复制构造函数并尝试编写一个但是它似乎对输出没有任何影响。我将不胜感激任何帮助。谢谢

下面是我的代码

```
#include <iostream>
#include <string>
#include <math.h>

using namespace std;

void storeinfo() ;
void showinfo() ;
void menu() ;
void deleteinfo() ;
void displayallinfo() ;
int linsearch(string val) ;

class user 
{
    string firstname, lastname, currentteam, position, status ;
    int age ;
public:
    user() {};
    user(string fname, string lname, string cteam, string pos, string stat, int age) 
    {
        setFirstName(fname);
        setLastName(lname);
        setCurrentTeam(cteam);
        setPosition(pos);
        setStatus(stat);
        setAge(age);
    } ;
    void setFirstName(string fname)
        {firstname = fname;}
    void setLastName(string lname)
        {lastname = lname;}
    void setCurrentTeam(string cteam)
        {currentteam = cteam;}
    void setPosition(string pos)
        {position = pos;}
    void setStatus(string stat)
        {status = stat;}
    void setAge(int _age)
        {age = _age;}

    string getFirstName()
        {return firstname ;}
    string getLastName()
        {return lastname ;}
    string getCurrentTeam()
        {return currentteam ;}
    string getPosition()
        {return position ;}
    string getStatus()
        {return status ;}
    int getAge()
        {return age ;}
};

user player[20] ;
int arrlength = 3 ;

int main()
{
    menu() ;

    cin.get() ;
    return 0 ;
}

void storeinfo()
{
    string firstname ;
    string lastname ;
    string currentteam ;
    string position;
    string status ;
    int age ;

    for (int i=0; i < 3; i++)
    {
        cout << "\n\n Enter First Name : " ; 
        cin >> firstname ;
        player[i].setFirstName(firstname) ;
        cout << "Enter Last Name : " ; 
        cin >> lastname ;
        player[i].setLastName(lastname) ;
        cout << "Enter Player's Age : " ; 
        cin >> age;
        player[i].setAge(age) ;
        cout << "Enter Current Team : " ; 
        cin >> currentteam ;
        player[i].setCurrentTeam(currentteam) ;
        cout << "Enter Position : " ; 
        cin >> position ;
        player[i].setPosition(position) ;
        cout << "Enter Status : " ; 
        cin >> status ;
        player[i].setStatus(status) ;

        cout << "\n\n\n" ;
    }

    /*cout << string(50, '\n');*/

    menu() ;

}

void showinfo()
{
    string search;
    int found ;

    cout << "Please Enter The Player's Last Name : " ;
    cin >> search ;

    found=linsearch(search);

    if (found==-1)
    {
        cout << "\n There is no player called " << search ;
    }
    else
    {
        cout << "\n First Name : " << player[found].getFirstName() << "\n" << "Last Name : " << player[found].getLastName() <<
            "\n" << "Age : " << player[found].getAge() << "\n" << "Current Team : " << player[found].getCurrentTeam() << 
            "\n" << "Position : " << player[found].getPosition() << "\n" << "Status :  " << player[found].getStatus()  << "\n\n";
    }

    cin.get() ;

    menu() ;

}

void deleteinfo()
{
    int arrlength = 3 ;
    string search ;
    int found ;

    cout << "\n Delete A Player's Information \n\n" ;
    cout << "Please Enter The Player's Last Name : " ;
    cin >> search ;

        found=linsearch(search);

    if (found==-1)
    {
        cout << "\n There is no player called " << search ;
    }
    else
    {
        for (int i=found + 1; i < arrlength; ++i)
        {
            player[i-1].setFirstName(player[i].getFirstName()) ;
            player[i-1].setLastName(player[i].getLastName()) ;
            player[i-1].setAge(player[i].getAge()) ;
            player[i-1].setCurrentTeam(player[i].getCurrentTeam()) ;
            player[i-1].setPosition(player[i].getPosition()) ;
            player[i-1].setStatus(player[i].getStatus()) ;
        }

        --arrlength ;

        cout << "\n Player has been deleted." ;
    }

    cin.get() ;

    menu() ;
}

void displayallinfo()
{
    for (int i=0; i < 3; i++)
    {
        cout << "\n First Name : " << player[i].getFirstName() << "\n" << "Last Name : " << player[i].getLastName() <<
            "\n" << "Age : " << player[i].getAge() << "\n" << "Current Team : " << player[i].getCurrentTeam() << 
            "\n" << "Position : " << player[i].getPosition() << "\n" << "Status :  " << player[i].getStatus()  << "\n\n";
    }

    cin.get() ;

    menu() ;
}

void menu()
{
    cout << "\n\n MENU" << "\n" ;
    cout << "\n A. Store Player Information" ;
    cout << "\n B. Show Player Informaton" ;
    cout << "\n C. Delete Player Information" ;
    cout << "\n D. Display All Players";
    cout << "\n Z. Exit \n\n" ;

    string x =  "";
    cin >> x ;

    if (x=="a" | x=="A")
    { 
        storeinfo() ;
    }
    else if (x=="b" | x=="B")
    {
        showinfo() ;
    }
    else if (x=="c" | x=="C")
    {
        deleteinfo() ;
    }
    else if (x=="d" | x=="D")
    {
        displayallinfo() ;
    }
    else if (x=="z" | x=="Z")
    {
        exit(0) ;
    }
    else
    {
        cout << "Invalid Choice" ;
        menu() ;
    }
}

int linsearch(string val)
{
    for (int j=0; j <= 3; j++)
    {
        if  (player[j].getLastName()==val)
         return j ;         
    }
        return -1 ;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:51:18.610

`player[i-1].getFirstName()`返回实例的 firstname 成员变量的副本。为该函数的输出分配另一个值不会更改存储在实例本身中的值。改为使用`player[i-1].setFirstName(player[i].getFirstName())`。此外，您可以通过使用赋值运算符，而不是复制 for 循环中的每个成员 `player[i-1] = player[i];`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:51:20.843

数组真的不适合这种事情。考虑使用 std::list。这也意味着您可以摆脱所有笨拙的大小硬编码。

# ios - iOS应用启动黑屏、UINavigationController、Nib、RootViewController

> ID：14487024
> 
> 赞同：0
> 
> 时间：2013-01-23T18:44:13.447
> 
> 标签：ios, uitableview, uinavigationcontroller, nib

我有以下应用程序，其`RootViewController`名为`TopicsViewController`.

当我运行它时，没有任何错误或中断，但屏幕是**黑色**的。没有表，填充或空，只是一个黑屏。不确定发生了以下哪些情况：

*   我的应用程序`didFinishLaunchingWithOptions`方法与在其中初始化的解析器有关吗？
*   这与我的 nib 文件有关`TopicsViewController`吗？

如果需要，我可以从我的`TopicsViewController`班级展示更多代码。

```
- (BOOL)application:(UIApplication *)application
    didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
///////////////////////////////////////////

***initializing code for parser which populates TopicsViewController (not shown to save space)*****

///////////////////////////////////////////
UIViewController *rootController =
[[TopicsViewController alloc]
 initWithNibName:@"TopicsViewController" bundle:nil];

navController = [[UINavigationController alloc]
                 initWithRootViewController:rootController];

self.window = [[UIWindow alloc]
               initWithFrame:[[UIScreen mainScreen] bounds]];
[self.window addSubview:navController.view];
[self.window makeKeyAndVisible];
return YES; 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:51:43.793

代替：

```
[self.window addSubview:navController.view]; 
```

写：

```
self.window.rootViewController = self.navController; 
```

# android - 在列表视图中添加标题无法正常工作？

> ID：14487035
> 
> 赞同：0
> 
> 时间：2013-01-23T18:44:42.273
> 
> 标签：android, android-intent, android-emulator, android-listview

我在列表视图中添加了标题。并尝试交换列表视图项目。但它不能正常工作。但是当我不使用 header 时，操作工作正常。代码如下......请帮助我......

```
public class Main extends ListActivity {

private static final int O_CLEAR = 3;
private static final int O_ADD = 2;
private static final int ACT_GRP = 1;

private static final int C_DOWN = 14;
private static final int C_UP = 13;
private static final int C_RMV = 12;
private static final int CO_GRP = 11;

ListView listView;
ArrayList<String> Cities;
ArrayAdapter<String> cityAdapter;

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);

    initialize();

}

private void initialize() {
    listView = getListView();

    Cities = new ArrayList<String>();

    cityAdapter = new ArrayAdapter<String>(this,
            android.R.layout.simple_list_item_1, Cities);

    TextView t = new TextView(this);
    t.setText("Add Your Cities in the list From Menu ");
    t.setTextColor(Color.RED);
    listView.addHeaderView(t, "", false);

    listView.setAdapter(cityAdapter);

    registerForContextMenu(listView);

}

@Override
public void onCreateContextMenu(ContextMenu menu, View v,
        ContextMenuInfo menuInfo) {

    MenuItem item;

    menu.clear();
    menu.setHeaderIcon(android.R.drawable.star_big_on);
    menu.setHeaderTitle("ListView_Menu");

    item = menu.add(CO_GRP, C_RMV, 0, "Remove");
    item.setIcon(R.drawable.ic_launcher);

    item = menu.add(CO_GRP, C_UP, 1, "MoveUp");

    item = menu.add(CO_GRP, C_DOWN, 2, "Movedown");

}

@Override
public boolean onContextItemSelected(MenuItem item) {

    AdapterContextMenuInfo info = (AdapterContextMenuInfo) item
            .getMenuInfo();

    int position = info.position;

    TextView view = (TextView) info.targetView;

    switch (item.getItemId()) {
    case C_RMV:

        Cities.remove(view.getText().toString());

        cityAdapter.notifyDataSetChanged();

        break;

    case C_UP:

        if (position == 1) {
            mt("First Item");
        }

        else {

            String pre = (String) listView.getItemAtPosition(position-1);

             System.out.println("amrut"+pre);

            String current = (String) listView.getItemAtPosition(position);
            System.out.println("amrut"+current);

            Cities.set(position, pre);
            Cities.set(position - 1, current);

            //listView.invalidateViews();

            //listView.destroyDrawingCache();
            //listView.setVisibility(ListView.INVISIBLE);
            //listView.setVisibility(ListView.VISIBLE);
            cityAdapter.notifyDataSetChanged();

        }

        break;

    case C_DOWN:

        if (position == Cities.size() - 1) {
            mt("last Item");
        }

        else {

            String next = cityAdapter.getItem(position + 1);
            String current = Cities.get(position);

            Cities.set(position, next);
            Cities.set(position + 1, current);

            cityAdapter.notifyDataSetChanged();

        }

        break;

    }

    return true;
}

@Override
protected void onListItemClick(ListView parent, View v, int position,
        long id) {
    // TODO Auto-generated method stub

    //System.out.println("pos " + position);
    View currentView = parent.getChildAt(position);

    if (isSelected(currentView)) {

        currentView.setBackgroundColor(Color.WHITE);
        currentView.setTag("unselected");
    } else {
        currentView.setTag("selected");
        currentView.setBackgroundColor(Color.BLUE);
    }

}

private boolean isSelected(View childAt) {
    // TODO Auto-generated method stub

    if (childAt.getTag() != null)
        if (childAt.getTag().toString().contentEquals("selected"))
            return true;

    return false;
}

@Override
public boolean onCreateOptionsMenu(Menu menu) {

    mt("onCreateOptionsMenu called...");

    MenuItem item;

    item = menu.add(ACT_GRP, O_ADD, 0, "Addcities");
    // item.setShowAsAction(1);
    item.setIcon(android.R.drawable.btn_plus);
    item.setNumericShortcut((char) 1);

    item = menu.add(ACT_GRP, O_CLEAR, 1, "ClearList");
    item.setIcon(android.R.drawable.ic_delete);

    // getMenuInflater().inflate(R.menu.main, menu);
    return true;
}

public boolean onOptionsItemSelected(MenuItem item) {

    switch (item.getItemId()) {

    case O_ADD:

        Intent intent = new Intent(this, Act_AddCity.class);
        startActivityForResult(intent, 1);
        break;

    case O_CLEAR:
        AlertDialog.Builder builder = new AlertDialog.Builder(this);
        builder.setMessage("Are You Sure...?");
        builder.setCancelable(false);
        builder.setPositiveButton("Yes", new OnClickListener() {

            @Override
            public void onClick(DialogInterface arg0, int arg1) {
                // TODO Auto-generated method stub
                // listView.
                Cities.clear();
                // cityAdapter.notifyDataSetChanged();
                cityAdapter.notifyDataSetInvalidated();
                // cityAdapter.getview

            }
        });

        builder.setNegativeButton("Cancel", new OnClickListener() {

            @Override
            public void onClick(DialogInterface arg0, int arg1) {
                // TODO Auto-generated method stub
                arg0.cancel();
            }
        });

        builder.create().show();
        break;

    }
    return true;
}

@Override
protected void onActivityResult(int requestCode, int resultCode, Intent data) {

    if (resultCode == RESULT_OK) {

        if (data.getExtras() != null) {

            Cities.addAll(data.getExtras().getStringArrayList("city_name"));
            cityAdapter.notifyDataSetChanged();
        }
    }
    return;

}

private void mt(String string) {

    Toast.makeText(this, string, Toast.LENGTH_SHORT).show();
}

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:58:41.973

您尚未描述“无法正常工作”时看到的内容，但我假设这些行打印了适当的信息：

```
System.out.println("amrut"+pre);
System.out.println("amrut"+current); 
```

也许您只需要在使用 时减去标题视图的数量`position`，`Citites`因为`Cities`没有任何标题。您正在使用一个标头，因此请尝试：

```
// Code for case C_UP:
Cities.set(position - 1, pre);
Cities.set(position - 2, current);

// C_DOWN
Cities.set(position - 1, next);
Cities.set(position, current); 
```

# html - 使菜单栏更接近 Web

> ID：14487036
> 
> 赞同：0
> 
> 时间：2013-01-23T18:44:49.930
> 
> 标签：html, css, menubar

我是 Web 开发的新手，我现在正在学习 HTML 和 CSS。我正在使用 Firefox 18，我希望在浏览器标题附近有一个菜单栏（很像 Facebook 的蓝色菜单栏）。

虽然我已经创建了菜单栏，但我在对齐它时遇到了问题。我的问题： 1\. 如何减少顶部、右侧和左侧的空间，以使菜单栏紧贴 Firefox？我尝试了填充，但它只会改变菜单栏上项目之间的空间，而不是栏的对齐方式。2\. 调整浏览器大小对栏的显示方式有影响吗？它是浏览器属性还是我可以从我编写的代码中取消调整菜单栏的大小？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:53:37.763

[Web 开发人员 第一步：对Firebug](https://addons.mozilla.org/en-us/firefox/addon/firebug/)和 Chrome 的开发人员工具功能变得非常友好[F12]。这些工具使您可以快速查看哪些元素应用了导致您发生冲突的样式。然后，您可以在页面中进行更改以测试您的修复。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T18:57:46.243

您需要添加

```
* { margin: 0; padding: 0; } 
```

在你的 CSS 顶部

- - 或者 - -

使用重置

> 重置样式表的目标是减少浏览器在默认行高、页边距和标题字体大小等方面的不一致。

[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T18:59:40.987

我认为您应该在 Google 上搜索一些 reset.css 或 normalize.css，因为您可能会遇到浏览器默认样式的问题。Eric Meyer 的一个非常受欢迎，可以在这里找到[http://meyerweb.com/eric/tools/css/reset/](http://meyerweb.com/eric/tools/css/reset/)但还有其他可用的。

这样做是删除浏览器默认应用的所有样式。从现在开始将其包含在您制作的每个页面中可能是一个好主意，以使您的样式在所有浏览器中保持一致。我永远不会没有它！

# mysql - cakephp 查询中有很多查询

> ID：14487038
> 
> 赞同：0
> 
> 时间：2013-01-23T18:44:56.600
> 
> 标签：mysql, database, cakephp

我有一个用 cakephp 2.x 开发的网站我有一个包含很多表的查询。我知道执行这个大查询的最有效方法是手动进行连接查询。但我想尝试包含。我只选择了我需要的字段，但最后我打印了里面创建了多少查询：5000 个查询！！数据库需要 6-10 秒来详细说明这个查询，我想优化时间。cakephp 有优化的方法吗？我现在不想使用连接，因为要创建很多连接。有可能吗？我知道这是一个包含大量数据的疯狂查询，但它是包含大量数据的产品主页。这是查询：

```
$this->set('product',$this->Product->find('all', array(
                    'contain' => array(
                            'Origin'  => array(
                                'fields'=>array('id','diet_id'),
                                'OriginAlias' => array(
                                    'fields'=>array('id','origin_id','language','alias'),
                                    'conditions' =>  array('OriginAlias.language' => $lang)
                                ),
                                'Diet' => array(
                                    'fields'=>array('id'),
                                    'DietAlias' => array(
                                        'fields'=>array('id','diet_id','language','alias'),
                                        'conditions' =>  array('DietAlias.language' => $lang)
                                    ),
                                )
                            ),
                            'ProductAlias' => array(
                                    'conditions' =>  array('ProductAlias.alias' => $alias),
                                    'User' => array(
                                        'fields'=>array('id','username'),
                                        'Profile' => array(
                                            'fields'=>array('id','user_id','country','sex','diet','show_diet'),
                                        ),
                                        'UserOptions' => array ('fields' => array ('avatar_type')),
                                        'Avatar' => array ('fields' => array ('filename'))
                                    ),
                                    'User2' => array(
                                        'fields'=>array('id','username'),
                                        'Profile' => array(
                                            'fields'=>array('id','user_id','country','sex','diet','show_diet'),
                                        ),
                                        'UserOptions' => array ('fields' => array ('avatar_type')),
                                        'Avatar' => array ('fields' => array ('filename'))
                                    )
                            ),
                            'ProductImage'=> array(
                                'limit' => 1,

                                'ProductImageVote'=> array(
                                    'order' => 'ProductImageVote.vote desc'
                                ),
                                'User' => array(
                                    'fields'=>array('id','username'),
                                        'Profile' => array(
                                            'fields'=>array('id','user_id','country','sex','diet','show_diet'),
                                        ),
                                )
                            ),
                            'ProductGroupProduct' => array(
                                'fields'=>array('id','user_id','product_id','product_group_id'),
                                'ProductGroup'=> array(
                                            'fields'=>array('id','text','language'),
                                        ),
                            ),
                            'ProductIngredientVersion' => array(
                                'conditions' =>  $cond_version,
                                'limit' => 1,
                                'ProductIngredient' => array(
                                    /*'Product' => array(
                                        'ProductAlias' => array()
                                    ),*/
                                    'Ingredient' => array(
                                        'fields'=>array('id','user_id','origin_id','active'),
                                        'IngredientAlias' => array(
                                            'fields'=>array('id','user_id','ingredient_id','edit_user_id','alias'),
                                        ),
                                    ),
                                ),
                            ),
                            'ProductVersion' => array(
                                'conditions' =>  array('ProductVersion.active' => '1', 'ProductVersion.product_id' => $id),
                                'limit' => 1,
                                'ProductProperty' => array(
                                    'Property' => array(
                                        'fields'=>array('id','user_id','group_id','unit_id'),
                                        'PropertyAlias'  => array(
                                            'fields'=>array('id','user_id','property_id','alias','language'),
                                            'conditions' =>  array('PropertyAlias.language' => $lang)
                                        ),
                                        'Unit' => array(
                                            'fields'=>array('id','user_id','symbol','active'),
                                        ),
                                        'PropertyGroup' => array(
                                            'fields'=>array('id','user_id'),
                                            'PropertyGroupAlias'  => array(
                                                'fields'=>array('id','user_id','group_id','alias'),
                                                'conditions' =>  array('PropertyGroupAlias.language' => $lang)
                                            )
                                        )
                                    ),
                                ),
                            ),
                            'Manufacturer' => array(
                                            'fields'=>array('id','text'),
                                        ),
                            'Brand' => array(
                                            'fields'=>array('id','text'),
                                        ),
                            'UserProductLike' => array(
                                'conditions' =>  array('UserProductLike.product_id' => $id),
                            ),
                            'UserProductHate' => array(
                                'conditions' =>  array('UserProductHate.product_id' => $id),
                            ),
                        ),
                    'conditions' => array('Product.id' => $id)  
                ))); 
```

# uiviewcontroller - 为什么我的视图控制器不在窗口层次结构中？

> ID：14487039
> 
> 赞同：3
> 
> 时间：2013-01-23T18:44:58.463
> 
> 标签：uiviewcontroller, ios6, xcode4.5, xib, uistoryboardsegue

使用故事板，MainMenuViewController 以模态方式呈现 Number1ViewController：

```
-(void) goToNumbers {

    [self performSegueWithIdentifier: @"seguetonumbers" sender: self];

} 
```

然后 Number1ViewController 像这样呈现 Number2ViewController：

```
-(void)nextLevel {

     [self performSegueWithIdentifier: @"segueToLevel2" sender: self];
} 
```

然后 xCode 会产生以下警告：

```
2013-01-23 12:09:49.873 ToddlerTeacherMini[7574:907] Warning: Attempt to present <Number2ViewController: 0x1fddc720> on <Number1ViewController: 0x1fdc7380> whose view is not in the window hierarchy! 
```

我在网上看到的关于这个警告的一切都说你不能在另一个 VC 的 viewDidLoad 方法中显示一个 VC，将你的代码移动到 viewWillAppear 方法将解决这个问题。我不是从 viewDidLoad 调用这个 segue，而是我稍后调用它，所以我不确定为什么会这样。

我在我的应用程序的其他地方类似地展示了 VC，没有问题并且无法弄清楚这里有什么不同，有什么帮助吗？

为了清楚起见，我的应用程序中的一切似乎都按预期工作，我只是不想忽略此消息并让它稍后回来咬我。

* * *

根据 Todd Kerpelman 的建议，我调查了调用 nextLevel 方法的位置。断点并没有告诉我太多，但是用 NSLog 进一步挖掘我想出了这个：

```
-(void)nextLevel {

    if (nextLevelHasNotBeenCalled == 0){

       [self performSegueWithIdentifier: @"segueToLevel2" sender: self];
        NSLog(@"Segue was called here.");

    }

    nextLevelHasNotBeenCalled ++;
    NSLog(@"Next level has been called %i times!", nextLevelHasNotBeenCalled);

} 
```

日志：

```
2013-01-26 02:04:12.579 ToddlerTeacherMini[9203:907] Segue was called here.
2013-01-26 02:04:12.593 ToddlerTeacherMini[9203:907] Next level has been called 1 times!
2013-01-26 02:04:14.789 ToddlerTeacherMini[9203:907] Next level has been called 2 times! 
```

现在很清楚 nextLevel 被调用了两次，这就是导致我的问题的原因。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T18:58:24.923

这听起来像是您的代码`nextLevel`在您不期望的情况下意外调用的情况。（可能是在 Number1ViewController 的方法中调用了一些不相关的方法的副作用`viewDidLoad`。）

您是否尝试在`nextLevel`方法中添加断点并查看它的调用方式/位置？这可能是至少确认（或消除）这种可能性的最佳方式。

# javascript - Javascript 代码帮助 - 错误返回

> ID：14487040
> 
> 赞同：0
> 
> 时间：2013-01-23T18:44:59.477
> 
> 标签：javascript, loops, if-statement

所以我正在编写这个脚本。当我完成它时，它应该用于制作 2-and-2 组。但无论如何; 脚本开头的“输入”数组将从我的 HTML 文件中获得 22 个不同的输入。作为标准，我给他们的值是 1-22。问题是我的两个块“第一个数字”和“第二个数字”效果不佳：它们没有返回正确的数字。因为我希望每个 elev[x] 都使用一次！不是2次，不是0次，一次！并且这些块像其中一些一样返回两次，其中一些甚至没有被使用。那么我该如何解决这个问题呢？

```
 function Calculate(){
    var elev = [];
    var inputs = document.getElementsByName("txt");
    for(i=0; i<inputs.length; i++) {
    elev[i] = {
        "Value": inputs[i].value,
        "Used": false
    };
}

    function shuffle(elev){
    var len = elev.length;
    for(i=1; i<len; i++){
        j = ~~(Math.random()*(i+1)); 
        var temp = elev[i];
        arr[i] = elev[j];
        arr[j] = temp;
        }
    }

    for(var v=0; v<1; v++) {
        shuffle(elev);
        document.write(elev + '<br/>\n');
    }} 
```

是的，我在编程方面还是新手，我只想学习我能学到的东西。

**通过费雪-耶茨洗牌解决了问题。**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:49:38.100

您只会获得一次随机数，然后在尚未使用它们时处理它们。

我建议对数组 ( `elev.sort(function() {return Math.random()-0.5})`) 进行改组，然后只遍历结果而不使用更多随机数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:05:38.197

改组数组并对其进行迭代的想法是正确的，但是，通过掷硬币比较器进行排序（一种常见的错误实现；由另一个答案建议）*不是*改组数组的正确方法；它会产生非常倾斜的结果，甚至不能保证完成。

除非您愿意获取 underscore.js ( `arr = _.shuffle(arr)`)，否则建议使用 Fisher-Yates shuffle：

```
function shuffle(arr){
  var len = arr.length;
  for(var i=1; i<len; i++){
    var j = ~~(Math.random()*(i+1)); // ~~ = cast to integer
    var temp = arr[i];
    arr[i] = arr[j];
    arr[j] = temp;
  }
}

...

shuffle(elev);
for(var i=0; i<elev.length; i++){
  //do something with elev[i]
  console.log(elev[i].Value);
} 
```

另外，请注意对象字段应该是小写，而不是大写（`value', not 'Value'). Also, the`Used`字段不应该是必需的，因为您现在按顺序迭代。此外，您是否有机会使用值数组？它们似乎是您对象中的唯一字段。

另外，**不要使用 document.write()**。在页面加载后使用时，它不能按预期工作。如果你想在文档中附加一些东西，你讨厌 jQuery 和其他框架，并且你不想走很长的路来创建和组合 DOM 节点， `document.body.innerHTML +=`仍然比`document.write()`（但仍然考虑附加`DocumentFragment`s 代替）更好。

演示：http: [//jsfiddle.net/honnza/2GSDd/1/](http://jsfiddle.net/honnza/2GSDd/1/)

# c++ - sqlite 查询未准备好插入的行但为空值

> ID：14487041
> 
> 赞同：1
> 
> 时间：2013-01-23T18:45:06.167
> 
> 标签：c++, sqlite

我正在编写一个函数来准备一个 sql 查询并针对一个 sqlite 数据库执行它。我正在使用查询将值插入到表中，查询看起来像这样

```
 "insert into files values (?, ?, ?, ?, ?, 0)"; 
```

插入了一行，但文本字段的所有值都是空的，除了最后一个字段为 0。前 5 个字段的类型为 TEXT

```
 // If I hard code a value for value.data() then the row is inserted correctly with my hardcoded data, the exact line is below
    status = sqlite3_bind_text(ppStmt, index, /* if I hardcode it works*/ value.data(), -1, SQLITE_STATIC); 
```

完整的功能如下所示。列表是由调用者在堆栈上创建的，我不确定为什么它没有用我的字符串 args 替换问号，但硬编码的可以工作.. 没有返回错误代码

```
 //db is already open before I call this
void MediaCache::prepareAndExecuteQuery(string query, list<string> args)
{

    sqlite3_stmt *ppStmt = 0;
    const char **pzTail = 0;
    int status = 0;

    if( sqlite3_prepare_v2(db, query.data(), query.length(), &ppStmt, pzTail) != SQLITE_OK )
    {
        string error = sqlite3_errmsg(db);
        //throw an exception
    } 

    if(ppStmt)
    {

        list<string>::iterator current = args.begin();
        int index = 1;

        for(current = args.begin() ; current != args.end(); current++)
        {
            string value = *current;            
            status = sqlite3_bind_text(ppStmt, index, value.data(), -1, SQLITE_STATIC);

            if(status != SQLITE_OK)
            {
                //log error;
            }

            index++;
        }   

        status = sqlite3_step(ppStmt);
        status = sqlite3_finalize(ppStmt);
        //sqlite3_exec(db, "COMMIT", NULL, NULL, NULL);
    }
    else
    {
        //ppStmt is null
        //throw an exception
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:18:25.953

我怀疑问题出在这里：

```
string value = *current;            
status = sqlite3_bind_text(ppStmt, index, value.data(), -1, SQLITE_STATIC); 
```

在这种情况下`value`，在执行语句之前就超出了范围。所以给出的指针`sqlite3_bind_text`不再有效。要“解决”这个问题，您可以使用 SQLITE_TRANSIENT，它会强制库在返回之前制作自己的数据副本。

此外，如果您不使用 C++11，我不相信`string::data()`一定会以 NULL 终止，在这种情况下 -1 参数可能不正确。也许应该是`value.length()`。

# jquery - 如何使用jquery在页面加载之前获取html文本

> ID：14487045
> 
> 赞同：-1
> 
> 时间：2013-01-23T18:45:21.300
> 
> 标签：jquery

我想在页面加载之前提醒文本。

```
var jaw='<div id="text">hii</div>';
alert($('#text').text())
$('body').append(jaw) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:49:10.983

```
var $jaw = $('<div id="testing">this is stuff <div id="text">hii</div></div>');
alert($jaw.find('#text').html());
$jaw.appendTo(document.body); 
```

但是，您已经有一个字符串文字，因此鉴于上面的代码，您可以简单地执行`alert(text)`.

请注意，这`html()`将返回内部 html。`text()`将返回内部文本。如果您想要 outerHTML 搜索 jQuery 的 outerHTML 解决方案。那是另一个话题。

编辑：添加 JSFiddle - [http://jsfiddle.net/FYbeH/3/](http://jsfiddle.net/FYbeH/3/)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T18:54:41.240

你可以试试

```
 $(document).ready(function() {
              var jaw='<div id="text">hii</div>';
              $('body').append(jaw)
              alert($('#text').text())
          }); 
```

阅读 jquery 文档。[准备好（）](http://api.jquery.com/ready/)

# xcode - 仅限 Xcodebuild 清洁项目

> ID：14487048
> 
> 赞同：5
> 
> 时间：2013-01-23T18:45:34.267
> 
> 标签：xcode, xcode4.5, xcodebuild

我有一个具有许多依赖项的项目，我想清理该项目，但不是依赖项，因为它们很少更改

有什么办法可以做到吗？

# javascript - Node JS 可以提示 HTML 页面更改吗？

> ID：14487051
> 
> 赞同：0
> 
> 时间：2013-01-23T18:45:44.873
> 
> 标签：javascript, ajax, node.js, jquery

我对 Node JS 还很陌生，但一直在尝试使用它进行一些 AJAX，并尝试读写文件。我现在想知道的是 Node JS 服务器是否可以告诉 HTML 页面进行更改，或者是否必须从页面发出一些请求才能从服务器接收有关如何更改的信息。

（希望）澄清：假设我有一个带有 id 的按钮，单击该按钮`ajax-retrieve`会从我的 Node JS 服务器请求一些信息：

```
$('#ajax-retrieve').click(function () {
    $.ajax({
        url: 'http://localhost:8124/',
        data: 'fn=open',
        dataType: "jsonp",
        cache: false,
        timeout: 5000,
        success: function(data) {
            console.log(data);
            $("#input-ready").html(data.save.text);
        },
        error: function(jqXHR, textStatus, errorThrown) {
            alert('error ' + textStatus + " " + errorThrown);
        }
    });
}); 
```

在成功从服务器接收到一些数据后，回调（如您所见）将数据记录在控制台中，并将其中的一部分放入具有 id 的元素中`input-ready`。但是，如果请求失败或超时，则会出现一个警告框，提供错误的详细信息。

这大致是服务器端代码的样子：

```
http.createServer(function (req, res) {
    "use strict";
    var queryObj = url.parse(req.url, true).query;
    queryObj.fn = queryObj.fn || '';
    queryObj.callback = queryObj.callback || '';

    if (queryObj.callback) {
        if (queryObj.fn === 'open') {
            fs.readFile('jsonp-storage-2.txt', function (err, data) {
                if (err) {
                    throw err;
                } else {
                    queryObj.save = data;
                    res.writeHead(200, {'Content-Type': 'application/javascript'});
                    res.write(queryObj.callback + '({ fn: "' + queryObj.fn + '", save: ' + queryObj.save + ' })');
                    res.end();
                }
            });
        } else {
            console.log('Function (fn property) not recognised.');
        }
    }
}).listen(8124); 
```

但是，如果服务器在将数据传递到我的 HTML 页面之前需要对数据做一些更复杂的事情怎么办？如果我的服务器代码可能需要一些时间来做这件事怎么办？有没有办法将返回的数据分块并在准备好时返回相关部分，或者需要来自我的 HTML 页面的单独请求？

理想情况下，我不希望我的 HTML 页面必须继续向服务器请求它已经请求的信息，以查看它是否已准备好。我想要的是某种回调，以便在服务器完成时 HTML 页面接收它需要的数据并相应地更改显示？这可能是一个基本问题，但我所描述的可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:08:56.680

由于您想双向查看[socket.io](http://socket.io/)和[SockJS](https://github.com/sockjs/sockjs-client)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:09:13.343

您似乎在描述**long polling**，一种将 http 连接保持打开很长时间的技术，并且数据在可用时以块的形式发送回来。更一般地说，我认为您对**服务器推送**非常感兴趣- 服务器在没有客户端明确请求的情况下发送回数据，这很接近长轮询。我最喜欢的 node.js 解决方案是[socket.io](http://socket.io)，这是一个库，它提供了一个干净的服务器推送包装器，并根据客户端浏览器中可用的内容自动使用多种技术（包括长轮询）。

# django - Url 模板标签和 NoReverseMatch

> ID：14487055
> 
> 赞同：1
> 
> 时间：2013-01-23T18:45:54.240
> 
> 标签：django, django-templates

我将对象数组从视图传递到模板，我想在模板中为每个对象生成 URL（到不同的视图）。所以，我的 URLconf 中有：

```
 url(r'^item/(?P<id>[0-9]+)/(?P<slug>[a-zA-Z0-9]+)$',
    'show_item',
    name='show_item'), 
```

在模板中，我迭代对象列表并尝试生成适合上述 URL 示例的 URL，因此我将 2 个参数传递给每个参数：

```
 {% for item in items %}
        Item: {{ item.title }}, description: {{ item.description }}
        URL: {% url show_item item.id item.slug %}
    {%  endfor %} 
```

不幸的是，我得到 django 错误：

```
Reverse for 'show_item' with arguments '(1, u'first-item')' and keyword arguments '{}' not found. 
```

我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:49:15.440

在您的网址中，您的`slug`正则表达式需要包含一个连字符（并且还不如在我们使用它时添加一个下划线）：`(?P<slug>[a-zA-Z0-9_\-]+)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:47:16.947

你的论点被命名为：

```
 {% for item in items %}
     Item: {{ item.title }}, description: {{ item.description }}
     URL: {% url show_item id=item.id slug=item.slug %}
 {%  endfor %} 
```

[url 中命名组的文档](https://docs.djangoproject.com/en/dev/topics/http/urls/#named-groups)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-21T16:17:57.563

如果我没记错 show_item 应该被引用和参数命名

```
{% url 'show_item' id=item.id slug=item.slug %} 
```

还可以使用以下方法检查 url 生成的内容：

```
{% url 'show_item' id=item.id slug=item.slug as foo %}
{{ foo }} 
```

“as foo”允许您查看生成的 url 而不会引发错误。

# tidesdk - 如何在 TideSDK 中使用事件

> ID：14487056
> 
> 赞同：1
> 
> 时间：2013-01-23T18:45:54.233
> 
> 标签：tidesdk

我尝试使用在当前窗口最大化时触发的事件，但是我似乎无法触发该事件。

我尝试了以下方法：

```
var appWindow = Ti.UI.currentWindow();
appWindow.addEventListener('maximized', function(){
  alert('maximized...');
}); 
```

和：

```
Ti.UI.UserWindow.maximized(function() {
  alert('test2');
}); 
```

和：

```
Ti.UI.currentWindow.maximized( function() {
  alert('test');
}); 
```

有谁知道如何使用这个事件：[http](http://tidesdk.multipart.net/docs/user-dev/generated/#!/api/Ti.UI.UserWindow-event-maximized) ://tidesdk.multipart.net/docs/user-dev/generated/#!/api/Ti.UI.UserWindow-event-maximized ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T06:56:30.167

以下应该有效：

```
var appWindow = Ti.UI.getCurrentWindow();
appWindow.addEventListener(Ti.MAXIMIZED, function(){
    alert('maximized');
}); 
```

# python - 对不同的方法使用不同的“表格”

> ID：14487060
> 
> 赞同：1
> 
> 时间：2013-01-23T18:46:11.617
> 
> 标签：python, google-app-engine, jinja2

我希望我能正确地表达自己，就这样吧。

我有一个 html 页面的处理程序，其目的是编辑“章节”。在此页面中列出了章节，您可以使用按钮添加更多章节。因此，当您第一次打开页面时，会列出章节和添加更多章节的按钮。如果您单击“添加”，它应该会向您显示相同的页面，但会显示章节信息的表格。

我的问题是在重新加载页面时传递我们正在编辑的章节的信息，因为无法传递“tut_key” - 对章节的引用。

编辑图.html：

```
{% for chap in chaps %}
       Title: {{ chap.title}}<br>
    {% endfor %}

{% if not editMode or editMode == 0 %}
<form ????????>
    <input id="tutBtnNext" type="submit" value="Add">
</form>
{% endif %}

{% if editMode == 1 %}
    <form method="post">
        <!-- form stuff -->
    </form>
{% endif %} 
```

班上：

```
class EditTut(FuHandler):
    def get(self):
        tutID = self.request.get('tut_key')
        tut = db.Key.from_path('Tutorial', tutID)
        chaps = db.GqlQuery("SELECT * FROM Chapter " +
                            "WHERE tutorial = :1", tut)
        self.render('editTut.html', chaps=chaps)

    def post(self):
        tutID = self.request.get("tut_key")
        tutorial = db.Key.from_path('Tutorial', tutID)
        title = self.request.get("chapTitle")
        content = self.request.get("content")
        note = self.request.get("note")

        chap = Chapter(tutorial=tutorial, title=title,
                       content=content, note=note)
        chap.put()
        self.redirect('/editTut?tut_key=%s' % tutID)

    #should i use something like this? 
    #I tried but i can't find a way to call this function on the html
    def addChap(self):
        tutID = self.request.get("tut_key")
        self.redirect('/editTut?tut_key=%s' % tutID) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T21:32:33.413

在这里设置 cookie 可能是一个不错的选择。当他们选择一章时，您可以发送一个指定该选项的 cookie。然后，每次加载页面时，您只需检查该 cookie。如果 cookie 存在且有效，您应该知道他们正在编辑哪一章。

您可以像这样在 Google App 引擎中设置 cookie：

```
self.response.set_cookie('name', 'value', expires=expire_time, path='/', domain='example.com') 
```

`value`可能是引用您正在使用的章节的内容。如果您`expires`留空，它应该在他们关闭浏览器时过期（您可能想要）。

您可以通过以下方式获取 cookie：

```
self.request.cookies.get('name','') 
```

然后你可以将该cookie分配给一个变量，并检查它的章节信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:08:24.767

我希望我理解正确，我必须根据标准加载表单并这样做：

```
 if not editMode:
            params = {} 
            form = 'add_mode.html'
    else:
            params = {"data", data}
            form = 'edit_mode.html'

    return self.render_template(form, **params) 
```

# heroku - cloudcontrol中如何设置环境变量？

> ID：14487064
> 
> 赞同：4
> 
> 时间：2013-01-23T18:46:12.673
> 
> 标签：heroku, cloudcontrol

我正在从 Heroku 迁移到 cloudcontrol，但找不到有关如何设置服务器环境变量的文档。怎么可能？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T18:54:26.670

有一个配置插件`cctrlapp`。

下面的代码应该做到这一点：`cctrlapp app_name/dep_name addon.add config.free --APPLICATION_ENV=value`

可以帮助你吗？

**编辑**：这是插件文档的链接：[https ://www.cloudcontrol.com/dev-center/Add-on%20Documentation/Deployment/Custom%20Config](https://www.cloudcontrol.com/dev-center/Add-on%20Documentation/Deployment/Custom%20Config)

**编辑：**从 cctrl 1.8.1 开始，您可以通过以下方式添加配置变量：

```
$ cctrlapp app_name/dep_name config.add PARAM1=VALUE1 PARAM2=VALUE2 [...] 
```

并使用以下方法删除它们：

```
$ cctrlapp app_name/dep_name config.remove PARAM1 PARAM2 [...] 
```

# java - 在 3d opengl 中移动模型

> ID：14487066
> 
> 赞同：1
> 
> 时间：2013-01-23T18:46:24.947
> 
> 标签：java, opengl, 3d

我想使用键盘按钮在平面（y=0）上移动我的模型，但我遇到了以下问题：

我设法让他绕着他的 Y 轴旋转，但现在我需要让它朝着他面对的方向移动。如何检测和计算位移来构造合适的平移矩阵？

这是附加的代码，因为有些事情进展不顺利......

```
 this.mouseMv = MatrixMath.lookAt(this.eyeX,this.eyeY,this.eyeZ,this.at,this.up);
    Mat4 translate = MatrixMath.translate(this.position);
    this.mouseMv = this.mouseMv.mul(translate);
    this.mouseMv = this.mouseMv.mul(MatrixMath.rotationX(-90.0f));
    this.mouseMv = this.mouseMv.mul(MatrixMath.translate(this.position);
    this.mouseMv = this.mouseMv.mul(this.mouseAngle);

    modeling.use(gl);
    modeling.setUniformMatrix("model_view", this.mouseMv);
    String part = "models/catbody.sgf";
    Mat4 original = this.mouseMv;
        for (Map.Entry<String, VertexBufferObject> entry : vboHashMap.entrySet()) {
            String key = entry.getKey();
            entry.getValue().bind(gl);
            gl.glDrawArrays(GL3.GL_TRIANGLES, 0, SGFLoader.getNumVertices(key));
        } 
```

所以前向向量是来自我的 mouseMv 矩阵的 (8,9,10) 向量。现在要让模型朝着他所面对的方向前进，我应该通过平移矩阵用相应的前向向量平移 mouseMv 吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T11:49:29.683

如果您有模型所面对的角度，则可以使用非常简单的正弦和余弦计算。
伪代码：
newx = oldx + (cos(angle)*speed);
newz = oldz + (sin(角度)*速度);
如果你在 math.h 中使用 sin() 和 cos()，你的角度必须是弧度（除以 180 并乘以 pi，如果它是度数）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:42:24.160

由于没有提供源代码，因此很难看出您是如何移动对象的。但我想您已经使用矩阵进行旋转。所以你只需要旋转矩阵，然后沿着矩阵新方向（即前向向量）平移它。现在，我将留给您解决如何计算前向向量的问题，因为这个问题很简单。

但如果你仍然感到困惑，这里有一个线索：

[http://devmaster.net/forums/topic/5881-forward-vector/](http://devmaster.net/forums/topic/5881-forward-vector/)

# java - Java + Apache Commons Net：无需下载即可读取 FTP 文件

> ID：14487075
> 
> 赞同：0
> 
> 时间：2013-01-23T18:46:47.013
> 
> 标签：java, apache-commons-net, readfile

使用 Apache Commons Net 3.2，我的程序连接到 FTP 服务器并从中下载文件。

然而，它应该能够做的是读取服务器上的文件而不下载它们。

这甚至可能吗？

只是服务器包含大量个人信息，SSN、电话、电子邮件等，只有拥有正确密码的特定人员才能访问它们。

没有人应该能够从服务器下载任何东西，至少在没有我的程序授予的最高权限的情况下不能！

到目前为止，我有一个包含服务器上所有数据文件的 FTPFile []。

我想遍历它们，看看他们是否有当前用户的名字（意味着他们被允许查看这个人/文件），如果有，将他们的数据添加到 ArrayList 。

有小费吗？

```
import java.io.File;
import java.io.FileOutputStream;
import java.util.List;
import java.util.Arrays;

import org.apache.commons.net.ftp.FTPClient;
import org.apache.commons.net.ftp.FTPFile;
import org.apache.commons.net.ftp.FTPReply;

public class Server {
    private static final String server = "/server";
    private static final String host = "00.000.0.0";
    private static final String user = "username";
    private static final String pass = "password";
    private static List <FTPFile> data;
    private static FTPClient ftp = new FTPClient ();

    public static void load (String folder) {
        try {
            // Connect to the SERVER
            ftp.connect(host, 21);
            if (!FTPReply.isPositiveCompletion(ftp.getReplyCode())) {
                System.out.println("Could not connect to the server.");
                return;
            }

            // Login to the SERVER
            ftp.enterLocalPassiveMode();
            if (!ftp.login(user, pass)) {
                System.out.println("Could not login to the server.");
                return;
            }

            // Get DATA from the SERVER
            System.out.println(server + "/" + folder);
            data = Arrays.asList(ftp.listFiles(server + "/" + folder));
            System.out.println(data.size());
            for (int f = 0; f < data.size(); f++)
                System.out.println(data.get(f).getName());

            // Disconnect from the SERVER
            ftp.logout();
            ftp.disconnect();

        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    public static String read (FTPFile file) {
        try {
            String name = file.getName();
            File tempFolder = new File ("temp/" + name);
            tempFolder.mkdirs();

            // Create a TEMPORARY DATA FILE
            File tempFile = new File (tempFolder.getAbsolutePath() + "/data");
            System.out.println(tempFile.getAbsolutePath());
            tempFile.createNewFile();
            tempFile.deleteOnExit();

            // Get ready to DOWNLOAD DATA from the SERVER
            FileOutputStream out = new FileOutputStream (new File (name));
            ftp.connect(host, 21);
            ftp.login(user,  pass);

            // DOWNLOAD and DISCONNECT
            ftp.retrieveFile(name, out);
            out.close();
            ftp.logout();
            ftp.disconnect();
        } catch (Exception e) {
            e.printStackTrace();
        }
        return ""; // This should return a String with data read from the file
    }
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T19:15:49.850

如果您想“读取”（如检查其内容）您必须下载的文件，即将其内容从服务器传输到客户端。当您受限于客户端解决方案时，无法绕过它。

通常，仅在客户端检查用户权限是一个坏主意。如果恶意用户拥有访问服务器的正确凭据（可以从客户端提取），他可以绕过客户端授权，使其无用。

用户的身份验证和授权应始终发生在服务器端。

在您的示例中，您可以考虑在 ftp 服务器上创建不同的用户以及访问、读取和写入文件/目录的适当权限。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T19:15:16.000

不，如果不先下载文件，就不可能通过 ftp 从客户端读取文件。

你必须在（ftp-）服务器端安装软件。

# tomcat - Tomcat 7.0.35 OutOfMemoryError：PermGen 空间

> ID：14487081
> 
> 赞同：0
> 
> 时间：2013-01-23T18:47:07.337
> 
> 标签：tomcat

我为 tomcat 部署了一个相当大的 maven 项目，现在每当我尝试访问 localhost:8080 时，tomcat 都会给我一个 OutOfMemeroryError。在我尝试在浏览器中查看 localhost:8080 之前，它似乎没有问题。我为 JAVA_OPS 添加了一个环境变量，允许最大 4096m，配置 catalina.sh 以执行相同的操作，并且对 startup.bat 进行相同的处理。我需要继续过去，怎么办？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:55:15.877

我开始检查我的更改，并将环境变量从 JAVA_OPS 更改为 JAVA_OPTS，并为 CATALINA_OPTS 添加了另一个具有相同数据的变量。有效。

# java - Java VS。C++ / C 树实现，幕后发生了什么

> ID：14487083
> 
> 赞同：3
> 
> 时间：2013-01-23T18:47:12.003
> 
> 标签：java, c++, pointers, tree

因此，我一直在审查我的数据结构，但与具有指针的语言相比，我从来没有理解带有指针的事物的 java 实现最终是如何实际工作的。

java类中的树或列表是用一个节点类实现的，该节点类具有其他节点类，如果它是一棵树，则元素说左节点和右节点。

```
public class Node {
    private int data;
    private Node left;
    private Node right;
    ...
} 
```

编译器是否知道只使用指针，或者所有这些都是按值完成的，并且我从树节点中保存了许多不同版本的相同值？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T18:49:31.400

在 Java 中，`Node`字段是引用。没有其他选项，因此不需要特殊符号。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T18:52:45.850

尽管 java 没有显式使用指针，但它完全是面向指针的。没有指针 java 不起作用。在 java 中，“this”指针显式用于访问与对象关联的数据成员。

它们被称为“引用类型”。引用指向对象。基本上。没有办法“获取变量的地址”。但是您可以将变量的值复制到包装对象的字段中，然后可以通过引用指向该字段。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T22:48:56.783

我发现在这件事上的混淆通常归结为不了解对象是如何在 Java 中传递的。

使用如下代码所示的 updateNodeData，您将按值传递**引用的****副本**作为第一个参数。然后将修改该节点的数据（假设数据是**public**）。

 ****类似地，nodeToBeChanged 的​​ leftNode 现在也将引用与传入 newLeftNode 相同的节点。不会克隆/创建具有复制值的新节点。

```
public void updateNodeData(Node node, int newValue){
    node.data = newValue;
}

public void setLeftNode(Node nodeToBeChanged, Node newLeftNode)
{
  nodeToBeChanged.leftNode = newLeftNode;
} 
```

然而，经常令人困惑的是，因为它是按值传递的引用的副本，所以您不能像下面演示的那样交换两个节点。您将交换*副本*而不是实际参考。

```
public void swap(Node node1, Node node2)
{
  Node tmpNode = node1;     
  arg1 = arg2;
  arg2 = tmpNode;
} 
```

现在回到最初的问题。如果要使用像这样的节点来实现节点树：

```
public class Node {
    private int data;
    private Node left;
    private Node right;
    ...
} 
```

不会有同一个节点的不同克隆在整个地方浪费内存。它只是一长串节点和引用。****

# html - 微格式中的微数据“内容”属性是否有类似物？

> ID：14487088
> 
> 赞同：1
> 
> 时间：2013-01-23T18:47:24.467
> 
> 标签：html, microdata, microformats

最近我第一次不得不使用微格式和微数据，遇到了以下问题。我需要显示不是 ISO 格式的货币。正如我在微数据中所理解的那样，我可以在“内容”属性中提供实际值：

```
<span itemprop="price">123</span> <span itemprop="currency" content="RUB">руб.</span> 
```

如果我喜欢的话，在微格式中：

```
<span class="price">123 руб.</span> 
```

我在 Google 结构化数据测试工具中收到“价格字段包含无效字符”警告

如果是这样：

```
<span class="price">123</span> <span class="currency">руб.</span> 
```

然后“货币应采用 ISO 4217 格式”警告。

我怎样才能在微格式中做到这一点？我必须担心所有这些警告吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:28:03.227

首先，你不能`<span itemprop="currency" content="RUB">руб.</span>`在微数据中做。该`content`属性仅对元元素有效。所以你可以做到`<meta itemprop="currency" content="RUB">руб.`。与普通`<meta>`元素不同，这些元素可以出现在`<body>`页面的部分中。但是，没有与此等效的直接微格式。

但是你也可以`<data itemprop="currency" value="RUB">руб.</data>`在微数据中实现同样的事情，而且似乎类似的东西在微`<data class="currency" value="RUB">руб.</data>`格式中也会做同样的工作——请参阅[http://microformats.org/#time-data——](http://microformats.org/#time-data)至少在原则上，因为它仍然相当新的。

如果做不到这一点，我相信在微格式中这样做的旧方法是，`<abbr class="currency" title="RUB">руб.</abbr>`但这是可怕的语义，我会强烈反对它。

# c++ - 类成员 - 外部世界的 const，类的非 const

> ID：14487092
> 
> 赞同：2
> 
> 时间：2013-01-23T18:47:53.327
> 
> 标签：c++, oop, class, c++11, encapsulation

例如，我有一个地图类，它有一些成员：sizeX、sizeY、瓷砖矢量、名称等。

有两种管理从外部访问的变量的基本方法：

*   封装，但它添加了大量代码和更多类型（setX() 和 getX() const 函数）
*   将经常从外部访问的变量作为公共成员并保持简单

这两个我都不喜欢。我想出了一个想法：一个类成员，它从外部充当 const（因此您可以轻松访问它 object.member 但它是安全的）并且在类内部它是非常量的。但是，据我所知，c++ 缺少它。我知道的唯一（丑陋的）解决方法是让所有东西都 const 并在类函数中使用 const cast。

在 C++ 11 中有更好的方法吗？有关键字吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:05:12.250

一个简单的解决方法，只是稍微减少打字量：

```
#define MEMBER(T,x) \
  private: T x##_; \
  public: T const& x () const { return x##_; }

struct A {
  MEMBER(int,x)
  MEMBER(double,y)
}; 
```

那么你可以在类内部使用 x_ 和 y_ ，在外部使用 x() 和 y() 。

# jquery - 包含以前的分离内容后，prettyPhoto 无法正常工作

> ID：14487100
> 
> 赞同：1
> 
> 时间：2013-01-23T18:48:27.010
> 
> 标签：jquery, prettyphoto

我偶然发现了一个问题，无法锻炼使其发挥作用。

我正在做这个投资组合页面，我正在通过 jQuery 进行导航。

所有图像都使用正确的链接和 rel="prettyPhoto" 锚定。

在页面的开头，它分离每个锚点并再次附加它。在第一页中，prettyPhoto 工作正常。问题是当我导航到另一个页面单击下一个或上一个时它停止工作。

奇怪的是，在第一页中它可以工作，而其他页面则没有，但我使用相同的 progs 将其分离并附加回来。

这是 pastebin 的链接：http: [//pastebin.com/SNJYcuVh](http://pastebin.com/SNJYcuVh)

一些变量是葡萄牙语。我希望它不会搞砸你。

ps.：我尝试再次调用 jQuery("a[rel^='prettyPhoto']").prettyPhoto({theme:'dark_square', autoplay: false, social_tools:''}); 单击下一个或上一个后，但它也不起作用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:56:59.227

好的。寻找出路。

这很简单。

在最终用户与投资组合页面的每次交互之后，我再次调用了 prettyPhoto 初始化函数，并且它起作用了。

感谢所有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:14:04.407

只需更改`live`to`on`并将侦听器更改`body`为如下所示：

```
jQuery("body").on("click", "a[rel^='prettyPhoto']", function() {
    jQuery.prettyPhoto.open(jQuery(this).attr("href"),"","");
    return false;
}) 
```

;

# c# - 我可以从 ClickOnce 部署文件中检索证书信息吗？

> ID：14487101
> 
> 赞同：4
> 
> 时间：2013-01-23T18:48:28.637
> 
> 标签：c#, deployment, certificate, clickonce

我有一个 ClickOnce 应用程序，该应用程序已部署给许多用户，该应用程序使用位于以前开发人员计算机上的证书进行签名。自该开发人员离开公司以来，证书已过期。为了从另一台机器重新发布应用程序，我们需要能够找到原始证书并使用扩展更新它。我可以访问之前开发人员的计算机，但我无法找到要复制和更新证书的原始 .pfx 文件。我还可以访问所有以前部署的文件。

我们尝试部署应用程序并收到错误：

> 部署标识与订阅不匹配。

我最好的猜测是，事实上，基于 MSDN 论坛问题和响应的不同证书导致此错误，*[部署身份与描述不匹配](http://social.msdn.microsoft.com/forums/en-US/winformssetup/thread/feb6bbe9-38af-4976-9a68-f1066bf5d23b/)*。然而，值得注意的是，我们既更改了部署代码的机器，也将解决方案更新到了 Visual Studio 2010（尽管平台和配置相同）。

如何从以前的开发者机器或部署文件中检索原始证书信息？还是我们可能会试图解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-09-01T13:26:32.723

如果对机器/用户帐户的物理访问可用，则检索证书应该不是问题，只要它在导入时没有使用自定义密码进行保护。如图所示，可以从 Internet Explorer 选项启动导出向导。在选项卡之一中查找所需的证书（通常在*个人*选项卡中）。使用 PFX 格式导出私钥和公钥。

![在此处输入图像描述](../Images/56118f4814bc39e6f305438b3fc5129a.png)

访问导出向导的另一种方法是通过[MMC 管理单元](http://msdn.microsoft.com/en-us/library/ms788967.aspx)。

**[更新]**为了答案的完整性，不可能从签名的部署文件中检索私钥，因为它只包含加密密钥的公共部分。也许，在 OP 的情况下，私钥仍然存在，埋在开发机器的文件系统中的某个地方（作为 .PVK 文件），尽管这样存储它是一种不好的做法。可以在[此处](https://stackoverflow.com/questions/2292495/what-is-the-difference-between-a-cer-pvk-and-pfx-file)找到有关证书文件类型的更多详细信息。如上所述，我宁愿希望在机器的证书存储中找到私钥和公钥。

# c++ - wxWidgets ContextMenu/Popup

> ID：14487102
> 
> 赞同：2
> 
> 时间：2013-01-23T18:48:28.740
> 
> 标签：c++, popup, contextmenu, wxwidgets, listcontrol

我有一个**wxListCtrl**，我想这样做，以便当用户右键单击一个项目以显示一个**contextmenu/popup**。

> 如何使用 wxFormBuilder 或以编程方式执行此操作？

干杯。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T18:58:35.820

您需要捕获 type[`wxEVT_COMMAND_LIST_ITEM_RIGHT_CLICK`](http://docs.wxwidgets.org/trunk/classwx_list_ctrl.html)或`wxEVT_CONTEXT_MENU`（更一般地说，感谢 vadz）的事件，然后弹出一个[wxMenu](http://docs.wxwidgets.org/trunk/classwx_menu.html)。

在 wxListCtrl 示例中可以看到这方面的一个示例，该示例可以在`wxdir\samples\listctrl`. 从示例修改的简短片段应该会给您正确的想法：

```
void MyListCtrl::OnRightClick(wxListEvent& event)
{
    // Show popupmenu at position
    wxMenu menu(wxT("Test"));
    menu.Append(LIST_ABOUT, wxT("&About"));
    PopupMenu(&menu, event.GetPoint());
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T18:55:52.230

看看[http://wiki.wxwidgets.org/WxMenu中的例子](http://wiki.wxwidgets.org/WxMenu)

# c# - 我无法控制的两个第三方类的通用接口。外部多态性？

> ID：14487103
> 
> 赞同：8
> 
> 时间：2013-01-23T18:48:29.677
> 
> 标签：c#, web-services, design-patterns, interface, wrapper

我在这里需要一点图案方向。C# 新手。

我正在使用包装 Web 服务的第三方开发工具包。我处理了两个特定的类，虽然相对相似，但它们位于开发工具包中的两个不同的命名空间中，并且没有通用的基类。但是，我想针对他们俩的通用接口进行编程。我随意地将一个基本上包装了包装器的实现拼凑在一起，但由于不断的类型转换，我觉得它不是最有效的方法。

我一直在挖掘关于适配器、接口、扩展方法等的文章，但我的时间不多了，所以如果我能朝一个方向推进，我将不胜感激。

```
using ThirdParty.TypeA.Employee;
using ThirdParty.TypeB.Employee;

public class Employee
{
     private object genericEmployee;

     private EmployeeType empType;

     public enum EmployeeType
     {
          TypeA = 0;
          TypeB = 1;
     }   

     public Employee(Object employee, EmployeeType type)
     {
         genericEmployee = employee;
         empType = type;
     }

     public String Name
     {
         if (empType == EmployeeType.TypeA)
             return (ThirdParty.TypeA.Employee)genericEmployee.Name;
         else
             return (ThirdParty.TypeB.Employee)genericEmployee.Name;
     }

     public String Age
     {
         if (empType == EmployeeType.TypeA)
             return (ThirdParty.TypeA.Employee)genericEmployee.Age;
         else
             return (ThirdParty.TypeB.Employee)genericEmployee.Age;
     }
 } 
```

修订版 2：

```
class EmployeeTypeAAdapter : TypeA, IEmployeeAdapter
{
    TypeA _employee;
    public EmployeeTypeAAdapter(TypeA employee) 
    { 
         _employee = employee
    }

     public String Name
     {
        get { return _employee.Name; }  
        set { _employee.Name = value; }
     } 

      public String Balance
      {
        get
        {
            if (_employee.Balance != null)
            {
                decimal c = _employee.Balance.Amount;
                return String.Format("{0:C}", c);
            }
            else
            {
                return "";
            }
          }
       }  

       //...
}

class EmployeeTypeBAdapter : TypeB, IEmployeeAdapter
{
    TypeB _employee;
    public EmployeeTypeAAdapter(TypeB employee) 
    { 
         _employee = employee
    }

     public String Name
     {
        get { return _employee.Name; }  
        set { _employee.Name = value; }
     } 

      public String Balance
      {
        get
        {
            if (_employee.Balance != null)
            {
                decimal c = _employee.Balance.Amount;
                return String.Format("{0:C}", c);
            }
            else
            {
                return "";
            }
          }
       }  

     //....
} 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T18:54:16.920

试试这个方法：

```
public interface IEmployeeAdapter
{
    string Age { get; set; }
    string Name { get; set; }
}

class EmployeeTypeAAdapter : TypeA, IEmployeeAdapter
{
    public EmployeeTypeAAdapter(TypeA employee) { }
}

class EmployeeTypeBAdapter : TypeB, IEmployeeAdapter
{
    public EmployeeTypeBAdapter(TypeB employee) { }
}

public static class EmployeeAdapterFactory
{
    public static IEmployeeAdapter CreateAdapter(object employee, EmployeeType type)
    {
        switch (type)
        {
            case EmployeeType.TypeA: return new EmployeeTypeAAdapter((TypeA)employee);
            case EmployeeType.TypeB: return new EmployeeTypeBAdapter((TypeB)employee);
        }
    }

    // or without enum

    public static IEmployeeAdapter CreateAdapter(object employee)
    {
        if (employee is TypeA) return new EmployeeTypeAAdapter((TypeA)employee);
        if (employee is TypeB) return new EmployeeTypeABdapter((TypeB)employee);
    }

    // or better introduce sort of type map
} 
```

另一个专有名称是 EmployeeProxy，如您所愿。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T23:54:05.690

您正在尝试做的事情被称为[Duck typing](http://en.wikipedia.org/wiki/Duck_typing)。您可以使用适配器类和共享接口来做到这一点，但是手动创建这些适配器需要大量重复的胶水代码。您可以绕过编写胶水代码的一种方法是动态构造适配器类型。您可以通过 IL Emit 自己完成此操作（如果您以前从未有机会玩过它，这是一个值得练习的练习，尽管可能需要考虑很多边界情况。）如果您只是对让它工作感兴趣，但是，您可以查看[这个项目](https://github.com/deftflux/DuckTyping) as a place to start. The C# 'dynamic' type could also be used (and winds up doing some of the same code generation behind the scenes), but it doesn't give you a reference you can pass around to non-dynamic code as if it were an interface type.

# iphone - 日历框架 iOS

> ID：14487105
> 
> 赞同：-1
> 
> 时间：2013-01-23T18:48:40.270
> 
> 标签：iphone, ios, objective-c, calendar, customization

我正在开发一个新的应用程序，我需要一个简单的可自定义的月历。我已经尝试过 Kal 和 Tapku 但他们的日间牢房是如此接近。事实上，我会在单个单元格中插入颜色、文本和图像。

你可以帮帮我吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:09:28.660

请检查这些第三方日历：

1.  [**CK日历**](http://www.cocoacontrols.com/platforms/ios/controls/ckcalendar)
2.  [**PM日历**](http://www.cocoacontrols.com/platforms/ios/controls/pmcalendar)
3.  [**ios-日历**](http://www.cocoacontrols.com/platforms/ios/controls/ios-calendar)
4.  [**OC日历**](http://www.cocoacontrols.com/platforms/ios/controls/occalendar)

# javascript - 如何使用 jQuery 更改超链接/按钮

> ID：14487107
> 
> 赞同：0
> 
> 时间：2013-01-23T18:48:49.677
> 
> 标签：javascript, jquery, html, ruby-on-rails

在 Rails 中，我正在修改一个超链接以使用 jQuery 添加一个 javascript 变量。它在我使用 link_to 时有效，但在我使用超链接时无效。

此代码有效：

```
<% url1 = game_path(@gameId)%>
<%= link_to "Go!", url1, :id => "my_link", :method => 'put' %>

<script>
function jquerySetup(){
var url = "";
var url = $('#my_link').attr('href') + '&message=' + gameWon;
$('#my_link').attr('href', url);
}
</script> 
```

但是这段代码没有：

```
<% url1 = game_path(@gameId)%>
<a class="btn btn-primary" href= <%= url1 %> id= "my_link" > Go! </a>

<script>
function jquerySetup(){
var url = "";
var url = $('#my_link').attr('href') + '&message=' + gameWon;
$('#my_link').attr('href', url);
}
</script> 
```

我会很感激任何帮助！谢谢！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:50:42.377

是`<%= url1 %>`用引号括起来的吗？如果没有，请将其括在引号中，并且应正确指定您的 href。

# java - 如何监听搜索键？

> ID：14487108
> 
> 赞同：0
> 
> 时间：2013-01-23T18:48:55.310
> 
> 标签：java, android

我正在尝试收听搜索键，我在 stackoverflow 上找到了两种解决方案，但由于某种原因，它们都不能与搜索按钮一起使用。

```
@Override
public boolean onSearchRequested() {
     System.out.println("KEYDOWN");
     return true;
}

@Override
public boolean onKeyDown(int keyCode, KeyEvent event)  {
     System.out.println("KEYDOWN");
     return true;
} 
```

如您所见，第一个选项只是搜索意图，第二个选项应该捕获所有按键，无论按键，onKeyDown 对我的 Nexus S 中的所有按键（后退、菜单和音量键）都正常工作，但根本没有抓住搜索键。人们似乎很确定这些选项中的任何一个都应该工作，甚至在建议 onSearchRequested 的地方得到批准，但我已经在两部手机中尝试过，但它们都不起作用。

如何捕获和禁用 android 上的搜索键？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:52:47.060

试试这个 ：

```
 @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        Toast.makeText(getApplicationContext(), "Fired", Toast.LENGTH_LONG).show();
        if (keyCode == KeyEvent.KEYCODE_SEARCH) {
            Toast.makeText(getApplicationContext(), "Search Key Fired", Toast.LENGTH_LONG).show();
            return true;
        }
        return super.onKeyDown(keyCode, event);
     } 
```

**或者 ：**

```
 @Override
    public boolean onSearchRequested() {
        Toast.makeText(getApplicationContext(), "onSearchRequested", Toast.LENGTH_LONG).show();
        return false;
    } 
```

**笔记 ：**

> 如果您的设备确实使用最新最好的操作系统，请继续点击该 Google 搜索栏，您会看到“立即获取 Google！” 屏幕（图 A）。此时，您可以选择启用 Google Now 或稍后关闭该功能。您还可以点按“了解更多”以了解 Google 即时提供的内容。

**参考 ：**

[Android Jelly Bean 上的 Google Now 不仅仅是一种搜索功能](http://www.techrepublic.com/blog/smartphones/google-now-on-android-jelly-bean-is-more-than-just-a-search-feature/6124)

谢谢

# c# - 在没有第二个线程的帮助下异步执行代码？

> ID：14487109
> 
> 赞同：2
> 
> 时间：2013-01-23T18:48:55.783
> 
> 标签：c#, multithreading, asynchronous

好的，首先，我不需要实现任何东西。我只需要知道答案，因为更有经验的人告诉我，异步执行不一定要涉及新线程，因为线程是有些沉重的结构，这让我很困惑，我不能同意。

现在假设，我有两种方法 -`Execute()`和`ExecuteAsync()`. `Execute()`在主线程上运行。我想`ExecuteAsync()`从内部调用`Execute()`，我不在乎它何时完成执行，但是当它执行时，可能（或可能不是）我想使用它的返回值。这是异步执行的典型示例，对吧？

我知道我可以使用`BackgroundWorker`or `IAsyncResult`( `Delegate.BeginInvoke()`) 来做到这一点，但是 AFAIK 在引擎盖下会产生一个辅助 CLR 线程/线程池线程。

那么是否有可能在`ExecuteAsync()`没有第二个线程的帮助的情况下异步执行该方法？

**编辑：**我认为这个编辑将进一步阐明这种情况。调用`ExecuteAsync()`不是唯一（或最后）`Execute()`要执行的任务。`Execute()`应该继续它自己的任务而不关心`ExecuteAsync()`方法的执行。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:03:17.457

这是一个使用异步且从不使用多个线程的程序示例：

```
public class Foo
{
    private int _value;
    private TaskCompletionSource<bool> tcs = new TaskCompletionSource<bool>();
    public int Value
    {
        get
        {
            return _value;
        }
        set
        {
            _value = value;
            var oldTCS = tcs;
            tcs = new TaskCompletionSource<bool>();
            oldTCS.SetResult(true);
        }
    }

    public Task ValueChanged()
    {
        return tcs.Task;
    }
}

private static void Main(string[] args)
{
    Foo foo = new Foo();
    foo.ValueChanged()
        .ContinueWith(t =>
        {
            Console.WriteLine(foo.Value);
        }, TaskContinuationOptions.ExecuteSynchronously);

    foo.Value = 5;
} 
```

`Task`返回的 from将`ValueChanged`在下次`Value`更改时完成。该类的用户`Foo`可以获取该返回的任务，并根据尚未发生的操作连接延续以在该任务上运行。然后，在未来的某个时间点， 的值发生了`foo`变化，延续将运行。请注意， foo 对象可以传递给其他一些完全未知的函数，`Main`最终设置该值（以说明为什么您可能想要做这样的事情）。

不需要新线程来创建`Task`，也不需要执行延续。

这是另一个更实用的示例：

我们将从这个简单的（扩展）方法开始，它接受一个表单并返回一个`Task`指示该表单下一次关闭的时间：

```
public static class FormExtensions
{
    public static Task WhenClosed(this Form form)
    {
        var tcs = new TaskCompletionSource<bool>();
        form.FormClosed += (sender, args) => tcs.SetResult(true);
        return tcs.Task;
    }
} 
```

现在我们可以用我们的一种形式来实现它：

```
private async void button1_Click(object sender, EventArgs args)
{
    Form2 otherForm = new Form2();
    otherForm.Show();

    await otherForm.WhenClosed();

    //take some data from that form and display it on this form:
    textBox1.Text = otherForm.Name;
} 
```

创建和显示另一种形式从不涉及创建新线程。此表单和新表单都完全使用一个 UI 线程来创建和修改。

`Task`返回 from的创建`WhenClosed`根本不需要创建新线程。

`Task`等待时，不会创建新线程。当前方法结束，UI 线程返回处理消息。在某些时候，同一个 UI 线程会做一些导致第二个表单关闭的事情。这将导致任务继续运行，从而将我们返回到我们设置文本框文本的按钮单击处理程序。

*所有*这些都*完全*由 UI 线程完成，没有创建其他线程。然而我们只是“等待”（实际上没有等待）一个长时间运行的操作完成（用户将一些信息放入第二个表单然后关闭它）而不阻塞 UI 线程，从而保持主表单响应。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T18:51:21.593

> 那么是否有可能在没有第二个线程的帮助的情况下异步执行 ExecuteAsync() 方法？

某些方法可以在不使用新线程的情况下异步运行。例如，这可以通过带有[信号的](http://en.wikipedia.org/wiki/Asynchronous_I/O#Signals_.28interrupts.29)[异步 I/O](http://en.wikipedia.org/wiki/Asynchronous_I/O)来完成。尽可能在 .NET 4.5 异步 IO 中添加框架的大多数新异步方法，而不是线程。

这就是为什么不要假设异步 == 新线程是个好主意。虽然可以使用线程来实现异步，但并不总是以这种方式实现。最好将异步操作视为（希望）不会阻塞并在将来某个时间点完成的操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T18:54:35.523

[协程](http://en.wikipedia.org/wiki/Coroutine)是使用单个物理线程实现多个逻辑线程的常用方法。较旧的操作系统使用此概念和其他相关概念来实现[协作多任务](http://en.wikipedia.org/wiki/Cooperative_multitasking#Cooperative_multitasking.2Ftime-sharing)。

在这种情况下，您可能还对[延续传递风格](http://en.wikipedia.org/wiki/Continuation-passing_style)感兴趣，[Eric Lippert](https://stackoverflow.com/users/88656/eric-lippert)有一个关于这个主题的很好的博客系列 -[第 1](http://blogs.msdn.com/b/ericlippert/archive/2010/10/21/continuation-passing-style-revisited-part-one.aspx)部分、[第 2](http://blogs.msdn.com/b/ericlippert/archive/2010/10/22/continuation-passing-style-revisited-part-two-handwaving-about-control-flow.aspx)部分、[第 3](http://blogs.msdn.com/b/ericlippert/archive/2010/10/25/continuation-passing-style-revisited-part-three-musings-about-coroutines.aspx)部分、[第 4](http://blogs.msdn.com/b/ericlippert/archive/2010/10/26/continuation-passing-style-revisited-part-four-turning-yourself-inside-out.aspx)部分、[第 5 部分](http://blogs.msdn.com/b/ericlippert/archive/2010/10/27/continuation-passing-style-revisited-part-five-cps-and-asynchrony.aspx)。

# ruby - 在 YAML 变量中包含 jekyll / 液体模板数据？

> ID：14487110
> 
> 赞同：41
> 
> 时间：2013-01-23T18:48:55.670
> 
> 标签：ruby, yaml, jekyll, liquid

我正在使用 Markdown 文件的 YAML 标题将`excerpt`变量添加到可以在其他地方使用的博客文章中。在其中一个摘录中，我通过 markdown 链接标记引用了之前的一篇博客文章，并且我使用液体模板数据变量`{{ site.url }}`代替了网站的基本 URL。

所以我有类似的东西（稍微修剪一下）

```
--- 
title: "Decluttering ordination plots in vegan part 2: orditorp()"
status: publish
layout: post
published: true
tags: 
- tag1
- tag2
excerpt: In the [earlier post in this series]({{ site.url }}/2013/01/12/
decluttering-ordination-plots-in-vegan-part-1-ordilabel/ "Decluttering ordination
plots in vegan part 1: ordilabel()") I looked at the `ordilabel()` function
---- 
```

但是，jekyll 和 Maruku md 解析器不喜欢这样，这让我怀疑您不能在 YAML 标头中使用液体标记。

是否可以在 jekyll 处理的页面的 YAML 标头中使用液体标记？

1.  如果是，我在显示的示例中做错了什么？
2.  如果*不允许*，还有谁可以达到我的预期？我目前正在我的笔记本电脑上开发我的网站，并且不想硬编码基本 URL，因为当我准备好部署时它必须更改。

我从 Maruku 得到的错误是：

```
| Maruku tells you:
+---------------------------------------------------------------------------
| Must quote title
| ---------------------------------------------------------------------------
|  the [earlier post in this series]({{ site.url }}/2013/01/12/decluttering-o
| --------------------------------------|-------------------------------------
|                                       +--- Byte 40 
```

和

```
| Maruku tells you:
+---------------------------------------------------------------------------
| Unclosed link
| ---------------------------------------------------------------------------
| the [earlier post in this series]({{ site.url }}/2013/01/12/decluttering-or
| --------------------------------------|-------------------------------------
|                                       +--- Byte 41 
```

和

```
| Maruku tells you:
+---------------------------------------------------------------------------
| No closing ): I will not create the link for ["earlier post in this series"]
| ---------------------------------------------------------------------------
| the [earlier post in this series]({{ site.url }}/2013/01/12/decluttering-or
| --------------------------------------|-------------------------------------
|                                       +--- Byte 41 
```

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-06-11T14:34:02.593

今天我遇到了类似的问题。作为一个解决方案，我创建了以下简单的 Jekyll 过滤器插件，它允许在其中扩展嵌套的液体模板（例如 YAML 前端的液体变量）：

```
module Jekyll
  module LiquifyFilter
    def liquify(input)
      Liquid::Template.parse(input).render(@context)
    end
  end
end

Liquid::Template.register_filter(Jekyll::LiquifyFilter) 
```

通过将过滤器放置在站点根目录的“_plugins”子目录中，可以将过滤器添加到 Jekyll 站点。上面的代码可以简单地粘贴到 yoursite/_plugins/liquify_filter.rb 文件中。

之后，像...这样的模板

```
---
layout: default
first_name: Harry
last_name: Potter
greetings: Greetings {{ page.first_name }} {{ page.last_name }}!
---
{{ page.greetings | liquify }} 
```

...应该呈现一些输出，例如“问候哈利波特！”。扩展也适用于更深的嵌套结构 - 只要在内部液体输出块上也指定了液化过滤器。像 {{ site.url }} 这样的东西当然也可以。

**更新**- 看起来现在可以作为 Ruby gem 使用：[https](https://github.com/gemfarmer/jekyll-liquify) ://github.com/gemfarmer/jekyll-liquify 。

* * *

## 回答 #2

> 赞同：35
> 
> 时间：2013-02-01T16:31:19.173

我不相信在 YAML 中嵌套液体变量是可能的。至少，我还没有弄清楚该怎么做。

一种可行的方法是使用[Liquid 的替换过滤器](http://wiki.shopify.com/Replace)。具体来说，定义一个要用于变量替换的字符串（例如`!SITE_URL!`）。然后，在输出期间使用替换过滤器将其切换为所需的 Jekyll 变量（例如`site.url`）。这是一个精简的 .md 文件，它在我的 jekyll 0.11 安装中的行为符合预期：

```
---
layout: post

excerpt: In the [earlier post in this series](!SITE_URL!/2013/01/12/)

---

{{ page.excerpt | replace: '!SITE_URL!', site.url }} 
```

在我的机器上进行测试，正确插入了 URL，然后按预期从 markdown 转换为 HTML 链接。如果您有多个要替换的项目，您可以将多个替换调用串在一起。

```
---
layout: post

my_name: Alan W. Smith
multi_replace_test: 'Name: !PAGE_MY_NAME! - Site: [!SITE_URL!](!SITE_URL!)'

---

{{ page.multi_replace_test | replace: '!SITE_URL!', site.url | replace: '!PAGE_MY_NAME!', page.my_name }} 
```

一个重要的注意事项是[您必须明确设置 site.url](https://github.com/mojombo/jekyll/wiki/Configuration)值。Jekyll 不是免费的。你可以在你的`_config.yml`文件中设置它：

```
url: http://alanwsmith.com 
```

或者，在调用 jekyll 时定义它：

```
jekyll --url http://alanwsmith.com 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-05T23:43:01.330

如果您需要替换`data/yml`另一个`data/yml`文件中的值，我编写了插件。它不是那么优雅但有效：

我做了一些代码改进。现在它捕获一个字符串中的所有出现并使用嵌套值。

```
module LiquidReplacer
  class Generator < Jekyll::Generator
    REGEX = /\!([A-Za-z0-9]|_|\.){1,}\!/

    def replace_str(str)
      out = str
      str.to_s.to_enum(:scan, REGEX).map { 
        m = Regexp.last_match.to_s
        val = m.gsub('!', '').split('.')
        vv = $site_data[val[0]]
        val.delete_at(0)
        val.length.times.with_index do |i|
          if val.nil? || val[i].nil? || vv.nil? ||vv[val[i]].nil?
            puts "ERROR IN BUILDING YAML WITH KEY:\n#{m}"
          else
            vv = vv[val[i]]
          end
        end
        out = out.gsub(m, vv)
      }
      out
    end

    def deeper(in_hash)
      if in_hash.class == Hash || in_hash.class == Array
        _in_hash = in_hash.to_a
        _out_hash = {}
        _in_hash.each do |dd|
          case dd
          when Hash
            _dd = dd.to_a
            _out_hash[_dd[0]] = deeper(_dd[1])
          when Array
            _out_hash[dd[0]] = deeper(dd[1])
          else
            _out_hash = replace_str(dd)
          end
        end
      else
        _out_hash = replace_str(in_hash)
      end
      return _out_hash
    end

    def generate(site)
        $site_data = site.data
        site.data.each do |data|
            site.data[data[0]] = deeper(data[1])
        end
    end
  end
end 
```

将此代码放入`site/_plugins/liquid_replacer.rb`

在`yml`文件中使用`!something.someval!`as`site.data.something.someval`但没有`site.data`部分。

例子 ：

`_data/one.yml`

```
foo: foo 
```

`_data/two.yml`

```
bar: "!one.foo!bar" 
```

调用`{{ site.data.two.bar }}`会产生`foobar`

======= 旧代码 ======

```
module LiquidReplacer
  class Generator < Jekyll::Generator
    REGEX = /\!([A-Za-z0-9]|_|\.){1,}\!/

    def generate(site)
      site.data.each do |d|
        d[1].each_pair do |k,v|
          v.to_s.match(REGEX) do |m|
            val = m[0].gsub('!', '').split('.')
            vv = site.data[val[0]]
            val.delete_at(0)
            val.length.times.with_index do |i|
              vv = vv[val[i]]
            end
            d[1][k] = d[1][k].gsub(m[0], vv)
          end
        end
      end
    end
  end
end 
```

# linux-device-driver - 如何添加MCP7941X rtc linux内核驱动？

> ID：14487111
> 
> 赞同：0
> 
> 时间：2013-01-23T18:48:57.043
> 
> 标签：linux-device-driver, patch, embedded-linux

我需要使用运行 Embedded-linux 2.6的[TMS320DM368 DaVinci处理器](http://www.ti.com/product/tms320dm368)[将 MCP7941X](http://www.microchip.com/wwwproducts/Devices.aspx?dDocName=en550280) RTC linux 内核驱动程序添加到自定义硬件。这似乎可以通过向 DS1307 RTC 驱动程序添加一个或多个补丁来实现。作为一个 linux 新手，我之前没有给内核添加过补丁，但我猜我需要做的是从中创建一个纯文本文件[，](http://lkml.indiana.edu/hypermail/linux/kernel/1202.1/00417.html)将文件添加到内核/补丁中，然后添加一行来安装补丁到系列文件。我还担心[此链接](http://lkml.indiana.edu/hypermail/linux/kernel/1202.1/00417.html)中的以下注释：

```
patch depends on:
rtc: ds1307: comment and format cleanup 38f0a1072f
rtc: ds1307: simplify irq setup code f5af1f6ffe
rtc: ds1307: refactor chip_desc table c0920a32b7 
```

这些说明是否意味着我需要找到这些补丁并将这些补丁添加到内核/补丁中，或者我是否应该能够找到包含 MCP7941X 的单个最新和最好的补丁？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T13:36:38.167

欢迎来到有时令人沮丧但总是充满挑战的 Linux 内核补丁杂耍世界！除非您找到已经完成您想做的事情的人，否则您几乎只能靠自己来应用这些补丁并测试结果。是的，这些行可能表明必须在相关补丁完全应用之前应用补丁，但很容易弄清楚。

你没有说你从哪里得到你的内核或者它是基于什么的，也没有说你是如何构建它的。但是，如果您只是从命令行手动构建 2.6 内核，我认为补丁不会自动应用。但是补丁很容易应用和测试。就像是：

$ cd 顶级/级别/内核/目录

$ 补丁 -p1 < 你的补丁

请注意，您通常可以只为电子邮件提供补丁，而无需格式化任何内容。就试一试吧。patch 足够聪明，可以在电子邮件中找到实际格式化的补丁。

您可以使用 quilt 工具将补丁应用到查询。手册页和网络搜索应该让这很容易。

不幸的是，正如我所说，除非您碰巧找到已经这样做的人，否则在您尝试并测试之前您不会知道结果。这就是开源的本质。

最后，如果你不说“git”，上面依赖列表中那些补丁之后的那些 10 位十六进制数字指的是 git“提交”，也称为“哈希”。当然，它们指的是您的电子邮件中未标识的某些特定 git 内核存储库。同样，git 和互联网的手册页应该指导您。

正如锯末指出的那样，如果您尚未将驱动程序配置到内核中，则可能需要在内核配置中使用“make menuconfig”添加它。如果驱动程序不存在，那完全是另一回事了，我的书“嵌入式 Linux 入门”中有一节详细介绍了如何将配置片段添加到内核构建系统，以添加尚未出现在您的系统中的新驱动程序。内核树。

祝你好运。

# extjs - Extjs 面板：如何动态地将“框架”属性变为“真”？

> ID：14487122
> 
> 赞同：0
> 
> 时间：2013-01-23T18:49:35.253
> 
> 标签：extjs, panel

我使用此代码在运行时制作面板->帧值 = true：

Ext.apply(mypanel, {frame: 'true'});

但它不起作用！

当我使用： Ext.apply(mypanel, {collapsible: 'true'}); 它工作正常！

我在这里错过了什么吗，如何在运行时将面板->框架变为真？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:45:40.820

```
Ext.apply(mypanel, {frame: 'true'});
mypanel.setUI(mypanel.ui + '-framed'); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T20:35:55.433

我不知道您使用的是哪个版本的 ExtJS，但是在 ExtJS 4.0.7 中（以及在 4.1.3 中，有不同的实现但具有相同的含义）如果您的浏览器支持 CSS3 边框半径（检查值`Ext.supports.CSS3BorderRadius`）然后框架是无论实例的框架属性的值如何，都不会创建。

[请参阅Ext.AbstractComponent.initFrame](http://docs.sencha.com/ext-js/4-0/source/AbstractComponent.html) (ExtJS 4.0.7) 或[Ext.AbstractComponent.addUIClsToElement](http://docs.sencha.com/ext-js/4-1/source/AbstractComponent.html) (ExtJS 4.1.3)的源代码

# java - 更新 JWS 部署的应用程序的数据文档

> ID：14487129
> 
> 赞同：0
> 
> 时间：2013-01-23T18:49:56.540
> 
> 标签：java, swing, jnlp, java-web-start, application-resource

我有一个使用许多数据文件的 Swing 应用程序，这些数据文件会不时更改。如何在客户端机器上加载这些数据文件？有什么方法可以创建一个像结构这样的文件夹并运行一个批处理文件吗？任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T08:11:25.307

做这件事有很多种方法：

1.  假设您想随数据文件一起发布您的应用程序，您可以将它们作为 zip/jar 嵌入到您的 application-jar-file 中。

    将嵌入的 zip 提取到一个临时的本地文件，并使用 ZipFileSystemProvider 将内容提取到光盘上的某个位置。

    [这](https://stackoverflow.com/questions/11208681/extract-some-content-from-jar-file-downloaded-with-jws/11304705#11304705)是一个示例，如何从 JWS 下载的 .jar 文件中嵌入的 zip/jar 文件中提取一些内容。

2.  与 1 相同，但跳过 zip 内容，而是提供您要提取的所有资源的列表

3.  另一种方法是使用[java.nio.file](http://docs.oracle.com/javase/7/docs/api/java/nio/file/package-summary.html) (java 7+) 或[java.io.File实用地创建文件](http://docs.oracle.com/javase/7/docs/api/java/io/File.html)

# asp.net-mvc-3 - 如何在 MVC3 中拆分多个字符？

> ID：14487131
> 
> 赞同：0
> 
> 时间：2013-01-23T18:50:10.503
> 
> 标签：asp.net-mvc-3

大家好，我正在尝试删除文本框中的一些字符

例如

在我的文本框中，用户填写此文本，如下所示

```
http://youtu.be/YBkPomr40pg 
```

我想删除这些字符`http://youtu.be/`

那么我该怎么做你能给我举个例子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:56:11.250

将 URL 加载到 Uri 中并从中获取相对 URL。 [http://msdn.microsoft.com/en-us/library/system.uri.aspx](http://msdn.microsoft.com/en-us/library/system.uri.aspx)

有关如何获取相对 URL，请参阅此问题：[Getting the relative uri from the absolute uri](https://stackoverflow.com/questions/1109538/getting-the-relative-uri-from-the-absolute-uri)

请注意，您将获得以 / 开头的 URL。你可以自己修剪。

如果您说您只会获取 youtube 网址并且您只想要 youtube 视频 ID，那么同样的技术可以工作，但您最好使用字符串拆分来拆分 '/' 并获得最后一个物品。

```
var parts = "http://youtu.be/YBkPomr40pg".Split("/".ToCharArray());
var id = parts[parts.Length - 1]; // just get the last one. 
```

# ruby-on-rails - 来自控制器的 mongoid 随机

> ID：14487137
> 
> 赞同：2
> 
> 时间：2013-01-23T18:50:34.430
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, ruby-on-rails-3.1, mongoid

是否有可能`shuffle/random`从控制器中的操作中获取一个集合。

```
def action
 #pseudocode something like the next:
 @objects = Object.random
 respond_to do |format|
  format.html
 end
end 
```

我现在可以从我的观点中获得洗牌，其中：

```
<% @objects.shuffle.each do |microfunc| %>
.
.
.
<% end %> 
```

在视图中可以使用`each or for loop`。我不想使用循环从一个集合中获取随机对象。

**如何从我的动作控制器中获取 Mongoid::Criteria 中的随机对象？**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:53:24.907

没有什么好办法。您的选择：

*   为每个文档存储一个整数并通过其值获取：[http ://cookbook.mongodb.org/patterns/random-attribute/](http://cookbook.mongodb.org/patterns/random-attribute/)
*   使用效率低下的“跳过”：[Mongoid 随机文档](https://stackoverflow.com/questions/7759250/mongoid-random-document)

# objective-c - 最优解：从数据集中随机抽取项目样本

> ID：14487145
> 
> 赞同：2
> 
> 时间：2013-01-23T18:50:55.680
> 
> 标签：objective-c, algorithm, performance

所以我最近有一个面试问题，我想知道最佳解决方案是什么。代码在 Objective-c 中。

假设我们有一个非常大的数据集，我们希望从中获取随机项目样本来测试新工具。与其担心访问的细节，让我们假设系统提供了这些东西：

```
// Return a random number from the set 0, 1, 2, ..., n-2, n-1.
int Rand(int n);

// Interface to implementations other people write.
@interface Dataset : NSObject

// YES when there is no more data.
- (BOOL)endOfData;

// Get the next element and move forward.
- (NSString*)getNext;

@end

// This function reads elements from |input| until the end, and
// returns an array of |k| randomly-selected elements.
- (NSArray*)getSamples:(unsigned)k from:(Dataset*)input
{
  // Describe how this works.
} 
```

编辑：所以你应该从给定的数组中随机选择项目。因此，如果 k = 5，那么我想从数据集中随机选择 5 个元素并返回这些项目的数组。数据集中的每个元素都必须有同等的机会被选中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:30:05.190

这似乎是使用[Reservoir Sampling](http://en.wikipedia.org/wiki/Reservoir_sampling)的好时机。以下是针对此用例的 Objective-C 改编版本：

```
NSMutableArray* result = [[NSMutableArray alloc] initWithCapacity:k];

int i,j;

for (i = 0; i < k; i++) {
    [result setObject:[input getNext] atIndexedSubscript:i];
}

for (i = k; ![input endOfData]; i++) {
    j = Rand(i);

    NSString* next = [input getNext];

    if (j < k) {
        [result setObject:next atIndexedSubscript:j];
    }
}

return result; 
```

上面的代码不是最有效的水库采样算法，因为它为经过 index 处的条目的水库的每个条目生成一个随机数`k`。在一般类别“油藏采样”下存在稍微复杂的算法。[这](http://www.cs.umd.edu/~samir/498/vitter.pdf)是关于名为“算法 Z”的算法的有趣读物。我会很好奇人们是否也能找到关于水库采样的更新文献，因为这篇文章发表于 1985 年。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:04:50.623

有多种方法可以做到这一点，第一种方法：

```
1\. use input parameter k to dynamically allocate an array of numbers
    unsigned * numsArray = (unsigned *)malloc(sizeof(unsigned) * k);

2\. run a loop that gets k random numbers and stores them into the numsArray (must be careful here to check each new random to see if we have gotten it before, and if we have, get another random, etc...)

3\. sort numsArray

4\. run a loop beginning at the beginning of DataSet with your own incrementing counter dataCount and another counter numsCount both beginning at 0\.  whenever dataCount is equal to numsArray[numsCount], grab the current data object and add it to your newly created random list then increment numsCount.

5\. The loop in step 4 can end when either numsCount > k or when dataCount reaches the end of the dataset.

6\. The only other step that may need to be added here is before any of this to use the next command of the object type to count how large the dataset is to be able to bound your random numbers and check to make sure k is less than or equal to that. 
```

第二种方法是遍历实际列表 MULTIPLE 次。

```
// one must assume that once we get to the end, we can start over within the set again
1\. run a while loop that checks for endOfData
    a. count up a count variable that is initialized to 0

2\. run a loop from 0 through k-1
    a. generate a random number that you constrain to the list size
    b. run a loop that moves through the dataset until it hits the rand element
    c. compare that element with all other elements in your new list to make sure it isnt already in your new list
    d. store the element into your new list 
```

可能有一些方法可以通过存储当前列表位置来加速第二种方法，这样，如果您生成一个超过当前指针的随机数，您不必再次移动整个列表以返回元素 0，然后返回您希望检索的元素。

一种潜在的第三种方法可能是：

```
1\. run a loop from 0 through k-1
    a. generate a random
    b. use the generated random as a skip count, move skip count objects through the list
    c. store the current item from the list into your new list 
```

第三种方法的问题是不知道列表有多大，你不知道如何限制随机跳过计数。此外，即使你这样做了，它也不会真正看起来像一个随机抓取的子集，可以轻松到达列表中的最后一个元素，因为从统计上讲，你永远不可能到达最后一个元素（即不是每个元素都给出被选中的平等机会。）

可以说，最快的方法是方法 1，首先生成随机数字，然后只遍历列表一次（是的，实际上是两次，一次是为了获取数据集列表的大小，然后是再次获取随机元素）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:15:59.337

有趣的问题，但由于 DataSet 中没有计数或类似方法，并且您不能多次迭代，我只能想出这个解决方案来获得好的随机样本（没有 k > Datasize 处理）：

```
- (NSArray *)getSamples:(unsigned)k from:(Dataset*)input {
    NSMutableArray *source = [[NSMutableArray alloc] init];
    while(![input endOfData]) {
      [source addObject:[input getNext]];
    }

    NSMutableArray *ret = [[NSMutableArray alloc] initWithCapacity:k];
    int count = [source count];
    while ([ret count] < k) {
        int index = Rand(count);
        [ret addObject:[source objectAtIndex:index]];
        [source removeObjectAtIndex:index];
        count--;
    }
    return ret;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T19:33:18.173

这不是我在采访中所做的答案，但这是我希望我所做的：

1.  存储指向数据集中第一个元素的指针
2.  循环数据集以获取计数
3.  将数据集重置为指向第一个元素
4.  创建 NSMutableDictionary 用于存储随机索引
5.  执行从 i=0 到 i=k 的 for 循环。每次迭代，生成一个随机值，检查字典中是否存在值。如果是这样，请继续生成一个随机值，直到获得一个新值。
6.  循环数据集。如果当前索引在字典中，则将其添加到随机子集值数组中。
7.  返回随机子集的数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T19:57:51.500

我们需要一点概率论。和其他人一样，我将忽略 n < k 的情况。第 n 项被选入大小为 k 的集合的概率仅为 C(n-1, k-1) / C(n, k)，其中 C 是二项式系数。一点数学表明这只是k/n。对于其余部分，请注意第 n 个项目的选择独立于所有其他选择。换句话说，“过去并不重要”。

所以一个算法是：

```
S = set of up to k elements
n = 0
while not end of input
   v = next value
   n = n + 1
   if |S| < k add v to S
   else if random(0,1) >= k/n replace a randomly chosen element of S with v 
```

我会让编码人员编码这个！这很微不足道。您所需要的只是一个大小为 k 的数组和一个数据传递。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-24T04:43:25.093

如果您关心效率（正如您的标签所暗示的那样）并且知道总体中的项目数量，**请不要使用水库抽样**。这将需要您遍历整个数据集并为每个数据集生成一个随机数。

相反，选择从*0*到*n-1 的*五个值。在不太可能的情况下，五个索引之间存在重复，将重复替换为另一个随机值。然后使用五个索引对总体中的第 i 个元素进行随机访问查找。

这很简单。它使用随机数生成器的最小调用次数。*它只*为相关的选择访问内存。

如果您事先不知道数据元素的数量，您可以循环数据一次以获取总体大小并按上述方法进行操作。

如果您不允许对数据进行多次迭代，请使用分块形式的储层抽样：1) 选择前五个元素作为初始样本，每个元素的概率为 1/5。2) 读入大量数据并从新集合中选择五个新样本（仅使用对 Rand 的五个调用）。3）成对地，决定是保留新样本项还是旧样本元素（几率与两个样本组中的每一个的概率成正比）。4) 重复直到所有数据都被读取。

例如，假设有 1000 个数据元素（但我们事先并不知道这一点）。

*   选择前五个作为初始样本： current_sample = read(5); 人口=5。
*   读取一大块*n*个数据点（在本例中可能 n=200）：

    *   子流行=读取（200）；
    *   m = len(subpop);
    *   new_sample = 选择(5, subpop);
    *   成对循环两个样本：
        *   for (a, b) in (current_sample and new_sample): 如果 random(0 to population + m) < population，则保留*a*，否则保留 *b)
    *   人口 += 米
    *   重复

# jquery - 谷歌地图信息窗口用户界面看起来不应该

> ID：14487150
> 
> 赞同：2
> 
> 时间：2013-01-23T18:51:03.503
> 
> 标签：jquery, html, google-maps, google-maps-api-3, google-maps-markers

> **可能重复：**
> [谷歌地图信息窗口未正确显示](https://stackoverflow.com/questions/9663375/google-map-infowindow-not-showing-properly)

当我正在从事一个安全项目时，我不确定如何为此提供工作代码示例。

这是我面临的问题的屏幕截图![谷歌地图信息窗口看起来很古怪！](../Images/4d86b0a9a6b86559c8b53a0f4e18397b.png)

我还可以为您提供我用来生成地图的代码。

在标题中：
`<script src="http://maps.google.com/maps/api/js?sensor=false"></script>`

在身体里：

```
 <script type="text/javascript">
              var addressID = '<?php echo $this->session->userdata("addy_var_se");?>, <?php echo $this->session->userdata('city_var_se');?>, <?php echo $this->session->userdata('state_var_se');?>';
              setMapAddress( addressID );

              function setMapAddress( address ) {
                var geocoder = new google.maps.Geocoder();
                var markers = [];

                geocoder.geocode( { address : address }, function( results, status ) {
                  if( status == google.maps.GeocoderStatus.OK ) {
                    var latlng = results[0].geometry.location;
                    var options = {
                      zoom: 15,
                      center: latlng,
                      mapTypeId: google.maps.MapTypeId.ROADMAP
                    };
                    var map = new google.maps.Map( document.getElementById( 'map_canvas' ), options );
                    var marker = new google.maps.Marker({
                      map: map, position: results[0].geometry.location, title: '<?php echo $this->session->userdata('event_venue_se');?>',
                    });
                    /* Create Info Windows */         

                    var infowindow = new google.maps.InfoWindow({
                      content: " "
                    });
                    google.maps.event.addListener(marker, 'click', function() {
                      infowindow.setContent('<h3>'+this.title+'</h3>'+addressID);
                      infowindow.open(map, this);
                    });
                    markers.push(marker);
                    }

                } );
              }

              </script> 
```

发生的事情是当用户单击我放置的标记时，看起来很时髦的信息窗口会生成。我以前使用过 Gmaps，但从未见过这种情况。也许 v2 与 v3 有问题？

任何见解都会很棒！谢谢你 ：）

# python - PySerial - 全双工通信

> ID：14487151
> 
> 赞同：8
> 
> 时间：2013-01-23T18:51:04.883
> 
> 标签：python, serial-port, pyserial

是否可以使用 PySerial 实现全双工通信？具体来说，是否可以在需要时连续监控端口的输入和写入？我想应该可以使用线程（串行接口是全双工的，不是吗？）。如果不是，那么在不传输时监控串行端口的最佳方法是什么？超时？

编辑：这是我的尝试。此代码针对 TI 的 CC2540 蓝牙 LE 芯片。在发送 GATT 初始化消息时，我希望得到回复（详细说明芯片的操作参数）......虽然我什么也没得到

```
import serial
import threading
from time import sleep

serial_port = serial.Serial()

GAP_DeviceInit  = \
                "\x01\x00\xfe\x26\x08\x03\x00\x00\x00\x00\x00\x00\x00\x00\
                \x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\
                \x00\x00\x00\x00\x00\x00\x00\x00\x00\x00\x01\x00\x00\x00"

def read():
    while True:
        data = serial_port.read(9999);
        if len(data) > 0:
            print 'Got:', data

        sleep(0.5)
        print 'not blocked'

def main():
    serial_port.baudrate = 57600
    serial_port.port = '/dev/ttyACM0'
    serial_port.timeout = 0
    if serial_port.isOpen(): serial_port.close()
    serial_port.open()
    t1 = threading.Thread(target=read, args=())
    while True:
        try:
            command = raw_input('Enter a command to send to the Keyfob: \n\t')
            if (command == "1"):
                serial_port.write(message)
        except KeyboardInterrupt:
            break
    serial_port.close() 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T18:53:22.503

是的，串口硬件是全双工的。是的，您可以使用线程同时执行 Rx 和 Tx。或者，您可以使用一个单线程循环，该循环以较短的超时时间进行读取，并在读取和写入之间交替。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T08:54:47.860

您没有指定超时，因此读取会等待接收完整的字节数，然后才会显示任何内容。

# process - 无法重新启动 apache（98）地址已在使用中，即使在我终止进程后也是如此

> ID：14487153
> 
> 赞同：1
> 
> 时间：2013-01-23T18:51:08.507
> 
> 标签：process, apache, kill

我无法（重新）启动 apache，因为端口 80 已在使用中：

```
[root@out-dev log]# service httpd start
Starting httpd: httpd: Could not reliably determine the server's fully qualified domain name, using <ip> for ServerName
(98)Address already in use: make_sock: could not bind to address [::]:80
(98)Address already in use: make_sock: could not bind to address 0.0.0.0:80
no listening sockets available, shutting down
Unable to open logs
                                                           [FAILED] 
```

所以我尝试识别使用端口 80 的进程：

```
[root@out-dev log]# netstat -npl | grep ':80'
tcp 0 0 :::80 :::* LISTEN 3840/httpd 
```

这是httpd！这对我来说很奇怪，因为服务 httpd 显然没有运行：

```
[root@out-dev log]# service httpd status
httpd is stopped 
```

无论如何，我尝试杀死该进程，但只要我这样做，就会出现一个新进程，控制端口 80。并且一直`service httpd status`表明 httpd 没有运行。

```
[root@out-dev log]# kill -9 3840
[root@out-dev log]# netstat -npl | grep ':80'
tcp 0 0 :::80 :::* LISTEN 3842/httpd 
```

# java - 在linux中用java打开一个eml文件

> ID：14487154
> 
> 赞同：0
> 
> 时间：2013-01-23T18:51:08.770
> 
> 标签：java, linux, desktop, eml

我正在尝试在 linux 中使用 java 打开我创建的 .eml 文件。目前我正在使用以下命令：

```
Desktop.getDesktop().open(emlFile); 
```

我创建 eml 文件，如[本](https://stackoverflow.com/a/13136614/1754625)示例所示。这适用于我的 windows 系统，但在 linux ubuntu 12.04 中出现错误。

编辑：错误信息：

```
(process:19386): gnome-vfs-modules-WARNING **: Could not initialize inotify

java.io.IOException: Failed to show URI:file:/home/usr/workspace/programm/eml/mail.eml
at sun.awt.X11.XDesktopPeer.launch(Unknown Source)
at sun.awt.X11.XDesktopPeer.open(Unknown Source)
at java.awt.Desktop.open(Unknown Source) 
```

我很高兴得到任何帮助！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T18:58:16.303

来自文档[java.awt.Desktop.open(File)](http://docs.oracle.com/javase/6/docs/api/java/awt/Desktop.html#open%28java.io.File%29)

> 抛出 IOException - 如果指定文件没有关联的应用程序或关联的应用程序启动失败

# javascript - 在jquery的正则表达式中使用变量

> ID：14487156
> 
> 赞同：1
> 
> 时间：2013-01-23T18:51:16.477
> 
> 标签：javascript, jquery, regex

可能对于一些专家来说这将是一个非常简单的问题，但对我来说似乎很难。我想使用`variable`正则表达式的 in 模式。

```
$("#srcbtn .btnPage").live("click",function(){
     var filter = $(this).val(), count = 0;

     $(".checkpoint").each(function () {
         if ($(this).find(".chpdetails .chkpname").text().search(new RegExp(/\b filter /i)) < 0) {
               $(this).hide();
         } else {
               $(this).show();
               count++;
         }
    });
}); 
```

`if`但过滤器变量在条件下不起作用。此代码的目的是搜索以`filter`变量值开头的单词，即 A、B 等。我该怎么做？

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T18:52:18.493

用这个 ：

```
new RegExp("\\b" + filter, 'i') 
```

请参阅[RegExp 的文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)

如果您有许多检查点，您可能应该在进入循环之前构建正则表达式对象，而不是在每次迭代时构建它：

```
 var r = new RegExp("\\b" + filter, 'i');
 $(".checkpoint").each(function () {
     if ($(this).find(".chpdetails .chkpname").text().search(r) < 0) {
           $(this).hide();
     } else {
           $(this).show();
           count++;
     }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T18:57:53.807

使用构造函数允许[RegExp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

```
$("#srcbtn .btnPage").live("click",function(){
     var filter = $(this).val(), count = 0;

     $(".checkpoint").each(function () {
         if ($(this).find(".chpdetails .chkpname").text().search(new RegExp("\\b" + filter, "i")) < 0) {
               $(this).hide();
         } else {
               $(this).show();
               count++;
         }
    });
}); 
```

# java - 如何用带引号的数字替换所有不带引号的数字

> ID：14487160
> 
> 赞同：-1
> 
> 时间：2013-01-23T18:51:21.780
> 
> 标签：java, replace

我有一个以 json 形式返回数据的 Web 服务。但返回的数据实际上不是 json 格式，因为对于像 ids 这样的一些键值，它给出了没有任何引号的数字值，因为当我创建一个对象时它会抛出一个异常，所以我的要求很简单，我如何才能将引号括起来没有引号的数字。

```
{"name":"pragnani","job":"android developer","experience":"fresher","age":22,"id":10} 
```

这里的 ID 和年龄没有引号，我想用引号替换它们。不要简单地发布子字符串之类的东西，因为它不会工作，因为 Web 服务会返回大量数据。我正在使用一个单独的类从不同的网络服务中检索数据。所以请帮助我....

编辑：这是数据

```
"[{\"PracticeID\":36,\"PracticeName\":\"Dr. John Doe\",\"DBServerName\":\"DBSERVER8\"}]" 
```

这是检索数据的方法

```
@Override
protected String doInBackground(String... aurl) {
    String results="";
    try {
             HttpClient httpClient = new DefaultHttpClient();
             HttpPost post = new HttpPost(aurl[0]);
             post.setHeader("content-type", "application/json");
                 StringEntity entity = new StringEntity(dto.toString());
                 post.setEntity(entity);
                 HttpResponse resp = httpClient.execute(post);
                 String respStr = EntityUtils.toString(resp.getEntity());
                 results=respStr.trim();
                 results=results.replace("]\"", "]").replace("}", "\"}").replace("\":", "\":\"").replace("}\",","},");
                 results=results.replace("\"[", "[");
                 results=results.replace("\\\"", "\"");
                 results=results.replace("\"\"", "\"");    

                 String[] arr=results.split("\\{");
                 if(arr.length<=2)
                 {
                     results=results.substring(results.indexOf("[")+1,results.indexOf("]"));
                 }
                 else
                 {
                     results=results.replace("[", "{\"result\":[").replace("]", "]}");
                 }
    } catch (Exception e) {
        e.printStackTrace();
    }
    return results;
} 
```

如何将其转换为 json 字符串....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T18:57:17.760

JSON 允许在其结构中使用数值（即不带引号的数字）。它们可以是整数浮点数或 JavaScript 可以识别的任何其他数字类型。

允许的类型：对象、数组、数值、字符串、布尔值、null。

与普通的 JavaScript 不同，所有的 Object 键都必须被引用，这是真的！除此之外，您可以随意直接使用数字。

# ns2 - 在 NS2 中实现无线传感器路由协议

> ID：14487162
> 
> 赞同：0
> 
> 时间：2013-01-23T18:51:38.837
> 
> 标签：ns2

我正在尝试在 NS2 中实现路由协议。

我尝试了 ns2 2.29 + mannasim 但我的 Linux 的 gcc 与 gcc4.3 不同。所以我不能用 mannasim 在一个代码中修补 ns2。ns2 2.35 的 mannasim 不可用，当它可用时，我不确定它是否会与这个版本的 gcc 一起运行。

有没有人尝试过使用 gcc 4.7 成功运行 ns2+mannasim？

如果有任何其他替代 mannasim 也足以让我模拟 WSN？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-06-16T12:39:32.190

如果要模拟传感器网络的协议，则使用 Mannasim 补丁，否则无需将此补丁用于 ad-hoc 网络。

现在可以使用 ns-allinone-2.35 Mannasim 补丁。享受...！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T21:36:40.613

1.  您确定需要 nanasim 进行模拟，还是可以通过 ad-hoc 实现相同的效果？

2.  如果没有，可能最简单的方法是安装所需版本的 gcc 以及您拥有的[如何使用多个版本的 GCC](https://stackoverflow.com/questions/448457/how-to-use-multiple-versions-of-gcc)

3.  否则，您可以尝试自己将 namasim 代码移植到最新的 ns2 版本。如果您对 tcl 和 c++ 有点熟悉，这不会像听起来那么难。通常 ns2 补丁由于行号更改而失败，可以通过检查补丁文件手动应用更改。[请注意，如果您不走运并且 ns2 源文件存在显着差异，这可能会失败，但通常情况并非如此。- 备份一切以防万一]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-11T06:14:55.410

Mannasim 也可以在 ns2.34 中使用。这是将 Mannasim 修补到 NS2.34 的链接。

该链接还提供了在安装过程中处理错误的所有步骤。

但是，#include 中有一个错字。它应该是 #include 。

其他一切都很好。

[http://old.nabble.com/Re%3A-Installing-MANNASIM-patch-in-NS-2.34-p34588016.html](http://old.nabble.com/Re%3A-Installing-MANNASIM-patch-in-NS-2.34-p34588016.html)

祝你好运！:)

# visual-studio-2010 - 在 Visual Studio 中自动嵌套文件

> ID：14487171
> 
> 赞同：1
> 
> 时间：2013-01-23T18:52:08.007
> 
> 标签：visual-studio-2010, visual-studio

我目前在我的一个项目中有几个批处理脚本，它们在预构建事件中运行，`.cs`通过调用`svcutil.exe`和生成一些新文件`xsd.exe`。我想让这些文件自动嵌套在解决方案资源管理器中的基本文件下。如果需要，我可以手动处理需要包含它们，如果它们会在它们之后自动嵌套。

是否有任何批处理脚本、工具或命名约定可以让 Visual Studio 自动嵌套它们？

# iphone - 实时游戏中心游戏断开连接（可能是因为网络超时）

> ID：14487176
> 
> 赞同：2
> 
> 时间：2013-01-23T18:52:19.227
> 
> 标签：iphone, ios, objective-c, game-center, gamekit

所以，我正在编写一个非常简单的实时游戏中心 2 人游戏；但是，问题是我不断断开连接。

游戏的工作原理如下：每个玩家的设备上都有一个文本字段。他们每个人都在字段中输入文本并按回车键。当两个人都输入了文字后，游戏就进行了。

**现在，当用户积极玩游戏时（每 10 秒左右输入一次文本），游戏运行良好，用户从未断开连接。但是，当游戏保持非活动状态（用户只是坐着盯着应用程序屏幕）大约 30 秒或更长时间时，至少有一名玩家会断开连接。**

我非常有信心我的互联网很稳定，并且两个设备似乎都连接到了互联网（通过 wifi）。

我知道这是一个非常模糊的问题，我只是想知道是否有人对上述粗体症状有任何想法。

编辑：

这是我初始化匹配请求和匹配的方式。但是，我在初始化或开始比赛时没有问题。唯一的问题是当玩家闲置一段时间

```
//toInvite may be nil
- (void) createMatchWithPlayersToInvite: (NSArray *) toInvite
{
    GKMatchRequest *request = [[GKMatchRequest alloc] init];
    request.minPlayers = 2;
    request.maxPlayers = 2;
    request.playersToInvite = toInvite;
    GKMatchmakerViewController *mmvc = [[GKMatchmakerViewController alloc] initWithMatchRequest:request];
    self.myMatchmakerVC = mmvc;
    mmvc.hosted = NO;
    mmvc.matchmakerDelegate = self;
    [self presentViewController:mmvc animated:YES completion:nil];
}

- (void)matchmakerViewController:(GKMatchmakerViewController *)viewController didFindMatch:(GKMatch *)match
{
    [self dismissViewControllerAnimated:YES completion:nil];
    self.myMatch = match;
    AppDelegate *appDelegate = (AppDelegate *)[[UIApplication sharedApplication] delegate];
    appDelegate.currentMatch = self.myMatch;
    if (!self.matchStarted && match.expectedPlayerCount == 0)
    {
        self.matchStarted = YES;
        [self performSegueWithIdentifier:@"gameSegue" sender:self];
    }
} 
```

编辑2：

**因此，我发现如果我设置一个计时器并每隔 1 秒通过网络发送消息（使用 [self.myMatch sendDataToAllPlayers:data withDataMode:GKMatchSendDataReliable error:&error]），程序就可以正常工作。有谁知道这是为什么，或者我如何在不诉诸黑客攻击的情况下解决我的问题`NSTimer`？** 其他注意事项：

1）我`AppDelegate`的没有改变

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:09:45.453

看起来您在这里有一个明确的假设，即 Game Center 连接在 30 秒空闲时间后关闭。如果是这种情况，我不会感到惊讶。其他游戏几乎可以肯定会在这样的间隔内发送数据，并且您可能会触发超时条件。为了检验这个假设并同时解决问题，我会每隔五到十秒发送一个简短的盲文。

# nginx - 主机文件 - 空路由 - 本地服务器

> ID：14487178
> 
> 赞同：1
> 
> 时间：2013-01-23T18:52:27.597
> 
> 标签：nginx, local, routes, unicorn, hosts

我正在使用 mvps.org 主机文件来阻止本地不需要的连接。问题是我在 80 上运行 nginx 监听，所有被阻止的站点都通过 nginx 路由到我的独角兽网络服务器，这极大地减慢了我的网络浏览速度。Unicorn 正在尝试处理所有这些对未知资源的请求。

我可以使用 hosts 文件将这些请求路由到 127.0.0.1 以外的某个空路径吗？

成功：将被阻止的地址路由到不会尝试响应的地方——从而提高页面加载速度。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-26T19:34:46.860

您可以路由到子网中任何不存在的 IP 地址。这也应该可以解决问题。

或者，在 nginx 中，为 * 设置一个默认站点，该站点会断开连接（返回 444），并确保您拥有真实站点的 server_name。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T20:21:13.147

使用 NGinx 阻止滥用客户端非常容易。理想情况下，您希望对请求进行缓送（即，长时间保持连接打开以减慢滥用客户端的速度），但 NGinx 似乎没有这样做。你想要的是[拒绝](http://wiki.nginx.org/HttpAccessModule#deny)配置选项。如果你想在全局范围内这样做，你可以在 http 块中添加拒绝。像这样的东西：

```
http {
  ...
  deny 1.2.3.4;
  deny 5.6.7.8;
  ...
} 
```

如果您有很多地址要阻止，这可能会有点麻烦。一种选择是在单独的文件中构建列表，然后将其包含在您的主配置文件中。所以，你可能有 /etc/nginx/blocks.conf 看起来像这样：

```
deny 1.2.3.4;
deny 5.6.7.8;
... 
```

这可以使用脚本轻松生成。然后，您可以像这样将其包含到您的主 conf 中：

```
http {
  ...
  include blocks.conf;
  ...
} 
```

这样，请求就不会通过你的独角兽。

# c# - 从不同的进程中选择单选按钮选项

> ID：14487179
> 
> 赞同：0
> 
> 时间：2013-01-23T18:52:33.463
> 
> 标签：c#, vb.net, winforms, pinvoke

我试图点击其他进程的单选按钮：

![在此处输入图像描述](../Images/19ee7dc95ed0356ae41f752b5336f184.png)

这是我的代码：

```
 Dim hh As IntPtr = Process.GetProcessesByName("MyProcess")(0).MainWindowHandle
    Dim TheSelectionBox As IntPtr = FindWindowEx(hh, 0, "Options:", "Button")
    ClickOnOption(TheSelectionBox, 2) 
```

我有“选项”框手柄，
现在我想`radio button`在“选项”框中单击。如何单击单选按钮？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:34:31.700

这两个单选按钮实际上是`BUTTON`控件。它们是包含组窗口的子级。所以你需要枚举那些孩子，通过调用[`EnumChildWindows`](http://msdn.microsoft.com/en-gb/library/windows/desktop/ms633494.aspx)找到合适的按钮。然后您可以将该按钮[`BM_CLICK`](http://msdn.microsoft.com/en-gb/library/windows/desktop/bb775985.aspx)发送到模拟按下它的消息。

顺便说一句，`FindWindowEx(hh, 0, "Options:", "Button")`找不到你的窗口。你要求它匹配一个带有类名`Options:`和标题的窗口`Button`。我相信调用`FindWindowEx`将返回零。就我个人而言，我会调用`EnumChildWindows`顶层窗口并在您找到带有 title 的窗口时停止`"Option 2"`。因此完全避免使用`FindWindowEx`。

# c - malloc(0) 真的有效吗？

> ID：14487183
> 
> 赞同：-1
> 
> 时间：2013-01-23T18:52:45.967
> 
> 标签：c, memory, malloc, allocation

> **可能重复：**
> [malloc(0) 有什么意义？](https://stackoverflow.com/questions/2022335/whats-the-point-in-malloc0)

为什么 malloc(0) 实际上会返回一个有效的写入指针？

```
char *str = NULL;

str = (char*)malloc(0); // allocate 0 bytes ?

printf("Pointer of str: %p\n", str);

strcpy(str, "A very long string ...................");

printf("Value of str: %s", str);

free(str); // Causes crash if str is too long 
```

输出：

```
Pointer of str: 0xa9d010
Aborted
Value of str: A very long string ................... 
```

什么时候`str`更短，那么它就可以正常工作。

顺便说一句：为了编译，我使用带有“-D_FORTIY_SOURCE=0 -fno-stack-protector”的 GCC

```
*** glibc detected *** ..: free(): invalid next size (fast): 0x0000000000a9d010 *** 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T18:53:54.773

取消引用由 .返回的指针是未定义的行为`malloc(0)`。

来自 C 标准：

> (C99, 7.20.3p1) “如果请求的空间大小为零，则行为由实现定义：要么返回空指针，要么行为就像大小是某个非零值一样，除了返回的指针应不能用于访问对象。”

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T18:56:32.417

> 为什么`malloc(0)`实际上返回一个有效的写入指针？

它没有返回有效的写入指针。它返回一个*不使用*它的有效指针。或者它也可能返回`NULL`，因为 C 标准指定这种情况是实现定义的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T18:56:23.167

malloc() 应该返回一个 void* 指针。它忠实地做到了这一点。但是当你取消引用它时会导致 UB。

# r - 在 y 轴上增加文本和标题之间的距离

> ID：14487188
> 
> 赞同：126
> 
> 时间：2013-01-23T18:52:56.097
> 
> 标签：r, layout, plot, ggplot2

y 轴标题与轴文本过于接近。

```
ggplot(mpg, aes(cty, hwy)) + geom_point() 
```

![ggplot 输出](../Images/c17da757fca0ffb7284e345d30b65aff.png)

我尝试过更改许多参数的值，`theme()`但似乎没有任何帮助。

* * *

## 回答 #1

> 赞同：203
> 
> 时间：2013-01-23T18:57:16.787

从`ggplot2 2.0.0`您可以使用`margin =`参数`element_text()`来更改轴标题和数字之间的距离。设置元素的`margin`on `t`op、`r`ight、`b`ottom 和 eft`l`侧的值。

```
ggplot(mpg, aes(cty, hwy)) + geom_point()+
  theme(axis.title.y = element_text(margin = margin(t = 0, r = 20, b = 0, l = 0))) 
```

* * *

`margin`也可用于其他`element_text`元素（请参阅`?theme`），例如`axis.text.x`、`axis.text.y`和`title`.

**添加**

为了在轴具有不同位置时设置轴标题的边距（例如，使用`scale_x_...(position = "top")`，您将需要不同的主题设置 - 例如`axis.title.x.top`。请参阅[https://github.com/tidyverse/ggplot2/issues/4343](https://github.com/tidyverse/ggplot2/issues/4343)。

* * *

## 回答 #2

> 赞同：123
> 
> 时间：2014-11-07T09:42:26.507

基于此论坛帖子：[https ://groups.google.com/forum/#!topic/ggplot2/mK9DR3dKIBU](https://groups.google.com/forum/#!topic/ggplot2/mK9DR3dKIBU)

听起来最简单的方法是在 x 轴之前和 y 轴标签之后添加换行符 (\n)。似乎比上面发布的解决方案容易得多（尽管更笨）。

```
ggplot(mpg, aes(cty, hwy)) + 
    geom_point() + 
    xlab("\nYour_x_Label") + ylab("Your_y_Label\n") 
```

希望有帮助！

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-02-28T10:54:31.590

出于某种原因，Didzis Elferts 建议的保证金论点对我不起作用。因此，我使用了一种不同的技巧，它比添加空行更灵活，但需要放弃轴刻度。

```
myplot + theme(axis.ticks.x = element_blank(), axis.ticks.length.x = unit(3.25, "cm") 
```

我想，可以手动添加刻度线`geom_segment`。另一种可能性可能是 `[ggalt::annotation_ticks][1]`，但我也没有费心尝试（注意当前版本的 CRAN（0.4）上的 ggalt 不支持此功能，github（0.6）上的那个）。

# android - Android 布局边距 ScrollView

> ID：14487191
> 
> 赞同：1
> 
> 时间：2013-01-23T18:53:06.113
> 
> 标签：android, layout, scrollview

我有这个滚动视图，里面有Linearlayout，里面还有一个linearlayout。我想以表格形式显示数据。我有一个列表视图，在其中我使用 record.xml 作为列表视图中的单行通过代码推送数据。

我希望在其中显示边距。但他们不工作。它们在 eclipse 中准确显示，但在部署时没有在模拟器 android 2.3 中显示。

帮助。在此先感谢...等待回复...
**record.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<TableRow xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:minHeight="50dp" android:gravity="center_vertical" android:background="#D1EFCD">

    <TextView
        android:id="@+id/serial_no"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="null"
        android:width="100dp"
        android:textAppearance="?android:attr/textAppearanceMedium" android:background="#9EC39A"/>

    <TextView
        android:id="@+id/item_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="null"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:width="100dp" android:background="#9EC39A" android:layout_marginLeft="1dp"/>

    <TextView
        android:id="@+id/wt"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="null"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:width="100dp" android:background="#9EC39A" android:layout_marginLeft="1dp"/>

    <TextView
        android:id="@+id/dte"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="null"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:width="100dp" android:background="#9EC39A" android:layout_marginLeft="1dp"/>

    <TextView
        android:id="@+id/amt"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="null"
        android:width="100dp" android:background="#9EC39A" android:layout_marginLeft="1dp"/>

    <TextView
        android:id="@+id/cust_name"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="null"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:width="100dp" android:background="#9EC39A" android:layout_marginLeft="1dp"/>

    <TextView
        android:id="@+id/rate"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="null"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:width="100dp" android:background="#9EC39A" android:layout_marginLeft="1dp"/>

</TableRow> 
```

**滚动数据.xml：**

```
<?xml version="1.0" encoding="utf-8"?>
<HorizontalScrollView xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:scrollbars="horizontal|vertical"
android:background="#D1EFCD" >
<LinearLayout
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <LinearLayout
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:orientation="horizontal" android:layout_margin="1dp">

    <TextView
        android:id="@+id/Sr.No."
        android:layout_width="wrap_content"
        android:layout_height="match_parent"
        android:text="Sr.No."
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold"
        android:width="100dp" android:layout_marginTop="2dp" android:layout_marginLeft="2dp" android:background="#9EC39A" android:gravity="center"/>

    <TextView
        android:id="@+id/Item"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:text="Item"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold"
        android:width="100dp" android:layout_marginTop="2dp" android:layout_marginLeft="1dp" android:background="#9EC39A" android:gravity="center"/>

    <TextView
        android:id="@+id/Weight"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:text="Weight"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold"
        android:width="100dp" android:layout_marginTop="2dp" android:layout_marginLeft="1dp" android:background="#9EC39A" android:gravity="center"/>

    <TextView
        android:id="@+id/Date"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:text="Date"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold"
        android:width="100dp" android:layout_marginTop="2dp" android:layout_marginLeft="1dp" android:background="#9EC39A" android:gravity="center"/>

    <TextView
        android:id="@+id/Amount"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:text="Amount"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold"
        android:width="100dp" android:layout_marginTop="2dp" android:layout_marginLeft="1dp" android:background="#9EC39A" android:gravity="center"/>

    <TextView
        android:id="@+id/CustomerName"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:text="Customer Name"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold"
        android:width="100dp" android:layout_marginTop="2dp" android:layout_marginLeft="1dp" android:background="#9EC39A" android:gravity="center"/>

    <TextView
        android:id="@+id/RateofInterest"
        android:layout_width="wrap_content"
        android:layout_height="fill_parent"
        android:text="Rate of Interest"
        android:textAppearance="?android:attr/textAppearanceMedium"
        android:textStyle="bold"
        android:width="100dp" android:layout_marginTop="2dp" android:layout_marginLeft="1dp" android:layout_marginRight="2dp" android:background="#9EC39A" android:gravity="center"/>

    </LinearLayout>
    <ListView
        android:id="@+id/DataRows"
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:orientation="vertical"
        android:divider="#D1EFCD"
        android:dividerHeight="1dp" android:layout_marginBottom="2dp" android:layout_marginLeft="2dp" android:layout_marginRight="2dp" android:layout_marginTop="1dp" android:layout_gravity="center">
    </ListView>

</LinearLayout>

</HorizontalScrollView> 
```

**模拟器截图** ![在此处输入图像描述](../Images/9b226a44bd3824c442bd217dd5e6c246.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-19T01:54:23.270

如果您想将数据行文本居中`TextViews`，就像标题一样，只需在您的 android:gravity="center" 中添加`TextViews`，如下所示：

```
<?xml version="1.0" encoding="utf-8"?> 
```

```
<TextView
    android:id="@+id/serial_no"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:background="#9EC39A"
    android:gravity="center"
    android:text="123"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:width="100dp" />

<TextView
    android:id="@+id/item_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="1dp"
    android:background="#9EC39A"
    android:gravity="center"
    android:text="asf"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:width="100dp" />

<TextView
    android:id="@+id/wt"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="1dp"
    android:background="#9EC39A"
    android:gravity="center"
    android:text="sadasd"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:width="100dp" />

<TextView
    android:id="@+id/dte"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="1dp"
    android:background="#9EC39A"
    android:gravity="center"
    android:text="23"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:width="100dp" />

<TextView
    android:id="@+id/amt"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="1dp"
    android:background="#9EC39A"
    android:gravity="center"
    android:text="null"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:width="100dp" />

<TextView
    android:id="@+id/cust_name"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="1dp"
    android:background="#9EC39A"
    android:gravity="center"
    android:text="null"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:width="100dp" />

<TextView
    android:id="@+id/rate"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_marginLeft="1dp"
    android:background="#9EC39A"
    android:gravity="center"
    android:text="null"
    android:textAppearance="?android:attr/textAppearanceMedium"
    android:width="100dp" /> 
```

这将使您的数据与您的标题保持一致。

# delphi - INDY 10 升级后的 DELPHI 编译器路径设置

> ID：14487195
> 
> 赞同：0
> 
> 时间：2013-01-23T18:53:15.227
> 
> 标签：delphi, indy

我已经问过如何升级到最新的 Indy TCP TP 组件版本（[GET INDY COMPONENTS](https://stackoverflow.com/questions/14424582/update-to-latest-indy-tcp-library-versionhttp://) ）并现在使用 DELPHI XE 2 安装 Indy 10。对于所有 Indy 项目，我在 DELPHI XE2 的项目选项部分定义了一个外文件夹，后来我在这里找到了所有***.bpl 文件****和所有*****我现在需要-DCU#s 文件**，以便使用新的 INDY 组件编译我的应用程序，以将此输出文件夹添加为这些项目中的库搜索路径。**

 **我在我的 XE2 安装中发现了一个带有 *.dcu 文件的路径/文件夹，用于 x32、x64、发布和调试模式 (C:\Program Files (x86)\Embarcadero\RAD Studio\9.0\lib\win64\release)。

我现在是否需要我在编译的这些不同风格中创建的所有 INDY *.dcu，如何设置所有项目的路径以使用我文件夹中的新 *.dcu？

我应该将我所有的 dcu 复制到这么多子文件夹吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T00:15:11.560

您不应将预安装的 Indy 文件替换为更新后的编译文件（以防您将来需要原始文件，例如用于 DataSnap 项目）。将较新的 Indy 安装到其自己的单独文件夹中，然后更新项目搜索路径以引用预安装文件夹的该安装的输出文件夹。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:05:18.343

您不应覆盖作为 Delphi 安装一部分的 .dcu 文件。此外，我不建议您对用于构建这些 .bpl 文件的 .dcu 文件执行任何操作。

您应该做的是在您的项目中包含 Indy 源文件、.pas 文件。就我个人而言，我更喜欢避免使用搜索路径来实现这一点，而是简单地将所有必要的 .pas 文件添加到项目中。但您可能更喜欢使用搜索路径选项。

但要点是，由于该项目是以源代码形式提供的，因此最好自己编译源代码，作为项目的一部分。这使您在调试时更容易单步执行 Indy 代码。发布和调试不需要单独的 DCU 文件。它使构建过程更简单，只需构建一件事。如果您的源代码针对多个 Delphi 编译器版本，它会变得更容易。**

# javascript - 'sibling' 和 'not' 选择器有问题

> ID：14487202
> 
> 赞同：0
> 
> 时间：2013-01-23T18:53:36.187
> 
> 标签：javascript, jquery, jquery-selectors

我的页面看起来像这样

```
<h4></h4>
<table></table>  < want this
...              < want all these tables
<table></table>  < want this
<h4></h4>
<table></table>  < not this
...              < not these
<table></table>  < not this 
```

我正在尝试`<h4>`使用此 jQuery 选择器仅选择第一个元素下的表

```
$("h4:eq(0) ~ table.someClass:not(h4:eq(1) ~ table.somaClass)") 
```

它不起作用 - 返回所有表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:02:42.157

使用`div`更简单的测试用例：

```
$('h4:first').nextUntil('h4').filter('div').css('background', 'green'); 
```

[http://jsbin.com/ipuvix/3/](http://jsbin.com/ipuvix/3/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:00:17.493

jQuery[兄弟姐妹选择器](http://api.jquery.com/siblings/)选择所有兄弟姐妹

```
$('h4:first').siblings('table'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:02:34.543

你可以使用 jQuery`Next()`

```
$("h4").next("table") 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T18:56:44.810

选择器只是：

```
$('h4:first ~ table').not('h4:nth_child(2) ~ table') 
```

# sql - 重写 SQL 代码 SELECT 块以简化逻辑

> ID：14487205
> 
> 赞同：0
> 
> 时间：2013-01-23T18:53:47.443
> 
> 标签：sql, sql-server-2008, query-performance

如果可以的话，我正在尝试用更简单的逻辑重写这个块。我在一个更大的`SELECT`语句中使用它，我认为如果我可以简化这个块，我可能能够提高我的查询性能。

`proj_catg_type_id`,`proj_catg_id`并且`proj_id`都是他们表中的 PK。

```
select  t1.proj_catg_name
from    table1 t1, table2 t2, table3 t3
where   t2.proj_catg_type_id = t1.proj_catg_type_id
and     t2.proj_catg_type_id = 213
and     t3.proj_id = t2.proj_id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:00:50.467

```
select t1.proj_catg_name
from    table1 t1 inner join table2 t2     
on   t2.proj_catg_type_id=t1.proj_catg_type_id
where t2.proj_catg_type_id=213
and t3.proj_id=t2.proj_i 
```

也许？t3 在这个子选择之外使用吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:34:27.037

在不了解参照完整性规则和表格背后的逻辑的情况下，很难给出 100% 正确的答案。但只要看看这个陈述，最简化的逻辑就是

```
select t1.proj_catg_name
from    table1 t1
where   t1.proj_catg_type_id = 213; 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-23T20:04:38.333

如果 t3 是您显示的选择之外的表，那么这是一个相关的子查询，您根本不应该使用它！这会将您的查询变成逐行痛苦的行游标。

使用派生表或连接来获取结果。

您没有给我足够的代码来为您的问题编写特定的解决方案，但让我举个例子：

```
SELECT 
      field1
    , field2
    , (SELECT t3.field3 
        FROM table2 t2 
        JOIN table3 t3 ON t2.id = t3.id
        WHERE t4.somefield = t2.somefield)
FROM table1 t1
JOIn table4 t4 ON t1.id = t4.id

SELECT 
      field1
    , field2
    , t3.field3 
FROM table1 t1
JOIn table4 t4 
    ON t1.id = t4.id
join (SELECT field3 
        FROM table2 t2 
        JOIN table3 t3 ON t2.id = t3.id) a
    ON  t4.somefield = t2.somefield 
```

第一个查询一次运行一行，非常慢。第二个应该给出相同的结果，但以更快的基于集合的方式运行。确保派生表具有别名很重要。您也可以使用 CTE。

# javascript - knockoutjs 表格内联模板的麻烦

> ID：14487209
> 
> 赞同：0
> 
> 时间：2013-01-23T18:54:03.607
> 
> 标签：javascript, html, mvvm, twitter-bootstrap, knockout.js

我精简了我的实际代码，但我无法完成这项工作。我正在使用带有内联剔除模板的 knockoutjs 和 bootstrap。我以前只是将一堆输入放在一个 div 中，但出于对齐原因，我将其更改为表格。我知道属性名称是正确的，并且 javascript 控制台根本没有显示任何错误变量或绑定问题。我将 foreach 放在 TR 标记而不是 TBODY 标记中，因为我不知道每次我会有多少个复选框，而且我不希望它们完全成行，只有一个 TR 元素和一堆 TD 单元格现在只有一个 TR 标签。我怎样才能使这项工作？

```
<div id="Counties" class="well well-large checkbox inline">  
    <table class="table table-condensed">
                <tbody>
                    <tr data-bind="foreach: { data: counties
                                            }">
                        <td><input type="checkbox" data-bind="attr: { value: $data.sid }" />$data.name
                        </td>
                    </tr>
                </tbody>
            </table>
</div> 
```

这是我的视图模型：

```
function searchVm() {
    var self = this;
    self.counties = ko.observableArray([]); //array of jurisItem
}

function jurisItem(name, sid) {
    var self = this;
    self.name = name;
    self.sid = sid;
} 
```

编辑 ：

我也根据 knockoutjs 文档尝试了这个，但它不起作用。我知道我可以使用 jquery 以其他方式做到这一点，但我更喜欢淘汰模板语法......

```
<table class="table table-condensed">
            <tbody>
                <tr>
                    <!-- ko foreach: $root.counties -->
                    <td>
                        <input type="checkbox" data-bind="attr: { value: $data.sid }" />$data.name
                    </td>
                    <!-- /ko -->
                </tr>
            </tbody>
        </table> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:16:42.163

我不确定你想做什么。我做了一些样品。

html:

```
<div id="Counties" class="well well-large checkbox inline">  
    <table class="table table-condensed">
        <tbody>
            <tr data-bind="foreach: counties">
                <td>
                <input type="checkbox" data-bind="attr: { value: sid }" />
                <span data-bind="text: name" />
                </td>
            </tr>
        </tbody>
    </table>
</div> 
```

javascript:

```
$(function () { 
    var SearchVm = function () {
        var self = this;
        self.counties = ko.observableArray([]);
    };

    var JurisItem = function (name, sid) {
        var self = this;
        self.name = name;
        self.sid = sid;
    }

    var item1 = new JurisItem("TestName1", "TestSid1");
    var item2 = new JurisItem("TestName2", "TestSid2");

    var searchViewModel = new SearchVm();
    searchViewModel.counties.push(item1);
    searchViewModel.counties.push(item2);
    ko.applyBindings(searchViewModel);

}) 
```

这对你有用吗：

[http://jsfiddle.net/PVMjy/41/](http://jsfiddle.net/PVMjy/41/)

# objective-c - 更改 UIMapView 中心位置仅适用于第二次

> ID：14487212
> 
> 赞同：0
> 
> 时间：2013-01-23T18:54:17.770
> 
> 标签：objective-c, mapkit

我有一个非常简单的设置 - 一个 tableView 显示我的许多 busStops 模型（busStop 有一个坐标），当我单击一个单元格时，它会推送一个新的 VC，显示 busStop 在 MapView 上的位置（它将地图的中心设置为BusStop 坐标）。

出于某种原因 - 我第一次按下任何单元格时，地图未居中（当我按下“返回”按钮并再次尝试时，它会起作用）。

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    [mainMapView addAnnotation:selectedBusStop];
    [self updateMapCenter:selectedBusStop.coordinate];

} 
```

当我尝试调用 updateMapCenter 方法时，我怀疑地图尚未加载。这是真的吗？我该怎么办？我尝试从 viewDidAppear 添加另一个调用，它部分解决了它 - 但这感觉有点矫枉过正。有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T16:04:20.597

我发现 iOS 6 改变了加载地图的时间。我曾经在 中设置中心坐标`viewDidLoad`，但有时不起作用。我把它移到了`viewWillAppear:`，它按预期工作。您可能不得不考虑向后（而不是向前）移动到地图视图，因为`viewWillAppear:`会再次被调用。

可能有更好的方法（调用`view`地图视图？）但我没有进一步研究。

# sql - SQL Left Join 中的 AND 导致 Access 2010 中的运行时错误

> ID：14487216
> 
> 赞同：1
> 
> 时间：2013-01-23T18:54:29.367
> 
> 标签：sql, join, ms-access-2010

我很感激你能给我的任何帮助。我正在尝试使用 SQL 查询作为表单的记录源。

```
strSQL = "SELECT " & DocID & " AS DocID,'" & DocumentType & "' AS DocumentType,"   & "B.Description AS [Decision Point], B.QCDecisionPointID,C.QCNote FROM ((QC.QCAttributeDecisionPointAsc A INNER JOIN QC.QCDecisionPoint B ON A.QCDecisionPointID = B.QCDecisionPointID) LEFT OUTER JOIN QC.QCResultDecisionPoint C ON C.QCDecisionPointID=B.QCDecisionPointID AND C.QCAssignmentID=" & AssignmentID & " ) WHERE QCAttributeID= " & AttributeID & ";" 
```

但我收到如下运行时错误：如果我删除了 sql 字符串中的括号，那么：“查询表达式中的语法错误（缺少运算符）”

如果我在查询中有括号，那么我会在 Access 中收到此错误：“不支持连接表达式”

我认为这是 LEFT JOIN 中的 AND。我需要这样的查询才能获得正确的结果，请告诉我如何使用子查询来做到这一点。我调试时看到的sql字符串如下：

```
SELECT 7674754 AS DocID,'All Supporting Documents' AS DocumentType,
B.Description AS [Decision Point], B.QCDecisionPointID,C.QCNote 
FROM QC.QCAttributeDecisionPointAsc A 
INNER JOIN QC.QCDecisionPoint B ON A.QCDecisionPointID = B.QCDecisionPointID 
LEFT OUTER JOIN QC.QCResultDecisionPoint C ON C.QCDecisionPointID=B.QCDecisionPointID 
AND C.QCAssignmentID=53 WHERE A.QCAttributeID= 3; 
```

谢谢你能给我的任何帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:00:24.717

尝试`AND C.QCAssignmentID=53`进入 WHERE 子句：

```
SELECT 7674754 AS DocID,'All Supporting Documents' AS DocumentType,
B.Description AS [Decision Point], B.QCDecisionPointID,C.QCNote 
FROM QC.QCAttributeDecisionPointAsc A 
INNER JOIN QC.QCDecisionPoint B ON A.QCDecisionPointID = B.QCDecisionPointID 
LEFT OUTER JOIN QC.QCResultDecisionPoint C ON C.QCDecisionPointID=B.QCDecisionPointID 
WHERE A.QCAttributeID= 3 AND (C.QCAssignmentID=53 OR C.QCAssignmentID IS NULL) 
```

因为它是一个 LEFT JOIN，你需要指定你想要一个来自 C 的特定值或什么都没有（这就是为什么`OR C.QCAssignmentID IS NULL`存在）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T20:17:51.510

这是正确的，您不能在显示的连接中使用 AND。您会在 Where 语句中使用 And 获得所需的答案吗？另请注意，当存在多个联接时，Access 需要括号括起来。

```
SELECT  7674754                    AS DocID
      , 'All Supporting Documents' AS DocumentType
      , B.Description              AS [Decision Point]
      , B.QCDecisionPointID
      , C.QCNote
FROM  (  [QC.QCAttributeDecisionPointAsc] A
        INNER JOIN [QC.QCDecisionPoint] B
        ON      A.QCDecisionPointID = B.QCDecisionPointID )
        LEFT JOIN (SELECT * FROM [QC.QCResultDecisionPoint] 
                   WHERE QCAssignmentID    = 53) As C
ON      C.QCDecisionPointID = B.QCDecisionPointID
WHERE   A.QCAttributeID             = 3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:26:47.677

请按照 HansUp 的建议将表格名称放在方括号中，并删除条件部分中的圆括号。尝试这个：

```
SELECT  7674754                    AS DocID
      , 'All Supporting Documents' AS DocumentType
      , B.Description              AS [Decision Point]
      , B.QCDecisionPointID
      , C.QCNote
FROM    [QC.QCAttributeDecisionPointAsc] A
        INNER JOIN [QC.QCDecisionPoint] B
        ON      A.QCDecisionPointID = B.QCDecisionPointID
        LEFT JOIN [QC.QCResultDecisionPoint] C
        ON      C.QCDecisionPointID = B.QCDecisionPointID
        AND     C.QCAssignmentID    = 53
WHERE   A.QCAttributeID             = 3; 
```

# c# - 反序列化列表错误

> ID：14487224
> 
> 赞同：4
> 
> 时间：2013-01-23T18:54:46.827
> 
> 标签：c#, xml, exception-handling, xml-serialization, deserialization

我有一个 XML，内容是

```
<Contracts>
    <Contract EntryType="U" ID="401" GroupCode="1">
    </Contract>
</Contracts> 
```

我有一个带有合同清单的课程

```
[XmlArray("Contracts")]
[XmlArrayItem("Contract", typeof(Contract))]
public List<Contract> Contracts { get; set; } 
```

所以当我尝试反序列化时，我收到了这个错误：

> “反映属性‘合同’时出现错误。”

反序列化代码：

```
XmlSerializer reader = new XmlSerializer(typeof(ContractPosting));
xml.Position = 0;
eContractXML = (Contract)reader.Deserialize(xml); 
```

以下是课程：

```
public partial class ContractPosting
{
    [XmlArray("Contracts")]
    [XmlArrayItem("Contract", typeof(Contract))]
    public List<Contract> Contracts { get; set; }
}

public class Contract
{
    [XmlAttribute(AttributeName = "ContractID")]
    public System.Nullable<int> ContractID { get; set; }

    [XmlAttribute(AttributeName= "PostingID")]
    public string PostingID { get; set; }

    public EntryTypeOptions? EntryType { get; set; }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:27:15.873

可空类型不能序列化为属性。

您必须将`Contract`类更改为不`Nullable`用于 XML 属性，或者更改 XML 以将这些属性写入 XML 元素。

尝试这个：

```
public class Contract { 
  [XmlAttribute(AttributeName = "ContractID")] 
  public int ContractID { get; set; } 

  [XmlAttribute(AttributeName= "PostingID")] 
  public string PostingID { get; set; } 

  public System.Nullable<EntryTypeOptions> EntryType { get; set; } 
} 
```

或者：

```
public class Contract { 
  public int? ContractID { get; set; } 

  [XmlAttribute(AttributeName= "PostingID")] 
  public string PostingID { get; set; } 

  public System.Nullable<EntryTypeOptions> EntryType { get; set; } 
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T13:34:37.607

谢谢，问题是 Nullable 类型，我以这种方式解决了

```
[XmlIgnore]
public System.Nullable<int> ContractID { get; set; }

[XmlAttribute("ContractID")]
public int ContractIDxml {
get { return ContractID ?? 00; }
set { ContractID = value; }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:07:01.620

由于根节点是`<Contracts>`，请尝试将您的类重新安排为：

```
[XmlRoot("Contracts")]
public class ContractPosting {
    [XmlElement("Contract", typeof(Contract))]
    public List<Contract> Contracts { get; set; }
} 
```

当您使用`XmlArray`and`XmlArrayItem`时，它们都必须嵌套在某些东西中。但是你当前的`XmlArray`标签实际上是文件的根节点`XML`，所以它需要是一个`XmlRoot`.

演示：http: [//ideone.com/jBSwGx](http://ideone.com/jBSwGx)

# android - 来自非 ui 线程的 Asynctask

> ID：14487226
> 
> 赞同：4
> 
> 时间：2013-01-23T18:55:07.263
> 
> 标签：android

我们是否必须从 UI 线程启动和执行 asyctask。如果我使用 asynctask 从非 ui 线程进行 Web 服务访问（长时间运行）是否正确。对不起，如果我的查询是错误的。

在我的应用程序中，我必须运行大约 10 个 Web 服务，并且必须在 ui 上显示结果。我很困惑哪种方法是好的异步任务、意图服务或为每个 Web 服务调用创建线程并使其并行运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:00:09.513

**为了使 AsyncTask 正常工作，必须遵循一些线程规则：**

1.  AsyncTask 类必须在 UI 线程上加载。这是从 JELLY_BEAN 自动完成的。

2.  任务实例必须在 UI 线程上创建。

3.  **必须在 UI 线程上调用 execute(Params...)。**

4.  不要手动调用 onPreExecute()、onPostExecute(Result)、doInBackground(Params...)、onProgressUpdate(Progress...)。

5.  该任务只能执行一次（如果尝试第二次执行将引发异常。）

    [**更多详细信息**](http://developer.android.com/reference/android/os/AsyncTask.html)

在我个人看来，我建议使用 AsyncTask，因为它针对运行后台任务和利用多核处理器等优势进行了高度优化。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T18:58:49.580

是的，asynctask 需要从 UI 线程运行。

我建议使用多个线程/runnables。您还需要在主活动类中实现一个处理程序来收听来自线程的响应。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:01:09.880

您可以使用线程或异步任务。AsyncTask 为您提供在启动后台任务之前和完成后台任务或获取其进度之后管理 Ui 更改方法的方法。

这取决于您的架构要求。

# javascript - 尽管清除缓存、删除/重新安装、新的 MAMP 主机设置等，Chrome 仍会加载缓存的 Javascript

> ID：14487227
> 
> 赞同：1
> 
> 时间：2013-01-23T18:55:20.967
> 
> 标签：javascript, google-chrome, caching, developer-tools

我已经尝试了许多项目来清除我在 Mac 上使用 MAMP 开发的 Sencha Touch 2 应用程序的 Javascript 缓存。我已经在开发者工具中多次删除了 Chrome 缓存、禁用/启用并切换了“禁用缓存”。我还尝试在 MAMP Pro 中设置一个新主机，以尝试强制刷新为不同的域。

Chrome 拒绝清除缓存并始终显示旧缓存版本的 Javascript。

我还在`app.js`Sencha Touch 2 缓存禁用中尝试了以下操作。

```
Ext.Loader.setConfig({
  disableCaching: false
}); 
```

我不确定下一步该做什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T18:57:33.023

尝试使用时间戳...`app.js?102390903452`

如果这不起作用......除了缓存之外，还有一些可疑的事情发生。

做这个步骤

*   检查javascript路径。
*   如果您正在删除服务器上开发，请检查连接；在任何情况下，重新连接；
*   完全删除文件（当然要备份）
*   直接访问 javascript domain/files/js.js 看看你得到了什么

# css - 第 n 个子选择器的 SASS 编译错误

> ID：14487231
> 
> 赞同：2
> 
> 时间：2013-01-23T18:55:40.560
> 
> 标签：css, sass, css-selectors

所以我在这里做了一些研究，但无法找到答案，所以希望这里有人可以帮助我......

我有以下 SASS 代码

```
$column: 7;

table
{
  th:nth-child($column) 
  {
    // This does NOT compile
  } 
  th:nth-child(7) 
  {
    // This does compile
  }
} 
```

为什么将 nth-child 选择器与变量结合使用不会在 SASS 中编译？是否有任何替代方法可以将*动态*值与 nth-child 选择器一起使用？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T18:58:00.180

与选择器一起使用时必须对变量进行[插值](http://sass-lang.com/docs/yardoc/file.SASS_REFERENCE.html#interpolation_)（例如，作为功能性伪类的参数）。在您的情况下，语法应如下所示：

```
$column: 7;

table
{
  th:nth-child(#{$column})
  {
    // ...
  }
} 
```

# java - 创建递归算法

> ID：14487234
> 
> 赞同：1
> 
> 时间：2013-01-23T18:55:51.327
> 
> 标签：java, algorithm, recursion, geometry

我一直在关注 Coding Bat 的当前问题：

“我们有由块组成的三角形。最上面一行有 1 个块，下一行有 2 个块，下一行有 3 个块，依此类推。递归（无循环或乘法）计算这样一个块的总数具有给定行数的三角形。”

我了解问题的要求，并且了解递归的工作原理。例如，如果给我一个递归函数，我可以手动计算它并显示输出将是什么。

问题实际上是从给定问题（例如这个问题）创建递归函数。我不确定如何实际设置并递归执行。在实际设置递归问题时是否需要遵循某种规则？我只能找到向您展示递归如何工作的示例，而不是向您展示如何实际解决递归问题。任何理解如何准备编写实际递归算法的帮助将不胜感激。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T19:16:11.950

大致：

1.  始终查看问题并尝试找出是否可以将其划分为*相同类型的子问题*。这是您可以使用递归的第一个提示。本质上，您正在寻找实际问题的较小实例/版本。

    因此，递归采用自上而下的方法（从更复杂到更简单的问题案例）。

2.  当你能找到这样的情况时，你应该找出“更大”情况和“更小”情况之间的关系，然后你就有了*递归步骤*。

3.  最后一件事是找出*终止条件*或您想要停止的最小或最后一种情况。

您可能知道这一点，但如果不知道，它可能会对您有所帮助。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T19:00:32.080

`if(rows == 1) return 1;`在这里没用。

对于递归全局问题，你必须反汇编你的问题，发现：

1.  退出规则（可以是示例中的初始值，也可以是其中一个输入的退出条件）
2.  一个步进过程（你必须对上一个输入做什么才能得到下一个）

并将它们组装在一个调用自身的函数中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T19:01:11.110

对于一个`recursion`算法，

首先设计`base`案例，函数应该开始展开**堆栈**或返回基值。

`non-base`然后为每种情况设计要实际完成的算法

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T19:07:20.890

试试这个代码：

```
#include <iostream>
using namespace std;
int sumf(int row,int sum){
if(row==0)     //basecase which ends the recursion.
return sum;
else
{sum=row+sum;
return sumf(--row,sum);   // repeating the process.
}}
int main() {
    cout<<"sum is: "<<sumf(5,0)<<endl;
system("pause");
    return 0;
    } 
```

这是让您了解递归的视频。（忘记语言，只关注概念。）

[http://www.youtube.com/watch?v=sNJQrtGD1Nc](http://www.youtube.com/watch?v=sNJQrtGD1Nc)

# java - 来自数组的随机组合 (Java)

> ID：14487237
> 
> 赞同：0
> 
> 时间：2013-01-23T18:55:56.003
> 
> 标签：java, arrays, random

我正在创建一个简单的 Mastermind 游戏，其中我的颜色由 0 到 9 的数字表示。程序应该生成一个长度为 3 到 9 位的随机代码。我决定使用一个数组来保存我的数字 0 到 9，但我不知道如何从这个数组中生成一个随机长度的随机数。有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:03:06.240

使用[随机数生成器](http://docs.oracle.com/javase/1.4.2/docs/api/java/util/Random.html)：

```
Random rnd=new Random()
int x=rnd.nextInt(10) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:31:10.037

这是示例代码：

```
package testing.Tests_SO;

import java.util.Arrays;
import java.util.Random;

public class App14487237 {

    // creating random number generator object
    public static final Random rnd = new Random();

    public static int[] getNumber() {

        // generating array length as rundom from 3 to 9 inclusive
        int length = rnd.nextInt(7) + 3;

        // creating an array
        int[] number = new int[length];

        // filling an array with random numbers from 0 to 9 inclusive
        for(int i=0; i<number.length; ++i) {
            number[i] = rnd.nextInt(10);
        }

        // returning and array
        return number;

    }

    public static void main(String[] args) {

        // generating number 10 times and prin result
        for(int i=0; i<10; ++i) {
            System.out.println( "attempt #" + i + ": " + Arrays.toString( getNumber()  ) );
        }
    }
} 
```

这是它的输出：

```
attempt #0: [0, 2, 6, 2, 5, 7, 5, 3]
attempt #1: [6, 2, 6, 6, 6, 2]
attempt #2: [8, 9, 6]
attempt #3: [6, 4, 7, 2, 1, 5, 7, 0]
attempt #4: [8, 2, 6, 7, 3, 8, 2, 9, 1]
attempt #5: [8, 6, 5, 9, 8, 8, 3, 9]
attempt #6: [6, 2, 3, 8, 6]
attempt #7: [3, 4, 6, 2]
attempt #8: [0, 5, 0, 0, 5, 8, 9, 4, 6]
attempt #9: [2, 2, 3, 3, 4, 9, 0] 
```

**附言**

打印关闭：

```
int[] number;
for(int i=0; i<10; ++i) {
    number = getNumber();
    System.out.print( "attempt #" + i + ": " );
    for(int j=0; j<number.length; ++j ) {
        System.out.print(number[j]);
    }
    System.out.println();
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T20:06:41.593

我相信您想要的是数组中元素[随机排列的一部分。](http://en.wikipedia.org/wiki/Random_permutation)这可以分两步完成。

1.  使用随机生成器重复交换数组中的元素。

    ```
    int n = arr.length;
    for (int i = 0; i < n-1; i++) {
        int j = i + rnd.nextInt(n-i); // select element between i and n
        // swap elements i and j in the array
    } 
    ```

2.  选择一个随机长度`ln`并将元素从`0`到`ln`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T19:17:48.733

使用随机数生成器来确定字符串的长度。

然后在 for 循环中使用随机数生成器从数组中选择每个数字。

像这样的东西：

```
// the array of valid numbers
int[] numbers = // intialize this however you want

Random rand = new Random();

// determine random length between 3 and 9
int numLength = rand.nextInt(7) + 3;

StringBuilder output = new StringBuilder();

for (int i = 0; i < numLength; i++) {
    // use a random index to choose a number from array
    int thisNum = rand.nextInt(numbers.length);
    // append random number from array to output 
    output.append(thisNum);
}

System.out.println(output.toString()); 
```

# c# - 为什么匿名方法可以作为 Action 隐式传递？

> ID：14487240
> 
> 赞同：2
> 
> 时间：2013-01-23T18:56:09.030
> 
> 标签：c#

> **可能重复：**
> [为什么必须将 lambda 表达式作为普通 Delegate 参数提供](https://stackoverflow.com/questions/411579/why-must-a-lambda-expression-be-cast-when-supplied-as-a-plain-delegate-parameter)

`Control.Invoke`接受`Delegate`参数类型。`Delegate`如果不告诉编译器我传递的是哪种类型的委托，我就无法将 Lamba 表达式作为 a传递。

`textBox1.Invoke(() => { MessageBox.Show("Hello World"); }); //illegal`

在这种情况下，我可以转换为`Action`

`textBox1.Invoke((Action)(() => { MessageBox.Show("Hello World"); })); //legal`

但是，我可以通过扩展方法创建一个速记方法（我见过 Marc Gravell 这样做）：

```
public static void Invoke(this Control control, Action action)
{
    control.Invoke((Delegate)action);
} 
```

现在我的速记工作......

`textBox1.Invoke(() => { MessageBox.Show("Hello World"); }); //legal`

编译器如何确定匿名方法是扩展方法中的 Action，但编译器无法确定 Lamba 是 Action，因此`Delegate`在 的情况下是合法的`Control.Invoke`？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:25:35.770

首先，编译器足够聪明，可以确定参数的类型`Action`（而不是 say `Action<T>`）。更重要的是，编译器可以假设我的意思是 an`Action`而不是 an，`Expression`因为消除了歧义。如果我做了一些愚蠢的事情来重新创建歧义......比如说通过新的扩展方法创建一个重载：

```
 public static void Invoke(this Control control, Expression<Action> action)
    {
        Console.WriteLine("hi");
        //control.Invoke((Delegate)action);
    } 
```

编译器也会捕捉到这一点：

`The call is ambiguous between the following methods or properties:`

发表的评论让我找到了我正在寻找的答案。

# c++ - 避免模 拟 std::fstream 类的“支配性继承”警告

> ID：14487241
> 
> 赞同：8
> 
> 时间：2013-01-23T18:56:10.637
> 
> 标签：c++, visual-c++, mocking, compiler-warnings, fstream

我正在使用[googlemock](https://github.com/google/googletest)`std::fstream`在我的单元测试中模拟一个对象，如下所示：

```
TEST_F(SomeTest, SomethingIsDoneCorrectly)
{
    class MockFstream : public std::fstream {};
    MockFstream lMockFstream;
    // Expectations and assertions here
} 
```

当我编译时，我收到以下警告：

> 警告 1 警告 C4250: 'SomeTest_SomethingIsDoneCorrectly_Test::TestBody::MockFstream' : 通过支配继承 'std::basic_istream<_Elem,_Traits>::std::basic_istream<_Elem,_Traits>::_Add_vtordisp1'
> 
> 警告 2 警告 C4250: 'SomeTest_SomethingIsDoneCorrectly_Test::TestBody::MockFstream' : 通过支配继承 'std::basic_ostream<_Elem,_Traits>::std::basic_ostream<_Elem,_Traits>::_Add_vtordisp2'

我更喜欢干净的构建输出，所以我想抑制这些特定的警告，但我正在编写跨平台代码，所以我也更喜欢避免特定于编译器的`#pragma`s.

我可以在 googlemock 对象中做些什么来隐藏这些警告吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T18:56:10.637

事实证明，这些警告是 Microsoft C++ STL 中某些怪癖的副作用。我在下面引用了相关 Microsoft Connect 问题的解释。

我的解决方案只是在我的模拟中实现继承函数的空版本：

```
TEST_F(SomeTest, SomethingIsDoneCorrectly)
{
    class MockFstream : public std::fstream
    {
        void _Add_vtordisp1() { } // Required to avoid VC++ warning C4250
        void _Add_vtordisp2() { } // Required to avoid VC++ warning C4250
    };
    MockFstream lMockFstream;
    // Expectations and assertions here
} 
```

[Microsoft](http://connect.microsoft.com/VisualStudio/feedback/details/733720/)对警告发生原因的解释：

> 这里的故事有些复杂。VC 有一个晦涩难懂的编译器选项 /vd2（记录在[http://msdn.microsoft.com/en-us/library/7sf3txa8.aspx](http://msdn.microsoft.com/en-us/library/7sf3txa8.aspx)），它修复了涉及虚拟基类的晦涩错误。默认情况下，VC 会做一些稍微不符合 C++ 标准的事情。/vd2 将 VC 的行为更改为一致，但这本质上会影响类布局。（这种布局差异是为什么默认值没有更改为一致的原因 - 这会破坏用户尝试混合使用不同主要版本的 VC 编译的代码。我们的 C++ 标准库实现禁止这种混合，但编译器本身更宽松一些.) 因此，如果用户想要 /vd2，他们必须以这种方式编译所有内容。
> 
> 扭曲是布局错误（/vd2 修复）影响使用虚拟基类的 iostreams，而我们的 iostreams 实现有一个单独编译的组件（在 msvcp100.dll/libcpmt.lib/等中）。当 MS 构建 STL 的 DLL/LIB 时，它们以默认方式编译，没有 /vd2。结果，使用 /vd2 的人不能使用 iostreams，否则他们会遇到奇怪的崩溃。呸。
> 
> 因此，我们添加了无操作虚函数 _Add_vtordisp1() 和 _Add_vtordisp2()。它们的存在使 VC 完全一致地执行布局，无论是否使用 /vd2，因此使 iostreams 可以双向使用。
> 
> _Add_vtordisp1() 和 _Add_vtordisp2() 触发警告 C4250，谈论优势。这个警告实际上是完全没用的——它是说编译器将完全按照标准要求它做的事情。因此，我们在 STL 的标头中抑制它（必须是 /W4 /analyze clean）。如果您是从 fstream 派生的，则需要在您自己的代码中禁止显示此警告。

# java - 数组索引越界异常

> ID：14487244
> 
> 赞同：-2
> 
> 时间：2013-01-23T18:56:17.693
> 
> 标签：java, indexoutofboundsexception

当我运行这个应该检测图像中的圆圈的程序时，当我调用 drawCircles() 时，我在最后一个方法中得到 Array index out of bounds 异常

findCircle() 读取图像并搜索圆圈，然后 drawCircles() 使用 Bresenaham 算法绘制它们。

```
public class Assig1 {

    public static void main(String[] args) {
        try {
            // arg 0 is the input image name
            BufferedImage img = ImageIO.read(new File(args[0]));

            // arg 1 is the min radius
            int minr = Integer.parseInt(args[1]);
            // arg 2 is the max radius
            int maxr = Integer.parseInt(args[2]);

            // if present, arg 3 is the max width we consider
            int w = (args.length>3) ? Integer.parseInt(args[3]) : img.getWidth();
            // if present, arg 4 is the max height we consider
            int h = (args.length>4) ? Integer.parseInt(args[4]) : img.getHeight();

            // you can look at pixel values with this API call:
            int c = img.getRGB(0,0); // get RGB value of pixel at (0,0)

            // you can write out pixels with the setRGB() API.  However,
            // what you get will depend on the colour model, so here
            // we use a Graphics2D object.

            // graphical output
            Graphics2D g2 = img.createGraphics();
            // use red
            g2.setColor(Color.RED);

            // call circle drawing algorithm
           drawCircle(5,5,3,img,g2);

            //-----
            findCircle(minr,img, w, h);

            //----

            // write out the image
            File outputfile = new File("outputimage1.png");
            ImageIO.write(img, "png", outputfile);
        } catch (Exception e) {
            e.printStackTrace();
        }
    }

    // Bresenham's algorithm to draw a circle
    // requires circle center and radius, as well as the
    // image and Graphics2D object with drawing colour already set.
    static void drawCircle(int cx,int cy,int r,BufferedImage img,Graphics2D g) {
        int f = 1-r;
        int ddF_x = 1;
        int ddF_y = -2 * r;
        int x = 0;
        int y = r;

        // draw cardinal points
        g.drawLine(cx,cy+r,cx,cy+r);
        g.drawLine(cx,cy-r,cx,cy-r);
        g.drawLine(cx+r,cy,cx+r,cy);
        g.drawLine(cx-r,cy,cx-r,cy);

        // draw 1/8 of the circle, taking advantage of symmetry
        while(x < y) {
            if(f >= 0) {
                y--;
                ddF_y += 2;
                f += ddF_y;
            }
            x++;
            ddF_x += 2;
            f += ddF_x;

            g.drawLine(cx+x,cy+y,cx+x,cy+y);
            g.drawLine(cx-x,cy+y,cx-x,cy+y);
            g.drawLine(cx+x,cy-y,cx+x,cy-y);
            g.drawLine(cx-x,cy-y,cx-x,cy-y);
            g.drawLine(cx+y,cy+x,cx+y,cy+x);
            g.drawLine(cx-y,cy+x,cx-y,cy+x);
            g.drawLine(cx+y,cy-x,cx+y,cy-x);
            g.drawLine(cx-y,cy-x,cx-y,cy-x);
        }

    }

    static void findCircle(int r,BufferedImage img, int w, int h) {

        //getting all the pixels from an image
        int[][] pixels = new int[w][h];

        for( int i = 0; i < w; i++ ){
             for( int j = 0; j < h; j++ ){
                   pixels[i][j] = img.getRGB( i, j );
             }
        }

         // graphical output
        Graphics2D g2 = img.createGraphics();
        // use red
        g2.setColor(Color.RED);

        for (int i1=0; i1<pixels.length; i1++) {
             for (int j1=0; j1<pixels[i1].length; j1++) {

                 if(pixels[i1][j1] != pixels[i1+r][j1]
                        || pixels[i1][j1] != pixels[i1-r][j1]
                        || pixels[i1][j1] != pixels[i1][j1+r]
                        || pixels[i1][j1] != pixels[i1][j1-r]){
                    drawCircle(i1,j1,r,img,g2);
                }
             }

         }
    }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T19:00:21.853

在您的 findCircle 方法中，

```
 if(pixels[i1][j1] != pixels[i1+r][j1]
                || pixels[i1][j1] != pixels[i1-r][j1]
                || pixels[i1][j1] != pixels[i1][j1+r]
                || pixels[i1][j1] != pixels[i1][j1-r]){
            drawCircle(i1,j1,r,img,g2);
        } 
```

如果 r 不是 0，这将导致数组索引越界异常，因为您基本上是从第 0 个索引循环到第 n 个索引。基本上任何你加或减 r 的地方。例如，这是将导致此错误的语句之一

```
pixels[i1+r][j1] 
```

# java - 有没有办法在 IBM WebSphere Application Server 上使用 WebSockets？

> ID：14487246
> 
> 赞同：4
> 
> 时间：2013-01-23T18:56:28.623
> 
> 标签：java, websocket, websphere-7

我正在使用 WebSocket Servlet 将基于 Apache Tomcat 7.0.35 的 Web 应用程序迁移到 IBM WebSphere Application Server (WAS)。问题是我不认为 WAS 支持 WebSockets。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2015-01-16T10:54:35.427

您可以尝试 WebSphere Liberty 8.5.5.4——它支持 WebSockets。[请参阅此处](https://developer.ibm.com/wasdev/blog/2014/12/09/announcing-new-liberty-features-tools/)的公告。

也可以看看：

*   [Liberty 配置文件：Web 套接字](http://www-01.ibm.com/support/knowledgecenter/SSAW57_8.5.5/com.ibm.websphere.wlp.nd.multiplatform.doc/ae/cwlp_websockets.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T20:28:08.700

WAS 不支持[此处](http://www.ibm.com/developerworks/forums/thread.jspa?messageID=14865076)IBM 论坛中所述的 WebSockets 。您可以做的是调查是否可以在 WAS 中部署 WebSockets 服务器实现之一（检查此[列表](http://en.wikipedia.org/wiki/Comparison_of_WebSocket_implementations)）。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-02-06T10:32:02.597

您还可以尝试将 Jetty Web 服务器嵌入到 Java 应用程序中以在您的 WebSphere Application Server 上运行 - [http://www.eclipse.org/jetty/documentation/current/embedding-jetty.html](http://www.eclipse.org/jetty/documentation/current/embedding-jetty.html)。另一种选择是使用 WebSockets 实现（例如 Wabbit），或使用支持 Java EE 7 规范的应用程序服务器，如 IBM WAS 9。

# python - rsync 退出值

> ID：14487249
> 
> 赞同：2
> 
> 时间：2013-01-23T18:56:32.703
> 
> 标签：python, bash

我在 rsync 手册中读到 rsync 返回 0 - 35 范围内的退出值。
我尝试使用以下代码捕获 rsync 的输出：

```
import subprocess, time, os, sys
cmd = ["rsync", "-avuxz", "/etc/passwd" ,"/tmp1/"]

p = subprocess.Popen(cmd,
                     stdout=subprocess.PIPE,
                     stderr=subprocess.STDOUT)

for line in p.stdout:
    print line.rstrip() 
```

使用上面的程序，我从 rsync 捕获了以下输出：

```
rsync: mkdir "/tmp1" failed: Permission denied (13)
rsync error: error in file IO (code 11) at main.c(587) [Receiver=3.0.9]
rsync: connection unexpectedly closed (9 bytes received so far) [sender]
rsync error: error in rsync protocol data stream (code 12) at io.c(605) [sender=3.0.9] 
```

我的问题：
- rsync 输出是否仅作为文本（如上）？
- 我如何区分成功（代码 0）和错误？
（假设是否正确：在 Success 的情况下 p.stdout 的长度将为零，而其他任何事情都是失败的？）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:00:19.500

您可以通过属性访问`Popen`对象进程的返回码。[`returncode`](http://docs.python.org/2/library/subprocess.html#subprocess.Popen.returncode)如果其值为`None`，则该过程尚未完成；稍后再检查。

例如：

```
p = subprocess.Popen(cmd, stdout=subprocess.PIPE, stderr=subprocess.STDOUT)

# Dumb way to wait for the process to complete
while p.returncode is None:
    os.sleep(1)
if p.returncode:
    print "Error, rsync exited with non-zero status"
else:
    print "Success, rsync exited with zero status" 
```

# grammar - Xtext 如何知道该实体是由 ID 规则在这里引用的？

> ID：14487252
> 
> 赞同：1
> 
> 时间：2013-01-23T18:56:39.520
> 
> 标签：grammar, xtext

在 Xtext 15 分钟教程（[此处](http://www.eclipse.org/Xtext/documentation.html#_1)）中，`Entity`规则定义如下

```
Entity:
  'entity' name = ID ('extends' superType = [Entity])? '{'
     features += Feature*
  '}'
; 
```

这意味着在“扩展”这个词之后，解析器应该期望引用（另一个）实体。这里实际应该使用的`ID`规则是如何设置的？如果我`ID`的语法没有规则怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:30:41.663

中的交叉引用`superType = [Entity]`是`superType = [Entity|ID]`. 如果使用`superType = [Entity|STRING]`，引用将基于终端规则 STRING 的具体语法。

# c# - MVC 3 实体框架空结果集

> ID：14487255
> 
> 赞同：2
> 
> 时间：2013-01-23T18:56:44.090
> 
> 标签：c#, .net, asp.net-mvc-3, entity-framework, epplus

我正在开发一个应用程序，它返回一个 Excel 报告，每个员工都有多个角色以及每个角色的预期和实际工作时间。例如，我可能被列为一个专栏的开发人员和另一个专栏的 BA！。它正在使用的查询返回一个空结果集。

```
 public ActionResult ExpectedVsActual()
    {

        try
        {
            ProjectTotalsReportViewModel model = new ProjectTotalsReportViewModel();

            Employee currentUser = DataHelper.GetEmployee(User, db);

            model.AvailableEmployees = db.Employees.OrderBy(e => e.LastName).ThenBy(e => e.FirstName).ToList();

            if (currentUser.SecurityRoleCode == Constants.SECURITY_ROLE_CODE_ADMIN)
            {
                model.AvailableProjects = (db.Projects.Any() ? db.Projects.Where(p => p.ProjectCategoryCode == Constants.PROJECT_CATEGORY_DIRECT).OrderBy(p => p.ProjectName).Distinct().ToList() : new List<Project>());

                model.ProjectRate = (db.EmployeeProjectRates.Any() ? db.EmployeeProjectRates.Where(epr => epr.EmployeeID == epr.EmployeeID).OrderBy(epr => epr.EmployeeID).Distinct().ToList(): new List<EmployeeProjectRate>());
            }
            else
            {
                model.AvailableProjects = (db.EmployeeProjectRates.Any(epr => epr.EmployeeID == currentUser.EmployeeID && epr.ProjectRoleCode == Constants.PROJECT_ROLE_PROJECT_MANAGER) ? db.EmployeeProjectRates.Where(epr => epr.EmployeeID == currentUser.EmployeeID && epr.ProjectRoleCode == Constants.PROJECT_ROLE_PROJECT_MANAGER).Select(epr => epr.Project).OrderBy(p => p.ProjectName).Distinct().ToList() : new List<Project>());
            }

            model.SelectedEmployeesForCheckBox = model.AvailableEmployees;
            model.SelectedProjectsForCheckBox = model.AvailableProjects;

            ViewBag.InitialLoad = true;

            return PartialView("_ExpectedVsActual", model);
        }
        catch
        {
            return null;
        }
    }

[HttpPost]
    public ActionResult ExpectedVsActual(ProjectTotalsReportViewModel Model)
    {
        try
        {
            if (ModelState.IsValid)
            {

                ViewBag.InitialLoad = false;
                DataHelper.TimeFrame selectedTimeFrame = DataHelper.TimeFrame.Weekly;//Need to remove after adding selection for time frame

                SMCContext db = new SMCContext();
                ViewBag.TimeFrameSelectList = DataHelper.GetTimeFrameSelectList();
                List<ProjectTimeFrame> timeFrames = new List<ProjectTimeFrame>();
                ProjectViewModel Project = new ProjectViewModel();
                timeFrames = DataHelper.GetProjectTimeFrames(Model.StartDate.Value, Model.EndDate.Value, selectedTimeFrame);

                Project.EmployeeProjectRates = Project.EmployeeProjectRates.OrderBy(epr => epr.Employees.Single(e => e.Value == epr.EmployeeID.ToString())).ToList();

                    resultFile = currentPackage.GetAsByteArray();
                    return File(resultFile, "application/vnd.openxmlformats-officedocument.spreadsheetml.sheet", "Expected Vs Actual.xlsx");

                }
                #endregion
            }
            else
            {
                return PartialView("_ExpectedVsActual", Model);
            }

        }
        catch (Exception e)
        {
            throw e;

        }

    } 
```

我遗漏了文件的所有格式化和创建的大部分，它与空结果无关。结果应该是这样的 ![在此处输入图像描述](../Images/bc9538a2c62981c9feab16a5acacbb01.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:06:00.787

它至少在以下三点之一上对您不利：

1.  验证数据库中的数据是否反映了您正在搜索的内容。最快的方法是通过某种分析器来捕获转换后的 EF 查询并向您显示 SQL 语句。[linqpad](http://www.linqpad.net/)是一个很好的工具。

2.  验证您的映射。您可能没有正确映射您的关系，因此不会产生任何数据。

3.  验证您自己的约束。看起来您有基于权限的查找。在获取当前用户后放置一个断点，并确保它具有与您在`Constants.SECURITY_ROLE_CODE_ADMIN`条件中查找的权限 ( ) 相匹配的权限。

# r - 在拆分应用组合问题中维护顺序

> ID：14487269
> 
> 赞同：3
> 
> 时间：2013-01-23T18:57:31.367
> 
> 标签：r, plyr

> **可能重复：**
> [如何在不排序的情况下进行 ddply()？](https://stackoverflow.com/questions/7235421/how-to-ddply-without-sorting)

我有以下数据框

```
dd1 = data.frame(cond = c("D","A","C","B","A","B","D","C"), val = c(11,7,9,4,3,0,5,2))
dd1
  cond val
1    D  11
2    A   7
3    C   9
4    B   4
5    A   3
6    B   0
7    D   5
8    C   2 
```

现在需要计算关于 cond 中因子水平的累积和。结果应如下所示：

```
> dd2 = data.frame(cond = c("D","A","C","B","A","B","D","C"), val = c(11,7,9,4,3,0,5,2), cumsum=c(11,7,9,4,10,4,16,11))
> dd2
  cond val cumsum
1    D  11     11
2    A   7      7
3    C   9      9
4    B   4      4
5    A   3     10
6    B   0      4
7    D   5     16
8    C   2     11 
```

以与输入数据帧相同的顺序接收结果数据帧很重要，因为还有其他变量与之绑定。

我试过`ddply(dd1, .(cond), summarize, cumsum = cumsum(val))`了，但没有产生我预期的结果。

谢谢

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T19:05:20.357

改为使用`ave`。

```
dd1$cumsum <- ave(dd1$val, dd1$cond, FUN=cumsum) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T19:06:44.760

如果手动执行此操作是一种选择`split()`，那么`unsplit()`在合适的`lapply()`中间位置将为您执行此操作。

```
dds <- split(dd1, dd1$cond)
dds <- lapply(dds, function(x) transform(x, cumsum = cumsum(x$val)))
unsplit(dds, dd1$cond) 
```

最后一行给出

```
> unsplit(dds, dd1$cond)
  cond val cumsum
1    D  11     11
2    A   7      7
3    C   9      9
4    B   4      4
5    A   3     10
6    B   0      4
7    D   5     16
8    C   2     11 
```

我把这三个步骤分开了，但是如果你做了很多这样的事情，它们可以串在一起或放在一个函数中。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-23T19:07:32.340

一个`data.table`解决方案：

```
require(data.table)
dt <- data.frame(dd1)
dt[, c.val := cumsum(val),by=cond]
> dt
#    cond val c.val
# 1:    D  11    11
# 2:    A   7     7
# 3:    C   9     9
# 4:    B   4     4
# 5:    A   3    10
# 6:    B   0     4
# 7:    D   5    16
# 8:    C   2    11 
```

# java - 如何使用 Spring 和 Ldap 将登录用户重定向到主页

> ID：14487271
> 
> 赞同：1
> 
> 时间：2013-01-23T18:57:33.467
> 
> 标签：java, spring, spring-security, ldap

我正在使用 Spring 和 Ldap 进行用户身份验证，现在我想在用户已经登录时将用户重定向到主页，我尝试了一些通过谷歌阅读但没有运气的解决方案。这是我的配置代码...

Spring-Security.xml

```
 <security:http auto-config="true" use-expressions="true"
        access-denied-page="/denied" access-decision-manager-ref="accessDecisionManager"
        disable-url-rewriting="true">

        <security:remember-me key="_spring_security_remember_me"
            token-validity-seconds="864000" token-repository-ref="tokenRepository" />

        <security:intercept-url pattern="/login/login"
            access="permitAll" />

        <security:intercept-url pattern="/resources/**"
            access="permitAll" />

        <security:intercept-url pattern="/member/*"
            access="permitAll" />

        <security:intercept-url pattern="user/admin/admin"
            access="hasRole('ROLE_ADMIN')" />

        <security:intercept-url pattern="/user/user"
            access="hasRole('ROLE_USERS')" />

        <security:form-login login-page="/login/login"
            authentication-failure-url="/login/login?error=true"
            default-target-url="/checking" />

        <security:logout invalidate-session="true"
            logout-success-url="/login/login" logout-url="/login/logout" />

        <security:custom-filter ref="captchaCaptureFilter"
            before="FORM_LOGIN_FILTER" />
        <!-- <security:custom-filter ref="captchaVerifierFilter" after="FORM_LOGIN_FILTER" 
            /> -->

        <!-- <security:session-management
            invalid-session-url="/logout.html">
            <security:concurrency-control
                max-sessions="1" error-if-maximum-exceeded="true" />

        </security:session-management>
        <security:session-management
            session-authentication-strategy-ref="sas" /> -->
    </security:http> 
```

**我的登录控制器**

```
public class LoginController {

    @Autowired
    private User user;

    @Autowired
    SecurityContextAccessor securityContextAccessor;

    @RequestMapping(value = "login/login", method = RequestMethod.GET)
    public String getLogindata(
            @RequestParam(value = "error", required = false) String error,
            Model model) {

        Authentication auth = SecurityContextHolder.getContext().getAuthentication();

        model.addAttribute("error", error);

        if (securityContextAccessor.isCurrentAuthenticationAnonymous() && auth.getPrincipal() == null) {
            return "login/login";
        } else {
            return "redirect:/member/user";
        }
    }
} 
```

auth.getName() 总是给我匿名用户，即使我已经登录了....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:16:58.900

在成功登录 spring-security.xml 中的 default-target-url 后，您应该将目标重定向写入主页，而不是 default-target-url="/checking" 。

我不确定您要在 /login/login Controller 中实现什么？如果你只想重定向用户，在成功登录 /member/user 后，你应该写：

```
 <security:form-login login-page="/login"
         always-use-default-target='true' 
         default-target-url="/member/user"
         authentication-failure-url="/login/login?error=true"
         /> 
```

登录控制器应如下所示：

```
 @RequestMapping(value="/login", method = RequestMethod.GET)
public String login(ModelMap model) {
return "login";
} 
```

如果您的身份验证提供程序正常且正确，Spring Security 会在您成功登录后自动将您重定向到 /member/user。

# jquery - 基于 GET 在 textarea 中定位文本字符串并将光标移动到该文本

> ID：14487272
> 
> 赞同：2
> 
> 时间：2013-01-23T18:57:34.983
> 
> 标签：jquery

我表单中的文本区域 id="Fulltext" 由数据库提供，其中包含一本书的许多章节。当用户单击文本区域上方的链接时
`<a href="samePage.php?chap=Chapter 5" id="Chapter 5">Chapter 5</a>`，我希望光标在文本区域内移动并将其自身定位在文本“第 5 章”的前面。这可能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:34:33.640

演示：http: [//jsfiddle.net/deg6j/](http://jsfiddle.net/deg6j/)

HTML

```
<html>
<head>
    <script type="text/javascript">
        function selectText(text)
        {
            var textArea = $('#Fulltext');
            var index = textArea.text().search(text);
            textArea.caretTo(index);      
        }
    </script>
</head>
<body>
<textarea id='Fulltext' rows=10>
    Chapter 1
    This is a lot of text...

    Chapter 2
    More more more

    Chapter 3
    More dsa less
</textarea>
    <a href="#" onclick="selectText('Chapter 2')">Chapter 2</a>
</body>
</html> 
```

Javascript

```
new function($) {
  // Behind the scenes method deals with browser
    // idiosyncrasies and such
    $.caretTo = function (el, index) {
        if (el.createTextRange) { 
            var range = el.createTextRange(); 
            range.move("character", index); 
            range.select(); 
        } else if (el.selectionStart != null) { 
            el.focus(); 
            el.setSelectionRange(index, index); 
        }
    };

    // The following methods are queued under fx for more
    // flexibility when combining with $.fn.delay() and
    // jQuery effects.

    // Set caret to a particular index
    $.fn.caretTo = function (index, offset) {
        return this.queue(function (next) {
            if (isNaN(index)) {
                var i = $(this).val().indexOf(index);

                if (offset === true) {
                    i += index.length;
                } else if (offset) {
                    i += offset;
                }

                $.caretTo(this, i);
            } else {
                $.caretTo(this, index);
            }

            next();
        });
    };
}(jQuery); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:34:58.040

我猜你可以。

假设您可以通过文本识别章节开始的位置，您可以使用[jQuery caret plugin](http://www.jquery-plugin.buss.hk/my-plugins/jquery-caret-plugin)做到这一点。

检查[这个](https://stackoverflow.com/questions/4085312/jquery-get-the-cursor-position-of-text-in-input-without-browser-specific-code)和[这个](https://stackoverflow.com/questions/499126/jquery-set-cursor-position-in-text-area)问题的答案。

另外，您可能希望在章节锚点中绑定一个 javascript 函数。

# php - 使用 Twig 变量作为其他 Twig 变量的属性名称

> ID：14487273
> 
> 赞同：21
> 
> 时间：2013-01-23T18:57:35.363
> 
> 标签：php, symfony, twig

我必须使用 Twig 变量作为另一个 Twig 变量的属性。

在 for 循环中，我获取特定实体的属性，并希望使用这些属性来获取另一个 for 循环中实体变量的属性内容。

一些代码可以清楚地说明这一点：

```
{% for entity in entities  %}

{{entity.foo}}, {{entity.bar}}<br />

{% for property in specialdynamicproperties %}
{{entity.property}} <!-- property has the content foobar for example, I want to use it as the property accessor for entity -->
{% endfor %}

{% endfor %} 
```

谢谢。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-23T19:49:22.143

[属性函数](https://twig.symfony.com/doc/3.x/functions/attribute.html)就是你要找的。

编辑：

```
 {{ attribute(object, method) }}
  {{ attribute(object, method, arguments) }}
  {{ attribute(array, item) }} 
```

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2013-10-21T14:25:23.517

```
 {% for object in objects %}
        {% for column in columns %}
            {{ attribute(object, column) }} {# equivalent to php $object[$column] #}
        {% endfor %}
    {% endfor %} 
```

使用 Twig[属性函数](http://twig.sensiolabs.org/doc/functions/attribute.html)(Twig > 1.2)

# salesforce - 根据 VisualForce 中的字段值对联系人表进行分区

> ID：14487276
> 
> 赞同：0
> 
> 时间：2013-01-23T18:57:50.760
> 
> 标签：salesforce, apex-code, visualforce

所以，假设我有以下 visualforce 页面：

```
<table width="100%" border="0">
    <tr>  
      <td valign="top">
        <apex:pageBlock mode="edit" id="results">
           <apex:pageBlockTable value="{!contacts}" var="contact">
               <apex:column >
                   <apex:facet name="header">
                         email
                   </apex:facet>
                   <apex:outputField value="{!contact.email}"/>
                 </apex:column>
                  <apex:column >
                   <apex:facet name="header">
                            Name
                       </apex:facet>
                           <apex:commandLink reRender="detail">{!contact.name}
                     <apex:param name="id" value="{!contact.id}"/>
                       </apex:commandLink>
                    </apex:column>
                </td>
           </tr>
      </table> 
```

以及以下相应的控制器：

```
public List<Contact> contacts = [SELECT name, division, email FROM Contact]; 
```

假设我想分解这个部门的表格（即，当有一个新部门时，我希望在表格中放置一个标题，读取部门名称，然后是该部门内所有联系人的姓名和电子邮件出现在标题下...类似于此：

```
[                    Division 1                    ]
 Email                                           Name
    ....                                         ...
    ...                                          ...
    ...                                          ...
 [                   Division 2                    ]
  Email                                         Name
  ...                                           ...
 [                   Division 3                    ]
  Email                                        Name
 ...                                             ... 
```

ETC...

有没有办法在顶点页面块中内联？还是我必须为每个部门制作一个独特的页面块？

有没有人可以采取另一种方法来解决这个问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:11:11.297

```
 public List<Contact> contacts = [SELECT name, division, email FROM Contact order by division];

     <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" ></script>
 <apex:form >
 <apex:pageBlock mode="edit" id="results">
           <apex:pageBlockTable value="{!contacts}" var="contact">
               <apex:column headerValue="email" >
                    <apex:outputField value="{!contact.email}"/>
                    <span Class="divisionName" division="{!contact.division}"/>
                  </apex:column>
                  <apex:column headerValue="Name" >
                      <apex:commandLink reRender="detail">{!contact.name}
                        <apex:param name="id" value="{!contact.id}"/>
                      </apex:commandLink>
                   </apex:column>
           </apex:pageBlockTable>
    </apex:pageBlock>

  <script>    
 var previous= $('<tr class="myHeaderRow"><td colspan="2">'+''+'</td></tr>') ;
$('.divisionName').each(
   function(index, value){
        if( $(value).attr('division')!=previous.text()){
            $(this).closest('tr').before('<tr style="height: 10px !important;" class="myHeaderRow"><td colspan="2" style="text-align: -webkit-center;">'+$(value).attr('division')+'</td></tr>');
            previous = $(this);
         }
    }
);
</script>   
</apex:form> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T09:39:24.717

**如果您的“部门” （自定义字段？）**是对单独对象的查找，****那将会容易得多。**这就是 Salesforce 中的关系和 SOQL 中这种奇怪的语法的用途。您可以简单地使用一个子查询和 2 个循环：**

 **```
[SELECT Name, (SELECT Id, Name, Email FROM Contacts__r) FROM Division__c] 
```

这类似于

```
[SELECT Name, (SELECT Id, Name, Email FROM Contacts) FROM Account] 
```

* * *

但我怀疑它是一个文本/选择列表字段......然后 - 大致来说是这样的：

1.  将您选择的结果放入桶中，每个分区 1 个桶
2.  可选择对存储桶名称进行排序（按字母顺序？）
3.  在 VF 中 - 使用 2 个循环，1 个用于存储桶，第 2 个用于存储桶内容（如果第二个循环将是`<apex:pageBlockTable>`并且不严格`<apex:repeat>`等，则可以）

样品（未经测试！）

```
// 1
Map<String, List<Contact>> contactsByDiv = new Map<String, List<Contact>>();
for(Contact c: [SELECT Id, Name, Email, Division__c FROM Contact]){
    List<Contact> contactsInThisDiv = contactsByDiv.get(c.Division__c);
    if(contactsInThisDiv.isEmpty()){
        contactsInThisDiv = new List<Contact>{c};
    } else {
        contactsInThisDiv.add(c);
    }
    contactsByDiv.put(c.Division__c, contactsInThisDiv);
}

// 2
List<String> allDivisions = new List<String>();
allDivisions.addAll(contactsByDiv.keyset());
// I've selected a List to store the Div names because sets are unpredictable. List is easier to sort if you'd want it to
// allDivisions.sort(); 
```

* * *

```
<!-- 3 - in VF page -->
<apex:repeat value="{!allDivisions}" var="i">
    <h1>{!i}</h1>
    <apex:pageBlockTable value="{!contactsByDiv[i]}" var="c">
        <apex:column value="{!c.Email}" />
    </apex:pageBlockTable>
</apex:repeat> 
```**

# php - 带有单个 XML 标记的 PHP cURL XML 响应

> ID：14487278
> 
> 赞同：1
> 
> 时间：2013-01-23T18:57:54.673
> 
> 标签：php, xml, curl, simplexml

我正在使用 SimpleXML 加载来自 API 调用的响应。但是，如果服务器返回错误，它只会返回一个带有错误消息的 XML 标记：

`<err>ERROR MESSAGE HERE</err>`

我目前正在使用此代码来解析 API 响应：

`$parsedresponse = simplexml_load_string($response);`

$parsedresponse 变量仅包含错误消息。但是，我需要一种方法来检查`<err>`标签是否存在，以便我知道是否有错误。我似乎无法弄清楚如何做到这一点......

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:07:11.120

如果`err`标签是根标签，则使用以下条件来跟踪错误。

```
if ($parsedresponse->getName()=='err'){
    // got it
} 
```

如果它是第一个孩子使用

```
if (isset($parsedresponse->err)){
    // got it
} 
```

*   必要时否定条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:08:32.867

```
<?php

$xml = <<<EOF
<?xml version="1.0" encoding="UTF-8"?>
<err>ERROR MESSAGE HERE</err>
EOF;

$sxml = simplexml_load_string($xml);

if ($sxml->getName() != "err") print('not set');
else print('set');

?> 
```

# android - 在android上选择性地启用/禁用调试的任何方式

> ID：14487286
> 
> 赞同：0
> 
> 时间：2013-01-23T18:58:20.330
> 
> 标签：android, eclipse, debugging

我正在将一个 java 应用程序从 windows 移植到 android。该应用程序首先从磁盘加载一个大型阵列。（将 4 兆数据放入 100 万个元素的类数组中）

在eclipse中在windows上运行或调试时，加载需要8秒。

当在 android 上从 eclipse 运行而不进行调试时，它需要 50 秒，这似乎有点慢，但如果是这样的话，那就是它。

在 android 上从 eclipse 调试时，需要 8 分钟才能加载。在 android 模拟器上，我在 40 分钟后放弃了。

我的问题是有什么方法可以告诉调试器不要调试这部分代码？

或者有什么可以在eclipse中关闭/打开的东西可以加速调试直到应用程序超过初始化？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T21:28:39.293

最简单的方法很可能是通过 Eclipse 中的 DDMS 透视图。

像往常一样在设备上运行您的应用程序（目前该方法需要大约 50 秒才能启动）。

一旦应用程序开始切换到 DDMS 透视图（通常在 eclipse 的右上角，如果您之前没有使用过透视图，您可能需要添加/打开透视图，只需单击添加按钮并在弹出窗口中查找 DDM） .

进入 DDMS 透视图后，您的设备及其上运行的任何进程都应显示在此透视图的设备选项卡中（默认情况下在左侧）。初始加载完成后，您可以从列表中选择您的应用程序进程，并通过单击绿色调试图标启用调试器。

如果您想稍后在同一运行中停止调试，只需切换到“调试”透视图，右键单击您的项目（在“调试”选项卡中，它的名称应类似于“项目名称 [Android 应用程序]”）并单击断开。

不幸的是，我认为没有办法以编程方式禁用调试，但是很高兴看到添加（如果还没有！）

顺便说一句，Google I/O 2009 上有一个关于在 Android 上进行调试的演讲，其中有一节介绍了方法跟踪（[忍者大师的调试艺术](http://www.youtube.com/watch?v=Dgnx0E7m1GQ "忍者大师的调试艺术")），如果你正在寻找，它可能会帮助你找到一种加快初始加载的方法这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T21:25:24.743

您在模拟器中使用了什么样的图像？ARM 系统映像特别慢，但 Intel x8 Atom 系统映像要快得多；快 4 倍。

英特尔系统映像的问题在于它们并非适用于所有版本。

第二种可能性是为了开发和调试目的而减少数据的大小。很少有人需要完整的数据来开发和调试应用程序。

# jquery - JQuery - 如果屏幕尺寸小于 767 并且元素为空

> ID：14487292
> 
> 赞同：1
> 
> 时间：2013-01-23T18:58:30.187
> 
> 标签：jquery, html

我想编写 jquery 代码来检测屏幕大小小于 767px 并且一个元素是空的，在这种情况下是一个跨度。

```
 if ( ($(window).width() <= 767) && ($.trim($(".btm").html())=='' ) ){

            $('.element').show();
        } else {

            $('.element').hide();
        }

<span class="btm"> </span> 
```

这段代码不起作用，有人知道为什么不起作用吗？谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:01:21.593

那是因为执行此代码时 DOM 尚未准备好。`$(".btm")`找不到。利用

```
$(function() { 
     your code here will be executed when the page is ready
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:17:10.197

提供的解决方案可能是您遇到问题的原因。另一件需要注意的事情是调用 JS 文件和 Javascript 的顺序。

例如，这将**不起作用**：

```
<body>

<script>
if ( ($(window).width() <= 767) && ($.trim($(".btm").html())=='') ){
    $('.element').show();
} else {
    $('.element').hide();
}
</script>

<script src="jquery.js"></script>

<span class="btm"> </span>

</body> 
```

用于检查窗口宽度是否小于或等于 767 像素以及`.btm`span 元素是否为空的 JavaScript 使用 jQuery！因此，您需要确保在执行 JavaScript 之前调用 jQuery，如下所示：

```
<body>

<script src="jquery.js"></script>

<script>
if ( ($(window).width() <= 767) && ($.trim($(".btm").html())=='') ){
    $('.element').show();
} else {
    $('.element').hide();
}
</script>

<span class="btm"> </span>

</body> 
```

# windows-store-apps - 在 Javascript Modern UI 应用中启用垂直滚动

> ID：14487293
> 
> 赞同：2
> 
> 时间：2013-01-23T18:58:32.747
> 
> 标签：windows-store-apps, winjs

我正在尝试创建一个 Javascript Modern UI 应用程序。问题是，垂直滚动不起作用。当我尝试使用鼠标滚动滚动时，页面（HTML 文件）只是停留在那里并且什么都不做，它只显示页面顶部的内容（开始时适合屏幕的内容）

如何启用垂直滚动？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-05-14T22:11:56.770

我意识到这已经有好几年了，但对我来说，这是通过覆盖元素`overflow`上的属性来解决的`html`

```
html {
    overflow: auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T19:12:01.627

我找到了解决方案。是因为`height:auto`财产。删除它，瞧~

# ios6 - iOS6+ 离线管理就像原生缓存管理一样工作

> ID：14487300
> 
> 赞同：1
> 
> 时间：2013-01-23T18:59:00.547
> 
> 标签：ios6, offline, nsurlcache

我正在尝试将离线使用添加到应用程序。我只需要 NSURLRequest / NSURLCache 完成的所有工作，同时能够准确选择磁盘存储位置，因此我可以将它放在永远不会被删除的“/Library/Application Support/whatever”中（不要忘记标记，因此它不会在 iCloud / iTunes 上同步）。

我觉得我必须自己完成所有工作，并且我在第一期中运行。NSURLCache 在内存中保存了一个字典，其中键是 NSURLRequest，值是关联的 NSCachedURLResponse。我也在做同样的事情，但是我不能在磁盘上写这本字典，因为它不是由基本类型组成的。

你知道如何在磁盘上写这样一本字典吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-18T14:57:04.230

我处于类似情况，我需要一个可以在应用程序离线或直到应用程序解析新数据时使用的缓存。

AFAIK 每个人都会向您推荐：[https](https://github.com/steipete/SDURLCache) ://github.com/steipete/SDURLCache 。

但理论上在 iOS6 中 NSURLConnection 将缓存写入磁盘，您可以将该缓存用作离线缓存，但我仍然需要找出方法。

所以部分答案，将尝试找出更多并更新答案。:)

# html - 背景大小和位置

> ID：14487301
> 
> 赞同：0
> 
> 时间：2013-01-23T18:59:00.783
> 
> 标签：html, css

[我的页面中](http://www.tranceil.co.il/comp/index3.html)有一个联系表格，我正在尝试增加背景的大小并更改其位置无济于事。

CSS：

```
.w2_ajax_contact_form {
width: 30%;
margin: auto;
font-family: Arial;
font-size: 12px;
background: rgba(0, 0, 0, 0.8);
background-position: 0% 20%;
} 
```

我尝试了几种方法，例如：

```
background: rgba(0, 0, 0, 0.8) center center; 
```

和

```
background-position: 10px; 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:03:07.550

`background-position`旨在定位背景**图像**，而不是背景颜色。它主要用于处理精灵。我不确定您要实现什么，但我认为您可能只想在表单中添加一些填充。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:06:49.447

您无法移动颜色。它仅适用于图像。尝试增加`height`,`width`或添加某种类型`padding`的框

# ibm-midrange - 通过 ODBC 发送 SELECT 查询——如何进行传递

> ID：14487302
> 
> 赞同：1
> 
> 时间：2013-01-23T18:59:00.457
> 
> 标签：ibm-midrange, ms-access-2003, pass-through

我有以下 SQL。我已经通过 ODBC 连接到数据库 FPR500，但这需要永远，我想将其转换为直通查询。我被语法困住了，希望有人能帮忙？

```
SELECT FPR500_SFFD.POL_ID, FPR500_SFFD.CVG_NUM, FPR500_SFFD.FIA_EFF_DT
FROM   FPR500_SFFD 
INNER JOIN FPR500_SFFC 
 ON  (FPR500_SFFD.FIA_EFF_DT = FPR500_SFFC.LATST_CIA_DT) 
 AND (FPR500_SFFD.CVG_NUM    = FPR500_SFFC.CVG_NUM) AND
     (FPR500_SFFD.POL_ID     = FPR500_SFFC.POL_ID)
GROUP BY FPR500_SFFD.POL_ID, 
         FPR500_SFFD.CVG_NUM, 
         FPR500_SFFD.CFN_INTG_AUNIT_QTY,
         FPR500_SFFD.CFN_DCML_AUNIT_QTY, 
         FPR500_SFFD.FIA_EFF_DT
HAVING (((FPR500_SFFD.POL_ID)=[Pol ID])); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:07:40.273

该数据库称为 DB2 for i。以下是受支持的最旧操作系统版本 (V5R4) 的[SQL 参考。](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/index.jsp?topic=%2Fdb2%2Frbafzmst02.htm)

在没有看到错误消息的情况下，看起来 HAVING 子句可能是问题所在。您不需要所有的括号，并且主机变量用前导冒号指定。

```
HAVING FPR500_SFFD.POL_ID = :Pol_ID 
```

你真的想按数量分组吗？SELECT 子句中没有引用它们...

# subprocess - 通过 subproce.Popen 调用脚本，无需阻塞解释

> ID：14487311
> 
> 赞同：0
> 
> 时间：2013-01-23T18:59:49.977
> 
> 标签：subprocess, tornado

基本上这段代码从管道中读取并不断打印输出而不会阻塞......这是整个代码：

1）第一个脚本：

```
if __name__ == '__main__':
    for i in range(5):
        print str(i)+'\n',
        sys.stdout.flush()
        time.sleep(1) 
```

2）第二个脚本：

```
def log_worker(stdout):

    while True:
        output = non_block_read(stdout).strip()
        if output:
            print output

def non_block_read(output):
    ''' even in a thread, a normal read with block until the buffer is full '''
    fd = output.fileno()
    fl = fcntl.fcntl(fd, fcntl.F_GETFL)
    fcntl.fcntl(fd, fcntl.F_SETFL, fl | os.O_NONBLOCK)
    try:
        return output.read()
    except:
        return ''

if __name__ == '__main__':

    mysql_process = subprocess.Popen(['python','-u', 'flush.py'],  stdin=sys.stdin,
        stdout=subprocess.PIPE,
        stderr=subprocess.PIPE)

    thread = Thread(target=log_worker, args=[mysql_process.stdout])
    thread.daemon = True
    thread.start()

    mysql_process.wait()
    thread.join(timeout=1) 
```

*我想知道为什么它会这样工作：*

**1）**如果我把 Thread 完全带走，并且只在 main 中调用 log_worker 也会一一打印所有内容，但问题是它在完成后挂起而没有完成。我在某处读到这里的线程完全用于完成打印或更正确地线程在它完成打印时死亡，那么为什么它会这样工作呢？什么线程在这里以及如何？

**2）**如果我保留线程但删除 mysql_process.wait() 和 thread.join 它什么也不打印......为什么？我读到 Popen.wait 是为了终止其子进程。设置并返回 returncode 属性。这里的子进程是什么以及为什么/如何是子 O_O ？

**3）**如果我只删除 thread.join(timeout=1) 那么它完成但有错误`Exception in thread Thread-1 (most likely raised during interpreter shutdown):`。为什么 ？.join 在这里扮演什么角色。

**4）**我阅读了 non_block_read 函数中使用的函数的文档，但仍然感到困惑。好的，很明显他们采用文件描述符并将其设置为非阻塞。我感到困惑的是，我可以在哪些功能上使用所有这些功能，我的意思是我理解在文件上，但他们为什么在标准输出 O_O 上使用它？不是文件，是流~~？

我所做的所有这些都是为了在龙卷风脚本中使用 subprocess.Popen 执行脚本，并不断向客户/我自己发送输出而不会阻塞，所以如果有人能帮助我这样做，我将非常感激，因为我无法想象如何以某种方式从线程中获取此输出，以便我可以不断地将其插入 self.send 中的 torndio2 ...

```
def on_message(self, message):
#        list = subprocess.Popen([r"ls", "-l"], stdout=subprocess.PIPE)
#        list_stdout = list.communicate()[0]
        for i in range(1,10):
            time.sleep(1)
            self.send(i) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-05T11:08:29.000

使用开发版（3.2），这真的很容易

```
from tornado.web import RequestHandler,asynchronous
from tornado.process import Subprocess

class home(RequestHandler):
  @asynchrounous
  def get(self):
    seld.sp=Subprocess('date && sleep 5 && date',shell=True,stdout=Subprocess.STREAM)
    self.sp.set_exit_callback(self.next)
  def next(self,s):
    self.sp.stdout.read_until_close(self.finish)

application = ... 
```

# c++ - 链接boost库时程序无错误退出

> ID：14487315
> 
> 赞同：3
> 
> 时间：2013-01-23T19:00:00.143
> 
> 标签：c++, boost, linker, arm, shared-libraries

我在将 boost 库链接到我的交叉编译的 c++ 程序时遇到问题。我编写的代码在 Ubuntu 12.04 下与 CodeSourcery 交叉编译，用于 arm-target（Pandaboard，也是 Ubuntu 12.04）。编译没有库的简单测试程序可以正常工作，即使是带有静态库的 OpenCV 也可以正常工作。

但这里是链接 boost 1.52.0 库时的问题：

当与链接boost库（-lboost_thread -lboost_system）交叉编译时，程序编译没有错误，但在目标上执行时，什么也没有发生。

**程序没有错误地完成，就好像它从未被执行过一样。**

当与 CodeSourcery 交叉编译而不链接 boost 库时：在目标上一切正常。使用 g++ 在本地编译：一切都很好。

出于测试目的，我将代码简化为以下几行：（即使不使用计时功能也会出现错误。只是链接会有所不同）

主文件

```
#include <iostream>
using namespace std;

#include<boost/chrono.hpp>

int main(int argc, char* argv[]) {

    cout << "!!!this test worked!!!" << endl;

    return 0;
} 
```

链接器命令是（在 Eclipse 之外）：

```
arm-none-linux-gnueabi-g++ -L/home/xy/arm-none-linux-gnueabi/lib -o "testARM" ./src/main.o -lpthread -lboost_thread -lboost_system 
```

[boost-libraries 是按照本指南](http://www.cnx-software.com/2011/10/03/cross-compiling-boost-c-libraries-for-arm/)与 CodeSourcery arm-none-linux-gnueabi-g++ 交叉编译的。我将它们全部复制到目标到 /usr/lib 文件夹中，并将 /usr/lib 添加到 PATH 和 LD_LIBRARY_PATH。

我尝试使用 Eclipse 进行远程调试，结果相同：启动程序..程序以 1 终止。但什么也没发生。

它甚至不会打印错误或抱怨丢失的东西。所以到现在为止，我想不出更多我可以用谷歌搜索的东西，我还没有尝试过......

你能给我任何提示我可以尝试解决这个问题吗？

提前谢谢了！

* * *

**更新：**

使用 strace 运行我的测试程序时，日志包含以下信息：

```
    $ vi strace-testARM.log
    22:23:56.511385 execve("./testARM", ["./testARM"], [/* 17 vars */]) = 0
    22:23:56.512789 brk(0) = 0xfae000
    22:23:56.512972 uname({sys="Linux", node="panda", ...}) = 0
    22:23:56.514010 access("/etc/ld.so.nohwcap", F_OK) = -1 ENOENT（没有这样的文件或目录）
    22:23:56.514315 mmap2(NULL, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_ANONYMOUS, -1, 0) = 0xb6f9b000
    22:23:56.514498 access("/etc/ld.so.preload", R_OK) = -1 ENOENT（没有这样的文件或目录）
    22:23:56.514742 打开（“/etc/ld.so.cache”，O_RDONLY|O_CLOEXEC）= 3
    22:23:56.514986 fstat64(3, {st_mode=S_IFREG|0644, st_size=52288, ...}) = 0
    22:23:56.515353 mmap2(NULL, 52288, PROT_READ, MAP_PRIVATE, 3, 0) = 0xb6f72000
    22:23:56.515536​​ 关闭（3）= 0
    22:23:56.515688 access("/etc/ld.so.nohwcap", F_OK) = -1 ENOENT (没有这样的文件或目录)
    22:23:56.515902 打开（“/lib/arm-linux-gnueabihf/libpthread.so.0”，O_RDONLY|O_CLOEXEC）= 3
    22:23:56.516207 读取(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0(\0\1\0\0\ 0\5P\0\0004\0\0\0"..., 512) = 512
    22:23:56.516451 lseek(3, 66332, SEEK_SET) = 66332
    22:23:56.516573 读取（3，“\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0 \0\0\0\0\0\0\0\0\0\0\0\0"..., 1400) = 1400
    22:23:56.516787 lseek(3, 65924, SEEK_SET) = 65924
    22:23:56.516909 读(3, "A6\0\0\0aeabi\0\1,\0\0\0\0057-A\0\6\n\7A\10\1\t\2\n \4\22"..., 55) = 55
    22:23:56.517153 fstat64(3, {st_mode=S_IFREG|0755, st_size=100802, ...}) = 0
    22:23:56.517519 mmap2(NULL, 107024, PROT_READ|PROT_EXEC, MAP_PRIVATE|MAP_DENYWRITE, 3, 0) = 0xb6f57000
    22:23:56.517642 mprotect(0xb6f67000, 28672, PROT_NONE) = 0
    22:23:56.517794 mmap2(0xb6f6e000, 8192, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_DENYWRITE, 3, 0xf) = 0xb6f6e000
    22:23:56.517977 mmap2(0xb6f70000, 4624, PROT_READ|PROT_WRITE, MAP_PRIVATE|MAP_FIXED|MAP_ANONYMOUS, -1, 0) = 0xb6f70000
    22:23:56.518160 关闭 (3) = 0
    22:23:56.518313 access("/etc/ld.so.nohwcap", F_OK) = -1 ENOENT (没有这样的文件或目录)
    22:23:56.518557 open("/lib/arm-linux-gnueabihf/tls/v7l/neon/vfp/libboost_thread.so.1.52.0", O_RDONLY|O_CLOEXEC) = -1 ENOENT (没有这样的文件或目录)
    22:23:56.518832 stat64("/lib/arm-linux-gnueabihf/tls/v7l/neon/vfp", 0xbea34ea8) = -1 ENOENT (没有这样的文件或目录)
    22:23:56.519076 open("/lib/arm-linux-gnueabihf/tls/v7l/neon/libboost_thread.so.1.52.0", O_RDONLY|O_CLOEXEC) = -1 ENOENT (没有这样的文件
... [许多其他目录未找到文件] ...
    22:23:56.545382 stat64("/usr/lib/neon/vfp", 0xbea34ea8) = -1 ENOENT (没有这样的文件或目录)
    22:23:56.545565 open("/usr/lib/neon/libboost_thread.so.1.52.0", O_RDONLY|O_CLOEXEC) = -1 ENOENT (没有这样的文件或目录)
    22:23:56.545748 stat64("/usr/lib/neon", 0xbea34ea8) = -1 ENOENT (没有这样的文件或目录)
    22:23:56.545932 open("/usr/lib/vfp/libboost_thread.so.1.52.0", O_RDONLY|O_CLOEXEC) = -1 ENOENT (没有这样的文件或目录)
    22:23:56.546115 stat64("/usr/lib/vfp", 0xbea34ea8) = -1 ENOENT (没有这样的文件或目录)
    22:23:56.546298 打开（“/usr/lib/libboost_thread.so.1.52.0”，O_RDONLY|O_CLOEXEC）= 3
    22:23:56.546481 读取(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0(\0\1\0\0\ 0\324\331\0\0004\0\0\0"..., 512) = 512
    22:23:56.546755 lseek(3, 121020, SEEK_SET) = 121020
    22:23:56.546878 读(3, "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0 \0\0\0\0\0\0\0\0\0\0\0\0"..., 1200) = 1200
    22:23:56.547091 lseek(3, 119052, SEEK_SET) = 119052
    22:23:56.547213 读(3, "A(\0\0\0aeabi\0\1\36\0\0\0\0055TE\0\6\4\10\1\t\1\22\4 \24\1\25"..., 41) = 41
    22:23:56.547396 exit_group(1) = ?

```

* * *

**更新 2：**

我正在 Ubuntu 主机上编译我的程序，将文件传输到 Pandaboard 并按照@ShaunMarko 的建议发出以下命令：

```
`ldd testARM` =>  `not a dynamic executable`

`file testARM` => `testARM: ELF 32-bit LSB executable, ARM, version 1 (SYSV), dynamically linked (uses shared libs), for GNU/Linux 2.6.16, not stripped`

`file libboost_thread.so.1.52.0` => `libboost_thread.so.1.52.0: ELF 32-bit LSB shared object, ARM, version 1 (SYSV), dynamically linked, not stripped` 
```

添加`-v -H`到我收到的编译 g++ 表达式中：

```
... /xy/CodeSourcery/bin/../lib/gcc/arm-none-linux-gnueabi/4.7.2/../../../../arm-none-linux-gnueabi/include/boost/utility/result_of.hpp

COLLECT_GCC_OPTIONS='-O0' '-g3' '-Wall' '-c' '-fmessage-length=0' '-v' '-H' '-MMD' '-MP' '-MF' 'main.d' '-MT' 'main.d' '-o' 'main.o' '-shared-libgcc' '-march=armv5te' '-mtls-dialect=gnu' '-funwind-tables' '-D' '__CS_SOURCERYGXX_MAJ__=2012' '-D' '__CS_SOURCERYGXX_MIN__=9' '-D' '__CS_SOURCERYGXX_REV__=64'
 /xy/CodeSourcery/bin/../lib/gcc/arm-none-linux-gnueabi/4.7.2/../../../../arm-none-linux-gnueabi/bin/as -v -march=armv5te -meabi=5 -o main.o /tmp/cceTwLmn.s
GNU assembler version 2.23.51 (arm-none-linux-gnueabi) using BFD version (Sourcery CodeBench Lite 2012.09-64) 2.23.51.20120829
COMPILER_PATH=/xy/CodeSourcery/bin/../libexec/gcc/arm-none-linux-gnueabi/4.7.2/:/xy/CodeSourcery/bin/../libexec/gcc/:/xy/CodeSourcery/bin/../lib/gcc/arm-none-linux-gnueabi/4.7.2/../../../../arm-none-linux-gnueabi/bin/
LIBRARY_PATH=/xy/CodeSourcery/bin/../lib/gcc/arm-none-linux-gnueabi/4.7.2/:/xy/CodeSourcery/bin/../lib/gcc/:/xy/CodeSourcery/bin/../lib/gcc/arm-none-linux-gnueabi/4.7.2/../../../../arm-none-linux-gnueabi/lib/:/xy/CodeSourcery/bin/../arm-none-linux-gnueabi/libc/lib/:/xy/CodeSourcery/bin/../arm-none-linux-gnueabi/libc/usr/lib/
COLLECT_GCC_OPTIONS='-O0' '-g3' '-Wall' '-c' '-fmessage-length=0' '-v' '-H' '-MMD' '-MP' '-MF' 'main.d' '-MT' 'main.d' '-o' 'main.o' '-shared-libgcc' '-march=armv5te' '-mtls-dialect=gnu' '-funwind-tables' '-D' '__CS_SOURCERYGXX_MAJ__=2012' '-D' '__CS_SOURCERYGXX_MIN__=9' '-D' '__CS_SOURCERYGXX_REV__=64'

**** Build Finished **** 
```

（这是最后一部分，上面列出了大量包含的标题。xy-Path 是 CodeSourcery 安装在我的主目录中的位置）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-24T09:40:21.170

构建 ARM 应用程序的一般规则（事实上它必须适用于任何平台）

> > 您必须使用相同的 ABI 编译整个程序，并与一组兼容的库链接。

在您的情况下，最后一项看起来像`/usr/lib/libboost_thread.so.1.52.0`，并且由于它也与您的使用有关，因此请确保`libboost_thread`与您正在交叉编译的主机上的一项相匹配。

```
22:23:56.546298 open("/usr/lib/libboost_thread.so.1.52.0", O_RDONLY|O_CLOEXEC) = 3
22:23:56.546481 read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0(\0\1\0\0\0\324\331\0\0004\0\0\0"..., 512) = 512
22:23:56.546755 lseek(3, 121020, SEEK_SET) = 121020
22:23:56.546878 read(3, "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"..., 1200) = 1200
22:23:56.547091 lseek(3, 119052, SEEK_SET) = 119052
22:23:56.547213 read(3, "A(\0\0\0aeabi\0\1\36\0\0\0\0055TE\0\6\4\10\1\t\1\22\4\24\1\25"..., 41) = 41
22:23:56.547396 exit_group(1)           = ? 
```

对于`ARM`系统，您可以拥有许多库变体，例如不同的 ABI 或 VFP/NEON 支持，并且获得现成的工具链可能与您默认的目标不匹配，因为它是针对 ARM 的。

**更新**

如果您检查以前的日志

```
22:23:56.515902 open("/lib/arm-linux-gnueabihf/libpthread.so.0", O_RDONLY|O_CLOEXEC) = 3
22:23:56.516207 read(3, "\177ELF\1\1\1\0\0\0\0\0\0\0\0\0\3\0(\0\1\0\0\0\5P\0\0004\0\0\0"..., 512) = 512
22:23:56.516451 lseek(3, 66332, SEEK_SET) = 66332
22:23:56.516573 read(3, "\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0"..., 1400) = 1400
22:23:56.516787 lseek(3, 65924, SEEK_SET) = 65924
22:23:56.516909 read(3, "A6\0\0\0aeabi\0\1,\0\0\0\0057-A\0\6\n\7A\10\1\t\2\n\4\22"..., 55) = 55 
```

您看到两件事，首先您的系统`hf`来自路径。在读取的数据中，我们还看到`7-A`，这可能意味着 ARMv7-A，而`5TE`这可能意味着来自 libboost_thread 库的 ARMv5TE。您应该使用工具链中的 readelf 来获取有关 elf 文件的信息，而不是使用文件实用程序。

我会尝试编译 boost`-march=armv7-a -mfpu=vfpv3-d16 -mfloat-abi=hard`并将生成的二进制文件放在`/usr/lib/vfp.

I think reading [vfp stuff](http://wiki.debian.org/ArmHardFloatPort/VfpComparison) from Debian site can help you greatly and you should make small exercises yourself, instead of dealing with compilation process of boost to understand the situation.

# c# - 静态函数有不同的静态类变量？

> ID：14487316
> 
> 赞同：0
> 
> 时间：2013-01-23T19:00:06.197
> 
> 标签：c#, static, windows-phone

这是对上一个问题的跟进：[C# Static event null from within class](https://stackoverflow.com/questions/14448910/c-sharp-static-event-null-from-within-class)

我有这样的课：

```
public class PlaylistModel {
    public static event EventHandler PlaylistLoadError;
    public static int myInt;

    public static void LoadPlaylist() 
    {
        try 
        {    
            // do some stuff, simulate exception
            throw new InvalidOperationException();
        } 
        catch(InvalidOperationException ex) 
        {
           EventHandler handler = PlaylistLoadError;
           if(handler != null)  
           {
               PlaylistLoadError(null, null);
           }
        }
    }
} 
```

在程序的其他地方，我正在设置 PlaylistLoadError EventHandler，如下所示：

```
public class MainPage {

    public MainPage() {
        PlaylistModel.PlaylistLoadError += MyErrorHandler;
        PlaylistModel.myInt = 5;
    }

    public static void MyErrorHandler(object sender, EventArgs e)
    {
        Debug.WriteLine("There was an error");
    }
} 
```

现在，在 LoadPlaylist 内部，PlaylistLoadError 为 null 而 myInt 为 0，尽管在其他地方设置了它们。后来，当我创建 PlaylistModel 的实例时，PlaylistLoadError 和 myInt 是正确的值。所以我的问题是——一个类的静态函数是否以某种方式访问​​不同版本的静态类变量？我检查了静态变量的内存地址，它们确实不同，具体取决于我是在非静态函数还是静态函数内部。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:13:37.867

静态变量是静态的，并且在程序运行时将保持不变，除非调用某些东西来更改它。

如果您想了解发生了什么，我会将字段更改为：

```
private static int _myInt; 
```

然后添加：

```
public static int myInt
{ 
    get { return _myInt; } 
    set { _myInt = value; }
} 
```

然后在 on 添加一个断点，`set`这样你就可以知道它什么时候被改变了。

# xna - Get all pixel array inside circle

> ID：14487322
> 
> 赞同：14
> 
> 时间：2013-01-23T19:00:23.540
> 
> 标签：xna

I have this:

![enter image description here](../Images/bdb2f0c1739a2382e8e068de6f3326c5.png)

And I need to know all pixels in array inside the circle.

Thanks.

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2013-01-23T19:23:09.243

You are looking for the following set of pixels:

![Circle equation](../Images/a34c8fe87459dd4dc62c6aac0f4460c4.png)

with *r* being the radius of your circle and *(m1, m2)* the center.

In order to get these pixels iterate over all positions and store those which meet the criteria in a list:

```
List<int> indices = new List<int>();

for (int x = 0; x < width; x++)
{
    for (int y = 0; y < height; y++)
    {
        double dx = x - m1;
        double dy = y - m2;
        double distanceSquared = dx * dx + dy * dy;

        if (distanceSquared <= radiusSquared)
        {
            indices.Add(x + y * width);
        }
    }
} 
```

# ios - 无法调用另一个类中的方法

> ID：14487324
> 
> 赞同：1
> 
> 时间：2013-01-23T19:00:25.177
> 
> 标签：ios, objective-c, class, methods, message

我在调用类中使用前向声明。

**ClassTwo 中的**.h 文件****

 **```
@class ClassOne

@property(nonatomic,retain) ClassOne *class_One; 
```

**.m 文件**

```
@synthesize class_One; 
```

然后我试图在 ClassOne 中调用这个方法

```
[self.class_One callingThisMethodFromClassTwo]; 
```

另一方面，如果我在 ClassOne 中创建一个共享实例并将其用作类方法，则它可以工作

```
[[ClassOne Shared] nowItWorks]; 
```

抱歉，如果这是一个愚蠢的问题，我很新

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:05:23.653

尝试分配 class_One 实例并添加`#import "ClassOne.h"`到您顶部的标题中 `classtwo.m`

```
self.class_One= [[ClassOne alloc]init]; 
[self.class_One callingThisMethodFromClassTwo]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:07:38.503

如果`[self.class_One callingThisMethodFromClassTwo];`失败......这直接指的是

1.  class_One 不是 alloc+init-ed。

2.  或者`callingThisMethodFromClassTwo`是私有/受保护的方法。

3.  或者`callingThisMethodFromClassTwo`是一个类方法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:35:24.953

我建议你使用`Protocol/Delegate`这个问题。

你应该为你的类声明一个委托协议。Foo 类的委托协议和接口的示例可能是这样的：

@protocol MyClassDelegate

// 必需意味着如果他们想使用委托，他们// 必须实现它。@required // 你想从另一个类调用的方法。- (void)taskComplete:(BOOL)完成；@结尾

@interface MyClass : NSObject { // 我们不知道在编译时会采用什么样的类，这就是为什么这是一个 id id 委托；}

@property (nonatomic, assign) id 委托；

*   （无效）任务完成；
*   (void)doSomeTask;

假设您有一个复杂的项目并且不想在您的类之间创建大量链接，在这种情况下，像这样的委托将是您实现的最佳方式。这就像函数指针和回调一样，但通信很容易双向进行。是时候采用我们的协议并在课堂上实际使用它了。

```
myClass = [[MyClass alloc] init];
// Very important. If we don't let myClass know who the delegate
// is we'll never get the protocol methods called to us.
[myClass setDelegate:self]; 
```

在这种情况下，您可以从另一个类调用方法。我希望这能帮到您。**

# javascript - 您如何将 ruby 放入 javascript 函数、谷歌地图？

> ID：14487325
> 
> 赞同：0
> 
> 时间：2013-01-23T19:00:25.227
> 
> 标签：javascript, ruby-on-rails, google-maps

我有一个 ruby​​ on rails 应用程序，它有一个带有标记的谷歌地图，当你点击它时，它会使用 javascript 打开一个信息窗口。我想把 ruby​​ var 放在这个 javascript fn 中，它在窗口中显示来自数据库的信息。

因此，当用户单击标记时，他们会从数据库中获取动态信息，而不仅仅是来自 js fn 的通用文本。

如果有人在此之前做过，如果您能告诉我您是如何做到的，我将不胜感激，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:24:48.663

您可以使用标记将您的 javascript 直接放在 html.erb 文件中，并在 javascript 中运行嵌入的 ruby​​ 代码。请记住 escape_javascript，因为有时您的变量会被一些特殊字符（如撇号）弄乱您的脚本。

```
<script>
  alert(<%= escape_javascript @variable %>);
</script> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T20:15:51.250

Edward 使用 erb 处理 Javascript 文件的解决方案将起作用（尽管您必须记住将 .erb 添加到 JS 文件的末尾，以便 ERB 知道要处理它……即 maps.js.erb）。

问题是，这与我所理解的资产管道的理念背道而驰。Rails 特意将所有 Javascript 连接到一个文件中，以节省 HTTP 请求的开销。然而，更重要的是，浏览器会缓存这个文件，因此他们不需要在每次请求时重新获取它。如果你有一个变量会根据发出的请求更改 JS 文件，Rails 需要为每个请求重新处理 JS 文件，这很昂贵。（请注意，相同的概念也适用于 CSS）。

我发现的最佳解决方案是以某种方式将变量值放在页面中，因为这是一个需要在每个请求上动态处理的文件。通常我看到人们把它们放在隐藏的形式中，例如：

```
<%= content_tag :input, nil, :type => 'hidden', :id => "map-name-field", :'data-name' => @map.name %> 
```

我还使用的一种方法是将其附加到页面上的一个元素，该元素对该页面是唯一的，例如名称或标题：

```
<%= content_tag :h2, @map.name, :id => "map-name", :'data-name' => @map.name %> 
```

一旦它在页面上，您可以从您的 JS 函数中获取（但这里的关键是 fetcher 函数对于您的地图的所有实例都是相同的，因此不需要更改或重新处理 JS 文件）：

```
// Assuming jQuery
// For the hidden input approach:
var mapName = $('#map-name-field').value
// or for the data-attribute approach:
var mapName = $('#map-name').attr('data-name') 
```

# ssis - SSIS 派生列（如果则...否则）

> ID：14487327
> 
> 赞同：6
> 
> 时间：2013-01-23T19:00:28.440
> 
> 标签：ssis

有没有办法在 SSIS 派生列中复制以下表达式？

```
SELECT CASE
           WHEN LEN(column1) > 8
               THEN
                   column1
               ELSE
                   REPLICATE('0', 18 - LEN(column1)) + column1
           END AS column1
FROM myTable 
```

如果值的长度小于 8 个字符，我想用 0 填充 column1 的值

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-23T19:21:40.690

SSIS 表达式语言支持三元运算符`? :`

```
(LEN([column1]) > 8) ? column1 : replicate("0", (18 - LEN([column1]))) + [column1] 
```

该表达式*应该*起作用，但它不起作用，因为 REPLICATE 调用将提供元数据，说明它是 4k nvarchar 字符（限制）。如果您不希望它以这种方式工作，请发表评论，我将在连接之前修改表达式以调整复制的输出`column1`

一种更简单的方法是始终在表达式中添加 8 个前导零，然后从右侧将其切掉。

```
RIGHT(REPLICATE("0",8) + column1,8) 
```

您可能第二次需要 18，因为您的示例似乎使用了 18，但概念是相同的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-09T23:01:39.663

这是一个老问题，但我今天也有同样的问题，下面的派生列表达式对我有用。它没有专门“复制”原始问题中的 SQL 示例（通过使用“REPLICATE”），但我发现下面的内容对于使用数据流中的 SSIS 派生列填充值要简单一些，而且它很好一个简单的“If / Else”语句的示例。我用 10 个零填充，因为这就是 SQL 在原始问题中所做的。

```
(LEN(column1) > 8) ? column1 : ("0000000000" + (column1)) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-09-17T15:32:48.967

解决方案在这里：我从列下拉列表中将组作为一列，然后得出这些条件。如果组是“Cash Capex”然后是“Capex”并且其中“Internal Opex”或“External Opex”然后是“Opex”ELSE“Other”。

```
[`Group] == "Cash Capex" ? "Capex" : ([Group] =="Internal Opex" ? "Opex" :([Group] =="External Opex" ? "Opex":"Other"))` 
```

# r - 无法在 R 中打开保存的绘图

> ID：14487328
> 
> 赞同：4
> 
> 时间：2013-01-23T19:00:29.030
> 
> 标签：r, plot, save

保存为 pdf 或其他格式时，我无法打开绘图。一直收到以下错误。我正在使用 mac。

```
> plot(1:10)
> pdf('deleteIt.pdf')
> dev.off()
RStudioGD 
        2 

> sessionInfo()
R version 2.15.1 (2012-06-22)
Platform: x86_64-apple-darwin9.8.0/x86_64 (64-bit)

locale:
[1] en_US.UTF-8/en_US.UTF-8/en_US.UTF-8/C/en_US.UTF-8/en_US.UTF-8

attached base packages:
[1] stats     graphics  grDevices utils     datasets  methods   base     

other attached packages:
[1] pROC_1.5.4 plyr_1.7.1

loaded via a namespace (and not attached):
[1] tools_2.15.1 
```

我收到以下错误。也尝试过 png 和 jpeg，但没有运气..

```
The file “deleteIt.pdf” could not be opened.
It may be damaged or use a file format that Preview doesn’t recognize. 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-23T19:03:29.990

你是倒着做的。试试这个

```
pdf("deleteIt.pdf")
plot(1:10)
dev.off() 
```

启动设备。写给它。把它关掉。

* * *

[或者，正如@Spacedman](https://stackoverflow.com/users/211116/spacedman)在[评论](https://stackoverflow.com/questions/14487328/cant-open-saved-plot-in-r/14487392#comment20194700_14487392)中指出的那样，您可以使用当前绘制的任何内容创建一个 pdf，`dev.copy`如下所示：

```
plot(1:10)
dev.copy(pdf, "deleteIt.pdf")
dev.off() 
```

# sencha-touch - 在创建时传递值以查看

> ID：14487329
> 
> 赞同：1
> 
> 时间：2013-01-23T19:00:31.327
> 
> 标签：sencha-touch, sencha-touch-2

当我使用 xtype 将它添加到另一个项目中时，我试图制作一个自定义视图并传递一个值。它看起来很简单，因为我不需要使用商店或类似的东西，它只是静态值，但我无法实现它:(

我的想法是将它放在一个组件中（我的自定义组件的父级）：

```
...
items: [{
    xtype: 'myNewComponent',
    car: 'Renault'
}]
... 
```

然后在我的自定义组件中获取值：

```
Ext.define('myNewComponent', {
    extend: 'Ext.Panel',
    xtype: 'myNewComponent',
    config: {
        items: [{
            html: 'This is my car: ' + this.config.car
        }]
    }
}); 
```

我想我不明白一些事情，你能帮帮我吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:46:20.187

你需要做两件事。

**首先**，您必须在自定义组件中创建一个新配置。这样做就像将它添加到`config`类的对象中一样简单：

```
Ext.define('myNewComponent', {
    extend: 'Ext.Panel',
    xtype: 'myNewComponent',
    config: {
        car: null
    }
}); 
```

`null`如果您在创建组件时不更改它，这里只是默认值。

现在我们要使用这个新配置。您所做的将不起作用，因为范围`this.config.car`是 DOM 窗口。您将需要使用类的函数来创建项目。您可以通过使用新配置的新`updateCar`方法来实现这一点。`car`每当您更新该配置时，都会调用此方法。在您的情况下，那是您第一次创建自定义组件的时候。

```
Ext.define('myNewComponent', {
    ...

    updateCar: function(newCar) {
        this.add({
            html: 'This is my car: ' + newCar
        });
    }
}); 
```

您可以在此处了解有关配置系统如何工作的更多信息：http: //docs.sencha.com/touch/2-1/#!/guide/ [class_system](http://docs.sencha.com/touch/2-1/#!/guide/class_system)

# android - 替换标准安卓拨号器——狗追尾巴

> ID：14487330
> 
> 赞同：2
> 
> 时间：2013-01-23T19:00:31.857
> 
> 标签：android, android-intent, phone-call, telephonymanager

这个问题似乎很简单——提供你自己的应用程序来拦截拨号命令，然后自己拨号（想象一个 VoIP 应用程序，如果连接，则发出 VoIP 呼叫，如果未连接，则使用手机的蜂窝功能拨打电话）。

这个线程提供了你需要的所有信息——除了有一点小故障：

并非每个应用程序似乎都使用相同的意图。我认为 Intent.ACTION_DIAL 必须是推荐的标准选项，果然，大多数应用程序都这样做。然后是 Intent.ACTION_CALL_BUTTON，这似乎很奇怪（我的 S3 告诉我它首先没有应用程序处理此操作），最后是 Intent.ACTION_CALL_PRIVILEGED。

经过反复试验，我发现“本机”应用程序（我称之为本机通话记录和联系人应用程序本机）似乎正在使用 Intent.ACTION_CALL_PRIVILEGED，而其余的则使用 INTENT_ACTION_CALL。问题就在这里……如果你注册了这两个动作，那么你肯定可以捕捉到每一个拨号命令，但是你会用它做什么呢？您不能使用这些操作中的任何一个来触发意图，因为这只会让您陷入无限循环，没有更低级别的操作，并且 TelephonyManager 明显错过了 makeCall 方法。既然不能动态注册和注销intent过滤器，有没有办法让这只狗追尾巴呢？

# flash - 如何列出从 Chrome 扩展安装的字体

> ID：14487334
> 
> 赞同：0
> 
> 时间：2013-01-23T19:00:54.777
> 
> 标签：flash, google-chrome, fonts, google-chrome-extension, typeerror

我正在寻找一种方法来从 chrome 扩展中获取计算机上安装的字体列表。我在 chrome 中找不到像 Firefox 中的 EnumerateAllFonts({}) 这样的函数，当我尝试像在 html 页面中那样嵌入 swf 对象时，除了以下错误之外没有任何结果： Uncaught TypeError: Object # has no method ' getDeviceFonts' ...（与我假设的一些安全问题相关的错误...）

有人能给我一些建议，我将不胜感激。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T20:55:51.603

嗯，其实我找到了我想要的函数... - .-" 我没有仔细阅读文档。所以，对于那些想知道如何做的人，函数被命名为`chrome.fontSettings.getFontList(function callback)`

这是相关页面：[fontSettings 文档](http://developer.chrome.com/dev/extensions/fontSettings.html)

# toggle - 为什么这两个功能没有在点击事件上切换？

> ID：14487348
> 
> 赞同：0
> 
> 时间：2013-01-23T19:01:32.337
> 
> 标签：toggle, imagebutton, jquery

我正在尝试切换两个功能。当用户单击暂停按钮时，输入字段被禁用，标签文本变为灰色，按钮变为不同的图像。我以为我可以使用 .toggle()，但我也无法让这两个函数工作——只有第一个函数运行 ( `pauseEmailChannel();`)，而不是在切换单击时运行。[我在 SO 上](https://stackoverflow.com/questions/4911577/jquery-click-toggle-between-two-functions)找到了偶数/奇数点击检测脚本，但这并不是在点击事件上“切换”这两个函数。我的代码可能是丑陋的代码，但我仍在学习并想展示我的想法——对或错。无论如何，有人可以给我一个解决方案来解决这个问题吗？我不认为这会太难，但我被困住了。谢谢。

HTML

jQuery

```
 $(".btn_pause").click(function(){
    var count = 0;
        count++;
    //even odd click detect 
    var isEven = function(num) {
        return (num % 2 === 0) ? true : false;
    };
    // on odd clicks do this
    if (isEven(count) === false) {
        pauseEmailChannel(); 
    }
    // on even clicks do this
    else if (isEven(count) === true) {
        restoreEmailChannel(); 
    }
     });

    // when user clicks pause button - gray out/disable     
function pauseEmailChannel(){   
        $("#channel-email").css("color", "#b1b1b1");
        $("#notify-via-email").attr("disabled", true);
        $("#pause-email").removeClass("btn_pause").addClass("btn_disable-pause");
}

// when user clicks cancel button - restore default
function restoreEmailChannel(){
        $("#channel-email").css("color", "#000000");
        $("#notify-email").attr("disabled", false);
        $("#pause-email").removeClass("disable-pause").addClass("btn_pause");
        $("input[value='email']").removeClass("btn_disable-remove").addClass("btn_remove");
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:06:18.390

`count`变量被初始化并设置为每次`0`单击`.btn_pause`。您需要将变量移动到更高的范围。

例如，

```
$(".btn_pause").each(function(){
    var count = 0;
    $(this).click(function(){
        count++;
        ...
    });
}); 
```

这种方式`count`只初始化一次，并且可以在`click`事件处理程序中访问。

* * *

作为替代方式，您还可以使用：

```
$(".btn_pause").each(function(){
  var count = 0;
  $(this).click(function(){
    [restoreEmailChannel, pauseEmailChannel][count = 1 - count]();
  });
}); 
```

如果之前的构造过于抽象，那么更冗长的构造将如下所示：

```
$(".btn_pause").each(function(){
  /* Current element in the array to be executed */
  var count = 0;
  /* An array with references to Functions */
  var fn = [pauseEmailChannel, restoreEmailChannel];
  $(this).click(function(){
    /* Get Function from the array and execute it */
    fn[count]();
    /* Calculate next array element to be executed.
     * Notice this expression will make "count" loop between the values 0 and 1.
     */
    count = 1 - count;
  });
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:06:45.267

试试这个代码。它应该可以正常工作，除了当它是偶数和奇数时我可能会出错，但这应该很容易修复。

```
 $(".btn_pause").click(function(){
    var oddClick = $(this).data("oddClick");
    $(this).data("oddClick", !oddClick);
    if(oddClick) {
        pauseEmailChannel(); 
    }
    else {
        restoreEmailChannel(); 
    }
  }); 
```

# spring - 由于 ClassNotFoundException，Maven Spring 项目未执行

> ID：14487349
> 
> 赞同：0
> 
> 时间：2013-01-23T19:01:32.710
> 
> 标签：spring, maven, sts-springsourcetoolsuite

我正在编写一个 Spring/Maven 教程来测试在多个文件之间拆分 Spring bean 定义。我的问题是`mvn -X -e exec:java`显示构建失败，但在 STS 中作为 Java 应用程序运行显示正确的输出。

我的项目设置为`com.jason.basicOne`、`com.jason`groupId 和`basicOne`artifactId。STS 中唯一的编译器警告是由于未使用导入的类。

我做过的事情：

*   使用`<import />`标签引用辅助文件，并在 Spring Properties 中启用使用。

*   `mvn clean`通过和多次刷新项目`mvn package`

但`ClassNotFoundException`仍然出现`com.jason.App`。我还应该寻找哪些其他东西？

**编辑**

我发现了错误。在我的 pom.xml 中，我使用命令行`exec-maven-plugin`来启用执行。`mvn exec:java`插件定义设置为以前的项目，我从中剪切并粘贴到新项目中。不包括更新的包名称，这就是该项目通过 STS 而不是命令行执行的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:58:57.010

如果您 1\. 检查 com.jason.App 类，则您的示例编译正确。它应该改为 com.jason.basicOne.App 吗？2\. 看看你的 pom.xml 是否有正确的 spring jars。

```
<dependency>
    <groupId>org.springframework</groupId>
    <artifactId>spring-context</artifactId>
<version>3.0.3.RELEASE</version> 
</dependency> 
```

确保您的“.m2/”没有 pom.xml 引用的旧弹簧

# python - python列表和元组文字中的评估顺序

> ID：14487350
> 
> 赞同：12
> 
> 时间：2013-01-23T19:01:34.597
> 
> 标签：python

假设我们有这样的事情：

```
a = (fcn1(), fcn2())
b = [fcn1(), fcn2()] 
```

Python 解释器是在`fcn1()`之前求值`fcn2()`，还是未定义顺序？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-23T19:03:41.533

[从左到右对](http://docs.python.org/2/reference/expressions.html#evaluation-order)它们进行评估。

来自[文档](http://docs.python.org/2/reference/expressions.html#list-displays)（用于列表）：

> 当提供以逗号分隔的表达式列表时，它的元素从左到右进行计算，并按该顺序放置到列表对象中。

小测试使用`dis.dis()`：

```
In [208]: def f1():pass

In [209]: def f2():pass

In [210]: import dis

In [212]: def func():

        a = (f1(), f2())
        b  = [f1(), f2()]
       .....:     

In [213]: dis.dis(func)
  2           0 LOAD_GLOBAL              0 (f1)
              3 CALL_FUNCTION            0
              6 LOAD_GLOBAL              1 (f2)
              9 CALL_FUNCTION            0
             12 BUILD_TUPLE              2
             15 STORE_FAST               0 (a)

  3          18 LOAD_GLOBAL              0 (f1)
             21 CALL_FUNCTION            0
             24 LOAD_GLOBAL              1 (f2)
             27 CALL_FUNCTION            0
             30 BUILD_LIST               2
             33 STORE_FAST               1 (b)
             36 LOAD_CONST               0 (None)
             39 RETURN_VALUE 
```

注意：在赋值的情况下，首先评估右手边。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T19:04:39.563

表达式[从左到右](http://docs.python.org/2/reference/expressions.html#evaluation-order)求值。此链接专门处理`tuple`此案。这是另一个专门处理列表案例的[链接。](http://docs.python.org/2/reference/expressions.html#list-displays)

# html - 限制页面底部边框延伸长度

> ID：14487353
> 
> 赞同：0
> 
> 时间：2013-01-23T19:01:47.003
> 
> 标签：html, css, border

我有以下代码。Jfiddle 在[这里](http://jsfiddle.net/4Ugm4/)。正如所见，底部边框，类似于`<HR>`标签的东西延伸了页面的整个长度。

我想将边框`<h1>`和`<h2>`标签限制为页面的 30%。虽然`<h3>`标签仍然延伸到整个页面。这可以用css吗？

编辑：有一个后续问题，我将如何更改`<h3>`标签上的 css，以便在边框下大约有一行与字体大小相同的空白`<h3>`？

HTML

```
<HTML>
    <HEAD>
        <TITLE>Sample Wiki Page</TITLE>
        <link rel='stylesheet' type = 'text/css' href = 'default.css' />
    </HEAD>
    <BODY>
        <DIV id='content'>
            <h3>Main Title</h3>
            <h2>Sub Title</h2>
                <p>
                     Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi eros odio, venenatis ut suscipit eget, vestibulum id est. Vivamus aliquet lacus sit amet enim tempus in fermentum ipsum ornare. Pellentesque tincidunt orci sed sem luctus tristique. Ut a turpis ac nisi semper luctus. Nulla mattis ornare augue, vel lacinia purus porta eu. Vestibulum pulvinar justo dolor, in ultricies tellus. Nullam semper, ante at feugiat commodo, neque eros pulvinar ante, et porttitor velit orci eu magna. Duis mattis libero vitae magna lacinia tincidunt. Vivamus placerat elit a nisi ultrices elementum. Vestibulum condimentum posuere nulla, id ornare urna mattis id. Quisque ornare risus diam. Nunc malesuada leo sit amet mauris bibendum pharetra. Integer convallis orci id lorem volutpat suscipit.

                    Vestibulum ac magna libero, non condimentum neque. Integer vestibulum, quam at tempus fermentum, mi odio dictum nibh, quis venenatis velit ligula laoreet massa. Fusce lobortis augue eu ante bibendum consequat eget posuere neque. Mauris dui lorem, fringilla et auctor a, eleifend id nisi. Sed nunc tortor, blandit et malesuada quis, posuere pellentesque lorem. Nunc vehicula lectus eget tortor tempus sed pharetra diam luctus. Aenean odio leo, accumsan a vestibulum ut, tincidunt in mi. Curabitur commodo venenatis dolor, ultrices placerat nibh tempor nec. Duis eget odio mi, id imperdiet lectus. Aenean luctus bibendum arcu non egestas.
                </p>
            <h2>Code Section</h2>
            <pre>
                <xmp>
<HTML>
    <HEAD>
        <TITLE>Sample Wiki Page</TITLE>
        <link rel='stylesheet' type = 'text/css' href = 'default.css' />
    </HEAD>
    <BODY>
        <h3>Main Title</h3>
        <h2>Sub Title</h2>
             Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi eros odio, venenatis ut
             suscipit eget, vestibulum id est. Vivamus aliquet lacus sit amet enim tempus in fermentum 
             ipsum ornare. Pellentesque tincidunt orci sed sem luctus tristique. Ut a turpis ac nisi 
             semper luctus. Nulla mattis ornare augue, vel lacinia purus porta eu. Vestibulum pulvinar 
             justo dolor, in ultricies tellus. Nullam semper, ante at feugiat commodo, neque eros 
             pulvinar ante, et porttitor velit orci eu magna. Duis mattis libero vitae magna lacinia 
             tincidunt. Vivamus placerat elit a nisi ultrices elementum. Vestibulum condimentum posuere 
             nulla, id ornare urna mattis id. Quisque ornare risus diam. Nunc malesuada leo sit amet 
             mauris bibendum pharetra. Integer convallis orci id lorem volutpat suscipit.

            Vestibulum ac magna libero, non condimentum neque. Integer vestibulum, quam at tempus 
            fermentum, mi odio dictum nibh, quis venenatis velit ligula laoreet massa. Fusce lobortis 
            augue eu ante bibendum consequat eget posuere neque. Mauris dui lorem, fringilla et auctor 
            a, eleifend id nisi. Sed nunc tortor, blandit et malesuada quis, posuere pellentesque lorem
            . Nunc vehicula lectus eget tortor tempus sed pharetra diam luctus. Aenean odio leo, 
            accumsan a vestibulum ut, tincidunt in mi. Curabitur commodo venenatis dolor, ultrices 
            placerat nibh tempor nec. Duis eget odio mi, id imperdiet lectus. Aenean luctus bibendum 
            arcu non egestas.
        <h2>Code Section</h2>
        <pre>
        </pre>
    </BODY>
</HTML>
            </xmp>
            </pre>
        </DIV>
    </BODY>
</HTML> 
```

CSS

```
#content pre {
    padding: 1em;
    border: 1px dashed #2f6fab;
    color: black;
    background-color: #f9f9f9;
    white-space: pre;
    margin: 1em 0px;
    display: block;
    font-family: monospace,Courier;
    line-height: 1.1em;
    width:70%;
}

#content h3{
    font-size: 188%;
    line-height: 1.2em;
    color: black;
    background: none;
    font-weight: normal;
    margin: 0;
    overflow: hidden;
    padding-top: .5em;
    padding-bottom: .17em;
    border-bottom: 1px solid #aaa;
}
#content h1, h2 {
    color: black;
    background: none;
    font-weight: normal;
    margin: 0;
    overflow: hidden;
    padding-top: .5em;
    padding-bottom: .17em;
    border-bottom: 1px solid #aaa;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:06:27.300

你可以做这样的事情。[http://jsfiddle.net/n5qRS/1/](http://jsfiddle.net/n5qRS/1/)

```
<h1><span>Hello World</span></h1> 
```

**css**

```
h1 span {
   color: black;
   background: none;
   font-weight: normal;
   margin: 0;
   overflow: hidden;
   padding-top: .5em;
   padding-bottom: .17em;
   border-bottom: 1px solid #aaa; 
   display: block;
   width: 30%;
} 
```

至于第二个问题，在h3的底部添加一个边距，与h3的行高相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:09:40.863

您可以`width: 30%`用于第一个问题，也可以`margin-bottom: 1.2em`用于第二个问题。

这是你的[小提琴](http://jsfiddle.net/2JLFr/)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:14:58.877

很奇怪，你将你`h3`作为主标题和`h2`副标题（这与它“应该”的方式相反）。[这个小提琴](http://jsfiddle.net/4Ugm4/2/)使用伪元素来获取边框。

```
#content h1:after, h2:after {
    content: '';
    display: block;
    width: 30%;
    height: 0;
    margin: 0 auto;
    border-bottom: 1px solid #aaa;   
} 
```

被`margin-bottom`添加到该小提琴中以`h3`供您跟进。

# android - Android Chrome - 链接关闭时停用放大

> ID：14487356
> 
> 赞同：5
> 
> 时间：2013-01-23T19:01:59.950
> 
> 标签：android, google-chrome, meta-tags, magnification

使用 Android 4.1.1 Google Chrome，当我尝试单击靠近在一起的小链接时，这些链接的放大视图会弹出。

有没有办法在设置或 CSS / 元标记中禁用它？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-04T10:34:03.280

当您可以控制元标记时，[此 SO 问题](https://stackoverflow.com/questions/12972106/how-to-prevent-google-chrome-android-browser-to-display-the-magnifier-when-users?answertab=oldest#tab-top)的答案将起作用。但是，它也会删除放大/缩小功能，并更改初始缩放级别，因此可能不是您想要的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-28T16:47:59.493

我还没有验证它，但是[这篇文章](http://www.chromestory.com/chrome-for-android-a-mini-user-guide/)声称有一个名为**Enable link preview**的设置：

> 启用链接预览：在不清楚您按下的链接时放大链接。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-09-04T21:10:00.180

试试这个库 有时它与双击手势有关，这与分配给 html 元素的点击事件冲突，在许多情况下，这种用点击替换点击会有所帮助。

[https://github.com/ftlabs/fastclick](https://github.com/ftlabs/fastclick)

# liferay - Liferay CSRF 保护与@ResourceMapping

> ID：14487362
> 
> 赞同：1
> 
> 时间：2013-01-23T19:02:18.590
> 
> 标签：liferay, csrf, liferay-6, csrf-protection

我需要将 CSRF 令牌 (p_auth) 添加到我的 Liferay (ver.6.1.1) 门户项目中。Liferay 提供了这种开箱即用的能力`auth.token.check.enabled=true`

但它只对标有 @ActionMapping 注解[[source]](http://www.liferay.com/documentation/liferay-portal/6.1/user-guide/-/ai/authentication-token)的请求执行此操作。那时，因为我需要对 @ResourceMapping 进行 CSRF 保护，因为我有很多表单提交的 ajax 请求。

谢谢你的建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-08T05:39:47.537

[您可以在http://www.liferay.com/community/forums/-/message_boards/message/26782849](http://www.liferay.com/community/forums/-/message_boards/message/26782849)找到实施保护的方法

# python - 绘图方法是否需要返回？

> ID：14487363
> 
> 赞同：2
> 
> 时间：2013-01-23T19:02:21.563
> 
> 标签：python, matplotlib, plot

我有一堂课，里面有一些方法来建立一些情节。我尝试在一个图形上显示不同的图。图的属性（标题、图例...）总是被最后一个图覆盖。我预计如果我`return`在我的方法中有行为会与没有它的方法不同，但这似乎不是真的。

我想弄清楚有什么不同`return`。说明我的问题的代码是：

```
import matplotlib.pyplot as plt
import numpy as np

class myClass1(object):
    def __init__(self):
        self.x = np.random.random(100)
        self.y = np.random.random(100)

    def plotNReturn1(self):
        plt.plot(self.x,self.y,'-*',label='randNxy')
        plt.title('Plot No Return1')
        plt.legend(numpoints = 1)
    def plotNReturn2(self):
        plt.plot(self.y,self.x,'-x',label='randNzw')
        plt.title('Plot No Return2')
        plt.legend(numpoints = 2)

    def plotWReturn1(self):
        fig = plt.plot(self.x,self.y,'-*',label='randWxy')
        fig = plt.title('Plot With Return1')
        fig = plt.legend(numpoints = 1)
        return fig
    def plotWReturn2(self):
        fig = plt.plot(self.y,self.x,'-x',label='randWzw')
        fig = plt.title('Plot With Return2')
        plt.legend(numpoints = 3)
        return fig

if __name__=='__main__':
    f = myClass1()
    p = plt.figure()

    p1 = p.add_subplot(122)
    p1 = f.plotWReturn1()
    p1 = f.plotWReturn2()
    print 'method with return: %s: ' % type(p1)

    p2 = p.add_subplot(121)
    p2 = f.plotNReturn1()
    p2 = f.plotNReturn2()
    print 'method without return: %s: ' % type(p2)

    plt.show() 
```

我注意到的唯一区别是输出的类型，但我不知道它在实践中意味着什么。

```
 method with return: <class 'matplotlib.text.Text'>: 
 method without return: <type 'NoneType'>: 
```

它只是关于“pythonic”练习还是有任何实用的风格可以使用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:12:16.193

如果Python 函数`None`没有 return 语句，则返回。否则，他们会返回您告诉他们的任何内容。

就约定而言，如果一个函数对传递给它的参数进行操作，那么让该函数返回是礼貌的`None`。这样，用户就知道参数被弄乱了。（这方面的一个例子是`list.append`——它修改列表并返回`None`）。

```
a = [1,2,3]
print a.append(4) #None
print a #[1, 2, 3, 4] 
```

如果你的函数不会弄乱传递给它的东西，那么让它返回一些东西很有用：

```
def square(x):
    return x*x 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T19:23:37.077

返回一个值只对调用者有直接影响，在这种情况下是你的`__main__`块。如果您不需要重用由函数计算的某些值，在您分配给 p1 或 p2 的情况下，返回对行为没有任何影响。

此外，一系列作业，如

```
p1 = call1()
p1 = call2()
p1 = call3() 
```

是不良代码风格的指标，因为只有分配给 p1 的最后一个值在它们之后才可用。

无论如何，我认为您想在子图上进行绘图，而不是在主图上，如下所示：

```
import matplotlib.pyplot as plt
import numpy as np

class myClass1(object):
    def __init__(self):
        self.x = np.random.random(100)
        self.y = np.random.random(100)

    def plotNReturn1(self, subplot):
        subplot.plot(self.x,self.y,'-*',label='randNxy')
        subplot.set_title('Plot No Return1')
        subplot.legend(numpoints = 1)
    def plotNReturn2(self, subplot):
        subplot.plot(self.y,self.x,'-x',label='randNzw')
        subplot.set_title('Plot No Return2')
        subplot.legend(numpoints = 2)

if __name__=='__main__':
    f = myClass1()
    p = plt.figure()

    p1 = p.add_subplot(122)
    f.plotNReturn2(p1)

    p2 = p.add_subplot(121)
    f.plotNReturn2(p2)

    plt.show() 
```

在这里，subplot 被传递给每个函数，因此应该在其上绘制数据，而不是替换您之前绘制的内容。

# php - 如何使用 PHP 在文本文件中搜索一定数量的字母？

> ID：14487367
> 
> 赞同：1
> 
> 时间：2013-01-23T19:02:29.660
> 
> 标签：php, file, search

我有一个大文本文件，其中包含很多人的姓名、位置和出生日期。我需要根据字符大小查找名称。我怎样才能用 PHP 做到这一点？

在文本文件中，数据的组织方式如下：

```
 Name-Location                                 ID                   DOB
    Bob-LA                                        110                  12/01/1987
    Lia-CA                                        111                  11/09/1984
    Neil-LA                                       112                  17/10/1982
    Emon-CA                                       113                  07/12/1991
    Elita-CA                                      113                  13/06/1983
    Ron-CA                                        114                  16/02/1979
    and so on 
```

现在我想搜索具有特定角色名称和相同位置的人（比如我希望找到所有名字有 4 个字母并且来自 CA [Emon-CA] 的人）。我怎样才能做到这一点？我通常可以使用 PHP 搜索文件，我知道我要查找的字符串。但在这里我实际上不知道如何设置条件来显示我想要的结果。有人可以帮帮我吗？提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:39:57.283

你可以试试

```
$filename = "log.txt";

foreach ( new TextFileFilterIterator($filename) as $line ) {
    list($name, $location, $id, $dob) = $line;
    if (strlen($name) == 4 && $location == "CA") {
        echo implode(",", $line), PHP_EOL;
    }
} 
```

输出

```
Emon,CA,113,07/12/1991 
```

使用的类

```
class TextFileFilterIterator extends ArrayIterator {
    private $filter;

    function __construct($filename) {
        parent::__construct(array_filter(array_map("trim", file($filename))));
    }

    public function current() {
        $c = array_filter(explode("   ", parent::current()));
        list($n, $l) = explode("-", array_shift($c));
        array_unshift($c, $n, $l);
        return array_map("trim", $c);
    }

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:15:48.790

我建议使用正则表达式，如下所示：

```
// assume $text contains the contents of your text file
$namelength = 4; // change this as needed
$location = 'CA'; // again, change as needed 
```

如果你只想计算结果

```
$count = preg_match_all('|^\s*([\w]{'.$namelength.'})-'.$location.'\s*(\d+)\s*(\d{2}/\d{2}/\d{4})$|',$text,$matches); 
```

否则，如果你想对每场比赛做点什么：

```
if(preg_match_all('|^\s*([\w]{'.$namelength.'})-'.$location.'\s*(\d+)\s*(\d{2}/\d{2}/\d{4})$|',$text,$matches)){
    foreach($matches as $match){
        $name = $match[1];
        $id = $match[3];
        $dob = $match[4];
        // Do something with each name.
    }
} 
```

# java - android图像裁剪和壁纸设置页面

> ID：14487371
> 
> 赞同：0
> 
> 时间：2013-01-23T19:02:38.803
> 
> 标签：java, android, live-wallpaper

我想实现动态壁纸，用户可以在手机桌面上设置自己的照片。

现在我已经成功实现了用户可以从 android 图库或相机本身裁剪任何照片的逻辑。

在动态壁纸设置页面上，我想实现裁剪的照片预览。为此，我实现了 SelectImagePreference

```
public class SelectImagePreference extends Preference {

    public SelectImagePreference(Context context, AttributeSet attributeSet) {
        this(context, attributeSet, 0);
    }

    public SelectImagePreference(Context context, AttributeSet attributeSet, int paramInt) {
        super(context, attributeSet, paramInt);
        setLayoutResource(R.layout.select_image_preference);
    }

} 
```

带布局

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@android:attr/theme"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:gravity="center_vertical"
    android:minHeight="?android:listPreferredItemHeight"
    android:paddingRight="?android:scrollbarSize" >

    <ImageView
            android:id="@+id/picture"
            android:layout_width="200px"
            android:layout_height="250px"
            android:layout_margin="5dp"
            android:background="@drawable/pic_border"
            android:contentDescription="@string/picture" />    

</LinearLayout> 
```

在 onActivityResult 方法中的 WallpaperSettings 活动中，我试图将返回的位图设置为我的 ImageView

```
@Override
    protected void onActivityResult(int requestCode, int resultCode, Intent data) {

        if (resultCode != RESULT_OK) {
            return;
        } else if (requestCode == PICK_CROP) {
            try {
                Bundle extras = data.getExtras();
            Bitmap croppedPicture = extras.getParcelable("data");

            File saveFilePath = FileUtils.createNewFile(this, FOLDER, FileUtils.getUniqueFileName(CROPPED_IMAGE_PREFIX, CROPPED_IMAGE_EXTENSION));
            FileOutputStream out = new FileOutputStream(saveFilePath);
            croppedPicture.compress(Bitmap.CompressFormat.JPEG, 100, out);

            saveCroppedImageUrl(saveFilePath.getAbsolutePath());

            ImageView pictureView = (ImageView) findViewById(R.id.picture);
            pictureView.setImageBitmap(croppedPicture);

        } catch (Exception e) {
                e.printStackTrace();
            }

        } 
```

在我的三星 Note 2 预览图上可能显示 1 次从 ~10。

我确定磁盘上存在图片并且位图不为空。如何解决这个问题？谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-27T18:13:47.690

看看这个壁纸幻灯片源代码：

[安卓壁纸幻灯片](http://code.google.com/p/android-wallpaper-slideshow/)

# html - HTML5 - 控制缓存过期日期

> ID：14487373
> 
> 赞同：1
> 
> 时间：2013-01-23T19:02:40.200
> 
> 标签：html, caching

我终于设法让 HTML5 缓存工作，但我找不到任何解决方案如何控制给定元素的缓存时间。Google Page Speed 显示缓存的元素应该有过期日期。

如果您能提供有关该问题的任何提示，我将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-07-08T20:34:00.213

来自[http://www.w3.org/TR/html5/browsers.html#offline](http://www.w3.org/TR/html5/browsers.html#offline)

> 5.7.7 过期的应用程序缓存
> 
> 作为一般规则，用户代理不应使应用程序缓存过期，除非用户提出请求，或者在长时间未使用之后。
> 
> 应用程序缓存和 cookie 在隐私方面具有相似的含义（例如，如果站点在提供缓存时可以识别用户，它可以在缓存中存储可用于 cookie 复活的数据）。因此，鼓励实施者以与 HTTP cookie 相关的方式公开应用程序缓存，允许缓存与 cookie 和其他特定于源的数据一起被清除。
> 
> 例如，用户代理可以具有“删除特定于站点的数据”功能，该功能可以一次从源中清除所有 cookie、应用程序缓存、本地存储、数据库等。

关于**Google Page Speed**警告，它很可能是在**SERVER 端。**

你应该看看你的服务器配置文件，或者你的 .htaccess 文件。

相关：[https ://stackoverflow.com/search?q=html5+cache+control](https://stackoverflow.com/search?q=html5+cache+control)

并来自：[HTML 5 Cache Manifest Vs。Etags、Expires 或缓存控制标头](https://stackoverflow.com/questions/3956455/html-5-cache-manifest-vs-etags-expires-or-cache-control-header)

> 以下是一些可以帮助您入门的资源：
> 
> *   [http://www.html5rocks.com/en/tutorials/appcache/beginner/](http://www.html5rocks.com/en/tutorials/appcache/beginner/) 使用应用程序缓存的初学者指南
> *   [https://developer.mozilla.org/en-US/docs/HTML/Using_the_application_cache](https://developer.mozilla.org/en-US/docs/HTML/Using_the_application_cache) 使用应用缓存
> *   [http://en.wikipedia.org/wiki/Cache_manifest_in_HTML5](http://en.wikipedia.org/wiki/Cache_manifest_in_HTML5) HTML5 中的缓存清单
> *   [http://www.w3.org/TR/offline-webapps/](http://www.w3.org/TR/offline-webapps/) 离线网络应用程序
> *   [http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html](http://www.whatwg.org/specs/web-apps/current-work/multipage/offline.html) 离线网络应用

# jquery - 计算器：从单个输入中获取总和

> ID：14487374
> 
> 赞同：0
> 
> 时间：2013-01-23T19:02:40.737
> 
> 标签：jquery, calculator, jquery-calculation

我目前正在用 jQuery 构建我的第一个计算器，但输入中的值的总和存在一些问题。我不会使用多个输入，因为我想让它简单易用。下面的代码打印出来`NaN`，我不明白为什么。

```
$('body').on('click', '#method-getsum', function() {
    var sum = 0;
    var string = $('input[name="fieldtext-calculate"]').val();

    if(string.length != 0) {
        sum += Number(string);
    }

    alert(sum);
}); 
```

我错过了什么吗？你可以在这里看到这一切：http: [//jsfiddle.net/edgren/QTjWR/](http://jsfiddle.net/edgren/QTjWR/)（这个演示包含正确的`eval`函数解决方案（我的计算器不是真正的项目。只是“玩”项目））

提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:05:57.020

当您输入类似`1+2`的内容时，您的代码将调用`Number("1+2")`. 这是不正确的，因为`Number()`期望单个数字（而不是加法）作为其参数。它不会为您执行操作解析和解释，您必须自己编写代码。

如果它只是一个玩具项目，请使用`eval`而不是`Number`（避免`eval`在实际项目中，它会产生安全问题）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:04:57.693

可能是您使用关键字作为变量名。尝试将您的代码更改为：

```
var fieldText = $('input[name="fieldtext-calculate"]').val();

if(fieldText.length != 0) {
    sum += Number(fieldText );
} 
```

**编辑** 没关系，返回的值是`$('input[name="fieldtext-calculate"]').val();`字符串'7 + 8 + 9'。尝试通过拆分`+`符号来获得不同的值，以将数字放入数组中，然后循环遍历数组。

# asp.net - http如何将文件提交到服务器以及服务器如何检索它？

> ID：14487378
> 
> 赞同：1
> 
> 时间：2013-01-23T19:02:54.093
> 
> 标签：asp.net, html, http

我想了解文件如何通过http协议上传到服务器的过程？服务器端如何检索它？有人可以给我一些与此相关的链接或详细信息吗？搜索了很多，但找不到任何细节？

# r - 删除满足 R 中条件的矩阵部分

> ID：14487381
> 
> 赞同：0
> 
> 时间：2013-01-23T19:03:04.433
> 
> 标签：r

我想使用以下标准从大矩阵中删除行：

应删除第二列中包含 100 的任何行。

如何才能做到这一点？我知道如何选择这些行，但我不确定如何使用规则删除它们。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T19:06:56.903

```
R > mat = matrix(c(1,2,3,100,200,300), 3,2)
R > mat
     [,1] [,2]
[1,]    1  100
[2,]    2  200
[3,]    3  300
R > (index = mat[,2] == 100)
[1]  TRUE FALSE FALSE
R > mat[index, ]
[1]   1 100
R > mat[!index, ]
     [,1] [,2]
[1,]    2  200
[2,]    3  300 
```

以前我对索引与另一种方法感到困惑`which`，这里是解决方案`which`：

```
R > (index2 = which(mat[,2] == 100))
[1] 1
R > mat[-index2, ]
     [,1] [,2]
[1,]    2  200
[2,]    3  300 
```

注意这些索引（`!`和`-`）的不同用途。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:17:43.193

这是我在 Matlab 中使用 matrix 的方法`A`。

**选项1**

```
for (i=size(A,1):-1:0)
    if (A(i,2)==100)
        A(i,:)=[];
    end
end 
```

这会循环遍历行（从底部开始），并将第二个元素中具有 100 的任何行设置为空集，从而有效地将其删除。

也许您可以将其转换为 r，或者它可能会帮助遇到此问题的其他人。

**选项 2**

```
logicalIndex=(A(:,2)==100);
A(logicalIndex,:)=[]; 
```

这首先在第二列中找到 100 行，然后将它们全部删除。

# ios - UITableView - 初始加载时未着色的单元格？

> ID：14487382
> 
> 赞同：1
> 
> 时间：2013-01-23T19:03:05.227
> 
> 标签：ios, objective-c

我正在实施`UITableViewDelegate`并`UITableViewDataSource`在我的 VC 中。

我有这个代码：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:
    (NSIndexPath *) indexPath {
    // do stuff 
    if(condition){
        cell.textLabel.backgroundColor = [UIColor redColor];
    }
    else {
        cell.textLabel.backgroundColor = [UIColor blackColor];
    }
} 
```

很标准的东西。我遇到的问题是第一组可见单元格没有着色。如果我滚动到不可见的单元格，我会得到正确颜色的单元格。如果我向后滚动，我的单元格是彩色的。

我知道单元格是根据需要“创建”和“销毁”的，这解释了其中的一些原因，我只是不明白为什么`cellForRowAtIndexPath`，在我看到任何东西之前就被解雇了，**并且**我的着色条件被击中，导致......没有着色。

一种解决方法是在调用表格视图后遍历可见单元格`reloadData`，我只是希望有一种更简单的方法。

丹麦人

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:06:54.003

单元格着色需要在`tableView:willDisplayCell:forRowAtIndexPath:`委托方法中完成，而不是在`tableView:cellForRowAtIndexPath:`方法中。

从方法中删除任何单元格着色逻辑`tableView:cellForRowAtIndexPath:`并将其移至`tableView:willDisplayCell:forRowAtIndexPath:`方法。

# python - SQLAlchemy：树节点中的递归混合属性

> ID：14487386
> 
> 赞同：2
> 
> 时间：2013-01-23T19:03:08.337
> 
> 标签：python, tree, sqlalchemy, hybrid, self-reference

我有以下自引用（树）节点，并希望通过计算的属性`uuid_path`和过滤/排序`name_path`：

```
class Node (db.Model):
    id = db.Column (db.Integer, db.Sequence ('node_id_seq'), primary_key=True)

    ###########################################################################

    root_id = db.Column (db.Integer, db.ForeignKey (id, ondelete='CASCADE'),
        index=True)

    nodes = db.relationship ('Node',
        cascade='all, delete-orphan', lazy='dynamic',
        primaryjoin='Node.id==Node.root_id',
        backref=db.backref ('root', remote_side=id))

    ###########################################################################

    _uuid = db.Column (db.String (36), nullable=False, index=True, unique=True,
        name = 'uuid')
    _name = db.Column (db.Unicode (256), nullable=False, index=True,
        name = 'name')

    ###########################################################################

    @hybrid_property
    def uuid (self):
        return self._uuid

    @hybrid_property
    def name (self):
        return self._name
    @name.setter
    def name (self, value):
        self._name = value

    ###########################################################################

    def __init__ (self, name, root, mime=None, uuid=None):

        self.root = root
        self._uuid = uuid if uuid else str (uuid_random ())
        self._name = unicode (name) if name is not None else None

    def __repr__ (self):

        return u'<Node@%x: %s>' % (self.id if self.id else 0, self._name)

    ###########################################################################

    @hybrid_property
    def uuid_path (self):
        node, path = self, []
        while node:

            path.insert (0, node.uuid)
            node = node.root

        return os.path.sep.join (path)

    @hybrid_property
    def name_path (self):
        node, path = self, []
        while node:

            path.insert (0, node.name)
            node = node.root

        return os.path.sep.join (path)

    ########################################################################### 
```

如果我得到一个`Node`实例`subnode`并执行 eg`subnode.name_path`然后我得到正确的 eg `root/subnode`。但是，如果我尝试使用`Node.name_path`（用于过滤/排序），那么 SQLAlchemy 会抱怨：

```
Neither 'InstrumentedAttribute' object nor 'Comparator' object associated with Node.root has an attribute 'name'. 
```

我很确定我必须介绍以下内容：

```
class Node (db.Model):

    @hybrid_property
    def name_path (self):
        node, path = self, []
        while node:

            path.insert (0, node.name)
            node = node.root

        return os.path.sep.join (path)

    @name_path.expression
    def name_path (cls):
        ## Recursive SQL expression?? 
```

但是我很难为`@name_path.expression`（或`@uuid_path.expression`）得到正确的定义；它应该以某种方式指示 SQL 将路径从根节点传递到相关节点。

我不明白为什么这是必需的，因为我告诉 SQLAlchemy 迭代计算路径值。谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T15:54:48.527

好吧，在使用 PostgreSQL 和 SQLAlchemy 进行调整之后，我想我有一个解决方案：（1）首先，我将查询编写为 SQL 中的函数，（2）其次提供正确的 SQLAlchemy 胶水：

SQL 部分使用`WITH RECURSIVE`CTE：

```
CREATE OR REPLACE FUNCTION name_path(node)
  RETURNS text AS
$BODY$

WITH RECURSIVE graph (id, root_id, id_path, name_path) AS (
    SELECT n.id, n.root_id, ARRAY[n.id], ARRAY[n.name]
    FROM node n
UNION
    SELECT n.id, n.root_id, id_path||ARRAY[n.id], name_path||ARRAY[n.name]
    FROM node n, graph g
    WHERE n.root_id = g.id)

SELECT array_to_string (g.name_path, '/','.*')
FROM graph g
WHERE (g.id_path[1] = $1.base_id OR g.root_id IS NULL)
AND (g.id = $1.id)

$BODY$
  LANGUAGE sql STABLE
  COST 100;
ALTER FUNCTION name_path(node)
  OWNER TO webed; 
```

和 SQLAlchemy 方面看起来像这样：

```
class NamePathColumn (ColumnClause):
    pass

@compiles (NamePathColumn)
def compile_name_path_column (element, compiler, **kwargs):
    return 'node.name_path' ## something missing? 
```

和

```
class Node (db.Model):

    def get_path (self, field):

        @cache.version (key=[self.uuid, 'path', field])
        def cached_path (self, field):

            if self.root:
                return self.root.get_path (field) + [getattr (self, field)]
            else:
                return [getattr (self, field)]

        if field == 'uuid':
            return cached_path (self, field)
        else:
            return cached_path.uncached (self, field)

    @hybrid_property
    def name_path (self):
        return os.path.sep.join (self.get_path (field='name'))

    @name_path.expression
    def name_path (cls):
        return NamePathColumn (cls) 
```

`Node.name_path`如果我在纯 Python 端，我会避免访问数据库，但如果我愿意，它可能会更快。唯一我仍然不太确定的是`compile_name_path_column`我没有考虑任何`element, compiler, **kwargs`参数，这让我有点怀疑。

在用 SA 和 PG 修补了大约 1.5 天后，我刚刚做好了这个，所以很有可能还有改进的空间。我非常感谢这种方法的任何评论。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T19:02:30.183

[为了完整起见，我从他的https://gist.github.com/4625858](https://gist.github.com/4625858)中加入了 zzzeek 的反馈：

```
from sqlalchemy.sql.expression import ColumnElement ## !!
from sqlalchemy.ext.hybrid import hybrid_property
from sqlalchemy.ext.compiler import compiles
from sqlalchemy import inspect

class UuidPathColumn (ColumnElement):
    def __init__(self, entity):
        insp = inspect (entity)
        self.entity = insp.selectable

@compiles (UuidPathColumn)
def compile_uuid_path_column (element, compiler, **kwargs):
    return "%s.uuid_path" % compiler.process (element.entity, ashint=True)

class NamePathColumn (ColumnElement):
    def __init__(self, entity):
        insp = inspect (entity)
        self.entity = insp.selectable

@compiles (NamePathColumn)
def compile_name_path_column (element, compiler, **kwargs):
    return "%s.name_path" % compiler.process (element.entity, ashint=True) 
```

重要的是使用`ColumnElement`（而不是`ColumnClause`）让它起作用；相关代码可以在[node.py](https://github.com/hsk81/webed/blob/86b8cedfd08467a37cab40485a4398d3b8f5a703/webed/models/node.py)、[name_path](https://github.com/hsk81/webed/blob/393dfefcc8090ed22b1aa4d057ed15e0eb6de72c/webed/models/sql/name_path.sql)和[uuid_path 找到](https://github.com/hsk81/webed/blob/393dfefcc8090ed22b1aa4d057ed15e0eb6de72c/webed/models/sql/uuid_path.sql)。这些东西已经用 SQLAlchemy 0.8 和 PostgreSQL 9.2 实现了。

# android - Maps api android key for places api 不起作用

> ID：14487387
> 
> 赞同：0
> 
> 时间：2013-01-23T19:03:10.570
> 
> 标签：android, google-maps, google-places-api

Google maps api for android v2 使用我使用 sha1 创建的密钥，但是当我将此密钥放在 google 地方 api 搜索字符串中时，我的结果是 ACCESS DENIED。

同样在 google apis 控制台报告中，我看到我被要求使用 places api。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:18:42.823

不，两个密钥都不同，请[在此处获取您的场所 API 密钥](https://code.google.com/apis/console)

# visual-studio-2012 - Visual Studio 错误列表：忽略 JavaScript 引用

> ID：14487388
> 
> 赞同：5
> 
> 时间：2013-01-23T19:03:11.063
> 
> 标签：visual-studio-2012, typescript, chutzpah, error-list

可能有三个人在做我正在做的事情，但这里有：

*   视觉工作室 2012
*   最新的网络要点
*   打字稿项目
*   AngularJS 框架
*   使用 Jasmine 运行 Chutzpah 测试

在为 Chutzpah 创建测试时，我不仅需要添加对我的打字稿文件的引用，还需要添加对我正在使用的 javascript 库的引用。例如：

```
// Typescript References (for tsc)
/// <reference path="../ref/angular-1.0.d.ts" />

// JavaScript references (for chutzpah)
/// <reference path="../lib/angular.min.js" />

// TS references for what we're actually testing...
/// <reference path="../src/modules.ts" /> 
```

使用此设置，我的打字稿编写的 jasmine 测试运行良好。然而，angular.min.js 文件正在用数百条投诉填满我的错误列表。这使得无法找到打字稿语法检查器报告的错误。

如果我删除对 angular.min.js 的引用，那么 Chutzpah 将无法运行，因为我的代码依赖于库。

有没有办法强制 Visual Studio 忽略特定 JavaScript 文件引用中的错误？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-28T16:59:37.817

这个问题现在在[Chutzpah 2.4](http://matthewmanela.com/blog/chutzpah-2-4-code-coverage-is-a-go/)中得到解决。

> # Chutzpah 具体参考
> 
> 随着几个版本前添加了 TypeScript 支持，一些人报告了在 VS 中将 Chutzpah 与 TypeScript 插件一起使用时出现的问题。出现问题是因为 TypeScript 和 Chutzpah 都将注释用于不同的目的。为了解决这个问题，Chutzpah 现在支持两种引用依赖文件的方法。
> 
> 1.  现有的通用方式`/// <reference path="foo.js" />`
>     
>     
> 2.  新的 Chutzpah 特定方式`/// <chutzpah_reference path="foo.js" />`
>     
>     
> 
> 使用后者将使 Chutzpah 了解您的依赖关系图，并且不应混淆 TypeScript 编译器。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-01T16:26:56.433

这是 Chutzpah 的一个错误，开发人员现在似乎已经意识到：

[http://chutzpah.codeplex.com/discussions/404083#post1008911](http://chutzpah.codeplex.com/discussions/404083#post1008911)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-07T14:44:19.680

您在这里遇到的问题是您包含一个 .js 文件作为参考。
您应该只使用 .ts 文件作为参考。

包含 .js 文件会导致 TypeScript 将其视为 typescript 文件，因此会出现错误。
查看 DefinetelyTyped 并将 angular.min.js 切换到 Angular.d.ts 文件以允许您的 TypeScript 编译通过。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-10-21T13:50:44.827

我遇到了同样的问题，茉莉花测试需要 /// 注释才能运行。就我而言，它们是必需的，因为我正在使用 Resharper 并且希望能够利用他们的 javascript 测试运行程序。

[该解决方案（尽管并不理想）基于http://typescript.codeplex.com/workitem/466](http://typescript.codeplex.com/workitem/466)上的讨论。从 v9.1.1 typescript 开始，编译器会忽略在“=”之后包含空格的引用。所以，而不是使用

```
/// <reference path="~/somefile.js"/> 
```

你改用这个：

```
/// <reference path= "~/somefile.js"/> 
```

注意：这可能会在未来的 Typescript 版本中中断，但希望到那时，该语言将支持一种方法来包含对编译器忽略的 javascript 文件的引用。

# java - 从输入流读取时缺少第一个字符

> ID：14487391
> 
> 赞同：1
> 
> 时间：2013-01-23T19:03:21.973
> 
> 标签：java, inputstream

我不明白为什么以下代码似乎跳过了第一个输入字符。

```
import java.io.*;
import java.util.Arrays;

public class Input
{
    public static void main (String args[])
    {
        try {
            echo(System.in);
        }
        catch (IOException e) {
            e.printStackTrace();
        }
    }

    static void echo(InputStream stream) throws IOException
    {
        byte[] input = new byte[10];

        char[] inputChar = new char[10];
        int current;
        while ((current = stream.read()) > 0){
            stream.read(input);

            int i = 0;
            while (input[i] != 0) {
                inputChar[i] = (char)input[i];
                if (i < 9) {
                    i++;
                }
                else {
                    break;
                }
            }   
            System.out.println(Arrays.toString(inputChar));
        }
    }
} 
```

如果我将输入输入为“1234567890”，我得到的输出是“[2, 3, 4, 5, 6, 7, 8, 9, 0,]” inputChar 中的最后一个字符似乎是空白的。但是，如果它没有将任何字节读入 input[9]，它应该是空字符（ASCII 0）。如果我输入长度小于 10 个字符的输入，我会在 inputChar 中的剩余位置得到空字符。所以我不确定这里发生了什么。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T19:05:05.787

while ((current = stream.read()) > 0){

您在这里进行了第一次阅读，您没有使用它，但它是一个实际阅读，它将推进您的流中的“位置”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:58:22.030

循环控制中使用的 stream.read() 读取第一个字符。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-03-09T11:54:59.397

我用 do while loop 而不是 while loop 解决了这个问题。

这是我的完整代码：

> ```
>  File f = new File("emp.doc");
>     FileInputStream fi = new FileInputStream(f);
>     do {
>         System.out.println("Character is ; "+ (char)fi.read());
>     }while(fi.read() != -1); 
> ```

# audio - 如何使用 ffmpeg 录制音频流？

> ID：14487393
> 
> 赞同：1
> 
> 时间：2013-01-23T19:03:35.003
> 
> 标签：audio, video, ffmpeg, webcam, recording

我在使用 ffmpeg 时遇到问题：当我尝试从我的网络摄像头录制视频+音频时，结果我只得到了视频流，根本没有音频。我尝试了不同的编解码器，但什么也没有。也许有人可以给我建议？

```
ffmpeg -f dshow -i video="Logitech HD Webcam C270" -r 25 -s 800x600 -acodec libmp3lame -vcodec mpeg4 -b 3000k -f avi D:\1.avi 
```

顺便说一句：virtualdub 两者都很好。谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:11:22.773

假设您已经安装了驱动程序和编解码器，请使用以下内容：

```
ffmpeg -f dshow -i video="Logitech HD Webcam C270" [path]out.mp4 
```

[在capture a webcam input](http://ffmpeg.org/trac/ffmpeg/wiki/How%20to%20capture%20a%20webcam%20input)中给出了简短的解释。对于使用 DirectShow，你有[这个例子](https://ffmpeg.org/trac/ffmpeg/wiki/DirectShow)。

# javascript - 在 jQuery 中为 select 获取多个类选择器

> ID：14487395
> 
> 赞同：1
> 
> 时间：2013-01-23T19:03:44.310
> 
> 标签：javascript, jquery, forms, jquery-selectors

我正在尝试获取给定 div 中的所有选择元素，即使它们具有不同的类名。它看起来像这样：

```
<div id="mydiv">
    <select class="myclass">...</select>
    <select class="myotherclass">...</select>
</div> 
```

我想用`myclass`or获得所有选择`myotherclass`。我已经尝试了几种方法，但无法做到正确。

我尝试了以下变体：

```
$.each($('[#mydiv select.myclass][#mydiv select.myotherclass]'), function(){ // handle stuff
$.each($('#mydiv select.myclass select.myotherclass'), function(){ // handle stuff
$.each($('#mydiv select.myclass myotherclass'), function(){ // handle stuff 
```

和其他人，但我似乎无法将两个选择都纳入我的元素选择中。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T19:06:24.870

也许

```
$('#mydiv select.myclass, #mydiv select.myotherclass') 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:25:26.243

尝试这个

***JS代码***

```
$('#mydiv select').each(function(){
 console.log($(this));
}); 
```

[**演示**](http://jsfiddle.net/Lsc78/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T19:06:40.823

```
$.each($("#mydiv .myclass, #mydiv .myotherclass"), function(){ // handle stuff }); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T19:07:21.417

我认为它适用于

```
$('#mydiv select.myclass, #mydiv select.myotherclass') 
```

就像在 Css 选择器中一样

# sql - 我可以在没有 CURSOR 的情况下编写此查询吗？

> ID：14487397
> 
> 赞同：3
> 
> 时间：2013-01-23T19:04:04.057
> 
> 标签：sql, sql-server, sql-server-2008, query-optimization

我试图找出在同一类别的另一个表中找到的时间戳的阈值时间内发生的事件数。改变 delta 的最快方法是什么（在下面给出的情况下，delta 是 5 分钟）？我刚刚使用游标测试了一种方法（将变量设置为 5，然后继续递增并执行相同的查询），但每次迭代需要 10 秒。在我的实际数据中，#EVENTS 中的行数大约等于 100K，而#CHANGES 大约是 500K。

我的表格如下：

```
CREATE TABLE #EVENTS(Category varchar(20), Timestamp datetime)
GO

INSERT INTO #EVENTS VALUES('A', '2013-01-23 05:02:00.000')
INSERT INTO #EVENTS VALUES('A', '2013-01-23 05:04:00.000')
INSERT INTO #EVENTS VALUES('B', '2013-01-23 05:03:00.000')
INSERT INTO #EVENTS VALUES('B', '2013-01-21 05:02:00.000')
GO

CREATE TABLE #CHANGES(Category varchar(10), Timestamp datetime)
GO

INSERT INTO #CHANGES VALUES('A', '2013-01-23 05:00:00.000')
INSERT INTO #CHANGES VALUES('B', '2013-01-21 05:05:00.000')

SELECT *
FROM
(
    SELECT X.Category, X.Timestamp, Y.Timestamp BeforeT, DATEADD(MINUTE, 5, Y.Timestamp) AfterT
    FROM #EVENTS X, #CHANGES Y
    WHERE X.Category = Y.Category
) X
WHERE X.Timestamp BETWEEN BeforeT AND AfterT

DROP TABLE #CHANGES
DROP TABLE #EVENTS
GO 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T19:14:04.447

这是你想要的？它对定义增量的 CTE 进行交叉连接：

```
with deltas as (
     select 5 as delta union all
     select 10 union all
     select 20
)
SELECT *
FROM (SELECT e.Category, e.Timestamp, c.Timestamp BeforeT,
             DATEADD(MINUTE, deltas.delta, c.Timestamp) AfterT,
             deltas.delta
     FROM #EVENTS e join
          #CHANGES c
          on e.Category = c.Category cross join
          deltas
    ) X
WHERE X.Timestamp BETWEEN BeforeT AND AfterT 
```

我还修复了你的别名。当别名与基础表名称相关时，查询的读取效果会更好。

# python - python（flask）通过客户端重定向请求

> ID：14487406
> 
> 赞同：0
> 
> 时间：2013-01-23T19:04:59.360
> 
> 标签：python, flask, amazon-glacier

我一直在尝试做一些我认为应该很简单的事情。情况如下。客户端向我的 Web 服务器上的资源发出请求。我的烧瓶应用程序处理请求并确定该资源位于另一个 Web 服务器上的某个位置，并且客户端应该改为向该服务器发出请求。

我知道我可以使用重定向功能告诉客户端向远程位置发送请求，但我的问题是远程位置是 Amazon Glacier 服务器。这些服务器需要以特定方式发出带有特殊签名的请求（请参阅[http://docs.aws.amazon.com/amazonglacier/latest/dev/amazon-glacier-signing-requests.html](http://docs.aws.amazon.com/amazonglacier/latest/dev/amazon-glacier-signing-requests.html)）。我的烧瓶应用程序知道如何以所需的方式进行这些请求。我基本上想知道是否可以向我的客户发送回复说，将此请求（由我的应用程序生成，带有所有必需的签名）发送到亚马逊服务器？

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T21:19:28.933

如果请求可以使用 get params 进行编码，例如

```
http://www.redirecturl.com/?param1=bla&param2=blub 
```

那么它应该没有问题。只需将请求构造为字符串并将其传递给[**redirect()**](http://flask.pocoo.org/docs/api/#flask.redirect)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-26T17:46:23.923

据我所知，您不能告诉客户端将特定标头发送到 HTTP 重定向 URL。

点击 Glacier URL 服务器端将是最简单的。只有在 Glacier 实现 CORS 时，在客户端使用 javascript 才有效。

# c# - 错误：查询正文必须以 select 子句或 group 子句结尾

> ID：14487410
> 
> 赞同：2
> 
> 时间：2013-01-23T19:05:09.013
> 
> 标签：c#, xml, linq, compiler-errors, linq-to-xml

我有一个这样的xml：

```
<countries>
    <country ID="MX">
        <idea ID="Valor1">nota1</idea>
        <idea ID="Valor2">nota2</idea>
        <idea ID="Valor3">nota3</idea>
        <idea ID="Valor4">nota4</idea>
    </country>
    <country ID="US">
        <idea ID="Valor1">nota1</idea>
        <idea ID="Valor2">nota2</idea>
        <idea ID="Valor3">nota3</idea>
        <idea ID="Valor4">nota4</idea>
    </country>
</countries> 
```

使用 LINQ to XML 如何获取特定类型的列表？我试过这样的事情：

我创建了一个类：

```
public class Ideas
{
    public string Country { get; set; }

    public List<ListItem> ListIdeas { get; set; }
} 
```

然后我用这个类来做一个列表：

```
XDocument xdoc = XDocument.Load(this.Server.MapPath("~/config/ideas.xml"));

var cat = from p in xdoc.Descendants("countries")
                        .Elements("country")
                        .Select(m => new Ideas 
                            {
                                Country = m.Attribute("ID").Value, 
                                ListIdeas = m.Elements("idea")
                                             .Select(c => 
                                                 new ListItem 
                                                 {
                                                     Text = c.Attribute("ID").Value , 
                                                     Value = c.Value
                                                 }).ToList()
                            }); 
```

但我得到下一个错误：

> 查询主体必须以 select 子句或 group 子句结尾
> 
> select 子句中的表达式类型不正确。调用“选择”时类型推断失败。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T19:10:36.850

您混合使用查询语法和扩展方法语法。选择**一个**。

```
var r = (from c in xdoc.Element("countries")
                       .Elements("country")
         select new Country
         {
             ID = c.Attribute("ID").Value,
             Ideas = (from i in c.Elements("idea")
                      select new Idea
                      {
                          Text = i.Attribute("ID").Value, 
                          Value = i.Value
                      }).ToList()
         }).ToList(); 
```

请注意，我重命名了您的类和属性以提高可读性。

* * *

在另一种语法中相同：

```
var q = xdoc.Element("countries")
            .Elements("country")
            .Select(c => new Country
                 {
                      ID = c.Attribute("ID").Value,
                      Ideas = c.Elements("idea")
                               .Select(i => new Idea
                                   {
                                       Text = i.Attribute("ID").Value, 
                                       Value = i.Value
                                   })
                               .ToList()
                 })
            .ToList(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:09:55.323

你最后缺少选择。尝试：

```
XDocument xdoc = XDocument.Load(this.Server.MapPath("~/config/ideas.xml"));

List<Ideas> cat = from p in xdoc.Descendants("countries").Elements("country")
                         .Select(m => new Ideas 
                             {
                                 Country = m.Attribute("ID").Value, 
                                 ListIdeas = m.Elements("idea")
                                 .Select(c => 
                                     new ListItem 
                                     {
                                         Text = c.Attribute("ID").Value , 
                                         Value = c.Value
                                     }).ToList()
                             }) select p; 
```

# ios - 使用 KVO 正确观察对象

> ID：14487412
> 
> 赞同：4
> 
> 时间：2013-01-23T19:05:11.003
> 
> 标签：ios, objective-c

我有一个使用 KVO 观察单个对象属性的视图。我已经观察了视图中对象的所有属性。

```
[person addObserver:self forKeyPath:@"name" options:NSKeyValueObservingOptionNew context:NULL];
 [person addObserver:self forKeyPath:@"photo" options:NSKeyValueObservingOptionNew context:NULL];
 [person addObserver:self forKeyPath:@"address" options:NSKeyValueObservingOptionNew context:NULL]; 
```

现在，当只有一个属性发生变化时，这似乎很好，但是当整个对象发生变化时，通知会在几分之一秒内被触发 3/4 次。我需要根据更改从网络加载数据。虽然单个属性更改会创建单个网络请求，但如果同时更改多个属性。它为同一对象创建一个请求队列。这会导致一些问题。即使所有属性都发生了变化，如何同时观察多个属性并且只加载一次。请帮帮我。这是一个严重的麻烦，我已经陷入困境。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T19:43:36.480

您可以使用 Grand Central Dispatch 中的调度源来合并属性更改观察结果，这样它们就不会比您处理它们更频繁地发生。

```
@implementation Controller
{
    dispatch_source_t source;
}
- (id)init
{
    self = [super init];
    if (self)
    {
        //We are using data add source type, but not actually using the added data.
        source = dispatch_source_create(DISPATCH_SOURCE_TYPE_DATA_ADD, 0, 0, dispatch_get_main_queue());
        dispatch_source_set_event_handler(source, ^{
            //Insert your network call to load data from the network.
            //The event handler will only be called when another event handler is not being processed. So you won't attempt to do another network call until the last call was completed.

        });
        //Dispatch sources always start out suspended so you can add the event handler. You must resume them after creating them if you want events to be delivered)
        dispatch_resume(source);
    }
    return self;
}
- (void)dealloc
{
    dispatch_release(source);
}
- (void)observeValueForKeyPath:(NSString *)keyPath
                      ofObject:(id)object
                        change:(NSDictionary *)change
                       context:(void *)context
{
    //Tell dispatch source some data changed. It will only call the event handler if an event is not currently being handled.
    //You could add a custom timer based coalesce here for when no events are currently being processed if you want to delay all initial events to potentially wait for more changes 
    dispatch_source_merge_data(source, 1);
}
@end 
```

所以第一个属性更改通知会触发调度源事件处理程序。在现有事件运行时发生的后续属性更改将排队等待最后一个事件完成后立即运行。这意味着如果 5 个属性快速连续更改，您将获得 2 个网络调用（而不是 5 个网络调用）。如果您希望牺牲对通知的即时响应以消除第二次网络调用，则可以在未处理任何事件时添加基于自定义计时器的合并。

# django - Django TEMPLATE_DIRS 在错误的目录中查找？

> ID：14487423
> 
> 赞同：0
> 
> 时间：2013-01-23T19:05:35.060
> 
> 标签：django, django-templates

我的 Web 应用程序的代码目前在 Dropbox 上，我在工作和家用计算机上工作时只需更改 settings.py 模块中的 TEMLPLATE_DIRS 变量。

今天晚上启动应用程序时遇到了一个问题。我收到 TemplateDoesNotExist 错误，以下是详细信息：

```
Django tried loading these templates, in this order:
Using loader django.template.loaders.filesystem.Loader:
/Users/me/Dropbox/app/MyApp/Users/me/Dropbox/app/MyApp/templates/App/Page 1/pageone.html (File does not exist) 
```

基本上第一个**/Users/me/Dropbox/app/MyApp**不应该在那里。

设置.py

```
TEMPLATE_DIRS = (
    "Users/danielholmes/Dropbox/app/MyApp/templates/",
) 
```

我认为这将是一件愚蠢的事情 - 如果需要更多信息，请告诉我。

非常感谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:12:26.150

永远不要硬编码设置文件中的目录路径。让 Python 为您生成绝对路径名。这使您的项目可跨不同环境移植。以下是定义路径的好方法（也可能解决您的问题）：

```
import os, sys

abspath = lambda *p: os.path.abspath(os.path.join(*p))

PROJECT_ROOT = abspath(os.path.dirname(__file__))
sys.path.insert(0, PROJECT_ROOT)

TEMPLATE_DIRS = (
    abspath(PROJECT_ROOT, 'templates'),
) 
```

# android - 从 DialogFragment 刷新片段

> ID：14487426
> 
> 赞同：0
> 
> 时间：2013-01-23T19:05:42.627
> 
> 标签：android, android-fragments, android-viewpager, android-dialogfragment

我一直在兜圈子，试图做一些看起来很基本的事情。我有一个`DialogFragment`接受用户输入的 a ，然后在提交时刷新 a`ListView`中的 a `Fragment`，它是 a 的一部分`ViewPager`。

我有一切工作除了`Fragment`不`ListView`刷新本身。这有点令人困惑，因为它确实刷新了数据，但我必须滑动几个视图，然后再返回查看更新的数据。

在做了一些研究之后，我应该使用`getItemPosition`and`notifyDataSetChanged`并且`ViewPager`它应该可以工作。问题是调用`notifyDataSetChanged`会`Recursive entry to executePendingTransactions`引发异常：

**主要活动**

```
public class Main extends SherlockFragmentActivity implements MyListFragment.OnRefreshAdapterListener, DialogConfirmation.OnRefreshKeywordsListener //Updated Code
{
    private static List<Fragment> fragments;

    @Override
    public void onCreate(final Bundle icicle)
    {    
        setContentView(R.layout.main);
    }

    @Override
    public void onResume()
    { 
        mViewPager = (ViewPager)findViewById(R.id.viewpager);

        fragments = new ArrayList<Fragment>();

        fragments.add(new MyListFragment()); //fragment with the ListView

        fragments.add(MyDetailFragment.newInstance(0));
        fragments.add(MyDetailFragment.newInstance(1));
        fragments.add(MyDetailFragment.newInstance(2));

        mMyFragmentPagerAdapter = new MyFragmentPagerAdapter(getSupportFragmentManager());
        mViewPager.setAdapter(mMyFragmentPagerAdapter);
    }

    private static class MyFragmentPagerAdapter extends FragmentStatePagerAdapter  {  

        public MyFragmentPagerAdapter(FragmentManager fm) {  
             super(fm);  
        }  

        @Override  
        public Fragment getItem(int index) {
            return fragments.get(index);
        }  

        @Override
        public int getCount() {  
             return 4;  
        }

        @Override
        public int getItemPosition(Object object) {
            return POSITION_NONE;
        }
   }

    @Override
    public void onRefreshAdapterListener() {
        this.mMyFragmentPagerAdapter.notifyDataSetChanged();
    }

    //Updated Code
    @Override
    public void onRefreshTextListener() {
        MyListFragment tf = (MyListFragment)getSupportFragmentManager().findFragmentById(R.id.fragmentText);

        if (tf == null)
            tf = (MyListFragment)this.fragments.get(0);

            tf.RefreshText();       
    }
} 
```

**列表片段**

```
public class MyListFragment extends SherlockListFragment
{
    OnRefreshAdapterListener mRefreshAdapter;

    @Override
    public void onActivityCreated(Bundle savedState) {

        adapter = new CustomAdapter();

        /*code to add items to adapter */

        this.setListAdapter(adapter);

        adapter.notifyDataSetChanged();
    }

    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {
        super.onCreateView(inflater, container, savedInstanceState);

        if (getArguments() != null && getArguments().getString("text").length() > 0)
        {
            SaveText(getArguments().getString("text"));
            this.mRefreshAdapter.onRefreshAdapterListener(); //this line causes a "java.lang.IllegalStateException: Recursive entry to executePendingTransactions" exception
        }

        return inflater.inflate(R.layout.listing, container, false);
    }

    @Override
    public void onAttach(Activity activity) {
        super.onAttach(activity);

        mRefreshAdapter = (OnRefreshAdapterListener)activity;
    }

    public interface OnRefreshAdapterListener {
        public void onRefreshAdapterListener();
    }

    @Override
    public void onDialogTextAdd(final String text) {
    }   
} 
```

**对话片段**

```
public class DialogTextAdd extends DialogFragment implements OnEditorActionListener {

    private EditText mText;
    OnRefreshTextListener mTextKeywords; //Updated Code

    public interface DialogTextAddListener {
        void onDialogTextAdd(final String inputText);
    }

    public DialogTextAdd() {
        // Empty constructor required for DialogFragment
    }

    //Updated Code
    @Override
    public void onAttach(Activity act) {
        super.onAttach(act);
        mTextKeywords = (OnRefreshTextListener)act;
    }

    @Override
    public View onCreateView(final LayoutInflater inflater, final ViewGroup container, final Bundle savedInstanceState) {
        final View view = inflater.inflate(R.layout.dialog_edit, container);
        mText = (EditText)view.findViewById(R.id.text_add);
        getDialog().setTitle("Add Text");

        // Show soft keyboard automatically
        mText.requestFocus();
        getDialog().getWindow().setSoftInputMode(LayoutParams.SOFT_INPUT_STATE_VISIBLE);
        mText.setOnEditorActionListener(this);

        return view;
    }

    @Override
    public boolean onEditorAction(final TextView v, final int actionId, final KeyEvent event) {
        if (EditorInfo.IME_ACTION_DONE == actionId) {

            MyListFragment mf = new MyListFragment();
            Bundle args = new Bundle();
            args.putString("text", mText.getText().toString());
            mf.setArguments(args);

            //this seems to be intefering with the notifyDataSetChanged in the listing fragment
            getActivity().getSupportFragmentManager().beginTransaction().add(mf, "my_fragment").commit();

            mTextKeywords.onRefreshTextListener(); //Updated Code

            this.dismiss();
            return true;
        }
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T06:54:19.087

> 除了带有 ListView 的 Fragment 不会自行刷新之外，我一切正常。

创建和`FragmentActivity`添加`MyListFragment`. 从您的代码看来，您将使用的片段存储在列表中，因此您可以引用它们（此外，出于好奇，您是否将片段设置为纵向，是否旋转手机并重试使用`DialogFragment`？ ）。引用这些片段意味着您始终可以从列表中获取它们并使用它们来调用刷新/更新方法。

# php - 在 PHP 中执行 PDO 的问题

> ID：14487427
> 
> 赞同：0
> 
> 时间：2013-01-23T19:05:49.083
> 
> 标签：php, pdo

嘿伙计们，我有这个代码：

```
$tdata = "INSERT INTO insuranceverificationdisclaimer (InsCoName, PhoneNumber, Policy, InsuredName, MailingAdrs, EffDate, ExpDate, Email1, YrVehicle , Make, Model, VIN, TraineeUserName, EmpName, EmpCoName, AgencyNumber, SignDate, AgentName, AgentPhone, AgentEmail , Combinedlimit, bodyinjur ,bodyinjureachacc , propertydmg ) VALUES (':insur',':phone',':policy' ,':insurname',':mailingad',':effdate',':expdate',':email',':yr',':make',':model',':vin',':user',':empname',':empcomp',':agnum',':signdate',':agname',':agphone',':agemail',':csl',':body',':acc',':prop')";
$tinsertdata = $DBH->prepare($tdata);
$tinsertdata->execute(array(':insur' => $compname, ':phone' => $phone , ':policy' => $policynum, ':insurname' => $nameofPolicyholder, ':mailingad' => $newMailingAdrs, ':effdate' => $Policyeffdate, ':expdate' => $Policyexpdate, ':email' => $newEmployeeEmail, ':yr' => $YearOfVehicle, ':make' => $MakeOfVehicle, ':model' => $ModelOfVehicle, ':vin' => $Vehicleid, ':user' => $username, ':empname' => $EmployeeName, ':empcomp' => $EmployeeCompanyName, ':agnum' => $Agencynum, ':signdate' => $TodaysDate, ':agname' => $agentname, ':agphone' => $agentphone, ':agemail' => $agentemail, ':csl' => $singlelimit, ':body' => $bodyinjur, ':acc' => $eachacc, ':prop' => $propertydmg )); 
```

但是一旦我击中执行它就不会继续。有趣的是，如果您在名为组合限制的文本字段中输入一个值，这是数据库插入时的组合限制，这会突然出现。它只是使页面空白，并且在执行时失败。我没有看到任何问题，所以我不知道它为什么会这样做。我检查了数据库中的字段是否与其他字段一样，所以我不明白。

Combinedlimit 是`int(100)`一个默认值，`'0'`如果没有输入。如果您没有在表单上的该字段中输入任何内容，则不会正常工作。

这是combinedlimit的输入框代码：

```
<span class="limitsection">Combined Single Limit for bodily 
injury and property damage liability: </span>
<div class="InputInner"> <input type="text" 
name="singlelimit" onkeypress="return isNumberKey(event)"  
class="combinedinput" value="<?php echo $_SESSION['singlelimit']; ?>">
</div><!----- END    .InputInner ----------> 
```

按键只允许用户输入数字。

如果你能帮助我将不胜感激:)

编辑：

我刚收到这个错误：

> 致命错误：未捕获的异常 'PDOException' 带有消息 'SQLSTATE[HY000]：一般错误：1366 不正确的整数值：':csl' for column 'Combinedlimit' at row 1' in E:\web\pcgprote\PCG\insert.php :545 堆栈跟踪：#0 E:\web\pcgprote\PCG\insert.php(545): PDOStatement->execute(Array) #1 {main} 在 E:\web\pcgprote\PCG\insert.php 中抛出第 545 行

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:29:08.670

无需在准备好的语句中引用占位符（即不是`':insur'`，而是简单地`:insur`）。PDO 处理引用值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:31:41.460

在 PDO 绑定遇到太多麻烦之后，我找到了这个解决方案：

[PDO 识别缺失的绑定变量](https://stackoverflow.com/questions/14357786/pdo-identify-missing-bound-variables/14359121#14359121)

# c# - 如何动态装饰一个类？

> ID：14487437
> 
> 赞同：0
> 
> 时间：2013-01-23T19:06:03.313
> 
> 标签：c#, decorator, castle-dynamicproxy

我有一个简单的装饰器类，如下所示。请注意我的公共方法是如何创建待装饰类的新实例，然后将调用转发到该实例的。

这个类的问题是，每当`IMyService`更新时，我也必须更新这个代理类。

```
public class MyProxyService : IMyService
{
    readonly IMyServiceFactory _realServiceFactory;

    public MyProxyService(IMyServiceFactory realServiceFactory)
    {
        _realServiceFactory = realServiceFactory;
    }

    private IMyService CreateRealService()
    {
        return _realServiceFactory.CreateRealService();
    }

    public int A()
    {
        return CreateRealService().A();
    }

    public int B(int b1)
    {
        return CreateRealService().B(int b1);
    }

    public int C(int c1, int c2)
    {
        return CreateRealService().C(c1,c2);
    }

    public int D(int d1, int d2, int d3)
    {
        return CreateRealService().D(d1,d2,d3);
    }
    public void E()
    {
        CreateRealService().E();
    }
} 
```

我尝试使用创建动态版本`Castle.DynamicProxy`，但到目前为止没有任何运气。

任何人都知道动态创建这样的装饰器的好方法吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T20:42:48.297

我能够使用[CreateInterfaceProxyWithTargetInterface(..) 让它](http://kozmic.net/2009/04/27/castle-dynamic-proxy-tutorial-part-x-interface-proxies-with-target/)工作 `DynamicProxy.ProxyGenerator`。

我首先创建了一个动态代理工厂。这将返回一个代理对象，每个方法都将被提供的`IInterceptor`：

```
public class MyDynamicallyDecoratedServiceClientFactory
{
    readonly ProxyGenerator _proxyGenerator;
    readonly IInterceptor _interceptor;
    public MyServiceClientFactory(IInterceptor interceptor)
    {
        _interceptor = interceptor;
        _proxyGenerator = new ProxyGenerator();
    }
    public IMyService Create()
    {
        IMyService proxy = _proxyGenerator.CreateInterfaceProxyWithTargetInterface<IMyService>(null, _interceptor);
        return proxy;
    }
} 
```

然后我实现了拦截器。在每次方法调用时，都会调用此拦截器，它将`IMyService`从提供的新实例中创建一个新的`IMyServiceFactory`，并将方法调用委托给该新实例。

```
public class MyServiceClientInterceptor : IInterceptor
{
    readonly IMyServiceFactory _svcFactory;
    public MyServiceClientInterceptor(IMyServiceFactory svcFactory)
    {
        _svcFactory = svcFactory;
    }
    public void Intercept(IInvocation invocation)
    {
        IMyService realService = _svcFactory.Create();
        IChangeProxyTarget changeProxyTarget = invocation as IChangeProxyTarget;
        changeProxyTarget.ChangeInvocationTarget(realService);
        invocation.Proceed();
    }
} 
```

最后，要利用这一切：

```
// Create a service factory (the to-be-decorated class)
IMyServiceFactory myRealServiceFactory = /* ... */;

// Create a factory that will create decorated services
MyServiceClientInterceptor interceptor = 
        new MyServiceClientInterceptor(myRealServiceFactory);
MyDynamicallyDecoratedServiceClientFactory svcFactory =  
        new MyDynamicallyDecoratedServiceClientFactory(interceptor);

// Create a service client
IMyService svc = svcFactory.Create();

// Use it!
svcProxy.A(); 
```

# .htaccess - 在 SEF url 系统中排序评论的问题

> ID：14487438
> 
> 赞同：0
> 
> 时间：2013-01-23T19:06:04.563
> 
> 标签：.htaccess, url-rewriting, seo

我在我的网站上使用[Commentics](http://www.commentics.org)，但我的 SEF 网址有问题。我在相关论坛中找不到解决方案。

我有这样的重写规则：

```
RewriteRule ^([a-zA-Z0-9_-]+)$ /kurum.php?sef=$1 
```

所以我的网址像[http://fxrehber.com/kurum.php?sef=xtb](http://fxrehber.com/kurum.php?sef=xtb)

变成这样：

[http://fxrehber.com/xtb](http://fxrehber.com/xtb)

当我尝试对评论进行排序时，这不起作用

我的网址如下所示：

[http://fxrehber.com/xtb?cmtx_sort=5&sef=xtb#cmtx_comments](http://fxrehber.com/xtb?cmtx_sort=5&sef=xtb#cmtx_comments)

有没有办法通过额外的重写规则来解决这个问题，还是我走错了方向？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-20T12:16:25.210

最后我找到了一个简单的解决方案：我只是在规则末尾添加了“[QSA]”，如下所示：

```
RewriteRule ^([a-zA-Z0-9_-]+)$ /kurum.php?sef=$1 [QSA] 
```

来源：[http ://httpd.apache.org/docs/current/mod/mod_rewrite.html](http://httpd.apache.org/docs/current/mod/mod_rewrite.html)

> 修改查询字符串

默认情况下，查询字符串会原封不动地传递。但是，您可以在包含查询字符串部分的替换字符串中创建 URL。只需在替换字符串中使用问号来指示应将以下文本重新注入到查询字符串中。当您想删除现有的查询字符串时，只用问号结束替换字符串。要组合新旧查询字符串，请使用 [QSA] 标志。

# java - Hibernate Annotation - 1 到 1，没有 auto_increment

> ID：14487443
> 
> 赞同：0
> 
> 时间：2013-01-23T19:06:29.860
> 
> 标签：java, hibernate, jpa, annotations, persistence

当表的主键列是另一个没有 auto_increment (MySQL) 的表的外键时，如何根据休眠注释 (JPA) 进行操作。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:17:09.353

像下面这样的东西应该可以工作（没有测试确切的语法，但应该很接近）：

```
@Id
private int id;

@OneToOne
@JoinColumn(name = "id", updatable = false, insertable = false)
private RelationEntity other; 
```

您需要在持久化之前手动设置“id”字段，并且不记得是否可以在初始保存之前设置“其他”实体，如果这样做，休眠可能会抱怨。但是，如果设置了“id”列，那么当您重新加载实体时，您也应该加载关系。

# jquery - 使用 Orbit 随机化我的幻灯片放映之间的时间

> ID：14487444
> 
> 赞同：1
> 
> 时间：2013-01-23T19:06:30.353
> 
> 标签：jquery, orbit

我将 Jquery Orbit 用于我的图像幻灯片，但我希望图片在随机计时器上。我不是很精通jquery，所以如果你能帮助我，我会很感激。到目前为止，这是我的代码明智的。

```
<script type="text/javascript">
        $(window).load(function() {
            $('#newest').orbit();
        });

    </script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:32:06.653

要调用幻灯片，请使用以下代码：

```
 <script type="text/javascript">
    function generateRandomInteger(minNumber, maxNumber, minDigits, maxDigits) {
        var num, digits;
        do {
            num = Math.floor(Math.random() * (maxNumber - minNumber)) + minNumber;
            digits = Math.abs(num).toString().length;
        } while (digits > maxDigits || digits < minDigits);
        return num;
    }
    $(function() {
        var randomSpeed = generateRandomInteger(2000, 10000, 4, 5);
        $('#newest').orbit({
            timer: true,             
            advanceSpeed: randomSpeed
        });
    });
</script> 
```

在这条线上：`var randomSpeed = generateRandomInteger(2000, 10000, 4, 5);` 这些数字是`generateRandomInteger(minNumber, maxNumber, minNumDigits, maxNumDigits);`

# unix - ftp mget 在脚本中使用时不起作用

> ID：14487447
> 
> 赞同：3
> 
> 时间：2013-01-23T19:06:43.907
> 
> 标签：unix, batch-file, ftp

我正在尝试使用 MS DOS ftp 脚本（Windows 7）从 Unix 机器获取一些文件。我是新手，所以我一直在尝试修改一个在线示例。代码如下：

```
@echo off
SETLOCAL

REM ##################################
REM Change these parameters
set FTP_HOST=host
set FTP_USER=user
set FTP_REMOTE_DIR=/users/myAcc/logFiles
set FTP_REMOTE_FILE=*.log
set FTP_LOCAL_DIR=C:\Temp
set FTP_TRANSFER_MODE=ascii
REM ##################################
set FTP_PASSWD=password

set SCRIPT_FILE=%TEMP%\ftp.txt
(
    echo %FTP_USER%
    echo %FTP_PASSWD%
    echo %FTP_TRANSFER_MODE%
    echo lcd %FTP_LOCAL_DIR%
    echo cd  %FTP_REMOTE_DIR%
    echo prompt
    echo mget %FTP_REMOTE_FILE%
) > %SCRIPT_FILE%

ftp -s:%SCRIPT_FILE% %FTP_HOST%
del %SCRIPT_FILE%

ENDLOCAL 
```

但是，当我运行此命令时，`mget`命令失败并给出以下输出：

注意：脚本其余部分的输出显示前面的所有步骤都按预期工作。我什至添加了`ls`命令来验证脚本是否在正确的目录中。

```
...
ftp> mget *.log
200 Type set to A; form set to N.
mget logFile1_SystemOut_22-01-13.log? mget logFile2_SystemOut_22-01-13.log? mget 
logFile3_SystemOut_22-01-13.log? ftp> 
```

我已经手动重复了完全相同的步骤，它工作正常 - 没有问题，文件已成功传输到 C:\Temp 目录。

我已经检查了许多论坛和其他网站，但我看不出它为什么会这样。关于为什么这在脚本中不起作用的任何指针都会很棒！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:49:26.420

关闭 ftp mget 生成的提示的常用选项是

```
ftp -i 
```

默认情况下，ftp 会提示`mget "wildcard"`您在脚本中生成的字符串找到的每个文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-22T23:05:08.370

我像这样在 Windows 上调用[ftp](/questions/tagged/ftp "显示标记为“ftp”的问题")脚本：

```
ftp -i -s:%SCRIPT_FILE% %FTP_HOST% 
```

这是因为`ftp -si:%SCRIPT_FILE% %FTP_HOST%`不起作用。

我想这在[unix](/questions/tagged/unix "显示标记为“unix”的问题")上是一样的——开关必须分开。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T12:06:36.997

`ftp -i`为我工作。

按照@jim mcnamara 的建议在您的脚本中更改`ftp -s:%SCRIPT_FILE% %FTP_HOST%`for 。`ftp -si:%SCRIPT_FILE% %FTP_HOST%`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-10-25T16:41:17.197

`ftp -i -s:%SCRIPT_FILE% %FTP_HOST%`也为我工作。

另一种选择是在调用mget（你这样做）之前在ftp脚本中切换提示，我也在`mget -i`某处读过。

但请注意：`prompt`如果之前已关闭，则在 ftp 脚本中将提示重新打开。所以使用`ftp -i`OR `prompt`，但不能同时使用！

您可以通过在 mget 之后在 ftp 脚本中回显一些 's 来检查您的脚本是否正常工作`y`，因此当提示出现时它会回答“是”。

# wpf - 为多个 ListView 控件实施“删除项目”命令

> ID：14487454
> 
> 赞同：0
> 
> 时间：2013-01-23T19:06:56.900
> 
> 标签：wpf, listview

我在 MVVM WPF 应用程序中有多个 ListViews，由 ObservableCollections 支持。

我正在为每个 ListView 实现一个“删除项目”上下文菜单项。目前，我将每个 ListView 的 SelectedItem 绑定到我的 ViewModel 中的同一对象。然而，从 ObservableCollection 中删除项目需要 ListView 的名称（在本例中为 Wk01CECollection）：

```
 private void DeleteLO()
    {
        this.Wk01CECollection.Remove(SelectedCE);

    } 
```

有没有办法引用 SelectedItem 所属的 ListView？因为它是我需要为每个 ListView 连接一个单独的删除方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:43:05.250

我确信这不是实现这一目标的“最佳实践”方式，但这很简单：

您可以将 ListView 的选定项作为参数传递给命令：

```
 <Button Content="Delete selected item" Command="{Binding DeleteCommand}" CommandParamenter="{Binding ElementName=SomeListView, Path=SelecteItem}" /> 
```

由于您可以尝试从 ObservableCollection 中删除一个项目，即使它在集合中不存在而不会出现异常，所以在您的私有 Delete 方法中，您可以尝试从您的 ViewModel 中的所有 ObservableCollection 中删除该项目。我在这里假设一个项目不能同时在两个集合中，如果不是这种情况，我所说的将不起作用，因为您将从所有集合中删除该项目。如果您打算这样做，只需在删除之前检查 null，如果您尝试删除 null 对象，您将收到异常。

```
private void DeleteLO(object listitem)
{
    if(listitem != null)
    {
        if(listitem as CollectionType1 != null) //cast your listitem to the appropiate type inside your collection
            this.Wk01CECollection.Remove(listitem);

        if(listitem as CollectionType2 != null) 
            this.Wk02CECollection.Remove(listitem);

        //etc.
    }
} 
```

除此之外，如果您使用 MVVM，最好 ViewModel 不知道 View，因此在 VM 中引用 ListView 会破坏该原则。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-26T12:49:33.127

我知道这个问题早已不复存在，但会为 googlers 发布。

这对我有用：

```
 private void LvPrevKeyDown(object sender, KeyEventArgs e)
    {
        //Nothing to do here
        if (Lv.SelectedItems.Count == 0) return;
        //Empty space for other key combinations

        //Let's remove items. If it's a simple delete key so we'll remove just the selected items.
        if (e.Key != Key.Delete || Keyboard.Modifiers != ModifierKeys.None) return;
        var tmp = Lv.SelectedItems.Cast<ColorItem>().ToList();
        foreach (var colorItem in tmp)
        {
            _cList.Remove(colorItem);
        }
    } 
```

xaml 中没有什么特别的。当然，只是一些绑定到 _cList 属性的列和绑定到 _cList 的项目源。

希望它会帮助别人！亲切的问候！

# portlet - 了解 websphere eportal 服务器控制台

> ID：14487461
> 
> 赞同：-1
> 
> 时间：2013-01-23T19:07:27.110
> 
> 标签：portlet, portal, administration, websphere-portal

当我创建一个 servlet 应用程序时，我将 war 文件部署在应用程序服务器上并点击 servlet url，如果有正确的映射，我将进入我的页面。

现在，如果它是一个 portlet 应用程序，仅仅在门户服务器上部署 portlet 并不能完成这项工作。我们还必须登录到门户网站，基本上通过转到“管理页面”来“添加”portlet。这一步我们到底在做什么？为什么这一步是必要的？对于 servlet 应用程序，我们不需要这样做。

我的另一个问题是，在门户服务器中，似乎有两种管理控制台……一种类似于标准的 WAS 管理控制台。另一个是你管理页面和做其他事情的地方。为什么我们有两种控制台？

仅仅是因为 IBM 想为 Portal 服务器重用 WAS 控制台，所以无法将添加的功能设计到标准 WAS 控制台中吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T22:19:06.713

您可能应该了解的第一件事是portlet 不是servlet。尽管 portlet 容器可能在 portlet 下使用 servlet（我什至不确定），但编程模型是不同的，在使用它们设计和实现解决方案时需要注意这一点。

Portlet 应用程序可以由您在安装时定义的上下文根直接引用。然而，portlet 容器将调用您的 doView、processAction 等方法并帮助维护 portlet 的状态和用户的导航状态。将 portlet 添加到页面让 Portal 知道您希望 portlet 在页面模型中的哪个位置可用。

您有两个管理控制台，因为 WebSphere Portal 在 WebSphere Application Server 之上运行。那就是您在那里使用的标准 WAS 管理控制台。您将使用它来管理您的标准 WAS 内容（服务器、数据库连接、Web 服务等）。门户管理控制台用于管理特定于 portlet 的特定事物，例如页面模型、portlet、主题等。

# ios - iOS：使用 UIDocumentInteractionController 将特定于应用程序的文件发送到 Dropbox 时出错

> ID：14487469
> 
> 赞同：6
> 
> 时间：2013-01-23T19:08:01.200
> 
> 标签：ios, cocoa-touch, dropbox, mime, uti

我正在开发一个 iOS 应用程序，该应用程序允许通过电子邮件发送文件来导出其数据。该应用程序将文件类型注册为具有扩展名“sainputs”的文件（这样应用程序还可以从电子邮件或保管箱打开文件以导入值 - 这工作正常）。我正在尝试添加将文件发送到可以打开其他类型文件的任何其他应用程序的可能性。Dropbox 就是一个很好的例子——它应该能够打开任何类型的文件。

我目前正在通过显示一个使用文件的 URL 初始化的 UIDocumentInteractionController 来尝试此操作。当它显示时，Dropbox 应用程序显示为打开文件的可用选项之一，正如预期的那样。

但是，当我按下 Dropbox 图标时，什么也没有发生，在控制台中我看到以下文本：

```
LaunchServices: Invalid LSOpenOperation request - No applications found to open document 
```

在应用程序的 plist 文件中，它注册具有 UTI com.mycompany.myapp.sainputs 的文档类型，并注册具有标识符 com.mycompany.myapp.sainputs 的导出类型 UTI，具有公共文件扩展名“sainputs”和 MIME 类型 myapp /输入。

以下是 plist 文件的相关摘录：

```
<key>CFBundleDocumentTypes</key>
    <array>
        <dict>
            <key>CFBundleTypeName</key>
            <string>My App's File Type</string>
            <key>LSHandlerRank</key>
            <string>Owner</string>
            <key>LSItemContentTypes</key>
            <array>
                <string>com.mycompany.myapp.sainputs</string>
            </array>
        </dict>
        <array>
.
.
.
<key>UTExportedTypeDeclarations</key>
    <array>
        <dict>
            <key>UTTypeConformsTo</key>
            <array/>
            <key>UTTypeDescription</key>
            <string>My App's File Type</string>
            <key>UTTypeIdentifier</key>
            <string>com.mycompany.myapp.sainputs</string>
            <key>UTTypeTagSpecification</key>
            <dict>
                <key>public.filename-extension</key>
                <string>sainputs</string>
                <key>public.mime-type</key>
                <string>steuerapp/inputs</string>
            </dict>
        </dict>
        <array> 
```

我尝试在 plist 文件中将 MIME 类型更改为“application/octet-stream”。这并没有什么不同。

任何建议/想法将不胜感激。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-08T22:30:43.437

正如@maddy 建议和@bgh 所证实的那样，这解决了这个问题。我刚刚遇到了同样的问题。

除了定义您的自定义通用类型之外，您还可以暗示此类型是更通用类型的“子类型”。例如，通过在键 UTTypeConformsTo 中明确指定 UTI 'public.data'，如下所示：

```
<dict>
   <key>UTTypeConformsTo</key>
      <array>
         <string>public.data</string>
      </array>
   <key>UTTypeDescription</key>
      <string>My App's File Type</string>
   <key>UTTypeIdentifier</key>
      <string>com.mycompany.myapp.sainputs</string>
   <key>UTTypeTagSpecification</key>
      <dict>
        <key>public.filename-extension</key>
           <string>sainputs</string>
        <key>public.mime-type</key>
           <string>steuerapp/inputs</string>
      </dict>
</dict> 
```

然后，您可以将自定义 uti 指定为 UIDocumentInteractionController 中的参数：

```
UIDocumentInteractionController *documentController = ...;
documentController.UTI = @"com.mycompany.myapp.sainputs"; 
```

[可以在此处找到有关此的 Apple 文档。](http://developer.apple.com/library/ios/#documentation/FileManagement/Conceptual/understanding_utis/understand_utis_declare/understand_utis_declare.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-31T09:39:41.473

如果这发生在其他人身上：

我无法让 Klaas 回答工作，因为我在设备上有另一个应用程序（“轻型”版本）也声明了相同的 UTI，但设置不正确。您需要在声明类型的每个应用程序中添加“public.data”，然后它才能工作。

只是为了确保，我建议只安装一个应用程序进行调试，然后添加另一个应用程序，看看一切是否仍然有效。

# c++ - 构造函数中变量的初始化不起作用，而是给了我一个随机数

> ID：14487471
> 
> 赞同：2
> 
> 时间：2013-01-23T19:08:19.847
> 
> 标签：c++, random, constructor, initialization

正如您可能从标题中收集到的那样，我在文件“booking.h”的构造函数中初始化变量“passNum”时出错

该文件包含航班预订程序的预订等级，我想将 passNum 初始化为 0，因为最初航班上没有乘客。但是，我不断收到“航班已满”的消息，用户可以查看航班上是否还有剩余空间。所以，为了查看错误，我添加了一个 cout 以查看 passNum 中实际存储的数字。输出是“28080747”，但是每次编译和运行时数字都会改变。

预约文件...

```
//Booking class - Scotia Airlines
//Zac Mazs
//This class will reserve a seat for passenger

#include <iostream>
#include <string>

#include "flight.h"

using namespace std;

class Booking{

public:
    // default constructor
    Booking()
    {
    int passNum = 0; // initialise passenger number to 0
    totalSeats = 24; // total seats on plane
    fName = "empty";
    sName = "empty";
    busName = "empty";
    }
    // accessor methods

    void setPassNum(int p){passNum = p;}

    string getFname(){return fName;}
    string getSname(){return sName;}
    string getBusName(){return busName;}

    void addBooking()
    {

    if (passNum >= totalSeats) // if the number of passengers exceeds 24 then display flight-full message
        {
            cout << passNum;
            cout <<"Flight is full";
        }
        else
            {
                cout << "\tBooking Menu \n\n";
                cout << "Please select ticket type: \n";
                cout << "1- Business \n";
                cout << "2- Western Isles \n";
                cout << "3- Ordinary \n";
                cin >> livesAt;

                    // This will be used to calc total cost for each passenger dependant on ticket type
                    if(livesAt == 1)
                        {
                        discount = 0.75;
                        cout << "Please enter your business name\n";
                        cin >> busName;
                        }

                        else if (livesAt == 2)
                            {
                            discount = 0.90;
                            }

                        else if(livesAt == 3)
                            {
                            discount = 1.0;
                            }
                        else
                        {
                            cout << "Error, please choose 1,2 or 3";
                        }

                // Calculation - Standard ticket price is 60 Beans
                tickPrice = 60.0;
                tCost = (tickPrice * discount);

            bool booked = false;
                for(int ROW = 0; ROW < 4 && !booked; ROW++)
                    {
                        for(int COL = 0; COL < 6 && !booked; COL++)
                        {
                            if(f.isAvailable(ROW,COL) == true)
                            {
                            cout << "Please enter your first name \n";
                            cin >> fName;
                            cout << "Please enter your second name \n";
                            cin >> sName;
                            //create new string fullName from fName and sName
                            fullName == fName + " " + sName;

                            f.setName(ROW,COL, fullName);
                            f.setAvailable(ROW,COL,0);

                            f.seatArray[ROW][COL].available++;

                            booked = true;
                            // increment pass num/decrement totalSeats
                            totalSeats--;
                            passNum++;

                            // Message on screen for customer displaying cost of flight
                            cout << "*******************************\n";
                            cout << "\tBooking for "; cout << fName + " " + sName; cout << " confirmed.\n";
                            cout << "\tTotal cost = " << tCost << " GBP.\n";

                            }//end of if
                        }//end of for2
                    }//end of for1
            }//end else
    }// End of addBooking function

private:
//Declare all variables

string fName, sName, busName, fullName;
int livesAt, totalSeats;
int passNum;

float discount, tickPrice, tCost;

Flight f;
Seat s;
Passenger p;
};// End of addBooking class 
```

有什么想法吗？我真的很感激帮助！

提前致谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T19:11:30.300

在构造函数中，passNum 是在本地声明的（它隐藏了私有类级别的定义）。

改成：

```
Booking()
{
    /*int*/ passNum = 0; //initialise passenger number to 0
    totalSeats = 24; // total seats on plane
    fName = "empty";
    sName = "empty";
    busName = "empty";
} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T19:11:02.380

问题是`int`在

```
 int passNum = 0; // initialise passenger number to 0 
```

您没有分配给成员变量，而是创建了一个具有相同名称的新局部变量。

要修复，请删除`int`.

# html - 编写包含在特定工作表和行中打开 excel 应用程序的链接的 html 文件

> ID：14487483
> 
> 赞同：2
> 
> 时间：2013-01-23T19:09:07.790
> 
> 标签：html, excel, href

我正在编写一个非常简单的 HTML 文件，其中包含一些表格。我试图有一个单元格值，它基本上是一个链接。通过单击链接，我想在特定工作表和行中的 excel 应用程序中打开文件。

笔记：

1.  窗户环境
2.  HTML 由标准浏览器打开
3.  该文件在本地存在（简单路径：C:\test.xlsx）
4.  excel应用路径未知
5.  我想让 HTML 文件尽可能简单。好的设计不是重中之重。只需要让它发生。
6.  （低优先级）如果 excel 实例（对于特定文件）已经打开，我想更改活动工作表并突出显示打开实例中的行

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:12:32.403

```
<HTML>
<HEAD>
<Title>Excel Linking Example</Title>
</HEAD>
<body>
<p>
<a href="http://localhost/excel/asheet.xls#Sheet2!D4">
This link will open the Excel file to the second page with the focus on
cell D4</a>.
<a href="http://localhost/excel/asheet.xls#TableName">
This link will set the focus on a named area of the spreadsheet
</a>.
</p>
<form>
<input type=button
 value="Via Jscript"
 onclick='location.href = "asheet.xls#TableName"'>
</form>
</body>
</html> 
```

来源： http: [//support.microsoft.com/kb/197922](http://support.microsoft.com/kb/197922)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-01T09:52:11.397

我使用javascript解决了它：

```
<script type="text/javascript">
    function open_excel_file(path,sheet,f_range)
      {

        if (!window.ActiveXObject)
        {
          alert ("Your browser does not support this feature.\n"
                 "Please re-open this file using IE browser.");
          return;
        }

        fso = new ActiveXObject("Scripting.FileSystemObject");

        if (!fso.FileExists(path))
          alert("Cannot open file.\nFile '" + path + "' doesn't exist.");

        else
         {
           var myApp = new ActiveXObject("Excel.Application");

           if (myApp != null)
             {
               myApp.visible = true;
               Book = myApp.workbooks.open(path);
               var excel_sheet = Book.Worksheets(sheet).Activate;
               myApp.range(f_range).Select;
             }

           else {
             alert ("Cannot open Excel application");
           }
         }
      }
 </script> 
```

用法示例：

```
<button onclick="open_excel_file('f1.csv', 's1', 'A1:Z7');">Open</button> 
```

# ruby-on-rails - 如何防止用户两次订阅同一个应用程序？

> ID：14487484
> 
> 赞同：0
> 
> 时间：2013-01-23T19:09:11.870
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, validation

我有以下型号。

我不希望`User`可以多次订阅同一个`App`

所以这应该是不可能的：

```
User.last.apps
=> [#<App id: 78, name: "Name">, #<App id: 78, name: "Name">]

User.last.subscriptions
=> [#<Subscription id: 78, app_id: 78>, #<Subscription id: 79, app_id: 78>] 
```

**楷模**

```
User
  has_many :subscriptions, :dependent => :destroy
  has_many :apps, through: :subscriptions

Subscription
  validates :user_id, uniqueness: { scope: :app_id }
  belongs_to :user, touch: true
  belongs_to :app 

App  
  validates_uniqueness_of :name  
  belongs_to :user, touch: true
  belongs_to :app 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:12:11.097

您可以向关联添加唯一约束：

```
has_many :apps, through: :subscriptions, uniq: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T17:44:09.887

我在订阅表中向数据库添加了唯一索引。

```
add_index :subscriptions, [:user_id, :app_id], unique: true 
```

# ios - 如何在 Monotouch 中使用sharpziplib？

> ID：14487486
> 
> 赞同：1
> 
> 时间：2013-01-23T19:09:15.593
> 
> 标签：ios, xamarin.ios, monodevelop, sharpziplib

嗨，我需要在 Monotouch 中为 iOS（以及后来的 Andriod）应用程序解压缩文件，而 sharpziplib 看起来是个不错的选择（是吗？）。但是如何在 MonoDevelop 中添加它（我有最新版本）？

我已经下载了 ICSharpCode.SharpZipLib.dll，但它是如何/在哪里添加到我的项目（解决方案）中的？谁能给我一步一步的指示？

另外我应该使用哪个 .net 版本的 DLL？一共有三个：net-11、net-20、netcf-20（我认为这是最后一个，但最好能得到确认）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T22:23:48.713

您必须为 ICSharpCode.SharpZipLib 创建一个 MonoTouch 类库项目并将相应的源文件添加到该项目。

然后，您可以在解决方案中引用生成的程序集或项目本身。

# mysql - MySQL 查询：使用 ifnull 加入表时响应缓慢

> ID：14487487
> 
> 赞同：1
> 
> 时间：2013-01-23T19:09:17.697
> 
> 标签：mysql

我有三个表，`products`，`variants`和`data`。

每个产品都有它自己的`productcode`。产品可以有任意数量的变体，包括没有变体。变体有自己的代码`variantcode`。产品有一个`productid`列，每个变体都有一个相关的`productid`列。

我想要所有代码的列表，但我只关心`productcode`产品是否没有变体。否则我想要`variantcode`. 我写了这个查询来得到这个列表：

```
SELECT IFNULL(variants.variantcode, products.productcode) AS code 
FROM products 
LEFT OUTER JOIN variants ON (products.productid = variants.productid) 
ORDER BY code 
```

此查询按我的预期工作。

该`data`表包含每个代码的额外数据。我想将此数据加入此列表。我试过这个查询：

```
SELECT IFNULL(variants.variantcode, products.productcode) AS code 
FROM products 
LEFT OUTER JOIN variants ON (products.productid = variants.productid)
LEFT OUTER JOIN data ON (data.partno = code) 
ORDER BY code 
```

但我收到错误“'on 子句'中的未知列'代码'”。我认为这与`code`生成值有关，所以我尝试了这个查询：

```
SELECT IFNULL(variants.variantcode, products.productcode) AS code 
FROM products 
LEFT OUTER JOIN variants ON (products.productid = variants.productid) 
LEFT OUTER JOIN data ON (data.partno = IFNULL(variants.variantcode, products.productcode)) 
ORDER BY code 
```

此查询有效，但花费了很长时间（约 20 秒，而第一次查询 <1 秒）。ON 子句中的 IFNULL 是问题吗？我怎样才能加快速度？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:20:09.223

试试这个：

```
 select product_variants.code from

 (SELECT IFNULL(variants.variantcode, products.productcode) AS code 
 FROM products 
 LEFT OUTER JOIN variants ON (products.productid = variants.productid) 
 ORDER BY code) 

 as product_variants

 LEFT OUTER JOIN data ON (data.partno = product_variants.code) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:20:21.953

您可以尝试的一件事是加入您的`data`桌子两次，如下所示：

```
SELECT IFNULL(variants.variantcode, products.productcode) AS code
     , IFNULL(D1.something, D2.something) AS something 
FROM products 
LEFT OUTER JOIN variants
ON (products.productid = variants.productid) 
LEFT OUTER JOIN data as D1
ON (D1.partno = variants.variantcode) 
LEFT OUTER JOIN data as D2
ON (D2.partno = products.productcode) 
ORDER BY code 
```

# python - 使用 read() 从 VideoCapture 对象获取图像

> ID：14487491
> 
> 赞同：1
> 
> 时间：2013-01-23T19:09:25.473
> 
> 标签：python, opencv, numpy

我正在使用以下方法逐帧阅读视频：

`vc = cv2.VideoCapture('test.avi')`

后来我检查是否`frame`已使用：

```
if vc.isOpened():
    rval,frame = vc.read()
else:
    rval = False 
```

现在的问题是，如果我尝试`frame`使用以下代码将其转换为 numpy 数组：

```
PILImage = Image.fromstring("L",cv.GetSize(frame),frame.tostring())
NumPyArray = np.array(PILImage) 
```

我收到一条错误消息：

`CvArr argument 'arr' must be IplImage, CvMat or CvMatND. Use fromarray() to convert numpy arrays to CvMat or cvMatND`

从[VideoCapture::read](http://docs.opencv.org/modules/highgui/doc/reading_and_writing_images_and_video.html#videocapture-read)的文档中，我发现它返回了两件事`[retVal,Image]`。如何`Image`仅获取该部分以及如何将其转换为 Numpy Array？

**更多信息：** 基本上这样做的重点是，我正在尝试编写一个程序，该程序允许我通过按空格键浏览视频的每一帧，并从任何帧中选择一个特定区域并将其保存为 jpg。这是代码：

```
from ITMS import ITMS
import cv2
from cv2 import cv
import numpy as np
import matplotlib.pyplot as plt
import Image
import matplotlib.widgets as widgets

def onselect(eclick, erelease):
    if eclick.ydata>erelease.ydata:
        eclick.ydata,erelease.ydata=erelease.ydata,eclick.ydata
    if eclick.xdata>erelease.xdata:
        eclick.xdata,erelease.xdata=erelease.xdata,eclick.xdata
    ax.set_ylim(erelease.ydata,eclick.ydata)
    ax.set_xlim(eclick.xdata,erelease.xdata)
    fig.canvas.draw()

def subImager(arr):
    fig = plt.figure()
    ax = fig.add_subplot(111)

    plt_image=plt.imshow(arr,cmap="Greys_r")
    rs=widgets.RectangleSelector(
        ax, onselect, drawtype='box',
        rectprops = dict(facecolor='red', edgecolor = 'red', alpha=0.2, fill=True))
    plt.show()

cv2.namedWindow("preview")
vc = cv2.VideoCapture('test.avi')

if vc.isOpened():
    rval,frame = vc.read()
else:
    rval = False

while rval:
    key = cv2.waitKey(30)
        if key==32:
            cv2.imshow("preview", frame)
            NumPyArray=ITMS.CVtoNPArray(frame)
            subImager(NumPyArray)
            rval,frame = vc.read()
        elif key==27:
            break

cv2.destroyAllWindows() 
```

*ITMS 类：*

```
from cv2 import cv
import cv2
import numpy as np
from PIL import Image

class ITMS:
    def __init__(self):
        pass

    def CVtoNPArray(CVImage):
        PILImage = Image.fromstring("L",cv.GetSize(CVImage),CVImage.tostring())
        NumPyArray = np.array(PILImage)
        return NumPyArray
        CVtoNPArray=staticmethod(CVtoNPArray) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T19:19:55.187

你把事情复杂化了，以你的`frame`名字返回的图像已经是一个 numpy 数组。如果您想将其转换为`PIL`，只需执行`Image.fromarray(frame)`.

# c# - 如何编写一个类来返回文本框控件

> ID：14487495
> 
> 赞同：1
> 
> 时间：2013-01-23T19:09:31.630
> 
> 标签：c#, asp.net

我如何为这样的事情写一堂课

示例：我有`form`一个面板。该面板有一个选项卡式控件。在该选项卡式控件中有一个`textbox`. 如果我通过`form`作为开始控件和​​“textbox1”[名称`TextBox`]，该类将`texbox`控件作为控件返回。这是使用 c#、asp.net。

因此，在表单加载事件中，我应该能够按如下方式进行搜索：

```
Control txtCtrl = Search.FindControl(“textbox1”, this); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:14:29.607

可能是这样的：

```
class Search
{
    public static TextBox FindControl(string controlToFind, Page page)
    {
         //find your text box
    } 
} 
```

正如@i4v 提到的，一个类不返回任何内容，但您可以添加一个返回某些内容的函数。话虽如此，这似乎是一个奇怪的要求。你能解释一下你想要做什么吗？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:23:20.947

此代码可能会对您有所帮助。`parentControl`是`Textbox`您正在寻找的容器。

```
 public TextBox FindTextbox(string name)
 {
     foreach (Control item in parentControl.Children) //based on parent type it my be .Childern, .Items , ...
     {
         if (item is TextBox)
         {
             TextBox temp = item as TextBox;
             if (temp.Name == name)
             {
                 return temp;
             }
         }
     }
 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:19:22.400

您可以通过调用接收要查找的控件的 id 和要搜索的控件的方法来使其更简洁。就像是：

```
public class ControlUtils
{
    public static Control FindControl(string idToFind, Control mainControl)
    {
         //Recursively search for the control?
    } 
} 
```

# objective-c - 在 Master-Detail 应用程序中使用 MasterView 更新 DetailView - iPad

> ID：14487496
> 
> 赞同：0
> 
> 时间：2013-01-23T19:09:31.097
> 
> 标签：objective-c, ipad, uisplitviewcontroller, detailsview, master-detail

我正在为 iPad 开发一个主细节视图应用程序。到目前为止，我所做的只是将数据填充到我的主视图中。所有这些都是存储在 NSMutableArray 中的图像。当用户单击任何行时，相应的图像应出现在详细视图中。

我看到了很多这方面的例子，我发现我需要在 didSelectRowAtIndexPath 以及 setDetailItem 和 configureView 中进行更改。但我不知道在这些方法中我到底要做什么。此外，当我选择其中的任何行时，我的主视图应该被隐藏。这没有发生。此外，在 iPad 的主细节模板中，主视图和细节视图之间没有海线。我尝试创建一个，但随后数据仅显示在主视图中，而不显示在详细视图中。我希望更新详细视图。如果有人知道如何完成这项工作，请告诉我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:52:20.187

您只需要获取要传递给详细视图的参数值。

```
- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
if (!self.detailViewController) {
        self.detailViewController = [[[DetailViewController alloc] initWithNibName:@"DetailViewController" bundle:nil] autorelease];
    }
   // Here you need to pass data object that you want to show in detail view Controller
    // Object contains value of particular index in tableView.
    self.detailViewController.detailItem = object;
    [self.navigationController pushViewController:self.detailViewController animated:YES];
} 
```

# apache - 将所有 htm 文件扩展名转发到特定文件

> ID：14487497
> 
> 赞同：0
> 
> 时间：2013-01-23T19:09:32.047
> 
> 标签：apache, .htaccess

我的任务是更改站点上的 100 个 .htm 文件以仅显示联系页面。与更改文件一样，我想只使用 .htaccess 文件并将所有包含“.htm”或“.html”的请求强制到contact.htm页面。

我对 .ht_access 文件的了解非常有限，而我拥有的通过 index.php 强制所有请求的文件不起作用，因为重写条件之一是检查文件是否真实。

任何建议或提示将不胜感激：

```
 // My .htaccess rules at the moment:
 RewriteCond %{REQUEST_FILENAME} !-f
 RewriteCond %{REQUEST_FILENAME} !-d
 RewriteRule ^(.*)$ contact.htm [NC,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:14:17.920

你可以尝试这样的事情：

```
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d

RewriteRule ^[^\.]*\.htm$ contact.htm [NC,L] 
```

这将替换`.htm`以 contact.htm结尾的所有内容

**编辑：**犯了一个错误，检查并修复它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:19:04.813

如果您想维护您的 SEO 并防止链接失效（这很[糟糕](http://www.nngroup.com/articles/fighting-linkrot/)），您需要让客户知道旧的 HTML 文件不再有效：

```
RedirectMatch 301 ^.*html?$ http://example.com/contact.html 
```

**编辑：**作为一个有趣的旁注，返回 410[可能是更合适的响应](http://www.checkupdown.com/status/E410.html)。

# python - Dropbox Python API：文件大小检测可能失败

> ID：14487507
> 
> 赞同：2
> 
> 时间：2013-01-23T19:10:31.647
> 
> 标签：python, api, dropbox

我正在尝试使用以下代码将文本文件上传到 Dropbox：

```
def uploadFile(file):
    f = open('logs/%s.txt' % file)
    response = client.put_file('/%s.txt' % file, f)
    print "Uploaded log file %s" % file 
```

连接到保管箱工作得非常好，只是在我上传文件时收到此错误：

```
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
  File "C:\Python27\lib\site-packages\dropbox_python_sdk-1.5.1-py2.7.egg\dropbox
\client.py", line 352, in put_file
    return self.rest_client.PUT(url, file_obj, headers)
  File "C:\Python27\lib\site-packages\dropbox_python_sdk-1.5.1-py2.7.egg\dropbox
\rest.py", line 265, in PUT
    return cls.IMPL.PUT(*n, **kw)
  File "C:\Python27\lib\site-packages\dropbox_python_sdk-1.5.1-py2.7.egg\dropbox
\rest.py", line 211, in PUT
    return self.request("PUT", url, body=body, headers=headers, raw_response=raw
_response)
  File "C:\Python27\lib\site-packages\dropbox_python_sdk-1.5.1-py2.7.egg\dropbox
\rest.py", line 174, in request
    raise util.AnalyzeFileObjBug(clen, bytes_read)
dropbox.util.AnalyzeFileObjBug:
Expected file object to have 18 bytes, instead we read 17 bytes.
File size detection may have failed (see dropbox.util.AnalyzeFileObj) 
```

谷歌没有给我任何帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T19:14:26.657

听起来您是换行符统一的受害者。文件对象报告文件大小为 18 字节 ( `"abcdefghijklmnop\r\n"`)，但您只读取了 17 字节 ( `"abcdefghijklmnop\n"`)。

以二进制模式打开文件以避免这种情况：

```
f = open('logs/%s.txt' % file, 'rb') 
```

> 默认是使用文本模式，它可以`'\n'`在写入和读取时将字符转换为特定于平台的表示。

# c# - 从 C# 中向每个人授予对新创建文件夹的完全权限

> ID：14487509
> 
> 赞同：0
> 
> 时间：2013-01-23T19:10:36.553
> 
> 标签：c#, folder-permissions

我从 URL 列表中保存图像，但尝试在本地复制文件夹结构。

我解析 URL 以提供我想要的文件夹结构：

例子：

```
URL =  www.site.com/images/folder1/folder2/image 
```

我的本地基本文件夹是`mydocs/site/images` 我将 url 字符串拆分，并且能够使用以下方法递归地创建正确的文件夹结构：

```
 if (!Directory.Exists(finalLocalFolder))
    {
        DirectoryInfo di = Directory.CreateDirectory(finalLocalFolder);
    } 
```

一切都很好，直到我尝试使用以下命令将图像保存到文件夹中：

```
 WebClient webClient = new WebClient();
    webClient.DownloadFile(remoteUrl, finalLocalFolder); 
```

在这种情况下，我被告知访问该文件夹被拒绝。

> “System.UnauthorizedAccessException：对路径 'mydocs\images\test\test1\test\2\3m' 的访问被拒绝。”

所以我猜我需要在 CREATEDIRECTORY 区域中创建一个步骤，在该区域中我立即授予对该文件夹的访问权限。

是否有捷径可寻？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:30:42.693

如果您愿意，我可以关闭它 - 但只是为了提出我的问题......这里是：

在这里： webClient.DownloadFile(remoteUrl, finalLocalFolder);

finalLocalFolder 的结果类似于： "C:\mydocs\images\test\test2" 当它应该是 "C:\mydocs\images\test\test2\theimagefilename.jpg"

愚蠢的时刻。对不起。

# c - 具有视口的滚动窗口的垂直尺寸没有最小值，但最大

> ID：14487511
> 
> 赞同：1
> 
> 时间：2013-01-23T19:10:50.663
> 
> 标签：c, gtk

我在对话框中使用带有视口的滚动窗口，它看起来像这样：

![包含带有视口的滚动窗口的对话框](../Images/0f9f968ee4f7ec248f507f976bcba00c.png)

我的问题：是否可以将此滚动窗口设置为不仅不超过某个垂直大小，而且如果滚动窗口内显示的文本不占用滚动窗口的整个空间，它还会缩小？第一个“不超过”条件通过使用简单的效果很好`gtk_widget_set_size_request`，所以我只想知道这是否可以与某种“自动收缩”结合使用。

我目前使用的代码是

```
GtkWidget *scrolled_window = gtk_scrolled_window_new (NULL, NULL);
gtk_scrolled_window_add_with_viewport (GTK_SCROLLED_WINDOW (scrolled_window), label);
gtk_widget_set_size_request (scrolled_window, 570, 125); 
```

我通常还为此对话框使用带有文本的标签，但由于这对这个问题并不重要，所以我删除了文本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:48:25.523

我现在看到了，即使

```
gtk_widget_set_size_request (scrolled_window, 570, 
(gtk_widget_get_allocated_height (label) < 125) ? 
gtk_widget_get_allocated_height (label) : 125); 
```

实际上并不是我所要求的自动收缩，它足以满足我的目的。所以我要使用这个。

# eclipse - 在 webapp 文件夹下找不到资源

> ID：14487514
> 
> 赞同：0
> 
> 时间：2013-01-23T19:11:15.880
> 
> 标签：eclipse, spring-mvc

我将 eclipse Juno 与 Spring 和 Maven 一起使用，我在 webapp 下创建了一个 pkeditor 文件夹，然后将文件复制到其中。我的 jsp 没有找到 pkeditor 文件（404ing）。我的jsp顶部有以下内容：

```
<%@ taglib uri="http://java.sun.com/jsp/jstl/core" prefix="c" %>
<%@ taglib prefix="spring" uri="http://www.springframework.org/tags" %>
<%@ taglib prefix="form" uri="http://www.springframework.org/tags/form" %>

<%@ page session="false" %>
<html>
<head>
<script type="text/javascript" src="/resources/ckeditor/ckeditor.js"></script>
<script type="text/javascript" src="/resources/ckeditor/adapters/jquery.js">   script>
<script type="text/javascript" src="/ckeditor/ckeditor.js"></script>
<script type="text/javascript" src="/ckeditor/adapters/jquery.js"></script>
<title>Home</title>

</head>
<body> 
```

注意：在我的 servlet-context.xml 中我都尝试过

和

```
<resources location="/, classpath:/META-INF/web-resources/" mapping="/resources/**"/> 
```

仍然没有找到。

对此必须有一个简单的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:46:39.820

例如，对于您的源路径，请使用以下内容。

```
<script type="text/javascript" src="${pageContext.servletContext.contextPath}/resources/ckeditor/ckeditor.js"></script> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T16:25:05.250

你可以使用`spring:url`

```
<spring:url value="/resources/ckeditor/ckeditor.js" var="script_url" />
<script src="${script_url}" type="text/javascript"><!-- required for FF3 and Opera --></script> 
```

# wpf - 样式设置器是否支持两种方式绑定（用于附加属性）？

> ID：14487517
> 
> 赞同：0
> 
> 时间：2013-01-23T19:11:25.523
> 
> 标签：wpf, data-binding, styles

这是我的 XAML：

```
<DataGridTemplateColumn Width="*"
                        CanUserResize="True"
                        CanUserSort="True"
                        Header=" Заголовок "
                        SortMemberPath=".">
    <DataGridTemplateColumn.CellStyle>
        <Style TargetType="DataGridCell">
            <Setter Property="Helpers:FocusHelper.IsFocused" Value="{Binding IsEnvelopeFocused, Mode=TwoWay}"/>
        </Style>
    </DataGridTemplateColumn.CellStyle>
    <DataGridTemplateColumn.CellTemplate>
        <DataTemplate>
            <TextBlock Name="txtTitle" VerticalAlignment="Center">
                <TextBlock.Text>
                    <MultiBinding Converter="{StaticResource TitleConverter}" UpdateSourceTrigger="PropertyChanged">
                        <Binding Path="." />
                        <Binding Path="DataContext.Language" RelativeSource="{RelativeSource Mode=FindAncestor, AncestorType=UserControl}" />
                    </MultiBinding>
                </TextBlock.Text>
            </TextBlock>
        </DataTemplate>
    </DataGridTemplateColumn.CellTemplate>
</DataGridTemplateColumn> 
```

`FocusHelper`开始监听 IsFocused 属性的变化。但是将值传递给`IsEnvelopeFocused`只发生一次。

我找不到这种行为的原因。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:18:26.160

是的，做。
问题出在[绑定](https://stackoverflow.com/questions/14504865/what-is-a-cached-acessor-in-the-context-of-databinding)中，但我不知道为什么。

# salesforce - 使用 salesforce chatter 编辑自动关注

> ID：14487518
> 
> 赞同：0
> 
> 时间：2013-01-23T19:11:30.333
> 
> 标签：salesforce, salesforce-chatter

所以我有这个想法，向联系人添加一个字段，他们会自动关注与之关联的用户。我的想法是能够让用户 A 创建联系人 A，并且联系人 A 与用户 A、B 和 C 相关联（因此自动关注）。

有谁知道做这个的插件/知道我应该从哪里开始做这个？我只是不知道如何在企业帐户上编辑 Chatter 代码，或向 Chatter 代码库添加功能。

这可能吗？任何关于从哪里开始的想法都会很棒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T10:48:39.090

确切的方法将取决于您的联系用户关联。您可以在联系人插入/更新时编写触发器，并在创建联系人记录的用户和关联用户之间创建 userEntity 记录。

看看喋喋不休的备忘单：http: [//developerforce.s3.amazonaws.com/website/pdfs/Chatter-cheatsheet_final.pdf](http://developerforce.s3.amazonaws.com/website/pdfs/Chatter-cheatsheet_final.pdf)

ps：您可能会在 [https://salesforce.stackexchange.com/](https://salesforce.stackexchange.com/)获得更多回复，该网站专门针对销售人员主题。

# c# - 如何在不同的应用程序域中启动控制台应用程序的多个实例？

> ID：14487522
> 
> 赞同：0
> 
> 时间：2013-01-23T19:11:52.007
> 
> 标签：c#, .net, console-application, appdomain

我有一个控制台应用程序 A 和控制台应用程序 B。是否可以从 A 启动多个 B 实例。控制台应用程序 B 的每个实例都必须在其自己的应用程序域中运行。如果可能，该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T09:52:17.917

当然这是可能的。采取的步骤是：

1.  应用程序 A 创建一个新的应用程序域。
2.  在新的应用程序域中执行控制台应用程序 B。
3.  在控制台应用程序 B 完成执行后卸载新的应用程序域。

一个非常简单的例子是：

```
var appDomain = AppDomain.CreateDomain("a name");

appDomain.ExecuteAssembly("ConsoleApplicationB.exe"); //Update with the path to consolse application B.          

AppDomain.Unload(appDomain); 
```

请注意，这是我能做的最简单的例子。选择更适合您需求的[AppDomain.CreateDomain](http://msdn.microsoft.com/en-us/library/system.appdomain.createdomain.aspx)重载。

请注意，[AppDomain.ExecuteAssembly](http://msdn.microsoft.com/en-us/library/system.appdomain.executeassembly.aspx)是阻塞的。当您运行该示例时，您会注意到这一点。控制台应用程序 A 将阻塞，直到应用程序 B 退出。您将不得不异步执行此操作。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T19:14:09.977

一个控制台只能与*一个进程*相关联。我没有看到其他方法`System.Diagnostics.Process.Start("B")`

请参阅 [http://msdn.microsoft.com/en-us/library/windows/desktop/ms681944(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/ms681944(v=vs.85).aspx)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-11-20T13:27:13.907

@I4V

我想你把它弄混了。一个*进程*只能与**一个** *控制台*关联。

这意味着一个进程只能与**一个**控制台（in|out|err）进行通信，更简单地说，一个进程**不能** *拥有*多个控制台窗口。

也就是说，**多个** *进程*可以与一个控制台进行通信。理想的同步过程。

当然有一些解决方法允许一个进程拥有多个控制台窗口（WinTTY）

# rally - API：深度查询中的完全匹配问题

> ID：14487525
> 
> 赞同：1
> 
> 时间：2013-01-23T19:12:03.697
> 
> 标签：rally

我正在查询与具有特定标签的任何测试集相关联的测试结果。

但是，此查询不起作用：

(TestSet.Tags.Name = "foo")

起作用的是：

（TestSet.Tags.Name 包含“foo”）

如果第二个返回与标签“foo”匹配，我认为第一个查询应该有效。我认为这是一个错误？

我可以通过使用第二个查询来解决这个问题，但当然问题是它也可以匹配一个名为“foo2”的标签，所以我的查询可以有额外的结果（可能更多），我必须将它们过滤掉. 此外，现在我还需要让我的查询获取“标签”，因此我得到的每个结果都因此而变得更大。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-07T02:25:30.623

是的，正如 user1195996 建议的那样，这感觉像是一个错误。针对缺陷或用户故事，您的相同查询按预期工作。请与 Rally 支持部门合作解决此问题，以便我们进行纠正。

# python - 将 beautifulsoup 输出转换为矩阵

> ID：14487526
> 
> 赞同：5
> 
> 时间：2013-01-23T19:12:04.677
> 
> 标签：python, matrix, beautifulsoup

多亏了beautifulsoup，我已经抓取了网络数据，但是我无法将输出转换为我可以操作的矩阵/数组。

```
from bs4 import BeautifulSoup
import urllib2

headers = { 'User-Agent' : 'Mozilla/5.0' }
req = urllib2.Request('http://statsheet.com/mcb/teams/duke/game_stats', None, headers)
html = urllib2.urlopen(req).read()
soup = BeautifulSoup(html)

#statdiv = soup.find('div', attrs={'id': 'basic_stats'})  #not needed
table = soup.find('table', attrs={'class': 'sortable statsb'})
rows = table.findAll('tr')
for tr in rows:
  text = []
  cols = tr.findAll('td')
  for td in cols:
    try:
      text = ''.join(td.find(text=True))
    except Exception:
        text = "000"
    print text+",",
  print 
```

注意：`''.join(td.find(text=True))`是为了防止程序在空白单元格上失败。

输出：

```
W, GSU, 32, 42, 74, 24-47, 51.1, 15-23, 65.2, 11-24, 45.8, 6, 25, 31, 17, 4, 6, 15, 19,
W, UK, 33, 42, 75, 26-57, 45.6, 15-22, 68.2, 8-18, 44.4, 11, 20, 31, 16, 6, 6, 8, 17,
W, FGCU, 52, 36, 88, 30-63, 47.6, 19-23, 82.6, 9-31, 29.0, 16, 21, 37, 19, 9, 4, 18, 14,
W, @MINN, 40, 49, 89, 30-55, 54.5, 21-26, 80.8, 8-10, 80.0, 10, 22, 32, 12, 12, 4, 15, 21,
W, VCU, 29, 38, 67, 20-48, 41.7, 24-27, 88.9, 3-15, 20.0, 4, 30, 34, 14, 4, 8, 8, 18,
W, Lville, 36, 40, 76, 24-55, 43.6, 23-27, 85.2, 5-20, 25.0, 8, 25, 33, 13, 8, 6, 14, 20,
W, OSU, 23, 50, 73, 24-51, 47.1, 20-27, 74.1, 5-12, 41.7, 8, 29, 37, 11, 3, 5, 8, 19, 
```

这是完美的，只是现在我无法弄清楚如何将数据放入矩阵中，以便我可以操作某些列，添加新列等。

我一直在玩 numpy 但每次我尝试都会得到这样的结果：

```
[u'W,']
[u'GSU,']
[u'32,']
[u'42,']
[u'74,']
[u'24-47,']
[u'51.1,']
[u'15-23,']
[u'65.2,']
[u'11-24,']
[u'45.8,'] 
```

我想要的是获取我抓取的数据并能够添加列、移动列、更改列中的文本、将一列中的数据拆分为两列（连字符列）。

这是我使用python的第二天。我假设将我的数据放入矩阵/数组中是最简单的方法。如果不是，请告诉我。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T20:19:12.497

你可以使用[熊猫](http://pandas.pydata.org/)。此示例将数据转换为*pandas* `DataFrame`，为进一步处理数据提供方便的方法，例如拆分列或将它们转换为不同的数据类型。

* * *

从[文档](http://pandas.pydata.org/pandas-docs/stable/dsintro.html#dataframe)：

```
DataFrame is a 2-dimensional labeled data structure with columns of potentially
different types. You can think of it like a spreadsheet or SQL table, or a dict
of Series objects. It is generally the most commonly used pandas object. Like
Series, DataFrame accepts many different kinds of input. 
```

* * *

```
import pandas as pd

table  = soup.find('table', attrs={'class': 'sortable statsb'})
header = [th.text for th in table.find('thead').select('th')]
header[:2] = ['',' ']
body   = [[td.text for td in row.select('td')]
             for row in table.findAll('tr', attrs = {"onmouseover":"hl(this)"})]
cols   =  zip(*body)
tbl_d  = {name:col for name, col in zip(header,cols)}

print pd.DataFrame(tbl_d, columns = header) 
```

*输出：*

```
 1H  2H   T     FG   FG%     FT   FT%    3PT    3%  OR  DR REB  AS  ST  B  TO  PF
0   W     GSU  32  42  74  24-47  51.1  15-23  65.2  11-24  45.8   6  25  31  17   4  6  15  19
1   W      UK  33  42  75  26-57  45.6  15-22  68.2   8-18  44.4  11  20  31  16   6  6   8  17
2   W    FGCU  52  36  88  30-63  47.6  19-23  82.6   9-31  29.0  16  21  37  19   9  4  18  14
3   W   @MINN  40  49  89  30-55  54.5  21-26  80.8   8-10  80.0  10  22  32  12  12  4  15  21
4   W     VCU  29  38  67  20-48  41.7  24-27  88.9   3-15  20.0   4  30  34  14   4  8   8  18
5   W  Lville  36  40  76  24-55  43.6  23-27  85.2   5-20  25.0   8  25  33  13   8  6  14  20
6   W     OSU  23  50  73  24-51  47.1  20-27  74.1   5-12  41.7   8  29  37  11   3  5   8  19
7   W      UD  42  46  88  35-67  52.2  11-21  52.4   7-20  35.0  10  37  47  23   9  8  11  19
8   W  TEMPLE  46  44  90  28-59  47.5  22-29  75.9  12-20  60.0  11  27  38  19   6  2   6  15
9   W    CORN  41  47  88  34-60  56.7  13-17  76.5   7-21  33.3   4  26  30  23  11  7  10  11
10  W    ELON  35  41  76  29-67  43.3   7-16  43.8  11-19  57.9  15  28  43  16  10  2  12  13
11  W     SCU  38  52  90  31-63  49.2  21-33  63.6   7-14  50.0  14  26  40  15   6  2  11  17
12  W    @DAV  29  38  67  21-46  45.7  20-22  90.9   5-11  45.5   6  27  33   8   5  5  12  17
13  W     WFU  41  39  80  29-63  46.0  11-22  50.0  11-24  45.8  10  25  35  22   6  4   6  16
14  W    CLEM  25  43  68  27-56  48.2   6-14  42.9   8-15  53.3  13  29  42  13   8  1  13  12
15  L   @NCSU  39  37  76  30-67  44.8  10-12  83.3   6-20  30.0  13  22  35  10   6  4  12  20
16  W      GT  27  46  73  26-65  40.0  11-16  68.8  10-21  47.6  15  25  40  12  10  5  13  18 
```

# javascript - RequireJS : 嵌套的 require 调用

> ID：14487527
> 
> 赞同：5
> 
> 时间：2013-01-23T19:12:05.240
> 
> 标签：javascript, requirejs

我有一个场景，我嵌套了 require() 调用来加载不同的模块。

有没有办法让我确保在调用回调函数之前完全加载所有 require() 调用及其所有子 require() 调用？

有没有办法指定 require() 调用是同步的？

```
function someFunction(callback) {

  //top level require
  require([...], function(...) {

     //nested require
     require([...], function(...) {
     });

     //nested require
     require([...], function(...) {
     });

  });

  callback();
}; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:24:52.147

您需要`callback`在最后一个`require(...)`函数中执行：

```
function someFunction(callback) {
   require(['somemodule'], function(someModule) {
     // do stuff with someModule...

     // execute callback
     callback(); 
   });
} 
```

您还可以做的是[使用 define 函数指定您的依赖项](http://requirejs.org/docs/api.html#defdep)。

例子：

```
define('somemodule', ['somedependency'], function(someDependency) {
   // return somemodule
   return {
     someProperty: someDependency.getProperty();
   };
});

function someFunction(callBack) {
   var someModule = require('somemodule');   
   var foo = someModule.someProperty;

   return callBack(foo);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-24T18:01:07.773

有一种方法可以使`require`通话同步。使其成为 CommonJS 风格：

```
var module = require('modulepath') 
```

因此，如果您在嵌套的 require 调用中不需要工厂功能，则可以通过这种方式“同步” require 调用......但是既然这样做了，那么您就不走运了**。**

AMD 风格`requre(depsArray, factoryFn)`就像将您的代码推入并行线程一样。没有办法让它“同步”，但您可以使用“信号量”来协调结果。

您的问题的答案也很大程度上取决于嵌套 A 和嵌套 B 消耗的内容。如果它们依赖于 top 中的某些产品，那么您绝对必须使用“线程信号量”，并且不能将嵌套的 require 调用推送到命名的定义调用中：

```
function someFunction(callback) {

  var resultOfOuterCode = someResultOfCalculations

  //top level require
  require([...], function(...) {

    var resultOfTopRequireCode = someOtherResultOfCalculations

    var semaphore = {
      'count': 2 // represents the number of thread that need to be "done" before 
      , 'callback':callback // this callback is fired.
      , 'checkIfLast': function(){
        this.count -= 1
        if (!this.count) {
          // count is now 0 - time to run our callback
          this.callback()
        }
      }
    }

    //nested require A
    require([...], function(...) {
      // using resultOfTopRequireCode // <-- !!!! this is important part
      ...
      semaphore.checkIfLast()
    });

    //nested require B
    require([...], function(...) {
      // using resultOfTopRequireCode // <-- !!!! this is important part
      semaphore.checkIfLast()
    });

  });

}; 
```

换句话说，只需将 require(dependsArray, factoryFn) 视为“线程”，并将您对使用线程的理解应用于它。

# c# - 底层连接被关闭：连接被意外关闭

> ID：14487528
> 
> 赞同：1
> 
> 时间：2013-01-23T19:12:06.243
> 
> 标签：c#, wcf, web-config, app-config

问题：

基础连接已关闭：连接意外关闭。这发生在我的 WCF 服务上，该服务托管在 Visual Studio 2010 内置开发服务器上。

信息：

这不会一直发生我认为这是一个“大数据”问题，我已经尽我所能用谷歌搜索，但我实施的解决方案都没有解决任何问题（我已经尝试了其中的大部分）我最可能只是错过了一些愚蠢的东西。

问题：

为什么会发生这种情况，我该如何解决？

客户端应用程序配置：

```
<?xml version="1.0" encoding="utf-8" ?>
<configuration>
    <configSections>
        <sectionGroup name="applicationSettings" type="System.Configuration.ApplicationSettingsGroup, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" >
            <section name="Program.Properties.Settings" type="System.Configuration.ClientSettingsSection, System, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
        </sectionGroup>
    </configSections>
    <system.serviceModel>
        <bindings>
            <basicHttpBinding>
              <binding name="BasicHttpBinding_IService1" maxReceivedMessageSize="20000000"
                 maxBufferSize="20000000"
                 maxBufferPoolSize="20000000">
                <readerQuotas maxDepth="32"
                 maxArrayLength="200000000"
                 maxStringContentLength="200000000"/>
              </binding>
            </basicHttpBinding>
        </bindings>
        <client>
            <endpoint address="http://localhost:62753/Service1.svc" binding="basicHttpBinding"
                bindingConfiguration="BasicHttpBinding_IService1" contract="ProgramService.IService1"
                name="BasicHttpBinding_IService1" />
        </client>
      <behaviors>
        <endpointBehaviors>
          <behavior name="EndpointBehavior">
            <dataContractSerializer maxItemsInObjectGraph="2147483647" />
          </behavior>
        </endpointBehaviors>
      </behaviors>
    </system.serviceModel>
    <applicationSettings>
        <Program.Properties.Settings>
            <setting name="Program_PROGRAM_Screen" serializeAs="String">
                <value>http://localhost/IntegrationTest/SOAP/PROGRAM.asmx</value>
            </setting>
        </Program.Properties.Settings>
    </applicationSettings>
</configuration> 
```

服务 web.config：

```
<?xml version="1.0" encoding="utf-8"?>
<configuration>
  <system.web>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <httpRuntime executionTimeout="1200" />
  </system.web>
  <system.serviceModel>
    <behaviors>
      <serviceBehaviors>
        <behavior>
          <!-- To avoid disclosing metadata information, set the value below to false and remove the metadata endpoint above before deployment -->
          <serviceMetadata httpGetEnabled="true" />
          <!-- To receive exception details in faults for debugging purposes, set the value below to true.  Set to false before deployment to avoid disclosing exception information -->
          <serviceDebug includeExceptionDetailInFaults="true" />
        </behavior>
      </serviceBehaviors>
    </behaviors>
    <serviceHostingEnvironment multipleSiteBindingsEnabled="true" />
  </system.serviceModel>
  <system.webServer>
    <modules runAllManagedModulesForAllRequests="true" />
  </system.webServer>
  <connectionStrings>
    <add name="ProgramEntities" connectionString="metadata=res://*/Program.csdl|res://*/Program.ssdl|res://*/Program.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=ACUMATICA1-HPI7;initial catalog=Program;persist security info=True;user id=sa;password=$0l0m0n;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

WCF 活动日志错误消息：

> 尝试序列化参数 [http://tempuri.org/:ScenarioSummaryResult](http://tempuri.org/:ScenarioSummaryResult)时出错。The InnerException message was 'Type 'System.Data.Entity.DynamicProxies.ScenarioSummary_A170028D0330F7804BAB85D00BA1EB45FA1754C8A6F6E98C0F003F15078E23A9' with data contract name 'ScenarioSummary_A170028D0330F7804BAB85D00BA1EB45FA1754C8A6F6E98C0F003F15078E23A9: [http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies](http://schemas.datacontract.org/2004/07/System.Data.Entity.DynamicProxies) ' is not expected. 考虑使用 DataContractResolver 或将任何静态未知的类型添加到已知类型列表中 - 例如，通过使用 KnownTypeAttribute 属性或将它们添加到传递给 DataContractSerializer 的已知类型列表中。有关更多详细信息，请参阅 InnerException。

服务信息：

我正在尝试返回实体框架内容的列表

```
//IService1.cs
[OperationContract]
List<ProgramService.ScenarioSummary> ScenarioSummary(string Module);

//Service1.svc
public List<ProgramService.ScenarioSummary> ScenarioSummary(string module)
        {
            return (from p in Entity.ScenarioSummaries where p.ModuleId.Equals(Entity.Modules.FirstOrDefault(q => q.ModuleName.Equals(module)).Id) select p).ToList();
        } 
```

附加信息：

对于我在这件事上明显无能以及如何纠正它的任何帮助/解释将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:57:32.093

有人评论说我的错误看起来很像[What are the downsides to turn off ProxyCreationEnabled for CTP5 of EF code first](https://stackoverflow.com/questions/4596371/what-are-the-downsides-to-turning-off-proxycreationenabled-for-ctp5-of-ef-code-f)

这实际上是我的解决方案。他们已经删除了他们的帖子。谢谢你比我更擅长谷歌搜索的神秘陌生人。

# linux - 在 Beaglebone 上安装 git 和配置 github 时出现 SSL/https 错误

> ID：14487535
> 
> 赞同：0
> 
> 时间：2013-01-23T19:12:38.593
> 
> 标签：linux, ssl, https, github, beagleboard

我有一个运行 Angstrom Linux 的 BeagleBone，刚刚使用[标准指令完成了 git 和 github 的设置](https://help.github.com/articles/set-up-git#platform-linux)

但是，当我尝试克隆存储库时...

```
git clone https://github.com/MyUserName/MyRepositoryName 
```

...或单个文件...

```
git clone https://github.com/MyUserName/MyRepositoryName/bb.py 
```

...我得到以下信息：

```
Cloning into 'bb.py'...
error: Problem with the SSL CA cert (path? access rights?) while accessing https 
```

不知道我做错了什么。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-01T03:39:23.683

我在使用 Angstrom Linux 的最新 BeagleBone Black 上遇到了同样的问题，它似乎不适用于 https。

可以正常使用 http，但是：

```
git clone http://github.com/... 
```

所以我现在只使用http来解决这个问题。

# objective-c - 无法将存储库连接到 Xcode

> ID：14487536
> 
> 赞同：1
> 
> 时间：2013-01-23T19:13:00.217
> 
> 标签：objective-c, xcode, git, xcode4, bitbucket

我在 BitBucket 上创建了一个私有存储库。

这个 repo 应该由我和同事使用，因此我想将它连接到 Xcode。因此，当我启动 Xcode 时，我按下**Connect to a repository**并粘贴以下链接：

ssh://bitbucket.org/ourteam/repository.git

Xcode 正确地说，需要身份验证。
我的用户是 repo 的管理员，可以连接到它。
我用**SourceTree**对其进行了测试，它可以工作。

但是，当 Xcode 提示输入用户名和密码时，我总是会收到身份验证错误。

有谁知道如何解决这个问题？

* * *

## 继续运行

Xcode 版本 4.5.2 (4G2008a)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T21:00:13.853

可能是链接不对。我遇到了与您类似的错误。我所做的修复它是：

1.  访问 Bitbucket.com
2.  去你的回购
3.  单击“克隆”按钮（“分叉”旁边）
4.  选择 SSH 或 HTTPS
5.  只复制位置，没有“git clone”
6.  打开 XCode，然后单击连接到存储库
7.  粘贴位置
8.  它可能会询问您是否要添加到您的钥匙串
9.  选择文件系统中您想要项目的位置
10.  它可能会在这里抱怨证书
11.  点击克隆

为我工作，我使用 HTTPS，但 SSH 应该以相同的方式工作。希望这可以帮助 ：）

# php - Memcache 1mb 限制，如何存储超过

> ID：14487537
> 
> 赞同：1
> 
> 时间：2013-01-23T19:13:01.950
> 
> 标签：php, memcached

> **可能重复：**
> [缓存超过 1mb 的 memcache 替代品](https://stackoverflow.com/questions/15977676/cache-over-1mb-memcache-alternatives)
> 
> [增加memcached中的项目最大大小？](https://stackoverflow.com/questions/4795536/increase-item-max-size-in-memcached)
> [缓存一个 302MB 的对象](https://stackoverflow.com/questions/5650085/caching-a-302mb-object)

谁能告诉我如何绕过 php 中 memcache 的 1 mb 限制

目前收到以下错误：

我正在使用单个图像数据 MemcachePool::set(): Server 127.0.0.1 (tcp 11211, udp 0) failed with: SERVER_ERROR object too large for cache

我正在使用 php，任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:15:40.187

运行命令行？您可以使用该`-I`参数。检查 wiki，它为您提供了大量选项和信息： [http ://code.google.com/p/memcached/wiki/NewConfiguringServer](http://code.google.com/p/memcached/wiki/NewConfiguringServer)

您可以更改大小，但不建议这样做，它会使内存分配效率降低。

# c - 删除字符串中的重复项。我错过了什么？

> ID：14487538
> 
> 赞同：0
> 
> 时间：2013-01-23T19:13:06.647
> 
> 标签：c, string

这是我删除重复字符串的尝试，我有两个问题：

```
void removeDuplicates(char *original_string)
{
    if(original_string == NULL) {
        return;
    }
    int len = strlen(original_string);
    if (len < 2) {
        return;
    }

    int tail = 1;
    int i;
    for (i = 1; i < len; i++) {
        int j;
        for (j=0; j < tail; j++) {
            if (original_string[i] == original_string[j]) {
                break;
            }
        }
        if (j == tail) {
            original_string[tail] = original_string[i];
            ++tail;
        }
    }
} 
```

第一：我做错了什么我没有看到？我在一本书中找到了这个例子，我相信它是有道理的。为什么重复的字符没有被删除？

第二：调用函数时，如果我这样做：

```
char duplicated[] = "aba";
removeDuplicates(duplicated); 
```

我没有收到错误。但如果我这样做：

```
char *duplicated = "aba";
removeDuplicates(duplicated); 
```

我得到一个`Bus error: 10`运行时间。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T19:15:45.280

```
char duplicated[] = "aba"; 
```

创建一个可写的s**数组。**`char`

```
char *duplicated = "aba"; 
```

创建一个字符串文字（不可修改），然后将变量`duplicated`分配给指向该字符串文字的指针。由于您的函数尝试就地修改字符串，因此在尝试写入字符串文字时会调用未定义的行为，从而导致崩溃。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:14:30.667

`"..."`创建一个**固定**的内存块来保存你的字符串。
你不能修改它。

`original_string[tail]`因此，在常量字符串上调用时，修改是未定义的行为。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T19:24:45.847

字符串文字在 C 中是不可修改的。它是未定义的行为

所以，`duplicated`必须是一个本地数组：

或者它必须是

```
char duplicated[] = "aba"; 
```

并不是

```
char *duplicated = "aba"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-25T14:23:51.883

什么都没有被删除

original_string[tail] = original_string[i]

没有删除任何东西，它正在替换

# java - 仅当尚未运行时才在线程中运行更新操作

> ID：14487539
> 
> 赞同：1
> 
> 时间：2013-01-23T19:13:29.637
> 
> 标签：java, multithreading, thread-safety

当我收到通知时，我需要异步执行更新操作。下面的`update()`方法操作实例变量。

```
 public class UpdateOperation implements Runnable
    {
        private Boolean isInProgress = false;

        @Override
        public void run() {
            try 
            {
                synchronized (isInProgress)
                {
                    isInProgress = true;
                }
                update(); //perform update
                synchronized (isInProgress)
                {
                    isInProgress = false;
                }
            } 
            catch (UpdaterException e) 
            {
                    // deal with it                 
            }
        }

    }

// In another class
private UpdateOperation mCurrentUpdateOperation = new UpdateOperation(); 

public void updateRequired()
{
    synchronized (mCurrentUpdateOperation.isInProgress)
    {
        if (!mCurrentUpdateOperation.isInProgress)
        {
            new Thread(mCurrentUpdateOperation).start();
        }
        else
        {
            // reschedule or silently ignore                
        }
    }   
} 
```

此设置是否足以同时运行两 (2) 个更新操作？我相信这是因为第一个到达`synchronized`块的线程将获取锁，启动操作，然后释放锁。然后第二个（或更多）将获取锁，查看操作正在进行中，重新调度并释放锁。

这个设置会失败吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:14:59.107

> 此设置是否足以同时运行两 (2) 个更新操作？

不，因为您锁定的对象。您应该*始终*在非最终对象上同步，而*不是*在`Boolean`. 随着值的`isInProgress`变化（设置为`true`或`false`），多个线程将锁定不同的对象，并可以同时进入互斥块。

如果可以，您可以锁定您的`UpdateOperation`实例`final`。您总是可以执行以下操作：

```
 private final Object lockObject = new Object();
 ...
 synchronized (lockObject) {
     ...
 } 
```

锁定对象后，您可以检查`inProgress`可能是布尔原语的状态。该`synchronize`构造同步*所有*内存。有关更多信息，请参阅[有关同步的 Java 线程教程](http://docs.oracle.com/javase/tutorial/essential/concurrency/sync.html)。

锁定 a`Boolean`特别糟糕，因为在整个 JVM 中它们只有 2 个常量对象引用（除非你这样做`new Boolean(...)`）。当你说：

```
isInProgress = true; 
```

你实际上是在说：

```
isInProgress = Boolean.TRUE; 
```

所以所有*类*中的所有线程都将锁定在相同的 2 个对象上，结果很奇怪。

有关更多信息，请参阅我的回答：

> [为什么在布尔值上同步不是一个好习惯？](https://stackoverflow.com/questions/10324272/why-is-it-not-good-practice-to-synchronize-on-boolean/10324280#10324280)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T05:04:00.060

原解决方案的另一个问题是检查和设置`isInProgress`变量在不同的同步语句中，这会产生时间间隙。结果，可以启动多个线程。

正确的解决方案是：

```
public class UpdateOperation implements Runnable {
    private boolean inProgress = false;

    public void start() {
       synchronized (this) {
           if (inProgress) {
              return;
           }
           inProgress=true;
       }
       new Thread(this).start();
    }

    @Override
    public void run() {
        try  {
            update(); //perform update
        } catch (UpdaterException e) {
                // deal with it                 
        } finally {
            synchronized (this) {
                inProgress = false;
            }
        }
    }

}

// In another class
private UpdateOperation mCurrentUpdateOperation = new UpdateOperation(); 

public void updateRequired() {
      mCurrentUpdateOperation.start();
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T19:21:30.667

看看[Executor](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/Executors.html#newSingleThreadExecutor%28%29)。他们将提供一个线程池，您可以简单地添加您可运行的。您也可能想使用 AtomicInteger。

我认为这将为您提供所需的一切，并且更易于使用。

# iphone - 如何根据要求在每个其他控制器中更改 NavigationController 的 NavigationBar？

> ID：14487541
> 
> 赞同：0
> 
> 时间：2013-01-23T19:13:39.293
> 
> 标签：iphone, objective-c, xcode, uinavigationcontroller, uinavigationbar

在我的应用程序中，我创建了一个自定义 UINavigationBar，在其中我编写了不同的方法来自定义 UInavigationBar，例如带有标题图像、后退按钮和签核按钮的导航栏，其中一些只有其中两个，其中一些只有标题图像。我必须根据我们所在的视图控制器更改导航栏。

这是我的 CustomUINavigationClass

```
#import <UIKit/UIKit.h>

typedef enum {
    simple = 1,
    back,
    signoff,
    both
} NavBarChoices;

NavBarChoices optionSelect;

@interface CustomNavigationBar : UINavigationBar
{
    UIBarButtonItem * menuButton;
    UIButton * showEditButton;
}

- (id)initWithFrame:(CGRect)frame andOption:(NavBarChoices)choice;
@end 
```

.m

```
#import "CustomNavigationBar.h"

@implementation CustomNavigationBar

- (id)initWithFrame:(CGRect)frame andOption:(NavBarChoices)choice
{
    self = [super initWithFrame:frame];
    if (self) {
        // Initialization code
        NSArray *arrayOfViews = [[NSBundle mainBundle] loadNibNamed:@"CustomNavigationBar"
                                                              owner:self
                                                            options:nil];

        if ([arrayOfViews count] < 1){
            return nil;
        }
        optionSelect = choice;
        CustomNavigationBar *newView = [arrayOfViews objectAtIndex:0];

        self = newView;

    }
    return self;
}

// Only override drawRect: if you perform custom drawing.
// An empty implementation adversely affects performance during animation.
- (void)drawRect:(CGRect)rect
{

    switch (optionSelect) {
        case 1:
            [self drawSimpleNavBar];
            break;
        case 2:
            [self drawWithBackOnly];
            break;
        case 3:
            [self drawWithSignOffOnly];

            break;
        case 4:
            [self drawWithBackAndSignOff];
            break;

        default:
            break;
    }

}

-(void)drawSimpleNavBar {

    self.tintColor = [UIColor whiteColor];
    self.backgroundColor = [UIColor whiteColor];
    UIImage *image = [UIImage imageNamed:@"title_logo.png"];
    [image drawInRect:CGRectMake(100, 13, 104, 20)];

    UIImage *menuImage = [UIImage imageNamed:@"menu_off.png"];
    showEditButton = [UIButton buttonWithType:UIButtonTypeCustom];
    showEditButton.bounds = CGRectMake(0, 0, menuImage.size.width, menuImage.size.height+10);
    showEditButton.frame = CGRectMake(2, 10, menuImage.size.width, menuImage.size.height);
    [showEditButton setImage:menuImage forState:UIControlStateNormal];
    [showEditButton setImage:[UIImage imageNamed:@"menu_on.png"] forState:UIControlStateSelected];
    [showEditButton addTarget:self action:@selector(showMenu) forControlEvents:UIControlEventTouchUpInside];
    [self addSubview:showEditButton];

}

-(void)drawWithBackOnly {

    self.tintColor = [UIColor whiteColor];
    self.backgroundColor = [UIColor whiteColor];
    UIImage *image = [UIImage imageNamed:@"title_logo.png"];
    [image drawInRect:CGRectMake(100, 13, 104, 20)];

    UIButton *backButton = [UIButton buttonWithType:UIButtonTypeCustom];
    [backButton setTitle:@"Back" forState:UIControlStateNormal];

    [backButton setTitleColor:[UIColor darkGrayColor] forState:UIControlStateNormal];
    backButton.frame = CGRectMake(0, 3, 80, 30);
    backButton.titleLabel.font = [UIFont boldSystemFontOfSize:12];
    [backButton sizeToFit];
    [backButton addTarget:self action:@selector(back) forControlEvents:UIControlEventTouchUpInside];
    [self addSubview:backButton];

}

-(void)drawWithSignOffOnly {

}

-(void)drawWithBackAndSignOff {

}

-(void)showMenu {
    NSLog(@"Clicked");
    showEditButton.hidden = YES;
    [showEditButton setImage:[UIImage imageNamed:@"menu_on.png"] forState:UIControlStateNormal];
}

@end 
```

我在 App Delegate 中这样称呼它：

```
navigationBar = [[CustomNavigationBar alloc]initWithFrame:CGRectMake(0, 0, 320, 44) andOption:simple];
    UINavigationController * nav = [[UINavigationController alloc]initWithNavigationBarClass:[navigationBar class] toolbarClass:nil];

    self.viewController = [[FirstViewController alloc] initWithNibName:@"FirstViewController" bundle:nil];
    [nav setViewControllers:@[_viewController] animated:NO];

self.window.rootViewController = nav; 
```

现在我在单击第一个视图控制器中有一个按钮，我想推送另一个视图控制器，它将向 CustomNavigationBar 类发送请求以更改同一 NavigationController 的导航栏。

请指导，目前我正在尝试更改新控制器的 viewDidLoad 方法，但挑战是 UINavigationController 的 NavigationBar 属性是只读的，因此无法为其分配新的导航栏，否则我会做这样的事情

```
CustomNavigationBar * navBar = [[CustomNavigationBar alloc]initWithFrame:CGRectMake(0, 0, 320, 44) andOption:2];
self.navigationController.navigationBar = navBar; 
```

请帮忙。

谢谢，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T04:35:17.403

您是否在 xib 实用程序中定义了 NIB 和类名称？如果是这样，请确认类名和 NIB 名称是否相同，希望它能在这种情况下工作

# java - Tomcat removeAbandoned 属性导致异常

> ID：14487558
> 
> 赞同：0
> 
> 时间：2013-01-23T19:14:43.767
> 
> 标签：java, tomcat, servlets, configuration

我正在尝试将 removeAbandoned 属性添加到运行 Tomcat 5.5 的环境中的资源中。在添加此属性之前，在此环境中运行的 servlet 可以正常工作。一旦我添加了属性，就会引发如下异常：

异常 javax.naming.NamingException：找不到属性的设置方法：removeAbandoned。

我不明白为什么会这样。一旦我删除该属性，servlet 就会再次工作。

下面是在我的环境中出现的整个 Context 标记：

```
<Context path="/emscribe" docBase="emscribe" debug="0" reloadable="true"  
crossContext="true"> 

 <Logger className="org.apache.catalina.logger.FileLogger" prefix="emscribe_log." 
 suffix=".txt" timestamp="true"/> 

 <Resource name="jdbc/emscribe" auth="Container" 
 type="com.mchange.v2.c3p0.ComboPooledDataSource" driverClass="com.mysql.jdbc.Driver"  
  maxPoolSize="100"  minPoolSize="5"   

 acquireIncrement="5"  removeAbandoned="true"
  user="aUserID"  

 password="aPassword"

 factory="org.apache.naming.factory.BeanFactory"   

  jdbcUrl="jdbc:mysql://127.000.71.101/emscribedx?autoReconnect=true" 
 /> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:28:57.907

你的例外：

```
javax.naming.NamingException: No set method found for property: removeAbandoned. 
```

声明它找不到方法`getRemoveAbandoned()`和`setRemoveAbandoned(boolean removeAbandoned)`资源中指定的类型。

该`removeAdandoned`属性只能与 Apache [DBCP BasicDataSource](http://commons.apache.org/dbcp/apidocs/org/apache/commons/dbcp/BasicDataSource.html)一起使用。

So, your resource `jdbc/emscribe` type must not be `com.mchange.v2.c3p0.ComboPooledDataSource` but rather `org.apache.commons.dbcp.BasicDataSource`.

Hope this helps.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T20:02:48.163

removeAdandoned would not work with cp30 connection pooling. Its for DBCP on older tomcat versions or apache connection pooling introduced in tomcat 7

# eclipse - RAD 是否在工作区之间共享 WAS 实例？

> ID：14487559
> 
> 赞同：1
> 
> 时间：2013-01-23T19:14:48.560
> 
> 标签：eclipse, websphere, rad, workspace

在 RAD 中，我有一个工作区 A，在该工作区中我创建了一个 WAS 6.1 服务器实例并配置了两个数据源。

现在我关闭 RAD 并打开它并指向一个新的工作区 B。现在在 B 中，我看到 WAS 6.1 已经创建并且两个数据源也已配置。为什么会这样？服务器实例是否在工作区之间共享？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:37:58.580

当您在工作空间中添加新的 WAS 配置文件实例时，您真正要做的是在您的工作空间中创建该特定配置文件的“实例”。

现在，如果您创建一个新工作区并添加相同配置文件的实例，因为它是相同的配置文件，所以数据源将在那里，因为它仍然是相同的 WAS 配置文件。

如果您想让这两个工作空间彼此完全分离，您需要创建一个新的 WAS 配置文件（使用不同的端口）。

# python - 在 Pandas Series 中删除行并清理索引

> ID：14487562
> 
> 赞同：15
> 
> 时间：2013-01-23T19:14:55.970
> 
> 标签：python, pandas, series

我有一个 Pandas 系列，我想根据一个随机数选择一行（在下面的代码示例中为 5）并删除该行。当该行被删除时，我想为剩余的行（0 到 8）创建一个新索引。下面的代码：

```
print 'Original series: ', sample_mean_series
print 'Length of original series', len(sample_mean_series)
sample_mean_series = sample_mean_series.drop([5],axis=0)
print 'Series with item 5 dropped: ', sample_mean_series
print 'Length of modified series:', len(sample_mean_series)
print sample_mean_series.reindex(range(len(sample_mean_series))) 
```

这是输出：

```
Original series:  
0    0.000074
1   -0.000067
2    0.000076
3   -0.000017
4   -0.000038
5   -0.000051
6    0.000125
7   -0.000108
8   -0.000009
9   -0.000052
Length of original series 10
Series with item 5 dropped:  
0    0.000074
1   -0.000067
2    0.000076
3   -0.000017
4   -0.000038
6    0.000125
7   -0.000108
8   -0.000009
9   -0.000052
Length of modified series: 9
0    0.000074
1   -0.000067
2    0.000076
3   -0.000017
4   -0.000038
5         NaN
6    0.000125
7   -0.000108
8   -0.000009 
```

我的问题是第 8 行被删除了。我想删除行“5 NaN”并保持 -0.000052 的索引为 0 到 8。这就是我希望它看起来的样子：

```
0    0.000074
1   -0.000067
2    0.000076
3   -0.000017
4   -0.000038
5    0.000125
6   -0.000108
7   -0.000009
8   -0.000052 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-23T19:24:09.740

这是一个单行：

```
In [1]: s
Out[1]:
0   -0.942184
1    0.397485
2   -0.656745
3    1.415797
4    1.123858
5   -1.890870
6    0.401715
7   -0.193306
8   -1.018140
9    0.262998 
```

我使用该`Series.drop`方法删除第 5 行，然后使用`reset_index`将索引重新编号为连续的。如果不使用`reset_index`，则索引将从 4 跳到 6 而没有 5。

默认情况下，`reset_index`会将原始索引移动到 a 中`DataFrame`，并将其与系列值一起返回。通过`drop=True`可以防止这种情况发生。

```
In [2]: s2 = s.drop([5]).reset_index(drop=True)

In [3]: s2
Out[3]:
0   -0.942184
1    0.397485
2   -0.656745
3    1.415797
4    1.123858
5    0.401715
6   -0.193306
7   -1.018140
8    0.262998
Name: 0 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-23T19:17:24.333

有点令人困惑，`reindex`并不意味着“创建新索引”。要创建新索引，只需分配给`index`属性。所以在你的最后一步只是做`sample_mean_series.index = range(len(sample_mean_series))`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-11-25T10:55:53.073

```
df.reset_index(drop=True, inplace = True) 
```

会做你想做的事。

重置索引时，旧索引将添加为列，并使用新的顺序索引。您可以使用 drop 参数来避免将旧索引添加为列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-05-23T16:58:45.433

To drop rows in a **dataframe** and clean up index:

```
b = df['amount'] > 10000
df_dropped = df.drop(df[~b].index).reset_index() 
```

# html - 在包含的文本周围环绕边框

> ID：14487566
> 
> 赞同：0
> 
> 时间：2013-01-23T19:15:03.740
> 
> 标签：html, css, width, border

使用下面的代码，它允许“代码块”让代码脱颖而出。有没有一种方法可以包装，但不能太紧（可能是 20px 边框？）里面的文本框？与此相关的是，有没有办法限制内部代码在被包装到下一行之前可以走多远？这将允许我将代码块的大小限制为 1000px

[小提琴](http://jsfiddle.net/cxxDC/)

HTML

```
<HTML>
    <HEAD>
        <TITLE>Sample Wiki Page</TITLE>
        <link rel='stylesheet' type = 'text/css' href = 'default.css' />
    </HEAD>
    <BODY>
        <DIV id='content'>
            <h3>Main Title</h3>
            <h2>Sub Title</h2>
                <p>
                     Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi eros odio, venenatis ut suscipit eget, vestibulum id est. Vivamus aliquet lacus sit amet enim tempus in fermentum ipsum ornare. Pellentesque tincidunt orci sed sem luctus tristique. Ut a turpis ac nisi semper luctus. Nulla mattis ornare augue, vel lacinia purus porta eu. Vestibulum pulvinar justo dolor, in ultricies tellus. Nullam semper, ante at feugiat commodo, neque eros pulvinar ante, et porttitor velit orci eu magna. Duis mattis libero vitae magna lacinia tincidunt. Vivamus placerat elit a nisi ultrices elementum. Vestibulum condimentum posuere nulla, id ornare urna mattis id. Quisque ornare risus diam. Nunc malesuada leo sit amet mauris bibendum pharetra. Integer convallis orci id lorem volutpat suscipit.

                    Vestibulum ac magna libero, non condimentum neque. Integer vestibulum, quam at tempus fermentum, mi odio dictum nibh, quis venenatis velit ligula laoreet massa. Fusce lobortis augue eu ante bibendum consequat eget posuere neque. Mauris dui lorem, fringilla et auctor a, eleifend id nisi. Sed nunc tortor, blandit et malesuada quis, posuere pellentesque lorem. Nunc vehicula lectus eget tortor tempus sed pharetra diam luctus. Aenean odio leo, accumsan a vestibulum ut, tincidunt in mi. Curabitur commodo venenatis dolor, ultrices placerat nibh tempor nec. Duis eget odio mi, id imperdiet lectus. Aenean luctus bibendum arcu non egestas.
                </p>
            <h2>Code Section</h2>
            <pre>
                <xmp>
<HTML>
    <HEAD>
        <TITLE>Sample Wiki Page</TITLE>
        <link rel='stylesheet' type = 'text/css' href = 'default.css' />
    </HEAD>
    <BODY>
        <h3>Main Title</h3>
        <h2>Sub Title</h2>
             Lorem ipsum dolor sit amet, consectetur adipiscing elit. Morbi eros odio, venenatis ut
             suscipit eget, vestibulum id est. Vivamus aliquet lacus sit amet enim tempus in fermentum 
             ipsum ornare. Pellentesque tincidunt orci sed sem luctus tristique. Ut a turpis ac nisi 
             semper luctus. Nulla mattis ornare augue, vel lacinia purus porta eu. Vestibulum pulvinar 
             justo dolor, in ultricies tellus. Nullam semper, ante at feugiat commodo, neque eros 
             pulvinar ante, et porttitor velit orci eu magna. Duis mattis libero vitae magna lacinia 
             tincidunt. Vivamus placerat elit a nisi ultrices elementum. Vestibulum condimentum posuere 
             nulla, id ornare urna mattis id. Quisque ornare risus diam. Nunc malesuada leo sit amet 
             mauris bibendum pharetra. Integer convallis orci id lorem volutpat suscipit.

            Vestibulum ac magna libero, non condimentum neque. Integer vestibulum, quam at tempus 
            fermentum, mi odio dictum nibh, quis venenatis velit ligula laoreet massa. Fusce lobortis 
            augue eu ante bibendum consequat eget posuere neque. Mauris dui lorem, fringilla et auctor 
            a, eleifend id nisi. Sed nunc tortor, blandit et malesuada quis, posuere pellentesque lorem
            . Nunc vehicula lectus eget tortor tempus sed pharetra diam luctus. Aenean odio leo, 
            accumsan a vestibulum ut, tincidunt in mi. Curabitur commodo venenatis dolor, ultrices 
            placerat nibh tempor nec. Duis eget odio mi, id imperdiet lectus. Aenean luctus bibendum 
            arcu non egestas.
        <h2>Code Section</h2>
        <pre>
        </pre>
    </BODY>
</HTML>
            </xmp>
            </pre>
        </DIV>
    </BODY>
</HTML> 
```

CSS

```
#content pre {
    padding: 1em;
    border: 1px dashed #2f6fab;
    color: black;
    background-color: #f9f9f9;
    white-space: pre;
    margin: 1em 0px;
    display: block;
    font-family: monospace,Courier;
    line-height: 1.1em;
    width:70%;
}

#content h3{
    font-size: 188%;
    line-height: 1.2em;
    color: black;
    background: none;
    font-weight: normal;
    margin: 0;
    overflow: hidden;
    padding-top: .5em;
    padding-bottom: .17em;
    border-bottom: 1px solid #aaa;
    margin-bottom: 1.2em;
}
#content h1, h2 {
    color: black;
    background: none;
    font-weight: normal;
    margin: 0;
    overflow: hidden;
    padding-top: .5em;
    padding-bottom: .17em;
    border-bottom: 1px solid #aaa;
    width: 40%;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:20:40.193

您需要添加`white-space: pre-wrap;`到`xmp`标签。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:32:46.270

我相信 xmp 标签已经被弃用了一段时间。您应该对文本进行编码以将“非法”字符转换为 html 实体。许多 IDE 提供此功能，或者您可以使用一些脚本或在线工具。

此外，当您使用 pre 标签时，不可能自动换行，这正是 pre 的用途。

我建议你改变你的方法，看看这样的东西：[http ://code.google.com/p/google-code-prettify/](http://code.google.com/p/google-code-prettify/)

这种方式还可以具有代码着色等的好处。

# objective-c - 异步调用不刷新表

> ID：14487575
> 
> 赞同：0
> 
> 时间：2013-01-23T19:15:46.350
> 
> 标签：objective-c, uitableview, asynchronous

我注意到一些非常奇怪的行为，我希望看看是否有其他人遇到过这种情况。我正在进行异步 api 调用（下面的代码）。当调用完成时，从调用结果中填充一个数组，然后我重新加载我的表（这应该会导致`cellForRowAtIndexPath`被调用），它应该用我的数组数据更新我的表视图。但是，tableview 中的数据仍然不会出现，直到需要从其他方式重新加载 - 例如，如果我通过单击选项卡更改视图然后返回到原始视图。似乎我缺少“刷新表”的某些方面，但是`reloadData`当异步调用返回时我正在调用。

代码：

```
-(void)refreshWeeksOffers
{
    [array removeAllObjects];

    NSMutableURLRequest *request =
        [WebRequests createPostRequestWithApiCall:@"getResults" bodyData:@"params={\"locale\" : \"US\"}"];

    [NSURLConnection
     sendAsynchronousRequest:request
     queue:[[NSOperationQueue alloc] init]
     completionHandler:^(NSURLResponse *response,
                         NSData *data,
                         NSError *error)
     {
         if ([data length] >0 && error == nil)
         {
             // parse home page offers from resulting json
             JsonParser *parser = [[JsonParser alloc] initWithData:data];
             array = [parser parseHomepageResults];

             [self.topWeekTable reloadData];

         }
         else if ([data length] == 0 && error == nil)
         {
             NSLog(@"Nothing was downloaded.");
         }
         else if (error != nil){
             NSLog(@"Error = %@", error);
         }

     }];

    [self.topWeekTable reloadData];
}

-(NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

-(NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [array count];
}

-(UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *cellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:cellIdentifier];

    if(!cell)
    {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:cellIdentifier];
    }

    Offer *currentOffer = (Offer *)[array objectAtIndex:indexPath.row];

    cell.textLabel.text = [NSString stringWithFormat:@"%.1f%% Back", currentOffer.advertisedRate];

    NSData *data = [NSData dataWithContentsOfURL:currentOffer.storeImage];
    UIImage *img = [[UIImage alloc] initWithData:data];

    cell.imageView.image = img;

    return cell;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:27:53.057

这是因为您正在从不支持的后台线程调用 UIKit。

试试这个：

```
[ self.tableView performSelectorOnMainThread:@selector( reloadData ) withObject:nil waitUntilDone:NO ] ; 
```

我喜欢的另一个策略是这样的：

```
-(void)startAsyncSomething
{
    [ obj operationWithAsyncHandler:^{
        [ [ NSThread mainThread ] performBlock:^{
            ... handle completion here ...
        } ]
    }]
} 
```

您可以使用如下类别添加`-performBlock:`到**NSThread**：

```
@implementation NSThread (BlockPerforming)

-(void)performBlock:(void(^)())block
{
    if ( !block ) { return ; }
    [ self performSelector:@selector( performBlock: ) onThread:self withObject:[ block copy ] waitUntilDone:NO ] ;
}

@end 
```

# java - 通过 REST Web 服务获取数据会出现异常

> ID：14487582
> 
> 赞同：3
> 
> 时间：2013-01-23T19:16:04.117
> 
> 标签：java, web-services, rest, netbeans, glassfish-3

我正在尝试创建一个使用 REST 将数据传递给客户端的 Web 服务。我现在遇到两个问题，一个在客户端，一个在服务器端。我一直在尝试很多事情，但我比以前更加卡住了。我希望你们中的任何人都可以帮助我。

我尝试通过浏览器并通过应用程序接近 Web 服务。如果我直接通过 URL 访问服务器，则会收到以下错误消息：

```
SEVERE: A message body writer for Java class java.util.ArrayList, and Java type java.util.Collection<domain.Tweet>, and MIME media type text/plain was not found
SEVERE: The registered message body writers compatible with the MIME media type are:
text/plain ->
  com.sun.jersey.core.impl.provider.entity.StringProvider
  com.sun.jersey.core.impl.provider.entity.ReaderProvider
*/* ->
  com.sun.jersey.core.impl.provider.entity.FormProvider
  com.sun.jersey.core.impl.provider.entity.MimeMultipartProvider
  com.sun.jersey.core.impl.provider.entity.StringProvider
  com.sun.jersey.core.impl.provider.entity.ByteArrayProvider
  com.sun.jersey.core.impl.provider.entity.FileProvider
  com.sun.jersey.core.impl.provider.entity.InputStreamProvider
  com.sun.jersey.core.impl.provider.entity.DataSourceProvider
  com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General
  com.sun.jersey.core.impl.provider.entity.ReaderProvider
  com.sun.jersey.core.impl.provider.entity.DocumentProvider
  com.sun.jersey.core.impl.provider.entity.StreamingOutputProvider
  com.sun.jersey.core.impl.provider.entity.SourceProvider$SourceWriter
  com.sun.jersey.server.impl.template.ViewableMessageBodyWriter
  com.sun.jersey.json.impl.provider.entity.JSONJAXBElementProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONArrayProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONObjectProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONWithPaddingProvider
  com.sun.jersey.core.impl.provider.entity.XMLRootElementProvider$General
  com.sun.jersey.core.impl.provider.entity.XMLListElementProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONRootElementProvider$General
  com.sun.jersey.json.impl.provider.entity.JSONListElementProvider$General
  com.sun.jersey.json.impl.provider.entity.JacksonProviderProxy
  com.sun.jersey.moxy.MoxyMessageBodyWorker
  com.sun.jersey.moxy.MoxyListMessageBodyWorker 
```

如果我运行客户端应用程序，我会收到以下错误消息：

```
Exception in thread "AWT-EventQueue-0" com.sun.jersey.api.client.UniformInterfaceException: GET http://localhost:8080/KwetterSOAP/resources/rest/user/Hans/tweets returned a response status of 500 Internal Server Error
    at com.sun.jersey.api.client.WebResource.handle(WebResource.java:688)
    at com.sun.jersey.api.client.WebResource.access$300(WebResource.java:74)
    at com.sun.jersey.api.client.WebResource$Builder.get(WebResource.java:508)
    at service.RestClient.getTweets(RestClient.java:52)
    at kwettermonitor.KwetterFollowing.btnZoekFollowersActionPerformed(KwetterFollowing.java:103)
    at kwettermonitor.KwetterFollowing.access$000(KwetterFollowing.java:20)
    at kwettermonitor.KwetterFollowing$1.actionPerformed(KwetterFollowing.java:54)
    at javax.swing.AbstractButton.fireActionPerformed(AbstractButton.java:2018)
    at javax.swing.AbstractButton$Handler.actionPerformed(AbstractButton.java:2341)
    at javax.swing.DefaultButtonModel.fireActionPerformed(DefaultButtonModel.java:402)
    at javax.swing.DefaultButtonModel.setPressed(DefaultButtonModel.java:259)
    at javax.swing.plaf.basic.BasicButtonListener.mouseReleased(BasicButtonListener.java:252)
    at java.awt.Component.processMouseEvent(Component.java:6505)
    at javax.swing.JComponent.processMouseEvent(JComponent.java:3321)
    at java.awt.Component.processEvent(Component.java:6270)
    at java.awt.Container.processEvent(Container.java:2229)
    at java.awt.Component.dispatchEventImpl(Component.java:4861)
    at java.awt.Container.dispatchEventImpl(Container.java:2287)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.LightweightDispatcher.retargetMouseEvent(Container.java:4832)
    at java.awt.LightweightDispatcher.processMouseEvent(Container.java:4492)
    at java.awt.LightweightDispatcher.dispatchEvent(Container.java:4422)
    at java.awt.Container.dispatchEventImpl(Container.java:2273)
    at java.awt.Window.dispatchEventImpl(Window.java:2713)
    at java.awt.Component.dispatchEvent(Component.java:4687)
    at java.awt.EventQueue.dispatchEventImpl(EventQueue.java:707)
    at java.awt.EventQueue.access$000(EventQueue.java:101)
    at java.awt.EventQueue$3.run(EventQueue.java:666)
    at java.awt.EventQueue$3.run(EventQueue.java:664)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:87)
    at java.awt.EventQueue$4.run(EventQueue.java:680)
    at java.awt.EventQueue$4.run(EventQueue.java:678)
    at java.security.AccessController.doPrivileged(Native Method)
    at java.security.ProtectionDomain$1.doIntersectionPrivilege(ProtectionDomain.java:76)
    at java.awt.EventQueue.dispatchEvent(EventQueue.java:677)
    at java.awt.EventDispatchThread.pumpOneEventForFilters(EventDispatchThread.java:211)
    at java.awt.EventDispatchThread.pumpEventsForFilter(EventDispatchThread.java:128)
    at java.awt.EventDispatchThread.pumpEventsForHierarchy(EventDispatchThread.java:117)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:113)
    at java.awt.EventDispatchThread.pumpEvents(EventDispatchThread.java:105)
    at java.awt.EventDispatchThread.run(EventDispatchThread.java:90) 
```

Web服务已创建如下：

```
@Path("/rest")
@Stateless
public class RESTService {

    @Inject @Named(value = "kwetterService")
    private KwetterService service;

    @GET
    @Path("/user/{user}")
    @Produces(MediaType.TEXT_PLAIN)
    public User getUser(@PathParam("user") String userName)
    {
        return service.findByName(userName);
    }

    @GET
    @Path("/user/{user}/tweets")
    @Produces(MediaType.TEXT_PLAIN)
    public Collection<Tweet> getTweets(@PathParam("user") String userName)
    {
        System.out.println("Service: " + service);
        User user = service.findByName(userName);
        System.out.println(userName);
        System.out.println(user);
        return user.getTweets();
    } 
```

客户端如下：

```
public class RestClient {
    private WebResource webResource;
    private Client client;
    private static final String BASE_URI = "http://localhost:8080/KwetterSOAP/resources";

    public RestClient() {
        DefaultClientConfig config = new DefaultClientConfig();
        client = Client.create(config);
        webResource = client.resource(BASE_URI).path("rest");
    }

    public User getUser(String userName) throws UniformInterfaceException {
        final WebResource.Builder userResource = webResource
           .path(String.format("/user/%s", userName))
           .accept(MediaType.TEXT_PLAIN) ;
        return userResource.get(User.class);
    }

    public Collection<Tweet> getTweets(String userName) throws UniformInterfaceException {
        final WebResource.Builder tweetResource = webResource
           .path(String.format("/user/%s/tweets", userName))
           .accept(MediaType.TEXT_PLAIN);
        return tweetResource.get(new GenericType<Collection<Tweet>>(){});
    } 
```

我也有点困惑的是，在哪里放置 @XML... 注释。我已将服务注释为根元素：

```
@Named(value = "kwetterService")
@Stateless
@XmlRootElement
public class KwetterService { 
```

我没有注释使用的方法：

```
public User findByName(String name)
    {
        return userDAO.getUser(name);
    } 
```

UserDAO 处理数据库中的数据。我在这里没有为 REST/XML 添加任何内容。我也将 User 设为 XMLRootElement：

```
@Entity
@XmlRootElement
@Table(name="Users")
public class User implements Serializable { 
```

在 getTweets() 方法中，我添加了 XMLElement 注释：

```
@XmlElement
    public Collection<Tweet> getTweets() {
        List<Tweet> temp = new ArrayList<Tweet>(tweets);
        Collections.reverse(temp);
        return temp;
    } 
```

我自己的猜测是我对方法和类的整个注释是错误的。你能看到任何错误吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T19:51:28.733

请记住，JAX-RS 的核心是建立在 HTTP 之上，而 HTTP 不知道也不关心 Java 对象。当您从资源方法返回对象时，必须将它们转换为请求客户端可以使用的数据。此翻译由名为[MessageBodyWriters](http://jsr311.java.net/nonav/javadoc/javax/ws/rs/ext/MessageBodyWriter.html)的实体完成，并且所有 JAX-RS 实现都需要附带一组预打包的实体。不幸的是，没有要求实现能够将您的对象转换为 TEXT_PLAIN。从您发布的堆栈跟踪中，您实际上可以看到没有提供者能够处理该媒体类型：

```
com.sun.jersey.core.impl.provider.entity.FormProvider
com.sun.jersey.core.impl.provider.entity.MimeMultipartProvider
com.sun.jersey.core.impl.provider.entity.StringProvider
com.sun.jersey.core.impl.provider.entity.ByteArrayProvider
com.sun.jersey.core.impl.provider.entity.FileProvider
com.sun.jersey.core.impl.provider.entity.InputStreamProvider
com.sun.jersey.core.impl.provider.entity.DataSourceProvider
com.sun.jersey.core.impl.provider.entity.XMLJAXBElementProvider$General
com.sun.jersey.core.impl.provider.entity.ReaderProvider
com.sun.jersey.core.impl.provider.entity.DocumentProvider
com.sun.jersey.core.impl.provider.entity.StreamingOutputProvider
com.sun.jersey.core.impl.provider.entity.SourceProvider$SourceWriter 
```

但是，所有 JAX-RS 实现***必须***提供的一种转换是从 Java 对象到 XML。所以你可以安全地使用它作为你的数据格式。仅显示更改，您需要合并到现有代码中：

***Java 豆***：

```
@Entity
@XmlRootElement
@Table(name="Users")
public class User implements Serializable {

    @XmlWrapperElement("tweets")
    public Collection<Tweet> getTweets() {
        List<Tweet> temp = new ArrayList<Tweet>(tweets);
        Collections.reverse(temp);
        return temp;
    }
} 
```

***服务器***：

```
@Path("/rest")
@Stateless
public class RESTService {
    @GET
    @Path("/user/{user}")
    @Produces(MediaType.APPLICATION_XML)
    public User getUser(@PathParam("user") String userName);

    @GET
    @Path("/user/{user}/tweets")
    @Produces(MediaType.APPLICATION_XML)
    public Collection<Tweet> getTweets(@PathParam("user") String userName);
} 
```

***客户***：

```
public class RestClient {
    public User getUser(String userName) throws UniformInterfaceException {
        final WebResource.Builder userResource = webResource
           .path(String.format("/user/%s", userName))
           .accept(MediaType.APPLICATION_XML) ;
        return userResource.get(User.class);
    }

    public Collection<Tweet> getTweets(String userName)
        throws UniformInterfaceException {
        final WebResource.Builder tweetResource = webResource
           .path(String.format("/user/%s/tweets", userName))
           .accept(MediaType.APPLICATION_XML);
        return tweetResource.get(new GenericType<Collection<Tweet>>(){});
    }
} 
```

# function - 平方和乘法后的反函数

> ID：14487585
> 
> 赞同：0
> 
> 时间：2013-01-23T19:16:17.537
> 
> 标签：function, inverse

我正在尝试编写两个反函数。如果我们将值 10 传递给函数 A，它会返回例如 4,86，如果我们将该数字传递给函数 B，它应该返回原始 10。

我在函数A中使用了这样的东西：

**输出 = sqrt(inputForA / range) * inputForA;**

那么是否可以在函数 B 中反转它并仅知道输出和范围来计算 inputForA。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:25:04.753

你只需要使用基本的数学。`output = pow(inputForA, 3\. / 2.) * pow(range, 1\. / 2.)`所以`inputForA = pow(output * pow(range, 1\. / 2.), 2\. / 3.)`。这仅在`inputForA`和`scale`具有相同符号时才有效，但第一个函数仅在该间隔上定义，所以这没关系（因为`sqrt`只为正值定义）。

在 Python 中：

```
scale = 7.

def f(x):
    return math.sqrt(x / scale) * x

def g(y):
    return math.pow(y * math.pow(scale, 1\. / 2), 2\. / 3)

print g(f(10))
10.0

print f(g(10))
10.0 
```

您也可以使用[Wolfram alpha](http://www.wolframalpha.com/input/?i=inv%28sqrt%28x%20/%20theta%29%20*%20x%29)来获得答案：![在此处输入图像描述](../Images/bfd1c73c87853e23ea330f633d76e9b6.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:37:21.543

您只需要考虑该等式以挑出 inputForA。以下是代数步骤：

输出 = sqrt(inputForA / range) * inputForA

输出 / inputForA = sqrt(inputForA / 范围)

sq(输出) / sq(inputForA) = inputForA / 范围

范围 * sq(输出) / sq(inputForA) = inputForA

范围 * sq（输出）= 立方体（inputForA）

因此，范围乘以输出平方的立方根应该可以为您提供原始输入。不过，我没有很好的方法在这里展示它......

# c - 如何在 C 中包含标题目录

> ID：14487586
> 
> 赞同：2
> 
> 时间：2013-01-23T19:16:23.380
> 
> 标签：c, header, include

我想知道如何在 C 程序中包含一个包含多个头文件的目录，而不是一个一个地包含所有头文件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:17:37.880

这在 C 中是不可能直接实现的。您必须单独包含头文件或在您的 makefile 中进行某种预处理步骤，该步骤合成一个包含其他头文件的头文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T19:17:52.000

C 中没有这样的工具。创建一个包含该目录中所有内容的*主*头文件，并让您的客户包含该文件。

附注：最好知道你到底在做什么`#include`，即手工挑选需要的头文件，而不是做这件事来避免名称冲突、意外的宏扩展、循环依赖等等。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T19:18:08.377

您可以编写一个单独包含其他标题的标题，然后将此标题包含在其他地方。但是一个包含指令只能包含一个标头。

# javascript - 即使在脚本之前加载 jQuery，Firebug 也会给出 jQuery“$ 未定义”错误

> ID：14487588
> 
> 赞同：0
> 
> 时间：2013-01-23T19:16:35.720
> 
> 标签：javascript, jquery

好的，所以我有一个 WordPress 网站。它使用了相当多的 jQuery 脚本，并且 jQuery 被加载到页面的标题中。我有一小段代码应该可以简单地为图像链接添加一个类。我把它放在文档的底部，就在`</body>`标签之前。

```
<script type="text/javascript">
$.noConflict();
$(document).ready(function () {
$('a[href*=".png"], a[href*=".gif"], a[href*=".jpg"]').addClass('zoom');
});
</script> 
```

该脚本不起作用，Firebug 给了我一个`$ is undefined`错误。我检查了各种类似的其他问题，答案似乎没有帮助。

源页面在这里：[http ://sergedenimes.com/2013/01/bruno-bisang-30-years-of-polaroids/](http://sergedenimes.com/2013/01/bruno-bisang-30-years-of-polaroids/)

我确定这是另一个导致冲突的插件，但我希望能提供有关如何解决此问题的任何指导。

编辑：哇，感谢您的快速响应。似乎这是一个较早的插件呈现`$`未定义。更换`jQuery`已解决。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T19:18:35.870

您之前已经`jQuery.noConflict();`在代码中做过，因此`$`未定义。

查看源代码的第 79 行。

![](../Images/828a0c3b295df6fed76e433c8dcd5c1f.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T19:19:45.503

`$.noConflict();`使`$`符号回到加载 jQuery 之前的先前定义。如果没有其他库使用该符号，则返回到`undefined`. 这就是它的目的。

如果您打算使用它并且不定义任何其他符号作为 的快捷方式`jQuery`，那么您必须使用`jQuery`jQuery 函数的符号而不是`$`.

改为这样做：

```
<script type="text/javascript">
$.noConflict();
jQuery(document).ready(function () {
    jQuery('a[href*=".png"], a[href*=".gif"], a[href*=".jpg"]').addClass('zoom');
});
</script> 
```

或者，如果您只是尝试`$`在处理程序内部使用`.ready()`，那么您可以使用以下功能分配它`.ready()`：

```
<script type="text/javascript">
$.noConflict();
jQuery(document).ready(function ($) {
    $('a[href*=".png"], a[href*=".gif"], a[href*=".jpg"]').addClass('zoom');
});
</script> 
```

或者，如果您的代码不仅在`.ready()`要使用的处理程序中`$`，您可以`$`在闭包中重新定义，让其他库`$`在自己的代码中使用，但您可以在闭包内的 jQuery 代码中将其用于 jQuery：

```
<script type="text/javascript">
$.noConflict();
(function($) {
    $(document).ready(function () {
        $('a[href*=".png"], a[href*=".gif"], a[href*=".jpg"]').addClass('zoom');
    });
    $.each(whatever...)
})(jQuery);
</script> 
```

或者，您可以为 jQuery 定义一个新的快捷方式符号：

```
<script type="text/javascript">
var $$ = $.noConflict();
$$(document).ready(function () {
    $$('a[href*=".png"], a[href*=".gif"], a[href*=".jpg"]').addClass('zoom');
});
</script> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T19:18:23.277

尝试：

```
<script type="text/javascript">
    jQuery.noConflict();
    jQuery(document).ready(function($) {
        $('a[href*=".png"], a[href*=".gif"], a[href*=".jpg"]').addClass('zoom');
    });
</script> 
```

# css - PySide：样式表css的pyside-uic预览与app中实际显示不同

> ID：14487589
> 
> 赞同：1
> 
> 时间：2013-01-23T19:16:53.990
> 
> 标签：css, qt, pyside, preview, qwidget

我在 Microsoft Windows Vista 的 Qt Designer(4.8.2) 中设计了一个 mainwindow.ui，在预览并满意结果后，我使用 pyside-uic 并得到了生成的 mainwindow.py。但是当我运行我的应用程序时，显示与我在**Qt Designer 预览**中看到的不同，并且与**pyside-uic --preview**的预览不同：

我用来预览的内容：

```
pyside-uic mainwindow.py -p 
```

我的应用程序的**初始化**：

```
from PySide.QtGui import QApplication, QMainWindow
from mainwindow import Ui_MainWindow
import sys

class bookcalendar(Ui_MainWindow, QMainWindow):

    def __init__(self):

        super(bookcalendar, self).__init__()
        self.setupUi(self)

app = QApplication(sys.argv)
form = bookcalendar()
form.show()
app.exec_() 
```

我看到运行 pyside-uic -p 脚本，

![](../Images/a73601d19521959bbf80ce0f7cdd7290.png)

我看到正在运行的 .py 文件，

![](../Images/4e2ba07ff51c8d696081b3e039a690b1.png)

```
stackedWidget(parent)

--bookStack      <-     my style sheet css

--calendarStack      <-     my style sheet css 
```

缺少灰色边框的 css：

```
#bookStack{
    "border: 3px solid gray;
    "background-color: white;} 
```

嗯，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T07:38:06.867

我找到了答案，解决方法是在父级中添加样式表css，例如：

```
stackedWidget(parent)      <-     style sheet css

--bookStack

--calendarStack 
```

做css样式表的正确方法：

```
#stackedWidget{
    "border: 3px solid gray;
    "background-color: white;} 
```

# extjs - 动态改变文本字段的文本颜色

> ID：14487591
> 
> 赞同：1
> 
> 时间：2013-01-23T19:16:59.730
> 
> 标签：extjs, extjs3

团队，

我面临一个问题，我无法更改 xtype:textfield 的文本颜色。我正在使用 EXTJS 3.4

要求最初以灰色显示默认文本，例如“在此处填写您的详细信息”。

但是当用户关注该字段时，我将删除默认文本，以便用户可以输入适当的值。

当用户输入一些值时，我想将文本的颜色从灰色更改为黑色。有什么方法可以用 ExtJS 3.4 做到这一点

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:59:04.433

您应该能够使用 emptyText 配置。 [http://docs.sencha.com/ext-js/3-4/#!/api/Ext.form.TextField-cfg-emptyText](http://docs.sencha.com/ext-js/3-4/#!/api/Ext.form.TextField-cfg-emptyText)。它最初显示为灰色，当用户输入一个值时它会清除并且输入的文本是黑色的。

```
new Ext.form.TextField({renderTo: Ext.getBody(), emptyText: 'Fill Details Here'}) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T12:05:31.110

为什么不能使用

```
new Ext.form.TextField({renderTo: Ext.getBody(), id:'textId', emptyText: 'Fill Details Here'}) 
```

并在提交时检查是否为空并清空两者并进行验证。

```
Ext.Button({
text:'title',
handler:function(btn,optn){
var value = Ext.getCmp('textId').getValue(); 
```

// 这里 .getValue() 删除未定义和空文本并给出为 ''

```
if(value === ''){
   Ext.msg.alert('Validation', 'Please fill all the mandatory fields');
}
} 
```

});

# ruby - 如何评估`Proc#==`？

> ID：14487601
> 
> 赞同：15
> 
> 时间：2013-01-23T19:17:40.523
> 
> 标签：ruby, equality, proc

如何`Proc#==`评价？[RDoc](http://www.ruby-doc.org/core-1.9.3/Proc.html#method-i-3D-3D)说：

> prc == other_proc → 真或假
> 
> 如果 prc 与 other_proc 是同一个对象，或者它们都是具有相同主体的 proc，则返回 true。

但不清楚什么算作“同一个身体”。一个条件似乎是 arity 必须相同：

```
->{} == ->{} # => true
->{} == ->x{} # => false
->x{} == ->x{} # => true
->x{} == ->y{} # => true
->x{} == ->y,z{} # => false 
```

但不止于此。正如 RDoc 所说，身体很重要：

```
->{nil} == ->{nil} # => true
->{nil} == ->{false} # => false
->{false} == ->{false} # => true 
```

但与此同时，proc 似乎没有被完全评估：

```
->{} == ->{nil} # => false
->{false} == ->{1 == 2} # => false 
```

身体被评估到什么程度？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-23T19:53:43.027

这[在 Ruby 2.0 中发生了变化](https://github.com/ruby/ruby/blob/f031aec4233d7a6d4622c048abed3e86eb5dd6c2/NEWS#L127-130)，所以你不应该尝试比较`Proc`s。`==`除非它们是完全相同的对象，否则它们不会。

可以[在这里找到](http://bugs.ruby-lang.org/issues/4559)讨论。

如果您确实需要比较两个块的代码并且正在使用[MRI](http://en.wikipedia.org/wiki/Ruby_MRI)，您可以使用`RubyVM::InstructionSequence.disassemble(block)`Ruby 2.0，甚至更好`RubyVM::InstructionSequence.of(block)`。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T19:58:02.733

要回答这个问题，让我们看看 proc 比较代码

```
static VALUE
proc_eq(VALUE self, VALUE other)
{
    if (self == other) {
        return Qtrue;
    }
    else {
        if (rb_obj_is_proc(other)) {
           rb_proc_t *p1, *p2;
           GetProcPtr(self, p1);
           GetProcPtr(other, p2);
           if (p1->envval == p2->envval &&
              p1->block.iseq->iseq_size == p2->block.iseq->iseq_size &&
              p1->block.iseq->local_size == p2->block.iseq->local_size &&
              MEMCMP(p1->block.iseq->iseq, p2->block.iseq->iseq, VALUE,
                    p1->block.iseq->iseq_size) == 0) {
                 return Qtrue;
           }
       }
    }
    return Qfalse;
} 
```

第一个 if 分支非常简单 - 比较它的两个 proc 是同一个对象。第二个有点棘手。它检查两个 proc 是否具有相同的 envval、iseq（proc 实现）的大小、局部变量的大小，并比较两个实现是否相同。这意味着在语法级别而不是在 proc 结果上检查 proc 相等性。

让我们以[https://gist.github.com/4611935](https://gist.github.com/4611935) 第一个示例工作得很好，因为局部变量的数量相同并且操作顺序相同。将 123 分配给局部变量。第二个样本被视为不相同，因为操作顺序不同 - 您将 123 分配给不同的变量。

但是，是的，proc 比较非常令人困惑，并且我认为已从 ruby​​ 2.0 中删除。现在 procs 通过其 id 与常规对象进行比较。

# mercurial - Mercurial Glob 语法以匹配文件名中的字符

> ID：14487609
> 
> 赞同：0
> 
> 时间：2013-01-23T19:18:18.530
> 
> 标签：mercurial

我有时间试图找出忽略与特定模式匹配的文件的语法，即：Com.Example/Com.Example.DomainModel23012013101705.somefileextension。该变量似乎是嵌入文件名的日期（23012013101705）

我试过 [0-9].somefileextension 和其他模式都无济于事。

谢谢你，斯蒂芬

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:39:54.493

遗憾的是，Ry4an 犯了错误。Grep() 不适用于文件名。

**我的“试验场”**

```
>dir /B
.hg
404.php
archive.php
archives.php
comments.php
footer.php
functions.php
header.php
html5.js
image.php
index.php
license.txt
links.php
page.php
readme.txt
screenshot.png
search.php
sidebar.php
single.php
style.css 
```

**测试**

```
>hg locate "set:grep(html5)\.php"
hg: parse error at 11: invalid token 
```

* * *

```
>hg locate "set:grep(html5)"
header.php
readme.txt 
```

注意：找到**的文件中包含文本**“html5”，但**没有文件**html5.js

* * *

```
>hg locate "set:s[a-z]+\.php"
abort: \.php not under root

>hg locate "set:s[a-z]+.php"

>hg locate "set:s[a-z]+"
hg: parse error at 7: not a prefix: end

>hg locate "set:s\w+"
hg: parse error at 4: not a prefix: end 
```

所有带有`set:`前缀和正则表达式的测试都失败了

* * *

带有集合的不同全局模式：

```
>hg locate "set:s**.php"
search.php
sidebar.php
single.php

>hg locate "set:s**.*"
screenshot.png
search.php
sidebar.php
single.php
style.css

>hg locate "set:s**e.*"
single.php
style.css 
```

* * *

文件集中的正则表达式模式

```
>hg locate "re:s[a-z]+.php"
search.php
sidebar.php
single.php

>hg locate "re:s[a-z]+."
screenshot.png
search.php
sidebar.php
single.php
style.css 
```

**恢复**

`hg forget "re:Com\.Example\.DomainModel[0-9]+\.somefileextension$"`

或者

`hg forget "set:Com.Example.DomainModel**.somefileextension"`

和相同的设置为 hgignore

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T01:31:16.360

使用正则表达式而不是全局。Mercurial 支持它支持的任何地方。那`.hgignore`将是：

```
syntax: regexp
[0-9]\.somefileextension 
```

该正则表达式与您尝试的 glob 匹配，但您当然可以将其缩小为：

```
syntax: regexp
^Com\.Example/Com\.Example\.DomainModel\d+\.somefileextension$ 
```

# css - 如何强制行内块元素换行？

> ID：14487610
> 
> 赞同：20
> 
> 时间：2013-01-23T19:18:20.330
> 
> 标签：css, backbone.js

我有一个内联块 div。

```
.element {
display: inline-block;
} 
```

我使用 jquery 将其重复附加到 DOM。

```
 var element = $("<div class='element'>");
  $(body).append(element).append(element).append(element).append(element); 
```

但是附加的 div 不换行。就好像我有以下标记（没有换行符）

```
<div class="element"></div><div class="element"></div><div class="element"></div><div class="element"></div> 
```

在元素之间添加空格并不能解决问题：

```
 $(body).append(element).append(" "); 
```

如何强制这些元素换行？（我不想使用花车）。

* * *

## 回答 #1

> 赞同：32
> 
> 时间：2013-01-23T19:34:47.887

如果它们只是`div`设置为的元素，`inline-block`它们应该像这样包装：http: [//jsfiddle.net/72cYy/](http://jsfiddle.net/72cYy/)

检查并确保它们的容器/父元素没有`white-space:nowrap`. 这将导致他们不包装。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T19:30:59.947

您可以按百分比给出元素宽度。更改与元素数量和包装方式有关的百分比值。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:27:07.477

我建议使用 css 为元素类设置样式以创建空白。如果您不想这样做，您可以随时尝试附加一个不间断的空格。

```
var element = $("<div class='element' />&nbsp;"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-12-18T16:19:50.263

或者，如果没有使用 ::before 伪元素，您可以利用它的功能来解决这个问题。

```
element:before { /* single : to support older browsers */
    display:block;
    width:100%;
} 
```

这是**内联**元素的解决方案

# javascript - 如何强制秒出现在 HTML5“时间”输入控件上？

> ID：14487621
> 
> 赞同：47
> 
> 时间：2013-01-23T19:18:50.207
> 
> 标签：javascript, html, time

当我使用 JavaScript 设置 HTML5“时间”对象的值时，如下所示：

```
document.getElementById("settime").value = "13:24:59"; 
```

它将显示一个带有“13:24:59”的时间控件，我可以更改所有内容。但如果我这样做：

```
document.getElementById("settime").value = "13:25:00"; 
```

它隐藏了秒，只显示“13:25”而没有秒。在这种情况下如何强制“00”秒出现？

（顺便说一句，这是在谷歌浏览器中。）

* * *

## 回答 #1

> 赞同：128
> 
> 时间：2013-01-23T19:24:39.137

设置`step`属性。

前任：`<input id="settime" type="time" step="1" />`

```
document.getElementById("settime").value = "13:24:00";
```

```
<input id="settime" type="time" step="1" />
```

关于[step 属性](http://www.w3.org/wiki/HTML5_form_additions#.3Cinput_type.3D.22date.22.3E_and_other_date.2Ftime_controls)的注释：

step 属性可以与数字输入值一起使用，以指示您可以输入的值的粒度。例如，您可能希望用户输入特定时间，但只能以 30 分钟为增量。在这种情况下，我们可以使用 step 属性，记住对于时间输入，属性的值以秒为单位。例如，30 分钟的增量将具有 1800 的步长值。`<input type="time" step="1800">`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2022-02-02T20:56:43.917

Step=1 不适用于 chrome/iOS

# objective-c - Cocoa Touch 类的推荐实例变量初始化位置

> ID：14487625
> 
> 赞同：0
> 
> 时间：2013-01-23T19:19:07.920
> 
> 标签：objective-c, cocoa-touch

我感觉很愚蠢，但是......在自定义类型中初始化实例变量***的正确方法***是什么，派生自 Cocoa Touch UI 类？

假设我有类型，源自`UIViewController`，让它成为`TRUIController`。我定义了一个 ivar，如下所示：

```
@implementation TRUIController
{
    NSNumberFormatter *_numberFormatter;
}
@end 
```

我应该把`_numberFormatter`初始化代码放在哪里，如果我希望它在任何 UI 方法之前执行`viewDidLoad`，等等？

在其他语言中，我会创建`constructor`、调用`base` `constructor`然后初始化我的 ivars。但这根本不适用于`objective-c`and `Cocoa Touch`。

在上述情况下，如果我写

```
-(id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibBundleOrNil bundle:nibBundleOrNil];
    if(self)
    {
        //init ivars
    }
    return self;
} 
```

不行，我再试试别的`initWithBlaBla`方法，最后find `init`，***其实就是调用***的，那样的话——`initWithCoder:`

现在，假设我有从 UITableViewCell 派生的类。同样，需要初始化`NSNumberFormatter`ivar。为什么我不能只覆盖`init:`、调用`super`和初始化我的 ivars？

这个奇怪的设计决定背后的想法是什么？没有为所有类型提供单一的通用初始化方法？

它是在派生类型中初始化 ivars 的唯一方法吗？每次都做一些研究来弄清楚这次覆盖什么方法？

我错过了什么吗？因为感觉非常愚蠢/不直观/容易出错

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:27:21.577

您必须这样做覆盖指定的初始化程序。

来自[官方文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/CodingGuidelines/Articles/FrameworkImpl.html)

> 指定初始化程序是调用超类的 init 方法的类的 init 方法。（其他初始化程序调用该类定义的 init 方法。）每个公共类都应该有一个或多个指定的初始化程序。作为指定初始化器的示例，有 NSView 的 initWithFrame: 和 NSResponder 的 init 方法。在 init 方法不打算被覆盖的情况下，就像 NSString 和其他面向类集群的抽象类的情况一样，子类应该实现自己的。
> 
> 指定的初始化程序应该明确标识，因为这些信息对于那些想要继承你的类的人来说很重要。**子类可以只覆盖指定的初始化程序，所有其他初始化程序将按设计工作。**
> 
> 当您实现一个框架类时，您通常还必须实现它的归档方法：initWithCoder: 和 encodeWithCoder:。小心不要在初始化代码路径中做对象未归档时不会发生的事情。实现此目的的一个好方法是，如果您的类实现归档，则从您指定的初始化程序和 initWithCoder: （它本身就是一个指定的初始化程序）调用一个通用例程。

阅读文档以找出指定的初始化程序并覆盖它。

根据[文档 UIViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIViewController_Class/Reference/Reference.html) `initWithNibName:bundle:`是此类的指定初始化程序，因此您应该覆盖该初始化程序，**但是**如果您没有以编程方式实例化您的类（例如，您从 nib/storyboard 加载它），则必须覆盖归档方法`initWithCoder:`。

正如文档所建议的，您可以创建一个用于初始化的例程，并从指定的初始化程序和归档方法中调用它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:29:32.693

使用指定的初始值设定项作为起点通常是有意义的，但如果您不确定这是否始终是将要使用的初始值设定项，那将没有多大意义。

因此，我个人更喜欢创建一个 setup 方法，该方法从我知道可能在某个阶段使用的任何 init 方法调用。对于 ViewController，我通常从 viewDidLoad 调用 setup 方法（当然，除非在此阶段之前需要任何状态）。

# node.js - Node.js 时间顺序问题

> ID：14487629
> 
> 赞同：0
> 
> 时间：2013-01-23T19:19:24.837
> 
> 标签：node.js

我有 node.js 的问题。该程序的命令不会按时间顺序加载，我不知道该怎么做。我正在尝试从数据库中下载一些图像和文本，并以 8 个为一组发送。但是 node.js 同时运行循环和命令循环。

这是我的代码：

```
socket.on('background_dinamically', function(data){
        connection.query("SELECT * FROM products WHERE id='"+data.cathegory+"'" , function(err, rows, fields){
            var count = 0;
            var array_elements = [];
            if(err){
                socket.emit('errorserver');
            }else{
                for (var i = rows.length - 1, count; i >= 0; i-- & count ++) {
                    array_elements.push(rows[i]);
                    if (count == 8) {
                        socket.emit('image_loading_background', [array_elements, data]);
                        count = 0;
                        array_elements = [];
                    }
                };

                if(count > 0 && count < 8 && count != 0) { 
                    socket.emit('image_loading_background', [array_elements, data]);
                }
            }
        });
    }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:00:55.440

Marc，首先我会检查是否可以在客户端进行同步。如果您在将数据发送到客户端之前强制您的 nodejs 应用程序进行同步，那么可伸缩性就会受到影响。

如果您无法在服务器端进行同步，您可以在意大利面条代码或同步库之间进行选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:31:05.763

欢迎来到异步（非按时间顺序）编程的世界。如您所见，默认情况下，节点将并行处理 I/O 操作。要获得其他行为，包括按时间顺序（串行）、并行批处理以及错误处理帮助程序，请查看许多可用的[流控制库](https://github.com/joyent/node/wiki/Modules#wiki-async-flow)之一。具体来说，我推荐[caolan/async](https://github.com/caolan/async)。

# windows - 使用 npm 安装 node-postgres 时出现问题（在 Windows 上）

> ID：14487632
> 
> 赞同：10
> 
> 时间：2013-01-23T19:19:44.870
> 
> 标签：windows, node.js, postgresql, npm

我正在尝试使用 npm 在 Windows 上安装 pg，但收到以下错误：

```
c:\Users\someone\Dropbox\somefolder>npm install -g pg
npm http GET https://registry.npmjs.org/pg
npm http 304 https://registry.npmjs.org/pg
npm http GET https://registry.npmjs.org/generic-pool/2.0.2
npm http 304 https://registry.npmjs.org/generic-pool/2.0.2

> pg@0.11.3 install C:\Users\someone\AppData\Roaming\npm\node_modules\pg
> node-gyp rebuild || (exit 0)

C:\Users\someone\AppData\Roaming\npm\node_modules\pg>node "C:\Program Files (x86)\nodejs\node_modules\npm\bin\node-gyp-
yp\bin\node-gyp.js" rebuild
'pg_config' is not recognized as an internal or external command,
operable program or batch file.
Traceback (most recent call last):
  File "C:\Users\someone\.node-gyp\0.8.16\tools\gyp\gyp", line 18, in <module>
    sys.exit(gyp.main(sys.argv[1:]))
  File "C:\Users\someone\.node-gyp\0.8.16\tools\gyp\pylib\gyp\__init__.py", line 511, in main
    return gyp_main(args)
  File "C:\Users\someone\.node-gyp\0.8.16\tools\gyp\pylib\gyp\__init__.py", line 494, in gyp_main
    options.circular_check)
  File "C:\Users\someone\.node-gyp\0.8.16\tools\gyp\pylib\gyp\__init__.py", line 133, in Load
    depth, generator_input_info, check, circular_check)
  File "C:\Users\someone\.node-gyp\0.8.16\tools\gyp\pylib\gyp\input.py", line 2378, in Load
    depth, check)
  File "C:\Users\someone\.node-gyp\0.8.16\tools\gyp\pylib\gyp\input.py", line 384, in LoadTargetBuildFile
    build_file_data, PHASE_EARLY, variables, build_file_path)
  File "C:\Users\someone\.node-gyp\0.8.16\tools\gyp\pylib\gyp\input.py", line 1053, in ProcessVariablesAndConditionsInD
    build_file)
  File "C:\Users\someone\.node-gyp\0.8.16\tools\gyp\pylib\gyp\input.py", line 1068, in ProcessVariablesAndConditionsInL
    ProcessVariablesAndConditionsInDict(item, phase, variables, build_file)
  File "C:\Users\someone\.node-gyp\0.8.16\tools\gyp\pylib\gyp\input.py", line 1027, in ProcessVariablesAndConditionsInD
    ProcessConditionsInDict(the_dict, phase, variables, build_file)
  File "C:\Users\someone\.node-gyp\0.8.16\tools\gyp\pylib\gyp\input.py", line 904, in ProcessConditionsInDict
    variables, build_file)
  File "C:\Users\someone\.node-gyp\0.8.16\tools\gyp\pylib\gyp\input.py", line 1046, in ProcessVariablesAndConditionsInD
    build_file, key)
  File "C:\Users\someone\.node-gyp\0.8.16\tools\gyp\pylib\gyp\input.py", line 1046, in ProcessVariablesAndConditionsInD
    build_file, key)
  File "C:\Users\someone\.node-gyp\0.8.16\tools\gyp\pylib\gyp\input.py", line 1053, in ProcessVariablesAndConditionsInD
    build_file)
  File "C:\Users\someone\.node-gyp\0.8.16\tools\gyp\pylib\gyp\input.py", line 1072, in ProcessVariablesAndConditionsInL
    expanded = ExpandVariables(item, phase, variables, build_file)
  File "C:\Users\someone\.node-gyp\0.8.16\tools\gyp\pylib\gyp\input.py", line 714, in ExpandVariables
    (contents, p.returncode))
Exception: Call to 'pg_config --libdir' returned exit status 1\. while trying to load binding.gyp
gyp ERR! configure error
gyp ERR! stack Error: `gyp` failed with exit code: 1
gyp ERR! stack     at ChildProcess.onCpExit (C:\Program Files (x86)\nodejs\node_modules\npm\node_modules\node-gyp\lib\co
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:99:17)
gyp ERR! stack     at Process._handle.onexit (child_process.js:678:10)
gyp ERR! System Windows_NT 6.1.7601
gyp ERR! command "node" "C:\\Program Files (x86)\\nodejs\\node_modules\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js" "
gyp ERR! cwd C:\Users\someone\AppData\Roaming\npm\node_modules\pg
gyp ERR! node -v v0.8.16
gyp ERR! node-gyp -v v0.7.3
gyp ERR! not ok
pg@0.11.3 C:\Users\someone\AppData\Roaming\npm\node_modules\pg
└── generic-pool@2.0.2 
```

我的版本如下：

```
c:\>node -v
v0.8.16

c:\>npm -v
1.1.69 
```

当我签出存储库并尝试时，`node-gyp rebuild`我收到以下错误消息：

```
C:\Users\someone\Downloads\node-postgres.git>node-gyp rebuild
gyp info it worked if it ends with ok
gyp info using node-gyp@0.8.3
gyp info using node@0.8.16 | win32 | ia32
gyp info spawn python
gyp info spawn args [ 'C:\\Users\\lamassey\\AppData\\Roaming\\npm\\node_modules\\node-gyp\\gyp\\gyp',
gyp info spawn args   'binding.gyp',
gyp info spawn args   '-f',
gyp info spawn args   'msvs',
gyp info spawn args   '-G',
gyp info spawn args   'msvs_version=auto',
gyp info spawn args   '-I',
gyp info spawn args   'C:\\Users\\lamassey\\Downloads\\node-postgres.git\\build\\config.gypi',
gyp info spawn args   '-I',
gyp info spawn args   'C:\\Users\\lamassey\\AppData\\Roaming\\npm\\node_modules\\node-gyp\\addon.gypi',
gyp info spawn args   '-I',
gyp info spawn args   'C:\\Users\\lamassey\\.node-gyp\\0.8.16\\common.gypi',
gyp info spawn args   '-Dlibrary=shared_library',
gyp info spawn args   '-Dvisibility=default',
gyp info spawn args   '-Dnode_root_dir=C:\\Users\\lamassey\\.node-gyp\\0.8.16',
gyp info spawn args   '-Dmodule_root_dir=C:\\Users\\lamassey\\Downloads\\node-postgres.git',
gyp info spawn args   '--depth=.',
gyp info spawn args   '--generator-output',
gyp info spawn args   'C:\\Users\\lamassey\\Downloads\\node-postgres.git\\build',
gyp info spawn args   '-Goutput_dir=.' ]
'pg_config' is not recognized as an internal or external command,
operable program or batch file.
gyp: Call to 'pg_config --libdir' returned exit status 1\. while trying to load binding.gyp
gyp ERR! configure error
gyp ERR! stack Error: `gyp` failed with exit code: 1
gyp ERR! stack     at ChildProcess.onCpExit (C:\Users\lamassey\AppData\Roaming\npm\node_modules\node-gyp\lib\configure.js:420:16)
gyp ERR! stack     at ChildProcess.EventEmitter.emit (events.js:99:17)
gyp ERR! stack     at Process._handle.onexit (child_process.js:678:10)
gyp ERR! System Windows_NT 6.1.7601
gyp ERR! command "node" "C:\\Users\\lamassey\\AppData\\Roaming\\npm\\node_modules\\node-gyp\\bin\\node-gyp.js" "rebuild"
gyp ERR! cwd C:\Users\lamassey\Downloads\node-postgres.git
gyp ERR! node -v v0.8.16
gyp ERR! node-gyp -v v0.8.3
gyp ERR! not ok 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-23T21:41:35.720

每行

```
'pg_config' is not recognized as an internal or external command 
```

我只需要在尝试之前安装 PostgreSQL

```
npm install pg 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T20:32:00.367

您是否查看过 node-gyp 的安装说明？

[https://github.com/TooTallNate/node-gyp#installation](https://github.com/TooTallNate/node-gyp#installation)

我最近在 Windows 上遇到了 node-gyp 的问题，同时尝试安装依赖它的单独模块。确保您已安装所需的每个项目。具体注意这部分：

> 对于节点和本机模块的 64 位版本，您还需要 Windows 7 64 位 SDK 如果安装失败，请尝试卸载您首先安装的任何 C++ 2010 x64&x86 Redistributable。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-08T14:23:14.943

在 OSx 上，请参阅 Peter Lyons 的回答（已接受）。Xcode 版本选项对我有用。 [https://stackoverflow.com/a/12825911/296765](https://stackoverflow.com/a/12825911/296765)

# iphone - 多个 MPMoviePlayerController 实例进入 UIScrollView

> ID：14487634
> 
> 赞同：2
> 
> 时间：2013-01-23T19:19:49.527
> 
> 标签：iphone, ios, uiscrollview, mpmovieplayercontroller

[在阅读了一些这样](https://stackoverflow.com/questions/11112550/multiple-video-in-mpmovieplayer-works-fine-in-simulator-but-get-sigabrt-error-wh)的问题和答案之后，[这个](https://stackoverflow.com/questions/8333985/stop-and-start-videos-within-a-uiscrollview)，或者[这个](https://stackoverflow.com/questions/4368112/multiple-mpmovieplayercontroller-instances)只是提到一些，我一直在尝试创建一个带有 4 个 UIViews 的 UIScrollView。

在这些 UIView 中，我正在创建一个 MPMoviePlayerController。

苹果的文档明确指出：

```
Note: Although you may create multiple MPMoviePlayerController objects and present 
their views in your interface, only one movie player at a time may play its movie. 
```

因此，当用户滚动时，我会暂停并播放存储在 playerArray 中的不同 MPMoviePlayerController。我这样做是从 UIScrollViewDelegate 协议调用两个方法：

*   scrollViewWillBeginDragging: - 使用此方法，我检测到用户正在滚动到另一个视图，因此我暂停当前的 MPMoviePlayerController 并插入带有电影当前播放时间的缩略图。

*   scrollViewDidEndDecelerating: - 在这里，我得到了用户停止滚动的视图，所以首先我隐藏缩略图，然后从该特定视图播放 MPMoviePlayerController

以下是我的实现方式：

我的.h：

```
 @interface ViewController : UIViewController<UIScrollViewDelegate,UIGestureRecognizerDelegate>

    @property(strong,nonatomic) NSMutableArray * viewsArray;
    @property(strong,nonatomic) UIScrollView * myScrollView;
    @property int numberOfViews;
    @property(strong,nonatomic) NSMutableArray * playersArray;
    @end 
```

我的viewDidLoad：

```
- (void)viewDidLoad
{
    [super viewDidLoad];

    //The number of views inside myScrollView
    numberOfViews = 4;

    //Initialization
    viewsArray = [[NSMutableArray alloc] init];
    myScrollView = [[UIScrollView alloc] initWithFrame:CGRectMake(0, 0, self.view.bounds.size.width, self.view.bounds.size.height)];
    playersArray = [[NSMutableArray alloc] init];
    NSMutableArray * videoNamesArray = [[NSMutableArray alloc] initWithObjects:@"field4min",@"water4min",@"beach4min",@"bushtails4min", nil];

    //Customization
    myScrollView.delaysContentTouches = NO;
    myScrollView.contentSize = CGSizeMake(myScrollView.frame.size.width * numberOfViews, myScrollView.frame.size.height);
    myScrollView.delegate = self;
    myScrollView.showsHorizontalScrollIndicator = YES;
    myScrollView.pagingEnabled = YES;
    myScrollView.userInteractionEnabled = YES;
    myScrollView.bounces = NO;
    myScrollView.showsHorizontalScrollIndicator = NO;

    //Create the views that will populate the scrollView
    for (int i = 0; i < numberOfViews; i++) {

        UIView *cView = [[UIView alloc] init];

        //Set the frame for each view inside the ScrollView
        CGRect frame = CGRectMake(0, 0, self.view.frame.size.width,self.view.frame.size.height);
        frame.origin.x = frame.size.width * i;
        cView.frame = frame;

        //Set the path of the video to the MPMoviePlayerController
        NSString * videoPath = [videoNamesArray objectAtIndex:i];
        NSString *path = [[NSBundle mainBundle] pathForResource:videoPath ofType:@"mp4"];
        MPMoviePlayerController * player = [[MPMoviePlayerController alloc] initWithContentURL:[NSURL fileURLWithPath:path]];

        //Customization
        player.fullscreen = NO;
        player.scalingMode = MPMovieScalingModeAspectFill;
        [player.view setFrame:self.view.bounds];
        player.controlStyle = MPMovieControlStyleNone;
        player.shouldAutoplay = NO;
        player.view.clipsToBounds = YES;

        [player prepareToPlay];
        [player stop];

        //Get the image from the currentPlaybackTime to set it above the player
        UIImage *thumbnail = [player thumbnailImageAtTime:[player currentPlaybackTime] timeOption:MPMovieTimeOptionNearestKeyFrame];
        UIImageView *thumbnailView = [[UIImageView alloc] initWithFrame:player.view.frame];
        [thumbnailView setImage:thumbnail];
        [thumbnailView setContentMode:UIViewContentModeScaleAspectFill];
        thumbnailView.clipsToBounds = YES;

        //Add both views (player.view, and ImageView) to the currentView
        [cView addSubview:player.view];
        [cView addSubview:thumbnailView];

        //Add the view to myScrollView
        [myScrollView addSubview:cView];

        //Add the player and the currentView to arrays for further manipulation
        [playersArray addObject:player];
        [viewsArray addObject:cView];
    }
    //add the ScrollView to the ViewController's view
    [self.view addSubview:myScrollView];
} 
```

我的scrollViewWillBeginDragging：

```
-(void)scrollViewWillBeginDragging:(UIScrollView *)scrollView
{
    //Get the view (page) that is currently showing in the screen, inside the scrollView
    static NSInteger previousPage = 0;
    CGFloat pageWidth = scrollView.frame.size.width;
    float fractionalPage = scrollView.contentOffset.x / pageWidth;
    int page = lround(fractionalPage);
    NSLog(@"page: %i",page);
    previousPage = page;

    //Get the current player from playerArray
    MPMoviePlayerController * startPlayer = [playersArray objectAtIndex:page];

    //Pause the player;
    [startPlayer pause];

    //Get the thumbnail from the currentPlaybackTime
    UIImage *thumbnail = [startPlayer thumbnailImageAtTime:[startPlayer currentPlaybackTime] timeOption:MPMovieTimeOptionExact];
    UIImageView *thumbnailView = [[UIImageView alloc] initWithFrame:startPlayer.view.frame];
    [thumbnailView setImage:thumbnail];

    //Customization
    [thumbnailView setContentMode:UIViewContentModeScaleAspectFill];
    thumbnailView.clipsToBounds = YES;

    //Get the second view (thumbnail) from the view.subviews array and unhide it (I hide it in scrollViewDidEndDecelerating method)
    UIView * startView = [viewsArray objectAtIndex:page];
    UIView * imagestartView = [startView.subviews objectAtIndex:1];
    imagestartView.hidden = NO;
    imagestartView = thumbnailView;
} 
```

我的scrollViewDidEndDecelerating：

```
-(void)scrollViewDidEndDecelerating:(UIScrollView *)scrollView
{
    //Get the view (page) that is currently showing in the screen, inside the scrollView
    static NSInteger previousPage = 0;
    CGFloat pageWidth = scrollView.frame.size.width;
    float fractionalPage = scrollView.contentOffset.x / pageWidth;
    int page = lround(fractionalPage);
    NSLog(@"pageend: %i",page);
    previousPage = page;

    //Get the current player from playerArray and play it
    MPMoviePlayerController * endPlayer = [playersArray objectAtIndex:page];
    [endPlayer play];

    //Get the second view (thumbnail) from the view.subviews array and hide it
    UIView * endView = [viewsArray objectAtIndex:page];
    UIView * imageEndView = [endView.subviews objectAtIndex:1];
    imageEndView.hidden = YES;

} 
```

**我的问题：**

当我在我的 iOS 6 模拟器中运行它时，它按预期工作，但是一旦我在我的设备（带有 iOS 5.1 的 iPhone）上运行它，中间视图（我的 viewsArray 中的索引 1 和 2），不显示任何视频，只有声音...

我错过了什么？

任何帮助将不胜感激。

# php - 与 exec 相关的 PHP 函数都不能在 Android 下运行

> ID：14487637
> 
> 赞同：0
> 
> 时间：2013-01-23T19:19:58.413
> 
> 标签：php, android

我尝试为 Android（Android 2.3.3 和 Android 4.0.4。两者都存在错误。）交叉编译 PHP（尝试了许多版本。现在使用 5.3.8）。几乎一切工作正常。对我来说最重要的功能是执行一些 shell 命令，但它不起作用！例如这段代码

```
<?php
    $s = shell_exec("ps");
    echo $s;
?> 
```

必须输出所有启动的进程，但实际上显示一个空白屏幕。我尝试了许多带有函数 system()、pastru() 和其他函数的变体。一切都是徒劳。在 php.ini disable_functions 为空，安全模式关闭。

在互联网上我发现与Android OS相关的popen（）函数存在错误。但是我该如何解决这个问题？！我还发现了这个：[所有与 exec 相关的 PHP 函数 segfault](https://stackoverflow.com/questions/9922517/all-exec-related-php-functions-segfault?answertab=votes#tab-top)

这与我的情况类似。但是由于某些原因，作者没有写出他是如何纠正错误的。

**更新：**我想我知道出了什么问题。这个链接帮助了我：[https](https://bugs.php.net/bug.php?id=60081) ://bugs.php.net/bug.php?id=60081 。PHP 用于执行命令“/bin/sh”，但在 Android 上没有“/bin/sh”。“sh”位于“/system/bin/sh”中。我尝试复制“/system/bin/sh”->“/bin/sh”，一切正常。但现在有一个新问题。如何告诉PHP“sh”在哪里？

# c# - dotNet 2.0 的 HashSet 等效项

> ID：14487639
> 
> 赞同：0
> 
> 时间：2013-01-23T19:20:07.923
> 
> 标签：c#, collections

> **可能重复：**
> [C# 2.0 中的 HashSet 替换](https://stackoverflow.com/questions/5977779/hashset-replacement-in-c-sharp-2-0)

我需要一个不允许重复的集合。在 dotNet v4.0 中，我会使用`HashSet`.

我在 dotNet v2.0 中有哪些选择？

这是我能想到的添加不重复项的唯一选择：

```
List<Foo> list = new List<Foo>();
if (!list.Contains(newItem)) list.Add(newItem); 
```

但它将面临比非重复更多的尝试重复，这使得它的`O(n)`性质`List.Contains`不那么吸引人。

我应该改用什么其他集合？`Dictionary<Foo,JunkValue>`会有用吗？

该系列不必订购。

# java - 创建一个用于 JSCH API 的输入流。（爪哇）

> ID：14487640
> 
> 赞同：2
> 
> 时间：2013-01-23T19:20:07.747
> 
> 标签：java, ssh, inputstream, jsch

**我为什么要这样做？** 现在，我正在尝试制作一个多选项卡式 SSH 客户端，以便与一些服务器一起使用。我现在有 8 个，很快就会有 9 个。正如您想象的那样，在使用 Linux 时必须执行一些冗余任务。连接到每台服务器以一次进行一项更改是一个非常乏味的过程。这就是为什么我试图制作一个可以同时连接到多个服务器的 SSH 客户端，这样我就可以发送一个命令一次，让它影响我拥有的所有服务器。

**我现在有多远？** 我有一个很好的 UI 设置，可以连接、登录和接收来自服务器的数据。对于输入，API 要求我指定一个输入流。如果我将 System.in 指定为我的输入流，我就可以运行该程序，并通过 API 将我在控制台中输入的任何内容广播到不同的服务器。 ![在此处输入图像描述](../Images/2a2602b84540b53ad63decc631d63eff.png) **问题** 是没有最终用户会想要使用单独的控制台来使用这个程序。它会看起来很糟糕。所以我需要一些方法来从文本字段中获取输入以通过指定的输入流发送它。这意味着我需要一个永远不会关闭的输入流，除非程序关闭。像 System.in。另外，一旦我设置了流，我就不能轻易地重新定义它。我昨天搜索了大约 10 个小时的答案。找不到任何东西。如果有人可以帮忙，请做。谢谢你。

**我需要** 一个与输出流完全一样的输入流。即使没有任何东西通过它发送，它也会保持打开状态，但是一旦它获取数据，数据就会自动发送到正在使用它的任何东西。这个 API 很奇怪，但最后一个输入流部分是唯一让我无法完成我的程序的事情。感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T07:14:49.290

[JSCH sudo su command "tty" error](https://stackoverflow.com/questions/14220550/jsch-sudo-su-command-tty-error) 我错误地使用了 API。愚蠢，是的。不过，我不希望其他人犯同样的错误。我想我是在追随互联网上其他地方发现的一个坏例子。本质上，您甚至不需要设置输入流。您只需要使用已经存在的输出流。直接写入输出流。很确定我昨晚凌晨 3 点试图这样做。它一直就在我面前。

# php - PHP 正则表达式字母数字以非字母数字为界

> ID：14487644
> 
> 赞同：3
> 
> 时间：2013-01-23T19:20:17.327
> 
> 标签：php, regex

我想得到所有出现的

> @某物

以任何非字母数字字符或空格为界。

我试过了

> [^A-Za-z0-9\s] *@(\S* )[^A-Za-z0-9]

但它一直在单词后包含空格。

我会很高兴得到任何帮助，谢谢。

编辑：所以问题很清楚，我想从中获得匹配

> 行开始@word1 某事@word2,@word3

所有'@word1'、'@word2'、'@word3'

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:40:46.820

这是你想要的吗？

```
@\w+ 
```

[演示](http://regexr.com?33gt4)

```
preg_match_all('#(@\w+)#', 'Line start @word1 something @word2,@word3', $matches);
print_r($matches[1]); 
```

取自 Madbreak 评论，要排除`@`前面的任何字符，请改用它

```
 (?<!\w)@\w+(?=\b) 
```

[演示](http://regexr.com?33gts)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:25:05.717

这个

```
preg_match_all('/[^@]*@(\S*)/', 'blabla @something1 blabla @something2 blabla', $matches);
print_r($matches[1]); 
```

印刷

```
Array
(
    [0] => something1
    [1] => something2
) 
```

# assembly - TASM 中的过程本地数据

> ID：14487653
> 
> 赞同：0
> 
> 时间：2013-01-23T19:20:58.483
> 
> 标签：assembly, syntax, local, procedure, tasm

我正在使用 TASM 2.51，并且我想询问将数据声明为过程本地的语法。我不希望放置在堆栈上的局部变量。数据应该放在数据段中，但标签只对一个程序可见。如何才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:55:10.380

嗯 - 我已经很久没有使用 Turbo Assembler 了，但不是这样吗？

```
MyProc proc
  local MyVar : byte
...

MyProc endp 
```

# matlab - 为什么我用 dsolve 得到不同的答案？

> ID：14487654
> 
> 赞同：0
> 
> 时间：2013-01-23T19:20:58.983
> 
> 标签：matlab

我已经定义了以下 ODE

```
syms R1 C1 vc0 Vin
Vc_ode = 'Dvc+vc/(R1*C1)=(Vin)/(R1*C1)';
Vc=dsolve(Vc_ode,'vc(0)=vc0','t'); 
```

我收到的解决方案是

```
Vin - (Vin - vc0)/exp(t/(C1*R1)) 
```

在手动解决时我得到

```
 Vin +vc0*exp(-t/(C1*R1)) 
```

两者都是正确的解决方案，但有没有办法达到我想要的解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T09:21:40.190

我认为*实际的答案*是：不，你不能让 MATLAB 达到你想要的解决方案。

查看 dsolve 输入时，没有选项可以指定输出的外观。这只是一个猜测，但这可能是因为很难将您想要的样式转换为代码。

唯一可能会有所不同的是您编写输入公式的方式，但我怀疑它不会有太大的不同。

另一方面，*学术上的答案*是：一切皆有可能，但您可能需要制作自己的 dsolve 函数。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-02T19:17:50.330

问题是手动解决方案`vc(t) = Vin +vc0*exp(-t/(C1*R1))`不正确。该解决方案具有`vc(0) = Vin + vc0`不等于`vc0`，因此这就是您的解决方案不同的原因。有一个定理表明具有初始条件的一阶线性 ODE`vc(t_0) = ...`恰好有一个解。我建议您仔细完成您的步骤。

# php - 在 php 和 js 中设置 JSON

> ID：14487655
> 
> 赞同：1
> 
> 时间：2013-01-23T19:20:59.747
> 
> 标签：php, javascript, jquery, ajax, json

我知道我已经问过这个问题，但是我的代码做错了。我知道我需要使用 JSON，在浏览了几页之后我理解了这个理论，但不知何故不能让它在这里工作再次是我的代码（顺便说一句，我知道我的安全问题，我会像一旦我用 JSON 解决了​​我的技术问题）：

```
$(document).on('pageinit',function(){
$("#login").click(function(){

username=$("#usr").val();
password=$("#psw").val();
$.ajax({
type: "POST",
url: "http://imes.**********.com/php/login_check.php",
data: "name="+username+"&pwd="+password,
success: function(html){
//in case of success
if(html=='true')
{
var usr = console.log(data.usr);
var psw = console.log(data.psw);
$.cookie('usr', usr);
$.cookie('psw', psw);
$("#login_message").html("Logged in, congratulation.");
$.mobile.changePage("http://imes.**********.com/userpanel.php");
}
//in case of error
else
{
$("#login_message").html("Wrong username or password");
}
},
beforeSend: function() { $.mobile.showPageLoadingMsg(); }, //Show spinner
complete: function() { $.mobile.hidePageLoadingMsg() }, //Hide spinner
});
return false;
}); 
```

还有我的 php：

```
<?php
session_start();
$username = $_POST['name'];
$password = $_POST['pwd'];
include('mysql_connection.php');
mysql_select_db("jzperson_imesUsers", $con);
$res1 = mysql_query("SELECT * FROM temp_login WHERE username='$username' AND password='$password'");
$num_row = mysql_num_rows($res1);
$res2 = mysql_fetch_array($res1);
if( $num_row == 1 ) {
$arr = array('usr' => $username, 'psw' => $password);
echo json_encode($arr);
echo 'true';
}
else{
echo 'false';
}
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:26:34.053

这就是我要做的（PHP）。首先设置您的响应数组，默认为 success `FALSE`。

```
$arr = array('success' => FALSE); 
```

如果成功，则您的条件将覆盖：

```
if( $num_row == 1 ) 
{
    $arr = array('success' => TRUE, 'usr' => $username, 'psw' => $password);
} 
```

最后在脚本结束时将结果作为 JSON 编码数据返回。

```
echo json_encode($arr);
exit(); 
```

我还会对您的 jQuery 进行以下更改：

```
$.ajax({
    type: "POST",
    url: "http://imes.**********.com/php/login_check.php",
    data: "name="+username+"&pwd="+password,
    dataType: 'json', // let's it know the response will be JSON formatted
    success: function(json){
        if (json.success === true){
            // do whatever you want here
        }
}); 
```

不过有一点建议：您永远不应该将用户密码传递给前端。
永远都不需要它。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:27:13.143

您的输出不是有效的 json，在 json 之后回显 true 或 false 将导致它无效。您必须将成功消息插入到 json 数据中。

```
if( $num_row == 1 ) {
    $arr = array('usr' => $username, 'psw' => $password);
    echo json_encode(array('data'=>$arr, 'success'=>true);
    //echo 'true';
}
else{
    echo json_encode(array('success'=>false);
} 
```

然后检查您的 ajax 成功回调

```
success: function(json){
//in case of success
if(json.success){
    var usr = json.data.usr;
    ...
}
else{
    ...
} 
```

此外，您应该将参数作为对象传递给数据，以便正确编码。

```
data: {"name":username,"pwd":password}, 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:53:48.277

如果有帮助，JSON 基本上是 JS 中变量定义的右侧：

```
var myvar = ....;
            ^^^^---- basically JSON 
```

既然你在做

```
echo json_encode($var);
echo 'true'; 
```

在您的 PHP 代码中，考虑它从客户端的外观：

```
var myvar = 'somestring'true;
                        ^^^^---syntax error 
```

如果您在 JS 代码中输出 JSON 以供 AJAX 调用使用，那么 JSON 文本是服务器可以作为其响应输出的**唯一内容。**其他任何东西都会以某种方式简单地破坏 json 字符串，并使其无效。

# pdf - 用ghostscript将单页分成两页

> ID：14487656
> 
> 赞同：3
> 
> 时间：2013-01-23T19:21:05.833
> 
> 标签：pdf, ghostscript, pdf-manipulation

我有一个 pdf，其中包含演示幻灯片和每页多张幻灯片。如何使用 ghostscript 拆分文件，以便每页有一张幻灯片？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-24T08:43:40.187

很久以前，我在 comp.lang.postscript 上为某人编写了一些代码来执行此操作，同样是用于 PowerPoint 幻灯片。此 PostScript 代码假定所有“子页面”（即幻灯片）在 PDF 页面上的大小和位置相同，并且所有 PDF 页面的大小相同。将以下内容另存为名为 pdf_slice.ps 的文件，并按照注释中所述的用法进行操作。

```
%!PS
% Copyright (C) 2011 Artifex Software, Inc.  All rights reserved.
% 
% This software is provided AS-IS with no warranty, either express or
% implied.
% 
% This software is distributed under license and may not be copied,
% modified or distributed except as expressly authorized under the terms
% of the license contained in the file LICENSE in this distribution.
% 
% For more information about licensing, please refer to
% http://www.ghostscript.com/licensing/. For information on
% commercial licensing, go to http://www.artifex.com/licensing/ or
% contact Artifex Software, Inc., 101 Lucas Valley Road #110,
% San Rafael, CA  94903, U.S.A., +1(415)492-9861.
%
% Slice up a PDF file
%
% usage: gs -sFile=____.pdf  -dSubPagesX= -dSubPagesY= [-dSubPageOrder=] [-dVerbose=]pdf_slice.ps
%
% SubPageOrder is a bit field;
% Default = 0
% Bit 0 - 0 = top to bottom
%         1 = bottom to top
% Bit 1 - 0 = left to right
%         1 = right to left
% Bit 3 - 0 = increase x then y
%       - 1 = increase y then x
% 
% 0 - page 1 at top left, increasing left to right, top to bottom
% 1 - page 1 at bottom left increasing left to right, bottom to top
% 2 - page 1 at top right, increasing right to left, top to bottom
% 3 - page 1 at bottom right increasing right to left, bottom to top
% 4 - page 1 at top left, increasing top to bottom, left to right
% 5 - page 1 at bottom left increasing bottom to top, left to right
% 6 - page 1 at top right, increasing top to bottom, right to left 
% 7 - page 1 at bottom right increasing bottom to top, right to left

%
% Check the parameters to see they are present and of the correct type
%
/Usage {
  (  usage: gs -dNODISPLAY -q -sFile=____.pdf \n) =
  (     -dSubPagesX= -dSubPagesY= [-dSubPageOrder=] pdf_slice.ps \n) =
  (Please see comments in pdf_slice.ps for more details) =
  flush
  quit
} bind def

/Verbose where not {
  /Verbose false def
}{
  pop /Verbose true def
} ifelse

/File where not {
  (\n   *** Missing source file. \(use -sFile=____.pdf\)\n) =
  Usage
} {
  pop
}ifelse

/SubPagesX where not {
  (\n   *** SubPagesX not integer! \(use -dSubPagesX=\)\n) =
  Usage
} {
  Verbose { (SubPagesX ) print } if 
  SubPagesX type 
  Verbose { dup == } if
  /integertype eq not {
    (\n   *** SubPagesX not integer! \(use -dSubPagesX=\)\n) =
    Usage
  }
  pop 
}ifelse

/SubPagesY where not {
  (\n   *** SubPagesY not integer! \(use -dSubPagesY=\)\n) =
  Usage
} {
  Verbose { (SubPagesY ) print } if
  SubPagesY type 
  Verbose { dup == } if
  /integertype eq not {
    (\n   *** SubPagesY not integer! \(use -dSubPagesY=\)\n) =
    Usage
  }
  pop 
}ifelse

/SubPageOrder where not {
  /SubPageOrder 0 def
} {
  Verbose { (SubPageOrder ) print } if
  SubPageOrder type 
  Verbose { dup == } if
  dup == 
  /integertype eq not {
    (\n   *** SubPageOrder not integer! \(use -dSubPageOrder=\)\n) =
    Usage
  }
  pop 
}ifelse

% 
% Turns off most messages
%
/QUIET true def     % in case they forgot

%() =

%
% Open the PDF file and tell the PDF interpreter to start dealing with it
%
File dup (r) file runpdfbegin pop
/PDFPageCount pdfpagecount def

%
% Set up our bookkeeping
%
% First get the size of the page from page 1 of the PDF file
% We assume that all PDF pages are the same size.
%
1 pdfgetpage currentpagedevice
1 index get_any_box 
exch pop dup 2 get exch 3 get
/PDFHeight exch def
/PDFWidth exch def

%
% Now get the page size of the current device. We are assuming that
% this is the size of the individual sub-pages in the original PDF. NB
% This assumes no margins between sub-pages, all sub-pages the same size.
%
currentpagedevice /PageSize get
dup 0 get /SubPageWidth exch def
1 get /SubPageHeight exch def

% 
% Calculate the margins. This is the margin between the page border and
% the enclosed group of sub-pages, we assume there are no borders
% between sub pages.
%
/TopMargin PDFHeight SubPageHeight SubPagesY mul sub 2 div def
/LeftMargin PDFWidth SubPageWidth SubPagesX mul sub 2 div def

Verbose {
  (PDFHeight = ) print PDFHeight ==
  (PDFWidth = ) print PDFWidth ==
  (SubPageHeight = ) print SubPageHeight ==
  (SubPageWidth = ) print SubPageWidth ==
  (TopMargin = ) print TopMargin ==
  (LeftMmargin = ) print LeftMargin ==
} if

%
% This rouitne calculates and sets the PageOffset in the page device
% dictionary for each subpage, so that the PDF page is 'moved' in such 
% a way that the required sub page is under the 'window' which is the current
% page being imaged.
%
/NextPage {
    SubPageOrder 2 mod 0 eq {
        /H SubPagesY SubPageY sub SubPageHeight mul TopMargin add def
    }{
        /H SubPageY 1 sub SubPageHeight mul TopMargin add def
    } ifelse
    SubPageOrder 2 div floor cvi 2 mod 0 eq {
        /W SubPageX 1 sub SubPageWidth mul LeftMargin add def
    }{
        /W SubPagesX SubPageX sub SubPageWidth mul LeftMargin add def
    } ifelse
    << /PageOffset [W neg H neg]>> setpagedevice

Verbose {
  (SubPageX ) print SubPageX ==
  (SubPageY ) print SubPageY ==
  (X Offset ) print W ==
  (Y Offset ) print H == flush
} if

    PDFPage
} bind def

%
% The main loop
% For every page in the original PDF file
%
1 1 PDFPageCount 
{
    /PDFPage exch def

    % Do the gross ordering here rather than in
    % NextPage. We eiither process rows and then 
    % columns, or columns then rows, depending on
    % Bit 3 of SubPageorder
    SubPageOrder 3 le {
        1 1 SubPagesY {
            /SubPageY exch def
            1 1 SubPagesX {
                /SubPageX exch def
                NextPage
                pdfgetpage
                pdfshowpage
            } for
        } for
    } {
        1 1 SubPagesX {
            /SubPageX exch def
            1 1 SubPagesY {
                /SubPageY exch def
                NextPage
                pdfgetpage
                pdfshowpage
            } for
        } for
    } ifelse
} for 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-24T18:16:23.127

KenS 的答案是@howardh 应该接受的答案。KenS 使用一个非常聪明的 PostScript 语言程序来实现结果。（永远记住 KenS 所说的话：他的解决方案只有*在所有“子页面”（即幻灯片）在 PDF 页面上的大小和位置相同并且所有 PDF 页面大小相同的情况下才能*正常工作）。

但是，为了完整起见，让我链接到其他一些以前的答案（其中一些已说明），它们解决了类似的问题：

*   [**将 PDF 每页 2 面转换为每页 1 面**](https://superuser.com/a/189109/40894)(SuperUser.com)
*   [**如何将 PDF 的页面从中间拆分？**](https://superuser.com/a/235401/40894)（超级用户.com）
*   [**使用 Ghostscript 9.01**](https://stackoverflow.com/a/6184547/359307) (StackOverflow.com)
*   [**PDF - 删除白边**](https://stackoverflow.com/a/10418720/359307)(StackOverflow.com)
*   [**将一个 PDF 页面一分为二**](https://stackoverflow.com/a/11521648/359307)(StackOverflow.com)
*   [**将pdf页面从中间拆分的免费软件？**](https://superuser.com/a/235401/40894)（超级用户.com）

这些答案也使用 PostScript 代码，但仅作为在命令行上传递给 Ghostscript 的“片段”。*（如果您不精通 PostScript，这些可能更容易修改和适应“子页面”在 PDF 页面上的大小和位置不同以及 PDF 页面大小不同的情况。）*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-06-06T10:53:29.527

我想提出一种解决方案，实际上
1) 将一个 PS 或 PDF 页面拆分为多个单独的页面，
2) 然后将 *.pdf 合并为多页 pdf。但是这个解决方案不处理利润。

此脚本适用于 Linux BASH：

```
INPUT="input.ps" ; 
RESOLUTION=72 ;
WHOLE_WIDTH=598 ; # current size of portrait A4
WHOLE_HEIGHT=843 ;
COLOUMNS=2 ; #  split vertically
ROWS=1 ; # split horizontally
PAGE_WIDTH=$((WHOLE_WIDTH/COLOUMNS)) ;
PAGE_HEIGHT=$((WHOLE_HEIGHT/ROWS)) ;

# Split: 

for x in `seq 1 ${COLOUMNS}` ; do
  for y in `seq 1 ${ROWS}` ; do 
    gs  -dBATCH -dNOPAUSE -dSAFER \
    -o gramps_tmp_${x},${y}.pdf \
    -r${RESOLUTION} \
    -sDEVICE=pdfwrite \
    -g${PAGE_WIDTH}x${PAGE_HEIGHT} \
    -c "<</PageOffset [$(((x - 1)*(0 - PAGE_WIDTH))) \
                       $(((y - 1)*(0 - PAGE_HEIGHT)))]>> setpagedevice" \
    -f "$INPUT" ;
  done ;
done ;

# Merge:

gs -dNOPAUSE -sDEVICE=pdfwrite -sOUTPUTFILE=singleCombinedPdfFile.pdf -dBATCH gramps_tmp_*.pdf ; 
```

但我们可以按所需顺序排列页面：

```
ORDERED="tmp_1,1.pdf tmp_1,2.pdf" ;
gs -dNOPAUSE -sDEVICE=pdfwrite -sOUTPUTFILE=singleCombinedMultipagePdfFile.pdf -dBATCH  ${ORDERED}; 
```

# php - 何时应该使用不是二进制（1 或 0）值的复选框值？

> ID：14487657
> 
> 赞同：1
> 
> 时间：2013-01-23T19:21:10.090
> 
> 标签：php, jquery, html, mysql, checkbox

我在互联网上看到很多人在 stackoverflow 上，我的同事在他们的复选框中使用的值不是 1 或 0（例如`<input type='checkbox' value='check'/>`），但我的想法是基本上一个复选框将始终是一个是/否的答案。

目前，我使用我编写的一个 jQuery 脚本来标准化我的应用程序，如下所示：

```
;(function($){
    $(document).ready(function() {
        var selector = 'input[type="checkbox"]';
        var c = 'checked';
        $.each($(selector),function(){
            var $el,value,attr;
            $el = $(this);
            value = $el.val();
            attr = $el.attr(c);
            if(value == 1 || typeof(attr) !== 'undefined')
            {
                $el.attr(c,c);
                $el.prop(c,true);
                $el.val(1);
            }
            else{
                $el.removeAttr(c);
                $el.prop(c,false);
                $el.val(0);
            }
        });
        $(selector).change(function(e){
            var $el, checked = null;
            $el = $(this);
            checked = $el.prop(c);
            if (checked) {
                $el.attr(c,c);
                $el.val(1);
            } else {
                $el.removeAttr(c);
                $el.val(0);
            }
        });
    });
})(jQuery); 
```

这样我就可以处理以下任何一种情况：

```
<input type='checkbox' value='1'/>
<input type='checkbox' checked/>
<input type='checkbox' checked='checked'/>
<input type='checkbox' value='1' disabled/>
<input type='checkbox' checked disabled/>
<input type='checkbox' checked='checked' disabled/>
<input type='checkbox' value='0'/>
<input type='checkbox'/>
<input type='checkbox' value='0' disabled/>
<input type='checkbox' disabled/> 
```

但它不考虑不是 0 或 1 或具有“已选中”属性的复选框的任何值。

**我的问题是：**是否有使用非 0/null 或 1 值的好用例（尤其是在使用关系数据库时）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T19:28:46.533

考虑以下内容：“选择您最喜欢的水果（勾选所有适用项）”。

你的方法：

```
<input type="checkbox" name="choice_apple" value="1" />
<input type="checkbox" name="choice_orange" value="1" />
<input type="checkbox" name="choice_durian" value="1" /> 
```

或者你可以使用类似的东西：

```
<input type="checkbox" name="choice[]" value="apple" />
<input type="checkbox" name="choice[]" value="orange" />
<input type="checkbox" name="choice[]" value="durian" /> 
```

后端存储系统与此无关。我们只是在谈论复选框。您的方法需要 3 个单独的表单字段名称，名称中嵌入了选项的“值”。提取该名称需要额外的开销，以便您可以将水果的名称实际存储在某处。

而对于“有用的价值”版本，它是一个单一的表单字段。PHP 会将选择转换为一个数组——您最终会得到您需要的确切名称，而无需额外的任何提取/处理。

请记住：未选中的复选框**不会**与正常的表单提交一起提交。那里已经有一个隐含的真/假。如果您在服务器上获得复选框的字段名称，则该复选框被选中。

既然你已经有了一个很好的内置真/假，为什么不增加额外的语义来说明真/假代表什么？

# python - fdist 和前 10 个虚词

> ID：14487659
> 
> 赞同：1
> 
> 时间：2013-01-23T19:21:31.423
> 
> 标签：python, nltk, stop-words

我必须编写一个脚本，以频率降序为我提供所有内容词。我需要 10 个最常见的实词，因此我不仅需要列出我的语料库中 10 个最常见的词，还需要过滤掉任何实词（和，或，任何标点符号......）。到目前为止我所拥有的是以下

```
fileids=corpus.fileids ()
text=corpus.words(fileids)
wlist=[]
ftable=nltk.FreqDist (text)
wlist.append(ftable.keys () ) 
```

这给了我一个按频率降序排列的非常简洁的所有单词列表，但是我如何过滤掉功能词呢？

谢谢你。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T21:04:04.813

您想过滤掉一组单词（停用词）。从[这个 SO 答案中获取核心思想](https://stackoverflow.com/questions/5486337/stop-words-using-nltk-in-python)：

您需要在代码中引入几行代码：

```
fileids=corpus.fileids ()
text=corpus.words(fileids) 
```

**添加以下行**：创建停用词列表并从文本中过滤掉它们

```
#get a list of the stopwords
stp = nltk.corpus.stopwords.words('english')

#from your text of words, keep only the ones NOT in stp
filtered_text = [w for w in text if not w in stp] 
```

现在，像你一样继续

```
wlist=[]
ftable=nltk.FreqDist (filtered_text)
wlist.append(ftable.keys () ) 
```

希望有帮助。

# c# - 使用 WebBrowser 在列表框中打印文档

> ID：14487662
> 
> 赞同：0
> 
> 时间：2013-01-23T19:21:47.627
> 
> 标签：c#, .net, printing, webbrowser-control

本质上，我希望我的程序将一个列表加载到 中`ListBox`，并允许用户单击“打印”，它可以导航`WebBrowser`到列表中的每个页面，将它们单独打印出来。

但是，它只打印出 2 页（在我的示例中，列表框中有 4 页）然后停止，没有完成循环。（很可能是由于`WebBrowser`控件仍然很忙）

我觉得我在这里犯了一个简单的错误。非常感谢任何有关导致此问题的原因的见解！

我的代码：

```
private void Form1_Load(object sender, EventArgs e)
{
    DirSearch(Application.StartupPath);
}

void DirSearch(string sDir)
{
    try
    {
        foreach (string d in Directory.GetDirectories(sDir))
        {
            foreach (string f in Directory.GetFiles(d).Select(Path.GetFileName))
            {
                listBox1.Items.Add(f);
            }
            DirSearch(d);
        }
    }
    catch (System.Exception excpt)
    {
        Console.WriteLine(excpt.Message);
    }
}

private void button1_Click(object sender, EventArgs e)
{
    WebBrowser webBrowserForPrinting = new WebBrowser();
    webBrowserForPrinting.DocumentCompleted += new WebBrowserDocumentCompletedEventHandler(PrintDocument);

    foreach (string s in listBox1.Items)
    {
        try
        {
            webBrowserForPrinting.Url = new Uri(Application.StartupPath + "\\COAForms\\" + s);
        }
        catch (Exception)
        {
        }
    }
}

private void PrintDocument(object sender, WebBrowserDocumentCompletedEventArgs e)
{
    // Print the document now that it is fully loaded.
    ((WebBrowser)sender).Print();

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T23:27:18.780

Web 浏览器控件的一个常见错误是尝试在传统`for`循环中使用它，就像您在这里一样。

WebBrowser 页面加载是一个异步操作。这就是为什么会有 DocumentCompleted 事件。您需要在循环中考虑到这一点。让 DocumentCompleted（例如`PrintDocument`）处理程序加载下一个位置，而不是使用传统的 for 循环。

# events - Fullcalendar with view more button Uncaught TypeError

> ID：14487666
> 
> 赞同：1
> 
> 时间：2013-01-23T19:22:06.953
> 
> 标签：events, fullcalendar, typeerror, appointment

我找到了一个用于限制每天有限数量的事件的 api，它显示了一个“查看更多”按钮。我在 github 上的描述中实现了该工具，但每次都会收到以下错误消息：

```
**Uncaught TypeError: Cannot read property 'appointments' of null** 
```

此外，日历中的事件将显示在工作日单元格的顶部...

也许你们中的一些人可以随时解决这个问题并且可以帮助我，因为我在 stackoverflow 或其他地方找不到合适的帖子。

# android - Android 的 fmod() 函数

> ID：14487669
> 
> 赞同：1
> 
> 时间：2013-01-23T19:22:17.740
> 
> 标签：android

android中的fmod（）是否有任何等效功能？

--- 在 C++ 中：----

```
double fmod(double x, double y)
float fmodf(float x, float y) 
```

fmod 函数计算 x 除以 y 的浮点余数。

返回值是 x - ny，其中 n 是 x / y 的商，向零舍入到第一个整数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T01:49:45.190

模运算符 ,`%`实际上在 Java 中同时支持浮点数和双精度数。

正如 harism 评论的那样，`Math.IEEEremainder(double f1, double f2)`如果您愿意，可以使用双打功能。

[http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Math.html#IEEEremainder（双，双）](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/Math.html#IEEEremainder%28double,%20double%29)

# spring - 是否有工具或插件可以创建 Spring bean 注入的图形表示？

> ID：14487670
> 
> 赞同：0
> 
> 时间：2013-01-23T19:22:33.130
> 
> 标签：spring, map, javabeans, code-injection

作为我们项目移交文档的一部分，我被要求提供我们的 Spring bean 注入关系的图表/图表。由于这里太长的原因，我们没有使用自动连接，而是在应用程序上下文 XML 文件中定义了大量的 bean。

在我掸掉我的 Visio 副本并费力完成这项任务之前，是否有一个工具/eclipse 插件可以做到这一点？谷歌搜索没有发现任何东西。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:28:55.143

IntelliJ IDEA 对 Spring 有很好的[支持](https://www.jetbrains.com/idea/features/)，包括基于 XML 自动生成图表：

[![图表](../Images/b45f2338138a3259f7ea3d3a36d3893a.png)](https://i.stack.imgur.com/dqaP3.png)
[（来源：[jetbrains.com](http://www.jetbrains.com/idea/features/screenshots/spring_diagrams.png)）]

# c# - 在 MVC3 中为控件 ID 添加前缀以确保唯一性。发回服务器时我丢失了所有数据

> ID：14487671
> 
> 赞同：2
> 
> 时间：2013-01-23T19:22:34.743
> 
> 标签：c#, asp.net-mvc-3, model

我正在尝试解决以下情况的问题：

*   用户加载页面并加载 EditorTemplate ViewModel。
*   用户在页面上打开一个对话框。
*   此对话框在其中加载相同的 EditorTemplate ViewModel。
*   由于 DOM 树中存在每个控件的多个实例，控件 ID 现在是非唯一的

我的解决方案是向我的控制器指示我希望在对话框中构建 ViewModel。我通过指示应附加到生成的控件 ID 上的“前缀”字符串来做到这一点。我从[这个 StackOverflow 帖子中得到了这个建议。](https://stackoverflow.com/questions/4606686/forcing-editorfor-to-prefix-input-items-on-view-with-class-name)

因此，我在 ViewModel 中声明了一个控件，如下所示：

```
<%--This will append our model's prefix onto all generated IDs to ensure uniqueness.--%>
<% using (Html.BeginHtmlFieldPrefixScope(Model.Prefix)) { %>
<div class="detailsRow required">
    <%= Html.LabelFor(model => model.Name, Model.NameLabel) %>
    <%= Html.EditorFor(model => model.Name) %>
</div>
<% } %> 
```

在我的模型中：

```
public NewOrderDetailsModel(string prefix) : this()
{
    Prefix = prefix;
} 
```

这工作正常。它具有修改控件ID的效果。它呈现为“prefix_Name”而不是“名称”。

但是，当我将数据发布到服务器时——我的更改打破了 MVC 的转换魔法：

![在此处输入图像描述](../Images/a139f01a9314d7e937d472863cbbcc95.png)

如您所见，所有修改了 ID 的属性都返回为 null。

两部分问题：

*   这是达到我想要的效果的正确道路吗？
*   如何通知 MVC ID 已被修改，以便我恢复 JSON 到模型的转换？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:32:24.453

您所说的 MVC Conversion Magic 是使用 MVC Model Binder 完成的。默认模型绑定器不会以这种方式处理前缀，因为它没有意识到前缀的存在。您可以通过像这样注释控制器操作来使其知道：

```
public ActionResult SomeAction([Bind(Prefix = "SomePrefix")] ViewModel model){...} 
```

有关这方面的更多信息，请参阅这篇文章： [ASP.NET MVC 3 模型绑定和表单字段](https://stackoverflow.com/questions/5341917/asp-net-mvc-3-model-binding-and-form-fields)

# php - $_FILES['file']['name'] 在 codeigniter

> ID：14487672
> 
> 赞同：4
> 
> 时间：2013-01-23T19:22:41.927
> 
> 标签：php, codeigniter

如何获取在 codeigniter 中上传的文件的文件名。我们将输入字段的值作为 $this->input->post('name') 获取，但是我如何获取从表单上传的文件的名称？

```
 public function create(){

        //getting all the POST data in $data array
        $data = array('title' => $this->input->post('title') ,
              'content' => $this->input->post('content'),
              'filename' => ?? HOW ??
        );
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T23:15:47.893

1）确保您的表格是多部分的。有帮手`form_open_multipart()`

2）使用上传库接收文件

3）然后与`$this->upload->data()`您一起获得带有文件信息的数组

[这](http://ellislab.com/codeigniter/user-guide/libraries/file_uploading.html)是完整的操作方法和官方文档

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-07-12T04:00:47.773

```
 public function create(){

        //getting all the POST data in $data array.
        $data = array('title' => $this->input->post('title') ,
              'content' => $this->input->post('content'),
              'filename' => $_FILES["file"]["name"]
        );
} 
```

# google-maps-api-3 - 使用 DrawingManager 实例将形状加载到地图

> ID：14487673
> 
> 赞同：2
> 
> 时间：2013-01-23T19:22:49.713
> 
> 标签：google-maps-api-3

我想将形状加载到我存储通过 DrawingManager 绘制的形状的 all_overlays 数组中：

```
 drawingManager = new google.maps.drawing.DrawingManager({
      drawingMode: google.maps.drawing.OverlayType.POLYGON,
      drawingControlOptions:{
        position: google.maps.ControlPosition.TOP_RIGHT,
        drawingModes:[
                 google.maps.drawing.OverlayType.POLYGON
            ]
      },
      markerOptions: {
        draggable: true
      },
      polylineOptions: {
        editable: true
      },
      rectangleOptions: polyOptions,
      circleOptions: polyOptions,
      polygonOptions: polyOptions,
      map: map
    });

    google.maps.event.addListener(drawingManager, 'overlaycomplete', function(e) {
        all_overlays.push(e);
        if (e.type != google.maps.drawing.OverlayType.MARKER) {
        drawingManager.setDrawingMode(null);
        var newShape = e.overlay;
        newShape.type = e.type;
        google.maps.event.addListener(newShape, 'click', function() {
          setSelection(newShape);
        });
        setSelection(newShape);
      }
    }); 
```

但问题是当我推送其中一个时，它的类型似乎与绘图管理器生成的不同：

```
>all_overlays // array have a drawing manager generated object
[Object]
>coords = [ new google.maps.LatLng(-20.2164629885305, -70.1565831899643), new google.maps.LatLng(-20.2166618288932, -70.15673339366913), new google.maps.LatLng(-20.21687325381024, -70.15626400709152), new google.maps.LatLng(-20.21664672710243, -70.15616208314896)];
[Q,Q,Q,Q]
>p1= new google.maps.Polygon({paths: coords,editable: true });
Kh<br>
>all_overlays.push(p1);
2
>all_overlays;
[Object, Kh] 
```

然后我的新形状看起来像 'Kh' ，不像 Object ，然后它没有覆盖或类型属性，我想知道如何创建一个像第一个一样的形状，通过 DM 创建以便附加到它一个事件听众和其他人一样...

我需要这样做才能用 DM 修改加载的那些..

谢谢

* * *

## 回答 #1

> 赞同：-2
> 
> 时间：2014-02-19T18:59:03.490

您正在使用overlaycomplete，因此您必须更深入地挖掘。

也许尝试：

```
google.maps.event.addListener(drawingManager, 'overlaycomplete', function(e) {
        all_overlays.push(e.overlay);
        if (e.overlay.type != "marker") {
        drawingManager.setDrawingMode(null);
        var newShape = e.overlay;
        newShape.type = e.overlay.type;
        google.maps.event.addListener(newShape, 'click', function() {
          setSelection(newShape);
        });
        setSelection(newShape);
      }
    }); 
```

# c - 是否可以在 C 中捕获 Enter 按键？

> ID：14487674
> 
> 赞同：1
> 
> 时间：2013-01-23T19:22:52.973
> 
> 标签：c, user-input, keypress, fgets

我想编写一个 C 程序来标记一个字符串并逐字打印出来，慢慢地，我希望它同时监听用户按下 Enter，此时他们将能够输入数据。这可能吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T19:26:59.613

更新：请参阅下面的@modifiable-lvalue 的评论以获取更多有用的信息，例如`getchar()`，如果您走那条路线，请使用而不是 getch()。

* * *

绝对有可能。请注意，这`gets()`可能不完全有助于此目的，因为`gets()`将 enter 解释为 enter 本身，而是解释为“现在，我是用户，已经输入了我想要的尽可能多的字符串”。因此，`gets()`仅按回车键收集的输入将显示为空字符串（这可能对您有用）。请参阅：[http](http://www.cplusplus.com/reference/cstdio/gets/) ://www.cplusplus.com/reference/cstdio/gets/ 。但是还有其他不使用gets() 的原因——它不允许您指定要读取的最大值，因此很容易溢出您正在使用的任何缓冲区。等待发生的安全和错误噩梦。所以你想要`fgets()`，它允许你指定要读入的最大大小。 `fgets()`当按下回车键时，将在字符串中放置一个换行符。（顺便说一句，在 fgets() 上向 @jazzbassrob 提供道具）。

您还可以考虑类似`getch()`-- 它真正处理单个按键（但处理具有非直接扫描码的键有点复杂）。您可能会发现此示例很有帮助：[http](http://www.daniweb.com/software-development/cpp/code/216732/reading-scan-codes-from-the-keyboard) ://www.daniweb.com/software-development/cpp/code/216732/reading-scan-codes-from-the-keyboard 。但由于扫描码问题，`getch()`以平台详情为准。

因此，如果您想要一种更便携的方法，您可能需要使用更重但相当便携的东西，例如[ncurses](http://invisible-island.net/ncurses/ncurses-intro.html)。

我怀疑你可以用任何一个来做你想做的事`fgets()`，记住 enter 会给你一个只有换行符的字符串，或者`getch()`.

我只是想让您了解可能出现的一些实现/平台问题。

C 绝对可以做到这一点，但它比第一次尝试时可能猜到的要复杂一些。这是因为从历史上看，终端输入非常依赖于平台。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T21:34:12.013

查看 conio.h 库及其在游戏制作中的用途。你可以用 Borland 编译。那是我在无缓冲输入和实时监听按键方面的第一次体验。当然还有其他方法。

# c# - 类的属性

> ID：14487676
> 
> 赞同：2
> 
> 时间：2013-01-23T19:22:55.923
> 
> 标签：c#

我有两个类和一个这样的方法：

```
public class Class1 
{
    public int Id { get; set; }
    public string Name { get; set; }
    public Class2 Params { get; set; }
}

public class Class2
{
    public string Param1 { get; set; }
    public string Param2 { get; set; }
    public string Param3 { get; set; }
}

private Class1 GetData(SqlDataReader reader)
{
var model = new Class1
    {
        Id = Convert.ToInt32(reader["ID"]),
        Name = reader["Name"].ToString(),
        Class2.
    };
} 
```

为什么我看不到 的属性`Class2`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T19:23:46.733

您需要创建一个`instance`of `Class2`。您的`Params`对象`Class1`需要像这样初始化：

```
var model = new Class1
{
    Id = Convert.ToInt32(reader["ID"]),
    Name = reader["Name"].ToString(),
};
model.Params = new Class2();
model.Params.Param1 = "param1"; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T19:24:58.197

因为当您使用时，`Class2.`您引用的是类本身，而不是类的实例。

您必须声明`Class2`为，`static`或者在您的情况下，创建它的一个实例：

```
private Class1 GetData(SqlDataReader reader)
{
    var model = new Class1
    {
        Id = Convert.ToInt32(reader["ID"]),
        Name = reader["Name"].ToString(),
        Params = new Class2 { Param1 = "foo", Param2 = "bar", Param3 = "other" }
    };
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T19:25:09.007

Class1 没有名为 Class2 的属性。您将 Class1 上的类型为“Class2”的属性称为“Params”。所以你会像这样引用它：

```
private Class1 GetData(SqlDataReader reader)
{
var model = new Class1
    {
        Id = Convert.ToInt32(reader["ID"]),
        Name = reader["Name"].ToString(),
        Params = new Class2 {
           Param1 = ...
        }
    };
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T19:25:00.630

你应该这样做：

```
Class2 = new Class2() { ...} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T19:25:31.533

戴夫是正确的。使用您的代码执行此操作的最简单方法如下

```
private Class1 GetData(SqlDataReader reader)
{
    var model = new Class1
    {
        Id = Convert.ToInt32(reader["ID"]),
        Name = reader["Name"].ToString(),
        Params = new Class2()
     };
 } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-23T19:25:56.930

Class1 的 Params 属性永远不会分配给任何东西，因此将始终为空。

此外，Class1 中的属性访问器是 Params，所以它应该是......

```
private Class1 GetData(SqlDataReader reader)
{
var model = new Class1
    {
        Id = Convert.ToInt32(reader["ID"]),
        Name = reader["Name"].ToString(),
        Params = new Class2() { Param1 = "foo", Param2 = "bar" }
    };
} 
```

# css - 使用 css 的意外换行符

> ID：14487679
> 
> 赞同：0
> 
> 时间：2013-01-23T19:23:00.157
> 
> 标签：css, html, font-face, word-wrap

在一个新项目中，我得到了一些意想不到的行为：当侧边栏很小（大约 200 像素）时，换行比需要的早。

在这张图片上你可以看到结果（Safari 6.0.2，其他兄弟的类似结果），单词所在的左箭头，单词应该的右箭头（在我看来）。 [示例 http://fitzskoglund.jensravens.de/screen.jpg](http://fitzskoglund.jensravens.de/screen.jpg)

您可以找到整个网站[http://fitzskoglund.jensravens.de](http://fitzskoglund.jensravens.de)来查看效果和 CSS。

我不能附上一个特殊的片段，因为我不知道这种风格或行为来自哪里。

提前感谢您的任何建议。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:34:06.423

这似乎是因为缺乏一个“空间”来打破。当我在这个末尾添加一个空格时......

```
<strong>SCHULD SIND IMMER DIE ANDEREN </strong> 
```

...或在这个词之前（在`<a>`包装之后`<strong>`）...

```
 ausgezeichnet 
```

......它似乎工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:36:43.303

看起来正在发生的事情是一行中的第一个空格被视为 a `;nbsp`，它被打印为好像没有空格一样。这导致两个结束词被视为一个。如果您要在第二个单词的空格前放置一个像“a”这样的字母，它会起作用，或者在任一行中放置第二个空格。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:39:54.603

看起来它与您设置锚和强标签样式的方式有关。他们以一种奇怪的方式与周围的文本交互，导致它分裂。当我检查并删除您的锚点（“ausgezeichnet”）之后的文本时，锚点文本会恢复原位：[http](http://screencast.com/t/G1imlavU) ://screencast.com/t/G1imlavU 。我会删除您可以删除的内容并尽可能简单地标记。

# java - 不支持钻石运算符

> ID：14487682
> 
> 赞同：8
> 
> 时间：2013-01-23T19:23:18.847
> 
> 标签：java, android, netbeans

我正在尝试使用钻石运算符，但收到以下消息：

> -source 1.5 不支持 diamond 运算符（使用 -source 7 或更高版本启用 diamond 运算符）

它可以在带有android的netbeans中修复吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-11-01T07:51:00.390

现在允许使用 API 19 KitKat 钻石。以下是为 Android Studio 实施所需的 Gradle 编辑。还要确保您使用 JDK 1.7 和 0.6.1 之后的 Gradle 插件

```
android {
compileSdkVersion 19
buildToolsVersion "19.0.0"

defaultConfig {
    minSdkVersion 7
    targetSdkVersion 19
}

compileOptions {
    sourceCompatibility JavaVersion.VERSION_1_7
    targetCompatibility JavaVersion.VERSION_1_7
}
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T19:35:42.797

Android 需要 Java 源代码合规性 5.0 或 6.0 (Java5/6)。开箱即用不支持 Java7。这些文章描述了如何使用一些 java7 功能的技巧：http: [//www.informit.com/articles/article.aspx](http://www.informit.com/articles/article.aspx?p=1966024) ?p=1966024 。

另请参阅[Java 7 language features with Android](https://stackoverflow.com/questions/7153989/java-7-language-features-with-android)， Android[是否计划支持 Java7？](https://stackoverflow.com/questions/8535164/does-android-plan-to-support-java7), [Android SDK 可以与 JDK 1.7 一起使用吗？](https://stackoverflow.com/questions/8578441/can-the-android-sdk-work-with-jdk-1-7).

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T19:25:09.110

Android 目前不支持 1.7 编译级别。因此，您不能使用菱形运算符。您可以通过将 JRE 更改为 1.7 来为 java 应用程序解决此问题，但不适用于 Android。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2014-03-04T22:57:14.593

Google 刚刚发布了 Eclipse ADT 22.6，它增加了对 Java 7 语言功能的支持，[http://developer.android.com/tools/sdk/eclipse-adt.html](http://developer.android.com/tools/sdk/eclipse-adt.html)

# python - 在 django 中获取空查询集的类名

> ID：14487690
> 
> 赞同：41
> 
> 时间：2013-01-23T19:24:01.277
> 
> 标签：python, django, django-models, django-views

我有模型*学生的空查询集*

```
students = Students.objects.all() 
```

如果上面的查询集是空的，那么我怎样才能得到模型（类名）？

如何获取空查询集的模型名称？

编辑：

如何从查询集中获取应用名称？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2013-01-23T19:29:33.900

```
>>> students = Students.objects.all()

# The queryset's model class:
>>> students.model
project.app.models.Student

# Name of the model class:
>>> students.model.__name__
'Student'

# Import path of the models module:
>>> students.model.__module__
'project.app.models'

# Django app name:
>>> students.model._meta.app_label
'app' 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2013-01-23T19:28:20.193

```
students.model 
```

查询集有一个`model`属性，可用于检索与其关联的模型。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-23T19:29:58.987

你可以做：

```
students.model.__name__
>>> `Students` 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-08-28T03:53:02.610

从查询集中获取模型名称

```
queryset.__dict__['model'].__name__ 
```

# security - 登录我的应用

> ID：14487694
> 
> 赞同：0
> 
> 时间：2013-01-23T19:24:09.997
> 
> 标签：security, user-accounts

我构建了一个应用程序，每个用户都将拥有一个 id 和一个配置文件，如（姓名、年龄、电子邮件、位置......）。

我想用它来处理 facebook id，但是存在没有 facebook 帐户的用户的问题，所以我想给没有 facebook 帐户的用户一个唯一的 id。

但是在这里我有一个问题，我对此没有答案。如果我希望用户能够编辑他的个人资料详细信息，我想通过向我的服务器发送 webrequest 来做到这一点，并且在服务中我应该根据用户请求编辑详细信息。

问题是每个知道如何发出此请求的用户都可以监听我的应用程序 HTTP 请求并将 http 请求发送到我的服务器并更改每个用户的配置文件。

我的问题是是否还有其他事情可以处理我的问题，或者这是唯一的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:34:51.140

如果您希望您的数据安全地发送到服务器，您需要进行加密，即对纯文本进行加密。为此，您可以使用散列算法在传输之间验证密钥，其中您的密钥可以是随机生成的任何秘密，例如 SHA512 算法，它只是一步加密，即无法解密。另一种选择是使用双向加密和解密，例如 AES256。[这](http://pastie.org/426530)是同样的好教程

希望这些信息对你有帮助..

# java - 禁用 Java 警告外观和对 Java Web Start 应用程序的影响

> ID：14487698
> 
> 赞同：1
> 
> 时间：2013-01-23T19:24:21.147
> 
> 标签：java, security, deployment, applet, java-web-start

^(最近在 Java Plug-In 1)中发现了安全漏洞。作为对最终用户的保护，大多数浏览器中的 Java 被立即禁用。“Java 禁用”警告是什么样的？

阻止小程序是否也会影响[Java Web Start](https://stackoverflow.com/tags/java-web-start/info)应用程序。（它们是从网页中的链接启动的）针对桌面使用？

1.  Oracle Java 插件中的安全漏洞。有关更多详细信息，请参阅：
    *   SO的[JRE 1.7 漏洞](https://stackoverflow.com/q/12169902/418556)问答。
    *   [针对 CVE-2013-0422 的 Oracle 安全警报](http://www.oracle.com/technetwork/topics/security/alert-cve-2013-0422-1896849.html)
    *   [Java™ SE Development Kit 7, Update 11 (JDK 7u11) 发行说明](http://www.oracle.com/technetwork/java/javase/7u11-relnotes-1896856.html)- 修复了漏洞的版本。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-23T19:24:21.147

## “Java 禁用”警告是什么样的？

这就是 Oracle 的[测试 Java](http://www.java.com/en/download/testjava.jsp)页面现在的显示方式。它是一个嵌入式小程序。

### 火狐

![FireFox - 安全漏洞](../Images/2c74b73b4023a6cb51cf1e9f758121e7.png)

### 铬合金

浏览器顶部黄色栏中的消息：

> Java(TM) 因过期而被阻止。`Update plug-in...` `Run this time`- 学到更多`x`

显示在小程序的位置，并在右键单击时生成菜单..

![Chrome - Java 已过时](../Images/439752941a76dcc029acb8afdfdad6b9.png)

### 注意重新版本 1.7.0_11

修复问题的最后一个链接中提到的错误的 Java 版本 1.7.0_11 不会再次启用浏览器。尽管有这些信息，但还是看到了上面的那些警告。为任一浏览器启用插件后都可以看到..

![最新安装的 Java - 版本：Java SE 7 Update 11](../Images/02ca2f19fc751aa1479e723e4e2856ce.png)

这可能表明 Oracle 对该错误的修复是以这种“提示每个人”的方式永久加载小程序。这可能不是一件坏事。

## 小程序的阻塞是否也会影响 JWS 应用程序？

不，不是的。只是小程序（以及使用 JWS*嵌入的小程序）。*

以下是您可能看到的 JWS 应用程序。使用 which 部署`deployJava.js`（检查 JRE 并）显示这样的图标（没有提示 - 如果已安装）。

![JWS 启动图标](../Images/e1619aa74fdae7480a65fdd28377ccb5.png)

如果启动（例如）[JavaFX 1.2 演示。- 具有基于节点的控件的强大 UI 功能](http://docs.oracle.com/javafx/1.2/tutorials/controls/)我看到了用于启动 JWS 应用程序的图标。同时（安全漏洞）我仍然在上面提到的小程序上看到警告。

* * *

请注意 Java FX 演示。*“混合签名和未签名代码”本身*是否存在“可能表明存在安全问题的应用程序组件”的安全风险/提示。

# c# - 如何使用组合框选定项的值？

> ID：14487702
> 
> 赞同：0
> 
> 时间：2013-01-23T19:24:42.517
> 
> 标签：c#, combobox, port

我编写了这段代码来更改`serialport`名称：

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    try
    {    
        serialPort1.PortName = (string)comboBox1.SelectedValue;
    }
    catch (Exception)
    { 
        MessageBox.Show("The SerialPorts's Name Does Not Change !! "); 
    }
} 
```

结果是我得到一个`Exception`. 的`SerialPort`名字永远不会改变。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:31:54.467

可能是众多问题之一。

1.  是`(string)comboBox1.SelectedValue` `String.Empty`吗？
2.  是`(string)comboBox1.SelectedValue` `null`吗？
3.  serialPort1 是否打开？

如果我们有实际的异常消息，而不是您定义的自定义消息，那么回答这个问题会更容易。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:48:10.933

使用`SelectedValue`JaredPar 先生 MSFT 解释[ComboBox SelectedItem, SelectedValue, SelectedWhat？？？](http://blogs.msdn.com/b/jaredpar/archive/2006/11/07/combobox-selecteditem-selectedvalue-selectedwhat.aspx).

我猜，你试图得到的`PortName`不是`SelectedValue`

***解决方案***：

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (comboBox1.SelectedIndex == -1) return;
    if (string.IsNullOrWhiteSpace(comboBox1.Text)) return;
    serialPort1.PortName = comboBox1.Text;
} 
```

# 或者

你试图得到的`SelectedValue`不是`PortName`

***解决方案***：

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (comboBox1.SelectedValue == null) return;
    if (string.IsNullOrWhiteSpace(comboBox1.Text)) return;
    serialPort1.PortName = (int)comboBox1.SelectedValue ;
} 
```

尝试检查您的属性`ComboBox`

![在此处输入图像描述](../Images/e1fff6327cc3087eb23bac366510fdf8.png)

```
其中：Display Member是您的*PortName*
        值 Member是您的*PortId*或*SelectedValue*

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:28:08.693

您必须检查 SelectedIndex 是否为 -1 或 SelectedValue（或 SelectedItem）是否为空。这是没有选定项目时的值。

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    if (comboBox1.SelectedIndex == -1)
        return;

    serialPort1.PortName = (string)comboBox1.SelectedValue;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T19:28:26.797

为了弄清楚异常消息是什么，试试这个：

```
private void comboBox1_SelectedIndexChanged(object sender, EventArgs e)
{
    try
    {    
        serialPort1.PortName = (string)comboBox1.SelectedValue;
    }
    catch (Exception ex) { 
        MessageBox.Show(ex.Message);
    }
} 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T19:29:50.093

问题是您没有正确处理异常。抛出的异常可能会告诉您问题出在哪里，但您并没有看到它。

将您的 catch 语句更改为

```
catch (Exception e) { MessageBox.Show(e.Message); } 
```

然后查看异常是什么，并相应地修复它。

[SerialPort.PortName](http://msdn.microsoft.com/en-us/library/system.io.ports.serialport.portname.aspx)设置器可以抛出一组异常，因此您需要知道是哪个异常。

# php - 在所有 PDO 页面的开头调用 session_start() 的问题

> ID：14487707
> 
> 赞同：0
> 
> 时间：2013-01-23T19:24:55.997
> 
> 标签：php, session, pdo

我的大多数页面都使用 Sessions，但我正在切换到 PDO 并在每个页面的开头调用 session_start() 会导致传递标头出现问题。我已经做了几个小时的研究，但仍然不清楚该怎么做。

**编辑-我一直在做的事情：**注册/登录文档的第一行以及 auth.php 是`session_start();`，用户在注册/签名后访问的所有页面的第一行是`require_once('auth.php');`

我目前正在使用 $_SESSION['SESS_USER_ID'] 将用户 ID 传递给每个页面

当他们注册/登录时，我像这样连接它： $member = $stmt_user->fetch(); $_SESSION['SESS_USER_ID'] = $member['user_id'];

在随后的每一页上，我都这样称呼它：

```
$user_id = $_SESSION['SESS_USER_ID']; 
```

根据[手册](http://php.net/manual/en/function.session-start.php)

> 从 PHP 4.3.3 开始，在会话之前启动之后调用 session_start() 将导致 E_NOTICE 级别的错误。此外，第二个会话开始将被简单地忽略。

这是否意味着我不再需要在每个页面上调用它，而只需在用户开始会话时调用它一次？

如果不是，那么处理这个问题的最简单方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:28:38.330

如果您使用的是框架，您可能只需要在该框架中调用它一次。如果您的每个请求都转到不同的 php 页面，那么您需要确保每个请求至少调用一次（最好尽快）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:47:38.890

你需要让自己成为一个引导文件。
在每个页面上执行的所有常见操作的文件 - 会话启动、连接到数据库、设置全局变量等
。然后将此文件包含到每个调用的脚本中。
因此，您将确保您拥有所需的一切，但只需调用一次。

虽然我不明白这个问题与 PDO 有什么关系（以及前一个问题）。
PDO 只是一个数据库驱动程序，与标头、会话等没有丝毫关系。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T19:38:24.463

您可以使用`ob_start`and`ob_end_flush`来缓冲您的输出，因此您实际上可以这样做：

```
<?php
ob_start();
echo '42';
session_start(); // still works because output is buffered
ob_end_flush();
?> 
```

# matlab - Matlab关闭所有不关闭所有

> ID：14487710
> 
> 赞同：4
> 
> 时间：2013-01-23T19:25:00.827
> 
> 标签：matlab

举这个小例子：

```
h=waitbar(0,'a window')
close all 
```

`close all`这里的命令**不会**关闭等待栏。
要关闭它，我必须使用`close all hidden`.

但是为什么 Matlab 将`h = waitbar`其视为隐藏处理程序？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T19:31:37.360

`get(h, 'HandleVisibility')`告诉你它的句柄可见性是`callback`，所以当从内部回调以外的任何东西（通过你的 GUI 代码的 MATLAB）访问它时它是隐藏的。`close all`仅在可见句柄上运行，因此您`waitbar`不会关闭。

**编辑：**看起来你可以弄乱这个系统和`set(h, 'HandleVisibility', 'on')`. 现在，当您尝试时`close all`，`waitbar`将消失。

# r - 尽管 echo=FALSE，knitr set_parent() 始终输出 NULL

> ID：14487718
> 
> 赞同：2
> 
> 时间：2013-01-23T19:25:26.307
> 
> 标签：r, knitr

我有一个主文件

```
\documentclass{article}

\begin{document}

<<main>>=
  a <- 20
  b <- 30
@

<<child-demo, child='child.Rnw', eval=TRUE>>=
@

\end{document} 
```

和相应的子文档

```
<<set-parent, echo=FALSE, cache=FALSE>>=
set_parent('mwe.Rnw')
@

<<child-code>>=
  a + b
@ 
```

处理文件时，我得到以下输出

```
a <- 20
b <- 30

## NULL

a + b
## [1] 50 
```

使用`\Sexpr{set_parent('mwe.Rnw')}`不会`##NULL`在输出中产生丑陋，但我更喜欢通过块声明父级，因为我尝试只`\Sexpr{}`在块之外使用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:31:18.090

考虑用以下方式包装电话`invisible`：

```
> invisible(1)
> invisible(1) == 1
[1] TRUE 
```

因此，`invisible(set_parent('mwe.Rnw'))`应该在没有打印的情况下工作`NULL`。我认为这是责任`set_parent`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T20:29:51.967

虽然我已经在1.0.6 中[解决了这个问题](https://github.com/yihui/knitr/commit/607b03ed1dcb94ac321bb7c9f393f684786cf7aa)`knitr`，但 user946850 的回答是必不可少的，所以我建议接受一个作为答案。现在，您可以[安装](https://github.com/yihui/knitr#installation)开发版本。

# actionscript-3 - 如何在 MovieClip (AS3) 中居中文本字段

> ID：14487720
> 
> 赞同：0
> 
> 时间：2013-01-23T19:25:34.543
> 
> 标签：actionscript-3, flash, movieclip

我在定位时遇到了奇怪的问题

1) 我用 AS 创建的 MovieClip()

2) 此 MovieClip() 内的文本字段。

1) 的问题：当我设置 MC.x = 0; MC.y = 0 影片剪辑不会出现在左上角。

![swf图片](../Images/75d566dd2191ad86b4fd5b26c80dc7a1.png)

2) 的问题：文本既不垂直也不水平居中。

我的 AS3 代码：

```
var button:ButtonMC = new ButtonMC();
button.y = 100;
button.x = 100;
button.width = 260;
button.height = 50;
button.buttonMode = true;
button.useHandCursor = true;
button.mouseChildren = false;

var tf:TextFormat = new TextFormat();
tf.size = 70;
tf.bold = true;
tf.font = "Arial"
tf.color = 0xFFFFFF;

var myText:TextField = new TextField();
myText.defaultTextFormat = tf;
myText.autoSize = TextFieldAutoSize.CENTER;

button.addChild(myText);
myText.text = 'ThisIsATestText1234';
myText.y = button.height * 0.5 - myText.textHeight * 0.5;

addChild(button); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T21:02:35.140

由于 myText 已经在您尝试获取按钮高度的位置添加到按钮中，因此可能会搞砸计算。尝试首先对齐文本字段并将其添加到按钮。您还更改了 Button 的宽度和高度，这会改变比例，因此也会影响内部文本字段的外观和行为（因为它将成为按钮的子项）

一次解决这两个问题的最佳方法是在按钮内创建一个背景剪辑并赋予其适当的大小。然后创建文本字段并根据背景调整其比例。这样，按钮保持原来的比例，不会弄乱里面的东西。

希望这可以帮助。

PS：`useHandCursor = true`设置时不需要`buttonMode = true`；）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T21:02:41.327

删除这些行：

```
button.width = 260;
button.height = 50; 
```

并且您将更容易定位文本 - 按钮高度也受添加的文本字段的影响，因此更好地使用固定值，例如

```
myText.y = 25 - (myText.height * 0.5); 
```

# c++ - `*a` 和 `a[0]` 有什么区别？

> ID：14487726
> 
> 赞同：14
> 
> 时间：2013-01-23T19:26:04.557
> 
> 标签：c++

给定一个用户定义的类型`A`和一个指针，和有`A* a`什么区别？`*a``a[0]`

（虽然`*(a+0)`/被定义为等价的，但/`a[0]`的情况并非如此，在某些情况下，细微的差异可能会导致编译错误。）`*a``a[0]`

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2013-01-23T19:32:32.317

如果`A`是不完整的类型，则`*a`有效，但[在此示例](http://ideone.com/f89mBX)`a[0]`中无效：

```
struct A;

void foo(A& r)
{
}

void bar(A* a)
{
    foo(*a);
    foo(a[0]);   // error: invalid use of incomplete type ‘struct A’
} 
```

那是因为`a[0]`等价于`*(a+0)`，但是您不能向指向不完整类型（甚至不是零）对象的指针添加某些内容，因为指针算术需要知道大小。

# c# - 我在哪里可以找到 MySQL 服务器名称？

> ID：14487728
> 
> 赞同：0
> 
> 时间：2013-01-23T19:26:10.267
> 
> 标签：c#, mysql, database, visual-studio-2010

我是 MySQL 新手，我正在设置用于 C# 应用程序的数据库连接。我正在关注有关设置此连接的 youtube 教程，但我对什么是服务器名称感到困惑？它只是 IP 地址还是我必须包括提供服务器的公司域名。以下是正确的吗？

```
 private void Initialize()
        {
            server = "xxx.1x4.xxx.15x";
            database = "nameOfDatabase";
            uid = "username123";
            password = "pass123";
            string connectionString;
            connectionString = "SERVER=" + server + ";" + "DATABASE=" +
                    database + ";" + "UID=" + uid + ";" + "PASSWORD=" + password + ";";

           connection = new MySqlConnection(connectionString);
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:31:08.573

简而言之，是的，您可以使用 IP 地址，尽管我一直使用主机名。

你可能想看看这个问题： [Accessing SQL Server using an IP Address and Port Number ... 救命！](https://stackoverflow.com/questions/2630246/accessing-sql-server-using-an-ip-address-and-port-number-help)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:33:00.837

除非已采取安全措施阻止访问，否则使用 ip 地址和 mysql 服务的实际端口将起作用。

示例：127.0.0.1:1840

# android - 如何设置多个标志xml android

> ID：14487730
> 
> 赞同：2
> 
> 时间：2013-01-23T19:26:11.383
> 
> 标签：android, xml, android-xml

我想知道如何以及是否可以为 android 布局设置多个标志。

例如，我想使用带有 TYPE_TEXT_FLAG_AUTO_COMPLETE 文本视图标志的 autocompletetextview

和

TYPE_TEXT_FLAG_AUTO_CORRECT

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:30:56.580

利用`|`

所以在你的情况下你想要

```
android:inputType = "textAutoCorrect|textAutoComplete" 
```

EditText 的示例

```
<EditText
     android:id="@+id/editText"
     android:layout_width="wrap_content"
     android:layout_height="wrap_content"
     android:inputType = "textAutoCorrect|textAutoComplete"> 
```

有关可以在 中指定的标志的完整列表`inputType`，请参阅[文档](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)。

# php - Laravel - 使用流利的查询构建器更新带有变量的行

> ID：14487731
> 
> 赞同：0
> 
> 时间：2013-01-23T19:26:15.020
> 
> 标签：php, laravel, fluent

我正在构建我的网络应用程序，我需要做最简单的事情，只需使用一些变量更新表内的字段，但它不起作用，他没有做任何事情，字段的值保持原样。

```
public function post_eupdate(){

  $update = DB::table('app_events')
      ->where('ev_id', '=', Input::get("id"))
      ->update(
          array(
             'ev_op1'    =>  Input::get('op1'),
             'ev_op2'    => Input::get('op2'),
             'ev_coef1'  => Input::get('coef1'),
             'ev_coef2'  => Input::get('coef2'),
             'ev_host'   => Input::get('host'),
             'ev_stime'  => Input::get('stime'),
             'ev_ns1'    => Input::get('ns1'),
             'ev_cat'    => Input::get('cat'),
             'ev_tip'    => Input::get('tip'),
             'ev_ns2'    => Input::get('ns2')
         )
     ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T09:59:31.607

您的更新声明很好。

我的猜测是问题在于**Input::get("id")**不是 app_events.ev_id 的有效 id

尝试通过将 ->update 替换为 ->get() 来调试它。如果这个返回 null 你就会知道我的假设是正确的。（如果没有将其发布在您的问题中。）

在这种情况下，您必须修改 Input 而不是这段代码，这会使您的问题不再适合该问题。

# java - 使用 GAE for Java 对 Firefox Marketplace 进行清单应用程序验证

> ID：14487732
> 
> 赞同：1
> 
> 时间：2013-01-23T19:26:18.400
> 
> 标签：java, google-app-engine, firefox, web-applications, manifest

我想将我的应用上传到 Firefox Marketplace。当我尝试验证我的应用清单（称为 manifest.webapp）时，我收到以下消息：

> JSON 解析错误清单必须与 HTTP 标头“Content-Type: application/x-web-app-manifest+json”一起提供。有关更多信息，请参阅[https://developer.mozilla.org/en/Apps/Manifest#Serving_manifests](https://developer.mozilla.org/en/Apps/Manifest#Serving_manifests)。

我的应用程序在 Google App Engine for Java 上运行，所以这个[答案](https://stackoverflow.com/questions/8932010/mozilla-webapp-manifest-asks-for-http-header)对我不起作用。我尝试将以下行添加到我的 web.xml 文件中：

```
 <mime-mapping>
         <extension>webapp</extension>
        <mime-type>application/x-web-app-manifest+json</mime-type>
    </mime-mapping> 
```

也没有工作。不确定是否可以添加类似于 appengine-web.xml 的内容

无论如何，你知道我该如何设置吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T08:18:26.593

似乎有一个[问题`<mime-mapping>`](https://code.google.com/p/googleappengine/issues/detail?id=5934)- 改为尝试`<mime_mapping>`。

# ios - 在 ViewDidDissapear 上停止音频

> ID：14487733
> 
> 赞同：0
> 
> 时间：2013-01-23T19:26:21.843
> 
> 标签：ios, audio, avaudioplayer

我终于用 ViewDidLoad 循环播放了我的音频，但我真的很难用 ViewDidDissapear 让它停止。我已经阅读[了这个](http://www.techotopia.com/index.php/Playing_Audio_on_an_iOS_4_iPhone_using_AVAudioPlayer_%28Xcode_4%29#Implementing_the_Action_Methods)和[这个](http://developer.apple.com/library/ios/#DOCUMENTATION/AVFoundation/Reference/AVAudioPlayerClassReference/Reference/Reference.html)以及这个论坛上的许多答案和问题。如果我使用 [theAudio stop]，我会收到一个错误，并且大多数其他教程都会出现错误。我究竟做错了什么？

我已经导入了 AVFoundation/AVFoundation.h 框架并添加了 AVAudioPlayerDelegate

```
 - (void)viewDidLoad
{

    NSString *path = [[NSBundle mainBundle] pathForResource:@"safariSFX" ofType:@"mp3"];
    AVAudioPlayer* theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path]  error:NULL];
    [theAudio play];
    theAudio.numberOfLoops = -1;

    [super viewDidLoad];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:30:24.000

您需要将`AVAudioPlayer`实例存储为@property。这样，当`ViewWillDisappear`事件发生时，您可以调用`[theAudio stop];`在上面的代码中创建一个本地变量，因此以后没有任何方法可以引用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:31:33.863

您的代码超出范围。

`theAudio`如果您希望能够从 viewWIllDisappear 中调用它，则需要创建一个 ivar。

```
// In viewDidLoad  -- you will need to setup theAudio in viewWillAppear if you are going to come back to this viewcontroller
if(theAudio == nil){
//initialize theAudio if it is nil
theAudio = [[AVAudioPlayer alloc] initWithContentsOfURL:[NSURL fileURLWithPath:path]  error:NULL];
}
//begin playing
[theAudio play];
.
.
.

-(void)viewWillDisappear{
    //cleaning up if theAudio isn't nil, stop playing and set to nil;
    if(theAudio != nil){
       [theAudio stop];
       theAudio = nil;
    }
} 
```

# php - 拥有来自 youtube 频道的自定义 xml

> ID：14487736
> 
> 赞同：0
> 
> 时间：2013-01-23T19:26:34.060
> 
> 标签：php, youtube, youtube-api

我想在我网站的一个块中显示我上传到我的 youtube 频道的最后 5 个视频。我目前有[这个](http://gdata.youtube.com/feeds/base/users/ElectronicsPubVideos/uploads)产生 xml 文件的 url。

我不知道我应该在 youtube 的哪个位置自定义这个 xml 文件可以说我只希望它只返回最后 5 个视频。

此外，它在`entry`标签中返回某种 html 格式的内容，用于我在 youtube 中为上传文件编写的描述。例如，对于我的一个视频，它显示如下：

```
<div style="color: #000000;font-family: Arial, Helvetica, sans-serif;     font-size:12px; font-size: 12px; width: 555px;">
<table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td width="140" valign="top" rowspan="2"><div style="border: 1px solid #999999; margin: 0px 10px 5px 0px;"><a href="http://www.youtube.com/watch?v=Ihy785MpH7g&amp;feature=youtube_gdata"><img alt="" src="http://i.ytimg.com/vi/Ihy785MpH7g/0.jpg"></a></div></td>
<td width="256" valign="top"><div style="font-size: 12px; font-weight: bold;"><a style="font-size: 15px; font-weight: bold;                  font-decoration: none;" href="http://www.youtube.com/watch?v=Ihy785MpH7g&amp;feature=youtube_gdata">TinyOS Tutorial #3 - Quick overview and HelloWorld application!</a>
<br></div>
<div style="font-size: 12px; margin: 3px 0px;"><span>Topics:
-Quick overview of TinyOS
-Application Structure in TinyOS
-Simple HelloWorld application
-Extending HelloWorld applications with timers</span></div></td>
<td style="font-size: 11px; line-height: 1.4em; padding-left: 20px;             padding-top: 1px;" width="146" valign="top"><div><span style="color: #666666; font-size: 11px;">From:</span>
<a href="http://www.youtube.com/channel/UCJ61QPujJj-3E113XXIpRQg">ElectronicsPubVideos</a></div>
<div><span style="color: #666666; font-size: 11px;">Views:</span>
37</div>
<div style="white-space: nowrap;text-align: left"><img style="border: 0px none; margin: 0px; padding: 0px;                    vertical-align: middle; font-size: 11px;" align="top" alt="" src="http://gdata.youtube.com/static/images/icn_star_full_11x11.gif"> <img style="border: 0px none; margin: 0px; padding: 0px;                    vertical-align: middle; font-size: 11px;" align="top" alt="" src="http://gdata.youtube.com/static/images/icn_star_full_11x11.gif"> <img style="border: 0px none; margin: 0px; padding: 0px;                    vertical-align: middle; font-size: 11px;" align="top" alt="" src="http://gdata.youtube.com/static/images/icn_star_full_11x11.gif"> <img style="border: 0px none; margin: 0px; padding: 0px;                    vertical-align: middle; font-size: 11px;" align="top" alt="" src="http://gdata.youtube.com/static/images/icn_star_full_11x11.gif"> <img style="border: 0px none; margin: 0px; padding: 0px;                    vertical-align: middle; font-size: 11px;" align="top" alt="" src="http://gdata.youtube.com/static/images/icn_star_full_11x11.gif"></div>
<div style="font-size: 11px;">1
<span style="color: #666666; font-size: 11px;">ratings</span></div></td></tr>
<tr><td><span style="color: #666666; font-size: 11px;">Time:</span>
<span style="color: #000000; font-size: 11px; font-weight: bold;">42:52</span></td>
<td style="font-size: 11px; padding-left: 20px;"><span style="color: #666666; font-size: 11px;">More in</span>
<a href="http://www.youtube.com/videos?c=28">Science &amp; Technology</a></td></tr></tbody></table></div> 
```

我需要的只是几件事：标题、链接、视频的屏幕截图（我在 youtube 本身中选择的）和原始描述文本。这样我就可以用我自己的风格把它们很好地放在我的网站上。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:49:09.203

这对我有用

```
$string = file_get_contents('https://gdata.youtube.com/feeds/api/users/USER_NAME/uploads?v=2&alt=json&max-results=5&orderby=published');

if($result = json_decode($string, true)) {
    foreach($result['feed']['entry'] as $entry) {
        echo "Title: ".$entry['title']['$t']."<br />";
        echo "Description: ".$entry['media$group']['media$description']['$t']."<br />";
        echo "Published: ".$entry['published']['$t']."<br />";
        echo "Link: ".$entry['link'][0]["href"]."<br />";
        echo "Thumb: ".$entry['media$group']['media$thumbnail'][0]['url']."<br />";
        echo "<hr />";
    }
} else{
    echo "<h1>Problem with service</h1><br />";
    echo $output;
} 
```

希望有帮助。

# java - 如何将文件读入二维数组

> ID：14487737
> 
> 赞同：0
> 
> 时间：2013-01-23T19:26:41.203
> 
> 标签：java, arrays, bufferedreader

下午好，

我目前正在阅读格式为

```
5 5
0     0     0     0     0
0     0     0     0     0
0     0     0     0     0
0     0     0     0     0
0     0     0     0     0 
```

成二维数组。

第一行是二维数组的行长和列长（即 5x5）。

前面的行给出了输入值（值本身并不重要，只是它们是整数）需要读入二维数组，使得 array[0][0] = 0，array[0][1] = 0 等.

我目前最讨厌的是在第一行之后读取文件的内容并显示它到目前为止我所拥有的是，

```
public static void importFile(String fileName) throws IOException 
{
    int rows = 0;
    int cols = 0;

    int[][] numArray = null;

    try {
        int count = 0;

        BufferedReader reader = new BufferedReader(new FileReader(fileName));

        String line;
        while ((line = reader.readLine()) != null) 
        {
           count++;

            if (count == 1) 
            {
                String[] tokenizer = line.split("\\s+");

                rows = Integer.parseInt(tokenizer[0]);
                System.out.println(rows);

                cols = Integer.parseInt(tokenizer[1]);
                System.out.println(cols);

                numArray = new int[rows][cols];

            } // end of if statement
            else if(count > 1)
            {
                String[] tokenizer = line.split("   ");

                    for(int j = 0; j < tokenizer.length; j++)
                    {
                        numArray[rows][j] = Integer.parseInt(tokenizer[j]);
                        System.out.print(numArray[rows][j] + " ");
                    }
                    System.out.println("");

                rows++;

            } // end of else if

        }// end of while loop

    } //end of try statement
    catch (Exception ex) {
        System.out.println("The code throws an exception");
        System.out.println(ex.getMessage());
    } 

    System.out.println("I am printing the matrix: ");
    for (int i = 0; i < rows; i++) {
        for(int j=0; j < cols; j++)
            System.out.print(numArray[i][j] + " ");
        System.out.println("");
    }  
} // end of import file 
```

} // 类结束输出如给定

```
Please enter the file you'd like to use: 
data4.txt
5
5
The code throws an exception
5
I am printing the matrix: 
0 0 0 0 0 
0 0 0 0 0 
0 0 0 0 0 
0 0 0 0 0 
0 0 0 0 0 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:32:21.240

我认为你把事情复杂化了。如果可以假定文件格式始终正确，则可以安全地使用

```
String[] tokenizer = line.split(" "); // you have this line of code already.
rows = Integer.parseInt(tokenizer[0]);
cols = Integer.parseInt(tokenizer[1]); 
```

这将解决您阅读第一行的问题。

你的问题是这行代码：

```
rows = tempLine; 
```

您将值设置为`tempLine`( `int tempLine = line.charAt(i);`) 的方式，您将获得`int`a 的值`char`。的`int`值`char` `'5'`不是 5，而是 53，因为那是字符 的 ASCII 码`'5'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T22:41:35.027

我们在我的另一个答案下进行了扩展讨论。由于您的代码显示您尝试过（并且非常接近），因此我将为您的问题发布一个强大的解决方案。我完全重写了它，因为你的程序有很多小错误，而且要详细说明每个程序会需要更多的工作。以下方法将读取您指定格式的文件并返回结果`int[][]`。如果您的文件中有错误，该方法会告诉您；）

```
public static int[][] importFile(String fileName) throws IOException {
    BufferedReader reader = new BufferedReader(new FileReader(fileName));
    int[][] numArray;
    String line = reader.readLine();
    if (line == null) {
        throw new IllegalArgumentException("There was no 1st line.");
    }
    String[] dimensions = line.split("\\s+");
    try {
        int rows = Integer.parseInt(dimensions[0]);
        int cols = Integer.parseInt(dimensions[1]);
        // TODO: check for negative values.
        numArray = new int[rows][cols];
    } catch (NumberFormatException e) {
        throw new IllegalArgumentException("First line of file has to be 'rows cols'");
    }

    int row = 0; 

    while ((line = reader.readLine()) != null && row < numArray.length) {
        String[] tokens = line.split("\\s+");
        if (tokens.length > numArray[row].length) {
            throw new IllegalArgumentException("Too many values provided in matrix row " + row);
        }
        // to less values will be filled with 0\. If you don't want that
        // you have to uncomment the next 3 lines.
        //if (tokens.length < numArray[row].length) {
        //  throw new IllegalArgumentException("Not enough values provided in matrix row " + row);
        //}
        for(int column = 0; column < tokens.length; column++) {
            try {
                int value = Integer.parseInt(tokens[column]);
                numArray[row][column] = value; 
            } catch (NumberFormatException e) {
                throw new IllegalArgumentException("Non numeric value found in matrix row " + row + ", column " + column);
            }
        }
        row++;
    }
    if (line != null) {
        // there were too many rows provided.
        // Superflous ones are ignored.
        // You can also throw exception, if you want.
    }
    if (row < numArray.length) {
        // There were too less rows in the file. If that's OK, the
        // missing rows will be interpreted as all 0.
        // If that's OK with you, you can comment out this whole
        // if block
        throw new IllegalArgumentException("Expected " + numArray.length + " rows, there only were " + row);
    }
    try {
        reader.close(); // never forget to close a stream.
    } catch (IOException e) { }
    return numArray;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:44:03.880

对于第一行：

```
if (count == 1) {
                String[] tokenizer = line.split(" ");
                row=Integer.parseInt(tokenizer[0]);
                col=Integer.parseInt(tokenizer[1]);
                System.out.println("There are " + cols + " colums");
                numArray = new int[row][col];
            } // end of if statement 
```

用于填充数组

```
 String[] tokenizer = line.split(" ");
            for(int j=0;j<col;j++){
            numArray[0][j]=Integer.parseInt(tokenizer[j]);      //fill the array from tokenizer
            } 
```

# php - CakePHP 递归用于漂亮的路由 - 类别、主题、部分、子部分等

> ID：14487740
> 
> 赞同：1
> 
> 时间：2013-01-23T19:26:56.990
> 
> 标签：php, mysql, database, cakephp, cakephp-2.0

首先，我为这个问题的长度道歉。我想让它尽可能详细。

我正在使用 CakePHP 开发基于 Web 的应用程序。在过去的几周里，我一直在研究几个方面，目前正在用大量信息填充我的数据库表。用户应该可以通过漂亮、用户友好的 URL 轻松访问它。假设我已经`Users`设置了我的和 ACO、ARO 等。这一切都与这个问题不同。对于这个特定问题，我的数据库的相关方面如下：

**类别**：总体类别（例如，“猫”）

*   每个类别`hasMany`主题

**主题**：特定主题（例如，“喂食”）

*   每个主题`belongsTo`一个类别
*   每个主题`hasMany`部分

**部分**：主题中的部分（例如，“肉类”）

*   每节`belongsTo`一题
*   每节`hasMany`小节

**小节**：一个小节中的小节（例如，'Cooked'）

*   每小节`belongsTo`一节

等等等等。

我在我的`/Config/routes.php`文件中配置了路由以包含以下内容：

```
Router::connect('/KnowledgeBase', array('controller' => 'categories', 'action' => 'index'));

Router::connect('/KnowledgeBase/:category', array('controller' => 'categories', 'action' => 'view'));

Router::connect('/KnowledgeBase/:category/:topic', array('controller' => 'topics', 'action' => 'view'));

Router::connect('/KnowledgeBase/:category/:topic/:section', array('controller' => 'sections', 'action' => 'view'));

Router::connect('/KnowledgeBase/:category/:topic/:section/:subsection', array('controller' => 'subsections', 'action' => 'view')); 
```

如您所见，每种 URL 格式都链接到特定的控制器，以便用户可以输入 URL，例如[http://www.mysite.com/KnowledgeBase/Cats/Feeding/Meat/Cooked](http://www.mysite.com/KnowledgeBase/Cats/Feeding/Meat/Cooked)或[http://www .mysite.com/KnowledgeBase/Cats/Grooming](http://www.mysite.com/KnowledgeBase/Cats/Grooming)它将把它们放在正确的页面上，由正确的控制器处理（在这两个示例中`subsections`和`topics`分别）。

这是我有点卡住的地方。这些数据需要验证。将来我很有可能会设置主题/部分/子部分具有相同名称的东西。`$params`如果数据没有经过递归验证，理论上对小节进行简单搜索可能会导致问题。

以我的狗类别为例： [http](http://www.mysite.com/KnowledgeBase/Cats/Feeding/Meat/Cooked) ://www.mysite.com/KnowledgeBase/Cats/Feeding/Meat/Cooked 而不是： [http ://www.mysite.com/KnowledgeBase/Dogs/Feeding/Meat/熟的](http://www.mysite.com/KnowledgeBase/Dogs/Feeding/Meat/Cooked)

当我登陆特定的控制器（在这种情况下是我的`SubsectionsController`）时，我只需要选择标题为标题的子部分，`Cooked`它属于标题类别中`Meat`的主题下的部分（而不是，，或......我离题了）。`Feeding``Dogs``Cats``Leopards``Armadillos``Dolphins`

这样做的最佳方法是什么？到目前为止，我可以看到两个潜在的选择：

1.  将所有这些 URL 路由到一个特定的控制器（例如全能控制器）并根据请求的数据`KnowledgeBaseController`使用调用从那里处理所有内容。`recursive => 3`
2.  单独处理此信息，以便将 my`SubsectionsController`设置为`recursive => -3`并确保数据具有有效的父级。
3.  使用这些选项的混合 - 使用中央`KnowledgeBaseController`通过`recursive => X`查找查询验证数据，然后将所有这些信息发送到有问题的单个控制器以查看。

我知道我的代码应该尽可能 DRY，这意味着我应该只使用一个中央控制器来验证 URL `$params`。但是，类别、主题、部分、子部分的布局非常不同，我希望它们由它们自己的控制器处理，同时保持这种 URL 格式。解决这个问题的最佳方法是什么？是否有“最佳实践”解决方案？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T21:02:59.057

首先，您列出的路线应该是相反的顺序。最具体的路线在顶部，最通用的路线在底部。

您应该使用选项#2。每个层次结构都由它自己的控制器管理。所以采取例如。在您的层次结构的最低级别 SubSections 中，您将拥有一个 SubSectionsController 并使用适当的递归值在其 SubSection 模型上进行查找以获取它的相关部分、部分的主题等等（顺便说一句，这仍然是递归的 = 3，没有递归 = -3) 这样的东西。因此，这样您就拥有了层次结构的所有记录，并且您可以使用层次结构的相关记录来验证每个 url 片段。`$this->request->params`将为您的路线的每个路线元素包含一个键。

# java - 将 FrameLayout 拉伸到可见屏幕

> ID：14487745
> 
> 赞同：1
> 
> 时间：2013-01-23T19:27:13.420
> 
> 标签：java, android, android-framelayout

我的界面如下所示：http: [//i.stack.imgur.com/zADUL.png](https://i.stack.imgur.com/zADUL.png)

![在此处输入图像描述](../Images/145c2144c863d1e7bcda67a328bf574a.png)

是否有任何简单的解决方案可以帮助我将 FrameLayout 拉伸到可见屏幕？我尝试将 fillViewport 和 wrap_content 设置为 tabcontent 子项，但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:47:21.940

试试这个 ：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".Form" >

    <RelativeLayout
        android:id="@+id/header"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_alignParentTop="true"
        android:background="#cccccc" >
    </RelativeLayout>

    <FrameLayout
        android:layout_width="match_parent"
        android:layout_height="match_parent"
        android:layout_above="@+id/footer"
        android:layout_below="@+id/header"
        android:background="#ff0000" >
    </FrameLayout>

    <RelativeLayout
        android:id="@+id/footer"
        android:layout_width="match_parent"
        android:layout_height="50dp"
        android:layout_alignParentBottom="true"
        android:background="#cccccc" >
    </RelativeLayout>

</RelativeLayout> 
```

谢谢。

# android - 以编程方式更改 ListView 项目选择器

> ID：14487747
> 
> 赞同：0
> 
> 时间：2013-01-23T19:27:14.973
> 
> 标签：android, android-listview

我有一个 ListView，它有 3 种不同类型的项目，我希望这些类别中的每一个都有不同的选择器。到目前为止，我已经为每个类别使用不同的项目布局来实现这一点，但我认为这有点愚蠢，因为这 3 个布局文件之间唯一改变的是选择器属性`android:background="@drawable/cat1_selector"`

没有办法通过类似于类`setSelector`中的方法以编程方式为每个项目执行此操作`ListView`吗？

谢谢 ！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:15:15.333

`getView()`或者，您可以通过覆盖`ListAdapter`. [在这里](http://developer.android.com/reference/android/app/ListActivity.html)查看更多

# python - 阻止文本编辑器破坏 python 文件中的空格

> ID：14487750
> 
> 赞同：-2
> 
> 时间：2013-01-23T19:27:25.670
> 
> 标签：python, whitespace, text-editor

我有一个非常烦人的问题，当我在一个文本编辑器或另一个文本编辑器中打开它们时，我不太明白我的 python 文件在哪些地方被破坏了（看起来被破坏了？？）。空间消失，控制块也随之消失。显然，这与如何保存空白有关，但我不完全理解或不知道如何控制它。

我在最多三台计算机上使用多个编辑器编辑文件，主要是 kate、nano 和 vim。我以为我将它们全部设置为 tab=4 空格，并为 *.py 自动缩进，但显然它不是那样工作的。

我需要做些什么来确保我的文件在文本编辑器中的行为一致？非常感谢您对问题所在的一些解释以及对上述编辑的具体建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:28:48.467

使用空格，而不是制表符。与制表符不同，空格总是被解释为相同的宽度。PEP 8（python 样式指南）[建议在 tabs 上使用空格](http://www.python.org/dev/peps/pep-0008/#tabs-or-spaces)，[Google Python styleguide 也是如此](http://google-styleguide.googlecode.com/svn/trunk/pyguide.html#Indentation)。

因此，如果您始终只使用空格，您的代码将始终正确缩进。

您可以通过使用开关运行代码来检查您的 python 文件中是否存在不一致的选项卡使用情况`-tt`：

```
python -tt yourscript.py 
```

清除不一致后，使用 Unix[`expand`命令](http://linux.die.net/man/1/expand)将制表符替换为空格：

```
expand -t 4 yourscript.y 
```

where`-t 4`指示`expand`用 4 个空格替换制表符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:56:17.483

您的问题是您的一个或多个编辑器混合使用制表符和空格进行缩进。即使您将每个编辑器都设置为将制表符显示为 4 个空格，Python 也会将 2 个制表符字符的缩进与 1 个制表符和 4 个空格的缩进区别对待，尽管它们在您的编辑器中看起来相同。您需要将编辑器配置为插入固定数量的空格而不是制表符。然而，这与 Stack Overflow 无关。您需要在例如 superuser.com 上询问您的特定编辑。

# html - 删除网页菜单中的第一个孩子

> ID：14487754
> 
> 赞同：0
> 
> 时间：2013-01-23T19:27:33.200
> 
> 标签：html, css

我正在尝试为网页制作菜单，并将图像作为菜单分隔符插入。也许这是一个有点愚蠢的问题，但我正在尝试删除菜单的第一张图片，这是我的代码：

```
.menu ul li {
    background: url(separator.png) no-repeat left;
    display: inline;
    float: left;
    height:  50px;
    line-height: 50px;
    margin: 0;
    width: 155px; 
```

并尝试删除第一个分隔符：

```
 .menu a.first {
         background-image: none;
    } 
```

我试图做这些页面中的内容：http: [//jsfiddle.net/Jaybles/uJdhH/1/](http://jsfiddle.net/Jaybles/uJdhH/1/) http://www.e-blueprint.co.uk/2011/how-to-use-an-image-作为菜单分隔符/

但它不起作用

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:32:12.033

尝试这个：

```
.menu li:first-child{
     background-image: none;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:38:20.587

好吧，你有 <li> 的背景...然后从 <a> 中删除了背景..'行不通'

```
.menu ul li {
    background: url(separator.png) no-repeat left;
    display: inline;
    float: left;
    height:  50px;
    line-height: 50px;
    margin: 0;
    width: 155px; 
```

并尝试删除第一个分隔符：

```
.menu ul li:first-child {
     background-image: none;
} 
```

jsfiddle：http: [//jsfiddle.net/sd6Vu/](http://jsfiddle.net/sd6Vu/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:30:52.887

因为您的背景在`li`标签上，而您的`.first`班级在`anchor`标签上，所以您正在删除锚所包含的任何背景而不是列表项。

改成 ：

```
.menu li.first {
         background-image: none;
    } 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T19:32:01.523

您正在为列表项指定上面的背景属性，然后删除 a.first 类上的背景图像。您应该将 .menu 类更新为：

```
 .menu li.first { background:none; } 
```

# r - 忽略 NA 的 R 平等

> ID：14487756
> 
> 赞同：19
> 
> 时间：2013-01-23T19:27:40.263
> 
> 标签：r

是否有等价的`==`但结果是`x != NA`if`x`不是`NA`？

以下是我想要的，但它很笨重：

```
mapply(identical, vec1, vec2) 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2018-04-19T05:52:09.133

只需将“==”替换为 %in%。

例子：

```
> df <- data.frame(col1= c("a", "b", NA), col2= 1:3)
> df
       col1 col2
    1    a    1
    2    b    2
    3 <NA>    3

> df[df$col1=="a", ]
       col1 col2
    1     a    1
    NA <NA>   NA

> df[df$col1%in%"a", ]
       col1 col2
    1    a    1

> "x"==NA
  [1] NA

> "x"%in%NA
  [1] FALSE 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-01-23T19:38:45.390

`1 == NA`返回一个逻辑`NA`而不是`TRUE`or `FALSE`。如果你想打电话`NA` `FALSE`，你可以添加第二个条件：

```
set.seed(1)
x <- 1:10
x[4] <- NA
y <- sample(1:10, 10)

x <= y
# [1]  TRUE  TRUE  TRUE    NA FALSE  TRUE  TRUE FALSE  TRUE FALSE

x <= y & !is.na(x)
# [1]  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE FALSE  TRUE FALSE 
```

您还可以使用第二个处理步骤将所有`NA`值从相等测试转换为`FALSE`.

```
foo <- x <= y
foo[is.na(foo)] <- FALSE
foo
# [1]  TRUE  TRUE  TRUE FALSE FALSE  TRUE  TRUE FALSE  TRUE FALSE 
```

此外，对于它的价值，`NA == NA`回报`NA`也是如此`NA != NA`。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-03-11T15:53:09.377

该`==`运算符通常与过滤 data.frames 结合使用。

在这种情况下，`dplyr::filter`将仅保留您的条件评估为 的行`TRUE`，这与`[`. 这有效地实现`==`了但 where评估`1 == NA`为`FALSE`.

例子：

```
> df <- data.frame(col1= c("a", "b", NA), col2= 1:3)
> df
       col1 col2
    1    a    1
    2    b    2
    3 <NA>    3

> dplyr::filter(df, col1=="a")
       col1 col2
    1     a    1 
```

# android - Maven 无法识别测试范围内的 apklib 依赖项

> ID：14487758
> 
> 赞同：1
> 
> 时间：2013-01-23T19:27:48.700
> 
> 标签：android, unit-testing, maven, android-maven-plugin

所以我在一个模块中有一些类来帮助进行 Robolectric 风格的单元测试，我希望能够在我的一堆其他模块中共享这个模块。这个模块有它自己的单元测试，我已经将它设置为 apklib。我正在使用[maven-android-plugin](http://code.google.com/p/maven-android-plugin/)。问题似乎是它无法识别测试范围内的 apklib。是否有任何解决方法，或者我错过了什么？

我注意到的一件事是，如果我运行 command `mvn install`，一切都会构建并且我的所有测试都运行良好，但如果我这样做`mvn test`，它会说它找不到类。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T21:29:19.403

Maven 有“反应器”这个概念，这只是对正在构建的项目列表的一个花哨的术语。在 Maven 构建的开始和结束时，Maven 打印出这个项目列表（使用`/project/name`(XPath) 如果定义或`groupId:artifactId`其他方式）。

对于反应器中的每个项目，Maven 维护一个已附加的工件列表。默认情况下，每个模块`pom.xml`都是附加的，并且随着每个插件的运行，它们可以选择附加额外的工件。大多数插件不附加工件，以下是一些插件：

*   `jar:jar`创建一个`.jar`并将其附加为主要工件（除非您在配置中指定分类器）
*   `war:war`创建一个`.war`并附加它
*   `source:jar`创建`.jar`源 Java 代码并附加一个分类器`source`
*   `javadoc:jar`创建一个`.jar`JavaDocs 并附加一个分类器`javadoc`
*   `android:apklib`创建一个`.apklib`工件并将[其附加为主要工件](https://github.com/jayway/maven-android-plugin/blob/master/src/main/java/com/jayway/maven/plugins/android/phase09package/ApklibMojo.java#L91)

还有一个默认的主工件（这是被 jar:jar 替换的那个），它实际上是一个目录而不是文件，因此它不会被安装或部署到本地存储库缓存或远程存储库。

因此，当在反应器中，并且附加主工件的插件尚未运行（在您的情况下`android:apklib`），并且另一个插件要求主工件时，它将被赋予目录`${project.build.outputDirectory}`。如果在附加主要工件之后，则将提供该主要工件。

`test`阶段发生在阶段之前`package`，因此将传递目录而不是`.apklib`.

在多模块项目中事情变得更加复杂（这是我的长篇介绍应该帮助你的地方）

Maven 必须构建测试类路径。如果依赖项之一在反应器内，Maven 将使用附加到反应器的工件。否则它将使用本地缓存（必要时从远程存储库填充）。

当你跑

```
mvn test 
```

在来自根的 multimdule 项目中，没有替换默认（基于目录的）工件，因此模块内类路径将指向目标/类目录（我们假设 android 插件知道如何处理此类测试...您发现它没有）。

当你跑

```
mvn package 
```

或者

```
mvn install 
```

然而，在同一个项目中，因为每个模块都按顺序完成其生命周期，所以所有依赖模块都将交换它们的`.apklib`文件作为附加的工件。

这里的问题很可能是您的测试不适用于目录并且需要实际`.apklib`文件。在这种情况下，您别无选择，只能将生命周期至少推到`package`阶段。

# python - pycuda.driver 中的 pycuda ImportError

> ID：14487761
> 
> 赞同：5
> 
> 时间：2013-01-23T19:28:18.367
> 
> 标签：python, importerror, pycuda

我正在尝试编译一些用于我的 GPU 的源代码。我为此使用pycuda。当我编译源代码时，我从 Python 收到一些错误：

```
C:\Users\Dmitriy\wcm>python ws_gpu.py test.dcm
Traceback (most recent call last):
  File "ws_gpu.py", line 2, in <module>
    import pycuda.gpuarray as gpu
  File "C:\Python27\lib\site-packages\pycuda\gpuarray.py", line 3, in <module>
    import pycuda.elementwise as elementwise
  File "C:\Python27\lib\site-packages\pycuda\elementwise.py", line 33, in <module>
    from pycuda.tools import context_dependent_memoize
  File "C:\Python27\lib\site-packages\pycuda\tools.py", line 30, in <module>
    import pycuda.driver as cuda
  File "C:\Python27\lib\site-packages\pycuda\driver.py", line 2, in <module>
    from pycuda._driver import *
ImportError: DLL load failed: ═х эрщфхэ єърчрээ√щ ьюфєы№. 
```

有没有人遇到过类似的问题？我该如何解决这个问题？我使用 Windows 7 64 位，我的 GPU (NVIDIA GT520M) 和 CUDA Toolkit v.5.0 的最后一个驱动程序。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-25T11:56:20.440

这种错误几乎总是因为 PyCUDA 安装损坏。有一个名为的库文件`_driver.dll`提供与 CUDA 驱动程序 API 的绑定。出现错误消息是因为找不到该 dll 或无法加载它所依赖的库（即 CUDA）。我不能说更多，因为我无法阅读您发布的清晰错误文本。

诊断此类问题的一种方法是在交互式 python shell 中尝试以下操作：

```
import pycuda
pycuda.__file__ 
```

第二个命令将告诉您活动 PyCUDA 安装的根路径在哪里（[取自邮件列表帖子](http://lists.tiker.net/pipermail/pycuda/2011-September/003419.html)）。在该路径中搜索将找到您的位置，`_driver.dll`并在 dll 文件上运行依赖项诊断工具将显示可以找到或无法找到的内容。如果这不起作用，我建议将您的问题发送到 PyCUDA 邮件列表。

# powershell - Powershell路径不采用字符串变量

> ID：14487763
> 
> 赞同：0
> 
> 时间：2013-01-23T19:28:21.493
> 
> 标签：powershell, path, get-childitem

我正在使用以下代码通过 Windows 窗体“浏览”功能选择一个文件夹，然后将该路径传递给 gci cmdlet

```
cls

Function Get-Directory($initialDirectory)
{   
 [System.Reflection.Assembly]::LoadWithPartialName("System.windows.forms") |
 Out-Null

 $OpenfolderDialog = New-Object System.Windows.Forms.FolderBrowserDialog
 $OpenfolderDialog.RootFolder = $initialDirectory
 $OpenfolderDialog.ShowDialog()| Out-Null
 $StartDir = $OpenfolderDialog.SelectedPath 
 Return $StartDir | Out-String
 } 

 $myDir = Get-Directory -initialDirectory "Desktop"

 $Child = gci -path $mydir -r -Filter *.jpg 

 Foreach ($item in $Child) {Move-Item -path $item.pspath -Destination $myDir -Force} 
```

但我收到这些错误：

***在 C:\Test\Combine Pics2.ps1:17 char:13 + $Child = gci <<<< -path $mydir -r -Filter *.jpg + CategoryInfo : ObjectNotFound: (C:\Test :String ) [Get-ChildItem], ItemNotFoundException + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetChildItemCommand

Move-Item：无法将参数绑定到参数“路径”，因为它为空。在 C:\Test\Combine Pics2.ps1:19 char:43 + Foreach ($item in $Child) {Move-Item -path <<<< $item.pspath -Destination $myDir -Force} + CategoryInfo : InvalidData: (:) [Move-Item]，ParameterBindingValidationException + FullyQualifiedErrorId：ParameterArgumentValidationErrorNullNotAllowed，Microsoft.PowerShell.Commands.MoveItemCommand***

$myDir 变量是 String 类型的，为什么不传给 -path 参数。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T20:15:27.420

如果用户取消了对话怎么办？试试这个：

```
Function Get-Directory($initialDirectory)
{   
     [System.Reflection.Assembly]::LoadWithPartialName("System.windows.forms") | Out-Null

     $OpenfolderDialog = New-Object System.Windows.Forms.FolderBrowserDialog
     $OpenfolderDialog.RootFolder = $initialDirectory
     $result = $OpenfolderDialog.ShowDialog()

     if($result -eq 'ok')
     {
         $OpenfolderDialog.SelectedPath
     }
     else
     {
        "canceled"
     }
 } 

$mydir = Get-Directory -initialDirectory Desktop

if($mydir -ne 'canceled')
{
    gci -path $mydir
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T20:09:39.733

尝试这个：

```
Function Get-Directory($initialDirectory)
{   
    [System.Reflection.Assembly]::LoadWithPartialName("System.Windows.Forms") | Out-Null

    $OpenfolderDialog = New-Object System.Windows.Forms.FolderBrowserDialog
    $OpenfolderDialog.RootFolder = $initialDirectory
    if ($OpenfolderDialog.ShowDialog() -eq "OK") {
        #Continue only if a folder was selected
        $OpenfolderDialog.SelectedPath
    }
} 

$myDir = Get-Directory -initialDirectory "Desktop"

#Continue only if a folder was selected
if($myDir) {
    $Child = Get-ChildItem -path $mydir -Recurse -Filter *.jpg
    Foreach ($item in $Child) {
        Move-Item -path $item.pspath -Destination $myDir -Force
    }
} 
```

我用一些 if 测试对其进行了清理，因此当人们取消对话框时它不会返回错误。不需要`Out-String`as`SelectedPath`本身返回单个字符串。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T20:02:20.590

我在值的末尾有一个换行符和回车符`$mydir`，所以尝试用这样的东西进行修剪，看看这是否是你的问题：

```
$Child = gci -path $mydir.Trim("`r`n") -r -Filter *.jpg 
```

**更新：**更好的是，只是失去`Out-String`你的功能：

```
Return $StartDir 
```

# delphi - Delphi覆盖文件和错误的修改日期时间

> ID：14487764
> 
> 赞同：0
> 
> 时间：2013-01-23T19:28:23.890
> 
> 标签：delphi, delphi-xe2, last-modified, filetime

我想在 Delphi中获取文件的**最后修改时间。**

通常类似的东西`FileAge()`可以解决问题，唯一的问题是：如果我用**文件 B****覆盖****文件 A* * ，文件 A 的**修改日期不会像当前覆盖时间**那样更新（？）**`CopyFile`**

 ****我明白了：`CopyFile`也复制文件属性，但我真的需要获取在文件被覆盖时*也有效的修改日期。*

**有这样的功能吗？**我的整个应用程序依赖于修改时间来决定我是否应该继续处理文件！

* * *

**编辑**只是为了澄清：我只是在监视文件。修改它们的不是我的应用程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:40:52.843

的文档[`CopyFile`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa363851.aspx)说：

> 现有文件的文件属性被复制到新文件中。

这意味着您不能基于文件的最后修改属性或文件的任何属性来使用您的程序。确实有各种方法可以改变文件的最后修改属性。事实上，它可以及时倒退。

相反，我建议您使用[`ReadDirectoryChangesW`](http://msdn.microsoft.com/en-gb/library/windows/desktop/aa365465.aspx)来跟踪修改。这将允许您在文件被修改时接收通知。您可以基于`ReadDirectoryChangesW`API 以基于事件的方式编写程序。

如果您不能使用`ReadDirectoryChangesW`文件属性，那么您将不得不根据文件的内容做出决定。****

# c# - 继承设计：如何使方法在基类上运行（C#）

> ID：14487766
> 
> 赞同：-2
> 
> 时间：2013-01-23T19:28:34.557
> 
> 标签：c#, class, inheritance, interface, abstract

我希望这个问题的标题准确地总结了这个问题。以下是详细信息：

我有两个类共享几个属性和相关方法，让我们来看看 MyFirstClass 和 MySecondClass。因此，我将这组相交的属性放入我的两个类都继承自的抽象类中：MyAbstractBaseClass。

到目前为止，一切都很好。但是，在我代码中其他地方的方法中，我正在操作这些共享属性，并希望能够通过引用将 MyFirstClass 和 MySecondClass 的实例传递给此方法。就像是：

```
result1 = myMethod(ref MyFirstClass);
result2 = myMethod(ref MySecondClass); 
```

我尝试使用 MyAbstractBaseClass 作为我的方法的参数类型：

```
public bool myMethod(ref MyAbstractBaseClass anObject) 
```

但这不被编译器接受。我还尝试从 MyAbstractBaseClass 中提取接口，并让 MyFirstClass 和 MySecondClass 都从 MyAbstractBaseClass 继承并实现接口，如下所示：

```
public class MyFirstClass : MyAbstractBaseClass, IMyAbstractBaseClass 
public class MySecondClass : MyAbstractBaseClass, IMyAbstractBaseClass 
```

然后，我期望 myMethod 能够对这两个类进行操作，如果我将接口的参数设置为 IMyAbstractBaseClass 类型（毕竟，在 OOP 中，您应该尽可能针对接口进行编码）。

```
public bool myMethod(ref IMyAbstractBaseClass anObject)

IMyAbstractBaseClass myObject = new MyFirstClass();
result1 = myMethod(ref myObject); 
```

这也行不通。编译器说不可能将 MyFirstClass 转换为 IMyAbstractBaseClass，这对我来说似乎很奇怪，因为 MyFirstClass 实现了接口，因此我应该能够将此类的所有对象都视为类型接口，不是吗？

我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:36:34.857

参数真的需要通过ref传递吗？

如果它们是引用类型（即类）（它们是），并且您只是在它们上设置属性，那么它们不需要通过引用传递。（通过引用传递引用是有一个指向指针的指针）

只有在您将替换整个对象的情况下，您才需要参考：

```
public bool myMethod(ref IMyAbstractBaseClass anObject)
{
      myObject = new MyFirstClass();
      return true;
}

public bool myMethod2(MyAbstractBaseClass anObject)
{
      myObject.SomeProperty = 5;
      return true;
}

IMyAbstractBaseClass myObject = new MyFirstClass();
result1 = myMethod(ref myObject);
result1 = myMethod2(myObject); 
```

myMethod2() 将完全按照您的意愿工作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:37:12.773

不要通过引用传递参数，除非出于某种奇怪的原因您需要将方法参数分配给不同的对象，这通常不是要走的路。“Ref”参数不支持抽象类。

C# 不是 C++。如果没有关键字，它*不会*创建整个对象的副本。`ref`它将对象的引用（基本上是指针）的副本传递到方法中。

# c# - 优化填充嵌套手风琴

> ID：14487774
> 
> 赞同：-1
> 
> 时间：2013-01-23T19:29:07.747
> 
> 标签：c#, jquery, .net, performance, optimization

我在 Parent -> Child -> Grandchild 关系中有三种数据类型，如下所示：

```
Mission -> Activity -> Project 
```

它们包含关系的父 ID（即“项目”包含“活动”ID）。我有一些代码用于生成 jQuery 嵌套手风琴设置，因此用户可以单击“任务”以查看相关的“活动”，然后可以单击“活动”以查看相关的“项目”。

我的代码从点击页面到从数据库中获取数据然后填充页面大约需要六秒钟。这太长了，无论如何都想优化我的代码。使用 miniprofiler (miniprofiler.com) 我可以看到它对数据库进行了 131 次调用，其中有很多重复调用，但我知道为什么。

非常感谢您能给我的任何帮助！

我用来获取所有数据并对其进行组织的 LINQ 查询：

```
public IEnumerable<MissionWithActivities> GetTierTree()
{
var q = from mission in _context.tMissions
        join activity in _context.tActivities on mission.id equals activity.missionId
        join project in _context.tDefaultEventTypes on activity.id equals project.activityId
        where !project.isRemoved && project.defaultCategoryId == 4
        orderby mission.id, activity.id, mission.name
        select new DefaultEventType(project.tierLevel.TryParseEnum<GanttType>(GanttType.Unknown), DefaultCategoryRepository.CreateFrom(project.tDefaultCategory))
        {
            AllowNumericSuffix = project.allowNumericSuffix,
            AttachMilestoneMoniker = project.attachMilestoneMoniker,
            Description = project.description,
            Id = project.id,
            IsReadOnly = project.isReadOnly,
            IsSticky = project.isSticky,
            Name = project.name,
            Sid = project.sid,
            Style = project.style.TryParseEnum<GanttElementStyle>(GanttElementStyle.Unknown),
            TimeStamp = project.createdDT,
            UpdatedTimeStamp = project.updatedDT,
            Activity = new Activity { Id = activity.id, Name = activity.name, Mission = new Mission { Id = mission.id, Name = mission.name } }
        };
var q2 = q.GroupBy(
    e => e.Activity.Mission.Id,
    (mid, events) => new MissionWithActivities
    {
        Mission = events.First().Activity.Mission,
        Activities = events.GroupBy(
            e => e.Activity.Id,
            (aid, events2) => new ActivityWithEvents
            {
                Activity = events2.First().Activity,
                Events = events2
            })
    });
return q2.ToList(); 
```

}

我使用代码隐藏来最初填充数据列表，然后是嵌套的手风琴：

```
public void SetTierTree(IEnumerable<MissionWithActivities> tierList)
{
dlMission.DataSource = tierList;
dlMission.DataBind();
}
public void dlMission_ItemDataBound(Object sender, DataListItemEventArgs e)
{
DataListItem item = e.Item;
MissionWithActivities mwa = (MissionWithActivities)item.DataItem;
var dlActivity = (DataList)item.FindControl("dlActivity");
dlActivity.DataSource = mwa.Activities;
dlActivity.DataBind();
var i = 0;
foreach (var project in mwa.Activities)
{
    DataListItem pItem = dlActivity.Items[i];
    var lbCreateNewProject = (LinkButton)pItem.FindControl("lbCreateNewProject");
    lbCreateNewProject.CommandArgument = project.Activity.Id.ToString();
    var dlProject = (DataList)pItem.FindControl("dlProject");
    dlProject.DataSource = project.Events;
    dlProject.DataBind();
    i++;
    var j = 0;
    foreach (var data in project.Events)
    {
        DataListItem lblItem = dlProject.Items[j];
        var lbEditProject = (LinkButton)lblItem.FindControl("lbEditProject");
        var lbRemoveProject = (LinkButton)lblItem.FindControl("lbRemoveProject");
        lbEditProject.CommandArgument = data.Id.ToString();
        lbRemoveProject.CommandArgument = data.Id.ToString();
        j++;
    }
}
} 
```

这是带有 jQ​​uery 的 .aspx 页面（我没有删除 .net，所以它不会运行）但我想包含代码供您阅读：

```
$(document).ready(function () {
        $("html").addClass("js");
        $(".row").mouseover(function () { $(this).addClass("over"); }).mouseout(function () { $(this).removeClass("over"); });
        $('h5').click(function () { $(this).prev(".heading_add").toggle(); });
        $(".row:even").addClass("alt");
        $.fn.accordion.defaults.container = false;
        $(function () {
            $("#acc1").accordion({
                el: ".h",
                head: "h4, h5",
                next: "div",
                initShow: "none"
            });
            $("html").removeClass("js");
        });
    });
<div id="main">
        <ul id="acc1" class="accordion">
        <asp:DataList ID="dlMission" runat="server" style="width:600px;">
        <ItemTemplate>
            <li>
                <h4><%# Eval("Mission.Name") %></h4>
                <div class="inner">
                    <ul>
                    <asp:DataList ID="dlActivity" runat="server">
                    <ItemTemplate>
                        <li>
                          <asp:LinkButton ID="lbCreateNewProject" CausesValidation="false" CssClass="heading_add" runat="server" Text="[ + ] Add New Project Type" OnCommand="lbCreateNewProject_OnCommand" />
                          <h5><%# Eval("Activity.Name") %></h5>
                          <div class="inner">
                          <asp:DataList ID="dlProject" runat="server">
                          <ItemTemplate>
                            <div class="row">
                              <%# Eval("Name") %><div class="action_buttons"><asp:LinkButton ID="lbEditProject" CausesValidation="false" runat="server" Text="Edit" OnCommand="lbEditProject_OnCommand" />&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<asp:LinkButton ID="lbRemoveProject" CausesValidation="false" runat="server" Text="Remove" OnCommand="lbRemoveProject_OnCommand" /></div><br />
                            </div>
                          </ItemTemplate>
                          </asp:DataList>
                          </div>
                        </li>
                    </ItemTemplate>
                    </asp:DataList>
                    </ul>
                </div>
            </li>
        </ItemTemplate>
        </asp:DataList>
        </ul>
    </div> 
```

出于好奇，我正在使用 jQuery.nestedAccordion.js 插件来执行此操作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T17:23:53.810

我发现我遇到的缓慢的主要原因与 LINQ 的工作方式有关。我的主要问题是在 LINQ 查询中：

```
DefaultCategoryRepository.CreateFrom(project.tDefaultCategory) 
```

CreateFrom 函数导致 LINQ 获取与 DefaultCategory 相关的所有数据，这些数据非常广泛。我不知道 LINQ 会一直沿树向下抓取每个关系并返回它，无论它是否被使用。您可以在此处阅读以获取更多信息：

[http://msdn.microsoft.com/en-us/library/bb738633(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/bb738633(v=vs.100).aspx)

MiniProfiler 仍然说重复调用 131 次，但我认为这与 .Net 运行事物的方式有关，如果我单步执行代码，它只会命中一次查询，因此仍然可以解决该部分。

希望这对某人有帮助！

# java - Netbeans 无法启动 derby 服务器

> ID：14487779
> 
> 赞同：0
> 
> 时间：2013-01-23T19:29:21.133
> 
> 标签：java, netbeans, netbeans-7, derby

我一直在尝试启动服务器，但收到以下错误消息：

> 2013-01-23 19:24:18.133 GMT：使用基本服务器安全策略安装的安全管理器。2013-01-23 19:24:18.430 GMT：无法在主机 localhost 上的端口 1527 上侦听：java.net.BindException：无法分配请求的地址：JVM_Bind

最重要的是，我得到一个提示：

> 无法连接。无法使用 org.apache.derby.jdbc.ClientDriver 建立与 jdbc:derby://localhost:1527/sample 的连接（java.net.SocketException：连接到端口 1527 上的服务器 localhost 时出错，并显示消息 Network is unreachable: connect。） .

假设如何解决这样的问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-03T17:07:23.300

我有同样的问题，但我的问题是我的环回（lo）网络接口被禁用......我花了很长时间才发现......（但我认为最常见的是另一个已经运行的德比实例）

# python - 为非标准 Python 版本安装 urllib3

> ID：14487783
> 
> 赞同：0
> 
> 时间：2013-01-23T19:29:43.067
> 
> 标签：python

我正在编码的服务器有一个可用的 Python 2.4 二进制文件`/usr/bin/`和一个可用的 Python 3.0 二进制文件`$HOME/bin/`。我需要安装`urllib3`以与 Python 3 一起使用，但`easy_install`当然使用系统范围内可用的 python。`easy_install`为 Python 2.4安装`urllib3`得很好。我尝试使用 Python 3 运行它，但它抱怨缺少模块：

```
$ ~/bin/python3.0 /usr/bin/easy_install --prefix=/home/web/local urllib3
Traceback (most recent call last):
  File "/usr/bin/easy_install", line 5, in <module>
    from pkg_resources import load_entry_point
ImportError: No module named pkg_resources 
```

我该如何解决这个问题？请注意，我确实安装`pip`了`easy_install`但`pip`缺少太多依赖项，所以我坚持使用`easy_install`.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:40:29.253

你得到的错误是因为`easy_install`没有为 Python3 安装。

您想首先`easy_install`按照此处的说明安装 Python3：http: [//pypi.python.org/pypi/distribute#installation-instructions](http://pypi.python.org/pypi/distribute#installation-instructions)

```
$ curl -O http://python-distribute.org/distribute_setup.py
$ python3.0 distribute_setup.py 
```

然后您就可以运行`~/bin/easy_install`或`easy_install-3.0`安装`urllib3`：

```
$ easy_install-3.0 urllib3 
```

现在！请注意，urllib3 不正式支持 Python 3.0……3.2 是第一个受支持的版本，一般来说 Python 3.2 是大多数库作者现在所针对的版本，因此可能值得考虑切换到 3.2（更不用说它太多了）更快，还有其他快乐的事情）。

# wordpress - buddypress 组的子域？

> ID：14487784
> 
> 赞同：0
> 
> 时间：2013-01-23T19:29:43.427
> 
> 标签：wordpress, buddypress

如何为使用 buddypress 创建的每个组创建子域？你有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-26T03:14:55.417

创建 - 不完全是，但是使用 mod_rewrite 您可以使 groupsubdomain.domain.eu 之类的链接与 domain.eu/sites/group 的工作方式相同，当然还可以对 bp 代码或设置进行一些修改以以这种子域方式显示组链接

# html - 如何在使用不同的行高时创建一致的垂直间距？

> ID：14487786
> 
> 赞同：0
> 
> 时间：2013-01-23T19:29:46.940
> 
> 标签：html, css

我在我的 CSS 中使用了不同的行高，这导致我的垂直间距出现问题。我希望水平线上方的数量与下方相同。

这是我的问题的一个例子：

我的 HTML

```
<div class="intro">
<p>The powered flight took a total of about eight and a half minutes. It seemed to me it had gone by in a lash. We had gone from sitting still on the launch pad at the Kennedy Space Center to traveling at 17,500 miles an hour in that eight and a half minutes. It is still mind-boggling to me. </p>
</div>
<hr />
<div class="normal">
<p>I recall making some statement on the air-to-ground radio for the benefit of my fellow astronauts, who had also been in the program a long time, that it was well worth the wait.</p>
</div>
<hr />
<div class="normal">
<p>The powered flight took a total of about eight and a half minutes. It seemed to me it had gone by in a lash. We had gone from sitting still on the launch pad at the Kennedy Space Center to traveling at 17,500 miles an hour in that eight and a half minutes. It is still mind-boggling to me.</p>
</div> 
```

我的 CSS

```
.intro p { margin-bottom: 24px; font-size: 24px; line-height:36px; }
.normal p { margin-bottom: 18px; font-size: 16px; line-height:18px; }
hr { border-top: 1px solid rgb(200,200,200); margin: 10px 0} 
```

你也可以在这里看到它：http: [//codepen.io/dachan/pen/Csueb](http://codepen.io/dachan/pen/Csueb)

我的问题有什么解决方案，减去必须手动为 hr 标签创建不同的边距？

此外，我确实打算拥有多个段落，因此任何省略边距底部的解决方案都不适合我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:37:02.340

如果您知道您在文本流中的位置，只需在介绍和第一个文本单元之间使用不同的规则样式。以下将为您在第一个上方和下方提供相同的间距`<hr/>`

```
hr { border-top: 1px solid rgb(200,200,200); margin: 10px 0 28px 0 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:40:55.017

如果`line-height`将文本元素的 设置为等于 ，则`font-size`使元素的高度等于文本的高度。添加`hr`元素时，间距应该相同。

```
.intro p { font-size: 24px; line-height:24px; }

.normal p { font-size: 16px; line-height:16px; }

hr { border-top: 1px solid rgb(200,200,200); margin: 10px 0} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:41:49.090

我不认为你的问题是你的行高。您为每个段落定义了下边距，但没有上边距。因此，您的第二段上方有默认边距，使其更接近 hr。

一种可能的解决方案是简单地添加边距顶部等于您的边距底部。

```
.intro p { margin-bottom: 24px; font-size: 24px; line-height:36px; }
.normal p { margin-top: 18px; margin-bottom: 18px; font-size: 16px; line-height:18px; }
hr { border-top: 1px solid rgb(200,200,200); margin: 10px 0; } 
```

此处示例：http: [//jsfiddle.net/3BEkL/1/](http://jsfiddle.net/3BEkL/1/)

另一种可能性，可能不是您想要的，因为您似乎要根据每个段落的字体大小/行高在 hr 之间设置不同的间距，是从段落元素中删除所有边距样式并且仅适用hr 元素的边距。

```
.intro p { font-size: 24px; line-height:36px; }
.normal p { font-size: 16px; line-height:18px; }
hr { border-top: 1px solid rgb(200,200,200); margin: 30px 0; } 
```

这里的例子：http: [//jsfiddle.net/3BEkL/2/](http://jsfiddle.net/3BEkL/2/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T19:38:51.673

我不使用该`<hr>`标签，因为它很难正确地使用样式，尤其是在称为 IE 的出色浏览器中。

相反，我使用一个空的应用`div`了一个类`.hr`。我的 CSS 看起来像这样：

```
.hr {
  border-top: 1px solid black;
  margin-top: 10px;
  height: 10px;
} 
```

# c++ - cygwin 无法从 /cygdrive 找到我的编译器

> ID：14487787
> 
> 赞同：1
> 
> 时间：2013-01-23T19:29:48.850
> 
> 标签：c++, c, makefile, cygwin

我有一个makefile，它调用我的编译器`/cygdrive/c/path/to/compiler`

当我在 cygwin shell 中时，我可以正确调用它，但是从 makefile 内部，绝对路径返回`"The system cannot find the file specified"`.

我不明白为什么makefile不理解cygdrive的绝对路径

edit*
事实上，任何带有绝对路径的命令都会失败。

```
/usr/bin/touch 
```

也会回来`"The system cannot find the file specified"`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T00:33:55.463

在 Makefile 中使用可执行文件的绝对路径是不好的做法。你应该可以把它放在 Makefile

```
CC=gcc 
```

那么只要`gcc.exe`在你的身上`PATH`，它就会起作用。如果你碰巧在交叉编译，你可以从命令行运行它

```
make CC=i686-w64-mingw32-gcc 
```

[**参考**](http://github.com/svnpenn/a/blob/master/install/rtmpdump/rtmpdump-dist-static.sh)

# node.js - 如何在 nodejs 中模拟请求和响应以测试中间件/控制器？

> ID：14487809
> 
> 赞同：38
> 
> 时间：2013-01-23T19:31:00.567
> 
> 标签：node.js, testing, express, integration-testing, mocha.js

我的应用程序有几个层次：中间件、控制器、管理器。控制器接口与中间件一相同：(req, res, next)。

所以我的问题是：如何在不启动服务器并向本地主机发送“真实”请求的情况下测试我的控制器。我想做的是像nodejs一样创建请求、响应实例，然后调用控制器方法。

像这样的东西：

```
var req = new Request()
var res = new Response()
var next = function(err) {console.log('lala')}
controller.get_user(req, res, next) 
```

任何建议都将受到高度赞赏。谢谢！

PS我想这样做的原因是最后我想测试响应对象是否包含翡翠视图的正确变量。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2015-06-30T12:14:17.660

## [在node-mocks-http](https://www.npmjs.com/package/node-mocks-http)有一个半体面的实现

要求它：

```
var mocks = require('node-mocks-http'); 
```

然后你可以组合 req 和 response 对象：

```
req = mocks.createRequest();
res = mocks.createResponse(); 
```

然后，您可以直接测试您的控制器：

```
var demoController = require('demoController');
demoController.login(req, res);

assert.equal(res.json, {}) 
```

*警告*

在编写此实现时存在与未触发事件发射器有关的问题。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2013-01-23T21:58:04.033

由于 JavaScript 是一种动态类型语言，您可以创建模拟对象并将它们传递给您的控制器，如下所示：

```
var req = {};
var res = {};
var next = function(err) {console.log('lala')}
controller.get_user(req, res, next) 
```

如果您的控制器需要来自您的请求或响应对象的特定数据或功能，您需要在模拟中提供此类数据或功能。例如，

```
var req = {};
req.url = "http://google.com"; // fake the Url

var res = {};
res.write = function(chunk, encoding) { 
  // fake the write method 
};

var next = function(err) {console.log('lala')}
controller.get_user(req, res, next) 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-06-15T07:07:19.753

我会尝试为此使用[dupertest](https://www.npmjs.org/package/dupertest)。这是我创建的一个节点模块，目的是为了方便控制​​器测试，而无需启动新服务器。

它保留了类似`request`or之类的节点模块的熟悉语法`supertest`，但同样不需要启动服务器。

它运行起来很像上面提到的 Hector，但与 Jasmine 之类的测试框架集成在一起，感觉更加无缝。

与您的问题相关的示例可能如下所示：

```
request(controller.get_user)
  .params({id: user_id})
  .expect(user, done); 
```

或者更明确的速记版本：

```
request(controller.get_user)
  .params({id: user_id})
  .end(function(response) {
    expect(response).toEqual(user);
    done();
  }); 
```

注意：示例假设`user_id`并`user`在某处定义，并且控制器根据 id 抓取并返回用户。

编辑：阅读您对上述答案的回复，我承认目前的缺点是该模块默认情况下没有集成更强大的模拟请求或响应对象。`dupertest`使得扩展和添加属性变得超级容易`req`和`res`，但默认情况下它们非常裸露。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2013-02-05T09:15:14.603

如果要使用真实`req`和`res`对象，则必须向服务器发送真实请求。然而，这比你想象的要容易得多。[express github repo](https://github.com/visionmedia/express/tree/master/test)中有很多示例。下面显示了测试`req.route`

```
var express = require('../')
  , request = require('./support/http');

describe('req', function(){
  describe('.route', function(){
    it('should be the executed Route', function(done){
      var app = express();

      app.get('/user/:id/edit', function(req, res){

        // test your controllers with req,res here (like below)

        req.route.method.should.equal('get');
        req.route.path.should.equal('/user/:id/edit');
        res.end();
      });

      request(app)
      .get('/user/12/edit')
      .expect(200, done);
    })
  })
}) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2015-01-26T14:57:15.493

有点旧的帖子，但我想给我的 2 美分。您要采用的方法取决于您是在进行单元测试还是集成测试。如果您正在使用 supertest 的路线，这意味着您正在运行实际的实现代码，这意味着您正在进行集成测试。如果这就是你想要做的这种方法很好。

但是，如果您正在进行单元测试，您将模拟 req 和 res 对象（以及涉及的任何其他依赖项）。在下面的代码中（为简洁起见，删除了不相关的代码），我正在模拟 res 并仅提供 json 方法的模拟实现，因为这是我测试所需的唯一方法。

```
// SUT
kids.index = function (req, res) {
if (!req.user || !req.user._id) {
    res.json({
        err: "Invalid request."
    });
} else {
    // non-relevent code
}
};

// Unit test
var req, res, err, sentData;
describe('index', function () {

    beforeEach(function () {
        res = {
            json: function (resp) {
                err = resp.err;
                sentData = resp.kids;
            }
        };
    });
    it("should return error if no user passed in request", function () {
        req = {};

        kidsController.index(req, res);
        expect(err).to.equal("Invalid request.");

    });

    /// More tests....
}) 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-10-07T14:24:22.293

看看[node-tdd](https://www.npmjs.com/package/node-tdd)和`useNock`标志。它建立在 mocha 和 nock 之上，并为每个测试自动创建和使用记录文件。

我们喜欢它如此易于使用。基本上只是“启用并忘记”并专注于编写请求/测试用例。如果要求测试更改，仍然需要删除或调整录制文件，但至少它与代码完全分开。

# c# - 用一个例子来重载概念

> ID：14487813
> 
> 赞同：2
> 
> 时间：2013-01-23T19:31:09.967
> 
> 标签：c#

我如何在这个例子中使用重载方法。当我发送增量时，它应该给我新的值。如果我不给出增量，它应该添加一个默认值。这是在 c# asp.net 中。

例如：

```
 GetY(y,3)  // add 3 to y 

 or GetY(y) //add default value of 15 
```

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:32:52.847

您可以使用可选参数来指定默认值，然后不需要重载。

```
public int GetY(int y, int add = 15) {
    return y + add;
} 
```

这与以下重载版本相同：

```
public int GetY(int y) {
    return GetY(y, 15);
}

public int GetY(int y, int add) {
    return y + add;
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T19:33:08.683

```
public int GetY(int y, int increment)
{
    return y + increment;
}

public int GetY(int y)
{
    return GetY(y, 15);
} 
```

# jquery - 自动大写 Jeditable 输入

> ID：14487823
> 
> 赞同：0
> 
> 时间：2013-01-23T19:31:37.873
> 
> 标签：jquery, html, datatables, jeditable

我在我的数据表上使用 Jeditable，我希望能够自动大写表单上的文本输入条目。如果小写，每个字符都应自动转换为大写字母。

我有以下代码，但我不确定在哪里可以使用 .toUpperCase() 之类的函数。

任何帮助都会很棒:)谢谢

```
{ maxlength: <%=tbl.SAMPLE.sizeSAMPLE_TEXT%>,
          type: 'text',
        tooltip: '<%=rb.getString("message.tooltip")%>',
        onblur: 'submit',
        "callback": function( value, settings ) {},
        onsubmit: function(settings, original) {
          var input = $("input,select,textarea", this);
          var sNewCellValue = $("input,select,textarea", $(this)).val();
          return textcheck(input[0]);
          },      
        submitdata : function(value, settings) {
          var aPos = oTable.fnGetPosition( this );
          var aData = oTable.fnGetData( aPos[0] );
          return {id: aData[<%=editinplace.colSAMPLERefId%>], column: aPos[2], action: "U"};
         },
         cssclass: "required"
      }, 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:23:31.807

试一试。。

//向jQuery添加一个函数，这样我们就可以在我们的jQuery集合上调用它

```
$.fn.autocapital = function () { 
```

//遍历传入的每个元素，`$.each()`比`.each()快

```
 $.each(this, function () { 
```

//用空格分割这个输入的值

```
 var split = this.value.split(' '); 
```

//遍历每个“单词”并将它们大写

```
 for (var i = 0, len = split.length; i < len; i++) {
        split[i] = split[i].charAt(0).toUpperCase() + split[i].slice(1);
    } 
```

//重新加入字符串并设置元素的值

```
 this.value = split.join(' ');
});
return this;
}; 
```

# ruby-on-rails - Rails 命名路由和参数

> ID：14487826
> 
> 赞同：2
> 
> 时间：2013-01-23T19:31:48.297
> 
> 标签：ruby-on-rails, routes

我想向我的控制器发送一些数据，然后在变量中：

*   参数[:oem_number]
*   参数[:id]

并看到一些数据，但我怎样才能发送到方法数据？这条路线怎么写？现在我有这样的路线：

```
 match '/articles/by_oem/:id&:oem_number' => 'articles#articles_by_oem', :as => :articles_by_oem 
```

并尝试创建链接：

```
 = link_to "аналоги", :articles_by_oem(:id => no.article_nr, :oem_number => no.oem) 
```

但我收到 SyntaxError 错误...

那么如何解决我的问题呢？请不要把我送到rails doc的...

只是如何创建链接，这将发送这两个参数，以及在编辑路线之前......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:37:00.347

首先，您不需要路由上的参数列表。你可以把这个留在你的`routers.rb`：

```
/articles/by_oem/:id 
```

然后，你想在这里做什么？

```
:articles_by_oem(:id => no.article_nr, :oem_number => no.oem) 
```

`:articles_by_oem`是**符号**，不是函数。改用`articles_by_oem_path` *方法*：

```
= link_to "аналоги", articles_by_oem_path(:id => no.article_nr, :oem_number => no.oem) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:36:20.877

```
= link_to "name", articles_by_oem_path(no.article_nr, no.oem) 
```

# android - 启动意图后Android黑屏和崩溃

> ID：14487829
> 
> 赞同：1
> 
> 时间：2013-01-23T19:32:01.690
> 
> 标签：android, xml, crash, camera, screen

我尝试开发的应用程序有一点问题。这只是一个小相机应用程序。

这就是我想要做的：...拍照并保存。开始另一个活动，在图片视图中加载图片（因此我保存图片路径，因此我可以使用 BitmapFactory.decodeFile(picutrepath) 加载/创建 bmp）...

但这不起作用。屏幕变黑，甚至没有加载 xml。我总是收到一个 System.out 说“不是正常打开的 drm 文件”，但我不知道这是否与我尝试通过 BitmapFactory 加载图片有关。我使用 Log.i 查看我使用的路径是否有问题，但一切都很好。所以我决定尝试是否可以从我的 R.drawables 加载一个简单的 .png 图像，但这也不起作用。奇怪的是，在屏幕变黑后，应用程序只是退出/退出而没有错误。

希望有人可以帮助我，谢谢:)

这是代码：

我如何开始我的第二个活动：

```
.
.
.
takepictureButton = (ImageButton) findViewById(R.id.cameralayout_takepictureButton);
        takepictureButton.setOnClickListener(new ImageButton.OnClickListener() {
            @Override
            public void onClick(View arg0) {
                // TODO Auto-generated method stub
                camera.takePicture(shutterCallback, rawCallback, jpgCallback);
                try {
                    Thread.sleep(2000);
                } catch (InterruptedException e) {
                    // TODO Auto-generated catch block
                    e.printStackTrace();
                }
                Log.i("", "Starting INTENT");
                intentstart();

            }
        });
.
.
.
private void intentstart() {
        // TODO Auto-generated method stub
        Intent intent = new Intent(this, FacebarActivity.class);
        startActivity(intent);

    }
.
.
. 
```

我想开始的活动：

```
public class FacebarActivity extends Activity {

    private ImageView imageview;
    private ImageButton cButton, xButton;
    private Bitmap picture;

    public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.pictureview);

    ImageView imageview = (ImageView) findViewById(R.id.pictureviewLayout_pictureView);

    picture = BitmapFactory.decodeResource(getResources(),
            R.drawable.buttonplay);
    imageview.setImageBitmap(picture);

    cButton = (ImageButton) findViewById(R.id.pictureviewLayout_CButton);
    cButton.setOnClickListener(new ImageButton.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

        }
    });
    XButton = (ImageButton) findViewById(R.id.pictureviewLayout_XButton);
    XButton.setOnClickListener(new ImageButton.OnClickListener() {
        @Override
        public void onClick(View arg0) {
            // TODO Auto-generated method stub

        }
    });
    startthis();

} 
```

还有我用 setContentView() 加载的 pictureview.xml：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
xmlns:tools="http://schemas.android.com/tools"
android:layout_width="fill_parent"
android:layout_height="fill_parent"
android:orientation="vertical"
tools:context=".CameraActivity" >

<RelativeLayout
    android:id="@+id/pictureviewLayout_topbarlinearlayout"
    android:layout_width="fill_parent"
    android:layout_height="75dp"
    android:layout_alignParentTop="true"
    android:background="@drawable/topbar" >
</RelativeLayout>

<ImageView
    android:id="@+id/pictureviewLayout_pictureView"
    android:layout_width="fill_parent"
    android:layout_height="match_parent"
    android:layout_above="@+id/pictureviewLayout_bottombarlinearlayout"
    android:layout_below="@+id/pictureviewLayout_topbarlinearlayout" />

<RelativeLayout
    android:id="@+id/pictureviewLayout_bottombarlinearlayout"
    android:layout_width="fill_parent"
    android:layout_height="75dp"
    android:layout_alignParentBottom="true"
    android:background="@drawable/bottombar" >

    <ImageButton
        android:id="@+id/pictureviewLayout_CButton"
        android:layout_width="150dp"
        android:layout_height="wrap_content"
        android:layout_alignTop="@+id/pictureviewLayout_XButton"
        android:layout_centerHorizontal="true"
        android:background="@android:color/transparent"
        android:src="@android:drawable/ic_menu_camera" />

    <ImageButton
        android:id="@+id/pictureviewLayout_XButton"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_centerVertical="true"
        android:layout_marginRight="24dp"
        android:layout_toLeftOf="@+id/pictureviewLayout_CButton"
        android:background="@android:color/transparent"
        android:src="@android:drawable/ic_notification_clear_all" />
</RelativeLayout> 
```

和日志猫：

```
01-23 20:47:00.995: D/dalvikvm(7776): GC_FOR_ALLOC freed 69K, 6% free 12160K/12931K, paused 18ms, total 19ms
01-23 20:47:00.995: I/dalvikvm-heap(7776): Grow heap (frag case) to 12.841MB for 432016-byte allocation
01-23 20:47:01.020: D/dalvikvm(7776): GC_CONCURRENT freed <1K, 6% free 12581K/13383K, paused 12ms+1ms, total 25ms
01-23 20:47:01.055: D/dalvikvm(7776): GC_FOR_ALLOC freed 0K, 6% free 12581K/13383K, paused 18ms, total 18ms
01-23 20:47:01.055: I/dalvikvm-heap(7776): Grow heap (frag case) to 13.573MB for 768016-byte allocation
01-23 20:47:01.085: D/dalvikvm(7776): GC_CONCURRENT freed 0K, 6% free 13331K/14151K, paused 12ms+2ms, total 27ms
01-23 20:47:01.085: D/dalvikvm(7776): WAIT_FOR_CONCURRENT_GC blocked 11ms
01-23 20:47:01.105: D/dalvikvm(7776): GC_FOR_ALLOC freed 424K, 9% free 12913K/14151K, paused 14ms, total 14ms
01-23 20:47:01.120: D/dalvikvm(7776): GC_CONCURRENT freed <1K, 6% free 13335K/14151K, paused 2ms+1ms, total 18ms
01-23 20:47:01.120: D/dalvikvm(7776): WAIT_FOR_CONCURRENT_GC blocked 2ms
01-23 20:47:01.140: D/dalvikvm(7776): GC_FOR_ALLOC freed 0K, 6% free 13335K/14151K, paused 20ms, total 20ms
01-23 20:47:01.145: I/dalvikvm-heap(7776): Grow heap (frag case) to 14.309MB for 768016-byte allocation
01-23 20:47:01.160: D/dalvikvm(7776): GC_CONCURRENT freed 0K, 6% free 14085K/14919K, paused 3ms+1ms, total 19ms
01-23 20:47:01.330: D/libEGL(7776): loaded /system/lib/egl/libEGL_mali.so
01-23 20:47:01.355: D/libEGL(7776): loaded /system/lib/egl/libGLESv1_CM_mali.so
01-23 20:47:01.355: D/libEGL(7776): loaded /system/lib/egl/libGLESv2_mali.so
01-23 20:47:01.380: D/(7776): Device driver API match
01-23 20:47:01.380: D/(7776): Device driver API version: 10
01-23 20:47:01.380: D/(7776): User space API version: 10 
01-23 20:47:01.380: D/(7776): mali: REVISION=Linux-r2p4-02rel0 BUILD_DATE=Tue Oct 16 15:37:13 KST 2012 
01-23 20:47:01.440: D/OpenGLRenderer(7776): Enabling debug mode 0
01-23 20:47:02.040: I/Choreographer(7776): Skipped 46 frames!  The application may be doing too much work on its main thread.
01-23 20:47:09.230: I/APPLICATION(7776): STARTIng INTENT
01-23 20:47:09.235: I/Kurz bevor(7776): null
01-23 20:47:09.290: I/APPLICATION(7776): STARTED INTENT
01-23 20:47:09.290: I/Choreographer(7776): Skipped 308 frames!  The application may be doing too much work on its main thread.
01-23 20:47:09.605: D/dalvikvm(7776): GC_CONCURRENT freed 836K, 10% free 13905K/15367K, paused 1ms+2ms, total 12ms
01-23 20:47:09.605: D/dalvikvm(7776): WAIT_FOR_CONCURRENT_GC blocked 4ms 
```

# c++ - 如何在 C++ 上绘制复杂的用户控件？

> ID：14487830
> 
> 赞同：0
> 
> 时间：2013-01-23T19:32:05.347
> 
> 标签：c++, user-interface, cross-platform

Qt 和 GTK+ 等框架为开发人员提供了一些标准的用户控件，如编辑框、组合框等。但许多 GUI 应用程序具有更复杂的用户控件。例如，文本编辑器具有用户可以输入文本和插入图像或表格的区域。音频编辑器通常会显示音轨、音量指示器等的波形。我的问题是这些控件是如何绘制的？此外，这些控件通常可以处理事件——例如，可以选择文本编辑器中的表格，鼠标右键单击某些上下文菜单弹出等。所以，问题不仅在于绘制这些控件，还在于使控件处理事件。我只知道使用 Canvas 或 OpenGL，但我怀疑实现事件处理会很困难。可能，有更简单的方法来绘制用户界面？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:47:34.593

这是一个相当模糊的问题，所以这将是一个有点模糊的答案。一般来说，大部分工作已经完成。例如，Qt 已经有一个文本视图类、一个图像类和一个表格类（我对 Qt 不是很有经验，只是从我所知道的一般东西开始）。对于您正在谈论的文本编辑器，您可能会从 Qt 文本编辑小部件派生一个类，该小部件有一个处理程序来接受图像的拖动并可以绘制它们。同样，Qt 已经有了绘制图像和进行各种绘画的代码。

要绘制音频波形，您将拥有某种框或小部件（一般而言），它们将为每个采样间隔绘制一条垂直线以表示那里的音量或幅度。

是的，OpenGL 对于您在这里谈论的内容来说太过分了，因为您需要以某种方式编写自己的事件处理，而大多数 GUI 框架都会为您做到这一点。同样，对于一个模糊的问题，一个相当模糊的答案，但我希望它有所帮助！

# asp.net - Asp.net 按钮（没有任何反应）

> ID：14487838
> 
> 赞同：-2
> 
> 时间：2013-01-23T19:32:28.353
> 
> 标签：asp.net, class

我正在使用visual studio，我尝试添加按钮然后双击它，但没有任何反应（它不会进入后面的代码），而且它与最初的设计不同。

我的另一个问题：（后面的代码）

当我点击发送按钮时，我想在一个空白页面上显示我收集的所有数据。

```
<fieldset>

    <div class="legend"><h3>iletisim</h3></div>

    <div class="form_row">

        <div class="form_property form_required">Adiniz</div>
        <div class="form_value"> <asp:TextBox runat="server" id="txbadiniz"/>
           <asp:RequiredFieldValidator ID="RequiredFieldValidator1" runat="server" 
                ControlToValidate="txbadiniz" ErrorMessage="Bos birakilamaz">
                </asp:RequiredFieldValidator>
        </div>

        <div class="clearer">&nbsp;</div>

    </div>

    <div class="form_row">

        <div class="form_property">Email</div>
        <div class="form_value"> <asp:TextBox runat="server" id="txbemail"/>
            <asp:RequiredFieldValidator ID="RequiredFieldValidator2" runat="server" 
                ControlToValidate="txbemail" ErrorMessage="Bos birakilamaz" 
                ForeColor="Red"></asp:RequiredFieldValidator>
            </div>

        <div class="clearer">&nbsp;</div>

    </div>

    <div class="form_row">

        <div class="form_property">Telefon</div>
        <div class="form_value"> <asp:TextBox runat="server" id="txbtelefon"/>
            <asp:RequiredFieldValidator ID="RequiredFieldValidator3" runat="server" 
                ControlToValidate="txbtelefon" ErrorMessage="Bos birakilamaz" 
                ForeColor="Red"></asp:RequiredFieldValidator>
            </div>

        <div class="clearer">&nbsp;</div>

    </div>

    <div class="form_row">

        <div class="form_property form_required">Mesaj</div>
        <div class="form_value"><textarea rows="10" name="comment"></textarea></div>

        <div class="clearer">&nbsp;</div>

    </div>

    <div class="form_row form_row_submit">

        <div class="form_value">

        <asp:Button ID="Btngonder" runat="server" Text="Gonder" /></div>
        <div class="clearer"></div>

    </div>

</fieldset> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:38:15.327

确保调试器没有运行。有时，Visual Studio 不允许您在调试器处于活动状态时更改代码。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:35:05.760

您需要将事件处理程序附加到 Button 的 OnClick 事件。

```
<asp:Button ID="Btngonder" runat="server" Text="Gonder" OnClick="Btngonder_Click" /> 
```

在代码隐藏中，一个事件处理程序......

```
protected void Btngonder_Click(object sender, EventArgs e) 
{
    // do something useful here
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T19:35:43.650

在 ASPX 页面上，在 asp:Button 定义中，添加 OnClick=""，即，无论您想调用什么程序。然后在代码隐藏中定义

```
protected void MyProcedure(object sender, EventArgs e)
{
<put your code here>
} 
```

# java - 使用 Spring AOP 时 JSF 中的 NotSerializableException

> ID：14487843
> 
> 赞同：3
> 
> 时间：2013-01-23T19:32:35.310
> 
> 标签：java, serialization, jsf-2, deserialization, spring-aop

我目前在使用 JSF 2 和 Spring 3 AOP 的组合时遇到问题。

应用程序设计为经典的三层架构（Web、服务、数据库）。所以 Spring 管理的 JSF-Beans 调用代表业务逻辑的 Service Beans。

托管 Bean 如下所示：

```
@Named("startPage")
@Scope("view")
public class ManagedBean implements Serializable {

    @Inject
    private  ServiceBeanA serviceBeanA;

    public void someMethod() {
        serviceBean.doSomeBusinessLogic();
} 
```

由于此 Bean 是视图范围的，因此它实现了 Serializeable，并且实例变量（在本例中为 ServiceBeanA）也是如此，如下所述： [JSF backing bean should be serializable？](https://stackoverflow.com/questions/3372687/jsf-backing-bean-should-be-serializable)

到目前为止，一切都按预期工作。

现在我想拦截业务服务中声明的业务方法的调用。因此，我创建了一个执行一些基本日志记录的 Aspect，并在 spring 配置中将其删除：

```
<bean id="aspectLogging" class="my.package.AspectLogging" />

<aop:config>
    <aop:aspect ref="aspectLogging">
        <aop:pointcut id="serviceMethodInvocation" expression="execution(*  my.services.ServiceBeanA.doSomeBusinessLogic())" />
        <aop:around pointcut-ref="serviceMethodInvocation" method="performLogging" />
    </aop:aspect>
</aop:config> 
```

方面：

```
public class AspectLogging {

    public Object performLogging(ProceedingJoinPoint pjp) throws Throwable {

        Object toReturn = null;        
        System.out.println(">>>>"+ pjp.getSignature().toLongString());
        toReturn = pjp.proceed();
        return toReturn;
    }
} 
```

现在问题发生了：

```
SCHWERWIEGEND: Exiting serializeView - Could not serialize state:        org.springframework.aop.aspectj.AspectJPointcutAdvisor
java.io.NotSerializableException: org.springframework.aop.aspectj.AspectJPointcutAdvisor 
```

我在 Springsource 发现了两个相同的问题描述（不幸的是没有解决）

[http://forum.springsource.org/showthread.php?87428-AspectJPointcutAdvisor-not-Serializable](http://forum.springsource.org/showthread.php?87428-AspectJPointcutAdvisor-not-Serializable) [http://forum.springsource.org/archive/index.php/t-57602.html](http://forum.springsource.org/archive/index.php/t-57602.html)

当然，我可以简单地不使用 Aspect Orientation，但是任何其他第三方库都可能出现同样的问题。

我所做的是将持有业务服务的实例变量标记为瞬态。

```
public class ManagedBean implements Serializable {

    @Inject
    private  transient ServiceBeanA serviceBeanA;

    public void someMethod() {
     serviceBean.doSomeBusinessLogic();
    } 
```

这工作正常，直到会话恢复（反序列化）。当然反序列化后变量（serviceBeanA）为空。我可以将 Web 容器（例如 Tomcat）配置为不序列化会话，但该应用程序在云中运行，因此我不负责配置服务器。

我唯一的想法是通过提供

```
private synchronized void readObject(ObjectInputStream s) throws IOException,    ClassNotFoundException 
```

和

```
private synchronized void writeObject(ObjectOutputStream s) throws IOException 
```

托管 Bean 中的方法。

```
private synchronized void readObject(ObjectInputStream s) throws IOException,    ClassNotFoundException {
    s.defaultReadObject();
    ApplicationContext context = new ClassPathXmlApplicationContext("services.spring-config.xml", "database.spring-config.xml");
    this.ServiceBeanA = (ServiceBeanA) context.getBean("serviceBeanA");
}

private synchronized void writeObject(ObjectOutputStream s) throws IOException {
    s.defaultWriteObject();
} 
```

这个解决方案有效，但它似乎是一个非常笨拙和不雅的解决方案。我必须在每个使用服务 Bean 的托管 Bean 中重复几乎相同的代码。此外，托管 bean 以这种方式与 Spring 紧密耦合，因为它们导入 Springs 应用程序上下文以恢复服务变量。

有人能想到更好的架构方法吗？提前致谢！

# qt - 在运行模式下启用 Qt Creator 创建核心文件？

> ID：14487844
> 
> 赞同：4
> 
> 时间：2013-01-23T19:32:39.537
> 
> 标签：qt, qt-creator, coredump

我在 Qt 中运行一个 GUI 程序，每当我退出程序时，Qt Creator 终端中的错误消息是

> “程序意外完成。/.../../.. 以代码 0 退出”。

但是，当我通过 Linux 终端运行相同的可执行文件并退出程序时，我得到一个段错误（核心转储），因此得到一个核心文件。我想知道是否可以通过从 Qt Creator 运行程序来创建核心文件（不是在调试模式下，只是在构建和运行模式下）？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-31T23:54:08.757

创建核心文件取决于操作系统，而不是单个程序或某些 IDE。尝试运行

```
ulimit -c unlimited 
```

在运行 qtcreator 之前在 shell 上。然后你可以尝试启动你的程序。如果您需要更多详细信息，请查看**bash**的手册页。祝你好运！

# java - 比较两个在字典上等价但在字节级别不相同的字符串

> ID：14487845
> 
> 赞同：10
> 
> 时间：2013-01-23T19:32:42.563
> 
> 标签：java, string, utf-8

我正在寻找一种方法来比较两个在字典上等效但在字节级别不相同的 Java 字符串。

更准确地说，采用以下文件名“baaaé.png”，在字节级别它可以用两种不同的方式表示：

[98, 97, 97, 97, **-61, -87** , 46, 112, 110, 103] --> "é" 用 2 个字节编码

[98, 97, 97, 97, **101, -52, -127** , 46, 112, 110, 103] --> "é" 用 3 个字节编码

```
 byte[] ch = {98, 97, 97, 97, -61, -87, 46, 112, 110, 103};
    byte[] ff = {98, 97, 97, 97, 101, -52, -127, 46, 112, 110, 103};

    String st = new String(ch,"UTF-8");
    String st2 = new String(ff,"UTF-8");
    System.out.println(st);
    System.out.println(st2);
    System.out.println(st.equals(st2)); 
```

将生成以下输出：

```
baaaé.png
baaaé.png
false 
```

有没有办法进行比较，以便 equals 方法返回 true ？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T19:42:06.407

您可以使用具有适用强度的[Collat​​or](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/Collator.html)类来规范化不同的重音符号等内容。这将允许您成功地比较字符串。

在这种情况下，美国语言环境和 TERTIARY 强度足以使字符串相等

```
Collator usCollator = Collator.getInstance();
usCollator.setStrength(Collator.TERTIARY);
System.out.println(usCollator.equals(st, st2)); 
```

输出

```
true 
```

您还可以使用 Java 的[Normalizer](http://docs.oracle.com/javase/6/docs/api/java/text/Normalizer.html)类在不同形式的 Unicode 之间进行转换。这将转换您的字符串，但它们最终将是相同的，允许您使用标准字符串工具进行比较

最后，不妨看看[ICU](http://site.icu-project.org/)（Unicode 国际组件）项目，它提供了许多工具，可以以多种不同的方式处理 Unicode 字符串。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-01-23T19:44:33.663

您需要研究两种[Unicode 规范化形式：](http://unicode.org/reports/tr15/)

第一个是 NFC 与 NFD。您在问题中给出的示例是 NFC 和 NFD 之间差异的一个很好的示例。您的第一个字符串在 NFC 中，而第二个字符串在 NFD 中。

在 Unicode 中，许多重音字符可以用两种不同的方式表示：作为基本字符后跟一个组合重音字符，或者作为一个预先组合的重音字符。NFC 在可用时使用预先组合的字符。NFD 总是使用分解的形式。

通常我们不会混合使用 NFC 和 NFD。大多数环境都指定了首选形式。非常简单：MacOS X 文件名使用 NFD，几乎所有其他文件名都使用 NFC。但是，如果您得到的输入可能是“其他”规范化形式，您可以轻松地对其进行转换：该过程很简单（使用 Unicode 字符数据库提供的信息）且无损（即您可以在 NFC 之间来回切换）和 NFD，如果您希望不丢失信息）。

[java 提供了一个名为Normalizer](http://docs.oracle.com/javase/6/docs/api/java/text/Normalizer.html)的内置类，可以将字符串转换为给定的 Unicode 形式。

存在 2 种其他规范化形式：NFKC 和 NFKD。这些表格不用于一般用途，而仅用于字典比较。它们解释了这样一个事实，例如，在搜索或比较中 ¼ 应被视为与 1/4 相同。但它们并不意味着 ¼ 和 1/4 是相同的，或者通常应该将一个转换为另一个。

从 NFC 到 NFKC 以及从 NFD 到 NFKD 的转换再次简单明了（您需要字符数据库），但这次是有损的。您需要保留原始 NFC/NFD 文本并仅将 NFKC/NFKD 用作搜索/排序键。

# c# - EventStore 重复提交异常

> ID：14487851
> 
> 赞同：2
> 
> 时间：2013-01-23T19:33:11.610
> 
> 标签：c#, .net, cqrs

**更新：** 我们得到`System.Data.SqlClient.SqlException`. 消息是：

> 违反 PRIMARY KEY 约束“PK_Commits”。无法在对象“dbo.Commits”中插入重复键。\r\n语句已终止

似乎 EventStore 正在使用 streamid 和 commitid 作为唯一 ID。

我们使用事件存储来附加事件，如下所示。

```
public bool TryAppend(object[] content)
{
    if (content == null)
        throw new ArgumentNullException("content");

    try
    {
        using (var stream = m_storage.OpenStream(m_streamID, 0, int.MaxValue))
        {
            var versionInStore = stream.StreamRevision;

            content.ToList().ForEach(m =>
            {
                var version = ++versionInStore;
                var key = string.Format("{0}-{1:00000000}", m.GetType().Name, version);

                var savedMessage = new SavedRecord(key, version, m);

                stream.Add(new EventMessage { Body = savedMessage });
            });

            stream.CommitChanges(Guid.NewGuid());
        }

        return true;
    }
    catch (Exception e)
    {
        m_logger.LogError(e);

        return false;
    }
} 
```

EventStore 的配置如下。我们使用 Sql Serer 2008 作为持久性存储。

```
return Wireup.Init()
    .LogToOutputWindow()
        .UsingSqlPersistence(m_connectionName)
        .WithDialect(new MsSqlDialect())
        .EnlistInAmbientTransaction() // two-phase commit
    .InitializeStorageEngine()
    .UsingJsonSerialization()
        .Compress()
    .UsingSynchronousDispatchScheduler()
        .DispatchTo(new DelegateMessageDispatcher(DispatchCommit))
    .Build(); 
```

任何想法为什么会出现重复提交异常？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-08T09:17:29.920

有同样的问题；在我的情况下，这可能是因为不同的线程同时将不同的事件添加到具有相同 ID 的流中。已编写以下代码以便能够重试添加事件：

```
private void TryAddEvent(IStoreEvents storeEvents, IUserEvent anEvent, Guid streamId)
{
    var isCommitSuccessful = false;
    for (var i = 0; i < 10 && !isCommitSuccessful; i++)
    {
        try
        {
            using (var stream = storeEvents.OpenStream(streamId, 0, int.MaxValue))
            {
                stream.Add(new EventMessage {Body = anEvent});
                if (stream.UncommittedEvents.All(e => e.Body != anEvent))
                {
                    stream.Add(new EventMessage {Body = anEvent});
                }
                stream.CommitChanges(Guid.NewGuid());
            }
            isCommitSuccessful = true;
        }
        catch (Exception ex)
        {
            if (!(ex is SqlException) && !(ex is ConcurrencyException))
            {
                throw;
            }
            using (var stream = storeEvents.OpenStream(streamId, 0, int.MaxValue))
            {
                if (stream.CommittedEvents.Any(e => e.Body == anEvent))
                {
                    isCommitSuccessful = true;
                }
            }
        }
    }

    if (!isCommitSuccessful)
    {
        throw new ConcurrencyException(String.Format("Cannot add {0} to event store", anEvent.GetType()));
    }
} 
```

希望它会有所帮助。

# sql - 使用 sql 为 Crystal Reports 准备 LimeSurvey 输出

> ID：14487852
> 
> 赞同：0
> 
> 时间：2013-01-23T19:33:15.187
> 
> 标签：sql, crystal-reports, unpivot, limesurvey

我正在使用 Lime Survey 并最终希望将 Crystal Reports 用于我的最终输出，并且正在寻求有关干预步骤的帮助。我的每条回复记录有一行，有 100 多个问题，分为几个部分。输出看起来像一个交叉表，每个问题有一列，但我需要先对数据进行反透视，然后才能在 Crystal Reports 中使用它。

根据调查，可能有 4 个部分，也可能多达 15 个。那么，有没有办法根据部分的数量使用 sql 动态执行此操作？

举例说明——在 Excel 中，Lime Survey 的输出如下所示

```
 ID  Subject Relationship    1Section    1SQuestion1 1SQuestion2 2Section    2SQuestion1 2SQuestion2
1   John    Boss            1Section    2           4           2Section    3           4
2   John    Peer            1Section    4           3           2Section    2           5
3   Sally   Boss            1Section    3           3           2Section    4           5
4   Sally   Peer            1Section    5           6           2Section    1           3 
```

这就是我最终需要它的样子

```
ID 主题关系 1Section Col5 Col6
1 John Boss 1第 1S 题 1 2
1 John Boss 1第 1S 题 2 4
2 John Peer 1Section 1SQuestion1 4
2 John Peer 1Section 1SQuestion2 3
3 莎莉老板 1Section 1SQuestion1 3
3 Sally Boss 1 第 1S 题 2 3
4 Sally Peer 1Section 1SQuestion1 5
4 Sally Peer 1Section 1SQuestion2 6
1 John Boss 2 第 2S 题 1 3
1 John Boss 2 第 2S 题 2 4
2 John Peer 2第 2S 问题 1 2
2 John Peer 2第 2S 问题 2 5
3 Sally Boss 2第 2S 问题 1 4
3 Sally Boss 2 第 2S 问题 2 5
4 Sally Peer 2Section 2SQuestion1 1
4 Sally Peer 2Section 2SQuestion2 3

```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T14:38:39.247

如果要在 sql 中执行此数据转换，则可以使用`UNION ALL`查询：

```
select id, subject, relationship, `1Section`, '1sQuestion1' col5, `1sQuestion1` col6
from yourtable
union all
select id, subject, relationship, `1Section`, '1sQuestion2' col5, `1sQuestion2` col6
from yourtable
union all
select id, subject, relationship, `2Section`, '2sQuestion1' col5, `2sQuestion1` col6
from yourtable
union all
select id, subject, relationship, `2Section`, '2sQuestion2' col5, `2sQuestion2` col6
from yourtable 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!2/1385c/1)。这给出了结果：

```
| ID | SUBJECT | RELATIONSHIP | 1SECTION |        COL5 | COL6 |
---------------------------------------------------------------
|  1 |    John |         Boss | 1Section | 1sQuestion1 |    2 |
|  2 |    John |         Peer | 1Section | 1sQuestion1 |    4 |
|  3 |   Sally |         Boss | 1Section | 1sQuestion1 |    3 |
|  4 |   Sally |         Peer | 1Section | 1sQuestion1 |    5 |
|  1 |    John |         Boss | 1Section | 1sQuestion2 |    4 |
|  2 |    John |         Peer | 1Section | 1sQuestion2 |    3 |
|  3 |   Sally |         Boss | 1Section | 1sQuestion2 |    3 |
|  4 |   Sally |         Peer | 1Section | 1sQuestion2 |    6 |
|  1 |    John |         Boss | 2Section | 2sQuestion1 |    3 |
|  2 |    John |         Peer | 2Section | 2sQuestion1 |    2 |
|  3 |   Sally |         Boss | 2Section | 2sQuestion1 |    4 |
|  4 |   Sally |         Peer | 2Section | 2sQuestion1 |    1 |
|  1 |    John |         Boss | 2Section | 2sQuestion2 |    4 |
|  2 |    John |         Peer | 2Section | 2sQuestion2 |    5 |
|  3 |   Sally |         Boss | 2Section | 2sQuestion2 |    5 |
|  4 |   Sally |         Peer | 2Section | 2sQuestion2 |    3 | 
```

# c# - 检查一个字符串是否以另一个字符串或另一个字符串的一部分结尾

> ID：14487853
> 
> 赞同：0
> 
> 时间：2013-01-23T19:33:17.867
> 
> 标签：c#, string

我想知道是否有解决该主题中提到的问题的方法。

例子：

在我的项目中，我必须解析很多消息。这些消息包含格式字符，如`"\n"`或`"\r"`。这条消息的结尾总是用作者的名字签名。

现在我想从每条消息中删除签名。问题是消息的结尾可能看起来像

*   `\r\n\rDaniel Walters\n\r\n`
*   `\n\r\n\r\n\rDaniel`

或者是其他东西

问题是我不知道如何识别这些不同的结局。我试图`"\n\r\n"`通过调用`string.EndsWith()`循环仅删除最后一个，但此解决方案仅删除除`"\r\n\rDaniel Walter"`. 然后我尝试删除作者（我在此步骤之前对其进行了解析）但这也不起作用。有时解析的作者是“Daniel Walters”，签名只有“Daniel”。

任何想法如何解决这个问题？是否有比遍历字符串更简单、更智能的解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:48:31.370

您必须确定签名的“外观”。是否有始终适用的特定标准？

*   总是后跟至少 3 个换行符（\r 或 \n）
*   以大写字母开头
*   没有以下文字

像这样的正则表达式可能适用于这些标准：

```
/[\r\n]{3,}[A-Z][\w ]+[\r\n]*(?!\w)/ 
```

根据您的需要进行调整。

编辑添加：这应该匹配文档的最后一个“段落”。

```
/([\r\n]+[\w ]+[\r\n]*)(?!.)/ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:42:47.307

您可以创建一个正则表达式，用可选的姓氏以及前后任意数量的空白字符替换名称。

例子：

```
string message = "So long and thanks for all the fish  \t\t\r Arthur \t Dent  \r\r\n  ";
string firstName = "Arthur";
string lastName = "Dent";

string pattern = "\\s+" + Regex.Escape(firstName) + "(\\s+" + Regex.Escape(lastName) + ")?\\s*$";

message = Regex.Replace(message, pattern, String.Empty); 
```

（是的，我知道这真的是海豚说的。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T19:43:32.423

您可以尝试以下方法（未经测试）：-

```
string str="\r\n\rDaniel Walters\n\r\n";
while(str.EndsWith("\r") || str.EndsWith("\n"))
{
  // \r and \n have the same length. So, we can use either \r or \n in the end
  str=str.SubString(0,str.Length - ("\r".Length));
}
while(str.StartsWith("\r") || str.StartsWith("\n"))
{
  // \r and \n have the same length
  str=str.SubString("\r".Length,str.length);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-23T19:47:13.367

你也可以这样做，但我不确定你的模式是否会改变，但这会返回 Daniel Walter

```
string replaceStr = "\r\n\rDaniel Walters\n\r\n";
replaceStr = replaceStr.TrimStart(new char[] { '\r', '\n' });
replaceStr = replaceStr.TrimEnd(new char[] { '\r', '\n' }); 
```

或者如果您想使用修剪方法，您可以执行以下操作

```
string replaceStr = "\r\n\rDaniel Walters\n\r\n";
replaceStr = replaceStr.Trim(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-23T19:41:58.883

另一种方法可能是在换行符处拆分您的消息，删除空的换行符条目。然后重新组装预期的字符串，不包括我假设始​​终存在签名的最后一行。

```
string removeLastLine = "Text on the firstline\r\ntest on second line\rtexton third line\r\n\rDaniel Walters\n\r\n";
string[] lines = removeLastLine.Split(new char[] {'\r', '\n'},  StringSplitOptions.RemoveEmptyEntries);
lines = lines.Take(lines.Length - 1).ToArray();
string result = string.Join(Environment.NewLine, lines); 
```

# javascript - 复选框验证可重复

> ID：14487855
> 
> 赞同：-1
> 
> 时间：2013-01-23T19:33:18.303
> 
> 标签：javascript, jquery

我目前正在为我的表单进行验证，我在最后一部分，它的多个复选框，第一个验证但重复项没有。

非常感谢任何帮助。

而且我知道代码根本没有效率，但是我学到了很多东西，下次很可能会尝试..现在时间不在我这边..

对不起，我尽可能地缩短了代码并评论了问题所在的 BIG VALIDATION...

无论如何，[JSFIDDLE](http://jsfiddle.net/dawidvdh/W4uy9/)

然后是 Jquery：

```
 //Error Messages
var messages = {
    "main_name general": "no main name",
};
var g_counter = 1;
var dependant = ["dependant"];
var group;
var input_groups = ["group-1"];
var relation_input_groups = ["relation-group-1"];

var relation_fields=[0];
var relation_input ='<div class="errorblock6">'+
                    "<div class='box1'>"+
                    "<div class='group'>"+
                        "<label class='left'>Spouse</label>"+
                        "<input class='right relationship' type='checkbox' value='spouse' name='relationship' />" +
                    "</div>"+

                    "<div class='group no_b'>"+
                    "<label class='left'>parent</label>"+ 
                    "<input class='right relationship' type='checkbox' value='parent' name='relationship' />" +
                    "</div>"+
                    "</div>"+

                    "<div class='box2'>"+

                    "<div class='group'>"+
                    "<label class='left'>own child</label>"+ 
                    "<input class='right relationship' type='checkbox' value='ownchild' name='relationship' />" +
                    "</div>"+

                    "<div class='group no_b'>"+
                    "<label class='left'>inlaw</label>"+ 
                    "<input class='right relationship' type='checkbox' value='inlaw' name='relationship' />" +
                    "</div>"+
                    "</div>"+

                    "<div class='box3'>"+
                    "<div class='group'>"+
                    "<label class='left'>adopted</label>"+ 
                    "<input class='right relationship' type='checkbox' value='adopted' name='relationship' />" +
                    "</div>"+
                    "<div class='group no_b'>"+
                    "<label class='left'>brother</label>"+ 
                    "<input class='right relationship' type='checkbox' value='brother' name='relationship' />" +
                    "</div>"+
                    "</div>"+

                    "<div class='box4'>"+
                    "<div class='group'>"+
                    "<label class='left'>stepchild</label>"+ 
                    "<input class='right relationship' type='checkbox' value='stepchild' name='relationship' />" +
                    "</div>"+
                    "<div class='group no_b'>"+
                    "<label class='left'>other</label>"+ 
                    "<input class='right relationship' type='checkbox' value='other' name='relationship' />" +
                    "</div>"+
                    '</div>'+
                    "</div>";
//Dependants Inputs

jQuery(document).ready(function(e) {
    jQuery(relation_fields).each(function() {
        jQuery(relation_input).appendTo('#relation-group-1');
    });

    jQuery('#clone').click(function() {
        clone_dependant();
    });

    function clone_dependant() {
        var oldId = g_counter;
        g_counter++;
        currentdep ='dependant-'+g_counter;
        var $clonedDiv = jQuery('#dependant-1').clone(false).attr('id', currentdep);
        var relation_newDiv = 'relation-group-'+ g_counter;
        var id_newDiv = 'group-'+ g_counter;
        // Find div's inside the cloned object and set a new id's
        $clonedDiv.find('#relation-group-1').attr('id',"relation-group-" + g_counter );
        $clonedDiv.find('#dep_num').html(g_counter);
        // You don't need to Loop thru the inputs to set the value
        $clonedDiv.find('input:checkbox').removeAttr('checked');
        $clonedDiv.find('input').val('');

        // Insert the cloned object 
        $clonedDiv.insertAfter("#dependant-" + oldId);
        relation_input_groups.push(relation_newDiv);
        input_groups.push(id_newDiv);
    }

///////////////////////////////////////////
//VALIDATION
//////////////////////////////////////////
$('.errorblock6').after('<div class="error"></div>');
$('.error').hide();

$(document).on("click", 'input[type="checkbox"]', function() {
    $(this).parent().parent().siblings().find(":checked").removeAttr('checked');
    $(this).parent().siblings().find(":checked").removeAttr('checked');
});
////Validate RelationShip
$(document).on('change', 'input.relationship', function(e) {
    validate_Relat_Input(this);
});

function validate_Relat(relat_values, el){
    console.log(relat_values);
    if (relat_values.length > 0) {
        $(el).find('.error').slideUp('slow');
        return true;
    }else {
        $(el).find('.error').html('Please select relationship').slideDown('slow');
        return false;
    }
};

function validate_Relat_Input(el) {
    var $this = $(el);
    var input_groups = $this.parent().parent().parent();
    var isValid = true;
    $.each(input_groups , function(i){
        var inpg = input_groups[i];
        relat_values = $.map($(inpg).children().children().children('input:checked'), function(e,i){
            return $(e).val();
        }).join('');
        isValid = isValid &&
            validate_Relat(relat_values, input_groups.parent().parent().parent(), el);
    });
    return isValid;
}
////Validate RelationShip

///////////////////////////////////////////
//VALIDATION
/////////////////////////////////////////
var result = {};
var dependants;
var mainmember;
var dep_counter = 0;
function getValues(){
    result['dependants'] = [];
    jQuery('div[class*="dependant"]').each(function(k, v){
        dep_counter++
        dependants = {};
        dependants['relationship'] = $(v).find('.relationship:checked').val();
        result['dependants'].push(dependants);
    });

};

jQuery('#submit').click(function(){
var isValid = true;
    $('input.relationship').each(function(i, el) {
        isValid = isValid && validate_Relat_Input(el);
    });

if (isValid) {
    getValues();
    var jsonData = JSON.stringify(result);
    jQuery.ajax({
        type: "POST",
        url: "mail.php",
        dataType: "json",
        beforeSend: function() {
        },
        data: {parameters: jsonData}
    });
    } else {
        console.log('send fail');
    }
});

}); 
```

和 HTML：

```
<div id="app_wrap">
<!--Dependant-->
    <div class="dependant-1" id="dependant-1">
    <div class="title">dependant <span id="dep_num">1</span>:</div>
   <!--level 5-->
    <div class="block_wrap_relat left border_right no_b">
        <div class="block_relat">relationship:</div>
    </div>

   <div class="block_wrap_extend_relat right no_b">
        <div class="block_extend_relat"><div id="relation-group-1"></div></div>
  </div>
   <!--level 5-->
   </div>
   </div>  
<!--Dependant-->
   <button id="clone">Add a Dependant</button>
   <button id="submit">submit</button>
    </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T03:28:04.413

看到这个：http: [//jsfiddle.net/W4uy9/1/](http://jsfiddle.net/W4uy9/1/)

另请注意以下更改：

```
 //$clonedDiv.find('input').val('');    <---- Commented as this removes the values for checkboxes thereby making validations not work. 
```

此外，对复选框单击事件的改进：

```
$(document).on("click", 'input[type="checkbox"]', function() {
    $(this).parent().parent().parent().find(":checked").not(this).removeAttr('checked');
}); 
```

# python - 我无法在 eventlet greenthread 中捕获 BadeStatusLine

> ID：14487856
> 
> 赞同：0
> 
> 时间：2013-01-23T19:33:21.130
> 
> 标签：python, try-catch, urllib2, semaphore, httplib

我有一个长时间运行的进程，大约每三天崩溃一次，因为在 HTTP 连接期间，在建立连接之后但在接收到任何数据之前，httplib 会抛出 BadStatusLine。我已经尝试包装我的调用，但异常只是在堆栈跟踪中引起并无论如何都会停止该过程。

```
#supporting code included for clarity
from httplib import BadStatusLine, HTTPException
import eventlet
sem = eventlet.semaphore.Semaphore(SIMULTENEOUS)

#problem code, running in one of many qthreads downloading various pages.
try:
    sem.acquire()
    eventlet.sleep(HIT_DELAY)
    lphtml = urllib2.urlopen(list_page_url).read()
    sem.release()
except (urllib2.URLError, urllib2.HTTPError, HTTPException, BadStatusLine) as e:
    sem.release()
    pipe.log.error("Could not download product list page %s\n%s" % (str(e), list_page_url))
    continue 
```

我正在使用信号量，因为我不希望我的代码每秒访问站点超过一次，（但由于代码中的其他原因，我不想摆脱 eventlet。

最终，对 urllib2.urlopen 的调用将抛出 BadStatusLine，但不会被捕获，信号量也永远不会被释放。这是产生的堆栈跟踪。

```
Traceback (most recent call last):
  File "/usr/local/lib/python2.6/dist-packages/eventlet-0.9.16-py2.6.egg/eventlet/greenpool.py", line 80, in _spawn_n_impl
    func(*args, **kwargs)
  File "/home/myself/secret_filename.py", line 52, in poll_feed_hourly
    lphtml = urllib2.urlopen(list_page_url).read()
  File "/usr/lib/python2.6/urllib2.py", line 126, in urlopen
    return _opener.open(url, data, timeout)
  File "/usr/lib/python2.6/urllib2.py", line 391, in open
    response = self._open(req, data)
  File "/usr/lib/python2.6/urllib2.py", line 409, in _open
    '_open', req)
  File "/usr/lib/python2.6/urllib2.py", line 369, in _call_chain
    result = func(*args)
  File "/usr/lib/python2.6/urllib2.py", line 1170, in http_open
    return self.do_open(httplib.HTTPConnection, req)
  File "/usr/lib/python2.6/urllib2.py", line 1143, in do_open
    r = h.getresponse()
  File "/usr/lib/python2.6/httplib.py", line 990, in getresponse
    response.begin()
  File "/usr/lib/python2.6/httplib.py", line 391, in begin
    version, status, reason = self._read_status()
  File "/usr/lib/python2.6/httplib.py", line 355, in _read_status
    raise BadStatusLine(line)
BadStatusLine 
```

会不会是我对 qthreads 的奇怪使用导致 BadStatusLine 永远无法到达 catch 语句？有没有什么地方可以插入超时来导致最终到达 except 块？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:46:08.280

如果唯一的问题是释放信号量，为什么不使用`try/finally`语法？

```
try:
    sem.acquire()
    eventlet.sleep(HIT_DELAY)
    lphtml = urllib2.urlopen(list_page_url).read()
finally:
    sem.release() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-30T10:02:12.773

尝试使用

`from eventlet.green.httplib import HTTPException`

代替

`from httplib import BadStatusLine, HTTPException`

注意： httplib.BadStatusLine 是 httplib.HTTPException ( [http://docs.python.org/2/library/httplib.html#httplib.BadStatusLine](http://docs.python.org/2/library/httplib.html#httplib.BadStatusLine) ) 的子类，所以 BadStatusLine 也会被捕获。

# c# - 使用网页作为 C# 项目的输入

> ID：14487860
> 
> 赞同：2
> 
> 时间：2013-01-23T19:33:31.157
> 
> 标签：c#, html, web

如何在网页内容 (html) 中扫描（如 scanf（来自 C）和 Scanner 类（来自 Java））并将其用作我的程序的输入？

```
string[] line = new string[length];
for (int i = 0; i < line.Length; i++) {
  line[i] = Console.ReadLine();
  //Can I have ReadLine read from a website not the Console?
} 
```

例如，我想将一个包含我附近公共汽车时刻表的文本文件放在 Web 服务器上，然后访问它并使用它为我的应用程序生成输出。这样我就可以更新它并且始终可以访问这些更新。

PS 我是一个初级程序员，尤其是一个初级 C# 程序员，所以我很难找到我正在寻找的东西，因为我不知道要搜索什么。

感谢您的帮助：我能够开始寻找正确的东西，这很有效：

```
class MainClass
{
    public static void Main (string[] args)
    {
        // Create web client.
        WebClient client = new WebClient();

        // Download string.
        string value = client.DownloadString("http://www.example.com");

        // Write values.
        Console.WriteLine("--- WebClient result ---");
        Console.WriteLine(value.Length);
        Console.WriteLine(value);
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:37:48.427

您可以通过 URL 请求内容，然后使用 HTML Agility Pack 之类的工具将其加载到 HTML 文档中。请参阅此 SO 线程以获取建议[在 C# 中解析 html 的最佳方法是什么？](https://stackoverflow.com/questions/56107/what-is-the-best-way-to-parse-html-in-c)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:44:08.873

```
private void Test()
{
    string pageData = DownloadWebPage(new Uri("http://www.yourftp.com"));
    //parse data
}

private string DownloadWebPage(Uri path)
{
    string webPageData = null;

    using (WebClient client = new WebClient())
    {
        client.DownloadStringAsync(path);
        client.DownloadStringCompleted += (sender, args) => webPageData = args.Result;
    }

    return webPageData;
} 
```

上传后，您可以使用上述方法从您的网络服务器下载文本文件。只需将 URI 传递给该`DownloadWebPage`方法，它就会返回文本页面。如果您需要帮助解析文本文档以提供有意义的 C# 表示，您需要给出文本文件的示例并描述您希望如何解析它。

# html - 在 phonegap 应用程序中创建新的 html 页面

> ID：14487863
> 
> 赞同：0
> 
> 时间：2013-01-23T19:33:52.657
> 
> 标签：html, cordova, mobile

我正在尝试使用phonegap 开发一个应用程序。在这个应用程序中，我需要创建动态（使用 js）其他 .html 页面，以导航到。

这可能吗？我知道 phonegap 中有一个 FileWriter API，但它可以在应用程序的 www 文件夹中创建 .html 页面吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T09:20:21.490

您不能在运行时在 www 文件夹中创建页面。由于它是一个打包的应用程序，并且不知道 apk 的 www 文件夹。但是如果你想创建一个文件，使用文件写入 API，然后它就可以像普通的系统文件一样被访问。

```
window.location.href = 'file:\\myfilepath.html' 
```

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T20:30:50.393

应用程序的 www 文件夹不可写。您可以在文件系统上创建 html 文件并导航到它们。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-23T22:28:07.530

如果页面是您想要导航到的内容而不持久化，您可以使用 jQuery 动态创建元素并将它们插入到 DOM 中。

# jquery - jQuery Highcharts

> ID：14487868
> 
> 赞同：0
> 
> 时间：2013-01-23T19:34:22.440
> 
> 标签：jquery, jquery-plugins, plugins, charts, highcharts

所以我使用 jQuery 插件“Highcharts”制作了这个饼图，它返回给我的是输入它的总数的百分比。我还想做的是专门显示传递给插件的数字。这是否可能以及如何通过登录系统阻止我拥有的内容，但此链接指向我正在使用的确切演示：

[http://www.highcharts.com/demo/pie-legend](http://www.highcharts.com/demo/pie-legend)

如果您查看源代码，您将看到插件的以下内容：

```
$(function () {
    var chart;

    $(document).ready(function () {

        // Build the chart
        chart = new Highcharts.Chart({
            chart: {
                renderTo: 'container',
                plotBackgroundColor: null,
                plotBorderWidth: null,
                plotShadow: false
            },
            title: {
                text: 'Browser market shares at a specific website, 2010'
            },
            tooltip: {
                pointFormat: '{series.name}: <b>{point.percentage}%</b>',
                percentageDecimals: 1
            },
            plotOptions: {
                pie: {
                    allowPointSelect: true,
                    cursor: 'pointer',
                    dataLabels: {
                        enabled: false
                    },
                    showInLegend: true
                }
            },
            series: [{
                type: 'pie',
                name: 'Browser share',
                data: [
                    ['Firefox',   45.0],
                    ['IE',       26.8],
                    {
                        name: 'Chrome',
                        y: 12.8,
                        sliced: true,
                        selected: true
                    },
                    ['Safari',    8.5],
                    ['Opera',     6.2],
                    ['Others',   0.7]
                ]
            }]
        });
    });

}); 
```

Under "data" there is the series title and then the value. I specifically want to know what syntax to use to display the numbers like "Firefox"'s 45.0\. To display the title you use {series.name} so I am guessing its something like {series.number} but there isn't anywhere in the documentation that specifies this so I am not sure if its even possible. Any help would be appreciated!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:39:47.990

I actually found the answer but not through Highcharts documentation, if you're wondering in the formatter you can reference the value you pass to the plugin with this:

```
this.point.y 
```

Overall my code now looks something like this:

```
 plotOptions: {
            pie: {
                 allowPointSelect: true,
                 cursor: 'pointer',
                 dataLabels: {
                      enabled: true,
                      color: '#000000',
                      connectorColor: '#000000',
                      formatter: function() {
                           return '<b>'+ this.point.name +'</b>: $'+ this.point.y +' '         + Math.round(this.percentage*10)/10 +' %';
                      }
                 }
            }
       }, 
```

[Customize tooltip and format the number to 2 decimal places of highcharts](https://stackoverflow.com/questions/12628673/how-to-customize-the-tooltip-and-format-the-display-text-of-highcharts-graphs)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-25T07:29:00.940

There are two different ways to meet your needs. By using

1.  [**`pointFormat`**](http://api.highcharts.com/highcharts#tooltip.pointFormat)
2.  Formatting your Tool tip.

## Using **`pointFormat`**

Add the following snippet

```
 tooltip: {
            pointFormat: '{series.name}: <b>{point.y}</b>'                 
          } 
```

Find the demo [**here**](http://jsfiddle.net/gopinaghr/EZPAB/).

## Using **`Formatter`**

The code

```
tooltip: {
            formatter: function () {
                return '<b>' + this.point.name + '</b>: ' + this.point.y
            }
        } 
```

Find the demo [**here**](http://jsfiddle.net/gopinaghr/EZPAB/1/).

In your code,

```
tooltip: {
            pointFormat: '{series.name}: <b>{point.percentage}%</b>',
            percentageDecimals: 1
        }, 
```

replace,

```
 pointFormat: '{series.name}: <b>{point.percentage}%</b>' 
```

with

```
 pointFormat: '{series.name}: <b>{point.y}</b>', 
```

# iphone - 在xcode iphone中发出格式化字符串

> ID：14487873
> 
> 赞同：0
> 
> 时间：2013-01-23T19:34:27.890
> 
> 标签：iphone, xcode, string, format, viewdidload

我是 iphone 开发的新手（使用 xcode 的第二天），我无法为标签制作动态文本。我的字符串：

```
dealerspremiumLabel.text= [NSString stringWithFormat:@"%d%% (%@%d)", premiumPercentage, symbol, premiumCurrency]; 
```

返回为“0% ((null)88988)”而不是“0% ($00.00)”。我无法弄清楚为什么会发生这种情况，因为在 ViewDidLoad 我将变量设置为：

```
premiumPercentage=0;
premiumCurrency= 00.00;
symbol=@"$";
dealerspremiumLabel.text= [NSString stringWithFormat:@"%d%% (%@%d)", premiumPercentage, symbol, premiumCurrency]; 
```

我的标签出口设置正确，我的变量也设置正确。我还检查了我的日志，并且在上述代码之前正确设置了这些特定变量的值。非常感谢任何帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:38:09.800

使用这种方式，

货币是浮动的，您使用的是 %d 而不是 %f

```
dealerspremiumLabel.text= [NSString stringWithFormat:@"%d%% (%@%.2f)", premiumPercentage, symbol, premiumCurrency]; 
```

编辑：

正如你`symbol`所给予的那样`null`，你错过了 alloc+init。

或者您可以直接使用：

```
dealerspremiumLabel.text= [NSString stringWithFormat:@"%d%% ($%.2f)", premiumPercentage,  premiumCurrency]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T05:32:55.973

```
 NSInteger premiumPercentage=0;

  CGFloat premiumCurrency= 00.00;

  NSString *symbol1=@"$";

  symbol.text= [NSString stringWithFormat:@"%d%% (%@%f)", premiumPercentage,symbol1,premiumCurrency];

  NSLog(@"text=%@",symbol.text); 
```

我使用了这个，它在我的情况下工作得很好，它在 UILabel 中也显示了正确的值

# r - 使用 grepl() 基于字符串列表的子集？

> ID：14487877
> 
> 赞同：12
> 
> 时间：2013-01-23T19:34:36.097
> 
> 标签：r, parsing, grepl

我想做一些看似非常简单的事情。我想在 R 中使用 grepl() 命令（或类似命令）在几个不同的短语上对数据框进行子集化，而无需构建循环。

例如，我想为任何名为 Bob 或 Mary 的人提取所有行：

```
## example data frame:
tmp = structure(list(Name = structure(c(6L, 8L, 9L, 7L, 2L, 3L, 10L, 
1L, 5L, 4L), .Label = c("Alan", "Bob", "bob smith", "Frank", 
"John", "Mary Anne", "mary jane", "Mary Smith", "Potter, Mary", 
"smith, BOB"), class = "factor"), Age = c(31L, 23L, 23L, 55L, 
32L, 36L, 45L, 12L, 43L, 46L), Height = 1:10), .Names = c("Name", 
"Age", "Height"), class = "data.frame", row.names = c(NA, -10L
))

tmp

#           Name Age Height
#1     Mary Anne  31      1
#2    Mary Smith  23      2
#3  Potter, Mary  23      3
#4     mary jane  55      4
#5           Bob  32      5
#6     bob smith  36      6
#7    smith, BOB  45      7
#8          Alan  12      8
#9          John  43      9
#10        Frank  46     10

## this doesn't work
mynames=c('bob','mary')
tmp[grepl(mynames,tmp$Name,ignore.case=T),] 
```

任何想法都会有所帮助！

* * *

## 回答 #1

> 赞同：28
> 
> 时间：2013-01-23T19:47:12.440

您可以将`mynames`向量与正则表达式运算符结合`|`使用，然后使用`grep`.

```
tmp[grep(paste(mynames, collapse='|'), tmp$Name, ignore.case=TRUE),]

#           Name Age Height
# 1    Mary Anne  31      1
# 2   Mary Smith  23      2
# 3 Potter, Mary  23      3
# 4    mary jane  55      4
# 5          Bob  32      5
# 6    bob smith  36      6
# 7   smith, BOB  45      7 
```

# ios - iOS）在 UITableView 的单元格中隐藏键盘

> ID：14487878
> 
> 赞同：0
> 
> 时间：2013-01-23T19:34:41.520
> 
> 标签：ios, uitableview, uitextfield, first-responder

```
-(void)tableView:(UITableView *)tableView didDeselectRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"searchCell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    searchField = (UITextField *)[cell viewWithTag:10000];

    [searchField resignFirstResponder];
} 
```

好的，我有一个标识符名称为“searchCell”的单元格。此单元格包含一个标签为 10000 的 UITextField，它会在屏幕底部弹出一个键盘。当用户触摸另一个单元格时，必须隐藏键盘，以便用户可以有更大的空间上下滚动。

但是，当键盘弹出并且用户触摸（选择）一个单元格时，上面的代码被调用但不起作用...... :(看起来分配的 UITableViewCell 不是用户当前使用的那个。什么是我在这里做错了吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:52:15.427

1.  让你的班级成为 UITextField 的代表
2.  转到 Storyboard 文件，单击文本字段并转到连接检查器
3.  在 outlets 下，将 delegate 连接到 View Controller
4.  在模拟器中运行它。它会工作

# java - Windows Azure：删除代理消息时出错

> ID：14487888
> 
> 赞同：3
> 
> 时间：2013-01-23T19:35:31.647
> 
> 标签：java, azure, azureservicebus, azure-servicebus-queues

我正在开发一个从 Azure 服务总线队列中提取消息的 Java 应用程序。我正在使用 Java Azure API (com.microsoft.windowsazure.services)。我遇到的问题是代理消息在处理后删除有时会失败。

我的应用程序使用 ServiceBusContract 对象上的 receiveQueueMessage() 方法，使用 peek-lock 接收模式从队列中提取消息。成功处理消息后，我通过调用 deleteMessage() 方法从队列中删除消息（我相信此方法对应于 .NET API 中的 Complete() 方法）。

但是，有时此方法调用会失败。deleteMessage() 将 com.sun.jersey.api.client.UniformInterfaceException 异常记录到控制台，**但**它不会抛出此异常（我将在下面生成输出）。该异常似乎表明找不到该消息。发生这种情况时，消息将保留在队列中。实际上，下一次调用 receiveQueueMessage() 会再次检索此消息。然后删除失败一次或两次，然后成功。此后检索到的消息成功删除。

下面是出现问题的代码：

```
ReceiveMessageOptions receiveOptions = ReceiveMessageOptions.DEFAULT; 
receiveOptions.setReceiveMode(ReceiveMode.PEEK_LOCK); 
BrokeredMessage message = serviceBus.receiveQueueMessage("my_queue",receiveOptions).getValue(); 
// Process the message 
System.out.println("Delete message with ID: "+message.getMessageId());
serviceBus.deleteMessage(message); 
```

以下是出现问题时的输出示例：

```
Delete message with ID: 100790000086491
2013/01/22 12:58:29 com.microsoft.windowsazure.services.serviceBus.implementation.ServiceBusExceptionProcessor processCatch
WARNING: com.sun.jersey.api.client.UniformInterfaceException: DELETE https://voyagernetzmessaging.servicebus.windows.net/sms_queue/messages/24/efa56a1c-95e8-4cd6-931a-972eac21563a returned a response status of 404 Not Found
com.sun.jersey.api.client.UniformInterfaceException: DELETE https://voyagernetzmessaging.servicebus.windows.net/sms_queue/messages/24/efa56a1c-95e8-4cd6-931a-972eac21563a returned a response status of 404 Not Found
    at com.sun.jersey.api.client.WebResource.voidHandle(WebResource.java:697)
    at com.sun.jersey.api.client.WebResource.delete(WebResource.java:261)
    at com.microsoft.windowsazure.services.serviceBus.implementation.ServiceBusRestProxy.deleteMessage(ServiceBusRestProxy.java:260)
    at com.microsoft.windowsazure.services.serviceBus.implementation.ServiceBusExceptionProcessor.deleteMessage(ServiceBusExceptionProcessor.java:176)
    at microworks.voyagernetzmessaging.smsservice.SmsSender$Runner.finalizeSms(SmsSender.java:114)
    at microworks.voyagernetzmessaging.smsservice.SmsSender$Runner.finalizeSms(SmsSender.java:119)
    at microworks.voyagernetzmessaging.smsservice.SmsSender$Runner.run(SmsSender.java:340)
com.microsoft.windowsazure.services.core.ServiceException: com.sun.jersey.api.client.UniformInterfaceException: DELETE https://voyagernetzmessaging.servicebus.windows.net/sms_queue/messages/24/efa56a1c-95e8-4cd6-931a-972eac21563a returned a response status of 404 Not Found
Response Body: <Error><Code>404</Code><Detail>The lock supplied is invalid. Either the lock expired, or the message has already been removed from the queue..TrackingId:4b112c5a-5919-4680-b6bb-e10a2c081ba3_G15_B9,TimeStamp:1/22/2013 10:58:30 AM</Detail></Error>
    at com.microsoft.windowsazure.services.serviceBus.implementation.ServiceBusExceptionProcessor.deleteMessage(ServiceBusExceptionProcessor.java:179)
    at microworks.voyagernetzmessaging.smsservice.SmsSender$Runner.finalizeSms(SmsSender.java:114)
    at microworks.voyagernetzmessaging.smsservice.SmsSender$Runner.finalizeSms(SmsSender.java:119)
    at microworks.voyagernetzmessaging.smsservice.SmsSender$Runner.run(SmsSender.java:340)
Caused by: com.sun.jersey.api.client.UniformInterfaceException: DELETE https://voyagernetzmessaging.servicebus.windows.net/sms_queue/messages/24/efa56a1c-95e8-4cd6-931a-972eac21563a returned a response status of 404 Not Found
    at com.sun.jersey.api.client.WebResource.voidHandle(WebResource.java:697)
    at com.sun.jersey.api.client.WebResource.delete(WebResource.java:261)
    at com.microsoft.windowsazure.services.serviceBus.implementation.ServiceBusRestProxy.deleteMessage(ServiceBusRestProxy.java:260)
    at com.microsoft.windowsazure.services.serviceBus.implementation.ServiceBusExceptionProcessor.deleteMessage(ServiceBusExceptionProcessor.java:176)
    ... 3 more 
```

请注意，异常中的 URI 似乎引用了不同的消息 ID（efa56a1c-95e8-4cd6-931a-972eac21563a，而消息的 ID 实际上是 100790000086491）。我不知道这是否是失败的关键，但我有一种预感。

另一个有趣的观察：看起来错误总是发生在应用程序启动后从队列中检索到的第一条消息中，或者在队列为空之后。此后收到的所有消息似乎都不会导致此类问题。

该队列的锁定持续时间为 2 分钟，并且消息的处理在该持续时间内完成，因此过期的锁定不是原因。

有任何想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-24T09:50:11.253

我建议您调用 BrokeredMessage 类的 Complete()。因此，在您的情况下，请尝试致电：

消息。完成（）；

当服务总线看到 Complete() 时，它认为该消息已被消费并将其从队列中删除。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-07T23:36:50.813

出现在 URL 中的 UUID 是服务器用来跟踪哪个消息被锁定的随机令牌；它不应该与消息 ID 相同。您可以使用 访问锁定 URL `message.getLockLocation()`。

您拥有的代码看起来是正确的，我看不出它会失败的任何明显原因，尤其是在您描述的内容中。需要检查的一些事项：

1.  检查您收到的消息是否有效。如果你 peek-lock 一个空队列，它将返回一个空消息。那么锁定位置应该是`null`。（但这不会导致您看到的失败。）
2.  `lock supplied is invalid`如果您尝试多次删除同一条消息，您可能会收到错误消息。如果您的代码注意到服务何时返回空消息并替换之前的消息，则可能会发生这种情况。（但这并不能解释为什么尝试删除该消息最终会奏效，除非它是被删除的另一条消息。）

希望这会有所帮助！

# gdal - libxml2 未满足的依赖项

> ID：14487894
> 
> 赞同：1
> 
> 时间：2013-01-23T19:35:51.267
> 
> 标签：gdal, lidar

尝试安装 libgdal-dev。目的是与 liblas 一起使用。这是我的尝试。

1.  sudo apt-get install libgdal-dev ----> libgdal-dev : Depends: libdap-dev 但它不会被安装

2.  sudo apt-get install libdap-dev -----> libdap-dev ：取决于：libxml2-dev 但它不会被安装

3.  sudo apt-get install libxml2-dev ----> libxml2-dev ：取决于：libxml2 (= 2.8.0+dfsg1-5ubuntu2.1) 但要安装 2.8.0+dfsg1-5ubuntu2.2~precise1

在突触中找不到与解决方案相关的任何内容。似乎我可能需要 sudo udpate && sudo upgrade，这并没有改变任何东西。

我该怎么办？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-28T06:11:41.123

从 Ubuntu 精确（12.04）升级到量子（12.10）后，我遇到了这个问题。我相信在升级 libxml2 的过程中出了点问题，并且旧版本仍然存在。

解决它的方法是从[Quantal 的 lauchpad 存储库](https://launchpad.net/ubuntu/quantal/+source/libxml2/2.8.0+dfsg1-5ubuntu2.1)下载更新的 libxml2 版本并手动安装。为您的系统选择一个构建，并使用以下命令安装：

```
sudo dpkg -i libxml2_2.8.0+dfsg1-5ubuntu2.1_amd64.deb 
```

我无法使用 apt-get/aptitude 解决它，因为他们似乎将精确版本检测为最新版本。

# php - 从 PHP 中的多个并发时间戳确定时间块

> ID：14487899
> 
> 赞同：0
> 
> 时间：2013-01-23T19:36:09.693
> 
> 标签：php, sql-server

我们有一个时间跟踪系统，我们为正在处理的每个项目启动一个计时器，然后在完成时停止。很多时候，我们有多个计时器在同一个时间段内运行。例如：

给定三个计时器：

```
开始时间 | 结束时间 | 所花费的时间
2012 年 10 月 23 日上午 10:15:00 | 2012 年 10 月 23 日上午 10:45:00 | 30
2012 年 10 月 23 日上午 10:15:00 | 2012 年 10 月 23 日上午 11:15:00 | 60
2012 年 10 月 23 日上午 11:05:00 | 2012 年 10 月 23 日上午 11:35:00 | 30
```

两者同时运行，如果与我们的时间报告一起使用，将计入 2 小时，即使当有效时间为 1 小时 20 分钟时，这些时间在彼此之内。

所以我试图弄清楚如何通过时间条目并只计算有效时间段。

任何想法如何在 PHP 中计算这个？

# javascript - javascript 到 jquery 转换的代码，该代码适用于带有单选按钮的文本字段的动态外观和消失

> ID：14487902
> 
> 赞同：0
> 
> 时间：2013-01-23T19:36:20.737
> 
> 标签：javascript, jquery

伙计们，我为这段代码尝试了很多，但是从 javascript 到 jquery 的转换没有任何结果。

此代码无关紧要，因为您在工作小提琴中找到了它。我添加了这段代码，因为stackoverflow不允许我在没有代码的情况下发布..

```
<div class="rButtons">
<input type="radio" name="numbers" value="10" onclick="uncheck();" />10
<input type="radio" name="numbers" value="20"  onclick="uncheck();" />20
<input type="radio" name="numbers" value="other" onclick="check(this);"/>other
<input type="text" id="other_field" name="other_field" onblur="checktext(this);"/>
</div> 
```

检查这个小提琴

[http://jsfiddle.net/gDxqj/](http://jsfiddle.net/gDxqj/)

它运作良好。单击“其他”单选按钮时，文本字段出现，单击任何其他单选按钮时，它会消失。这是该脚本的功能，并且运行良好。

现在，当我尝试将其更改为 jquery 代码时，它死了.. 我可以显示我在 jquery 中制作的代码，但没有帮助..

小提琴同样会有很大帮助..

提前致谢..

这就是我所做的

```
<script>
var $radios = $('input:radio[name=numbers]');
    if ($radios.is(':checked') === true) {
       $("#other_field").show();
    }     
    else
    {
       $("#other_field").hide();
    }   
</script> 
```

我把它放在一个函数中并在单选按钮的“onchange”中调用它但没有用

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:47:33.153

```
$(':radio').on('change', function () {
  $('#other_field')[$(this).val() === 'other' ? 'show' : 'hide']();
});

$('#other_field').on('blur', function () {
  var val = $(this).val();

  if(isNaN(val)) {
    alert('only numbers are allowed..');
  }
  else if(parseInt(val, 10) % 10 > 0) {
    alert('only multiples of 10..');
  }
}); 
```

和：

```
<div class="rButtons">
  <input type="radio" name="numbers" value="10" /> 10
  <input type="radio" name="numbers" value="20" /> 20
  <input type="radio" name="numbers" value="other" />other
  <input type="text" id="other_field" name="other_field" />
</div> 
```

演示：http: [//jsfiddle.net/BZGsw/](http://jsfiddle.net/BZGsw/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:45:38.760

您只需要从您的 s 中删除`onclick`and并通过 jQuery 附加事件：`onblur``input`

```
$(function(){
    $('.rButtons').on('click', 'input[type="radio"]', function(ev){
        var val = $(this).val();
        val == 'other' ? check(this) : uncheck();
    });
    $('.rButtons').on('blur', '#other_field', function(ev){
        checktext(this);
    });
}); 
```

## [看演示](http://jsfiddle.net/gDxqj/1/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T19:48:29.927

您可以使用`.change()`bin`change`事件来检查所选单选按钮的状态，然后应用`.toggle()`以`#other_field`显示或隐藏它。

```
#other_field {
    display: none;
} 
```

```
<div class="rButtons">
    <input type="radio" name="numbers" value="10">10
    <input type="radio" name="numbers" value="20">20
    <input type="radio" name="numbers" value="other">other
    <input type="text" id="other_field" name="other_field">
</div> 
```

```
$("[name=numbers]").change(function() {
    $("#other_field").toggle(this.value === "other");
}); 
```

```
$("#other_field").change(checktext); 
```

我修改了您的 CSS 以使用`display`set to`none`而不是`visibility`.

[看这里。](http://jsfiddle.net/sPPpL/)

# asp.net-mvc - Asp Net MVC 查看性能和代码逻辑

> ID：14487905
> 
> 赞同：1
> 
> 时间：2013-01-23T19:36:38.237
> 
> 标签：asp.net-mvc

我有一个视图，它在我的应用程序中显示产品和相应的类别详细信息。它继承自视图模型，以获取我需要显示的产品和类别信息。

```
public ViewResult Index(string id, int page = 1, int pagesize = 10)
    {
        var viewModel = new PagedProductList()
        {
            CurrentPageIndex = page,
            PageSize = pagesize
        };

        viewModel.category = db.Category.First(c => c.Id == id);

        viewModel.products = db.Product
            .Where(i => i.Category.Id == viewModel.category.Id)
            .OrderBy(i => i.Id)
            .Skip((viewModel.CurrentPageIndex - 1) * viewModel.PageSize)
            .Take(viewModel.PageSize)
            .Include(p => p.ProductAttributeValues);

        return View(viewModel);
    } 
```

如您所见，我将 viewmodel 的类别 ID 传递给 viewmodel 的 products *where* 子句。

**问题 1：**如果我将产品代码移动到单独的子操作中，然后使用 Html.Action 从父视图传递类别模型 ID 从父视图调用该操作，这在性能或其他方面会更好吗？

**问题 2：**有没有其他更好的方法来获取类别信息和相应的产品。我不能使用 db.Category.Include(“Products”) 之类的东西，因为我无法对产品进行分页。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T20:15:40.087

问题 1：不，它会更慢。调用动作（即查找和设置控制器）会产生开销。最终结果仍然是发出两个查询。

问题 2：您可以使用投影在单个查询中获得您想要的（通过排序和分页导航类别的产品）：

```
var data = db.Category
             .Select(c => new 
             {  
                c, 
                Products = c.Products
                            .OrderBy(p => p.Id)
                            .Skip((viewModel.CurrentPageIndex - 1) * viewModel.PageSize)
                            .Take(viewModel.PageSize)
                            .Select(p => new { p, p.ProductAttributeValues })
            })
            .Single(c => c.Id == viewModel.category.Id);
viewModel.category = data.c;
viewModel.products = data.c.Products.Select(p => p.p).ToList(); 
```

这可能会比进行两个单独的查询稍微好一些，但您不太可能会注意到差异。

但是，您必须权衡性能稍好与此代码可读性降低的好处。如果您没有实际的性能问题（我猜您没有），那么您就是在浪费时间优化性能。**在优化之前，您应该始终等到出现实际可测量的性能问题，除非使用更复杂的代码有显着的性能优势，否则您应该始终支持可读性。**

注意：对更复杂的查询使用类似的模式实际上可能比发出两个或更多查询来获取您需要的数据要慢。

# oledb - 仅在一个站点上收到错误“'Microsoft.ACE.OLEDB.12.0'提供程序未在本地计算机上注册”

> ID：14487910
> 
> 赞同：0
> 
> 时间：2013-01-23T19:36:46.393
> 
> 标签：oledb

我在这里和其他地方看到了很多关于这个错误的帖子。在每种情况下，解决方案都是卸载任何 32 位办公组件，或者将尝试访问驱动程序的 .NET 项目的目标平台更改为 x86 而不是任何 CPU。这些解决方案都不适合我。

这是详细信息。我在运行 Windows Server 2008 的同一台服务器上有两个 ASP.NET 站点。一个是生产站点，另一个是临时站点。我正在尝试通过 OLEDB 生成 Excel 文件。生产站点生成文件没有问题。登台站点抛出此错误。除了主机标头和它们连接的 SQL Server 数据库外，这两个站点都是相同的。两者的目标框架都是 4.5，应用程序池设置为使用 4.0。

有其他人来过这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-24T17:04:36.263

原来是IIS7配置问题。每个站点都有自己的应用程序池。在高级设置对话框的（常规）下，有一个名为启用 32 位应用程序的属性。此属性在舞台站点上设置为 True。将其更改为 False 解决了该问题。

# winapi - 请求刷新 LVN_GETEMPTYMARKUP

> ID：14487911
> 
> 赞同：4
> 
> 时间：2013-01-23T19:36:48.267
> 
> 标签：winapi, visual-c++, listview

我正在使用`LVN_GETEMPTYMARKUP`在我的 ListCtrl 中显示一些文本，直到它获得一些内容。我面临的问题是我似乎无法找到刷新此文本并有效地强制 ListCtrl 多次发送此通知的方法。

有没有办法告诉 ListCtrl 刷新“标记”？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2016-07-21T07:14:31.680

好吧，这是一个相当古老的线程，但是我遇到了这个问题，并将为像我一样来到同一个地方的任何人提供答案。

可以通过向列表视图发送 LVM_RESETEMPTYTEXT = (LVM_FIRST + 84) 消息或通过获取 IListView 接口并执行 ResetEmptyText 方法来向列表视图重新发送 LVN_GETEMPTYMARKUP 消息。通过这种方式，您可以有条件地更改或清除空文本:)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-01-27T17:28:33.970

我查看了源代码，似乎 listview 控件只发送了`LVN_GETEMPTYMARKUP`一次查询并缓存了结果。

因此，我相信获得您正在寻找的行为的唯一方法是根据需要重新创建控件。

# objective-c - CFSetGetCount 崩溃 (EXC_BAD_ACCESS)

> ID：14487912
> 
> 赞同：2
> 
> 时间：2013-01-23T19:36:56.073
> 
> 标签：objective-c, macos, cocoa, usb, hid

我正在编写一个与 USB HID 设备接口的 Mac 应用程序。首先，我试图打印出找到了多少与我的设备规格相匹配的设备。

```
//Create a HID Manager
IOHIDManagerRef hidManager = IOHIDManagerCreate(kCFAllocatorDefault, kIOHIDOptionsTypeNone);

//Create a dictionary and limit it to the uPPT
CFMutableDictionaryRef dict = CFDictionaryCreateMutable (kCFAllocatorDefault, 1, &kCFTypeDictionaryKeyCallBacks,
                                                         &kCFTypeDictionaryValueCallBacks);
CFDictionarySetValue(dict, CFSTR("VendorID"), CFSTR("0x04D8"));
CFDictionarySetValue(dict, CFSTR("ProductID"), CFSTR("0x0054"));
IOHIDManagerSetDeviceMatching(hidManager, dict);

CFSetRef devSet = IOHIDManagerCopyDevices (hidManager);
CFIndex numDevices = CFSetGetCount(devSet);
NSLog(@"%ld uPPTs found", numDevices); 
```

不幸的是，这在 CFSetGetCount(devSet) 处崩溃。据我所知，我使用正确，但应用程序挂起，我看到“线程 1：EXC_BAD_ACCESS（代码=1，地址=0x0）”。有任何想法吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:45:36.313

`devSet`是`NULL`（正如您的崩溃所证明的那样。）在获取或创建 Core Foundation 时，`Address=0x0`您必须*始终*进行测试，因为 Apple 的 API 不会这样做，并且如果通过了通常会崩溃。`NULL``CFTypeRef``NULL`

同样，这不是导致崩溃的原因，但您必须确保释放 (with `CFRelease()`)`CFTypeRef`您创建、复制或保留的 s，因为 ARC 不会为您执行此操作。如前所述，您必须`NULL`在调用之前进行检查，`CFRelease()`否则会发生崩溃。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-02-13T16:27:11.373

EXC_BAD_ACCESS 的原因是您尚未在 App Sandbox 中定义 USB 硬件访问权限。您可以通过在您的：目标设置 -> 选项卡：功能中激活 USB - 硬件的复选框来做到这一点。

[![激活 USB 硬件访问（授权）](../Images/8ff7c2e6cb1e1abc728ceab904d16152.png)](https://i.stack.imgur.com/RRvCd.png)

来源：[Apple Docs - 启用硬件访问](https://developer.apple.com/library/content/documentation/Miscellaneous/Reference/EntitlementKeyReference/Chapters/EnablingAppSandbox.html#//apple_ref/doc/uid/TP40011195-CH4-SW11)

# asp.net - 如何在 UpdatePanel 中更新用户控件？

> ID：14487918
> 
> 赞同：0
> 
> 时间：2013-01-23T19:37:03.483
> 
> 标签：asp.net, user-controls, updatepanel

我想刷新 UpdatePanel 中的用户控件，但我也想用不同的属性值刷新它。

```
<asp:UpdatePanel runat=server ID=up1>
<Triggers>
            <asp:AsyncPostBackTrigger controlid="but01" eventname="Click" />
        </Triggers>
<ContentTemplate>
<asp:Button runat="server" Text="Test" ID="but01"  />   
<UC:Uc runat=server ID="Uc1" />
</ContentTemplate>
</asp:UpdatePanel>

Codebehind for but01 click is
void but01_Click(object sender, EventArgs e)
{

this.Uc1.ID = 1;
this.Uc1.Length = 50;
} 
```

我测试了这段代码，并且正在刷新用户控件，但未应用新值 ID=1、Length=50。

后面的控制代码比较简单

```
namespace Admin.Web.Controls
{

    public partial class Uc1 : System.Web.UI.UserControl
    {

        private string p_to;
        private string p_from;
        private string p_subject;
        private string p_body; 
        private string p_priority;
    }

        protected void Page_Load(object sender, EventArgs e)
        {

            this.txtFrom.Text = p_from;
            this.txtTo.Text = p_to;
            this.txtSubject.Text = p_subject;
            this.txtBody.Text = p_body;

        }

        public string Subject
        {
            get
            {
                return p_subject;
            }
            set
            {
                p_subject = value;
            }
        }

        public string From
        {
            get
            {
                return p_from;
            }
            set
            {
                p_from = value;
            }
        }

        public string To
        {
            get
            {
                return p_to;
            }
            set
            {
                p_to = value;
            }
        }

        public string Body
        {
            get
            {
                return p_body;
            }
            set
            {
                p_body = value;
            }
        }

} 
```

ascx 标头是

```
<%@ Control Language="c#" Inherits="Admin.Web.Controls.Uc1" AutoEventWireup="true" Codebehind="Uc1.ascx.cs"  %> 
```

当我在页面加载期间从 aspx 页面启动用户控件时，一切正常。在从控制面板回发时，刷新用户控件（使用标签 + 时间检查），但没有值传递给用户控件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T22:14:24.427

删除触发器标签

[http://msdn.microsoft.com/en-us/library/Bb399001(v=vs.100).aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2](http://msdn.microsoft.com/en-us/library/Bb399001(v=vs.100).aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-2)

或者

将 asp:Button 移到 UpdatePanel 之外。

[http://msdn.microsoft.com/en-us/library/Bb399001(v=vs.100).aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-5](http://msdn.microsoft.com/en-us/library/Bb399001(v=vs.100).aspx?cs-save-lang=1&cs-lang=csharp#code-snippet-5)

**更新：**

请将控件的 setter 和 getter 设置为 -

```
public string Subject
{
   get  { return txtSubject.Text; }
   set  { txtSubject.Text = value; }
} 
```

# php - 将上传的文件传递给 python 脚本

> ID：14487921
> 
> 赞同：2
> 
> 时间：2013-01-23T19:37:16.927
> 
> 标签：php, python, upload

我正在尝试将上传的文件作为参数传递给 python 脚本。

**表单.php**

```
<html>
<body>
<form method="post" enctype="multipart/form-data" action = "formdata.php">

<label for="file">Upload File:</label>
<input type="file" name="file" id="file" />
<label for="user_email">Email:</label>
<input type="text" name="user_email" id="user_email" />
<input type="submit" id="submit" value="Submit" />

</form>
</body>
</html> 
```

**表格数据.php**

```
<?php
$email = $_POST['user_email'];
$uploaded_file = //don't know what to do here

$output = shell_exec("/usr/bin/python /var/www/Create.py $uploaded_file $email);
echo "<pre>$output</pre>";
?> 
```

**创建.py**

```
 #    def moveMetadataFile():
  #      import shutil
  #      shutil.copyfile('/var/www/**uploaded_file**', '/var/www/temp/**uploaded_file**')
  # some more code
  upload = sys.argv[1]
  email = sys.argv[2] 
```

这工作正常，我从用户那里收到电子邮件和所有内容，如果我自己指定文件名，代码就可以工作，但现在我希望 python 脚本使用用户上传的文件。我完全不知道从哪里开始？如果忽略注释掉的部分更容易回答这个问题，那也可以。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T20:49:11.480

您可以使用获取文件名

```
$uploaded_file = $_FILES['file']['tmp_name']; 
```

来自 PHP 文档`tmp_name`：

> 上传文件存储在服务器上的文件的临时文件名。

请参阅[PHP 文档 | POST 方法上传](http://php.net/manual/en/features.file-upload.post-method.php)以获取更多信息。您可能还想使用其他一些字段来确保在调用 Python 脚本之前没有发生错误。

这有帮助吗？

# jsf - JSF 传递参数并重定向到视图范围

> ID：14487924
> 
> 赞同：2
> 
> 时间：2013-01-23T19:37:21.153
> 
> 标签：jsf, parameters

我正在尝试将参数传递给其他页面。我有一个图像类别，该列表在会话范围内，在我的标题模板中为每个类别创建一个链接。

我想重定向到新页面，并传递所选类别。

```
<h:dataTable id="categoryMenu" value="#{menuBean.listCategory}" var="category">
    <h:column>
        <h:link value="#{category.name}"
     outcome="/image/imageList.xhtml" >
        </h:link>
    </h:column>
</h:dataTable> 
```

但现在我希望我的页面 imageList.xhtml 与 ImageListBean.java 相关联得到选定的类别。

我通过使用 f:param 请求 GET 参数尝试了很多事情，但是因为我的 ImageListBean.java 必须是视图范围，所以它不起作用。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T20:00:33.637

你的`ViewScoped`豆子应该没有问题。使用此代码：

```
<h:link value="#{category.name}" outcome="/image/imageList.xhtml">
  <f:param name="categoryName" value="#{category.name}"/>
</h:link> 
```

您应该能够通过以下方式在您的支持 bean 中访问此参数：

```
FacesContext.getCurrentInstance().getExternalContext().getRequestParameterMap().get("categoryName") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-23T20:02:17.633

您是否在 imageList.xhtml 上尝试过**viewParam**？

```
<f:metadata>
    <f:viewParam name="id" value="#{bean.id}" />
</f:metadata> 
```

它基本上做了以下工作：

*   通过名称id获取请求参数值。
*   如有必要，对其进行转换和验证（您可以使用 required、validator 和 converter 属性并将 a 和嵌套在其中，就像 with 一样）
*   如果转换和验证成功，则将其设置为 #{bean.id} 表示的 bean 属性

您可以在结果链接上传递类别 ID（例如 imageList.xhtml?id=1）并在您的 ImageListBean 上检索它，一旦您拥有“id”参数，您就可以在您的数据库上搜索类别。

# android - 记录加速度计数据时应用程序冻结：Android

> ID：14487926
> 
> 赞同：1
> 
> 时间：2013-01-23T19:37:22.883
> 
> 标签：android, accelerometer, nexus-s

我只是想记录加速度计数据并通过单击按钮在 sdcard 中写入文件。在我的 Nexus S（4.1.2）中运行该应用程序时，它会在一分钟后冻结。我尝试在 Galaxy Nexus 手机中运行它并且运行顺畅。由于某些原因，我必须在 Nexus S 中工作。任何人都可以建议我崩溃的原因。我试图查看日志，但它没有通过任何错误消息。

这是我的代码：

```
final SensorEventListener mySensorEventListener = new SensorEventListener() { 
    public void onSensorChanged(SensorEvent sensorEvent) {
        if (sensorEvent.sensor.getType() == Sensor.TYPE_ACCELEROMETER) {
            xAxis_lateralA = sensorEvent.values[0]; 
            yAxis_longitudinalA = sensorEvent.values[1]; 
            zAxis_verticalA = sensorEvent.values[2]; // TODO apply the acceleration changes to your application.
            textView.append("\nACC_x = "+ xAxis_lateralA + ", ACC_y = "+yAxis_longitudinalA+ ", ACC_z = " + zAxis_verticalA);

            acc += "\n"+miliSec()+", "+xAxis_lateralA + ", "+ yAxis_longitudinalA+", "+zAxis_verticalA;

            try {
                File myFile = new File("/sdcard/acc.txt");
                myFile.createNewFile();
                FileOutputStream fOut = new FileOutputStream(myFile);
                OutputStreamWriter myOutWriter = new OutputStreamWriter(fOut);
                myOutWriter.append(acc);
                myOutWriter.close();
                fOut.close();

            } catch (Exception e) {
                Toast.makeText(getBaseContext(), e.getMessage(), Toast.LENGTH_SHORT).show();
            }
        }
    }

    @Override
    public void onAccuracyChanged(Sensor sensor, int accuracy) {
        // TODO Auto-generated method stub

    }
};

startButton.setOnClickListener(new OnClickListener() {
    public void onClick(View v) {
        Toast.makeText(getBaseContext(),"Done writing SD 'acc.txt'",Toast.LENGTH_SHORT).show();
        sm = (SensorManager)getSystemService(Context.SENSOR_SERVICE); 
        int sensorType = Sensor.TYPE_ACCELEROMETER; 
        sm.registerListener(mySensorEventListener,sm.getDefaultSensor(sensorType), SensorManager.SENSOR_DELAY_NORMAL);

    }// onClick
}); // btnWriteSDFile 

stopButton = (Button) findViewById(R.id.stopButton);

stopButton.setOnClickListener(new OnClickListener() {

    public void onClick(View v) {

        int sensorType = Sensor.TYPE_ACCELEROMETER;
        sm.unregisterListener(mySensorEventListener, sm.getDefaultSensor(sensorType));
        Toast.makeText(getBaseContext(), "Stopped Recording",Toast.LENGTH_SHORT).show();
        finish();

    }// onClick
}); // btnstopButton 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-25T18:20:03.397

问题是由于您将值写入文本文件的方式。

每次读取传感器时，您都在打开/写入/关闭文件。

即使对于 50Hz 的传感器读取频率，它也需要大量计算，以 50 次/秒的速度将这些写入文本效率不高。

使用[BufferedWriter](http://developer.android.com/reference/java/io/BufferedWriter.html)，它可以提供更好的性能。

# html - 用于 seo 优化的 tr href

> ID：14487927
> 
> 赞同：0
> 
> 时间：2013-01-23T19:37:28.960
> 
> 标签：html, seo

我发现了两种使 tr 可点击的可能方法：

*   使用 javascript：

> `<tr onclick="document.location = '...';">`

*   使用锚点：

> `<tr><td><a href="">text</a></td><td><a href="">text</a></td></tr>`

使用以下CSS：

```
 table tr td a {
    display:block;
    height:100%;
    width:100%;
} 
```

搜索机器人不会遵循第一种方式。在第二种情况下，我们有太多类似的链接，我不知道这对他们有好处。在某些情况下它也不起作用。我需要确定页面将被跟踪和索引。

我想保存表格视图，但seo优化更重要。对我来说最好的解决方案是什么？还是第二种方式可以？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:40:52.547

正常使用`<a>`，然后在页面加载后使用 JavaScript 将文档跟踪器动态添加到其中。它将是搜索引擎友好的，并且仍然允许您跟踪链接。（虽然你真的应该做那个服务器端）。

# ios - 将推送通知发送到 URL 而不是 App

> ID：14487929
> 
> 赞同：1
> 
> 时间：2013-01-23T19:37:32.313
> 
> 标签：ios, apple-push-notifications

是否可以从应用程序发送推送消息，当单击该消息时会定向到 URL 而不是应用程序本身？

即我想要一条推送消息阅读“请为我们填写此调查！” 当他们点击该推送消息时，它会将他们带到 www.surveygizmo.com

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:40:17.593

你将无法做到这一点。当用户单击推送时，它将打开应用程序，但您可能能够执行与您的预期目标类似的事情。

使用推送发送 json 有效负载，当推送打开您的应用程序时，您可以读取传入的内容并进行处理。这可以使您能够打开您的应用程序，并根据通过推送传递的内容将应用程序重定向到网页。这是否违反任何准则取决于您自己的判断。

# ruby-on-rails - 创建红宝石哈希的更好方法？

> ID：14487930
> 
> 赞同：1
> 
> 时间：2013-01-23T19:37:34.937
> 
> 标签：ruby-on-rails, ruby, hash

我想从数据库中的行数组构建散列。我可以使用下面的代码轻松完成。我从 PHP 来到 Ruby，这就是我的做法。在Ruby（或Rails）中是否有更好/正确的方法来做到这一点？

```
def features_hash
  features_hash = {}
  product_features.each do |feature|
    features_hash[feature.feature_id] = feature.value
  end

  features_hash
end

# {1 => 'Blue', 2 => 'Medium', 3 => 'Metal'} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-23T19:43:37.727

您可以使用`Hash[]`：

```
Hash[ product_features.map{|f| [f.feature_id, f.value]}  ] 
```

你想要这个更好吗？

```
product_features.map{|f| [f.feature_id, f.value]}.to_h # no available (yet?) 
```

然后去看看[这个功能请求](https://bugs.ruby-lang.org/issues/7292)并评论它！

替代解决方案：

```
product_features.each_with_object({}){|f, h| h[f.feature_id] = f.value} 
```

还有`group_by`和`index_by`which 可能会有所帮助，但价值将是特征本身，而不是它们的`value`.

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-23T19:43:41.597

您可以`index_by`为此使用：

```
product_features.index_by(&:id) 
```

这产生的结果与手动构建哈希`id`作为键和记录作为值的结果相同。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T19:43:10.257

你的代码是一个很好的方法。另一种方法是：

```
def features_hash
  product_features.inject({}) do |features_hash, feature|
    features_hash[feature.feature_id] = feature.value
    features_hash
  end
end 
```

# javascript - JavaScript 揭示模块模式变量范围

> ID：14487938
> 
> 赞同：0
> 
> 时间：2013-01-23T19:38:11.907
> 
> 标签：javascript, revealing-module-pattern

我有一个问题，我无法访问函数内的变量：

**编辑** 我忘了补充说我`workerPage.grid = $("#grid").data("kendoGrid");`在 jQuery 上设置了这个`$(function(){});`

我不能`claimsGird`在保存函数中使用变量，我必须通过`workerPage.grid`. 不是像其他变量一样`viewModel`工作正常。这是片段：

```
save = function () {
                saif.kendoGridUtils.addModifiedDataItems(
                    viewModel.CompanionClaims.Updated,
                    viewModel.CompanionClaims.Added,
                    $("#grid").data("kendoGrid").dataSource.data()
                );

                $.ajax({
                    url: $("#contentForm").attr("action"),
                    data: JSON.stringify(viewModel),
                    type: "POST",
                    contentType: "application/json"
                }).success(function (data) {
                    //syncs viewModel with changes in model
                    $.extend(viewModel, kendo.observable(data));

                    //rebinds the grid data source
                    claimsGrid.dataSource.data(viewModel.CompanionClaims.Rows); 
```

这是完整的脚本：

```
var workerPage = (function () {
        var viewModel = kendo.observable(@Html.Raw(Json.Encode(Model))),
            claimsGrid = null,
            deleteFirm = function (firmModel) {
                firmModel.Name = "";
                firmModel.AttorneyName = "";
                firmModel.Address.Line1 = "";
                firmModel.Address.Line2 = "";
                firmModel.Address.City = "";
                firmModel.Address.State = "OR";
                firmModel.Address.ZipCode = "";
                firmModel.Address.PlusFourCode = "";
                firmModel.PhoneNumber = "";
                firmModel.FaxNumber = "";
                firmModel.ContactName = "";
            },
            bind = function () {
                kendo.bind($("#main-content"), viewModel);
            },
            save = function () {
                saif.kendoGridUtils.addModifiedDataItems(
                    viewModel.CompanionClaims.Updated,
                    viewModel.CompanionClaims.Added,
                    $("#grid").data("kendoGrid").dataSource.data()
                );

                $.ajax({
                    url: $("#contentForm").attr("action"),
                    data: JSON.stringify(viewModel),
                    type: "POST",
                    contentType: "application/json"
                }).success(function (data) {
                    //syncs viewModel with changes in model
                    $.extend(viewModel, kendo.observable(data));

                    //rebinds the grid data source
                    claimsGrid.dataSource.data(viewModel.CompanionClaims.Rows);

                    //rebinds view elements to view model so changes are visible
                    //kendo.bind($("#main-content"), viewModel);
                    bind();

                    // Errors and Warnings
                    var results = messageUtils.parseMessages(
                        viewModel.Messages.Errors,
                        viewModel.Messages.Informationals,
                        viewModel.Messages.Warnings
                    );

                    var errs = $("#errors").html(results.errorMessages);
                    $("#informationals").html(results.informationalMessages);
                    $("#warnings").html(results.warningMessages);

                    $.each(saif.kendoGridUtils.processErrors(viewModel.CompanionClaims.Rows), function (i, message) {
                        errs.html(errs.html() + message + "<br>");
                    });
                    // End Errors and Warnings

                });
            },
            deleteRow = function () {
                var row = claimsGrid.select(),
                    rowDataItem = claimsGrid.dataItem(row),
                    rowIndex = $(row).index(),
                    addedItemIndex = $.inArray(rowDataItem, viewModel.CompanionClaims.Added);

                //add to Deleted if not new
                if (addedItemIndex == -1 && $.inArray(rowDataItem, viewModel.CompanionClaims.Rows) != -1) {
                    viewModel.CompanionClaims.Deleted.push(rowDataItem);
                }

                //remove from Added if exists
                if (addedItemIndex != -1) {
                    viewModel.CompanionClaims.Added.splice(addedItemIndex, 1);
                }

                claimsGrid.removeRow(row);

                //select the next row, eg. if you delete row 2, select the row that took that rows poisition after it was deleted.
                claimsGrid.select(claimsGrid.tbody.find(">tr:eq(" + rowIndex + ")"));
            };

        return {
            bind: bind,
            deleteFirm: deleteFirm,
            deleteRow: deleteRow,
            grid: claimsGrid,
            save: save,
            viewModel: viewModel
        };

    }()); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:48:41.397

问题是它`claimsGrid`永远不会设置为`null`. 并且设置`workerPage.grid`不会改变`claimsGrid`它的值——它不是一个*指针*，只是一个副本。

您将不得不使用 getter/setter。使用[较新的浏览器/引擎](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/get#Browser_compatibility)，可以使用[`get`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/get)and来完成[`set`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/set)：

```
// ...
return {
    // ...
    get grid() {
        return claimsGrid;
    },
    set grid(grid) {
        claimsGrid = grid;
    },
    // ...
}; 
```

您还可以定义`grid`为函数：

```
// ...
function getOrSetGrid(grid) {
    if (typeof newGrid === 'undefined') {
        return claimsGrid;
    } else {
        claimsGrid = grid;
    }
}

return {
    // ...,
    grid: getOrSetGrid,
    // ...
};
// ... 
```

```
// rather than: workerPage.grid = ...;
workerPage.grid(...); 
```

或将其拆分为`getGrid`和`setGrid`功能。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T19:48:10.640

javascript 中的作用域与 Java 或 C# 等其他语言的工作方式不同。在您的情况下，claimsGrid 不在保存功能的范围内。这有帮助吗？[http://coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/](http://coding.smashingmagazine.com/2009/08/01/what-you-need-to-know-about-javascript-scope/)

# node.js - 如何修改 node.js lib 文件？

> ID：14487941
> 
> 赞同：0
> 
> 时间：2013-01-23T19:38:15.930
> 
> 标签：node.js

我想修改 node.js 的 lib 文件中的代码（请参阅[https://github.com/joyent/node/pull/4056](https://github.com/joyent/node/pull/4056)）。但是，似乎当我将该代码直接放入我的 lib 文件夹中的文件时，即使我重新启动节点也没有任何效果。我究竟做错了什么？谢谢！

# erlang - 在多行列表中查找项目的索引

> ID：14487943
> 
> 赞同：0
> 
> 时间：2013-01-23T19:38:20.910
> 
> 标签：erlang

我正在遍历文件列表，将内容存储在列表中，然后在该列表中搜索单词“blue()”的位置，这是我用来查找单词的代码：

```
Item = "blue()",
{ok, Device} = file:read_file([File]),
Li = string:tokens(erlang:binary_to_list(Device), "\n"),
Nlist = lists:map(fun (X) ->string:strip(X) end, Li),
Index = string:str(Nlist, [Item]),
io:format("~p", [Index]). 
```

这根本行不通，它返回“0”，我认为这可能与空格有关，所以我尝试删除它们但没有成功，在处理了大约 2 个小时后我已经没有想法了：/

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T20:57:10.513

该`string`模块需要一个平面列表来使用。您正在向它传递一个列表列表。如果您的目标只是识别术语“blue()”的索引，那么您可以只使用 re 模块，而无需所有字符串拆分。

```
Data = file:read_file([File]),
case re:run(Data, "blue()") of  % Note that re takes binaries, strings, and iolists as input
    {match, [{StartIndex, StopIndex}]} -> io:format("~p", [StartIndex]);
    nomatch -> io:format("Item not found.")
end. 
```

或者，无需太多更改，您可以像这样在 Nlist 中查找术语“blue()”（打印该术语的行号和字符偏移量）：

```
find_terms(Item, L) -> find_terms(Item, L, 1).

find_terms(Item, [], N) ->
    ok;
find_terms(Item, [String|Rest], LineNumber) ->
    case string:str(String, Item) of
        0 -> % string:str returns 0 when the substring is not found
            find_terms(Item, Rest, LineNumber + 1);
        Index ->
            io:format("~p:~p", [Line, Index]),
            find_terms(Item, Rest, LineNumber + 1);
    end. 
```

你会用`find_terms("blue()", Nlist)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-23T20:15:07.267

你可以用`lists:map`和`string:strip`

```
lists:map(fun(E) -> string:strip(E) end, List)

7> lists:map(fun(E) -> string:strip(E) end, ["hello", " world"]).      
["hello","world"] 
```

# mysql - GROUP BY 间隔重叠时间戳 MySQL 查询

> ID：14487945
> 
> 赞同：1
> 
> 时间：2013-01-23T19:38:28.677
> 
> 标签：mysql, group-by, timestamp, intervals

我一直在阅读其他问题，但没有运气。我有一个包含列（邮票，价值）的表格。'stamp' 列存储每小时的时间戳。我要做的是根据查询中指定的时间戳范围以 24 小时为间隔检索 SUM(value)：

```
SELECT stamp, 
       Sum(value) 
FROM   table 
WHERE  stamp >= Date_sub('2012-12-02 05:00:00', INTERVAL 1 day) 
       AND stamp < '2013-01-01 05:00:00' 
GROUP  BY Date(stamp) 
```

我正在寻找的结果如下所示：

```
stamp                      value
2012-12-02 05:00:00        12024
2012-12-03 05:00:00        11211
2012-12-04 05:00:00        19834
...
2013-01-01 05:00:00        10232 
```

实际表格如下所示：

```
stamp                      value
2012-12-01 01:00:00        345
2012-12-01 02:00:00        100
2012-12-01 03:00:00        104
2012-12-01 04:00:00        103
2012-12-01 05:00:00        101
2012-12-01 06:00:00        102
...
2013-01-01 05:00:00        207
2013-01-01 06:00:00        307
2013-01-01 07:00:00        223
... 
```

***注意stamp列的数据类型是timestamp**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T20:25:23.213

我认为您只想将小时数设置为 5，以与您的范围保持一致。如果是这样，您可以这样做：

```
SELECT cast(date(stamp) as datetime) + interval 5 hour
       Sum(value) 
FROM   table 
WHERE  stamp >= Date_sub('2012-12-02 05:00:00', INTERVAL 1 day) 
       AND stamp < '2013-01-01 05:00:00' 
GROUP  BY Date(stamp) 
```

但是，我认为您实际上可能想换一种说法：

```
SELECT cast(date(stamp - interval 5 hour) as datetime) + interval 5 hour
       Sum(value) 
FROM   table 
WHERE  stamp >= Date_sub('2012-12-02 05:00:00', INTERVAL 1 day) 
       AND stamp < '2013-01-01 05:00:00' 
GROUP  BY Date(stamp - interval 5 hour) 
```

这实际上重新调整了 5 小时边界上的日期。

注意：这些查询未经测试，因此可能包含语法错误。

这是假设时间戳实际上是一个日期时间。如果是 UNIX 时间戳，则需要先进行转换。

# jsf - 对话范围 - 对话传播

> ID：14487948
> 
> 赞同：1
> 
> 时间：2013-01-23T19:38:35.963
> 
> 标签：jsf, primefaces, cdi, jboss-weld, conversation-scope

在 JSF 页面上，每个句柄文件上传事件都会创建一个新的 Bean 实例。好像每次都是新客户一样。此外，网络浏览器似乎也是一个不同的客户端。

那么，有没有办法让这些仅来自一个浏览器的 FileUploadEvents 只实例化一个 Bean？

我正在尝试使用 CDI 而不是 @ViewScoped JSF bean。

索引.xhtml：

```
<p:fileUpload fileUploadListener="#{bean.handleFileUpload}"/> 
```

豆：

```
@Named
@ConversationScoped
public class Bean {

//code

@Inject
Conversation conversation;

public void HandleFileUpload(FileUploadEvent fileUploadEvent){
if(conversation.isTransient()){ //Always true :(
   conversation.begin(); 
}
//Beans get created each time it needs to access this method.

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-24T19:52:58.050

我对*@ConversationScoped*有误解。

对话应该在访问给定链接**之前开始。**

意味着如果访问一个链接，之前没有开始对话，该 bean 的行为类似于 @RequestScoped bean。因此，每次刷新附加到*@ConversationScoped*的页面都会创建和销毁。

解决方案是在访问链接之前开始对话，因此*?cid=10*将包含在 URL 中。

# php - 如何使用 facebook api 获取最近添加的朋友

> ID：14487950
> 
> 赞同：0
> 
> 时间：2013-01-23T19:38:44.417
> 
> 标签：php, facebook, facebook-graph-api, facebook-fql

我正在寻找一种解决方案，我可以在其中为用户添加最后 10 个朋友。是否可以通过。FQL 或 Graph API 还是不可能的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T20:01:26.377

表`friends`/端点不会公开您和其他用户开始友谊的时间。所以你不能直接得到这些信息。

您可以做的最好的事情是查询`stream`表中的朋友公告。

```
SELECT description, description_tags, created_time FROM stream WHERE source_id = me() 
  AND type = 8 LIMIT 100 
```

在我的例子中，这个查询返回了 3 个结果，即使我请求了`LIMIT`100 个。

# mysql - 修复 MySQL .SQL 脚本失败 - INSERT 具有 FK 列约束

> ID：14487957
> 
> 赞同：0
> 
> 时间：2013-01-23T19:38:56.037
> 
> 标签：mysql, sql, mysqladmin

在`MySQL Workbench 5.2`我试图执行我们拥有的 SQL 脚本时。

我如何真正让整个事情执行？当我全选并按下`ctrl-enter`它时，它只执行一行 SQL 脚本！

如果我通过将光标放在最后一行的末尾来执行脚本；只有最后一行执行。

我在谷歌上搜索，但我想我不知道如何正确表达或理解不够。

这可能是因为我搬到了新电脑，因此有了新的个人资料。难道是 MySQL Workbench 没有足够的权限？

我唯一真正的选择似乎是

> > 文件 >> 新建 >> 查询选项卡

我以为会有一个新的脚本选项卡和一个新的查询选项卡？？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:42:41.300

要执行所有语句，[请按住 shift 键](http://dev.mysql.com/doc/workbench/en/wb-keys.html#workbench-keys-menu-query): `Ctri+Shift+Enter`; 或单击工具栏`Execute`上的（既没有光标也没有放大镜的闪电）[按钮](http://dev.mysql.com/doc/workbench/en/wb-sql-editor-toolbar.html)；或`Execute (All or Selection)`从`Query` [菜单](http://dev.mysql.com/doc/workbench/en/wb-sql-editor-main-menu.html)中选择。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:50:17.837

只需按`ctrl+shift+enter`或选择脚本文件中的所有行，然后按`ctrl+enter`

# assembly - 检查是否在裸机 BIOS PC 上按下了 ALT 键

> ID：14487958
> 
> 赞同：2
> 
> 时间：2013-01-23T19:39:02.190
> 
> 标签：assembly, x86, bootloader, bios

我正在努力检查是否`Alt`在 linux bootloader 中按下了键

```
int 0x16
mov ah, 0x0e
int 0x10 
```

上面的代码可以很好地打印 ascii 字符，但是如何检查`Alt`密钥？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:47:12.763

您测试 0040h:0017h 的第 3 位。

[http://www.ousob.com/ng/bios/ng559a.php](http://www.ousob.com/ng/bios/ng559a.php)

像这样的东西（在 AT/T 语法中）：

```
mov    $0x40,%ax
mov    %ax,%es
testb  $8,%es:0x17
jz     noAltKey
.... ;; Alt pressed
noAltKey: 
```

根据`objdump -d -M intel`，这就是它在 Intel 语法中的样子：

```
0:   66 b8 40 00             mov    ax,0x40
4:   8e c0                   mov    es,eax
6:   26 f6 04 25 17 00 00    test   BYTE PTR es:0x17,0x8
d:   00 08 
```

UPD：以下应该适用于 NASM：

```
mov    ax,0x40
mov    es,eax
test   [es:0x17],byte 0x8
jz     noAltKey
.... ;; Alt pressed
noAltKey: 
```

# django - Django - 带有来自 DB 的 slug 的站点地图

> ID：14487959
> 
> 赞同：0
> 
> 时间：2013-01-23T19:39:06.183
> 
> 标签：django, seo, sitemap

我的应用程序包含一个动态 slug url -`http://mydomain.com/<slug>`其中 slug 是`'name'`数据库中模型字段中的一个参数。

然后，我有一个“细节视图”，它包含了蛞蝓和更多细节 - `http://mydomain.com/<slug>/<detail>`。

相应的 URL conf 部分是：

```
url(r'^(?i)(?P<slug>[\w\.\--]*)/?$', views.list, name="list"),
url(r'^(?i)(?P<slug>[\w\.\--]*)/(?P<detail>[\w\.-]*)/?$', views.detail, name="detail"), 
```

我想知道如何为此定义站点地图字典。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T21:45:00.080

这个链接对我很有帮助。

[https://skyl.org/log/post/skyl/2010/03/add-urls-to-your-django-sitemap-that-require-two-objects/](https://skyl.org/log/post/skyl/2010/03/add-urls-to-your-django-sitemap-that-require-two-objects/)

本质上，我扩展了 sitemap.Sitemap 类，以便用我想要的查询集（即`Model.objects.all()`）覆盖 items 函数。然后我还覆盖了位置功能`return '/%s/' % obj.name`

# mysql - MySQL 和 Coldfusion 日期问题

> ID：14487963
> 
> 赞同：2
> 
> 时间：2013-01-23T19:39:20.237
> 
> 标签：mysql, sql, coldfusion

我`timestamp`在 MySQL 表中有一个字段。我正在尝试使用以下 SQL 查询来查询表：

```
SELECT  login_mode,count(login_mode) as total 
FROM    login_activity,ccac_registered_users 
WHERE   login_activity.student_id=ccac_registered_users.student_id 
AND     login_date >= STR_TO_DATE('01/16/2013','%m/%d/%Y') 
AND     login_date <= STR_TO_DATE('01/17/2013','%m/%d/%Y') 
GROUP BY login_mode 
```

当我直接在 Mysql 上运行时，查询工作正常，但在冷融合应用程序中不起作用。我难住了！生成日期的代码是：

```
login_date >= STR_TO_DATE(
                 '#DateFormat(CreateODBCDate(startDate),'mm/dd/yyyy')#'
                 , '%m/%d/%Y'
              ) 
```

ColdFusion 的错误是这样的：

> 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，了解在 '01/16/2013'',''%m/%d/%Y'') AND login_date <= STR_TO_DATE(''01/17 /2013'',''%m/%d/' 在第 1 行

这里有什么问题？

**编辑**

我刚刚转储了 CF 试图执行的 sql。

```
SELECT login_mode,count(login_mode) as total 
FROM   login_activity,ccac_registered_users 
WHERE  login_activity.student_id=ccac_registered_users.student_id 
AND    login_date >= STR_TO_DATE(''01/16/2013'',''%m/%d/%Y'') 
AND    login_date <= STR_TO_DATE(''01/17/2013'',''%m/%d/%Y'') 
```

日期周围还有其他报价，它们导致了问题。如果我删除了从代码中添加的额外内容，则不会添加任何内容。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-23T19:59:12.437

（来自我之前的评论......）

绝对不需要使用`dateFormat`or `str_to_date`。`DateFormat`专为演示而设计并返回一个*字符串*。您应该使用的是日期对象。`CreateODBCDate`已经给你了。因此，只需在您的查询中直接使用它。（显然你应该总是先验证输入）

```
 WHERE column >= #CreateODBCDate(startDate)#  
 .... 
```

.. 或者更好的是，使用 cfqueryparam：

```
 WHERE column >= <cfqueryparam cfsqltype="cf_sql_date" value="#startDate#"> 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-23T19:56:27.657

使用查询参数和日期对象而不是字符串。像这样：

```
AND login_date >= <cfqueryparam cfsqltype="cf_sql_date" value="#CreateDate(2013,1,16)#"> 
AND login_date <= <cfqueryparam cfsqltype="cf_sql_date" value="#CreateDate(2013,1,17)#"> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T19:42:23.713

我建议使用 DateDIff 来执行日期比较，而不是比较字符串中的日期，这对我的 4 个应用程序非常有效

详情在这里：[http ://www.w3schools.com/sql/func_datediff_mysql.asp](http://www.w3schools.com/sql/func_datediff_mysql.asp)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T19:43:41.643

在 SQL 中使用：

```
 CONVERT(DateTime, DateField, 104) 
```

或尝试：

```
 CAST( right(@date,4) + left(@date,4) as datetime ) 
```

我认为 ColdFusion 等价物是：

```
 <cfset date = DateFormat(date, "mm/dd/yyyy")> 
```

- 不？

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-23T20:09:15.023

CFQUERY 喜欢自动转义单引号。为了让它按照您编写的方式工作，您需要将内容包装起来`preserveSingleQuotes()`以防止 CF 添加额外的单引号。或者使用其他日期比较建议之一重写它。

# html - HTML表单中的URL格式问题

> ID：14487970
> 
> 赞同：0
> 
> 时间：2013-01-23T19:39:58.587
> 
> 标签：html, forms

我显然错过了一些非常明显的东西，但请可怜我；我是新来的。

我正在尝试创建一个将打开具有这种格式的 URL 的表单：

`http://searchplace.com/?sid=Do:Re&id=Fa:(8 digit number input into form)`

这是表单现在的样子：

```
<form method="get" action="http:/searchplace.com/" enctype="application/x-www-form-urlencoded"> 
    <input type="hidden" name="sid" value="Do:Re">
    <input type="hidden" name="id" value="Fa:">
    <input type="text"  name="q" maxlength="8" value="" /> 
    <input type="submit" value="Search" /> 

</form> 
```

这里至少有两个问题：

1) 冒号（第一个输入中的 Do 和 Re 之间以及第二个输入中的 Fa 之后）更改为 %3A。我尝试过使用和不使用`enctype`，并尝试说`value="Do&#58;Fa"`而不是`value="Do:Fa"`。我什至做了一些`accept-charset="utf-8"`我现在怀疑是红鲱鱼的事情。我只想要一个冒号！（嗯，显然是两个冒号。）

2) 现在，我的表单的最后一点返回类似`Fa%3A&q=12345678`. 显然 q 是因为我给文本输入命名为“q”。但我不想要 q，我只想要一个完整的`Fa:12345678`，我不知道如何在不给它命名的情况下将输入数字附加到 URL 的末尾。

希望我不会太远，以至于我的问题根本没有意义。我实际上已经解决了导致我尝试创建此表单的原始问题，但实际表单本身仍然让我发疯。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:46:03.543

我明白你想要什么，但你不应该那样做。您必须使用不同的拆分函数来提取数据。我建议使用

`<input type="text" name="fa_q" maxlength="8" value="" />`

然后你会得到像 id=fa&fa_q=12345678 这样的 url，你知道你可以将“fa”分配给“fa_q”。

`urldecode`%3A 也是浏览器 url 编码，你可以通过在 PHP中应用函数来摆脱它

如果你很顽固，并且仍然想要这样 fa:12345678 ，那么 url 应该看起来像

`/?q=fa:12345678`

您必须摆脱所有输入名称并输入 ID，并且必须使用 javascript 将值应用于名称为“q”的输入。你需要正则表达式。

# sql-server - 存储过程缓存清除和执行时间

> ID：14487972
> 
> 赞同：2
> 
> 时间：2013-01-23T19:40:08.370
> 
> 标签：sql-server, stored-procedures, sql-server-2008-r2

我正在尝试确定上次执行（或调用）存储过程的时间。根据我的研究，我们无法真正确定这一点（如果我错了，请在此处纠正我），但下面的代码将捕获缓存的存储过程的最后执行时间：

```
SELECT SO.name, SD.last_execution_time
FROM sys.dm_exec_procedure_stats SD
    INNER JOIN sys.objects SO ON SO.object_id = SD.object_id
WHERE SO.name = 'usp_InsertOurProcName' 
```

注意：*如果上述任何一个错误*- 我希望得到纠正，因为我正在使用它来最小化研究时间，以查看应用程序是否正确调用程序以及是否是问题或其他问题（基本上是为了解决问题-通过消除）。

假设上述语句是正确的，除了手动清除缓存之外，SQL Server 内部是否有任何自动进程可以清除缓存？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-23T19:41:23.817

重新启动 SQL Server 也会清除这些动态管理视图

# javascript - innerHTML 工作 jQuery html() 不工作

> ID：14487977
> 
> 赞同：3
> 
> 时间：2013-01-23T19:40:38.367
> 
> 标签：javascript, jquery

出于某种原因，我无法让**jQuery html()**函数工作。我尝试了以下方法：

1.  查找特定的 div：

    `var div = $("#divId");`

    结果：工作

2.  测试我是否可以将它与 jQuery 一起使用：

    `alert($(div).attr("id"));`

    结果：作品；显示了 id

3.  获取 div 中的 html：

    `alert($(div).html());`

    结果：不起作用；空警报

4.  使用 innerHTML 获取 div 中的 html：

    `alert(document.getElementById($(div).attr("id")).innerHTML);`

    结果：作品；div 内容显示在警报中

实际代码：

```
$(document).ready(function(){

var autocomp = namespace('mx.autocomp');

autocomp.overlay = (function() {

    var formId;
    var $searchValueComp;
    var $searchResultComp;

    function init(inFormId, inSearchValue){
        formId = inFormId;
        $searchValueComp = $("#"+inFormId).find("[id$="+inSearchValue+"]");
        $searchResultComp = $("#"+inFormId).find("[id$=searchResult]");
    }

    function handleOverlay(){
        var fn = window[formId + "OverlayWid"];
        var result = document.getElementById($searchResultComp.attr("id")).innerHTML;

        if($searchValueComp.val().length==0){
            fn.hide();
        }

        // Test - This does not work as I get an empty alert
        alert($searchResultComp.html());

        // Edit1: New test, this works.
        // When I use this javascript, I start with initializing the script from the page
        // using the "init(inFormId, inSearchValue)" function. The handleOverlay() function
        // is called through the "oncomplete='mx.autocomp.overlay.handleOverlay();'" of a
        // p:remoteCommand that executes a search in the db and then update the div called
        // "searchResultComp".
        //
        // Only reason I can think of why the code below works is that the jQuery object $test 
        // is created after the div called "searchValueComp" has been updated by p:remoteCommand.
        // However, I don't understand why the jquery object "searchValueComp" wouldn't have
        // access to the same content as it should look for it first when the html() function 
        // is called. Or is the content of the div searchValueComp set immediately when the 
        // object is created in the "init" function?
        var $test = $("#"+formId).find("[id$=searchResult]");
        alert($test.html());

        // I need to check if the div: "searchResultComp" has any content. 
        // As I don't get $searchResultComp.html() to work, I'm forced to 
        // use the "getElementById" way instead. 
        if(result.length==0){
            fn.hide();
        }else{
            fn.show();
        }

    }

    function print(text){
        $("#textCheck").prepend(text + '\n');
    }

    return {
        handleOverlay: handleOverlay,
        init: init
    };

})();

}); 
```

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-23T19:47:56.247

试试这个

**HTML**

```
<div id="mydiv">
    <select class="myclass">...</select>
    <select class="myotherclass">...</select>
</div> 
```

***JS代码***

```
var $div = $('div');
alert($div.html()); 
```

**[现场演示](http://jsfiddle.net/Lsc78/3/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-24T10:31:32.340

Peter Campbell 在这个问题的后续问题中给了我答案：[jquery 对象的“内容”是否在创建时立即设置？](https://stackoverflow.com/questions/14498059/is-the-content-of-a-jquery-object-set-immediately-at-creation/14498348#14498348)

显然，我必须重新初始化变量 searchResultComp 以获得预期的结果。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-23T19:47:20.703

将 jQuery 对象分配给变量时，通常以 a 开头变量`$`以使其作为 jQuery 对象脱颖而出。这不会影响您的代码，但从开发人员的角度来看更容易。

```
var $div = $('div'); 
```

要获取 html，请执行以下操作：

```
$div.html(); 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-23T19:51:30.747

您需要引用 div，如下所示：

```
$("div").html(); 
```

此外，如果页面上有多个 div 元素，则需要指定一个。您可以通过添加一个类或使用 .eq() 过滤结果来做到这一点。

这是一个例子。 [http://jsfiddle.net/W8qkE/](http://jsfiddle.net/W8qkE/)

# android - Android MMS 数据库内容

> ID：14487985
> 
> 赞同：2
> 
> 时间：2013-01-23T19:40:55.180
> 
> 标签：android, database, mms

这篇文章中对 Android 消息数据库的解释[How to Read MMS Data in Android?](https://stackoverflow.com/questions/3012287/how-to-read-mms-data-in-android) 非常有帮助。不幸的是，我没有足够的声誉要求在那里进行澄清。我需要知道发送彩信的时间。这可以通过数据库获得吗？如果没有，它是否保存在其他任何地方？从发送端的手机获取发送时间也可以。

编辑：我现在看到 DATE_SENT 属性可用，但我不知道如何访问它。是否有类似地址的提供者？

更新：这是我的代码的样子：

```
int id = 0;
ContentResolver contentResolver = getContentResolver();
final String[] projection = new String[]{"*"};
Uri uri = Uri.parse("content://mms-sms/conversations/");
Cursor query = contentResolver.query(uri, projection, null, null, null);
if (query.moveToFirst()) {
    do {
        String string = query.getString(query.getColumnIndex("ct_t"));
        if ("application/vnd.wap.multipart.related".equals(string)) {
            //MMS
            System.out.println("b:mms found");
            System.out.println("b:thing in table is " + query.getString(query.getColumnIndex("_id")));
            id = Integer.parseInt(query.getString(query.getColumnIndex("_id")));
            System.out.println("b:" + getAddressNumber(id));
        } else {
            //SMS
            System.out.println("b:sms found");
        }
    } while (query.moveToNext());
} 
```

它适用于 _id 和日期的列索引，但不适用于 date_sent。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:56:22.250

是的，日期在其中一个数据库中，但由于它没有记录且不受支持，它可能而且可能会随着时间而改变。您将不得不通过源代码来查看如何访问。

[http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/provider/Telephony.java?av=f](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/4.1.1_r1/android/provider/Telephony.java?av=f)

我已经与 mms 提供商打过交道，但没有记录且在不同设备之间存在差异并不好玩

# c# - 如何将类连接到我的 Linq-to-Sql？

> ID：14487986
> 
> 赞同：0
> 
> 时间：2013-01-23T19:40:59.143
> 
> 标签：c#, asp.net-mvc-3, linq, linq-to-sql

Linq / Linq-to-Sql / C# 新手问题，但我似乎找不到任何有用的信息。我可能没有正确地表达这个问题。任何帮助表示赞赏。

所以，我有一些现有的数据库表，并从中生成了 DBML 文件。我有部分类和 DataContext。如何将我的实体类连接回这个？

我只是错过了一些非常明显的东西吗？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T20:12:07.330

如果你想让你的实体类与你的部分 DAO 类分开（这对于非平凡的应用程序来说是一件好事），最直接的方法是在两者之间创建一个映射层（例如`PropertyA`在你的 DAO 类中映射`PropertyB`到你的实体类）。

如果两个层之间的大多数字段名称/类型相同，那么节省大量冗余编码的一种方法是使用像[AutoMapper](http://automapper.org/)这样的映射库。它可以轻松处理相同的属性，并且可以在大多数情况下配置为处理不同的属性而无需太多努力。

在 MVC 项目中，我通常在存储库中执行此操作。我将拥有`Map()`接受一种对象并创建另一种对象的函数。例如，要将数据层`Order`类映射到域层`Order`类：

```
public Domain.Order GetOrder(int orderID)
{
    Data.Order order = context.Orders.Where(o => o.OrderID = orderID);  // 
    Domain.Order newOrder = Map(order);
    return newOrder;
}

public Domain.Order Map(Data.Order order)
{
    if (!UsingAutomapper)
    {
        // raw way
        Domain.Order newOrder = new Domain.Order
                           {
                               ID         = order.OrderID,
                               Number     = order.OrderNumber,
                               OrderDate  = order.OrderDate
                           };
        return newOrder;
    }
    else  // let AutoMapper do the dirty work
    {
        return Mapper.Map(order);
    }
} 
```

# javascript - 在 JSON 对象中搜索字段==1

> ID：14487987
> 
> 赞同：1
> 
> 时间：2013-01-23T19:41:04.207
> 
> 标签：javascript, jquery, json

> **可能重复：**
> [我有一个嵌套的数据结构/JSON，我怎样才能访问一个特定的值？](https://stackoverflow.com/questions/11922383/i-have-a-nested-data-structure-json-how-can-i-access-a-specific-value)

我有一个代表鸟类列表的 JSON。每只鸟都是 JSON 中的一个对象。在每个对象中都有表示位置的字段。这些位置按字母数字编码，如 ['P1UBA'、'P1UBC' 等]。这些字段中的值 1 表示存在，而 0 表示不存在。

下面的代码显示了其中一个对象（整个 JSON 中有 150 个）。

```
[
    {
    "Species": "AMAV",
    "Common Name": "AMERICAN AVOCET",
    "Order": "Shorebirds",
    "Family": "Avocets",
    "P1UBA": "0",
    "P1UBC": "1",
    "P1UBF": "0",
    "P1UBG": "0",
    "P1ABA": "0",
    "P1ABC": "0",
    "P1ABF": "1",
    "P1ABFb": "0",
    "P1ABG": "0",
    "P1USA": "0",
    "P1USC": "0",
    }
] 
```

我如何搜索这个对象并返回位置字段==1？理想情况下，我会创建一个新数组，它是这些字段的字符串==1

使用上面的对象会产生一个新的字符串

```
var birdsMatch=['P1UBC','P1ABF'] 
```

我想使用 jquery，但如果它更有效，我对纯 JavaScript 解决方案持开放态度

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-23T19:46:06.693

鉴于每个鸟对象都在一个名为 Birds 的数组中，下面将起作用。

```
$(data.Birds).each(function(index, element){
    if(element.value == '1')
        alert("FOUND BIRDS IN " + element.name);
}) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-23T19:47:34.387

```
var attr, result_arr = [];

for (attr in birdObj){
    if (birdObj[attr] === "1"){
        result_arr.push(attr);
    }
} 
```

BirdObj 与您在上面给出的 obj 示例类似。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T19:49:46.990

您必须遍历所有鸟类，然后通过每只鸟的所有属性来收集位置（假设 var`birds`包含您解析的 JSON）：

```
var birdsMatch = {};
for(var i=0; i<birds.length; i++) {
    // Create an empty array to keep locations found for each species
    birdsMatch[birds[i].Species] = []; 
    for(var loc in birds[i]) {
        if(birds[i][loc] === 1) {
            // Found! Add location to the correct species array
            birdsMatch[birds[i].Species].push(loc);
        }
    }
} 
```

最后，`birdsMatch`对象将如下所示：

```
{
    AMAV : ['P1UBC','P1ABF'],
    OTHER_SPECIES : [], // not found in any locations
    YET_ANOTHER : ['LOC1']
    // ...
} 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T19:54:58.687

使用[jQuery.map](http://api.jquery.com/jQuery.map/) ：

```
var birds = $.map(birdObj, function(value, key) { 
  return value === '1' ? key : null; 
});

//birds => ["P1UBC", "P1ABF"] 
```

# yacc - lex yacc 非终结循环

> ID：14487989
> 
> 赞同：1
> 
> 时间：2013-01-23T19:41:10.767
> 
> 标签：yacc, lex, circular-dependency

我必须使用 YACC 实现一个用于字符串操作的计算机。我必须实现像 +（用于连接字符串）或 *（用自身 n 次 strcat 一个字符串）之类的操作。这些操作返回一个字符串，我在非终端 t1 中使用它们.BUt 我也有返回数字的操作。这些操作在 t2 非终结符中。

例如我有：

```
 expr1: expr1 '+' expr1 { strcpy($$,$1); strcat($$,$3);}
       | expr1 '-' expr1 { strcpy($$,minus($1,$3));}    
           | | expr1 '*' NUMBER {strcpy($$,mul($1,$3));}
           |STRING; 
```

我有：

```
 expr2 : STRING '?' STRING {strcpy($$nr_of_aparitions($1,$3));}
 ; 
```

问题是 expr2 中定义的操作将始终返回一个 NUMBER。一切正常，直到：

如果我有'dfdf'？例如，“edfd”一切正常。当我必须在 expr2 中实现 expr1 时，问题就来了： expr1 ? expr2 因为会出现循环。你能建议什么吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-24T15:16:46.570

一般来说，您不需要关心所谓的“循环”和我所说的“递归”，即在 expr1 中使用数值表达式，反之亦然。

我将重写您的语法片段如下，以使您的代码更易于理解：

```
stringExpr : stringExpr '+' stringExpr { strcpy($$,$1); strcat($$,$3); }
           | stringExpr '-' stringExpr { strcpy($$,minus($1,$3)); }    
           | stringExpr '*' numberExpr { strcpy($$,mul($1,$3)); }
           | STRING
           ;

numberExpr : stringExpr '?' stringExpr { strcpy($$nr_of_aparitions($1,$3)); }
           | NUMBER
           ; 
```

（我删除了你 expr1 中的空规则——我想这不是故意的。）

我想知道为什么你没有普通算术的语法规则，比如`5 + 2`，但也许这不是你计划的一部分。

如果您确实打算支持普通算术，那么您将需要考虑`"foobar" - 1 + 1`应该如何解释。此时，您可能需要查看 yacc/bison 的[运算符优先级](http://www.gnu.org/software/bison/manual/html_node/Precedence-Decl.html#Precedence-Decl)功能。

# python - Python Django Admin Clean() 方法不覆盖值

> ID：14487990
> 
> 赞同：9
> 
> 时间：2013-01-23T19:41:11.733
> 
> 标签：python, django, admin

也许我在这里遗漏了一些东西，但根据 django 文档，我应该能够覆盖从 clean() 方法中从管理表单发送的值。来自 django 文档

```
def clean(self):
    from django.core.exceptions import ValidationError
    # Don't allow draft entries to have a pub_date.
    if self.status == 'draft' and self.pub_date is not None:
        raise ValidationError('Draft entries may not have a publication date.')
    # Set the pub_date for published items if it hasn't been set already.
    if self.status == 'published' and self.pub_date is None:
        self.pub_date = datetime.date.today() 
```

我已经剥离了我的代码，只是在管理员内部尝试了一个基本示例

模型.py

```
class Test(models.Model):
name = models.CharField(max_length=255,)

def clean(self):
    self.name = 'Robin Hood'
    return self 
```

因此，当我尝试添加新的测试记录时，如果我将名称字段留空，它应该从 clean 方法中获取值并保存。

但是会发生什么，表单没有验证，并且该字段保持为空。

我在这里错过了什么明显的东西吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-23T19:43:52.280

您甚至无法运行模型清理方法。Django 将首先运行表单的验证代码，并且由于您的字段未使用 定义`blank=True`，因此表单将首先强制执行该约束。

您应该做的是覆盖表单，设置字段，然后编写一个*表单*`required=False`清理方法，该方法在 - 中设置值并返回 - ：`name`*`self.cleaned_data`*

 *```
class TestForm(forms.ModelForm):
    name = forms.CharField(required=False)

    class Meta:
        model = Test

    def clean(self):
        self.cleaned_data['name'] = 'Robin Hood'
        return self.cleaned_data 
```

并在您的管理类中引用该表单：

```
class TestAdmin(admin.ModelAdmin):
    form = TestForm 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-23T19:54:48.760

`clean()`从管理站点创建对象时不调用模型方法。`clean()`仅在之后调用，`full_clean()`但 Django 管理站点上的保存和对象不调用该函数。

正如您在[Mode.clean() 的官方文档中](https://docs.djangoproject.com/en/1.4/ref/models/instances/#django.db.models.Model.clean)看到的那样，`full_clean()`调用它来捕获额外的验证错误。

```
from django.core.exceptions import ValidationError, NON_FIELD_ERRORS
try:
    article.full_clean()
except ValidationError, e:
    non_field_errors = e.message_dict[NON_FIELD_ERRORS] 
```

为此，您将需要覆盖 save() 方法。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-06-23T06:18:40.013

解决此问题的 2 个小步骤 :)

1)full_clean()在clean()之前调用，所以在models.py中设置pub_date为：

```
pub_date = models.DateField(null=True) 
```

2）只需从clean函数返回cleaned_data dict来操作pub_date模型字段值。试试这个：

```
def clean(self):
    from django.core.exceptions import ValidationError
    # Don't allow draft entries to have a pub_date.
    if self.cleaned_data['status'] == 'draft' and self.cleaned_data['pub_date'] is not None:
        raise ValidationError('Draft entries may not have a publication date.')
    # Set the pub_date for published items if it hasn't been set already.
    if self.cleaned_data['status'] == 'published' and self.cleaned_data['pub_date'] is None:
       self.cleaned_data['pub_date'] = datetime.date.today()
    return self.cleaned_data 
```

*   怜悯其他开发人员并在 forms.py 文件顶部导入 ValidationError ，而不是不时将其导入每个干净的函数中:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-23T19:55:00.287

尝试这个。您需要返回所有已清理的数据。此外，如果您还没有这样做，您需要`blank=True`在表单字段上设置以使其为空白。

```
def clean(self,*args,**kwargs):
    cleaned_data = super(Test,self).clean(*args,**kwargs)

    # Check to see if name is entered, if not set it to robin hood. 
    if not cleaned_data['name']:
        cleaned_data['name'] = 'Robin Hood'

    return cleaned_data 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2014-01-14T02:36:16.200

假设您有一个具有三个字段 field1、2 和 3 的模型，并且您希望将 field3 设置为 field1 和 field2 的组合，您可以这样编写：

```
class MyModel(models.Model):
    field1 = ...
    field2 = ...
    field3 = ...

    def clean(self):
        #simply set field3 as the value you want, and note that RETURN is NOT NEEDED in this function
        self.field3 = "%s-%s" % (self.field1, self.field2) 
```*

# git - git：从远程存储库中获取所有文件

> ID：14487991
> 
> 赞同：0
> 
> 时间：2013-01-23T19:41:12.740
> 
> 标签：git

老实说，我的背景是 SVN，git 完全让我感到困惑，而且 git 的文档对我来说没有任何意义。

我从同事的一些通信中得知，远程存储库中还有其他目录和文件，这些目录和文件来自他们一直在处理的东西。我在当地看不到他们。我希望我的本地工作空间能够反映所有这些变化。我不知道所有文件的名称——可能有数百个。

类似克隆的东西，但不会抱怨存在本地副本。我已经尝试了各种命令，但无处可去，“致命错误”或“已经是最新的”。

到目前为止，我已经设法覆盖并丢失了一些现有的工作。不知道我是怎么做到的——我认为版本控制不应该让这种情况发生！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-23T19:58:21.007

使用 时`git`，您始终拥有远程仓库的克隆。

粗略的等价物`svn update`是`git fetch`从远程仓库获取所有新提交，后跟 a `git merge remote/master`（或者您可以使用`git pull`执行这两个步骤的命令）。`git merge`在执行or `git pull`(是安全的)之前在本地提交所有更改通常是一个好主意，`git fetch`因为这将尝试将您的更改与远程分支合并，并可能导致冲突。

粗略的等价物`svn commit`是`git push`将您的更改发送到远程仓库并更新对那里的分支头的引用。在进行推送之前，您应该始终进行合并，否则您可能会意外删除同事的更改。不过，您的团队可能有另一个工作流程（将补丁发送给负责集成的单个人员）。

如果您来自`svn`，最容易理解的方法`git`是认为您始终在一个分支上工作，并且与团队其他成员的共享是通过合并您的参考分支或您的参考分支中的参考分支来完成的。

否则，我真的会推荐阅读[Git 书籍](http://git-scm.com/book/)或至少阅读[Git SVN 速成课程](https://git.wiki.kernel.org/index.php/GitSvnCrashCourse)。