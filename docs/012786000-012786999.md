# StackOverflow 问答 12786000-12786999

# java - 如何从javaFX中的webView获取SelectedText

> ID：12786004
> 
> 赞同：7
> 
> 时间：2012-10-08T16:51:58.320
> 
> 标签：java, webview, javafx

我需要从 javaFX 中的 webView 获取选定的文本。我还没有找到任何线索如何在互联网上做到这一点。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-09T10:49:27.530

这可以通过 JavaScript 完成：

```
String selection = (String) webView.getEngine()
                     .executeScript("window.getSelection().toString()");
System.out.println(selection); 
```

您也可能会发现这很有帮助：
[Communicating between JavaScript and JavaFX with WebEngine](https://blogs.oracle.com/javafx/entry/communicating_between_javascript_and_javafx)
[executeScript](http://docs.oracle.com/javafx/2/api/javafx/scene/web/WebEngine.html#executeScript%28java.lang.String%29)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-05-19T15:48:06.803

结合jewelsea提供的解决方案：[https](https://gist.github.com/jewelsea/7819195) ://gist.github.com/jewelsea/7819195 和[通过Javascript在浏览器中获取选定的HTML](https://stackoverflow.com/questions/5083682/get-selected-html-in-browser-via-javascript)：

可以从 JAVAFX Webview 中提取选定的文本和 HTML 源代码：

```
/*
 * To change this license header, choose License Headers in Project Properties.
 * To change this template file, choose Tools | Templates
 * and open the template in the editor.
 */
package SelectInWebview;

import javafx.application.Application;
import javafx.geometry.Insets;
import javafx.geometry.Pos;
import javafx.scene.Scene;
import javafx.scene.control.Button;
import javafx.scene.control.Label;
import javafx.scene.control.ToolBar;
import javafx.scene.layout.VBox;
import javafx.scene.web.HTMLEditor;
import javafx.scene.web.WebEngine;
import javafx.scene.web.WebView;
import javafx.stage.Stage;

public class SelectionHTMLExtractor extends Application {

    public static final String HTML
            = "<p><em>\"Do not judge me by my successes, judge me by how many times I fell down and got back up again.\"</em></p>"
            + "&nbsp;&nbsp&nbsp&nbsp;-&nbspNelson Rolihlahla Mandela";

    public static final String SELECT_TEXT
            = "(function getSelectionText() {\n"
            + "    var text = \"\";\n"
            + "    if (window.getSelection) {\n"
            + "        text = window.getSelection().toString();\n"
            + "    } else if (document.selection && document.selection.type != \"Control\") {\n"
            + "        text = document.selection.createRange().text;\n"
            + "    }\n"
            //            + "    if (window.getSelection) {\n"
            //            + "      if (window.getSelection().empty) {  // Chrome\n"
            //            + "        window.getSelection().empty();\n"
            //            + "      } else if (window.getSelection().removeAllRanges) {  // Firefox\n"
            //            + "        window.getSelection().removeAllRanges();\n"
            //            + "      }\n"
            //            + "    } else if (document.selection) {  // IE?\n"
            //            + "      document.selection.empty();\n"
            //            + "    }"
            + "    return text;\n"
            + "})()";

    public static final String SELECT_HTML
            = "(getSelectionHTML = function () {\n"
            + "      var userSelection;\n"
            + "      if (window.getSelection) {\n"
            + "        // W3C Ranges\n"
            + "        userSelection = window.getSelection ();\n"
            + "        // Get the range:\n"
            + "        if (userSelection.getRangeAt)\n"
            + "          var range = userSelection.getRangeAt (0);\n"
            + "        else {\n"
            + "          var range = document.createRange ();\n"
            + "          range.setStart (userSelection.anchorNode, userSelection.anchorOffset);\n"
            + "          range.setEnd (userSelection.focusNode, userSelection.focusOffset);\n"
            + "        }\n"
            + "        // And the HTML:\n"
            + "        var clonedSelection = range.cloneContents ();\n"
            + "        var div = document.createElement ('div');\n"
            + "        div.appendChild (clonedSelection);\n"
            + "        return div.innerHTML;\n"
            + "      } else if (document.selection) {\n"
            + "        // Explorer selection, return the HTML\n"
            + "        userSelection = document.selection.createRange ();\n"
            + "        return userSelection.htmlText;\n"
            + "      } else {\n"
            + "        return '';\n"
            + "      }\n"
            + "    })()";

    @Override
    public void start(Stage stage) throws Exception {
        HTMLEditor wisdom = new HTMLEditor();
        wisdom.setHtmlText(HTML);

        Label selectedText = new Label();
        Label selectedHTMLSource = new Label();

        Button selectText = new Button("Get TEXT Selection");
        selectText.setOnAction(event -> {
            WebView webView = (WebView) wisdom.lookup("WebView");
            if (webView != null) {
                WebEngine engine = webView.getEngine();
                Object selection = engine.executeScript(SELECT_TEXT);

                if (selection instanceof String) {
                    selectedHTMLSource.setText((String) selection);
                }
            }
        });
        Button selectHTML = new Button("Get HTML Selection");
        selectHTML.setOnAction(event -> {
            WebView webView = (WebView) wisdom.lookup("WebView");
            if (webView != null) {
                WebEngine engine = webView.getEngine();
                Object selection = engine.executeScript(SELECT_HTML);

                if (selection instanceof String) {
                    selectedText.setText((String) selection);
                }
            }
        });

        VBox layout = new VBox(
                10,
                new ToolBar(selectHTML, selectText),
                selectedText, selectedHTMLSource,
                wisdom
        );
        layout.setAlignment(Pos.CENTER);
        layout.setPadding(new Insets(10));

        stage.setTitle("SelectionHTMLExtractor");
        stage.setScene(new Scene(layout));
        stage.show();
    }

    public static void main(String[] args) {
        launch(SelectionHTMLExtractor.class);
    }

} 
```

# r - 与语言 R 匹配以获得职位

> ID：12786005
> 
> 赞同：5
> 
> 时间：2012-10-08T16:52:03.307
> 
> 标签：r, match

我正在使用 match 来获取元素是否在列表中。例如我的清单是：

```
 c("a","b","h","e"...) and so on 
```

如果我想查看元素 h 是否在列表中，我正在以这种方式使用 match：

```
 if ("h" %in% v){do something} 
```

我怎样才能得到它在列表中找到元素的位置？谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T16:55:01.470

如果你想知道位置使用`which`

```
l <- c("a","b","h","e")
which(l=='h') 
[1] 3   # It'll give you the position, 'h' is the third element of 'l' 
```

请注意，这`l`是一个向量，而不是您提到的列表。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-09T14:11:53.793

如果您想知道位置，请使用`match`：

```
l <- c("a","b","h","e")
match("h", l) 
```

在这里不会有任何不同，但通常会快得多。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T16:56:51.870

该`which`函数会告诉您一个项目在向量中的哪个位置“匹配”。将`%in%`返回与其第一个参数长度相同的逻辑向量，并且`if`只会查看第一个逻辑值，因此其自身无法正常工作。你可以这样做：

```
if( any("h" %in& v) ) { do something } 
```

该`any`功能允许您“折叠”结果`%in%`

# android-imageview - 图像在 2.2 上的 ImageView 中意外拉伸

> ID：12786010
> 
> 赞同：2
> 
> 时间：2012-10-08T16:52:15.607
> 
> 标签：android-imageview

我正在尝试在 ImageView 扩展中创建一个动态网格。在 Android 4.0.3 上它看起来不错，但在 2.2 上它在右侧和底部被拉伸，因此我在这些边缘上的单元格看起来两倍大。

这是创建网格的代码：

```
cellheight = Math.round((float) (Math.floor((height - (bordersize * 2) - (linesize * (numrows - 1))) / numrows)));
cellwidth = Math.round((float) (Math.floor((width - (bordersize * 2) - (linesize * (numcols - 1))) / numcols)));
height = bordersize * 2 + (linesize * (numrows - 1)) + cellheight * numrows;
width = bordersize * 2 + (linesize * (numcols - 1)) + cellwidth * numcols;

bitmap = Bitmap.createBitmap(width, height, Bitmap.Config.ARGB_8888);
canvas = new Canvas(bitmap);
setImageBitmap(bitmap);

canvas.drawRect(0, 0, width, height, cellpaint);
canvas.drawRect(0, 0, bordersize, height, borderpaint);
canvas.drawRect(0, 0, width, bordersize, borderpaint);
canvas.drawRect(0, height - bordersize, width, height, borderpaint);
canvas.drawRect(width - bordersize, 0, width, height, borderpaint);

for (int i = 1; i < numrows; ++i)
  canvas.drawRect(bordersize, bordersize + (i * cellheight) - (linesize / 2), width - bordersize, 
    bordersize + (i * cellheight) + (linesize / 2), linepaint);

for (int i = 1; i < numcols; ++i)
  canvas.drawRect(bordersize + (i * cellwidth) - (linesize / 2), bordersize, 
    bordersize + (i * cellwidth) + (linesize / 2), height - bordersize, linepaint); 
```

对于高度和宽度 300、numrows 和 numcols 8、bordersize 8 和 linesize 3，它将高度和宽度重新计算为 293 并制作一个方形网格。但是在 2.2 中，该网格在右侧和底部被拉伸，将边框和线条延伸到几乎另一行/列单元格的大小。

我已经在 ImageView 和包装 LinearLayout 上尝试了 WRAP_CONTENT。我尝试了 setScaleType() 的各种值。我试过 setMaxHeight() 和 setMaxWidth()。我尝试过的任何事情似乎都无法阻止 2.2 的拉伸。

有任何想法吗？

# joomla - Joomla 1.5 中的组件模板

> ID：12786017
> 
> 赞同：0
> 
> 时间：2012-10-08T16:52:31.567
> 
> 标签：joomla, joomla1.5, joomla-extensions

我正在开发一个 Joomla 组件。它们的组件有自己的设计和与网站无关的图像。我应该怎么做才能使组件拥有自己的模板？

目前，组件输出显示在当前模板的一部分中。就像显示主模板的菜单页脚和页眉一样，然后将组件数据添加到一个块中。我希望组件控制所有模板，它应该有自己的页脚标题等。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T16:55:40.840

您可以指定仅调用组件的 tmpl 参数。

你可以试试这样的 - [http://www.example.com/index.php?option=com_component&tmpl=component](http://www.example.com/index.php?option=com_component&tmpl=component)

这个 tmpl 参数调用你当前模板的 component.php。如果没有这个参数，它会正常调用你所有模块的站点。我希望这将清除此参数的工作。

# c# - 从 iframe 的代码隐藏访问父控件

> ID：12786021
> 
> 赞同：1
> 
> 时间：2012-10-08T16:52:42.823
> 
> 标签：c#, asp.net, iframe, code-behind

所以我对非 mvc Web 开发很陌生，而且我遇到了 iFrames 的问题。

在我的主页中，我有一个复选框，它通过 jQuery 显示和隐藏 iframe。在我的 iFrame 代码隐藏中，我有一个方法`loadStuff()`，我只想在 iFrame 可见时运行它。也就是说，我不想只是坚持下去，`page_load`因为如果我这样做，它会在每次刷新主页时尝试运行。

所以我想我只是检查一下主窗口中的复选框是否被选中，如果是，则运行该`loadStuff()`方法。

问题是，我不知道如何从 iFrame 的代码隐藏中访问该复选框。似乎某些变`this.Parent.FindControls()`体会起作用，但我对此没有任何运气。

这是我所拥有的一点点：

主页（我们称之为 mainpage.aspx）：

```
<input type="checkbox" id="showIFrame" onclick="if(this.Clicked) $('#iframe').show(); else $('#iframe').hide();" />

//...

<div id="iframe" style="display:none;">
<iframe runat="server" id="iframeNetSheet" .../></iframe>
</div> 
```

因此，当单击该复选框时，会显示 iFrame。那是我想调用加载函数的时候。到目前为止，它位于 iFrame 的 page_load 中，每次加载父页面时都会点击它。

谁能让我指出正确的方向？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:02:01.653

如果您有`IFrame`一个页面并且该页面被刷新，则 iFrame 也将被刷新（每次）。所以我看不出有任何理由检查父页面复选框的值。
此外，不仅仅是设置 iframe 的可见性（如果设置为可见且`src`url 为空白），还设置了并且仅在选中复选框`src`时才加载（和调用）框架。 代码看起来像这样：`loadStuff()`

```
<input type="checkbox" id="showIFrame" onclick="SetFrame(this.checked);" />

function SetFrame(isChecked)
{
   if(isChecked) 
   {
      $('#iframe').show(); 
      var iframeNetSheet = $('#iframeNetSheet');

      if(iframeNetSheet.attr("src") == "")
         iframeNetSheet.attr("src", "SomeUrl"); //This will invoke page_load on iframe.
   }
   else 
      $('#iframe').hide();
} 
```

默认情况下，在代码中将框架的 url留空`src`。（只能由脚本设置）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:22:37.127

我建议您首先将 iFrame`src`设置为“about:blank” - 然后当您单击复选框时，您设置了正确的来源。像这样的东西...

```
<script type="javascript">
  $(document).ready(function() {
    $("#showIFrame").click(function() {
      var frame = $("#iframeNetSheet");
      if ($("#showIFrame").prop("checked")) {
        frame.show();
        if (frame.prop("src") == "about:blank") {
          frame.attr("src", "newpage.aspx");
        }
      } else {
        frame.hide();
      }
    });
  });
</script>
<input type="checkbox" id="showIFrame" />
<iframe runat="server" id="iframeNetSheet" style="display:none;"/></iframe> 
```

[现场 JSFiddle 演示](http://jsfiddle.net/tyDxa/2/)

（在做了所有这些之后，因为我对 jQuery 不是 100% 有信心——我意识到这也正是 Magnus 从一开始就说的）

**编辑：**正如 Marcus 所指出的那样，没有必要将`src`背面重置为“about:blank”，因此相应地更新了代码（并提高了效率）。

# php - MySQL 多条件预约系统

> ID：12786035
> 
> 赞同：3
> 
> 时间：2012-10-08T16:53:49.393
> 
> 标签：php, mysql

我正在编写一个用于跟踪约会的 PHP/MySQL 应用程序，并且我坚持根据是否选择了任意数量的条件来定位下一个可用的约会。

```
CREATE TABLE IF NOT EXISTS `appointments` (
`appointmentID` int(9) unsigned NOT NULL AUTO_INCREMENT,
`patientID` int(9) unsigned NOT NULL,
`apptTitle` varchar(50) NOT NULL,
`apptDate` date NOT NULL,
`apptTime` time NOT NULL,
`apptLength` int(4) NOT NULL,
`apptStatus` varchar(25) NOT NULL,
`physician` int(9) unsigned NOT NULL,
`apptType` varchar(30) NOT NULL,
`apptInvoice` varchar(10) NOT NULL,
`apptNotes` varchar(1000) NOT NULL,
`apptLocation` varchar(25) NOT NULL,
`apptReminder` int(4) NOT NULL,
 PRIMARY KEY (`appointmentID`),
 KEY `patientID` (`patientID`),
 KEY `physician` (`physician`),
 KEY `apptStatus` (`apptStatus`),
 KEY `apptLocation` (`apptLocation`),
 KEY `apptType` (`apptType`)
 ) ENGINE=InnoDB  DEFAULT CHARSET=utf8 AUTO_INCREMENT=4 ; 
```

*旁注：*您会注意到我的类型、位置、状态字段是 varchar，并且它们链接到查找表。因此，我存储的是实际值，而不是每个项目的 ID（因此每个查找表只是作为 PK 的字段值，没有 ID 列）。我这样做是为了减少将来的连接，但我知道这有点非规范化。如果这是错误的方法，请随时告诉我，我只是没有找到压倒性的证据一种或另一种方式，除了知道如果我有点反规范化以后我不必做这些连接。存在“更新”逻辑，因此如果进行更改，它将更新约会表中的值。

这里的目标是显示所有可用的预约时段（这些是 15 分钟的时段，例如上午 12:00-12:14:59、上午 12:15:00-12:29:59 等）。默认情况下，我只会显示接下来 X 天（可能是 14 天）的所有预约空档，没有任何限制。但是，如果患者想看特定的医生，我想限制在此范围内，或者如果医生只需要咨询，我可以将位置限制在咨询室而不占用检查室。或者，我们知道需要安排 X 个月的后续行动，所以我可以在该时间过去后的几天内开始展示。或者，患者只能在周末或下午 5 点之后进行预约。

根据我的阅读，我需要某种约会“空档”表，但我不确定如何构建该表，以便将其与现有约会进行比较并找到我的空档。

我对 MySQL 有一定的了解，而且我总是在迎接挑战，但我似乎无法理解我将如何做到这一点。我一直在寻找类似的问题，但似乎没有一个真正涵盖我正在寻找的定制量，而且我无法弄清楚如何调整该代码以使其适合我。希望有人可以帮助我了解我需要用这个想法去哪里！

预先感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:32:45.593

我不认为计划未来的“减少连接”是一个很好的理由。您应该更担心使用“更新逻辑”（为您或其他人）创建的未来头痛。就像您说的那样，类型、位置和状态等字段可能具有与您的插槽查询相关的元数据（类型“需要 X 个月内跟进”，位置“是考试室”），因此无论如何您最终都需要加入. 即使只是为了找到某个时间段的可用位置，如果我理解正确的话，你肯定需要加入。

我猜一个“插槽”就像一个 5 分钟的时间跨度？例如。12:00-12:04:59、12:05-12:09:59 等？

就像 Alex 上面所说的那样，您需要一个“所有可能的插槽”表来左连接（临时或非临时）。

我可能会在磁盘上永久创建它，因为它被引用了很多。这听起来很浪费，但另一种选择是每次动态生成它，这也不是很好。

然后说找到医生可用的插槽，例如：

```
SELECT a.* 
FROM slots AS a
LEFT JOIN appointments AS b
ON a.startDate BETWEEN b.apptDate AND DATE_ADD(b.apptDate,INTERVAL b.apptTime MINUTE)
AND b.physician=1234 
WHERE b.appointment IS NULL 
```

如果这听起来像是在您所追求的正确轨道上，我可以尝试帮助您解决其他更复杂的问题。

# vba - 自动超链接

> ID：12786036
> 
> 赞同：2
> 
> 时间：2012-10-08T16:53:51.530
> 
> 标签：vba

我正在尝试创建一个宏，它将根据活动单元格的内容创建一个超链接。

假设在单元格 A1 中，有对单元格 B29 的引用（即“=B29”），

如果我的活动单元格是 A1，我希望在运行宏时将“=B29”替换为“=HYPERLINK("#"&CELL("address",B29),B29)"。

我希望这个宏只适用于活动单元格。这可能吗？

如果您能帮助我，我将不胜感激。

我尝试了以下但它不工作：

```
Sub hyperlinktocell()
    Dim num1 As Integer
    Dim celladress As String

    num1 = Len(ActiveCell.Formula) - 1
    celladdress = Right(ActiveCell.Formula, num1)
    ActiveCell.Formula = "=HYPERLINK(""#""&CELL(""address"",celladdress,celladdress)"
End Sub 
```

我是 VBA 新手，花了将近 2 个小时才获得上述权利，但没有任何成功。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:01:14.490

既然你已经完成了几乎所有的工作，我会向你发布我所拥有的：

```
Private Sub test()
    Dim s As String
    s = Right(ActiveCell.Formula, Len(ActiveCell.Formula) - 1)
    ActiveCell.Formula = "=HYPERLINK(""#""&CELL(""address""," & s & ")," & s & ")"
End Sub 
```

如您所见，除了少用一个变量外，我们还有相同的解决方案。请注意最后一行我如何连接字符串。在您的代码中，所有这些变量都包含在双引号内，这使它们成为文本。然后 Excel 抱怨这不是该属性的有效值，这是正确的。

# xcode - 从 Mac 上的 git 存储库中删除一个奇怪的文件

> ID：12786037
> 
> 赞同：3
> 
> 时间：2012-10-08T16:54:05.367
> 
> 标签：xcode, git, terminal, repository, openears

我最近尝试将 OpenEars 框架添加到我的 xcode 项目中，当我尝试将我的项目提交到存储库时，我收到以下错误：

> 错误：pathspec '"Framework/Icon\r"' 与 git 已知的任何文件都不匹配。

我试图使用 xcode 中的导航树找到这个文件，但它不存在。磁盘上有一个 0 字节的物理文件（这很可能是问题所在），我尝试删除它而没有影响。

我尝试使用终端导航到该文件并使用 git rm Icon\r 但由于名称中的 \ 它无法找到该文件：

```
$ git rm Icon\\r
fatal: pathspec 'Framework/OpenEars.framework/Icon\r' did not match any files 
```

有没有人遇到过类似的问题或知道如何删除此文件，因为它阻止我推送任何更改。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T17:20:35.613

尝试`cd`进入目录，然后开始输入以下内容，直到`I`进入`Icon\r`. 然后按 Tab 键让终端自动完成路径的其余部分。它看起来像这样：

`git rm Framework/OpenEars.framework/Icon^M`

注意：M 后面有一个空格。输入此完整路径似乎不起作用：只允许终端为您自动完成路径。

我有：

```
MacPro:OpenEarsDistribution mdouma46$ git rm Framework/OpenEars.framework/Icon^M 
'm 'Framework/OpenEars.framework/Icon
MacPro:OpenEarsDistribution mdouma46$ git status
# On branch master
# Changes to be committed:
#   (use "git reset HEAD <file>..." to unstage)
#
#   deleted:    "Framework/OpenEars.framework/Icon\r"
# 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-26T11:57:41.843

我刚刚遇到了同样的问题，发现从本地文件系统中删除文件后，以下内容对我有用：

```
cd Your/Project/Directory
git add -u Path/To/Offending/File/Icon$'r' 
```

然后，这允许我从 git 存储库中提交和删除文件。

# jquery - Infragistics MVC Helper 自定义列

> ID：12786040
> 
> 赞同：4
> 
> 时间：2012-10-08T16:54:24.843
> 
> 标签：jquery, asp.net-mvc, infragistics, ignite-ui, iggrid

我目前正在使用 MVC4 中的 ASP.NET MVC 帮助程序和 Infragistics igGrid 控件，并且正在寻找一种插入自定义列的方法，以便为 CRUD 功能实现 AJAX 调用。我发现的唯一解决方案涉及公开在当前架构中不是选项的实体。本质上，我只需要知道如何添加一个可以包含简单 href 的新列来调用引用特定行上的模型的现有 REST API。

这是我到目前为止所拥有的...

```
<div class="queue-grid">
@( Html.Infragistics().Grid(Model).Columns( c =>
 {
     c.For(m => m.DateSubmitted).HeaderText...
     c.For(m => m.RequestorName).HeaderText...
     c.For(m => m.OrganizationName).HeaderText(...
     c.For(m => m.CategoryName).HeaderText(...
     c.For(m => m.DesiredCompletionDate).HeaderText(...
     c.For(m => m.ChargeCode).HeaderText(...
     c.For(m => m.ApprovingManagerName).HeaderText(...
     c.For(m => m.Description).HeaderText(...
     c. //Edit function
     c. //Delete function
.... 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:22:17.243

我会使用列模板： http: [//www.infragistics.com/products/jquery/sample/grid/basic-column-template](http://www.infragistics.com/products/jquery/sample/grid/basic-column-template)

```
column.For(x => x.ProductID).HeaderText("Delete").Template("<a href=javascript:DeleteProduct('${ProductID}');>Delete</a>").Width("150"); 
```

尝试将其作为您的删除列。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T07:07:24.847

在即将发布的 jQuery 控件（2012.2 - 即将推出）中，您将能够定义一个未绑定的列，您可以使用它来解决您的问题。

@Boone 的建议是绝对正确的 - 唯一的区别是，您可以定义一个空白列，而不是数据绑定列（此建议中的 ProductID），它将在网格中公开该列的值。

然后，您将能够为该空白（未绑定数据）列定义一个模板，您可以在其中放置链接、按钮或您喜欢的任何其他内容。

# performance - Umbraco XSLT 性能因素

> ID：12786042
> 
> 赞同：2
> 
> 时间：2012-10-08T16:54:30.390
> 
> 标签：performance, xslt, razor, umbraco

在 Umbraco CMS 中。有没有办法测试并查看在 XSLT 中提取某个 DocType 的节点需要多长时间？是否有 XSLT 计时器或任何可以做到这一点的东西。

我们正在尝试测试更快使用的方法。Razor 或 XSLT 满足我们的需求。在 Razor 中我们可以获得时间，因为它本质上是 C#，但如果 XSLT 渲染得更快，我们希望使用它来代替。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T08:54:41.967

如果您将查询字符串附加`?umbdebugshowtrace=true`到您的页面，您将获得页面上各种进程的堆栈跟踪 - 因此您将能够看到您的 xslt 何时处理。

![在此处输入图像描述](../Images/4c72776b5f86e84290248875f02a7392.png)

您还可以使用[本指南](https://stackoverflow.com/questions/3809618/umbraco-cms-net-logging-errors-loading-xslt-user-controls)写入您的 umbracolog 并将其用作粗略计时器（显然在写入中存在一些滞后）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-09T06:47:00.603

好吧，在我看来**，“XSLT 渲染得更快”**是相当相对的事情。事实上，如果您考虑在 umbraco 页面上呈现 100 万条记录，那么当您使用 XSLT 和 Razor 进行测试时，页面负载只有微小的差异。

旁注.....这有利于您在两者之间进行选择；让您在两者之间进行选择的不是速度问题，而是需要考虑以下事项。

1.  XSLT 在没有 RAZOR 的时候很有名。
2.  与 XSLT 相比，Razor 更容易（更容易）使用。
3.  Razor 是通用的，asp.net MVC 开发者可以采用 RAZOR 的 umbraco 开发。
4.  剃须刀是未来。
5.  与 XSLT 相比，Razor 更具可读性和可维护性。

另请参阅[https://softwareengineering.stackexchange.com/questions/104361/is-razor-or-xslt-better-for-my-project](https://softwareengineering.stackexchange.com/questions/104361/is-razor-or-xslt-better-for-my-project)。

我的投票.. 如果您正在开始一个新项目，请花一些时间学习 RAZOR，从长远来看，您会收获很多。

谢谢， 吉格

# java - 开源 Java 报告 + 图表

> ID：12786045
> 
> 赞同：0
> 
> 时间：2012-10-08T16:54:34.200
> 
> 标签：java, graph, reporting

我需要一些关于开源框架的建议来生成包含图表的报告（pdf、doc）。

很久以前我用过 JasperReport，我猜它还活着，但不知道现在是否有更好的选择。

如果框架支持报告/图表格式的更改，那就太好了。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:23:01.223

Innovent Solutions对[Birt](http://www.innoventsolutions.com/birt-review.html)（Eclipse 基金会）、[JasperReports](http://www.innoventsolutions.com/jasper-review.html)和[Pentaho](http://www.innoventsolutions.com/pentaho-review.html)（[比较矩阵）进行了一些](http://www.innoventsolutions.com/birt-jasper-pentaho-comparison-matrix.html)[评论](http://www.innoventsolutions.com/open-source-reporting-review-birt-jasper-pentaho.html)。也许你可以从那里开始。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-02T15:46:56.493

看看**Primefaces**。它是一个 JSF 扩展库。我在那个库中看到的灵活性令人难以置信。很光滑。结合POJO，它真正的快速而且非常非常强大。

Ajax、jQuery、JS、HTML/CSS 是其中的一部分。

查一下

# robots.txt - 阻止谷歌抓取每个页面上的特定链接

> ID：12786047
> 
> 赞同：0
> 
> 时间：2012-10-08T16:54:37.353
> 
> 标签：robots.txt, google-custom-search

当我第一次开始使用 LESS CSS 开发我的网站时，我在判断上犯了一个愚蠢的错误。使用 LESS，如果您在 URL 末尾包含 #!watch，您可以看到实时更新。因此，作为一个适当的懒惰开发人员，我在我的开发页面上制作了一个只有我知道的按钮，它会在当前 URL 后面加上 #!watch。

但是，Google 将该 href 视为合法链接，现在我的所有页面都被索引了两次 - 一次用于“正常”页面，一次是在 URL 上附加了 #!watch。

我的问题是如何从 Google 索引中删除 !#watch？robots.txt 行可以做到这一点吗？这真的不是什么大问题，但我也在内部使用谷歌自定义搜索，所以当用户在我的网站内搜索时，我为相同的内容提供了太多的结果。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-11T17:23:12.590

我要做的是设置一个 sitemap.xml 文档，其中每个违规链接都设置为过期。我编写了一个简短的 python 脚本来遍历每一行（大约 18,000 个链接）并输出格式化的 xml。看起来像：

```
<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
    <url>
        <loc>http://oq.totaleclips.com/mpa/The_Rise_of_the_Guardians_The_Video_Game_(Game)#!watch</loc>      
        <expires>2012-10-08</expires>
    </url>
   ....... (many more url entries)
</urlset> 
```

请注意`<expires>`，如果不是其他搜索引擎，Google 会读取该标签作为索引的截止日期。显然，它们仍会出现 30-60 天，然后将不再作为搜索结果返回。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:58:22.137

您可以使用规范链接元标记。它告诉搜索引擎真正的页面路径是什么，因此应该只触发一次索引，尽管路径上附加了任何哈希标签或查询字符串。

[http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html](http://googlewebmastercentral.blogspot.com/2009/02/specify-your-canonical.html)

好像：

```
<link rel="canonical" href="http://www.example.com/realPagePath/" /> 
```

# c - 错误：在 C 中无效使用无效表达式

> ID：12786053
> 
> 赞同：2
> 
> 时间：2012-10-08T16:55:01.387
> 
> 标签：c

我收到关于以下函数的“无效使用无效表达式”错误：

```
void remove_data(char* memory, char* bitmap, int pos)
{
    int i;

    i = (int)test_bit(bitmap, pos-1);

    if(i != 0)
    {
        memory[pos-1] = NULL;
        toggle_bit(bitmap, pos-1);
    }
} 
```

现在，从我在其他线程上读到的有关此类似问题的内容中，当程序员在函数中使用将生成输出的某些内容时，会弹出此错误。但是，我没有看到在我编写的代码中会导致什么。

编辑添加：

其中使用的切换位函数也是 void 类型并且不返回值。

```
void test_bit(char * bitmap, int pos)
{
    int bit;

    bit = bitmap[pos/8] & (1<<(pos%8));
    printf("%d\n", &bit);
} 
```

我在 test_bit 中评论了 printf 行，但错误仍然存​​在。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T16:58:10.780

> 但是，我没有看到在我编写的代码中会导致什么。

我也是，因为我认为您没有发布相关代码。无论如何，我认为这可能是你的问题：

```
i = (int)test_bit(bitmap, pos-1); 
```

请向我们出示 的签名`test_bit`。我猜它会返回`void`，或者您已经在某处转发并意外写道：

```
void test_bit(char*, int); 
```

由于函数返回`void`（即什么都没有），因此您不能继续将返回值（什么都没有）转换`int`为您正在执行的操作，这没有任何意义并且是非法的。

编辑：您已经`test_bit`在实际上声明为 return的评论中进行了验证`void`，所以这是您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T16:59:47.980

由于 test_bit 是无效的，您不能使用它的返回值（如`i = (int)test_bit(bitmap, pos-1);`）——没有返回值*。*

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:05:39.957

你写了

```
 i = (int)test_bit(bitmap, pos-1); 
```

为什么要有演员表？

当函数是时似乎有点愚蠢

```
void test_bit(char * bitmap, int pos)
{
    int bit;

    bit = bitmap[pos/8] & (1<<(pos%8));
    printf("%d\n", &bit);
} 
```

你怎么能将 void 转换为整数？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2019-12-09T03:39:25.820

**明显** 的解决方案：不要分配函数返回 void 的结果。

**非显而易见的**解决方案：不要嵌套函数调用，并且您不太可能会查看所有错误的位置，认为编译器已损坏。

```
#include <stdio.h> //:for: printf(...)

void YOUR_MISTAKE_ACTUALLY_HERE();
void  MyFunc( void );
void* WRAPPED_MyFunc( int, int, int );

int main( void ){
    printf("[BEG:main]\n");

    void* HW = NULL;
    HW = WRAPPED_MyFunc(  //:<---So you check this, but it looks fine.
        1
    ,   YOUR_MISTAKE_ACTUALLY_HERE()
    ,   3
    );; //:<--- compiler says "Invalid Use Of Void Expression" Here.

    if( HW ){ /** NOOP **/ };

    printf("[END:main]\n");
} 

    void YOUR_MISTAKE_ACTUALLY_HERE(){ }

    //:Pretend this function is fetched from DLL.
    //:Casting all DLL functions initially to void(*pfn)void
    //:in a lookup table, then re-casting later.
    void MyFunc( void ){

        return;

    }//[;]//

    typedef  
        void* 
        (* MyFunc_TYPEDEF)(            

            int a
        ,   int b
        ,   int c

        );

    void*
    WRAPPED_MyFunc(

        int a
    ,   int b
    ,   int c

    ){

               MyFunc_TYPEDEF
        fun =( MyFunc_TYPEDEF)
               MyFunc;

        void* ret=( fun(

            a
        ,   b
        ,   c

        ));

        return( 
            (void*)
            ret 
        );;

    }//:Func 
```

# database - 在 Scala 中功能性地处理数据库游标

> ID：12786054
> 
> 赞同：3
> 
> 时间：2012-10-08T16:55:03.637
> 
> 标签：database, scala, functional-programming, cursor

当我需要使用 JDBC 驱动程序从 PostgreSQL 数据库中读取数百万行数据库时，我总是使用游标，否则我会得到 OutOfMemoryError。这是我使用的模式（伪代码）：

```
begin transaction
execute("declare cursor...")
while (true) {
  boolean processedSomeRows = false
  resultSet = executeQuery("fetch forward...")
  while (resultSet.next()) {
    processedSomeRows = true
    ...
  }
  if (!processedSomeRows) break
}
close cursor
commit 
```

这是我想出在 Scala 中实现的更“功能性”的等价物：

```
begin transaction
execute("declare cursor...")

@tailrec
def loop(resultSet: ResultSet,
         processed: Boolean): Boolean = {
  if (!resultSet.next()) processed
  else {
    // Process current result set row
    loop(resultSet, true)
  }
}

while (loop(executeQuery("fetch forward..."), false))
  ; //Empty loop

close cursor
commit 
```

我知道这是人为的，但是有没有更好的方法而不诉诸可变性？如果我尝试在 Haskell 中执行此操作，我可能会想出一个涉及 monad 的解决方案，但我不想让我的思绪落入那些“曲折的小段落，都一样”，因为它可能永远不会回来......

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:13:38.477

这是我想出的 Scala 解决方案：

```
@tailrec
def processCursor(query: => ResultSet)(process: ResultSet => Unit) {
  @tailrec
  def loop(resultSet: ResultSet,
            processed: Boolean): Boolean = {
    if (!resultSet.next()) processed
    else {
      process
      loop(resultSet, true)
    }
  }
  if (loop(query, false)) processCursor(query)(process)
} 
```

像这样称呼它：

```
begin transaction
execute("declare cursor...")

processCursor(statement.executeQuery("fetch forward...")) {
  resultSet =>
  // process current row of the ResultSet
}

close cursor
commit 
```

如何改进？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-03T07:31:32.087

基于@Ralph 答案的替代方法：

```
 def processCursor[T](resultSet: ResultSet)(process: ResultSet => T) = {
    @tailrec
    def loop(seq: Seq[T], resultSet: ResultSet): Seq[T] = {
      if (resultSet.next()) loop(seq :+ process(resultSet), resultSet)
      else seq
    }
    loop(Seq.empty, resultSet)
  } 
```

# c# - 如何在 .NET 4.0 中管理原始数据（比特流或字节流）？

> ID：12786056
> 
> 赞同：1
> 
> 时间：2012-10-08T16:55:10.817
> 
> 标签：c#, .net, c#-4.0, .net-4.0, io

我的 C# .NET 4.0 应用程序需要访问文件系统中的数据，并以比特流或字节流的形式访问它们。我需要的是以下内容：

*   将一个数据块拆分为两个连续的数据块。
*   通过将一个附加到另一个来合并两个数据块。
*   访问字节或位。
*   将数据块存储在文件系统中。
*   从文件系统加载数据块。

就是这样。在 .NET 4.0 中执行此操作的最佳做​​法是什么？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:05:36.380

开始阅读：[C# Input/Output Classes Simplified](http://ondotnet.com/pub/a/dotnet/2002/08/05/io.html?page=5)

# spring - 由于未加载 applicationContext.xml，Spring 多模块无法使用 m2eclipse 构建部署

> ID：12786060
> 
> 赞同：3
> 
> 时间：2012-10-08T16:55:21.517
> 
> 标签：spring, m2eclipse, multi-module

基本上我有一个多模块应用程序：

数据业务网络应用

在 web-app 部分有带有此配置的**web.xml** 用于加载不同的 applicationContext.xml 配置文件：

```
<context-param>
    <param-name>contextConfigLocation</param-name>
    <param-value>classpath*:META-INF/spring/applicationContext.xml</param-value>
</context-param> 
```

[...]

```
<!-- Handles Spring requests -->
<servlet>
    <servlet-name>empp-v2-web</servlet-name>
    <servlet-class>org.springframework.web.servlet.DispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>WEB-INF/spring/webmvc-config.xml</param-value>
    </init-param>
    <load-on-startup>1</load-on-startup>
</servlet> 
```

我的其他两个模块各有一个 META-INF/spring/applicationContext.xml。在 webmvc-config.xml 中，我只对带有 @Controller 注释的类进行组件扫描，同时在 applicationContext 中，我扫描除了控制器之外的基本包中的所有内容。

问题是当我尝试在控制器中自动装配 bean 时，我总是得到 NoSuchBeanDefinitionException。这会在 Eclipse 中配置的服务器上使用“添加和删除”将应用程序作为爆炸项目运行。如果我在同一台服务器上手动构建和部署应用程序，则应用程序可以工作并且 bean 会自动装配。m2eclipse 需要一些特殊的配置吗？对我来说，在这种情况下似乎没有加载 applicationContext.xml。如何验证 m2eclipse 是否在正确的位置处理资源文件？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T08:22:20.360

似乎 m2eclipse 和在类路径中加载多个应用程序上下文存在一些问题。对我来说唯一的解决方案是将所有 spring 配置放在主 Web 应用程序应用程序上下文中。这个解决方案既可以在打包的 EAR 中运行，也可以作为在 eclipse 中运行的扩展应用程序运行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T09:18:43.497

你安装了[m2e-wtp](https://www.eclipse.org/m2e-wtp/)吗？你要部署到哪台服务器上？您应该将通过 WTP 部署的爆炸式战争的内容与战争档案的内容进行比较，看看是否缺少某些东西。

# php - 打印具有唯一名称的结果

> ID：12786067
> 
> 赞同：0
> 
> 时间：2012-10-08T16:56:06.470
> 
> 标签：php, sql

我有以下功能：

```
function getStoresDisplay($data, $page_number, $nb_display) {
$nb_stores = $data['nb_stores'];
$list = $data['list'];
$current_address = $data['address'];

if($current_address=='') $current_address_display = '&nbsp;';
else $current_address_display=$current_address;

$display .= '<ul data-role="listview" data-theme="d">';
$display .= '<li data-role="list-divider" data-theme="a">'.$current_address_display.'<span class="ui-li-count">'.$nb_stores.'</span></li>';
for($i=0; $i<count($list); $i++) {
    $id = $list[$i]['id'];
    $name = $list[$i]['name'];
    $logo = $list[$i]['logo'];
    $address = $list[$i]['address'];
    $distance = $list[$i]['distance'];
    $created = $list[$i]['created'];

    $display .= '<li><a href="javascript:" class="displayStoreDetails" id="'.$id.'">';
    if($logo!='') $display .= '<img src="'.$logo.'" style="margin-top:18px;">';
    $display .= '<h3>'.$name;
    $display .= '</h3>';
    //if($current_address!='') $display .= '<span class="ui-li-count"><font color="red"><small>'.ceil($distance).' '.$GLOBALS['distance_unit'].'</small></font></span>';
    $display .= '<p>'.$address.'</p>';
    if($current_address!='') $display .= '<p><small>Dista da te: </small><font color="red"><small>'.ceil($distance).' '.$GLOBALS['distance_unit'].'</small></font></p>';
    $display .= '</a></li>';
}
$display .= '</ul><br>';

$display .= '<div data-role="controlgroup" data-type="horizontal" data-theme="a" style="text-align:right;" >';
    if($page_number>1) $display .= '<a href="javascript:" id="displayStoresListNextPreviousBtn" page_number="'.($page_number-1).'" data-role="button" data-icon="arrow-l" data-theme="d">Previous</a>';
    $display .= '<a href="javascript:" data-role="button" data-theme="d"><span id="pageNumberReload">'.$page_number.'</span></a>';
    if($nb_stores>($page_number*$nb_display)) $display .= '<a href="javascript:" id="displayStoresListNextPreviousBtn" page_number="'.($page_number+1).'" data-role="button" data-icon="arrow-r" data-theme="d">Next</a>';
$display .= '</div>';

return $display; 
```

我希望它只打印具有唯一名称（`$name = $list[$i]['name'];`）的结果。我在不同的类别中有相同的项目，所以我希望它不应该打印具有相同名称的重复项目。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T16:59:50.810

尝试

```
$unique_names = array();
for($i=0; $i<count($list); $i++) {
  if (in_array($list[$i]['name'], $unique_names)) { continue; }
  $unique_names[] = $list[$i]['name'];
  ... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:00:00.100

替换您的以下代码：

```
for($i=0; $i<count($list); $i++) {
    $id = $list[$i]['id'];
    $name = $list[$i]['name']; 
```

对于这个：

```
$names = array();
for($i=0; $i<count($list); $i++) {
    $id = $list[$i]['id'];
    $name = $list[$i]['name'];
    if (in_array($name,$names)) {
       continue;
    }
    $names[] = $name; 
```

这将从循环中跳过重复的条目并执行您想要的操作。

# c++ - glm VECTORIZE2_VEC 重新定义 XCode 警告

> ID：12786070
> 
> 赞同：0
> 
> 时间：2012-10-08T16:56:12.577
> 
> 标签：c++, xcode, glm-math

我只在 XCode 中不断收到有关重新定义 glm 中的某些宏的警告。这不是一个大问题，但我发现警告很烦人。

如果我在罪魁祸首宏上放置一个#ifndef 块，但整个系统将无法工作？我将它们包含在一个静态库中，该库链接到一个也包含它们的应用程序。我虽然这可能是问题，所以我将它从两者之一中删除，看看它是否有帮助。它没有。

在 Windows 上使用 mingw g++ 时不会出现此警告，但在 Xcode 4 中会出现此警告。我使用的是 glm 版本 0.9.3.4。

警告：

```
"VECTORIZE2_VEC" redefined
This is the location of the previous definition 
```

这重复了数百次。

罪魁祸首代码（取自 glm 文件 _vectorize.hpp）：

```
#define VECTORIZE2_VEC(func) \
template <typename T> \
GLM_FUNC_QUALIFIER detail::tvec2<T> func( \
    detail::tvec2<T> const & v) \
{ \
    return detail::tvec2<T>( \
        func(v.x), \
        func(v.y)); \
} 
```

还有一些其他的宏与这个非常相似。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:50:04.433

根据上面的评论，您似乎有 3 个选项：

1.  忍受编译警告

2.  更改您的 VECTORIZE2_VEC 宏定义相对于 #include 的位置，因为 VECTORIZE2_VEC 的其他定义没有将其包装在 #ifndef 中（这会导致编译警告）

3.  考虑到它已经定义，考虑是否真的需要再次#define。

选项 1 没问题，但是如果您有“无编译警告”要求，这实际上是一件好事，那么您将不得不选择选项 2（我认为这可能会变得难以维护）或 3。

要实现选项 2，您需要在最初定义宏的包含***之后***，但在需要它的其他 #include***之前定义宏。***如果您仅通过#include 一个文件获得原始定义和编译错误，这可能是不可能的，在这种情况下您不走运。

假设 file1.h 有原始的 VECTORIZE2_VEC 定义，而 file2.h 需要该定义并在没有它的情况下导致编译错误，以下可以解决问题并且没有错误和警告：

```
#include <file1.h>

#ifdef VECTORIZE2_VEC 
  #undef VECTORIZE2_VEC 
#endif
#define VECTORIZE2_VEC(func) ....

#include <file2.h>

// ... 
```

# ios - 如何在 iOS 6 上的 Safari 中获取此栏？

> ID：12786071
> 
> 赞同：6
> 
> 时间：2012-10-08T16:56:12.087
> 
> 标签：ios, mobile-safari, ios6

顶部会显示此栏，其中包含应用程序的图标和 App Store 上的链接。我在几个网站上看过它，我认为这是 iOS 6 的一部分。关于如何让它显示的任何想法？

![顶部的酒吧](../Images/7f94b69e25b7e5bd6a382c2d945e7f34.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T16:58:59.507

这是 iOS6 中出现的“智能横幅”，您可以查看例如[Apple 文档中的](http://developer.apple.com/library/ios/#documentation/AppleApplications/Reference/SafariWebContent/PromotingAppswithAppBanners/PromotingAppswithAppBanners.html)[此帖子](http://firebrand-media.com/blog/article/creating_smart_app_banners_for_ios_6)或页面以了解如何创建它们

基本上，您需要做的就是为`<meta>`您的页面添加一个具有特定格式的标签：

```
<meta name="apple-itunes-app" content="app-id=YOUR_APP_ID"> 
```

# c# - 如何使用 C# ASP.Net 中的元素 ID 将密钥发送到网站？

> ID：12786073
> 
> 赞同：2
> 
> 时间：2012-10-08T16:56:17.403
> 
> 标签：c#, asp.net, html-agility-pack

在以下应用程序中，我使用 HTML 敏捷包从给定的 url 中提取 HTML 文档。现在我需要知道如何使用 HTML 文档中的元素 ID 并在字段中输入文本，最后点击 SUBMIT 按钮提交表单。

```
protected void Button1_Click(object sender, EventArgs e)
{
    string Url = "https://something.com/login.asp"; 
    HtmlWeb web = new HtmlWeb(); 
    HtmlAgilityPack.HtmlDocument doc = web.Load(Url);
} 
```

当前的应用程序使 Web 数据输入自动化。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-12T18:01:42.570

```
protected void Button1_Click(object sender, EventArgs e)         
{
    IWebDriver driver = 
        new InternetExplorerDriver(@"C:\.....\IEDriverServer_Win32_2.25.2"); 

    driver.Navigate().GoToUrl("https://website.com/login.asp");

    // Find the text input element by its name
    // username

    IWebElement name_ID = driver.FindElement(By.Name("name_ID"));
    name_ID.SendKeys("xyzw");

    // password
    IWebElement pwd_PW = driver.FindElement(By.Name("pwd_PW"));
    pwd_PW.SendKeys("fasdfasfdasdf");

    // submit login form
    IWebElement sSubmit = driver.FindElement(By.Name("submit"));
    submit.Submit();
    System.Threading.Thread.Sleep(5000);
    driver.Quit();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:29:02.827

HtmlAgilityPack 不能那样工作。您只是持有一个表示 HTML 文档中节点的数据结构，而不是托管 Web 浏览器或客户端的实例。

解决方法是遍历 HtmlDocument 实例并找到正确的`<form>`元素，然后提取适当的子`<input />`元素。您需要创建自己的 HttpWebRequest 对象并`RequestStream`使用适当编码的键/值对手动填充它（假设它是 POST 表单而不是 GET 表单）。

如果您要提交的表单是静态的并且不会更改，那么您根本不需要使用 HtmlAgilityPack，只需将表单名称和值硬编码到您的 HttpWebRequest 中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:45:27.707

我正在做类似的事情，但我正在手动获取页面 html。

```
// do webrequest stuff and return raw html
string html = DemoDoHttpGet(url, cookieContainer);

// I'm hitting an asp.net page so I have to repeat a bunch of values back to the server
// key is the "name" attribute of an element i want to find in the html
// i gathered these manually by watching a normal exchange with fiddler
var fields = new Dictionary<string, string>();
fields.Add(System.Web.HttpUtility.UrlDecode("__LASTFOCUS"), string.Empty);
fields.Add(System.Web.HttpUtility.UrlDecode("__EVENTTARGET"), string.Empty);
fields.Add(System.Web.HttpUtility.UrlDecode("__EVENTARGUMENT"), string.Empty);
fields.Add(System.Web.HttpUtility.UrlDecode("__VIEWSTATE"), string.Empty);
fields.Add(System.Web.HttpUtility.UrlDecode("__EVENTVALIDATION"), string.Empty);
fields.Add(System.Web.HttpUtility.UrlDecode("ctl00%24ContentPlaceHolder1%24Login1%24LoginButton"), string.Empty);

// this method searches the html for elements with the given names and updates
// the value for each item in the field collection with the value sent from the server
Scraper.GetFieldValues(fields, html);

/* looks kind of like this

        var doc = new HtmlAgilityPack.HtmlDocument();
        doc.LoadHtml(html);

        var names = new List<string>();
        foreach (var ditem in fields)
        {
            names.Add(ditem.Key);
        }

        foreach (var nitem in names)
        {
            // find items, read value

            string xpath = string.Format("//*[@name=\"{0}\"]", (nitem));
            var nodes = doc.DocumentNode.SelectNodes(xpath);

            // if node found read whatever attribute is appropriate,
            // write value back to fields collection

*/

// here i'm manually providing values for login username/password
fields.Add(System.Web.HttpUtility.UrlDecode(
    "ctl00%24ContentPlaceHolder1%24Login1%24UserName"), "my@email.aaa");
fields.Add(System.Web.HttpUtility.UrlDecode(
    "ctl00%24ContentPlaceHolder1%24Login1%24Password"), "mypassword");

// another webrequest to post back to the server

var request2 = (HttpWebRequest)WebRequest.Create(url);
request2.CookieContainer = cookieContainer;
request2.Method = "POST";
request2.ContentType = "application/x-www-form-urlencoded";

var args = new StringBuilder();
foreach (var item in fields)
{
    args.Append(System.Web.HttpUtility.UrlEncode(item.Key));
    args.Append("=");
    args.Append(System.Web.HttpUtility.UrlEncode(item.Value));
    args.Append("&");
}

using (System.IO.StreamWriter writer = 
    new System.IO.StreamWriter(request2.GetRequestStream()))
{
    writer.Write(args.ToString().TrimEnd('&'));
}

string html;
using (var response2 = (System.Net.HttpWebResponse)request2.GetResponse())
using (var rdr2 = new System.IO.StreamReader(response2.GetResponseStream()))
{
    html = rdr2.ReadToEnd();
} 
```

# java - 带接口的匿名类

> ID：12786074
> 
> 赞同：1
> 
> 时间：2012-10-08T16:56:26.663
> 
> 标签：java, interface, anonymous-function, inner-classes

在处理匿名内部类时，我对接口的概念感到困惑。据我所知，您无法在 Java 中实例化接口，因此以下语句会出现编译错误

```
 ActionListener action = new ActionListener();  // compile error 
```

当它处理匿名类时会发生什么？为什么它允许使用`new`？例如：

```
 JButton button = new JButton("A");
     button.addActionListener(new ActionListener(){    //this is fine
           @Override
           public void actionPerformed(ActionEvent e){

           }
     }; 
```

编译器是否只是创建一个类并`ActionListener`在幕后实现？它是如何工作的？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T16:58:26.960

它允许你创建一个新的匿名类来实现，`ActionListener`因为你提供了实现，你只是没有给它一个类名。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T16:59:01.747

当您创建一个内部类时，您正在实例化一个实现该接口的匿名类。

在您的情况下，效果与以下内容相同：`public class Foo implements ActionListener`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T17:05:26.337

您正在定义一个具有顺序分配名称的内部类，例如`1`,`2`等`3`。同时您正在使用`new`关键字实例化内部类。您不关心内部类的名称，因为您匿名使用它。如果您查看 bin 目录，您将看到每个匿名定义的类文件。例如，如果您在类中使用匿名类`Foo`，您将拥有`Foo.class`并`Foo$1.class`为您创建。我相信这意味着您可以在以后使用反射实例化更多匿名类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T17:00:22.037

您正在创建一个类并在使用匿名类时实现接口。您可以覆盖方法或在匿名类中实现方法

```
 A a= new A(){ 

               }; 
```

这里 a 是类型 A 的引用变量，它不是指 A 而是指实现 A 的类的对象，该对象没有名称

# c++ - C++ Win32 设计我的窗口

> ID：12786077
> 
> 赞同：0
> 
> 时间：2012-10-08T16:56:35.813
> 
> 标签：c++, winapi, skinning, theming, window-chrome

> **可能重复：**
> [C++/WIN32 具有专业外观的应用程序 - 真的有可能吗？](https://stackoverflow.com/questions/6717620/c-win32-a-professional-looking-application-is-it-really-possible)

我不是在谈论打开资源文件（.rc）并制作我的按钮等等。我在谈论窗口本身的外观 - 就像 Visual Studio Ultimate 2012 的安装程序：

![在此处输入图像描述](../Images/32269dbe183bd14f14db6bd1eed4726d.png)

按钮，一切看起来都不同。与 Photoshop、AE、Maya Autodesk 相同。

他们是怎么做到的？它容易还是困难？我们可以用 c++ 做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:18:41.723

C++ 我知道有一种方法可以覆盖操作系统的内部控件渲染，例如 C#。[但是您可以使用OpenGL](http://www.opengl.org/)渲染您的控件。（创建一个[图形用户界面](http://en.wikipedia.org/wiki/Graphical_user_interface)）

关于如果它很难或容易，如果您从未使用[OpenGL](http://www.opengl.org/)创建项目就很难。

顺便说一句，这是 msdn 中的一篇文章：http: [//msdn.microsoft.com/en-us/library/bb773183.aspx](http://msdn.microsoft.com/en-us/library/bb773183.aspx)

# backbone.js - Backbone.js 模型 - 将 ID 与服务器同步

> ID：12786080
> 
> 赞同：0
> 
> 时间：2012-10-08T16:56:46.940
> 
> 标签：backbone.js

我在理解 Backbone js 中的模型同步时遇到了一些麻烦。当我实例化并保存一个新模型时，它的数据被发送到后端进行持久化。但是，它的唯一标识符也会在后端生成（一个自动递增的整数）。服务器确认成功后，我需要此 ID 属性立即在模型上可用。我该怎么做呢？

只是为了提供更多细节，我正在创建我的模型，如下所示：

```
this.collection.create(modelData, {wait: true} 
```

我希望新创建的模型有一个 ID 属性，其值是在后端生成的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:06:51.120

在这种情况下，文档阅读不佳。原来骨干同步需要来自服务器的 JSON 响应，指示您希望在模型上设置的额外/更改的属性，这正是我正在寻找的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:02:31.463

您必须在响应中将生成模型的 ID 传递回主干。因此，在您的控制器中，您可以执行以下操作：

```
def create = Action { implicit request =>
    employeeForm.bindFromRequest.fold(
      errors => BadRequest,
      employee => {
        Ok(Employee.create(employee).toString())
    })
} 
```

然后定义模型的创建方法，如：

```
def create(employee: Employee): Long = {
    DB.withConnection { implicit connection =>
      SQL("insert into employee(first_name, last_name) values ({fname}, {lname})").on(
        'fname -> employee.fname,
        'lname -> employee.lname
      ).executeInsert()
    } match {
      case Some(long) => long
      case None => 0
   }
} 
```

在您的视图中的主干.js 中，为 create 定义成功回调，如下所示：

```
app.employeeList.create(@model,
      wait: true

      success: _.bind((model, response)->
        @model.set("id", response) 
```

您还可以为返回的 ID 0 添加某种错误处理。此外，不确定您的后端使用的是什么，但此代码适用于 Play 2/Scala。（对于 CoffeeScript 感到抱歉，如果您需要 JS，请告诉我）

# ruby-on-rails - 通过命名范围初始化实例变量

> ID：12786081
> 
> 赞同：0
> 
> 时间：2012-10-08T16:56:48.267
> 
> 标签：ruby-on-rails, ruby, named-scope

是否可以通过命名范围初始化实例变量？我想在初始搜索后记住我的搜索条件。请参阅以下内容：

```
class Foo < ActiveRecord::Base    
  attr_accessor :search

  named_scope :bar, lambda {|search|
    # Do something here to set the @search variable to search
    {
      :conditions => [
        "name LIKE :search OR description LIKE :search", 
        {:search => "%#{search}%"} ]
    } 
  }

  def match
    if name.match(@search)
      :name
    elsif description.match(@search)
      :description
    end
  end
end 
```

或者，我可以创建一个调用命名范围的类方法，然后遍历结果以在每个结果上设置实例变量，但在这种情况下我失去了命名范围的可链接性。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2020-05-16T15:17:34.503

非常感谢最新的帖子，其中包含如何做到这一点的灵感。这个猴子补丁仍然适用于 Rails 5。

当使用“where()”条件链接范围时，我刚刚遇到了上下文未转发的情况。

为此，我在 Association 的 CollectionProxy 中添加了另一个补丁，这似乎适用于我目前的情况。

也许它对您或其他人有用：

```
module ActiveRecord
  module Associations
    class CollectionProxy
      alias_method :original_scope, :scope

      def scope
        return @scope if @scope

        original_scope.tap { |new_scope|
          new_scope.scope_context = scope_context
        }
      end
    end
  end
end 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T23:25:33.453

命名范围不会实例化任何单个记录，直到它们被迭代。正如您正确地说的那样，它们可能与更多范围链接在一起。

我看到了两种可能的解决方案。一种依赖于数据库来填充具有匹配值的假列。`:select`使用查询的特殊选项（或`.select()`rails 3 中的特殊参数）应该很简单

另一种是依赖控制器。这实现起来要容易得多，但是您必须确保 ruby​​ 中的“匹配”与数据库中的“LIKE”相同。我说的是排序规则、unicode 规范化表单等。很可能至少存在一种情况，它们在两个引擎中的行为不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-14T06:35:05.897

在过去的一周里，我一直在疯狂地尝试解决同样的问题，并最终解决了这个问题。由于我在麻烦中发现了这个问题，我想我会在这里分享答案，以防万一其他人发现自己面临类似的问题。

正如[他在回答中重写的那样](https://stackoverflow.com/a/12790862/1084780)，您无法从范围内为模型设置实例变量，因为还没有模型实例。范围仅用于构建将在您尝试迭代范围结果时评估的 sql 表达式。然而，真正存在的是 ActiveRecord::Relation 对象。这是保存范围细节的东西。通过将要保留的变量放在该对象上，以后仍然可以访问它们。

那么，如何将变量放到 Relation 对象上呢？猴子补丁在这里拯救你：

### /lib/core_ext/add_scope_context_to_activerecord_relation.rb：

```
module ActiveRecord
  class Relation
    attr_writer :scope_context

    def scope_context
      @scope_context ||= {}
    end
  end

  module SpawnMethods
    alias_method :old_merge, :merge

    def merge(r)
      merged = old_merge(r)
      merged.scope_context.deep_merge! r.scope_context
      merged
    end
  end
end 
```

现在，在所有作用域中，都有一个 scope_context 变量。SpawnMethods#merge malarky 是为了确保 scope_context 保持在一系列范围内（例如`Foo.search(xxx).sort(xxx).paginate(xxx)`）

### /app/concerns/searchable.rb：

```
require 'active_support/concern'

module Searchable
  extend ActiveSupport::Concern

  included do
    self.scope :search, Proc.new { |params|
      s = scoped

      s.scope_context[:searchable] = {}
      s.scope_context[:searchable][:params] = parse_params params

      s.scope_context[:searchable][:params].each do |param|
        s = s.where generate_where_expression param
      end
      s
    } do
      def search_val col_name
        param = scope_context[:searchable][:params].find do |param|
          param[:col_name] == field.to_s
        end
        param.nil? ? '' : param[:val]
      end
    end
  end

  module ClassMethods
    def parse_params params
      # parse and return the params
    end

    def generate_where_expression param
      "#{param[:col_name]} like '%#{param[:val]}%'"
    end
  end
end 
```

现在，我们的控制器、模型和视图将如下所示：

### /app/controllers/foo_controller.rb：

```
class FooController < ApplicationController
  def index
    @foos = Foo.search(params[:search])
  end
end 
```

### /app/models/foo.rb：

```
class Foo < ActiveRecord::Base    
  include Searchable

  attr_accessor :name, :description
end 
```

### /app/views/foos/index.html.erb：

```
<p>You searched for:</p>
<table>
  <tr>
    <th>Name</th>
    <td><%= @foos.search_val :name %>
  </tr>
  <tr>
    <th>Description</th>
    <td><%= @foos.search_val :description %>
  </tr>
</table>
<p>And you got:</p>
<table>
  <% @foos.each do |foo| %>
    <tr> xxx </tr>
  <% end %>
</table> 
```

现在，您可能已经注意到上面提到的 core_ext 和关注目录。您的应用程序需要了解这些：

### /config/application.rb：

```
# Should be fairly obvious where to put this line
config.autoload_paths += Dir[Rails.root.join('app', 'concerns', '{**}')] 
```

### /config/initializers/load_extensions.rb：

```
Dir[File.join(Rails.root, "lib", "core_ext", "*.rb")].each {|l| require l } 
```

不要忘记重新启动服务器然后离开（假设我没有忘记包含任何内容）。

哦，我已经用 Rails 3.2.13 和 Ruby 1.9.3 提出了这个解决方案；不知道它在其他版本中的表现如何。

# xml - 如何为具有两个可能的最后一个元素的元素进行 xpath？

> ID：12786083
> 
> 赞同：1
> 
> 时间：2012-10-08T16:57:00.183
> 
> 标签：xml, selenium, xpath

我有复杂的 xpath 选择器。我想让它通用，所以它可以指向输入和文本区域。

示例 xpath 的

```
//someelement//input

//someelement//textarea 
```

如何将这两个合并到单个 xpath 中？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:08:41.357

您可以使用联合：

```
 //someelement//input  | //someelement//textarea 
```

或者在 XPath 2 中：

```
//someelement//(input, textarea) 
```

# algorithm - 哥伦布数列

> ID：12786087
> 
> 赞同：1
> 
> 时间：2012-10-08T16:57:12.770
> 
> 标签：algorithm, math, discrete-mathematics

Golomb 的自描述数列 {G(n)} 是唯一的自然数非递减数列，使得 n 在数列中恰好出现 G(n) 次。前几个 n 的 G(n) 值为

```
n       1   2   3   4   5   6   7   8   9   10  11  12  
G(n)    1   2   2   3   3   4   4   4   5   5   5   6 
```

假设 G(10^3)​​ = 86，G(10^6) = 6137。还假设 ΣG(n^3) = 153506976，对于 1 <= n < 10^3。

对于 1<= n< 10^6，求 ΣG(n^3)。很容易编码掉找到数字序列的公式。但是有没有办法跟踪 G(10^3)​​ 和 G(10^6) 之间的数学关系，以便找到总和高达 10^6 的代码可以优化吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T18:58:56.537

根据[OEIS](http://oeis.org/A001462)，我们有：

```
G(1) = 1
G(n+1) = 1 + G(n + 1 - G(G(n))) 
```

如果您生成序列一段时间，您会注意到重复`k`次数的组的大小为`k * G(k)`. 例如，重复 2 次的组的大小是多少？`2 * G(2) = 4: 2 2 3 3`. 那些重复3次的？`3 * G(3) = 6: 4 4 4 5 5 5`（`6`重复`4`几次）。

请注意，总和`ig(k) = sum i * G(i), i <= k`为您提供了重复 1、2、...、`k`次的组的大小，因此它告诉您重复`k`次数的组在哪里结束。

这个 OEIS 公式也很有帮助：

```
for G(1) + G(2)+ ... + G(n-1) < k <= G(1) + G(2) + ... + G(n) = sg(n)
we have G(k) = n 
```

使用它，您只需计算几个 的值`G`就可以找到大量的值。例如，让我们找到`G(10^6)`：

首先，找到`k`这样的`k*G[k] < 10^6 <= (k + 1)*G[k + 1]`。这将有助于告诉您该组`G[10^6]`所在的位置，以及它的价值。

找到这`k`将意味着它`G(10^6)`在一组 size 中`k + 1`。

我使用这个 C++ 程序来找到这个值：

```
int g[200000], ig[200000];

int main()
{
    g[1] = 1;
    ig[1] = 1;
    for (int i = 2; i < 1000; ++i) {
        g[i] = 1 + g[i - g[g[i - 1]]];
        ig[i] = ig[i - 1] + i * g[i];
    }

    int k = 1;
    while (ig[k] < 1000000) // 10^6
    {
        ++k;
    }

    cout << k - 1 << ' ' << ig[k - 1] << endl;
    cout << k << ' ' << ig[k] << endl;

    return 0;
} 
```

这使：

```
k        k * G[k]       k + 1      (k + 1) * G[k + 1]
263      998827         264        1008859 
```

现在您需要使用 精确定位确切的组`sg`：您可以通过使用相邻值`n`之间的插值在 OEIS 公式中找到 。`ig`

这意味着：

```
G(10^6) = sg(k = 263) + (ig(k + 1 = 264) - ig(k = 263)) / (k + 1 = 264) 
```

获得答案的确切解决方案和您需要计算的值的数量留作练习，询问您在此过程中是否有任何问题。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-23T01:34:43.340

由于您正在研究[https://projecteuler.net/problem=341](https://projecteuler.net/problem=341)，我认为直接回答这个问题将是一个剧透。但是，如果您正确地解决了那里的特定问题（无论多么不理想），该网站会让您在那里看到关于优化技术的有趣讨论。

# ruby-on-rails - Bootstrap Fancybox 导轨

> ID：12786089
> 
> 赞同：0
> 
> 时间：2012-10-08T16:57:24.147
> 
> 标签：ruby-on-rails, twitter-bootstrap, fancybox

我选择使用带有引导程序的 fancybox，因为我认为它更好。我正在使用引导工具提示并弹出一堆依赖于 rel 选项的弹出窗口，这些选项正在启动fancybox画廊（导航的左右箭头）。但是，我不希望画廊活跃。

我似乎找不到一个简单的花式框选项来禁用画廊。我的fancybox文件在资产管道中，否则我会进入并编辑代码以查找“rel”以外的其他内容......我仍然可以轻松做到这一点，但我希望有一个简单的选项。

问题：有没有可以在js函数中传入禁用图库功能的选项？我一个都没找到...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T22:27:16.337

[Fancybox 组中的此线程](https://groups.google.com/d/topic/fancybox/DQeqZoGP2ZM/discussion)中有一些建议可能会对您有所帮助。

最简单的解决方案建议将其设置`showNavArrows`为`false`至少是一个更易于维护的解决方案，它可以模仿您已经完成的工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:25:11.533

我放弃了寻找一个 js 选项来执行此操作，所以我只是创建了一个 css 覆盖来将 fancybox-nav、fancybox-next 和 fancybox-prev 设置为 display:none;

# html - TABLE 中不需要的行空间

> ID：12786090
> 
> 赞同：0
> 
> 时间：2012-10-08T16:57:32.223
> 
> 标签：html, css, css-tables, cellpadding

我有一张包含分段图片的表格。由于在图片的某些部分添加了鼠标悬停效果，图片被分割。

虽然单机版还可以，但是当作为侧栏 HTML 代码集成到 WordPress 中时，就变得杂乱无章（`cell-padding`更改）。由于我无法控制父控件（此处为 a `DIV`），我如何从我的 HTML 代码中覆盖父 CSS（无需更改 WordPress 侧边栏 PHP 代码）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:23:51.720

您的样式表中有一个`line-height: 21px;`。删除它看起来不错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:39:03.157

您可以使用默认的 css 样式，例如

```
 table {
      margin-left:auto;
      .....
}
    td {
      margin-left:auto;
      .....  
}
    tr {
      margin-left:auto;
      .....
} 
```

# html - 如何将 HTML 划分为两个不同的区域，就像使用框架一样？

> ID：12786094
> 
> 赞同：0
> 
> 时间：2012-10-08T16:57:43.583
> 
> 标签：html, css, iframe, proxy, frame

显然，框架（和框架）在随意使用时会出现一些严重的问题；但是，它们允许一定的能力将网页分成两个不同的、不重叠的区域。如果我要使用

```
 <frameset rows="40,*">   
      <frame src="page_1"></frame>
      <frame src="page_2"></frame>
   <frameset> 
```

我可以在两个框架页面之间划分我的一个页面，而不必担心样式、html 标签等冲突。

我被雇来编写一个浏览器内服务器，它在页面顶部有一个小“工具栏”，然后在它下面是代理网页。我最讨厌框架的所有东西。但是，我无法复制它们清晰地区分两个区域的能力。如果我`position: fixed`在顶部栏上使用，我就会遇到干扰下面任何代理页面的问题。同样，如果我尝试将整个代理页面向下移动以为栏腾出空间，它最终会“扭曲”代理页面的样式，这是非常不可接受的。

所以我的问题是：我如何才能最好地管理这种情况，无论是修改代理代码以合并顶部栏，修改顶部栏以不干扰下面的代理页面，还是使用我还不知道的功能产生与`rows="40,*"`?相同的效果 Javascript、PHP、HTML、CSS 等都是解决此问题的潜在工具。此外，跨浏览器的兼容性也很重要。我很抱歉没有将代码发布到我的代理，但截断它会非常困难。谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:09:38.030

这正是 iframe 设计的那种情况——包括你无法控制的内容。将您的工具栏放在 html 中，然后包含带有`<iframe>`标签的代理页面。

# python - 解包函数参数

> ID：12786102
> 
> 赞同：15
> 
> 时间：2012-10-08T16:58:13.523
> 
> 标签：python, function

如果一个函数接受 n 个参数，并且有另一个函数返回一个包含 n 个项目的序列（或者我有一个包含 n 个项目的序列），有没有办法“映射”这两个函数（或制作第一个函数将n个项目的序列作为输入并返回结果）我不想（在某些情况下可能不能）自己编辑函数并更改其参数参数和返回值类型。

IE）

```
def func1(x, y, z):
    return x+y+z

def func2(w):
    return [i for i in range(w,w+3)] 
```

`func1(func2( ... ))`在这种情况下不能。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-08T17:00:15.333

您正在寻找`*args`参数语法：

```
>>> def foo(bar, baz, spam):
...     print bar, baz, spam
...
>>> arguments = [1, 2, 3]
>>> foo(*arguments)
1, 2, 3 
```

将参数传递给可调用对象时，任何以星号开头的表达式`*`都被解释为一系列位置参数，并扩展为作为单独参数传递给被调用对象（函数、方法等）。

对于您的示例，这将是：

```
func1(*func2(...)) 
```

有一个使用`**`双星号的等效关键字（采用映射），您也可以在函数签名中使用相同的语法。

请参阅[有关调用表达式的文档](https://docs.python.org/2/reference/expressions.html#calls)，对于函数签名镜像语法，请参阅[有关函数定义的文档](https://docs.python.org/2/reference/compound_stmts.html#function-definitions)。

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-08T17:00:56.070

它被称为参数解包，写成：

```
func1(*func2(...)) 
```

参考：[https ://docs.python.org/2/tutorial/controlflow.html#unpacking-argument-lists](https://docs.python.org/2/tutorial/controlflow.html#unpacking-argument-lists)

# iphone - 在 NavigationBar 中输入带有添加 UIButton 的新 UITableViewCell

> ID：12786106
> 
> 赞同：0
> 
> 时间：2012-10-08T16:58:34.080
> 
> 标签：iphone, uitableview

我正在尝试创建一个`UITableViewController`允许用户`UIButton`在导航栏中按 a 的方法，输入他们的数据，即名字和姓氏，然后控制器将此数据放入新的`UITableViewCell`. 我已经为此工作了大约一个星期，似乎有无穷无尽的问题。我将非常感谢有人帮助我完成它，因为我到处搜索但无济于事。

到目前为止，我有以下内容：

guestlistViewController.h

```
#import <UIKit/UIKit.h>

@class addGuestViewController;

@interface guestlistViewController : UITableViewController {
    NSArray *fullname;
}

@property (nonatomic, strong) addGuestViewController *addGuestViewController;

@end 
```

guestlistViewController.m

```
#import "guestlistViewController.h"
#import "addGuestViewController.h"

@interface guestlistViewController () {
    NSMutableArray *_objects;
}
@property (nonatomic, strong) NSArray *tableData;

@end

@implementation guestlistViewController
@synthesize tableData;

- (void)awakeFromNib
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        self.clearsSelectionOnViewWillAppear = NO;
        self.contentSizeForViewInPopover = CGSizeMake(320.0, 600.0);
    }
    [super awakeFromNib];
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    // Do any additional setup after loading the view, typically from a nib.
    self.navigationItem.leftBarButtonItem = self.editButtonItem;
    UIBarButtonItem *addButton = [[UIBarButtonItem alloc] initWithBarButtonSystemItem:UIBarButtonSystemItemAdd target:self action:@selector(insertNewObject:)];
    self.navigationItem.rightBarButtonItem = addButton;
    self.addGuestViewController = (addGuestViewController *)[[self.splitViewController.viewControllers lastObject] topViewController];
    NSArray *array = [[NSArray alloc] initWithObjects:fullname, nil];
    self.tableData = array;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

- (void)insertNewObject:(id)sender
{
    [self performSegueWithIdentifier:@"insertGuest" sender:self];
}

#pragma mark - Table View

- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return _objects.count;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
        cell.accessoryType = UITableViewCellAccessoryDisclosureIndicator;
    }
    NSArray *array = [[NSArray alloc] initWithObjects:fullname, nil];
    NSUInteger row = [indexPath row];
    cell.textLabel.text = [array objectAtIndex:row];

    return cell;
}

- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}

- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        [_objects removeObjectAtIndex:indexPath.row];
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    } else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view.
    }
}

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    if ([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPad) {
        NSArray *array = _objects[indexPath.row];
        self.addGuestViewController.detailItem = array;
    }
}

- (void)prepareForSegue:(UIStoryboardSegue *)segue sender:(id)sender
{
    if ([[segue identifier] isEqualToString:@"addGuest"]) {
        NSIndexPath *indexPath = [self.tableView indexPathForSelectedRow];
        NSDate *object = _objects[indexPath.row];
        [[segue destinationViewController] setDetailItem:object];
    }
} 
```

addGuestlistViewController.h

```
#import <UIKit/UIKit.h>

@interface addGuestViewController : UITableViewController <UISplitViewControllerDelegate>

@property (nonatomic, strong) id detailItem;
@property (retain) NSString *fullname;

@end 
```

addGuestlistViewController.m

```
#import "addGuestViewController.h"
#import "guestlistViewController.h"

@interface addGuestViewController () <UITextFieldDelegate>
@property (nonatomic, strong) NSArray *guestTable;
@property (nonatomic, strong) UITextField *firstname;
@property (nonatomic, strong) UITextField *lastname;
@property (nonatomic, strong) UIPopoverController *masterPopoverController;
- (void)configureView;
@end

@implementation addGuestViewController
@synthesize guestTable;
@synthesize firstname;
@synthesize lastname;

#pragma mark - Managing the detail item

- (void)setDetailItem:(id)newDetailItem
{
    if (_detailItem != newDetailItem) {
        _detailItem = newDetailItem;

        newDetailItem = [[NSString alloc] initWithFormat:@"%@ %@", firstname, lastname];

    }

    if (self.masterPopoverController != nil) {
        [self.masterPopoverController dismissPopoverAnimated:YES];
    }
}

- (void)configureView
{
    if (self.detailItem) {
        self.fullname = [self.detailItem description];
    }
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    NSArray *addGuest = [[NSArray alloc] initWithObjects:@"", @"", nil];
    self.guestTable = addGuest;
}

- (void)didReceiveMemoryWarning
{
    [super didReceiveMemoryWarning];
    // Dispose of any resources that can be recreated.
}

#pragma mark - Table view data source

- (NSInteger)numberofSectionsInTableView:(UITableView *)tableView
{
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return [self.guestTable count];
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    if ([indexPath row] == 0) {
        firstname = [[UITextField alloc] initWithFrame:CGRectMake(30, 10, 280, 30)];
        firstname.contentVerticalAlignment = UIControlContentVerticalAlignmentTop;
        firstname.adjustsFontSizeToFitWidth = YES;
        firstname.placeholder = @"First Name";
        firstname.textColor = [UIColor blackColor];
        firstname.returnKeyType = UIReturnKeyNext;
        firstname.delegate = self;
        firstname.autocorrectionType = UITextAutocorrectionTypeNo;
        firstname.tag = 0;
        firstname.clearButtonMode = UITextFieldViewModeWhileEditing;
        [firstname setEnabled: YES];
        [cell addSubview:firstname];
        [firstname becomeFirstResponder];
    } else if ([indexPath row] == 1) {
        lastname = [[UITextField alloc] initWithFrame:CGRectMake(30, 10, 280, 30)];
        lastname.contentVerticalAlignment = UIControlContentVerticalAlignmentTop;
        lastname.adjustsFontSizeToFitWidth = YES;
        lastname.placeholder = @"Last Name";
        lastname.textColor = [UIColor blackColor];
        lastname.returnKeyType = UIReturnKeyDone;
        lastname.delegate = self;
        lastname.autocorrectionType = UITextAutocorrectionTypeNo;
        lastname.tag = 0;
        lastname.clearButtonMode = UITextFieldViewModeWhileEditing;
        [lastname setEnabled: YES];
        [cell addSubview:lastname];
    }

    NSUInteger row = [indexPath row];
    cell.textLabel.text = [guestTable objectAtIndex:row];
    return cell;
}

- (BOOL)textFieldShouldReturn:(UITextField *)textField
{
    if (textField == firstname) {
        [textField resignFirstResponder];
        [lastname becomeFirstResponder];
    } else if (textField == lastname) {
        [textField resignFirstResponder];
        [self performSegueWithIdentifier:@"done" sender:self];
        _fullname = [[NSString alloc] initWithFormat:@"%@ %@", firstname.text, lastname.text];
        NSLog(@"Detail pulled off name of: %@", _fullname);
    }
    return YES;
}

#pragma mark - Split view

- (void)splitViewController:(UISplitViewController *)splitController willHideTableViewController:(UITableViewController *)tableViewController withBarButtonItem:(UIBarButtonItem *)barButtonItem forPopoverController:(UIPopoverController *)popoverController
{
    barButtonItem.title = NSLocalizedString(@"Master", @"Master");
    [self.navigationItem setLeftBarButtonItem:barButtonItem animated:YES];
    self.masterPopoverController = popoverController;
}

- (void)splitViewController:(UISplitViewController *)splitController willShowTableViewController:(UITableViewController *)tableViewController invalidatingBarButtonItem:(UIBarButtonItem *)barButtonItem
{
    // Called when the view is shown again in the split view, invalidating the button and popover controller.
    [self.navigationItem setLeftBarButtonItem:nil animated:YES];
    self.masterPopoverController = nil;
}

@end 
```

我很确定我尝试了多少种不同的方法，它是几种不同方法的大量混合。我对 iOS 编程真的很陌生，所以希望它是可以挽救的：P

# android - 膨胀类片段的片段错误

> ID：12786113
> 
> 赞同：1
> 
> 时间：2012-10-08T16:58:45.563
> 
> 标签：android, android-fragments

我遇到了片段问题，我收到一条错误消息：

```
Binary XML file line #2 Error: inflating class fragment.
Cause by: Java.lan.NullPointerException: name == null 
```

这是我的二进制文件：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <fragment
        android:id="@+id/fragment_content"
        android:name="com.livetrekker.fragments.WelcomeFragment"
        android:layout_width="0dp"
        android:layout_height="0dp"
        android:layout_weight="1" />
</LinearLayout> 
```

然后是我的 FragmentActivity：

```
public class SetupWizard extends FragmentActivity{
    public void onCreate(Bundle bundle){
        super.onCreate(bundle);
        setContentView(R.layout.activity_wizardsetup);
        FragmentManager fragmentManager = getSupportFragmentManager();
        FragmentTransaction fragmentTransaction = fragmentManager.beginTransaction();

        WelcomeFragment wf = new WelcomeFragment();
        fragmentTransaction.add(R.id.fragment_content, wf);

        fragmentTransaction.commit();
    }
} 
```

最后是我的片段：

```
Public class WelcomeFragment extends Fragment {
    @Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState){
        return inflater.inflate(R.layout.welcomelivetrekker,container, false);
    }
} 
```

我已将 Android.support.v4.app.Fragment 导入到我的两个文件中并在互联网上查看，但没有一个解决方案有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:28:28.260

您的 activity_wizardsetup.xml 应如下所示：

```
<android.support.v4.view.ViewPager xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/pager"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    tools:context=".MainActivity">
</android.support.v4.view.ViewPager> 
```

然后你的 fragment_content.xml 应该看起来像这样：

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/test"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="center_vertical" />

</LinearLayout> 
```

我相信应该修复它......在我的代码中，我使用[FragmentPagerAdapter](http://developer.android.com/reference/android/support/v4/app/FragmentPagerAdapter.html)而不是 FragmentTransaction 或 FragmentManager ......但我认为修复 xml 会起作用......

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-08T07:44:20.273

我知道这是一个旧线程，但我想我还是会回答这个问题，因为这里的解决方案对我不起作用，但问题是一样的。

Exception was on inflating the fragment, because name was null. The fragment must have the following field:

```
android:name="com.google.android.gms.maps.MapFragment" 
```

Source [here](https://developers.google.com/maps/documentation/android/start#get_an_android_certificate_and_the_google_maps_api_key).

# objective-c - 如何定义和调用具有多个参数的方法

> ID：12786115
> 
> 赞同：5
> 
> 时间：2012-10-08T16:58:46.087
> 
> 标签：objective-c

> **可能重复：**
> [如何编写具有多个参数的方法/消息？](https://stackoverflow.com/questions/1066763/how-to-write-a-method-message-with-multiple-parameters)

我在这里真的很困惑......我查看了 SO 和 Google，在那里我找到了一个使用两个参数调用方法的示例。所以我修改了它以供我使用，不幸的是我无法让它工作。这是我更新的代码：

```
-  definition of method
- (NSArray *) fetchEventsBetweenDates: (NSDate *) sDate: andDate: (NSDate *) eDate;

- definitions and creation of sD and eD
    //  convert start dates to NSDate
    NSDateFormatter* df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"MM/dd/yyyy"];
    NSDate* sD = [df dateFromString:@"10/03/2012"];
    NSLog(@"startDate: %@", sD);

    //  convert end dates to NSDate
    NSDate* eD = [df dateFromString:@"10/05/2012"];
    NSLog(@"endDate: %@", eD);

- call to method
    [self.eventsList addObjectsFromArray:[self fetchEventsBetweenDates: sD andDate: eD]];

- method
- (NSArray *) fetchEventsBetweenDates: (NSDate *) sDate: andDate: (NSDate *) eDate  { 
```

我已经尝试了所有我认为合理的排列，但它仍然无法构建。我在调用该方法时收到“预期的'：'。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-08T17:04:06.257

请阅读Apple[的 The Objective-C Programming Language](http://www.google.ch/url?sa=t&rct=j&q=&esrc=s&source=web&cd=1&cad=rja&ved=0CB4QFjAA&url=http://developer.apple.com/documentation/Cocoa/Conceptual/ObjectiveC/&ei=kwZzUMjPLcv64QSUsIDgAw&usg=AFQjCNFR-4nUahyAELKcHUZDWKv3liXPEA&sig2=cMDkYKqua8zZwNcS8HcKYg)。特别是[消息语法](https://developer.apple.com/library/mac/documentation/Cocoa/Conceptual/ObjectiveC/Chapters/ocObjectsClasses.html#//apple_ref/doc/uid/TP30001163-CH11-SW6)部分。

消息声明语法如下：

```
- (return type)myMethodParam1:(param1 type)p1 param2:(param2 type)p2; 
```

例子：

```
- (NSArray *)fetchEventsBetweenDate:(NSDate *)startDate andDate:(NSDate *)endDate; 
```

实现是相同的，您只需将分号替换为`;`大括号中的实现即可`{ implementation }`。

调用方法时，将参数声明替换为变量：

```
// Assuming aDate and otherDate exist.
[self fetchEventsBetweenDate:aDate andDate:otherDate]; 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-08T17:05:33.540

从一本基本的 Objective-C 书籍开始。很明显，您还不了解语法或语言（没什么大不了的——我们都是从那里开始的）。

如果你真的有一个方法定义为：

```
- (NSArray *) fetchEventsForADay: (NSDate *) sDate: (NSDate *) eDate; 
```

你会用`[someObj fetEventsForADay: date1 : date2];` 那会很烂；Objective-C 的 interleave-arguments-with-method-name 模式的全部意义在于使 API 能够自我记录。因此，您可能想要：

*   (NSArray *) fetchEventsBetweenStartDate:(NSDate* ) sDate andEndDate:(NSDate*) eDate;

这将被称为`[someObj fetchEventsBetweenStartDate: date1 andEndDate: date2];`. 清晰得多。

# mysql - 表设计 - 需要建议

> ID：12786117
> 
> 赞同：0
> 
> 时间：2012-10-08T16:58:55.650
> 
> 标签：mysql, sql

我有一张用户过去购买过的产品的表格。例如

```
item_id - user_id - title - supplier_id - - supplier_name - date added 
```

用户表

```
user_id - name 
```

我还有一张供应商表，例如

```
supplier_id - supplier_name 
```

供应商不时提交特别优惠，然后我想将其传递给我的用户......这可能是在一个项目上或全面。

我的问题是如何最好地管理这个

是否有这样一种情况，当用户登录系统时，我会查看所有报价，然后再次将它们与过去购买的物品或整个供应商进行匹配（如果全面报价）

我认为这可能需要大量资源，比如 100000 个用户和 1000 个要约来查看有很多查询......或者有另一种方法可以做到这一点吗？也许是一个更容易交叉引用的临时表。

我必须立即写下来，并希望确保我尽可能高效地完成它，但这是我的一个新问题，因此是个问题。

这是一个有简单解决方案的标准问题吗？

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:07:32.843

我认为使用两个不同的表来管理报价是有意义的。

*   一张表处理从供应商处购买特定产品的用户。
*   一张表处理从供应商处购买任何东西的用户。

在第一种情况下，您可以使用类似这样的查询来识别这些用户。（代码未经测试。）

```
select distinct user_id
from products  -- Seems like "purchases" might be a better name.
where supplier_id = ?
  and item_id     = ?; 
```

在第二种情况下，使用类似这样的查询。

```
select distinct user_id
from products
where supplier_id = ?; 
```

GROUP BY 子句可能比 SELECT DISTINCT 提供更好的性能。

在第一种情况下，产品（项目）报价表可能如下所示。

```
supplier_id  item_id  offer_start  offer_end
--
1            10156    2012-08-01   2012-08-15 
```

你会得到应该*收到*这些报价的用户，并按照这些思路进行查询。

```
select distinct user_id
from products  -- Seems like "purchases" might be a better name.
inner join item_offers on item_offers.supplier_id = products.supplier_id
                      and item_offers.item_id = products.item_id
                      and current_date between item_offers.offer_start 
                                           and item_offers.offer_end
where supplier_id = ?
  and item_id     = ?; 
```

如果您正在查询单个用户，这种情况似乎经常发生，您可以将用户 ID 添加到 WHERE 子句中。即使在一张巨大的桌子上，我也希望 WHERE 子句非常有选择性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:08:53.913

我将创建一个名为“special_offers”（或任何您想要的）的新单独表，并使其与供应商和用户建立多对多关系。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:09:05.607

您只会查询特定用户的记录，所以这没什么大不了的。您将从过去的订单中查询所有不同的 item_id，以及不同的供应商 ID。这应该返回一个可管理的数字，然后您将这些 id 加入您的报价表以显示相关报价。您可以创建一个包含所有报价（项目特定和供应商特定）的表格，或将它们分成 2 个表格。

# nhibernate - 使用 nhibernate 在另一个条件中选择一个条件

> ID：12786121
> 
> 赞同：1
> 
> 时间：2012-10-08T16:59:01.270
> 
> 标签：nhibernate

是否可以使用 NHibernate 的条件 API 获取以下 SQL 查询？

```
SELECT a.someColumn FROM aTable a LEFT OUTER JOIN (SELECT * FROM bTable WHERE xyz = 'something') b on a.Id = b.Id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T22:29:02.497

You can perform a SQL sub-select using NHibernate DetachedCriteria like explained [here](https://stackoverflow.com/a/2779517/13855). For the query you provided, why not just do:

```
SELECT a.someColumn FROM aTable a LEFT OUTER JOIN bTable b on a.Id = b.Id WHERE b.xyz = 'something' 
```

# java - 使用 Spring Security 的 IP 过滤器

> ID：12786123
> 
> 赞同：16
> 
> 时间：2012-10-08T16:59:08.037
> 
> 标签：java, spring, spring-mvc, filter, spring-security

我想知道如何使用 Spring Security 通过 IP 过滤用户对我的 Web 应用程序的访问。我应该扩展`AbstractAuthenticationProcessingFilter`或类似的东西并以我自己的方式覆盖它的方法吗？如果是这样，您能否举一个这样的扩展示例和过滤器描述示例`web.xml`？提前致谢。

PS 在我的应用程序中，我也有 Spring Security 支持（使用 default `org.springframework.web.filter.DelegatingFilterProxy`），但我希望它不仅检查用户凭据，还检查他们的 IP。

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-08T17:06:14.100

一种方法是使用 Spring Security 的[Web Security Expressions](http://static.springsource.org/spring-security/site/docs/3.1.x/reference/springsecurity-single.html#el-access-web)。例如：

```
<http use-expressions="true">
    <intercept-url pattern="/admin*"
        access="hasRole('admin') and hasIpAddress('192.168.1.0/24')"/>
    ...
</http> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2017-12-26T10:02:57.557

Anshu 的回答是通过 ip 对用户进行身份验证是一个好主意，但它可能不适用于 cas 身份验证。我有另一种解决方案，使用过滤器更适合这种情况。

```
public class IPAuthenticationFilter extends AbstractAuthenticationProcessingFilter {
    private AuthenticationUserDetailsService<CasAssertionAuthenticationToken> authenticationUserDetailsService;
    private static Set<String> ipWhitelist;

    @Autowired
    private AppProperty appProperty;

    @PostConstruct
    public void init() {
        ipWhitelist = new HashSet<>(Arrays.asList(appProperty.getIpWhitelist()));
        setAuthenticationSuccessHandler(new AuthenticationSuccessHandler() {
            @Override
            public void onAuthenticationSuccess(
                    HttpServletRequest httpServletRequest,
                    HttpServletResponse httpServletResponse,
                    Authentication authentication) throws IOException, ServletException {
                // do nothing
            }
        });
    }

    public IPAuthenticationFilter() {
        super("/");
    }

    public Authentication attemptAuthentication(HttpServletRequest request, HttpServletResponse response)
            throws AuthenticationException, IOException {
        String userName = request.getHeader(appProperty.getHeaderCurUser());
        Assertion assertion = new AssertionImpl(userName);
        CasAssertionAuthenticationToken token = new CasAssertionAuthenticationToken(assertion, "");
        UserDetails userDetails = authenticationUserDetailsService.loadUserDetails(token);

        CasAuthenticationToken result = new CasAuthenticationToken(
                "an-id-for-ip-auth",
                userDetails,
                request.getRemoteAddr(),
                userDetails.getAuthorities(),
                userDetails,
                assertion
        );
        return result;
    }

    protected boolean requiresAuthentication(HttpServletRequest request, HttpServletResponse response) {
        String userName = request.getHeader(appProperty.getHeaderCurUser());
        return ipWhitelist.contains(request.getRemoteAddr()) && !StringUtils.isEmpty(userName);
    }

    protected void successfulAuthentication(
            HttpServletRequest request,
            HttpServletResponse response,
            FilterChain chain,
            Authentication authResult) throws IOException, ServletException {
        super.successfulAuthentication(request, response, chain, authResult);
        chain.doFilter(request, response);
    }

    public AuthenticationUserDetailsService<CasAssertionAuthenticationToken> getAuthenticationUserDetailsService() {
        return authenticationUserDetailsService;
    }

    public void setAuthenticationUserDetailsService(
            AuthenticationUserDetailsService<CasAssertionAuthenticationToken> authenticationUserDetailsService) {
        this.authenticationUserDetailsService = authenticationUserDetailsService;
    }
} 
```

您可以在 cas 之前添加此过滤器，如下所示：

```
http.addFilterBefore(ipAuthenticationFilter(), CasAuthenticationFilter.class) 
```

# php - 在变量 PHP 中显示带有 foreach 的数组

> ID：12786129
> 
> 赞同：2
> 
> 时间：2012-10-08T16:59:17.450
> 
> 标签：php, arrays, email, foreach

我只是浏览了一下，但我想在这里提出我的第一个问题，因为我还没有找到具体和类似的示例/查询。

我在网站的“第一页”上有许多不同公司的群组。每组中有 1 - 20 个左右的复选框输入字段，以便客户在提交下面的表格后可以要求向他们发送不同的信息。在仅运行 php 脚本的单独页面上，我将表单通过电子邮件发送给托管公司。然后消息显示如下：（我更改了内容......）

我希望它阅读：

```
 *Favorite Animals: Dog, Cat, Bird* 
```

但是我有它阅读：

```
 Favorite Animals: Dog,
            Favorite Animals: Cat,
            Favorite Animals: Bird, 
```

**我的代码：**

在第一页上，我们在同一个数组中有一个不同复选框的列表，具有明显不同的值......如下所示：

```
<input type="checkbox" name="animals[]" value="Dogs" class="cb">
 Dogs<br>
<input type="checkbox" name="animals[]" value="Cats" class="cb">
 Cats<br>
<input type="checkbox" name="animals[]" value="Birds" class="cb">
 Birds<br>
<input type="checkbox" name="animals[]" value="Dragons" class="cb">
 Dragons<br> 
```

然后将上面的代码提交（通过 post）到一个单独的 php 文档。

第二页中的相关代码是：

```
$animals = $_POST['animals']; 
```

以下...

```
 foreach ($animals as $an) {
$email_message .= "Favorite Animals: ".clean_string($an)." ,\n";
    } 
```

我意识到发生了什么，但我还没有想出一种方法来处理 foreach 语句，以便显示一次“最喜欢的动物”，然后显示上一页上选择的任何可能的数组。

我没有错误，只是以我不希望的方式获取信息。任何帮助，将不胜感激！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:56:47.747

与其`foreach`自己使用和处理多余的逗号，不如使用`implode`.

```
$email_message = implode(', ', array_map('clean_string', $animals); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:08:28.157

这里发生的情况是表单只发布选择的内容，而不是未选择的内容。您可能想要的是它显示动物的所有可能值及其选择的列表。为此，我会更改您的提交表单并让它发布所有值：

```
<input type="checkbox" name="animals['Dogs']" onclick="this.value='yes'" value="no" class="cb">
 Dogs<br>
<input type="checkbox" name="animals['Cats']" onclick="this.value='yes'" value="no" class="cb">
 Cats<br>
<input type="checkbox" name="animals['Birds']" onclick="this.value='yes'" value="no" class="cb">
 Birds<br>
<input type="checkbox" name="animals['Dragons']" onclick="this.value='yes'" value="no" class="cb">
 Dragons<br> 
```

并且您的电子邮件打印功能现在应该更新以包含数组中的键：

```
$email_message = "Favorite Animals:";
foreach ($animals as $key=>$val) {
  $email_message .=".clean_string($key). "=" . clean_string($val) . " ,\n";
} 
```

所以发生的事情是所有的值都被传递了，但是当有人点击它们时，它们会从“否”变为“是”。这是一种解决方法，还有其他处理方法，但它们可能需要更新的不仅仅是您的表单。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:09:36.127

只需将静态部分放在循环之外。那应该这样做。

```
 $email_message .= "Favorite Animals: ";

 foreach ($animals as $an) {
   $email_message .= clean_string($an)." ,";
 }
  $email_message = rtrim ($email_message, ",");

 $email_message .= "\n";

 // Continue appending rest of the email message 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T17:01:45.523

`$email_message`用**“Favorite Animals:”**初始化字符串，然后在循环中**追加**数组的其余部分

```
$email_message = "Favorite Animals: ";
 foreach ($animals as $an) {
$email_message .= clean_string($an)." , ";
    } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T17:16:15.677

其他答案要好得多，但只是一些值得深思的东西，您也可以通过以下条件语句来实现这一点：

```
$animals = array('Animal 1', 'Animal 2', 'Animal 3');
$email_message = "";
$firstTime = true;
foreach ($animals as $an) {
    if ($firstTime === true) {
        $email_message .= "Favorite Animals: ".$an." ,\n";
        $firstTime = false;
    } else {
        $email_message .= $an." ,\n";
    }
}

$email_message = substr($email_message, 0, -3);
echo $email_message; 
```

# c# - 关于asp.net C#中的倒数计时器

> ID：12786131
> 
> 赞同：3
> 
> 时间：2012-10-08T16:59:23.707
> 
> 标签：c#, countdown

我对代码没有任何问题，它工作正常。但是，我正在寻找这种倒计时的替代方法。

这是代码

当前页面.aspx

```
<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
    <div>

    </div>
    <asp:UpdatePanel ID="UpdatePanel1" runat="server">
        <ContentTemplate>
            <asp:Label ID="Label2" runat="server" Text="You will be redirected in..."></asp:Label>
            <asp:Timer ID="Timer1" runat="server">
            </asp:Timer>
            <asp:ScriptManager ID="ScriptManager1" runat="server">
            </asp:ScriptManager>
            <asp:Label ID="Label1" runat="server" Text="10"></asp:Label>
        </ContentTemplate>
    </asp:UpdatePanel>
    </form>
</body>
</html> 
```

文件隐藏代码

```
using System;

namespace WebApplication1
{
    public partial class _Default : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            Timer1.Enabled = true;
            Timer1.Interval = 1000;
            Timer1.Tick += new EventHandler<EventArgs>(Timer1_Tick);
        }
        void Timer1_Tick(object sender, EventArgs e)
        {
            int i=(Convert.ToInt16(Label1.Text));
            i = i - 1;
            Label1.Text = i.ToString();
            if (i<0)
            {
                Timer1.Enabled = false;
                Response.Redirect("TargetPage.aspx");
            }
        }
    }
} 
```

我正在寻找的只是任何替代方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:17:32.287

如果您的计时器不需要来自服务器端的任何东西，那么您可能应该只使用 JQuery 或纯 Javascript 在客户端做一个计时器 - 它会使客户端-服务器通信保持低 (0)。

如果您的支持确实发生了一些事情，您必须检查我认为您仍然应该将其更改为一些 JQuery/Javascript + 一些 Web 服务或 Web 方法或简单的 ashx 处理程序。尽管您提供的内容确实有效，但我认为将其保留在页面功能之外会更干净。

有很多客户端计时器：[http](http://code.cyntaxtech.com/plugins/jquery-timer/demo) ://code.cyntaxtech.com/plugins/jquery-timer/demo 或这个[jQuery 倒计时计时器](https://stackoverflow.com/questions/3785029/jquery-countdown-timer#3785057)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T17:04:01.927

除非您需要通过 c# 代码动态指定重定向位置，否则您可以实现纯 JavaScript 客户端方法。它可以是一个简单的 javascript 函数，它将使窗口导航到所需的页面。

# java - 人们如何在使用 java applet 的同时仍然拥有完整的功能？

> ID：12786133
> 
> 赞同：3
> 
> 时间：2012-10-08T16:59:47.690
> 
> 标签：java, graphics, applet

我曾多次尝试这样做，但都失败了。例如，游戏 RuneScape 是一款使用小程序的流行网页游戏。有能够绘制小程序的botter等等，他们是怎么做到的？

这是小程序本身的文本/图像示例

![在此处输入图像描述](../Images/5de9f5c88db0d1ea445a7a098124bf97.png)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-25T03:19:17.163

嗯...很奇怪的问题，因为您实际上问*的是如何创建游戏*或其他东西：S

在“图层”上绘图是某种微不足道的 Graphics2D + Swing 任务:)

您可以使用 ：

*   A) [JLayeredPane](http://docs.oracle.com/javase/tutorial/uiswing/components/layeredpane.html)
*   B) 使用[JLabel](http://docs.oracle.com/javase/tutorial/uiswing/components/label.html)作为层
*   C）在[多线程](http://blue-walrus.com/?p=386)模式下绘制您的*JLabel 图层*或不丢失后台进程的东西......

因此，在编写该游戏或任何您尝试涉及的图层效果之前，您应该更好地学习 Java 主题，例如

*   二维图形
*   摇摆/AWT
*   线程（多线程）

* * *

报告是否有帮助

# javascript - 在嵌入式 IE 中调试网站

> ID：12786135
> 
> 赞同：3
> 
> 时间：2012-10-08T16:59:50.647
> 
> 标签：javascript, mshtml, firebug-lite

在工作中，我们有一个带有拨号器组件的电话系统。拨号器组件包括一个代理脚本应用程序，这是一个嵌入 MSHTML 的相当简单的应用程序。当您登录到拨号程序时，它会在嵌入式浏览器控件中加载给定的 URL。我无权访问应用程序的源代码。

我目前正在使用 firebug-lite 进行调试，但它还有很多不足之处。有替代品吗？请注意，我当前运行的是 IE9，并且我在 HTML 中设置了元标记以强制嵌入式浏览器使用 IE8 标准模式（当我使用 IE9 模式时，应用程序根本无法运行）。

对于这些情况，是否有替代 firebug-lite 的方法？有谁知道让 IE8/9+ 开发人员工具在嵌入式 IE 中工作的方法？

# lisp - SICP中的一个例子

> ID：12786138
> 
> 赞同：2
> 
> 时间：2012-10-08T17:00:02.980
> 
> 标签：lisp, scheme, racket, sicp

这是 SICP 中的一个示例，我输入它但它有一个错误。

```
(define (sum term a next b)
  (if (> a b)
      0
      (+ (term a)
         (sum term (next a) next b)))) 
```

这是错误：

> 函数调用：在左括号后需要一个函数，但找到了一个变量

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:59:06.963

如果您正在使用 DrRacket，您可能正在“初学者学生语言”模式下运行 DrRacket。在介绍性 CS 级别，该特定语言级别模式禁用高阶功能。 [另一方面， SICP](http://mitpress.mit.edu/sicp/)假定允许高阶过程的语言级别。

假设是这种情况，您可以通过调整 DrRacket 来解决此问题，使其使用允许高阶程序的语言级别，例如[#lang racket](http://docs.racket-lang.org/guide/intro.html)。

请参阅[选择一种语言](http://docs.racket-lang.org/drracket/choose-language.html)：将 DrRacket 切换到“使用源中声明的语言”，并在程序的第一行设置：

```
#lang racket 
```

那应该让你编写你的函数。

* * *

顺便说一下DrRacket[对 SICP 的专门支持；](http://planet.racket-lang.org/package-source/neil/sicp.plt/1/17/planet-docs/sicp/index.html)如果你要通过 SICP，你可能想要使用它。您可以通过将顶部的*#lang*行更改为：

```
#lang planet neil/sicp 
```

第一次使用它运行程序需要一点时间，因为它会自动安装支持软件；包的后续使用应该很快。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T17:24:25.013

我相信你调用程序的方式有问题。例如，这适用于上面的代码：

```
(sum values 1 add1 10)
> 55 
```

# python - 更新模型后 Django 管理站点不显示新列

> ID：12786147
> 
> 赞同：1
> 
> 时间：2012-10-08T17:00:35.913
> 
> 标签：python, django, django-models, django-admin, django-views

我对 Django 框架有一个问题。我改变了一个模型插入这个：

```
masterweb_link = models.CharField(_('masterweb_link'), help_text=_('link to MasterWeb tour'), max_length=300, null = True, blank = True) 
```

之后我是这样的：-`python manage.py syncdb`

并且 db_application 已更改，现在我可以在管理面板中使用新列。在我的本地电脑上，当我尝试检查时一切都很好。

**但是，当我尝试在主机上执行此操作时，毕竟我的操作模型也修改和数据库，但 Django 管理站点没有显示新列。**

当我做我所有的动作时，我没有错误！请帮忙。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:01:53.390

`syncdb`不修改现有表。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:17:32.117

正如 Daniel Roseman 所提到的，`syncdb`不会修改现有表。

为此，您需要使用`south` [http://south.aeracode.org/](http://south.aeracode.org/)

将现有应用程序转换为使用`south`. 首先，您可以`easy_install`通过键入来安装它`easy_install South`。如果您希望从 Mercurial 或快照 tar.gz 安装它，他们在[此处](http://south.readthedocs.org/en/latest/installation.html#installation)提供了说明。

安装后，您需要将现有应用程序转换为使用`south`. 在应用程序的`settings.py`文件中，添加`south`到`INSTALLED_APPS`然后重新运行`python manage.py syncdb`. 所有这些都是为`south`应用程序添加数据表。它还没有对你的模型做任何事情。

现在，您要撤消在原始帖子中所做的更改。回到过去的样子。我们将在几分钟内进行更改，但首先，我们需要说明您的应用程序*现在*`south`的样子。

 *`python manage.py convert_to_south <appname>`替换`<appname>`为您的应用程序的名称。这将为您的应用程序创建初始迁移文件。

将这些更改提交到您的版本控制（或通过您的正常流程将应用程序分发给您的其他开发人员）。它应该是`migrations`在您的应用程序目录中命名的新文件夹。您将需要提交/分发此文件夹中出现的所有文件。

**一次性的事情**：安装应用程序的任何地方都需要运行此命令以转换为使用 south。`python manage.py migrate <appname> 0001 --fake`根据[文档](http://south.readthedocs.org/en/latest/convertinganapp.html#converting-an-app)，这是必需的，因为 convert_to_south 进行的初始迁移将尝试创建所有现有表；相反，您告诉 South 它已使用 应用`--fake`，因此下一次迁移将正确应用。

现在，我们将做出改变。重新编辑您的模型以进行所需的更改。保存模型。

运行这个命令：`python manage.py schemamigration <appname> --auto`. South 将分析您的模型以及它们如何变化并创建迁移脚本。这就是为什么我们需要将您的更改恢复到其原始状态。否则，`south`将不知道它从什么迁移而来。

完成后，运行`python manage.py migrate <appname>`。同样，提交或分发该`migrations`文件夹。部署的每个位置都需要运行`python manage.py migrate <appname>`。

将来，当您进行架构更改时，您将运行 `python manage.py schemamigration <appname> --auto`以创建迁移脚本并`python manage.py migrate <appname>`安装更改。

我还建议您查看文档以了解`south`迁移期间能够处理的其他内容。以上应该让你开始。South 的文档位于[此处](http://south.readthedocs.org/en/latest/index.html)。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-09-19T04:59:09.497

如果没有任何效果，请尝试删除模型文件中的模型，然后使用 django Evolution 并尝试在重置 django_evolution 之后使用 django Evolution，然后在所有这些尝试再次更改您的模型文件后再次运行这些步骤，我希望这能解决问题，它在我的情况下工作......

以下是步骤：

1 将模型文件更改为旧文件。

2.  然后运行同步数据库。

    ```
     ./manage.py syncdb 
    ```

3.  然后运行进化：

    ```
     ./manage.py evolve --hint 
    ```

4.  执行进化：

    ```
     ./manage.py evolve --hint -x 
    ```

5.  重置 django 进化：

    ```
     ./manage.py reset django_evolution 
    ```

6.  运行同步数据库：

    ```
     ./manage.py syncdb 
    ```

现在，将模型文件更改为新模型并再次运行所有步骤。

我希望这能帮到您。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-22T20:52:12.347

还要检查您的 admin.py 文件，[Django 教程的第二部分让](https://docs.djangoproject.com/en/1.5/intro/tutorial02/)您对其进行硬编码。*

# html - 代码重定向问题

> ID：12786153
> 
> 赞同：0
> 
> 时间：2012-10-08T17:01:02.907
> 
> 标签：html

> **可能重复：**
> [密码 HTML 重定向](https://stackoverflow.com/questions/12783646/password-html-redirect)

我在使用下面的代码时遇到了一些问题，特别`window.location="http://www.google.com"`是当我输入正确的密码时，我无法让它重定向。

```
 <div class="buttons">
        <input class="orangebutton" type="submit" value="Continue" onclick="if (document.getElementById('password').value == 'hi') window.location="http://www.google.com" else alert('Wrong Password!');" />
    </div> 
```

更新：这就是我现在所拥有的，重定向仍然不起作用。

```
 <input class="orangebutton" type="submit" value="Continue" onclick="if (document.getElementById('password').value == 'hello') window.location='http://www.google.com'; else alert('Wrong Password!');" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:03:20.677

您必须转义双引号，最好使用`.href`作为字符串的属性，而不是`location`单独作为对象的属性，如下所示：

```
window.location.href='http://www.google.com' 
```

**更新：**
使用单引号而不是双引号，因为后者无法在 html 元素的上下文中转义。感谢 James Beilby 发现了这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T17:03:59.460

如果没有更多详细信息，我无法确定这是唯一的问题，但您在以下位置使用双引号：

```
window.location="http://www.google.com" 
```

由于您使用双引号来封装整个 onclick 语句，因此您需要使用单引号：

```
window.location='http://www.google.com' 
```

此外，您需要在关键字“else”之前使用分号。整个处理程序变为：

```
onclick="if (document.getElementById('password').value == 'hi') window.location='http://www.google.com'; else alert('Wrong Password!');" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T17:10:19.417

您的代码中有两个错误：

1)`onclick`参数的值包括`"`并且字符串在该点结束。请改用`'`（单引号）。

2）应该在关键字`;`之前。`else`

所以，最后应该是`window.location='http://www.google.com';`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T17:03:06.730

您的语法有错误。你不应该`"`在`onclick=""`. 所以将其替换为：

```
<input class="orangebutton" type="submit" value="Continue"
       onclick="if (document.getElementById('password').value == 'hi') window.location='http://www.google.com' else alert('Wrong Password!');" /> 
```

# c# - 通过 Gmail SMTP 发送电子邮件时，如何使用 FROM 字段中的任何电子邮件地址？

> ID：12786154
> 
> 赞同：7
> 
> 时间：2012-10-08T17:01:05.357
> 
> 标签：c#, gmail, smtpclient

我正在尝试使用以下代码在 C# 中使用 gmail SMTP 发送电子邮件

```
MailMessage message = new MailMessage();
message.To.Add("my email");
message.Subject = "subject";
message.From = new MailAddress("any email");
message.Body = "body";

message.Attachments.Add(new System.Net.Mail.Attachment(path));
SmtpClient smtp = new SmtpClient("smtp.gmail.com", 587);
smtp.EnableSsl = true;
smtp.DeliveryMethod = SmtpDeliveryMethod.Network;
smtp.UseDefaultCredentials = false;
smtp.Credentials = new System.Net.NetworkCredential("my user", "my pass");

smtp.Send(message); 
```

当我收到电子邮件时，**FROM**字段已填充`my user`。我正在使用`UseDefaultCredentials`as `false`。当我查看结果时，**FROM**字段填充有`my user`. **FROM**字段不应该填写`any email`吗？如何使用`any email`发件人发送电子邮件？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:11:38.720

我使用同样的方式使用 GMail 作为服务发送电子邮件。我最初将该`.From`属性设置为“noreply@mydomain.com”，但电子邮件仍然到达时将 From 标头设置为用于身份验证的帐户。

面对这个问题，我使用了属性`ReplyToList`（`.ReplyToList.Add(MailAddress))`

**编辑：**

有关详细信息，请参阅[Google Groups 上的此线程](https://productforums.google.com/forum/?fromgroups=#!topic/gmail/o5hlYNQNxmk)。此外，[有关 Stack Overflow 的相关答案](https://stackoverflow.com/a/8954767/161052)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T17:15:51.383

运行您的代码片段后，我得到：

```
Return-Path: <my user>
Received: from Psi ([80.92.234.64])
        by mx.google.com with ESMTPS id f1sm20531634wiy.2.2012.10.08.10.07.49
        (version=TLSv1/SSLv3 cipher=OTHER);
        Mon, 08 Oct 2012 10:07:49 -0700 (PDT)
Message-ID: <50730865.2152b40a.13ea.28ec@mx.google.com>
Sender: Roman R. <my user>
MIME-Version: 1.0
From: any email
To: my email
Date: Mon, 08 Oct 2012 10:07:49 -0700 (PDT)
Subject: Subject
Content-Type: text/plain; charset=us-ascii
Content-Transfer-Encoding: quoted-printable

Body 
```

`Sender`是用于通过 Google Mail 进行身份验证的电子邮件地址。`From`是代码中提供的“来自”。接收应用程序可能会混淆两者，其余的看起来就像预期的一样。一些邮件客户端将 From+Sender（当它们不同时）显示为“由 Sender 代表 From 发送”。

您可能会担心 Google Mail 仍会通过`Sender`字段显示发送电子邮件的帐户，但这就是它的工作原理。您确实从该帐户发送。

而且，另一个可能的原因是`From`邮件地址本身。**如果您将其作为您自己的地址之一**添加到您的 Google Mail 帐户（并通过带有链接的测试电子邮件确认），那么 Google Mail 将允许将其放入`From`字段中。否则它可能会丢弃它并用`Sender`.

# sql - 在 App_Data 中删除了我的 .mdf 文件以尝试刷新数据库。项目现已中断

> ID：12786158
> 
> 赞同：1
> 
> 时间：2012-10-08T17:01:24.490
> 
> 标签：sql, asp.net-mvc, visual-studio, visual-studio-2012

我正在寻找一种方法来刷新项目“代码优先”.mdf 并删除该文件，希望在重建项目时，它会构建一个新项目。

现在，曾经显示我的数据的列表是空的，如果我尝试创建一个新对象，我会收到 JavaScript 运行时错误：“jQuery”未定义。

如何重置项目以生成新数据库，就像我第一次编译它时一样？

非常感谢

# ios5 - Monotouch 中不推荐使用的 IOS6 方法

> ID：12786161
> 
> 赞同：1
> 
> 时间：2012-10-08T17:01:34.143
> 
> 标签：ios5, xamarin.ios, ios6, deprecated, obsolete

我们的应用程序现在针对 ios5.1。安装 MT 6.0.2 后，不推荐使用的警告填充了构建日志。不推荐使用的方法应该仍然保留在源中还是应该被替换？

例如，我应该将以下内容替换为：

```
public override bool ShouldAutorotateToInterfaceOrientation (UIInterfaceOrientation toInterfaceOrientation)
{
    switch(toInterfaceOrientation) {
        case UIInterfaceOrientation.LandscapeLeft:
        case UIInterfaceOrientation.LandscapeRight:
            return true;
        default:
            return false;
    }
} 
```

和

```
public override UIInterfaceOrientationMask GetSupportedInterfaceOrientations ()
{
    return UIInterfaceOrientationMask.Landscape;
} 
```

或者在代码库中有两个被覆盖的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T17:19:04.537

**过时**的方法有几个原因。您从编译器警告中获得的消息将告诉您方法被**废弃**的原因。IOW iOS不推荐使用的方法是**过时**方法的子集。

当一个新的 iOS 版本发布时，Apple 经常弃用几个 API。这意味着 API：

*   已被更好/不同的东西所取代；
*   可能在某个时候（**不是**当前的 iOS 版本）从 iOS 中删除（这种清理并不经常发生）；

所以这些是**警告**，而不是错误。您应该审查并决定如何处理它们。例如

*   如果您正在编写新的代码/应用程序，至少需要 iOS6，那么您应该只使用新的 API（而不是弃用的 API）；

*   如果您正在更新一个要求您与早期 iOS 版本（例如 5.1）兼容的应用程序，那么您可能希望使用较旧的 API，并在有意义的情况下逐步更新它们（例如 iOS6 特定功能、不同代码路径...）。

*   如果您的应用程序支持的最低 iOS 版本是 4.2，则不应使用 4.0、3.2 中已弃用的 API ...但您也应注意不要使用较新的 API。

在您的示例中，旧版本`ShouldAutorotateToInterfaceOrientation`适用于 iOS5.1 和 iOS6。所以**最简单**的解决方案是只要你想支持 iOS 5.x，就一直使用这个 API。

覆盖这两者意味着（通常）iOS6 将调用较新的，而 iOS5 将调用较旧的。这会使测试变得困难，并且在构建应用程序时不会删除过时的警告。但是，当您可以从较新的 iOS API 中获得更好的东西时，这样做是否有意义（对于某些 API）。

# java - 如何将bundleContext引用传递给SpringDM中的bean

> ID：12786169
> 
> 赞同：1
> 
> 时间：2012-10-08T17:02:02.347
> 
> 标签：java, spring, osgi

如何传递`BundleContext`对 bean 定义 xml 中的引用？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:02:02.347

你可以这样做：

```
<bean name="myBean" class="my.Class">
  <property name="bundleContext" ref="bundleContext" />
</bean> 
```

# php - 如何添加多维度数组的值？

> ID：12786170
> 
> 赞同：0
> 
> 时间：2012-10-08T17:02:03.227
> 
> 标签：php, codeigniter

我正在使用 CODEIGNITER 购物车类。以下是`VAR_DUMP`购物车内容。我有一个单选字段，可让您选择一个`SHIP`选项。问题是我的 PHP 没有获取`SHIP`值，而只返回购物车值中的最后一项并乘以购物车项目的总数。如何`SHIP`从每个项目中获取数组并对值求和？

# PHP

```
$ship_array = $this->cart->ship($item['rowid']); 
foreach ($ship_array as $index => $ship_option){
        #SHIPPING CALC

        $ship_total = 0;

        foreach ($cart as $item)
        {
         $ship_total += $ship_option;
        }

echo '<label><input type="radio" name="print" class="option" data-number="'. $ship_total .'" value="'. $index .'"/> UPS '. $index .' </label> '; } 
```

^此代码只会从`ship`购物车中的最后一项中获取值。结果将显示`ground`运费为 43.35 美元（14.45（陆运价值 * 3 件总物品）

显然这是错误的，我需要添加每个的运费值`$item`

# VAR_DUMP 数组（购物车中的所有商品）

```
array (size=3)
  '554ed09a5f80917741359cc9da50a75c' => 
    array (size=8)
      'rowid' => string '554ed09a5f80917741359cc9da50a75c' (length=32)
      'id' => string '101' (length=3)
      'qty' => string '1' (length=1)
      'price' => string '112.5' (length=5)
      'name' => string 'Business Card' (length=13)
      'ship' => 
        array (size=3)
          'Ground' => float 9.73
          '2nd Day Air' => float 18.54
          'Overnight' => float 26.27
      'options' => 
        array (size=2)
          'Print Package' => string 'Pro' (length=3)
          'Design Package' => string 'Premium' (length=7)
      'subtotal' => float 112.5

  '675d8a197a25e6720af7ac05707fee40' => 
    array (size=8)
      'rowid' => string '675d8a197a25e6720af7ac05707fee40' (length=32)
      'id' => string '102' (length=3)
      'qty' => string '1' (length=1)
      'price' => string '446' (length=3)
      'name' => string 'Booklet' (length=7)
      'ship' => 
        array (size=3)
          'Ground' => float 14.45
          '2nd Day Air' => float 22.57
          'Overnight' => float 34.12
      'options' => 
        array (size=2)
          'Print Package' => string 'Plus' (length=4)
          'Design Package' => string 'Ultimate' (length=8)
      'subtotal' => int 446

  'aea5d2f84151e65a0a1e50371aad26aa' => 
    array (size=8)
      'rowid' => string 'aea5d2f84151e65a0a1e50371aad26aa' (length=32)
      'id' => string '102' (length=3)
      'qty' => string '1' (length=1)
      'price' => string '325' (length=3)
      'name' => string 'Booklet' (length=7)
      'ship' => 
        array (size=3)
          'Ground' => float 14.45
          '2nd Day Air' => float 22.57
          'Overnight' => float 34.12
      'options' => 
        array (size=2)
          'Print Package' => string 'Pro' (length=3)
          'Design Package' => string 'Premium' (length=7)
      'subtotal' => int 325 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:04:04.747

移动

```
$ship_total = 0; 
```

超出第一个 foreach 循环。

编辑使用这个：

```
$ship_array = $this->cart->ship($item['rowid']); 
$ship_total = 0; //this moved
foreach ($ship_array as $index => $ship_option){
        #SHIPPING CALC

        foreach ($cart as $item)
        {
         $ship_total += $item['ship'][$ship_option] * $item['qtq']; //this changed
        }
        echo '<label><input type="radio" name="print" class="option" data-number="'. $ship_total .'" value="'. $index .'"/> UPS '. $index .' </label> ';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:06:39.320

你可以试试

```
$array = array(     
'554ed09a5f80917741359cc9da50a75c' => array('rowid' => '554ed09a5f80917741359cc9da50a75c','id' => '101','qty' => '1','price' => '112.5','name' => 'Business Card','ship' => array('Ground' => 9.73,'2nd Day Air' => 18.54,'Overnight' => 26.27),'options' => array('Pr Package' => 'Pro','Design Package' => 'Premium','subtotal' => 112.5)),
'675d8a197a25e6720af7ac05707fee40' => array('rowid' => '675d8a197a25e6720af7ac05707fee40','id' => '102','qty' => '1','price' => '446','name' => 'Booklet','ship' => array('Ground' => 14.45,'2nd Day Air' => 22.57,'Overnight' => 34.12),'options' => array('Pr Package' => 'Plus','Design Package' => 'Ultimate','subtotal' => 446)),
'aea5d2f84151e65a0a1e50371aad26aa' => array('rowid' => 'aea5d2f84151e65a0a1e50371aad26aa','id' => '102','qty' => '1','price' => '325','name' => 'Booklet','ship' => array('Ground' => 14.45,'2nd Day Air' => 22.57,'Overnight' => 34.12),'options' => array('Pr Package' => 'Pro','Design Package' => 'Premium','subtotal' => 325)));

$shipArray = $array ; // Replace with $this->cart->ship($item['rowid']);
$shipTotal = array("prize"=>0,"ground"=>0,"air"=>0,"overnight"=>"0");
foreach ($shipArray as $index => $shipOption){
    $shipTotal['prize'] += $shipOption['qty'] * $shipOption['price'];
    $shipTotal['ground'] += $shipOption['ship']['Ground'];
    $shipTotal['air'] += $shipOption['ship']['2nd Day Air'];
    $shipTotal['overnight'] += $shipOption['ship']['Overnight'];
}

var_dump($shipTotal); 
```

输出

```
array
  'prize' => float 883.5
  'ground' => float 38.63
  'air' => float 63.68
  'overnight' => float 94.51 
```

# javascript - 从多个下拉列表中获取选定的值

> ID：12786173
> 
> 赞同：0
> 
> 时间：2012-10-08T17:02:13.353
> 
> 标签：javascript, jquery

如果用户从 div 中的任何下拉列表中更改条目，`SalePlugin`那么它将需要获取所有选定的值并将其传递给 POST。

应该怎么做？

```
$('.SalePlugin > *').live('change', function(){
 var SalePluginData = $(this).closest('.SalePlugin').find('select').serialize();
 $.post(host + '/ajax/file.php', { Data: SalePluginData }, function(data){
            console.log(data);
 });
}); 
```

HTML

```
<div class='SalePlugin'> 
 <ul>
   <li> 
      <select name='something[]'> 
        <option value='one'>One</option>
        <option value='two'>Two</option>
      </select> 
    </li>
 </ul>
 <ul>
   <li> 
      <select name='something[]'> 
        <option value='one'>One</option>
        <option value='two'>Two</option>
      </select> 
    </li>
 </ul>
 <ul>
   <li> 
      <select name='foo[]'> 
        <option value='one'>One</option>
        <option value='two'>Two</option>
      </select> 
    </li>
 </ul>
</div> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-10-08T17:07:46.197

要获取下拉列表中的选定项目，请使用此

```
$(".SalePlugin option:selected"); 
```

这将获得选定的项目。您可以将它们存储在数组中或进行循环并做任何您想做的事情。

```
for (var i = 0; i < $(".SalePlugin option:selected").length; i++) {
    values[i] = $($(".SalePlugin option:selected")[i]).attr('value');
} 
```

# git - 在 Git 中创建无错误的历史记录

> ID：12786176
> 
> 赞同：0
> 
> 时间：2012-10-08T17:02:18.520
> 
> 标签：git, debugging

今天我`git bisect`成功地追踪了引入错误的提交。当我进入二分法时，我注意到实际上有两个错误，在两个单独的提交中引入。现在我喜欢修复其中一个错误，然后`git bisect`再次使用以找到第二个错误。为了做到这一点，我认为我应该修复第一个错误，以便该错误在历史的每个阶段都消失，对吗？也就是说，我应该修复引入错误的提交，然后我应该调整应用于错误代码的每一个更改。只有这样我才能开始第二次平分以寻找第二个错误。

是否可以修改过去的提交，以便 git 仍然知道这些提交是对现有提交的修改？当然，其他开发人员应该只能获取错误修复，而不是完整的新历史。也就是说，任何用新哈希替换旧提交的解决方案都行不通。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T01:14:53.510

请记住，使用 git-bisect 在决定树是否好之前，您基本上可以做任何事情。

因此，想到的一个解决方案是每次使用 git-apply 手动将带有第一个修复（可能使用 git-diff 生成）的补丁应用到工作树。

您可能需要在每次二等分后使用 git reset --hard 或类似方法清除补丁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:19:30.290

重写已经与其他开发人员共享的历史记录通常是不好的做法。你可能应该用你的错误修复做出一个新的提交，然后推送它而不是重写历史。

也就是说，是的，您可以修改过去的提交。假设我想在这里更改提交 B：

```
* 909debb (HEAD, master) C
* 5a12c7f B
* cfe7820 A 
```

我最喜欢的方法是使用交互式变基。

```
% git rebase -i HEAD~2 
```

这将打开一个编辑器，其中包含以下内容：

```
pick 5a12c7f B
pick 909debb C 
```

`pick`将要更改`edit`的提交更改为：

```
edit 5a12c7f B
pick 909debb C 
```

写文件。

```
% git rebase -i HEAD~2
Stopped at 5a12c7f... B
You can amend the commit now, with

        git commit --amend

Once you are satisfied with your changes, run

        git rebase --continue 
```

然后进行更改：

```
% git add <files>
% git commit --amend -m 'Updated B'
% git rebase --continue 
```

现在我的历史看起来像这样：

```
* bf4a3a7 (HEAD, master) C
* b79ab6f Updated B
* cfe7820 A 
```

# jsf - 表单提交导致源代码被简单地显示而不是被解释

> ID：12786178
> 
> 赞同：0
> 
> 时间：2012-10-08T17:02:19.207
> 
> 标签：jsf, facelets

我正在尝试创建一个登录页面，用于检查数据库中的用户名和密码。当我单击提交按钮时，它会显示welcome.xhtml 文件的代码，而不是显示欢迎页面。谁能告诉我如何解决这个问题。

在更改 login.xhtml 以使用 facelets 后，我仍然遇到同样的问题。

登录.xhtml：

```
<html lang="en"
    xmlns="http://www.w3.org/1999/xhtml"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">  

    <h:body>

      <h:form>

          <p>
              <h:inputText
                  id="username"
                  title="Username"
                  value="#{userBean.username}">

              <h:inputText
                  id="password"
                  title="Password"
                  value="#{userBean.password}">
              </h:inputText>

              <h:commandButton id="submit" value="Submit" action="#{userBean.validate}"/>
          </p>

      </h:form>
  </h:body> 
```

托管豆：

```
@Stateless
public class userBean implements Serializable {

    private String username, password;
    private String response = "";
    private UserFacade userFacade;

    public userBean() {
    }

    public String getPassword() {
        return password;
    }

    public void setPassword(String password) {
        this.password = password;
    }

    public String getUserName() {
        return username;
    }

    public void setUserName(String username) {
        this.username = username;
    }

    public String validate(){
      System.out.println("in bean");
        response = userFacade.validateUser(username, password);

      if (response.equals("MATCH"))          
          return "welcome.xhtml";
      else
          return "login.xhtml";

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T03:52:17.137

您是否为 .xhtml 页面顶部的标签指定了 xhtml 声明和 jsf 声明？

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" 
    "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml"
    xmlns:ui="http://java.sun.com/jsf/facelets"
    xmlns:h="http://java.sun.com/jsf/html"
    xmlns:f="http://java.sun.com/jsf/core">

<h:body>
   your code here....
</h:body>

</html> 
```

在您的 web.xml 中是否指定了以下内容，

```
<context-param>
    <param-name>javax.faces.DEFAULT_SUFFIX</param-name>
    <param-value>.xhtml</param-value>
  </context-param>
<servlet-mapping>
    <servlet-name>Faces Servlet</servlet-name>
    <url-pattern>/faces/*</url-pattern>
  </servlet-mapping> 
```

在您的托管 bean 中尝试指定“faces/”

```
if (response.equals("MATCH"))          
      return "faces/welcome.xhtml";
  else
      return "login.xhtml"; 
```

在您的 .xhtml 登录文件中使用表单而不是`<h:form>`

```
<form>
</form> 
```

尝试在 faceConfig 中指定导航规则

```
<navigation-rule>
  <display-name>login.xhtml</display-name>
  <from-view-id>/faces/login.xhtml</from-view-id>
  <navigation-case>
   <from-action>#{userBean.validate}</from-action>
   <from-outcome>welcome.xhtml</from-outcome>
   <to-view-id>/faces/welcome.xhtml</to-view-id>
  </navigation-case>
 </navigation-rule> 
```

一些资源供您参考， [http://docs.oracle.com/cd/E14545_01/help/org.eclipse.jst.jsf.facelet.doc.user/html/gettingstarted/tutorial/JSF%20Facelets%20Tools%20Tutorial。 html](http://docs.oracle.com/cd/E14545_01/help/org.eclipse.jst.jsf.facelet.doc.user/html/gettingstarted/tutorial/JSF%20Facelets%20Tools%20Tutorial.html)

# c# - 在 C# 2012 中扫描属性

> ID：12786184
> 
> 赞同：0
> 
> 时间：2012-10-08T17:02:48.680
> 
> 标签：c#

是否引入了一种新方法来扫描 VS 2012 C# 中选择的文件的属性？例如扫描文件的属性，如只读、系统和隐藏以进行防病毒。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:31:36.197

不，没有新方法，旧方法很好用。这是当前存在的方法的未经测试的示例

```
Directory.GetFiles("path").Select(file => File.GetAttributes(file) == FileAttributes.ReadOnly); 
```

# ios - 在工具栏上方弹出 iAd

> ID：12786186
> 
> 赞同：2
> 
> 时间：2012-10-08T17:02:58.427
> 
> 标签：ios, iad

我有一个带有 UINavigationController 的应用程序，我将工具栏设置为可见。我想显示 iAd，但它们总是从屏幕的最底部弹出。我正在调整尺寸——这是一个日志：

```
2012-10-08 09:52:17.722 Whos Here[21330:c07] INFO showBannerView:animated:
2012-10-08 09:52:17.723 Whos Here[21330:c07] INFO layoutAnimated with ADBannerView(#c14fed0, {{0, 436}, {320, 50}},  child of UIView(#c153930)
2012-10-08 09:52:17.724 Whos Here[21330:c07] INFO layoutAnimated content frame {{0, 0}, {320, 416}}
2012-10-08 09:52:17.724 Whos Here[21330:c07] INFO layoutAnimated banner frame {{0, 436}, {320, 50}}
2012-10-08 09:52:17.724 Whos Here[21330:c07] INFO layoutAnimated shrinking content frame {{0, 0}, {320, 366}}
2012-10-08 09:52:17.725 Whos Here[21330:c07] INFO layoutAnimated shrinking banner frame {{0, 366}, {320, 50}} 
```

我是否在尝试做一些根本不正确或不好的事情（即反对 HIG）？

谢谢，

史蒂夫

# progress-4gl - 有没有办法突出显示正在进行的屏幕输出？

> ID：12786188
> 
> 赞同：0
> 
> 时间：2012-10-08T17:03:05.007
> 
> 标签：progress-4gl, openedge

我正在组装一个用于数据库查找的浏览/分页系统，并且想知道是否有一种方法可以在 DISPLAY 中突出显示输出（或反转 bg 和 fg 颜色），或者可能类似于 UNDERLINE 的东西，用作选择用于浏览的标线。

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T21:02:36.093

快速简便的方法是这样的：

```
define variable x as character no-undo initial "abc123".

color display messages x.

display x.

pause. 
```

# php - PHP上传文件继承权限错误使用Windows IIS Server

> ID：12786191
> 
> 赞同：6
> 
> 时间：2012-10-08T17:03:07.713
> 
> 标签：php, windows, iis, permissions, download

我的同事一直在通过托管在 Windows Server 2008 IIS 7 上的 PHP 上传文件，但她在下载文件时遇到了问题，即使上传文件夹的适当权限已授予 IIS_USRS 组。原来上传的文件不是！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T03:26:02.527

希望这可能对其他人有所帮助，我在这里研究并找到了解决方案：

[http://www.howyoudo.info/index.php/how-to-fix-windows-server-upload-file-inherit-permissions-error/](http://www.howyoudo.info/index.php/how-to-fix-windows-server-upload-file-inherit-permissions-error/)

简而言之，更改“upload_tmp_dir”（php.ini 文件中的路径）文件夹的权限以匹配您的 Web 应用程序文件夹权限。

如果您不能或不想更改临时文件夹（默认为系统临时文件夹）的权限。然后创建一个新的临时文件夹并为其设置所需的权限。然后更新 PHP INI upload_tmp_dir 值以指向该目录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2021-12-06T07:58:52.710

添加[https://web.archive.org/web/20171121192635/http://www.howyoudo.info/index.php/how-to-fix-windows-server-upload-file-inherit-permissions的内容-error/](https://web.archive.org/web/20171121192635/http://www.howyoudo.info/index.php/how-to-fix-windows-server-upload-file-inherit-permissions-error/)，以防此链接将来不可用（感谢蒂芙尼的评论）。

* * *

> 如何使用 Windows IIS 服务器修复 PHP 上传文件继承权限错误

> 如果您像我一样使用 Windows IIS，那么您已经花费了数小时试图弄清楚为什么您上传的文件不会继承正确显示所需的权限。幸运的是，答案非常简单，而且大多数人都不会想到。
> 
> 仅当您使用 PHP 上传文件时才会出现此问题。当您上传文件时，PHP 会将文件发送到硬盘驱动器上的临时目录（对我来说是 C:\Windows\Temp），然后将其复制到它的预期目录。一旦文件进入临时目录，它就会被分配该目录的权限。问题是当 Windows 复制该文件时，它会保留临时目录的权限，并且不会继承您的 Web 目录的权限。
> 
> 解决此问题的最简单方法是将您预期的 Web 目录的权限添加到临时目录。无需删除临时目录中已有的权限，只需将 web 目录的权限添加到它们即可。换句话说，请按照以下步骤操作
> 
> 1.  要更改临时上传目录的权限，请在 php.ini 文件中找到“upload_tmp_dir”。
> 2.  将其设置为您选择的目录（当然在您的 Web 文件夹之外）或将其保留为默认目录（对我来说是 C:\Windows\Temp）。
> 3.  浏览到此文件夹并将您的 Web 文件夹的权限添加到其中。
> 
> 就是这样！如您所见，它非常简单，只是 PHP 的人忘记告诉我们的一个小技巧。
> 
> 而且您知道，如果这两个文件夹位于不同的驱动器上，您就不会遇到这个问题，因此也不会阅读此内容。

# perl - perl 脚本中的 perl 内联编辑

> ID：12786194
> 
> 赞同：2
> 
> 时间：2012-10-08T17:03:27.117
> 
> 标签：perl

我的 perl 脚本中有以下行（我从 cshell 运行）

```
system("perl -p -i -e 's/\+[a-z]+\+//g' $file1"); 
```

我希望它删除所有被 + 加号包围的单词。相反，我收到以下错误消息。

> 量词不遵循正则表达式；由 <-- HERE in m/+ <-- HERE [az]++/ 在 -e 第 1 行标记。

怎么了？我给了反斜杠，为什么会出现这个错误？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:15:41.067

假设`$file1`contains `-foo bar.txt`，字符串文字

```
"perl -p -i -e 's/\+[a-z]+\+//g' $file1" 
```

产生字符串

```
perl -p -i -e 's/+[a-z]++//g' -foo bar.txt
                 ^      ^     ^   ^
                 |      |     |   |
                 +---- errors ----+ 
```

不需要时不要创建 shell 命令。直接启动就好了`perl`。

```
system("perl", "-p", "-i", "-e", 's/\+[a-z]+\+//g', '--', $file1) 
```

但是为什么要创建一个新流程呢？您可以使用以下内容执行完全相同的操作！

```
{
    local @ARGV = $file1;
    local $^I = '';
    while (<>) {
        s/\+[a-z]+\+//g;
        print;
    }
} 
```

或作为子：

```
sub fixer {
    my $pat = shift;
    local @ARGV = @_;
    local $^I = '';
    while (<>) {
        s/$pat//g;
        print;
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T17:09:20.030

尝试使用多参数版本`system`：

```
system("perl", "-p", "-i", "-e", 's/\+[a-z]+\+//g', $file1) 
```

这避免了调用 shell 并让它重新解释命令行。

# algorithm - 动态规划：在网格中找到总和最大的矩形

> ID：12786196
> 
> 赞同：1
> 
> 时间：2012-10-08T17:03:40.393
> 
> 标签：algorithm, dynamic-programming, maximize

我遇到了以下动态编程问题。

你有一个整数网格（所以包括负数）。找到数字总和最大的矩形。

知道如何为整个矩阵做这件事吗？

我为单个数组解决了它，所以我几乎遵循最长递增子序列所做的事情，但仅适用于连续数字。

```
def array_largest_block(sequence)
  len = sequence.size
  parents = [nil]*len
  my_largest = sequence
  largest = sequence.max

  for index in (1...len)
    if my_largest[index] < my_largest[index] + my_largest[index - 1]
      my_largest[index] = my_largest[index] + my_largest[index - 1]
      parents[index] = index - 1
      largest = [largest, my_largest[index]].max
    end
  end

  end_index_of_largest_block = my_largest.find_index(largest)
  i = end_index_of_largest_block
  res = []
  res << sequence[i]
  while !parents[i].nil?
    i = parents[i]
    res << sequence[i]
  end
  return {l_sum: largest, start: i, end: end_index_of_largest_block}
end 
```

所以我的想法是，

1.  找到矩阵中每个正方形的总和（仅 1x1 正方形）
2.  保存最大值以获得可能的答案
3.  从可能的最小矩形开始运行相同的东西并计算所有它们，直到找到最大值。哪个是数据库部分。

有任何想法吗？或者如果你们不知道确切的解决方案，我应该看哪种 DP 类型算法？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:11:49.407

这可以在 中完成`O(N^3)`，其中`N`是矩阵的大小。

您基本上选择矩形的左右列，然后以线性时间扫描行（使用预先计算的总和）。

```
int totalBestSum = -10000000;
for (int leftCol = 1; leftCol <= N; leftCol++)
   for (int rightCol = leftCol; rightCol <= N; rightCol++)
   {
      int curSum = 0, curBestSum = -10000000;
      for (int row = 1; row <= N; row++) {
         int rowSum = sumBetween(leftCol, rightCol, row);
         curSum += rowSum;
         if (curSum > curBestSum) curBestSum = curSum;
         if (curSum < 0) curSum = 0;                   
      }

      if (curBestSum > totalBestSum) totalBestSum = curBestSum;
   } 
```

`sumBetween`是一个函数，返回两列之间特定行上的数字之和。它可以使用预先计算的和在恒定时间内实现。

```
int sumBetween(int leftCol, int rightCol, int row)
{
    return sum[row][rightCol] - sum[row][leftCol - 1];
} 
```

计算`sum`数组：

```
for (int row = 1; row <= N; row++)
   for (int col = 1; col <= N; col++)
      sum[row][col] = sum[row][col - 1] + matrix[row][col]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:11:52.430

似乎是重复的，但仍然请看这里：[Getting the submatrix with maximum sum?](https://stackoverflow.com/questions/2643908/getting-the-submatrix-with-maximum-sum)

可以在`O(N^3)`.

你到底为什么要使用“NP-complete”标签？：D

# android - android布局在方向变化时加载不同的图像资源

> ID：12786198
> 
> 赞同：1
> 
> 时间：2012-10-08T17:03:48.020
> 
> 标签：android, android-layout

我想在 xml 中有一个解决方案或一个关键字来搜索什么来解决我的问题：

我有多个屏幕。`layout`每个屏幕在文件夹中都有自己的 xml 。例如代码的一部分：

```
 <RelativeLayout
        android:id="@+id/headerLayout"
        android:layout_width="fill_parent"
        android:layout_height="80dp"
        android:background="@drawable/header" >

        <Button
            android:id="@+id/btBack"
            android:layout_width="55dp"
            android:layout_height="33dp"
            android:layout_alignParentLeft="true"
            android:layout_marginLeft="10dip"
            android:layout_marginTop="10dip"
            android:background="@drawable/bt_back"
             />

    </RelativeLayout> 
```

现在，我想在 `"@drawable/header"`旋转时更改值运行时，最好配置和 Android 在 Java 代码中更改不是我。同样的事情也可以用 来完成
`"@drawable/bt_back"`，它是`bt_back.xml`文件`drawable`夹中的一个文件，并且有一个选择器。他的内容在这里：

```
<?xml version="1.0" encoding="utf-8"?>
<selector xmlns:android="http://schemas.android.com/apk/res/android">

    <!-- selected state -->
    <item android:drawable="@drawable/bt_back_pressed" android:state_pressed="true" android:state_selected="false"/>
    <item android:drawable="@drawable/bt_back_pressed" android:state_pressed="false" android:state_selected="true"/>
    <item android:drawable="@drawable/bt_back_pressed" android:state_pressed="true" android:state_selected="true"/>
    <!-- unselected state (default) -->
    <item android:drawable="@drawable/bt_back_normal"/>

</selector> 
```

现在在我想要drawable-hdpi，drawable-ldpi的文件夹中，我只需要放置这2个文件，android系统会根据用户设备dpi自动处理按下和正常状态的图像更改。

对于从纵向和横向旋转的标题，我想拥有同样的东西。例如，它应该将 header_port.png 替换为 header-land.png。

怎么可能？有任何想法吗？

我不想为景观使用不同的 .xml 布局，也不想在 Java 代码中挖掘。[也许在不同的文件夹中，这里](http://developer.android.com/guide/practices/screens_support.html)描述的标题资源？港口和陆地？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:14:10.467

您可以创建一个 drawable-land-hdpi 目录。将您的横向版本放在合格的文件夹中，android 应该会自动为您加载它们。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T17:27:39.270

要详细说明@toadzky 的答案，您可以为在[此](http://developer.android.com/guide/topics/resources/providing-resources.html#AlternativeResources)Android 开发人员页面上找到的任何限定符创建一个不同的可绘制目录，并在每个中放置具有相同名称的图像，android 会自动知道要使用哪个。对于 layout（或 layout-land 等）文件夹中的布局、值 xml 文件（例如，字符串资源——对本地化有用——或主题）、值文件夹中的布局或您通常使用的任何其他内容，情况也是如此在 res 文件夹中找到。

同样重要的是要注意，如果我没记错的话，它的优先级工作方式（关于它为资源选择的目录）是“排除所有不兼容目录后的第一次匹配”。

因此，如果您只有 drawable-hdpi 和 drawable，并且您有一个 mdpi 设备，它将消除所有符合 hdpi 的目录，并从剩余的目录中进行选择（因此您最终会得到 drawable 文件夹中的版本）。在链接页面上的“Android如何找到最佳匹配资源”下可以找到进一步的解释。

# c# - 在 C# 中访问 __VIEWSTATE 和 __EVENTVALIDATION

> ID：12786199
> 
> 赞同：2
> 
> 时间：2012-10-08T17:03:49.733
> 
> 标签：c#, asp.net, viewstate, eventvalidation

在[ASP.NET](http://en.wikipedia.org/wiki/ASP.NET)中，是否可以将 __VIEWSTATE 和 __EVENTVALIDATION 隐藏字段的值放入 C#（服务器端）中的变量中，比如说覆盖该`Render`方法？

我努力了：

```
protected override void Render(HtmlTextWriter writer)
{
    StringBuilder stringBuilder = new StringBuilder();
    StringWriter stringWriter = new StringWriter(stringBuilder);
    HtmlTextWriter htmlWriter = new HtmlTextWriter(stringWriter);

    base.Render(htmlWriter);
    string temp = stringBuilder.ToString();
} 
```

这给了我整个 ASP.NET 输出。我们可以通过使用字符串函数来获取值，但我发现它不是一个非常干净的解决方案。有一个更好的方法吗？

我真正想要的是 __VIEWSTATE 和 __EVENTVALIDATION 的值是在发出第一个请求时而不是在回发完成后。那是在发出第一个请求时形成输出流的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-07T18:21:40.967

要获得事件验证，您应该使用 HTML Agility Pack。

```
var eventValidation = HapHelper.GetAttributeValue(htmlDocPreservation, "__EVENTVALIDATION", "value");

public static string GetAttributeValue(HtmlDocument doc, string inputName, string attrName)
{
    string result = string.Empty;

        var node = doc.DocumentNode.SelectSingleNode("//input[@name='" + inputName + "']");
        if (node != null)
        {
            result = node.Attributes[attrName].Value;
        }

    return result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T07:54:42.990

如果您`Page`使用 Reflector 查看该类，您会看到这些隐藏字段是在渲染阶段创建的（查看方法`RenderViewStateFields`和`EndFormRenderHiddenFields`）。

您可能可以使用反射（例如内部属性`Page.ClientState`）获取部分/全部数据。

但我不认为有一个干净的解决方案（虽然老实说我并不真正理解你想要实现的目标）。

# linux - svn https 代理错误处理外部定义

> ID：12786200
> 
> 赞同：2
> 
> 时间：2012-10-08T17:03:52.277
> 
> 标签：linux, svn, ssh, proxy, ssh-tunnel

SVN 服务器在内部工作网络上。使用 linux 工作站，我只能通过 SSH 访问内部网络到服务器。

我在我的工作站上创建了一个 ssh 隧道：

> ssh -Nf -L443:svn.server:443 name@network_access.server

使用以下命令为我提供了有关 svn 目录的信息：

> svn信息`https://localhost/directory/trunk`

使用：

> svn联合`https://localhost/directory/trunk`测试

将拉动主干中的几个文件夹，然后在出现以下消息之前停止。

> svn：警告：处理“test/trunk/folderx”的外部定义时出错：
> 
> svn：警告：“https://svn.server.com/directory/trunk”的选项：无法连接到服务器（https://svn.server.com）

非常感谢任何帮助。

# oracle - 更新报表以使用 Crystal Reports 2008 中的 Oracle 函数进行过滤

> ID：12786209
> 
> 赞同：0
> 
> 时间：2012-10-08T17:04:11.293
> 
> 标签：oracle, crystal-reports, crystal-reports-2008

我有几份报告，每一份报告都包含几张表格。

假设 3 个表，tableA，tableB 和 tableC。我想使用以下 Oracle 函数来过滤还传递报告参数的结果集：

```
AND function(tableB.field1, tableB.field2, tableB.field3, {?report_parameter}) = 'S' 
```

需要注意的事实：

*   Oracle 函数只能用于 Crystal Reports 中的 SQL 表达式和/或 SQL 命令。
*   SQL 表达式不能包含报告参数（因此，不是一个选项）。
*   Crystal Reports 允许您将报表表替换为 SQL 命令，但不允许您将多个表替换为单个 SQL 命令。
*   我们不想重新构建所有报告。
*   我们不想将单个表替换为 SQL 命令，因为它会在较高级别影响性能，因为 Crystal 在执行报表时不会在单个查询上转换表和 SQL 命令。
*   此 Oracle 函数从其他表中选择数据，因此不能在报表自定义函数上重写。
*   {?report_parameter} 是只有应用程序知道的信息。它在将报告导出给用户之前由应用程序填写。

我能做些什么来解决这个问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T12:44:39.073

不知道为什么你的函数需要表和参数，我只能给你模糊的、未经测试的选项。没有一个选项是理想的：

*   将您的 Oracle 函数重写为“自定义函数”（CF）；在记录选择公式中参考 CF；过滤器将被应用 WhileReadingRecords（即函数不会发送到数据库）
*   将您的函数重写为接受一个参数但返回一个记录集的存储过程（该参数将被 Crystal Reports 识别）；将其他表加入存储过程。存储过程需要以支持 Crystal Reports 数据需求的方式编写（[使用带有参数的存储过程的结果作为仪表图的值 - asp.net 应用程序中的水晶报表](https://stackoverflow.com/questions/10953789/using-result-from-a-stored-procedure-with-parameters-as-value-for-gauge-chart/10984207#10984207)）

# css - Safari iOS 5 中不显示自定义 webfont 字符

> ID：12786210
> 
> 赞同：2
> 
> 时间：2012-10-08T17:04:13.650
> 
> 标签：css, ios5, fonts, mobile-safari, font-face

[修改]

我的自定义图标字体没有在 iOS 5 上的 Mobile Safari 中呈现。我已经确认问题一定出在我的 CSS 上。

[当使用http://www.fontsquirrel.com](http://www.fontsquirrel.com)生成的相应 eot 和 woff 格式时，该字体在 iOS 6 和 Safari、Chrome、Firefox 和 IE9 的桌面版本上运行良好

## @字体脸

我目前正在使用以下简化`@font-face`声明（SASS）：

```
@font-face
  font-family: 'Boundless'
  src: asset-url('boundless.ttf', font) format('truetype')
  font-weight: normal
  font-style: normal 
```

以下 HTML*有效*（它在 iOS 5.1 上的 Mobile Safari 中呈现所需的图标字符：

```
<h1>&#xf0000;</h1> 
```

但是，如果我尝试以[Font-Awesome](https://github.com/FortAwesome/Font-Awesome/blob/master/sass/font-awesome.sass)`<?>`的方式渲染它，我会看到一个字形：

SASS

```
i.bicon-biology:before
  font-family: "Boundless"
  content: "\f0000" 
```

HTML

```
<h1><i class="bicon-biology"></i></h1> 
```

然而，Font-Awesome 图标在网站上渲染得很好。

***有谁知道可能导致此问题的原因？***

我还应该补充一点，我尝试了这里提出的所有建议：[@font-face not embedding on mobile Safari (iPhone/iPad)](https://stackoverflow.com/questions/4412511/font-face-not-embedding-on-mobile-safari-iphone-ipad) and none of working。这包括添加笑脸 hack，确保我的字体 url 是绝对的，并尝试使用 svg 字体（无论如何，这对于 iOS 5 来说是不必要的）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T21:42:51.557

Mobile Safari 显然只是不喜欢我使用的 utf-8 地址（`/0f0000`- `/0f001e`）。

我编辑了字体以将字符移动到[Font-Awesome](https://github.com/FortAwesome/Font-Awesome/blob/master/sass/font-awesome.sass)使用的相同位置（`/00f000`...），并且很快，它可以工作了！

我还检查了添加/删除`0`左侧的填充是否有所不同，并且无论哪种方式都可以。只是关于其他地址范围的一些东西。:\

再次：这*只是*在伪元素内容中使用代码时的问题。正如你在上面看到的，`&#xf0000`; (and `&#x0f0000;`) 当它直接在 HTML 中时呈现得很好。

# debugging - iOS 6 联系人访问警报从未在调试时显示

> ID：12786211
> 
> 赞同：1
> 
> 时间：2012-10-08T17:04:17.620
> 
> 标签：debugging, permissions, ios6, contacts

我在 appstore 上的应用程序正在访问 iPhone 联系人，在用户在 iOS 6 上下载它后，它无法访问 iPhone 联系人，而它在 iOS 5 上工作正常问题是苹果在 iOS 6 中添加的新隐私设置.. 所以搜索后我发现我必须在我的代码中执行以下操作才能访问用户联系人：

```
 //in order to test addressbook availability we have to attempt to create an addressbook instance using ABAddressBookCreateWithOptions
#if __IPHONE_OS_VERSION_MAX_ALLOWED >= 60000

    // Request authorization to Address Book
    ABAddressBookRef addressBookRef = ABAddressBookCreateWithOptions(NULL, NULL);

    if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusNotDetermined) {

        ABAddressBookRequestAccessWithCompletion(addressBookRef,
                                                 ^(bool granted, CFErrorRef error) {
                                                     if (granted)
                                                         [self loadContacts];
                                                 });
    } else if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusAuthorized) {

        // The user has previously given access, add the contact
        [self loadContact];
    } else {

    }

#endif //end iOS6+

    //ABAddressBookCreateWithOptions not available or succeeded. return YES;
    [self loadContacts]; 
```

我现在的问题是在设备上调试时，没有显示警报，我不知道为什么？我知道上面的代码应该可以正常工作，但只有当应用程序提交到应用商店但我想在提交之前在调试模式下测试它？有什么建议吗？

感谢您的支持。谢谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T19:54:31.603

我已经设法解决了这是经过轻微修改后的新代码：

```
#if __IPHONE_OS_VERSION_MAX_ALLOWED >= 60000

    __block MyClassType *controller = self;

    // Request authorization to Address Book
    ABAddressBookRef addressBookRef = ABAddressBookCreateWithOptions(NULL, NULL);

    if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusNotDetermined) {

        ABAddressBookRequestAccessWithCompletion(addressBookRef,
                                                 ^(bool granted, CFErrorRef error) {
                                                     if (granted)
                                                         [controller loadContacts];
                                                 });
    } else if (ABAddressBookGetAuthorizationStatus() == kABAuthorizationStatusAuthorized) {

        // The user has previously given access, add the contact
        [self loadContacts];
    } else {

    }

#else
    [self loadContacts];
#endif 
```

能够测试它的关键是从设置>>常规>>重置>>重置位置和隐私中重置隐私和位置设置

它对我很好。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-16T22:49:35.537

重置位置和隐私对我不起作用。

我的授权状态始终是 kABAuthorizationStatusAuthorized，无论我是否清除模拟器设置然后重置位置和隐私。

# c++ - Visual Studio 检查迭代器不抛出异常

> ID：12786212
> 
> 赞同：0
> 
> 时间：2012-10-08T17:04:18.190
> 
> 标签：c++, visual-studio-2010, visual-studio, iterator

我有这个代码：

```
#ifdef _DEBUG
#define _SECURE_SCL 1
#define _SECURE_SCL_THROWS 1
#else
#define _SECURE_SCL 0
#define _SECURE_SCL_THROWS 0
#endif

#include <iostream>
#include <vector>

using namespace std;

int main()
{
    vector <int> v1;
    v1.push_back(33);

    vector <int>::iterator it1 = v1.begin();

    try 
    {
        it1++;

        it1++;
    }
    catch (...) 
    {
        cout << "vector is empty!!" << endl;
    }

    return 0;
} 
```

一个非常简单的：我试图越过边界，我希望捕获异常。然而，程序只是简单地因“调试断言失败！”而崩溃！在第二个增量上，为什么会这样？

该示例取自[http://msdn.microsoft.com/en-us/library/aa985965(v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/aa985965(v=vs.100).aspx)，我刚刚添加了宏来设置选中的迭代器。我处于调试模式，/EHsc 已打开，/MDd 也已打开

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:23:10.040

你离开了最重要的部分——`#include`台词。

您需要将这些宏放在`#include`行的上方。如果您使用的是预编译头文件，则需要将它们放在预编译头文件中。

因为你问题中的代码不完整，我不知道你是否做对了。我怀疑你没有，所以我提供这个作为答案。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:40:57.823

新版本的 Visual C++ 库（捆绑在 Visual Studio 2010 中）不支持从检查的迭代器中抛出异常。请参阅[http://wishmesh.com/2010/04/it-seems-that-_secure_scl_throws-is-deprecated-in-visual-studio-c-2010/](http://wishmesh.com/2010/04/it-seems-that-_secure_scl_throws-is-deprecated-in-visual-studio-c-2010/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:56:13.563

> 已检查的迭代器是指在您尝试越过容器边界时将引发异常或调用 invalid_parameter 的迭代器。

您的示例代码没有移动迭代器，所以我认为抛出任何东西都是没有意义的。

# java - 设置 Apk 密码以保护隐私

> ID：12786215
> 
> 赞同：-2
> 
> 时间：2012-10-08T17:04:30.220
> 
> 标签：java, android, security

我创建了一个应用程序，我想知道我是否可以在反编译时为我的 Apk 设置密码，所以当有人试图反编译应用程序时，它会要求输入密码，这样可以防止我的 apk 被黑客入侵并保护我的隐私。

任何建议将不胜感激，非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:43:58.607

不，你不能这样做。

您可以使用yGuard 或 ProGuard 之类的[混淆库，但是：](http://java-source.net/open-source/obfuscators)

我尝试了一个带有 Android-App 的混淆器，经过混淆后，DEX 编译器无法创建 Android-App。

# tomcat - 无法在Tomcat中部署war文件

> ID：12786217
> 
> 赞同：0
> 
> 时间：2012-10-08T17:04:37.143
> 
> 标签：tomcat, webserver, war

我正在尝试设置 Tomcat 服务器并尝试运行 .war 文件。不幸的是，我正在努力让它运行。我的问题是，在启动服务器后，我可以访问 localhost:8080 页面，但是当我执行 localhost:8080/Amazon 时，war 文件没有被部署，其中 Amazon.war 是我保存在我的 webapps 文件夹中的 war 文件.

[如何在Tomcat 7中部署war文件](https://stackoverflow.com/questions/5109112/how-to-deploy-war-in-tomcat-7)

我正在按照上面链接中的说明进行操作。所以我尝试改用 GUI 管理器。我相信需要将tomcat配置为GUI。所以我尝试按照我在网络浏览器上获得的说明进行操作。

浏览器上的错误消息：

开始：

您无权查看此页面。如果您没有更改任何配置文件，请检查安装中的文件 conf/tomcat-users.xml。该文件必须包含允许您使用此 web 应用程序的凭据。

例如，要将 manager-gui 角色添加到名为 tomcat 且密码为 s3cret 的用户，请将以下内容添加到上面列出的配置文件中。

结尾：

然而，这似乎也不起作用。我重新启动了服务器。我在做什么错？

编辑 ：

我的 tomcat-user.xml 文件内容如下：

```
<tomcat-users>
<role rolename="manager-gui"/>
<user username="tomcat" password="s3cret" roles="manager-gui"/>
</tomcat-users> 
```

其余内容为评论。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T15:52:50.757

我终于让它工作了！我无法弄清楚问题出在哪里。我不得不重新安装 Tomcat 。这次我选择了专门安装Tomcat作为服务的32-bit/64-bit Windows Service Installer。

谢谢@大卫！

# c# - 以数组的形式存储 Combobox 项并在 WPF 中检索 SelectedId

> ID：12786218
> 
> 赞同：0
> 
> 时间：2012-10-08T17:04:37.567
> 
> 标签：c#, c++, wpf, combobox

我是一名 c++ 开发人员，最近转向了这个令人惊叹的 WPF 世界。我正在开发一个 WPF 应用程序。我的 xaml 文件中有一个组合框 (BusRate)。

```
<ComboBox Height="23" ItemsSource="{Binding BusRateList}" SelectedIndex="2" Name="comboBox2" Width="85" /> 
```

我的 Viewmodel 类具有以下属性：

```
public ObservableCollection<int> _busRate = new ObservableCollection<int>();
public ObservableCollection<int> BusRateList
    {
        get { return _busRate; }
        set
        {
            _busRate = value;
            NotifyPropertyChanged("BusRateList");
        }
    } 
```

我添加的项目如下：

```
_busRate.Add(10);
_busRate.Add(50);
_busRate.Add(100);
_busRate.Add(200);
_busRate.Add(300);
_busRate.Add(400);
_busRate.Add(500);
_busRate.Add(600); 
```

这给了我组合框中的项目。但是我想以包含所有这些值的数组的形式将这些项目添加到我的组合框中。例如：

```
// C++ Code
static const char *busRate[8] = 
{
" 10", " 50", "100", "200", "300", "400", "500", "600"
}; 
```

从而允许我在comboboxitemselected 方法上执行以下操作：

*   从 Combobox 中获取 SelectedId 并将其存储在一个整数变量中。
*   传递这个整数变量。演示如下：

    ```
    int id = comboBox->getSelectedId(); // C++ Code
    unsigned long speed = String(busRate[id-1]).getIntValue(); // C++ Code 
    ```

我怎样才能在我的应用程序中实现这一点:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:24:55.007

您可以在您的 ViewModel 中创建一个 int 类型的新属性和一个将字符串转换为 int 值的[转换器。](http://wpftutorial.net/ValueConverters.html)现在将新属性绑定到 ComboBox.SelectedItem 属性：

```
<Window/UserControl/....Resouces>
    <local:YourConverter x:Key="TheConverter"/>
<Window/UserControl/....Resouces>

<ComboBox SelectedIten="{Binding Path=IntProp, Converter={StaticResource TheConverter}}" 
```

编辑：

```
int id = Convert.ToInt32(BusRateList[comboBox.SelectedIndex]); 
```

# c# - POST后的signalR使用/持久性

> ID：12786220
> 
> 赞同：2
> 
> 时间：2012-10-08T17:04:44.337
> 
> 标签：c#, asp.net-mvc, signalr

目前正在研究使用 signalR 在处理文件时向用户呈现文件的进度报告。我正在使用 asp.net MVC 4。通过 Ajax 进行发布/获取时，我可以毫无问题地获取状态更改。

因为我需要上传一个文件（没有 ajax，因为 1：我不能要求用户启用 js 才能提交文件；2：我不相信除了 HTML5 之外，它很容易完成这样的任务） .

**编辑：** 当我说我不能要求用户拥有 JS 时，我的意思是提交文件不能依赖 JS，因为这是核心功能。但是，我希望那些启用了 JS 的人能够看到处理/导入另一个程序的进度。我目前不关心/关心实际的文件传输进度，但更重要的是将状态消息发送回程序中导入的当前状态。

在我调用表单 Post 之后，为了实现在文件处理过程中更新进度的目标，建议采用什么方法？笔记：

示例代码：

```
$(function () {
    var fileUploadHub = $.connection.fileUploadHub;

    fileUploadHub.updateProgress = function (value) {
        updateProgressBar(value);
    };

    fileUploadHub.updateStatusText = function (text) {
        alert("you got to updateStatus");
        updateText(text);
    };
    $.connection.hub.logging = true;
    $.connection.hub.start();
});

function updateProgressBar(value) {
    $("#progressbar").progressbar({ value: value });
}

function updateText(text) {
    $("#statusText").append("<li>" + text + "</li>");
} 
```

//Form : 由模型支持

```
@using (Html.BeginForm( "UploadFile", "FileUpload", FormMethod.Post,
    new { enctype = "multipart/form-data"}))
{
    <input type="file" id="Files" name="Files" accept="text/xml" />
    <br />
    <input type="submit" id="submitButton" value="Submit" />
} 
```

控制器：

```
public ActionResult SubmitFile(MyModel model)
{
  ...
  ProcessFile(model.file)
  ...
}

public void ProcessFile(File file)
{
  var myHub = GlobalHost.ConnectionManager.GetHubContext<FileUploadHub>();
  myHub.Clients.updateStatusText("testz");
} 
```

集线器类：

```
public class FileUploadHub : Hub
{
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T18:43:17.430

您还需要做的是使用 POST 发回用户的 SignalR ConnectionId。然后，当帖子开始时，您需要获取 HubContext，并且在整个 POST 逻辑中，您可以通过该 ConnectionId 将通知发送回特定客户端。

1.  将输入 type="hidden" 添加到您的表单中。

    ```
    <input type="hidden" id="mySignalRConnectionIdHidden" name="SignalRConnectionId" /> 
    ```

2.  假设 JavaScript 已启用并且您连接到集线器，请将隐藏输入的值设置为 start() 回调中 SignalR 的 connectionid 值。

    ```
    $.connection.hub.start().done(function ()
    {
        $("#mySignalRConnectionIdHidden").val($.connection.connectionId);
    }); 
    ```

3.  POST 到服务器端的第一步是为您的 Hub 获取 HubContext 并获取您要与之对话的客户端。

    ```
    // Get the value of the hidden from the request
    string currentClientConnectionId = Request.Form["SignalRConnectionId"];

    // Get the hub context
    IHubContext myHubContext = GlobalHost.ConnectionManager.GetHubContext<MyHub>();

    // Resolve a the client that corresponds to the current request
    dynamic currentClient = myHubContext.Client(currentClientConnectionId); 
    ```

4.  在整个 POST 处理逻辑的各个点，您现在可以将消息发送回启动上传的客户端：

    ```
    ... do some stuff ...

    currentClient.stepOneCompleted();

    .... do some more stuff ...

    currentClient.stepTwoCompleted();

    ... etc ... 
    ```

显然，在第 4 步中，您还可以将数据作为参数传递回客户端，我只是在这里不显示。

最后，对于没有启用 JS 或由于某种原因无法连接的客户端，您可以在 POST 上检测到表单值为空，然后您就知道没有建立 SignalR 连接。然后，您可以设置 currentClient = null 并在您将调用客户端回调并完全跳过回调的地方检测到这一点。

# c - 创建没有警告的位图

> ID：12786221
> 
> 赞同：3
> 
> 时间：2012-10-08T17:04:51.160
> 
> 标签：c, linux, x11

这是我的第一个 SO 问题，所以请保持温和。:)

我不是编程专家。我有一个正在玩的程序。它带有一些 BMP 文件。我仍然有 BMP 文件，但我正在将它们转换为 C 代码。目前，我正在加载它们：

```
static char bits[] = {
0xff,0xff,0xff,0xff,0xff,0xab,0xaa,0x5a,0x55,0xd5,0x55,0x55,0xb5,0xaa,0xaa,
0xab,0xaa,0x5a,0x55,0xd5,0x55,0x55,0xb5,0xaa,0xaa,0xab,0xaa,0x5a,0x55,0xd5,
[blah blah blah]
0xff,0xff,0xff,0xff,0xff};
walls.pixmap = XCreateBitmapFromData(dpy,DefaultRootWindow(dpy),bits,40,40); 
```

每个大于 0x80 的字符都会生成此警告：

```
bitmaps.c:38: warning: overflow in implicit constant conversion 
```

所以我尝试将我的定义更改为

```
static unsigned char bits[] = { 
```

但这会显示一个新警告：

```
bitmaps.c:31: warning: pointer targets in passing argument 3 of 'XCreateBitmapFromData' differ in signedness
/usr/include/X11/Xlib.h:1607: note: expected 'const char *' but argument is of type 'unsigned char *' 
```

有没有办法加载将编译而没有警告的位图？我应该接受总是会出现警告吗？既然我有原始 BMP 文件，我应该做一些不同的事情吗？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:09:23.510

使用无符号字符应该可以防止警告。

带符号的字符实际上不能表示文字（类型为`int`，而不是`char`）。

```
static unsigned char bits[] = {
    0xff,0xff,0xff,0xff,0xff,0xab,0xaa,0x5a,0x55,0xd5,0x55,0x55,0xb5,0xaa,0xaa,
    0xab,0xaa,0x5a,0x55,0xd5,0x55,0x55,0xb5,0xaa,0xaa,0xab,0xaa,0x5a,0x55,0xd5,
    /* [blah blah blah] */
    0xff,0xff,0xff,0xff,0xff};

walls.pixmap = XCreateBitmapFromData(dpy,DefaultRootWindow(dpy),(char*) bits,40,40); 
```

换句话说，您还可以显式地转换每个文字：

```
static char bits[] = {
    (char)0xff,(char)0xff,(char)0xff,(char)0xff,(char)0xff,(char)0xab,(char)0xaa,(char)0x5a,(char)0x55,(char)0xd5,(char)0x55,(char)0x55,(char)0xb5,(char)0xaa,(char)0xaa,
    (char)0xab,(char)0xaa,(char)0x5a,(char)0x55,(char)0xd5,(char)0x55,(char)0x55,(char)0xb5,(char)0xaa,(char)0xaa,(char)0xab,(char)0xaa,(char)0x5a,(char)0x55,(char)0xd5,
    /* [blah blah blah] */
    (char)0xff,(char)0xff,(char)0xff,(char)0xff,(char)0xff}; 
```

但这对我来说似乎有点尴尬

# cordova - Childbrowser 无法与 Unity 和 Phonegap 一起使用

> ID：12786222
> 
> 赞同：0
> 
> 时间：2012-10-08T17:04:52.423
> 
> 标签：cordova, unity3d, childbrowser

我正在构建一个使用 UNITY3D 和 phonegap 的 iPhone 应用程序。我使用了一个基本的 Unity3D iPhone xcode 项目，并将[Gregg 的 Native UI 中的一些本机和 Java 代码添加到 Unity 项目](http://clevermartian.com/blog/?p=59)中。然后，我将电话间隙中的文件（类文件和 www 文件夹等）添加到项目中。当前的结果使我能够成功地从统一转移到 phonegap。

我现在需要从 phonegap 移回 Unity，使用 childbrowser 从 phonegap 移回 XIB 应该相对容易，我可以在其中调用该`Unitymessage`函数。我的问题是我无法让 childbrowser 工作。我已经按照他们网站的指示安装了它（更改了 plist 键，将文件放在插件文件夹中，添加了指向索引的链接等），但 phonegap 和 childbrowser 之间似乎仍然没有联系。我创建了一个临时解决方案，只需在 phonegap webview xib 上添加一个按钮，允许我返回统一状态，但是当 phonegap 运行时，此解决方案始终在屏幕上，这不是预期的结果。有没有人有关于如何让 childbrowser 为这个项目工作的建议？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-15T23:37:13.537

我解决了我的问题。我决定不在我的项目中使用 Childbrowser，因为我无法让它工作。相反，我在我的视图控制器中为 html 页面设置了一个侦听器，其中一部分如下：

```
if(requestString != nil){
    if([requestString rangeOfString:@"#"].location != NSNotFound){
        NSArray* foo = [requestString componentsSeparatedByString: @"#"];
    int* number = 0;
    for (int i = 0, count = [foo count]; i < count; i = i + 1)
    {
        number+=1;
    }
    if (number == 2);
    NSString* day = [foo objectAtIndex: 1];
    NSString *cheater = @"cphotos";
        if([day isEqualToString:cheater]){
            NSLog(@"OpenUnity");

//Here it then calls the Unity Message command to go back to unity like is done in Gregg's Native UI to Unity project. 
```

这被放置在： -`(BOOL)webView:(UIWebView )webView2 shouldStartLoadWithRequest:(NSURLRequest )request navigationType:(UIWebViewNavigationType)navigationType {`

因此，当用户导航到“cphotos”（index.html#cphotos）页面时，它们将被转发到 unity。我还在该页面的 html 中包含了一个“window.location”，以将 html 重置回我的主页。我不是程序员，所以这可能不是最优雅的解决方案，但它确实允许我从统一转到 html (phonegap) 并返回到单个应用程序中。希望这可以帮助任何尝试做类似事情的人，如果有兴趣，我可以尝试分享更多过程。

# arm - ARM Cortex 处理器中的 L1 高速缓存端口

> ID：12786223
> 
> 赞同：6
> 
> 时间：2012-10-08T17:05:06.070
> 
> 标签：arm, cpu-cache, cortex-a, amba

我做了一些研究，但找不到太多信息。

我想知道 ARM 嵌入式处理器有多少**L1**读取和 L1 写入端口以及端口的宽度。具体来说，我对 Cortex-A8、Cortex-A9 和 Cortex-A15 感兴趣。

我的盲目猜测是 Cortex-A9 处理器有一个 64 位宽的 L1 读端口和一个 L1 写端口。我的另一个猜测是它有一个共享的读/写端口。对此有什么想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-24T02:00:52.147

这些处理器具有单独的 L1 指令和数据高速缓存。我很确定所有 ARM 内核的 L1 I-cache 和 D-cache 都有 1 个读取和 1 个写入端口[Furber](https://rads.stackoverflow.com/amzn/click/com/0201675196) p.81。

L1 缓存位于每个内核中，因此有关详细信息，我将转到内核 TRM，例如[Cortex-A9 TRM](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0388i/index.html)而不是 MPCore TRM。那里的第 7 章讲述了每个 64 位数据路径。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T19:05:38.570

Afaik 您应该检查每个处理器的 AXI 功能。

例如，[Cortex-A9](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0407i/Babiaggf.html)页面包含 AXI 主接口属性和状态的详细表：

> > Cortex-A9 MPCore L2 接口可以有两个 64 位宽的 AXI 总线主控器。

[Cortex-A15 的](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0438g/CJHGJJBA.html)页面包含较少的信息，说明：

> > 该处理器实现了一个 AMBA 4 AXI 一致性扩展 (ACE) 主接口和一个 AMBA 3 AXI 加速器一致性端口 (ACP) 从接口。ACE 和 ACP 都支持硬件可配置的 64 位或 128 位数据宽度。

还有一个类似的页面或[Cortex-A8](http://infocenter.arm.com/help/topic/com.arm.doc.ddi0344k/Cacjeigj.html)。

# jquery - .toggle() 所有高度超过 99px 的 div

> ID：12786228
> 
> 赞同：1
> 
> 时间：2012-10-08T17:05:25.120
> 
> 标签：jquery

我正在制作手风琴式效果，使用切换来扩展和收缩 div 的高度。

当用户切换一个 div 时，它会扩展高度，我希望前一个也能切换回来。所以，我需要选择所有的兄弟姐妹，但我只想定位已经展开的 div，再次缩小它的高度。

如果高度超过 99 px，我想使用使用条件的函数来选择扩展 div，我认为这是仅选择扩展 div 的最佳方法。

我哪里错了？

我的代码。

```
$(function() {
     jQuery.fn.selectOpen = (function(){
         //(this).css('background-color', 'red');
                if ( $(this).height() > 99) {
                $(this).trigger(".toggle");
                }
                });
            }); 

$("#arrow_01").toggle(function(){
$("#arrow_01").attr('src','images/arrow_down.png');
    $("#expanding_box_01").animate({height: '100px',  }).siblings().selectOpen();
 }, function(){     
   $('#arrow_01').attr('src','images/arrow_right.png');
   $("#expanding_box_01").animate( {height: '27px' });
 }); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:12:46.480

用于`.each()`遍历所有兄弟姐妹，您也错误地将`.toggle`其用作事件名称，而它应该是 just `toggle`，如下所示：

```
jQuery.fn.selectOpen = function(){
         //(this).css('background-color', 'red');
         this.each(function() {
             if ( $(this).height() > 99) {
                 $(this).trigger("toggle");
             }
         });
 }; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:18:04.290

我认为你把事情复杂化了。您可以使用 CSS 和一些类来确定项目是否打开：

```
// bind a click event to an anchor tag
$("#accordian li > a").click(function(){        
    var $box = $(this).parent();
    // if the item has the closed class, proceed, otherwise
    // it is already open
    if ($box.is(":not(.open)")) {
        // animate the currently open sibling closed
        // remove the open class
        $box.siblings(".open").animate( {height: '27px' }).removeClass("open");
        // animate the clicked item and add open class
        $box.animate({height: '100px' }).addClass("open");
    }            
}); ​ 
```

[http://jsfiddle.net/hunter/qSE69/](http://jsfiddle.net/hunter/qSE69/)

# ios - 表格视图中的页脚文本未显示

> ID：12786230
> 
> 赞同：1
> 
> 时间：2012-10-08T17:05:27.190
> 
> 标签：ios, uitableview

我有一个基本的分组表视图，我在其中实现了为每个部分设置页眉和页脚的两种方法。现在，标题文本显示并正常工作。但是页脚视图中的文本没有显示。我有 3 个部分，只想将文本添加到第一个页脚部分。编码：

```
- (NSString *)tableView:(UITableView *)tableView titleForFooterInSection:(NSInteger)section {
if ( section == 0 ) {
    return @"Lorem ipsum";
}
return nil; 
```

}

现在奇怪的是，表格似乎实际上为文本腾出了空间，只是没有显示。我认为对此可能有一些非常简单的解释，但似乎找不到:)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-11T09:48:07.707

我猜你`heightForFooterInSection`的`viewController`. 如果您在这里返回任何值，那就是问题所在。如果您正在这样做，请更改您的代码，例如

```
-(CGFloat)tableView:(UITableView *)tableView heightForFooterInSection:(NSInteger)section {
   if (section == 0) {
      return 30.0f;
   }
   return 0.0f;
} 
```

# iphone - 移除/隐藏自定义徽章

> ID：12786231
> 
> 赞同：1
> 
> 时间：2012-10-08T17:05:31.280
> 
> 标签：iphone, ios

我使用带有此代码的 CustomBadge 显示徽章：

```
-(void)viewWillAppear:(BOOL)animated{

[self fillBadges];

//********** Start Custom Badge ***************//
NSString *myNewString = [NSString stringWithFormat:@"%i",allBadge];

if (allBadge >= 1) {
    NSLog(@"Add One");
    CustomBadge *customBadgeAll = [CustomBadge customBadgeWithString:myNewString];
    [customBadgeAll setFrame:CGRectMake(125, 90, customBadgeAll.frame.size.width, customBadgeAll.frame.size.height)];
    [self.view addSubview:customBadgeAll];      
}
//********** End Custom Badge ***************//

[self.view setNeedsDisplay];
[[self navigationController] setNavigationBarHidden:NO animated:NO]; 
```

}

当 allBadge 计数小于 1 时，我不希望显示徽章。如何从视图中删除或隐藏它。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:15:25.323

为您的 customBadgeAll 创建一个类范围的变量：

在你的 .h 中：

```
CustomBadge *customBadgeAll; 
```

然后您可以轻松地再次删除徽章：

```
if (allBadge >= 1) {
  NSLog(@"Add One");
  CustomBadge *customBadgeAll = [CustomBadge customBadgeWithString:myNewString];
  [customBadgeAll setFrame:CGRectMake(125, 90, customBadgeAll.frame.size.width, customBadgeAll.frame.size.height)];
  [self.view addSubview:customBadgeAll];      
}
else{
  [customBadgeAll removeFromSuperview];
} 
```

另一种方法是将标签值设置`customBadgeAll`为特殊值，然后使用`[self.view viewWithTag:...]`.

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:15:50.837

你为什么不使用下面的代码`customBadgeAll.hidden = YES`来隐藏它？

# c++ - 重新定义类

> ID：12786233
> 
> 赞同：2
> 
> 时间：2012-10-08T17:05:33.150
> 
> 标签：c++

我有三个`.cpp`文件和`two header files.`

但是当我编译它们时，即 Point.cpp、Data.cpp 和 main.cpp，它会说

```
Data.h:6:7 redefinition of Data at 'Data.h'
Data.h:6:7 previously definition of 'class Data' 
```

下面是我的 Data.h（以前称为 2.h 在上面）

```
#include <iostream>
#include <string>

using namespace std;

class Data
{
private:
string sType;
public:
Data();
Data(string);
void setSType(string);
string getSType();
}; 
```

下面是我的data.cpp

```
#include "Data.h"

Data::Data()
{
sType = "";
}

Data::Data(string s)
{
sType = s;
}

void Data::setSType(string ss)
{
sType = ss;
}

string Data::getSType()
{
return sType;
} 
```

下面是我的 PointD.h（以前称为 3.h）

```
#include <iostream>
#include <string>
#include "Data.h"

using namespace std;

class PointD
{
private:
int x
Data data1;
public:
PointD();
PointD(int,Data);

void setX(int);
void setData(Data);

int getX();
Data getData();
}; 
```

下面是我的 PointD.cpp

```
#include "PointD.h"

PointD::PointD()
{
x = 0;
}

PointD::PointD(int xOrdinate,Data dd)
{
x = xOrdinate;
data1 = dd;
}

void PointD::setXordinate(int Xordinate)
{
x = Xordinate;
}

void PointD::setData(Data dd)
{
data1 = dd;
};

int PointD::getXordinate()
{
return x;
}

Data PointD::getData()
{
return data1;
} 
```

这是我的 main.cpp

```
#include <iostream>
#include <string>

#include "Data.h"
#include "PointD.h"
using namespace std;

int main()
{
const int MAX_NUM = 20;

Data ldata[MAX_NUM];
PointD pointd[MAX_NUM];

//more codes..
} 
```

但是当我编译它们时，即 Point.cpp、Data.cpp 和 main.cpp，它会说

```
Data.h:6:7 redefinition of Data at 'Data.h'
Data.h:6:7 previously definition of 'class Data' 
```

*任何人都可以让我知道这里到底出了什么问题..*

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:07:25.960

您需要使用包括警卫，或者最简单的：

```
 #pragma once 
```

在你的头文件中

有关更多背景信息，请参阅[标头守卫的目的](https://stackoverflow.com/questions/2979384/purpose-of-header-guards)

想法：1.hpp

```
#ifndef HEADER_GUARD_H1_HPP__
#define HEADER_GUARD_H1_HPP__

// proceed to declare ClassOne

#endif // HEADER_GUARD_H1_HPP__ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:12:52.803

在每个头文件中写入：

```
#ifndef MYHEADERNAME_H
#define MYHEADERNAME_H

code goes here....

#endif 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T20:09:08.080

最好是这样：

```
#ifndef DATA_H    /* Added */
#define DATA_H    /* Added */

#include <iostream>
#include <string>

// using namespace std;  /* Removed */

class Data
{
private:
   std::string sType;
public:
   Data();
   Data( std::string const& );          // Prevent copy of string object.
   void setSType( std::string& );       // Prevent copy of string object.
   std::string const& getSType() const; // prevent copy on return
   std::string& getSType();             // prevent copy on return
};

#endif /* DATA_H */ 
```

最大的修复是添加 ifndef、define、endif。#include 指令就像将 .h 复制并粘贴到该行一样。在您的情况下， main.cpp 中的包含是：

```
 main.cpp
     -> Data.h  (1)
     -> Point.h
        -> Data.h (2) 
```

在 (2) 处，Data.h 已在 (1) 处“粘贴”到 main.cpp。Data的类声明，即“class Data{ .... };” , 出现两次。这是一个错误。

在每个 .h 的顶部和底部添加包含防护是避免此问题的标准做法。别想了。去做就对了。

我建议的另一个更改是从任何 .h 中删除任何“使用命名空间...”行。这打破了命名空间的目的，即把名称放在不同的组中，这样在其他人想要一个具有相同名称的对象或函数的情况下它们就不会模棱两可了。这不是程序中的错误，而是等待发生的错误。

例如，如果我们有：

xstring.h：

```
namespace xnames
{
    class string
    {
        ...
    };
} 
```

Foo.h

```
#include <xstring>
using namespace xnames;
... 
```

测试.cxx：

```
#include "Foo.h"  
#include "Data.h"    // Breaks at:   Data( string );  -- std::string or xnames::string?

...
void test()
{
   string x;  // Breaks.  // std::string or xnames::string?
} 
```

在这里，编译器不再知道您是指 xnames::string 还是 std::string。这在 test.cxx 中失败，可以通过更具体来修复：

```
void test()
{
   std::string x;
} 
```

但是，这个编译现在仍然在 Data.h 中中断。因此，如果您将该头文件提供给某人，则会出现与他们的代码不兼容并且只能通过更改您的头文件并删除“使用命名空间......”来修复的情况。线。

同样，这只是很好的编码风格。别想了。去做就对了。

此外，在我的 Data.h 版本中，我已将方法参数和返回类型更改为引用（使用 &）。这可以防止对象及其所有状态被复制。一些聪明的木屐会指出我们字符串类的实现通过写时复制来防止这种情况。也许是这样，但一般来说，在传递或返回对象时使用引用。它只是更好的编码风格。养成这样做的习惯。

# c# - 从子例程返回对象

> ID：12786236
> 
> 赞同：0
> 
> 时间：2012-10-08T17:05:44.570
> 
> 标签：c#, entity-framework

我有一个例程可以返回大部分正确的数据。我向它传递一个字符串 ID 代码，它创建一个模型，从数据库中获取数据，填充模型，然后将模型传回。返回模型看起来正确并且具有正确的数据，但模型中的列表不包含任何数据。

该模型看起来与这个相似

```
 public class SubjectDB
             {
                public string SubjectId  { get; set; }
                .
                .
                List<AddressDB> Address { get; set; }
                .
                .
                [Key]
                public int Id { get; set; }
             }
             public class DBEntities: DbContent
             {
                public DbSet<SubjectDB> SubjectDB { get; set; }
                public DbSet<AddressDB> AddressDB { get; set; }
                .
                .
             } 
```

使用此代码调用子例程

```
 SubjectDB xsubject = new SubjectDB();
             xsubject = (SubjectDB)GetNewSubject(model.Subject.Id); 
```

子程序是

```
 Public object GetNewSubject( string Id )
             {

                 SubjectDB subjectdb = new SubjectDB();
                 DBEntites db = new DBEntities();

                 var subjectxx = db.SubjectDB.First(x => x.SubjectId == Id);
                 var addressxx = db.AddressDB.First(x => x.SubjectId == Id);
                 .
                 .
                 subjectdb.SubjectId = subjectxx.Subjectid;
                 .
                 .
                 List<AddressDB> Address = new List<AddressDB>();
                 Address.Add(addressxx);
                 .
                 .
                 return(subjectdb);
              } 
```

我可以将鼠标悬停在子例程中的 subjectdb 上并查看所有数据，包括列表中的数据，但是当我将鼠标悬停在返回的对象“xsubject”上时，我看到所有正确的返回数据，但列表为空。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:09:54.740

你错过了这条线`GetNewSubject`吗？

```
subjectdb.Address = Address; 
```

**更新：**

此外，`Address`您班级的财产`SubjectDB`需要公开：

```
public List<AddressDB> Address { get; set; } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:10:27.300

地址是函数中新创建的对象（子例程非常基本，带有行号:-)）。您不会以任何方式将其添加到 subjectdb，因此它只是一个局部变量。您需要实际返回它，或将其存储在被调用者可以访问的地方。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-10T11:32:39.013

找到了拼图缺失的部分。即使列表是公开的，我也没有初​​始化它们。

模型修改为：

```
 public class SubjectDB   
     {   
        public string SubjectId  { get; set; }   
        .   
        .   
        public List<AddressDB> Address { get; set; }   
        .   
        .   
        [Key]   
        public int Id { get; set; }

        public SubjectDB()
        {
           this.Address = new List<AddressDB>();
           .
           .
        }   
     }   
     public class DBEntities: DbContent   
     {   
        public DbSet<SubjectDB> SubjectDB { get; set; }   
        public DbSet<AddressDB> AddressDB { get; set; }   
        .   
        .   
     } 
```

现在一切正常。DbSet 命令从数据库中获取数据，并且 LIST 得到正确更新，当模型传回主模型时，所有数据都在那里。

感谢所有这些帮助我了解我哪里出错了。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T17:51:00.120

进一步的测试表明，数据确实没有进入模型列表。它正在进入本地 LIST，但没有进入模型的 LIST。那么如何将数据移动到模型列表变量而不是本地列表变量中。在我的情况下，模型包含

```
 public clsss SubjectDB
           {
             public string SubjectId { get; set;}
             .
             .
             LIST<AddressDB> Address { get; set; } 
```

那么如何访问模型中的 LIST。我可以很好地访问字符串、int、DateTime、bool 数据。但是如何访问 LIST 以向其中添加数据？

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-09T14:36:56.263

昨天晚些时候，我发现了你们中的一些人现在指出的内容。我没有公开 LIST，所以没有看到。我现在已经解决了这个问题，但现在遇到了另一个问题。

模型

```
 public class SubjectDB  
         {  
            public string SubjectId  { get; set; }  
            .  
            .  
            public List<AddressDB> Address { get; set; }  
            .  
            .  
            [Key]  
            public int Id { get; set; }  
         }  
         public class DBEntities: DbContent  
         {  
            public DbSet<SubjectDB> SubjectDB { get; set; }  
            public DbSet<AddressDB> AddressDB { get; set; }  
            .  
            .  
         } 
```

现在当数据库查询执行时，我得到了正确的数据

```
 Public object GetNewSubject( string Id )     
         {     

             SubjectDB subjectdb = new SubjectDB();     
             DBEntites db = new DBEntities();     

             var subjectxx = db.SubjectDB.FirstOrDefault(x => x.SubjectId == Id);     
             var addressxx = db.AddressDB.FirstOrDefault(x => x.SubjectId == Id);     
             .     
             .     
             subjectdb.SubjectId = subjectxx.Subjectid;
             subjectdb.Name = subjectxx.Name;     
             .     
             .
             // Put LIST data into LIST          
             subjectdb.Address.Add(addressxx);     
             .     
             .     
             return(subjectdb);     
          } 
```

它现在在“subjectdb.Address.Add(addressxx);”处出错 陈述。我收到“NullReferenceException”，引用的对象未设置为对象的实例？

# c - #define 的替换和字符串化

> ID：12786242
> 
> 赞同：3
> 
> 时间：2012-10-08T17:06:07.020
> 
> 标签：c, c-preprocessor, stringification

我试图了解在以下位置替换 same2、same1 和连接的流程是什么：

```
#include<stdio.h>
#define concatenate(a,b) a##b
#define same1(a)  #a
#define same2(a)  same1(a)
main()
{
        printf("%s\n",same2(concatenate(1,2)));
        printf("%s\n",same1(concatenate(1,2)));
} 
```

我试图从很多地方理解这一点，但我无法理解。有人可以更清楚地解释一下吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:21:35.063

和

```
#define concatenate(a,b) a##b
#define same1(a)  #a
#define same2(a)  same1(a) 
```

当你有 时`same2(concatenate(1,2))`，参数 of`same2`在传递给它之前被扩展`same1`，所以在那里，`concatenate(1,2)`被它的结果替换`12`，然后被字符串化为`same1`产生`"12"`。

使用`same1`，不会发生宏参数的扩展，因为它前面是字符串化标记`#`：

> 在确定了调用类函数宏的参数后，将进行参数替换。替换列表中的参数，除非前面有一个`#`或`##`预处理标记或后面有一个`##`预处理标记（见下文），在其中包含的所有宏都已展开后，将被相应的参数替换。在被替换之前，每个参数的预处理标记都被完全宏替换，就好像它们形成了预处理文件的其余部分一样；没有其他可用的预处理令牌。

（n1570 中的第 6.10.3.1 (1) 节）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:19:46.900

当 1 和 2 作为参数传递时，您`concatinate(a,b)`就变成了。`concatinate(1,2)`那又变成`1##2`了 which 转化为`12`because`##`是一个连接运算符。所以参数 1 和 2 连接起来变成 12

`Same1(a)`变得简单`#a`，`#`字符串化操作符在哪里（参见[http://c-faq.com/ansi/stringize.html](http://c-faq.com/ansi/stringize.html)）。所以`Same1(12)`变成`"12"`并且当打印到控制台时

`Same2(a)`与 相同`Same1(a)`，也就是`#a`，只是按原样输出参数 a ；所以`Same2(a)`参数 a 为 'Concatenate(1,2)' 的输出只是一个字符串 "Concatenate(1,2)"

# iphone - 按日期对 fetchrequest 进行排序

> ID：12786245
> 
> 赞同：1
> 
> 时间：2012-10-08T17:06:08.677
> 
> 标签：iphone, objective-c, ios, ipad, core-data

我有一个核心数据数据库，里面填满了来自 json webservice 的数据。但我对日期有疑问。这个日期像字符串一样回来了。所以我要做的第一件事就是将此字符串转换为 NSDate。第二件事是将这个 NSDate 转换为正确的格式，以便我可以在日期上添加一个排序描述符。

这就是我目前在核心数据数据库中存储日期的方式。

```
 NSDateFormatter* df = [[NSDateFormatter alloc] init];
    [df setDateFormat:@"MM/dd/yyyy"];
    NSDate* d = [df dateFromString:[genkInfo objectForKey:CALENDAR_DATE]];

    kalender.date              = d; 
```

以及我如何获取数据。

```
- (void)getKalender // attaches an NSFetchRequest to this UITableViewController
{
    NSFetchRequest *request = [NSFetchRequest fetchRequestWithEntityName:@"Kalender"];
    request.sortDescriptors = [NSArray arrayWithObject:[NSSortDescriptor sortDescriptorWithKey:@"date" ascending:YES]];

    self.fetchedResultsController = [[NSFetchedResultsController alloc] initWithFetchRequest:request
                                                                        managedObjectContext:self.genkDatabase.managedObjectContext
                                                                          sectionNameKeyPath:nil
                                                                                   cacheName:nil];

} 
```

知道怎么做吗？

亲切的问候和提前感谢

**编辑**

当我执行以下日志时。我为每条记录得到正确的日期和空值

```
 NSLog(@"date  = %@",kalender.date);

    2012-10-08 19:17:12.125 RacingGenk[596:c07] date  = 2013-09-02 22:00:00 +0000
    2012-10-08 19:17:12.125 RacingGenk[596:c07] date  = (null) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:25:34.033

正如讨论中发现的那样，日期格式化程序使用的格式与 Web 服务发送的日期格式不匹配。使用

```
[dateFormatter setDateFormat:@"dd/MM/yyyy"] 
```

解决了这个问题。

# widget - 如何通过小部件设置 WTForm 字段的样式？

> ID：12786248
> 
> 赞同：1
> 
> 时间：2012-10-08T17:06:30.517
> 
> 标签：widget, wtforms

我想通过[自定义小部件](http://wtforms.simplecodes.com/docs/0.6/widgets.html#custom-widgets)设置 wtform 字段的样式，但渲染不断返回原始 html 代码（带有 & 符号）。为什么？

这是我的小部件：

```
def my_widget(field, **kwargs):
    field_id = kwargs.pop('id', field.id)
    html = [u'<input class="my_class" %s value="" type="text">' % html_params(id=field_id, name=field_id)]
    return u''.join(html) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:58:46.053

您需要告诉字符串应该按原样呈现而不转义 HTML：

```
from wtforms.widget.core import HTMLString

def my_widget(field, **kwargs):
    ....
    return HTMLString(u''.join(html)) 
```

# spring-security - 在 applicationContext 中找不到可见的 WebSecurityExpressionHandler 实例

> ID：12786251
> 
> 赞同：2
> 
> 时间：2012-10-08T17:06:46.503
> 
> 标签：spring-security, thymeleaf

我正在尝试使用**Spring3.1**实现部分级别的安全性。使用**Thymeleaf2.0**作为我的视图部分。这是我为此所做的配置，

## 使用的罐子## - 所有**spring3.1 罐子**和**thymeleaf-extras-springsecurity3.jar（版本 1.0.0.beta-1）**

**SpringWebFlow-Servlet.xml**

```
<bean id="templateEngine" class="org.thymeleaf.spring3.SpringTemplateEngine">
     ...
     <property name="additionalDialects">
     <set>
         <bean class="org.thymeleaf.extras.springsecurity3.dialect.SpringSecurityDialect"/>
     </set>
     </property>
     ...
</bean>
<bean id="webexpressionHandler" class="org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler" /> 
```

**弹簧安全.xml**

```
 <http auto-config="true" use-expressions="true">
     <intercept-url pattern="/productSelection" access="hasRole('ROLE_ADMIN')"/>
    .....
 </http> 
```

**xxx.html**

```
<div sec:authorize="hasRole('ROLE_ADMIN')">
    This only be seen if authenticated user has role ROLE_ADMIN.
</div> 
```

**问题**

> 获取异常说明：在 applicationContext 中找不到可见的 WebSecurityExpressionHandler 实例

在 Spring3.1 中，DefaultWebSecurityExpressionHandler 没有实现 WebSecurityExpressionHandler 并且该接口已被弃用。请让我知道解决方法，因为 Thymeleaf 正在尝试搜索 ApplicationContext 中不可用的 WebSecurityExpressionHandler 实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-03T14:45:54.633

您需要在应用程序（根）上下文而不是 servlet 上下文中定义 bean。

```
<bean id="webSecurityExpressionHandler" class="org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler"/> 
```

我有同样的问题将它从 servlet-context.xml 移动到 root-context.xml 并且 bean 被拾取。

根据您的 spring 设置，它可以在另一个 xml 文件中，因此请检查您的 web.xml 中的 Spring 上下文根。

在您的情况下，如果 spring-security.xml 在您的 Spring 根上下文中导入，您可以将它添加到那里。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T08:03:35.793

Spring Security 3.1.0 中的`DefaultWebSecurityExpressionHandler`类没有实现`WebSecurityExpressionHandler`接口，这可能是一个疏忽。

这在 Spring Security 3.1.1 和更新版本中得到了解决，因此您只需更新您的 Spring Security 依赖项。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-08-21T16:19:50.010

这个问题已经很老了，但是对于任何在这里找到补充丹尼尔答案的人来说，您可以通过更改以下内容来更新您的 pom.xml 中的依赖项。

```
<properties>
    ...
    <!-- <spring-security.version>3.1.0.RELEASE</spring-security.version> -->
    <spring-security.version>3.1.1.RELEASE</spring-security.version>
</properties> 
```

如果有人感兴趣，我也会在博客上提供更多信息

# google-drive-api - 获取文件和文件夹的图标

> ID：12786253
> 
> 赞同：0
> 
> 时间：2012-10-08T17:06:54.933
> 
> 标签：google-drive-api

现在已经找了一天了，什么也看不到。我想获取处于当前状态的文件和文件夹的图标。

我希望有类似的东西：

`http://api.gogole.com/gdrive-sdk/icons/{$file_id}.png`

或者有一个链接到从列出文件返回的项目数组 [] 中的图标。

任何帮助表示赞赏，daithi

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T23:24:40.853

每个文件的缩略图都包含在文件元数据中。检查`thumbnailLink`属性：

[https://developers.google.com/drive/v2/reference/files](https://developers.google.com/drive/v2/reference/files)

# c# - 抽象上下文时单元测试项目是否应该引用 EF dll

> ID：12786254
> 
> 赞同：5
> 
> 时间：2012-10-08T17:06:56.347
> 
> 标签：c#, entity-framework, unit-testing, dbcontext

我正在抽象我的 DbContext 以尝试解决关注点分离并使我的代码可单元测试。为了做到这一点，我想出了以下界面。

下面的这个接口托管在名为**AllInterfaces**的程序集中。由于下面声明中的 IDbSet，该项目引用了 EF dll。

```
public interface ISalesContext : IDisposable   
{   
  IDbSet<Customer> Customers { get; }   
  IDbSet<Order> Orders { get; }   
  IDbSet<Product> Products { get; }    
} 
```

我还创建了一个假数据库集，如下所示。

```
public class FakeDataSet<T> : IDbSet<T> where T: class, new()
{
 .......
} 
```

所以对于我的客户对象，这个假数据集如下所示。

```
public class FakeCustomerDbSet : FakeDbSet<Customer>
    {
     ..............
    } 
```

然后我创建了我的假上下文，如下所示。

```
public class FakeSalesContext : ISalesContext 
    {
        public FakeSalesContext ()
        {
            Customers = new FakeCustomerDbSet ();

        }

        public IDbSet<Customer> Customers { get; set; }
        public IDbSet<Order> Orders{ get; private set; }
        public IDbSet<Product> Products { get; private set; }

        public void Dispose()
        {

        }
    } 
```

与假对象相关的所有上述类（FakeDataSet、FakeCustomerDbSet 和 FakeSalesContext）都存在于程序集**AllFakes**中。我必须添加对 EF dll 的引用，因为这些假类中也引用了 IDbSet 接口。

然后我有我的单元测试项目，我在其中使用假对象来执行单元测试。

```
ISalesContext Context = new FakeSalesContext ();
Context.Customers.Add(new Customer() { Id = 1, LastName = "Karen" } ); 
```

问题是这个单元测试需要我添加对实体框架 dll 的引用。如果我删除 EF 引用，我会收到以下编译错误。

> 类型“System.Data.Entity.IDbSet`1”在未引用的程序集中定义。您必须添加对程序集“EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089”的引用。

如果我从 AllFakes 程序集中删除 EF dll 引用，我会收到以下错误。

> 找不到类型或命名空间名称“IDbSet”（您是否缺少 using 指令或程序集引用？）

向所有这些程序集添加对 EF dll 的引用是否有意义？对我来说，因为我已经抽象了我的数据库上下文，所以这里不需要它。关于如何做到这一点的任何建议？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:16:40.450

我相信您需要参考 EF dll。您确实抽象了您的上下文，但您的抽象仍然使用在 EntityFramework.dll 中定义的 IDbSet 接口。如果您不添加对 EntityFramework.dll（定义 IDbSet 的位置）的引用，FakeSalesContext 会公开 IDbSet 类型的公共属性，因为编译器不知道 IDbSet 是什么，因此无法编译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:17:17.977

在这种情况下，我认为它没有问题。只要您只是测试您的`DbContext`实现，引用本身仅用于您的上下文对象的依赖解析。

# google-app-engine - 重用 HRD 迁移的应用程序的旧标识符

> ID：12786256
> 
> 赞同：3
> 
> 时间：2012-10-08T17:07:05.013
> 
> 标签：google-app-engine

我有一个托管在 GAE 标识符 foo.appspot.com 上的应用程序。我最近将此应用程序迁移到 bar.appspot.com。现在，我可以使用应用程序标识符 foo.appspot.com 来托管一个完全不同的应用程序吗？

APP1 (Master/Slave) --> foo.appspot.com
APP1 (HRD) --> bar.appspot.com

现在 foo.appspot.com 在内部重定向到 bar.appspot.com。我可以在 foo.appspot.com 上部署一个全新的应用程序 APP2，而 APP1 将直接从 bar.appspot.com 访问吗？（如下）

APP1 (HRD) --> bar.appspot.com
APP2 (HRD) --> foo.appspot.com

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:18:22.537

是的，只要您仍然拥有它并且没有删除它，只需通过更改`application:`给定的值`app.yaml`并重新部署它来将您的应用程序部署到它的新家。您可能想要删除数据存储中的项目，但首先清理内存缓存。您可以从管理面板批量删除所有数据存储项目。

# java - ArrayList<>.values.toArray，强制转换为自定义类型数组

> ID：12786258
> 
> 赞同：2
> 
> 时间：2012-10-08T17:07:09.437
> 
> 标签：java, casting

所以想象一下我有以下内容：`myList`类型`ArrayList<CustomType>`，我想将它转换为数组，我该怎么做？

我努力了

```
CustomType[] myArr = (CustomType)myList.toArray(); 
```

这个编译，没问题，但我在运行时得到一个强制转换异常。我目前的解决方案是遍历 ArrayList 并将每个条目写入数组，效果不好。

任何想法？谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T17:10:15.770

你有一个接受类型的 toArray 版本

[toArray(T[] a)](http://docs.oracle.com/javase/6/docs/api/java/util/List.html#toArray%28T%5B%5D%29)

所以你会这样做：

```
myList.toArray(new CompositeType[myList.size()]); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:11:31.537

myList.toArray(new CustomType[myList.size]);

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:09:46.520

不传递任何参数的 toArray() 方法返回 Object[]。所以你必须传递一个数组作为参数，它将用列表中的数据填充并返回。您也可以传递一个空数组，但您也可以传递一个具有所需大小的数组。

CustomType[] 数组 = myList.toArray(new CustomType[list.size()]);

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T17:26:53.823

您的 myArr 是一个 CustomType 数组，您不能将 CustomType 对象转换为 CustomType Array 对象。做这个：

```
CustomType[] myArr = (CustomType[])myList.toArray(); 
```

# matlab - MATLAB：sym 函数不起作用

> ID：12786261
> 
> 赞同：2
> 
> 时间：2012-10-08T17:07:23.587
> 
> 标签：matlab

在matlab中我想创建符号向量：

```
X = sym(['x_n' 'x_(n-1)' 'x(n-2)']) 
```

但是，我得到

```
??? Error using ==> sym.sym>expression2ref at 2408
Error: Unexpected 'identifier' [line 1, col 11]

Error in ==> sym.sym>char2ref at 2378
    s = expression2ref(x);

Error in ==> sym.sym>tomupad at 2147
        S = char2ref(x);

Error in ==> sym.sym>sym.sym at 102
                S.s = tomupad(x,''); 
```

如果我尝试创建，例如 just `X = sym(['x_n' 'x_(n-1)'])`，没关系，那么有什么问题？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T21:40:32.337

如果你想创建一个符号向量（或矩阵），你只需要在方括号周围加上一组引号：

```
X = sym('[x_(n) x_(n-1) x_(n-2)]') 
```

或者

```
X = sym('[x_(n);x_(n-1);x_(n-2)]') 
```

我假设您在向量的第一个和第三个元素中有拼写错误，并希望将其定义`x_`为的函数`n`（如果没有，请参见下文）。但是，这通常不是构建符号数组的最灵活方式。我会使用该`syms`函数而不是`sym`并避免构建字符串（尽管有时使用字符串系统地创建大型向量/矩阵方程可能更容易）：

```
syms x_(n)
X = [x_(n) x_(n-1) x_(n-2)] 
```

最后，正如帮助`sym`所示，还可以自动创建枚举变量的向量和矩阵，例如：

```
X = sym('x_',[1 3]) 
```

如果您实际上不想指定函数向量，则此选项非常方便。

# jquery - 如何在 jquery 中访问最近的 p 标签？

> ID：12786263
> 
> 赞同：3
> 
> 时间：2012-10-08T17:07:26.673
> 
> 标签：jquery, html, ruby-on-rails, ajax

我在使用 jquery 中的 .closest() 方法时遇到问题。这是我遇到问题的 html 和 jquery 示例。

HTML ERB 的片段

```
<% @posts.each do |post| %>
  <tbody>
    <tr>
      <td><%= post.title %></td>
      <td><%= post.description %></td>
      <td><%= post.episodeNum %></td>
      <td><%= post.highDef %></td>
      <td>
        <%= link_to 'Show', post, :class => 'btn btn-info' %>
        <%= link_to 'Edit', edit_post_path(post), :class => 'btn btn-primary' %>
        <%= link_to 'Destroy', post, :class => 'btn btn-danger', confirm: 'Are you sure?', method: :delete %>
      </td>
      <td>
        <b>Votes: </b>
        <p class="current_vote"><font color=#1C1C1C>
          <%= post.upvotes.size - post.downvotes.size %>
        </p></font>
        <button type="button" class="buttonUp btn" id="<%= post.id %>">Increase Vote</button>
        <button type="button" class="buttonDown btn" id="<%= post.id %>">Decrease Vote</button>
      </td>
    </tr>
  <% end %> 
```

JQuery 的片段

```
$(document).ready(function() {
    $('.buttonUp').bind('click', function() {
        $.ajax({
            type: "POST",
            url: "/posts/increaseVote?id=" + $(this).attr("id"),
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function(data) {
                $(this).closest('p').text(data);
            }
        });
    });
    $('.buttonDown').bind('click', function() {
        $.ajax({
            type: "POST",
            url: "/posts/decreaseVote?id=" + $(this).attr("id"),
            contentType: 'application/json; charset=utf-8',
            dataType: 'json',
            success: function(data) {
                $(this).closest('p').text(data);
            }
        });
    });
}); 
```

另外，我正确接收了我的 json，在我的测试中，我的 json 数据回调只包含一个整数。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:10:03.090

如果**p** 是元素的祖先，则使用 .closest();

如果**p** 是元素的兄弟，使用 .siblings();

```
 $(this).closest('p').text(data);

 $(this).siblings('p').text(data); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:08:21.157

你不需要[兄弟姐妹](http://api.jquery.com/siblings/)吗？

```
 $(this).siblings('p').text(data); 
```

尽管它的名字，[最接近](http://api.jquery.com/closest/)用于寻找自我和祖先，而不是寻找作为父元素的子元素的元素。

# php - PHP - 调用外部程序并显示进度

> ID：12786264
> 
> 赞同：-1
> 
> 时间：2012-10-08T17:07:29.733
> 
> 标签：php

我有一个 PHP 脚本，它采用表单的字段来进行 3 个交替的程序调用，其中第一个的输出是第二个的输入，依此类推。

问题是我需要显示每个程序调用的进度，没什么复杂的，我只是想显示 3 条不同的消息：

*   系统调用 N 等待。
*   系统调用 N 正在执行中。
*   系统调用 N 完成。

我正在尝试使用 exec()、popen() 或 proc_open() 等不同的 PHP 函数来做到这一点，但对于这些函数，浏览器会等待每个调用完成。整个系统调用不会超过 5 分钟，可能是 3 或 4 分钟，所以，最好在每个调用中放置一个计时器，可能是 1.5 分钟，如果调用时间超过那个时间，则终止当前系统调用，跳过以下调用并显示错误消息。

你有什么主意吗？也许 ajax 和 javascript 的组合可以成为一个解决方案。提前致谢。

```
<?php
/*
  System Calls
  This file is required in another main script
  $projectPath and $projectName defined in the main script
*/

//$mainHome = getcwd();

$home = $projectPath . $projectName;
$temp = $home . "/temp/";
$calls = $temp . "CALLS";

$threads = array();

if(is_dir($temp)){
    //chdir($temp);
    $FILE = fopen($calls, "r");
    while(($call = fgetcsv($FILE)) !== FALSE) {
        //print_r($call);
        $threads[] = implode(" ", $call);
    }
}

//print_r($threads);

$descriptorspec = array(0 => array("pipe","r"),
                        1 => array("pipe","w"),
                        2 => array("file","./phpError.log","a")
);

for ($a=0; $a<count($threads); $a++) {
    print $threads[$a] . "<br/><br/>";
    exec($threads[$a])
    //$res = proc_open($threads[$a], $descriptorspec, $pipes, $temp);
}

//chdir($mainHome); 
```

?>

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-10T20:51:56.860

非常感谢！最后我开发了一个基于 python CGI 的解决方案，比我想象的更静态，但符合团队的期望。

问候

# c - 使用字符串语句执行 While

> ID：12786266
> 
> 赞同：1
> 
> 时间：2012-10-08T17:07:37.627
> 
> 标签：c

好的..所以我有那个代码，但我无法正确执行 Do While 语句......

```
#include <stdio.h>
#include <stdlib.h>

int main ()
{
    int nWinsPC, nWinsPlayer;
    char cChoose[1];
    do {
    system("cls");
        printf("Vamos jogar um jogo?\n");
        printf("-\n");
        printf("Escolha (p)edra, p(a)pel ou (t)esoura: ");
        getchar();
        scanf("%1[^\n]", cChoose);
    } while(cChoose != "p");
    system("pause");
} 
```

那个系统应该很简单......当玩家没有输入“p”时，选择屏幕保持循环，但我无法让它工作......

:(

提前致谢

**编辑**

问题解决了：

```
#include <stdio.h>
#include <stdlib.h>
#include <string.h>

int main ()
{
    int nWinsPC, nWinsPlayer;
    char cChoose[2];
    do {
    system("cls");
        printf("Vamos jogar um jogo?\n");
        printf("-\n");
        printf("Escolha (p)edra, p(a)pel ou (t)esoura: ");
        scanf("%s", cChoose);
    } while ( strcmp(cChoose,"p") );
    system("pause");
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:09:17.457

```
int cChoose;
...
    cChoose = getchar();
} while( cChoose != 'p' && cChoose != EOF ); 
```

您似乎喜欢使用 scanf，可能是因为它会为您处理空格。相反，请尝试：

```
int cChoose;
...
    do cChoose = getchar(); while( isspace( cChoose ));
} while( cChoose != 'p' && cChoose != EOF ); 
```

（虽然这是一种奇怪的写法，实际上只是另一个使用 do/while 的例子。通常会这样写：

```
int cChoose;
...
    while( isspace( cChoose = getchar()))
        ;
} while( cChoose != 'p' && cChoose != EOF ); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:09:18.273

您应该使用在 C 中比较两个字符串的方法`strcmp`如下

```
while ( strcmp( cChoose, "p" ) ) 
```

`strcmp`如果字符串相同，则返回 0 (false)，如果不同，则返回非零值。

你的陈述

```
while ( cChoose != "p" ) 
```

比较内存中两个指针的位置，其中一个`cChoose`指向堆栈上的数据，`"p"`另一个指向静态数据。他们永远不会平等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:17:13.277

您应该使用**strcmp**而不是“ **！=** ”检查 cChoose 的内容是否等于“p”。

cChoose 是一个指针，它指向内存中数组的起始位置。它绝对不等于内存中的“p”起始位置，因此您在程序中得到了无限循环。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T18:04:32.310

该声明 ：

```
strcmp ( cChoose, "p" ) 
```

必须使用如果两个字符串相等则返回零。此外，如果您使用 cChoose 作为字符串，则必须使用两个字符作为 cChoose 的长度，因为字符串总是以空字符 - '\0' 结尾。所以，使用：

```
char cChoose[2]; 
```

编辑：

scanf() 之前的 getchar() 采用初始的“p”，因此第一次没有任何反应。而第二次，getchar() 首先接收到第一行中留下的 '\n'，然后 scanf 正确读取了“p”。删除 getchar() 并且您的代码可以正常工作。

# lucene - neo4j + lucene 中的整数索引行为

> ID：12786284
> 
> 赞同：0
> 
> 时间：2012-10-08T17:09:12.650
> 
> 标签：lucene, indexing, neo4j

我想在大型数据库（约 2000 万个节点）中的节点上索引一个整数字段。我希望工作的行为如下：

```
HashMap<String, Object> properties = new HashMap<String, Object>();

// Add node to graph (inserter is an instance of BatchInserter)
properties.put("id", 1000);
long node = inserter.createNode(properties);

// Add index 
index.add(node, properties);

// Retrieve node by index. RETURNS NULL!
IndexHits<Node> hits = index.query("id", 1000); 
```

我将键值对添加到索引中，然后通过它进行查询。可悲的是，这不起作用。

我目前的 hackish 解决方法是使用 Lucene 对象并按范围查询：

```
// Add index 
properties.put("id", ValueContext.numeric(1000).indexNumeric());
index.add(node, properties);

// Retrieve node by index. This still returns null
IndexHits<Node> hits = index.query("id", 1000);

// However, this version works
hits = index.query(QueryContext.numericRange("id", 1000, 1000, true, true)); 
```

这是完美的功能，但范围查询真的很愚蠢。有没有办法在没有这种`QueryContext.numericRange`混乱的情况下运行精确的整数查询？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T13:23:44.523

您需要的索引查找是完全匹配，而不是查询。

尝试替换 `index.query("id", 1000)` 为 `index.get("id", 1000)`

# jquery - 使用没有 ID 和太多类的 jQuery 将新项目添加到无序列表

> ID：12786287
> 
> 赞同：2
> 
> 时间：2012-10-08T17:09:18.000
> 
> 标签：jquery, html, dom, append

我需要使用 custom.js 覆盖文件将新链接添加到三页上的无序列表。根据系统要求，我必须使用 jquery，并且找到一种选择和插入的方法真的让我的大脑麻木了。

这是菜单块本身：

```
<div class="nav-block nav-block-logo">
  <div class="nav-block-body">
    <div class="nav-block-content">
      <div class="logo">
    <a href="/"><img src="logo.png"></a>
      </div>
      <h2>Contact Us</h2>
      <ul>
      <li class="active">
      <a href="/contact-us/">Overview</a>
      </li>
      <li>
      <a href="/contact-us/contact-us">Contact Us</a>
      </li>
      <li class="last-child">
      <a href="/contact-us/facilities-and-directions">Facilities &amp; Directions</a>
      </li>
      </ul>
      <a href="http://www.addthis.com/bookmark.php" class="bookmark-share addthis_button">Bookmark &amp; Share</a>
    </div>
  </div>
</div> 
```

我需要在最后添加一个新的 li 链接。我试过 after() 和 append()，但都没有奏效。有人告诉我，我可能需要定位 h2 并检查标题是否为“联系我们”。也不知道该怎么做。

我对 jquery 比较陌生，这在最后一分钟有点丢给了我。任何帮助将不胜感激！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:14:30.333

您可以使用`contains`选择器：

```
var $li = $('<li>', {
  'id': 'id',
  'class': 'class'
}).html('<a href="herf">text</a>');

​$('h2:contains("Contact Us")').siblings('ul').append($li)​​​;    ​
// $('.nav-block-logo ul)').append($li)​​​; 
```

[http://jsfiddle.net/fj2K5/](http://jsfiddle.net/fj2K5/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T17:19:40.163

我使用了类定位。与查找内容相比，它非常可靠，而且速度肯定更快。我还确保更新您的最后一个孩子课程。

```
var $list = $(".nav-block .nav-block-content ul:first");
$list.find(".last-child").removeClass("last-child"); 
var $li = $("<li>", {"class": "last-child"}).html('<a href="#">Our Blog</a>');
$list.append($li); 
```

关于选择器，我输入了最简单的选择器，但如有必要，您可以更具体。例如：

```
var $list = $(".nav-block .nav-block-content ul:first") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T17:21:05.880

假设你的新`li`元素是一个 DOM 对象：

```
$('div.nav-block-content ul').append(newLI); 
```

将其添加为`ul`.

这是一个小提琴（它还演示了如何将`last-child`类移动到正确的元素）：http: [//jsfiddle.net/EwMSB/](http://jsfiddle.net/EwMSB/)

# java - 披萨订购的复选框 ItemListener 逻辑

> ID：12786288
> 
> 赞同：2
> 
> 时间：2012-10-08T17:09:19.357
> 
> 标签：java, checkbox, applet, awt, itemlistener

基本上，这个简单的程序所做的是在您单击按钮时显示摘要，披萨大小有三个单选按钮，浇头有三个复选框。我遇到的问题是，当用户第一次单击浇头，然后单击按钮并在 MessageDialog 中显示适当的摘要后，当用户想要没有浇头时，它不会显示“未选择浇头”

```
import java.applet.Applet;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;
import java.awt.event.ItemEvent;
import java.awt.event.ItemListener;
import java.awt.*;
import javax.swing.*;

public class PizzaOrdering extends Applet implements ActionListener, ItemListener {

    Button btnOk = new Button("OK");
    CheckboxGroup cbgSize = new CheckboxGroup();
    Checkbox chkSmall = new Checkbox("Small", cbgSize, false);
    Checkbox chkMedium = new Checkbox("Medium", cbgSize, false);
    Checkbox chkLarge = new Checkbox("Large", cbgSize, false);
    Checkbox chkPep = new Checkbox("Pepperoni");
    Checkbox chkMush = new Checkbox("Mushroom");
    Checkbox chkAnch = new Checkbox("Anchiovies");
    String pizza = "";
    String topping1 = "";
    String topping2 = "";
    String topping3 = "";
    String others = "with no toppings";
    Label lbl1 = new Label("Size");
    Label lbl2 = new Label("Toppings");
    Label spacer = new Label("                                                ");
    Label spacer2 = new Label("                                                ");

    @Override
    public void init() {
        resize(250, 150);
        add(lbl1);
        add(spacer);
        add(chkSmall);
        add(chkMedium);
        add(chkLarge);
        add(lbl2);
        add(spacer2);
        add(chkPep);
        add(chkMush);
        add(chkAnch);
        add(btnOk);
        chkAnch.addItemListener(this);
        chkPep.addItemListener(this);
        chkMush.addItemListener(this);
        btnOk.addActionListener(this);
    }

    @Override
    public void actionPerformed(ActionEvent e) {
        if (e.getSource() == btnOk) {
            if (cbgSize.getSelectedCheckbox() == chkSmall) {
                pizza = "Small";
            }
            if (cbgSize.getSelectedCheckbox() == chkMedium) {
                pizza = "Medium";
            }
            if (cbgSize.getSelectedCheckbox() == chkLarge) {
                pizza = "Large";
            }
            JOptionPane.showMessageDialog(btnOk, "You ordered a " + 
                    pizza + " pizza " + others, "Your Order", WIDTH);
        }
    }

    @Override
    public void itemStateChanged(ItemEvent ex) {
        boolean state1 = false;
        boolean state2 = false;
        boolean state3 = false;
        if (ex.getItemSelectable() == chkMush) {
            state1 = chkMush.getState();
            if (state1 == true) {
                topping1 = "Mushroom";
            } else if (state1 == false) {
                topping1 = "";
                if (state2 == false && state3 == false) {
                    others = "with no toppings";
                }
            }
        }

        if (ex.getItemSelectable() == chkPep) {
            state2 = chkPep.getState();
            if (state2 == true) {
                topping2 = "Pepperoni";
            } else if (state2 == false) {
                topping2 = "";
                if (state1 == false && state3 == false) {
                    others = "with no toppings";
                }
            }
        }

        if (ex.getItemSelectable() == chkAnch) {
            state3 = chkAnch.getState();
            if (state3 == true) {
                topping3 = "Anchiovies";

            } else if (state3 == false) {
                topping3 = "";
                if (state1 == false && state2 == false) {
                    others = "with no toppings";
                }
            }
        }
        others = " with the following topping:" + 
                topping1 + " " + topping2 + " " + topping3;
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:15:36.063

`itemStateChanged`当用户没有选中或取消选中任何复选框时，甚至不会调用该方法。`itemStatechanged`因此，默认情况下将“未选择顶部”标签置于可见状态，并在选择了某些顶部时在方法中隐藏或删除它。您可以在您的方法中使用静态 int 字段“计数”，`itemStateChanged`并在每个选定的顶部增加它，并在每个取消选择的顶部减少它。

这样，对于每次取消选择，将计数减一并检查计数，如果为零，则只需将“未选择顶部”的标签设置为可见或重新出现。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:16:05.647

以一种不可能在比萨本身之前选择浇头的方式安排您的流程（在提交信息时提出条件）。默认情况下，消息是“未选择浇头”，当他选择浇头时，您将新的浇头附加到消息的新文本中。

我建议你阅读装饰器设计模式（http://en.wikipedia.org/wiki/Decorator_pattern），这对你的应用程序很有帮助。

# android - 使用向上按钮指南进行导航

> ID：12786293
> 
> 赞同：0
> 
> 时间：2012-10-08T17:09:26.053
> 
> 标签：android, uinavigationbar

在处理 Google Drive 应用程序时，我有点困惑。

对我来说，向下钻取目录树就是在应用程序的层次结构中向下钻取。那么为什么当我按下向上按钮时，我会进入主屏幕。我希望到达父文件夹。

对我来说，Google Drive 应用程序通过这种行为打破了向上导航模型。当您对位于目录树下方的文件夹进行搜索时，这一点很明显，点击向上按钮会将您发送回家，而后退按钮会将您返回搜索。我想看到的是向上目录树。

我正在开发一个应用程序，我也处理文件系统，并想知道预期的行为是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-17T17:33:28.000

关于 Google Drive 之前没有正确使用向上导航按钮，您是对的。

但是，在最新的 Google Drive 中，由于 Google Drive 现在使用的是 Navigation Drawer，因此这个问题全部消除了。

在这种情况下，没有向上导航按钮，因为单击 Google Drive 应用程序图标会导致导航抽屉滑动打开。但是按返回键会按照遍历的顺序带你上去文件夹结构！

# c# - 我已经使用 LINQ 将 Excel 文件加载到 .NET，现在如何将数据批量插入 DB（oracle）表？

> ID：12786298
> 
> 赞同：2
> 
> 时间：2012-10-08T17:09:46.673
> 
> 标签：c#, linq, entity-framework-4.1

```
var ex = new ExcelQueryFactory(@"c:\test.xls");
var data = from c in ex.Worksheet<testClass>("Sheet 1")
           select c; 
```

我已添加到 Oracle 数据库的数据连接。有没有直接的方法来批量插入这些数据？

PS我是.NET 4学习的初学者，已经通过其他链接谈论批量插入但不知何故无法连接。这是一个 Windows 窗体，我在其中单击一个按钮即可读取 excel 文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:17:14.330

Oracle 数据库中的批量数据插入可以参考 CodeProject.com 上的这篇文章：

[使用 ODP.NET 批量插入](http://www.codeproject.com/Articles/25881/Bulk-Insert-using-ODP-NET)

# javascript - 在 jQuery 中使用 .position()

> ID：12786303
> 
> 赞同：0
> 
> 时间：2012-10-08T17:10:13.117
> 
> 标签：javascript, jquery, position, offset

[我这里](http://jsbin.com/ixihej/13/edit)的脚本需要在句子的定位上做一些工作。如果您单击任何选项，则句子应向下滑动到该高度。我试图用来`.position()`获得一个相对位置（正如文档所说，相对于偏移父级，这就是我写这个线程的原因）。

显然，`.position()`现在有点偏离，因为它似乎认为它的偏移父级是文档本身，而 jQuery 文档没有提到任何关于设置偏移父级的内容。非常感谢任何输入。

PS：我目前`position: relative`在句子上使用，这是2个`<p>`标签。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:15:58.833

在 css 上添加`position: relative;`到父元素/容器

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:19:32.197

添加`position:relative;`到您的 CSS 中`div[id^=wrapper]`。

所有绝对位置都是*相对于最近定位的容器。*在您的原始代码中，最近定位的容器是`<body>`标签，这显然不是您想要的。

# c# - 通过字符串名称访问属性

> ID：12786304
> 
> 赞同：-1
> 
> 时间：2012-10-08T17:10:13.667
> 
> 标签：c#, properties

> **可能重复：**
> [如何通过反射设置对象属性](https://stackoverflow.com/questions/5370641/how-to-set-object-property-through-reflection)

如果我有以下程序：

```
public class MyClass
{
    public int MyIntProp {
        get;
        set;
    }
    public string MyStringProp {
        get;
        set;
    }
}

public class MyMainClass
{
    private const string PropertyName = "MyIntProp";
    private MyClass _myClass;

    public MyMainClass()
    {
        _myClass = new MyClass();
        // _myClass.PropertyName = 5;
    }
} 
```

我想要做的是能够为属性分配一个`5`值`MyIntProp`。是否可以使用字符串名称来执行此操作？我虽然在使用 LINQ 之前看到过类似的事情，但我似乎不记得语法或在哪里找到它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:13:21.027

您可以将反射与[GetProperty](http://msdn.microsoft.com/en-us/library/system.type.getproperty%28v=vs.71%29.aspx)方法一起使用：

```
 typeof(MyClass).GetProperty(PropertyName).SetValue(_myClass, 5); 
```

# php - 在 php 中生成具有基本样式的 docx 文件

> ID：12786305
> 
> 赞同：0
> 
> 时间：2012-10-08T17:10:14.563
> 
> 标签：php, docx

我正在使用[pandoc](http://johnmacfarlane.net/pandoc/)`docx`从 HTML 页面创建一个文件，但在我的一生中，我似乎无法让它采用任何样式或成功使用模板。我不知道是不是因为你不能设置 docx 文件的样式，或者我做错了什么——对于 pandoc 来说，文档并不是那么冗长。`dotx`

我也尝试过将 html 回显并设置标题，以便客户端将文件作为 doc 打开，但是当您保存它时会出现一些问题（它会尝试另存为 html 文件并转换为 doc 不是'没那么容易）。

我想做的是创建一个可编辑的文档，该文档具有样式并包含徽标图像-仅字体类型，颜色和大小就足够了，也许一些基本的定位会很好。

有谁知道如何在类似 LAMP 的系统上实现这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:12:30.313

我偶然发现在[CLI 上使用 Libreoffice 进行转换](http://ask.libreoffice.org/question/1726/bulk-file-conversion-using-command-line/)，取得了更大的成功。它仍然不完美，但比我得到的要好得多，而且似乎更好地采用了板载字体类型、大小和颜色。

安装和使用步骤（CentOS / Redhat 这里）：

```
sudo yum install libreoffice libreoffice-headless 
```

您可能需要一些 X11 / Xorg 库，如果 Xorg 无法运行，最容易安装它。

```
libreoffice --headless --convert-to docx --outdir ./ myfile.html 
```

为我工作，我最终得到了一个可用的 .docx 文件，可以由 MS Word 2008 和 LibreOffice 3.5.6.2 读取。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T06:27:48.017

其他可能也值得研究的工具是[JODReports](http://jodreports.sourceforge.net/)和[Docmosis](http://www.docmosis.com)，它们专注于从模板生成（邮件合并），而不仅仅是格式转换。JODReports 是免费/开源的，Docmosis 不是。两者都可以通过各种方式从 PHP 中调用，Docmosis 有一个云服务，这意味着如果您的应用程序被允许到达云，则安装占用空间为零。请注意，我为创建 Docmosis 的公司工作。

我认为它们都可以使用 docx/dotx 模板并生成各种输出格式，包括 DocX

希望有帮助。

# html - 表格自动居中文本

> ID：12786310
> 
> 赞同：2
> 
> 时间：2012-10-08T17:10:31.183
> 
> 标签：html, css

我用一些文字制作了一个表格，它会自动垂直居中。例子：

![在此处输入图像描述](../Images/de2a9fce2d3d4df3d2da626d1b0ad049.png)

如何使文本从顶部开始？我的意思是正常的方式，你知道的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T17:12:25.160

[垂直对齐](https://developer.mozilla.org/en-US/docs/CSS/vertical-align)

> vertical-align CSS 属性指定内联或表格单元格元素的垂直对齐方式。

**html**

```
<table class="someClass">
    <tr>
        <td>Hello World</td>
    </tr>
</table> 
```

**css**

```
.someClass td { vertical-align: top; } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:13:05.957

试试这个：

```
<table>
<tr>
<td valign="top">
....
</td>
</tr>
</table> 
```

# oracle - 在 pl/sql 过程中声明变量时出现语法错误

> ID：12786312
> 
> 赞同：23
> 
> 时间：2012-10-08T17:10:45.067
> 
> 标签：oracle, plsql

这让我有点生气。我正在尝试将变量添加到过程中，但它不起作用 - 我刚刚收到以下错误消息：

> [错误] 语法检查 (25: 7)：错误第 25 行，第 7 列，第 25 行，第 25 列，第 12 行，找到“数字”，期望：；-or- .. := DEFAULT NOT NULL -or- % -or- ( .@

我在下面敲了一个非常基本的程序来隔离问题，现在我完全陷入困境，因为我看过的每个基本语法指南都说要做我所做的事情。为什么我不能如下所示声明变量？如果这对我的问题有任何线索，我通常会在 SQL Server 中编码。如果有人可以提供帮助，非常感谢！

```
CREATE OR REPLACE PROCEDURE MRCS.pro_xxx_test1 (cats out sys_refcursor)
IS

declare

spoon number;

balls varchar2(3);

BEGIN

 open cats for select * from dual;

   end;

/ 
```

* * *

## 回答 #1

> 赞同：60
> 
> 时间：2012-10-08T17:12:01.573

删除“声明”。在函数/过程声明中不需要

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-10-08T17:13:37.997

```
CREATE OR REPLACE PROCEDURE MRCS.pro_xxx_test1 (cats out sys_refcursor)
IS
spoon number;
balls varchar2(3);
BEGIN
 open cats for select * from dual;
end;
/ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-06-30T15:07:50.967

Declare local variable between `IS` and `BEGIN` block for procedure and function

```
CREATE OR REPLACE PROCEDURE MRCS.pro_xxx_test1 (cats out sys_refcursor)
IS
    spoon number;
    balls varchar2(3);
BEGIN

    open cats for select * from dual;

end;

/ 
```

# javascript - 我应该如何在 jQuery 文件上传插件中实现客户端加密？

> ID：12786320
> 
> 赞同：2
> 
> 时间：2012-10-08T17:11:36.800
> 
> 标签：javascript, jquery, html, file, file-upload

我正在尝试在 jQuery 文件上传插件中实现客户端加密。我试图按照我发现的一些信息...

*   遍历文件数组，
*   用代表加密文件的 Blob 替换每个项目
*   加密完成后，调用回调

但是我正在努力，我目前有......

```
 var encryptFiles = function (files, callback) {
        var reader = new FileReader();
        var file = files[0];
        var blob = file.slice(0, file.size);
        reader.readAsBinaryString(blob);
        reader.onload = fileonload;

        function fileonload(event) {
            var result = event.target.result;
            var encrypted = CryptoJS.AES.encrypt(result, "key");
            file.
            callback();
        }

        // iterate over the files array, 
        // replace each item with a Blob representing the encrypted file
        // after the encryption is done, invoke the callback
    }

    $('#fileupload').fileupload({
        add: function (e, data) {
            encryptFiles(data.files, function () {                
                data.submit();
            });
        }
    }); 
```

此代码成功地将文件读取到 blob，然后对其进行加密，但我不确定如何用 Blob 替换该项目。谁能给我一些帮助。

# testing - 测试自动化程序

> ID：12786329
> 
> 赞同：1
> 
> 时间：2012-10-08T17:12:02.823
> 
> 标签：testing, automated-tests, cucumber

有一个程序，我一辈子都记不住它的名字。我不确定这是否是问这个问题的正确论坛，但我想我会试一试，看看是否有人可以帮助我。

节目说明：

该程序用于编写和运行测试自动化。它允许您用英语编写测试的步骤。

示例（场景：发布堆栈溢出问题）：

1.  输入标题“XXX”
2.  输入描述
3.  输入标签“X”
4.  点击发布按钮

输入英文句子的测试步骤后即可运行测试。测试将返回黄色，表示并非所有步骤都是自动化的，并为上述 4 个步骤中的每一个创建存根方法。

然后，您可以完成自动化不同步骤和运行测试的工作。

抱歉，如果这听起来含糊不清，但我记得去年看过这个软件，但似乎找不到它或不再记得它的名字了。

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:24:51.500

有红宝石[黄瓜](http://cukes.info/)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-23T08:28:35.323

那是[黄瓜](https://cucumber.io)。

如果您有未定义的场景或步骤，它会警告您，并且会为这些步骤建议一些代码片段，如本[“10 分钟教程”](https://cucumber.io/docs/guides/10-minute-tutorial/)所示。

# r - 如何像这样在R中绘图？

> ID：12786334
> 
> 赞同：-5
> 
> 时间：2012-10-08T17:12:16.457
> 
> 标签：r, plot, parallel-coordinates

如何像这样在 R 中绘图（与图表相同）？您能否在答案中发布 R 代码？

我是一个 R 初学者，我发现我很难在 R 中绘图。

![](../Images/7f515eeebc2e66687c04df78d90dffc5.png) ![](../Images/44a866e5e2f22e88c4a76ffff0659fa4.png)

谢谢 ！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T18:32:36.460

底部图称为“平行坐标图”。您可以在 Google 上进行快速搜索以找到在 R 中执行此操作的几种方法。这里有两种方法，均使用“iris”数据集。

1.  ggplot2

    使用这种方法，您基本上可以说出哪些列具有您要绘制的数据，并使用`geom_line()`.

    ```
    library(ggplot2)
    p <- ggpcp(iris, vars = names(iris[1:4]))
    p + geom_line(aes(color = Species)) 
    ```

    ![在此处输入图像描述](../Images/3ce81de6d6834e762a23fa8c574ee039.png)

2.  大量的

    这里的方法是类似的。首先指定您的数据，然后指定您的数据如何分组（在“iris”数据集的情况下，有三个物种，每个物种有 50 个观察值）。

    ```
    library(MASS)
    parcoord(iris[-5], col = rep(1:3, each = 50)) 
    ```

    ![在此处输入图像描述](../Images/73c200aaea255760337ddb7616c0ed91.png)

# r - 为什么 as.Date 在字符向量上很慢？

> ID：12786335
> 
> 赞同：29
> 
> 时间：2012-10-08T17:12:19.220
> 
> 标签：r, data.table

我开始在 R 中使用 data.table 包来提高代码的性能。我正在使用以下代码：

```
sp500 <- read.csv('../rawdata/GMTSP.csv')
days <- c("Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday")

# Using data.table to get the things much much faster
sp500 <- data.table(sp500, key="Date")
sp500 <- sp500[,Date:=as.Date(Date, "%m/%d/%Y")]
sp500 <- sp500[,Weekday:=factor(weekdays(sp500[,Date]), levels=days, ordered=T)]
sp500 <- sp500[,Year:=(as.POSIXlt(Date)$year+1900)]
sp500 <- sp500[,Month:=(as.POSIXlt(Date)$mon+1)] 
```

我注意到，与创建工作日等的其他函数相比，as.Date 函数完成的转换非常慢。这是为什么呢？有没有更好/更快的解决方案，如何转换为日期格式？（如果你问我是否真的需要日期格式，可能是的，因为然后使用 ggplot2 来制作绘图，这对于这种类型的数据来说就像一个魅力。）

更准确地说

```
> system.time(sp500 <- sp500[,Date:=as.Date(Date, "%m/%d/%Y")])
   user  system elapsed 
 92.603   0.289  93.014 
> system.time(sp500 <- sp500[,Weekday:=factor(weekdays(sp500[,Date]), levels=days, ordered=T)])
   user  system elapsed 
  1.938   0.062   2.001 
> system.time(sp500 <- sp500[,Year:=(as.POSIXlt(Date)$year+1900)])
   user  system elapsed 
  0.304   0.001   0.305 
```

在 MacAir i5 上，观测值略低于 3000000。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2014-06-10T18:38:34.890

正如其他人提到的，`strptime`（从字符转换为 POSIXlt）是这里的瓶颈。另一个简单的解决方案是使用`lubridate`包及其`fast_strptime`方法。

这是我的数据上的样子：

```
> tables()
     NAME      NROW  MB COLS                                     
[1,] pp   3,718,339 126 session_id,date,user_id,path,num_sessions
     KEY         
[1,] user_id,date
Total: 126MB

> pp[, 2]
               date
      1: 2013-09-25
      2: 2013-09-25
      3: 2013-09-25
      4: 2013-09-25
      5: 2013-09-25
     ---           
3718335: 2013-09-25
3718336: 2013-09-25
3718337: 2013-09-25
3718338: 2013-10-11
3718339: 2013-10-11

> system.time(pp[, date := as.Date(fast_strptime(date, "%Y-%m-%d"))])
   user  system elapsed 
  0.315   0.026   0.344 
```

为了比较：

```
> system.time(pp[, date := as.Date(date, "%Y-%m-%d")])
   user  system elapsed 
108.193   0.399 108.844 
```

这大约快 316 倍！

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2012-10-08T20:28:05.033

我认为这只是`as.Date`转换`character`为`Date`via `POSIXlt`，使用`strptime`. 而且`strptime`很慢，我相信。

要自己跟踪它，请键入`as.Date`，然后`methods(as.Date)`，然后查看`character`方法。

```
> as.Date
function (x, ...) 
UseMethod("as.Date")
<bytecode: 0x2cf4b20>
<environment: namespace:base>

> methods(as.Date)
[1] as.Date.character as.Date.date      as.Date.dates     as.Date.default  
[5] as.Date.factor    as.Date.IDate*    as.Date.numeric   as.Date.POSIXct  
[9] as.Date.POSIXlt  
   Non-visible functions are asterisked

> as.Date.character
function (x, format = "", ...) 
{
    charToDate <- function(x) {
        xx <- x[1L]
        if (is.na(xx)) {
            j <- 1L
            while (is.na(xx) && (j <- j + 1L) <= length(x)) xx <- x[j]
            if (is.na(xx)) 
                f <- "%Y-%m-%d"
        }
        if (is.na(xx) || !is.na(strptime(xx, f <- "%Y-%m-%d", 
            tz = "GMT")) || !is.na(strptime(xx, f <- "%Y/%m/%d", 
            tz = "GMT"))) 
            return(strptime(x, f))
        stop("character string is not in a standard unambiguous format")
    }
    res <- if (missing(format)) 
        charToDate(x)
    else strptime(x, format, tz = "GMT")       ####  slow part, I think  ####
    as.Date(res)
}
<bytecode: 0x2cf6da0>
<environment: namespace:base>
> 
```

为什么`as.POSIXlt(Date)$year+1900`比较快？再次，通过以下方式追踪它：

```
> as.POSIXct
function (x, tz = "", ...) 
UseMethod("as.POSIXct")
<bytecode: 0x2936de8>
<environment: namespace:base>

> methods(as.POSIXct)
[1] as.POSIXct.date    as.POSIXct.Date    as.POSIXct.dates   as.POSIXct.default
[5] as.POSIXct.IDate*  as.POSIXct.ITime*  as.POSIXct.numeric as.POSIXct.POSIXlt
   Non-visible functions are asterisked

> as.POSIXlt.Date
function (x, ...) 
{
    y <- .Internal(Date2POSIXlt(x))
    names(y$year) <- names(x)
    y
}
<bytecode: 0x395e328>
<environment: namespace:base>
> 
```

感兴趣，让我们深入研究 Date2POSIXlt。对于这一点，我们需要 grep main/src 来知道要查看哪个 .c 文件。

```
~/R/Rtrunk/src/main$ grep Date2POSIXlt *
names.c:{"Date2POSIXlt",do_D2POSIXlt,   0,  11, 1,  {PP_FUNCALL, PREC_FN,   0}},
$ 
```

现在我们知道我们需要寻找 D2POSIXlt ：

```
~/R/Rtrunk/src/main$ grep D2POSIXlt *
datetime.c:SEXP attribute_hidden do_D2POSIXlt(SEXP call, SEXP op, SEXP args, SEXP env)
names.c:{"Date2POSIXlt",do_D2POSIXlt,   0,  11, 1,  {PP_FUNCALL, PREC_FN,   0}},
$ 
```

哦，我们可以猜到 datetime.c。无论如何，看看最新的实时副本：

[日期时间.c](https://svn.r-project.org/R/trunk/src/main/datetime.c)

在那里搜索`D2POSIXlt`，您会发现从 Date（数字）到 POSIXlt 是多么简单。您还将看到 POSIXlt 如何是一个实数向量（8 个字节）加上七个整数向量（每个 4 个字节）。这是 40 个字节，每个日期！

所以问题的症结（我认为）是为什​​么`strptime`这么慢，也许可以在 R 中改进。或者`POSIXlt`直接或间接地避免。

* * *

这是一个使用相关项目数 (3,000,000) 的可重现示例：

```
> Range = seq(as.Date("2000-01-01"),as.Date("2012-01-01"),by="days")
> Date = format(sample(Range,3000000,replace=TRUE),"%m/%d/%Y")
> system.time(as.Date(Date, "%m/%d/%Y"))
   user  system elapsed 
 21.681   0.060  21.760 
> system.time(strptime(Date, "%m/%d/%Y"))
   user  system elapsed 
 29.594   8.633  38.270 
> system.time(strptime(Date, "%m/%d/%Y", tz="GMT"))
   user  system elapsed 
 19.785   0.000  19.802 
```

通过`tz`似乎加速`strptime`，`as.Date.character`确实如此。所以也许这取决于你的语言环境。但`strptime`似乎是罪魁祸首，不是`data.table`。也许重新运行这个例子，看看你的机器上是否需要 90 秒？

* * *

## 回答 #3

> 赞同：8
> 
> 时间：2012-10-09T06:56:30.013

感谢您的建议。我通过自己为日期编写高斯算法解决了这个问题，并得到了更好的结果，见下文。

```
getWeekDay <- function(year, month, day) {
  # Implementation of the Gaussian algorithm to get weekday 0 - Sunday, ... , 7 - Saturday
  Y <- year
  Y[month<3] <- (Y[month<3] - 1)

  d <- day
  m <- ((month + 9)%%12) + 1
  c <- floor(Y/100)
  y <- Y-c*100
  dayofweek <- (d + floor(2.6*m - 0.2) + y + floor(y/4) + floor(c/4) - 2*c) %% 7
  return(dayofweek)
}

sp500 <- read.csv('../rawdata/GMTSP.csv')
days <- c("Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday")

# Using data.table to get the things much much faster
sp500 <- data.table(sp500, key="Date")
sp500 <- sp500[,Month:=as.integer(substr(Date,1,2))]
sp500 <- sp500[,Day:=as.integer(substr(Date,4,5))]
sp500 <- sp500[,Year:=as.integer(substr(Date,7,10))]
#sp500 <- sp500[,Date:=as.Date(Date, "%m/%d/%Y")]
#sp500 <- sp500[,Weekday:=factor(weekdays(sp500[,Date]), levels=days, ordered=T)]
sp500 <- sp500[,Weekday:=factor(getWeekDay(Year, Month, Day))]
levels(sp500$Weekday) <- days 
```

运行上面的整个块给出（包括从 csv 读取日期）...... Data.table 确实令人印象深刻。

```
user  system elapsed 
 19.074   0.803  20.284 
```

转换本身的时间是 3.49 过去。

* * *

## 回答 #4

> 赞同：7
> 
> 时间：2017-04-06T21:16:38.043

这是一个老问题，但我认为这个小技巧可能很有用。如果您有多行具有相同的日期，您可以这样做

`data[, date := as.Date(date[1]), by = date]`

它要快得多，因为它只处理每个日期一次（在我的 4000 万行数据集中，它从 25 秒变为 0.5 秒）。

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-10-08T18:27:22.657

我原本以为：“上面 as.Date 的参数没有指定格式。”

我现在想：我假设您键入的日期值是标准格式。我猜不会。所以你正在做两个过程。您正在从字符格式重新格式化为日期格式，并且您正在根据具有完全不同排序顺序的新值重新排序。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2021-12-07T23:08:53.247

我在 CRAN 上创建了一个名为 calcUnique 的小（单功能）包，它应该可以加快速度。改编自马特·道尔...

```
> Range = seq(as.Date("2000-01-01"), as.Date("2012-01-01"), by = "days")
> Date = format(sample(Range, 3000000, replace = TRUE), "%m/%d/%Y")
> system.time(as.Date(Date, "%m/%d/%Y"))
   user  system elapsed 
  1.160   0.000   1.157 
> system.time(strptime(Date, "%m/%d/%Y"))
   user  system elapsed 
  2.628   2.385   5.008 
> system.time(strptime(Date, "%m/%d/%Y", tz = "GMT"))
   user  system elapsed 
  0.849   0.001   0.851 
> system.time(calcUnique::calcUnique(Date, strptime, format = "%m/%d/%Y"))
   user  system elapsed 
  0.244   0.000   0.244 
> system.time(calcUnique::calcUnique(Date, strptime, format = "%m/%d/%Y", tz = "GMT"))
   user  system elapsed 
  0.173   0.000   0.172 
> 
```

# javascript - 如何使用 facebook 按钮发布到用户的墙上？

> ID：12786342
> 
> 赞同：0
> 
> 时间：2012-10-08T17:12:52.117
> 
> 标签：javascript, facebook, facebook-graph-api, facebook-javascript-sdk, facebook-sharer

我需要一种使用 facebook 按钮在用户墙上发布消息的方法。我尝试使用 facebook 分享按钮，但现在已弃用，并且 api 中的“消息”字段也已弃用。有谁知道这样做的方法？注意我想使用javascript。任何帮助表示赞赏。谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T21:53:29.050

sharer.php 插件（您描述的）已被弃用。

现在最好的方法是使用 Facebook Graph API：[https ://developers.facebook.com/docs/reference/api/post/](https://developers.facebook.com/docs/reference/api/post/)

# jquery - 如何在其他模态弹出窗口上方显示模态弹出窗口

> ID：12786343
> 
> 赞同：3
> 
> 时间：2012-10-08T17:12:57.783
> 
> 标签：jquery, html

我有一个模态弹出窗口。当我单击 Modal Pop Up 中的按钮时，会出现另一个 Modal Pop Up。但是第二个模态弹出窗口的一些隐藏在第一个模态弹出窗口的后面。如何使其显示在第一个模式弹出窗口上方。

任何想法和建议表示赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T17:15:51.417

尝试将您想要的弹出包装的**z-index**设置为大于另一个..

```
#popup1 {
   z-index: 9997;
}

#popup2 {
   z-index: 9998; // This will come above popup1
} 
```

这是提供的，`#popup1`并且`#popup2`具有相同的父级。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T17:48:24.063

您可以通过使用两个类和 jQuery 来动态解决这个问题：

```
.PopUp {
    z-index:999;
    }

.PopUp-focus {
    z-index:1000;
    } 
```

默认情况下，所有弹出窗口都将具有“PopUp”类。

然后创建以下 jQuery 函数来处理打开弹出窗口的事件。（这可能与上下文无关，因为您没有提供代码，但为了举例......）

```
function OpenPopup(popupID) {

    $(".PopUp-focus").removeClass('PopUp-focus').addClass('PopUp');

    $("#"+popupID+"").removeClass('PopUp').addClass('PopUp-focus');

    $("#"+popupID+"").fadeIn(500); // Your code to make the popup appear. (Random example).

} 
```

--

```
<div onClick="OpenPopup('ID of popup');">Open Popup</div> 
```

这将非常简单地解决同时打开两个弹出窗口的问题，方法是为最近打开的弹出窗口提供比任何其他窗口更高的 z-index。

缺点是如果出现打开超过 2 个弹出窗口的情况，后台弹出窗口将面临冲突的风险，并且需要更精细的脚本来减少/增加 z-index。但这取决于您项目的性质和范围。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T17:16:39.823

设置弹出窗口的 z-index，它应该在顶部，高于 DOM 上的任何其他元素。把它想象成应该在顶部的层。

# javascript - ng-bind-html 不起作用

> ID：12786345
> 
> 赞同：3
> 
> 时间：2012-10-08T17:13:01.550
> 
> 标签：javascript, angularjs, javascript-databinding

请看[这个](http://fiddle.jshell.net/vDSAH/15/) *小提琴*

请在文本区域输入 4，它应该写一个错误信息，即在这一行：

```
 $names.push('<div ng-bind-html-unsafe="snippet"></div>'); 
```

实际上它没有。它在不处理的情况下打印html代码本身，

底层的html是：

```
<li ng-repeat="user in list|splitList:appUsers" class="ng-scope ng-binding">
        &lt;div ng-bind-html="snippet"&gt;&lt;/div&gt;
    </li> 
```

我试图遵循这个[主题的解决方案](https://stackoverflow.com/questions/9381926/insert-html-into-view-using-angularjs)

但似乎没有任何帮助，

任何修复它的帮助都将被视为，

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-08T17:34:41.353

我从 angularjs 的聊天室得到了帮助，

问题是我应该使用：

```
<div ng-bind-html-unsafe="user">...</div> 
```

代替`{{user}}`

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2014-02-15T23:42:44.273

要使其正常工作，您将需要以下内容：

**在 html 中声明**

```
div ng-bind-html="{expression}"></div> 
```

或者

```
div class="ng-bind-html: {expression};"></div> 
```

***和***

参考`angular-sanitize.min.js`然后添加

```
angular.module('YOUR_APP_NAME', ['ngSanitize']); 
```

由于某种原因，最后两个在 angularjs 文档中......

# java - 为媒体播放器制作一个搜索栏。

> ID：12786346
> 
> 赞同：3
> 
> 时间：2012-10-08T17:13:01.020
> 
> 标签：java, swing, jmf

我正在使用 JMF 制作媒体播放器，我想使用自己的控制组件 谁能帮我为媒体播放器制作一个搜索栏，以便它可以根据滑块位置播放歌曲。

只是建议我一些逻辑，我可以在之后弄清楚编码部分

```
if(player!=null){
    long durationNanoseconds = 
    (player.getDuration().getNanoseconds());
    durationbar.setMaximum((int) player.getDuration().getSeconds());
    int duration=(int) player.getDuration().getSeconds();
    int percent = durationbar.getValue();
    long t = (durationNanoseconds / duration) * percent;
    Time newTime = new Time(t);
    player.stop();
    player.setMediaTime(newTime);
    player.start();
    mousedrag=true; 
```

这是代码。现在我怎样才能让滑块随着歌曲移动？当我拖动/单击它时，滑块可以工作，但它不会随着歌曲移动。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T23:32:05.730

为此使用滑块的问题在于，当滑块位置以编程方式移动时，它会触发事件。当在滑块上触发事件时，通常意味着应用程序。必须做一些事情，例如移动歌曲位置。效果是一个永无止境的循环。通过设置标志并忽略某些事件可能有一种解决方法，但我决定采用不同的方式。

相反，我使用 a`JProgressBar`来指示轨道中的位置，并使用 a`MouseListener`来检测用户何时单击单独的位置。使用 Swing 更新进度条`Timer`，每 50-200 毫秒检查一次轨道位置。当`MouseEvent`检测到 a 时，重新定位轨道。

该栏可以在此 GUI 的右上角看到。将鼠标悬停在它上面将产生一个工具提示，显示该鼠标位置在轨道上的时间。

![Duke Box 使用进度条跟踪位置](../Images/0ea676c3ee74c4ff3efb17660594669b.png)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T17:14:28.670

您可以使用 JSlider。

您可以从[Slider 教程中了解更多信息](http://docs.oracle.com/javase/tutorial/uiswing/components/slider.html)

![滑块教程](../Images/8c1ed9ecacbaed198a20729037036145.png)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T21:34:41.950

您不必`revalidate`为了更改滑块而进入容器。

每次创建新播放器时使用这些行：

```
 slider.setMinimum(0);
  slider.setMaximum(duration);
  slider.setValue(0);

  new UpdateWorker(duration).execute(); 
```

其中`duration`是保存歌曲持续时间的变量，以秒为单位。

这是更新滑块的代码（用作内部类）：

```
private class UpdateWorker extends SwingWorker<Void, Integer> {

    private int duration;

    public UpdateWorker(int duration) {
        this.duration = duration;
    }

    @Override
    protected Void doInBackground() throws Exception {
        for (int i = 1; i <= duration; i++) {
            Thread.sleep(1000);
            publish(i);
        }
        return null;
    }

    @Override
    protected void process(List<Integer> chunks) {
        slider.setValue(chunks.get(0));
    }

} 
```

现在滑块将向右移动，直到歌曲结束。

另请注意，除非您想使用自定义滑块，否则 JMF 通过`player.getVisualComponent()`（参见[此示例](http://www.java-tips.org/java-se-tips/javax.swing/make-your-own-java-media-player-to-play-media.html)）提供了一个简单（且有效）的滑块。

**更新**

为了暂停/恢复工作线程（以及滑块和歌曲），这里有一个带有设置适当标志的按钮的示例。

```
private boolean isPaused = false;
JButton pause = new JButton("Pause");
pause.addActionListener(new ActionListener() {
    @Override
    public void actionPerformed(ActionEvent e) {
        JButton source = (JButton)e.getSource();
        if (!isPaused) {
            isPaused = true;
            source.setText("Resume");
        } else {
            isPaused = false;
            source.setText("Pause");
        }
    }
}); 
```

该方法`doInBackground`应更改为：

```
@Override
protected Void doInBackground() throws Exception {
    for (int i = 0; i <= duration; i++) {
        if (!isPaused) {
            publish(i);
            try {
                Thread.sleep(1000);
            } catch(InterruptedException e) {
                e.printStackTrace();
            }
        }
        while (isPaused) {
            try {
                Thread.sleep(50);
                continue;
            } catch(InterruptedException e) {
                e.printStackTrace();
            }
        }
    }
    return null;
} 
```

相应地修改它以暂停/恢复歌曲以及滑块。

您还应该考虑@AndrewThompson 的回答。

# gwt - 如何在典型的 GWT mvp 项目中进行代码拆分？

> ID：12786353
> 
> 赞同：0
> 
> 时间：2012-10-08T17:13:32.837
> 
> 标签：gwt, mvp, gwt-activities

我的应用程序是一个典型的 GWT 应用程序，它有一个导航栏，当单击一个栏项时，位置会发生变化，应用程序会找到该位置对应的活动（在 MasterActivityMapper 中完成），然后调用 activity.start()。在活动初始​​化期间，也创建了相应的视图。当我的应用程序第一次启动时，默认情况下会选择第一个导航栏项。

```
public class MasterActivitiesMapper implements Activity
{
      public Activity getActivity( Place place )
      {  
          if(place equals place1)
          {
             Activity1 a1= new Activity1();
             return a1;
          }
          else if(place equals place2)
          {
             Activity1 a2= new Activity2();
             return a2;
          }
          else if(...)
          {
             ....
          }
      }
} 
```

我的应用程序运行良好，只是初始下载大小太大，加载需要 10 秒。我必须使用代码拆分来解决这个问题。

我阅读了文档 [https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting](https://developers.google.com/web-toolkit/doc/latest/DevGuideCodeSplitting) 但是仍然无法弄清楚在哪里/如何拆分代码，有人有这个帮助的经验吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T11:22:00.283

`Activity.start`，本质上是异步的，似乎是放置`GWT.runAsync`.

*也有*可能从您的`ActivityMapper`. 有关一些示例代码，请参阅[http://code.google.com/p/google-web-toolkit/issues/detail?id=5129](http://code.google.com/p/google-web-toolkit/issues/detail?id=5129)和[https://gist.github.com/3038878](https://gist.github.com/3038878)。

# dictionary - 日语卡卡西词典有一些奇怪的字母

> ID：12786355
> 
> 赞同：2
> 
> 时间：2012-10-08T17:13:39.600
> 
> 标签：dictionary, letters

[我从： http](http://packages.ubuntu.com/precise/kakasi) ://packages.ubuntu.com/precise/kakasi 下载了 kakasi 的源码包

```
plee@sos:~/Japanese/kakasi$ l
total 0
plee@sos:~/Japanese/kakasi$ wget http://archive.ubuntu.com/ubuntu/pool/universe/k/kakasi/kakasi_2.3.5~pre1+cvs20071101.orig.tar.gz
--2012-10-08 11:01:00--  http://archive.ubuntu.com/ubuntu/pool/universe/k/kakasi/kakasi_2.3.5~pre1+cvs20071101.orig.tar.gz
Resolving archive.ubuntu.com... 91.189.92.183, 91.189.92.184, 91.189.92.188, ...
Connecting to archive.ubuntu.com|91.189.92.183|:80... connected.
HTTP request sent, awaiting response... 200 OK
Length: 1329263 (1.3M) [application/x-gzip]
Saving to: 'kakasi_2.3.5~pre1+cvs20071101.orig.tar.gz'

100%[======================================================================================================================================================================>] 1,329,263    705K/s   in 1.8s    

2012-10-08 11:01:27 (705 KB/s) - 'kakasi_2.3.5~pre1+cvs20071101.orig.tar.gz' saved [1329263/1329263] 
```

然后我解压缩它：

```
plee@sos:~/Japanese/kakasi$ tar zxvf kakasi_2.3.5~pre1+cvs20071101.orig.tar.gz 
kakasi-2.3.5pre1/
kakasi-2.3.5pre1/maintMakefile
kakasi-2.3.5pre1/INSTALL-ja
kakasi-2.3.5pre1/ONEWS
kakasi-2.3.5pre1/kakasi.spec.in
kakasi-2.3.5pre1/src/
kakasi-2.3.5pre1/src/a2.c
kakasi-2.3.5pre1/src/k2.c
kakasi-2.3.5pre1/src/jj2.c
kakasi-2.3.5pre1/src/itaiji.c
kakasi-2.3.5pre1/src/getopt1.c
kakasi-2.3.5pre1/src/getopt.h
kakasi-2.3.5pre1/src/dict.c
kakasi-2.3.5pre1/src/kakasi.c
kakasi-2.3.5pre1/src/kk2.c
kakasi-2.3.5pre1/src/mkkanwa.c
kakasi-2.3.5pre1/src/atoc-conv.c
kakasi-2.3.5pre1/src/conv-util.h
kakasi-2.3.5pre1/src/78_83.c
kakasi-2.3.5pre1/src/conv-util.c
kakasi-2.3.5pre1/src/level.h
kakasi-2.3.5pre1/src/rdic-conv.c
kakasi-2.3.5pre1/src/ee2.c
kakasi-2.3.5pre1/src/Makefile.am
kakasi-2.3.5pre1/src/Makefile.in
kakasi-2.3.5pre1/src/g2.c
kakasi-2.3.5pre1/src/j2.c
kakasi-2.3.5pre1/src/hh2.c
kakasi-2.3.5pre1/src/kakasi.h
kakasi-2.3.5pre1/src/wx2-conv.c
kakasi-2.3.5pre1/src/level.c
kakasi-2.3.5pre1/src/kanjiio.c
kakasi-2.3.5pre1/src/getopt.c
kakasi-2.3.5pre1/config.guess
kakasi-2.3.5pre1/config.rpath
kakasi-2.3.5pre1/INSTALL
kakasi-2.3.5pre1/configure.in
kakasi-2.3.5pre1/AUTHORS
kakasi-2.3.5pre1/config.sub
kakasi-2.3.5pre1/NEWS
kakasi-2.3.5pre1/configure
kakasi-2.3.5pre1/tests/
kakasi-2.3.5pre1/tests/kakasi-6
kakasi-2.3.5pre1/tests/kakasi-5
kakasi-2.3.5pre1/tests/env.sh
kakasi-2.3.5pre1/tests/kakasi-2
kakasi-2.3.5pre1/tests/kakasi-1
kakasi-2.3.5pre1/tests/kakasi-7
kakasi-2.3.5pre1/tests/kakasi-4
kakasi-2.3.5pre1/tests/Makefile.am
kakasi-2.3.5pre1/tests/Makefile.in
kakasi-2.3.5pre1/tests/kakasi-3
kakasi-2.3.5pre1/ltmain.sh
kakasi-2.3.5pre1/THANKS
kakasi-2.3.5pre1/man/
kakasi-2.3.5pre1/man/kakasi.1.ja
kakasi-2.3.5pre1/man/kakasi.cat
kakasi-2.3.5pre1/man/kakasi.1
kakasi-2.3.5pre1/man/kakasi.cat.ja
kakasi-2.3.5pre1/man/Makefile.am
kakasi-2.3.5pre1/man/Makefile.in
kakasi-2.3.5pre1/aclocal.m4
kakasi-2.3.5pre1/kakasi-config.in
kakasi-2.3.5pre1/kakasi.spec
kakasi-2.3.5pre1/install-sh
kakasi-2.3.5pre1/missing
kakasi-2.3.5pre1/COPYING
kakasi-2.3.5pre1/README
kakasi-2.3.5pre1/kakasidict
kakasi-2.3.5pre1/README-ja
kakasi-2.3.5pre1/doc/
kakasi-2.3.5pre1/doc/README.BeOS
kakasi-2.3.5pre1/doc/README.lib
kakasi-2.3.5pre1/doc/JISYO
kakasi-2.3.5pre1/doc/CVS/
kakasi-2.3.5pre1/doc/CVS/Repository
kakasi-2.3.5pre1/doc/CVS/Entries
kakasi-2.3.5pre1/doc/CVS/Root
kakasi-2.3.5pre1/doc/README.wakati
kakasi-2.3.5pre1/doc/README.level
kakasi-2.3.5pre1/doc/ChangeLog.lib
kakasi-2.3.5pre1/doc/README.OS2
kakasi-2.3.5pre1/itaijidict
kakasi-2.3.5pre1/Makefile.am
kakasi-2.3.5pre1/TODO
kakasi-2.3.5pre1/lib/
kakasi-2.3.5pre1/lib/kakasi.def
kakasi-2.3.5pre1/lib/libee2.c
kakasi-2.3.5pre1/lib/libkanjiio.c
kakasi-2.3.5pre1/lib/libkakasi.c
kakasi-2.3.5pre1/lib/libg2.c
kakasi-2.3.5pre1/lib/libhh2.c
kakasi-2.3.5pre1/lib/libjj2.c
kakasi-2.3.5pre1/lib/libdict.c
kakasi-2.3.5pre1/lib/lib78_83.c
kakasi-2.3.5pre1/lib/libj2.c
kakasi-2.3.5pre1/lib/liba2.c
kakasi-2.3.5pre1/lib/libkakasi.h
kakasi-2.3.5pre1/lib/libkk2.c
kakasi-2.3.5pre1/lib/libk2.c
kakasi-2.3.5pre1/lib/Makefile.am
kakasi-2.3.5pre1/lib/Makefile.in
kakasi-2.3.5pre1/lib/libitaiji.c
kakasi-2.3.5pre1/lib/makefile.msc.in
kakasi-2.3.5pre1/Makefile.in
kakasi-2.3.5pre1/magic-kakasi
kakasi-2.3.5pre1/ChangeLog
kakasi-2.3.5pre1/config.h.in
plee@sos:~/Japanese/kakasi$ l
total 1304
drwxr-xr-x 7 plee plee    4096 2010-03-21 19:36 kakasi-2.3.5pre1
-rw-r--r-- 1 plee plee 1329263 2010-05-09 09:06 kakasi_2.3.5~pre1+cvs20071101.orig.tar.gz
plee@sos:~/Japanese/kakasi$ cd kakasi-2.3.5pre1/
plee@sos:~/Japanese/kakasi/kakasi-2.3.5pre1$ l
total 3520
-rw-r--r-- 1 plee plee  365083 2010-03-21 19:35 aclocal.m4
-rw-r--r-- 1 plee plee     356 2001-04-12 02:36 AUTHORS
-rw-r--r-- 1 plee plee   19779 2007-11-01 00:00 ChangeLog
-rwxr-xr-x 1 plee plee   44959 2010-03-21 19:35 config.guess
-rw-r--r-- 1 plee plee    2131 2010-03-21 19:35 config.h.in
-rwxr-xr-x 1 plee plee   14987 2004-03-01 23:01 config.rpath
-rwxr-xr-x 1 plee plee   34597 2010-03-21 19:35 config.sub
-rwxr-xr-x 1 plee plee  417371 2010-03-21 19:35 configure
-rw-r--r-- 1 plee plee    2461 2004-09-30 23:03 configure.in
-rw-r--r-- 1 plee plee   35147 2010-03-21 19:35 COPYING
drwxr-xr-x 3 plee plee    4096 2010-03-21 19:35 doc
-rw-r--r-- 1 plee plee   15578 2010-03-21 19:35 INSTALL
-rw-r--r-- 1 plee plee    9618 2000-03-03 22:37 INSTALL-ja
-rwxr-xr-x 1 plee plee   13663 2010-03-21 19:35 install-sh
-rw-r--r-- 1 plee plee    2820 2000-03-03 22:37 itaijidict
-rw-r--r-- 1 plee plee    1058 2000-12-27 01:15 kakasi-config.in
-rw-r--r-- 1 plee plee 2237449 2002-10-02 00:32 kakasidict
-rw-r--r-- 1 plee plee    2789 2010-03-21 19:36 kakasi.spec
-rw-r--r-- 1 plee plee    2789 2001-04-12 23:53 kakasi.spec.in
drwxr-xr-x 2 plee plee    4096 2010-03-21 19:36 lib
-rwxr-xr-x 1 plee plee  243455 2010-03-21 19:35 ltmain.sh
-rw-r--r-- 1 plee plee     113 2003-03-12 06:46 magic-kakasi
-rw-r--r-- 1 plee plee    1632 2001-01-04 09:14 maintMakefile
-rw-r--r-- 1 plee plee     811 2004-03-01 23:01 Makefile.am
-rw-r--r-- 1 plee plee   27109 2010-03-21 19:35 Makefile.in
drwxr-xr-x 2 plee plee    4096 2010-03-21 19:36 man
-rwxr-xr-x 1 plee plee   11419 2010-03-21 19:35 missing
-rw-r--r-- 1 plee plee    3038 2004-07-26 22:57 NEWS
-rw-r--r-- 1 plee plee    5632 2000-03-03 22:37 ONEWS
-rw-r--r-- 1 plee plee    1727 2000-04-26 20:16 README
-rw-r--r-- 1 plee plee    1505 2000-04-26 20:16 README-ja
drwxr-xr-x 2 plee plee    4096 2010-03-21 19:36 src
drwxr-xr-x 2 plee plee    4096 2010-03-21 19:36 tests
-rw-r--r-- 1 plee plee     783 2006-09-21 02:30 THANKS
-rw-r--r-- 1 plee plee     441 2001-04-13 03:02 TODO 
```

我发现编码错误，所以我曾经`iconv`转换：

```
plee@sos:~/Japanese/kakasi/kakasi-2.3.5pre1$ vim kakasidict 
plee@sos:~/Japanese/kakasi/kakasi-2.3.5pre1$ iconv -f "EUC-JP" -t "UTF8" kakasidict > kakasidict.UTF8
plee@sos:~/Japanese/kakasi/kakasi-2.3.5pre1$ vim kakasidict.UTF8 
```

现在文件看起来没问题，但是有一些奇怪的条目，其最后一个假名是一个字母：

```
173 きづk 気付k
174 つk 付
368 いk 行
653 おりr 下り 
```

发生了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T00:04:14.293

它是一种特殊的语法，可以匹配同一个动词的多种形式。
例如，`いk`将匹配`いく`(iku) `いけない`(ikenai) `いかせる`(ikaseru) `いきたい`(ikitai) ...
它不仅带有`k`，而且带有所有动词前缀，例如参见 line `たべt 食べ`，并且可能带有所有这些字母：w,e,r ,t,y,u,i,o,p,a,s,d,f,g,h,j,k,z,b,n,m。

我对此没有参考，但在检查文件后，我很确定它是这样工作的。*[我在https://github.com/nicolas-raoul/kakasi-java](https://github.com/nicolas-raoul/kakasi-java)*
*维护 Java 版本的 Kakasi，我知道 Kakasi 的文档非常稀缺。*

# perl - Facebook 返回 ID 和 me.name

> ID：12786356
> 
> 赞同：2
> 
> 时间：2012-10-08T17:13:39.990
> 
> 标签：perl, facebook-graph-api

Facebook API 的这两个问题我真的很迷茫……

发布到用户墙的所有内容都运行良好，但我有一个带有页面的客户。该页面是从头开始创建的，而不是作为用户自己创建的 - 即他们没有登录并创建一个他们刚刚从 Facebook 欢迎屏幕>创建页面开始的页面。

那里的页面工作正常，但是，

1) 我们的系统正在通过 API 提交帖子并收到一个 ID 作为回报（例如 {"id":"123456_123456"} 从 Facebook 返回 - 这告诉我 facebook 已接受它并给了我帖子的 ID。

但是，该帖子不会出现在它相关的页面上（我已经检查了它的提交位置并且它是正确的用户 ID）。该系统对所有其他用户都运行良好。

2) 当该用户通过 Javascript 登录时，我们得到“me.name”的空值（我们得到 me.email 等，只是没有名字）

这一切正常吗，还是页面有不同的技术来发布和检索数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:18:40.087

电子邮件是 facebook 用户的私人数据，这是您遇到的权限问题

获取用户电子邮件地址的唯一方法是请求电子邮件字段的扩展权限。

登录后。

这就是 facebook api 的工作原理，它会泄露其用户的私人数据

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T15:06:21.863

好的，我解决了这个问题，我不怀疑这里任何人的能力-也许我的问题仍然被误解...

某些 Facebook 页面（尤其是业务页面）不是由现有用户创建的页面与 Facebook 群组和用户页面不同。您不能只使用短期或长期访问令牌提交。

您必须首先使用您的令牌将 facebook 称为[http://graph.facebook.com/ID_OF_PAGE/accounts 。](http://graph.facebook.com/ID_OF_PAGE/accounts)

Facebook 返回一个页面列表，每个页面都有自己的唯一 ID 和每个页面的令牌。

然后，您获取所需页面的令牌，然后使用页面 ID 和该页面 OWN 令牌重新提交 - 瞧，它会发布到它！

正如我发现的那样，它们仍然是 Facebook 的错误。它在我为客户创建的一个商业页面上写着“将 Facebook 用作 .”。- 即在“。”之前缺少名称。- 它应该说“使用 Facebook 作为 MYNAME”。

这给 JS FB.login 带来了另一个问题，因为人名返回未定义。我不得不验证他们的电子邮件 - 否则它会显示“您以 . 身份登录”。

我认为这是因为 FB 允许您以新用户身份从头开始创建页面，而无需以您自己的身份登录 - 那么某些值没有被设置并且它搞砸了。

也许可以帮助某人...

# tdd - 从 Vagrant Ubuntu VM 向主机发送自动测试/保护桌面通知（W7 和 OS X）

> ID：12786357
> 
> 赞同：4
> 
> 时间：2012-10-08T17:13:40.277
> 
> 标签：tdd, vagrant, guard, autotest, growl

我有一个问题要问你们所有的流浪者和 TDD 人，

**如何让 Vagrant Ubuntu VM 向 Windows 7 或 OS X 主机发送自动测试/保护通知？**

细节：

我正在尝试构建我的终极公路战士开发环境，这样我就可以在计算机、操作系统和国家之间切换，而不必一直担心重新配置我的环境。我正在使用 Vagrant 制作反映我们生产环境的一次性虚拟机，让我可以轻松地从工作计算机 (Windows 7) 跳转到家用计算机 (OS X)。

我正在尝试将我的 Vagrant Ubuntu VM 配置为与测试驱动开发 (TDD) 一起使用，并利用 autotest / guard 实用程序在保存时自动运行我的测试，并将结果显示为主机上的桌面通知。我在无头模式下运行 Vagrant VM，所以没有桌面来接收通知，所以我需要将它们转发到主机。

我有几个线索，比如使用[Growl 的远程通知](http://www.growlforwindows.com/gfw/help/default.aspx#network)（用于接收，但我不知道如何从 Ubuntu VM 发送它们），或者[破解 Growl](https://stackoverflow.com/questions/5286120/autotest-notifications-on-ubuntu-virtual-environment)，但我认为这个问题一定已经被其他人解决了.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2015-03-24T15:59:59.213

找到了一种让它在 Windows 8 主机和 Ubuntu vagrant box 上工作的方法：

`ruby_gntp`在导轨中安装 gem 。

添加到`Guardfile`：

```
`notification :gntp, :sticky => false, :host => '192.168.0.77', :port => '23053', :password => 'yourpassword'` 
```

`192.168.0.77`是主机的IP，你可以通过运行找到它`ipconfig`。

`23053`- 咆哮的标准端口。

安装[growlforwindows](http://www.growlforwindows.com)并使用主机、端口和密码将网络订阅设置为 Vagrant 框（[帮助）](http://www.growlforwindows.com/gfw/help/default.aspx#network)`10.0.2.2``23053``yourpassword`

`10.0.2.2``netstat -rn`- vagrant box gataway 的默认 IP，你可以通过在 vagrant ssh 中运行来确认它。

最后，您可以运行`guard -p`并开始测试。

如果您收到错误*'refused'*，则说明 Guardfile 中的 IP 错误，例如，如果我设置 Windows 机器的网关 IP 而不是本地 IP，就会发生这种情况。如果您收到错误*“Notiffany register filed”*，那么它在growlforwindows中的IP是错误的。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T05:44:56.640

那么，为什么不直接将所有测试的输出转发到一个文件，然后通过 SSH 连接并查看结果呢？基本上`tail -f`命令在这里派上用场。

# c# - 为字幕添加高度到图像

> ID：12786358
> 
> 赞同：0
> 
> 时间：2012-10-08T17:13:48.133
> 
> 标签：c#, image, image-manipulation

我想为图像添加一个额外的高度来给它一个字幕。我不想“压缩”或调整我的原始图像。我想保持它的大小并在底部的高度上添加 +40 px 并添加一个像[这个例子一样的文本](http://i.imgur.com/ua3T6.jpg)

红色部分是原始图像。蓝色部分是我的补充。

我尝试了这段代码，但我的文字出现在我认为的图像“外部”。

```
Image image = Image.FromFile("D:\\my_sample_image.jpg");
// Create graphics from image
Graphics graphics = Graphics.FromImage(image);
// Create font
Font font = new Font("Times New Roman", 42.0f);
// Create text position
PointF point = new PointF(150, image.Height+40);
// Draw text
graphics.DrawString("Watermark", font, Brushes.Red, point);
// Save image
image.Save("D:\\my_sample_output.jpg");
MessageBox.Show("FINISHED");
// Open generated image file in default image viewer installed in Windows
Process.Start("D:\\my_sample_output.jpg"); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T17:17:27.577

制作一个新的位图，从中创建一个图形，然后在底部绘制带有文本空间的旧图像。

```
Bitmap image = new Bitmap("path/resource");
Bitmap newImage = new Bitmap(image.Width, image.Height + 40);
using (Graphics g = Graphics.FromImage(newImage))
{
      // Draw base image
      Rectangle rect = new Rectangle(0, 0, image.Width, image.Height); 
      g.DrawImageUnscaledAndClipped(image, rect);
      //Fill undrawn area
      g.FillRectangle(new SolidBrush(Color.Black), 0, image.Height, newImage.Width, 40);
      // Create font
      Font font = new Font("Times New Roman", 22.0f);
      // Create text position (play with positioning)
      PointF point = new PointF(0, image.Height);
      // Draw text
      g.DrawString("Watermark", font, Brushes.Red, point);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-09-23T08:11:01.027

```
public Image addSubtitleToImage(string path, int height, string title)
{
    Bitmap image = new Bitmap(path);
    Bitmap newImage = new Bitmap(image.Width, image.Height + height);
    using (Graphics g = Graphics.FromImage(newImage))
    {
        g.FillRectangle(new SolidBrush(Color.Black), new Rectangle(0, 0,   newImage.Width, newImage.Height));
        g.DrawImage(image, new Rectangle(0, 0, image.Width, image.Height));

        Font font = new Font("Tahoma", 30.0f);
        g.DrawString(title, font, Brushes.White, new PointF(image.Width/2 , image.Height+));

    }
    return newImage;
} 
```

# esb - 在处理完所有拆分消息后执行操作

> ID：12786360
> 
> 赞同：1
> 
> 时间：2012-10-08T17:13:53.120
> 
> 标签：esb, mule, splitter

我有一个 Mule 3.3.0 流程，可以将文件拆分为记录。我需要在所有记录完成处理后执行一个操作（存储过程）。问题是有时在 Mule 处理完所有记录之前执行操作。我认为这是因为 Mule 并行处理东西，这很棒，所以有时最后的动作被调用得太早了。如果我将流程设置为同步，事情似乎可以工作，但我没有利用并行执行。我想我也可以使用 Foreach 范围（没有尝试过），但我想这些东西仍然不会被并行化。有没有办法“等待”直到所有记录完成处理？

我附上了一个非常简单的流程来展示这种行为。如果您运行它，您将看到记录器不会按顺序打印内容。实际上，“DONE”消息在其余消息之前被记录。该流程处理一个简单的 csv 文件，直到它匹配一个值为“end”的字段。当找到此类字段时，有一个选择组件会记录“完成”。其余字段只需记录即可。

任何帮助将不胜感激。

流动：

![在此处输入图像描述](../Images/b6c0317f73577ebfe702d598ef97b4ea.png)

流xml

```
<?xml version="1.0" encoding="UTF-8"?>
<mule xmlns:scripting="http://www.mulesoft.org/schema/mule/scripting"
xmlns:vm="http://www.mulesoft.org/schema/mule/vm" xmlns:file="http://www.mulesoft.org/schema/mule/file"
xmlns="http://www.mulesoft.org/schema/mule/core" xmlns:doc="http://www.mulesoft.org/schema/mule/documentation"
xmlns:spring="http://www.springframework.org/schema/beans" version="CE-3.3.0"
xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
xsi:schemaLocation="
http://www.mulesoft.org/schema/mule/vm http://www.mulesoft.org/schema/mule/vm/current/mule-vm.xsd 
http://www.mulesoft.org/schema/mule/file http://www.mulesoft.org/schema/mule/file/current/mule-file.xsd 
http://www.mulesoft.org/schema/mule/scripting http://www.mulesoft.org/schema/mule/scripting/current/mule-scripting.xsd 
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-current.xsd 
http://www.mulesoft.org/schema/mule/core http://www.mulesoft.org/schema/mule/core/current/mule.xsd ">

<file:connector name="inputFileConnector" autoDelete="true"
    streaming="false" validateConnections="true" doc:name="File" fileAge="60000"
    readFromDirectory="#{systemProperties['user.home']}" />

<flow name="flow1" doc:name="flow1" processingStrategy="synchronous">
    <file:inbound-endpoint path="#{systemProperties['user.home']}"
        responseTimeout="10000" doc:name="Input File" fileAge="100"
        connector-ref="inputFileConnector">
        <file:filename-regex-filter pattern="input.csv"
            caseSensitive="false" />
    </file:inbound-endpoint>
    <byte-array-to-string-transformer
        doc:name="Byte Array to String" />
    <scripting:component doc:name="Groovy">
        <scripting:script engine="Groovy">
            <scripting:text><![CDATA[return payload.split('\n');]]></scripting:text>
        </scripting:script>
    </scripting:component>
    <collection-splitter doc:name="Collection Splitter" />
    <choice doc:name="Choice">
        <when expression="#[groovy:payload != 'end']">
            <processor-chain>
                <logger message="." level="INFO" doc:name="Process"/>
                <vm:outbound-endpoint path="toFlow2" doc:name="VM"/>
            </processor-chain>
        </when>
        <otherwise>
            <processor-chain>
                <logger message="|||| DONE" level="INFO" doc:name="DONE"/>
            </processor-chain>
        </otherwise>
    </choice>
</flow>

<flow name="flow2" doc:name="flow2" >
    <vm:inbound-endpoint path="toFlow2" doc:name="VM"/>
    <scripting:component doc:name="Groovy">
        <scripting:script engine="Groovy">
            <scripting:text><![CDATA[return payload.split(',');]]></scripting:text>
        </scripting:script>
    </scripting:component>
    <collection-splitter doc:name="Collection Splitter" />
    <logger message="|||||| #[payload]" level="INFO" doc:name="Logger"/>
    <vm:outbound-endpoint path="toFlow3" doc:name="VM"/>
</flow> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:38:20.607

一种选择是使用 a`collection-aggregator`作为累加器，阻止最终流操作，直到所有消息都已处理。诀窍是`collection-splitter`s 将设置一个相关组大小，该大小仅适用于文件中的行数或文件中的列数。但是我们要累积，直到所有行的所有列都被处理完。解决方案在于首先计算该值（即预期消息的总数）并用总值覆盖已计算的任何相关组大小`collection-splitter`。

以下是我的做法（您会注意到，我用更多的 Mule-3 式 MEL 表达式替换了所有 Groovy 代码段）：

```
<file:connector name="inputFileConnector" autoDelete="true"
    streaming="false" validateConnections="true" fileAge="60000"
    readFromDirectory="#{systemProperties['user.home']}" />

<flow name="flow1" processingStrategy="synchronous">
    <file:inbound-endpoint path="#{systemProperties['user.home']}"
        responseTimeout="10000" fileAge="100"
        connector-ref="inputFileConnector">
        <file:filename-regex-filter pattern="input.csv"
            caseSensitive="false" />
    </file:inbound-endpoint>
    <byte-array-to-string-transformer />
    <set-session-variable variableName="expectedMessageCount"
                          value="#[org.mule.util.StringUtils.countMatches(message.payload, '\n') + org.mule.util.StringUtils.countMatches(message.payload, ',') - 1]" />
    <expression-transformer expression="#[message.payload.split('\n')]" />
    <collection-splitter enableCorrelation="IF_NOT_SET" />
    <set-property propertyName="MULE_CORRELATION_GROUP_SIZE"
                  value="#[sessionVars.expectedMessageCount]" />
    <choice>
        <when expression="#[message.payload != 'end']">
            <processor-chain>
                <logger message="." level="INFO" />
                <vm:outbound-endpoint path="toFlow2" />
            </processor-chain>
        </when>
        <otherwise>
            <processor-chain>
                <logger message="|||| END" level="INFO" />
            </processor-chain>
        </otherwise>
    </choice>
</flow>

<flow name="flow2">
    <vm:inbound-endpoint path="toFlow2"/>
    <expression-transformer expression="#[message.payload.split(',')]" />
    <collection-splitter />
    <set-property propertyName="MULE_CORRELATION_GROUP_SIZE"
                  value="#[sessionVars.expectedMessageCount]" />
    <logger message="|||||| #[message.payload]" level="INFO"/>
    <vm:outbound-endpoint path="toFinalizer" />
    <vm:outbound-endpoint path="toFlow3" />
</flow>

<flow name="finalizer">
    <vm:inbound-endpoint path="toFinalizer" />
    <collection-aggregator />
    <logger message="|||| DONE" level="INFO" />
</flow> 
```

注意。或者，如果使用 a`collection-aggregator`是一个问题，因为它使用了太多内存，您可以使用表达式组件来递减`sessionVars.expectedMessageCount`和过滤，以在计数器返回 0 时让消息到达最终消息处理器。

# line - JavaFx 2.x：如何绘制虚线或点线？

> ID：12786363
> 
> 赞同：20
> 
> 时间：2012-10-08T17:14:00.060
> 
> 标签：line, draw, javafx-2

我想从实线、点线或虚线动态更改线的绘制：看来我必须使用 line.setStroke，这是正确的方法吗？

而且，如何做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：42
> 
> 时间：2012-10-08T18:37:57.380

不，这不是正确的方法， setStroke 设置笔画的颜色。
正确的方法是`getStrokeDashArray().add()`：

```
Line line1 = new Line(20, 40, 270, 40);
line1.getStrokeDashArray().addAll(25d, 20d, 5d, 20d);

Line line2 = new Line(20, 60, 270, 60);
line2.getStrokeDashArray().addAll(50d, 40d);

Line line3 = new Line(20, 80, 270, 80);
line3.getStrokeDashArray().addAll(25d, 10d);

Line line4 = new Line(20, 100, 270, 100);
line4.getStrokeDashArray().addAll(2d);

Line line5 = new Line(20, 120, 270, 120);
line5.getStrokeDashArray().addAll(2d, 21d);

pane.getChildren().addAll(line1, line2, line3, line4, line5); 
```

StrokeDashArray 定义线和间隙序列的模式。请参阅以下不同模式作为上述输出：

![在此处输入图像描述](../Images/1422753ab54c43c27f5ec2fa35c90b1a.png)

当然，通过操作 StrokeDashArray 数组元素，您可以动态更改模式。

# android - Android 的 Stock Web 浏览器是否使用 WebViewClient？

> ID：12786366
> 
> 赞同：0
> 
> 时间：2012-10-08T17:14:05.330
> 
> 标签：android, android-webview, webviewclient

如果我理解正确，每个基于 WebView 的实现都[需要 WebViewClient](https://stackoverflow.com/a/8827476/1124861)。

但是查看Android 2.2 浏览器的[源代码](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.2_r1.1/com/android/browser/BrowserActivity.java)，我找不到任何提到WebViewClient 的内容。

如果不使用它如何工作？

如果它确实使用它，它在哪里“隐藏”？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:22:41.777

它在选项卡内实现（参见[Tab.java](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android-apps/2.2_r1.1/com/android/browser/Tab.java?av=f#446)）。

# html - 考虑到 Web 标准和语义，在编写事件列表时，我应该使用有序列表还是无序列表？

> ID：12786373
> 
> 赞同：2
> 
> 时间：2012-10-08T17:14:32.413
> 
> 标签：html, semantic-markup, web-standards

如果我有一个给定月份发生的事件列表，例如：

> 十月活动：
> 
> 10 月 8 日 - 社区舞会 10 月 9 日 - 卡拉 OK 之夜 10 月 10 日 - 碰碰运气

最好的编码方式是什么——使用 UL、OL 或其他方式？

*无序列表*

```
<h3>October Events</h3>

<ul>
   <li>Oct. 8 - Community Dance</li>
   <li>Oct. 9 - Karaoke Night</li>
   <li>Oct. 10 - Potluck</li>
</ul> 
```

*有序列表*

```
<h3>October Events</h3>

<ol>
   <li>Oct. 8 - Community Dance</li>
   <li>Oct. 9 - Karaoke Night</li>
   <li>Oct. 10 - Potluck</li>
</ol> 
```

如果我要包含一个描述，那会改变你看待它的方式吗？通过描述，我可能会这样：

```
<h3>October Events</h3>

<article>
   <h4>Community Dance</h4>
   <p class="date">Oct. 8</p>
   <p>Description</p>
</article>

<article>
   <h4>Karaoke Night</h4>
   <p class="date">Oct. 9</p>
   <p>Description</p>
</article>

<article>
   <h4>Potluck</h4>
   <p class="date">Oct. 10</p>
   <p>Description</p>
</article> 
```

那么，考虑到 Web 标准，编写事件列表的最语义化方式是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:24:27.383

基于 W3C Wiki ( [http://www.w3.org/wiki/HTML_lists](http://www.w3.org/wiki/HTML_lists) )：

在尝试决定使用哪种类型的列表时，您通常可以通过问两个简单的问题来决定：

1.  我是在定义术语还是关联其他名称/值对？
    *   如果是，请使用描述列表。
    *   如果不是，不要使用描述列表——继续下一个问题。
2.  列表项的顺序重要吗？
    *   如果是，请使用有序列表。
    *   如果不是，请使用无序列表。

在这里你应该使用：

```
<dl>
  <dt>Oct. 8</dt>
  <dd>Community Dance</dd>
  <dt>Oct. 9</dt>
  <dd>Karaoke Night</dd>
  <dt>Oct. 10</dt>
  <dd>Potluck</dd>
</dl> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:49:10.653

这取决于您对“网络标准”和“语义”的定义。在旧意义上，“语义”是指意义，而这个问题实际上是关于结构的。使用`ol`, `ul`, `dl`,`table`或`div`其他东西并不能真正说明*意义*。

务实的问题是：当您的所有 CSS 设置都被忽略时，您希望如何显示数据。这似乎需要一个表，它也是结构最充分的标记（一列中的日期，另一列中的事件名称），并且它也是可扩展的（如果需要，您可以添加新列，例如用于活动地点）。

# arrays - 如何将 const unsigned int 数组转换为 int 数组

> ID：12786375
> 
> 赞同：0
> 
> 时间：2012-10-08T17:14:38.663
> 
> 标签：arrays, casting, integer, constants, unsigned-integer

我想将`const unsigned int*`数组转换为`int*`数组。 `static_cast`但是，`const_cast`失败了。

```
const unsigned int* getArray()
{
  static unsigned int a[3];
  a[0] = 0;
  a[1] = 1;
  a[2] = 2;
  return a;
}
int main()
{
  const unsigned int * a = getArray();
  const_cast<int*>(a); // fail
  static_cast<int*>(a); // fail
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:27:36.120

1.  `const_cast`不能改变类型，只能改变`const`。
2.  `static_cast`不能带走`const`，也不能在这些指针类型之间改变。

你想要的是：

```
int *b = reinterpret_cast<int *>(const_cast<unsigned int *>(a)); 
```

在这种情况下，您也可以只使用 C 风格的转换：

```
int *b = (int *)a; 
```

# hadoop - MapReduce 中的地图工作者如何分区文件与中间值？

> ID：12786376
> 
> 赞同：0
> 
> 时间：2012-10-08T17:14:40.120
> 
> 标签：hadoop, mapreduce, partitioning, partitioner

我正在尝试理解 MapReduce 模型，我需要建议，因为我不确定如何使用 map 函数的中间结果对文件进行排序和分区。我从[Jeffrey Dean 和 Sanjay Ghemawat 的 MapReduce 论文](http://www.usenix.org/event/osdi04/tech/full_papers/dean/dean.pdf)以及 Hadoop: The Definitive Guide 中获得了关于 MapReduce 的最多知识。

具有map函数中间结果的文件是小型排序和分区文件的组合。这些小文件被划分为对应于reduce worker的partition。然后将小文件合并为一个文件。我需要知道小文件的分区是如何完成的。首先，我认为每个分区都有一定范围的键。

例如：如果我们将键作为整数在 <1;100> 范围内，并且文件分为三个分区，那么第一个分区可以包含键在 <1,33> 范围内的值，第二个分区可以包含键在 <1,33> 范围内的值34;66> 和第三分区 <67;100>。合并文件中也有相同的分区。

但我不确定。每个分区都被发送到相应的reduce worker。在我们的示例中，如果我们有两个 reduce 工作人员，则可以将具有前两个键范围（<1,33> 和 <34;66>）的分区发送给第一个工作人员，将最后一个分区发送给第三个工作人员。但是，如果我错了并且文件以另一种方式划分（我的意思是分区没有自己的可能键范围），那么每个 reduce 工作人员都可以得到相同键的结果。所以我需要以某种方式合并这些减少工作者的结果，对吗？我可以将这些结果发送到主节点并在那里合并吗？

简而言之：我需要解释 map 阶段的文件是如何划分的（如果我的描述是错误的），并解释我如何以及在哪里可以处理 reduce 工作人员的结果。

我希望我描述了我的问题足以理解。当然，我可以解释更多。

非常感谢你的回答。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:25:05.677

有一个 Partitioner 类可以做到这一点。中间文件中的每个键/值对与归约器（分区）的总数一起传递给分区器，分区器返回应该处理该特定键/值对的分区号。

有一个默认的分区程序可以很好地完成分区工作，但是如果您想要更好的控制或者如果您有一个特殊格式化（例如复杂）的密钥，那么您可以并且应该编写自己的分区程序。

# c# - 应用程序中的电子邮件/消息传递

> ID：12786377
> 
> 赞同：1
> 
> 时间：2012-10-08T17:14:47.120
> 
> 标签：c#, asp.net-mvc, message

我有一个设计问题，正在寻找一个有效的设计。

我希望我的应用程序的用户能够相互发送消息。

我的脑海中有以下表格架构：

```
Messages
  + id
  + FromUser :id
  + ToUser : id
  + SendDateTime : Datetime
  + ReadDateTime : Datetime
  + IsRead : bit
  + IsDeleted : bit
  + MessageBody : text 
```

此外，我想实现一个通知系统，这样，当有人向我发送消息时，我希望通知显示在我的个人资料上，例如 SO 或 facebook 样式。

我担心这种设计的可扩展性。我正在考虑的一个选择是将其存储`MessageBody`在一个单独的表中并使其变得懒惰。

我正在寻找替代设计或想法？我做了一些研究，但没有广泛的信息。

有什么建议么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:03:20.347

如果您希望通知实时更新（因为它会很酷），请查看 SignalR。

[http://signalr.net](http://signalr.net)

[http://channel9.msdn.com/Shows/Web+Camps+TV/Damian-Edwards-and-David-Fowler-Demonstrate-SignalR](http://channel9.msdn.com/Shows/Web+Camps+TV/Damian-Edwards-and-David-Fowler-Demonstrate-SignalR)

[http://www.codeproject.com/Articles/404662/SignalR-Group-Notifications](http://www.codeproject.com/Articles/404662/SignalR-Group-Notifications)

# javascript - 来自数组/循环的 jQuery/JS 输出

> ID：12786378
> 
> 赞同：0
> 
> 时间：2012-10-08T17:15:03.463
> 
> 标签：javascript, jquery, for-loop, append

我在一个页面上有几个链接，它们用 jQuery 变成了一个数组。基本上，当用户在页面上单击“加载更多”时，我想生成一个`<ul>`内部有 4 个图像（或者如果没有剩余 4 个则更少。然后我需要关闭`</ul>`。我不知道我会怎么写这个，有人知道吗？另外，这段代码可以吗，还是应该以某种方式整理？

我**真正**想要的是一种在加载时隐藏 4 个图像然后向下滑动新图像的方法，`<ul>`但我不知道如何，因为我不知道在哪里可以在那里编写回调函数。如果您知道如何，请随时为我指明正确的方向！

到目前为止我的代码；

```
var hrefs = jQuery.makeArray(jQuery('ul.js a'))

        jQuery('#load_more').bind('click',function(){

            jQuery('.img_gallery').append('<ul>')
            for(var c = 0; c < 4; c++){
                if((hrefs.length) > 0){
                jQuery('<li>').append(jQuery('<img>', {src:hrefs[0]})).appendTo(jQuery('.img_gallery'))
                hrefs.splice(0,1)
                }
            }
            jQuery('.img_gallery').append('<ul>')
        }) 
```

谢谢 ： ）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:24:23.093

当您使用 jQuery 时，您不是在附加 html*标记*，而是在附加 html*元素*。

当您执行`$('.img_gallery').append('<ul>')`, 然后`$('.img_gallery').append('<li>')`时，您最终会得到如下结构：

```
<div class="img_gallery">
    <ul></ul>
    <li></li>
</div> 
```

您不必担心关闭标签，只需创建元素。jQuery 在某种意义上为您“关闭”了所有标签。您需要将`li`元素附加到`ul`，而不是`.img_gallery`. 只需附加到最后一个`ul`：

```
var hrefs = $.makeArray(jQuery('ul.js a'))

$('#load_more').bind('click',function(){
    $('.img_gallery').append('<ul>');

    for(var c = 0; c < 4; c++){
        if((hrefs.length) > 0){
            $('<li>').append($('<img>', {
                src: $(hrefs[0]).attr('href'); // get the link reference from the element
            })).appendTo($('.img_gallery ul').last());  // append to the last ul, not .img_gallery
            hrefs.splice(0,1);
        }
    }
}); 
```

或者，您可以将您的变量保留`ul`为变量，添加您`li`的 's 并在循环后附加列表：

```
var hrefs = $.makeArray(jQuery('ul.js a'))

$('#load_more').bind('click',function(){
    var newul = $('<ul>');  // Makes an element, not a tag

    for(var c = 0; c < 4; c++){
        if((hrefs.length) > 0){
            $('<li>').append($('<img>', {
                src: $(hrefs[0]).attr('href'); // get the link reference from the element
            })).appendTo(newul);  // append to the ul you created
            hrefs.splice(0,1);
        }
    }

    $('.img_gallery').append(newul);
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:29:26.647

您的`hrefs`数组包含 DOM 元素，而不是 URL。试试这个：

```
var hrefs = jQuery.map(jQuery('ul.js a'), function(el,i) {
    return $(el).attr('href');
}); 
```

顺便说一句，您可以`for`按如下方式优化循环：

```
for (var c = 0; c < 4; c++) {
    if (hrefs.length) {
        jQuery('<li>').append(jQuery('<img>', {
            src: hrefs.shift() // removes and returns the first array element
        })).appendTo(jQuery('.img_gallery'));
    };
};​ 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:18:35.843

试试这种方法..这更干净

```
var hrefs = jQuery.makeArray(jQuery('ul.js a'))

jQuery('#load_more').bind('click', function() {
    var html = '<ul>'
    for (var c = 0; c < 4; c++) {
        if ((hrefs.length) > 0) {
            html += '<li><img src="' + hrefs[0] + '" /></li>' ;
            hrefs.splice(0,1);
        }
    }
    html += '</ul>'        
    jQuery('.img_gallery').append(html )
})​ 
```

# c# - 如何使用正则表达式在命令行字符串中搜索文件名？

> ID：12786380
> 
> 赞同：1
> 
> 时间：2012-10-08T17:15:04.997
> 
> 标签：c#, .net, regex, pathname, capture-group

使用 C# 在 .NET 4.0 中进行开发。（对不起，如果这是冗长的......）

我想创建一个方法，例如：

```
public static string GetCmdLineArgs(
    string cmdLine,
    string pathname )
{
    ...
} 
```

我想创建一个正则表达式模式，让我可以在可执行文件的路径名*之后提取参数。*规则：

1.  命令行可能会或可能不会以路径名开头。
2.  如果路径名存在，它将被引用。
3.  路径名将是绝对路径。因此，它将包含正则表达式特殊字符，例如“\”、“.”，可能还有其他字符。
4.  如果引用的路径名没有出现在命令行的开头，只需捕获并返回命令行，减去任何前导空格。
5.  路径名也可能出现在参数中。如果是这样，则应保留此类事件并将其与其余参数一起返回。
6.  应该丢弃前导路径名周围的空白字符。
7.  目前，在单个字符串中返回所有参数就足够了，但将来可能会添加特定参数的捕获组。

我意识到我可以通过使用简单的`System.String`操作来破解这个功能，但我也想知道如何使用正则表达式匹配来做到这一点，以保持未来更改的灵活性。

基本上，我想做类似的事情：

```
// Create the pattern:
//   The pathname is anchored to the beginning of the pattern.
//   The pathname group is non-capturing.
//   Additional capture groups may be added in the future.
string pattern = 
    @"^\s*(?:""" + pathname + """)?\s*(.*)";
Regex regex = new Regex( pattern );
Match = regex.Match( cmdLine );
if ( match.Success )
{
    // extract matching groups...
} 
```

显然，上述内容不会按原样工作，因为`pathname`. 有什么方法可以修改它，让它像我描述的那样工作吗？是否有一个分组运算符可以让我匹配未转义的字符串，或者我是否必须`pathname`通过转义所有可能的特殊字符来进行转换？

如果已在其他地方提出并回答了此问题，请指向该帖子。谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:37:11.360

见[`Regex.Escape`](http://msdn.microsoft.com/en-us/library/system.text.regularexpressions.regex.escape.aspx)。我认为这是你唯一缺少的东西。像这样使用

```
string pattern = 
    @"^\s*(?:""" + Regex.Escape(pathname) + """)?\s*(.*)"; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:42:34.120

不要使用硬值，而是使用锚类型标记。在此示例中，我知道 - 将命令行选项与具有“”的路径分开。这样我已经标记了输出并且可以提取参数的顺序和包含的路径。我正在使用 If 条件 (? ) 在正则表达式中过滤掉路径项中的命令行参数。

```
string commandLine = @"-abc -log ""C:\Test it"" -def";

// \x22 is the escape for "
string pattern = @"
(?(\x22)                                # If a " then capture 
  ((?:\x22)(?<Path>[^\x22]+)(?:\x22))
 |                                      # Or
  ((?:-)(?<Command>[^-\s]+)(?:\s?))     # It is a - and capture
)
";

var tokens = Regex.Matches(commandLine, pattern, RegexOptions.IgnorePatternWhitespace)
                  .OfType<Match>()
                  .Select (m => new
                  {
                     Arg = m.Groups["Command"].Value,
                     Path = m.Groups["Path"].Value
                  })
                  ; 
```

令牌的输出是：

![在此处输入图像描述](../Images/3b89f5140fd26f98707013f8db9a57b5.png)

# javascript - 如何在此 JavaScript 中使用 $ 符号或 HTML $ 符号？

> ID：12786381
> 
> 赞同：0
> 
> 时间：2012-10-08T17:15:06.360
> 
> 标签：javascript

如何在此 JavaScript 中使用`$`HTML `&#36;`(" `$`") 符号？

```
var cash =document.getElementById('cash').value;    
var total =document.getElementById('total').value;  

document.getElementById('prepaid').value=  parseFloat(getObj("cash").value) - parseFloat(getObj("total").value); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:16:58.323

你可以写：

```
document.getElementById('prepaid').value =
  '$' + (parseFloat(getObj("cash").value) - parseFloat(getObj("total").value)); 
```

（注意减法周围的括号；没有它们，将`'$' + a - b`被解释为`('$' + a) - b`，这不会给出您想要的结果。）

但请注意，由于浮点值无法精确表示，这可能会产生奇怪的结果；您可能会得到一个类似`$3.00000000001`or的字符串`$2.999999998`，这可能不是您的用户所期望的！

# ember.js - Ember 路由器 - 如何处理 404（未找到）路由？

> ID：12786383
> 
> 赞同：14
> 
> 时间：2012-10-08T17:15:20.410
> 
> 标签：ember.js, ember-old-router

我试图弄清楚如何使用`Ember.Router`.

目前，如果我输入无效路由，例如 myapp.com/#FooBarDoesntExist，它将重定向到索引路由 ('/')。如果我可以定义它会路由到的 notFound 或 404 状态，我会喜欢它，这样我就可以通知用户发生了什么。与他们被丢弃在主页相反。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2013-07-11T12:49:26.663

处理此问题的一个好方法是声明一个路由，该路由映射除您的路由之外的所有可能的 url。你可以在这里举个例子：http: [//jsfiddle.net/mbreton/r3C9c/](http://jsfiddle.net/mbreton/r3C9c/)

```
var App = Ember.Application.create();

App.Router.map(function(){
    this.route('detail', {path: "detail"});
    this.route('missing', { path: "/*path" });
});

App.MissingRoute = Em.Route.extend({
    redirect: function () {
        Em.debug('404 :: redirection to index');
        this.transitionTo("index");
    }
});

App.ApplicationView = Em.View.extend({
    didInsertElement:function(){
        $('#missingLink').on('click', function (e){
            window.location.hash = "#/pepepepepep";
            return false;      
        });
    }
}); 
```

在这个例子中，所有未知的 url 都被重定向到索引路由。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-10-12T19:06:26.267

当前版本的 Ember.Router 不提供处理未知路由的方法。是时候破解了！

## 解决方案 1 - 快速而肮脏

这里的想法如下。我们有`Ember.Router.route(path)`方法，它是使用请求的（可能未知的）路径调用的。调用该方法后，保证路由器的路径是已知的。因此，如果我们比较请求的路径和实际路径并且它们不同 - 那么请求的路径是无效的，我们可能会将用户重定向到 404 页面。

```
 App.Router = Ember.Router.extend({

    route: function(path) {
      this._super(path);
      var actualPath = this.get("currentState").absoluteRoute(this);
      if (path !== actualPath) {
        this.transitionTo("404page");
      }
    }
  }); 
```

这种解决方案非常昂贵。例如，如果当前状态是“/a/b/c”，并且用户想要导航到“/b/d/e/unknown”，路由器将尽职尽责地进入已知状态“b”、“d”和“e”，然后我们才将路径视为未知。如果我们能在实际路由开始之前告诉它，那就太好了。

## 解决方案 2 - 摆弄私有方法

在这里，我们检查给定路径的有效性，然后才告诉路由器继续：

```
App.Router = Ember.Router.extend({

checkPath: function (path) {
  path = path.replace(this.get('rootURL'), '').replace(/^(?=[^\/])/, "/"); 
  var resolvedStates = this.get("states.root").resolvePath(this, path);
  var lastState = resolvedStates.get("lastObject");
  return lastState.match.remaining == "";
},

route: function(path) {
  if (this.checkPath(path)) {
    this._super(path);
  } else {
    this.transitionTo("404page");
  }
}
}); 
```

此解决方案也有其缺点 - 它使用`resolvePath`标记为私有的方法。尽管如此，我还是会使用这个解决方案，因为它比第一个更有效。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2015-08-26T22:15:33.697

在 Ember 1.13 中推荐的方法是创建一个包罗万象的路由：

```
Router.map(function () {
  this.route('home');
  this.route('login');
  this.route('404', { path: '/*path' });  // capture route in path
}); 
```

然后将您的 404 模板放入`404.hbs`.

# c - C代码编译

> ID：12786385
> 
> 赞同：0
> 
> 时间：2012-10-08T17:15:28.443
> 
> 标签：c, windows, compilation

我想编译一个“c”代码并从我的应用程序创建一个可执行文件。到目前为止，我通过指定我的 Dev-Cpp 文件夹的 bin 文件夹中存在的编译 .exe (c++) 的路径来做到这一点。

它工作正常，但我需要将编译器与应用程序一起打包，所以我想知道需要哪些文件和文件夹，以便我可以直接从应用程序编译它。

究竟需要哪些文件，即头文件、编译应用程序、库以及其他什么...

有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:53:09.143

如果您正在询问如何创建和分发能够在现有编译器上构建其功能的项目，您可以找到一些包，它们只是没有 IDE 的编译器部分。Minimalist GNU for Windows 就是这样一个包：

[http://en.wikipedia.org/wiki/MinGW](http://en.wikipedia.org/wiki/MinGW)

*（事实上​​，当组合 Dev-C++ 的人编写他们的集成开发环境时，他们从 MinGW 获得了实际的编译功能......他们将其捆绑到他们的包中以进行很好的衡量。所以如果你要编写一个 IDE您自己的，您将从 MinGW 发行版开始……而不是尝试从 Dev-C++ 中手动挑选文件。）*

一个需要敏感的问题是许可。虽然在分发使用像 MinGW 这样的系统构建的可执行文件方面通常没有任何开箱即用的法律问题，但当您将编译器包含在您自己的“产品”中时，这可能会很棘手。Dev-C++ 与 MinGW (GPL) 使用相同的许可证，但我想如果不是，就会出现问题。

如果您只需要完整功能的一个子集（假设您只编译 C 而不是 C++）将会有很多头文件，这样您就可以删掉。但是你必须权衡维护这种优化的难度与仅仅让你的程序要求用户安装 MinGW，然后告诉你的程序他们安装它的位置。它可能会占用更多空间并导致安装成为一个两步过程......但可以让您摆脱大量顾虑。

所以这就是我的建议：在你的程序中有一个设置（就像 Dev-C++ 所做的那样），它可以让人们指定 MinGW 二进制文件在他们的系统上的安装位置。但是让他们独立安装。

# html - 我是否患有白癜风？

> ID：12786388
> 
> 赞同：-4
> 
> 时间：2012-10-08T17:15:34.467
> 
> 标签：html, css

随着我的代码的增长，我注意到我的中间内容已被放入越来越多的标签中，特别是 div。其中一些似乎是重复的，但是当我尝试修改其中任何一个时，布局就会中断。

这是我有问题的剥离代码：http: [//jsfiddle.net/aBbtN/77/](http://jsfiddle.net/aBbtN/77/)

具体来说，我的中间内容是这样包围的：

```
 <div id="ie6-container-wrap">
        <div id="container" class="thin_width">
            <div class="full_width">
                <div id="content">               
                    <div class="lft dc2">
                    LEFT SIDEBAR
                    </div>
                    <div class="rgt dc4">
                    RIGHT SIDEBAR
                    </div>
                    <div id="col-main">
                    FINALLY - SOME CONTENT!
                    </div>
                </div>
            </div>                    
        </div>
    </div> 
```

我的问题是，是否有机会删除其中一个包含 div 并仍然使布局正常工作？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:32:14.940

这不是问的正确地方，但无论如何我都会回答。

是的，你有你不需要的div。而不是对`<div id="ie6-container-wrap">` 不同的使用条件注释`<head>`

喜欢

```
<!--[if lte IE 6]><head class="ie6"><![endif]-->
<!--[if !IE]><head><![endif]--> 
```

或者放弃 IE6 支持。

不需要全宽 div，而是将容器设置为 width:100%;。

此外，您可以使用 HTML5，并将侧边栏 div 替换为`<aside id="side1"></aside>`

编辑：这是您可以使用并获得相同结果的东西。

```
<!DOCTYPE HTML>
<!--[if lte IE 6]><head class="ie6"><![endif]-->
<!--[if !IE]><head><![endif]-->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Title</title>
</head>

<body>
        <div id="container" class="thin_width">
                <div id="content">               
                    <aside class="lft dc2">
                    LEFT SIDEBAR
                    </aside>
                    <aside class="rgt dc4">
                    RIGHT SIDEBAR
                    </aside>
                    <div id="col-main">
                    FINALLY - SOME CONTENT!
                    </div>
                </div>

        </div>

</body>
</html> 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-08T17:22:45.793

为什么你在 a`'full_width'`上有一个类`<div>`，什么时候`<div>`默认已经是全宽了？

也许`<div>`你可以删除。

# r - R中的稀疏矩阵使用库irlba

> ID：12786391
> 
> 赞同：0
> 
> 时间：2012-10-08T17:15:43.470
> 
> 标签：r, matrix, sparse-matrix

我的数据库中有大量数据。我必须创建一个大小为 600.000x20.000 或类似的矩阵，但许多单元格将是空的。如何使用这种 R 编程语言或使用奇异值分解 (SVD) 方法来创建矩阵？我不知道在语言 R 中使用，我会在 Java 编程中使用稀疏矩阵吗？我感到很困惑...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:14:01.947

看来你的答案就[在这里](https://stackoverflow.com/questions/4951286/svd-for-sparse-matrix-in-r)。您也可以检查[SparseM](http://www.econ.uiuc.edu/~roger/research/sparse/SparseM.pdf)或[垃圾邮件](http://nldr.library.ucar.edu/repository/assets/osgc/OSGC-000-000-000-495.pdf)包。

# cron - 每 N 分钟运行一次 Cron 作业加上偏移量

> ID：12786410
> 
> 赞同：296
> 
> 时间：2012-10-08T17:16:46.807
> 
> 标签：cron

`*/20 * * * *`

确保它每 20 分钟运行一次，我想每 20 分钟运行一次任务，从每小时 5 点开始，这对 Cron 可行吗？可不可能是：

`5/20 * * * *` ?

* * *

## 回答 #1

> 赞同：610
> 
> 时间：2013-10-06T02:17:17.263

要从整点 5 点开始每 20 分钟运行一次任务，请尝试以下操作：

```
 5-59/20 * * * * 
```

**解释**

`*`min 字段中的an与`0-59/1`where`0-59`是*range*和`1`是*step*相同。该命令将在*范围*(0) 中的第一分钟运行，然后在距离第一分钟 (1) 远的所有连续分钟运行，直到最后*一*分钟(59)。

这就是为什么`*/20 * * * *`将在 0 分钟、20 分钟后和 40 分钟后运行 - 这与每 20 分钟相同。但是，`*/25 * * * *`将在 0 分钟、25 分钟后和 50 分钟后运行 - 这与每 25 分钟不同。这就是为什么通常希望在分钟字段中使用一个平均分为 60 的步长值。

因此，要偏移开始时间，请明确指定范围并将第一个值设置为偏移量。

**例子**

`5-59/20 * * * *`将在 5 分钟后、25 分钟后和 45 分钟后运行。

`10-59/25 * * * *`将在 10 分钟后和 35 分钟后运行。

`1-59/2 * * * *`每隔一分钟就会运行一次。

* * *

## 回答 #2

> 赞同：72
> 
> 时间：2013-02-25T17:59:57.837

当然！

```
5,25,45 * * * * /your/cron 
```

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2013-11-12T02:28:12.843

你可以试试：`*/5 * * * * sleep N; your job`

# for-loop - 如何在 CoffeeScript 中迭代两个数组

> ID：12786412
> 
> 赞同：-2
> 
> 时间：2012-10-08T17:16:55.813
> 
> 标签：for-loop, coffeescript

我正在尝试通过列表推导重写 CoffeeScript 中经典书籍“JavaScript：The Good Parts”中的示例：

```
var parse_url = /^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)
 (?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/;

var url = “http://www.ora.com:80/goodparts?q#fragment”;
var result = parse_url.exec(url);
var names = ['url', 'scheme', 'slash', 'host', 'port', 'path', 'query', 'hash'];
var blanks = '       ';
var i;
for (i = 0; i < names.length; i += 1) {
     document.writeln(names[i] + ':' +
         blanks.substring(names[i].length), result[i]);
} 
```

我不知道如何编写循环并坚持使用此代码：

```
console.log "#{name}: " for name in names 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:30:42.773

我想你正在尝试做这样的[事情](http://coffeescript.org/#try%3aparse_url%20=%20/%5E%28?%3a%28%5BA-Za-z%5D%2b%29%3a%29?%28%5C/%7B0,3%7D%29%28%5B0-9.%5C-A-Za-z%5D%2b%29%28?%3a%3a%28%5Cd%2b%29%29?%28?%3a%5C/%28%5B%5E?#%5D%2a%29%29?%28?%3a%5C?%28%5B%5E#%5D%2a%29%29?%28?%3a#%28.%2a%29%29?%24/%0A%0Aurl%20=%20%27http://www.ora.com:80/goodparts?q#fragment%27%0A%0Aresult%20=%20parse_url.exec%28url%29%0A%0Anames%20=%20%5B%27url%27,%20%27scheme%27,%20%27slash%27,%20%27host%27,%20%27port%27,%20%27path%27,%20%27query%27,%20%27hash%27%5D%0A%0Aalert%20%22#%7Bnames%5Bi%5D%7D%3a%20#%7Bresult%5Bi%5D%7D%22%20for%20i%20in%20%5B0..names.length-1%5D%0A)

```
parse_url = /^(?:([A-Za-z]+):)?(\/{0,3})([0-9.\-A-Za-z]+)(?::(\d+))?(?:\/([^?#]*))?(?:\?([^#]*))?(?:#(.*))?$/

url = 'http://www.ora.com:80/goodparts?q#fragment'

result = parse_url.exec(url)

names = ['url', 'scheme', 'slash', 'host', 'port', 'path', 'query', 'hash']

alert "#{names[i]}: #{result[i]}" for i in [0..names.length-1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-30T14:48:23.970

如果有人来到这里实际上需要同时迭代两个数组，这可行：

```
for [course_event, remote_event] in zip(course.events, remote.events)
  course_event.lessons = remote_event.lessons if event.lessons_need_updating 
```

`zip()`来自[这里](https://coffeescript-cookbook.github.io/chapters/arrays/zip-function)：

```
zip = () ->
  lengthArray = (arr.length for arr in arguments)
  length = Math.min(lengthArray...)
  for i in [0...length]
    arr[i] for arr in arguments 
```

# java - ProcessBuilder 和守护进程有什么不好的地方

> ID：12786413
> 
> 赞同：4
> 
> 时间：2012-10-08T17:16:56.933
> 
> 标签：java, unix, daemons

在 ProcessBuilder 的 JavaDoc 上它指出

> 创建进程的方法可能不适用于某些本机平台上的特殊进程，例如本机窗口进程、守护进程、
> Microsoft Windows 上的 Win16/DOS 进程或 shell 脚本。

我的主要问题是 ProcessBuilder 不能很好地与守护进程一起工作吗？ProcessBuilder 不适合作为启动这些类型应用程序的可接受方式怎么办？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:21:47.637

我的猜测（基于我在[代码 grep](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/lang/Process.java)中找到的注释）是问题在于您必须处理流程的流，并且这种处理可能是一个问题。

> 创建进程的方法可能不适用于某些本机平台上的特殊进程，例如本机窗口进程、守护进程、Microsoft Windows 上的 Win16/DOS 进程或 shell 脚本。创建的子进程没有自己的终端或控制台。它的所有标准I/O（即stdin、stdout、stderr）操作都会通过三个流（getOutputStream()、getInputStream()、getErrorStream()）重定向到父进程。父进程使用这些流向子进程提供输入并从子进程获取输出。由于部分原生平台只为标准输入输出流提供有限的缓冲区大小，未能及时写入子进程的输入流或读取输出流可能会导致子进程阻塞，甚至死锁。

它也可能与作为一个抽象类的事实有关，`Process`并且每个 JRE/JDK 都带有它自己的平台相关进程实现（例如`UNIXProcess`，`WindowsProcess`等等）。某些操作系统可能只是具有与 Java 无法涵盖的打开进程相关的限制。文档。

再次 - 这只是一个猜测，代码并没有透露太多。

根据我的经验（在 *nix 系统和 Windows 上） - 您的代码大部分时间都需要在如何构建命令行、如何提供参数（在`arguments`参数中或在命令行中）以及如何提供参数方面具有平台意识构建衍生进程的环境（继承进程的值或自行创建）。无论如何，这更像是一场试错的游戏。

# android - 如何通过单击从 SQLite 中的列中删除所有值？

> ID：12786417
> 
> 赞同：1
> 
> 时间：2012-10-08T17:17:07.923
> 
> 标签：android, database, sqlite

我想要一个按钮，只需单击一次按钮即可删除列内的所有值。

我知道删除行或表的代码，但不是其中的所有值。有可能还是我必须删除该列并重新添加它？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:25:55.513

像这样的东西应该起作用：

```
ContentValues values = new ContentValues();
values.put(<COLUMN_NAME>, (String) null);
database.update(<TABLE_NAME>, values, null, null); 
```

`<COLUMN_NAME>`, 并且`<TABLE_NAME>`是字符串，包含要清除的列和表名:)

此外，您不仅可以将`null`值分配给 ，还可以分配`<COLUMN_NAME>`您想要的任何其他值。即：`0`，或`""`（空字符串），取决于您的需要。

# iphone - iOS：提示用户拨打电话

> ID：12786418
> 
> 赞同：3
> 
> 时间：2012-10-08T17:17:09.610
> 
> 标签：iphone, ios

我有一个观点，当点击时，应该提示用户拨打电话。我正在尝试使用以下代码：

```
 NSString *phoneNumber = [@"tel://" stringByAppendingString:locPhone];
    NSString *phoneString = [phoneNumber stringByReplacingOccurrencesOfString:@" " withString:@""];
    phoneString= [phoneString stringByReplacingOccurrencesOfString:@"(" withString:@""];
    phoneString= [phoneString stringByReplacingOccurrencesOfString:@")" withString:@""];
    phoneString= [phoneString stringByReplacingOccurrencesOfString:@"-" withString:@""];
    [[UIApplication sharedApplication] openURL:[NSURL URLWithString:phoneString]]; 
```

我知道代码已到达，并且“phoneString”的最终值是一个 10 位数的电话号码。没有错误，但没有任何反应。我错过了什么？

**编辑：**我现在看到 canOpenURL 返回 NO。这是因为我在模拟器上运行它吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:46:33.053

您的代码似乎正确，但请注意模拟器无法模拟电话（`canOpenURL`在模拟器上测试它会返回`NO`）。

您应该在实际设备上测试您的代码，您可能会看到它按预期工作。

顺便说一句，您确实应该`canOpenURL`在您的应用程序中添加测试，并在这种情况下向用户显示一些警报，因为用户可能会在 iPod 设备或 iPad 上运行您的应用程序，并且两者都不能进行电话呼叫。

# c# - C# DataTable 在长时间使用后忘记它的列

> ID：12786422
> 
> 赞同：1
> 
> 时间：2012-10-08T17:17:21.020
> 
> 标签：c#

我在我的 .Net 3.5 应用程序中使用 DataTable 来存储 1 列，其中一些记录包含文件名。

这是关于如何以及在何处初始化 DataTable 的代码：

```
public partial class MainForm : Form
{
    DataTable memTable_CurrentTransfers = new DataTable();

private void MainForm_Load(object sender, EventArgs e)
{
    memTable_CurrentTransfers.Columns.Add("fileName", typeof (string)); 
```

以下是我在应用程序的另一种方法中将文件名添加到 DataTable 的方法：

```
memTable_CurrentTransfers.Rows.Add(fileName); 
```

每 30 分钟，我启动一个执行此代码的线程：

```
public void CheckUploads()
{
   DataView view2 = memTable_CurrentTransfers.DefaultView;

   for (int i = 0; i < view2.Count; i++)
   {
     string tmpString = view2[i][0].ToString(); 
```

一切正常，但在我的应用程序运行一段时间后，我的用户开始在 CheckUploads() 方法中收到此错误

> 字典中不存在给定的键。在 System.ThrowHelper.ThrowKeyNotFoundException() 在 System.Collections.Generic.Dictionary`2.get_Item(TKey key) 在 System.Data.DataView.get_Item(Int32 recordIndex)

我认为我的专栏正在从我的 DataTable 中消失。

谁能告诉我为什么会发生这种情况以及如何阻止这种情况发生？是否有另一种方法我应该初始化我的 DataTable 以便它可以从我的应用程序内的所有方法中使用？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:25:56.643

首先， a`DataTable`不是线程安全的，并且您发布的代码不包含任何同步。

> 您能否详细说明“不包括任何同步”？

您说您有多个线程访问`DataTable`: 您的`CheckUploads`方法在后台线程上，并且大概有代码可以在主线程中添加（并可能删除）行。

我建议您将应用程序设计为不需要同步。例如，将 main 的一个克隆传递`DataTable`给您的后台线程，这样就不会有多个线程访问同一个实例。

> 我认为我的专栏正在从我的 DataTable 中消失。

我没有看到任何证据：堆栈跟踪似乎表明它未能找到行（`System.Data.DataView.get_Item(Int32 recordIndex)`）而不是列。

来自 ebyrob 的评论：

> lock(memTable_CurrentTransfers) { memTable_CurrentTransfers.Rows.Add(filename) } 和其他对 memTable_CurrentTransfers 的访问类似。

您还需要使用相同的锁来访问`DataView`. 虽然同步很容易出错，所以我支持设计您的应用程序的建议，以便不需要同步。

# jquery-mobile - jquery mobile & swipe.js

> ID：12786427
> 
> 赞同：3
> 
> 时间：2012-10-08T17:17:46.090
> 
> 标签：jquery-mobile, ios6, swipe

I created a carousel with swipe.js , it works fine in iOS4 and iOS5\. But in iOS6, without acceleration of hardware, when we swipe, there is a lag that can not be accepted. I have tried to create a carousel without jquery mobile, the performance is really great, but when we use JQM and listview (data-role="listview"), it became slower and the more elements in the list, the slower carousel is.

In html code, we have a carousel list and a normal listview, it seems if there are more elements in the listview, the carousel swipe will be slower. and they are two elements independent. Here is html code

```
<div id='slider' class='swipe' style='width:250px'>
  <ul>
    <li style='display:block'><div>1</div></li>
    <li style='display:none'><div>2</div></li>
    <li style='display:none'><div>3</div></li>
    <li style='display:none'><div>4</div></li>
    <li style='display:none'><div>5</div></li>
  </ul>
</div> 
```

and a normal list view

```
<section class="nav_univers">
  <h1>Toutes les catégories</h1>
  <nav>
    <ul class="categories" data-role="listview" data-inset="true">
      <li>Livre<a class="xt_books"></a></li>
      <li>Musique<a class="xt_music"></a></li>
      <li>Video<a class="xt_video"></a></li>
      <li>Jeux<a class="xt_video_games"></a></li>
      <li>AAA<a class="xt_phone_gps"></a></li>
      <li>QQQ<a class="xt_computing"></a></li>
      <li>DDS<a class="xt_multimedia"</a></li>
      <li>VVV<a class="xt_home"></a></li>
      <li>GGG<a class="xt_sports"></a></li>
      <li>HHH<a class="xt_mode"></a></li>
    </ul>
  </nav> 
</section> 
```

and with Swipejs to create an object var slider1 = new Swipe(document.getElementById('slider'));

You can find our site here:

www.priceminister.com with user agent set to mobile device.

anyone can help me?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-11-16T13:17:44.500

I had the same problem,

Change your css with :

```
.swipe
{

    ....
    ....

    /* IOS6 issue*/
    -webkit-perspective: 1000;
    -webkit-backface-visibility: hidden;
} 
```

# android - Android getWritableDatabase() 抛出 NullPointerException

> ID：12786430
> 
> 赞同：0
> 
> 时间：2012-10-08T17:18:13.830
> 
> 标签：android, database, nullpointerexception

我正在尝试使用 android 上的数据库保存数据。

我已经编写了处理数据库的类，就像我在几个示例中看到的那样。

```
public class MyDatabase extends SQLiteOpenHelper
{
    private Table users;

    public MyDatabase(Context context)
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
    }

    public void onCreate(SQLiteDatabase db)
    {
        users.CreateTable();
    }

    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion)
    {

    }
} 
```

但是当我尝试初始化变量`users`时，就像这样：

```
users = new Table(getWritableDatabase()); 
```

我得到`NullPointerException`了，它不是米在哪里......我试过了：

```
 public MyDatabase(Context context)
    {
        super(context, DATABASE_NAME, null, DATABASE_VERSION);
        users = new Table(getWritableDatabase());
    } 
```

和

```
 public void onCreate(SQLiteDatabase db)
    {
        users = new Table(getWritableDatabase());
        users.CreateTable();
    } 
```

`NullPointerException`但是当我调用该函数时我仍然会得到`getWritableDatabase()`。
我必须确保该函数`CreateTable`不是静态的，因为它放置了初始值。

我哪里错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:32:00.253

代替

```
public void onCreate(SQLiteDatabase db)
{
    users = new Table(getWritableDatabase());
    users.CreateTable();
} 
```

经过

```
public void onCreate(SQLiteDatabase db)
{
    users = new Table(db);
    users.CreateTable();
} 
```

当您在 onCreate 中时，您的可写数据库正在创建过程中。这里的onCreate方法和你Activity中的方法不一样。SQLiteOpenHelper 的 onCreate 仅在第一次创建数据库时调用。

# youtube-api - 为什么在 Youtube 上传小部件中禁用文件上传？

> ID：12786433
> 
> 赞同：3
> 
> 时间：2012-10-08T17:18:25.967
> 
> 标签：youtube-api

我一直在研究允许我的用户使用 Youtube 上传小部件直接从我的网站将视频上传到他们的 YouTube 帐户。这个小部件的部署比通常的 API 流程容易 1000 倍。

我已经看到它当前默认为 webcam_only=true 但我想知道为什么？如果我将 iframe 更改为 webcam_only=false，我会得到上传按钮，这一切似乎都可以正常工作......

显然，如果我可以使用这个功能而不是试图让我的头脑了解整个 API 2 的做事方式，那么这对我来说将是一个巨大的节省时间——而且这种方法似乎需要刷新页面，这对我没有好处应用程序。

关于为什么禁用它以及何时启用它的任何更新？

提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:01:32.240

如果 api 创建 api，webcam_only 默认设置为 true。您可以按照开发人员文档的“加载上传小部件”中的详细说明自行创建 iframe 元素。 [https://developers.google.com/youtube/youtube_upload_widget](https://developers.google.com/youtube/youtube_upload_widget)

```
<iframe id="widget" type="text/html" width="640" height="390"
src="https://www.youtube.com/upload_embed" frameborder="0"></iframe>
<script>
  widget = new YT.UploadWidget('widget', {
  });
</script> 
```

或者

```
<div id="widget"></div>
widget = new YT.UploadWidget('widget', {
  webcamOnly: true;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-07-22T20:00:21.247

我相信自 2012 年 8 月起，使用 YouTube Upload Direct 小部件上传视频的选项已被删除。虽然您可以强制添加上传按钮，但您得到了该按钮，但没有任何反应。

[https://developers.google.com/youtube/youtube_upload_widget#Revision_History](https://developers.google.com/youtube/youtube_upload_widget#Revision_History)

> 2012 年 8 月 22 日 此更新包含以下更改： webcamOnly 属性已从您可以在上传小部件的构造函数中指定的小部件选项列表中删除。以前，此属性被记录为具有默认值 false，这意味着该小部件还将显示一个用于上传现有视频文件的按钮。但是，目前不支持上传现有文件的选项，因此小部件始终只显示录制和上传网络摄像头视频的选项。

这是一个没有动作的按钮示例：http: [//sandboxsite.us/youtubetest.php](http://sandboxsite.us/youtubetest.php)

这是使用：

```
<iframe id="widget" type="text/html" width="640" height="390"
src="https://www.youtube.com/upload_embed?webcam_only=false" frameborder="0"></iframe>
<script>
  widget = new YT.UploadWidget('widget', {
  });
</script> 
```

如果有人想出如何添加按钮并使上传工作正常，我肯定会给他们买啤酒！

# ruby-on-rails - Rails 数据库设计：使用字符串还是整数？

> ID：12786435
> 
> 赞同：2
> 
> 时间：2012-10-08T17:18:29.670
> 
> 标签：ruby-on-rails, database-design

假设我有一个 rails 表，其中包含从一组选项中选择的信息。例如，名为的字段`sex`可以是`Male`或`Female`。名为的字段`Bodytype`将是`slim`,`curvy`等。我的问题是，将这些值存储为整数或字符串更好的做法是什么？当然，在第一种情况下，整数将被转换为文本（在控制器中？）。

感谢你的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:24:50.270

如果您不存储数百万条记录，则将它们存储为字符串就可以了。你失去的是快速更新这些类别的能力，但如果它们几乎是静态的并且不会随着时间的推移而改变，那应该没关系。性别可能应该被称为性别和身体类型body_type。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:42:01.373

您应该始终使用索引来识别表中的属性。因此，例如，您的表格将如下所示

```
Gender Table
  id | sex     
  1  | Female
  2  | Male

Figure Table
  id | body_type
  1  | slim
  2  | curvy 
```

然后，您根据 id 引用这些值

[http://use-the-index-luke.com/](http://use-the-index-luke.com/)

# ruby - 理解 Ruby (Sinatra) - 非常非常基础

> ID：12786436
> 
> 赞同：1
> 
> 时间：2012-10-08T17:18:35.567
> 
> 标签：ruby, rubygems, sinatra

我在看 Sinatra 并试图理解语法：

```
require 'sinatra'

get '/' do
  "Hello, World!"
end 
```

我知道它是这样做的：

> 这是一条“路线”。在这里，我们告诉 Sinatra，如果使用普通的 GET HTTP 方法请求主 URL 或根 URL '/'，以显示“Hello, World!”</p>

但是 Ruby 语言发生了什么？

1.  这个语法是什么意思：`get '/'`？`get`方法和' '是`/`它的参数吗？如果是方法，那么在 Ruby 中，我可以将方法称为`methodname (parameter) {}`. 有什么`{ }`用？
2.  我通常理解`do`和`end`as `{ }`，它们是功能体的外壳。
3.  之间我们有“你好，世界！`do`” `end`这是一个声明吗？我的意思是，它正在被打印出来，但我们没有将它称为`print "Hello, World!"`，所以这是怎么回事？
4.  这似乎`get`是 Sinatra 中定义的一种方法，但是如果我添加一个 gem，其中`get`已经定义了一个方法，那么我怎么知道它会调用哪个“get”方法？或者，它是指 HTTP`get`方法吗？

如果这个问题听起来很基本，我很抱歉，但我想在继续之前解决它。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:24:23.070

我可以建议在解决一个更大的问题之前先阅读一个关于 ruby​​ 的教程，比如`sinatra`一个相当专业的库。

一个好的起点是[Ruby Koans](http://rubykoans.com/)

至于你的问题。

1.  `get`是一种方法。`'/'`是它的论据。and`do ... end`表示 ruby​​ 中的一个块，就像`{}`would 一样。
2.  是的，就是`do ... end`这样
3.  Ruby 中的块返回默认计算的最后一个值，因此在这种情况下，拥有一个字符串与拥有`return "String"`.
4.  如果你遇到命名空间冲突，Ruby 会抱怨。在这种情况下`get`是`sinatra`定义的方法`get`。抽象地，它代表`HTTP GET`对服务器的请求。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T10:03:38.620

对于“完美”的回应，我建议你看看 Alan Harris 和 Konstantin Haase 的书“Sinatra Up and Running”。

[http://shop.oreilly.com/product/0636920019664.do](http://shop.oreilly.com/product/0636920019664.do)

第 6 页和第 7 页解释了“get '/' do”这一行实际上是如何调用方法的。

您可以使用 Google Preview 来查看这 2 个页面。

# hadoop - 无法将数据导入/加载到配置单元，为什么？

> ID：12786441
> 
> 赞同：2
> 
> 时间：2012-10-08T17:18:45.223
> 
> 标签：hadoop, permissions, hive, load

我正在尝试导入数据（具有两列 int 和 string 的简单文件），表格看起来：

```
hive> describe test;
id      int
name    string 
```

当我尝试导入时：

```
hive> load data inpath '/user/test.txt' overwrite into table test;
Loading data to table default.test
rmr: org.apache.hadoop.security.AccessControlException: Permission denied: user=hadoop, access=ALL, inode="/user/hive/warehouse/test":hive:hadoop:drwxrwxr-x
Failed with exception org.apache.hadoop.security.AccessControlException: Permission denied: user=hadoop, access=WRITE, inode="/user/hive/warehouse/test":hive:hadoop:drwxrwxr-x
FAILED: Execution Error, return code 1 from org.apache.hadoop.hive.ql.exec.MoveTask 
```

看起来用户 hadoop 拥有所有权限，但仍然无法加载数据，但是我能够创建表。怎么了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T18:55:28.273

Hive 使用 Metastore 作为元数据。所有表定义都在其中创建，但实际数据存储在*hdfs*中。目前 hive 权限和*hdfs*权限是完全不同的东西。他们是无关的。您有几种解决方法：

1.  完全禁用权限（对于 hdfs hdfs）
2.  使用基于存储的[https://cwiki.apache.org/confluence/display/Hive/HCatalog+Authorization](https://cwiki.apache.org/confluence/display/Hive/HCatalog+Authorization)（在这种情况下，如果您在 hdfs 上没有数据库目录，您将无法创建表）
3.  提交 hive 用户下的所有作业 ( sudo -u hive hive )
4.  创建数据库：

    `create database hadoop;`

并在具有正确权限的*hdfs*中创建所需的目录

```
hdfs dfs -mkdir /user/hive/warehouse/hadoop.db; 
hdfs dfs -chown hadoop:hive /user/hive/warehouse/hadoop.db
hdfs dfs -chmod g+w /user/hive/warehouse/hadoop.db 
```

当然，您应该启用`hive.metastore.client.setugi=true`and `hive.metastore.server.setugi=true`。这些参数指示 hive 在当前 shell 用户下执行作业（看起来这些参数已经启用，因为 hive 无法创建目录）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-12-26T10:13:58.743

这个问题是因为语法。

为生成表格而给出的格式应该与输入文件格式相似。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-05-19T10:51:48.660

是的，这是 HDFS 中目标目录的权限错误。一种对我有用的方法：

1.  识别 HDFS 中的目标目录，hive > describe extended [problem table name]；在 location 参数下，如果你不知道那在哪里，那么
2.  更改该目录的权限：

> hadoop fs -chmod [-R] nnn /问题/表/目录

根据您的设置，可能必须以超级用户身份运行。使用 -R 选项将新权限应用于目录中的所有内容。选择适合您系统的 nnn。

# c# - 用于从平面文件填充 SQL 的 SSIS 脚本

> ID：12786443
> 
> 赞同：0
> 
> 时间：2012-10-08T17:18:46.830
> 
> 标签：c#, sql, sql-server, ssis

我被要求将 DTS 包迁移到 SSIS，但我很难思考如何完成任务。目前，DTS 包从平面文件中抓取所有行，对数据执行一些逻辑，并使用活动的 x 转换将它们迁移到 sql 表中。我对此很陌生，但我认为一旦我从 C# 代码配置和调用源和目标，我会没事的。有人可以指点我这方面的好教程或告诉我设置它的基本步骤吗？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:30:35.840

SSIS 的工作方式是以控制流为中心，数据通过数据流中的内存缓冲区移动。您需要采取的高级步骤如下，如果您的问题没有进一步的细节，我不能更具体：

在 BIDS 中，基于 SSIS 模板创建一个新项目。

它将创建一个名为 Package1 的空包 - 通过单击名称并键入一个新名称，将其重命名为合理的名称。它还会提示您更改文件系统中的名称。接受这个改变。

您应该在您面前看到控制流设计图面。如果不这样做，请双击刚刚重命名的包以打开它。

从控制工具箱中，将数据流任务拖到表面上。

双击数据流任务以打开数据流设计界面。

将平面文件源拖到设计图面上并双击它以打开属性并选择新建以创建新的平面文件连接。为连接管理器命名，然后浏览到文件系统中文件的位置。

根据您的文件设置其他属性，然后移动到列选项卡。

在列选项卡上，根据需要设置文件的数据类型，然后确定退出属性屏幕。

根据需要将变换拖动到设计图面。如果它需要是 ac# 脚本，那么这将是一个脚本转换，但 SSIS 具有丰富的转换集，因此可能不需要自定义代码。通过将路径的绿色尾部从前一个转换拖到下一个转换，将每个转换与数据路径连接起来。

将 OLEDB Destination 拖到表面并连接绿色数据流路径。双击它以编辑属性。

单击新建，然后再次单击新建以创建连接管理器，然后输入您的数据库服务器详细信息。单击确定，然后在数据库中选择要插入数据的表。

现在单击地图 pings 选项卡。列将按名称自动映射，但需要进行任何修改。确定属性，单击计划按钮以调试模式运行包并开始调试并修复任何问题

# asp.net - Telerik MVC DetailView 绑定问题 - 主详细信息

> ID：12786445
> 
> 赞同：0
> 
> 时间：2012-10-08T17:18:57.633
> 
> 标签：asp.net, telerik-mvc

我在 .DetailView 行遇到错误。如何绑定 detailview 网格？

> Telerik.web.mvc.ui.fluent.GridDetailsViewBuilder.ClientTemplate(string) 的最佳重载方法匹配有一些无效参数

```
<%= Html.Telerik().Grid<Models.Employee>()
        .Name("GridView1")
        .BindTo(Model)
        .Columns(columns =>
        {
            columns.Bound(o => o.EmpId).Width(100);
        })
         .DetailView(detailView => detailView.ClientTemplate(
                        Html.Telerik().Grid<Models.Employee>()
                             .Name("<#= EmpID #>")
%> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:21:34.547

正如异常描述的那样，**ClientTemplate**方法需要一个字符串。您可以在子 Grid 声明的末尾调用**ToHtmlString () 扩展方法。**

就像在这个演示中强调的那样：

[http://demos.telerik.com/aspnet-mvc/grid/hierarchyajax](http://demos.telerik.com/aspnet-mvc/grid/hierarchyajax)

# scala - 在 Lift 中获取隐藏元素的值

> ID：12786455
> 
> 赞同：1
> 
> 时间：2012-10-08T17:20:12.900
> 
> 标签：scala, lift

我在 HTML 中有一个隐藏的输入字段，它包含 SomeValue：

```
 <input id="event_id" type="hidden"> SomeValue </input> 
```

我在服务器端需要 SomeValue 。

有我可以使用的 SHtml 方法吗？以下代码应在提交时获取值，加载页面后我需要该值。

```
"event_id" #> SHtml.onSubmit(id = _) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:30:06.417

在模板中你可以写

```
<input id="event_id"></input> 
```

在代码片段中，您可以使用以下`SHtml.hidden`方法：

```
SHtml.hidden(() => println("hidden field")) 
```

# java - 新异常类扩展异常类并有两个构造函数

> ID：12786462
> 
> 赞同：0
> 
> 时间：2012-10-08T17:20:40.497
> 
> 标签：java, exception, custom-exceptions

创建一个`IllegalDimensionException`扩展类的新异常`Exception`类。它将有两个构造函数，一个默认值和一个显式值，它使用消息“您指定的图形的尺寸非法。

这似乎是这样做的正确方法吗？

```
public class IllegalDimensionException extends Exception {
    String message; //the message that will be used
    String Eplicitm = "Illegal dimension for the figure you specified";

    //constructor one
    public IllegalDimensionException (String m){
        m = message;
    }
     //constructor two
    public IllegalDimensionException(String E){
        E = Eplicitm;

    }
    public static void main(String[] args){
        return E;
    }

} 
```

我无法创建两个构造函数而没有一个是无效的？关于如何让它正常工作的任何建议？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:30:19.700

也许像这样回答你的问题：

```
public IllegalDimensionException (String m) {
    super(m); // you may use the exception message member instead of defining yours
    message = m; 
}

public IllegalDimensionException(){
    this(Eplicitm);
} 
```

因此，您确实有两个构造函数：一个具有默认值，一个具有自定义消息。如果这是您所期望的，Eplicitm 应该是一个常量（静态最终）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:30:24.243

这*可能*是您正在寻找的。您要回答的问题不清楚，所以我不确定：

```
public final class IllegalDimensionException extends Exception {
  private static final String DEFAULT = 
      "Illegal dimension for the figure you specified";

  //constructor one
  public IllegalDimensionException(){
    super(DEFAULT);
  }

  //constructor two
  public IllegalDimensionException(String message){
    super(message);
  }
} 
```

`super()`请注意将异常消息正确传递给超类的用法。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:23:58.587

构造函数不应该有返回类型，所以你的第二个“构造函数”实际上不是构造函数，而是一个名称类似构造函数的方法。我想知道为什么它没有给你任何错误，因为你没有从这里返回任何东西。如果你只是从第二个中删除 void ，它将不起作用，因为两个构造函数都会有相同类型的争论，所以不会被过度构造函数，而是重复。在这种情况下，您将再次收到错误。请查看此链接以获得您问题的真正答案，[如何在 Java 中定义自定义异常类，最简单的方法？](https://stackoverflow.com/questions/3776327/how-to-define-custom-exception-class-in-java-the-easiest-way)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T17:42:02.063

> 它将有两个构造函数，一个默认值和一个显式值，它使用消息“您指定的图形的尺寸非法。

听起来您的两个构造函数真正需要的是一个默认（无参数）以及一个接受`String`参数的构造函数。例如，

```
public IllegalDimensionException() {
    super(Eplicitm);
}

public IllegalDimensionException(String m) {
    message = m;
} 
```

默认构造函数中的`super()`调用将调用`Exception`的构造函数，它接受 a `String`，并将你的传递`Eplicitm`给它。

但是，您在上面的代码片段的逻辑中存在几个基本缺陷，我想向您指出：

1.  您不能为构造函数指定额外的返回类型（就像在“构造函数二”中所做的那样`public void IllegalDimensionException`）。这是因为`IllegalDimensionException`本质上*是*返回类型，因为您正在使用它创建对象的新实例。您上面的签名将改为创建一个名为的新方法`IllegalDimensionException`，该方法返回`void`并且必须由此异常的实例调用......因此您实际上创建了一个名称过于复杂（且格式错误）的 setter 方法。

2.  `Exception`拥有一个`main(String[])`方法是没有意义的。A`main()`本质上是整个程序的启动，而 an是*在*`Exception`程序中出现问题时创建的东西。当您创建更复杂的项目时，您将希望使每个类的功能从根本上保持独立、独特和合乎逻辑。

**   应将诸如默认值之类的常量声明为`private static final`. 正如您的代码所代表的那样，任何可以获取您的实例的代码都可以`IllegalDimensionException`通过简单地调用来更改默认消息`theException.Eplicitm = "Yo yo yo, wassup."`。不是很有帮助的错误信息。这是因为变量的默认隐私是`public`. 幸运的是，您还没有声明它`static`，所以这样的更改只会影响异常的*一个*实例......但是更好的做法是在创建的所有可能的异常中只有一个不可变的版本。

    *   变量名应采用驼峰式 ( `variableName`)，而类名应以大写字母 ( ) 开头`MyClass`。常量应全部大写，下划线 ( `MY_CONSTANT_VALUE`) 分隔。* 

 *上面的一些可能听起来很挑剔，但事实并非如此。以上所有内容要么关闭代码​​中的漏洞（其中一些非常危险），要么使您的代码更具可读性（您会发现这是一个很大的好处 - 因为即使您也会忘记为什么您写了一些部分三个月后你回去看它的代码）。例如，我确信我不是唯一一个花了一段时间才弄清楚你的意思的专业程序员`Eplicitm`（除了拼写），因为它看起来像一个复杂的自定义对象的名称......不是`String`！

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T17:27:13.857

任何两个构造函数（或与此相关的任何方法）都必须具有不同的*方法指纹*（又名签名）。指纹包括：

*   方法名称
*   方法返回类型
*   方法参数（按类型）

您正在尝试创建两个具有相同指纹的构造函数，这是不允许的。毕竟，编译器怎么知道你试图调用哪个方法呢？

作为旁注；您的代码毫无意义：

```
public IllegalDimensionException (String m){
    m = message;
} 
```

从字面上看没有任何效果，您正在`m`用您的实例变量覆盖局部变量的值`message`......我只能假设您打算以相反的方式执行此操作？*

# android - 安卓连接127.168.1.1，怎么连接？

> ID：12786463
> 
> 赞同：1
> 
> 时间：2012-10-08T17:20:49.670
> 
> 标签：android, network-programming

我的 PC 上有一个服务器程序，它正在运行并等待 Android 客户端。

我在我的 Android 代码中设置了这些：

```
mHost      = "127.168.1.1"; //or getLocalIpAddress()?
mPort      = 5000;
mSocket    = new Socket(mHost, mPort); 
```

并在清单中拥有这些权限：

```
<uses-permission android:name="android.permission.INTERNET" />
<uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
<uses-permission android:name="android.permission.ACCESS_WIFI_STATE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" /> 
```

当我尝试连接到我的 PC 时，我得到了这个 logcat 输出：

```
10-08 19:18:40.970: E/ex closeInputOutput(8735): java.lang.NullPointerException
10-08 19:18:40.970: E/doInBackground Exception(8735):  java.net.ConnectException: failed to connect to /127.168.1.1 (port 5000): connect failed: ECONNREFUSED (Connection refused) 
```

我有一个路由器，如何将我的 PC 连接到 127.168.1.1:5000？

**编辑：**

```
public static final String getLocalIpAddress() {
    try {
        for (Enumeration<NetworkInterface> en = NetworkInterface.getNetworkInterfaces(); en.hasMoreElements();) {
            NetworkInterface intf = en.nextElement();
            for (Enumeration<InetAddress> enumIpAddr = intf.getInetAddresses(); enumIpAddr.hasMoreElements();) {
                InetAddress inetAddress = enumIpAddr.nextElement();
                String ip4 = inetAddress.getHostAddress().toString();
                if (!inetAddress.isLoopbackAddress() && InetAddressUtils.isIPv4Address(ip4)) {
                    Log.d(TAG, "getLocalIpAddress(): " + ip4);
                    return ip4;
                }
            }
        }
    }
    catch (Exception e) {
        Log.e(TAG, "ServerUtils: getLocalIpAddress(): " + e.getMessage());
    }
    return null;
} 
```

**这是我的新代码，这个返回 192.168.1.104，它不起作用。使用我的 ipconfig 我得到 192.168.1.102 （这是正确的。）那么在最后一个代码中出了什么问题？如何获得正确的本地 IP？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:39:37.890

默认情况下，127.168.1.1 在环回范围内，因此连接尝试可能不会离开您的 Android 设备。尝试将您的服务器放在 192.168.xx ip

[http://www.tcpipguide.com/free/t_IPReservedPrivateandLoopbackAddresses-3.htm](http://www.tcpipguide.com/free/t_IPReservedPrivateandLoopbackAddresses-3.htm)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T17:38:18.570

在您的 LAN 中可能会有所不同，但通常地址 192.168.1.1 是路由器地址（不是主机地址）。

通过运行以下命令确认您的主机地址：

> ipconfig

在命令提示符下。IPv4 地址是主机地址，网关地址是路由器地址。请务必在 PC 和设备上使用正确的地址。

注意：如果您需要更精确的帮助，您需要在 PC 和设备上发布代码的相关部分。

--已编辑--

IP地址就像一个家庭地址，每个设备都有自己的。因此，当您在 windows 机器上运行 ipconfig 时，您将获得 windows 机器的 IP 地址。当您调用`getLocalIpAddress()`设备时，您将获得设备 IP 地址。

如果要从设备连接到 PC，您需要：

*   在 PC 上运行一个监听 5000 端口的程序。如果没有程序监听这个端口，任何连接到这个端口的尝试都会被拒绝。
*   在设备上，您运行一个程序，该程序`192.168.1.102`通过端口连接到（pc IP 地址）`5000`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T17:47:49.993

嗯，这就是防火墙的问题....转到路由器的防火墙或系统的防火墙...并将 5000 端口添加到例外列表中...入站和出站也是...。第二个问题似乎与您的 IP 地址有关。 .. 127 不是可用类... 它是环回测试（127.0.0.1 至 127.255.255.254 ...）将您的地址从 127 更改为 192.168.0.1 或 1.1 ...

# macos - 默认写帮助 (Mac)

> ID：12786464
> 
> 赞同：0
> 
> 时间：2012-10-08T17:21:02.507
> 
> 标签：macos, firefox, 32-bit, defaults

我正在尝试通过 Apple 远程桌面设置 Firefox 在 130 台 Mac 上以 32 位模式打开的首选项。最简单的方法通常是`defaults write`不幸的是我还没有找到任何关于此的文档，而且我无法弄清楚编写不在根级别的字符串的语法。

该文件是`~/Library/Preferences/com.apple.LaunchServices.plist`

我需要将字符串更改`x86_64`为`i386`

```
<dict>
<key>LSArchitecturesForX86_64v2</key>
<dict>      
    <key>org.mozilla.firefox</key>
    <array>
        <data>
        Ym9va2QCAAAAAAQQMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA
        AAAAAAAAAAAAYAEAAAwAAAABAQAAQXBwbGljYXRpb25zCwAAAAEB
        AABGaXJlZm94LmFwcAAIAAAAAQYAAAQAAAAYAAAACAAAAAQDAABq
        ix4BAAAAAAgAAAAEAwAAWYNjAQAAAAAIAAAAAQYAADwAAABMAAAA
        CAAAAAAEAABBtfgZbgAAABgAAAABAgAAAgAAAAAAAAAPAAAAAAAA
        AAAAAAAAAAAAAAAAAAEFAAAMAAAAAQEAAE1hY2ludG9zaCBIRAgA
        AAAEAwAAAICcregAAAAIAAAAAAQAAEG0QBQYAAAAJAAAAAEBAAA0
        NkFGNUYyOC1DNTExLTM0MEMtQkU1RS1DREYzMTgyQThFOTIYAAAA
        AQIAAIEAAAABAAgA7z8AAAEACAAAAAAAAQAAAAEAAAABAQAALwAA
        AAQAAAADAwAAAAAAIBkAAAABAQAAL0FwcGxpY2F0aW9ucy9GaXJl
        Zm94LmFwcAAAAMwAAAD+////AQAAAAAAAAAQAAAABBAAACwAAAAA
        AAAABRAAAFwAAAAAAAAAEBAAAHwAAAAAAAAAIBAAABgAAAAAAAAA
        MBAAAEwAAAAAAAAAQBAAAGwAAAAAAAAAAiAAACQBAAAAAAAAECAA
        AKQAAAAAAAAAESAAANgAAAAAAAAAEiAAALgAAAAAAAAAEyAAAMgA
        AAAAAAAAICAAAAQBAAAAAAAAMCAAAJwAAAAAAAAAAdAAAJwAAAAA
        AAAAENAAADABAAAAAAAAAP8AADwBAAAAAAAA
        </data>
        <string>x86_64</string>
    </array>
</dict> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:07:31.367

我认为没有办法使用默认值（嗯，有，但它涉及转储整个 LSArchitecturesForX86_64v2 字典，编辑它，然后重新导入）。但是 PlistBuddy 可以完成这项工作：

```
/usr/libexec/PlistBuddy -c "set :LSArchitecturesForX86_64v2:org.mozilla.firefox:1 i386" ~/Library/Preferences/com.apple.LaunchServices.plist 
```

在将任何东西部署到 130 台计算机之前，通常需要注意的是：首先对此进行测试（我尝试过一次……），然后将其备份到每台计算机上的相关文件，这样如果确实出现问题，您可以将其回滚。

# android - Android 中的 Google Places API - 个人用户的 API_KEY

> ID：12786465
> 
> 赞同：4
> 
> 时间：2012-10-08T17:21:03.390
> 
> 标签：android, google-places-api

我浏览了与在 Android 应用程序中使用 Places API 相关的 Android 文档和其他博客。它建议在任何地方使用 API_KEY 调用 REST 服务。API_KEY 在整个项目/应用程序中都是相同的。每天有 1000 个请求的限制。

现在如果我的应用程序被许多用户安装，那么如果每个人都使用相同的密钥，那么请求限制将很容易耗尽。

有一些方法可以为单个用户生成 API_KEY。但是我怎样才能在我的代码中处理它呢？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-08T17:40:05.397

如果您验证您的身份，您可以将配额提高到每天 100,000 个请求：

> 通过 API 控制台验证身份的用户每 24 小时允许 100 000 个请求。通过在控制台中启用计费，需要信用卡进行验证。我们要求您提供信用卡纯粹是为了验证您的身份。使用 Places API 不会从您的卡中收取费用。

如果您转到 Google API 控制台，选择*服务*并单击*Places API*行上的*定价*链接，您将找到这些信息和更多信息。

 *每天 100,000 个请求已经很多，除非您的应用程序非常受欢迎，否则应该足够了。而且我认为在不违反 Google 的条款和政策的情况下创建多个用户来生成多个 API 密钥是不可能的。*

# iphone - iPhone 中的 WebRTC（气体预处理器问题）

> ID：12786468
> 
> 赞同：0
> 
> 时间：2012-10-08T17:21:12.990
> 
> 标签：iphone, assembly, compilation, gnu-assembler, webrtc

我正在尝试为 iPhone 编译最新的 WebRTC 版本。我不需要编译整个解决方案，我只需要编译 VAD 模块。

为此，我创建了一个 Xcode 项目，并尝试编译必要的源代码，但 *.s 文件及其汇编程序存在问题。

就像在 FFMPEG 库中一样，我知道我必须将汇编代码“翻译”为 iPhone 的 gcc 可以理解的汇编代码，但我不知道如何手动执行此操作。

我试图创建一个配置文件并在其中设置“as=gas-preprocessor.pl”（如在 FFMPEG 中），但不起作用。

任何想法？如何手动运行 gas-preprocessor.pl？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-31T07:42:41.913

我刚刚在 iOS 上完成它并且已经构建了 NS/VAD/AECM 和 AGC 的独立静态库，这里有一些提示给你，希望你成功：

**1\. 源文件列表**

对于独立的 VAD 构建，您应该确保您的项目具有所有这些文件（不需要 .s 文件），并且我没有在`header files`此处列出，您会遇到一些`header file can not be found`错误，只需修复它就可以完成。）

```
webrtc_vad.c
vad_core.c
vad_filterbank.c
vad_gmm.c
vad_sp.c
real_fft.c
division_operations.c
complex_bit_reverse.c
cross_correlation.c
complex_fft.c
downsample_fast.c
vector_scaling_operations.c
get_scaling_square.c
energy.c
min_max_operations.c
spl_init.c 
```

**2.添加一个宏叫做** `WEBRTC_MAC`

我不确定为什么 Xcode 环境不提供这个宏，但应该定义它以确保`WEBRTC_POSIX`启用它。要定义此宏，请将其添加到新的头文件中，或者只是在 webrtc-header-files 中定义它。

**3\. 按照*[这些步骤](http://blog.carbonfive.com/2011/04/04/using-open-source-static-libraries-in-xcode-4/)*在 iOS 上构建和设置 WebRTC-VAD 模块的静态库**

`notice`, 不要使用 LLVM 2.0 编译 VAD 模块（使用 GCC 或 LLVM GCC）。cus' 在编译一些 webrtc 变量声明时，它可能会给您带来很多错误。

**4\. 使用 libwebrtc_vad.a**

如果你走到这一步，事情就很容易了，只需包含`webrtc_vad.h`并使用这个模块提供的 API。就我而言，vad 工作正常。

希望我有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-12T21:34:54.887

尝试检查此链接[https://groups.google.com/forum/?fromgroups=#!topic/discuss-webrtc/VJg-fk2-i_0](https://groups.google.com/forum/?fromgroups=#!topic/discuss-webrtc/VJg-fk2-i_0)我相信您必须正确设置内联汇编。我也在这个问题上，所以如果你想切换电子邮件或其他东西，请告诉我。

# c++ - 数组大小不是静态的？

> ID：12786470
> 
> 赞同：6
> 
> 时间：2012-10-08T17:21:25.863
> 
> 标签：c++, arrays

有人可以向我解释为什么这有效。我认为数组是静态的，无法扩展，这段代码违背了我的先验知识。

```
#include <iostream>
using namespace std;
int main(){

    int test[10];
    int e = 14;

for(int i = 0; i < e; i++){
    test[i] = i;
    cout << "  " << test[i];
    }
return 0;
} 
```

此代码输出：0 1 2 3 4 5 6 7 8 9 10 11 12 13

所以基本上这个程序使用了不应该存在的数组空间。尝试将'e'设置为15，不起作用。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T17:23:57.010

数组的大小*是*固定的，不会扩展，超出其范围是未定义的行为。您观察到的是未定义行为 (UB) 的一种可能结果。不幸的是，在这种情况下，UB 建议了与数组扩展一致的模式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T17:24:23.423

这是未定义的行为。您仍然只有 10 个合法分配的整数。尽管在这种情况下它似乎有效，但您的程序格式不正确。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T17:27:55.253

您基本上超出了数组分配的内存边界，但是 C（和 C++）直接编译为机器代码（与虚拟机执行的“托管”代码相反，如 Java 或 .NET），所以没有什么在您的程序和操作系统之间，它将验证您是否访问您没有明确要求的内存。内存分配在一些块中，当一个进程从操作系统请求部分内存时，它没有得到精确的字节数，但可能会稍微多一些。在您的情况下，您得到 56 而不是 40 字节。为什么没有得到 60 - 取决于操作系统内存分配和验证机制。当 e 设置为 15 时不工作的症状是什么 - 程序崩溃？

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T17:27:58.960

这是运行时错误，而不是编译错误。原因是在 15 处失败而不是 14 处是因为一旦到达位置 15，您就会遇到已分配给另一个指针或应用程序的内存。恰好索引 11、12、13 和 14 是尚未分配的连续内存位置

# python - 以编程方式调用 wxPython EVT_BUTTON 事件

> ID：12786471
> 
> 赞同：3
> 
> 时间：2012-10-08T17:21:29.227
> 
> 标签：python, wxpython

我已经看到有关此主题的[另一个问题](https://stackoverflow.com/questions/747781/wxpython-calling-an-event-manually)，但我无法完全获得适合我的信息，所以我想我会提供我的细节 - 我怀疑我只是短视。

我正在尝试从测试框架中练习我的 GUI，这涉及在测试脚本中手动调用事件（在本例中为按钮按下）。到目前为止，除了其他不相关的废话，我有：

```
# In GUI class:

self.button_1 = wx.Button(self, id=wx.ID_ANY, label="Button 1")
self.button_1.Bind(wx.EVT_BUTTON, self.button_1)

# In GUI Test class:

event = wx.PyCommandEvent(X, Y)
wx.PostEvent(get_gui_instance(), event) 
```

我的问题是我不知道应该是什么（假设其余的都可以）`X`。`Y`任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:51:36.040

```
btnInfo = wx.Button(self,-1,"Some Button")

evt = wx.PyCommandEvent(wx.EVT_BUTTON.typeId,btnInfo.GetId())
wx.PostEvent(self, evt)  #attach event to self ... alternatively maybe attach to btnInfo 
```

应该管用

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:31:01.947

所以事实证明，因为我已经[重新调整了我的 GUI 以在](http://wiki.wxpython.org/MainLoopAsThread)GUI Test 的工作线程中运行，所以我可以直接与它通信。我应该早点意识到这一点，但结果是我不需要费心将事件从 GUI 测试发布到 GUI，因为它们在同一个进程中运行。

相反，我现在可以直接调用事件的*效果*。例如，我可以调用`on_button_press()`，绕过按钮的实际单击，这通常会触发 wxPython 中的事件。这使我能够模拟用户交互并测试工作流程和输入范围，这正是我想要做的。

当然，这只是因为我在与测试套件相同的进程中运行我的 GUI。否则，发布事件似乎是前进的方向，在回答我自己的问题时，似乎自定义事件是跨进程调用按钮按下的方式。这意味着在 GUI 中使用某种“测试代理”来处理那些特定于测试的事件。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-11-23T23:32:19.607

```
import wx

class MessageDialog(wx.Dialog):
    def __init__(self, message, title, tiempo = 2000):

        style = wx.DEFAULT_DIALOG_STYLE | wx.RESIZE_BORDER
        super(MessageDialog, self).__init__(None, -1, title, style=style)
        text = wx.StaticText(self, -1, message)

        fuente = wx.Font(pointSize = 20, 
                     family = wx.DEFAULT, 
                     style = wx.NORMAL, 
                     weight = wx.LIGHT, 
                     underline=False, 
                     faceName="", 
                     encoding=wx.FONTENCODING_DEFAULT)        
        text.SetFont(fuente)

        self.ok = wx.Button(self, wx.ID_OK, "OK")
        sizer = wx.BoxSizer(wx.VERTICAL)
sizer.Add(text,0,wx.ALIGN_CENTER_HORIZONTAL|wx.ALIGN_CENTER_VERTICAL,5)
        sizer.Add(self.ok, 0, wx.EXPAND|wx.ALL, 5)
        self.SetSizerAndFit(sizer)
        color = "WHEAT"
        self.SetBackgroundColour(color)
        self.Center()
        self.Refresh()
        wx.FutureCall(tiempo,self.salir_ok)

    def salir_ok(self):
        par_btn = getattr(self, "ok")
        evt = wx.PyCommandEvent(wx.EVT_BUTTON.typeId, par_btn.GetId())
        wx.PostEvent(self, evt)
        return

if __name__ == '__main__':
    app = wx.App()
    dialog = MessageDialog( 'Teclee el nombre del proveedor', 'Proveedor')

    dialog.ShowModal()
    dialog.Destroy()
    app.MainLoop() 
```

# javascript - 在 JavaScript 中从表单生成一系列随机数

> ID：12786473
> 
> 赞同：1
> 
> 时间：2012-10-08T17:21:40.553
> 
> 标签：javascript, arrays, random

我环顾四周，找不到解决我问题的有效方法。

背景 - 预期用途是一个易于形成的实时 rpg 组，用于计算停机时间操作的成功率。通过在给定的表单字段中输入数字，脚本会计算要使用的值在 1 到 10 之间的“骰子”的总数。“骰子”的每次“滚动”都需要满足难度阈值才能被视为成功。

我在使用`totalDice`数组大小​​生成随机数时遇到了困难。一旦我把它记下来，我需要找到一种方法来计算和显示大于给定难度阈值的随机数的总数。

有关我目前所拥有的工作示例，[请参见此处](http://kdwebmedia.com/successgenerator.html)。

我有一个`var = totalDice`提供随机数组大小的。随机数的值是 1 - 10。

例如，如果`totalDice= 220`，我需要在 1 到 10 之间生成 220 个随机数。然后我有`var = totalDiff`它提供了一个阈值，我需要将其与生成的随机数进行比较。我需要找到一种方法来获取生成的数组并计算`=> totalDiff`.

示例：`totalDice = 220`, `totalDiff = 6`, `totalSuccesses = x`, 其中`x = the number of elements => 6`.

任何帮助是极大的赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:51:22.100

把它分解成块，这就是函数的用途。

```
var roll = function() {
    return Math.floor(Math.random() * 10 + 1);
};

var getResult = function(difficulty) {
    return roll() >= difficulty;
};

var getAllResults = function(totalDice, difficulty) {
    var arr = [];
    for (var i = 0; i < totalDice; i++) {
        arr.push(getResult(difficulty));
    }
    return arr;
}; 
```

查看：

```
var results = getAllResults(220, 6);
var t = 0;
var f = 0;

for (var i = 0; i < results.length; i++) {
    if (results[i]) { 
        t++;
    } else {
        f++;
    }
}
console.log('total rolls', 220);
console.log('total result count (expected 220)', results.length);
console.log('boolean results (expected 220)', t + f);
console.log('successes', t);
console.log('failures', f);
console.log('raw results array', results); 
```

**编辑：**如果您只想要成功的次数，请创建另一个函数来计算它们：

```
var getSuccesses = function(results) {
    var successes = 0;
    for (var i = 0; i < results.length; i++) {
        if (results[i]) { 
            successes++;
        } 
    }
    return successes;
};

//Count successes for 175 die rolls at difficulty 8:
var s = getSuccesses(getAllResults(175, 8)); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:58:16.510

未经测试，但试试这个：

```
var generateRandomInteger = function(minV, maxV) {
    return Math.floor(Math.random() * (1.0 + maxV - minV) + minV);
}

var generateRandomArray = function(n, minV, maxV) {
    var rv = [];
    for (var i=0; i<n; i++) {
       rv.push(generateRandomInteger(minV, maxV));
    }
    return rv;
}; 
```

# ios - iOS UIRefreshControl 在单视图应用程序中，没有表

> ID：12786475
> 
> 赞同：1
> 
> 时间：2012-10-08T17:22:12.657
> 
> 标签：ios, uirefreshcontrol

我想在我的 iPhone 应用程序中使用 UIRefreshControl 来触发几个 UISwitch 控件的刷新，但似乎刷新控件仅适用于表格视图。这是真的？有什么建议可以在没有表格的情况下获得此功能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:29:57.660

有一个模仿 iOS6 的 UIRefreshControl 外观的开源控件。它也适用于 iOS 旧版本和 UITableView 以外的控件：

[https://github.com/Vortec4800/ODRefreshControl](https://github.com/Vortec4800/ODRefreshControl)

希望这可以帮助。

# java - 如何在字符串中转义分号？

> ID：12786483
> 
> 赞同：-1
> 
> 时间：2012-10-08T17:22:54.657
> 
> 标签：java, javascript, string, escaping

我需要将复杂的 javascript 代码初始化为字符串。但是该javascript代码包含分号和“标记。我知道我可以使用\”转义“标记。但我不知道如何转义分号。

```
<script type="text/javascript"><!--
google_ad_client = "8888888888888";
/* Error Page Ads */
google_ad_slot = "8888888";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script> 
```

我需要将上面的代码初始化为，

```
String complexString = "Above code here"; 
```

我不能连接代码片段，因为那样；将被删除。对？

这是针对 Servlet 的。我可能很愚蠢，但请原谅我。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T17:25:36.033

只要`;`在你的双引号内，你就不需要转义它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T17:25:54.170

分号不是特殊字符。当他们在`String`. 您始终可以使用小旧`System.out.println()`方法来测试字符串的行为。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-08T17:25:56.010

你不需要逃避你的`;`，因为它们是文字。当他们在里面时`"`，`'`他们是绝对安全的。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T17:32:17.383

我认为您真正想要做的是转义 javascript 中的引号字符而不是分号字符。

所以最终你会想要

```
String complexString = "<script type=\"text/javascript\"><!--
google_ad_client = \"8888888888888\";
/* Error Page Ads */
google_ad_slot = \"8888888\";
google_ad_width = 336;
google_ad_height = 280;
//-->
</script>  
<script type=\"text/javascript\"
src=\"http://pagead2.googlesyndication.com/pagead/show_ads.js\">  
</script>" 
```

# javascript - $.Ajax 成功调用原型函数错误

> ID：12786488
> 
> 赞同：2
> 
> 时间：2012-10-08T17:23:30.413
> 
> 标签：javascript, ajax

> **可能重复：**
> [AJAX 成功中的 $(this) 不起作用](https://stackoverflow.com/questions/6394812/this-inside-of-ajax-success-not-working)

我有以下示例代码（JSFiddle 跟随）

```
AdvancedSearch = function() {
    this.current = 'test';
}

AdvancedSearch.prototype.InitPage = function() {
    var t = this.current;
    this.PrePopulate()

}

AdvancedSearch.prototype.UpdateData= function() {
    alert(this.current);
}

AdvancedSearch.prototype.PrePopulate = function() {
    this.UpdateData();

    $.ajax({
        url: 'http://fiddle.jshell.net/',
        success: function(msg) {
            this.UpdateData();
        }
    });
}

var as = new AdvancedSearch();
as.InitPage();​ 
```

我在那里有“ [http://fiddle.jshell.net](http://fiddle.jshell.net) ”，所以防止他们网站上的 Access-Control-Allow-Origin 错误。

执行此代码时，我收到以下错误：

**未捕获的类型错误：对象 # 没有方法“UpdateData”**

如果你执行JSFiddle，你会发现调用PrePopulate的时候，它运行函数开头的this.UpdateData()就好了。但是，一旦 Ajax 调用完成，您就会收到错误消息。

对为什么会发生这种情况有任何想法吗？也许我以错误的方式处理这个问题。任何见解都会有所帮助。

这是我的 JSFiddle：http: [//jsfiddle.net/B4NRY/2/](http://jsfiddle.net/B4NRY/2/)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T17:24:38.413

您提供的回调`$.ajax`不会以您的 AdvancedSearch 实例作为上下文 ( `this`) 调用。

**解决方案1**（适用于所有类似的回调问题）：

```
AdvancedSearch.prototype.PrePopulate = function() {
    this.UpdateData();
    var that = this; // register the that variable in the closure of the callback
    $.ajax({
        url: 'http://fiddle.jshell.net/',
        success: function(msg) {
            that.UpdateData();
        }
    });
} 
```

**解决方案 2**（特定于[$.ajax](http://api.jquery.com/jQuery.ajax/)但非常干净，感谢 Felix）：

```
AdvancedSearch.prototype.PrePopulate = function() {
    this.UpdateData();
    $.ajax({
        url: 'http://fiddle.jshell.net/',
        context: this,
        success: function(msg) {
            this.UpdateData();
        }
    });
} 
```

# c# - 如何以编程方式设置 SAPI 识别器

> ID：12786495
> 
> 赞同：1
> 
> 时间：2012-10-08T17:24:10.480
> 
> 标签：c#, speech-recognition, sapi

我正在使用 SAPI 5.4 开发一个 C# 应用程序，它允许用户选择几种不同语言中的一种进行语音识别。

如果我转到控制面板 -> 语音识别 -> 高级语音选项，我可以将识别器语言从“Microsoft Speech Recognizer 8.0 for Windows（英语 - 美国）”更改为“Microsoft Speech Recognizer 8.0 for Windows（法语 - 法国）”例子。这使我的应用程序现在可以识别法语而不是英语的语音。

有没有办法在运行时以编程方式选择正确的识别器，而无需用户进入控制面板？

我怀疑它可能与令牌有关，但我似乎找不到任何例子。

任何帮助深表感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T13:47:27.267

您可以在调用进程内识别器（SpeechRecognitionEngine 类）的构造函数时指定文化，桌面操作系统请参见[http://msdn.microsoft.com/en-us/library/ms554259.aspx](http://msdn.microsoft.com/en-us/library/ms554259.aspx)和[http://msdn .microsoft.com/en-us/library/dd130099.aspx](http://msdn.microsoft.com/en-us/library/dd130099.aspx)用于 Microsoft 语音平台。

我认为您不能使用共享识别器（SpeechRecognizer 类）以编程方式执行此操作。请参阅[System.Speech.Recognition 和 Microsoft.Speech.Recognition 有什么区别？](https://stackoverflow.com/questions/2977338/what-is-the-difference-between-system-speech-recognition-and-microsoft-speech-re)了解更多信息。

# networking - 使用一个公共 IP 访问私有服务器

> ID：12786499
> 
> 赞同：0
> 
> 时间：2012-10-08T17:24:18.687
> 
> 标签：networking, cloud

我很想对我的以下用例有一些看法。

我有 'N' 台具有私有 IP 地址的服务器，在 'M' 端口上运行 'M' 服务（全部相同）。现在我希望使用一个公共 IP 地址访问所有这些服务。

我可以使用端口转发，但不想。例如：

公共IP：950 私人IP1：950

公共IP：960 私人IP1：960

公共IP:951 私人IP2:950

公共IP：961 私人IP2：960

但不想那样做。

谁能建议我任何方法来实现它？例如：我有一个公共 dns 名称 example.com。

如果有对 xyz.example.com 的查询，它应该被转发到一个私有服务器，如果有对 abc.example.com 的查询，它应该被路由到第二个私有服务器。

提前致谢。

拉维

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:49:45.687

HTTP 支持[Virtual Hosting](http://en.wikipedia.org/wiki/Virtual_hosting)，因此您可以实现安装反向代理所需的功能，但并非所有服务/协议都如此。

如果某个服务/协议不支持虚拟主机，那么端口转发是您唯一的选择。

# c# - C#扫描文件属性

> ID：12786509
> 
> 赞同：-4
> 
> 时间：2012-10-08T17:24:41.250
> 
> 标签：c#

```
 private void Scan_files_Click(object sender, EventArgs e)
    {
        for (int i = 0; i < listView1.Items.Count; i++)
        {
            string filePath = Convert.ToString(listView1.Items[i]);
           // MessageBox.Show("Files found: " + filePath, "Message");
           // FileAttributes fileAttributes = File.GetAttributes(filePath);
            if (((File.GetAttributes(filePath) & FileAttributes.ReadOnly) == FileAttributes.ReadOnly) && ((File.GetAttributes(filePath) & FileAttributes.Hidden) == FileAttributes.Hidden) && ((File.GetAttributes(filePath) & FileAttributes.System) == FileAttributes.System))
            {
                MessageBox.Show("File's Attributes: " + File.GetAttributes(filePath));
            }
            else
                MessageBox.Show(" NO matching attrbutes");
        }
    } 
```

我不能让这个工作：S

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:29:37.477

您可以使用这段代码查看文件属性：

```
for (int i = 0; i < listView1.Items.Count; i++)
{
    string filePath = Convert.ToString(listView1.Items[i]);

    if (!File.Exists(filePath))
        return;
    //make sure you have a correct file path in filePath variable

    // check whether a file is read only
    bool isReadOnly = ((File.GetAttributes(filePath) & FileAttributes.ReadOnly) == FileAttributes.ReadOnly);

    // check whether a file is hidden
    bool isHidden = ((File.GetAttributes(filePath) & FileAttributes.Hidden) == FileAttributes.Hidden);

    // check whether a file is system file
    bool isSystem = ((File.GetAttributes(filePath) & FileAttributes.System) == FileAttributes.System);

    if (isReadOnly || isHidden || isSystem)
        MessageBox.Show("File's Attributes: " + File.GetAttributes(filePath));
    else
        MessageBox.Show("No. matching attrbutes");
} 
```

参考：[文件属性 [C#]](http://www.csharp-examples.net/file-attributes/)

快乐的编码...

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:27:16.130

调查`filePath`你实际得到什么，你可以使用断点，或者在你调用 File.GetAttributes 之前，尝试：

```
if (!File.Exists(filePath))
{
    MessageBox.Show(String.Format("File {0} not found.", filePath));
} 
```

# iphone - 从客户端发送推送通知

> ID：12786510
> 
> 赞同：2
> 
> 时间：2012-10-08T17:24:47.360
> 
> 标签：iphone, objective-c, ios, xcode, push-notification

我有几个客户希望我创建一个应用程序，在应用程序商店发布后，他们希望远程控制推送通知的 iOS 功能 - 他们希望通过应用程序发送自定义文本等。我对这个话题完全陌生，所以我想问一下如何做到这一点。

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-12T16:06:46.190

是的，您需要一个用于推送通知的服务器端应用程序。

幸运的是，有很多现成的免费推送提供商可以在这里提供帮助并节省您的时间

例如，[ConnectyCube](https://connectycube.com/)，他们有一个伟大而简单的 iOS 推送指南[https://developers.connectycube.com/ios/push-notifications](https://developers.connectycube.com/ios/push-notifications)

它也适用于跨平台：iOS-Android-Web

此外，日常问题之一是 APNS 证书生成。有一个简单的指南如何做到这一点[https://developers.connectycube.com/ios/how-to-create-apns-certificate](https://developers.connectycube.com/ios/how-to-create-apns-certificate)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:31:51.023

老实说，使用推送通知最简单的方法是使用诸如 Urban airship 之类的服务。

我不是这方面的专家，但我确信应用商店中的条款在推送通知方面已经发生了变化。所以只要确保他们没有发送营销垃圾邮件等。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:33:28.903

在开始之前，您需要自己的 Web 服务器。此外，为了让您的客户发送通知，您必须有一个网站供他们发布消息。如果您需要 Web 服务器，我在 maxiumumasp 作为提供商方面有很好的经验。这是一个链接：

[http://www.maximumasp.com/products/virtualDedicated/default.aspx](http://www.maximumasp.com/products/virtualDedicated/default.aspx)

苹果在这里有关于推送通知的非常好的文档：

[http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html](http://developer.apple.com/library/mac/#documentation/NetworkingInternet/Conceptual/RemoteNotificationsPG/ApplePushService/ApplePushService.html)

如果您在阅读本文后还有其他具体问题，请告诉我。

# php - base64_encode 和序列化 php 函数参数

> ID：12786517
> 
> 赞同：6
> 
> 时间：2012-10-08T17:24:58.773
> 
> 标签：php, optimization, moodle

在浏览[Moodle 的](https://github.com/moodle/moodle)源代码时，我偶然发现了这个：

**存储库/最近/lib.php**

```
public function get_listing($encodedpath = '', $page = '') {
    global $OUTPUT;
    $ret = array();
    $ret['dynload'] = true;
    $ret['nosearch'] = true;
    $ret['nologin'] = true;
    $list = array();
    $files = $this->get_recent_files(0, $this->number);

    try {
        foreach ($files as $file) {
            $params = base64_encode(serialize($file));
            // Check that file exists and accessible
            $filesize = $this->get_file_size($params);
            if ($file['filename'] == 'image.png') {
              var_dump($filesize);
            }
            if (!empty($filesize)) {
                $node = array(
                    'title' => $file['filename'],
                    'size' => $filesize,
                    'date' => '',
                    'source'=> $params,
                    'thumbnail' => $OUTPUT->pix_url(file_extension_icon($file['filename'], 32))->out(false),
                );
                $list[] = $node;
            }
        }
    } catch (Exception $e) {
        throw new repository_exception('emptyfilelist', 'repository_recent');
    }
    $ret['list'] = array_filter($list, array($this, 'filter'));
    return $ret;
} 
```

**存储库/lib.php**

```
public function get_file_size($source) {
    $browser    = get_file_browser();
    $params     = unserialize(base64_decode($source));
    $contextid  = clean_param($params['contextid'], PARAM_INT);
    $fileitemid = clean_param($params['itemid'], PARAM_INT);
    $filename   = clean_param($params['filename'], PARAM_FILE);
    $filepath   = clean_param($params['filepath'], PARAM_PATH);
    $filearea   = clean_param($params['filearea'], PARAM_AREA);
    $component  = clean_param($params['component'], PARAM_COMPONENT);
    $context    = get_context_instance_by_id($contextid);
    $file_info  = $browser->get_file_info($context, $component, $filearea, $fileitemid, $filepath, $filename);
    if (!empty($file_info)) {
        $filesize = $file_info->get_filesize();
    } else {
        $filesize = null;
    }
    return $filesize;
} 
```

我的问题是，当它在函数内部立即撤消时，base64 编码和序列化的目的是什么？这样做有正当理由还是只是过度设计？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T10:34:15.817

在他们的 PHPXref 中快速点击一下，就会发现这个函数也在[repository_ajax.php中被调用](http://xref.schoolsict.net/moodle/2.2/nav.html?repository/lib.php.source.html#l1367)

在查询字符串/表单字段中传递序列化数据根本不起作用（可能），但使用 base64 编码这不是问题。

因此，该函数旨在处理通过 ajax 传递的请求、base64 解码、反序列化，然后返回文件大小。（这可能也链接到`source`列表节点的元素）

本质上，该调用正在验证编码字符串是否有效，以便稍后在 ajax 请求中使用它。

# c++ - sort_heap 存在的原因

> ID：12786518
> 
> 赞同：12
> 
> 时间：2012-10-08T17:25:02.073
> 
> 标签：c++, sorting, stl

在浏览标准库中鲜为人知的部分时，我偶然发现了`std::sort_heap`. 但我不明白为什么它存在，因为有一个名为`std::sort`.

另请注意，复杂性是相同的。

所以，我的问题是：存在的理由是什么`sort_heap`？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T17:31:22.243

`sort_heap`假设输入已经是[堆](http://en.wikipedia.org/wiki/Heap_%28data_structure%29)的形式。这意味着它理论上可以比 更有效地工作`std::sort`，因为输入的顺序有一些限制（不像`std::sort`，它必须适用于所有输入）。

正如评论中提到的，值得注意的是，这些性能优势并没有得到保证，而且显然取决于输入数据，所以如果性能很重要，那么就没有办法绕过分析。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T18:00:21.617

In the case where the data already has the heap property, there's an obvious sorting algorithm that doesn't apply to data without the property -- repeatedly remove the maximum element of the heap and restore the heap property. This is how heapsort works (first heapify the data, then use the heap property to sort it).

So, suppose that you have a heap and you want it sorted. You could call `std::sort`, but `std::sort_heap` exists to hint that this algorithm be used[*]. It makes at least some sense to provide the programmer with a means to *potentially* improve the sort performance. Whether it's actually faster or not is another matter.

Observe that `std:sort` is permitted to be implemented as a heapsort, although I doubt that it ever is.

The world would go on if `sort_heap` were not available, since there's another way to get the same behavior: repeatedly call `pop_heap` on a smaller and smaller initial segment of your original heap. So if it troubles you, view it as a pure convenience function. It's possible there are optimizations than can be applied, though, to make `sort_heap` a little better than this.

A historical note that might have affected the thinking of the authors of C++03: in the SGI version of the STL, `sort` was defined to use introsort and `partial_sort` was defined to use heapsort. I don't think that's exactly the rationale for including it in the standard, though: it's also an "obvious" function to include with the heap algorithms.

[*] it's a pretty strong hint, since the complexity requirement for `sort_heap` is "at most N log N comparisons", not "O(N log N) comparisons". So an implementation can't have `sort_heap` call `sort` unless it knows that its own `sort` implementation performs at most that many comparisons when the input data has the heap property.

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2020-07-25T09:50:53.010

复杂性保证实际上并不相同。

std::sort 需要 O(log N) 堆栈上的内存量。std::sort_heap 需要 O(1) 数量的堆栈。这在堆栈空间受限的环境中产生了很大的不同，例如在嵌入式应用程序中（即在微控制器上运行）。即使在几千个元素数组上调用 std::sort 也会导致堆栈溢出。

顺便说一句，在嵌入式环境中，内部存储通常是 SRAM，因此您不必担心快速排序/引入排序获得性能优势的缓存位置。

因此，在微控制器环境中，建议编写

```
std::make_heap(data.begin(), data.end());
std::sort_heap(data.begin(), data.end()); 
```

代替

```
std::sort(data.begin(), data.end()); 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2022-01-02T03:46:59.150

代码大小是使用堆排序的一个很好的理由。这些是模板函数；对于被排序和比较函数的每种类型组合，您将获得一个完整的排序实现`std::sort`（即，用于排序一个案例的代码的任何部分都不会与用于排序不同案例的代码共享 - 即使它是相同的类型，但是不同的比较）。

堆排序（即`std::make_heap`后跟`std::sort_heap`）也是如此——但生成的代码量可能要少得多，尤其是在比较运算符不是完全微不足道的情况下；我刚刚做了一些测试，`std::sort`在 x86 上，我看到 2k-3k 字节的 a 和 600-1000 字节的堆排序相同的操作。

因此，如果您倾向于在不同类型上使用大量排序操作，和/或使用不同的比较函数，那么将堆排序用于倾向于在较小 N 上操作的那些可能是一个好主意；对于这些，算法效率的差异不会对其造成太大影响，并且整体代码膨胀将减少。

我怀疑与 相比，堆实现往往会在给定问题上做更多的“交换” `std::sort`，所以如果你对交换成本更高的类型进行排序，它可能会明显变慢 - 对于这些情况，也许可以排序而是一个指针数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T17:29:06.923

取自：[http ://www.sgi.com/tech/stl/sort_heap.html](http://www.sgi.com/tech/stl/sort_heap.html)

> sort_heap 将堆 [1] [first, last) 转换为已排序的范围。请注意，这不是稳定的 > 排序：不保证保留等效元素的相对顺序。

std::sort 可能会根据实现在最坏的情况下为您提供 O(N^2) 复杂度，并适用于未排序的数据集。std::sort_heap 在堆上工作并且总是给你 O(nlogn)

# java - 我可以直接将 .sql 文件导入 XAMPP 安装吗

> ID：12786522
> 
> 赞同：1
> 
> 时间：2012-10-08T17:25:30.397
> 
> 标签：java, mysql, xampp, mysqldump

我正在使用 XAMPP 打包一个 java webapp 软件，这样我的用户就不必安装像 mysql 这样的依赖项。我可以运行 web 应用程序。

我将模式文件 (.frm) 格式复制到 xampp mysql/data 目录。但是我有一个 mysqldump 文件，我想随软件一起提供，以便在第一次安装时创建表并填充一些默认数据。你能建议一个好的方法吗？

我的理解是 .frm 文件只包含架构。我的用例的最佳解决方案是将 .sql 文件与软件打包，以便它第一次运行。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T14:28:38.757

我找到了解决方案。我有一个脚本，用户第一次使用该软件时必须运行该脚本。在该脚本中，我使用 .sql 文件导入 .sql 文件`mysql -u <username> -p<password> <database-name> < file.sql`。

# h.264 - RTSP H.264 IP 摄像机作为 Windows 中的视频源/输入

> ID：12786524
> 
> 赞同：4
> 
> 时间：2012-10-08T17:25:37.657
> 
> 标签：h.264, rtsp, ip-camera, ffdshow

我目前遇到了这个问题，我希望有人可以帮助我。我正在尝试创建某种解码器，它将转换充当视频输入设备的视频流，以便我可以在 Wirecast（视频流程序）中使用它。

在这个阶段，我使用 mjpeg IP 摄像头作为视频源，使用[这个简洁的小程序](http://alax.info/blog/1216)，它允许我将原始 IP 地址：端口转换为输入设备，这与无限摄像头完美配合，但不支持 RTSP 或 H.264，我有因为升级了几台摄像机，所以我可以访问高清视频。

我已经尝试了许多来自网络的 RTSP 源过滤器，以及一些像 xpwebcam 这样的程序来访问他们的 H.264 过滤器，但还没有运气。我尝试使用 GraphStudio 创建自己的过滤器，但这超出了我的理解。

IP 摄像机视频源 URL 如下所示..

**视频源：** rtsp://xxx.xxx.xxx.xxx/0/video0

其中 videoX = 0,1,2 用于分辨率。

**rtsp://user:pass@10.0.0.10/0/video0**

或**rtsp://@10.0.0.10/0/video0**用于未受保护的摄像机，它是一个专用网络，所以没关系，什么都可以。

我可以使用 VLC 成功地实时流式传输视频源，但仅此而已，我不确定是否有办法将流转换为输入设备。

几个星期以来，我一直在尝试这样做，但让它发挥作用的运气却很差。

请帮我 ：）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-17T09:52:40.777

作为一名在该领域工作多年的专业摄影师，这个问题让我觉得很有趣。您正在寻找的答案可以在这个网站上找到：http: [//alax.info/blog/1416](http://alax.info/blog/1416)

该站点列出了您的设备所需的更新。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-11T17:37:14.597

如果您没有源过滤器，您不能简单地从源中读取并写入文件并让您的其他程序同时从文件中读取它。我在 unix 上多次使用过这样的技巧。不明白为什么它不能在这里工作。

# objective-c - mov文件的视频播放器？

> ID：12786525
> 
> 赞同：0
> 
> 时间：2012-10-08T17:25:51.167
> 
> 标签：objective-c, ios, xcode, mpmovieplayer

我正在使用 MpMovieplayer 在 ios 5 中动态播放 mov 文件（从设备中选择视频），但它没有播放。它显示黑屏。我也尝试直接将电影 url 提供给播放器，但它不起作用。有没有播放器而不是MPMovieplayer 播放 mov 文件。在此先感谢

```
 NSString *path = [[NSBundle mainBundle] pathForResource:@"Movie" ofType:@"mov"];
  NSURL *movieURL = [NSURL fileURLWithPath:path];

  NSLog(@"movieURL ----%@",movieURL);
 movieplayer=[[MPMoviePlayerController alloc] initWithContentURL:movieURL];

 if([movieplayer respondsToSelector:@selector(view)])
 {
    movieplayer.controlStyle = MPMovieControlStyleFullscreen;
    [movieplayer.view setFrame:self.view.bounds];
    [self.view addSubview:movieplayer.view];
     movieplayer.shouldAutoplay=true;
    [movieplayer play];
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:38:38.460

尝试

```
 NSString *path = [[NSBundle mainBundle] pathForResource:@"your movie"    ofType:@"mov"];

MPMoviePlayerViewController* tmpMoviePlayViewController=[[MPMoviePlayerViewController alloc] initWithContentURL:[NSURL fileURLWithPath:path]];

if (tmpMoviePlayViewController) {

    tmpMoviePlayViewController.modalTransitionStyle = UIModalTransitionStyleCrossDissolve;

    [self presentModalViewController:tmpMoviePlayViewController animated:YES];

    tmpMoviePlayViewController.moviePlayer.movieSourceType = MPMovieSourceTypeFile;

    [[NSNotificationCenter defaultCenter] addObserver:self

                                             selector:@selector(myMovieViewFinishedCallback:)

                                                 name:MPMoviePlayerPlaybackDidFinishNotification

                                               object:tmpMoviePlayViewController];

    [tmpMoviePlayViewController.moviePlayer play];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:39:34.200

你应该看看 AVPlayer 类。

MPMoviePlayerController 实际上是从 AVPlayer 类“派生”的，因此可以使其工作。

# jquery - 引导选项卡 + jQuery BBQ

> ID：12786530
> 
> 赞同：1
> 
> 时间：2012-10-08T17:25:55.903
> 
> 标签：jquery, jquery-plugins, twitter-bootstrap

[http://jsfiddle.net/Mrbaseball34/CQXBx/3/](http://jsfiddle.net/Mrbaseball34/CQXBx/3/)

**HTML：**

```
<div class="tabbable tabs-left">
    <ul class="nav nav-tabs">
        <li class="active">
            <a href="#tab1">Profile Settings</a>
        </li>
        <li>
            <a href="#tab2">Email &amp; Password</a>
        </li>
        <li>
            <a href="#tab3">Phone Numbers</a>
        </li>
    </ul>
    <div class="tab-content">
        <div class="tab-pane active" id="tab1">
            <span>Tab1</span>
        </div> <!-- tab1 -->
        <div class="tab-pane active" id="tab2">
            <span>Tab2</span>
        </div> <!-- tab2 -->
        <div class="tab-pane active" id="tab3">
            <span>Tab3</span>
        </div> <!-- tab3 -->
    </div>
</div> 
```

**Javascript：**

```
$(document).ready(function () {
    var tabs = $('.tabbable'),
    tab_a_selector = '.nav-tabs a';

    tabs.find( tab_a_selector ).click(function(e){
        e.preventDefault();
        $(this).tab('show');
        var state = {},
        // Get the id of this tab widget.
        id = $(this).closest('.tabbable').attr('id'),
        // Get the index of this tab.
        idx = $(this).parent().prevAll().length;
        // Set the state!
        state[id] = idx;
        $.bbq.pushState(state);
    });

    $(window).on('hashchange', function (e) {
        tabs.each(function () {
            var idx = $.bbq.getState(this.id, true) || 0;
            $(this).find(tab_a_selector).eq(idx).triggerHandler('click');
        });
    })

    .trigger('hashchange');
}); 
```

**CSS：**

```
body { background: #fff; } 
```

我似乎无法让 Bootstrap Tabbable (tabs-left) 与 BBQ 的 hashchange 一起正常工作。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:04:36.090

这似乎工作正常。 [http://jsfiddle.net/Mrbaseball34/CQXBx/4/](http://jsfiddle.net/Mrbaseball34/CQXBx/4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:00:18.853

根据您的代码示例，我相信问题出在此处：

```
tabs.find( tab_a_selector ).click(function(e){
  e.preventDefault();

  $(this).tab('show');
  var state = {},
  // Get the id of this tab widget.
  id = $(this).closest('.tabbable').attr('id'),
  // Get the index of this tab.
  idx = $(this).parent().prevAll().length;
  // Set the state!
  state[id] = idx;
  $.bbq.pushState(state);
}); 
```

在此代码块中，您试图获取`id`具有`tabbable`类的最近元素，但最近的匹配元素没有`id`属性。然后，您将空`id`属性传递给并使用一个基本上为空的数组进行`state`调用。`bbq`

如果您在该代码块的中间放置一个警报或断点，您可以看到该选项卡实际上确实会立即更改，但随后会重置到第一个选项卡，因为它位于索引 0 处，这是您的`hashchange`事件处理程序在找不到时默认设置的位置一个匹配的`id`。

# c - 为什么这个指针操作失败了？

> ID：12786534
> 
> 赞同：1
> 
> 时间：2012-10-08T17:26:02.220
> 
> 标签：c, pointers

我正在努力理解指针。我用 C 编写了这个字符串复制功能。

```
#include<stdio.h>

char *my_strcpy(char *dest, char *source)
{
   while (*source != '\0')
   {
     *dest++ = *source++;
   }
   *dest = '\0';
 return dest;
}

int main(void)
{
  char* temp="temp";
  char* temp1=NULL;
  my_strcpy(temp1,temp);
  puts(temp1);

  return 0;

} 
```

`char* temp1=NULL`这个程序给出了一个段错误。如果我改成`char* temp1`仍然它失败。如果我更改`char* temp1`为`char temp1[80]`，则代码有效。`char temp1[1]`如果输出为 temp，则该代码也有效。我在想输出应该是t。为什么会这样，为什么会出现错误`char* temp`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:27:31.807

因为您没有为目标字符串分配空间。`NULL`您正在尝试在位置（几乎可以肯定`0x00`）写入内存。

尝试`char* temp1= malloc(strlen(temp)+1);`或类似的东西。这将分配一些内存，然后您可以将字符复制到其中。+1 用于结尾的空字符。

如果您编写 Java 和朋友，它会阻止您访问数组末尾的内存。但是在语言级别上，C 可以让你在任何你想要的地方写入内存。然后崩溃（希望立即但可能在下周）。数组不是严格强制执行的数据类型，它们只是分配和引用内存的约定。

如果您创建它，`char temp1[1]`那么您将在堆栈上分配一些内存。可能可以访问附近的内存（您可以对其进行读写），但您将在其他用于其他用途的内存上涂鸦。这是一个经典的内存错误。

还有风格：我个人建议不要使用`++`s 的返回值。它更难阅读，让你三思而后行。

```
*dest = *source;
dest++;
source++; 
```

比较清楚。但那只是我的个人意见。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:30:29.343

您必须为目标参数分配空间。

使用 时`char temp1[80]`，会在内存中分配 80 个字节。

您可以以静态方式分配内存，如数组，或使用[malloc](http://msdn.microsoft.com/en-us/library/6ewkz86d.aspx)函数

# iphone - 应用程序与 iphone 5 屏幕尺寸的兼容性

> ID：12786537
> 
> 赞同：0
> 
> 时间：2012-10-08T17:26:17.213
> 
> 标签：iphone, objective-c, ios, xcode

> **可能重复：**
> [如何检测 iPhone 5（宽屏设备）？](https://stackoverflow.com/questions/12446990/how-to-detect-iphone-5-widescreen-devices)

是否需要对在 iphone 5 之前开始开发的应用程序进行任何调整，以便它们在 iphone 5 的大屏幕上工作？

如果是这样，这些更改是什么，或者我在哪里可以找到要更改的内容？到目前为止，谷歌并没有太大帮助。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:36:07.043

添加`Default-568h@2x.png`启动图像后，请按照本文中概述的步骤操作：

[如何为 iPhone 5 屏幕分辨率开发或迁移应用程序？](https://stackoverflow.com/questions/12395200/how-to-develop-or-migrate-apps-for-iphone-5-screen-resolution)

如果您对在应用程序内部使用的图像有疑问，并且想要支持 iPhone 5 和 iPhone 5 之前的设备，请使用以下命令：

[在 iPhone5 和 iPhone4 的 xib 中处理不同尺寸的图像？](https://stackoverflow.com/questions/12753718/dealing-with-different-size-images-in-a-xib-for-iphone5-versus-iphone4/12754158#12754158)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:29:21.710

您需要添加一个名为 640x1136px 的默认启动图像`Default-568h@2x.png`以支持 iPhone 5 屏幕。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:33:47.863

首先，您必须有一个 640x1136 的启动图像（带`-568h@2x.png`后缀）才能使其与 iPhone 5 兼容，但要充分利用更大的屏幕，有很多方法可以做到。我发现最简单的方法是制作两个独立的故事板，为 iPhone 5 制作一个新的故事板，同时保留您已经用于 iPhone 4S、4 等的故事板。使用两个故事板消除了 AutoLayout 的必要性；需要注意的是，启用 AutoLayout 也会删除 iOS 5 兼容性。使用此[答案](https://stackoverflow.com/questions/12536689/xcode-4-5-how-to-pick-storyboards-at-launch)中的代码开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T17:34:07.873

根据您的应用程序视图的布局方式，您可能不需要进行太多更改。如果您有调整大小并正确锚定的视图，例如滚动视图或表格视图，它们将展开以填充 iPhone 5 屏幕上的额外空间。您还需要为新的屏幕尺寸添加额外的启动图像。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T17:35:05.360

iphone 5 的屏幕更高，因此您的图像文件夹中还需要包含分辨率为 1136x640 的图像。（在图像文件名末尾添加 -568h@2x）

此外，每次您调整精灵和屏幕上的所有其他内容时，您都需要单独考虑 iphone 5，就像您考虑 ipad 和 iphone（非视网膜和视网膜）一样。

# html - 我怎样才能将水印添加到像 9gag 这样的图像上

> ID：12786541
> 
> 赞同：2
> 
> 时间：2012-10-08T17:26:36.807
> 
> 标签：html, css, xhtml

当我开始注意到人们正在使用它们时，我需要开始为我的图像添加水印。我真的不喜欢在图像上到处都有水印。我更喜欢 9gag 这样做的方式：[https ://9gag.com/gag/352822](https://9gag.com/gag/352822)

没有任何可见的水印，但是当您右键单击并保存图像时，您可以看到水印。这是怎么做到的？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:49:25.303

水印的全部意义在于防止删除归属和/或显示版权/所有权信息（http://en.wikipedia.org/wiki/Digital_watermarking）

9Gag 所做的事情很容易颠覆它是微不足道的。我需要做的就是裁剪图像并移除底部，瞧，图像是免费的“水印”（它不是真正的水印，将其称为符合 OP 的定义）。

为了使水印发挥其功能，它需要覆盖在图像上，以防止它被移除而不损坏图像本身。您要求的根本不是水印。

水印图像示例： [http ://s.we.lc/UNGZeT](http://s.we.lc/UNGZeT)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:46:47.470

The example you provided has extra space at the bottom of the image file (the actual .jpg), which contains the site's URL. When the image is displayed on the page, it's container is shrunk so that the extra part of the URL isn't actually shown.

To replicate this, you would need to edit each of your images to add the extra info, and then re-style your images to display in a slightly smaller box.

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:32:27.813

### CSS

```
div {margin: 25px 0 0;}
div:first-child {height: 150px; overflow: hidden; margin: 0;}​ 
```

### 看看这个：http: [//jsfiddle.net/J9y4G/](http://jsfiddle.net/J9y4G/)

# java - Java zip 字符编码

> ID：12786545
> 
> 赞同：5
> 
> 时间：2012-10-08T17:26:54.817
> 
> 标签：java, encoding, zip

我正在使用以下方法将文件压缩为 zip 文件：

```
import java.util.zip.CRC32;
import java.util.zip.ZipEntry;
import java.util.zip.ZipOutputStream;

public static void doZip(final File inputfis, final File outputfis) throws IOException {

    FileInputStream fis = null;
    FileOutputStream fos = null;

    final CRC32 crc = new CRC32();
    crc.reset();

    try {
        fis = new FileInputStream(inputfis);
        fos = new FileOutputStream(outputfis);
        final ZipOutputStream zos = new ZipOutputStream(fos);
        zos.setLevel(6);
        final ZipEntry ze = new ZipEntry(inputfis.getName());
        zos.putNextEntry(ze);
        final int BUFSIZ = 8192;
        final byte inbuf[] = new byte[BUFSIZ];
        int n;
        while ((n = fis.read(inbuf)) != -1) {
            zos.write(inbuf, 0, n);
            crc.update(inbuf);
        }
        ze.setCrc(crc.getValue());
        zos.finish();
        zos.close();
    } catch (final IOException e) {
        throw e;
    } finally {
        if (fis != null) {
            fis.close();
        }
        if (fos != null) {
            fos.close();
        }
    }
} 
```

我的问题是我有包含内容`N°TICKET`的平面文本文件，例如，压缩结果在未压缩时会给出一些奇怪的字符`NÂ° TICKET`。也不支持`é`和等字符。`à`

我猜这是由于字符编码，但我不知道如何在我的 zip 方法中将其设置为`ISO-8859-1`？

（我在 Windows 7、Java 6 上运行）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T18:35:22.567

您正在使用的流准确地写入了它们给出的字节。写入器解释字符数据并将其转换为相应的字节，而读取器则相反。Java（至少在版本 6 中）没有提供一种简单的方法来混合和匹配压缩数据上的操作以及写入字符。

这种方式虽然可行。然而，它有点笨拙。

```
File inputFile = new File("utf-8-data.txt");
File outputFile = new File("latin-1-data.zip");

ZipEntry entry = new ZipEntry("latin-1-data.txt");

BufferedReader reader = new BufferedReader(new FileReader(inputFile));

ZipOutputStream zipStream = new ZipOutputStream(new FileOutputStream(outputFile));
BufferedWriter writer = new BufferedWriter(
    new OutputStreamWriter(zipStream, Charset.forName("ISO-8859-1"))
);

zipStream.putNextEntry(entry);

// this is the important part:
// all character data is written via the writer and not the zip output stream
String line = null;
while ((line = reader.readLine()) != null) {
    writer.append(line).append('\n');
}
writer.flush(); // i've used a buffered writer, so make sure to flush to the
// underlying zip output stream

zipStream.closeEntry();
zipStream.finish();

reader.close(); 
writer.close(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T17:33:52.150

Afaik 这在 Java 6 中不可用。

但我相信[http://commons.apache.org/compress/](http://commons.apache.org/compress/)可以提供解决方案。

切换到 Java 7 提供了一个新的构造函数，该构造函数将其编码为附加参数。

[https://blogs.oracle.com/xuemingshen/entry/non_utf_8_encoding_in](https://blogs.oracle.com/xuemingshen/entry/non_utf_8_encoding_in)

```
zipStream = new ZipInputStream(
    new BufferedInputStream(new FileInputStream(archiveFile), BUFFER_SIZE),
    Charset.forName("ISO-8859-1") 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-06-17T07:25:24.360

尝试使用 org.apache.commons.compress.archivers.zip.ZipFile；不是java自己的库，所以你可以像这样给出编码：

导入 org.apache.commons.compress.archivers.zip.ZipFile；

ZipFile zipFile = new ZipFile(filepath,encoding);

# c# - 如何使浏览器登录并执行某些操作然后使用另一个帐户重新登录

> ID：12786547
> 
> 赞同：0
> 
> 时间：2012-10-08T17:27:08.843
> 
> 标签：c#, winforms, login, autocomplete, webbrowser-control

我有一个简单的程序，我可以打开一个网页，然后从 textbox1 粘贴用户名和密码

然后在里面做一些事情，之后想用另一个帐户重新登录

我可以为两个或三个帐户做到这一点，我想处理开放数量的用户名

我想从**多行文本框中获取用户名**

仅粘贴第一行和密码并单击确定的代码是：

```
TextReader read = new StringReader(textBox2.Text);
int rows = 500;

string[] text1 = new string[rows];
for (int r = 1; r < rows; r++)
{    
    text1[r] = read.ReadLine();
    // textBox3.Text = text1[r];

    HtmlElement ele = webBrowser1.Document.GetElementById("name"); if (ele != null)
    ele.InnerText = text1[r];

    ele = webBrowser1.Document.GetElementById("password"); if (ele != null)
    ele.InnerText = text1[r] + "5";

    ele = webBrowser1.Document.GetElementById("s1"); if (ele != null)
    ele.InvokeMember("click"); 
```

`text1[r]`意味着它将只占用第一行

现在程序在里面然后用这个代码注销

```
webbrowser1.navigate("http://example.com/logout.php"); 
```

然后我想重新登录并在第二行（另一个帐户）然后第三行等上做同样的事情。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-18T22:17:31.450

它不是那样工作的。您需要做的是像浏览器一样，即提交表单：

*   [您如何以编程方式填写表格并“发布”网页？](https://stackoverflow.com/questions/26857/how-do-you-programmatically-fill-in-a-form-and-post-a-web-page)
*   [如何使用 C# 提交 http 表单](https://stackoverflow.com/questions/1273998/how-to-submit-http-form-using-c-sharp)

您将不得不研究 POST 请求的结构并使用您的应用程序构建一个类似的 post 请求。您必须使用[FireBug](https://getfirebug.com/)之类的工具来调查提交表单并复制 POST 请求时生成的网络流量。也看看这个问题：[http form post change submit data](https://stackoverflow.com/questions/9741599/http-form-post-change-submit-data)

# javascript - 如何使用 dojox.gfx 调整对比度、变暗/变亮矢量图形

> ID：12786550
> 
> 赞同：0
> 
> 时间：2012-10-08T17:27:16.960
> 
> 标签：javascript, dojo, svg, vector-graphics, vml

我正在使用 dojox.gfx 创建和操作矢量图形。我需要调整对比度并对其应用模糊、变暗/变亮效果吗？

我需要支持的浏览器是IE 8+。所以，我必须在 SVG(IE 9) 和 VML(IE 8) 上实现这些东西

有没有办法做到这一点？通过 dojo 或任何其他库。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T14:51:15.953

这是针对 svg 的：

```
<svg xmlns="http://www.w3.org/2000/svg" width="200" height="200">
<filter id="brightness">
    <feComponentTransfer>
        <feFuncR type="linear" slope="4"/>
    <feFuncG type="linear" slope="4"/>
    <feFuncB type="linear" slope="4"/>
 </feComponentTransfer>
</filter>
<image filter="url(#brightness)" x="0" y="0" width="200" height="100" xlink:href="pic.png" />       
</svg> 
```

对于 VML，我不确定。

可能是 blacklevel 属性，值介于 -0.5（纯黑色）和 0.5（纯白色）之间

```
<v:image style='width:200px;height:100px' src="images/temporary/pic2.png" blacklevel="-0.2"/> 
```

这是 vml blacklevel 属性的链接

[http://msdn.microsoft.com/en-us/library/bb229563%28v=vs.85%29.aspx](http://msdn.microsoft.com/en-us/library/bb229563%28v=vs.85%29.aspx)

# xml - 如何使用 Deserializer 读取 XML 文件中的内部数据？

> ID：12786551
> 
> 赞同：0
> 
> 时间：2012-10-08T17:27:26.423
> 
> 标签：xml, vb.net, xml-serialization

这是我的 XML 文件：

```
<?xml version="1.0" encoding="utf-8"?>
<test xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <name>test</name>
 <one>1</one>
 <two>2</two>
</test> 
```

这是我的代码：

```
Imports System.Xml.Serialization
Imports System.IO

Class main

Sub Main()
    Dim p As New test()

    Dim x As New XmlSerializer(p.GetType)

    Dim objStreamReader As New StreamReader("XML.xml")
    Dim p2 As New class1()
    p2 = x.Deserialize(objStreamReader)
    objStreamReader.Close()

    MsgBox(p2.name)
    MsgBox(p2.one)
    MsgBox(p2.two)

End Sub

End Class 
```

还有我的课：

```
Imports System.Xml.Serialization

Public Class test

Private newname As String
Private newone As Integer
Private newtwo As Integer

Public Property name() As String
    Get
        name = newname
    End Get
    Set(ByVal value As String)
        newname= value
    End Set
End Property

Public Property one() As Integer
    Get
        one = newone
    End Get
    Set(ByVal value As Integer)
        newone = value
    End Set
End Property

Public Property two() As Integer
    Get
        two = newtwo
    End Get
    Set(ByVal value As Integer)
        newtwo = value
    End Set
End Property

End Class 
```

它有效，它为我提供了带有 XML 文件中数据的消息框，但是我遇到了麻烦，如果我像这样将内部节点添加到 XML 文件中：

```
<?xml version="1.0" encoding="utf-8"?>
<test xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <name>test</name>
 <numbers>
  <one>1</one>
  <two>2</two>
 </numbers>
</test> 
```

我应该如何计算数字？我知道它是 test 的一个属性，但它也是一个类，因为它有一个和两个作为属性，那么正确的方法是什么？

**更新：**

```
<?xml version="1.0" encoding="utf-8"?>
<test xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
 <name>test</name>
 <numbers>
  <one>1</one>
  <two>2</two>
 </numbers>
 <numbers>
  <one>3</one>
  <two>4</two>
 </numbers>
</test> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:54:01.477

要反序列化该示例 XML，您希望数据类如下所示：

```
Public Class test
    Private newname As String
    Private newnumbers As List(Of Numbers)

    Public Property name() As String
        Get
            Return newname
        End Get
        Set(ByVal value As String)
            newname = value
        End Set
    End Property

    <XmlElement()> _
    Public Property numbers() As List(Of Numbers)
        Get
            Return newnumbers
        End Get
        Set(ByVal value As List(Of Numbers))
            newnumbers = value
        End Set
    End Property
End Class

Public Class Numbers
    Private newone As Integer
    Private newtwo As Integer

    Public Property one() As Integer
        Get
            Return newone
        End Get
        Set(ByVal value As Integer)
            newone = value
        End Set
    End Property

    Public Property two() As Integer
        Get
            Return newtwo
        End Get
        Set(ByVal value As Integer)
            newtwo = value
        End Set
    End Property
End Class 
```

然后你可以像这样反序列化它：

```
Sub Main()
    Dim p As New test()
    Dim x As New XmlSerializer(p.GetType)
    Dim objStreamReader As New StreamReader("XML.xml")
    Dim p2 As New test()
    p2 = x.Deserialize(objStreamReader)
    objStreamReader.Close()
    MsgBox(p2.name)
    For Each i As Numbers In p2.numbers
        MsgBox(i.one)
        MsgBox(i.two)
    Next
End Sub 
```

# javascript - 使用时区强制在特定时间刷新页面

> ID：12786558
> 
> 赞同：1
> 
> 时间：2012-10-08T17:27:49.190
> 
> 标签：javascript, timezone, refresh

我试图强制页面在特定时间用 js 刷新，在四处挖掘后我找到了下面的脚本。但是，它似乎没有考虑时区。我将如何实施？

```
<html>
<head>
<title></title>
<script type="text/javascript">
function refreshAt(hours, minutes, seconds) {
    var now = new Date();
    var then = new Date();

    if(now.getHours() > hours ||
       (now.getHours() == hours && now.getMinutes() > minutes) ||
        now.getHours() == hours && now.getMinutes() == minutes && now.getSeconds() >= seconds) {
        then.setDate(now.getDate() + 1);
    }
    then.setHours(hours);
    then.setMinutes(minutes);
    then.setSeconds(seconds);

    var timeout = (then.getTime() - now.getTime());
    setTimeout(function() { window.location.reload(true); }, timeout);
}

refreshAt(15,06,0); //Will refresh the page at 3:06pm
</script>
</head>
<body onLoad="setInterval('getCurrentTime()', 1000);">
<div id="time"></div>
content
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:51:08.877

在这里，每个用户都将完全按照您在脚本的全局变量中定义的重新加载：

**编辑！！！**我的代码有错误，所以我更新了脚本......

**编辑**工作示例：
[http ://simplestudio.rs/yard/tinediffredir/content.html](http://simplestudio.rs/yard/tinediffredir/content.html)

```
<html>
    <head>
        <title>Chk diff and reload if match</title>

        <script>

            var reload_time = "15060"; // this is 15:06:00 - change to desired reload time
            var reload_hour_diff = 15; // for cheking diff - change to desired hours
            var reload_minute_diff = 6; // for cheking diff - change to desired minutes
            var time_zone_offset = "-5"; // globally looking from GMT time, change this according to DST

            var reload_time_checker = setInterval(function(){reload_page()},300);
            var diff = null;

            function chk_reload_moment(offset) {

                dat = new Date();

                utc = dat.getTime() + (dat.getTimezoneOffset() * 60000);

                default_date = new Date(utc + (3600000*offset));

                var default_year = default_date.getFullYear();
                var default_month = default_date.getMonth();
                var default_day = default_date.getDate();
                var default_hour = default_date.getHours();
                var default_minutes = default_date.getMinutes();
                var default_seconds = default_date.getSeconds();

                user_date = new Date();

                var user_year = user_date.getFullYear();
                var user_month = user_date.getMonth();
                var user_day = user_date.getDate();
                var user_hour = user_date.getHours();
                var user_minutes = user_date.getMinutes();
                var user_seconds = user_date.getSeconds();

                user_current = user_hour+""+user_minutes+""+user_seconds;

                default_current_f = default_day+"/"+default_month+"/"+default_year+" "+default_hour+":"+default_minutes+":"+default_seconds;
                user_current_f = user_day+"/"+user_month+"/"+user_year+" "+user_hour+":"+user_minutes+":"+user_seconds;

                var timeEnd = new Date(user_current_f);
                var timeEndH = timeEnd.getHours();
                var timeEndM = timeEnd.getMinutes();

                var new_reload_minute_diff = 60+reload_minute_diff;
                diff = (timeEndH - reload_hour_diff + 12) + " hours " + (new_reload_minute_diff - timeEndM) + " minutes";    

                if (user_current == reload_time) {

                    return true;

                }
                else {

                    return false;

                }

            }

            function reload_page() {

                var chktime = chk_reload_moment(time_zone_offset);
                if (chktime) {

                    window.location.reload();

                }
                else {

                    var timer_div = document.getElementById('timer');
                    timer_div.innerHTML = "remaining: " + diff + " until new content";

                }

            }

        </script>

    </head>
    <body>

        <div id="timer">

        </div>

    </body>
</html> 
```

我认为如何配置它很清楚，但是如果您有一些问题，请随时询问...

# javascript - 在重定向到结果页面之前加密搜索框文本客户端

> ID：12786559
> 
> 赞同：0
> 
> 时间：2012-10-08T17:27:49.503
> 
> 标签：javascript, jquery, asp.net, webforms

我正在处理一个正在经历 UI 更改的现有应用程序，并且我正在尝试将搜索框功能移动到客户端。目前，搜索框有一个搜索按钮，OnClick 触发一个服务器端方法，该方法查看搜索框中的文本，将其设置为搜索结果 url 的查询字符串并重定向到该 url。因为搜索框中的数据是敏感的，所以查询字符串值在重定向之前在服务器端进行了加密。

现有的代码是这样的：

```
<asp:TextBox ID="txtSecretSearch" runat="server" Placeholder="Secret Search"/>
<asp:Button ID="btnSearch" Text="Search" OnClick="btnSearch_Click" runat="server" />

protected void btnSearch_Click(object sender, EventArgs e)
  {
    if(txtSecretSearch.Text.ToLower() != "secret search" && !string.IsNullOrEmpty(txtSecretSearch.Text))
        Response.Redirect("~/SecretSearchResults.aspx?secret=" + Encryption.EncryptForQueryString(txtSecretSearch.Text));
    else
        Response.Redirect("~/SecretSearchResults.aspx");
} 
```

现在新的 UI 设计取消了搜索按钮。我可以将其移至客户端并实现相同的功能吗？我正在考虑使用 jquery 来监听 enter 键，然后使用类似的东西重定向：

```
$("#txtSecretSearch").keyup(function(event){
    if(event.keyCode == 13){
        window.location = "~/SecretSearchResults.aspx?secret=" + SomeWayToEncrypt($("txtSecretSearch").val());
    }
}); 
```

这样做有意义吗？如果是这样，加密客户端的好方法是什么。如果没有，当按下 Enter 键时如何触发服务器端方法。（注意：我确实尝试使用 asp:Panel 并使用默认按钮并将其设置为现有按钮后将其可见性为 false。这只适用于 Firefox，我需要它在 chrome、ff 和 IE 7 及更高版本中工作.)

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T10:10:50.030

除了设置 window.location 之外，您还可以触发 PostBack: `__doPostBack("<%= YourButtonID.ClientID %>", "");`... 这样您就不必在客户端上加密任何内容。

# sql - SQL Server 代理在哪里保存作业？

> ID：12786563
> 
> 赞同：9
> 
> 时间：2012-10-08T17:27:59.223
> 
> 标签：sql, sql-server, restore, sql-server-agent

我的服务器已关闭，我只能从中获取硬盘。我找到了我的数据库并复制了它，但我在哪里可以找到代理工作？他们在哪里得救？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-08T19:46:21.327

在 MSDB 数据库中，作业存储在名为 dbo.sysjobs 的表中。这将连接到一个名为 dbo.sysjobsteps 的表，该表存储各个步骤的详细信息。计划存储在 dbo.sysjobschedules 中，历史存储在 dbo.sysjobhistory 中。

MSDB 还将包含其他实例级对象，例如警报、运算符和 SSIS 包。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2012-10-08T17:33:41.587

作业存储在[`msdb`数据库](http://msdn.microsoft.com/en-us/library/ms187112.aspx)中。您将不得不恢复它。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-03-02T13:46:50.197

让我展示以下精彩的[SQL 查询](https://serverfault.com/questions/14524/get-a-list-of-sql-server-agent-jobs/53103#53103)，向我们展示 SQL Server 存储 SQL 作业的位置和方式。

```
-- List of all the SQL Jobs on a server with steps
SELECT
     job.job_id,
     notify_level_email,
     name,
     enabled,
     description,
     step_name,
     command,
     server,
     database_name
FROM
    msdb.dbo.sysjobs job
INNER JOIN 
    msdb.dbo.sysjobsteps steps        
ON
    job.job_id = steps.job_id
WHERE 1=1
    --AND job.enabled = 1 -- uncomment this to see enabled SQL Jobs 
```

我还删除了“msdb”。查询中的前缀以查看从备份恢复的 msdb 数据库中的 SQL 作业。

# facebook - 与 SLComposeViewController 最接近的 iOS 5 兼容等效项？

> ID：12786565
> 
> 赞同：0
> 
> 时间：2012-10-08T17:28:12.763
> 
> 标签：facebook, ios5, ios6, slcomposeviewcontroller

我正在使用[SLComposeViewController](http://developer.apple.com/library/ios/#documentation/NetworkingInternet/Reference/SLComposeViewController_Class/Reference/Reference.html)在 iOS 6 上的 Facebook 上发帖。为了获得一致的用户体验并节省开发时间，是否有任何现有的代码片段或库与 SLComposeViewController 在 iOS 5 中具有相似的行为和感觉？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-09T06:49:18.917

使用 DETweetComposeViewController，它看起来类似于 SLComposerViewController 并且与 ios 6 兼容。检查这个[http://www.developers-life.com/facebook-compose-view.html](http://www.developers-life.com/facebook-compose-view.html) 这可能会对你有所帮助。

# youtube - 上传到 YouTube 并在 excel 中获取上传的 URL

> ID：12786568
> 
> 赞同：1
> 
> 时间：2012-10-08T17:28:23.920
> 
> 标签：youtube

我有一个包含 50 个视频的列表。将视频上传到 YouTube。上传后，我需要在 Excel 电子表格中包含视频所在的 URL。不想手动操作.. 有什么自动的方法吗？使用 YouTube API？还是没有？

# asp.net - 具有单个应用程序池的两个网站共享资源

> ID：12786573
> 
> 赞同：2
> 
> 时间：2012-10-08T17:28:44.493
> 
> 标签：asp.net, iis, application-pool, virtual-directory

是否可以让两个 Web 应用程序项目（一个主网站和一个在虚拟目录中运行，例如管理站点）共享同一个应用程序池，以允许在后端共享内容，例如静态列表、会话状态等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:55:19.987

一个快速的谷歌搜索出现了这个相关的问题[IIS App Pools & Static Classes](https://stackoverflow.com/questions/11071067/iis-app-pools-static-classes)，答案是这两个网站仍然在不同的 AppDomains 中并且不会共享静态实例。

如果您需要在 Web 应用程序之间共享数据，最好为两个网站设置共享数据库/服务以进行通信。这也将更好地遵守最佳实践。

# xcode - 将 Facebook SDK 从 3.0 升级到 3.1 的问题

> ID：12786575
> 
> 赞同：0
> 
> 时间：2012-10-08T17:28:50.620
> 
> 标签：xcode, facebook, facebook-graph-api, ios6

我有一个使用 Facebook SDK 3.0 的项目，我在 Xcode 4.3.2 中构建了它。我现在必须将项目更新到 Xcode 4.5，这还需要我将 Facebook SDK 更新到 3.1。当我在 Xcode 4.5 中运行该项目（不做任何更改）时，它会构建并且我可以连接到 Facebook，但是当我尝试在装有 OS 6 的 iPhone 上运行它时，我会收到构建失败的消息。所以，我浏览了 FB 开发者网站上的所有教程，并更改了他们突出显示的代码，但是当我放入新代码时，我得到了各种错误。Xcode 不知道我在说什么了。例如，我将之前的通用权限代码更改为下面的“读取”权限代码：

```
- (BOOL)openSessionWithAllowLoginUI:(BOOL)allowLoginUI {
return [FBSession openActiveSessionWithReadPermissions:nil
        allowLoginUI:allowLoginUI
            completionHandler:^(FBSession *session,
                                FBSessionState state,
                                    NSError *error) {
                                         [self sessionStateChanged:session
                                            state:state
                                            error:error];
                                     }];
} 
```

我得到错误，“选择器没有已知的类方法......”

值得注意的是，我打开了一个新的 Xcode 项目并排练了从头开始输入 facebook SDK 和所有代码，并且运行良好。所以我的问题是，我如何更新我已经存在的应用程序以使用新的 SDK ！！？？非常感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:44:57.890

我刚刚回答了我自己的问题，SDK 只是旧版本。以为我更新了它，但显然没有！

# c++ - 无符号整数背后的想法

> ID：12786579
> 
> 赞同：2
> 
> 时间：2012-10-08T17:28:58.227
> 
> 标签：c++, unsigned-integer

> **可能重复：**
> [如果我为无符号变量分配负值会发生什么？](https://stackoverflow.com/questions/2711522/what-happens-if-i-assign-a-negative-value-to-an-unsigned-variable)

我是 C++ 新手，我想知道如何使用无符号类型。对于`unsigned int`类型，我知道它可以取 0 到 4294967296 之间的值。但是当我想初始化一个 unsigned int 类型时，如下所示：

```
unsigned int x = -10;
cout << x; 
```

输出看起来像`4294967286` The got this `output = max value - 10`。所以我想了解内存中发生了什么？在此计算继续进行时，正在执行哪些过程？感谢您的回答。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T17:40:23.723

您遇到环绕行为。

无符号类型是循环的（另一方面，有符号类型可能是循环的，也可能不是循环的，但它是您不应该依赖的未定义行为）。也就是说，比最小可能值小一是最大可能值。您可以使用以下代码段自己演示这一点：

```
int main()
{
    unsigned int x = 5;
    for (int i = 0; i < 10; ++i) cout << x-- << endl;
    return 0;
} 
```

您会注意到，在达到零后，x 的值会跳到 2^32-1，即最大可表示值。减去进一步的行为符合预期。

当您从无符号 0 中减去 1 时，位模式会以下列方式发生变化：

```
0000 0000 0000 0000 0000 0000 0000 0000 // before (0)
1111 1111 1111 1111 1111 1111 1111 1111 // after  (2^32 - 1) 
```

对于无符号数，负数被视为从零减去的正数。所以`(unsigned int) -10`会相等`((unsigned int) 0) - ((unsigned int) 10)`。

我喜欢将其视为无符号整数，它是高精度任意值的最低 32 位。像这样：

```
v imaginary high order bit
1 0000 0000 0000 0000 0000 0000 0000 0000 // before (2^32)
0 1111 1111 1111 1111 1111 1111 1111 1111 // after  (2^32 - 1) 
```

在这些溢出情况下，unsigned int 的行为与从 256 中减去 1 时 unsigned int 的低 8 位的行为完全相同。像这样查看 unsigned char（1 字节）更有意义，因为如果转换为 0 和 256 值是相等的`unsigned char`，因为有限的精度会丢弃额外的位。

```
0 0000 0000 0000 0000 0000 0001 0000 0000 // before (256)
0 0000 0000 0000 0000 0000 0000 1111 1111 // before (255) 
```

正如其他人指出的那样，这称为模运算。使用更高的精度值来帮助可视化环绕工作时所做的转换，因为您屏蔽了高阶位。它是什么并不重要，所以它可以是任何东西，它只是被丢弃。整数是超过模 2^32 的值，因此 2^32 的任何倍数在整数空间中都为零。这就是为什么我可以假装最后还有一点点。

模运算有自己的专用运算符，以防您需要在程序中为 2^32 以外的数字计算它们，如以下语句所示：

```
int forty_mod_twelve = 40 % 12;
// value is 4: 4 + n * 12 == 40 for some whole number n 
```

对 2 的幂（如 2^32）的模运算直接简化为屏蔽高阶位，如果你取一个 64 位整数并以 2^32 为模计算，则该值将与转换后的值完全相同到一个无符号整数。

```
01011010 01011100 10000001 00001101 11111111 11111111 11111111 11111111 // before
00000000 00000000 00000000 00000000 11111111 11111111 11111111 11111111 // after 
```

程序员喜欢使用这个属性来加速程序，因为很容易砍掉一些位数，但是执行模运算要困难得多（它和除法一样难）。

那有意义吗？

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T17:34:02.697

这涉及标准的积分转换。这是适用的规则。我们从字面量的类型开始`10`：

> ## 2.14.2 整数文字 [lex.icon]
> 
> 整数文字是没有句点或指数部分的数字序列。整数文字可能有一个指定其基数的前缀和一个指定其类型的后缀。数字序列的词汇第一个数字是最重要的。十进制整数文字（以十为基数）以除十进制数字之外的数字开头`0`并由十进制数字序列组成。八进制整数文字（以八为基数）以数字开头`0`，由一系列八进制数字组成。十六进制整数文字（以16 为基数）以`0x`or开头`0X`并由一系列十六进制数字组成，其中包括十进制数字和字母`a`。`f``A``F`十到十五的十进制值。[ 示例：数字十二可以写成`12`、`014`或`0XC`。—结束示例]
> 
> 整数文字的类型是表 6 中可以表示其值的相应列表中的第一个。

下面是一个表格，第一个类型是`int`并且它适合。所以文字的类型是`int`.

应用一元减号运算符，它不会更改类型。然后应用以下规则：

> ## 4.7 积分转换[conv.integral]
> 
> 整数类型的纯右值可以转换为另一种整数类型的纯右值。无作用域枚举类型的纯右值可以转换为整数类型的纯右值。
> 
> 如果目标类型是无符号的，则结果值是与源整数一致的最小无符号整数（模 2 ^n，其中 n 是用于表示无符号类型的位数）。[ 注意：在二进制补码表示中，这种转换是概念性的，位模式没有变化（如果没有截断）。——尾注]

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:35:29.147

不要按你的方式打印值，而是以十六进制格式打印它（对不起，我忘记了如何用 cout 做到这一点，但我知道这是可能的）。您会看到这两个值的表示是相同的。

根据您的上下文，整数是 32 位（并非总是如此）。使用有符号整数时，最高有效位是符号，而不是值的一部分。使用无符号整数时，最高有效位是值的一部分。

# c - 如何将十进制ascii字符串转换为C中的整数数组？

> ID：12786580
> 
> 赞同：1
> 
> 时间：2012-10-08T17:28:57.890
> 
> 标签：c, string, int, ascii, int128

我编写了一个处理 IPv6 地址的程序，我需要将四整数数组转换为表示 IPv6 地址数的十进制字符串的代码[1]。现在我遇到了需要进行反向操作的情况：将表示为单个字符串的可能较大的数字（不适合`uint32_t`or `uint64_t`，所以`atol()`or在这里无能为力）转换为四整数或( ) 数组（我将函数从 [ 1] 从 4-int 到变量-uint8_t)。`strtol()``byte``uint8_t`

有没有办法做到这一点？

[1][如何在 C 中将 128 位整数转换为十进制 ascii 字符串？](https://stackoverflow.com/questions/8023414/how-to-convert-a-128-bit-integer-to-a-decimal-ascii-string-in-c)

谢谢。这是我在这里的第一个问题，如果有的话，很抱歉英语不好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T10:04:16.273

这是推荐使用库时的情况。

使用[GMP](http://gmplib.org/)，您可以进行以下转换 (gmp.c)：

```
#include <stdio.h>
#include <stdlib.h>
#include <gmp.h>

int main(int argc, char *argv)
{
  // From string
  char *s ="199999999999999999999999999999999999999";
  mpz_t i;
  // To big number, using GMP
  // 10 here means base 10.
  mpz_init_set_str(i, s, 10);
  // Just to test if s is 128 bits long
  printf("%s can be represented with %d digits in base 2\n",s, mpz_sizeinbase(i, 2));
  // Then you can print it in hex
  gmp_printf("%#32ZX\n", i);
  // Or convert it back to int[4]
  unsigned int a[4];
  mpz_export(&a, NULL, 1, 4, 0, 0, i);
  for(int x=0;x<4;x++)
      printf("%X\n", a[x]); 
  mpz_clear(i);
  return 0;
} 
```

输出：

```
199999999999999999999999999999999999999 can be represented with 128 digits in base 2
0X96769950B50D88F41314447FFFFFFFFF
96769950
B50D88F4
1314447F
FFFFFFFF 
```

我在 32 位 Linux 系统上测试了这段代码。请注意不同平台上不同的 int 大小和字节序。您可能想要大端的结果，如果是这样，只需将 mz_export 更改为：

```
mpz_export(&a, NULL, 1, 4, 1, 0, i); 
```

要编译示例，不要忘记安装 gmp 并在 gcc 命令行参数上添加 -lgmp -std=c99。

在 Ubuntu 上，您可以使用以下命令安装 gmp：

```
sudo apt-get install libgmp-dev 
```

并编译示例 gmp.c：

```
gcc gmp.c -o gmp -lgmp -std=c99 
```

此代码可以成为您转换的良好开端。您还可以将 i 初始化为固定的 128 位数字（使用 GMP 的 init 函数），以防万一您的大数字以零开头。

# r - 重塑多维数组

> ID：12786584
> 
> 赞同：5
> 
> 时间：2012-10-08T17:29:12.033
> 
> 标签：r, multidimensional-array, reshape

我有一个表示每小时温度数据的数组，并且想要计算每日最大值（或最小值，或平均值）。我可以使用 for 循环来做到这一点，但我确信在 R 中必须有很多更好的方法来做到这一点。

```
require(ncdf4)
nc <- nc_open('file.nc')
t2 <- ncvar_get(nc,var='T2')  # [ncols, nrows, nsteps] 
```

现在 t2 是一个数组，包含 31 天月份的 744 小时时间步长。我想要的是：

```
t2.max[ncols, nrows, 31] 
```

或者，更一般地说，我想将 t2 重塑为：

```
t2.reshape[ncols, nrows, ndays, 24] 
```

从那里我可以使用 apply 来计算每日均值或最大值或其他任何东西。

我希望结果是一个数组，而不是一个数据框。

建议？我尝试使用 reshape 包中的熔化/铸造，但不明白如何指定所需的公式。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-08T17:45:30.913

如果 t2 是一个具有 31 天月份的 744 小时时间步长的数组”，那么它有 744 行和其他维度？（您没有告诉我们 ncol 是 744 还是 nrow 是 744。我们假设它是 nrow）

```
 array( tc, , dim =c( 31, 24, nrows,  ncols) ) 
```

另一方面，如果它是 [nrow,ncols,744]，您可以使用 aperm 对其进行重铸，其中的行如下所示：

```
 array( aperm(tc, c(3,1,2)) , dim =c( 31, 24, nrows,  ncols) ) 
```

有一个包有一个“rowMax”和一个“rowMin”函数，它会给你一个你不需要发明的矢量化方法。（它位于 Bioconductor 存储库的 Biobase 包中。）

# rcp - 如何在热情中将大文本放入自定义图形中

> ID：12786585
> 
> 赞同：1
> 
> 时间：2012-10-08T17:29:16.697
> 
> 标签：rcp, zest

我有一个巨大的文本，我必须以热情的方式在一些客户图中显示。文本没有特定的长度。我应该如何创建自定义图形或标签来包含文本。

# php - 设置根目录以访问子文件夹中的文件？

> ID：12786588
> 
> 赞同：0
> 
> 时间：2012-10-08T17:29:21.190
> 
> 标签：php, html, localhost, document, root

我正在尝试在我的本地主机上创建一个根目录（使用 xampp），以便我可以从子文件夹链接到在根目录上找到的图像和文件夹。所以我的目录如下所示。

另外，当网站上传到网络上时，这种方法会起作用吗？还是我必须将文档根目录更改为 http:// 链接到我的网站？

F = 文件夹 f = 文件

```
My Site
-------
[f] index.html
[f] logo.html
[F] css -> [f] main.css
[F] news -> [F]1 -> [f] 1.html
[F] images -> [f]logo.jpg 
```

logo.html 将使用 PHP 包含在每个 html 页面上。因此，如果我在 index.html 和 news/1/1.html 中都包含 logo.html，则指向图像的链接不起作用，因为新闻文件位于不同的文件夹中，并且指向图像文件夹的链接发生了变化。

我用PHP试过这个，但似乎我做错了：

```
<?php $root = $_SERVER['DOCUMENT_ROOT'].'/My Site/'; echo $root .'/images/logo.jpg';
?> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:33:29.457

`$_SERVER['DOCUMENT_ROOT']`为您提供真正的文件系统路径，而不是 Apache 返回的路径。

要链接到您需要使用 HTTP 路径的资源。如果你想从根链接，你只需要类似的东西`/images/logo.jpg`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-03-31T11:53:51.347

我发现在`PHPBB3.1`使用“页面”插件的驱动网站上，相对链接在我网站顶部的某些链接按钮中不会保持“静态”。

从`PHPbb3`索引页面中，诸如 app.php/page/FT 之类的链接会生成一个地址`http://earth/forum/app.php/page/FT`（正确），但从“添加页面”中，该链接会生成`http://earth/forum/app.php/page/app.php/page/FT`（不正确）。

我开始寻找一种方法来设置我的页面相对于网络的根目录。我不能使用绝对链接，因为我的网站被复制到其他服务器上。我通过反复试验找到了答案。只需像这样添加几个 ../../../ ../../../forum/app.php/page/FT 就可以了。

也许不是最好的计算机编程，但它可以完成这项工作。简而言之，每个 ../ 后退一个目录，放入太多目录，它会回到根目录，但不能再往前退了！

# c# - 文本文件中的 Â¿ 是什么

> ID：12786590
> 
> 赞同：1
> 
> 时间：2012-10-08T17:29:22.980
> 
> 标签：c#, encoding, character

我正在开发一个处理一堆文本文件的 C# 程序。这些文件是由系统创建的，因此我无法更改源，但在文件中 ¿ 出现多次，这导致我的代码崩溃。

Â¿ 是什么意思，我该如何处理？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:43:11.267

Unicode 编码文件的开头是一个“标题”。此标头告诉读取它的程序它是一个 Unicode 文件。这称为“字节顺序标记”，向读者表明它是什么类型的 Unicode。 [http://msdn.microsoft.com/en-us/library/windows/desktop/dd374101(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/dd374101(v=vs.85).aspx)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T17:37:17.320

Â¿ 表示您有一个从另一种编码类型转换而来的字符，并且在您的编码类型的字符表中无法识别。如果您使用其他编码类型，您可以处理它。

[文档](http://msdn.microsoft.com/en-us/library/system.text.encoding.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:43:08.253

为了详细说明我的评论，首先您应该找出创建这些时使用的编码，然后在读取它们时使用该编码。查看：

```
BinaryReader(Stream, Encoding) 
```

[http://msdn.microsoft.com/en-us/library/system.io.binaryreader.aspx](http://msdn.microsoft.com/en-us/library/system.io.binaryreader.aspx)

# mysql - MySQL返回逆？搜索结果或结果不包含

> ID：12786598
> 
> 赞同：2
> 
> 时间：2012-10-08T17:30:04.430
> 
> 标签：mysql, select, key, where-clause

这里复杂吗？（至少对我来说）。我有一个名为 的表`tickets`，`id`列是唯一键。我有另一个名为 的表`Labels`，它没有唯一键（从外观上看）。在`Tickets`我们存储门票信息（消息，谁制作门票等）。我们可以在创建工单时为其添加标签，以便我们可以搜索具有这些标签的工单，例如“稍后查看”。

我正在尝试做的是反向类型查询，例如向我显示所有没有与之关联的特定标签的票，例如不要向我显示任何带有“稍后查看”的票。如果票没有任何标签，则标签表中没有任何内容。我无法手动或使用查询构建器编写任何类型的查询。

我是我的图像，你可以看到`Tickets.id`它有 174 个，它也显示在`Labels.ticket_id 174`它上面设置了 2 个标签。

![](../Images/7b04f5637999b59b0d4eff0db00cf295.png)

无论我尝试什么查询、加入、执行、不执行等，我要么没有得到任何结果，要么由于某种奇怪的原因，我仍然会`ticket 174`出现。

这是我尝试过的最简单的查询......但是，我想我已经尝试了大约 30 次迭代，从简单到非常复杂。

```
SELECT tickets.id
FROM
  tickets, labels_tickets
WHERE
  tickets.id <> labels_tickets.ticket_id
GROUP BY
  tickets.id 
```

任何人都可以提出为什么这不起作用或想出任何方法来建立一个声明：

显示标签表中没有标签“MyLabel”或根本没有值的所有tickets.id。

非常感谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:35:32.303

```
 SELECT tickets.id 
    FROM 
      tickets 
    WHERE 
      tickets.id NOT IN (SELECT ticket_id from labels_tickets where labels_tickets.label = 'out of hours' or labels_tickets.label = null) 
    GROUP BY 
      tickets.id 
```

试试这个，我认为它会工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:31:56.787

您可以执行 a并仅选择表中未找到`outer join`的票证。`ticket_id``labels_tickets`

```
SELECT t.id
FROM tickets t
LEFT OUTER JOIN labels_tickets l ON t.id = l.ticket_id
WHERE l.ticket_id IS NULL
GROUP BY t.id
HAVING sum(l.label = 'review later') = 0 
```

请参阅[此 JOIN 示例](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:35:11.627

以下获取所有没有 ReviewLater 标签的工单：

```
SELECT lt.ticket_id
FROM labels_tickets
group by lt.ticket_id
having sum(case when label = 'ReviewLater' then 1 else 0 end) = 0 
```

这会将所有标签视为一个组。总和计算具有所需标签的数字。你想要这个计数为 0 的那些。

我强烈建议对此类集合成员类型查询使用`group by`and `having`。它很容易推广到标签存在或不存在的任意组合。

# asp.net-mvc - asp.net MVC 浏览文件夹路径

> ID：12786602
> 
> 赞同：0
> 
> 时间：2012-10-08T17:30:21.293
> 
> 标签：asp.net-mvc, asp.net-mvc-3

我正在尝试找出 MVC3 表单中的最佳方式是在您浏览文件夹路径而不是文件的表单上进行输入。

如果这是一个文件，我会做这样的事情，但文件夹的等价物是什么？

```
MODEL
public HttpPostedFileBase File { get; set; }
VIEW
@Html.TextBoxFor(m => m.File, new { type = "file" }) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:44:12.377

文件夹没有 HTML 输入（仅适用于单个文件）。

请参阅[如何将文件夹作为 html 中的输入？](https://stackoverflow.com/questions/1837759/how-to-take-folder-as-a-input-in-html) 另请参阅[WC3 表格](http://www.w3.org/TR/html4/interact/forms.html#file-select)

# php - 如何使用 RedBeanPhp 批量插入？

> ID：12786605
> 
> 赞同：6
> 
> 时间：2012-10-08T17:30:36.113
> 
> 标签：php, orm, redbean

我希望有一个关于如何在 readbeanphp 中批量插入新“bean”而不循环每个实例的示例。

它在这里显示了一个创建和保存 bean 的示例：[http ://redbeanphp.com/manual/create_a_bean](http://redbeanphp.com/manual/create_a_bean)

它提到了 storeAll($beans) 方法，但我不确定我应该如何格式化 $beans 中的数据。

我已经尝试对此进行谷歌搜索，但找不到与批量插入相关的任何内容。也许我搜索了错误的术语。

我是这个 ORM 的新手，任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-09T05:02:53.083

You are definitely right on track. Create a new bean using `$bean=R::dispense('bean');` or multiple beans as an array `$beans=R::dispense('bean',5);`

Then you populate the beans with data:

```
$bean->title='Hello World!';
//or with an array
$beans[0]->title='Hello World!';
$beans[1]->title='Hello World! Bean 1';
//etc 
```

Then store the bean(s):

```
R::store($bean);
//or
R::storeAll($beans); 
```

All the beans must be the same type if you have multiples as far as I know, so you can do something like:

```
$beans=array();
$beans[]=R::dispense('bean');
$beans[]=R::dispense('bean');
$beans[0]->title='Hello World!';
$beans[1]->title='Hello World!1';
R::storeAll($beans); 
```

I could be wrong about that though. The main thing is that this is all a typical ORM, but redbean also supports regular SQL if you need to use it. Hope that helps!

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-07-15T20:59:40.243

这种方法背后的一些真实数据。第一种方法。foreach 找到的项目

```
$bean = R::dispense('bean');
$bean->title = "hello";
R::store("bean"); 
```

在我的 Mac 上 5660 行花费的时间 = 43 秒

第二种方法。

```
$beans=array();
$beans[]=R::dispense('bean');
$beans[]=R::dispense('bean');
$beans[0]->title='Hello World!';
$beans[1]->title='Hello World!1';
R::storeAll($beans); 
```

对于 5660 行，46s。storeAll 是一直存在的地方。所以储存这些豆子需要很长时间。

第三种方法

```
$beans=R::dispense('bean',5560);

for loop
  $bean[$i]->title = "hello world";
end for

R::storeAll($beans); 
```

对于 5660 行 45s。结果。这些方法都不是更快。: ( RedBean Transactions 似乎也没有让这变得更快

来自 RedBean 的创建者[https://stackoverflow.com/a/18811996/445492](https://stackoverflow.com/a/18811996/445492)不支持批量插入，使用纯 sql。

第四种方法

```
for loop
  R::exec("insert into bean(title) values (1,'hello world')");
end for 
```

对于 5660 行 7.3s <----- WOW（请注意：我实际上在做一些事情，所以所有这些结果都是 -4.3 秒。）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-03-11T11:29:20.917

因此，需要先创建每个 bean，然后分配创建 bean 的方法

```
$bean = R::dispense('customers');
$bean->name = "John";
R::store($bean);
$bean->name = "Walter"
R::store($bean); 
```

即使在存储之后，上面的代码也只创建一个 bean。仍然 $bean 引用同一个对象，因此对于每个记录，您必须使用dispens方法创建一个新的。

幸运的是，我们有存储所有 bean 的 storeAll 方法，但它需要一个 bean 数组。因此，我们在每次迭代中创建一个 bean 并将其推送到数组中，然后在循环结束时，我们将该数组传递给 storeAll 函数。

```
//create empty array 
$beans = array();   

//for each customer post create a new bean as a row/record          
foreach ($post as $customer) {
     $bean = R::dispense('customers');
     //assign column values 
     $bean->firstName = $customer['first_name'];
     $bean->lastName = $customer['last_name'];
     //push row to array
     $beans[] = $bean;
 }

 //store the whole array of beans at once               
 R::storeAll($beans); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-10-29T22:43:08.157

在 John Ballinger 建议的方法 1、2 和 3 中，优化运行时间的一种方法是将 storeAll($beans) 执行的所有插入放在一个数据库事务中。这可以按如下方式完成：将“R::storeAll($beans)”行替换为以下三行：

```
R::begin();
R::storeAll($beans);
R::commit(); 
```

当数组 $beans 很大时，这种方法显着减少了运行时间，并且不需要“显式”使用 SQL。

# ios - 顶点缓冲区大小的实际大小限制是多少？

> ID：12786609
> 
> 赞同：0
> 
> 时间：2012-10-08T17:31:07.047
> 
> 标签：ios, opengl-es-2.0, vertex-array

在 OpenGL 中，您通常通过使用顶点缓冲区获得更好的性能，甚至通过将许多对象放入同一个顶点缓冲区来获得更好的性能，这样就可以通过一次`glDrawArrays`调用来绘制大量顶点。

但是，这个的实际上限是多少？同一个缓冲区中有多少 MB 的顶点数据太多了？什么时候应该将一个顶点数组切割成两个单独的顶点数组？你怎么会知道这事？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:00:34.180

我知道这个答案可以被视为通用的，但我想它实际上取决于您使用的 GPU 和可用的 GPU 内存。

根据 OpenGL 规范，您可以处理的顶点数量没有硬性限制。

您可以在此处找到有关此主题的一些有用信息：

[在 ipad 上使用 opengl es 在 1 帧中最多可以绘制多少个三角形？](https://stackoverflow.com/questions/6175018/how-many-maximum-triangles-can-be-drawn-on-ipad-using-opengl-es-in-1-frame/6205784#6205784)

# javascript - 如何使用 Javascript 序列化多个表单并访问提交的数据？

> ID：12786610
> 
> 赞同：0
> 
> 时间：2012-10-08T17:31:06.243
> 
> 标签：javascript, jquery, forms, jquery-validate, each

我想制作一个通用表单验证脚本，在其中将表单的现有数据与提交的数据进行比较。**如果提交的数据与页面**加载时存在的数据不同，则验证将失败。

问题是如果一个人有多个表单，并且想要验证一个表单的现有数据。这是一个似乎非常接近工作但仍然不是的 JSFiddle：http: [//jsfiddle.net/aMUNh/33/](http://jsfiddle.net/aMUNh/33/)

**我认为这个 JSFiddle 的问题在于`$.each(function)`设置`existingData`JSON 对象。**

HTML：

```
<form id="form1">
<input name='form1name1' value='form1value1'>
<input name='form1name2' value='form1value2'>
<input id="1" type="submit" value='submit'>
</form>

<form id="form2">
<input name='form2name1' value='form2value1'>
<input name='form2name2' value='form2value2'>
<input id="2" type="submit" value='submit'>
</form> 
```

JS：

```
var existingData={}; //declaring the object to be cached
$("form").each(function(index){  
    existingData.id+=this.id;
    existingData.id.data+=$(this).serialize();
});
var id='form1';
document.write('existingData:'+existingData.id.data);

$('input [type=submit]').click(function(){
    var id='form'+this.id;
    var submittedData=$(this.form).serialize(); 
      if(submittedData==existingData.id.data){
      console.log('nothing changed');
      }
      else console.log('this form changed');       
});​ 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:37:25.233

问题在于数据引用的格式；只需使用表单的`id`. 你需要这样的东西：

```
var existingData = {}; //cached data
$('form').each(function(index){  
    existingData[this.id] = $(this).serialize();
});

$('form').submit(function(e){
    e.preventDefault(); // don't really submit for testing
    var form = this;
    var submittedData = $(form).serialize(); 
    var originalData = existingData[form.id];
    if (submittedData == originalData)
        console.log('nothing changed');
    else 
        console.log('this form changed');       
});​ 
```

# jquery - JQuery 滑动效果不起作用？

> ID：12786613
> 
> 赞同：1
> 
> 时间：2012-10-08T17:31:17.283
> 
> 标签：jquery, web-applications, javascript, client-side-scripting

对我来说 JQuery 滑动效果不起作用？我尝试了很多次，但没有任何反应。

我使用了最新版本的浏览器并在所有领先的浏览器中进行了测试，但没有任何响应。

html代码是：

```
<html>
<head>
<script src="http://code.jquery.com/jquery-1.8.2.js" type="text/javascript" >

</script>

<script type="text/javascript" >

$(function () {
    $("#slide_up_link").click(function () {
        $("#mydiv").slideUp("slow");
    });

    $("#slide_down_link").click(function () {
        $("#mydiv").slideDown("slow");
    });

    $("#toggle23").click(function () {
        $("#mydiv").slideToggle("slow");
    });

});

</script>
<style>
div#mydiv
 {
 border:  1px solid white;
  }

</style>

</head>

 <body>
 <button id="#slide_up_link">UP</ button>
   &nbsp;&nbsp;<buttonid="#slide_down_link">down</ button>&nbsp;&nbsp;

<button id="#toggle23">toggle</button>&nbsp;&nbsp;
 <div id="#mydiv" >
 <p>hai how are you </p><br>
  <p>i am fine </p><br>
 <p> bye</p><br>
  </div>
 </body>
 </html> 
```

但是当我点击按钮时没有任何反应。为什么？请简要解释一下，因为我是 JQuery 和 javascript 的新手。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:40:08.427

由于 HTML 属性，您的 jQuery 选择器不匹配`id="#id"`，它应该是`id="id"`。`#`是 CSS 选择器中的保留字符，例如`.`.
这是一个快速的小提琴：http: [//jsfiddle.net/v375N/2/](http://jsfiddle.net/v375N/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:44:27.087

这是-> [http://jsfiddle.net/2aLv4/](http://jsfiddle.net/2aLv4/)

只需要修复你的 HTML，JS 就可以了。

你不应该在你的 HTML id 中使用 # 并且还有一行是这样的

```
buttonid= 
```

这也应该解决。

# c++ - OpenCV：标准化太慢或者我做错了？

> ID：12786617
> 
> 赞同：1
> 
> 时间：2012-10-08T17:31:30.887
> 
> 标签：c++, opencv, matrix, normalization

我正在尝试规范化 OpenCV 中的一个矩阵，我这样做是这样的：

```
cv::Mat matrix = cv::Mat::zeros ( 3, 480000, CV_8UC1 );
cv::Mat matrix_norm = cv::Mat::zeros ( 3, 480000, CV_8UC1 );
...  // give values to matrix 
```

我阅读了“规范化”功能的文档，但无法完全理解如何为“alpha”和“beta”赋值。所以从例子中：

[http://docs.opencv.org/doc/tutorials/features2d/trackingmotion/harris_detector/harris_detector.html](http://docs.opencv.org/doc/tutorials/features2d/trackingmotion/harris_detector/harris_detector.html)

我是这样做的：

```
cv::normalize ( matrix, matrix_norm, 0, 255, NORM_MINMAX, CV_8UC1, Mat() ); 
```

但它在这里坠毁，我并不感到惊讶。我认为矩阵大小太大了，对吧？还是我在这里错误地进行了标准化？

有什么方法可以加快正常化？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:15:49.210

如果您通过编写自己的代码来规范化矩阵，这总是有用的。使用直方图对矩阵值进行归一化有助于自定义函数。它甚至比 OpenCV 提供的正常归一化函数更快。

# javascript - 计算值

> ID：12786618
> 
> 赞同：-4
> 
> 时间：2012-10-08T17:31:31.230
> 
> 标签：javascript, calculated-field

在订单表格中，每一行有 3 个字段：数量、价格、总计。

如何创建一个函数，在更改数字时计算小计，总计也是如此？

任何人都可以提出一种方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:42:52.880

您需要为每一行添加一个侦听器，以便在更新价格或数量时，您可以获得新的数量和价格并更新总计列。

在 jQuery 中，类似：

```
$('.row').on('change', function() {
    var quantity = $('.quantity', this).val(), // get the new quatity
        price = $('.price', this).val(), // get the new price
        total = price*quantity;
    $('.total', this).val(total);  //set the row total

    var totals = $.map($('.row .total'), function(tot) {
        return tot.val(); // get each row total into an array
    }).reduce(function(p,c){return p+c},0); // sum them
    $('#total').val(totals); // set the complete total
}); 
```

这假设每个订单行容器都有类`row`，每个数量都有类`quantity`，每行总计有类`total`并且订单总计有 id `total`。

# c++ - 未定义的引用 标准::字符串&

> ID：12786620
> 
> 赞同：1
> 
> 时间：2012-10-08T17:31:40.500
> 
> 标签：c++

> **可能重复：**
> [为什么在使用模板时会出现“未解析的外部符号”错误？](https://stackoverflow.com/questions/456713/why-do-i-get-unresolved-external-symbol-errors-when-using-templates)
> [对模板类函数的“未定义引用”](https://stackoverflow.com/questions/4368440/undefined-reference-to-a-template-class-function)

我在线出错：**Console::getInstance()->readObjectData(a);** 在 main.cpp

未定义的引用`void Console::readObjectData<std::string>std::string&)`

Console.h [http://pastebin.com/WsQR7JNq](http://pastebin.com/WsQR7JNq)

```
#define CONSOLE_H
#include <string>

using namespace std;

class Console
{
public:
    static Console* getInstance();

    template <typename T>
    void readObjectData(T& o);
protected:
private:
    Console();  // Private so that it can  not be called
    Console(Console const&);             // copy constructor is private
    Console& operator=(Console const&);  // assignment operator is private
    static Console* m_pInstance;

};
    #endif // CONSOLE_H 
```

Console.cpp [http://pastebin.com/N02HjgBw](http://pastebin.com/N02HjgBw)

```
#include "Console.h"
#include "Log.h"
#include <iostream>
#include <sstream>
#include <string>

using namespace std;

// Global static pointer used to ensure a single instance of the class.
Console* Console::m_pInstance = NULL;

Console::Console()
{

}

Console::Console(Console const&)
{

}

Console& Console::operator=(Console const&)
{

}

Console* Console::getInstance()
{
if (!m_pInstance)   // Only allow one instance of class to be generated.
    m_pInstance = new Console;

return m_pInstance;
}

template <typename T>
void Console::readObjectData(T& o) {
     //cin >> o;
} 
```

main.cpp [http://pastebin.com/U6qAJUN1](http://pastebin.com/U6qAJUN1)

```
#include "Console.h"

using namespace std;

int main()
{

    string a;

    Console::getInstance()->readObjectData(a);
    return 0;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:37:39.480

您不能在 .cpp 文件中定义模板<> 的函数。

移动

```
template <typename T>
void Console::readObjectData(T& o) {
     //cin >> o;
} 
```

到头文件。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T17:36:59.597

因为您没有将 readObjectData 的实现放在标头中，所以您需要提供该函数的显式特化 - 一个采用 std::string& 的函数。

这应该在 Console.cpp 中：

```
template <>
void Console::readObjectData(string& o) {
    //cin >> o;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T17:36:17.827

你没有实现这个方法。您必须在 .h 文件中为您的模板提供实现

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T17:36:59.700

您不能将模板方法实现放入其中，`Console.cpp`它必须出现在头文件中，或者您必须为`std::string`.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T17:46:23.893

在将一些 C++ 文件转换为输出（执行程序、共享库或...）的过程中，2 个工具将协同工作，首先是创建目标文件的编译器，然后是将这些对象转换为输出的链接器。您应该知道的是链接器与模板无关（除非在显式实例化的特殊情况下），模板将由编译器实例化，另一个注意事项是编译器与包含在该源文件中的每个源文件和头文件一起工作并忽略项目的所有其他文件。因此，当编译器想要编译`main.cpp`它时，看不到`readObjectData`因此它无法在目标文件中为该函数生成任何代码，并且当链接器想要链接对象以生成结果时，它将永远找不到该函数的实现！所以最简单的方法是将你的实现移动`readObjectData`到`.h`文件中，每件事都会按预期工作。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-08T17:38:05.733

模板化函数 (readObjectData) 的定义必须内联，而不是在 .cpp 文件中。当编译器看到带有模板化函数的类或模板化类时，它会复制整个类，其中包含新类型。因此，如果您将函数的定义粘贴在 .cpp 文件中，编译器将不知道实现在哪里，因为它不存在。

# c++ - 在 Mac 上单击主窗口时，QDialog as Popup 不会隐藏

> ID：12786621
> 
> 赞同：0
> 
> 时间：2012-10-08T17:31:42.993
> 
> 标签：c++, macos, qt

我有一个基本的 QDialog，它的 WindowFlags 设置为 Qt::Popup，因此它显示为典型的弹出窗口覆盖。在 Windows 上，一切正常，如果您在主窗口外或其他任何地方单击，它就会消失。但在 Mac OSX 上，如果您单击顶部的菜单栏或调整窗口大小，弹出窗口将停留在原处。我完全没有对弹出窗口的鼠标进入/离开/移动/按下事件进行内部处理，所以关闭它不是我什至处理的事情......它在 Windows 上只是自动的。

当主应用程序不再是系统上的当前上下文时，我可以让它关闭吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-26T09:01:38.933

您可以安装本机事件过滤器并在用户单击主窗口时关闭活动弹出对话框（QApplication::activePopupWidget()）。有关如何安装本机过滤器的信息，请参阅以下[答案。](https://stackoverflow.com/a/19231037/1779930)

# django - 从概念的角度来看，Django Haystack 文档=True

> ID：12786625
> 
> 赞同：1
> 
> 时间：2012-10-08T17:31:52.303
> 
> 标签：django, django-haystack

所以，我试图围绕“ `text = indexes.CharField(document=True, use_template=True)`”的概念来思考。从文档中：

> 每个 SearchIndex 都要求有一个（且只有一个）字段为 document=True。这向 Haystack 和搜索引擎指示哪个字段是在其中进行搜索的主要字段。

由于我看到的每个示例似乎都只是将这个“抛出”作为约定，“ `text = indexes.CharField(document=True, use_template=True)`”实际上是如何描述任何东西的呢？

1.  使用此约定时，引擎选择主要搜索模型中的哪个字段？

2.  `model_attr=desired_model_attr`这个字段不应该总是有a `text`，所以引擎实际上可以知道哪个model_attr是搜索的主要字段吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T20:55:27.680

经过进一步调查，我想我明白了 - 为可能有同样问题的其他人回答我自己的问题。

我相信我的困惑主要与`use_template=True`文档中的使用有关。当您使用模板时，您不需要`model_attr`在索引中设置 a，因为您在数据模板中描述了文档结构（以及您希望搜索的模型字段）。所以回答我的两个问题：

1.  因为您指定 use_template=True，所以您必须在数据模板中描述要搜索的模型字段。`use_template=True`如果您打算设置一个`model_attr`.

2.  看上面。

# windows - Windows 上的 tcsh：hashbang 文件支持

> ID：12786626
> 
> 赞同：1
> 
> 时间：2012-10-08T17:31:54.240
> 
> 标签：windows, tcsh, shebang

我在 Windows 上使用 tcsh 的预构建二进制 exe。

我正在尝试编写一些 clojure 脚本。像这样：

```
#!/usr/bin/env java clojure.main

(prn "Hello World!\n") 
```

首先我尝试在 tcsh 中直接运行它：

```
# cat test
#!/usr/bin/env java clojure.main

(prn "Hello World\n")
# ./test
# 
```

不走运：出现“选择正确的程序来打开此文件”窗口，但不执行它。

我正在尝试向它添加 +x mod：

```
# chmod +x test
# ls-F -l test
-rwxr-xr-x    1 SW       Administ       59 Oct  9 01:25 test*
# ./test 
```

还是一样 ：（

问题是：

*   Windows 上的 tcsh 预构建版本是否支持 hashbang？
*   如果是这样，如何让它用hashbang执行文件？

谢谢很多:-)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T04:37:55.100

我可以建议将您的程序编译为 uberjar 吗？jar 可以按名称执行，就像您的包装脚本一样，但这样您就不需要额外的包装。

下载最新版本的 leiningen 并创建一个项目`$ lein new foo`，然后进入该目录。在开发代码的过程中，您可能希望使用 repl ( `$ lein repl`)，或调用`$ lein run`以从命令行运行它。

编辑 src/foo/core.clj：添加一个用于 AOT 编译的 gen-class 和一个 main 函数。

```
 (ns foo.core
  (:gen-class)) 
```

```
 (defn -main [& [a]]
  (println (format "Hello, %s World!" a))) 
```

编辑 project.clj 并将其作为主类：

```
 (defproject foo "0.0.1"
  :description "FIXME: write description"
  :dependencies [[org.clojure/clojure "1.4.0"]]
  :main foo.core) 
```

现在编译 uberjar 并使其可执行：

`$ lein do clean, compile, uberjar ; chmod +x ./target/foo-0.0.1-standalone.jar`

可执行 jar 位于 target/ 目录中，您现在可以像任何其他可执行文件一样按名称调用它：

```
 $ cd target
$ mv foo-0.0.1-standalone.jar foo
$ ./foo crazy
Hello, crazy World!
$ ./foo
Hello, null World! 
```

## 其他方法

### Leiningen w/shebang

使用 leiningen shebang 风格[http://charsequence.blogspot.com/2012/04/scripting-clojure-with-leiningen-2.html](http://charsequence.blogspot.com/2012/04/scripting-clojure-with-leiningen-2.html)

### ClojureScript + V8 -> 带有 shebang 的 js

Clojure 并不是命令行脚本的最佳选择，因为 JVM 有预热时间。ClojureScript + V8 引擎被提出（在 Rich Hickey 的 ClojureScript 就职公告中）作为脚本编写的更好解决方案。这是带有详细示例的博客文章[http://mmcgrana.github.com/2011/09/clojurescript-nodejs.html](http://mmcgrana.github.com/2011/09/clojurescript-nodejs.html)这是一个 StackOverflow 答案，展示了如何在 shebang 中使用节点：[是否可以运行 Node.js不调用“节点”的脚本？](https://stackoverflow.com/questions/4806571/is-it-possible-to-run-node-js-scripts-without-invoking-node)

但是，由于您的目标似乎是没有编译步骤，因此您可能需要编写一个脚本，您将在 shebang 中使用该脚本，在运行之前从 cljs 构建 js。在这种情况下，您将再次遇到相同的 JVM 启动时间问题，因此使用上面链接的 Debasish 更简单的方法可能会更好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-10-06T14:34:40.027

这个聚会有点晚了:-)。

要回答有关 Windows 上的 hashbang 支持的直接问题：Widows 上的预构建 tcsh 有一个`TCSHSUBSTHB`可以设置的环境变量。在 README.NT 中，它被描述为：

> 指定 hashbang 仿真的映射。应该是 ';' - 分隔的空格分隔映射对。例如，
> 
> ```
>  setenv TCSHSUBSTHB "/usr/local/bin/perl c:/bin/perl.exe;" 
> ```
> 
> 将替换顶部`#!c:/bin/perl.exe`的脚本。`#!/usr/local/bin/perl`
> 
> 最后的';' 必须包括在内。

例如在我的 .tcshc 我有

> ```
> setenv TCSHSUBSTHB "/usr/bin/tclsh j:/Tcl/bin/tclsh84.exe;" 
> ```

如果您可以`#!/usr/bin/java`在此脚本的顶部放置，那么您可以使用`TCSHSUBSTHB`映射到您的 Windows `java.exe`。

解决此问题的另一种方法是使用 Cygwin 的 tcsh，它更像 Unix，支持 hashbang。

# jquery - JQueryUI Tab 控件不会自行刷新

> ID：12786631
> 
> 赞同：0
> 
> 时间：2012-10-08T17:32:12.930
> 
> 标签：jquery, jquery-ui, jquery-ui-tabs

我正在使用 JqueryUi 选项卡控件，并且我希望在页面上执行某些活动时刷新相同的选项卡。就我而言，当我更改日期控件的值时。

我看过很多他们建议使用“加载”的例子，如下所示：

```
var selected = $('.tabs').tabs('option', 'selected');
                    $(".tabs").tabs('load', selected); 
```

这似乎不起作用。我在这里期望的是，如果它在该特定选项卡的选择中有一些代码，那么它应该执行该代码。

我有一个小提琴文件来演示它：

[http://jsfiddle.net/6F26M/11/](http://jsfiddle.net/6F26M/11/)。正如您在小提琴中看到的那样，我期待一个警报，它将在第三个选项卡选择时执行。

现在， Load 似乎没有这样做。

我也尝试用 select 替换 load ，如果我想选择另一个选项卡，它会起作用。但就我而言，我希望能够刷新。这意味着重新选择相同的选项卡，它不起作用。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T18:53:14.253

好的。这是答案：

```
 var selectedTab = $('.tabs').tabs('option', 'selected');
                    $('.tabs').find('li').eq(selectedTab).removeClass('ui-tabs-selected');
                    $(".tabs").tabs('select', selectedTab); 
```

因此，它无法重新选择或重新加载它的原因是代码不会`'ui-tabs-selected'`在任何元素上设置时对选择起作用。您手动删除它，它会像魅力一样工作。

# jquery - jquery mobile更新innerHTML不呈现

> ID：12786635
> 
> 赞同：0
> 
> 时间：2012-10-08T17:32:17.203
> 
> 标签：jquery, mobile, refresh, render, innerhtml

我刚刚开始使用 Jquery。我正在使用innerHTML 将一些由javascript 函数动态生成的jquery 代码放入div 中。它没有呈现它的 jquery 外观/样式。我知道生成的 jquery 代码是正确的，因为如果我手动将其粘贴并重新启动页面，它看起来很好。

在将新内容动态加载到 innerHTML 后，我是否必须以某种方式更新页面或使用 Jquery 命令刷新呈现？

我也尝试了我认为是innerHTML 的jquery 版本，但它做同样的事情。

```
$("#propchoices").html(data); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:34:43.397

插入文档后无需刷新页面。

确保将代码包含在 DOM Ready 事件中

```
$(document).ready(function() {

    // Your Dynamic Data Here

    $("#propchoices").html(data);

}); 
```

# xcode - NSMutableArray 缓存失败

> ID：12786637
> 
> 赞同：0
> 
> 时间：2012-10-08T17:32:23.890
> 
> 标签：xcode, encoding, nsmutablearray

我想缓存一些 https 请求的结果以加速用户界面，所以我想在 applicationWillResignActive: 中缓存数据并在 didFinishLaunchingWithOptions 中恢复它。为此，我使用以下代码片段： NSArray *paths=NSSearchPathForDirectoriesInDomains(NSCachesDirectory, NSUserDomainMask, YES);

```
NSString* cachesDirectory=[paths objectAtIndex:0];

NSString* archivePath=[cachesDirectory stringByAppendingPathComponent:@"AppCache/Paline.archive"];

NSLog(@"archivePath=%@ paline=%@", archivePath, detailViewController.palineArray);

BOOL success=[NSKeyedArchiver archiveRootObject:detailViewController.palineArray toFile:archivePath];

NSLog(@"%@",success?@"success": @"failure"); 
```

失败并在恢复时返回 nil：

```
 NSMutableArray* cachedItems=[NSKeyedUnarchiver unarchiveObjectWithFile:archivePath];
 NSLog(@"archivePath=%@ cache=%@", archivePath, cachedItems); 
```

palineArray 是一个带有值的 NSMutableArray，当序列化时，如前面的 NSLog 所示。会是什么呢？它不符合 NSMutableArray 编码还是什么？

谢谢，法布里齐奥

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:18:35.007

只是本书的例子，我从添加一个无关的 AppCache 目录中获取了例子。

# objective-c - 破译崩溃报告

> ID：12786639
> 
> 赞同：0
> 
> 时间：2012-10-08T17:33:02.773
> 
> 标签：objective-c, ios, crash-reports

我一直在使用[这种技术](https://stackoverflow.com/a/4954949/530933)来理解我的崩溃报告（请耐心等待我第一次这样做）

崩溃报告：

最后异常回溯（最后两行来自我的程序而不是框架）：

> '应用程序名称' 0x0002c93e 0x2b000 + 6462
> 
> '应用程序名称' 0x0002c3f0 0x2b000 + 5104

在终端中我输入：

> atos -arch armv7 -o 'appname'.app/'appname' 0x2b000 + 6462

然后回来：

> -[CameleonInCallNumberListViewControler callChange]（在'appname'中）+ 6464
> 
> +
> 
> -[CameleonAppDelegate applicationWillEnterForeground:]（在'appname'中）+ 546

最后一行

> atos -arch armv7 -o Caméléon.app/Caméléon 0x2b000 + 5104

然后回来：

> -[CameleonInCallNumberListViewControler callChange]（在'appname'中）+ 6464
> 
> +
> 
> -[CameleonAddressbookViewController gPressed]（在'appname'中）+ 88

所以我的问题是为什么显示 2 个选择器/方法签名而不是只显示一个，有没有办法获得它崩溃的行号？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:42:25.547

您提供了两个数字，因此该工具正在寻找两种方法

```
atos -arch armv7 -o Caméléon.app/Caméléon 0x2b000 + 5104
                                            ^1       ^2 
```

由于这些是分开的，因此它们被视为不同的参数。您应该只使用堆栈跟踪的每一行中的第一个数字。

```
'appname' 0x0002c93e 0x2b000 + 6462
           ^ 
```

这个数字是函数调用的实际地址。您正在使用的下一个数字是方法开始的位置和该方法中的偏移量。这就是为什么每个测试的第一个结果都是相同的。它们发生在同一方法中，而不是同一行。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:43:30.033

Xcode 具有符号化崩溃报告的功能。

如果您对此有疑问，请查看以下帖子： [Xcode 4 failure to symbolicate Crash Log](https://stackoverflow.com/questions/5458573/xcode-4-failure-to-symbolicate-crash-log)

此外，现在有一些很棒的工具可以让符号化变得更容易，比如 Crashlytics 和 Crittercism。

==== 更正

@Kerni 提出了一个很好的观点。这是最后一个异常回溯，所以它是一个线程。

==== 更新

@Kerni 是的，也听说过关于 QuincyKit 和 HockeyApp 的好消息。为遗漏道歉。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T22:58:15.357

延伸到ughoavgfhw[的](https://stackoverflow.com/users/458390/ughoavgfhw)[答案](https://stackoverflow.com/a/12788362/474794)：

你在那个电话中得到 3 个结果，而不是两个！

您的 atos 调用实际上检查了 3 个地址：`0x2b000` `+` `6462`，这就是您在返回中看到 3 行的原因！第二次检查这 3 个：`0x2b000` `+` `5104`

如果您想检查应用程序二进制文件（不会返回行号！），您应该使用它：

```
atos -arch armv7 -o 'appname'.app/'appname' 0x0002c93e
atos -arch armv7 -o 'appname'.app/'appname' 0x0002c3f0 
```

如果您也想获取行号，请调用 atos 并传递 dwarf 文件：

```
atos -arch armv7 -o 'appname'.app.dSYM/Contents/Resources/DWARF/'appname' 0x0002c93e
atos -arch armv7 -o 'appname'.app.dSYM/Contents/Resources/DWARF/'appname' 0x0002c3f0 
```

# sql - 使用来自其他 2 个表的条目列表从 1 个表中删除数据

> ID：12786640
> 
> 赞同：0
> 
> 时间：2012-10-08T17:33:06.367
> 
> 标签：sql

就在此时，我在一个表中有需要从中删除数据的订单。在我需要从中删除行的表中，有 2 个连接。其中一个连接是指带有客户名称/子名称的表。我需要从订单表中具有特定子名称的这些客户中删除一定数量的产品。要获得我需要删除的产品列表，我是否需要查看第三张表的价格。

下面是我创建的以下查询，但返回了一个错误，对此我并不感到惊讶。

```
 DELETE FROM `table1`
WHERE `entry` = (SELECT `entry` FROM `table2` WHERE `subname` = 'Buyer')
    AND `item` = (SELECT `entry` FROM `table3` WHERE `Price` != '226' OR '232'); 
```

运行此查询使我遇到以下错误..

> 错误代码：1242 子查询返回多于 1 行
> 
> 执行时间：0 秒传输时间：0 秒总时间：0.044 秒

任何人都可以帮助我进行正确的查询设置吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:37:33.827

您需要使用 IN 子句而不是相等

如果您仅根据客户名称从表中删除客户记录，您的查询将类似于

```
DELETE FROM `table1` 
WHERE `entry` IN (SELECT `entry` FROM `table2` WHERE `subname` = 'Buyer') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:34:54.003

您的查询应该是

```
DELETE FROM `table1`
WHERE `entry` IN (SELECT `entry` FROM `table2` WHERE `subname` = 'Buyer')
    AND `item` IN (SELECT `entry` FROM `table3` WHERE `Price` != '226' OR '232'); 
```

# iphone - 如何在 UIPageViewController 中设置第一页

> ID：12786641
> 
> 赞同：5
> 
> 时间：2012-10-08T17:33:07.493
> 
> 标签：iphone, objective-c, ios, ipad, uipageviewcontroller

当用户在 a 的第一页`UIPageViewController`并试图返回时，我只返回 nil。在 iOS 5 中，这可以正常工作。它导致 iOS 6 崩溃。

```
*** Terminating app due to uncaught exception 'NSInvalidArgumentException', reason: 'The number of view controllers provided (0) doesn't match the number required (1) for the requested transition' 
```

这是我的代码。当返回`contentViewController`而不是 时`nil`，它工作正常。我应该放什么代替`nil`？

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController 
  viewControllerBeforeViewController:(UIViewController *)viewController {

    contentViewController = [[ContentViewController_iPhone alloc] init];

    int currentIndex = [self.modelArray indexOfObject:[(ContentViewController_iPhone *)viewController labelContents]];

    if ((currentIndex == 0) || (currentIndex == NSNotFound)) {

        //if on the first page, can't go back
        return nil;

     }

    contentViewController.labelContents = [self.modelArray objectAtIndex:currentIndex - 1];

    return contentViewController;

} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-13T11:05:10.763

我遇到了同样的问题，发现只有当我将 pageviewcontrollersgestureRecognizers 的代表更改为我自己的控制器时才会发生这种情况（如果您想在用户点击页面上的某些区域时取消分页，通常会这样做，**例如按钮**）。

对我来说，不为 iOS 6 重新分配是可行的。这很好，因为 iOS 处理触摸有点不同。页面上的按钮或您自己的手势识别器将在 iOS 6 下正常工作，因为它们具有优先级并会自动取消分页。

我希望这有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:12:35.210

您需要将以下内容添加到您的代码中

```
if (currentIndex == 0 || (index == NSNotFound)) {

    //if on the first page, can't go back
    return nil;

 } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T18:33:38.290

最新版本的 Xcode Page Based Application 模板提供以下代码：

```
- (UIViewController *)pageViewController:(UIPageViewController *)pageViewController viewControllerBeforeViewController:(UIViewController *)viewController
{
    NSUInteger index = [self indexOfViewController:(DataViewController *)viewController];
    if ((index == 0) || (index == NSNotFound)) {
    return nil;
}

index--;
return [self viewControllerAtIndex:index storyboard:viewController.storyboard];
} 
```

这应该够了吧 ：-）

# python - 定义变量时意外缩进

> ID：12786643
> 
> 赞同：1
> 
> 时间：2012-10-08T17:33:11.150
> 
> 标签：python, python-2.7, indentation

我是 Python 新手，它只是让我对缩进错误感到困惑。在下面的图片中，为什么第一个有效，而第二个给我一个缩进错误？

作品：

![这有效](../Images/46a912481bfd370b905cd11e08b0c0c7.png)

不起作用：（注意 Notepad++ 中弹出的额外树扩展器）

![在此处输入图像描述](../Images/5a70a4bc10a3eda63ca2ff9a41cc7f9c.png)

错误：

```
 File ".\sigma.py", line 14
    for val in vs:
    ^
IndentationError: unexpected indent 
```

我正在使用记事本++，任何地方都没有空格/制表符问题。此外，在 Python 控制台上进行了尝试，在第二张图像中以完全相同的方式键入它。它工作正常。我猜这有一个非常合乎逻辑的解释，但是来自强类型背景（Java 5 年以上），这感觉像是一个不必要的错误。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-08T17:34:58.093

您正在混合制表符和空格。不要这样做，它会产生不一致的缩进问题。

通过选项卡检查器运行您的脚本：

```
python -tt script.py 
```

并修复所有选项卡（替换为空格），然后将编辑器配置为仅使用空格。

对于记事本++，请参阅：

*   [在 Notepad++ 中将制表符转换为空格](https://stackoverflow.com/questions/455037/notepad-tabs-to-spaces)
*   [如何将 Notepad++ 配置为使用空格而不是制表符？](https://stackoverflow.com/questions/8197812/how-do-i-configure-notepad-to-use-spaces-instead-of-tabs)

# mips - 可以使用单个指令放置在所需寄存器中的所有位模式的集合

> ID：12786644
> 
> 赞同：0
> 
> 时间：2012-10-08T17:33:11.220
> 
> 标签：mips, instruction-set, mips32, mips64

给定以下一组 MiniMIPS 指令：

```
Load upper immediate
Add
Subtract
Set less than
Add immediate
Set less than immediate
Add
OR
XOR
NOR
AND immediate
OR immediate
XOR immediate
Load word
Store word 
```

在 MiniMips 指令中，对于某些操作，例如将寄存器初始化为零位模式（所有位都为零），可能会有多个指令具有执行此操作的能力。

我的问题是，可以使用给定指令集中的单个指令将所有位模式放在所需寄存器中的集合是什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T20:02:46.653

由于您允许“加载字”并且在标签中包含 MIPS64，因此可以使用指令列表中的单个指令将**任何64 位整数加载到寄存器中。**

# jquery - JQuery BlockUI 下拉列表

> ID：12786645
> 
> 赞同：1
> 
> 时间：2012-10-08T17:33:26.533
> 
> 标签：jquery, blockui

当从下拉列表（asp：Dropdownlist）中选择一个项目时，我想使用blockUI来阻止页面。选择项目（onchange 事件）时，UI 确实会“被阻止”，但仍处于阻止状态。似乎回发事件没有被触发。当我单击回发到服务器的按钮，处理它需要的内容并返回并取消阻止页面时，我能够阻止和取消阻止 UI。我无法从下拉列表中让它做同样的事情。有什么建议么？

```
<script type="text/javascript">
    var URL;

    function showWaitPanel(msg) {
        $.blockUI({
            message: '<p>' + msg + '</p>'
            ,css: {
                border: 'none',
                padding: '15px',
                backgroundColor: '#000',
                '-webkit-border-radius': '10px',
                '-moz-border-radius': '10px',
                opacity: .5,
                color: '#fff' }
        });
    }

    function removeWaitPanel(msg, url) {
        $.unblockUI();

        if (msg != '') {
            $.blockUI({ message: '' + msg + '' });
            setTimeout($.unblockUI, 20000);
        }

        if (url != '')
            window.location.href = url;
    }

</script> 
```

```
 <asp:DropDownList ID="ddlVendors" runat="server" AppendDataBoundItems="true" AutoPostBack="true" OnSelectedIndexChanged="ddlVendors_SelectedIndexChanged"  > 
```

……

在服务器端，代码隐藏，... Page_Load(...) {

```
 if (!Page.IsPostBack)
        {
            ddlVendors.Attributes.Add("onchange", "return showWaitPanel('Please Wait...');");
    } 
```

}

```
 protected void ddlVendors_SelectedIndexChanged(object sender, EventArgs e)
    {
        .....
        RemoveWaitPanel("ddlVendors_SelectedIndexChanged", "", "");
    }

    private void RemoveWaitPanel(string key, string message, string url)
    {
        string strScript = "return removeWaitPanel('" + message + "', '" + url + "');";

        ScriptManager.RegisterClientScriptBlock(this, GetType(), key, strScript, true);

    } 
```

客户端的 showWaitPanel() 确实在选择项目时执行，UI 被阻止但服务器端 ddlVendors_SelectedIndexChanged (postback) 没有被执行

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T18:51:17.740

考虑在客户端做这一切。例如，您正在查看 ajax 调用。
你能看看之前发生的另一个事件吗？
喜欢：

1.  显示加载指示器
2.  阻止用户界面
3.  阿贾克斯调用
4.  隐藏加载指示器（我们从我们的网络方法返回数据）
5.  解锁用户界面。

# typescript - 缺少 _this 定义

> ID：12786646
> 
> 赞同：1
> 
> 时间：2012-10-08T17:33:28.343
> 
> 标签：typescript

我在这样的对象中定义了一个函数：

```
 connect(callback?: (connected: bool) => void) {
        $.ajax(this.url + "/connect", $.extend(true, {}, this.ajaxSettings, {
            success: (data) => {
                this.errorChecker(data, (data) => {
                    if (callback != null) {
                        callback(data);
                    }
                });
            },
            timeout: this.timeout,
            error: () => {
                if (callback != null) {
                    callback(false);
                }
            }
        }));
    } 
```

TypeScript 编译器接受它并产生这个：

```
 VAS.prototype.connect = function (callback) {
            $.ajax(this.url + "/connect", $.extend(true, {
            }, this.ajaxSettings, {
                success: function (data) {
                    _this.errorChecker(data, function (data) {
                        if(callback != null) {
                            callback(data);
                        }
                    });
                },
                timeout: this.timeout,
                error: function () {
                    if(callback != null) {
                        callback(false);
                    }
                }
            }));
        }; 
```

注意js中的这一行：

`_this.errorChecker(data, function (data)`

编译器正确地注意到我对 => 运算符的使用并得出结论，`this`在我原来的 TypeScript 中应该引用父对象，而不是`this`实际调用成功回调时发生的任何事情。但是，由于某种原因，编译器忘记了包含魔法线：

```
var _this = this; 
```

在函数开始时。这是一个错误吗？或者这是设计使然？如果它只是完全忽略了 _this / this 东西，我只会说我做错了，但它已经走到了一半，这让我觉得有些不对劲。

**更新**：奇怪的是，这似乎是 Visual Studio 中编译器的问题，如果我将相同的代码复制到[操场](http://www.typescriptlang.org/Playground/)上，它会按预期工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:51:37.663

这看起来像一个错误。您应该打开一个[工作项](http://typescript.codeplex.com/WorkItem/Create)来跟踪它。

# html - 在网站上获取 Facebook 提要流的文档？

> ID：12786650
> 
> 赞同：0
> 
> 时间：2012-10-08T17:33:41.853
> 
> 标签：html, facebook, web, facebook-timeline

试图将 Facebook 页面流集成到网站的元素中？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:50:07.430

Facebook [Like Box](https://developers.facebook.com/docs/reference/plugins/like-box/)具有显示此数据的“显示流”选项。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T21:46:50.350

请注意，完全复制它的任何功能并在您自己的网站上使用（就像模仿 Facebook）是违反 Facebook 的政策的。

话虽如此，您需要使用 Graph API 或 FQL 手动获取此信息。没有可以自动执行此操作的社交插件。

您可以在此处查看 Graph API 文档：[https ://developers.facebook.com/docs/reference/api/](https://developers.facebook.com/docs/reference/api/)

您可以在此处测试一些 Graph API 调用： [https ://developers.facebook.com/tools/explorer/](https://developers.facebook.com/tools/explorer/)

您可以在此处了解有关 FQL 的更多信息： [https ://developers.facebook.com/docs/reference/fql/](https://developers.facebook.com/docs/reference/fql/)

# sql-server-2008 - 不支持所需的事务接口

> ID：12786654
> 
> 赞同：1
> 
> 时间：2012-10-08T17:33:59.393
> 
> 标签：sql-server-2008, db2, linked-server

我在 Sql Server 2008 R2 和 DB2 之间创建了一个链接服务器。

我可以从查询窗口中进行选择和更新，但是如果我尝试将更新的内容包装在 BEGIN TRANSACTION - COMMIT TRANSACTION 中，则会收到以下错误：

**无法执行请求的操作，因为链接服务器“DB2”的 OLE DB 提供程序“DB2OLEDB”不支持所需的事务接口。**

“DB2”是我的链接服务器的名称。

我已经尝试过使用四部分名称，例如

```
UPDATE [DB2].[TEST].[TEST].[TEST]
SET [COL2] = 2
WHERE [COL1] = 1 
```

并使用 OPENQUERY，例如

```
UPDATE OPENQUERY (DB2, 'SELECT [COL2] FROM TEST.TEST WHERE [COL1]=1)
SET [COL2]=2 
```

如果我只是执行语句，它工作正常。如果我将它们包装在事务中，则不会。

任何帮助，将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-10T06:51:05.613

我对这个问题做了更多的研究，答案如下：特性包中的 DB2OleDB 提供程序不支持事务，但 HIS（主机集成服务）支持。此外，您必须在调用 BEGIN DISTRIBUTED TRANS 之前使用 DISTRIBUTED TRANSACTIONS 并将 XACT_ABORT 设置为 ON。

一个例子：

```
SET XACT_ABORT ON
go
BEGIN DISTRIBUTED TRAN
Go
INSERT INTO OPENQUERY (SYS1_DUW, 
      'SELECT * from STROBAEK.DUWTEST') 
      (AREAID, AREADESC,REGIONID) 
      values ('11111', 'Redmond', 101)
ROLLBACK TRAN
Go

exec ('SELECT * FROM STROBAEK.DUWTEST') at SYS1_DUW
Go

AREAID                AREADESC          REGIONID
00001                 BadBoy            104
00002                 BadGirl           105

BEGIN DISTRIBUTED TRAN
Go
INSERT INTO OPENQUERY (SYS1_DUW, 
      'SELECT * from STROBAEK.DUWTEST') 
      (AREAID, AREADESC,REGIONID) 
      values ('11111', 'Bellevue', 101)
COMMIT TRAN
Go       

exec ('SELECT * FROM STROBAEK.DUWTEST') at SYS1_DUW
Go

AREAID                AREADESC          REGIONID
00001                 BadBoy            104
00002                 BadGirl           105
11111                 Bellevue          101

BEGIN DISTRIBUTED TRAN
Go
UPDATE OPENQUERY (SYS1_DUW, 
      'SELECT * from STROBAEK.DUWTEST') 
       set AREADESC = 'Copenhagen' where REGIONID = 101
COMMIT TRAN
Go

SET XACT_ABORT OFF

exec ('SELECT * FROM STROBAEK.DUWTEST') at SYS1_DUW

AREAID                AREADESC          REGIONID
00001                 BadBoy            104
00002                 BadGirl           105
11111                 Copenhagen        101 
```

一个问题：DTC 和 Mirror 不能一起工作

# jquery - 使用 jQuery Iframe 传输插件发送文件和数据

> ID：12786660
> 
> 赞同：1
> 
> 时间：2012-10-08T17:34:27.997
> 
> 标签：jquery, iframe, plugins, transport

我想使用 jQuery iframe-transport 插件将文件和一些隐藏字段上传到服务器。

[http://cmlenz.github.com/jquery-iframe-transport/](http://cmlenz.github.com/jquery-iframe-transport/)

我在页面上有表单，其中包含类型为“文件”和“隐藏”的输入。我使用代码：

```
$("#fileupload").submit(function() {
    progress(1);
    var data = $(":hidden", this).serializeArray();
    console.log(data);
    $.ajax(this.action, {
        data: data,
        processData: false,
        files: $(":file", this),
        iframe: true
    }).complete(function(data) {
        progress(0);
    });
    return false;
}); 
```

变量“数据”包含：

```
[ { name: "description_0", value: "111"}, { name: "description_1", value: "222"}] 
```

文件被发送到服务器，但数据不是。我在 Firebug 的 Post 选项卡中看到有关文件的信息。没有数据信息。

有人可以解释一下，为什么不发送数据信息？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:08:05.897

尝试使用[序列化](http://api.jquery.com/serialize/)表单，并且“文件”类型的输入不发送：“来自文件选择元素的数据未序列化”。

# arm - 饱和度、分组寄存器、ARM、标志 Q

> ID：12786662
> 
> 赞同：0
> 
> 时间：2012-10-08T17:34:30.847
> 
> 标签：arm

第一个问题：

ARMv5TE、ARMv6 和更高版本有一个 Q 标志，当饱和算术指令发生饱和或某些乘法指令发生溢出时，该标志设置为 1。

什么是饱和度？

第二个：

什么是银行登记？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:48:23.443

当操作的结果不适合可用大小时，就会发生饱和。例如，假设我们添加 32 位无符号数 0xF000_0000 + 0x2000_0000：

1.  标准加法 => 0x1_1000_0000（截断） => 0x1000_0000
2.  饱和加法 => 0x1_1000_0000（饱和） => 0xFFFF_FFFF

# ruby - 我需要使用 Rack::Session::Memcache 哪个 gem？

> ID：12786663
> 
> 赞同：1
> 
> 时间：2012-10-08T17:34:32.993
> 
> 标签：ruby, memcached, rack

我希望我的机架应用程序使用 Rack::Session::Memcache 作为我的机架应用程序的会话存储。唉，文档[http://rack.rubyforge.org/doc/Rack/Session/Memcache.html](http://rack.rubyforge.org/doc/Rack/Session/Memcache.html)没有指定它需要哪个 gem！:(

那么我需要安装什么宝石？我安装了 gem `memcache`，但仍然出现错误

> `require': 无法加载这样的文件——memcache (LoadError)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:47:29.620

[https://github.com/rack/rack/blob/master/rack.gemspec](https://github.com/rack/rack/blob/master/rack.gemspec)建议 gem **memcache-client**

> s.add_development_dependency 'memcache-client'

但最好使用 Rack::Session::Dalli (gem dalli) 。仍然是 Memcache[如何将 memcache 服务器指定为 Rack::Session::Memcache？](https://stackoverflow.com/questions/12786976/how-to-specify-memcache-server-to-racksessionmemcache/12787492#12787492)

# mysql - 为每组选择行数，其中两个列值组成一组

> ID：12786666
> 
> 赞同：0
> 
> 时间：2012-10-08T17:34:44.113
> 
> 标签：mysql, sql

我有两个选择语句，由`UNION ALL`. 在第一个语句中，where 子句仅收集先前已向用户显示的行。第二条语句收集所有未显示给用户的行，因此我首先得到查看的结果，之后得到未查看的结果。

当然，这可以通过使用 simple 的相同 select 语句简单地实现`ORDER BY`，但是在您意识到我希望完成的事情之后，两个单独的选择的原因很简单。

**考虑以下结构和数据。**

```
+----+------+-----+--------+------+
| id | from | to  | viewed | data |
+----+------+-----+--------+------+
| 1  | 1    | 10  | true   | .... |
| 2  | 10   | 1   | true   | .... |
| 3  | 1    | 10  | true   | .... |
| 4  | 6    | 8   | true   | .... |
| 5  | 1    | 10  | true   | .... |
| 6  | 10   | 1   | true   | .... |
| 7  | 8    | 6   | true   | .... |
| 8  | 10   | 1   | true   | .... |
| 9  | 6    | 8   | true   | .... |
| 10 | 2    | 3   | true   | .... |
| 11 | 1    | 10  | true   | .... |
| 12 | 8    | 6   | true   | .... |
| 13 | 10   | 1   | false  | .... |
| 14 | 1    | 10  | false  | .... |
| 15 | 6    | 8   | false  | .... |
| 16 | 10   | 1   | false  | .... |
| 17 | 8    | 6   | false  | .... |
| 18 | 3    | 2   | false  | .... |
+----+------+-----+--------+------+ 
```

基本上，我希望语句选择所有未查看的行，这是通过检查`viewed`列是`true`or的天气来完成的`false`，非常简单明了，这里不用担心。

但是，对于已查看的行，即 column `viewed is TRUE`，对于那些记录，我只希望为每个组返回 3 行。

在这种情况下，适当的结果应该是每组中最近的 3 行。

```
+----+------+-----+--------+------+
| id | from | to  | viewed | data |
+----+------+-----+--------+------+
| 6  | 10   | 1   | true   | .... |
| 7  | 8    | 6   | true   | .... |
| 8  | 10   | 1   | true   | .... |
| 9  | 6    | 8   | true   | .... |
| 10 | 2    | 3   | true   | .... |
| 11 | 1    | 10  | true   | .... |
| 12 | 8    | 6   | true   | .... |
+----+------+-----+--------+------+ 
```

正如您从理想结果集中看到的那样，我们有三组。因此，查看结果的所需查询应该为它找到的每个分组显示最多 3 行。在这种情况下，这些分组是 10 和 1 和 8 和 6，两者都有三行要显示，而另一组 2 和 3 只显示一行。

请注意， where`from = x`和, 与and`to = y`进行相同的分组。因此考虑第一个分组（10 和 1），如果是 和 ，则 是同一组。`from = y``to = x``from = 10``to = 1``from = 1``to = 10`

但是，整个表中有很多组，我只希望在 select 语句中返回每个组中最近的 3 个，这就是我的问题，我不确定如何以最有效的方式完成该表在某个时候将有数百甚至数千条记录。

谢谢你的帮助。

**注意：**列`id`、`from`和已编入索引`to`，`viewed`这应该有助于提高性能。

**PS：**我不确定如何准确命名这个问题，如果您有更好的主意，请成为我的客人并编辑标题。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T21:17:33.413

什么毛球！当您从最近的到最近的第二个，再到最近的第三个时，这会变得越来越难。

让我们通过获取我们需要的 ID 列表来将这些放在一起。然后我们可以通过 ID 从表中拉取项目。

这个相对简单的查询可以让您获得最近项目的 ID

```
 SELECT id FROM
    (SELECT max(id) id, fromitem, toitem
       FROM stuff
      WHERE viewed = 'true'
      GROUP BY fromitem, toitem
    )a 
```

小提琴：[http ://sqlfiddle.com/#!2/f7045/27/0](http://sqlfiddle.com/#!2/f7045/27/0)

接下来，我们需要获取第二个最近项目的 id。为此，我们需要一个自连接样式查询。我们需要做同样的总结，但是在一个省略最新项目的虚拟表上。

```
select id from (
  select max(b.id) id, b.fromitem, b.toitem
    from stuff a
    join
           (select id, fromitem, toitem
            from stuff
           where viewed = 'true'
            ) b on (    a.fromitem = b.fromitem 
                    and a.toitem = b.toitem
                    and b.id < a.id)
   where a.viewed = 'true'
   group by fromitem, toitem
  )c 
```

小提琴：[http ://sqlfiddle.com/#!2/f7045/44/0](http://sqlfiddle.com/#!2/f7045/44/0)

最后，我们需要获取第三个最近项目的 id。怜悯！我们需要再次将刚才的查询加入到表中。

```
select id from
(
  select max(d.id) id, d.fromitem, d.toitem
    from stuff d
     join 
    (
       select max(b.id) id, b.fromitem, b.toitem
          from stuff a
          join
            (
               select id, fromitem, toitem
                 from stuff
                where viewed = 'true'
            ) b on  (    a.fromitem = b.fromitem 
                     and a.toitem = b.toitem
                     and b.id < a.id)
          where a.viewed = 'true'
          group by fromitem, toitem
     ) c on (    d.fromitem = c.fromitem
             and d.toitem = c.toitem
             and d.id < c.id)
    where d.viewed='true'
  group by d.fromitem, d.toitem
 ) e 
```

小提琴： [http ://sqlfiddle.com/#!2/f7045/45/0](http://sqlfiddle.com/#!2/f7045/45/0)

所以，现在我们将所有这些 id 合并，并使用它们从表中获取正确的行，我们就完成了。

```
SELECT * 
  FROM STUFF
 WHERE ID IN
(

SELECT id FROM
    (SELECT max(id) id, fromitem, toitem
       FROM stuff
      WHERE viewed = 'true'
      GROUP BY fromitem, toitem
    )a
UNION
select id from (
  select max(b.id) id, b.fromitem, b.toitem
    from stuff a
    join
           (select id, fromitem, toitem
            from stuff
           where viewed = 'true'
            ) b on (    a.fromitem = b.fromitem 
                    and a.toitem = b.toitem
                    and b.id < a.id)
   where a.viewed = 'true'
   group by fromitem, toitem
  )c
UNION
select id from
(
  select max(d.id) id, d.fromitem, d.toitem
    from stuff d
     join 
    (
       select max(b.id) id, b.fromitem, b.toitem
          from stuff a
          join
            (
               select id, fromitem, toitem
                 from stuff
                where viewed = 'true'
            ) b on  (    a.fromitem = b.fromitem 
                     and a.toitem = b.toitem
                     and b.id < a.id)
          where a.viewed = 'true'
          group by fromitem, toitem
     ) c on (    d.fromitem = c.fromitem
             and d.toitem = c.toitem
             and d.id < c.id)
    where d.viewed='true'
  group by d.fromitem, d.toitem
 ) e
UNION
select id from stuff where viewed='false'
)
order by viewed desc, fromitem, toitem, id desc 
```

嘻嘻。太多的 SQL。小提琴： [http ://sqlfiddle.com/#!2/f7045/47/0](http://sqlfiddle.com/#!2/f7045/47/0)

现在，我们需要处理您的最后一个要求，即您的图是无序的。也就是说，from=n to=m 与 from=m to=n 相同。

为此，我们需要一个虚拟表而不是物理表。这会成功的。

```
 SELECT id, least(fromitem, toitem) fromitem, greatest(fromitem,toitem) toitem, data
   FROM stuff 
```

现在我们需要使用这个虚拟表，这个视图，到处都是物理表曾经出现的地方。让我们使用视图来执行此操作。

```
CREATE VIEW 
AS 
SELECT id,
       LEAST(fromitem, toitem) fromitem,
       GREATEST (fromitem, toitem) toitem,
       viewed,
       data; 
```

所以，我们的最终查询是：

```
SELECT *
      FROM stuff
     WHERE ID IN
    (

    SELECT id FROM
        (SELECT max(id) id, fromitem, toitem
           FROM STUFF_UNORDERED
          WHERE viewed = 'true'
          GROUP BY fromitem, toitem
        )a
    UNION
    SELECT id FROM (
      SELECT max(b.id) id, b.fromitem, b.toitem
        FROM STUFF_UNORDERED a
        JOIN
               (SELECT id, fromitem, toitem
                FROM STUFF_UNORDERED
               WHERE viewed = 'true'
                ) b ON (    a.fromitem = b.fromitem
                        AND a.toitem = b.toitem
                        AND b.id < a.id)
       WHERE a.viewed = 'true'
       GROUP BY fromitem, toitem
      )c
    UNION
    SELECT id FROM
    (
      SELECT max(d.id) id, d.fromitem, d.toitem
        FROM STUFF_UNORDERED d
         JOIN
        (
           SELECT max(b.id) id, b.fromitem, b.toitem
              FROM STUFF_UNORDERED a
              JOIN
                (
                   SELECT id, fromitem, toitem
                     FROM STUFF_UNORDERED
                    WHERE viewed = 'true'
                ) b ON  (    a.fromitem = b.fromitem
                         AND a.toitem = b.toitem
                         AND b.id < a.id)
              WHERE a.viewed = 'true'
              GROUP BY fromitem, toitem
         ) c ON (    d.fromitem = c.fromitem
                 AND d.toitem = c.toitem
                 AND d.id < c.id)
        WHERE d.viewed='true'
      GROUP BY d.fromitem, d.toitem
     ) e
    UNION
    SELECT id FROM STUFF_UNORDERED WHERE viewed='false'
    )
    ORDER BY viewed DESC,
            least(fromitem, toitem),
            greatest(fromitem, toitem),
            id DESC 
```

小提琴：[http ://sqlfiddle.com/#!2/8c154/4/0](http://sqlfiddle.com/#!2/8c154/4/0)

# api - OAuth 消费者密钥与应用程序密钥

> ID：12786667
> 
> 赞同：1
> 
> 时间：2012-10-08T17:34:51.897
> 
> 标签：api, oauth, oauth-2.0, restful-authentication

我一直在网上寻找保护 REST API 的方法，我正在[亚马逊的非 SSL 和非 OAuth 方式](http://docs.amazonwebservices.com/AmazonS3/latest/dev/RESTAuthentication.html)和似乎是现在现代的 HTTPS + OAuth 2 方式之间做出决定（如果我错过了一些东西）。

我还不了解 OAuth 2 流程。给定公钥和私钥，这些密钥仅对*应用程序*进行身份验证。应用程序的用户呢？是否有子公钥/私钥来代表应用程序的每个用户？

例如，“应用程序”是“公司应用程序”本身，而不是外部开发的应用程序的情况。一个公钥和私钥如何区分成千上万的用户？

这就是通常所说**的“多用户 OAuth”**吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-10T07:23:38.920

我不熟悉亚马逊的解决方案，但它似乎使用了一个简单的请求签名。相反，OAuth2 更复杂。它支持多种场景，最常用的是“授权码授权”和“隐式授权”流程。下面的解释适用于这两种情况。

在 OAuth2 中，服务实际上对用户凭据一无所知，因此不存在用户的“子密钥”之类的东西。当服务请求授权时，它将用户的浏览器重定向到 OAuth 授权服务器。内部发生了一些神奇的事情（它是客户端应用程序的黑匣子）：用户在需要时进行身份验证并决定是否批准请求。之后，浏览器将被重定向回客户端应用程序以及授权结果。因此，客户端应用程序不可能知道有关用户凭据的任何信息，但根本不需要。相反，它只接收一个允许访问用户的某些受保护资源的令牌。令牌基本上是对特定操作的一次性批准，仅此而已。

# c++ - 如何从鼠标挂钩程序访问 MainWindow 标签？

> ID：12786668
> 
> 赞同：0
> 
> 时间：2012-10-08T17:34:51.713
> 
> 标签：c++, qt

我正在使用鼠标钩子来获取鼠标坐标，但我试图在我的标签上显示它并且代码不起作用。

```
LRESULT CALLBACK MouseHookProc(int nCode, WPARAM wParam, LPARAM lParam)
{
    if(nCode==HC_ACTION)
    {
    POINT p;
    GetCursorPos(&p);
    MainWindow* mw = new MainWindow();
    mw->ui->label->setText(QString::number(p.x)+"|"+QString::number(p.y));//this code don't work!
    }
    return CallNextHookEx(NULL,nCode,wParam,lParam);
 } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:50:29.743

即使您的代码编译，您也没有提供有关错误的任何信息。所以以下只是假设。请在下一个问题中提供更好的描述。

你犯了两个错误。首先，每次调用方法时都会*创建一个新的主窗口。*我认为这不是您想要的，而是一个在每次调用中都会更新的主窗口实例。因此，您需要一个指向现有主窗口实例的全局可访问指针。

第二件事是您的代码不会编译，因为`ui`使用`ui`文件（QtDesigner）设计的任何小部件的成员是`private`：

```
class MainWindow : public QMainWindow
{
   ...
private:
   Ui::MainWindow *ui;
}; 
```

所以你不能从这个类之外访问它。这有一个很好的理由：小部件（主窗口）的设计方式不应该打扰这个类之外的代码（信息/实现隐藏的原则）。

您应该提供一个公共方法来设置数据：

```
class MainWindow : public QMainWindow
{
public:
    void updateCursorPos(int x, int y);
}; 
```

实现可能如下所示：

```
MainWindow::updateCursorPos(int x, int y)
{
    ui->label->setText(QString::number(x) + "|" + QString::number(y));
} 
```

然后你应该这样称呼它：

```
POINT p;
GetCursorPos(&p);
mw->updateCursorPos(p.x, p.y); 
```

* * *

最后，我看不出你必须使用本机代码来获取光标坐标的原因，因为 Qt 有一个非常简单的方法：[`QPoint QCursor::pos()`](http://qt-project.org/doc/qt-4.8/qcursor.html#pos)

例如，您可以使用计时器定期查询光标位置。为此，添加一个具有以下签名的插槽（您不再需要上面的方法）：

```
class MainWindow : public QMainWindow
{
public slots:
    void updateCursorPos();
}; 
```

并将其放入您的实现中：

```
// constructor
MainWindow::MainWindow(...) : ...
{
    QTimer *timer = new QTimer(this);
    connect(timer, SIGNAL(timeout()), this, SLOT(updateCursorPos()));
    timer->setInterval(50);
    timer->start();
}

void MainWindow::updateCursorPos()
{
    QPoint p = QCursor::pos();
    ui->label->setText(QString::number(p.x) + "|" + QString::number(p.y));
} 
```

# sql - 在 Postgresql 中使用 distinct 然后是聚合函数？

> ID：12786670
> 
> 赞同：7
> 
> 时间：2012-10-08T17:34:54.350
> 
> 标签：sql, database, postgresql, distinct, aggregate-functions

这是一个非常基本的问题，无论出于何种原因，我都找不到合理的解决方案。我会尽力解释。

假设您有一张活动门票（部分、行、座位号）。每张票都属于一个与会者。多张票可以属于同一个与会者。每个与会者都有一个价值（例如：与会者 #1 价值 10,000 美元）。也就是说，这就是我想做的事情：

```
1\. Group the tickets by their section
2\. Get number of tickets (count)
3\. Get total worth of the attendees in that section 
```

这是我遇到问题的地方：如果参加者 #1 价值 10,000 美元并且使用 4 张门票，则 sum(attendees.worth) 将返回 40,000 美元。这是不准确的。价值应该是10,000美元。然而，当我在与会者身上区分结果时，计数​​并不准确。在理想的世界中，做类似的事情会很好

```
select 
    tickets.section, 
    count(tickets.*) as count, 
    sum(DISTINCT ON (attendees.id) attendees.worth) as total_worth 
from 
    tickets 
    INNER JOIN 
    attendees ON attendees.id = tickets.attendee_id 
GROUP BY tickets.section 
```

显然这个查询不起作用。如何在单个查询中完成同样的事情？或者甚至有可能吗？我也更愿意远离子查询，因为这是一个更大的解决方案的一部分，我需要在多个表中执行此操作。

此外，价值应遵循平分的票。例如：10,000 美元 / 4。每张门票有一个价值 5,000 美元的参加者。因此，如果门票在不同的部分，他们会随身携带按比例分配的价值。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:43:54.730

您需要在与会者之前汇总门票：

```
select ta.section, sum(ta.numtickets) as count, sum(a.worth) as total_worth
from (select attendee_id, section, count(*) as numtickets
      from tickets
      group by attendee_id, section
     ) ta INNER JOIN
     attendees a
     ON a.id = ta.attendee_id
GROUP BY ta.section 
```

您仍然会遇到单个与会者在多个部分有座位的问题。但是，您没有指定如何解决这个问题（分配价值？随机选择一个部分？将其归因于所有部分？规范地选择一个部分？）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-25T09:47:49.470

使用 jsonb_object_agg：

```
select 
    tickets.section, 
    count(tickets.*) as count, 
    (
      SELECT SUM(value::int4)
      FROM jsonb_each_text(jsonb_object_agg(attendees.id, attendees.worth))
    ) as total_worth
from 
    tickets 
    INNER JOIN 
    attendees ON attendees.id = tickets.attendee_id 
GROUP BY tickets.section 
```

# xml - C# 从头开始 创建 xml

> ID：12786673
> 
> 赞同：0
> 
> 时间：2012-10-08T17:35:02.570
> 
> 标签：xml, linq

我知道这可能是一个简单的问题，但是我在创建一个只会创建其根目录的 xml 文件时遇到了麻烦

我有以下代码，但它不起作用

```
 XDocument products = new XDocument(
    new XDeclaration("1.0", "utf-8", ""),
      new XElement("Users",

      )
    );
        products.Save("hello.xml"); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T17:37:40.027

您需要在磁盘中保存*一些位置：*

```
 XDocument products = new XDocument(
                 new XDeclaration("1.0", "utf-8", ""),
                 new XElement("Users"));

products.Save("c:\\hello.xml"); 
```

**编辑：**

保存在当前目录：

```
var path = Path.Combine(AppDomain.CurrentDomain.BaseDirectory, "hello.xml");
products.Save(path); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:38:35.673

“用户”后面有一个额外的逗号

# video - MPMoviePlayerController 播放完成后不会自动关闭电影（ios 6）

> ID：12786679
> 
> 赞同：10
> 
> 时间：2012-10-08T17:35:14.383
> 
> 标签：video, ios6, mpmovieplayercontroller, movie, nsnotification

我可能没有很好地措辞我的标题，也许更正确的说法是我的 NSNotification 并没有在我的电影播放完成后取消它的视图。我发现其他人有这个问题但没有解决方案，似乎这可能是我正在运行的 iOS 6 的问题。

视频播放完毕后，您需要按“完成”关闭，但我希望它自动关闭，因为一旦我解决了这个问题，我将使用 MPMovieControlStyleNone。这是我的代码，去掉了未使用的部分：`

```
#import "MovieViewController.h"

@interface MovieViewController ()

@end

@implementation MovieViewController

@synthesize moviePlayer = _moviePlayer;

- (IBAction)playMovie:(id)sender
{
    NSURL *url = [NSURL fileURLWithPath:[[NSBundle mainBundle]
                                         pathForResource:@"TestMovie" ofType:@"mov"]];
    _moviePlayer =
    [[MPMoviePlayerController alloc]
     initWithContentURL:url];

    [[NSNotificationCenter defaultCenter] addObserver:self
                                             selector:@selector(moviePlayBackDidFinish:)
                                                 name:MPMoviePlayerPlaybackDidFinishNotification
                                               object:_moviePlayer];

    _moviePlayer.controlStyle = MPMovieControlStyleDefault;
    _moviePlayer.shouldAutoplay = YES;
    [self.view addSubview:_moviePlayer.view];
    [_moviePlayer setFullscreen:YES animated:NO];
}

- (void) moviePlayBackDidFinish:(NSNotification*)notification {

    MPMoviePlayerController *player = [notification object];

    [[NSNotificationCenter defaultCenter] removeObserver:self
                                                    name:MPMoviePlayerPlaybackDidFinishNotification
                                                  object:player];

    if ([player
         respondsToSelector:@selector(setFullscreen:animated:)])
    {
        [player.view removeFromSuperview];
    }
}

@end` 
```

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-11T18:14:44.433

也有这个问题要在moviePlayBackDidFinish中修复只需添加

```
player.fullscreen = NO; 
```

在从超级视图中删除视图之前

# python - 结合 Tornado 和 Flask 模板

> ID：12786680
> 
> 赞同：0
> 
> 时间：2012-10-08T17:35:21.773
> 
> 标签：python, routes, flask, tornado

是否可以将 Tornado 和 Flask 网页模板结合在一起？

例如：使用 Index.html 作为扩展的“基础”模板设置块：

然后，使用 Flask 中的“block”扩展索引以获取 Flask Routes 然后，使用 Tornado 中的“block”扩展索引以获取 Tornado Routes..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:39:34.723

Tornado 模板使用类似于 Jinja 的语法，但渲染引擎不是 Jinja。您也许可以侥幸逃脱，但您必须跟踪哪些模板是 Jinja，哪些是 Tornado。

为了理智起见，请将它们分开。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-12T12:36:52.153

您没有绑定到 Flask 中的默认模板引擎。也许您可以以某种方式在 Flask 中使用 Tornado 的模板引擎，然后可以在两者中使用模板。

# java - 方向改变时如何获取屏幕的尺寸？[安卓]

> ID：12786684
> 
> 赞同：0
> 
> 时间：2012-10-08T17:35:32.007
> 
> 标签：java, android, android-layout, orientation

我知道如何获取屏幕 onCreate 的尺寸。我正在制作一个可运行的文件，这将使我能够获得其中的尺寸。

问题是当我旋转我的设备时，它似乎没有正确返回尺寸。

我正在考虑在 onConfigurationChanged() 上执行它，因为当我旋转我的设备时，它似乎会发火。我正在尝试执行以下操作，但我认为它没有提供有效数据。

```
Rect r = new Rect();
Window win = getWindow();
win,getDecorView().getWindowVisibleDisplayFrame(r);
int height = r.height();
int width = r.width(); 
```

但似乎它们不正确。我试图在屏幕上移动创建的项目，但它不会移动到屏幕的边缘。我认为这与我的拖动功能无关。

我觉得尺寸不正确。

这是怎么做到的？我在正确的道路上吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T18:59:02.023

我创建的解决方法是 onConfigurationChange() 我创建了一个带有属性的包，然后调用了 onCreate()。从本质上讲，这将在新的方向上重新创建。

这就是我为解决手头的这个问题所做的，它使布局被重新渲染。

```
Bundle b = new Bundle();
b.putString("test","data here");
onCreate(b); 
```

# mongodb - MongoDB 聚合框架 $group 可以返回一个值数组吗？

> ID：12786686
> 
> 赞同：14
> 
> 时间：2012-10-08T17:35:40.183
> 
> 标签：mongodb, aggregation-framework

MongoDB 中输出格式化的聚合函数有多灵活？

数据格式：

```
{
        "_id" : ObjectId("506ddd1900a47d802702a904"),
        "port_name" : "CL1-A",
        "metric" : "772.0",
        "port_number" : "0",
        "datetime" : ISODate("2012-10-03T14:03:00Z"),
        "array_serial" : "12345"
} 
```

现在我正在使用这个聚合函数来返回一个 DateTime 数组、一个指标数组和一个计数：

```
{$match : { 'array_serial' : array, 
                            'port_name' : { $in : ports},
                            'datetime' : { $gte : from, $lte : to}
                        }
                },
               {$project : { port_name : 1, metric : 1, datetime: 1}},
               {$group : { _id : "$port_name", 
                            datetime : { $push : "$datetime"},
                            metric : { $push : "$metric"},
                            count : { $sum : 1}}} 
```

这很好，而且非常快，但是有没有办法格式化输出，所以每个日期时间/指标都有一个数组？像这样：

```
[
    {
      "_id" : "portname",
      "data" : [
                ["2012-10-01T00:00:00.000Z", 1421.01],
                ["2012-10-01T00:01:00.000Z", 1361.01],
                ["2012-10-01T00:02:00.000Z", 1221.01]
               ]
    }
] 
```

这将大大简化前端，因为这是图表代码所期望的格式。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-09T03:51:47.637

使用聚合框架将两个字段组合成一个值数组是可能的，但绝对不是那么简单（至少在 MongoDB 2.2.0 中）。

这是一个例子：

```
db.metrics.aggregate(

    // Find matching documents first (can take advantage of index)
    { $match : {
        'array_serial' : array, 
        'port_name' : { $in : ports},
        'datetime' : { $gte : from, $lte : to}
    }},

    // Project desired fields and add an extra $index for # of array elements
    { $project: {
        port_name: 1,
        datetime: 1,
        metric: 1,
        index: { $const:[0,1] }
    }},

    // Split into document stream based on $index
    { $unwind: '$index' },

    // Re-group data using conditional to create array [$datetime, $metric]
    { $group: {
        _id: { id: '$_id', port_name: '$port_name' },
        data: {
            $push: { $cond:[ {$eq:['$index', 0]}, '$datetime', '$metric'] }
        },
    }},

    // Sort results
    { $sort: { _id:1 } },

    // Final group by port_name with data array and count
    { $group: {
        _id: '$_id.port_name',
        data: { $push: '$data' },
        count: { $sum: 1 }
    }}
) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-11-01T06:21:45.190

MongoDB 2.6 通过引入 使这更容易[`$map`](https://docs.mongodb.org/manual/reference/operator/aggregation/map/)，它允许更简单的数组转置形式：

```
db.metrics.aggregate([
   { "$match": {
       "array_serial": array, 
       "port_name": { "$in": ports},
       "datetime": { "$gte": from, "$lte": to }
    }},
    { "$group": {
        "_id": "$port_name",
        "data": {
            "$push": {
                "$map": {
                    "input": [0,1],
                    "as": "index",
                    "in": {
                        "$cond": [
                            { "$eq": [ "$$index", 0 ] },
                            "$datetime",
                            "$metric"
                        ]
                    }
                }
            }
        },
        "count": { "$sum": 1 }
    }}
]) 
```

与 的方法非常相似`$unwind`，您将数组作为“输入”提供给由两个值组成的映射操作，然后通过操作将这些值替换为您想要的字段值`$cond`。

这实际上消除了转换文档所需的所有管道杂耍，就像以前版本中所要求的那样，只是将实际聚合留给手头的工作，这基本上是按“port_name”值进行累积，并且转换为数组不再是问题区域。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T19:54:59.007

在没有 $push 和 $addToSet 的聚合框架中构建数组似乎是缺乏的。我以前试过让它工作，但失败了。如果您可以这样做，那就太棒了：

```
data : {$push: [$datetime, $metric]} 
```

在中`$group`，但这不起作用。

此外，像这样构建“文字”对象也行不通：

```
data : {$push: {literal:[$datetime, $metric]}}
or even data : {$push: {literal:$datetime}} 
```

我希望他们最终能想出一些更好的方法来处理这类数据。

# matlab - Web 应用程序、动态图表和模拟工具？（对于 MATLAB 用户）

> ID：12786687
> 
> 赞同：3
> 
> 时间：2012-10-08T17:35:52.823
> 
> 标签：matlab, web-applications, simulation, matlab-deployment

我们是一群化学工程专业的学生，​​大多精通 MATLAB 和 Simulink，但几乎没有 Web 编程的线索。

我们的想法是通过使用具有动态效果和 2D/3D 模拟的交互式图形来开发一些在线示例。我们知道 MATLAB 有一些解决方案，但编译器不适用于学生版。此外，我们希望推广使用免费的开源替代品（SciLab、Octave、NumPy）

理想情况下，我们希望使用[4GL](http://en.wikipedia.org/wiki/Fourth-generation_programming_language)，其中包含一个用于数值分析的免费库，并将其与 Web 应用程序的图形用户界面框架相结合。

一个很好的例子是[Easy Java Simulations](http://www.um.es/fem/EjsWiki/Main/WhatIsEJS?)，它生成 java 代码并且可以很容易地在线实现。但是，我们正在寻找可以在没有 java 或其他插件的情况下执行的东西（请参阅[google 图表工具](https://developers.google.com/chart/)）

尽管我们愿意学习（Python、Java），但我们希望从最简单的解决方案开始，以实现化学工程师的无痛过渡；）

我们将非常感谢我们的建议和建议！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T20:33:25.300

最好的办法是购买产品`Matlab Builder NE`。您可以使用[WebFigures](http://www.mathworks.com/products/netbuilder/description1.html)从您的 Matlab 应用程序中无缝创建 Web 应用程序。

# .net - 非 IIS 环境中的 WorkflowHost... 怎么样？

> ID：12786688
> 
> 赞同：3
> 
> 时间：2012-10-08T17:35:53.480
> 
> 标签：.net, workflow-foundation-4

所以我在 2012 年创建了一个合同优先工作流。我有一个 xamlx 文件，其中每个操作都有一个并行路径。在 IIS (Express) 下一切正常。

但是，我需要在 EXE 而不是 IIS 中托管这些 WCF 服务。我一直在尝试使用 WorkflowServiceHost，但无论我如何配置它，我都会收到与“必须设置活动”等相关的错误。等等

不幸的是，在网络上进行的搜索并没有产生有效的 WF4.5 解决方案。任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T12:47:40.407

IIS 在幕后使用从 WCF ServiceHost 派生的 WorkflowServiceHost。只需使用工作流定义新建一个并打开它以开始侦听传入的请求。

简单的控制台应用程序代码。

```
var workflow = new MyWorkflow();
var serviceHost = new WorkflowServiceHost(workflow);
serviceHost.Open();
Console.WriteLine("WorkflowServiceHost is listening...");
Console.ReadLine();serviceHost.Close(); 
```

相关的 app.config。

```
<system.serviceModel>
  <services>
    <service name="MyWorkflow">
      <endpoint address="http://localhost:8080/MyWorkflow" binding="basicHttpBinding" contract="IMyWorkflow"/>
    </service>
  </services>
</system.serviceModel> 
```

# facebook - 请求为我的网站创建 app-id 时重定向到我的 fb.admin 网站

> ID：12786693
> 
> 赞同：-1
> 
> 时间：2012-10-08T17:36:12.413
> 
> 标签：facebook, app-id

第一：我有一个网站的 facebook 帐户，而不是我的人。

问题：每当我试图为我的网站创建一个 app-id 时，我都会被重定向到我的 Facebook 帐户——无论我是否登录。

我检查了至少 4 种请求： - 直接来自我的 fb.admin 站点 - [http://developers.facebook.com/apps](http://developers.facebook.com/apps) - [http://developers.facebook.com/tools/](http://developers.facebook.com/tools/)

为什么我不能调用任何 fb:developer 页面？有谁知道怎么了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T09:42:00.770

您必须以个人身份登录（！）并且必须注册为开发人员。然后，您可以访问所有开​​发人员站点，包括“创建应用程序”。否则，您将被重定向到您的 fb.admin 页面。

# objective-c - 检查 lldb 中帧堆栈上系统调用的参数

> ID：12786696
> 
> 赞同：2
> 
> 时间：2012-10-08T17:36:35.673
> 
> 标签：objective-c, lldb

我正在使用 Xcode 4.5 中的 X86_64 程序。我收到警告要中断 _NSWarnForDrawingImageWithNoCurrentContext 并停止在没有上下文的情况下进行绘图调用。该调用发生在一组深度的 CALayer/NSView 调用中。我想知道这与什么观点有关。

```
#0  0x00007fff9033f823 in _NSWarnForDrawingImageWithNoCurrentContext ()
#1  0x00007fff8ffd2cf3 in -[NSImageRep drawInRect:fromRect:operation:fraction:respectFlipped:hints:] ()
#2  0x00007fff901444ea in -[NSImageRep _newCGImageForProposedRect:context:hints:flipped:] ()
#3  0x00007fff8ffd3acb in -[NSImageRep CGImageForProposedRect:context:hints:] ()
#4  0x00007fff9006be1d in -[NSImageRep CGImageForProposedRect:context:hints:flipped:] ()
#5  0x00007fff900f0346 in -[NSImage _newSnapshotRepForRep:rect:context:processedHints:] ()
#6  0x00007fff900923c8 in -[NSImage _snapshotRepForRep:rect:context:processedHints:] ()
#7  0x00007fff9006bd77 in __48-[NSImage CGImageForProposedRect:context:hints:]_block_invoke_0 ()
#8  0x00007fff8ffd14d6 in -[NSImage _usingBestRepresentationForRect:context:hints:body:] ()
#9  0x00007fff9006b9e5 in -[NSImage CGImageForProposedRect:context:hints:] ()
#10 0x00007fff8ff14754 in -[_NSImageLayerContents CA_copyRenderValue] ()
#11 0x00007fff890350c3 in -[CALayer(CALayerPrivate) _copyRenderLayer:layerFlags:commitFlags:] ()
#12 0x00007fff89034a7c in CA::Context::commit_layer(CA::Layer*, unsigned int, unsigned int, void*) ()
#13 0x00007fff890349a4 in CA::Layer::commit_if_needed(CA::Transaction*, void (*)(CA::Layer*, unsigned int, unsigned int, void*), void*) ()
#14 0x00007fff8903492f in CA::Layer::commit_if_needed(CA::Transaction*, void (*)(CA::Layer*, unsigned int, unsigned int, void*), void*) ()
#15 0x00007fff8903492f in CA::Layer::commit_if_needed(CA::Transaction*, void (*)(CA::Layer*, unsigned int, unsigned int, void*), void*) ()
#16 0x00007fff8903492f in CA::Layer::commit_if_needed(CA::Transaction*, void (*)(CA::Layer*, unsigned int, unsigned int, void*), void*) ()
#17 0x00007fff8903492f in CA::Layer::commit_if_needed(CA::Transaction*, void (*)(CA::Layer*, unsigned int, unsigned int, void*), void*) ()
#18 0x00007fff8903492f in CA::Layer::commit_if_needed(CA::Transaction*, void (*)(CA::Layer*, unsigned int, unsigned int, void*), void*) ()
#19 0x00007fff8903492f in CA::Layer::commit_if_needed(CA::Transaction*, void (*)(CA::Layer*, unsigned int, unsigned int, void*), void*) ()
#20 0x00007fff8903492f in CA::Layer::commit_if_needed(CA::Transaction*, void (*)(CA::Layer*, unsigned int, unsigned int, void*), void*) ()
#21 0x00007fff8903492f in CA::Layer::commit_if_needed(CA::Transaction*, void (*)(CA::Layer*, unsigned int, unsigned int, void*), void*) ()
#22 0x00007fff8903492f in CA::Layer::commit_if_needed(CA::Transaction*, void (*)(CA::Layer*, unsigned int, unsigned int, void*), void*) ()
#23 0x00007fff8903492f in CA::Layer::commit_if_needed(CA::Transaction*, void (*)(CA::Layer*, unsigned int, unsigned int, void*), void*) ()
#24 0x00007fff8903492f in CA::Layer::commit_if_needed(CA::Transaction*, void (*)(CA::Layer*, unsigned int, unsigned int, void*), void*) ()
#25 0x00007fff8903492f in CA::Layer::commit_if_needed(CA::Transaction*, void (*)(CA::Layer*, unsigned int, unsigned int, void*), void*) ()
#26 0x00007fff890258d6 in CA::Context::commit_transaction(CA::Transaction*) ()
#27 0x00007fff89025423 in CA::Transaction::commit() ()
#28 0x00007fff9010f032 in -[NSView(NSLayerKitGlue) _drawRectAsLayerTree:] ()
#29 0x00007fff8ffbe35a in -[NSView _drawRect:clip:] ()
#30 0x00007fff8ffbb093 in -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] ()
#31 0x00007fff8ffbbb24 in -[NSView _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] ()
#32 0x00007fff8ffba223 in -[NSThemeFrame _recursiveDisplayRectIfNeededIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:topView:] ()
#33 0x00007fff8ffb5e4d in -[NSView _displayRectIgnoringOpacity:isVisibleRect:rectIsVisibleRectForView:] ()
#34 0x00007fff8ff7fd73 in -[NSView displayIfNeeded] ()
#35 0x00007fff8ff7f2ac in _handleWindowNeedsDisplayOrLayoutOrUpdateConstraints ()
#36 0x00007fff9054a971 in __83-[NSWindow _postWindowNeedsDisplayOrLayoutOrUpdateConstraintsUnlessPostingDisabled]_block_invoke_01208 () 
```

如何找出正在调用哪个视图 _drawRect:clip: ？

我尝试切换到第 29 帧，然后执行 a `p/x $arg1`，但这给出了错误

> 错误：无法实现结构：无法读取 rdi（实现）

我只查找与此错误相关的源代码和提交日志，无法弄清楚它的含义。任何帮助将不胜感激，因为这也将有助于避免有关使用不推荐使用的调用的 Apple 代码的消息给我警告。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T19:12:07.040

您可以尝试使用“register read”命令，例如“reg read arg1”，但这里真正的问题是 rdi 是 SysV x86_64 ABI 的易失性寄存器。这意味着每当您进行函数调用时，rdi 的内容可能已被覆盖而没有保存在任何地方。一旦第 29 帧调用第 28 帧，调试器将假定 rdi 已被覆盖（第 29 帧可能在其中存储了一些内容作为第 28 帧的 arg）并且将无法检索第 29 帧之前的 rdi 内容入口。

被称为“非易失性”或“被调用者保留”的寄存器保证即使在堆栈中间也可以检索。在 x86_64 上，这些包括 rbx 和 r12-r15。如果第 29 帧使用 r12 保存变量，调用第 28 帧并且第 28 帧想要使用 r12，它必须将旧值保存到堆栈中，然后在返回到第 29 帧之前恢复该值。调试器知道如何找到这个保存位置并可以在第 29 帧中显示 r12 的内容——通过查看第 28 帧保存它的位置并检索值。

您唯一的希望是（1）在第 29 帧上放置一个断点并在该点打印 arg1 的值，或者（2）查看第 29 帧的汇编指令并查看函数是否将其第一个参数保存在某处（在堆栈，在非易失性寄存器中），您仍然可以检查。否则，当您深入 28 个堆栈帧时，参数寄存器的内容早已不复存在。

# php - 递归列出PHP中的目录/文件并忽略数组中的目录/文件

> ID：12786698
> 
> 赞同：3
> 
> 时间：2012-10-08T17:36:55.717
> 
> 标签：php, recursion

我正在尝试使用 RecursiveDirectoryIterator 和 RecursiveIteratorIterator 在 PHP 中递归列出目录，但问题是，我需要忽略其中的一些目录和文件。

这是我到目前为止..

```
// Define here the directory you have platform installed.
//
$path = 'testing';

// List of directories / files to be ignored.
//
$ignore_new = array(
# Directories
#
'.git',
'testing/dir1',
'testing/dir2',
'testing/dir3',
'testing/dir8',
'public',

# Files
#
'.gitignore',
'.gitmodules',
'.CHANGELOG.md',
'.README.md',
);

$ite = new RecursiveDirectoryIterator($path, FilesystemIterator::SKIP_DOTS);
foreach (new RecursiveIteratorIterator($ite) as $filename => $object)
{
    echo $filename . '<br />';
} 
```

我尝试了不同的方法来检查目录/文件是否在数组中，但是或者它不起作用，或者目录没有被完全忽略......

这是目录结构的示例

```
testing\
testing\.git
testing\.git\files & directories
testing\testing\dir1
testing\testing\dir2
testing\testing\dir3
testing\testing\dir8
testing\.gitignore
testing\.gitmodules
testing\CHANGELOG.md
testing\README.md 
```

这是可能的，还是我需要使用旧的方式来递归列出 PHP 中的目录/文件？

谢谢 ！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:42:35.230

您应该始终使用`Full Path`，因为您正在组合文件和文件夹

```
$path = __DIR__;

// List of directories / files to be ignored.
//
$ignoreDir = array('1.MOV.xml','.git','testing/dir1','testing/dir2','testing/dir3','testing/dir8','public');

/**
 * Quick patch to add full path to Ignore
 */
$ignoreDir = array_map(function ($var) use($path) {
    return $path . DIRECTORY_SEPARATOR . $var;
}, $ignoreDir);

$ite = new RecursiveDirectoryIterator($path, FilesystemIterator::SKIP_DOTS);
foreach ( new RecursiveIteratorIterator($ite) as $filename => $object ) {

    if (in_array($filename, $ignoreDir))
        continue;

    echo $filename . '<br />';
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-08-29T01:45:22.230

这是另一种使用方法`RecursiveCallbackFilterIterator`：

```
<?php

$f_filter = function ($o_info) {
   $s_file = $o_info->getFilename();
   if ($s_file == '.git') {
      return false;
   }
   if ($s_file == '.gitignore') {
      return false;
   }
   return true;
};

$o_dir = new RecursiveDirectoryIterator('.');
$o_filter = new RecursiveCallbackFilterIterator($o_dir, $f_filter);
$o_iter = new RecursiveIteratorIterator($o_filter);

foreach ($o_iter as $o_info) {
   echo $o_info->getPathname(), "\n";
} 
```

[https://php.net/class.recursivecallbackfilteriterator](https://php.net/class.recursivecallbackfilteriterator)

# mount - 使用 NDMP 而非 CIFS 挂载

> ID：12786699
> 
> 赞同：1
> 
> 时间：2012-10-08T17:36:56.720
> 
> 标签：mount, cifs, netapp

我有一个奇怪但有趣的用例。我使用 CIFS 将共享从文件服务器（NetApp、EMC 等）挂载到应用程序服务器（运行我的应用程序的 win/linux 服务器）。我的应用程序需要处理我通过 CIFS 挂载的共享中的每个文件。我的应用程序还需要访问这些文件的元数据，例如名称、大小、ACL 等。

我想看看我是否可以通过 NDMP 实现相同的目标。关于这个用例，我有一些非常基本的问题。如果你们能在这里帮助我，那就太好了。

1.  这甚至是可以实现的吗？
2.  我可以只转让我感兴趣的股票而不是全部吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-05-30T04:25:52.483

NDMP 本质上是一种控制备份/恢复操作的应用程序协议。该协议足够灵活，可以做一些有趣的事情，比如数据迁移或磁带克隆。

但是，它不是文件访问协议，因此不可能通过 NDMP “挂载”任何内容，除非 NDMP 服务器供应商编写 NDMP 扩展来执行此操作：这将是相当愚蠢的，因为有专门的协议可以做到这一点。

希望这可以帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-12T23:46:20.560

NDMP 是为数据管理（备份、恢复等）而设计的，而不是像 CIFS 这样的文件访问协议。如果您的应用程序是备份应用程序，那么可以，您可以使用 NDMP 控制数据子集并将其从文件管理器复制到应用程序服务器。请注意，数据的格式将是文件管理器提供的（通过 NDMP），而不是您的控制。希望有帮助！

# sql-server-data-tools - 如何忽略 SSDT 中的特定表/存储过程/视图

> ID：12786706
> 
> 赞同：8
> 
> 时间：2012-10-08T17:37:14.313
> 
> 标签：sql-server-data-tools

我是 SSDT 的新手，当我在 Visual Studio 中使用 ssdt UI 比较架构时，我试图找到一种忽略某些表的方法。有没有办法在 SSDT 中做到这一点。我认为可以通过命令行，但想知道我是否可以创建一个 .scmp 文件，其中只包含我想要比较的那些表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-03T21:08:45.130

也试图找到这样的选项，但失败了。您可以取消选中比较结果中的某些项目并保存比较。在这种情况下，下次运行比较时它们将保持未选中状态。

# ios - 启动新应用时，您是仅支持最新的 iOS 还是至少支持之前的一个？

> ID：12786716
> 
> 赞同：2
> 
> 时间：2012-10-08T17:37:54.793
> 
> 标签：ios, ios6

我希望这个问题不会因为主观而被关闭，但我认为了解新开发人员会很有趣。这个问题与每个 iOS 版本都相关。我现在正在使用 iPhone 应用程序一段时间，它已准备好提交到应用商店。如果 iOS 适配率为 60%，我应该将我的应用设置为 iOS 6.0 及更高版本还是保持在 5？新应用程序的通常做法是什么？我可能想稍后在这个应用程序中使用 UICollectionview，但在短时间内需要更高的操作系统可能会更难。这是一个仅限 iPhone 的应用程序，所以我不会进入 iPad 1 市场。如果您正在开发 iPad 应用程序，您会因为 iPad 1 而坚持使用 5 吗？

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:51:56.220

就我个人而言，我仍然为 iOS 5 开发。iOS 5 的改进与以前的版本相比有了如此大的飞跃，以至于我开始在 iOS5 发布后不久发布的应用程序上构建它。我还没有看到任何重大的升级到 iOS 6，至少我认为没有什么值得失去/加重我的 iPad 1 用户和丢掉所有 iOS 5 市场份额的事情。

# java - 何时创建自定义类加载器？

> ID：12786717
> 
> 赞同：9
> 
> 时间：2012-10-08T17:37:55.880
> 
> 标签：java, classloader

为什么你需要创建一个自定义的类加载器？一个真实世界的例子会很棒！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T17:45:19.973

Java EE 服务器和 OSGI 容器等应用服务器使用自定义类加载器来支持动态更新和删除软件。

其他自定义类加载器用于支持动态代码注入（首选来自 Java 5.0 Instrumentation）

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-08T17:45:14.940

典型案例有：

*   在运行时检测/加载类。

*   加载加密的类。

*   远程类加载。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-08T17:47:14.817

这不是您可能必须自己编写的东西，但您可能会将其用作某些复杂框架的一部分——例如，依赖注入通常使用 ClassLoaders 实现。自定义类加载器的另一个常见用途是在单元测试中：自定义类加载器可用于将被测单元加载的类替换为以可控方式响应的“虚拟”版本（例如，模拟错误，否则会出现难以创建）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T21:09:11.053

坦率地说，很难想象没有非标准类加载器的 Java 生态系统。许多松散耦合的架构都基于类加载器。我建议花几个小时使用 JSPF（Java 简单插件框架），因为只有一些实践经验对你来说才是真正有价值的。JSPF 非常简单，不仅可以在需要自定义类加载器时了解潜在的情况，还可以感受这种解决方案的强大功能。

尝试遵循一个简单的计划：

*   定义接口（合约）
*   提供一个实现作为独立的模块/jar
*   使用 JSPF 和先前定义的契约来发现可用的实现
*   用发现的实现做一些有用的事情
*   了解您有松散耦合的系统
*   了解本示例中如何实际使用类加载器

也请浏览以下链接：

*   [http://code.google.com/p/jspf/](http://code.google.com/p/jspf/)
*   [http://code.google.com/p/jspf/wiki/UsageGuide](http://code.google.com/p/jspf/wiki/UsageGuide)

# c# - 如何在 C# 中发送 ping 参数

> ID：12786718
> 
> 赞同：0
> 
> 时间：2012-10-08T17:38:00.163
> 
> 标签：c#, console-application

> **可能重复：**
> [如何在 C# 中获取我自己的 IP 地址？](https://stackoverflow.com/questions/1069103/how-to-get-my-own-ip-address-in-c)

在 C# 控制台应用程序中，我正在使用此代码

```
var ping = new Ping();
var reply = ping.Send();
if (reply.Status == IPStatus.Success)
{
    Console.WriteLine("Pinging with server");
    Console.WriteLine("Press any key to continue");
    Console.ReadKey(true);
} 
```

那么`var reply = ping.Send();`我需要传递什么参数才能写入本地机器的IP？这里我需要参数中本地机器的IP。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:42:26.923

这段代码做到了：

```
using System;
using System.Net;
using System.Net.NetworkInformation;

namespace ConsoleApplication6
{
    class Program
    {
        static void Main(string[] args)
        {
            using(var ping = new Ping())
            { 
                var reply = ping.Send(IPAddress.Loopback);

                if (reply.Status == IPStatus.Success)
                {
                    Console.WriteLine("Pinging with server: " + reply.Address);
                    Console.WriteLine("Press any key to continue");
                    Console.ReadKey(true);
                }
            }
        }
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:41:34.777

您可以通过以下方式进行：

```
 IPAddress add = IPAddress.Loopback; /// Reuturns local Ip Address
 PingReply reply = ping.Send(add);
 if (reply.Status == IPStatus.Success)
 {
    Console.WriteLine("Pinging with server");
    Console.WriteLine("Press any key to continue");
    Console.ReadKey(true);
  } 
```

# r - 将一年中的几周转换为日期

> ID：12786722
> 
> 赞同：8
> 
> 时间：2012-10-08T17:38:11.690
> 
> 标签：r, date, type-conversion

我有一个数据集，其中包含从年初 ( `%W`) 开始的周数，我想将其转换为日期，以便使用 x 轴上的日期绘制它

```
dat <- structure(data.frame(week = c(22, 34, 15), year = c(2009, 2009, 2010), x = c(3.4, 5.2, 1.3))) 
```

我尝试根据此处[较早的问题](https://stackoverflow.com/questions/6242955/converting-year-and-month-to-a-date-in-r)转换周数，但最终得到`"YYYY-10-01"`每个日期。

```
as.Date(paste("01", dat$week, dat$year, sep = "-"), format = "%d-%W-%Y") 
```

为什么会这样，如何才能做到正确？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T17:55:14.843

试试这个：

```
as.Date(paste("1", dat$week, dat$year, sep = "-"), format = "%w-%W-%Y") 
```

一周和一年不指定日期，因此您确实需要“日”，但您需要“一周中的一天”，或者`%w`，而不是“一个月中的一天”，或者`%d`。在这种情况下，我使用星期一（即 1）。此外，显然`%w`不喜欢前导零。

# qt - 使用带有 vs2010 插件的 Qt 资源系统

> ID：12786729
> 
> 赞同：1
> 
> 时间：2012-10-08T17:38:50.587
> 
> 标签：qt

> **可能重复：**
> [嵌入式 JPG 资源未在 Qt 应用程序中加载](https://stackoverflow.com/questions/2241141/embedded-jpg-resources-not-loading-in-qt-application)

这是我第一次使用 Qt 内置工具管理应用程序的资源。

我已经在 vc++2010 中建立了一个 Qt4 应用程序项目。然后我使用 Qt 资源编辑器创建了新的 .qrc 文件并使用了附件。当我在我的（同一台）机器上运行应用程序时一切正常，但是当我在其他 PC 上执行它时（安装干净的 XP / 7 / vista），附加的图像不会显示。

我可以在目标机器上安装 Qt 库以使其正常工作吗？或者我可能忘记了一些重要的 Qt 资源系统功能？

# dojo - 保留一个 dojo 模块的实例

> ID：12786730
> 
> 赞同：0
> 
> 时间：2012-10-08T17:38:55.723
> 
> 标签：dojo

有没有办法在 dojo (1.8) 模块中有一个静态变量，以便我可以保留状态？

例如，假设我在 some/module 中设置了一些值

```
require([
     'some/module'
], function (module) {
    module.setSomeValue(3); 
}); 
```

..然后想稍后检索它

```
define([
    'some/module'
], function(module) {
    return {
        start: function() {
            var x = module.getSomeValue(); 
        }
    };
}); 
```

一个可行但看起来像黑客的解决方案，

```
acompany = window.acompany || {};
acompany.project = acompany.project || {
};

require([       
], function() {
    var debug = false;

    acompany.project.module = {
        /* static variables and functions here */ 
    };
});

define([

], function () {
    return acompany.project.module;
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:56:26.463

实际上总是只有一个 AMD 模块实例，因为（[来源](http://livedocs.dojotoolkit.org/loader/amd#the-amd-api)）：

> define 有两个额外的重要特征，可能不是很明显：
> 
> *   模块创建是惰性和异步的，并且在调用 define 时不会立即发生。这意味着工厂不会被执行，并且模块的任何依赖关系都不会被解析，直到某些正在运行的代码实际需要该模块。
> *   一旦模块值被输入到模块命名空间中，**它就不会在每次被要求时重新计算**。在实际层面上，这意味着**factory 只被调用一次，并且返回的值被缓存并在使用给定模块的所有代码之间共享**。（注意：dojo 加载器包含非标准函数 require.undef，它取消定义模块值。）

此外，您不必只提供*工厂*函数，还可以提供*对象字面*量：

```
define("some/module", {
    someValue: "some",
    otherValue: "other"
}); 
```

然后在您的代码中的其他地方：

```
require(["some/module"], function(module) {
    console.log("module.someValue", module.someValue); // some
    module.someValue = "some changed";
});

require(["some/module"], function(module) {
    console.log("module.someValue", module.someValue); // some changed
}); 
```

更强大的解决方案包括一个实例[`dojo/Stateful`](http://livedocs.dojotoolkit.org/dojo/Stateful)，因此您可以`watch`进行更改并定义[自定义*setter*和*getter*](http://livedocs.dojotoolkit.org/dojo/Stateful#custom-accessors)：

```
define("some/stateful-module", ["dojo/Stateful"], function(Stateful){
    var stateful = new Stateful({
        someValue: "some",
        otherValue: "other"       
    });
    return stateful;
}); 
```

然后在您的代码中的其他地方：

```
require(["some/stateful-module"], function(module) {
    console.log("stateful-module.someValue:", module.get("someValue"));
    module.watch(function(name, oldValue, newValue) {
        console.log("stateful-module: property"
            , name
            , "changed from"
            , "'" + oldValue + "'"
            ,  "to"
            , "'" + newValue + "'"
        );        
    });
});

require(["some/stateful-module"], function(module) {
    module.set("someValue", "some changed");
});​ 
```

在 jsFiddle 上查看它是如何工作的：http: [//jsfiddle.net/phusick/fHvZf/](http://jsfiddle.net/phusick/fHvZf/)。`require.undef(mid)`它在那里的单个文件中，但除非您使用模块，否则它将在整个应用程序中以相同的方式工作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:07:04.390

Dojo 中有多个文件`dojo/date/locale`定义静态变量和函数，而不是使用`dojo.declare`.

定义模块

```
define([
    'dojo/_base/lang/',
    'some/module'
], function(lang, module) {

    var m = lang.getObject('some.module', true);
    m.x = 0;
    m.doSomething = function(){
      // doSomething
    };
    return m;
}); 
```

使用模块

```
require([
    'some/module'
], function(someModule) {
    var debug = false;

    /* someModule - static variables and functions here */ 

    if(someModule.x == 0){

    }
}); 
```

# objective-c - Retina "@2x" 图形在标准分辨率显示器上使用不正确（使用 Snow Leopard / Xcode 4.2）

> ID：12786733
> 
> 赞同：2
> 
> 时间：2012-10-08T17:38:58.700
> 
> 标签：objective-c, xcode, macos, cocoa, osx-snow-leopard

我正在使用 OS X 10.6 Snow Leopard 中的 Xcode 4.2 开发 Mac 应用程序。

我的 Xcode 项目包含在同一个文件夹中，并且尺寸正好翻倍：

`image.png`
`image@2x.png`

我使用[Apple 推荐的](https://developer.apple.com/resources/high-resolution/)-[NSImage imageNamed:] 方法根据用户的屏幕类型加载正确的资源：

`[NSImage imageNamed:@"image"];`

但是，当我在非视网膜 1440x900 显示器上运行应用程序时，会显示图像的“@2x”版本。当它应该是 50x50 时，我得到了 100x100 的图像。

相同的代码可以很好地提供标准清晰度和视网膜图像，具体取决于我在 10.7 Lion 中运行应用程序时（在标准和 HiDPI 模式之间切换）。

到目前为止，我一直无法让 Snow Leopard HiDPI (720x450) 模式工作。但是当我使用标准清晰度显示器时，它仍然应该显示标准清晰度图像。

Snow Leopard 或 Xcode 4.2 是否存在导致其无法正常工作的限制？如果是这样，您如何发布具有 10.6 部署目标但仍具有视网膜图形支持的应用程序？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:31:23.563

似乎 Snow Leopard 或 Xcode 4.2 无法将高分辨率艺术品正确组合到单个`.tiff`文件中？

在目标的构建设置中设置为`Combine High Resolution Artwork`。`NO`

重要提示：然后我还需要从我的应用程序包中手动删除以前创建的 .tiffs。`-[NSImage imageNamed:]`与 2 个 .png 相比，更喜欢单个 .tiff，因此如果找到 .tiff 文件，它将使用它。确保它没有。

![结合高分辨率艺术品：不！](../Images/15b1f07fea46ed628f4f4f2b9da6ea32.png)

# php - 多查询：返回空数组

> ID：12786738
> 
> 赞同：0
> 
> 时间：2012-10-08T17:39:12.990
> 
> 标签：php, facebook, facebook-graph-api

```
$queries = '{"query1":"SELECT pid, src, link, caption, like_info, created FROM photo WHERE aid in ( SELECT aid FROM album WHERE owner = me() AND type = \"profile\" AND name = \"Profile Pictures\" ORDER BY created ASC LIMIT 1)","query2":"SELECT pid, src, link, caption, created, like_info FROM photo WHERE aid in ( SELECT aid FROM album WHERE owner = me() AND type = \"profile\" AND name = \"Profile Pictures\" ORDER BY created DESC LIMIT 1)"}';    
$multiquery = "https://api.facebook.com/method/fql.multiquery?queries=" . urlencode($queries) . "&format=json&" . $access_token;
$res = json_decode(file_get_contents($multiquery), TRUE); 
```

但是当执行两个单个查询时，它工作正常。这里有什么问题？

我只是想获取第一张和最后一张个人资料照片

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T20:04:41.230

几点评论：

最好的方法是使用[PHP SDK](https://developers.facebook.com/docs/reference/php)而不是`file_get_contents`.

您正在使用已弃用的旧 REST API url。您应该使用 Graph API 网址：`https://graph.facebook.com/fql?q=`

您的`$access_token`变量是否包含`&access_token=`查询字符串的一部分？

最后，为了让您的查询保持直截了当，我发现最好的方法是将它们添加为数组的元素，其中查询名称作为键，例如：`$fql['query1'] = 'SELECT ...'`然后使用`json_encode(preg_replace('/\s+/', ' ', $fql))`将它们组合成无错误的 json。

# mysql - 来自不同表相同ID的MYSQL查询

> ID：12786739
> 
> 赞同：1
> 
> 时间：2012-10-08T17:39:18.290
> 
> 标签：mysql, database, joomla

我真的很困惑如何在 mysql 中执行此操作以及是否可能。我有一张表，我需要在其中选择 id = idi 的文章：

```
$query->select('title, id, idi, introtext');
$query->from('#__content');
$query->where('idi = ' . $id); 
```

因此，现在组件显示主要文章（ id ）和具有与 ID 相同的 IDI 的额外文章。

# __内容表

```
ID IDI
0    0
1    0
2    1
3    1 
```

因此，ID 为 1 的文章将有额外的 ID 为 2,3 的文章，因为 IDI 为 1。 ID=IDI

现在我需要从表评分中获取额外的文章voting_results，其中votings_results ID 等于#__content id。

# __评级表

```
ID voting_result1
0           55
1          123
2           64          <--
3           42          <-- 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:46:02.497

你可以这样做：

```
select sum(voting_result1) as "Total" from #__ratings table 
where ID = 1 or 
ID in (select IDI from #__content table where IDI = 1) 
```

# microsoft-metro - 以编程方式更改磁贴的背景颜色？

> ID：12786740
> 
> 赞同：0
> 
> 时间：2012-10-08T17:39:21.930
> 
> 标签：microsoft-metro

我知道背景实际上是一个图像（WideLogo.png/SmallLogo.png）并在应用程序清单文件中指定。但是是否可以通过编程方式将它们与一组新图像交换？根据磁贴上显示的信息，我想更改磁贴的背景颜色。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:14:18.677

我认为您不能以编程方式更改磁贴的背景颜色。这是在默认磁贴的清单中设置的，因此您可以覆盖透明背景图像，以获得磁贴的可预测默认外观。

但是您可以在运行时从您的应用程序发送磁贴通知，这些通知可以包括图像和文本。

这是关于磁贴和通知的 MSDN 文档的链接：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh779724.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh779724.aspx)

以及您可以使用的磁贴模板目录：

[http://msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/hh761491.aspx)

实现此功能的一种方法是以编程方式创建具有所需背景颜色和文本的平铺图像，然后将其作为平铺通知发送。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T19:13:50.387

您无法编辑应用清单来更改默认颜色。但是，您可以使用适当的背景颜色和内容渲染图像，然后将其设置为平铺。

有关如何实现这一点的更多详细信息，请阅读：[Windows 8 Metro App - Render PNGs](https://stackoverflow.com/questions/12180235/windows-8-metro-app-render-pngs)

# objective-c - 过渡到 ARC 导致代理问题

> ID：12786748
> 
> 赞同：3
> 
> 时间：2012-10-08T17:39:51.900
> 
> 标签：objective-c, ios, automatic-ref-counting

将项目转换到 ARC 后，我遇到了一些问题，即委托方法在已释放的实例上没有被调用/被调用。我已经意识到问题是我有一个变量被分配然后执行一个异步任务。举个简单的例子，假设有一个名为 MyService 的对象响应委托方法 executeDidSucceed：

```
- (void)fireRequest {
    MyService *service = [[MyService alloc] initWithDelegate:self];
    [service execute];
} 
```

原始代码看起来像这样：

```
- (void)fireRequest {
    MyService *service = [[[MyService alloc] initWithDelegate:self] autorelease];
    [service execute];
} 
```

使用 ARC，我知道在被调用`release`后会添加一个调用`[service execute]`。而且我也明白，因为方法是异步的，所以`service`对象会被释放，并且会为委托方法调用被释放的对象。

我知道一个解决方案是创建`service`一个实例变量并赋予它`strong`属性，这样我们就可以保留它的所有权。而且我知道一个解决方案，我们可以创建一个块并使用完成处理程序，以便委托保持保留，直到块完成。我的问题是，处理这种情况的最佳方法是什么？或者更重要的是，在过渡到 ARC 时解决此问题的“最佳实践”是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T18:25:21.460

您需要使您的 Myservice 对象成为此类的成员。ARC 会在此函数完成后立即清理它，因为您不再拥有对它的引用。

我也认为这是一个很好的做法，因为在它调用委托（如果有的话）之前您没有对该对象的引用，并且根据具体情况，您可能需要在服务完成之前停止服务。

# ios - UILongPressGestureRecognizer 和 UITextField 不能一起工作

> ID：12786749
> 
> 赞同：0
> 
> 时间：2012-10-08T17:40:01.237
> 
> 标签：ios, uitextfield, uigesturerecognizer

我有一个带有 LongPressGesturerecognizer 的 UIViewController。视图控制器视图中还有一个 UITextField。

如果我点击 UITextField，Gesturerecognizer 会捕捉到长按。无法复制、粘贴、光标移动。

我想让 Gesturerecognizer 在视图中的任何位置都处于活动状态，除了 UITextField 之外，我想要默认的操作系统行为，如复制、粘贴、移动光标等。

那可能吗？我可以以某种方式告诉手势识别器将手势转发到 UITextFields 默认值吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:01:36.717

You have to set a delegate to your `UILongPressGestureRecognizer` and implement the `gestureRecognizer:shouldReceiveTouch:` delegate method like this:

```
- (BOOL) gestureRecognizer:(UIGestureRecognizer *)gestureRecognizer shouldReceiveTouch:(UITouch *)touch
{
    return touch.view != self.textField;
} 
```

# android - 在运行使用它的 Android 验收测试之前启动并设置 Web 服务

> ID：12786751
> 
> 赞同：0
> 
> 时间：2012-10-08T17:40:05.200
> 
> 标签：android, web-services, automated-tests, acceptance-testing

我有一个依赖于网络服务来获取数据的 Android 应用程序。我想设置针对应用程序运行的自动化端到端验收测试，Web 服务是“黑匣子”的一部分。在执行测试之前，是否可以从我的仪器测试中启动和设置 Web 服务？或者这需要在仪器测试之外的其他地方发生吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-14T18:53:43.543

似乎没有办法做到这一点。

然而，目前处于测试阶段的[Robotium RC项目看起来很有希望。](http://code.google.com/p/robotium/wiki/RemoteControl)“使用远程控制，您将使用普通 JUnit 在您的计算机上运行测试类......”

还有[RoboRemote](https://github.com/groupon/robo-remote)。

# java - spring - 如何自动装配数据源？

> ID：12786754
> 
> 赞同：3
> 
> 时间：2012-10-08T17:40:10.773
> 
> 标签：java, spring, datasource, dao, autowired

一般来说，我在使用 autowire 和 DI 时遇到了一些问题，所以我希望有人能提供帮助，因为我已经被困了好几天了。

这是代码：

```
@Service
public class TicketsController implements Controller {
  private TicketManager ticketManager;

  @Autowired
public void setTicketManager(TicketManager ticketManager) {
    this.ticketManager = ticketManager;
}
...
}

@Service
public class SimpleTicketManager implements TicketManager {
  private TicketsDao ticketsDao;

@Autowired
public void setTicketsDao(TicketsDao ticketsDao) {
    this.ticketsDao = ticketsDao;
}
 ...
}

@Repository
public class JdbcTicketDao implements TicketsDao  {
  private DataSource dataSource;
  @Autowired
  public void setDataSource(DataSource dataSource)  {
    this.dataSource=dataSource;
      this.jdbcTemplate = new JdbcTemplate(this.dataSource);   
     }
...
}

public final class AppContext {
ApplicationContext context = new ClassPathXmlApplicationContext("beans.xml");
BeanFactory factory = context;
TicketsController ticketsController = (TicketsController) factory.getBean("ticketsController");
}
...
} 
```

在我的 beans.xml 中，我有：

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClass" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/mytckdb"/>
    <property name="username" value="user"/>
    <property name="password" value="pass"/>
</bean>
<context:component-scan base-package="bp.dao" />
<context:component-scan base-package="bp.mvc" />
<context:component-scan base-package="bp.svc" />
<context:component-scan base-package="bp.view" /> 
```

这不起作用，我得到：

```
Error creating bean with name 'jdbcTicketDao': Injection of autowired dependencies failed
... nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: 
    No matching bean of type [javax.sql.DataSource] found for dependency.` 
```

有人可以帮忙吗？我究竟做错了什么？似乎自动装配一直有效，直到注入数据源时失败的下一步。

**编辑**：我在玩代码，在 setDataSource() 之前忘记了@Autowire，但它应该在那里。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:32:36.757

也许您缺少接线配置，请尝试

`<context:annotation-config/>`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-06-20T09:45:04.440

这将归因于 bean 实例创建的顺序。您的 DAO 在创建 dataSource 实例之前已被实例化。

保留您的数据源 bean 定义之前

另一种方法是，在单独的 xml 中定义您的数据源定义并在之前导入

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T18:42:42.437

看起来你正在使用`Spring 2.0`，但我认为`context:component-scan`是在`Spring 2.5`. 也许将 spring xml-config 和 spring 依赖项更新为`2.5`？

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-09T08:07:25.557

改变

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClass" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/mytckdb"/>
    <property name="username" value="user"/>
    <property name="password" value="pass"/>
</bean> 
```

至

```
<bean id="dataSource" class="org.springframework.jdbc.datasource.DriverManagerDataSource">
    <property name="driverClassName" value="com.mysql.jdbc.Driver"/>
    <property name="url" value="jdbc:mysql://localhost:3306/mytckdb"/>
    <property name="username" value="user"/>
    <property name="password" value="pass"/>
</bean> 
```

该属性被称为`driverClassName`，不是`driverClass`。

此外，您不需要多个`context:component-scan`元素您可以更改

```
<context:component-scan base-package="bp.dao" />
<context:component-scan base-package="bp.mvc" />
<context:component-scan base-package="bp.svc" />
<context:component-scan base-package="bp.view" /> 
```

至

```
<context:component-scan base-package="bp.dao,bp.mvc,bp.svc,bp.view" /> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T17:45:48.347

尝试`org.apache.commons.dbcp.BasicDataSource`：

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource"
        destroy-method="close" p:driverClassName="com.mysql.jdbc.Driver"
        p:url="jdbc:mysql://127.0.0.1:3306/mytckdb?autoReconnect=true"
        p:username="user" p:password="pass" /> 
```

我使用 JPA，所以通常更喜欢创建 EntityManagerFactory 并使用它

```
 <bean id="entityManagerFactory"
            class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
            <property name="dataSource" ref="dataSource" />
            <property name="persistenceUnitName" value="PU" />
            <property name="jpaVendorAdapter">
                <bean id="jpaAdapter"
                    class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
                    <property name="database" value="${database}" />
                    <property name="showSql" value="true" />
                    <property name="generateDdl" value="false" />
                </bean>
            </property>
        </bean>

<bean id="txManager" class="org.springframework.orm.jpa.JpaTransactionManager">
        <property name="entityManagerFactory" ref="entityManagerFactory" />
    </bean>

    <tx:annotation-driven transaction-manager="txManager" /> 
```

# c# - 我的异步任务总是阻塞 UI

> ID：12786758
> 
> 赞同：14
> 
> 时间：2012-10-08T17:41:11.633
> 
> 标签：c#, multithreading, asynchronous, dispatcher, async-await

在 WPF 4.5 应用程序中，我不明白为什么当我使用 await + a task 时 UI 会被阻止：

```
 private async void Button_Click(object sender, RoutedEventArgs e)
    {
        // Task.Delay works great
        //await Task.Delay(5000);

        double value = await JobAsync(25.0);

        MessageBox.Show("finished : " + value.ToString());
    }

    private async Task<double> JobAsync(double value)
    {
        for (int i = 0; i < 30000000; i++)
            value += Math.Log(Math.Sqrt(Math.Pow(value, 0.75)));

        return value;
    } 
```

await Task.Delay 效果很好，但 await JobAsync 会阻塞 UI。为什么 ？谢谢你。

* * *

## 回答 #1

> 赞同：26
> 
> 时间：2012-10-08T17:46:40.250

你应该得到一个警告`JobAsync`——它不包含任何`await`表达式。*您的所有*工作仍在 UI 线程上完成。该方法实际上没有任何异步。

将方法标记为`async`不会使其在不同的线程上运行 - 更重要的是，它更容易将异步操作连接在一起，并返回到适当的上下文。

我怀疑退后一步并吸收 MSDN 上有关异步的一些材料是个好主意……[这是一个很好的起点](http://msdn.microsoft.com/en-us/library/hh191443.aspx)……

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-08T17:45:09.987

尝试这个：

```
private Task<double> JobAsync(double value)
{
    return Task.Factory.StartNew(() =>
    {
        for (int i = 0; i < 30000000; i++)
            value += Math.Log(Math.Sqrt(Math.Pow(value, 0.75)));

        return value;
    });
} 
```

# html - 组合表格、div 和 span 时的 CSS

> ID：12786759
> 
> 赞同：0
> 
> 时间：2012-10-08T17:41:15.330
> 
> 标签：html, css, html-table, django-templates

我有一个要在表格中显示的项目列表（因为我想利用引导程序中的样式）。但是因为我在[使表格可排序](https://stackoverflow.com/questions/12772569/use-jquery-sortable-with-hidden-table-rows-in-django-template)时遇到问题，所以我希望每一行基本上包含两行，一个信息行和一个详细信息行。

信息行将有一些状态图标和项目名称。详细信息行将包含任意数量的文本。

我正在使用[这个答案](https://stackoverflow.com/questions/4615348/faking-table-rows-with-divs-and-spans)在每个表行中创建两个 div/span 行：

```
<style>
    .table-row {
        display: table-row;
    }
    .data_column {
        display: table-cell;
    }
    .icon_column {
        width: 20px;
        display: table-cell;
    }
</style>

<table class="table table-condensed>
    <thead>
        <tr class="table_header">
            <th>
                <div class='table-row'>
                    <span class="icon_column"><i class="icon-ok"></i></span>
                    <span class="icon_column"><i class="icon-star icon-large"></i></span>
                    <span class="icon_column"></span>
                    <span class="data_column">Name</span>
                    <span class="data_column">Date</span>
                </div>
            </th>
        </tr>
    </thead>
    <tbody>
        {% for action in actions %}
            <tr class="item_row">
                <td>
                    <div class='table-row'>
                        <span class="icon_column"><input type="checkbox"></span>
                        <span class="icon_column"><i class="icon-star-empty icon-large"></i></span>
                        <span class="icon_column"><i class="icon-exclamation-sign icon-green"></i></span>
                        <span class="data_column">{{ action }}</span>
                        <span class="data_column">{{ action.previous_reset_date|date:"M d" }}</span>
                    </div>
                    <div class='table-row'>
                        <span>{{ action.notes|apply_markup:"creole" }}</span>
                    </div>
                </td>
            </tr>
        {% endfor %}
    </tbody>
</table> 
```

我的问题是第二个“表格行”显示得像一个单独的列。它不跨越整个表格的宽度。如果这是一张严格的表格，我需要做一些类似 colspan="5" 的事情。如何更改 css 以便这部分：

```
<div class='table-row'>
    <span>{{ action.notes|apply_markup:"creole" }}</span>
</div> 
```

是整个表格行的宽度？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T19:17:22.780

如果我从第二个 div 行中删除该类，它可以正常工作。

```
<div>
    <span>{{ action.notes|apply_markup:"creole" }}</span>
</div> 
```

# php - 尝试替换字符串时解析php中的错误

> ID：12786762
> 
> 赞同：-1
> 
> 时间：2012-10-08T17:41:26.367
> 
> 标签：php, javascript

我在下面有这行代码：

```
 foreach ($searchResults as $key=>$question) {

 echo '<tr class="questiontd"><td>'.htmlspecialchars($question).'</td>';
 echo '<td class="optiontypetd">'.htmlspecialchars($searchOption[$key]).'</td>';
 echo '<td class="noofanswerstd">'.htmlspecialchars($searchNoofAnswers[$key]).'</td>';
 echo '<td class="answertd">'.htmlspecialchars($searchAnswer[$key]).'</td>';
 echo '<td class="noofrepliestd">'.htmlspecialchars($searchReply[$key]).'</td>';
 echo '<td class="noofmarkstd">'.htmlspecialchars($searchMarks[$key]).'</td>';
 echo "<td class='addtd'><button type='button' class='add' onclick=\"parent.addwindow('$question','$searchMarks[$key]','$searchNoofAnswers[$key]','$searchOption[$key]','$searchReply[$key]','$searchAnswer[$key]');\">Add</button></td></tr>";
} 
```

现在我想用 str_repace 替换一些字符串字符，但是当我这样做时，我在上面的行中得到了这个错误：

> 解析错误：语法错误，第 154 行 ...text.php 中的意外 T_CONSTANT_ENCAPSED_STRING

如何消除此错误？

更新：

好的，我删除了前面提到的单引号，但问题是它弄乱了我的添加按钮。当我单击“添加”按钮时，我现在收到此错误：

> syntaxError：未终止的字符串文字错误：
> 
> 父.addwindow('!

在控制台中显示错误的代码行如下：

```
<button type='button' class='add' onclick="parent.addwindow('!"�$%^&*()-=\'.,:;/?#~*/\\><' 
```

如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:42:49.027

`T_CONSTANT_ENCAPSED_STRING`基本上是报价不匹配。StackOverflow 的语法高亮使颜色变化更加明显。

```
$question') 
```

删除单引号，你应该很好。

跟进：

*   [PHP 解析器令牌](http://www.php.net/manual/en/tokens.php)
*   [PHP 字符串语法](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax)

### 备择方案：

正如[Cups](https://stackoverflow.com/users/173934/cups)所提到的，您可以使用`heredoc`（尽管从可读性的角度来看，我个人认为它在这种特定情况下没有帮助——您仍然在 HTML 语法中嵌入了很多变量）。另一种方法是将`parent.addwindow`参数存储为变量，然后将其传递到字符串中（避免扩展回显行并担心引号不匹配。例如：

```
$addWindowArgs = "'" . implode("','", array(
  str_replace('"','&quot;', $question),
  $searchMarks[$key],
  $searchNoofAnswers[$key],
  $searchOption[$key],
  $searchReply[$key],
  $searchAnswer[$key]
)) . "'";

echo  "<td class=\"addtd\">"
    . "<button type=\"button\" class=\"add\" onclick=\"parent.addwindow({$addWindowArgs});\">Add</button>"
    . "</td></tr>"; 
```

或者，您可以使用`sprintf`而不是`implode`使用相同的 echo 调用：

```
$addWindowArgs = sprintf("'%s','%s','%s','%s','%s','%s'",
  str_replace('"','&quot;', $question),
  $searchMarks[$key],
  $searchNoofAnswers[$key],
  $searchOption[$key],
  $searchReply[$key],
  $searchAnswer[$key]
); 
```

如果某些参数是数字，有些是字符串等，这可以为您提供更多控制。

# php - 共享主机的密码安全 (PHP 5.2+)

> ID：12786774
> 
> 赞同：0
> 
> 时间：2012-10-08T17:42:35.293
> 
> 标签：php, security, shared-hosting

我正在研究一些旨在部署到用户服务器的 PHP——可能是廉价/共享主机（意味着最低公分母**PHP 5.2，没有修改 PHP 安装**）。[密码哈希的常见建议](https://stackoverflow.com/questions/401656/secure-hash-and-salt-for-php-passwords)似乎是 bcrypt 或 scrypt，通过 PHP 5.2 的可安装扩展。

我一直在考虑使用具有强大的每用户盐的迭代 SHA-512，但它听起来不像真的与 bcrypt/scrypt 相比。

**如果无法修改基本 PHP 安装**，我有哪些选项可以确保密码安全？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-09T06:55:16.240

我要说的第一件事是不应该考虑 PHP 5.2。它在近两年前被宣布报废，当时还没有任何安全补丁，所以任何仍在使用它的主机显然都不会认真对待安全性。这些天您应该将 5.3 视为最低版本。

不用密码...

下一版本的 PHP (v5.5) 将具有一组内置函数，可提供标准化的密码散列。这个想法是一劳永逸地摆脱 PHP 中错误密码实践的任何借口。一旦此版本发布，这将是唯一推荐的处理密码的方法。

同时，您可以下载一个兼容库，它为当前的 PHP 版本实现了相同的功能。从这里下载：[https ://github.com/ircmaxell/password_compat](https://github.com/ircmaxell/password_compat)

我的建议是使用这个库，包含在一个`if(function_exists())`包装器中。这样，您将使用最佳实践，并准备好在 5.5 发布时使用内置函数。

另请参阅：[http](http://www.h-online.com/open/news/item/PHP-5-5-should-reduce-password-sloppiness-1707835.html) ://www.h-online.com/open/news/item/PHP-5-5-should-reduce-password-sloppiness-1707835.html以供参考。

希望有帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-16T20:37:42.810

如对原始问题的评论中所述，可在[http://crackstation.net/hashing-security.htm](http://crackstation.net/hashing-security.htm)获得 PBKDF2 的 PHP < 5.2 实现。

PBKDF2 可以说是比 bcrypt/scrypt 更好的选择，它经过了更彻底的研究和测试。

# c - 是否可以将 C 结构 (struct) 序列化为 JSON 字符串 (char*)

> ID：12786777
> 
> 赞同：0
> 
> 时间：2012-10-08T17:42:41.387
> 
> 标签：c, json

我想做类似的事情：

```
const int DEFAULT_INTDATA = 0;
const char DEFAULT_STRDATA[] = "default";

typedef struct
{
    int intdata;
    char * strdata;
} DATA;

DATA data;
data.intdata = DEFAULT_INTDATA;
data.strdata = DEFAULT_STRDATA;

// output JSON string of "data".
printf("%s", JSONstringify(data)); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:45:33.303

不是一般的。标准 C 不具备在运行时获取数据字段的名称和类型所需的反射功能。

您当然可以为某个结构编写一个 JSON 序列化程序，但不能使用任何结构并将其转换为 JSON 或从 JSON 转换为 JSON 序列化器。

# facebook - Facebook 集成设置部分 - 它在哪里？

> ID：12786779
> 
> 赞同：-2
> 
> 时间：2012-10-08T17:42:45.117
> 
> 标签：facebook, facebook-apps, facebook-iframe

我要么很愚蠢，要么文档需要更新。请告诉我 ：）

在此页面上[https://www.facebook.com/note.php?note_id=10150149060995844](https://www.facebook.com/note.php?note_id=10150149060995844)说：

```
将“IFrame 大小”更改为“自动调整大小”

在您的应用开发者页面上，在您应用的“编辑设置”部分中，
在“Facebook 集成”部分，
确保“IFrame Size”设置为“Auto-resize”，
不是“显示滚动条”。

```

我在开发者网站上找不到！:(他们到底把它藏在哪里了？:o

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T19:00:38.743

您提供的链接不是官方 Facebook 文档。

有关如何构建 Canvas 应用程序的信息（包括有关尺寸信息的部分），请参阅：[https ://developers.facebook.com/docs/appsonfacebook/tutorial/](https://developers.facebook.com/docs/appsonfacebook/tutorial/)

本文档提供了有关如何制作流体大小的 Canvas 应用程序的信息：[https ://developers.facebook.com/blog/post/549/](https://developers.facebook.com/blog/post/549/)

# bash - 如何从 RPM -qi 命令获取发布值

> ID：12786783
> 
> 赞同：0
> 
> 时间：2012-10-08T17:42:51.283
> 
> 标签：bash

我在 RedHat 上，我需要获取 Release 字段中的值。以“wget”为例。

这是我期望得到的输出

```
WGET:    1.4.el6 
```

这是 rpm -qi wget 的输出

```
[luke@machine ~]# rpm -qi wget
Name        : wget                         Relocations: (not relocatable)
Version     : 1.12                              Vendor: Red Hat, Inc.
Release     : 1.4.el6                       Build Date: Mon May 10 14:56:18 2010
Install Date: Wed Oct  3 16:48:58 2012         Build Host: x86-012.build.bos.redhat.com
Group       : Applications/Internet         Source RPM: wget-1.12-1.4.el6.src.rpm
Size        : 1877597                          License: GPLv3+ and GFDL
Signature   : RSA/8, Mon Aug 16 21:21:35 2010, Key ID 199e2f91fd431d51
Packager    : Red Hat, Inc. <http://bugzilla.redhat.com/bugzilla>
URL         : http://wget.sunsite.dk/
Summary     : A utility for retrieving files using the HTTP or FTP protocols 
```

如何编写脚本以从 Release 字段中提取“1.4.el6”。

我目前有

```
#!/bin/bash
RELwg= rpm -qi wget
# Do string manipulation of $RELwg here
wg="WGET:   "
echo $wg$RELwg 
```

但这是我得到的输出；

```
Release     : 1.4.el6                       Build Date: Mon May 10 14:56:18 2010
WGET: 
```

我知道我必须进行一些字符串提取才能获得号码。

*   获取 1 的索引，似乎总是恒定在 15
*   获取 B 在 Build Date 中的索引
*   获取介于 15 和 B 之间的子字符串

在我当前的脚本中删除“RELwg = rpm -qi wget”之间的空格，我只是得到一个错误说

> ./GetRPMVersions.sh：第 12 行：-qi：找不到命令

主要是我目前的困境是添加 rpm -qi wget | 的输出 grep 释放到一个变量。

欢迎任何关于字符串操作的输入。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T07:14:39.010

这个怎么样：

```
RELwg=$(rpm -q --queryformat='%{RELEASE}' wget) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:45:42.403

就像是

```
RELwg=$(rpm -qi wget | awk -- '/^Release/ { print $3 }') 
```

# android - Android/其他移动平台上的底层通信

> ID：12786787
> 
> 赞同：4
> 
> 时间：2012-10-08T17:43:26.920
> 
> 标签：android, mobile, communication, gsm, low-level

Android 有它的 NDK 来处理本机代码。我只是想知道你可以在这个平台上进行多深的低级编程——例如你是否可以控制手机通过 GSM/UMTS 网络传输的内容或查看接收到的原始数据。

*在其 API 范围内的此/其他平台上通常可以使用嵌入式电话调制解调器吗？*

我认为干扰较低的通信层（例如对语音数据进行压缩，更改编码等）意味着玩弄通信模块的固件，并且通常是手机制造商不官方支持的。

*无论如何，您可以推荐阅读或搜索有关此主题的内容吗？*

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T20:51:50.317

一个公共 API 包（就您的要求而言，它并不是很丰富）：http: [//developer.android.com/reference/android/telephony/package-summary.html](http://developer.android.com/reference/android/telephony/package-summary.html)

关于低级 API（Android 的无线电接口层），您可以在此处阅读：http: [//www.netmite.com/android/mydroid/development/pdk/docs/telephony.html](https://web.archive.org/web/20120430043507/http://www.netmite.com/android/mydroid/development/pdk/docs/telephony.html)

关于实施（修改）RIL： http: [//www.netmite.com/android/mydroid/development/pdk/docs/telephony.html#androidTelephonyRILImplementing](https://web.archive.org/web/20120430043507/http://www.netmite.com/android/mydroid/development/pdk/docs/telephony.html#androidTelephonyRILImplementing)

但是，在这种情况下，您需要接触 Android 源代码，因此对于应用程序开发，它不是一个选项。

# batch-file - 重命名批处理文件中的文件路径

> ID：12786792
> 
> 赞同：2
> 
> 时间：2012-10-08T17:43:47.320
> 
> 标签：batch-file

我需要在批处理文件中执行几个重命名命令，并希望将批处理文件存储在与存储需要重命名的文件的目录不同的目录中。

以下是示例文件

```
ren C:\test\old1.txt new1.txt 

ren C:\test\old2.txt new2.txt 
```

理想情况下，我希望不必每次都复制目录路径，因为我可能需要更改这些文件所在的文件夹。我尝试了以下但它不起作用。可能我没有正确理解 set 命令。

```
set dirpath=C:\test\

ren %dirpath%old1.txt new1.txt 

ren %dirpath%old2.txt new2.txt 
```

任何想法如何实现这种效果。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T17:47:18.043

您的批处理文件似乎是正确的。只是为了使它与包含嵌入空格的路径名一起使用，在名称周围加上双引号，如下所示：

```
set dirpath=C:\test\

ren "%dirpath%old.txt" new.txt 
```

显然，如果您有硬编码路径 ( `C:\test\`)，您甚至不需要它。我在本地尝试了您的批处理文件并且工作正常。

# jquery - jquery在活动上刷新div

> ID：12786793
> 
> 赞同：0
> 
> 时间：2012-10-08T17:43:47.907
> 
> 标签：jquery, html, refresh

我使用（Ajax/jQuery、MySQL、PHP）制作了简单的聊天框应用程序。这是我的应用程序：[http](http://userhelio.byethost13.com/Chatvv/index.php) ://userhelio.byethost13.com/Chatvv/index.php 。正如您可以看到的（当您突出显示消息文本时）div 标签每秒刷新一次。我只想在单击“发送消息”按钮（提交按钮）时刷新 div 标签。换句话说，当页面上有活动时。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:02:04.243

代码中的 setInterval() 语句可能是导致它每秒刷新的罪魁祸首：

```
setInterval(function() { $('#result').load('data.php'); }, 500); 
```

从您的一个脚本文件中删除它，它应该一直停止刷新。而是将其替换为您的按钮的单击处理程序，该处理程序在间隔函数中执行代码块。

您可以按如下方式设置它（假设您的按钮的 ID 为“buttonID”）：

```
$('#buttonID').click(function () { $('#result').load('data.php'); }); 
```

要在页面上进行初始加载，请添加以下内容：

```
$(document).ready(function () { $('#result').load('data.php'); }); 
```

# javascript - 在 SVG 中动态绘制矩形

> ID：12786797
> 
> 赞同：20
> 
> 时间：2012-10-08T17:43:58.170
> 
> 标签：javascript, html, svg

我想知道如何用 SVG 绘制 100 个矩形。

我用这段代码做了一个矩形：

```
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">
<body>

  <svg id="svgOne" xmlns="http://www.w3.org/2000/svg" width="5000" height="3000">
    <rect x="50" y="50" width="50" height="50" fill="black" />
  </svg>

</body>
</html> 
```

我想画 100 个大小相同、位置不同的矩形（如 10 个行和 10 个行）。如何快速完成？一些循环？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2012-10-08T17:52:31.927

您可以使用以下循环填充屏幕：

```
var svgns = "http://www.w3.org/2000/svg";
for( var x=0; x < 5000; x += 50 ){
  for( var y=0; y < 3000; y += 50 ){
    var rect = document.createElementNS( svgns,'rect' );
    rect.setAttributeNS( null,'x',x );
    rect.setAttributeNS( null,'y',y );
    rect.setAttributeNS( null,'width','50' );
    rect.setAttributeNS( null,'height','50' );
    rect.setAttributeNS( null,'fill','#'+Math.round( 0xffffff * Math.random()).toString(16) );
    document.getElementById( 'svgOne' ).appendChild( rect );
  }
}
```

```
body{overflow:hidden; margin:0; }
svg{width:100vw; height:100vh;}
```

```
<svg id='svgOne'></svg>
```

如果你只想要 100 个随机放置的方块，你可以这样做：

```
for (var i = 0; i < 100; i++) {
  var x = Math.random() * 5000,
      y = Math.random() * 3000;

  var rect = document.createElementNS(svgns, 'rect');
  rect.setAttributeNS(null, 'x', x);
  rect.setAttributeNS(null, 'y', y);
  rect.setAttributeNS(null, 'width', '50');
  rect.setAttributeNS(null, 'height', '50');
  rect.setAttributeNS(null, 'fill', '#'+Math.round(0xffffff * Math.random()).toString(16));
  document.getElementById('svgOne').appendChild(rect);
} 
```

[第二个的jsfiddle](http://jsfiddle.net/kzbwg/)

# magento - Magento - 放置 WSDL 模式的最佳位置

> ID：12786798
> 
> 赞同：0
> 
> 时间：2012-10-08T17:43:59.637
> 
> 标签：magento, wsdl, payment-gateway

我正在为涉及*SOAP*请求的 Magento 开发自定义付款方式。该服务提供了我应该使用的**wsdl模式。**但我正在努力决定，按照 Magento 模块结构放置它的最佳位置是什么。

现在我正在考虑使用*etc*目录，但我对此有些担心，因为这个目录应该只有*xml*配置文件。如果有人已经遇到过这样的问题，请告诉我，你认为最好的架构方法是什么。

我知道，我最终会得到什么位置并不是什么大不了的事，但我宁愿遵循现有的模式，如果它存在的话......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:00:20.363

You can refer to the magento core modules: app/code/core/Mage/Usa/etc/wsdl/FedEx

Etc directory is used for storing all configuration and service data, so you can add your wsdl file to the etc directory too.

# c# - Visual Studio 2012 网络共享

> ID：12786800
> 
> 赞同：6
> 
> 时间：2012-10-08T17:44:18.793
> 
> 标签：c#, visual-studio-2010, visual-studio, virtual-machine, network-share

我使用 Parallels 在 VM 上模拟 Windows 8。为了简单和连贯，我将所有开发人员项目都存储在 Mac 的分区上。

当我尝试构建一个运行此网络共享的应用程序 (Visual Studio 2012) 时，我收到以下编译时错误：

`Error 1 Error : DEP0700 : Registration of the app failed. Rejecting a request to register from file:///Z:/Users/MY_USER_NAME/Sites/App1/App1/bin/Debug/AppX/AppxManifest.xml because the files are on a network share. Copy the files to the local computer before registering the package. (0x80073cf9) App1`

有谁知道如何解决这个问题？我需要告诉 Visual Studio 2012 我的网络共享是受信任的设备，或者至少欺骗它认为项目位于本地驱动器中。无论如何在Windows中创建符号链接？

在 Visual Studio 2010 中，我解决了这个网站上概述的这个问题：[http ://www.sehajpal.com/index.php/2010/10/how-to-solve-loadfromremotesources-error-in-vs-2010/](http://www.sehajpal.com/index.php/2010/10/how-to-solve-loadfromremotesources-error-in-vs-2010/)

谢谢您的帮助！

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-08T18:10:58.213

[Gearard Boland 的这篇文章](http://social.msdn.microsoft.com/Forums/en-US/winappswithhtml5/thread/3fc1f3cf-2d8b-4dee-a348-40d0bf2c3c66/)解决了这个问题。希望这对通过网络共享进行开发的其他任何人都派上用场：

> 是的，设计使您无法从网络驱动器运行 Metro 应用程序，而从 Visual Studio 部署基本上将应用程序注册到系统而无需实际打包和安装它（因此它不会被放入正常的安装位置，即当地的）。
> 
> 您仍然可以使用网络驱动器上的源代码，但您必须覆盖部署位置，默认情况下位于项目的根目录下（例如`bin\`）。你有几个选择：
> 
> 1.  您可以从本地调试切换到远程调试并将机器名称设置为“localhost”。这将在您的本地机器上进行远程部署（因此不使用项目的目录）。您无需安装 Remote Debugger 工具，也无需启动`msvsmon`它即可在 localhost 上运行。
> 2.  您可以覆盖项目的输出目录。右键单击项目并将输出目录更改为：`$(Temp)\$(MSBuildProjectName)\bin\$(Configuration)`，其中`Temp`是指向您的 Temp 目录的环境变量。
> 3.  如果您仍然希望正常输出位于源旁边，例如当您构建 appx 包等时，您可以仅覆盖布局目录而不是整个输出路径。为此，您需要直接修改项目文件（例如 *.jsproj、*.csproj、...）以添加新值：
>     
>     
>     
>     ```
>      <PropertyGroup>
>         <LayoutDir>C:\WorkingFolder\$(MSBuildProjectName)\$(Configuration)</LayoutDir>
>      </PropertyGroup> 
>     ```
>     
>     
> 
> 希望有帮助。

# javascript - Jquery获取系列中最后一个元素内的最后一行表

> ID：12786801
> 
> 赞同：7
> 
> 时间：2012-10-08T17:44:25.393
> 
> 标签：javascript, jquery, html, ajax

我有一系列基于部分的幻灯片：

```
<div id="slides">
    <section id="first">
        <section>
            <table>
                <thead>
                </thead>
                <tbody>
                    <tr id="somethingUnique">
                    ...
                    </tr>
                </tbody>
            </table>
        </section>
        <section>
            <table>
                <thead>
                </thead>
                <tbody>
                    <tr id="somethingUnique">
                    ...
                    </tr>
                </tbody>
            </table>
        </section> 
       ...
    </section>
</div> 
```

我需要从#first 部分的最后一部分的表中选择获取最后一行的ID。

我正在使用以下 Jquery，得到“未定义”……有什么想法吗？

```
 var lastListItem = $('#first:last-child table>tbody>tr:last').attr("id");
    alert(lastListItem); 
```

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-10-08T17:45:58.483

```
$('#first table:last tr:last') 
```

或者：

```
$('#first tr:last') 
```

* * *

[http://jsfiddle.net/hunter/QMzHH/](http://jsfiddle.net/hunter/QMzHH/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:47:02.530

```
var lastListItem = $("#first").find("section").last().find("tr").last().attr("id"); 
```

我更喜欢使用 [0].id 而不是 .attr("id") 因为它少了一个方法调用；但是，如果您不确定在该 DOM 位置始终有一个表，则 attr 更安全。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:59:49.300

The other answers work but the problem with your attempt is the fact that `:last-child` has to be applied to the child element (`section`), not the parent (`#first`). The following should work

```
$('#first section:last-child table>tbody>tr:last').attr("id"); 
```

And could be simplified to

```
$('#first section:last-child tr:last-child').attr("id"); 
```

[http://jsfiddle.net/e7mUD/1](http://jsfiddle.net/e7mUD/1)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T17:48:46.267

**[。寻找（）：](http://api.jquery.com/find/)**

> 获取当前匹配元素集中每个元素的后代，由选择器、jQuery 对象或元素过滤。

```
​$("#first")​.find("tr:last").attr("id") 
```

或者在这种情况下更简单：

```
$("#first tr:last").attr("id") 
```

**[例子](http://jsfiddle.net/zeef4/2/)**

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-08T17:46:53.333

```
var lastListItem = $('#first section:last  table tr:last').attr("id"); 
```

# c++ - 从 C++ 访问 ListElement (QML) 颜色

> ID：12786803
> 
> 赞同：4
> 
> 时间：2012-10-08T17:44:40.847
> 
> 标签：c++, properties, qml

我尝试访问 ListElement (QML):color; 的属性；

```
ListModel {
    id:myListModel
    ListElement {name:"one" ;color:"red";objectName:"first"}
    ListElement(name:"two";color:"green"}
} 
```

在 C++ 中我必须使用：

```
QObject* o=ui->declarativeView->rootObject()->findChild<QObject*>("first");
  o->setProperty("color","blue"); 
```

但我无法访问此属性。请帮忙。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-09T01:59:19.880

A`ListModel`不被解析为典型的 QML，而是使用自定义解析器来处理 ListElement 声明。这允许模型避免为每个数据元素创建昂贵的对象。 `ListModel`具有许多可用于通过 QML 操作模型数据的函数。您可以将自己的函数添加到 QML 中的模型中，您可以从 C++ 访问这些函数，例如

```
ListModel {
    id:myListModel
    objectName: "model"
    function setColor(index, color) {
        myListModel.setProperty(index, "color", color)
    }
    ListElement {name:"one";color:"red"}
    ListElement {name:"two";color:"green"}
} 
```

在 C++ 中：

```
QObject* o=ui->declarativeView->rootObject()->findChild<QObject*>("model");
QMetaObject::invokeMethod(o, "setColor", Q_ARG(QVariant, 0), Q_ARG(QVariant, "yellow")); 
```

# css - 将鼠标悬停在元素上并突出显示具有相同类的所有元素

> ID：12786810
> 
> 赞同：22
> 
> 时间：2012-10-08T17:45:15.017
> 
> 标签：css

我在网页上有许多具有相同类的元素。当我悬停其中一个元素时，我想突出显示所有这些元素。我怎样才能在 CSS 中做到这一点？

现在，我有这个 CSS：

```
p.un:hover { background-color:yellow;} 
```

还有我的 HTML：

```
<div class="book">
  <div class="page left">
    <p class="un">Karen…&lt;/p>
  </div>
   <div class="page right">
     <p class="un">Karen ne se retourne pas. Mme Tilford reste là, apparemment confuse et abattue.</p>
   </div> 
```

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-08T17:49:09.120

使用纯 CSS 可以做到的最好的事情是：

```
.classname:hover ~ .classname {
    background-color: yellow;
} 
```

但这只会在悬停元素`classname` **之后突出显示所有具有类的兄弟姐妹。**

您必须使用 JavaScript 突出显示所有元素；

```
var elms = document.getElementsByClassName("classname");
var n = elms.length;
function changeColor(color) {
    for(var i = 0; i < n; i ++) {
        elms[i].style.backgroundColor = color;
    }
}
for(var i = 0; i < n; i ++) {
    elms[i].onmouseover = function() {
        changeColor("yellow");
    };
    elms[i].onmouseout = function() {
        changeColor("white");
    };
} 
```

如果您有多个类并想要概括这一点，请使用以下内容：

```
var classes = ["one", "two", "three"]; //list of your classes
var elms = {};
var n = {}, nclasses = classes.length;
function changeColor(classname, color) {
    var curN = n[classname];
    for(var i = 0; i < curN; i ++) {
        elms[classname][i].style.backgroundColor = color;
    }
}
for(var k = 0; k < nclasses; k ++) {
    var curClass = classes[k];
    elms[curClass] = document.getElementsByClassName(curClass);
    n[curClass] = elms[curClass].length;
    var curN = n[curClass];
    for(var i = 0; i < curN; i ++) {
        elms[curClass][i].onmouseover = function() {
            changeColor(this.className, "yellow");
        };
        elms[curClass][i].onmouseout = function() {
            changeColor(this.className, "white");
        };
    }
}; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-21T10:18:54.937

感谢克里斯的回答。我用他的代码编写了一个简单的函数来完成这项工作。您可以将函数放置在中，`<head></head>` 但您需要在页面加载后调用它，即放置在正文的末尾。colorout 是背景色

功能：

```
function hoverByClass(classname,colorover,colorout="transparent"){
    var elms=document.getElementsByClassName(classname);
    for(var i=0;i<elms.length;i++){
        elms[i].onmouseover = function(){
            for(var k=0;k<elms.length;k++){
                elms[k].style.backgroundColor="orange";//colorover;
            }
        };
        elms[i].onmouseout = function(){
            for(var k=0;k<elms.length;k++){
                elms[k].style.backgroundColor=colorout;
            }
        };
    }
} 
```

并像这样调用函数：

```
hoverByClass("un","yellow");
hoverByClass("un2","pink"); 
```

我知道这个问题很老，但也许可以帮助别人:)

在这里试试：

```
function hoverByClass(classname,colorover,colorout="transparent"){
	var elms=document.getElementsByClassName(classname);
	for(var i=0;i<elms.length;i++){
		elms[i].onmouseover = function(){
			for(var k=0;k<elms.length;k++){
				elms[k].style.backgroundColor=colorover;
			}
		};
		elms[i].onmouseout = function(){
			for(var k=0;k<elms.length;k++){
				elms[k].style.backgroundColor=colorout;
			}
		};
	}
}
hoverByClass("un","yellow");
hoverByClass("un2","pink");
```

```
<div class="book">
  <div class="page left">
    <p class="un">Karen…&lt;/p><p class="un2">Karen2…&lt;/p>
  </div>
  <div class="page right">
    <p class="un">Karen ne se retourne pas. Mme Tilford reste là, apparemment confuse et abattue.</p><p class="un2">Karen2 ne se retourne pas. Mme Tilford2 reste là, apparemment confuse et abattue.</p>
  </div>
</div>
```

# javascript - 文件 API - Blob 到 JSON

> ID：12786818
> 
> 赞同：29
> 
> 时间：2012-10-08T17:45:42.710
> 
> 标签：javascript, json, html, websocket

我正在尝试用 HTML5、WebSocket 和 File API 做一些实验。我正在使用 Tomcat7 WebSocket 实现。我能够从 servlet 发送和接收文本消息。我现在要做的是从 servlet 发送到客户端 JSON 对象，但我想避免文本消息以跳过客户端上的 JSON.parse （或类似的），所以我试图发送二进制消息. servlet 部分非常简单：

```
String s = "{arr : [1,2]}";
CharBuffer cbuf = CharBuffer.wrap(s);      
CharsetEncoder encoder = Charset.forName("UTF-8").newEncoder();      
getWsOutbound().writeBinaryMessage(encoder.encode(cbuf));
getWsOutbound().flush(); 
```

在这条消息之后，在客户端我看到我收到了一个二进制帧，它被转换为一个 Blob 对象（[http://www.w3.org/TR/FileAPI/#dfn-Blob](http://www.w3.org/TR/FileAPI/#dfn-Blob)）。问题是：是否可以从 Blob 中获取 JSON 对象？我查看了 FileReader 接口（[http://www.w3.org/TR/FileAPI/#FileReader-interface](http://www.w3.org/TR/FileAPI/#FileReader-interface)），我使用这样的代码来检查 FileReader 可以做什么（第一行创建了一个全新的Blob，因此您可以根据需要即时测试）：

```
var b = new Blob([{"test": "toast"}], {type : "application/json"});
var fr = new FileReader();
fr.onload = function(evt) {
    var res = evt.target.result;
    console.log("onload",arguments, res, typeof res);
};
fr.readAsArrayBuffer(b); 
```

使用我在文件阅读器实现中看到的所有“readAs...”方法（我使用的是 Chrome 22）。反正我没有找到有用的东西。

你有什么建议吗？谢谢。

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2017-09-04T15:41:33.373

您应该尝试[使用 readAsText()](https://developer.mozilla.org/en-US/docs/Web/API/FileReader/readAsText)而不是`readAsArrayBuffer()`（JSON 最终是文本）。

您还错过了对对象进行字符串化（转换为 JSON 文本）

```
var b = new Blob([JSON.stringify({"test": "toast"})], {type : "application/json"}),
    fr = new FileReader();

fr.onload = function() {
    console.log(JSON.parse(this.result))
};

fr.readAsText(b); 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-10-08T20:45:23.547

你所做的在概念上是错误的。JSON 是对象的字符串表示形式，而不是对象本身。因此，当您通过网络发送 JSON 的二进制表示时，您发送的是字符串的二进制表示。无法绕过在客户端解析 JSON 以将 JSON 字符串转换为 JavaScript 对象。

您绝对应该始终将 JSON 作为文本发送到客户端，并且您应该始终调用 JSON.parse。对你来说，没有什么是容易的。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2021-05-11T01:09:36.473

要将包含 JSON 数据的`Blob`/转换为 JavaScript 对象，请使用它：`File`

```
JSON.parse(await blob.text()); 
```

* * *

这个例子：

*选择一个 JSON 文件，然后你可以在浏览器的控制台（`json`对象）中使用它。*

```
const input = document.createElement("input");
input.type = "file";
input.accept = "application/json";
document.body.append(input);
input.addEventListener("change", async event => {
    const json = JSON.parse(await input.files[0].text());

    console.log("json", json);
    globalThis.json = json;
});
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2019-04-13T08:27:34.380

```
let reader = new FileReader()
      reader.onload = e => {
        if (e.target.readyState === 2) {
          let res = {}
          if (window.TextDecoder) {
            const enc = new TextDecoder('utf-8')
            res = JSON.parse(enc.decode(new Uint8Array(e.target.result))) //转化成json对象
          } else {
            res = JSON.parse(String.fromCharCode.apply(null, new Uint8Array(e.target.result)))
          }

          console.info('import-back:: ', res)

        }
      }

      reader.readAsArrayBuffer(response) 
```

# php - 变量的单数或复数设置。PHP

> ID：12786819
> 
> 赞同：2
> 
> 时间：2012-10-08T17:45:42.763
> 
> 标签：php, variables, singular

有很多问题解释了如何回显单数或复数变量，但没有人回答我关于如何设置变量以包含所述单数或复数值的问题。

我原以为它会按如下方式工作：

```
$bottom="You have favourited <strong>$count</strong> " . $count == 1 ? 'user':'users'; 
```

然而，这不起作用。

有人可以建议我如何实现上述目标吗？

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-06-04T19:17:18.620

你可以试试我写的这个函数：

```
/**
 * Pluralizes a word if quantity is not one.
 *
 * @param int $quantity Number of items
 * @param string $singular Singular form of word
 * @param string $plural Plural form of word; function will attempt to deduce plural form from singular if not provided
 * @return string Pluralized word if quantity is not one, otherwise singular
 */
public static function pluralize($quantity, $singular, $plural=null) {
    if($quantity==1 || !strlen($singular)) return $singular;
    if($plural!==null) return $plural;

    $last_letter = strtolower($singular[strlen($singular)-1]);
    switch($last_letter) {
        case 'y':
            return substr($singular,0,-1).'ies';
        case 's':
            return $singular.'es';
        default:
            return $singular.'s';
    }
} 
```

用法：

```
pluralize(4, 'cat'); // cats
pluralize(3, 'kitty'); // kitties
pluralize(2, 'octopus', 'octopii'); // octopii
pluralize(1, 'mouse', 'mice'); // mouse 
```

显然有很多特殊的词，这个函数不会正确复数，但这就是`$plural`参数的用途:-)

看看[维基百科](https://en.wikipedia.org/wiki/English_plurals)，看看多元化是多么复杂！

* * *

## 回答 #2

> 赞同：27
> 
> 时间：2009-10-07T21:06:03.390

您可能想查看[gettext 扩展名](http://php.net/gettext)。更具体地说，它听起来`ngettext()`会做你想做的事：只要你有一个数字可以计数，它就会正确地复数单词。

```
print ngettext('odor', 'odors', 1); // prints "odor"
print ngettext('odor', 'odors', 4); // prints "odors"
print ngettext('%d cat', '%d cats', 4); // prints "4 cats" 
```

您还可以让它正确处理翻译的复数形式，这是它的主要目的，尽管它需要做很多额外的工作。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2009-10-07T21:01:14.040

IMO 最好的方法是为每种语言设置一个包含所有复数规则的数组，即为`array('man'=>'men', 'woman'=>'women');`每个单数单词编写一个复数（）函数。

您可能想看看 CakePHP 变形器以获得一些灵感。

[https://github.com/cakephp/cakephp/blob/master/src/Utility/Inflector.php](https://github.com/cakephp/cakephp/blob/master/src/Utility/Inflector.php)

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2012-10-08T17:53:09.103

这将解决您的问题，这要归功于 mario 和[三元运算符以及字符串连接怪癖？](https://stackoverflow.com/questions/1317383/ternary-operator-and-string-concatenation-quirk)

```
$bottom = "You have favourited <strong>$count</strong> " . ($count == 1 ? 'user':'users'); 
```

* * *

## 回答 #5

> 赞同：5
> 
> 时间：2015-07-14T01:15:09.303

欣赏：[https ://github.com/ICanBoogie/Inflector](https://github.com/ICanBoogie/Inflector)

> 多语言变形器，可将单词从单数转换为复数，将下划线转换为驼峰式等等。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2009-10-11T09:35:11.787

如果您打算编写自己的复数函数，那么您可能会发现这个复数的算法描述很有帮助：

[http://www.csse.monash.edu.au/~damian/papers/HTML/Plurals.html](http://www.csse.monash.edu.au/~damian/papers/HTML/Plurals.html)

或者更简单的方法可能是使用 Internet 上提供的现成的复数功能之一：

~~[http://www.eval.ca/2007/03/03/php-pluralize-method/](http://www.eval.ca/2007/03/03/php-pluralize-method/)~~

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-10-08T18:02:58.490

对于`$count = 1`：

```
 "You have favourited <strong>$count</strong> " . $count == 1 ? 'user' : 'users';
=>               "You have favourited <strong>1</strong> 1" == 1 ? 'user' : 'users';
=>                                                        1 == 1 ? 'user' : 'users';
=>                                                          true ? 'user' : 'users';
// output: 'user' 
```

PHP解析器（正确地）假设问号左侧的所有内容都是条件，除非您通过添加自己的括号来更改优先顺序（如其他答案中所述）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2012-10-08T17:50:40.300

您可以尝试使用`$count < 2`因为`$count`也可以`0`

```
$count =1;
$bottom = sprintf("You have favourited <strong>%d %s</strong>", $count, ($count < 2 ? 'user' : 'users'));
print($bottom); 
```

输出

```
You have favourited 1 user 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2012-10-08T17:51:13.287

这是一种方法。

```
$usersText = $count == 1 ? "user" : "users";
$bottom = "You have favourited <strong>" . $count . "</strong> " , $usersText; 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2017-07-18T11:01:16.430

定制、透明和无扩展的解决方案。不确定它的速度。

```
/**
 * Custom plural
 */
function splur($n,$t1,$t2,$t3) {
    settype($n,'string');
    $e1=substr($n,-2);
    if($e1>10 && $e1<20) { return $n.' '.$t3; } // "Teen" forms
    $e2=substr($n,-1);
    switch($e2) {
        case '1': return $n.' '.$t1; break;
        case '2': 
        case '3':
        case '4': return $n.' '.$t2; break;
        default:  return $n.' '.$t3; break;
    }
} 
```

乌克兰语/俄语的用法：

```
splur(5,'сторінка','сторінки','сторінок') // 5 сторінок
splur(4,'сторінка','сторінки','сторінок') // 4 сторінки
splur(1,'сторінка','сторінки','сторінок') // 1 сторінка
splur(12,'сторінка','сторінки','сторінок') // 12 сторінок

splur(5,'страница','страницы','страниц') // 5 страниц
splur(4,'страница','страницы','страниц') // 4 страницы
splur(1,'страница','страницы','страниц') // 1 страница
splur(12,'страница','страницы','страниц') // 12 страниц 
```

# c++ - 请帮助“EXC_BAD_ACCESS（代码 2）”

> ID：12786821
> 
> 赞同：1
> 
> 时间：2012-10-08T17:45:48.253
> 
> 标签：c++, exc-bad-access

我正在编写一个 C++ 程序，它从外部文本文件中读取有关书籍的信息，将信息存储在一个数组中，并编写一个包含每本书的标题和价格的新文件。在编译时没有错误，但是当我运行程序时，我会在屏幕上弹出一堆内存位置并出现错误

> “线程 1：EXC_BAD_ACCESS（代码 2）”

如果在英特尔 mac 上使用 xcode 很重要。下面的代码带有问题的一些屏幕截图。谢谢

编码：

```
//main.cpp

include <iostream>
include <fstream>
include "Book.h"
include "textbook.h"
include "Name.h"
using namespace std;

int main() 
{

string title, authorf, authorl, publisher, isbn, subject;
int pages, i = 0, j = 0;
float price, rentalp;
char code;
static int bookCount = 0, textbookCount = 0;

ifstream file1, file2;
ofstream newFile;

file1.open("/Users/TVaughn/Documents/School Stuff/Fall 2012/CS 246/In Class Programs/Book/Book/Data.txt", ios::in); //Opening the data.txt file to read from.
newFile.open("/Users/TVaughn/Documents/School Stuff/Fall 2012/CS 246/In Class Programs/Book/Book/Title.txt", ios::out); //Creating a new file to store titles & prices of all the books.

book bookList[3];

while (!file1.eof()) {

    getline (file1, title, ',');
    getline (file1, authorf, ',');
    getline (file1, authorl, ',');
    getline (file1, publisher, ',');
    getline (file1, isbn, ',');
    file1 >> pages;
    file1.ignore();
    file1 >> price;
    file1.ignore();
    file1 >> code;
    file1.ignore(10, '\n');

    book b1(title, authorf, authorl, publisher, pages, isbn, price, code);
    bookList[i] = b1; //initalizing the first element of the array to b1
    newFile << "Title: " << bookList[i].getTitle() << "\n" << "Price: " << bookList[i].getPrice() << "\n\n"; //storing the title and price of all the books in a new file called titles.
    bookList[i].PrintBook();
    i++;
    bookCount++;

 }

 file1.close();

file2.open("/Users/TVaughn/Documents/School Stuff/Fall 2012/CS 246/In Class Programs/Book/Book/TextbookData.txt", ios::in); //Opening the TextbookData.txt file to read from.
textbook TbookList[2];

while (!file2.eof()) {

    getline (file2, title, ','); //retrieving info from data.txt and storing that info into variables so the variable may be passed as arguments in my textbook object b2.
    getline (file2, authorf, ',');
    getline (file2, authorl, ',');
    getline (file2, isbn, ',');
    file2 >> pages;
    file2.ignore();
    file2 >> price;
    file2.ignore();
    getline(file2, subject, ',');
    file2 >> code;
    file2 >> rentalp;
    file2.ignore(10, '\n');

    textbook b2(title, authorf, authorl, publisher, pages, isbn, price, code, subject, rentalp);
    TbookList[j] = b2; //initalizing the first element of the array to b2.
    newFile << "Title: " << bookList[j].getTitle() << "\n" << "Price: " << bookList[j].getPrice() << "\n\n";
    TbookList[j].PrintBook();
    j++;
    textbookCount++;

}

file2.close();
newFile.close();

cout << "Number of books: " << bookCount << "\nNumber of textbooks: " << textbookCount << endl;

book b3("C++ Data Structures", "Nell B.", "Dale", "Jones & Bartlett Publishers", 781, "9780763741587", 107.67, 'A'); //This line is used to test the exception handeling.

try {

    b3.setPrice(price);
    b3.setPages(pages);

}

catch (book::negativeNumber) {

    cout << "Negative price was entered \n\n" << "End of program \n";
}

return 0;
}

//book.h
#include <iostream>
#include "Name.h"
#include <string>
using namespace std;

#ifndef BOOK_H
#define BOOK_H

class book
{
private:
    string title; 
    Name aurthor; 
    string publisher; 
    string ISBN; 
    int pages; 
    float price; 
    char code; 

public:
    class negativeNumber{};
    void setTitle(string);
    void setAurthor(string f, string l);
    void setPublisher(string);
    void setISBN(string);
    void setPages(int);
    void setPrice(float);
    void setCode(char);
    string getTitle();
    Name getAurthor();
    string getPublisher();
    string getISBN();
    int getPages();
    float getPrice();
    char getCode();
    void PrintBook();
    book(); //default constructor
    book(string, string, string, string, int, string, float, char); 
    ~book(); //Destructor

};
#endif

//Book.cpp
#include <iostream>
#include <string>
#include "Book.h" 
#include "Name.h"
using namespace std;

book::book() {

title = "Southern Charm";
Name::Name(); 
publisher = "Impact Publishers";
pages = 223;
ISBN = "234-232-10009045";
price = 14.99;
code = 'L';

}

book::book(string the_title, string f, string l, string the_pub, int page_num, string the_ISBN, float the_price, char the_c)
{
title = the_title;
//Name(f, l);
aurthor.setfName(f);
aurthor.setlName(l); 
publisher = the_pub;
pages = page_num;
ISBN = the_ISBN;
price = the_price;
code = the_c;

}

book::~book()
{

}

void book::setTitle(string t)
{
title = t;
}

void book::setAurthor(string f, string l)
{
aurthor.setfName(f);
aurthor.setlName(l);
}

void book::setPublisher(string pub)
{
publisher = pub;
}

void book::setISBN(string ISBN_num)
{
ISBN = ISBN_num;
}

void book::setPages(int p) {

if (pages > 0) 
    pages = p;
else
    throw negativeNumber();

}

void book::setPrice(float cost) {

if (price >= 0) //This is called exception handling. 
    price = cost;

    else
        throw negativeNumber();

}

void book::setCode(char c) {
code = c;
}

string book::getTitle() {
return title;
}

Name book::getAurthor(){

return aurthor;

}

string book::getPublisher() {

return publisher;
}

string book::getISBN(){

return ISBN;
}

int book::getPages() {

return pages;
}

float book::getPrice() {

return price;
}

char book::getCode() {

return code;
}

void book::PrintBook() {

cout << "Title: " << getTitle() << "\n" << "Aurthor: ";
getAurthor().printName();
cout << "Publisher: " << getPublisher() << "\n" << "Pages: " << getPages() << "\n" << "ISBN: " << getISBN() << "\n" << "Price: " << getPrice() << "\n" << "Code: " << getCode() << "\n \n \n";
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:41:12.453

以下是我突然想到的几点：

1.  我的口头禅：你应该在阅读后检查阅读是否有效。
2.  使用`std::ios_base::eof()`仅有助于确定先前读取失败的原因。
3.  你的实际问题是：如果有超过 3 本书会发生什么？（无需回答：我知道会发生什么……）
4.  专业的程序员很难正确处理长函数。初学者没有机会！将您的代码拆分为可消化且连贯的块！

修复问题并重试。

# c - 堆排序 heapify sort

> ID：12786830
> 
> 赞同：0
> 
> 时间：2012-10-08T17:46:22.623
> 
> 标签：c, sorting, heapsort

我有一个问题女巫堆排序。我不知道我的代码有什么问题。这个程序只改变了表格中的第二个和最后一个位置。这是我的代码（没有主要功能）：

```
 #include<stdio.h>
#define DUZO 100000000
int heap_size;
int tab[DUZO];

void heapify(int start){
    int l, r, largest, pom;

    l = 2*start + 1;
    r = 2*start + 2;

    if((l < heap_size) && (tab[l] > tab[start]))
        largest = l;
    else
        largest = start;

    if((r <  heap_size) && (tab[r] > tab[largest]))
        largest = r;
    if(largest != start){
        pom = tab[start];
        tab[start] = tab[largest];
        tab[largest] = pom;

        heapify(largest);
    }
}

void build_max(){
    int lenght, i;
    lenght = heap_size;

    for(i = ((lenght - 1)/2); i >= 0; --i){
        heapify(i);
    }
}

void heap_sort(){
    int i;
    build_max();

    for(i = heap_size-1; i > 0; --i) {
        int tmp = tab[0];
        tab[0] = tab[i];
        tab[i] = tmp;
        --heap_size;
        heapify(0);
    }
} 
```

感谢所有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:58:04.530

```
int heap_size = 6;
int tab[5]; 
```

That's calling for writing (and reading) past the end of the array, causing undefined behaviour with probably bad consequences.

It's a bad idea to have the heap size and array as a global variables, they should be arguments to the functions.

```
l = 2*start + 1;
r = 2*start + 2; 
```

That's the indexing for when you have the top of the heap at index 0, but

```
if((l <= heap_size) && (tab[l] > tab[start])) 
```

that check would be used if you have the top of the heap at index 1\. For index 0, that should be `<` (also in the next check for `r`).

```
void build_max(){
    int lenght, i;
    lenght = heap_size;

    for(i = ((lenght - 1)/2); i > 0; i--){
        heapify(i);
    }
} 
```

forgets to heapify the top, so it doesn't in general create a heap, the condition should be `i >= 0`.

```
void heap_sort(){
    int i, lenght;
    build_max();
    lenght =  heap_size;

    for(i = lenght; i > 1; i--){
        heap_size -= 1;
        heapify(i);
    }
} 
```

doesn't swap the top of the heap in the last position, so it doesn't sort at all. The loop should look like

```
for(i = heap_size-1; i > 0; --i) {
    /* swap top of heap in the last position */
    int tmp = tab[0];
    tab[0] = tab[i];
    tab[i] = tmp;
    --heap_size; /* urk, but what can we do if heapify uses the global? */
    heapify(0);  /* we need to heapify from the top, since that's where the leaf landed */
} 
```

to actually sort the array.

# android - 通过蓝牙将 Android 连接到另一台设备并发送数据

> ID：12786834
> 
> 赞同：1
> 
> 时间：2012-10-08T17:46:32.617
> 
> 标签：android, bluetooth

我想在我的 Android 和 PC（或其他设备）之间建立连接，就像在设置中的蓝牙菜单中一样。我设法获取了我范围内所有 bt 设备的列表并获取了它们的 MAC 地址。那么，我有蓝牙设备，如何连接或配对？我看到了很多关于在 PC 上创建服务器的东西，但我不想那样，我只想连接设备。我的尝试是获取设备的 UUID 并使用 createRfcommSocketToServiceRecord ...但是当我尝试 socket.connect() 时它无法连接（因为我没有服务器）。所以实际上我需要制作与操作系统相同的结构（与设备连接，如果连接的设备正在尝试发送，我可以接收信息等等）。

如果我设法与设备连接，我想听它发出的所有内容，无论数据如何……我还没有研究过这个话题，但任何建议都会很好。

必须使用任何支持蓝牙的设备进行连接，并且我无权访问它（当然设备允许我连接）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:48:55.420

Grab the Android sample projects by doing this [http://developer.android.com/tools/samples/index.html](http://developer.android.com/tools/samples/index.html)

They have an app called BluetoothChat that pretty much does just what you want.

The thing about the 'server' is just in the connection, one side needs to open a listening port and that side is arbitrarily the 'server'. Once they are connected they are merely peers and you can write/read data till the cows come home.

# node.js - 猫鼬没有创建索引

> ID：12786839
> 
> 赞同：4
> 
> 时间：2012-10-08T17:46:47.873
> 
> 标签：node.js, indexing, mongoose

我最近开始使用 Mongoose (v.3.2.1)，但我遇到了索引问题。

我在我的模式（ Schema.path('attr').index(true) ）上定义了几个索引，它们没有在数据库中创建。（我在 shell 中运行 db.collection.getIndexKeys() 并且只看到 _id 索引）。

请注意，有时会创建一些/所有索引。

我打开了调试，我看到 ensureIndex() 正在运行：

```
mongoose.set('debug', true);

Mongoose: myColl.ensureIndex({ type: 1 }) { safe: true, background: true }  
Mongoose: myColl.ensureIndex({ created: 1 }) { safe: true, background: true }  
Mongoose: myColl.ensureIndex({ updated: 1 }) { safe: true, background: true } 
```

我还听了错误：

```
mongoose.connection.on('error', function(err) {
    console.error('MongoDB error: %s', err);
});

myCollModel.on('index',function(err) {
    console.error('MongoDB error: %s', err);
}); 
```

我可以在控制台中看到我的插入和查询，但没有错误。

任何帮助将不胜感激！

谢谢，

尼赞酒吧

我的架构是这样定义的：

```
myColl = new Schema();

myColl.add({
     text : { type: String, required : true }
   , shortText: { type: String }
   , type : { type: String , index: true}
   , correctAnswerId : { type: ObjectId, ref: QuestionAnswer}
   , answers: { type: [ QuestionAnswer ] }
}); 
```

在这种情况下，不创建“类型”索引。请注意，有时在运行 ensureIndexes() 几次后，它们会被创建。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-22T09:15:50.680

确实，我遇到了同样的问题。

然后我将 ensureindex 调试信息复制到 mongo 终端试一试，命令已发送（就像从 mongoose 控制台显示的那样），但由于 mongo 的问题，创建失败：

```
{
    "err" : "ns name too long, max size is 128",
    "code" : 10080,
    "n" : 0,
    "connectionId" : 78,
    "ok" : 1
} 
```

然后我给出选项 {name: 'super_index'}，然后就完成了。

希望对你有帮助！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T22:18:46.283

当定义一个 ObjectId 引用另一个集合中的文档的字段时，`ref`属性的值是模型的字符串名称，而不是模型本身。所以它应该看起来像这样：

```
correctAnswerId : { type: ObjectId, ref: 'QuestionAnswer' } 
```

我有一种感觉，失败的时间正在影响`type`索引是否创建。

# css - CSS 生成的图标之间的不明头发

> ID：12786850
> 
> 赞同：0
> 
> 时间：2012-10-08T17:47:51.057
> 
> 标签：css, image, hyperlink

我将这些图标创建为一个用 CSS 圆圈包裹的图像。然而，这个随机的头发看起来像是来自 CSS。

任何解释为什么？抱歉，CSS 都是内联的 - 这是针对 html 电子邮件的：

```
<div style="width: 180px; text-align: center;margin: 0 auto;">
<a href="http://pinterest.com/houseplansdan/">
<li style="list-style: none; background-color: #505050;width: 40px;height: 40px;border-radius: 20px; display: inline-block;margin-right: 10px;">
<img style="padding-top: 5px;"src="http://homeplan.com/newsletter/October/img/icons/32x32_pinterest.png" href="http://pinterest.com/houseplansdan/">
</li>
</a>    

<a href="http://www.facebook.com/pages/Houseplans/91152065546">
<li style="background-color: #505050;width: 40px;height: 40px;border-radius: 20px; display: inline-block; margin-right: 10px;">
<img style="padding-top: 5px;"src="http://homeplan.com/newsletter/October/img/icons/32x32_facebook.png">
</li>
</a>    

<a href="http://twitter.com/houseplans_">
<li style="list-style: none; background-color: #505050; width: 40px;height: 40px;border-radius: 20px; display: inline-block;">
<img style="padding-top: 5px;"src="http://homeplan.com/newsletter/October/img/icons/32x32_twitter.png">
</li>
</a>  
</div>​ 
```

小提琴版本[在这里](http://jsfiddle.net/pHksF/1/)。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:52:39.680

那不是头发，它是`text-decoration`- 链接的默认样式。将此应用于您不想拥有的任何链接：

```
​a { text-decoration:none; }​ 
```

为您的电子邮件内联执行此操作应该没有问题，尽管这可能很乏味。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T17:53:21.413

不能有`LI`内部`A`。如果可能，请更正它。

此外，此**CSS**将修复：

```
a { text-decoration: none; }​ 
```

### 更新小提琴：http: [//jsfiddle.net/pHksF/2/](http://jsfiddle.net/pHksF/2/)

# jsf - 如何使用 值时在托管 bean 中设置更新值 被改变

> ID：12786851
> 
> 赞同：4
> 
> 时间：2012-10-08T17:47:52.553
> 
> 标签：jsf

我有一个带有`<h:inputText>`. 我想将值设置`<h:inputText>`为更改值时绑定的值。

豆：

```
@ManagedBean
@SessionScope
public class MyBean {

    private String in;
    //getter and setter

} 
```

看法：

```
<h:inputText value="#{myBean.in}" /> 
```

我该如何使用`<f:ajax>`它？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T19:19:35.620

只需将标签嵌套在`<f:ajax>`标签内`<h:inputText>`即可。

```
<h:inputText value="#{myBean.in}">
    <f:ajax />
</h:inputText> 
```

它会在 HTML DOM 事件发生时提交该值`change`（即当字段被编辑然后模糊时）。

该`event`属性已默认为`valueChange`，因此将其省略。它的`execute`属性已经默认为`@this`，所以它被省略了。如果您想在完成时更新其他组件，请设置`render`属性。例如

```
<h:inputText value="#{myBean.in}">
    <f:ajax render="msg" />
</h:inputText>
<h:message id="msg" /> 
```

如果要在成功设置后调用侦听器，请设置`listener`属性：

```
<h:inputText value="#{myBean.in}">
    <f:ajax listener="#{myBean.changeIn}" />
</h:inputText> 
```

```
public void changeIn() {
    System.out.println("in has been changed to " + in);
} 
```

### 也可以看看：

*   [何时使用 valueChangeListener 或 f:ajax 监听器？](https://stackoverflow.com/questions/11879138/when-to-use-valuechangelistener-or-fajax-listener)
*   [我可以将哪些值传递给 f:ajax 标记的 event 属性？](https://stackoverflow.com/questions/7886453/what-values-can-i-pass-to-the-event-attribute-of-the-fajax-tag)

# android - Android 中 ListFragment 的 Tab 等效项？

> ID：12786857
> 
> 赞同：0
> 
> 时间：2012-10-08T17:48:33.723
> 
> 标签：android

我学习了 Fragments 的 Android Developers 课程，我真的很喜欢他们的解释和实现。但是，我不想在屏幕左侧显示与交互时在右侧片段上显示内容的列表，而是希望在屏幕顶部显示选项卡的选择。

是否有任何与选项卡的 ListFragment 类等效的方法，或者我可以使用 Android 开发人员实现但在 ViewGroup 中创建一组选项卡的方式？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:19:42.200

> 是否有任何等效于选项卡的 ListFragment 类

并非如此，因为选项卡通常不作为片段实现。

> 一种我可以使用 Android Developer 实现但在 ViewGroup 中创建一组选项卡的方法？

并非如此，因为选项卡通常不作为片段实现。

对于选项卡，您可以：

*   使用[操作栏](http://developer.android.com/guide/topics/ui/actionbar.html#Tabs)，或
*   `PagerTabStrip`与 a 一起使用，`ViewPager`或
*   [将ViewPagerIndicator](http://viewpagerindicator.com/)的选项卡风格与`ViewPager`, 或
*   复古并使用`TabHost`and `TabWidget`，或
*   自己滚东西

# xcode - 具有单视图应用程序 (MonoDevelop) 的 XCode 构建失败 - 架构 i386 的未定义符号

> ID：12786858
> 
> 赞同：3
> 
> 时间：2012-10-08T17:48:37.360
> 
> 标签：xcode, xamarin.ios, monodevelop

在 MonoTouch 游轮上，耳朵后面湿透了。

我遵循 Xamarin 网站上的 Hellow World tut 的步骤；[http://docs.xamarin.com/ios/getting_started/hello_iphone](http://docs.xamarin.com/ios/getting_started/hello_iphone)

1) 通过 App Store 安装 XCode

2) 从 Xamarin 站点全新安装 MonoDevelop

在 MonoDevelop 中创建了新项目“HelloApple”（单视图应用程序）。

构建应用程序（命令+B）。

使用 XCode Interface Builder 打开生成的 HelloApple_UIViewController.xib 文件

单击运行按钮。

**收到以下错误；**

> Ld DerivedData/HelloApple.UI/Build/Products/MonoTouch-iphonesimulator/HelloApple.UI.app/HelloApple.UI 正常 i386 cd /Users/randerson/Projects/HelloApple/HelloApple.UI/obj/Xcode/1 setenv IPHONEOS_DEPLOYMENT_TARGET 6.0 setenv PATH "/Applications/Xcode.app/Contents/Developer/Platforms/iPhoneSimulator.platform/Developer/usr/bin:/Applications/Xcode.app/Contents/Developer/usr/bin:/Applications/MonoDevelop.app:/usr/bin :/bin:/usr/sbin:/sbin" /Applications/Xcode.app/Contents/Developer/Toolchains/XcodeDefault.xctoolchain/usr/bin/clang -arch i386 -isysroot /Applications/Xcode.app/Contents/Developer/平台/iPhoneSimulator.platform/Developer/SDKs/iPhoneSimulator6.0.sdk -L/Users/randerson/Projects/HelloApple/HelloApple.UI/obj/Xcode/1/DerivedData/HelloApple。UI/Build/Products/MonoTouch-iphonesimulator -F/Users/randerson/Projects/HelloApple/HelloApple.UI/obj/Xcode/1/DerivedData/HelloApple.UI/Build/Products/MonoTouch-iphonesimulator -filelist /Users/randerson/项目/HelloApple/HelloApple.UI/obj/Xcode/1/DerivedData/HelloApple.UI/Build/Intermediates/HelloApple.UI.build/MonoTouch-iphonesimulator/HelloApple.UI.build/Objects-normal/i386/HelloApple.UI。 LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.0 -framework UIKit -framework MapKit -framework Foundation -framework CoreGraphics -o /Users/randerson/Projects/HelloApple /HelloApple.UI/obj/Xcode/1/DerivedData/HelloApple.UI/Build/Products/MonoTouch-iphonesimulator/HelloApple.UI.app/HelloApple.UIUI/Build/Products/MonoTouch-iphonesimulator -filelist /Users/randerson/Projects/HelloApple/HelloApple.UI/obj/Xcode/1/DerivedData/HelloApple.UI/Build/Intermediates/HelloApple.UI.build/MonoTouch-iphonesimulator/ HelloApple.UI.build/Objects-normal/i386/HelloApple.UI.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.0 -framework UIKit -framework MapKit -framework Foundation -framework CoreGraphics -o /Users/randerson/Projects/HelloApple/HelloApple.UI/obj/Xcode/1/DerivedData/HelloApple.UI/Build/Products/MonoTouch-iphonesimulator/HelloApple.UI.app/HelloApple.UIUI/Build/Products/MonoTouch-iphonesimulator -filelist /Users/randerson/Projects/HelloApple/HelloApple.UI/obj/Xcode/1/DerivedData/HelloApple.UI/Build/Intermediates/HelloApple.UI.build/MonoTouch-iphonesimulator/ HelloApple.UI.build/Objects-normal/i386/HelloApple.UI.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.0 -framework UIKit -framework MapKit -framework Foundation -framework CoreGraphics -o /Users/randerson/Projects/HelloApple/HelloApple.UI/obj/Xcode/1/DerivedData/HelloApple.UI/Build/Products/MonoTouch-iphonesimulator/HelloApple.UI.app/HelloApple.UIbuild/Objects-normal/i386/HelloApple.UI.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.0 -framework UIKit -framework MapKit -framework Foundation -框架CoreGraphics -o /Users/randerson/Projects/HelloApple/HelloApple.UI/obj/Xcode/1/DerivedData/HelloApple.UI/Build/Products/MonoTouch-iphonesimulator/HelloApple.UI.app/HelloApple.UIbuild/Objects-normal/i386/HelloApple.UI.LinkFileList -Xlinker -objc_abi_version -Xlinker 2 -fobjc-link-runtime -Xlinker -no_implicit_dylibs -mios-simulator-version-min=6.0 -framework UIKit -framework MapKit -framework Foundation -框架CoreGraphics -o /Users/randerson/Projects/HelloApple/HelloApple.UI/obj/Xcode/1/DerivedData/HelloApple.UI/Build/Products/MonoTouch-iphonesimulator/HelloApple.UI.app/HelloApple.UI
> 
> 架构 i386 的未定义符号：“_main”，引用自：从 crt1.o 开始 ld：未找到架构 i386 的符号 clang：错误：链接器命令失败，退出代码为 1（使用 -v 查看调用）

我已经卸载了 XCode 和 MonoDevelop，以为我做了几次乱七八糟的事情。真是难住了。我认为这个例子可以解决问题，所以我必须在这里遗漏一些东西。StackOverflow 上的几篇文章都围绕着更复杂的已经构建的应用程序展开，这并没有为项目添加任何东西，即开箱即用。

我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-09T17:28:47.357

您不是从 Xcode 本身构建的，而是从 MonoDevelop 构建的。

Xcode 最常用的部分是**Interface Builder**。您可以使用此工具（或使用代码）创建 UI，然后将其保存到磁盘。然后，您切换回 MonoDevelop 以将所有内容编译到本机应用程序中。

注意：MonoTouch 本身将使用部分 Xcode（命令行工具）来构建本机应用程序。但是，对于大多数开发人员来说，这不是您会意识到的。

# sql - 在 SQL Server 中连接 XML 变量

> ID：12786865
> 
> 赞同：0
> 
> 时间：2012-10-08T17:48:56.703
> 
> 标签：sql, xml, sql-server-2008, tsql

我在存储过程中有一个查询，它检索一些 XML 格式的数据以在变量中返回`@xml_data`，如下所示：

```
SELECT @xml_data = (
    SELECT * FROM (
        SELECT   1 AS Tag
                ,0 AS Parent
                .....
        FROM    MyTable
        WHERE   id = @id

        UNION ALL

        SELECT   2 AS Tag
                ,1 AS Parent
                ....
        FROM    MyTable2
        WHERE   id = @id

        UNION ALL

        SELECT   3 AS Tag
                ,2 AS Parent
                ....
        FROM    MyTable3
        WHERE   id = @id
    ) results
FOR XML EXPLICIT, TYPE) 
```

这就像众所周知的梦想一样工作:)

但是，我想将一个标头连接到这个 XML（例如`<xml version="1.0" encoding="ISO-8859-1"/>`），但不知道该怎么做。我尝试转换为`NVARCHAR`，在一个语句中选择两个变量，但似乎无法正确处理。

有人可以帮忙吗？？

谢谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:02:24.610

尝试这样做：

```
DECLARE @x xml 
DECLARE @strXML varchar(MAX)
SET @x=N'<Employee><Name>Luftwaffe</Name></Employee>'
set @strXML = '<xml version="1.0" encoding="ISO-8859-1"/>' + CONVERT(varchar(MAX),@x)
SELECT @strXML 
```

希望能帮助到你 ！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:10:58.557

您可以在开头声明字符串并将它们连接在一起：

```
declare @xml_data nvarchar(MAX)

set @xml_data = '<xml version="1.0" encoding="ISO-8859-1"/>'

SELECT @xml_data = @xml_data +  (
    SELECT * FROM (
        SELECT   1 AS Tag
                ,0 AS Parent
                .....
        FROM    MyTable
        WHERE   id = @id

        UNION ALL

        SELECT   2 AS Tag
                ,1 AS Parent
                ....
        FROM    MyTable2
        WHERE   id = @id

        UNION ALL

        SELECT   3 AS Tag
                ,2 AS Parent
                ....
        FROM    MyTable3
        WHERE   id = @id
    ) results
FOR XML EXPLICIT, TYPE) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-07-02T12:08:44.333

在我看来，这是最简单的方法：

```
declare @xml1 xml
declare @xml2 xml
declare @xml3 xml
select @xml1='<name>testname</name>'
select @xml2='<value>testvalue</value>'
select @xml3 = 
(
    select @xml1 AS xml1, @xml2 AS xml2
    for xml path('')
)
select @xml3 
```

# string - 上下文菜单 Mac OS X - 粘贴文本字符串

> ID：12786868
> 
> 赞同：0
> 
> 时间：2012-10-08T17:49:06.810
> 
> 标签：string, macos, menu, replace

我想知道是否可以设置一个上下文菜单选项，允许我选择一个字符串，例如从 BBEdit 或 TextEdit 等，然后选择它>右键单击>调用上下文菜单项>粘贴/替换为字符串的文本。

例如，如果我打开了一个文本文件并想要选择单词“blue”，我希望上下文菜单项能够将其替换为“red”。

是的，这就像复制和粘贴，但我特别要求这样做是有原因的，它可以节省我大量的工作时间。

我不是一个经验丰富的程序员，所以认为我是一个完整的新手。

我想在 Automator 中执行此操作。我知道到达建筑部分的所有步骤，只是不知道要使用哪个实用程序项目来完成类似的事情。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-21T22:16:25.670

我确实想出了如何使用键盘快捷键来做到这一点，尽管我还希望有一个通用的右键单击上下文菜单选项。在过去，我曾经使用一些应用程序为我做这件事。
这就是我所做的。转到 Automator，在操作窗口上方选择“无输入”和“任何应用程序”。
在左侧，单击实用程序，将“运行 AppleScript”拖到右侧的窗口中。
在中间插入：
告诉应用程序“系统事件”
击键“您要输入的文本”
结束告诉

保存它，然后转到系统偏好设置»键盘»键盘快捷方式>服务，然后找到您保存的标题。创建键盘快捷键。

# objective-c - Xcode - 多种方法的宏

> ID：12786874
> 
> 赞同：0
> 
> 时间：2012-10-08T17:49:25.753
> 
> 标签：objective-c, xcode, methods, macros

我想将以下所有内容放入一个宏中，以便我可以通过一行代码将这些方法包含在不同的视图控制器中。在这种情况下，不能选择使用方法定义父 VC。

```
- (void)method1 {
    //do stuff
}

- (void)method2 {
    //do more stuff
}

- (void)method3 {
    //do other stuff
} 
```

什么/哪里是最好的地方？如何？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T17:54:49.657

在头文件中声明它，然后将其导入所有视图控制器。要么使用适合的现有标题（可能是 AppDelegate），要么只创建一个新标题。

```
// ThreeMethods.h
#define ThreeMethods   \
- (void)method1 { \
    //do stuff    \
}                 \
                  \
- (void)method2 { \
    //do more stuff \
}                  \
                     \
- (void)method3 {   \
    //do other stuff \
}                    \ 
```

```
// ViewController1.m
#import ThreeMethods.h
ThreeMethods 
```

```
// ViewController2.m
#import ThreeMethods.h
ThreeMethods 
```

您也可以在编译前添加到每个文件的前缀头（项目中的 .pch 文件）中导入它。

# node.js - 使用 Passport 创建用户

> ID：12786875
> 
> 赞同：15
> 
> 时间：2012-10-08T17:49:29.713
> 
> 标签：node.js, session, passport.js

我正在使用 Node.js 并打算使用 Passport 进行身份验证。但是，我在网上看到的所有示例都假设用户已经创建。我想知道如何在将用户会话保存在数据库中之后正确创建用户会话（我有这部分工作），以便 Passport 能够识别它们。（我不想保存新用户，然后强迫他们进入登录页面。）

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-08T19:23:10.617

只需致电：

```
// user is the user instance you just registered and created
req.logIn(user, function(err) {
  if (err) return next(err);
  // login success!
  res.redirect('/home'); // or whereever
}); 
```

此函数的文档在代码中（我需要将其添加到指南中）： [https ://github.com/jaredhanson/passport/blob/master/lib/http/request.js](https://github.com/jaredhanson/passport/blob/master/lib/http/request.js)

# java - 未定义 Java 类型的方法，嵌套类

> ID：12786877
> 
> 赞同：1
> 
> 时间：2012-10-08T17:49:30.743
> 
> 标签：java, arrays, nested-class

我在学校项目的嵌套类中遇到了一些麻烦。目前，我正在尝试编写一种将项目插入到参差不齐的数组数据结构中的方法。它使用由嵌套类创建的对象来跟踪二维数组位置，以便获取要插入的索引。但是，我在以下行收到错误“方法 findEnd(E) 未定义 RaggedArrayList.ListLoc 类型”：

```
insertLoc.findEnd(item) 
```

我在 stackoverflow 和网络上都进行了广泛的搜索，但还没有找到答案。如果我错过了它并且这是多余的（我知道有很多“未定义类型问题的方法”），那么我道歉。

这是相关代码>>

ListLoc 对象的嵌套类：

```
private class ListLoc {
  public int level1Index;
  public int level2Index;

  public ListLoc() {}

  public ListLoc(int level1Index, int level2Index) {
     this.level1Index = level1Index;
     this.level2Index = level2Index;            
  }

  public int getLevel1Index() {
     return level1Index;
  }

  public int getLevel2Index() {
     return level2Index;
  }

  // since only used internally, can trust it is comparing 2 ListLoc's
  public boolean equals(Object otherObj) {
     return (this == otherObj);
  }
} 
```

查找匹配项的最后一个索引的方法（不是 ListLoc 嵌套类的一部分）：

```
private ListLoc findEnd(E item){
  E itemAtIndex;

  for (int i = topArray.length -1; i >= 0; i--) {
     L2Array nextArray = (L2Array)topArray[i];

     if (nextArray == null) {
        continue;

     } else {

        for (int j = nextArray.items.length -1; j >= 0; j--) {
           itemAtIndex = nextArray.items[j];
           if (itemAtIndex.equals(item)) {
              return new ListLoc(i, j+1);
           }
        }
     }
  }

  return null; 
```

}

尝试向不规则数组添加新值的方法：

```
boolean add(E item){
  ListLoc insertLoc = new ListLoc();
  insertLoc.findEnd(item);

  int index1 = insertLoc.getLevel1Index();
  int index2 = insertLoc.getLevel2Index();

  L2Array insertArray = (L2Array)topArray[index1];
  insertArray.items[index2] = item;

  return true; 
```

}

感谢您的任何意见。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:57:02.657

我敢打赌，改变这一点：

```
ListLoc insertLoc = new ListLoc();
insertLoc.findEnd(item); 
```

对此：

```
ListLoc insertLoc = findEnd(item); 
```

会解决你的问题。

您正在尝试调用`findEnd`该类`ListLoc`，但如果您实际查看`ListLoc`，它并没有在那里定义。当您尝试调用`findEnd`该`insertLoc`对象时，它会失败，因为它`insertLoc`是 的实例`ListLoc`，我们已经说过不包含`findEnd`。

话虽这么说，我敢打赌它`findItem`实际上是在与方法相同的类中声明的`add`（让我们称之为它`MyList`），所以你想实际调用`MyList.findEnd`，而不是不存在的`ListLoc.findEnd`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T17:52:43.683

你几乎回答了你自己的问题。你试图在 ListLoc 对象上调用 findEnd，但 ListLoc 没有定义 findEnd 方法。你需要要么

a) 将 findLoc 的实现添加到 ListLoc 或

b）在正确的对象上调用 findLoc （您没有提供有关其他类的信息，所以我不能说太多）

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T17:52:51.633

> 查找匹配项的最后一个索引的方法（不是 ListLoc 嵌套类的一部分）：

对 - 它*不是*...的一部分，`ListLoc`但是当你在这里调用它时：

```
ListLoc insertLoc = new ListLoc();
insertLoc.findEnd(item); 
```

...您试图将其称为课程*的*一部分。它不是，所以你不能这样称呼它。

将其移至`ListLoc`，或更改调用该方法的方式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T17:54:36.540

我不确定我是否阅读正确，但从您的解释看来 findEnd 方法是在您的类之外定义的，因此 ListLoc 确实没有该名称的方法...

您的私有 ListLoc findEnd(E item) 定义在哪里？

# android - 如何在edittext + listview布局中隐藏键盘

> ID：12786883
> 
> 赞同：3
> 
> 时间：2012-10-08T17:49:55.987
> 
> 标签：android, listview, keyboard, android-edittext, hide

我有一个由 ListView（从 AsynTask 加载）和一个 EditText（所以我可以过滤该列表）组成的 LinearLayout。这是代码：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent"
    android:orientation="vertical" >
    <EditText
        android:id="@+id/editText"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:ems="10"
        android:hint="Filtrar por nombre..." >

    </EditText>

    <ListView
        android:id="@+id/list"
        android:layout_width="match_parent"
        android:layout_height="wrap_content" >
    </ListView>
</LinearLayout> 
```

问题是，当活动开始时，键盘会显示出来，我只想在单击 EditText 进行搜索时显示它。

我尝试了几种方法，例如在清单中编写以下内容

```
android:windowSoftInputMode="stateHidden" 
```

并将其包括在课堂上

```
InputMethodManager iMM = (InputMethodManager)getSystemService(Context.INPUT_METHOD_SERVICE);
iMM.hideSoftInputFromWindow(editText.getWindowToken(), 0); 
```

我唯一做到的是不显示键盘，但不显示列表的加载内容（只是 EditText 和屏幕的其余部分纯黑色），一旦我点击 EditText，它们就会同时出现键盘和listView 的东西。

对此有任何可能的解决方案吗？

编辑：

我尝试了以下解决方案（感谢@Sush、@boztalay 和@Agata Sworowska），但没有一个成功。

- 放置在我的布局中：

```
android:focusable="true"
android:focusableInTouchMode="true"

android:descendantFocusability="beforeDescendants"
android:focusableInTouchMode="true" 
```

- 并放在我的 onCreate() 方法中：

```
ListView listView = findViewById(R.id.list);
listView.setFocusableInTouchMode(true);
listView.requestFocus(); 
```

还有其他可能吗？

***新编辑：***

我注意到，当它不关注 EditText 时，listView 不会加载，直到我关注 EditText，就像它正在等待它一样。我尝试在加载 ListView 的代码之后设置 EditText，但问题仍然存在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:18:37.303

这听起来像是焦点问题。发生的事情是当应用程序启动时，EditText 获得焦点，键盘弹出。您应该尝试使 ListView 获得焦点。这样，在用户单击它时给 EditText 焦点之前，键盘不会弹出。

在你的 Java 中，你应该得到一个 ListView 的实例，然后调用几个函数：

```
ListView listView = findViewById(R.id.list);
listView.setFocusableInTouchMode(true);
listView.requestFocus(); 
```

如果你把它放在你的 onCreate() 中，焦点将被赋予 ListView，并且在用户单击 EditText 之前，它们的键盘不会出现。

有关更多详细信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/2150656/how-to-set-focus-on-a-view-when-a-layout-is-created-and-displayed)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:20:25.680

您只需将以下两个属性添加到您的 LinearLayout。

```
android:focusable="true"
android:focusableInTouchMode="true" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-14T09:08:08.227

[http://www.mysamplecode.com/2012/02/android-edittext-hide-soft-keyboard.html](http://www.mysamplecode.com/2012/02/android-edittext-hide-soft-keyboard.html)

这是我在这里找到的问题的解决方案。不明白为什么 listivew 应该这样做，但解决方法有帮助。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-08T19:34:01.753

尝试添加您的布局，其中包含 EditText：

```
android:descendantFocusability="beforeDescendants"
android:focusableInTouchMode="true" 
```

我希望它有所帮助。

# ruby - 如何将一个方法的调用委托给 Ruby 中的另一个方法？

> ID：12786884
> 
> 赞同：0
> 
> 时间：2012-10-08T17:49:57.373
> 
> 标签：ruby

我想为已经存在的方法创建另一个名称，例如我想`slice`用`only`. 我不想改变原始方法的行为，所以这不是重新定义，而是委托。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T17:52:38.683

```
class Whatever
  def slice
    # do something
  end
  alias :only :slice
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:53:13.817

在 Ruby 中有很多方法可以做到这一点。请查看这篇文章，这可能会帮助您找到最合适的方法。

[http://gdakram.com/past/2010/12/2/multiple_ways_in_implementing_delegation_pattern_in_ruby/](http://gdakram.com/past/2010/12/2/multiple_ways_in_implementing_delegation_pattern_in_ruby/)

# liferay-6 - Liferay：只能在网站的某些页面中添加网页内容的角色

> ID：12786888
> 
> 赞同：0
> 
> 时间：2012-10-08T17:50:05.920
> 
> 标签：liferay-6

是否可以定义一个只能在站点的某些页面中创建/读取/更新/删除 Web 内容的角色？例如，角色“NewsContent”只能将网页内容添加到新闻页面（及其子页面）。

到目前为止，我无法实现这一点，因为在向角色添加权限时我没有看到任何类似的东西。我可以将“添加 Web 内容”权限设置为角色，但使用此权限，具有此角色的用户将能够在站点的所有页面中添加 Web 内容。

我希望这是可行的，因为此功能对我的应用程序非常重要。提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-11T06:15:21.547

您的应用程序中有 Portlet 吗？如果是这样，以下针对基于 JSF 的 portlet 的解决方案可能会有所帮助。

据我了解，“NewsContent”角色只能将网页内容添加到新闻页面。所以，我猜你有一个显示新闻页面的 Portlet。在这种情况下，从 Liferay DB 中获取用户的角色。

```
FacesContext context = FacesContext.getCurrentInstance();
        javax.faces.context.ExternalContext externalContext = context.getExternalContext();
if(externalContext.isUserInRole("NewsContent"))
{
  //Allow this user to do what you want him to do
} 
```

如果您不使用基于 JSF 的 Portlet，您仍然可以查询 Liferay DB并通过查询 in 和表来获取登录用户的`USER_`角色。`USERS_ROLES``ROLE_`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-03T06:53:43.323

进入控制面板=>角色

选择您分配给用户的特定角色 选择为该角色定义权限 选择站点管理 仅启用站点中的管理页面复选框 现在具有该特定角色的用户能够在页面上发布 Web 内容。

这将解决您的问题。

# version-control - 版本控制中的平分是否受益于使用 rebaseif 工作流程？

> ID：12786890
> 
> 赞同：3
> 
> 时间：2012-10-08T17:50:19.450
> 
> 标签：version-control, mercurial, branch, dvcs, bisect

rebaseif mercurial 扩展在拉取时自动执行 rebase 的过程，前提是合并可以自动完成而没有冲突。（如果有需要手动解决的冲突，它不会变基，让您准备好手动合并两个分支。）当开发人员在代码的不同部分工作时，这会简化和线性化历史记录，尽管任何变基都会抛出当开发人员工作时，会删除一些有关世界状态的信息。我倾向于同意这样的[论点](http://jhw.dreamwidth.org/1868.html)和[这个](http://changelog.complete.org/archives/586-rebase-considered-harmful)在一般情况下，rebase 不是一个好主意，但我发现 rebase-if 哲学对非冲突情况很有吸引力。我对此持谨慎态度，尽管我知道当代码的不同部分发生更改时仍然存在逻辑错误的风险（并且[rebaseif 扩展的作者已经觉得这是一个坏主意。..](https://stackoverflow.com/a/598943/411282)）

我最近经历了一个复杂而痛苦的 bisect，我认为在我们的存储库中有大量的短分支合并是 bisect 没有实现其隐含的 O(lg n) 承诺的主要原因。我发现自己需要多次运行“bisect --extend”，以将范围扩展到合并之外，一次通过几个变更集，基本上使 bisect O(n)。我还发现跟踪平分线的进展情况以及了解到目前为止我获得的信息非常复杂，因为在查看存储库的图表时我无法遵循分支。

是否有更好的方法来使用 bisect（以及查看和理解修订历史），或者如果我们在开发中更多地使用 rebase，这个过程会更顺利，我是对的。或者，您能否帮助我更具体地理解在非冲突情况下使用 rebase 可能会出现什么问题：是否足以引起应该避免的问题？

因为我认为 rebaseif 匹配更典型的 git 工作流程，所以我更一般地标记了这个（不仅仅是 mercurial）：git 用户可能已经看到了陷阱。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T19:30:48.337

我认为答案很简单：你必须在硬*平分*或有风险的 rebase 之间做出区分。

或者，介于两者之间：仅当变基不太可能静默破坏事物时才变基。如果一个 rebase 只涉及几个变更集，这些变更集在语义上与它们 rebase 的更改相距甚远，那么 rebase 通常是安全的。

这是一个示例，其中无冲突的合并会破坏事物：

假设两个分支从具有此内容的文件开始：

```
def foo(a):
    # do
    # something
    # with a (an integer)

...

foo(4) 
```

在分支 A 中，更改为：

```
def foo(a):
    # now this function is 10 times faster, but only work with positive integers
    assert a > 0
    # do
    # something with
    # with a

...

foo(4) 
```

在分支 B 中，它更改为：

```
def foo(a):
    # do
    # something
    # with a (an integer)

...

foo(4)

...

foo(-1) # now we have a use case where we need to call foo with -1 
```

从语义上讲，两个编辑相互冲突。然而，Mercurial 很高兴地合并它们而没有冲突（在这两种情况下，当变基或进行常规合并时）：

```
def foo(a):
    # now this function is 10 times faster, but only work with positive integers
    assert a > 0
    # do
    # something with
    # with a

...

foo(4)

...

foo(-1) # now we have a use case where we need to call foo with -1 
```

合并的优点是它允许在稍后的某个时间点了解出了什么问题，因此您可以相应地修复问题。变基可能会丢弃您需要了解由自动合并引起的错误的信息。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T19:03:47.433

反对的主要论点`git rebase`似乎是关于“失去历史”的哲学论点，但如果我真的关心这一点，我会将最后的构建步骤作为签入（或跟踪所有失败构建的第一个构建步骤！）。

我对 Mercurial 或二分法不是特别熟悉（除了它有点像 git），但是在我使用 git 的一个月和一点点中，我完全坚持使用 rebase。我也用`git rebase -i --autosquash`和`git add -p`很多*。*

IME，在解决冲突方面，变基和合并之间也没有太大区别-您链接到的答案表明“rebaseif”很糟糕，因为“如果”条件是合并是否在没有冲突的情况下进行，而*应该*是取决于代码库构建和测试是否通过。

也许我的想法被 git 设计的固有弱点所扭曲（它没有明确地跟踪分支的历史，即它实际指向的提交的子集），或者这就是我的工作方式（检查diff 是理智的并且它可以构建，尽管在变基之后我不检查中间提交构建）。

（旁白：对于个人项目，我经常*想*跟踪每个构建输出和相应的源快照，但我还没有找到任何擅长这样做的东西。）

# optimization - SSE 中的零内存

> ID：12786893
> 
> 赞同：2
> 
> 时间：2012-10-08T17:50:39.433
> 
> 标签：optimization, assembly, x86, sse

我需要简单的带 SSE 的 ZeroMemory 实现（首选 SSE2）有人可以帮忙吗？我正在通过 SO 和网络搜索，但没有找到直接的答案。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-08T18:15:25.747

是不够好`ZeroMemory()`还是`memset()`不够好？

免责声明：以下部分可能是 SSE3。

1.  通过循环填充任何未对齐的前导字节，直到地址是 16 的倍数
2.  `push`保存一个 xmm reg
3.  `pxor`将 xmm reg 归零
4.  而剩余长度 >= 16，
    1.  `movdqa`或者`movntdq`写
5.  `pop`恢复 xmm reg。
6.  填充任何未对齐的尾随字节。

`movntdq`可能看起来更快，因为它告诉处理器不要将数据带入缓存，但是如果要使用数据，这可能会导致稍后的性能损失。如果您在释放内存之前清理它可能更合适（就像您可能使用的那样`SecureZeroMemory()`）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T08:52:12.033

我想加快代码速度，而不是必须**准确**了解 CPU 的工作原理以及瓶颈在哪里。

在这里，您是我的速度优化例程，只是为了展示应该如何制作。

在我的电脑上比你的快 5 倍（清除 1MBytes 内存块），测试它并询问是否有人不清楚：

```
//edx = memory pointer must be 16 bytes aligned
//ecx = memory count must be multiple of 16 
    xorps       xmm0, xmm0                      //Clear xmm0
    mov         eax, ecx                        //Save ecx to eax
    and         ecx, 0FFFFFF80h                 //Clear only 128 byte pages
    jz          @ClearRest                      //Less than 128 bytes to clear
@Aligned128BMove:
    movdqa      [edx], xmm0                     //Clear first 16 bytes of 128 bytes 
    movdqa      [edx + 10h], xmm0               //Clear second 16 bytes of 128 bytes 
    movdqa      [edx + 20h], xmm0               //...
    movdqa      [edx + 30h], xmm0
    movdqa      [edx + 40h], xmm0
    movdqa      [edx + 50h], xmm0
    movdqa      [edx + 60h], xmm0
    movdqa      [edx + 70h], xmm0
    add         edx, 128                        //inc mem pointer
    sub         ecx, 128                        //dec counter
    jnz         @Aligned128BMove
@ClearRest:
    and         eax, 07Fh                       //Clear the rest
    jz          @Exit
@LoopRest:
    movdqa      [edx], xmm0
    add         edx, 16
    sub         eax, 16
    jnz         @LoopRest
@Exit: 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-12T00:49:10.300

CPU 中几乎所有的晶体管都用于以某种方式尽可能快地访问内存。CPU 已经在所有内存访问方面做得非常出色，并且指令的运行速度比可能的内存访问快得多。

因此，在大多数情况下，试图击败 memset 几乎是徒劳的，因为它已经受到您的记忆速度的限制（正如其他人所提到的）。

# android - 无法启动帧动画

> ID：12786895
> 
> 赞同：-1
> 
> 时间：2012-10-08T17:50:55.843
> 
> 标签：android, frame, android-animation

我正在制作锁屏，我想显示显示电池充电的帧动画，但不显示动画并且打印所有日志。我也尝试使用处理程序启动动画，但没有用。我的代码很长，所以我在下面添加相关代码。

在创建代码：

```
//battery charging animation
    animation = new AnimationDrawable();
    animation.addFrame(getResources().getDrawable(R.drawable.charge5), 30);
    animation.addFrame(getResources().getDrawable(R.drawable.charge4), 30);
    animation.addFrame(getResources().getDrawable(R.drawable.charge3), 30);
    animation.addFrame(getResources().getDrawable(R.drawable.charge2), 30);
    animation.addFrame(getResources().getDrawable(R.drawable.charge1), 30);
    animation.setOneShot(false);//animation plays again
    battery_ImgView.setBackgroundDrawable(animation) 
```

检查电池状态的函数中的代码

```
public  void SetBatteryIcon(View paramView, int paramInt,
        int plugged, int m) {

    int i=0;
    int p = m / 4;
    if (plugged == 0) {
        if (paramInt <= p)
            i = R.drawable.battery4;// 1 line
        else if (paramInt <= 2 * p && paramInt > p)
            i = R.drawable.battery3;// 2 line
        else if (paramInt <= 3 * p && paramInt > 2 * p)
            i = R.drawable.battery2;// 3line
        else
            i = R.drawable.battery1;// 4 line full 
    } else {//  charging

        Log.i("charging","anim");
        animation.start();

    }//else
    paramView.setBackgroundResource(i);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-22T11:23:59.283

使用下面的代码开始动画。

```
AnimationDrawable mAnimDrawable=(AnimationDrawable)battery_ImgView.getBackground();
mAnimDrawable.start(); 
```

让我知道它是否有效。

# c# - 消息契约可以扩展数据契约吗？

> ID：12786897
> 
> 赞同：0
> 
> 时间：2012-10-08T17:50:59.443
> 
> 标签：c#, wcf, wcf-binding

我开发了一个 WCF 服务，它接受基于请求类型的请求和进程。但是，我遇到了我认为更多的是设计问题。大多数请求和响应都非常快速和简单，发送和接收少量数据，因此这对于标准缓冲传输模式非常有用。但是，有一些请求类型可能会返回（从服务到客户端）大量数据，在这种情况下，我必须将 MaxRecievedMessageSize 设置得非常高或切换到流传输模式。

我已经说服自己搁置个人请求并为流式请求创建新的合同/绑定/等是正确的方向。但是现在我面临的挑战是我喜欢传递一个请求对象（包含有关请求、其类型等的内容），这是一个数据合同。但是，如果我要转换为流传输模式，我会受到传递消息合同的限制。

我可以扩展数据契约并将扩展类称为消息契约吗？例如：

```
[DataContract]    
public class RequestObject

[MessageContract]
ExtendedRequestObject : RequestObject 
```

如果我不能走这条路，那么确保架构仍然有意义的最佳方法是什么？我喜欢必须始终传递一个对象并能够对该对象进行验证，而不是拥有大量具有多个参数的方法/函数等？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:24:25.127

我找不到来源，但这似乎很奇怪而且不可能。如何处理基类的 DataMembers？

继承似乎没有必要，聚合怎么样：

```
[MessageContract]
class ExtendedRequestObject
{
    [MessageBodyMember]  RequestObject Request;

} 
```

# c# - Rx 框架：在不中断原始可观察序列的情况下执行超时操作

> ID：12786901
> 
> 赞同：7
> 
> 时间：2012-10-08T17:51:14.423
> 
> 标签：c#, timeout, system.reactive

给定一个可观察的源，通过轮询低级设备的（a的变化）状态生成......

```
// observable source metacode:
IObservable<DeviceState> source = Observable.Interval(TimeSpan.FromSeconds(0.5))
    .Select(tick => new DeviceState(_device.ReadValue()))
    .DistinctUntilChanged(); 
```

...以及更新 UI 的消费者...

```
// UI metacode:
service.GetObservableDeviceStates()
    .Subscribe(state => viewModel.CurrentState = state.ToString()); 
```

...我需要在源“不活动”x 秒后执行自定义操作，而不会中断对源的订阅。像这样的东西：

```
// UI metacode:
service.GetObservableDeviceStates()
    .DoOnTimeout(TimeSpan.FromSeconds(x), () => viewModel.CurrentState = "Idle")
    .Subscribe(state => viewModel.CurrentState = state.ToString()); 
```

最佳实践是什么？想到的可能解决方案是（我是 Rx 菜鸟）：

1.  [缓冲区](https://stackoverflow.com/questions/8064104/reactive-extensions-timeout-that-doesnt-stop-sequence)（即使它不那么可读）
2.  解决[这个超时重载](http://msdn.microsoft.com/en-us/library/hh229512%28v=vs.103%29.aspx)；
3.  当没有任何变化时返回一些特殊的“服务端”（而不是使用 DistinctUntilChanged）并在 UI 代码上处理它：

    service.GetObservableDeviceStates() .Subscribe(state => viewModel.CurrentState = state.Special ? "Idle" : state.ToString());

编辑：如[答案中](https://stackoverflow.com/a/12787239/395144)所述，解决方案是：

```
 service.GetObservableDeviceStates()
            .Do(onNext)
            .Throttle(TimeSpan.FromSeconds(x))
            .Subscribe(onTimeout); 
```

EDIT2（警告）

如果 onNext 和 onTimeout 更新 UI 组件，为了避免 CrossThreadExceptions需要**两个**ObserveOn(uiSynchronizationContext)，因为 Throttle 在另一个线程上工作！

```
 service.GetObservableDeviceStates()
            .ObserveOn(uiSynchronizationContext)
            .Do(onNext)
            .Throttle(TimeSpan.FromSeconds(x))
            .ObserveOn(uiSynchronizationContext)
            .Subscribe(onTimeout); 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-08T18:16:07.870

超时或多或少适用于表示单个异步操作的可观察对象 - 例如，返回默认值或`OnError`所述可观察对象在一定时间内没有通知您。

您正在寻找的运算符是[Throttle](http://msdn.microsoft.com/en-us/library/hh229298%28v=vs.103%29.aspx)，即使它一开始可能看起来不像。`Throttle(p)`给你一个流，当源流没有产生一个值时产生一个值 period `p`。

与现有代码并行，您可以使用`source.Throttle(period).Do(...side effect)`.

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-09T10:31:28.123

我个人会为此避免使用 Do 方法。它确实使此示例中的代码相当简单，但我发现一旦使用“Do”潜入代码库，您很快就会有意大利面条。

您还可以考虑使用 Amb、Timer、TakeUntil、Throttle 等的组合来获得您正在寻找的结果并仍然维护 Monad*。或者简单来说，我假设您理想地希望获得一系列状态值，并且不需要在您的代码中放置一个计时器（即，将其卸载到服务中）。

```
public IObservable<DeviceStatus> GetObservableDeviceStates(TimeSpan silencePeriod)
{
    return Observable.Create<DeviceStatus>(
    o=>
    {
        var idle = Observable.Timer(silencePeriod).Select(_=>new DeviceStatus("Idle"));

        var polledStatus = Observable.Interval(TimeSpan.FromSeconds(0.5))
                        .Select(tick => new DeviceStatus(_device.ReadValue()))
                        .DistinctUntilChanged()
                        .Publish();

        var subscription = (from status in polledStatus
                            from cont in Observable.Return(status).Concat(idle.TakeUntil(polledStatus))
                            select cont)
                     .Subscribe(o);

        return new CompositeDisposable(subscription, polledStatus.Connect());
    });
} 
```

一旦发生指定的更改静默期，此代码现在使服务返回空闲状态值。

这意味着您的 UI 元代码保持简单，与 DeviceStatus 相关的逻辑保持在其所属的位置

```
// UI metacode:
service.GetObservableDeviceStates(TimeSpan.FromSeconds(2))
    .Subscribe(state => viewModel.CurrentState = state.ToString()); 
```

# java - 性能：Java 的 String.format

> ID：12786902
> 
> 赞同：16
> 
> 时间：2012-10-08T17:51:29.117
> 
> 标签：java, performance, string-concatenation

> **可能重复：**
> [如果性能很重要，我应该使用 Java 的 String.format() 吗？](https://stackoverflow.com/questions/513600/should-i-use-javas-string-format-if-performance-is-important)

我想知道是否可以`String.format`在 Java 应用程序中使用而不是`StringBuilder`......所以，我只写了一个简单的测试，如下所示：

```
public static void main(String[] args) {
        int i = 0;
        Long start = System.currentTimeMillis();
        while (i < 10000) {
            String s = String.format("test %d", i);
            i++;
        }
        System.out.println(System.currentTimeMillis() - start);
        i = 0;
        start = System.currentTimeMillis();
        while (i < 10000) {
            String s = new StringBuilder().append("test ").append(i).toString();
            i++;
        }
        System.out.println(System.currentTimeMillis() - start);
    } 
```

结果：

```
238
15 
```

因此，如果我的测试有效，`StringBuilder`则比`String.format`. 好的。现在，我开始思考如何`String.format`运作。它是一个简单的字符串连接，比如`"test " + i`？

`StringBuilder`串联 和 和有什么区别`String.format`？有没有一种简单的方法`String.format`和快速的方法`StringBuilder`？

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-10-08T18:05:53.567

我写了一个快速[卡尺](http://code.google.com/p/caliper/)基准来比较`String.format()`与`StringBuilder`, `StringBuffer`，正常`String` `+`运算符`String.replace()`和`String.concat()`方法：

```
public class StringFormatBenchmark extends SimpleBenchmark {

    public void timeStringFormat(int reps) {
        while (--reps >= 0) {
            String s = String.format("test %d", reps);
        }
    }

    public void timeStringBuilder(int reps) {
        while (--reps >= 0) {
            String s = new StringBuilder("test ").append(reps).toString();
        }
    }

    public void timeStringBuffer(int reps) {
        while (--reps >= 0) {
            String s = new StringBuffer("test ").append(reps).toString();
        }
    }

    public void timeStringPlusOperator(int reps) {
        while (--reps >= 0) {
            String s = "test " + reps;
        }
    }

    public void timeReplace(int reps) {
        while (--reps >= 0) {
            String s = "test {}".replace("{}", String.valueOf(reps));
        }
    }

    public void timeStringConcat(int reps) {
        while (--reps >= 0) {
            String s = "test ".concat(String.valueOf(reps));
        }
    }

    public static void main(String[] args) {
        new Runner().run(StringFormatBenchmark.class.getName());
    }

} 
```

结果如下（Java 1.6.0_26-b03，Ubuntu，32 位）：

![卡尺2](../Images/6770d0e20395f38e08eddbf65353f4b2.png)

显然`String.format()`要慢得多（一个数量级）。也`StringBuffer`比`StringBuilder`（我们被教导的）慢得多。finally`StringBuilder`和`String` `+`operator 几乎相同，因为它们编译为非常相似的字节码。`String.concat()`有点慢。

`String.replace()`如果简单的连接就足够了，也不要使用。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-08T17:53:54.590

String.format 相对较慢，但通常足够快。

如果格式更简单，我会使用格式，除非您在分析应用程序时看到性能问题。

注意：您示例中的 String.format 需要大约 24 微秒，并且尚未完全预热。我会忽略前 10K 次迭代。

恕我直言`"test " + i`，在这种情况下是最简单的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-08T18:00:14.500

I have run a test post-JVM warmup (once the methods are compiled) and get similar results, with StringBuilder more than 30x quicker.

> format: 943
> stringbuilder: 26

```
public class TestPerf {

    private static int NUM_RUN;

    public static void main(String[] args) {
        NUM_RUN = 100_000;
        //warm up
        for (int i = 0; i < 10; i++) {
            method1();
            method2();
        }

        System.gc();
        System.out.println("Starting");

        long sum = 0;
        long start = System.nanoTime();
        for (int i = 0; i < 10; i++) {
            sum += method1();
        }
        long end = System.nanoTime();
        System.out.println("format: " + (end - start) / 1000000);

        System.gc();

        start = System.nanoTime();
        for (int i = 0; i < 10; i++) {
            sum += method2();
        }
        end = System.nanoTime();
        System.out.println("stringbuilder: " + (end - start) / 1000000);

        System.out.println(sum);
    }

    private static int method1() {
        int sum = 0;
        for (int i = 0; i < NUM_RUN; i++) {
            String s = String.format("test %d", i);
            sum += s.length();
        }
        return sum;
    }

    private static int method2() {
        int sum = 0;
        for (int i = 0; i < NUM_RUN; i++) {
            String s = new StringBuilder().append("test ").append(i).toString();
            sum += s.length();
        }
        return sum;
    }
} 
```

# c# - 需要 C# 正则表达式来匹配四位数字序列，但忽略任何单个数字

> ID：12786908
> 
> 赞同：2
> 
> 时间：2012-10-08T17:51:49.090
> 
> 标签：c#, regex

好的，我需要改进这个问题。让我再试一次：

我需要解析出机场代码之后的飞行时间，但两者之间可能有一个数字和空格。

示例数据：

```
ORD  1100
HOU 1 1215
MAD   4  1300 
```

我试过这个：

```
([A-Z]{3})\s?\d?\s?(\d{4}) 
```

我最终得到机场代码和一个数字。我需要一个正则表达式，它会忽略机场代码之后的所有内容，除了 4 位数的飞行时间。

希望我改进了我的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T17:53:12.520

解决方案可能很简单：

```
\d{4} 
```

根据您的输入，您不需要关心*前面的数字*..

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:08:43.767

这里有一些东西，使用*lookbehind*和*lookahead*来确保只有4个数字，它们周围没有数字（或开始/结束）。

```
"(?<=[^\d]|^)\d{4}(?=[^\d]|$)" 
```

这两个`[^\d]`可以替换`[\s]`为仅匹配 4 位数字和周围的空格。

**更新：** 随着您的最新更新，我将我的正则表达式与您的（来自评论）合并并提出了这个：

```
"(?<=[A-Z]{3}\s(\d\s)?)\d{4}(?=\s|$)" 
```

该模式分为三个部分。首先是*回顾*：`(?<=PatternHere)`。这里面的模式必须在我们寻找*之前*出现/匹配。

下一部分是我们简单的主要模式：`\d{4}`，四位数字。

最后一部分是*lookahead* : ，它与*lookbehind*`(?=PatternHere)`几乎相同，但检查另一边，*forward*。

 *** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-09T13:16:27.287

这是我会使用的答案：

```
@"([A-Z]{3})\s+(?:[0-9]\s+)?([0-9]{4})" 
```

基本上它与您尝试做的非常相似。

第一部分是`([A-Z]{3})`，它查找 3 个大写字母并将它们分配给组 1（组 0 是整个字符串）。

第二部分是`\s+(?:[0-9]\s+)?`，它至少需要一个空格，其中某处可能有 1 位数字。中间的非捕获组要求如果那里有单个数字，则必须在其后至少有 1 个空格。这可以防止类似`ABC 12345`.

接下来我们有`([0-9]{4})`，它只是匹配您要查找的 4 位数字。这些可以在第 2 组中找到。我在这里使用 [0-9] 因为`\d`指的是比我们习惯的数字更多的数字（如东方阿拉伯数字）。**

# scala - Scala类参数化中附加冒号的含义

> ID：12786910
> 
> 赞同：45
> 
> 时间：2012-10-08T17:52:03.037
> 
> 标签：scala, generics, types

以下代码中的含义是什么`[A : Manifest : WireFormat]`？它来自`com.nicta.scoobi.TextInput`（在 github 上可用）。它似乎不是任何通常的类型界限。

```
 def fromDelimitedTextFile[A : Manifest : WireFormat]
      (path: String, sep: String = "\t")
      (extractFn: PartialFunction[List[String], A])
    : DList[A] = {

    val lines = fromTextFile(path)
    lines.flatMap { line =>
      val fields = line.split(sep).toList
      if (extractFn.isDefinedAt(fields)) List(extractFn(fields)) else Nil
    }
  } 
```

在哪里可以找到有关此主题的更多信息？

* * *

## 回答 #1

> 赞同：59
> 
> 时间：2012-10-08T18:04:41.100

这称为上下文绑定。它们是隐式参数列表的语法糖：

```
def meth[A : ContextBound1 : ContextBoundN](a: A)

// ==>

def meth[A](a: A)(implicit evidence: ContextBound1[A], ContextBoundN[A]) 
```

如果从 1 到 N 有多个上下文边界，则它们都被转换为相同的参数列表。有关它们如何工作以及它们的用途的更详细说明，请参阅[此问题。](https://stackoverflow.com/questions/4465948/what-are-scala-context-and-view-bounds)

[要找到这样的符号，阅读StackOverflow Scala 教程](https://stackoverflow.com/tags/scala/info)很有用。

# linux - Linux 一对多多路复用器

> ID：12786911
> 
> 赞同：0
> 
> 时间：2012-10-08T17:52:16.873
> 
> 标签：linux, pipe, linux-device-driver

我正在 Linux 中创建一个简单的设备驱动程序，它应该通过串行方式读取一些数据，对其进行解析、结构化，然后将其流式传输到任何需要数据的进程。

我认为实现这一目标的最佳方法是使用管道广播数据。

在 Linux 中，将进程 A 的输出通过管道传输到其他 N 个进程的输入的最佳方法是什么？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-08T18:03:18.697

我会让驱动程序写入内存中的循环缓冲区，并使用对应的 API 来发现缓冲区的地址并将数据从缓冲区读取到消费者的私有内存中。在我的实现中，慢消费者可能不会收到所有数据，但这可以通过引入缓存快速消费来排队大量数据以供慢消费者恢复来解决。

# macos - 以编程方式“拔出并重新插入”USB 设备以在 OS X 中加载新驱动程序？

> ID：12786922
> 
> 赞同：10
> 
> 时间：2012-10-08T17:52:49.773
> 
> 标签：macos, installation, usb, driver, iokit

我正在 OS X 中为 USB 设备安装 IOKit 驱动程序的安装程序，我试图让它不需要在最后重新启动。安装程序正确安装驱动程序并重建 kext 缓存，运行后，如果我拔下并重新插入 USB 设备，它会正确加载新驱动程序，一切正常。

但是，我不想要求用户在物理上拔下设备以加载新驱动程序。必须有一种方法可以让 OS X 以编程方式加载新驱动程序 - 实际上模拟设备被拔出并重新插入，或类似的东西。我该怎么做呢？到目前为止，几个小时的谷歌搜索没有任何结果，所以任何帮助都将不胜感激！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-13T17:16:15.437

IOUSBDeviceInterface187::USBDeviceReEnumerate() 会做你想做的事。唯一的障碍是找到所有感兴趣的设备并使用`IOServiceGetMatchingServices()`.

```
/*!
@function USBDeviceReEnumerate
@abstract   Tells the IOUSBFamily to reenumerate the device.
@discussion This function will send a terminate message to all clients of the IOUSBDevice (such as 
            IOUSBInterfaces and their drivers, as well as the current User Client), emulating an unplug 
            of the device. The IOUSBFamily will then enumerate the device as if it had just 
            been plugged in. This call should be used by clients wishing to take advantage 
            of the Device Firmware Update Class specification.  The device must be open to use this function. 
@availability This function is only available with IOUSBDeviceInterface187 and above.
@param      self Pointer to the IOUSBDeviceInterface.
@param      options A UInt32 reserved for future use. Ignored in current implementation. Set to zero.
@result     Returns kIOReturnSuccess if successful, kIOReturnNoDevice if there is no connection to an IOService,
            or kIOReturnNotOpen if the device is not open for exclusive access.
*/

IOReturn (*USBDeviceReEnumerate)(void *self, UInt32 options); 
```

查看 IOKit/usb/IOUSBLib.h

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-08T18:56:38.490

看看`diskutil`，尤其是`mount`和`unmount`选项。这些将以软件方式弹出和安装设备。您可以使用`diskutil list`获取所有当前安装的设备的列表。如果您需要有关 diskutil 的更多信息，请查看手册页。

# gdb - 如何使用 GDB 在 V8 中设置断点

> ID：12786926
> 
> 赞同：0
> 
> 时间：2012-10-08T17:53:00.447
> 
> 标签：gdb, v8

我对 GDB 和 V8 JavaScript 引擎还很陌生。

编译 shell.cc(/v8/v8-trunk/samples/Shell.cc) 后，我尝试在 parser.cc(/v8/v8-trunk/src) 中设置断点(b Parser::Parser)，然后是 GDB意外显示错误消息：找不到名为“Parser::Parser”的命名空间、类、结构或联合的成员。但是，可以在 parser.cc 中找到“Parser::Parser”方法的源代码。

有任何想法吗？谢谢。

```
(gdb) c
Continuing.
V8 version 3.13.1 [sample shell]
> 3+5;
8
> 
Program received signal SIGINT, Interrupt.
0x00752402 in __kernel_vsyscall ()
(gdb) b Parser::Parser
Can't find member of namespace, class, struct, or union named "Parser::Parser"
Hint: try 'Parser::Parser<TAB> or 'Parser::Parser<ESC-?>
(Note leading single quote.)
(gdb) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:28:57.920

您还需要指定命名空间。根据[parser.cc](http://code.google.com/p/v8/source/browse/trunk/src/parser.cc)，`Parser::Parser`位于`v8::internal`命名空间内。试试这个：

```
(gdb) b 'v8::internal::Parser::Parser' 
```

# eclipse - 内部编辑器 (pdf4eclipse) 未在 eclipse 中列出

> ID：12786935
> 
> 赞同：4
> 
> 时间：2012-10-08T17:53:26.733
> 
> 标签：eclipse, pdf, eclipse-plugin, latex

我正在尝试使用 TeXLipse 将 Eclipse 及其所有强大功能设置为我的 Latex 编辑器。一切似乎都工作正常（用[SumatraPDF](http://teakes.blogspot.de/2009/08/setting-up-texlipse-and-sumatra-pdf.html)测试）但是 Pdf4Eclipse，我完全想要“在写作时更新”的感觉。

我从问谷歌到现在发现的是：Pdf4Eclipse 不能被选为 Texlipse 中的查看器，它应该被选为 Eclipse 中的默认查看器，方法是单击：

窗口 > 首选项：常规 > 编辑器 > 文件关联；选择 *.pdf 并选择 Pdf4Eclipse - 但它不存在。

虽然它已安装，但它在首选项设置中有一个条目。所以问题是：为什么它不存在，我做错了什么）-：

编辑：错误日志（请注意我最初的学习曲线和最后安装命令的绝望垃圾邮件）：

```
!SESSION 2012-10-08 18:42:10.267 -----------------------------------------------
eclipse.buildId=M20120914-1800
java.version=1.7.0_07
java.vendor=Oracle Corporation
BootLoader constants: OS=win32, ARCH=x86_64, WS=win32, NL=de_DE
Command-line arguments:  -os win32 -ws win32 -arch x86_64

!ENTRY net.sourceforge.texlipse 4 4 2012-10-08 18:44:59.172
!MESSAGE Could not start previewer 'itexmac'. Please make sure you have entered the correct path and filename in the viewer preferences.
!STACK 0
java.io.IOException: Cannot run program "" (in directory "C:\Users\Felix\workspace\test"): CreateProcess error=2, Das System kann die angegebene Datei nicht finden
    at java.lang.ProcessBuilder.start(Unknown Source)
    at java.lang.Runtime.exec(Unknown Source)
    at net.sourceforge.texlipse.viewer.ViewerManager.execute(ViewerManager.java:555)
    at net.sourceforge.texlipse.viewer.ViewerManager.execute(ViewerManager.java:377)
    at net.sourceforge.texlipse.viewer.ViewerManager.preview(ViewerManager.java:133)
    at net.sourceforge.texlipse.viewer.TexLaunchConfigurationDelegate.launch(TexLaunchConfigurationDelegate.java:68)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:855)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:704)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:1047)
    at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1251)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
Caused by: java.io.IOException: CreateProcess error=2, Das System kann die angegebene Datei nicht finden
    at java.lang.ProcessImpl.create(Native Method)
    at java.lang.ProcessImpl.<init>(Unknown Source)
    at java.lang.ProcessImpl.start(Unknown Source)
    ... 11 more

!ENTRY net.sourceforge.texlipse 4 4 2012-10-08 18:48:07.453
!MESSAGE Could not start previewer 'itexmac'. Please make sure you have entered the correct path and filename in the viewer preferences.
!STACK 0
java.io.IOException: Cannot run program "" (in directory "C:\Users\Felix\workspace\test"): CreateProcess error=2, Das System kann die angegebene Datei nicht finden
    at java.lang.ProcessBuilder.start(Unknown Source)
    at java.lang.Runtime.exec(Unknown Source)
    at net.sourceforge.texlipse.viewer.ViewerManager.execute(ViewerManager.java:555)
    at net.sourceforge.texlipse.viewer.ViewerManager.execute(ViewerManager.java:377)
    at net.sourceforge.texlipse.viewer.ViewerManager.preview(ViewerManager.java:133)
    at net.sourceforge.texlipse.viewer.TexLaunchConfigurationDelegate.launch(TexLaunchConfigurationDelegate.java:68)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:855)
    at org.eclipse.debug.internal.core.LaunchConfiguration.launch(LaunchConfiguration.java:704)
    at org.eclipse.debug.internal.ui.DebugUIPlugin.buildAndLaunch(DebugUIPlugin.java:1047)
    at org.eclipse.debug.internal.ui.DebugUIPlugin$8.run(DebugUIPlugin.java:1251)
    at org.eclipse.core.internal.jobs.Worker.run(Worker.java:53)
Caused by: java.io.IOException: CreateProcess error=2, Das System kann die angegebene Datei nicht finden
    at java.lang.ProcessImpl.create(Native Method)
    at java.lang.ProcessImpl.<init>(Unknown Source)
    at java.lang.ProcessImpl.start(Unknown Source)
    ... 11 more

!ENTRY org.eclipse.equinox.p2.operations 4 0 2012-10-08 18:58:11.796
!MESSAGE Operation details
!SUBENTRY 1 org.eclipse.equinox.p2.operations 4 10050 2012-10-08 18:58:11.796
!MESSAGE Cannot complete the request.  See the error log for details.
!SUBENTRY 1 org.eclipse.equinox.p2.operations 2 10005 2012-10-08 18:58:11.796
!MESSAGE "PDF4Eclipse" will be ignored because it is already installed.

!ENTRY org.eclipse.equinox.p2.operations 4 0 2012-10-08 18:58:11.799
!MESSAGE Operation details
!SUBENTRY 1 org.eclipse.equinox.p2.operations 4 10050 2012-10-08 18:58:11.799
!MESSAGE Cannot complete the request.  See the error log for details.
!SUBENTRY 1 org.eclipse.equinox.p2.operations 2 10005 2012-10-08 18:58:11.799
!MESSAGE "PDF4Eclipse" will be ignored because it is already installed.' 
```

**编辑 10.10.2012：**
我在 Win XP（而不是 Vista）上使用另一个 Eclipse 版本 3.8 而不是 4.2（平台运行时二进制版本）验证了这种行为。启动期间未生成错误日志。也许我应该在 github.org 提交错误报告？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-19T12:46:20.133

我有同样的问题（我猜也是一样。我的问题是当我在 texlipse 中双击一个 pdf 文件时，它总是在外部查看器中打开，在我的情况下是 pdf-Xchange），刚刚解决了。这是我的解决方案和对您问题的回答：

在窗口 > 首选项：常规 > 编辑器 > 文件关联中，对于 *.pdf，“关联编辑器”框架中显示的是“PDF 查看器（默认）”。这实际上是 pdf4eclipse。您无需添加任何内容。如果单击“添加”，您将无法添加 pdf4eclipse。

那么问题实际上是您的 texlipse 已经选择了外部 pdf 查看器。现在转到“窗口”>“Texlipse”>“查看器设置”，在“查看器配置”中，我猜你会看到一个 pdf 查看器。只需删除它，现在一切都会完美。在 texlipse 中双击一个 pdf 文件将在 pdf4eclipse 中打开它。

如果你有和我一样的问题，那就这样吧。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-10T15:30:56.967

我猜测在某处有一个设置，您可以在其中指定itexmac 程序的完整路径，但此设置未填写。

您是否完成了本页末尾的步骤？

[http://texlipse.sourceforge.net/manual/build.html](http://texlipse.sourceforge.net/manual/build.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-05-28T12:39:20.837

我遇到了这个问题，修复它的方式与@unstable 略有不同。

*   在 Window > Preferences: General > Editors > File Associations 中，搜索“*.pdf”并在关联的编辑器中选择“add...”。

*   选择“外部程序”，添加 Acrobat 目录索引并点击确定。

*   选择 Acrobat 目录索引作为默认值。尝试用它打开你的文件。然后返回并将“PDF Viewer”设为默认值。

那应该可以解决问题。

# javascript - 了解与 jquery 选择器的新关键字关联

> ID：12786942
> 
> 赞同：2
> 
> 时间：2012-10-08T17:53:53.160
> 
> 标签：javascript, jquery

我应该如何从左到右定义这里发生的事情。我对**[0].nameofsomething**部分感到困惑。愚蠢的奖金问题，[0]也可以是其他整数吗？看起来 jquery 选择器现在已命名空间......对吗？

```
$("#someselector")[0].nameofsomething = new MyObject(); 
```

也可以这样写吗....

```
$("#someselector").nameofsomething = new MyObject(); 
```

并产生完全相同的结果？

感谢您的任何见解！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T17:56:46.623

[0] 选择 DOM 对象，因此您正在添加到元素中。

```
$("#someselector")[0].nameofsomething  // this is same thing as document.getElementById("someselector").nameofsomething = {}; 
```

您正在添加到 jQuery 对象

```
$("#someselector").nameofsomething 
```

所以他们不是一回事。

# php - json_encode 添加太多双引号

> ID：12786947
> 
> 赞同：0
> 
> 时间：2012-10-08T17:54:30.337
> 
> 标签：php, jquery, json

我正在开发一个以 JSON 形式返回数据的 PHP Web 服务。我现在正在使用 jQuery/javascript 文件测试 Web 服务。它似乎正在正确地进行调用和接收数据，但来自服务器的返回值似乎有太多的双引号。

PHP：

```
public static function getToken($username, $password)
        {
            $token = AuthenticationController::authenticate($username, $password);

            if ($token)
            {
                $user = AuthenticationController::getUserFromToken($token);

                if (UserController::userIsVerified($user->id))
                {
                    $t = array('token' => $token);

                    return json_encode($t);
                }

                return json_encode(array('error' => 'This account has not been verified. Check email and click the provided link to verify the account.'));
            }

            return json_encode(array('error' => 'Authentication failed.'));
        } 
```

JS：

```
req.done(function(msg)
        {
            if (msg.error)
            {
                error = true;
                message = msg.error;
            }
            else if (msg.message)
            {
                message = msg.message;
            }
            else if (msg.token)
            {
                token = msg.token;
            }
            else 
            {
                error = true;
                message = "An unknown error has occured.";
            }
        }); 
```

一方面，该`msg`对象不是以 JSON 对象的形式返回，而是以字符串的形式出现，因此我必须对其进行`$.parseJSON(msg)`处理。您在下面看到的，token 变量最终写成“mylongtoken”（包括引号）。如果您在 firebug 中查看该变量，它就像这样：“mylongtoken”。这只是默认行为，我需要去掉引号吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T19:24:26.350

首先，要让 jquery 将您的响应解析为 json，您必须返回适当的内容类型。`application/json`似乎合适。

为了增加安全性，您可以添加`X-Content-Type-Options: nosniff`以防止浏览器被欺骗将您的 JSON 作为普通页面读取以尝试任何可能启用 HTML 解析和 XSS 的内容嗅探：

其次，如果您得到两组引号，那么您编写的代码确实会添加它们。json_encode() 不会：

`echo json_encode(array('token' => 'tokenstring');`将输出`{"token":"tokenstring"}`- 没有周围的引号。任何字符串中的任何引号都将使用反斜杠进行转义。

# javascript - JSON键名？

> ID：12786960
> 
> 赞同：1
> 
> 时间：2012-10-08T17:55:17.357
> 
> 标签：javascript, json

> **可能重复：**
> [JSON 规范 - 密钥是否必须用引号括起来？](https://stackoverflow.com/questions/949449/json-spec-does-the-key-have-to-be-surrounded-with-quotes)

哪个是正确的语法？

`{ key: "value" }`还是`{ "key": "value" }`？

我已经看到了两种方式，并且在我的测试中都有效，但我只是好奇哪个在语法上是正确的？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-08T17:56:02.293

JSON 需要引用键。JavaScript 没有。所以对于 JSON，你的第二个例子是正确的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T17:58:11.833

它们都是 javascript 对象的有效表示法。只有完全引用的第二个版本是有效的 JSON。

请参阅[规范](http://www.json.org/)和[这个基于网络的 linter](http://jsonlint.com/)。

# sql-server - 来自多个表的 SUM

> ID：12786962
> 
> 赞同：1
> 
> 时间：2012-10-08T17:55:33.520
> 
> 标签：sql-server

我有三张桌子：

*   `order`
*   `orderline`（有`orderID`）
*   `orderactions`（有`orderID`）

然后我需要`SUM(of orderline.price)`和`SUM(of orderactions.price)`per `orderID`。

当我使用：

```
 SELECT order.ID, SUM(orderlines.price), SUM(orderactions.price) 
    FROM order 
    LEFT JOIN orderlines ON orderlines.orderID=order.ID
    LEFT JOIN orderactions ON orderactions.orderID=order.ID
    WHERE order.ID=@orderID
    GROUP BY order.ID 
```

我得到了一个结果，`orderactions`这个结果相当于`SUM(orderactions.price)*quantity`这个 order.ID 的 orderlines

我找到的唯一解决方案，它给了我一个正确的结果，是每个“SUM”表的子查询：

```
SELECT order.ID
, (SELECT SUM(orderlines.price) FROM orderlines WHERE orderlines.orderId=order.ID)
, (SELECT SUM(orderactions.price) FROM orderactions WHERE orderactions.orderId=order.ID)
FROM order
WHERE order.ID=@orderID 
```

问题：是否有其他（更快）解决方案，因为子查询很慢，我们尽量不使用它们？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:00:57.647

Since your select only runs the two *very simple* subqueries once each, I'd say you're pretty close to optimal for your query. There is no need to add a `JOIN` unless the queries are correlated in some way.

The slow part about subqueries is usually that the database may (if you're not careful how you write your query) non obviously execute them more than once. This normally happens if they depend on external values that may change per row, ie when you `JOIN` them in some way.

Your subqueries are straight forward enough and not using any external values other than your constant, so in your case, they only execute once each, and there is nothing in them that is simplified by adding a `JOIN`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:23:04.737

取决于您的数据，这种方式可以成为解决方案：

```
 SELECT order.ID, 
    SUM(CASE WHEN orderlines.orderID IS NOT NULL THEN orderlines.price ELSE 0 END), 
    SUM(CASE WHEN orderactions.orderID IS NOT NULL THEN orderactions.price ELSE 0 END) 
FROM order 
LEFT JOIN orderlines ON orderlines.orderID=order.ID
LEFT JOIN orderactions ON orderactions.orderID=order.ID
WHERE order.ID=@orderID
GROUP BY order.ID 
```

# c++ - 具有多个参数的部分类模板特化

> ID：12786963
> 
> 赞同：1
> 
> 时间：2012-10-08T17:55:33.650
> 
> 标签：c++, templates

我有一个模板类`Foo`，它接受两个（或更多）模板参数。我想在单独的类中使用它的类型`Bar`。请参阅以下简单示例，该示例编译时没有错误：

```
template <typename T, typename U> class Foo { };
template <typename T, typename U> class Bar { };
int main()
{
  Bar<int, char> bar; // quick example -- int & char could be any 2 types
  return 0;
} 
```

上面的内容有点乏味，特别是如果`Foo`需要许多模板参数并且程序员必须重新输入它们。我想要类似下面的东西，但它不能编译：

```
template <typename T, typename U> class Foo { };
template <typename T, typename U> class Bar; // base
template <typename T, typename U> class Bar< Foo<T, U> > { }; // specialization
int main()
{
  typedef Foo<int, char> FooType;
  Bar<FooType> bar;
  return 0;
} 
```

```
test.cpp:3:60：错误：模板参数的数量错误（1，应该是 2）
test.cpp:2:45：错误：为“模板类 Bar”提供
test.cpp：在函数'int main()'中：
test.cpp:7:18：错误：模板参数的数量错误（1，应该是 2）
test.cpp:2:45：错误：为“模板类 Bar”提供
test.cpp:7:23：错误：';'之前的声明中的类型无效 令牌

```

我特别困惑，因为这种偏特化习语适用于单个模板参数；请参阅标题为：[模板的总类专业化的问题](https://stackoverflow.com/questions/4686445/total-class-specialization-for-a-template)

**编辑**我意识到，至少出于我的目的，我可以使用 C++11 可变参数模板来解决这个问题，如下所示。不过，我仍然想知道为什么第二个示例不起作用。

```
template <typename... FooTypes> class Bar;
template <typename... FooTypes> class Bar< Foo<FooTypes...> > { }; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-08T18:11:45.817

您的类模板`Bar<T, U>`采用两个模板参数，但您的专业化只给出一个：

```
template <typename T, typename U> class Bar<Foo<T, U> > {}; 
```

您的意思是`Bar`只采用一个模板参数并相应地对其进行专门化吗？

```
template <typename T> class Bar;
template <typename T, typename U> class Bar<Foo<T, U> > {}; 
```

请注意，特化可以依赖于不同数量的模板参数，但特化需要获得相同数量的参数。它也可以反过来工作：完整的特化可以没有模板参数：

```
template <> class Bar<int> {}; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-08T18:06:37.910

我对您在此行中尝试执行的操作感到有些困惑：

```
template <typename T, typename U> class Bar< Foo<T, U> > { }; // specialization 
```

您说模板需要两种类型，T 和 U，作为类型参数。Foo 本身只是一种类型，通过使用这两个参数实例化 Foo 模板创建的类型。

我看到您期望它能够拾取并确定 T 和 U，因为您在这两个地方都使用了它们，但这并没有规避您只为两种类型的模板专业化提供了一个类型参数的事实。

# c# - 从 RAID 配置获取硬盘驱动器串行的潜在问题

> ID：12786969
> 
> 赞同：1
> 
> 时间：2012-10-08T17:56:02.997
> 
> 标签：c#, .net, virtual-machine, identity

我目前有一个函数，它使用通过 WMI 的调用返回虚拟机的硬盘驱动器序列，在实际物理硬盘驱动器上运行时效果很好。但是，当我在带有虚拟磁盘的虚拟机上运行该功能时，硬盘驱动器序列总是以相同的 1 和 0 序列返回。我正在尝试使用这种技术来识别特定的机器。是否有更可靠的方法来检索某种标识符，该标识符标识（虚拟）机器中使用的硬件可能不会改变？

作为说明，我已将 MAC 地址作为建议提供给我，但如果必须更换它所绑定的 NIC，我不希望我的软件损坏。

我还关心通过 RAID 配置的系统硬盘驱动器上可能返回的内容，因为此串行需要与每次调用保持一致。但是，我没有配置 RAID 的系统来测试它，所以我不确定首先会返回什么。

***编辑***我已经找到了一种可靠的方法来将我们的软件锁定到虚拟机，即使序列号可能不是唯一的，所以 VM 部分不再是问题。但是，我仍然不确定在某些 RAID 配置下这可能如何恢复，并且如上所述，我没有配置 RAID 的机器来测试，更不用说要测试的几个配置了。非常感谢您对此提供的任何帮助。

下面是高清串口功能：

```
string Win32_Class = string.Empty;
string Win32_Property = string.Empty;
string systemDrive = null;
try
{
    systemDrive = System.Environment.GetFolderPath(System.Environment.SpecialFolder.System).Substring(0, 2);
    Win32_Class = "Win32_LogicalDisk";
    using (ManagementObjectSearcher searcher = new ManagementObjectSearcher(string.Format("SELECT * FROM {1} WHERE DeviceID='{0}'", systemDrive, Win32_Class)))
    {
        foreach (ManagementObject logicalDisk in searcher.Get())
        {
            Win32_Class = "Win32_DiskPartition";
            foreach (ManagementObject partition in logicalDisk.GetRelated(Win32_Class))
            {
                Win32_Class = "Win32_DiskDrive";
                foreach (ManagementObject diskDrive in partition.GetRelated(Win32_Class))
                {
                    Win32_Class = "Win32_PhysicalMedia";
                    foreach (ManagementObject diskMedia in diskDrive.GetRelated(Win32_Class))
                    {
                        Win32_Property = "SerialNumber";
                        mySystemDeviceSerial = diskMedia[Win32_Property].ToString().Trim();
                    }
                }
            }
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-09T21:39:21.920

如果要识别 VM 实例，可以使用实例的 UUID 属性`Win32_ComputerSystemProduct`。在现实世界中，这映射到主板上的 ID。在虚拟机中，无论​​驱动器如何，这都会为每个虚拟机配置返回一个唯一值（但我不确定如果克隆或移动虚拟机会发生什么）。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-16T15:30:38.847

您可以使用“逻辑”磁盘的序列号。如果磁盘被重新分区，这将改变。如果更改冗余 RAID 设置的一个驱动器，它不会更改。这是存储在块级别的东西，因此实际的存储设置是什么并不重要。

您需要安装卷`VolumeSerialNumber`的 a 属性。`Win32_LogicalDisk`

[http://msdn.microsoft.com/en-us/library/windows/desktop/aa394173(v=vs.85).aspx](http://msdn.microsoft.com/en-us/library/windows/desktop/aa394173(v=vs.85).aspx)

# javascript - 将 phonegap 1.0.0 升级到 2.0.1

> ID：12786970
> 
> 赞同：0
> 
> 时间：2012-10-08T17:56:03.820
> 
> 标签：javascript, iphone, html, cordova

我正在使用 phonegap 1.0.0，我想直接升级到 2.0.1。我是否必须一路从 1.0.0 -> 1.0.1-> .. -> 2.0.1 升级。

[我找到了这个教程](http://docs.phonegap.com/en/2.1.0/guide_upgrading_ios_index.md.html)

但它并没有说你是否可以从 1.0.0 直接升级到 2.0.1

提前非常感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:30:48.340

搏一搏。

话虽如此，这就是我将如何做到的。

1.  检查你的代码到 git
2.  升级到 2.0.1

然后，如果您有任何困难，只需回滚即可。如果您正在试验，请确保使用分支来测试。

# javascript - 使用正则表达式的带有通配符的 URL 的 JavaScript .search()

> ID：12786972
> 
> 赞同：2
> 
> 时间：2012-10-08T17:56:07.390
> 
> 标签：javascript, regex, wildcard, referrer

我正在建立一个项目组合的网站。我有一些分页可以让你进入下一个/上一个项目。

我想在进入项目时运行一些动画，而不是在项目之间浏览时。

我的计划是使用引用 URL 来了解您是否从另一个项目来到一个项目，因此不运行动画。但是我的正则表达式不好，所以我遇到了麻烦。

这是我想做的（伪代码）

```
var refURL = document.referrer;
if( refURL.search('http://www.example.com/work/digital/*') > 0 ) {
    // Do not run animation
} else {
    // Run animation
} 
```

重要的是，“http://www.example.com/work/digital/”应该是 FALSE，但“http://www.example.com/work/digital/*”应该是 TRUE。

那么，RegEx 是做什么的呢？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-08T18:04:53.043

我想你正在寻找这个： -

```
var refURL = document.referrer;
if( refURL.search('http://www.example.com/work/digital/(.*)') > 0 ) {
    // Do not run animation
} else {
    // Run animation
} 
```

以其他方式，您可以使用`indexOf()`

```
refURL.indexOf("http://www.example.com/work/digital/");

if(refURL.indexOf("http://www.example.com/work/digital/") > -1) {
       // Do Your Stuff
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-08T18:21:38.957

`(.*)`匹配 0 个或多个字符，而`(.+)`匹配 1 个或多个字符

JavaScript 中的 RegExp 也不需要括起来，所以只需键入

```
var exp = /pattern/modifiers 
```

欲了解更多详情，请访问：[http ://www.w3schools.com/jsref/jsref_obj_regexp.asp](http://www.w3schools.com/jsref/jsref_obj_regexp.asp)

我对您的问题的想法是尝试以下方法：

```
var refURL = document.referrer;
if (refURL.search(/^http:\/\/www.example.com\/work\/digital\/(.+)$/i) >= 0) {
    // Do not run the animation
} else {
    // Run the animation
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2015-03-12T12:25:35.570

可以使用正则表达式和 javascript

```
var searchin = item.toLowerCase();
var str = "*abc*";
str = str.replace(/[*]/g, ".*").toLowerCase().trim();
return new RegExp("^"+ str + "$").test(searchin); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-08T18:06:12.367

```
var re = /^http:\/\/www.example.com\/work\/digital\/.+$/i;
console.log('http://www.example.com/work/digital/x'.search(re));
console.log('http://www.example.com/work/digital/'.search(re)); 
```

# scala - scala - 惰性文件/ url 迭代器

> ID：12786973
> 
> 赞同：1
> 
> 时间：2012-10-08T17:56:10.010
> 
> 标签：scala, io, iterator

据我所知，scala 中的文件/url 的迭代器是惰性的，即

```
scala.io.Source.fromFile("c:/tmp.csv") getLines() 
```

应该返回一个`Iterator[String]`尚未读入的文件，并且只是指向该文件的第一行。然而，如果我调试这段代码，在下一行停止，去物理改变硬盘上的文件，这个迭代器返回的值对应于更新之前的文件。为什么会这样？

这就是我对 Java 迭代器的期望，它将整个文件预取到内存中

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-08T18:49:50.183

显然，对文件的读取是缓冲的（为了提高性能，因为磁盘访问很慢）。因此，当您开始从文件中读取时，它的某些部分会立即读入缓冲区（例如，4kb），因此当您编辑已读取的部分时，它不会在您的程序中更改。

我尝试使用 7Mb 文件执行此操作 - 我打开了文件，编辑了最后一行，并且编辑正确地反映在代码中。相反，当我对 4Kb 文件执行相同的技巧时，我得到了您描述的行为。

编辑：我怀疑实际的缓冲发生在[这些行](https://github.com/scala/scala/blob/v2.9.2/src/library/scala/io/BufferedSource.scala#L51)周围的某个地方（我喜欢那里的评论:)）。

EDIT2：实际上，我觉得您发现了一些有趣的错误-因为我现在正在查看源代码半小时，但我仍然看不到在调用`getLines`.

# c# - DrawString EllipsisCharacter 在测试程序中的行为与生产库中的行为不同吗？

> ID：12786975
> 
> 赞同：2
> 
> 时间：2012-10-08T17:56:14.590
> 
> 标签：c#, asp.net, gdi+, drawstring

我正在使用以下代码在测试程序中绘制位图。省略号按预期工作。我将代码移动到在我们的网络服务器上调用的 .dll 中，省略号行为更改为没有“...”并在单词边界处进行修剪：

文本是“这是一个长标题”。在测试程序中，我得到“this is a lo...”，但在生产中，我得到“this is a”。

```
StringFormat format = new StringFormat();
format.Trimming = StringTrimming.EllipsisCharacter;
format.LineAlignment = StringAlignment.Near;
format.Alignment = StringAlignment.Near;

g.DrawString(Title, TitleFont, TitleColorBrush, TitleRectF, format); 
```

两组代码都使用 .NET 4，都具有从该测试程序复制的相同位图初始化代码，其他位图相同。

知道我可以做些什么来使省略号行为起作用吗？我应该在应用程序中“免费”获得的.NET 环境中是否有任何标志，而不是 dll？

# ruby - 如何将 Memcache 服务器指定为 Rack::Session::Memcache？

> ID：12786976
> 
> 赞同：3
> 
> 时间：2012-10-08T17:56:15.720
> 
> 标签：ruby, heroku, memcached, rack, dalli

我正在尝试将我的 Rack 应用程序配置为使用 Memcache 与 Rack::Session::Memcache 进行会话

如何为其提供选项（例如服务器、用户名和密码）？

目前我有

```
use Rack::Session::Memcache 
```

但我得到了错误

> 在“初始化”中：没有内存缓存服务器 (RuntimeError)

Heroku 已将配置放入环境变量中

```
MEMCACHE_PASSWORD:           
MEMCACHE_SERVERS:            
MEMCACHE_USERNAME: 
```

我知道我可以使用 ENV['MEMCACHE_PASSWORD'] 在 Ruby 中获得这些，但我不知道如何将它们提供给 Rack::Session::Memcache

**编辑**：或到 Rack::Session::Dalli 也很棒[https://github.com/mperham/dalli](https://github.com/mperham/dalli)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-08T18:35:27.730

这个配置适用于 Heroku，Dalli 很聪明，知道查看环境变量

```
 require 'dalli'
    require 'rack/session/dalli'
    use Rack::Session::Dalli, :cache => Dalli::Client.new 
```

在[https://github.com/mperham/dalli/commit/4ac5a99阅读源代码后](https://github.com/mperham/dalli/commit/4ac5a99)

# ios - CGAffineTransformRotate 和 M_PI 不一致（Objective-C，iOS）

> ID：12786981
> 
> 赞同：4
> 
> 时间：2012-10-08T17:56:28.957
> 
> 标签：ios, objective-c, rotation, cgaffinetransform

我正在尝试在 Objective-C 中进行简单的旋转，但马上就有几个问题。一件事是我从[CGAffineTransformRotate](http://developer.apple.com/library/mac/documentation/GraphicsImaging/Reference/CGAffineTransform/Reference/reference.html#//apple_ref/c/func/CGAffineTransformRotate)得到的不一致以及在该函数内部使用时 M_PI 是如何不一致的。

假设我这样做，并将其附加到按钮上。当我按下它一次它会逆时针旋转 180 度（很好并且遵循文档）但是当我再次按下它时，它会*顺时针*旋转 180 度，即使该值不是负数。将 M_PI 更改为 -M_PI 执行完全相同的操作，而旋转没有差异：

```
[UIView animateWithDuration:secs delay:0.0 options:option
   animations:^{
      self.transform = CGAffineTransformRotate(self.transform, M_PI);   //Inconsistent
} completion:nil]; 
```

现在假设我将 M_PI 更改为 3.141593，这是我打印时 M_PI 包含的值。现在，当我按下按钮时，它完全可以正常工作。两次，它都会逆时针旋转 180 度。当我将其更改为 -3.141593 时，它也会完全正常工作，顺时针方向：

```
self.transform = CGAffineTransformRotate(self.transform, 3.141593);   //Works 
```

当我更多地玩它时，行为变得更加奇怪。

假设我想旋转 90 度 (pi/2)。M_PI 现在具有与使用值相同的行为，但旋转与应有的相反：

```
//Should be Clockwise but rotates CounterClockwise
self.transform = CGAffineTransformRotate(self.transform, -M_PI/2);  
self.transform = CGAffineTransformRotate(self.transform, -1.5707965); 

//Should be CounterClockwise but rotates Clockwise
self.transform = CGAffineTransformRotate(self.transform, M_PI/2);  
self.transform = CGAffineTransformRotate(self.transform, 1.5707965); 
```

如果我想旋转任何超过 180 度 (PI) 的东西，即使我指定了正旋转或负旋转，行为也只是旋转最短路径。当我旋转 360 度 (2PI) 时，它甚至不旋转。

为什么会发生这些事情，我该怎么做才能使其更加一致？我的第二个问题是如何将事物旋转 270 度和 360 度。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-08T21:14:21.187

问题是使用 animateWithDuration 时无法真正控制旋转方向。它总是走最短的路线。当旋转 180 度时，行为是不确定的，因为理论上最短路线有 2 种可能性。这也解释了为什么不能旋转超过 180 度。如果您想对动画进行更多控制或制作更复杂的动画，请使用 CAKeyframeAnimation。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-10T22:49:39.370

正如phix23所说：总是走最短的路线。因此，您可以通过使用此技巧来避免这种情况，例如顺时针整圈：您必须将圆圈划分为例如 3 个控制点：

```
[UIView animateWithDuration:secs delay:0.0 options:UIViewAnimationOptionCurveLinear
animations:^{
   self.transform = CGAffineTransformRotate(self.transform, M_PI_2/3);   
} completion:(BOOL end)
{
       [UIView [UIView animateWithDuration:secs delay:0.0
                                   options:UIViewAnimationOptionCurveLinear
  animations:^{
      self.transform = CGAffineTransformRotate(self.transform, -M_PI_2/3);
  } completion:(BOOL end)
  {
  }

}

]; 
```

此代码未经测试，因此如果有问题，请尝试使用它。希望这会有所帮助。

# java - 在java中的文本文件中保存外部程序调用的输出

> ID：12786991
> 
> 赞同：0
> 
> 时间：2012-10-08T17:56:54.023
> 
> 标签：java, runtime, exec

我正在使用 Windows！

我想从我的 java 命令行中调用一个名为“saucy.exe”的小型 .exe 应用程序。它需要一个输入文件“input.saucy”。两者都存储在正确的目录中。

当我使用命令时

```
Process p = Runtime.getRuntime().exec("saucy input.saucy"); 
```

一切正常，我在控制台上得到输出。

但是，当我尝试将输出写入文件时

```
Process p = Runtime.getRuntime().exec("saucy input.saucy > output.saucy"); 
```

什么都没发生。

我已经在[http://www.ensta-paristech.fr/~diam/java/online/io/javazine.html](http://www.ensta-paristech.fr/~diam/java/online/io/javazine.html)中找到了建议，并尝试手动标记命令：

```
String[] cmd = {"saucy", "input.saucy > output.saucy"};
Process p = Runtime.getRuntime().exec(cmd); 
```

它仍然无法正常工作。有什么建议吗？我无法选择使用 java 代码将输出写入文件，因为它太慢了。

再说一遍：我使用的是 Windows（我强调这一点是因为我阅读了一些关于 Linux 系统的提示）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-09T10:06:28.993

`>`是一个 shell 命令，但你没有使用它。尝试

```
String[] cmd = { "cmd", "/C", "saucy input.saucy > output.saucy" }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T10:20:34.983

如果您使用的是 Java 7，则可以使用新[`ProcessBuilder.redirectOutput`](http://docs.oracle.com/javase/7/docs/api/java/lang/ProcessBuilder.html#redirectOutput%28java.io.File%29)机制：

```
ProcessBuilder pb = new ProcessBuilder("saucy", "input.saucy");

// send standard output to a file
pb.redirectOutput(new File("output.saucy"));
// merge standard error with standard output
pb.redirectErrorStream(true);

Process p = pb.start(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-08T18:42:50.223

使用`getInputStream()`,`getOutputStream()`和`getErrorStream()`检索输出（或发送输入）。

[http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html](http://docs.oracle.com/javase/1.4.2/docs/api/java/lang/Process.html)

# html - 410 IIS 中的一堆 html 页面

> ID：12786994
> 
> 赞同：1
> 
> 时间：2012-10-08T17:57:01.933
> 
> 标签：html, iis, http-status-code-410

我需要为在 IIS 上运行的站点在一堆 html 页面上执行 410 Gone。是否有一种简单的方法可以一次完成所有操作，例如 htaccess 文件，还是我必须在 IIS 中一次完成一个？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-11-02T10:56:45.280

我这样做：

```
protected void Application_BeginRequest(Object sender, EventArgs e)
{
    if( listOf410urls.Contains(Request.RawUrl) )
    {
         Response.StatusCode = 410; Response.End();
    }
} 
```

然后我在 webconfig system.webServer

```
<httpErrors errorMode="Custom" defaultResponseMode="ExecuteURL">
    <remove statusCode="410" subStatusCode="-1" />
    <error statusCode="410" path="/Error410.aspx" responseMode="ExecuteURL" />
</httpErrors> 
```

这意味着所有返回 410 的页面都将被使用`/Error410.aspx`页面获取到用户和搜索引擎。

在 Error410.aspx 中我还设置`Response.StatusCode = 410;`了否则状态码将为 200 OK。