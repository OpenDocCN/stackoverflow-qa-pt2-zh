# StackOverflow 问答 15360000-15360999

# asp.net-mvc - ASP.MVC web api 路由问题

> ID：15360006
> 
> 赞同：1
> 
> 时间：2013-03-12T11:32:24.970
> 
> 标签：asp.net-mvc, asp.net-web-api, asp.net-mvc-routing

我正在尝试并排使用 Web API 和 Web 应用程序，但 Web API 路由存在一些问题。

这些是路由配置：

```
routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Home", action = "Index", id = UrlParameter.Optional }
        );

// Map this rule first
        config.Routes.MapHttpRoute(
            name: "WithActionApi",
             routeTemplate: "api/{controller}/{action}/"
         );

        //sets up the API route
        config.Routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/"
            //,defaults: new { id = RouteParameter.Optional }
        ); 
```

它适用于 Web 应用程序，适用于仅包含 /api/controller 的 Web api，但如果我调用 /api/controll/action 则无法正常工作

我在用着：

```
[HttpPost]
    [ActionName("ConfirmRequest")]
    public HttpResponseMessage ConfirmRequest(string guid, string type, PartiStatus status = PartiStatus.Yes) 
```

指定动作动词和名称。我尝试了路由调试器（在 web api 中不起作用）和另一个可以（并且崩溃）并且无法使 POST 操作起作用的调试器。

我最终将此操作更改为 GET 并且它工作正常，我猜 GET 参数可以帮助框架解决它。

我仍然不确定如何使其正常工作。（没有个性映射到行动）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-20T00:06:13.690

根据我在 Web API 和路由方面的经验，最好将默认操作放在底部。我还删除了“catch all”，并为基本动词 GET/PUT/POST/DELETE 设置了每个控制器的默认值。

尝试这样的事情

```
 config.Routes.MapHttpRoute(
        name: "WithActionApi",
        routeTemplate: "api/Target/ConfirmRequest/{id}",
        defaults: new { id = RouteParameter.Optional }
     );

    config.Routes.MapHttpRoute(
        name: "Default",
        routeTemplate: "api/{controller}/{action}/{id}",
        defaults: new { id = RouteParameter.Optional }
     ); 
```

您的示例调用看起来像这样

```
POST api/Target/ConfirmRequest?guid={guid}&type={type}&status{status} 
```

在快速测试 REST API 调用时，我与 Fiddler 一起使用了一个方便的小 Chrome 插件，Postman。它使您可以保存 URL 和多个环境以进行快速调试。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T18:35:53.360

确保您实际上是向相关 URL 发出 POST 请求。看起来您的路由是正确的，虽然您已经提到如果您将`[HttpPost]`属性更改为，它会起作用，但`[HttpGet]`您没有提到相应地更改您的请求。

如果您向操作的 URL 发出 GET 请求，`ConfirmRequest`并且其唯一的重载由该`[HttpPost]`属性修饰，则该请求将不会映射到该操作。

大多数浏览器都有一个分析器，可以让您详细检查您的 HTTP 请求（例如[Chrome 的网络面板](https://developers.google.com/chrome-developer-tools/docs/network)）。如果请求不是来自浏览器，您可以尝试像[Fiddler](http://www.fiddler2.com/fiddler2/)这样的独立分析器。

# ruby-on-rails-3 - Rails OAuthException :: 必须使用活动访问令牌来查询有关当前用户的信息

> ID：15360009
> 
> 赞同：0
> 
> 时间：2013-03-12T11:32:28.063
> 
> 标签：ruby-on-rails-3, facebook-oauth, fb-graph

我在我的 rails 应用程序中使用[**fb_graph**](https://github.com/nov/fb_graph)来获取和设置访问令牌（如果它通过 facebook 进行身份验证）。我有一个邀请控制器，用户必须在其中进行身份验证才能邀请朋友。我的代码如下所示：

```
 def facebook
   if params[:code]
     set_oauth_token(params[:code])
   elsif params[:error]
     redirect_to landing_path, :alert => "Access Denied"
     return
   end

   if current_user.oauth_token.nil?
     redirect_to client.authorization_uri(
     :scope => "user_about_me, email, publish_stream, user_location, user_interests, user_birthday, user_likes, user_hometown, offline_access"
      )
   end

 private

 def set_oauth_token(token)
   client.authorization_code = params[:code]
   access_token = client.access_token! :client_auth_body
   user = FbGraph::User.me(access_token).fetch
   current_user.oauth_token = access_token
   current_user.save(:validate => false)
 end

  def client
    FbGraph::Auth.new(ENV["FACEBOOK_KEY"], ENV["FACEBOOK_SECRET"], :redirect_uri =>  invites_facebook_url).client
  end 
```

但我得到了错误：

```
 FbGraph::InvalidRequest at /invites/facebook
 OAuthException :: An active access token must be used to query information about the current user. 
```

错误在以下行：

```
user = FbGraph::User.me(access_token).fetch 
```

我试图寻找解决方案并修改了代码，但仍然无法解决问题。oauth 令牌无效。

请帮我找到解决方案。非常感谢！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-18T11:10:53.720

最后我得到了错误，那就是在回调之后你必须再次点击 facebook 才能获得 oauth 令牌。我已经修改了我的代码并且它有效。

*用户模型*

```
def self.auth(redirect_url)
    FbGraph::Auth.new(ENV["FACEBOOK_KEY"], ENV["FACEBOOK_SECRET"], :redirect_uri =>  redirect_url)
end 
```

*用户控制器*

```
def facebook
  if params[:code]
    set_oauth_token(params[:code])
  elsif params[:error]
    redirect_to landing_path, :alert => "Access Denied"
    return
  end

  if current_user.oauth_token.nil?
    client = User.auth(invites_facebook_url).client
    redirect_to client.authorization_uri(
    :scope => "user_about_me, email, publish_stream, user_location, user_interests, user_birthday, user_likes, user_hometown, offline_access"
    )
 end
end

private

  def set_oauth_token(token)
    client = User.auth(invites_facebook_url).client
    client.authorization_code = params[:code]
    access_token = client.access_token! :client_auth_body
    user = FbGraph::User.me(access_token).fetch
    current_user.oauth_token = access_token
    current_user.save(:validate => false)
  end 
```

# ruby-on-rails - 表单中的复选框

> ID：15360010
> 
> 赞同：0
> 
> 时间：2013-03-12T11:32:37.227
> 
> 标签：ruby-on-rails, views, helper

对不起，愚蠢的问题，但我不明白如何在 Rails 中使用 check_box 助手。我阅读了文档，但不明白如何`form`使用`user[:role]`参数`customer`和`provider`（也许`admin`）创建 ckeckbox

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:46:47.543

check_box helper 的简介见：[check_box_tag](http://api.rubyonrails.org/classes/ActionView/Helpers/FormTagHelper.html#method-i-check_box_tag)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:14:15.453

首先阅读并理解 Ganesh 指出的简短内容。如果用户只能拥有一个角色，则需要单选按钮或选择列表。对于多个角色，您需要一个角色模型和复选框。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T12:52:29.583

有一个例子。它应该适用于具有 :role 属性的脚手架用户模型。

```
<% for role in %w(customer provider admin) %>
  <p>
    <%= check_box_tag "role", role, (params[:role] && params[:role].include?(role)) %>
    <%=h role %>
  </p>
<% end %> 
```

# sql - 此版本的 SQL Server 不支持语句“SELECT INTO” - SQL Azure

> ID：15360012
> 
> 赞同：8
> 
> 时间：2013-03-12T11:32:46.960
> 
> 标签：sql, sql-server, azure-sql-database

我正进入（状态

> SQL Server 中此版本的 SQL Server 不支持语句“SELECT INTO”

对于存储过程中的以下查询

```
DECLARE @sql NVARCHAR(MAX)
,@sqlSelect NVARCHAR(MAX) = ''
,@sqlFrom NVARCHAR(MAX) = ''
,@sqlTempTable NVARCHAR(MAX) = '#itemSearch'
,@sqlInto NVARCHAR(MAX) = ''
,@params NVARCHAR(MAX)

SET @sqlSelect ='SELECT     
,IT.ITEMNR
,IT.USERNR
,IT.ShopNR
,IT.ITEMID'                 

SET @sqlFrom =' FROM        dbo.ITEM AS IT' 
SET @sqlInto = ' INTO ' + @sqlTempTable + ' ';  

IF (@cityId > 0)
    BEGIN
        SET @sqlFrom = @sqlFrom +
            ' INNER JOIN    dbo.CITY AS CI2
                        ON  CI2.CITYID = @cityId'

        SET @sqlSelect = @sqlSelect +
            'CI2.LATITUDE AS CITYLATITUDE
            ,CI2.LONGITUDE AS CITYLONGITUDE'
    END

SELECT @params =N'@cityId int ' 

SET @sql =  @sqlSelect +@sqlInto +@sqlFrom 

EXEC sp_executesql @sql,@params 
```

我有大约 50,000 条记录，所以决定使用临时表。但惊讶地看到这个错误。

我如何在 SQL Azure 中实现相同的目标？

**编辑：**阅读此博客[http://blogs.msdn.com/b/sqlazure/archive/2010/05/04/10007212.aspx](http://blogs.msdn.com/b/sqlazure/archive/2010/05/04/10007212.aspx)建议我们在存储过程中创建一个表来存储数据而不是临时表。并发下安全吗？会影响性能吗？

添加一些取自[http://blog.sqlauthority.com/2011/05/28/sql-server-a-quick-notes-on-sql-azure/的观点](http://blog.sqlauthority.com/2011/05/28/sql-server-a-quick-notes-on-sql-azure/)

*   每个表都必须有聚集索引。不支持没有聚集索引的表。
*   每个连接都可以使用单个数据库。不支持单个事务中的多个数据库。
*   “使用数据库”不能在 Azure 中使用。
*   不支持全局临时表（或临时对象）。
*   由于没有跨数据库连接的概念，所以目前Azure中还没有链接服务器的概念。
*   SQL Azure 是共享环境，因此没有 Windows 登录的概念。
*   始终在需要后删除 TempDB 对象，因为它们会对 TempDB 造成压力。
*   在降压插入期间，使用 batchsize 选项来限制要插入的行数。这将限制事务日志空间的使用。
*   避免不必要地使用分组或阻塞 ORDER 操作，因为它们会导致高端内存使用。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T11:42:54.417

`SELECT INTO`不幸的是，您无法在 SQL Azure 中执行许多事情，这是其中之一。

您要做的是首先创建临时表，然后执行插入。就像是：

```
CREATE TABLE #itemSearch (ITEMNR INT, USERNR INT, IT.ShopNR INT, IT.ITEMID INT)
INSERT INTO #itemSearch
SELECT IT.ITEMNR, IT.USERNR, IT.ShopNR ,IT.ITEMID                  
FROM dbo.ITEM AS IT 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2015-01-14T01:10:09.583

新的[Azure DB 更新预览](http://azure.microsoft.com/en-us/documentation/articles/sql-database-preview-whats-new/)解决了这个问题：

> V12 预览版使您能够创建没有聚集索引的表。此功能特别有助于支持从查询结果创建表的 T-SQL SELECT...INTO 语句。

[http://azure.microsoft.com/en-us/documentation/articles/sql-database-preview-whats-new/](http://azure.microsoft.com/en-us/documentation/articles/sql-database-preview-whats-new/)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T11:39:11.230

`#`使用前缀创建表，例如`create table #itemsearch`然后使用`insert into`. 临时表的范围仅限于会话，因此不会出现并发问题。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2015-08-01T06:40:45.397

好吧，众所周知，SQL Azure 表必须有一个聚集索引，这就是为什么 SELECT INTO 失败将数据从一个表复制到另一个表的原因。如果要迁移，必须先创建一个结构相同的表，然后执行 INSERT INTO 语句。对于后跟 # 的临时表，您不需要创建索引。

[如何创建索引以及如何为临时表执行插入？](http://www.asptricks.net/2015/07/select-into-with-sql-azure.html)

# iphone - xcode：我们应该如何以表格形式显示大量的标签和按钮？

> ID：15360013
> 
> 赞同：1
> 
> 时间：2013-03-12T11:32:50.137
> 
> 标签：iphone, ios, xcode, uiscrollview

实际上，我在视图中显示大约 10-15 行标签和按钮控件时遇到问题。然后我使用 UIScroll 视图来实现这一点，但这破坏了设计的外观。

![在此处输入图像描述](../Images/aaf7e419045e4b197bc7b5c6e2c75f14.png)

如您所见，生成的输出与开发时 Xcode 中的外观不同。

请指导我应该怎么做才能呈现正确的设计？

谢谢阿什什

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:38:41.713

1.  你应该使用 UITableView。
2.  创建自定义 UITableViewCell。
3.  您的每一行将包含一个 UILabel 和 UIButton。
4.  你可以[检查一下](http://howtomakeiphoneapps.com/how-to-design-a-custom-uitableviewcell-from-scratch/1292/)。

见附图：

![在此处输入图像描述](../Images/e6700b1b4695fba71abcb67053a60e72.png)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:37:26.147

创建一个自定义`UITableViewCell`并在您的代码中使用该自定义。

并`cellForRowAtIndexPath`为您的单元格属性分配值。

请参阅此 Apple 示例[代码](http://developer.apple.com/library/ios/#samplecode/iPhoneCoreDataRecipes/Introduction/Intro.html#//apple_ref/doc/uid/DTS40008913)

网上也有很多例子，搜索自定义`UITableViewCell`，你会发现各种各样的教程。

这是另一个第三方教程[链接](http://www.appcoda.com/customize-table-view-cells-for-uitableview/)：

希望这可以帮助。

# sorm - 我可以在 SORM 中为数据库操作添加挂钩吗？

> ID：15360019
> 
> 赞同：1
> 
> 时间：2013-03-12T11:32:58.507
> 
> 标签：sorm

在许多情况下，需要在数据库操作之前和之后应用函数。一个例子是加密。数据需要在 INSERT 和 UPDATE 之前加密。它需要在 SELECT 之后解密。可以用 SORM 添加这样的钩子吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:29:41.017

好吧，理论上你可以通过简单地覆盖它的方法来连接 SORM，如下所示：

```
case class Thing( normalField : String, encryptedField : String )

object Db extends Instance (...) {

  override def save
    [ T <: AnyRef : TypeTag ]
    ( value : T )
    : T with Persisted
    = value match {
        case value : Thing => 
          super.save(value.copy(encryptedField = encrypt(value.encryptedField)))
        case _ => super.save(value)
      }

} 
```

但是 SORM 0.3.* 并不是为这样的自定义而设计的，并且连接到查询功能将需要更多的努力和样板。我很不确定 SORM 是否关心这样的问题，因为你有一个相当令人困惑的案例。

无论如何，您还有其他方法可以在应用程序方面解决您的问题。这是一对直截了当的头脑：

## 1\. 经典的 DAO 方法：

```
object Dao {
  def saveA( a : Thing ) = 
    Db.save(a.copy(encryptedField = encrypt(a.encryptedField)))
  def fetchAByNormalField( a : String ) = 
    Db.query[Thing].whereEqual("normalField", a).fetch()
      .map(a => a.copy(encryptedField = decrypt(a.encryptedField)))
} 
```

这里的缺点是 SORM 的 API 非常简单，以至于在其上创建 DAO 主要只引入了冗余的抽象和样板。

## 2\. 转换器方法：

```
case class Thing( normalField : String, decryptedField : String ){
  def encrypted = EncryptedThing( normalField, encrypt(decryptedField) )
}
case class EncryptedThing( normalField : String, encryptedField : String ){
  def decrypted = Thing( normalField, decrypt(encryptedField) )
} 
```

请注意，您应该使用 SORM 注册 EncyptedThing，而不是 Thing：

```
object Db extends Instance( entities = Set(Entity[EncyptedThing]() ) ) 
```

你可以像这样使用它：

```
val thing = Thing(...)
Db.save(thing.encrypted)

val thing = Db.query[EncryptedThing].fetch().map(_.decrypted) 
```

如果你不小心忘记触发转换，SORM 会冲你咆哮，因为你试图保存一个未注册的类型的值。应该注意的是，吠叫将在运行时进行。

# html - 网站可在 Chrome / Firefox 中运行，但不能在 Internet Explorer 中运行

> ID：15360021
> 
> 赞同：5
> 
> 时间：2013-03-12T11:33:01.847
> 
> 标签：html, css, internet-explorer, google-chrome, firefox

我最近在[www.matmetzner.co.uk](http://www.matmetzner.co.uk)建立了一个新网站，它被设计`Chrome`为我的默认浏览器，在 Firefox 中似乎也可以正常工作，但`IE`只给了我背景图片。我是一名游戏设计师，并且知道一点网页设计，但我肯定不是这方面的专家，正如你可能知道的那样。

任何人都可以在我的源代码中看到可能导致它的任何内容吗？

抱歉，这个问题有点含糊，但因为它都不起作用，所以很难看到中断的点，因此很难知道要尝试修复哪个特定位。

提前致谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T11:55:25.323

首先，我将在下面添加到您的头部 -

```
<meta http-equiv="X-UA-Compatible" content="IE=Edge,chrome=1"> 
```

这可能会解决一些问题。我不打算详细介绍这个元标记的作用。请看[这里](http://www.chromium.org/developers/how-tos/chrome-frame-getting-started)或谷歌它。还可以使用[CSS 重置](http://www.cssreset.com/)将所有浏览器默认设置为标准。

然后解决个体差异并针对 IE 对待它们。还要记住使用[条件样式表](http://css-tricks.com/how-to-create-an-ie-only-stylesheet/)（仅当事情开始变得有点困难时）。最后但并非最不重要的一点是，只要不损害网站的可用性和目的，网站[不需要在所有浏览器中看起来都一样。](http://dowebsitesneedtolookexactlythesameineverybrowser.com/)

希望这可以帮助

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T11:44:40.193

You also don't close your style tag

```
<style type="text/css">
<!--                                      < - BEGIN OF COMMENT
body {
    background-image: url(img/grass.jpg);
    background-repeat: repeat-y;
}

#website {
    position:absolute;
    width:211px;
    height:24;
    z-index:1;
    left: 799px;
    top: 3px;
}
.style1 {color: #FFFFFF}
</style>                                   < - COMMENT NEVER ENDED, SO TAG NOT READ? 
```

From here IE is actually assuming it is still reading your style tags. Even though you are already presenting content.

# javascript - 按提交后jquery添加的内容被清除

> ID：15360022
> 
> 赞同：1
> 
> 时间：2013-03-12T11:33:05.323
> 
> 标签：javascript, jquery

[这](http://jsfiddle.net/hvuSM/)是我目前正在处理的代码。我必须显示用户传递的值。在这里，我只显示一个字符串，稍后我将对其进行修改。当我单击添加按钮时，我的`alertbox`. 这是我在运行小提琴时制作的[小提琴](http://jsfiddle.net/hvuSM/)，我得到的 shell 形式无法验证。可能是我的代码有问题。这是我在警报框中得到的代码。

在控制台中，我收到警告：

*未声明 HTML 文档的字符编码。如果文档包含 US-ASCII 范围之外的字符，则文档将在某些浏览器配置中呈现乱码。页面的字符编码必须在文档或传输协议中声明。*

请帮我整理一下。谢谢

迪比亚

**跟进：**我错过了提及。单击`Ok`按钮后，文本在 div 中消失。这是什么原因造成的？我该如何预防？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:40:34.210

**你错过了使用()**的函数调用，这就是为什么你会显示 val 的 jQuery 函数。

[这个小提琴](http://jsfiddle.net/hvuSM/1/)正在工作，因为我添加`()`了`var x = $('input[name="time"]').val;`代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:40:54.693

它应该是

```
var x = $('input[name="time"]').val(); 
```

`$('input[name="time"]').val`引用`val`函数，`alert(x)`在这种情况下返回`val`.

为了调用该方法`val`并检索您需要使用的返回值`val()`。

演示：[小提琴](http://jsfiddle.net/arunpjohny/hvuSM/4/)

# mamp - Sequel Pro - 套接字连接失败

> ID：15360023
> 
> 赞同：1
> 
> 时间：2013-03-12T11:33:07.290
> 
> 标签：mamp, sequelpro

我在我的 Mac 上使用 Sequel Pro 和 MAMP 在本地开发 wordpress 网站。今天早上，当我尝试启动 Sequel Pro 时，它一直要求我输入密码以进行更改（以前从未这样做过）。我第一次尝试重新启动我的机器，但它一直在询问，所以我输入了密码以允许进行（未知）更改。

大错！

现在，当我尝试通过套接字连接时，我收到错误消息

> 套接字连接失败！
> 
> 无法通过套接字连接，或请求超时。
> 
> 仔细检查套接字路径是否正确，您是否具有必要的权限，以及服务器是否正在运行。
> 
> MySQL 说：Can't connect to local MySQL server through socket '/tmp/mysql.sock' (2)

当我检查 MAMP 时，Apache 服务器灯是红色的，而 MySQL 服务器灯是绿色的。

当谈到像这样的后端东西时，我是一个完全的新手，我浏览了很多答案列表控制台命令，但我以前从未使用过控制台。

我找到了一个在错误中引用的文件 - “mysql.sock”。这位于 Applications > MAMP > tmp > mysql > mysql.sock

但我不确定如何处理这个文件（如果有的话！）。

我还发现了这个错误日志：

> 130312 11:07:29 mysqld_safe 使用 /Applications/MAMP/db/mysql 中的数据库启动 mysqld 守护程序 130312 11:07:29 [警告] 您已通过命令行选项强制 lower_case_table_names 为 0，即使您的文件系统 '/ Applications/MAMP/db/mysql/' 不区分大小写。这意味着 > 您可以通过在不同情况下访问 MyISAM 表来破坏它。您应该考虑将 lower_case_table_names 更改为 1 或 2 130312 11:07:29 [警告] 如果以 root 身份运行，则只能使用 --user 开关
> 
> 130312 11:07:29 [注意] 插件 'FEDERATED' 已禁用。130312 11:07:29 [注意] 插件 'ndbcluster' 已禁用。130312 11:07:29 InnoDB：已启动；日志序列号 0 15469736 130312 11:07:30 [Note] 事件调度程序：加载 0 个事件 130312 11:07:30 [Note] /Applications/MAMP/Library/libexec/mysqld：准备连接。版本：'5.1.37' 套接字：'/Applications/MAMP/tmp/mysql/mysql.sock' 端口：8889 源分布 130312 11:09:37 mysqld_safe mysqld 进程已存在

我只是不知道如何处理任何信息！任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2016-10-15T11:16:41.147

我有同样的问题，只要去和`on`或`start`你的`MAMP`然后`connect` 通过它就可以了`socket`。`Sequel Pro`

# php - 如果数据库字段中的值 = 2，请选中复选框

> ID：15360024
> 
> 赞同：0
> 
> 时间：2013-03-12T11:33:11.147
> 
> 标签：php, mysql, checkbox

我正在尝试创建一个带有 3 个复选框的表单。一种是针对经理完成度、员工完成度和整体完成度（如果两者都已检查，或者值为 2）。

```
echo "<td>"."<input type = 'checkbox' name ='employee' value= 'Ecomplete'/>"."</td>";
echo "<td>"."<input type = 'checkbox' name ='student' value=    'Scomplete'/>"."</td>";
echo "<td>"."<input type = 'checkbox' name ='complete' value= 'complete'/>"."</td>";
            echo "</tr>"; 
```

我想要做的是在数据库中找到数值，如果它是一个，它保持未选中状态，如果它是 2，复选框被选中。

我的第一个虽然是这样的：

```
 if($row['manger_complete'] == 1) { checkbox is checked }   
  (not sure how to check a checkbox in php, i'm fairly new) 
```

我无法理解最好和最简单的方法来做到这一点。

第二个功能是如果员工和经理以及对应的复选框都被选中，则在整体完成字段中输入“2”到数据库中。

我知道这是含糊的，但任何帮助将不胜感激我真的被卡住了！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:34:39.457

这可能会有所帮助：

```
<input type = 'checkbox' name ='employee' value= 'Ecomplete' <?php if($row['manger_complete'] == 1) echo 'checked = "checked"' ?>/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:35:45.793

```
if($row['manger_complete'] == 1) { 
    echo "<td>"."<input type = 'checkbox' checked='checked' name ='complete' value= 'complete'/>"."</td>";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:36:07.603

```
 $checked = '';
 if($row['manger_complete'] == 1) { $checked="checked='checked'"; }   
 echo "<td>"."<input type = 'checkbox' ".$checked." name ='employee' value= 'Ecomplete'/>"."</td>";
 echo "<td>"."<input type = 'checkbox' ".$checked." name ='student' value=    'Scomplete'/>"."</td>";
 echo "<td>"."<input type = 'checkbox' ".$checked." name ='complete' value= 'complete'/>"."</td>";
        echo "</tr>"; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T11:36:40.477

从 PHP 那里得到它：

```
echo "<td>"."<input type = 'checkbox' name ='employee' value= 'Ecomplete' ".($row['manager_complete'] == 1 ? "'checked = "checked"'" : "")." />"."</td>"; 
```

# php - Codeigniter Active Record HAVING / WHERE db.field = db.field

> ID：15360036
> 
> 赞同：5
> 
> 时间：2013-03-12T11:33:57.667
> 
> 标签：php, mysql, codeigniter, activerecord

有人可以告诉我，如果这可能与活动记录 - 以及如何？

```
$this->db->select('*');
$this->db->from('table1');
$this->db->join('table2', 'table1.id = table2.fi_id', 'left');
$this->db->having('table1.second_id','table2.fi_second_id', false);
$query = $this->db->get(); 
```

问题在于，'table2.fi_second_id' 始终被视为**字符串**- 而不是**数据库字段**。也用'where'试过这个 - 这是同样的问题。

谢谢

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T11:52:32.170

我认为您需要以下内容：

```
$this->db->having('table1.second_id = table2.fi_second_id',false); 
```

`false`如果您不需要转义 SQL 查询， 您可能会也可能不会应用该参数。

# ruby-on-rails-3 - 使用 wicked_pdf 从生成的 PDF 生成 ZIP

> ID：15360042
> 
> 赞同：6
> 
> 时间：2013-03-12T11:34:09.600
> 
> 标签：ruby-on-rails-3, heroku, wicked-pdf, rubyzip

在我的发票系统中，我想要一个备份功能来一次将所有发票下载到一个 zip 文件中。该系统在 heroku 上运行 - 所以只能临时保存 pdf。

我已经安装了 ruby​​zip 和 wicked_pdf gem。

我在控制器中的当前代码：

```
 def zip_all_bills
    @bill = Bill.all
    if @bill.count > 0
      t = Tempfile.new("bill_tmp_#{Time.now}")
      Zip::ZipOutputStream.open(t.path) do |z|
        @bill.each do |bill|
          @bills = bill
          @customer = @bills.customer
          @customer_name = @customer.name_company_id
          t = WickedPdf.new.pdf_from_string(
              render :template => '/bills/printing.html.erb',
                     :disposition => "attachment",
                     :margin => { :bottom => 23 },
                     :footer => { :html => { :template => 'pdf/footer.pdf.erb' } }
          )

          z.puts("invoice_#{bill.id}")
          z.print IO.read(t.path)
        end
      end

      send_file t.path, :type => "application/zip",
                        :disposition => "attachment",
                        :filename => "bills_backup"

      t.close
    end

    respond_to do |format|
      format.html { redirect_to bills_url }
    end
  end 
```

**这以 BillsController#zip_all_bills 关闭流中**的消息 IOError 结束

 *** * *

## 回答 #1

> 赞同：5
> 
> 时间：2014-11-19T01:54:32.307

我认为您的代码中的问题是您的 zip 有 t ，但您也将它用于单个 pdf。因此，我认为当您尝试将 tempfile 用于 pdf 时，这是一个问题，因为您已经将它用于 zip。

但我认为您根本不需要使用临时文件（而且我实际上从未在 Heroku 上获得临时文件解决方案）

这是一个适用于我的控制器方法——也在 heroku 上使用 wickedpdf 和 ruby​​zip。请注意，我没有使用 Tempfile，而是使用 StringIO 做所有事情（至少我认为这是底层技术）。

```
def dec_zip
  require 'zip'
  #grab some test records
  @coverages = Coverage.all.limit(10)
  stringio = Zip::OutputStream.write_buffer do |zio|
      @coverages.each do |coverage|
        #create and add a text file for this record
        zio.put_next_entry("#{coverage.id}_test.txt")
        zio.write "Hello #{coverage.agency_name}!"
        #create and add a pdf file for this record
        dec_pdf = render_to_string :pdf => "#{coverage.id}_dec.pdf", :template => 'coverages/dec_page', :locals => {coverage: coverage}, :layout => 'print'
        zio.put_next_entry("#{coverage.id}_dec.pdf")
        zio << dec_pdf
      end
    end
    # This is needed because we are at the end of the stream and 
    # will send zero bytes otherwise
    stringio.rewind
    #just using variable assignment for clarity here
    binary_data = stringio.sysread
    send_data(binary_data, :type => 'application/zip', :filename => "test_dec_page.zip")
end 
```**

# android - Android中的地图问题

> ID：15360043
> 
> 赞同：0
> 
> 时间：2013-03-12T11:34:09.707
> 
> 标签：android, map, android-mapview, android-maps-v2

我是android编程的新手，在显示地图时遇到了问题，无法获取被触摸的位置，谁能帮忙。在这里请我下面的代码。先感谢您。注意：我从[这个站点](http://mobiforge.com/developing/story/using-google-maps-android?page=1)获取代码，我使用显示地图并且它正在工作但是当我尝试使用站点中的最后一个代码来显示触摸位置时，它不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T20:48:55.433

在看到您为代码参考提供的链接之后。我看到您正在使用旧的过时的 Android API V1 进行开发，现在无法使用新的 Maps API V2 for android 现在适用。

*   [在 Android 开发者网站上](https://developers.google.com/maps/documentation/android/)找到更多关于新 API的信息。

    该 API 现在作为 Google Play 服务 SDK 的一部分分发，您可以使用 Android SDK 管理器下载它。地图现在封装在 MapFragment 类中，它是 Android 的 Fragment 类的扩展。

    现在您可以将地图添加为更大活动的一部分。使用 MapFragment 对象，您可以在较小的屏幕（例如手机）上单独显示地图，或者在较大屏幕的设备（例如平板电脑）上作为更复杂 UI 的一部分。

    因为地图封装在 MapFragment 类中，所以可以通过扩展 Android 标准 Activity 类来实现，而不是扩展版本 1 中使用的 MapActivity。

    Maps API 现在使用矢量切片。它们的数据表示更小，因此地图在您的应用程序中出现的速度更快，并且使用的带宽更少。

    缓存得到了改进，因此用户通常会看到没有空白区域的地图。地图现在是 3D 的。通过移动用户的视点，您可以显示具有透视图的地图。

请参阅我的博客文章，我试图总结使用适用于 Android 的 Google Maps API V2 构建应用程序所需的一切。

1.  [Maps API V2 问题的解决方案（使用 google_play_services_lib）。](https://developers.google.com/maps/documentation/android/)
2.  [使用 Maps API V2 for minSDK=8 (Android 2.2 Froyo) 创建一个 Android 应用程序。](http://mzubair.com/creating-an-android-app-with-maps-api-v2/)
3.  [使用 Maps API V2 for minSDK=11 (Android 3.0 HoneyComb) 创建一个 Android 应用程序。](http://mzubair.com/creating-an-android-app-with-maps-api-v2-for-minsdk11-android-23-0-honeycomb/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-02-20T02:53:24.680

我已经玩过 Google Maps Android Library V2 了。
这是我做的一个例子，看看它是否可以帮助你。我去掉了我自己的 API 密钥，但我已经包含了许多不同的部分，包括需要设置：

[http://www.digitalopium.com/android-google-maps-api-tutorial/](http://www.digitalopium.com/android-google-maps-api-tutorial/)

-调试/零售证书和 SHA-1 密钥 -Google 项目和 Android Map API 密钥 -通过 Android SDK 提供的 Google Play 服务 -包括清单文件和代码片段的项目设置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-10-04T11:43:49.417

本教程有一个关于从触摸位置获取位置的部分。希望它会帮助你。[谷歌地图 Android v2 教程](http://thuongnh.com/google-maps-android-v2-tutorial/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-11T15:30:40.123

谷歌改变了获取地图密钥的方法，以前是使用MD5指纹现在你可以点击链接集成地图

[在安卓应用程序中集成谷歌地图](http://androidgeekworks.blogspot.com/2013/07/integrating-google-maps-in-android.html)

# javascript - 如何使用 DOJO 添加具有特殊字符的属性

> ID：15360046
> 
> 赞同：0
> 
> 时间：2013-03-12T11:34:21.763
> 
> 标签：javascript, dojo

由于中间的特殊字符，尝试添加属性 aria-live 时出错。

我怎样才能解决这个问题？

```
dojo.ready(function(){

    dojo.connect(dojo.query("#buttonTest")[0],"onclick",function(evt){

        var fnameBox = dojo.byId("UPDATE_First_name_id").value;
        var lnameBox = dojo.byId("UPDATE_Last_name_id").value;

        if(fnameBox == ""){
            if(!dojo.byId("error_fname")){
                var xys1 =dojo.create("a",{title:"Error link", id:"error_fname", href: "#", class:"ibm-error-link", innerHTML:"&nbsp;"});              
                dojo.query("#UPDATE_First_name_id").after(xys1);

                var span1=dojo.create("span",{class:"ibm-access", aria-live:"assertive", role:"alert"});
                dojo.query("#error_fname").after(span1);
            }
        }
        else{
           dojo.destroy("error_fname");
        } 
```

提前感谢您的帮助。

泽山

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:58:23.547

将属性名称放在引号内。您还需要对`class`属性执行此操作，因为 class 是保留字。

```
var xys1 =dojo.create("a", {  
     title:"Error link", 
     id:"error_fname", 
     href: "#", 
     "class": "ibm-error-link", 
     innerHTML:"&nbsp;"
});              

var span1=dojo.create("span",{
     "class":"ibm-access", 
     "aria-live":"assertive", 
     role:"alert"
}); 
```

# iphone - 表格单元格中的许多行

> ID：15360049
> 
> 赞同：0
> 
> 时间：2013-03-12T11:34:32.437
> 
> 标签：iphone, ios, objective-c

我正在尝试从数据库中获取评论列表。评论甚至可能长达 100 行。问题是我不能让它断线。我用过

```
comment.adjustFontSizeToFitWidth = NO;
comment.numberOfLines = 0;
comment.lineBreakMode = UILineBreakModeCharacterWrap 
```

目前测试评论是：

> 呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜呜

但它在中间结束，没有“...”，也没有文字换行。如何解决这个问题？

顺便提一句。有很多这样的细胞。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:37:09.080

```
#define FONT_SIZE 11.0f
#define CELL_CONTENT_WIDTH 157.0f
#define CELL_CONTENT_MARGIN 10.0f

- (CGFloat)tableView:(UITableView *)tableView heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
        NSString *text = YorCommentString;// or any String that u want.
        CGSize constraint = CGSizeMake(CELL_CONTENT_WIDTH - (CELL_CONTENT_MARGIN * 2), 20000.0f);
        CGSize size = [text sizeWithFont:[UIFont systemFontOfSize:FONT_SIZE] constrainedToSize:constraint lineBreakMode:UILineBreakModeWordWrap];
        CGFloat height = MAX(size.height, 44.0f); // set as u want 
        return height + (CELL_CONTENT_MARGIN * 2); // set as u want

} 
```

在上面的代码中不需要`numberOfLines`设置`UILabel`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:56:45.167

您将不得不实施有关详细信息，`tableView:heightForRowAtIndexPath:` 请参阅[http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html)。

在该方法中，您必须根据标签显示文本所需的高度来计算每个单元格所需的高度。在 NSString 的 UIExtenstions 中，您将找到用于该计算的辅助方法。[http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/NSString_UIKit_Additions/Reference/Reference.html)

所以充满了关于如何使用的例子 - `sizeWithFont:constrainedToSize:lineBreakMode:`。

然后，您可以在 cellForRowAtIndexPath 中布置单元格项目，您需要在其中`sizeWithFont:...`再次用于计算文本大小。或者，如果你想要一个简洁的解决方案，更好的子类`UITableViewCell`并覆盖它的`layoutSubviews`方法并在那里进行布局。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:51:01.487

在您的 tableview 委托中执行此操作：

```
- (CGFloat)tableView:(UITableView *)tableView1 heightForRowAtIndexPath:(NSIndexPath *)indexPath
{
        CGSize maximumSize = CGSizeMake(480.0,1000.0); // Put appropriate required height and width.
        NSString *dateString = [NSString stringWithFormat:@"%@",yourString];
        UIFont *dateFont = [UIFont fontWithName:@"Helvetica" size:14];
        CGSize dateStringSize = [dateString sizeWithFont:dateFont 
                                       constrainedToSize:maximumSize 
                                           lineBreakMode:UILineBreakModeWordWrap];
        return dateStringSize.height;
} 
```

此代码将为您的单元格设置适当的高度。然后在你的 cellForRowAtIndexPath 函数中。保留此代码：

```
comment.adjustFontSizeToFitWidth = NO;
comment.numberOfLines = 0;
comment.lineBreakMode = UILineBreakModeCharacterWrap 
```

# python - Tkinter - 我如何打开一个窗口？

> ID：15360056
> 
> 赞同：-1
> 
> 时间：2013-03-12T11:34:56.387
> 
> 标签：python, user-interface, tkinter

假设我有 2 个显示不同表单的文件，一个登录和一个主菜单。单击登录后如何打开我的主菜单表单（假设信息正确）？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:32:30.793

当 Tkinter 启动时，您会自动获得一个窗口。此窗口称为*根*窗口或*主*窗口，只要应用程序正在运行，它就必须存在（尽管它可以隐藏）。

要创建其他窗口，您需要创建类[Toplevel](http://effbot.org/tkinterbook/toplevel.htm)的实例。

如果您尝试模拟所有内容都在一个窗口中的 Web GUI，您可以选择不同的策略。例如，您的登录表单和主表单都可以在[Frame](http://effbot.org/tkinterbook/frame.htm)的各个实例中实现。然后，在用户登录后，您可以从根窗口中删除登录表单并将其替换为您的其他表单。

# wpf - 提高 WPF DataGrid 的滚动性能

> ID：15360068
> 
> 赞同：1
> 
> 时间：2013-03-12T11:35:30.150
> 
> 标签：wpf, performance, datagrid

这是一个简单的`DataGrid`基准：

```
open System.Windows

let mutable i = 0
let timer = System.Diagnostics.Stopwatch.StartNew()

[<System.STAThreadAttribute>]
do
  let grid = Controls.DataGrid()
  grid.AutoGenerateColumns <- false
  for i in 1..50 do
    let c = Controls.DataGridTextColumn()
    c.Binding <- Data.Binding()
    c.Header <- string i
    grid.Columns.Add c
  grid.ItemsSource <- Array.init 1000 string
  let window = Window(Content=grid)
  window.WindowState <- WindowState.Maximized
  Media.CompositionTarget.Rendering.Add(fun _ ->
    i <- i + 38
    grid.ScrollIntoView grid.Items.[i % 1000]
    window.Title <- sprintf "%gfps" (float i / timer.Elapsed.TotalSeconds / 38.0)
    if i > 10000 then
      i <- 1
      timer.Restart())
  Application().Run window
  |> ignore 
```

我从中获得了糟糕的性能（在 4x 3.4GHz Intel Core i7 上为 6 帧/秒）。如何优化？

我在网上找到了一些建议，但没有一个有任何显着差异：

```
 grid.EnableColumnVirtualization <- true
  grid.EnableRowVirtualization <- true
  grid.ColumnWidth <- Controls.DataGridLength 27.0
  grid.RowHeight <- 18.0
  ...
    if i=0 then
      let border = Media.VisualTreeHelper.GetChild(grid, 0) :?> Controls.Border
      let scroll = border.Child :?> Controls.ScrollViewer
      scroll.IsDeferredScrollingEnabled <- true 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-11-21T19:52:06.817

~~我确定您已经考虑过这一点，但是您确定您没有使用调试器，因为关闭它可以显着提高性能~~

## 编辑

好的，您为什么不尝试使用调度计时器。这可以在单独的线程上运行，因此理论上可以提高性能

# jpa - 持久化后 JPA 容器托管实体更新

> ID：15360070
> 
> 赞同：1
> 
> 时间：2013-03-12T11:35:45.620
> 
> 标签：jpa

您好，我在 JPA 中自动生成实体的主键时遇到问题。我正在保留实体并尝试从中获取 id 值，但即使我正在刷新它也会返回 null 。我正在使用最新的 glassfish、JPA、netbeans、EJB 3

```
public class CatchesEntity implements Serializable {
    private static final long serialVersionUID = 1L;
    @Id
    @GeneratedValue(strategy = GenerationType.AUTO)
    private Long id;
    (...)

    @PersistenceContext(unitName = "DBF")
    private EntityManager em;

    (...)
    public void randomMethod()
    {
         CatchesEntity catchEntity = new CatchesEntity();
         em.persist(catchEntity);
         em.flush();
         System.out.println("CATCH ID: "+catchEntity.getId()); 
```

我得到 NULL

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:03:02.623

Calling `flush()` will send most instructions to the DB, but not the `INSERT`commands that are generated on `commit()`. See [this question](https://stackoverflow.com/questions/4275111/correct-use-of-flush-in-jpa-hibernate) for more info.

You seem to be working with container-managed transactions, so in general the commit will be performed when the method returns.

If you want to force a commit inside a method, you can disable CMT either on the bean or on the one method and use a `UserTransaction`:

```
tx.begin();
...
em.persist();
tx.commit(); 
```

# java - 发现错误：INT_VACUOUS_BIT_OPERATION

> ID：15360073
> 
> 赞同：1
> 
> 时间：2013-03-12T11:35:48.163
> 
> 标签：java, bit-manipulation, findbugs

为了从 int 转换为 IP String，我使用[从 127.0.0.1 到 2130706433 的方法，然后再返回](https://stackoverflow.com/questions/2241229/going-from-127-0-0-1-to-2130706433-and-back-again)

```
private static final byte BYTE_MASK = (byte)0xff;

protected byte[] unpack(int bytes) {
    return new byte[] {
        (byte)((bytes >>> 24) & BYTE_MASK),
        (byte)((bytes >>> 16) & BYTE_MASK),
        (byte)((bytes >>>  8) & BYTE_MASK),
        (byte)((bytes       ) & BYTE_MASK)
   };
} 
```

但`FindBugs`在`Eclipse`产生错误：`INT_VACUOUS_BIT_OPERATION`.

> INT_VACUOUS_BIT_OPERATION：不做任何有意义工作的位操作。

**为什么会这样以及如何解决？**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:38:44.837

我怀疑这是因为你不需要`& BYTE_MASK`if 你*也*投射到`byte`. 我假设那`BYTE_MASK`是 0xff ......在这种情况下，它基本上是没有意义的。只是铸造将具有相同的效果。

从[JLS 的第 5.1.3 节](http://docs.oracle.com/javase/specs/jls/se7/html/jls-5.html#jls-5.1.3)：

> 有符号整数到整数类型 T 的窄化转换只会丢弃除 n 个最低位之外的所有位，其中 n 是用于表示类型 T 的位数。此外，可能会丢失有关数值大小的信息，这可能会导致结果值的符号与输入值的符号不同。

# java - Netty中基于连接的UDP协议

> ID：15360077
> 
> 赞同：1
> 
> 时间：2013-03-12T11:36:01.137
> 
> 标签：java, udp, netty

我需要为现有协议创建一个客户端。我相信 Netty 会让这变得相对简单，但可以做一些入门帮助。

该协议使用基于连接的方法，但在 UDP 之上分层，实际消息位于传输信封内，无序/慢/丢失数据包、会话编号等都是客户端的工作。

在netty中创建管道和帧解码器等以实现这一目标的最佳方法是什么。我以前只以非常基本的方式使用过netty - 所以任何建议都会非常受欢迎。

谢谢！

詹姆士

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T14:48:10.333

听起来很痛苦。我是一个普通的netty用户，但我不会在Netty中实现这样的协议（不是反对netty，但它在其他地方实现），至少，你描述它的方式。在你走这条路之前，我会看一下[JGroups](http://jgroups.org/)，它实现了一个“可靠的 UDP”堆栈，它具有你概述的所有传输功能。

我的第一次尝试（如果我在荒岛上）会是这样的：

**下游**

```
sendMessage
  --> MessageSplitHandler
    --> MessageFragmentBufferHandler
RetransmitRequester --> 
```

在哪里：

*   MessageSplitHandler 将发送的消息分解为 UDP 友好大小的 MessageFragments（数据报）（如果原始消息足够小，可能会有一个）。对于从父消息创建的每个 MessageFragment，分配每个：
    *   父消息的唯一 ID。
    *   序号
    *   从原始创建的片段总数
*   MessageFragmentBufferHandler 存储每个 MessageFragment，直到远程端确认已收到消息（或者您选择超时消息重组并丢弃未确认的消息）。否则，请保留它们以防远程请求 MessageFragment 重新传输（可能通过 parent-message-id 和片段序列。

**上游的**

这将或多或少与下游相反。

```
 MessageFragmentDecoder <--
  MessageFragmentBuffer <--
 MessageReAssember <--
onMessage 
```

*   MessageFragmentDecoder：将数据报解码为MessageFragment。
*   MessageFragmentBuffer：存储 MessageFragment 数组，直到收到所有序列。如果消息被乱序接收，假设中间丢失并要求发送者再次发送它（通过唯一ID/序列）
*   MessageReAssember：当所有的MessageFragment都接收完毕后，这家伙重新组装原始消息，并传递给消息接收者。

我认为这是一般的想法，但那里可能有 200-300 个角落案例......

# ios - 在 NSMutableAttributedString 上模拟“initWithAttributedString”的 OCMock 失败

> ID：15360082
> 
> 赞同：1
> 
> 时间：2013-03-12T11:36:09.520
> 
> 标签：ios, ocmock, gh-unit

我试图了解什么是可模拟的，什么不是。

在使用 NSMutableAttributedString 的实验中，我似乎无法模拟`initWithAttributedString`.

```
- (void)test_mutableString_shouldWorkAsAMutableString {
    NSMutableAttributedString *_mutable = [OCMockObject mockForClass:NSMutableAttributedString.class];
    NSAttributedString *_string = [OCMockObject mockForClass:NSAttributedString.class];
    [[[(id)_mutable expect] andReturnValue:nil] initWithAttributedString:_string];
    [_mutable initWithAttributedString:_string];
} 
```

此代码不会运行；由于某种原因，可变屏幕的代理无法识别`initWithAttributedString`选择器：

```
2013-03-12 11:25:30.725 UnitTests[11316:c07] TestItClass/test_4_mutableString_shouldWorkAsAMutableString ✘ 0.00s

    Name: NSInvalidArgumentException
    File: Unknown
    Line: Unknown
    Reason: *** -[NSProxy doesNotRecognizeSelector:initWithAttributedString:] called!

    0   CoreFoundation                      0x01c0602e __exceptionPreprocess + 206
    1   libobjc.A.dylib                     0x01948e7e objc_exception_throw + 44
    2   CoreFoundation                      0x01c05deb +[NSException raise:format:] + 139
    3   Foundation                          0x00862bcd -[NSProxy doesNotRecognizeSelector:] + 75
    4   CoreFoundation                      0x01bf5bbc ___forwarding___ + 588
    5   CoreFoundation                      0x01bf594e _CF_forwarding_prep_0 + 14
    6   UnitTests                           0x00349e0b -[TestItClass test_4_mutableString_shouldWorkAsAMutableString] + 283 
```

我试图了解如何可靠地使用 OCMock，但这让我感到困惑，我不确定哪些 OCMock 调用可以工作，哪些不应该工作。

我非常感谢对此进行澄清，并提示为什么上述方法不起作用。

谢谢，乔

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-19T18:32:35.717

我[学到了一些关于 Objective-C 的东西，](https://stackoverflow.com/questions/16110283/why-cant-i-get-my-category-instance-method-even-after-calling-it)试图弄清楚这一点。

您的基本问题是通过分配 NSMutableAttributedString 创建的对象的类不是 NSMutableAttributedString （始终警惕免费桥接类）。要使您的代码正常工作，请尝试以下操作：

```
NSMutableAttributedString *realMutable = [[NSMutableAttributedString alloc] init];
id mutable = [OCMockObject niceMockForClass:[realMutable class]];
id string = [OCMockObject niceMockForClass:[NSAttributedString class]];

[[[mutable expect] andReturn:@"YO" ] initWithAttributedString:string];
NSLog(@"MOCK: %@", [mutable initWithAttributedString:string]);

[mutable verify];

// Outputs 'MOCK: YO' and passes 
```

# jquery - gmap3 标记 getPosition() 不起作用

> ID：15360086
> 
> 赞同：1
> 
> 时间：2013-03-12T11:36:32.750
> 
> 标签：jquery, google-maps, google-maps-api-3, jquery-gmap3

我正在为 jquery 使用 gmap3 插件并使用“get”来获取特定的标记，我确实得到了正确的标记，因为我可以访问`marker.data`我在初始化地图时定义的我，但是我如何获得标记的位置让地图缩放到回调函数内的这个位置

```
$('#map').gmap3({
    get: {
        name:"marker",
        tag:"${i}",
        full:true,
        callback: function(marker){
            var center = marker.getPosition();
            $('#getdistance').gmap3({
                map:{
                    center:center,
                    options:{
                        zoom:17,
                        mapTypeControl: true,
                        mapTypeControlOptions: {
                            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
                        },
                        navigationControl: true,
                        scrollwheel: true,
                        streetViewControl: true
                    }
                }
            });    
        }
    }
}); 
```

尝试这样做会引发错误：

```
 marker.getPosition is not a function 
```

所以有人有想法吗？

提前感谢您的***任何***提示

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:42:39.777

试试这个：

```
$('#map').gmap3({
    marker: {// change get to marker
        name:"marker",
        tag:"${i}",
        full:true,
        callback: function(marker){
            var center = marker.getPosition();
            $('#getdistance').gmap3({
                map:{
                    center:center,
                    options:{
                        zoom:17,
                        mapTypeControl: true,
                        mapTypeControlOptions: {
                            style: google.maps.MapTypeControlStyle.DROPDOWN_MENU
                        },
                        navigationControl: true,
                        scrollwheel: true,
                        streetViewControl: true
                    }
                }
            });    
        }
    }
}); 
```

在这里测试[http://gmap3.net/en/catalog/14-services/getaddress-49](http://gmap3.net/en/catalog/14-services/getaddress-49)

# iphone - KalViewController 视图为黑色

> ID：15360087
> 
> 赞同：4
> 
> 时间：2013-03-12T11:36:37.410
> 
> 标签：iphone, ios, objective-c, xcode, app-store

我在我的应用程序中使用 Kal 库作为日历视图，但它显示为黑色，但是当我在另一个应用程序中添加相同的库时，例如新的 SingleViewApp 它工作正常并显示正常的日历

我的代码是

```
kal = [[KalViewController alloc] init];
kal.title = @"NativeCal";

kal.navigationItem.rightBarButtonItem = [[[UIBarButtonItem alloc] initWithTitle:@"Today" style:UIBarButtonItemStyleBordered target:self action:@selector(showAndSelectToday)] autorelease];

kal.delegate = self;
dataSource = [[EventKitDataSource alloc] init];
kal.dataSource = dataSource;

// Setup the navigation stack and display it.
navController = [[UINavigationController alloc] initWithRootViewController:kal];

UITabBarController *tabBar  = [[UITabBarController alloc]init];
tabBar.viewControllers = [NSArray arrayWithObject:navController];

self.window = [[[UIWindow alloc] initWithFrame:[[UIScreen mainScreen] bounds]] autorelease];
self.window.rootViewController = tabBar;
[self.window makeKeyAndVisible]; 
```

它给了我这个

![在此处输入图像描述](../Images/db18c8f6cc6422b9672f5d7770d6881e.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:05:06.797

问题是您忘记`Kal.bundle`在项目资源中包含包含 Kal 的所有资源的文件。只需将包拖到您的 Xcode 项目中即可。

# php - 将数据库中的数据显示到组合框中

> ID：15360089
> 
> 赞同：0
> 
> 时间：2013-03-12T11:36:43.170
> 
> 标签：php, mysql, web

我有一个网站，我试图将存储在 mysql 中的数据库中的数据显示到组合框中。基本上它是一个位置数据库，所以我想显示一个区域，然后根据选择，我希望下一个组合框显示该位置的商店。我为此使用php。我对php不太熟悉。我找到了大量的教程和示例，但我似乎仍然没有正确地调整代码以使其正常工作。另外我不确定我是否需要一个带有连接详细信息的单独的 php 文件，或者我是否可以将它们全部放在一个文件中。我什至不能在一分钟内填充一个组合框，所以我真的想回到基础。

无论如何，这是到目前为止的代码（显然我有 html 标签等）：

```
<form name="form1" method="POST" action="db.php"> 
<p>  
<select name="users" onchange="showUser(this.value)">
<option selected="selected">Select county</option> 
<p><input type="submit" name="Search" value="Search"> 
</form> 
```

然后我有一个 db.php 文件，它存储我的数据库详细信息和 sql 查询

```
<?php
resource mysql_connect ( [string server [, string username [, string password [, bool     new_link [, int client_flags]]]]])

$host = "localhost"; 
$user = ""; 
$pass = "";

bool mysql_select_db ( string database_name [, resource link_identifier])

$dbname = "databseLocations"; 
mysql_select_db($dbname);

$sql = "select * from locations where county=" . $_POST['county'] . " and name='" .     $_POST['county'] . "'"; 
echo $sql;

resource mysql_query ( string query [, resource link_identifier])

$query = mysql_query($sql);

while ($row = mysql_fetch_array($query)) { 
echo "<p>",$row['id'],": ",$row['county']; 
}
?> 
```

我也需要根据选择将这些数据显示在地图上，但我稍后会担心。

谢谢你的帮助

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:47:14.590

假设以下查询：

```
$sql = "select * from locations where county=" . $_POST['county'] . " and name='" .     $_POST['county'] . "'"; 
$query = mysql_query($sql);

echo '<select name="country" size="1">'
while ($row = mysql_fetch_array($query)) { 
echo '<option value="' . $row['id'] . '">' . $row['county'] . '</option>';
}
echo '</select>'; 
```

**注意：`mysql_*`已弃用。**

# magento - Magento - 如何只允许篮子中的一种免费产品

> ID：15360091
> 
> 赞同：0
> 
> 时间：2013-03-12T11:36:54.613
> 
> 标签：magento, cart, rule

我工作的那家商店卖桌子。我们也卖钢笔。

如果你买书桌，我想免费送你一支笔。您添加到购物篮中的任何其他笔都需要付费。

目前，我有一个购物篮价格规则，内容如下：

```
CONDITIONS:
If an item is found in the cart with All of these conditions true:
Category is 3 (desk category)

Apply percent of product price discount: 100%

ACTIONS:
If All of these conditions are true:
SKU is one of pen1, pen2, pen3, etc... 
```

不过，我只想要篮子里的一件免费物品。我已经尝试了几乎所有我能想到的条件组合，但简单的事实是 Magento 没有 XOR 或“仅运行此操作一次”条件。

我什至尝试设置三个相同的价格规则，每支笔一个，“停止进一步的规则处理”设置为“是”。每个规则仍然依次处理。

我最接近的是添加一个条件说

```
If total quantity  is  1  for a subselection of items in cart matching ANY  of these conditions:
SKU is one of pen1, pen2, pen3 
```

这种情况允许篮子里有一支免费的笔，但如果将第二支笔添加到篮子中，则完全取消折扣。

你能改进这条规则吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-02T14:35:34.977

这并不完美，但我有一些适合我的东西。

我正在为每支免费笔添加一条规则。每条规则都有一个排除条款，上面写着

```
If an item is NOT FOUND  in the cart with ANY  of these conditions true:
SKU is one of: pen1, pen2, pen3 
```

这需要一些时间，而且对于任何真正复杂的促销活动来说都太复杂了，但它适用于简短的促销活动。经过大量研究，老实说，我认为这是在 Magento 中执行此操作的最佳方式。

# javascript - 包含异步 javascript 文件有什么区别？

> ID：15360093
> 
> 赞同：2
> 
> 时间：2013-03-12T11:36:59.437
> 
> 标签：javascript, html, dom, asynchronous

例如，google+ 给出了以下代码：

```
<!-- Place this tag after the last +1 button tag. -->
<script type="text/javascript">
  (function() {
    var po = document.createElement('script'); po.type = 'text/javascript'; po.async = true;
    po.src = 'https://apis.google.com/js/plusone.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(po, s);
  })();
</script> 
```

但为什么不只是这样：

```
<script async src="https://apis.google.com/js/plusone.js"></script> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:39:25.263

[`async``defer`](http://www.w3.org/TR/html5/scripting-1.html#attr-script-async)并非所有浏览器都[支持](http://caniuse.com/#feat=script-async)[它的表亲。](http://www.w3.org/TR/html5/scripting-1.html#attr-script-async)（例如，IE 直到 IE10 才获得它们。）第一种方法将始终是异步的，第二种方法不会在不支持`async`.

第一个总是异步的原因是`script`动态添加到 DOM 的元素不会阻止文档的解析和呈现，而`<script>`HTML 内容中的内联标签*会*（除非使用 - 和支持 - `async`or `defer`） .

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:42:15.127

有很好的解释：[哪些浏览器支持<script async="async" />？](https://stackoverflow.com/questions/1834077/which-browsers-support-script-async-async)

是的，现在大多数浏览器都支持异步，但通常你需要 100% 保证你的代码可以工作，然后你需要使用第一种形式

# javascript - AngularJS下拉需要验证

> ID：15360094
> 
> 赞同：61
> 
> 时间：2013-03-12T11:37:03.027
> 
> 标签：javascript, asp.net, angularjs, angularjs-validation

以下是我的代码片段。我想使用 Angular 验证我的下拉菜单。

```
<td align="left" width="52%"> 
  <span class="requiredSmall">*</span> 
    <select class="Sitedropdown" style="width: 220px;" 
            ng-model="selectedSpecimen().serviceID" 
            ng-options="service.ServiceID as service.ServiceName for service in services"> 
         <option value="" ng-selected="selected">Select Service</option> 
   </select> 
</td> 
```

有效的意思：

*有效值可以是“选择服务”以外的任何值，这是我的默认值。与其他 ASP.net 一样，下拉列表需要字段验证器 DefaultValue="0"，所以这里我的下拉列表将从服务中绑定，我想选择除“选择服务”之外的所有其他值。*

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2013-03-12T14:09:38.640

您需要在`name`下拉列表中添加一个属性，然后您需要添加一个`required`属性，然后您可以使用以下命令引用错误`myForm.[input name].$error.required`：

HTML：

```
 <form name="myForm" ng-controller="Ctrl" ng-submit="save(myForm)" novalidate>
        <input type="text" name="txtServiceName" ng-model="ServiceName" required>
<span ng-show="myForm.txtServiceName.$error.required">Enter Service Name</span>
<br/>
          <select name="service_id" class="Sitedropdown" style="width: 220px;"          
                  ng-model="ServiceID" 
                  ng-options="service.ServiceID as service.ServiceName for service in services"
                  required> 
            <option value="">Select Service</option> 
          </select> 
          <span ng-show="myForm.service_id.$error.required">Select service</span>

        </form>

    Controller:

        function Ctrl($scope) {
          $scope.services = [
            {ServiceID: 1, ServiceName: 'Service1'},
            {ServiceID: 2, ServiceName: 'Service2'},
            {ServiceID: 3, ServiceName: 'Service3'}
          ];

    $scope.save = function(myForm) {
    console.log('Selected Value: '+ myForm.service_id.$modelValue);
    alert('Data Saved! without validate');
    };
        } 
```

这是一个工作的[笨蛋](http://plnkr.co/edit/xmycAAkWZI5VOogi1MyQ)。

# sql - Group by 不显示所有行

> ID：15360098
> 
> 赞同：3
> 
> 时间：2013-03-12T11:37:11.653
> 
> 标签：sql, sql-server, sql-server-2008, pivot

我有一张桌子`tblPersonaldata`和`tblStudentsadmitted`

```
tblPersonalData

UID  Name Gender
------------------------ 
 E1   xyz   M
 E2   pqr   M
 E3   mno   M

tblStudentsadmitted

UID   Status  Stage
----------------------
E1     Y        1
E2     Y        2
E3     Y        1 
```

现在我想要这样的数据：

```
Gender  Stage1   Stage2
 M        2       1 
```

但在这种情况下，我没有得到女性性别的数据。我想要女性性别的数据，即使它是空的

我试过这个：

```
select 
    case 
        when gender='M' then 'Male' 
        when gender='F' then 'Female' 
    end as Gender,
    sum(case when Stage=1 then 1 else 0) end as Stage1,
    sum(case when Stage=2 then 1 else 0) end as Stage2
from  tblPersonaldata A inner join 
      tblStudentsadmitted B on A.UID=B.UID 
where B.Status='Y'
group by Gender 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:39:19.677

 ~~~~```
SELECT  CASE WHEN a.Gender = 'M' THEN 'Male' ELSE 'FEMALE' END Gender,
        SUM(CASE WHEN Stage = 1 THEN 1 ELSE 0 END) Stage1,
        SUM(CASE WHEN Stage = 2 THEN 1 ELSE 0 END) Stage2
FROM    personal a
        LEFT JOIN studentadmitted b
            ON a.UID = b.UID AND b.Status = 'Y'
GROUP   BY a.Gender 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/673c3/2)~~  ~~```
SELECT  CASE WHEN c.Gender = 'M' THEN 'Male' ELSE 'Female' END Gender,
        SUM(CASE WHEN Stage = 1 THEN 1 ELSE 0 END) Stage1,
        SUM(CASE WHEN Stage = 2 THEN 1 ELSE 0 END) Stage2
FROM    (SELECT 'F' Gender UNION SELECT 'M' Gender) c
        LEFT JOIN personal a
            ON a.Gender = c.Gender
        LEFT JOIN studentadmitted b
            ON a.UID = b.UID AND b.Status = 'Y'
GROUP   BY c.Gender 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!3/673c3/10)

输出

```
╔════════╦════════╦════════╗
║ GENDER ║ STAGE1 ║ STAGE2 ║
╠════════╬════════╬════════╣
║ Female ║      0 ║      0 ║
║ Male   ║      2 ║      1 ║
╚════════╩════════╩════════╝ 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T11:47:22.613

在 SQL Server 中，您可以使用该[`PIVOT`](http://msdn.microsoft.com/en-us/library/ms177410%28v=sql.105%29.aspx)函数来生成结果：

```
select gender,
  Stage1, 
  Stage2
from
(
  select 
    c.gender,
    'Stage'+cast(stage as varchar(10)) Stage
  from (values ('F'),('M')) c (gender)
  left join tblpersonaldata p
    on c.gender = p.gender
  left join tblStudentsadmitted s
    on p.uid = s.uid
    and s.Status='Y'
)src
pivot
(
  count(stage)
  for stage in (Stage1, Stage2)
) piv 
```

请参阅[SQL Fiddle with Demo](http://www.sqlfiddle.com/#!3/7683c/11)。

由于您使用的是 SQL Server 2008，因此此查询使用`VALUES`来生成最终结果集中所需的性别列表

```
from (values ('F'),('M')) c (gender) 
```

然后通过`LEFT JOIN`在其他表上使用 a ，最终结果将为`M`和`F`值返回一行。

这也可以使用 a`UNION ALL`来生成性别列表：

```
select gender,
  Stage1, 
  Stage2
from
(
  select 
    c.gender,
    'Stage'+cast(stage as varchar(10)) Stage
  from 
  (
    select 'F' gender union all
    select 'M' gender
  ) c
  left join tblpersonaldata p
    on c.gender = p.gender
  left join tblStudentsadmitted s
    on p.uid = s.uid
    and s.Status='Y'
)src
pivot
(
  count(stage)
  for stage in (Stage1, Stage2)
) piv 
```

请参阅[带有演示的 SQL Fiddle](http://www.sqlfiddle.com/#!3/7683c/12)

两者的结果是：

```
| GENDER | STAGE1 | STAGE2 |
----------------------------
|      F |      0 |      0 |
|      M |      2 |      1 | 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T11:55:28.453

这也有效。`Left joins`与一个新表一起使用（*一个有两个性别记录的表`M`&`F`*）。

**[小提琴演示](http://www.sqlfiddle.com/#!3/673c3/35)**

```
select  t.g Gender,
        isnull(sum(case when Stage = 1 then 1 end),0) Stage1,
        isnull(sum(case when Stage = 2 then 1 end),0) Stage2
from    (values ('M'),('F')) t(g) 
            left join personal a on t.g = a.gender
            left join studentadmitted b on a.uid = b.uid and b.Status = 'Y'
group by t.g
order by t.g

| GENDER | STAGE1 | STAGE2 |
----------------------------
|      F |      0 |      0 |
|      M |      2 |      1 | 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T12:15:34.650

SELECT GENDER, 0 AS 'STAGE 0', 1 AS 'STAGE 1', 2 AS 'STAGE 2'
FROM ( SELECT P.ID, GENDER,CASE WHEN STAGE IS NULL THEN 0 ELSE STAGE END STAGE FROM tblPersonaldata P LEFT JOIN tblStudentsadmitted S ON P.UID = S.UID ) 作为 PIVOT ( COUNT (ID) FOR STAGE IN ([0],[1],[2]) )P~~~~

# html - 100% 高度不起作用？

> ID：15360102
> 
> 赞同：2
> 
> 时间：2013-03-12T11:37:14.977
> 
> 标签：html, css

```
+----------------------+
|          1           |
|                      |
+----------------------+
|       |              |
|   2   |              |
|       |              |
|       |      4       |
+-------|              |
|    3  |              |
|       |              |
+----------------------+ 
```

如上图（1）我需要添加一些标题内容，（2）左侧导航，（3）2内的一些内容到3的中心但不知道高度，因为4，（4）更大的内容。因此，我需要指定`height: 100%;`但不起作用。怎么做？

**编辑**

```
<div id="wrap">
<!--contents of (1)--> 
</div>
<div id="wrap">
<div id="left-nav">
<!--contents of (2)-->
<div id="someid">
<!-contents of (3)-->
</div>
</div>
<div id="main">
<!--contents of (4)-->
</div>
</div> 
```

我想使用背景（2）和（3）相同的主css，（4）不同的背景。

```
#left-nav{width: 200px; background-color: red; height: 100%;} 
```

**[检查此链接](http://tutorialzy.blogspot.com/2013/03/fundamental-history.html)**带有红色边框的红色文本是我想要给出的`height: 100%;`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T13:30:31.773

很高兴看到完整的[问题](https://stackoverflow.com/q/15376558/2129835):)

演示：[JSFiddle](http://jsfiddle.net/G9cSZ/8/)

当您有动态内容并且您不知道页面的高度时，您不应该设置该`height`属性，因为高度将相对于父（或窗口）的高度进行设置。同样，我们希望大小是动态的！所以不要设置 height 属性。

我认为这个问题可以改写为：

> *问：如何**仅使用 CSS**使动态区域具有相同的高度？*

简单地说，你**不能**。但是，您可以使它们*看起来*具有相同的高度。

这是一个纯 CSS 实现，在 < IE8 中可能看起来不太正确。我将扩展[@Adam 的答案](https://stackoverflow.com/a/15400702/2129835)。

1.  将侧边栏元素包装在一个新的 div ( `#sidebar`) 中，然后再次`float: left`.

2.  设置`#wrap { overflow: auto }`，这将允许`#wrap`扩展以包含`#sidebar`在它变得高于`#main`. [（资源）](http://css-tricks.com/all-about-floats/)

3.  设置`#sidebar { width: X }`和`#main { padding-right: X }`。这将使它非常`#main`尊重左侧将被背景占用的区域`#sidebar`。

4.  `#sidebar`最后一部分是为和设置背景`#main`。我们将通过设置**两个**背景图像来做到这一点：`#wrap { background: url('image1') repeat-y, url('image2') X 0 }`，其中 X 是侧边栏的宽度。确保图像与侧边栏的宽度相同，并且仅在 y 方向上重复。第二张图像将偏移到侧边栏的右侧并平铺以填充`#wrap`'s 背景的其余部分。

由于既没有`#sidebar`也`#main`没有设定的高度，它们可以随着内容的增长而自由扩展。我们固定`#wrap`扩展为浮动的高度`#sidebar`，它通常会扩展以覆盖高度，`#main`因为它只是一个普通的块元素。因为背景设置为`#wrap`，所以我们给出两个孩子与父母身高相同的**外观。**

**HTML** *（已添加`#sidebar`）*

```
<div id="header">1</div>
<div id="wrap">
    <div id="sidebar">
        <div id="left-nav">2</div>
        <div id="someid">3</div>
    </div>
    <div id="content">4</div>
</div> 
```

**CSS**

*注意：多个图像将无法工作 < IE8。您仍然可以将颜色设置为，`#main`但它不会扩展到`#wrap`如果**高于**`#sidebar`的高度。**`#main`***

 **```
#wrap {
    background: url('image1') repeat-y, 
                url('image2') X 0;
    overflow: auto;
}
#sidebar {
    float: left;
    width: X;
}

#main {
    margin-left: X;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-14T03:31:54.587

您需要使用 equalizeCols （一个 jQuery 插件）使两列的高度相同

-或者-

通过将 3 和 4 包装在容器 div 中并在左侧提供具有不同颜色/图案的背景图像来模拟左侧栏的外观，该背景图像可以在内容的整个高度上重复 -y。说得通？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-14T03:06:22.920

我已经通过这种方式解决了我的问题......

```
#left-nav{position: absolute; width: 329px; height: 100%;}
#someid{height: 70%; bottom: 0;} 
```

但仍建议使用适当的解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T11:45:26.837

当您将某些内容设置为 100% 时，它是父元素的 100%。那么父元素的高度是多少呢？如果这没有设置为某个值，那么您可能无法得到您所期望的。如果父级设置为 100%，请问自己：“100% 是什么？父级设置为什么？” Percent 不会给你一个大小，直到你得到一些有价值的东西，它可能只是视口和 html 元素的大小。**

# php - PHP联系表单提交但未接收

> ID：15360108
> 
> 赞同：0
> 
> 时间：2013-03-12T11:37:30.010
> 
> 标签：php, forms, contact

我的网站上有一个联系表格，但是每当我单击提交时，我的电子邮件地址都没有收到任何内容，尽管它确实说它已提交。

HTML如下

```
<div id="contactform">
    <form name="contact" method="post" action="PHP/send_form_email.php">
    <ol>
        <li><label>To </label>
            <select name="emailaddress" id="emailaddress">
        <option value="0"></option>
        <option value="1">General Queries</option>
        <option value="2">Webmaster Queries</option>
        </select>
        </li>
    <li><label for="name">Name</label>
        <input type="text" name="name" id="name"></input>
        </li>
    <li><label for="email">Email</label>
        <input type="text" name="email" id="email"></input>
        </li>
    <li><label for="subject">Subject</label>
        <input type="text" name="subject" id="subject"></input>
        </li>
    <li><label for="message">Message</label>
        <textarea name="message" id="message" cols="45" rows="5"></textarea>
        </li>
    <li>
            <input name="submit" type="submit" class="submit" id="submit" value="submit"></input>
        </li>
    </ol>
    </form>
</div> 
```

PHP是

```
<?php
    if(isset($_POST['email'])) {
        $subject = $_REQUEST['subject'];
        $emailaddress[1] = "email1@email.com";
    $emailaddress[2] = "email2@email.com";
    $contactnameindex = $_REQUEST['emailaddress'];
    if ($contactnameindex == 0 || !isset($_REQUEST['emailaddress']))
            die ("You did not         choose a recipient. Please hit your browser back button and try again.");
    else
            $emailaddress = $emailaddress[$contactnameindex];

    function died($error) {
        echo "We are very sorry, but there were error(s) found with the form you submitted. ";
        echo "These errors appear below.<br /><br />";
        echo $error."<br /><br />";
        echo "Please go back and fix these errors.<br /><br />";
        die();
    }

    // validation expected data exists
    if  (!isset($_POST['name']) ||
        !isset($_POST['email']) ||
        !isset($_POST['subject']) ||
        !isset($_POST['message'])) {
        died('We are sorry, but there appears to be a problem with the form you  submitted.');       
    }

    $name = $_POST['name']; // required
    $email = $_POST['email']; // required
    $subject = $_POST['subject']; // required
    $message = $_POST['message']; // required

    $error_message = "";
    $email_exp = '/^[A-Za-z0-9._%-]+@[A-Za-z0-9.-]+\.[A-Za-z]{2,4}$/';
    if(!preg_match($email_exp,$email)) {
        $error_message .= 'The Email Address you entered does not appear to be valid.<br />';
    }
    $string_exp = "/^[A-Za-z .'-]+$/";
    if(!preg_match($string_exp,$name)) {
        $error_message .= 'The Name you entered does not appear to be valid.<br />';
    }
    if(strlen($message) < 2) {
        $error_message .= 'The Message you entered does not appear to be valid.<br />';
    }
    if(strlen($error_message) > 0) {
        died($error_message);
    }
    $email_message = "Form details below.\n\n";

    function clean_string($string) {
    $bad = array("content-type","bcc:","to:","cc:","href");
    return str_replace($bad,"",$string);
    }

    $email_message .= "name: ".clean_string($name)."\n";
    $email_message .= "email: ".clean_string($email)."\n";
    $email_message .= "subject: ".clean_string($subject)."\n";
    $email_message .= "message: ".clean_string($message)."\n";

    // create email headers
    $headers = 'From: '.$email_from."\r\n".
    'Reply-To: '.$email_from."\r\n" .
    'X-Mailer: PHP/' . phpversion();
    @mail($email_to, $email_subject, $email_message, $headers);  
?>

<!-- include your own success html here -->

Thank you for contacting us. We will be in touch with you very soon.

<?php
}
?> 
```

显然我使用的电子邮件地址不是email1和email2，但我检查了我使用的实际地址并且它们都输入正确，有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-02T18:23:43.107

```
<?php

    require_once "../common/lib.config.php";
    require_once "../classess/class.GymFacility.php";

    $Fobj= new GymFacility();

    if(!$_GET['iDisplayStart'])
        $StartIndex = 0;
    else
        $StartIndex = $_GET['iDisplayStart'];

    if(!$_GET['iDisplayLength'])
        $Limit = 10;
    else
        $Limit = $_GET['iDisplayLength']; 

    $result=$Fobj->GetAllGymFacility();

    $row=array();
    $link="";

    for($i=0;$i<count($result);$i++)
    {   
        $link="&nbsp;&nbsp;&nbsp; <a id='addv' href=javascript:loadpg('gym_facility_v0/form_facility.php?id=".$result[$i]['refid']."')> <img src='../images/icons/middlenav/create.png' class='listimg' title='Edit '></a>&nbsp;&nbsp;<a id='addv' href=javascript:deleteitem('gym_facility_v0/delete_facility.php?id=".$result[$i]['refid']."')> <img src='../images/icons/middlenav/close.png' class='listimg' title='delete '></a> ";
        $row[]=array($i+1,$result[$i]['gymfacilities'],$link);

    }

    $totacnt=count($result);
    $fltcnt=count($result);

    $output = array(
        "sEcho" => intval($_GET['sEcho']),
        "iTotalRecords" => $totacnt,
        "iTotalDisplayRecords" =>$fltcnt ,
        "aaData" => $row);

    echo json_encode($output);

?>

<?php 
    require_once "../common/lib.config.php";
    require_once "../classess/class.GymFacility.php";

    $F=new GymFacility();

    $id=$_GET['id'];
    $IpArr['stat']='R';
    $result=$F->DeleteGymFacility($IpArr,$id);
    echo "gym_facility_v0/facility.php";

?>

<?php
    require_once "../common/lib.config.php";
    require_once "../classess/class.QueryBuilder.php";

    class GymFacility extends QueryBuilder
    {
        public function GymFacility()
        {
            parent::__construct();
        }

        public function AddGymFacility($IpArr)
        {           
            if(!$this->IsExist($IpArr['gymfacilities'],$refid=0)){
            $this->SetTable('gymfacility');
            $this->AddFlds($IpArr);
            return $this->AddQuery();
            }
            return 'E';

        }

        public function EditGymFacility($IpArr, $Refid)
        {
            if(!$this->IsExist($IpArr['gymfacilities'],$Refid)){
            $this->SetTable('gymfacility');
            $this->AddFlds($IpArr);
            $this->SetWhere("refid = '{$Refid}'");
            $this->UpdQuery();
            return $Refid;
            }
            return 'E';
        }

        public function UpdateGymFacility($IpArr, $Refid)
        {
                $this->SetTable('gymfacility');
                $this->AddFlds($IpArr);
                $this->SetWhere("refid = '{$Refid}'");
                $this->UpdQuery();
                return $Refid;
        }

        public function DeleteGymFacility($IpArr, $Refid)
        {
                $this->SetTable('gymfacility');
                $this->AddFlds($IpArr);
                $this->SetWhere("refid = '{$Refid}'");
                $this->UpdQuery();
                return $Refid;
        }

        public function GetAllGymFacility()
        {
            $this->SetTable('gymfacility');
            $this->SetResultFlds("*");
            $this->SetWhere("stat != 'R'");
            $Res = $this->GetQuery();
            return $Res;
        }
        public function GetGymFacilityById($refid)
        {
            $this->SetTable('gymfacility');
            $this->SetResultFlds('*');
            $this->SetWhere("stat != 'R' AND  refid = '{$refid}' ");
            $Res = $this->GetQuery();
            return $Res;
        }
        public function IsExist($card_id, $refid)
        {
            $this->SetTable('gymfacility');
            $this->SetResultFlds('*');
            $this->SetWhere("gymfacilities = '{$card_id}' AND stat != 'R' AND refid !={$refid}");
            $res=$this->GetQuery();
            return count($res);
        }

    }
?> 
```

css

```
.title {
font-size: 20px;
color: #0C0;
}

body {
margin: 0;
padding: 0;
background: #FFF;
font-size: 12px;
color: #424242;
font-family: Arial, Helvetica, sans-serif;
line-height: 20px;
min-height: 100%;
position: relative;

rowElem {
clear: both;
border-top: 1px solid #e7e7e7;
padding: 10px 16px;
position: relative;
}

content {
padding-bottom: 80px;
overflow: hidden;
}
content {
padding-bottom: 80px;
overflow: hidden;
}

fieldset {
display: block;
-webkit-margin-start: 2px;
-webkit-margin-end: 2px;
-webkit-padding-before: 0.35em;
-webkit-padding-start: 0.75em;
-webkit-padding-end: 0.75em;
-webkit-padding-after: 0.625em;
border: 2px groove threedface;
border-image-source: initial;
border-image-slice: initial;
border-image-width: initial;
border-image-outset: initial;
border-image-repeat: initial;
min-width: -webkit-min-content;
}

title {
font-size: 20px;
color: #0C0;
}

greyishBtn:hover {
background-position: 0 -25px;
}

button {
font-size: 10px;
font-weight: bold;
text-transform: uppercase;
padding: 5px 14px 6px 14px;
cursor: pointer;
font-family: Arial, Helvetica, sans-serif;
line-height: 12px;
}
.submitForm {
float: right;
margin: 1px 27px 1px 16px;
}
.greyishBtn {
background: url(../images/ui/greyishBtn.png) repeat-x 0 0;
border: 1px solid #4f5a68;
color: #fff;
}
div {
display: block;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:57:08.793

你的`$email_to`和`$email_subject`你的`mail()`是未定义的。

```
@mail($email_to, $email_subject, $email_message, $headers); 
```

你`$email_to`可能应该是`$emailaddress`，基于

```
else $emailaddress = $emailaddress[$contactnameindex]; 
```

你`$email_subject`可能应该是`clean_string($subject)`，基于

```
$subject = $_POST['subject']; 
```

所以像 -

```
@mail($emailaddress, clean_string($subject), $email_message, $headers); 
```

# javascript - 使用 Bootstrap 的导航选项卡从另一个选项卡跳转到特定选项卡

> ID：15360112
> 
> 赞同：12
> 
> 时间：2013-03-12T11:37:43.363
> 
> 标签：javascript, twitter-bootstrap, tabs

我正在使用`nav-tabs`具有以下设置的 Bootstrap：

```
<ul class="nav nav-tabs">
  <li class="active"><a href="#home" data-toggle="tab">Home</a></li>
  <li><a href="#profile" data-toggle="tab">Profile</a></li>
</ul>
<div id="tabContent" class="tab-content">
  <div class="tab-pane active in" id="home">
    <form id="tab">
        <label>Name:</label>
        <input type="text" value="fooBar" class="input-xlarge">
    </form>
  </div>
  <div class="tab-pane fade" id="profile">
    <form id="tab2">
        <a href="#home">Home</a>
    </form>
  </div>
</div> 
```

如您所见，我的`profile`选项卡中有一个链接，它链接到第一个选项卡。单击锚点会更改 URL 栏中的 URL，但不会跳转到特定选项卡。

然后我注意到通常无法直接链接到选项卡，因此我从[Twitter Bootstrap 选项卡中添加了以下代码： Go to Specific Tab on Page Reload or Hyperlink](https://stackoverflow.com/questions/7862233/twitter-bootstrap-tabs-go-to-specific-tab-on-page-reload)：

```
// Javascript to enable link to tab
var url = document.location.toString();
if (url.match('#')) {
    $('.nav-tabs a[href=#'+url.split('#')[1]+']').tab('show') ;
} 

// Change hash for page-reload
$('.nav-tabs a').on('shown', function (e) {
    window.location.hash = e.target.hash;
}) 
```

现在我可以从其他地方链接到特定选项卡，但如果我在导航栏所在的同一页面上，则不能。重新加载页面然后会跳转到想要的选项卡，所以我想我可以使用[Javascript 的解决方案强制重新加载页面：如何真正重新加载带有锚标记的站点？](https://stackoverflow.com/questions/2319004/javascript-how-to-truly-reload-a-site-with-an-anchor-tag)：

```
window.location.reload(true); 
```

然而，每次我单击选项卡时都会重新加载，此外`home`，当单击锚点时，它仍然没有加载选项卡。

因此，我将如何`id`从另一个选项卡跳转到给定的？

* * *

## 回答 #1

> 赞同：40
> 
> 时间：2013-03-12T15:27:21.417

您提到的其他答案可能会让您走错路……从同一页面中更改选项卡相当简单（无论您是否在另一个选项卡中）：您可以使用基本的引导程序用于此的[选项卡导航 Javascript](http://twitter.github.com/bootstrap/javascript.html#tabs)。

首先稍微更改您的 html：向您添加一个 id，`<ul class="nav nav-tabs" id="myTab">..`然后向您的第二个选项卡添加一个链接：

```
<div class="tab-pane fade" id="profile">
  <form id="tab2">
    <a href="#" id="gotohome">Jump to home tab (this works)</a>
... 
```

并在您的文档中添加以下内容：

```
$('#gotohome').click(function() {
  $('#myTab a[href="#home"]').tab('show');
}); 
```

[jsFiddle](http://jsfiddle.net/serra/Eauyu/)的工作示例。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-10-06T11:16:33.767

给定的答案

```
$('#myTab a[href="#home"]').tab('show'); 
```

也可用于使 JavaScript 软件跳转到特定选项卡。假设您想在开始时使用 url 跳转到特定选项卡：

```
http://myDomain/myApp#tabSomewhere 
```

您可以想象这会起作用（您需要进行一些额外的编码）。假设您的第一页在 tabHome 上（您使用“活动”类使其处于活动状态。当您尝试使用 javascript 返回该页面时，您必须使用以下方法从 tabHome 中删除活动类：

```
$('li').removeClass('active'); 
```

# ipad - Videojs在ipad上暂停和淡出后无法播放

> ID：15360114
> 
> 赞同：1
> 
> 时间：2013-03-12T11:37:45.287
> 
> 标签：ipad, video, video.js

我有一个带有 videojs 播放器的页面。

```
 <div id='modal-bg'>
    <div id="video-exit"></div>
    <div class="video-box-wr">
      <video id="model_vid" class="video-js vjs-default-skin" controls poster="myposter.png" data-setup='{}'>
        <source src="video.mp4" type='video/mp4'>
      </video>
    </div>
  </div> 
```

id 为“modal-bg”的 div 在 css 中的显示设置为无。当用户单击按钮时，div 淡入并开始播放视频。

```
if($('#model_vid').length>0){
        _V_("model_vid").ready(function() {
            var video_player = this;

            $("#view-video-button").click(function(){
                    $("#modal-bg").fadeIn(function(){
                        // video_player.play();                 
                    }); 
                    video_player.play();
            });

            $("#video-exit").click(function(){
                video_player.currentTime(0);
                video_player.pause();
                $("#modal-bg").fadeOut();       
            });
        }); 
    } 
```

在桌面（Chrome、Firefox、Safaru 和 IE9）上可以正常工作，但在 iPad（iOS 6.1.2）上不行。

首先， video_player.play() 在淡入后在回调中不起作用。在回调之外，就像上面的代码一样，它确实开始正常播放。

第二 - 当您退出视频时，它会停止并正确淡出 - 但是当您第二次按下播放时，视频会淡入但不会播放。控件可见但不工作并且屏幕为黑色。退出仍然有效，并且播放器正确淡出。

[这里](https://github.com/zencoder/video-js/issues/127)报告了一个类似的问题，但没有解决方案。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-06T09:06:16.177

我有一个类似的问题。我通过调整不透明度解决了这个问题。当您致电`display: none;`/`display: block;`某些浏览器正在进行一些重置时。我想我也遇到了 Firefox 的这个问题。另一种选择是将高度设置为 0%，以使外观消失。希望这会为您指明正确的方向。

# excel - 根据条件对一系列单元格求和

> ID：15360117
> 
> 赞同：-2
> 
> 时间：2013-03-12T11:37:52.603
> 
> 标签：excel

我有一张如下表：

![床单](../Images/e667e03ba29286c8432bfebd2a70df06.png)

如果那个人的名字旁边有一个勾号，我希望能够对值字段求和，你会看到每个名字都有一个值，如果他们在那周参加并有一个勾号，那么在总和中包含这个值。我想填充已收集字段以显示该周收集了多少。

我在一个范围内尝试了 SUMIF，但没有成功。

提前致谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:46:04.917

如果您想每周执行一次，SUMIF 应该可以工作，例如在 C22 中复制

`=SUMIF(C5:C19,"x",$B5:$B19)`

用您用来获取刻度的特定字符替换“x”

# c++ - 代码仅适用于 endl - 很奇怪

> ID：15360122
> 
> 赞同：0
> 
> 时间：2013-03-12T11:38:09.297
> 
> 标签：c++, endl

我之前遇到了一个奇怪的问题。我在 B-trees 中进行插入工作，并编写了一个简单的显示函数。我运行它，即使我插入了一些值，它也没有在控制台中显示任何内容。

我进入了调试模式，我跟随程序的流程，调试器向我显示树中有值。然后我只想显示第一个节点的元素，我遇到了同样的问题：一个空的控制台。

我问我的老师会是什么错误，他告诉我放一个`endl`after `cout`，像这样：

```
cout << node->keys[i] << endl; 
```

有效！然后他告诉我，可能我`NULL`在我的程序中处理了一个指针，而 Eclipse 没有说任何关于它的内容，但没有说明如何`endl`提供帮助。

有谁知道可能是什么问题以及如何`endl`解决它？我非常非常困惑。我不明白刷新缓冲区与我的显示功能有什么关系。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:40:57.547

我回答有点晚了，其他答案已经解释了如何冲洗，所以我想至少回答你对约翰西答案的评论。

首先，输出被缓冲的原因是，将数据写入某个输出流而不是内存通常是一个非常慢的操作（这个 ofc 取决于您是想写入 ssd 或 hdd 上的文件还是仅写入显示器，但它们都比内存慢）。

因此，c++ 首先将其写入内部缓冲区，并且仅在缓冲区已满或刷新流时才实际写入输出。这样做是为了避免在大多数输出​​流上写入操作缓慢。

那么现在为什么你需要在缓冲区显示之前刷新它......就像已经说过的那样，它实际上只是将它写出来让你查看缓冲区何时已满或它被显式刷新。现在，当程序正常结束时，所有流都会自动刷新，所以发生的事情是程序崩溃（崩溃不会刷新缓冲区），因此您的程序退出而不会显示。

由于您的程序在添加时正确显示所有内容，`endl`我猜您正试图在`nullptr`最后输出一个带有 a 的节点，并在从`main`. 您可以通过在in main`std::cout << "end of the program" << std::endl;`之前添加并测试它是否显示来轻松测试它。`return`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:40:27.423

`std::endl`刷新输出流....

`cout`被缓冲，输出不会立即显示，它们将被缓冲，直到缓冲区溢出，然后将显示所有缓冲的数据。如果你想更快地显示输出，`flush`它。

> 在输出序列 os 中插入一个结束符并刷新它，就像调用 os.put(os.widen('\n')) 后跟 os.flush() 一样。[[1]](http://en.cppreference.com/w/cpp/io/manip/endl)

你也可以用`std::cout.flush();`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:43:21.567

As **M M** has mentioned in his answer as have others above, the `std::endl` flushes output stream. What it means is to display or put the results/output to the standard output source immediately/real time.

Using `'\n'` instead of `std::endl` will also result in similar output but may not be displayed immediately if some operation is still going on.

The common down side of std::endl is considered to be degradation of performance, though it may not be of significance if the output is streamed to a display instead of a file - where the `'\n'` is the preferred method.

Hope this helps.

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T11:40:35.097

[`std::endl`](http://en.cppreference.com/w/cpp/io/manip/endl)在输出序列中插入一个结束字符（`os`在您的情况下为`cout`），并`flush`es 它就像通过调用`os.put(os.widen('\n'))`后跟`os.flush()`.

[`std::cout`](http://en.cppreference.com/w/cpp/io/cout)控制输出到与标准 C 输出流 stdout 相关联的实现定义类型的流缓冲区（从 std::streambuf 派生）。此输出被*缓冲*（与 不同[`std::cerr`](http://en.cppreference.com/w/cpp/io/cerr)）

在您`endl`输入源代码之前，您的缓冲区没有被刷新，输出也没有出现在您的屏幕上。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T11:41:07.420

`std::endl`不仅将换行符附加到输出流，而且还导致它被刷新。我不太确定缓冲区有多大`std::cout`，但您可能看不到任何东西，因为缓冲区未满，因此不会被刷新。`cout.flush();`您可以在附加数据（不附加）后尝试调用`std::endl`，看看是否能解决问题。

# android - 两次之间的时间差

> ID：15360123
> 
> 赞同：29
> 
> 时间：2013-03-12T11:38:10.190
> 
> 标签：android, time

我想以 hh:mm 格式显示两次之间的差异。

第一次来自数据库，第二次是系统时间。时差每秒更新一次。

我怎样才能做到这一点？

目前我正在使用两个手动时间，如果这可以完美运行，那么我将它实施到我的应用程序中。

```
public class MainActivity extends Activity 
{
    TextView mytext;
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Timer updateTimer = new Timer();
        updateTimer.schedule(new TimerTask() 
        {
            public void run() 
            {
                try 
                {
                    TextView txtCurrentTime= (TextView)findViewById(R.id.mytext);
                    SimpleDateFormat format = new SimpleDateFormat("hh:mm:ss aa");
                    Date date1 = format.parse("08:00:12 pm");
                    Date date2 = format.parse("05:30:12 pm");
                    long mills = date1.getTime() - date2.getTime();
                    Log.v("Data1", ""+date1.getTime());
                    Log.v("Data2", ""+date2.getTime());
                    int hours = (int) (mills/(1000 * 60 * 60));
                    int mins = (int) (mills % (1000*60*60));

                    String diff = hours + ":" + mins; // updated value every1 second
                    txtCurrentTime.setText(diff);
                } 
                catch (Exception e) 
                {
                    e.printStackTrace();
                }
            }

        }, 0, 1000);
    }
} 
```

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2013-03-12T11:51:41.330

要计算两个日期之间的差异，您可以尝试以下操作：

```
long millis = date1.getTime() - date2.getTime();
int hours = (int) (millis / (1000 * 60 * 60));
int mins = (int) ((millis / (1000 * 60)) % 60);

String diff = hours + ":" + mins; 
```

要每秒更新时差，您可以使用 Timer。

```
Timer updateTimer = new Timer();
updateTimer.schedule(new TimerTask() {
    public void run() {
        try {
            long mills = date1.getTime() - date2.getTime();
                int hours = millis/(1000 * 60 * 60);
                 int mins = (mills/(1000*60)) % 60;

                 String diff = hours + ":" + mins; // updated value every1 second
            } catch (Exception e) {
            e.printStackTrace();
        }
    }

}, 0, 1000); // here 1000 means 1000 mills i.e. 1 second 
```

编辑：工作代码：

```
public class MainActivity extends Activity {

    private TextView txtCurrentTime;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
        txtCurrentTime= (TextView)findViewById(R.id.mytext);
        Timer updateTimer = new Timer();
        updateTimer.schedule(new TimerTask() 
        {
            public void run() 
            {
                try 
                {

                    SimpleDateFormat format = new SimpleDateFormat("hh:mm:ss aa");
                    Date date1 = format.parse("08:00:12 pm");
                    Date date2 = format.parse("05:30:12 pm");
                    long mills = date1.getTime() - date2.getTime();
                    Log.v("Data1", ""+date1.getTime());
                    Log.v("Data2", ""+date2.getTime());
                    int hours = (int) (mills/(1000 * 60 * 60));
                    int mins = (int) (mills/(1000*60)) % 60;

                    String diff = hours + ":" + mins; // updated value every1 second
                    txtCurrentTime.setText(diff);
                } 
                catch (Exception e) 
                {
                    e.printStackTrace();
                }
            }

        }, 0, 1000);
    } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2013-03-13T09:39:27.463

终于做到了 yuppiieeee ...

```
package com.timedynamicllyupdate;

import java.text.SimpleDateFormat;
import java.util.Calendar;
import java.util.Date;
import android.os.Bundle;
import android.app.Activity;
import android.view.Menu;
import android.widget.TextView;

public class MainActivity extends Activity 
{
    TextView current;
    private TextView txtCurrentTime;
    @Override
    protected void onCreate(Bundle savedInstanceState) 
    {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Thread myThread = null;
        Runnable myRunnableThread = new CountDownRunner();
        myThread= new Thread(myRunnableThread);   
        myThread.start();

        current= (TextView)findViewById(R.id.current);
    }

    public void doWork() 
    {
        runOnUiThread(new Runnable() 
        {
            public void run() 
            {
                try
                {
                    SimpleDateFormat sdf = new SimpleDateFormat("hh:mm:ss aa");

                    txtCurrentTime= (TextView)findViewById(R.id.mytext);

                    Date systemDate = Calendar.getInstance().getTime();
                    String myDate = sdf.format(systemDate);
//                  txtCurrentTime.setText(myDate);

                    Date Date1 = sdf.parse(myDate);
                    Date Date2 = sdf.parse("02:50:00 pm");

                    long millse = Date1.getTime() - Date2.getTime();
                    long mills = Math.abs(millse);

                    int Hours = (int) (mills/(1000 * 60 * 60));
                    int Mins = (int) (mills/(1000*60)) % 60;
                    long Secs = (int) (mills / 1000) % 60;

                    String diff = Hours + ":" + Mins + ":" + Secs; // updated value every1 second
                    current.setText(diff);
                }
                catch (Exception e) 
                {

                }
            }
        });
    }

    class CountDownRunner implements Runnable
    {
        // @Override
        public void run() 
        {
            while(!Thread.currentThread().isInterrupted())
            {
                try 
                {
                    doWork();
                    Thread.sleep(1000); // Pause of 1 Second
                } 
                catch (InterruptedException e) 
                {
                        Thread.currentThread().interrupt();
                }
                catch(Exception e)
                {
                }
            }
        }
    }

    @Override
    public boolean onCreateOptionsMenu(Menu menu) 
    {
        // Inflate the menu; this adds items to the action bar if it is present.
        getMenuInflater().inflate(R.menu.activity_main, menu);
        return true;
    }

} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2017-02-18T20:59:16.503

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2015-04-03T12:57:47.853

好的，我在这里为您构建功能：

```
 public void omriFunction(){
    Date Start = null;
    Date End = null;
    SimpleDateFormat simpleDateFormat = new SimpleDateFormat("HH:mm");
    try {
        Start = simpleDateFormat.parse(04+":"+30);
        End = simpleDateFormat.parse(06+":"+45);}
    catch(ParseException e){
        //Some thing if its not working
    }

    long difference = End.getTime() - Start.getTime();
    int days = (int) (difference / (1000*60*60*24));
    int hours = (int) ((difference - (1000*60*60*24*days)) / (1000*60*60));
    int min = (int) (difference - (1000*60*60*24*days) - (1000*60*60*hours)) / (1000*60);
    if(hours < 0){
        hours+=24;
    }if(min < 0){
        float  newone = (float)min/60 ;
        min +=60;
        hours =(int) (hours +newone);}
    String c = hours+":"+min;
    Log.d("ANSWER",c);} 
```

答案：2:15；在日志中

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2013-03-12T11:58:51.280

流程大致如下，

1.  通过以下方式将您的字符串实例转换为日期实例

    ```
    SimpleDateFormat format = new SimpleDateFormat("yyyy-MM-dd");
    Date date = format.parse("2011-01-03"); 
    ```

2.  假设您拥有的 systemTime 很长，表示自 epoc 以来的毫秒数，您现在可以执行以下操作

    ```
    long difference = longNow - date.getTime();
    int msPerHour = 1000*60*60;
    int hours = difference/secondPerHour;
    int minutes = difference % secondPerHour; 
    ```

    `longNow`您当前的变量在哪里包含系统时间。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2018-09-15T06:26:38.980

```
Date currentTime = parseDate("11:27:20 AM");
Date endTime = parseDate("10:30:01 AM");

if (endTime.before(currentTime))
{
    Log.e("Time :","===> is before from current time");
}

if (endTime.after(currentTime))
{
    Log.e("Time :","===> is after from current time");
}

private Date parseDate(String date)
{
    String inputFormat = "hh:mm:ss aa";
    SimpleDateFormat inputParser = new SimpleDateFormat(inputFormat, Locale.US);
    try {
        return inputParser.parse(date);
    } catch (java.text.ParseException e) {
        return new Date(0);
    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-06-05T10:24:26.487

嗨，伙计们不知道我做错了什么，但这对我有帮助，希望我能帮助别人。

我的最小值是以某种浮点格式计算的，所以我使用了这个公式

```
long Min = time %  (1000*60*60)/(60*1000);
time is my date2.getTime() - date1.getTime(); 
```

快乐编码

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2021-07-15T09:15:17.183

因此，我一直在寻找一种可以从 Kolin 的 2 Times 获得 HH/MM/SS 的方法，这似乎是一个不错的方法。

它使用**import org.threeten.bp**

```
fun getTimedifference(startTime: LocalDateTime,  endTime: LocalDateTime): String {
        val startTimeInstant = startTime.atOffset(ZoneOffset.UTC).toInstant()
        val endTimeInstant = endTime.atOffset(ZoneOffset.UTC).toInstant()
        val duration = Duration.between(startTimeInstant, endTimeInstant)
        val days = duration.toDays()
        val hours = duration.toHours() - (days * 24)
        val min = duration.toMinutes() - (duration.toHours() * 60)
        val sec = (duration.toMillis() / 1000) - (duration.toMinutes() * 60)
        return "${hours}:${min}:${sec}"
    } 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2019-03-10T09:53:03.980

托盘以下代码可在两次之间获得不同的小时和分钟：

```
private static int getHoursDiff(Calendar c1, Calendar c2) {
            Date d1 = c1.getTime();
            Date d2 = c2.getTime();
            long mils = d1.getTime() - d2.getTime();
            int hourDiff = (int) (mils / (1000 * 60 * 60));
            return hourDiff;
        }

        private static int getMinuteDiff(Calendar c1, Calendar c2) {
            Date d1 = c1.getTime();
            Date d2 = c2.getTime();
            long mils = d1.getTime() - d2.getTime();
            int minuteFor = (int) (mils / (1000 * 60) % 60);
            return minuteFor;
        } } 
```

# java - 如何对图片使用多点触控

> ID：15360127
> 
> 赞同：0
> 
> 时间：2013-03-12T11:38:17.273
> 
> 标签：java, android, eclipse, zooming, multi-touch

我正在制作一个我想要的应用程序`implement an offline map service for the city Rome`，我认为最简单的方法是实现城市的高分辨率地图图片，但现在我遇到了两个问题：

*   如果我在 eclipse 中将图片添加到我的应用程序中，它会被缩小到图标的大小，当我再次放大它时，它的分辨率非常低，如何解决这个问题？

*   您对多点触控或缩放可能性有任何经验吗？因为当您拥有地图时，人们希望放大以详细查看街道名称。我知道你必须给手指坐标 x,x 和 y,y 但这是最​​简单的方法吗？我应该如何继续？

# linux - Linux 内核设备模型 - 哪些设备遵循它？

> ID：15360130
> 
> 赞同：1
> 
> 时间：2013-03-12T11:38:25.543
> 
> 标签：linux, model, kernel, device

我的问题是关于 linux 设备型号。我在源代码中进行了一些挖掘，发现设备模型适用于许多结构，其中一些是：

1.  结构设备
2.  结构设备驱动程序
3.  结构总线类型
4.  还有更多与电源管理相关的内容。

但是当我查看在 linux 内核中实现的 char 驱动程序（或者如果我实现自己的 char 驱动程序）时，linux 内核只实现了“struct device”，所有其他结构都只是 NULL。我已经通过一些调试和友好的邻域 API printk() 对此进行了检查。

所以我的问题是为什么 char 驱动程序不完全遵循设备模型？

还有哪些驱动程序完全遵循 linux 设备模型？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-12T04:34:21.483

Linux 设备模型使用 kobject 作为它的基础，充当将其粘合在一起的粘合剂。

您提到的结构位于 kobject 之上的一层。

因此，我们可以说 kobject 是您（几乎）永远不会遇到但仍然无处不在的东西。

char 驱动程序不是借口：

```
struct cdev {
struct kobject kobj;
struct module *owner;
const struct file_operations *ops;
struct list_head list;
dev_t dev;
unsigned int count;
}; 
```

即使您不知道所有驱动程序都遵循设备模型，因此字符驱动程序也不例外。

看看实现，`cdev_add()`你会得到你的答案。

我建议您阅读这篇[文章](http://linuxburps.blogspot.in/2013/12/linux-device-model.html)并再次深入了解 LDM 代码。

# html - jqmobi 数据刷新-ajax="true"

> ID：15360136
> 
> 赞同：0
> 
> 时间：2013-03-12T11:38:46.500
> 
> 标签：html, reload, jqmobi

我正在尝试使用 data-refresh-ajax="true" 重新加载面板的内容，但它不起作用。内容是简单的 HTML 和一些我用“document.write(NavHome);”编写的 JavaScript 变量/常量。有人可以帮我吗，怎么了？

最好的问候曼努埃尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:12:29.963

github 下载中包含的厨房水槽有一个示例，说明如何使用它。如果您单击“jqUi”->“加载外部内容”，您将看到随机数每次都会更新。

```
<a href="kitchensink/external.html" data-persist-ajax="true" data-refresh-ajax="true" data-pull-scroller="true">Load External Content</a> 
```

# php - XSS 和 PHP 攻击

> ID：15360139
> 
> 赞同：-6
> 
> 时间：2013-03-12T11:38:52.773
> 
> 标签：php, javascript, xss, code-injection

我被分配测试另一个小组刚刚创建的网站。我发现了

它容易受到 XSS 攻击。但是，它并没有真正抛出

当我将 JS 与 PHP 一起使用时出现错误或任何有效信息：

```
i.e. var someVar = <?php echo 'a'; ?>

     alert(someVar); 
```

这导致我假设容易受到 XSS 攻击的站点可能不一定允许 php 代码

被注入。我对么？如果没有，我在上面发布的部分有什么问题吗？

而且，我没有尝试通过 GET 变量进行 php 注入的原因是我这样做了

到目前为止，不要使用任何形式的**page.php?id=''**来查询数据库，除了

注册和登录部分，通过 POST。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:44:54.720

> This led to my assuming that a site prone to XSS attacks may not necessarily allow php code to be injected. Am I correct?

Yes, of course.
XSS attacks has nothing to do with PHP code injections. It's all about JS code injection

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:46:18.660

JavaScript 运行在客户端，Php 运行在服务器端。您无法使用 JavaScript 在客户端执行 php。[在wiki](http://en.wikipedia.org/wiki/Cross-site_scripting)上查看更多信息。

您可以尝试做的是从任何网站输入字段发布一些包装在标签中的 js 代码，如果它的值没有在服务器端验证并直接转到 db 并在您看到 js 代码执行后显示在网站页面上的某个位置，就像其他客户端会做的那样，所以 js 代码可能会在客户端计算机上做一些有趣的事情

# iphone - UITextView 行高问题

> ID：15360141
> 
> 赞同：0
> 
> 时间：2013-03-12T11:38:57.300
> 
> 标签：iphone, ios, ipad, uitextview, line

我尝试根据设计在 textview 中设置文本。但是设计中的行高超过了UITextView中的默认行高，所以我即将用标签序列替换UITextView。

是否可以在 textview 中设置行高或行间距？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:43:13.160

没有直接的方法来设置行高，`UITextView` 但是您可以创建自定义 textView 并将其从 UITextView 子类化并[重新`styleString`实现`UITextView`](https://stackoverflow.com/questions/3760924/set-line-height-in-uitextview)

# ios - 更改 UIRefreshControl 所需的路径以转到 UIControlEventValueChanged

> ID：15360143
> 
> 赞同：7
> 
> 时间：2013-03-12T11:39:04.853
> 
> 标签：ios, uiview, ios6, uiscrollview, uirefreshcontrol

我正在尝试将其添加`UIRefreshControl`到我的`UIScrollView`中，但问题是它的面积太小，因此用户几乎不可能拉到所需的水平。

那么有没有办法触发这个控件的状态或者改变所需拉动手势的长度呢？

我知道，这种控制是新的，可能没有直接的方法来实现这一点，但也许有人发现了一个黑客？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T12:35:51.887

找到了解决方案：让您的 scrollView 委托并`- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate`在某个偏移量处刷新控件

```
- (void)scrollViewDidEndDragging:(UIScrollView *)scrollView willDecelerate:(BOOL)decelerate
{
  if (scrollView.contentOffset.y < -70) {
    [refreshControl beginRefreshing];
     dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_BACKGROUND, 0), ^{
       [self handleRefresh:refreshControl];
     });
  }
} 
```

Dispatch 是为了在从服务器获取信息时不滞后界面。如果您随后更新 UI 中的某些内容，请使用`dispatch_async(dispatch_get_main_queue(), ^{//update UI code});`

# android - Android 位置更新

> ID：15360148
> 
> 赞同：1
> 
> 时间：2013-03-12T11:39:17.503
> 
> 标签：我正在尝试制作一个基于准确位置的应用程序，但我对requestlocationupdates, android, gps, location, android-wifi, locationmanager

[我正在尝试制作一个基于准确位置的应用程序，但我对requestlocationupdates](/questions/tagged/requestlocationupdates "显示标记为“请求位置更新”的问题")的工作方式有点困惑。

1.  如果我将其`requestlocationUpdates(LocationManager.GPS_PROVIDER, , );`作为位置提供者并测试我的应用程序。我看到，如果我没有启用 gps，它会从网络获取更新，并且当它启用时，它会从 gps 获取更新。如果网络和 gps 提供商自行切换，设置它们发送更新有什么意义？

2.  第三个参数是如何`requestlocationUpdates`工作的？我的意思是它说它会改变我设置的距离，但是它如何检测到我已经移动了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:01:57.673

You can try with following code

```
Criteria criteria = new Criteria();
String provider = locationManager.getBestProvider(criteria, false);
Location location = locationManager.getLastKnownLocation(provider); 
```

where Criteria is a class indicating the application criteria for selecting a location provider. Providers maybe ordered according to accuracy, power usage, ability to report altitude, speed, and bearing, and monetary cost.

then

```
locationManager.requestLocationUpdates(provider,0, 0, new MyLocationListener()); 
```

Where second and third parameter are use to so that you can control the frequency at which your listener receives updates with the second and third parameter—the second is the minimum time interval between notifications and the third is the minimum change in distance between notifications—setting both to zero requests location notifications as frequently as possible.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-18T07:46:01.307

1.  请记住，一旦您 requestLocationUpdates(...) 意味着 onLocationChanged(...) 将在启用指定提供程序时触发，您将在 onLocationChanged 方法中获得最新坐标。在检测到任何新位置之前，系统将使用默认位置，即缓存位置或 LastKnownLocation。

2.  当然，当您当前的位置与之前的位置（缓存位置）不同时，系统会认为您正在移动。

# dynamics-crm-2011 - 从相关实体创建记录时出错

> ID：15360151
> 
> 赞同：1
> 
> 时间：2013-03-12T11:39:24.787
> 
> 标签：dynamics-crm-2011

我有一个与帐户相关的自定义实体。当我从 Account 创建自定义实体的记录时，会显示一条错误消息：

**错误**
发生错误....
如果这种情况继续存在，请联系您的系统管理员。

从实体本身创建记录没有问题。
如果记录是重复的，则在自定义实体的保存时注册了一个 JavaScript 函数，该函数会阻止保存。

为什么无法从相关帐户创建/更新？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:28:10.143

虽然我同意@PedroAzevedo 开启跟踪的想法，但我不同意他的方法，因为 CRM 诊断工具要容易得多： [http ://crmdiagtool2011.codeplex.com](http://crmdiagtool2011.codeplex.com)

我还会检查在帐户实体更新时注册的插件。它可能在那里失败，这可以解释为什么它确实适用于实体表单本身......

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:57:30.093

激活[跟踪](http://exploringxrm.wordpress.com/2012/01/12/enabling-trace-in-microsoft-dynamics-crm-2011/)并查看完整的错误描述。您可以检查的另一件事是安全角色，如果您在 Account 具有操作 AppendTo 的权限。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T14:03:17.127

问题是 IE 10。我昨晚安装了 Windows 8，但尚未安装更新汇总 12。
当我尝试将联系人添加到帐户时，也会发生同样的错误。

# c++ - 奇怪的条件语法

> ID：15360153
> 
> 赞同：2
> 
> 时间：2013-03-12T11:39:25.390
> 
> 标签：c++, syntax, for-loop, conditional-statements

我遇到了以下`for`循环，情况非常不寻常

```
int main( int argc, const char* argv[] ) {
    for ( int i = 0 ; i < ( 10, 20 ) ; i++ ) {
        cout << i << endl;
    }
} 
```

此源代码编译成功。`i`它使用从 0 到 19 的值执行循环（`10`表达式中的`(10, 20)`似乎对迭代次数没有影响）。

我的问题：
这个条件语法是什么？为什么它不会导致编译错误？

**编辑：**
更大的图景：这个问题始于一个错误，原始条件应该是`i < std::min( <expr A>, <expr B> )`，由于某种原因我省略了`std::min`.

所以，我想知道为什么首先要编译代码。现在我看到这个错误是一个合法的（尽管没用的）语法。

谢谢！

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T11:42:07.327

It is the `comma operator`. It evaluates both sides of the expression, and returns the right one.

So, expression `(10, 20)` does nothing, but returns '20'.

See also

*   [Uses of C comma operator](https://stackoverflow.com/questions/1613230/uses-of-c-comma-operator).
*   [http://en.wikipedia.org/wiki/Comma_operator](http://en.wikipedia.org/wiki/Comma_operator)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T11:42:10.913

`(10, 20)`表示计算整数 10，然后计算 20，然后返回 20（最右边）。所以它只是意味着20。

逗号运算符在循环中通常很有用`for`，因为它允许诸如`x = 0, y = 1`（即在一个表达式中进行两个赋值）之类的事情，但在这里它是无用的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:45:02.643

`,`c++ 中的运算符作为二元运算符工作，它检查第一个值，丢弃它并返回下一个值。简而言之。

`for(int i=0;i<(10,20);i++)`将等于`for(int i=0;i<20;i++)`

# asp.net - 将 Web 服务引用添加到 ASP.NET 网站？

> ID：15360161
> 
> 赞同：1
> 
> 时间：2013-03-12T11:39:38.440
> 
> 标签：asp.net, webservice-client

我想在我的 ASP.NET 网站中添加对 wsdl Web 服务的服务引用。在 Visual Studio 中，我右键单击项目，然后添加服务引用。然后它创建了 *App_WebReferences* 文件夹，其中包含一些文件，并在我的 web.config 中添加了一些新内容。

通过复制新文件、App_WebReferences 文件夹和更改的 web.config 将更改移动到测试服务器后，服务器告诉我我缺少 Web 服务的引用。我认为它应该在 web.config 中，或者 ASP.NET 应该在 App_WebReferences 文件夹中找到它。

我错过了一些明显的东西，但我不知道是什么。我错过了什么，我该怎么做才能让我的 Web 服务引用在我的测试服务器上工作？

它在我的本地机器上运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:18:51.830

这在本地工作正常吗？您需要确保将服务导入可能正在使用它的任何类（或者如果您在 C# 中执行此操作，则使用 Using）。另外，您是从 PC 上的项目中导入的服务吗？如果是这样，您还需要将其发布到测试服务器。

# ruby-on-rails - 尝试在 rails 3.2 中实现编辑时出错

> ID：15360163
> 
> 赞同：0
> 
> 时间：2013-03-12T11:39:39.923
> 
> 标签：ruby-on-rails, ruby-on-rails-3, html, ruby-on-rails-3.2

我正在尝试在我的项目中编辑一个名为 categories 的视图，但是在尝试这样做时似乎遇到了一个非常奇怪的错误。

显示的错误如下：-

```
 ActiveModel::MassAssignmentSecurity::Error in CategoriesController#update

    Can't mass-assign protected attributes: id, name, parent_cat_id

Parameters:

{"utf8"=>"✓",
 "_method"=>"put",
 "authenticity_token"=>"RaQQRvJRRmjg0HAy3utlrD2wKAvYXbtNC2hjR4JHpXs=",
 "category"=>{"id"=>"3",
 "name"=>"Non-Fictional",
 "parent_cat_id"=>"0"},
 "commit"=>"Update",
 "id"=>"3"} 
```

我的类别表如下：-

```
id serial NOT NULL,
  name character varying(255),
  parent_cat_id integer DEFAULT 0,
  deleted integer NOT NULL DEFAULT 0,
  CONSTRAINT categories_pkey PRIMARY KEY (id) 
```

我的类别模型文件如下：-

```
class Category < ActiveRecord::Base

    attr_accessible :name, :parent_cat_id

    # ------- ASSOCIATIONS -----------

    has_many :books

    belongs_to :category, :foreign_key => 'parent_cat_id'
end 
```

谁能帮我解决这个问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:44:48.230

添加`Category model`应该批量分配的字段（id，name，parent_cat_id） -

```
class Category < ActiveRecord::Base
  attr_accessible :name, :parent_cat_id, :id
    # ------- ASSOCIATIONS -----------
  has_many :books
  belongs_to :category, :foreign_key => 'parent_cat_id'
end 
```

# java - 将字符串数组返回给方法并打印返回的数组

> ID：15360170
> 
> 赞同：-1
> 
> 时间：2013-03-12T11:40:15.330
> 
> 标签：java, arrays

如何`string[]`从方法返回 a：

```
public String[] demo
{
  String[] xs = new String {"a","b","c","d"};
  String[] ret = new String[4];
  ret[0]=xs[0];
  ret[1]=xs[1];
  ret[2]=xs[2];
  ret[3]=xs[3];

  retrun ret;
} 
```

这是对的吗，因为我试过了，它没有用。如何在 main 方法中打印这个返回的字符串数组。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-12T11:42:09.700

Your code won't compile. It suffers from many problems (including syntax problems).

You have syntax errors - `retrun` should be `return`.

After `demo` you should have parenthesis (empty if you don't need parameters)

Plus, `String[] xs = new String {"a","b","c","d"};`

should be:

`String[] xs = new String[] {"a","b","c","d"};`

Your code should look something like this:

```
public String[] demo()  //Added ()
{
     String[] xs = new String[] {"a","b","c","d"}; //added []
     String[] ret = new String[4];
     ret[0]=xs[0];
     ret[1]=xs[1];
     ret[2]=xs[2];
     ret[3]=xs[3];
     return ret;
} 
```

Put it together:

```
public static void main(String args[]) 
{
    String[] res = demo();
    for(String str : res)
        System.out.println(str);  //Will print the strings in the array that
}                                 //was returned from the method demo()

public static String[] demo() //for the sake of example, I made it static.
{
     String[] xs = new String[] {"a","b","c","d"};
     String[] ret = new String[4];
     ret[0]=xs[0];
     ret[1]=xs[1];
     ret[2]=xs[2];
     ret[3]=xs[3];
     return ret;
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:44:18.187

try this:

```
//... in main
String [] strArr = demo();
for ( int i = 0; i < strArr.length; i++) {
    System.out.println(strArr[i]);
}

//... demo method
public static String[] demo()
{
    String[] xs = new String [] {"a","b","c","d"};
    return xs;
} 
```

# javascript - 集合视图内的backbone.js集合视图

> ID：15360174
> 
> 赞同：0
> 
> 时间：2013-03-12T11:40:25.397
> 
> 标签：javascript, jquery, backbone.js, underscore.js

我有一个条目表（=集合），其中包含列 -**活动、名称、费率、小时数**

现在**活动**是一个带有选项的选择框（=另一个集合？），此外，应该从当前选定选项的属性中复制速率。

如何将这些选项注入（？）第一个集合的模板？特别是当第一个集合的渲染需要来自另一个集合的属性（速率）时。

我也不想在每个里面都有每个，因为这些选项总是相同的，并且可以稍后使用 javascript 设置所选参数。

// 编辑实际上并不介意从选择框复制费率的需要，在我开始尝试将其转换为主干之前，我必须这样做

另一方面，我仍然需要它来改变..

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T16:03:47.837

这是您可以尝试的东西。我仍然不是 100% 了解您的目标是什么，但我感觉您正试图以比必要的复杂得多的角度解决问题。

**看法：**

```
var EntryView = Backbone.View.extend({
  /** Get the values from the view elements. */
  serialize: function() {
    return {
      activity: this.$('.activity :selected').val(),
      person: this.$('.person :selected').val(),
      budget: this.$('.budget').val()
    }
  },
  events:{
      'change .test': 'changeActivity'
    },
  changeActivity: function(ev) {
     /** Event is triggered when any of the select element changes. */
     var entry = this.serialize();
     console.log(entry);
  }, ... 
```

在您的模板上，我在每个元素上添加了一个额外的类以将它们彼此区分开来。

**模板：**

```
<script type="text/template" id="tpl_entries">
<% _.each(entries, function(entry) { %>
   <tr>
    <td>
    <select class="activity test">                              
       <% _.each(activities, function(activity) { %>                                
          <option><%= activity.get('name') %></option>
       <% }); %>
    </select>
    </td>
        <td>
    <select class="person test">
      <% _.each(people, function(person) { %>
           <option><%= person.get('name') %></option>
      <% }); %>
    </select>
    </td>
        <td>
<div class="input-append">
    <input class="budget input-small" type="text" 
                   value="<%= entry.get('budgeted') %>" /> ... 
```

希望这有助于并引导您朝着正确的方向前进。

# statistics - 从 .exe 文件中检索数据

> ID：15360175
> 
> 赞同：0
> 
> 时间：2013-03-12T11:40:26.297
> 
> 标签：statistics, exe, extract

我如何与游戏（“Quake II”）通信，并从中检索/提取数据？

我有这个旧游戏（ActionQuake II），它是 Quake2 的一个模组。每当在游戏中执行一个动作时，它都会在一个命令提示符中写入每笔交易——就像反恐精英一样。（我不确定，如果这可能是解决方案......）

我想这些事务可以从 .EXE 文件中检索到。

有没有办法检索、处理甚至搜索 .EXE 文件（实时）？我知道这是可能的，因为在某些 IRC 频道中是机器人，它们会在频道上写入每笔交易。许多主页也在这样做 - 为用户提供服务器列表，其中包含以下详细信息：得分、死亡、玩家等 ( [http://www.gametracker.com](http://www.gametracker.com) )，但他们是如何做到的？

我想将这些数据用于统计和进度概览。
有什么帮助吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-06T13:17:08.807

如果有某种服务器，您可以尝试使用 Wireshark 等软件嗅探网络数据包。

# android - 考虑 TextView 是可选择的

> ID：15360177
> 
> 赞同：4
> 
> 时间：2013-03-12T11:40:27.690
> 
> 标签：android, android-lint

`TextView`我的 XML 中每个带有 ID 的警告（来自 Lint）都有以下警告。

> 考虑通过指定 android:textIsSelectable="true" 使文本值可选择

谁能解释一下为什么突然（从 ADT 21.1）发生？为什么 Lint 认为我希望每个`TextView`都可以选择？

编辑：我知道它可以被忽略，但我不认为这是一个解决方案。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T12:56:42.397

如果您将其`TextView`设为可选，则用户可以在其上使用复制/粘贴。显然，“lint”开发人员认为这是一件好事，所以如果你不这样做，他们会警告你。有很多 lint 警告只是“建议”，这就是为什么有简单的方法可以关闭这些警告的原因。

# asp.net-mvc-3 - 两个域，一个应用在 IIS 和 Windows 身份验证

> ID：15360178
> 
> 赞同：0
> 
> 时间：2013-03-12T11:40:31.230
> 
> 标签：asp.net-mvc-3, iis-7, windows-authentication

这是一个场景： - 两个域 DA 和 DB - DA 中的一个 IIS 7.0，带有 MVC 应用程序，它具有 Windows 身份验证。

我的目标是配置 DB 或者 DA，让 DB 中的用户也可以在 MVC App 上使用 Windows 身份验证。但我不想让他们访问 DA 资源（例如共享文件夹、文件等）。

感谢所有帮助

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T20:59:43.713

问题基本解决了。

我已经在域数据库中安装的 IIS 上设置了镜像 MVC 应用程序。此应用程序适用于域 DA 中的主数据库。对我来说，这样做更容易:)

# android - 无法录制音频

> ID：15360179
> 
> 赞同：3
> 
> 时间：2013-03-12T11:40:32.603
> 
> 标签：android, audio

以下是我在应用程序中录制音频的代码

```
public class AudioRecordActivity extends Activity
  {
private static final String LOG_TAG = "AudioRecordTest";
private static String mFileName = null;

private RecordButton mRecordButton = null;
private MediaRecorder mRecorder = null;

private PlayButton   mPlayButton = null;
private MediaPlayer   mPlayer = null;
static int i=1;

private void onRecord(boolean start) {
    if (start) {
       i++;
       String name="AudioRecord"+i;
        startRecording(name);
    } else {
        stopRecording();
    }
}

private void onPlay(boolean start) {
    if (start) {
        startPlaying();
    } else {
        stopPlaying();
    }
}

private void startPlaying() {
    mPlayer = new MediaPlayer();
    try {
        mPlayer.setDataSource(mFileName);
        mPlayer.prepare();
        mPlayer.start();
    } catch (IOException e) {
        Log.e(LOG_TAG, "prepare() failed");
    }
}

private void stopPlaying() {
    mPlayer.release();
    mPlayer = null;
}

private void startRecording(String fileName) {

     File storageDir = new File(Environment
             .getExternalStorageDirectory(), "/audio/");
     storageDir.mkdir();

        mRecorder = new MediaRecorder();
        ContentValues values = new ContentValues(3);
        values.put(MediaStore.MediaColumns.TITLE, fileName);
        mRecorder.setAudioSource(MediaRecorder.AudioSource.MIC);
        mRecorder.setOutputFormat(MediaRecorder.OutputFormat.MPEG_4);
        mRecorder.setAudioEncoder(MediaRecorder.AudioEncoder.DEFAULT);
        mRecorder.setOutputFile("/sdcard/sound/" + fileName);
        try {
            mRecorder.prepare();
        } catch (Exception e){
            e.printStackTrace();
        }

        final ProgressDialog mProgressDialog = new ProgressDialog(AudioRecordActivity.this);
        mProgressDialog.setTitle("Recording");
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        mProgressDialog.setButton("Stop recording", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int whichButton) {
            mProgressDialog.dismiss();
            mRecorder.stop();
            mRecorder.release();
            }
        });

        mProgressDialog.setOnCancelListener(new DialogInterface.OnCancelListener(){
            public void onCancel(DialogInterface p1) {
                mRecorder.stop();
                mRecorder.release();
            }
        });
        mRecorder.start();
        mProgressDialog.show();
    }

private void stopRecording() {
    mRecorder.stop();
    mRecorder.release();
    mRecorder = null;
}

class RecordButton extends Button {
    boolean mStartRecording = true;

    OnClickListener clicker = new OnClickListener() {
        public void onClick(View v) {
            onRecord(mStartRecording);
            if (mStartRecording) {
                setText("Stop recording");
            } else {
                setText("Start recording");
            }
            mStartRecording = !mStartRecording;
        }
    };

    public RecordButton(Context ctx) {
        super(ctx);
        setText("Start recording");
        setOnClickListener(clicker);
    }
}

class PlayButton extends Button {
    boolean mStartPlaying = true;

    OnClickListener clicker = new OnClickListener() {
        public void onClick(View v) {
            onPlay(mStartPlaying);
            if (mStartPlaying) {
                setText("Stop playing");
            } else {
                setText("Start playing");
            }
            mStartPlaying = !mStartPlaying;
        }
    };

    public PlayButton(Context ctx) {
        super(ctx);
        setText("Start playing");
        setOnClickListener(clicker);
    }
}

public void AudioRecordTest() {
    mFileName = Environment.getExternalStorageDirectory().getAbsolutePath();
    mFileName += "/audiorecordtest.3gp";
}

@Override
public void onCreate(Bundle icicle) {
    super.onCreate(icicle);

    LinearLayout ll = new LinearLayout(this);
    mRecordButton = new RecordButton(this);
    ll.addView(mRecordButton,
        new LinearLayout.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT,
            0));
    mPlayButton = new PlayButton(this);
    ll.addView(mPlayButton,
        new LinearLayout.LayoutParams(
            ViewGroup.LayoutParams.WRAP_CONTENT,
            ViewGroup.LayoutParams.WRAP_CONTENT,
            0));
    setContentView(ll);
}

@Override
public void onPause() {
    super.onPause();
    if (mRecorder != null) {
        mRecorder.release();
        mRecorder = null;
    }

    if (mPlayer != null) {
        mPlayer.release();
        mPlayer = null;
    }
} 
```

}

我得到的错误如下：

```
03-12 16:58:22.847: E/AndroidRuntime(459): FATAL EXCEPTION: main
03-12 16:58:22.847: E/AndroidRuntime(459): java.lang.IllegalStateException
03-12 16:58:22.847: E/AndroidRuntime(459):  at android.media.MediaRecorder.start(Native Method)
03-12 16:58:22.847: E/AndroidRuntime(459):  at org.audio.AudioRecordActivity.startRecording(AudioRecordActivity.java:105)
03-12 16:58:22.847: E/AndroidRuntime(459):  at org.audio.AudioRecordActivity.onRecord(AudioRecordActivity.java:39)
03-12 16:58:22.847: E/AndroidRuntime(459):  at org.audio.AudioRecordActivity.access$0(AudioRecordActivity.java:35)
03-12 16:58:22.847: E/AndroidRuntime(459):  at org.audio.AudioRecordActivity$RecordButton$1.onClick(AudioRecordActivity.java:120)
03-12 16:58:22.847: E/AndroidRuntime(459):  at android.view.View.performClick(View.java:2485)
03-12 16:58:22.847: E/AndroidRuntime(459):  at android.view.View$PerformClick.run(View.java:9080)
03-12 16:58:22.847: E/AndroidRuntime(459):  at android.os.Handler.handleCallback(Handler.java:587)
03-12 16:58:22.847: E/AndroidRuntime(459):  at android.os.Handler.dispatchMessage(Handler.java:92)
03-12 16:58:22.847: E/AndroidRuntime(459):  at android.os.Looper.loop(Looper.java:123)
03-12 16:58:22.847: E/AndroidRuntime(459):  at android.app.ActivityThread.main(ActivityThread.java:3683)
03-12 16:58:22.847: E/AndroidRuntime(459):  at java.lang.reflect.Method.invokeNative(Native Method)
03-12 16:58:22.847: E/AndroidRuntime(459):  at java.lang.reflect.Method.invoke(Method.java:507)
03-12 16:58:22.847: E/AndroidRuntime(459):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:839)
03-12 16:58:22.847: E/AndroidRuntime(459):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:597)
03-12 16:58:22.847: E/AndroidRuntime(459):  at dalvik.system.NativeStart.main(Native Method) 
```

请查看代码。我没有得到问题。提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:48:33.683

仔细看看下面的 LogCat：

> 03-12 16:58:22.847: E/AndroidRuntime(459): java.lang.IllegalStateException
> 
> 03-12 16:58:22.847：E/AndroidRuntime（459）：在 android.media.MediaRecorder.start（本机方法）

从上面的 logcat 中，我们意识到 [`start()`](http://developer.android.com/reference/android/media/MediaRecorder.html#start%28%29)抛出了*IllegalStateException*。考虑`MediaRecorder`需要注册以下内容（按顺序）：

```
MediaRecorder recorder = new MediaRecorder();
recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);
recorder.setOutputFile(PATH_NAME);
recorder.prepare(); // not properly processed
recorder.start();   // IllegalStateException occurred 
```

所以，

## 问题：

我们知道[`prepare()`](http://developer.android.com/reference/android/media/MediaRecorder.html#prepare%28%29)要么（1）没有被调用，要么（2）被调用并且有问题。

## 我的建议：

1.  `start()`如下放置`prepare()`：

    ```
    try {
        mRecorder.prepare();
        mRecorder.start();      
    } catch (Exception e) {
        e.printStackTrace();
    } 
    ```

2.  检查您从 LogCat 获得的新警告和问题。可能的警告/问题是：

    (i) 由之前`set`的 s 引起的问题（例如不兼容/无效的输出格式、AudioSource 的权限等）。

    (ii) 由之前`set`的 s 引起的异常（例如*FileNotFoundException*等）。

3.  确认`prepare()`清楚地解决。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T05:01:16.940

感谢您的帮助..完成更正..

```
protected void startRecording() {
    // TODO Auto-generated method stub
    i++;
     mFileName = Environment.getExternalStorageDirectory().getAbsolutePath();
     mFileName += "/audiorecordtest"+i+".3gp";
    recorder = new MediaRecorder();

    recorder.setAudioSource(MediaRecorder.AudioSource.MIC);
    recorder.setOutputFormat(MediaRecorder.OutputFormat.THREE_GPP);
    recorder.setOutputFile(mFileName);
    recorder.setAudioEncoder(MediaRecorder.AudioEncoder.AMR_NB);

      try {
        recorder.prepare();
    } catch (IllegalStateException e) {
        // TODO Auto-generated catch block
        Toast.makeText(getApplicationContext(), "IllegalStateException called", Toast.LENGTH_LONG).show();

    } catch (IOException e) {
        // TODO Auto-generated catch block
        Toast.makeText(getApplicationContext(), "prepare() failed", Toast.LENGTH_LONG).show();

    }

      recorder.start();
}

 private void stopRecording() {
     recorder.stop();
     recorder.release();
     recorder = null;
    } 
```

# javascript - 创建类的函数

> ID：15360181
> 
> 赞同：1
> 
> 时间：2013-03-12T11:40:34.217
> 
> 标签：javascript, class, object

我正在尝试创建一种强大的方式来“动态”定义类，但我害怕在整个过程中增加不必要的开销。

这是我的创建代码：

```
function Class(cons,proto) {
    var keys = Object.keys(cons);

    function _class() {
        var i = keys.length;
        while( i-- ) {
            this[ keys[i] ] = arguments[i] || cons[keys[i]];
        }
    }

    if(proto) {
        var f;
        for (f in proto) {
            _class.prototype[f] = proto[ f ];
        }
    }

    return _class
} 
```

这就是我想如何使用它

```
var car = Class({
                "name": "A car",
                "power": 900
            },
            {
                "honk": function() { alert("honk!") } 
            });

var bmw = new car("BMW", 500);
bmw.honk();     // -> honk!
console.log( bmw.name, bmw.power );     // -> BMW 500

var generic = new car();
generic.honk = function() { alert("custom honk") };
generic.honk();     // -> custom honk!

alert( bmw.honk === car.prototype.honk );   // -> true
alert( generic.honk === car.prototype.honk );       // -> false

console.log( generic.name, generic.power );     // -> A car 900 
```

我做了什么不必要的事情吗？你有什么改进的建议吗？请发表你的意见

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:08:21.710

> 我做了什么不必要的事情吗？

我看不到，但是您需要向我们展示一个实际用例而不是演示示例:-)

> 你有什么改进的建议吗？

循环`Object.keys(cons)`并使用`i`其他任何东西，但`keys[i]`容易出错，因为[`Object.keys`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/keys)不保证任何顺序。它也可能发生`bmw.power`is`"BMW"`和`bmw.name`is `500`。

# bash - 长命令的快捷方式

> ID：15360184
> 
> 赞同：0
> 
> 时间：2013-03-12T11:40:38.970
> 
> 标签：bash

### 问题

我经常不得不与 github 交互，这常常让我写下如下一行：

```
$ git clone git@github.com:<developer>/<project> <foldername> <maybe_other_args> 
```

现在我想将其最小化为以下内容（`ghc`=github克隆）：

```
$ ghc <developer>/<project> <foldername> <maybe_other_args> 
```

### 尝试过的解决方案

我的第一种方法是一个函数

```
ghc () {
    if [ -z "$1" ]; then
        echo "need to set param: <developer>/<project>"
    else
        git clone git@github.com:$1
    fi
} 
```

我既不喜欢这种方法的冗长，也不喜欢`git-clone`.

我的第二种方法是别名：

```
alias ghc="git clone git@github.com:" 
```

但是这个版本根本不起作用，因为展开后`git@github.com:`and之间有一个空格字符`<developer>/<project>`。不过，我喜欢这种解决方案的简短性。**如何使用 bash 最小化命令，最好是一行？**

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:55:10.810

第一种方法非常灵活。你只需要学会使用`"$@"`这意味着所有的论点都被引用为单独的词。

第一种情况的冗长主要是由错误检查引起的。没有它，它只是：

```
ghc() { git clone "git@github.com:$@"; } 
```

作为（非工作）别名仅多了 5 个字符。这会将第一个参数与`git@github.com:`前缀结合起来，并按照您的需要分别传递所有其他参数。

我不认为在编写时冗长是一个`.profile`问题`.bashrc`。

请注意，在所有其他 shell（如 zsh，还有 dash）中，函数体可以是任何命令，而不仅仅是复合命令，因此该函数与别名一样长：

```
ghc() git clone "git@github.com:$@ 
```

不幸的是*bash*不接受这一点。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:41:07.173

错误检查可以在`bash`. *但是函数的定义*有多冗长真的重要吗，因为您可能会将它添加到配置文件中一次而不再查看它？

```
ghc () {
    : ${1?need to set param: <developer>/<project>}
    git clone git@github.com:"$@"        
} 
```

一条线：

```
ghc () { git clone git@github.com:"${@?need to set param: <developer>/<project>}"; } 
```

或没有任何错误

# android - 无法在 Windows 上安装 sphinxbase（离线语音识别器）

> ID：15360187
> 
> 赞同：3
> 
> 时间：2013-03-12T11:40:52.257
> 
> 标签：android, offline, voice-recognition

我正在尝试在 android 上开发离线语音识别器。经过几次搜索，我发现 CMU Sphinx 用于此目的。

我正在尝试在 Windows 上安装它，以下是从它自己的网页引用的说明：

```
 Windows

  In MS Windows (TM), under MS Visual Studio 2008 (or newer - we test with Visual C++ 2008 Express):

     -load sphinxbase.sln located in sphinxbase directory
     -compile all the projects in SphinxBase (from sphinxbase.sln)
     -load pocketsphinx.sln in pocketsphinx directory
     -compile all the projects in PocketSphinx 
```

问题是，哪里都没有`sphinxbase.sln`！我理解错了吗？我不应该看到一个名为`sphinxbase.sln`并执行它的文件吗？或者我应该怎么做？步骤是什么？

这个问题可能会对安装 Sphinx 也有问题的其他人有所帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T19:23:57.247

您**无需**在 Windows 上编译 sphinxbase 即可为 Android 构建应用程序。你只需要解开它们。您可以按照此处的说明编译示例应用程序：

[http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/](http://cmusphinx.sourceforge.net/2011/05/building-pocketsphinx-on-android/)

要在 Windows 上使用 spixnbase，您可以在此处下载预编译库：

[http://sourceforge.net/projects/cmusphinx/files/sphinxbase/0.8/sphinxbase-0.8-win32.zip](http://sourceforge.net/projects/cmusphinx/files/sphinxbase/0.8/sphinxbase-0.8-win32.zip)

要从源代码编译 Sphinxbase，请在此处下载源代码

[http://sourceforge.net/projects/cmusphinx/files/sphinxbase/0.8/sphinxbase-0.8.tar.gz](http://sourceforge.net/projects/cmusphinx/files/sphinxbase/0.8/sphinxbase-0.8.tar.gz)

并根据说明编译它们。解压源代码后，顶部文件夹中的 sphinxbase.sln 文件。可能您需要在资源管理器中启用扩展才能看到它。

# ogre3d - Ogre3D+CEGUI 鼠标位置图标未从屏幕上清除

> ID：15360195
> 
> 赞同：0
> 
> 时间：2013-03-12T11:41:17.107
> 
> 标签：ogre3d, cegui

在我们的项目中，我们正在开发基于插件的架构。

每个游戏都设置为一个单独的插件，负责建立正确的环境（*SceneManager、SceneNodes、Entities、Lights、...Cameras、..*）

在我们上一个使用充电器场景的游戏中，每个场景都设置为一个单独的文件（格式 .dotscene），其中包含所有资源定义的图形。

在这个视频中 CEGUI 配置为 GUI，这可以完美地工作。但是出去加载另一个游戏我们发现 CEGUI 的行为很奇怪。

光标位置更新正常但上面位置的图标不清晰屏幕，这导致它在屏幕上累积

[场景一] [https://www.dropbox.com/s/6kuw0yat7r4s2as/ErrorCEGUI.png](https://www.dropbox.com/s/6kuw0yat7r4s2as/ErrorCEGUI.png)

任何想法的原因以及如何解决它？

非常感谢，米格尔

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-19T07:36:15.623

解决了！

对于一些内部错误，我们正在创建额外的摄像头，CEGUI 无法正常工作。移除这些摄像头并留在 1 个摄像头上并工作！

# java - NullPointerException at: int start = Math.max(chat.first, chat.last-10);

> ID：15360197
> 
> 赞同：-1
> 
> 时间：2013-03-12T11:41:25.450
> 
> 标签：java

我在 JSP 中有以下 Java 代码：

```
21:     ChatState chat = (ChatState)application.getAttribute(ChatConstants.APP_STATE);
22:     // assert(chat != null);
23: 
24:     int start = Math.max(chat.first, chat.last-10);
25:     for (int i=start; i<chat.last; i++) {
26:     out.println(i + "User Says: " + chat.chat.get(i));
27:     } 
```

第 24 行抛出以下异常：

```
java.lang.NullPointerException
    org.apache.jsp.chat_jsp._jspService(chat_jsp.java:77)
    org.apache.jasper.runtime.HttpJspBase.service(HttpJspBase.java:70)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717)
    org.apache.jasper.servlet.JspServletWrapper.service(JspServletWrapper.java:374)
    org.apache.jasper.servlet.JspServlet.serviceJspFile(JspServlet.java:342)
    org.apache.jasper.servlet.JspServlet.service(JspServlet.java:267)
    javax.servlet.http.HttpServlet.service(HttpServlet.java:717) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:47:55.797

您的聊天对象在此处为**空**。

请检查

1.web.xml 文件，如果应用程序状态变量在那里初始化

或者

2.你写的位置——

```
application.setAttribute(/*some code snippet*/) 
```

或者

3.您可以检查这些属性是否是从任何属性文件中设置的

可能这些检查应该为您提供指向问题的指针。

# c++ - 如何同步一个弹出窗口总是在另一个弹出窗口之上？

> ID：15360202
> 
> 赞同：1
> 
> 时间：2013-03-12T11:41:41.417
> 
> 标签：c++, windows, winapi

如何同步一个弹出窗口总是在另一个弹出窗口之上？两个窗口都在同一个进程中，但在不同的线程中。系统对所有者和拥有的窗口使用类似的方法，但这些窗口必须属于同一个线程。就我而言，一个进程中有两个不同的 UI 线程，并且在这些不同的线程中创建窗口。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:22:14.380

> 系统对所有者和拥有的窗口使用类似的方法，但这些窗口必须属于同一个线程。

这种说法是不正确的。您确实可以使窗口的所有者成为来自不同进程的窗口。这是做你想做的事的正确方法。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:46:34.173

使用[`SetWindowPos`](http://msdn.microsoft.com/en-us/library/windows/desktop/ms633545%28v=vs.85%29.aspx)：

```
SetWindowPos(window_1, window_2, 0, 0, 0, 0, SWP_NOMOVE|SWP_NOSIZE); 
```

# c# - Moq returning different object from Setup

> ID：15360207
> 
> 赞同：0
> 
> 时间：2013-03-12T11:41:53.113
> 
> 标签：c#, moq

Can you please tell the scenario when the object returned could be different from the setup object?

The `Object Id` set during debugging in `Setup` is different when src code is executed.

```
interface IBaseClass
{
    IFactory aFactory;
}

class Point
{
    Point(int x, int y)
    {
        this.x = x;
        this.y = y;
    }

    int x;
    int y;
}

interface Factory
{
    public AnObject create(string a, Point pt);
} 
```

Test Code

```
var anObjectMock = new Mock<AnObject> { DefaultValue = DefaultValue.Mock };

var sMatcher = It.Is<string>(s => s.Equals("aString"));
var ptMatcher = It.Is<Point>(p => (p.x == CONST_X && p.y == CONST_Y));

var FactoryMock = Mock.Get<IFactory>(IBaseClassMock.Object.Factory);
FactoryMock.Setup(f => f.create(sMatcher, ptMatcher)).Returns(anObjectMock.Object); // Say ObjectId is #1 
```

SRC

```
Object obj = BasicImaging.Factory.create("aString", new Point(CONST_X, CONST_Y)); 
// Getting no ObjectId 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:45:33.657

是`BasicImaging.Factory`实际的模拟 ( `IBaseClassMock.Factory`) 吗？我想不是。

您需要将您的模拟注入`BasicImaging.Factory`其中，以便它使用您的模拟而不是实际代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:45:56.480

而不是`BasicImaging.Factory`你应该使用`IBaseClassMock.Object.Factory`（即你设置的模拟）。

# java - construct a new method printList which displays the contents of a LinkedList

> ID：15360208
> 
> 赞同：0
> 
> 时间：2013-03-12T11:41:56.087
> 
> 标签：java, arrays, string, list, printing

how to print out this new data structure by constructing a new method printList which displays the contents of a LinkedList aList. **using (print) as a template.**

```
public void actionPerformed(ActionEvent event) {    
    String[] anArray=null;
    if (event.getSource() == reading) {
        String s = txt1.getText();
        String delims = expression.getText(); 
        anArray = s.split(delims);
        result.setText("");
        print(anArray);
    } 
    LinkedList<String> mkList;
    java.util.List<String> aList = new LinkedList<String>();

} // actionPerformed

public LinkedList<String> mkList(String[] sa) {
    LinkedList<String> st = new LinkedList<String>();
    for (int i = 0; i < sa.length && sa[i] != null; i++)
        st.add(sa[i] + "\n");
    return st;
} // mkList

public void print(String[] sa) {  
   for (int i = 0; i < sa.length && sa[i] != null; i++)
        result.append(sa[i] + "\n");
   // Log the results to the terminal
   System.out.println("Input: '" + txt1.getText() + "'");
   System.out.println("Regular Expression: '" + expression.getText() +"'");
   System.out.println("Output:\n" + result.getText());
} // print 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:44:54.610

Simply `System.out.println(aList);`

OR

```
public void printList (LinkedList<String> aList) {
    for(String currentString : aList){
        System.out.println(currentString);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:10:32.803

所有标准 Java 集合都有一个合理的`toString()`实现。通常元素用方括号“[”括起来，元素用逗号分隔。toString() 在每个元素上调用。请参阅[AbstractCollection 源代码](http://grepcode.com/file/repository.grepcode.com/java/root/jdk/openjdk/6-b14/java/util/AbstractCollection.java#430)

如果此表示符合您的需要，则只需使用`toString`. 无需编写代码。

如果您想要自定义表示，则可以使用或编写辅助方法。Guava的[Joiner 类](http://code.google.com/p/guava-libraries/wiki/StringsExplained)非常有用，应该是 JDK 的一部分。您可以将其视为函数式语言中的 reducer，`Iterators.transform()`如果您想对每个元素应用特定操作，还可以添加一个 map 步骤。

显然，仅将 Guava 用于 Joiner 类是没有意义的。您也可以编写自己的方法。使用 AbstractCollection.toString() 或 Joiner.join() 作为参考。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:04:20.570

您也可以使用此解决方案:)

```
public void printList (LinkedList<String> aList) {
    System.out.println(aList.toString().replace("[", "").replace("]", "").replace(",", "\n"););
} 
```

# iphone - UIImagePicker slideshow of images on selection

> ID：15360209
> 
> 赞同：1
> 
> 时间：2013-03-12T11:41:56.690
> 
> 标签：iphone, ios, uiimagepickercontroller, slideshow

Like the Photos App shows, all albums > all photos in a particular album > single photo view,

even I need a similar kind of a view. I have used `UIImagePickerController` and easily go to the second step. However, whenever I select an image, I can not show a slide show kind of a view, as `UIImagePicker` does not give me that.

I made another view controller , just to display these images in a pagenation form.

But, from the delegate method, `didFinishPickingMediaWithInfo`, when an image is selected, I get only that image using:

```
[info objectForKey:UIImagePickerControllerOriginalImage]; 
```

How do I know the images next to this image, and before this image, so that I can create a slide show?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:58:25.323

查看[ALAssetsLibrary](http://developer.apple.com/library/ios/ipad/#documentation/AssetsLibrary/Reference/ALAssetsLibrary_Class/Reference/Reference.html#//apple_ref/doc/uid/TP40009722 "ALA资产库")的文档。要获取照片库中的图像或视频列表，您将使用对象的`enumerateGroupsUsingTypes:usingBlock:failureBlock:`方法`ALAssetsLibrary`。例如，您可以调用此方法，然后当它异步返回图像和视频时，您将为幻灯片视图构建图像数组。

另请查看[此 SO 线程](https://stackoverflow.com/questions/6177606/iphone-get-uiimagepickercontroller-lat-lng)。答案显示了如何从 中获取 ALAsset 对象`UIImagePickerController`，它可以让您找到图像的 URL 和有关它的其他信息。

# android - 如何使用android中另一个复选框的标签值取消选中复选框

> ID：15360212
> 
> 赞同：0
> 
> 时间：2013-03-12T11:41:57.437
> 
> 标签：android, checkbox

我有**许多动态创建的复选框**。

现在我只想**选择其中不超过一个**。当我选择第二个时，第一个应该取消选择。

我不能使用广播组。任何帮助

这是我的代码..我正在动态创建复选框

私有 void createRadioButton() { cb = new CheckBox(fContext);

```
 cb.setTag(id++);
    cb.setOnCheckedChangeListener( new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             int getPosition = (Integer) buttonView.getTag();
             Log.i("comVisa","getPos =="+getPosition);

        }
    });

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:44:50.710

使用单选复选框的一个非常简单的示例。
试试这个[链接](http://www.mrsaqib.com/2011/12/allow-single-selection-on-android-checkbox/)

```
CheckBox myCheckBox[] = new CheckBox[noofCheckBox];
    for (int i=0; i<noofCheckBox; i++) {
        myCheckBox[i] = new myCheckBox(this);
        myCheckBox[i].setId(i+1);
        myCheckBox[i].setOnCheckedChangeListener( new OnCheckedChangeListener() {

        @Override
        public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
             int getPosition = (Integer) buttonView.getTag();
             if(myCheckBox[i].getId() == getPosition){
                myCheckBox[i].setChecked(true);
             }else{
               myCheckBox[i].setChecked(false)
             }

        }
    });
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:37:14.920

当像这样检查其他复选框时，您可以保存最后一个选中和取消选中的复选框

在公共区域定义这个

```
HashMap<String, CompoundButton> hash = new HashMap<String, CompoundButton>(); 
```

然后编辑您的代码：

```
cb.setTag(id++);

cb.setOnCheckedChangeListener( new OnCheckedChangeListener() {

@Override
public void onCheckedChanged(CompoundButton buttonView, boolean isChecked) {
     //int getPosition = (Integer) buttonView.getTag();
     if(isChecked){
         if(hash.size()>0){
                hash.get("1").setChecked(false);
             }
             hash.put("1", buttonView);

 }else{
hash.clear();
}
     Log.i("comVisa","getPos =="+getPosition);

}
}); 
```

# asp.net-mvc - Add values to ModelMetadata.AdditionalValues when using EditorFor

> ID：15360213
> 
> 赞同：6
> 
> 时间：2013-03-12T11:41:57.827
> 
> 标签：asp.net-mvc, asp.net-mvc-4

If I have a convention to change the editor and set some values

```
public class MetadataProvider : DataAnnotationsModelMetadataProvider
{
    protected override ModelMetadata GetMetadataForProperty(Func<object> modelAccessor, Type containerType, System.ComponentModel.PropertyDescriptor propertyDescriptor)
    {
        var meta = base.GetMetadataForProperty(modelAccessor, containerType, propertyDescriptor);
        if (IsNumericType(propertyDescriptor.PropertyType))
        {
            meta.TemplateHint = "Number";

            var attr = propertyDescriptor.Attributes.OfType<RangeAttribute>().FirstOrDefault();
            if (attr != null)
            {
                meta.AdditionalValues["min"] = attr.Minimum;
                meta.AdditionalValues["max"] = attr.Maximum;
            }
        }
        return meta;
    }
    //...
} 
```

Then I can get the additional values in the template

```
@{
    var min = ViewData.ModelMetadata.AdditionalValues["min"];
    var max = ViewData.ModelMetadata.AdditionalValues["max"];
} 
```

However, if I use the same template like this

```
@Html.EditorFor(x => x.Number, new { min = 1, max = 10 }) 
```

Then I should get the values like this

```
@{
    var min = ViewData["min"];
    var max = ViewData["max"];
} 
```

Can I somehow merge additionalViewData and ModelMetadata.AdditionalValues so that I could get the values from one place?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-09T23:19:16.540

老实说，我没有尝试查看 AdditionalValues 是否被正确提取，但是在您看来，内置为您提供了什么？

```
 @using System.Web.Mvc

    @{
         var meta = ModelMetadata.FromLambdaExpression(model => model, ViewData);
     } 
```

# algorithm - 如何求和频谱？

> ID：15360214
> 
> 赞同：1
> 
> 时间：2013-03-12T11:41:58.437
> 
> 标签：algorithm, fft, spectrum

例如，我有吉他音符 D 的频谱，我有吉他音符 F 的频谱。如何获得两者的频谱？如何创建和弦谱？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T17:04:13.243

当 FFT 中的数据表示为实部和虚部时（这是 FFT 的通常结果），**只需将两者相加即可**。

添加 FFT 就像添加波形一样，这就是和弦的声音。

如果您的 FFT 数据表示为幅度和相位，则需要在进行加法之前转换回实数和虚数表示。

此外，在评论中，人们建议您可以添加幅度。与添加实际波形（如演奏实际和弦）或 FFT 相比，这样做的结果将是一个非常不同的波形，但其背后的想法是耳朵对相位完全不敏感。我不认为这是真的，而且它并不比直接添加 FFT 更容易，那么为什么要进行这种近似呢？我能看到的唯一原因是你是否真的只有光谱（通常意味着 FFT 幅度），但如果你真的有 FFT，我只会添加它们。如果您确实添加了光谱，请确保您看的不是正方形（通常是*功率谱*的意思）或对数等，而是实际的幅度。

# ios - How to scroll two view simultaneously in ios?

> ID：15360216
> 
> 赞同：1
> 
> 时间：2013-03-12T11:41:59.667
> 
> 标签：ios, xcode

I have bar chart view where i can scroll the bars.And I have tableview such that when im scrolling the barchart simultaneously tableview should scroll.Just give idea to do with touch or gesture methods.

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:44:49.897

Refer `scrollToRowAtIndexPath:atScrollPosition:animated` method in [*UITableView*](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html) class reference.

I guess this method will help you for your requirement which you mentioned.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:45:05.937

当您滚动条时，接受事件并调用此方法：

```
[tableView scrollToRowAtIndexPath:[NSIndexPath indexPathForRow:10 inSection:indexPath.section] 
         atScrollPosition:UITableViewScrollPositionMiddle animated:NO]; 
```

# spring - Jasig CAS - 如何在访问不同的应用程序时获取不同的角色？

> ID：15360222
> 
> 赞同：0
> 
> 时间：2013-03-12T11:42:12.897
> 
> 标签：spring, authentication, cas, jasig

每当更改应用程序时，我需要 CAS 从服务器获取一组新角色（该特定应用程序的角色集）。有没有办法这样做？

就像今天一样，它获取第一个应用程序的角色（让我们将其命名为 A），当我访问应用程序时，BI 只能看到应用程序 A 的角色，这给了我一个 403（拒绝访问）错误代码。

前任：

产品 A 具有以下角色：ADMIN、MANAGER 和 STAFF。

产品 B 具有以下角色：ADMIN、BACKOFFICE、FRONTOFFICE。

当我访问产品 A 时，第一个 CAS 检测到用户正在通过产品 A 访问 int 并将其三个角色置于会话中，产品 A 一切正常。

之后我访问产品 B 并且 CAS 看到我有一张有效的票证并授予我对产品 B 的访问权限，但它没有再次获取产品 B 的角色（管理员、后台和前台），而是保留了来自 Produca A 的角色（管理员、经理，员工）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T12:00:19.447

我不确定是否清楚地了解您的需求。不过，您可以管理由 CAS 服务器返回给不同应用程序的属性，因此可以按照以下文档计算适当的角色：[https](https://wiki.jasig.org/display/CASUM/Attributes) ://wiki.jasig.org/display/CASUM/Attributes 。

# highcharts - Highcharts：带有 JSON 数据的风玫瑰图

> ID：15360224
> 
> 赞同：1
> 
> 时间：2013-03-12T11:42:15.643
> 
> 标签：highcharts, label

我正在创建一个新的风玫瑰 highcharts 图表，每列有 37 列有它自己的值（使用 JSON 数据）

但是当我创建windorse图表时，标签不会显示为'S0'，'S32'......

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T12:03:56.043

您已设置`pointStart`and `pointInterval`，这是不必要的。

请参阅固定示例：http: [//jsfiddle.net/JaTjk/5/](http://jsfiddle.net/JaTjk/5/)

# sql - 如何通过 SQL 或 VBA 在 MS Access 中删除列中的重复值

> ID：15360226
> 
> 赞同：0
> 
> 时间：2013-03-12T11:42:27.390
> 
> 标签：sql, vba, ms-access

是否有任何类型的 VBA 或 SQL 可以在此表上运行以删除 MS Access 中的重复 ID？

所以这：

```
ID          data1   data2   data3   
a           1       2       3   
a           8       9       10  
a           15      16      17  
a           22      23      24  
b           1       2       3   
b           8       9       10  
b           15      16      17  
b           22      23      24  
b           29      30      31  
c           1       2       3   
c           8       9       10  
c           15      16      17  
c           22      23      24  
c           29      30      31  
c           36      37      38 
```

看起来像这样：

```
ID      data1   data2   data3   
a        1      2       3   
         8      9       10  
         15     16      17  
         22     23      24  
b        1      2       3   
         8      9       10  
         15     16      17  
         22     23      24  
         29     30      31  
c        1      2       3   
         8      9       10  
         15     16      17  
         22     23      24  
         29     30      31  
         36     37      38 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:50:36.197

您可以将视图用作

```
select distinct First Name , Last Name from T1 
```

并将此查询另存为 V1 然后您现在有了名字和姓氏，没有重复

现在使用代码

```
select * from V1 , T1 where V1.First Name =T1.First Name and V1.Last Name=T1.Last Name 
```

我希望这可以帮助您解决您的问题

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T13:23:32.617

类似下面的内容应该清除`ID`除第一条记录之外的所有列。您可能需要修改`ORDER BY`以包含另一列，以确保此代码以与导出之后相同的顺序运行。

```
Dim strKey as String
Dim iCount as Integer
Dim dbs as DAO.Database
Dim rst as DAO.Recordset

strKey = ""
iCount = 0
Set dbs = CurrentDb
Set rst = dbs.OpenRecordset("SELECT * FROM MYTABLE ORDER BY ID")
If rst.RecordCount > 0
    rst.MoveFirst
    Do Until rst.EOF
         If strKey <> rst!ID Then
             strKey = rst!ID
             iCount = 1
         End If

         If iCount > 1 Then
             rst.Edit
                 rst!ID = ""
             rst.Update
         End If

         iCount = iCount + 1
         rst.MoveNext
    Loop
End If
rst.Close
Set rst = Nothing
dbs.Close
Set dbs = Nothing 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:55:52.250

这将为您提供您的名字、姓氏以及与该名字和姓氏相关的所有数据的总和。

```
SELECT FirstName, LastName, sum(data1), sum(data2), sum(data3)
FROM MyTableName
GROUP BY FirstName, LastName 
```

这将为您提供如下内容：

```
First Name  Last Name   data1   data2   data3   
a           z           46      50       54   
b           x           75      80       85 
```

# qt - QTCreator 捕获所有键盘快捷键

> ID：15360227
> 
> 赞同：0
> 
> 时间：2013-03-12T11:42:38.557
> 
> 标签：qt, keyboard-shortcuts, qt-creator

我不能制作花括号、管道、方括号……它会打开菜单。

菜单 -> 工具 -> 选项 -> 环境选项卡 -> 键盘 -> 搜索 Alt+N/W/F 并且没有为这些组合分配快捷键。为什么它会捕获这些快捷方式？是否可以完全禁用它们？

# c++ - Visual Studio for C++ 中的#pragma 标记等效项？

> ID：15360229
> 
> 赞同：14
> 
> 时间：2013-03-12T11:42:46.013
> 
> 标签：c++, xcode, visual-studio-2010, pragma

**`#pragma mark`**在 XCode 中是否有等效的 Visual Studio 预处理器？这就是我问的原因：

这是在 Windows 上。

![在此处输入图像描述](../Images/4464fe8ced256cafa9fede029ecf26d4.png)

这是在 Mac 上。

![在此处输入图像描述](../Images/5cc3610f0fc1038ce010a38a08a63ef2.png)

我知道**`#region`**在 C# 中，但在 C++ 中没有类似的功能。

**编辑 2013 年 12 月 3 日**：

**`#pragma region`**为代码添加了可折叠性，但没有在 VS 的方法列表中添加部分，这基本上是我正在寻找的。我更喜欢使用函数列表快速跳转到方法，特别是在大型类/文件中滚动代码森林是禁忌的；在这种情况下，“切片”真的很出色。

我真的很期待 Visual Studio 有这种功能，看起来很基本。很确定 Eclipse 也允许您使用 Coffee-Bytes 插件来做到这一点。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T13:22:52.603

您可以使用[`#pragma region`](http://msdn.microsoft.com/en-us/library/b6xkz944%28v=vs.110%29.aspx)：

```
#pragma region foo
// some code ...
#pragma endregion foo 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-02T14:21:47.320

显然，它不在 Visual Studio 2015 中，我认为它不会在不久的将来出现。[[参考]](https://visualstudio.uservoice.com/forums/121579-visual-studio-2015/suggestions/2440105-support-pragma-mark)

> 感谢您抽出宝贵时间分享此建议。这个项目已经存在于几个版本的 Visual Studio 中，我们还没有采取行动。查看 VS “15” 计划，我们不会对这个项目采取行动，所以我们将关闭它。如果该建议仍然相关，请查看是否有其他类似的建议可供您投票，或者打开一个新建议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-01-29T11:14:22.650

这是一种丑陋的解决方案，但总比没有好：D：

```
#if false
int ________visualization________;
#endif 
```

函数列表显示的变量标记与方法不同 + 下划线在视觉上形成一条线，因此您可以轻松找到标记，并且它“很好地”分割了列表。

注意：在 VS Code 中测试，而不是在 Visual Studio 本身中测试，我在您的列表中看不到任何变量，因此如果 VS 列表不显示您需要使用的变量`void ________visualization________(){}`。

# android - 在 MonkeyRunner 中禁用长按

> ID：15360231
> 
> 赞同：0
> 
> 时间：2013-03-12T11:43:00.297
> 
> 标签：android, monkeyrunner

我正在使用 MonkeyRunner Drag 功能，它总是长按而不是 Drag 事件。是否可以禁用长按？有没有其他解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:49:20.940

您可以检查用户是否“是猴子”`android.app.ActivityManager.isUserAMonkey()`

因此，如果用户是猴子，只需禁用您的 OnLongClickListener。

```
if (ActivityManager.isUserAMonkey()){
    myView.setOnLongClickListener(new OnLongClickListener(){
        @Override
        public boolean onLongClick(View v) {
            // TODO Auto-generated method stub
            return false;
        }
    });

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:45:45.937

您可以尝试覆盖该`onLongClick()`方法并将其留空以不执行任何操作。

# perl - perl中系统函数“ping”和Net::Ping模块的区别？

> ID：15360233
> 
> 赞同：2
> 
> 时间：2013-03-12T11:43:07.733
> 
> 标签：perl

据我所知，有两种方法可以通过 perl 找到可 ping 的 ip，它们是

```
 1\. Using system Ping Command.
 2\. Using Net::Ping Module. 
```

我尝试通过以上两种技术调用IP的可ping状态。

我在这些方法中遇到了一个问题，即系统 ping 命令为一个 IP 返回 true。但是，Net::Ping 模块为相同的 IP 返回 false。

我不知道哪一个是正确的。任何人都请建议我更喜欢找到可ping IP的正确方法。我在下面编写了示例代码片段：

```
#!/usr/bin/perl
use strict;
use Net::Ping;

my $ip_address = $ARGV[0];
chomp($ip_address);

#Using Net::Ping Module

my $p = Net::Ping->new();

if ( $p->ping($ip_address) ) {
    print "Step - 1: Success!\n";
}
else {
    print "Step - 1: Fail!\n";
}

#Using System Command

$retval=system("ping -c 2 $ip_address");

if ($retval==0) {
    print "Step - 2: Success!\n";
} else {
    print "Step - 2: Fail!\n";
}

print "\n\n\ Step2: $retval\n\n"; 
```

对于某些 IP 地址，系统命令返回成功，而 Net::Ping 则返回失败。这两种方法有什么区别吗？

谢谢，马丹

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:09:53.343

一个区别是大多数低级实现`ping`使用 ICMP 数据包，而[**`Net::Ping`**](http://search.cpan.org/~smpeters/Net-Ping-2.36/lib/Net/Ping.pm#Net%3a%3aPing-%3Enew%28%5B%24proto_%5B,_%24def_timeout_%5B,_%24bytes_%5B,_%24device_%5B,_%24tos_%5D%5D%5D%5D%5D%29;)注意 TCP 是默认设置。默认情况下，它还发送到可能在特定机器上被阻止的回显端口 (7)。如果要发送 ICMP 数据包，则必须将 ICMP 指定为构造函数中的第一个参数。

由于您使用的是默认值，我会说这些是主要区别。此外，ICMP 没有“端口”，而 TCP 显然*有*。

`Net::Ping`不过，我喜欢 's 使用 TCP的解释。`Net::Ping`--对于与它一起工作的服务器 -- 让您更好地了解哪些服务器已启动并响应，而不仅仅是连接到网络并可以反弹 ICMP 数据包。

但是，如果您只想要您的系统所拥有的`ping`，则文档指出您可以使用关键字`'external'`作为“协议”来调用系统`ping`命令。

# jquery - 切换添加显示无？

> ID：15360235
> 
> 赞同：3
> 
> 时间：2013-03-12T11:43:08.917
> 
> 标签：jquery, toggle

我正在尝试制作一个框，但是当单击一个列表项时，它会下拉，然后在单击时返回。我以前做过很多次，但出于某种原因，Jquery 添加了 display:none;

```
 $('li.item-162').toggle(function(){
                           $('.login').animate({
                                top: '27px'
                                 }, 1000);

                        },function() {          
                             $('.login').animate({
                                top: '-212px'
                                 }, 1000);
                        });

        $(".li.item-162").show(); 
```

在萤火虫中我的代码显示 ![在此处输入图像描述](../Images/4e066363d9fc39642f4b6eccc49bd268.png) 你可以在这里看到它.. [http://rdhealthandsafety.co.uk/index.php](http://rdhealthandsafety.co.uk/index.php)

任何想法为什么会发生这种情况，我想这是我周二早上的忧郁:(

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T12:49:33.123

您打算使用该[`.toggle()`](http://api.jquery.com/toggle/)函数的方式自**jQuery 1.8以来已被***弃用*，并已在**jQuery 1.9中***删除*。

 *****[类别：已弃用 1.8](http://api.jquery.com/category/deprecated/deprecated-1.8/)：

> .toggle() 将两个或多个处理程序绑定到匹配的元素，以在交替单击时执行。

这是[在 jQuery 1.9 中的注释更改中得出的](http://jquery.com/upgrade-guide/1.9/#toggle-function-function-removed)：

> 这是 .toggle() 的“单击元素以运行指定的函数”签名。它不应与 .toggle() 的“更改元素的可见性”相混淆，后者未被弃用。前者被删除以减少混淆并提高库中模块化的潜力。jQuery Migrate 插件可用于恢复功能。

尽管如此， [Gaby aka G. Petrioli](https://stackoverflow.com/users/128165/gaby-aka-g-petrioli)创建了一个函数，该函数的作用与回答[What to use 而不是`toggle(…)`在 jQuery > 1.8 中的答案相同？](https://stackoverflow.com/q/14382857/1456376)：

```
$.fn.toggleClick = function(){
    var methods = arguments, // store the passed arguments for future reference
        count = methods.length; // cache the number of methods 

    //use return this to maintain jQuery chainability
    return this.each(function(i, item){
        // for each element you bind to
        var index = 0; // create a local counter for that element
        $(item).click(function(){ // bind a click handler to that element
            return methods[index++ % count].apply(this,arguments); // that when called will apply the 'index'th method to that element
            // the index % count means that we constrain our iterator between 0 and (count-1)
        });
    });
}; 
```

您可以像这样简单地使用它：

```
$('selector').toggleClick(function1, function2, […]); 
```*****

# python - 使用 Python 将 MySQL 表导出为 PDF

> ID：15360238
> 
> 赞同：-2
> 
> 时间：2013-03-12T11:43:18.260
> 
> 标签：python, mysql, pdf

我正在寻找使用 Python 代码将表从 MySQL 导出到 PDF 文档。
我一直在搜索互联网或任何可能性，但没有运气。
有人可以指导我我需要做什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:56:15.883

对于初学者，您可能需要[mysql-python](http://mysql-python.sourceforge.net/)和类似[reportlab](http://www.reportlab.com/software/opensource/)的东西。从您的 mysql 表创建一个 HTML 表字符串，然后[使用 reportlab 将该字符串放入 PDF 中](http://www.blog.pythonlibrary.org/2010/03/08/a-simple-step-by-step-reportlab-tutorial/)。

# javascript - 淡入黑色 jQuery 或 Javascript 效果？存在吗？

> ID：15360239
> 
> 赞同：4
> 
> 时间：2013-03-12T11:43:25.953
> 
> 标签：javascript, jquery, fadein, mouseenter

图片的特定部分是否存在某种 jQuery 淡入黑色效果。那么它真的将图片着色为黑色吗？我确实知道 canvas 元素，但它对我来说似乎不是一个好的解决方案，如果能得到一些帮助将不胜感激:)

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T11:45:39.163

将叠加层应用于图片（绝对定位`DIV`），并添加`opacity: 0`和`background-color: black`将制作透明叠加层。然后，您可以将不透明度设置为 1，基本上是逐渐“变暗”图像。

**编辑：**这里有一个演示[http://jsfiddle.net/FMSKf/](http://jsfiddle.net/FMSKf/)

# ruby-on-rails - 除非 AND (&&) 在 ruby on rails

> ID：15360240
> 
> 赞同：0
> 
> 时间：2013-03-12T11:43:26.167
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我想用

```
unless @a && @b
   -- data here
end 
```

我不想用

```
 if !(@a && @b) 
```

如果您有任何建议，除非并且不起作用。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T11:46:51.410

你真的自己解决了这个问题。使用括号:)

```
unless (@a && @b)
    #...
end 
```

# tree - 用 graphviz 绘制树

> ID：15360241
> 
> 赞同：1
> 
> 时间：2013-03-12T11:43:26.287
> 
> 标签：tree, graphviz

有没有办法强制节点在graphviz中的相同y坐标上呈现并强制其他节点在另一个之上呈现？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T15:00:54.800

要将**节点约束到相同的等级**（*相同的 y 坐标*），您可以使用子图和[`rank`](http://www.graphviz.org/content/attrs#drank)：

```
digraph g{
    1;
    {rank=same; 2; 3;}
    1 -> 2;
    1 -> 3;
    2 -> 3;
} 
```

要**在彼此之上绘制节点**，您可以使用以下`group`属性：

```
digraph g{
    1[group=a];
    {rank=same; 2[group=a];3;}
    1 -> 2;
    1 -> 3;
    2 -> 3;
} 
```

从以下文档[`group`](http://www.graphviz.org/content/attrs#dgroup)：

> 如果边的端点属于同一组，即具有相同的组属性，则设置参数以避免交叉并保持边笔直

# graph-theory - 在有向图中搜索大多数北极点或南极点

> ID：15360242
> 
> 赞同：0
> 
> 时间：2013-03-12T11:43:28.713
> 
> 标签：graph-theory

我有一个包含 10000 个连接的文本文件，格式如下：

> x1 y1 x2 y2

我想知道是否有一种简单的方法可以找到图形的所有北点和所有南点？

如果连接到 x 轴不与任何其他连接相交，则该点为南。

我考虑过将这个问题转化为线交叉问题，但我在实现它时遇到了困难。

# mysql - 使用 UUID 时，我是否也应该使用 AUTO_INCREMENT？

> ID：15360245
> 
> 赞同：17
> 
> 时间：2013-03-12T11:43:30.240
> 
> 标签：mysql, sql, sqlite, auto-increment, uuid

我们正在构建一个新的网络应用程序，它将在许多本地设备上具有离线 iPad/Android 应用程序版本，这将涉及插入新数据。因此，我们需要使用 UUID 以允许与主数据库进行必要的双向同步。为此，我们将 UUID 存储`BINARY(16)`为主键。

我研究后了解到的问题是，非顺序主键插入所需的时间会随着时间的推移而增加，并且这些插入会导致碎片（如此处所回答[）](https://stackoverflow.com/a/10375151/215384)。这样做的好处`AUTO_INCREMENT`是新行通常只会添加到表的末尾，因此不会遇到 UUID 的速度问题。

我的问题是使用`AUTO_INCREMENT`列作为主键然后将 UUID 列作为非空唯一索引是否更好？据推测，这将具有顺序插入的速度优势，同时保留同步分布式数据库所需的必要 UUID。

我可以看到的一个问题是 UUID 需要用作其他表的参考（使用外键约束）（即附加到检查的问题列表，而检查又附加到站点，所有这些涉及插入，因此所有这些都需要 UUID）。从语义上讲，主键作为参考更有意义，但作为一个分布式系统，我们不能`AUTO_INCREMENTS`用于这些。`JOIN`对于这些引用（当然还有它们附带的 s ）使用（非空）唯一索引而不是主键是否有缺点？

还可能值得注意的是，主（在线）数据库使用 MySQL（InnoDB），而分布式（离线）数据库使用 SQLite。

**编辑：**

考虑到将 UUID 作为主键可能会更好（因为它在语义上就是这样），如果我将 UUID 设置为主键并将`AUTO_INCREMENT`列设置为非空唯一索引，我是否会获得顺序插入的好处? 还是只有在确定在哪里插入新行时相关的主键？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2013-03-12T11:53:14.323

使用自动增量作为主要加上一个 uuid 列是一个有效的模型，但是您仍然必须与自动增量带来的一些问题作斗争，这完全取决于您如何进行同步。

无论如何，我一直在使用 uuid 作为主键（我当前的数据库有 50 万条记录）并且它仍然非常快，它只会减慢插入速度，但除非你每天有非常大量的插入，否则它应该'别吓唬你。

如果您使用 Sql-Server 另一个解决方案，您可以看看 Sequential UUID，它的碰撞几率比普通 UUID 稍大，但绝对碰撞几率仍然很低，因为它们是部分顺序的，可以解决问题随着碎片化。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-21T22:07:13.130

一旦你有了一个大的分布式数据仓库，如果你使用 UUID 或 GUID 作为唯一键并在以后的 join 中使用它，那就不好了。

请在您的主数据库或数据管道中创建顺序代理键，而不是使用 UUID 或 GUID。

分享我们的项目经验作为参考。我们在并行数据仓库中保存了 3000 亿条记录，在我们的系统中，甚至不支持自动增量密钥。我们使用 8 个字节的 bigint 作为主键（实际上我们系统中的唯一键也不支持，但这不影响逻辑唯一性），当我们处理文件和加载文件时，我们使用 3 个字节来生成文件 ID，即 2^24文件，我们每天需要加载大约 2,000 个文件，所以，2^24 可以支持大约 25 年，如果没有错的话。

我们使用剩余的 4 个字节作为行 ID，即 40 亿行，我们在任何文件中都没有 40 亿行。我们保留 1 个字节。在ETL处理过程中，我们只需要跟踪master数据库中的文件ID，它支持自动增量ID，当我们在处理文件时需要生成记录ID时，我们结合FileID+reserve 1字节+4字节rowID。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2020-09-12T13:54:28.330

来自[https://uuid.fyi/uuidorint](https://uuid.fyi/uuidorint)

**UUID**

**优点**

*   全球独一无二。
*   无状态，可以动态生成。
*   安全，因为恶意用户无法猜测 ID。
*   版本 1 UUID 存储时间戳信息，有时可能很有用。

**缺点**

*   不可读。
*   对于 MySQL、Oracle 等使用集群主键的数据库，版本 4 随机生成的 UUID 如果用作主键会影响插入性能。这是因为它需要对行重新排序，以便将新插入的行放在聚集索引内的正确位置。另一方面，PostgreSQL 使用堆而不是集群主键，因此使用 UUID 作为 PK 不会影响 PostgreSQL 的插入性能。

**自动递增整数/序列**

**优点**

*   可读。如果我们将其暴露在外部，这尤其有价值。考虑到 issue id，显然 issue-123 比 issue-b1e92c3b-a44a-4856-9fe3-925444ac4c23 更具可读性。

**缺点**

*   它不能在分布式系统中使用，因为不同的主机很可能会产生完全相同的数字。
*   它不能即时生成。相反，我们必须查阅数据库以找出下一个可用的 PK。
*   可能会暴露一些业务数据，因为最新的 ID 可能代表库存的总数。攻击者还可以扫描整数范围以探索泄漏（尽管如果正确实施 ACL，则不应该发生这种情况）。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-21T22:06:51.910

您可以使用复合主键，由离线客户端分配的自动递增 bigint ID 值加上分配给客户端的 bigint ID 组成。因此，您将在客户端 1235 上创建条目 15。

客户端最好在进行第一次编辑之前从服务器请求其 ID，例如，当它第一次检索服务器的主数据时。

# ruby-on-rails - 载波质量不适用于 recreate_versions

> ID：15360246
> 
> 赞同：3
> 
> 时间：2013-03-12T11:43:32.363
> 
> 标签：ruby-on-rails, ruby, image, carrierwave, minimagick

我遇到了有关载波质量设置的问题。

首先，让我展示一些代码（uploaders/second_image_uploader）：

```
class SecondImageUploader < CarrierWave::Uploader::Base
  include CarrierWave::RMagick

  def filename
    super.chomp(File.extname(super)) + '.png' unless super.nil?
  end

  version :full do
    process :quality => 85
  end

  # ...
end 
```

和质量过程代码（initializers/carrierwave.rb）：

```
module CarrierWave
  module RMagick

    def quality(percentage)
      manipulate! do |img|
        img.write(current_path){ self.quality = percentage } unless img.quality == percentage
        img = yield(img) if block_given?
        img
      end
    end

  end
end 
```

所以，问题：

当我在模型创建上上传文件时，一切正常——carrierwave 创建“完整”版本，根据我的参数压缩，创建大约 50kb 的图像——太棒了！

无论如何，一旦我运行`> some_model.second_image.recreate_versions!`，它会重新创建它们，但没有应用质量参数，将大小增加到 500kb 左右，这是不可接受的。

如果 any1 可以帮助我找出这里出了什么问题，我将不胜感激。

# gwt - GWT添加jar而不是项目

> ID：15360247
> 
> 赞同：0
> 
> 时间：2013-03-12T11:43:33.767
> 
> 标签：gwt

到目前为止，我将 2 个项目添加到我的 GWT 项目构建路径并在 gwt.xml 中继承它们，以使用它们的类。一切运作良好。

然后我尝试将 gwt 项目部署到 tomcat，因此，我需要制作两个项目的 .jar 文件并将它们添加到构建路径中。但是现在我遇到了错误。

```
编译模块 com.wn.webapp.WebApp
   验证单位：
      在第一次通过时忽略了 17 个具有编译错误的单元。
编译时使用 -strict 或将 -logLevel 设置为 TRACE 或 DEBUG 以查看所有错误。
   查找入口点类
      [错误] 'file:/C:/Users/laura.eckardt/workspace/WebApp/src/com/wn/webapp/client/ServiceCalls.java' 中的错误
         [错误] 第 24 行：无法解析导入 com.wn.retail
         [错误] 第 25 行：无法解析导入 com.wn.retail
         [错误] 第 26 行：无法解析导入 com.wn.retail
         [错误] 第 27 行：无法解析导入 com.wn.retail
         [错误] 第 28 行：无法解析导入 com.wn.retail
         [错误] 第 187 行：LaneContact 无法解析为类型
         [错误] 第 187 行：类型 new AsyncCallback>(){} 必须实现继承的抽象方法 AsyncCallback>.onSuccess(List)
         [错误] 第 187 行：LaneContact 无法解析为类型
         [错误] 第 196 行：new AsyncCallback>(){} 类型的方法 onSuccess(List) 必须覆盖或实现超类型方法
         [错误] 第 196 行：LaneContact 无法解析为类型
         [错误] 第 214 行：LaneStatus 无法解析为类型
         [错误] 第 214 行：类型 new AsyncCallback(){} 必须实现继承的抽象方法 AsyncCallback.onSuccess(LaneStatus)
         [错误] 第 214 行：LaneStatus 无法解析为类型
         [错误] 第 223 行：new AsyncCallback(){} 类型的方法 onSuccess(LaneStatus) 必须覆盖或实现超类型方法
         [错误] 第 223 行：LaneStatus 无法解析为类型
         [错误] 第 343 行：LaneContact 无法解析为类型
         [错误] 第 350 行：LaneStatus 无法解析为类型
         [错误] 第 386 行：请求无法解析为类型
         [错误] 第 390 行：InquiryHolder 无法解析为类型
         [错误] 第 419 行：类型里的方法 setCurrentRequest(Request) 指的是缺少的类型 Request
         [ERROR] Line 420: the method setCurrentInquiry(Inquiry) from the type Lane 指的是缺少的类型 Inquiry
         [错误] 第 424 行：LaneStatus 无法解析为类型
         [错误] 第 429 行：来自类型 ItemList 的方法 setTransactionEntries(Transaction) 指的是缺少的类型 Transaction
         [错误] 第 436 行：InputMethodHolder 无法解析为类型
      [错误] 找不到类型“com.wn.webapp.client.WebApp”
         [错误] 提示：以前的编译器错误可能导致此类型不可用
         [错误] 提示：检查模块的继承链；它可能没有继承所需的模块，或者模块可能没有正确添加其源路径条目

```

现在出了什么问题？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:11:25.120

创建 jar 文件时，您需要包含源文件 ( `.java`)。要在 Eclipse 中执行此操作，您需要右键单击您的项目，然后选择`Export`然后选择`JAR file`in`Java`文件夹。在下一个屏幕中选中“导出 Java 源文件和资源”，然后`Finish`.

将其添加到构建路径后应该可以工作。

# matlab - 扩展卡尔曼滤波器收敛到不正确的值，这只是野兽的本性吗？（图片）

> ID：15360248
> 
> 赞同：5
> 
> 时间：2013-03-12T11:43:38.013
> 
> 标签：matlab, filter, signal-processing, kalman-filter

我设计了一个四元数扩展卡尔曼滤波器，用于融合陀螺仪和加速度计数据。估计图的形状似乎很完美，但估计似乎不断收敛到错误的解决方案。这仅仅是因为我没有使用像线性卡尔曼滤波器这样的最佳估计器，还是应该可以使用 EKF 获得无偏估计？到目前为止，我已经使用了两种不同的实现，并且两次都遇到了同样的问题。

这是滤波器输出的图：![在此处输入图像描述](../Images/ccf60762443988b123de7ac0da19b1bb.png)

*   绿色：仅从加速度计估计的角度
*   蓝色：集成陀螺仪输出
*   红色：线性 KF 输出
*   青色：EKF输出，注意偏移

这是一次迭代的matlab代码：

```
function [ q, wb ] = EKF2( a,w,dt )

persistent x P;

% Tuning paramaters
Q = [0, 0, 0, 0, 0, 0, 0;
    0, 0, 0, 0, 0, 0, 0;
    0, 0, 0, 0, 0, 0, 0;
    0, 0, 0, 0, 0, 0, 0;
    0, 0, 0, 0, 0.01, 0, 0;
    0, 0, 0, 0, 0, 0.01, 0;
    0, 0, 0, 0, 0, 0, 0.01];

R = [1000000,    0,    0;
        0, 1000000,    0;
        0,    0, 1000000;];

if isempty(P)    
    P = eye(length(Q))*10000; %Large uncertainty of initial values
    x = [1, 0, 0, 0, 0, 0, 0]';
end

q0 = x(1);
q1 = x(2);
q2 = x(3);
q3 = x(4);
wxb = x(5);
wyb = x(6);
wzb = x(7);
wx = w(1);
wy = w(2);
wz = w(3);

z(1) = a(1);
z(2) = a(2);
z(3) = a(3);
z=z';

% Populate F jacobian
F = [              1,  (dt/2)*(wx-wxb),  (dt/2)*(wy-wyb),  (dt/2)*(wz-wzb), -(dt/2)*q1, -(dt/2)*q2, -(dt/2)*q3;
    -(dt/2)*(wx-wxb),                1,  (dt/2)*(wz-wzb), -(dt/2)*(wy-wyb),  (dt/2)*q0,  (dt/2)*q3, -(dt/2)*q2;
    -(dt/2)*(wy-wyb), -(dt/2)*(wz-wzb),                1,  (dt/2)*(wx-wxb), -(dt/2)*q3,  (dt/2)*q0,  (dt/2)*q1;
    -(dt/2)*(wz-wzb),  (dt/2)*(wy-wyb), -(dt/2)*(wx-wxb),                1,  (dt/2)*q2, -(dt/2)*q1,  (dt/2)*q0;
                   0,                0,                0,                0,          1,          0,          0;
                   0,                0,                0,                0,          0,          1,          0;
                   0,                0,                0,                0,          0,          0,          1;];

%%%%%%%%% PREDICT %%%%%%%%%
%Predicted state estimate
% x = f(x,u)
x = [q0 - (dt/2) * (-q1*(wx-wxb) - q2*(wy-wyb) - q3*(wz-wzb));
     q1 - (dt/2) * ( q0*(wx-wxb) + q3*(wy-wyb) - q2*(wx-wzb));
     q2 - (dt/2) * (-q3*(wx-wxb) + q0*(wy-wyb) + q1*(wz-wzb));
     q3 - (dt/2) * ( q2*(wx-wxb) - q1*(wy-wyb) + q0*(wz-wzb));
     wxb;
     wyb;
     wzb;];

% Re-normalize Quaternion
qnorm = sqrt(x(1)^2 + x(2)^2 + x(3)^2 + x(4)^2);
x(1) = x(1)/qnorm;
x(2) = x(2)/qnorm;
x(3) = x(3)/qnorm;
x(4) = x(4)/qnorm;

q0 = x(1);
q1 = x(2);
q2 = x(3);
q3 = x(4);

% Predicted covariance estimate
P = F*P*F' + Q;

%%%%%%%%%% UPDATE %%%%%%%%%%%
% Normalize Acc and Mag measurements
acc_norm = sqrt(z(1)^2 + z(2)^2 + z(3)^2);
z(1) = z(1)/acc_norm;
z(2) = z(2)/acc_norm;
z(3) = z(3)/acc_norm;

h = [-2*(q1*q3 - q0*q2);
     -2*(q2*q3 + q0*q1);
     -q0^2 + q1^2 + q2^2 - q3^2;];

%Measurement residual
% y = z - h(x), where h(x) is the matrix that maps the state onto the measurement
y = z - h;

% The H matrix maps the measurement to the states
H = [ 2*q2, -2*q3,  2*q0, -2*q1, 0, 0, 0;
     -2*q1, -2*q0, -2*q3, -2*q2, 0, 0, 0;
     -2*q0,  2*q1,  2*q2, -2*q3, 0, 0, 0;];

% Measurement covariance update
S = H*P*H' + R;

% Calculate Kalman gain
K = P*H'/S;

% Corrected model prediction
x = x + K*y;      % Output state vector

% Re-normalize Quaternion
qnorm = sqrt(x(1)^2 + x(2)^2 + x(3)^2 + x(4)^2);
x(1) = x(1)/qnorm;
x(2) = x(2)/qnorm;
x(3) = x(3)/qnorm;
x(4) = x(4)/qnorm;

% Update state covariance with new knowledge
I = eye(length(P));
P = (I - K*H)*P;  % Output state covariance

q = [x(1), x(2), x(3), x(4)];
wb = [x(5), x(6), x(7)];

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-13T15:25:56.253

您所描述的问题据说是 EKF 的主要缺点之一。它不保证任何收敛到实际值。如果您想继续使用它：

*   尝试增加系统噪声`Q`和/或测量噪声`R` （可以解释为“将非线性放入噪声中”）。这也使得线性 KF 在非线性问题上表现更好
*   要判断您的表现如何，请在您的估计周围绘制 2-sigma-band 以查看您的实际价值是否在其中（否则您的噪声太小）。

Unscented Kalman 滤波器以在处理非线性方面比 EKF 更稳健而著称。实现复杂度与EKF大致相同。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:56:24.870

我不是卡尔曼滤波方面的专家，但我认为静态误差是通过陀螺仪/加速度测量可以获得的最佳结果。在我之前的实验室中，他们将惯性测量与 GPS 融合在一起进行重新校准。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-05-15T08:26:28.210

我刚刚试过你的算法，它工作得很好。为了避免滤波器的输出跟随漂移的积分角速率，您需要减小测量噪声的方差值。我尝试使用 100 而不是 1000000 的值。这样你告诉过滤器“信任”更多的观察结果，因此角度估计不会发散。

我还实现了一个脚本，该脚本使用外部角度参考来优化修复参数（过程噪声和测量噪声的方差）。这样更容易限制它们的值。

同样重要的是要注意 R 和 Q 的值将取决于运动的强度，即“破坏”加速度计估计的线性加速度的量。为了提高估计的精度，我实现了一个强度检测器，它根据运动的强度为每个样本改变 R 和 Q 的值。如果您有兴趣，请通过以下方式与我联系：alberto.olivares (gmail.com)，我很乐意将其发送给您（或任何其他感兴趣的人）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-10-10T15:39:00.320

目前，我正在测试`EKF`和性能，以使用四元数形式的`Complementary Filter`传感器融合 ( `gyro`, `acc`, ) 估计姿态。`mag`最终的范围是获得不同的速度估计。目前我有一个非线性互补滤波器，它可以很好地估计姿态，然后我减去重力并积分得到速度。它在短时间内工作正常。

将此代码作为我的代码，并认为我的测量输出`EKF`是加速度计读数，其中惯性加速度不可忽略。因此，我预测的输出矩阵“ `h`”是 的结果`z = T*acc`，其中`T`是从传感器到本地框架的变换矩阵，`acc`是受重力影响的加速度计读数。假设几乎没有偏航旋转，而只是`<90deg`围绕俯仰和横滚的显着部分旋转（ ）。

我自己无法解释的是，`EKF`如果我认为惯性加速度可以忽略不计，那么它的性能会比我认为测量到显着的惯性加速度时要好。由于我想观察运动，我需要考虑惯性加速度。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2015-03-09T11:31:07.523

一些人与我联系过，他们遇到了与第一篇文章中所述类似的问题。我想包含一个我的 Github 存储库，您可以在其中找到一个完整的库来使用 MIMU 估计方向。

包括的方法是：加速度和磁场投影（这只是为了说明为什么需要融合）、常规卡尔曼滤波器、扩展卡尔曼滤波器、门控卡尔曼滤波器和门控扩展卡尔曼滤波器。

您还将找到一篇解释该过程的论文以及我在会议中使用的幻灯片。

一切都经过了彻底的评论，所以我希望你能够理解每一步都做了什么。

如果您对此有任何疑问，请告诉我。

[https://github.com/aolivares/inmed2014](https://github.com/aolivares/inmed2014)

干杯!

# ios - Cocos2d 2.0 横向：howto？

> ID：15360249
> 
> 赞同：2
> 
> 时间：2013-03-12T11:43:52.740
> 
> 标签：ios, objective-c, cocos2d-iphone

我有一个来自 cocos2d 模板的基本 cocos2d 应用程序，无法让它在横向模式下工作。我确实在这里和 cocos2d 论坛上阅读了很多消息，但没有解决方案。

我的应用程序以横向模式启动，但所有内容都是横向绘制的（精灵、标签……）

我更新了项目面板中的方向（自动更新 info.plist）...

我可能必须在我的 AppDelegate.m 文件中添加一些内容（在 application:didFinishLaunchingWithOptions 方法中）告诉导演以正确的方式绘制所有内容。

[https://gist.github.com/iesta/5143096](https://gist.github.com/iesta/5143096)

先感谢您...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:04:28.763

将这些代码放入 AppDelegate.mm

```
- (NSUInteger)application:(UIApplication*)application supportedInterfaceOrientationsForWindow:(UIWindow*)window
{
    return UIInterfaceOrientationMaskLandscape;
}

-(NSUInteger)supportedInterfaceOrientations {

    return UIInterfaceOrientationMaskLandscape;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
       return UIInterfaceOrientationIsLandscape(interfaceOrientation);
} 
```

还要在 Xcode 摘要屏幕中选择横向。 ![在此处输入图像描述](../Images/d4a0d10801302d8a5153fda89462436e.png)

更新：弄错了，您添加了 Default-Portrait~ipad.png 图像而不是 Default-Landscape~ipad.png 。

这是工作源：[下载](https://www.box.com/s/6qi5urcv4p1ue8kwnhzu)

在更改默认图像后看到这个工作。 ![在此处输入图像描述](../Images/24bdd8fac24a5f162e13fa9c23577e8f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-10-27T14:01:45.307

伙计们尝试将此行添加到 appddelegate

[window_setRootViewController:navController_];

# javascript - 如何使用 jquery 或 js 更改 div 的内容？

> ID：15360253
> 
> 赞同：-3
> 
> 时间：2013-03-12T11:44:12.080
> 
> 标签：javascript, jquery

**HTML**

```
<a href="/home/" id="one"><img src="images/img1.png"/></a> 
```

**JS**

```
<script>
$(document).ready(function(){
$('#one').

});
</script> 
```

如何将锚标签更改为`<a href="/home/" id="one"><img src="images/img2.png"/></a>`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:45:41.380

使用以下代码：

```
$("#one img").prop("src", "images/img2.png"); 
```

它将元素的`src`属性更改为.`<img>``"images/img2.png"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:46:59.257

尝试：

```
$(document).ready(function(){
    $('#one').on('click',function(e){
       $(this).children('img').attr('src','images/img2.png');
       e.preventDefault();
    });
}); 
```

# javascript - 获取数组中具有某些属性的项目数

> ID：15360256
> 
> 赞同：31
> 
> 时间：2013-03-12T11:44:25.953
> 
> 标签：javascript, angularjs

我有一个对象数组如下。

```
$scope.students = [{'isSelected': true},
    {'isSelected': true},
    {'isSelected': false},
    {'isSelected': true},
    {'isSelected': true},
] 
```

如何获取`isSelected`属性设置为的计数项目`true`？

### 更新：

问题是`$scope.students`从 REST api 获取的，并且简单地循环 $scope.students 变量不起作用，因为该变量`undefined`在请求完成之前是这样的，因此循环代码错误地说`$scope.students is not defined`。

我尝试使用`$watch`，但在这种情况下，我必须在 watch 指令下定义循环，它只在定义 $scope.students 时工作一次，之后循环不起作用，因为 $scope.students 本身没有改变。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2014-11-17T13:52:10.560

还有另一种方法可以做到这一点：AngularJS 过滤器。你可以这样写：

```
var selectedCount = $filter('filter')($scope.students, { isSelected: true }).length; 
```

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2016-04-04T10:57:14.043

您还可以使用 javascript 过滤方法（请参阅[https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/filter)）

```
$scope.selectedStudentsCount = function() {
  return $scope.students.filter(function(obj){return obj.isSelected}).length;
} 
```

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2013-03-12T12:11:14.597

您可以将以下方法添加到您的控制器。您范围内的变量`selectedStudentsCount`将保留所有*选定学生*的数量（其中`isSelected`设置为`true`）。

仅当不为空时才会执行计算*所选用户*的功能。否则对于*空*变量将返回。 `angular.forEach``students` *`students``selectedStudentsCount``0`*

 *```
$scope.selectedStudentsCount = function() {
    var count = 0;
    angular.forEach($scope.students, function(student){
        count += student.isSelected ? 1 : 0;
    });
    return count; 
} 
```

请注意，这`selectedStudentsCount`是一个函数，因此必须`()`在您的模板中调用它，例如

```
<h2>Total selected students: {{selectedStudentsCount()}}</h2> 
```*

# ruby - How to solve error of Ident authentication in Rails?

> ID：15360259
> 
> 赞同：0
> 
> 时间：2013-03-12T11:44:39.633
> 
> 标签：ruby, postgresql, activerecord, ruby-on-rails-3.2, passenger

I have setup [Rail application](https://github.com/lockitron/selfstarter) in my local server. And I am using Postgresql database.

But it creates error :

Error message: FATAL: Ident authentication failed for user "nobody" (PG::Error)

Exception class: PhusionPassenger::UnknownError

Backtrace:

```
File    Line    Location
0   /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb     1208    in `initialize'
1   /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb     1208    in `new'
2   /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb     1208    in `connect'
3   /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb     326     in `initialize'
4   /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb     28  in `new'
5   /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/postgresql_adapter.rb     28  in `postgresql_connection'
6   /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb   315     in `new_connection'
7   /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb   325     in `checkout_new_connection'
8   /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb   247     in `block (2 levels) in checkout'
9   /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb   242     in `loop'
10  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb   242     in `block in checkout'
11  /usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb     211     in `mon_synchronize'
12  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb   239     in `checkout'
13  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb   102     in `block in connection'
14  /usr/local/rvm/rubies/ruby-1.9.3-p125/lib/ruby/1.9.1/monitor.rb     211     in `mon_synchronize'
15  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb   101     in `connection'
16  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_pool.rb   410     in `retrieve_connection'
17  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_specification.rb  171     in `retrieve_connection'
18  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/connection_adapters/abstract/connection_specification.rb  145     in `connection'
19  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/sanitization.rb   130     in `replace_bind_variables'
20  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/sanitization.rb   117     in `sanitize_sql_array'
21  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/sanitization.rb   28  in `sanitize_sql_for_conditions'
22  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/relation/query_methods.rb     324     in `build_where'
23  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/relation/query_methods.rb     136     in `where'
24  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activerecord-3.2.11/lib/active_record/querying.rb   9   in `where'
25  /var/www/PCMI/zil/app/models/order.rb   8   in `'
26  /var/www/PCMI/zil/app/models/order.rb   1   in `'
27  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activesupport-3.2.11/lib/active_support/dependencies.rb     251     in `require'
28  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activesupport-3.2.11/lib/active_support/dependencies.rb     251     in `block in require'
29  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activesupport-3.2.11/lib/active_support/dependencies.rb     236     in `load_dependency'
30  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activesupport-3.2.11/lib/active_support/dependencies.rb     251     in `require'
31  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activesupport-3.2.11/lib/active_support/dependencies.rb     359     in `require_or_load'
32  /usr/local/rvm/gems/ruby-1.9.3-p125@openmunicipalities.org/gems/activesupport-3.2.11/lib/active_support/dependencies.rb     313     in `depend_on'
33  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/activesupport-3.2.11/lib/active_support/dependencies.rb     225     in `require_dependency'
34  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/railties-3.2.11/lib/rails/engine.rb     439     in `block (2 levels) in eager_load!'
35  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/railties-3.2.11/lib/rails/engine.rb     438     in `each'
36  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/railties-3.2.11/lib/rails/engine.rb     438     in `block in eager_load!'
37  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/railties-3.2.11/lib/rails/engine.rb     436     in `each'
38  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/railties-3.2.11/lib/rails/engine.rb     436     in `eager_load!'
39  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/railties-3.2.11/lib/rails/application/finisher.rb   53  in `block in '
40  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/railties-3.2.11/lib/rails/initializable.rb  30  in `instance_exec'
41  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/railties-3.2.11/lib/rails/initializable.rb  30  in `run'
42  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/railties-3.2.11/lib/rails/initializable.rb  55  in `block in run_initializers'
43  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/railties-3.2.11/lib/rails/initializable.rb  54  in `each'
44  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/railties-3.2.11/lib/rails/initializable.rb  54  in `run_initializers'
45  /usr/local/rvm/gems/ruby-1.9.3-p125@odomain/gems/railties-3.2.11/lib/rails/application.rb   136     in `initialize!'
46  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/railties-3.2.11/lib/rails/railtie/configurable.rb   30  in `method_missing'
47  /var/www/PCMI/zil/config/environment.rb     5   in `'
48  config.ru   3   in `require'
49  config.ru   3   in `block in '
50  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/rack-1.4.5/lib/rack/builder.rb  51  in `instance_eval'
51  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/rack-1.4.5/lib/rack/builder.rb  51  in `initialize'
52  config.ru   1   in `new'
53  config.ru   1   in `'
54  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb  225     in `eval'
55  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb  225     in `load_rack_app'
56  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb  157     in `block in initialize_server'
57  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/utils.rb     563     in `report_app_init_status'
58  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb  154     in `initialize_server'
59  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb   204     in `start_synchronously'
60  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb   180     in `start'
61  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb  129     in `start'
62  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb     253     in `block (2 levels) in spawn_rack_application'
63  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb    132     in `lookup_or_add'
64  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb     246     in `block in spawn_rack_application'
65  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb    82  in `block in synchronize'
66  < td=""> <> prelude>    10:in `synchronize'
67  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb    79  in `synchronize'
68  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb     244     in `spawn_rack_application'
69  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb     137     in `spawn_application'
70  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb     275     in `handle_spawn_application'
71  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb   357     in `server_main_loop'
72  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb   206     in `start_synchronously'
73  /usr/local/rvm/gems/ruby-1.9.3-p125@domain/gems/passenger-3.0.17/helper-scripts/passenger-spawn-server 
```

config/database.yml

```
development:

  adapter: postgresql
  encoding: utf8
  database: PCMI
  pool: 5
  username: postgres
  password: postgres

test: &TEST

  adapter: postgresql
  encoding: utf8
  database: PCMI 
  pool: 5
  username: postgres
  password: postgres

production:

  adapter: postgresql
  encoding: utf8
  database: PCMI
  pool: 5
  username: postgres
  password: postgres 
```

Please help me for solve this error..

If you need any further information regarding these error then plz inform.

Thank you.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-06T09:45:39.500

PostgreSQL 有两种认证方式。一种是通过 Unix 套接字身份验证，这意味着 PostgreSQL 会检查连接到 PostgreSQL 的进程的用户，然后检查该用户是否有权访问数据库。这种认证方式是你在命令行通过`pg`命令访问PostgreSQL时通常使用的方式。

第二个是您已经熟悉的基于密码的身份验证。

看起来您没有为“postgres”用户正确设置密码身份验证。最重要的是，您的应用程序以“nobody”用户身份运行，因此 PostgreSQL 无法通过 Unix 套接字对您的应用程序进行身份验证。

解决方案是创建一个 PostgreSQL 用户名/密码身份验证条目，并将其填充到您的 database.yml 中。

# javascript - 如何使用 jQuery UI 滑块动态更新 highcharts

> ID：15360263
> 
> 赞同：2
> 
> 时间：2013-03-12T11:44:47.120
> 
> 标签：javascript, jquery-ui, jquery, highcharts, uislider

我正在寻找一种基于 jQuery UI 滑块确定的值动态更新 Highcharts 的方法。我还不太熟悉 AJAX 或 JSON，所以我运气不佳。我试图让收入在给定的几个月内逐渐增加（例如，订阅服务）。为了方便起见，我把它放在了 jsFiddle [http://jsfiddle.net/nlem33/Sbm2T/3/](http://jsfiddle.net/nlem33/Sbm2T/3/)上。任何帮助将不胜感激，谢谢！

```
$(function () {
var chart;
$(document).ready(function() {
    chart = new Highcharts.Chart({
        chart: {
            renderTo: 'container',
            backgroundColor: null,
            type: 'area'
        },
        title: {
            text: ''
        },
        subtitle: {
            text: ''
        },
        xAxis: {
            categories: ['1', '2', '3', '4', '5', '6',],
            tickmarkPlacement: 'on',
            title: {
                text: 'months'
            }
        },
        yAxis: {
            title: {
                text: '$(thousands)'
            },
            labels: {
                formatter: function() {
                    return this.value / 1000;
                }
            }
        },
        tooltip: {
            formatter: function() {
                return ''+
                    this.x +': '+ Highcharts.numberFormat(this.y, 0, ',') +' hundred';
            }
        },
        plotOptions: {
            area: {
                stacking: 'normal',
                lineColor: '#666666',
                lineWidth: 1,
                marker: {
                    lineWidth: 1,
                    lineColor: '#666666'
                }
            }
        },
        legend:{
            align: 'bottom',
            x: 275,
            borderColor: null
        },

        credits: {
            enabled: false
        },
        series: [{
            name: 'Revenue',
            data: [100, 130, 170, 220, 350, 580]
        }, {
            name: 'Cost',
            data: [100, 120, 140, 160, 180, 200]
        }]
    });
}); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T13:59:25.960

我不太了解您希望您的计算如何工作，但我可以帮助您更新图表。基本上，您需要创建一组新的数据点，然后在适当的图表系列上调用 setData。

我在你的例子上试过这个。计算 (ui.value * i) 需要更改，但它说明了如何更新图表。它使用第二个滑块的值来更新第一个系列点：

```
slide: function(event, ui) {
    $('#slider2_value').html('$' + ui.value);
    var newdata = [];
    for (var i=0 ; i<6 ; i++) {
        newdata.push(ui.value * i);
    }
    chart.series[0].setData (newdata);
}, 
```

[http://jsfiddle.net/BLKQf/](http://jsfiddle.net/BLKQf/)

# javascript - slideDown 无法正常工作或像 .show 一样工作

> ID：15360266
> 
> 赞同：0
> 
> 时间：2013-03-12T11:44:50.697
> 
> 标签：javascript, jquery, css, slidedown

我正在尝试 slideDown() 一个隐藏的 div 但它只显示() 它而没有 slideDown() 效果。当我在 2-3 秒后突然显示按钮内容时，这是 js

```
var hash = window.location.hash.substr(1);
var href = $('#nav li a').each(function(){
    var href = $(this).attr('href');
    if(hash==href.substr(0,href.length-5)){
        var toLoad = hash+'.html #content';
        $('#content').load(toLoad)
    }                                           
});

$('#nav li a').click(function(){

    var toLoad = $(this).attr('href')+' #content_id1';
    $('#content').fadeOut(1000,loadContent);
    window.location.hash = $(this).attr('href').substr(0,$(this).attr('href').length-5);
    function loadContent() {
        $('#content').load(toLoad,'',showNewContent())
    }
    function showNewContent() {
        $('#content').slideDown('normal');

    }
    return false;       
}); 
```

这是CSS

```
#content {width:934px;margin-top:238px;position:relative;height:500px;display:none;}
#content #content_id1{width:934px; background-color:white; height:500px; position:relative;top:4px;margin-top:238px;margin-bottom:50px;padding:20px;} 
```

这是html

```
 <ul id="nav">
                <li>
                  <a href="products/rania.php"><img src="img/products/1.jpg"/></a>
                </li>
                <li class="under">
                 <a href="products/lutron.php"><img src="img/products/2.jpg"/></a>
                </li>

            </ul>

            <div id="content">   </div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:52:10.347

阅读[jQuery 的 API](http://api.jquery.com/slideDown/)关于`slideDown()`. 哪里没有参数 as `normal`，duration 应该是数值 or `slow`, or `fast`。

# javascript - 将“ondblclick”事件添加到动态文本区域 javascript

> ID：15360268
> 
> 赞同：0
> 
> 时间：2013-03-12T11:44:53.907
> 
> 标签：javascript, html, double-click

我正在通过 javascript 创建动态文本区域，并且可以设置类等属性，但我想为动态创建的文本区域添加一个“OnDblClick”属性，但我似乎无法使标记工作。

非常感谢任何帮助

这是代码

```
function creatediv1(id)
{    
    var newtextarea = document.createElement('textarea');  
    newtextarea.setAttribute('class', 'moveable-element');
    newtextarea.setAttribute('onDblClick', 'editor1()'); 
    newtextarea.innerHTML="I can be moved!";
 } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:46:21.677

`ondblclick`是属性，而不是属性，您可以使用以下方式设置它：

```
newtextarea.onDblClick = editor1; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:49:40.253

试试这个：

```
newtextarea.addEventListener('dblclick', editor1, false); 
```

# ios - 为什么我总是在 ios 中获得缓存位置

> ID：15360281
> 
> 赞同：2
> 
> 时间：2013-03-12T11:45:31.177
> 
> 标签：ios, objective-c, cllocationmanager, nstimeinterval

在我的应用程序中，我正在比较两个位置。一个是实际位置，另一个是固定位置。我通过一个按钮设置了第二个位置。当覆盖一定距离时，我会收到 alertView 提示。通过点击停止按钮，位置管理器停止。问题是当我想重新开始时，应用程序使用的是我点击停止按钮的位置，而不是新的。我试图通过使用 NSTimeInterval 来排除缓存，但我仍然得到最后一个“已知”位置。请帮忙。

这是我的代码（有两种方法）

```
-(void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation
{

eventDate = newLocation.timestamp;

NSLog (@"eventDate from locmanager %@", eventDate);

NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setNumberStyle:NSNumberFormatterDecimalStyle];
NSString *groupingSeparator = [[NSLocale currentLocale] objectForKey:NSLocaleGroupingSeparator];
[formatter setGroupingSeparator:groupingSeparator];
[formatter setGroupingSize:3];
[formatter setAlwaysShowsDecimalSeparator:NO];
[formatter setUsesGroupingSeparator:YES];

//display latitude
NSString *lat =[[NSString alloc]initWithFormat:@"%f",
                newLocation.coordinate.latitude];
latitude.text=lat;

//display longitude
NSString *lon = [[NSString alloc]initWithFormat:@"%f",
                 newLocation.coordinate.longitude];
longitude.text=lon;

//display accuracy
accuracy.text = [formatter stringFromNumber:[NSNumber numberWithFloat:newLocation.horizontalAccuracy]];

double actLat = [[latitude text]doubleValue];
int latSeconds = actLat * 3600;
int latDegrees = latSeconds / 3600;
latSeconds = abs(latSeconds % 3600);
int latMinutes = latSeconds / 60;
latSeconds %= 60;

NSString *latStringLocal = NSLocalizedString((actLat > 0) ? @"North" : @"South", @"");

double actLon = [[longitude text]doubleValue];
int lonSeconds = actLon * 3600;
int lonDegrees = lonSeconds / 3600;
lonSeconds = abs(lonSeconds % 3600);
int lonMinutes = lonSeconds / 60;
lonSeconds %= 60;

NSString *lonStringLocal = NSLocalizedString((actLon > 0) ? @"East" : @"West", @"");

NSString *actPosWord = NSLocalizedString (@"WordActual", @"");
NSString *actPosition = [[NSString alloc]initWithFormat:@"%@ %i° %i' %i\" %@" "   " @"%i° %i' %i\" %@", actPosWord, latDegrees, latMinutes, latSeconds, latStringLocal,lonDegrees, lonMinutes, lonSeconds, lonStringLocal];

_actualPosition.text = actPosition;

[self distanceFromLocation];

} 
```

第二个刷新“固定”位置：

```
-(void)recordLocation{

NSDate* timeNow = [NSDate date];

NSLog (@"eventDate from recordLocation %@", eventDate);
    if ([timeNow timeIntervalSinceDate:eventDate] > 2.0f)

{

double valueLat = [[latitude text]doubleValue];
int latSeconds = valueLat * 3600;
int latDegrees = latSeconds / 3600;
latSeconds = abs(latSeconds % 3600);
int latMinutes = latSeconds / 60;
latSeconds %= 60;

NSString *latStringLocal = NSLocalizedString((valueLat > 0) ? @"North" : @"South", @"");

double valueLon = [[longitude text]doubleValue];
int lonSeconds = valueLon * 3600;
int lonDegrees = lonSeconds / 3600;
lonSeconds = abs(lonSeconds % 3600);
int lonMinutes = lonSeconds / 60;
lonSeconds %= 60;

NSString *lonStringLocal = NSLocalizedString((valueLon > 0) ? @"East" : @"West", @"");

tempPos = [[CLLocation alloc] initWithLatitude:valueLat longitude:valueLon];

NSString *watchedPosWord = NSLocalizedString (@"WordWatched", @"");
NSString *recPosition = [[NSString alloc]initWithFormat:@"%@ %i° %i' %i\" %@" "   " @"%i° %i' %i\" %@ \n", watchedPosWord, latDegrees, latMinutes, latSeconds, latStringLocal,lonDegrees, lonMinutes, lonSeconds, lonStringLocal];

_labelDegrees.text = recPosition;

//create region for ovelay

double areaWatched = [[watchedArea text] doubleValue];

MKCoordinateRegion region;
region.center.latitude = valueLat;
region.center.longitude = valueLon;
region.span.latitudeDelta = 0.001f;
region.span.longitudeDelta = 0.001f;
region.center = tempPos.coordinate;
[self.mapView setRegion:region animated:YES];

MKCircle *circle = [MKCircle circleWithCenterCoordinate:region.center radius:areaWatched];

[self.mapView addOverlay:circle];
}

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-26T15:11:44.047

你得到一个缓存的位置，因为操作系统只是节省时间和精力。您需要在`-didUpdateToLocation`. 此方法将每秒调用一次，直到您调用`-stopUpdatingLocation`. 我会围绕让这个方法被调用来构建你的代码，直到你对位置时间戳和/或准确性感到满意为止。它运行的时间越长，位置就越准确。这也意味着 GPS 运行时间更长，如果运行时间过长会对电池产生负面影响。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:05:38.567

创建一个属性，例如`@property (nonatomic, retain) CLLocation *currentLocation;`并使用它来存储位置管理器获得的最后一个位置。验证位置管理器是否未发送缓存位置也很重要，如下所示：

```
- (void)locationManager:(CLLocationManager *)manager didUpdateToLocation:(CLLocation *)newLocation fromLocation:(CLLocation *)oldLocation {

    //if the time interval returned from core location is more than two minutes we ignore it because it might be from an old session
    NSDate *eventDate = newLocation.timestamp;
    NSTimeInterval howRecent = [eventDate timeIntervalSinceNow];

    if ( abs(howRecent) < 15.0 )
    {

        self.currentLocation = newLocation;
        // do whatever you have to do
    }
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T15:23:47.697

由于我的应用程序的结构（需要两种方法中的位置）带有 abs() 语句的 NSTimeinterval 不起作用。从提供的答案开始，它会告诉更多关于我的信息，但我的解决方案是我的 Activat 方法中的 NSTimer 语句。延迟 0.1 秒，它可以完美运行。对于任何感兴趣的人，她是我的代码：

```
- (IBAction)Activate:(UIButton *)sender {
[self startUpdatingLocation];
[self.mapView setUserTrackingMode:MKUserTrackingModeFollow animated:YES];
[mapView setCenterCoordinate:mapView.userLocation.location.coordinate animated:YES];
i = 1;
[NSTimer scheduledTimerWithTimeInterval:0.1
                                 target:self
                               selector:@selector(recordLocation)
                               userInfo:nil
                                repeats:NO]; 
```

}

# delphi - 如何调试即使分配了也不会触发的事件

> ID：15360285
> 
> 赞同：0
> 
> 时间：2013-03-12T11:45:37.383
> 
> 标签：delphi, debugging, events, delphi-2009

我正在寻找检查是否分配了事件的代码，如果是，则触发它。

什么代码管理事件？

建议？

我有一个自定义组件，它连接到`AdoQuery`，它持有`TField`。我的组件不会触发 的`OnSetText`，`TField`而其他组件则允许触发`OnSetText`。我试图找出原因。

好的，这里是源代码：

```
procedure TForm1.ADOQuery1MydateSetText(Sender: TField; const Text: string);
var
  Garbage:TDateTime;
begin
  if TryStrToDate(text,Garbage) then
    Sender.AsString := Text
  else ShowMessage('so now what?');
end; 
```

如何在 Delphi 中跟踪调用此代码的代码？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T11:47:39.693

通常，事件处理程序将使用如下声明的属性声明：

```
property OnMyEvent: TMyEvent read FOnMyEvent write FOnMyEvent; 
```

因此，为了触发它，代码将执行`FOnMyEvent`，因此您需要搜索组件的源代码以查找`FOnMyEvent`对`OnMyEvent`. 通常你会发现这样的东西：

```
procedure TMyComponent.DoMyEvent;
begin
  if Assigned(FOnMyEvent) then
    FOnMyEvent(Self);
end; 
```

最后，你需要寻找`DoMyEvent`被调用的地方。

* * *

作为一个工作示例，我们可以使用 的`OnSetText`事件`TField`。这是这样声明的：

```
property OnSetText: TFieldSetTextEvent read FOnSetText write FOnSetText; 
```

这是唯一的参考`OnSetText`。所以我们寻找`FOnSetText`导致这种情况的原因：

```
procedure TField.SetEditText(const Value: string);
begin
  if Assigned(FOnSetText) then FOnSetText(Self, Value) else SetText(Value);
end; 
```

现在，`SetEditText`是一个私有方法，所以我们不需要在声明它的单元之外查看。唯一使用它的地方是作为属性设置器`TField.Text`：

```
property Text: string read GetEditText write SetEditText; 
```

然后你可以继续寻找该属性被分配到的地方，但是会有很多地方发生这种情况。所以，如果你想调试这一切，你只需要启用 Debug DCUs 并在`TField.SetEditText`. `Value`如果您发现断点触发太频繁，您可能希望根据内容设置断点条件。

# node.js - nodejs的坏或丑陋的部分是什么

> ID：15360286
> 
> 赞同：8
> 
> 时间：2013-03-12T11:45:38.763
> 
> 标签：node.js

我知道 nodejs 的优点，它使用事件驱动、非阻塞 I/O 模型和 balabala。但是作为一个经验丰富的 nodejs 开发人员，nodejs 的坏处或丑陋的部分是什么？

任何详细情况或示例代码将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:51:22.943

不一定是坏事，但调试嵌套回调是一个问题。如果你使用 express 之类的东西，这会得到缓解。如果你正在使用 Jasmine 或类似的东西进行测试驱动开发，调试会变得容易得多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:48:41.980

我不认为这是*一件坏事*，但`throw`在 node.js 中无法正常工作。因此，`throw`不鼓励使用。

# objective-c - 在其他班级接受 ivar

> ID：15360290
> 
> 赞同：0
> 
> 时间：2013-03-12T11:45:54.303
> 
> 标签：objective-c, ivar

我有两个视图控制器：`BSViewController`其中包含源 ivars`number`和`array`，以及 `BSotherViewController`作为目标需要接收 ivars 。（`BSViewController`上面有一个按钮，用于连接`BSotherViewController`。）

如何访问两个 ivars 中的值`BSotherViewController`？

BSViewController.h

```
#import <UIKit/UIKit.h>

@interface BSViewController : UIViewController
@property (nonatomic) NSInteger number;
@property (nonatomic, weak) NSArray * array;
@end 
```

BSViewController.m

```
#import "BSViewController.h"

@interface BSViewController ()
@end
@implementation BSViewController
@synthesize number;
@synthesize array;

- (void)viewDidLoad
{
    [super viewDidLoad];
    BSViewController *view = [[BSViewController alloc] init];
    NSArray*  _array = [NSArray arrayWithObjects: @"manny",@"moe",nil];
    view.array = _array;
    view.number = 25;
}

@end 
```

BSotherViewController.h

```
#import <UIKit/UIKit.h>

@class BSViewController;
@interface BSotherViewController : UIViewController
@end 
```

BSotherViewController.m

下面的问题`aview.number`是0，不是25；并且`aview.array`为空。

```
#import "BSotherViewController.h"
#include "BSViewController.h"
@interface BSotherViewController ()

@end

@implementation BSotherViewController

- (id)initWithNibName:(NSString *)nibNameOrNil bundle:(NSBundle *)nibBundleOrNil
{
    self = [super initWithNibName:nibNameOrNil bundle:nibBundleOrNil];
    if (self) {
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];
    BSViewController *aview = [[BSViewController alloc] init];
    NSLog(@"other view: %@", aview);
    NSLog(@"other number: %d", aview.number);  // produces 0, not desired 25
    NSLog(@"other array: %@", aview.array);    // produces null, not desired manny,moe
}
@end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:51:30.703

当您实例化`BSViewController`from时，`BSOtherViewController`您正在调用 init 方法。这些值在`viewDidLoad`in 中设置`BSViewController`，并且在实际加载视图之前不会调用该方法。

尝试覆盖 init 方法并设置值

```
- (id)init {

if (self = [super init]) {
    //Set values
     NSArray*  _array = [NSArray arrayWithObjects: @"manny",@"moe",nil];
     self.array = _array;
     self.number = 25;
}
return self;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:22:30.753

**用init**替换您的 BSViewController **viewDidLoad**方法，如下所示：

 **```
- (id)init {

if (self = [super init]) {

    NSArray*  _array = [NSArray arrayWithObjects: @"manny",@"moe",nil];
    self.array = _array;
    view.number = 25;

}
return self;
} 
```**

# c++ - 从 .txt 读取 int ，将其保存到向量，然后保存到输出文件

> ID：15360291
> 
> 赞同：0
> 
> 时间：2013-03-12T11:45:56.013
> 
> 标签：c++, vector, stream, text-files, fstream

我写了一个神秘的程序，它可以打开并阅读这个 .txt

> `> krol.txt

```
3 7
3 13
2 4
3 1 
```

然后将其保存到向量中，使用一些算法进行一些疯狂的操作，将其保存到另一个向量中并将其流式传输到文件中。但是运行 .exe 后发生了疯狂的事情。它没有显示任何东西，没有任何反应。编译过程中没有错误......是的。我知道出了什么问题。有什么想法吗？

```
#include <iostream>
#include <fstream>
#include <vector>
#include <cstdlib>
using namespace std;
int nwd (int a,int b);
int main(){
    ifstream fin;
    fin.open("krol.txt");
    if (!fin) cout << "WTF" << endl;
    system("PAUSE");
    vector<int> tab;
    int i=0;
    int n=0;
    while (fin>> i){
        tab.push_back(i);
    }
    fin.close();
    vector<int> result;
    bool right=false;
    ofstream outFile;
    outFile.open("save.txt");
    i=0;
    result.at(0)=tab.at(0);
    while(result.at(i)!=1){
        if (right){
            result.push_back(tab.at(i+2));
        }
        else if (nwd(result.at(i),tab.at(i+2))==1) result.push_back(tab.at(i+2));
        else {
            result.push_back(tab.at(i+1)); right=true;
        }
        outFile << result.at(i) << " " ;
        i++;
    }
    outFile.close();
    return 0;
}
int nwd(int a,int b){
    while (a!=b){
        a>b ? a-=b : b-=a;
    }
    return a;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:51:11.433

我想我明白了。您需要将代码 while(result.at(i)!=1){ 更改为这个 while(tab.at(i)!=1){。那只是一个小错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:52:20.870

你的`result`向量是空的，因此这个

```
while(result.at(i)!=1){ 
```

将抛出`out_of_range`异常并导致您的程序终止。

# mysql - Node.js - 并发 SQL 查询使服务器崩溃

> ID：15360293
> 
> 赞同：0
> 
> 时间：2013-03-12T11:45:58.023
> 
> 标签：mysql, node.js

我有一个基本的类似 Twitter 的应用程序，当一个用户在线时可以正常工作。但是，当多个用户联机并尝试执行 SQL 查询时，服务器会崩溃。

发生这种情况是因为该函数为第一个用户关闭了数据库，而第二个用户仍在函数中，然后第二个用户尝试关闭已经关闭的数据库，导致崩溃。

下面以一个基本函数为例：

```
function showAllUsers(req, res){
  dbConnect();
  var query = 'SELECT * FROM USERS';
  connection.query(query, function (err,rows,fields){
    if (err) {
        throw err;
    }
    dbClose(req,res);
    console.log(rows);
    res.render('allUsers', { user: req.user, message: req.flash('info'), users: rows })
  })
} 
```

我正在使用来自 npm 的 mysql 包，但我假设我没有正确使用它。我目前在每次查询之前打开数据库并在之后立即关闭它。

有没有更安全的方法可以做到这一点，或者我可以让它保持打开状态直到服务器退出？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-01-17T17:45:58.043

使用[连接池](https://github.com/felixge/node-mysql#pooling-connections)为我解决了这个问题。

# heroku - 从 git 从 Heroku 上的 Jenkins 中提取

> ID：15360295
> 
> 赞同：0
> 
> 时间：2013-03-12T11:46:01.347
> 
> 标签：heroku, ssh, jenkins

我让 Jenkins 在 heroku 上运行（使用 war 文件）。我正在使用 bitbucket 并将 Jenkins 服务添加到我的私有存储库中，一切正常。

当我将更改推送到远程存储库（bitbucket）时，一切正常，并且在 Jenkins 中启动了新构建。然而，这就是我的问题所在。Jenkins 无法从远程存储库中提取，因为凭据不存在。

我想我需要为 jenkins 添加一个 ssh 密钥，但是如何在 heroku 上执行此操作？还是有其他解决方案？还是根本不可能。

谢谢您的回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T14:15:25.123

您需要将密钥添加到 Git 或让 Jenkins 从持久存储（SQL、NoSQL、环境变量、云存储......）中获取它。将它挂接到您从 Procfile 调用的脚本中的一个好地方。

如果你把它放到 git 中（前提是你的 Git 不是公开的），告诉 Jenkins 密钥在 /app 目录下的某个地方。这可能是最简单的方法。如果您不能信任您的 Git 密钥，那么您可以（ab）使用很多插件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:06:56.650

希望本教程可以帮助[http://www.agilogy.com/blog/heroku-staging-with-jenkins.html](http://www.agilogy.com/blog/heroku-staging-with-jenkins.html)

# php - 将 PHP 数组转换为 ColdFusion 语法

> ID：15360297
> 
> 赞同：1
> 
> 时间：2013-03-12T11:46:01.660
> 
> 标签：php, arrays, coldfusion

我有以下一段将值存储在数组中的 PHP 代码，但我正在用 ColdFusion 重写应用程序，并且不知道在 ColdFusion 中执行相同功能的语法是什么。

```
$data = array("isReadOnly" => false, "sku" => "ABCDEF", "clientVersion" => 1, "nuc" => $NUC, "nucleusPersonaId" => $personaID, "nucleusPersonaDisplayName" => $dispname, "nucleusPersonaPlatform" => $platform, "locale" => $locale, "method" => "idm", "priorityLevel" => 4, "identification" => array( "EASW-Token" => "" )); 
```

有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T11:59:39.357

您在 PHP 中拥有的东西，看起来就像 ColdFusion 中所谓的“结构”或“对象”。

试试这个代码，它将你的 PHP 转换为 CFML 语法：

```
<cfset variables.data = {

    "isReadOnly" = false, 
    "sku" = "ABCDEF", 
    "clientVersion" = 1, 
    "nuc" = variables.NUC, 
    "nucleusPersonaId" = variables.personaID, 
    "nucleusPersonaDisplayName" = variables.dispname, 
    "nucleusPersonaPlatform" = variables.platform, 
    "locale" = variables.locale, 
    "method" = "idm", 
    "priorityLevel" = 4, 
    "identification" = { "EASW-Token" = "" }

} />

<cfdump var="#variables.data#" /> 
```

它利用了`{}`声明，该声明在 ColdFusion 中创建了一个结构。您可以使用大括号（称为隐式结构）或使用`structNew()`函数来执行此操作。隐式版本是更新且更受欢迎的方法。

另请注意，您需要转换变量。在 PHP 中，您的变量是贴花的`$withTheDollarSign`。在 ColdFusion 中，变量是使用`<cfset />`标签创建的。

这些是相同的：

**PHP**

```
<?php $hello = 'world'; ?> 
```

**冷融合：**

```
<cfset variables.hello = 'world' /> 
```

你也可以这样写：

```
<cfset hello = 'world' /> 
```

但是，我喜欢很好地练习始终确定变量的范围。variables 作用域是变量的默认作用域，但明确说明这一点以避免命名冲突仍然是一种好习惯。

希望这可以帮助。米奇。

**PS** - 作为奖励点，数组以非常相似的方式创建，除了`{}`你会使用`[]`. 这是一篇关于如何在 ColdFusion 中创建结构和数组的精彩文章。

[http://www.bennadel.com/blog/740-Learning-ColdFusion-8-Implicit-Struct-And-Array-Creation.htm](http://www.bennadel.com/blog/740-Learning-ColdFusion-8-Implicit-Struct-And-Array-Creation.htm)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-12T11:58:20.680

这不是一个数组。这是一个映射（键值对）。PHP 在这两种结构之间没有区别（“数字”和“关联”数组除外），但 ColdFusion（基于 Java）可以。在 ColdFusion 中，等价的将是一个结构：

```
 <cfscript>
     data = structNew();
     data["isReadOnly"] = false;
     data["sku"] = "ABCDEF";

     // You can also nest structs, if need be
     data["identification"] = structNew();
     data["identification"]["EASW-Token"] = "";
 </cfscript> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:26:14.447

另一种选择是分别声明每个选项。您也不需要`variables.`前缀。此语法可能最常用于`attributecollection=""`标记选项，例如`<cfmail>`但在任何情况下都可以使用。

```
<cfset data = {} /> // create a struct
<cfset data.isReadOnly = false />
<cfset data.sku = 'ABCDEF' />
<cfset data.clientVersion = 1 />
<cfset data.nuc = NUC />
<cfset data.nucleusPersonaId = personaID />
<cfset data.nucleusPersonaDisplayName = dispname /> 
<cfset data.nucleusPersonaPlatform = platform />
<cfset data.locale = locale />
<cfset data.method = 'idm' />
<cfset data.priorityLevel = 4 />
<cfset data.identification = { EASW-Token = '' } />

<cfdump var="#data#" /> 
```

# javascript - facebook链接的javascript常规表达问题

> ID：15360300
> 
> 赞同：0
> 
> 时间：2013-03-12T11:46:05.657
> 
> 标签：javascript, regex, facebook

我正在尝试以下

```
new RegExp(/(^(https:\/\/)((w{3}\.)?)facebook\.com\/(?:[^\s()\\\[\]{};:'",<>?«»“”‘’]){5,255}$)|(^$)/i).test('https://www.facebook.com/NocApps?ref=ts&fref=ts') 
```

但这返回 false

如果我删除“？” 从“ [https://www.facebook.com/NocAppsref=ts&fref=ts](https://www.facebook.com/NocAppsref=ts&fref=ts) ”返回true。为什么？我错过了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:12:58.667

您在`?`此处排除可能的字符`[^\s()\\\[\]{};:'",<>?«»“”‘’]`

# c# - XNA 项目中 Content 目录中的子目录，可以吗？

> ID：15360302
> 
> 赞同：0
> 
> 时间：2013-03-12T11:46:12.800
> 
> 标签：c#, xna

我在 XNA 的 GameProject 的 Content 目录中有很多文件。我想清理混乱并将它们放入子目录中。但是当我完成后尝试加载内容时出现错误。我的目录结构是这样的：

```
Content
|+Ships
||-1.png
||-2.png
||-3.png
||-4.png
||-5.png
|-1-player.png
|-... 
```

当我尝试加载时：

```
Texture2D ship1 = Content.Load<Texture2D>("1"); 
```

它给我一个错误

> “Microsoft.Xna.Framework.ni.dll 中发生了‘Microsoft.Xna.Framework.Content.ContentLoadException’类型的异常，但未在用户代码中处理

如果有这个异常的处理程序，程序可以安全地继续。”

* * *

那么，有什么解决方案可以在 Content 目录中有很多子目录吗？

PS：我有正确的资产名称

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:50:52.890

如果我的图表正确，您想导入一个名为“1-player.png”的文件。你为什么不使用

```
Texture2D ship1 = Content.Load<Texture2D>("1-player"); 
```

然后？当然，您可以为您的`ContentManager`. 简单定义路径

```
Texture2D item = Conten.Load<Texture2D>(@"Path\To\Your\Item.png"); 
```

请参阅[此处](http://msdn.microsoft.com/en-us/library/bb197848.aspx)，尤其是参数的注释。

# c# - 丢弃并打印 C 语言中的其他行

> ID：15360309
> 
> 赞同：0
> 
> 时间：2013-03-12T11:46:25.607
> 
> 标签：c#

应用程序GUID：`643d4128-1484-4aa1-8c17-38ae3b0cf974`

应用程序GUID：`3974af88-1fb1-4ba7-84b9-59aa00c707bb`

我希望我的程序丢弃包含“appGUID”的某些特定值的行，如上所示。

我的代码在这里：

```
IEnumerable<string> textLines
        = Directory.GetFiles(@"C:\Users\karansha\Desktop\Unique_Express\", "*.*")
                   .Select(filePath => File.ReadLines(filePath))
                   .SelectMany(line => line)
                   .Where(line => !line.Contains("appGUID: "))
                   .ToList(); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:56:21.893

您可以使用正则表达式通过匹配适当的模式来检查是否`line`包含特定字符串。以下代码将匹配不包含任何与表达式匹配的所有行，`appGUID:`后跟 GUID 形式的字符串：

```
IEnumerable<string> textLines = Directory.GetFiles(@"C:\Users\karansha\Desktop\Unique_Express\", "*.*")
    .Select(filePath => File.ReadLines(filePath))
    .SelectMany(line => line)
    .Where(line => 
        Regex.Matches(line, 
            "appGUID: [0-9a-fA-F]{8}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{4}-[0-9a-fA-F]{12}").Count == 0)
    .ToList();
    } 
```

# jquery - jquery从函数中排除div

> ID：15360311
> 
> 赞同：0
> 
> 时间：2013-03-12T11:46:27.117
> 
> 标签：jquery, checkbox, prop

我有一些 jquery 取消选中所有复选框，然后如果一个被选中，那么它将取消选中所有其他复选框！我想在页面上排除一个带有一些复选框的 div！

要排除的 div 具有 class="addon"..

```
$(document).ready(function (){
$(function(){
    $('input:checkbox').prop('checked', false)
    $('input:checkbox').click(function(){
        if($(this).is(':checked')){
            $('input:checkbox').not(this).prop('checked', false);        
        }
    });
})
recal();

}); 
```

或者我怎样才能使上述代码仅适用于类名为 notaddon.. 的 div 内的复选框，而不是页面上的所有复选框！？？？

（编辑：我实际上解决了这个问题，但罗杰给了我我想要的，即使这不是我的意思，我给了罗杰支票！有趣的是，直到我看到 Pratik 的回应，我才意识到我问错了问题！所以他应该得到一些信任..）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:53:41.933

在此代码之后，为 div 内的所有复选框编写另一个代码并取消选中复选框的属性。

`$('#yourExcludeDivID').find('input[type=checkbox]:checked').removeAttr('checked');`

如果要从 div 中完全删除复选框，请使用

`$('#yourExcludeDivID').find('input[type=checkbox]:checked').remove();`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:53:49.810

`$('input:checkbox', '#myDivId')`将为您提供包含在 div 中的所有复选框`id="myDivId"`

所以在你的情况下`$('input:checkbox', '.notaddon')`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:54:07.757

用这个

例如，我想在带有类测试的 div 中检查复选框

**HTML**

```
<div class="test"><input type="checkbox" id="test"/></div>
<input type="checkbox" id="test1"/> 
```

**jQuery**

```
$(".test input:checkbox").prop('checked', true); 
```

或者，如果我理解正确，您可能想要您的这段代码

```
 $('.notaddon input:checkbox').prop('checked', false)
    $('.notaddon input:checkbox').click(function(){
        if($(this).is(':checked')){
            $('.notaddon input:checkbox').not(this).prop('checked', false);        
        }
    }); 
```

希望这可以帮助

# c++ - Cpp 错误，包括 Visual Studio 2012 中的多个文件

> ID：15360312
> 
> 赞同：0
> 
> 时间：2013-03-12T11:46:30.800
> 
> 标签：c++

我试图在 Visual Studio 2012 上创建多个 Cpp 文件，我的代码部分在这里：

**外部测试.ccp**

```
// externTest.cpp : Defines the entry point for the console application.
//
#include "...\externTest\externTest\write.h"
//////////////////
// Global variables
/////////////////
int Count = 5;
/////////////////
// Extern functions
/////////////////
extern void write_extern ();
int main()
{
    int count = Count;
    write_extern();
    getchar ();
    return 0;
} 
```

**写.h**

```
#ifndef WRITE_H
#define WRITE_H

////////////////////////
// Includes
////////////////////////
#include "stdafx.h"
#include <iostream>
using namespace std;
////////////////////////
// Variables
////////////////////////
extern int count;
////////////////////////
// Function prototype
////////////////////////
void write_extern (void);
///////////////////////
#endif // !WRITE_H 
```

**写.cpp**

```
// write.ccp
//////////////////
// Includes
/////////////////
#include <...\externTest\externTest\write.h>
////////////////////
// Functions definition
////////////////////
void write_extern ()
{
    cout<< "Count is: \t" << count;
} 
```

最后得到以下错误，即使我正确定义了路径，也基本上无法识别**write.h文件：**

> falouji\documents\visual studio 2012\projects\externtest\externtest\write.cpp(5): 警告 C4627: '#include <...\externTest\externTest\write.h>': 查找预编译头时跳过使用 1 > 将指令添加到“stdafx.h”或重建预编译头文件

最后提前感谢您的帮助:)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:47:24.983

您必须在项目选项中包含`stdafx.h`或禁用[预编译头文件。](http://msdn.microsoft.com/en-us/library/3dxawkbx.aspx)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:50:14.700

您已经创建了一个使用预编译头文件的项目，因此编译器会在 .cpp 文件中查找 #include "stdafx.h" 行作为第一个包含，您可以通过以下方式进行更改：

1）右键单击解决方案视图中的文件并打开属性

2) 展开`C/C++`小节

3）在`Precompiled Headers`并设置`Create/Use Precompiled Header`为`Not Using Precompiled Headers`

或者只是创建一个空项目并将文件添加到其中，以最佳方式为准。

# javascript - 嵌套函数中的 Javascript 变量值

> ID：15360319
> 
> 赞同：0
> 
> 时间：2013-03-12T11:46:42.017
> 
> 标签：javascript

我有一个 JS 函数，它被调用以获取特定月份的帖子标题列表。数据作为 JSON 对象返回。我希望将数据返回给调用函数。响应的形式为：

```
{
  "success":true,
  "days":[
     {
        "date":"2,March 2013",
        "posts":[
           {
              "post_id":"10",
              "post_title":"tgfkyhhj",
              "created_on":"2013-03-02 21:24:17",
              "time":"09:24 PM"
           }
        ]
     } 
  ] 
} 
```

我希望返回此 JSON 的日期部分。

功能如下：

```
function archivePostMonth(month) {
    var days; 
    $.ajax({
        'type' : 'get',
        'url' : base_url + 'index.php/blog/blogArchiveMonth',
        'data' : {
            'blogId' : blogId,
            'month' : month,
        },
        success : function(response) {
            var res = jQuery.parseJSON(response);
            if (res.success == true) {
                console.log(res.days); //displays the data
                days = res.days;
                console.log(days); // displays the data
            }
        }
    });
    console.log(days); //undefined
    return days; // returns undefined
} 
```

无论函数返回什么未定义。我无法弄清楚问题所在。有一个更好的方法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:49:57.350

ajax 是异步的，因此，在您的代码中，您正在向服务器执行请求并同时返回 days 的值（具有未定义值的变量）。

在调用成功回调之前，变量 days 没有值，这发生在您的函数已经返回 undefined 之后。

# php - 如何决定何时在 $_SESSION 上使用数据库

> ID：15360320
> 
> 赞同：1
> 
> 时间：2013-03-12T11:46:44.737
> 
> 标签：php, database, session-variables

我进行了快速[搜索](https://stackoverflow.com/search?q=session%20vs.%20database)，似乎所有相关问题都没有完全达到我的目的，或者太具体而无法帮助我。

我首先考虑的是性能。我的理解是，默认情况下，存储信息`$_SESSION`意味着服务器将文件写入磁盘。`$_SESSION`对于小型 LAMP 服务器或基本的小型托管网站，您的变量需要获得多大才能使数据库成为更有效的选择。10、100、1000、10000 个数组成员`$_SESSION`会是您开始考虑使用数据库的地方吗？还是流量更重要？

第二个考虑是安全性。在其他一些答案中，我看到了诸如*“永远不要将 xxx 存储在`$_SESSION`变量中”*之类的语句。将信息存储在数据库中实际上是否比 更安全`$_SESSION`，或者如果`$_SESSION`服务器设置正确，可以使其与数据库一样安全？

我的感觉是，许多在野外开发的网站一`$_SESSION`开始都会使用，不一定要重构才能使用数据库。如果`$_SESSION`无论如何您都可以将变量从文件重定向到数据库，那么使用它*总是*更好，`$_SESSION`如果性能是一个问题，以后再指向数据库？

对于这种设计选择，是否还有其他考虑因素？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:56:08.553

你错过了主要的事情，那就是你存储在数据库中的任何东西都是无限期的，而会话只持续到用户注销或过期。

因此，与会话相反，将某些内容存储在数据库中的主要原因是**您希望保留它**。

在任何需要可扩展性的站点上，您实际上都会将会话存储在数据库中，因此关于性能的第一点是无关紧要的。

至于安全性，只要对会话数据进行适当的加密，就足够安全了。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:56:41.717

我个人只会使用会话来存储最少的信息。如果您需要在一个会话中存储 10,000 个数组项，则很可能以不同的方式编写。

默认情况下，PHP 会话存储在磁盘上。

一些发行版带有名为 suosin [http://www.hardened-php.net/suhosin/](http://www.hardened-php.net/suhosin/)的强化 PHP ，它可以设置为加密会话。

至于会议的效率如何，我会说非常。您可能永远不必担心这一点，如果您遇到问题，您可能希望将会话存储在内存中而不是磁盘/数据库中。

可以更改 PHP 会话的存储/加载方式，请查看： http: [//php.net/manual/en/session.customhandler.php](http://php.net/manual/en/session.customhandler.php)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:53:25.053

我认为我不会太担心会话文件的大小，因为使用数据库更具可扩展性，我怀疑您会注意到中小型站点的巨大性能差异。

至于安全方面，不建议将用户数据存储在会话中（用户名、哈希、电子邮件）。如果您想使用纯会话，您可以考虑加密您的会话，许多框架（如 CodeIgniter）提供。

总而言之，在我看来，您应该始终将数据库用于用户信息（包括 IP 地址）和会话用于一般数据（搜索词、分析等......）

希望这可以帮助您做出决定。

问候，詹姆斯

# php - jqgrid 的日期仅设置为 1999-11-30 00:00:00

> ID：15360324
> 
> 赞同：1
> 
> 时间：2013-03-12T11:46:50.690
> 
> 标签：php, javascript, jquery, jqgrid

我正在显示一个包含 DATETIME 值的表。尽管值显示正确，但一旦编辑了 datetime 值，它会自动转换为“1999-11-30 00:00:00”日期，无论是在 jqgrid 还是在数据库中，无论写入什么日期。

```
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined offset: -1 in /var/www/html/testing/tables/php/jqGrid.php on line 3922, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined offset: 0 in /var/www/html/testing/tables/php/jqGrid.php on line 3980, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined offset: 0 in /var/www/html/testing/tables/php/jqGrid.php on line 3980, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined offset: 0 in /var/www/html/testing/tables/php/jqGrid.php on line 3980, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined offset: 0 in /var/www/html/testing/tables/php/jqGrid.php on line 3980, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined offset: 0 in /var/www/html/testing/tables/php/jqGrid.php on line 3980, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined offset: 0 in /var/www/html/testing/tables/php/jqGrid.php on line 3980, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined index: F in /var/www/html/testing/tables/php/jqGrid.php on line 3981, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined index: M in /var/www/html/testing/tables/php/jqGrid.php on line 3982, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined index: n in /var/www/html/testing/tables/php/jqGrid.php on line 3984, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined index: j in /var/www/html/testing/tables/php/jqGrid.php on line 3986, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined index: o in /var/www/html/testing/tables/php/jqGrid.php on line 3988, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined index: y in /var/www/html/testing/tables/php/jqGrid.php on line 3989, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined index: l in /var/www/html/testing/tables/php/jqGrid.php on line 3990, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined index: D in /var/www/html/testing/tables/php/jqGrid.php on line 3991, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined index: N in /var/www/html/testing/tables/php/jqGrid.php on line 3992, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined index: w in /var/www/html/testing/tables/php/jqGrid.php on line 3993, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined variable: month in /var/www/html/testing/tables/php/jqGrid.php on line 3994, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined variable: day in /var/www/html/testing/tables/php/jqGrid.php on line 3994, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined variable: year in /var/www/html/testing/tables/php/jqGrid.php on line 3994, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined index: G in /var/www/html/testing/tables/php/jqGrid.php on line 3996, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined index: h in /var/www/html/testing/tables/php/jqGrid.php on line 3997, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined index: g in /var/www/html/testing/tables/php/jqGrid.php on line 3998, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined index: O in /var/www/html/testing/tables/php/jqGrid.php on line 3999, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined index: Z in /var/www/html/testing/tables/php/jqGrid.php on line 4000, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined variable: year in /var/www/html/testing/tables/php/jqGrid.php on line 4006, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined variable: month in /var/www/html/testing/tables/php/jqGrid.php on line 4007, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined variable: day in /var/www/html/testing/tables/php/jqGrid.php on line 4008, referer:--------------------users.php
[Tue Mar 12 11:39:28 2013] [error] [client 171.43.1.4] PHP Notice:  Undefined variable: hour in /var/www/html/testing/tables/php/jqGrid.php on line 4010, referer:--------------------users.php 
```

什么可能导致这样的问题？

我没有为 jqgrid 使用 datepicker 插件（或任何其他插件）。

触发提交按钮事件时，我尝试使用 ajax 手动更新数据库中的值

```
$grid->setNavEvent('edit', 'onclickSubmit', $updateDate); 
```

但似乎手动更新被 jqgrid 更新所覆盖。

什么可能导致错误的日期？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:16:57.390

$grid->setUserTime("Ymd H:i:s");

干杯。

# c++ - mfc 从另一个对话框更改对话框的光标

> ID：15360331
> 
> 赞同：1
> 
> 时间：2013-03-12T11:47:19.833
> 
> 标签：c++, mfc, dialog, cursor

我有一个有两个子对话框的应用程序。在一个对话框上按下按钮时，我希望更改另一个对话框的光标。除了向窗口发送消息之外，还有其他方法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:56:35.107

通过构造函数 (m_pParent) 使对话框的父类可用，并在那里引用其他对话框的成员。您可以在一个对话框中声明一个朋友类，以使私有成员可以从另一个对话框访问，并以这种方式更改光标。

# jquery - Jquery Selectable，通过拖动鼠标禁用多选

> ID：15360339
> 
> 赞同：1
> 
> 时间：2013-03-12T11:47:46.730
> 
> 标签：jquery, jquery-ui, selectable, jquery-ui-selectable

我想在鼠标拖动事件上禁用多选选项，但用户可以按住控制键一一选择多个。问题是，我在 select 事件中发送了一个 ajax 服务调用，如果我选择了相当多的大选项，它会跳过一些。在调试模式下，当我让每个调用都在断点上发送时，它运行良好。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-14T04:49:28.323

到目前为止，我发现的唯一方法是破解代码！当前源代码在这里： [https ://github.com/jquery/jquery-ui/blob/master/ui/selectable.js](https://github.com/jquery/jquery-ui/blob/master/ui/selectable.js)

您需要基本上`_mouseDrag`完全剥离，但留下`_mouseStart`and `_mouseStop`。侵入性较小的是为其添加一个特殊选项，如果设置了标志，则返回`_mouseDrag`.

* * *

顺便说一句，我的用例比你的简单：拖动到多选不仅不需要，而且实际上会妨碍。“妨碍”我的意思是如果您按住 ctrl-click 选择一个项目，然后按住 ctrl-click 取消选择它就可以了。但是，如果在 ctrl-click 取消选择时拖动鼠标（只是稍微），mouseDrag 事件会接管，因此 ctrl 按钮会被忽略，并且它会再次被选中（即取消选择失败）。这就是技术人员的解释，用户所说的是：有时 ctrl-click 取消选择不起作用。

# .net - .NET - Return 是否阻止对象处理

> ID：15360342
> 
> 赞同：5
> 
> 时间：2013-03-12T11:47:56.543
> 
> 标签：.net, vb.net, function, return

给定以下代码：

```
 Function GetSomething() As Integer
    Using dbConn As New SqlConnection("Connection_String")
      dbConn.Open()
      Using dbCmd As New SqlCommand(" SELECT SOMETHING ....", dbConn)
        Return Integer.Parse(dbCmd.ExecuteScalar())
      End Using
      dbConn.Close()
    End Using
  End Function 
```

Return 是否会阻止执行功能块的其余部分，即关闭数据库连接以及在 Using 块完成时调用的隐含 Dispose()？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-03-12T11:49:52.633

不，一条[`Using`语句](http://msdn.microsoft.com/en-us/library/htd05whh.aspx)等同于一条[`Try`/`Finally`](http://msdn.microsoft.com/en-us/library/fk6t46tz.aspx)语句 - 因此在执行离开块时执行处置，无论是通过到达块的末尾、正常返回还是通过异常。

不过，您不需要显式`Close`调用，因为无论如何您都在处理连接。

# delphi - 在 Firemonkey 应用程序中显示 PDF

> ID：15360343
> 
> 赞同：0
> 
> 时间：2013-03-12T11:47:59.397
> 
> 标签：delphi, pdf, delphi-xe3, firemonkey-fm2

如何在 Firemonkey 应用程序中查看 PDF 文件？

我尝试将 Adob​​e reader ActiveX 添加到我的项目中，但出现错误！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-08-27T17:04:18.743

我目前使用 Adob​​e Pdf Reader Active X 在 firemonkey 中显示 pdf，代码如下：

```
ACRO := TAcroPDF.Create( Self );
ACRO.Width := Width;
ACRO.Height := Height;
ACRO.ParentWindow := FmxHandleToHWND( Self.Handle );
ACRO.LoadFile( 'C:\ProgramData\teste.PDF' );
// if focus no set, user need click on activeX component
ACRO.SetFocus; 
```

注意：您需要添加使用“FMX.PlatForm.Win”并将 activeX 导入您的项目。通常生成的文件是“AcroPDFLib_TLB.pas”，您需要将其添加到使用中。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-13T03:01:19.223

3个解决方案：

1.  如果必须嵌入：尝试嵌入式浏览器。

    *   [DelphiChromiumEmbedded](https://code.google.com/p/delphichromiumembedded/)在 FireMonkey 下工作（参见[Demo](https://code.google.com/p/delphichromiumembedded/source/browse/#svn/trunk/demos/firemonkey)）

    *   根据[WikiPedia](http://en.wikipedia.org/wiki/Chromium_%28web_browser%29)的说法，Chromium 从 6.0 版开始就内置了对 pdf 的支持。

2.  否则，您始终可以启动外部查看器。

3.  最坏的情况：将您的 pdf 转换为 html

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T22:14:58.920

您不能在 firemonkey 中托管 ActiveX 控件。我所知道的 Firemonkey 没有 PDF 显示组件，但如果有，它必须单独实现或在后台使用大量条件定义，以便它可以在 Mac OS X 和 Windows 上运行。

我知道您可以将一个 Firemonkey 表单放入 VCL 应用程序中的方法，但不知道您可以做任何相反的方法。简而言之，没有简单的方法可以做到这一点，最短的路径是编写自己的组件，它必须以某种方式在 Windows 上将 PDF 查看器作为 OLE 对象或 ActiveX 控件托管，并以其他方式实现Mac OS X。

# r - ":=" 更改另一个 data.table

> ID：15360344
> 
> 赞同：5
> 
> 时间：2013-03-12T11:47:59.833
> 
> 标签：r, data.table

我只是偶然发现了 data.table 中的一些奇怪行为。简而言之，使用 ":=" 更改（替换）data.table 中列的值似乎也更改了另一个 data.table 中的值（这是 := 操作之前的原始 data.table 的副本）。示例代码如下。

我是否遗漏了其他优秀软件包的基本知识，还是应该有错误报告？

子问题： ifelse() 是更改值的最佳方法，如下所示（在一个相当大的表中，约 10m 行）？它按预期完成工作，速度足够快（几秒钟），但带有详细信息 = TRUE data.table 抱怨（“第 1 项的 RHS 已重复。命名向量或回收列表 RHS。）我无法到目前为止解密消息:)

```
library(data.table)
options(datatable.verbose=TRUE)
DT1 <- data.table(f=as.integer(c(1,2,1,1,1,2,1)))
DT2 <- DT1

tables()

DT1
DT2
identical(DT1, DT2) # OK, they should be identical.

# I am not sure ifelse() is the best way to do this, but it does what I want, even though data.table complains
DT1[, f := as.character(ifelse(f==1,"a","b"))]

tables()
DT1
DT2
identical(DT1, DT2) # Not OK -- why did DT2 change? 
```

如果相关，我的系统是：

> ```
> R version 2.15.3 (2013-03-01) -- "Security Blanket"
> Platform: x86_64-w64-mingw32/x64 (64-bit)
> data.table 1.8.8
> All 943 tests in test.data.table() completed ok in 27.869sec 
> ```

谢谢。

# java - 如何将图像保存为 RTF 格式的文件？

> ID：15360346
> 
> 赞同：1
> 
> 时间：2013-03-12T11:48:09.283
> 
> 标签：java, image, rtf, jtextpane

我有一个问题，因为我能够将文本保存到 RTF 文件，也能够将图像插入到文件中，但是当我保存文件并再次加载时，图像没有显示。我曾尝试使用 base64 来解决这个问题，但没有奏效。如何才能将图像保存到 RTF 文件中，并在文件重新打开时显示？

这是我的代码：

```
JFileChooser fileChooser = new JFileChooser();
int option = fileChooser.showOpenDialog(null);
File file = fileChooser.getSelectedFile();

if (option == JFileChooser.APPROVE_OPTION) {
    try {
        BufferedImage image = ImageIO.read(file);
        image = Scalr.resize(image, 200);
        document = (StyledDocument) textPane.getDocument();
        javax.swing.text.Style style = document.addStyle("StyleName",
                null);
        StyleConstants.setIcon(style, new ImageIcon(image));
        document.insertString(document.getLength(), "ignored text",
                style);
    }
    catch (Exception ex) {
        ex.printStackTrace();
    }
}

if (option == JFileChooser.CANCEL_OPTION) {
    fileChooser.setVisible(false);
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-10T07:03:13.923

尝试[http://java-sl.com/advanced_rtf_editor_kit.html](http://java-sl.com/advanced_rtf_editor_kit.html)而不是默认的

# objective-c - Objective-C 使用合成值

> ID：15360347
> 
> 赞同：1
> 
> 时间：2013-03-12T11:48:11.660
> 
> 标签：objective-c

假设我创建了一个自定义`UIView`子类，它有一个名为`imageView`. 我合成`imageView`如下：

```
@synthesize imageView = _imageView; 
```

`_imageView`使用而不是`self.imageView`在我的所有自定义类方法中使用是否安全？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:00:22.920

不，直接访问 ivar是*不安全的。*只是为了说清楚：

1.  `_imageView`简称`self->_imageView`：直接 ivar 访问。
2.  `self.imageView`缩写`[self imageView]`：使用访问器方法。

在类实现中使用访问器具有以下优点：

*   不会绕过覆盖属性访问器的子类。
*   KVO 合规性保持不变。
*   对于`atomic`属性，即使另一个线程同时使用 setter，也可以安全地使用返回值。
*   对象所有权语义得到正确处理。这在 MRC（非 ARC）下最为重要，但即使在 ARC 下，`copy`在分配给 ivars 时仍然很容易忘记声明`copy`其值的属性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T11:55:27.643

假设您没有覆盖访问器是安全的。例如，如果您提供替代行为`-setImageView`，则`ivar`直接调用 将跳过该行为。作为一般设计规则，我倾向于直接使用访问器方法而不是 ivar。在您确实覆盖访问器的情况下，它不太容易出现意外的副作用并且与继承相比更好。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:01:42.327

It is sort of save but not good practice. You should use _imageView only in the setter and getter itself andn in init. Especially when you may whant to subclass your class later. The subclass may intentionally overwrite the getter and setter methods. In that case _imageView may not contain what you expect. Use self.imageView. That will invoke the accessors

# php - AJAX get 方法在第二次单击时不起作用

> ID：15360349
> 
> 赞同：0
> 
> 时间：2013-03-12T11:48:12.587
> 
> 标签：php, jquery, ajax, get, modal-dialog

我正在使用 jQuery v1.7.2。

以下代码以 bootstrap (2.2.1) 模态形式生成适用的复选框：

```
 $sql1="Select $sub_listing_id,$sub_listing_name FROM $sub_listing";
    $results=$wpdb->get_results($sql1,ARRAY_A);

    $html_code= '<form id="multiselect">';
    $num=0;
    foreach($results as $key=>$value)
    {
        foreach($value as $k1=>$v1)
        {        
            if($k1==$sub_listing_id)
            {
                $sub_listing_id_val=$v1;
            }
            if($k1==$sub_listing_name)
            {
                $sub_listing_name_val=$v1;

    $html_code.= '<input type="checkbox" name="list" value="'.$sub_listing_id_val.'">&nbsp;&nbsp;'.$sub_listing_name_val.'&nbsp;&nbsp;&nbsp;&nbsp;';
    $num=$num + 1;
    if($num%5==0)
    $html_code.= '<br/><br/>';
            }
        }
    }
    $html_code.= '</form>';
    echo $html_code; 
```

现在，我选择了一些复选框并通过以下 jQuery 传递选定的值：

```
$('#btn-add-sub-listing-save').click(function (e){
    e.preventDefault();
    var ajax_url='add_sub-listing.php';
    var dataString=$('#multiselect').serialize();
    showLoader('.modal-body');
    dataString=dataString.replace(/&/g,' AND ');

    $.ajax({
    url: ajax_url + '?' + dataString,
    type: 'GET',
    dataType: 'html',
    success: function(data){
        $('.modal-body').html(data);
    }
});
}); 
```

如果我编辑 jQuery：

```
$('.modal-body').html(dataString); 
```

它工作得很好。这意味着 #multiselect 一直被序列化，但它不会被第二次附加。因此，我无法获取 mu 登录页面上的值，因此无法取得进展。

我使用过缓存：假和异步：假。不过，还是不行！请提出您的建议。

也许引导模式缓存与此有关。我之前通过使用以下 jQuery 克服了这种情况：

```
$('.btn-add-sub-listing').click(function (e){
    e.preventDefault();
    $('#add-sub-listing-modal').removeData("modal");
    $('#add-sub-listing-modal').modal({remote: $(this).attr("href")})
    $('#add-sub-listing-modal').modal('show');

}); 
```

在这里，我使用了“href”。我可以为“href”不适用的按钮做吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:54:00.780

当您替换 HTML 时，您很可能会用一个新按钮替换按钮，这将取消点击事件。

每次替换 HTML 内容时都应该重新连接 click 事件，或者使用[jQuery`on`方法](http://api.jquery.com/on/)连接事件。这将适用于您`body`在触发事件时匹配的任何按钮元素。

```
$('body').on('click', '#btn-add-sub-listing-save', function(e)
{
    // handler as before
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:00:55.520

添加一个 Temp 变量并在 ajax 之前检查它

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2020-03-31T12:33:59.977

这对我有用

```
$('body').on('click', '#btn', function(e)
{
    // you code here
}); 
```

# internet-explorer - IE CSS 背景图像变通

> ID：15360350
> 
> 赞同：1
> 
> 时间：2013-03-12T11:48:15.480
> 
> 标签：internet-explorer, css, browser

下面是我在页面顶部的徽标的 CSS 代码，它在除 IE8 之外的所有浏览器中将其自身调整为用户设备大小忽略约束比例并将图像拉伸到最大尺寸，例如 90% 屏幕宽度。什么是 IE 的遗留/回退代码以防止这种行为发生？

注意：如果可能的话，我需要当前的边距和高度百分比，因为这样可以使徽标居中并在大多数设备上保持适当的比例。例如我不想要一个固定的宽度

CSS 代码

```
#logo-bounding-box {
      background-image: url(../img/logo.png);
      background-size: contain;
      position:relative;
      background-repeat: no-repeat;
      margin:0 auto 0 auto;
      background-position:center;
      height: 90%;
      width: 90%;
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:56:27.407

最好不要将图像用作背景图像。

只需将其作为页面上的普通 img 标签放置 - 可能在 DIV 中。

```
<div class="logo"><img src="logo.png" alt=""></div>

img {
    max-width: 100%;
}

.logo {
    width: 90%;
    margin: 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:33:47.633

background-size: contains/cover 规则不存在 lt-ie9 所以你需要使用一些后备。有一些 ie 过滤器可以工作：

```
filter: progid:DXImageTransform.Microsoft.AlphaImageLoader(src='images/logo.gif', sizingMethod='scale');
-ms-filter: "progid:DXImageTransform.Microsoft.AlphaImageLoader(src='images/logo.gif', sizingMethod='scale')"; 
```

或者你可以试试这个[https://github.com/louisremi/jquery.backgroundSize.js](https://github.com/louisremi/jquery.backgroundSize.js)

或者只是使用一个 img 元素集来拉伸到它的容器，如前所述。

# javascript - 在 JavaScript 填充上触发动态操作

> ID：15360351
> 
> 赞同：0
> 
> 时间：2013-03-12T11:48:17.807
> 
> 标签：javascript, jquery, oracle, oracle-apex

我正在 Apex 4.1 中开发表单。我有地址查找字段，它使用 Javascript 连接到地址数据库并将地址行粘贴到单独的字段（地址 1、地址 2、城镇、邮政编码）中。

在同一页面中，我的报告显示了我们数据库中的客人记录，如果找到匹配项（我们的客人数据库中已经存在的地址），它就会显示它。我在页面上几乎没有动态操作，部分刷新正在更新报告中的结果。因此，如果有人输入 last_name, 'onChange'，它将查询我们的客人数据库并更新结果。

如果我从 Javascript 动态填充地址字段，我应该如何或选择哪个事件来触发部分报告刷新？因此，地址查找机制将地址返回并粘贴到字段中，并更改字段的状态，但 Apex 不会将其作为“onChange”进行选择。如果我专注于字段和离开字段，那么它会正确触发脚本。

任何帮助，非常感谢。截止日期临近！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:05:10.183

通过 javascript 或 jQuery 更改项目时，不会触发任何更改事件。然而，具有“设置值”动作和“更改”触发的动作的动态动作将相互触发，即使它们是幕后的 javascript。
由于您没有使用动态操作，因此您需要自己触发更改事件。当您使用新值设置项目时，触发它。例如，使用 jQuery：

```
$("#P1_LAST_NAME").val(lNewValue).change(); 
```

# perl - 匈牙利语中“E”和“É”的排序规则，使用 Perl 和 Unicode::Collat e::Locale

> ID：15360354
> 
> 赞同：1
> 
> 时间：2013-03-12T11:48:25.560
> 
> 标签：perl, unicode, multilingual

我有以下测试脚本：

```
#!/usr/local/ActivePerl-5.16/bin/perl

use 5.014_001;
use utf8;
use Unicode::Collate;
use strict;
use warnings;
use Carp;
use Data::Dump;
use Encode qw( encode_utf8 );
use Unicode::Collate::Locale;

binmode STDOUT, ':encoding(UTF-8)';

my @words =("Értékesítési", "Értékesítési", "Érvényes", "EU-s", "Eszközmozgás");

my $coll = Unicode::Collate::Locale->new(locale => "hu");

my @result = $coll->sort(@words);

foreach my $item (@result){
print $item, "\n";
} 
```

它输出：

```
Értékesítési
Értékesítési
Érvényes
Eszközmozgás
EU-s 
```

但根据我的匈牙利线人，维基百科的“E”在“É”之前。有人可以告诉我发生了什么吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:26:27.580

匈牙利排序规则将 E 和 É 在初级级别视为相同，因此结果是正确的。当两个词的区别仅在于有无重音时，没有重音的词排在第一位，但在不考虑重音的情况下执行初级排序。

# mysql - #1064 - 您的 SQL 语法有错误；找不到语法错误

> ID：15360360
> 
> 赞同：0
> 
> 时间：2013-03-12T11:48:42.237
> 
> 标签：mysql, sql, phpmyadmin

在 phpMyAdmin 3.5.1 我写道：

```
DELIMITER $$
CREATE DEFINER=`root`@`localhost` FUNCTION  `getconjointthismariage`(idmember smallint(5) unsigned, mariageidconjoint smallint(5) unsigned) RETURNS varchar(200) CHARSET utf8
BEGIN
DECLARE responce varchar(200);
SELECT CONCAT(" (a épousé ", IF( `members`.`deces_date` IS NOT NULL , "† ", "" ) , CONCAT_WS(" ", `members`.`prenom` , `members`.`nom`), ")") INTO responce
FROM `mariages`
LEFT JOIN `members` ON `members`.`id` = mariageidconjoint
WHERE (`mariages`.`id_member` = idmember AND `mariages`.`id_conjoint` = mariageidconjoint);
RETURN responce;
END$$ 
```

我得到这个错误：

> `#1064`- 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 9 行的 '' 附近使用正确的语法

第 9 行是：返回响应；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:51:48.723

尝试使用`SET`，

```
DELIMITER $$

CREATE FUNCTION  `getconjointthismariage`
(
    idmember smallint(5) unsigned, 
    mariageidconjoint smallint(5) unsigned
) 
RETURNS varchar(200) CHARSET utf8
BEGIN

    DECLARE responce varchar(200);

    SET responce =
        (SELECT CONCAT(' (a épousé ', IF( `members`.`deces_date` IS NOT NULL , '† ') , CONCAT_WS(' ', `members`.`prenom` , `members`.`nom`), ')') 
        FROM    `mariages`
                LEFT JOIN `members` 
                    ON `members`.`id` = mariageidconjoint -- <<== PLEASE DO CHECK THIS CONDITION
        WHERE   `mariages`.`id_member` = idmember AND 
                `mariages`.`id_conjoint` = mariageidconjoint);

    RETURN responce;

END$$

DELIMITER ; 
```

# date - chromewebdriver 上的清除日期输入失败

> ID：15360362
> 
> 赞同：13
> 
> 时间：2013-03-12T11:48:45.693
> 
> 标签：date, time, input, selenium-chromedriver

我在使用 selenium 从 firefoxdriver 切换到 chromedriver 时遇到了问题，它在 FF 中运行良好，但现在当我尝试清除日期输入字段时出现此错误：

```
Caused by: org.openqa.selenium.InvalidElementStateException: Element must be user-editable
in order to clear it. (WARNING: The server did not provide any stacktrace information)
Command duration or timeout: 38 milliseconds
Build info: version: '2.31.0', revision: '1bd294d185a80fa4206dfeab80ba773c04ac33c0',
time: '2013-02-27 13:51:26'
System info: os.name: 'Mac OS X', os.arch: 'x86_64', os.version: '10.8.2', java.version: 
'1.6.0_41'
Session ID: cb5a1b7e5f4abc4f2e56e2fe284a9dc3
Driver info: org.openqa.selenium.chrome.ChromeDriver
Capabilities [{platform=MAC, chrome.chromedriverVersion=26.0.1383.0, acceptSslCerts=false,
javascriptEnabled=true, browserName=chrome, rotatable=false, locationContextEnabled=false,
version=25.0.1364.160, cssSelectorsEnabled=true, databaseEnabled=false, 
handlesAlerts=true, browserConnectionEnabled=false, nativeEvents=true,
webStorageEnabled=true, applicationCacheEnabled=false, takesScreenshot=true}]
blah blah... 
```

我尝试将 contenteditable 属性添加到我的输入字段但没有运气：

```
 <input type="date" contenteditable="true" required="required" placeholder="YYYY-MM-dd" /> 
```

我不确定是否应该报告或在哪里报告，但我发现相关项目中的这些问题有些相似：

[https://github.com/jnicklas/capybara/issues/554](https://github.com/jnicklas/capybara/issues/554)

[https://github.com/Behat/MinkSelenium2Driver/pull/29](https://github.com/Behat/MinkSelenium2Driver/pull/29)

与此同时，有什么建议可以解决这个错误吗？

任

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-06T02:49:14.993

作为一种解决方法，您可以选择表示输入字段的 webElement 并执行

`webElement.SendKeys(Keys.Delete);`

清理场地。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-03T23:28:35.793

有时您可以稍微更改 xpath 并使其工作：

例如对于这块 DOM：`<tr class="table-filters"><td><input type="text" value=""></td></tr>`

如果您使用：

```
wait.until(ExpectedConditions.visibilityOfElementLocated(By
                    .xpath("//tr[@class='table-filters']//td"))).clear(); 
```

它不起作用，但是：

```
wait.until(ExpectedConditions.visibilityOfElementLocated(By
                    .xpath("//tr[@class='table-filters']//td//input"))).clear(); 
```

作品。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-09-11T06:39:33.623

```
welement.click 
Actions action = new Actions(driver); 
action.sendKeys(Keys.DELETE);
action.sendKeys(webelement,value).build().perform(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-08-17T20:20:45.410

我有一个解决方案，我刚刚在 Eclipse 的 ChromeDriver 项目中使用了它。这也是一种解决方法。

我发现仅使用 {webElement.Keys} 只会删除输入字段中的部分文本。因此，您必须首先使用左箭头键选择要删除的整个文本。

以下代码应该可以在 ChromeDriver 中运行。它在 Java 中（使用 Eclipse）：

```
private WebDriver driver;
driver= new ChromeDriver();
Actions action = new Actions(driver);
int lenText = driver.findElement(By.xpath(elementLocator)).getText().length();

for(int i = 0; i < lenText; i++){
  action.sendKeys(Keys.ARROW_LEFT);
}
action.build().perform();

for(int i = 0; i < lenText; i++){
  action.sendKeys(Keys.DELETE);
}
Thread.sleep(1000);
action.build().perform(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2020-01-03T10:27:26.027

清除和更新模型...

```
 webElement.sendKeys(Keys.chord(Keys.CONTROL, "a"));
     webElement.sendKeys(Keys.BACK_SPACE); 
```

# c++ - 在分配的内存中添加文本

> ID：15360367
> 
> 赞同：0
> 
> 时间：2013-03-12T11:48:55.247
> 
> 标签：c++, memcpy

我已经创建了一定数量的内存

```
char* str;
str = char(char*) malloc(15); 
```

当我这样做时

```
memcpy(str, "AB", 2);
memcpy(str, "CDEFG", 5)
cout<<"Value of str: "<<str<<endl; 
```

输出是 str 的值的值：DEFGH 我看到的是它覆盖了以前的 memcpy 我如何继续向 str 添加文本，以便每次添加文本时它都会添加到以前的 str 值，而不是覆盖以前的值并从 start

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:50:25.993

你使用一个`std::string`：

```
#include <string>
#include <iostream>
int main()
{
  std::string str = "AB";
  str+= "CDEFG";
  std::cout << str << "\n";
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T11:56:42.370

跟踪你写了多少个字符并调整你的指针。在您的示例中：

```
memcpy(str, "AB", 2);

memcpy(str+2, "CDEFG", 5) 
```

除此之外，您的字符串不会以 NULL 结尾。对于最后一个副本，您还需要一个额外的字符来复制 '\0'。要么使用 strcpy，要么最好使用 std::string：

```
#include <string>
int main()
{
  std::string s = "AB";
  s += "CDEFG";
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T11:51:28.327

使用`strcat`而不是`memcpy`.

或者使用 `memcpy(str +2, "CDEFG", 5);

[并在打印值时删除 +1，因为它肯定应该打印 CDEFG，而不是 DEFGH - 这显然是您的`cout`流处理中的一个错误......]

# xcode - Xcode - Interface Builder 和 iPhone 5 图像

> ID：15360370
> 
> 赞同：0
> 
> 时间：2013-03-12T11:48:59.357
> 
> 标签：xcode, interface, interface-builder, iphone-5

我正在使用 IB 将图像分配给 UIImageViews。我知道对于视网膜图像，您需要两个图像：非视网膜分辨率.png 和@2x.png。我只是在 IB 中分配正常图像，当设备是视网膜时，它会得到@2x，一切正常。

但是 iPhone 5 的图像呢？IB是否也有某种后缀来读取和交换图像？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:56:02.800

最简洁的答案是不。

您可以使用：

```
#define IS_IPHONE5 (([[UIScreen mainScreen] bounds].size.height-568)?NO:YES) 
```

检查用户是否使用 iPhone 5。

在某些情况下，我使用 iPhone 5 图像作为@2x 图片来避免上面的检查。iPhone 5 用户将获得全分辨率图片，iPhone 4 用户将获得相同的图片，但下部隐藏。

# java - printf 仅在 java 中打印小数部分

> ID：15360371
> 
> 赞同：2
> 
> 时间：2013-03-12T11:48:59.157
> 
> 标签：java, decimal, printf

我想分别打印双数的实部和小数部分，而不使用字符串或数组的概念？我不知道如何使用 printf() 只打印小数部分。

输入 1：13.31432 输出 1：13 31432

输入 2：15.36 输出 2：15 36

我可以打印实数部分，但不能打印小数部分。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T11:51:45.507

```
System.out.println((long)input); //Prints real part
System.out.println(input - (long)input); //Prints decimal part 
```

# tomcat - 无法理解使用 JPA、Tomcat、Oracle 的连接池错误

> ID：15360373
> 
> 赞同：6
> 
> 时间：2013-03-12T11:49:22.407
> 
> 标签：tomcat, jpa, oracle10g, connection-pooling

`context.xml`我在Tomcat中有以下代码：

```
<Resource name="ds/OracleDS" auth="Container" type="javax.sql.DataSource"
maxActive="1" maxIdle="2" maxWait="2"
username="demo" password="demo"
driverClassName="oracle.jdbc.driver.OracleDriver"
url="jdbc:oracle:thin:@localhost:1521:orcl"/> 
```

我有这个代码`web.xml`：

```
<resource-ref>
 <description>Oracle Datasource example</description>
 <res-ref-name>ds/OracleDS</res-ref-name>
 <res-type>javax.sql.DataSource</res-type>
 <res-auth>Container</res-auth>
</resource-ref> 
```

我已经编写了`persistence.xml`如下代码：

```
<persistence-unit name="ReceivablesPU"  transaction-type="RESOURCE_LOCAL">
        <provider>oracle.toplink.essentials.PersistenceProvider</provider>
        <non-jta-data-source>java:ds/OracleDS</non-jta-data-source> 
```

我不明白`java:ds/OracleDS`，，，`<Resource name="ds/OracleDS"`。`<res-ref-name>ds/OracleDS</res-ref-name>`错误是：

```
javax.persistence.PersistenceException: Exception [TOPLINK-7060] (Oracle TopLink Essentials - 2.0 (Build b40-rc (03/21/2007))): oracle.toplink.essentials.exceptions.ValidationException
Exception Description: Cannot acquire data source [java:ds/OracleDS].
Internal Exception: javax.naming.NamingException: This context must be accessed through a java: URL 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-14T15:31:56.810

在`persistence.xml`中，您的第三行应如下所示：

```
 <non-jta-data-source>java:comp/env/ds/OracleDS</non-jta-data-source> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-16T05:24:38.937

我在 contex.xml 中的变化：

```
<Resource name="OracleDS" auth="Container" type="javax.sql.DataSource"
    maxActive="1" maxIdle="2" maxWait="2"
    username="demo" password="demo"
    driverClassName="oracle.jdbc.driver.OracleDriver"
    url="jdbc:oracle:thin:@localhost:1521:orcl"/> 
```

我在 web.xml 中的变化：

```
<resource-ref>
     <description>Oracle Datasource example</description>
     <res-ref-name>OracleDS</res-ref-name>
     <res-type>javax.sql.DataSource</res-type>
     <res-auth>Container</res-auth>
    </resource-ref> 
```

我更改persistence.xml

```
<persistence-unit name="ReceivablesPU"  transaction-type="RESOURCE_LOCAL">
        <provider>oracle.toplink.essentials.PersistenceProvider</provider>
        <non-jta-data-source>java:comp/env/OracleDS</non-jta-data-source> 
```

然后我得到了输出....

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-22T15:52:04.377

请参阅类似（但不是重复问题）的答案：

[码头数据源，休眠，未找到数据源](https://stackoverflow.com/questions/7714899/jetty-data-source-hibernate-datasource-not-found/7715096#7715096)

根据 Java EE Web App 容器，对于名为“ds/OracleDS”的数据源，您可能需要在寻址时为其 JNDI 上下文添加前缀“java:comp/env”（例如，在您的 persistence.xml 文件中）以使其工作。

在您的 Tomcat 的特定情况下，我会尝试以下操作：

```
<Resource name="ds/OracleDS" auth="Container" type="javax.sql.DataSource"
maxActive="1" maxIdle="2" maxWait="2"
username="demo" password="demo"
driverClassName="oracle.jdbc.driver.OracleDriver"
url="jdbc:oracle:thin:@localhost:1521:orcl"/> 
```

您的 web.xml 中不需要任何内容​​。context.xml 中的上述配置将使 Tomcat 将数据源公开为 JNDI 资源

最后，在 persistence.xml 中放：

```
<persistence-unit name="ReceivablesPU"  transaction-type="RESOURCE_LOCAL">
        <provider>oracle.toplink.essentials.PersistenceProvider</provider>
        <non-jta-data-source>java:comp/env/ds/OracleDS</non-jta-data-source> 
```

# r - 如何在R中的数据框中绘制具有平均值和标准偏差的单个数据点

> ID：15360380
> 
> 赞同：0
> 
> 时间：2013-03-12T11:49:48.093
> 
> 标签：r, plot, dataframe

我在 R 中有一个具有这种格式的大型数据框：

```
"SubjID"    "HR"    "IBI"   "Stimulus"  "Status"
"S1"    75.98   790 1   1
"S1"    75.95   791 1   2
"S1"    65.7    918 1   3
"S1"    59.63   100 1   4
"S1"    59.44   101 1   5
"S1"    59.62   101 2   1
"S1"    63.85   943 2   2
"S1"    60.75   992 2   3
"S1"    59.62   101 2   4
"S1"    61.68   974 2   5
"S2"    65.21   921 1   1
"S2"    59.23   101 1   2
"S2"    61.23   979 1   3
"S2"    70.8    849 1   4
"S2"    74.21   809 1   4 
```

我想为状态列的每个值绘制“HR”列的平均值。

我编写了以下 R 代码，在其中创建数据子集（通过“状态”的不同值）并绘制它：

```
numberOfSeconds <- 8;

    for(stimNumber in 1:40) {

    stimulus2plot <- subset(resampledDataFile, Stimulus == stimNumber & Status <= numberOfSeconds, select=c(SubjID, HR, IBI, Stimulus, Status))

    plot(stimulus2plot$HR~stimulus2plot$Status, xlab="",ylab="")
    lines(stimulus2plot$HR~stimulus2plot$Status, xlab="",ylab="")

    } 
```

从而获得类似于以下的图：![在此处输入图像描述](../Images/ec95415dd4906683ea77f92a978b6bf8.png)

每个“刺激”都有一个情节。在每个图的 X 轴上，我有“状态”列，在 YI 上，每个“SubjID”都有一个“HR”值。差不多好了...

但是，我最终想要获得的是每个 X 值都有一个 Y 数据点。即 Y 应该是平均值（HR 列的平均值），类似于下图：

![在此处输入图像描述](../Images/9d072d0367045d890ca03ed06700a9f7.png)

如何做到这一点？如果每个数据点中的标准偏差也显示为误差线，那就太好了。

在此先感谢您的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T11:53:50.733

您可以做的最简单的事情是首先预先计算值，然后绘制它们。我会使用`ddply`这种分析：

```
library(plyr)
res = ddply(df, .(Status), summarise, mn = mean(HR)) 
```

并使用 ggplot2 绘制它：

```
ggplot(res, aes(x = Status, y = mn)) + geom_line() + geom_point() 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T11:54:46.617

最简单的方法是`tapply()`. 如果你`data.frame`是`data`：

```
means <- with(data, tapply(HR, Status, mean))
plot(means, type="l") 
```

计算和绘制误差线也很容易：

```
serr <- with(data, tapply(HR, Status, function(x)sd(x)/sqrt(length(x))))
plot(means, type="o", ylim=c(50,80))
sapply(1:length(serr), function(i) lines(rep(i,2), c(means[i]+serr[i], means[i]-serr[i]))) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T12:03:08.323

为了让它最接近你想要的：

```
library(ggplot2)
library(plyr)
df.summary <- ddply(df, .(Stimulus, Status), summarise,
                    HR.mean = mean(HR),
                    HR.sd = sd(HR))
ggplot(df.summary, aes(Status, HR.mean)) + geom_path() + geom_point() + 
  geom_errorbar(aes(ymin=HR.mean-HR.sd, ymax=HR.mean+HR.sd), width=0.25) +facet_wrap(~Stimulus) 
```

![在此处输入图像描述](../Images/6bae1f5c521106f0883879d733e5c92c.png)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-14T08:53:54.423

您可以使用以下假数据示例作为指南，在 ggplot2 中完全执行此操作：

```
DF <- data.frame(stimulus = factor(rep(paste("Stimulus", seq(4)), each = 40)),
                 subject = factor(rep(seq(20), each = 8)),
                 time = rep(seq(8), 20),
                 resp = rnorm(160, 50, 10))
# spaghetti plots
ggplot(DF, aes(x = time, y = resp, group = subject)) +
   geom_line() +
   facet_wrap(~ stimulus, ncol = 1)
# plot of time averages by stimulus
ggplot(DF, aes(x = time, y = resp)) +
   stat_summary(fun.y = mean, geom = "line", group = 1) +
   stat_summary(fun.y = mean, geom = "point", group = 1, shape = 1) +
   facet_wrap(~ stimulus, ncol = 1) 
```

# unit-testing - 单元测试控制器方法失败，因为视图为空

> ID：15360385
> 
> 赞同：2
> 
> 时间：2013-03-12T11:50:03.547
> 
> 标签：unit-testing, grails

我正在使用 Grails 2.2.0。这是我要测试的方法：

```
def extendedSearchIndex () {
    log.debug("ExtendedSearchIndex ... ");
    def deviceClass = deviceService.getDeviceClass(request)
    if (deviceClass == "FeaturePhone") {
    render(view: '/featurephone/expanded_search')
    }
} 
```

这是我的测试方法：

```
void testExtendedSearchIndex01() {
    deviceServiceMock.demand.getDeviceClass(1..10) { def myRequest, boolean verbose ->
        return "FeaturePhone"
    }
    controller.deviceService = deviceServiceMock.createMock()
    controller.extendedSearchIndex()

    assert view == "/featurephone/expanded_search"
} 
```

此测试失败，因为视图为空。但为什么它是空的？不应该`/featurephone/expanded_search`吗？我错过了什么吗？

谢谢你的帮助。

- 克里斯

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:33:31.183

`getDeviceClass()`您模拟了需要 a`def`和 a的方法的签名`boolean`，但您的控制器使用了另一个只需要 a 的方法`def`。我认为你的模拟应该是：

```
deviceServiceMock.demand.getDeviceClass(1..10) { def myRequest ->
  return "FeaturePhone"
} 
```

一个建议是对 deviceClass 使用字符串，因为您知道返回的类型`getDeviceClass()`：

```
String deviceClass = deviceService.getDeviceClass(request)
if(deviceClass == "FeaturePhone") 
```

如果你使用 IDE，例如 STS，你可以调试你的控制器来检查服务返回的值。

# vb.net - 透明的面孔导致他们身后的面孔消失

> ID：15360387
> 
> 赞同：0
> 
> 时间：2013-03-12T11:50:08.817
> 
> 标签：vb.net, opengl, 3d, transparency, opentk

我正在使用 .NET 库 OpenTK 编写游戏。我试图通过绘制一系列透明面来在某些区域附近创建雾效果。然而，这些面孔将他们身后的一切都变成了天空颜色，如[http://dl.dropbox.com/u/97311769/texglitch.png所示](http://dl.dropbox.com/u/97311769/texglitch.png)

有没有办法阻止这种情况的发生，或者有更好的方法来创造这种雾效果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:59:56.820

[这个问题](https://stackoverflow.com/questions/15314180/how-to-stop-opengl-background-bleed-on-transparent-textures)可能与您的问题有关。透明度在 3D 图形渲染中可能是一项棘手的任务。

此外，如果您使用的是 OpenGL 2.0+，则更好的雾化方法是获取深度缓冲区，并在着色器中，根据片段的“距离”多远，将片段与您的颜色混合雾色。

# javascript - 在另一个方法完成执行后强制执行代码

> ID：15360393
> 
> 赞同：2
> 
> 时间：2013-03-12T11:50:21.423
> 
> 标签：javascript

这是我想做的事情：

setSource 是一个执行大约 3 秒的函数。

```
 editor.setSource();

 setTimeout(function () {
      //do something, some commands
 }, 3000); 
```

我想要 //do something, some commands 部分在 setSource() 的最后一行执行之后执行。现在我用 setTimeout 来做，但我认为这不是很好的解决方案，因为有时 setSource() 可能需要 5 秒才能执行。这该怎么做？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T11:53:24.167

有`setSource`一个回调参数：

```
editor.setSource = function(callback) {
    // do editor things
    callback();
} 
```

然后将要执行的下一个代码块作为回调传递：

```
editor.setSource(function() {
    // do some other things
}); 
```

* * *

如果你可以访问 jQuery 的延迟对象，你可以在这里使用它们：

1.  创建一个新的延迟对象。
2.  开始超时以完成您的长期任务。
3.  返回延迟对象。
4.  在超时时间内，一旦任务完成，调用`deferred.resolve`.

```
editor = {
    setSource: function() {
        var deferred = $.Deferred();

        console.log("Beginning editor.setSource...");

        setTimeout(function() {
            // This function took a while to occur
            deferred.resolve();
        }, 3000);

        return deferred;
    }
}

$.when(editor.setSource()).then(function() {
    console.log("Editor is done!");
}); 
```

如果您正在执行 AJAX 或动画或其他已经使用延迟对象的 jQuery 任务，您可以只返回其结果值，而不是创建自己的延迟对象：

```
editor = {
    setSource: function() {
        return $.get({
            url: "myurl.com/mypage",
            data: $("#myform").serialize()
        });
    }
}

$.when(editor.setSource()).then(function() {
    console.log("Editor is done!");
}); 
```

确保查看如何*解决*或*拒绝*延迟对象，以及如何处理这些对象。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-09-23T07:43:32.393

## 这个答案使用标准[`promises`](https://developer.mozilla.org/en/docs/Web/JavaScript/Reference/Global_Objects/Promise)的 JavaScript 特性`ECMAScript 6`。如果您的目标平台不支持`promises`，请使用 PromiseJs 对其进行[polyfill](https://www.promisejs.org/)。

在较新的浏览器版本中，您可以使用`ES6 promises`. `editor.setSource()`将其执行包装到 a 中`Promise`并返回它，因此可以继续使用其他函数。

```
editor.setSource = function(){
    return new Promise(function(fulfill, reject){
        //do your work
        fulfill(resultValue);
    });
}; 
```

要继续使用另一个函数，只需使用`then`promise 上的方法。

```
var promise = editor.setSource();
promise.then(function(result){
    //do something more
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-07-05T13:37:26.630

我也在寻找解决方案，我只想在前一个函数完全执行后才执行我的第二个函数，我尝试了回调函数但仍然没有得到解决方案，最后我找到了使用简单`$.ajax({ });`方法代码解决这个问题的最简单方法为我工作:)。

例如，

```
$.ajax({
  url: function1(),
  success: function(){
    //function 2 code here or just call function2() here
  }
}); 
```

就是这样，在这段代码中，url参数将调用第一个函数，只有在其执行成功时才会调用函数2。

# c++ - 需要帮助矢量化此代码

> ID：15360396
> 
> 赞同：5
> 
> 时间：2013-03-12T11:50:30.123
> 
> 标签：c++, opencv, vectorization

我有一个 8 位图像。对于每个像素，我需要计算出它在当前行中的序号位置。例如，如果该行是：

```
32 128 16 64, 
```

然后我需要结果：

```
1 3 0 2, 
```

因为 32 是该行中的第 1 高值，128 是第 3 高的，16 是第 0 高的，64 是第 2 高的。

我需要对图像的所有行重复上述过程。这是非矢量化代码：

```
for (int curr = 0; curr < new_height; ++curr)
{
    vector<pair<unsigned char, char> > ordered;
    for (char i = 0; i < 4; ++i)
    {
        unsigned char val = luma24.at<unsigned char>(curr, i);
        ordered.push_back(pair<unsigned char, char>(val, i));
    }
    sort(ordered.begin(), ordered.end(), cmpfun);
    for (int i = 0; i < 4; ++i)
        signature.at<char>(curr, ordered[i].second) = i;
} 
```

`luma24`是我正在读取的 8 位图像，它有`new_height`行和 4 列。 `signature`是相同大小的签名图像（暂时忽略符号的差异，因为它不相关）——这是我存储结果的地方。`cmpfun`是一个简单的比较器函数。

我试图对上面的代码进行矢量化并得到了这个：

```
Mat ordinal;
luma24.convertTo(ordinal, CV_16UC1, 256, 0);
Mat sorted = ordinal.clone();
for (int i = 0; i < 4; ++i)
    ordinal(Range::all(), Range(i, i+1)) += i;
cv::sort(ordinal, sorted, CV_SORT_EVERY_ROW | CV_SORT_ASCENDING);
bitwise_and(sorted, Scalar(0x00ff), ordinal);
Mat ordinal8;
ordinal.convertTo(ordinal8, CV_8SC1, 1, 0);
ordinal8.copyTo(signature(Range::all(), Range(0, 4))); 
```

我不得不将 8 位值和 8 位序数打包到一个 16 位通道中，因为 OpenCV 不对多通道图像执行排序。这几乎是我需要的，但不完全是。对于示例输入，它给了我：

```
2 0 3 1 
```

因为最小值在第 2 列，次低值在第 0 列，依此类推。如何在不单独访问每个像素的情况下将其转换为我需要的结果？

本质上，我需要以某种方式对其进行矢量化：

```
uint8_t x[] = {2, 0, 3, 1};
uint8_t y[4];
for (uint8_t i = 0; i < 4; ++i)
    y[x[i]] = i; 
```

`x`我当前的矢量化代码给我的中间结果在哪里，并且`y`是我想要的结果。

可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-02T01:05:20.340

我能想到的另一种方法是，为每一行创建一个二叉搜索树。在进行中序遍历时，我们可以获得每个像素的等级。

节点的每个元素都是一个结构

```
// Members of struct explained here.
// row_pos: stores position of that pixel in that row.
//     we populate this while creating binary search tree. 
//
// rank: stores its rank in that row. ()
//  while doing in-order traversal, we come to know rank of that pixel. At that point only, we update that pixel location with its rank.

typedef struct node
{
    int row_pos, rank; 
    node *left, *right;    // left and right nodes.
}; 
```

每行的步骤顺序为：

a) O(w)：通过将每个像素的位置也存储在节点中来创建二叉搜索树。

b) O(w)：开始有序遍历。对于每个节点，用排名填充该节点的像素位置（从第一个节点开始计数为 0）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-17T05:51:30.677

我相信这会为您解决问题。它不需要分配、堆栈或排序，但假设您的范围是 0-255（例如 uint8）。更大的假设：只有当你有宽行时它才会有效。如果它们真的是 4 像素宽，那 i<256 有点难看。有一些方法可以消除这种情况，但为了简单起见，我假设 4 个像素只是一个“eg”。

```
void processRow (int* rowpos, uint8_t* pixelsForRow, int w) {
   uint32_t i, pv, v=0, hist[256]={0};
   for (i=0; i<w; i++)      hist[pixelsForRow[i]]++;
   for (i=0; i<256; i++)    {pv=hist[i]; hist[i]=v; v+=pv;}
   for (i=0; i<w; i++)      rowpos[i] = hist[pixelsForRow[i]]++;
} 
```

好的 - 那么它是如何工作的呢？
该函数的第 1 行声明并清空了一个直方图表。
第 2 行计算直方图。
第 3 行将其转换为计数排序 - 这就是为什么 hist 使用比 uint8 更大的元素大小
第 4 行应用排序位置。

有2个技巧；首先，在第 3 行中，直方图“按 1 个索引移动”，因此第一个值始终为 '0' 而不是它本来的值，第二个值是第一个计数的值，依此类推。第二个技巧是第 4 行中的“++”——始终确保序数值是唯一的。

让我们试试你的输入：
[32 128 16 64]
line 2: [0...1....1....1...1...0] at index [0, 16, 32, 64, 128, 255] 分别
第 3 行：[0...0....1....2...3...0] 在索引 [0, 16, 32, 64, 128, 255] 处分别为
第 4 行： [1, 3, 0, 2] ... 看起来不错

让我们在稍微不同的输入上尝试一下：
[32 128 16 32]
第 2 行：[0...1....2....0...1.. .0] 在索引 [0, 16, 32, 64, 128, 255] 处分别为
第 3 行：[0...0....1....3...3...0] 在索引 [ 0, 16, 32, 64, 128, 255] 分别为
第 4 行： [1, 3, 0, 2] ... 完美

，但我不太确定它是否满足您对矢量化的需求 -- :)

# android - 如何使用 moveup 和 movedown 图标指示列表视图中的滚动位置

> ID：15360400
> 
> 赞同：1
> 
> 时间：2013-03-12T11:50:49.800
> 
> 标签：android, listview

我想在列表视图的最后一项可见时显示上移按钮，并在列表视图的第一项可见时显示下移按钮

我试过像：

```
lv.setOnScrollListener( new OnScrollListener() {

        @Override
        public void onScrollStateChanged(AbsListView view, int scrollState) {
            // TODO Auto-generated method stub

        }

        @Override
        public void onScroll(AbsListView view, int firstVisibleItem,
                int visibleItemCount, int totalItemCount) {
            // TODO Auto-generated method stub
            final int lastVisibleItem = firstVisibleItem + visibleItemCount;
            if(lastVisibleItem == totalItemCount)
            {
                imgView.setBackgroundResource(R.drawable.move_up);
            }else
                imgView.setBackgroundResource(R.drawable.move_down);

        }
    }); 
```

但它不起作用..请帮我解决这个问题。

# android - 从 sqlite 数据库读取数据并通过 hashmap 添加到列表视图

> ID：15360402
> 
> 赞同：0
> 
> 时间：2013-03-12T11:50:52.243
> 
> 标签：android, sqlite, listview, cursor

我想从 sqlite 数据库中读取 'empname' 和 'place' 并列出到一个列表视图中我尝试了给定的代码，但是代码显示错误，如 'unreachable code' 任何人都可以帮助我找出问题所在。

```
 public void listEmps()
{
    this.myList.clear();
    HashMap<String, String> map = new HashMap<String, String>();
    //HashMap map = new HashMap();

    Cursor cursor = this.dbAdapter.ListEmp();
    int i;
    if((cursor !=null)&&(cursor.getCount()>0))
    {
        cursor.moveToFirst();
        i=0;
        if(i>cursor.getCount())
        {
            cursor.close();
            myAdapter = new SimpleAdapter(this, myList, R.layout.listadapter, new String[]{"name","place"},
                    new int[]{R.id.textViewName,R.id.textViewPlace});
             this.lvEmp.setAdapter(myAdapter);
             this.myAdapter.notifyDataSetChanged();

        }
    }
    while(true)
    {
        return;

        map.put("name", cursor.getString(cursor.getColumnIndex("EmpName")));
        map.put("place", cursor.getString(cursor.getColumnIndex("place")));
        this.myList.add(map);
         map = new HashMap();
          if (!cursor.isLast())
              cursor.moveToNext();
          i++;
          break;
          cursor.close();

    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:54:24.573

由于该代码段，您的代码无法访问：

```
while(true)
{
    return; 
```

这意味着该行后面的所有代码都无法访问...首先删除

```
return; 
```

此外，IMO 声明无限循环是一种非常糟糕的做法`while(true)`。也删除它并尝试：

```
while (!cursor.isLast()) 
```

无法访问代码的另一个地方是：

```
break;
cursor.close(); 
```

与`break;`您将离开该过程。`cursor.close();`永远无法到达。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:00:49.270

你可以`do->while`这样使用：

```
 public void listEmps()
{

  this.myList.clear();
    //HashMap map = new HashMap();

    Cursor cursor = this.dbAdapter.ListEmp();

if(cursor.moveToFirst()){
                    do{
                        HashMap<String, String> map = new HashMap<String, String>();
                        map.put("name", cursor.getString(cursor.getColumnIndex("EmpName")));
                        map.put("place", cursor.getString(cursor.getColumnIndex("place")));
                        this.myList.add(map);

                    }while (cursor.moveToNext());
                }

                 cursor.close();
        myAdapter = new SimpleAdapter(this, myList, R.layout.listadapter, new String[]{"name","place"},
                new int[]{R.id.textViewName,R.id.textViewPlace});
         this.lvEmp.setAdapter(myAdapter);
         this.myAdapter.notifyDataSetChanged();

} 
```

希望这对您有所帮助。

# http - 一个网站也应该是一个网络资源吗？

> ID：15360415
> 
> 赞同：7
> 
> 时间：2013-03-12T11:51:31.650
> 
> 标签：http, rest, web, url-design

> *每个 Web 应用程序 - 每个网站 - 都是一项服务。(...) 使 Web 站点易于网络冲浪者使用的特性也使 Web 服务 API 易于程序员使用。*
> 
> *Richardson 和 Ruby，“RESTFul Web 服务”*

正如我所期望的那样，一个同时也是 Web 服务的网站根据用户代理请求的内容提供其资源的多种表示形式。API，可以这么说，是网站本身，并不单独提供。

许多流行的“REST API”并非如此。例如，Twitter 的 API 位于[http://api.twitter.com/1/](http://api.twitter.com/1/)，URI 中的“1”是 API 本身的版本。Socialcast 还在[https://demo.socialcast.com/api/](https://demo.socialcast.com/api/)提供了一个 REST API ，第三级名称是它所寻址的网络的名称。

这对我来说似乎是错误的。[如果我在http://www.example.com/blog](http://www.example.com/blog)有我的博客，我不需要在不同的位置提供 API，只为机器人提供 JSON。与其拥有[http://www.example.com/blog/posts/](http://www.example.com/blog/posts/)和[http://api.example.com/blog/posts](http://api.example.com/blog/posts)这两个不同的 URI，我应该只拥有前者，并且可以使用多种表示形式，其中`application/json`对于我希望提供给我的用户的 JSON API。

**示例 1**：浏览器询问我博客上的帖子；

*要求：*

```
curl -i \
 -H "Accept: text/html" \
 -X GET \
 http://www.example.org/blog/posts/ 
```

*回复：*

```
 200 OK
 Content-Type: text/html; charset=utf-8

 <html><body><h1>Posts</h1><ol><li><h2>My first post ... 
```

**示例 2**：相同的 URI，但这次是机器人发出请求；

*要求：*

```
curl -i \
 -H "Accept: application/json" \
 -X GET \
 http://www.example.org/blog/posts/ 
```

*回复：*

```
 200 OK
 Content-Type: text/html; charset=utf-8

 {
    "posts": [
        {
            "id": 1,
            "title": "My first post" ... 
```

API 的版本号应编码在请求标头的“Accept”字段中，最重要的是避免像 Twitter 那样强烈键入 URI（“statuses/show.json?id=210462857140252672”或“statuses/show/210462857140252672.json ”）。

如果采用统一的方法，我可能会失去一些灵活性（但是，[Cool URI 不应该永远不会改变吗？](http://www.w3.org/Provider/Style/URI.html "酷 URI")），但我认为坚持 REST（或至少我对它的解释）会提供更多好处。

哪种方法更正确：分离 API 和网站，还是统一它们？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-18T09:55:07.317

这里没有对错。当您的 API 开发是由特定的客户端需求驱动时，过于紧密地遵循 REST 和 RFC 可能会变得很困难。

实际上，与 API 客户端相比，人类用户具有不同的行为模式，因此需要不同的处理方式。最生动的区别在于，许多 API 都是数据密集型的，专为批量操作和数据转储而设计，而面向人类用户的应用程序更“反应性”，并且经常一步一步、一个请求一个请求地做事。因此，在许多项目中，API 的 URL 设计进行了**优化**，以避免在多次网络往返和重复存储调用上浪费客户端和服务器资源。

在底层，API 实现通常具有与核心应用程序不同的设计，针对 API 提供的操作类型进行了优化。例如，API 实现可能使用单独的缓存策略。现在，如果您将代码拆分出来，您可能希望创建一个仅处理 API 调用的主机集群。这就是将 API 放在另一个域上对**负载管理**有益的地方：一个单独的域允许在高负载站点上进行更简单的负载平衡。相比之下，当您在同一个域名（但有单独的集群）上使用 /api URL 前缀时，您需要一个智能（L7 感知）负载均衡器来完成在 API 和 Web 前端集群之间拆分请求流的工作，但是这样的负载均衡器更昂贵。

因此，Twitter 之类的公司将 API 分离出来可能有很好的技术原因，但对其他实现的引用可能不适用于您的项目。如果您处于设计的早期阶段，您可能希望从同一域上的统一 URL 方案开始，但最终您可能会发现有很好的实际用例使您改变方法，然后...重构。

PS 这里有一个关于版本控制的冗长讨论 - [API 版本控制的最佳实践？](https://stackoverflow.com/questions/389169/best-practices-for-api-versioning)

PSS 我发现强类型 URL 有助于快速调试。您可以简单地使用 .json 将 URL 放入浏览器并快速获得结果，而无需切换到命令行。但同意你的观点，“接受”标题是首选方法

用于 API 的 PSSS SEO？我可以看到一个好的 URL 设计是如何有益的，但对于搜索引擎来说，如果您的服务在同一路径/域名上提供多种输出格式，它可能无关紧要。归根结底，搜索引擎是为人类用户构建的，人类用户不会使用 XML 和 JSON。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:01:26.227

Web 和 RESTful API 的行为方式可能不同。

理论上，一个请求如何`http://mysite.com/blog/1`区分它需要返回一个 HTML 页面还是只返回数据（JSON、XML ......）？我将投票支持使用`Accept` *http 标头*：

```
Accept: text/html <-- Web browsers
Accept: application/json <-- Applications/Relying parties consuming data or performing actions 
```

为什么 Twitter、Facebook 或其他网站不混合使用 Web 浏览器和依赖方？老实说，我认为这是一个武断的决定。

也许我可以提供一个可能的原因：Web 浏览器/搜索引擎机器人 URL 应该是*友好的 URL*，因为它们在 SEO 上效果更好。出于这个原因，也许 SEO 就绪的 URL 在 REST 方面不是很语义化，但它们适用于搜索引擎甚至人类用户！

最后：哪个更好（这是我的意见）？

*   **您需要 SEO**，*然后使用单独的 URL*。
*   **不需要SEO**，*然后统一同域同格式的URL*。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T13:24:16.347

我不同意另一个答案，即这个决定应该与 SEO 或 URL 的“友好”程度有关（机器人也是 [由] 人编写的！）。但是我的直觉告诉我，更好的 SEO 结果将来自**统一**URI，因为这也统一了您的 API URI 从万维网链接到的（不太可能）事件中的 pagerank。

这个决定*应该*取决于您的服务器和客户端的能力。如果他们可以设置 Accept 请求标头，并且您的服务器足够聪明，可以进行透明的内容协商，那么一定要统一 URI。这就是我所做的（我唯一的 JSON 客户端是我自己，发出从我的 Web 应用程序的其他 HTML 部分提供的 AJAX 请求，我在其中控制 Accept 标头）。

如果客户端无法设置请求标头，例如想要获取 json 响应的 Web 用户，他们最终将使用默认值（可能是 text/html）。出于这个原因，您可能希望允许在唯一 URI（/foo.txt、/foo.rtf）下发生非协商响应。通常这是通过将格式附加到由点分隔的 URI 来完成的，就好像它是文件扩展名一样（但通常不是，mod_rewrite 会做杂耍），以便需要文件扩展名的平台上的旧客户端可以保存文件一个有意义的。

我网站上的大多数页面都是这样工作的：

1.  根据请求 URL 确定 SQL 查询。（例如`/cars?colour=black`=> `SELECT * FROM cars WHERE colour='black'`）
2.  发出 SQL 查询。
3.  从该文件支持的列表中确定可接受的响应类型。这通常是 HTML 和 HAL（即 JSON），但有时也是 XML。回退到`text/html`如果没有其他是可以接受的。
4.  if(HTML) 吐出`<HEAD>`和`<NAV>`（考虑参数`<h1>Black Cars</h1>`：）
5.  使用最可接受的响应类型吐出结果。
    此函数知道如何获取 SQL 结果对象并将其转换为 HTTP`Link`标头、HTML`<LINK>`元素流、HAL 的`_links`键、XLink 元素流、HTML`<TABLE>`元素（带有包含`<A>`元素的单元格）或 CSV 文件。SQL 查询可能返回 0 行，在这种情况下，如果正在使用该输出，则会写入用户友好的消息而不是 HTML 表。
6.  if(HTML) 吐出`<FOOTER>`

这个基本大纲在我的 web 应用程序中处理了大约 30 个不同的资源集合，尽管每个集合都有一组不同的请求 URI 可能调用的选项，因此每个集合的开始在参数验证方面都不同。

所以，现在我已经解释了所有这些，您可以看到将每个资源的所有细节都放在一个地方处理，以及由通用库函数处理格式 X 或格式 Y 输出的泛型是多么有用。这是一个实现细节，它让我的生活变得轻松，并帮助我坚持不要重复自己的格言。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-19T12:28:23.017

**我绝对不同意网站 == 网络服务方法。**

简单地说，网站应该被视为一个客户端，只是一个客户端，它使用 Web 服务并以适当的形式呈现数据以供 Web 使用。就像移动应用程序是一个客户端，只是一个客户端，使用相同的 Web 服务并以适当的形式呈现数据以供移动使用。

**Web 服务是服务提供者。所有其他人都只是客户；网站，android 应用程序，iphone 应用程序，...等。**

# javascript - 无法通过 XMLHttpRequest 发送参数字符串

> ID：15360417
> 
> 赞同：0
> 
> 时间：2013-03-12T11:51:37.957
> 
> 标签：javascript, web-services, xmlhttprequest

您好，我正在尝试从 Web 服务获取响应，但是当我通过 XMLHttpRequest.send(params) 方法发送请求参数时，请求参数不会被发送。

下面是我的代码：

```
<script type="application/javascript">
window.onload = function myFunc()
{
    var httpRes;
    if (window.XMLHttpRequest)
    {   
        httpRes=new XMLHttpRequest();
    }
    else
    { 
        httpRes=new ActiveXObject("Microsoft.XMLHTTP");
    }   
    httpRes.open("POST", "http://192.168.11.59:3333/Reports/GenerateMobReportJsonData", true);  
    var params = {'FromDate':'02/19/2013 17:30','ReportId':'1','LocationId':'1','ToDate':'02/19/2013 19:00','TeamId':'1'}
    httpRes.setRequestHeader('content-type', 'application/json');
    var jsonReq = JSON.stringify(params);
    //alert(jsonReq)
    httpRes.send(jsonReq);
}
</script> 
```

非常感谢任何形式的帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:03:45.537

由于您使用“应用程序/Json”作为通信协议，并且您的 jquery 托管服务器和 Web 服务服务器不同，因此可能存在**跨域**请求问题

这里你应该使用**Jsonp**作为通信协议。

下面是一个例子 -

[http://www.jquery4u.com/json/jsonp-examples/](http://www.jquery4u.com/json/jsonp-examples/)

两个不同服务器之间的请求应该使用 jsonp 协议。

这里也有类似的问题 -

[即使是 HTTP 200 状态，jQuery Ajax 也会失败](https://stackoverflow.com/questions/15355902/jquery-ajax-fails-even-with-the-http-200-status/15356720#15356720)

希望这对您有所帮助。

# ruby-on-rails - Rails 4：未定义的方法`primary_key_name'

> ID：15360418
> 
> 赞同：4
> 
> 时间：2013-03-12T11:51:38.440
> 
> 标签：ruby-on-rails, rails-activerecord, ruby-on-rails-4

我在使用 Rails 4.0.0.beta 时收到以下错误：

```
NoMethodError: undefined method `primary_key_name' for #<ActiveRecord::Reflection::AssociationReflection 
```

使用 Rails 3.2.x 时我没有遇到异常。

我将 Ruby 1.9.3-p194 用于 Rails 3.2.13 和 Rails 4.0.0.beta。

问题源于以下`has_many`陈述：

```
class Store < ActiveRecord::Base
  has_many :relationships
  has_many :customers, :through => :relationships, :source => :user,
    :conditions => { :relationships => { :description => "Customer" } } do
      def <<(user)
        proxy_association.owner.relationships.create(:description => "Customer", :user => user)
      end
    end
end 
```

我有以下支持类：

```
class User < ActiveRecord::Base
  has_one :relationship
  has_one :store, :through => :relationship
end

class Relationship < ActiveRecord::Base
  belongs_to :store
  belongs_to :user
end 
```

我想知道如何`has_many`使用 Rails 4 友好的代码实现相同的功能？

PS 我知道我仍在使用旧式语法，并且条件哈希现在需要 proc 或 lambda，但这些不应该导致`undefined method`异常。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T15:01:12.980

我找到了罪魁祸首，它是`perfectline/validates_existence`默认为弃用的宝石，`primary_key_name`而不是`foreign_key`当`ActiveRecord::VERSION::MINOR >= 1`- 去图！我已经提交了带有修复程序的拉取请求（[https://github.com/perfectline/validates_existence/pull/20](https://github.com/perfectline/validates_existence/pull/20)）。感谢您为我指明正确的方向@Beerlington。

# error-handling - 是否有 Lua 警告而不是 Lua 错误？

> ID：15360420
> 
> 赞同：7
> 
> 时间：2013-03-12T11:51:42.527
> 
> 标签：error-handling, lua, warnings

Lua 有**luaL_error**和**lua_error**函数可以在 C 函数中使用，例如：

```
luaL_error( L, "something bad" ); 
```

这将导致显示错误消息并停止 Lua 执行。错误消息将包含它发生的行和文件：

```
Error: ../example/ex01.lua:6: something bad 
```

是否有类似的功能可以显示错误但不会破坏 lua 执行？但显示它发生的线。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:50:03.667

[复制luaL_error](http://www.lua.org/source/5.2/lauxlib.c.html#luaL_error)的源代码，并将最后的调用替换为对使用字符串`lua_error`的适当调用。像这样的东西：`printf``lua_tostring(L,-1)`

```
LUALIB_API int luaL_warn (lua_State *L, const char *fmt, ...) {
  va_list argp;
  va_start(argp, fmt);
  luaL_where(L, 1);
  lua_pushvfstring(L, fmt, argp);
  va_end(argp);
  lua_concat(L, 2);
  printf("warning: %s\n",lua_tostring(L,-1));
  return 0;
}

static int luaB_warn (lua_State *L) {
      return luaL_warn(L, "%s", luaL_checkstring(L, 1));
} 
```

不要忘记通过在 say `base_funcs`in 中添加条目`lbaselib.c`或调用将其导出到 Lua `lua_register(L,"warn",luaB_warn)`。

# c# - 控件C#中的中心面板滚动

> ID：15360422
> 
> 赞同：5
> 
> 时间：2013-03-12T11:51:47.507
> 
> 标签：c#, winforms, panel, center

我有一个`Panel`动态添加控件的方法。我想滚动`Panel`到一个给定控件的位置`Panel`

我正在使用对象的`ScrollControlIntoView`方法`ScrollableControl`如下：

```
public void centerPanel(Control p){
        panel.ScrollControlIntoView(p);
    } 
```

但面板似乎移动到随机位置。

该`AutoScroll`属性设置`True`为`Panel`.

有什么想法吗 ？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:23:10.137

我发现了我的错误。在`Panel`添加`Control`到`Panel`.

因此，这是将 a 滚动`Panel`到给定控件的正确方法。

```
panel.Controls.Add(control);
panel.ScrollControlIntoView(control); 
```

谢谢。

# objective-c - 为什么 waitUntilAllOperationsAreFinished 不在此代码中等待？

> ID：15360423
> 
> 赞同：3
> 
> 时间：2013-03-12T11:51:47.677
> 
> 标签：objective-c, xcode

```
-(NSInteger) buttonIndexWithMessage:(NSString *) title andArrayOfOptions:(NSArray *) options
{
    self.operation=[NSOperationQueue new];

    [self.operation addOperationWithBlock:^{
        [[NSOperationQueue mainQueue]addOperationWithBlock:^{
            UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:title
                                                                     delegate:self
                                                            cancelButtonTitle:nil
                                                       destructiveButtonTitle:nil
                                                            otherButtonTitles:nil];

            for (NSString * strOption in options) {
                [actionSheet addButtonWithTitle:strOption];
            }

            [actionSheet showInView:[BGMDApplicationsPointers window]];
        }];
        self.operation.suspended=true; //Okay make t
    }];

    [self.operation waitUntilAllOperationsAreFinished];//Don't get out of the function till user act.

    //Wait till delegate is called.
    return self.buttonIndex;//I want to return buttonIndex here.
} 
```

即使 self.operation 尚未完成，执行点也会一直移动直到返回 self.buttonIndex。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:05:44.393

你怎么知道self.operation还没有完成呢？您添加到其中的操作执行起来非常快：它只是将另一个操作添加到主队列中。

你似乎认为那行

```
self.operation.suspended=true; 
```

应该阻止正在进行的操作。但是从[文档](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/NSOperationQueue_class/Reference/Reference.html)中：

> 此方法暂停或恢复操作的执行。暂停队列可防止该队列启动其他操作。换句话说，队列中（或稍后添加到队列中）且尚未执行的操作将被阻止启动，直到队列恢复。暂停队列不会停止已经在运行的操作。

您的操作已经在运行，因此不受影响。

您为什么不告诉我们您实际想要实现的目标，我们可以建议如何实现这一目标的好方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:06:27.007

手术*结束*！您正在等待一个快速完成的操作：该操作所做的只是向 mainQueue 添加一个操作。mainQueue 中发生的事情可能需要一些时间才能完成，但这不是您正在等待的操作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:01:11.727

第一个问题是您在这里暂停每个添加的操作：

```
self.operation.suspended=true; 
```

所以他们没有被处决。

另一个问题是不能保证该块将立即执行，因为您只是将它添加到主操作队列中。将其添加到主操作队列后，您不知道它何时会被安排。我会以这种方式更改代码：

```
[self.operation addOperationWithBlock:^{
    UIActionSheet *actionSheet = [[UIActionSheet alloc] initWithTitle:title
                                                                 delegate:self
                                                        cancelButtonTitle:nil
                                                   destructiveButtonTitle:nil
                                                        otherButtonTitles:nil];
    for (NSString * strOption in options) {
        [actionSheet addButtonWithTitle:strOption];
    }
    [actionSheet showInView:[BGMDApplicationsPointers window]];
}]; 
```

# jquery - 带有 ror 和 jquery 的简单菜单

> ID：15360430
> 
> 赞同：0
> 
> 时间：2013-03-12T11:52:03.700
> 
> 标签：jquery, ruby-on-rails

我正在尝试使用 ruby​​ on rails 和 Jquery 制作一个简单的菜单。什么意思是我有超类和超类，我想当我把鼠标放在一个超类上时，我想在另一个 div 中显示属于那个超类的类别。

```
<p></p>
<div class="tabbable tabs-left" >
  <ul class="nav nav-tabs" id="prueba1">
    <% @super_categories.each do |sc| %>
      <li><%=sc.name%></li>
    <% end %>
  </ul>
  <div class="tabbable tabs-left">
    <ul class="nav nav-tabs" id="prueba2">
      <div class="tab-content">

      <script type="text/javascript"> 
        $("#prueba1").mouseover(
          function () {
            $(prueba2).empty();
            $(prueba2).append($("
              <% @super_categories.each do |sc| %>
               <div id = <%=sc.name.to_s%> class = "tab-pane">
                  <% sc.categories.each do |cat|%>
                    <li><%=cat.name %></li>
                  <% end %>
              <% end %>"));
            }
          );     
        </script>
        <% end %>
      </div>
    <% end %>
  </div>
</ul>
</div> 
```

但当然它不起作用。我该怎么做？

谢谢！

# web - 主机更改 IP - 怎么办？

> ID：15360434
> 
> 赞同：0
> 
> 时间：2013-03-12T11:52:09.440
> 
> 标签：web, dns, ip, hosting, vps

我的主机在我的 VPS 主机中更改了我的 IP 地址。这是一个计划好的改变，他们问我什么时候对我有好处。

当他们更改了我的 IP 后，我设法在我的域主机上更改了 2 个名称服务器的 IP，因此他们现在将指向新的 ip。

我正在使用 kloxo，并且我已经更改了我的主域的 DNS 记录。它现在可以使用新的 IP 地址正常工作。

但是，我也在那里访问其他域，但它们似乎无法加载这些站点......

谁能告诉我可能是什么问题？也许也将他们的 DNS 更改为新的 ip？（但如果我这样做，我的所有域不都指向主域吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T11:56:07.333

这些其他域的 DNS 记录也需要更新。如果您已经正确设置了您的 VirtualHosts（或同等设备），那么更改其他域的 A 记录以匹配您服务器的新 IP 应该不会导致任何问题。

# android - Android JSONArray NullPointerException 而 url 工作正常

> ID：15360436
> 
> 赞同：0
> 
> 时间：2013-03-12T11:52:09.823
> 
> 标签：android, json, url, nullpointerexception, arrays

您好，我正在尝试使用 JSON 从网站检索一些数据。我从教程中得到了一些代码，但教程没有用。我认为这是因为教程中的 url 不起作用，但是当我尝试工作 url 时，它仍然给出相同的错误。有人可以告诉我我做错了什么。我到处都读到使用 JSON 应该非常简单和容易，但是我真的很头疼尝试所有教程和阅读所有示例。

这是教程中名为 Main.java 的代码：

```
public class Main extends ListActivity {
/** Called when the activity is first created. */
@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.listplaceholder);

    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();

//the website I use lacks some security so I don't wanne put it here.
//its still under construction.       
    JSONObject json = JSONfunctions.getJSONfromURL("http://somewebsite/jsonexample.html");

    try{

        JSONArray  student = json.getJSONArray("student");

        for(int i=0;i<student.length();i++){                        
            HashMap<String, String> map = new HashMap<String, String>();    
            JSONObject e = student.getJSONObject(i);

            map.put("id",  String.valueOf(i));
            map.put("name", "Naam: " + e.getString("name"));
            map.put("age", "Leeftijd: " +  e.getString("age"));
            mylist.add(map);            
        }       
    }catch(JSONException e)        {
         Log.e("log_tag", "Error parsing data "+e.toString());
    }

    ListAdapter adapter = new SimpleAdapter(this, mylist , R.layout.main, 
                    new String[] { "name", "age" }, 
                    new int[] { R.id.item_title, R.id.item_subtitle });

    setListAdapter(adapter);

    final ListView lv = getListView();
    lv.setTextFilterEnabled(true);  
    lv.setOnItemClickListener(new OnItemClickListener() {
        public void onItemClick(AdapterView<?> parent, View view, int position, long id) {              
            @SuppressWarnings("unchecked")
            HashMap<String, String> o = (HashMap<String, String>) lv.getItemAtPosition(position);                   
            Toast.makeText(Main.this, "ID '" + o.get("id") + "' was clicked.", Toast.LENGTH_SHORT).show(); 

        }
    });
}
} 
```

以下是教程中名为 JSONfunctions.java 的代码：

```
public class JSONfunctions {

public static JSONObject getJSONfromURL(String url){
    InputStream is = null;
    String result = "";
    JSONObject jArray = null;

    //http post
    try{
            HttpClient httpclient = new DefaultHttpClient();
            HttpPost httppost = new HttpPost(url);
            HttpResponse response = httpclient.execute(httppost);
            HttpEntity entity = response.getEntity();
            is = entity.getContent();

    }catch(Exception e){
            Log.e("log_tag", "Error in http connection "+e.toString());
    }

  //convert response to string
    try{
            BufferedReader reader = new BufferedReader(new InputStreamReader(is,"iso-8859-1"),8);
            StringBuilder sb = new StringBuilder();
            String line = null;
            while ((line = reader.readLine()) != null) {
                    sb.append(line + "\n");
            }
            is.close();
            result=sb.toString();
    }catch(Exception e){
            Log.e("log_tag", "Error converting result "+e.toString());
    }

    try{

        jArray = new JSONObject(result);            
    }catch(JSONException e){
            Log.e("log_tag", "Error parsing data "+e.toString());
    }

    return jArray;
}
} 
```

json：

{“学生”：[{“id”：“1”，“姓名”：“Piet”，“年龄”：“10”}{“id”：“2”，“姓名”：“Jaap”，“年龄" : "6" }] }

和日志猫：

```
03-12 11:24:09.773: E/AndroidRuntime(911): FATAL EXCEPTION: main
03-12 11:24:09.773: E/AndroidRuntime(911): java.lang.RuntimeException: Unable to start              activity ComponentInfo{me.mikey.my.games.galgjex/me.mikey.my.games.galgjex.Main}:        java.lang.NullPointerException
03-12 11:24:09.773: E/AndroidRuntime(911):  at   android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2059)
03-12 11:24:09.773: E/AndroidRuntime(911):  at   android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
03-12 11:24:09.773: E/AndroidRuntime(911):  at android.app.ActivityThread.access$600(ActivityThread.java:130)
03-12 11:24:09.773: E/AndroidRuntime(911):  at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
03-12 11:24:09.773: E/AndroidRuntime(911):  at android.os.Handler.dispatchMessage(Handler.java:99)
03-12 11:24:09.773: E/AndroidRuntime(911):  at android.os.Looper.loop(Looper.java:137)
03-12 11:24:09.773: E/AndroidRuntime(911):  at android.app.ActivityThread.main(ActivityThread.java:4745)
03-12 11:24:09.773: E/AndroidRuntime(911):  at java.lang.reflect.Method.invokeNative(Native Method) 
03-12 11:24:09.773: E/AndroidRuntime(911):  at java.lang.reflect.Method.invoke(Method.java:511)
03-12 11:24:09.773: E/AndroidRuntime(911):  at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786) 
03-12 11:24:09.773: E/AndroidRuntime(911):  at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
03-12 11:24:09.773: E/AndroidRuntime(911):  at dalvik.system.NativeStart.main(Native  Method)
03-12 11:24:09.773: E/AndroidRuntime(911): Caused by: java.lang.NullPointerException
03-12 11:24:09.773: E/AndroidRuntime(911):  at  me.mikey.my.games.galgjex.Main.onCreate(Main.java:41)
03-12 11:24:09.773: E/AndroidRuntime(911):  at android.app.Activity.performCreate(Activity.java:5008)
03-12 11:24:09.773: E/AndroidRuntime(911):  at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
03-12 11:24:09.773: E/AndroidRuntime(911):  at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
03-12 11:24:09.773: E/AndroidRuntime(911):  ... 11 more 
```

将 json 更改为：{“学生”：[{“id”：“1”，“name”：“Piet”，“age”：“10”}，{“id”：“2”，“name”：“ Jaap", "age" : "6" }] } 但它仍然给出了 NPE。还是我的json仍然无效？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:33:59.933

检查网站地址..

如果您的网站是正确的并且如果您在模拟器中运行您的应用程序，您将获得 NullpointerException。一旦在您的设备中检查您是否收到 JSON 响应。仍然如果您收到错误检查您是否在清单文件中添加了权限。如果您未添加权限，请在清单文件中添加以下权限。

```
 <uses-permission android:name="android.permission.INTERNET"/> 
```

并查看以下链接，这将对您有所帮助 [http://www.androidhive.info/2012/01/android-json-parsing-tutorial/](http://www.androidhive.info/2012/01/android-json-parsing-tutorial/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:36:46.643

将所有代码放在单独的线程或 AsyncTask 中，并确保您保留了权限

```
 <uses-permission android:name="android.permission.INTERNET"/> 
```

在你的清单中

尝试使用此代码从服务中获取数据

[一个界面如何用于不同的后台android任务？](https://stackoverflow.com/questions/14253421/how-one-interface-can-be-used-for-different-background-android-tasks/14376233#14376233)

# java - 基于标准Stack实现Sparse Matrix会产生编译错误

> ID：15360438
> 
> 赞同：0
> 
> 时间：2013-03-12T11:52:11.780
> 
> 标签：java, sparse-matrix

我正在基于`Stack`该类实现一个稀疏矩阵，但出现以下错误：

> Sparse.java:6：Sparse 不是抽象的，不会覆盖 Stack
> public class Sparse implements Stack {中的抽象方法 pop()

这是有问题的代码片段：

```
public class Sparse implements Stack {

    static int matrix[][] = new int[6][6];

    public static int[][] Random() {
        Random rand = new Random(seed);
        rand.nextInt(100);
        for (int i = 0; i < matrix.length; i++) {
            for (int j = 0; j < array[0].length; j++) {
                matrix[i][j] = rand.nextInt(100);
            }
            return matrix;
        }
    }
} 
```

任何和所有的帮助将不胜感激。谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:54:36.737

这意味着接口`Stack`有一个方法`pop()`。您必须实现该方法`pop()`，否则它将无法编译。

如果您必须快速测试您的代码并稍后实现该方法，您可能需要

```
public int pop() { // Refer to your Stack interface for signature - they must match.
    throw new UnsupportedOperationException("not implemented");
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T12:01:20.637

继承抽象类的类必须覆盖其中的每个方法。（必须给它定义）。如果不是，甚至子类（稀疏）也应该是抽象的。

但是如果你的类 Sparse 是 Abstract 你不能创建对象。（但你可以创建引用变量）。

所以最好添加

```
public int pop() { // Refer to your Stack class for signature - they must match.
    throw new UnsupportedOperationException("not implemented");
} 
```

正如@luiges90 所述

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T12:02:11.443

似乎您对抽象类和接口不太了解。请通过以下链接。会帮助你的。您可以随时 google 获取更多信息。:-)

[1] [http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html](http://docs.oracle.com/javase/tutorial/java/IandI/abstract.html) [2][何时使用接口或抽象类？何时使用两者？](https://stackoverflow.com/questions/1231985/when-to-use-interfaces-or-abstract-classes-when-to-use-both)

# c# - 在 Java 中模拟任何类的使用（特别是在 Android 中）

> ID：15360442
> 
> 赞同：2
> 
> 时间：2013-03-12T11:52:22.513
> 
> 标签：c#, java, android, unit-testing, mocking

我从 .NET 世界（C#）转向 Java（Android 开发）。

.NET 领域的许多模拟框架和工具允许替换/覆盖类/方法的使用，而无需将任何模拟对象注入测试方法（[Microsoft Fakes](http://msdn.microsoft.com/en-us/library/hh549175.aspx)就是其中之一）。

例如，在以下方法中：

```
public void SomeMethod()
{
     new SomeOtherClass().Do("This is a test!");
} 
```

调用**SomeOtherClass().Do**方法可以返回一个特定的值或以某种方式运行，即使我没有为这个类注入一个模拟对象到这个方法中。

以**Microsoft Fakes**为例，这可以通过与此类似的代码来完成：

```
using (ShimsContext.Create())
{
      // decide what to do when Do() gets called
      System.Fakes.ShimSomeOtherClass.Do = str => ....

      new SomeOtherClass().Do("blabla");
} 
```

据我在 Java/Android 模拟世界中所见，做这样的事情是不可能的。我将不得不重构我的所有代码来为每个方法注入它的依赖项。

虽然这在某些地方确实是一种很好的做法，但不可能在所有代码位置都这样做。

有没有办法用Java实现这一点？

我正在使用的框架：Mockito、PowerMock、Robolectric

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:04:43.407

您可以使用 PowerMock 模拟新对象的实例化`expectNew()`

[http://code.google.com/p/powermock/wiki/MockConstructor](http://code.google.com/p/powermock/wiki/MockConstructor)

```
SomeOtherClass someOtherMock = createMock(SomeOtherClass.class);
expectNew(SomeOtherClass.class).andReturn(someOtherMock);
expect(someOtherMock.do("blabla")).andReturn(...); 
```

编辑：您可以将 Mockito 与 PowerMockito 扩展一起使用

[http://code.google.com/p/powermock/wiki/MockitoUsage](http://code.google.com/p/powermock/wiki/MockitoUsage)

```
PowerMockito.whenNew(SomeOtherClass.class)... 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:01:39.613

我很确定 Mockito 可以满足您的要求，这是我的一些测试代码：

```
SnapshotManager snapshotManager = mock(SnapshotManager.class);
when(snapshotManager.storeBroadcast("MessageURL1", "B1")).thenReturn(new Distribution("AltMessageURL1", 1)); 
```

语法更复杂，但行为是相同的。

storeBroadcast 方法中的字符串文字不需要是字符串，它们也可以设置为约束值。

另外，您可以选择监视值并验证在将实例注入代码后调用了预期的方法。

# jquery - 拼字游戏 - 将字母的值与 jquery 一起添加

> ID：15360443
> 
> 赞同：2
> 
> 时间：2013-03-12T11:52:26.523
> 
> 标签：jquery, html

嗨，我正在尝试制作一个拼字游戏。

如果输入框发生变化，我想给每个字母一个值，然后将它们加在一起。

我进行了搜索并找到了如何对变化的数字求和，但我真的很难弄清楚如何用数字替换字母的值。这是我修改的一些代码：

```
$(document).on("change", "input[id ^= 'r1box']", function() {

    var sum = 0;

    $("input[id ^= 'r1box']").each(function(){
        sum += +$(this).val();
    });

    $("#r1totbox_id").val(sum);
}); 
```

我有 7 个 id 以“r1box”开头的盒子，然后是一个 id 为“r1totbox_id”的盒子。目前，如果我输入数字，我会得到一个总数，但我希望能够将“a”放入框 1，将“b”放入框 2，总共得到 4。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:09:58.383

```
var convert_letters_to_numbers(letter) {
    letter = letter.toLowerCase(); //this prevents any case-sensitive problem
    if (letter == 'a') return 1;
    ...
    /* etc etc etc */
} 
```

然后，在您的代码中：

```
sum += convert_letters_to_numbers($(this).val()); 
```

这假设您将在每场比赛中使用相同的值。如果你想让它动态化，你应该添加一个映射字典（或者更好的是一个 json 对象，这样你就可以在其他地方生成它们）

```
var mapping_array = new Array();
mapping_array['a'] = 3;
mapping_array['b'] = 1;
.... 
```

然后遍历它并返回相应的值

与您的最后评论：

```
var dictionary = {"a":1, "b":2}; 
```

你的转换函数应该只做一个简单的返回语句：

```
return dictionary[letter]; 
```

并且不需要循环

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:11:26.240

您需要一个将字母映射到拼字游戏点值的数组（[Source](http://en.wikipedia.org/wiki/Scrabble_letter_distributions)）：

```
var points = [1, 3, 3, 2, 1, 4, 2, 4, 1, 8, 5, 1, 3, 1, 1, 3, 10, 1, 1, 1, 1, 4, 4, 8, 4, 10]; 
```

然后您可以获取输入并将其与正确的点值匹配，方法是转换为大写并从 ASCII 码值中减去 65 (A) 以获得点数组的索引：

```
var letter = $(this).val().toUpperCase();
if (letter.length == 1) {
    var letterIndex = letter.charCodeAt(0) - 65;
    sum += points[letterIndex];
} 
```

演示：http: [//jsfiddle.net/Cp3Fd/](http://jsfiddle.net/Cp3Fd/)

# ruby-on-rails - Rails 反向自动链接

> ID：15360447
> 
> 赞同：0
> 
> 时间：2013-03-12T11:52:33.903
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我的 Rails 应用程序中有以下代码：

```
link_to('???',{:controller => 'profile', :action => 'show', :id => id}) 
```

我想摆脱'???' 并显示动态生成的 URL。我该怎么做？这有点像[自动链接 gem](https://github.com/tenderlove/rails_autolink)所做的，但我希望 Rails 将 URL 选项转换为文本，反之亦然。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:56:02.823

用于`url_for()`获取字符串。

```
url_for({:controller => 'profile', :action => 'show', :id => id)} 
```

在代码中：

```
url_hash = {:controller => 'profile', :action => 'show', :id => id}
link_to(url_for(url_hash), url_hash) 
```

请参阅[此问题](https://stackoverflow.com/questions/7154914/how-to-get-host-name-in-rails-3)以获取主机名：

```
url_hash = {:controller => 'profile', :action => 'show', :id => id}
link_to("#{request.host_with_port}#{url_for(url_hash)}", url_hash) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T13:53:20.447

```
link_to(nil,{:controller => 'profile', :action => 'show', :id => id}) 
```

从[link_to 文档](http://api.rubyonrails.org/classes/ActionView/Helpers/UrlHelper.html#method-i-link_to)：

> 如果将 nil 作为名称传递，则链接本身的值将成为名称

# jquery - 悬停时的滑动行为，内部 div 是绝对的

> ID：15360450
> 
> 赞同：0
> 
> 时间：2013-03-12T11:52:54.417
> 
> 标签：jquery

这是我无法弄清楚的事情。

这是一个简单的例子：http: [//jsfiddle.net/MrkMZ/](http://jsfiddle.net/MrkMZ/)

HTML：

```
<div id="box">
    <div id="top"><a href="#">top text</a></div>
    <div id="bottom"><a href="#">bottom text</a></div>
</div> 
```

CSS：

```
#box {
    width: 200px;
    height: 200px;
    background-color: yellow;
    position: relative;
}
#top {
    position: absolute;
    top: 0;
    left: 0;
    width: 200px;
    height: 50px;
    background-color: #ff0000;
}
#top a {
    margin-top: 20px;
    display: inline-block;
}
#bottom {
    position: absolute;
    bottom: 0;
    left: 0;
    width: 200px;
    height: 30px;
    background-color: #ff0000;
} 
```

JS：

```
$('#box').hover(
    function(){
        $(this).find('#top, #bottom').slideUp(300);
    },
    function(){
        $(this).find('#top, #bottom').slideDown(300);
    }
); 
```

如您所见，在框悬停时，顶部和底部 div 正确滑动，但顶部和底部 div 内的文本在滑动时表现不同。顶部文本保持不变，而底部文本随着 div 向下滑动。

无论如何，即使是顶部的文字幻灯片？或者使底部文本保持不动而不是滑动。

在 slideDown/slideUp jQuery 改变元素的高度。

唯一的区别是一个有顶部：0，底部一个有底部：0。仅此一项就产生了这种奇怪的效果。

我在这里想念什么？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T12:07:30.323

我已经更新了你的小提琴，我想这就是你要找的东西，我`margin-top:30px`为`a`标签做了[http://jsfiddle.net/MrkMZ/1/](http://jsfiddle.net/MrkMZ/1/)

# c# - C# Winform 应用程序 GUI 未显示使用 .BAT 文件作为计划任务运行

> ID：15360456
> 
> 赞同：2
> 
> 时间：2013-03-12T11:53:13.073
> 
> 标签：c#, winforms

我创建了一个用于发送批量电子邮件的 winform 应用程序。我已经使用 .BAT 文件安排了这个应用程序。该应用程序正在按计划运行并发送电子邮件，但未显示 GUI。

当我搜索时，我发现这个链接[Winforms app as Scheduled task](https://stackoverflow.com/questions/5793771/winforms-app-as-scheduled-task)，根据我已经确认我使用相同的用户帐户来安排任务并登录到机器。当我双击 .BAT 文件时，应用程序通过显示 GUI 运行。有谁知道是什么问题。这是我的 .BAT 文件中的内容。

```
c:

cd\

cd ABC

sendMailApp.exe 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:54:44.287

在你的最后一行，你可以尝试使用

```
call start sendMailApp.exe 
```

我认为这可能会解决它，调用将导致开始运行一个新进程并为*应该*显示 GUI 的进程打开一个新窗口。

这里的文档：

[http://ss64.com/nt/call.html](http://ss64.com/nt/call.html)

[http://ss64.com/nt/start.html](http://ss64.com/nt/start.html)

# c# - COM DLL 依赖项中的静态 DLL 数据的多个进程和副本

> ID：15360461
> 
> 赞同：1
> 
> 时间：2013-03-12T11:53:36.583
> 
> 标签：c#, c++, windows, com, process

我希望了解运行 COM DLL 时出现的一些意外行为，其中静态 C++ 数据似乎在多个进程之间共享。环境有点复杂，我对各种 COM 线程模型的理解相当薄弱，希望有人能提供帮助。

**环境**

*   运行多个 C# Web 服务的 64 位操作系统上的 IIS 服务器，每个服务都在其自己的 32 位应用程序池中，因此进程
    *   池具有“启用 32 位应用程序”=True 设置
*   每个 32 位 C# 服务调用不同的进程内 32 位 COM DLL（因此服务 A 调用 COM DLL 1，服务 C 调用 COM DLL 2。COM DLL 是使用 Qt 4.8 ActiveQt 用 C++ 编写的
*   COM DLL 依赖于许多共享的 32 位 C++ DLL，即 COM DLL 1 和 2 都依赖于 Utilities.dll
*   据我所知，没有为 COM DLL 设置 ThreadingModel，所以我预计系统将退回到主 STA。
    *   我知道这是不赞成的，但我目前没有足够的知识来改变它。
*   Utilities.dll 包含一些静态 C++ 数据
*   COM DLL 是使用“regsvr32”注册的，并且似乎没有列在“组件服务”中，尽管我对后者的了解很少。

观察到的问题是 Utilities.dll 中的静态数据似乎最终在不同的 IIS 进程之间共享，从而产生了不良后果。我曾预计，由于 COM 位于主 STA 中，它们将被访问，就好像它不是线程安全的一样，每个进程都会获得自己的 DLL 静态数据副本，但情况似乎并非如此。

有人可以解释静态数据是如何在进程之间共享的吗？

我怎样才能避免这种情况？（除了重构代码以删除所有静态数据，这目前并不可行）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T18:09:03.020

如果您看到 COM 对象之间共享数据，这意味着它们托管在同一进程中。是的，可以在进程之间共享数据，但不是偶然的。由于您的应用程序池是不同的进程，因此这些 COM 对象一定是托管在进程外的，并且只是加载到应用程序池中的存根。

如果您可以控制 Utilities.dll（听起来确实如此），我会尝试添加一些调试信息以找出托管 COM 对象的进程 ID。我希望您会发现它与应用程序池 ID 不匹配，并且您将能够使用该 ID 找出发生了什么。

理想情况下，精心设计的 COM 对象位于何处并不重要，这应该是实现细节。是否可以取消共享数据结构？

# asp.net - 移动 不在单独的配置文件中的 web.config

> ID：15360462
> 
> 赞同：4
> 
> 时间：2013-03-12T11:53:38.160
> 
> 标签：asp.net, iis-7, web-config, http-redirect

我们的 web.config 中有很多（超过 100 个）重定向，例如

```
<configuration>
   <system.webServer>
      <httpRedirect enabled="true" exactDestination="true" httpResponseStatus="Found">
         <add wildcard="/a" destination="/a/dfdf/default.htm" />
         <add wildcard="/sad" destination="/aasd/dfdf/defsadault.htm" />
         <add wildcard="/asdsaa" destination="/aasdas/dfasddf/default.htm" />
         <add wildcard="/aasdsa" destination="/asdsaa/dfdf/defsdault.htm" />
         <add wildcard="/aasd" destination="/adsa/dfdf/default.htm" />
..... more than 100
      </httpRedirect>
   </system.webServer>
</configuration> 
```

有没有办法我们可以在单独的 web.config 或任何其他最佳解决方案中管理此部分？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T11:56:54.753

您可以将一些配置元素移动到它们自己的配置文件中，以减少 web.config 中的混乱。

```
<configuration>
   <system.webServer>
      <httpRedirect configSource="httpRedirects.config" />
   </system.webServer>
</configuration> 
```

这是通过添加 configSource 属性来实现的，如上所示。

在你单独的 httpRedirects.config

```
<httpRedirect enabled="true" exactDestination="true" httpResponseStatus="Found">
     <add wildcard="/a" destination="/a/dfdf/default.htm" />
     <add wildcard="/sad" destination="/aasd/dfdf/defsadault.htm" />
     <add wildcard="/asdsaa" destination="/aasdas/dfasddf/default.htm" />
     <add wildcard="/aasdsa" destination="/asdsaa/dfdf/defsdault.htm" />
     <add wildcard="/aasd" destination="/adsa/dfdf/default.htm" />
</httpRedirect> 
```

注意我只用其他配置元素尝试过这个。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:00:48.440

您可以将其存储在单独的配置文件中，如下所示：[SectionInformation.ConfigSource 属性](http://msdn.microsoft.com/en-us/library/system.configuration.sectioninformation.configsource.aspx)

为了避免配置文件混乱`web.config`——可以在单独的配置文件中定义。然后可以从 web.config 文件中引用该文件，如下所示：

```
<httpRedirect configSource="httpRedirects.config" /> 
```

该`configSource`属性告诉 IIS 配置该`<httpRedirect>`部分是在单独的文件中定义的`httpRedirects.config`。

编辑：

请确保您已将 httpRedirect 属性设置`enabled=true`为***默认值为 false。***

```
<httpRedirect enabled="true" configSource="httpRedirects.config" /> 
```

# .net - Wrapped Entity Framework - 无法创建 x 类型的常量值。在此上下文中仅支持原始类型

> ID：15360463
> 
> 赞同：1
> 
> 时间：2013-03-12T11:53:39.863
> 
> 标签：.net, linq, entity-framework, entity-framework-5

我想使用实体框架执行 NOT EXISTS 查询，并在 LinqPad 中使用以下查询。

```
var context = new CSSDbEntities();

(from s in context.Appliances
where !context.AvailableResources.Any(es => es.ApplianceId == s.ApplianceId)
select s).Dump(); 
```

但是，当我尝试将其传输到我的应用程序时（我将上下文包装在 IUnitOfWork 接口中以允许我使用 Unity 模拟它/注入它/这就是我继承代码库的方式，它失败并显示“无法创建一个常量”运行时的异常。

我试图执行的实际代码是......

```
var query = from x in unitOfWork.Appliances
            where !unitOfWork.AvailableResources.Any(es => es.ApplianceId == x.ApplianceId)
            select s; 
```

unitOfWork 中的属性实现如下...

```
public IDbSet<Appliance> Appliances
{
    get { return _objectContext.Appliances; }
}

public IDbSet<AvailableResource> AvailableResources
{
    get { _objectContext.AvailableResources; }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:02:27.267

答案很简单，我被这个相关问题指出了正确的方向。

[EF 代码优先：无法创建类型为“”的常量值。此上下文仅支持原始类型（“例如 Int32、String 和 Guid”）](https://stackoverflow.com/questions/7584014/ef-code-first-unable-to-create-a-constant-value-of-type-only-primitive-type?rq=1)

我应该在 Appliance 对象上使用关联，而不是`unitOfWork`在我的“子查询”中使用该对象。

我的工作查询变成...

```
var query = from x in unitOfWork.Appliances
            where !x.AvailableResources.Any(es => es.ApplianceId == x.ApplianceId)
            select s; 
```

注意 where 子句！**x** .AvailableResources.Any 代替 ! **unitOfWork.AvailableResources.Any** _

# c# - 当 SQL Server 中的表格单元格值发生更改时，是否有办法从 Silverlight 触发事件？

> ID：15360465
> 
> 赞同：0
> 
> 时间：2013-03-12T11:53:42.433
> 
> 标签：c#, sql, silverlight

当 SQL 服务器中定义的表行或单元格值发生更改时，我想从我的 silverlight 应用程序中触发一个事件，这可能吗？也许可以附加一个听众？不知道，有什么建议吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:10:16.070

根据 MS SQL 的版本，您可以在列的内容更改时引发触发器：

[http://www.mssqltips.com/sqlservertip/2121/event-notifications-in-sql-server-for-tracking-changes/](http://www.mssqltips.com/sqlservertip/2121/event-notifications-in-sql-server-for-tracking-changes/)

是对过程的合理解释，否则它会给你短语到谷歌上！

# python - 使用 xmlrpc 库发布的 Wordpress 帖子状态

> ID：15360471
> 
> 赞同：0
> 
> 时间：2013-03-12T11:53:49.660
> 
> 标签：python, wordpress, xmlrpclib

我正在尝试使用 Python 通过 xmlrpc lib 发布帖子。问题在于发布状态：它设置为“将来发布”但应该是“发布”。这是我的代码的一部分：

```
status_draft = 0
status_published = 1
server = xmlrpclib.ServerProxy(wp_url)
title = titles.encode("utf-8")
content = text.encode("utf-8")
date_created = xmlrpclib.DateTime(datetime.datetime.today())
categories = ["News"]
tags = []
data = {'title': title, 'description': content, 'dateCreated': date_created, 'categories': categories, 'mt_keywords': tags}
post_id = server.metaWeblog.newPost(wp_blogid, wp_username, wp_password, data, status_published) 
```

WP 版本是 3.5.1，Python 2.7

我怎么解决这个问题 ？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-16T10:26:33.803

我发现问题确实在 dateCreated 中。解决该问题的方法是设置 date_created 时间减去随机时间值。

# javascript - 如何在 jquery/javascript 的键/值数组中的特定点插入键值对？

> ID：15360474
> 
> 赞同：2
> 
> 时间：2013-03-12T11:53:50.990
> 
> 标签：javascript, jquery

如果我有一个键值数组对象，希望有人可以在 jquery 中提供帮助

```
 var myArray= {};
    myArray['key1'] = 'value1';
    myArray['key2'] = 'value2';
    myArray['key3'] = 'value3';
    myArray['key5'] = 'value5';
    myArray['key6'] = 'value6'; 
```

如何在特定点插入另一个键值对？例如 myArray['key4'] = 'value4'; 在（或之后）key2 和（或之前）key3 之间？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T11:54:54.600

*ECMAscript Objects*中没有保证顺序，因此，无法在某个点插入新的*键/值对。*

请改用*数组*。

```
var arr = ['value1', 'value2', 'value3', 'value4', 'value5', 'value6'];

arr.splice(2, 0, 'new value');

console.log( arr ); // ['value1', 'value2', 'new value' 'value3', 'value4', 'value5', 'value6']; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T11:55:52.387

你所拥有的是一个对象 ( `{}`)，而不是一个数组 ( `[]`)。对象中的键没有保证的顺序，因此您不能在特定点插入一个；它们只是该对象的属性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T13:40:47.317

感谢您的输入。我希望它们相当于我错过的对象的拼接。显然不是，所以我求助于好的旧地图并重建。

```
function objectInsertafterkey(object, newKey, newVal, insertAfterkey){
newObject={};
$.map(object, function(value, key) {    
if(key == insertAfterkey){
newObject[key] = value;
newObject[newKey] = newVal;
}
else
{
newObject[key] = value;
}
});
return newObject;
} 
```

如果它们是插入对象的更好方法，请随时告诉我。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T11:59:22.717

这样做，使用对象：

```
 var myArray = {key1: value1, key2: value2}; 
```

添新：

```
myArray.key3 = "value3"; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T12:06:16.300

这可能会帮助您：

arr.splice 将为现有数组添加一个新值

[http://www.w3schools.com/jsref/jsref_splice.asp](http://www.w3schools.com/jsref/jsref_splice.asp)

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-03-12T11:57:14.143

正如 jAndy 所说，如果您想要特定的顺序，请使用数组。

或者，如果键具有可排序的名称（如您的示例中），您可以在使用前对键进行排序。

# java - 对象未在 Hibernate 中延迟加载时的警告

> ID：15360475
> 
> 赞同：4
> 
> 时间：2013-03-12T11:53:58.150
> 
> 标签：java, hibernate, lazy-loading

我想知道是否有办法告诉 Hibernate 在会话缓存中有太多某种类型的对象时生成某种控制台警告。我想这样做以进行负载测试，因为我们`OutOfMemoryException`有时会遇到从 Oracle 加载 BLOB 的问题。

我们现在还在使用`Hibernate 3.6.10`。我们目前进行此测试的最佳方法是生成比系统在正常用例中能够处理的更多的数据，并尝试加载父对象并查看它是否崩溃。这样做只是感觉有点糟糕。

欢迎任何建议。

我忘记提到的一个注意事项是，我希望能够将这种“记录”想法留在生产代码中以查明具体问题。

**- 编辑 -**

这是我正在尝试做的一个例子：

假设我有`@Entity ClassX`一个延迟加载的`@Entity ClassY`对象列表。`ClassY`以某种方式，我希望在将 100 个或更多实例加载到会话缓存中时吐出一条日志消息。这样，在开发过程中，我可以加载一个`ClassX`对象并注意我（或团队中的其他开发人员）是否碰巧在我不应该访问该列表时访问该列表。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T20:03:00.440

您可以附加一个`Interceptor`监听对象加载事件，维护每个唯一实体类型的计数，并在超过某个阈值时记录警告。[该文档](http://docs.jboss.org/hibernate/orm/3.6/reference/en-US/html/events.html)向您展示了如何通过在创建时传入它来定义会话范围的拦截器：

```
Session session = sf.openSession( new AuditInterceptor() ); 
```

很可能您没有手动创建会话，因此这可能没有帮助，但您声明会话的方式可能有某种传递方式`Interceptor`。

声明一个 SessionFactory 范围的拦截器更容易，但它似乎没有给你任何对正在创建对象的 Session 的引用，否则你可以在`WeakHashMap`（使用 Session作为关键，这样你就不会泄漏内存）。如果您使用默认的 Thread-local 会话策略，那么您可以随时询问`sessionFactory.getCurrentSession()`.

# c++ - 如何使用 libev 在 C++ 中创建异步方法

> ID：15360476
> 
> 赞同：0
> 
> 时间：2013-03-12T11:54:00.123
> 
> 标签：c++, asynchronous, libev

我正在尝试使用 libev 在 C++ 中创建一个异步方法。如果需要，我可以将回调方法作为参数传递。

例如

```
test();
printf("After test() method\n"); 
```

这`test()`是一个异步方法，所以下一条`printf()`语句应该在`test()`完成之前执行。

我尝试使用`libev`这个简单的例子：

```
void testCallback(struct ev_loop *loop, struct ev_io  *watcher, int revents)
{
    sleep(5);
    ev_io_stop(loop, watcher);
}

int test()
{
    struct ev_loop *loop = ev_default_loop(0);
    ev_io watch;

    ev_io_init(&watch, testCallback, 0, EV_READ);
    ev_io_start(loop, &watch);

    ev_run(loop, 0);

    return 0;
}

int main() {
    test();
    printf("After test() method");
    return 0;
} 
```

在此示例中，`printf`在该事件循环停止后执行。使用 libev 可以实现这种功能吗？我用谷歌搜索，但找不到这种需要的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T14:30:07.557

从代码中 printf 应该在循环停止后执行。测试不是异步的，而 testCallback 是异步的。你可能误解了逻辑。

# ios - 如何从 URL 方案中获取参数。

> ID：15360478
> 
> 赞同：3
> 
> 时间：2013-03-12T11:54:02.420
> 
> 标签：ios, iphone, objective-c, nsurl, url-scheme

我在我的 iPhone 应用程序中使用 URL 方案，从我将用户切换到 safari 的页面，然后从网页单击按钮，我正在恢复到应用程序当时，一些参数由网页传递，例如

```
 myapp://parameter=1 
```

如何从我的应用程序中找到此参数？我在其中放置了一个断点

```
 -(BOOL)application:(UIApplication *)application handleOpenURL:(NSURL *)ur 
```

但是在恢复时。它不会被调用。

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-03-12T12:03:59.077

```
NSString *query = [url query];
NSArray *queryComponents = [query componentsSeparatedByString:@"&"]; 
```

现在你得到了 queryComponents 中的所有字符串，比如

```
param1=value 
```

现在你可以得到这样的第一个值

```
NSArray *firstParam = [[queryComponents objectAtIndex:0] componentsSeparatedByString:@"="];

[firstParam objectAtIndex:0] is the name of param
[firstParam objectAtIndex:1] is value of the param 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-03-12T11:57:30.090

您可以使用它`url host` 来查找参数，其中参数可以是任何类型，之后的任何内容`http://`或自定义标记`custom://`都将在以下代码中捕获

```
 NSString *urlParameter = [[url host] stringByReplacingPercentEscapesUsingEncoding:NSUTF8StringEncoding]; 
```

如果您有多个参数，那么您可以使用`componentsSeparatedByString`方法来分隔参数

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-08-01T12:42:28.913

试试这个代码。即使您在 url 中有许多参数和值，这也会很有用。

```
NSURL *url = [NSURL URLWithString:@"xyz.com/result.php?data1=1123660801&data2=250072028055&presult=SUCCESS"];

NSURLComponents *components = [NSURLComponents componentsWithURL:url resolvingAgainstBaseURL:NO];
NSArray *queryItems = [components queryItems];

NSMutableDictionary *dict = [NSMutableDictionary new];

for (NSURLQueryItem *item in queryItems)
{
    [dict setObject:[item value] forKey:[item name]];
} 
```

# ios - 在 Google Maps SDK for native iOS/objective C 中的 InfoWindow/Marker 上添加 Click 事件

> ID：15360483
> 
> 赞同：17
> 
> 时间：2013-03-12T11:54:21.013
> 
> 标签：ios, objective-c, onclick, google-maps-markers, google-maps-sdk-ios

简单的问题

我正在开发一个适用于 iOS 的应用程序，我在其中嵌入了适用于原生 iOS 的新 Google 地图。一切都很好，除了一个问题，我在这里和谷歌都找不到本地 IOS/Objective-C 的合适解决方案（如果有，请告诉我，抱歉打扰你）

我想要什么：我希望用户单击打开信息窗口的标记。如果他单击或点击信息窗口后，它应该打开一个带有更多信息的新 UIView。

我怎样才能做到这一点？

感谢您的建议

* * *

## 回答 #1

> 赞同：84
> 
> 时间：2013-05-07T08:53:06.557

1.符合`GMSMapViewDelegate`协议。

```
@interface YourViewController () <GMSMapViewDelegate>
// your properties
@end 
```

2.设置你的`mapView_`代表。

```
mapView_.delegate = self; 
```

3.实现`GMSMapViewDelegate`方法

```
- (void)mapView:(GMSMapView *)mapView didTapInfoWindowOfMarker:(GMSMarker *)marker {
    // your code
} 
```

顺便说一句，`marker.userData`很有用。您可以将所需的数据设置到其中并在其中使用`- mapView:didTapInfoWindowOfMarker:`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-28T10:01:31.960

在哪里添加地图，添加

```
 mapView_.delegate=self; 
```

然后用这个

```
-(void)mapView:(GMSMapView *)mapView
didTapInfoWindowOfMarker:(id<GMSMarker>)marker{

   //info window tapped

} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-02-28T09:07:18.287

swift 4的完整答案

1.  添加`GMSMapViewDelegate`为代表

2.  像这样设置你的地图委托： `googlemap.delegate = self`

3.  添加这个函数

> ```
> func mapView(_ mapView: GMSMapView, didTap marker: GMSMarker) -> Bool 
>             {
>                // do something
>                 return true
>             } 
> ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-03-16T09:34:12.000

## 斯威夫特 5.1

您可以使用`GMSMapViewDelegate`：

```
mapView.delegate = self

func mapView(_ mapView: GMSMapView, didTapInfoWindowOf marker: GMSMarker) {
        print("InfoView tapped")
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-09-07T11:43:40.320

我正在使用适用于 iOS 的 Google Maps SDK。

我将 uiview 子类化为 infowindow 创建自定义视图“InfoWindow”。

添加@property (nonatomic,retain) UIView *actionOverlayCalloutView; 在您的视图控制器的头文件中。

```
- (UIView *)mapView:(GMSMapView *)mapView markerInfoWindow:(GMSMarker *)marker {
if(self.objSelectedParking != nil)
{
    float anchorSize = 0.5f;
    float infoWindowWidth = 250.0f;
    float infoWindowHeight = 250.0f;

    [self.actionOverlayCalloutView removeFromSuperview];
    InfoWindow *infoWindow = [[InfoWindow alloc] initWithFrame:CGRectMake(0, 0, infoWindowWidth, infoWindowHeight)];
    infoWindow.lblTitle.text = self.objSelectedParking.strParkingName;
    infoWindow.lblDescription.text = self.objSelectedParking.strParkingDescription;
    infoWindow.lblAddress.text = self.objSelectedParking.strParkingAddress;
    infoWindow.lblPhone.text = self.objSelectedParking.strParkingPhone;
    infoWindow.imageViewParking.image = [UIImage imageNamed:@"parking_image_sample.jpg"];

    float offset = anchorSize * M_SQRT2;

    self.actionOverlayCalloutView = [[UIView alloc] initWithFrame:CGRectMake(0, 0, infoWindowWidth, infoWindowHeight - offset/2)];
    [self.actionOverlayCalloutView setBackgroundColor:[UIColor clearColor]];

    self.actionOverlayCalloutView.layer.cornerRadius = 5;
    self.actionOverlayCalloutView.layer.masksToBounds = YES;

    UIButton *hiddenCloseButton = [[UIButton alloc] initWithFrame:CGRectMake((infoWindow.viewContainer.frame.origin.x + infoWindow.viewContainer.frame.size.width - 30), 10, 20, 20)];
    [hiddenCloseButton addTarget:self action:@selector(hiddenCloseButtonClickedInInfowindow:) forControlEvents:UIControlEventTouchUpInside];
    [self.actionOverlayCalloutView addSubview:hiddenCloseButton];

    UIButton *hiddenDirectionButton = [[UIButton alloc] initWithFrame:CGRectMake((infoWindow.lblAddress.frame.origin.x + infoWindow.lblAddress.frame.size.width + 5), (infoWindow.lblAddress.frame.origin.y - 15), 25, 25)];
    [hiddenDirectionButton addTarget:self action:@selector(hiddenDirectionButtonClickedInInfowindow:) forControlEvents:UIControlEventTouchUpInside];
    [self.actionOverlayCalloutView addSubview:hiddenDirectionButton];

    UIButton *hiddenInfoButton = [[UIButton alloc] initWithFrame:CGRectMake((infoWindow.innerContainerView.frame.origin.x + infoWindow.imageViewParking.frame.origin.x + infoWindow.imageViewParking.frame.size.width + 20), (infoWindow.innerContainerView.frame.origin.y + 25), 25, 25)];
    [hiddenInfoButton addTarget:self action:@selector(hiddenInfoButtonClickedInInfowindow:) forControlEvents:UIControlEventTouchUpInside];
    [self.actionOverlayCalloutView addSubview:hiddenInfoButton];

    UIButton *hiddenScheduleButton = [[UIButton alloc] initWithFrame:CGRectMake((infoWindow.innerContainerView.frame.origin.x + infoWindow.verticalLineSeperatorView.frame.origin.x + infoWindow.verticalLineSeperatorView.frame.size.width + 10), (infoWindow.innerContainerView.frame.origin.y + 25), 25, 25)];
    [hiddenScheduleButton addTarget:self action:@selector(hiddenScheduleButtonClickedInInfowindow:) forControlEvents:UIControlEventTouchUpInside];
    [self.actionOverlayCalloutView addSubview:hiddenScheduleButton];

    [infoWindow addSubview:self.actionOverlayCalloutView];

    CLLocationCoordinate2D anchor = [_mapView.selectedMarker position];
    CGPoint point = [_mapView.projection pointForCoordinate:anchor];
    point.y -= _mapView.selectedMarker.icon.size.height + offset/2 + (infoWindowHeight - offset/2)/2;
    self.actionOverlayCalloutView.center = point;

    [_mapView addSubview:self.actionOverlayCalloutView];
    return infoWindow;
}

return nil;
}

-(void)mapView:(GMSMapView *)pMapView didChangeCameraPosition:(GMSCameraPosition *)position {
if (pMapView.selectedMarker != nil && self.actionOverlayCalloutView.superview)
{
    float anchorSize = 0.5f;
    float infoWindowHeight = 250.0f;

    CLLocationCoordinate2D anchor = [_mapView.selectedMarker position];
    CGPoint point = [_mapView.projection pointForCoordinate:anchor];
    float offset = anchorSize * M_SQRT2;
    point.y -= _mapView.selectedMarker.icon.size.height + offset/2 + (infoWindowHeight - offset/2)/2;
    point.y = point.y - 10; //PRATIK GUJARATI CODE TO ADJUST HEIGHT AND Y VALUE OF TRANSPARENT OVERLAY VIEW
    self.actionOverlayCalloutView.center = point;
} else {
    [self.actionOverlayCalloutView removeFromSuperview];
}
}

- (void)mapView:(GMSMapView *)mapView didTapAtCoordinate:(CLLocationCoordinate2D)coordinate {
[self.actionOverlayCalloutView removeFromSuperview];
}

- (void)observeValueForKeyPath:(NSString *)keyPath ofObject:(id)object change:(NSDictionary *)change context:(void *)context {
if ([keyPath isEqualToString:@"mapView.selectedMarker"]) {
    if (!_mapView.selectedMarker) {
        [self.actionOverlayCalloutView removeFromSuperview];
    }
}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-11-24T06:26:35.950

1.  创建一个要在 infoWindow 中显示的子视图。

2.  设置子视图的框架等于 infoWindow 视图的框架。

    ```
    subView = [[[NSBundle mainBundle] loadNibNamed:@"viewName" owner:self options:nil] objectAtIndex:0]; 
    [subView setFrame:infoview.frame]; 
    [self.mapview addSubview:subView]; 
    ```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2017-12-29T06:18:03.280

在谷歌地图查看信息获取信息

```
 func mapView(_ mapView: GMSMapView, didTapInfoWindowOf marker: GMSMarker) {
    print(marker.title!)
    print(marker.snippet!)
} 
```

# vba - Excel 2003 VBA（可扩展性）：路径/文件访问错误 wnen 在运行时更改 VBComponent/Usetform 的名称

> ID：15360494
> 
> 赞同：1
> 
> 时间：2013-03-12T11:54:47.847
> 
> 标签：vba, excel, extensibility

我正在尝试创建一个自定义/高级消息框（因为我可以或应该能够）

我在wenb上查看了这些资源：

1) [MSDN - 如何以编程方式操作用户窗体](http://support.microsoft.com/kb/185774)

2)[以编程方式添加用户窗体](http://www.vbaexpress.com/kb/getarticle.php?kb_id=228)

我在我的 VB 项目中创建了一个名为“MessageBox”的类模块，它添加了一个用户窗体，并且应该添加一个按钮然后显示窗体......以及添加了 Visual Basic 应用程序扩展性参考。

但是当我尝试更改用户表单名称时，^&%^ 代码不断给我一个路径/文件访问错误...

我究竟做错了什么？

```
Private oForm As Object

Function Show(Optional ByVal MessageText As String, Optional ByVal Buttons As     VbMsgBoxStyle = vbOKOnly, Optional ByVal Caption As String) As VbMsgBoxResult

Dim oControl() As MSForms.CommandButton
Dim x As Integer, MaxWidth As Long

Set oForm = Application.VBE.ActiveVBProject.VBComponents.Add(vbext_ct_MSForm)

With oForm
    .Properties("Height") = 200
    .Properties("Width") = 300
    .Properties("Caption") = Caption
        If Buttons = vbDefaultButton1 Then
            ReDim oControl(0)
            Set oControl(0) = .Designer.Controls.Add("Forms.CommandButton.1")
            With oControl(0)
                .Caption = "OK"
                .Height = 18
                .Width = 44
                .Left = MaxWidth + 147
                .Top = 6
                .Name = "cmdOK"
            End With
        End If
        .Name = "cMessageBox"
    End With
    'Application.VBE.ActiveVBProject.VBComponents("UserForm1").Name="cMessageBox"

    ' ActiveWorkbook.VBProject.VBComponents ("cMessageBox")
    With oForm.CodeModule
        x = .CountOfLines
        .InsertLines x + 1, "Sub cmdOK_Click()"
        .InsertLines x + 2, "    Unload Me"
        .InsertLines x + 3, "End Sub"
    '        .InsertLines x + 4, ""
    '        .InsertLines x + 5, "Sub CommandButton2_Click()"
    '        .InsertLines x + 6, "    Unload Me"
    '        .InsertLines x + 7, "End Sub"
    End With
    Call ShowIt

    End Function

    Private Sub ShowIt()
    cMessageBox.Show
    End Sub 
```

# ruby - 如何使用 Ruby 读取文本文件并将数据保存到 SQLite DB

> ID：15360496
> 
> 赞同：-2
> 
> 时间：2013-03-12T11:54:59.190
> 
> 标签：ruby

我正在尝试读取包含数据作为“ID 名称值”的文本文件。ruby 代码应该解析这个文本文件并将其保存在 SQLite DB 中。DB 也有相同数量的列。并且，应删除该行的数据库中较旧的数据，同时将 id 保持为 PK。

如果可能的话，请让我知道一些代码片段的步骤。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T11:56:55.210

您可以尝试将:col_sep 设置为的[CSV库](http://ruby-doc.org/stdlib-1.9.2/libdoc/csv/rdoc/CSV.html)`\s`

```
require 'csv'
CSV.foreach("path/to/file", col_sep: '\s') do |row|
  row[0] # ID
  row[1] # Name
  row[2] # Value
end 
```

# bugzilla - 将 Pivotal 跟踪器与 bugzilla 集成

> ID：15360499
> 
> 赞同：0
> 
> 时间：2013-03-12T11:55:13.933
> 
> 标签：bugzilla, pivotaltracker

我正在测试 bugzilla 与关键跟踪器的集成。我试图关联一个垃圾填埋场安装。但是我在联系服务器时遇到了超时。有可能解决这个问题吗？或者是否可以将关键跟踪器与本地安装的 bugzilla 集成？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-02-13T16:14:58.520

要集成 Pivotal 和 Bugzilla，您需要让您的 Bugzilla 对 Internet 公开可用，因为 Pivotal 后端服务器将尝试从“外部”而不是您的本地 PC 连接到它。

# entity-framework - 如何使用实体框架处理 varchar 列？

> ID：15360500
> 
> 赞同：7
> 
> 时间：2013-03-12T11:55:14.910
> 
> 标签：entity-framework

我有一个带有`varchar`列的表，并且我正在使用实体框架在`WHERE`子句中使用此列。

实体框架生成查询，`N''`因此无法使用列上的索引。有没有办法强制实体框架生成`varchar`查询而不是`nvarchar`一个？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T12:04:18.040

它实际上取决于您如何构建 EF 模型，如果您使用它的设计器，您可以为每列指定所需的数据类型（在您的情况下，只需设置`varchar`并完成）。

如果您使用的是代码优先方法，则必须使用适当的属性装饰表示该列的属性（`string`.NET 中的对象始终是 Unicode，因此`nvarchar`默认情况下会映射），只需执行此操作（使用数据注释，如果您正在使用`StringAttribute`然后将其`IsUnicode`属性设置为`false`）：

```
[Column(TypeName = "varchar")]
public string YourColumnName
{
    get;
    set;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-19T22:50:46.207

您可以使用 EntityFunctions.AsNonUnicode(string) 方法，因此 EF 不会将字符串值作为 nvarchar 传递。我在使用 EF 5 和 EDMX 时遇到了同样的问题，其中 Oracle 数据库忽略了 varchar2 列索引，这对我有用。

```
var q = (from TableClass t in TableName
         where t.varchar2Column == EntityFunctions.AsNonUnicode(someText)); 
```

MSDN 参考：[https ://msdn.microsoft.com/pt-br/library/system.data.objects.entityfunctions(v=vs.110).aspx](https://msdn.microsoft.com/pt-br/library/system.data.objects.entityfunctions(v=vs.110).aspx)

# android - 在 Android 中关闭键盘保护屏幕

> ID：15360503
> 
> 赞同：2
> 
> 时间：2013-03-12T11:55:27.970
> 
> 标签：android

我有一个问题，键盘保护屏幕出现在调用屏幕前面。需要一种方法来关闭键盘保护屏幕。这是在 4.1 android 版本上。我尝试了 windowmanager.layoutparams 的所有标志，但没有成功关闭键盘保护屏幕。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-02-01T13:25:25.450

这适用于我在 KitKat
In onCreate 之前 setContentView 和之后 super

```
KeyguardManager keyguardManager = (KeyguardManager)   getSystemService(Activity.KEYGUARD_SERVICE);
    KeyguardLock lock = keyguardManager.newKeyguardLock(KEYGUARD_SERVICE);
    lock.disableKeyguard(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:36:25.083

```
KeyguardManager km = (KeyguardManager) getSystemService(Context.KEYGUARD_SERVICE);
keyguard = km.newKeyguardLock("MyApp"); 
```

禁用键盘

```
public void unlockPhone() {
    keyguard.disableKeyguard();
} 
```

并且不要忘记重新启用它

```
public void lockPhone() {
    keyguard.reenableKeyguard();
} 
```

不要忘记使用 DISABLE_KEYGUARD 权限。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:28:36.443

澄清一下，您尝试了 FLAG_DISMISS_KEYGUARD 和 FLAG_SHOW_WHEN_LOCKED？[http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html)

您是否在清单中包含了 DISABLE_KEYGUARD 权限？ [http://developer.android.com/reference/android/Manifest.permission.html#DISABLE_KEYGUARD](http://developer.android.com/reference/android/Manifest.permission.html#DISABLE_KEYGUARD)

如果一切都失败了，也许这会有所帮助： [http ://www.xplorationstudio.com/xploreandroid/?p=23](http://www.xplorationstudio.com/xploreandroid/?p=23)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-05-20T09:58:40.110

除了上述答案外，活动必须有一个全屏窗口才能工作。

# javascript - 对于浏览器中的客户端使用，Python 会不会太慢？

> ID：15360511
> 
> 赞同：-5
> 
> 时间：2013-03-12T11:55:47.223
> 
> 标签：javascript, python, client-side, client-side-scripting

我听说过这种说法`Python`在浏览器中太慢而无法使用。

我认为`Javascript`只是在这方面更胜一筹，因为公司`Google`需要快速（并且快速），因为他们需要它来生存，但我可能是错的。

`Python`在如何和设计上是否有任何差异`JS`会影响它们（将）在浏览器中的执行方式？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T12:01:37.257

There is a project named [Brython](http://www.brython.info) designed to replace JavaScript as the scripting language for the web.

# python - python的百分比

> ID：15360523
> 
> 赞同：-2
> 
> 时间：2013-03-12T11:56:09.737
> 
> 标签：python, python-3.x, percentage

我有一个 excel 表，我需要从中创建一个 Python 函数，定义“Go”的百分比位于 Motion 行中。
运动行有 16 个（开始）和 4 个（停止），总共 20 个。

我想出了这个 python 代码，但它不能按需要运行

```
if Motion = 20:
       Go = FormSet.GetFieldValue(CurrentForm, "16")
       Stop = FormSet.GetFieldValue(CurrentForm, "4")
       delta = float(20 - 16) / 100
       print( '( (go) are what percentage of the field [motion]: ', acount))) 
```

我真的很挣扎。如果有人可以帮助我，那就太好了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:01:32.373

The answer is 80%.

For Python 3:

```
>>> a=16
>>> b=4
>>> (a/(a+b))*100
80.0 
```

For Python 2:

```
>>> a=16
>>> b=4
>>> (a/float(a+b))*100
80.0 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:01:41.803

this is probably a typo:

```
if Motion = 20 
```

or you really mean to do this:

```
if Motion == 20: 
```

Other than this I don´t see any obvious mistakes (except that I don't get what you are trying to print)

# sorting - 文件名唯一部分的powershell列表

> ID：15360525
> 
> 赞同：2
> 
> 时间：2013-03-12T11:56:14.600
> 
> 标签：sorting, powershell, unique, filenames

我有多台机器将文件上传到一个 FTP 目录。文件名的第一部分是机器，其余部分是时间戳，例如 AAAAA_20130312_125113。

现在我想获取已上传到此目录的所有 Unique 机器的排序列表。我设法将丢失的所有 filenames.substring(0,5) 写入主机，但我仍然没有唯一的机器名称。

```
$files=Get-ChildItem $strMOVETO -Name -Include TAS*.csv -Recurse
ForEach ($i in $files) { Write-Host $i.Substring(0,5) } 
```

关于如何做到这一点的任何提示？不一定非得是一个班轮，虽然那将是一个很好的挑战;-)。

谢谢！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:39:31.027

当你有一个 8 个字符的机器名称时会发生什么？你的`substring`意志会破裂。由于机器名称、日期和时间由 分隔`_`，因此拆分并获取第一项。

```
Get-ChildItem $strMOVETO -recurse -name -include TAS*.csv|%{$_.split("_")[0]}|sort-object -unique 
```

要过滤日期：

```
Get-ChildItem $strMOVETO -recurse -include TAS*.csv|where-object{$_.lastwritetime -ge (get-date).adddays(-1)}|%{$_.basename.split("_")[1]}|sort-object -unique 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:24:47.810

未经测试，但类似这样：

```
Get-ChildItem $strMOVETO -Name -Include TAS*.csv -Recurse | % { $_.Name.Substring(0,5) } | Sort -Unique 
```

您不需要在循环内执行 Write-Host ，使用 % 而不是 foreach 循环更容易。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:19:12.977

将命令的结果通过管道传输到`| sort -unique`

```
$files=Get-ChildItem $strMOVETO -Name -Include TAS*.csv -Recurse
ForEach ($i in $files) { Write-Host $i.Substring(0,5) } | sort -unique 
```

...但最好还是简化脚本...

```
$filter = "TAS*.csv"
Get-ChildItem -Path $strMOVETO -Filter $filter -Recurse | % {$_.BaseName.Substring(0,5) } | sort -unique 
```

# javascript - 获取对象不支持 $.post 上的此操作错误

> ID：15360529
> 
> 赞同：1
> 
> 时间：2013-03-12T11:56:19.877
> 
> 标签：javascript, asp.net-mvc

这是我的javascript方法：

```
function AssignDebtor(e) {
        var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
        var debtorId = dataItem.Id;

        $.post({
            url: '@Url.Action("AssignDebtorToUnallocatedReceipt", "Debtor")',
            data: new { unallocatedReceiptId : cdcUnallocatedReceiptId, debtorId : debtorId },
            success: function (result, textStatus, jqXHR) {
                if (result.success) {
                    var window = $("#LookupDebtorWindow").data("kendoWindow");
                    window.close();

                    var grid = $("#UnallocatedReceiptsGrid").data("kendoGrid");
                    grid.dataSource.read();
                }
                else {
                    alert(result.error);
                }
            },
            dataType: 'json'
        });
    } 
```

在运行时，调试器在 $.post 行停止，并返回此错误：

> 0x800a01bd - JavaScript 运行时错误：对象不支持此操作

deborId 成功获取它的值。我构建方法的方式可能存在问题吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:13:07.783

```
new { unallocatedReceiptId : cdcUnallocatedReceiptId, debtorId : debtorId } 
```

看起来像一个语法错误，但不幸的是没有。相反，当您尝试将对象（甚至根本不是函数）用作构造函数时，它会抛出您遇到的异常。

只需省略[`new`运算符](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/new)。

此外，正如@danludwig 所提到的，该[`$.post`函数](http://api.jquery.com/jQuery.post/)具有不同的签名，您不能将对象作为参数传递。而是切换到`$.ajax`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T13:06:37.333

`$.post`不允许您传入 javascript 对象，它需要更多强类型的方法参数。[请参阅 jQuery 文档](http://api.jquery.com/jQuery.post/)并尝试这样做：

```
function AssignDebtor(e) {
    var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
    var debtorId = dataItem.Id;

    $.ajax({
        type: 'POST',
        url: '@Url.Action("AssignDebtorToUnallocatedReceipt", "Debtor")',
        data: { unallocatedReceiptId : cdcUnallocatedReceiptId, debtorId : debtorId },
        success: function (result, textStatus, jqXHR) {
            if (result.success) {
                var window = $("#LookupDebtorWindow").data("kendoWindow");
                window.close();

                var grid = $("#UnallocatedReceiptsGrid").data("kendoGrid");
                grid.dataSource.read();
            }
            else {
                alert(result.error);
            }
        },
        dataType: 'json'
    });
} 
```

...或者如果你偏爱`$.post`，你可以这样做：

```
function AssignDebtor(e) {
    var dataItem = this.dataItem($(e.currentTarget).closest("tr"));
    var debtorId = dataItem.Id;

    $.post('@Url.Action("AssignDebtorToUnallocatedReceipt", "Debtor")',
        { unallocatedReceiptId : cdcUnallocatedReceiptId, debtorId : debtorId },
        function (result, textStatus, jqXHR) {
            if (result.success) {
                var window = $("#LookupDebtorWindow").data("kendoWindow");
                window.close();

                var grid = $("#UnallocatedReceiptsGrid").data("kendoGrid");
                grid.dataSource.read();
            }
            else {
                alert(result.error);
            }
        },
        'json'
     );
} 
```

`new`请注意，我还从您的参数对象中取出了关键字。

# asp.net - 服务器上的 Datagrid 行为不同

> ID：15360534
> 
> 赞同：1
> 
> 时间：2013-03-12T11:56:28.280
> 
> 标签：asp.net, .net-4.0, datagrid

可能无法回答这个问题，但也许有人遇到了这个问题，可以给我一些想法。我们正在将我们所有的应用程序转换为框架 4.0。我们在 2.0\. 在我的一个 asp 应用程序上，我得到了一个`DataGrid`. 对此`DataGrid`，我有一个`SelectedIndexChanged`。在这种情况下，此行将无法在服务器上运行，但会在本地运行：

```
 myDataGrid.SelectedItem.BackColor = Color.FromArgb(253, 247, 166) 
```

这应该把线变成黄色。我使用 IIS，我的系统是 windows 7，服务器是 windows server 2008。有什么想法吗？需要更多信息才能回答？

更新：似乎`SelectedIndexChanged`甚至不会开火。

# javascript - 在达到特定字符限制时在文本编辑器中自动输入每行

> ID：15360535
> 
> 赞同：1
> 
> 时间：2013-03-12T11:56:30.983
> 
> 标签：javascript, text, editor

在 JavaScript 文本编辑器中，每行接受的字符总数为 65。我想将一行中接受的字符数更改为 35，而不更改文本编辑器的总字符长度 (65)。

因此，如果用户输入第 36 个字符，尽管每行字符长度为 65，但光标应该转到第二行。每行只能接受 35 个字符。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:00:33.993

只能假设您谈论的是 TEXTAREA html 标记，在这种情况下，您最好的选择是使用 JavaScript 正则表达式替换插入新行，您可以将其附加到 OnChange 事件。

**编辑**这个 JS 小提琴似乎工作。我使用了“keyup”事件而不是“change”。[http://jsfiddle.net/sUS5s/](http://jsfiddle.net/sUS5s/)

HTML

```
<textarea id="demo" rows="5" cols="65"></textarea> 
```

JS

```
$("#demo").keyup(function(event) {
    var txt = $(this).val();
    $(this).val(txt.replace(/([^\r\n]{35})/gm, "$1\r"));
}); 
```

简单的正则表达式替换为替换。匹配 35 个连续的非换行符并将它们替换为自己加上换行符。

如果您不断向前键入，这将起作用，您需要一些更复杂的东西来让您插入前一行等，而新行不会歪斜。

**编辑**没有 jQuery

```
document.getElementById("demo").onkeyup = function() {
    var txt = document.getElementById("demo").value;
    document.getElementById("demo").value = txt.replace(/([^\r\n]{35})/gm, "$1\r");
}; 
```

# c# - How can I connect C# with Db with App.config?

> ID：15360536
> 
> 赞同：4
> 
> 时间：2013-03-12T11:56:38.910
> 
> 标签：c#, sql, .net, sql-server, app-config

I need to connect C# with SQL Server database using `app.config`.

My code is:

```
public partial class Form1 : Form
{
    string  connectionString = ConfigurationManager.ConnectionStrings["Conn"].ConnectionString;     

    public Form1()
    {
            InitializeComponent();
    }

    public void InsertDeleteUpdate(string query)
    {
            try
            {
                SqlConnection Conn = new SqlConnection(connectionString);
                Conn.Open();
                SqlCommand comm = new SqlCommand(query, Conn);
                comm.ExecuteNonQuery();
                Conn.Close();
                MessageBox.Show("Succeeded");
            }
            catch (Exception ex)
            {
                MessageBox.Show(ex.Message);   
            }
        } 
```

and in `app.config` I have:

```
<connectionStrings>
    <add name="Test1" 
         providerName="System.Data.SqlClient"
         connectionString="Data Source=KSPR1WS126;Initial Catalog=Test1;User ID=sa" />
</connectionStrings> 
```

but I get an error and I can't fix it:

> ConfigurationErrorExeption was Unhandled Configuration system failed to initialize

Can anyone help me please ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T11:58:08.603

Try:

```
var connectionString = ConfigurationManager.ConnectionStrings["Test1"].ConnectionString; 
```

You're referencing `Conn` as the connection string name but referenced it as `Test1` in the `App.Config`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:02:12.847

Try below code and then check

```
string connectionString = ConfigurationManager.ConnectionStrings["Test1"].ConnectionString; 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T12:05:41.987

Try this..

```
 <connectionStrings>
  <add name="Conn" providerName="System.Data.SqlClient"
        connectionString="Data Source=KSPR1WS126;Initial Catalog=Test1;User ID=sa" />
  </connectionStrings> 
```

# javascript - 正则表达式，字符串是白名单字符的组合，不包含黑名单中的任何字符

> ID：15360540
> 
> 赞同：3
> 
> 时间：2013-03-12T11:56:43.933
> 
> 标签：javascript, regex, qml

1）如何正则表达式验证用户输入是否包含来自 A 组的任何字符组合并且不包含来自另一个 D 组的任何字符？
2) 还要检查字符串长度是否在 2 到 255 之间

换句话说，对于所有字符串字符：A AND NOT D。

我从服务器收到两组字符（白名单和黑名单），需要根据这些字符验证用户输入。我不能影响设计，必须忍受它。由于其他设计限制，我还必须使用正则表达式。

这是我到目前为止所得到的（根本不工作）：

`/^(?![23]+)[0-9]{2,255}$/`

**23**将是简单的字符黑名单
**0-9**将是简单的字符白名单

一些例子：

**3014567890** --> 失败，3 存在
**0145678902** --> 失败，2 存在
**0123456789** --> 失败，2 和 3 存在
**014567890** --> ok
**88774411489** --> ok
**5** --> 失败，没有足够的字符
**1abc** - -> 失败，abc 非法字符
**ab1c** --> 失败，abc 非法字符
**abc1** --> 失败，abc 非法字符

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T12:03:21.760

你快到了，前瞻断言需要一些工作：

```
/^(?!.*[23])[0-9]{2,255}$/ 
```

这样，如果字符串中有（至少）一个`2`或`3`任何位置（即在任意数量的字符 ( `.*`) 之后），则否定前瞻中的正则表达式匹配，从而导致断言失败。

In this (apparently) simplified example, you could of course just have used `/^[014-9]{2,255}$/`.

# python - 龙卷风异步请求

> ID：15360553
> 
> 赞同：0
> 
> 时间：2013-03-12T11:57:12.480
> 
> 标签：python, asynchronous, httprequest, tornado

我在 Tornado 中有这部分代码：

```
............
como_url = "".join(['http://', options.como_address, ':', options.como_port, 
                        '/ztc_config?netid=0&opcode_group=0&opcode=0&start=-20s&end=-1s'])

http_client = AsyncHTTPClient()
response = yield tornado.gen.Task(http_client.fetch, como_url)

ret = {}
if response.error:
    ret['error'] = 'Error while retrieving the response'
    self.write(tornado.escape.json_encode(ret))
    self.finish()
else:
......... 
```

我向传感器发送命令，然后向数据库发出 http 请求以检索传感器的响应。在我做出回应并采取一些行动之后。

现在，我必须发送两次 http 请求来检索响应。我第一次向传感器发送命令时，请求太快而无法接收响应。

重新发送命令后，发现响应正确，一切正常。

为什么？如何设置我不知道请求的超时...或者如何在 Tornado 中重新发送请求两次？

谢谢你。

**编辑**

我是这样写的：

```
como_url = "".join(['http://', options.como_address, ':', options.como_port, 
                        '/ztc_config?netid=0&opcode_group=0&opcode=0&start=-20s&end=-1s'])

    http_client = AsyncHTTPClient()
    #response = yield tornado.gen.Task(http_client.fetch, como_url)
    request = tornado.httpclient.HTTPRequest(url=como_url, connect_timeout=5.0, request_timeout=2.0)
    response = yield tornado.gen.Task(http_client.fetch, request)
    print response 
```

我得到：

```
HTTPResponse(code=200,request_time=0.30609703063964844,buffer=<io.BytesIO object at 0x276a1d0>,_body=None,time_info={},request=<tornado.httpclient.HTTPRequest object at 0x2764310>,effective_url='http://131.114.52.207:44444/ztc_config?netid=0&opcode_group=0&opcode=0&start=-20s&end=-1s',headers={'Content-Type': 'text/plain'},error=None) 
```

为什么request_time=0？？？

# c++ - 使用字符串引用

> ID：15360555
> 
> 赞同：5
> 
> 时间：2013-03-12T11:57:15.663
> 
> 标签：c++, reference

我有一个这样的课程。我想对字符串使用引用，但它不起作用。我怎样才能使用 string& ？

```
#include <string>
using namespace std;
class T
{
public:
    T(string& s);
private:
    string s;
};

T::T(string& s)
{
    this->s = s;
}
int main(void)
{
    T t("Test Object");
    return 0;
} 
```

> 错误：“T::T(std::string &)”：无法将参数 1 从“const char [12]”转换为“std::string &”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T11:59:19.030

使用`const`：

```
class T
{
public:
    T(const string& ss);
private:
    string s;
};

T::T(const string& ss) : s(ss)
{
} 
```

`"Test Object"``const` `string`在传递给 的构造函数之前将被构造为 a `T`，因此构造函数必须接受 a `const string`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:00:19.060

您没有传入 std::string。正如它所说，它不能从 const char 数组转换为 string-ref。将构造函数更改为采用 const-ref 即可。这是因为必须从 char 数组创建一个临时字符串，并且您只能对临时对象进行 const 引用以防止混淆（如果您修改临时字符串，更改将被丢弃，所以语言阻止你这样做）。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T12:20:47.913

在**C++98/03**中，如果您有一个复制*成本不*高的类（例如，an`int`或 a`double`复制成本低，则 a`std::string`不是，因为它的复制可能涉及分配新的堆内存，将字符从源复制到目标等），那么规则是通过*`const`引用* **`const std::string&`**传递：

```
class T
{
public:
    T(const string& s); // <--- const string&
private:
    string m_s;
}; 
```

然后在构造函数中执行：

```
T::T(const string& s)
   : m_s(s)
{} 
```

然而，在**C++11**中，*移动语义*可用，新规则似乎是：如果您需要一个*副本*（并且对象移动起来很便宜，通常应该如此），*按值*传递并从值*移动*：

```
T::T(string s)             // pass by value
   : m_s( std::move(s) )   // and move from the value
{} 
```

（最好的办法是提供几个重载，传递`const &`和传递值，但可能这并不一定适用于所有应用程序，但只有在您需要压缩性能时才如此。）

注意，当不需要拷贝，只需要*观察*参数时，通常的C++98/03 pass by `const &`rule仍然有效。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T12:18:00.997

您定义的构造函数采用`std::string`引用：

```
T::T(std::string& s)
{
    this->s = s;
} 
```

因此，最直接的做法是创建一个`std::string`对象，该对象将传递给此构造函数：

```
std::string s("Test Object");
T t(s); 
```

但是由于您的构造函数不会更改`std::string`您传递给它的值（它只是用于设置 的`T`数据成员的值），因此您应该传递`const`reference: `T::T(const string& s)`。此外，与其让数据成员`s`被构造并稍后为其分配另一个字符串，不如直接在*初始化列表中*构造该成员：

```
T::T(const std::string& str) : s(str) { } 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T11:58:53.070

引用需要使用构造函数的初始化列表进行初始化。将您的构造函数更改为：

```
T::T(string& s) : s(s)
{
} 
```

另外定义您的成员`s`以便`std::string& s`能够参考。

也许更改 s 的名称以避免歧义。

请参阅SO 上的此条目[。](https://stackoverflow.com/questions/6576109/initialising-reference-in-constructor-c)

# visual-studio-2010 - 使用 *.vsmdi 通过命令行执行 mstest.exe

> ID：15360556
> 
> 赞同：0
> 
> 时间：2013-03-12T11:57:15.587
> 
> 标签：visual-studio-2010, c#-4.0, mstest

我有一个 C# 项目的视觉工作室解决方案。目前，我的解决方案中没有测试项目。所以我没有文件 *.vsmdi。

我想通过这样的命令行测试我的项目。

> MSTest.exe /testmetadata:*.vsmdi /resultsfile:Logfile.log

1.  是否可以在不添加项目的情况下创建 .vsmdi？如果可能的话，怎么做？

2.  要在命令行中执行，*.vsmdi 文件必须存在于解决方案中吗？

3.  如果我必须使用 IDE 进行测试，我应该在测试项目中有 *.vsmdi 文件吗？

4.  *.vsmdi 文件的唯一用途是列出测试用例？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-18T21:54:44.037

1) 从技术上讲，无需将测试项目添加到解决方案即可创建 .vsmdi 文件。由于 VSMDI 文件的内容是 XML，因此您可以手动编写它们或使用基于程序集中测试的工具生成它们。但是，当解决方案中不包含测试项目时，VSMDI 文件的用处不大，因为 VSMDI 文件的功能是管理您的测试。但是您仍然可以使用它们（另请参阅问题 2 的答案）。

如果您想手动编写 vsmdi 文件，您需要使用 SHA1 对 FQN 进行哈希处理，并创建哈希前 128 位的 Guid，如下所示（来自 Dominic Hopton 的代码）。有关更多信息，请参阅他的博客文章：[TRX（和 VSMDI 文件）的有用内部结构](http://blogs.msdn.com/b/dhopton/archive/2008/06/12/helpful-internals-of-trx-and-vsmdi-files.aspx)。

```
private static HashAlgorithm s_provider = new SHA1CryptoServiceProvider(); 

internal static HashAlgorithm Provider
{
    get { return s_provider; }
} 

/// Calculates a hash of the string and copies the first 128 bits of the hash
/// to a new Guid.
/// 

internal static Guid GuidFromString(string data)
{
    byte[] hash = Provider.ComputeHash(
        System.Text.Encoding.Unicode.GetBytes(data)); 

    byte[] toGuid = new byte[16];
    Array.Copy(hash, toGuid, 16); 

    return new Guid(toGuid);
} 
```

2) 不，只要 TestLink 元素的存储属性指向包含测试的正确程序集（相对于您的 vsmdi 文件），vsmdi 文件不需要位于您的解决方案文件夹（或您的解决方案）中。例如：

```
<TestLink id="0c257cc9-ffed-cd5e-bda1-56df14ad68c2" name="AddOneAndTwo_Test"
 storage="TestProject\bin\debug\testproject.dll" /> 
```

3) Vsmdi 文件存在于解决方案级别而不是项目级别。如果您有多个测试项目，您可以使用一个 vsmdi 文件来管理所有测试。请注意，如果您在解决方案中加载了项目，则在从 Visual Studio 运行测试时会忽略存储属性

4) Vsmdi 文件用于管理解决方案中的测试，您可以在 VSMDI 文件中创建多个层的层次结构。例如，您的解决方案中有多个要测试的程序集。在根测试列表（称为：测试列表）下，您可以为每个项目创建一个测试列表。然后，您可以将其中一个项目的测试列表分成两个或多个单独的测试列表（例如，一个用于测试业务逻辑，一个用于测试错误处理）。当您只想测试项目 A 中的业务逻辑测试时，您可以选择相应的测试列表并运行其中的测试。

关于 vsmdi 文件的额外说明：

A) 自 Visual Studio 2012 以来，Microsoft 决定弃用 VSMDI 文件（以及测试列表）。测试列表被测试类别（已经存在于 Visual Studio 2010 中）和播放列表所取代。测试类别是您可以在单个测试方法上设置的属性，并且可以在构建中使用。播放列表是在 Visual Studio 2012 Update 2 中引入的，目前在 MSBuild 中不受支持。

有关测试类别的更多信息，请参阅：http: [//msdn.microsoft.com/en-us/library/dd286595.aspx](http://msdn.microsoft.com/en-us/library/dd286595.aspx)

# asp.net-mvc - MVC - 视图中的多个模型

> ID：15360557
> 
> 赞同：4
> 
> 时间：2013-03-12T11:57:18.440
> 
> 标签：asp.net-mvc, entity-framework

我在实体框架中使用 MVC（第一次），首先是数据库

我想要做的是在单个视图中显示来自数据库的数据。我首先创建了数据库，然后基于包含所有表的数据库创建了一个 ADO.NET 实体数据模型。然后，我创建了一个索引视图，该视图使用我的实体数据模型作为模型进行强类型化。

在我的索引中，我在顶部

```
@model IEnumerable<Forum6.Models.Forum> 
```

这使我可以从我的数据库中的“论坛”表中获取行。如果我尝试添加一个额外的模型，我会在运行时收到以下错误消息：

> ```
> Line 1: @model IEnumerable<Forum6.Models.Forum>
> Line 2: @model2 IEnumerable<Forum6.Models.Post> 
> ```
> 
> 解析器错误消息：文件中只允许使用一个“模型”语句。

搜索答案后，我发现：[ASP MVC 3 中](https://stackoverflow.com/questions/5550627/two-models-in-one-view-in-asp-mvc-3) 的一个视图中有两个模型 答案是创建一个包含所有模型（表）的 ViewModel（ParentModel）。这是我创建的 ViewModel：

```
public class ViewModel
{
    public IEnumerable<Forum6.Models.Forum>         Forum       { get; set; }
    public IEnumerable<Forum6.Models.Post>          Post        { get; set; }
    public IEnumerable<Forum6.Models.Topics>        Topics      { get; set; }
    public IEnumerable<Forum6.Models.Users>         Users       { get; set; }
    public IEnumerable<Forum6.Models.PrivMsg>       PrivMsg     { get; set; }
    public IEnumerable<Forum6.Models.Permission>    Permission  { get; set; }
} 
```

我将控制器编辑为如下所示：

```
 public class HomeController : Controller
{
    // ForumDBEntities old_db = new ForumDBEntities();

    ViewModel db = new ViewModel();

    public ActionResult Index()
    {
        return View(db);
    }
} 
```

然后将旧的 Index 视图替换为使用 ViewModel 作为模型的新的强类型视图。其中包含：

```
@model IEnumerable<Forum6.Models.ViewModel> 
```

尝试运行它会给我这个错误：

> *传入字典的模型项的类型为“Forum6.Models.ViewModel”，但此字典需要类型为“System.Collections.Generic.IEnumerable`1[Forum6.Models.ViewModel] 的模型项*

如何使“ViewModel”可枚举？还是我的错误在别处？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T13:44:32.740

当您将IEnumerables 包装在单个 ViewModel 中时，您需要更改`@model IEnumerable<Forum6.Models.ViewModel>`为。`@model Forum6.Models.ViewModel`

一个好的经验法则是在 ViewModel 和 View 之间建立 1:1 的关系。 ![在此处输入图像描述](../Images/f70158e36a85e5fbfeb0b159282b51dd.png)

这对您来说可能是一本好书：http: [//lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/](http://lostechies.com/jimmybogard/2009/06/30/how-we-do-mvc-view-models/)（如果您不想这样做，请忽略自动映射器部分走那条路）

您还需要在 ViewModel 中输入实际数据，因为

```
ViewModel db = new ViewModel();

public ActionResult Index()
{
    return View(db);
} 
```

只会给你的视图一个空的 ViewModel。一种方法是。

```
public ActionResult Index()
{
    var model = new ViewModel
                    {
                        Forum = db.GetForum(),
                        Post = db.GetPost(),
                        Topic = you get the idea
                    };

    return View(model);
} 
```

最后一件事通常在命名属性或变量时，当它包含一个列表时，你应该使用复数动词。所以你的 ViewModel 会是。

```
public class ViewModel
{
    public IEnumerable<Forum6.Models.Forum>         Forums      { get; set; }
    public IEnumerable<Forum6.Models.Post>          Posts       { get; set; }
    public IEnumerable<Forum6.Models.Topics>        Topics      { get; set; }
    public IEnumerable<Forum6.Models.Users>         Users       { get; set; }
    public IEnumerable<Forum6.Models.PrivMsg>       PrivMsgs    { get; set; }
    public IEnumerable<Forum6.Models.Permission>    Permissions { get; set; }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:07:25.943

当您传递一个类的单个实例而不是它们的集合时更改`@model IEnumerable<Forum6.Models.ViewModel>`为。`@model Forum6.Models.ViewModel``ViewModel`

您的所有集合都在视图模型的单个实例中传递。

# ajax - 在primefaces中没有用ajax更新数据表

> ID：15360559
> 
> 赞同：0
> 
> 时间：2013-03-12T11:57:28.073
> 
> 标签：ajax, jsf-2, primefaces, datatable

在下面的页面中，即使我将数据表的 id 放在更新属性中并且我没有任何错误，对话框也不会更新数据表：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:p="http://primefaces.org/ui" xmlns:ui="http://java.sun.com/jsf/facelets">
<h:body>
    <ui:composition template="/template/layout.xhtml">
        <ui:define name="contenu">
            <p:growl id="messages" showDetail="true" />

            <h:form>
                <p:commandButton value="Ajouter Type" id="ajax" onclick="dlg.show()" />

                <p:dialog id="dialog" header="Nouveau Type" widgetVar="dlg">
                    <h:panelGrid columns="2" cellpadding="5">
                        <h:outputLabel for="libelle" value="Libelle :" />
                        <p:inputText value="#{typeMB.newtype.libelle}" id="libelle" required="true" label="libelle" />

                        <h:outputLabel for="commission" value="commission :" />
                        <h:inputText value="#{typeMB.newtype.commission}" id="commission" required="true" label="commission" />

                        <f:facet name="footer">
                            <p:commandButton id="ajouterBoutton" value="Ajouter" update="growl,:form:ourdatatable" actionListener="#{typeMB.ajouter}"
                                oncomplete="handleLoginRequest(xhr, status, args)" />
                        </f:facet>

                        <p:growl style="z-index=100" id="growl" showDetail="true" life="3000" />
                    </h:panelGrid>
                </p:dialog>

                <script type="text/javascript">  
                    function handleLoginRequest(xhr, status, args) {  
                        if(args.validationFailed || !args.loggedIn) {  
                            jQuery('#dialog').effect("shake", { times:3 }, 100);  
                        } else {  
                            dlg.hide();   
                        }  
                    }  
                </script>
            </h:form>

            <h:form id="form">
                <p:dataTable var="car" id="ourdatatable" value="#{typeMB.list_types}" editable="true">
                    <p:ajax event="rowEdit" listener="#{typeMB.onEdit}" update=":messages" />
                    <p:ajax event="rowEditCancel" listener="#{typeMB.onCancel}" update=":messages" />

                    <p:column headerText="Numero" style="width:30%">
                        <h:outputText value="#{car.idtype}" />
                    </p:column>

                    <p:column headerText="Libellé" style="width:20%">
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{car.libelle}" />
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{car.libelle}" style="width:100%" label="Libellé" />
                            </f:facet>
                        </p:cellEditor>
                    </p:column>

                    <p:column headerText="Commission" style="width:24%">
                        <p:cellEditor>
                            <f:facet name="output">
                                <h:outputText value="#{car.commission}" />
                            </f:facet>
                            <f:facet name="input">
                                <p:inputText value="#{car.commission}" style="width:100%" label="Commission" />
                            </f:facet>
                        </p:cellEditor>
                    </p:column>

                    <p:column style="width:6%">
                        <p:rowEditor />
                    </p:column>

                    <p:column>
                        <p:commandLink value="Supprimer" process="@this" update=":confirmDialog" oncomplete="confirmation.show()">
                            <f:setPropertyActionListener value="#{car}" target="#{typeMB.selectedType}" />
                        </p:commandLink>
                    </p:column>
                </p:dataTable>
            </h:form>

            <p:confirmDialog id="confirmDialog" message="Etes vous sur de vouloir supprimer ce Type #{typeMB.selectedType.libelle}"
                header="confirmation de suppression" severity="alert" widgetVar="confirmation">
                <h:form>
                    <p:commandButton id="confirm" value="oui" update=":form:ourdatatable" oncomplete="confirmation.hide()" actionListener="#{typeMB.supprimer}" />
                    <p:commandButton id="decline" value="non" onclick="confirmation.hide()" type="button" />
                </h:form>
            </p:confirmDialog>
        </ui:define>
    </ui:composition>
</h:body>
</html> 
```

只有当我刷新我测试的页面时，数据表才会更新，整个页面只有一个 h:form，但这会导致我在添加和更新功能时出现问题

## 编辑：

这是我的布局（我认为这不是问题的 src）：

```
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:h="http://java.sun.com/jsf/html" xmlns:f="http://java.sun.com/jsf/core"
    xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:p="http://primefaces.org/ui">

<f:view contentType="text/html">
    <h:head>
        <meta content='text/html; charset=UTF-8' http-equiv="Content-Type" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta name="description" content="" />
        <meta name="author" content="" />
        <title>Intégration de la Bootstrap et Primefaces</title>

        <h:outputStylesheet library="css" name="css/bootstrap.css" />
        <h:outputStylesheet library="css" name="bootstrap.css" />

        <h:outputStylesheet library="css" name="css/bootstrap-responsive.css" />

        <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
        <!--[if lt IE 9]>
                  <h:outputScript library="js" name="js/html5shiv.js" />
                <![endif]-->

        <link rel="shortcut icon" href="ico/favicon.png" />
    </h:head>

    <h:body>

        <ui:include src="menu_haut.xhtml" />

        <div class="container-fluid">
            <div class="row-fluid">

                <ui:include src="menu_gauche.xhtml" />

                <div class="span9">
                    <div class="bs-docs-example">
                        <ui:insert name="contenu">
                                contenu par défaut!
                            </ui:insert>
                    </div>

                </div>
                <!--/span-->
            </div>
            <!--/row-->

            <ui:include src="footer.xhtml" />

        </div>

    </h:body>
</f:view>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-20T16:41:37.953

而不是**update=":form:ourdatatable"**使用**update=":#{p:component('ourdatatable')}"** 这个帮助组件搜索 dom 以解析参数中使用的标识符的任何命名空间限定。

# random - 无重复的随机数

> ID：15360563
> 
> 赞同：1
> 
> 时间：2013-03-12T11:57:45.950
> 
> 标签：random, xna, numbers, repeat

我想做的是让我正在创建的游戏每 5 秒随机更改一次角色。我通过计时器得到了这个工作，唯一的问题是我不希望他们重复，我目前正在处理虚拟代码，所以它只是改变屏幕颜色，但我怎样才能让它不重复它刚刚叫的号码？

```
if (timer <= 0)
{
    num = rand.Next(2);
    timer = 5.0f;   
} 
```

那是当前代码，然后在抽奖中我刚刚完成了“如果 num 等于某个数字，则更改背景颜色”。

我尝试添加一个 prev_num 检查器，但我无法让它正常工作（在这里）

```
if (timer <= 0)
{
    prev_number = num;
    num = rand.Next(2);
    if (prev_number == num)
    {
        num = rand.Next(2);
    }
    else
    {
        timer = 5.0f;
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:13:01.560

考虑一下，如果您从 1-5 中选择（例如）一个随机数，则有五种可能的结果，因此您将使用`rand.Next(5)`选择从零开始的“序数”或结果索引，然后将其转换为范围您实际上想要（在这种情况下，通过添加一个）。

如果您想要一个 0-4 的随机数，不包括您刚刚选择的数字，那么只有四个可能的结果，而不是五个 - 如果之前的数字是 3，那么可能的结果是 0、1、2 或 4。您然后可以通过选择这四个结果之一（`rand.Next(4)`）并将该序数映射到您想要的范围来简化您的算法。一个简单的映射是说如果新的随机数低于前一个数字，则按原样返回，否则（如果相等或更大）加一。

```
int new_num = rand.Next(4);
if(new_num >= prev_num)
{
    new_num++;
} 
```

您的新号码现在保证与以前的号码在同一范围内，但不等于它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:04:32.987

也许只是将其放入循环而不是单个检查？
另外，我认为因为您的计时器在内部，`else`所以它并不总是正确更新。

```
if (timer <= 0)
{
    tempNum = rand.Next(2);

    do
    {
        tempNum = rand.Next(2);
    }
    while (tempNum == num)

    num = tempNum;
    timer = 5.0f;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T13:16:12.237

创建一个序列号数组，然后在您的应用程序开始时将它们洗牌（就像一副纸牌）。

```
int[] numbers = new int[100];
for(int i = 0; i < numbers.Length; i++)
    numbers[i] = i;
Shuffle(numbers); 
```

使用函数来打乱列表：

```
public static void Shuffle<T>(IList<T> list)  
{  
    Random rng = new Random();  
    int n = list.Count;  
    while (n > 1) {  
        n--;  
        int k = rng.Next(n + 1);  
        T value = list[k];  
        list[k] = list[n];  
        list[n] = value;  
    }  
} 
```

然后，您可以从列表中按顺序访问它们。当列表被打乱时，它们将是随机的，但您不会有任何重复，因为每个数字在列表中只存在一次。

```
if (timer <= 0)
{
    num = numbers[index];
    index++;
    timer = 5.0f;   
} 
```

# assembly - 装配迭代

> ID：15360565
> 
> 赞同：0
> 
> 时间：2013-03-12T11:58:02.340
> 
> 标签：assembly, x86

我写了下面的代码，但它得到的答案是错误的。它应该做 x^2 但似乎它比需要的迭代次数多一次：

1 的结果是 2 // 1+1=2 2
的结果是 8 // 2+2+2=8

我相信它将 CX 与 ZeroFlag 进行比较，而不是第一个语句中的 1。是对的吗？

```
pos:
     MOV CX,Number   
    again:  Add Number,AX
            Dec cx
            cmp cx,1
            jg again ; statement no. 1
    JMP DONE 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:14:41.417

只要您确定 AX 已初始化为零，代码就应该可以工作。尝试：

```
MOV Number, AX 
```

在循环开始之前，还要在循环开始之前检查你的数字是否大于 1，这样它就不会在 < 1 上产生错误的结果。

# android - Android 启动服务不起作用

> ID：15360570
> 
> 赞同：0
> 
> 时间：2013-03-12T11:58:11.253
> 
> 标签：android

我的手机是 HTC G18，我正在使用引导接收器。Android 清单文件是：

```
<receiver android:name=".BootReceiver">
        <intent-filter>
            <action android:name="android.intent.action.BOOT_COMPLETED" />
            <category android:name="android.intent.category.HOME" />
        </intent-filter>
    </receiver> 
```

Java代码是

```
public void onReceive(Context context, Intent intent) {
    context.startService(new Intent(context, UpdaterService.class).addFlags(Intent.FLAG_INCLUDE_STOPPED_PACKAGES));
    Log.d("BootReceiver", "onReceived");
    Toast.makeText(context, "Test", Toast.LENGTH_LONG).show();
} 
```

当我使用这个命令时，启动接收器将在我的手机上工作。

```
adb shell am broadcast -a android.intent.action.BOOT_COMPLETED -c android.intent.category.HOME 
```

但是当我尝试重新启动测试时，它会失败。我希望这个启动接收器可以与手机一起启动，我该如何处理？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:03:14.547

确保您在清单中有权限

```
<uses-permission android:name="android.permission.RECEIVE_BOOT_COMPLETED"></uses-permission> 
```

此外，您可能想尝试添加完整的包而不是速记 .BootReceiver。如：

```
com.yourpackage.receivers.BootReceiver 
```

编辑啊，正如评论中提到的那样。您必须至少启动一次应用程序的主要活动，否则 Android 将不会调用您的启动接收器。

# c# - 在 C# 中打印从右到左的语言

> ID：15360571
> 
> 赞同：0
> 
> 时间：2013-03-12T11:58:19.603
> 
> 标签：c#, right-to-left

在 C# 中有没有一种方法可以打印从右到左的语言，如阿拉伯语，这样输出是从右到左的，而不仅仅是右对齐。
这个类似 HTML 的片段可能有助于解释要求：

```
<div style="direction:rtl;">كمشنيش (شسي شسي)</div> <!-- correct -->
<div style="text-align:right;">كمشنيش (شسي شسي)</div> <!-- just right aligned --> 
```

我希望我的应用程序看起来像第一个 div。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:03:09.237

If you're using `WinForms`, set the form's [RightToLeft property](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.righttoleft%28v=vs.71%29.aspx) to `RightToLeft.Yes`. Any control on the form will automatically inherit that property by default. If you only want certain controls to have that property then you can set that individually for each control.

If you're using Silverlight 4, you can set the [FlowDirection property](http://msdn.microsoft.com/en-us/library/system.windows.frameworkelement.flowdirection%28v=vs.95%29.aspx).

```
<TextBox FlowDirection="RightToLeft" ... /> 
```

There's more information about Right to Left text in Silverlight [here](http://www.silverlightrecipes.com/2009/11/silverlight-4-native-arabic-support.html).

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:12:59.047

您可以从右到左打印多种方式和上下文。在 Web 应用程序中，您可以在[html 标记](http://www.w3schools.com/tags/att_global_dir.asp)中解决此问题。

在 WinForms 中，@keyboardP 建议将 RightToLeft 属性设置为 Yes。

在 WPF中可以使用[FlowDirection](http://blogs.msdn.com/b/vsarabic/archive/2007/06/11/developing-arabic-wpf-applications-part-1.aspx)，但是这应该在视图设计的早期阶段完成，因为它可能会在为从左到右读取而设计的视图中导致意外结果。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:02:40.860

It should be sufficient to add the `dir="rtl"` attribute to your `<html>` open tag.

Check out the following article: [Creating HTML Pages in Arabic, Hebrew and Other Right-to-left Scripts](http://www.w3.org/International/tutorials/bidi-xhtml/)

# c++ - 试图通过 main 进入成员函数......不太确定如何这样做

> ID：15360586
> 
> 赞同：0
> 
> 时间：2013-03-12T11:58:49.877
> 
> 标签：c++, list, function, member

这两个头文件是：

```
 #ifndef VIDEO_H
#define VIDEO_H

#include <string>
#include <iostream>
using namespace std;

class Video
{
public:
    Video(string title, string URL, string comment, float length, int rating);
    ~Video();
    void print();
    bool longer(Video *Other);
    bool higher(Video *Other);
    bool alphabet(Video *Other);
private:
    string m_title;
    string m_url;
    string m_comment;
    float m_length;
    int m_rating;
};

    #endif 
```

而第二个......

```
#ifndef VLIST_H
#define VLIST_H

#include <string>
#include <iostream>

using namespace std;

class Vlist
{
public:
    Vlist();
    ~Vlist();
    void insert(string title, string URL, string comment, float length, int rating);
    bool remove();

private:
    class Node
    {
    public:
        Node(class Video *Video, Node *next)
        {m_video = Video; m_next = next;}
        Video *m_video;
        Node *m_next;
    };
    Node* m_head;
};

#endif 
```

我正在尝试访问一个名为 insert 的成员函数，但我不太确定如何执行此操作....这是我迄今为止想出的。

```
 Array[i] = new Video(title, URL, comment, length, rating);
            Vlist *list = new Vlist;
            list->insert(title, URL, comment, length, rating); 
```

上面和下面还有更多代码，但这是我遇到问题的区域。它会在行上读取 (Vlist *list = new Vlist;) : undefined reference to 'Vlist::Vlist()'

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T18:27:02.937

你在main中#include“video.h”和#include“vlist.h”了吗？看来您已经创建了一个 Vlist 对象并正确访问了 objects 成员。主要是如何定义的？您认为您无法使用类的对象访问公共成员的原因是什么？

一个建议是避免在头文件中使用声明并以 std:: 为前缀

# sql-server - 如何使用 sysdate 在 oracle 中获得未来三个月

> ID：15360589
> 
> 赞同：2
> 
> 时间：2013-03-12T11:58:53.767
> 
> 标签：sql-server, oracle, date-arithmetic

我有一个返回当前和未来 3 个月的 sql server 查询

```
SELECT CAST(DATENAME(month, getdate() )               as VARCHAR(3))  
     , CAST(DATENAME(month, dateadd(mm,1,getdate()) ) as VARCHAR(3))
     , CAST(DATENAME(month, dateadd(mm,2,getdate()) ) as VARCHAR(3))
     , CAST(DATENAME(month, dateadd(mm,3,getdate()) ) as VARCHAR(3)) 
```

我如何将其修改为等效的 oracle 查询

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:04:18.810

该函数[`TO_CHAR()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions200.htm#SQLRF06129)可用于将日期转换为字符。要以 3 字符格式获取当前月份，您可以在使用 TO_CHAR() 时使用[格式模型。](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements004.htm#SQLRF00212) `MON`返回的数据遵循您对格式模型的大小写。

例如：

```
SQL> select to_char(sysdate, 'mon')
  2       , to_char(sysdate, 'MON')
  3    from dual;

TO_CHAR(SYSD TO_CHAR(SYSD
------------ ------------
mar          MAR 
```

该函数[`ADD_MONTHHS()`](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions011.htm#SQLRF00603)可用于将月份添加到日期：

```
SQL> select to_char(add_months(sysdate, 1), 'MON')
  2    from dual;

TO_CHAR(ADD_
------------
APR 
```

您将能够扩展它以转换您的整个查询。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:06:41.140

请试试：

```
select TO_CHAR(SYSDATE, 'Month'), 
  TO_CHAR(ADD_MONTHS(SYSDATE, 1), 'Month'), 
  TO_CHAR(ADD_MONTHS(SYSDATE, 2), 'Month'), 
  TO_CHAR(ADD_MONTHS(SYSDATE, 3), 'Month')  
FROM DUAL; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:07:50.523

试试这个 ：

```
select to_char(CURRENT_DATE,'Month'),
to_char(ADD_MONTHS( CURRENT_DATE, 1 ), 'Month'),
to_char(ADD_MONTHS( CURRENT_DATE, 2 ), 'Month'),
to_char(ADD_MONTHS( CURRENT_DATE, 3 ), 'Month')

from dual 
```

# android - 如何在 android SeekBar 上添加数字刻度

> ID：15360591
> 
> 赞同：7
> 
> 时间：2013-03-12T11:58:54.587
> 
> 标签：android, android-layout, seekbar

我正在使用开箱即用的 android SeekBar 组件。下面我想添加从 1 到 5 的数字，显示 SeekBar 的进度。我在搜索栏上正确分配数字时遇到问题。

就像下图一样

![搜索栏](../Images/21cd399884175ac7e44d239d136940f1.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:28:28.360

要在搜索栏拇指上绘制文本，请使用此功能

```
 public BitmapDrawable writeOnDrawable(int drawableId, String text){

        Bitmap bm = BitmapFactory.decodeResource(getResources(), drawableId).copy(Bitmap.Config.ARGB_8888, true);
        Paint paint = new Paint(); 
        paint.setStyle(Style.FILL);  
        paint.setColor(Color.BLACK); 
        paint.setTextSize(20); 
        Canvas canvas = new Canvas(bm);
        canvas.drawText(text, 0, bm.getHeight()/2, paint);

        return new BitmapDrawable(bm);
    } 
```

该函数将调用为

seekbar.setThumb(writeOnDrawable(R.drawable.thumbimage, mytext)); 将 thumbimage.png 文件放在 res/drawable/ 中，'mytext' 是您要在该可绘制对象之上写入的字符串

完整对话见以下链接

[如何使用布局或 TextView 设置搜索栏拇指？](https://stackoverflow.com/questions/12369519/how-to-set-the-seek-bar-thumb-with-a-layout-or-with-a-textview)

希望这对您有所帮助。

# zend-form - zend2 电子邮件验证

> ID：15360596
> 
> 赞同：0
> 
> 时间：2013-03-12T11:59:08.223
> 
> 标签：zend-form, zend-framework2

我有验证器的 FROM。我使用“pl_PL”作为语言环境。在这种形式的验证器中，例如“StringLength”、“EmailAddress”。

当我使用“Int”时，我有“致命错误：在第 63 行的 C:\ccc\bbbbbb\library\Zend\I18n\Validator\Int.php 中找不到类 'Locale'”信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T20:42:43.083

您需要安装 Intl 扩展，请阅读： http: [//php.net/manual/en/book.intl.php](http://php.net/manual/en/book.intl.php)

# ipad - 有没有办法绕过 iPad 对我的网站所做的任何事情？

> ID：15360597
> 
> 赞同：0
> 
> 时间：2013-03-12T11:59:13.423
> 
> 标签：ipad, navigation, ios-simulator

我最近开始从事网页设计，但我绝不是专家。我正在为自己开发这个网站，我似乎遇到了一些问题。这个网站在所有浏览器上看起来都差不多（它仍在开发中），我一直在研究平板电脑和手机特定的 css。在对 iPad 进行测试时（我使用 xCode iOS Sim），我注意到我的菜单栏无法正常工作，除非在看似随机的时刻（通常是在我放大时）。我让一位家庭成员在他们的物理 iPad 上对此进行了测试，但他们根本无法使用导航栏。此[jsFiddle](http://jsfiddle.net/Cd3R8/)链接包含运行导航栏的 html 和 css。我将在接下来的几个小时内进行此工作，如果我想通了，我会更新或删除这篇文章，但如果我不这样做，我们将不胜感激。

这只是html，css太长了。

```
<h2><a href="/">Auburn PC Repair<br>& Building</a></h2>
<div id="header-image">
    <h1></h1>
</div>

<nav id="buttonbar">
    <ul>
        <li id="services-button"><div class="buttonHighlight"></div>
            <a href="#" class="button"><h3>Our Services</h3><p>how can we help you</p></a>
            <ul>
                <li><a href="/services/pcrepair">PC Repair</a></li>
                <li><a href="/services/mobiledev">Mobile Device</a></li>
                <li><a href="/services/networking">Networking</a></li>
                <li><a href="/services/pcbuilding">PC Building</a></li>
            </ul>
        </li>
        <li id="contact-button"><div class="buttonHighlight"></div>
            <a href="/contact" class="button"><h3>Contact Us</h3><p>phone and email</p></a>
        </li>
        <li id="about-button"><div class="buttonHighlight"></div>
            <a href="/about" class="button"><h3>About Us</h3><p>all about us</p></a>
        </li>
    </ul>
</nav> 
```

编辑：导航栏是围绕 www.panic.com/coda navbar 设计的。它在 iPad 上运行良好。编辑：当前设置适用于所有非 iOS 设备。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:29:48.813

您的导航依赖于悬停事件来触发菜单内容的出现。

鼠标移动到元素上会触发悬停事件。

触摸设备，例如所有 iOS 设备，以及大多数（如果不是全部）现代智能手机和平板电脑，都没有鼠标，因此无法触发悬停事件。

您无法仅使用 CSS 在现代触控设备上实现您想要的。

可以使用 JavaScript 触发和响应各种与触摸相关的事件。您将需要不选择基于 CSS 的菜单触发方法，而是使用基于 JavaScript 的方法，其中处理悬停和触摸事件以生成所需的菜单系统。

# java - LoadLoad 屏障的真正作用是什么？

> ID：15360598
> 
> 赞同：11
> 
> 时间：2013-03-12T11:59:16.270
> 
> 标签：java, concurrency, volatile

在 Java 中，当我们有两个线程共享以下变量时：

```
int a;
volatile int b; 
```

如果线程 1 这样做：

```
a = 5;
b = 6; 
```

然后在这两条指令之间插入一个 StoreStore 屏障，并将“a”刷新回主存储器。

现在如果线程 2 这样做：

```
if(b == 6)
 a++; 
```

之间插入了一个 LoadLoad 屏障，我们保证如果“b”的新值是可见的，那么“a”的新值也是可见的。但实际上这是如何实现的呢？LoadLoad 是否会使 CPU 缓存/寄存器无效？或者只是指示 CPU 从 CPU 再次从 volatile 中获取从 volatile 读取的变量的值？

我找到了有关 LoadLoad 屏障的信息（[http://gee.cs.oswego.edu/dl/jmm/cookbook.html](http://gee.cs.oswego.edu/dl/jmm/cookbook.html)）：

> LoadLoad Barriers 顺序：Load1；加载加载；Load2 确保在 Load2 访问数据之前加载 Load1 的数据，并加载所有后续加载指令。通常，在执行推测加载和/或等待加载指令可以绕过等待存储的无序处理的处理器上需要显式 LoadLoad 屏障。在保证始终保持加载顺序的处理器上，障碍相当于无操作。

但它并没有真正解释这是如何实现的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T12:46:39.627

我将举一个例子来说明这是如何实现的。[您可以在此处](http://brooker.co.za/blog/2012/09/10/volatile.html)阅读有关详细信息的更多信息。对于您指出的 x86 处理器，LoadLoad 最终成为无操作。在我链接的文章中，马克指出

> Doug 列出了 StoreStore、LoadLoad 和 LoadStore

所以本质上，唯一需要的障碍是 x86 架构的 StoreLoad。那么这是如何在低水平上实现的呢？

这是博客的摘录：

**这是它为易失性和非易失性读取生成的代码：**

```
nop                       ;*synchronization entry
mov    0x10(%rsi),%rax    ;*getfield x 
```

**对于易失性写入：**

```
xchg   %ax,%ax
movq   $0xab,0x10(%rbx)
lock addl $0x0,(%rsp)     ;*putfield x 
```

该`lock`指令是 Doug 的食谱中列出的 StoreLoad。但是锁定指令还会将所有读取与[列出的其他进程同步](http://www.intel.com/content/www/us/en/processors/architectures-software-developer-manuals.html)

> 锁定指令可用于同步一个处理器写入和另一个处理器读取的数据。

这减少了必须为易失性负载发出 LoadLoad LoadStore 屏障的开销。

说了这么多，我将重申 assylias 指出的内容。它发生的方式对开发人员来说不应该是重要的（如果您对处理器/编译器实现者感兴趣，那就是另一回事了）。`volatile`关键字是一种接口说

1.  您将获得由另一个线程编写的最新阅读
2.  您不会被 JIT 编译器优化所困扰。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:40:44.413

> 如果该 LoadLoad 评估为无操作，则线程 2 可以继续使用缓存值。

食谱中的“可以订购”表涵盖了这一点。

编程顺序是

```
read b
read a
write a 
```

通过“缓存a”，您的意思是代码被重新排序

```
read a
...
read b 
```

禁止重新排序。

# php - 会话开始和阅读pdf问题

> ID：15360599
> 
> 赞同：0
> 
> 时间：2013-03-12T11:59:16.397
> 
> 标签：php

我正在尝试在 php 的帮助下打开一个 pdf，但发生了一些非常奇怪的事情。使用下面的代码，pdf 不会在 Internet Explorer 8 中打开：

```
session_start();
header('Content-type: application/pdf');
@readfile("*****"); 
```

现在，如果您删除`session_start`，这将在浏览器中打开 PDF。而且我真的需要启动会话获取路径步骤`@readfile`。有人可以帮助我吗？它已经进行了多次测试和研究，但没有任何结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:33:38.750

解决这个问题的方法是放在`session_start ()`它之后：

```
header("Cache-Control: must-revalidate, post-check=0, pre-check=0");
header("Pragma: public"); 
```

感谢所有帮助

# java - 使用ajax下载生成的excel文件

> ID：15360604
> 
> 赞同：2
> 
> 时间：2013-03-12T11:59:27.960
> 
> 标签：java, ajax, excel, struts2, download

我正在使用 struts2 框架开发应用程序。当用户提供日期范围时，我需要准备报告 excel 文件并在下载弹出窗口中显示。我能够创建 Excel 的 io 流，但我不知道如何使用 ajax 打开该弹出窗口。

我正在动态生成文件并返回流。因此无法提供文件路径。我希望 ajax 调用显示一些消息，例如`"Please wait.."`. 因为文件生成需要更多时间，而且看起来链接不起作用..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:02:15.750

There's nothing Ajax about downloading a file.

Your request can be an ajax request, but simply give the generated file path and the browser will do the downloading.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T15:30:41.387

无需执行任何`AJAX`调用。

您只需将`byte[]`Struts2[结果`Stream`返回](http://struts.apache.org/release/2.3.x/docs/stream-result.html)，并配置为`ContentDisposition: attachment;`（而不是`ContentDisposition: inline`，它将尝试在浏览器中打开它，而不是询问下载或使用桌面应用程序打开）。

要通知用户*正在发生的事情*、请求已发送且系统未冻结，您需要一个`Loading OVERLAY`.

覆盖是放置在页面上的元素，通常具有部分透明的背景、显示“正在加载...”的动画图像和*模态*行为（在页面更改之前它不会关闭，它会阻止相同请求的双重发布，例如双击等...）。

当然如果你打开一个附件，页面是不会改变的，那么你需要自己截取下载结束并关闭覆盖，或者给用户一个按钮来关闭它。

要拦截它，您可以尝试[`Struts2 Execute and Wait Interceptor`](http://www.mkyong.com/struts2/struts-2-execandwait-interceptor-example/).

如果要创建自定义叠加层，可以使用[`ajaxload.info Generator`](http://www.ajaxload.info/).

如果您不想重新发明轮子，则可以查看现有的叠加层，例如[`jQuery TOOLS`](http://jquerytools.org/documentation/overlay/index.html).

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:04:11.543

在 ajax 的成功方法上不返回流，而是将文件保存在服务器上并打开一个弹出窗口，其中包含返回正确文件的操作的地址。但是某些浏览器可能会阻止弹出窗口，因此您需要为您的站点（本地主机或其他 URL）允许它

# php - 制作更友好的 URL（使用 htaccess）？

> ID：15360607
> 
> 赞同：-3
> 
> 时间：2013-03-12T11:59:41.247
> 
> 标签：php, .htaccess, mod-rewrite

我想重写我网站上某些页面的 URL，因此 page.mysite.com 会导致 mysite.com/profiles/page

我该怎么做？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:05:47.633

http:// ***page*** .mysite.com 形式的 URL 是子域。您不能单独使用 .htaccess 来配置它们。您需要设置通配符 DNS 以将所有子域指向您的服务器。您还需要在服务器的 apache 配置中设置某种通配符虚拟主机。

一旦你有这个工作，看看[http://httpd.apache.org/docs/trunk/rewrite/vhosts.html](http://httpd.apache.org/docs/trunk/rewrite/vhosts.html)来自 apache mod_rewrite 示例。

# html - Grid 960：如何更改宽度、填充和边距？

> ID：15360610
> 
> 赞同：0
> 
> 时间：2013-03-12T11:59:50.687
> 
> 标签：html, css, 960.gs

是否可以将 Grid 960 框架应用于任何现有布局而无需任何视觉更改？

“装订线”将每列之间的距离设置为固定值，如果我需要有 20px 的边距怎么办？

960 框架也将列的宽度设置为固定值。如果我需要两列 231px 和 131px 怎么办？

感谢您的任何提示！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:55:22.757

您可以使用自定义装订线和列宽生成网格 css 文件。关于您的第二种情况，我看到的唯一解决方案是整理出合适的列宽。

例如：

如果您需要宽度为**231px**的列，您可以生成网格文件 fith

**gutter =0**和列**宽 = 21px**，

所以你可以得到 231px 宽度的 div 应用类“ **grid_11** ”，但是通过这些设置是**不可能**得到 131px 宽度的 div，你可以设置的最接近的宽度是 126px，应用类“grid_6”。

# iphone - 盲文板的旁白通知

> ID：15360613
> 
> 赞同：1
> 
> 时间：2013-03-12T12:00:04.433
> 
> 标签：iphone, ios, voiceover

我有一个带有 VoiceOver 的 iPhone 应用程序。我还连接了盲文板与 iPhone 设备。对于 VoiceOver 通知，我使用：

```
 UIAccessibilityPostNotification(UIAccessibilityLayoutChangedNotification,  textFieldMain); 
```

但在这种情况下，盲文板没有收到任何通知。是否有可能通过代码通知盲文板？

# openerp - 如何在 6.1 的 openerp 中创建贷方通知单

> ID：15360614
> 
> 赞同：1
> 
> 时间：2013-03-12T12:00:05.920
> 
> 标签：openerp

谁能告诉我如何在 openerp v 6.1 中创建带有发票的贷方票据。我尝试从供应商创建贷方通知单-> 供应商退款，但是当我选择付款-> 付款订单并选择要支付的发票时，贷方通知单金额不会从发票中扣除。您能否让我知道 openerp v6.1 中如何处理信用票据。

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2014-11-18T12:59:45.040

我遇到了类似的问题。最后我找到了解决它的方法。我不使用付款/付款订单，而是使用菜单帐户下的供应商付款。我创建一个新的付款，减去已支付的金额以相反的方式进行日记账分录。例如，当我们向供应商支付 1000 美元时，日记帐分录为：借记应付 1000 美元，贷记现金或存款 1000 美元。而当我输入 -1000 美元时，日记帐分录为：借记现金或存款 1000 美元，贷记应付 1000 美元。之后，我使用手动核对功能从贷方通知单（SCNJ 日记帐）和银行日记帐中处理应付的 1000 美元，然后贷方通知单的状态变为已付款。通过这种方式，我从供应商那里得到了 1000 美元的回报，并且日记账分录平衡。我希望它对你有用。

# ssis - SSIS 使用快速加载从 SQL 表中丢失数据

> ID：15360615
> 
> 赞同：0
> 
> 时间：2013-03-12T12:00:11.410
> 
> 标签：ssis, sql-server-2012

我有一点问题。当我设置一个 SSIS 包并将其关闭时，它会显示进入 SQL 表的行数，但是当我查询该表时，在条件拆分之后的最后一个计数中缺少近 40000 行我在包裹里。

![SSIS 包](../Images/b0163f4d0c8627ba36f73fc5aa5fb4d0.png)

![在此处输入图像描述](../Images/02af35f9d59c2e57e0b8b07abcd74433.png)

是什么导致了这个问题？即使我把它放在普通桌子上或查看它仍然做同样的事情。但是在这里我必须使用**fastload**选项，因为它正在加载很多源文件。这只是在将其发送到生产之前进行的测试，我现在被卡住了。有没有办法可以解决这个问题并获取所有应该被泵入表中的数据。另请注意，在条件拆分中，它会删除第一张图片中看到的任何 NULL 值。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:23:47.403

检查目标组件中的错误输出（在连接管理器和映射下）。如果错误设置设置为忽略失败或重定向行，组件将成功，但只会插入成功的行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:11:23.020

数据源是什么？尝试检查您的数据并确保其中一行中没有存储任何终止符。

# .htaccess - htaccess 将所有文件重定向到 index.php 除了特定的子目录

> ID：15360616
> 
> 赞同：1
> 
> 时间：2013-03-12T12:00:13.963
> 
> 标签：.htaccess

我有一个站点，其中所有请求都应该转到 index.php，除了特定子目录中的那些应该转到 subdirectory/index.php。

我希望将目录路径转换为查询字符串，以便在子目录索引页面中使用。

我真的对 htaccess 文件知之甚少，我确信这个问题已经被回答了一百次，但我不知道要搜索什么才能得到答案。

所以 - 这就是我希望在这些条件下发生的事情......

```
RULE 1
www.example.com/anything_or_nothing <goes to> /index.php
www.example.com/anything/anything_else <goes to> /index.php
RULE 2
www.example.com/subdirectory/ <goes to> /subdirectory/index.php
RULE 3
www.example.com/subdirectory/some_other_directory/ <goes to> /subdirectory/index.php?a=some_other_directory 
```

这就是我目前所拥有的。它不起作用 - 至少，规则 1 有效，规则 2 有效（尽管我认为这只是因为物理 / 子目录存在并且 index.php 作为默认值。）**规则 3 无效。**

```
Options All -Indexes
RewriteEngine On
RewriteBase /
RewriteCond %{SCRIPT_FILENAME} !-d
RewriteCond %{REQUEST_FILENAME} !-f

RewriteCond %{REQUEST_URI} !^/?timeline/
#RULE 1
RewriteRule ^.*$ ./index.php
#RULE 2
RewriteRule ^/sub.*$ /sub/index.php
#RULE 3
RewriteRule ^/sub/([^/\.]+)/?$ /sub/index.php?a=$1 [L,NC] 
```

我一直无法让 .htaccess 文件在子目录中工作，所以我希望所有规则都在根 .htaccess 文件中。

我从其他网站拼凑了这个.htaccess，所以我为我的无知程度道歉，但我只是不知道该去哪里......

先感谢您。

附加信息>>>>>>>>

我尝试过的其他事情。

这个

```
RewriteRule ^/sub/([^/\.]+)/?$ /sub/index.php?a=$1 [L,NC]
RewriteRule ^/sub.*$ /sub/index.php
RewriteRule ^.*$ ./index.php 
```

使所有规则停止工作。

这个：

```
RewriteRule ^.*$ ./index.php
RewriteRule ^/sub/([^/\.]+)/?$ /sub/index.php?a=$1 [L,NC]
RewriteRule ^/sub.*$ /sub/index.php 
```

似乎表现得像原来的例子。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:11:48.100

正如您自己回答的那样，第二条规则是不必要的。

```
# Don't rewrite if file already exists to prevent rewriting images, scripts etc
RewriteCond %{REQUEST_FILENAME} -d
RewriteCond %{REQUEST_FILENAME} -f
RewriteRule .* - [L]

# Rewrite sub/anything to sub/index.php?a=anything
RewriteRule ^sub/([^/]+)$ sub/index.php?a=$1 [L,NC]

# Fallback all unknown requests to index.php
RewriteRule .* index.php [L,NC] 
```

警告说明：当您将不存在的文件重写为**index.php**时，此方法将完全隐藏所有自然 404 错误。

# windows-phone-8 - 在 Windows Phone 8 中创建的文件夹的位置

> ID：15360617
> 
> 赞同：0
> 
> 时间：2013-03-12T12:00:15.057
> 
> 标签：windows-phone-8

我在哪里可以找到我在 windows phone 8 中创建的文件夹和文本文件的位置。我们可以像在 Windows 8 中搜索应用程序数据一样在资源管理器中看到它吗？我没有使用`IsolatedStorage`，而是`Windows.Storage`。我想检查文件夹和文件是否按我的意愿创建。

这就是我写文件的方式

```
IStorageFolder dataFolder = await m_localfolder.CreateFolderAsync(App.ALL_PAGE_FOLDER, CreationCollisionOption.OpenIfExists);
        StorageFile PageConfig = null;

        try
        {
            PageConfig = await dataFolder.CreateFileAsync("PageConfig.txt", CreationCollisionOption.OpenIfExists);
        }
        catch (FileNotFoundException)
        {
            return false;
        } 
```

**编辑**

```
 try
        {
            if (PageConfig != null)
            {
                using (var stream = await PageConfig.OpenStreamForWriteAsync())
                {
                    DataWriter writer = new DataWriter(stream.AsOutputStream());
                    writer.WriteString(jsonString);
                }

            }

        }
        catch (Exception e)
        {
            string txt = e.Message;
            return false;
        } 
```

这就是我从文件夹中读取文件的方式

```
 try
        {
            var dataFolder = await m_localfolder.GetFolderAsync(App.ALL_PAGE_FOLDER);
            var retpng = await dataFolder.OpenStreamForReadAsync("PageConfig.txt");

            if (retpng != null)
            {
                try
                {
                    using (StreamReader streamReader = new StreamReader(retpng))
                    {
                        jsonString = streamReader.ReadToEnd();
                    }

                    return jsonString;
                }
                catch (Exception)
                {
                }
            }
        }
        catch (FileNotFoundException)
        {
        } 
```

还创建了其他文件夹。我在写的时候没有收到任何异常，但是当我读到字符串是空的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:52:11.480

`Windows.Storage.ApplicationData.LocalFolder`[（此处为 MSDN 链接）](http://msdn.microsoft.com/en-GB/library/windows/apps/windows.storage.applicationdata.localfolder.aspx) 是`Windows.Storage`命名空间中独立存储的另一个名称。您可以访问的唯一其他位置是您的应用程序的安装目录（并且是只读的）。

您可以使用[Windows Phone Power Tools](http://wptools.codeplex.com/) 来浏览应用程序的独立存储中的文件，或者使用 SDK 附带的命令行工具。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T07:31:24.967

在 Windows Phone Power 工具的帮助下，我发现文件中没有写入任何文本。所以我将字符串转换为字节，然后将其写入文件并且它可以工作！不知道为什么另一个不起作用..

```
using (var stream = await PageConfig.OpenStreamForWriteAsync())
{
   byte[] fileBytes = System.Text.Encoding.UTF8.GetBytes(jsonString);                       
   stream.Write(fileBytes, 0, fileBytes.Length);
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-08T06:07:34.023

Windows Phone SDK 8.0 附带的命令行工具是**独立存储资源管理器**( **ISETool.exe** )，它位于“Program Files (x86)\Microsoft SDKs\Windows Phone\v8.0\Tools\IsolatedStorageExplorerTool”文件夹中，用于默认安装 ISETool。 exe用于查看和管理本地文件夹的内容

# java - 在远程服务器上部署、启动和停止 Scala 应用程序

> ID：15360623
> 
> 赞同：13
> 
> 时间：2013-03-12T12:00:24.393
> 
> 标签：java, linux, scala, process, spray

首选方式是在远程 Linux 服务器上部署 Scala 应用程序。

这是在远程服务器上部署 Scala 应用程序的一种相当简单但有限的方法（非常适合快速测试不太敏感的项目）：

1.  从远程服务器，我从 git 中提取我的源代码
2.  使用[sbt-assembly](https://github.com/sbt/sbt-assembly)插件我在服务器上构建了一个 jar
3.  然后我使用 nohup 运行 Scala 应用程序，它允许您在不终止进程的情况下退出远程会话：

    nohup java -jar myapp.jar > myapp.log 2> myapp.err < /dev/null &

首先，考虑到它正在使用数据库等资源，一旦进程运行，停止进程的最佳方法是什么。我只是查找java进程ID并对其进行核对吗？

其次，在重新启动时自动启动 java 应用程序的最佳方法是什么。我记得过去使用过 init.d，但记得因为它是一个 java 应用程序，所以遇到了一些困难。

*更新：*

我错过了这里房间里的大象。我正在使用 Spray 库，该库又使用 Akka，因此提供了许多有趣的选项。

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2014-03-18T12:51:41.990

给猫剥皮的方法有很多种...

您可以使用 sbt-start-script [https://github.com/sbt/sbt-start-script](https://github.com/sbt/sbt-start-script)甚至 sbt-native-packager [https://github.com/sbt/sbt-native-packager](https://github.com/sbt/sbt-native-packager)

您可以将 Spray 的 Boot 示例脚本包装在一个简单的 init.d 脚本中，该脚本调用 sbt，如本答案[https://stackoverflow.com/a/17399574/155689](https://stackoverflow.com/a/17399574/155689)中所述，或者只使用普通的`nohup`java 命令。

[您可以创建更大的守护进程感知类和脚本，或者使用使用 Jsvc http://commons.apache.org/proper/commons-daemon/jsvc.html](http://commons.apache.org/proper/commons-daemon/jsvc.html)或 Java Service Wrapper的 init.d 脚本扩展这些类和脚本。[http://wrapper.tanukisoftware.com/](http://wrapper.tanukisoftware.com/)

守护进程和应用程序类的示例：

```
package com.example.myapplication.server

import akka.actor.{Props, ActorSystem}
import spray.can.Http
import akka.io.IO
import com.example.myapplication.api.MyServiceActor
import org.apache.commons.daemon._

trait ApplicationLifecycle {
  def start(): Unit
  def stop(): Unit
}

abstract class AbstractApplicationDaemon extends Daemon {
  def application: ApplicationLifecycle

  def init(daemonContext: DaemonContext) {}

  def start() = application.start()

  def stop() = application.stop()

  def destroy() = application.stop()
}

class ApplicationDaemon() extends AbstractApplicationDaemon {
  def application = new Application
}

object ServiceApplication extends App {

  val application = createApplication()

  def createApplication() = new ApplicationDaemon

  private[this] var cleanupAlreadyRun: Boolean = false

  def cleanup(){
    val previouslyRun = cleanupAlreadyRun
    cleanupAlreadyRun = true
    if (!previouslyRun) application.stop()
  }

  Runtime.getRuntime.addShutdownHook(new Thread(new Runnable {
    def run() {
      cleanup()
    }
  }))

  application.start()
}

class Application() extends ApplicationLifecycle with Logging {

  private[this] var started: Boolean = false

  private val applicationName = "MyApplication"

  implicit val actorSystem = ActorSystem(s"$applicationName-system")

  def start() {
    logger.info(s"Starting $applicationName Service")

    if (!started) {
      started = true

      val myService = actorSystem.actorOf(Props[MyServiceActor], "my-service")

      IO(Http) ! Http.Bind(myService, interface = "0.0.0.0", port = 8280)
    }
  }

  def stop() {
    logger.info(s"Stopping $applicationName Service")

    if (started) {
      started = false
      actorSystem.shutdown()
    }
  }

} 
```

如果您在 中部署 jar（对 fat jar 使用 sbt-assembly） ，请`/opt/myapplication/myapplication.jar`在文件夹中添加一些外部配置`/etc/mycompany`，然后您可以将其包装在`/etc/init.d/myapplication`脚本中，例如使用 Jsvc：

```
#!/bin/sh
### BEGIN INIT INFO
# Provides:          myapplication
# Required-Start:    $local_fs $remote_fs $network
# Required-Stop:     $local_fs $remote_fs $network
# Should-Start:      $named
# Should-Stop:       $named
# Default-Start:     2 3 4 5
# Default-Stop:      0 1 6
# Short-Description: Control myapplication
# Description:       Control the myapplication daemon.
### END INIT INFO

set -e

if [ -z "${JAVA_HOME}" ]; then
        JAVA_HOME=$(readlink -f /usr/bin/java | sed "s:/bin/java::")
fi
JAVA_OPTS="-Xms512m -Xmx1024m"

APP=myapplication

PID=/var/run/${APP}.pid
OUT_LOG=/var/log/myapplication/${APP}_out.log
ERR_LOG=/var/log/myapplication/${APP}_err.log

DAEMON_USER=yourserviceuser

APP_LOG_CONFIG=/etc/mycompany/${APP}_logback.xml
APP_CONFIG=/etc/mycompany/${APP}.conf
APP_HOME=/opt/${APP}
APP_CLASSPATH=$APP_HOME/${APP}.jar
APP_CLASS=com.example.myapplication.server.ApplicationDaemon

if [ -n "$APP_LOG_CONFIG}" ]; then
        JAVA_OPTS="-Dlogback.configurationFile=${APP_LOG_CONFIG} ${JAVA_OPTS}"
fi

DAEMON_ARGS="-home ${JAVA_HOME} -Dconfig.file=${APP_CONFIG} ${JAVA_OPTS} -pidfile ${PID} -user ${DAEMON_USER} -outfile ${OUT_LOG} -errfile ${ERR_LOG} -cp ${APP_CLASSPATH} ${APP_CLASS}"

. /lib/lsb/init-functions

case "$1" in
        start)
                log_daemon_msg "Starting ${APP}"
                cd ${APP_HOME} && jsvc ${DAEMON_ARGS}
                log_end_msg 0
                ;;
        stop)
                log_daemon_msg "Stopping ${APP}"
                cd ${APP_HOME} && jsvc -stop ${DAEMON_ARGS}
                log_end_msg 0
                ;;
        *)
                log_success_msg "Usage:  {start|stop}"
                echo "Usage:  {start|stop}"
                exit 1
                ;;
esac

exit 0 
```

有了这个，你现在可以`sudo service myapplication start|stop`

如果如前所述，您希望它在启动时自动启动，然后运行此命令

```
sudo update-rc.d myapplication defaults 
```

这种守护进程方法适用于我拥有的 Spray 应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:01:04.790

如果`maven`合适，可以使用以下插件： http: [//evgeny-goldin.com/wiki/Sshexec-maven-plugin](http://evgeny-goldin.com/wiki/Sshexec-maven-plugin)

可能它可以很容易地移植到`sbt`

# c# - C# 中命令行工具的包装器

> ID：15360624
> 
> 赞同：6
> 
> 时间：2013-03-12T12:00:24.387
> 
> 标签：c#, visual-studio-2010, command-line, wrapper, argument-passing

使用[MSDN](http://support.microsoft.com/kb/305994)，我得到了这个类来为我的命令行工具编写一个包装器。

我现在面临一个问题，如果我通过带有参数的命令行执行 exe，它可以完美运行而没有任何错误。

但是当我尝试从 Wrapper 传递参数时，它会使程序崩溃。

想知道我是否正确地传递了论点，如果我错了，请有人指出。这是 MSDN 的 LaunchEXE 类

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Diagnostics;
using System.IO;

namespace SPDB
{
    /// <summary>
    /// Class to run any external command line tool with arguments
    /// </summary>
    public class LaunchEXE
    {
        internal static string Run(string exeName, string argsLine, int timeoutSeconds)
        {
            StreamReader outputStream = StreamReader.Null;
            string output = "";
            bool success = false;

            try
            {
                Process newProcess = new Process();
                newProcess.StartInfo.FileName = exeName;
                newProcess.StartInfo.Arguments = argsLine;
                newProcess.StartInfo.UseShellExecute = false;
                newProcess.StartInfo.CreateNoWindow = true; //The command line is supressed to keep the process in the background
                newProcess.StartInfo.RedirectStandardOutput = true;
                newProcess.Start();
                if (0 == timeoutSeconds)
                {
                    outputStream = newProcess.StandardOutput;
                    output = outputStream.ReadToEnd();
                    newProcess.WaitForExit();
                }
                else
                {
                    success = newProcess.WaitForExit(timeoutSeconds * 1000);

                    if (success)
                    {
                        outputStream = newProcess.StandardOutput;
                        output = outputStream.ReadToEnd();
                    }
                    else
                    {
                        output = "Timed out at " + timeoutSeconds + " seconds waiting for " + exeName + " to exit.";
                    }
                }
            }
            catch (Exception e)
            {
                throw (new Exception("An error occurred running " + exeName + ".", e));
            }
            finally
            {
                outputStream.Close();
            }

            return "\t" + output;           

        }
    }
} 
```

这是我从主程序（Form1.cs）传递参数的方式

```
private void button1_Click(object sender, EventArgs e)
        {
            string output;
            output = LaunchEXE.Run(@"C:\Program Files (x86)\MyFolder\MyConsole.exe", "/BACKUP C:\\MyBackupProfile.txt", 100);
            System.Windows.Forms.MessageBox.Show(output);
        } 
```

命令行工具接受以下命令并完美运行：

C:\Program Files (x86)\MyFolder> **MyConsole.exe /BACKUP C:\MyBackupProfile.txt**

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T16:06:56.707

我有两个选择给你——

1) 请尝试在“管理员模式”下运行您的 Visual Studio。或 2) 尝试执行此操作。[https://github.com/commandlineparser/commandline](https://github.com/commandlineparser/commandline)。

“命令行解析器库为 CLR 应用程序提供了一个简洁的 API，用于操作命令行参数和相关任务。它允许您显示具有高度自定义的帮助屏幕和向用户报告语法错误的简单方法。 “所有无聊和重复性的编程都站在图书馆的肩膀上，让您专注于核心逻辑。自 2005 年以来，该库通过不断更新的 API 提供了无忧的命令行解析。”

对我来说效果很好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:33:27.117

我有一种感觉，它不喜欢你路径中的空间。请参阅这篇文章：[C# 如何在 process.arguements 中使用目录空白？](https://stackoverflow.com/questions/4441212/c-sharp-how-to-use-directory-white-spaces-into-process-arguements)

# javascript - 使用相对于其他字段的默认值声明主干模型

> ID：15360626
> 
> 赞同：2
> 
> 时间：2013-03-12T12:00:31.763
> 
> 标签：javascript, backbone.js

如何根据其他模型值获取以下代码以进行默认设置？这大致就是我所拥有的

```
var Model = Backbone.Model.extend({
    defaults:{
        name:"",
        surname:"",
        fullTextString:""
    }
});
model = new Model({name"John", surname:"Doe", fullTextString:"John"+" "+"Doe"}) 
```

我想要的是：

```
Backbone.Model.extend({
    defaults:{
        name:"",
        surname:"",
        fullTextString:name+" "+surname
    }
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:44:18.147

默认值仅在您**不**设置值时使用，因此您想要的是不可能的。

我将使用以下内容来获得您想要的功能：

```
var Model = Backbone.Model.extend({
    defaults: {
        firstName: "",
        lastName : ""
    },

    fullName: function() {
        return this.get("firstName") + " " + this.get("lastName");
    },

    get: function( attr ) {
        if ( typeof this[attr] === "function" ) {
            return this[attr]();
        }
        return Backbone.Model.prototype.get.call(this, attr);
    }
}); 
```

这样你就可以这样初始化你的模型：

```
model = new Model({firstName: "John", lastName: "Doe"}); 
```

并用于`model.get("fullName")`获得名称“John Doe”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:48:19.310

鉴于您希望属性之一是基于传入值和可能的默认值的计算值（例如，如果它们指定 {surname: "Munsch"} 但未提供名称），我认为最简单的事情是像这样添加一个初始化程序：

```
var Model = Backbone.Model.extend({
    defaults:{
        name:"",
        surname:""
    },
    initialize: function() {
        this.set({fullTextString: this.get("name") + " " + this.get("surname")});
    }
});

model = new Model({name:"John", surname:"Doe"});
model2 = new Model({surname:"Doe"});

console.log("model fullTextString: ", model.get("fullTextString"));
console.log("model2 fullTextString: ", model2.get("fullTextString")); 
```

# python - 有谁知道我在哪里可以获得用于 azure 的 linux python SDK？

> ID：15360631
> 
> 赞同：0
> 
> 时间：2013-03-12T12:00:43.277
> 
> 标签：python, linux, azure

我一直在寻找高处和低处。微软网站甚至有这个链接 - [https://www.windowsazure.com/en-us/develop/python/common-tasks/install-python/](https://www.windowsazure.com/en-us/develop/python/common-tasks/install-python/)但是当我按照说明执行 curl 命令并输入我的密码它会因“发生错误...”消息而爆炸。

我也发现了这个 - [http://www.windowsazure.com/en-us/downloads/](http://www.windowsazure.com/en-us/downloads/) - 但是当我点击下载链接时，我总是得到一个 400KB 的文件（对于 SDK 来说感觉很小），如果我尝试解压缩我得到一堆错误。

谁能指出我获取 SDK 的可靠机制？我必须相信它就在某个地方。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:06:16.900

来自[python SDK Azure](http://www.windowsazure.com/en-us/develop/python/)。在[安装 python 和 SDK](http://www.windowsazure.com/en-us/develop/python/common-tasks/install-python/)中，您可以看到如何安装。

# ios - 在 Subversion 中远程锁定/解锁文件

> ID：15360639
> 
> 赞同：0
> 
> 时间：2013-03-12T12:01:03.537
> 
> 标签：ios, svn, version-control

我在 Windows 机器上设置了用于 iOS 开发的 Subversion。WINdows 机器充当服务器，所有团队成员都在 Mac 上工作。

我使用 TortoiseSVN 作为 SVN 客户端，我知道您可以使用它锁定文件，但您必须始终访问服务器中的目录才能执行此操作。因此，我正在寻找一种远程执行此操作的方法。

为了进一步解释，当团队成员开始编辑文件时，他应该能够通过终端发出命令（我读到你不能通过 Xcode 执行此操作，尽管这样的功能会很棒！）锁定文件并再次以同样的方式解锁。

我怎样才能做到这一点？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:52:09.143

`svn lock <filename>`在保存在工作副本中的文件上相当于 Tortoise 的“获取锁定”

# r - 为什么 knitr 使用 auto.arima 显示警告？

> ID：15360640
> 
> 赞同：7
> 
> 时间：2013-03-12T12:01:11.387
> 
> 标签：r, warnings, knitr, forecasting

似乎`auto.arima`从脚本`forecast`中的包运行`knitr`总是会产生一个警告 - 当我在普通 R 中运行它时，我没有收到这个警告。

**knitr Markdown 示例代码：**

```
```{r}
library(forecast)
```
Spurious warning from forecast and knitr
========================================

The following generates a warning that I don't think is valid

```{r}
summary(auto.arima(WWWusage))
``` 
```

产生这个：

![针织输出](../Images/6dddb5e493247dd686d0f024418500c4.png)

而在 R 中运行以下命令通常不会产生这样的警告：

```
> library(forecast)
This is forecast 4.02 

> summary(auto.arima(WWWusage))
Series: WWWusage 
ARIMA(1,1,1)                    

Coefficients:
         ar1     ma1
      0.6504  0.5256
s.e.  0.0842  0.0896

sigma^2 estimated as 9.793:  log likelihood=-254.15
AIC=514.3   AICc=514.55   BIC=522.08

Training set error measures:
       ME      RMSE       MAE       MPE      MAPE      MASE 
0.3035616 3.1137542 2.4052748 0.2805566 1.9174634 0.5315228 
```

此外，由于此数据集是示例数据集，因此`auto.arima`我倾向于认为警告不正确（因为我怀疑会给出“好”示例）。

知道发生了什么吗？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T15:48:05.603

该警告确实存在，但在内部被`forecast`; 见。`options(warn = -1)`_`forecast:::search.arima`

`knitr`（实际上是`evaluate`包）无论`getOption('warn')`值如何都会捕获警告。在这种情况下，您必须`warning=FALSE`按照 Jilber 的建议使用该选项。

# wpf - 如何将 wpf datagrid scrollviewer 可见性绑定到按钮可见性？

> ID：15360641
> 
> 赞同：1
> 
> 时间：2013-03-12T12:01:15.337
> 
> 标签：wpf, xaml, wpfdatagrid

```
<Window x:Class="WPfDataGrid.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    Title="MainWindow" Height="450" Width="525" Loaded="Window_Loaded">
    <Grid>
            <DataGrid x:Name="dgrdEmployee" Width="300" Height="300" VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Auto"/>
            <Button Content="Navigation" x:Name="BtnNavigation" Width="90" Height="40" Margin="204,336,209,-15" />
    </Grid>
</Window>

public partial class MainWindow : Window
{
    public MainWindow()
    {
        InitializeComponent();

    }

    public class Employees
    {
        public string Name { get; set; }
        public string Id { get; set; }
        public string Address { get; set; }
    }

    public List<Employees> EmployeeList()
    {
        XDocument employees = XDocument.Load(@"C:\Employees.xml");
        List<Employees> employee = (from em in employees.Descendants("Employee")
                                    select new Employees
                                    {
                                        Name = em.Element("Name").Value,
                                        Id = em.Element("Id").Value,
                                        Address = em.Element("Address").Value
                                    }).ToList();
        return employee;
    }
private void Window_Loaded(object sender, RoutedEventArgs e)
    {
        dgrdEmployee.ItemsSource = EmployeeList();
    }
} 
```

使用上面的代码，我得到以下结果。

![在此处输入图像描述](../Images/a79ff66050c2799972001b4f7c812acc.png)

如果数据网格滚动查看器可见，则按钮应可见，否则按钮应折叠。这样做有什么改变吗？

我尝试了类似下面的东西。但这对我来说没有意义。

```
<Button Content="Navigation" x:Name="BtnNavigation" Visibility="{Binding Visibility, ElementName=dgrdEmployee.ScrollViewer}" Width="90" Height="40" Margin="204,336,209,-15" /> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-03-12T12:07:45.213

`ScrollViewer`总是可见的。将`ScrollViewer`根据显示的数据量显示或隐藏其滚动条。

假设您可以访问`VerticalScrollBarVisiblity`和的`HorizontalScrollBarVisiblity`属性`ScrollViewer`，您可能会在这些属性和按钮的属性之间创建一个[MultiBinding](http://msdn.microsoft.com/en-us/library/system.windows.data.multibinding.aspx)`Visibliity`。您可能还必须创建一个[值转换器](http://msdn.microsoft.com/en-us/library/system.windows.data.ivalueconverter.aspx)，因为滚动条可见性属性使用不同的类型（`Auto`除了标准可见性值之外还包括一个值）。

# c# - 使用 MS Access 在 Windows 窗体中获取登录用户

> ID：15360642
> 
> 赞同：1
> 
> 时间：2013-03-12T12:01:16.363
> 
> 标签：c#, winforms, ms-access

我的应用程序有一个自定义登录表单，它从数据库（MS Access）获取用户名和密码。在用户选择他们的用户名并输入密码并点击登录按钮后，将出现新表单。这是我使用的登录按钮点击事件：

```
OleDbCommand cmde = new OleDbCommand("SELECT * FROM Account WHERE username='"+ username.Text +"' and password='"+ passtxt.Text +"'", GetConnection());
OleDbDataReader reader = cmde.ExecuteReader();
if (reader.HasRows == true)
{
    MainForm frm = new MainForm(this);
    frm.Show();
    this.Hide();
}
else
{
    MessageBox.Show("Wrong Password!!!", this.Text, MessageBoxButtons.OK, MessageBoxIcon.Error);
} 
```

我的问题是如何获取已在新表单上登录的用户名/级别？所以我可以在我的表单上为非管理员用户隐藏一些选项。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:08:54.067

您可以在用户表中添加数据库中的字段以确定级别，然后测试此字段作为测试用户名和密码

[此链接将帮助您](http://www.access-programmers.co.uk/forums/showthread.php?t=40035) 解决任何问题？

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:13:40.837

本质上，@Maath Programmer 有解决方案。您可以有另一个字段，比如说“isAdmin”，然后您将检查表单中的该值。

所以用户登录。

加载用户数据。例如。存储用户数据是一些变量，比如说一个用户类。

进行适当的检查。例如。是用户管理员（这只是 if 语句）

应用检查。例如。隐藏一些元素。

继续...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:13:53.920

每当您使用 show 或 show dialog 方法调用新表单而不是使用 Constructor 传递您的用户 ID 值时

```
 Form2 objForm2=new Form2(String userid)
objForm2.ShowDialog(); 

```

并在 Form2 中使用字符串参数创建新的构造函数。

您可以使用您的用户 ID 根据您的要求在 form2 中执行任何操作

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-06-18T09:38:39.520

只需在数据库中创建一个用户类型列，将用户级别指定为管理员或用户。例如如果 user = "admin" 那么 ad.show ac.show bd.show else if user = "user" 那么 ax.show

# php - sys_get_temp_dir() - 在 windows8 上返回 C:\Windows

> ID：15360647
> 
> 赞同：2
> 
> 时间：2013-03-12T12:01:26.880
> 
> 标签：php, windows-8

在 windows8 上，我用 php 5.3 得到了这个：

```
echo sys_get_temp_dir(); 
```

输出：

```
C:\Windows 
```

我不明白什么还是一个错误？

***UPD***

尝试`$_ENV`：

```
<?php

var_export($_ENV); 
```

输出：

```
array ( ) 
```

检查`upload_tmp_dir`：

```
<?php

echo ini_get('upload_tmp_dir'); 
```

输出：

```
C:\Windows\Temp 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:17:42.910

查看 PHP 源代码，它将调用[GetTempPath](http://msdn.microsoft.com/en-us/library/windows/desktop/aa364992%28v=vs.85%29.aspx)来确定临时目录。根据文档，Windows 目录 C:\Windows 是最后一个失败选项。您应该检查 PHP 或其主机进程在哪个用户配置文件下运行，也许环境需要一些修复。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-05-23T15:48:44.170

与此[PHP Bug](https://bugs.php.net/bug.php?id=64410)相关（仅 CGI 上下文？）。

我有同样的问题，解决方案是更改 apache 配置以在 apache 配置文件（httpd.conf）中使用[此指令将](http://httpd.apache.org/docs/current/mod/mod_env.html#passenv)*TEMP*系统环境变量公开给 PHP ：

```
PassEnv TEMP 
```

不要忘记激活*env_module*，通常取消注释“LoadModule env_module modules/mod_env.so”行。

此解决方案修复了以下 PHP 函数的结果：*sys_get_temp_dir()*、*tempnam()*。

# c# - Checking ReadKey against Enum

> ID：15360649
> 
> 赞同：0
> 
> 时间：2013-03-12T12:01:32.170
> 
> 标签：c#, if-statement, console, enumeration

I have this enum for all four possible arrow key presses

`enum Direction{up=ConsoleKey.UpArrow, left=Consolekey.LeftArrow,...};`

`private ConsoleKeyInfo userSelect;`

```
private bool mQuit; 
```

I then have

```
 public void getUserInput()
     {
        userSelect = Console.ReadKey()

        if (userSelect.Key == ConsoleKey.Escape)
        {
            mQuit = true;
        }
       else if(userSelect.Key == "check if key press is value in enumeration")
       {
        //implementation
       }
    } 
```

Can't work out what the code would be to check "if Key press is one of the values in enum" Any ideas?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T12:05:21.537

```
else if(Enum.IsDefined(typeof(Direction), userSelect.Key)) {
    //Logic
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:14:01.457

你可以使用 cast 来解决这个问题。

```
if (userSelect.Key == (ConsoleKey)myEnum)
{

} 
```

# ajax - Strongly typed ViewData for complex object persistence

> ID：15360653
> 
> 赞同：0
> 
> 时间：2013-03-12T12:01:37.430
> 
> 标签：ajax, asp.net-mvc

I'm working on a ASP.NET MVC system where you may click on a ajax link that will open a window (kendo window but it does not affect the situation) which a complex flow. To make this less of a nightmare to manage, I made a ViewModel (as I should) but this ViewModel is a complex object due to the complexity of the procedure.

There is anywhere from a single to 5 windows that asks various questions depending on a lot of conditions (including, but not limited to, what time you click the link, who you are, what schedule is attached to your account and, obviously, your previous answers in this flow).

The problem is that having a complex object, I cannot simply make `@Html.HiddenFor(o=>o.XXX)`. So I proceeded to find an alternative and it led me with a single option, TempData. I'm really not a fan of dynamics and object types. I'd really like to have this View Model strongly typed.

What would be the best way to approach this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:00:09.480

这是使用`Session`or`TempData`可能有意义的情况。与流行的看法相反，您可以使这些有点强类型。不像视图模型，但您可以通过使用扩展方法来避免钥匙串混乱。

例如，不要做这样的事情：

```
TempData["NestedVariable1"] = someObject;
...
var someObject = TempData["NestedVariable1"] as CustomType; 
```

您可以编写扩展方法来存储这些变量，并将键和转换封装在扩展方法中。

```
public static class ComplexFlowExtensions
{
    private static string Nv1Key = "temp_data_key";

    public static void NestedVariable1(this TempData tempData, CustomType value)
    {
        // write the value to temp data
        tempData[Nv1Key] = value;
    }

    public static CustomType NestedVariable1(this TempData tempData)
    {
        // read the value from temp data
        return tempData[Nv1Key] as CustomType;
    }
} 
```

然后，您可以从控制器或视图中读取/写入这些值，如下所示：

```
TempData.NestedVariable1(someObject);
...
var someObject = TempData.NestedVariable1(); 
```

您也可以使用相同的模式`Session`。而不是将每个单独的标量值保存在单独的变量中，您应该能够将整个嵌套对象图存储在变量中。要么，要么将其序列化为 JSON 并存储，然后在将其取回时反序列化。无论哪种方式，我认为这比写入视图表单的大量隐藏字段要好。

# java - 如何创建一个一旦调用就不能再次调用的Java函数，除非有一些延迟？

> ID：15360659
> 
> 赞同：3
> 
> 时间：2013-03-12T12:02:01.407
> 
> 标签：java, android

我正在尝试制作一个只能在两次调用之间存在一定时间延迟（比如 5 秒）后才能再次调用的函数。

我正在创建的 android 应用程序需要此功能。由于用户可能会在几秒钟内过于频繁地调用该函数，这会破坏他的体验。因此，我正在拼命寻找这个问题的答案。

```
public void doSomethin(){
//code here which makes sure that this function has not been called twice within the specified delay of 5 seconds
//Some code here
} 
```

任何帮助都是极好的！阿迪特

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T12:05:55.747

您可以以毫秒为单位保持时间，并检查当前时间是否大于或等于上一次时间 + 5 秒。如果是，则执行该方法并将之前的时间替换为当前时间。

请参阅[System.currentTimeMillis()](http://docs.oracle.com/javase/1.5.0/docs/api/java/lang/System.html#currentTimeMillis%28%29)

```
public class FiveSeconds {
    private static Scanner scanner = new Scanner(System.in);
    private static long lastTime = 0;

    public static void main(String[] args) {    
        String input = scanner.nextLine();

        while(!input.equalsIgnoreCase("quit")){
            if(isValidAction()){
                System.out.println(input);
                lastTime = System.currentTimeMillis();
            } else {
                System.out.println("You are not allowed to do this yet");
            }

            input = scanner.nextLine();
        }       
    }

    private static boolean isValidAction(){
        return(System.currentTimeMillis() > (lastTime + 5000));
    }
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-03-12T12:25:59.407

如果代码在您的主线程上运行，`Thread.sleep(5000)`则不是一种选择。那么最简单的方法是：

```
private long previous = 0;
public void doSomething() {
    long now = Calendar.getInstance().getTimeInMillis();
    if (now - previous < 5000)
        return;

    previous = now;
    // do something
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:06:58.233

使用静态字段，该字段保存上次执行的日期时间，并在执行之前根据此时间戳检查当前日期时间。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T12:07:13.083

我不会为您编写代码，但如果您考虑一下，这并不难。您要确保自上次函数调用后 5 秒后未调用它。让我们把它分成几部分。

1) 获取当前时间 2) 与在调用之间保持其值的存储时间进行比较。3) 如果不到 5 秒，则不做任何事情 4) 否则存储新值并做一些事情。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T12:07:30.623

一个问题是您必须为*每个用户*设置一个会话级计时器。这可能是相当大的开销，具体取决于您拥有多少同时用户。

对于一个用户来说很容易：根据要求启动计时器。这是区分用户的问题。您的服务现在是有状态的，这通常是一件坏事。你放弃了幂等性。

您还可以在数据库中维护状态。不用担心电话；检查持久性操作以确保它们不会过于频繁地发生。

我不清楚您是要在任何人调用该方法后将所有用户排除五秒钟，还是在第一次调用该方法后阻止每个用户再次调用该方法五秒钟。

这听起来像是吞吐量杀手。我会重新考虑这个设计。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T12:09:42.873

我从未在 Android 中进行过编码。但是，如果 Android 有线程（很可能，它确实有）。然后在这个函数中让线程休眠 5 秒，这意味着即使它被调用，它也不会继续执行，直到经过 5 秒

```
public void doSomething()
{
  Thread.sleep(5000);  // Please find the corresponding Android method
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T12:11:20.437

make`doSomethin()`作为私有方法。

公开另一个函数，比如exposedDoSomething()。

```
public void exposeDoSomething(){

   // Add to a queue

} 
```

在一个单独的线程中，每 5 分钟读取一次队列并调用`doSomethin()`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-12T12:15:25.987

也许 TimerTask 会帮助你，更多细节在这里：

[TimerTask|Android 开发者](http://developer.android.com/reference/java/util/TimerTask.html)

例子：

```
 private TimerTask tiemrTast= new TimerTask() {

    @Override
    public void run() {

    }
}; 
```

然后使用这个方法：`public void scheduleAtFixedRate (TimerTask task, long delay, long period)`

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-12T12:36:22.383

您可以使用 hander.postDalayed 方法在特定延迟后调用方法以运行您可以使用类似这样的方法

```
int delay=5000;
int k;
int iDelayTimeInMiliSeconds=2000;
                    for( k=0;k<arrBatch.size();k++)
                    {           
                        delay=delay+iDelayTimeInMiliSeconds;
                        callAllDocumentList(arrBatch.get(k),k,delay);                               
                    }   

public void callAllDocumentList(final String strInvoiceId,final int count,int delay) 
{
    mHandler.postDelayed(new Runnable() 
    {

        @Override
        public void run() 
        {   
               // call your function here that you want to call after specific delay
            //getOrderDetails(strInvoiceId,count,true);

        }
    }, delay);
} 
```

# ruby-on-rails-3 - 更新表单模板 rails 3

> ID：15360665
> 
> 赞同：0
> 
> 时间：2013-03-12T12:02:21.040
> 
> 标签：ruby-on-rails-3, rails-migrations

这个问题可能听起来很傻，但我想知道一旦我们更改数据库，是否有办法更新表单和模型。

例如，当我生成脚手架时，我可能会忘记需要放入数据库的 2 个字段，当我稍后记住它们时，我会生成迁移，但随后我必须进入并更改数据库中的表单和 attr_accessible 等。

是否有可用的快捷方式？如果我对 db 表进行更改 - 是否有可用的命令来更新我的模型和表单元素与这些更改？

我只是想知道是否有可用的捷径来实现这些 - 随着模型的发展和对数据库的更改，节省了大量的工作。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:09:33.630

如果您没有更改原始脚手架的文件，那么为什么不重新搭建它们呢？

如果您更改了文件，则没有快捷方式。

再说一次，脚手架就是这样——它并不意味着是成品。除了制定正确的模型关系和感受应用程序之外，不建议将其用于其他任何事情。之后，您应该手动优化代码并删除您不想提供给用户的任何控制器/视图功能。

# java - write to ms excel from ms sql server 2005 using java and poi

> ID：15360670
> 
> 赞同：-2
> 
> 时间：2013-03-12T12:02:33.690
> 
> 标签：java, sql-server, apache-poi

I have a database table with more than 200 records.
I have to write this data to ms excel using java and poi api.
I am able to write the data. But, all the data appears in a single page (not sheet).
I want to split every 70 rows into different pages (not sheets).
Along with headers and footers i need it.

setautopagebreaks(true) sets it to every 30 rows by default

e.g., after every 70 rows, there has to be a page break.

How do i do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:23:51.120

查看 ：`public void setRowBreak(int row)`

[关联](http://poi.apache.org/apidocs/org/apache/poi/hssf/usermodel/HSSFSheet.html#setRowBreak%28int%29)

# vhdl - 如果存在两个同名组件，一个在包中，另一个在架构中，哪个优先？

> ID：15360672
> 
> 赞同：1
> 
> 时间：2013-03-12T12:02:44.970
> 
> 标签：vhdl, hdl, modelsim

我有一个 VHDL 测试文件 a.vhd。

> > 猫.vhd

```
package pak is
component b is              -- 1st definition of component b.
end component
end pak;

use work.pak.all;          -- 1st definition visible through this package use clause
entity a is
  port (in1 : in std_logic );
end a;

architecture a of a is

component b                   -- 2nd definition of component b.
  port ( in11 : in std_logic);
end component;

begin
  inst : b port map ( in11=> in1);   -- there are two definitions of component b at this instance.
end a;

entity b is
port (in11 : in std_logic);
end b;

architecture b of b is
begin
end b; 
```

因此，在其上运行 modelsim 时，不会出现被覆盖组件的警告/错误。我们是否总是优先考虑在架构中声明的组件，而不是在 package.json 中声明的同名组件。有人能告诉我 LRM 是怎么说的吗？请解释一下。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T14:31:08.147

在这个具体的例子中，你在“a”中实例化为“inst”的组件肯定是架构中声明的组件“b”，因为work.pak.b 有不同的端口声明。

如果您在 A 中实例化了没有端口的“b”，您应该会看到 work.pack.b。

然而，请理解这些与“实体 b”之间没有内在联系。只有当设计被细化时（例如在仿真开始时），工具才会寻找与组件声明实际匹配的“b”。在这种情况下，它可以找到在“a”中声明的“b”，但它不会找到匹配“work.pak.b”的实体。

在这个阶段，您可以使用配置（单独的配置，或嵌入在架构 A 中的配置语句）将特定实体“work.b”绑定到“b”。由于端口声明不匹配，这不适用于“work.pak.b”。

# css - 引导程序。少到 css

> ID：15360673
> 
> 赞同：0
> 
> 时间：2013-03-12T12:02:46.093
> 
> 标签：css, twitter-bootstrap, less

我使用推特引导程序。在我的开发服务器中，我连接了两个较少的文件：bootstrap.less 和 style.less：

```
@import "bootstrap.less";
@gridGutterWidth: 30px;

body {...} 
```

我在 style.less 中重新定义了一些引导变量。在这种情况下如何将 bootstrap.less 和 style.less 转换为 css？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-03-12T13:02:31.483

Twitter Bootstrap 团队开发了自己的 CSS- [recess](https://github.com/twitter/recess)工具。它根据 BS 的样式指南编译 LESS、优化 CSS、lints 和转换它。它以 Node 包的形式提供，安装它`npm`：

```
npm install recess 
```

您可以使用以下命令从命令行运行它：

```
recess --compile bootstrap.less > bootstrap.css 
```

但首选方法是通过在 Bootstrap 的文件夹中`Makefile`运行来使用 Bootstrap。`make bootstrap`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:04:32.943

您可以使用诸如[SimpLESS](http://wearekiss.com/simpless)之类的工具来创建 CSS，然后在布局中引用 CSS，或者您可以使用[Less.js 动态](http://lesscss.org/)转换为 CSS，让您仍然可以在代码中引用您的 LESS 文件。

# html - H1 with two logo's

> ID：15360684
> 
> 赞同：0
> 
> 时间：2013-03-12T12:03:14.897
> 
> 标签：html, seo, accessibility, graphical-logo

I have two logo's in my site header.

I like the solution here: [Replacing H1 text with a logo image: best method for SEO and accessibility?](https://stackoverflow.com/questions/665037/replacing-h1-text-with-a-logo-image-best-method-for-seo-and-accessibility?answertab=active#tab-top) :

Solution: According to Matt Cuts (and some other comments) the best solution is to use an image with alt and title attributes. The alt attribute is for SEO and the title attribute is for accessibility. Using an image also makes sense for semantic markup. A company logo is actually an important piece of content.

```
<h1>
  <a href="http://stackoverflow.com">
    <img src="logo.png" alt="Stack Overflow" title="Click to return to Stack Overflow homepage" />
  </a>
</h1> 
```

How to have this with 2 logo's?

```
<h1>
   <a href="http://stackoverflow.com">
     <img src="logo1.png" title="Click to return to Stack Overflow homepage" alt="logo1 " />
  </a>
  <a href="http://stackoverflow.com">
    <img src="logo2.png" title="Click to return to Stack Overflow homepage" alt="logo2" />
  </a>
</h1> 
```

would the h1 then be: logo1 logo2?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:06:54.337

[正如 Harry Roberts ( http://csswizardry.com/2013/01/your-logo-is-still-an-image-and-so-is-mine/](http://csswizardry.com/2013/01/your-logo-is-still-an-image-and-so-is-mine/) )所解释的那样，您不应该使用 h1 作为徽标。

如果您想使用两个徽标，只需使用两个链接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T15:08:37.657

对于这两个徽标，这取决于上下文。您是否使用两个图像，因为它们是两个不同的东西，即

```
<h2>Our Sponsors</h2>
<a><img src="" alt="Google"/></a> <a><img src="" alt="MS"/></a>
<a><img src="" alt="Adobe"/></a> 
```

或类似的东西：

```
<a><img src="" alt="Toyota"/><img src="" alt="Corolla"/></a> 
```

如果是秒，你应该这样做：

```
<a><img src="" alt="Toyota Corolla"/><img src="" alt=""/></a> 
```

对于辅助技术，第一个 Toyota Corolla 示例将如下所示：

> 链接图像丰田图像卡罗拉

第二种方式：

> 链接图片 丰田卡罗拉。

有人说使用 null alts ( `alt=""`) 对可访问性和/或 SEO 不利。这是错误的。如果图像用于装饰目的，则应使用空 alt 属性，因为它所做的只是添加不需要的喋喋不休。曾几何时，搜索引擎曾经因为人们使用 null alt 而受到攻击，但现在不再如此。

# testing - Moq - Is it possible to specify in a Setup the Verify criteria (e.g. Times called)?

> ID：15360685
> 
> 赞同：45
> 
> 时间：2013-03-12T12:03:19.087
> 
> 标签：testing, mocking, installation, moq, verify

If you need to Setup a return value, as well as Verify how many times the expression was called, can you do this in one statement?

From what I can gather, Moq's `Setup(SomeExpression).Verifiable()` called along with `Verify()`, basically does a `Verify(SomeExpression, Times.AtLeastOnce)`? i.e. it verifys the expression was called only.

Here's an example to explain the question better. For an interface:

```
interface IFoo
{
    int ReturnSomething();
} 
```

Are the following two blocks equivalent (other than the first will Verify all setups marked as verifiable)?

```
void Test()
{
    var mock = new Mock<IFoo>();
    mock.Setup((m) => m.ReturnSomething()).Returns(1).Verifiable();

    mock.Verify();
} 
```

and

```
void Test()
{
    var mock = new Mock<IFoo>();
    mock.Setup((m) => m.ReturnSomething()).Returns(1);

    mock.Verify((m) => m.ReturnSomething(), Times.AtLeastOnce());
} 
```

If I wanted to verify the number of calls (say twice), is this the only way, where the expression is repeated for the Setup and Verify?

```
void Test()
{
    var mock = new Mock<IFoo>();
    mock.Setup((m) => m.ReturnSomething()).Returns(1);

    mock.Verify((m) => m.ReturnSomething(), Times.Exactly(2));
} 
```

I just don't like having to call Setup and Verify. Well, since this is a good idea for AAA, to rephrase, I don't like having to repeat the expression for the Setup and Verify. At the moment I store the expression in a variable and pass it to each method, but doesn't feel so clean.

PS - The context for this is for a test checking when a cache is updated or not (expirations etc.)

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2016-04-20T13:28:24.860

我一直有这个问题。我使用严格的模拟，我想严格指定（即我使用`It.Is<>()`而不是`It.IsAny()`）以及严格验证（即指定时间）。可悲的是，您不能为此使用可验证的，因为最小起订量缺少`Verifiable(Times)`过载。

调用的完整表达，包括`It.Is<>()`一般是大的。因此，为了避免重复，我通常采用以下方法：

```
Expression<Action<MockedType>> expression = mockedTypeInstance => mockedTypeInstance.MockedMethod(It.Is<TFirstArgument>(firstArgument => <some complex statement>)/*, ...*/);
_mock.Setup(expression);

/* run the test*/

_mock.Verify(expression, Times.Once); 
```

不是非常可读，但我认为没有另一种方法可以同时使用严格设置和严格验证。

* * *

## 回答 #2

> 赞同：16
> 
> 时间：2013-03-12T12:28:17.863

要回答第一个问题，是的，这两个块是等价的。`.Verify`如果未调用模拟上的方法，则两者都将在调用时失败。

据我所知，您无法预先指定验证，如果您考虑一下，这是有道理的。

这是指定模拟的行为：

```
mock.Setup(m => m.ReturnSomething()).Returns(1); 
```

这是验证调用者的行为：

```
mock.Verify(m => m.ReturnSomething(), Times.AtLeastOnce()); 
```

就我个人而言，我更喜欢单独调用 verify 来确认调用者所需的行为，`.Verifiable()`and`.Verify()`是不太严格的快捷方式（他们只是检查方法被调用一次或多次）但是如果你知道你的代码应该只调用一次方法，把最后验证以确认它。

在代码合并导致一个方法被调用两次之后，我开始这样做，测试仍然通过，因为它至少被调用了一次，但这也意味着发生了多次不应该发生的其他事情！

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2018-05-22T20:40:49.660

根据 Evren Kuzucuoglu 的回答，我创建了以下扩展方法以使创建表达式更简单：

```
/// <summary>
/// Creates a method call expression that can be passed to both <see cref="Setup"/> and <see cref="Verify"/>.
/// </summary>
/// <typeparam name="T">Mocked object type.</typeparam>
/// <param name="mock">Mock of <see cref="T"/>.</param>
/// <param name="expression">Method call expression to record.</param>
/// <returns>Method call expression.</returns>
public static Expression<Action<T>> CallTo<T>(this Mock<T> mock, Expression<Action<T>> expression) where T : class
{
    return expression;
}

/// <summary>
/// Creates a method call expression that can be passed to both <see cref="Setup"/> and <see cref="Verify"/>.
/// </summary>
/// <typeparam name="T">Mocked object type.</typeparam>
/// <typeparam name="TResult">Method call return type.</typeparam>
/// <param name="mock">Mock of <see cref="T"/>.</param>
/// <param name="expression">Method call expression to record.</param>
/// <returns>Method call expression.</returns>
public static Expression<Func<T, TResult>> CallTo<T, TResult>(this Mock<T> mock, Expression<Func<T, TResult>> expression) where T : class
{
    return expression;
} 
```

使用示例：

```
var createMapperCall = mockMappingFactory.CallTo(x => x.CreateMapper());
mockMappingFactory.Setup(createMapperCall).Returns(mockMapper.Object);

mockMappingFactory.Verify(createMapperCall, Times.Once()); 
```

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2021-04-20T20:09:58.657

我创建了一个实用程序类来处理这个问题：

```
public class TestUtils
{
  private static List<Action> verifyActions = new List<Action>();

  public static void InitVerifyActions() => verifyActions = new List<Action>();

  public static void VerifyAllSetups()
  {
    foreach (var action in verifyActions)
    {
      action.Invoke();
    }
  }

  public static ISetup<T> SetupAndVerify<T>(Mock<T> mock, Expression<Action<T>> expression, Times times) where T : class
  {
    verifyActions.Add(() => mock.Verify(expression, times));
    return mock.Setup(expression);
  }

  public static ISetup<T, TResult> SetupAndVerify<T, TResult>(Mock<T> mock, Expression<Func<T, TResult>> expression, Times times) where T : class
  {
    verifyActions.Add(() => mock.Verify(expression, times));
    return mock.Setup(expression);
  }
} 
```

然后在 TestInitialize() 中，我调用 TestUtils.InitVerifyActions()，在单元测试中：

```
TestUtils.SetupAndVerify(myMock, m => m.Foo("bar"), Times.Once()).Returns("baz");
TestUtils.SetupAndVerify(myOtherMock, m => m.Blah(), Times.Once());
...
TestUtils.VerifyAllSetups(); 
```

# plugins - How to Register a Gstreamer Plugin?

> ID：15360688
> 
> 赞同：2
> 
> 时间：2013-03-12T12:03:30.680
> 
> 标签：plugins, gstreamer, raspberry-pi

I was trying to install a gstreamer plugin in my Raspberry Pi. I have downloaded the Gstreamer plugin from a repository, then I build the binaries. After building I did a

`sudo make install` to install the gstreamer openmax plugin.

But the plugin (gst-openmax) that have hardware decoder elements(omxh264dec etc) are not being listed in gst-inspect.

I think it is because I have not register the plugin ? How do I register this plugin ?

I have gone through the code and found a function called `plugin_init()` inside which they have written code to register the plugin. How to invoke this function ? I tried setting the environmental variables such as `GST_PLUGIN_PATH, GST_OMX_CONFIG_DIR, LD_LIBRARY_PATH etc` But that too didnt work. How to Register this open max plugin so that I can use it in different pipelines ?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:00:16.483

要让 gstreamer 检测您的插件（即 .dll 或 .so 文件），您只需将其放在插件目录中即可。您不需要调用任何函数调用，例如 plugin_init 等。如果 Gstreamer 在插件目录中检测到插件，它将自动调用它。

# ruby-on-rails - 如何在已经存在的omniauth 上设置omniauth-facebook 并设计rails 应用程序？

> ID：15360689
> 
> 赞同：0
> 
> 时间：2013-03-12T12:03:31.110
> 
> 标签：ruby-on-rails, ruby-on-rails-3, facebook-graph-api, omniauth

因此，我按照此处提到的说明进行操作[http://railscasts.com/episodes/235-devise-and-omniauth-revised](http://railscasts.com/episodes/235-devise-and-omniauth-revised)并成功设置了登录并使用 twitter 选项注册。现在我正在尝试设置 facebook。使用`gem 'omniauth-facebook'`. 安装后。然后我添加到`/config/initializers/devise.rb`文件

```
config.omniauth :facebook, ENV["FB_APP_ID"], ENV["FB_SECRET_ID"] 
```

现在，当我尝试使用 facebook 登录时。我得到错误 -

```
ArgumentError in OmniauthCallbacksController#facebook

wrong number of arguments(3 for 2) 
```

我怀疑可能会出现错误。但不确定如何解决。

我的控制器和用户模型与此处提到的相同 - [http://railscasts.com/episodes/235-devise-and-omniauth-revised](http://railscasts.com/episodes/235-devise-and-omniauth-revised)

我错过了什么？

更新：我确实在 user.rb 模型文件中改变了这个

而不是 `alias_method :twitter, :all` 我做到了 `alias_method :twitter, :facebook :all`

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:05:55.663

这对我有用：

```
Rails.application.config.middleware.use OmniAuth::Builder do
  provider :facebook, 'FB_APP_ID', 'FB_SECRET_ID' 
```

但我没有使用设计，所以只是尝试删除`ENV`.

另请阅读此处了解所有选项和您可能遇到的一些失败：

[https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview](https://github.com/plataformatec/devise/wiki/OmniAuth%3a-Overview)

# asp.net-mvc-3 - EF T4 模板 - 有条件地发出自定义属性

> ID：15360691
> 
> 赞同：0
> 
> 时间：2013-03-12T12:03:38.490
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4, entity-framework-4.1, t4

我在项目中使用 EF 4.1“数据库优先”。使用 T4 模板，我有条件地使用诸如Required、DisplayName、MaxLength 之类的属性来装饰我生成的属性。在我的 T4 模板中，在 WriteProperty 方法中，我有类似的内容：

```
var maxLength = edmProperty.TypeUsage.Facets.Where(f => f.Name == "MaxLength").FirstOrDefault();
if (maxLength != null && maxLength.Value.ToString() != "Max")
{#>
    [MaxLength(<#= maxLength.Value #>, ErrorMessage = "<#=edmProperty.Documentation != null ? edmProperty.Documentation.LongDescription : edmProperty.Name #> cannot exceed <#=maxLength.Value #> characters.")]
<#+} 
```

这对于可以从 edmx 推断出的信息非常有用，但是有些东西是自定义的，根本不可用。

例如，假设我想`EmailAddress`使用自定义正则表达式类型属性来装饰属性。如何在我的模型中自动“挑出”电子邮件地址字段并应用此属性而不检查属性名称？

有没有办法“扩展” EdmProperty 并添加诸如 IsEmailAddress 之类的自定义属性？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T16:37:33.630

我认为你（有点）可以做到这一点。我还没有尝试过，但我相信如果您将命名空间中的属性添加到 Edmx 文件，您将能够通过元数据属性访问它。像这样的东西：

```
<Property Name="ID" Type="Int32" Nullable="false" myNs:regex="xxx" xmlns:myNs="http://tempuri.org" /> 
```

然后你可以读取这样的值（假设你有 EdmProperty）：

```
var metadata = edmProperty.MetadataProperties.Single(p => p.Name == "http://tempuri.org:regex");
Console.WriteLine(metadata.Value); 
```

这里唯一的问题是，每当您从数据库更新模型时，edmx 文件可能会被覆盖，并且您可能会丢失您在 edmx 文件中放置的任何注释。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:16:49.443

不，什么都没有。EF 模型设计器仍然无法使用自定义元数据扩展模型，即使是验证也是如此。您当然可以尝试命名约定或重新发明轮子并将自己的元数据文件添加到一边，但现在更简单的方法是手动为部分类编写验证属性和元数据类型。

我肯定会投票赞成在 EF 中添加此功能。

# php - Codeigniter 基本网址不起作用

> ID：15360693
> 
> 赞同：0
> 
> 时间：2013-03-12T12:03:47.510
> 
> 标签：php, codeigniter, base-url

```
<!DOCTYPE html PUBLIC '-//W3C//DTD XHTML 1.0 Transitional//EN''http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd'> 
```

http://www.w3.org/1999/xhtml' xml:lang='en' lang='en'>

```
<head>    
<title>Jotorres Login Screen | Welcome </title>
</head>
<body>
    <div>
    <div>
    <table width="300" border="0" align="center" cellpadding="0" cellspacing="1" bgcolor="#CCCCCC">
    <tr>
    <form name="form1" method="post" action="<?php echo base_url(); ?>/checkLogin.php">
    <td>
    <table width="100%" border="0" cellpadding="3" cellspacing="1" bgcolor="#FFFFFF">
    <tr>
    <td colspan="3"><strong>Member Login </strong></td>
    </tr>
    <tr>
    <td width="78">Username</td>
    <td width="6">:</td>
    <td width="294"><input name="myusername" type="text" id="myusername"></td>
    </tr>
    <tr>
    <td>Password</td>
    <td>:</td>
    <td><input name="mypassword" type="password" id="mypassword"></td>
    </tr>
    <tr>
    <td>&nbsp;</td>
    <td>&nbsp;</td>
    <td><input type="submit" name="Submit" value="Login"></td>
    </tr>
    </table>
    </td>
</form>
</tr>
</table>
</div>
</div> 
```

base_url() 在 Config.php 中指定

```
$config['base_url'] = 'http://localhost:81/myPro/'; 
```

尝试发布此表单时，出现错误 - “NetworkError：500 Internal Server Error，我是 php codeigniter 的新手，谢谢帮助

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:29:44.630

我认为您错过了加载 url 帮助文件。在 config/autoload.php 中加载 url 帮助程序，它应该可以按预期工作。

添加 url helper 的代码如下所示：

`$autoload['helper'] = array('url');`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:06:28.927

使用 url 帮助函数 site_url()，这是正确的函数。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-04-01T09:04:52.467

Try replacing `base_url()` with `site_url()`

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-21T06:10:48.500

我认为这是您的 url 助手问题。您尝试在 url_helper.php 中分配它，您也可以在 config/autoload.php 文件中执行相同的工作。您可以将此代码添加到您的 autoload.php

$autoload['helper'] = array('url');

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-02-19T09:04:39.803

CodeIgniter 在你使用表单助手时会自动将 base_url 添加到表单的操作中。

例如，您可以使用：

```
<?=form_open('main/login'); ?> 
```

这将产生：http//example.com/main/login

和正确的网址！很简单！:D 更多信息请访问：[http ://ellislab.com/codeigniter/user_guide/helpers/form_helper.html](http://ellislab.com/codeigniter/user_guide/helpers/form_helper.html)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T12:18:07.963

确保你导入了库并确保你已经找到了正确的目录结构和控制器。对于初学者来说，这可能会很棘手。

# objective-c - 为 tableView 注册 nib 名称

> ID：15360694
> 
> 赞同：18
> 
> 时间：2013-03-12T12:03:49.390
> 
> 标签：objective-c, xcode, uitableview

```
static NSString *cellIdentifier = @"cell";
if (tableView ==tableview1) 
{
    ContactCustom *cell1=(ContactCustom *) [tableView dequeueReusableCellWithIdentifier:cellIdentifier];        
    if (cell1 == nil) 
    {
        [[NSBundle mainBundle] loadNibNamed:@"ContactCustom" owner:self options:nil];
        cell1 = contactCustom;
    }
} 
```

如何`viewDidLoad`在调用`cellForRowAtIndex`方法之前在方法中注册笔尖名称？

* * *

## 回答 #1

> 赞同：35
> 
> 时间：2013-09-19T09:41:26.043

```
-(void)viewDidLoad
{
   [super viewDidLoad];
   [self.tableView registerNib:[UINib nibWithNibName:@"cell" bundle:nil] 
   forCellReuseIdentifier:@"cell"];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T12:16:47.710

Apple 在 IOS 5 之后为 UITableView 提供了注册 nib 方法请查看类参考 [http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableView_Class/Reference/Reference.html)

前任：

```
 In view did load you can register nib for UITableView like below
     [tableView registerNib:[UINib nibWithNibName:@"nibName" bundle:nil] forCellReuseIdentifier:@"identifienName"];

      In cellForRowAtIndexPath
      cell =  [tableView dequeueReusableCellWithIdentifier:@"identifienName"]; 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2019-01-15T14:04:46.983

对于斯威夫特

```
tableViewSubCategory.register(UINib(nibName: "", bundle: nil), forCellReuseIdentifier: "") 
```

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2018-04-05T10:26:36.400

```
 (void)viewDidLoad
{
   [super viewDidLoad];
    [_tbl_setpaper registerNib:[UINib nibWithNibName:@"SetPaperCell" bundle:nil] forCellReuseIdentifier:@"Cell"];
} 
```

只需在您的 viewdidload 中放入 oneline，您必须有 table outlet、cell 标识符、cell 类。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-10-17T18:05:18.503

见这里： http: [//mrmaksimize.com/Custom-UITableViewCell-With-NIB/](http://mrmaksimize.com/Custom-UITableViewCell-With-NIB/)

```
 - (void)viewDidLoad
    {
        [super viewDidLoad];
        [self.tableView registerNib:[UINib nibWithNibName:@"EXCustomCell"
                             bundle:[NSBundle mainBundle]]
             forCellReuseIdentifier:@"CustomCellReuseID"];
    } 
```

稍后在代码中：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"CustomCellReuseID";
    EXCustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    // Configure the cell...
    [cell.cellItemImage setImage:[UIImage imageNamed:@"glyphicons_428_podium"]];
    [cell.cellItemLabel setText = @"Mr Burns."];
    return cell;
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-03-12T12:11:58.597

```
static NSString *cellIdentifier = @"cell";
if (tableView ==tableview1) 
{
    ContactCustom *cell1=(ContactCustom *) [tableView dequeueReusableCellWithIdentifier:cellIdentifier];        
    if (cell1 == nil) 
    {
        cell1 = [tableview dequeueReusableCellWithReuseIdentifier:cellIdentifier forIndexPath:indexPath]; 

    }
} 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-03-12T12:34:14.933

```
// First of all Declare an IBOutlet for your customCell in Your View Controller
IBOutlet ScoreCell *scoreCell;
// Synthesize it.
// Assign your view controller class to File Owner of your custom cell (Eg. File Owner of ScoreCell.xib)
// Then Assign Reference Outlet of ScoreCell.xib with Object 'scoreCell'
// Finally Create your custom Cell as follow :

ScoreCell *cell = (ScoreCell *)[tableView dequeueReusableCellWithIdentifier:simpleTableIdentifier];
if (cell == nil) {
    NSArray *nib = [[NSBundle mainBundle] loadNibNamed:nibName owner:self options:nil];
    cell = [nib objectAtIndex:0];
} 
```

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-12T12:34:29.740

将包含单元格的 nib 对象注册到指定标识符下的表格视图中。

```
- (void)registerNib:(UINib *)nib forCellReuseIdentifier:(NSString *)identifier
Parameters 
```

**nib** 指定用于创建单元格的 nib 文件的 nib 对象。此参数不能为 nil。 **标识符** 单元的重用标识符。此参数不得为 nil，也不得为空字符串。

这个[文档](http://developer.apple.com/library/ios/#documentation/userexperience/conceptual/tableview_iphone/TableViewCells/TableViewCells.html#//apple_ref/doc/uid/TP40007451-CH7-SW1)可以帮助你很多

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2018-03-24T08:06:49.923

> UINib *cellNib = [UINib nibWithNibName:@"Custom_cellTableViewCell" bundle:nil]; [self.tableView registerNib:cellNib forCellReuseIdentifier:@"Custom_cellTableViewCell"];

此代码工作正常

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-12-03T06:57:30.613

***对于目标-C***

```
//First TableView Declaration:
self.customTableView = [[UITableView alloc]initWithFrame:tableFrame style:UITableViewStylePlain];

//Then Nib Registration Registration:
[self.customTableView registerNib:[UINib nibWithNibName:@"CustomCell" bundle:nil]  forCellReuseIdentifier:@"customCellIdentifier"];

//Then Adding Tableview to self.view
[self.view addSubview: _customTableView]; 
```

# django - 如何以表单提交方式将此 URL 从 django 发送到视图？

> ID：15360695
> 
> 赞同：0
> 
> 时间：2013-03-12T12:03:55.607
> 
> 标签：django

我`new_password.html`在 Django 下有一个这样的 URL：

```
http://127.0.0.1:8000/new_password/zBfPGsMBWbAPVXeH6FMMrpDAODd4Cbukc6ca0ddb55be603a46c977f6d08feb9e763ef583c9f1f9d7d0ba88bb32b6368bebc9c96075185beb/hello.technerves@gmail.com 
```

当用户在表单中按下提交按钮时，我希望这个 URL 可以`update`在 Django 中查看。是否可以？

```
url(r'^new_password', 'fileupload.views.new_password'),
url(r'^update_password', 'fileupload.views.update_password'),

def new_password(request):
    return render_to_response('new_password.html',
        context_instance=RequestContext(request))

def update_password(request): 
    ...This is where I want to get the URL parameter. 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:54:27.583

一种选择是简单地拆分路径并检索列表中的最后一项。如果您在 POST 中提交值，例如使用名为“url”的隐藏字段，您可以执行以下操作：

```
def my_view(request):
    if request.method == 'POST':
        email = request.POST.get('url').split('/')[-1]
        ... 
```

这假设原始问题中 url 的整个值是“url”表单字段的值。

# jquery - jQuery focusout 事件数据没有通过，为什么？

> ID：15360697
> 
> 赞同：0
> 
> 时间：2013-03-12T12:04:05.150
> 
> 标签：jquery

下一个代码不能正常工作：

```
 jQuery(this).focusout({ currObj : currEditableObj},cancelRename(event));

function cancelRename(event){
    var currObj = event.data.currObj;
    currObj.removeClass("focusedEditableDiv");
    currObj.parent().find('.renamePanel').hide();
} 
```

我希望能够使用 currObj 但该事件根本没有 event.data 。我究竟做错了什么 ？

编辑：我注意到在“事件”上使用调试器时，它说它是一个 MouseEvent

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:20:41.273

试试这个并检查它是否正常工作

```
currObj.focusout(cancelRename); 
```

有关 jQuery.focuout**[陈词滥调的更多信息，请点击此处](http://api.jquery.com/focusout/)**

# war - Gradle ear 放的是 JAR 而不是 WAR

> ID：15360703
> 
> 赞同：22
> 
> 时间：2013-03-12T12:04:18.227
> 
> 标签：war, gradle, ear

我正在尝试使用 Gradle建立一个**耳朵。**
我的项目树如下：

```
/project
|
|--> /web-application
|    |
|    |--> /src (stuff of web app)
|    |
|    |--> build.gradle
|
|--> build-gradle
|--> settings.gradle 
```

我正在尝试使用**ear 插件**生成 ear ，但是当我这样做时，我在*web-application的**build*目录下创建`gradle assemble`了**war**，但是在生成的**ear**中，我有一个web 应用程序的**jar**。gradle 配置文件非常简单，这里是：

 *******项目/build.gradle*

```
apply plugin: 'ear'

repositories {
    mavenCentral()
}

dependencies {
    deploy project(':web-application')
    earlib group: 'log4j', name: 'log4j', version: '1.2.15', ext: 'jar'
} 
```

*项目/网络应用程序/build.gradle*

```
apply plugin: 'war'

repositories {
   mavenCentral()
}

dependencies {
    compile group: 'log4j', name: 'log4j', version: '1.2.15', ext: 'jar'
} 
```

我做错了什么？

我注意到war插件的捆绑样本也有同样的问题......在此先感谢

* * *

## 回答 #1

> 赞同：33
> 
> 时间：2013-03-12T13:51:15.820

解决了！

它需要将 EAR 项目中的 WAR 模块配置为：

```
dependencies {
    deploy project(path:':web-application', configuration:'archives')
    earlib group: 'log4j', name: 'log4j', version: '1.2.15', ext: 'jar'
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-12-23T06:38:41.403

You can avoid specifying a configuration for each *deploy* dependency using something like this:

```
allprojects {
  plugins.withType(WarPlugin) {
    // Set default configuration as WAR archive if WAR plugin is used
    configurations {
      'default' {
        extendsFrom = [archives]
      }
    }
  }
}

...

dependencies {
  deploy project(':web-application')
} 
```******

# mysql - Select in select - 每个派生表都必须有自己的别名错误

> ID：15360710
> 
> 赞同：1
> 
> 时间：2013-03-12T12:04:30.087
> 
> 标签：mysql, select, correlated-subquery

我正在尝试从数据库中获取有关按日期分组的订单的信息。我有表 sales_flat_order，其中有它的 id、订单创建日期、total_paid for order 和 order item count。我有表 sales_flat_order_item 订单商品的价格在哪里。

我创建了脚本来按天获取订单信息：

```
SELECT 
    DATE( sales_flat_order.created_at ) AS date,
    SUM( sales_flat_order.total_paid ) AS sales,
    SUM( sales_flat_order.total_item_count ) AS items
FROM 
    sales_flat_order, 
    sales_flat_order_payment
WHERE 
    sales_flat_order.status = 'complete'
    AND sales_flat_order.entity_id = sales_flat_order_payment.parent_id
    AND sales_flat_order_payment.method = 'checkmo'
GROUP BY DATE( sales_flat_order.created_at )
WITH ROLLUP 
```

我得到：

```
DATE       SALES ITEMS
2013-03-05 72    3
2013-03-06 100   5 
```

我有脚本来计算中位数价格：

```
 SELECT 
    avg(t1.price) as median_val 
FROM 
    (
        SELECT 
            @rownum:=@rownum+1 as `row_number`, 
            d.price
            FROM 
                sales_flat_order_item d,  
                (SELECT @rownum:=0) r
            WHERE 1
            ORDER BY d.price
    ) as t1, 
    (   
        SELECT 
            count(*) as total_rows
        FROM 
            sales_flat_order_item d
        WHERE 1
    ) as t2
WHERE 1
    AND t1.row_number>=total_rows/2 
    and t1.row_number<=total_rows/2+1; 
```

现在我试图结合这两个脚本来获得：

```
 DATE       SALES ITEMS median_item_price
    2013-03-05 72    3     19
    2013-03-06 100   5     10.5 
```

组合脚本：

```
 SELECT 
    DATE( sales_flat_order.created_at ) AS date,
    SUM( sales_flat_order.total_paid ) AS sales,
    SUM( sales_flat_order.total_item_count ) AS items,
    sales_flat_order_item.price as median_item_price
FROM 
    sales_flat_order, 
    sales_flat_order_payment, 
    (
        SELECT 
            avg(t1.price) as median_val 
        FROM 
            (
                SELECT 
                    @rownum:=@rownum+1 as `row_number`, 
                    d.price
                FROM 
                    sales_flat_order_item d,  
                    (SELECT @rownum:=0) r
                WHERE 1
                ORDER BY d.price
            ) as t1, 
            (
                SELECT 
                    count(*) as total_rows
                FROM 
                    sales_flat_order_item d
                WHERE 1
            ) as t2
        WHERE 1
            AND t1.row_number>=total_rows/2 
            and t1.row_number<=total_rows/2+1
    ) as sales_flat_order_item
WHERE 
    sales_flat_order.status = 'complete'
    AND sales_flat_order.entity_id = sales_flat_order_payment.parent_id
    AND sales_flat_order_payment.method = 'checkmo' 
    AND DATE(sales_flat_order_item.created_at) = DATE(sales_flat_order.created_at)
GROUP BY DATE( sales_flat_order.created_at )
WITH ROLLUP 
```

并得到错误：#1248 - 每个派生表都必须有自己的别名

这是数据库：[http ://sqlfiddle.com/#!2/7dfec](http://sqlfiddle.com/#!2/7dfec)

任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-13T15:28:53.037

解决方案：

```
SELECT 
    DATE( sales_flat_order.created_at ) AS date,
    SUM( sales_flat_order.total_paid ) AS sales,
    SUM( sales_flat_order.total_item_count ) AS items,
    MAX( median.median_val ) as median_item_price
FROM 
    sales_flat_order, 
    sales_flat_order_payment,
    (
 SELECT DATE(sq.created_at) as median_date, avg(sq.price) as median_val FROM (
SELECT t1.row_number, t1.price, t1.created_at FROM(
SELECT IF(@prev!=d.created_at, @rownum:=1, @rownum:=@rownum+1) as `row_number`, d.price, @prev:=d.created_at AS created_at
FROM sales_flat_order_item d, (SELECT @rownum:=0, @prev:=NULL) r
ORDER BY d.price
) as t1 INNER JOIN  
(
  SELECT count(*) as total_rows, created_at 
  FROM sales_flat_order_item d
  GROUP BY created_at
) as t2
ON t1.created_at = t2.created_at
WHERE 1=1
AND t1.row_number>=t2.total_rows/2 and t1.row_number<=t2.total_rows/2+1
)sq
group by DATE(sq.created_at)
    ) as median
WHERE 
    sales_flat_order.status = 'complete'
    AND sales_flat_order.entity_id = sales_flat_order_payment.parent_id
    AND sales_flat_order_payment.method = 'checkmo'
    AND median.median_date = DATE( sales_flat_order.created_at )
GROUP BY DATE( sales_flat_order.created_at )
WITH ROLLUP 
```

# html - 使用简单 HTML DOM 解析器检索特定文本

> ID：15360714
> 
> 赞同：0
> 
> 时间：2013-03-12T12:04:33.070
> 
> 标签：html, parsing, dom

以以下为例

```
<div id="XYZ">
   <div id ="abc"></div>  
   Text 1
   <div id="efg"> Text 2 </div>
   Text 3
</div> 
```

如何使用简单的 HTML DOM 解析器检索文本 1 和文本 2。

如果我使用 `$text = $domOb->find(div[id=xyz])->plaintext;`

上面会给我全文。这件事我知道，但我被困在如何检索特定的文本部分。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:08:04.223

解决此问题的最简单方法是将所需文本包装在`<span>`标签中并为其提供自己的 ID。因为 span 不是块元素，所以它不会破坏 HTML 页面的布局。

# php - Laravel 4 中的行级 ACL

> ID：15360717
> 
> 赞同：0
> 
> 时间：2013-03-12T12:04:53.737
> 
> 标签：php, laravel, acl, laravel-4, row-level-security

是否可以在 Laravel 4 中创建行级身份验证？是否有任何捆绑或包装？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-08-14T14:08:46.717

你可以使用一个新的 Laravel 4 ACL 组件：

[https://github.com/Vivify-Ideas/laravel-acl](https://github.com/Vivify-Ideas/laravel-acl)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:31:59.763

我不知道有任何包裹。

为了更好地理解你的问题：我想你的意思是在你的表中添加一个 'group_id' 列的 'user_id' 并过滤这些？

[编辑] 如果是这种情况，您可以简单地添加`->where('user_id', '=', $user_id)`到您的查询中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-07T14:07:52.097

从 laravel 4 开始，不建议使用包，我们可以使用包。我还没有真正尝试过使用它，但它似乎可以工作： [单击此处](https://packagist.org/packages/alaxos/acl) 如果没有，您可以找到上述站点的所有大多数软件包。

您可以使用该特定包名称更新 composer.json 并使用

```
php composer.phar update 
```

请让我知道它是否有效:)

谢谢 ：）

# .net - IList 在什么时候导致查询在 ORM 中执行？

> ID：15360718
> 
> 赞同：0
> 
> 时间：2013-03-12T12:04:53.920
> 
> 标签：.net, linq, orm, telerik, telerik-open-access

我正在使用 Telerik 的 OpenAccess ORM，并且正在对生成的代码进行一些更改。对于具有导航属性（另一个表的键）的实体，这些属性会生成为 IList，如下所示：

```
private IList<SystemUser> _SystemUsers = new List<SystemUser>();
public virtual IList<SystemUser> SystemUsers 
{ 
    get
    {
        return this._SystemUsers;
    }
} 
```

首先，在什么时候`SystemUsers`实际查询数据库？它是一个 IList，所以我原以为这会在创建对象时针对数据库执行，但我知道事实并非如此。

我想要做的是过滤掉我所有生成的导航属性上的已删除项目，并且我一直在对 t4 模板进行更改以使用以下代码执行此操作：

```
private IList<SystemUser> _SystemUsers = new List<SystemUser>();

public virtual IList<SystemUser> SystemUsers 
{ 
    get
    {
        if (!Entities.IncludeDeletedEntities)
        {
            var currentContext = Entities.GetContext(this);
            ContextChanges changes = currentContext.GetChanges();
            IList<SystemUser> deletedItems = changes.GetDeletes<SystemUser>();
            return this._SystemUsers.Except(deletedItems).ToList(); //Question is here
        }

        return this._SystemUsers;
    }
} 
```

本质上，这只是返回集合减去标记为删除的集合。我关心的是`.ToList()`它何时执行。我不想通过`ToList()`每次访问时都对数据库进行查询来减慢查询速度`SystemUsers`，但我也想过滤我的项目。我什至不确定这`ToList()`是否会导致数据库命中。我不确定代码何时会真正命中数据库，因此我正在寻找一些帮助/提示来过滤掉我已删除的项目而不使其命中数据库，直到我`SystemUsers`通过添加更多过滤器（where 子句， ETC）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:21:34.737

我不能肯定地说 Telerik 工具，但会怀疑它们有点类似于 EF 和 LINQ to SQL，它们在调用 GetEnumerator（由 ToList 内部调用）时评估任何表达式。要自己进行测试，请使用分析工具来准确识别数据库请求的发出位置。SQL Profiler 和 Intellitrace 应该适用于分析。还有其他商业分析器可用，但我不确定 Telerik Open Access 有什么。您可能想查看他们的论坛。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T14:14:06.420

我不了解 OpenAccess，但我认为大致相同的原则适用于实体框架。从那个背景来看，我只看到您的代码存在重大问题。

第一个反对意见是从架构的角度来看的。您的实体对象不应该知道上下文的存在。

其他反对意见是技术性的。

*   正如您已经指出的那样，您的代码将在每次`SystemUsers`处理时执行。`ToList()`总是会导致数据库命中。我不确定如果删除 会发生什么`ToList()`，这取决于做什么`GetChanges`和`GetDeletes`做什么。我不知道。但至少每次`SystemUsers`枚举都会导致额外的数据库命中。

*   我假设，像 EF 一样，OpenAccess 也支持延迟加载标记为 的集合`virtual`。可能它创建了一个从实体类型派生的代理类型，并为导航属性添加了连接以实现延迟加载。由于该属性只有一个 getter，我假设 OpenAccess 通过`Add`向它添加项目来填充集合。这会导致各种副作用：

    1.  这意味着每次将项目添加到基础属性时都会访问（运行查询）。
    2.  您的代码返回一个临时列表。下次您处理该物业时，任何添加的项目都将消失！！该集合永远不会被填充。
*   最后，当您的对象正在物化时打开第二个阅读器时，它可能会导致不可预知的行为。

因此，我认为您应该通过存储库来解决软删除问题，该存储库返回带有或不带有标记为删除的实体的实体。或者，也许您可​​以创建一个计算的（未映射的）属性，该属性返回没有“已删除”的 SystemUsers。

# x++ - Box::info 显示“refreshEx”

> ID：15360719
> 
> 赞同：2
> 
> 时间：2013-03-12T12:04:53.990
> 
> 标签：x++, axapta

我有一个使用语法显示验证结果的方法

```
Box::info(message,title); 
```

但是，我第一次运行代码时，它会显示正确的标题，但会显示消息***refreshEx***。

调试代码，正在使用的消息是正确的，***Valid Account Number***，但显示的是***refreshEx***。如果我重新运行该过程，则会显示正确的消息，这只会在**第**一次发生。

以防万一，流程很重要

```
Form - DoValidation method creates Class to call...
Class - public AccountValidation method that calls...
      - private displayValidation method that contains this code 
```

谢谢...

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-05-22T17:56:13.830

我在 AX 2009 安装中看到了这个错误（不幸的是），它是从表单中的按钮后面的代码启动的：

![AX2009 刷新EX 消息](../Images/1d19281d66bb61d4b5a871735fd16eea.png)

```
if(HIEItemOrderSetup.RMAvailable < HIEItemOrderSetup.RMQuantity)
{
    ok = DialogButton::Ok == box::okCancel("@HIE848",DialogButton::Ok,"@HIE849");
} 
```

据我所知，它仅在您的表单上有断点时发生，当您更新它时。删除断点将显示原始消息，或者至少这是我发现的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T16:17:50.883

如果消息包含数据库中的某些字段，请尝试在通过信息框显示值之前对数据源执行`reread()`或`refresh()`或`refreshEx()`方法（取决于上下文）。

可能是缓存数据在更新或插入后没有刷新。

编辑：

如果您要从事件中指定返回参数，请不要忘记这是一个**异步**过程。MSDN 上的一个例子：

[http://msdn.microsoft.com/en-us/library/gg843664.aspx](http://msdn.microsoft.com/en-us/library/gg843664.aspx)

# highcharts - 显示最上面的 y 轴点

> ID：15360720
> 
> 赞同：0
> 
> 时间：2013-03-12T12:04:56.210
> 
> 标签：highcharts, highstock

在下面的 jsfiddle 图中，正在生成采用高值和低值，但由于没有计算 y 轴最高点。 [http://jsfiddle.net/PrFch/](http://jsfiddle.net/PrFch/)

```
 ` Using this code the graph is being is generated so..
         minPadding:0,
        maxPadding:0,
        startOnTick: false,
        endOnTick: false` 
```

如下图所示，y 轴的最高值为 0.72，而该线远高于该点，即 0.74。如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:12:33.463

您应该将 showLastLabel 设置为 true [http://api.highcharts.com/highstock#yAxis.showLastLabel](http://api.highcharts.com/highstock#yAxis.showLastLabel)

# objective-c - 在当前时间创建 AVPlayer 的缩略图或图像

> ID：15360721
> 
> 赞同：21
> 
> 时间：2013-03-12T12:04:58.920
> 
> 标签：objective-c, xcode, ipad

我已经实现了一个`AVPlayer`，并且我想在单击工具栏按钮时拍摄图像或缩略图并`UIViewController`用`UIImageView`. 图像应该完全像`AVPlayer`. 已经在`segue`工作，我只需要实现我在当前播放时间获取图像。

谢谢！

* * *

## 回答 #1

> 赞同：54
> 
> 时间：2013-03-12T12:28:45.817

**Objective-C**

```
AVAsset *asset = [AVAsset assetWithURL:sourceURL];
AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc]initWithAsset:asset];
CMTime time = CMTimeMake(1, 1);
CGImageRef imageRef = [imageGenerator copyCGImageAtTime:time actualTime:NULL error:NULL];
UIImage *thumbnail = [UIImage imageWithCGImage:imageRef];
CGImageRelease(imageRef);  // CGImageRef won't be released by ARC 
```

**迅速**

```
var asset = AVAsset.assetWithURL(sourceURL)
var imageGenerator = AVAssetImageGenerator(asset: asset!)
var time = CMTimeMake(1, 1)
var imageRef = try! imageGenerator!.copyCGImageAtTime(time, actualTime: nil)
var thumbnail = UIImage.imageWithCGImage(imageRef)
CGImageRelease(imageRef) // CGImageRef won't be released by ARC 
```

**斯威夫特 3.0**

```
var sourceURL = URL(string: "Your Asset URL")
var asset = AVAsset(url: sourceURL!)
var imageGenerator = AVAssetImageGenerator(asset: asset)
var time = CMTimeMake(1, 1)
var imageRef = try! imageGenerator.copyCGImage(at: time, actualTime: nil)
var thumbnail = UIImage(cgImage:imageRef) 
```

> **注意：**根据您的 swift 版本解释 Swift 代码。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T12:15:41.807

试试这个

```
 - (UIImage*)takeScreeenShot {

 AVURLAsset *asset = [[AVURLAsset alloc] initWithURL:vidURL
 options:nil];

 AVAssetImageGenerator *imageGenerator = [[AVAssetImageGenerator alloc] initWithAsset:asset];

 imageGenerator.appliesPreferredTrackTransform = YES;

 NSError *err = NULL;

 CMTime time = CMTimeMake(1, 60); // time range in which you want
 screenshot

 CGImageRef imgRef = [imageGenerator copyCGImageAtTime:time actualTime:NULL
 error:&err];

 return [[UIImage alloc] initWithCGImage:imgRef];

 } 
```

希望这可以帮助 ！！！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-06-22T21:05:02.150

斯威夫特 2.x：

```
let asset = AVAsset(...)
let imageGenerator = AVAssetImageGenerator(asset: asset)
let screenshotTime = CMTime(seconds: 1, preferredTimescale: 1)
if let imageRef = try? imageGenerator.copyCGImageAtTime(screenshotTime, actualTime: nil) {

    let image = UIImage(CGImage: imageRef)

    // do something with your image
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2016-12-17T09:10:57.967

添加以下代码以从视频生成缩略图。

```
AVURLAsset *assetURL = [[AVURLAsset alloc] initWithURL:partOneUrl options:nil]; 

AVAssetImageGenerator *assetGenerator = [[AVAssetImageGenerator alloc] initWithAsset:assetURL]; 

assetGenerator.appliesPreferredTrackTransform = YES;  

NSError *err = NULL; 

CMTime time = CMTimeMake(1, 2);     

CGImageRef imgRef = [assetGenerator copyCGImageAtTime:time actualTime:NULL error:&err]; 

UIImage *one = [[UIImage alloc] initWithCGImage:imgRef]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2018-03-16T07:30:17.460

这就是我如何在 Swift 场景中拍摄当前可见帧的方法：

关键是

1.  获取类型为播放器的当前时间`CMTime`
2.  将该时间转换为类型的秒数`Float64`
3.  将 secondss 切换回`CMTime`using `CMTimeMake`。第一个参数应该是秒数的位置`Int64`

代码：

```
var myImage: UIImage?

guard let player = player else { return }

let currentTime: CMTime = player.currentTime() // step 1.
let currentTimeInSecs: Float64 = CMTimeGetSeconds(currentTime) // step 2.
let actionTime: CMTime = CMTimeMake(Int64(currentTimeInSecs), 1) // step 3.

let asset = AVAsset(url: fileUrl)
let imageGenerator = AVAssetImageGenerator(asset: asset)
imageGenerator.appliesPreferredTrackTransform = true // prevent image rotation

do{
    let imageRef =  try imageGenerator.copyCGImage(at: actionTime, actualTime: nil)

     myImage = UIImage(cgImage: imageRef)
}catch let err as NSError{
    print(err.localizedDescription)
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-10-08T13:33:40.000

用于从视频生成缩略图的 Swift 扩展

```
extension AVPlayer {
    func generateThumbnail(time: CMTime) -> UIImage? {
        guard let asset = currentItem?.asset else { return nil }
        let imageGenerator = AVAssetImageGenerator(asset: asset)

        do {
            let cgImage = try imageGenerator.copyCGImage(at: time, actualTime: nil)
            return UIImage(cgImage: cgImage)
        } catch {
            print(error.localizedDescription)
        }

        return nil
    }
} 
```

# node.js - 无法在 mongodb collection.find 中获得计数

> ID：15360722
> 
> 赞同：0
> 
> 时间：2013-03-12T12:05:09.600
> 
> 标签：node.js, mongodb, mongoose

我正在将猫鼬 ODM 用于应用程序。我正在尝试计算模型返回的项目数，如下所示：

```
 app.post("/verifyLogin",function(request,response){
var usr=request.body.username;
var pass=request.body.password;

response.send(userModel.find({$and:[{username:"admin"},{password:"admin"}]}).count());

}); 
```

但我得到回报：

```
 {
  "options": {
    "populate": {}
  },
  "_conditions": {
    "$and": [
      {
        "username": "admin"
      },
      {
        "password": "admin"
      }
    ]
  },
  "_updateArg": {},
  "op": "count"
} 
```

我期待一个数字:(

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:09:34.230

这样做的一种方法是使用`Model.count`方法，在你的情况下：

```
userModel.count({$and:[{username:"admin"},{password:"admin"}]}, function(err, result) {
    if (err) {
       //handle errors
    } else {
       response.send({count :result});
    }
}); 
```

另外：您在 node.js 世界中 - 使用回调。

您现在得到的结果是`count`调用结果的`Model.find()`结果（我认为它是一个查询对象），而不是查询结果的计数。

# razor - 我可以在 @Html.Partial(..) 中使用 Nancy razor @section 吗？

> ID：15360724
> 
> 赞同：2
> 
> 时间：2013-03-12T12:05:10.710
> 
> 标签：razor, nancy

我成功地使用了 Nancy Razor 引擎。我有一个布局，它为我的 javascript 和我的CSS 文件`_Master.cshtml`定义了一个剃刀。`@section``@Html.Partial()`

这一切都很好。

**编辑 1** 有关更多有用信息，请参见此处，包括解决问题的简洁扩展方法：

*   [从部分填充剃刀部分](https://stackoverflow.com/q/5355427/776476)

**_主布局**

```
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<dynamic>
<!DOCTYPE html>
<html lang="en">
    <head>
        //Head stuff
        @RenderSection("CSS", required: false)
    </head>
    <body>
        //Body Stuff
        @RenderBody()
        @RenderSection("Partial", required: false)
        @RenderSection("JS", required: false)
    </body> 
</html> 
```

**示例视图**

```
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<dynamic>
@{
    Layout = "_Master.cshtml";
}

// View HTML

@section Partial{
    @Html.Partial("Modal/FindWizard")
}

@section JS{
    <script src="/Scripts/Coffee/example.view.min.js"> </script>
} 
```

您可以从上面的示例视图中看到我已经包含了一个`Partial`名为*FindWizard*。我希望这个文件也能利用 _Master Layout 中定义的剃须刀部分。

像这样的东西：

**带有@sections 的 FindWizard Partial**

```
@inherits Nancy.ViewEngines.Razor.NancyRazorViewBase<dynamic>

<div>
    //.. Wizard HTML
</div>

@section CSS{
    <link href="/Content/css/bootstrap-wizard.css" rel="stylesheet" />
}

@section JS{
    <script src="/Scripts/min/bootstrap-wizard.min.js"></script>
} 
```

我已经尝试过了，但我无法从 Partial 文件中获取剃刀 @sections 以呈现到最终响应中。

这种技术可行吗？也许这是一个简单的*坏主意*，因为如果在同一视图中重新使用 Partial 可能会导致包含重复的 js 文件？

谢谢

# kendo-ui - Kendo Grid 自定义弹出编辑器和验证

> ID：15360726
> 
> 赞同：2
> 
> 时间：2013-03-12T12:05:11.873
> 
> 标签：kendo-ui

我有这个简单的剑道模板脚本：

```
<!-- popup editor template -->
<script id="userEditor" type="text/x-kendo-template">

   <div id="popServerErrorSummaryPlaceholder" style="display:none"></div>

   <div class="control-row">
      <label class="span2" for="FirstName">Vorname</label>
      <input Id="FirstName" class="span4" data-bind="value:FirstName" maxlength="50" name="FirstName" required="true" type="text" />
      <span class="k-invalid-msg" data-for="FirstName"></span>
   </div>

   <div class="control-row">
      <label class="span2" for="LastName">Nachname</label>
      <input Id="LastName" class="span4" data-bind="value:LastName" maxlength="50" name="LastName" required="true" type="text" />
      <span class="k-invalid-msg" data-for="LastName"></span>
   </div>

</script> 
```

在 Kend-UI 网格中编辑单行时使用。我现在有两个问题：

a）[文档](http://docs.kendoui.com/documentation/getting-started/framework/validator/overview#customizing-the-tooltip-position) 声明我可以通过具有类“k-invalid-msg”的“span”元素控制验证消息的位置。现在的行为是这个 span 元素被替换为 div 元素，并且它位于 label 元素的下方。我想在输入旁边得到消息。

b) 显示弹出窗口时立即触发验证。应在离开输入或单击“更新”按钮时触发验证。

有人可以在这里帮助我吗？

我不太确定如何处理的事情：

c) 在服务器上执行一些验证。我通过 DataSource 错误事件（自定义 JSON，它基本上是字段名称和相关错误消息的列表）将它们返回到浏览器。我想在验证范围内显示错误消息。我可以创建自定义验证规则，如此[处所述](http://docs.kendoui.com/api/framework/validator)。

如何获取与弹出编辑器窗口关联的验证器？或者是否有创建验证器的 foreach 输入？

以前有人这样做过吗？

谢谢你的帮助！

更新：

关于点 a) OnaBai 为我指出了正确的[方向](https://stackoverflow.com/a/15136842/1802671)。感谢那。

# php - 在 jQuery 自动完成中解析

> ID：15360728
> 
> 赞同：0
> 
> 时间：2013-03-12T12:05:15.463
> 
> 标签：php, jquery, autocomplete

我从 MySQL 查询中生成了一些数据，我想做两件事。数据是名称和 ID 的数组。

首先，我想将名称部分用于 jQuery 自动完成功能，以便您可以在字段中选择名称。其次，我想在自动完成中触发选择，将所选项目的 ID 放入隐藏字段中。

这是我的jQuery：

```
 $("#contact").autocomplete(
                source: function(request, response){
                                $.ajax({
                                         url: "ajax/grabdata.php?",
                                         type: "GET",
                                         data: request,
                                         success: function (data) {
                                             response($.map(data, function (el) {
                                                 return {
                                                     label: el.item.name,
                                                     value: el.item.id
                                                 };
                                             }));
                                         }
                                     });
                            },
                            width: 260,
                            matchContains: true,
                            selectFirst: false,
                            select: function(event, ui){
                                    $('#contact').val(ui.label);
                                    $('#id').val(ui.value);
                            }
                    }); 
```

这是我在 PHP (grabdata.php) 中抓取数据的方式：

```
 $sql = "SELECT DISTINCT contacts.id, contacts.firstname, contacts.lastname FROMcontacts WHERE (firstname LIKE '%$q%' OR lastname LIKE '%$q%')";
      $rsd = mysql_query($sql);
      while($rs = mysql_fetch_array($rsd)) {
      $kdata[] = array(
            "name" => $rs['firstname'].' '.$rs['lastname']."\n",
            "id" => $rs['ID']."\n",
      );
      $dataset[] = $kdata;
      } 
```

我可以获取数据，但无法将其解析为我想要的数据。名称应该可以在自动完成字段中选择，ID 应该根据选择的名称填写。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:23:29.267

据我所见，您没有按照应有的方式使用 select 方法参数：

```
 select: function(event, ui){
        $('#contact').val(ui.item.label);
        $('#id').val(ui.item.value);
    } 
```

您缺少“.item”。检查文档：http: [//jqueryui.com/autocomplete/#remote](http://jqueryui.com/autocomplete/#remote)

# symfony - 如何将奏鸣曲管理包与 twitter 引导布局集成

> ID：15360729
> 
> 赞同：4
> 
> 时间：2013-03-12T12:05:19.553
> 
> 标签：symfony, twitter-bootstrap, symfony-sonata, sonata-admin

我已经使用 SonataAdminBundle 安装了 Symfony 2.2，并且我有一个支持 twitter 引导程序的布局。现在我想将此布局集成到我的奏鸣曲管理员中。

我找到[了这段代码](https://github.com/sonata-project/sonata-bootstrap-theme)，但我找不到任何文档。所以我想问几个问题：

1.  如何`sonata-bootstrap-theme`在 symfony中安装和配置
2.  如何使用或不使用签名将 twitter 引导布局集成到奏鸣曲管理包中`sonata-bootstrap-theme`

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-08T09:29:34.240

您可以在您的`sonata_admin.yml`

# r - 如何防止 R 中的命名空间污染

> ID：15360730
> 
> 赞同：1
> 
> 时间：2013-03-12T12:05:21.130
> 
> 标签：r, namespaces, scope

这是一种情况，我有一个定义函数的文件，我们称之为它`tmpFunctions.R`和一个使用它的文件（我们称之为它`tmpRunner.R`）。函数 in**无意中**`tmpFunctions.R`使用了一个从未在其中定义但在全局范围中定义的变量。由于在调用函数时，该变量已经存在于全局分数中，因此解释器不会发出任何错误，程序运行顺利，但会产生错误的结果。这是一个例子：**`tmpRunner.R``tmpRunner.R`**

 **tmpFuncitons.R:

```
my.func <- function(x){
  return(X * 2) # typo; should be error
} 
```

tmpRunner

```
source('tmpFunctions.R')
X <- 10  #calling my.func(...) from this point on will not cause runtime errors
for(i in seq(10)){
  print(sprintf('%s ==> %s', i, my.func(i)))
} 
```

输出：

```
> source('C:/tmp/tmpRunner.R')
[1] "1 ==> 20"
[1] "2 ==> 20"
[1] "3 ==> 20"
[1] "4 ==> 20"
[1] "5 ==> 20"
[1] "6 ==> 20"
[1] "7 ==> 20"
[1] "8 ==> 20"
[1] "9 ==> 20"
[1] "10 ==> 20" 
```

有没有办法通过类似于 Perl 的东西来防止这种情况`use strict`，将函数导入`tmpFunctions.R`而不将它们暴露在全局范围内（很可能不是）？

我还尝试寻找 R 的源代码静态分析工具（在运行代码之前获取警告消息），但什么也找不到。**

# visual-studio-2012 - 适用于 Visual Studio 2012 的 jsDoc 智能感知

> ID：15360732
> 
> 赞同：6
> 
> 时间：2013-03-12T12:05:22.080
> 
> 标签：visual-studio-2012, jsdoc, web-essentials

Visual Studio 2012 的 Web Essentials 表示它支持 jsDoc intellisense，但我看不到任何启用它的选项，而且它似乎没有做任何事情。

任何想法如何打开它？或者任何人都可以建议一个替代扩展？

非常感谢，

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T14:40:44.020

它对我来说似乎工作正常：

![在此处输入图像描述](../Images/9daed3c3c8ff9d056ead5becc5c6254c.png)

我刚刚通过点击[此处](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)到[此处](http://usejsdoc.org/about-getting-started.html)的链接并制作了第一个示例的（稍作修改的）测试文件进行了测试。我不知道是否支持整个 JsDoc 功能范围。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-15T09:42:02.187

它现已发布（05/05/2013）：http: [//visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6](http://visualstudiogallery.msdn.microsoft.com/07d54d12-7133-4e15-becb-6f451ea3bea6)

# php - 詹金斯-乔布斯失败

> ID：15360733
> 
> 赞同：8
> 
> 时间：2013-03-12T12:05:22.613
> 
> 标签：php, jenkins

我已经设置了一个运行 Jenkins 的 uberSVN 服务器来控制一个带有 PHP-WebWare 的 SVN 存储库。

几个小时以来，我一直在遇到问题并寻找解决方案。现在我希望这是最后一个，但我没有找到任何答案：

```
Publishing Clover coverage report...
Publishing Clover HTML report...
Publishing Clover XML report...
Publishing Clover coverage results...
[htmlpublisher] Archiving HTML reports...
[htmlpublisher] Archiving at BUILD level /opt/ubersvn/jenkins/workspace/JenkinsTest/build/api to /opt/ubersvn/jenkins/jobs/JenkinsTest/builds/2013-03-12_12-56-15/htmlreports/API_Documentation
ERROR: Directory '/opt/ubersvn/jenkins/workspace/JenkinsTest/build/api' exists but failed copying to '/opt/ubersvn/jenkins/jobs/JenkinsTest/builds/2013-03-12_12-56-15/htmlreports/API_Documentation'.
ERROR: This is especially strange since your build otherwise succeeded.
Build step 'Publish HTML reports' changed build result to FAILURE 
```

这里是 Jenkins.log

```
12.03.2013 12:56:17 hudson.model.Run run
INFO: JenkinsTest #37 main build action completed: SUCCESS 
```

谁能告诉我这里的问题是什么？

编辑：这里-为了更好的分析-完整的日志

```
Building in workspace /opt/ubersvn/jenkins/workspace/JenkinsTest
Cleaning up /opt/ubersvn/jenkins/workspace/JenkinsTest/.
Deleting /opt/ubersvn/jenkins/workspace/JenkinsTest/./cache.properties
Deleting /opt/ubersvn/jenkins/workspace/JenkinsTest/./build/API_Documentation
Deleting /opt/ubersvn/jenkins/workspace/JenkinsTest/./build/api
Deleting /opt/ubersvn/jenkins/workspace/JenkinsTest/./build/code-browser
Deleting /opt/ubersvn/jenkins/workspace/JenkinsTest/./build/coverage
Deleting /opt/ubersvn/jenkins/workspace/JenkinsTest/./build/logs
Deleting /opt/ubersvn/jenkins/workspace/JenkinsTest/./build/pdepend
Deleting /opt/ubersvn/jenkins/workspace/JenkinsTest/./build/phpdox
Updating http://svn.xyz.de:80/JenkinsTest/trunk
At revision 25
no change for http://svn.xyz.de:80/JenkinsTest/trunk since the previous build
[JenkinsTest] $ ant
Unable to locate tools.jar. Expected to find it in /opt/ubersvn/jre1.6.0_24-64/lib/tools.jar
Buildfile: /opt/ubersvn/jenkins/workspace/JenkinsTest/build.xml

clean:

prepare:
    [mkdir] Created dir: /opt/ubersvn/jenkins/workspace/JenkinsTest/build/api
    [mkdir] Created dir: /opt/ubersvn/jenkins/workspace/JenkinsTest/build/API_Documentation
    [mkdir] Created dir: /opt/ubersvn/jenkins/workspace/JenkinsTest/build/code-browser
    [mkdir] Created dir: /opt/ubersvn/jenkins/workspace/JenkinsTest/build/coverage
    [mkdir] Created dir: /opt/ubersvn/jenkins/workspace/JenkinsTest/build/logs
    [mkdir] Created dir: /opt/ubersvn/jenkins/workspace/JenkinsTest/build/pdepend
    [mkdir] Created dir: /opt/ubersvn/jenkins/workspace/JenkinsTest/build/phpdox

lint:
    [apply] No syntax errors detected in /opt/ubersvn/jenkins/workspace/JenkinsTest/src/index.php
    [apply] No syntax errors detected in /opt/ubersvn/jenkins/workspace/JenkinsTest/tests/bootstrap.php

phploc:
     [exec] phploc 1.7.4 by Sebastian Bergmann.
     [exec] 
     [exec] Lines of Code (LOC):                                  2
     [exec]   Cyclomatic Complexity / Lines of Code:           0.00
     [exec] Comment Lines of Code (CLOC):                         0
     [exec] Non-Comment Lines of Code (NCLOC):                    2
     [exec] 
     [exec] Namespaces:                                           0
     [exec] Interfaces:                                           0
     [exec] Traits:                                               0
     [exec] Classes:                                              0
     [exec]   Abstract:                                           0 (0.00%)
     [exec]   Concrete:                                           0 (0.00%)
     [exec]   Average Class Length (NCLOC):                       0
     [exec] Methods:                                              0
     [exec]   Scope:
     [exec]     Non-Static:                                       0 (0.00%)
     [exec]     Static:                                           0 (0.00%)
     [exec]   Visibility:
     [exec]     Public:                                           0 (0.00%)
     [exec]     Non-Public:                                       0 (0.00%)
     [exec]   Average Method Length (NCLOC):                      0
     [exec]   Cyclomatic Complexity / Number of Methods:       0.00
     [exec] 
     [exec] Anonymous Functions:                                  0
     [exec] Functions:                                            0
     [exec] 
     [exec] Constants:                                            0
     [exec]   Global constants:                                   0
     [exec]   Class constants:                                    0

pdepend:
     [exec] PHP_Depend 1.1.0 by Manuel Pichler
     [exec] 
     [exec] Parsing source files:
     [exec] .                                                                1
     [exec] 
     [exec] Executing Coupling-Analyzer:
     [exec] .     0
     [exec] 
     [exec] Executing CyclomaticComplexity-Analyzer:
     [exec] .     0
     [exec] 
     [exec] Executing Dependency-Analyzer:
     [exec] .     0
     [exec] 
     [exec] Executing Inheritance-Analyzer:
     [exec] .     0
     [exec] 
     [exec] Executing NodeCount-Analyzer:
     [exec] .     0
     [exec] 
     [exec] Executing NodeLoc-Analyzer:
     [exec] .     0
     [exec] 
     [exec] Generating pdepend log files, this may take a moment.
     [exec] 
     [exec] Time: 00:00; Memory: 7.75Mb

phpmd-ci:

phpcs-ci:

phpcpd:
     [exec] phpcpd 1.4.0 by Sebastian Bergmann.
     [exec] 
     [exec] 0.00% duplicated lines out of 2 total lines of code.
     [exec] 
     [exec] Time: 0 seconds, Memory: 2.25Mb

phpdox:
     [exec] phpdox 0.4.0 - Copyright (C) 2010 - 2012 by Arne Blankerts
     [exec] 
     [exec] 
     [exec] An error occured while trying to load the configuration file:
     [exec]     None of the candidate files found
     [exec] 
     [exec] Using --skel might get you started.
     [exec] 
     [exec] Result: 3

phpunit:
     [exec] hiPHPUnit 3.7.18 by Sebastian Bergmann.
     [exec] 
     [exec] Configuration read from /opt/ubersvn/jenkins/workspace/JenkinsTest/phpunit.xml.dist
     [exec] 
     [exec] 
     [exec] 
     [exec] Time: 0 seconds, Memory: 3.75Mb
     [exec] 
     [exec] No tests executed!
     [exec] 
     [exec] Generating code coverage report in Clover XML format ... done
     [exec] 
     [exec] Generating code coverage report in HTML format ... done

phpcb:

build:

BUILD SUCCESSFUL
Total time: 1 second
[CHECKSTYLE] Collecting checkstyle analysis files...
[CHECKSTYLE] Finding all files that match the pattern build/logs/checkstyle.xml
[CHECKSTYLE] Parsing 1 files in /opt/ubersvn/jenkins/workspace/JenkinsTest
[CHECKSTYLE] Successfully parsed file /opt/ubersvn/jenkins/workspace/JenkinsTest/build/logs/checkstyle.xml of module  with 0 warnings.
[PMD] Collecting PMD analysis files...
[PMD] Finding all files that match the pattern build/logs/pmd.xml
[PMD] Parsing 1 files in /opt/ubersvn/jenkins/workspace/JenkinsTest
[PMD] Successfully parsed file /opt/ubersvn/jenkins/workspace/JenkinsTest/build/logs/pmd.xml of module  with 0 warnings.
[DRY] Collecting duplicate code analysis files...
[DRY] Finding all files that match the pattern build/logs/pmd-cpd.xml
[DRY] Parsing 1 files in /opt/ubersvn/jenkins/workspace/JenkinsTest
[DRY] Successfully parsed file /opt/ubersvn/jenkins/workspace/JenkinsTest/build/logs/pmd-cpd.xml of module  with 0 warnings.
Recording plot data
Publishing Clover coverage report...
Publishing Clover HTML report...
Publishing Clover XML report...
Publishing Clover coverage results...
[htmlpublisher] Archiving HTML reports...
[htmlpublisher] Archiving at BUILD level /opt/ubersvn/jenkins/workspace/JenkinsTest/build/API_Documentation to /opt/ubersvn/jenkins/jobs/JenkinsTest/builds/2013-03-12_14-11-41/htmlreports/API_Documentation
ERROR: Directory '/opt/ubersvn/jenkins/workspace/JenkinsTest/build/API_Documentation' exists but failed copying to '/opt/ubersvn/jenkins/jobs/JenkinsTest/builds/2013-03-12_14-11-41/htmlreports/API_Documentation'.
ERROR: This is especially strange since your build otherwise succeeded.
Build step 'Publish HTML reports' changed build result to FAILURE
[xUnit] [INFO] - Starting to record.
[xUnit] [INFO] - Processing PHPUnit-3.x (default)
[xUnit] [INFO] - [PHPUnit-3.x (default)] - 1 test report file(s) were found with the pattern 'build/logs/junit.xml' relative to '/opt/ubersvn/jenkins/workspace/JenkinsTest' for the testing framework 'PHPUnit-3.x (default)'.
[xUnit] [WARNING] - All test reports are empty.
[xUnit] [INFO] - Check 'Failed Tests' threshold.
[xUnit] [INFO] - Check 'Skipped Tests' threshold.
[xUnit] [INFO] - Setting the build status to FAILURE
[xUnit] [INFO] - Stopping recording.
[JDepend] JDepend plugin is ready
[JDepend] Found 0 classes in 0 packages
Finished: FAILURE 
```

不知道对你有没有帮助

做到了！！！

只需在 project-root 中定义 phpdox.xml

```
<phpdox xmlns="http://phpdox.de/config">
    <project name="name-of-project" source="src" workdir="build/phpdox">
        <collector publiconly="false">
            <include mask="*.php" />
            <exclude mask="*Autoload.php" />
        </collector>

        <generator output="build">
            <build engine="html" enabled="true" output="api"/>
        </generator>
    </project>
</phpdox> 
```

很抱歉浪费了您的时间：/jenkins-php.org 必须更新以使新 Jenkins 用户更容易使用 ^^

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-13T07:24:51.563

只是如果有人没有阅读我的编辑：

做到了！！！

只需在 project-root 中定义 phpdox.xml

```
<phpdox xmlns="http://phpdox.de/config">
    <project name="name-of-project" source="src" workdir="build/phpdox">
        <collector publiconly="false">
            <include mask="*.php" />
            <exclude mask="*Autoload.php" />
        </collector>

        <generator output="build">
            <build engine="html" enabled="true" output="api"/>
        </generator>
    </project>
</phpdox> 
```

很抱歉浪费你的时间：/詹金斯

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:11:56.560

足够的磁盘空间？也许这有帮助：http: [//issues.hudson-ci.org/browse/HUDSON-7242](http://issues.hudson-ci.org/browse/HUDSON-7242) Micha

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-06-28T10:10:29.033

在 /etc/php/php.ini 上启用 xsl 为我解决了这个问题

```
extension=xsl.so 
```

另外，刚刚得到这个：

```
[exec] 配置文件 '/var/lib/jenkins/jobs/DEV-truvis.co/workspace/phpdox.xml' 使用了错误或过时的 xml 命名空间。
[exec] 请确保它使用'http://xml.phpdox.net/config'
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-06-14T14:21:07.797

对我来说（我关注 jenkins-php.org），我只需要指定目录中的路径（以及`phpdox.xml`我`build/`的所有其他`.xml`文件（`phpcs.xml`& `phpmd.xml`）。

```
<!-- build.xml - phpdox section -->
<target name="phpdox" description="Generate API documentation using phpDox">
    <exec executable="phpdox">
        <!-- Specify the path to phpdox.xml -->
        <arg value="--file=${basedir}/build/phpdox.xml" />
    </exec>
</target> 
```

示例`phpdox.xml`文件如下所示：

[https://github.com/theseer/phpdox/blob/master/phpdox.xml.dist](https://github.com/theseer/phpdox/blob/master/phpdox.xml.dist)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-12-07T08:23:30.833

如果有人仍然遇到此错误，我发现在 phpdox.xml 中，您现在需要使用“ [http://phpdox.net/config](http://phpdox.net/config) ”的 xmlns，即使用 .NET 而不是 .DE。

# batch-file - FOR 循环中的 CHOICE - Windows 批处理

> ID：15360734
> 
> 赞同：5
> 
> 时间：2013-03-12T12:05:31.437
> 
> 标签：batch-file

我有这个循环，它对外部文件中的每一行重复。我想在每次通过时提示用户进行选择，尽管这不起作用。我认为问题在于 GOTO 命令以某种方式打破了循环。对此有什么想法吗？

```
FOR /F %%i IN (%WORKDIR%\grunt-packages.ini) DO (
    CHOICE /C AN /M "Odinstalovat plugin"
    IF %ERRORLEVEL%==1 GOTO UNINSTALL
    IF %ERRORLEVEL%==2 GOTO SKIP

    :UNINSTALL
        ECHO Odstranuji %%i 
        CALL npm uninstall %%i

    :SKIP
        ECHO Preskakuji %%i
) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T12:51:10.490

你的推算是正确的。 `goto`在 for 循环内将停止循环。解决此问题的方法是`call`改用。但是，您的脚本的第一个问题是需要延迟扩展`ERRORLEVEL`变量。每当扩展在括号范围内设置的变量时，使用延迟扩展来获取最新值。

```
SETLOCAL ENABLEEXTENSIONS ENABLEDELAYEDEXPANSION
FOR /F %%i IN (%WORKDIR%\grunt-packages.ini) DO (
    CHOICE /C AN /M "Odinstalovat plugin"
    IF !ERRORLEVEL!==1 CALL :UNINSTALL
    IF !ERRORLEVEL!==2 CALL :SKIP
)
ENDLOCAL
GOTO :EOF

:UNINSTALL
    ECHO Odstranuji %%i 
    CALL npm uninstall %%i
    GOTO :EOF

:SKIP
    ECHO Preskakuji %%i
    GOTO :EOF 
```

1.  `goto` *不能*在`for`循环中使用。
2.  括号内设置的变量需要延迟扩展以检索新值。`!`而不是`%`. 否则，将使用括号范围之前的变量值。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-03-12T13:35:29.933

@Metzger 的回答是一个好的开始（我投了赞成票），但我发现它存在一些问题。最后，我更喜欢将代码内联并避免`CALLs`. 这是我的测试代码以显示它是如何完成的：

```
@echo off
SETLOCAL ENABLEEXTENSIONS ENABLEDELAYEDEXPANSION
FOR %%i IN (A B C D) DO (
    CHOICE /C AN /M "Uninstall plugin %%i"
    IF !ERRORLEVEL!==1 (
        ECHO Uninstall %%i
    ) ELSE IF !ERRORLEVEL!==2 (
        ECHO Skip %%i
    )
) 
```

我在 Windows XP 上测试了@Metzger 的答案，发现了以下问题：

*   缺少子程序`GOTO :EOF`（已修复）
*   在 Windows XP 上，`%%i`未设置子程序
*   （潜在错误）如果卸载设置`ERRORLEVEL`，可能会调用 SKIP

此测试代码解决了以下问题：

```
@echo off
SETLOCAL ENABLEEXTENSIONS ENABLEDELAYEDEXPANSION
FOR %%i IN (A B C D) DO (
    CHOICE /C AN /M "Uninstall plugin %%i"
    SET OERRORLEVEL=!ERRORLEVEL!
    IF !ERRORLEVEL!==1 CALL :UNINSTALL %%i
    IF !OERRORLEVEL!==2 CALL :SKIP %%i
)
ENDLOCAL
GOTO :EOF

:UNINSTALL
    ECHO Uninstall %1
    GOTO :EOF

:SKIP
    ECHO Skip %1
    GOTO :EOF 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T14:20:00.130

这种结构避免了使用 DELAYEDEXPANSION

```
@ECHO OFF
SETLOCAL
FOR %%i IN (A B C D) DO (
SET destcall=BADCHOICE
choice /c QJ /M "%%i - choose Q or J"
IF ERRORLEVEL 1 SET destcall=CHOSEQ
IF ERRORLEVEL 2 SET destcall=CHOSEJ
CALL CALL :%%destcall%%
)
GOTO :eof

:badchoice
ECHO bad choice
GOTO :eof

:choseq
ECHO You chose Q
GOTO :eof

:chosej
ECHO You chose J
GOTO :eof 
```

# android - Textview 的 LinkMovementMethod 阻止 listitem 触摸事件

> ID：15360739
> 
> 赞同：8
> 
> 时间：2013-03-12T12:05:39.083
> 
> 标签：android, listview, textview, listitem, linkmovementmethod

我对 Listview 有一些问题。Listview 的列表项由 imageview 和 textview 组成。Textview 包含可点击的链接。当我将 LinkMovementMethod 设置为 textviews 时，listitems 不会收到 onclick 事件。我仍然找不到任何正确的解决方案=（。任何人都可以解释如何解决它或举例说明在 listitem 中使用带有可点击链接的 textview 吗？谢谢。这是在适配器中创建的 textview：

```
 TextView text = (TextView) ((LayoutInflater) context.getSystemService(Context.LAYOUT_INFLATER_SERVICE))
                        .inflate(R.layout.post_content_text, null);
SpannableString sString = new SpannableString(d.getText());
//I have my own class UrlSpan that contain fields startPosition, endPosition and urlLink
for (UrlSpan us : ((TextData) d).getUrls())
                {
                    URLSpan urlSpan = new URLSpan(us.getUrl());
                    sString.setSpan(urlSpan, us.getStart(), us.getEnd(), SpannableString.SPAN_INCLUSIVE_INCLUSIVE);
                }
text.setText(sString);
text.setMovementMethod(LinkMovementMethod.getInstance());
view.addView(text); 
```

列表项是：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:visibility="visible" >

    <LinearLayout
        style="?PostListRow"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_margin="10dp"
        android:orientation="vertical"
        android:padding="10dp" >

        <LinearLayout
            android:layout_width="fill_parent"
            android:layout_height="65dp"
            android:orientation="horizontal" >

            <ImageView
                android:id="@+id/user_image"
                android:layout_width="45dp"
                android:layout_height="45dp"
                android:layout_margin="3dp"
                android:clickable="true"
                android:src="@drawable/ic_no_photo" />

            <LinearLayout
                android:layout_width="fill_parent"
                android:layout_height="55dp"
                android:layout_margin="0dp"
                android:orientation="vertical" >

                <TextView
                    android:id="@+id/user_title"
                    android:layout_width="fill_parent"
                    android:layout_height="0dp"
                    android:layout_weight="1"
                    android:clickable="true"
                    android:textSize="@dimen/title_in_list" />

                <TextView
                    android:id="@+id/post_datetime"
                    android:layout_width="fill_parent"
                    android:layout_height="wrap_content"
                    android:layout_marginBottom="5dp"
                    android:layout_marginTop="5dp"
                    android:textSize="@dimen/text_size_small" />
            </LinearLayout>

            <TextView
                android:id="@+id/post_number"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:layout_gravity="right"
                android:text="123" />
        </LinearLayout>
<!-- it is a view where textview with links is to be added to -->
        <LinearLayout
            android:id="@+id/post_data"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="vertical"
            android:weightSum="6" >
        </LinearLayout>

        <TextView
            android:id="@+id/post_view"
            style="?PostText"
            android:layout_width="match_parent"
            android:layout_height="wrap_content"
            android:text="TextView"
            android:visibility="gone" />

        <LinearLayout
            android:id="@+id/topic_edit_view"
            android:layout_width="fill_parent"
            android:layout_height="wrap_content"
            android:orientation="horizontal" >
        </LinearLayout>
    </LinearLayout>

</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-04-17T09:45:13.273

尝试将此属性添加 `android:descendantFocusability="beforeDescendants"` 到您的列表视图

从文档中：

它定义了在寻找 View 以获取焦点时 ViewGroup 及其后代之间的关系。在我看来，当您的列表视图中有一些活动视图（如按钮或编辑文本等）时，您必须定义 descendantFocusability

# jquery - 如何禁用密码字段上的空格键

> ID：15360745
> 
> 赞同：2
> 
> 时间：2013-03-12T12:05:50.007
> 
> 标签：jquery, keyup

如何禁用密码字段上的空格键。我试过了

```
$(document).ready(function() {
$("#passwordId").live('keyup',function(e){
    if (e.keyCode == 32) {
       // e.preventDefault();
    return false;
    }
});
}); 
```

我什至尝试过 e.preventDefault();。在调试时它确实输入了 if 但没有禁用空格键。不知道我做错了什么。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-03-12T12:11:06.400

如果你真的需要**现场**行为。

```
$(document).on('keydown', '#passwordId', function(e) {
    if (e.keyCode == 32) return false;
}); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T12:07:45.747

使用这个[http://jsfiddle.net/4FNqv/3/](http://jsfiddle.net/4FNqv/3/)

```
$("input").keypress(function (evt) {

  var keycode = evt.charCode || evt.keyCode;
  if (keycode  == 32) { 
    return false;
  }
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T12:14:54.973

试试这个：**[样本](http://jsfiddle.net/jTntz/1/)**

```
$(document).ready(function() {
  $(document).on('keypress', '#passwordId', function(e){
     return !(e.keyCode == 32);
  });
}); 
```

使用[.keypress()](http://api.jquery.com/keypress/)事件.. 此外，`.live()`已弃用.. 替换为[.on()](http://api.jquery.com/on/)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-03-12T12:26:51.843

```
jQuery("input[type='password']").keypress(function (e) {
  if (e.keyCode  == 32) { 
    return false;
  }
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T12:10:06.340

```
$(document).ready(function() {
$("#passwordId").on('keydown',function(e){
    if (e.keyCode == 32) {
      e.keyCode = 0; // <---
      return false; 
    }
});
}); 
```

# groovy - 从推特中提取数据

> ID：15360748
> 
> 赞同：1
> 
> 时间：2013-03-12T12:06:10.287
> 
> 标签：groovy, nlp, weka, sentiment-analysis, rapidminer

我想实时提取推文，我正在使用 RapidmMiner 进行情绪分析，为了收集数据，我更喜欢使用工具从推特中自动提取它们，我认为 groovy 与 json 使用 weka 可以完成这项任务但是我没有找到一个教程来做到这一点，还有其他简单的工具吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:08:24.967

[HTTPBuilder](http://groovy.codehaus.org/modules/http-builder/home.html)很酷。我经常用它来测试网络服务。它也有一些[twitter 示例](http://groovy.codehaus.org/modules/http-builder/doc/post.html)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-06T14:47:53.723

结帐“档案管理员”，一个用于搜索和保存推文的桌面工具。它最多可以在 .txt 或 .xls 文件中导出 1500 条推文。我实际上使用的是付费版本（9.99 美元），它允许您将 2000 条推文保存在一个 .json 文件中，这比其他版本更丰富。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-15T20:02:44.643

签出[sentiment140](http://help.sentiment140.com/for-students)，您可以下载他们已经标记为情绪的语料库。这是一个非常好的起点。

Sentiment140 的作者使用了 MaxEnt 分类器。该代码不是开源的，但您可以将他们的工作作为起点。

# c# - 处理 RedirectStandardOutput 为空且 DataReceivedEventArgs.Data 为空

> ID：15360756
> 
> 赞同：3
> 
> 时间：2013-03-12T12:06:23.833
> 
> 标签：c#, .net, process, redirectstandardoutput

在控制台模式下运行应用程序时，有几行写入控制台。

现在我想以编程方式执行此操作。这是我使用的一些示例代码：[MSDN on OutputDataReceived Event](http://msdn.microsoft.com/de-de/library/system.diagnostics.process.outputdatareceived.aspx)

```
private static StringBuilder _sortOutput = null;

var proc = new Process();
                var info = new ProcessStartInfo();
            info.FileName = @"C:\SomeApp.exe";

            info.UseShellExecute = false;
            info.WindowStyle = ProcessWindowStyle.Normal;
            info.CreateNoWindow = false;

            proc.StartInfo = info;

            info.RedirectStandardOutput = true;
            info.RedirectStandardError = true;

            proc.OutputDataReceived += HandleOutputData;
            proc.ErrorDataReceived += HandleOutputData;

            proc.Start();
            proc.BeginOutputReadLine();
            proc.BeginErrorReadLine();

            proc.WaitForExit();

            var exitCode = proc.ExitCode;
            var output = _sortOutput.ToString();

    private void HandleOutputData(object sender, DataReceivedEventArgs e)
    {
        _sortOutput.Append(e.Data);
    } 
```

但是 DataReceivedEventArgs.Data 始终为空，我没有得到在打开的控制台窗口中可以看到的结果。

我怎样才能收到输出？有没有办法做到这一点？

**更新**

我也尝试`proc.StandardOutput`直接读取，但它不会产生任何数据。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2015-10-20T23:24:38.157

正如其他人所发现的那样，存在一个错误，该错误`_sortOutput`将为空。但不管怎样，你是完全正确的：`e.Data`可以而且将是空的！

实际上，当正在执行调用的 AsyncStreamReader 到达被重定向的标准输出的*EOF*`e.Data`时，您的处理程序应该始终以等于 null 的方式被调用- 这将在您正在运行的进程退出时发生。当然，除非您首先取消注册 OutputDataReceived 事件处理程序，或者取消异步输出重定向。

 ** * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:24:18.970

它是空的，因为你读取了数据`var outPut`

尝试以下操作：

a) 改变你处理它的方式

```
proc.OutputDataReceived += new DataReceivedEventHandler(HandleOutputData); 
```

b) 注释掉该行

```
//var outPut = proc.StandardOutput.ReadToEnd(); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-06-23T15:38:34.913

Null 表示异步流的结束。您必须同时 WaitForExit 并等待终止的 null 通过 e.Data*

# ajax - 如何在rails 2.3中使用Ajax请求上传文件

> ID：15360760
> 
> 赞同：0
> 
> 时间：2013-03-12T12:06:31.230
> 
> 标签：ajax, ruby-on-rails-2, jquery-1.4

我有一个 Rails 2.3 应用程序。

我正在使用 Ajax 请求提交表单内容。在我的表格中，我有一个上传文件的规定。

表单的问题是，如果我将文件添加到表单并提交表单内容，我会在“jquery-1.4.4.min.js”中收到错误“错误：NS_ERROR_XPC_BAD_OP_ON_WN_PROTO：对 WrappedNative 原型对象源的非法操作”文件并且表单在不使用ajax请求的情况下正常提交。但是，当没有选择要上传的文件时，表单正在使用 Ajax 提交表单内容。

谁能告诉我如何使用 Ajax 请求上传文件。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-13T07:37:46.940

我在以下网址找到了满足上述要求的解决方案。希望它可以帮助某人。

[http://priyanka-railsdeveloper.blogspot.in/2011/11/allow-ajax-upload.html](http://priyanka-railsdeveloper.blogspot.in/2011/11/allow-ajax-upload.html)

# jquery - 基于单选按钮选择在禁用复选框上更改值属性的问题

> ID：15360762
> 
> 赞同：0
> 
> 时间：2013-03-12T12:06:41.203
> 
> 标签：jquery, forms, attributes, radio-button, disabled-input

我在编辑复选框上的 disabled 和 value 属性时遇到问题，具体取决于选择了哪个单选按钮。

当我选择 input#package-1 然后 input#highlighted 时，该功能起作用。但是，当我再次选择 input#package 1 时它失败了。当我这样做时，复选框上的值不会改变（这是不正确的），但禁用的属性会被取消（这是正确的）。

任何帮助将非常感激。

```
$(document).ready(function(){
    $('.package-select').change(function(){
       if ($('#package-2').is(':checked') || $('#package-1').is(':checked') ){
             $('input#extrasRouter').removeAttr('disabled');
             $('input#extrasRouter').val("36-Wireless router - &pound;44.99 - TEST"); // Changing value to select the PAID FOR router 

         } else {
             $('input#extrasRouter').val("21-Wireless router - FREE");
             $('input#extrasRouter').attr('disabled', true);     
         }   
    });
});

<!-- Radio button that are being selected which should affect the below checkbox -->
        <label for="package-3" class="package-select" id="tb-package-3">
            <span class="name">Home Worker 20</span>
            <input type="radio" value="16-Home Worker 20 - &pound;35 per month" id="package-3" class="validate required" name="package">
        </label>

        <label for="highlighted" class="package-select" id="tb-highlighted">
            <span class="name">Home 20</span>
            <input type="radio" value="10-Home 20 - &pound;22 per month" id="highlighted" class="validate required" name="package">
        </label>

        <label for="package-2" class="package-select" id="tb-package-2">
            <span class="name">Home 10</span>
            <input type="radio" value="12-Home 10 - &pound;17 per month" id="package-2" class="validate required" name="package">
        </label>

        <label for="package-1" class="package-select" id="tb-package-1">
            <span class="name">Basic</span>
            <input type="radio" value="13-Basic - &pound;10 per month" id="package-1" class="validate required" name="package" >
        </label>

<!-- Checkbox that is being edited -->
<input type="checkbox" checked="" name="options[]" id="extrasRouter" value="21-Wireless router - &pound;44.99"   /> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:09:38.577

`checked`是属性，不是属性。改变这些：

```
$('input#extrasRouter').removeAttr('disabled');
...
$('input#extrasRouter').attr('disabled', true); 
```

对这些：

```
$('input#extrasRouter').prop('disabled', false);
...
$('input#extrasRouter').prop('disabled', true); 
```

还尝试在禁用之前/重新启用之后设置值，而不是在禁用框时设置值。

# javascript - 在另一个 div 上单击更改 div 类，然后在单击正文时更改回

> ID：15360764
> 
> 赞同：0
> 
> 时间：2013-03-12T12:06:51.827
> 
> 标签：javascript, jquery, html, ajax

让我再定义一下这个问题：

我有

```
 <div class="contact">
      <div id="form"></div>
      <div id="icon"></div>
    </div> 
```

我想点击一下`#icon`，将类更改`.contact`为`.contactexpand`（或只是附加它）。

然后我希望点击身体上的点击来改变班级，但是当点击新班级时当然不应该发生这种情况`.contactexpand`，如果可能的话，再次点击图标再次改变班级。

我尝试了许多示例和组合，但无法获得正确的结果和行为。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:34:30.700

检查这个：`[**Working example**](http://jsbin.com/udoxes/1/edit)`

## 让我们一步一步来

> 我想点击#icon，将.contact 的类更改为.contactexpand（或只是附加它）。[…] 如果可能的话，再次单击图标会再次更改课程。

您想使用该[`toggleClass()`](http://api.jquery.com/toggleClass/)方法来实现这一点。简单地：

```
$('#icon').on('click', function(e){

    $(this).parent()
    .toggleClass('contact')
    .toggleClass('contactexpand');

}); 
```

> 然后我希望身体上的点击将课程改回来

您必须确保`body` [删除`contactexpand`class](http://api.jquery.com/removeClass/)并[添加`contact`](http://api.jquery.com/addClass/). 在这一点上，我只是给容器元素一个`id`（或者`class`如果你愿意的话），只是为了让事情变得更简单。然后你做的很简单：

```
$('body').on('click', function(e){

 $('#thisdiv')
 .removeClass('contactexpand')
 .addClass('contact');

}); 
```

> 但是，当单击新类 .contactexpand 时，这当然不应该发生。

**我认为这是其他答案错过的步骤**。由于您在任何地方单击，您也会单击`body`元素，因此您将始终在 上触发 click 事件`body`，因此删除`contactexpand`该类并添加该类`contact`。

**输入[`event.stopPropagation()`](http://api.jquery.com/event.stopPropagation/)**。此方法将确保事件不会在 DOM 中*冒泡*，并且不会触发`body`点击。

```
$('#thisdiv').on('click', function(e){

    e.stopPropagation();

}); 
```

`[**Working example**](http://jsbin.com/udoxes/1/edit)`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:25:29.503

你可以这样做

```
$('body').on('click', function(event) {

    if ($(event.target).attr('id') == 'icon') {
        $(event.target).parent().toggleClass('contactexpand');
    } else {
        $('.contact').removeClass('contactexpand');
    }

}); 
```

看看这个[jsfiddle](http://jsfiddle.net/eTDkA/1/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:11:19.743

您可以像下面的代码一样向父元素添加一个类。

```
$(".contact #icon").click(function(){
  var element = $(this).parent(".contact");
  element.removeClass("contact").addClass("contactexpand");
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T12:19:43.243

我喜欢这样的 jQuerys toggleClass 函数：

```
$('#icon').click(function(){
$('#contactbox').toggleClass('contact');
$('#contactbox').toggleClass('contactexpand');
}); 
```

或者，如果您想附加它而不是切换它，您可以使用 addClass('className') 和 removerClass('className') :)

这是一个例子：http: [//jsfiddle.net/aUUkL/](http://jsfiddle.net/aUUkL/)

您还可以在页面正文中添加一个 onclick 事件，并使用 hasClass('className') 查看是否在单击正文时切换类。你可以使用这样的东西（虽然我还没有测试过这个！）：

```
$('body').click(function(){
if( $('#contactbox').hasClass('contactexpand') ){
    $('#contactbox').addClass('contact');
    $('#contactbox').removeClass('contactexpand');
}
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-03-12T12:35:00.373

```
var $contact = $('.contact');
$contact.find('#icon').click(function(e, hide) {
    e.stopPropagation();
    $contact[hide ? 'removeClass' : 'toggleClass']('contactexpand');
});

$(document).on('click', function(e) {
    if (e.srcElement === $contact[0]) return;
    $contact.find('#icon').trigger('click', true);
}); 
```

[http://jsfiddle.net/kZkuH/2/](http://jsfiddle.net/kZkuH/2/)

# oracle - Oracle Sql Developer 连接存储

> ID：15360769
> 
> 赞同：6
> 
> 时间：2013-03-12T12:07:05.207
> 
> 标签：oracle, oracle-sqldeveloper

Oracle SQL Developer-3.2.20 在哪里存储连接？

它曾经在`IDEconnections.xml`但在最新版本中我没有看到这个文件。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-15T09:20:02.813

我正在使用 3.1.07，它存储在：

```
C:\Users{user}\AppData\Roaming\SQL Developer\system3.1.07.42
\o.jdeveloper.db.connection.11.1.1.4.37.59.48\connections.xml 
```

用你自己的替换 sqldeveloper 版本，你应该能够找到正确的文件夹。

`Connections`否则，您始终可以在 SQLDeveloper 的 Connections 视图中右键单击并选择`Export connections`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-08-23T11:33:46.937

SqlDeveloper 将所有连接存储在一个名为

```
connections.xml 
```

在 Windows XP 中，您可以在 location 中找到该文件

```
C:\Documents and Settings\<username>\Application Data\SQL Developer\systemX.X.X.X.X\o.jdeveloper.db.connection.X.X.X.X.X.X.X\connections.xml 
```

在 Windows 7 中，您会在位置找到它

```
C:\Users\<username>\AppData\Roaming\SQL Developer\systemX.X.X.X.X\o.jdeveloper.db.connection.X.X.X.X.X.X.X\connections.xml 
```

# c# - 会话管理和滑动过期

> ID：15360771
> 
> 赞同：1
> 
> 时间：2013-03-12T12:07:11.617
> 
> 标签：c#

默认会话超时为 20 分钟。如果有人在会话超时之前与已经空闲很长时间的网页进行交互，那么会发生什么。会话超时将重新开始，我的意思是增加或会话将在 20 分钟后超时。

我听说会话超时是基于滑动到期。所以告诉我由于滑动到期会话超时增加？

如果增加那么它将增加多少……是下一个20分钟吗？

请讨论会话超时的性质以及滑动超时的工作原理。由于滑动超时，会话超时如何增加？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:08:54.387

滑动到期意味着每次访问会话时，它都会再次将计时器重置为 20 分钟。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:22:31.223

`Sliding expiraton`每次访问会话时都会重置过期时间。根据您的问题，如果会话在中​​间访问，那么超时再次设置为 20 分钟。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-11-27T04:37:26.530

如果超时 = 120 分钟

如果用户访问他的帐户，则滑动到期值将被重置，并且从那时起，他的会话将被计算在内。如果用户在 2 小时内没有执行任何活动，那么他的会话将过期。

# sql-server - 服务器重启后无法启动 SQL 服务

> ID：15360773
> 
> 赞同：0
> 
> 时间：2013-03-12T12:07:23.437
> 
> 标签：sql-server, windows-server-2008-r2, local-security-policy

服务器重新启动后无法启动 SQL 服务。得到错误：

```
Service: MSSQL$SQLEXPRESS 
Domain and account: NT Service\MSSQL$SQLEXPRESS

This service account does not have the required user right "Log on as a service."

User Action

Assign "Log on as a service" to the service account on this computer. You can use Local Security Settings (Secpol.msc) to do this. If this computer is a node in a cluster, check that this user right is assigned to the Cluster service account on all nodes in the cluster. 
```

在“作为服务登录”窗口中添加用户或组的按钮被禁用。

所以不能添加任何用户/组..

服务器：WindowsServer 2008 R2

我连接抛出远程桌面。

，谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:20:32.110

尝试将服务帐户更改为“网络服务”

开始 - 管理工具 - 服务或开始 - 控制面板 - 管理工具 - 服务

找到“Sql Server（SQLEXPRESS）”——右键——属性

选择登录选项卡-单击浏览-键入“网络服务”-单击“确定”-单击“确定”

右键单击“Sql Server (SQLEXPRESS)” - 开始

# r - 在没有色标的R中绘制栅格

> ID：15360778
> 
> 赞同：2
> 
> 时间：2013-03-12T12:07:33.250
> 
> 标签：r, plot, raster

我有一个栅格，“cov.all”。如果我使用 R 在 R 中绘制它，`plot(cov.all)`我会得到这个图像：

![全部](../Images/4729262d95c547530bd6a70819dfcfea.png)

如何在没有色标的情况下绘制栅格？

感谢您提供任何帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:05:35.863

从上面的arun，解决方案是`plot(cov.all, legend=FALSE)`

# cloud - 支持socket编程的云PaaS

> ID：15360779
> 
> 赞同：2
> 
> 时间：2013-03-12T12:07:35.597
> 
> 标签：cloud, paas

支持打开socket的云PaaS有哪些？我浏览了 GAE 不支持套接字的各种云服务。其他 PaaS（免费和付费服务）是什么？注意：语言主要是java，.NET和任何其他语言

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-17T04:22:16.923

通过注册受信任的测试人员，现在从 1.7.2 开始支持 Socket

# php - 通过表单传递自定义的多个参数

> ID：15360781
> 
> 赞同：1
> 
> 时间：2013-03-12T12:07:36.687
> 
> 标签：php

我有一个包含书籍信息的表格，用户必须可以选择根据需要对表格进行排序。

有三个选项：

```
Author, Title, Edition 
```

它们都可以是 ASCENDING 或 DESCENDING。

但是该选择没有顺序。用户可以选择：**Title ASC 和 Edition DESC**或**Author DESC 和 Edition ASC 和 Title DESC**甚至只是**Edition ASC**。

问题是。哪种方式更好地在 PHP 中创建它？按表格？数组？我怎么能想像这样管理这些信息？

```
{"Author" => "Desc", "Title" => "Asc"} 
```

我已经有了排序脚本，我只需要了解如何以这种方式管理自定义信息。我认为数组会更好，但我怎样才能通过表单？

**我试图弄清楚，但我所有的解决方案都很丑陋并且代码很差。**

这是为那些不明白的人提供的服务图片：

![在此处输入图像描述](../Images/78df8a51262c820c60eafb8211d1c77b.png)

到目前为止，这基本上是所有内容的代码：

```
<?php
    $file = file_get_contents('books.json');
    $json = json_decode($file, true);
    $json = array_map(function($a) { return $a['book'][0]; }, $json['books']);
    foreach ($json as $key => $row):
        $title[$key] = $row['Title'];
        $author[$key] = $row['Author'];
        $edition[$key] = $row['Edition'];
    endforeach;
    array_multisort($title, SORT_ASC, $author, SORT_ASC, $json); // This is the default
    ?>
    <form method="post">
        <table align="center">
            <tr>
                <td>
                    Sort By
                </td>
                <td>
                    Direction
                </td>
            </tr>
            <tr>
                <td>
                    <select class="select" id="firstRule" name="firstRule">
                        <option value="">Select</option>
                        <option value="Author">Author</option>
                        <option value="Title">Title</option>
                        <option value="Edition">Edition</option>
                    </select>
                </td>
                <td>
                    <select id="firstRuleOrder" name="firstRuleOrder">
                        <option value="">Select</option>
                        <option value="up">Ascendent</option>
                        <option value="down">Descendent</option>
                    </select>
                </td>
            </tr>
            <tr>
                <td>
                    <input type="submit">   
                </td>
            </tr>
        </table>
    </form> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:38:33.460

下拉菜单应命名为“rule[0]”和“ruleOrder[0]”，而不是“firstRule”和“firstRuleOrder”。然后通过增加数组索引来复制它们（您可以使用 JavaScript 来做到这一点，或者只显示与列一样多的列）。

要构造对 的调用`array_multisort`，您必须遍历`$_POST['rule']`并`$_POST['ruleOrder']`创建一个参数数组。然后发生实际的函数调用`call_user_func_array`（这是必要的，因为您事先不知道参数的数量）

# mysql - 需要 MySQL 成语来检查字符串是否包含任何一组字符

> ID：15360788
> 
> 赞同：1
> 
> 时间：2013-03-12T12:07:47.883
> 
> 标签：mysql, string, function, idioms

我需要运行以下 MySQL 查询：

```
SELECT id, name FROM mytable 
WHERE NOT CONTAINS_ANY(name, ';.<>#$!'); 
```

除了似乎没有像 CONTAINS_ANY 之类的东西（取两个字符串并检查第一个字符串是否包含第二个字符串中的任何字符）。我能做些什么呢？我想避免

```
SELECT id, name FROM mytable 
WHERE name NOT LIKE '%;%' 
  AND name NOT LIKE '%.%' 
  AND etc. etc. 
```

和类似的丑陋。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:13:11.420

使用正则表达式：

```
SELECT id, name
FROM mytable 
WHERE name not rlike '[;.<>#$!]'; 
```

# css - 在 CSS 中动态赋值

> ID：15360794
> 
> 赞同：0
> 
> 时间：2013-03-12T12:07:56.787
> 
> 标签：css, primefaces

是否可以根据上面存在的内容动态定位链接或文本。

例如，我有一个页面如下：

**仪表板.xhtml**

```
<div id="innerContainer">            
<p:dataTable id = "adminDataTbl" value="#{userAdminMB.userRoles}" var="userList" selectionMode="single" selection="#{userAdminMB.selectedUser}" rowKey="#{userList.ntId}" styleClasses="order-table,table" headerClass="order-table-header" rowClasses="order-table-odd-row,order-table-even-row" >                     
    <p:column styleClass="table-data">  
        #{userList.ntId}
    </p:column>
    <p:column styleClass="table-data">  
        #{userList.roleList}
    </p:column>                 
</p:dataTable>
</div>

<div id="userLink">
    <h:commandLink action="#{userAdminMB.addUser}">
            <h:outputText value="Add a User to the Admin Tool"/>
    </h:commandLink>
</div> 
```

**样式.css**

```
#outerContainer{
    width: 100%;
    height: 500px; 
    top: 150px;
    border: 1px thin;
}

#innerContainer{
    width:100%;
    height:400px;
    text-align: right;
    margin-right: 9px;
    font-family: Arial;
    font-size: 16px;
    border: 1px thin;
}

#addUserLink{
    font-family: Arial;
    font-size: 16px;
    float: left;
    top: 550px;
    position: inherit;
}

.editUserLink-data{
    font-family: Arial;
    font-size: 16px;
    float: right;
    top: 175px;
} 
```

中的数据`<p:dataTable>`可能会根据所进行的数据库命中而有所不同。我需要相应地定位 addUser 链接。

请帮忙。任何帮助都感激不尽。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:16:50.350

如果我对您的理解正确，那么您想要做的是：

```
 <div sytle="textalign: right" id="firstLink">Link1</div>

 <div id="dynamicContent">
     dynamic content here
 </div>

 <div id="link2">Link2</div> 
```

如果您想在 dynamicContent 和 link2 div 之间添加相对定位，您可以这样做。

使用上面的代码，链接二将低于您页面上的动态内容

# sitecore - Sitecore - 弹出窗口中的 Workbox 预览

> ID：15360795
> 
> 赞同：1
> 
> 时间：2013-03-12T12:07:58.197
> 
> 标签：sitecore

Sitecore Workbox "preview" 使用以下代码，将其显示在不同的选项卡中，

```
 protected void Preview(string id, string language, string version)
    {
        ...
        Context.ClientPage.SendMessage((object)this, "item:preview(id=" + id + ",language=" + language + ",version=" + version + ")");
    } 
```

我希望它在弹出窗口中显示预览。我已经覆盖了工作箱，只需修改此方法即可。有什么想法可以改变吗？我尝试了不同的东西，但没有什么对我有用...

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:52:32.167

在**App_Config\Commands.config**中，您可以找到`item:preview`映射到`Sitecore.Shell.Framework.Commands.PreviewItem`类。

**您可以基于PreviewItem**类创建自己的命令并使用它来代替`item:preview`命令。

如果您反映**PreviewItem**类的代码，您将看到执行的**Run**方法

```
SheerResponse.Eval("window.open('" + (object) webSiteUrl + "', '_blank')"); 
```

在这个方法的最后。这会在新选项卡中加载预览。将此逻辑更改为覆盖类中所需的任何内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T10:48:22.763

非常感谢您的回答，这真的很有帮助。实际上，我想在新选项卡中打开内容编辑器。我已经反映了一些命令，例如预览、打开并了解内部发生的情况。

我已经覆盖了工作框中的“打开”mwthod，如下所示在新选项卡中打开内容编辑器项，

```
...
UrlString urlString = new UrlString("/sitecore/shell/Applications/Content%20Editor");

        urlString.Append("id", id);
        urlString.Append("vs", version);
        urlString.Append("ro", sectionId);
        urlString.Append("la", language);
        urlString.Append("fo", id);

        SheerResponse.Eval("window.open('" + (object)urlString + "', '_blank')");
... 
```

有用！！！！！再次感谢。

# sql-server - SSRS 2008 Report Builder 3.0：使用 CASE 和 WHEN 函数

> ID：15360797
> 
> 赞同：1
> 
> 时间：2013-03-12T12:08:07.860
> 
> 标签：sql-server, tsql, ssrs-2008, reportbuilder3.0, case-when

我设置了我的程序以允许用户选择一个电台，然后在 2 个日期之间进行选择，然后他们选择他们想要的班次。他们可以选择两者、第一或第二。第一个是早上 6:00 - 下午 4:00，第二个是下午 4:00 - 凌晨 3:00。我总共有4个参数。我认为我的程序没有返回第二班次的值，因为并非所有介于 16 和 3 之间的值都大于开始，小于结束。例如，下午 6:00 不小于 3 的结束时间，因此它不包含在输出中。我如何实现这一目标？这是我的代码：

```
DECLARE @StartHour INT
DECLARE @EndHour INT
SET @StartHour = CASE @TimeRange 

WHEN 0 THEN 0 --Start of Overall--
WHEN 1 THEN 6 --1st Shif Start--
WHEN 2 THEN 16 --2nd Shift Start--
END

SET @EndHour = CASE @TimeRange   
WHEN 0 THEN 24 --End of Overall--
WHEN 1 THEN 16 --End of First Shift--
WHEN 2 THEN 3 --End of Second Shift--
END

SELECT
Testerline1_CycleTimes.Station,
Testerline1_CycleTimes.StationEntry

WHERE
Testerline1_CycleTimes.Station LIKE @Station
AND Testerline1_CycleTimes.StationEntry Between @Start And @End
AND DATEPART( hh , Testerline1_CycleTimes.StationEntry ) >= @StartHour
AND DATEPART( hh , Testerline1_CycleTimes.StationEntry ) < @EndHour 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T05:45:47.777

错过了最后一天的回答，但如果你还没有解决问题。我建议尝试将 union 用于您的第二班数据。随着在时间范围之间选择的日期变化

```
/*******************************************************
   --Commented Code
    DECLARE @StartHour INT
    DECLARE @EndHour INT
    SET @StartHour = CASE @TimeRange 

    WHEN 0 THEN 0 --Start of Overall--
    WHEN 1 THEN 6 --1st Shif Start--
    WHEN 2 THEN 16 --2nd Shift Start--
    END

    SET @EndHour = CASE @TimeRange   
    WHEN 0 THEN 24 --End of Overall--
    WHEN 1 THEN 16 --End of First Shift--
    WHEN 2 THEN 3 --End of Second Shift--
   END 
  *******************************************/

 If(@TimeRange=1)
 BEGIN
 SELECT
    Testerline1_CycleTimes.Station,
    Testerline1_CycleTimes.StationEntry
 WHERE
    sterline1_CycleTimes.Station LIKE @Station
    AND Testerline_CycleTimes.StationEntry Between @Start And @End
    AND DATEPART( hh , Testerline1_CycleTimes.StationEntry ) >= 6
    AND DATEPART( hh , Testerline1_CycleTimes.StationEntry ) < 16
END

ELSE IF(@TimeRange=2)
BEGIN
SELECT
   Testerline1_CycleTimes.Station,
   Testerline1_CycleTimes.StationEntry  
 WHERE
    Testerline1_CycleTimes.Station LIKE @Station
    AND Testerline1_CycleTimes.StationEntry Between @Start And @End
    AND DATEPART( hh , Testerline1_CycleTimes.StationEntry ) >= 16
UNION ALL
SELECT
     Testerline1_CycleTimes.Station,
     Testerline1_CycleTimes.StationEntry
WHERE
    Testerline1_CycleTimes.Station LIKE @Station
    AND Testerline1_CycleTimes.StationEntry Between @Start And @End
    AND DATEPART( hh , Testerline1_CycleTimes.StationEntry ) < 3
END

 ELSE
 BEGIN
 SELECT
      Testerline1_CycleTimes.Station,
      Testerline1_CycleTimes.StationEntry
 WHERE
     Testerline1_CycleTimes.Station LIKE @Station
     AND Testerline1_CycleTimes.StationEntry Between @Start And @End
 END 
```

# javascript - 使用 onclick 禁用锚点

> ID：15360799
> 
> 赞同：0
> 
> 时间：2013-03-12T12:08:16.977
> 
> 标签：javascript, jquery, html

我在按下锚点时无法禁用它。

HTML：

```
<a href='#' data-bind='click: clickActivateSpatialSearch' id='draw_polygon'>
<i class='polygon_mark'></i>
</a>
<a href='#' data-bind='click: clickActivateSpatialSearchBox' id='draw_box'>
<i class='square_mark'></i>
</a> 
```

jQuery

```
 $('.square_mark').click(function () {
        if(!$(this).hasClass('active')) {
            $(this).addClass('active');
            $('.polygon_mark').off('click', disabler);
        } else {
            $(this).removeClass('active');
            $('.polygon_mark').on('click', disabler);
        }
    });
    $('.polygon_mark').click(function () {
        if(!$(this).hasClass('active')) {
            $(this).addClass('active');
            $('.square_mark').off('click', disabler);
        } else {
            $(this).removeClass('active');
            $('.square_mark').on('click', disabler);
        }
    });
}); 
```

功能：

```
disabler: function(event) {
    event.preventDefault();
    return false;
}, 
```

更改类的功能工作正常，但是我想添加到其中，当锚点 #1 被按下时，这会禁用另一个锚点，当我再次按下它时，我希望它重新启用锚点，反之亦然，但对于锚 #2。

我尝试做这样的事情，但我无法让它工作，也没有完全理解它。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:20:03.457

执行此操作并向您的 css 添加一个禁用类。

```
$('.square_mark').click(function () {
        $(this).toggleClass('active');
        $('.polygon_mark').toggleClass("disabled");
});

$('.polygon_mark').click(function () {
        $(this).toggleClass('active');
        $('.square_mark').toggleClass("disabled");
}); 
```

这应该可以解决问题。

```
.disabled {
   pointer-events: none;
   cursor: default;
} 
```

**编辑：**关于 jsfiddle 的示例：http: [//jsfiddle.net/uKCYN/](http://jsfiddle.net/uKCYN/)

如果你需要检查活动类来做其他事情，你可以这样编码：

```
$('.square_mark').click(function () {
    if(!$(this).hasClass('active'))
        $(this).addClass('active');
    else
        $(this).removeClass('active');
    $('.polygon_mark').toggleClass("disabled");
});

$('.polygon_mark').click(function () {
    if(!$(this).hasClass('active'))
        $(this).addClass('active');
    else
        $(this).removeClass('active');
    $('.square_mark').toggleClass("disabled");
}); 
```

并将您的其他内容添加到 if 子句中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:22:05.687

只需像这样修改处理函数并重试：

```
// handler function
function disabler(event) {
    event.preventDefault();
    console.log('item anchor clicked');
} 
```

# signalr - SignalR 与现有网站的问题

> ID：15360800
> 
> 赞同：0
> 
> 时间：2013-03-12T12:08:17.507
> 
> 标签：signalr, signalr-hub, signalr.client

当我尝试在我们现有的 Web 应用程序（使用 MVC 4）中添加 SignalR 时，我在页面加载时收到以下错误消息。

消息：无法获取属性“signalR”的值：对象为空或未定义 URI：[http ://dev.casino.bwin.com/signalr/hubs](http://dev.casino.bwin.com/signalr/hubs)

我试图导航到 signalr/hubs jquery，它似乎工作正常，因为我的客户端集线器类在 javascript 中可用。

关于我可能做错了什么的任何指示。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T16:25:44.963

您应该在 jQuery 之后但在“/signalr/hubs”脚本之前包含“Scripts/jquery.signalR-1.0.1.min.js”。

[查看http://www.asp.net/signalr/overview/signalr-20/hubs-api/hubs-api-guide-javascript-client](http://www.asp.net/signalr/overview/signalr-20/hubs-api/hubs-api-guide-javascript-client)的Javascript + HTML Client 部分以 供参考。

# django - 带参数的命名包装方法的反向 URL

> ID：15360802
> 
> 赞同：0
> 
> 时间：2013-03-12T12:08:26.570
> 
> 标签：django, django-templates, django-views

我正在尝试对命名包装方法的 URL 进行反向解析。我的 urls.py 中有以下设置（基于[此答案](https://stackoverflow.com/questions/15346735/reverse-url-of-wrapped-methods "这个答案")：

```
urlpatterns = patterns('',
('param_select/$',session_check(param_select),{}, 'param_select'),
('registration/$',registration),
('result_show/(\d+)',session_check(result_show),{}, 'result_show'),
('^expofit/$',media_clean(start),{}, 'start'),
('result_pick/$',session_check(result_pick),{}, 'result_pick'),
('mail_report/$',session_check(mail_report)),
('notification/$',session_check(notification)), 
```

它适用于所有没有参数的方法。但是，它在带参数的那个上失败了。

```
In [50]: from django.core.urlresolvers import reverse

In [51]: reverse('result_pick')
Out[51]: '/result_pick/'

In [52]: reverse('start')
Out[52]: '/expofit/'

In [53]: reverse('result_show', args=(2,))
---------------------------------------------------------------------------
NoReverseMatch                            Traceback (most recent call last)
/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/core/management/commands/shell.pyc in <module>()
----> 1 reverse('result_show', args=(2,))

/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/core/urlresolvers.pyc in reverse(viewname, urlconf, args, kwargs, prefix, current_app)
    474             resolver = get_ns_resolver(ns_pattern, resolver)
    475 
--> 476     return iri_to_uri(resolver._reverse_with_prefix(view, prefix, *args, **kwargs))
    477 
    478 reverse_lazy = lazy(reverse, str)

/home/alan/Desktop/expofit/expofit_env/local/lib/python2.7/site-packages/django/core/urlresolvers.pyc in _reverse_with_prefix(self, lookup_view, _prefix, *args, **kwargs)
    394             lookup_view_s = lookup_view
    395         raise NoReverseMatch("Reverse for '%s' with arguments '%s' and keyword "
--> 396                 "arguments '%s' not found." % (lookup_view_s, args, kwargs))
    397 
    398 class LocaleRegexURLResolver(RegexURLResolver):

NoReverseMatch: Reverse for 'result_show' with arguments '(2,)' and keyword arguments '{}' not found. 
```

我一直在关注这本书，除了命名的 url 之外，一切看起来都一样。关于缺陷在哪里的想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:45:23.707

问题在于我使用的是 Django 1.4 版本，并阅读了 Django 1.5 文档。更新后一切正常。

```
In [5]: reverse('result_show',args=(3,))
Out[5]: '/result_show/3' 
```

# javascript - 将 Javascript 对象传递给 Web Worker

> ID：15360810
> 
> 赞同：7
> 
> 时间：2013-03-12T12:09:28.473
> 
> 标签：javascript, web-worker, postmessage

我有一个这样的对象：

```
function A(id) {
    this.id = id;
}

A.prototype.getId = function() {
    return this.id;
} 
```

它作为文件（“objects.js”）包含在 html 页面中，也包含在带有 importScript（“objects.js”）的 web worker 中。现在，我使用“var a = new A()”在 html 页面中创建 A 的实例，并使用“postMessage()”将其发布到 Web Worker。

有趣的是，在 worker 中它仍然具有属性“id”及其值，但原型函数丢失了。我猜原因可能是原型函数被“绑定”到 html 页面上下文而不是 web worker 上下文。

所以我在工人中做的是：

```
event.data.a.__proto__ = A.prototype; 
```

它正在工作，我认为它是某种演员......

现在我的问题是，这是否是唯一且有效的方法，或者是否有更好的方法将具有原型功能的对象发布给网络工作者。对象定义在两种情况下都可用...

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2017-07-10T22:31:23.327

用于在将数据发送到 web worker 之前序列化数据的[结构克隆算法](https://developer.mozilla.org/en-US/docs/Web/API/Web_Workers_API/Structured_clone_algorithm)不会遍历原型链（有关详细信息，请参阅[第 2.7.5 节结构化数据的安全传递](https://www.w3.org/TR/html5/infrastructure.html#safe-passing-of-structured-data)）。这就解释了为什么不保留派生函数。

除了像您一样手动恢复对象外，您还可以创建一个具有原型功能的新对象，并使用[Object.assign](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Object/assign)从接收到的对象中复制属性。

请注意，这两种变通方法都假定原型对象及其功能对 Web Worker 是已知的。一般来说，在保留函数的同时，没有自动传输任意对象的方法（请参阅我对有关发送带有函数的对象的[相关问题的](https://stackoverflow.com/q/7704323/783510)[回答）。](https://stackoverflow.com/a/45001480/783510)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:16:22.707

webworkers 规范不允许传递字符串以外的任何内容。

[这](https://stackoverflow.com/questions/7704323/passing-objects-to-a-web-worker)是一个关于这个的问题。

因此，您应该使用（例如）json 序列化对象数据，然后在另一端对其进行反序列化，从而在 webworker 内部创建一个具有相同数据的对象的新实例。

可以使用相同的方法再次将对象传回——但他们都必须知道如何创建、序列化和反序列化类型的对象`A`。

# ajax - ajax表单提交正常，但成功不起作用？

> ID：15360811
> 
> 赞同：0
> 
> 时间：2013-03-12T12:09:28.727
> 
> 标签：ajax

我有一个使用 jquery 和 ajax 提交的简单表单。表单提交正常，数据发布，但成功消息不会调用......只是错误消息。有人可以告诉我我做错了什么。

```
 <script type="text/javascript" >
$(function() {
$(".form-submit").click(function() {                        
var esn = $("#esn").val();

var dataString = 'esn='+esn;

if(esn=='')
{
$('.error').show().fadeOut(3000);
}
else
{
$.ajax({
type: "post",
url: "include/submit_repair_form.php",
data: dataString,
success: function(result) {
    alert(result);  
    $('.testing').hide(); 
  },
  error:function (xhr, ajaxOptions, thrownError){
    alert(xhr.statusText);
  }   
});
}
return false;
});
});
</script> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:11:40.970

您忘记将`result`变量设置为`function()`

像这样：

```
success: function(result) {
    alert(result);  
    $('.testing').hide(); 
  } 
```

# php - CodeIgniter 的 ci_sessions 是否需要偶尔清空？

> ID：15360819
> 
> 赞同：8
> 
> 时间：2013-03-12T12:09:49.100
> 
> 标签：php, codeigniter, session

我正在使用 CI 的会话与数据库连接。所以我们所有的会话都在我们数据库的这个 ci_sessions 表中，考虑到 session_id 每 5 分钟变化一次，它可以获得很多行。

我们是否需要清空桌子，比如每月/每周一次？

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-03-12T16:15:11.770

虽然@Marc-Audet 说的是真的，但如果你看一下代码，你会发现这是一种非常糟糕的清理会话的方法。

构造`_sess_gc`函数每次启动时都会调用该函数。因此，基本上每个请求都会自动加载到您的服务器上。

然后，它会生成一个低于 100 的随机数，并查看它是否低于某个值（默认为 5）。如果满足此条件，那么它将删除会话表中`last_activity`值小于当前时间减去会话到期时间的所有行。

虽然这适用于大多数情况，但技术上可能（如果世界真的是随机的）随机数生成器不会长时间生成低于 5 的数字，在这种情况下，您的会话将不会被清理。

此外，如果您将会话到期时间设置为较长时间（如果设置为 0，CI 会将其设置为 2 年），那么这些行无论如何都不会被删除。如果您的网站足以吸引大量访问者，那么您的 DBA 很快就会指责会话表 :)

它适用于大多数情况 - 但我不会称其为适当的解决方案。他们的会话 id 重新生成确实应该被构建以删除与以前的 id 有关的记录，并且垃圾收集确实不应该留给随机数 - 从理论上讲，可能不会像您希望的那样频繁生成所需的数字.

在我们的例子中，我已经从会话库中删除了会话垃圾收集，并且我每天手动处理一次（使用 cron 作业 .. 和合理的会话到期时间）。这减少了对数据库的不必要点击次数，也不会在数据库中留下大量表。它仍然是一张大桌子，但比以前小了很多。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2018-02-17T22:14:17.847

鉴于 OP 问题没有 CodeIgniter 2 标记，我将回答如何在 CodeIgniter 3 的数据库不断增长时处理会话清理。

**问题：**
当您（在 config.php 文件中）设置`sess_expiration`密钥太高（比如 1 年）和`sess_time_to_update`密钥太低（比如 5 分钟）时，会话表将随着用户浏览您的网站而不断增长，直到会话行将过期并将被垃圾收集（即 1 年）。

**解决方案：**
将`sess_regenerate_destroy`key 设置为`TRUE`（默认设置为`FALSE`）将在旧会话使用新 id 重新生成时删除旧会话，从而自动清理您的表。

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2013-03-12T12:14:14.953

不，CodeIgniter 会自行清理...

**注意**
根据[CodeIgniter 文档](https://ellislab.com/codeigniter/user-guide/libraries/sessions.html)：

*Session 类具有内置的垃圾收集功能，可以清除过期的会话，因此您无需编写自己的例程来执行此操作。*

CodeIgniter 的会话类可能会检查会话表并清理过期条目。但是，文档没有说明何时进行清理。由于 CodeIgniter 没有 cron 作业，因此必须在调用 Session 类时进行清理。我想如果站点永远保持空闲状态，会话表将永远不会被清除。但是，这将是一个不寻常的案例。

* * *

## 回答 #4

> 赞同：3
> 
> 时间：2016-10-11T20:49:28.003

CodeIgniter 实现了[SessionHandlerInterface](http://php.net/sessionhandlerinterface)（请参阅[自定义驱动程序](http://www.codeigniter.com/user_guide/libraries/sessions.html#custom-drivers)的文档）。

CodeIgniter 为每个驱动程序（数据库、文件、redis 等）定义了一个名为**gc()**的垃圾收集器方法，或者您可以为自定义驱动程序定义自定义 gc()。

**gc()**方法通过 session_set_save_handler() 函数传递给 PHP ，[因此](http://php.net/manual/en/function.session-set-save-handler.php)PHP在内部根据[session.gc_divisor](http://php.net/manual/en/session.configuration.php#ini.session.gc-divisor)和[session.gc_probability](http://php.net/manual/en/session.configuration.php#ini.session.gc-probability)设置**调用垃圾收集器。**

例如，使用以下设置：

```
session.gc_probability = 1
session.gc_divisor = 100 
```

垃圾收集器进程在每个请求上启动的几率为 1%。

因此，如果设置正确，则无需清理会话表。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-03-12T12:15:06.680

你打电话时：

`$this->session->sess_destroy();`

它会自行删除数据库中的信息。

* * *

## 回答 #6

> 赞同：-2
> 
> 时间：2013-03-12T12:15:03.980

清理桌子总是很好的做法。否则，如果您查询会话数据以创建报告或其他内容，它将变得缓慢且不可靠。尽管如此，考虑到mysql的性能，是的。

# bash - 如何列出包含的 bash 函数？

> ID：15360822
> 
> 赞同：1
> 
> 时间：2013-03-12T12:09:59.217
> 
> 标签：bash, shell

`fname`在名为*a.sh*的文件中定义一个 bash 函数：

```
fname(){
  echo "Foo"
} 
```

我们可以这样包含函数：

> `source a.sh`

之后我们可以`fname`在shell中调用。我想知道是否有办法显示所有包含的功能。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:12:20.803

要列出所有声明的函数和主体，您可以运行：

```
set 
```

或者

```
declare -f 
```

如果您只想要函数名称：

```
declare -f -F 
```

或者

```
declare -f -F | cut -d " " -f3 
```

[请注意，`typeset`2013 年已弃用](http://wiki.bash-hackers.org/commands/builtin/declare)

并来自[http://wiki.bash-hackers.org/scripting/obsolete](http://wiki.bash-hackers.org/scripting/obsolete)关于`typeset`：

> 这与上述密切相关，应该经常一起使用。typeset 的存在主要是为了与 ksh 兼容，但在 Bash 中被标记为“已弃用”（尽管我并不完全同意这一点）。这在某种程度上是有道理的，因为无法保证未来的兼容性，而且任何兼容性都需要了解其他 shell 的非 POSIX 特性及其差异。使用 declare 而不是 typeset 强调您的意图是“仅限 bash”，并且肯定会在其他任何地方中断（如果幸运的话，可能 zsh 除外）。Dash 和 Debian 对本地内置程序的政策要求使问题更加复杂，它本身与 Bash 和其他 shell 不完全兼容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:12:51.630

`typeset -f`

关于[文档](http://tldp.org/LDP/abs/html/declareref.html)`typeset`

# sql - 在 SQL Server 2008 中连接 3 个表

> ID：15360824
> 
> 赞同：2
> 
> 时间：2013-03-12T12:10:04.833
> 
> 标签：sql, join, sql-server-2008-r2, inner-join

我正在尝试将 3 个表与内部连接连接在一起。表 prod_num 和 usrs 由 usr_Id 关联，表 usrs 和 usr_Data 由 usr_Num 关联。所以表 1 和表 3 之间不相关，所以我想将表 3 加入 1 和 2 的结果，这就是我想要做的：

```
USE Puzzle
SELECT a.Name, a.Id, b.Id, c.Email
FROM prod_num a INNER JOIN usrs b
ON a.usr_Num = b.usr_Num<br>FROM usrs b INNER JOIN usr_Data c
ON b.usr_Id = c.usr_Id 
```

如何从先前加入的结果进行加入？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T12:11:16.833

您应该只使用一个`FROM`关键字，因为`JOIN`s 是`FROM`子句的一部分，

```
SELECT  a.Name, 
        a.Id, 
        b.Id, 
        c.Email
FROM    prod_num a 
        INNER JOIN usrs b 
            ON a.usr_Num = b.usr_Num
        INNER JOIN usr_Data c
            ON b.usr_Id = c.usr_Id 
```

要进一步了解有关联接的更多信息，请访问以下链接：

*   [SQL 连接的可视化表示](http://www.codinghorror.com/blog/2007/10/a-visual-explanation-of-sql-joins.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T12:11:30.220

尝试这个：

```
USE Puzzle
SELECT a.Name, a.Id, b.Id, c.Email
FROM prod_num a
INNER JOIN usrs b ON a.usr_Num = b.usr_Num
INNER JOIN usr_Data c ON b.usr_Id = c.usr_Id 
```

`FROM`您的语句之间有一个额外的子句`JOIN`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T12:14:51.263

> 你可以这样做：

```
USE Puzzle
SELECT 
     a.Name, 
     a.Id, 
     b.Id, 
     c.Email
FROM prod_num a 
INNER JOIN usrs b ON a.usr_Num = b.usr_Num
INNER JOIN usr_Data c ON b.usr_Id = c.usr_Id 
```

# matlab - 如何绘制信号流图

> ID：15360828
> 
> 赞同：3
> 
> 时间：2013-03-12T12:10:08.027
> 
> 标签：matlab, signal-processing

我目前正在做一些与matlab上的数字信号分析和处理相关的问题。我给出了一个四阶离散时间的传递函数，如下所示。 ![在此处输入图像描述](../Images/e54acf8f2d32527c5caaa89908adbf84.png)

我找到了极点和零点，然后将其转换为二阶截面模型

```
>> b = [0.0018 0.0073 0.011 0.007 0.008];
>> a = [1 -3.0544 3.8291 -2.2925 0.55072];
>> [z,p,k]=tf2zp(b,a);
>> [sos,temp]=zp2sos(z,p,k); 
```

[现在我必须在sos](http://www.mathworks.com/help/signal/ref/zp2sos.html)上绘制值存储的信号流图来表示级联结构。我的问题是：-在matlab中是否有任何可用的函数来绘制信号流图？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:27:34.343

我在 Matlab 的 FileExchange 上找到了几个工具：

[http://www.mathworks.com/matlabcentral/fileexchange/33735-symbolic-reduction-of-block-diagrams-and-signal-flow-graphs](http://www.mathworks.com/matlabcentral/fileexchange/33735-symbolic-reduction-of-block-diagrams-and-signal-flow-graphs)

[http://www.mathworks.com/matlabcentral/fileexchange/7224-a-fully-automated-flowgraph-analysis-tool-for-matlab](http://www.mathworks.com/matlabcentral/fileexchange/7224-a-fully-automated-flowgraph-analysis-tool-for-matlab)

我认为没有原始的 Matlab 工具。

# drupal-7 - 日期字段验证问题

> ID：15360830
> 
> 赞同：1
> 
> 时间：2013-03-12T12:10:10.483
> 
> 标签：drupal-7

日期字段未针对 2013-02-13 等格式进行验证，但适用于 2013-12-12。前导零似乎会以任何节点形式产生问题。我有“客户端验证”模块。我在任何地方都找不到与此错误/问题相关的任何内容，所以我在这里发布。

谁能帮我？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:24:02.607

由于使用 parseInt 验证日期的月和日值，客户端验证 js 存在问题。只需替换它

```
jQuery.validator.addMethod("dateFormat", function(value, element, param) {
      var parts = value.split(param.splitter);
      var expectedpartscount = 0;
      var day = parseInt(parts[param.daypos], 10);
      var month = parseInt(parts[param.monthpos], 10);
      month = month - 1;
      var year = parseInt(parts[param.yearpos], 10);
      var date = new Date();
      var result = true;

 /* if (day.toString().length !== parts[param.daypos].length){
        result = false;
      }
      if (month.toString().length !== parts[param.monthpos].length){
        result = false;
      }*/
      if (year.toString().length !== parts[param.yearpos].length){
        result = false;
      }
      if (param.yearpos !== false){
        expectedpartscount++;
        date.setFullYear(year);
        if (year !== date.getFullYear()) {
          result = false;
        }
      }
      if (param.monthpos !== false) {
        expectedpartscount++;
        date.setMonth(month);
        if (month !== date.getMonth()) {
          result = false;
        }
      }
      if (param.daypos !== false) {
        expectedpartscount++;
        date.setDate(day);
        if (day !== date.getDate()) {
          result = false;
        }
      }
      if (expectedpartscount !== parts.length) {
        result = false;
      }
      return this.optional(element) || result;
    }, jQuery.format('The date is not in a valid format')); 
```

# java - OWL-API 从 OWLOntologyManager 获取本体

> ID：15360831
> 
> 赞同：0
> 
> 时间：2013-03-12T12:10:12.363
> 
> 标签：java, ontology, owl-api

有没有一种“简单”的方式来获得某个本体`OWLOntologyManager`？我用管理器加载了一个本体和依赖关系，我可以访问一个 HasSet，`OWLOntologyManager.getOntologies()`在那里我可以看到所有导入的本体。

还有一个`OWLOntologyManager.getOntology(IRI)`函数，但是这个函数只有在本体没有 versionID 时才有效，太糟糕了，我想得到的本体有一个`versionID`，这个函数只会返回 null。

有任何想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-12T11:34:19.823

如果我猜对了，您可以使用该`OntologyManager.getVersions(IRI ontology)`功能来执行此操作。它将返回一个`java.util.Set<OWLOntology>`包含所有具有指定本体 IRI 的本体。

[您可以在此处](http://owlapi.sourceforge.net/javadoc/org/semanticweb/owlapi/model/OWLOntologyManager.html#getVersions%28org.semanticweb.owlapi.model.IRI%29)找到此方法的 Javadoc 。

# collections - System.Activities.Statements.AddToCollection 给出固定大小错误

> ID：15360834
> 
> 赞同：1
> 
> 时间：2013-03-12T12:10:20.300
> 
> 标签：collections, workflow-foundation-4

在我的工作流程中，我调用了一个返回列表的服务。问题是，在我的工作流程中，我使用 AddToCollection Activity 将新字符串添加到集合中，但是当我进入 Activity 时出现错误。

调试和检查我得到了工作流日志，现在我看到错误是“集合的大小是固定的”。这是完整的日志：

> System.SZArrayHelper.Add[T](T value) System.Activities.Statements.AddToCollection`1.Execute(CodeActivityContext context) System.Activities.CodeActivity.InternalExecute(ActivityInstance instance, ActivityExecutor executor, BookmarkManager bookmarkManager) System.Activities.ActivityInstance。执行（ActivityExecutor 执行器，BookmarkManager 书签管理器） System.Activities.Runtime.ActivityExecutor.ExecuteActivityWorkItem.ExecuteBody（ActivityExecutor 执行器，BookmarkManager 书签管理器，位置结果位置）

我不明白为什么（以及这是如何发生的）？这是一个错误吗？我专门返回一个列表...为什么它说它是固定大小的？！？

编辑 1：有些东西真的很奇怪......因为我原来的工作流程很大，所以我创建了一个新的、更小的工作流程，只是为了重现这个错误......我不能！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-14T15:37:17.867

我的猜测是 WCF 在通过网络发送之前将您的列表序列化为数组。不知道能不能避免。

无论如何，检查[这个](https://stackoverflow.com/questions/6536760/wcf-generic-list-serialized-to-array)和[这个](https://stackoverflow.com/questions/1537958/manually-change-the-clientbase-collection-type-from-array-to-list)

您还可以在工作流程上创建一个新变量，并在您从服务接收到它时为其分配一个列表：

```
listWFVariable = new List<string>(arrayReceivedFromWebService); 
```

现在您可以对其进行添加操作。

# java - 获取违反数据库约束的数据

> ID：15360840
> 
> 赞同：1
> 
> 时间：2013-03-12T12:10:36.633
> 
> 标签：java, exception-handling, constraints

我正在尝试从 XML 导入数据并将其插入数据库。现在，如果有任何违反约束的数据，我想向用户展示它，因为从 XML 中插入了数百行。

有没有办法知道是哪些数据导致了这种情况`ConstraintViolationException`？

我已经阅读了 SO 帖子[How To Get DB Field Name From ConstraintViolationException in Hibernate](https://stackoverflow.com/questions/9160928/how-to-get-db-field-name-from-constraintviolationexception-hibernamte)，但帖子中建议的答案只给了我违反了哪个约束，而不是数据。

提前致谢。

# ios - 如何在 iPhone 中以 Pagecurl 样式关闭 SplashView？

> ID：15360841
> 
> 赞同：3
> 
> 时间：2013-03-12T12:10:38.703
> 
> 标签：ios, iphone, xcode, animation, page-curl

我想以 Page curl 样式隐藏我的 Splash_View，以便它可以移动到另一个类。

默认.png

欢迎专家提出任何想法或建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-14T07:12:10.080

试试这个代码：

```
[UIView beginAnimations:nil context:NULL];
[UIView setAnimationDuration:2.0];
[UIView setAnimationTransition:UIViewAnimationTransitionCurlUp forView:self.window cache:YES];
[UIView commitAnimations];

Splash_Image_View.hidden = YES; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:28:38.190

您需要使启动图像成为主视图的一部分以对其进行动画处理。在您的主视图控制器中，为 UIImageView 设置一个 IBOutlet，我将其命名为 splashImageView。在 MainWindow.xib 文件中，拖入一个带有您的启动图像的 UIImageView 并将其连接到插座。然后在主视图控制器 .m 文件的 viewDidAppear 中，您需要执行以下操作：

```
[UIView transitionWithView:self.view duration:0.5 options:UIViewAnimationOptionTransitionCurlUp animations:^{
   splashImageView.hidden = YES;
} completion:NULL]; 
```

这将隐藏带有卷曲动画的启动视图。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T12:30:13.743

想到的最简单的解决方案是在您的第一个 [ViewDidLoad] 中加载相同的图片，然后执行以下操作：

```
 [UIView transitionWithView:self.view duration:0.4
                         delay:0.0
                         options:UIViewAnimationOptionTransitionCurlUp
                         animations:^{
                         //hide splash here
                         }
                         completion:^(BOOL finished){ 

                         }]; 
```

# android - 将密钥存储在 .properties 文件中是不好的做法吗

> ID：15360843
> 
> 赞同：3
> 
> 时间：2013-03-12T12:10:59.027
> 
> 标签：android, security

所以我刚刚集成了 UrbanAirship for Android。

他们的示例代码使用一个`.properties`文件来存储 API 密钥和秘密。我发现这非常令人震惊，因为这些文件在扩展 APK 后很容易访问。

我不打算就在您的应用中存储敏感数据展开辩论。我只是想知道这样存储密钥是否不可接受。

如果是这样，那么哪种方法更安全但更直接？我目前将自己的 API 密钥作为静态变量存储在全局文件中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:39:32.010

由于 APK 内容未加密，因此从 .properties 文件中提取字符串与从已编译类中提取字符串一样容易。您可以通过将其加密存储在您的 Globals 类中来使其更难提取，但不要期望您发送给用户的任何内容都会保密。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:50:43.693

如果您需要一种安全的方式将密钥加载到内存中，请在运行时通过安全通道从您自己的服务器请求它们。即使您将密钥存储在只能从您的程序访问的共享首选项/数据库中，根设备也可以解决这个问题，因为它可以访问所有文件。Class / Dex 文件可以随时进行逆向工程。

也看看像[dexguard](http://www.saikoa.com/dexguard)这样的工具。它提供了比 proguard 更多的混淆和安全功能。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-05T01:01:13.510

关于城市飞艇；您放置在 .properties 文件中的密钥和秘密本质上是用于分析调用，而不是实际的“推送”。不过，您也获得了 API 调用的主密钥。这是您需要保护的应用程序机密值。这就是为什么 Urban Airship 不鼓励从需要应用程序密钥和主密钥的设备推送。如果您只存储 Urban Airship 的应用程序密钥和机密，则不存在安全问题。

# asp.net-web-api - 让枚举显示在客户端

> ID：15360845
> 
> 赞同：9
> 
> 时间：2013-03-12T12:11:07.660
> 
> 标签：asp.net-web-api, breeze

我很难理解如何将 Enum 值转换为相应的名称。我的模型如下：

```
public class CatalogRule
{
  public int ID { get; set; }
  [Display(Name = "Catalog"), Required]
  public int CatalogID { get; set; }
  [Display(Name = "Item Rule"), Required]
  public ItemType ItemRule { get; set; }
  public string Items { get; set; }
  [Display(Name = "Price Rule"), Required]
  public PriceType PriceRule { get; set; }
  [Display(Name = "Value"), Column(TypeName = "MONEY")]
  public decimal PriceValue { get; set; }
  [Display(Name = "Exclusive?")]
  public bool Exclude { get; set; }
}

public enum ItemType
{
  Catalog,
  Category,
  Group,
  Item
}

public enum PriceType
{
  Catalog,
  Price_A,
  Price_B,
  Price_C
} 
```

.net API 的示例结果：

```
[
  {
    $id: "1",
    $type: "XYZ.CMgr.Models.CatalogRule, XYZ.CMgr",
    ID: 1,
    CatalogID: 501981,
    ItemRule: 0,
    Items: "198",
    PriceRule: 1,
    PriceValue: 0.5,
    Exclude: false
  },
  {
    $id: "2",
    $type: "XYZ.CMgr.Models.CatalogRule, XYZ.CMgr",
    ID: 2,
    CatalogID: 501981,
    ItemRule: 2,
    Items: "9899",
    PriceRule: 2,
    PriceValue: 10.45,
    Exclude: false
  }
] 
```

所以在这个例子中，我需要为结果 [0].ItemRule 和*价格 A获取结果 [0].PriceRule 的**目录*。我怎样才能在 BreezeJS 中做到这一点？

 ** * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T22:48:25.520

这在 ASP.NET Web API 中很容易做到，因为它是默认 JSON 序列化程序 (Json.NET) 中的一个开箱即用功能。

`StringEnumConverter`要在 JSON 中查看字符串而不是枚举数字，只需在应用程序初始化期间向 JSON 序列化程序设置添加一个实例：

```
var jsonFormatter = GlobalConfiguration.Configuration.Formatters.JsonFormatter;
jsonFormatter.SerializerSettings.Converters.Add(new Newtonsoft.Json.Converters.StringEnumConverter()); 
```

**更新：**是的，你说得对，这对 Breeze.js 没有帮助。好的，无论如何，您都可以做一些魔术来使枚举像字符串一样工作（而未发布带有修复的新版本）。

创建一个自定义`ContextProvider`，将元数据中的所有整数枚举值更新为字符串。这里是：

```
public class StringEnumEFContextProvider<T> : EFContextProvider<T>
    where T : class, new()
{
    protected override string BuildJsonMetadata()
    {
        XDocument xDoc;
        if (Context is DbContext)
        {
            xDoc = GetCsdlFromDbContext(Context);
        }
        else
        {
            xDoc = GetCsdlFromObjectContext(Context);
        }

        var schemaNs = "http://schemas.microsoft.com/ado/2009/11/edm";

        foreach (var enumType in xDoc.Descendants(XName.Get("EnumType", schemaNs)))
        {
            foreach (var member in enumType.Elements(XName.Get("Member", schemaNs)))
            {
                member.Attribute("Value").Value = member.Attribute("Name").Value;
            }
        }

        return CsdlToJson(xDoc);
    }
} 
```

`EFContextProvider`并在您的 Web API 控制器中使用它而不是：

```
private EFContextProvider<BreezeSampleContext> _contextProvider =
        new StringEnumEFContextProvider<BreezeSampleContext>(); 
```

这对我来说适用于当前的 Breeze.js 版本（1.1.3），虽然我没有检查其他场景，比如验证......

**更新：**要修复验证，请在微风中更改枚举的数据类型。[min|debug].js，手动（`DataType.fromEdmDataType`函数，`dt = DataType.String;`用于枚举）或在应用程序初始化期间替换默认函数：

```
breeze.DataType.fromEdmDataType = function (typeName) {
    var dt = null;
    var parts = typeName.split(".");
    if (parts.length > 1) {
        var simpleName = parts[1];
        if (simpleName === "image") {
            // hack
            dt = DataType.Byte;
        } else if (parts.length == 2) {
            dt = DataType.fromName(simpleName);
            if (!dt) {
                if (simpleName === "DateTimeOffset") {
                    dt = DataType.DateTime;
                } else {
                    dt = DataType.Undefined;
                }
            }
        } else {
            // enum
            dt = DataType.String; // THIS IS A FIX!
        }
    }

    return dt;
}; 
```

肮脏，肮脏的黑客，我知道......但这就是我找到的解决方案

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-03-13T18:58:05.133

在接下来的几天里将发布一个新版本，我们“改变”微风的枚举行为（即打破现有的关于枚举的代码）。在新版本中，枚举通过它们的 .NET 名称而不是整数进行序列化和查询。当新版本发布时，我会在这里发布。*

# visual-studio-2012 - Visual Studio 2012 - 无法创建 win32 项目

> ID：15360846
> 
> 赞同：2
> 
> 时间：2013-03-12T12:11:07.630
> 
> 标签：visual-studio-2012, wizard

我在 Windows 8 机器上使用 Visual Studio 2012，更新 1。当我尝试使用应用程序向导启动一个新的 win32 项目时，出现了一些奇怪的事情：

*   欢迎使用向导的窗口在“这些是当前项目设置”下有三个空项目符号。取消和完成按钮都不起作用。

应用程序的文件夹已创建，但其中没有文件。

请帮忙！！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-13T10:41:27.127

我解决了强制“干净”安装 VS2012 的问题。（“干净”意味着共享包也被卸载）。假设我用来安装 VS2012 的安装程序在 d 上：

```
D:\vs_premium.exe /uninstall /force 
```

重新安装后，问题就消失了。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-25T23:09:18.007

我正在通过 Parallels 在 Macbook 上运行 Visual Studio Express 2012 for WP。

我今天更新了 VS，之后无法加载我的项目（HTML App，#C），也无法创建新项目。 **解决方案是转到 Visual Studio Express 2012 的 Windows 程序卸载，但选择选项 "Repair"**。它与更新花费的时间大致相同，但之后我能够创建新项目（我从 2012 年 11 月开始的现有应用程序项目也可以使用）。

在我“修复”安装之前，我已经从 VS->Tools->Extensions and Updates 手动删除了一些添加了“Nu Get Package Manager and Packager”的包。我不确定后者是否真的需要。

附加信息：我的 VS 2012 Express for Windows8 安装工作正常，没有问题。

# r - 在循环遍历 R 中的因子级别时应用回归

> ID：15360852
> 
> 赞同：2
> 
> 时间：2013-03-12T12:11:21.803
> 
> 标签：r

我正在尝试将回归函数应用于因子（主题）的每个单独级别。这个想法是，对于每个主题，我可以根据他们的实际阅读时间（RT）和相应的打印字符串（WordLen）的长度来获得预测的阅读时间。一位同事帮助我编写了一些代码，用于根据（主题）内另一个函数（区域）的每个级别应用函数。但是，原始代码和我尝试的修改（将函数应用于单个因素的中断）都不起作用。

以下是一些示例数据的尝试：

```
 test0<-structure(list(Subject = c(101L, 101L, 101L, 101L, 101L, 101L, 
101L, 101L, 101L, 101L, 102L, 102L, 102L, 102L, 102L, 102L, 102L, 
102L, 102L, 102L, 103L, 103L, 103L, 103L, 103L, 103L, 103L, 103L, 
103L, 103L), Region = c(1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 
1L, 1L, 1L, 1L, 1L, 2L, 2L, 2L, 2L, 2L, 1L, 1L, 1L, 1L, 1L, 2L, 
2L, 2L, 2L, 2L), RT = c(294L, 241L, 346L, 339L, 332L, NA, 399L, 
377L, 400L, 439L, 905L, 819L, 600L, 520L, 811L, 1021L, 508L, 
550L, 1048L, 1246L, 470L, NA, 385L, 347L, 592L, 507L, 472L, 396L, 
761L, 430L), WordLen = c(3L, 3L, 3L, 3L, 3L, 3L, 5L, 7L, 3L, 
9L, 3L, 3L, 3L, 3L, 3L, 3L, 3L, 5L, 7L, 3L, 3L, 3L, 3L, 3L, 3L, 
3L, 3L, 5L, 7L, 3L)), .Names = c("Subject", "Region", "RT", "WordLen"
), class = "data.frame", row.names = c(NA, -30L)) 
```

不幸的是，这些数据返回了一个我的完整数据集没有得到的问题：

```
"Error in lm.fit(x, y, offset = offset, singular.ok = singular.ok, ...) : 
  0 (non-NA) cases" 
```

也许这是因为样本数据太小了？

无论如何，我希望有人会看到代码的问题，尽管我有能力提供工作数据......

这是原始代码（不起作用）：

```
for(i in 1:length(levels(test0$Subject)))
  for(j in 1:length(levels(test0$Region)))
    {tmp=predict(lm(RT~WordLen,test0[test0$Subject==levels(test0$Subject)[i] & test0$Region==levels(test0$Region)[j],],na.action="na.exclude"))
    test0[names(tmp),"rt.predicted"]=tmp
    } 
```

这是修改后的代码（不足为奇，也不起作用）：

```
for(i in 1:length(levels(test0$Subject)))
    {tmp=predict(lm(RT~WordLen,test0[test0$Subject==levels(test0$Subject)[i],],na.action="na.exclude"))
    test0[names(tmp),"rt.predicted"]=tmp
    } 
```

我将非常感谢任何建议。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:21:12.423

`ddply()`您可以使用library中的函数来实现结果`plyr`。这将根据 拆分数据框`Subject`，计算回归模型的预测，然后将其作为新列添加到数据框中。

```
ddply(test0,.(Subject),transform, 
   pred=predict(lm(RT~WordLen,na.action="na.exclude")))

   Subject Region   RT WordLen     pred
1      101      1  294       3 327.9778
......
4      101      1  339       3 327.9778
5      101      1  332       3 327.9778
6      101      2   NA       3       NA
7      101      2  399       5 363.8444
.......
13     102      1  600       3 785.4146 
```

要拆分数据`Subject`，`Region`您应该将两个变量都放在`.()`.

```
ddply(test0,.(Subject,Region),transform,
    pred=predict(lm(RT~WordLen,na.action="na.exclude"))) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:21:13.877

您的测试数据中唯一的问题是，`Subject`并且`Region`不是因素。

```
test0$Subject <- factor(test0$Subject)
test0$Region <- factor(test0$Region)

for(i in 1:length(levels(test0$Subject)))
  for(j in 1:length(levels(test0$Region)))
  {tmp=predict(lm(RT~WordLen,test0[test0$Subject==levels(test0$Subject)[i] & test0$Region==levels(test0$Region)[j],],na.action="na.exclude"))
   test0[names(tmp),"rt.predicted"]=tmp
  }
#   26     27     28     29     30 
# 442.25 442.25 560.50 678.75 442.25 
```

您收到错误（`0 non-NA cases`）的原因是，当您进行子集设置时，您是在不是因素的变量级别上进行的。在您的原始数据集中，尝试：

```
test0[test0$Subject==levels(test0$Subject)[1],] 
```

你得到：

```
# [1] Subject Region  RT      WordLen
# <0 rows> (or 0-length row.names) 
```

这就是`lm()`试图与之合作的东西

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-12T16:40:40.393

虽然您的问题似乎是在询问其他人已经回答的错误解释（数据根本不是因素），但这是一种仅使用`base`包的方法

```
test0$rt.predicted <- unlist(by(test0[, c("RT", "WordLen")], list(test0$Subject, test0$Region), FUN = function(x) predict(lm(RT ~ 
    WordLen, x, na.action = "na.exclude"))))

test0
##    Subject Region   RT WordLen rt.predicted
## 1      101      1  294       3     310.4000
## 2      101      1  241       3     310.4000
## 3      101      1  346       3     310.4000
## 4      101      1  339       3     310.4000
## 5      101      1  332       3     310.4000
## 6      101      2   NA       3     731.0000
## 7      101      2  399       5     731.0000
## 8      101      2  377       7     731.0000
## 9      101      2  400       3     731.0000
## 10     101      2  439       9     731.0000
## 11     102      1  905       3     448.5000
## 12     102      1  819       3           NA
## 13     102      1  600       3     448.5000
## 14     102      1  520       3     448.5000
## 15     102      1  811       3     448.5000
## 16     102      2 1021       3           NA
## 17     102      2  508       3     399.0000
## 18     102      2  550       5     408.5000
## 19     102      2 1048       7     389.5000
## 20     102      2 1246       3     418.0000
## 21     103      1  470       3     870.4375
## 22     103      1   NA       3     870.4375
## 23     103      1  385       3     877.3750
## 24     103      1  347       3     884.3125
## 25     103      1  592       3     870.4375
## 26     103      2  507       3     442.2500
## 27     103      2  472       3     442.2500
## 28     103      2  396       5     560.5000
## 29     103      2  761       7     678.7500
## 30     103      2  430       3     442.2500 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T12:21:22.130

我希望这是由于您的两个分类变量的组合不存在数据这一事实引起的。您可以做的是首先提取子集，检查它是否不等于`NULL`，并且只有在有数据时才执行 lm 。

# ruby-on-rails - 使用 Basic Auth 传递 Authentication Token

> ID：15360853
> 
> 赞同：0
> 
> 时间：2013-03-12T12:11:21.903
> 
> 标签：ruby-on-rails, authentication, devise

设计[插件](https://github.com/plataformatec/devise)允许使用[身份验证令牌](http://rubydoc.info/github/plataformatec/devise/master/Devise/Models/TokenAuthenticatable)。该文档说明了“Token Authenticatable”选项：基于身份验证令牌（也称为“单一访问令牌”）登录用户。令牌可以通过查询字符串或 HTTP 基本身份验证给出。

查询字符串方法很清楚，但是您究竟如何通过[基本身份验证](http://en.wikipedia.org/wiki/Basic_access_authentication)传递令牌？是否有必要使用Base64编码，像这样：

```
echo  "auth_token:3a75Dvc" | base64
=> YXV0aF90b2tlbjozYTc1RHZjCg==
curl --header "Authorization: Basic YXV0aF90b2tlbjozYTc1RHZjCg==" \ 
     http://my_site.com/my_app 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:40:26.393

以下是来自设计规范的带有身份验证令牌的基本身份验证示例：

```
header = "Basic #{Base64.encode64("#{VALID_AUTHENTICATION_TOKEN}:X")}"
get users_path(:format => :xml), {}, "HTTP_AUTHORIZATION" => header 
```

# java - 如何从大量 URL 中提取数据？

> ID：15360868
> 
> 赞同：0
> 
> 时间：2013-03-12T12:11:52.373
> 
> 标签：java, xml, url, automation

我有大约 3200 个小 XML 文件的 URL，这些文件有一些字符串形式的数据（显然）。*当我转到 URL 时，会显示（未下载）XML 文件*。所以我需要从所有这些 XML 中提取一些数据并将其保存在单个 .txt 文件或 XML 文件或其他文件中。我怎样才能自动化这个过程？

*注意：这是文件的样子。我需要从所有这些中复制“位置”和“标题”并将它们放在一个文件中。使用什么方法可以实现？

```
<?xml version="1.0"?>
 -<playlist xmlns="http://xspf.org/ns/0/" version="1">
    -<tracklist>
    <location>http://radiotool.com/fransn.mp3</location> 
    <title>France, Paris radio 104.5</title> 
    </tracklist>
</playlist> 
```

*编辑：固定 XML。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:05:58.787

使用 XQuery 或 XSLT 很容易，但细节取决于 URL 的保存方式。如果它们在 Java 列表中，那么（至少使用 Saxon）您可以将此列表作为参数提供给以下查询：

```
declare variable urls as xs:string* external;
<data>{
  for $u in $urls return doc($u)//*:tracklist
}</data> 
```

Java 代码类似于：

```
Processor proc = new Processor();
XQueryCompiler c = proc.newXQueryCompiler();
XQueryEvaluator q = c.compile($query).load();
List<XdmItem> urls = new ArrayList();
for (url : inputUrls) {
  urls.append(new XdmAtomicValue(url);
}
q.setExternalVariable(new QName("urls"), new XdmValue(urls));
q.setDestination(...)
run(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:16:11.777

在这里查看 JSoup 库：http: [//jsoup.org/](http://jsoup.org/)

它具有用于拉取和修复 URL 内容的功能，但它是为 HTML 设计的，所以我不确定它是否适用于 XML，但值得一看。

# ruby-on-rails - 根据最后一个条目而不是第一个空白自动增加 id

> ID：15360869
> 
> 赞同：2
> 
> 时间：2013-03-12T12:11:55.943
> 
> 标签：ruby-on-rails, ruby-on-rails-3

目前我有一个用户和一个资产表（postgres 后端），当用户创建一个新资产时，它会按预期填充资产 ID 1、2、3 等，根据我们当前的资产标记显示为 ###1方法。

作为资产管理系统的一部分，我们需要导入从当前系统导出的资产。我正在使用 roo 和 find_by_or_initialize 使用它们当前的 ID 创建这些资产。但是，当我去添加一个新资产时，它使用第一个空闲 id 并使用它而不是使用序列中的下一个。这不是问题，但现有管理系统中大约有 200 个丢失的数字，我目前想不出除了手动添加它们之外的解决方案。

例如，有没有办法让 id 不使用第一个空白；1、2、6、7、8、12？

这是资产的创建方法

```
def create
  @asset = current_user.assets.build(params[:asset])
   if @asset.save
    redirect_to root_path
    flash.now[:success] = "Asset created!"
  else
   render 'static_pages/home'
  end
end 
```

这是用于导入现有资产的方法

```
def self.import(file)
  spreadsheet = open_spreadsheet(file)
  header = spreadsheet.row(1)
  (2..spreadsheet.last_row).each do |i|
    row = Hash[[header, spreadsheet.row(i)].transpose]
    asset = find_or_initialize_by_id(spreadsheet.cell(i, 'A')) || new
    asset.attributes = row.to_hash.slice(*accessible_attributes)
    asset.save!
  end
end 
```

编辑：这是当前行为的一个例子 ![资产经理](../Images/98daebc172cadf351e7e60a5bc0d46ef.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T18:15:00.483

我已经考虑过了，并从 reddit 上的一些人那里得到了一些建议，并且已经意识到合乎逻辑的解决方案是重新启动 postgres 序列，`asset_id_seq`直到现有管理系统中的最后一个值。

我已经包含了这种情况的相关命令；

```
asset_development=# alter sequence assets_id_seq restart with 1479;
ALTER SEQUENCE
asset_development=# \d assets_id_seq
        Sequence "public.assets_id_seq"
    Column     |  Type   |        Value
---------------+---------+---------------------
 sequence_name | name    | assets_id_seq
 last_value    | bigint  | 1479
 start_value   | bigint  | 1
 increment_by  | bigint  | 1
 max_value     | bigint  | 9223372036854775807
 min_value     | bigint  | 1
 cache_value   | bigint  | 1
 log_cnt       | bigint  | 0
 is_cycled     | boolean | f
 is_called     | boolean | f
Owned by: public.assets.id 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T02:22:26.977

如果序列号非常重要，那么你可以用老式的方式来做。禁用自动递增，将最后一个数字存储在某个特殊表中的某个地方，然后在每次需要新数字时递增并重新保存该数字。

或者，您可以执行类似 SELECT MAX(id) FROM ASSETS ...

不过要小心，有一些非常好的理由让数据库自动递增，而不仅仅是自己滚动。

# ruby-on-rails - 在 Rails 3.2 中实现创建时出现路由错误

> ID：15360871
> 
> 赞同：0
> 
> 时间：2013-03-12T12:11:56.433
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, ruby-on-rails-3.2

我是 Rails 新手。尝试实施创建操作时出现以下错误。

```
Routing Error

No route matches {:action=>"show", :controller=>"settings", :format=>nil} 
```

我的控制器文件如下：-

```
 @settings = Setting.new(params[:settings])

respond_to do |format|
  if @settings.save
    format.html { redirect_to @settings, notice: 'Setting was successfully created.' }
    format.json { render json: @settings, status: :created, location: @settings }
  else
    format.html { render action: "new" }
    format.json { render json: @settings.errors, status: :unprocessable_entity }
  end
end 
```

结尾

我的 Routes.rb 文件如下：-

```
resources :settings do
    member do
     post 'add'
     post 'remove'
     get 'settings/id'
    end

    collection do
     get  'add'
     get  'list' 
     post 'get_settings'
     get  'get_settings'
    end
  end

  resources :settings 
```

我的 rake 路线有以下几点：-

```
 GET    /settings/get_settings(.:format
settings#get_settings
                      GET    /settings(.:format)
settings#index
                      POST   /settings(.:format)
settings#create
                      GET    /settings/new(.:format)
settings#new
                      GET    /settings/:id/edit(.:format)
settings#edit
                      GET    /settings/:id(.:format)
settings#show
                      PUT    /settings/:id(.:format)
settings#update
                      DELETE /settings/:id(.:format)
settings#destroy
                      GET    /settings(.:format)
settings#index
                      POST   /settings(.:format)
settings#create
                      GET    /settings/new(.:format)
settings#new
                      GET    /settings/:id/edit(.:format)
settings#edit
                      GET    /settings/:id(.:format)
settings#show
                      PUT    /settings/:id(.:format)
settings#update
                      DELETE /settings/:id(.:format)
settings#destroy 
```

我的 create.html.erb 如下：_

```
<%= form_for @setting  do |f| %>
  <% if @setting.errors.any? %>  
  <div id="errorExplanation">  
    <h2><%= pluralize(@setting.errors.count, "error") %> prohibited this setting from being saved:</h2>  
    <ul>  
    <% @setting.errors.full_messages.each do |msg| %>  
      <li><%= msg %></li>  
    <% end %>  
    </ul>  
  </div>  
  <% end %> 
</br></br>

Id: <%= f.text_field :id %><br>
Name: <%= f.text_field :name %><br>

<%= f.submit "Create" %>&nbsp;&nbsp; 
```

我的错误日志是：-

```
Started GET "/settings/new" for 127.0.0.1 at 2013-03-12 18:57:09 +0530
Processing by SettingsController#new as HTML
  Rendered settings/new.html.erb within layouts/application (170.2ms)
Completed 500 Internal Server Error in 1112ms

ActionController::RoutingError (No route matches {:action=>"show", :controller=>
"settings", :format=>nil}):
  app/views/settings/new.html.erb:7:in `_app_views_settings_new_html_erb__979995
802_23360592'
  app/controllers/settings_controller.rb:29:in `new'

  Rendered C:/RailsInstaller/Ruby1.9.3/lib/ruby/gems/1.9.1/gems/actionpack-3.2.1
1/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within resc
ues/layout (0.0ms) 
```

我的 new.html:-

```
<h1>New setting</h1>

<%= form_for @setting  do |f| %>
  <% if @setting.errors.any? %>  
  <div id="errorExplanation">  
    <h2><%= pluralize(@setting.errors.count, "error") %> prohibited this setting from being saved:</h2>  
    <ul>  
    <% @setting.errors.full_messages.each do |msg| %>  
      <li><%= msg %></li>  
    <% end %>  
    </ul>  
  </div>  
  <% end %> 
</br></br>

Id: <%= f.text_field :id %><br>
First Name: <%= f.text_field :name %><br>

<%= f.submit "Create" %>&nbsp;&nbsp;

<% end %>

<%= link_to 'Back', settings_path %> 
```

谁能帮帮我吗。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:48:48.050

把你的表格放进去，`new.html.erb`而不是`create.html.erb`像这样：

**新的.html.erb**

```
<%= form_for @setting  do |f| %>

#Your stuff

<% end %> 
```

你的新动作是：

**新动作**

```
def new
 @setting = Setting.new
end 
```

你的控制器然后是-

**创建动作：**

更新：

```
def create
  if request.setting?
     @setting = Setting.new(params[:setting])
    # other setup for save
    if @setting.save
      flash[:notice] = 'Setting was successfully created.'
      redirect_to @setting
    else
      render :action => 'new'
    end
  end 
end 
```

**注意：**`create.html.erb`当你说 create 是一个 post 方法时，没有这样的事情。此外，您应该`@setting`在整个代码中使用它，而不是`@settings`在新的控制器方法中定义它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:21:08.447

一个好的起点总是通过以下方式打印出您的路线：

```
rake routes 
```

然后你需要在控制器中定义一个show方法：

```
def show
  ..
end 
```

还有一个观点：

```
app/views/settings/show.html.erb 
```

有了`resources :settings`他应该认识到有一条表演路径。女巫可能看起来像这样：

```
settings_path(user.id) 
```

`resources :settings`不需要包含两次。

`UserController`我猜这与你无关。重要的部分是`SettingController`. `/view/user/show.html.erb`如果您在?上显示 SettingsShow 链接，可能会出现错误。（不是 100% 确定，需要查看更多代码，`SettingController`这会很有趣）。

# sql - 需要限制下表中每个订单的行数？

> ID：15360883
> 
> 赞同：0
> 
> 时间：2013-03-12T12:12:30.407
> 
> 标签：sql, sql-server-2008, group-by

我有这样的表：

```
| Col1       | Col2        | col3         |
|:-----------|------------:|:------------:|
| type1      |      1      |     aaaa     |
| type3      |      101    |     bbbb     |
| type2      |      21     |     cccc     |
| type1      |      2      |     aaa      |
| type2      |      22     |     bbb      |
| type3      |      102    |     ccc      |
| type1      |      3      |     aaax     |
| type2      |      23     |     bbbx     |
| type3      |      103    |     cccx     | 
```

我需要以下列方式输出...

```
| Col1       | Col2        | col3         |
|:-----------|------------:|:------------:|
| type1      |      1      |     aaaa     |
| type1      |      2      |     aaa      |
| type1      |      3      |     aaax     |
|
| type2      |      21     |     cccc     |
| type2      |      22     |     bbb      |
| type2      |      23     |     bbbx     |
|
| type3      |      101    |     bbbb     |
| type3      |      102    |     ccc      |
| type3      |      103    |     cccx     | 
```

请找到一些方法来获得这种输出我在这张表中有很多记录，但我需要以相同的顺序获得每种类型的前 5 名.....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:13:34.400

尝试：

```
SELECT Col1, 
        Col2, 
        Col3 
FROM(
    SELECT 
        Col1, 
        Col2, 
        Col3, 
        ROW_NUMBER() OVER (PARTITION BY Col1 ORDER BY Col1, Col2, Col3) RNum
    FROM YourTable 
)X WHERE RNum<=5 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:14:16.960

使用 ORDER BY 函数

```
SELECT COL1, COL2, COL3
FROM MyTable ORDER BY COl1, COl2, COl3 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:13:50.033

您不需要对这些数据进行分组，因为`GROUP BY`需要*聚合*一些列。而是使用 only`ORDER BY`子句。

```
SELECT *
FROM    tableName
ORDER   BY Col1 ASC, Col2 ASC, Col3 ASC 
```

# sql - 多项选择和隐藏报告

> ID：15360884
> 
> 赞同：0
> 
> 时间：2013-03-12T12:12:31.310
> 
> 标签：sql, tsql, reporting-services

我已经在哪个报告参数中指定了值

```
Label                                    Value 
Occupancy                                Occupancy 
Pitch Nights Sold                        PitchNightsSold 
Capacity                                 Capacity 
Pitch Nights Sold And Capacity           PitchNightsSoldAndCapacity 
Pitch Nights Sold And Occupancy          PitchNightsSoldAndOccupancy 
Pitch Nights Sold Capacity And Occupancy PitchNightsSoldCapacityAndOccupancy 
```

主要数据集：

```
SELECT 

OccupancyDetail.CalendarYear, 
OccupancyDetail.CalendarMonth, 
SUM(OccupancyDetail.No_of_Nights) AS No_of_Nights, 
SUM(OccupancyDetail.Capacity) AS Capacity

FROM            
OccupancyDetail INNER JOIN
    Site ON OccupancyDetail.Site_Skey = Site.Site_Skey

WHERE  (OccupancyDetail.ReferenceDate = convert(Date,getdate()))
AND CASE WHEN @Time = 'YEAR' THEN CAST(CalendarYear as varchar(4)) else CalendarMonth + ' ' + CAST(CalendarYear as varchar(4)) end in (@Dates)

AND ((@ReportingLevel = 'BDM' AND Site.BDM in(@BDM_Region_Site))
    OR (@ReportingLevel = 'Region' AND Site.Region in (@BDM_Region_Site))
    OR (@ReportingLevel = 'SiteName' AND Site.SiteName in (@BDM_Region_Site)))

GROUP BY OccupancyDetail.ReferenceDate,OccupancyDetail.CalendarYear, OccupancyDetail.CalendarMonth 
```

时间数据集：

```
select 
DateChoice 

FROM
(
select distinct 
CalendarYear, 
1 as MonthNumber,
CAST(CalendarYear as varchar(4)) as DateChoice 
from Time
where @Time = 'YEAR'

union all

select Distinct 
CalendarYear, 
MonthNumber,
CalendarMonth + ' ' + CAST(CalendarYear as varchar(4)) as DateChoice 
from Time 
where @Time = 'MONTH'
) as QRYDATA

ORDER BY CalendarYear,MonthNumber 
```

站点数据集：

```
SELECT DISTINCT BDM AS SiteInfo FROM Site
WHERE @ReportingLevel = 'BDM'

UNION ALL

SELECT DISTINCT Region  FROM Site
WHERE @ReportingLevel = 'Region'

UNION ALL

SELECT DISTINCT SiteName  FROM Site
WHERE @ReportingLevel = 'SiteName' 
```

在 Report Builder 3.0 上，我创建了 6 个隐藏的报告，除非在参数中选择它：

报告代码可见性字符串：

```
=iif(Parameters!WhichReport.Value(0) = "Occupancy", False, True) 
```

但我想要做的是使参数成为一个多选参数，这样有人可以选择两个图表而不是 1 或选择所有 6 个等，但无论选择什么，所有其他报告都需要保持隐藏。这可以做到吗？如果可以，怎么做？

谢谢

韦恩

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T13:09:56.767

您可以修改`Hidden`表达式以实现此目的：

使用 将所有选定的报告转换为字符串`Join`，然后检查相关报告名称是否在字符串中，例如：

```
=IIf(
  InStr(Join(Parameters!WhichReport.Value, ","), "Occupancy Report") > 0
  , False
  , True
) 
```

或者，对于不同的项目：

```
=IIf(
  InStr(Join(Parameters!WhichReport.Value, ","), "Capacity Report") > 0
  , False
  , True
) 
```

**评论后编辑：**

我猜你会得到不匹配的值，`PitchNightsSold`并且`PitchNightsSoldAndCapacity`会混淆所写的表达式。

我将使用类似于以下的数据集来控制项目的可见性：

```
Label                                      Value
-----                                      -----
Occupancy                                  Chart1
Pitch Nights Sold                          Chart2
Capacity                                   Chart3
Pitch Nights Sold And Capacity             Chart4
Pitch Nights Sold And Occupancy            Chart5
Pitch Nights Sold Capacity And Occupancy   Chart6 
```

然后像这样的表达式：

```
=IIf(
  InStr(Join(Parameters!WhichReport.Value, ","), "Chart1") > 0
  , False
  , True
) 
```

只适用于一项。

由于这些是您自己的内部常量值，您可以随意调用它们；只是让它们清晰明确。标签将保持不变，因此用户在运行报告时不会受到影响。

**评论后编辑：**

在评论中@glh 为类似`Value`值提供了一个很好的解决方案：

> ...如果你用逗号换行并搜索它们，这将删除部分发现。

所以像：

```
=IIf(
  InStr("," + Join(Parameters!WhichReport.Value, ",") + ",", ",PitchNightsSold,") > 0
  , False
  , True
) 
```

也会很好地工作；感谢他的建议。

# python - Python 从 PUT_LOG 中提取前 2 个参数

> ID：15360886
> 
> 赞同：0
> 
> 时间：2013-03-12T12:12:35.960
> 
> 标签：python

我正在使用 python3 并尝试从输入文件中动态提取第 2 个参数并将其转储到单独的文件中。strings_to_filter :- 我应该在这里传递静态数据..我有点怀疑..

我们能否从输入文件中获取此值...而不是将其传递给此 strings_to_filter 作为

> “CAPTIVE_EXECUTE_CMD”、“CAPTIVE_EXECUTE_CMD_FAILED”、“CAPTIVE_RECVD_SIGCHLD”、“LOG_LEVEL_DEBUG”、“LOG_LEVEL_DEBUG_ERR”、“LOG_LEVEL_DEBUG”、

```
#!/usr/bin/env python3

import os
import re

def extract_lines(file_in, file_out, strings_to_filter):
    with open(file_in) as f_in:
        for line in f_in:
            res = re.search("(PUT_LOG\()(.*)(\)\;)", line)
            if res is not None:
                i = 0
                for segment in res.group(2).split(","):
                    segment = segment.strip()
                    if segment in strings_to_filter and i < 2:
                        with open(file_out, "a+") as f_out:
                            print(segment, file=f_out)
                            i += 1

extract_lines( os.path.realpath("data.c"),
               os.path.realpath("outfile.txt"),
               ["CAPTIVE_EXECUTE_CMD","CAPTIVE_EXECUTE_CMD_FAILED",
                "CAPTIVE_RECVD_SIGCHLD","LOG_LEVEL_DEBUG",
                "LOG_LEVEL_DEBUG_ERR","LOG_LEVEL_DEBUG"]
               )

Please see my data.c file which contains the following line :

From where i want to extract first 2 parameter from PUT_LOG

PUT_LOG( LOG_LEVEL_DEBUG, CAPTIVE_RECVD_SIGCHLD, 3, INT, pid,INT, status, INT, errno);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_EXECUTE_CMD,1,STRING, cmd);
PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_EXECUTE_CMD_FAILED,1, STRING, cmd);
PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_NO_RAD_SERVERS, 3, IP_INT,(g_radius_cfg.cfg[rad_idx].primary_auth.ip),IP_INT, (g_radius_cfg.cfg[rad_idx].secondary_auth.ip),INT,rad_idx);
PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_GET_RAD_GRP_FAILED,0);
PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_GET_RAD_GRP_FAILED, 0);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_LOGIN_COUNT,1,INT, guest_cfg->login_usrs_count);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_USER_MAC_COUNT, 2,STRING, guest_cfg->login_cfg[i].user,INT, usr_mac_info->mac_count);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_SEND_USER_LIST, 1, INT, resp->count);
PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_ADD_ACCOUNT, 4, INT,guest_cfg->cap_accnt_count,STRING,req->account_name, INT, req->expiry_num, INT, req->expiry_type );
PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_DEL_ACNT, 1, STRING, req->account_name);
PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_ACCNT_EDIT, 3, STRING,account_cfg->account_name, INT, account_cfg->expiry_num,INT, account_cfg->expiry_type);
PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_ADD_RAD_USER, 1, STRING,user);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_USR_ALREADY_CREATED, 1,STRING, usr_mac_info->usr_bin);
PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_CALCULATE_EXPIRY_FAILED,1, STRING, login_cfg->user);
PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_EXPIRY_SCHEDULE_FAILED,1, STRING, login_cfg->user);
PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_USER_ALREADY_EXPIRED,1, STRING, login_cfg->user);
PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_CALCULATE_EXPIRY_FAILED,1, STRING, login_cfg->user);
PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_EXPIRY_TIME_ERR, 0);
PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_MAX_CLIENTS_REACHED,1, STRING, guest_auth_info.user);
PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_MALLOC_FAILED,0);
PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_MALLOC_FAILED, 0);
PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_AUTH_TO_APMGR_FAILED, 0);
PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_ADD_GUEST, 1,STRING, req->email);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_USR_GUEST_IDX, 2,STRING, email_info->email, INT, guest_idx);
PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_MALLOC_FAILED,0);
PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_ADD_USER, 1, STRING, req->user);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_USR_GUEST_IDX, 2,STRING, req->user, INT, guest_idx);
PUT_LOG(LOG_LEVEL_INFO,CAPTIVE_ADD_USER_ACCOUNT,2, STRING, req->user, STRING, req->account_name);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_CALCULATE_EXPIRY,4, STRING,req->user, STRING, account_cfg->account_name, INT,account_cfg->expiry_num, INT, account_cfg->expiry_type);
PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_USER_EXPIRED, 1, STRING,user);
PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_USER_DONT_EXIST,STRING, user);
PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_USER_ALREADY_EXPIRED,1, STRING, cfg->user);
PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_USER_EXPIRY_SCHEDULE, 4,STRING, cfg->user, STRING, ctime(&time_now),STRING, ctime(&schedule_time), INT, delay);
PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_DELETE_USER, 1,STRING, req->user)
PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_EDIT_USER, 2,STRING, req->user, STRING, req->passwd);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_CALCULATE_EXPIRY,4, STRING,req->user, STRING, account_cfg->account_name, INT,account_cfg->expiry_num, INT, account_cfg->expiry_type);
PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_CFG_CHANGE_NOT_FAILED,0);
PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_REAUTH_AND_MAX_CL_CFG,3, INT,cfg->inact_hr,INT, cfg->inact_min, INT,cfg->max_clients);
PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_UPLOAD_FAILED, 0 );
PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_FILE_COPY_FAILED, 0);
PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_ERR_COPY_F_TO_SERV, 0);
PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_EULA_COPY_FAILED, 0);
PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_EULA_OPEN_FAILED, 0);
PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_EULA_TO_CONF_ERR, 0);
PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_URL_REDIR_STRING,1, STRING,g_url_redirect_str);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_SEND_NOTIF_APMGR,2, INT, g_cfg.guest_cfg.user_type, INT,g_cfg.guest_cfg.reauth_timeout);
PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_NULL_MAC_ERR, 0);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_ADD_MAC_TO_USR, 2,MAC_ADDR, mac, INT, usr_mac_info->mac_count);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_MAC_COUNT, 1, INT, usr_mac_info->mac_count);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_USER_AUTH, 2,STRING, req->user, MAC_ADDR, req->mac_info[0].mac_bin);
PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_USR_NOT_FOUND, 1,STRING, req->user);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_ACCNT_NAME, 1, STRING,login_cfg->account_name);
PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_MAX_CLIENTS_REACHED, 1,STRING, req->user);
PUT_LOG(LOG_LEVEL_INFO, CAPTIVE_CLEAR_ALL_GUEST,0);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_INDEX_USED, 2,INT, i, INT, usr_info_tbl[i].flag);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_RAD_REDUND_AVOID,0);
PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_UNKNWN_MSG, 1, INT,hdr.msg_id);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_REPLYING_NOW,0);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_UPD_USR_ASSOC_INFO, 3, STRING,guest_assoc_info->user, MAC_ADDR, guest_assoc_info->mac_bin,INT, guest_assoc_info->evt);
PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_USER_DONT_EXIST, 1,STRING, guest_assoc_info->user);
PUT_LOG(LOG_LEVEL_DEBUG , CAPTIVE_SYSTEM_READY,0);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_RAD_CFG_EDIT, 0);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_REDUND_DISABLE,0);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_REDUND_STATE, 1,INT, red_state_info->state);
PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_UPD_ASSOC_FAILED,0);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_LOG_LEVEL_CHANGE, 1, INT, *captive_log_level);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_CREATE_EULA_FILE, 0);
PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_EULA_COPY_FAILED, 0);
PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_EULA_OPEN_FAILED, 0);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_URL_REDIR_STRING,1, STRING,g_url_redirect_str);
PUT_LOG(LOG_LEVEL_DEBUG, CAPTIVE_INIT,0);
PUT_LOG(LOG_LEVEL_ERR, CAPTIVE_CONFIG_INIT_FAILED,0);
PUT_LOG(LOG_LEVEL_DEBUG_ERR, CAPTIVE_IPC_INIT_FAIL,INT, errno); 
```

# java - 在 OpenCV (openCv4Android) 中使用 Imgproc.calcHist 进行反投影（backgorund 减法）

> ID：15360889
> 
> 赞同：1
> 
> 时间：2013-03-12T12:12:42.640
> 
> 标签：java, android, opencv, background-subtraction

我目前正在开发一个 Android 应用程序，并希望进行反投影。我正在关注的教程是：

[http://docs.opencv.org/doc/tutorials/imgproc/histograms/back_projection/back_projection.html#back-projection](http://docs.opencv.org/doc/tutorials/imgproc/histograms/back_projection/back_projection.html#back-projection)

我遇到的问题是当我使用 Imgproc.calcHist(...) 时。我似乎无法弄清楚我应该将哪些参数传递给这个函数，目前如下，并且在断言失败时给了我一个 OpenCV 错误：

```
listHueList = new ArrayList<Mat>() {{ add(mHueMat);}};
ch = new MatOfInt(0,0); 
mMaskMat = new Mat();
mHistMat = new Mat();
range = new MatOfFloat(0, 256);
Imgproc.calcHist(listHueList, ch, mMaskMat, mHistMat, new MatOfInt() , range); 
```

有人可以将上面教程链接中的参数转换为我可以通过 Java 语法轻松使用的参数吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-07T23:33:02.400

看这段代码。这个对我有用！

```
java.util.List<Mat> matList = new LinkedList<Mat>();
            matList.add(image_gray);
            Mat histogram = new Mat();
            MatOfFloat ranges=new MatOfFloat(0,256);
            Imgproc.calcHist(
                    matList, 
                    new MatOfInt(0), 
                    new Mat(), 
                    histogram , 
                    new MatOfInt(25), 
                    ranges);
            System.out.println("histogram\n"+histogram.dump()); 
```

# cuda - 与 CUDA 占用计算器不同的实验结果

> ID：15360890
> 
> 赞同：0
> 
> 时间：2013-03-12T12:12:47.450
> 
> 标签：cuda

我学习 CUDA 架构。

我在如下环境中制作了一些并行处理代码。

GPU：GTX580（CC为2.0）

每块线程数：16x16 = 256

每个线程的寄存器：16

每块共享内存：48 字节

我通过编译选项知道寄存器数量和共享内存大小：--ptxas-options=-v 另外，网格大小为 32x32 = 1024，并且没有额外的共享内存。

所以，我尝试使用 NVIDIA 的 CUDA_Occupancy_Calculator。然后，它说，

3.) GPU 占用率数据显示在此处和图表中： 每个多处理器的活动线程 1536 每个多处理器的活动扭曲 48 每个多处理器的活动线程块 6 每个多处理器的占用率 100%

所以，我运行应用程序。但是，结果表明块大小比 16x16 快 8x8。

8x8 表示块大小，网格大小为 64x64。16x16 表示块大小，网格大小为 32x32。因此，线程的总数是相同的。它没有改变。

我不知道为什么。请帮我。

以下代码是我的程序的一部分。

```
void LOAD_VERTEX(){
        MEM[0] = 60;    //y0 
        MEM[1] = 50;    //x0
        MEM[2] = 128;   //r0
        MEM[3] = 0;     //g0
        MEM[4] = 70;    //b0
        MEM[5] = 260;
        MEM[6] = 50;
        MEM[7] = 135;
        MEM[8] = 70;
        MEM[9] = 0;
        MEM[10] = 260;
        MEM[11] = 250;
        MEM[12] = 0;
        MEM[13] = 200;
        MEM[14] = 55;
        MEM[15] = 60;
        MEM[16] = 250;
        MEM[17] = 55;
        MEM[18] = 182;
        MEM[19] = 100;
        MEM[20] = 30;
        MEM[21] = 330;
        MEM[22] = 72;
        MEM[23] = 12;
        MEM[24] = 25;
        MEM[25] = 30;
        MEM[26] = 130;
        MEM[27] = 80;
        MEM[28] = 255;
        MEM[29] = 15;
        MEM[30] = 230; 
        MEM[31] = 330;
        MEM[32] = 56;   
        MEM[33] = 186;  
        MEM[34] = 201;
}

__global__ void PRINT_POLYGON( unsigned char *IMAGEin, int *MEMin, int dev_ID, int a, int b, int c)
{
        int i = blockIdx.x*TILE_WIDTH + threadIdx.x;
        int j = blockIdx.y*TILE_HEIGHT + threadIdx.y;

        float result_a, result_b;
        int temp[15];
        int k;

        for(k = 0; k < 5; k++){
                temp[k] = a*5+k;
                temp[k+5] = b*5+k;
                temp[k+10] = c*5+k;
        }

        int result_a_up = ((MEMin[temp[11]]-MEMin[temp[1]])*(i-MEMin[temp[0]]))-((MEMin[temp[10]]-MEMin[temp[0]])*(j-MEMin[temp[1]]));
        int result_a_down = ((MEMin[temp[11]]-MEMin[temp[1]])*(MEMin[temp[5]]-MEMin[temp[0]]))-((MEMin[temp[6]]-MEMin[temp[1]])*(MEMin[temp[10]]-MEMin[temp[0]]));

        int result_b_up = ((MEMin[temp[6]] -MEMin[temp[1]])*(MEMin[temp[0]]-i))-((MEMin[temp[5]] -MEMin[temp[0]])*(MEMin[temp[1]]-j));
        int result_b_down = ((MEMin[temp[11]]-MEMin[temp[1]])*(MEMin[temp[5]]-MEMin[temp[0]]))-((MEMin[temp[6]]-MEMin[temp[1]])*(MEMin[temp[10]]-MEMin[temp[0]]));

        result_a = float(result_a_up) / float(result_a_down);
        result_b = float(result_b_up) / float(result_b_down);

        int isIn = (0 <= result_a && result_a <=1) && ((0 <= result_b && result_b <= 1)) && ((0 <= (result_a+result_b) && (result_a+result_b) <= 1));

        IMAGEin[(i*HEIGHTs+j)*CHANNELS] += (int)(float(MEMin[temp[2]]) + (float(MEMin[temp[7]])-float(MEMin[temp[2]]))*result_a + (float(MEMin[temp[12]])-float(MEMin[temp[2]]))*result_b) * isIn;      //Red Channel
        IMAGEin[(i*HEIGHTs+j)*CHANNELS+1] += (int)(float(MEMin[temp[3]]) + (float(MEMin[temp[8]])-float(MEMin[temp[3]]))*result_a + (float(MEMin[temp[13]])-float(MEMin[temp[3]]))*result_b) * isIn;    //Green Channel
        IMAGEin[(i*HEIGHTs+j)*CHANNELS+2] += (int)(float(MEMin[temp[4]]) + (float(MEMin[temp[9]])-float(MEMin[temp[4]]))*result_a + (float(MEMin[temp[14]])-float(MEMin[temp[4]]))*result_b) * isIn;    //Blue Channel

}

//The information each device
struct DataStruct {
    int                 deviceID;
    unsigned char       IMAGE_SEG[WIDTH*HEIGHTs*CHANNELS];
};

void* routine( void *pvoidData ) {
        DataStruct  *data = (DataStruct*)pvoidData;
        unsigned char *dev_IMAGE;
        int *dev_MEM;
        unsigned char *IMAGE_SEG = data->IMAGE_SEG;

        HANDLE_ERROR(cudaSetDevice(data->deviceID));

        //initialize array
        memset(IMAGE_SEG, 0, WIDTH*HEIGHTs*CHANNELS);

        printf("Device %d Starting..\n", data->deviceID);

        //Evaluate Time
        cudaEvent_t start, stop;
        cudaEventCreate( &start );
        cudaEventCreate( &stop );

        HANDLE_ERROR( cudaMalloc( (void **)&dev_MEM, sizeof(int)*35) );                                //Creating int array each Block
        HANDLE_ERROR( cudaMalloc( (void **)&dev_IMAGE, sizeof(unsigned char)*WIDTH*HEIGHTs*CHANNELS) ); //output array

        cudaMemcpy(dev_MEM, MEM, sizeof(int)*256, cudaMemcpyHostToDevice);
        cudaMemset(dev_IMAGE, 0, sizeof(unsigned char)*WIDTH*HEIGHTs*CHANNELS);

        dim3    grid(WIDTH/TILE_WIDTH, HEIGHTs/TILE_HEIGHT);            //blocks in a grid
        dim3    block(TILE_WIDTH, TILE_HEIGHT);                         //threads in a block

        cudaEventRecord(start, 0);

        PRINT_POLYGON<<<grid,block>>>( dev_IMAGE, dev_MEM, data->deviceID, 0, 1, 2);                    //Start the Kernel
        PRINT_POLYGON<<<grid,block>>>( dev_IMAGE, dev_MEM, data->deviceID, 0, 2, 3);                    //Start the Kernel
        PRINT_POLYGON<<<grid,block>>>( dev_IMAGE, dev_MEM, data->deviceID, 0, 3, 4);                    //Start the Kernel
        PRINT_POLYGON<<<grid,block>>>( dev_IMAGE, dev_MEM, data->deviceID, 0, 4, 5);                    //Start the Kernel
        PRINT_POLYGON<<<grid,block>>>( dev_IMAGE, dev_MEM, data->deviceID, 3, 2, 4);                    //Start the Kernel
        PRINT_POLYGON<<<grid,block>>>( dev_IMAGE, dev_MEM, data->deviceID, 2, 6, 4);                    //Start the Kernel

        cudaEventRecord(stop, 0);
        cudaEventSynchronize(stop);

        HANDLE_ERROR( cudaMemcpy( IMAGE_SEG, dev_IMAGE, sizeof(unsigned char)*WIDTH*HEIGHTs*CHANNELS, cudaMemcpyDeviceToHost ) );
        HANDLE_ERROR( cudaFree( dev_MEM ) );
        HANDLE_ERROR( cudaFree( dev_IMAGE ) );

        cudaEventElapsedTime( &elapsed_time_ms[data->deviceID], start, stop );          //Calculate elapsed time
        cudaEventDestroy(start);
        cudaEventDestroy(stop);

        printf("Algorithm Elapsed Time : %f ms(Device %d)\n", elapsed_time_ms[data->deviceID], data->deviceID);
        printf("Device %d Complete!\n", data->deviceID);

        return 0;
}

int main( void )
{       
        int i;
        CUTThread thread[7];

        printf("Program Start.\n");                     
        LOAD_VERTEX();

        DataStruct data[DEVICENUM];                     //define device info

        for(i = 0; i < DEVICENUM; i++){
                data[i].deviceID = i;
                thread[i] = start_thread(routine, &(data[i]));
        }

        for(i = 0; i < DEVICENUM; i++){
                end_thread(thread[i]);
        }

        cudaFreeHost(MEM);

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:05:52.407

*由于您[从 Nvidia 论坛复制了您的问题](https://devtalk.nvidia.com/default/topic/532759/i-39-ve-a-question-about-cuda-occuapncy-calculator-by-nvidia/)，因此我也将复制[我的答案](https://devtalk.nvidia.com/default/topic/532759/cuda-programming-and-performance/i-39-ve-a-question-about-cuda-occuapncy-calculator-by-nvidia/post/3750080/#3750080)：*

对于您的内核，您发现更高的占用率会降低性能，这很容易通过缓存溢出来解释更高的占用率。

完全占用的本地数组`temp[]`需要 1536×15×4=92160 字节的缓存，而在 33% 的占用率（对于较小的 8×8 块大小）每个 SM 只需要 512×15×4=30720 字节。使用较大的 48kB 缓存/SM 设置，后者可以完全缓存，`temp[]`几乎完全消除了片外内存访问，但即使在默认的 16kB 缓存/SM 设置中，缓存命中概率也大大提高。

由于`temp[]`无论如何都不需要阵列，因此最快的选择（在任一占用情况下）将是完全消除它。`#pragma unroll`如果您只是在初始化循环之前插入 a ，编译器可能已经能够实现这一点。否则`temp[]`用一个小宏或内联函数替换所有使用，或者甚至只是将结果替换为代码（在这种情况下，我什至会发现它更具可读性）。

# ios - 如何使用工具栏按钮创建导航

> ID：15360900
> 
> 赞同：1
> 
> 时间：2013-03-12T12:13:09.627
> 
> 标签：ios, uinavigationcontroller, uitoolbar

我已经创建了一个工具栏按钮并给出了 action() 来导航到其他 ViewController。但是代码不适用于 Navigation。并且无法为按钮分配图像。我该如何解决这个问题？

```
- (void)viewDidLoad {
[super viewDidLoad];
[self.navigationController setToolbarHidden:NO];
UIToolbar *toolbar = [[UIToolbar alloc] init];
toolbar.frame = CGRectMake(0, 418, 320, 44);
[self.view addSubview:toolbar];
[toolbar release];
UIBarButtonItem *customItem = [[UIBarButtonItem alloc] initWithTitle:@"update"  style:UIBarButtonItemStyleBordered  target:self action:@selector(updateAddress:)];    
NSMutableArray *toolbarItems = [NSMutableArray arrayWithObjects:customItem,  nil];    
[toolbar setItems:toolbarItems animated:NO];
}    

-(void)updateAddress{
DisplayMapViewController *updateView=[[DisplayMapViewController alloc]init];
UINavigationController *navi=[[UINavigationController alloc]initWithRootViewController:updateView];
[self.navigationController popToViewController:navi animated:YES];
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:18:27.467

首先你应该正确设置选择器，你应该`:`从选择器中取出，因为你没有`updateAddress`方法的参数

应该是这样的

```
UIBarButtonItem *customItem = [[UIBarButtonItem alloc] initWithTitle:@"update"  style:UIBarButtonItemStyleBordered  target:self action:@selector(updateAddress)]; 
```

然后你需要`DisplayMapViewController`用它的 NibName初始化

```
DisplayMapViewController *updateView=[[DisplayMapViewController alloc]initWithNibName:@"DisplayMapViewController" bundle:nil]; 
```

然后只是弹出到你想要的视图。

```
[self.navigationController popToViewController:updateView animated:YES]; 
```

如果你已经有 rootViewController 那么你可以`popToRootViewController`

# fonts - 字体格式 SFD 和 TTF 之间的转换是否有损？

> ID：15360903
> 
> 赞同：3
> 
> 时间：2013-03-12T12:13:21.123
> 
> 标签：fonts, truetype, fontforge

这是我做的两个步骤：

1.  我打开了一个 TTF 字体文件（ **212 KiB** ) 并将其保存为 SFD 文件 (1.5 MiB)。
2.  然后，在不对字体项目进行任何更改的情况下，我再次将其保存为 TTF，并生成了一个**112 KiB的文件**的文件。

为什么它的尺寸会发生如此显着的变化？是否丢失了一些重要信息？

**更新**。我问这个是因为我想开始开发字体的改进版本（例如在 github 上）。因此，可以将 TTF 视为字体的源文件吗？也就是说，仅仅是原始 TTF 文件就足以在不丢失先前信息的情况下开始修复它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-03-12T18:21:21.580

在大多数情况下，从 TTF -> SFD -> TTF 的转换是有损的，因为 TTF 格式可以存储比 Fontforge 理解的更多的东西。丢失的内容取决于原始 TTF 中的内容、您在 Fontforge 中执行的操作以及您在 Fontforge 中应用的设置。

**但是**：更大的问题是损失是否重要。这更难回答。例如，可能会丢失的一件事是 TrueType 提示（也称为“指令”；这些本质上是与字形数据一起存储的小程序，指示渲染器如何修改轮廓以在某些尺寸下产生更好的渲染模式，在某些条件下等）。如果最初的提示不是很好，那么丢失它们也没什么大不了的。

无论如何，这可能没有实际意义，因为您不太可能找到您拥有的字体的 SFD 源。很可能该字体最初甚至不是使用 Fontforge 开发的（还有许多其他可用的字体创建包），因此不可能回到 SFD 源代码。

如果您的目标是无论如何都要改进，我会接受这种一次性转换带来的任何损失，并可能将损失作为改进过程的一部分来解决。

# sage - 如何在 SAGE 中通过 other 表示变量

> ID：15360904
> 
> 赞同：0
> 
> 时间：2013-03-12T12:13:24.353
> 
> 标签：sage, substitution

有没有办法通过之前在 SAGE 中定义的变量来表达数学表达式？

例如，如果我有变量`a = b + c`，我希望 SAGE 将表达式重写`b + c + d`为`a + d`.

谢谢你。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T13:35:55.937

事实上，如果你不知道你想要表达式树的哪一部分，那么替换这样的表达式是一件很重要的事情。[在此处](https://groups.google.com/forum/?fromgroups=#!topic/sage-devel/iXsU5FasB38)查看 Richard Fateman 的评论。

问题的核心在于，即使是执行您想要的操作的命令*也不*是字符串，而是表达式。

```
sage: var("a b c d")
(a, b, c, d)
sage: (a+d).subs({a:b+c})
b + c + d
sage: (b+c+d).subs({b+c:a})
b + c + d 
```

因此，您将不得不使用“通配符”。

```
sage: w0 = SR.wild(0)
sage: (b+c+d).subs({b+c+w0:a+w0})
a + d 
```

有关详细信息，请参阅

```
sage: x.match?
sage: SR.wild? 
```

在交互式外壳或笔记本中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:19:41.150

[正如您在微积分](http://www.sagemath.org/doc/reference/sage/calculus/calculus.html)中所见，您可以将 d 表示为变量

```
a = var('a'); b+c 
```

或者像 b 和 c 变量的函数

# java - 如何加载 Couchbase Memcached 存储桶

> ID：15360905
> 
> 赞同：1
> 
> 时间：2013-03-12T12:13:26.573
> 
> 标签：java, memcached, couchbase, spymemcached

Java 客户端 API 是否支持在 Couchbase 中加载 Memcached 存储桶或仅支持 Couchbase 存储桶，如果支持，在 Couchbase 上使用 Memcached 存储桶的最佳方式是什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-16T00:02:12.977

是的，这个功能在 CouchbaseClient 1.1.3 中被破坏了。

客户应该弄清楚您使用哪种存储桶并做正确的事情，这样您就不应该遇到问题，除非您使用上面提到的客户端。

[最新版本 1.1.4](http://packages.couchbase.com/clients/java/1.1.4/Couchbase-Java-Client-1.1.4.zip)，或通过[Couchbase maven repo](http://files.couchbase.com/maven2/couchbase/couchbase-client/1.1.4/)

# python - 对字典进行排序-它被声明的顺序 python

> ID：15360912
> 
> 赞同：1
> 
> 时间：2013-03-12T12:13:53.017
> 
> 标签：python, dictionary

在这里我添加了一个代码来生成 xml_tags，这就是我的输出：

```
md5 value = "sdfhsdkjgfjw35378563"
repOperation value = "push"
size value = "toolarge"
images value = "/home/rakesh/from_t_jack/imag1.ipds"
status value = "completed"
replication value = "mode"
sdlist value = "f:" 
```

我用过字典。我的字典不能正确`sort`。我希望字典按照我声明的顺序进行排序和打印。另一个问题是，如果在第 6 行观察到输出，则输出有点反转，我期待：`mode value = "replication"`。但是输出是相反的。我不知道它为什么会这样。我想知道如何解决这两个问题。这是我的代码。

```
 def generate_tag(name,val):

     full_tag = ''+name+' value = "'+val+'"'
     return full_tag

  def auto_xml(sdList,repOperation,images,status,md5):

            tags =          {'repOperationTag'  :{'repOperation_tag_name':'repOperation' ,
                                                  'repOperation_val'     : repOperation },

                            'modeTag'             :{'mode_tag_name':'mode' ,
                                                    'mode_val'     : 'replication' },

                             'imagesTag'        :{'images_tag_name': 'images',
                                                  'images_val'     : images  },

                             'statusTag'        :{'status_tag_name':'status' ,
                                                  'status_val'     : status},

                            'sizeTag'          :{'size_tag_name':'size' ,
                                                 'size_val'     : 'toolarge'},

                             'md5Tag'           :{'md5_tag_name'    : 'md5' ,
                                                  'md5_val'         : md5} ,

                             'sdListTag'        :{'sdList_tag_name': 'sdlist' , 
                                                  'sdList_val'     : sdList} }

            count = 0
            tag_len = len(tags)

            while count < tag_len :

                inner = tags[tags.keys()[count]]

                tag_name = inner[inner.keys()[0]]
                tag_val = inner[inner.keys()[1]]

                full_tag = generate_tag(tag_name,tag_val)

                print full_tag
                count = count + 1

  def myordered_dict(): 

      from collections import OrderedDict

      tags =         {'A_repOperationTag'  :{'tag_name':'repOperation' ,
                                      'tag_val'     : repOperation },

                'B_modeTag'             :{'tag_name':'mode' ,
                                        'tag_val'     : 'replication' },

                'C_imagesTag'        :{'tag_name': 'images',
                                      'tag_val'     : images  },

                'D_statusTag'        :{'tag_name':'status' ,
                                      'tag_val'     : status},

                'E_sizeTag'          :{'tag_name':'size' ,
                                     'tag_val'     : 'toolarge'},

                'F_md5Tag'           :{'tag_name'    : 'md5' ,
                                      'tag_val'         : md5} ,

                'G_sdListTag'        :{'tag_name': 'sdlist' , 
                                      'tag_val'     : sdList},

                'H_machinename'        :{'tag_name': 'hostname' , 
                                      'tag_val'     : 'xp_vm'} }

      tags = OrderedDict(sorted(tags.items(), key=lambda t: t[0])) 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-03-12T12:14:33.537

`dict`对象没有排序——更准确地说，dict 对象的顺序取决于*实现、版本和插入顺序。*这并不是说您插入密钥的顺序就是您将它们取出的顺序。这仅意味着如果您将相同的键插入两个不同的字典，但顺序不同，则不能保证将它们取出的顺序相同。例如：

```
>>> print {1:1, 9:2}
{1: 1, 9: 2}
>>> print {9:1, 1:2}
{9: 1, 1: 2} 
```

这并不意味着键保持其插入顺序。请注意，如果我`2`在结尾处将键插入到 dict 中会发生什么：

```
>>> print {9:1, 1:2, 2:4}
{9: 1, 2: 4, 1: 2}
>>> print {1:1, 9:2, 2:4}
{1: 1, 2: 4, 9: 2} 
```

这是我不久前给出的另一个[答案](https://stackoverflow.com/questions/12165200/order-of-unordered-python-sets/12165239#12165239)，如果您有兴趣，它会讨论 (C)python 如何确定字典的顺序。

如果您需要 dict 来维持秩序，则应使用[`collections.OrderedDict`](http://docs.python.org/2/library/collections.html#collections.OrderedDict).

# c# - c# 中的 vbNullChar 等价物是什么？

> ID：15360914
> 
> 赞同：6
> 
> 时间：2013-03-12T12:13:57.223
> 
> 标签：c#, vb.net

c# 中的 Visual basic 'vbNullChar" 的等价物是什么？

我想在 C# 中复制这个 VB 语句

```
Dim sVersion As String
sVersion = New String(vbNullChar, 255) 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-03-12T12:15:11.250

我怀疑你想要：

```
string sVersion = new string('\0', 255); 
```

（不过，这似乎是一件奇怪的事情。我会尝试退后一步，看看是否没有更合适的方法来解决更大的问题。）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-03-12T12:29:11.513

乔恩斯基特是正确的......

您也可以通过以下方法实现此目的...

第一种方式

```
char vbNullChar = Convert.ToChar(0);//C# Equivalent to vbNullChar
string sVersion = new string(vbNullChar, 255); 
```

第二种方式

```
char vbNullChar = Convert.ToChar(0x0);//C# Equivalent to vbNullChar
string sVersion = new string(vbNullChar, 255); 
```

# iphone - UIRefreshControl 位于表格顶部

> ID：15360916
> 
> 赞同：1
> 
> 时间：2013-03-12T12:13:58.773
> 
> 标签：iphone, ios, objective-c, uitableview

我正在使用`UIRefreshControl`. `UITableviewController`表格第一次加载来自互联网的数据时，它会自动显示在顶部。见下图。 ![在此处输入图像描述](../Images/38a5790f15a4242bd3727838ec3fc0e1.png)

这就是我设置刷新控制的方式

```
[self.refreshControl addTarget:self action:@selector(doRefresh:) forControlEvents:UIControlEventValueChanged];
- (void)doRefresh:(CKRefreshControl *)sender {
    NSLog(@"Refreshing Parent");
    // bring Data Here
} 
```

这一切都发生在下拉刷新之前。第一次填充简单表数据时，会显示刷新控件，而不是隐藏在导航栏下。谁能告诉我为什么会这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:32:31.497

尝试分配一个新的 UIRefreshControl 对象并将 self.refreshControl 设置为它。像这样的东西：

```
UIRefreshControl *refreshControl = [[UIRefreshControl alloc] init];
[refreshControl setAttributedTitle:[[NSAttributedString alloc] initWithString:@"Refreshing.."]];
[refreshControl addTarget:self action:@selector(doSomething:) forControlEvents:UIControlEventValueChanged];
self.refreshControl = refreshControl; 
```

希望能帮助到你。

编辑：您还应该在调用选择器的末尾使用 [self.refreshControl endRefreshing] 。

# xml - 'XML5619: 不正确的文档语法。' 仅在 IE10 中出现错误

> ID：15360918
> 
> 赞同：13
> 
> 时间：2013-03-12T12:13:58.720
> 
> 标签：xml, html, internet-explorer, internet-explorer-10

在一些 IE10 测试期间，我一直注意到我不断遇到以下错误：

```
XML5619: Incorrect document syntax. 
```

但是，我没有明确使用 XML，而且我似乎无法找到有关此错误实际含义的文档。如果这很重要，我正在使用 HTML5 文档类型。

任何具有 IE 专业知识的人都可以帮助我朝着正确的方向前进吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-05-08T16:00:31.697

设置您请求的内容类型，`text/xml`错误将消失。

我认为 IE10 期望设置内容类型。检查开发者工具 -> 网络 -> 开始捕获您的请求是什么类型。

`Ext.Ajax.request`将内容类型设置为`application/json`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2018-12-06T13:51:23.337

> XML5619：文档语法不正确。

上述问题在 IE 中引发，因为**Content-Type**不会出现在响应标头中。要交叉检查相同的内容，请打开开发者工具 > 网络检查 Content-Type 是否为黑色的请求。IE 期望每个响应数据的 Content-Type。要解决此问题，请设置响应的内容类型

# python - 如何将 pandas DataFrame 的第一列作为一个系列？

> ID：15360925
> 
> 赞同：167
> 
> 时间：2013-03-12T12:14:22.037
> 
> 标签：python, dataframe, pandas, series

我试过：

```
x=pandas.DataFrame(...)
s = x.take([0], axis=1) 
```

并`s`获得一个 DataFrame，而不是一个系列。

* * *

## 回答 #1

> 赞同：156
> 
> 时间：2013-03-12T13:33:39.193

```
>>> import pandas as pd
>>> df = pd.DataFrame({'x' : [1, 2, 3, 4], 'y' : [4, 5, 6, 7]})
>>> df
   x  y
0  1  4
1  2  5
2  3  6
3  4  7
>>> s = df.ix[:,0]
>>> type(s)
<class 'pandas.core.series.Series'>
>>> 
```

==================================================== ==========================

**更新**

如果您在 2017 年 6 月之后阅读此内容，`ix`则已在 pandas 0.20.2 中弃用，因此请不要使用它。使用`loc`或`iloc`代替。请参阅此问题的评论和其他答案。

* * *

## 回答 #2

> 赞同：143
> 
> 时间：2013-03-12T14:49:17.780

从 v0.11+，... 使用`df.iloc`.

```
In [7]: df.iloc[:,0]
Out[7]: 
0    1
1    2
2    3
3    4
Name: x, dtype: int64 
```

* * *

## 回答 #3

> 赞同：124
> 
> 时间：2013-03-12T12:42:57.013

您可以通过以下代码将第一列作为系列获取：

```
x[x.columns[0]] 
```

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2016-12-23T05:30:55.163

这不是最简单的方法吗？

按列名：

```
In [20]: df = pd.DataFrame({'x' : [1, 2, 3, 4], 'y' : [4, 5, 6, 7]})
In [21]: df
Out[21]:
    x   y
0   1   4
1   2   5
2   3   6
3   4   7

In [23]: df.x
Out[23]:
0    1
1    2
2    3
3    4
Name: x, dtype: int64

In [24]: type(df.x)
Out[24]:
pandas.core.series.Series 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2018-04-07T23:06:28.337

当您想从 csv 文件加载系列时，这非常有用

```
x = pd.read_csv('x.csv', index_col=False, names=['x'],header=None).iloc[:,0]
print(type(x))
print(x.head(10))

<class 'pandas.core.series.Series'>
0    110.96
1    119.40
2    135.89
3    152.32
4    192.91
5    177.20
6    181.16
7    177.30
8    200.13
9    235.41
Name: x, dtype: float64 
```

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2020-07-07T17:51:49.503

```
df[df.columns[i]] 
```

其中`i`是列的位置/编号（从**0**开始）。

所以，`i = 0`是第一列。

您还可以使用获取最后一列`i = -1`

# css - jQuery Slidertron 溢出

> ID：15360927
> 
> 赞同：0
> 
> 时间：2013-03-12T12:14:24.057
> 
> 标签：css, slideshow

我在我的一个网站中使用[Slidertron 库](http://n33.co/files/jquery/zips/jquery.slidertron-1.1.zip)进行幻灯片放映。但是，当我根据某些分辨率查看它时，我可以看到当前幻灯片中的下一张幻灯片，这不应该发生。

CSS：

```
#slider {margin-left:auto;margin-right:auto;width:100%;position:relative;}
#slider .viewer {width:75%;height:400px;margin:0 auto;overflow:hidden;border:1px solid red;}
#slider .viewer .reel {display:none;height: 375px;}
#slider .slide {border:1px solid blue;}
#slider .viewer .reel .slide {position: relative;width:1100px;height:375px;} 
```

HTML：

```
 <div id="slider">
            <div class="indicator">
                <span>1</span>
                <span>2</span>
                <span>3</span>
                <span>4</span>
                <span>5</span>
            </div>
        <div class="viewer">
            <div class="reel">
                <div class="slide">
                    <img class="title" src="/Content/1.png" alt="" />
                    <p class="paragraph">Slide 1 text.</p>
                    <img class="image" src="/Content/2.png" alt="" />
                </div>
                <div class="slide">
                    <img class="title" src="/Content/Img1.png" alt="" />
                    <p class="paragraph">Slide 2 text.</p>
                    <img class="image" src="/Content/Img2.png" alt="" />
                </div>
            </div>
        </div>
    </div> 
```

jQuery（有点无关紧要，因为它运行良好）：

```
 $(function () {
        $('#slider').slidertron({
            viewerSelector: '.viewer',
            reelSelector: '.viewer .reel',
            slidesSelector: '.viewer .reel .slide',
            indicatorSelector: '.indicator span',
            speed: 'slow',
            navPreviousSelector: '.previous',
            navNextSelector: '.next',
            advanceDelay: 40000
        });
    }); 
```

仅供参考，我添加了两个边框只是为了查看我的 div 的界限。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-01T20:17:07.750

您的 CSS 中`.viewer`&之间有 25px 的差异！`.reel`

对我来说，jquery.slidertron 工作的最佳方式是当我用 css 严格告诉他图像大小时。

```
/*slider*/
#slider {
    margin: 0 auto;
    position: relative;
    width: 960px;
    height: 300px;
}
#slider .viewer {

    width: 960px;
    height: 300px;
    overflow: hidden;
}
#slider .viewer .reel {

    display: none;
    width: 960px;
    height: 300px;
}
#slider .viewer .reel .slide {

    position: relative;
    width: 960px;
    height: 300px;
}
/*slider*/ 
```

# iphone - UISegmentedControl`` 在导航项上崩溃 Xcode

> ID：15360934
> 
> 赞同：0
> 
> 时间：2013-03-12T12:14:56.240
> 
> 标签：iphone, ios, ipad, uisegmentedcontrol, uinavigationitem

我正在尝试穿上它`UISegmentedControl`，`Navigation Item` 但它使我的 xcode 崩溃.. 我只是`UISegmentedControl`在 Interface Builder 文件（IB）文件中添加了，然后在`viewDisAppear`

**。H**

```
 IBOutlet UISegmentedControl *segmentedControl; 
```

**.m**

```
 self.navigationItem.titleView=segmentedControl; 
```

这只会使我的xcode因错误而崩溃

```
2013-03-12 17:38:56.343 Magazine[4728:1dc03] *** Assertion failure in -[UINavigationBar layoutSublayersOfLayer:], /SourceCache/UIKit_Sim/UIKit-2372/UIView.m:5776
2013-03-12 17:38:56.344 Magazine[4728:1dc03] *** Terminating app due to uncaught exception 'NSInternalInconsistencyException', reason: 'Auto Layout still required after executing -layoutSubviews. UINavigationBar's implementation of -layoutSubviews needs to call super.'
*** First throw call stack:
(0x2854012 0x1ee9e7e 0x2853e78 0x197ff35 0xe819ef 0x1efd6b0 0x7d1fc0 0x7c633c 0x7c6150 0x7440bc 0x745227 0x7458e2 0x281cafe 0x281ca3d 0x27fa7c2 0x27f9f44 0x27f9e1b 0x2d1c7e3 0x2d1c668 0xe3165c 0x2de5 0x2ce5) 
```

libc++abi.dylib：终止调用抛出异常

为什么会出现这个错误

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:20:32.187

```
UISegmentedControl * seg1 = [[UISegmentedControl alloc]
    initWithItems:[NSArray arrayWithObjects:@"von mir", @"alle", nil]];
[seg1 setSegmentedControlStyle:UISegmentedControlStyleBar];
self.navigationItem.titleView = seg1; 
```

# excel - 从一个工作簿复制工作表并保存在新工作簿中，名称为单元格中的值

> ID：15360941
> 
> 赞同：0
> 
> 时间：2013-03-12T12:15:13.233
> 
> 标签：excel, vba

我想从 Workbook1 复制 Sheet2 并将其粘贴到新 Workbook 的 Sheet1 中，并将新 Workbook 保存为 Sheet2，Workbook 1 中单元格 A1 的值。我希望在单击添加的按钮时触发此宏.

这是我到目前为止所做的，但它创建了两个工作簿-一个具有正确名称但不是 Sheet2、Workbook1 的内容-另一个具有 Sheet2、Workbook1 的内容但不是正确的工作簿名称

```
Sub CreateWorkbook()

Dim n As String
n = ThisWorkbook.Path & "\" & Range("A1").Value & ".xls"
Workbooks.Add
ActiveWorkbook.SaveAs n
ThisWorkbook.Sheets("Sheet2").Copy
ActiveWorkbook.Sheets("Sheet1").PasteSpecial xlPasteValues

End Sub 
```

我在这里想念什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:16:48.273

我认为默认情况下创建的新工作簿不会`Workbooks.Add`成为`ActiveWorkbook`。

使用`ThisWorkbook`并`ActiveWorkbook`可能会感到困惑。

我喜欢将工作簿和工作表之类的东西设置为变量，这样你就知道你在处理什么:)

我无法让那位工作（尽管我没有`Copy`那么`PasteSpecial`努力）。

下面的例子应该做你想做的事。我用于`Sheet2!A1`文件名，不确定`AK545`您的代码示例中的内容。

```
Sub Example()
Dim Output As Workbook
Dim FileName As String

Set Output = Workbooks.Add
FileName = ThisWorkbook.Path & "\" & ThisWorkbook.Worksheets(2).Cells(1, 1).Value & ".xls"

Output.SaveAs FileName

Application.DisplayAlerts = False

Output.Worksheets("Sheet1").Delete
ThisWorkbook.Worksheets(2).Copy Before:=Output.Worksheets("Sheet2")
Output.Worksheets(1).Name = "Sheet1"

Application.DisplayAlerts = True

Output.Save

End Sub 
```

# c# - BeginInvoke 返回什么样的类？如何使用它来调用 EndInvoke？

> ID：15360942
> 
> 赞同：2
> 
> 时间：2013-03-12T12:15:13.300
> 
> 标签：c#

我正在通过 ASP.net 自下而上地工作，并且正在设置一个老式的委托模式：

```
 public delegate void ProcessRequestDelegate(HttpContext context);

    public IAsyncResult BeginProcessRequest(HttpContext context, AsyncCallback cb, object extraData)
    {
        ProcessRequestDelegate asyncDelegate = new ProcessRequestDelegate(ProcessRequest);
        return asyncDelegate.BeginInvoke(context, cb, extraData);
    }

    public void EndProcessRequest(IAsyncResult result)
    {
       //?? profit?
    } 
```

但我意识到，我不知道`IAsyncResult result`在`EndProcessRequest`函数中要转换什么。我试过：

```
 public void EndProcessRequest(IAsyncResult result)
    {
        // Compiler error because this is dumb
        ((ProcessRequestDelegate)result).EndInvoke(result);
    } 
```

但显然你不能将结果投射给代表。那么结束调用的正确方法是什么。更一般地说，返回什么样的类`Delegate.BeginInvoke`？

**更新**

所以我试了一下：

```
 public static void Main()
    {
        IAsyncResult result = BeginStuff("something", null, null);
        IAsyncResult result2 = BeginStuff("something else", null, null);

        EndStuff(result);
        EndStuff(result2);

        Console.ReadLine();
    }

    static Action<String> act = delegate(String str)
    {
        Thread.Sleep(TimeSpan.FromSeconds(2));
        Console.WriteLine("This seems to work");
        Thread.Sleep(TimeSpan.FromSeconds(2));
    };

    static Action<String> act2 = delegate(String str) { };

    public static IAsyncResult BeginStuff(String data, AsyncCallback callback, Object state)
    {
        return Program.act.BeginInvoke(data, callback, state);
    }

    public static void EndStuff(IAsyncResult result)
    {
        // This works fine no matter how many times BeginInvoke is called
        Program.act.EndInvoke(result);

        // This however will fail, because the delegate that began the invocation 
        // is not the same as the one that ends it.
        Program.act2.EndInvoke(result);
    } 
```

它似乎工作正常。只要使用相同的委托调用`BeginInvoke`/ `EndInvoke`，运行时就会处理其余部分（我猜这就是 IAsyncResult 的用途）。但是，如果您尝试结束使用其他委托，它会提醒您不要这样做。

**另一个更新**

我找到了一种更好的方法来做到这一点：

```
public void Operation()
{
    throw new FaultException<FrieldyError>(new FrieldyError("returned with this error"));
}

public IAsyncResult BeginOperation(AsyncCallback callback, object state)
{
    return ((Action)Operation).BeginInvoke(callback, state);
}

public void EndOperation(IAsyncResult result)
{
    ((Action)Operation).EndInvoke(result);
} 
```

由于您只需要使用相同类型的委托，因此您可以使用预先存在的委托之一，它工作正常。无需声明您自己的本地/私人代表。

有用！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-03-12T12:21:17.613

返回的具体类`Delegate.BeginInvoke`是什么对您来说并不重要，无论它是什么接口都提供了您等待其完成所需的一切（使用 a`WaitHandle`或轮询技术 [[示例](http://msdn.microsoft.com/en-gb/library/2e08f6yc.aspx)]）并调用`EndInvoke`.

另外，您已经指定了一个`AsyncCallback`参数，您不会直接传递`EndProcessRequest`给它吗？

例如，

```
this.BeginProcessRequest(
        HttpContext.Current, 
        this.EndProcessRequest, 
        "My extra data"); 
```

* * *

**评论后编辑：**

如果您`IHttpAsyncHandler`按照评论所述进行实施，则问题应该更少，因为您可以将委托实例存储为类的成员

```
public class ProcessRequestAsyncHandler ; IHttpAsyncHandler 
{
   private  ProcessRequestDelegate asyncDelegate;

   public IAsyncResult BeginProcessRequest(HttpContext context, AsyncCallback cb, object extraData)
    {
        asyncDelegate = new ProcessRequestDelegate(ProcessRequest);
        return asyncDelegate.BeginInvoke(context, cb, extraData);
    }

    public void EndProcessRequest(IAsyncResult result)
    {
        asyncDelegate.EndInvoke(result);
    }

    public bool IsReusable
    {
        get { return false; }
    }

    public void ProcessRequest(HttpContext context)
    {
       // Do something long-running
    }
} 
```

参考：

*   [http://madskristensen.net/post/How-to-use-the-IHttpAsyncHandler-in-ASPNET.aspx](http://madskristensen.net/post/How-to-use-the-IHttpAsyncHandler-in-ASPNET.aspx)
*   [http://msdn.microsoft.com/en-us/library/system.web.ihttpasynchandler.aspx](http://msdn.microsoft.com/en-us/library/system.web.ihttpasynchandler.aspx)
*   [http://msdn.microsoft.com/en-us/library/system.web.ihttphandler.isreusable.aspx](http://msdn.microsoft.com/en-us/library/system.web.ihttphandler.isreusable.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-03-12T12:20:25.010

您可以将其转换为[AsyncResult](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.messaging.asyncresult.aspx)对象。这包含诸如您的委托和`AsyncState`（您传入的对象`extraData`）之类的属性。要让你的代表，你可以试试这个

```
((ProcessRequestDelegate)((AsyncResult)result).AsyncDelegate)).EndInvoke(); 
```

AsyncDelegate属性获取调用异步调用的委托[。](http://msdn.microsoft.com/en-us/library/system.runtime.remoting.messaging.asyncresult.asyncdelegate.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-03-12T12:28:25.180

哦，是的，看来你必须这样做。这是您可以执行的操作：

```
public void EndProcessRequest(IAsyncResult result)
{
    ProcessRequestDelegate del = (ProcessrequestDelegate) result.AsyncState;
    object item = del.EndInvoke(result)
} 
```

请看这篇[文章](http://en.csharp-online.net/Delegates_and_Events%E2%80%94Callback_Methods)。

# html - 用从精灵裁剪的图像填充形状的正确方法

> ID：15360950
> 
> 赞同：0
> 
> 时间：2013-03-12T12:16:00.840
> 
> 标签：html, canvas, kineticjs

我对 KineticJS 中使用组合图像文件（精灵）中的部分图像（裁剪）填充形状的“正确”方式感到有些困惑。

似乎可以使用具有定义偏移量的 fillPatternImage ，这似乎可以绘制完整的图像，尽管图像的其余部分不可见。在我将这些形状移动到额外的图层后，我才获得了可接受的性能，因为我的精灵相对较大，并且不正确裁剪的影响会显着降低 fps。

我发现的所有替代品都使用属性“fill”和另一个属性“image”，但这似乎每次都会导致黑色背景。

使用图像形状会有所帮助，但很少使用，因为我的形状很少是矩形的。

由于 KineticJS 文档没有提到指定裁剪坐标（“只是”偏移，没有宽度和高度），那么绝对正确的方法是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T14:18:18.350

绝对“绝对正确的方法”将取决于平台和您的特定代码，但是。

你看过精灵吗？[http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-sprite-tutorial/](http://www.html5canvastutorials.com/kineticjs/html5-canvas-kineticjs-sprite-tutorial/)。

为了掩盖简单的动画精灵，我会在每次绘制后使用它来添加纯 JavaScript。

```
context.globalCompositeOperation = 'destination-in'; 
```

至少，使用复合操作的 drawImage 的性能比在 webkit 上手动绘制形状要好。

# extjs4 - 在 extjs 中使用 createDelegate

> ID：15360952
> 
> 赞同：2
> 
> 时间：2013-03-12T12:16:04.520
> 
> 标签：extjs4

这是我第一次尝试将用户定义的参数传递给 IE9 的 extjs(4.0.1) 中的处理函数。我有下面的代码，但它会抛出一个错误，指出`SCRIPT438: Object doesn't support property or method 'createDelegate'`. 我不确定我做错了什么。请帮忙。

.js 文件：

```
Ext.onReady(function() {

    var appendBooleanOrInsertionIndex = 0; 
    var myButtonHandler = function(item,a, b, arg){
           alert(a + " "+ b);
        };

var myButton = new Ext.Button({
       id : 'myButton',
       //renderTo : 'mybutton',
       text : 'Save',
       handler : myButtonHandler.createDelegate(this, ['Hi', 'Kart'], appendBooleanOrInsertionIndex),
       scope : this
    });
}); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-03-12T12:36:35.863

Ext 在 Ext 4 中停止向原生类原型添加逻辑。使用[Ext.Function.bind](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Function-method-bind)或[Ext.Function.pass](http://docs.sencha.com/ext-js/4-0/#!/api/Ext.Function-method-pass)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-13T06:18:24.270

更正后的代码如下：

```
Ext.onReady(function() {

    var myButtonHandler = function(a, b){//alert("-->");
           alert(a + " "+ b);
        };

        Ext.create('Ext.panel.Panel', {
            renderTo: Ext.getBody(),
            width: 800,
            height: 300,
            layout: 'column',
            title: 'Container Panel',
            //html: 'parent panel',
            items: [
                {
                    xtype: 'button',
                    id: 'mbutton',
                    text : 'My Button',
                    handler : Ext.Function.pass(myButtonHandler, ['Hi', 'Kart!!!!'])
                }
            ]
        });
}); 
```

# web-services - 通过 Web 服务（或 JAXB）进行 XML 绑定

> ID：15360959
> 
> 赞同：1
> 
> 时间：2013-03-12T12:16:21.437
> 
> 标签：web-services, jakarta-ee, xml-serialization

我必须维护一个 Java EE 5 Web 应用程序。此应用程序的一部分是通过 Web 服务（使用 WSDL 合同）交换消息。wsdl 用于通过 Eclipse wsdl2Java 生成 Java 类（我认为它使用 Axis）

现在我必须实现一个修改，我们通过 Web 服务调用的服务器必须能够以异步方式响应。事实上，服务器不会立即响应 SOAP 消息响应，但会在一段时间后调用客户端（我们的 Web 应用程序）公开的 Web 服务，将第一次调用的 SOAP 消息响应作为第二次调用的字段（参数）传递Web 服务调用。
然后，客户端将 SOAP 响应（或 XML）保存在一个文件中。

*   有没有办法使用这个 XML 或 SOAP 消息文件填充已经生成的 Java 类？我的意思是一种模拟服务器直接响应的方法（提供 Axis 绑定存根）

    我也尝试过使用 JAXB（将 XML 绑定到 JAVA），但由于 SOAP 消息响应很复杂，所以当我调用 JAXBContext 时收到错误消息：

    ```
    CodPrestazione does not have a no-arg default constructor 
    ```

    因为这个类是 wsdl2Java 生成的枚举类。

*   有没有办法在不注释或修改java类的情况下绕过这个错误（这个类是生成的，所以我将被迫在每次重新生成时修改这个类）？

*   使用保存的 SOAP 消息文件（或 XML）的最佳方式是什么？或者，如何使用 Axis 1.3 反序列化 SOAP？

# python - 在python中连接字符串有什么更好的方法？

> ID：15360961
> 
> 赞同：20
> 
> 时间：2013-03-12T12:16:23.277
> 
> 标签：python, string, string-concatenation

将“更好”理解为更快、更优雅、更易读。

我有两个字符串 ( `a`and `b`) 可以为空或不为空。只有当两者都不为空时，我才想用连字符分隔它们：

`a - b`

`a`（如果 b 为空）

`b`（其中 a 为空）

* * *

## 回答 #1

> 赞同：47
> 
> 时间：2013-03-12T12:21:32.880

```
# Concatenates a and b with ' - ' or Coalesces them if one is None
'-'.join([x for x in (a,b) if x]) 
```

**编辑**
这里是这个算法的结果（注意 None 将与 '' 一样工作）：

```
>>> '-'.join([x for x in ('foo','bar') if x])
'foo-bar'
>>> '-'.join([x for x in ('foo','') if x])
'foo'
>>> '-'.join([x for x in ('','bar') if x])
'bar'
>>> '-'.join([x for x in ('','') if x])
'' 
```

*另请注意，Rafael 在下面的帖子中的评估仅显示 1000 次过滤方法迭代的差异只有 0.0002 秒，可以推断出如此小的差异可能是由于当时可用系统资源的不一致造成的运行脚本。我在几次迭代中运行了他的 timeit 实现，发现这两种算法在大约 50% 的时间里都会更快，而且幅度都不大。从而表明它们基本上是等价的。

* * *

## 回答 #2

> 赞同：36
> 
> 时间：2013-03-12T12:21:47.630

像这样简单的东西怎么样：

```
# if I always need a string even when `a` and `b` are both null,
# I would set `output` to a default beforehand.
# Or actually, as Supr points out, simply do `a or b or 'default'`
if a and b:
    output = '%s - %s' % (a, b)
else:
    output = a or b 
```

编辑：这个线程中有很多有趣的解决方案。我选择这个解决方案是因为我强调可读性和快速性，至少在实现方面是这样。它不是最具可扩展性或最有趣的解决方案，但在这个范围内它是有效的，并且让我可以非常快速地处理下一个问题。

* * *

## 回答 #3

> 赞同：31
> 
> 时间：2013-03-12T12:45:17.387

哇，这似乎是一个热门问题：p 我的建议：

```
' - '.join(filter(bool, (a, b))) 
```

这使：

```
>>> ' - '.join(filter(bool, ('', '')))
''
>>> ' - '.join(filter(bool, ('1', '')))
'1'
>>> ' - '.join(filter(bool, ('1', '2')))
'1 - 2'
>>> ' - '.join(filter(bool, ('', '2')))
'2' 
```

显然，`None`行为`''`与此代码类似。

* * *

## 回答 #4

> 赞同：12
> 
> 时间：2013-03-12T12:19:09.677

这是一种选择：

```
("%s - %s" if (a and b) else "%s%s") % (a,b) 
```

编辑：正如 mgilson 所指出的，这段代码会以`None`“更好的方式（但可读性较差）失败”是：

```
"%s - %s" % (a,b) if (a and b) else (a or b) 
```

* * *

## 回答 #5

> 赞同：4
> 
> 时间：2013-03-12T18:28:58.740

我只是想提供 toxotes 的解决方案，使用`format`.

```
output = "{0} - {1}".format(a, b) if (a and b) else (a or b) 
```

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2013-03-12T13:42:55.117

这里有很多答案:)

两个最佳答案（一行中的性能和干净代码）是@icecrime 和@Hoopdady 的答案

两者的结果相同，唯一的区别是性能。

```
cases = [
 (None, 'testB'),
 ('', 'testB'),
 ('testA', 'testB'),
 ('testA', ''),
 ('testA', None),
 (None, None)
]

for case in cases: print '-'.join(filter(bool, case))
'testB'
'testB'
'testA-testB'
'testA'
'testA'

for case in cases: print '-'.join([x for x in case if x])
'testB'
'testB'
'testA-testB'
'testA'
'testA' 
```

所以让我们做一个基准测试:)

```
import timeit

setup = '''
cases = [
  (None, "testB"),
  ("", "testB"),
  ("testA","testB"),
  ("testA", ""),
  ("testA", None),
  (None, None)
]
'''

print min(timeit.Timer(
  "for case in cases: '-'.join([x for x in case if x])", setup=setup
).repeat(5, 1000))
0.00171494483948

print min(timeit.Timer(
  "for case in cases: '-'.join(filter(bool, case))", setup=setup
).repeat(5, 1000))
0.00283288955688 
```

但是，正如@mgilson 所说，使用`None`而不是`bool`作为函数 in`filter`产生相同的结果并且具有更好的性能：

```
print min(timeit.Timer(
  "for case in cases: '-'.join(filter(None, case))", setup=setup
).repeat(5, 1000))
0.00154685974121 
```

所以，最好的结果是@icecrime 在@mgilson 的建议下给出的答案：

```
'-'.join(filter(None, (a,b))) 
```

性能差异以每 1000 次迭代的毫秒数（每次迭代微秒）为单位。所以这两种方法的性能相当，而且，对于几乎任何项目，你都可以选择任何一种；如果你的项目必须有更好的性能，考虑到微秒，你可以遵循这个基准:)

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2020-04-14T10:14:06.943

像这样做： `'-'.join(max(x,'') for x in [a,b] if x is not None)`

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2013-03-12T12:21:56.307

试试这个：

```
def myfunc(a,b):
    if not b:
        return a
    elif not a:
        return b
    else:
        return a+' - '+b 
```

或者

```
def myfunc(a,b):
    if a and b:
        return a+' - '+b
    else:
        return a or b 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2013-03-12T16:28:27.267

一些pythonian，可读和优雅：

```
strings = string1, string2

'{0}{1}{2}'.format(
    # output first string if it's not empty
    strings[0] if strings[0] else '',

    # join with hyphen if both strings are not empty    
    '-' if all(strings) else '',

    # output second string if it's not empty
    strings[1] if strings[1] else ''
    ) 
```

而且也很快；）

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2013-03-12T16:30:38.760

我会这样做：

```
def show_together(item1=None, item2=None, seperator='-'):
    return '%s%s%s' % (item1,seperator,item2) if item1 and item2 else item1 or item2

>>> show_together(1,1)
'1-1'

>>> show_together(1)
1

>>> show_together()
>>> show_together(4,4,'$')
'4$4' 
```

# mysql - MySql 更新触发器。DELIMITER 错误

> ID：15360964
> 
> 赞同：1
> 
> 时间：2013-03-12T12:16:34.197
> 
> 标签：mysql, sql

我尝试在 MySql 中创建触发器，但出现以下错误：

> #1064 - 您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“DELIMITER”附近使用正确的语法

```
DELIMITER $$
CREATE TRIGGER library_update
AFTER UPDATE ON wq6vt_vehiclemanager_vehicles
FOR EACH ROW 
BEGIN
    INSERT IGNORE INTO wq6vt_vehiclemanager_library (maker, model) VALUES(NEW.maker, NEW.vmodel);

    INSERT INTO wq6vt_vehiclemanager_library_data (co2_class) 
      SELECT co2_class FROM wq6vt_vehiclemanager_vehicles
      WHERE maker = NEW.maker AND vmodel = NEW.vmodel;   
END $$
DELIMITER; 
```

触发器中的第一个查询不会导致错误，但第二个会导致错误。INSERT 内部的 SELECT 存在一些问题......我想是的

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:17:08.877

关键字和符号之间应该有一个空格，

```
DELIMITER ;
      -- ^  space in between here 
```

# java - @PreAuthorize 不适用于方法安全规则和方法参数

> ID：15360965
> 
> 赞同：11
> 
> 时间：2013-03-12T12:16:34.017
> 
> 标签：java, spring-security, annotations, aspectj

我正在将 Spring Security 添加到一个 Spring 项目中。系统架构为 REST，用户可以访问不同的资源。

我想向拥有此信息的管理员和用户授予访问个人信息的权限。我开始很简单：像这样过滤用户配置文件：

在我的**服务层**中，我想使用方法注释并包含方法参数..

```
@PreAuthorize("hasRole('ROLE_ADMIN') or principal.userId == #id")
public Usuario getUser(int id) throws DAOException {
    ...
} 
```

但这根本行不通。**当请求此 URL（ Web 层**）时，任何用户都可以看到所有配置文件（管理员和所有用户）：

```
@RequestMapping(value="/user/{uid}", method=RequestMethod.GET)
    public ModelAndView getUser(@PathVariable int uid) throws DAOException {
        userDAO = new UsuarioJPADAO();
        userService.setUsuarioDAO(userDAO);

    return new ModelAndView("user", "user", userService.getUser(uid));
} 
```

这是我的`security.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<beans:beans xmlns="http://www.springframework.org/schema/security"
       xmlns:beans="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xsi:schemaLocation="
       http://www.springframework.org/schema/beans 
       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/security
       http://www.springframework.org/schema/security/spring-security-3.1.xsd">

<!-- Security Annotations -->
    <global-method-security 
        pre-post-annotations="enabled"/>

<http auto-config="true" use-expressions="true">
    <intercept-url pattern="/css/**" access="permitAll" />
    <intercept-url pattern="/images/**" access="permitAll" />
    <intercept-url pattern="/js/**" access="permitAll" />
    <intercept-url pattern="/favicon.ico" access="permitAll" />
    <intercept-url pattern="/login" access="permitAll" />

    <intercept-url pattern="/users" access="hasRole('ROLE_ADMIN')" />
    <intercept-url pattern="/users/page/*" access="hasRole('ROLE_ADMIN')" />
    <intercept-url pattern="/customers" access="hasRole('ROLE_ADMIN')" />
    <intercept-url pattern="/employees" access="hasRole('ROLE_ADMIN')" />

    <intercept-url pattern="/search/*" access="hasRole('ROLE_ADMIN')" />

    <intercept-url pattern="/*" access="hasAnyRole('ROLE_ADMIN, ROLE_EMPLOYEE, ROLE_PARTNER, ROLE_USER')" />
    <intercept-url pattern="/*/*" access="hasAnyRole('ROLE_USER, ROLE_ADMIN')" />
    <intercept-url pattern="/*/*/*" access="hasAnyRole('ROLE_USER, ROLE_ADMIN')" />
    <intercept-url pattern="/*/*/*/*" access="hasAnyRole('ROLE_USER, ROLE_ADMIN')" />
    <intercept-url pattern="/*/*/*/*/*" access="hasAnyRole('ROLE_USER, ROLE_ADMIN')" />
    <intercept-url pattern="/*/*/*/*/*/*" access="hasAnyRole('ROLE_USER, ROLE_ADMIN')" />
    <intercept-url pattern="/*/*/*/*/*/*/*" access="hasAnyRole('ROLE_USER, ROLE_ADMIN')" />
    <form-login login-page="/login" login-processing-url="/doLogin" 
                authentication-failure-url="/login?error"
                username-parameter="username" password-parameter="password"
                default-target-url="/default" />

    <logout invalidate-session="true" logout-success-url="/login?logout" logout-url="/logout"/>
</http>
<authentication-manager>
    <authentication-provider user-service-ref="UsuarioService">
    </authentication-provider>
</authentication-manager> 
```

我已经检查了[Spring Security 3.1 书](http://www.packtpub.com/spring-security-3-1/book)，显然我的配置与书中的建议一致。我已经阅读了其他 Stack Overflow 帖子（[此处](https://stackoverflow.com/questions/14260135/spring-how-to-protect-restful-private-resources)和[此处](https://stackoverflow.com/questions/14185070/spring-securityintercept-url-pattern-access-id-1?lq=1)），但我没有运气。

**更新：**添加`application-context.xml`

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:p="http://www.springframework.org/schema/p"       
       xmlns:aop="http://www.springframework.org/schema/aop"
       xmlns:tx="http://www.springframework.org/schema/tx"
       xmlns:mvc="http://www.springframework.org/schema/mvc"
       xmlns:security="http://www.springframework.org/schema/security"
       xmlns:context="http://www.springframework.org/schema/context"
       xmlns:jee="http://www.springframework.org/schema/jee"
       xsi:schemaLocation="http://www.springframework.org/schema/beans
       http://www.springframework.org/schema/beans/spring-beans-3.1.xsd
       http://www.springframework.org/schema/aop 
       http://www.springframework.org/schema/aop/spring-aop-3.1.xsd
       http://www.springframework.org/schema/tx 
       http://www.springframework.org/schema/tx/spring-tx-3.1.xsd
       http://www.springframework.org/schema/mvc
       http://www.springframework.org/schema/mvc/spring-mvc-3.1.xsd
       http://www.springframework.org/schema/context
       http://www.springframework.org/schema/context/spring-context-3.1.xsd
       http://www.springframework.org/schema/security
       http://www.springframework.org/schema/security/spring-security-3.1.xsd">

    <context:annotation-config />

<context:component-scan base-package="com.pe.fs" />

<mvc:annotation-driven />

<mvc:resources mapping="/**" location="/" />   

<mvc:interceptors>
<bean class="org.springframework.web.servlet.i18n.LocaleChangeInterceptor">
    <property name="paramName" value="lang" />
</bean>
</mvc:interceptors>

<!-- DataSource -->
<bean id="jpaDataSource" class="oracle.jdbc.pool.OracleDataSource"
    destroy-method="close" 
    p:driverType="oracle.jdbc.OracleDriver" 
    p:user="**********"
    p:password="**********"
    p:uRL="jdbc:oracle:thin:@localhost:1521:XE"
/>

<bean id="entityManagerFactory" class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean">
    <property name="persistenceXmlLocation" value="classpath*:META-INF/persistence.xml"></property>
    <property name="persistenceUnitName" value="freesunPU" />
    <property name="dataSource" ref="jpaDataSource" />
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.EclipseLinkJpaVendorAdapter">
            <property name="showSql" value="false" />
        </bean>
    </property>
    <property name="loadTimeWeaver">
        <bean class="org.springframework.instrument.classloading.InstrumentationLoadTimeWeaver"/>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager"
    p:entityManagerFactory-ref="entityManagerFactory" />

<tx:annotation-driven mode="aspectj"/>

<context:load-time-weaver aspectj-weaving="autodetect" /> 
```

**更新：**我已添加`spring-security-aspects`到 POM 并且没有任何更改。答案中建议的其他更改已经过测试，但此类注释`@PreAuthorize`仍然无效。这是上下文之间的问题吗？可以是aspectJ的用法吗？

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-03-13T11:37:52.523

最后我找到了解决方案。在 SO 我找到了一些有用的答案。见[这里](https://stackoverflow.com/a/11401144/1242531)和[这里](https://stackoverflow.com/a/10096570/1242531)。

我移动`global-method-security`到`application-context.xml`哪个是我的服务的上下文。

```
<security:global-method-security 
    mode="aspectj"
    secured-annotations="enabled"
    jsr250-annotations="disabled"
    pre-post-annotations="enabled"/> 
```

正如Javadoc`mode="aspectj"`所说：

> ...可用于指定应使用 AspectJ 而不是默认的 Spring AOP。如果设置，则必须使用 spring-security-aspects 模块中的 AnnotationSecurityAspect 编织安全类。

当然，我已经添加到 POM `spring-security-aspects`：

```
<dependency>
    <groupId>org.springframework.security</groupId>
    <artifactId>spring-security-aspects</artifactId>
    <version>3.1.3.RELEASE</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:36:12.573

添加新界面：

```
public interface UserService extends UserDetailsService {
    Usuario getUser(int id) throws DAOException
} 
```

在您的用户服务中实现它，然后重试。Spring 将能够使用 JDK 代理添加请求的授权检查。

作为另一种选择，您可以将 Spring 配置为使用一些更重量级的库，如 Javassist 甚至 AspectJ。在这种情况下，不需要接口。

**编辑。**确保`global-method-security`在与您的用户服务 bean 相同的 spring 上下文中声明它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-18T11:50:05.280

使其工作的另一种方法是在您的 security.xml 中添加以下代码

```
<intercept-url pattern="/user/**" access="hasRole('ROLE_ADMIN')" /> 
```

它将确保只有管理员可以访问以模式 /user/ 开头的资源。

# bash - 用空格引用参数以供以后执行

> ID：15360967
> 
> 赞同：1
> 
> 时间：2013-03-12T12:16:38.013
> 
> 标签：bash, shell, parameters, quote

我有这个（测试）脚本：

```
#!/bin/bash

my_cmd_bad_ ( ) {
    cmd="$@"
    $cmd
}

my_cmd_good_ ( ) {
    "$@"
}

my_cmd_bad_  ls -l "file with space"
my_cmd_good_ ls -l "file with space" 
```

输出是（文件不存在，这*不是*这个问题的重点）：

```
» ~/test.sh
ls: cannot access file: No such file or directory
ls: cannot access with: No such file or directory
ls: cannot access space: No such file or directory
ls: cannot access file with space: No such file or directory 
```

我很惊讶第一个版本没有按预期工作：参数没有被引用，而不是处理一个文件，而是处理三个。为什么？

如何保存要执行的命令并正确引用？我需要稍后执行它，我不再有它`"$@"`了。

对此测试脚本的简单返工将不胜感激。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:59:54.720

请参阅类似的问题：[如何使用存储在单个变量中的引号传递命令行参数？](https://stackoverflow.com/questions/10449233/how-to-pass-command-line-parameters-with-quotes-stored-in-single-variable)

使用这些实用函数将命令保存到字符串以供以后执行：

```
bash_escape() {
  # backtick indirection strictly necessary here: we use it to strip the
  # trailing newline from sed's output, which Solaris/BSD sed *always* output
  # (unlike GNU sed, which outputs "test": printf %s test | sed -e s/dummy//)
  out=`echo "$1" | sed -e s/\\'/\\''\\\\'\\'\\'/g`
  printf \'%s\' "$out"
}
append_bash_escape() {
  printf "%s " "$1"
  bash_escape "$2"
}

your_cmd_fixed_ ( ) {
  cmd="$@"
  while [ $# -gt 0 ] ; do
    cmd=`append_bash_escape "$cmd" "$1"` ; shift
  done
  $cmd
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T12:50:55.707

您正在将三个以空格分隔的字符串“ls”、“-l”和“带空格的文件”组合成一个以空格分隔的字符串`cmd`。无法知道最初引用了哪些空格（在“带空格的文件”中）以及在分配给`cmd`.

通常，尝试将命令行构建到单个字符串中并不是一个好主意。使用函数，或隔离实际命令并将参数保留在`$@`.

像这样重写命令：

```
my_cmd_bad_ () {
    cmd=$1; shift
    $cmd "$@"
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-03-12T14:06:23.543

您可以引用任何单个参数并稍后对其进行评估：

```
my_cmd_bad_ ( ) {
  j=0
  for i in "$@"; do
    cmd["$j"]=\"$"$i"\"
    j=$(( $j + 1 ))
   done;
  eval ${cmd[*]}
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-12T13:24:17.147

见[http://mywiki.wooledge.org/BashFAQ/050](http://mywiki.wooledge.org/BashFAQ/050)

请注意，大多数情况下，您的第二个版本非常受欢迎。唯一的例外是如果你需要做一些特别的事情。例如，您不能将分配或重定向或复合命令捆绑到参数列表中。

处理报价问题的正确方法需要非标准功能。涉及模板的半现实示例：

```
function myWrapper {
    typeset x IFS=$' \t\n'
    { eval "$(</dev/fd/0)"; } <<-EOF
    for x in $(printf '%q ' "$@"); do
        echo "\$x"
    done
EOF
}

myWrapper 'foo bar' $'baz\nbork' 
```

确保您完全了解这里发生的事情，并且您确实有充分的理由这样做。它需要确保副作用不会影响论点。这个具体的例子并没有展示一个很好的用例，因为一切都是硬编码的，所以你可以提前正确地转义，如果你愿意的话，可以扩展引用的参数。

# c++ - 根据 Qt 中的硬件调整主窗口的大小？

> ID：15360971
> 
> 赞同：1
> 
> 时间：2013-03-12T12:16:49.143
> 
> 标签：c++, qt

我已经使用大部分`Widgets`in`Qt Creator's Designer`模块开发了我的应用程序。我已经*硬编码*了我的大小，`widgets`具体取决于它们在我的笔记本电脑上的显示方式。昨天当我在我的桌面上运行应用程序时（屏幕分辨率低于笔记本电脑），其中一些`Main Window` `widgets`是不可见的，在启动时有`horizontal scrollbar`，我不得不滚动才能看到那些`widgets`；我的笔记本电脑不是这种情况。我有两个问题：

1.  是否可以通过使用一些来调整我所有的小部件（**即使是那些通过代码添加运行时的**`resize factor`小部件）的大小？也许在启动时我会得到运行应用程序的硬件的屏幕分辨率，然后创建一个与我的笔记本电脑分辨率的比率。是否可以在不为每个小部件添加代码的情况下将此因子乘以所有小部件？

2.  如何获得运行我的应用程序的屏幕的分辨率？

PS：我想知道解决这个问题的实际方法......谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T13:23:44.447

您应该使用[Layouts](http://qt-project.org/doc/qt-4.8/layout.html)来管理小部件的大小策略。

> 当可供它们使用的空间量发生变化时，Qt 布局会自动定位和调整小部件的大小，以确保它们的排列一致并且整个用户界面仍然可用。”

您还可以查看[此问题](https://stackoverflow.com/q/4553304/285582)以获取有关 Qt 中布局机制的更多信息。

Qt 网站有关于这个主题的优秀文档。您可以从[此处](http://qt-project.org/doc/qt-4.8/designer-layouts.html)开始了解有关在 Qt Designer 中使用布局的更多信息。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-03-12T18:54:29.210

您可以尝试这样的功能：

resize(theDesktop->screenGeometry().width()*PERCENTAGE_OF_MONITOR_WIDTH_FOR_SCREEN, theDesktop->screenGeometry().height()*PERCENTAGE_OF_MONITOR_HEIGHT_FOR_SCREEN);

Resize 是 QWidget 类的成员函数，PERCENTAGE_OF_MONITOR 变量将是您希望应用程序占用的监视器的任何百分比。

theDesktop 属于 QDesktopWidget 类型。

# java - 使用滑动菜单幻灯片动画启动 Activity

> ID：15360974
> 
> 赞同：1
> 
> 时间：2013-03-12T12:16:53.313
> 
> 标签：java, android, android-activity, menu, sliding

我在我的应用程序中实现了滑动菜单库，但导航有问题。在后面的视图中，我设置了一些按钮，当按下这些按钮时会改变我当前活动的片段。通常，当片段发生变化时，Activity 会滑回原位。但是我遇到了一个问题，我被迫在按钮单击时使用新的活动。问题是，当我启动新活动时，它会打开一个新的“屏幕”（如预期的那样）。我想要做的是将屏幕滑回到它的原始位置与新的活动。有什么办法可以做到这一点？基本上，我想启动一个带有下拉导航和 2 个正常活动的活动。

# sql - 如何在表上选择并计算出现的一些值

> ID：15360976
> 
> 赞同：8
> 
> 时间：2013-03-12T12:16:59.753
> 
> 标签：sql, jpa, join, count, oracle11g

我向您寻求帮助是因为我不太了解 SQL。

我需要从表列中计算一些值的出现次数，以实现类似于统计表的效果，如下图所示：

## 需要的结果：

![在此处输入图像描述](../Images/7ba9b13709cd00636a64e1e2a3e814f4.png)

## 评论：

我的结果表需要有前两列（contry 和 site）来自第一个表“Violations”，接下来的 5 列将包含 Status 表中每个可能的 id 值中的“Violations”中出现的 status_id 的数量（计数）。

## 解释：

所以，我有两个表：违规和状态。请看我的[sqlfiddle](http://www.sqlfiddle.com/#!2/fb466/1/0)

违规行为：

*   身份证长，
*   国家 varchar(20),
*   网站 varchar(20),
*   status_id long, <--这是状态表中的状态id。
*   ...在这种情况下其他列不重要

地位：

*   身份证长，
*   status long 列“status”具有映射到字符串值的值 (1-4)：Suspected Violation (1)、Confirmed Violation (2)、Confirmed No Violation (3)、未确定 (4)

在我的加入（或仅基于一个表违规）的结果是拥有应该包含列的表：

*   来自违规表：“国家/地区”和“网站”
*   来自状态表：“怀疑违规”、“确认违规”、“确认无违规”、“未确定”、“总计”（其中此列是违规表中出现的计数器）。

## 当前状态和新要求：

第一次尝试在下面完成（感谢 bluefeet），几乎是完美的......

```
select v.country,
v.site,
    SUM(case when s.id = 1 then 1 else 0 end) Total_SuspectedViolations,
    SUM(case when s.id = 2 then 1 else 0 end) Total_ConfirmedViolations,
    SUM(case when s.id = 3 then 1 else 0 end) Total_ConfirmedNoViolations,
    SUM(case when s.id = 4 then 1 else 0 end) Total_NotDetermined,
    COUNT(*) Total
from violations v
inner join status s
    on v.status_id = s.id
group by v.country, v.site 
```

或不加入：

```
select v.country,
v.site,
    SUM(case when v.status_id = 1 then 1 else 0 end) Total_SuspectedViolations,
    SUM(case when v.status_id = 2 then 1 else 0 end) Total_ConfirmedViolations,
    SUM(case when v.status_id = 3 then 1 else 0 end) Total_ConfirmedNoViolations,
    SUM(case when v.status_id = 4 then 1 else 0 end) Total_NotDetermined,
    COUNT(*) Total
from violations v
group by v.country, v.site 
```

...但不包括您在图片中看到的 3 个问题。我是说：

*   “-全部-”应计算所有国家/地区的出现次数
*   “-未知-”应该计算一些不被认可的国家的出现次数
*   “-全部-”（针对每个国家/地区）-应该计算一个国家/地区内的发生情况

## 附加说明：

*   `-Unknown-`意义：

Unknown 应该计算例如在 DB Country 表中不存在或名称/id 错误的国家/地区的出现次数，这就是为什么在这里被视为`Unknown`（我忘了提到 DB 中有表`Country`）。站点也是如此，`Unknown`站点意味着有人在 Violations.status_id 中输入了错误的值，而不是在范围 (1-4) 中，因为这些只是状态表中存在的可接受值。

*   我们可以假设表 Country 如下所示：

国家：

*   身份证长，
*   名称 varchar(30)

请帮助我编写包含这 3 个条件的正确 sql 查询，因为我有一个大问题要做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T12:30:26.197

使用`with rollup`您将获得所需的总和字段

```
select v.country,
v.site,
SUM(case when s.id = 1 then 1 else 0 end) Total_SuspectedViolations,
SUM(case when s.id = 2 then 1 else 0 end) Total_ConfirmedViolations,
SUM(case when s.id = 3 then 1 else 0 end) Total_ConfirmedNoViolations,
SUM(case when s.id = 4 then 1 else 0 end) Total_NotDetermined,
COUNT(*) Total
from violations v
     inner join status s
     on v.status_id = s.id
group by v.country, v.site WITH ROLLUP 
```

希望这可以帮助

**[参考](http://dev.mysql.com/doc/refman/5.0/en/group-by-modifiers.html)**`with rollup`文档_

[**小提琴**](http://www.sqlfiddle.com/#!2/fb466/21)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:28:38.973

***All*** case 可以使用语句轻松完成（`UNION`结果请参见[sqlFiddle](http://www.sqlfiddle.com/#!2/fb466/23)）：

```
(SELECT v.country,
    v.site,
    SUM(CASE WHEN v.status_id = 1 THEN 1 ELSE 0 END) Total_SuspectedViolations,
    SUM(CASE WHEN v.status_id = 2 THEN 1 ELSE 0 END) Total_ConfirmedViolations,
    SUM(CASE WHEN v.status_id = 3 THEN 1 ELSE 0 END) Total_ConfirmedNoViolations,
    SUM(CASE WHEN v.status_id = 4 THEN 1 ELSE 0 END) Total_NotDetermined,
    COUNT(*) Total,
    0  'isAll'
FROM violations v
GROUP BY v.country, v.site)
union(
SELECT v.country,
    '- All -',
    SUM(CASE WHEN v.status_id = 1 THEN 1 ELSE 0 END) Total_SuspectedViolations,
    SUM(CASE WHEN v.status_id = 2 THEN 1 ELSE 0 END) Total_ConfirmedViolations,
    SUM(CASE WHEN v.status_id = 3 THEN 1 ELSE 0 END) Total_ConfirmedNoViolations,
    SUM(CASE WHEN v.status_id = 4 THEN 1 ELSE 0 END) Total_NotDetermined,
    COUNT(*) Total,
  1  'isAll'
FROM violations v
GROUP BY v.country)
UNION (
SELECT '- All -',
    '- All -',
    SUM(CASE WHEN v.status_id = 1 THEN 1 ELSE 0 END) Total_SuspectedViolations,
    SUM(CASE WHEN v.status_id = 2 THEN 1 ELSE 0 END) Total_ConfirmedViolations,
    SUM(CASE WHEN v.status_id = 3 THEN 1 ELSE 0 END) Total_ConfirmedNoViolations,
    SUM(CASE WHEN v.status_id = 4 THEN 1 ELSE 0 END) Total_NotDetermined,
    COUNT(*) Total,
  1  'isAll'
FROM violations v)
ORDER BY country, isAll DESC, site 
```

但是，这种查询的性能可能不是很好，所以我并不是说它是最好的解决方案——但它确实有效。

***带有“未知”的版本***

[http://www.sqlfiddle.com/#!2/abfb7/21](http://www.sqlfiddle.com/#!2/abfb7/21)

```
(SELECT IF(c.name IS NULL, '- Unknow -', c.name) as name,
    v.site,
    SUM(CASE WHEN v.status_id = 1 THEN 1 ELSE 0 END) Total_SuspectedViolations,
    SUM(CASE WHEN v.status_id = 2 THEN 1 ELSE 0 END) Total_ConfirmedViolations,
    SUM(CASE WHEN v.status_id = 3 THEN 1 ELSE 0 END) Total_ConfirmedNoViolations,
    SUM(CASE WHEN v.status_id = 4 THEN 1 ELSE 0 END) Total_NotDetermined,
    COUNT(*) Total,
    0  'isAll'
FROM violations v LEFT JOIN country c ON c.name = v.country
GROUP BY c.name, v.site)
union(
SELECT IF(c.name IS NULL, '- Unknow -', c.name) as name,
    '- All -',
    SUM(CASE WHEN v.status_id = 1 THEN 1 ELSE 0 END) Total_SuspectedViolations,
    SUM(CASE WHEN v.status_id = 2 THEN 1 ELSE 0 END) Total_ConfirmedViolations,
    SUM(CASE WHEN v.status_id = 3 THEN 1 ELSE 0 END) Total_ConfirmedNoViolations,
    SUM(CASE WHEN v.status_id = 4 THEN 1 ELSE 0 END) Total_NotDetermined,
    COUNT(*) Total,
  1  'isAll'
FROM violations v LEFT JOIN country c ON c.name = v.country
GROUP BY c.name)
UNION (
SELECT '- All -',
    '- All -',
    SUM(CASE WHEN v.status_id = 1 THEN 1 ELSE 0 END) Total_SuspectedViolations,
    SUM(CASE WHEN v.status_id = 2 THEN 1 ELSE 0 END) Total_ConfirmedViolations,
    SUM(CASE WHEN v.status_id = 3 THEN 1 ELSE 0 END) Total_ConfirmedNoViolations,
    SUM(CASE WHEN v.status_id = 4 THEN 1 ELSE 0 END) Total_NotDetermined,
    COUNT(*) Total,
  1  'isAll'
FROM violations v LEFT JOIN country c ON c.name = v.country)
ORDER BY name, isAll DESC, site 
```

# nancy - 南希 640 X 480 屏幕分辨率

> ID：15360982
> 
> 赞同：0
> 
> 时间：2013-03-12T12:17:16.533
> 
> 标签：nancy

我需要支持 640 X 480 的南希基地网站。我对南希很陌生。我想知道有没有办法提供这种支持。如果是，我们如何使用 NancyFx 进行存档。

我的理解是我需要创建两个不同的 CSS。一个以正常分辨率加载，第二个是特定于 640 X 480 的屏幕分辨率。

因此，在加载任何 css 之前，我需要使用 Nancy 确定网站在哪个分辨率下呈现。

如果我的想法是错误的，或者我需要为此做些什么，请告诉我。

谢谢， 奇拉格

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:56:13.520

这与南希无关。就像我们在我们的用户组中所说的那样 - 您应该查看 CSS @media 查询，它将帮助您为不同的分辨率提供不同的 CSS。

# php - 制作一串复选框值数组并放入 qoma

> ID：15360983
> 
> 赞同：-1
> 
> 时间：2013-03-12T12:17:19.223
> 
> 标签：php, html

HTML

```
<label>Design</label><input type="checkbox" name="chk_name[]" value="design" />
<label style="width:40px;">Website</label><input type="checkbox" name="chk_name[]" value="website" />
<label>Inquire</label><input type="checkbox" name="chk_name[]" value="inquire" /> 
```

PHP

```
<?php
    if(!empty($_POST['chk_name'])) {

    foreach($_POST['chk_name'] as $val) {
        $chk = $val; checkbox.                  
        } 
    }
?> 
```

我想要在这里当我得到这个复选框的数组时，我得到逗号分隔的值，除了结束值的逗号。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:20:11.290

假设您的输入以表格形式发布（使用 POST 方法）：

```
echo implode(",", $_POST['chk_name']); 
```

[内爆文档](http://php.net/implode)

# c++ - 无法在 Qt 中从“QString”转换为“LPCWSTR”

> ID：15360984
> 
> 赞同：0
> 
> 时间：2013-03-12T12:17:22.737
> 
> 标签：c++, qt, qt4, filesystems

我正在开发一个需要显示 SD 卡的文件系统格式的应用程序。由于我找不到任何 Qt API，我选择了一个 Windows API **GetVolumeInformation**并按如下方式进行操作：

```
TCHAR volumeName[MAX_PATH + 1] = { 0 };
   TCHAR fileSystemName[MAX_PATH + 1] = { 0 };
   DWORD serialNumber = 0;
   DWORD maxComponentLen = 0;
   DWORD fileSystemFlags = 0;

   LPCWSTR path = deviceData->m_strPath;

   if (GetVolumeInformation(
       path,
       volumeName,
       ARRAYSIZE(volumeName),
       &serialNumber,
       &maxComponentLen,
       &fileSystemFlags,
       fileSystemName,
       ARRAYSIZE(fileSystemName)))
       {
                 qDebug()<<fileSystemName[0];
                 qDebug()<<fileSystemName[1];
                 qDebug()<<fileSystemName[2];
                 qDebug()<<fileSystemName[3];
                 qDebug()<<fileSystemName[4];
       } 
```

**path**表示 SD 卡路径，当我运行该应用程序时，它会引发以下错误：“无法从 'QString' 转换为 'LPCWSTR'”。我在哪里做错了？？？请帮忙！！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-03-12T12:19:56.227

你可以试试：

```
LPCWSTR path = deviceData->m_strPath.utf16(); 
```

# javascript - jQuery/JavaScript：仅在特定条件下更改变量

> ID：15360987
> 
> 赞同：0
> 
> 时间：2013-03-12T12:17:43.693
> 
> 标签：javascript, jquery, if-statement

好的，这可能真的是一个菜鸟问题，但我还是会问！

目前，我的函数定义如下：

```
function checkSize(size, otherSize, el) {
    if ($(el).width() <= 800) {
        size = otherSize;
    }

    alert(size);
} 
```

但这行不通。
起作用的是：

```
function checkSize(size, otherSize, el) {
    if ($(el).width() <= 800) {
        size = otherSize;
    } else {
        size = 5;
    }

    alert(size);
} 
```

但是那里的硬编码值显然非常糟糕。
所以实际上，我只想`size`在`otherSize`条件为真时成为，否则`size`应该不受影响。我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T13:15:54.933

在使用它之前，您应该确保参数是一个 int，但以防万一，如果不是，您可以尝试将其强制转换为整数：

```
function checkSize(size, otherSize, el) {
    if(typeof size != 'number'){
        size = parseInt(size, 10); // 10 is to define you are using a decimal system
    }

    if ($(el).width() <= 800) {
        size = otherSize;
    }

    alert(size);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T13:11:53.507

这不是你要找的：

```
function checkSize(size, otherSize, el) {
    if ($(el).width() <= 800) {
        size = otherSize;
    } else {
        size = $(el)width();
    }

    alert(size);
} 
```

# android - 是否有适用于coverflow 的OpenGL（或其他好的工作）解决方案？

> ID：15360989
> 
> 赞同：2
> 
> 时间：2013-03-12T12:17:56.793
> 
> 标签：android, opengl-es, coverflow, android-adapterview

我发现的所有coverflow解决方案都存在错误并且基于图库视图（已弃用并且效率非常低，尤其是内存，请[**在此处**](http://code.google.com/p/android/issues/detail?id=3376)和[**此处**](http://groups.google.com/group/android-developers/browse_thread/thread/9a9be423fcdadb98)阅读）并且当您为图像设置一些尺寸时它们会出现错误。

唯一可行的是[**付费库**](http://www.droidux.com/products/widgets-list-of-widgets/galleryflows)，但它不支持硬件加速（至少现在不支持），因此它在许多设备上变得非常慢，尤其是那些具有高分辨率的设备。

我还找到[**了一个使用 openGL 的解决方案**](http://stuartowen.com/home/?p=29)，但我找不到代码在哪里以及如何联系创建者。

我发现的另一个解决方案是使用[**Carousel**](http://code.google.com/p/android-ui-utils/downloads/detail?name=CarouselExample.zip&can=1&q=)示例，但它使用的 Renderscript 也已被弃用，而且我需要一个适用于旧 API 的解决方案。

有没有没有这些问题的可行解决方案？也许使用OpenGL的东西？

# javascript - 获取唯一的选择器 jQuery

> ID：15360991
> 
> 赞同：6
> 
> 时间：2013-03-12T12:18:04.783
> 
> 标签：javascript, jquery, jquery-selectors

我需要能够为页面上的每个元素获取一个 unqiue 选择器。

例如，当我单击一个元素时，我想做这样的事情：

```
$(document).click(function(){
    var sel = getUniqueSel(this);
}); 
```

因此，将`sel`值存储在数据库中后，我可以获取该值并简单地通过以下方式访问元素

`var el = $(sel);`

我无法更改并且对页面的 HTML 结构一无所知，也不能简单地为每个元素添加唯一 ID（使用 JS），因为这样效率低下。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-03-12T12:55:46.173

另一种方法可能是向上遍历 dom 树并创建元素的路径，您可以将其保存并稍后再次用作选择器，尽管这可能不是万无一失的，但也许这是您可以开始的地方。

*编辑：在评论中使用您的建议更新了答案，现在它返回 id（如果可用）*

只需访问[JSBin](http://jsbin.com/iyezoq/)上的示例并单击`document`两次。 *但请注意突出显示的内容..*

```
jQuery.fn.getPath = function () {
    if (this.length != 1) throw 'Requires one element.';
    var path, node = this;
    if (node[0].id) return "#" + node[0].id;
    while (node.length) {
        var realNode = node[0],
            name = realNode.localName;
        if (!name) break;
        name = name.toLowerCase();
        var parent = node.parent();
        var siblings = parent.children(name);
        if (siblings.length > 1) {
            name += ':eq(' + siblings.index(realNode) + ')';
        }
        path = name + (path ? '>' + path : '');
        node = parent;
    }
    return path;
};
var sel;
$(document)
    .click(function (e, a) {
    if (!sel) {
        sel = $("#comment-21702402")
            .getPath();
        alert("Path is: " + sel + ", hiding the Element -> Click again to highlight");
    } else {
        $(sel)
            .css("background-color", "yellow");
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-12T12:46:26.367

一种方法是获取您可以获取的有关被单击元素的所有信息。因此，当您将其保存到数据库时，您可以将其保存为文本，例如：如果您单击的元素是：`<div> I'm a div </div>`

```
$(document).click(function(){
    var tagName = $(this).prev().prop('tagName');
    var attributes = {}; 
    if( this.length ) {
        $.each( this[0].attributes, function( index, attr ) {
            attributes[ attr.name ] = attr.value;
        } ); 
    }
    var elText=$(this).html();
    saveToDB(tagName,attributes,elText);
}); 
```

您稍后可以使用您拥有的属性或简单地使用

```
$(tagName+'['+attribute+'="'+value+'"]:contains("'+elText+'")') 
```

我认为这应该有帮助

# c++ - 将类模板参数值之一指定为 any

> ID：15360995
> 
> 赞同：0
> 
> 时间：2013-03-12T12:18:32.257
> 
> 标签：c++, templates

考虑这个类：

```
template<class T, int select>
class Foo()
{
  public:
    Foo() {}
    ~Foo() {}
    Param<select> value;
    void SomeInitialization();
    ...
} 
```

我可以部分指定 SomeInitialization() 函数而不明确提及其`select`模板参数列表中的值吗？例如，我想将功能实现合并为一个：

```
template<>
void Foo<SomeClass, 0>::SomeInitialization() { ... }

template<>
void Foo<SomeClass, 1>::SomeInitialization() { ... }

template<>
void Foo<SomeClass, 2>::SomeInitialization() { ... } 
```

变成这样的东西（伪代码）：

```
template<>
void Foo<SomeClass>::SomeInitialization() { ... } 
```

where`select`可以是任何值，因为我`SomeInitialization()`的函数代码无论如何都不使用它，并且上面的所有函数都有相同的代码，但是我必须为每个`select`值复制粘贴它。

我怎样才能做到这一点？`Foo`请在我的帖子中使用示例类提供答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-12T12:21:21.100

如果您看一下[这个答案](https://stackoverflow.com/a/7755333/101090)，似乎您所要做的就是：

```
template<int N>
void Foo<SomeClass, N>::SomeInitialization() { ... } 
```