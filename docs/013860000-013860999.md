# StackOverflow 问答 13860000-13860999

# asp.net-mvc - 在 MVC 中从集中位置的控制器进行基于安全的重定向

> ID：13860002
> 
> 赞同：0
> 
> 时间：2012-12-13T12:35:03.703
> 
> 标签：asp.net-mvc, security

我正在使用 ASP.NET/MVC 并且需要向 ActionResult/ViewResult 控制器方法添加一些安全措施。基本上我需要确保用户与与页面关联的同一组织相关联，他们拥有什么级别的访问权限，并在需要时重定向他们。

我通常会为此使用属性，但需要使用一些业务逻辑来确定返回视图/重定向的位置，并且我需要在执行此操作之前使用查询字符串值初始化一个非常量用户定义对象。我想通过可能使用辅助类（对建议开放）来集中逻辑，但我不确定如何访问上下文/从辅助类进行重定向。

例如，页面操作就像...

```
public ActionResult Index(string id)
{
            Models.Bucket bucket = new Bucket();
            InitBucket(bucket, id);

            SecurityHelper.UserOrganisationMatchesObjectOrganisation(CurrentUser, bucket);
} 
```

在 SecurityHelper 中

```
 public static void UserOrganisationMatchesObjectOrganisation(Model.User user, Bucket bucket)
    {
       //if various logic in user and bucket occur return View("NewPage", bucket)

       //else return RedirectResult("~/yournotallowed")
    } 
```

唯一的问题是您不能在没有上下文的情况下在辅助方法中重定向/返回视图，并且不确定如何将其从控制器传递给辅助类或是否可能。

我确信有更好的方法来做到这一点，比如使用服务，或者使用属性并能够传递我初始化的存储桶对象。

欢迎任何建议！

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:52:46.017

我可能在这里遗漏了一些东西，但这不只是`ActionResult`从您的`UserOrganisationMatchesObjectOrganisation`方法返回的情况吗？我可能会更改它的名称，以便更明显地了解该方法的用途，例如

```
public static class Security
{
    public static ActionResult GetActionResultForUser(Model.User user, Bucket bucket)
    {
        //if various logic in user and bucket occur return View("NewPage", bucket)
        //else return RedirectResult("~/yournotallowed")    
    }   
}

...
public ActionResult Index(string id)
{
    Models.Bucket bucket = new Bucket();
    InitBucket(bucket, id);
    return Security.GetActionResultForUser(CurrentUser, bucket);
} 
```

另一种方法可能是引入一个`Service`可以返回某种状态（或抛出异常）的类，然后您可以使用它来确定要返回的视图，例如

```
private BucketService _bucketService = new BucketService();
...

public ActionResult Index(string id)
{
    try
    {
        var bucket = _bucketService.GetBucketForUser(CurrentUser, id);
        return View("NewPage", bucket);
    }
    catch (InsufficientPriviledgesException)
    {
        return RedirectResult("~/yournotallowed");
    }
} 
```

这种方法的好处是它在您的业务和表示逻辑之间保持了清晰的分离。

# android - 如何从 YQL 获取所有世界证券交易所的价格

> ID：13860005
> 
> 赞同：3
> 
> 时间：2012-12-13T12:35:04.787
> 
> 标签：android, yql, yahoo-finance

我使用 YQL-yahoo Finance API 获取特定股票的股票数据，如下所示。

```
select * from csv where url='http://download.finance.yahoo.com/d/quotes.csv?s=INFY.BO,RELIANCE.NS,TCS.BO&f=sl1d1t1c1ohgv&e=.csv' and columns='symbol,price,date,time,change,col1,high,low,col2' 
```

但我想获取所有世界交易所指数的价格。所以我尝试这样，

```
select * from csv where url='http://download.finance.yahoo.com/d/quotes.csv?s=BSESN&f=sl1d1t1' and columns='symbol,price,date,time' 
```

我不工作。

1.如何从YQL-yahoo Finance API获取所有世界证券交易所的价格？有可能吗？
2.是否可以从YQL-yahoo Finance API获取一段时间内的历史股票数据？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-14T00:13:16.177

*1.如何从YQL-yahoo Finance API获取所有世界证券交易所的价格？有可能吗？*

BSESN 的符号错误。应该是`^BSESN`（同样您可以尝试其他证券交易所，例如：台湾`^TWII`）

YQL 查询将是：您可以在[此处](http://developer.yahoo.com/yql/console/?q=select%20%2a%20from%20csv%20where%20url%3D%27http%3A%2F%2Fdownload.finance.yahoo.com%2Fd%2Fquotes.csv%3Fs%3D%255EBSESN%26f%3Dsl1d1t1%27%20and%20columns%3D%27symbol%2Cprice%2Cdate%2Ctime%27&env=store://datatables.org/alltableswithkeys)

`select * from csv where url='http://download.finance.yahoo.com/d/quotes.csv?s=%5EBSESN&f=sl1d1t1' and columns='symbol,price,date,time'`

尝试上述查询。您还需要对. 要获得正确的符号，请访问[Yahoo!](http://finance.yahoo.com) [金融](http://finance.yahoo.com)网站并搜索该符号。搜索 BSESN 将打开 BSE Sensex 页面，您需要的符号应位于括号中。例如：`^`

`BSE SENSEX (^BSESN)`

*2.是否可以从YQL-yahoo Finance API获取一段时间内的历史股票数据？*
我不知道该怎么做（不确定 API 是否支持它）。看看[这个](http://www.gummy-stuff.org/Yahoo-data.htm)页面。可能会有所帮助。

# c# - 正则表达式查找和替换

> ID：13860015
> 
> 赞同：0
> 
> 时间：2012-12-13T12:36:01.923
> 
> 标签：c#, regex, string, visual-studio

我正在寻找一个在 VS2010 解决方案文件中查找 string.empty 并替换为 string.IsNullOrEmpty 的正则表达式

`if (strText != string.Empty)`对于前`string.IsNullOrEmpty(strText)`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:50:39.523

在 VS2012 中，这变得容易多了，因为使用的 Regex 语言得到了相当大的改进：

搜索：

```
 \b(?<variable>[\w_-]+)\s*==\s*string.Empty 
```

代替：

```
 string.IsNullOrEmpty(${variable}) 
```

Visual Studio 2010 的总体思路是相同的：

搜索：

```
 {[A-Za-z0-9_\-]+}:b*==:b*string\.Empty 
```

代替：

```
 string.IsNullOrEmpty(\1) 
```

正如其他人所指出的那样，请务必进行单元测试以验证您没有破坏任何内容，或者检查每个替换以确保。

# php - 解析错误：语法错误，文件意外结束

> ID：13860021
> 
> 赞同：0
> 
> 时间：2012-12-13T12:36:19.397
> 
> 标签：php, syntax

我一直在尝试为一个小组创建一个网站，但我遇到了一些我似乎无法自行修复的错误。我的问题是，如果你们中的一些人能发现我做错了什么，我一直在寻找并且似乎找不到任何打开的东西或任何类似的东西。

提前致谢

```
<?php
session_start();

//Loading template power
include_once("../attritiongaming/tpl/class.TemplatePower.inc");

//Linking templatepower to html
$tpl = new TemplatePower("test.html");

//Connecting to database
$db = new PDO('mysql:host=localhost;dbname=attritiongaming','root', 'solidusaphm8932');
    $db ->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

$tpl->assign("name", "Jessey");

//Echo tables
echo 
"<table border='1'>
<tr>
<th>ID</th>
<th>firstname</th>
<th>lastname</th>
<th>username</th>
<th>emailadress</th>
<th>edit</th>
<th>remove</th>
</tr>";

//defining page
$page = isset($_GET['action']) ? $_GET['action'] : '';

//Start switch for page
switch ($page)
  {
    case 'edit';

      $tpl->newBlock("edit");

     try
{
  $db = new PDO('mysql:host=localhost;dbname=attritiongaming','root', 'solidusaphm8932');
  $db ->setAttribute(PDO::ATTR_ERRMODE, PDO::ERRMODE_EXCEPTION);

    $sql ="UPDATE members SET firstname='firstname' WHERE firstname='jessey'";

  //Secure with PDO
  $stmt = $db->prepare($sql);

  $stmt->bindParam(':firstname', $firstname, PDO::PARAM_STR);
  $stmt->bindParam(':lastname', $lastname, PDO::PARAM_STR);
  $stmt->bindParam(':username', $username, PDO::PARAM_STR);
  $stmt->bindParam(':emailadress', $emailadress, PDO::PARAM_STR);
  $stmt->bindParam(':password', $password, PDO::PARAM_STR);

  //execute sql query
  $stmt->execute();
}

//Catch errors and show them.
catch(PDOException $e)
{
  echo '<pre>';
  echo 'line '.$e->getLine().'<br>';
  echo 'file'.$e->getFile().'<br>';
  echo 'Error'.$e->getMessage();
  echo '</pre>';
}

  default:

  $tpl->newBlock("default");

  if (isset($_POST['search'])) 
  {
    $tpl->assign("searchterm", $_POST['search']);
  }

if (isset($_POST['searching']))
{
  $sql ="SELECT * FROM members WHERE username LIKE :search";

  $stmt = $db->prepare($sql);

  $search = $_POST['search']. '%';

  $stmt->bindParam(':search', $search, PDO::PARAM_STR);

  $stmt->execute();
}
  while ($row = $stmt->fetch(PDO::FETCH_ASSOC)) 
  {
    $tpl->newBlock("");
  }

  $sql= "SELECT * FROM members";
$stmt=$db->prepare($sql);

$stmt->execute();

  //Loop show all members
  while($row = $stmt->fetch(PDO::FETCH_ASSOC))
  {
    echo "<tr>";
    echo "<td>" . $row['ID'] . "</td>";
    echo "<td>" . $row['firstname'] . "</td>";
    echo "<td>" . $row['lastname'] . "</td>";
    echo "<td>" . $row['username'] . "</td>";
    echo "<td>" . $row['emailadress'] . "</td>";
    echo "<td> <a href='?action=edit&id=".$row['ID']."'>Edit</a></td>";
    echo "<td> <a href='?action=remove&id=".$row['ID']."'>Remove</a></td>";
    echo "</tr>";
  }

?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:38:15.417

您还没有关闭开关，并且默认情况下没有“中断”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:39:27.427

开关盒闭合大括号未闭合

# java - PostgreSQL - 安装 JDBC 驱动程序

> ID：13860024
> 
> 赞同：11
> 
> 时间：2012-12-13T12:36:30.830
> 
> 标签：java, sql, postgresql, jdbc, debian

我很难弄清楚我应该如何在我的 debian 6.0 服务器上安装 PostgreSQL 的 JDBC 驱动程序。我已将驱动程序 .jar 移至以下目录：

```
/usr/local/pgsql/share/java/postgresql.jar. 
```

然后教程讨论使用此代码：

```
Class.forName("org.postgresql.Driver"); 
```

但是，由于我是 postgreSQL 的新手，我不知道我应该把这条线放在哪里，或者这是否正确。

我的问题是，除了将 jar 文件移动到这个位置之外，我实际上需要做什么才能在我的 postgreSQL 安装上安装 JDBC 驱动程序？

* * *

编辑：这是我的设置：

**服务器 1：** Tomcat + SOLR

**服务器 2：** 带有 JDBC 驱动程序的 PostgreSQL

服务器 1 上的 SOLR 通过 JDBC 驱动程序查询服务器 2 上的 postgreSQL

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T19:30:05.337

最好将 PostgreSQL 驱动程序安装到 tomcat\lib 文件夹中。只需将驱动程序 jar 复制到 PATH_TO_TOMCAT\lib

将东西添加到系统 CLASSPATH 不是一个好主意，因为您可能会在类加载器地狱中结束。这是您如何最终陷入 jar / classpath 地狱的示例。

*   假设当前应用程序使用 postgres 9.1，并且您在系统 CLASSPATH 上设置驱动程序
*   你决定在那个盒子上运行另一个应用程序，它与更新版本的 postgres 对话，比如说 9.2 版
*   因为您使用的是系统类路径，所以应用程序 2 最终将使用旧驱动程序，因为 SYSTEM 类路径往往优先于应用程序类路径，除非应用程序启动器脚本设置 CLASSPATH="" 清空系统类路径或使用自定义类加载器不执行父类加载。

请参阅[http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html](http://tomcat.apache.org/tomcat-7.0-doc/jndi-datasource-examples-howto.html)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T12:41:19.570

该驱动程序必须在您的类路径中。你可以使用这个命令

```
java -cp /usr/local/pgsql/share/java/postgresql.jar my.app.MainClass 
```

或者您可以将库复制到您的项目结构中。

然后您可以按照教程中的说明创建连接...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-11-01T04:33:43.530

安装所有软件包：

```
# apt-get install libpostgresql-jdbc-java libpostgresql-jdbc-java-doc 
```

要为所有用户设置 Java 环境，请添加/编辑 /etc/environment：

```
JAVA_HOME="/usr/lib/jvm/java-8-openjdk-amd64"
CLASSPATH=".:/usr/share/java/mysql.jar:/usr/share/java/postgresql-jdbc4.jar" 
```

**注意**：用你的 JDK 更改 /usr/lib/jvm/java-8-openjdk-amd64

**注意**：如果您更喜欢使用 postgresql-jdbc3，请将 /usr/share/java/postgresql-jdbc4.jar 替换为 /usr/share/java/postgresql.jar

使用以下代码测试您的连接：

```
import java.sql.Connection;

import java.sql.DriverManager;

import java.sql.SQLException;

import java.util.Properties;

class TestDB {

    /*

      /usr/share/java

      http://dev.mysql.com/doc/connector-j/5.1/en/

      https://jdbc.postgresql.org/documentation/documentation.html

    */

   static Connection conn = null;   

   public static void main(String[] args) {
      // PostgreSQL

      try {

         System.out.println("Loading Class org.postgresql.Driver");

         Class.forName("org.postgresql.Driver");

         System.out.println("Loading org.postgresql.Driver Successful");

         String url = "jdbc:postgresql://localhost/database";

         Properties props = new Properties();

         props.setProperty("user","user");

         props.setProperty("password","password");

         props.setProperty("ssl","true");

         conn = DriverManager.getConnection(url, props); 

         // or

         url = "jdbc:postgresql://localhost/database?user=user&password=password&ssl=true";

         Connection conn = DriverManager.getConnection(url);

         // Do something with the Connection

         System.out.println("Test Connection Successful");

      } catch (SQLException ex) {

         // handle any errors

         System.out.println("SQLException: " + ex.getMessage());

         System.out.println("SQLState: " + ex.getSQLState());

         System.out.println("VendorError: " + ex.getErrorCode());

      } catch (ClassNotFoundException ex) {

         System.out.println("Class Not Found: " + ex.getMessage());

      }

   }

} 
```

**注意**：使用您的配置更改数据库、用户和密码

[http://www.garasiku.web.id/web/joomla/index.php/java/112-debian-jessie-installing-openjdk-8-mysql-jdbc-and-postgresql-jdbc](http://www.garasiku.web.id/web/joomla/index.php/java/112-debian-jessie-installing-openjdk-8-mysql-jdbc-and-postgresql-jdbc)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-12-13T13:18:42.767

在您的 IDE（Idea、Eclipse 等）中，您需要将该路径添加为库。

或者，如果您定义了一个包含该变量的 CLASSPATH 变量，则可以从命令行编译和执行。

```
export CLASSPATH=/usr/local/pgsql/share/java/postgresql.jar
javac -classpath $CLASSPATH MyDBApp.java
java -cp $CLASSPATH MyDBApp 
```

# python - 用python中的动态键和值更新字典

> ID：13860026
> 
> 赞同：26
> 
> 时间：2012-12-13T12:36:39.030
> 
> 标签：python, dictionary, python-3.x, key

我有一本字典，我想动态插入键和值，但我没能做到。问题是当我使用更新方法时它不会添加一对但它会删除以前的值所以我在打印字典时只有最后一个值这是我的代码

```
i = 0
for o in iterload(f):
    i=i+1
    mydic = {i : o["name"]}
    mydic.update({i : o["name"]})
    for k, v in mydic.items():
        print(k,v) 
print(mydic) 
```

f 是我用 python 代码解析的文件，结果我得到

```
{3: 'toto'} 
```

这是最后一个元素。有没有办法让我的字典中的所有元素

提前致谢

我有另一个问题

现在我需要检查输入值是否等于字典中的键，如果是，我需要获取该键的值以继续解析文件并获取其他信息。

这是我的代码：

```
f = open('myfile','r')
nb_name = input("\nChoose the number of the name :")

for o in iterload(f):
    if o["name"] == mydic[nb_name]: 
        ... 
```

我得到一个 keyError

```
Traceback (most recent call last):
  File ".../test.py", line 37, in <module>
            if o["name"] == mydic[nb_name]: 
KeyError: '1' 
```

我不明白这个问题

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2012-12-13T12:38:06.897

删除以下行：

```
 mydic = {i : o["name"]} 
```

并在循环之前添加以下内容：

```
mydic = {} 
```

否则，您将在每次迭代中创建一个全新的单元素字典。

此外，以下内容：

```
mydic.update({i : o["name"]}) 
```

更简洁地写为

```
mydic[i] = o["name"] 
```

最后，请注意整个循环可以重写为字典推导：

```
mydic = {i+1:o["name"] for i,o in enumerate(iterload(f))} 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2016-02-18T02:56:34.730

您可以使用`len()`插入值：

```
#!/usr/bin/python

queue = {}

queue[len(queue)] = {'name_first': 'Jon', 'name_last': 'Doe'}
queue[len(queue)] = {'name_first': 'Jane', 'name_last': 'Doe'}
queue[len(queue)] = {'name_first': 'J', 'name_last': 'Doe'}

print queue 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T12:54:37.820

[@NPE 指出了](https://stackoverflow.com/a/13860049/4279)代码中的问题（在每次迭代中重新定义字典）。

这是生成 dict 的另一种方法（Python 3 代码）：

```
from operator import itemgetter

mydict = dict(enumerate(map(itemgetter("name"), iterload(f)), start=1)) 
```

* * *

关于`KeyError: '1'`:`input()`在 Python 3 中返回一个字符串，但字典`mydict`需要一个整数。要将字符串转换为整数，请调用`int`：

```
nb_name = int(input("\nChoose the number of the name :")) 
```

# r - gWidgets 隐藏的警告

> ID：13860029
> 
> 赞同：1
> 
> 时间：2012-12-13T12:36:55.340
> 
> 标签：r, gwidgets

我编写了一个 R 函数，它从包中运行该`lmer()`函数。`lme4`有时该`lmer()`函数会返回一些警告，然后我在运行我的函数时会看到这些警告。

但是，当通过 R 运行我的函数时`gWidget`，警告不会出现在 R 控制台中。它们仅在我在 R 控制台中运行新命令后才会出现。运行小部件时我应该怎么做才能看到这些警告？

我不知道我的问题是否清楚。我的函数很长，有点复杂，并且需要一个文件作为参数。我不能在这里复制它并提供一个可重现的例子。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:18:59.373

由于某些原因，我认为 gWidgets 会重定向输出。一种解决方案是更改`options` `warn`

我创建了一个小代码来生成错误。我确认我有同样的行为。

```
library(gWidgets)
options("guiToolkit"="RGtk2")

warn.handler <- function(h,...) { warnings('dummy warning')}
win    <- gwindow("Hello World, ad nauseum", visible=TRUE)
 group <- ggroup(horizontal = FALSE, container=win)
 obj   <- gbutton("Hello...",container=group,handler = warn.handler) 
```

这里我的 warn.handler 函数生成一个虚拟警告：

```
warn.handler()
Warning message:
In warn.handler() : dummy warning 
```

但是当我运行 gwidget 并单击按钮时，我没有警告。

当我更改选项时警告

```
 options(warn=1) # print warnings as they occur 
```

我收到警告。

# jquery - Razor 中的弹出窗口

> ID：13860030
> 
> 赞同：0
> 
> 时间：2012-12-13T12:37:07.820
> 
> 标签：jquery, asp.net-mvc-3, razor, popup

我想添加弹出窗口，用户可以在其中为网络上的每个网格添加评论。我想将此评论添加到数据库并关闭弹出窗口而不刷新主页。我该怎么做？这是我的代码。

```
$('a.dialog').click(function () {
    var x = jQuery(this).position().left + jQuery(this).outerWidth();
    var y = jQuery(this).position().top - jQuery(document).scrollTop();

    $.get(
        this.href, 
        function (result) {
            $(result).dialog({
                modal: true,
                width: 500,
                position: [x, y]
            });
        }
    );
    return false;
}); 
```

这是来自控制器的帖子：

```
[HttpPost]
public ActionResult Comment(CommentsModel model)
{
    try
    {
        model.UserId = Storage.UserGetActive().Id;
        Storage.CommentInsert(model);
        return RedirectToAction("Index");
    }
    catch (Exception e)
    {
        return RedirectToAction("Error", e);
    }
} 
```

我知道我做错了。我怎样才能保存评论并关闭弹出窗口？

编辑我只是链接到它，像这样：

```
<a class="dialog" href="/Dashboard/Comment/'+clips[i-1]+'">Comment</a> 
```

这是我的看法：

```
@using (Html.BeginForm())
{
@Html.ValidationSummary(true)
    <fieldset>
        <legend>Add new comment</legend>
        @Html.HiddenFor(m => m.MetriceId)
        <div>
            @Html.LabelFor(m => m.Comment)
        </div>
        <div >
            @Html.EditorFor(m => m.Comment, new { style = "width:450px; height:70px" })
            @Html.ValidationMessageFor(m => m.Comment)
        </div>
        <p>
            <input type="submit" value="Save Comment" />
        </p>
    </fieldset>
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:45:49.097

首先更新您的操作方法，使其不会重定向并仅返回一个状态：

```
[HttpPost]
public ContentResult Comment(CommentsModel model)
{
    try
    {
        model.UserId = Storage.UserGetActive().Id;
        Storage.CommentInsert(model);
        return Content("success"); 
    }
    catch (Exception e)
    {
        return Content("error");
    }
} 
```

您需要设置对话框以发布到您的操作。查看[JQuery 帮助](http://api.jquery.com/jQuery.post/)

首先将 html 添加到您的页面以使您的对话框存在

```
<div id="dialog-confirm" title="Comment on item">
    <!-- Put whatever markup you require in here -->
    <!-- You will need a placeholder for the id of the item you are commenting on  -->
</div> 
```

其次初始化你的对话框：

```
$(function() {
    $( "#dialog-confirm" ).dialog({
        autoOpen: false, //Dialog is initialised closed
        resizable: false,
        height:140,
        modal: true,
        buttons: {
            "Save Comment": function() {
                // NOTE: We are making a jQuery post action
                $.post(<url>, // Replace url
                        // Build your data model eg: 
                        // { UserId: <userId>, Comment: <comment> ...}
                        <data>, 
                        // This is what is actioned after the post 
                        // returns from the server
                        function(result) 
                        {
                            // Check if successful
                            if(result == 'success') {
                                //Simply the dialog
                                $( this ).dialog( "close" );
                            }
                            else {  //an error occured
                                //Update dialog html to show error
                            }
                        }                                            
            },
            Cancel: function() {
                $( this ).dialog( "close" );
            }
        }
    });
}); 
```

最后，您需要设置链接以打开对话框：

```
$('a.dialog').on('click', function(e){
    // Update the dialog to contain data of the item you are 
    // commenting on so you can grab it and post to the server 
    $( "#dialog-form" ).dialog( "open" );
} 
```

以上应该足以给你一个弹出窗口。请注意，这不是您的完整解决方案

我建议阅读有关模态和帖子的 jQuery 文档：

*   [jQueryUI 模态](http://jqueryui.com/dialog/#modal-form)
*   [jQuery 帖子](http://jqueryui.com/dialog/#modal-form)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:55:11.627

'this.href' 在 $.get 调用内部解析了什么。如果您将该 URL 放在浏览器的地址栏中，它会呈现视图吗？

[如果它呈现视图] 为了提供帮助，我们需要查看存在于该视图内部的 Razor 代码。毕竟，那是执行帖子的代码。

# hashmap - 如果 boolean = true 不起作用，则删除飞机

> ID：13860033
> 
> 赞同：3
> 
> 时间：2012-12-13T12:37:13.980
> 
> 标签：hashmap, c++-cli

当用户输入他们已经降落时，我试图移除我的飞机。这行不通。谁能看到我的代码有任何问题，为什么它不起作用。

这是我的代码：

**飞机**

```
static boolean isLanded;
public boolean isLanded() {
        return isLanded;
    }

    public void setLanded(boolean isLanded) {
        this.isLanded = isLanded;
    } 
```

**飞机商店**

```
public void removeLandedPlanes(PlaneStore store)
    {
        if(Plane.isLanded = true)
        {
            airlineMap.remove(store);
        }
    } 
```

**主应用**

```
case 3:
                    System.out.println("Remove Landed Planes.");
                    airlineMap.removeLandedPlanes(airlineMap);
                    airlineMap.print();
                    break; 
```

**PlaneStore 中的 HashMap 声明**

```
HashMap<String, TreeMap<String, Plane>> airlineMap;

    public PlaneStore() 
    {
        airlineMap = new HashMap<String, TreeMap<String, Plane>>();
    } 
```

然后在主 PlaneStore`airlineMap = new PlaneStore();`

这似乎所做的是使每个平面对象都必须这样`isLanded`做`false`。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:39:20.490

```
if(Plane.isLanded = true) 
```

请注意，这是**将**值分配`true`给`Plane.isLanded`。您想使用比较运算符`==`而不是`=`.

```
if(Plane.isLanded == true) 
```

而且由于这`boolean`已经是一个，您实际上应该`== true`完全省略：

```
if(Plane.isLanded) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:39:09.237

您分配给`Plane.isLanded`，而不是测试相等性

```
 if(Plane.isLanded = true) 
```

应该

```
 if(Plane.isLanded == true) 
```

你可以完全避免这种情况

```
if (Plane.isLanded) 
```

或者把常数项放在左边

```
if (true == Plane.isLanded) 
```

如果您犯了最初的错误`=`而不是`==`

# python - 将自定义管理相关表单放在哪里？

> ID：13860040
> 
> 赞同：1
> 
> 时间：2012-12-13T12:37:36.093
> 
> 标签：python, django

我成功地扩展了一些管理模型和表单，但我不确定如何保持我的文件树干净。

如果我放在`forms.py`与 相同的级别`admin.py`，则一切正常：

* * *

**表格.py**

```
class MyUserCreationForm(UserCreationForm):
    #...

class MyUserChangeForm(UserChangeForm):
    #... 
```

**管理员.py**

```
from myapp.forms import MyUserCreationForm, MyUserChangeForm 
```

**文件树**

```
mypackage/
    admin.py
    forms.py 
```

* * *

现在，为了将我的管理员相关表单与其他表单分开并使代码更清晰，我添加了一个文件夹`admin`来放置与管理员相关的表单。在那种情况下，URL 似乎被弄乱了。转到 /myapp/admin/ 时，我得到默认管理页面，而不是我在 admin.py 中自定义的页面。

**管理员/forms.py**

```
class MyUserCreationForm(UserCreationForm):
    #...

class MyUserChangeForm(UserChangeForm):
    #... 
```

**管理员.py**

```
from myapp.admin.forms import MyUserCreationForm, MyUserChangeForm 
```

**文件树**

```
mypackage/
    admin.py
    admin/
        forms.py 
```

* * *

我猜系统很困惑，因为 admin 既是文件又是文件夹。在 Django 中保留自定义管理相关文件的标准方法是什么？

**编辑**`admin.py`：在上面显示的情况下，文件夹之间存在冲突`admin`。我试图把`admin.py`和`forms.py`放在一个文件夹中，但它仍然不起作用：

**管理员/forms.py**

```
class MyUserCreationForm(UserCreationForm):
    #...

class MyUserChangeForm(UserChangeForm):
    #... 
```

**管理员/admin.py**

```
from myapp.admin.forms import MyUserCreationForm, MyUserChangeForm

class MyUserAdmin(UserAdmin):

    form = MyUserChangeForm
    add_form = MyUserCreationForm

    list_filter = ()

    fieldsets = (
        (None, {'fields': ('username', 'number', 'password')}),
        (_('Personal info'), {'fields': ('first_name', 'last_name')}),
        (_('Permissions'), {'fields': ('is_active', 'is_staff',)}),
    )

    add_fieldsets = (
        (None, {
            'classes': ('wide',),
            'fields': ('username', 'number', 'password1', 'password2')}
        ),
    )

admin.site.register(MyUser, MyUserAdmin) 
```

**文件树**

```
mypackage/        
    admin/
        forms.py
        admin.py 
```

**网址.py**

```
from django.conf.urls import patterns, include, url

from django.contrib import admin
admin.autodiscover()

urlpatterns = patterns('',
    # Uncomment the next line to enable the admin:
    url(r'^admin/', include(admin.site.urls)),
) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:35:01.323

首先，您需要`__init__.py`在管理目录中创建一个文件，以便将其视为一个包。

```
mypackage/
    admin/
        __init__.py 
        forms.py 
```

该`__init__.py`文件通常是空的。有关更多信息，请参阅[有关包的 Python 文档](http://docs.python.org/2/tutorial/modules.html#packages)。

其次，你不能有一个名为的目录`admin`和一个文件`admin.py`。当您运行时`import myapp.admin`，python 将忽略该文件，并改为`admin.py`加载 。`admin/__init__.py`

一种可能的解决方案是让您迁移`admin.py`到`admin/__init__.py`. 那么以下导入应该可以正常工作。

```
# in e.g. your urls.py
import myapp.admin # imports admin/__init__.py

# in e.g your admin/__init__.py:
from myapp.admin.forms import MyUserCreationForm, MyUserChangeForm # imports admin/forms.py 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:57:10.663

> 从 myapp.forms 导入 MyUserCreationForm、MyUserChangeForm

这将使用文件当前目录并从中搜索。

尝试将该行更改为：

**从 admin.forms 导入 MyUserCreationForm、MyUserChangeForm**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T16:36:00.447

您可以制作一个表格文件夹并将所有表格放在那里。

# java - Java xml 自闭合标签

> ID：13860041
> 
> 赞同：8
> 
> 时间：2012-12-13T12:37:38.673
> 
> 标签：java, xml, jasper-reports

我的 Java 程序如下所示：

```
public static void main(String[] args) {
    DocumentBuilderFactory dbf = DocumentBuilderFactory.newInstance();
    DocumentBuilder db;
    try {
        db = dbf.newDocumentBuilder();
        Document document = db.parse(new ByteArrayInputStream("<test><test1></test1></test>".getBytes("UTF-8")));
        StringWriter stringWriter = new StringWriter();
        Transformer transformer = TransformerFactory.newInstance().newTransformer();
        transformer.setOutputProperty(OutputKeys.OMIT_XML_DECLARATION, "yes");
        transformer.setOutputProperty(OutputKeys.INDENT, "no");
        transformer.setOutputProperty(OutputKeys.STANDALONE, "yes");
        transformer.transform(new DOMSource(document), new StreamResult(stringWriter));
        System.out.println(stringWriter.toString());
    } catch (ParserConfigurationException e) {
        e.printStackTrace();
    } catch (IOException e) {
        e.printStackTrace();
    } catch (TransformerConfigurationException e) {
        e.printStackTrace();
    } catch (TransformerException e) {
        e.printStackTrace();
    } catch (SAXException e) {
        e.printStackTrace();
    }
} 
```

输出是：`<test><test1/></test>`我想要输出`<test><test1></test1></test>`。

因为我使用*JasperReports*和*html*样式只允许我想要的输出。如何做到这一点？是否有 Transformer 的任何输出属性或***DocumentBuilderFactory***的任何属性来做想要的输出？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2014-01-13T09:42:01.570

如果在调用 transformer.transform 之前添加此行 - 输出将采用 html 样式：

```
transformer.setOutputProperty(OutputKeys.METHOD, "html"); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2016-07-07T16:02:02.223

使 Java 的 Transformer 编写完整的结束标记的一种方法是对 Document 进行少量更改。就我而言，我自己构建 DOM（而不是从字符串解析 XML）。对于我知道它将创建一个自闭合标签的每个节点，我必须（不幸地）添加一个带有一些随机内容的 textNode，您知道它肯定不会出现在内容本身中。这就是我为不添加任何其他子元素的元素所做的（因此将成为自闭合标签）：

```
DocumentBuilderFactory docFactory = DocumentBuilderFactory.newInstance();
DocumentBuilder docBuilder = docFactory.newDocumentBuilder();
Document doc = docBuilder.newDocument();
Element test = doc.createElement("test");
doc.appendChild(root);
Element element = doc.createElement("test1");
element.appendChild("_plchldr_"); // because we know it doesn't have children 
```

如果是现有 Document，则必须遍历它才能找到没有子元素的元素。将这些相同的占位符添加到它们。

稍后，当将此 XML 流式传输到我们的 Writer 时，必须从生成的 XML 中删除这些占位符：

```
TransformerFactory factory = TransformerFactory.newInstance();
transformer.setOutputProperty("omit-xml-declaration", "yes");
StringWriter sw = new StringWriter();
StreamResult result = new StreamResult(sw);
DOMSource source = new DOMSource(doc);
transformer.transform(source, result);
// and here's the trick:
System.out.println( sw.toString().replaceAll("_plchldr_", "") ); 
```

或者，您可以使用删除“_plchldr_”流的包装 Writer。考虑到我的 XML 的大小（<4KB），我没有费心去写一个。

另一种选择，如果您不想替换输出中的文本，您可以添加注释而不是文本节点：

```
element.appendChild(doc.createComment(" ")); 
```

结果不需要删除这些占位符即可成为有效的 XML，但是，您的输出中将包含毫无意义的注释。

我认为这是一个肮脏的解决方法，但它至少有效！

# c# - 在 WPF 中限制“自动”和“1 *”的行高

> ID：13860046
> 
> 赞同：2
> 
> 时间：2012-12-13T12:38:01.983
> 
> 标签：c#, wpf, grid-layout

我有一个 WPF 应用程序，其布局由顶层的 3 行组成`Grid`。

我希望中间行用完它需要的空间（它需要的最大空间是有限的，但取决于窗口的宽度）。最下面一行将用完剩余空间。棘手的部分是顶行。它的大小可以根据切换大部分内容的可见性的按钮而有所不同。我希望它最多使用高度的 50%，但不超过它真正需要的高度。以下 XAML 描述了我想要完成的任务：

```
 <Grid.RowDefinitions>
        <!-- neither "1*" nor "Auto" fully meets my needs -->
        <RowDefinition Height="Min(1*,Auto)"></RowDefinition>

        <RowDefinition Height="Auto"></RowDefinition>

        <RowDefinition Height="1*"></RowDefinition>
    </Grid.RowDefinitions> 
```

这些行是：

1.  `WrapPanel`
2.  `WrapPanel`
3.  `TextBox`

如果这很重要。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T13:05:18.137

如果我理解正确，您可能会使用`Auto`然后将`MaxHeight`属性绑定`Height`到`Grid`. 也许是这样的：

MaxHeightConverter.cs：

```
public class MaxHeightConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        if (value == null)
            throw new ArgumentException("MaxHeightConverter expects a height value", "values");

        return ((double)value / 2);
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        throw new NotImplementedException();
    }
} 
```

MyWindow.xaml：

```
...
xmlns:converters="clr-namespace:MyApp.Namespace"
...
<Window.Resources>
    <converters:MaxHeightConverter x:Key="MaxHeightValue" />
</Window.Resources>

<Grid x:Name="root">
    <Grid.RowDefinitions>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="Auto"></RowDefinition>
        <RowDefinition Height="1*"></RowDefinition>
    </Grid.RowDefinitions>

    <WrapPanel >
        <WrapPanel.MaxHeight>
            <Binding Converter="{StaticResource MaxHeightValue}" ElementName="root" Path="ActualHeight" />
        </WrapPanel.MaxHeight>
    </WrapPanel>
</Grid>
... 
```

希望这可以帮助。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T14:17:42.477

您可以仅使用 XAML 执行此操作的另一种方法是绑定到您想要的高度的隐藏对象：

```
<Grid>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="1*" />
            <RowDefinition Height="1*" />
        </Grid.RowDefinitions>
        <Border Background="White" Visibility="Hidden" x:Name="HalfHeightRow" x:FieldModifier="private" />
    </Grid>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Border Height="1000" Background="Red" MaxHeight="{Binding ActualHeight, ElementName=HalfHeightRow}" />
        <Border Grid.Row="1" Height="100" Background="Green" />
        <Border Grid.Row="2" Background="Blue" />
    </Grid> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2018-11-28T10:30:25.550

您可以使马特的建议更加简单明了。

```
<Grid>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="1*" x:Name="HalfHeightRow"/>
            <RowDefinition Height="1*" />
        </Grid.RowDefinitions>
    </Grid>
    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" MaxHeight="{Binding ActualHeight, ElementName=HalfHeightRow}"/>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <Border Height="1000" Background="Red" />
        <Border Grid.Row="1" Height="100" Background="Green" />
        <Border Grid.Row="2" Background="Blue" />
    </Grid> 
```

# mysql - 优化查询以查找订单之间的最大时间跨度

> ID：13860054
> 
> 赞同：0
> 
> 时间：2012-12-13T12:38:15.547
> 
> 标签：mysql, sql, query-optimization

有了这个查询

```
SELECT
o1.created,
SEC_TO_TIME(TIMESTAMPDIFF(second, o1.created, (SELECT MAX(created) FROM orders o2 WHERE o2.created < o1.created and o2.created >= '2012-06-01'))) tsd
FROM
orders o1
WHERE o1.created >= '2012-06-01'
ORDER BY tsd DESC LIMIT 100 
```

我想知道是否有任何重要的时间没有下订单，以及这个时间跨度有多长。

下面是解释：

```
*************************** 1\. row ***************************
           id: 1
  select_type: PRIMARY
        table: o1
         type: range
possible_keys: created
          key: created
      key_len: 4
          ref: NULL
         rows: 2649278
        Extra: Using where; Using index; Using filesort
*************************** 2\. row ***************************
           id: 2
  select_type: DEPENDENT SUBQUERY
        table: o2
         type: range
possible_keys: created
          key: created
      key_len: 4
          ref: NULL
         rows: 2649278
        Extra: Using where; Using index 
```

`created`是类型`timestamp`。

查询现在运行了一个多小时。更改架构中的任何内容都不是一种选择。这是一次性查询，但我只是好奇是否可以提高性能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:39:35.300

尝试使用此查询。它更快吗？

# [SQLFiddle 演示](http://sqlfiddle.com/#!2/e0378/34)

```
select created,Previous_created,
       IF(tsd<>0,SEC_TO_TIME(tsd),0) as diff 
from
(
 select created,
       IF(@prev<>0,TIMESTAMPDIFF(second, @prev,created),0) tsd,
       @prev Previous_created,
       @prev:=created f2 
    from orders,(select @prev:=0) t1 
WHERE created >= '2012-06-01'
order by created
 ) t2 
order by tsd desc limit 100 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:14:33.820

我会尝试使用没有子查询的解决方案：

```
select o1.created, TIMESTAMPDIFF(second, o1.created, o3.created) tsd 
from orders o1
inner join orders o2 on o2.created < o1.created and o2.created >= '2012-06-01'
left join orders o3 on o3.created > o2.created
where o1.created >= '2012-06-01' and o3.id is null; 
```

`created`如果列被索引，它可能会快很多。恐怕无法在 mysql 中索引 diff 列的排序。

# mybatis - 动态排序类型在 mybatis 中不起作用

> ID：13860056
> 
> 赞同：3
> 
> 时间：2012-12-13T12:38:21.630
> 
> 标签：mybatis

我无法在 mybatis 中使用动态排序类型创建 SQL，如下例所示

```
<select id="selectByNetworkId" parameterType="java.util.Map" resultMap="userResult">

    select user_profile.user_profile_id,  user_profile.first_name
    from
    user_profile user_profile

    where
    user_profile.network_id = #{network_id}  

    order by
    user_profile.user_profile.first_name #{sortType}        
</select> 
```

sortType 保存 {DESC, ASC} 的一个值，从我的 dao 调用此 SQL 时出现以下错误

### 原因：java.sql.SQLSyntaxErrorException：ORA-00933：SQL 命令未正确结束

任何想法？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-12-13T14:06:55.067

试试 ${sortType}。对于直接替换，请使用 ${}。

# asp.net - 如何在 ASP.NET 中使用 Self Join 获取 GridView 中的所有行？

> ID：13860058
> 
> 赞同：0
> 
> 时间：2012-12-13T12:38:51.373
> 
> 标签：asp.net, sql-server-2008, gridview, self-join

我正在使用 Self Join 从 SQLSERVER 数据库中检索数据并在 GridView 中显示数据。

DepartmentMst 表中的数据：

```
DepartmentID      DepartmentName       IsActive DepartmentParentID
3                    Admin Panel       1              0
4                    Human Resource    1              0
5               Information Technology 1              0
6                     Operational      1              0
21                    TestDepartment   1              3
22                       Logistics     1              3 
```

从上面的数据可以看出，AdminPanel 部门有其 SubDepartment TestDepartment 和 Logistics，DepartmentParentID=3，属于主部门即 AdminPanel。

现在要在网格视图中显示数据，该视图将显示部门名称及其子部门。

我的查询：

```
SELECT  dpt1.DepartmentID as DepartmentID
         ,dpt1.DepartmentName as DepartmentName
        ,dpt1.DepartmentParentID as ParentDepartmentID
        ,dpt2.DepartmentName as ChildDepartment
        ,dpt1.IsActive
  FROM DepartmentMst dpt1,DepartmentMst dpt2
  where (dpt1.DepartmentID=dpt2.DepartmentParentID) and dpt2.IsActive=1
  order by DepartmentID 
```

输出/输出：

```
DepartmentID    DepartmentName  ParentDepartmentID  ChildDepartment  IsActive
3                   Admin Panel    0                   TestDepartment    1
3                   Admin Panel    0                     Logistics      1 
```

**但是，我需要所有带有 SubDepartmentName 的 DepartmentName。如果任何部门没有父部门，即 DepartmentParentID=0，则必须显示为 MainDepartment，否则其父部门名称**

例如：

```
DepartmentID    DepartmentName  IsActive    DepartmentParentID  ParentDeptName
3                   Admin Panel     1             0                MainDept
4                 Human Resource    1             0                MainDept
5          Information Technology   1             0                MainDept
6                     Operational   1             0                MainDept
21                 TestDepartment   1             3              AdminPanel
22                  Logistics       1             3              AdminPanel 
```

如何把上面的东西拿出来？帮助赞赏！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:44:12.803

Use a LEFT JOIN:

```
SELECT
    dpt1.DepartmentID as DepartmentID
    ,dpt1.DepartmentName as DepartmentName
    ,dpt2.DepartmentParentID as ParentDepartmentID
    ,ISNULL(dpt2.DepartmentName, 'MainDept') as ParentDepartment
    ,dpt1.IsActive
FROM DepartmentMst dpt1
    LEFT JOIN DepartmentMst dpt2
        ON (dpt2.DepartmentID = dpt1.DepartmentParentID) and dpt2.IsActive=1
ORDER BY DepartmentID 
```

If the join condition has no match then all columns from `dpt2` will come back as `NULL` so you can test for that.

Edit: I tried to fix the columns in your query as they didn't seem correct. `dpt1` is your "current" table and `dpt2` is where the parent will be (if any)

# modx - MODX - 用户个人资料照片上传 - 不要删除原始上传的照片条目

> ID：13860061
> 
> 赞同：0
> 
> 时间：2012-12-13T12:39:06.677
> 
> 标签：modx

我将以下页面片段和表单配置为允许用户将照片上传到他们的个人资料。当用户更新他的个人资料但未指定图像时，上传的原始图像将从个人资料扩展字段中删除。它回到空白。

问题：有没有办法防止这种情况发生。希望允许用户更新个人资料，但不删除之前上传的图像 URL。

**片段**

```
<?php
// initialize output;
$output = true;
  // get the current user name to create the file name as  
$userName = $modx->user->get('username');

// valid extensions
$ext_array = array('jpg', 'jpeg', 'gif', 'png');

// create unique path for this form submission
$uploadpath = 'assets/uploads/';

// you can create some logic to automatically
// generate some type of folder structure here.
// the path that you specify will automatically
// be created by the script if it doesn't already
// exist.

// EXAMPLE:
// this would put all file uploads into a new,
// unique folder every day.
// $uploadpath = 'assets/'uploads/'.date('Y-m-d').'/';

// get full path to unique folder
$target_path = $modx->config['base_path'] . $uploadpath;

// get uploaded file names:
$submittedfiles = array_keys($_FILES);

// loop through files
foreach ($submittedfiles as $sf) {

  // Get Filename and make sure its good.
  $filename = basename( $_FILES[$sf]['name'] );

  // Get file's extension
  $ext = pathinfo($filename, PATHINFO_EXTENSION);
  $ext = mb_strtolower($ext); // case insensitive

  // is the file name empty (no file uploaded)
  if($filename != '') {

    // is this the right type of file?
    if(in_array($ext, $ext_array)) {

      //create file called the user name + pic
      $filename = $userName . "pic".'.'.$ext  ;

      // full path to new file
      $myTarget = $target_path . $filename;

      // create directory to move file into if it doesn't exist
      mkdir($target_path, 0755, true);
      if(file_exists($myTarget)) {
      chmod($myTarget,0755); //Change the file permissions if allowed
      unlink($myTarget); //remove the file
  }

      // is the file moved to the proper folder successfully?
      if(move_uploaded_file($_FILES[$sf]['tmp_name'], $myTarget)) {
        // set a new placeholder with the new full path (if you need it in subsequent hooks)
        $hook->setValue($sf, $uploadpath . $filename);
        // set the permissions on the file
        if (!chmod($myTarget, 0644)) { /*some debug function*/ }

          } else {
        // File not uploaded
        $errorMsg = 'There was a problem uploading the file.';
        $hook->addError($sf, $errorMsg);
        $output = false; // generate submission error
      }

      } else {
      // File type not allowed
          $errorMsg = 'Type of file not allowed.';
      $hook->addError($sf, $errorMsg);
      $output = false; // generate submission error
        }

  // if no file, don't error, but return blank
  } else {
      $hook->setValue($sf, '');
  }

}

return $output; 
```

**资源**

```
[[!UpdateProfile? &useExtended=`1`  &postHooks=`redirect_profile_update` &preHooks=`user_profile_image`]]

<div class="update-profile">
    <div class="updprof-error">[[+error.message]]</div>
    [[+login.update_success:if=`[[+login.update_success]]`:is=`1`:then=`[[%login.profile_updated? &namespace=`login` &topic=`updateprofile`]]`]]

    <form class="form" enctype="multipart/form-data" action="[[~[[*id]]]]" method="post">
        <input type="hidden" name="nospam:blank" value="" />

        <label for="fullname"><i class="icon-user"></i> <strong>[[!%login.fullname? &namespace=`login` &topic=`updateprofile`]]</strong>
            <span class="error">[[+error.fullname]]</span>
        </label>
        <input type="text" name="fullname" id="fullname" value="[[+fullname]]" />

        <label for="email"><i class="icon-envelope"></i> <strong>[[!%login.email]]</strong>
            <span class="error">[[+error.email]]</span>
        </label>
        <input type="text" name="email" id="email" value="[[+email]]" />

       <div class="row clearfix">
        <div class="label"><img src="[[+nomination_file:phpthumbof=`w=120&h=120&zc=1&fltr[]=ric|20|20`
]]" /></div> <span class="error">[[+fi.error.nomination_file]]</span>
        <div class="input"><input id="nomination_file" name="nomination_file" type="file" value="[[+fi.nomination_file]]" maxlength="100000" /></div>
    </div>

        <br class="clear" />

       <button class="btn-info btn btn-large" type="submit" name="login-updprof-btn">Update Profile</button>
    </form>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-19T07:24:03.700

这是一种有效的方法

PHP 片段

```
<?php
// initialize output;
$output = true;
// get the current user name to for dicroty placement
$userName = $modx->user->get('username');

// valid extensions
$ext_array = array('jpg', 'jpeg', 'gif', 'png');

// create unique path for this form submission
$uploadpath = 'assets/userfiles/' . $userName .'/';

// get full path to unique folder
$target_path = $modx->config['base_path'] . $uploadpath;

// get uploaded file names:
$submittedfiles = array_keys($_FILES);

//get exsisting user profile data for Profile_Photos
$fields = $modx->user->getOne('Profile')->get('extended');
$Photo_fields = $fields['Profile_Photos'];

// loop through files
foreach ($submittedfiles as $sf) {

  // Get Filename and make sure its good.
  $filename = basename( $_FILES[$sf]['name'] );

  // Get file's extension
  $ext = pathinfo($filename, PATHINFO_EXTENSION);
  $ext = mb_strtolower($ext); // case insensitive

  if($filename != '') {
    $modx->log(modX::LOG_LEVEL_ERROR,'in file name loop'.$filename);
                    // is this the right type of file?
    if(in_array($ext, $ext_array)) {
      //create file called the filename that has been sanitized
      $filename = strtolower(preg_replace("/[^A-Za-z0-9.]+/i", "-", $filename));
      //$filename = $filename . '.'.$ext  ;

      // full path to new file
      $myTarget = $target_path . $filename;

      // create directory to move file into if it doesn't exist
      mkdir($target_path, 0755, true);
      if(file_exists($myTarget)) {
        chmod($myTarget,0755); //Change the file permissions if allowed
        unlink($myTarget); //remove the file
      }

      // is the file moved to the proper folder successfully?
      if(move_uploaded_file($_FILES[$sf]['tmp_name'], $myTarget)) {
        // set a new placeholder with the new full path (if you need it in subsequent hooks)
        $hook->setValue($sf, $uploadpath . $filename);
        // set the permissions on the file
        if (!chmod($myTarget, 0644)) { /*some debug function*/ }  
      } 
      else {
        // File not uploaded
        $errorMsg = 'There was a problem uploading the file.';
        $hook->addError($sf, $errorMsg);
        $output = false; // generate submission error
      }
    } 
    else {
      // File type not allowed
      $errorMsg = 'Type of file not allowed.';
      $hook->addError($sf, $errorMsg);
      $output = false; // generate submission error
    }
  } 
  else {
    //check to see if there is exsisting photofields value and return value if so
    if ($Photo_fields != '')
    {
      $hook->setValue($sf, $Photo_fields);

    }
    else{       
      // if no file, don't error, but return blank
      // is the file name empty (no file uploaded) and exsiting photofields empty
      $hook->setValue($sf, '');
    }
  }
}
return $output; 
```

更改个人资料表格

```
[[!UpdateProfile? &useExtended=`1`  &postHooks=`redirect_profile_update` &preHooks=`user_profile_image`]]

<div class="update-profile">
    <div class="updprof-error">[[+error.message]]</div>
    [[+login.update_success:if=`[[+login.update_success]]`:is=`1`:then=`[[%login.profile_updated? &namespace=`login` &topic=`updateprofile`]]`]]

    <form class="form" enctype="multipart/form-data" action="[[~[[*id]]]]" method="post">
        <input type="hidden" name="nospam:blank" value="" />

        <label for="fullname"><i class="icon-user"></i> <strong>[[!%login.fullname? &namespace=`login` &topic=`updateprofile`]]</strong>
            <span class="error">[[+error.fullname]]</span>
        </label>
        <input type="text" name="fullname" id="fullname" value="[[+fullname]]" />

        <label for="email"><i class="icon-envelope"></i> <strong>[[!%login.email]]</strong>
            <span class="error">[[+error.email]]</span>
        </label>
        <input type="text" name="email" id="email" value="[[+email]]" />

       <div class="row clearfix">
        <div class="label"><img src="[[+Profile_Photos:phpthumbof=`w=120&h=120&zc=1&fltr[]=ric|20|20`
]]" /></div> <span class="error">[[+fi.error.Profile_Photos]]</span>
        <div class="input"><input id="Profile_Photos" name="Profile_Photos" type="file" value="[[+fi.Profile_Photos]]" maxlength="100000" /></div>
    </div>

        <br class="clear" />

       <button class="btn-info btn btn-large" type="submit" name="login-updprof-btn">Update Profile</button>
    </form>
</div> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T13:46:22.683

不记得确切的 formIt 是如何工作的，但请尝试从此处的**值**占位符中删除`fi.`前缀：

 **```
<div class="input"><input id="nomination_file" name="nomination_file" type="file" value="[[+nomination_file]]" maxlength="100000" /></div> 
```

这样，输入应该填充现有的图像路径，如果没有上传另一个图像，则将重新提交。**

# python - django-matplotlib 参考

> ID：13860065
> 
> 赞同：0
> 
> 时间：2012-12-13T12:39:17.323
> 
> 标签：python, django, graph, charts, matplotlib

我需要通过用户操作一些输入数据在我的网页中显示各种图形/图表。

寻找要嵌入的参考/学习`matplotlib`材料`django`。

搜索后发现了一些[链接](http://www.scipy.org/Cookbook/Matplotlib/Django)，但对我来说似乎还不够。

有人知道更好的参考吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:50:53.127

有这两个链接可能对您有好处。我所知道的是 google 为其图表 api 提供了一个 python 包装器。谷歌一下

[http://code.google.com/p/flot/](http://code.google.com/p/flot/)

[https://developers.google.com/chart/interactive/docs/reference](https://developers.google.com/chart/interactive/docs/reference)

# ruby-on-rails - 如何让承包商正确访问我的工作流程？

> ID：13860067
> 
> 赞同：0
> 
> 时间：2012-12-13T12:39:20.110
> 
> 标签：ruby-on-rails, linux, ubuntu, ssh, jenkins

我使用 Rails 并使用 Capistrano 将应用程序部署到服务器。我有一个 Jenkins 服务器（在我自己的 linode 上）。

我想知道的是如何设置承包商，以便他们有足够的权限完成工作并使用我拥有的工具（如 Jenkins），但不允许他们造成任何严重损害。

工作流程可能是这样的：

*   提交对私有 git 存储库的更改
*   部署到詹金斯
*   将更改部署到登台服务器（我的 linode）
*   将更改部署到实时服务器（客户端的 linode）

我对所有事情都使用 SSH，但我想知道我是否可能允许用户过多访问，因为他们可能能够运行 sudo 命令并更改用户密码并绕过 SSH 密钥/对身份验证。每个用户是否应该有一个受限的 Linux 用户帐户（可能共享同一个受限帐户），并将他们的 SSH 密钥添加到其中？

我的另一个问题是，我可以使用 Jenkins 部署到登台/实时服务器，因此只能从我的 Jenkins 服务器授予对这些服务器的访问权限吗？

我可以通过只允许开发人员访问 git repo 来完成这一切吗？詹金斯跟踪，然后部署到登台/现场？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:54:29.953

基本上，我认为 apporach 应该是下一个。

1.  设置 jenkins 以在提交完成后运行测试 gitolite 或您使用的任何东西，并通过电子邮件将结果发送给每个人。
2.  允许承包商部署到登台 - 因为他们需要进行测试。
3.  只有您可以部署到生产环境。

Also you shouldn't give them sudo on staging machine. Just setup a deployment role which gives access to the directory with code. Because you even'don't need do server restarts if you use passenger(just use touch %RAILS_ROOT%/tmp/restart.txt , if you know what i mean) And setup the ruby env via rvm

# android - Android 的 MapView 中的叠加层定位不准确

> ID：13860070
> 
> 赞同：4
> 
> 时间：2012-12-13T12:39:31.467
> 
> 标签：android, android-mapview, xamarin.android, itemizedoverlay

我正在尝试在其中创建一个带有 MapView 和 ListView 的 Activity。我使用 C# 和 MonoDroid。

布局看起来像这样

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">
    <app.MD.UI.PlacesMapView
        android:id="@+id/mapView"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:enabled="true"
        android:clickable="true"
        android:layout_weight="1"
        android:apiKey="key" />
    <ListView
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_weight="1"
        android:id="@+id/resultsTable" />
</LinearLayout> 
```

我的自定义 MapView 类实现长按处理程序

```
private void HandleLongPress(MotionEvent e)
        {
            if (e.Action == MotionEventActions.Down) {
                // Finger has touched screen.
                longpressTimer = new Timer(LONGPRESS_THRESHOLD);
                longpressTimer.AutoReset = false;
                longpressTimer.Elapsed += delegate(object sender, ElapsedEventArgs e_elapsed) {
                    GeoPoint longpressLocation = Projection.FromPixels((int)e.GetX(), (int)e.GetY());
                    if (OnLongPress != null) {
                        OnMapViewLongPressEventArgs args = new OnMapViewLongPressEventArgs();
                        args.location = longpressLocation;
                        OnLongPress(this, args);
                    }
                };

                longpressTimer.Start();

                lastMapCenter = MapCenter;
            }

            if (e.Action == MotionEventActions.Move) {
                if (!MapCenter.Equals(lastMapCenter)) {
                    longpressTimer.Stop();
                }

                lastMapCenter = MapCenter;
            }

            if (e.Action == MotionEventActions.Up) {
                // User has removed finger from map.
                longpressTimer.Stop();
            }

            if (e.PointerCount > 1) {
                // This is a multitouch event, probably zooming.
                longpressTimer.Stop();
            }
        } 
```

Activity 方法，将标记添加到 MapView

```
protected void AddPinToMap(GeoPoint location, string title, bool scrollTo, int zoom)
        {
            var pin = Resources.GetDrawable(Resource.Drawable.maps_pin);
            PinOverlay pinOverlay = new PinOverlay(pin, this);
            OverlayItem item = new OverlayItem(location, title, "");
            pinOverlay.AddOverlay(item);
            mapView.Overlays.Clear();
            mapView.Overlays.Add(pinOverlay);

            if (scrollTo) {
                mapView.Controller.AnimateTo(location);
            }

            mapView.Controller.SetZoom(zoom);
        } 
```

这是我的 PinOverlay 课程

```
class PinOverlay : ItemizedOverlay
    {
        private List<OverlayItem> _items = new List<OverlayItem>();
        private Context _context;

        public PinOverlay(Drawable pin, Context context) : base(pin)
        {
            _context = context;
            BoundCenterBottom(pin);
            Populate();
        }

        protected override Java.Lang.Object CreateItem(int i)
        {
            return _items[i];
        }

        public override int Size()
        {
            return _items.Count();
        }

        public void AddOverlay(OverlayItem overlay) {
            _items.Add(overlay);
            Populate();
        }
    } 
```

我的问题是，当我触摸 MapView 时，我的标记显示低于我触摸的点。我认为这可能是因为我的 MapView 没有全屏显示。当我删除 ListView 以便 MapView 可以占据整个屏幕时，我能够在我在屏幕上触摸的确切点上放置一个标记。

如果 MapView 仅占用屏幕的一部分，有关如何处理触摸事件的任何建议或示例？

**UPD**找到了某种解决方法，仍然需要用不同的屏幕尺寸进行测试

转换触摸坐标

```
public static Point ConvertCoordinates(Context context, MapView mapView, double x, double y)
        {
            var wm = context.GetSystemService(Context.WindowService).JavaCast<IWindowManager>();
            var display = wm.DefaultDisplay;

            double diffY = (Convert.ToDouble(display.Height) / 2 - Convert.ToDouble(mapView.Height) / 2) / 2 - 20;
            double diffX = Convert.ToDouble(display.Width) / 2 - Convert.ToDouble(mapView.Width) / 2;

            Point size = new Point();
            size.X = (int)(x - diffX);
            size.Y = (int)(y - diffY);

            return size;
        } 
```

像这样使用它

```
var point = MapHelper.ConvertCoordinates(this.Context, this, e.GetX(), e.GetY());

GeoPoint longpressLocation = Projection.FromPixels(point.X, point.Y); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:23:00.080

你有没有尝试过：

```
public PinOverlay(Drawable pin, Context context) 
    : base(BoundCenterBottom(pin)) 
```

这将使`Drawable`您将地图中心放在该点上，而不是在绘制时将地理坐标作为 (x,y)(0,0) 坐标。

**编辑：** 我似乎无法在这里重新创建您的问题，当在`:base()`构造函数中使用 BoundCenterBottom(pin) 时，它可以很好地居中`Drawable`。

我还注意到在你的方法中，你每次都`AddPinToMap`创建一个新的。`PinOverlay`这应该不是必需的，您应该只添加新`OverlayItem`的 s `PinOverlay`，您只添加 1 次到地图。如果您要在地图上添加大量图钉，这会更有效且资源消耗更少。

所以它应该看起来更像：

```
protected void AddPinToMap(GeoPoint location, string title, bool scrollTo, int zoom)
{
    var pin = Resources.GetDrawable(Resource.Drawable.maps_pin);
    OverlayItem item = new OverlayItem(location, title, "");
    pinOverlay.AddOverlay(item); // this is instantiated in OnCreate

    if (scrollTo) {
        mapView.Controller.AnimateTo(location);
    }

    mapView.Controller.SetZoom(zoom);
} 
```

如果您也希望能够删除，请添加一个`Remove`方法。`PinOverlay``OverlayItems`

也`MapView`已经有一个`LongClick`事件，您可以挂钩而不是覆盖类：

```
var mapView = FindViewById<MapView>(Resource.Id.myMapView);
mapView.LongClick += (sender, args) => { //do whatever in here }; 
```

或者

```
var mapView = FindViewById<MapView>(Resource.Id.myMapView);
mapView.LongClick += OnLongClick;

private void OnLongClick(object sender, LongClickEventArgs longClickEventArgs)
{
    // do whatever in here
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T13:10:36.723

最后我找到了问题的原因。

这部分是错误的，因为**Projection**是在**Elapsed**委托中访问的。但此时Projection已经改变了状态，导致坐标错误。

```
if (e.Action == MotionEventActions.Down) {
    // Finger has touched screen.
    longpressTimer = new Timer(LONGPRESS_THRESHOLD);
    longpressTimer.AutoReset = false;
    longpressTimer.Elapsed += delegate(object sender, ElapsedEventArgs e_elapsed) {
        GeoPoint longpressLocation = Projection.FromPixels((int)e.GetX(), (int)e.GetY());
        if (OnLongPress != null) {
             OnMapViewLongPressEventArgs args = new OnMapViewLongPressEventArgs();
             args.location = longpressLocation;
             OnLongPress(this, args);
        }
    };

    longpressTimer.Start();

    lastMapCenter = MapCenter;
} 
```

所以解决方案是在**OnTouchEvent**的一开始就获取**GeoPoint**。

 **```
if (e.Action == MotionEventActions.Down) {
    capturedProjection = Projection.FromPixels((int)e.GetX(), (int)e.GetY());

    // Finger has touched screen.
    longpressTimer = new Timer(LONGPRESS_THRESHOLD);
    longpressTimer.AutoReset = false;
    longpressTimer.Elapsed += (object sender, ElapsedEventArgs e_timer) => {
        if (OnLongPress != null) {
            OnMapViewLongPressEventArgs args = new OnMapViewLongPressEventArgs();
            args.location = capturedProjection;
            OnLongPress(this, args);
        }
    };

    longpressTimer.Start();

    lastMapCenter = MapCenter;
} 
```**

# email - 根据用户输入和现有 dbms 数据更新 dbms

> ID：13860071
> 
> 赞同：0
> 
> 时间：2012-12-13T12:39:31.717
> 
> 标签：email, database

我有一个 php 页面，它从包含电子邮件地址的 dbms 中提取数据。这行得通。然后它会显示电子邮件地址和其他存储的数据数据。然后，用户可以选择在 php 页面中设计的名为 emailselected 的字段中放置一个“X”。这也有效。我现在想根据存储的电子邮件地址使用新字段更新 dbms，但更新语句不起作用。请帮忙。php 文件的这一部分在这里。

```
 include("db.php");
if (isset($_POST['ssubmit']))
    {
    $id_save = $test['id'];
    $emailselected_save = $_POST['emailselected'];
    $email_save = $test['email'];

    mysql_query("UPDATE emails SET selected='$emailselected_save' WHERE id = 'id'");
    echo "<input type='button' value='Email(s) sent' onclick='goBack()' />";
mysql_close($conn);
    } else {echo "hello";}
?>
</head>
<form method='post'>
    <div id='headd'>
    <br />
    <input type='button' value='Close this window without Sending' onclick='goBack()' />
    <input type='submit' name='ssubmit' id='ssubmit' value='Send Email Now!!!' />
    <p>Place an "X" in the emails you wish to send!!!</p>
    </div>
    <body>
        <br /><br/>

<?php
    include("db.php");  
    $result = mysql_query("SELECT * FROM emails WHERE unsubscribe  != 'x' ORDER BY lastname ASC");
            while($test = mysql_fetch_array($result))
            {
?>
    <table border='1' width='78%'>
    <tr align=\"left\">
        <td width='4%'><font color='black'><input type='text' size='1' id='emailselected' name='emailselected' /></font></td>
        <td width='15%'><font color='black'><?php echo $test['lastname']?></font></td>
        <td width='15%'><font color='black'><?php echo $test['firstname']?></font></td>
        <td width='40%'><font color='black'><?php echo $test['email']?></font></td>
        <td width='4%'><font color='black'><?php echo $test['id']?></font></td>
    </tr>
</table>
<?php
            }
?>
</form> 
```

表单顶部是一个包含语句。这是有效的，因为它提取了电子邮件地址并将其显示在 php 文件中。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:59:54.523

如果数据没有更新，您几乎受限于以下可能性：

*   声明失败；或者
*   该语句不影响任何行；或者
*   该语句影响了*错误*的行。

要找出哪个，您应该检查返回代码`mysql_query`，看看它是否失败：

```
$rc = mysql_query('my hovercraft is full of eels');
if (!$result) {
    die('What?: ' . mysql_error());
} 
```

如果它没有失败，那么您应该检查它影响了多少行`mysql_affected_rows()`：

```
$num = mysql_affected_rows();
printf("Updated %d rows\n", $num); 
```

检查返回它们的函数的返回值是一种很好的编程习惯。

输出或记录您在 SQL 语句中使用的所有变量以确保它们是您认为的那样也是一个好主意。

而且，尽管现在应该不言而喻，但不[鼓励](http://php.net/manual/en/function.mysql-query.php)`mysql_*`使用这些功能，您应该使用[(or](http://php.net/manual/en/mysqlinfo.api.choosing.php) [)](http://php.net/manual/en/mysqlinfo.api.choosing.php)代替。[`mysqli_*``PDO`](http://php.net/manual/en/mysqlinfo.api.choosing.php)

* * *

而且我刚刚注意到您的 HTML 元素层次结构似乎不太正确。您有效地：

```
<head>
    :
</head>
<form>
    :
    <body>
        : 
```

这不适合我。我不确定这在*体外*`form`是否有效。根据[w3c 规范](http://www.w3.org/TR/2012/WD-html5-20121025/the-html-element.html#the-html-element)，html 元素必须包含：

 *> 一个头部元素，后跟一个主体元素。*

# playframework-2.0 - SnakeYaml 通过静态方法创建对象

> ID：13860072
> 
> 赞同：3
> 
> 时间：2012-12-13T12:39:39.470
> 
> 标签：playframework-2.0, snakeyaml

我正在尝试将snakeyaml 与Play Framework 2 一起使用来创建Ebean 对象

它适用于

```
!!models.User
  name: Leon 
```

但我想引用所有已持久化的项目。这意味着我不想创建新对象。

所以如果我做这样的事情来尝试引用已经创建的组

```
!!models.Group &mygroup
  id: 1

!!models.User
  group: *mygroup 
```

它会抱怨 id: 1 的组已经存在

Ebean 有一个方法`EbeanServer.getReference(type, id)`，可以从模型类上的静态 find 方法访问

```
Group.find.ref(1) 
```

我希望能够做这样的事情（但现在不起作用）

```
!!models.Group.find.ref(1) &mygroup 
```

如何从snakeyaml 调用这个静态方法来获取引用而不是新对象？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T10:40:31.873

为了解决这个问题，我必须创建一个自定义 Yaml 构造函数，它使用`Ebean.getServer("default").getReference(models.User.class, 1)`

[https://gist.github.com/4326933](https://gist.github.com/4326933)

希望它会帮助别人！

# actionscript-3 - 单元测试问题

> ID：13860075
> 
> 赞同：0
> 
> 时间：2012-12-13T12:39:53.307
> 
> 标签：actionscript-3, apache-flex, unit-testing, flexunit

我刚开始学习单元测试（使用 FlexUnit）。我仍然不确定如何使用它们。

我创建了一个新的 flex 项目，并创建了一个名为`Car`. 然后，我为 Car 类创建了一个 TestCase 类。

这是FlexBuilder给我的默认模板，我放了一些痕迹。

```
package flexUnitTests
{
    import flexunit.framework.Assert;

    public class CarTest
    {       
        [Before]
        public function setUp():void
        {
            trace('before test function');
        }

        [After]
        public function tearDown():void
        {
            trace('after test function');
        }

        [BeforeClass]
        public static function setUpBeforeClass():void
        {
            trace('before test class');
        }

        [AfterClass]
        public static function tearDownAfterClass():void
        {
            trace('after test class');
        }

        [Test]
        public function testCar():void
        {
            trace('the test function');

            var c:Car = new Car("gol");

            Assert.assertTrue("Is car name valid:", c.name != "gol");
        }
    }
} 
```

我不明白为什么在测试函数之前或之后要运行这么多方法。为什么不在一个简单的函数中使用它们，例如：

```
 [Test]
        public function testCar():void
        {
            trace('before test class');
            trace('before test function');

            trace('the test function');

            var c:Car = new Car("gol");

            Assert.assertTrue("Is car name valid:", c.name != "gol");

            trace('after test function');
            trace('after test class');
        } 
```

我想补充的第二个问题是，这些测试单独测试每个类（如实例化`Car`类时所示）或者我可以通过实例化主类来测试我的整个应用程序一次？问题是如何模拟应用程序的整个用户流程（用户点击这里，向那里的服务器发送请求等）。我应该在测试方法中一个一个地写一个完整的流程吗？`:O`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:23:25.330

> 我不明白为什么在测试函数之前或之后要运行这么多方法。

您不必*实现*所有这些方法。FB 为您生成了所有这些存根，但您不妨将它们排除在外。

也就是说，您可以在一个测试类中拥有多个测试函数。您通常会测试一个类的每个公共函数。您甚至可以使用不同的极端情况参数集对每个函数进行多个测试。
例如，在您的示例中，您只测试构造函数，但您可能需要测试：

*   `car.turnLeft(32)`（度数）
*   或者看看什么时候发生`car.turnLeft(0)`
*   或者`car.turnLeft(190)`（你正在进入`car.turnRight`这里的地形）
*   或`car.turnLeft(-12)`（负向左转？）

before/after 方法可用于编写一些您希望在类中的每个测试之前/之后执行的代码，这样您就不必在每个测试函数中重复此操作。

> 这些测试单独测试每个班级

这不是**单元**测试吗？

> 我可以通过实例化主类来测试我的整个应用程序吗？

这不是单元测试的用途：它们只测试类。还有其他类型的测试工具来测试（部分）应用程序：

*   行为测试工具：您在其中编写包含典型执行序列的场景并断言这些序列的结果是正确的。我相信[Cucumber](http://cukes.info/)可以通过这种方式测试 Flex 应用程序（但不完全确定）
*   UI 测试工具：您可以在其中记录用户在应用程序中点击的场景。然后可以回放这些场景以测试应用程序是否按预期运行。[FlexMonkey](http://www.gorillalogic.com/testing-tools/flexmonkey)是 Fl​​ex 应用程序的此类解决方案之一，但所有者似乎已经改变了产品的方向。

# html - 使用 HTML5 移动样板 (MBP) 开发移动网站

> ID：13860084
> 
> 赞同：0
> 
> 时间：2012-12-13T12:40:29.790
> 
> 标签：html, css, mobile, xhtml, web-standards

我想创建一个移动网站，并希望针对从高端（Iphone、android）到低端（诺基亚、LG 翻盖手机）的几乎所有设备。

选择哪种方式进行开发：

1.  开发 2 个站点，一个基于 HTML5，用于针对最新手机，第二个基于 XHTML MP，也支持旧手机。

2.  使用移动样板 - 在 HTML5 上开发站点，包括用于不支持某些 HTML5 功能的手机的后备脚本（在modernizr 的帮助下）。

哪种方法看起来既方便又明智。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:46:35.677

When you say **mobile** what kind of *output* do you want at the mobile devices?

like a **mobile app** or a **website**?

if it's ok to be like a **mobile app**, I would suggest [**jQuery Mobile**](http://jquerymobile.com/) (if you're used to jQuery), [**Sencha Touch**](http://www.sencha.com/products/touch), if you love javascript developing or any other mobile framework.

They will support almost any mobile device out there, that at least runs Opera Mobile.

Take a look, for example, at [jQuery Mobile Platforms](http://jquerymobile.com/gbs/) that will run.

If it's a normal **website feel** that you want, I would suggest [**Bootstrap Framework**](http://twitter.github.com/bootstrap/) with their [**responsive** approach](http://twitter.github.com/bootstrap/getting-started.html#examples).

# navigation - Windows Phone 导航

> ID：13860089
> 
> 赞同：1
> 
> 时间：2012-12-13T12:40:43.227
> 
> 标签：navigation, windows-phone-7.1, windows-phone, windows-phone-8

我想在不重新创建新实例或修改 NavigationStack 的情况下导航到 NavigationStack 中的页面。

这可能吗？

例如：

```
NavigationStack: 
    Page1.xaml
    Page2.xaml
    Page3.xaml 
```

现在假设我在 Page1.xaml 上，并且想要再次导航到 Page3.xaml。如果我跑

```
NavigationService.Navigate(new Uri("/Page3.xaml", UriKind.Relative));
```

它创建另一个 Page1 对象并导航到该对象，但我想再次使用现有的页面对象。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:05:10.103

调用`NavigationService.Navigate()`将创建指定页面的新实例。这就是系统的工作方式。

如果要导航到后堆栈中存在的页面，有两个选项。

1.  查询回栈并返回有问题的页面。这样做的后果是您可能会破坏感知到的回栈行为，并且页面生命周期也可能存在您需要解决的其他问题。您还需要以不使用查询字符串的方式在您导航到的页面之间进行通信。

2.  将页面完全绑定到单例视图模型。即页面上的所有内容都绑定到视图模型的单个实例。如果您随后导航到该页面的新实例（假设导航不会更改/更新 VM），它将具有与后端堆栈上的任何其他实例相同的数据、配置等。

您的应用程序应遵循中心辐射结构进行导航。执行上述任一操作都可能会破坏用户对预期内容的看法。如果您执行上述任何操作，请务必与熟悉平台并了解违反平台约定的任何后果的用户进行彻底测试。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T06:21:09.550

看看[http://mvvmlight.codeplex.com/](http://mvvmlight.codeplex.com/)

每个页面都是在应用程序启动时创建的静态对象

# iphone - IOS文本到语音转换

> ID：13860091
> 
> 赞同：5
> 
> 时间：2012-12-13T12:40:55.820
> 
> 标签：iphone, ios, xcode

> **可能重复：**
> [iPhone 上的文字转语音](https://stackoverflow.com/questions/416064/text-to-speech-on-iphone)

我是`tts`ios 技术的新手。有人可以告诉我`TTS`支持所有语言的通用语言本地化的有效库吗，我试过了`ispeech`，`flite`等等`OpenEar`，但是有没有其他选择，更有效，音质好。谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:58:47.610

您可以使用：

1.  [谷歌语音合成](https://stackoverflow.com/questions/5923974/iphone-sdk-google-tts-and-encoding)
2.  [龙](http://www.nuance.com/for-developers/dragon/index.htm)
3.  [阿卡佩拉](http://www.acapela-for-iphone.com/)
4.  [伊沃娜](http://developer.ivona.com/)
5.  [新演讲](http://www.neospeech.com/tts-engine.aspx)

[此处](https://github.com/jonbarlo/iPhoneTTSSampleApp)为TTS 示例应用程序（Objective-C）

这是 TTS 的[示例代码](https://bitbucket.org/sfoster/iphone-tts/src)（不工作）

**注意：** 除了 Dragon 之外，我对上述 TTS 库没有个人经验。这是一个不错的 TTS 库，具有良好的音质。

# visual-studio - Visual Studio 2012 中的外部链接在 Windows 8 上不起作用

> ID：13860092
> 
> 赞同：2
> 
> 时间：2012-12-13T12:41:00.270
> 
> 标签：visual-studio, google-chrome, visual-studio-2012, external-links

我在 Windows 8 上运行 Visual Studio 2012，并且没有打开指向外部页面的链接（例如，NuGet 包管理器中显示的更多信息链接）。我怎样才能解决这个问题？顺便说一句，我的默认浏览器是谷歌浏览器。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:41:00.270

该问题是一个非常具体的问题，仅当您以管理员身份运行 VS2012 并且您将 Google Chrome 设置为默认浏览器时才会出现此问题。问题是 Google Chrome 未能将自己注册为管理员用户的默认浏览器。您可以通过执行以下操作来确认这一点：

1.  启动管理命令提示符（或任何启动浏览器的管理应用程序）
2.  输入开始[http://cnn.com](http://cnn.com)
3.  失败。班级未注册。

该问题已在以下位置注册：[http ://code.google.com/p/chromium/issues/detail?id=156400](http://code.google.com/p/chromium/issues/detail?id=156400)

它还列出了解决方案，即使用开发者频道重新安装 Google Chrome（请访问：[https](https://www.google.com/intl/en/chrome/browser/index.html?extra=devchannel#eula) ://www.google.com/intl/en/chrome/browser/index.html?extra=devchannel#eula ） . 这会将 Google Chrome 重新注册为默认浏览器，但现在它也适用于管理员用户。安装成功后，您可以通过再次运行前两个步骤来验证一切是否正常。第三步应该是谷歌浏览器打开[http://cnn.com](http://cnn.com)。

您现在可以再次使用常规分支重新安装 Google Chrome：https: [//www.google.com/intl/en/chrome/browser/](https://www.google.com/intl/en/chrome/browser/)

# c# - 如何在 Visual Studio 2012 中制作 xml 文档

> ID：13860098
> 
> 赞同：5
> 
> 时间：2012-12-13T12:41:17.580
> 
> 标签：c#, visual-studio, visual-studio-2012, xml-documentation

如何在 Visual Studio 2012 中生成我的 C# Web 应用程序的文档，就像 Eclipse 一样？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T12:58:05.870

在 Visual Studio 中转到工具菜单 -> 扩展管理器...然后在扩展管理器中单击在线图库（在左侧），然后在右上角的搜索框中键入文本... [ghostdoc](http://submain.com/products/ghostdoc.aspx) 这是一个非常好的文档助手。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:53:47.240

您可以使用 xml 注释来注释您的代码

```
/// <summary>
///  This class performs an important function.
/// </summary> 
```

然后编译/doc后生成xml文档。这是来源：http: [//msdn.microsoft.com/en-us/library/b2s063f7.aspx](http://msdn.microsoft.com/en-us/library/b2s063f7.aspx)

我还建议您使用 Sandcastle 及其帮助文件生成器，这是一个非常强大的工具： [http ://shfb.codeplex.com/](http://shfb.codeplex.com/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:48:29.647

请查看这篇文章：[免费的 Visual Studio XML 文档创作工具](https://stackoverflow.com/questions/3821807/free-visual-studio-xml-documentation-authoring-tool)

他们建议[沙堡](http://sandcastle.codeplex.com/)工具。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-19T19:31:30.903

您可以将 ghostdoc 用于 XML 文档。

[http://submain.com/products/ghostdoc.aspx](http://submain.com/products/ghostdoc.aspx)

您可以使用 sandcastle 创建帮助文档

[http://sandcastle.codeplex.com/](http://sandcastle.codeplex.com/)

# java - 如何将 HTTP GET 请求参数绑定到 JavaBean 对象变量？

> ID：13860102
> 
> 赞同：1
> 
> 时间：2012-12-13T12:41:21.543
> 
> 标签：java, spring, spring-mvc

在此期间，我正在研究 Sping MVC 展示示例可下载表单 STS 仪表板。

请求数据部分显示了如何将 HTTP GET 请求的参数绑定到 JavaBean 的同名变量。

在实践中，我有以下链接：

```
 <a id="group" class="textLink" 
    href="<c:url value="/data/group?param1=foo&param2=bar&param3=baz" />">
       Group of query parameters
 </a> 
```

此链接生成一个指向“/data/group” URL 的 GET HTTP 请求。该请求携带 3 个参数，名为 param1、param2、param3。

此请求由我的控制器类的以下方法处理：

```
@RequestMapping(value="group", method=RequestMethod.GET)
public @ResponseBody String withParamGroup(JavaBean bean) {
    return "Obtained parameter group " + bean;
} 
```

withParamGroup() 方法使用一个 JavaBean 对象，该对象只是一个包含 3 个变量和 getter/setter 方法的对象，如下所示：

```
public class JavaBean {

    private String param1;
    private String param2;
    private String param3;

        // GETTER & SETTER method
} 
```

所以 HTTP Request 中的 param1 参数存储在 JavaBean Object 的 param1 变量中，param2 和 param3 也是一样的。

好的...我想这对我来说很清楚...但是...谁做这个手术？它是由 Spring 框架自动生成的吗？

为什么我不必像在控制器方法中将单个 HTTP 请求参数与单个变量绑定时那样使用 @RequestParam 注释之类的东西？

另一个疑问是：HTTP 参数名称必须与 JavaBean 变量相同，还是只是第一个参数值存储在 JavaBean 对象的第一个变量中？

谢谢

安德烈亚

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:46:28.633

有趣的是，Spring 文档似乎缺少有关此功能的详细信息，但 Spring MVC 文档中有一些要点似乎表明 Spring 负责在请求映射过程中应用此行为。`@RequestParam`在文档中有关使用属性将请求参数绑定到方法参数的部分中对此功能有参考（位于[此处](http://static.springsource.org/spring/docs/current/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-ann-requestparam)）：

> 如果目标方法参数类型不是字符串，则会自动应用类型转换。请参阅第 16.3.3.14 节，“方法参数和类型转换”。

如果您然后转到引用的部分，文档建议 Spring 自动转换原始对象类型（[此处](http://static.springsource.org/spring/docs/current/spring-framework-reference/htmlsingle/spring-framework-reference.html#mvc-ann-typeconversion)）：

> 从请求中提取的基于字符串的值，包括请求参数、路径变量、请求标头和 cookie 值，可能需要转换为方法参数或字段的目标类型（例如，将请求参数绑定到 @ModelAttribute 中的字段参数）他们绑定到。如果目标类型不是 String，Spring 会自动转换为合适的类型。支持所有简单类型，例如 int、long、Date 等。您可以通过 WebDataBinder（请参阅第 16.3.3.15 节，“自定义 WebDataBinder 初始化”）或通过向 FormattingConversionService 注册格式化程序（请参阅第 6.6 节，“Spring 3 字段格式”）进一步自定义转换过程。

不幸的是，这似乎没有充分解释为什么要转换非原始对象类型，但也许文档不是最新的功能。

关于属性名称是否必须与参数匹配的最后一点 - 这是我的推测，因为我找不到任何支持它的文档，但我会根据你对 Spring 将寻求的这个“特性”所经历的行为进行猜测按名称而不是请求中的参数顺序将参数与属性匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:48:20.707

您可以`@RequestParam`在控制器中使用带有在获取 URL 中使用的变量名称的注释。

# c# - 在 for 循环中使用相同的对象 - C#

> ID：13860104
> 
> 赞同：2
> 
> 时间：2012-12-13T12:41:29.047
> 
> 标签：c#, oop, object

在这个场景中，程序获取目录中的 xmlfiles。如果每个 xmlfile 已添加到 listToWatch 列表中，则将在第二种方法中对其进行评估。然而， firstMethod 也被循环用于评估每个目录（下面没有写）。

该程序会检测 xml 文件中已添加的所有文件。但是如果程序转到另一个目录（因为 firstMethod 在另一个类中循环），则 listToWatch = new List() 会被传递，擦除之前的 listToWatch 并创建一个新对象。

我想使用相同的对象而不被新列表覆盖。我不能将 listToWatch = new List 放在 secondMethod 中，因为有一个 for 循环，它只会用新对象覆盖 listToWatch。我也不能把它放在 firstMethod 中，因为它需要在 secondMethod 中设置。我也不能把它放在类 Sample 中。我应该把 listToWatch = new List() 放在哪里？

```
class Sample
{
    public static List<string> listToWatch
    {
        get;
        set;
    }

    public static void firstMethod()
    {
        string getFiles = Directory.GetFiles(directory, "*.xml");
        foreach (string xmlFile in getFiles)
        {
            secondMethod(xmlFile);
        }
    }

    public static void secondMethod(xmlFile)
    {
        listToWatch = new List<string>();
        foreach (string file in xmlFile)
        {
            if (listToWatch.Contains(file))
            {
                sw.WriteLine(file + " is already added!");
            }
            else
            {
                listToWatch.add();
            }
        }
    } 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T12:45:44.710

what about using it with getter and setter?

```
private static List<string> _ListToWatch;
public static List<string> ListToWatch
{
    get
        {
         if(_ListToWatch == null) 
              _ListToWatch = new List();
          return _ListToWatch;
         }
    set 
     {
      _ListToWatch = value;
     }

} 
```

Must say, probably are better options to let the method return this object instead of store it, but if for some reason you can't change that, I think this will work

edit: Thanks to @gorpik, this is called "*property*" and not "*using getter and setter*".

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:55:26.340

如果您对冗余内存分配没有疑虑（在空目录、空 xml 的情况下 - 不需要该列表），只需在静态声明本身中初始化 ListToWatch：

```
class Sample
{
    private static List<string> listToWatch = new List<string>();
    public static List<string> ListToWatch
    {
        get { return listToWatch; };
    }
...
} 
```

注意一个缺席的 setter：只有这个类被允许更改 listToWatch 引用。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T12:50:27.220

您可以在静态构造函数中初始化 listToWatch，也可以使用 Gonzalo 建议的方法。

```
class Sample
{
    static Sample()
    {
        listToWatch = new List<string>();
    }

    public static List<string> listToWatch
    {
        get;
        set;
    }

    public static void firstMethod()
    {
        string[] getFiles = Directory.GetFiles(directory, "*.xml");
        foreach (string xmlFile in getFiles)
        {
            secondMethod(xmlFile);
        }
    }

    public static void secondMethod(xmlFile)
    {
        foreach (string file in xmlFile)
        {
            if (listToWatch.Contains(file))
            {
                sw.WriteLine(file + " is already added!");
            }
            else
            {
                listToWatch.add();
            }
        }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T12:46:42.860

You just have to move the `new List<string>()` statement into `firstMethod`, so that it creates a list of strings once for all the files it's going to add.

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T12:50:12.510

你只需要创建一次这个列表，所以让它发生在 firstMethod 上。尝试隔离代码职责。

我认为@Gonzalo.- 解决方法对您的情况很有趣。

干杯

# .htaccess - mod_rewrite 对于热链接图像无法正常工作

> ID：13860105
> 
> 赞同：2
> 
> 时间：2012-12-13T12:41:31.873
> 
> 标签：.htaccess, mod-rewrite, redirect, hotlinking

我想将所有热链接图像重定向到一个虚拟图像。

我为此应用了 htaccess 代码，但它**仅重定向 404（未找到）图像**

表示未重定向具有正确链接的热链接图像。

我还为非 www 应用了重定向到 www 版本，认为此重定向导致与热链接重定向代码发生冲突

这是代码

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^mysite.com$
RewriteRule ^(.*)$ http://www.mysite.com/$1 [R=301]
RewriteCond %{REQUEST_fileNAME} !-d
RewriteCond %{REQUEST_fileNAME} !-f

RewriteCond %{HTTP_REFERER} !^http://(www\.)?mysite/.*$ [NC]
RewriteRule \.(gif|jpg|png) http://www.mysite.com/temp/aa.jpg [R,L] 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:57:52.297

好吧，您明确排除了对在这种情况下确实存在的文件的请求的重写：

```
RewriteCond %{REQUEST_FILENAME} !-f 
```

实际上，我不确定您是否真的要将每个图像的所有客户端重定向到另一个域名。这意味着您将客户端所需的 http 请求增加一倍。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:13:49.247

像这样的修改应该可以工作：

```
RewriteEngine On
RewriteBase /
RewriteCond %{HTTP_HOST} ^mysite\.com$
RewriteRule ^(.*)$ http://www.mysite.com/$1 [R=301,L]

RewriteCond %{REQUEST_FILENAME} !-d
RewriteCond %{REQUEST_URI} !^.*/aa.jpg$
RewriteCond %{HTTP_REFERER} !^http://(www\.)?mysite\.com/?$ [NC]
RewriteRule ^.*\.(gif|jpg|png)$ http://www.mysite.com/temp/aa.jpg [R=301,L] 
```

# jsf - Primefaces gmap 组件编辑

> ID：13860111
> 
> 赞同：1
> 
> 时间：2012-12-13T12:41:45.853
> 
> 标签：jsf, primefaces

我想在 gmap 组件中添加垂直线，例如[http://www.highcharts.com/demo/spline-plot-Bands](http://www.highcharts.com/demo/spline-plot-Bands)但我什至不知道如何开始

# html - 按 x 轴滚动

> ID：13860114
> 
> 赞同：0
> 
> 时间：2012-12-13T12:42:00.080
> 
> 标签：html, css

如何强制将滚动添加到 div 的底部（x 轴）以使所有方块都向右移动？

CSS：

```
#videowall-grid{
    width:700px; 
    border:1px dotted #dddddd;
    display: none; 
    margin: 5px auto;
    padding: 5px;
    text-align:center;
}

#videowall-grid .videowall-row{
    border: 1px solid red;
    overflow-y: auto;
    width: 700px;
    height: 120px;
}

#videowall-grid .videowall-square{
    padding: 5px;
    margin: 5px;
    border: 1px dashed #dddddd;
    width: 100px;
    height: 100px;
    display: inline-block;
    vertical-align:top;
}​ 
```

HTML：

```
<div id="videowall-grid" style="display: block;">
    <div class="videowall-row">
        <div class="videowall-square" id="1_1">afasfasdfas</div>
        <div class="videowall-square" id="1_1">afasfasdfas</div>
        <div class="videowall-square" id="1_1">afasfasdfas</div>
        <div class="videowall-square" id="1_1">afasfasdfas</div>
        <div class="videowall-square" id="1_1">afasfasdfas</div>
        <div class="videowall-square" id="1_1">afasfasdfas</div>
        <div class="videowall-square" id="1_1">afasfasdfas</div>
        <div class="videowall-square" id="1_2">sadfasfasdafsdasdfsafsadfsafsfadfasdfasfasdfasf</div>
        <div class="videowall-square" id="1_3">adfasfdasdf channel 1 camera with a very very very</div>
        <div class="videowall-square" id="1_4">asdfadsffasdsf</div>
    </div>
    <div class="videowall-row">
        <div id="2_1" class="videowall-square">asdfasd cam1</div>
        <div id="2_2" class="videowall-square">asdfasd cam2</div>
        <div id="2_3" class="videowall-square">asdfasd cam4</div>
        <div id="2_4" class="videowall-square">button</div>
    </div>
    <div class="videowall-row">
        <div id="3_1" class="videowall-square"></div>
        <div id="3_2" class="videowall-square">button</div>
        <div id="3_3" class="videowall-square">button</div>
        <div id="3_4" class="videowall-square">button</div>
    </div>
</div>​ 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:52:38.843

看起来谁想要一个 JS 解决方案。但是您是否考虑过使用[http://flesler.blogspot.com/2007/10/jqueryscrollto.html](http://flesler.blogspot.com/2007/10/jqueryscrollto.html)

会让事情变得容易很多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:56:11.143

*   添加[`overflow: auto;`](http://www.quirksmode.org/css/overflow.html)到正方形，使溢出的文本留在里面。
*   添加[`white-space: nowrap;`](http://www.quirksmode.org/css/whitespace.html)行以强制正方形位于同一行。
*   您可以将行高设置为正方形的高度`line-height: 100px;` **，**也可以将填充设置为等于高度 (100/2 = 50)`padding: 50px 0;`以使文本垂直居中^(（评论后编辑）)

[带有 line-height 的垂直中心](http://jsfiddle.net/qLy2j/)。
[带填充的垂直中心](http://jsfiddle.net/H5tND/)。

* * *

## [示例](http://jsfiddle.net/T3rrA/)| 代码

CSS

```
#videowall-grid{
    width:700px;
    border:1px dotted #dddddd;
    display: none;
    margin: 5px auto;
    padding: 5px;
    text-align:center;
}

#videowall-grid .videowall-row{
    border: 1px solid red;
    overflow-y: auto;
    width: 700px;
    height: 120px;
    white-space: nowrap;
}

#videowall-grid .videowall-square{
    padding: 5px;
    margin: 5px;
    border: 1px dashed #dddddd;
    width: 100px;
    height: 100px;
    display: inline-block;
    vertical-align:top;
    overflow: auto;
} 
```

HTML

```
<div id="videowall-grid" style="display: block;">
    <div class="videowall-row">
        <div class="videowall-square" id="1_1">afasfasdfas</div>
        <div class="videowall-square" id="1_1">afasfasdfas</div>
        <div class="videowall-square" id="1_1">afasfasdfas</div>
        <div class="videowall-square" id="1_1">afasfasdfas</div>
        <div class="videowall-square" id="1_1">afasfasdfas</div>
        <div class="videowall-square" id="1_1">afasfasdfas</div>
        <div class="videowall-square" id="1_1">afasfasdfas</div>
        <div class="videowall-square" id="1_2">sadfasfasdafsdasdfsafsadfsafsfadfasdfasfasdfasf</div>
        <div class="videowall-square" id="1_3">adfasfdasdf channel 1 camera with a very very very</div>
        <div class="videowall-square" id="1_4">asdfadsffasdsf</div>
    </div>
    <div class="videowall-row">
        <div id="2_1" class="videowall-square">asdfasd cam1</div>
        <div id="2_2" class="videowall-square">asdfasd cam2</div>
        <div id="2_3" class="videowall-square">asdfasd cam4</div>
        <div id="2_4" class="videowall-square">button</div>
    </div>
    <div class="videowall-row">
        <div id="3_1" class="videowall-square"></div>
        <div id="3_2" class="videowall-square">button</div>
        <div id="3_3" class="videowall-square">button</div>
        <div id="3_4" class="videowall-square">button</div>
    </div>
</div> 
```

# objective-c - Obj-C 中的枚举序数（在 Cocos2D 中使用 Z 值的枚举）

> ID：13860118
> 
> 赞同：0
> 
> 时间：2012-12-13T12:42:33.110
> 
> 标签：objective-c, enums, cocos2d-iphone, ordinal

我想避免手动为 Cocos2D 中的层/节点分配随机 Z 值并计划为其使用枚举。

我知道枚举是有序的，但是***依赖***Obj-C/Cocos2D 中的枚举排序是否安全？

例如，做类似的事情是否安全

枚举 { kZValMIN, kZValLayer1, kZValLayer2, ........ kZValLayerN, kZValMAX }

当我想要 LayerN 最顶部和 Layer1 在底部？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:48:21.080

是的。

此外，您可以分配特定的值，并且以下对象的枚举从该值继续：

```
enum { 
kZValMIN, 
kZValLayer1 = 10,
kZValLayer2 = 20, 
........ 
kZValLayerN = 100, 
kZValMAX, 
} 
```

kZValMAX 将是 101。

# lua - 在组内定位图像

> ID：13860119
> 
> 赞同：0
> 
> 时间：2012-12-13T12:42:39.353
> 
> 标签：lua, coronasdk

如何在图像组中定位单个图像？

我目前正在使用以下代码：

```
--category 1
local light1 = display.newImage("Images/Category 1/pistol1.png")
local light2 = display.newImage("Images/Category 1/machinePistol1.png")

--category 1 image group
local lightGroup = display.newGroup()
lightGroup.x, lightGroup.y = 100, 150
lightGroup:insert( light1 )
lightGroup:insert( light2 )
lightGroup.isVisible = false 
```

但它将两个图像放在彼此的顶部。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-15T19:00:27.043

您仍然需要在您正在创建的每个图像上设置 X、Y。

```
 light1.x = 100
 light1.y = 100
 light2.x = 200
 light2.y = 100 
```

# performance - MATLAB中的图像分割及其性能比较

> ID：13860120
> 
> 赞同：1
> 
> 时间：2012-12-13T12:42:42.660
> 
> 标签：performance, matlab, image-segmentation

你好，

我正在研究基于 ROI 和轮廓算法的图像分割。我想比较这两种方法的性能。

1.  在什么基础上我可以比较这两种方法并证明一种比另一种更好？

2.  请帮助我使用matlab代码来做到这一点。我有为这两种方法提供分段图像的代码，但我不知道如何比较这些方法。请帮助我使用 MATLAB 代码。如果需要，我将提供为这两种方法提供分段图像的代码。

请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:49:04.960

比较图像分割算法是一项非常复杂的任务。因为并不总是清楚图像的“真实”片段是什么。但是，为此有几个学术基准（如果您同意他们提出的分段措施）。

最突出的基准是： [BSDS](http://www.eecs.berkeley.edu/Research/Projects/CS/vision/bsds/)

另一个是： [Alpert 的分割评估数据集](http://www.wisdom.weizmann.ac.il/~vision/Seg_Evaluation_DB/index.html)

我相信两者都有 Matlab 接口。

# android - 如何在android中使用广播接收器调用接口

> ID：13860123
> 
> 赞同：1
> 
> 时间：2012-12-13T12:42:45.113
> 
> 标签：android, broadcastreceiver

我想使用广播接收器在固定时间调用此方法的警报

```
/**
 * Delete all messages
 */
private void performDeleteAll() {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    builder.setMessage(getString(R.string.confirm_message))
            .setCancelable(false)
            .setNegativeButton(getString(R.string.confirm_no),
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            dialog.cancel();
                        }
                    })
            .setPositiveButton(getString(R.string.confirm_yes),
                    new DialogInterface.OnClickListener() {
                        public void onClick(DialogInterface dialog, int id) {
                            // delete all messages
                            mHandler.post(mDeleteAllMessages);
                            adapter.refresh();
                        }
                    });
    AlertDialog alert = builder.create();
    alert.show(); 
```

}

删除所有消息但它没有发生请帮助我提前感谢

/** * 删除所有消息。0 - 成功删除。1 - 没有要删除的内容。*/

```
final Runnable mDeleteAllMessages = new Runnable() {
    public void run() {
        getActivity().setProgressBarIndeterminateVisibility(true);
        boolean result = false;

        int deleted = 0;

        if (adapter.getCount() == 0) {
            deleted = 1;
        } else {
            result = model.deleteAllMessages();
        }

        try {
            if (deleted == 1) {
                toastLong(R.string.no_messages_to_delete);
            } else {
                if (result) {

                    toastLong(R.string.messages_deleted);
                    showMessages();
                } else {
                    toastLong(R.string.messages_deleted_failed);
                }
            }
            getActivity().setProgressBarIndeterminateVisibility(false);
        } catch (Exception e) {
            return;
        }
    }
}; 
```

我正在使用这个广播接收器

```
public class AlarmReceiver extends BroadcastReceiver implements Runnable {

    @Override
    public void onReceive(Context context, Intent intent) {
        // TODO Auto-generated method stub
        Toast.makeText(context, "Import Messages Invoke ",Toast.LENGTH_LONG).show();
    //  context.startService(new Intent(context,ImportMessagesTask.class));

        MessagesModel.deleteAllMessages();{
    //   new MessagesModel().deleteAllMessages();

        Database.mMessagesContentProvider.deleteAllMessages();
        }

    //  mHandler.post(mDeleteAllMessages);
    //  adapter.refresh(); 
```

正如你所说，我做了我创建了一个活动

公共类 Activity 扩展 PendingMessages 实现 Runnable{

```
/**
 * Delete all messages. 0 - Successfully deleted. 1 - There is nothing to be
 * deleted.
 */

@Override
public void run() {
    // TODO Auto-generated method stub
    getActivity().setProgressBarIndeterminateVisibility(true);
    boolean result = false;

    int deleted = 0;

    if (adapter.getCount() == 0) {
        deleted = 1;
    } else {
        result = model.deleteAllMessages();
    }

    try {
        if (deleted == 1) {
            toastLong(R.string.no_messages_to_delete);
        } else {
            if (result) {

                toastLong(R.string.messages_deleted);
                showMessages();
            } else {
                toastLong(R.string.messages_deleted_failed);
            }
        }
        getActivity().setProgressBarIndeterminateVisibility(false);
    } catch (Exception e) {
        return;
    }
} 
```

}

然后通过调用它

context.startService(new Intent(context,Activity.class));

但它不工作，然后我称之为通过

context.startActivity(new Intent(context,Activity.class));

然后它关闭的力量我没有得到任何帮助请让我正确提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T08:50:36.943

实际上问题是我想在后台运行 UI，但在 Android 中是不可能的。然后我使用Service在后台运行

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:50:51.230

您无法显示来自广播接收器的 UI。

将上述代码放入活动中并从 BroadcastReciever 启动活动

编辑：使用

```
context.startActivity(intent); 
```

开始活动

# php - Symfony 2 GET url 参数 API

> ID：13860125
> 
> 赞同：0
> 
> 时间：2012-12-13T12:42:58.203
> 
> 标签：php, api, symfony

我问一个 API，它使用这个 URL 在我的网站上重定向：

```
http://localhost/#!/Test?code=e5854f28a9bd2940734t58f91a333662 
```

在我的控制器中，我想像这样捕获“代码”参数：

```
<?php
$request = $this->get('request');
if($request->query->get('code'))
    echo 'ok';
else
    echo 'not ok';
?> 
```

但是什么都没有`$request->query`......我想这是因为我没有这种格式的路线，但我怎么能强制或得到它？还是我必须创建一条路线？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T12:51:19.300

服务器不处理 hashbang 之后的内容，因此您的`$request`对象将为空。

Hashbang 路由应该由客户端 [Backbone.js, Angular.js, 不管] 处理，它应该向服务器询问适当的 [RESTful] 资源，这将使用常规的 URI 模式。

# objective-c - 以平滑的速度旋转图像

> ID：13860126
> 
> 赞同：1
> 
> 时间：2012-12-13T12:43:01.150
> 
> 标签：objective-c

使用此代码我正在尝试旋转图像。图像旋转但速度相同。我正在尝试通过平滑旋转来旋转图像，但我不能这样做。这是我的代码：

```
(void)spinLayer:(CALayer *)inLayer duration:(CFTimeInterval)inDuration
    direction:(int)direction repeat:(int)repeat
{
    repeatcount = repeat+repeatcount;
    timer = [NSTimer scheduledTimerWithTimeInterval: inDuration target: self     selector:@selector(setCountLableValue) userInfo: nil repeats: YES];
    CABasicAnimation* rotationAnimation;
    rotationAnimation =
    [CABasicAnimation animationWithKeyPath:@"transform.rotation.z"];
    rotationAnimation.fromValue = [NSNumber numberWithFloat: M_PI *2.0 * direction];
    rotationAnimation.repeatCount = repeat;
    NSLog(@"Repeat count %d",repeat);
    rotationAnimation.duration = inDuration;
    rotationAnimation.timingFunction = [CAMediaTimingFunction functionWithName:kCAMediaTimingFunctionLinear];
    [inLayer addAnimation:rotationAnimation forKey:@"rotation"];

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:47:30.923

There are different timingFunctions you can use. You used a linear function, try one of these instead of `kCAMediaTimingFunctionLinear`

```
NSString * const kCAMediaTimingFunctionEaseIn;
NSString * const kCAMediaTimingFunctionEaseOut;
NSString * const kCAMediaTimingFunctionEaseInEaseOut; 
```

See [https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CAMediaTimingFunction_class/Introduction/Introduction.html](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/CAMediaTimingFunction_class/Introduction/Introduction.html)

Regarding the repeating problem, try adding the following code after creating the animation: (this is just an idea, I really don't know why the ease function is only used once)

```
rotationAnimation.removedOnCompleted = NO;
rotationAnimation.fillMode = kCAFillModeForwards;
rotationAnimation.cumulative = YES; 
```

# qt - 如何在 Qt 的 .exe 文件中显示图标

> ID：13860127
> 
> 赞同：1
> 
> 时间：2012-12-13T12:42:59.600
> 
> 标签：qt, user-interface, qt4, icons, exe

我正在开发一个 Qt 应用程序，我需要在其中显示一些 UI 并对它们执行操作。当我运行应用程序时，它会`.exe`在我的调试/发布文件夹中创建一个。我想将图标放在`.exe`文件中，而不是默认出现的空白图标。

他们是一种可以在 .ui 文件中执行此操作的方式，还是我们需要以编程方式执行此操作？我有点确定我需要使用资源文件并将图像存储在那里。我试图搜索更多详细信息，但无法找出与`Qt`. 请帮忙 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:53:53.307

这听起来很有趣：

> 我试图搜索更多细节，但无法找出与 Qt 相关的任何内容

官方手册，无意间在谷歌上“qt set application icon”搜索查询的第一个结果，将为您提供帮助：http: [//doc.qt.digia.com/qt/appicon.html](http://doc.qt.digia.com/qt/appicon.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:51:43.523

您可以使用[Greenfish](http://download.cnet.com/Greenfish-Icon-Editor-Pro/3000-2193_4-10773415.html)图标编辑器

# jasper-reports - 如果先前的值相同，则 printWhenGroupChanges 不会重新打印

> ID：13860131
> 
> 赞同：2
> 
> 时间：2012-12-13T12:43:29.540
> 
> 标签：jasper-reports

我想打印一个包含 3 列的表格：组、子组和值。我只想在子组更改或它是工作表的第一行时打印组和子组。

这是我的报告：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport xmlns="http://jasperreports.sourceforge.net/jasperreports" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports http://jasperreports.sourceforge.net/xsd/jasperreport.xsd" name="printWhenGroupChangesInTable" pageWidth="595" pageHeight="842" columnWidth="555" leftMargin="20" rightMargin="20" topMargin="20" bottomMargin="20" uuid="f3095c03-6622-4524-a0fc-9471ad06913a">
    <style name="table">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1">
        <box>
            <pen lineWidth="1.0" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1_TH" mode="Opaque" backcolor="#F0F8FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1_CH" mode="Opaque" backcolor="#BFE1FF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <style name="table 1_TD" mode="Opaque" backcolor="#FFFFFF">
        <box>
            <pen lineWidth="0.5" lineColor="#000000"/>
        </box>
    </style>
    <subDataset name="New Dataset 1" uuid="9bf6fe22-d440-4db4-a496-8e0689a3cf35">
        <field name="COLUMN_0" class="java.lang.String"/>
        <field name="COLUMN_1" class="java.lang.String"/>
        <field name="COLUMN_2" class="java.lang.String"/>
        <sortField name="COLUMN_0"/>
        <sortField name="COLUMN_1"/>
        <group name="group">
            <groupExpression><![CDATA[$F{COLUMN_0}]]></groupExpression>
        </group>
        <group name="subgroup">
            <groupExpression><![CDATA[$F{COLUMN_1}]]></groupExpression>
        </group>
    </subDataset>
    <detail>
        <band height="20" splitType="Stretch">
            <componentElement>
                <reportElement uuid="e357d4bd-5ea9-49e6-ac22-161567bf6aea" key="table 1" style="table 1" x="0" y="0" width="555" height="20"/>
                <jr:table xmlns:jr="http://jasperreports.sourceforge.net/jasperreports/components" xsi:schemaLocation="http://jasperreports.sourceforge.net/jasperreports/components http://jasperreports.sourceforge.net/xsd/components.xsd">
                    <datasetRun subDataset="New Dataset 1" uuid="cbc8c9a3-d793-420c-8bbb-37a3d0e540d5">
                        <dataSourceExpression><![CDATA[new net.sf.jasperreports.engine.data.JRCsvDataSource("C:\\example.csv")]]></dataSourceExpression>
                    </datasetRun>
                    <jr:column width="185" uuid="3f354cfb-b31f-4c52-8103-d47891981e64">
                        <jr:detailCell style="table 1_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="699725e5-704a-4fe5-96e0-77eb57b7fc69" isPrintRepeatedValues="false" x="0" y="0" width="185" height="20" isPrintInFirstWholeBand="true" isPrintWhenDetailOverflows="true" printWhenGroupChanges="subgroup"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[$F{COLUMN_0}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column width="185" uuid="8046b163-8e37-489d-a9fd-2ef02c26c7d5">
                        <jr:detailCell style="table 1_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="537ee40d-36f4-42ff-99b1-ae3db1497384" isPrintRepeatedValues="false" x="0" y="0" width="185" height="20" isPrintInFirstWholeBand="true" isPrintWhenDetailOverflows="true" printWhenGroupChanges="subgroup"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[$F{COLUMN_1}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                    <jr:column width="185" uuid="9805e883-8dce-4e6b-b5a3-fc2249969e33">
                        <jr:detailCell style="table 1_TD" height="20" rowSpan="1">
                            <textField>
                                <reportElement uuid="b94b64a6-daa0-4cb5-8bcb-7fa0ab2d85dc" x="0" y="0" width="185" height="20"/>
                                <textElement/>
                                <textFieldExpression><![CDATA[$F{COLUMN_2}]]></textFieldExpression>
                            </textField>
                        </jr:detailCell>
                    </jr:column>
                </jr:table>
            </componentElement>
        </band>
    </detail>
</jasperReport> 
```

和样本数据：

```
group1,subgroup1,value1
group1,subgroup1,value2
group1,subgroup1,value3
group1,subgroup2,value1
group1,subgroup2,value2
group1,subgroup2,value3
group2,subgroup1,value1
group2,subgroup1,value2
group2,subgroup1,value3
group2,subgroup2,value1
group2,subgroup2,value2
group2,subgroup2,value3
group3,subgroup2,value1 
```

我的期望：

```
组 1 子组 1 值 1
                 价值2
                 价值3
组 1 子组 2 值 1
                 价值2
                 价值3
组 2 子组 1 值 1
                 价值2
                 价值3
组 2 子组 2 值 1
                 价值2
                 价值3
组 3 子组 2 值 1
```

我得到什么：

```
组 1 子组 1 值 1
                 价值2
                 价值3
       子组 2 值 1
                 价值2
                 价值3
组 2 子组 1 值 1
                 价值2
                 价值3
       子组 2 值 1
                 价值2
                 价值3
组 3 值 1
```

两个 textFiled 都标有 printWhenGroupChanges="subgroup"。

我不想使用 printWhenExpression: $V{subgroup_COUNT}==1 因为这样 isPrintInFirstWholeBand="true" 没有被考虑在内，并且 [group, subgroup] 连音不会打印在新页面的顶部。

我已经在 jasper 网站上做了一个错误报告：[错误报告](http://community.jaspersoft.com/jasperreports-library/issues/2625-0)。

有谁知道我该如何解决这个问题？

# c - STM32L LCD接口

> ID：13860141
> 
> 赞同：0
> 
> 时间：2012-12-13T12:44:05.173
> 
> 标签：c, stm32, iar

谁能告诉我如何与连接到 STM32L151RD 的 LCD 接口？我正在使用 IAR 工作台，示例项目没有产生任何结果。此外，我浏览了在线文档和教程，但它们都包含有关 STM32L152xD 的信息，而不是 151，它没有任何内置 LCD，但有 LCD 驱动程序。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T23:03:20.763

正如您在问题中所述，STM32L151RD 没有 LCD 控制器。数据表仅在首页标题功能列表中提及“LCD 驱动器”。我相信他们在这种情况下使用术语“驱动程序”作为“控制器”的同义词。如果没有这个控制器，我不知道有什么简单的方法可以使用 STM32L151RD 直接控制 LCD。

如果您打算使用 STmicro 提供的 STM32F10x_StdPeriph_Lib 软件库，那么不幸的是，这假设有一个 LCD 控制器（也就是说，您需要使用 STM32L152x）。

但是，LCD 可能具有嵌入式控制器芯片。这些允许微控制器通过 I2C 和 SPI 等通用接口驱动它们。4 位和 8 位并行接口也很常见，它们可以进行 bit-banged 或内存映射。如果您有这种类型的 LCD，则可以使用 STM32L151RD。

# oracle - Oracle - 每列的不同值

> ID：13860149
> 
> 赞同：1
> 
> 时间：2012-12-13T12:44:40.147
> 
> 标签：oracle, distinct

我知道有一些关于类似主题的讨论，但这有点不同

我需要在 Oracle 中进行查询以获取给定表的值对（列名、不同值的计数）。

示例：来自此表

```
|   ID     |    NAME    |    AGE   |
____________________________________
|   01     |    MARY    |    10    |
|   02     |    MAX     |    30    |
|   03     |    ALICE   |    30    |
|   04     |    MARY    |    20    |
|   05     |    JOE     |    10    |
____________________________________ 
```

我需要得到

```
|   COLUNL |    DIST. VALUES    |
________________________________
|   ID     |    5       |
|   NAME   |    4       | 
|   AGE    |    3       |
________________________________ 
```

问题是我不知道表格的结构。我将只有表名，我需要为每个表生成此信息。有任何想法吗？？？？？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T14:06:25.687

每列的不同值的数量存储在系统表中`USER_TAB_COL_STATISTICS`。通过调用过程来收集统计信息`DBMS_STATS.GATHER_TABLE_STATS`。询问您的 DBA，它应该已经设置好了。

```
CREATE TABLE mytable (id NUMBER, name VARCHAR2(10), age NUMBER);
INSERT INTO mytable VALUES (01, 'MARY',  10);
INSERT INTO mytable VALUES (02, 'MAX',   30);
INSERT INTO mytable VALUES (03, 'ALICE', 30);
INSERT INTO mytable VALUES (04, 'MARY',  20);
INSERT INTO mytable VALUES (04, 'JOE',   10);
COMMIT;
EXECUTE dbms_stats.gather_table_stats(user, 'MYTABLE');

SELECT table_name, column_name, num_distinct
  FROM user_tab_col_statistics
 WHERE table_name = 'MYTABLE';

TABLE_NAME COLUMN_NAME NUM_DISTINCT
MYTABLE    ID          4
MYTABLE    NAME        4
MYTABLE    AGE         3 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:57:33.767

您可以使用`UNION`, 例如...

```
 SELECT 'ID', Count(Distinct ID) As ValueCount From TableName
 UNION
 SELECT 'NAME', Count(Distinct NAME) From TableName
 UNION
 SELECT 'AGE', Count(Distinct AGE) From TableName 
```

[编辑]
另一种方法是分析表格，例如...

```
ANALYZE TABLE TABLENAME COMPUTE STATISTICS; 
```

进而...

```
SELECT COLUMN_NAME, NUM_DISTINCT FROM USER_TAB_COLUMNS WHERE TABLE_NAME = 'TABLENAME' 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:58:36.393

您可以使用`UNION ALL`查询`UNPIVOT`然后计算数据：

```
select col col_name,
  count(distinct value)
from
(
  select cast(id as varchar(10)) value, 'id' col
  from yourtable
  union all
  select name value, 'name' col
  from yourtable
  union all
  select cast(age as varchar(10)) value, 'age' col
  from yourtable
) 
group by col 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/9c27f/2)

如果您使用的是 Oracle 11g+，那么您可以使用该`UNPIVOT`函数来执行此操作：

```
select col, count(distinct value) CountofValue
from
(
  select cast(id as varchar(10)) id, 
    name, 
    cast(age as varchar(10)) age
  from yourtable
) 
unpivot
(
  value
  for col in (id, name, age)
) 
group by col 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!4/9c27f/5)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T14:00:55.750

在ideea之下，你应该做一些工作：

```
create table stats_on_tables(
    date_id date, 
    table_name varchar2(32), 
    col_name varchar2(32), 
    cnt_distinct number
); 
```

然后使用参数 p_table_name 创建一个过程：

```
for n in (select column_name from user_tab_columns where table_name = p_table_name)
loop
  execute immediate 
    'insert into stats_on_table (date_id, table_name, col_name, cnt_distinct)
     values (sysdate, '||p_table_name||','||n.column_name||', (
     select count(distinct '||n.column_name||') from '||p_table_name||' ))';
end loop;
commit; 
```

# android - 在 ACTION_OUTSIDE 之后接收触摸事件

> ID：13860160
> 
> 赞同：0
> 
> 时间：2012-12-13T12:46:18.400
> 
> 标签：android, overlay

**语境**

我有一个`TYPE_SYSTEM_ALERT`全屏覆盖窗口 ( )。

该标志`FLAG_NOT_TOUCHABLE`已启用，以便底层窗口获取触摸事件。

该标志`FLAG_WATCH_OUTSIDE_TOUCH`也被启用，以便我的叠加层在`ACTION_OUTSIDE`发生触摸事件时获得一个事件。

**目标**

如果触摸事件发生在屏幕的特定区域，我希望我的叠加层变为“可触摸”并接收所有后续触摸事件（移动、向上、...）。

**我试过的**

我尝试`FLAG_NOT_TOUCHABLE`在接收到时删除，但直到当前的触摸系列结束（即事件）`ACTION_OUTSIDE`之前我没有收到触摸事件。`ACTION_UP`

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-17T08:57:29.260

好吧，我最终使用了 2 个覆盖窗口：

*   用于捕捉内容上的触摸`TYPE_SYSTEM_ALERT`事件`wrap_content`
*   一个`TYPE_SYSTEM_OVERLAY`与`match_parent`

当触摸开始/结束时，我将我的内容视图从一个窗口转移到另一个窗口。

# php - laravel中的动态网址？

> ID：13860162
> 
> 赞同：23
> 
> 时间：2012-12-13T12:46:23.780
> 
> 标签：php, database, dynamic, routes, laravel

我正在考虑为我的下一个项目[切换到 laravel](http://laravel.com)。

我的下一个项目可能会是一个带有几个静态页面、一个博客和一个项目经理的小型站点，并且将使用控制器而不是路由。

我很好奇的是如何在 Laravel 中管理动态路由。

基本上，我想建立一个管理部分，这样我就可以轻松地动态创建静态页面，并且静态页面将具有以 SEO 为重点的 url，例如[http://domain.com/when-it-started](http://domain.com/when-it-started)我不想要必须为每个页面手动创建一个新的控制器或路由。

所以我想知道最干净的方法是什么。

基本上所有静态页面都将共享相同的视图，只需更改一些变量。

动态路由应该*与*控制器一起工作，而不是代替。

例如，如果我们有一个`about`带有函数的控制器，`staff`那么它应该通过 [http://domain.com/about/staff加载](http://domain.com/about/staff)

但我们没有该功能`players`，因此调用[http://domain.com/about/players](http://domain.com/about/players)应该检查数据库以查看是否存在动态路由并匹配。如果确实显示，则显示 404 页面。对于不存在的控制器也是如此。（例如，不会有`when-it-started`控制器！）

选择的答案似乎在 Laravel 4 中不起作用。对此有什么帮助吗？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-04-03T11:42:34.860

对于 Laravel 4，请执行此操作

```
Route::get('{slug}', function($slug) {
    $page = Page::where('slug', '=', $slug)->first();

    if ( is_null($page) )
        // use either one of the two lines below. I prefer the second now
        // return Event::first('404');
        App::abort(404);

    return View::make('pages.show', array('page' => $page));
});

// for controllers and views
Route::get('{page}', array('as' => 'pages.show', 'uses' => 'PageController@show')); 
```

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-13T13:35:03.820

您可以为作业使用路由通配符，您可以从一个开始`(:any)`，如果您需要多个 url 段添加一个可选的`(:all?)`，然后从 slug 中识别页面。

例如：

```
Route::get('(:any)', function($slug) {
    $page = Page::where_slug($slug)->first();

    if ( is_null($page) )
        return Event::first('404');

    return View::make('page')->with($page);
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-02-14T17:27:38.193

与查尔斯的回答非常相似，但在控制器中：

```
public function showBySlug($slug) {
    $post = Post::where('slug','=',$slug)->first();
    // would use app/posts/show.blade.php
    return View::make('posts.show')->with(array(  
        'post' => $post,
    ));
} 
```

然后你可以像这样路由它：

```
Route::get('post/{slug}', 'PostsController@showBySlug')
    ->where('slug', '[\-_A-Za-z]+');` 
```

...它还有一个额外的好处，就是让您可以轻松地直接链接到索引页面上的 slug 路线，例如：

```
@foreach ($posts as $post)
    <h2>{{ HTML::link(
        action('PostsController@showBySlug', array($post->slug)),
        $post->title
    )}}</h2>
@endforeach 
```

# asp.net - 不显示模式弹出窗口

> ID：13860164
> 
> 赞同：0
> 
> 时间：2012-12-13T12:46:29.317
> 
> 标签：asp.net, ajax

我正在使用 .net 2.0 和 ajax。我没有弹出。可能是什么问题。

代码

```
 <act:ToolkitScriptManager ID="Scriptmanager1" runat="server" ></act:ToolkitScriptManager>

    <asp:Panel ID="pnlOverlay" style="display:none;" runat="server" CssClass="modalPopup">
        Some informative message: Hello world!
    </asp:Panel>

    <asp:Button ID="MyButton" runat="server" Text="clk" OnClick="MyButton_Click" />
    <act:ModalPopupExtender runat="server" ID="mpe"
        PopupControlID="pnlOverlay"
        BackgroundCssClass="modalBackground"
        TargetControlID="MyButton"
        BehaviorID="mpeBehaviorID"></act:ModalPopupExtender>
</div> 
```

我在按钮单击中调用 mpe.show() 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:02:11.777

此代码可能对您有所帮助。试试这个..

.css

```
 .ModalPopupBG
            {
                background-color: #666699;
                filter: alpha(opacity=50);
                opacity: 0.7;
            }
  .HellowWorldPopup
        {
            /* min-width: 200px;*/
            min-height: 150px;
            background: white;
        } 
```

这是 .aspx 代码

```
 <asp:ModalPopupExtender id="ModalPopupExtender1" runat="server" 
        targetcontrolid="HiddenTargetControlForModalPopup" popupcontrolid="Panel1" drag="true" backgroundcssclass="ModalPopupBG">
    </asp:ModalPopupExtender>

    <asp:Button runat="server" ID="HiddenTargetControlForModalPopup" style="display:none" />

    <asp:Button ID="btnsubmit" runat="server" Text="Add product to list" onclick="btnsubmit_Click"/>

<asp:panel id="Panel1" style="display: block;width:550px;" runat="server">
    <div class="HellowWorldPopup">
      Some informative message: Hello world!
    </div>
        </asp:Panel> 
```

# javascript - 使用three.js 为粒子程序生成的纹理

> ID：13860166
> 
> 赞同：0
> 
> 时间：2012-12-13T12:46:34.697
> 
> 标签：javascript, three.js, procedural-generation

我的目标是创建一个粒子系统，其中涉及为每个粒子（顶点）程序生成的纹理，但我发现很难创建一个在 Canvas 和 WebGL 渲染器下使用 three.js 的粒子系统的原型

我要达到的标准：

1.  **独立于渲染器**（ParticleCanvasMaterial 不适用于 WebGL）
2.  **圆形纹理**（ParticleBasicMaterial 不喜欢画布纹理；无法使其输出圆形）
3.  **程序生成这些纹理**（不能只使用带有准备好的圆形纹理的 loadTexture ）

目前可以使用three.js吗？我错过了一些功能吗？

```
//create a texture generation function
function simpleTexture() {

    // generate canvas
    var canvas = document.createElement('canvas');
    canvas.width = 100;
    canvas.height = 100;

    // get context
    var context = canvas.getContext('2d');

    // circle texture
    context.beginPath();
    context.arc(50, 50, 50, 0, Math.PI*2, true); 
    context.closePath();
    context.fillStyle = "red";
    context.fill();

    // get texture
    texture = new THREE.Texture(
        canvas
    );

    texture.needsUpdate = true;
    return texture;

}

    //then use it like following...

    var material = new THREE.ParticleBasicMaterial({
        color: 0xffffff,
        size: 1,
        map: simpleTexture,
        blending: THREE.AdditiveBlending,
        transparent: true
    });

    var system = new THREE.ParticleSystem(particles, material); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T15:59:02.327

对于问题 1，您无能为力。使用`ParticleCanvasMaterial`for `CanvasRenderer`。

关于 2 和 3，您*可以*`ParticleBasicMaterial`使用和获得程序生成的纹理`WebGLRenderer`。这是一个具有圆形纹理和随机顶点颜色的：http: [//jsfiddle.net/7yDGy/1/](http://jsfiddle.net/7yDGy/1/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T16:10:20.050

为什么不加载图像？您可以随时调整其属性，而不是在周围推挤全新的像素块。

# .net-3.5 - cant open exe files on windows server 2012

> ID：13860168
> 
> 赞同：-1
> 
> 时间：2012-12-13T12:46:38.423
> 
> 标签：.net-3.5, windows-server-2012

I want to install .net 3.5 framework to windows server 2012\. I downloaded the installer and when I open the .exe file this window warns me:

![here](../Images/d6907222a41a32f4e160e248283e8f72.png)

How can I install .net framework to this machine?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T00:02:57.877

它几乎在消息中说明了这一点。在服务器版本上，不使用客户端 Windows 功能“应用程序”安装功能，而是使用服务器管理器。您在服务器管理器中使用“添加角色和功能”并在功能下选择 .net framework 3.5，或者您可以使用以下 powershell-command 安装：

```
Install-WindowsFeature Net-Framework-Core 
```

# r - POSIXct 时区如何在 R 中工作

> ID：13860170
> 
> 赞同：5
> 
> 时间：2012-12-13T12:46:47.257
> 
> 标签：r, timezone, posixct

我有一组标准的 unix 整数时间戳，全部采用 UTC（格林威治标准时间），我将它们输入到我希望绘制的 R 中。我一直在使用以下形式的代码：

`d$date_time <- as.POSIXct(d$date_time,origin="1970-01-01",tz="GMT")`

将我的标准 unix 时间戳 UTC 整数列转换为我假设的某种可绘制对象集。我可以绘制这个并且数据看起来大致不错，但我不知道我的所有数据是否都被我的计算机的本地时区或任何其他时区调整以任何方式偏移。这是因为我不明白当 a) 我调用`as.POSIXct()`和 b) 当我绘制数据时对数据进行了哪些调整（如果有的话）。所以这些是我的问题：

1.  当我`tz="GMT"`在上面指定时，这到底是在告诉计算机做什么？我看到了三种可能性：i）“您的数据采用 GMT 格式，您希望将其转换为本地时间”ii）“您的数据始终假定为本地时间，您希望将其转换为 GMT”iii）“您的数据始终是假定为格林威治标准时间，而您希望我将其留在格林威治标准时间，所以不要进行任何调整”。
2.  当我绘制数据（使用`xyplot`）时，绘图功能是否会对时间进行任何视觉调整？如果有，有哪些调整？

我认为如果有人可以解释内部数据结构如何存储时区信息以及这些数据结构如何通过各种命令进行转换，这将有助于理清思路。基本上，我想从一开始就使用 UTC，直到显示点，我可能希望对时区进行调整，尽管理想情况下是明确的，而不是计算机默默地为我决定。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T14:21:34.950

R 的日期和时间类非常强大，但需要一些时间来适应。TZ 调整特别棘手，但它们与特定于/从角色的*构造和转换相关。*

考虑以下示例，该示例将自身限制为数字输入。我们有很好的控制：

```
R> tt <- as.POSIXct(0, origin="1970-01-01")
R> str(tt)
 POSIXct[1:1], format: "1970-01-01"
R> tt
[1] "1970-01-01 CST"
R> 
R> tt <- as.POSIXct(600, origin="1970-01-01")
R> tt
[1] "1970-01-01 00:10:00 CST"
R> 
tt <- as.POSIXct(600, origin="1970-01-01", tz="UTC")
R> tt
[1] "1970-01-01 00:10:00 UTC"
R> 
R> as.numeric(tt)
[1] 600
R> 
```

您可以获得整个日期算术、转换`difftime()`等，并且仍然可以传递纯数值。还：

```
R> tt <- as.POSIXct(600, origin="1970-01-01", tz="UTC")
R> tt
[1] "1970-01-01 00:10:00 UTC"
R> tt2 <- tt + 1.234567
R> tt2
[1] "1970-01-01 00:10:01.234566 UTC"
R> 
```

您可以使用`attributes()`检查是否已设置 TZ：

```
R> attributes(tt)
$tzone
[1] "UTC"

$class
[1] "POSIXct" "POSIXt" 

R> 
```

因此，如果您对创建和转换非常小心，您确实可以拥有一个完整的工具包，围绕基于 UTC 的时间数据。

# interpolation - 在高度图上插入点

> ID：13860171
> 
> 赞同：2
> 
> 时间：2012-12-13T12:46:48.493
> 
> 标签：interpolation, geometry-surface

我在一个均匀分布的平面上有一些值（字节）（来自实际测量值），例如温度。我正在尝试生成整个表面。但我没有成功。

主要条件是不知道点的数量和位置，并且表面必须保持被测量点的值，并且中间的点将被插值。

理想情况下，如果只设置一个点，最终曲面应该是一座山。

顺便说一句，只是在它可能有帮助的情况下。我在 WPF (C#) 上对其进行编码，对于这么小的工作不涉及繁重的库或任何东西会很好

提前致谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T08:55:07.070

典型的方法是在域中构建样本集的[Delaunay 三角剖分（在您的情况下为矩形），然后使用找到的三角形作为曲面。](http://en.wikipedia.org/wiki/Delaunay_triangulation)

* * *

一般点集的德劳内三角剖分定义为外接圆不包含任何其他点的三角形集。

计算 Delaunay 三角剖分（选择所有三角形以查看是否有任何点在其外接圆内）的简单算法是`O(n^4)`.

[增量算法](http://en.wikipedia.org/wiki/Delaunay_triangulation#Incremental)在`O(n log n)`预期时间内运行：

*   生成三个点的三角剖分（在你的情况下，四个 - 房间的角落）。
*   对于每个点
    *   将其添加到三角剖分中。
    *   递归地对与新点相对的每条边
    *   如果边不是当前点集的 Delaunay 三角剖分的一部分，则翻转它。

分治算法也提供`O(n log n)`，但也提供`O(n log log n)`一些点集。

* * *

一旦你有了三角测量，你只需要通过一条垂直线与表面相交来找到测量值：

*   找到该点所在的三角形ABC。
*   将点坐标表示为`A + k(B-A) + l(C-A)`
*   然后将点值给出为`A.value + k(B.value-A.value) + l(C.value-A.value)`（将三角形视为 [domain x range] 空间中的平面。

# javascript - How to set onClick event in ASP Menu MenuItem

> ID：13860173
> 
> 赞同：0
> 
> 时间：2012-12-13T12:46:54.193
> 
> 标签：javascript, asp.net, menu, onclick, aspmenu

I have a dynamically generated menu (C#), like this:

```
MenuItem(string text, string value, string imageUrl, string navigateUrl, string target)

MenuItem AdminLevel1 = new MenuItem("Admin", "Admin");
MenuItem AdminPedidosRegisto = new MenuItem("Questions", "AdminQ");

NavigationMenu.Items.Add(new MenuItem("Messages Received", "AdminMessagesR", "", "./Admin/Messages.ascx", "ContainerIframe"));

AdminPedidosRegisto.ChildItems.Add(new MenuItem("Pending", "AdminPending", "", "./Admin/Pedidos.ascx", "ContainerIframe"));` 
```

Where `ContainerIframe` is the iframe's ID and `NavigationMenu` is the (asp:Menu)'s ID.

I want to set some JavaScript to be executed when I click a MenuItem.

Is there a way?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:55:55.417

尝试将以下代码放入 .aspx 页面的 head 标记中：

```
 <script type="text/javascript"> window.onload = function(){

    var menuTable = document.getElementById("<%=Menu1.ClientID%>");  //specify your menu id instead of Menu1 var menuLinks = menuTable.getElementsByTagName("a");
        for(i=0;i<menuLinks.length;i++)
        {
            menuLinks[i].onclick = function(){return confirm("u sure to postback?");}
        }
        setOnClickForNextLevelMenuItems(menuTable.nextSibling); } function setOnClickForNextLevelMenuItems(currentMenuItemsContainer){

        var id = currentMenuItemsContainer.id;
        var len = id.length;
        if(id != null && typeof(id) != "undefined" && id.substring(0,4) == "Menu" && id.substring(parseInt(len)-5,parseInt(len)) == "Items")
        {
            var subMenuLinks = currentMenuItemsContainer.getElementsByTagName("a");
            for(i=0;i<subMenuLinks.length;i++)
            {
                subMenuLinks[i].onclick = function(){return confirm("u sure to postback?");}
            }
            setOnClickForNextLevelMenuItems(currentMenuItemsContainer.nextSibling);
        } } </script> 
```

请注意，您无需在代码隐藏文件中编写任何代码即可使此解决方案正常工作。我已经在 IE7 & FF2.0 中测试过代码

希望对你有效。

干杯！！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:12:25.343

AdminLevel1.NavigateUrl = "javascript:callSomeFunction();";

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-14T10:46:16.387

感谢@Manibhadra（这对于父项和子项来说已经足够了）

```
window.onload = function ()
{
    var menuTable = document.getElementById("<%=NavigationMenu.ClientID%>");
    var menuLinks = menuTable.getElementsByTagName("a");
    for (i = 0; i < menuLinks.length; i++)
    {
        menuLinks[i].onclick = function () { setInnerHTML('ContainerTittle', this.innerHTML); }
    }
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-19T21:03:41.637

哈恩斯的回答似乎使所有项目都相同。

我使用以下内容：

1.  使菜单项不可选择，因此它不会回发
2.  在适当的地方添加以下代码：

`Page.ClientScript.RegisterStartupScript(typeof(Page), "123", string.Format("$('#MenuDiv').find('a').filter(':contains(\"{0}\")').css('cursor', 'pointer').click(function(){{ {1} }});", Title, Script), true);`

其中：
“123”是您的脚本的唯一键
MenuDiv 是您的菜单客户端 ID
Title 是您分配给菜单项的文本
Script 是您要运行的 javascript。

# jquery - proper way to write this timed jquery function

> ID：13860176
> 
> 赞同：1
> 
> 时间：2012-12-13T12:47:16.180
> 
> 标签：jquery, timer, settimeout, setinterval

I want this function to initiate every 4 seconds. is there a way of putting them in an array and call it every 4 seconds rather than this way. Also, this way has a delay of 16 seconds before it actually begins. Thanks in advance.

```
setInterval(function() {
     setTimeout(function () {
         $j('.menu2').trigger('click');
         }, 0000);

         setTimeout(function () {
         $j('.menu3').trigger('click');
          }, 4000);

         setTimeout(function () {
         $j('.menu4').trigger('click');
          }, 8000);

         setTimeout(function () {
         $j('.menu1').trigger('click');
          }, 12000);

}, 16000); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:52:17.957

~~试试这个~~

 ~~```
setInterval(function () {
        var time = 0;
        for (i = 1; i < 5; i++) {
            setTimeout(function () {
                $j('.menu' + i).trigger('click');
            }, time);
            time += 4000;
        }
    }, 16000); 
```~~ 

~~**更新**~~

 ~~[http://jsfiddle.net/6NwLG/1/](http://jsfiddle.net/6NwLG/1/)

```
setInterval(function () {
        var time = 0;
        for (i = 1; i < 5; i++) {

            test(time, i);
            time += 4000;
        }
        function test(time, id) {
            setTimeout(function () {
                $('.menu' + id).click();
            }, time);
        }
    }, 16000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:08:46.507

```
$(document).delay(12000, function() {
    var interval = setInterval( function() {
       time = 2000;
       m = 1;
        for( i =0; i < 5; i++) {
       setTimeout( function() {
           $('.menu'+m).trigger('click');
           time = time+2000;
           m = m+1;
       }, time);
    }
    }, 4000);
}); 
```

​</p>~~

# c# - Boolean members having true value by default in .NET remoting

> ID：13860177
> 
> 赞同：0
> 
> 时间：2012-12-13T12:47:22.543
> 
> 标签：c#, .net, remoting, marshalbyrefobject

I am using .NET Remoting. I have a class which has some pubilc boolean members and set them to false at the time of declaration itself. This class inherits from MarshalByRefObject class.

When I access this class object in the client app, all these boolean members are true. How is this happening ?

# objective-c - 如何使用objective-c将文件上传到box-api？

> ID：13860179
> 
> 赞同：0
> 
> 时间：2012-12-13T12:47:25.573
> 
> 标签：objective-c, box-api

我使用 AFNetworking 进行网络操作

那么向[https://api.box.com/2.0/files/content](https://api.box.com/2.0/files/content)发送请求的正确方法是什么？现在我收到 HTTP//1.1 500 Internal Server Error

**代码**

```
NSMutableData *body = [NSMutableData data];
NSString *boundaryString = [NSString stringWithFormat:@"rn-------------------------%.0frn", [[NSDate date] timeIntervalSince1970]];
NSData *boundary = [boundaryString dataUsingEncoding:NSUTF8StringEncoding];

NSURL *url = [NSURL URLWithString:kBoxNetFileUploadURLFormat];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];
[BoxNet attachAuthHeaderForRequest:request];

[request addValue:[BoxNet SHA1:content] forHTTPHeaderField:@"Content-MD5"];
[request addValue:[NSString stringWithFormat:@"multipart/form-data; boundary=\"%@\"", boundaryString] forHTTPHeaderField:@"Content-Type"];

[body appendData:boundary];

[body appendData:[@"Content-Disposition: form-data; name=\folder_id\"" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[folderID dataUsingEncoding:NSUTF8StringEncoding]];

[body appendData:boundary];

[body appendData:[[NSString stringWithFormat:@"Content-Disposition: form-data; filename=\"%@\"; name=\"filename\"", filename] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Type: application/octet-stream" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:content];

[body appendData:boundary];

[request setHTTPBody:body];
[request setValue:[NSString stringWithFormat:@"%d", body.length] forHTTPHeaderField:@"Content-Length"];

AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {
    completion(JSON, nil);
} failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *err, id JSON) {
    completion(JSON, err);
}];

[operation start]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T12:21:30.953

问题是`Wrong boundary & parameters formatting`，请求处理是一样的。

附上新代码：

```
NSMutableData *body = [NSMutableData data];
NSString *boundary = [NSString stringWithFormat:@"%.0f", [[NSDate date] timeIntervalSince1970]];

NSURL *url = [NSURL URLWithString:@"https://api.box.com/2.0/files/content"];
NSMutableURLRequest *request = [NSMutableURLRequest requestWithURL:url];
[request setHTTPMethod:@"POST"];
[BoxNet attachAuthHeaderForRequest:request];

[request addValue:[BoxNet SHA1:content] forHTTPHeaderField:@"Content-MD5"];
[request addValue:[NSString stringWithFormat:@"multipart/form-data; boundary=%@", boundary] forHTTPHeaderField:@"Content-Type"];

// add file body and filename
[body appendData:[[NSString stringWithFormat:@"--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[[NSString stringWithFormat:@"Content-Disposition:form-data;filename=\"%@\";name=\"filename\"\r\n", filename] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Type:application/octet-stream\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:content];

// folder id
[body appendData:[[NSString stringWithFormat:@"\r\n--%@\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[@"Content-Disposition:form-data;name=\"folder_id\"\r\n\r\n" dataUsingEncoding:NSUTF8StringEncoding]];
[body appendData:[folderID dataUsingEncoding:NSASCIIStringEncoding]];

[body appendData:[[NSString stringWithFormat:@"\r\n--%@--\r\n", boundary] dataUsingEncoding:NSUTF8StringEncoding]];

[request setHTTPBody:body]; 
```

由于这篇文章，我已经解决了我的问题：[Objective-C Box 2.0 File Upload - Problems](https://stackoverflow.com/questions/11564069/objective-c-box-2-0-file-upload-problems/ "Objective-C Box 2.0 文件上传 - 问题")

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:58:31.680

我个人更喜欢 ASIHTTPRequest 用于上传文件和 POST 表单数据，它对用户来说非常东方，这里是[代码示例。](https://stackoverflow.com/questions/9229646/asihttprequest-upload-file)

# html - 在 IE7-9 中聚焦或悬停时复选框和单选按钮变为白色

> ID：13860190
> 
> 赞同：0
> 
> 时间：2012-12-13T12:48:11.327
> 
> 标签：html, checkbox, internet-explorer-8, internet-explorer-7, internet-explorer-9

出于某种奇怪的原因，IE7-9 在聚焦或悬停时将复选框和单选按钮设为白色。不幸的是，我正在处理的网站只存在于本地并且相当新（不到一年），但我设法找到[了另一个出现同样问题的网站](http://www.cs.tut.fi/~jkorpela/forms/kbd.html)。

当我转到该页面并将鼠标悬停在复选框上时，灰色背景变为白色。但是，在大多数带有复选框和/或单选按钮的网站上，我得到了所需的“正常”行为：蓝色调。对于单选按钮，选定的单选按钮变为带有白色背景的黑点，而不是标准的蓝点和灰色背景。

有谁知道为什么会发生这种情况以及我该如何解决？

我尝试禁用所有 CSS 和 JavaScript 文件，但问题仍然存在。

提前，谢谢！:-)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:15:15.967

这是一个已知的错误/功能 - 每当在 CSS 中设置非透明背景时，IE7-9 中的复选框和单选背景都会流血。在您链接到的页面中，`input:hover`背景设置为`#ffd`basic.css 第 93 行。

这已被报告为各种项目中的错误，例如[Twitter Bootstrap Issue 3181](https://github.com/twitter/bootstrap/issues/3181)或[此处](http://dev.vaadin.com/ticket/4148)。

解决方案是将背景设置为透明：

```
.radio input[type="radio"], .checkbox input[type="checkbox"]{
   background-color:transparent;
} 
```

您还需要从`:hover`状态中删除背景声明。

# jquery - 调整引导 div 的大小以适应内容

> ID：13860191
> 
> 赞同：7
> 
> 时间：2012-12-13T12:48:11.387
> 
> 标签：jquery, css, twitter-bootstrap, jquery-isotope

我正在使用 twitter bootstrap 将 2 个 div 并排放置。每个 div 里面都有中大图像，使用 jquery **isotope**排列。问题是当一个 div 中没有足够的图像时，div 的宽度保持不变并且还有很多额外的空间。像这样 ： ![在此处输入图像描述](../Images/d62503158262813af915401715bdfb83.png)

我希望 div 居中对齐并减小宽度以适应其中的图像。像这样： ![在此处输入图像描述](../Images/2ad6bcdbe3003ba6e8fca2973d8dbad1.png)

我的 HTML 代码是这样的：

```
<div id="container" class="container-fluid">
    <div class="row-fluid">
        <div class="legend span8">Section1</div>
        <div class="legend span4">Section2</div>
    </div>
    <div class="row-fluid">
        <div id="section1" class="span8">
            <div class="small"><img src="images/1.jpg" /></div>
            <div class="small"><img src="images/2.jpg" /></div>
            <div class="big"><img src="images/3.jpg" /></div>
        </div>
        <div id="section2" class="span4">
            <div class="small"><img src="images/1.jpg" /></div>
            <div class="small"><img src="images/2.jpg" /></div>
            <div class="big"><img src="images/3.jpg" /></div>
        </div>
    </div>
</div> 
```

我的 CSS 看起来像这样：

```
#section1 .small{
    width:150px;
    height:200px;
    overflow:hidden;
}
#section1 .big{
    width:320px;
    height:420px;
    overflow:hidden;
}
#section2 .small{
    width:80px;
    height:100px;
    overflow:hidden;
}
#section2 .big{
    width:170px;
    height:220px;
    overflow:hidden;
} 
```

其他样式是引导的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:55:47.743

我也将[**bootstrap**](http://twitter.github.com/bootstrap/)与[**isotope**](http://isotope.metafizzy.co/)一起使用，但我首先要做的是确保`width`' 和`height`' 尊重我自己的设计。

只需更改您使用的那些，通常我最终会使用

`.width2`, `.width3`,和, `.width4`_`.width8``.height2``.height4`

然后，确保您`container`的尺寸正确并适用于同位素。

之后，您的所有设计都将根据您的尺寸正确设置和落下。

顺便说一句，你最终应该得到这样的东西：

```
<div id="container">
    <div class="weather item width2 height8" data-id="1"></div>
    <div class="country item width2 height4" data-id="2"></div>
    <div class="country item width2 height4" data-id="3"></div>
    <div class="country item width2 height4" data-id="4"></div>
    <div class="country item width2 height4" data-id="5"></div>
</div> 
```

在每个 div 中，我个人使用[**JsRender**](https://github.com/BorisMoore/jsrender)来渲染模板，但是你应该有引导布局，在每个`.item`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-02T10:19:09.547

我完全忘记了我问过的这个问题。我通过以下方式解决了上述情况：

1) 在 main 上设置相等的左右边距`container`。

2）将Section1中的同位素设置为[从右到左](http://isotope.metafizzy.co/tests/right-to-left.html)。我的网站并不是真正的阿拉伯语网站，但我主要使用图片，所以没有问题。

此外，删除所有部分的固定宽度规范。让容器上的边距和引导程序的流体设计负责中心优化设计。

# java - Java中的“内部地址”是什么？

> ID：13860194
> 
> 赞同：24
> 
> 时间：2012-12-13T12:48:23.597
> 
> 标签：java, memory, hashcode, unsafe, low-level

在[Object.hashCode()](http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html#hashCode%28%29)的 Javadoc 中，它指出

> 在合理可行的情况下，类定义的 hashCode 方法`Object`确实为不同的对象返回不同的整数。（这通常通过将对象的**内部地址**转换为整数来实现，但 Java™ 编程语言不需要这种实现技术。）

这是一个常见的误解，这与内存地址有关，但它不会在没有通知的情况下更改，并且 hashCode() 不会也不能更改对象。

@Neet 提供了一个很好的答案链接[https://stackoverflow.com/a/565416/57695](https://stackoverflow.com/a/565416/57695)但我正在寻找更多细节。

* * *

这是一个例子来说明我的担忧

```
Field theUnsafe = Unsafe.class.getDeclaredField("theUnsafe");
theUnsafe.setAccessible(true);
Unsafe unsafe = (Unsafe) theUnsafe.get(null);

for (int t = 0; t < 10; t++) {
    System.gc();
    Object[] objects = new Object[10];
    for (int i = 0; i < objects.length; i++)
        objects[i] = new Object();

    for (int i = 0; i < objects.length; i++) {
        if (i > 0) System.out.print(", ");
        int location = unsafe.getInt(objects, Unsafe.ARRAY_OBJECT_BASE_OFFSET + Unsafe.ARRAY_OBJECT_INDEX_SCALE * i);
        System.out.printf("%08x: hc= %08x", location, objects[i].hashCode());
    }
    System.out.println();
} 
```

印刷

```
eac00038: hc= 4f47e0ba, eac00048: hc= 2342d884, eac00058: hc= 7994d431, eac00068: hc= 19f71b53, eac00078: hc= 2e22f376, eac00088: hc= 789ddfa3, eac00098: hc= 44c58432, eac000a8: hc= 036a11e4, eac000b8: hc= 28bc917c, eac000c8: hc= 73f378c8
eac00038: hc= 30813486, eac00048: hc= 729f624a, eac00058: hc= 3dee2310, eac00068: hc= 5d400f33, eac00078: hc= 18a60d19, eac00088: hc= 3da5f0f3, eac00098: hc= 596e0123, eac000a8: hc= 450cceb3, eac000b8: hc= 4bd66d2f, eac000c8: hc= 6a9a4f8e
eac00038: hc= 711dc088, eac00048: hc= 584b5abc, eac00058: hc= 3b3219ed, eac00068: hc= 564434f7, eac00078: hc= 17f17060, eac00088: hc= 6c08bae7, eac00098: hc= 3126cb1a, eac000a8: hc= 69e0312b, eac000b8: hc= 7dbc345a, eac000c8: hc= 4f114133
eac00038: hc= 50c8c3b8, eac00048: hc= 2ca98e77, eac00058: hc= 2fc83d89, eac00068: hc= 034005e1, eac00078: hc= 6041f871, eac00088: hc= 0b1df416, eac00098: hc= 5b83d60d, eac000a8: hc= 2c5a1e6b, eac000b8: hc= 5083198c, eac000c8: hc= 4f025f9f
eac00038: hc= 00c5eb8a, eac00048: hc= 41eab16b, eac00058: hc= 1726099c, eac00068: hc= 4240eca3, eac00078: hc= 346fe350, eac00088: hc= 1db4b415, eac00098: hc= 429addef, eac000a8: hc= 45609812, eac000b8: hc= 489fe953, eac000c8: hc= 7a8f6d64
eac00038: hc= 7e628e42, eac00048: hc= 7869cfe0, eac00058: hc= 6aceb8e2, eac00068: hc= 29cc3436, eac00078: hc= 1d77daaa, eac00088: hc= 27b4de03, eac00098: hc= 535bab52, eac000a8: hc= 274cbf3f, eac000b8: hc= 1f9fd541, eac000c8: hc= 3669ae9f
eac00038: hc= 772a3766, eac00048: hc= 749b46a8, eac00058: hc= 7e3bfb66, eac00068: hc= 13f62649, eac00078: hc= 054b8cdc, eac00088: hc= 230cc23b, eac00098: hc= 1aa3c177, eac000a8: hc= 74f2794a, eac000b8: hc= 5af92541, eac000c8: hc= 1afcfd10
eac00038: hc= 396e1dd8, eac00048: hc= 6c696d5c, eac00058: hc= 7d8aea9e, eac00068: hc= 2b316b76, eac00078: hc= 39862621, eac00088: hc= 16315e08, eac00098: hc= 03146a9a, eac000a8: hc= 3162a60a, eac000b8: hc= 4382f3da, eac000c8: hc= 4a578fd6
eac00038: hc= 225765b0, eac00048: hc= 17d5176d, eac00058: hc= 26f50154, eac00068: hc= 1f2a45c7, eac00078: hc= 104b1bcd, eac00088: hc= 330e3816, eac00098: hc= 6a844689, eac000a8: hc= 12330301, eac000b8: hc= 530a3ffc, eac000c8: hc= 45eee3fb
eac00038: hc= 3f9432e0, eac00048: hc= 1a9830bc, eac00058: hc= 7da79447, eac00068: hc= 04f801c4, eac00078: hc= 363bed68, eac00088: hc= 185f62a9, eac00098: hc= 1e4651bf, eac000a8: hc= 1aa0e220, eac000b8: hc= 385db088, eac000c8: hc= 0ef0cda1 
```

* * *

作为旁注；如果你看这段代码

```
if (value == 0) value = 0xBAD ; 
```

看起来 0xBAD 的可能性是任何 hashCode 的两倍，因为 0 映射到该值。如果你运行足够长的时间，你会看到

```
long count = 0, countBAD = 0;
while (true) {
    for (int i = 0; i < 200000000; i++) {
        int hc = new Object().hashCode();
        if (hc == 0xBAD)
            countBAD++;
        count++;
    }
    System.out.println("0xBAD ratio is " + (double) (countBAD << 32) / count + " times expected.");
} 
```

印刷

```
0xBAD ratio is 2.0183116992481205 times expected. 
```

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2012-12-13T13:05:59.213

这显然是特定于实现的。

下面我包括`Object.hashCode()`OpenJDK 7 中使用的实现。

该函数支持六种不同的计算方法，其中只有两种注意到对象的地址（“地址”是 C++[`oop`](http://docs.oracle.com/javase/7/docs/technotes/guides/vm/performance-enhancements-7.html#compressedOop)转换为`intptr_t`）。这两种方法中的一种按原样使用地址，而另一种则进行一些操作，然后将结果与不经常更新的随机数混合。

其余方法中，一种返回常量（可能用于测试），一种返回序列号，其余的基于伪随机序列。

似乎可以在运行时选择该方法，并且默认似乎是方法 0，即`os::random()`. 后者是一个[线性同余生成器](http://en.wikipedia.org/wiki/Linear_congruential_generator)，其中包含所谓的竞争条件。:-) 竞争条件是可以接受的，因为在最坏的情况下它会导致两个对象共享相同的哈希码；这不会破坏任何不变量。

第一次需要哈希码时执行计算。为了保持一致性，结果随后存储在对象的标头中，并在后续调用时返回`hashCode()`。缓存在此函数之外完成。

**总而言之，`Object.hashCode()`基于对象地址的概念在很大程度上是一种历史产物，已被现代垃圾收集器的特性所淘汰。**

```
// hotspot/src/share/vm/runtime/synchronizer.hpp

// hashCode() generation :
//
// Possibilities:
// * MD5Digest of {obj,stwRandom}
// * CRC32 of {obj,stwRandom} or any linear-feedback shift register function.
// * A DES- or AES-style SBox[] mechanism
// * One of the Phi-based schemes, such as:
//   2654435761 = 2^32 * Phi (golden ratio)
//   HashCodeValue = ((uintptr_t(obj) >> 3) * 2654435761) ^ GVars.stwRandom ;
// * A variation of Marsaglia's shift-xor RNG scheme.
// * (obj ^ stwRandom) is appealing, but can result
//   in undesirable regularity in the hashCode values of adjacent objects
//   (objects allocated back-to-back, in particular).  This could potentially
//   result in hashtable collisions and reduced hashtable efficiency.
//   There are simple ways to "diffuse" the middle address bits over the
//   generated hashCode values:
//

static inline intptr_t get_next_hash(Thread * Self, oop obj) {
  intptr_t value = 0 ;
  if (hashCode == 0) {
     // This form uses an unguarded global Park-Miller RNG,
     // so it's possible for two threads to race and generate the same RNG.
     // On MP system we'll have lots of RW access to a global, so the
     // mechanism induces lots of coherency traffic.
     value = os::random() ;
  } else
  if (hashCode == 1) {
     // This variation has the property of being stable (idempotent)
     // between STW operations.  This can be useful in some of the 1-0
     // synchronization schemes.
     intptr_t addrBits = intptr_t(obj) >> 3 ;
     value = addrBits ^ (addrBits >> 5) ^ GVars.stwRandom ;
  } else
  if (hashCode == 2) {
     value = 1 ;            // for sensitivity testing
  } else
  if (hashCode == 3) {
     value = ++GVars.hcSequence ;
  } else
  if (hashCode == 4) {
     value = intptr_t(obj) ;
  } else {
     // Marsaglia's xor-shift scheme with thread-specific state
     // This is probably the best overall implementation -- we'll
     // likely make this the default in future releases.
     unsigned t = Self->_hashStateX ;
     t ^= (t << 11) ;
     Self->_hashStateX = Self->_hashStateY ;
     Self->_hashStateY = Self->_hashStateZ ;
     Self->_hashStateZ = Self->_hashStateW ;
     unsigned v = Self->_hashStateW ;
     v = (v ^ (v >> 19)) ^ (t ^ (t >> 8)) ;
     Self->_hashStateW = v ;
     value = v ;
  }

  value &= markOopDesc::hash_mask;
  if (value == 0) value = 0xBAD ;
  assert (value != markOopDesc::no_hash, "invariant") ;
  TEVENT (hashCode: GENERATE) ;
  return value;
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T12:52:35.383

它通常**是**对象的内存地址。但是，第一次在`hashcode`对象上调用该方法时，整数存储在该对象的标头中，以便下一次调用将返回相同的值（如您所说，压缩垃圾收集可以更改地址）。据我所知，这就是它在 Oracle JVM 中的实现方式。

编辑：深入研究 JVM 源代码，这就是显示的内容（synchronizer.cpp）：

```
// hashCode() generation :
//
// Possibilities:
// * MD5Digest of {obj,stwRandom}
// * CRC32 of {obj,stwRandom} or any linear-feedback shift register function.
// * A DES- or AES-style SBox[] mechanism
// * One of the Phi-based schemes, such as:
//   2654435761 = 2^32 * Phi (golden ratio)
//   HashCodeValue = ((uintptr_t(obj) >> 3) * 2654435761) ^ GVars.stwRandom ;
// * A variation of Marsaglia's shift-xor RNG scheme.
// * (obj ^ stwRandom) is appealing, but can result
//   in undesirable regularity in the hashCode values of adjacent objects
//   (objects allocated back-to-back, in particular).  This could potentially
//   result in hashtable collisions and reduced hashtable efficiency.
//   There are simple ways to "diffuse" the middle address bits over the
//   generated hashCode values:
//

static inline intptr_t get_next_hash(Thread * Self, oop obj) {
  intptr_t value = 0 ;
  if (hashCode == 0) {
     // This form uses an unguarded global Park-Miller RNG,
     // so it's possible for two threads to race and generate the same RNG.
     // On MP system we'll have lots of RW access to a global, so the
     // mechanism induces lots of coherency traffic.
     value = os::random() ;
  } else
  if (hashCode == 1) {
     // This variation has the property of being stable (idempotent)
     // between STW operations.  This can be useful in some of the 1-0
     // synchronization schemes.
     intptr_t addrBits = intptr_t(obj) >> 3 ;
     value = addrBits ^ (addrBits >> 5) ^ GVars.stwRandom ;
  } else
  if (hashCode == 2) {
     value = 1 ;            // for sensitivity testing
  } else
  if (hashCode == 3) {
     value = ++GVars.hcSequence ;
  } else
  if (hashCode == 4) {
     value = intptr_t(obj) ;
  } else {
     // Marsaglia's xor-shift scheme with thread-specific state
     // This is probably the best overall implementation -- we'll
     // likely make this the default in future releases.
     unsigned t = Self->_hashStateX ;
     t ^= (t << 11) ;
     Self->_hashStateX = Self->_hashStateY ;
     Self->_hashStateY = Self->_hashStateZ ;
     Self->_hashStateZ = Self->_hashStateW ;
     unsigned v = Self->_hashStateW ;
     v = (v ^ (v >> 19)) ^ (t ^ (t >> 8)) ;
     Self->_hashStateW = v ;
     value = v ;
  }

  value &= markOopDesc::hash_mask;
  if (value == 0) value = 0xBAD ;
  assert (value != markOopDesc::no_hash, "invariant") ;
  TEVENT (hashCode: GENERATE) ;
  return value;
} 
```

所以在Oracle JVM中有6种不同的方法，其中一种相当于我说的……值通过方法调用存储在对象的头中`get_next_hash`（那个被调用`FastHashCode`并从native版本调用）的`Object.hashCode()`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T13:16:25.667

恕我直言，虽然依赖于实现，但 JVM 中的对象引用永远不是实际的内存地址，而是指向实际地址的内部 JVM 引用。这些内部引用最初是根据内存地址生成的，但它们仍然与对象相关联，直到它被丢弃。

我这样说是因为 Java HotSpot GC 正在复制某种形式的收集器，并且它们通过遍历并将它们从一个堆复制到另一个堆来工作，随后`live objects`销毁。`old heap`所以当 GC 发生时，JVM 不必更新所有对象中的引用，而只是改变映射到内部引用的实际内存地址。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T15:44:12.597

Javadoc 对 Object.hashCode() 的建议是，它是通过从内存地址派生哈希码来实现的，这已经过时了。

可能没有人打扰（或注意到）复制垃圾收集器不再可能实现此实现路径（因为当对象被复制到另一个内存位置时它会*更改哈希码）。*

在复制垃圾收集器出现*之前*以这种方式实现哈希码是很有意义的，因为它可以节省堆空间。今天，非复制 GC (CMS) 可能仍以这种方式实现哈希码。

# javascript - 射线相交在球体中不起作用

> ID：13860196
> 
> 赞同：1
> 
> 时间：2012-12-13T12:48:27.077
> 
> 标签：javascript, three.js, html5-canvas, webgl, raytracing

当我忽略球体形式 scene.add() 相交工作时创建了球体和平面几何图形，但是

这是代码.. [http://jsfiddle.net/praveenv29/PZeY4/](http://jsfiddle.net/praveenv29/PZeY4/)

```
for ( var i = 0; i<10; i ++ ) 
        {
    var gloom = new THREE.ImageUtils.loadTexture('../map_pin.png' );
materialr = new THREE.MeshLambertMaterial( { color:Math.random() * 0xffffff ,side: THREE.DoubleSide} )
    var geometry = new THREE.PlaneGeometry(10,15,2, 2);
    var object = new THREE.Mesh(geometry, materialr);   
                object.position.x = Math.random() * 2 - 1;
                object.position.y = Math.random() * 2 - 1;
                object.position.z = Math.random() * 2 - 1;

                object.position.normalize();
                object.position.multiplyScalar(125 );    

    scene.add( object );
    } 
```

并且一旦添加球体场景相交不起作用（[http://jsfiddle.net/praveenv29/PZeY4/1/](http://jsfiddle.net/praveenv29/PZeY4/1/)）

```
var texture = THREE.ImageUtils.loadTexture('../world.jpg'); 
materials = new THREE.MeshBasicMaterial( {color:0x000000, wireframe:true}); 

var cone = new THREE.SphereGeometry(120,25,25);

var coneMesh = new THREE.Mesh(cone,materials);

coneMesh.position.y =0;
coneMesh.rotation.set(0,0,0);   
scene.add( coneMesh ); 
```

在几何合并中尝试过可能缺少某些属性？？？？

# google-chrome - 在 Windows 上运行自定义 Chrome 开发者工具前端

> ID：13860199
> 
> 赞同：0
> 
> 时间：2012-12-13T12:48:37.030
> 
> 标签：google-chrome, webkit, google-chrome-devtools, chromium, web-inspector

我`chrome-linux.zip`从[这里](http://commondatastorage.googleapis.com/chromium-browser-continuous/index.html)下载，使用 devtools 源代码 ( `chrome-linux/resources/inspector`) 并使用 `google-chrome --debug-devtools-frontend="/some/path/to/inspector/"`. 之后我决定在 Windows 上运行它，但我不知道该怎么做。运行 chrome with`--debug-devtools-frontend="E:\Users\xxx\Desktop\inspector\"`似乎不起作用（Chrome 正常运行，没有任何变化）。我发现我可能应该下载`chrome-win32.zip`并在这个版本的检查器上应用我的更改，但是没有`chrome-win32/resources/inspector`文件夹，只是`resources.pak`我不知道如何处理。有任何想法吗？

# java - 如何使用 httpClient 4 获取上传进度？

> ID：13860200
> 
> 赞同：1
> 
> 时间：2012-12-13T12:48:45.480
> 
> 标签：java, apache-httpclient-4.x

这里是下载功能，我可以使用监听器来获取下载进度，如何像下载功能一样获取上传进度。谢谢！

```
public void doGetToFile(String url, String localFilePath,CloudStatusListener listener) throws RestHttpException, HttpException {
    final HttpGet request = new HttpGet(url);
    final HttpResponse resp;
    try {
        DefaultHttpClient httpClient = new DefaultHttpClient();

        BasicCredentialsProvider creds= new BasicCredentialsProvider();
        creds.setCredentials(new AuthScope(CloudClient.CLOUDHOST,CloudClient.CLOUDPORT),new UsernamePasswordCredentials(UserName,Password));
        httpClient.setCredentialsProvider(creds);

        resp = httpClient.execute(request);
        long totalnum=resp.getEntity().getContentLength();
        if (resp.getStatusLine().getStatusCode() == HttpStatus.SC_OK) {
            FileOutputStream out = new FileOutputStream(localFilePath);

            InputStream inputStream=resp.getEntity().getContent();

            long bytesRead=0;
            int bufferSize=listener.progressInterval();
            byte b[]=new byte[bufferSize];

            int cnt=0;
            while((cnt=inputStream.read(b))!=-1)
            {
                out.write(b,0,cnt);
                bytesRead+=cnt;
                listener.onProgress(bytesRead, totalnum);
            }
            out.flush();
            out.close();

            //resp.getEntity().writeTo(out);

            out.close();
            return;
        } else {
            final String response = EntityUtils.toString(resp.getEntity());
            throw new RestHttpException(resp.getStatusLine().getStatusCode(), response);
        }
    } catch (final IOException e) {
        e.printStackTrace();
        throw new HttpException("IOException " + e.toString());
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T07:37:24.347

我已经解决了这个问题，你可以这样做：

```
class FileBodyCounter extends FileBody {
    private volatile long byteCount;
    private volatile CloudStatusListener listener;
    private volatile long totalnum;

    public FileBodyCounter(File file,CloudStatusListener listener,long totalnum) {
        super(file);
        this.listener=listener;
        this.totalnum=totalnum;
    }

    public long getBytesWritten() {
        return byteCount;
    }

    @Override
    public void writeTo(OutputStream out) throws IOException {
        super.writeTo(new FilterOutputStream(out) {
            //
            // Other write() methods omitted for brevity. 
            // Implement for better performance
            public void write(int b) throws IOException {
                 byteCount++;
                 super.write(b);
                 if (byteCount % listener.progressInterval() == 0 ||
                    byteCount == totalnum){
                    listener.onProgress(byteCount,totalnum);
                }
            }
        });
    }

} 
```

post函数是这样的：

```
public String doPostMultipart(String url, 
                                String filePath, 
                                List<NameValuePair> params,
                                CloudStatusListener listener
                                ) 
                                throws RestHttpException, 
                                        HttpException, 
                                        IOException {

    if (params == null) params = EMPTY_PARAMS;

    HttpPost request = new HttpPost(url);

    MultipartEntity reqEntity = new MultipartEntity();
    if (filePath != null && !filePath.isEmpty()) {
        FileBody bin = new FileBodyCounter(
                                    new File(filePath),
                                    listener,
                                    new FileInputStream(
                                        new File(filePath)
                                        ).available());
        reqEntity.addPart("fileUpload", bin);
    }

    for (NameValuePair kv : params) {
        multipartAddKV(reqEntity, kv.getName(), kv.getValue());
    }

    request.setEntity(reqEntity);

    return execute(request);
} 
```

# php - 我需要的工具来证明通过 https 发送的数据是加密的

> ID：13860202
> 
> 赞同：1
> 
> 时间：2012-12-13T12:48:50.247
> 
> 标签：php, ssl, https

我想演示使用简单的 html 表单和 php 脚本来加密发布到服务器的数据。我正在使用 xampp，我想使用 xampp 包附带的默认证书。

我安装了wireshark，我还安装了firebug以供将来测试，因为我还想查看GET请求是否已加密。

我的任务需要什么工具？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:51:30.143

Wireshark 是您唯一需要的工具。

只需配置一个过滤器来捕获在端口 443 上发送到您的 Web 服务器的数据包，然后向下钻取它们。

首先发布没有 HTTPS 的表单（端口 80），然后比较两者。

请注意，您无法从 PHP 证明数据是加密发送的，因为这是由 Web 服务器独立于 PHP 处理的。

# jquery - 我如何知道特定元素的位置

> ID：13860203
> 
> 赞同：0
> 
> 时间：2012-12-13T12:48:52.823
> 
> 标签：jquery

我有以下`HTML`

**HTML**

```
<ul id="sortable" class="ui-sortable">
    <li id="369833" class="ui-state-default">
    <li id="372915" class="ui-state-default">
    <li id="276520" class="ui-state-default" style="">
    <li id="373229" class="ui-state-default">
    <li id="373231" class="ui-state-default">
    <li id="373253" class="ui-state-default">
</ul> 
```

我可以对我的`<li>`元素进行排序，但我需要知道我排序的特定元素的位置`<li>`。

**示例**

如果我放入我的控制台`$("#sortable").find("li").size()`，我会返回我的数字`<li>`，`<ul>`在这种情况下为 6。但是我怎么能知道一个特定的位置，`<li>`比如373231，这个`<li>`在我的里面的什么位置？我想要的回报是数字 5，因为他是我的第五个元素`id``<li>``<ul>``<li>``<ul>`

**更新**

我的功能

```
$(function () {
    $("#sortable").sortable({
        stop: function (event, ui) {
            debugger;

            // Getting a WRONG Position
            alert($(this).index());
        }
    });

    $("#sortable").on("sortstop", function (event, ui) {       

        // Getting a WRONG Position                         
        alert($(this).index());
    });

    $("#sortable").disableSelection();
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:50:08.553

您可以使用**[index()](http://api.jquery.com/index/)**，它是从零开始的，因此您将`0`获得`first`元素等`1`。`second`

**[现场演示](http://jsfiddle.net/8wRyb/)**

```
$('#373231').index() 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T12:55:23.603

jquery [index()](http://api.jquery.com/index/)是你在这里需要的..

```
$(selector).index(). 
```

在你的情况下

```
$('#369833').index(). //will give u 0
$('#372915').index(). //will give u 1 
```

**已编辑**

取索引`ui.item`

```
alert(ui.item.index()); 
```

她是[小提琴](http://jsfiddle.net/mgsPu/)

# matlab - 如何在差异图片matlab上绘制图形

> ID：13860208
> 
> 赞同：0
> 
> 时间：2012-12-13T12:49:26.947
> 
> 标签：matlab, visualization

我有一个 matlab 程序，我需要在 2 个单独的数字中显示 2 个不同的图片。

我目前的尝试：

```
fig = figure;
for i = 1:n
   ...// calc matrix A
   ...// calc matrix B
   imagesc(A);
   imagesc(B);
end 
```

此代码在同一个图上显示两个图像，但我需要在图 1 上显示`imagesc(A)`（并在每次迭代时更改它），并`imagesc(B)`在图 2 上显示（并在每次迭代时更改它）。

这可能吗？如果是这样，怎么办？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T15:27:57.640

在 Matlab 中，a`figure`对应于一个单独的窗口。所以有两个数字将创建两个窗口。这是你想要的还是你想要在同一个窗口中的两个图？

如果您想要两个单独`figure`的窗口，请尝试以下操作：

```
% create the 1st figure
fig1 = figure; 
% create an axes in Figure1
ax1 = axes('Parent', fig1);

% create the 2nd figure
fig2 = figure; 
 % create an axes in Figure2
ax2 = axes('Parent', fig2);

for i = 1:n
   ...// calc matrix A
   ...// calc matrix B
   % draw A in ax1 
   imagesc(A, 'Parent', ax1); 
   % draw B in ax2
   imagesc(B, 'Parent', ax2); 

   % pause the loop so the images can be inspected
   pause;
end 
```

如果您想要一个窗口但有两个图表，您可以将循环之前的代码替换为：

```
%create the figure window
fig = Figure;

% create 2 side by side plots in the same window
ax(1) = subplot(211);
ax(2) = subplot(212);

% Insert loop code here 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:12:01.717

您可以使用 figure() 函数在 matlab 将绘制图形/图像的图形窗口之间切换：

```
 for i = 1:n
       ...// calc matrix A
       ...// calc matrix B

       figure(1);
       imagesc(A);

       figure(2);
       imagesc(B);

    end 
```

# .net - 使用泛型的 C++/CLI 程序的标准结构？

> ID：13860211
> 
> 赞同：0
> 
> 时间：2012-12-13T12:49:44.013
> 
> 标签：.net, visual-c++, generics, c++-cli

如果有人能指出一些示例代码或项目的方向，我将不胜感激，这些代码或项目在头文件 (.h) 和代码文件 (.cpp) 之间拆分了 C++/CLI 类，它使用泛型及其成员函数。我在编译时遇到了一些麻烦，因为我试图在语法上处理泛型，就像我在非托管 C++ 项目中使用模板的方式一样，并且似乎找不到在拆分文件中使用泛型的任何好的示例。是的，这是我第一次尝试在 C++/CLI 中构建项目。

这是我的代码，如果有人能发现错误：

**C++/CLI .dll：**

```
.h:
#ifndef __ManagedCPlusPlus_h__
#define __ManagedCPlusPlus_h__

//#include "CPlusPlusArray.h"

using namespace System;

class CPlusPlusArray;

namespace ManagedCPlusPlusArray {

    generic<typename S2, typename I2>
    public ref class ManagedCPlusPlusArray
    {
        public:
            ManagedCPlusPlusArray(S2 size);
            void SetItem(S2 index, I2 value);
            I2 GetItem(S2 index);
            S2 Size(void);
            virtual ~ManagedCPlusPlusArray(void);
        private:
            CPlusPlusArray* m_cppa;
    };
}

#endif  

.cpp:
// This is the main DLL file.

#include <STDIO.H>  

//#include "stdafx.h"
#include "ManagedCPlusPlusArray.h"
#include "CPlusPlusArray.h"

using namespace System::Runtime::InteropServices;
namespace ManagedCPlusPlusArray
{
    generic<typename S2, typename I2>
    ManagedCPlusPlusArray<S2,I2>::ManagedCPlusPlusArray(S2 size)
    {
        this->m_cppa = new CPlusPlusArray(size);
    }

    generic<typename S2, typename I2>
    void ManagedCPlusPlusArray<S2,I2>::SetItem(S2 index, I2 value)
    {
        this->m_cppa->SetItem(index, value); 
    }

    generic<typename S2, typename I2>
    I2 ManagedCPlusPlusArray<S2,I2>::GetItem(S2 index)
    {
        return this->m_cppa->GetItem(index);
    }

    generic<typename S2, typename I2>
    S2 ManagedCPlusPlusArray<S2,I2>::Size(void)
    {
        return this->m_cppa->Size();
    }

    generic<typename S2, typename I2>
    ManagedCPlusPlusArray<S2,I2>::~ManagedCPlusPlusArray(void)
    {
        delete this->m_cppa;
        this->m_cppa = NULL;
    }
} 
```

**C++ .dll：**

```
.h:
#ifndef __CPlusPlusArray_h__
#define __CPlusPlusArray_h__

//more about this in reference 1
#ifdef CPLUSPLUSARRAY_EXPORTS
   #define CPLUSPLUSARRAY_API  __declspec(dllexport)   // export DLL information

#else
   #define CPLUSPLUSARRAY_API  __declspec(dllimport)   // import DLL information

#endif 

template <typename I, typename S> class CPLUSPLUSARRAY_API CPlusPlusArray {
private:
    S _size;
    I _items[];
public:
    CPlusPlusArray(S size);
    void SetItem(S index, I value);
    I GetItem(S index);
    S Size(void);
    ~CPlusPlusArray(void);   
};

#endif

.cpp:
#include <iostream>

#define WIN32_LEAN_AND_MEAN     // Exclude rarely-used stuff from Windows headers
#include <windows.h>

#include "CPlusPlusArray.h"

#ifdef _MANAGED
#pragma managed(push, off)
#endif

BOOL APIENTRY DllMain(
    HMODULE     /*hModule*/,
    DWORD       ul_reason_for_call,
    LPVOID      /*lpReserved*/)
{
    switch (ul_reason_for_call)
    {
        case DLL_PROCESS_ATTACH:
        case DLL_THREAD_ATTACH:
        case DLL_THREAD_DETACH:
        case DLL_PROCESS_DETACH:
            break;
    }
    return TRUE;
}

#ifdef _MANAGED
#pragma managed(pop)
#endif

template <typename I, typename S>
CPlusPlusArray<I, S>::CPlusPlusArray(S size) 
{
    this->_size = size;
    this->_items = new I[this->_size];
}
template <typename I, typename S>
void CPlusPlusArray<I, S>::SetItem(S index, I value) 
{
    this->_items[index] = val;
}
template <typename I, typename S>
I CPlusPlusArray<I, S>::GetItem(S index)
{
    return this->_item[index];
}
template <typename I, typename S>
S CPlusPlusArray<I, S>::Size(void)
{
    return this->_size;
}
template <typename I, typename S>
CPlusPlusArray<I, S>::~CPlusPlusArray(void)
{
    delete[] this->_items;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:46:04.343

至少有两个错误：

*   您需要将您的类定义包含在与类声明相同的命名空间中的 cpp 文件中

*   您必须指定泛型参数列表，因为它是类型的组成部分

所以这应该给出类似的东西：

```
namespace ManagedCPlusPlusArray
{
    generic<typename S, typename I>
    ManagedCPlusPlusArray<S,I>::ManagedCPlusPlusArray(S size)
    {
        this->m_cppa = new CPlusPlusArray(size);
    }
    ...
} 
```

# c# - 在 Asp.Net 中创建包含图像和标题的动态自定义工具提示

> ID：13860213
> 
> 赞同：0
> 
> 时间：2012-12-13T12:49:45.180
> 
> 标签：c#, asp.net, tooltip

我想从后面的代码中动态创建像[这样](http://jquerytools.org/demos/tooltip/any-html.html)或[这样](http://rndnext.blogspot.gr/2009/02/jquery-ajax-tooltip.html)的自定义工具提示，这就是我到目前为止所得到的。

```
 public void printSubjects()
{
    SqlConnection con = new System.Data.SqlClient.SqlConnection();
    con.ConnectionString = ConfigurationManager.ConnectionStrings["beta"].ConnectionString;

    SqlDataAdapter da = new SqlDataAdapter("select SUBJECT_ID,X_COOR,Y_COOR from M_SUBJECT WHERE TERRITORY_ID =" + Convert.ToInt32(ddMaps.SelectedItem.Value) + " AND X_COOR !='" + 0 + "'", con);
    DataSet ds = new DataSet();
    da.Fill(ds, "SubjectLinked");
    points = new Button[ds.Tables[0].Rows.Count];

    for (int i = 0; i < ds.Tables[0].Rows.Count; i++ )
    {
        points[i] = new Button();
        points[i].CssClass = "fixPoint";
        points[i].Style.Add("top", ds.Tables[0].Rows[i]["Y_COOR"].ToString() + "px");
        points[i].Style.Add("left", ds.Tables[0].Rows[i]["X_COOR"].ToString() + "px");

        SqlDataAdapter daII = new SqlDataAdapter("select USER_NAME from I_SUBJECT WHERE ID =" + Convert.ToInt32(ds.Tables[0].Rows[i]["SUBJECT_ID"].ToString()) + "", con);
        DataSet dsII = new DataSet();
        daII.Fill(dsII, "SubjectName");

        points[i].ToolTip = dsII.Tables[0].Rows[0]["USER_NAME"].ToString();

        points[i].Click += new EventHandler(deleteLink_Click);

        myID.Controls.Add(points[i]);
    }

} 
```

这就是结果 ![在此处输入图像描述](../Images/c01bbfaa8ded5b0c838249e2bf683f47.png)

如何实现 jquery qtip 或 ajax 悬停菜单或其他任何东西，以便在代码后面的每个工具提示中添加主题图像和其他主题信息..？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T13:50:27.413

最后我最终使用了[ASPNetToolTip](http://www.aspnettooltip.com/aspnettooltip_Demonstration.aspx)。在 .cs 文件中，我使用主题的标题（标签）和图像（img）制作了一个 HtmlTable，然后我将它传递给 AspNetToolTip，这样就成功了。我没有打扰任何 Javascript 或 Html 代码，所有代码都是用 C# 编写的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:24:59.003

您可以创建自定义控件。当您覆盖 Render 方法时，您提供了您希望在页面中编写的 Html 代码。

这是一个示例： http: [//msdn.microsoft.com/en-us/library/aa310915 (v=vs.71).aspx](http://msdn.microsoft.com/en-us/library/aa310915(v=vs.71).aspx)

如果你有时间并且愿意的话，还有完整的文献：http: [//msdn.microsoft.com/en-us/library/zt27tfhy (v=vs.100).aspx](http://msdn.microsoft.com/en-us/library/zt27tfhy(v=vs.100).aspx)

希望这可以帮助

# php - 在 PHP 函数中访问全局变量

> ID：13860217
> 
> 赞同：0
> 
> 时间：2012-12-13T12:49:50.850
> 
> 标签：php

我是php新手，我不明白为什么在函数“func”中使用变量“cons”时编译器无法识别，如下代码：

```
$cons = 1;

function plusCons($num) {
   return $num + $cons;
} 
```

在函数范围内使用全局变量是不可能的吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:52:57.640

为了在 PHP 函数中访问全局变量，您需要使用`global`关键字来导入变量：

```
$cons = 1;

function plusCons($num) {
   global $cons;

   return $num + $cons;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:00:08.703

这也适用于您：

```
$cons = 1;

function plusCons($num ,$cons) {
  return $num + $cons;
}

echo plusCons(2 , $cons); // this will output 3 
```

# php - 处理适用性声明 2 (AS2) 请求

> ID：13860218
> 
> 赞同：5
> 
> 时间：2012-12-13T12:50:00.603
> 
> 标签：php, perl, http, edi, pkcs#12

我的公司决定推出他们自己的 EDI 服务来处理想要通过 AS2 进行通信的合作伙伴 - 适用性声明 2。令我惊讶的是，对于需要自己推出这项服务的开发人员来说，并没有太多的资源或信息。

我找到了这些，但想知道是否有人有使用这两种方法的经验以及您的想法，或者如果没有，您使用什么/如何实现 AS2？
[AS2 安全 (PHP)](http://www.as2secure.com/)

[Net::AS2（Perl 模块）](http://search.cpan.org/~swong/Net-AS2-0.01/lib/Net/AS2.pm)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-17T03:11:34.013

我已经实施了数百次 AS2 解决方案。当然，我使用了大量的商业软件，包括免费软件。我假设您已经阅读了 RFC，它将让您知道您的软件需要如何操作才能符合要求。

/n 软件有一个对一个贸易伙伴免费的解决方案。我已经在客户位置成功使用它。如果您绝对需要基于 PHP 的解决方案，我听说人们使用 AS2Secure 取得了成功。如果您的合作伙伴需要 MD5 哈希算法，那么这个解决方案（基于他们的站点）将不起作用。这只是为什么滚动自己可能会很棘手的一个例子。

需要考虑的事情：

与您的 EDI 翻译器集成会有多困难？无缝的？还是需要编写脚本？如何处理 MDN，以及处理它需要多少设置？它们是同步的还是异步的？您需要/想要支持哪些加密/签名算法？这会扩展到多个贸易伙伴吗？您是否要为每个合作伙伴和基于 ID 的路由构建邮箱？

我理解为自己服务的愿望，但这匹马已经被打死了。

有很多优秀的应用程序可以扩展并与您的集成解决方案集成，并且大多数时候您将从基于商业的软件中获得快速的投资回报。

就个人而言，我在 Cleo Lexicom 上运气最好。不是免费的，但最即插即用。

# c++ - std::move 和 unique_ptr::reset 有什么区别？

> ID：13860219
> 
> 赞同：14
> 
> 时间：2012-12-13T12:50:00.857
> 
> 标签：c++, c++11, unique-ptr

对于`std::unique_ptr`s`p1`和，和`p2`有什么区别？`std::move()``std::unique_ptr::reset()`

```
p1 = std::move(p2);

p1.reset(p2.release()); 
```

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-13T13:25:33.060

从 [unique.ptr.single.assign]/2 中的移动分配标准规范中，答案应该是显而易见的：

> *效果：*将所有权从 转移`u`到`*this`，就好像通过调用`reset(u.release())`后跟从 的分配一样`std::forward<D>(u.get_deleter())`。

显然 move assignment 不一样，`reset(u.release())`因为它做了一些额外的事情。

附加效果很重要，没有它，您可以使用自定义删除器获得未定义的行为：

```
#include <cstdlib>
#include <memory>

struct deleter
{
  bool use_free;
  template<typename T>
    void operator()(T* p) const
    {
      if (use_free)
      {
        p->~T();
        std::free(p);
      }
      else
        delete p;
    }
};

int main()
{
  std::unique_ptr<int, deleter> p1((int*)std::malloc(sizeof(int)), deleter{true});
  std::unique_ptr<int, deleter> p2;
  std::unique_ptr<int, deleter> p3;

  p2 = std::move(p1);  // OK

  p3.reset(p2.release());  // UNDEFINED BEHAVIOUR!
} 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T13:04:06.580

例如，如果存在析构函数不匹配，第一个能够警告您。此外，`release()`是一个非常危险的功能，您的简单示例是正确的，但许多其他用途却不是。最好永远不要使用此功能。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-13T13:15:03.827

我认为第二个版本可能不是异常安全的。它相当于：

```
auto __tmp = p2.release();
p1.reset(__tmp); 
```

因此，如果调用`std::unique_ptr::reset`throws（如果托管对象的删除可能会发生这种情况），那么您将拥有一个永远不会被销毁的未引用对象。在移动分配的情况下，`std::unique_ptr`可以（并且应该）等待实际移动，直到`p1`' 的原始对象被正确销毁。

但请注意，这只是一个问题，如果托管对象的析构函数可以抛出，这在几乎所有情况下本身都是错误的，或者如果您使用可能抛出的自定义删除器。所以在实践中，两个代码片段之间通常没有任何行为差异。

* * *

**编辑：**最后*乔纳森*在他的评论中指出，标准要求自定义删除器不要抛出，这确实使得抛出`std::unique_ptr::reset`非常不可能/不合格。但他也指出，还有另一个区别，只有一个移动赋值也会移动任何自定义删除器，他也为此写了一个答案。

* * *

但不考虑实际产生的行为，两者之间存在巨大的概念差异。如果移动赋值是合适的，**那么做一个移动赋值**并尽量不要用其他代码来模拟它。事实上，我无法想象任何理由将第一个代码片段一对一地替换为第二个。*DeadMG*是正确的，`std::unique_ptr::release`只有在您真正知道自己在做什么以及在哪个上下文中处理非托管动态对象时才应该使用它。

# matlab - 什么是复杂标量类型作为索引值无效

> ID：13860222
> 
> 赞同：2
> 
> 时间：2012-12-13T12:50:14.507
> 
> 标签：matlab, matrix, octave, complex-numbers

我在 Linux 上使用 Octave 来做一些基本的 Matlab 计算，我得到了标题中提到的以下代码的错误：

```
for a = i:n
 aux = U(j,a)/U(a,a);
 % L(a,i) = aux;
end 
```

我想提一下 U 是一个 n × n 矩阵，而 i 是另一个外循环的索引。

谢谢，丹尼尔。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T12:54:40.070

在 Matlab 中使用`i`和`j`作为索引[不是一个好习惯](https://stackoverflow.com/questions/14790740/using-i-and-j-as-variables-in-matlab)，因为默认情况下它们代表`sqrt(-1)`. 它看起来像是在您的代码中初始化`i`或未`j`初始化，因此采用它们的默认复数值。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-13T12:55:49.337

但你不告诉我们什么`j`是...

`j`作为索引可能有问题吗？

请注意，两者`i`和`j`都默认定义为`sqrt(-1)`。因此，如果您`j`按原样使用而没有明确的预定义，那么您会得到一个复杂的值，它无法用作索引。

# .net - 读取按钮的“启用”状态

> ID：13860223
> 
> 赞同：3
> 
> 时间：2012-12-13T12:50:14.857
> 
> 标签：.net, winforms, button, autoit

如何`Enabled`在[AutoIt](http://en.wikipedia.org/wiki/AutoIt)中获取按钮的状态（禁用/变暗或启用）？它*确实*适用于 property `Text`，但它*似乎*不适用于 property （无论按钮的状态如何，结果总是相同）`Enabled`（“properties”，如 Visual Studio 中的 .NET Windows Forms 意义）。

这适用于 .NET 应用程序（Windows 窗体、VB.NET），其中 Visual Studio 设计器中的按钮名称为`btnStoreInModule`，属性文本为`S&tore in Module`. 该属性[`Enabled`](http://msdn.microsoft.com/en-us/library/system.windows.forms.control.enabled.aspx)是我感兴趣的。按钮的类型是[`System.Windows.Forms.Button`](http://msdn.microsoft.com/en-us/library/system.windows.forms.button%28v=vs.80%29.aspx)。我的 AutoIt 脚本按下按钮是这样的：

```
ControlClick("My Application", "", "[NAME:btnStoreInModule]") 
```

应用程序通过在执行操作时禁用按钮来响应。操作完成后，按钮再次启用（未变暗）。`Store`禁用按钮时的应用程序：

![按钮处于禁用状态。 对于 .NET 应用程序](../Images/5a1b9c32c617c18a97ab47e90c2d270d.png)

[AutoIt Window Information Tool](https://www.autoitscript.com/autoit3/docs/intro/au3spy.htm)为禁用和启用状态提供相同的结果：

```
>>>> Window <<<<
Title:    My Application 1.2a6
Class:    WindowsForms10.Window.8.app.0.b7ab7b
Position: -4, 34
Size:     1448, 870
Style:    0x17CF0000
ExStyle:  0x00050100
Handle:   0x000C08DE

>>>> Control <<<<
Class:               WindowsForms10.BUTTON.app.0.b7ab7b
Instance:            21
ClassnameNN:         WindowsForms10.BUTTON.app.0.b7ab7b21
Name:                btnStoreInModule
Advanced (Class):    [NAME:btnStoreInModule]
ID:                  592026
Text:                S&tore in Module
Position:            257, 675
Size:                91, 23
ControlClick Coords: 59, 8
Style:               0x5601000B
ExStyle:             0x00000000
Handle:              0x0009089A 
```

我*可以*`TB_Type`使用（是 Visual Studio 属性窗口中文本框的名称（属性*“名称”*））获取 TextBox 控件的文本：

```
Local $sText = ControlGetText ("My Application", "", "[NAME:TB_Type]") 
```

对于按钮，相应的行返回`S&tore in Module`（正如人们所期望的那样）。

AutoIt 版本：3.3.8.1 (2012-01-29)。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T15:10:04.253

像这样使用[ControlCommand](http://www.autoitscript.com/autoit3/docs/functions/ControlCommand.htm)函数：

```
 $isControlEnabled = ControlCommand($hWin, "", "[NAME:button2]", "IsEnabled", "") 
```

如果启用，该函数将返回 => 1 ，如果`"[NAME:button2]"`禁用，则返回 0。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-08T10:12:31.680

以下代码应该可以工作：

```
Local $isControlEnabled = ControlCommand("My Application 1.2a6", "", "WindowsForms10.BUTTON.app.0.b7ab7b21", "IsEnabled")
ConsoleWrite($isControlEnabled) 
```

如果按钮启用，该函数将返回 1，如果禁用，则返回 0。

# magento - 谷歌地图没有在magento中显示

> ID：13860224
> 
> 赞同：1
> 
> 时间：2012-12-13T12:50:25.647
> 
> 标签：magento, google-maps-api-3

```
<meta name="viewport" content="initial-scale=1.0, user-scalable=no" />
<style type="text/css">
  html { height: 100% }
  body { height: 100%; margin: 0; padding: 0 }
  #map_canvas { height: 100% }
</style>
<script type="text/javascript"
  src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY&sensor=true">
</script>
<script type="text/javascript">
  function initialize() {
    var mapOptions = {
      center: new google.maps.LatLng(0, 0),
      zoom: 2,
      mapTypeId: google.maps.MapTypeId.ROADMAP
    };
    var map = new google.maps.Map(document.getElementById("map_canvas"),
        mapOptions);
  }
</script> 
```

已添加这是 head.phtml

和

```
 <script type="text/javascript">
jQuery(document).ready(function(){
        initialize();
});
</script>

<div id="map_canvas" style="width:100%; height:100%;"></div> 
```

把它放在我的phtml中

它似乎在 div 中放置了很多值，所以我知道脚本正在运行，但没有显示任何内容，谁能指出错误并指导我正确的方向？？？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:55:21.377

不要将初始化调用放在 中`document.ready()`，而是使用 Google 自己的事件侦听器：

```
google.maps.event.addDomListener(window, 'load', initialize); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T06:48:02.080

您好检查以下代码可能对您有所帮助

> < script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1/jquery.min.js">
> 
> < script type="text/javascript"
> src="https://maps.googleapis.com/maps/api/js?key=YOUR_KEY&sensor=true">
> 
> <脚本类型="文本/javascript">
> 
> 函数初始化（）{
> 
> var 纬度 = parseFloat("22.258652"); // 从上面的变量中获取纬度
> 
> var longitude = parseFloat("71.1923805"); // 相同的经度
> 
> var latlngPos = new google.maps.LatLng（纬度，经度）；
> 
> ```
>  var mapOptions = {
>   center: latlngPos,
>   zoom: 10,
>   mapTypeId: google.maps.MapTypeId.ROADMAP
> };
>  var map = new google.maps.Map(document.getElementById("map_canvas"),mapOptions); 
> ```
> 
> var marker = new google.maps.Marker({ position: latlngPos, map: map, title: "test" });
> 
> }
> 
> <脚本>

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-10-10T13:45:34.897

我有同样的问题，并根据这个答案添加了一个固定大小的周围 div，对我有用。 [嵌套在 div 标签中时，地图未在 Google Maps JavaScript API v3 上显示](https://stackoverflow.com/questions/16349476/map-isnt-showing-on-google-maps-javascript-api-v3-when-nested-in-a-div-tag)

# ruby-on-rails-3 - Ruby on rails 应用程序托管，但遇到了问题。

> ID：13860226
> 
> 赞同：0
> 
> 时间：2012-12-13T12:50:35.240
> 
> 标签：ruby-on-rails-3, hosting, web-hosting

你好我在heroku上部署了一个rails应用程序。 [http://infinite-falls-7346.herokuapp.com](http://infinite-falls-7346.herokuapp.com)

本地主机应用程序工作正常。第一页很好在我得到之后但是托管的页面给了我错误，比如

**我们很抱歉，但有些不对劲。**

有谁知道为什么它像dat？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:02:18.127

在开始时在 Heroku 上部署应用程序时，大部分时间都会遇到编译资产的问题，主要是由于资产管道。您的本地服务器可能没问题，因为没有预编译，但由于代码中的小错误未在本地环境中命中，heroku 可能会触发意外错误。

以下链接向您解释了使用 heroku 的大部分调试技术。

[http://neilmiddleton.com/heroku-asset-pipeline-faq/](http://neilmiddleton.com/heroku-asset-pipeline-faq/)可能有助于找出问题。

# scala - 拆分字符串赋值

> ID：13860227
> 
> 赞同：0
> 
> 时间：2012-12-13T12:50:36.690
> 
> 标签：scala, playframework

在 Play 模板文件中，我想拆分一个字符串并将每个部分分配给一个变量。但是，以下方法不起作用：

```
@for(x <- a) {
   @defining(x.split("""\.""")) { Array(x1, x2) =>
      ...
   }
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:23:03.800

你忘记了`case`关键字。

```
@for(x <- a) {
   @defining(x.split("""\.""")) { case Array(x1, x2) =>
      ...
   }
} 
```

# sql - 像模式'[0-9][0-9][0-1][0-9]'

> ID：13860232
> 
> 赞同：3
> 
> 时间：2012-12-13T12:51:13.543
> 
> 标签：sql, sql-server, tsql

我有一个`nvarchar`4 位数字的字段。前 2 位数字介于 00 和 99 之间。接下来的 2 位数字应该是介于 00 和 15 之间的数字

我的 SQL`like`看起来像这样：

```
I4020 like '[0-9][0-9][0-1][0-9]' 
```

问题是例如 1219 是可能的。

是否可以使用类似的模式来做到这一点？

布拉斯特凡

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T12:56:26.480

*使用一种*LIKE 模式是不可能做到这一点的。但是，您可以使用其中两个：

```
(I4020 like '[0-9][0-9]0[0-9]' OR I4020 like '[0-9][0-9]1[0-5]') 
```

或者，如果字段始终包含数字，您可以使用数字匹配：

```
I4020 LIKE '[0-9][0-9][0-9][0-9]'
AND CONVERT(int, RIGHT(I4020, 2)) <= 15 
```

但请注意，T-SQL`AND`不会短路：如果 最右边的两个字母`I4020`不是数字，则后一个查询可能会失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T12:56:01.397

刹车间隔

```
(I4020 like '[0-9][0-9]0[0-9]' OR I4020 like '[0-9][0-9]1[0-5]') 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:56:39.507

`(I4020 like '[0-9][0-9]0[0-9]' OR I4020 like '[0-9][0-9]1[0-5]')`

# ruby - RUBY：将变量设置为数组元素，正则表达式认为它是一个数组

> ID：13860237
> 
> 赞同：0
> 
> 时间：2012-12-13T12:51:20.263
> 
> 标签：ruby, regex, arrays, string, match

我正在尝试对从扫描结果的元素分配的字符串中的字符进行正则表达式。我正在尝试使用 match，它抱怨该变量是一个数组。我对为什么“ `trash`”被视为一个数组感到困惑。

```
test = 'class="date">B=oddTu Q='
array = test.scan(/([A-Z])=/)
puts array
trash = array.last
trash.to_s
puts trash
if /Q/.match(trash)
  puts $1
end 
```

这就是我看到的结果

```
C:\Ruby>scratch.rb
class="date">B=oddTu Q=
B
Q
Q
C:/Ruby/scratch.rb:14:in match: can't convert Array to String (TypeError)
        from C:/Ruby/scratch.rb:14:in `<main>' 
```

编辑：扫描返回一个数组数组，所以通过做垃圾 = array.last，垃圾然后被降低一级到 1 个数组。做垃圾=垃圾[0]然后把它变成一个字符串。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T12:54:40.063

问题是这`trash`是一个数组（单个元素“Q”）。当你序列化时你会看到它。

看看我的 irb 中的这两行：

```
test.scan(/([A-Z])=/)
=> [["B"], ["Q"]] 
```

扫描返回数组数组 - 每个匹配每个组的值。

您不能对数组进行匹配。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:33:40.487

正如鲍里斯指出的那样，你得到了一个数组数组。这是因为您的正则表达式中有一个组（带括号的表达式）。如果您有几个这样的组，它们将分别对应于返回数组中的一个元素：

```
test.scan(/([A-Z])(=)/)
# => [["B", "="], ["Q", "="]] 
```

在你的情况下，有几种方法可以解决这个问题。你可以简单`flatten`的数组：

```
test.scan(/([A-Z])=/).flatten
# => ["B", "Q"] 
```

或者您可以使用积极的前瞻性而不是将您感兴趣的位分组：

```
test.scan(/[A-Z](?==)/)
# => ["B", "Q"] 
```

不幸的是，由于您不感兴趣的位是`=`符号，因此使用前瞻语法看起来有点奇怪`(?=pattern)`，因此该`flatten`选项可能更清晰。

# .net - 附加行为中的匿名事件处理程序会导致泄漏吗？

> ID：13860240
> 
> 赞同：1
> 
> 时间：2012-12-13T12:51:35.647
> 
> 标签：.net, wpf, attached-properties, anonymous-methods

我有以下代码。

所以基本上它在引发事件`DelegateCommand`时执行命令（基于弱引用委托） 。`Selector.SelectionChanged`

```
 public static readonly DependencyProperty SelectionCommandProperty
        = DependencyProperty.RegisterAttached(
            "SelectionCommand",
            typeof(ICommand),
            typeof(CommonUtilities),
            new PropertyMetadata(null, OnSelectionCommandPropertyChanged));

    private static void OnSelectionCommandPropertyChanged(
        DependencyObject d, DependencyPropertyChangedEventArgs e)
    {
        var selector = d as Selector;
        var command = e.NewValue as ICommand;
        if (selector != null && command != null)
        {
            selector.SelectionChanged
                += (o, args) => command.Execute(selector.SelectedItem);
        }
    }

    public static ICommand GetSelectionCommand(DependencyObject d)
    {
        return d.GetValue(SelectionCommandProperty) as ICommand;
    }

    public static void SetSelectionCommand(DependencyObject d, ICommand value)
    {
        d.SetValue(SelectionCommandProperty, value);
    } 
```

请注意，上下文是静态的。

这会导致泄漏吗？我可以猜测它不会，因为据我所知，匿名处理程序将一直有效，直到所有“外部”变量（即`selector`此处`command`）的范围不适用于 GC。一旦它们被 GCed，当`View`(that has `selector`) 和`ViewModel`(that issupping `command`) 从父 GUI 卸载时，匿名委托也将被取消挂钩。

我在这里吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:13:11.800

以下是此示例中的参考：

*   看法：
    *   选择器
*   视图模型：
    *   指令
*   选择器：
    *   匿名代表
    *   指令
*   匿名代表：
    *   选择器
    *   指令

这意味着视图和视图模型可以被垃圾收集，留下`Selector`并`ICommand`活着。

垃圾收集器能够处理循环引用；所以即使`Selector`引用了委托，并且委托引用了`Selector`这些仍然可以被垃圾收集。

`ICommand`但是，只要这个匿名委托保持活动状态，它就会保持活动状态，这完全由实例的生命周期决定`Selector`。只要`Selector`正在被垃圾收集，委托`ICommand`最终也会被垃圾收集。

所以在简单的情况下，不，您的代码不会导致泄漏。

但是，您的代码确实存在泄漏处理程序的情况，我假设您的视图模型具有如下属性：

```
public ICommand OnSelectionChanged
{
    get { return _onSelectionChanged; }
    private set 
    { 
        _onSelectionChanged = value;
        RaisePropertyChanged("OnSelectionChanged");
    }
} 
```

然后绑定在视图中，如果您更改此`OnSelectionChanged`命令的值，您的附加属性将泄漏事件处理程序，因为您永远不会取消订阅执行旧命令的委托。

因此，将执行此属性的所有先前值，而不是只执行一个命令。

我会寻求更像以下的实现：

```
private static void OnSelectionCommandPropertyChanged(DependencyObject d, DependencyPropertyChangedEventArgs e)
{
    var selector = d as Selector;

    if (selector != null)
    {
        var oldCommand = e.OldValue as ICommand;
        var newCommand = e.NewValue as ICommand;
        if(oldCommand == null && newCommand != null)
        {
            selector.SelectionChanged += OnSelectionChanged;
        }
        else
        {
            selector.SelectionChanged -= OnSelectionChanged;
        }
    }
}

private static void OnSelectionChanged(object sender, SelectionChangedEventArgs e)
{
    var selector = (Selector)sender;
    var command = GetSelectionCommand(selector);
    if(command != null)
    {
        command.Execute(selector.SelectedItem);
    }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:12:31.873

匿名处理程序的生命周期严格取决于您的选择器对象，而不是外部变量，因此它会一直存在，直到您取消订阅或选择器对象被垃圾回收。所以这样就不会导致内存泄漏。

请注意，同一对象可能有多个订阅，因此您可能需要在某个时候取消订阅。

# jquery - “Uncaught TypeError: object is not a function” 用 press 压缩 jQuery

> ID：13860243
> 
> 赞同：1
> 
> 时间：2012-12-13T12:51:43.977
> 
> 标签：jquery, playframework, playframework-1.x

我正在尝试在我的 Play 中使用 press 模块！应用程序以减少加载的 JS 文件的数量。我想使用 press 将所有加载的 JS 文件合并为一个。我写了以下代码：

```
 #{press.script src:'jquery-1.7.1.min.js', compress:false/}
    #{press.script src:'x.common.js', compress:false/}
    #{press.script src:'jquery.html5-placeholder-shim.js', compress:false/}
    #{press.script src:'jquery.maskedinput-1.3.min.js', compress:false/}
    #{press.script src:'jquery.cookie.js', compress:false/}
    #{press.script src:'jquery.autotab-1.1b.js', compress:false/}
    #{press.script src:'jquery.tmpl.min.js', compress:false/}
    #{press.script src:'jquery-ui-1.8.11.min.js', compress:false/}
    #{press.script src:'jquery.tools.min.js', compress:false/}
    #{press.script src:'fancybox/jquery.fancybox-1.3.4.pack.js', compress:false/}
    #{press.script src:'log4javascript_lite.js', compress:true/}

    #{press.compressed-script /} 
```

但是当我尝试运行它时，我在线生成的 JS 中收到“Uncaught TypeError: object is not a function”：

```
(function($) { 
```

所以我看到这里 jQuery 是未定义的。我怎么解决这个问题？

# javascript - 触发 JavaScript 锚函数（无需用户点击）

> ID：13860244
> 
> 赞同：0
> 
> 时间：2012-12-13T12:51:45.757
> 
> 标签：javascript, jquery

我有一个页面，用户可以在其中看到此锚点...

```
<a href="javascript:launchSomething("1", "2", "1")">Test</a> 
```

是否可以在不让用户单击的情况下执行/调用`launchSomething(.....)`功能？如果参数是固定值，那么我可以做类似...

```
//on document.ready() {
//  launchSomething( .... );  
//} 
```

但是网页是动态生成的，这些参数也会发生变化，所以一旦网页加载，我需要做什么来自动触发它？

感谢帮助。

更新

我刚刚将标记更改为

```
<a class="click1" href="javascript:launchSomething('1', '2', '1')">Test</a> 
```

所以它总是有一个类“click1”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T12:53:43.957

假设你足够信任代码（你可能应该在生成它时），你可以使用这个：

```
eval($('a[href^="javascript:launchSomething("]').attr('href').slice(11)); 
```

[演示（打开控制台）](http://jsfiddle.net/WP9aE/)

备注：

*   你会看到我修复了 HTML 中缺少引号转义的问题
*   我的第一个想法，基于 jQuery 触发函数，不起作用，因为它仅适用于 jQuery 添加的回调。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:55:53.533

您可以通过为链接动态生成属性来做到这一点：

```
foreach ($rows as $row) {
    echo '<a class="mylink" data-id=\''.$row['id'].'\'>Test </a>'; 
} 
```

然后，您可以将其绑定为链接的点击处理程序：

```
$('.mylink').click(function(){
    launchSomething($(this).data('id'));
}); 
```

要为特定链接调用处理程序，您可以使用：

```
$('.mylink[data-id="someID"]').click(); 
```

# android - 安卓活动生命周期

> ID：13860250
> 
> 赞同：1
> 
> 时间：2012-12-13T12:52:09.170
> 
> 标签：android, lifecycle

一个有`ActivityA-->ActivityB-->ActivityC`。如果用户在他在时按下 HomeButton `ActivityB`，然后他想重新打开应用程序我想重新启动活动`ActivityA`。好吧，那是有效的呼叫`onStop();`和`finish();`输入`ActivityB`。

但是当用户从`ActivityB`到`ActivityC`再想返回时`ActivityB`，`ActivityB`已经调用了`finish();`所以用户会出现在`ActivityA`。

那么，如果用户使用 HomeButton 从返回并完成它，如何使其`ActivityB`可用？`ActivityC`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T13:00:13.853

刚设置

```
android:clearTaskOnLaunch="true" 
```

在清单中的根活动（启动器用于启动应用程序的活动）上。然后，当用户使用您的应用程序时，只要他按下 HOME 键，您的任务就会被剥离回根（开始）活动。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T12:55:35.590

当您从**Activity B**转到**Activity C**时，不要在**Activity B上调用****finish()**。

 **我认为你这样做

```
 startActivity(new Intent(Activity_B.this,Activity_C.class));
 finish(); 
```

**从 Activity B 移动到 Activity C 时删除 finish()。**

[转到此 stackoverflow 问题了解更多详细信息，您将得到它。](https://stackoverflow.com/questions/12870563/i-want-to-end-the-whole-application-when-user-click-back-button-in-android/12871182#12871182)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:57:29.723

不要在 ActivityB 中调用方法 finish()

看看[这里](http://developer.android.com/training/basics/activity-lifecycle/index.html)和[这里](http://developer.android.com/training/basics/activity-lifecycle/starting.html)

永远不要自己调用 onStop()。这些方法是生命周期方法，由android系统调用。**

# delphi - 安装自定义包后如何修复损坏的 Delpi XE3 IDE？

> ID：13860253
> 
> 赞同：3
> 
> 时间：2012-12-13T12:52:15.990
> 
> 标签：delphi, ide, package, freeze, delphi-xe3

我创建了一个包含一个组件的新包（TSpeedButton 的后代），编译了该包并将其安装在 IDE（Delphi XE3 Pro）中。
就我测试它而言，它是有效的（我可以在设计和运行时使用我的组件）。

但是：我已经关闭了 IDE，现在我无法启动它。
它显示启动画面并显示进度：

*   文档洞察速递
*   CodeSite Express
*   绝地代码库
*   Jedi 视觉组件库

高达`All designtime packages loaded`（翻译自德语，YMMV）。
我猜这是我的包，所以我删除了 BPL。下次启动时，Delphi说可以找到包，并询问是否在加载下一个项目时加载它；我点了“否”。
但是 Delphi 仍然没有启动，行为是完全一样的。启动画面加载和停止。

安装程序的“修复”选项也没有帮助。

法老

编辑：**事实证明我太不耐烦了 - 重新启动清理了它。**
我仍然标记了肯怀特的答案，因为这将是最后的解决方案。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-13T13:17:05.933

为 Delphi 创建一个新的桌面快捷方式，修改它的属性（右键单击并选择`Properties`），并添加`-rFoo`到命令行的末尾。然后从该新快捷方式启动 IDE。

这将创建一个新的、空的 Delphi 注册表分支，其中仅包含默认组件和设置（称为`foo`）。它不会加载您的任何组件包（或您安装的任何不属于正常安装程序的第三方包）。然后，您可以一次添加一个任何第三方包。只需继续从新的快捷方式运行 IDE，就可以了。

如果这不能让您处于可以运行 IDE 的状态，那么您在某种程度上完全破坏了您的安装，您应该完全卸载并从头开始。

# objective-c - CALayer 没有显示正确的颜色

> ID：13860254
> 
> 赞同：1
> 
> 时间：2012-12-13T12:52:17.160
> 
> 标签：objective-c, xcode, cocoa, colors, calayer

我的 CALayers 没有显示正确的颜色。该项目在安装了所有 XCode 更新的 osX 10.8.2 上运行。

我通过以下方式创建颜色：

```
 lineColor1=CGColorCreateGenericRGB(1.0f, 1.0f, 1.0f, 1.0f);
          rootLayer.backgroundColor=lineColor1; 
```

所有灰度颜色都是正确的。但是当我尝试制作绿色时，它有一个蓝色成分。

```
 lineColor2=CGColorCreateGenericRGB(0.0f, 1.0f, 0.0f, 1.0f); 
```

在 Photoshop 中检查时，上面的行将产生以下 rgb 颜色：

```
 (0.0f, 0.98f, 0.29f, 1.0f) 
```

红色和蓝色也是如此。所有实际颜色都混合在一起，产生错误的结果。我错过了什么吗？我什至使用 Apple 提供的 CALayerEssentials 来检查它是否只是我的代码。结果是一样的。

谁能帮我在这里找到错误？

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-12-16T14:16:00.193

事实上，你的颜色可能比你想象的更正确。CGColorCreateGenericRGB 可让您创建通用 RGB 颜色。

所以你所做的就是告诉颜色系统你想要绿色。实际上是纯绿色。现在颜色系统被要求在特定设备上绘制你的 CALayer - 可能在你的屏幕上。

你的屏幕有它自己的颜色显示方式，它可能在各种有趣的方面都不理想。因此，颜色系统在理论上采用您要求它绘制的颜色，并计算绘制 CALayer 所需的*实际*颜色值，以确保它*看起来*像您要求它绘制的颜色。

一个更容易理解的方法是，如果您要打印您制作的这张图纸，颜色系统将不得不再次将颜色转换为完全不同的颜色空间 - 您的打印机可能是 CMYK。它对你的屏幕做同样的事情。

如果您想体验显示器的“非通用性”，请转到“系统偏好设置”、“显示”并查看“颜色”选项卡。您可以在那里设置很多配置文件，以使您的显示器上出现相同的“绿色”变化......

# sql-loader - 使用单个 ctl 文件将多个数据文件中的数据加载到多个表中

> ID：13860263
> 
> 赞同：1
> 
> 时间：2012-12-13T12:52:42.560
> 
> 标签：sql-loader, ctl

我有 3 个数据文件和 3 个临时表。有什么方法可以使用参数仅使用单个控制文件将数据文件中的数据输入到它们各自的临时表中。

为了详细说明场景，有 3 个数据文件，即 A.dat、B.dat、C.dat，它们的数据将分别输入到 A_Stg、B_Stg、C_Stg 暂存表中。这无疑可以使用单独的 ctl 文件来完成。但要求是使用单个加载程序文件来完成。

朝这个方向的任何指示都会很棒。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T04:07:14.777

使用 1 个 ctl 文件存在四种组合。

1.  将多个数据文件中的数据插入到单个表中
2.  将单个数据文件中的数据插入到多个表中
3.  将数据从单个数据文件插入单个表
4.  将多个文件中的数据插入到多个表中。

前三个在任何情况下都是可能的。但第四种情况只有在所有表的结构相同时才有可能。否则我们必须使用多个 ctl 文件。

更多信息可以在[**这里找到**](http://www.orafaq.com/wiki/SQL%2aLoader_FAQ)

# xml - Opencart VQMod 模板问题

> ID：13860266
> 
> 赞同：0
> 
> 时间：2012-12-13T12:52:48.237
> 
> 标签：xml, opencart, admin

我想从目录 > 产品 > 添加新的管理部分删除以下选项卡：属性、选项、折扣、特殊、奖励积分、设计。

我在 VQMod .xml 文件中使用以下内容，但选项卡属性继续显示。有什么想法我做错了什么，或者如何删除这些标签？

```
 <file name="admin/view/template/catalog/product_form.tpl">
    <operation>
        <search position="replace"><![CDATA[
            <a href="#tab-attribute"><?php echo $tab_attribute; ?></a>
        ]]></search>
        <add><![CDATA[
            <a href="#tab-attribute" style='display:none'><?php echo $tab_attribute; ?></a>
        ]]></add>
    </operation>
</file> 
```

我正在使用 Opencart 1.5.4。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:11:32.630

尝试这个

```
<file name="admin/view/template/catalog/product_form.tpl">
    <operation>
        <search position="replace"><![CDATA[tab-attribute"]]></search>
        <add><![CDATA[tab-attribute" style="display: none"]]></add>
    </operation>
</file> 
```

请注意，这将从视图中隐藏选项卡项目和实际选项卡内容（或应该 - 未经测试）。如果这不起作用并且选项卡仍然显示，您可能需要使用 HTML 注释替换来删除选项卡项，因为它可能是创建选项卡的 jQuery 代码覆盖`display: none`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-07T10:01:17.663

可以在打开的 cart-2.0.1.0 的左侧主菜单中隐藏奖励积分。为此，请执行以下操作：

opencart-2.0.1.0---->upload---->catalog---->view---->theme---->default---->template---->module--- ->帐户.tpl

搜索行：

```
<a href="<?php echo $reward; ?>" class="list-group-item"><?php echo $text_reward; ?></a> 
```

并像这样评论它：

```
<!-- <a href="<?php echo $reward; ?>" class="list-group-item"><?php echo $text_reward; ?></a> --> 
```

现在刷新您的页面并检查，您可以看到奖励积分选项消失了！

# javascript - 获取 Google Charts Table 的当前页面

> ID：13860267
> 
> 赞同：1
> 
> 时间：2012-12-13T12:52:47.937
> 
> 标签：javascript, google-visualization

我正在使用 Google Charts 对表格进行分页，并希望在重绘之前保存当前页面，以便稍后将其设置为 startPage。

如何访问表格的当前页面？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T08:22:19.153

如果这对任何人有帮助，

我最终将查询语言与页面事件的自定义函数结合使用。

该查询使我能够设置表的偏移量，并且工作正常。

这是对查询语言的参考：

[https://developers.google.com/chart/interactive/docs/querylanguage#Offset](https://developers.google.com/chart/interactive/docs/querylanguage#Offset)

[https://developers.google.com/chart/interactive/docs/examples#tablequerywrapper](https://developers.google.com/chart/interactive/docs/examples#tablequerywrapper)

这就是您在 Google Charts 事件上运行自定义函数的方式：

[https://developers.google.com/chart/interactive/docs/gallery/table#Configuration_Options](https://developers.google.com/chart/interactive/docs/gallery/table#Configuration_Options)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-06-04T05:30:37.040

我知道这是旧的，但我想出了如何做你想要的：

```
var currentPage = 0;  //at the beginning of your code, like a chartWrapper

//in your ready event:
google.visualization.events.addListener(chart, 'page', function(e) { returnTablePage(e) });

//as a separate function:
function returnTablePage(e) { currentPage = e.page; } 
```

我把它放在一个单独的函数中，因为我需要做几件事......

# asp.net - 如何在 javascript 中访问在 aspx 页面中设置为 Enabled="false" 的必填字段验证器？

> ID：13860269
> 
> 赞同：0
> 
> 时间：2012-12-13T12:52:52.277
> 
> 标签：asp.net

如何在 javascript 中访问在 aspx 页面中设置为 Enabled="false" 的必填字段验证器？在选择另一个下拉列表时，应启用此 requiredfieldvalidator。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:57:01.943

在您的 javascript 函数中，您需要类似...

```
document.getElementById("<%=valMyValidator.ClientId%>").enabled = true; 
```

# c - 受限3体重力模拟c

> ID：13860271
> 
> 赞同：1
> 
> 时间：2012-12-13T12:52:58.267
> 
> 标签：c, physics, simulation, equation, gravity

我目前正在尝试做一个任务，我必须为受限的 3 体引力问题编写一个模拟，具有两个固定质量和一个测试质量。我已经获得了为此需要使用的方程式，但要么我没有正确理解它们，要么我没有正确实施。如果有人可以帮助我朝着正确的方向前进，我将不胜感激。

我得到的信息如下：

[http://www.flickr.com/photos/91029993@N07/8269806430/in/photostream](http://www.flickr.com/photos/91029993@N07/8269806430/in/photostream)

基本上我一直在尝试测试单个质量，但是我的程序为测试质量的运动提供了一条直线，在很短的时间内，它看起来好像程序运行正常，但后来它不起作用你变得更高。（见图片，这些输入为 1 0.4 0.5 0 -1）

[http://www.flickr.com/photos/91029993@N07/8268764897/in/photostream](http://www.flickr.com/photos/91029993@N07/8268764897/in/photostream)

我最初非常忠实地按照以下给出的方程式编写了我的程序：

```
#include<stdlib.h>
#include<stdio.h>
#include <math.h>

int main (int argc, char* argv[])
{
    double dt=0.005, x[20000],y[20000],xv,yv,ax[20000],ay[20000],mneg,mpos,time;
    int n;
    FILE* output=fopen("proj1.out", "w");

    sscanf(argv[1], "%lf", &mneg);
    sscanf(argv[2], "%lf", &mpos);
    sscanf(argv[3], "%lf", &x[0]);
    sscanf(argv[4], "%lf", &y[0]);
    sscanf(argv[5], "%lf", &xv);
    sscanf(argv[6], "%lf", &yv);

    x[1]=x[0]+(xv*dt);
    y[1]=y[0]+(yv*dt);

    for(n=1;n<150;n++)
    {
        ax[n]= (-mneg*(x[n]+1)/(pow((sqrt(pow((x[n]+1),2))),3))) -(mpos*(x[n]-1)/(pow((sqrt(pow((x[n]-1),2))),3)));
        ay[n]= (-mneg*(y[n])/(pow(y[n],3))) -(mpos*(y[n])/(pow(y[n],3)));

        x[n+1]=((2*x[n])-x[n-1] +(dt*dt*ax[n]));
        y[n+1]=((2*y[n])-y[n-1]+(dt*dt*ay[n]));

        fprintf(output, "%lf %lf\n",x[n-1], y[n-1]); 
    }
return(0);
} 
```

然后我按照这里给出的建议尝试了一种新方法：[模拟恒星的引力？](https://stackoverflow.com/questions/13306596/simulate-the-gravitational-pull-of-a-star)，所以我现在有：

```
#include<stdlib.h>
#include<stdio.h>
#include <math.h>

int main (int argc, char* argv[])
{
    double dt=0.005, x[20000],y[20000],xv,yv,ax[20000],ay[20000],mneg,time,r,a;
    int n;
    FILE* output=fopen("proj1.out", "w");

    sscanf(argv[1], "%lf", &mneg);
    sscanf(argv[2], "%lf", &x[0]);
    sscanf(argv[3], "%lf", &y[0]);
    sscanf(argv[4], "%lf", &xv);
    sscanf(argv[5], "%lf", &yv);

    x[1]=x[0]+(xv*dt);
    y[1]=y[0]+(yv*dt);

for(n=1;n<150;n++)
    {

        r=sqrt(pow((x[n]+1),2)+pow(y[n],2));
        a=mneg/(r*r);

        ax[n]=a*((x[n]+1)/r);
        ay[n]=a*((y[n])/r);

        x[n+1]=((2*x[n])-x[n-1] +(dt*dt*ax[n]));
        y[n+1]=((2*y[n])-y[n-1]+(dt*dt*ay[n]));

        fprintf(output, "%lf %lf\n",x[n-1], y[n-1]); 
    }
return(0);
} 
```

但是，这并没有给我任何更好的结果。

我真的不知道从哪里开始，我想我使用的方法是正确的，但我在实际编程中看不到任何问题，所以我真的不知道发生了什么，所以任何建议或指针都在右边方向将非常非常感谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:42:36.740

您没有将方程正确地转换为代码，尤其是测试质量和固定质量之间距离的表达式。计算加速度的正确方法是：

```
double dxm = x[n] + 1.0;
double dxp = x[n] - 1.0;
double dy = y[n];
double denom_minus_inv = pow(dxm*dxm + dy*dy, -1.5);
double denom_plus_inv = pow(dxp*dxp + dy*dy, -1.5);
ax[n] = -mneg*dxn*denom_minus_inv - mpos*dxp*denom_plus_inv;
ay[n] = -mneg*dy*denom_minus_inv - mpos*dy*denom_plus_inv; 
```

请使用临时变量来存储中间表达式 - 不要将它们全部放在一个复杂的表达式中。现代编译器在优化代码时非常擅长消除多余的临时表达式。上面的代码使用了乘法通常比除法快一点的事实`1.0/pow(sqrt(x), 3.0) == pow(x, -1.5)`。

我建议您将 Verlet 积分器替换为[Velocity Verlet](http://en.wikipedia.org/wiki/Velocity_Verlet#Velocity_Verlet)。它显式地存储粒子速度，这使您可以在每个步骤中计算系统的总能量（动能和势能的总和）。它应该在整个运行过程中几乎保持不变（给出或接受舍入和离散化误差）。如果它严重偏离，那么你就知道你没有正确计算你的力。

# php - history.go (-1) 在 Internet Explorer 中不起作用

> ID：13860274
> 
> 赞同：1
> 
> 时间：2012-12-13T12:53:16.677
> 
> 标签：php, javascript, html

当我按如下方式使用 history.go(-1) 命令时，它工作正常，但重新加载页面需要很长时间。

```
<script type="text/javascript" language="javascript">
     javascript:history.go(-1);
</script> 
```

但是当我尝试在我的 php 代码中使用它时，它只会给我一个错误“Internet Explorer 无法显示网页”。这是我的代码

```
<?php header(sprintf("Location: %s", "javascript:window.history.go(-1);")); ?> 
```

在 ff 和 chrome 中这非常有效，它可以快速返回到上一页，无需重新加载。不是这样。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T13:02:08.173

返回上一页的常用方法不是将 JavaScript 传递到您的标题中，而是将用户引导到当前页面的引用者：

```
header("Location: " . $_SERVER["HTTP_REFERER"]); 
```

既然您说您使用的是 IE9，那么您应该知道[IE9 不支持 HTML5 History API](http://caniuse.com/#feat=history)。展望未来，您可以放心[IE10 确实支持这一点，但对于 IE9，如果不使用](http://msdn.microsoft.com/en-us/library/ie/hh673546%28v=vs.85%29.aspx)[History.js](https://github.com/balupton/History.js/)之类的东西，您将无法使用这些方法。

如果你只是想异步加载页面，你可以使用[XHR 对象](http://msdn.microsoft.com/en-us/library/ie/ms535874%28v=vs.85%29.aspx)，或者像 jQuery 这样的工具，它可以极大地简化冗长的代码。使用[jQuery](http://jquery.com/)，您可以像这样简单地加载页面：

```
$("#container").load("targetPage.php #container"); 
```

这会将`#container`from的内容加载`targetPage.php`到`#container`当前页面上的元素中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:04:32.633

试试这个：

```
history.back(1); 
```

# java - Java中以纪元时间格式表示的字符串到日期

> ID：13860275
> 
> 赞同：5
> 
> 时间：2012-12-13T12:53:20.313
> 
> 标签：java, date, time, format, epoch

我有一个我不认识的格式的字符串：收到的字符串：“36872 Dec 12 15:35”，而该日期的 Windows 表示是：“12/12/2012 5:35 PM”

所以首先，我猜日期中有些东西被破坏了。其次，我希望将此字符串解析为纪元时间格式

像这样：“1355371390142”（实际上是“2012-12-13 06:03:10”）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:59:50.950

`Date`您可以像这样在 Java中格式化s：

```
String str = "12/12/2012 5:35 PM"; //Your String containing a date
DateFormat dF = new SimpleDateFormat("dd//MM/yyyy hh:mm a"); // The mask
// 'a' value in the Mask represents AM / PM - h means hours in AM/PM mode
Date date = dF.parse(str); // parsing the String into a Date using the mask

//Date.getTime() method gives you the Long with milliseconds since Epoch.
System.out.println("Epoch representation of this date is: " + date.getTime()); 
```

有关掩码选项，请参阅此：http: [//docs.oracle.com/javase/1.5.0/docs/api/java/text/SimpleDateFormat.html](http://docs.oracle.com/javase/1.5.0/docs/api/java/text/SimpleDateFormat.html)

# multithreading - 在 Windows 上使用 Qt 创建多线程 GUI 应用程序。如何使用 QListWidget？

> ID：13860278
> 
> 赞同：0
> 
> 时间：2012-12-13T12:53:28.190
> 
> 标签：multithreading, qt, qlistwidget

我想使用 Qt 为 Windows 制作一个查找实用程序。我在 C# 和 .NET 中创建了相同的应用程序，我想进行比较。我的应用程序将不得不`QDir::entryList`递归地使用来查找指定路径的内容并将它们添加到`QListWidget`. 因为 entryList 可能很慢，所以它必须在`QThread`. 此外，用户不应该等待很长时间才能看到一些结果，而是`QListWidget`应该填充一些结果。

我做了以下事情：

1.  我创建了一个进行搜索的类，该类`sendItem(QString)`在找到文件时会发出一条消息。
2.  此类在另一个线程中运行， `f.moveThread(&thread)`其中 where`f`是 find 类的对象。
3.  因为 QListWidget 没有插槽，所以我创建了另一个`wrapper`具有插槽`addItem(QString)`的类，该类的对象在 GUI 线程中执行，因此当接收到消息时`sendItem`，插槽`addItem`执行以下操作`l.addItem(s)`，其中`s`是通过`sendItem`信号传输的数据。

这是从另一个线程更新 QListWidget 的最佳方式吗？因为它非常复杂，（而且它不起作用）但我不知道更好的。在 C# 中，我刚刚创建了一个`delegate FillList`我在委托对象中放入了一个方法`fillList`。我只是在我调用的方法中使用 wpf 列表框的方法作为参数给出了一个`BeginInvoke`and 。[您可以在sourceforge.net](http://sourceforge.net/projects/windowsfind/files/latest/download?source=directory)中查看 C# 应用程序`fillList``this.Dispatcher.invoke``addItem`

和其他问题：是否最好将`QListView`用于这种应用程序？感谢你的回答。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:33:58.470

1.  这是从另一个线程更新 GUI 的 Qt 方式。既然你的不行，我觉得你可以贴一些代码，我们来分析一下。

2.  如果你的list不太大，QListWidget也可以，但是如果你的list很大，那么最好使用QListView，因为对于QListWidget来说，list中渲染的每一项本身就是一个widget，会占用大量内存。但在 QListView 中，它是负责绘制所有项目的视图的委托。

# c# - 如何降低程序执行时间？

> ID：13860279
> 
> 赞同：0
> 
> 时间：2012-12-13T12:53:30.103
> 
> 标签：c#, time, limit, execution

如何减少以下程序执行时间：

```
using System;
using System.Diagnostics;
class LeastMM
{
    static void Main()
    {
        Stopwatch sw = new Stopwatch();
        sw.Start();
        byte[] nums = new byte[5];
        for (byte i = 0; i < nums.Length; i++)
        {
            nums[i] = byte.Parse(Console.ReadLine());
        }
        short? lmm = null;
        //uint currentI = 1;
        byte divisors = 0;
        //for (uint i = 1; i < nums.Length; i++) Console.WriteLine("{0} {1} ", i, nums[i]);
        for (short i = 1; ; i++)
        {
            divisors = 0;
            for (byte j = 0; j < nums.Length; j++)
            {
                if (i % nums[j] == 0) divisors++;
            }
            if (divisors >= 3) 
            {
                lmm = i;
                break;
            }
        }
        Console.WriteLine(lmm);
        sw.Stop();
        Console.WriteLine();
        Console.WriteLine(sw.Elapsed.Seconds + " or " +"0."+sw.Elapsed.Milliseconds);
    }
} 
```

执行时间必须小于 0.25 秒。我尝试不使用循环，而是使用四个不同的变量——a、b、c、d、e，也尝试使用尽可能小的十进制类型。这些都不起作用。该程序的目的是找到至少 3 个所提供数字之间的最小多数除数。即 1、2、3、4、5 的最小除数是 4，因为它可以被 4、2 和 1 整除。数字在 1 到 100 的范围内。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:13:23.967

当我运行这个时，输入 = 1、2、3、4、5 的执行时间为 0.0024 毫秒——*如果*我将计时代码移到`ReadLine`循环之后。我的电脑可能比你的快很多，但我无法想象即使你在 Speak-n-Spell 上运行它也会超过 0.25 秒。

定时用户输入简直是疯狂的。如果这是由外部事物定时的，**您确定输入应该逐行读取，而不是通过命令行传递吗？**

# php - Laravel 中的环境驱动数据库设置？

> ID：13860283
> 
> 赞同：46
> 
> 时间：2012-12-13T12:53:49.403
> 
> 标签：php, database, environment, laravel

我正在迁移 Laravel 框架，但我在数据库设置方面遇到了问题，

具体来说，我设置了我的环境，它们在 application.php 配置文件中运行良好，但是 database.php 配置文件似乎没有效果。

即使我的环境文件夹中有一个 database.php 配置文件，它也永远不会加载，我将一堆无效字符（键盘混搭）放入文件中以使 php 抛出错误，但它永远不会被命中。

Laravel 不支持基于环境的数据库设置吗？还是我做错了？

* * *

## 回答 #1

> 赞同：64
> 
> 时间：2012-12-14T02:22:26.860

您绝对可以按环境设置数据库设置（和任何其他配置设置）。

**对于 Laravel 3（对于 Laravel 4 和 Laravel 5，请参见下文）：**

首先 - 你需要`$environments`在你的定义`paths.php`并将其设置为这样的：

```
$environments = array(
  'development' => array('*.dev'),
  'production' => array('*.com'),
); 
```

Laravel 会*自动*寻找这个变量，如果设置了，将使用相关的配置。

通常，您有一个`config`文件夹，其中包含诸如`database.php`和`auth.php`

`Laravel_Env`现在只需为您计划使用的每个文件夹（例如 Development）创建一个新文件夹。你最终会得到这样的文件夹结构；

```
/application
  /config
    /development
      database.php
    /production
      database.php
    application.php
    config.php
    database.php
    ...
    user_agents.php 
```

你会注意到我只包含`database.php`在每个子文件夹中。Laravel 将始终首先加载默认配置设置，然后使用环境设置中的任何自定义配置覆盖它们。

最后，在你的开发/数据库文件中，你会有这样的东西；

```
<?php
 return array(
'default' => 'mysql'
 ); 
```

*ps 我刚刚在 Laravel 的当前 3.2.12 版本上测试了这个——它确实有效。*

**额外提示：**您还可以为 Artisan 自动设置环境，因此您不必在每个命令行中手动包含环境！去做这个：

1.  您需要知道运行 Artisan 的“主机名”。要找出答案 - 暂时`artisan.php`在您的根文件夹中编辑，并添加`var_dump(gethostname());`到第 2 行（即在所有内容之上）。

2.  `php artisan`从命令行运行。您将获得一个带有您的主机名的字符串转储。就我而言，它是“TSE-Win7”；

3.  删除对`artisan.php`文件的更改

4.  将您的主机名（即“TSE-Win7”）添加到环境中。

你应该得到这样的结果：

```
$environments = array(
  'development' => array('*.dev', 'TSE-Win7'),
  'production' => array('*.com'),
); 
```

Artisan 现在将使用您的开发环境运行。如果您部署到实时服务器 - 重新运行这些步骤以获取服务器的主机名（），您可以仅为服务器配置特定的工匠配置！

**对于 Laravel 4：**

默认环境始终为`production`. 但是在您的**start.php**文件中，您可以定义其他环境。

```
 $env = $app->detectEnvironment(array(
   'local' => array('your-machine-name'),
)); 
```

在 Linux 和 Mac 上，您可以在终端中确定您`hostname`的类型`hostname`- 它会输出您的计算机名称。在 Windows`dd(gethostname());`上，放在文件的开头`routes.php`- 并运行网站一次 - 它会显示您计算机的当前主机名。

**要将当前环境作为应用程序中的变量**- 请在此处阅读此 SO 答案。[Laravel 4：如何获取环境值？](https://stackoverflow.com/q/14935846/1317935)

**对于 Laravel 5：**

有一个配置文件，`.env`在您的根目录中调用。 [观看此 laracast](https://laracasts.com/series/laravel-5-fundamentals/episodes/6)，配置充分解释。

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-12-15T14:02:22.360

如果您使用的是工匠（laravel 的命令行），则需要添加的每个命令

```
artisan bla bla bla --env=Development 
```

或者

```
artisan bla bla bla --env=Production 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2014-02-07T01:49:06.653

下面是我如何根据需要设置它。

我个人需要 4 种不同的配置：

1.  本地主机 (Mac OSX) - /Library/WebServer/Documents/www/my-domain.com/development/
2.  dev.my-domain.com (VPS) - /var/www/my-domain.com/development/
3.  test.my-domain.com (VPS) - /var/www/my-domain.com/test/
4.  my-domain.com (VPS) - /var/www/my-domain.com/web/

由于我的所有 4 个环境都有不同的目录结构，我可以使用 php 的魔术常量**__DIR__**来获取应用程序目录，然后使用**strpos()**函数进行简单检查并返回适当的环境。它还将处理 Artisan 环境，无需手动输入环境或添加任何机器名称。

在 - 的里面

> 引导程序/start.php

添加回调函数

```
$env = $app->detectEnvironment(function(){

  $haystack = __DIR__; // Catch the directory path

  // Set the booleans (remove the first '/', else strpos() will return 0)
  $isLocal       = strpos($haystack, 'Library/WebServer/Documents/www/my-domain.com/development/');
  $isDevelopment = strpos($haystack, 'var/www/my-domain.com/development/');
  $isTest        = strpos($haystack, 'var/www/my-domain.com/test/');
  $isProduction  = strpos($haystack, 'var/www/my-domain.com/web/');

  // Set the environments
  if ($isLocal)       $environment = "local";
  if ($isDevelopment) $environment = "development";
  if ($isTest)        $environment = "test";
  if ($isProduction)  $environment = "production";

  // Return the appropriate environment
  return $environment
}); 
```

## 另一种选择

我们还可以一次将所有值设置并抓取到一个数组中，然后运行一个 foreach 循环。

**提示：**由于我们使用**strpos()函数，该函数根据****$haystack**检查给定值第一次出现的位置，并返回位置编号。我们实际上不必提供整个路径，我们可以简单地从每条路径中添加一个独特的值来完成工作。

```
// Check the boolean, if true set to given value, else set NULL
$environments[] = strpos($haystack, "Library") ? 'local'      : NULL;
$environments[] = strpos($haystack, "develop") ? 'development': NULL;
$environments[] = strpos($haystack, "test")    ? 'test'       : NULL;
$environments[] = strpos($haystack, "web")     ? 'production' : NULL;

// Loop through each, if not null then we have our environment
foreach ($environments as $environment) {
     if(!is_null($environment))
     return $environment;
} 
```

无论我们是在一台机器还是多台机器上工作，通过相同路径到达不同环境的可能性非常小。

或者我认为。:)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2014-04-10T04:07:58.167

### 拉拉维尔 5

使用[Laravel 文档中详述的](http://laravel.com/docs/5.1#environment-configuration)[DotEnv](https://github.com/vlucas/phpdotenv)方法。

### 拉拉维尔 4

我们正在使用本[Laracasts 课程](https://laracasts.com/lessons/environments-and-configuration)中推荐的方法 Jeffrey Way 。

*   [为每个环境](http://laravel.com/docs/configuration#environment-configuration)创建`config`目录。

    ```
    /app
        /config
            /local
                database.php
            /production
                database.php 
    ```

*   在生产服务器上设置环境变量。谷歌为您的生产平台上的最佳方法。例如，这里是对[Ubuntu](https://stackoverflow.com/questions/2655641/set-environment-variable-in-ubuntu)、[Dreamhost](http://wiki.dreamhost.com/Environment_Setup)和[Heroku](https://devcenter.heroku.com/articles/config-vars)的很好的建议。我们添加了一行`/etc/environment`：

    ```
    ENV=production 
    ```

*   将此闭包添加到`/bootstrap/start.php`. 使用此设置，任何缺少`ENV`环境变量的服务器都将默认为`local`环境配置。

    ```
    $env = $app->detectEnvironment(
        function () {
            return getenv('ENV') ? : 'local';
        }
    ); 
    ```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-02-03T23:01:04.350

**[如何设置环境特定的配置](http://laravel.com/docs/configuration#environment-configuration)**现在在官方 Laravel 文档中。我建议使用他们的方法而不是接受的答案：

> 根据应用程序运行的环境设置不同的配置值通常很有帮助。例如，您可能希望在本地开发机器上使用与生产服务器上不同的缓存驱动程序。使用基于环境的配置很容易做到这一点。
> 
> 只需在 config 目录中创建一个与您的环境名称匹配的文件夹，例如 local。接下来，创建您希望覆盖的配置文件并指定该环境的选项。例如，要覆盖本地环境的缓存驱动程序，您可以在 app/config/local 中创建一个 cache.php 文件，其内容如下：

```
<?php    
return array(    
    'driver' => 'file',    
); 
```

> 注意：不要使用“测试”作为环境名称。这是为单元测试保留的。请注意，您不必指定基本配置文件中的每个选项，而只需指定您希望覆盖的选项。环境配置文件将“级联”在基础文件之上。
> 
> 接下来，我们需要指示框架如何确定它在哪个环境中运行。默认环境始终是生产环境。但是，您可以在安装根目录的 bootstrap/start.php 文件中设置其他环境。在此文件中，您将找到一个 $app->detectEnvironment 调用。传递给此方法的数组用于确定当前环境。您可以根据需要将其他环境和机器名称添加到阵列中。

```
<?php

$env = $app->detectEnvironment(array(    
    'local' => array('your-machine-name'),    
)); 
```

> 在此示例中，“local”是环境名称，“your-machine-name”是服务器的主机名。在 Linux 和 Mac 上，您可以使用 hostname 终端命令确定您的主机名。
> 
> 如果您需要更灵活的环境检测，您可以将 Closure 传递给 detectEnvironment 方法，让您可以随心所欲地实现环境检测：

```
$env = $app->detectEnvironment(function()
{ 
    $domain = explode('.', $_SERVER['HTTP_HOST']);
    switch($domain[0])
    {
        case 'localhost':
        case 'localhost:8080':                
        case 'dev':
            return 'development';
            break;
        case 'mysite':
        default:
            return 'production';
            break;
    }
}); 
```

> 您可以通过 environment 方法访问当前的应用程序环境：
> 
> 访问当前应用环境

```
$environment = App::environment(); 
```

> 您还可以将参数传递给 environment 方法以检查环境是否与给定值匹配：

```
if (App::environment('local'))
{
    // The environment is local
}

if (App::environment('local', 'staging'))
{
    // The environment is either local OR staging...
} 
```

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2014-06-26T15:20:31.137

我今天一直在努力解决这个问题，努力找出如何最好地为数据库进行环境设置。最后，在尝试了几种方法之后，我完全同意@troy-harvey 的观点，即 Jeffrey Way 的建议是最好的（至少对我来说）。我要补充的一件事是（*如果我错了，请纠正我*），您需要通过相应的环境设置文件访问您试图在环境设置文件中覆盖的设置数组键。我开始返回一个简单的数组：

```
return [
    'database' => '<db_name>',
    'username' => '<db_user>',
    'password' => '<db_pass>',
]; 
```

在一个`app/config/staging/database.php`. 这没有任何效果，并且在头疼之后意识到您需要访问数组，因为它显示在 中`app/config/database.php`，如下所示：

```
<?php

return [
'connections' => [
    'mysql' => [
        'database' => '<db_name>',
        'username' => '<db_user>',
        'password' => '<db_pass>'
    ]
  ]
]; 
```

至少这就是我最终设法获得我的设置的方式。

在这里添加这个，以防其他人正在努力解决这个问题。当我意识到我犯了一个多么明显的错误时，我明白了。

2014 年 7 月 1 日编辑

对此的补充说明是，从 4.1 开始，Laravel 附带了一个 append_config() 辅助函数，用于将环境配置附加到主配置数组。

对于上面给出的示例，这看起来像这样：

```
<?php

return append_config([
     'connections' => [
        'mysql' => [
             'database' => '<db_name>',
             'username' => '<db_user>',
             'password' => '<db_pass>'
        ]
      ]
   ]); 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-04-08T16:19:27.427

如果您尝试在 Windows 环境中使用 Laravel，请查看 Laravel 项目顶级文件夹中文件 .env 中的设置 - 这些将覆盖您在 config/database.php 中的任何数据库设置

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2014-07-10T18:30:02.577

在 Laravel 3 中检测环境是：

```
Request:env() 
```

这将返回在 paths.php 文件中找到的环境数组中标识的任何内容。

正如之前在 Laravel 4 中提到的，现在是：

```
App:: environment() 
```

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2014-09-23T13:28:06.780

我的做法！

```
$env = $app->detectEnvironment( function() {
    if ( file_exists('../.env.local.php') ) {
        return 'local';
    }
    if ( file_exists('../.env.beta.php') ) {
        return 'beta';
    }
    return 'production';
} ); 
```

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-08-18T15:28:48.310

如果你在 Laravel 4 上，[这里有一个要点](https://gist.github.com/TechyTimo/099ec8eba3b119e8ceae)，它将带你一步一步地完成整个过程。感谢@“The Shift Exchange”的回答，指导我创建它。

# facebook - Graph API Explorer 返回不同的数据

> ID：13860285
> 
> 赞同：3
> 
> 时间：2012-12-13T12:53:53.600
> 
> 标签：facebook, facebook-graph-api, permissions, facebook-fql, checkin

如果我查询以下 FQL 语句：

```
SELECT checkin_id, author_uid, page_id FROM checkin WHERE page_id ='PAGE_ID' 
```

Graph API Explorer 向我返回了正确的结果，在我的例子中，有 3 位朋友签到了该页面。

但是，如果我在我的移动 android 应用上以相同权限对同一页面执行相同的语句，则只返回 1 个朋友的签到。但是，我已经为此查询设置了所有需要的权限。如果我使用 Graph API Explorer 生成的令牌并在我的应用程序中手动设置它，则会返回正确的结果。

最后，我使用访问令牌调试器比较了 Graph API Explorer 和应用令牌，结果如下：

APP令牌权限：

**范围**：create_note、friends_likes、friends_status、photo_upload、publish_actions、publish_stream、read_friendlists、read_stream、share_item、status_update、user_activities、user_likes、user_status、video_upload

Graph API Explorer 令牌权限：

**范围**：friends_likes、friends_status、read_friendlists、read_stream、user_likes、user_status

所以我有点困惑。Facebook API 是否以不同的方式处理 Web 和移动查询？

谢谢和欢呼克里斯

# iphone - Core-Data 和 iCloud 限制每个实体的项目数 - 潜在的同步问题

> ID：13860290
> 
> 赞同：2
> 
> 时间：2012-12-13T12:54:26.610
> 
> 标签：iphone, ios, core-data, icloud, core-data-migration

我目前正在开发一个使用核心数据并希望使用 iCloud 的应用程序。我有一个问题 - 我的应用程序有一个配置文件实体，一切都属于它。

我想将此与 iCloud 同步，以便它也适用于他们的其他设备，例如 iPad。但是，我有一个问题，并在以下场景中进行了描述：

方案 1

用户将他们的 iPhone 用于我的应用程序。创建一个配置文件并使用它一段时间。然后他们得到一台 iPad，第一次在没有网络的情况下使用我的应用程序 - 该应用程序会提示他们创建个人资料。（用户这样做并没有真正想到我已经这样做了）。然后他们第二天通过网络打开应用程序 - 他们现在是我的个人资料实体中的 2 个对象，有效地用于同一个人。

我将如何解决这种情况？以下是一些想法，但我有点困惑从哪里继续

*   选项 1 是检查他们是否启用了 iCloud - 并提示他们以前使用过这个应用程序吗？
*   选项 2 观察配置文件对象并将两者合并在一起（冒险的举动）
*   选项 3 不要使用 iCloud -（真的不想这样做）

任何提示或想法都会很棒。

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:25:05.690

您可以通过使用可用于核心数据的删除方法来避免在配置文件实体中插入重复记录。在配置文件实体中插入数据之前调用删除，这将删除重复条目并插入新条目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-16T19:12:25.657

您真的希望能够处理＃2。除了您概述的场景之外，这两个设备还有其他各种不同步的方式。

也就是说，您可以在检测到两组竞争数据时，询问用户他们想要保留哪一组。不过，这对用户很不利——人们通常不喜欢做出涉及破坏一堆新创建的数据的选择。

# ldap - 用于检查属性和组成员的 LDAP 查询

> ID：13860298
> 
> 赞同：1
> 
> 时间：2012-12-13T12:54:47.587
> 
> 标签：ldap

我编写了一个 LDAP 查询来检查任何用户的属性和组成员身份。但它总是给出一个结果

IE

```
(&(&(objectClass=person)(uid=myuserid)(c=US)(|(department=IT)(department=HR)))(!(|(memberof=cn=group1,ou=Groups,dn=pwcglobal,dn=com)(memberof=cn=group2,ou=Groups,dn=pwcglobal,dn=com)))) 
```

在此查询中，我需要检查此用户是否属于某个国家/地区，是否属于任何一个部门，并且不是任何给定组的成员。

但是有了这个我仍然得到结果，即使用户是第 2 组的一部分

请帮忙

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:50:09.393

假设“myuserid”是一个变量，那么您的问题可能是用户间接地是 group2 的成员。也就是说myuserid是group3的成员，group3是group2的成员。memberOf 参数不递归搜索。Microsoft 的 Active Directory 具有[`LDAP_MATCHING_RULE_IN_CHAIN`](http://msdn.microsoft.com/en-us/library/windows/desktop/aa746475%28v=vs.85%29.aspx)递归搜索过滤器。我不知道递归搜索适用于所有 LDAP 服务器的过滤器。

# c# - 如何从 ASP.NET 中的静态 C# 读取网页值？

> ID：13860299
> 
> 赞同：-1
> 
> 时间：2012-12-13T12:54:55.273
> 
> 标签：c#, asp.net, static, webmethod

我正在尝试使用 AJAX 从 C# 中的静态函数读取网页上字段的值。我的问题是：我必须在 C# 部分中使用哪一行代码从具有 runat="server" 标记的 HTML 输入中读取数据？

这是字段：

```
<script>
    function readfield() {
        PageMethods.readfield(readfieldc);
    }
    function readfieldc(texte) {
        alert(texte);
    }
</script>
<asp:label id="myfield" runat="server" />
<input type="button" onclick="readfield()" value="submit" /> 
```

和 C# 代码：

```
[Webmethod()]
public static void readfield()
{
    return Request["myfield"]; //This line is what I want to achieve
} 
```

我实际上不知道要使用什么代码来执行此操作

帮助将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T12:59:53.780

如果这只是使用标准回发，那么您应该能够使用 Response.Forms （使用当前创建输入的方式）

```
var myField = Request.Form["myField"]; 
```

如果您使用客户端（通过 JavaScript）使用它并想将它传递给 web 方法，我会读到这个：

[http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/](http://encosia.com/using-jquery-to-directly-call-aspnet-ajax-page-methods/)

您还可以添加 runat="server"

```
<input name="myfield" id="myfield" value="" runat="server" /> 
```

或使该字段完全成为服务器端控件

```
<asp:TextBox id="myField" runat="server"/> 
```

然后在你的函数中你可以访问它：

```
public static void readfield()
{
    var myValue = myValue.text;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:00:33.683

试试下面的例子，它应该解释你想要达到的目标。你想要达到的目标不是 100% 清楚，但我觉得这个链接应该有帮助。这应该计入 Web 服务中的静态或普通方法。

[Asp.net WebService 或 在asp.net 中创建和使用WebService 或 在asp.net 中创建和调用webservice 或如何创建webservice 以及如何在asp.net 中使用webservice](http://www.aspdotnet-suresh.com/2011/05/aspnet-web-service-or-creating-and.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T12:59:27.203

您需要添加`runat="server"`：

```
<input name="myfield" id="myfield" value="" runat="server"/> 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-05-13T19:23:29.163

我最终使用了 JQuery serializeArray 正是这样做的

# android - Facebook FQL 设备阵列是如何填充的？

> ID：13860301
> 
> 赞同：1
> 
> 时间：2012-12-13T12:55:00.733
> 
> 标签：android, facebook, facebook-fql, facebook-android-sdk

我正在使用 facebook 测试 Android 应用程序的邀请，所以我想邀请所有拥有 Android 手机的用户，因为另一个问题非常有用：[如何在 FQL 查询中使用用户表的设备字段？](https://stackoverflow.com/questions/11684865/how-to-use-devices-field-of-the-user-table-in-fql-query)

问题是尝试设置一个测试帐户。

*   我有一个 facebook*测试*帐户
*   这个帐户是我普通 Facebook 帐户的朋友
*   我已在手机中使用 facebook 登录（Android，但不确定是否重要）
*   我已经通过电话发布了一些状态更新。

尽管如此，当我查询该用户时，该用户仍显示一个空的“设备”字段（使用 Graph explorer [http://developers.facebook.com/tools/explorer](http://developers.facebook.com/tools/explorer)查询）

关于这个数组如何或何时填充/更新的任何想法？

更多细节。

从 Android 版 Facebook 发帖时，您的帖子显示为“移动版”，这*可能*意味着 Android 版和 iOS 版的应用程序密钥相同。可惜，这可能是区分它们的一种非常简单的方法。

*然后，由于他们有时*可以为您提供硬件信息（尽管我从未在 Android 上看到过）我认为在访问移动网络时可能会从浏览器的用户代理中读取它，所以我尝试了一下。同样，此朋友的设备字段保持空白。

我在填充设备字段方面尝试过的事情没有成功

*   登录安卓应用
*   喜欢来自 Android 应用程序的项目
*   从 Android 应用发布状态更新
*   在 Android (Nexus One) 上通过移动网络登录
*   在 Android (Nexus One) 上点赞来自移动网络的项目
*   在 Android (Nexus One) 上从移动网络发布状态更新
*   通过 Facebook SSO 登录 Android 游戏（只是出于绝望尝试）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:10:03.240

devices 数组 包含字段 os 的对象数组，其值可能是“iOS”或“Android”，以及一个附加字段 hardware，其值可能是“iPad”或“iPhone”（如果存在）。但是，如果我们无法确定确切的硬件型号并且只能确定操作系统，则硬件可能不会退回

我已经在自己的帐户上测试过，我的设备没有定义，但我使用的是 ipad，我的 3 个朋友在 android 上，2 个在 IOS 上。所以我认为，那个 fb 并没有清楚地确定设备

# c# - 如何创建用于处理异步数据传输的包装器？

> ID：13860303
> 
> 赞同：1
> 
> 时间：2012-12-13T12:55:01.250
> 
> 标签：c#, windows-phone-7, asynchronous

我正在尝试为我的项目创建一个异步包装器，以便我可以整理我的代码，而不是为我与服务器来回发送的对象一遍又一遍地编写相同的代码。

我打算使用 protobuf，但为了这个线程，我已将对象更改为字符串。

我的曼波舞代码：

```
 public class AsyncWrapper
    {
        public void Run(Uri url, string requestString, string responseString, WebHeaderCollection headerCollection)
        {
            var request = (HttpWebRequest)WebRequest.Create(url);
            request.Method = "POST";
            request.Headers = headerCollection;
            request.BeginGetRequestStream((s) => 
            {
                var req = (HttpWebRequest)s.AsyncState;
                var str = req.EndGetRequestStream(s);

                System.Text.UnicodeEncoding encoding = new System.Text.UnicodeEncoding();
                Byte[] bytes = encoding.GetBytes(responseString);

                str.Write(bytes, 0, bytes.Length);
                str.Close();

                req.BeginGetResponse((k) => 
                {
                    var req2 = (HttpWebRequest)k.AsyncState;
                    var resp = (HttpWebResponse)req2.EndGetResponse(k);

                    byte[] bytes2 = ReadFully(resp.GetResponseStream());

                    string res = System.Text.Encoding.Unicode.GetString(bytes2);

                }, req);

            }, null);
        }

        private static byte[] ReadFully(Stream input)
        {
            byte[] buffer = new byte[1024];
            using (MemoryStream ms = new MemoryStream())
            {
                int read;
                while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
                {
                    ms.Write(buffer, 0, read);
                }
                return ms.ToArray();
            }
        }
    } 
```

我要做的是创建一个函数，它包含与服务器通信的“两步”方式的整个过程：首先是初始请求，然后是响应。

我在正确的道路上吗？我错过了一个关键部分；事件处理。计划是发起一个事件，`string res = System...`让应用程序知道工作已经完成。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:04:56.077

如果我理解正确，您想将长同步操作转换为异步操作。你可以用线程来做到这一点：

```
public class AsyncWrapper
{
    public event Action<string> RunCompleted;

    public void Run(Uri url, string requestString, string responseString, WebHeaderCollection headerCollection)
    {
        Thread thread = new Thread(new ParameterizedThreadStart(RunThread));

        thread.start(new [] { url, requestString, responseString, headerCollection });
    }

    public void RunThread(object Obj)
    {
        object[] ObjArray = (object[])Obj;

        Uri url = (Uri)ObjArray[0];
        string requestString = (string)ObjArray[1];
        string responseString = (string)ObjArray[2];
        WebHeaderCollection headerCollection = (WebHeaderCollection)ObjArray[3];

        var request = (HttpWebRequest)WebRequest.Create(url);
        request.Method = "POST";
        request.Headers = headerCollection;
        request.BeginGetRequestStream((s) => 
        {
            var req = (HttpWebRequest)s.AsyncState;
            var str = req.EndGetRequestStream(s);

            System.Text.UnicodeEncoding encoding = new System.Text.UnicodeEncoding();
            Byte[] bytes = encoding.GetBytes(responseString);

            str.Write(bytes, 0, bytes.Length);
            str.Close();

            req.BeginGetResponse((k) => 
            {
                var req2 = (HttpWebRequest)k.AsyncState;
                var resp = (HttpWebResponse)req2.EndGetResponse(k);

                byte[] bytes2 = ReadFully(resp.GetResponseStream());

                string res = System.Text.Encoding.Unicode.GetString(bytes2);

            }, req);

        }, null);

        if (RunComleted != null)
        {
            RunCompleted(res);
        }
    }

    private static byte[] ReadFully(Stream input)
    {
        byte[] buffer = new byte[1024];
        using (MemoryStream ms = new MemoryStream())
        {
            int read;
            while ((read = input.Read(buffer, 0, buffer.Length)) > 0)
            {
                ms.Write(buffer, 0, read);
            }
            return ms.ToArray();
        }
    }
} 
```

# wordpress - wp-cli update 插件更新部署流程

> ID：13860307
> 
> 赞同：1
> 
> 时间：2012-12-13T12:55:18.367
> 
> 标签：wordpress, git

到目前为止，对[wp-cli](http://wp-cli.org/)非常满意。一个问题：我似乎无法在本地更新插件，将更改提交到远程仓库并在远程服务器上看到插件状态已更新。这个部署过程对我（git 学习者）来说似乎是正确的，但在我看来，现在通过 wp-cli 或 GUI 更新插件也会导致数据库更改？这可以解释为什么部署更改的文件不会更改远程服务器上插件的状态。wp-cli 中是否存在我在部署插件更新后更新数据库的过程？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-13T17:38:31.510

插件更新列表存储在数据库中是正确的。

wp-cli 旨在在本地主机上工作。它不对远程站点进行任何更改。

# c# - asp.net c#逐行读取word文档

> ID：13860315
> 
> 赞同：1
> 
> 时间：2012-12-13T12:55:36.123
> 
> 标签：c#, asp.net

```
string line;
string path = UploadContacts.PostedFile.FileName;
var reader = new StreamReader(path);

while ((line = reader.ReadLine()) != null)
{
    var link = line;

    if (link != string.Empty)
    {
        // another functionality ;
    }
    Console.WriteLine(line);
} 
```

这`UploadContacts`是文件上传控件。我正在通过这个上传一个文档文件。我的目标是逐行阅读word文档并进入另一个功能，但它不起作用。

抛出异常`Could not find file 'C:\Program Files (x86)\Common Files\Microsoft Shared\DevServer\10.0\tr.docx'.`

有什么建议么？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2016-02-19T06:38:50.563

如果要逐行阅读，请使用以下代码：

```
// Loop through all lines in the document.

Application application = new Application();
Document document = application.Documents.Open("C:\\new folder\\word.docx");
                   String read = string.Empty;
        List<string> data = new List<string>();
        for (int i = 0; i < document.Paragraphs.Count; i++)
        {
            string temp = document.Paragraphs[i + 1].Range.Text.Trim();
            if (temp != string.Empty)
                data.Add(temp);
        }
        // Close word.
        application.Quit();` 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:33:52.750

该文件是在用户计算机上还是托管您的 Web 应用程序的服务器上？

既然您说用户正在上传文件，我得到的印象是用户正在他们的机器上选择路径。请记住，您的 c# 代码正在其他地方的服务器上执行。它不能直接访问用户机器（除非它在共享网络上）。

过去，当我需要让用户将文件上传到我的 Web 应用程序时，我使用了[plupload jquery 控件。](http://www.plupload.com/)与 mvc 一起使用非常简单。这是其他人的堆栈溢出问题，它将帮助您弄清楚如何使用它...[将 plupload 与 MVC3 一起使用](https://stackoverflow.com/questions/6094296/using-plupload-with-mvc3)

# ssh - 如何将 ssh 端口转发到我的机器上运行的虚拟机？

> ID：13860328
> 
> 赞同：2
> 
> 时间：2012-12-13T12:55:57.247
> 
> 标签：ssh, portforwarding

我有两台机器说A和B

在 BI 上有一个正在运行的虚拟机（比方说它的 VB）。不幸的是，VB 有一个无法更改的静态本地 IP 地址 (192.168.79.1)。

我可以通过以下方式成功地 ssh

A -> B B -> VB

我试图在 B（端口 7777）上设置 ssh 端口转发以转发到 VB（端口 22）。但不知何故它没有发生。

我应该使用 -L 还是 -R ？

我尝试了很多方法..

ssh -R 7777:192.168.79.1:22 root@192.168.79.1

ssh -L 7777:192.168.79.1:22 root@192.168.79.1

ssh -L 7777:192.168.79.1:22 -l root localhost

可能是我没有正确理解语法还是我错过了一些愚蠢的东西？

我想连接到 A->VB（通过 B 上的一些 xyz 端口）。请指导我如何设置。

顺便说一句，所有机器都需要用户名和密码。我还没有添加密钥（所以也请考虑一下）。

谢谢！！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T13:07:08.030

您寻址错误的主机来设置您的隧道。您尝试做的实际上不是端口转发，这通常是在防火墙级别完成的。相反，您尝试设置一个隧道以在系统 B 上的某个端口 xyz 下在 VB 上公开您的 ssh 服务器。为此，您必须通过 ssh 进入*该*系统 B，而不是进入 VB。所以是这样的：

```
ssh -L7777:192.168.79.1:22 some_user@<B> 
```

所以用户 'some_user' sshs 进入主机 B 并且在那里什么都不做（`<B>`必须用 Bs ip 地址或名称替换），除了他另外创建了一个'ssh 隧道'，你现在可以使用它来连接：

```
ssh root@<B>:7777 
```

试一试，您会发现您实际上正在登录 VB，因为您的请求以透明方式通过隧道传送到主机 VB 上的端口 22。所以B充当隧道中继。

但这对于日常使用来说有点烦人。考虑使用 iptables 在防火墙级别找到解决方案。这使您不必在使用之前创建 ssh 隧道。或者，也有诸如 plasmoids 之类的实用程序以更方便的方式设置 ssh 隧道。

# xcode - Xcode add Customize Font 会增加ipa文件大小

> ID：13860330
> 
> 赞同：0
> 
> 时间：2012-12-13T12:56:05.060
> 
> 标签：xcode, fonts, customization, filesize, ipa

我是 iPhone 开发的新手。我已经按照在线说明将自定义字体添加到 xcode 项目中（2 种不同的字体类型，每个文件大小为 2.4MB）。但我想知道，如果我同时添加两种字体，它会影响应用程序（或 ipa）的最终产品，并且会减慢整个应用程序的速度。

将大量带有我想要的字体的图像（例如带有字体的按钮图像等）放入应用程序或添加自定义字体会更好吗？

提前致谢 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:10:45.413

在您的应用程序中添加自定义字体不会降低其性能。但它肯定会增加应用程序包的大小。

关于你的第二个问题是否有图像而不是自定义字体，我建议你不要使用图像。添加自定义字体是一种完美的方式。

# sql-server - SSIS：“增量”导入？

> ID：13860331
> 
> 赞同：0
> 
> 时间：2012-12-13T12:56:08.737
> 
> 标签：sql-server, import, ssis, synchronization

我必须实现一个加载三个不同数据库、转换数据并将其结果加载到新 SQL 数据库中的进程。

我想到了 SSIS（SQL 服务器的集成服务）。这对我来说是完美的，但是：这个过程将在 6-8 个月内每晚运行。它必须只导入更改。

而且我不知道我是否可以使用 SSIS 做到这一点？

有大量数据要导入，所以我们希望这些数据增量更新（基于源数据库上的“ModifiedAt”列）。

所以：

1.  这可能吗（增量导入），如何？
2.  如果是：每天安排它的最佳方式是什么？
3.  如果不是：您能看到另一种方法，我不必从头开始编写所有程序吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:05:50.597

是的，@andyLeonard 有一个名为“[集成服务的阶梯](http://www.sqlservercentral.com/stairway/72494/)”的优秀系列我经常在答案中引用这一系列文章，因为它比尝试将 SSIS 标记的累积智慧串联在一个答案中要简洁得多。在该系列文章中，Andy 将向您介绍增量负载模式的各种不同。我认为这将使您清楚地了解如何构建导入。

您可以使用您的组织当前使用的任何计划工具来计划 SSIS 包。

*   SQL 代理 - SQL Server 的内置调度工具是组织的常用选项。很有可能您的 DBA 已经在使用它来处理诸如索引重建/重组等事情的调度。使用代理的一个优点是对于新手来说，它有一个专门用于运行 SSIS 包的步骤。并不是说启动 SSIS 包有那么复杂，但每一点都有帮助。

*   Windows 调度程序 - Windows 内置了一个可服务的调度程序（名字让我难以理解，`at`也许吧？）。如果您使用这种方法，我可能会建议您制作一个简单的批处理脚本来启动包，这样您可以确保手动启动包与调度程序运行的相同。

*   [Tidal](http://www.cisco.com/en/US/products/ps11092/index.html)我在哪里，我们使用 Tidal 来处理我们所有的工作调度。它并不便宜，但在我们试图跨大型机、unix 和 windows 环境协调活动的环境中，它是蜜蜂的膝盖。界面是一个糟糕透顶的java东西，我很想看到它在火灾中死去几次，但不要让这分散你对工具功能的注意力。

# websphere - 客户端调度程序？还是服务器端调度程序？

> ID：13860333
> 
> 赞同：0
> 
> 时间：2012-12-13T12:56:12.763
> 
> 标签：websphere, esb, scheduler

在我们公司，我们正在使用 ESB，我有一个关于调度的问题。我们有很多信息系统软件可以从一个到另一个交换数据。那么哪个是更好的主意呢？

客户端应用程序应该创建一个调度程序来导入数据？或者 WAS 应该创建一个导入/导出数据并在客户端触发功能的调度程序？

现在谢谢你！

# c - 使用 meschach 库构建应用程序时出现链接器错误

> ID：13860344
> 
> 赞同：2
> 
> 时间：2012-12-13T12:56:46.537
> 
> 标签：c, gcc, linker-errors, scons, meschach

当我尝试构建我的应用程序时，出现链接器错误`undefined reference to (..)`。所有未找到的函数都是从 meschach 库中导入的。我认为库已正确安装：

```
whereis libmeschach
libmeschach: /lib/libmeschach.so /usr/lib/libmeschach.so /lib64/libmeschach.so 
```

我的 SCons 文件：

```
import os
import sys
import functools

PROJECT_ROOT = os.path.curdir
doc_path = functools.partial(os.path.join, PROJECT_ROOT, 'doc')
src_path = functools.partial(os.path.join, PROJECT_ROOT, 'src')
out_path = functools.partial(os.path.join, PROJECT_ROOT, 'build')

cpp_flags = {
    'linux2' : '-Wall -Wextra -pedantic -fopenmp -O3',
    'win32'  : '/w /MD /openmp'
}

env = Environment(ENV=os.environ,CPPFLAGS=cpp_flags[sys.platform])    
env.VariantDir(variant_dir=out_path(),src_dir=src_path())

env.Program(target=out_path('cholesky'), source=Glob(out_path('*.cpp')), LIBS=['m']) 
```

我使用 Arch Linux 64 位。

编辑：我用 Makefile 替换了 SCons，但错误仍然存​​在：

```
CC=g++
CFLAGS=-c -Wall -Wextra -pedantic -I./externals/include
LIB=./externals/lib/meschach.a -lm

all: cholesky

cholesky: cholesky.o equation.o testing.o profiler.o parallelCholeskyTest.o matrix.o
$(CC) cholesky.o equation.o testing.o profiler.o parallelCholeskyTest.o matrix.o -o 
    main $(LIB)

 cholesky.o:
$(CC) $(CFLAGS) src/cholesky.cpp

 equation.o: matrix.o
$(CC) $(CFLAGS) src/equation.cpp

 matrix.o:
$(CC) $(CFLAGS) src/matrix.cpp

 testing.o:
$(CC) $(CFLAGS) src/testing.cpp

 profiler.o:
$(CC) $(CFLAGS) src/profiler.cpp

 parallelCholeskyTest.o:
$(CC) $(CFLAGS) src/parallelCholeskyTest.cpp 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T19:11:04.173

好的。我解决了。该库不能作为 C++ 库包含在内，您必须`#include`用`extern "C" { }`. 在这里您可以找到有关此问题的更多信息：[C-library not linking using gcc/g++](https://stackoverflow.com/questions/1068129/c-library-not-linking-using-gcc-g)

# extjs - ExtJS 4.1 如何动态创建带有网格的窗口

> ID：13860345
> 
> 赞同：3
> 
> 时间：2012-12-13T12:56:50.350
> 
> 标签：extjs, grid, extjs4, window

我是 ExtJS 的新用户，我有一个问题。

我有一家汽车商店，我创建了一个带有按钮的菜单，以按品牌或型号查看所有汽车。
现在我想显示一个带有网格面板的窗口，其中包含特定品牌/型号的所有汽车。实际上，当我创建按钮时，我会这样做：

```
var aCarButton = Ext.create('Ext.Button', {
    text: aTextButton,
    handler: function() {
        var aResultWindow = new ResultWindow(aTextButton, myCarStore, 'Brand', aBrandValue);
        aResultWindow.create();
    }
});
aMenuPanel.add(aCarButton); 
```

对于我的功能，我这样做：

```
function ResultWindow(aTitle, aStore, aFilter, aFilterValue) {
    this.myTitle = aTitle;
    this.myStore = aStore;
    this.myFilter = aFilter;
    this.myFilterValue = aFilterValue;
    this.myStore.filter(aFilter, aFilterValue); 
}

ResultWindow.prototype.create = function() {
    var grid = Ext.create('Ext.grid.Panel', {
        store: this.myStore,
        columns: [
            ...
        ]
    });
    var window = Ext.create('Ext.window.Window', {
        layout: 'fit',
        maximizable: true,
        title: this.myTitle,
        items: [ grid ],
        width: 1024,
        height: 768
    });
    window.show();
} 
```

首先，我不确定这是展示我想要的东西的最佳方式。
其次，我有一个按钮可以显示所有汽车（无过滤器），但需要大约 2 分钟才能显示我所有的 12000 条记录。

所以我的第一个问题是知道我显示我想要的内容的解决方案是否正确？
我的第二个问题是否可以更快地显示所有汽车？

PS：如果我犯了一些错误，对不起我的英语。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T13:33:53.777

这当然是一种方法，但我认为这不是在 Ext 中做到这一点的最佳方法，我会在以下几行中做一些事情：

```
var aCarButton = Ext.create('Ext.Button', {
text: aTextButton,
handler: function() {
        myCarStore.filter('Brand', aBrandvalue);
        var win = Ext.create("Ext.window.Window", {
            title: aTextButton,
            layout: 'fit',
            maximizable: true,
            width: 1024,
            height: 768,
            items:[{
                xtype: 'grid',
                store: myCarStore,
                columns: [
                    ...
                ]
            }]
        });
        win.show();
});
aMenuPanel.add(aCarButton); 
```

我只是为了示例而声明 Window 内联，我可能会选择包含网格的自定义 Window 和一些自定义函数来过滤网格，但是，要点：你不需要弄乱原型在这里，真的没有必要，如果你想要的只是控制你的窗口是如何创建的，那么`define`像这样：

```
Ext.define("CarsWindow", {
    extend: 'Ext.window.Window',
    items:[
        ...
    ],
    filterByBrand: function(brandValue){
        this.down('grid').getStore().filter('Brand', brandValue);
    },
    ...
}); 
```

然后您可以通过以下方式实例化它：

```
Ext.create("CarsWindow", { title: 'YourTitle', ...}).show(); 
```

对于您的第二个问题，有一种方法可以在 Ext 中显示大型数据集而不会损失太多性能，您可以设置`buffered: true`您的存储定义，然后在此调用“store.loadPage(1)”：[store.buffered](http://docs.sencha.com/ext-js/4-1/#!/api/Ext.data.Store-cfg-buffered)

希望有帮助。

# oracle - 索引不可用的奇怪行为 - oracle

> ID：13860356
> 
> 赞同：0
> 
> 时间：2012-12-13T12:57:45.807
> 
> 标签：oracle, indexing

我确实有一个很大的迁移过程，在这种情况下，它试图将一行插入一个具有主键约束和唯一索引的表中。在插入约束之前禁用（与 SQL 开发人员检查）并且索引被标记为不可用（与 SQL 开发人员再次检查）。但是仍然在插入时给出错误

```
01502\. 00000 -  "index '%s.%s' or partition of such index is in unusable state" 
```

所以我想尝试从 SQL 开发人员手动执行查询，结果仍然相同。我什至明确地尝试设置会话（和系统）跳过不可用的索引，像这样

```
BEGIN
EXECUTE IMMEDIATE 'ALTER SESSION SET SKIP_UNUSABLE_INDEXES = TRUE';
single row insert line
END; 
```

但仍然是同样的错误。我的理解是，如果禁用约束；索引不可用，我们跳过我们应该能够插入的不可用索引。这是正确的吗？我在这里错过了一些非常琐碎的事情吗？任何建议/帮助表示赞赏。

PS：甲骨文11.2.0.1.0

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:05:57.187

如果索引不是唯一的，您可以设置 SKIP_UNUSABLE_INDEXES = true 并且它应该可以工作。但是，在您的情况下，由于索引是唯一的，我认为您不能这样做。

[http://docs.oracle.com/cd/B28359_01/server.111/b28320/initparams229.htm](http://docs.oracle.com/cd/B28359_01/server.111/b28320/initparams229.htm)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T06:10:42.500

为具有不可用主键的所有行创建代理键。

# ios - 在 iOS6 中从左到右和从右到左查看 curl

> ID：13860357
> 
> 赞同：0
> 
> 时间：2012-12-13T12:57:46.610
> 
> 标签：ios, animation, curl

我必须从左到右卷曲一个视图，反之亦然，就像书页一样。我不知道请建议我....示例代码对我更有帮助...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:07:01.930

这仅适用于 iOS5 及更高版本，但对您来说可能没问题。看看[UIPageViewController](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIPageViewControllerClassReferenceClassRef/UIPageViewControllerClassReference.html)。我为你做所有的辛苦工作。该文档还包含一个示例项目的链接。

# javascript - html表单的`onsubmit`不起作用

> ID：13860359
> 
> 赞同：0
> 
> 时间：2012-12-13T12:57:58.377
> 
> 标签：javascript, forms, submit

html代码很简单：

```
<form onsubmit="submitAdvice(this);return false;">
    <input type="submit" value="submit" />
</form>​ 
```

和javascript代码：

```
function submitAdvice(f) {
    alert('submitting');
} 
```

但是当我单击`submit`按钮时，它不会 alert `submitting`，而是提交表单。

我不知道哪里错了。

PS：现场演示：http: [//jsfiddle.net/yc6cq/](http://jsfiddle.net/yc6cq/)

* * *

我刚刚找到原因，它是由jsfiddle引起的！

![在此处输入图像描述](../Images/9946e3ee1854a8654a7c3f847f2a6000.png)

请注意，它将`mootools 1.4.5`在`onLoad`事件中加载。如果我将其设置为，一切都会好起来的`no wrap`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T12:59:07.133

```
<form onsubmit="return submitAdvice(this);">
    <input type="submit" value="submit" />
</form>​

function submitAdvice(f) {
    alert('submitting');
    return false;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:00:21.903

尝试使用此表单语句

```
<form onsubmit=" return submitAdvice(this);"> 
```

[http://jsfiddle.net/T3Qae/](http://jsfiddle.net/T3Qae/)

# sql-server - 实体框架 - MVC 3 超时问题

> ID：13860360
> 
> 赞同：0
> 
> 时间：2012-12-13T12:58:01.700
> 
> 标签：sql-server, asp.net-mvc-3, entity-framework, visual-studio-2012

我的网站有问题。我对存储过程做了一个小改动。我已经在 SSMS 中测试了存储过程，然后更新了我的实体框架以返回我添加的两个新行。

但是现在当我加载包含存储过程的页面时，页面超时。我觉得这真的很奇怪。所以我在我的 SQL Server 上运行了一个 SQL Server Profiler，我真的很惊讶。

通过 Entry Framework exec [dbo].[zzz] @LogDate='2012-11-13 00:00:00',@UserID=1,@LocationID=76,@CategoryID=NULL 从 MVC 3 运行 - CPU 59469 - 读取101693134- 持续时间 - 60091

从 Profiler 复制执行语句并直接在 SSMS 中运行，我得到以下结果：

从 SSMS 运行 exec [dbo].[zzz] @LogDate='2012-11-13 00:00:00',@UserID=1,@LocationID=76,@CategoryID=NULL - CPU 47 - 读取 60185 - 持续时间 - 151

任何人都知道为什么我从同一个 SP 得到如此完全不同的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:48:44.000

没关系...想通了。实体框架，并没有真正为最后一个值传递空值。当我将以下行添加到存储过程中时，它开始在网站上运行：

```
IF(@CategoryID = '')
    SET @CategoryID = NULL 
```

当 SP 将其作为空字符串接收时，不确定为什么 Profiler 显示为 NULL。在代码中，我将它作为空值传递。

```
var dle = context.dEGet(ld,userID,lastLocationID,null).ToList(); 
```

# amazon-web-services - Amazon EC2 EBS 自动备份单行手动工作，但不是来自 cron

> ID：13860361
> 
> 赞同：9
> 
> 时间：2012-12-13T12:58:04.573
> 
> 标签：amazon-web-services, amazon-ec2, cron, backup

我正在尝试在 Amazon AWS 上为我的 EBS 实施自动备份系统。

当我将此命令运行为`ec2-user`：

```
/opt/aws/bin/ec2-create-snapshot --region us-east-1 -K /home/ec2-user/pk.pem -C /home/ec2-user/cert.pem -d "vol-******** snapshot" vol-******** 
```

一切正常。

但是，如果我将此行添加到`/etc/crontab`并重新启动`crond`服务：

```
15 12 * * * ec2-user /opt/aws/bin/ec2-create-snapshot --region us-east-1 -K /home/ec2-user/pk.pem -C /home/ec2-user/cert.pem -d "vol-******** snapshot" vol-******** 
```

那是行不通的。

我检查`var/log/cron`并有这一行，因此命令被执行：

```
Dec 13 12:15:01 ip-10-204-111-94 CROND[4201]: (ec2-user) CMD (/opt/aws/bin/ec2-create-snapshot --region us-east-1 -K /home/ec2-user/pk.pem -C /home/ec2-user/cert.pem -d "vol-******** snapshot" vol-******** ) 
```

你能帮我解决问题吗？

我猜是一些环境问题——也许是缺少一些变量。如果是这种情况，我不知道该怎么办。

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-14T01:03:04.150

您应该考虑利用 AWS 的新[IAM 角色](http://docs.amazonwebservices.com/IAM/latest/UserGuide/WorkingWithRoles.html)功能。本质上，您所做的是在 IAM 控制面板中创建一个新角色，然后为其分配创建快照的权限。您需要附加到角色的策略如下所示：

```
{
  "Statement": [
    {
      "Sid": "Stmt1355446824880",
      "Action": [
        "ec2:CreateSnapshot",
        "ec2:DescribeSnapshots",
        "ec2:DescribeVolumes"
      ],
      "Effect": "Allow",
      "Resource": "*"
    }
  ]
} 
```

然后，当您创建实例时，您在启动配置中定义 IAM 角色（它位于“高级设置”下）。效果是您的实例现在自动拥有创建快照的权限，您不必担心在实例的任何位置存储访问密钥或其他凭证。它可以通过 cron 正常工作。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-22T21:13:41.180

对于初学者，crontab 没有 $PATH，您还必须导出 EC2_HOME 和 JAVA_HOME。我建议您制作一个顶部有两个导出的脚本，然后调用创建快照。所以一个简单的

```
export EC2_HOME=your_ec2_home
export JAVA_HOME=your_java_home
/opt/aws/bin/ec2-create-snapshot --region us-east-1 -K /home/ec2-user/pk.pem -C /home/ec2-user/cert.pem -d "vol-******** snapshot" vol-******** 
```

根据经验，在脚本中包含备份过程通常是一个好习惯。您可以在以下链接中找到示例脚本： [https](https://forums.aws.amazon.com/message.jspa?messageID=350163) ://forums.aws.amazon.com/message.jspa?messageID=350163 。有许多可用的脚本是可定制的，并且大部分 ec2 功能都是自动化的。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-21T15:36:09.507

cron 日志显示 cron 正在执行命令，但没有明显效果。您知道 ec2-user 可以从 shell 运行命令。所以首先要确保 root 可以从 shell 成功运行这个命令：

```
sudo bash
/opt/aws/bin/ec2-create-snapshot --region us-east-1 -K /home/ec2-user/pk.pem -C /home/ec2-user/cert.pem -d "vol-******** snapshot" vol-******** 
```

如果这不起作用，那么问题不在于 cron，而是 ec2-user 和 root 帐户之间存在差异。我想这可能是基于权限的，但 root 非常强大。这可能是由于他们所处的环境不同。

当您以 ec2-user 身份运行该命令时，您可能会将 AWS_ACCESS_KEY 和 AWS_SECRET_KEY 环境变量设置为有效值。在这种情况下，ec2 命令行工具可能会使用它们并忽略 -K 和 -C 选项。使用 -K 和 -C 指定的凭据可能无效，但您不会知道，因为它们被忽略了。root 帐户具有不同的环境，可能没有这些变量的有效值。

这可能会发生，因为 Amazon 已弃用使用证书（-K 和 -C 选项）而不是访问密钥。请参阅[http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/SettingUp_CommandLine.html#set-aws-credentials](http://docs.amazonwebservices.com/AWSEC2/latest/UserGuide/SettingUp_CommandLine.html#set-aws-credentials)。

您可以通过查看从控制台运行命令时是否设置了这些变量来尝试测试该理论：

```
echo $AWS_ACCESS_KEY
echo $AWS_SECRET_KEY 
```

如果它们显示值，这可能是差异的原因。

要尝试的另一件事是将命令替换为具有有效访问密钥而不是证书的命令（-O 和 -W 参数而不是 -K 和 -C）。您可以通过 IAM 创建一个只能执行您想要的操作的用户，并将其凭证用于命令。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-01-19T09:45:38.030

在我的情况下，我必须导出更多变量，与 ec2-user 环境中的相同。

我定义了一个新的脚本 ec2-backup.sh 如下：

```
#!/bin/sh
export EC2_HOME=/opt/aws/apitools/ec2
export JAVA_HOME=/usr/lib/jvm/jre
export AWS_ACCESS_KEY=...
export AWS_SECRET_KEY=...
export PATH=/usr/local/bin:/bin:/usr/bin:/usr/local/sbin:/usr/sbin:/sbin:/opt/aws/bin:/home/ec2-user/bin
/home/ec2-user/aws-missing-tools-master/ec2-automate-backup/ec2-automate-backup.sh -v 'all volumes ' -n -r eu-west-1 -p -k 2 
```

然后从我的 cronjob 执行这个脚本。将作业输出发送到日志文件对调试非常有帮助：

```
0 0 * * * /home/ec2-user/ec2-backup.sh >> /home/ec2-user/cronoutput.txt 2>&1 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-07-25T08:37:57.023

CRON Env 使用简化的环境设置。所以并不是所有的环境变量都在这里设置。我们对 cronjob 也有同样的问题，就是缺少一些环境变量。

**我们不想要的是创建一个脚本来导出元素**，而是获取现有的环境变量，因为如果配置更改，这似乎不太容易出错。

我在这里找到了我的解决方案（很好地隐藏在最后一个答案中）： [AWS 帮助](https://forums.aws.amazon.com/thread.jspa?threadID=116826)

AWS EBS 的环境变量存储在以下文件中：`/opt/elasticbeanstalk/support/envvars`. 所以采购或阅读这个文件对我有用。在根 crontab 中，这可能如下所示：

```
30 2 * * * root . /opt/elasticbeanstalk/support/envvars && php /var/www/bin/some_command.php 
```

像这样，你：

*   只在一个地方维护你的环境变量（你的选择）
*   可以在任何需要的地方使用它们
*   始终使用相同的环境变量

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2012-12-18T23:01:05.547

尝试捕获 stdout/stderr ：

1）将命令移动到shell脚本并从cron调用shell命令，例如

```
15 12 * * * /home/someuser/some_script.sh >/home/someuser/some_script.cron 输出 2>&1

```

2) some_script.sh 的内容；确保设置了执行位

```
#!/bin/sh
/opt/aws/bin/ec2-create-snapshot --region us-east-1 -K /home/ec2-user/pk.pem -C /home/ec2-user/cert.pem -d "vol-* *******快照”卷-**********

```

# c++ - 如何从文件 C++ 中收集不同的变量类型

> ID：13860363
> 
> 赞同：0
> 
> 时间：2012-12-13T12:58:05.667
> 
> 标签：c++, char, type-conversion

我正在用 C++ 编写一个霍夫曼代码，现在我正在从文件中获取数据并且遇到了障碍。第一行我有一个字符串，我想把它当作一个字符串，我一点也不难做到。但是然后我必须取下 x 行数并将它们作为无符号字符，以便我可以使用它们。

如果我想将此表单提取为文件，我会输入什么？

ILaILbILrILcLd （想作为一个字符串）

3（3是它下面的#s的数量）

89（想把这 3 个作为无符号字符取出

207

88

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:28:56.950

正如耐克告诉我们的那样，去做吧：

```
// read the line:
std::string line1; 
std::getline(infile, line1);

// read the int:
int num;
infile >> num;
// probably want to sanity check `num` here

// define a place to store the chars
std::vector<char> chars;

// read the chars.
for (i=0; i<num; i++) {
    unsigned int temp;
    infile >> temp;
    chars.push_back(static_cast<unsigned char>(temp));
} 
```

在这种情况下它可能不会完成太多，但是在定义之后`chars`，您可以添加：`chars.reserve(num);`以避免重新分配`vector`s 内存。

# facebook - facebook 赞助的结果（预输入）成本始终为零

> ID：13860365
> 
> 赞同：1
> 
> 时间：2012-12-13T12:58:30.823
> 
> 标签：facebook, facebook-graph-api

当我定位一个活动并选择 page_type='typeahed' 时，我得到了覆盖面估算，但成本（CPM 和 CPC）为 0。
[关于赞助结果。](https://developers.facebook.com/docs/reference/ads-api/sponsored-results/)
为什么我没有收到费用？

**一个示例调用：**

```
https://graph.facebook.com/act_MY_AD_ACCOUNT_ID\/reachestimate?currency=USD&targeting_spec={"countries":["CA"],"page_types":["typeahead"]}&access_token=MY_ACCESS_TOKEN 
```

**一个示例响应：**

```
{
   "users": 20,
   "bid_estimations": [
      {
         "location": 3,
         "cpc_min": 0,
         "cpc_median": 0,
         "cpc_max": 0,
         "cpm_min": 0,
         "cpm_median": 0,
         "cpm_max": 0
      }
   ],
   "imp_estimates": [

   ],
   "data": {
      "users": 20,
      "bid_estimations": [
         {
            "location": 3,
            "cpc_min": 0,
            "cpc_median": 0,
            "cpc_max": 0,
            "cpm_min": 0,
            "cpm_median": 0,
            "cpm_max": 0
         }
      ],
      "imp_estimates": [

      ]
   }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T20:20:39.550

我们也遇到了同样的问题，但我注意到您没有发送“targeted_entities”，在您的情况下，这可能是问题所在。'targeting={ "countries": ["US"],"targeted_entities":[194699337231859, 5281959998],"page_types":["typeahead"]}'

# oracle - 将 SSIS 包部署到服务器时出现 ORA-12541 错误

> ID：13860367
> 
> 赞同：1
> 
> 时间：2012-12-13T12:58:30.547
> 
> 标签：oracle, ssis, oledb, ora-12541, dtexec

我正在使用以下连接字符串将 SSIS 连接到 Oracle OLEDB 连接..

`Data Source=Server_Name;User ID=U_Id;Password=Pwd;Provider=MSDAORA.1;`

它可以在我的机器上运行，但是当我在 SSIS 服务器上运行时使用`C:\Program Files (x86)\Microsoft SQL Server\100\DTS\Binn\DTExec`它会给我错误：`ORA-12541: tns: no listener`

我试着玩弄文件`tnsnames.ora`，但没有得到任何结果。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T23:48:36.737

在工作中，如果机器是 64 位机器，我们必须安装 64 位 oracle，然后安装 32 位 oracle 才能工作。

对我来说，这个链接在本地帮助 tnsnames 正常工作。[http://www.dba-oracle.com/t_windows_tnsnames.ora_file_location.htm](http://www.dba-oracle.com/t_windows_tnsnames.ora_file_location.htm)

确保系统变量具有 tnsnames.ora 的路径，否则应用程序似乎无法连接。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T23:27:27.600

您需要确定服务器上哪个 Oracle 安装目录安装了 Oracle 32 位驱动程序。Oracle 的安装程序似乎对此没有任何帮助 - 卸载该批次并重新开始通常更快。

您需要修复的 TNSNAMES.ORA 位于该 Oracle 32 位客户端安装下方的 NETWORK/ADMIN 子目录中。

我不敢相信这是 2012 年（几乎是 2013 年），我们仍在为此苦苦挣扎！

# matlab - 通过 SOM 进行聚类

> ID：13860371
> 
> 赞同：4
> 
> 时间：2012-12-13T12:58:41.970
> 
> 标签：matlab, cluster-analysis, som

我有 71 个属性和 17 个实例的数据。我想将它们分为六个组或类。我试过了`newsom( data, [ 6 6 ] )`。

结果如下图所示。我无法弄清楚集群的位置以及如何以编程方式找到它们？

* * *

![在此处输入图像描述](../Images/95d6231538e03d81ab75c8f98c531a1d.png) ![在此处输入图像描述](../Images/7e483d2547ae551bf55c6cc93b2da8a1.png)

我阅读了所有关于 SOM 的论文，但始终无法弄清楚如何获取这些集群中的集群和数据？所以，在你回复我的问题时也请注明。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:12:02.593

由于您的实例与地图节点的比例很高，因此您的节点在最终地图中没有“赢得”实例，您可以使用这些“空”节点分隔地图。在此处查看有关 som 聚类的更多信息：[Clustering of the Self-Organizing Map](http://lib.tkk.fi/Diss/2002/isbn951226093X/article4.pdf)

请记住，SOM 是一种无监督的聚类方法，即您不定义聚类的数量，数据会告诉您这一点。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:34:04.497

您必须仔细研究有关 newsom（当前已弃用）或 selforgmap 函数的返回结构的文档。在 IW 字段中，您可以找到 N*N 簇坐标。例如：

```
somnet = newsom( data, [ 6 6 ] )
my_clusters = somnet.IW; 
```

`myclusters`将有 N*N 行（在您的情况下为 6*6）和 M 列等于输入尺寸。就这样。

# objective-c - 从 NSDate 获取天数

> ID：13860373
> 
> 赞同：0
> 
> 时间：2012-12-13T12:58:46.307
> 
> 标签：objective-c, cocoa, cocoa-touch, date, nsdate

我需要从一个数字中获取星期几`NSDate`。

例如，如果今天是星期四，我应该得到 4 号，如果是星期五，那么我应该得到 5 号。

此功能是否已经存在？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T13:09:20.783

像这样使用`NSCalendar`：

```
NSCalendar *calObject = [NSCalendar currentCalendar];
NSDateComponents *comp = [calObject components:NSWeekdayCalendarUnit 
                                      fromDate:yourDateHere]; //provide date here

NSInteger day = [comp weekday]; //will return  1 = Sunday, 2 = Monday, etc. 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:09:04.393

正如文档中所说：[https ://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSCalendar_Class/Reference/NSCalendar.html)

采用：

```
NSCalendar * calendar = [NSCalendar  currentCalendar];
[calendar components:NSWeekdayCalendarUnit fromDate:date];
int weekday = [weekdayComponents weekday]; 
```

不过要小心，使用此代码，1 是星期日。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-12-13T13:12:30.550

~~根据您的要求，以下代码今天为您提供“4”，即 2012 年 12 月 13 日星期四~~

 ~~```
NSMutableDictionary *weeks=[NSMutableDictionary new];
[weeks setObject:@"1" forKey:@"Monday"];
[weeks setObject:@"2" forKey:@"Tuesday"];
[weeks setObject:@"3" forKey:@"Wednesday"];
[weeks setObject:@"4" forKey:@"Thursday"];
[weeks setObject:@"5" forKey:@"Friday"];
[weeks setObject:@"6" forKey:@"Saturday"];
[weeks setObject:@"7" forKey:@"Sunday"];

NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];
[dateFormatter setDateFormat:@"EEEE"];

NSLog(@"%@",[weeks objectForKey:[dateFormatter stringFromDate:[NSDate date]]]);//gives you 4 for today i.e. Thursday 13 Dec 2012 
```~~  ~~或者

有点棘手

```
NSCalendar *calender = [NSCalendar currentCalendar];
NSDateComponents *dateComponents = [calender components:NSWeekdayCalendarUnit fromDate:[NSDate date]];
NSInteger dayCount = [dateComponents weekday]-1;
if (dayCount==0) {//as sunday will become 0, you need 7.
    dayCount=7;
}
NSLog(@"Day count : %ld",dayCount); 
```~~

# php - Doctrine2：任意连接和单表继承

> ID：13860375
> 
> 赞同：11
> 
> 时间：2012-12-13T12:58:58.070
> 
> 标签：php, doctrine, doctrine-orm

[注意：这是项目问题跟踪器上报告](http://www.doctrine-project.org/jira/browse/DDC-2235)的 ORM 限制

我在使用**Doctrine 2.3**中引入的任意连接语法在作为层次结构根的实体类上构建*DQL查询时遇到问题。*

 **鉴于这些类：

> A - 没有继承
> 
> B1 - 抽象，层次结构的根，鉴别器列被命名为“类型”

我设置了一个这样的查询生成器：

```
$qb->select('a.id AS idA, b.id AS idB')
    ->from('\Entity\A', 'a')
    ->leftJoin('\Entity\B1', 'b', \Doctrine\ORM\Query\Expr\Join::WITH, 'a.something=b.something'); 
```

SQL Doctrine 生成的内容是这样的：

```
SELECT a.id, b.id FROM a LEFT JOIN b ON (a.something=b.something) WHERE b.type IN ('1', '2', '3') 
```

问题是 where 使**左连接**无用。

有没有办法强制将鉴别器列上的条件放在连接中？至少那会让它...

我应该填写错误报告吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-31T13:07:53.697

此错误已在 Doctrine 2.4 中修复

[https://github.com/doctrine/doctrine2/issues/2934](https://github.com/doctrine/doctrine2/issues/2934)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-02-14T09:53:52.653

您是否尝试过内部联接而不是左联接？您需要的查询可能

```
SELECT a.id, 
       b.id 
FROM   a 
       INNER JOIN b 
               ON ( a.something = b.something ) 
WHERE  b.type IN ( '1', '2', '3' ) 
```

您可以通过 join 更改函数 leftJoin，或使用 createQuery 方法创建查询以进行海关查询。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-09-25T08:32:55.007

试试这个

```
SELECT a.id, 
       b.id 
FROM   a 
       INNER JOIN b ON ( a.something = b.something ) and b.type IN ( '1', '2', '3' ) 
```**

# c# - 创建配置和安装 localDb 和 IIS 以及应用程序的 msi 或 exe

> ID：13860377
> 
> 赞同：3
> 
> 时间：2012-12-13T12:59:06.753
> 
> 标签：c#, asp.net-mvc, iis, deployment, windows-installer

我刚刚结束了需要在本地学校网络上运行的 Web 应用程序的开发。该应用程序是使用 MVC 4 框架在 ASP.NET 中编写的。它使用的数据库是本地数据库文件，必须复制并在本地服务器上运行。

该应用程序包含一个学校管理系统，将部署在一个发展中国家的许多中小学的本地服务器上，那里的 IT 人员对 IT 的熟练程度不高，而且设置过程很困难，结果可能是问题。为了简化此部署，我想创建一个 msi 包，其中还包含运行 DB 和 IIS 服务器的 SQL Server Express 的配置版本。我还可以制作一本关于如何安装所有这些东西的手册，但是 msi 或其他预打包的部署应该会让 IT 人员更容易部署。

是否可以这样做，如果可以，我可以用来捕获这些更改的最佳 msi 打包程序应该是什么？还有其他我应该考虑的方法吗？是否有任何其他方法可能比我打算使用的方法更容易或更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:24:06.227

您可以使用 Wix (http://wixtoolset.org/) 实现所有这些我们使用此工具来创建和播种数据库并在 IIS 中安装站点。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:21:27.900

如果您使用的是 VS2012，有一个 InstallShield 设置和部署项目可以满足您的需要。我自己没有看过它，所以我不知道它提供的全部范围。它看起来可以替代以前版本的 VS 中的 Setup and Deployment 项目，它可以满足您的大部分需求。

# excel - 了解 Excel 公式 - 日期差异与整数混合

> ID：13860382
> 
> 赞同：0
> 
> 时间：2012-12-13T12:59:13.587
> 
> 标签：excel, excel-formula

我有一个excel公式，比如

```
=IF(C4="","",(IF(C4<B1-211,"R",10))) 
```

C4 是适用的单元格

C4 包含一个**日期时间**，B1 也包含一个**日期时间**

但是，如果我没有得到**211 ，它的作用是什么。**

非常感谢任何帮助

**编辑** 示例：

C4 = 2011 年 11 月 15 日

B1 = 06/09/2012

我得到 10 的价值

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:07:54.380

Excel 将日期存储为自 Jan-1-0000 以来的天数。您实际上可以看到这一点：就`Clear Format`在任何日期单元格上。
因此，任何日期减 1 都会返回前一天。
在您的情况下，如果 C4 在（B1-211 天）之前，则返回“R”，否则显示 10。
看起来不太干净！-/

# javascript - JS - 安卓横向缩放

> ID：13860383
> 
> 赞同：2
> 
> 时间：2012-12-13T12:59:18.087
> 
> 标签：javascript, android, zooming, portrait

再会。

我正在编写一个 JS 函数，如果页面通过询问是否在 android 中放大，则返回 true `document.body.clientHeight < window.innerHeight`。

它可以工作，但是当更改为横向时，`document.body.clientHeight`不会更新，那么这个条件总是返回 true。

现在，我尝试用`clientHeight`其他窗口/正文属性替换，但它们要么不更新方向更改，要么在缩放页面时遗憾地改变。

我需要：

*   在方向更改时更新但在页面缩放时固定的属性
*   `isZoomed`适用于 android 2+的更简单功能

在此先感谢您的时间

# c# - 获取目录中用C#创建的最新文件

> ID：13860387
> 
> 赞同：0
> 
> 时间：2012-12-13T12:59:29.067
> 
> 标签：c#

特别是路径`d:\Input\UtilityLogs\`。我需要搜索创建的最新文件并获取文件名并将其存储为变量。我无法获得任何可以在 C# 2.0 中执行的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:23:43.877

请参阅[如何使用 .NET 在目录中查找最新文件且不循环？](https://stackoverflow.com/questions/1179970/c-sharp-find-most-recent-file-in-dir) 并订购`CreationTime`而不是`LastWriteTime`.

# ruby-on-rails - 如何在不改变分页的 Rails 中使用 Sunspot 随机化对象？

> ID：13860388
> 
> 赞同：0
> 
> 时间：2012-12-13T12:59:31.650
> 
> 标签：ruby-on-rails, ruby-on-rails-3.1, sunspot-solr, websolr

我们将 Sunspot Solr 与 Rails 3.1 应用程序一起使用。我们有一个正在搜索的位置模型。这是搜索的代码

```
location_search = Location.search do
  keywords params[:search][:keywords] if params[:search][:keywords].present?
  with :category_ids, category_id if category_id.present?

  unless params[:search][:keywords].present?
      order_by :premium, :desc
  end

  if params[:search][:sort].present?
    field, direction = params[:search][:sort].split('-')
  else
    order_by :score, :desc
    order_by :random
  end
  paginate :page => params[:search][:page], :per_page => per_page
end 
```

我的问题是如何让位置在结果中随机化，同时保持分页相同？意思是，我想对结果进行随机排序（不是按记录创建日期或名称），但我希望结果的第 2 页是相同的列表，即使我刷新页面（并将 2 传递给 params[:search][:page ]）。理想情况下，当前用户会话的顺序将保持不变。

这样做的原因是我们网站上的位置付费是溢价的，所以溢价结果应该排在第一位，但是那些不付费的人应该是随机的，所以我们不喜欢位置，因为它们的创建顺序或基于名称的顺序.

谢谢！非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-07-30T02:56:17.150

前段时间，我还在研究一个已配置为返回随机排序顺序的分页集合。我意识到因为 sunspot 总是向 Solr 发送一个随机种子值，所以我会在页面之间间歇性地收到重复的结果。为了解决这个问题，我认为能够在搜索时配置种子值很有用。

我认为最有意义的实现将保留现有的语法规范，同时还允许 order_by 函数使用新的参数类型。

例如

```
Model.search do
  order_by :random, :seed => 12345, :direction => :asc 
end 
```

我实现了这一点，并通过此拉取请求将其合并到`sunspot_rails`gem 的 master 中：[https ://github.com/sunspot/sunspot/pull/328](https://github.com/sunspot/sunspot/pull/328)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T19:45:15.047

您可以检索比需要大得多的页面，将其随机播放，然后将其缩小到合适的大小。也许是这样的（随机是 ruby​​ 1.9 类）：

```
SUPER_PAGE_MULTIPLIER = 5

location_search = Location.search do
  keywords params[:search][:keywords] if params[:search][:keywords].present?
  with :category_ids, category_id if category_id.present?

  unless params[:search][:keywords].present?
      order_by :premium, :desc
  end

  if params[:search][:sort].present?
    field, direction = params[:search][:sort].split('-')
  else
    order_by :score, :desc
    # order_by :random
  end
  paginate :page => params[:search][:page] / SUPER_PAGE_MULTIPLIER, :per_page => per_page * SUPER_PAGE_MULTIPLIER
end

session[:seed] ||= rand(100000)
rng = Random.new(session[:seed])

too_many_results = location_search.results
too_many_results.shuffle!(rng)

results = too_many_results.slice((params[:search][:page] % SUPER_PAGE_MULTIPLIER) * per_page, per_page) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2016-04-02T16:05:25.290

[您可以使用与我在此处回答的有关一致随机种子](https://stackoverflow.com/questions/2969158/rails-random-active-record-with-pagination/7999315#7999315)的相同技术。

太阳黑子支持使用随机种子。请参阅此处的文档：[https ://github.com/sunspot/sunspot/wiki/Ordering-and-pagination#pagination-with-random-ordering](https://github.com/sunspot/sunspot/wiki/Ordering-and-pagination#pagination-with-random-ordering)

因此，您要做的（有关详细信息，请参阅我的其他答案）是在用户会话中生成并存储一个随机数。然后将此数字用作随机检索方法的种子：

```
Sunspot.search(Post) do
  paginate(:page => 2, :per_page => 15)
  order_by(:random, :seed => session_specific_random_seed)
end 
```

# javascript - 使用 Chord Diagram 可视化通行流量数据

> ID：13860390
> 
> 赞同：1
> 
> 时间：2012-12-13T12:59:34.973
> 
> 标签：javascript, d3.js, visualization, data-visualization, chord-diagram

我有玩家之间的通行流量数据，[这是数据](https://www.dropbox.com/s/cqxj4wx2czi9j4e/J_H2S1T6_PassTraffic.csv)，第一列和第一行表示玩家编号。

我想像[Uber Rides](http://bost.ocks.org/mike/uberdata/)一样可视化这些数据。我认为它是用Bostock's 的[Chord Diagram构建的。](http://bl.ocks.org/4062006)

由于我几乎没有 JavaScript 方面的经验，我只是不知道从哪里开始。

我怎样才能实现这样的目标？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T15:27:24.587

这是我从你的数据中得到的

![在此处输入图像描述](../Images/3c36e5d62c95012c857dad94a7140410.png) 我刚刚用你的数组替换了矩阵数组

[2,3,1,0,0,2,0,6,5,2,5,0,3], [0,7,2,0,4,7,0,1,2,0,3 ,0,2], [0,0,4,1,5,3,3,0,1,1,5,1,0], [0,0,0,0,4,0,5,4 ,2,0,1,1,0], [0,0,0,0,0,0,0,3,2,0,1,0,1], [0,0,0,0,0 ,1,3,4,1,1,9,1,6], [0,0,0,0,0,0,0,1,3,0,1,1,1], [0,0 ,0,0,0,0,0,0,0,1,0,0,0], [0,0,0,0,0,0,0,0,5,5,5,0,8 ], [0,0,0,0,0,0,0,0,0,0,8,0,1], [0,0,0,0,0,0,0,0,0,0 ,2,0,0], [0,0,0,0,0,0,0,0,0,0,0,0,2], [0,0,0,0,0,0,0 ,0,0,0,0,0,2]

我并不是说这是正确的，只是让您了解如何通过人们已经完成的工作轻松实现这一目标。

# ios - 忽略 NSURLErrorDomain 错误 -999 在 UIWebView 中不起作用

> ID：13860401
> 
> 赞同：6
> 
> 时间：2012-12-13T13:00:11.697
> 
> 标签：ios, uiwebview

我试图避免在`UIWebView`的委托返回这样的错误时产生的问题。我的委托实现中有通用的解决方法（我在 Internet 的任何地方都看到过）

```
- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {

    if ([error code] == NSURLErrorCancelled) return;
} 
```

我遇到的问题是这并不总是有效。有时会加载网页，有时会加载网页的某些部分（标题、文本的一部分……），有时不会加载任何内容。

有没有其他解决方案？是否存在正常工作的浏览器的任何开源实现？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-17T21:27:28.673

来自苹果文档：

> NSURLErrorCancelled (-999)
> 
> “取消异步加载时返回。Web Kit 框架委托在对加载资源执行取消操作时会收到此错误。请注意，如果取消下载，NSURLConnection 或 NSURLDownload 委托将不会收到此错误。”

因此，最有可能发生这种情况的情况是，在第一个请求完成之前，您先加载一个请求，然后再加载另一个请求（或同一个请求）。这可能发生。例如，如果您在类似的方法中调用`loadRequest`（或`loadHTMLString`）`viewDidAppear:`，则可以多次调用。据报道，如果您快速点击`UIWebView`.

因此，一般建议是查看您调用`loadRequest`（或`loadHTMLString`）的方式和位置，并可能提供一些代码。

为了解决这个问题，我建议将以下跟踪添加到您的 Web 视图委托中：

```
- (void)webViewDidStartLoad:(UIWebView *)webView {
      NSLog(@"Starting to download request: %@", [webView.request.URL absoluteString]);
}

- (void)webViewDidFinishLoad:(UIWebView *)webView {
      NSLog(@"Finished downloading request: %@", [webView.request.URL absoluteString]);
}

- (void)webView:(UIWebView *)webView didFailLoadWithError:(NSError *)error {

    if ([error code] == NSURLErrorCancelled)
      NSLog(@"Canceled request: %@", [webView.request.URL absoluteString]);
} 
```

如果您检查输出，您应该更清楚地看到发生了什么。如果您粘贴输出，我们可以尝试进一步帮助您。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-23T14:29:59.450

大多数情况下，在使用 NSURLConnection 或 UIWebView 时，此错误是由于超时造成的。可能真的不是您的代码，而是您的连接性。

# php - 如何从 PhoneGaps 文件传输 API 检索 POST 数据

> ID：13860405
> 
> 赞同：12
> 
> 时间：2012-12-13T13:00:26.023
> 
> 标签：php, cordova, file-upload, slim

我正在使用 Phone Gaps (Cordova 2.1) 文件传输 API 将图像从用户照片库发布到我的服务器。文件传输 API 似乎工作正常。我只是对在我的服务器上检索此信息感到困惑。

理想情况下，我需要做的是检索图像然后将其上传到我的服务器。但是，我似乎无法从文件传输中检索任何信息？

我的 JavaScript 代码（发布图像数据）是：

```
function onDeviceReady() {

            // Retrieve image file location from specified source
            navigator.camera.getPicture(uploadPhoto,
                                        function(message) { alert('get picture failed'); },
                                        { quality: 50, 
                                        destinationType: navigator.camera.DestinationType.FILE_URI,
                                        sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY }
                                        );

        }

        function uploadPhoto(imageURI) {
            var options = new FileUploadOptions();
            options.fileKey="file";
            options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
            options.mimeType="image/jpeg";

            var params = {};
            params.value1 = "test";
            params.value2 = "param";

            options.params = params;

            var ft = new FileTransfer();
            ft.upload(imageURI, encodeURI("http://some.server.com/upload.php"), win, fail, options);
        }

        function win(r) {
            console.log("Code = " + r.responseCode);
            console.log("Response = " + r.response);
            console.log("Sent = " + r.bytesSent);
        }

        function fail(error) {
            alert("An error has occurred: Code = " + error.code);
            console.log("upload error source " + error.source);
            console.log("upload error target " + error.target);
        } 
```

我的服务器端代码是：

```
 $paramValue = $_POST['fileKey']; //Undefined variable
 $paramValue2 = $_POST['options']; //Undefined variable
$paramValue3 = $paramValue2['fileKey'] //Undefined variable 
```

我也试过：

```
//POST variable
$paramValue = $_POST['params'];
echo "Param Value1: " . $paramValue['value1']; //Should return "test" 
```

我也试过：

```
//POST variable
$paramValue = $_POST['options'];
echo "Param Value1: " . $paramValue['options']['params']['value1']; //Should return "test" 
```

我得到的只是未定义的变量错误？

任何帮助将不胜感激，谢谢！

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-12-21T15:04:29.527

在[http://some.server.com](http://some.server.com)你可以有你的`/var/www/`目录，在这个目录中你需要 upload.php 并且这个目录中的代码应该将你的图像移动到文件夹中

`/var/www/TEST/`

```
<?php
   print_r($_FILES);
   $new_image_name = "YEAH.jpg";
   move_uploaded_file($_FILES["file"]["tmp_name"], "/var/www/TEST/".$new_image_name);
?> 
```

这是您需要的唯一额外的东西。

先决条件：

[您的http://some.server.com](http://some.server.com)上的 XAMPP LAMP WAMP 或 MAMP

为了清楚起见，这是 JavaScript 和 HTML，只是为了向您展示我的 upload.php 文件如何适应：在您的脑海中

```
<script type="text/javascript" charset="utf-8">

// Wait for PhoneGap to load
document.addEventListener("deviceready", onDeviceReady, false);

// PhoneGap is ready
function onDeviceReady() {
    console.log("device ready");
    // Do cool things here...
}

function getImage() {
    // Retrieve image file location from specified source
    navigator.camera.getPicture(uploadPhoto, function(message) {
                alert('get picture failed');
            },{
                quality: 50,
                destinationType: navigator.camera.DestinationType.FILE_URI,
                sourceType: navigator.camera.PictureSourceType.PHOTOLIBRARY
            }
    );

}

function uploadPhoto(imageURI) {
    var options = new FileUploadOptions();
    options.fileKey="file";
    options.fileName=imageURI.substr(imageURI.lastIndexOf('/')+1);
    options.mimeType="image/jpeg";

    var params = new Object();
    params.value1 = "test";
    params.value2 = "param";

    options.params = params;
    options.chunkedMode = false;

    var ft = new FileTransfer();
    ft.upload(imageURI, "http://some.server.com/TEST/upload.php", win, fail, options);
}

function win(r) {
    console.log("Code = " + r.responseCode.toString()+"\n");
    console.log("Response = " + r.response.toString()+"\n");
    console.log("Sent = " + r.bytesSent.toString()+"\n");
    alert("Code Slayer!!!");
}

function fail(error) {
    alert("An error has occurred: Code = " + error.code);
}

</script>

</head> 
```

这就是我身体里的东西

```
<button onclick="getImage();">Upload a Photo</button> 
```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2013-05-20T22:49:42.907

另一件经常被忽视的事情：关于客户端 js 文件的这一部分：

```
options.fileKey="file"; 
```

必须在服务器端匹配此部分：

```
$_FILES["file"] 
```

否则，你会得到一个不指向这个事实的错误。这对某些人来说可能听起来很明显，但它可以为其他人节省一两个小时的拉毛时间。

* * *

## 回答 #3

> 赞同：10
> 
> 时间：2013-06-26T11:02:51.200

要访问参数值，请直接以 POST 的形式访问它们。例如

服务器端 ：`echo "Param Value1: " . $_POST['value1']; //will return "test" as output.`

# imagemagick - 在黑白图像上使用透明，使透明度反转

> ID：13860407
> 
> 赞同：0
> 
> 时间：2012-12-13T13:00:34.920
> 
> 标签：imagemagick, transparency, imagemagick-convert

我在转换时遇到了问题。

使用带有白色背景和黑色 QR 码的简单 QR 码，我不想让 ImageMagick 使白色透明。

为此，我尝试了这个：

```
/usr/bin/convert ./qr_original.png -transparent white ./qr_transparent.png 
```

此转换命令使黑色透明但保留白色背景。

**但是**尝试使用带有背景和红色/绿色/蓝色/任何 QR 码的 QR 码，转换命令可以正常工作 - 保留红色/绿色/蓝色/任何 QR 码并且白色背景变得透明。

怎么会？我怎样才能使它正常工作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:56:53.513

你的代码对我有用。也许更新你的imagemagick？

否则试试这个：

```
exec("convert ./qr_original.png -channel matte -fuzz 50%% -fill transparent -opaque white ./qr_transparent.png"); 
```

# java - 在 Eclipse Maven 项目中使用 Checker 框架

> ID：13860408
> 
> 赞同：0
> 
> 时间：2012-12-13T13:00:38.680
> 
> 标签：java, eclipse, maven, checker-framework

我想通过他们的[Eclipse Plugin](http://types.cs.washington.edu/checker-framework/checker-plugin/update-site/)使用 Checker Framework 。如果我有一个没有依赖项的项目，这似乎可以正常工作。

但是，当我尝试对我的 Maven 项目进行检查时，我收到了数百条警告，说：

`cannot find symbol`

在控制台中，我得到以下报告：

`"MainActivity.java:33: error: package de.my.dependency does not exist import de.my.dependency;"`

我假设 Eclipse Checker 插件无法解决 Maven 依赖项，我能做些什么来解决这个问题吗？

感谢帮助 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-18T18:48:14.093

您介意花点时间将有关您的项目设置的任何相关详细信息添加到以下问题： [checker-framework-185](http://code.google.com/p/checker-framework/issues/detail?id=185)

具体来说，您使用的是 m2eclipse 吗？你的设置有什么特别之处吗？

很抱歉延迟回复。将来获得 Checker Framework 帮助的最佳方式是在检查器框架讨论组[checker-framework-discuss](https://groups.google.com/forum/?fromgroups#!forum/checker-framework-discuss)中发帖，或者，如果您认为我们有错误或明显缺失的功能，请在我们的谷歌代码问题跟踪器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-09-10T22:17:07.687

此问题已得到修复，并且应该适用于最新的 Checker Framework 版本。

# url - 语义 URL 末尾的 Disqus 锚点

> ID：13860410
> 
> 赞同：1
> 
> 时间：2012-12-13T13:00:45.403
> 
> 标签：url, anchor, semantics, disqus

我正在开发一个基于 WP 的站点，该站点具有如下语义 URL：

```
http://mysite.com/category/article/#disqus_thread 
```

使用上述方法无法参考该页面底部的文章 Disqus 部分。我不完全确定不使用直接文件 URL 时锚是如何工作的。你会如何处理这个问题？我正在使用 Disqus 2012 脚本。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-12T09:33:45.967

如果没有哈希之前的最后一个斜杠，它应该可以正常工作，如下所示：

[http://mysite.com/category/article#disqus_thread](http://mysite.com/category/article#disqus_thread)

# c# - SQL 命令字符串中存在@whatever 会给我一个致命错误

> ID：13860411
> 
> 赞同：1
> 
> 时间：2012-12-13T13:00:48.223
> 
> 标签：c#, mysql

因此，@whatever 在 SQL 命令字符串中的存在给了我一个致命错误（**在命令执行期间遇到了致命错误。**）但当我在 MySQL 查询浏览器中执行相同的查询时却没有。

这是一个简单的示例，我为表中的每个 John 提供了一个行号，并在 datagridview 中显示它们：

```
private void button1_Click(object sender, EventArgs e)
{
   _dataTable.Clear();

   try
   {
      _conn = new MySqlConnection(Cs);
      _conn.Open();

      string name = "john";
      //This is the string that gives me an error
      string ConnString = "SELECT name,lastname,(@Row := @Row + 1) AS RowNumber FROM person JOIN (SELECT @Row := 0) r WHERE name = '"+name+"'";

      //This one doesn't gives an error
      //string ConnString = "SELECT name,lastname FROM person WHERE name = '" + name + "'";

      _cmd = new MySqlCommand
      {
         Connection = _conn,
         CommandText = ConnString
      };

      _cmd.ExecuteNonQuery();

      _da = new MySqlDataAdapter(_cmd);
      _da.Fill(_dataTable);

      _cb = new MySqlCommandBuilder(_da);

      dataGridView1.DataSource = _dataTable;
      dataGridView1.DataMember = _dataTable.TableName;
      dataGridView1.AutoResizeColumns();

      _conn.Close();
  }   
  catch (Exception ex)
  {
     MessageBox.Show(ex.Message);
  }
  finally
  {
     if (_conn != null) _conn.Close();
  }
} 
```

为什么会发生这种情况，我该如何解决？我已经看到了很多关于此的问题，但没有具体的答案。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:03:21.447

您不应该构建这样的 SQL 语句。请改用参数。请参阅[SQL 注入](http://en.wikipedia.org/wiki/SQL_injection)。例如，

```
var command = new SqlCommand("SELECT name,lastname,(@Row := @Row + 1) AS" 
                             " RowNumber FROM person JOIN (SELECT @Row := 0)"
                             " r WHERE name = @Name");
SqlParameter param  = new SqlParameter();
param.ParameterName = "@Name";
param.Value         = "John Doe";
command.Parameters.Add(param); 
```

无论如何，这不是连接字符串！

要使用用户定义的参数，您需要设置一个选项。您看到的错误是您的查询有问题，因为 C# 认为您正在尝试将`@Row`其用作参数。请参阅[如何在 .NET MySqlCommand 中使用 MySql 用户定义变量](https://stackoverflow.com/questions/5524632/how-can-i-use-a-mysql-user-defined-variable-in-a-net-mysqlcommand)。将此添加到您的连接字符串`;Allow User Variables=True`。还有一篇关于这个问题的[博客文章。](http://blog.tjitjing.com/index.php/2009/05/mysqldatamysqlclientmysqlexception-parameter-id-must-be-defined.html)

另外，您使用的是什么版本的 MySQL 数据提供程序？您可能需要更新。

我在 5.0 文档中发现了这一点：

*“以前版本的提供者使用'@'符号来标记SQL中的参数。这与MySQL用户变量不兼容，所以提供者现在使用'？' 用于在 SQL 中定位参数的符号。为了支持旧代码，您可以在连接字符串上设置 'old syntax=yes'。如果这样做，请注意，如果您未能定义您指定的参数，则不会引发异常打算在您的 SQL 中使用。”*

从这个页面：[http ://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlcommand.html](http://dev.mysql.com/doc/refman/5.0/es/connector-net-examples-mysqlcommand.html)

因此，在 MySQL 中使用参数的`@`符号`@Name`可能不起作用，您需要使用`?Name`参数和`@Row`用户变量。

例如，

```
var command = new SqlCommand("SELECT name,lastname,(@Row := @Row + 1) AS" 
                             " RowNumber FROM person JOIN (SELECT @Row := 0)"
                             " r WHERE name = ?Name"); 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-12-13T13:18:23.383

您可能需要在查询中声明 @Row。

```
string command = "DECLARE @Row INT; SELECT name,lastname,(@Row := @Row + 1) AS RowNumber FROM person JOIN (SELECT @Row := 0) r WHERE name = @Name;";

_cmd = new MySqlCommand(_conn);
_cmd.CommandText = command;
_cmd.Parameters.Add("@Name", name); 
```

# blackberry - 有来电时 BlackBerry 应用程序退出

> ID：13860412
> 
> 赞同：0
> 
> 时间：2012-12-13T13:00:51.433
> 
> 标签：blackberry

当有来电时，我的 BlackBerry 应用程序会自动退出。有来电时是否可以阻止我的应用程序退出？

# reporting-services - SSRS：是否可以在文本框中显示聚合值？

> ID：13860416
> 
> 赞同：0
> 
> 时间：2012-12-13T13:01:06.543
> 
> 标签：reporting-services

我正在开发一份 SSRS 报告。在其中，我必须在文本框中显示聚合值。聚合值表示连接字符串，其中子字符串来自数据集列。对于聚合，我使用的是自定义代码。这一切都很好。我的问题是我不知道如何在文本框中表示连接值。我正在使用的连接函数由 RunningValue 函数调用，据我所知，它只能在表和矩阵中使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T23:19:44.737

在表格或矩阵中定义您的聚合值 - 如有必要，将其隐藏。编辑并记下表格或矩阵中文本框的名称，例如 AggregatedValue。

然后在您的文本框中，您可以使用 ReportItems 语法来引用它的值，例如

```
= ReportItems!AggregatedValue.Value 
```

# javascript - 更改 HTML 元素类型

> ID：13860417
> 
> 赞同：22
> 
> 时间：2012-12-13T13:01:10.043
> 
> 标签：javascript, jquery, html

我可以用另一个 HTML 元素替换一个 HTML 元素吗？

但我不想让内容空白。

从：

```
<a data-text="text">content</a> 
```

至：

```
<div data-text="text">content</div> 
```

任何想法？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2018-07-21T05:21:08.150

2018 年更新：

使用[ChildNode.replaceWith()](https://developer.mozilla.org/en-US/docs/Web/API/ChildNode/replaceWith)方法。如 MDN 文档中所示：

```
var parent = document.createElement("div");
var child = document.createElement("p");
parent.appendChild(child);
var span = document.createElement("span");

child.replaceWith(span);

console.log(parent.outerHTML);
// "<div><span></span></div>" 
```

[此答案](https://stackoverflow.com/questions/843680/how-to-replace-dom-element-in-place-using-javascript)中的更多信息。

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-12-13T13:09:32.577

不可以。您不能更改 DOM 节点的[`tagName`](https://developer.mozilla.org/en-US/docs/DOM/element.tagName)( [`nodeName`](https://developer.mozilla.org/en-US/docs/DOM/Node.nodeName))。

您只能创建所需类型的新节点，复制所有属性（可能还有属性）并移动子节点。但是，您会丢失无法访问的东西，例如附加的事件侦听器。例如，当您想[在 IE中](https://stackoverflow.com/q/2566394/1048572)[更改 an 的类型`input`](https://stackoverflow.com/q/2566394/1048572)时，可以使用此技术。

但是，绝对没有理由将 an 更改`a`为 a `div`，它们具有完全不同的语义（还有行为和布局）。

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2020-12-01T12:29:41.373

这是解决该问题的更现代（2022+）的方法。

基本上你创建一个新元素，将属性传递给它，然后传递子元素，最后用新元素替换元素。

我还为区分大小写的元素提供了一个示例，例如`<svg>`. 出于区分大小写的目的，您不应使用`innerHTML`. 而是将`while`循环与`appendChild`.

```
function changeTag (node, tag) {
  const clone = createElement(tag)
  for (const attr of node.attributes) {
    clone.setAttributeNS(null, attr.name, attr.value)
  }
  while (node.firstChild) {
    clone.appendChild(node.firstChild)
  }
  node.replaceWith(clone)
  return clone
}

function createElement (tag) {
  if (tag === 'svg') {
    return document.createElementNS('http://www.w3.org/2000/svg', 'svg')
  } else {
    return document.createElementNS('http://www.w3.org/1999/xhtml', tag)
  }
}

const node1 = document.getElementById('node1')
console.log(node1.outerHTML)
console.log(changeTag(node1, 'a').outerHTML)

const node2 = document.getElementById('node2')
console.log(node2.outerHTML)
console.log(changeTag(node2, 'svg-custom').outerHTML)
```

```
<p id="node1" class="x" rel="follow">
  Some <b class="a1">bold</b> text
</p>

 <svg id="node2" height="150" width="400">
  <defs>
    <linearGradient id="grad1" x1="0%" y1="0%" x2="100%" y2="0%">
      <stop offset="0%" style="stop-color:rgb(255,255,0);stop-opacity:1" />
      <stop offset="100%" style="stop-color:rgb(255,0,0);stop-opacity:1" />
    </linearGradient>
  </defs>
  <ellipse cx="200" cy="70" rx="85" ry="55" fill="url(#grad1)" />
</svg>
```

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2012-12-13T13:07:40.430

当然，但为什么？

```
var a = ​document.getElementsByTagName('a');
var src, el, attrs;
for(var i=0,l=a.length;i<l;i++) {
    src = a[i];
    el = document.createElement('div');
    attrs = src.attributes;
    for(var j=0,k=attrs.length;j<k;j++) {
        el.setAttribute(attrs[j].name, attrs[j].value);
    }
    el.innerHTML = src.innerHTML;
    src.parentNode.replaceChild(el, src);
} 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2012-12-13T13:02:51.207

这将是无效`div`的 HTML（元素没有`href`属性）并且不再像链接一样。

但是，您可以使用 JavaScript 模拟该行为：

```
$('div').on('click', function() {
    location.href = $(this).attr('href');
}); 
```

但请不要这样做。例如，它会破坏鼠标中键（对于新选项卡）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-13T13:11:07.397

利用

```
var href=$("#aId").attr('href');

$("#aId").replaceWith($("<div"+href+">" + $("#aId").innerHTML + "</div>")); 
```

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2012-12-13T13:05:50.833

这是在您的 HTML 代码中执行此操作的简单方法。通过一些嵌入式样式和 javascript 代码，这将为您提供您正在寻找的效果......

```
<div style="display: inline; color: blue;" onclick="window.location='link/url';">Click!</div> 
```

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2021-06-25T23:37:08.690

## 简短的现代香草方式

```
const atts = Array.prototype.slice.call(elem.attributes)
elem.outerHTML = `<div ${atts.map(
  attr => (attr.name + '="' + attr.value + '"')
).join(' ')}>${elem.innerHTML}</div>` 
```

此解决方案将转换您的标签名称并保留所有属性，而无需您自己从 DOM 中删除和添加元素。浏览器会为您处理，因此您必须从 DOM 重新加载元素才能在转换后访问它。

### 例子

```
let elem = document.getElementById("test")
const tagName = 'div'

const atts = Array.prototype.slice.call(elem.attributes)
elem.outerHTML = `<${tagName} ${atts.map(
  attr => (attr.name + '="' + attr.value + '"')
).join(' ')}>${elem.innerHTML}</${tagName}>`

elem = document.getElementById("test") // reload required
console.log(elem.outerHTML)
```

```
<span id="test" data-test="123">I want to be a div.</span>
```

## 不需要保留属性？

```
elem.outerHTML = `<div id="test">${elem.innerHTML}</div>` 
```

这个单线会做到这一点，但请记住，`elem`它将指向旧元素，就像在上面的解决方案中一样。

### 例子

```
let elem = document.getElementById("test")
const tagName = 'div'

elem.outerHTML = `<${tagName} id="test">${elem.innerHTML}</${tagName}>`

elem = document.getElementById("test") // reload required
console.log(elem.outerHTML)
```

```
<span id="test">I want to be a div.</span>
```

使用这些方法，您总是必须从 DOM 重新加载对象才能继续使用它，因为浏览器将创建一个新的 DOM 元素并将其放置在引擎盖下。

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2020-07-04T14:26:10.970

这是一种在没有 jQuery 的情况下更改元素标签的方法 -

```
// Just provide the element and the new tag

function changeTag(el, newTag) {
    var outerHTML = el.outerHTML // Get the outerHTML of the element
    var tag = el.tagName // Get the tag of the outerHTML
    var r = new RegExp(tag, 'i') // Prepare a RegExp to replace the old tag with the new tag
    outerHTML = outerHTML.replace(r, newTag) // Replace it
    el.outerHTML = outerHTML // Set the outerHTML of the element
}
```

```
<span>Span 1</span> -- <span>Span 2</span>
<br>
<button onclick="changeTag(document.querySelector('span'), 'div')">
Change tag
</button>
```

* * *

## 回答 #10

> 赞同：-1
> 
> 时间：2019-01-25T12:53:32.483

```
<input id="tmpType" type="text" name="password" />

<script type="text/javascript">
    document.getElementById('tmpType').type = 'password';
</script> 
```

我用它在我的动态表单上显示/隐藏密码

# c# - C# - ASP.NET - 让用户选择路径

> ID：13860418
> 
> 赞同：1
> 
> 时间：2012-12-13T13:01:10.560
> 
> 标签：c#, asp.net, pdf-generation, filepath

我刚刚完成了我的 VisualWebpart，它从 Oracle 数据库中读取一些数据并将其写入 PDF 文件，目前，该文件将始终保存在我作为字符串传递的修复路径中。由于这确实是静态的，我想让用户选择保存文件的路径。但是我只需要将路径作为字符串，因此我可以将其放入 PDF 生成器的 Save-Option 中。

谢谢您的帮助

# html - 为什么黑莓手机的 td 中没有正确的填充

> ID：13860425
> 
> 赞同：1
> 
> 时间：2012-12-13T13:02:01.793
> 
> 标签：html, css, html-table

我正在尝试应用于`padding:3px`a但当您重新调整窗口大小时`td`它不适用于右侧`td`

这是我试过的[**DEMO**](http://jsfiddle.net/yV8bh/2/)

**在 chrome 中检查这个，看看我的截图。**

**屏幕截图**（*看图像的右侧，没有应用填充*）

![在此处输入图像描述](../Images/0df815a15f5b10718a064ea4ee39aa16.png)

* * *

当我使用 inline-block 图像时，它在浏览器中有效，但在黑莓手机中无效

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:37:38.073

在我看来，在组合`max-width`和元素`border`上存在问题。`image`边框不计入[默认 CSS 框模型](http://reference.sitepoint.com/css/boxmodel)中的宽度。因此，图像水平向右移动为左边框的宽度。

我想到了一些可能的解决方法：

**A)**在图像元素上使用**`box-sizing: border-box;`**以切换到 Internet Explorer 在 Quirks 模式下使用的以前的历史盒子模型。

请参阅[CSS 属性`box-sizing`](https://developer.mozilla.org/en-US/docs/CSS/box-sizing)。

所有浏览器的示例，在这里使用[box-sizing-polyfill](https://github.com/Schepp/box-sizing-polyfill)来实现 IE6 和 IE7 的此框模型，而无需切换到 Quirks 模式：

```
-moz-box-sizing: border-box;
-webkit-box-sizing: border-box;
box-sizing: border-box;
*behavior: url(js/boxsizing.htc); 
```

**B)**将**`max-width`图像的 设置为`98%`**。使用此方法时，您还必须找到减少周围元素的底部填充，在您的情况下是表格单元格。

**C)**将**图像**向左移动其左边框的宽度：**`margin: 0 0 0 -2px;`**。这将使图像居中，但水平填充比左右边框的宽度小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:53:56.353

只需在 css 中使用`display: block`而不是您的图像。`max-width: 100%`希望这对你有用。

# java - JBoss 中的 Spring Web 服务 - 两个具有不同 locationUri 的动态 wsdl，但都可以在两个位置访问

> ID：13860427
> 
> 赞同：0
> 
> 时间：2012-12-13T13:02:04.450
> 
> 标签：java, web-services, spring, jboss, wsdl

我有一个 Spring Web 服务项目。我已将服务分成两个不同的 wsdl。

```
<ws:dynamic-wsdl id="myDefinitionOne"
    portTypeName="Test" locationUri="http://server/basedirectory/subdirectoryone">
    <ws:xsd location="/WEB-INF/schemas/my-schema-one.xsd" />
</ws:dynamic-wsdl>

<ws:dynamic-wsdl id="myDefinitionTwo"
    portTypeName="Test" locationUri="http://server/basedirectory/subdirectorytwo">
    <ws:xsd location="/WEB-INF/schemas/my-schema-two.xsd" />
</ws:dynamic-wsdl> 
```

这是在 JBoss AS 7.1.1 上运行的。我不明白的是，我原以为只有 myDefinitionOne wsdl 可以在“http://myserver/basedirectory/ **subdirectoryone** /”中访问，同样，只有 myDefinitionTwo wsdl 可以在“http://myserver/basedirectory”中访问/**子目录二**/'

但事实上，两个 wsdl 都可以从任一 URL 访问。

我正在运行 SoapUI，我可以从eiter URL 为两组服务运行端点测试。

我在这里错过了什么，因为我的目标是在每个服务上分离出 URL 上的身份验证，即 /http://myserver/basedirectory/subdirectorytwo/ 和 /http://myserver/basedirectory/subdirectorytwo/，但是我不能这样做，如果它们都可以从两个位置访问。

我也通过 IIS 运行它。

任何人都可以帮助我对此的理解。

* * *

根据评论，这就是我的 web.xml 文件中的内容

这就是我的 web.xml 中的内容

```
<servlet>
    <servlet-name>webservices</servlet-name>
    <servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/ws-config.xml</param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>webservices</servlet-name>
    <url-pattern>/subdirectoryone/*</url-pattern>
</servlet-mapping>

<servlet>
    <servlet-name>webservices-auth</servlet-name>
    <servlet-class>org.springframework.ws.transport.http.MessageDispatcherServlet</servlet-class>
    <init-param>
        <param-name>contextConfigLocation</param-name>
        <param-value>/WEB-INF/ws-config.xml</param-value>
    </init-param>
</servlet>

<servlet-mapping>
    <servlet-name>webservices-auth</servlet-name>
    <url-pattern>/subdirectorytwo/*</url-pattern>
</servlet-mapping> 
```

那么这是否没有正确指定它？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:22:56.577

`ws:dynamic-wsdl`只是一种为 Spring-WS 服务提供 wsdl 的方式，给定您的类型的模式 - 端点本身与您在`ws:dynamic-wsdl`. 这就是为什么无论您放置什么 locationUri，Spring-WS 都会`MessageDispatcherServlet`根据`servlet-mapping`您必须在`web.xml`文件中提供的内容来处理它。

Spring-WS 根据有效负载或soapaction 查找端点方法。

**基于更新** 您的方法将不起作用，因为本质上两者`MessageDispatcherServlet`仍然指向相同的配置。因此，例如，如果一个请求到达 /subdirectory1/*，它将被第一个 MessageDispatcherServlet 拦截，它会在某个时候检查有效负载，然后在内部检查从有效负载到端点的映射，以找到要分派的正确端点来电。无论您向 /subdirectory1/* 还是 /subdirectory2/* 发送请求，都会发生完全相同的事情。

如果你绝对需要这样做，如何创建两个 spring-ws 配置文件 - 比如说 ws-config1.xml 和 ws-config2.xml，`<component-scan/>`如果你有它，请删除它，并显式地将相关的端点 bean 添加到每个配置中文件。这可以工作。

# css - CSS背景位置坐标

> ID：13860440
> 
> 赞同：-3
> 
> 时间：2012-12-13T13:02:49.357
> 
> 标签：css, position, background-image, css-sprites, background-position

我想用这张图片制作css精灵

![http://oi49.tinypic.com/14nobhd.jpg](../Images/7befeaafcb76dba0b1944ccf1ceb0ee6.png)

我的html代码；

```
<div class="top"></div>
<div class="bottom"></div>
<div class="right"></div>
<div class="left"></div> 
```

和css代码；

```
.left{
background : url(arrw.png) no-repeat 0 0;
width:12px;
height:19px;
}

.right{
background : url(arrw.png) no-repeat -29px 0;
width:12px;
height:19px;
}

.top{
background : url(arrw.png) no-repeat -12px 0;
width:16px;
height:12px;
}

.bottom{
background : url(arrw.png) no-repeat -12px -12px;
width:16px;
height:12px;
} 
```

那工作很完美，但我不明白为什么要为背景位置提供负值。这不是坐标系统吗？难道我们没有必要为此给出正值吗？位置值从 0 0（左上角）开始，并且必须取正值，不是吗？有什么问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:07:18.270

您使用的精灵图像通常比您显示它们的框大。如果只包含一张图片，它将被定位在左上角。现在，如果要显示溢出到框右侧的图像部分，则需要将图像移动到左侧。但是由于图像`left: 0;`默认情况下已经存在，因此您需要设置负值以将其进一步向左移动。

想想两张纸，一张上面有洞，另一张在第一张后面移动。要查看位于其右下角的后页的一部分，您需要移动到左上角。因此，当您通过孔查看后页/在框中显示图像时，位置方向与您想要移动后页的方向相反。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:10:23.973

好的，取一个位置为 0 0 的背景图像的 div。添加到它，你向下和向右移动它。减法将其向上和向左移动。0 0 是该系统的基础。

如果这让您烦恼，您可以将代码更改为：

```
.left{
background : url(arrw.png) no-repeat top left;
width:12px;
height:19px;
}

.right{
background : url(arrw.png) no-repeat top right;
width:12px;
height:19px;
}

.top{
background : url(arrw.png) no-repeat top center;
width:16px;
height:12px;
}

.bottom{
background : url(arrw.png) no-repeat bottom center;
width:16px;
height:12px;
} 
```

# asp.net-mvc - 将字符串转换为表 ASP.Net MVC

> ID：13860449
> 
> 赞同：0
> 
> 时间：2012-12-13T13:03:33.847
> 
> 标签：asp.net-mvc, string, html-table

我正在使用 ASP.Net MVC。如何将带`;`分隔符的`=`字符串转换`Color=Red;Size=28;Price=45$;`为 html 表，例如：

![在此处输入图像描述](../Images/bb584685dc5109a95fe29bdc2bb6240d.png)

我希望该用户可以向表中添加行并像这样进行编辑：

![在此处输入图像描述](../Images/8ba1c853689fa2a38b2e445df8915381.png)

和字符串更改为`Color=Red;Size=28;Price=45$;Tel=12345678`用户想要保存数据的时间。我尝试了一些类似的 jQuery 插件，`jtable`但没有成功。任何想法或解决方案？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:42:24.393

您可以将字符串转换为如下表格：

```
// Remove the final ; if one exists:
if (tableString.substring(tableString.length - 1) == ';') {
    tableString = tableString.substring(0, tableString.length - 1);
}

var tableHtml = 
    "<table><tr><td>" + 
    tableString // where table string is something like 'Color=Red;Size=28;Price=45$'
        .replace(";", "</tr><tr>")
        .replace("=", "</td><td>") + 
    "</td></tr>"; 
```

...并将您的表转换为这样的字符串（使用 JQuery）：

```
var tableString = 
    $("table tr").each(function() {
        return $(this).children("td").text().join("=");
    })
    .join(";"); 
```

# groovy - 列出詹金斯项目的所有下游项目

> ID：13860450
> 
> 赞同：0
> 
> 时间：2012-12-13T13:03:35.600
> 
> 标签：groovy, jenkins

这一定是一个简单的菜鸟错误，但是

```
 def hi = hudson.model.Hudson.instance
   hi.getItems(hudson.model.Project).each {project ->
   println(project.displayName)
   def di = project.getDownstreamProjects

   println(di.name)

} 
```

刚回来

```
groovy.lang.MissingPropertyException: No such property: getDownstreamProjects for class: hudson.model.FreeStyleProject 
```

但是[文档](http://javadoc.jenkins-ci.org/hudson/model/FreeStyleProject.html)说该方法存在于 AbstractProject 我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:58:19.793

你忘了`()`后面`getDownstreamProjects`。这是一种方法而不是属性；-)

# google-maps - 谷歌静态地图配额已达到但远未接近 25,000 个限制

> ID：13860451
> 
> 赞同：7
> 
> 时间：2012-12-13T13:03:36.890
> 
> 标签：google-maps, quota, google-static-maps

我的一个客户在他的房产租赁页面上使用谷歌静态地图。本月，他两次用可怕的 Google Quota 图片代替了地图应该在页面上的位置（请参阅[https://developers.google.com/maps/documentation/staticmaps/images/quota.png](https://developers.google.com/maps/documentation/staticmaps/images/quota.png)）。

每次发生后他都会通知我，但页面上的静态地图为我正确加载。他和我都通过代理服务器查看了该页面，并且它也通过代理服务器正确显示。

我检查了有问题的 2 天的网站日志，整个网站分别只有 841 和 1,910 个页面加载。这两个交易量都高于正常天数，但决不能解释达到 25,000 个 Google 静态地图的限制。图像尺寸仅为 375 x 275 像素。

问题：为什么他会得到配额图像而不是我（或代理服务器）？如果它基于 IP 地址，那么他在一个非常小的网络上，办公室不可能集体加载该特定页面 25,000 次。我的客户经常使用谷歌地图。maps.google.com 是否有可能将其自己的页面加载添加到来自其他网站的 IP 地址的总页面加载中？任何解释都是最有帮助的。提前致谢。

仅供参考：这是我们已经使用了至少一年的图像标签，直到本月都没有发生任何事件（已编辑）：

```
<img src="http://maps.google.com/maps/api/staticmap?center=28.4039,-81.337&maptype=terrain&mobile=false&zoom=13&size=375x275&markers=size:small|color:blue|28.4039,-81.337&sensor=false&key={omited}&style=feature:road.local%7Cvisibility:simplified" width="375" height="275" alt="Location" class="map_canvas" /> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-02-10T18:46:04.360

Google Static Maps API 还表明每分钟有 50 个请求的限制。

*   没有 API 密钥：
    *   每个 IP 地址每 24 小时有 1000 个静态映射请求。
    *   每个 IP 地址每分钟 50 个静态映射请求。

这意味着如果您的单个页面包含超过 50 个地图，则该页面将超过此限制。

[静态地图API](https://developers.google.com/maps/documentation/staticmaps/#Limits)

我建议你注册一个密钥。

# wpf - 为什么 Canvas 上 TextBox 的命中测试位置与其实际位置不同？

> ID：13860453
> 
> 赞同：0
> 
> 时间：2012-12-13T13:03:42.427
> 
> 标签：wpf, canvas, textbox, hittest

我有一个画布，上面有几个元素，比如线条、路径和文本框。在`MouseOver`Canvas 的`HitTest`情况下，它们都有一个，例如：

```
bool HitTest( Point p )
{
  return VisualTreeHelper.HitTest( textBox, p ) != null;
} 
```

这适用于线条和路径的像素精确，但不适用于文本框。

例如，当 TextBox 位于 50、50 时，如下所示：

```
Canvas.SetLeft( textBox, 50.0 );
Canvas.SetTop( textBox, 50.0 ); 
```

它在该位置正确绘制：如果文本大约 20 像素高和 50 像素宽，则屏幕上的边界矩形大致为 L=50 T=50 R=100 B=70。

但是，该`HitTest`函数在该矩形中返回 false，并且仅在矩形 L=0 T=0 R=50 B=20 中返回 true。换句话说，命中测试知道文本框的大小，但忽略它不在 0,0 处。

为什么会发生这种情况，以及如何解决？（我感觉这与我不使用 SetLeft/SetTop 定位 Line 和 Path 元素有关）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:10:37.663

仅仅是因为 TextBox 对它位于 Canvas 中的事实一无所知，因此对“实际位置”一无所知。

当您调用时`VisualTreeHelper.HitTest(textBox, p)`，Point`p`以相对于`textBox`视觉的坐标给出。与 TextBox 在 Canvas 或任何其他可能的容器中的位置无关。

您获得 Line 和 Path 的“正确”坐标（相对于您的 Canvas）只是因为您没有在它们上设置 Canvas.Left 或 Canvas.Top 。

如果您需要相对于 Canvas 的坐标，通常会执行以下操作：

```
bool HitTest(UIElement element, Point p)
{
    var elementPoint = new Point(
        p.X - Canvas.GetLeft(element),
        p.Y - Canvas.GetTop(element));

    return VisualTreeHelper.HitTest(element, elementPoint) != null;
} 
```

或者

```
bool HitTest(UIElement element, Point p)
{
    var elementPoint = canvas.TransformToDescendant(element).Transform(p);

    return VisualTreeHelper.HitTest(element, elementPoint) != null;
} 
```

# batch-file - 批处理文件未将结果保存在日志中

> ID：13860454
> 
> 赞同：0
> 
> 时间：2012-12-13T13:03:50.293
> 
> 标签：batch-file, dos

我正在使用下面的批处理文件来查询 IP 列表，然后将其保存到 LOG.txt。

```
@echo off 
cls 
for /f "tokens=*" %%x in (IP.txt) do ( 
echo Checking %%x 
ping -n 1 %%x > nul 
if not errorlevel 1 ( 
echo %%x >> LOG.txt 
) 
) 
```

但我在 LOG.txt 中只看到 IP.txt 的第一个条目

虽然在运行批处理文件时我看到

```
Checking 1.2.3.4
Checking 1.2.3.5 
```

等等。所以它暗示批处理文件正在逐行读取IP.txt。

任何人都可以帮助制作这个批处理文件，以便 LOG.txt 中的输出按预期工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:42:51.430

Andriy M 在他的评论中暗示的是，如果 PING 成功，您的代码只会写入 IP 地址。

由于你的 IF 语句，如果出现错误，IP 地址将不会被写入。如果出现超时，或者 PING 找不到主机，PING 将产生错误。

如果要写入所有地址，则需要更改逻辑。

# php - 使用 Zend，在单击按钮时执行指令

> ID：13860455
> 
> 赞同：0
> 
> 时间：2012-12-13T13:03:59.167
> 
> 标签：php, zend-framework, onclick, global-variables

我是 Zend 的新手，我有一些问题：我将尝试简化示例。我在引导程序中创建了一个全局变量并将其设置为 false

```
 Zend_Registry::set('var1', FALSE); 
```

我创建了一个文件 Translate.php：

```
<?php

class CMS_Application_Resource_Translate extends Zend_Application_Resource_ResourceAbstract {

public function my_function() {
    //do Something
    } 
```

}

在每个控制器中，我都输入了以下代码：

```
 public function init()
{
if (Zend_Registry::get('var1')) {
   $instance1=new CMS_Application_Resource_Translate();
   $instance1->my_function();
}
} 
```

我在所有网站页面中创建了一个按钮，当我点击这个按钮时，我想将全局变量设置为 true，以便控制器的 init() 函数工作。但是我有一个问题：如何在单击按钮时执行将全局变量更改为 true 的函数？

# arrays - vb6 声明一个数组

> ID：13860458
> 
> 赞同：2
> 
> 时间：2012-12-13T13:04:03.100
> 
> 标签：arrays, vb6

我有这个代码：

```
' Option Explicit
Public Function Clean(Text)
    On Error Resume Next
    ' Dim Chars As ?????????
    Chars = Array("\", "/", ":", "*", "?", """", "<", ">", "|")
    For Each Replaced In Chars
        Text = Replace(Text, Replaced, "")
    Next
    Clean = CStr(Text)
End Function 
```

但是我在使用时出现错误，`Option Explicit`因为没有声明 Chars，但是我必须使用什么类型来使数组变暗（`Dim Chars As ???????`）？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T13:23:10.623

修正版：

```
Option Explicit

Public Function Clean(ByVal Text As String)
    Dim Chars As Variant
    Dim Replaced As Variant

    Chars = Array("\", "/", ":", "*", "?", """", "<", ">", "|")
    For Each Replaced In Chars
        Text = Replace(Text, Replaced, "")
    Next
    Clean = Text
End Function 
```

通常性能更好的版本：

```
Option Explicit

Public Function Clean(ByVal Text As String)
    Dim Chars As Variant
    Dim RepIndex As Long

    Chars = Array("\", "/", ":", "*", "?", """", "<", ">", "|")
    For RepIndex = 0 To UBound(Chars)
        Text = Replace$(Text, Chars(RepIndex), "")
    Next
    Clean = Text
End Function 
```

理解变体很重要，应该特别注意使用字符串函数的变体版本，而不是使用“$”类型修饰后缀的字符串类型版本。

大多数时候，由于性能成本，您会希望尽可能避免使用变体。

这个版本可能表现得更好：

```
Option Explicit

Public Function Clean(ByVal Text As String)
    Const Chars As String = "\/:*?""<>|"
    Dim RepIndex As Long

    For RepIndex = 1 To Len(Chars)
        Text = Replace$(Text, Mid$(Chars, RepIndex, 1), "")
    Next
    Clean = Text
End Function 
```

VB6 中没有“Char”类型，变量声明也没有任何初始化语法。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-19T11:15:48.193

您可以将其调暗为字符串数组，您不需要变体即可

```
Dim Chars() As String
Chars = Split("\,/,:,*,?,"",<,>,|", ",") 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T13:05:57.473

数组以与其他变量相同的方式声明（即使用关键字“Dim”、“Private”、“Public”等），除了数组边界在变量名后面的括号中编码（如果是固定长度数组被声明）或一对空括号跟随变量名（如果正在声明可变长度或动态数组）。

```
 Dim Chars As Variant
 Chars = Array("\", "/", ":", "*", "?", """", "<", ">", "|") 
```

[http://www.vb6.us/tutorials/understanding-arrays](http://www.vb6.us/tutorials/understanding-arrays)

# objective-c - 从包制造商启动应用程序时，具有管理员权限的 NSAppleScript 失败

> ID：13860470
> 
> 赞同：0
> 
> 时间：2012-12-13T13:04:56.517
> 
> 标签：objective-c, macos, cocoa, applescript, packagemaker

我有一个 MAC OSX 可可应用程序，我使用 NSAppleScript 以管理员权限运行一些脚本。该应用程序在手动启动或从任何其他脚本启动时运行良好。

但是当我尝试从 package maker 启动应用程序时，NSAppleScript 没有启动预期的脚本。

我制作了一个飞行后脚本来从 package maker 启动应用程序。

飞行后：

`#!/bin/sh open pathOFApp`

**NSAppleScript 用法：**

```
NSDictionary *error = [NSDictionary new];

NSAppleScript *appleScript = [[NSAppleScript new] initWithSource:@"do shell script \"pathOFScript \" with administrator privileges"];

if ([appleScript executeAndReturnError:&error]) {
          NSLog(@"-----success --------"); 
```

}

```
else{
    NSLog(@"-------Failure-----"); 
```

}

请帮助解决这个问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:43:07.580

我不知道 applescript/PackageMaker 的答案，但是您是否尝试过使用 unix 安全工具来启动您的可执行文件？我认为它从 10.5 开始可用。您也可以将它和您的可执行文件组合在一个语句中。

```
/usr/bin/security execute-with-privileges /path/to/executable 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-18T10:11:16.083

得到了这个的解决方案。由于 postflight 脚本是在 packageMaker 的 root 权限下启动的，因此它正在使用 NSAppleScript 创建一些权限问题。在 postflight 中以“sudo open MyApp”启动应用程序将解决该问题。

# objective-c - 目标 C：刷新视图以显示更新的值

> ID：13860471
> 
> 赞同：3
> 
> 时间：2012-12-13T13:04:59.107
> 
> 标签：objective-c, uiview

我有一个回调函数，它会在某个事件发生并更新一个文本字段。我使用 viewcontroller 类的实例 varViewController 从 C 代码访问文本字段，因为我无法使用 self 访问文本字段和其他成员/出口。

现在的问题是，当我更新文本字段时，它不会立即更新。在我按下任何其他按钮或对视图执行某些操作后，我会看到更新的值。

```
void abc(int a, char *b, char *c){

    current = a;

    if (varViewController == NULL)
        NSLog(@"\varViewController is empty");
    else
        NSLog(@"\varViewController");

    varViewController.tempAddress = @"GotSomething";

    [varViewController txtCallId ].text=@"CALLING CALLING";

} 
```

我的问题是：
首先：为什么值在更改时没有更新？

第二：如何使值在更改后立即显示？（c函数中的值更改）。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T13:27:01.963

为了强制视图重新渲染，请尝试以下操作

```
[varViewController.view setNeedsDisplay]; 
```

# java - 从 JPA 查找 GUID

> ID：13860473
> 
> 赞同：0
> 
> 时间：2012-12-13T13:05:04.910
> 
> 标签：java, sql-server, jpa

本来应该是nobrainer的事情结果比我想象的要复杂一些，所以我希望有人能提供帮助。

基本上我在 SQL Server 中有一个经典的订单数据库表，例如：

```
CREATE TABLE [dbo].[order] (
    [orderid] [bigint] NOT NULL,
    [uniqueid] [uniqueidentifier] NOT NULL,
    [revision] [int] NOT NULL,
    <lots of other stuff...>
  CONSTRAINT [PK_order] PRIMARY KEY ([orderid]),
  CONSTRAINT [UK_order] UNIQUE ([uniqueid], [revision])
) 
```

通过 (uniqueid, revision) 从 SQL Management Studio 查找订单就像做梦一样

```
SELECT *
  FROM [order]
 WHERE [uniqueid] = '9E2822E9-4D08-4A25-8A86-ADAF8DB511CE' AND [revision] = 5; 
```

返回任何合适的。

当我尝试从我的 JPA 框架访问订单表时，就会出现问题。这是我的订单表的实体映射：

```
@Entity
@Table(name="[order]")
public class Order implements Serializable {
  @Id
    private long orderid;

  private String uniqueid;

  private int revision;

  <lots of other stuff...>
} 
```

通过 orderid 查找订单就像做梦一样，说

```
public Order loadOrder(long orderid) {
    return JPA.getManager().find(Order.class, orderid);
} 
```

返回任何合适的。

当我尝试从我的 JPA 框架中检索（唯一，修订）订单时，就会出现问题。这惨败：

```
public Order loadOrder(String uniqueid, int version) {
    Query q = JPA.getManager().createQuery("SELECT o FROM Order o WHERE o.uniqueid=:uniqueid AND o.version=:version");
    q.setParameter("uniqueid", uniqueid).setParameter("version", version);
    ...
} 
```

带有 java.sql.SQLException：从字符串转换为唯一标识符时转换失败。谷歌搜索 SQLException 消息会产生大量结果，但都与*生成*唯一标识符有关。我没有生成任何东西 - 只是试图查找现有值。

我有一种唠叨的感觉，我错过了一些明显的东西，但我必须承认我被卡住了。有什么帮助吗？

BTW JPA.getManager() 返回 javax.persistence.EntityManager 的一个实例。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:22:47.600

我不熟悉 SQL Server 中的 uniqueidentifier 类型，似乎 JPA 也不熟悉。

您可以尝试改用 varchar 类型。

您的 JDBC 驱动程序是否支持唯一标识符，如果它确实希望类型绑定？您可能需要进行一些转换。

如果您使用的是 EclipseLink，则可以使用转换器。

[http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_converter.htm#CHDEHJEB](http://www.eclipse.org/eclipselink/documentation/2.4/jpa/extensions/a_converter.htm#CHDEHJEB)

# android - Android反向地理编码服务异常

> ID：13860477
> 
> 赞同：-1
> 
> 时间：2012-12-13T13:05:17.620
> 
> 标签：android, reverse-geocoding

我正在尝试举例：http: [//developer.android.com/training/basics/location/geocoding.html#TaskReverseGeocoding](http://developer.android.com/training/basics/location/geocoding.html#TaskReverseGeocoding)。

有效，但实际上我得到了

> 服务不可用异常

当试图检索地址时，我已经通过了这个并获得了 API 密钥和所有这些东西，但没有任何改变，而且它甚至在设备本身上也不起作用！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:31:29.030

```
 Geocoder geoCoder = new Geocoder(getBaseContext(), Locale.getDefault()); 
    try {
        List<Address> addresses = geoCoder.getFromLocation(latitude, longitude, 1);
        if (addresses.size() > 0) {
            String address = "";
            for (int index = 0; index < addresses.get(0).getMaxAddressLineIndex(); index++)
                address += addresses.get(0).getAddressLine(index) + " ";
            tv.setText(address);                   Toast.makeText(getApplicationContext(),""+address,Toast.LENGTH_SHORT).show();
            Log.v("AddressTag", address);
        }
    } catch (IOException e) {
        // TODO Auto-generated catch block
        e.printStackTrace();
    } 
```

}

# c# - 为什么要使用“Web Service 或 WCF”，因为我们的应用程序中已经存在数据访问/业务逻辑层？

> ID：13860480
> 
> 赞同：-2
> 
> 时间：2012-12-13T13:05:21.947
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-3, c#-4.0

据我了解，当应该在**调度**的基础上完成一些自动过程时，应该使用**窗口服务。**

 **我们为什么要使用 Web Service 或 WCF，因为我们的应用程序中已经有了**数据访问/业务逻辑层**。我还认为，出于调度目的，Window Service 是一个不错的选择。

你的评论

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:10:00.197

> 我们为什么要使用 Web Service 或 WCF，因为我们的应用程序中已经有了数据访问/业务逻辑层。

因为通过在可重用服务中公开此功能，其他应用程序/平台可能会利用它。当然，如果您的 DAL/BL 仅在单个应用程序中使用，则将其移至单独的服务中没有任何好处。**

# php - PHP脚本未将值插入数据库

> ID：13860481
> 
> 赞同：1
> 
> 时间：2012-12-13T13:05:37.033
> 
> 标签：php, mysqli

下面我有一个模块下拉菜单，它从数据库中获取模块列表，显然在下拉菜单中显示它们：

```
$active = 1;

 $sql = "SELECT ModuleId, ModuleNo, ModuleName FROM Module WHERE ModuleActive = ? ORDER BY ModuleNo"; 

 $sqlstmt=$mysqli->prepare($sql);

 $sqlstmt->bind_param("i",$active);

 $sqlstmt->execute(); 

 $sqlstmt->bind_result($dbModuleId, $dbModuleNo, $dbModuleName);

 $modules = array(); // easier if you don't use generic names for data 

 $output = ""; 
 $moduleHTML = "";  
 $moduleHTML .= '<select name="module" id="modulesDrop">'.PHP_EOL;
 $moduleHTML .= '<option value="">Please Select</option>'.PHP_EOL;  

 while($sqlstmt->fetch()) 
 { 
     $moduleno = $dbModuleNo;
     $module = $dbModuleId;
     $modulename = $dbModuleName; 
     $moduleHTML .= "<option value='".$module."'>" . $moduleno . " - " . $modulename . "</option>".PHP_EOL;  

         if (isset($_POST['module']) && ($_POST['module'] == $module)) {
    $output .= "<p><strong>Selected Module:</strong> " . $moduleno .  " - "  . $modulename . "</p>";
}
  } 

  $moduleHTML .= '</select>'; 
```

但是我遇到的问题是，当我尝试将所选模块插入数据库时​​，它无法执行此操作，因此 ModuleId 为空。为什么它不能将选定的模块插入数据库？

```
if (isset($_POST['module'])) {

$_SESSION['module'] = $_POST['module'];

}

if($_SERVER['REQUEST_METHOD'] == 'POST')

{

            $insertsql = "
      INSERT INTO Session
        (ModuleId)
      VALUES
        (?)
    ";
    if (!$insert = $mysqli->prepare($insertsql)) {
      // Handle errors with prepare operation here
    }

        $insert->bind_param("i", $_SESSION['module']);

        $insert->execute();

        if ($insert->errno) {
          // Handle query error here
        }

        $insert->close();

} 
```

ModuleId 是一个 INT 字段

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:28:13.843

尝试这个

```
 if ($insert = $mysqli->prepare($insertsql)) {

    $insert->bind_param("i", real_escape_string($_SESSION['module']));

    $insert->execute();
    $insert->close();
    }
    else  {
      // Handle query error here
    } 
```

# c# - 在 ASP.NET html 表中显示数据

> ID：13860490
> 
> 赞同：6
> 
> 时间：2012-12-13T13:06:15.820
> 
> 标签：c#, asp.net, html

我正在编写一个 ASP.NET 页面，它从数据库中读取数据并需要在表格中显示它。出于某种原因，我不想使用 gridView。

**如何在 HTML 页面的表格中显示数据？**

这是我的 C# 代码：

```
 SqlConnection thisConnection = new SqlConnection(dbConnection);
        SqlCommand thisCommand = thisConnection.CreateCommand();
        thisCommand.CommandText = "SELECT * from Test";
        thisConnection.Open();
        SqlDataReader reader = thisCommand.ExecuteReader();

        while (reader.Read())
        {
            int id = reader.GetInt32(0);
            string Name = reader.GetString(1);
            string Pass = reader.GetString(2);                   
        }

        thisConnection.Close(); 
```

这是我的 ASPX 页面：

```
<%@ Page Language="C#" AutoEventWireup="true" MasterPageFile="~/test.master" CodeFile="test.aspx.cs" Inherits="test" %>

<asp:Content ID="BodyContent" runat="server"  ContentPlaceHolderID="ContentPlaceHolder">
    <table width="100%" align="center" cellpadding="2" cellspacing="2" border="0" bgcolor="#EAEAEA" >
        <tr align="left" style="background-color:#004080;color:White;" >
            <td> ID </td>                        
            <td> Name </td>            
            <td>Pass</td>                        
        </tr>

        **<%--Need the while output into here--%>**

    </table>
</asp:Content> 
```

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-12-13T13:09:56.413

基本上使用经典的 ASP\PHP\Spaghetti 代码方式。

首先，将您的代码放在一个返回`string`. 方法：

```
public string getWhileLoopData()
{
        string htmlStr = "";
        SqlConnection thisConnection = new SqlConnection(dbConnection);
        SqlCommand thisCommand = thisConnection.CreateCommand();
        thisCommand.CommandText = "SELECT * from Test";
        thisConnection.Open();
        SqlDataReader reader = thisCommand.ExecuteReader();

        while (reader.Read())
        {
            int id = reader.GetInt32(0);
            string Name = reader.GetString(1);
            string Pass = reader.GetString(2);
            htmlStr +="<tr><td>"+id+"</td><td>"+Name+"</td><td>"+Pass+"</td></tr>"                   
        }

        thisConnection.Close();
        return htmlStr;
} 
```

然后你可以`<%=getWhileLoopData()%>`在 ASP.NET 中使用等于`<%Response.Write(getWhileData())%>`

它应该看起来像这样：

```
<%@ Page Language="C#" AutoEventWireup="true" MasterPageFile="~/test.master" CodeFile="test.aspx.cs" Inherits="test" %>

<asp:Content ID="BodyContent" runat="server"  ContentPlaceHolderID="ContentPlaceHolder">
    <table width="100%" align="center" cellpadding="2" cellspacing="2" border="0" bgcolor="#EAEAEA" >
        <tr align="left" style="background-color:#004080;color:White;" >
            <td> ID </td>                        
            <td> Name </td>            
            <td>Pass</td>                        
        </tr>

        <%=getWhileLoopData()%>

    </table>
</asp:Content> 
```

还可以选择使用中继器控件并将数据库中的数据绑定到您喜欢的项目模板。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T13:17:59.690

我建议您使用转发器控件并在转发器中创建您的 html 表结构。

```
<table cellpadding="0" cellspacing="0" width="100%">
<asp:Repeater ID="rpt" runat="server" >
<HeaderTemplate>
<tr class="Header">
<td>
ID
</td>
<td>
Name
</td>
<td>
Pass
</td>
</tr>
</HeaderTemplate>
<ItemTemplate>
<tr>
<td>
<%# Eval("ID")%>
</td>
<td>
<%# Eval("Name")%>
</td>
<td>
<%# Eval("Pass")%>
</td>
</tr>
</ItemTemplate>
</asp:Repeater>
</table> 
```

与绑定 gridview 一样绑定中继器

谢谢

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T13:16:37.370

如果您将`runat="server"`属性放在 HTML 表格中，您实际上可以在代码隐藏中以编程方式访问它。这是一个相当强大的功能。

这绝对不是最好的解决方案，但它是一个没有人知道的非常酷的功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T13:14:02.417

将 3 个`literal`控件添加到您的 asp 页面中，将它们放在`tr`标题的下方`td`，然后：

```
while (reader.Read())
    {
        int id = reader.GetInt32(0);
        string Name = reader.GetString(1);
        string Pass = reader.GetString(2);  
        literalID.text += id.ToString();
        literalName.text += Name.ToString();
        literalPass.text += Pass.ToString();
    } 
```

这是我所知道的最简单的解决方案，但它并不整洁。
这是`html`代码：

```
<tr align="left" style="background-color:#004080;color:White;" >
    <td> ID </td>                        
    <td> Name </td>            
    <td>Pass</td>                        
</tr>
<tr align="left" style="background-color:#004080;color:White;" >
    <td><asp:Literal ID="literalID" runat="server"></asp:Literal></td>                        
    <td><asp:Literal ID="literalName" runat="server"></asp:Literal></td>            
    <td><asp:Literal ID="literalPass" runat="server"></asp:Literal></td>   
</tr> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-10-23T14:24:56.797

在这个解决方案中，所有在客户端和客户端创建的 HTML 标签都必须渲染这个进程而不是服务器。这是一个更好的主意，并为您的服务器提供最佳性能，然后使用以下代码：

```
<asp:Content ID="BodyContent" runat="server" 
 ContentPlaceHolderID="ContentPlaceHolder">
     <table width="100%" align="center" cellpadding="2" cellspacing="2" border="0" bgcolor="#EAEAEA" >
         <tr align="left" style="background-color:#004080;color:White;" >
             <td> ID </td>                        
             <td> Name </td>            
            <td>Pass</td>                        
         </tr>

       <% if(dt != null && dt.rows.count>0){
              foreach(var item in dt.rows)
                 {%>
                   <tr>
                      <td><%=item["ID"]%></td>
                      <td><%=item["Name"]%></td>
                      <td><%=item["Pass"]%></td>
                   </tr>
                  <%}
                }%>

     </table> </asp:Content> 
```

# asp.net-web-api - 如何从 WEB API 响应中删除命名空间

> ID：13860491
> 
> 赞同：7
> 
> 时间：2012-12-13T13:06:18.207
> 
> 标签：asp.net-web-api

请帮助我从 WEB API 响应中删除 xmlns 命名空间。

添加，

```
config.Formatters.XmlFormatter.UseXmlSerializer = true; 
```

（或者）

```
[DataContract(Namespace="")] 
```

没有帮助我。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-05-03T07:35:58.457

最后，我找到了解决方案。刚刚创建了一个 CustomXmlFormatter 来从根元素中删除命名空间。

```
public class IgnoreNamespacesXmlMediaTypeFormatter : XmlMediaTypeFormatter
{
 public override Task WriteToStreamAsync(Type type, object value, Stream writeStream, HttpContent content, TransportContext transportContext)
{
    try
    {
        var task = Task.Factory.StartNew(() =>
        {
            var xns = new XmlSerializerNamespaces();
            var serializer = new XmlSerializer(type);
            xns.Add(string.Empty, string.Empty);
            serializer.Serialize(writeStream, value, xns);
        });

        return task;
    }
    catch (Exception)
    {
        return base.WriteToStreamAsync(type, value, writeStream, content, transportContext);
    }
   }
} 
```

# java - 这些演员阵容有什么区别？哪个是首选？

> ID：13860493
> 
> 赞同：1
> 
> 时间：2012-12-13T13:06:22.553
> 
> 标签：java, casting

嗨，我对 Java 很陌生，我想知道这两个语句之间有什么区别：

```
long statusId = (long)(Some_Valid_Cast); 
```

和：

```
Long statusId = (Long)(Some_Valid_Cast); 
```

铸造时应该首选哪一个，为什么？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T13:09:11.827

第一个转换为原始类型`long`，第二个转换为类型的对象`Long`。这些是不同的 - 请参阅[此](https://stackoverflow.com/questions/5857812/long-vs-integer-long-vs-int-what-to-use-and-when)相关问题。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:09:07.093

你想要一个长的对象表示，还是只是数字（原语）？

原语（int、long 等）可以与它们的对象等价物（`Integer`等`Long`）互换。如果您使用对象变体，则可以将它们插入到通常带有对象的集合中（例如`Map`, `List`, `Set`）并在需要 an`Object`的任何地方使用。但是，我通常希望您在大多数应用程序中使用原始变体。

值得查看[这个 SO question](https://stackoverflow.com/questions/239560/when-should-i-use-primitives-instead-of-wrapping-objects)以获取有关利弊的更多信息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T13:10:12.087

**long**是原始类型，**Long**是 Object 类型。它基于您的需要。>=Java5 版本，不需要显式类型转换

# java - Java中奇怪的if-then行为

> ID：13860496
> 
> 赞同：2
> 
> 时间：2012-12-13T13:06:31.280
> 
> 标签：java

> **可能重复：**
> [如何比较 Java 中的字符串？](https://stackoverflow.com/questions/513832/how-do-i-compare-strings-in-java)

我有这个代码：

```
 System.out.println(staff.getEmail().length());
    System.out.println(staff.getEmailList());
    if ((staff.getEmail().length() > 0) && (staff.getEmailList() == "Y")) {
        System.out.println(staff.getEmail()); 
```

这是我的 Eclipse 控制台上的输出：

```
12
Y 
```

我的问题是，即使 if 语句中的两个条件都满足，我的程序永远无法到达上面的最后一行代码（System.out.println(staff.getEmail())）。我也没有任何错误。

有什么想法我做错了什么吗？谢谢 ：）

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T13:07:17.747

您应该使用[`String.equals()`](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#equals%28java.lang.Object%29)而不是运算符 == 在 java 中进行字符串相等。

`staff.getEmailList() == "Y"`应该转换成`"Y".equals(staff.getEmailList())`

其原因是`operator==`检查*身份*。如果两个操作数是同一个对象（引用同一个对象），while`equals()`检查是否*相等*- 如果两个操作数彼此相等。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:10:53.473

在这里，您比较的不是实际的字符串值，而是它们的引用（C 语言中的指针）。

```
(staff.getEmailList() == "Y") 
```

你应该做这个

```
(staff.getEmailList().equals("Y")) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T13:11:25.237

当您进行比较时，`staff.getEmailList() == "Y"`您是在询问两个字符串是否是相同的`String`实例，而不是它们是否具有相同的值。你应该`staff.getEmailList().equals("Y")`改为。

# node.js - npm：从项目文件夹内的任何位置运行 package.json 中的脚本

> ID：13860497
> 
> 赞同：16
> 
> 时间：2012-12-13T13:06:32.583
> 
> 标签：node.js, path, npm

我正在使用`scripts`package.json 文件中的部分来存储一些我必须定期运行的命令。

```
 "scripts": {
    "test": "./test/phantomjs ./test/js/run_jasmine_test.coffee ./test/index.html",
    "rjs": "r.js -o ./js/app.build.js",
    "less": "lessc -x ./css/app.less > ./css/app.css"
  } 
```

在每个命令中，我`./`在路径的开头都有一个 - 这就是为什么我只能`npm run-script rjs`从项目的根目录调用。有没有办法在 package.json 中引用项目的根目录，以便我可以`npm test`从项目中的任何地方运行，例如？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2017-03-05T23:17:29.283

我认为这取决于您组织项目的方式。

我创建了一个示例项目只是为了演示。这是我的示例项目目录树：

```
.
├── dir1
│   └── dir2
├── package.json
├── src
│   └── index.js
└── test
    └── test.js 
```

**注意：** `./dir1/dir2`只是两个用于演示的空目录。

我的`package.json`文件如下所示：

```
{
  "name": "sample",
  "version": "1.0.0",
  "description": "sample",
  "main": "index.js",
  "scripts": {
    "test": "node test/test.js",
    "start": "node src/index.js"
  },
  "author": "yaniv",
  "license": "ISC"
} 
```

专注于脚本部分，那是两条简单的线，没有考虑我的位置。

如果我将目录更改为`/dir1/dir2`并执行并且我在属性上`npm test`编写的脚本在不使用的情况下正确执行（它定义了当前目录......）`test``./`

**底线**- 我想如果你重新组织你的项目并删除`./`将在你的情况下完成这项工作。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2020-06-06T04:16:59.433

## INIT_CWD

`INIT_CWD`我们可以通过npm为我们设置 的环境变量来引用项目的根目录！

从[文档](https://docs.npmjs.com/cli/run-script)：

> 脚本从模块的根目录运行，无论您调用 npm run 时当前的工作目录是什么。如果您希望脚本根据您所在的子目录使用不同的行为，您可以使用**INIT_CWD**环境变量，它保存您在运行 npm run 时所在的完整路径。

例子：

```
"tas:adminApp:build": "cd src/KidoService/AdminApp && npm run build && cd $INIT_CWD && gulp build_copyAdminApp", 
```

只是因为我爱想太多！

**如果我们没有为我们设置这样的变量怎么办！**

我们可以在所有开始时执行一个环境变量设置命令！`export ROOT_DIR=$PDW`！

然后在我们需要的时候！我们可以使用它！

上面的例子会变成

```
"tas:adminApp:build": "export ROOT_DIR=$PDW && cd src/KidoService/AdminApp && npm run build && cd $ROOT_DIR && gulp build_copyAdminApp", 
```

你可以看到这是一个很好的技术！我们可以使用它来引用一些我们想要返回的目录！

对于我们使用的窗户`set VAR=VALUE`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T01:32:10.927

考虑创建一个运行的shell文件？

例如创建一个 .sh 文件使其可执行（chmod 777 file.sh）

然后 cd 到你的 nodejs 项目根目录，运行 npm 命令，然后 cd 回到你刚刚离开的目录？

将脚本添加到您的环境将使其可以从任何地方执行...

或者硬编码完整路径可以吗？（所以而不是使用 ./ - 放 /home/user/username/yourproject/phantomjs）

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-03-11T13:56:31.860

我发现一个更好的选择是创建一个 js 脚本而不是 shell 脚本。根据我的经验，处理 npm 似乎更容易。然后，您可以在运行命令之前检查您所处的环境。我们有 Windows、macs 和 ubuntu 的人，检查环境或使用 fs 包让生活更轻松。

# sql - 修复 DBCC 报告的大量约束问题

> ID：13860499
> 
> 赞同：0
> 
> 时间：2012-12-13T13:06:38.893
> 
> 标签：sql, dbcc

在关闭约束检查的批量加载后，我在外键列中有一些记录要删除，因为它们违反了约束。DBCC 很好地表明了它们，但是有没有一种简单的方法来获得这个 [colARef] = 'XXX' DBCC 表示法的违规值？我的意思是不解析它，获取能够查找主键然后删除的值。
谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:17:31.343

根本不查看 DBCC 输出，您可以发现约束违规，例如：

```
select  *
from    ReferencingTable t1
where   not exists
        (
        select  *
        from    ReferencedTable t2
        where   t1.ForeignKeyColumn = t2.Id
        ) 
```

# opencv - 在 HSV 图像中执行 Canny Edge

> ID：13860503
> 
> 赞同：0
> 
> 时间：2012-12-13T13:07:08.570
> 
> 标签：opencv, colors, hsv

我已将 BGR 图像转换为 HSV 以检测黑色圆圈，那么我如何在 HSV 图像上执行 Canny 边缘？我试过了，但它根本不起作用。

```
IplImage *capturedImg = cvLoadImage("template.jpg",1);
IplImage* imgHSV = cvCreateImage(cvGetSize(capturedImg), 8, 3);
cvCvtColor(capturedImg, imgHSV, CV_BGR2HSV);
IplImage* imgThreshed = cvCreateImage(cvGetSize(capturedImg), 8, 1);

cvInRangeS(imgHSV, cvScalar(0, 0,0), cvScalar(255, 255, 38),imgThreshed);
cvShowImage("HSV",imgThreshed);
IplImage*cannyImg2=cvCreateImage(cvGetSize(imgThreshed),8,1);
cvCanny(grayscaleImg2,cannyImg2,0,255,3);
 cvShowImage("canny2",cannyImg2); 
```

第一个图像是眼睛检测，然后我使用HSV图像检测瞳孔，那么我怎么知道瞳孔的位置和半径呢？ ![在此处输入图像描述](../Images/c2f93953205618a498cd2fd235dbb588.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T04:37:56.400

我相信这条线：

```
cvCanny(grayscaleImg2, cannyImg2, 0, 255, 3); 
```

应该改为：

```
cvCanny(imgThreshed, cannyImg2, 0, 255, 3); 
```

因为您想在阈值蒙版上找到轮廓。

# titanium - 执行（）的插入查询返回空......奇怪的行为：Titanium（Android）

> ID：13860514
> 
> 赞同：0
> 
> 时间：2012-12-13T13:07:30.353
> 
> 标签：titanium

我在 sqlite manager 中创建了一个数据库，现在想在其中插入一些数据。在执行

```
var resultSet =dbConn.execute(query, valueArray); 
```

结果集返回空值。

但是当我执行`dbConn.getRowCount()`它确认该行已被添加。

即使在返回 null 之后，execute('INSERT...') 是否有可能成功完成！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T21:40:00.820

是的。它不返回结果集。如果有 SQL 错误，它会被抛出。

[https://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/TiDatabaseProxy.m#L174](https://github.com/appcelerator/titanium_mobile/blob/master/iphone/Classes/TiDatabaseProxy.m#L174)

# css - 如何在悬停期间为选择标签中的选项提供不同的背景颜色

> ID：13860521
> 
> 赞同：3
> 
> 时间：2012-12-13T13:07:47.157
> 
> 标签：css

```
<select name=""   id="gender"  name ="gender" class="genderClass">
<option value="0">Please select gender</option>
<option value="1">Male</option>
<option value="2">Female</option>
</select> 
```

这是课程：

```
.genderClass:hover
{
    background: gray;
} 
```

目前`mouseover`到`select`标签给我灰色。但是当打开标签和选项时，我如何设置`background-color`选项，而我`mouseover`就可以了。IE。如果我将鼠标移到女性上`option`，`background-color`则应将其更改为灰色。我怎样才能做到这一点？

[jsfiddle链接](http://jsfiddle.net/reshmasalim/K2hdP/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:13:44.420

我认为你不能只使用它，`css`但使用`javascript`你可以使用自定义选择来实现它。如果您使用`jQuery`，那么下面是您可能喜欢的两个插件示例。

1.  [Sparkbox Custom-Selectbox](https://github.com/sparkbox/Custom-Selectbox)和[此处的示例](http://jsfiddle.net/yDzgu/)。
2.  [jQuery 自定义选择框](http://info.wsisiz.edu.pl/~suszynsk/jQuery/demos/jquery-selectbox/)和[此处的示例。](http://jsfiddle.net/TP98Q/1/)

[如果你像这样](https://www.google.com/search?q=javascript+custom+select&oq=javascript+custom+select&aqs=chrome.0.57j62l3.13384&sugexp=chrome,mod=5&sourceid=chrome&ie=UTF-8)在谷歌上搜索，你也可以找到更多。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:18:52.890

无法指定所选选项以更改其背景颜色。将背景应用于 select 或 option 标签将更改整个 select 上的背景，除了选定的条目或所有选项，除了选定的条目。

我认为可以更改所选条目背景颜色的唯一方法是通过您在计算机上的操作系统中定义的主题，这只会为您而不是您的访问者更改。

# java - .java 文件路径到类名

> ID：13860523
> 
> 赞同：-1
> 
> 时间：2012-12-13T13:07:57.077
> 
> 标签：java, javac, abstract-syntax-tree, javap

在 .java 文件上创建类的最有效方法是什么？我有 .java 文件路径，我需要获取类全名。

我只记得：

1.  [用JavaCompiler](http://docs.oracle.com/javase/7/docs/api/javax/tools/JavaCompiler.html)编译它
2.  使用文件文本通过 Eclipse [ASTParser](http://help.eclipse.org/indigo/index.jsp?topic=/org.eclipse.jdt.doc.isv/reference/api/org/eclipse/jdt/core/dom/ASTParser.html)（或其他）解析它
3.  通过部分文件路径推断类名，但我不知道这是否适用于所有情况
4.  不知何故，使用像[javap](http://docs.oracle.com/javase/1.5.0/docs/tooldocs/windows/javap.html)这样的工具（真的没有想过这个）

**编辑**

我有这个文件，位于`C:\myfolder\MyClass.java`（让我们忽略包和文件夹关联约定）：

```
package mypackage.mysubpackage;

public class MyClass 
{
    // my class implementation here

    public class MyInnerClass 
    {
        // my inner class implementation here
    } 
} 
```

该文件中声明的类的全名是：

1.  `mypackage.mysubpackage.MyClass`
2.  `mypackage.mysubpackage.MyClass.MyInnerClass`（我不知道这个是否正确，但让我们假装是）

当我只有 .java 文件路径 () 时，如何获取这些类`C:\myfolder\MyClass.java`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:30:57.787

> 我有 .java 文件路径，我需要获取类全名。

这意味着，您知道 .java 文件的路径，并且需要每个类文件的类名。

```
class Filter {

public static void main(String[] a) {
    Filter f = new Filter();
    String dirName = "D:\\Yourfolder\\";  // assuming your java file are located in D:\Yourfolder\
    f.finder(dirName);  // call the method for listing all the class file
}

public File[] finder(String dirName) {

    File dir = new File(dirName);

    return dir.listFiles(new FilenameFilter() {

        public boolean accept(File dir, String filename) {
            if(filename.endsWith(".class"))
            {
            System.out.println(filename);
            }
            return filename.endsWith(".class");

        }
    });

} 
```

}

将**dirName**替换为您的`.java`目录路径。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:09:59.283

最有效的方法是`Class.forName().getName()`

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T15:53:37.817

可靠地获取 .java 文件声明的类名称（注意它也可能定义接口）文件的唯一方法是真正解析该文件中包含的 java 语言。

即使*这样*，您也需要*知道*将/已使用哪个编译器来编译 .java 文件，因为 java 编译器*可以*对匿名类使用它喜欢的任何命名约定（Oracle 编译器使用 $1、$2...，但是没有严格的需要模仿这种行为）。

考虑到这些障碍，我认为从 .java 文件内容很难做到这一点，而且仅靠 .java 文件路径根本不可能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-09-10T00:50:54.980

一种方法是扫描 Java 源文件所在的目录树，对于每个以“.java”结尾的文件，将其完整文件夹路径作为字符串并将每个目录分隔符转换为“。” 特点。这将为您提供完全限定的类名 (FQCN)。例如，如果路径是：com\foo\fee\Foo.java，则变为 com.foo.fee.Foo。

当然，这并没有给你内部或嵌套类和其他高级的东西，但是这些是在你编译时创建的。

我在很多框架中都看到过这种目录扫描，甚至是 Spring。

我正在 Groovy 中处理这个问题，到目前为止我有：

```
File file = new File(rootSourcePath)

file.eachFileRecurse(FILES){
    def path =it.getAbsolutePath()
    println path

    if(path.endsWith(".java")){
           // to do the conversion here
    }
} 
```

希望这能正确解释您的问题。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-13T13:29:23.993

获取类文件的名称试试这个

```
 void printClassName(String classname) 

        {

          System.out.println("The class name " + classname +" is " + classname.getClass().getName());

        } 
```

# python - 具有 ReferenceProperty 和连接表的 Python 模型

> ID：13860524
> 
> 赞同：1
> 
> 时间：2012-12-13T13:07:58.753
> 
> 标签：python, google-app-engine

我相信这对 Python 来说很琐碎但相当新。

我正在尝试使用谷歌应用引擎创建一个模型。

基本上从 E/R 的角度来看，我有 2 个带有连接表的对象（连接表捕获连接的时间点）像这样

```
Person      | Idea     | Person_Idea
-------------------------------
person.key   idea.key    person.key
                         idea.key
                         date_of_idea 
```

我的 Python 代码看起来像

```
class Person (db.Model):
  #some properties here....

class Idea(db.Model):
  #some properties here....

class IdeaCreated(db.Model):
  person= db.ReferenceProperty(Person)
  idea= db.ReferenceProperty(Idea)
  created = db.DateTimeProperty(auto_now_add = True) 
```

我想要做的是有一种方便的方式来获取一个人的所有想法（绕过想法创建的对象）——有时我会直接需要想法列表。

我能想到的唯一方法是在 User 类上添加以下方法

```
def allIdeas(self):
  ideas = []
  for ideacreated in self.ideacreated_set:
     ideas.append(ideacreated.idea)
  return ideas 
```

这是唯一的方法吗？我有更好的方法吗？

还假设我可以有一个 GQL 并绕过对ideaCreated 实例进行水合（不确定确切的语法），但将 GQL 查询对我来说是错误的。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T14:21:01.597

您应该将该人用作该想法的祖先/父母。

```
idea = Idea(parent=some_person, other_field=field_value).put() 
```

然后您可以查询 some_person 是祖先的所有想法

```
persons_ideas = Idea.all().ancestor(some_person_key).fetch(1000) 
```

祖先键将包含在`Idea`实体键中，一旦创建实体，您将无法更改该祖先。

我强烈建议您使用`ndb`而不是`db` [https://developers.google.com/appengine/docs/python/ndb/](https://developers.google.com/appengine/docs/python/ndb/)

`ndb`你甚至可以使用`StructuredProperty`或`LocalStructuredProperty` [https://developers.google.com/appengine/docs/python/ndb/properties#structured](https://developers.google.com/appengine/docs/python/ndb/properties#structured)

**编辑：**
如果您需要多对多关系，请查看 ListProperties 并将 Persons 键存储在该属性中。然后您可以在该属性中使用该键查询所有想法。

```
class Idea(db.Model):
    person = db.StringListProperty()

idea = Idea(person = [str(person.key())], ....).put() 
```

将另一个人添加到想法中

```
idea.person.append(str(another_person.key())).put()

ideas = Idea.filter(person=str(person.key())).fetch(1000) 
```

查看[https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#ListProperty](https://developers.google.com/appengine/docs/python/datastore/typesandpropertyclasses#ListProperty)

# image - 从 MJPG 文件中提取图像帧

> ID：13860525
> 
> 赞同：1
> 
> 时间：2012-12-13T13:07:58.107
> 
> 标签：image, ffmpeg, mjpeg

我正在尝试从 IP cam 的短片中提取图像帧。特别是这个剪辑。

```
http://db.tt/GQwu0nZ8 
```

所以，我试图用 ffmpeg 提取那些帧。

```
ffmpeg -i M00001.jpg -vcodec mjpeg -f image2 image%03d.jpg 
```

我只是得到剪辑的第一帧。我怎样才能得到其余的帧？我可以使用其他工具来获取这些图像吗？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-01-25T20:35:42.763

这可能太多了，但这里有一个用于 Node.js [https://nodejs.org/](https://nodejs.org/)的简短 javascript 程序，它将去除所有可读的帧并将它们保存为当前目录中单独的顺序编号的 jpg 文件。请注意，即使是简短的视频剪辑也可以生成数千帧，并且 Node 使用的 V8 javascript 引擎非常快，因此我建议关闭文件浏览器，因为它会占用资源来跟上。

***如果视频文件太大而无法为其创建缓冲区，Node 将发出错误并退出。***
在这种情况下，最简单的做法是使用您的 shell 实用程序或 HexEdit 之类的程序将文件拆分为多个块。 [http://www.hexedit.com/](http://www.hexedit.com/)

重写此代码以异步处理文件将解决该问题，但编写异步代码仍然让我感到焦虑。

```
var orgFile=process.cwd()+"/"+process.argv[2]; //Grab the video filename from the command line
var fs = require("fs"); //Load the filesystem module
var stats = fs.statSync(orgFile);//Get stats of video file
var fileSizeInBytes = stats["size"];//Get video file size from stats
var fdata=new Buffer(fileSizeInBytes);//Create a new buffer to hold the video data
var i=0;
var fStart=0;
var fStop=0;
var fCount=0;
fdata=fs.readFileSync(orgFile);//Read the video file into the buffer
//This section looks for the markers at the begining and end of each jpg image
//records their positions and then writes them as separate files.
while (i<fileSizeInBytes){

if (fdata[i]==0xFF){
    //console.log("Found FF at "+i.toString);
    if (fdata[i+1]==0xD8){
        //console.log("Found D8 at "+(i+1).toString);

        if (fdata[i+2]==0xFF){
            //console.log("Found FF at "+(i+2).toString);
            fStart=i;
            }
        }
    }
if (fStart>0){
    if (fdata[i]==0xFF){
        if(fdata[i+1]==0xD9){
            fStop=i+1;

        }
    }
if (fStart>0){
    if (fStop>0){
    fCount++;
    fs.writeFileSync(orgFile+"."+fCount.toString()+".jpg",fdata.slice(fStart,fStop));   
    console.log (orgFile+"."+fCount.toString()+".jpg");
    fStart=0;
    fStop=0;
    }
}
}

i++;
}

console.log ("Wrote "+fCount.toString()+" frames."); 
```

如果您将上述代码保存为 mjpeg_parse.js，则调用示例将是：

**节点 mjepeg_parse.js videofile.avi**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:24:13.490

带有的命令可以`ffmpeg`正常工作，但是您需要将 mjpeg 视频指定为输入文件。如果`M00001.jpg`是单个 jpg 图像，那么您将只获得一个（相同的）输出图像。

# zebra-printers - 编程 Zebra Rw-420

> ID：13860527
> 
> 赞同：0
> 
> 时间：2012-12-13T13:08:29.127
> 
> 标签：zebra-printers

谁能向我解释一下它具有的不同打印机模式：cpcl、行打印 epl、ZPL、标签打印......？

1.  这些模式中的每一个是否都是为特定用途而设计的？
2.  有什么区别，为什么有这么多模式？
3.  在打印标签、发票等方面流行哪种模式？

例如，我发现在 cpcl 语言中可用的字体范围很窄。在 ZPL 中还有更多，或者我什至可以将一些上传到设备中。

在 CPCL 中，我很难将打印机配置为使用某些非 Ascii 字符。我会尝试在zpl中绘制文字但不知道是否有缺点..？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-18T19:56:48.677

保留不同的语言既是为了继续支持现有的遗留应用程序，也是因为每种模式都具有独特的优势：

1.  ZPL 非常适合标签打印，就像您在商店货架或运输包装上看到的标签一样。它是一种强大的语言，Zebra 为其提供了最广泛的支持。

2.  行打印模式使打印机简单地打印接收到的任何数据。这在打印可变长度收据时非常有用。

3.  CPCL 提供类似于 ZPL 的功能，我将其解释为不太“漂亮”的语法。它对换行符和大小写敏感。

ZPL 可能是适合您的方式，尤其是在您打印静态长度的标签时。

# sql - PL/SQL - 在哪里更新和在哪里回滚

> ID：13860528
> 
> 赞同：3
> 
> 时间：2012-12-13T13:08:31.003
> 
> 标签：sql, oracle, plsql

我对 PL/SQL 很陌生，我必须稍微使用它。我必须制作一些非常相似的功能。我为这个问题简化了它。

我有 2 个表（在本例中称为 TABLE1、TABLE2），其中包含一些数据。我必须修剪、验证数据并将其插入到其他表中。

表 1 -> 表 3 表 2 -> 表 4

TABLE1 有一些订单，而 TABLE2 每个订单有几个位置。正如我所说的那样，它被简化了，所以我没有发布异常或打开/关闭游标等内容。 Atm 它的工作原理是这样的，但我认为这种结构并不接近“最佳实践”，但我没有找到网络上任何涵盖此问题的 PL/SQL 代码，尽管它一定很常见。

我猜 COMMIT 可能在外循环的末尾，甚至可能在整个函数之后。

所以你能告诉我这样可以还是完全愚蠢，我应该/可以改变什么以及为什么。我不想习惯“糟糕”的编码风格，所以我想在我还是初学者的时候以正确的方式学习它。

这是简化的代码：

```
BEGIN
    SAVEPOINT SAVE_Stufe_5;
    LOOP
        SAVEPOINT SAVE_LOOP;
        FETCH CURSOR1 INTO RECORD1;
        EXIT WHEN CURSOR1%NOTFOUND OR CURSOR1%NOTFOUND IS NULL;
        vError  := 0;
        RECORD1 := CURSOR1;
        -- DATAVALIDATION (vError will be the Errorcode)
        IF (vError = 0) THEN
            retcode := InsertTABLE3(RECORD1);
            IF (retcode != DATABASE_OK) THEN
                ROLLBACK TO SAVE_LOOP;
            END IF;
        END IF;
        LOOP
            FETCH CURSOR2 INTO CURSOR2;
            EXIT WHEN CURSOR2%NOTFOUND OR CURSOR2%NOTFOUND IS NULL OR vError != 0 OR retcode != DATABASE_OK;
            RECORD2 := CURSOR2;
            -- DATAVALIDATION (vError will be the Errorcode)
            IF (vError = 0) THEN
                retcode := InsertTABLE4(RECORD2);
                IF (retcode = DATABASE_OK) THEN
                    UPDATE TABLE2
                    SET    TABLE2.Status = 20
                    WHERE  TABLE2.ID     = CURSOR2.ID;
                ELSE
                    ROLLBACK TO SAVE_LOOP;
                END IF;
            END IF;
        END LOOP;
        IF (vError = 0) THEN
            UPDATE TABLE1
            SET    TABLE1.Status = 20
            WHERE  TABLE1.ID     = CURSOR1.ID
        ELSE
            ROLLBACK TO SAVE_LOOP;
            UPDATE TABLE1
            SET    TABLE1.Status = vError
            WHERE  TABLE1.ID     = CURSOR1.ID

            UPDATE TABLE2
            SET    TABLE2.Status = vError
            WHERE  TABLE2.ID     = CURSOR2.ID
        END IF;
    END LOOP;
END; 
```

小更新：

我设法进行了基于验证集的操作，尽管我真的不知道如何将我的数据放入另一个表中。我尝试了一个带有修剪的插入选择，但它只插入一行。如果我按照建议使用隐式游标，我仍然必须循环，我不会循环游标，但 SELECT INTO 就隐式游标只有一行。

我想我真的需要一个片段或一些链接来帮助我。这是我尝试的简化版本：

```
INSERT INTO TABLE3
(
  val1,
  val2,
  val3
)
SELECT TRIM(val1),
       TRIM(val2),
       TRIM(val3),
FROM   TABLE1
WHERE  STATUS = 10
AND    (TRIM(PK1) || TRIM(PK2)) NOT IN (SELECT (TABLE3.PK1 || TABLE3.PK2) FROM TABLE3); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:36:28.103

一般来说，通过循环在 SQL 中做事是不好的风格。与基于集合的解决方案相比，这样的循环将非常慢。除了所有这些循环之外，最好使用单个`insert`or`merge`语句将所有表 1 复制到表 3 中，或者如果您的验证很复杂并且需要一些中间步骤，则可能使用一些语句。

您想要执行的大多数类型的修剪和数据验证都可以这样处理。几乎从不需要嵌套循环。有例外，但很少见。那些刚接触 SQL 的人倾向于使用循环，因为这是我们从其他语言中知道的。不久前我属于那个类别。但要真正使用语言的力量，你必须超越它。

除了这一点之外，如果我们对表格或您正在执行的验证一无所知，则无法提供太多具体帮助。

何时应该`commit`还取决于您的特定设计以及您要完成的工作。

# asp.net - Unity 注入到 asp.net web api 控制器和过滤器

> ID：13860536
> 
> 赞同：2
> 
> 时间：2012-12-13T13:08:51.627
> 
> 标签：asp.net, asp.net-mvc, dependency-injection, asp.net-web-api, unity-container

我有 WebForms 项目，并且有 WebApi 控制器。我如何注入控制器构造函数和动作过滤器构造函数？

我已经在( ) 中实现`IDependencyResolver`并使用了它，但它没有帮助：请求控制器说没有默认构造函数，应用程序启动时的过滤器说它不包含带 0 个参数的构造函数。`Global.asax``GlobalConfiguration.Configuration.DependencyResolver`

此外，我需要单音注入到动作过滤器。

谢谢。

**UPD**

 ````
public class ScopeContainer : IDependencyScope
{
    protected readonly IUnityContainer _container;

    public ScopeContainer(IUnityContainer container)
    {
        _container = container;
    }

    public object GetService(Type serviceType)
    {
        return _container.IsRegistered(serviceType) ? _container.Resolve(serviceType) : null;
    }

    public IEnumerable<object> GetServices(Type serviceType)
    {
        return _container.IsRegistered(serviceType) ? _container.ResolveAll(serviceType) : new List<object>();
    }

    public void Dispose()
    {
        _container.Dispose();
    }
}

public class IoCContainer : ScopeContainer, IDependencyResolver
{
    public IoCContainer(IUnityContainer container) : base(container)
    {
    }

    public IDependencyScope BeginScope()
    {
        var child = _container.CreateChildContainer();

        return new ScopeContainer(child);
    }
}

public class Global : HttpApplication
{
    void Application_Start(object sender, EventArgs e)
    {
        RegisterRoutes();
        ConfigureApi(GlobalConfiguration.Configuration);
    }

    void ConfigureApi(HttpConfiguration config)
    {
        var unity = new UnityContainer();

        unity.RegisterInstance<ILogger>(new Logger());
        unity.RegisterType<IRepository, DbRepository>();

        config.DependencyResolver = new IoCContainer(unity);
    }

    private static void RegisterRoutes()
    {
        RouteTable.Routes.MapHttpRoute("ServiceApi", "api/{controller}/{action}");
    }
} 
````  `* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T16:27:00.127

我认为这可能是您注册路线的方式。

WebApi 路由通过`GlobalConfiguration.Routes`而不是`RouteTable.Routes`MVC 控制器使用的在默认项目示例中注册。如果 MVC 路由方法错误地加载了 ApiController，它将找不到您的依赖关系解析器。

尝试将您的代码修改为：

```
public class Global : HttpApplication
{
    void Application_Start(object sender, EventArgs e)
    {
        RegisterRoutes(GlobalConfiguration.Configuration);
        ConfigureApi(GlobalConfiguration.Configuration);
    }

    void ConfigureApi(HttpConfiguration config)
    {
        var unity = new UnityContainer();

        unity.RegisterInstance<ILogger>(new Logger());
        unity.RegisterType<IRepository, DbRepository>();

        config.DependencyResolver = new IoCContainer(unity);
    } 

    private static void RegisterRoutes(HttpConfiguration config)
    {
        config.Routes.MapHttpRoute("ServiceApi", "api/{controller}/{action}");
    }

} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2015-09-19T03:38:47.947

我遇到了同样的问题，我正在做一个项目，试图通过将页面逐页转换为 Web API / Angular 来帮助使旧的 Web 表单项目现代化，并且让管道恰到好处地使用 Unity 是关键。

当我在跟踪时，我注意到 unity 试图解析控制器类，而不是注入其构造函数的类型，所以我注册了我的控制器并且一切正常。请参阅下面的示例

配置设置，注册控制器和依赖

```
void ConfigureApi(HttpConfiguration config)
{
        var container = UnitySingleton.UnityContainer;
        container.RegisterType<IDashboardManager, ExampleStuff>();
        container.RegisterType<DashboardController>(new InjectionConstructor(container.Resolve<IDashboardManager>()));
        config.DependencyResolver = new UnityIoCContainer(container);
} 
```

我的控制器示例：

```
public class DashboardController : ApiController
{
    private readonly IDashboardManager _dashboardManager;

    public DashboardController(IDashboardManager dashboardManager)
    {
        _dashboardManager = dashboardManager;
    }

    public async Task<IEnumerable<string>> Get()
    {
        return await _dashboardManager.GetDatas();
    }
} 
```

这就是我的工作方式。这与上面的文章有点不同。`

# qt - QT：使用 uo 和向下箭头时的 QListwidget 信号

> ID：13860537
> 
> 赞同：2
> 
> 时间：2012-12-13T13:08:55.783
> 
> 标签：qt

我有 QListwidget 对象，我正在使用它的信号，例如：itemDoubleClicked,itemClicked...

当我使用向上/向下箭头浏览 QListwidget 项目时是否有信号？一般来说，我希望每次选择一个项目（通过单击/双击/向上和向下箭头）来运行一个功能。

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T13:16:57.977

我认为标准应该是

```
QListWidget::itemSelectionChanged() 
```

并在您的函数中使用：

```
QListWidget::selectedItems () 
```

获取当前选择。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:30:29.900

您可以通过安装和实现*eventFilter*来做到这一点。您可以过滤您想要的每个事件。甚至鼠标或键盘。因此，您想阅读一些文档：[Docs](http://doc.qt.digia.com/qt/eventsandfilters.html#event-filters)

请记住，一旦定义了*eventFilter ，您必须使用**installEventFilter*安装它：[installEventFilter](http://qt-project.org/doc/qt-4.8/qobject.html#installEventFilter)

# modx - MODX - 俏皮显示扩展字段 - 使用 phpthumbof 的照片

> ID：13860539
> 
> 赞同：0
> 
> 时间：2012-12-13T13:08:57.537
> 
> 标签：modx

*   讽刺
    *   phpthumbof

我在我的网站上运行了 Quip，并且我正在使用一个片段从评论的作者那里调用一个扩展的个人资料字段来显示用户个人资料图像。

**片段**

```
<?php
if (!empty($userid)) {
$user = $modx->getObject('modUserProfile', array('id' => $userid) );
$extendedfields = $user->get('extended');
$output = $extendedfields[$field];
}
if (isset($output)) { return $output;}
return $default; 
```

在我的 Quip.comment TPL

```
 <div class="quip-comment-right">
<img src="[[!quip_profile_image? &userid=`[[+author]]` &field=`nomination_file` &default=`text`]]" />
     </div> 
```

以上工作完美，我可以看到图像，但我不知道如何添加 PHPthumbof，更改大小等....

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:30:14.517

```
$output = $modx->runSnippet('phpthumbof',array(
   'input' => $output,
   'options' => '&w=640&h=480&zc=0&aoe=0&far=0'
)); 
```

# linux-kernel - CentOS 6.3 的内核模块签名

> ID：13860540
> 
> 赞同：3
> 
> 时间：2012-12-13T13:09:01.213
> 
> 标签：linux-kernel, centos, redhat, rpm, rpmbuild

在编译内核并从中引导时，我遇到了与[http://bugs.centos.org/view.php?id=5007](http://bugs.centos.org/view.php?id=5007)中描述的完全相同的问题。

该错误被标记为已关闭，并且有评论说不需要更改。

我不明白解决方案是什么：

1.  我应该获得适用于 CentOS 的 extrakeys.pub 吗？或者
2.  我应该用“redhat”替换“CentOs”吗

    gpg --homedir 。--export --keyring ./kernel.pub CentOS > extract.pub

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-20T07:54:26.160

经过长时间的调查，我发现了我的问题。

[这是由与此问题](https://stackoverflow.com/questions/13929176/error-inserting-scsi-wait-scan-invalid-module-format/13951635#13951635)相同的问题引起的。

# iphone - 实现 NSFetchedResultsSectionInfo

> ID：13860547
> 
> 赞同：0
> 
> 时间：2012-12-13T13:09:11.523
> 
> 标签：iphone, objective-c, ios, core-data, nsfetchedresultscontroller

我有相当大量的数据，我想将其划分为自定义部分，用于基于某些键路径的部分和其他一些条件的其他部分。所以我想出了子类的想法`NSFetchedResultsController`。这个子类应该提供在其返回数组的`NSFetchedResultsController`方法中返回部分的灵活性。如果我可以通过自己的符合协议的类来实现，然后在 section 方法中传递对象的自定义数组，我想我可以完成我的任务。`-(NSArray*)sections``id<NSFetchedResultsSectionInfo>``fetchedResultsController`

有没有办法`NSFetchedResultsSectionInfo`在您自己的类中实现，然后在`fetchedResultsController`子类中返回此类对象的自定义数组？还是有一些图书馆可以做到这一点？

编辑

让我描述一下我想要实现的目标。我有联系人模型作为 NSManagedObject 子类。这个实体有一个称为状态的属性，它可以是未知的、已知的和无法识别的。现在，我希望对这些联系人进行分区，以使所有未知联系人都出现在一个分区中，而身份不明的联系人也应该出现在另一个不同的分区中。现在，所有其他已知联系人应根据联系人姓名位于不同的部分。如何才能做到这一点 ？

我的表格视图应填充为；

```
Unknown Contacts (sorted into a single section according to date )
  - 
  -
Known Contacts(A)(known contacts sorted into different sections according to the name)
  -
  -
Known Contacts(B)
  -
  -
  -
Known Contacts(C)
  -
  -
  -
  -
  -
  -
Known Contacts(Z)
 -
UnIdentified Contacts(sorted into a single section with first name)
  -
  -
  - 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T17:01:18.273

`NSFetchedResultsController`已经实现了这一点。

```
NSArray* sectionsArray = self.fetchedResultsController.sections; 
```

要实现特殊部分，请遵循 Apple 示例代码[DateSectionTitles](http://developer.apple.com/library/ios/#samplecode/DateSectionTitles/Introduction/Intro.html)中的原则。模式如下：

*   创建一个新的瞬态属性`sectionIdentifier`。就像在示例代码中一样，也在`primitiveSectionIdentifier`您的托管对象子类中包含该属性。这是您`sectionNameKeyPath`在 FRC 中使用的属性。

*   设计一个正确排序的方案。将所有排序和计算逻辑放入类实现文件的自定义 getter 中`sectionIdentifier`。例如，您可以简单地使用在大写字母“A”*之前*排序的两个字符，这可能是您的常规节标题中的第一个。你也可以把它变成一个数字，比如 1 和 2 表示你的前两个部分，3+ 表示字母表中的第一个字母。

*   解码您的方案`titleForHeaderInSection`以显示所需的内容。

我最近为一个客户做了这个，他有一个非标准编码方案，用于指示一些营销细分的大量联系人列表。部分标识符的数据也是从几个不同的属性中提取的。

# c - 增量运算符中的左值问题

> ID：13860569
> 
> 赞同：1
> 
> 时间：2012-12-13T13:10:47.800
> 
> 标签：c, post-increment, pre-increment

> **可能重复：**
> [谁能解释这些未定义的行为（i = i++ + ++i，i = i++ 等……）](https://stackoverflow.com/questions/949433/could-anyone-explain-these-undefined-behaviors-i-i-i-i-i-etc)

```
#include<stdio.h>

int main()
{
  char a[]="Hello";
  char *p=a;
  while(*p)
    ++*p++;     //Statement 2
    printf("%s",a);
    int x=10;
    ++x++; //Statement 1
   return 0;
} 
```

当我编译这段代码时，我在语句 1 中得到一个 l-value Required 错误，我可以理解。即使我打算做同样的事情，语句 2 怎么不会产生错误？有人可以阐明吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T13:40:51.307

前增量和后增量都会产生右值，而右值不能被修改。

所以`++x++`（语句 1）显然违反了约束，编译器给出了错误。

但语句 2 并非如此。虽然`p++`产生了一个无法修改其值的右值，但它可以被*取消引用*。或者，如果你这样做`++p++`将等同于这种`++x++`情况并会给出错误。因为这里指针本身被修改了。

所以它相当于：`++(*p++)`.

*（请注意，括号仅用于理解，不是必需的。表达式`++*p++`是明确定义的。）*

会发生什么：

*   在本例中，后增量`p++`计算为 的旧值，并且 的存储值递增。`p``&a[0]``p`
*   `*p++`给出在`p`增量之前指向的值，在这个例子`a[0]`中。
*   最终的预增量会增加该值，因此`a[0]`变为`I`（可能是 EBCDIC 机器上的其他内容）。

`p`当和的递增值`a[0]`被存储时未指定，但两者都必须存储在下一个序列点（终止`;`）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:14:38.723

引用 ISO C99 标准：

```
6.5.2.4 Postfix increment and decrement operators 
```

`Constraints
1
The operand of the postfix increment or decrement operator shall have qualified or unqualified real or pointer type and shall be a modifiable lvalue.`

对于这种情况：

```
++*p++;     //Statement 2 
```

后缀`++`具有更高的优先级和前缀`++`，`*`具有相同的优先级和`right to left`关联性。这意味着在第一步它增加指针而不是它的值。所以它会给你那个的下一个地址`type`。然后`value (which is actually *p)`递增。所以，在这种情况下没有 `constraint violation`。它与 相同`++(*(p++))`。

对于以下其他情况：

```
 int x=10;
 ++x++; //Statement 1 
```

在上述变量（不是指针）的情况下`++`（后缀或前缀增量或减量）给你`rvalue`, 然后应用`++`或`--`on `rvalue`is `constraint violation`。`++`或`--`操作数应该是一个`lvalue`. 请参阅上面写的标准报价。因此给出错误。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T15:33:33.897

```
#include<stdio.h>

int main()
{
  char a[]="Hello";
  char *p=a;
  while(*p)
    ++*p++;     //Statement 2
    printf("%s",a);
    int x=10;
    ++x=x++; //Statement 1
   return 0;
} 
```

//由于同时前后递增，此代码将获取相同的错误。因为它不能同时分配和递增，所以需要一个值来对其执行递增。

# asp.net - Visual Studio 2010 崩溃

> ID：13860576
> 
> 赞同：0
> 
> 时间：2012-12-13T13:11:36.663
> 
> 标签：asp.net, syncfusion

我一直在运行 Visual Studio 2010，当我拖放“GridGroupingControl”时，我的 VS 崩溃了。

```
Here is the Problemsignatur:
 Problem Event Name:    APPCRASH
 Problemsignatur 01:    devenv.exe
 Problemsignatur 02:    10.0.40219.1
 Problemsignatur 03:    4d5f2a73
 Problemsignatur 04:    KERNELBASE.dll
 Problemsignatur 05:    6.1.7601.17651
 Problemsignatur 06:    4e211319
 Problemsignatur 07:    80042b8c
 Problemsignatur 08:    0000b9bc
 Betriebsystemversion:    6.1.7601.2.1.0.256.4
 Gebietsschema-ID:    1031 
```

我正在运行 Windows 7 企业版 (x64)。谁能帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T12:36:12.127

我们已经分析了有关“GridGroupingControl”问题的更多信息，我们怀疑该问题可能与 VS2010 有关，因为该问题未在任何其他软件包中重现。我们已经在论坛中发布了这个问题，并将崩溃的转储文件作为 msdn 请求。请参考这个[链接](https://connect.microsoft.com/VisualStudio/feedback/details/671773/visual-studio-gets-crashed-on-dragging-and-dropping-custom-control-from-toolbox-to-designer-page)

我们正在等待来自 msdn 的更新。一旦我们从 msdn 获得更新，我们会尽快回复您。

如果您有任何其他问题或疑虑，请告诉我。

# php - WordPress wp-load.php

> ID：13860577
> 
> 赞同：17
> 
> 时间：2012-12-13T13:11:41.480
> 
> 标签：php, plugins, wordpress

我正在尝试对插件进行逆向工程：[http ://wordpress.org/extend/plugins/wordpress-social-login/](http://wordpress.org/extend/plugins/wordpress-social-login/)

在其中的一部分中，有这样一行：（
我很难理解第一个，其余的只是供参考，如果他们有事要做。）

```
require_once( dirname( dirname( dirname( dirname( __FILE__ )))) . '/wp-load.php' );

define( 'WORDPRESS_SOCIAL_LOGIN_PLUGIN_URL', plugins_url() . '/' . basename( dirname( __FILE__ ) ) ); 
define( 'WORDPRESS_SOCIAL_LOGIN_HYBRIDAUTH_ENDPOINT_URL', WORDPRESS_SOCIAL_LOGIN_PLUGIN_URL . '/hybridauth/' ); 
```

我的问题是......这个`wp-load.php`文件中到底有什么代码需要它？通过查看它，我所了解的是它加载了关键的核心 wordpress 文件以使站点正确运行（`functions.php`,`wp-settings.php`等`wp-config.php`...）
插件已经运行的事实是否意味着`wp-load.php`已加载？
此外，这完全浪费了资源，因为它包含了很多文件，其中可能还包含其他文件，并且它就像一个无限循环的所需文件，每个文件都在另一个文件中，被加载两次..（如果其他插件使用这个，甚至更多也是一种方法）

那么它究竟是做什么的呢？

附言; 我通过谷歌找到的只是如何正确地包含它（因为路径是可以改变的）——但这不是我的问题/问题。

* * *

## 回答 #1

> 赞同：38
> 
> 时间：2012-12-23T21:28:18.557

> 我的问题是......这个`wp-load.php`文件中到底有什么代码需要它？

所有核心 WordPress 功能。这包括主题文件、活动插件的所有文件等。**但是**以这种方式加载 WordPress 不会解析请求的 URL 并且不会运行 WordPress 查询（通过初始化 WP 对象，也不会 WP_Query 对象）。

> 通过查看它，我所了解的只是它加载了关键的核心 wordpress 文件，以使网站正确运行（`functions.php`,`wp-settings.php`等`wp-config.php`...）

是的，你理解正确。

> 插件运行的事实不是已经加载了 wp-load.php 吗？

如果插件代码是由 WordPress 调用的（例如为了显示管理页面，或者它包含在最初加载的插件文件中） - 那么是的，这意味着`wp-load.php`已经加载。

但有时，插件会将请求定向到单个文件（例如`http://example.com/wp-content/plugins/my-plugin/sample.php`），而不是某些 WordPress 驱动的页面（例如`http://example.com/?my_plugin_action=sample`或`http://example.com/wp-admin/admin-ajax.php`）。

查看第一个 URL 如何引用`my-plugin`插件目录中的特定文件，第二个 URL 如何转到添加了特定查询参数的站点主页，或者第三个示例，其中引用的文件`admin-ajax.php`位于`wp-admin`目录中 - 这是一个特殊的文件，这使得插件可以轻松地发出 AJAX 请求（此文件还加载 WordPress 核心并触发一些操作挂钩）。

在第一次引用的情况下，如果插件想要使用一些 WordPress 功能（用于引用数据库、操作帖子等），它需要通过包含`wp-load.php`.

> 此外，这完全浪费了资源，因为它包含了很多文件，其中可能还包含其他文件，并且它就像一个无限循环的所需文件，每个文件都在另一个文件中，被加载两次..（如果其他插件使用这个，甚至更多也是一种方法）

请注意其中的`_once`部分`require_once(...`- 这告诉 PHP仅在尚未包含该文件**时才包含该文件。**因此不会发生冲突，PHP 也不会占用太多内存。虽然 - 如果您处于 WordPress 已经启动的上下文中，则不应调用该`require`函数。

* * *

因此，基本上插件作者希望对您在其中找到此代码的插件文件提出一些请求。由于作者想在此文件中使用 WordPress 功能，因此他调用该`wp-load.php`文件以加载核心功能。

我假设这样做是为了减少服务器上的负载，尽管在`plugins_loaded`操作钩子上运行了几个钩子并将自定义`$_GET`参数添加到主页 url，结果应该仍然非常接近。

我个人更喜欢第二个选项，但就像我说的那样，包括`wp-load.php` **会**阻止 WordPress 运行一些复杂的东西（URL 解析和数据库查询/ies）。

如果还有什么你不太明白的地方——在这里发表评论，我会尝试进一步解释。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-23T20:41:55.150

`wp-load.php`负责引导 WordPress 环境，使插件能够使用原生 WordPress 核心功能。

现在至于

> 插件运行的事实不是已经加载了 wp-load.php 吗？

一点也不！

如果您直接访问一个插件文件，这并不意味着您拥有整个 WordPress 环境，并且您无法使用本机核心功能，除非您包含`wp-load.php`.

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-12-22T15:48:12.763

根据我的阅读，当需要使用数据库时，它们通常在插件中包含 wp-load，但这是一个糟糕的选择，因为它会引发很多问题。您可以在这里看到一些相关文章：http: [//ottodestruct.com/blog/2010/dont-include-wp-load-please/](http://ottodestruct.com/blog/2010/dont-include-wp-load-please/)（如果此链接被删除，[请参见该页面](http://bit.ly/1D5iV30)）

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2014-08-06T20:56:47.330

如果文件位于 wp-content 目录中的任何位置，无论级别如何，如果尚未加载，这将包括 wp-load.php。

```
if(!defined(ABSPATH)){
    $pagePath = explode('/wp-content/', dirname(__FILE__));
    include_once(str_replace('wp-content/' , '', $pagePath[0] . '/wp-load.php'));
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-12-23T06:03:17.630

可能是双重检查。

require_once() 表示如果已经加载，则不再加载。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-12-23T18:27:08.307

`wp-load.php`是从外部脚本加载 WP 的一种方法，允许使用 WP 功能以及其他功能。

但是，正如您所说，这不是必需的，因为它是一个插件。但是，您没有解释在哪里找到问题中的代码，因为`wp-load.php`位于与样式表目录不同的目录中的前端页面或脚本确实需要，例如，即使它们是插件的一部分.

管理区域中的插件页面不必重新加载 WP，因为它已经加载，但前端页面必须加载它。

简而言之，有几个原因可以包括`wp-load.php`访问 WP 函数和变量。

# c# - 是否可以在我真正需要 DateTime.UtcNow 的地方使用 DateTime.Now？

> ID：13860580
> 
> 赞同：0
> 
> 时间：2012-12-13T13:11:56.050
> 
> 标签：c#, .net

有什么方法可以强制`DateTime.Now`总是返回`DateTime.UtcNow`申请吗？

--edit 我的意图：我有大型日期时间非常敏感的应用程序。我不能重写它所在的所有地方（耗时）。程序员有时会在时间压力下忘记使用utcnow。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-03T10:05:35.643

> 我不能重写它所在的所有地方（耗时）

是的，这需要一分钟（在文件中替换文件）加上你的单元测试告诉你什么失败了。

另一种方法是弄乱程序的新部分的行为，用户可能出于任何原因需要本地时间。说真的，坐下来清理程序。

DateTime.Now 是静态的，所以它必须是这种形式，发现这是微不足道的。修复这些情况将是相对的，除非您必须为输入和输出添加转换例程之类的东西 - 无论如何您都必须这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:43:23.930

我认为对您来说最好的选择是在您的应用程序中使用模拟返回日期时间。

对于单元测试或其他功能，您可以使用自定义 DateTime

看看这个：

[http://blog.coreycoogan.com/2009/06/07/mocking-datetime-now/](http://blog.coreycoogan.com/2009/06/07/mocking-datetime-now/)

# sql - 将多行合二为一

> ID：13860586
> 
> 赞同：-1
> 
> 时间：2012-12-13T13:12:21.527
> 
> 标签：sql, sql-server

> **可能重复：**
> [将多行连接成一个文本字符串？](https://stackoverflow.com/questions/194852/concatenate-many-rows-into-a-single-text-string)
> [在 Microsoft SQL Server 2005 中模拟 group_concat MySQL 函数？](https://stackoverflow.com/questions/451415/simulating-group-concat-mysql-function-in-microsoft-sql-server-2005)

我正在使用 MS Sql Server 2008，我有下表

```
----------------
Uid | Alias |
--------------- |
1 | Pierre |
1 | Patrick |
1 | Jean |
2 | Alice |
2 | Diana | 
```

我想以这种方式显示它：

```
------------------------|
Uid | Alias |
------------------------|
1 | Pierre Patrick Jean|
2 | Alice Diana | 
```

任何想法将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:16:21.597

请试试：

```
select b.Uid,
    (select a.Alias +' ' from TableName a WHERE a.Uid=b.Uid group by a.Alias FOR XML PATH(''))as Names
from TableName b
group by b.Uid 
```

# c++ - C++ 输出未正确显示，“标记”未显示

> ID：13860590
> 
> 赞同：0
> 
> 时间：2012-12-13T13:12:32.790
> 
> 标签：c++, visual-studio-2010, visual-c++

下面的代码应该执行以下操作：列出所有参加模块的学生，显示他们的分数和平均总分

它做了它应该做的事情，但问题是输出不显示分数而是显示注册号

我的标记文本文件

```
11  IS1S01  25 
11  SE1S02  50 
11  SE2S04  75 
12  CS3S08  15 
12  CS1S03  20
13  CS1S03  25 
14  CS1S03  50 
```

它应该在哪里显示以下内容：

```
11   IS1S01   25

Average = 25 
```

当它运行程序时，它会显示以下内容：

```
11   IS1S01    11

Average = 1.1 
```

由于某种原因，它没有读取标记。我似乎无法找到它为什么这样做

```
void studentmark()
    {
        float Marks;
        float Average;
        float EnrolmentNo;
        std::string module;

    // Display message asking for the user input
    std::cout << "\nList all students taking a module, showing their marks." << std::endl;

    // List of options
    std::cout << "\nInformation Resource Engineering:   IS1S01" << std::endl;
    std::cout << "C++ Programming:          SE2S552" << std::endl;
    std::cout << "Data Structures and Algorithms:       CS2S504 " << std::endl;
    std::cout << "AI for Game Developers:           CS3S08" << std::endl;
    std::cout << "Cognitive Science:            MS3S28" << std::endl;
    std::cout << "Game Modification:            CS1S03" << std::endl;
    std::cout << "Building:             BE1S01" << std::endl;
    std::cout << "Plumbing:             BE2S01" << std::endl;
    std::cout << "Coaching:             SS1S02" << std::endl;
    std::cout << "Psychology:               CC1S04" << std::endl;
    std::cout << "Mental Health Care:           SS2S01" << std::endl;
    std::cout << "Missing Module:               SE1S02" << std::endl;

    std::cout << "\nEnter your preferred module:";

    // Read in from the user input
    std::cin >> module;

    // Read from text file and Display list of marks by each student in a particular module

    std::ifstream infile;               // enable to open, read in and close a text file

    infile.open("Mark.txt");            // open a text file called Mark

    if (!infile)                 
    {
        std::cout << "List is empty" << std::endl;      // if the file is empty it output the message
    } 
    else 
    {
        std::cout << "\nList of marks for students: " << std::endl;

        std::string moduleCode;

        while (infile) 
        {
            infile >> EnrolmentNo >> moduleCode >> Marks;
            if (infile) 
            { 
                // strings read correctly
                if (moduleCode == module) 
                {
                    //std::cout << " ";
                    std::cout << "\nEnrolmentNo" << "       " << "Module Code" << " " << "Marks" << std::endl;

                    int sum=0;
                    for(int i=0;i<10;i++)
                    {
                        if(infile>>Marks)
                        {
                            sum+=Marks;
                        }
                    }

                    std::cout << EnrolmentNo << "           " << moduleCode << "        " << Marks << std::endl;

                    float Average = (double)sum/10.0;

                    std::cout << "\nThe average mark of the module: " << Average << std::endl;
                }
            }
        }
    }

    infile.close();         // close the text file  
    system ("PAUSE");
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:30:17.300

您阅读代码的流程很奇怪。您首先阅读`EnrolmentNo`,`moduleCode`和`Marks`。然后，如果它是您感兴趣的模块，`Marks` *则从文件中的同一位置开始读取，*直到找到一个非整数。

使用您提供的示例文件（并假设用户输入`IS1S01`as `module`），读取过程如下：

1.  `EnrolmentNo`获得第一个 11
2.  `moduleCode`获得 IS1S01
3.  `Marks`得到 25

然后内部循环启动并且：

1.  `Marks`获取下一个 11（从第 2 行开始）
2.  循环终止，因为`Marks`尝试读取“SE1S02”，但失败

鉴于您显示的文件，您可能应该摆脱内`for`循环并在外循环中进行求和/平均。

# c# - C# 获取正确的 IntPtr 指向已声明的变量

> ID：13860591
> 
> 赞同：0
> 
> 时间：2012-12-13T13:12:36.070
> 
> 标签：c#, pinvoke, intptr

我正在尝试将多字节数组直接写入/读取文件，并建议使用 PInvoke WriteFile/ReadFile。

基本上我的阅读代码现在看起来像这样：

```
[DllImport("kernel32.dll", SetLastError = true)]
static extern unsafe int ReadFile(IntPtr handle, IntPtr bytes, uint numBytesToRead,
  IntPtr numBytesRead, System.Threading.NativeOverlapped* overlapped);

..<cut>..

byte[,,] mb = new byte[1024,1024,1024];
fixed(byte * fb = mb)
{
    FileStream fs = new FileStream(@"E:\SHARED\TEMP", FileMode.Open);
    int bytesread = 0;
    ReadFile(fs.SafeFileHandle.DangerousGetHandle(), (IntPtr)fb, Convert.ToUInt32(mb.Length), new IntPtr(bytesread), null);
    fs.Close();
} 
```

此代码引发 AccessViolationException。但是，以下代码不会：

```
[DllImport("kernel32.dll", SetLastError = true)]
static extern unsafe int ReadFile(IntPtr handle, IntPtr bytes, uint numBytesToRead,
  ref int numBytesRead, System.Threading.NativeOverlapped* overlapped);

..<cut>..

byte[,,] mb = new byte[1024,1024,1024];
fixed(byte * fb = mb)
{
    FileStream fs = new FileStream(@"E:\SHARED\TEMP", FileMode.Open);
    int bytesread = 0;
    ReadFile(fs.SafeFileHandle.DangerousGetHandle(), (IntPtr)fb, Convert.ToUInt32(mb.Length), ref bytesread, null);
    fs.Close();
} 
```

不同之处在于我将 numBytesRead 声明为 ref int 而不是 IntPtr。

但是，在我找到“如何将 IntPtr 转换为 int”的问题的答案的任何地方，它都像：

```
int x = 0;
IntPtr ptrtox = new IntPtr(x) 
```

那么，我做错了什么？为什么访问冲突？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:38:28.090

您获得访问冲突的原因是因为 new IntPtr(x) 创建了一个指针，其地址是 x 的内容。所以你在 x = 0 时创建了一个 NULL 指针。

IntPtr 构造函数没有获得其参数的地址。它不等同于 C/C++ 中的 & 运算符。

您想使用 ref 参数读取字节；这是正确的方法。此外，您总是希望使用 GCHandle 来获取托管对象的地址，因此请在您的 mb 数组上使用它，而不是固定的。只是不要长时间保持手柄，也不要忘记释放它。

-赖利。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:27:33.547

我认为访问冲突是因为 bytesread 是托管的，因此 GC 可能会移动它，从而使您传递的指针无效。

下面的工作吗？

```
int bytesread = 0;
var pin = GCHandle.Alloc(bytesread, GCHandleType.Pinned)
ReadFile(fs.SafeFileHandle.DangerousGetHandle(), (IntPtr)fb, Convert.ToUInt32(mb.Length), pin.AddrOfPinnedObject(), null); 
```

[编辑] 我忘记了下一行：

```
pin.Free(); 
```

[双重编辑] 哦，亲爱的！我完全搞错了。我所说的更多地适用于以安全代码处理堆中的托管数据。

@plinth 完全正确，代码：

```
int x = 0;
IntPtr ptrtox = new IntPtr(x) 
```

创建一个值为 x 的指针，而不是指向 x。在您的原始代码中，只需通过：

```
new IntPtr(&bytesread) 
```

或者

```
(IntPtr)(&bytesread) 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T13:41:32.527

这很容易。看看你正在做的这件小事：

```
new IntPtr(bytesread) 
```

这并不像你认为的那样。您认为它创建了一个指向变量 bytesread 的新指针。它没有。它创建了一个指针，该指针指向一个**值为**bytesread 的地址，即 0。非托管代码读取，然后尝试将一个数字写入空指针指向的内存中，但失败了。

另一个版本有效，因为参数被声明为`ref int`它将使编组器将实际指针传递给 bytesread 而不是值。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T20:39:42.717

如果你在一个不安全的上下文中，你可以获得一个指向 blittable 类型的指针，比如 int，就像在 C 或 C++ 中一样。在你的情况下 &bytesread。也就是说，对于简单的指针参数，您应该始终使用 ref 或 out 关键字。

# database - 如何获得当前的自动增量值

> ID：13860592
> 
> 赞同：1
> 
> 时间：2012-12-13T13:12:39.810
> 
> 标签：database, sqlite

如何在打开数据库后立即获取特定表的最后一个自动增量值？这不是`last_insert_rowid()`因为没有插入事务。换句话说，我想提前知道在为特定表插入新行时会选择哪个数字自动增量。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:48:44.173

不同的数据库以不同的方式实现自动增量。但据我所知，他们都不会回答你提出的问题。

自动增量功能旨在为新添加的表行创建唯一 ID。如果尚未插入行，则该功能尚未生成 id。

这是有道理的......如果你确实得到了下一个自动增量编号，你会用它做什么？可能的意图是将其分配为尚未插入的新行的主键。但是在您获得 id 和使用它插入行的时间之间，数据库可以使用该 id 为另一个进程插入一行。

您的选择是：自己管理 id 的创建，或者等到插入行后再使用其自动创建的标识符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T14:43:37.667

这取决于如何定义自动增量列。

如果列定义为`INTEGER PRIMARY KEY AUTOINCREMENT`，则 SQLite 将在名为 的内部表中保留最大 ID [`sqlite_sequence`](http://www.sqlite.org/fileformat2.html#seqtab)。

如果列定义不包含关键字`AUTOINCREMENT`，SQLite 将使用其“常规”例程来确定新 ID。从[文档](http://www.sqlite.org/autoinc.html)中：

> 通常的算法是给新创建的行一个比插入前表中最大的 ROWID 大一的 ROWID。如果表最初为空，则使用 1 的 ROWID。如果最大的 ROWID 等于最大可能的整数 (9223372036854775807)，则数据库引擎开始随机挑选正候选 ROWID，直到找到以前未使用的 ROWID。如果在合理的尝试次数后找不到未使用的 ROWID，则插入操作将失败并出现[SQLITE_FULL](http://www.sqlite.org/c3ref/c_abort.html)错误。如果没有显式插入负 ROWID 值，则自动生成的 ROWID 值将始终大于零。

我记得读过，对于没有 的列`AUTOINCREMENT`，确定下一个 ID 的唯一可靠方法是首先[VACUUM](http://sqlite.org/lang_vacuum.html)数据库；这会将所有 ID 计数器重置为该表的最大现有 ID + 1。但我再也找不到那个引用了，所以这可能不再正确。

* * *

也就是说，我同意**slash_rick_dot**的观点，即预先获取自动递增的 ID 是一个坏主意，尤其是在另一个进程可能同时写入数据库的可能性很小的情况下。

# java - 带有 Android 和 Eclipse 的协议缓冲区：NoClassDefFoundError

> ID：13860593
> 
> 赞同：1
> 
> 时间：2012-12-13T13:12:43.180
> 
> 标签：java, android, eclipse, protocol-buffers, noclassdeffounderror

我想通过 HttpClient 发送一些数据并尝试使用协议缓冲区。描述符已创建，我的 .proto 文件也已编译以获取关联的 .java 文件。我在我的 Android 课程中调用这个课程没有任何问题，就像教程和自述文件一样。Eclipse 不会抱怨任何事情。

现在，我将下载的库（protobuf-2.5.0rc1 和 protoc-2.5.0rc1-win32）中的所有编译文件添加到 .jar（整个文件夹上的 javac，然后 tar cvf）。

这个 .jar 现在位于：libs + AndroidDependencies + ReferencedLibrairies。

原始文件位于 /libs 文件夹中。在 Build Path 中，protobuf.jar 库设置为导出。

启动应用程序工作正常，但每当我尝试使用我的 proto builder 时，我从 DDMS 获得以下信息：

```
12-13 13:55:54.750: E/AndroidRuntime(12647): Caused by: java.lang.NoClassDefFoundError: xxx.xxxx.xxxx.yyy.ProtoObject$Objectmsg
12-13 13:55:54.750: E/AndroidRuntime(12647):    at xxx.xxxx.xxxx.xxx.myActivity$Task.doInBackground(myActivity.java:x)
12-13 13:55:54.750: E/AndroidRuntime(12647):    at xxx.xxxx.xxxx.xxx.myActivity$Task.doInBackground(myActivity.java:x) 
```

这是我的原型文件

```
package xxx.xxxx.xxxx.yyy;

option java_outer_classname="ProtoObject";

message Objectmsg {
   required int32 aaa = 1;
   required string bbb = 2;
   required string ccc = 3;
   required string ddd = 4;
   required string eee = 5; 
   repeated string fff = 6;
   repeated string ggg = 7;
   repeated string hhh = 8;
} 
```

Android 应用程序中的代码

```
import xxx.xxxx.xxxx.yyy.ProtoObject;

...

Objectmsg omsg = ProtoObject.Objectmsg.newBuilder()
                    .setAaa(an Integer)
                    .setBbb(a String)
                    .setCcc(a String)
                    .setDdd(a String)
                    .addAllEee(an arraylist)
                    .addAllFff(an arraylist)
                    .addAllGgg(an arraylist)
                    .build(); 
```

我真的看不出我在哪里搞砸了任何图书馆链接。如果你们中的任何人知道可能缺少什么，那就太好了！

提前致谢。

**编辑 ：：**

当我查看 dexedLibs 文件夹（在 /bin 中）时，支持库在 protobuf 为 1 kB 大时具有实际大小！

```
android-support-v4-4a44d81301e680a21725a9812ec65b60          132kB
protobuf-d8a49056234d83f3a745e8697859be32          1kB 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T12:33:41.663

**解决了**

从一开始一切都很好，除了我没有正确构建库 jar 文件（清单）......

# php - Php Array Count 没用

> ID：13860598
> 
> 赞同：-4
> 
> 时间：2012-12-13T13:13:15.173
> 
> 标签：php, arrays, multidimensional-array

我在 txt 文件中有商店产品的数据：

```
product 1
product 1
product 2
product 2
product 2
product 1
product 1
product 3
product 3
product 3
product 1
product 1
product 3
product 1 
```

好的，人们将产品添加到购物卡中，这些产品插入一般的txt

**为了恢复数据，我使用下一个脚本：**

```
<?php

$file_data=file("products.txt");

for ($i=0;$i<sizeof($file_data);$i++)
{

/// Create array of groups

$global_products[]=$file_data[$i];

}

/// Now i want get the products and the number in each case for example of the product 1 i have 6 for the product 2 i have 3 and for the product 3 i have 4 , ok for get this i can use thi function 

$prr=array_count_values($global_productos);

print_r (object2array($prr),true);

?> 
```

如果我使用 print_r，我可以在每种情况下获得产品和编号，但我如何才能在其他模式下获得，例如与 print 或 echo 的正常功能一起使用，我尝试最终获得数据显示如下：

```
Product 1 (6)
Product 2 (3)
Product 3 (4) 
```

**感谢和问候**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:21:04.590

使用下面的代码

```
<?php

$file_data=file("output_rrr.txt");

for ($i=0;$i<sizeof($file_data);$i++)
{

/// Create array of groups

$global_products[]=$file_data[$i];

}

/// Now i want get the products and the number in each case for example of the product 1 i have 6 for the product 2 i have 3 and for the product 3 i have 4 , ok for get this i can use thi function 

$prr=array_count_values($global_products);
foreach($prr as $key=>$value)
{
    echo trim($key).": ".$value."<br/>";

}

?> 
```

# javascript - 事件传播的相反顺序

> ID：13860603
> 
> 赞同：-1
> 
> 时间：2012-12-13T13:13:48.957
> 
> 标签：javascript, jquery, html, css

我创建了一个小的 Find the Differences 游戏。它包括两个相同图像的图像。图像是设置高度和宽度的 div 上的背景。这个div是相对位置。

在它上面，我绝对地在每个差异上放置了不可见的 div。

一切正常，但现在我需要知道何时有人单击容器 div 而不是直接单击更改 div 之一。

听起来很简单，我计划为单击背景图像（相对 div）创建和事件，并在单击实际差异区域时停止传播和默认。

但由于某种原因，即使我点击了真正的差异，事件也会从背景图像开始。比，如果点击是真正的差异，它会传播到差异 div。

我尝试使用 z-index，尝试将差异从 div 切换到 A 标签，但没有任何改变......

这是一个问题的代码，差异 div 在主 div（游戏）内。

```
<div id="q1" class="game center relative_container" style="display: block;">
    <div id="q1_p1" mirror="q1_1" class="pointer"></div>
    <div id="q1_p1_o" mirror="q1_1" class="pointer"></div>        
    <div id="q1_p2" mirror="q1_2" class="pointer"></div>
    <div id="q1_p2_o" mirror="q1_2" class="pointer"></div>        
    <div id="q1_p3" mirror="q1_3" class="pointer"></div>
    <div id="q1_p3_o" mirror="q1_3" class="pointer"></div>        
</div> 
```

我很高兴听到任何想法。

如果我向 div 添加一个 inlinde onclick 事件，它对我有用，但我宁愿不使用它......

感谢您的时间和精力:)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:42:02.773

好的，所以当我（通过 bfavaretto 线索）从 .live 更改为 .on 时，突然事件的顺序又正常了。也许它与现场寻找与活动相关的新元素有关，也许其他人可以解释，但这解决了这个问题......谢谢！

# programming-languages - 哪种基于 JVM 的脚本语言使用“when”作为分支控制关键字（而不是“if”）？

> ID：13860604
> 
> 赞同：1
> 
> 时间：2012-12-13T13:13:48.810
> 
> 标签：programming-languages, indentation, jvm-languages

我看到了一个带有“when”而不是“if”的代码片段的演示文稿。代码看起来像一种基于 JVM 的脚本语言，使用缩进而不是“{}”，并且并非每一行都以“;”结尾

你能给我一个线索，它可能是哪种语言？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-12-13T13:18:45.170

Ruby 有 case-when 语句。我的猜测是“JRuby”。

```
case x
when User === x 
    puts "Constant"
when "User" === x
    puts "string"
else 
    puts "nothing"
end 
```

# c++ - 从 v8::Script::Compile() 获取错误消息

> ID：13860607
> 
> 赞同：2
> 
> 时间：2012-12-13T13:14:01.370
> 
> 标签：c++, v8

我正在打电话`Script::Compile()`，结果它返回一个空句柄。我已经追踪到这个方法，最后发现

```
 i::Handle<i::SharedFunctionInfo> result = i::Compiler::Compile(str, .... 
```

正在返回空句柄。这意味着编译错误。

但是有谁知道在这种情况下有没有办法从编译器获取错误消息以了解发生错误的位置？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T13:18:27.480

看一下[示例](https://chromium.googlesource.com/v8/v8/+/branch-heads/5.8/samples/shell.cc#374)`ReportException`中的函数。您需要使用 a来捕获异常并报告错误。[`Shell`](https://chromium.googlesource.com/v8/v8/+/branch-heads/5.8/samples/shell.cc#374)`v8::TryCatch`

# c# - 加载、加载、构造函数

> ID：13860609
> 
> 赞同：0
> 
> 时间：2012-12-13T13:14:20.663
> 
> 标签：c#, winforms, onload-event

从我读过的其他 SO 问题来看，似乎使用对 onLoad 的覆盖是一种更好的方法，而不是在构造函数中处理初始方法。

当我在代码中设置断点时，我发现 onLoad 方法被命中但构造函数没有被命中。我的表单显然打开得很好，所以我想知道是否有人能够解释这些发生的顺序是什么？

这对于自定义加载事件也是一样的

**编辑**：白痴是我的断点没有被命中的原因，但我仍然对何时调用加载覆盖感到有点困惑？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T13:33:48.240

OnLoad 方法/事件在第一次显示表单时执行。

当您使用 new 关键字创建 Form 类的新实例时，始终会调用构造函数。

通常认为最佳实践是在构造函数中进行所有表单初始化，而不是在 OnLoad 期间。如果您有多个构造函数并希望在所有构造函数中执行一些常见的初始化任务，请将它们放在单独的方法中并从构造函数中调用它。确保 InitializeComponent() 作为构造函数的一部分被调用。只有当您需要重新定位表单或其他内容时，才应真正使用 OnLoad。

# android - 检测android中的音频路径变化

> ID：13860610
> 
> 赞同：0
> 
> 时间：2012-12-13T13:14:25.623
> 
> 标签：android, audio, media-player, headset, android-music-player

我正在开发一个 Android 媒体播放器应用程序（支持 Android 版本 2.3 - 4.1）。我想检测音频路径转换，例如扬声器到有线耳机或有线耳机到 BT 等。我需要在我的应用程序中对这些转换采取一些措施。那么Android在切换音频路径时是否提供了任何单一方式（最好是广播接收器）？如果可能的话，我想避免分别检测有线耳机和 BT 耳机连接/断开连接。

我仍在适应 Android 并希望在这里得到一些帮助。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:53:40.223

在 Jellybean 和更高版本上，您可能能够通过使用[MediaRouter](http://developer.android.com/reference/android/media/MediaRouter.html)类获得所需的信息。

MediaRouter 类有一个名为的隐藏方法`getSystemAudioRoute()`，该方法返回一个[RouteInfo](http://developer.android.com/reference/android/media/MediaRouter.RouteInfo.html)对象。您应该能够通过对 MediaRouter 类使用反射来掌握该方法。
获得 RouteInfo 后，您可以调用`getName()`它，它应该将当前音频路由的名称作为 CharSequence 返回。
请记住，这只是对音频路由位置的强烈提示，因为由音频 HAL 决定应将它们路由到的每种流类型。

在 Jellybean 之前的 Android 版本上，您可以收听相关意图的广播（`ACTION_HEADSET_PLUG`、`ACTION_HDMI_AUDIO_PLUG`等）。

# javascript - 我可以将变量定义为参数吗？

> ID：13860611
> 
> 赞同：0
> 
> 时间：2012-12-13T13:14:31.863
> 
> 标签：javascript, jquery, jquery-ui

我有以下使用 jQuery UI 功能：

```
$('.droppable').droppable({
    tolerance: 'touch',
    over: function () {
        var hasHiddenList = $(this).children('ul.hidden');
        if (hasHiddenList.length)
            hasHiddenList.removeClass('hidden');
    },
    out: function () {
        var hasEmptyList = $(this).children('ul.empty');
        if (hasEmptyList.length)
            hasEmptyList.addClass('hidden');
    },
    drop: function () {
        var hasEmptyList = $(this).children('ul.empty');
        if (hasEmptyList.length)
            hasEmptyList.removeClass('empty');
    }
}); 
```

而且我想知道我是否可以在回调函数之外定义变量`hasHiddenList`，`hasEmptyList`因为它在所有变量中都是同一个变量。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T13:20:05.977

更好的是，您甚至不需要 if 语句和变量：

```
$('.droppable').droppable({
    tolerance: 'touch',
    over: function () {
      $(this).children('ul.hidden').removeClass('hidden');
    },
    out: function () {
      $(this).children('ul.empty').addClass('hidden');
    },
    drop: function () {
      $(this).children('ul.empty').removeClass('empty');
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:39:55.910

如果您真的非常想要变量，有两种选择。

显而易见的一个（有陷阱）是这样的：

```
var hasHiddenList = $('.droppable').children('ul.hidden');
var hasEmptyList = $('.droppable').children('ul.empty');

$('.droppable').droppable({
    tolerance: 'touch',
    over: function () {
        if (hasHiddenList.length)
            hasHiddenList.removeClass('hidden');
    },
    out: function () {
        if (hasEmptyList.length)
            hasEmptyList.addClass('hidden');
    },
    drop: function () {
        if (hasEmptyList.length)
            hasEmptyList.removeClass('empty');
    }
}); 
```

变量已提取，代码重复性较低。都好。

现在，问题是选择器只运行一次。每次发生这些事件之一时都会调用回调`over`，但不会更新；在每次调用之间它们仍然是相同的。可能不是你想要的。`out``drop``hasHiddenList``hasEmptyList`

解决这个问题的方法是使用函数而不是变量，如下所示：

```
var hiddenList = function(target) {
    return $(target).children('ul.hidden');
};
var emptyList = function(target) {
    return $(target).children('ul.empty');
};

$('.droppable').droppable({
    tolerance: 'touch',
    over: function () {
        var list = hiddenList(this);
        if (list.length)
            list.removeClass('hidden');
    },
    out: function () {
        var list = emptyList(this);
        if (list.length)
            list.addClass('hidden');
    },
    drop: function () {
        var list = emptyList(this);
        if (list.length)
            list.removeClass('empty');
    }
}); 
```

这抽象了查询的执行方式（您只需编写`$(target).children('ul.empty');`一次而不是两次），但实际上代码并没有真正变得更简单。实际上，我什至会说现在更难遵循它。另一方面，如果您使用相同的选择器甚至超过两次，比如说五次，那么也许这实际上是有用的。

另外，请注意，我已经从变量名中删除了“has”，因为“has”听起来像是布尔值，但它们不是。它们是元素列表。

# reporting-services - 如何让报表服务器跳过数据库认证并隐藏参数提示

> ID：13860615
> 
> 赞同：0
> 
> 时间：2012-12-13T13:14:38.030
> 
> 标签：reporting-services, sql-server-2008-r2

我是报表服务器的新手，我面临两个问题。

我会给你一些信息，然后我会解释它们。

我创建了一个报表服务器项目，并在其中创建了一个共享数据源，它具有授予对 Sql Server 2005 数据库的访问权限的用户 ID 和密码。但我的报表服务器是在 Sql Server 2008 R2 上创建的。

创建共享数据源后，我创建了一个共享数据集，它使用共享数据源作为数据源。在这个DataSet上使用的命令类型是“Stored Procedure”，这个过程接收参数，所以，DataSet也接收这些参数。

然后，我创建了一个报告，我将数据集拖到这个报告中，它自动创建了参数报告。

让我们把问题分开...

第一个问题：通过URL访问报表时如何隐藏报表参数提示

当我通过右键单击 .rdl 文件并单击“运行”来运行报表时，不显示参数提示，但是当通过 URL 从外部（在报表服务器上部署后）访问报表时，显示参数提示。

我能做些什么来改变这种行为？我已经尝试将标签设置如下：

```
<Hidden>true</Hidden> 
```

但它一直在做同样的事情。

以下是我的报告参数的代码片段。

```
<ReportParameters>
    <ReportParameter Name="IDFUNC">
        <DataType>Integer</DataType>
        <DefaultValue>
            <Values>
                <Value>
                    10
                </Value>
            </Values>
        </DefaultValue>
    </ReportParameter>
    <ReportParameter Name="dtInicial">
        <DataType>DateTime</DataType>
        <DefaultValue>
            <Values>
                <Value>
                    06/01/2012
                </Value>
            </Values>
        </DefaultValue>
    </ReportParameter>
    <ReportParameter Name="dtFinal">
        <DataType>DateTime</DataType>
        <DefaultValue>
            <Values>
                <Value>
                    09/01/2012
                </Value>
            </Values>
        </DefaultValue>
    </ReportParameter>
</ReportParameters> 
```

我已经尝试在报告参数属性对话框中隐藏这些参数。但在这种情况下，我收到消息错误“<Prompt:> Enter a prompt for the parameter”。

为了清楚起见，我将通过 QueryString (URL) 传递我需要的参数。

第二个问题：报告在加载报告时要求提供数据库凭据（仅当通过 URL 访问时）

通过 URL 访问报表时如何使报表跳过数据库认证？

好吧，伙计们，这就是一切。如果您想了解更多信息来帮助我，请询问。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T22:40:03.857

您正在查看的是传播问题：Reporting Services 不会传播身份验证凭据，因此您需要使用浏览器打开服务器上的数据源并打开其属性并再次在其中输入凭据。这样做是出于安全原因，您只需更新服务器上的凭据一次。

同样，有时当参数更改时，它们也不会被传播（如果 Reporting Services 服务器认为您已从其部署的设置中修改了参数 - 它会为您保留修改后的值）。您可能需要再次使用浏览器更新服务器上的参数。为该报告选择管理参数并将它们设置为隐藏。删除和重新部署报告也可能有效。

# jsf - JSF 1.2 DataTable Bestway 删除行

> ID：13860620
> 
> 赞同：-1
> 
> 时间：2012-12-13T13:14:58.117
> 
> 标签：jsf, jsf-1.2, ajax4jsf

## JSF 1.2 数据表

我知道如何从编写以下代码的数据表中删除该行。

jsp

```
<h:graphicImage id="deleteRowBtn_img" url="../../images/table_icon_delete.gif" style="cursor:pointer" alt="Delete Row">
    <a4j:support id="deleteRowBtn" event="onclick"  actionListener="#{mnpAction.deleteMultiNoPortRow}" reRender="multiNoPortTable" oncomplete="resetViewConfigs();"/>
</h:graphicImage> 
```

行动豆

```
public void deleteMultiNoPortRow(ActionEvent ae) {
    {
        int index = abcBean.getDataTable().getRowIndex();
        mnpBean.getMultiNoPortingList().remove(index);
    }
} 
```

但我想知道是否有任何其他方法可以从`JSF1.2`. 任何有关此的帮助不胜感激！！！！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:58:17.990

`a4j:commandButton`您可以通过使用 an及其`image`属性来获得相同的外观和功能，而不是`<h:graphicImage>`如下所示。

```
<a4j:commandButton image="../../images/table_icon_delete.gif" actionListener="#{mnpAction.deleteMultiNoPortRow}"/> 
```

如果您`<h:graphicImage>`在表格的一列中，您可以将`var`表格`row index`的 这里使用`action`代替`actionListener`.

```
<a4j:support id="deleteRowBtn" event="onclick" action="#{mnpAction.remove(myVar)}".../> 
```

在`mnpAction`bean 中（假设您的列表类型是`T`）

```
public void remove(T s) {
   mnpBean.getMultiNoPortingList().remove(s);
} 
```

编辑：
由于您使用的是 JSF1.2 ，如果您不想升级您的 EL 库，您可能不会使用`#{mnpAction.remove(myVar)}"`将参数传递给。`bean`

# c++ - Adobe Alchemy 编译 SWC - 不确定如何为 FlasCC 编译库

> ID：13860629
> 
> 赞同：2
> 
> 时间：2012-12-13T13:15:33.723
> 
> 标签：c++, flash, swig, alchemy, flascc

我正在尝试让[game-music-emu-flash](http://code.google.com/p/game-music-emu-flash/)与 FlasCC 一起使用。它使用 C/C++ Game_Music_Emu 库，最初是用 Alchemy 编译的，但我想看看用 FlasCC 是否有性能提升。我想使用带有类型映射的 SWIG 来调用库，因为当前项目 ActionScript 与 FlasCC 不兼容。我正在关注示例中的代码。我还没有对类型图进行编码，但现在我创建了 swig.i 为

```
#ifdef SWIG
%module libgmeLibModule
%{
#include "gme/gme.h"
%}
%include "gme/gme.h"
#else
#include "gme/gme.h"
#endif 
```

Makefile 通过替换需要匹配的内容来密切跟踪示例。在编译期间，我在表单中都遇到了类似的错误

```
libgmeLib_wrapper.cpp: In function `void _wrap_gme_ay_type_get()':
libgmeLib_wrapper.cpp:2575: error: invalid conversion from `const void*' to `void*'
libgmeLib_wrapper.cpp:2575: error:   initializing argument 1 of `void* memcpy(void*, const void*, size_t)' 
```

编译

```
"$(FLASCC)/usr/bin/g++" $(BASE_CFLAGS) -04 gmemain.cpp gme/*.cpp -emit-swc=sample.libgme -o libgme.swc 
```

在 Makefile 本身下`all:`编译没有错误。

我不太了解 C++，因此不胜感激。也将使用 SWIG 和类型映射是要走的路还是手动包装有意义？我认为 SWIG 会更好，因为 gme 是一个体面的图书馆。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-19T12:10:26.023

一位 Adob​​e 工作人员帮我解决了这个问题。他甚至编写了一个演示。Adobe 论坛主题可以在[这里](http://forums.adobe.com/thread/1114676?tstart=0)找到，他的演示可以在[gme-flascc找到](https://github.com/mcannizz/gme-flascc)

# c# - Linq为什么连接字符串会导致null？

> ID：13860630
> 
> 赞同：5
> 
> 时间：2012-12-13T13:15:43.787
> 
> 标签：c#, linq

我认为`"bill" + "john" + null == billjohn`，但在我的这个例子中，它似乎评估为空：

```
 var clients = from client in taxPortalService.Client()
                          select new ClientViewModel
                              {                               
                                  ResidentialAddressLine1 = client.RESADDRESSLINE1,
                                  ResidentialAddressLine2 = client.RESADDRESSLINE2,
                                  ResidentialAddressLine3 = client.RESADDRESSLINE3,
                                  ResidentialAddressLine4 = client.RESADDRESSLINE4,
                                  ResidentialPostalCode = client.RESPOSTCODE,
                                  ResidentialCountry = client.RESCOUNTRY,
                                  IAResidentialAddress = client.RESADDRESSLINE1 + ", " + client.RESADDRESSLINE2 + ", " + client.RESADDRESSLINE3 + ", " + client.RESADDRESSLINE4 + ", " + client.RESPOSTCODE + ", " + client.RESCOUNTRY                               
                              }; 
```

我在这里遗漏了一些明显的东西吗？

![在此处输入图像描述](../Images/3da720022e9a8d56b805bb7756e38a5a.png)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T13:21:56.560

我猜这是使用 LINQ-to-SQL 或 EF 作为后端，它正在生成 SQL。好吧，在 TSQL 中，`null`与任何东西连接的 a 是（默认情况下）`null`：. 也许尝试：

```
(row.Foo ?? "") + ", " + (row.Bar ?? "") + ... 
```

或更简单：首先将数据作为值放入内存，*然后*进行组合。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-12-13T13:22:58.320

在 C# 中，或者更确切地说在 .NET 中，您是对的，`"bill" + "john" + null`它为您提供`"billjohn"`.

在 SQL 中，`'bill' + 'john' + null`为您提供`null`.

使用 LINQ to Entities 将您的 C# 转换为 SQL，并且并不总是保留诸如此类的细微差别。

您可以使用更详细的

```
(client.RESADDRESSLINE1 ?? "") + ", " + (client.RESADDRESSLINE2 ?? "") + ", " + ... 
```

确保您只连接非空字符串，这不会有这个问题。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-12-13T13:21:20.510

假设 SQL-Server 为 rdbms，快速测试显示：

```
select 'A' + NULL;  // NULL 
```

[**演示**](http://sqlfiddle.com/#!3/d41d8/7126)

[**MSDN**](http://msdn.microsoft.com/en-us/library/ms177561.aspx)

> +（字符串连接）运算符在处理空的零长度字符串时的行为与处理 NULL 或未知值时的行为不同。零长度字符串可以指定为两个单引号，引号内不包含任何字符。零长度二进制字符串可以指定为 0x，而无需在十六进制常量中指定任何字节值。连接一个长度为零的字符串总是连接两个指定的字符串。**当您使用具有空值的字符串时，连接的结果取决于会话设置。就像对空值执行的算术运算一样，当将空值添加到已知值时，结果通常是未知值，对空值执行的字符串连接操作也应该产生空结果**。但是，您可以通过更改当前会话的 CONCAT_NULL_YIELDS_NULL 设置来更改此行为。有关详细信息，请参阅 SET CONCAT_NULL_YIELDS_NULL (Transact-SQL)。如果字符串连接的结果超过 8,000 字节的限制，则结果将被截断。但是，如果连接的字符串中至少有一个是大值类型，则不会发生截断。

# java - 如何防止从浏览器访问 CXF 安全的 Web 服务

> ID：13860632
> 
> 赞同：2
> 
> 时间：2012-12-13T13:15:49.753
> 
> 标签：java, spring, jax-ws, cxf, ws-security

我正在使用 CXF 和 Spring 开发一个基本的 WebService 示例。这是我的课程：

```
public interface AuthService {
 @WebMethod
   Person getPerson(@WebParam(name="user_id") Long userId);
} 
```

WS实现如下：

```
public class AuthServiceImpl implements AuthService{

public Person getPerson(Long gid) {
    Person p = new Person();
    p.setUserId(gid);
    p.setEmail("test"+gid+"@test.de");
    p.setName("test"+gid);

    return p;
}

} 
```

我的 web.xml 如下：

```
<listener>
    <listener-class>org.springframework.web.context.ContextLoaderListener</listener-class>
</listener> 
<context-param>
   <param-name>contextConfigLocation</param-name>
  <param-value>WEB-INF/cxf-beans.xml</param-value>
</context-param>    
<servlet>
    <servlet-name>CXFServlet</servlet-name>
    <servlet-class>
        org.apache.cxf.transport.servlet.CXFServlet
    </servlet-class>
    <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
    <servlet-name>CXFServlet</servlet-name>
    <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

我的 cxf-beans.xml 是：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jaxws="http://cxf.apache.org/jaxws" xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.5.xsd http://cxf.apache.org/jaxws http://cxf.apache.org/schemas/jaxws.xsd">
<import resource="classpath:META-INF/cxf/cxf.xml" />
<import resource="classpath:META-INF/cxf/cxf-extension-soap.xml"/>

<bean id="logInBound" class="org.apache.cxf.interceptor.LoggingInInterceptor" />
<bean id="logOutBound" class="org.apache.cxf.interceptor.LoggingOutInterceptor" />
</beans> 
```

这是我的 cxf-servlet.xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xmlns:jaxws="http://cxf.apache.org/jaxws"
  xmlns:soap="http://cxf.apache.org/bindings/soap"
  xsi:schemaLocation="
http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd
http://cxf.apache.org/bindings/soap http://cxf.apache.org/schemas/configuration/soap.xsd
http://cxf.apache.org/jaxws
http://cxf.apache.org/schemas/jaxws.xsd">
<jaxws:server id="jaxwsService" serviceClass="com.iptech.cxfws.service.AuthService" address="/auth_user">
<jaxws:serviceBean>
    <bean class="com.iptech.cxfws.service.impl.AuthServiceImpl" />
</jaxws:serviceBean>

<jaxws:inInterceptors>
  <ref bean="interceptor"/>
</jaxws:inInterceptors>
</jaxws:server>

<bean id="interceptor" class="org.apache.cxf.ws.security.wss4j.WSS4JInInterceptor">
 <constructor-arg>
   <map>
     <entry key="action" value="UsernameToken" />
     <entry key="passwordType" value="PasswordText" />
     <entry key="passwordCallbackRef">
            <ref bean="passwordCallback" />
     </entry>
   </map>
 </constructor-arg>
</bean>
<bean id="passwordCallback" class="com.iptech.cxfws.service.callback.ServerPasswordCallback"/>

</beans> 
```

最后是我的 ServerPasswordCallback 类：

```
public class ServerPasswordCallback implements CallbackHandler {

public void handle(Callback[] callbacks) throws IOException, UnsupportedCallbackException {

    WSPasswordCallback pc = (WSPasswordCallback) callbacks[0];
    String username = pc.getIdentifier();
    String password = //get it from a business class
    pc.setPassword(password);
} 
```

}

如您所见，这是一个非常简单的示例，您可以在每个 CXF 基础教程中找到。现在，我有两个问题：1）当我打电话时

```
http://localhost:8080/cxf-ws/auth_user/getPerson?user_id=11 
```

从 Internet 浏览器 (Chrome) 我得到响应，没有完成用户名/密码验证。但是，当从 Java 客户端调用 WS 时，如果不在 SOAP 消息头中包含用户名/密码，我将无法获得响应。这是正常的吗？2）第二个问题与WS-Security无关。将我的 WS 部署/发布到 Tomcat 时，一切都按预期工作（除了上面提到的安全问题）。但是，我有以下例外：

```
 javax.xml.bind.UnmarshalException: unexpected element 
(URI : "http://schemas.xmlsoap.org/ws/2005/04/discovery", local : "Probe"). 
Expected elements are <{http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01}AppSequence>,
<{http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01}Bye>,
<{http://www.w3.org/2005/08/addressing}EndpointReference>,
<{http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01}Hello>,
<{http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01}MetadataVersion>,
<{http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01}Probe>,
<{http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01}ProbeMatches>,
<{http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01}Resolve>,
<{http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01}ResolveMatches>,
<{http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01}Scopes>,
<{http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01}Security>,
<{http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01}Sig>,
<{http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01}SupportedMatchingRules>,
<{http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01}Types>,
<{http://docs.oasis-open.org/ws-dd/ns/discovery/2009/01}XAddrs> 
```

非常感谢任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:16:16.130

升级到 CXF 2.7.1 或更改为使用 WS-SecurityPolicy。

# c# - Linq 2 SQL 并行处理

> ID：13860635
> 
> 赞同：0
> 
> 时间：2012-12-13T13:15:58.897
> 
> 标签：c#, multithreading, linq-to-sql, parallel-processing

我有一个长期运行的任务，它受益于多线程。

随着时间的推移，每个线程都会添加一个 L2S 实体，每个线程都需要访问该实体中的属性。

由于需要实体的单个实例，因此很难为每个线程使用多个数据上下文。有没有推荐的方法来完成这种情况？

在使用 Linq to SQL 之前，我在经过一定数量的并行迭代后序列化为 XML。这工作得很好，但是数据变得更加复杂，需要 SQL 中可用的关系/查询；

一些附加信息：任务是分析视频帧以找到相似帧的序列。有媒体、帧和镜头的表格。具有多个帧和镜头的媒体 具有多个帧的镜头；帧提取和比较是处理器密集型操作，并受益于多线程。

问题是，对于每个提取的帧。它需要将自己与之前和之后的帧进行比较。前/后帧可能来自单独的线程。因此，将帧和镜头插入到正在处理的单个媒体对象中意味着将来自多个数据上下文的实体合并为 1。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T17:00:59.537

我没有解决并行 Linq 问题，而是更改了流程。

而不是尝试从多个线程同时访问相同的项目列表。我已经拆分了项目列表并为每个部分分配了一个线程。

这样，每个线程都可以在自己的列表上执行操作，而不会相互碰撞。然后我编写了一个整理方法来整理列表之间的连接。

# iphone - 我的自定义单元格不显示

> ID：13860636
> 
> 赞同：0
> 
> 时间：2012-12-13T13:16:01.787
> 
> 标签：iphone, ios, custom-cell

我已经创建了一个包含标签的自定义单元格，但是当我在我的表格视图中添加它而不显示时，我的视图控制器不是`TableViewController`我已经使用 IB 设置了表格视图并正确设置了它的委托和数据源。

我这样做是：

```
- (NSInteger)numberOfSectionsInTableView:(UITableView *)tableView
{
    // Return the number of sections.
    return 1;
}

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    ExampleAppDataObject* theDataObject = [self theAppDataObject];
    return theDataObject.myAudio.count;
}

    - (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
    {

        static NSString *CellIdentifier = @"Cell";

        ExampleAppDataObject* theDataObject = [self theAppDataObject];

        NSString *destinationPath = [theDataObject.myAudio objectAtIndex:indexPath.row];

        NSArray *parts = [destinationPath componentsSeparatedByString:@"/"];

        NSString *filename = [parts lastObject];

        AudioInfoCell *cell = (AudioInfoCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

        if (cell == nil) {
            cell = [[AudioInfoCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier];
        }

        cell.accessoryType = UITableViewCellAccessoryDetailDisclosureButton;

        cell.audioName.text = filename;

        return cell;

    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:19:23.857

`tableView:numberOfRowsInSection`首先检查方法中设置了多少行

像下面这样设置自定义单元格后..

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    AudioInfoCell *cell = (AudioInfoCell *) [tableView dequeueReusableCellWithIdentifier:nil];

    // UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];
    if (cell == nil) 
    {
        NSArray *topLevelObjects = [[NSBundle mainBundle] loadNibNamed:@"AudioInfoCell" owner:self options:nil];

        for (id currentObject in topLevelObjects){
            if ([currentObject isKindOfClass:[UITableViewCell class]]){
                cell =  (AudioInfoCell *) currentObject;
                break;

            }
        }
    }

    ExampleAppDataObject* theDataObject = [self theAppDataObject];

    NSString *destinationPath = [theDataObject.myAudio objectAtIndex:indexPath.row];

    NSArray *parts = [destinationPath componentsSeparatedByString:@"/"];

    NSString *filename = [parts lastObject];

    cell.audioName.text = filename;
    return cell;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:21:27.403

要检查的两件事：

1.  确保重用标识符与 Interface Builder 中的标识符匹配
2.  确保您的`numberOfRowsInSection`并`numberOfSectionsInTableView` 返回正确的号码

另外 - 我不使用：

```
if (cell == nil) {
        cell = [[AudioInfoCell alloc] initWithFrame:CGRectZero reuseIdentifier:CellIdentifier];
} 
```

用于实例化单元格。`AudioCell` `TableViewCell`这应该在您实现的子类中得到照顾。我如何实现这种自定义单元的一个例子是：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"FlightPickerCell";
    FlightPickerCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    cell.tripIDLabel.text = @"Some TripID";
    cell.hospitalLabel.text = @"Some Hospital";
    cell.cityLabel.text = @"Some City";
    return cell;
} 
```

# javascript - Ajax 函数在第二次运行之前没有完成

> ID：13860639
> 
> 赞同：2
> 
> 时间：2012-12-13T13:16:12.673
> 
> 标签：javascript, ajax, jquery

我有一个看起来像这样的 Ajax 函数

```
function PersonAtlLawUpdate(personRef) {
var selectionPanel = $('div#SelectionPanel');
var fromdate = selectionPanel.find('input#FromDateTextBox')[0].defaultValue;
var timeSpan = selectionPanel.find('select#TimeSpanDropdownList').data('timespanvalue');
var url = "MonthOverview.aspx/OnePersonAtlLawUpdate";
$.ajax({
    url: url,
    data: JSON.stringify({ personRef: personRef, fromdate: fromdate, timespan: timeSpan }),
    type: "POST",
    contentType: "application/json",
    dataType: "JSON",
    context: document.body,
    success: function (atlError) {
        changePersonAtlStatusIcon(atlError, personRef);
    },
    error: function (xhr, status, errorThrown) {
        //alert(errorThrown + '\n' + status + '\n' + xhr.statusText);
    }
}); 
```

}

在一个函数中，我需要像这样运行两次：

```
 PersonAtlLawUpdate($(gMarkedCell).parent("tr").attr("personref"));
    PersonAtlLawUpdate(pRef); 
```

可能的问题是在某些情况下不能 100% 工作。dom 不会在其中一个函数中更新。我认为这是因为另一个“覆盖”了它。

那么如何确保第二个“PersonAtlLawUpdate”在第一个完成后运行？推迟它似乎不太好。在 ajax 调用中将 async 设置为 false 是一个很好的解决方案吗？

编辑，像这样尝试并在我的成功中放置了一个 console.log。但是“全部完成”将首先运行：

```
$.when(PersonAtlLawUpdate($(gMarkedCell).parent("tr").attr("personref")), PersonAtlLawUpdate(pRef)).then(function (){console.log("all complete")}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:31:23.057

您可以只使用一个回调函数，以便它在第一个执行后立即执行：

```
PersonAtlLawUpdate($(gMarkedCell).parent("tr").attr("personref"), function(){
  PersonAtlLawUpdate(pRef);
}); 
```

或者，也许您可​​以重新考虑这个问题，并提出一个不需要两次调用相同函数的解决方案。也许你真的不需要这样做。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T15:39:26.757

我认为@Kyokasuigetsu 建议您需要更改 PersonAtlLawUpdate 方法，以便接受可选的第二个参数：需要在成功回调中调用的回调函数。

```
function PersonAtlLawUpdate(personRef, cbFunc) {
var selectionPanel = $('div#SelectionPanel');
var fromdate = selectionPanel.find('input#FromDateTextBox')[0].defaultValue;
var timeSpan = selectionPanel.find('select#TimeSpanDropdownList').data('timespanvalue');
var url = "MonthOverview.aspx/OnePersonAtlLawUpdate";
$.ajax({
    url: url,
    data: JSON.stringify({ personRef: personRef, fromdate: fromdate, timespan: timeSpan }),
    type: "POST",
    contentType: "application/json",
    dataType: "JSON",
    context: document.body,
    success: function (atlError) {
        changePersonAtlStatusIcon(atlError, personRef);
        if (cbFunc != null)
            cbFunc();
    },
    error: function (xhr, status, errorThrown) {
        //alert(errorThrown + '\n' + status + '\n' + xhr.statusText);
    }
}); 
```

而不是打电话给;

```
PersonAtlLawUpdate($(gMarkedCell).parent("tr").attr("personref"), function(){
  PersonAtlLawUpdate(pRef);
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T15:39:40.350

如果您从函数中调用，您的示例将`return`正常`$.ajax`工作`PersonAtLawUpdate`。

`$.when`需要对 ajax 调用的引用，因此请确保`Deferred`从函数中返回（ajax 调用）

```
function PersonAtlLawUpdate(personRef) {
    var selectionPanel = $('div#SelectionPanel');
    var fromdate = selectionPanel.find('input#FromDateTextBox')[0].defaultValue;
    var timeSpan = selectionPanel.find('select#TimeSpanDropdownList').data('timespanvalue');
    var url = "MonthOverview.aspx/OnePersonAtlLawUpdate";
    //SEE THE NEXT LINE
    return $.ajax({
        url: url,
        data: JSON.stringify({ personRef: personRef, fromdate: fromdate, timespan:  timeSpan }),
        type: "POST",
        contentType: "application/json",
        dataType: "JSON",
        context: document.body,
        success: function (atlError) {
            changePersonAtlStatusIcon(atlError, personRef);
        },
        error: function (xhr, status, errorThrown) {
            //alert(errorThrown + '\n' + status + '\n' + xhr.statusText);
        }
    });
} 
```

**使用**：

```
$.when(PersonAtLawUpdate(ref1), PersonAtLawUpdate(ref2)).done(function(xhrRef1, xhrRef2) {
    //do stuff w/ results from both calls
    //if you return something from the server, 
    //the results will be available in xhrRef1[0] 
    //and xhrRef2[0], respectively (order they 
    //appear in the when(), not in the order they execute
}); 
```

# php - 在集合“添加”方法中设置所有权有什么缺点吗？

> ID：13860641
> 
> 赞同：1
> 
> 时间：2012-12-13T13:16:18.310
> 
> 标签：php, symfony, doctrine-orm

当你在 Symfony2 中自动生成多对多关联的学说实体时，你会得到类似的东西：

```
/**
 * Add child
 *
 * @param Acme\Entity\Child $child
 * @return Parent
 */
public function addChild(\Acme\Entity\Child $child)
{
    $this->children[] = $child;

    return $this;
} 
```

如果它是与孩子的拥有方的双向关联（OneToMany 通常是这样的），那么无论何时添加孩子，您都必须添加以下行：

```
$parent->addChild($child);
$child->setParent($parent); 
```

通常我最终会更改 addChild 方法，如下所示：

```
/**
 * Add child
 *
 * @param Acme\Entity\Child $child
 * @return Parent
 */
public function addChild(\Acme\Entity\Child $child)
{
    $this->children[] = $child;
    $child->setParent($this)
    return $this;
} 
```

我只是想知道为什么这不是默认生成的方法（对于双向情况），或者我是否可以为所有双向关联执行此操作而无需考虑我的应用程序中的用法。

你能找出这种做法的任何缺点吗？任何会导致意外/不良行为的情况？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T20:44:03.810

文档章节，[入门：代码优先](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/getting-started.html#a-first-prototype)（搜索“确保一致性”）实际上建议这样做，但反过来（在拥有方进行）。

我不确定为什么它不是由代码生成自动完成的。我不认为“不是每个关系都是双向的”的论点成立，因为在代码生成时，已经知道哪些关系是双向的，哪些是单向的。

我认为这只是一个疏忽，学说团队总是说不应该依赖代码生成工具。

# iphone - Phonegap：如何通过 Objective-C 向 webview 中的 index.html 添加哈希值？

> ID：13860649
> 
> 赞同：0
> 
> 时间：2012-12-13T13:16:56.273
> 
> 标签：iphone, objective-c, ios, cordova

我用 PhoneGap 创建了一个 iPhone 应用程序。

在应用程序启动时，PhoneGap 使用 www 目录中的 index.html 文件启动 Web 视图。

到目前为止效果很好。

但是，当某个事件发生（在本例中为推送消息）时，我需要通过 Objective-C 对 index.html 进行 hashchange。

**示例：** `index.html`需要`index.html#foo`在运行时更改为

那么，如何通过 Objective-C 更改哈希值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:33:09.937

未经测试：

```
UIWebView *webView = ...
NSString *hash = ...

[webView stringByEvaluatingJavascriptFromString:
 [NSString stringWithFormat:@"window.location.hash = '%@'", hash]]; 
```

# hibernate - Hibernate JDBCConnectionException - C3p0 连接池

> ID：13860654
> 
> 赞同：0
> 
> 时间：2012-12-13T13:17:11.437
> 
> 标签：hibernate, c3p0

我们使用 HibernateORM 为我们的 mysql 数据库使用 C3p0 连接池。

以下是 hibernate.cfg.xml 中的设置

```
<property name="hibernate.c3p0.acquire_increment">1</property>
<property name="hibernate.c3p0.idle_test_period">300</property>
<property name="hibernate.c3p0.maxConnectionAge">3600</property>
<property name="hibernate.c3p0.timeout">120</property>
<property name="hibernate.c3p0.max_size">300</property>
<property name="hibernate.c3p0.min_size">1</property>
<property name="hibernate.c3p0.max_statements">100</property>
<property name="hibernate.c3p0.preferredTestQuery">select 1;</property> 
```

为了在 28800 秒后重新连接到数据库，我们设置了参数 -

```
c3p0.testConnectionOnCheckout=true 
```

但是我们面临着休眠异常。

因此，如果我现在调用 DB 并等待 8 小时（或者我设置 my.cnf 的变量 wait_timeout 的任何时间），如果我再次调用 DB ，我会得到该异常。堆栈跟踪 -

```
org.hibernate.exception.JDBCConnectionException: could not execute query
        at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:99)
        at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
        at org.hibernate.loader.Loader.doList(Loader.java:2536)
        at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2276)
        at org.hibernate.loader.Loader.list(Loader.java:2271)
        at org.hibernate.loader.hql.QueryLoader.list(QueryLoader.java:452)
        at org.hibernate.hql.ast.QueryTranslatorImpl.list(QueryTranslatorImpl.java:363)
        at org.hibernate.engine.query.HQLQueryPlan.performList(HQLQueryPlan.java:196)
        at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1268)
        at org.hibernate.impl.QueryImpl.list(QueryImpl.java:102) 
```

作为该问题的快速解决方案，我们每天早上都会重新启动应用服务器。

任何帮助，将不胜感激

- 谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T09:33:05.813

if your config is what you think it is, there's no way these Exceptions come from stale Connections getting checked out after sitting idle and timing out in the pool. Connections expire after an hour no matter what, they are never idle more than about five minutes, they are tested on checkout.

one of two things is going on:

1) you don't have the configuration you think you have, something is going wrong in the middlewhere between your config and the c3p0 DataSource it intedns to configure.

fortunately, c3p0 DataSources dump their config at INFO level on initialization. check your logs, and verify that your pool has the config that you intend it to have.

2) perhaps your app is holding Connections live outside of the pool, rather than checking them out for short periods and close()ing them, so that c3p0 ca do all that testing, expiring, etc. if your app holds Connections for so long that they time out, there is nothing c3p0 can do about it. c3p0 can help you test if this is what's going on, though. try the config parameters unreturnedConnectionTimeout and debugUnreturnedConnectionStackTraces. Use them together. See

[http://www.mchange.com/projects/c3p0/#configuring_to_debug_and_workaround_broken_clients](http://www.mchange.com/projects/c3p0/#configuring_to_debug_and_workaround_broken_clients)

[http://www.mchange.com/projects/c3p0/index.html#unreturnedConnectionTimeout](http://www.mchange.com/projects/c3p0/index.html#unreturnedConnectionTimeout)

[http://www.mchange.com/projects/c3p0/index.html#debugUnreturnedConnectionStackTraces](http://www.mchange.com/projects/c3p0/index.html#debugUnreturnedConnectionStackTraces)

good luck!

# javascript - 在javascript中将长单词/字符串拆分为较小的单词/字符串

> ID：13860662
> 
> 赞同：-2
> 
> 时间：2012-12-13T13:17:40.430
> 
> 标签：javascript, string, split

我想将 microsoft 之类的词拆分为 mic ros oft。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:37:16.170

您还可以在 javascript 中将单词拆分为每个字母。希望这会帮助你。

```
var txt="microsoft";

txtArray=txt.split('');
txtLength=txtArray.length;

var text="";
for(var i=1;i<=txtLength;i++) {

  text+=txtArray[i-1];
  if(i%3==0) text+=" ";
}
  alert(text); 
```

# c++ - 是否可以在 C++ Builder 中静态编译 boost::recursive_mutex

> ID：13860664
> 
> 赞同：1
> 
> 时间：2012-12-13T13:17:43.897
> 
> 标签：c++, boost, c++builder, boost-thread, c++builder-2010

`boost::recursive_mutex`并且`boost::lock_guard`似乎在 C++ Builder 2010 中使用**boost_thread-bcb-mt-1_39.dll**。我看到还有静态版本 - **boost_thread-bcb-mt-1_39.lib**。

我的代码是这样的：

```
boost::recursive_mutex mylock;
//...
boost::lock_guard<boost::recursive_mutex> lock(mylock); 
```

但是，如果我将编译选项设置为**Release**并将 Dynamic RTL 选项设置为**False** ，我得到的只是**将 dll boost 库与静态运行时混合是一个非常糟糕的主意**...。将动态 RTL 恢复为**True**可以编译，但它需要额外的 DLL - **cc32100mt.dll**和**boost_thread-bcb-mt-1_39.dll**。

有没有办法在单个 exe 中静态编译它？毕竟提供了LIB文件，应该是可以的。这个版本的 C++ Builder 或 Boost 有问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-17T10:21:10.473

我需要的是在头文件中定义：

```
#define BOOST_THREAD_USE_LIB 
```

就在之前：

```
#include <boost/thread/recursive_mutex.hpp>
#include <boost/thread/locks.hpp> 
```

之后它编译没有任何问题。

# c++ - 游戏开发逻辑（获取区域内的单位）

> ID：13860668
> 
> 赞同：1
> 
> 时间：2012-12-13T13:17:58.383
> 
> 标签：c++, directx, logic

我正在开发一款游戏，但我遇到了问题。基本上这个想法是：

*   玩家在区域使用咒语。
*   引擎选择该区域中的所有单位并对每个单位应用效果。

问题是游戏理论上拥有数千个单元，并且运行一个循环来检查每个单元是否在指定区域内会花费很多处理。

有没有办法索引和加速这个过程？

这是一个例子（它的理论！！）：

```
// Create the unit struct

typedef struct UNIT{

   int ID;
   int x;
   int y;

}unit;

// Initialize the global unit struct

unit* allunits;

// Do some code, expand the array and add more units

void addUnits(){

...

}

// Search for the number of units that are inside a random region using for and the unit array

int unitsInRegion(x1, x2, y1, y2){

  // Spend alot of processing because there is like 10.000 units and we need to look at each X and Y
} 
```

我想将这种任务与 DirectX 混合，作为一种简化渲染过程的方法，排除不在缓冲区视线范围内的模型（相机）。

对不起，我的英语不好。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:53:19.433

> 有没有办法索引和加速这个过程？

正如评论中提到的，通常的做法是像[Quadtrees](http://en.wikipedia.org/wiki/Quadtree)、[Octrees](http://en.wikipedia.org/wiki/Octree)或[BSP-Trees](http://en.wikipedia.org/wiki/Binary_space_partitioning)这样的树。

> 我想将这种任务与 DirectX 混合，作为一种简化渲染过程的方法，排除不在缓冲区视线范围内的模型（相机）。

我认为您正在寻找 View Frustum Culling（[教程](http://zach.in.tu-clausthal.de/teaching/cg_literatur/lighthouse3d_view_frustum_culling/index.html)）。您可以将此方法与评论中提到的树之一混合使用，以有效地剔除场景中的所有对象。

# javascript - 如何在 html 中创建图像幻灯片？

> ID：13860671
> 
> 赞同：13
> 
> 时间：2012-12-13T13:18:05.497
> 
> 标签：javascript, slideshow

我想在我的网络上制作图像幻灯片，这是我的代码

```
<head>
<script type="text/javascript">
    var image1 = new Image()
    image1.src = "images/pentagg.jpg"
    var image2 = new Image()
    image2.src = "images/promo.jpg"
</script>
</head>
<body>
<p><img src="images/pentagg.jpg" width="500" height="300" name="slide" /></p>
    <script type="text/javascript">
            function slideit()
            {
                var step=1;
                document.images.slide.src = eval("image"+step+".src")
                if(step<2)
                    step++
                else
                    step=1
                setTimeout("slideit()",2500)
            }
            slideit()
    </script>
</body> 
```

为什么它不起作用？我已经把我想要的图像放在图像文件夹中

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-22T07:12:08.163

1.  通过将 var step=1 置于函数调用之上，将其设置为全局变量
2.  放分号

它看起来像这样

```
<head>
<script type="text/javascript">
var image1 = new Image()
image1.src = "images/pentagg.jpg"
var image2 = new Image()
image2.src = "images/promo.jpg"
</script>
</head>
<body>
<p><img src="images/pentagg.jpg" width="500" height="300" name="slide" /></p>
<script type="text/javascript">
        var step=1;
        function slideit()
        {
            document.images.slide.src = eval("image"+step+".src");
            if(step<2)
                step++;
            else
                step=1;
            setTimeout("slideit()",2500);
        }
        slideit();
</script>
</body> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T13:21:56.463

您可以使用 jquery 插件，而不是从头开始编写代码。这样的插件也可以提供许多配置选项。

这是我最喜欢的一个。

[http://www.zurb.com/playground/orbit-jquery-image-slider](http://www.zurb.com/playground/orbit-jquery-image-slider)

# c++ - C pthread 与结构

> ID：13860673
> 
> 赞同：0
> 
> 时间：2012-12-13T13:18:11.437
> 
> 标签：c++, pointers, struct, pthreads

所以我们正在努力应对挑战，我们需要并行化 c++ 代码，以确保它使用多个内核而不是一个内核。我们为此使用了 openmp，它现在运行得更好了。但对于另一部分，我们需要使用 pthread。由于我们对 C++ 非常陌生（实际上这是我们第一次使用它），因此我们很难让线程正常工作。

这是原始代码的简约版本：

```
int main(int argc, char **argv) {
    ...code ...
    //These 2 functions should be running in parallel
    work_calculation(flights, parameter, alliances);
    play_calculation(flights, parameter, alliances);
    ...code...
}

void work_calculation(vector<Flight>& flights, Parameters& parameters, vector<vector<string> >& alliances)
{
    ... code ...
    do_calculation(flights, parameters, alliances);
    ... code ...
}

void do_calculation(vector<Flight>& flights, Parameters& parameters, 
vector<vector<string> >& alliances)
{
    ...code...
} 
```

为了将 pthread 与具有多个参数的函数一起使用，我们发现我们需要使用结构体。所以我们想出了这个：

```
int main(int argc, char **argv) {
    ...code ...
    s_param parathread;
parathread.flights = flights;
parathread.parameters = parameters;
parathread.alliances = alliances;
pthread_t play;
pthread_t work;
pthread_create(&play, NULL, work_calculation ,&parathread);
pthread_create(&work, NULL, play_calculation, &parathread);
pthread_join(play, NULL);
pthread_join(work, NULL);
    ...code...
}

typedef struct 
{
    vector<Flight> flights;
    Parameters parameters;
    vector<vector<string> > alliances;
} s_param;

void* work_calculation(void* args)
    {
        ... code ...
        struct s_param *paraThread = (struct s_param*)args;
        do_calculation(paraThread->flights, paraThread->parameters, paraThread->alliances);
        ... code ...
        pthread_exit(NULL);
    }

void do_calculation(vector<Flight>& flights, Parameters& parameters, 
vector<vector<string> >& alliances)
{
    ...code... (same as original)
} 
```

如果我们这样做，我们会收到以下错误：

错误：不允许指向不完整类类型的指针 -> 我在任何地方都使用 paraThread

我们还尝试在 struct s_pram *paraThread = (struct s_param*)args => 中不使用结构（就像这样： s_param *paraThread = args; ，但是在编译时我们得到了这些错误：

标识符 s_param 未定义，标识符 paraThread 未定义

我们做错了什么？我希望有人可以帮助我们找到问题所在。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:29:27.443

需要在`struct`实例化之前定义`main`；你在之后定义它`main`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:25:34.910

我认为你的问题在这条线上。

```
pthread_create(&play, NULL, work_calculation, &parathread); 
```

正确的是这个。

```
pthread_create(&work, NULL, &work_calculation, &parathread); 
```

将其应用于两个线程。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T13:30:23.753

将 typedef struct {} s_param 的定义移到文件开头。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T13:22:34.590

片段：

```
typedef struct 
{
    vector<Flight> flights;
    Parameters parameters;
    vector<vector<string> > alliances;
} s_param; 
```

创建一个类型`s_param`，而不是`struct s_param`。Mike Seymour 有正确的答案（使用和定义的顺序不正确），但您仍然需要使用其中一个`struct`或`typedef`. 我自己更喜欢 typedef，但其他人有其他想法。

你可以使用：

```
typedef struct {
    vector<Flight> flights;
    Parameters parameters;
    vector<vector<string> > alliances;
} s_param;
:
s_param *something; 
```

或者：

```
struct s_param {
    vector<Flight> flights;
    Parameters parameters;
    vector<vector<string> > alliances;
};
:
struct s_param *something; // I think struct is optional but I still prefer it. 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-12-13T14:39:04.817

如果您不熟悉线程，我将从更高级别的运行时库开始进行并行化。像 pthread 这样的低级线程库在其最低级别公开了并行性控制。那里代表了并行性的汇编语言。因此，它们提供了最大的灵活性，但在程序员工作、调试时间和维护成本方面的成本很高。

开源 C++ 运行时是 cilk Plus 和 TBB。他们有一个开源网站可以从中下载位。

www.threadingbuildingblocks.org

www.cilkplus.org

# javascript - 在 javascript 应用程序中加载 XML 内容

> ID：13860687
> 
> 赞同：0
> 
> 时间：2012-12-13T13:19:04.527
> 
> 标签：javascript

我开发了一个 javascript 应用程序，它使用图表和列表显示来自 xml 的数据。现在我将一些示例文件放到我加载的服务器目录中：

```
$.ajax({ type: 'GET', url: 'data/default.xml', dataType: 'xml', ...}) 
```

Xml 文件可能非常重，因此在加载其中一个文件时，我将数据放入 IndexedDB。

第二次我想让访问者通过提供 xml 的文件路径（fi：/home/user/sample.xml）来加载自己的 xml 文件。我不想将此文件上传到服务器上，因为我不需要它而且它可能太大了。但我确实想在 IndexedDB 中加载这些数据，并让应用程序显示数据而无需调用服务器。

我不知道浏览器是否可以这样工作？如果他们可以，我怎么能做这样的把戏？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:22:52.317

您不能使用 Ajax 从客户端系统上的文件中获取数据，但[在足够现代的浏览器中](http://caniuse.com/#search=file%20api)，您可以使用[File API](http://www.w3.org/TR/FileAPI/)。MDN 有一个比规范更友好[的文件 API 指南。](https://developer.mozilla.org/en-US/docs/Using_files_from_web_applications)

# ios - 滚动视图 - 在“屏幕外”页面中定位 UI 元素

> ID：13860688
> 
> 赞同：0
> 
> 时间：2012-12-13T13:19:07.603
> 
> 标签：ios, interface-builder, scrollview

我正在编写一个 iPhone 应用程序，我需要在 3 个数据视图之间滚动。

我正在尝试使用滚动视图，但在 Interface Builder 中，我在放置 UILabels、Text Fields 和第二页和第三页的其他 UI 元素时遇到了一些困难，因为我应该将它们放在 IB 中可用的“屏幕边界之外”（我'不确定我是否已经很好地描述了这个问题）。

是否有任何简单的方法可以在 IB 中为第二页和第三页放置 UI 元素？

使用另一种方法会更好吗，例如拥有三个视图控制器，然后在滚动视图中使用它们？

谢谢， 科拉多

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:01:17.157

我不完全确定是什么在“推动”这三种观点。会一直是三视图吗？

如果每个页面都是一个全新的屏幕，那么您可以使用 UIPageViewController。

这是一个管理多个 ViewController 的控制器，包括在不同的视图控制器之间滑动。

考虑一个水平的 UITableViewController，但它分配 UIViewControllers 而不是 UITableViewCells。

# jsf-2 - 如果 url 参数出现，则呈现 primefaces 消息

> ID：13860689
> 
> 赞同：3
> 
> 时间：2012-12-13T13:19:09.770
> 
> 标签：jsf-2, primefaces

我有下一个网址：`http://host:port/page.xhtml?response=something`

我想渲染 ap:message if response==something

我有下一个代码：

```
 <h:panelGroup rendered="#{param.response == 'something'}">
            <h:outputText value="message" /> 
       </h:panelGroup> 
```

这呈现一个`<div>message</div>`

如果 response==something我想渲染一个`<p:messages /> or <p:growl />`及其值“消息”

请帮我编写代码以及其他内容：

*   我是否需要一个 bean 来向 p:messages 或 p:growl 发送值？
*   我需要从 a 调用 p:messages 或 p:growl`<p:commandButton />`吗？
*   我不能使用`<h:body onload="callFunction()">`，因为 h:body 在模板 xhtml `<ui:insert name="content"></ui:insert>`上，而我的视图`<ui:composition ... <ui:define name="content" >`在其他 xhtml 上，而 h:body 对几个视图来说是通用的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:22:50.117

您确实需要使用[`FacesContext#addMessage()`](http://docs.oracle.com/javaee/6/api/javax/faces/context/FacesContext.html#addMessage%28java.lang.String,%20javax.faces.application.FacesMessage%29)将消息添加到上下文中。在最初的请求中，您最好的选择是

```
<f:metadata>
    <f:viewParam name="response" value="#{bean.response}"/>
    <f:event type="preRenderView" listener="#{bean.init}" />
</f:metadata> 
```

和

```
private String response;

public void init() {
    if (response != null) { 
        FacesContext.getCurrentInstance().addMessage(null, new FacesMessage(
            FacesMessage.SEVERITY_INFO, response, null));
    }
} 
```

顺便说一句，您还可以使用单独的`<p:messages globalOnly="true">`或*仅*`<p:growl globalOnly="true">`显示带有客户端 ID 的面孔消息。*`null`*

 *### 也可以看看：

*   [<f:metadata>、<f:viewParam> 和 <f:viewAction> 可以用来做什么？](https://stackoverflow.com/questions/6377798/what-can-fmetadata-and-fviewparam-be-used-for)*

# c#-4.0 - 如何根据同一组中的另一个子节点获取子节点值

> ID：13860690
> 
> 赞同：0
> 
> 时间：2012-12-13T13:19:10.703
> 
> 标签：c#-4.0, xpath

我正在用 C# 开发，并且正在处理来自外部肥皂调用的 xml。我已将 xml 响应加载到 XElement 中。

给定以下 xml 存根

```
<record>
   <node>
       <a>My title</a>
       <name>title_en</name>
   </node>
   <node>
      <a>...</a>
      <name>contact_name</name>
   </node>
   .....
</record> 
```

在 C# 中使用 xpath：我在使用方法 XPathSelectElement 时尝试执行以下操作。

在哪里

```
\record\node\name == 'title_en' select \record\node\a 
```

如果有更好的方法可以使用或关于如何执行查询的其他建议，我愿意接受。

提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T00:03:21.173

您需要一个*谓词*来限制您需要哪些节点元素：

```
/record/node[name = 'title_en']/a 
```

您将此表达式读作“查找记录元素，查找其所有命名为具有值为“title_en”的子元素的子元素`node`，`name`并为每个元素找到所有子元素`a`”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:35:44.927

用这个：

```
var title = doc.Descendants("node")
               .Where(x => (string)x.Element("name") == "title_en")
               .Select(x => (string)x.Element("a"))
               .FirstOrDefault(); 
```

# magento - 我想在我的页面上显示类别及其子类别结构，如下所示，在 magento 1.7 中

> ID：13860691
> 
> 赞同：-1
> 
> 时间：2012-12-13T13:19:10.970
> 
> 标签：magento, categories

我是 magento 的新手，对类别及其子类别及其产品结构有疑问。请问谁能给我实现完全相同结构的代码。

我想要在内容区域中这样的结构，而不是在任何侧边栏或标题导航中：-

主要类别名称

子类别 1 名称

```
 Product 1 
  Product 2
  .
  . 
```

子类别 2 名称

```
 Product 1 
   Product 2
   .
   . 
```

这应该适用于每个类别。谁能解决这个问题？提前致谢 ：）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T22:02:01.817

这是我用来在类别页面上显示子类别图块的一些代码。

[https://www.evernote.com/shard/s4/sh/cc805407-a0d5-4d74-8cd2-b2d7513262f1/9934b5a9f09962b90fe5ecf76f06deb5](https://www.evernote.com/shard/s4/sh/cc805407-a0d5-4d74-8cd2-b2d7513262f1/9934b5a9f09962b90fe5ecf76f06deb5)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:06:46.483

我建议不要更好地询问代码，您可以尝试这里的人可以给出想法。

然后也...转到您的magento中的以下路径（注意：这里我使用的是base/default/default，您必须在模板文件中使用）。

/app/design/frontend/base/default/template/catalog/navigation

创建新文件 vert-navigation.phtml

```
<?php $_helper = Mage::helper('catalog/category') ?>
<?php $_categories = $_helper->getStoreCategories() ?>
<?php $currentCategory = Mage::registry('current_category') ?>
<?php if (count($_categories) > 0): ?>
 <div class="vertical-nav">
 <div class="navi-title"><h2>BROWSE BY CATEGORY</h2></div>
 <?php echo $this->getChildHtml('topSearch') ?>
    <ul>
        <?php foreach($_categories as $_category): ?>
            <li>
                <a href="<?php echo $_helper->getCategoryUrl($_category) ?>">
                    <?php echo $_category->getName() ?>
                </a>
                <?php //if ($currentCategory->getName() == $_category->getName()): ?>
                    <?php $_category = Mage::getModel('catalog/category')->load($_category->getId()) ?>
                    <?php $_subcategories = $_category->getChildrenCategories();
                            //$count=0; ?>
                    <?php if (count($_subcategories) > 0): ?>
                    <!--li>
                <a href="<?php echo $_helper->getCategoryUrl($_category) ?>">
                    <?php echo $_category->getName() ?>
                </a-->
                        <ul>
                            <?php foreach($_subcategories as $_subcategory): ?>
                                <li>
                                    <a href="<?php echo $_helper->getCategoryUrl($_subcategory) ?>">
                                        <?php echo $_subcategory->getName() ?>
                                    </a>
                                </li>
                                <?php //$count++; ?>
                                <?php //if($count==4) break; ?>
                            <?php endforeach; ?>
                        </ul>
                    <?php //endif; ?>
                <?php endif; ?>
            </li>
        <?php endforeach; ?>
    </ul>
<?php endif; ?>
</div> 
```

然后去 /app/design/frontend/base/default/layout/catalog.xml 放置下面的代码

```
 <reference name="content">
        <!--block type="catalog/navigation" name="catalog.leftnav" after="currency" template="catalog/navigation/left.phtml"/-->
        <block type="catalog/navigation" before="-" name="catalog.vertnav" template="catalog/navigation/vert-navigation.phtml"/>
    </reference> 
```

您将根据需要看到 Category do 样式的完整列表。

# c# - C#：MS Chart：SeriesCollection -> 工作表中数据的范围

> ID：13860697
> 
> 赞同：0
> 
> 时间：2012-12-13T13:19:32.793
> 
> 标签：c#, mschart, excel-interop

我想将图表的数据剪切并粘贴到与其对应的 excel 数据表不同的位置。

如何确定图表数据的范围，以便我能够粘贴图表数据？

例如

```
Worksheet worksheet ...
Chart myChart ... 
SeriesCollection mySeriesCollection ...
---->>>  mySeriesCollection.getRange()  <<<<<------------- // this doesnt exist 
```

最好的，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-18T21:25:27.540

我认为没有直接的方法。我最好的建议是检查图表的系列并检查系列的值和 XValues。

```
foreach (Series series in chart.SeriesCollection()){
   Range values = series.Values;
   Range xvalues = series.XValues;
} 
```

然后，您可以将所有范围连接在一起并获取图表的源数据。

# spring - Spring Security 角色层次结构问题

> ID：13860705
> 
> 赞同：2
> 
> 时间：2012-12-13T13:20:20.567
> 
> 标签：spring, spring-security, roles, waffle

我试图在使用 Waffle NTML 进行身份验证时启用 Spring Security 中的角色层次结构投票，但存在一些未知问题，即继承的角色不会像预期的那样显示为主体上的权限，从而阻止拦截 url 中的 hasRole 表达式和使用授权 jsp taglibs .

我一直在根据以下指南集成华夫饼：[https ://github.com/dblock/waffle/blob/master/Docs/spring/SpringSecuritySingleSignOnFilter.md](https://github.com/dblock/waffle/blob/master/Docs/spring/SpringSecuritySingleSignOnFilter.md)

*这可以使用标准RoleVoter*在应用程序中按预期自行工作，但是当我尝试自定义它以使用我自己也测试过的*RoleHierarchyVoter*（使用 LDAP 身份验证提供程序）并且角色层次结构完全一样时，问题就开始了预期的。

Waffle 和 RoleHierarchyVoter 组合方法的配置如下：

**华夫饼特定配置**

```
<!-- windows authentication provider -->
<bean id="waffleWindowsAuthProvider" class="waffle.windows.auth.impl.WindowsAuthProviderImpl" />

<!-- collection of security filters -->
<bean id="negotiateSecurityFilterProvider" class="waffle.servlet.spi.NegotiateSecurityFilterProvider">
    <constructor-arg ref="waffleWindowsAuthProvider" />
</bean>

<bean id="basicSecurityFilterProvider" class="waffle.servlet.spi.BasicSecurityFilterProvider">
    <constructor-arg ref="waffleWindowsAuthProvider" />
</bean>

<bean id="waffleSecurityFilterProviderCollection" class="waffle.servlet.spi.SecurityFilterProviderCollection">
    <constructor-arg>
        <list>
            <ref bean="negotiateSecurityFilterProvider" />              
            <ref bean="basicSecurityFilterProvider" />              
        </list>
    </constructor-arg>
</bean>

<bean id="negotiateSecurityFilterEntryPoint" class="waffle.spring.NegotiateSecurityFilterEntryPoint">
    <property name="Provider" ref="waffleSecurityFilterProviderCollection" />
</bean>

<!-- spring security filter -->
<bean id="waffleNegotiateSecurityFilter" class="waffle.spring.NegotiateSecurityFilter">
    <property name="Provider" ref="waffleSecurityFilterProviderCollection" />
    <property name="AllowGuestLogin" value="false" />
    <property name="PrincipalFormat" value="fqn" />
    <property name="RoleFormat" value="fqn" />
    <property name="GrantedAuthorityFactory" ref="simpleGrantedAuthorityFactory" />
    <!-- set the default granted authority to null as we don't need to assign a default role of ROLE_USER -->
    <property name="defaultGrantedAuthority"><null/></property>

</bean>

<!-- custom granted authority factory so the roles created are based on the name rather than the fqn-->
<bean id="simpleGrantedAuthorityFactory" class="xx.yy.zz.SimpleGrantedAuthorityFactory">
    <constructor-arg name="prefix" value="ROLE_"/>
    <constructor-arg name="convertToUpperCase" value="true"/>
</bean> 
```

**熟悉的 Spring 安全配置**

```
<!-- declare the entry point ref as the waffle defined entry point -->
<sec:http use-expressions="true"
          disable-url-rewriting="true"
          access-decision-manager-ref="accessDecisionManager"
          entry-point-ref="negotiateSecurityFilterEntryPoint" >

    <sec:intercept-url pattern="/**" access="isAuthenticated()" requires-channel="any"/>

    .
    . access denied handlers, concurrency control, port mappings etc
    .

    <sec:custom-filter ref="waffleNegotiateSecurityFilter" position="BASIC_AUTH_FILTER" />

</sec:http>

<!-- spring authentication provider -->
<sec:authentication-manager alias="authenticationProvider" />

<bean id="accessDecisionManager" class="org.springframework.security.access.vote.AffirmativeBased">
    <property name="decisionVoters">
        <list>
            <ref bean="roleHierarchyVoter" />
            <bean class="org.springframework.security.web.access.expression.WebExpressionVoter">
                <property name="expressionHandler">
                    <bean class="org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler">
                        <property name="roleHierarchy" ref="roleHierarchy"/>
                    </bean>
                </property>
            </bean>
        </list>
    </property>
</bean>

<bean id="roleHierarchy" class="org.springframework.security.access.hierarchicalroles.RoleHierarchyImpl">
    <property name="hierarchy">
        <value>
            ROLE_TEST_1 > ROLE_TEST_2
            ROLE_TEST_2 > ROLE_TEST_3
            ROLE_TEST_3 > ROLE_TEST_4
        </value>
    </property>
</bean>

<bean id="roleHierarchyVoter"
            class="org.springframework.security.access.vote.RoleHierarchyVoter">
    <constructor-arg ref="roleHierarchy"/>
</bean> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-14T11:32:20.680

设法解决了我的问题，这是我在调试 spring 安全源数小时后发现的 http 命名空间配置中的一个遗漏。

问题是如何创建 DefaultWebSecurityExpressionHandler。在上面的片段中，它在 accessDecisionManager 的 bean 定义中将其创建为内部 bean：

```
<bean class="org.springframework.security.web.access.expression.WebExpressionVoter">
    <property name="expressionHandler">
        <bean class="org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler">
            <property name="roleHierarchy" ref="roleHierarchy"/>
        </bean>
    </property> 
</bean> 
```

这样，角色层次结构用于确定在处理定义为拦截 url 的规则时是否应授予访问权限，例如：

```
<sec:intercept-url pattern="/**" access="isAuthenticated()" requires-channel="any"/> 
```

但是，如果您想使用 JSP Authorize taglib 来检查授权，如下所示（这是在 freemarker 中），它不会起作用，因为没有考虑到 roleHierachies：

```
<@security.authorize access="hasRole('ROLE_TEST_1)">
    <p>You have role 1</p>
</@security.authorize>

<@security.authorize access="hasRole('ROLE_TEST_4')">
    <p>You have role 4</p>
</@security.authorize> 
```

这是因为作为内部 bean 创建的 DefaultWebSecurityExpressionHandler 仅在访问决策管理器中使用，但对于 taglib 表达式，除非定义了安全 http 命名空间表达式处理程序，否则将创建一个**新**的默认 bean（不使用 RoleHierarchy）。

因此，为了解决我的问题，我创建了 bean DefaultWebSecurityExpressionHandler 并在我的 WebExpressionVoter bean 定义中引用它，并将其用作表达式处理程序，如下所示：

```
<sec:http ... >

    .
    . access denied handlers, concurrency control, port mappings etc
    .

    <sec:expression-handler ref="defaultWebSecurityExpressionHandler" />

</sec:http>

<bean id="defaultWebSecurityExpressionHandler"
      class="org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler">
      <property name="roleHierarchy" ref="roleHierarchy"/>
</bean>

<bean id="accessDecisionManager" class="org.springframework.security.access.vote.AffirmativeBased">
    <property name="decisionVoters">
        <list>
            <ref bean="roleHierarchyVoter" />
            <bean class="org.springframework.security.web.access.expression.WebExpressionVoter">
                <property name="expressionHandler" ref="defaultWebSecurityExpressionHandler"/>
            </bean>
        </list>
    </property>
</bean> 
```

进行这些更改可确保将 roleHeirarchies 考虑到通过 http 命名空间定义为拦截 URL 的 Web 安全表达式以及使用 JSP Authorize taglib 的表达式。

# sql - 在 Oracle 中显示多个最高值

> ID：13860708
> 
> 赞同：0
> 
> 时间：2012-12-13T13:20:37.727
> 
> 标签：sql, oracle

目前要在我的查询中显示最高值，我正在使用：

```
ORDER BY Height DESC
) T
WHERE RowNum = 1 
```

这将显示最高值，例如 10，但是如果两个条目的值都相同，该怎么办 10。

我怎样才能使它显示两个联合最高值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:23:47.990

在 Oracle 中使用，使用排名分析

```
select a, b
  from (select a, b, rank() over (order by height desc) rnk
          from your_table)
 where rnk = 1; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:24:30.347

一种解决方案是使用 CTE

**使用 CTE**

```
;WITH q AS (
  SELECT MAX(Height) AS maxHeight
  FROM   YourTable
)
SELECT *
FROM   YourTable
       INNER JOIN q ON q.maxHeight = Yourtable.Height 
```

**或带有子选择的普通 where 子句**

```
SELECT *
FROM   YourTable
WHERE  Height = (SELECT MAX(Height) FROM YourTable) 
```

就个人而言，我更喜欢使用 CTE，因为它不会使语句混乱*（好吧，在这个简单的情况下不是这样，但在实践中，我经常发现它比子选择更具可读性）*。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:06:03.550

在这里你没有子查询，它更复杂但创建起来很有趣。

```
select ifnull(@d,@d:=actor_id),actor_id,if(@d>actor_id,1,0)as t 
from t1 having t=0 order by actor_id desc; 
```

这是我电脑中的示例。

```
mysql> desc t1;
+-------------+----------------------+------+-----+---------------------+-------+
| Field       | Type                 | Null | Key | Default             | Extra |
+-------------+----------------------+------+-----+---------------------+-------+
| actor_id    | smallint(5) unsigned | NO   |     | 0                   |       |
| first_name  | varchar(45)          | NO   |     | NULL                |       |
| last_name   | varchar(45)          | NO   |     | NULL                |       |
| last_update | timestamp            | NO   |     | 0000-00-00 00:00:00 |       |
+-------------+----------------------+------+-----+---------------------+-------+
4 rows in set (0.00 sec)

mysql> select * From t1 order by actor_id desc limit 5;
+----------+------------+-----------+---------------------+
| actor_id | first_name | last_name | last_update         |
+----------+------------+-----------+---------------------+
|    20001 | test       | test      | 2012-12-13 09:12:50 |
|    20001 | test       | test      | 2012-12-13 09:12:51 |
|     2000 | b          | a         | 0000-00-00 00:00:00 |
|     2000 | b          | a         | 0000-00-00 00:00:00 |
|     2000 | b          | a         | 0000-00-00 00:00:00 |
+----------+------------+-----------+---------------------+
5 rows in set (0.00 sec)

mysql>     select ifnull(@d,@d:=actor_id),actor_id,if(@d>actor_id,1,0)as t 
    ->     from t1 having t=0 order by actor_id desc;
+-------------------------+----------+---+
| ifnull(@d,@d:=actor_id) | actor_id | t |
+-------------------------+----------+---+
|                   20001 |    20001 | 0 |
|                   20001 |    20001 | 0 |
+-------------------------+----------+---+
2 rows in set (0.00 sec) 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T13:36:46.893

这样就可以了，而且也很简单，

```
Select height from table where height=(select max(height) from table) 
```

# php - 错误的日期时间 - PHP+ SQL Server

> ID：13860709
> 
> 赞同：3
> 
> 时间：2012-12-13T13:20:42.437
> 
> 标签：php, sql-server, datetime, locale

```
echo date('d/m/Y H:i:s'); 
//output: 13/12/2012 11:10:57

print_r(getDataArray($dblink, 'select current_timestamp')); 
//output: Array ( [0] => Array ( [computed] => **2012-04-12 11110:05** ) ) 
```

当我尝试获取“current_timestamp”+ php + sql 服务器时，我收到一个错误，一个不正确的日期。谁能帮我？

*   mssql 配置（php.ini）中的日期转换为“关闭”

这是 locale.conf 的问题吗？/etc/locale.conf ....

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:15:03.940

问题可能出在返回日期时间列的格式上。

在你的 php.ini 中试试这个：

在这一行之后：

```
;mssql.datetimeconvert = On 
```

添加这一行：

```
mssql.datetimeconvert = Off 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-03-07T03:05:33.127

尝试：

连接后执行查询：

```
SET DATEFORMAT ymd; 
```

PHP：

```
odbc_exec($conn, "SET DATEFORMAT ymd"); 
```

# javascript - 尝试通过 websocket 流式传输 MP3 时出现 DOM 异常 12

> ID：13860713
> 
> 赞同：0
> 
> 时间：2012-12-13T13:21:12.920
> 
> 标签：javascript, node.js, streaming, websocket, web-audio-api

我目前正在做一个小项目，我想将 mp3 拆分为帧，通过 websocket 将它们发送到客户端（浏览器），然后使用 WebAudio（webkitAudioContext）播放它们。我的服务器正在运行 nodejs 并将数据作为二进制传输，我使用 binaryJS。我正在测试的浏览器是 Chrome 25.0.1354.0 dev，在 Ubuntu 12.04 上运行。

我已经成功地将 mp3 分割成帧，或者，至少，根据我的测试，它似乎有效。如果我将帧写回文件中，mplayer 播放文件没有问题，并且还可以正确解析标题。每个帧都存储在正确大小的 nodejs 缓冲区中，缓冲区的最后一个字节始终是下一个同步字之前的第一个字节。

作为初始测试，我只发送第一个 MP3 帧。客户端成功接收到帧（存储在 ArrayBuffer 中），并且缓冲区包含正确的数据。但是，当我调用 decode 时，我收到以下消息：

```
Uncaught Error: SyntaxError: DOM Exception 12 
```

我调用 decodeAudio 的函数如下所示：

```
streamDone = ->
    bArray = new Uint8Array(arr[0].byteLength)
    console.log "Stream is done, bytes", bArray.length
    context.decodeAudioData bArray, playAudio, err 
```

我试图解码的初始帧可以在[这里](https://gist.github.com/4276321)找到。

几天来，我一直在努力解决这个问题。有没有人设法解决这个问题并成功解码了 mp3 帧，看看我做错了什么？我在 StackOverflow 上找到了两个相关的问题，但答案并没有帮助我解决问题。但是，根据[此处](https://stackoverflow.com/questions/10470742/define-valid-mp3-chunk-for-decodeaudiodata-webaudio-api)接受的答案，我的帧应该有资格作为有效的 mp3 块，因此可以被解码。

提前感谢您的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T10:17:55.503

事实证明，休息和一些新鲜的眼睛可以创造奇迹，一般的代码清理解决了这个问题。如果有人对代码感兴趣，我在[这里](https://github.com/kristrev/streaming-mp3-websockets-webaudio)发布。

# ruby-on-rails - Heroku 在重启时崩溃

> ID：13860716
> 
> 赞同：1
> 
> 时间：2012-12-13T13:21:29.883
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3, heroku, ruby-on-rails-3.2

找不到错误的来源（在本地工作正常）

```
C:\Users\Ahmet\Documents\GitHub\SkyPig>heroku restart
Restarting processes... done

C:\Users\Ahmet\Documents\GitHub\SkyPig>heroku ps:scale web=1
Scaling web processes... done, now running 1

C:\Users\Ahmet\Documents\GitHub\SkyPig>heroku ps
=== web: `bundle exec thin start -R config.ru -e $RAILS_ENV -p $PORT`
web.1: crashed 2012/12/13 13:17:05 (~ 16s ago)

C:\Users\Ahmet\Documents\GitHub\SkyPig>heroku logs

2012-12-13T13:16:52+00:00 heroku[web.1]: State changed from crashed to starting
2012-12-13T13:16:55+00:00 heroku[web.1]: Starting process with command `bundle exec thin start -R config.ru -e production -p 30968`

2012-12-13T13:17:01+00:00 app[web.1]: Connecting to database specified by DATABASE_URL
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:438:in `each'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:438:in `block in eager_load!'
2012-12-13T13:17:04+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:317:in `rescue in depend_on': No such file to load -- GiantBomb (LoadError)
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:436:in `each'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:439:in `block (2 levels) in eager_load!'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `run'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:225:in `require_dependenc
y'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/config/environment.rb:5:in `<top (required)>'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `run_initializers'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/railtie/configurable.rb:30:in `method_missing'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:55:in `block in run_initializers'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:54:in `each'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application/finisher.rb:53:in `block in <module:Finisher>'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/initializable.rb:30:in `instance_exec'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.8/lib/active_support/dependencies.rb:312:in `depend_on'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/application.rb:136:in `initialize!'
2012-12-13T13:17:04+00:00 app[web.1]:   from config.ru:3:in `require'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.8/lib/rails/engine.rb:436:in `eager_load!'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `initialize'
2012-12-13T13:17:04+00:00 app[web.1]:   from config.ru:1:in `<main>'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/controllers/controller.rb:181:in `load_rackup_config'
2012-12-13T13:17:04+00:00 app[web.1]:   from config.ru:1:in `new'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/controllers/controller.rb:71:in `start'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.1/lib/rack/builder.rb:51:in `instance_eval'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/bin/thin:6:in `<top (required)>'
2012-12-13T13:17:04+00:00 app[web.1]:   from config.ru:3:in `block in <main>'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `load'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/bin/thin:19:in `<main>'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/rack/adapter/loader.rb:33:in `eval'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/rack/adapter/loader.rb:33:in `load'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/runner.rb:187:in `run_command'
2012-12-13T13:17:04+00:00 app[web.1]:   from /app/vendor/bundle/ruby/1.9.1/gems/thin-1.5.0/lib/thin/runner.rb:152:in `run!'
2012-12-13T13:17:05+00:00 heroku[web.1]: Process exited with status 1
2012-12-13T13:17:05+00:00 heroku[web.1]: State changed from starting to crashed
2012-12-13T13:17:14+00:00 heroku[api]: Scale to web=1 by ahmetabdi@gmail.com 
```

宝石文件

```
source 'https://rubygems.org'

gem 'rails', '3.2.8'

# Bundle edge Rails instead:
# gem 'rails', :git => 'git://github.com/rails/rails.git'

gem 'sqlite3', :group => [:development, :test]
group :production do
  gem 'thin'
  gem 'pg'
end

gem 'giantbomb'
gem 'stiki'
gem 'devise'
gem 'will_paginate'
gem 'will_paginate-bootstrap'
gem 'tinymce-rails'

# Gems used only for assets and not required
# in production environments by default.
group :assets do
  gem 'sass-rails',   '~> 3.2.3'
  gem 'coffee-rails', '~> 3.2.1'

  # See https://github.com/sstephenson/execjs#readme for more supported runtimes
  # gem 'therubyracer'

  gem 'uglifier', '>= 1.0.3'
end

gem 'jquery-rails'

# To use ActiveModel has_secure_password
# gem 'bcrypt-ruby', '~> 3.0.0'

# To use Jbuilder templates for JSON
# gem 'jbuilder'

# Use unicorn as the web server
# gem 'unicorn'

# Deploy with Capistrano
# gem 'capistrano'

# To use debugger
# gem 'ruby-debug19', :require => 'ruby-debug' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T15:03:53.230

从日志看来错误来自第 5 行`/app/config/environment.rb`，而实际错误是`No such file to load -- GiantBomb (LoadError)`. 我猜你`require 'GiantBomb'`在该行，它在本地工作，因为你在 Windows 上，它有一个不区分大小写的文件系统。Heroku 使用具有区分大小写的文件系统的 Linux，因此它会失败，因为实际文件名是[`giantbomb`](https://github.com/intelekshual/giantbomb/blob/master/lib/giantbomb.rb)（全部小写）。

您需要将该行更改为

```
require 'giantbomb' 
```

# css - Nanoc 没有编译 css

> ID：13860718
> 
> 赞同：1
> 
> 时间：2012-12-13T13:21:41.983
> 
> 标签：css, ruby, stylesheet, nanoc

我想使用自定义样式表路径`/stylesheets/stylesheet.css`与 nanoc 一起使用，但 nanoc 不会在`output`文件夹中呈现 css 文件。这是我的规则：

```
compile '/stylesheets/' do
  filter :css
end

compile '/images/*/' do
end

compile '*' do
  if item.binary?
    # don’t filter binary items
  else
    filter :haml
    layout 'default'
  end
end

route '/stylesheets/' do
  '/stylesheets/stylesheet.css'
end

route '*' do
  if item.binary?
    # Write item with identifier /foo/ to /foo.ext
    item.identifier.chop + '.' + item[:extension]
  else
    # Write item with identifier /foo/ to /foo/index.html
    item.identifier + 'index.html'
  end
end

layout '*', :haml 
```

而且它不起作用 - 任何人都知道问题出在哪里？此外，它只生成`output/stylesheet/index.html`包含我的样式表但放入我的 html 布局的文件！:(

下面是它的样子 ( `output/stylesheet/index.html`)：

```
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html lang='en' xml:lang='en' xmlns='http://www.w3.org/1999/xhtml'>
  <head>
    <meta content='text/html; charset=utf-8' http-equiv='Content-Type' />
    <title>
      A Brand New nanoc Site -

    </title>
    <link href='/stylesheets/stylesheet.css' media='screen' rel='stylesheet' type='text/css' />
    <meta content='nanoc 3.1.6' name='generator' />
  </head>
  <body>
    <!-- * reset css begins */ -->
html, body, div, span, applet, object, iframe, h1, h2, h3, h4, h5, h6, p, blockquote, pre, a, abbr, acronym, address, big, cite, code, del, dfn, em, img, ins, kbd, q, s, samp, small, strike, strong, sub, sup, tt, var, b, u, i, center, dl, dt, dd, ol, ul, li, fieldset, form, label, legend, table, caption, tbody, tfoot, thead, tr, th, td, article, aside, canvas, details, embed, figure, figcaption, footer, header, hgroup, menu, nav, output, ruby, section, summary, time, mark, audio, video {margin: 0; padding: 0; border: 0; font-size: 100%; font: inherit; vertical-align: baseline;}
<!-- * HTML5 display-role reset for older browsers */ -->
article, aside, details, figcaption, figure, footer, header, hgroup, menu, nav, section {display: block;}
body {line-height: 1;}
ol, ul {list-style: none;}
blockquote, q {quotes: none;}
blockquote:before, blockquote:after, q:before, q:after {content: ''; content: none;}
table {border-collapse: collapse; border-spacing: 0;}
<!-- * reset css ends */ -->
body, html{background: url('../images/background.png') no-repeat center top fixed; background-color: #fff; color: #666 !important;}
p{font-size: 400px;}
  </body>
</html> 
```

请帮忙！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T13:36:36.217

应该说`compile '/stylesheet/'`，不是`compile '/stylesheets/'`，所以去掉多余的`s`。路由规则也有类似的问题。

也没有`:css`过滤器。你想用这个实现什么？如果您希望按原样输出样式表，则不需要过滤器。

# android - 只读到第一个十进制数字

> ID：13860719
> 
> 赞同：0
> 
> 时间：2012-12-13T13:21:44.883
> 
> 标签：android

在我的 android 应用程序中，我有一个 EditText，用户可以在其中输入一个小数，只要用户想要就可以。它可以是 25、54.77、23.7、7.88 等数字。在同一个活动中，我有一个 textView，它将输入读入 EditText 并显示小数点，但只显示第一个小数点。例如，如果用户输入：25 应该显示为 25，54.77 显示为 54.7，23.7 显示为 23.7，7.88 显示为 7.8。我怎样才能做到这一点？我尝试使用以下代码，但没有奏效：

```
 NumberFormat df = DecimalFormat.getInstance();
        df.setMinimumFractionDigits(0);
        df.setMaximumFractionDigits(1);

        df.format(EditTextNumber); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:24:08.423

使用`String.format`：

```
String result = String.format("%.1f", yourdecimalvalue); 
```

你也可以使用`DecimalFormat`：

```
 NumberFormat formatter = new DecimalFormat("#0.0");
 String result = formatter.format(yourdeciamlvalue); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:25:34.043

尝试 NumberFormat 而不是 DecimalFormat：

```
NumberFormat nf = NumberFormat.getInstance();
nf.setMinimumFractionDigits(1);
nf.setMaximumFractionDigits(1);
TextView.setText(nf.format(editText.getText())); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T13:32:28.317

如果您通过编辑文本获取输入，那么您可以使用此代码

```
String number=input.getText().toString(); //input is ur input edittext
String output=number;
int indexOfDecimal=number.lastIndexOf('.');
if(indexOfDecimal!=-1&&indexOfDecimal<output.length()-1)
    number=output.substring(0, indexOfDecimal+2);  // use number as the output 
```

# javascript - 使用javascript取消选中动态radiobuttonlist控件

> ID：13860720
> 
> 赞同：2
> 
> 时间：2012-12-13T13:21:48.357
> 
> 标签：javascript, asp.net, radiobuttonlist

我在 Web 用户控件中有一个 RadioButtonList 控件，它被加载到网页的占位符中。单选按钮列表项目将被动态加载，用户可以选择任何项目。

根据单选按钮的行为，我们要选择另一个项目来取消选择已选择的项目。但是，如果用户单击同一个项目本身（如果它已经被选中），我想取消选择一个项目。

我也必须使用 javascript 而不是服务器端代码来完成它。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T13:51:27.387

`<Head>`在标签中添加这个 javascript 函数。

```
<script type="text/javascript">

        function clearRadioButtonList() {

            var elementRef = document.getElementById('<%= yourRadioButtonListID.ClientID %>');
            var inputElementArray = elementRef.getElementsByTagName('input');

            for (var i = 0; i < inputElementArray.length; i++) {
                var inputElement = inputElementArray[i];

                inputElement.checked = false;
            }
            return false;
        }

    </script> 
```

动态添加 listitem 时，给 listitem 添加 onclick 属性：

```
myListItem.Attributes.Add("onclick", "clearRadioButtonList"); 
```

不要忘记在 javascript 函数中替换“yourRadioButtonListID”。如果选中，这将取消选中单击的单选按钮。

谢谢。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:57:12.880

使用 jquery 更容易

```
<script type="text/javascript">
    $(document).ready(function () {
        $('#btnTest').click(function () {
            var radiolist = $('#RadioButtonList1').find('input:radio');
            radiolist.removeAttr('checked');
        });
    });

</script> 
```

# actionscript-3 - Flex 4：带条件的 XML 文字

> ID：13860722
> 
> 赞同：2
> 
> 时间：2012-12-13T13:21:54.773
> 
> 标签：actionscript-3, apache-flex, air, e4x

有没有办法在 Flex 中执行以下操作（伪代码）：

```
var x:XML = <xml>
  if(condition){
    <tag>hello</tag>
  }
</xml>; 
```

`<xml><tag>hello</tag></xml>`如果条件为真和`<xml></xml>`（或`<xml/>`）如果条件为假，哪个会返回？

附加说明：我知道如何附加孩子等。我正在寻找一种在文字表达式中执行此操作的方法。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-12-13T13:39:52.263

我真的很惊讶它的简单性以及 AS3 的强大功能。以下实际工作：

`var x:XML = <xml>{condition ? <tag>hello</tag> : ""}</xml>;`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:25:33.273

使用`appendChild`方法：

```
var sample:XML = <sample><items/></sample>;   
if( condition ) sample.items.appendChild(<tag>hello</tag>);
else sample.items.appendChild( </tag> ); 
```

# kannel - 如何使用 accesslog_parser.pl Kannel 访问日志解析器？

> ID：13860725
> 
> 赞同：0
> 
> 时间：2012-12-13T13:21:59.003
> 
> 标签：kannel

我在 utils 文件夹中找到了 kannel 访问日志解析器 accesslog_parser.pl。如何使用此文件进行解析。

我也想将 kannel_access.log 转换为 csv 格式。请帮我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-07T13:46:59.723

假设 Kannel 日志位于 /var/log/kannel/access.log

这应该做

```
cat /var/log/kannel/access.log |accesslog_parser.pl 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-03-01T00:29:04.827

可能是一个老问题，但我想分享这个用 java 编写的小工具，用于解析 kannel 日志文件并以 csv 格式输出结果：

```
import java.io.BufferedReader;
import java.io.FileReader;
import java.io.IOException;
import java.nio.file.Files;
import java.nio.file.Paths;
import java.util.StringTokenizer;

/**
 *
 * @author bashizip
 */
public class KannelLogsParser {

    static String fileName;

    /**
     * @param args the command line arguments
     */
    public static void main(String[] args) throws IOException {

        // fileName = args[0];
        fileName = "access_kannel.txt";
        String allLines = readLines(fileName);
        parseAndWriteToCsv(allLines);
    }

    static String readLines(String fileName) {

        BufferedReader br = null;
        String sCurrentLine = null;
        StringBuilder sb = new StringBuilder();
        try {
            br = new BufferedReader(
                    new FileReader(fileName));
            while ((sCurrentLine = br.readLine()) != null) {

                sb.append(sCurrentLine).append("\n");
            }
        } catch (IOException e) {
            e.printStackTrace();
        } finally {
            try {
                if (br != null) {
                    br.close();
                }
            } catch (IOException ex) {
                ex.printStackTrace();
            }
        }
        return sb.toString();
    }

    private static void parseAndWriteToCsv(String allLines) throws IOException {

        String[] lines = allLines.split("\n");
        System.out.println("lines to parse : " + lines.length);
        StringTokenizer st;
        StringBuilder output = new StringBuilder();

        output.append("DATE;Heure;sent;SMS; SMSC; SVC; ACT; BINF; FID; from; to; flags; msg;;udh"+"\n");
        int count = 0;
        for (String line : lines) {
            count++;
            System.out.println("Parsing ..." + 100 * count / lines.length + "%");
            st = new StringTokenizer(line, " ");

            while (st.hasMoreTokens()) {

                String currentToken = st.nextToken();
                boolean messageToken = false;
                boolean afterMessageToken = false;

                if (currentToken.startsWith("[")) {

                    System.out.println(currentToken);
                    messageToken = currentToken.startsWith("[msg");

                    try {
                        currentToken = currentToken.substring(currentToken.indexOf(":") + 1, currentToken.indexOf("]"));
                    } catch (Exception e) {
                        System.err.println(e.getMessage());
                        messageToken = true;
                        currentToken = currentToken.substring(currentToken.indexOf(":") + 1);

                    }
                }

                currentToken = currentToken.replace("[", "");
                currentToken = currentToken.replace("]", "");

                output.append(currentToken);

                if (!messageToken) {
                    output.append(";");

                } else if (afterMessageToken) {
                    afterMessageToken = false;
                    output.append(" ");
                } else {
                    output.append(" ");
                    afterMessageToken = true;

                }
            }
                output.append("\n");
            }
            Files.write(Paths.get(fileName + ".csv"), output.toString().getBytes());
            System.out.println("Output CVS file: " + fileName + ".csv");
            System.out.println("Finished !");
        }
    } 
```

希望有一天它可以帮助某人:-)

# iphone - 本地化日期不翻译日期

> ID：13860730
> 
> 赞同：1
> 
> 时间：2012-12-13T13:22:05.110
> 
> 标签：iphone, ios, localization

以下是我本地化日子的方式：

```
NSDateFormatter *dateFormatter = [[NSDateFormatter alloc] init];

NSString *dayFormat = [NSDateFormatter dateFormatFromTemplate:@"EEEE" options:0 locale:[NSLocale currentLocale]];

[dateFormatter setDateFormat:dayFormat];
[dateFormatter setLocale:[NSLocale currentLocale]];

NSString *day = [dateFormatter stringFromDate:date]; 
```

然而，它似乎返回的是一周中的英语天（周一、周二等），而不是设备语言（在模拟器中已设置为德语）。

知道我哪里出错了吗？

**在对设备进行一些研究后更新**，我意识到它实际上是区域设置，而不是更改日期语言的语言设置。奇怪，但我想它是有原因的。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:44:23.260

日期的语言是由*地区*而不是*语言*设置的。这必须是一个错误。如果我在德国，但会说英语，我肯定不想用德语约会吗？

无论如何，这就是为什么。您必须更改语言和地区。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:31:00.980

我有同样的问题。它不适用于模拟器，但可以在设备上使用。你能试试吗？但是我没有解决它，我什至没有深入研究它，因为它在设备上完美运行，这确实是您应用程序的主要目标。

* * *

编辑：

这来自[Apple的文档](https://developer.apple.com/library/ios/#documentation/Cocoa/Reference/Foundation/Classes/NSLocale_Class/Reference/Reference.html)：

> ## 当前语言环境
> 
> 返回当前用户的逻辑语言环境。
> 
> `+ (id)currentLocale`
> 
> 返回值
> 
> 当前用户的逻辑语言环境。区域设置由当前用户选择的系统区域设置与用户在“系统偏好设置”中指定的任何自定义设置叠加而成。
> 
> 讨论
> 
> 您从此语言环境中获得的设置不会随着用户首选项的更改而更改，以便您的操作保持一致。通常，您对返回的对象执行一些操作，然后将其处理掉。此外，由于返回的对象可能会被缓存，因此您无需无限期地持有它。与 autoupdatingCurrentLocale 对比。

也许您可以尝试使用：

> ## 首选语言
> 
> 以字符串数组的形式返回用户的语言偏好顺序。
> 
> `+ (NSArray *)preferredLanguages`
> 
> 返回值
> 
> 用户的语言偏好顺序为 NSString 对象数组，每个对象都是规范化的 IETF BCP 47 语言标识符。

# vbscript - 在 HTA 应用程序中使用 ADODB.stream 的 vbscript 和 jscript 之间的奇怪行为差异

> ID：13860731
> 
> 赞同：1
> 
> 时间：2012-12-13T13:22:06.930
> 
> 标签：vbscript, stream, ado, jscript, hta

VB脚本示例：

```
Function ADO_WriteToFile(FileURL,data)
Dim arrBytes
    SET ADObj = CreateObject("ADODB.Stream")
    ADObj.Open
    ADObj.Charset = "iso-8859-1" 
    ADObj.Type = adTypeText
    ADObj.WriteText data
    ADObj.SaveToFile FileURL, adSaveCreateOverwrite
    ADObj.Close
    ADObj.Open
    ADObj.Type = adTypeBinary
    ADObj.LoadFromFile FileURL
    ADObj.Position = 3
    arrBytes = ADObj.Read
    ADObj.Position = 0
    ADObj.SetEOS
    ADObj.Write data
    ADObj.SaveToFile FileURL, adSaveCreateOverwrite
    ADObj.Close
End Function 
```

JScript 示例：

```
function writeTo(fileName,str) {
var ado =  new ActiveXObject("ADODB.Stream");
ado.Type = 2;
ado.Open();
ado.Position = 0;
ado.WriteText(str,0);
ado.SaveToFile(fileName,2);
ado.Close();
ado.Open();
ado.Type = 1;

ado.Position = 2;//line 19
var temp = ado.Read();
ado.Position = 0;
ado.SetEOS;
ado.Write(temp);
ado.SaveToFile(fileName,2);
ado.Close();
} 
```

为什么 VBScript 示例除了不能接受带有空格的文件路径之外，还能完美运行？

JScript 示例出错并显示消息“对参数的分配不正确”。第 19 行。但是，如果我将 Position 设置为 0，则不会发生这种情况：

```
ado.Position = 0; 
```

我正在使用它将二进制文件写入磁盘顺便说一句

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-28T06:27:55.107

以下是一些区别：

*   在 VBScript 版本中，位置设置为 3；在 JScript 版本中，设置为 2
*   在 VBScript 版本中，定义了字符集；在 JScript 版本中，它是未定义的
*   在 VBScript 版本中，WriteText 和 write 都引用了参数；在 JScript 版本中，只有 WriteText 引用它

**参考**

*   [在 JScript 中使用 vs 提及并不是免费的](https://blogs.msdn.microsoft.com/ericlippert/2004/09/20/use-vs-mention-in-jscript-doesnt-come-for-free/)
*   [JScript 数据类型：数据类型摘要](https://msdn.microsoft.com/en-us/library/hhw1f6w5)

# qt - 使用 qmake 编译 C++ AMP 失败

> ID：13860735
> 
> 赞同：1
> 
> 时间：2012-12-13T13:22:20.690
> 
> 标签：qt, visual-c++, qmake, c++-amp

我有以下 main.cpp 文件：

```
#include <amp.h>
using namespace concurrency;
int main()
{
  int arr[] = {42};
  array_view<int, 1> v(1, arr);
  return 0;
} 
```

和一个 .pro 文件：

```
TEMPLATE = app
CONFIG += console
CONFIG -= app_bundle
CONFIG -= qt

QMAKE_CXXFLAGS += -EHsc
SOURCES += main.cpp 
```

如果我从 Visual Studio 2012 命令行编译 main.cpp（仅使用 cl /EHsc main.cpp），一切正常。但是如果我使用 qmake 和 nmake 总是会出现链接错误，即存在未解析的外部符号（来自 amp）。有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T11:47:24.210

我想通了，问题是什么：在 mkspec 文件 qmake.conf 中，编译器标志`Zc:wchar_t-`会导致编译器`wchar_t`错误地转换某些类型，因此无法解析生成的符号。

要解决此问题，请将上述 .pro 文件更改为

```
TEMPLATE = app
CONFIG += console
CONFIG -= app_bundle
CONFIG -= qt

QMAKE_CXXFLAGS += -EHsc -Zc:wchar_t
SOURCES += main.cpp 
```

（将 -Zc:wchar_t 添加到 QMAKE_CXXFLAGS）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T18:17:05.563

您忘记添加

```
LIBS += -lname_of_the_amp_lib 
```

抱歉，我不知道库的名称...

# .net - F# Odata 服务类型提供者通过 http 代理

> ID：13860737
> 
> 赞同：6
> 
> 时间：2012-12-13T13:22:24.930
> 
> 标签：.net, proxy, f#, type-providers

我想使用 odata 类型提供程序，但在编译时会导致下一个错误：`(407) proxy authentication required`。设计时没有错误。有人知道如何在类型提供程序中设置代理吗？示例代码：

```
open Microsoft.FSharp.Data.TypeProviders
type db = ODataService<"http://ebayodata.cloudapp.net/">
[<EntryPoint>]
     let main argv=
           let eBay = db.GetDataContext()
           0 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:42:54.363

这篇[博客文章](http://blogs.msdn.com/b/fsharpteam/archive/2012/09/21/the-f-3-0-freebase-type-provider-sample-integrating-internet-scale-data-sources-into-a-strongly-typed-language.aspx)提到了一些可能涵盖代理的示例代码。

> Freebase 类型提供程序可与 .NET 3.5、.NET 4.0、.NET 4.5、Silverlight 和便携式编程一起使用。在某些情况下可能需要代理。Tests\ProjectsUsingTypeProvider.sln 中的项目显示了这些不同情况的一些示例库。

您可能还希望专门查看[此文件](http://fsharp3sample.codeplex.com/SourceControl/changeset/view/18045#315092)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-05-14T06:36:45.170

尝试按如下方式指定默认 Web 代理：

```
open System.Net // for WebProxy etc.
open Microsoft.FSharp.Data.TypeProviders

// put here actual proxy address
let proxy = new WebProxy("http://192.168.1.1:3128") :> IWebProxy
// put here your credentials if needed
proxy.Credentials <- NetworkCredential("proxy_user", "password")
// set up a default proxy
WebRequest.DefaultWebProxy <- proxy

// here the default proxy will be used
type db = ODataService<"http://ebayodata.cloudapp.net/"> 
```

或者您可以尝试使用在 IE 中指定的代理，如下所示：

```
WebRequest.DefaultWebProxy <- WebRequest.GetSystemWebProxy()
WebRequest.DefaultWebProxy.Credentials <- CredentialCache.DefaultNetworkCredentials 
```

如果您在编译时出现错误，那么这可能是因为 F# 编译器 (Fsc.exe) 无法连接到代理服务器。您可以通过修改来解决此问题`Fsc.exe.config`，只需在该部分下添加以下文本`configuration`：

```
 <system.net>
    <defaultProxy useDefaultCredentials="true" />    
  </system.net> 
```

# python - 如何在python中使用libsvm进行分类

> ID：13860738
> 
> 赞同：1
> 
> 时间：2012-12-13T13:22:24.593
> 
> 标签：python, testing, libsvm

我是 svm 分类的新手，但我已经了解了 svm 分类背后的一些基本理论。

但我想知道 python 2.7 中用于定义、训练和测试每个特征向量包含 20 个元素的问题的代码。

谁能用一个简单的例子来解释我如何使用 libsvm？

# javascript - Fabric.js 对象大小

> ID：13860741
> 
> 赞同：0
> 
> 时间：2012-12-13T13:22:36.707
> 
> 标签：javascript, canvas, fabricjs

我对物体的大小有疑问。这是一个简单的例子：

```
<!doctype html>
<html>
<head>
    <script src="js/fabric-0.9.15.min.js"></script>
</head>
<body>
    <canvas id="test" width="512" height="512" style="border: 1px solid black;"></canvas>

    <div style="width: 512px; background: blue;">&nbsp;</div>

    <script>
      var canvas = new fabric.Canvas('test');

      var rect = new fabric.Rect({
        left: 0,
        top: 0,
        fill: 'red',
        width: 512,
        height: 512
      });

      canvas.add(rect);
    </script>
</body>
</html> 
```

如您所见，我有一个大小为 512px 的画布，我有一个宽度为 512px 的 div 用于测试。我还创建了 rect 对象来绘制大小为 512px 的对象。

看[截图](http://www.webpagescreenshot.info/img/535839-1213201231820PM)

织物用半尺寸绘制矩形。你能告诉我为什么或我做错了什么吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:28:30.770

矩形实际上是 512、512。您遇到的问题是对象的来源。

这是矩形的中间，因此只显示矩形的四分之一。

尝试将您的顶部和左侧更改为 256，您会看到差异。

# c - QTCreator 调用层次结构

> ID：13860750
> 
> 赞同：9
> 
> 时间：2012-12-13T13:22:53.283
> 
> 标签：c, qt-creator

有人知道如何在 QTCreator 中查看调用层次结构（在 C 中编码时，类似于 Eclipse 中的调用层次结构）？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-16T00:22:37.217

Creator 还没有这个功能。如果您想知道谁在使用您的功能，您可以使用“查找用法”。

贡献是 - 与所有开源项目一样 - 欢迎;-)

# asp.net-mvc-3 - ASP.Net MVC 文件上传 ViewModel 绑定

> ID：13860752
> 
> 赞同：2
> 
> 时间：2012-12-13T13:22:57.690
> 
> 标签：asp.net-mvc-3, file-upload, asp.net-mvc-viewmodel

所以我对 ASP.net MVC 还很陌生，并且一直在尝试制作文件上传器，但我似乎无法将上传的文件绑定到我的视图模型。我正在尝试通过我的视图模型对上传的文件应用验证，这应该是可行的。

我的代码：

看法：

```
<div id = "PDFForm">          
@using (Ajax.BeginForm("Upload", "Home", FormMethod.Post,
                        new AjaxOptions
                        {
                            InsertionMode = InsertionMode.Replace,
                            UpdateTargetId = "PDFForm",                          
                        },
                        new { id = "UploadForm", enctype = "multipart/form-data" }))
{
    <input type="file" name="Cover" id="Cover" />
    <input type="submit" value="Upload"/>
}
</div> 
```

视图模型：

```
public class UploadVM
{    
    [Required]        
    public HttpPostedFileBase Cover { get; set; }
} 
```

控制器动作：

```
public ActionResult Upload(UploadVM model)
{
    if(ModelState.IsValid() && model.Cover !=null)
    {
        //do things and return a response view
    }
    else
    {
        //return to form
    }
} 
```

我在谷歌上搜索了教程，他们似乎能够使用以下方法将上传的文件绑定到视图模型：

```
enctype = "multipart/form-data" 
```

我似乎无法让它发挥作用，所以我想你们也许可以帮助我或将我推向正确的方向。

提前致谢！

编辑：我也尝试过 HTML.BeginForm() 但这似乎也不起作用

# dynamics-ax-2009 - 使用 X++ 在 CSV 文件中执行 Excel“文本到列”操作

> ID：13860755
> 
> 赞同：1
> 
> 时间：2012-12-13T13:23:04.597
> 
> 标签：dynamics-ax-2009, x++, axapta

在 Excel 中，您可以打开一个 CSV 文件并单击“文本到列”（在“数据”选项卡下）以生成一个以列分隔的文件。

有没有办法使用 X++ 来模拟这个？一个可以打开 CSV 文件并应用完全相同的 Excel“文本到列”操作的类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:01:54.227

您可以使用[CommaIo类的](http://msdn.microsoft.com/en-us/library/aa894098%28v=ax.50%29.aspx)[InFieldDelimiter](http://msdn.microsoft.com/en-US/library/aa849629%28v=ax.50%29.aspx)方法来使用正确的分隔符。

或者使用[str2con](http://msdn.microsoft.com/en-us/library/aa638592%28v=ax.50%29.aspx)拆分字符串。

您甚至可以使用[ExcelIo](http://www.axaptapedia.com/index.php?title=ExcelIo)读取 Excel 文件。

**更新：** 由于您的文件不是 CSV 使用`str2con`：

```
for (con = commaIo.read(); commaIo.status() == IO_Status::Ok; con = commaIo.read())
{
    lineNum++;
    if (lineNum > 1 && conlen(con))
        con = str2con(conPeek(con,1));
    info(str2con(con));
} 
```

这可能不会删除引号和尾随空格，请对有趣的字符串字段执行此操作：

```
purchId = strRtrim(strRem(conPeek(con,3),'"')); 
```

# android - 从安静编码 NumberPicker 到 NumberPickerButton 的类路径不正确

> ID：13860756
> 
> 赞同：0
> 
> 时间：2012-12-13T13:23:06.177
> 
> 标签：android, dialog

我正在为 >= API 8 开发一个 Android 应用程序。

出于兼容性原因，该应用程序使用 Actionbar Sherlock。在 API 11 之前，NumberPicker 是一个内部小部件，但我需要 NumberPicker，所以我不得不想出另一个解决方案。

经过一番谷歌搜索，我偶然发现了Mike Novak 的[NumberPicker](https://github.com/mrn/numberpicker)。我实现了它，但不幸的是，当我单击应该使用数字选择器弹出对话框的首选项时，应用程序崩溃了。

对布局文件的引用似乎有问题（使用了 logcat ）文件，但是您可以[在此处](https://github.com/mrn/numberpicker/blob/master/lib/src/com/michaelnovakjr/numberpicker/NumberPickerPreference.java#L29)`com.example.widget.NumberPicker`看到源引用。`com.michaelnovakjr.numberpicker.R.layout.pref_number_picker`

**LogCat 输出：**

```
12-13 13:59:27.516: W/dalvikvm(11642): threadid=1: thread exiting with uncaught exception (group=0x40dbe930)
12-13 13:59:27.555: E/AndroidRuntime(11642): FATAL EXCEPTION: main
12-13 13:59:27.555: E/AndroidRuntime(11642): android.view.InflateException: Binary XML file line #24: Error inflating class com.michaelnovakjr.numberpicker.NumberPicker
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.view.LayoutInflater.createView(LayoutInflater.java:613)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.preference.DialogPreference.onCreateDialogView(DialogPreference.java:343)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.preference.DialogPreference.showDialog(DialogPreference.java:287)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.preference.DialogPreference.onClick(DialogPreference.java:266)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.preference.Preference.performClick(Preference.java:949)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.preference.PreferenceScreen.onItemClick(PreferenceScreen.java:215)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.widget.AdapterView.performItemClick(AdapterView.java:298)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.widget.AbsListView.performItemClick(AbsListView.java:1100)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.widget.AbsListView$PerformClick.run(AbsListView.java:2749)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.widget.AbsListView$1.run(AbsListView.java:3423)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.os.Handler.handleCallback(Handler.java:725)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.os.Handler.dispatchMessage(Handler.java:92)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.os.Looper.loop(Looper.java:137)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.app.ActivityThread.main(ActivityThread.java:5039)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at java.lang.reflect.Method.invokeNative(Native Method)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at java.lang.reflect.Method.invoke(Method.java:511)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at dalvik.system.NativeStart.main(Native Method)
12-13 13:59:27.555: E/AndroidRuntime(11642): Caused by: java.lang.reflect.InvocationTargetException
12-13 13:59:27.555: E/AndroidRuntime(11642):    at java.lang.reflect.Constructor.constructNative(Native Method)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at java.lang.reflect.Constructor.newInstance(Constructor.java:417)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.view.LayoutInflater.createView(LayoutInflater.java:587)
12-13 13:59:27.555: E/AndroidRuntime(11642):    ... 23 more
12-13 13:59:27.555: E/AndroidRuntime(11642): Caused by: android.view.InflateException: Binary XML file line #22: Error inflating class com.example.widget.NumberPickerButton
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:698)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.view.LayoutInflater.rInflate(LayoutInflater.java:746)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.view.LayoutInflater.inflate(LayoutInflater.java:459)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at com.michaelnovakjr.numberpicker.NumberPicker.<init>(NumberPicker.java:125)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at com.michaelnovakjr.numberpicker.NumberPicker.<init>(NumberPicker.java:117)
12-13 13:59:27.555: E/AndroidRuntime(11642):    ... 26 more
12-13 13:59:27.555: E/AndroidRuntime(11642): Caused by: java.lang.ClassNotFoundException: Didn't find class "com.example.widget.NumberPickerButton" on path: /data/app/nl.livecarb.android-1.apk
12-13 13:59:27.555: E/AndroidRuntime(11642):    at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:65)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at java.lang.ClassLoader.loadClass(ClassLoader.java:501)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at java.lang.ClassLoader.loadClass(ClassLoader.java:461)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.view.LayoutInflater.createView(LayoutInflater.java:552)
12-13 13:59:27.555: E/AndroidRuntime(11642):    at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
12-13 13:59:27.555: E/AndroidRuntime(11642):    ... 31 more 
```

**res/xml/main_preferences.xml**

```
 <?xml version="1.0" encoding="utf-8"?>
<PreferenceScreen xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:picker="http://schemas.android.com/apk/res/nl.livecarb.android" >

    <PreferenceCategory android:title="@string/pref_cat_title_medical" >
        <com.michaelnovakjr.numberpicker.NumberPickerPreference
            android:key="@string/pref_key_ratio"
            android:summary="Bla"
            android:title="@string/pref_title_ratio"
            picker:defaultValue="1"
            picker:endRange="31"
            picker:startRange="1" />
    </PreferenceCategory>
    <PreferenceCategory android:title="@string/pref_cat_title_other" >
        <Preference
            android:key="@string/pref_key_disclaimer"
            android:title="@string/pref_title_disclaimer" />
    </PreferenceCategory>

</PreferenceScreen> 
```

**SettingsActivity.java**

```
public class SettingsActivity extends PreferenceActivity implements OnPreferenceClickListener {

    @SuppressWarnings("deprecation")
    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        if(android.os.Build.VERSION.SDK_INT >= 11) {
            getFragmentManager().beginTransaction().replace(android.R.id.content, new SettingsFragment(), "settings").commit();
        } else {
            addPreferencesFromResource(R.xml.main); 
        }
    }

    class SettingsFragment extends PreferenceFragment {

        private Preference preferences = null;

        @Override
        public void onCreate(Bundle savedInstanceState) {
            super.onCreate(savedInstanceState);

            addPreferencesFromResource(R.xml.main);

            preferences = findPreference(getResources().getString(R.string.pref_key_disclaimer));
            preferences.setOnPreferenceClickListener(SettingsActivity.this);
        }
    }
} 
```

该错误 `Caused by: java.lang.ClassNotFoundException: Didn't find class "com.example.widget.NumberPickerButton" on path: /data/app/nl.livecarb.android-1.apk`对我没有任何意义，因为我从未使用过`com.example.widget.NumberPickerButton`. NumberPicker 库都没有。

我为解决这个问题所做的事情：

1.  [如何在首选项中使用 QuietlyCoding 中的 NumberPicker？](https://stackoverflow.com/questions/12734221/how-to-use-numberpicker-from-quietlycoding-in-preferences)
2.  仔细检查库项目引用是否正确
3.  清理项目（包括所有库）

有什么想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:47:03.637

你在项目的主分支上工作吗？尝试搜索您的代码以获取对该示例包的引用。我只是在图书馆看了一下，我没有看到任何参考。

# powershell - 需要帮助找出 Powershell 抛出错误 16 的原因

> ID：13860763
> 
> 赞同：1
> 
> 时间：2012-12-13T13:23:14.587
> 
> 标签：powershell, syntax-error

[前几天](https://stackoverflow.com/questions/13402898/how-can-i-use-powershell-to-save-as-a-different-file-extension)我发布了这个脚本，试图找到一种在“另存为”时更改文件扩展名的好方法。我已经解决了这个问题，但是从今天早上开始，脚本将无法正常运行。这是我收到的错误消息：

```
Processing : C:\users\xxx\Desktop\ht\Automatic_Post-Call_Survey.htm
Exception calling "SaveAs" with "16" argument(s): "This is not a valid file name.
Try one or more of the following:
* Check the path to make sure it was typed correctly.
* Select a file from the list of files and folders."
At C:\users\xxx\Desktop\hd.ps1:11 char:20
+     $opendoc.saveas <<<< ([ref]"$docpath\$doc.FullName.doc", [ref]$saveFormat);
    + CategoryInfo          : NotSpecified: (:) [], MethodInvocationException
    + FullyQualifiedErrorId : DotNetMethodException 
```

如果“16”是错误代码，则表示无法删除目录......但它看起来好像我根本没有要求 - 除非某处有一些默认参数。我很困惑。有人有其他想法可以尝试吗？

```
$docpath = "c:\users\xxx\desktop\do"
$htmPath = "c:\users\xxx\desktop\ht"

$srcfiles = Get-ChildItem $htmPath -filter "*.htm*"
$saveFormat = [Enum]::Parse([Microsoft.Office.Interop.Word.WdSaveFormat], "wdFormatDocument"); 
$word = new-object -comobject word.application 
$word.Visible = $False        
$filename = ($_.fullname).substring(0,($_.FullName).lastindexOf("."))

function saveas-document   {         
        $opendoc = $word.documents.open($doc.FullName);         
    $opendoc.saveas([ref]"$docpath\$filename", [ref]$saveFormat);         
    $opendoc.close();
}       
ForEach ($doc in $srcfiles)     {
    Write-Host "Processing :" $doc.FullName         
    saveas-document        
    $doc = $null   
}   

$word.quit(); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:42:18.907

这应该做你需要的，但不是最好的设计:)

```
$docpath = "c:\users\xxx\desktop\do"
$htmPath = "c:\users\xxx\desktop\ht"

$srcfiles = Get-ChildItem $htmPath -filter "*.htm*"

$saveFormat = [Enum]::Parse([Microsoft.Office.Interop.Word.WdSaveFormat], "wdFormatDocument"); 

$global:word = new-object -comobject word.application 

$word.Visible = $False        

#$filename = ($_.fullname).substring(0,($_.FullName).lastindexOf("."))

function saveas-document ($docs)  {         
    $opendoc = $word.documents.open($docs);    
    $savepath = $docs -replace [regex]::escape($htmPath),"$docpath"
    $savepath = $savepath -replace '\.html*', '.doc'
    $opendoc.saveas([ref]"$savepath", [ref]$saveFormat);         
    $opendoc.close();
}       
ForEach ($doc in $srcfiles)     {
    Write-Host "Processing :" $doc.FullName         
    saveas-document  -doc  $doc.FullName     
    $doc = $null   
}   

$word.quit(); 
```

# magento - 动态创建可下载信息

> ID：13860764
> 
> 赞同：0
> 
> 时间：2012-12-13T13:23:22.017
> 
> 标签：magento, magento-1.7

如何动态创建可下载信息（小、中、大）（在上传图像并保存时），在保存产品之前，使用图像详细信息

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T11:25:46.013

```
$items = Mage::getModel('cart/mycart')->getCollection()->addFieldToFilter('customer_id', Mage::getSingleton('customer/session')->getCustomer()->getId()); foreach($items as $item) : $incrementId = Mage::getModel('sales/order')->load($item->getOrderId())->getIncrementId();//->addFieldToFilter('product_id',$item->getItemId());

$linkPurchased = Mage::getModel('downloadable/link_purchased')->load($incrementId, 'order_increment_id'); $downloadableItems = Mage::getResourceModel('downloadable/link_purchased_item_collection') ->addFieldToFilter('purchased_id', $linkPurchased->getPurchasedId()); //->addFieldToFilter('product_id', $item->getItemId()); $links = array(); foreach ($downloadableItems as $li): $links[] = Mage::getModel('core/url')->getUrl('downloadable/download/link', array('id' => $li->getLinkHash(), '_secure' => true)); endforeach; foreach($links as $link): ?> " target="_blank"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T05:32:13.683

您可以使用 Magento API 动态创建可下载的产品信息。

# winapi - 在超类编辑控件中切换时发出叮当声 - winapi - windows7

> ID：13860767
> 
> 赞同：0
> 
> 时间：2012-12-13T13:23:32.703
> 
> 标签：winapi

之前有人问过，但我发现要么是 mfc，要么不是超类控件，或者我的关键字选择不好（我的词汇量有限）

我在 Devc++ 中使用纯 win32 和 c++ 进行开发。我有一些编辑控件超类，其中控制 Tab 键按下和 Return 键按下，但是每当我按下 Tab 时，都会有这种 Ding 声音非常烦人，不确定它是否存在，因为我做错了什么或什么。无论如何，我该如何删除它？

这是我第一次尝试超类化，所以如果您对代码有任何其他建议，请告诉我

代码：

```
 LRESULT APIENTRY EditSuperClassWndProc ( HWND hwnd, UINT message, WPARAM wParam, LPARAM lParam )
    {

        switch (message)
        {           
               case WM_KEYDOWN:

                      if ( isMyScreen )
                      {
                          if ( (int)wParam == VK_RETURN )
                          {
                              DWORD wparam = MAKELONG( 0, BN_CLICKED );
                              SendMessage( GetParent( hwnd ), WM_COMMAND, (WPARAM)wparam, (LPARAM)hButton );
                          }
                          else if ( (int)wParam == VK_TAB )
                          {
                               HWND nextInLine;

                               if( hwnd == hEditP )
                                   nextInLine = hEditL;
                               else if ( hwnd == hEditL )
                                   nextInLine = hEditP;

                               SendMessage( nextInLine, EM_SETSEL, (WPARAM)0, (LPARAM)-1 );
                               SetFocus( nextInLine );
                          }
                          else
                          {
                              return CallWindowProc( oldWndProc, hwnd, message, wParam, lParam );
                          }
                      }

                      return CallWindowProc( oldWndProc, hwnd, message, wParam, lParam );
                      break;

               default:

                     return CallWindowProc( oldWndProc, hwnd, message, wParam, lParam );
        }
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:55:13.050

尝试将以下代码添加到您的 switch 块中：

```
case WM_CHAR:
    if (wParam == VK_TAB)
    {
        return 0;
    }
    else
    {
        return CallWindowProc(oldWndProc, hwnd, message, wParam, lParam );
    }
    break; 
```

# php - 检测表单是否已发送

> ID：13860775
> 
> 赞同：0
> 
> 时间：2012-12-13T13:23:47.590
> 
> 标签：php, zend-framework, submit

在我的控制器中，我需要一些指令才能在发送表单后启动。

这是我的控制器：

```
public function indexAction() 
  {    

       $form   = array();
       $submit = $this->getRequest()->getParam('submit');

        if (!empty($submit))         
        {         

            $lastname = $this->getRequest()->getParam('last-name');
            $name     = $this->getRequest()->getParam('name');
            $email    = $this->getRequest()->getParam('email');

            $form     = array(

                'lastname' => $lastname,
                'name'     => $name,
                'email'    => $email);          

            $confirm      = Tools::checkInscription($form);

            var_dump($confirm);
            exit();

           if ($confirm === true)
           {        
                  Tools::saveUser($form);   
           }
           else 
           {
                  // Mets une variable a true pour savoir dans ta vu que tu as une erreur.  
                  $this->_redirect('/inscription');
           }

        }

  } 
```

问题是 $submit 似乎总是返回 null。

我的观点：

```
 <form id="formulaire">
            <div class="msg">
                <p class="error">Merci de vérifier les champs en rouge</p>
            </div>
            <div class="last-name">
                <input type="text" class="error" id="last-name" name="last-name" placeholder="Votre nom" />
            </div>
            <div class="name">
                <input type="text" id="name" name="name" placeholder="Votre prénom"/>
            </div>
            <div class="email">
                <input type="text" id="email" name="email" placeholder="Votre email"/>
            </div>
            <button type="submit" title="Valider"></button>
        </form> 
```

任何人都可以帮助找出我做错了什么提前谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:28:08.960

如果您将表单方法设置为 POST，则可以使用以下方法进行检查：

```
if ($this->getRequest()->isPost()) {

} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:26:20.300

尝试

```
<input type="submit" title="Valider"> 
```

代替

```
<button type="submit" title="Valider"></button> 
```

并改变

```
<form id="formulaire" action="" method="post"> 
```

代替

```
<form id="formulaire"> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T13:27:54.787

您的提交按钮应该是一个输入：

```
<input type="submit" title="Valider" /> 
```

你的表格应该有一个动作：

```
<form id="formulaire" method="POST" action="some_page.php"> 
```

# android - 动画 ImageView 宽度而不缩放

> ID：13860780
> 
> 赞同：6
> 
> 时间：2012-12-13T13:24:13.463
> 
> 标签：android, android-layout

我正在尝试为 ImageView 设置动画，使其从左到右缓慢显示。当[我在无法解释我想要什么之前问这个](https://stackoverflow.com/questions/13012284/animation-to-show-imageview-from-left-to-right)问题时，所以这次我使用 HTML / JS 创建了所需的效果：

[http://jsfiddle.net/E2uDE/](http://jsfiddle.net/E2uDE/)

在 Android 中获得这种效果的最佳方法是什么？

我尝试更改 scaleType，然后将 ScaleAnimation 直接应用于该 ImageView：

**布局：**

```
<ImageView
    android:id="@+id/graphImage"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:scaleType="centerCrop"
    android:background="@android:color/transparent"
    android:contentDescription="@string/stroom_grafiek"
    /> 
```

**爪哇：**

```
scale = new ScaleAnimation((float)0,
        (float)1, (float)1, (float)1,
        Animation.RELATIVE_TO_SELF, (float)0,
        Animation.RELATIVE_TO_SELF, (float)1);
scale.setDuration(1000);

graphImage.startAnimation(scale); 
```

但这仍然会缩放图像。

我还尝试将 ImageView 包装在 FrameLayout 中，希望我可以为 FrameLayout 设置动画：

```
<FrameLayout
    android:layout_width="70dp"
    android:layout_height="fill_parent"
    android:clipChildren="true"">
    <ImageView
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_gravity="bottom|left|clip_horizontal" />
</FrameLayout> 
```

这仍然会尝试缩放我的 ImageView 以适应 FrameLayout。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-12-17T15:29:50.337

有几种方法可以做到这一点 - 一种方法是简单地更改画布上的剪辑（即允许绘制视图的区域）来`ImageView`绘制图像。缓慢增加绘图边界的右侧边缘将产生与示例链接相同的效果。

我编写了一些[示例代码](https://github.com/antonyt/CoveredImageView)来说明这种技术。如果您下载/构建/运行项目，单击图像将运行显示动画。

看一下[CoveredImageView](https://github.com/antonyt/CoveredImageView/blob/master/src/com/antonyt/coveredimageview/CoveredImageView.java)`onDraw`类的方法，基本结构如下：

```
@Override
protected void onDraw(Canvas canvas) {
    ...
    canvas.getClipBounds(mRect);
    mRect.right = ...;
    canvas.clipRect(mRect);
    ...
    super.onDraw(canvas);
    ...
    invalidate();
} 
```

调整剪辑，然后调用 invalidate()，导致再次调用 onDraw()。

我还编写了一些代码来根据经过的时间插入正确的剪辑值，这不依赖于任何特定的 Android 版本。然而，需要注意的是，从 Android 3.0 开始，有一个新的动画框架和一个[ValueAnimator](http://developer.android.com/reference/android/animation/ValueAnimator.html)类可以帮助执行这些任务。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-17T15:20:21.220

您可以将您的图像视图与另一个重叠，例如一个带有纯白色可绘制对象的图像视图。然后，您可以为重叠的图像视图设置动画，而不用担心缩放，直到它的宽度为 0 并将其移除。为此，您必须将您的 imageView 放置在 RelativeLayout ofc 中。

# qt - 进度条周围有不同文本颜色的进度条？

> ID：13860782
> 
> 赞同：2
> 
> 时间：2012-12-13T13:24:13.940
> 
> 标签：qt, text, colors, qt5, qprogressbar

如何从 Qt 中为 QProgressBar 中的文本获得以下效果？：

![进度条前面有不同颜色的进度条文本](../Images/d2019d606f83d6f11db0e6da4e49318c.png)

我的想法是我必须在进度条的左侧有一个更亮的颜色。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-14T14:31:28.640

我会按如下方式进行自定义绘图：

1.  从 QLabel 派生您自己的进度条类。

2.  覆盖paintEvent() 函数。

3.  在 paintEvent() 中，使用 QPainter 开始绘制：

    *   绘制辅助背景矩形
    *   使用 drawText() 以辅助颜色绘制文本
    *   绘制第一个背景矩形（过度绘制文本的第一部分）
    *   在匹配第一个背景矩形的矩形内以第一种颜色绘制文本：http: [//qt-project.org/doc/qt-4.8/qpainter.html#drawText-11](http://qt-project.org/doc/qt-4.8/qpainter.html#drawText-11)

你最终应该得到你想要达到的目标。由于 Qt 的默认双缓冲，您应该不会观察到闪烁。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2021-09-27T17:33:43.940

借助[这个](https://stackoverflow.com/questions/17987469/how-to-change-the-color-of-the-text-of-a-qprogressbar-with-its-value/18176651#18176651)，

`QModernProgressBar.h`

```
#include <QWidget>
#include <QProgressBar>
#include <QPaintEvent>
#include <QStylePainter>
#include <QStyleOption>
#include <QDebug>

class QModernProgressBar : public QProgressBar 
{
    Q_OBJECT
   public:
    explicit QModernProgressBar(QWidget *parent = nullptr);
    ~QModernProgressBar() Q_DECL_OVERRIDE;

   protected:
    void paintEvent(QPaintEvent *) Q_DECL_OVERRIDE;

public:
    virtual QString text() const Q_DECL_OVERRIDE;
}; 
```

`QModernProgressBar.cpp`

```
#include "QModernProgressBar.h"

QModernProgressBar::QModernProgressBar(QWidget *parent) : QProgressBar(parent) {}

QModernProgressBar::~QModernProgressBar() {}

/* https://www.qtcentre.org/threads/70885-QProgressBar-with-in-decimal */

QString QModernProgressBar::text() const
{
    QString result = format();
    if(minimum() ==0 && maximum()==0)
    {
        if(result=="%p%")
        {
            return QString("");
        }
        else
        {
            return result;
        }
    }
    else if ( minimum() == maximum() ) 
    {
        return QString("");
    }

    if(result.isEmpty())
    {
        return QString("%p%");
    }
    else
    {
        return result;
    }
}

void QModernProgressBar::paintEvent(QPaintEvent *ev)
{
    Q_UNUSED(ev)
    QStylePainter paint(this);
    QStyleOptionProgressBar opt;
    initStyleOption(&opt);

    paint.drawControl(QStyle::CE_ProgressBarGroove, opt);
    paint.drawControl(QStyle::CE_ProgressBarContents, opt);

    const QStyleOptionProgressBar *option = &opt;
    QStylePainter *painter = &paint;

    // Stolen from QFusionStyle::drawControl
    if (const QStyleOptionProgressBar *pbar = qstyleoption_cast<const QStyleOptionProgressBar *>(option))
    {
        QRect leftRect;
        QRect rect = pbar->rect;
        QColor textColor            = option->palette.text().color();
        QColor alternateTextColor   = option->palette.window().color();

        painter->save();
        bool vertical = false, inverted = false;
        vertical = (pbar->orientation == Qt::Vertical);
        inverted = pbar->invertedAppearance;
        if (vertical)
            rect = QRect(rect.left(), rect.top(), rect.height(), rect.width());
        const auto totalSteps = qMax(Q_INT64_C(1), qint64(pbar->maximum) - pbar->minimum);
        const auto progressSteps = qint64(pbar->progress) - pbar->minimum;
        const int progressIndicatorPos = static_cast<int>(progressSteps * rect.width() / totalSteps);
        if (progressIndicatorPos >= 0 && progressIndicatorPos <= rect.width())
            leftRect = QRect(rect.left(), rect.top(), progressIndicatorPos, rect.height());
        if (vertical)
            leftRect.translate(rect.width() - progressIndicatorPos, 0);

        bool flip = (!vertical && (((pbar->direction == Qt::RightToLeft) && !inverted) ||
                    ((pbar->direction == Qt::LeftToRight) && inverted)));

        QString formattedText = pbar->text;
        formattedText.replace(QLatin1String("%m"), QString("%1").arg(totalSteps));
        const auto progress = static_cast<int>((qint64(value()) - pbar->minimum) * 100.0 / totalSteps);
        formattedText.replace(QLatin1String("%p"), QString("%1").arg(progress));
        QRegion rightRect = rect;
        rightRect = rightRect.subtracted(leftRect);
        painter->setClipRegion(rightRect);
        painter->setPen(flip ? alternateTextColor : textColor);
        painter->drawText(rect, formattedText, QTextOption(Qt::AlignAbsolute |
                                                           Qt::AlignHCenter  |
                                                           Qt::AlignVCenter));
        if (!leftRect.isNull())
        {

            painter->setPen(flip ? textColor : alternateTextColor);
            painter->setClipRect(leftRect);
            painter->drawText(rect, formattedText, QTextOption(Qt::AlignAbsolute |
                                                               Qt::AlignHCenter  |
                                                               Qt::AlignVCenter));
        }
        painter->restore();
    }
} 
```

`main.cpp`

```
#include <QApplication>
#include <QTimer>
#include <QTextStream>
#include <QTimer>
#include <QDebug>
#include <QVBoxLayout>
#include "QModernProgressBar.h"

int main(int argc, char* argv[])
{
    QCoreApplication::setAttribute(Qt::AA_EnableHighDpiScaling);
    QCoreApplication::setApplicationName("QModernProgressbar Demo");
    QApplication app(argc, argv);
    app.setStyleSheet(QLatin1String("                                   \
        QProgressBar {                                                  \
            font-family                 : Fira Code;                    \
            font-size                   : 12pt;                         \
            font-style                  : normal;                       \
            font-weight                 : bold;                         \
            color           : rgba(8, 218, 157, 100%);                  \
            border          : 1px solid rgba(8, 218, 157, 100%);        \
            border-radius       : 0px;                                  \
            text-align          : center;                               \
        }                                                               \
                                                                        \
        QProgressBar::chunk {                                           \
            background-color    : rgba(8, 218, 157, 100%);              \
            width               : 1px;                                  \
            text-align          : center;                               \
        }"));                                                           \

    QTimer timer;
    QWidget mainWindow;
    InvertProgressBar w1, w2, w3;

    w1.setTextVisible(true);
    w2.setTextVisible(true);
    w3.setTextVisible(true);
    int i=25;
    int j=0;

    w1.setRange(0,25);
    w2.setRange(0,100);
    w3.setRange(0,0);

    w1.setFormat(QString("Searching... Timing out in %1 seconds.").arg(i));
    w2.setFormat(QString("Flashing the controller ..."));
    w3.setFormat(QString("Rebooting the controller ..."));
    QVBoxLayout *finalLayout = new QVBoxLayout;

    QObject::connect(&timer, &QTimer::timeout, [&]() {
                                                        w1.setFormat(QString("Searching... Timing out in %1 seconds...").arg(i));
                                                        w1.setValue(i);
                                                        if(--i==-1)
                                                        {
                                                            i=25;
                                                        }
                                                        w2.setFormat(QString("Flashing the controller ...%p%"));
                                                        w2.setValue(j);
                                                        if(j++==101)
                                                        {
                                                            j=0;
                                                        }
                                                      }
                                                      );
    timer.start(500);
    finalLayout->addWidget(&w1);
    finalLayout->addWidget(&w2);
    finalLayout->addWidget(&w3);
    mainWindow.setFixedSize(500,150);
    mainWindow.setLayout(finalLayout);
    mainWindow.show();
    return app.exec();
} 
```

[![演示截图](../Images/6a14906eed9128e6e75580597271b407.png)](https://i.stack.imgur.com/4wJe7.jpg)

***请注意，当忙指示灯亮时，双音文本无效。***

# javascript - on option item被选中

> ID：13860784
> 
> 赞同：1
> 
> 时间：2012-12-13T13:24:20.780
> 
> 标签：javascript, jquery

编辑：我忘记了链接上的 http://。这不是我的问题。我会解决这个问题...

我有一些选择，比如：

```
<select class="mySelect">
    <option value="http://www.url1.com">Url 1</option> <!--Default displayed--->
    <option value="http://www.url2.com">Url 2</option>
    <option value="http://www.url3.com">Url 3</option>
</select> 
```

为此，我有一个 jquery 侦听器，如下所示：

```
$('.mySelect').change(function(){
    window.location.replace($(this).val());
}); 
```

由于这只是响应所做的更改，因此无法将我重定向到“www.url1.com”。我应该用什么？我只在谷歌上得到改变的建议。

编辑2：我有很多关于使用假人作为首选的解决方案。我还得到了另一个解决方案，即使用按钮读取所选选项然后重定向，但这在我正在处理的项目中不可用，即使这些都是非常好的解决方案。

在这种情况下，我希望它监听使用情况，即使对自身进行了更改，就像我选择第一个选项（默认选择）一样，我希望它对它做一些事情 - 在上面的情况下重定向. 如果有人对这个问题有很好的解决方案，我会把它打开。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-12-13T13:27:02.003

尝试输入一个空值的第一个选项：

```
<select class="mySelect">
    <option value="">Please select...</option>
    <option value="http://www.url1.com">Url 1</option>
    <option value="http://www.url2.com">Url 2</option>
    <option value="http://www.url3.com">Url 3</option>
</select> 
```

然后，您可以修改您的 jQuery 以确保在重定向之前有一个值：

```
$('.mySelect').change(function(){
    var value = $(this).val();
    if (value != "") {
       window.location.replace(value);
    }
}); 
```

[**示例小提琴**](http://jsfiddle.net/XjXWS/)

另请注意，`http://`链接值需要（或您使用的任何协议）。

* * *

**更新**

如果您不想使用 dummy 选项，则需要更改逻辑以处理按钮单击：

```
<select class="mySelect">
    <option value="http://www.url1.com">Url 1</option>
    <option value="http://www.url2.com">Url 2</option>
    <option value="http://www.url3.com">Url 3</option>
</select>
<button id="redirect">Go</button> 
```

```
$("#redirect").click(function() {
    window.location.replace($(".mySelect").val());
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:27:15.060

`http://`你也必须放

```
window.location.replace("http://"+$(this).val()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T13:50:15.613

一个选项可以是您更改第一个选项，例如

```
 <select class="mySelect">
    <option value="select">Select URL</option> <!--Default displayed--->
    <option value="www.url1.com">Url 1</option> 
    <option value="www.url2.com">Url 2</option>
    <option value="www.url3.com">Url 3</option>
    </select> 
```

或者您可以将 click jquery 事件用于组合框。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-12-13T13:35:49.863

```
<form>
<select class="mySelect">
    <option value="" selected="selected">Please Select</option>
    <option value="www.url1.com">Url 1</option> 
    <option value="www.url2.com">Url 2</option>
    <option value="www.url3.com">Url 3</option>
</select>
</form>​

$(".mySelect").change( function() {
var n = $(this).val();
if(n != "") {
window.location.assign("http://"+n);
}
});​ 
```

# visual-studio - 在 qmake 生成的 .vcxproj 中导入 .props 文件

> ID：13860785
> 
> 赞同：4
> 
> 时间：2012-12-13T13:24:25.490
> 
> 标签：visual-studio, qt, qmake, vsprops

用一个命令

```
qmake -tp vc -r 
```

我正在从相应的 Qt文件和一堆文件生成 Visual Studio`.sln`文件和一堆文件。`.vcxproj``.pro``.pri`

我希望那些生成`.vcxproj`的文件导入我自己的`.props`文件。我可以提供`qmake`或嵌入这些`.pro`/`.pri`文件的路径。

是否可以？如果是，那怎么办？

因为根据我的研究，这似乎只能通过添加一个自定义扩展（我必须先写......）来完成`mkspecs`......

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-09-17T07:22:07.470

从 qmake 源码来看，是不可能的。我已经查看`qmake\generators\win32\msbuild_objectmodel.cpp`了 Qt4.8.5 和[最新的 Qt5 版本](http://qt.gitorious.org/qt/qtbase/source/117880499754b14bbada9646b85feef066d7b959:qmake/generators/win32/msbuild_objectmodel.cpp#L445)，qmake 添加的唯一属性表是`Microsoft.Cpp.*.props`（各种）：

```
xml << tag("Import")
    << attrTag("Project", "$(UserRootDir)\\Microsoft.Cpp.$(Platform).user.props")
    << attrTag("Condition", "exists('$(UserRootDir)\\Microsoft.Cpp.$(Platform).user.props')")
   << closetag()
   << closetag(); 
```

我通过创建一个快速 Python 脚本解决了这个问题，该脚本对生成的 *.vcxproj 文件进行后处理：

```
for l in fileinput.FileInput('Project.vcxproj', inplace=1):
    print l,
    if 'PropertySheets' in l:
        print '    <Import Project="YourPropertySheets.props" />' 
```

当然，最好用新功能修补 qmake，但由于只有包括你和我在内的三个人对此感到困扰，所以我认为 hack 是最佳解决方案。

# com - COM 对象与自动化对象

> ID：13860792
> 
> 赞同：1
> 
> 时间：2012-12-13T13:24:46.907
> 
> 标签：com, automation, activex

我在 Delphi XE2 中创建一个 COM 对象。我正在尝试使用 safecall 创建方法，但默认值是 stdcall。

当我使用自动化对象时，可以使用 safecall。

对于性能问题，我使用的是 COM 对象。可以在上面使用safecall吗？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T13:57:44.747

是的，您可以使用`safecall`约定。`safecall`和之间的唯一区别`stdcall`是`safecall`适用于异常驱动的流程。也就是说，如果您的 Delphi 函数是`safecall`，它可以引发异常，该异常将在内部被捕获并转换为正确的 HRESULT。

顺便说一句，COM 对象与自动化对象没有性能优势：尽管自动化对象通过接口支持较慢的“[后期绑定](http://en.wikipedia.org/wiki/Late_binding#Late_binding_in_COM_languages)[`IDispatch`](https://msdn.microsoft.com/en-us/library/windows/desktop/ms221608%28v=vs.85%29.aspx)” ，但它的客户端没有义务使用它。能够使用“早期绑定”的客户端也可以将其与自动化对象一起使用。

# c# - ClearCanvas exe 的应用程序根类

> ID：13860798
> 
> 赞同：0
> 
> 时间：2012-12-13T13:25:07.560
> 
> 标签：c#, clearcanvas

我试图从 c# windows 应用程序执行 ClearCanvas.Desktop.Executable exe，但出现“无法解析应用程序根类 ClearCanvas.Desktop.Executable - 不匹配”的错误。

下面是我在 C# windows 应用程序中的代码，

字符串[] args = 新字符串[2]; args[0] = "ClearCanvas.Desktop.Executable";

```
 Process pro = new Process();

            pro.StartInfo.FileName = @"D:\ClearCanvasWorkStation\Desktop\Executable\bin\Debug\ClearCanvas.Desktop.Executable.exe";
            pro.StartInfo.Arguments = args[0];

            pro.Start(); 
```

exe的根类名有问题。那么我需要将其设置为什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:29:53.390

尝试这样做：

```
Process pro = new Process();
ProcessStartInfo startInfo = new ProcessStartInfo(@"D:\ClearCanvasWorkStation\Desktop\Executable\bin\Debug\ClearCanvas.Desktop.Executable.exe");
startInfo.Arguments = args[0];
Process.Start(startInfo); 
```

# postgresql - PostgreSQL 中的连接属性

> ID：13860799
> 
> 赞同：1
> 
> 时间：2012-12-13T13:25:19.497
> 
> 标签：postgresql, concatenation, aggregate-functions, group-concat

我正在尝试由他们创建`aggregate function`一个`concatenates`数字。`grouping`我该怎么办？假设我在下面有一张这样的表格。

```
Table Numbers
123
145
187
105 
```

我希望结果看起来像

```
105_123_145_187 
```

如果我在 MySQL 中工作，我知道如何使用`group_concat`分隔符。`_`

我怎样才能在 PostgreSQL 中做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T13:42:42.147

已经有这样的功能：

```
SELECT string_agg(num::text,'_')
FROM Numbers; 
```

详细信息在这里：[string_agg](http://www.postgresql.org/docs/current/static/functions-aggregate.html)。

告诉我，如果您使用 postgresql 8.4 或更早版本。我将向您展示如何将此功能实现为自定义聚合。

UPD 自定义聚合：

```
CREATE OR REPLACE FUNCTION public.concat_delimited (text, text, text)
RETURNS text AS
$body$
  SELECT $1 || (CASE WHEN $1 = '' THEN '' ELSE $3 END) || $2;
$body$
LANGUAGE 'sql'
IMMUTABLE
RETURNS NULL ON NULL INPUT;

CREATE AGGREGATE public.text_concat (text, text)
(
  SFUNC = public.concat_delimited,
  STYPE = text
); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T00:45:45.407

对于现代 PostgreSQL 使用`string_agg(columnname,'_')`.

对于旧版本 8.4 及更高版本，请使用`string_to_array(array_agg(columname), '_')`

请参阅[数组函数和运算符文档](http://www.postgresql.org/docs/current/static/functions-array.html)。

例子：

```
regress=> SELECT array_to_string(array_agg(x::text), ', ') FROM generate_series(1,10) x;
        array_to_string
-------------------------------
 1, 2, 3, 4, 5, 6, 7, 8, 9, 10
(1 row) 
```

*始终*在您的问题中包含您的 PostgreSQL 版本。

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2012-12-13T13:30:55.707

`concat_ws(sep text, str "any" [, str "any" [, ...] ])`是您正在寻找的功能。

第一个参数是您的分隔符，NULL 参数被忽略。有关详细信息，请参阅[PostgreSQL 手册](http://www.postgresql.org/docs/9.2/static/functions-string.html)。

我根本不精通 pgSQL，但编写聚合函数的答案就在那里，请查看[pgSQL 手册](http://www.postgresql.org/docs/9.2/static/plpgsql.html)了解如何编写函数。

# ruby-on-rails - 在 Ruby on Rails 中通过数组和散列迭代数组

> ID：13860806
> 
> 赞同：1
> 
> 时间：2012-12-13T13:25:47.287
> 
> 标签：ruby-on-rails

假设我有这些数据：

```
[{"sku"=>"reprint"}, [], nil, {"quantity"=>"1"}, [], nil, {"shippingOptions"=>"PQRS"},
[{"option"=>"PQRS"}], nil, {"abc"=>"abcccc"}, 
[], nil,{"sku"=>"poster"}, 
[], nil, {"quantity"=>"2"}, [], nil, {"shippingOptions"=>"MNLIJK"},
[{"option"=>"MNL"}, {"option"=>"IJK"}], nil, {"sku"=>"cards"}, 
[], nil, {"quantity"=>"5"},
[], nil, {"shippingOptions"=>"DEFABC"}, [{"option"=>"DEF"}, {"option"=>"ABC"}], nil] 
```

我想使用 Ruby on Rails 迭代这些数据并以适当的格式将其打印为 html 我是这项技术的新手。任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T17:07:11.247

`.flatten`在这里可能很方便。如果您不关心结构，我会在迭代之前将其展平，那么您不必担心不同的深度。

```
1.9.3p194 :001 > root = [{"sku"=>"reprint"}, [], nil, {"quantity"=>"1"}, [], nil, {"shippingOptions"=>"PQRS"},
1.9.3p194 :002 >     [{"option"=>"PQRS"}], nil, {"abc"=>"abcccc"}, 
1.9.3p194 :003 >     [], nil,{"sku"=>"poster"}, 
1.9.3p194 :004 >     [], nil, {"quantity"=>"2"}, [], nil, {"shippingOptions"=>"MNLIJK"},
1.9.3p194 :005 >     [{"option"=>"MNL"}, {"option"=>"IJK"}], nil, {"sku"=>"cards"}, 
1.9.3p194 :006 >     [], nil, {"quantity"=>"5"},
1.9.3p194 :007 >     [], nil, {"shippingOptions"=>"DEFABC"}, [{"option"=>"DEF"}, {"option"=>"ABC"}], nil]
 => [{"sku"=>"reprint"}, [], nil, {"quantity"=>"1"}, [], nil, {"shippingOptions"=>"PQRS"}, [{"option"=>"PQRS"}], nil, {"abc"=>"abcccc"}, [], nil, {"sku"=>"poster"}, [], nil, {"quantity"=>"2"}, [], nil, {"shippingOptions"=>"MNLIJK"}, [{"option"=>"MNL"}, {"option"=>"IJK"}], nil, {"sku"=>"cards"}, [], nil, {"quantity"=>"5"}, [], nil, {"shippingOptions"=>"DEFABC"}, [{"option"=>"DEF"}, {"option"=>"ABC"}], nil] 
1.9.3p194 :008 > root.flatten!
 => [{"sku"=>"reprint"}, nil, {"quantity"=>"1"}, nil, {"shippingOptions"=>"PQRS"}, {"option"=>"PQRS"}, nil, {"abc"=>"abcccc"}, nil, {"sku"=>"poster"}, nil, {"quantity"=>"2"}, nil, {"shippingOptions"=>"MNLIJK"}, {"option"=>"MNL"}, {"option"=>"IJK"}, nil, {"sku"=>"cards"}, nil, {"quantity"=>"5"}, nil, {"shippingOptions"=>"DEFABC"}, {"option"=>"DEF"}, {"option"=>"ABC"}, nil]  
1.9.3p194 :011 > root.each do |r| 
1.9.3p194 :012 >     next if r.nil?
1.9.3p194 :013?>     puts r.to_s
1.9.3p194 :014?> end
{"sku"=>"reprint"}
{"quantity"=>"1"}
{"shippingOptions"=>"PQRS"}
{"option"=>"PQRS"}
{"abc"=>"abcccc"}
{"sku"=>"poster"}
{"quantity"=>"2"}
{"shippingOptions"=>"MNLIJK"}
{"option"=>"MNL"}
{"option"=>"IJK"}
{"sku"=>"cards"}
{"quantity"=>"5"}
{"shippingOptions"=>"DEFABC"}
{"option"=>"DEF"}
{"option"=>"ABC"} 
```

回复：评论。

```
data = [{"sku"=>"reprint"}, [], nil, {"quantity"=>"1"}, [], nil, {"shippingOptions"=>"PQRS"}, [{"option"=>"PQRS"}], nil, {"abc"=>"abcccc"}, [], nil, {"sku"=>"poster"}, [], nil, {"quantity"=>"2"}, [], nil, {"shippingOptions"=>"MNLIJK"}, [{"option"=>"MNL"}, {"option"=>"IJK"}], nil, {"sku"=>"cards"}, [], nil, {"quantity"=>"5"}, [], nil, {"shippingOptions"=>"DEFABC"}, [{"option"=>"DEF"}, {"option"=>"ABC"}], nil]
hash_collection = data.flatten.map(&:to_a).flatten(1).reduce({}) { |h,(k,v)| (h[k] ||= []) << v; h} 
```

产生：

`=> {"sku"=>["reprint", "poster", "cards"], "quantity"=>["1", "2", "5"], "shippingOptions"=>["PQRS", "MNLIJK", "DEFABC"], "option"=>["PQRS", "MNL", "IJK", "DEF", "ABC"], "abc"=>["abcccc"]}`

我实际上希望我的新数据是这样的：

```
{{"sku"=>"Reprint"},{"quantity"=>"1"},{"option"=>"PQRS"}}
{{"sku"=>"Poster"},{"quantity"=>"2"},{"option"=>"MNL"},{"option"=>"IJK"}}
{{"sku"=>"Cards"}, {"quantity"=>"5"},{"option"=>"DEF"},{"option"=>"ABC"}}
{{"sku"=>"Books"},{"quantity"=>"6"},{"option"=>"QIU"},{"option"=>"PSJ"},   option"=>"IQA"},{"suboption"=>"ikh"},{"subsuboption"=>"uuuuuuuuuuuuuuuuu"}} 
```

# php - Yii 如何显示使用 $form->formField() 生成的 fileUpload 的隐藏输入字段

> ID：13860808
> 
> 赞同：0
> 
> 时间：2012-12-13T13:25:48.637
> 
> 标签：php, yii, templating

我想显示使用 CActiveForm->fileField() 生成的隐藏输入字段

```
<?php $form=$this->beginWidget('CActiveForm', array(
                'id'=>'user-_profile-form',
                'enableAjaxValidation'=>false,
                'htmlOptions'=>array(
                    'enctype'=>'multipart/form-data'
                )
            )); ?>
// some code here

<?php echo $form->labelEx($model,'file_upload'); ?>

<?php echo $form->fileField($model,'file_upload'); ?>

// some code here

<?php $this->endWidget(); ?> 
```

输出看起来像这样

```
<label for="User_file_upload">File Upload</label>

<input id="ytUser_file_upload" type="hidden" value="" name="User[file_upload]">
<input name="User[file_upload]" id="User_file_upload" type="file"> 
```

我希望隐藏字段显示为普通输入字段..因为设计要求这样做

如果有人对我有建议会很好

提前致谢

编辑：

这是我需要的图片![在此处输入图像描述](../Images/2c039bb94319f236e167a8611028f99b.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:50:47.863

你可以用javascript做这个客户端吗？

看这个 SO 帖子：[jQuery：将元素类型从隐藏更改为输入](https://stackoverflow.com/questions/540851/jquery-change-element-type-from-hidden-to-input#3057767)，您可以为您的表单（[jsfiddle](http://jsfiddle.net/LD8WA/)）修改它：

```
marker = $('<span />').insertBefore('#ytUser_file_upload');
$('#ytUser_file_upload').detach().attr('type', 'text').insertAfter(marker).focus();
marker.remove();​ 
```

# clojure - Clojure：如何模拟将元数据添加到流中的字符？

> ID：13860810
> 
> 赞同：3
> 
> 时间：2012-12-13T13:25:56.313
> 
> 标签：clojure, metadata

有一个返回字符序列的函数，我需要修改它以允许将元数据附加到某些字符（但不是全部）。Clojure 不支持原始类型的“with-meta”。因此，可能的选择是：

*   返回 [character, metadata] 的向量序列；

    优点：简单，数据和元数据绑定在一起
    缺点：需要从向量中提取数据

*   返回两个单独的序列，一个用于字符，一个用于元数据，如果调用者关心元数据，他会同时迭代它们；

    优点：调用者不必从每个流元素中提取数据，如果他愿意，可能会丢弃元序列
    缺点：需要一次迭代两个 seq，如果需要元数据，调用方会更复杂

*   引入一些包含一个字符并允许将元附加到自身的记录包装器（Clojure 记录实现 IMeta）；

    优点：数据和元数据绑定在一起
    缺点：需要从记录中提取数据

*   你更好的选择。

哪种方法更好？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T14:10:22.950

使用矢量/地图序列，例如

```
({:char 'x' :meta <...>} {:char 'y' :meta <...>} {:char 'z' :meta <...>} ...)
; or
(['x' <...>] ['y' <...>] ['z' <...>] ...) 
```

看起来对我来说是最好的选择，如果我有这样的任务，我会自己做。然后，例如，编写一个将此类序列转换回字符序列的函数非常简单：

```
(defn characters [s] (map :char s))
; or
(defn characters [s] (map first s)) 
```

使用解构绑定同时迭代字符和元数据也很容易：

```
(doseq [{:keys [char meta]} s] ...)
; or
(doseq [[char meta] s] ...) 
```

使用什么（地图或矢量）主要取决于个人喜好。

IMO，使用记录及其`IMeta`界面不太好：我认为这种元数据主要用于与语言相关的代码（宏、代码预处理、语法扩展等），而不是用于域代码。当然，我在这个假设中可能是错误的。

并且使用两个并行序列是最糟糕的选择，因为它不像单个序列那样方便您的界面用户。使用我上面写的函数丢弃元数据非常简单，如果所有序列都是惰性的，它甚至不会影响性能。

# c# - 如何可视化 XAML

> ID：13860811
> 
> 赞同：2
> 
> 时间：2012-12-13T13:25:57.173
> 
> 标签：c#, wpf, xaml, viewer

我的任务是写下一个简单的查看器，它可以显示 .xaml 文件的外观（就像 VS 编辑器一样，但没有编辑功能）。你能给我一些对我有帮助的参考吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:31:29.673

您可以使用[XamlReader.Load](http://msdn.microsoft.com/en-us/library/ms590398.aspx)方法

如果您只想要查看器，而不是设计器，您可以调用`XamlReader.Load`方法，并将结果分配给`ContentControl.Content`

```
StringReader stringReader = new StringReader(strXaml);
XmlReader xmlReader = XmlReader.Create(stringReader);
myContentControl.Content = (Button)XamlReader.Load(xmlReader); 
```

**编辑** 此代码从 xaml 加载窗口并显示它

```
string strXaml = "<Window xmlns=\"http://schemas.microsoft.com/winfx/2006/xaml/presentation\" xmlns:x=\"http://schemas.microsoft.com/winfx/2006/xaml\" Title=\"MainWindow\" Height=\"350\" Width=\"525\">" +
        "<Grid> <Button Content=\"Button123\" Height=\"23\" HorizontalAlignment=\"Left\" Margin=\"174,41,0,0\" Name=\"button1\" VerticalAlignment=\"Top\" Width=\"75\" />"+
        "</Grid></Window>";

StringReader stringReader = new StringReader(strXaml);

XmlReader xmlReader = XmlReader.Create(stringReader);
Window obj = (Window)XamlReader.Load(xmlReader);

obj.Show(); 
```

如果您确定根元素始终是 Window，则可以跳过它。像这样的东西对我有用

```
StringReader stringReader = new StringReader(strXaml);
var xDoc = XDocument.Load(stringReader).Document.Descendants().First().DescendantNodes().First();

XmlReader xmlReader = xDoc.CreateReader();
uc.Content = XamlReader.Load(xmlReader); 
```

最好在跳过它之前检查 Window 是否存在

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T13:31:45.570

假设这会有所帮助： Kaxaml 编辑器[[链接]](http://kaxaml.com/) - 带有可视化工具的 xaml 编辑器，开源并在 MIT 许可下发布。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-13T13:32:38.677

您应该从查看[`XamlServices`](http://msdn.microsoft.com/en-us/library/dd294592.aspx)类及其[`Parse`](http://msdn.microsoft.com/en-us/library/system.xaml.xamlservices.parse.aspx)方法开始。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T13:32:38.237

[KAXAML 就是这样做的，它在github](https://github.com/thinkpixellab/kaxaml)和[codeplex](http://kaxaml.codeplex.com/)上是开源的，我会去那里看看。

特别是，[这](https://github.com/thinkpixellab/kaxaml/blob/master/Kaxaml/Views/DocumentsView.xaml)是执行显示的 XAML 文件

# java - WebDriverWait.until(ExpectedConditions.elementToBeClickable(someAjaxMagic)) 永远不会返回

> ID：13860812
> 
> 赞同：2
> 
> 时间：2012-12-13T13:26:07.810
> 
> 标签：java, ajax, selenium, webdriver, wait

我对硒有疑问。在下面的测试中，它应该去网站，拿一个产品，把它加入购物车，然后去购物车。在这两者之间，它等待一些元素出现。

在我的机器上，测试工作正常，直到将产品添加到购物车。在此之后，一个 div 被 ajax 填充并且测试应该在那里等待一个元素。该元素出现在浏览器中，但测试继续等待。甚至超时似乎也不足以打扰它。

如果我改为等待`wait.until(pause(2));`或设置 `driver.manage().timeouts().implicitlyWait(2, TimeUnit.SECONDS);`一切正常，但这不是正确的解决方案。

任何想法？

我的系统：

MacOS X 10.8.2 或 Windows 7（64 位）

火狐 17.0.1

Java 1.6、JUnit 4.10、selenium-api-2.25.0、selenium-support-2.25.0、selenium-firefox-driver-2.25.0、guava-12.0

我的测试：

```
import static org.openqa.selenium.support.ui.ExpectedConditions.elementToBeClickable;

import javax.annotation.Nullable;

import org.junit.Test;
import org.openqa.selenium.By;
import org.openqa.selenium.WebDriver;
import org.openqa.selenium.firefox.FirefoxDriver;
import org.openqa.selenium.support.ui.WebDriverWait;

import com.google.common.base.Function;

public class TestSomeWebsite {

    @Test
    public void test() throws Exception {
        FirefoxDriver driver = new FirefoxDriver();
        WebDriverWait wait = new WebDriverWait(driver, 30);

        driver.get("http://www.obi.de");

        // take first product
        driver.findElement(By.cssSelector("p.product_desc > a")).click();

        // add to cart
        wait.until(elementToBeClickable(By.id("addtocart")));
        driver.findElement(By.id("addtocart")).submit();

        // go to cart
        /** everything fine by now **/
        wait.until(elementToBeClickable(By.partialLinkText("Zum Warenkorb")));
        /** we never come to this point :( **/
        driver.findElement(By.partialLinkText("Zum Warenkorb")).click();
    }

    private Function<WebDriver, Object> pause(final int time) {
        return new Function<WebDriver, Object>() {
            int count = 0;

            @Nullable
            public Object apply(@Nullable WebDriver input) {
                count++;
                return count >= time;
            }
        };
    }

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-15T12:27:55.417

@snieke，尝试将您的 selenium 版本升级到 2.28.0。我有 99% 的把握这对你有用。

```
<dependency>
  <groupId>org.seleniumhq.selenium</groupId>
  <artifactId>selenium-java</artifactId>
  <version>2.28.0</version>
</dependency> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T15:42:10.060

你是否得到超时异常，你应该在 30 秒后得到它。你可以试试：

```
try {
    wait.until(elementToBeClickable(By.partialLinkText("Zum Warenkorb")));
} catch (TimeoutException e) {
    // Do not stop the test, continue and see what happens
    LOG.info("Timed out", e);
}
driver.findElement(By.partialLinkText("Zum Warenkorb")).click(); 
```

它应该在 30 秒后继续

编辑：

然后尝试编写你自己的条件，这就是我所拥有的（你需要调整它以满足你的需要）：

```
public class WebElementIsVisible implements ExpectedCondition<Boolean> {

    private WebElement element;
    private String elementId;

    public WebElementIsVisible(WebElement elementId) {
        this.element = elementId;
    }

    public WebElementIsVisible(String elementId) {
        this.elementId = elementId;
    }

    @Override
    public Boolean apply(WebDriver webDriver) {
        if (element != null) {
            return isElementVisible(element, webDriver);
        } else if (elementId != null) {
            return isElementIdVisible(elementId, webDriver);
        } else {
            throw new RuntimeException("Not supposed to reach here");
        }
    }

    private Boolean isElementIdVisible(String elementId, WebDriver webDriver) {
        try {
            webDriver.findElement(By.id(elementId));
            return true;
        } catch (NoSuchElementException e) {
            return false;
        }
    }

    private Boolean isElementVisible(WebElement element, WebDriver webDriver) {
        try {
            webDriver.findElement(By.id(element.getAttribute("id")));
            return true;
        } catch (NoSuchElementException e) {
            return false;
        }
    }

} 
```

# sql - TSQL：提交时触发

> ID：13860816
> 
> 赞同：4
> 
> 时间：2012-12-13T13:26:24.557
> 
> 标签：sql, sql-server, tsql, esb

我们有一个后台系统，它通过[MSDTC](http://en.wikipedia.org/wiki/Distributed_Transaction_Coordinator "Microsoft 分布式事务协调器")存储过程将发票信息插入 SQL 数据库，应用程序插入标题，然后是详细信息。

我已经在插入记录时触发的标题表上设置了一个[CLR触发器。](http://msdn.microsoft.com/en-us/library/ms254498(v=vs.80).aspx "SQL Server CLR 集成简介")

我遇到的问题是触发器在`COMMIT TRANSACTION`可能未填充详细信息的含义之前触发，这是触发的过程所必需的。此外，如果系统触发了`ROLLBACK TRANSACTION`触发器，则触发器已经触发。

我知道触发器不能分配给 a `COMMIT`，但想知道是否有人有其他想法。

我偶然发现了一个建议的 oracle 解决方案，您可以在其中创建一个更新的 Materlised 视图`ON COMMIT`，并试图找到 TSQL 等效的索引视图，但没有运气实现它。

**总结：是否可以在***可能使用索引视图*
时触发？`COMMIT TRANSACTION`

 ** * *

**[CLR](http://msdn.microsoft.com/en-us/library/ms254498(v=vs.80).aspx "SQL Server CLR 集成简介")触发代码**

将 JMS 消息发送到队列，由[Sonic ESB](http://www.progress.com/en/sonic/sonic-esb.html "索尼克 ESB")处理。

```
[Microsoft.SqlServer.Server.SqlTrigger(Name = "InvoiceTrigger", Target = "Table", Event = "FOR INSERT")]
public static void InvoiceTrigger()
{
    //Declare Connection vairables
    string connectionURL, connectionDomain, connectionUser, connectionPassword, connectionQueue;
    //Constant
    connectionUser = "user";
    connectionPassword = "pass";
    connectionQueue = "Queue";
    //Local Environment
    connectionURL = "tcp://IP:2506";
    connectionDomain = "Domain1";

    //Create connection sonic domain
    SonicSend send = new SonicSend(connectionURL, connectionDomain, connectionUser, connectionPassword, connectionQueue);

    //Send Test message to pipe
    SqlCommand command;
    SqlTriggerContext triggContext = SqlContext.TriggerContext;
    SqlPipe pipe = SqlContext.Pipe;
    SqlDataReader reader;
    switch (triggContext.TriggerAction)
    {
        case TriggerAction.Insert:
            // Retrieve the connection that the trigger is using
            using (SqlConnection connection = new SqlConnection(@"context connection=true"))
            {
                connection.Open();
                command = new SqlCommand(@"SELECT LSH_LINKCODE, DOC_CODE, LSH_DOCNUM FROM INSERTED;", connection);
                reader = command.ExecuteReader();
                if (reader.HasRows)
                {
                    string xml;
                    char cr = (char)13;
                    int i = 0;
                    while (reader.Read())
                    {

                        xml = @"<Invoice action='insert'>";
                        xml += "<LinkCode>" + reader.GetString(0).ToString() + "</LinkCode>";
                        xml += "<DocumentCode>" + reader.GetString(1).ToString() + "</DocumentCode>";
                        xml += "<DocumentNumber>" + reader.GetString(2).ToString() + "</DocumentNumber>";
                        xml += @"</Invoice>";
                        i++;
                        send.testJMSsend(xml);

                    }

                }

                reader.Close();
            }
            break;
    }

} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T16:07:39.880

在有用的评论指出不可能在触发器中使用提交之后。

我查看了由触发器启动的 ESB 流程，该流程现在使用传递的信息查询数据，这解决了我的问题，因为`BEGIN TRANSACTION`在数据上创建了一个锁，查询不会返回结果，直到有be `COMMIT TRANSACTION`，因此意味着该过程在查询返回数据之前不会继续，因此将始终填充发票详细信息。

此外，如果有`ROLLBACK TRANSACTION`，该过程将超时并按预期抛出错误。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:39:35.673

请参阅这篇文章，您可能必须使用 context_info 然后为这些记录触发触发器......

[有没有办法为特定的执行范围禁用 SQL Server 触发器？](https://stackoverflow.com/questions/174600/t-sql-is-there-a-way-to-disable-a-trigger-in-the-scope-of-a-transaction)*

# couchdb - 您将如何将对象池中的数据库对象注入和处理到资源中？

> ID：13860819
> 
> 赞同：0
> 
> 时间：2012-12-13T13:26:36.663
> 
> 标签：couchdb, jersey, injectableprovider

我一直在考虑为球衣的 jcouchdb 对象实现一个对象池。现在我问自己将 jcouchdb 实例传递到资源端点的最佳方式是什么。

我希望池有一种方法来请求 jcouchdb 对象并释放它以便可以重用它。

我的第一个想法是将 InjectableProvider 实现为单例，并在资源端点中使用注释来“抓取”它。InjectableProvider 然后从对象池中返回一个 jcouchdb 对象并将其标记为忙。使用后如何释放 jcouchdb 对象？即使我从不需要它，我也会为每个资源端点实例请求一个 jcouchdb 对象？！（不知道带注释的对象何时被实例化）

我正在考虑的另一个想法是将对象池附加到 servlet 上下文（使用 set 属性）。

还有其他想法吗？

当我谈到共享资源和球衣时，我基本上有点困惑。希望有人可以为我解决问题。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-14T22:53:37.303

如果你完全按照你说的去做，你的代码应该是这样的：

```
public class MyResource{
     @GET
     @RequestMapping("/bleh")
     public Response getValue(@Context JCouchDBObject object){
        //manipulate object
     }
}

@Provider
public class MyProvider extends InjectableProvider<Context, Parameter>{
   public Injectable<JCouchDBObject> getInjectable(ComponentContext context, Context hp, Parameter param) {
        //GetObject and return
   }
} 
```

我从未使用过 JCouchDB，但除非每个对象都链接到 DB 连接池 - 无需手动释放 - 所有这些都将为您处理。

***但是：***这不是 InjectableProvider 的设计目的。通常，InjectableProvider 将用于创建和解析某种请求对象（例如 JCouchDBObject 的 ID 等）。然后您应该使用服务来收集 JCouchDBObject 并在那里处理任何手动发布。

# html - 即使使用 meyer 重置，Chrome 和 IE9 之间的 CSS 不一致？

> ID：13860823
> 
> 赞同：1
> 
> 时间：2012-12-13T13:26:48.840
> 
> 标签：html, css, internet-explorer, google-chrome, webfonts

**左边是Chrome，右边是IE9。**

![在此处输入图像描述](../Images/c2ca225d16464d24339048bd83af6ea7.png)

如上图所示，即使使用*Meyer CSS Reset*，浏览器之间仍然存在不一致。此图中的两个示例：

1.  IE9 显然对几乎所有文本都有一个较暗的字体。
2.  无论出于何种原因，`<hr/>`标签没有对齐（但它们肯定很接近）并且会丢弃其余内容。

*除了应用Meyer CSS Reset*以获得这些浏览器之间的更多一致性之外，我还需要做些什么吗？

此外，对于您在上面看到的内容，除了颜色和字体大小之外，重置后没有应用边距或填充。

### CSS

```
h1 {
    font-family: Lato;
    font-size: 26px;
    font-weight: normal;
    color: #154995;
}

h2 {
    font-family: Lato;
    font-size: 24px;
    font-weight: normal;
    color: #333333;
}

h3 {
    font-family: Lato;
    font-size: 20px;
    font-weight: normal;
    color: #154995;
}

h4 {
    font-family: Lato;
    font-size: 18px;
    font-weight: bold;
    color: #333333;
}

h5 {
    font-family: Lato;
    font-size: 16px;
    font-weight: bold;
    color: #333333;
}

.small-text {
    font-family: Arial, sans-serif;
    font-size: 12px;
    font-weight: regular;
    color: #333333;
} 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-12-13T13:31:35.680

您指出的差异都是基于您的 chrome 和 IE9 输出中使用了两种不同的字体这一事实。一旦你调整了css `font-family`，让两个浏览器都使用相同的字体，那么它应该没问题。

**更新：**
看到你的 css 后，你只`Lato`为元素指定字体，似乎 chrome 和 IE9 都找不到字体`Lato`，所以两者都在应用默认字体，这是彼此不同的，尝试指定后备字体，如：

```
font-family: Lato, Arial, sans-serif; 
```

如果上面仍然为您提供不同的输出，则`Lato`在一个浏览器中而不是其他浏览器中选择，您可以使用以下方法进行检查：

```
font-family: Arial, sans-serif; 
```

对于您的所有元素，并查看两个浏览器上的输出相同。

**更新 2：**
另请参阅有关如何将 Lato 网络字体添加到您的网站的说明： [http ://www.google.com/webfonts#UsePlace:use/Collection:Lato](http://www.google.com/webfonts#UsePlace:use/Collection:Lato)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:45:40.717

根据我的说法，`font-family`您使用的可能不是系统字体，而是网络字体，所以这里的问题是 1 个浏览器正在占用网络字体，而其他浏览器没有，所以使用默认`Times New Roman`字体

# java - Statement 的 evaluate 方法执行 before 和 test 方法一起

> ID：13860824
> 
> 赞同：0
> 
> 时间：2012-12-13T13:26:51.970
> 
> 标签：java, junit, annotations

我试图理解 Statement 类的 evaluate() 方法，例如，根据[JUnit 中每个“@Test”之后和每个“@After”之前应用“@Rule”中的代码](https://stackoverflow.com/questions/12078982/rule-applies-to-before-after-in-junit)

评估方法实际上在之前和之后都执行，然后继续前进。

```
 @Override
            public void evaluate() throws Throwable {
                // TODO Auto-generated method stub
                try{
                System.out.println("I am Rule1");
                arg0.evaluate();
                System.out.println("I am Rule2");

                } 
```

上述代码的部分结果是：

```
I am Rule1
I am before
I am Test1
I am Rule2 
```

那么，在“I am Rule1”之后，“I am before”和“I am Test1”在评估方法时如何显示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:39:14.443

从`@Rule`注释的javadoc：

> 传递给 TestRule 的 Statement 将运行任何 Before 方法，然后是 Test 方法，最后是任何 After 方法

即，当您调用`evalute()`Statement 上的方法时，会发生上述情况。围绕`evaluate()`调用的代码分别在`Statement`相关内容之前和之后调用。

# tinymce - TINYMCE 没有选择偏好

> ID：13860826
> 
> 赞同：1
> 
> 时间：2012-12-13T13:26:58.983
> 
> 标签：tinymce

我使用的答案来自：

[TinyMCE 在隐藏 textarea 之前没有从 textarea 抓取内容](https://stackoverflow.com/questions/8716667/tinymce-not-grabbing-content-from-textarea-before-hiding-that-textarea)

让 TINYMCE 从 IE7/8 的文本区域获取内容。

现在的问题是它已经取消了我所有的偏好、css、按钮偏好等。我怎样才能让它们回来？

```
tinyMCE.execCommand('mceAddControl', false, 'article');
    tinyMCE.init({
        mode : "exact",
        theme : "advanced",
        content_css: "/static/css/tinymce.css",
        editor_selector : "article",
        plugins : "imagemanager, filemanager",
        setup: function(ed) {

            // Add TypeKit script to the iframe header
            ed.onPreInit.add(function(ed) {

                 // Get the DOM document object for the IFRAME
                 var doc = ed.getDoc();

                 // Create the script we will add to the header asynchronously
                 var jscript = "var TypekitConfig = {\n\
                    kitId: 'qkc2pmz'\n\
                    };\n\
                    (function() {\n\
                    var tk = document.createElement('script');\n\
                    tk.src = '//use.typekit.com/' + TypekitConfig.kitId + '.js';\n\
                    tk.type = 'text/javascript';\n\
                    tk.async = 'true';\n\
                    tk.onload = tk.onreadystatechange = function() {\n\
                    var rs = this.readyState;\n\
                    if (rs && rs != 'complete' && rs != 'loaded') return;\n\
                    try { Typekit.load(TypekitConfig); } catch (e) {}\n\
                    };\n\
                    var s = document.getElementsByTagName('script')[0];\n\
                    s.parentNode.insertBefore(tk, s);\n\
                 })();";

                 // Create a script element and insert the TypeKit code into it
                 var script = doc.createElement("script");
                 script.type = "text/javascript";
                 script.appendChild(doc.createTextNode(jscript));

                 // Add the script to the header
                 doc.getElementsByTagName("head")[0].appendChild(script);

            });

        },
        width : "600",
        height : "300",
        theme_advanced_buttons1 : "formatselect,bold,italic,underline,strikethrough,sup,sub,link,unlink,removeformat,separator,bullist,numlist,blockquote,separator,charmap,separator,insertimage,insertfile",
        theme_advanced_statusbar_location : "none",
        force_br_newlines : false,
        force_p_newlines : false,
        forced_root_block : ''

    }); 
```

文字区：

```
$buffer .= '<div class="control-group">';
        $buffer .= '<label class="control-label">Article:</label>';
        $buffer .= '<div class="controls">';
            $buffer .= '<textarea rows="4" cols="100" id="article" class="article" name="article">';
            $buffer .= $this->registry->article['content'];
            $buffer .= '</textarea>';
        $buffer .= '</div>';
    $buffer .= '</div>'; 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:32:34.777

你需要执行

```
tinyMCE.execCommand('mceAddControl', false, 'article'); 
```

之后`tinymce.init...`

# asp.net - 使用基本身份验证将 ASP .NET 应用程序集成到 Sharepoint 页面查看器中

> ID：13860829
> 
> 赞同：1
> 
> 时间：2012-12-13T13:27:11.153
> 
> 标签：asp.net, sharepoint, authentication

我想将我自己的 ASP .NET 应用程序集成到页面查看器 Web 部件中的 Sharepoint 站点（通过 URL）。

我的 Sharepoint 可通过以下方式访问：http: [//subdomain.domain.com](http://subdomain.domain.com)

我的 ASP .NET 应用程序可通过以下方式访问：http: [//othersubdomain.domain.com](http://othersubdomain.domain.com)

Sharepoint 和其他应用程序托管在不同的服务器上。

由于共享点和应用程序应该可以从我的域之外（通过 Internet 公开）访问，因此我对两者都使用基本身份验证。

现在，当我打开 Sharepoint 站点时，我必须输入我的用户凭据一次，当我导航到 sharepoint 内的应用程序时，我必须再次输入我的 ASP .NET 应用程序的用户凭据（相同的凭据，来自 Active Directory 域的用户）。

是否有可能将我的应用程序集成到 sharepoint 中而无需登录两次并且无需在 sharepoint 服务器上安装我的应用程序？

谢谢！

# android - ViewPager & ImageView 缩放问题

> ID：13860832
> 
> 赞同：11
> 
> 时间：2012-12-13T13:27:40.810
> 
> 标签：android, android-viewpager, android-imageview, pinchzoom

我正在尝试使用 ViewPager 实现图像库。此外，为了实现缩放功能，我正在使用来自 github 的[TouchImageView 。](https://github.com/MikeOrtiz/TouchImageView)我也尝试过使用[ZoomableImageView](https://github.com/a85/WebComicViewer/blob/master/src/com/rickreation/ui/ZoomableImageView.java)。

但是，问题是，如果我缩放图像并且如果我滚动图像，那么滚动图像而不是图像，并且正在加载`ViewPager`下一个视图。`ViewPager`

如果我缩放图像然后如果我滚动它，那么图像必须移动而不是`ViewPager`

ViewPager 的下一个视图只有在到达缩放图像的末尾时才需要加载。怎么做？

我找不到那个。如果我触摸并沿对角线拖动图像，只有图像才会移动。否则 ViewPager 的拖动被调用。

ps：这不是重复的。缩放完成。但问题是在图像缩放之后。

* * *

## 回答 #1

> 赞同：22
> 
> 时间：2012-12-13T13:39:19.660

是的，我也遇到了与 TouchImageView 不同的问题。

太解决了当我的视图获得焦点时我所做的就是禁用 ViewPager 的问题。

```
public class EnableDisableViewPager extends ViewPager {

    private boolean enabled = true;

    public EnableDisableViewPager(Context context, AttributeSet attrs) {
        super(context, attrs);
    }

    @Override
    public boolean onInterceptTouchEvent(MotionEvent arg0) {
        if(enabled)
            return super.onInterceptTouchEvent(arg0);

        return false;
    }

    public boolean isEnabled() {
        return enabled;
    }

    public void setEnabled(boolean enabled) {
        this.enabled = enabled;
    }
} 
```

所以在 TouchImageView 中实现你的监听器来触发一个事件，无论是缩放还是拖动。

在您的活动中将侦听器设置为您的视图对象。因此，当这些事件发生时，只需禁用视图寻呼机。

**注意**：您还需要一个鼠标向上事件来启用 viewpager。

**已编辑**

这仅适用于缩放，因此要让 ViewPager 滑动页面，您应该缩放回原始页面。

将这些代码添加到您的 TouchImageView

```
 public class TouchImageView extends ImageView {

        ...
    private TouchEventListener touchEventListener;

        private void sharedConstructing(Context context) {
            ...

            setOnTouchListener(new OnTouchListener() {

                @Override
                public boolean onTouch(View v, MotionEvent event) {
                    ...
                        case MotionEvent.ACTION_UP:
                            ...
                            if(touchEventListener != null)
                            {
                                if(saveScale == 1.0)
                                    touchEventListener.onZoomToOriginal();
                                else
                                    touchEventListener.onZoom();
                            }
                            break;

                        ...
                    }
                    ...
                }

            });
        }

        ...

public TouchEventListener getTouchEventListener() {
        return touchEventListener;
    }

    public void setTouchEventListener(TouchEventListener touchEventListener) {
        this.touchEventListener = touchEventListener;
    }

        public interface TouchEventListener 
        {
            void onZoom();
            void onZoomToOriginal();
        }
    } 
```

**更好的解决方案**

通过使用下面给出的方法，我们可以在不将 ViewPager 扩展到新类的情况下实现这一点。

```
requestDisallowInterceptTouchEvent(true); 
```

有了这个，我们可以在不缩小到原始位置的情况下滑动，就像我们在图库和许多其他应用程序中看到的那样。

```
public class TouchImageView extends ImageView {

        ...
private void stopInterceptEvent()
{
    getParent().requestDisallowInterceptTouchEvent(true);
}

private void startInterceptEvent()
{
    getParent().requestDisallowInterceptTouchEvent(false);
}

private void sharedConstructing(Context context) {
    super.setClickable(true);
    this.context = context;
    mScaleDetector = new ScaleGestureDetector(context, new ScaleListener());
    matrix.setTranslate(1f, 1f);
    m = new float[9];
    setImageMatrix(matrix);
    setScaleType(ScaleType.MATRIX);

    setOnTouchListener(new OnTouchListener() {

        @Override
        public boolean onTouch(View v, MotionEvent event) {
            mScaleDetector.onTouchEvent(event);

            matrix.getValues(m);
            float x = m[Matrix.MTRANS_X];
            float y = m[Matrix.MTRANS_Y];
            PointF curr = new PointF(event.getX(), event.getY());

            switch (event.getAction()) {
                case MotionEvent.ACTION_DOWN:
                    last.set(event.getX(), event.getY());
                    start.set(last);
                    mode = DRAG;
                    stopInterceptEvent();
                    break;
                case MotionEvent.ACTION_MOVE:
                    if (mode == DRAG) {
                        float deltaX = curr.x - last.x;
                        float deltaY = curr.y - last.y;
                        float scaleWidth = Math.round(origWidth * saveScale);
                        float scaleHeight = Math.round(origHeight * saveScale);
                        if (scaleWidth < width) {
                            deltaX = 0;
                            if (y + deltaY > 0)
                                deltaY = -y;
                            else if (y + deltaY < -bottom)
                                deltaY = -(y + bottom); 
                        } else if (scaleHeight < height) {
                            deltaY = 0;
                            if (x + deltaX > 0)
                                deltaX = -x;
                            else if (x + deltaX < -right)
                                deltaX = -(x + right);
                        } else {
                            if (x + deltaX > 0)
                                deltaX = -x;
                            else if (x + deltaX < -right)
                                deltaX = -(x + right);

                            if (y + deltaY > 0)
                                deltaY = -y;
                            else if (y + deltaY < -bottom)
                                deltaY = -(y + bottom);
                        }

                        if(deltaX == 0)
                            startInterceptEvent();
                        else
                            stopInterceptEvent();

                        matrix.postTranslate(deltaX, deltaY);
                        last.set(curr.x, curr.y);
                    }
                    break;

                case MotionEvent.ACTION_UP:
                    mode = NONE;
                    int xDiff = (int) Math.abs(curr.x - start.x);
                    int yDiff = (int) Math.abs(curr.y - start.y);
                    if (xDiff < CLICK && yDiff < CLICK)
                        performClick();
                    startInterceptEvent();
                    break;

                case MotionEvent.ACTION_POINTER_UP:
                    mode = NONE;
                    break;
            }
            setImageMatrix(matrix);
            invalidate();
            return true; // indicate event was handled
        }

    });
}
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-07-03T19:26:17.773

我通过添加以下代码使其工作：

```
if(deltaX == 0 &&  saveScale == 1.0 )
    startInterceptEvent();
else
    stopInterceptEvent(); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-04-15T18:18:26.077

我终于找到了[Subsampling Scale Image View](https://github.com/davemorrissey/subsampling-scale-image-view)库，它甚至可以与 Android 支持包中的标准 ViewPager 一起使用，无需任何自定义。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-12-04T10:08:10.967

```
if(deltaX == 0 || saveScale == 1.0 )
    startInterceptEvent();
else
    stopInterceptEvent(); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-03-02T14:12:28.533

如果有人有水平浏览器，重要的是更改@kirit-vaghela 代码：

```
if(deltaX == 0 || saveScale == 1.0 )
    startInterceptEvent();
else
    stopInterceptEvent(); 
```

到

```
if(saveScale == 1.0 )
    startInterceptEvent();
else
    stopInterceptEvent(); 
```

所以适配器只有在 1.0 时才会改变图片

# ruby-on-rails-3 - 使用 Accepts_nested_attributes_for 进行 rails-rspec 唯一性验证

> ID：13860833
> 
> 赞同：2
> 
> 时间：2012-12-13T13:27:45.747
> 
> 标签：ruby-on-rails-3, validation, rspec, unique

**我的模特关系喜欢**

```
class Cart < ActiveRecord::Base
  has_many :cart_items, :inverse_of => :cart, :dependent => :destroy
  accepts_nested_attributes_for :cart_items, :allow_destroy => :true, :reject_if => proc { |attrs| attrs.all? { |k, v| v.blank? } }
  validates_associated :cart_items
  validates :cart_name, :presence => {:message => "Must be filled" }
end

class CartItem < ActiveRecord::Base
  belongs_to :cart, :inverse_of => :cart_items
  validates :cart_item_no, :presence => {:message => "Must be filled"}, :uniqueness => {:message => "Already exists" }
end 
```

**工厂.rb**

```
FactoryGirl.define do
  factory :cart do
    cart_name "sample"
    factory :cart_with_cart_items do
      after(:build) {|cart|
        2.times { cart.cart_items.build(attributes_for(:cart_item)) }
      }
      after(:create) {|cart|
        cart.cart_items.each {|cart_item| cart_item.save! }
      }
    end
  end

  factory :cart_item  do
    cart_item_no 1
    cart
  end
end 
```

下面的测试用例总是失败

```
it "should not be valid with same cart_id" do
  cart = FactoryGirl.build(:cart_with_cart_items)
  cart.should_not be_valid
end 
```

然后我在控制台中探索，通过下面的代码示例，验证总是在**cart_items**中使用相同的 *cart_item_no* 返回 true 两次。

```
cart = Cart.new(:cart_name => "yyy")
  => #<Cart id: nil, cart_name: "yyy">
2.times { cart.cart_items.build(:cart_item_no => 1000) }
  => 2
cart.cart_items 
  => [#<CartItem id: nil, cart_item_no: 1000>, #<CartItem id: nil, cart_item_no: 1000>]
cart.valid?
  => true
cart.save!
  => true 
```

这是轨道问题吗？

如何解决测试用例？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:41:38.673

仅针对数据库的唯一性验证检查。在您的情况下，您有两个`cart_items`相互冲突但与数据库中的任何记录都没有冲突，因此单独来说，两者都是有效的，这就是您的验证通过的原因。

您可以在您的课程中添加自定义验证`Cart`（未测试）：

```
validates :unique_cart_items

def unique_cart_items
  unless cart_items.collect(&:cart_item_no).uniq.size < cart_items.size
    # set some error attribute here
  end
end 
```

这会将唯一`cart_item_no`值的数量与 的数量进行比较`cart_items`。如果它们不相同，则存在重复的`cart_item_no`.

# php - 设置html后动画和调整div

> ID：13860834
> 
> 赞同：0
> 
> 时间：2012-12-13T13:27:47.893
> 
> 标签：php, javascript, jquery, ajax

总的来说，我对 jQuery、AJAX 和 web 开发还很陌生，所以这让我抓狂。

我有一个 AJAX 请求将页面内容拉入当前页面，我试图强制 jQuery 像这样显示它：

1.  淡出当前内容
2.  平滑地将 div 调整为新内容
3.  淡入新内容

到目前为止，我已经把它写成这样。我已经把它改了一大堆，所以这可能不是我得到的最接近的，但同样的问题仍然存在。

```
$("#page-data").fadeOut(600).html(data);

$("#page-data").ready(function() {
    var newHeight = $('#' + divname).height();
    $("#page-data").animate({
        height: newHeight,
    }, 600, function() {
        $("#page-data").fadeIn(100);
    });
}); 
```

页面数据具有这种简单风格的地方：

```
#page-data { position: relative; overflow: hidden; } 
```

我的问题是这`$('#' + divname).height()`不考虑 div 中可能发生的图像和其他事情。我尝试使用`.load()`而不是`.ready()`，但是根本没有调用回调。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T18:38:44.897

由于问题中没有包含任何 HTML，我假设您的容器`<div id="pageData">`包含另一个`<div>`（由 标识`divname`），您正在将动态内容加载到该容器中。

首先，`$(..).ready()`只能在`document`对象上使用，因此将其应用于 a`<div>`违背了 jQuery 的文档。

我认为实现您的目标的最佳方法是跟踪您通过 AJAX 动态加载的 HTML 中的任何图像并监视它们，直到它们全部被加载。*然后*你可以应用你的逻辑来设置你的容器的高度`<div>`。

问题是，如果我们将`load`事件处理程序应用于已经加载的图像，那么它不会触发。确定图像是否已经加载可能很棘手，但公认的智慧似乎是检查`complete`属性（如果存在）或检查图像的高度是否大于 0：

```
function imageLoaded(img) {
    if(typeof img.complete != 'undefined') {
        return img.complete;
    }
    else {
        return(img.height > 0);
    }
} 
```

现在我们可以采取以下步骤：

1.  淡出将包含您的 AJAX 内容的`<div>`（例如）`#pageContent`
2.  加载 AJAX 内容
3.  搜索所有图像的新内容，计算有多少，为每个图像添加一个`load`事件处理程序，然后循环检查每个图像是否已经加载，如果是则手动触发`load`事件。
4.  在加载事件中，我们递减计数器。当计数器达到零时，然后计算容器的高度`<div>`并淡入内容

例如（有关[工作的 jsfiddle，请参见此处](http://jsfiddle.net/RJDcc/5/)）：

```
$pageData = $('#pageData');
$pageContent = $('#pageContent');

$pageData.height($pageData.height());

$pageContent.fadeOut(function() {
    $pageContent.load('http://your.dynamic.content', contentLoaded);
});

function contentLoaded() {
    var $loadables = $(this).find('img');
    var loadableCount = $loadables.length;

    // Attach onLoad event handlers to each image
    $loadables.load(function() {
        loadableCount--;
        checkAllLoaded(loadableCount);
    });

    // Trigger the onLoad events manually for any images that have already loaded
    $loadables.each(function() {
        if(imageLoaded(this)) {
            $(this).trigger('load');
        }
    });
}

function checkAllLoaded(loadCount) {
    if (loadCount <= 0) {
        $('#pageData').animate({
            height: $('#pageContent').height()
        }, 600, function() {
            $('#pageContent').fadeIn();
        });
    }
} 
```

# ruby-on-rails - 通过 curl 发出奇怪的 json 请求

> ID：13860836
> 
> 赞同：1
> 
> 时间：2012-12-13T13:27:48.983
> 
> 标签：ruby-on-rails, ruby-on-rails-3, json, curl

我正在通过 curl 向我的本地 Web 服务器发送 json 请求

```
curl -H 'Content-Type: application/json' -d {"name":"Stanford University", "subdomain":"stanford"} http://localhost:3000/rest/v1/groups.json 
```

但是在我的params中的rails应用程序中，我得到了

```
Parameters: {"name"=>"Stanford University", "subdomain"=>"stanford", "group"=>{"name"=>"Stanford University", "subdomain"=>"stanford"}} 
```

该哈希组来自哪里，我如何控制它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:31:45.587

进去看看`config/initializers/wrap_parameters.rb`。您可能已`wrap_parameters`启用 JSON 请求。

您可以在上述文件中禁用此选项

```
wrap_parameters false 
```

**推荐阅读：** [http ://api.rubyonrails.org/classes/ActionController/ParamsWrapper.html](http://api.rubyonrails.org/classes/ActionController/ParamsWrapper.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:31:47.913

您必须将其发送为 Json 格式

尝试关注

```
curl -H 'Content-Type: application/json' -d "{\"name\":\"Stanford University\", \"subdomain\":\"stanford\"}" 
```

或者

```
hash = {"name":"Stanford University", "subdomain":"stanford"}
curl -H 'Content-Type: application/json' -d "#{hash.to_json}" http://localhost:3000/rest/v1/groups.json 
```

# vbscript - 如何使用 VBScript 为测试计划中的测试用例添加参数？

> ID：13860838
> 
> 赞同：0
> 
> 时间：2012-12-13T13:27:54.517
> 
> 标签：vbscript, hp-quality-center

我在 vbscript 中有一段代码可以将参数添加到测试用例，但它会引发以下错误
`Entity with Key '5' does not exist in table 'TEST'`

脚本：

```
Dim supportParamTest
Set supportParamTest = TDConnection.TestFactory.Item(5)
Set testParamsFactory = supportParamTest.TestParameterFactory
Set parameter = testParamsFactory.AddItem(Null)
parameter.Name = "name"
parameter.Description = "desc"
parameter.Post 
```

谁能帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T02:02:35.517

您特别要求提供 ID 为“5”的 TestFactory 托管项（代码的第 2 行）。该错误告诉您没有具有此 ID 的此类实体。

你的意思是得到第5项？如果是，您是否连接到正确的项目？

您可以使用允许直接针对 HPQC 项目数据库运行 SQL 的管理功能检查实体 ID。执行 SELECT * FROM TEST 并查看是否存在 id 为 5 的行。

# php - PHP函数多态性

> ID：13860839
> 
> 赞同：1
> 
> 时间：2012-12-13T13:28:00.560
> 
> 标签：php

我想在我的[PHP](http://en.wikipedia.org/wiki/PHP)类中使用函数多态性。我打算检查我的一些子类函数的函数的输入类型。

```
class A
{
    public function setValue(Type $value)
    {
    }
}

class B extends A
{
    public function setValue(XType $value)
    {
    }
}

class C extends A
{
    public function setValue(ZType $value)
    {
    }
}
$b = new B();
$b->setValue(new XType()); 
```

和

```
class Type {};
class XType extends Type;
class ZType extends Type; 
```

我正在寻找的行为是，如果使用错误的参数类型调用*setValue ，PHP 会引发异常。*

如果我使用上面的代码，我会得到一个错误：

> 运行时注意： B::setValue() 的声明应该与 B.php 行中的 A::setValue(Type $value) 兼容。

这就是我设法获得我想要的行为的方式：

```
class B extends A
{
    public function setValue(Type $value)
    {
        if (!$value instanceof XType) {
            throw new \Exception("value $value not allowed, should be of type XType");
        parent::setValue($value);
        }
    }
} 
```

但我很乐意让 PHP 核心为我处理那段代码 :)

我发现我**不够**清楚..

我正在尝试为调用者提供默认行为*A::setValue()*以及关于某些子类的特定行为*B::setValue()*，因此如果调用者尝试使用B *::setValue()*调用一个不受支持的类型，它会得到一个错误，但如果它调用，比如说，*D::setValue()*，它将获得默认值，*A::setValue()*。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:34:54.527

你已经工作的东西，不需要`instanceof`你做的检查。您可以在参数类型提示中声明类型。

您的代码有什么问题是它不是正确的多态性。这也是通知（注意：不是*错误*）想要告诉你的。您的子类需要与父类不同类型的参数。即使这些类型是相关的，这也意味着您不能用其中一个子类替换父类的任何给定实例。这就是打破多态性的原因。如果您的子类需要更专业的类型，则它们的声明不再与它们的父类兼容，因此它们并不完全是多态的。

在适当的多态性中，这应该有效：

```
if (rand(0, 1)) {
    $obj = new A;
} else {
    $obj = new B;
}

$obj->setValue(new Type); 
```

用你正在尝试做的事情是行不通的。

# build - TFS 构建 - 引用旧 dll 而不是新 dll 的项目

> ID：13860847
> 
> 赞同：2
> 
> 时间：2012-12-13T13:28:43.167
> 
> 标签：build, tfs

我们已经为项目中的构建解决方案配置了一个新的构建定义。该解决方案有多个项目。项目设置为将 dll 复制到一个公共文件夹“Build”，并且相互引用的项目使用此位置来引用依赖的 Dll。设置构建定义后，构建工作正常。但是，当我在其中一个项目中创建了一些新类时，构建开始失败，因为“构建”文件夹仅包含不包含该类的旧 Dll，并且在构建 TFS 时将所有新构建的 dll 复制到“二进制文件”文件夹。然后用“Build”文件夹中的旧dll替换这些dll。我已经尝试了几种方法，但仍然无法弄清楚为什么“构建” 文件夹未使用最新的构建 Dll 进行更新。请帮我，我在哪里缺少配置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T15:12:44.717

您应该检查项目属性，根据您正在构建的配置（调试/发布），您的输出可能会转到另一个位置。是否在 TFS 中签入了“构建”文件夹？在这种情况下，文件在构建过程中是只读的，不能被副本覆盖。

为什么使用此 Build 文件夹而不是在解决方案中添加项目引用？这将使它独立于输出位置，因为该过程自动知道在哪里搜索。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-09T07:51:31.543

我已通过从服务器上的“Build”文件夹中手动删除 Dll 来解决此问题，因此现在使用新类的 Build 正在工作，因为新构建的 dll 不会被“build”文件夹中的复制操作替换。

# objective-c - 如何在 Google+ 上分享图片？

> ID：13860852
> 
> 赞同：1
> 
> 时间：2012-12-13T13:28:55.930
> 
> 标签：objective-c, ios, google-plus

我们的两个团队正在开发相同的应用程序：adroid 团队和 iOS 团队。Android 团队能够进行文字+照片共享。带有文本的简单帖子通常可以完成，但文本 + 图片需要 google+ 应用程序，并且打开小型居中网页视图的代码如下所示：

```
Intent shareIntent = ShareCompat.IntentBuilder.from(act)
 .setText(message).setStream(uri).setType("image/jpeg")
 .getIntent().setPackage("com.google.android.apps.plus");
act.startActivityForResult(shareIntent, SocialNetworksConstants.GOOGLE_POST_REQUERST); 
```

但是，我在最新的 Google+ iOS sdk 中找不到类似的东西。GPPShareBuilder 协议只有：

```
- (id<GPPShareBuilder>)setPrefillText:(NSString *)prefillText; 
```

和

```
- (id<GPPShareBuilder>)setTitle:(NSString *)title
                       description:(NSString *)description
                       thumbnailURL:(NSURL *)thumbnailURL; 
```

有人遇到过这个问题吗？

**更新**：这是Android 解决方案的[链接。](http://googleplusplatform.blogspot.com/2012/05/sharing-rich-content-from-your-android.html)看起来 Android 有一些“ShareCompat”Android 原生库，扩展了在应用程序之间共享数据的功能。

**UPDATE2**尝试在最近的 Google+ sdk 中使用“setTitle:description:thumbnailURL:”和 google+ 共享示例代码。试图从包中推送一些图像的 NSURL：

```
- (IBAction)shareButton:(id)sender{
  ...
  if (title && description) {

  //NSURL *imageUrl = [NSURL URLWithString:[deepLinkThumbnailURL_ text]];

  NSString *imagePathString = [[NSBundle mainBundle] pathForResource:@"my_image" ofType:@"png"];
  NSURL *imageUrl = [[NSURL alloc] initWithString:imagePathString];

  shareBuilder = [shareBuilder setTitle:title
                            description:description
                           thumbnailURL:imageUrl]; // throw image path
} 
```

然而这并没有成功。当 google+ 在 safari 中打开共享窗口时，图像占位符为空。只有一些外部 URL 链接有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-27T09:11:20.063

**用这个 ：**

```
NSData *imageData = UIImagePNGRepresentation(myImage.image);

[(id< GPPNativeShareBuilder >)shareBuilder attachImageData:imageData]; 
```

# php - 来自查询结果php的数组while

> ID：13860854
> 
> 赞同：0
> 
> 时间：2012-12-13T13:29:03.050
> 
> 标签：php, arrays, loops

我有这段代码，它正在工作......我正在尝试这样做：

```
Array
(
    [servicio_id 1] => Array
        (
            [peticion_id 1] => Array
                (...)
            [peticion_id 2] => Array
                (...)
            [peticion_id 3] => Array
                (...)
         )
    [servicio_id 2] => Array
        (
            [peticion_id 1] => Array
                (...)
            [peticion_id 2] => Array
                (...)
            [peticion_id 3] => Array
                (...)
         )
) 
```

所以每个 [servicio_id] 都有它自己的值 [peticion_id] ...问题是我的代码实际上在每个 [peticion_id] 数组中设置了相同的值，只要循环正在运行就增加它的大小...任何建议[servicio_id] 完成后如何清除并重新启动 [peticion_id] 数组？

谢谢你的建议

```
while($row = sqlsrv_fetch_array($sqlQuery)) {
    if($row['peticion_id'] == 0) {
        $ok[]       =   round($row['valor'], 3);
        if($row['media_ok'] == null) {
            $medias_ok = array("0", "0", "0", "0");
        } else {
            $medias_ok = Umbrales::getValues($row['media_ok'], $row['media']);
        }   
        $max_ok[] = $medias_ok[1];
        $min_ok[] = $medias_ok[0];
    }
    if($row['peticion_id'] == 1) {
        $ko[]       =   round($row['valor'], 3);
        if($row['media_ok'] == null) {
            $medias_ko = array("0", "0", "0", "0");
        } else {
            $medias_ko = Umbrales::getValues($row['media_ok'], $row['media']);
        }   
        $max_ko[] = $medias_ko[2];
    }
    if($row['peticion_id'] == 2) {
        $rt[]       =   round($row['valor'], 3);
        if($row['media_ok'] == null) {
            $medias_rt = array("0", "0", "0", "0");
        } else {
            $medias_rt = Umbrales::getValues($row['media_ok'], $row['media']);
        }   
        $max_rt[] = $medias_rt[3];
    }
    $datos[$servicios[$row['servicio_id']]] = array(
    "OK" => $ok,
    "KO" => $ko,
    "RT" => $rt,
    "UMBRAL_MIN_OK" => $min_ok,
    "UMBRAL_MAX_OK" => $max_ok,
    "UMBRAL_MAX_KO" => $max_ko,
    "UMBRAL_MAX_RT" => $max_rt
    );
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:32:29.843

您需要清除每个循环上的数组。在你之后，它应该阅读：

```
while($row = sqlsrv_fetch_array($sqlQuery)) {

    $ok = array();
    $ko = array();
    $rt = array();
    $min_ok = array();
    $max_ok = array();
    $max_ko = array();
    $max_rt = array();

    if($row['peticion_id'] == 0) { 
```

# php - 有没有办法在从插入时间算起的一定时间后从 mysql 中删除一行

> ID：13860857
> 
> 赞同：1
> 
> 时间：2012-12-13T13:29:08.620
> 
> 标签：php, mysql, cron

我需要在创建时间 24 小时后删除一行。PHP/MySQL 中有没有办法做到这一点？

该时间必须从该行的插入时间开始计算，并且必须在 24 小时后将其删除。虽然我们可以写`cron`每分钟检查一次，但当添加的行不多时`cron`会运行而不用。有没有其他机制可以做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:32:35.367

如果您的 mySQL 版本 >= 5.1.6 ，则有一个很好的功能可以在这种情况下使用 - mySQL 事件。

这是一个使用示例 - [http://phpmaster.com/working-with-mysql-events/](http://phpmaster.com/working-with-mysql-events/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T14:10:35.147

是的，您必须定期检查。另一种方法是确定现有行是否为 24 小时旧。如果该行超过 24 小时，则不执行该操作，否则执行该操作。同时，您可以每 30 分钟运行一次 cron 来删除超过 24 小时的行。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-12-13T13:33:59.610

使用计划任务（或 SQL 计划程序，或您最喜欢的计划工具）在服务器上创建一个任务，以在您需要的任何时间间隔执行它。

# java - 在java中以数字形式获取日期

> ID：13860867
> 
> 赞同：-2
> 
> 时间：2012-12-13T13:29:33.410
> 
> 标签：java, date

我想在 Java 中以数字形式获取日期。

例如：今天是 2012 年 12 月 13 日。我想得到它的数字为 13.12.2012

我怎样才能实现它？任何帮助将非常感激。

PS我试过类似的东西：

```
Date d = new Date(); 
String date = d.toString().substring(0, 10); 
```

但得到的输出为：`Thu Dec 13`

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-12-13T13:31:04.400

```
DateFormat df = new SimpleDateFormat("dd.MM.yyyy");
String formattedDate = df.format(new Date()); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:33:09.703

```
Date d = new Date(); 
SimpleDateFormat sdf = new SimpleDateFormat("dd.MM.yyyy");
String res = format(d); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T13:33:42.450

您可以使用[SimpleDateFormat](http://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html)来实现

```
new java.text.SimpleDateFormat("dd.MM.yyyy").format(new Date()); 
```

# objective-c - 如何使用 presentModalViewController:animated 在视图控制器之外呈现模态视图控制器？

> ID：13860872
> 
> 赞同：0
> 
> 时间：2012-12-13T13:29:53.030
> 
> 标签：objective-c, ios, presentmodalviewcontroller, uiapplication

假设您有一个应用程序，您确定在其中始终`UINavigationController`显示一个，并且我需要从该控制器外部以模态方式显示另一个视图控制器（例如：因为我使用命令模式并且我不想给出对它的视图控制器的引用）。

有没有一种安全的方法来获取“根”导航控制器并调用它的`presentModalViewController:animated`方法？

我尝试使用`[UIApplication sharedApplication].keyWindow.rootViewController`，但[我发现它在警报期间为零](https://stackoverflow.com/a/13860101/345802)。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:42:37.840

您使用的是故事板还是单独的 xib？

如果您使用单独的 xib，那么您将设置`UINavigationController`in `applicationDidFinishLaunching`。

您可以使导航控制器成为应用程序委托的属性。

然后，您可以通过获取单例应用程序委托并从中获取导航控制器属性，从任何地方访问 UINavigationController。

# android - Android - 为另一个可绘制文件夹拍摄图像

> ID：13860873
> 
> 赞同：3
> 
> 时间：2012-12-13T13:29:55.163
> 
> 标签：android, drawable

对于我的应用程序，我需要具有 2 或 3 种不同尺寸的相同图像

或者我想知道是否可以从另一个可绘制文件夹中获取可绘制对象（即：可以使用具有不同分辨率的相同图像）

否则，我应该在每个可绘制文件夹（mdpi、hdpi、xhdpi）中多次复制相同的图像

例如：我在 hdpi 文件夹中有可绘制的 ima，我需要在 mdpi 和 xhdpi 文件夹中提供的越来越小的相同图像 => 我怎样才能得到它们，或者我必须在 hdpi 文件夹中复制我需要的图像？

对不起我的英语不好

谢谢你帮助我

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:06:31.347

我不确定我是否完全理解你，但就我而言，你应该逻辑地组织你的可绘制对象并将它们放到资产文件夹而不是资源中。然后，您可以根据需要使用它们。

另外我认为没有办法从另一个屏幕访问资源。

希望我理解你的帖子是正确的。

**EDIT**
API Level 15 引入了[Resources.getDrawableForDensity()](http://developer.android.com/intl/ru/reference/android/content/res/Resources.html#getDrawableForDensity%28int,%20int%29)方法。据我了解，没有办法在旧版本上启动它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:43:44.433

名为`mdpi, hdpi, xhdpi`随机设备的文件夹，我的意思是有随机屏幕的设备。从屏幕上考虑有 4 种类型的 android 设备。small, normal, large, extralarge，这就是为什么有这些文件夹，为什么你不想改变你的图片名称？如果它没有帮助你能解释你的问题更容易识别吗？我不确定我是否正常回答问题:)

问候海克·纳哈佩蒂安

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T13:56:53.127

以编程方式尝试这样..

```
InputStream is=this.getResources().getAssets().open("drawable.png");

is=this.getResources().openRawResource(R.raw.myDrawable); 
```

**或者**

如果您想使用该路径，请尝试以下操作：

```
private void showImage() {
    String uri = "drawable/icon";

    // int imageResource = R.drawable.icon;
    int imageResource = getResources().getIdentifier(uri, null, getPackageName());

    ImageView imageView = (ImageView) findViewById(R.id.myImageView);
    Drawable image = getResources().getDrawable(imageResource);
    imageView.setImageDrawable(image);
} 
```

但建议使用`R`参考：

```
int imageResource = R.drawable.icon; 

Drawable image = getResources().getDrawable(imageResource); 
```

[资源](https://stackoverflow.com/questions/2349652/android-open-resource-from-drawable-string)

`drawable-hdpi drawable-mdpi,drawable-ldpi`只是不同的文件夹，根据屏幕分辨率在图像质量之间产生差异。这个想法是将相同的图像放在具有不同分辨率的不同文件夹中......

# python - 如何在 python 中执行 json 请求

> ID：13860879
> 
> 赞同：0
> 
> 时间：2012-12-13T13:30:16.827
> 
> 标签：python, python-2.7

我想为`Pocket`（以前读过）开发一个python客户端。

我正在研究[它](http://getpocket.com/developer/docs/authentication)的 OAuth 过程。并被困在这里。如何执行此请求并获得响应？

```
POST /v3/oauth/request HTTP/1.1
Host: getpocket.com
Content-Type: application/json; charset=UTF-8
X-Accept: application/json

{"consumer_key":"1234-abcd1234abcd1234abcd1234",
"redirect_uri":"pocketapp1234:authorizationFinished"} 
```

我是 python 新手。这是我试过的。但我无法得到我想要的回应。

```
#!/usr/bin/env python

import urllib2
import json

def main():
    # Whatever structure you need to send goes here:
    jdata = json.dumps({"consumer_key":"1234-abcd1234abcd1234abcd1234", "redirect_uri":"pocketapp1234:authorizationFinished"})
    response = urllib2.urlopen("http://getpocket.com", jdata)
    the_page = response.read()
    print the_page

if __name__ == '__main__':
    main() 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T13:42:50.510

使用该[`requests`](http://docs.python-requests.org/en/latest/)库进行此类工作。（已编辑）

```
import requests
import json

data = {"consumer_key": "..."}
headers = {"content-type": "application/json"}
response = requests.post("http://getpocket.com", data=json.dumps(data), headers=headers)
response.json 
```

# authentication - 使用 django-social-auth 进行 Vkontakte 身份验证

> ID：13860885
> 
> 赞同：1
> 
> 时间：2012-12-13T13:30:51.247
> 
> 标签：authentication, django-socialauth, vk

我在使用 django-social-auth (https://github.com/omab/django-social-auth) 集成 Vkontakte 身份验证时遇到问题。我知道我已经使用 AUTHENTICATION_BACKENDS 以及 VKONTAKTE 的 API_KEYS 和 SECRETS 设置了所有内容，但它仍然无法正常工作。我还通过 Facebook 进行了身份验证，它工作正常，所以我知道我做得对。Django-Social-Auth 的文档说要添加一些 JS 脚本以使身份验证工作，但甚至没有提供有关脚本的一些有用信息。

有人可以提供一些有用的信息吗？如果你能提供一些关于如何使用 django-social-auth 实现 Vkontakte 身份验证的非常好的教程，那就太好了！

非常感谢你们！=)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-03T19:56:25.683

If the url you're using is something like `"http://localhost:8000/login/vkontakte/"`, try to change it to `"http://localhost:8000/login/vkontakte-oauth2/"`.

# android - Android：如何设置 myLocationOverlay 的中心间隔

> ID：13860887
> 
> 赞同：0
> 
> 时间：2012-12-13T13:30:54.107
> 
> 标签：android, maps, center

使用 myLocationOverlay，地图会不断地以当前位置为中心。我认为，如果地图每分钟左右重新定位一次，对于用户来说，如何更改间隔就足够了。

谢谢，马库斯

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-10T15:12:19.293

myLocationManager.requestLocationUpdates(LocationManager.GPS_PROVIDER, 500, 0, myLocationListener);

# sqlcmd - Sqlcmd 批处理脚本

> ID：13860892
> 
> 赞同：1
> 
> 时间：2012-12-13T13:31:08.600
> 
> 标签：sqlcmd

在我的 sqlserver 项目中，不同文件夹中有很多 .sql 文件，
例如 C:\username\EtlcontrolDB\scrip1.sql.........script10.sql
C:\username\configuration\scrip1.sql... ......script10.sql
C:\username\Think.......................

我的客户要求是，上面的文件夹包含通过单个批处理脚本执行的 sql 文件。从 .txt 文件中获取的 sql 文件名和文件路径输入以及 C:\username 这个对于每个用户都会有所不同，其余路径对所有用户都是相似的，我也想完全执行一些文件夹和一些文件夹特定的 sql 文件

谁能帮我解决这个问题？提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-26T14:07:14.173

单独使用 sqlcmd 无法做到这一点。

您必须使用诸如 python 之类的语言编写批处理脚本，该脚本为存储在指定目录中的每个 .sql 文件调用 sqlcmd。这是 Python 中的一个示例（未经测试！）：

```
import subprocess
from os import listdir
from os.path import isfile, join

def main():
    onlyfiles = [ f for f in listdir('C:\username\EtlcontrolDB\') if isfile(join('C:\username\EtlcontrolDB\',f)) ]
    for f in onlyfiles:
        sqlcmd(f)

def sqlcmd( file ):
    query = open(file).read()
    sqlcommand = 'sqlcmd -Q ' + query + ' -S "Myserver" -U UserName -P Password'
    subprocess.call(sqlcommand)

main() 
```

# c++ - 如果在循环中声明了一个指针变量，它是否与循环的每次传递都与相同的内存地址相关联？

> ID：13860893
> 
> 赞同：3
> 
> 时间：2012-12-13T13:31:10.137
> 
> 标签：c++, pointers, loops

如果您有一个变量，则有一个与该变量关联的内存地址，对于指针变量，该内存地址的“值”是对保存指针指向的实际数据的内存地址的引用.

所以如果我有：

```
for (int x = 0; x < 2; x++)
{
    char * a = (char*)malloc(20);
    printf("%p\r\n", &a);
    printf("%p\r\n", a);
} 
```

输出应该是这样的：

```
 00999999
    04427310
    00999999
    0442ECF0 
```

正如您所看到的，在每次循环过程中声明的指针变量的第一个和第三个内存地址保持不变，我的理解是，这是因为前一个变量超出范围而下一个可用地址是同一个地址。

这种概括可以扩展到循环内声明的所有变量还是有例外？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-12-13T13:33:23.213

不，您不能概括这一点，并且不能保证`a`（指针，而不是它指向的内容）的内存在每次迭代中都是相同的。在这种情况下，内存被重用，它很可能总是相同的，但没有任何保证。

另请注意，您有内存泄漏。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-13T13:44:18.797

这就是堆栈通常的工作方式。这与变量类型无关。当堆栈向下增长时，它可能看起来或多或少像这样

```
<top>
|                 |
+-----------------+
| argument1       |
| argument2       |
+-----------------+
| return address  |
+-----------------+
| saved register1 |
| saved register2 |
+-----------------+
| local variable1 | <- base register
| local variable2 |
| x               |
| a               |
|                 | <- stack pointer
<bottom> 
```

编译器将堆栈上的空间分配给相对于某个基址寄存器的每个变量。当循环范围结束时，空间 for`a`有效地变为“空闲”并且可以重用。

如果稍后有第二个循环或其他一些嵌套范围

```
for (int x = 0; x < 2; x++)
{
    char * a = (char*)malloc(20);
    printf("%p\r\n", &a);
    printf("%p\r\n", a);
}
...
for (int x = 0; x < 2; x++)
{
    char * b = (char*)malloc(20);
    printf("%p\r\n", &b);
    printf("%p\r\n", b);
} 
```

`b`可能会重用以前由 占用的空间`a`，因为 a 不再需要它。这一切都取决于编译器如何优化堆栈上的空间。

这就是它至少在编译后的 C 类语言中的工作方式。当然，还有其他内存模型。

# excel - 为什么 MS Excel 在 Worksheet_Change Sub 过程中崩溃并关闭？

> ID：13860894
> 
> 赞同：44
> 
> 时间：2012-12-13T13:31:14.613
> 
> 标签：excel, vba

当我在 Excel 工作表上运行 VBA 代码时，我遇到了 Excel 崩溃的问题。
我正在尝试在工作表更改中添加以下公式：

```
Private Sub Worksheet_Change(ByVal Target As Range)
   Worksheets("testpage").Range("A1:A8").Formula = "=B1+C1"
End Sub 
```

运行此代码时，我收到一条消息，提示“ **excel 遇到问题并需要关闭**”并且 excel 关闭。

[![在此处输入图像描述](../Images/b39ab79cc0ad1fc4fc96866a64dc96f1.png)](https://i.stack.imgur.com/EHO8K.png)

如果我在`Worksheet_Activate()`程序中运行代码，它可以正常工作并且不会崩溃

```
Private Sub Worksheet_Activate()
   Worksheets("testpage").Range("A1:A8").Formula = "=B1+C1"
End Sub 
```

但我真的需要它在`Worksheet_Change()`程序中工作。

有没有人在使用该`Worksheet_Change()`事件时遇到过类似的崩溃，任何人都可以指出正确的方向来解决这个问题吗？

* * *

## 回答 #1

> 赞同：81
> 
> 时间：2012-12-13T14:11:54.980

我在使用时推荐这个`Worksheet_Change`

1.  您*不需要*工作表名称。在工作表代码模块中，非限定范围引用引用该工作表。也就是说，使用`Me`限定词更清楚。如果您尝试使用另一张工作表，请使用该工作表限定范围引用。

2.  每当您使用事件时，如果您将数据写入任何单元格`Worksheet_Change`，请始终切换事件。`Off`这是必需的，以便代码不会重新触发 Change 事件，并进入可能的无限循环

3.  每当您关闭事件时，请使用错误处理将其重新打开，否则如果出现错误，代码将不会在下次运行。

尝试这个

```
Private Sub Worksheet_Change(ByVal Target As Range)
    On Error GoTo Whoa

    Application.EnableEvents = False

    Me.Range("A1:A8").Formula = "=B1+C1"

Letscontinue:
    Application.EnableEvents = True
    Exit Sub
Whoa:
    MsgBox Err.Description
    Resume Letscontinue
End Sub 
```

在处理此事件时，您可能还想知道一些其他的事情。

如果要确保在更改多个单元格时代码不会运行，请添加一个小检查

```
Private Sub Worksheet_Change(ByVal Target As Range)
    '~~> For Excel 2003
    If Target.Cells.Count > 1 Then Exit Sub

    '
    '~~> Rest of code
    '
End Sub 
```

`CountLarge`是在 Excel 2007 之后引入的，因为返回`Target.Cells.Count`的`Long`值可能会在 Excel 2007 中出错，因为总单元格计数增加。

```
Private Sub Worksheet_Change(ByVal Target As Range)
    '~~> For Excel 2007
    If Target.Cells.CountLarge > 1 Then Exit Sub
    '
    '~~> Rest of code
    '
End Sub 
```

要使用已更改的所有单元格，请使用此代码

```
Private Sub Worksheet_Change(ByVal Target As Range)
    Dim aCell As Range

    For Each aCell In Target.Cells
        With aCell
            '~~> Do Something
        End With
    Next
End Sub 
```

要检测特定单元格中的变化，请使用`Intersect`. 例如，如果 Cell 发生更改`A1`，则以下代码将触发

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Not Intersect(Target, Me.Range("A1")) Is Nothing Then
        MsgBox "Cell A1 was changed"
        '~~> Your code here
    End If
End Sub 
```

要检测特定范围内的变化，请`Intersect`再次使用。例如，如果 range 发生更改`A1:A10`，则以下代码将触发

```
Private Sub Worksheet_Change(ByVal Target As Range)
    If Not Intersect(Target, Me.Range("A1:A10")) Is Nothing Then
        MsgBox "one or more Cells in A1:A10 range was changed"
        '~~> Your code here
    End If
End Sub 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2013-01-08T06:28:43.710

Excel 崩溃了，而不是 VBA 函数。
事件未被禁用，调用堆栈被 OnChange 事件的无限循环填充。
一个有助于发现此类错误的小建议：在事件的第一行设置一个断点，然后按 F8 逐步执行它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-08-17T17:52:54.023

这个解决方案也很好：

```
Option Explicit
Private Busy As Boolean
Private Sub Worksheet_Change(ByVal Target As Range)
    If Not Busy Then
        Busy = True
        Range("A1:A8").Formula = "=B1+C1"
        Busy = False
    End If
End Sub 
```

# javascript - JavaScript 中的文档是什么，它的作用域是什么？

> ID：13860898
> 
> 赞同：1
> 
> 时间：2012-12-13T13:31:17.600
> 
> 标签：javascript, dom

```
var document = "temp";

function showDocument()
{
    alert(document); // temp or HTML DOM Document
} 
```

它为我显示了“HTML DOM 文档”，应该是这样。它是一个对象、保留关键字、只读对象吗？

如果它是一个对象，它应该是可编辑的。如果它是保留关键字，JavaScript 应该抛出错误/异常。如果它是只读的，我该如何修改只能通过它访问的 DOM 本身`document`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T13:31:57.173

`window`它是全局 ( ) 对象的只读属性。它的值是一个本地对象，代表当前加载到窗口中的 HTML/XML/任何文档。

要修改 DOM，请使用[DOM 操作 API。](https://developer.mozilla.org/en-US/docs/DOM)

*编辑*——澄清一下，`window`对象的“文档”属性（或者，如果您愿意，称为“文档”的全局变量）**本身**是不可变的，它的值不能被 JavaScript 更改。然而，该值是对一个对象的*引用*，一个以各种方式可变的对象。

# express - Angular 和 Express 路由

> ID：13860899
> 
> 赞同：40
> 
> 时间：2012-12-13T13:31:21.840
> 
> 标签：express, angularjs

我经历了许多 Angular-express 种子，并弄清楚了它们是如何工作的。我遇到的问题是：**1）。**我想使用 ejs-locals 进行模板化。**2）。**如何正确配置服务器端和客户端的路由。而且，当输入 URL 时`/about`，不要生成错误：`cannot /get`

**角度*app.js***包含：

```
// angular stuff

$routeprovider.when('/', {
 templateUrl: 'index',
 controller: IndexCtrl
});
$routeprovider.when('/about', {
 templateUrl: 'partials/about',
 controller: IndexCtrl
}); 
```

**快递应用，js**包含：

```
app.get('/', routes.index);
app.get('/about', routes.about); 
```

**路由文件夹**包含“index.js”：

```
exports.index = function(req, res){
  res.render('index',{name:"Hello"});
};

exports.about = function (req, res) {
  res.render('partials/about');
}; 
```

**视图文件夹**包含`index.ejs`：

```
<!--HTML head/navigation bar here-->
<div ng-view></div> 
```

和里面的意见文件夹是一个`partials`文件夹：（**Views/partials/**）

**索引.ejs：**

```
 <h1>Index</h1> 
```

**关于.ejs：**

```
<h1>About</h1> 
```

* * *

## 回答 #1

> 赞同：31
> 
> 时间：2012-12-13T15:07:20.717

将这些路由添加到您的快速服务器

```
app.get('/partials/:filename', routes.partials);
app.use(routes.index); 
```

然后在`routes.js`

```
exports.partials = function(req, res){
  var filename = req.params.filename;
  if(!filename) return;  // might want to change this
  res.render("partials/" + filename );
};

exports.index = function(req, res){
  res.render('index', {message:"Hello!!!"});
}; 
```

这将确保 express 在向`partials/index`和发出请求时返回呈现的模板`partials/about`。

这是一个要点：[https ://gist.github.com/4277025](https://gist.github.com/4277025)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-12-20T09:05:56.007

我就是这样做的。我正在使用 Jade，但 Ejs 会类似：

**应用程序.js**

```
// Routes
app.get('/', routes.index);
app.get('/partials/:name', routes.partials); 
```

我的模板存储在**/views/partials**：

```
app.set('views', __dirname + '/views'); 
```

客户端您现在可以使用 Angular 的 $routeProvider 来加载部分：

```
/*global define */

define([
   'angular',
   'controllers/aController',
   'controllers/bController'],
   function (angular, aController, bController) {
    'use strict';

    return angular.module('controllers', [], ['$controllerProvider', '$routeProvider',
        function ($controllerProvider, $routeProvider) {
            $controllerProvider.register('AController', ['$scope', aController]);
            $controllerProvider.register('BController', ['$scope', bController]);
            // routes
            $routeProvider.when('/A', {templateUrl: 'partials/A', controller: aController});
            $routeProvider.when('/B', {templateUrl: 'partials/B', controller: bController});
            $routeProvider.otherwise({redirectTo: '/A'});
        }]);
    }
); 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2014-05-01T08:40:00.800

我在使用玉和角度时遇到了一些麻烦，这对我有用。

目录结构：

```
public
  |-js
  |-css
  |-views
    |-main
      -main.jade
    |-auth
      -login.jade
server
  |-includes
    -layout.jade
  |-views
    -index.jade
server.js 
```

然后在用于路由的 server.js 配置中如下所示：

```
app.configure(function(){
    app.set('views', __dirname + '/server/views');
    app.set('view engine', 'jade');
})
// server side route for the partials files
app.get('/views/*', function(req, res){
    res.render('../../public/views/' + req.params);
})

// everything handled by this route
app.get('*', function(req, res){
    res.render('index');
}) 
```

然后角度路线看起来像这样：

```
$routeProvider.when('/', {
    templateUrl: '/views/main/main',    // gets main.jade from server
    controller: 'mainCtrl'
}) 
```

我的`index.jade`样子是这样的：

```
extends ../includes/layout

block main-content
    .navbar.navbar-inverse.navbar-fixed-top
        div(ng-include="'/views/account/navbar-login'")
    section.content
        div(ng-view) 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-09-09T08:31:38.497

你可以试试这样的

```
const path = require("path");

/* For serving static HTML files */
app.use(function(req, res, next) {
    res.sendFile(path.resolve(__dirname + '/dist/index.html'));
});

/* For ejs, jade/pug engines */
app.use(function(req, res, next) {
    res.render(path.join(__dirname, '/dist/index.pug'));
}); 
```

# c++ - 与 Poco Net 的链接错误

> ID：13860906
> 
> 赞同：3
> 
> 时间：2012-12-13T13:31:36.377
> 
> 标签：c++, xcode, linker, poco-libraries

我被困在尝试使用 POCO 库构建一些代码。

当我尝试构建时，我得到以下信息

```
Undefined symbols for architecture x86_64:
  "Poco::Net::SocketAddress::SocketAddress(std::__1::basic_string<char, std::__1::char_traits<char>, std::__1::allocator<char> > const&, unsigned short)", referenced from:
      .....
ld: symbol(s) not found for architecture x86_64 
```

现在问题来了：我正在链接 -lPocoFoundation -lPocoNet -lPocoUtil

我错过了什么？

（我应该说我在 Mac OS X 10.8.2 上使用 clang 编译

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-16T20:57:21.807

我遇到了同样的问题，Leezi 写的对我来说效果很好。我使用的是**1.4.6 版。**

我唯一需要做的就是再次编译 Poco 库（因为它是为支持 C++11 的 clang 而编译的）：

```
./configure --config=Darwin64-gcc
make
sudo make install 
```

您可以做的另一种方法是编译具有 C++11 支持的 Poco 库，但这有点复杂。首先，我必须在 Foundation 中修改两个源文件：

**基础/src/NumberParser.cpp：**

```
127c127
<   return std::sscanf(s.c_str(), "%"I64_FMT"d%c", &value, &temp) == 1;
---
>   return std::sscanf(s.c_str(), "%" I64_FMT "d%c", &value, &temp) == 1;
144c144
<   return std::sscanf(s.c_str(), "%"I64_FMT"u%c", &value, &temp) == 1;
---
>   return std::sscanf(s.c_str(), "%" I64_FMT "u%c", &value, &temp) == 1;
161c161
<   return std::sscanf(s.c_str(), "%"I64_FMT"x%c", &value, &temp) == 1;
---
>   return std::sscanf(s.c_str(), "%" I64_FMT "x%c", &value, &temp) == 1; 
```

**基础/src/DirectoryWatcher.cpp：**

```
51a52
> #include <unistd.h> 
```

我也修改了**build/config/Darwin-clang**文件：

```
55,56c55,56
< CXXFLAGS        = $(ARCHFLAGS) -Wall -Wno-sign-compare
< LINKFLAGS       = $(ARCHFLAGS)
---
> CXXFLAGS        = $(ARCHFLAGS) -Wall -Wno-sign-compare -std=c++11 -stdlib=libc++
> LINKFLAGS       = $(ARCHFLAGS) -stdlib=libc++
80c80
< SYSLIBS  = -ldl
---
> SYSLIBS  = -ldl -lstdc++ 
```

我只需要静态库，所以我只编译了：

```
./configure --static --omit=Data --config=Darwin64-clang --poquito -no-tests -no-samples -no-shared
make clean
make
sudo make install 
```

如果您也需要样本和测试，那么我认为您应该制作一个 xcode 项目并进行设置或深入到 makefile 中......我希望这会有所帮助......

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-12-20T12:04:54.053

我也有同样的问题。我发现更改 xcode 构建设置很有用。将 C++ 标准库从 libc++（支持 C++ 11 的 LLVM C++ 标准库）更改为 libstdc++（GNU C++ 标准库）。然后它将通过构建。

# php - PHP CURL - 抓取时存储和使用 cookie 的问题

> ID：13860915
> 
> 赞同：1
> 
> 时间：2012-12-13T13:31:51.077
> 
> 标签：php, html, cookies, curl, web-scraping

我一直在尝试编写一个脚本来检索给定关键字的 Google 趋势结果。请注意，我并没有试图做任何恶意的事情，我只是希望能够自动化这个过程并每天运行几次。

在调查了 Google 趋势页面后，我发现可以使用以下 URL 获得该信息：

[http://www.google.com/trends/trendsReport?hl=en-GB&q=keyword&cmpt=q&content=1](http://www.google.com/trends/trendsReport?hl=en-GB&q=keyword&cmpt=q&content=1)

您可以从浏览器多次请求该信息而不会出现问题，但如果您在 4 或 5 次请求后尝试使用“隐私模式”，则会显示以下信息：

> 检测到错误 您已达到配额限制。请稍后再试。

这让我觉得cookies是必需的。所以我写了我的脚本如下：

```
$cookiefile = $siteurl . '/wp-content/plugins/' . basename(dirname(__FILE__)) . '/cookies.txt';

$url = 'http://www.google.com/trends/trendsReport?hl=en-GB&q=keyword&cmpt=q&content=1'; 
$ch = curl_init();      

curl_setopt($ch, CURLOPT_URL, $url);
curl_setopt($ch, CURLOPT_COOKIEJAR, $cookiefile);
curl_setopt($ch, CURLOPT_COOKIEFILE, $cookiefile);
curl_setopt($ch, CURLOPT_USERAGENT, 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-US; rv:1.9.0.8) Gecko/2009032609 Firefox/3.0.8');
curl_setopt($ch, CURLOPT_RETURNTRANSFER, 1);
curl_setopt($ch, CURLOPT_HEADER, 1);        
curl_setopt($ch, CURLOPT_FOLLOWLOCATION, 1);

$x='error';
while (trim($x) != ''  ){
     $html=curl_exec($ch);
     $x=curl_error($ch);
}

echo  "test cookiefile contents = ".file_get_contents($cookiefile)."<br />";
echo $html; 
```

但是，我无法将任何内容写入我的 cookie 文件。所以我不断收到错误消息。谁能看到我在哪里出错了？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:36:54.703

我很确定您的 cookie 文件应该存在，然后才能与 curl 一起使用。尝试：

```
$h = fopen($cookiefile, "x+"); 
```

# vbscript - 在 Toad Data Modeller 中运行 VBS 脚本

> ID：13860918
> 
> 赞同：3
> 
> 时间：2012-12-13T13:32:02.640
> 
> 标签：vbscript, scheduler, toad

我想知道是否有人可以帮助我。

我们正在设置一个脚本，它将遍历网络驱动器上的每个文件夹并删除特定类型的任何文件，例如`.pdf`，在文件夹中存在超过 300 天的文件。

该脚本是用 VBS 编写的，但我想使用 TOAD 数据建模器调度程序来执行该脚本。我们使用 TOAD 来安排很多查询，我希望将其保持在相同的架构下，以便更易于维护。我可以看到 TOAD 调度程序中有两个可能有用的对象：“运行程序”或“运行脚本”。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-18T11:08:23.147

我对“蟾蜍”一无所知，但“运行程序”听起来很棒。只需调用 cscript.exe 并将您的 vbs 作为参数。那应该运行你的vbs。

# iphone - Iphone：从 Sqlite3 数据库的表视图中加载有限的记录

> ID：13860919
> 
> 赞同：2
> 
> 时间：2012-12-13T13:32:05.270
> 
> 标签：iphone, objective-c

我在特定用户的数据库中有 100 多条记录。现在我只想显示其中的前 30 条，当按下“更多”按钮时，它们下方会出现 30 条以上的记录。如何在 iPhone 应用程序中执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:44:23.167

您可以使用 SQL 查询来实现您的目标

```
-(NSMutableArray *)SelectResult:(int)offset
{

    NSMutableArray *arrdata;
arrdata=[[NSMutableArray alloc]init];
sqlite3 *database;

NSString *databasePath = [self getDBPath];

if(sqlite3_open([databasePath UTF8String], &database) == SQLITE_OK) {

    NSString *sqlQuery=[NSString stringWithFormat:@"Select * from TableName where RecordId > %d and RecordId <=%d",offset,offset+30];

    sqlite3_stmt *compiledStatement;
    compiledStatement=nil;

    if(sqlite3_prepare_v2(database, [sqlQuery UTF8String], -1, &compiledStatement, NULL) == SQLITE_OK)
    {
        while(sqlite3_step(compiledStatement) == SQLITE_ROW)
        {
            if ((char *)sqlite3_column_text(compiledStatement,0)!=0)
            {
                NSMutableDictionary *temData = [[NSMutableDictionary alloc] init];

                int pKey = sqlite3_column_int(compiledStatement,0);

                [temData setValue:[NSString stringWithFormat:@"%d",pKey] forKey:@"RecordId"];
                [arrdata addObject:temData];
            }
        }
    }
    sqlite3_finalize(compiledStatement);
}
sqlite3_close(database);

return arrdata;
} 
```

请调用此方法并将**偏移量作为整数传递**，它将为您提供从偏移量记录的 30

比如**offset = 0 然后 1 到 30** **offset = 30 然后 31 到 60**等等....

希望对你有帮助

快乐编码

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T13:46:35.240

只需使用 a`NSMutableArray`来保存您的数据。`datasource`如果要显示更多记录，请确保在您的表格视图中显示一个额外的单元格（带有“更多”消息）。

然后，`didSelectRowAtIndexPath`您可以通过从数据库中添加其他记录来修改表视图的数据数组。

您可以根据数据数组的大小动态生成 SQL 查询。

# python - 使用 Python 将 JSON *files* 转换为 CSV *files*（空闲）

> ID：13860933
> 
> 赞同：0
> 
> 时间：2012-12-13T13:33:01.093
> 
> 标签：python, json, csv, arcgis, arcpy

这个问题搭载了我昨天发布的一个[问题。](https://stackoverflow.com/questions/13848480/convert-json-to-csv-using-python-idle)实际上，我的代码可以正常工作。我从小处着手。*我为 Python 代码之外*的多个 JSON 文件切换了Python 代码*中*的 JSON 。我实际上让它工作得很好。然后发生了某种灾难，我的代码丢失了。

 *我花了几个小时试图重新创建它无济于事。我实际上正在使用 arcpy（ArcGIS 的 Python 模块），因为稍后我将使用它来执行一些空间分析，但我认为您不需要了解太多关于 arcpy 的知识来帮助我完成这部分（我不认为，但它可能会有所帮助）。

这是我最近尝试的一个版本，但它不起作用。我将我的实际路径切换为“路径名”。*实际上，直到*我尝试填充 CSV 中的行（它们是纬度和经度值。它*成功*地在 CSV 文件中写入纬度/经度标题）之前，我已经完成了所有工作。所以显然下面的任何东西都`dict_writer.writerows(openJSONfile)`不起作用：

```
import json, csv, arcpy
from arcpy import env

arcpy.env.workspace = r"C:\GIS\1GIS_DATA\Pathname"

workspaces = arcpy.ListWorkspaces("*", "Folder")
for workspace in workspaces:

    arcpy.env.workspace = workspace
    JSONfiles = arcpy.ListFiles("*.json")

    for JSONfile in JSONfiles:

        descJSONfile = arcpy.Describe(JSONfile)
        JSONfileName = descJSONfile.baseName

        openJSONfile = open(JSONfile, "wb+")
        print "JSON file is open"

        fieldnames = ['longitude', 'latitude']
        with open(JSONfileName+"test.csv", "wb+") as f:
            dict_writer = csv.DictWriter(f, fieldnames=fieldnames)
            dict_writer.writerow(dict(zip(fieldnames, fieldnames)))
            dict_writer.writerows(openJSONfile)

        #Do I have to open the CSV files? Aren't they already open?
        #openCSVfile = open(CSVfile, "r+")

    for row in openJSONfile:
         f.writerow( [row['longitude'], row['latitude']] ) 
```

任何帮助是极大的赞赏！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T13:49:48.697

您实际上并未加载 JSON 文件。
您正在尝试从打开的文件中写入行，而不是从 json 中写入行。

您将需要添加如下内容：

```
rows = json.load(openJSONfile) 
```

然后：

```
dict_writer.writerows(rows) 
```

你应该删除最后两行，因为所有的 csv 写入都是在你到达它们之前完成的，并且它们在循环之外，所以它们只会对最后一个文件起作用（它们不写任何东西，因为那里此时文件中没有任何行）。

另外，我看到您正在使用`with open...`打开 csv 文件，而不是 json 文件。
您应该始终使用它，而不是`open()`不使用该`with`语句。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-13T16:23:52.097

我不能说我确定出了什么问题，但是将所有 .JSON 文件与我的代码放在同一个文件夹中（并适当地更改我的代码）是可行的。我将不得不继续调查为什么在尝试读取其他文件夹时，它给了我错误：

```
IOError: [Errno 2] No such file or directory: 
```

现在，以下代码可以工作:)

```
import json, csv, arcpy, os
from arcpy import env

arcpy.env.workspace = r"C:\GIS\1GIS_DATA\MyFolder"

JSONfiles = arcpy.ListFiles("*.json")
print JSONfiles

for JSONfile in JSONfiles:
    print "Current JSON file is: " + JSONfile

    descJSONfile = arcpy.Describe(JSONfile)
    JSONfileName = descJSONfile.baseName

    with open(JSONfile, "rb") as openJSONfile:
        rows = json.load(openJSONfile)      
        print "JSON file is loaded"

    fieldnames = ['longitude', 'latitude']
    with open(JSONfileName+"test.csv", "wb") as f:
        dict_writer = csv.DictWriter(f, fieldnames = fieldnames)
        dict_writer.writerow(dict(zip(fieldnames, fieldnames)))
        dict_writer.writerows(rows)
        print "CSVs are Populated with headers and rows from JSON file.", '\n' 
```

感谢大家的帮助。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T14:16:41.363

你应该使用一个`csv.DictWriter`对象来做所有事情。这是与您的代码类似的东西，因为我没有它，所以删除了所有 Arc 东西，这在我测试时有效：

```
import json, csv

JSONfiles = ['sample.json']

for JSONfile in JSONfiles:

    with open(JSONfile, "rb") as openJSONfile:
        rows = json.load(openJSONfile)

    fieldnames = ['longitude', 'latitude']
    with open(JSONfile+"test.csv", "wb") as f:
        dict_writer = csv.DictWriter(f, fieldnames=fieldnames)
        dict_writer.writeheader()
        dict_writer.writerows(rows) 
```

没有必要写出每一行，因为您的 json 文件是行字典列表（假设它是您嵌入链接问题的内容）。*

# ruby-on-rails - API 和 XML 数据轨 3 Nokogiri

> ID：13860934
> 
> 赞同：0
> 
> 时间：2012-12-13T13:33:01.467
> 
> 标签：ruby-on-rails, ruby, xml, nokogiri

这是我第一次尝试从 API 取回数据，并将数据输出到视图。

我想将 ISBN 号放入搜索表单中，并使用[http://isbndb.com/](http://isbndb.com/)获取该特定书籍的数据。这是我到目前为止所拥有的：

控制器：

```
require 'open-uri'
class BookController < ApplicationController
  def searchbook
  resp = open("http://isbndb.com/api/books.xml?access_key=#{'API KEY HERE'}&results=texts&index1=isbn&value1=#{params[:isbn]}")
  doc = Nokogiri.XML(resp.read)
  # ... process response here

 end
end 
```

形式：

```
<%= form_tag({:controller => 'book', :action => 'searchbook'}, {:method => 'get'}) do |select| %>
<%= label_tag :isbn, "Enter ISBN Number" %>
<%= text_field_tag :isbn, params[:isbn] %>
<%= submit_tag "Search" %>
<% end %> 
```

要返回的 XML

```
 <?xml version="1.0" encoding="UTF-8"?>
  <ISBNdb server_time="2005-07-29T03:02:22">
  <BookList total_results="1" page_size="10" page_number="1" shown_results="1">
  <BookData book_id="paul_laurence_dunbar" isbn="0766013502">
  <Title>Paul Laurence Dunbar</Title>
  <TitleLong>Paul Laurence Dunbar: portrait of a poet</TitleLong>
  <AuthorsText>Catherine Reef</AuthorsText>
  <PublisherText publisher_id="enslow_publishers">Berkeley Heights, NJ: Enslow Publishers, c2000.</PublisherText>
  <Summary>A biography of the poet who faced racism and devoted himself to depicting the black experience in America.</Summary>
  <Notes>"Works by Paul Laurence Dunbar": p. 113-114\. Includes bibliographical references (p. 124) and index.</Notes>
  <UrlsText></UrlsText>
  <AwardsText></AwardsText>
  </BookData>
</BookList>
  </ISBNdb> 
```

如何处理 XML 请求或者我可以阅读什么来了解如何处理？

在哪里可以查看控制台中返回的数据（如果有）？我什至不确定这是否正在做任何事情，但是在我的表单中单击“搜索”后，我被带到了 searchbook 操作，该操作目前是一个空白页面。

我可能离整个答案还有很长的路要走，但这是我第一次这样做。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T12:44:27.793

我强烈建议通过将 ISBNdb 相关代码移至其自己的模型来简化您的控制器。一种好方法是通过[HTTParty](http://httparty.rubyforge.org/)：

```
class ISBNdb
  include HTTParty

  base_uri "http://isbndb.com/api"
  @key = "API_KEY_HERE"

  def self.get_book(isbn)
    params = {'value1' => isbn, 'results' => 'texts', 'index1' => 'isbn', 'access_key' => @key}
    get('/books.xml', :query => params)['ISBNdb']['BookList']['BookData']
  end
end 
```

然后，在您的控制器中，您可以像这样使用它：

```
book = ISBNdb.get_book('1934356166')
puts book['Title'] #=> "Agile Web Development with Rails" 
```

如您所见，HTTParty 会为您解析响应，因此您可以像访问哈希一样访问它。

此解决方案使您的控制器保持简单，并且如果您需要其他功能，还可以方便地为其他 API 调用添加方法。这就是实践中的[单一职责原则](http://en.wikipedia.org/wiki/Single_responsibility_principle)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-14T16:34:40.350

解析 XML 很简单：

```
require 'nokogiri'

doc = Nokogiri::XML(<<EOT)
  <?xml version="1.0" encoding="UTF-8"?>
  <ISBNdb server_time="2005-07-29T03:02:22">
  <BookList total_results="1" page_size="10" page_number="1" shown_results="1">
  <BookData book_id="paul_laurence_dunbar" isbn="0766013502">
  <Title>Paul Laurence Dunbar</Title>
  <TitleLong>Paul Laurence Dunbar: portrait of a poet</TitleLong>
  <AuthorsText>Catherine Reef</AuthorsText>
  <PublisherText publisher_id="enslow_publishers">Berkeley Heights, NJ: Enslow Publishers, c2000.</PublisherText>
  <Summary>A biography of the poet who faced racism and devoted himself to depicting the black experience in America.</Summary>
  <Notes>"Works by Paul Laurence Dunbar": p. 113-114\. Includes bibliographical references (p. 124) and index.</Notes>
  <UrlsText></UrlsText>
  <AwardsText></AwardsText>
  </BookData>
</BookList>
  </ISBNdb>
EOT

isbn_data = doc.search('BookData').map{ |book_data|

  hash = {}

  %w[ book_id isbn ].each do |p|
    hash[p.downcase.to_sym] = book_data[p]
  end

  %w[ Title TitleLong AuthorsText PublisherText Summary ].each do |t|
    hash[t.downcase.to_sym] = book_data.at(t).text
  end

  hash
}

pp isbn_data 
```

哪个输出：

```
[{:book_id=>"paul_laurence_dunbar",
  :isbn=>"0766013502",
  :title=>"保罗·劳伦斯·邓巴",
  :titlelong=>"保罗·劳伦斯·邓巴：诗人肖像",
  :authorstext=>"凯瑟琳礁",
  :publishertext=>"新泽西州伯克利高地：恩斯洛出版社，c2000。",
  ：总结=>
   “一本直面种族主义并致力于描绘美国黑人经历的诗人的传记。”}]

```

此代码基于您可能会接收多个`<BookData>`块的想法，因此它返回一个哈希数组。如果您只有一种用途：

```
hash = {}
book_data = doc.at('BookData')

%w[ book_id isbn ].each do |p|
  hash[p.downcase.to_sym] = book_data[p]
end

%w[ Title TitleLong AuthorsText PublisherText Summary ].each do |t|
  hash[t.downcase.to_sym] = book_data.at(t).text
end

pp hash 
```

输出现在看起来像：

```
{:book_id=>"paul_laurence_dunbar",
 :isbn=>"0766013502",
 :title=>"保罗·劳伦斯·邓巴",
 :titlelong=>"保罗·劳伦斯·邓巴：诗人肖像",
 :authorstext=>"凯瑟琳礁",
 :publishertext=>"新泽西州伯克利高地：恩斯洛出版社，c2000。",
 ：总结=>
  “一本直面种族主义并致力于描绘美国黑人经历的诗人的传记。”}

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-12-13T13:52:21.483

当您正在寻找正确方向的基本指示时，以下是我认可的几点。

1) 对于通过 HTTP 获取任何源，通常使用**HTTP 客户端**gem。我可以推荐[Excon](https://github.com/geemus/excon)和被低估的[HTTP Client](https://github.com/nahi/httpclient) gem，尽管你会发现更多的选项，例如在 Ruby 工具箱中。

2) 要深入了解 API 响应，您可以例如只引发输出结果的异常。我从 RailsCast 学到了这项技术。

```
# Example with Curb
http = Curl.get("http://www.google.com/")
body = http.body_str

# Raise an exception displaying the value you want to see
raise body.inspect
# or in nicely structured yaml format
raise body.to_yaml 
```

您可以在任何地方使用这种技术，对我来说，当您想查看刚刚发送到某个控制器操作的参数等时，它会派上用场。

甚至与返回值交互的方法（例如尝试一些方法调用）可能来自最近的[**better_errors**](https://github.com/charliesome/better_errors) gem。它附带一个控制台，您始终可以通过浏览器与当前环境进行交互。

# oracle - 在oracle中执行存储过程

> ID：13860935
> 
> 赞同：2
> 
> 时间：2012-12-13T13:33:03.400
> 
> 标签：oracle, plsql

我需要`uu`根据通过提示传递的值来获取输出

```
create or replace procedure chklg( uu out logn.username%TYPE
                                 , pass in logn.password%TYPE)
is
begin
select username into uu from logn where password=pass;
end; 
```

我尝试以这种方式执行上述过程：

```
begin 

chklg(:pass);

end 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:36:41.973

根据定义，过程不返回任何内容。您正在寻找一个[*功能*](http://docs.oracle.com/cd/E11882_01/server.112/e26088/functions256.htm#SQLRF06181)。

```
create or replace function chklg ( p_pass in logn.password%TYPE
          ) return varchar2 is -- assuming that logn.username%TYP is a varchar2

   l_uu logn.username%type;

begin
   select username into l_uu from logn where password = p_pass;
   return l_uu;
-- If there-s no username that matches the password return null.
exception when no_data_found then
   return null;
end; 
```

我对此有点担心，因为它看起来好像您将密码存储为纯文本。这不是最佳做法。

您应该在用户名旁边存储密码的盐渍和胡椒散列，然后对密码应用相同的盐渍、胡椒和散列，并从数据库中选择*散列。*

您可以通过以下两种方式之一执行该功能：

```
select chklg(:pass) from dual 
```

或者

```
declare
   l_pass logn.password%type;
begin
   l_pass := chklg(:pass);
end;
/ 
```

* * *

为了完整起见，弗兰克施密特在评论中提出了一个*非常*有效的观点。除了您以非常危险的方式存储密码之外，如果两个用户具有相同的密码，会发生什么情况？

您将在`SELECT INTO ...`. 这意味着太多的行被返回给变量。如果您也传递用户名会更好。

这可能会使您的函数看起来像下面这样

```
create or replace function chklg ( 
         p_password_hash in logn.password%type
       , p_username in logn.username%type
          ) return number

   /* Authenticate a user, return 1/0 depending on whether they have
      entered the correct password.
      */

   l_yes number := 0;

begin

   -- Assumes that username is unique.
   select 1 into l_yes 
     from logn
    where password_hash = p_password_hash
      and username = p_username;

   return l_yes;

-- If there-s no username that matches the password return 0.
exception when no_data_found then
   return 0;
end; 
```

* * *

如果您只想使用一个过程（根本没有真正的理由这样做，因为它不必要地限制了您；您没有执行任何 DML），那么您可以获得输出参数，但您必须为过程提供一个参数它可以填充。

在你的情况下，它看起来像这样。

```
declare
   l_uu logn.username%type;
begin 
   chklg(l_uu, :pass);
   dbms_output.put_line(l_uu);
end; 
```

# php - Magento 无法使用正确的用户名和密码登录管理员

> ID：13860936
> 
> 赞同：7
> 
> 时间：2012-12-13T13:33:06.753
> 
> 标签：php, magento, magento-1.7

我刚刚安装`Magento(1.7.0.2)`在我的本地主机（LAMP）上。现在安装后，当我想进入管理面板时，它要求我输入用户名和密码。虽然我使用了正确的用户名和密码，但它仍然显示`Invalid User Name or Password`。我明确了我的浏览器 cookie，但它再次向我显示了与登录相同的问题。我在谷歌上搜索并得到了一些我可以使用`http://127.0.0.1`而不是登录的东西`http://localhost`. 但它仍然不适合我。我已经在谷歌上搜索了一整天，正如 pe 一些博客所说，只需在 varien.php 文件中进行一些行注释，我也在 varien.php 文件中进行了评论，但它仍然不适合我（因为这里我使用的是 1.7\. 0.2 和他们在博客中提到的 1.6.X ）。我今天已经安装了 magento 4 次，但我仍然一次又一次地面临同样的问题。有人可以告诉我如何解决这个问题吗？任何帮助和建议都将是非常可观的。

* * *

## 回答 #1

> 赞同：48
> 
> 时间：2013-04-10T11:13:02.573

如果您无法使用正确的用户名和密码登录，这里有一些想法。如果您使用 google chrome 安装 magento，请使用 firefox 打开 magento 并编辑`app/code/core/Mage/Core/Model/Session/Abstract/Varien.php`您的 magento 目录中的文件并注释以下行

```
 $cookieParams = array(
            'lifetime' => $cookie->getLifetime(),
            'path'     => $cookie->getPath()
            // 'domain'   => $cookie->getConfigDomain(),
            // 'secure'   => $cookie->isSecure(),
            // 'httponly' => $cookie->getHttponly()
        ); 
```

并使用您的凭据登录。我希望这对您有用！！！

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2014-02-17T09:54:47.560

执行以下步骤：
1：通过： **xampp\htdocs\magento\app\code\core\Mage\Core\Model\Session\Abstract\**
2：打开**Varien.php**文件
3：将注释行号从**87 到 104** 保存并尝试登录...

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-04-24T04:17:42.190

```
 If you are suffering to get logged in with the correct username and password. replace the code with the New code 

    Original code:-
    $cookieParams = array(
                'lifetime' => $cookie->getLifetime(),
                'path'     => $cookie->getPath(),
                'domain'   => $cookie->getConfigDomain(),
                'secure'   => $cookie->isSecure(),
                 'httponly' => $cookie->getHttponly()
            );

    New Code:-
     $cookieParams = array(
                'lifetime' => $cookie->getLifetime(),
                'path'     => $cookie->getPath()
    /*,
                'domain'   => $cookie->getConfigDomain(),
                'secure'   => $cookie->isSecure(),
                 'httponly' => $cookie->getHttponly() */
            );
File Path :-app/code/core/Mage/Core/Model/Session/Abstract/Varien.php 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-19T11:26:08.150

**正如詹姆斯所说。这种方法对我有用。这是一个更好的选择，而不是更改代码。它适用于 127.0.0.1 以及 localhost 以及删除 app/etc/local.xml 之后。删除浏览器 cookie。在浏览器中运行magento的安装

本地主机/magento/index.php.install.htm

并再次设置您的用户名和密码。登录到您的管理面板。我不必删除 magento 的数据库，所以我的数据是安全的。****

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-09-04T20:35:22.737

1.打开`Varien.php`文件位置`app\code\core\Mage\Core\Model\Session\Abstract`。

2.找到并评论下面的代码

```
if (!$cookieParams['httponly']) {
       unset($cookieParams['httponly']);
       if (!$cookieParams['secure']) {
           unset($cookieParams['secure']);
           if (!$cookieParams['domain']) {
               unset($cookieParams['domain']);
           }
       }
   }

   if (isset($cookieParams['domain'])) {
       $cookieParams['domain'] = $cookie->getDomain();
   } 
```

来源 [http://infynet.wordpress.com/2013/07/17/admin-login-fail-in-magento/](http://infynet.wordpress.com/2013/07/17/admin-login-fail-in-magento/)

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-12-13T18:45:29.133

如果您无法登录，我会这样做：

1.  设置您的主机文件以将 www.localhost.com 重定向到 127.0.0.1
2.  删除 app/etc/local.xml
3.  使用 www.localhost.com 作为 URL 重新安装 Magento（跳过 URL 验证）
4.  保存用户名和密码
5.  清除 cookie 并重试

正如你提到的修改核心代码，我推荐 3 号（从来都不是一个好主意）

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2015-10-22T07:34:21.687

评论 cookie 参数不是正确的方法，因为将来它将被推送到服务器上并产生很多问题。我从个人经验中知道这一点。

最好的解决方案是将本地 url 重命名为或多或少具有典型 url 外观的形式，至少连续一个点。例如：[http://yoursitename.local](http://yoursitename.local)

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2016-09-21T11:28:39.627

**它对我有用..请按照以下说明操作**

> 转到系统->配置->Web->会话 Cookie 管理
> 
> 将选项“仅使用 HTTP”更改为“否”

[![在此处输入图像描述](../Images/de49c81f28e21213b359632ece424187.png)](https://i.stack.imgur.com/lppTP.png)

* * *

## 回答 #9

> 赞同：0
> 
> 时间：2015-12-15T03:30:12.110

我同意-Checkpoint Charlie-评论 cookie 参数可能会导致未来的麻烦。

如果您在本地服务器上安装 magento，则必须使用 127.0.0.1/magento_install_path IP 而不是 localhost/magento_install_path 安装它。本地主机不接受用于 magento 安装（或类似的东西）的 cookie，它与安装的 magento 规则有关。

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2016-03-16T20:51:40.663

当服务器上超过磁盘配额时也会出现此问题，并且如果使用基于文件的 cookie 存储，则可能无法将会话信息写入磁盘。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2017-05-26T12:02:57.573

实际上没有针对这个问题的编程和设置问题。

1.  从 Varien.php 中找到此代码片段并替换如下

    ```
    if ((isset($cookieParams['domain'])) && !in_array("127.0.0.1", 
          self::getValidatorData())) {
          $cookieParams['domain'] = $cookie->getDomain();
    } 
    ```

2.  只需打开另一个浏览器并使用 127.0.0.1 而不是 localhost 打开本地 magento 页面。

3.  使用 cookie 清除浏览器历史记录以获得良好实践。

# objective-c - RestKit 可以接收异步响应吗？

> ID：13860938
> 
> 赞同：0
> 
> 时间：2012-12-13T13:33:12.603
> 
> 标签：objective-c, ios, ipad, restkit

我正在使用 RestKit 来请求数据并使用这些数据执行操作。

一旦我解析了数据并将其显示给用户，他们就可以选择一个项目来启动播放。当用户选择播放时，服务器将响应一个响应代码，但服务器也会在播放完成时通知应用程序。

例如

```
client                      server
request data ->
                <-respond with JSON
request_playback ->
        <-playback_started OK
        <-playback_stopped OK 
```

希望图表有所帮助。我需要应用程序了解服务器上的更改，在此示例中播放开始/停止或录制开始/停止。

所以基本上有没有办法让 RestKit 接受不是由请求发起的响应？

谢谢你的帮助。

格雷格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T14:13:12.567

您应该研究诸如“长轮询”或“反向 AJAX”或“网络套接字”之类的东西。这些都是能够让服务器保持开放连接并不断接收来自服务器的响应的技术。

也许另一种更清洁的解决方案是使用 Apple 的推送通知机制。

# java - 在 JAVA 中创建 PKCS12 证书

> ID：13860939
> 
> 赞同：0
> 
> 时间：2012-12-13T13:33:21.440
> 
> 标签：java, certificate, pkcs#12

所以这就是我想要做的：

*   我连接到我的 SSL 服务器

*   它向我发送了两个证书，其中一个是自签名的

在这个阶段，没有问题，我已经：

```
X509Certificate[] myTwoCerts; 
// with 2 certificates in there, and I'm sure it's there because, I print them in my console. 
```

*   现在我想创建 .p12 文件，里面有 2 个证书。

到目前为止，我已经尝试过这样的事情：

```
KeyStore pkcs12Store = KeyStore.getInstance("PKCS12");
pkcs12Store.load(null, null);
X509Certificate cert1 = myTwoCerts[0];
X509Certificate cert2 = myTwoCerts[1]
String alias1 = "FIRST";
String alias2 = "SECOND";
pkcs12Store.setCertificateEntry(alias1, cert2);
pkcs12Store.setCertificateEntry(alias2, cert2); 
```

但我得到以下异常：

```
Exception in thread "main" java.security.KeyStoreException: TrustedCertEntry not supported 
```

有人可以帮我吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-21T14:32:27.530

Java 中的`PKCS12`密钥库不能用于存储没有私钥的证书或证书链。

[请参阅JCA 参考指南](http://docs.oracle.com/javase/7/docs/technotes/guides/security/crypto/CryptoSpec.html#KeystoreImplementation)中的此注释：

> “pkcs12”是另一种选择。这是一个基于 RSA PKCS12 个人信息交换语法标准的跨平台密钥库。该标准主要用于存储或传输用户的私钥、证书和其他机密。从 JDK 6 开始，在“pkcs12”中存储可信证书的标准尚未建立，因此“jks”或“jceks”应该用于可信证书。

（尽管提到了 JDK 6，但这仍然在 JDK 7 文档中。）

如果你想在 Java 的 PKCS#12 存储中存储一个私钥 + 证书（链），需要有一个私钥并且你需要使用该`setKeyEntry`方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-05-10T20:25:29.503

```
keytool -trustcacerts -keystore keystore.p12 -storetype pkcs12   -alias root -genkeypair

KeyStore pkcs12 = KeyStore.getInstance("PKCS12");
String filename = "/tmp/keystore.p12";
keyStore.load(
                    new FileInputStream(/*"myKeyStore.jks"*/filename),
                    password); 
```

# c# - 从文件名中提取版本

> ID：13860942
> 
> 赞同：0
> 
> 时间：2012-12-13T13:33:22.860
> 
> 标签：c#, arrays, string

这是我的示例文件名`Text_2.23.txt` ，我已经分离了扩展名，但我无法获取版本，因此我可以稍后在代码中使用它进行比较。我需要`2.23`出去，

编辑：文件名可以有多种形式，但版本总是在文件名的末尾。

```
string s = f1.Name.ToString(); //for the Filename
int k = s.LastIndexOf('.');
string lhs = k < 0 ? s : s.Substring(0, k), 
    rhs = k < 0 ? "" : s.Substring(k + 1);

char[] array = lhs.ToCharArray();

Array.Reverse(array);           // reverse search from right to left
for (int j = 0; j < array.Length; j++)
{   
    char letter = array[j];     //the letter I get out in the sample case is "3" 
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-12-13T13:36:49.787

使用`Path`和`Version`类：

```
string fileName = "Text_2.23.txt";
string fn = Path.GetFileNameWithoutExtension(fileName);
string[] parts = fn.Split('_');

Version v;
if (parts.Length > 1 && Version.TryParse(parts.Last(), out v))
{
    Console.Write("Major:{0}, Minor:{1}", v.Major, v.Minor);
} 
```

[**演示**](http://ideone.com/YFe2mj)

**编辑**：因为你评论说你的文件名几乎是任意的，但版本总是在最后，你只是想要那个`string`.

使用您评论的示例：

```
string[] fileNames = new[] { "teext_023.ext", "txtxt.x9.08.ext", "text0911.ext" };
string[] versions = fileNames
    .Select(fileName =>
        Path.GetFileNameWithoutExtension(fileName).Split('_')
            .Last()
            .Reverse()
            .TakeWhile(c => c == '.' || Char.IsDigit(c))
            .Reverse()
    ).Select(chars => new string(chars.ToArray())).ToArray(); 
```

[**演示**](http://ideone.com/ElPztq)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-14T07:09:17.763

这就是我一直在寻找的，一种解决我的问题的简单方法：

```
 Array.Reverse(array);  
                Boolean dot = false;
                for (int j = 0; j < array.Length; j++)
                {   
                    char letter = array[j];
                    if (char.IsNumber(letter))
                    {
                        version += letter.ToString();
                    }
                    else if (letter == '.')
                    {
                        if (dot)
                        {
                            break;
                        }
                        dot = true;
                    }
               }
                version = this.Reverse(version);

                if (version.Equals(""))
                {
                    version = "0";
                } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-04-28T21:35:56.893

以下是一些使用正则表达式 (Regex) 从字符串中提取版本号的通用解决方案。

正则表达式的解释`(\d+\.\d+\.\d+\.\d+)`：

*   `(`开始第一个捕获组
*   `\d`匹配一个数字（相当于 [0-9]）
*   `+`匹配前一个令牌一次到无限次，尽可能多次，根据需要回馈（贪婪）
*   `\.`从字面上匹配字符`.`（区分大小写）
*   `)`关闭第一个捕获组

因此，对于通常使用 format 的版本号，`X.X.X.X`只需根据您有兴趣捕获的版本号组件的数量重复 Regex 模式多次即可。

1.  最简单但最不灵活的解决方案是寻找您需要的确切模式。此方法查找标准的 4 组件版本号。要仅查找 2 部分版本号，您可以将 Regex 更改为`(\d+\.\d+)`

```
/// <summary>
/// Extracts a version from the given input.
/// </summary>
/// <param name="input">
/// String that may contain a valid 4-component version in the format X.X.X.X.
/// <para>
/// e.g. 1.0.0.0 or 0.0.17.95
/// </para>
/// </param>
/// <returns>Version or null.</returns>
public string ExtractVersionNumber(string input)
{
    var regex = new Regex(@"(\d+\.\d+\.\d+\.\d+)");
    var match = regex.Match(input);
    return match.Success ? match.Value : null;
} 
```

2.  更灵活的解决方案是指定是否需要版本号的构建和修订号组件。

```
/// <summary>
/// Extracts a version number from the given input.
/// </summary>
/// <param name="input">
/// String that may contain a valid version.
/// <para>
/// e.g. 1.0.0.0 or 0.0.17.95
/// </para>
/// </param>
/// <param name="requireBuild">
/// Indicates whether the build component of the version is required.
/// <para>
/// e.g. 1.0.0 or 0.0.17
/// </para>
/// </param>
/// <param name="requireRevision">
/// Indicates whether the revision component of the version is required.
/// <para>
/// e.g. 1.0.0.0 or 0.0.17.95
/// </para>
/// </param>
/// <returns>Version or null.</returns>
public string ExtractVersionNumber(string input, bool requireBuild = true, bool requireRevision = true)
{
    var pattern = @"\d+\.\d+";

    if (requireBuild)
    {
        pattern += @"\.\d+";
    }

    if (requireRevision)
    {
        pattern += @"\.\d+";
    }

    var regex = new Regex($"({pattern})");
    var match = regex.Match(input);
    return match.Success ? match.Value : null;
} 
```

3.  另一种灵活的方法是指定所需的版本号组件的数量。

```
/// <summary>
/// Extracts a version from the given input.
/// </summary>
/// <param name="input">
/// String that may contain a valid version number.
/// </param>
/// <param name="componentsRequired">
/// Number of version components required. Defaults to 4.
/// <para>Valid values: 4, 3, 2.</para>
/// <para>4 components example: 1.0.0.0 or 0.1.17.95</para>
/// <para>3 components example: 1.0.0   or 0.1.17</para>
/// <para>2 components example: 1.0     or 0.1</para>
/// </param>
/// <returns>Version or null.</returns>
public string ExtractVersionNumber(string input, int componentsRequired = 4)
{
    string pattern;
    switch (componentsRequired)
    {
        case 4:
            pattern = @"(\d+\.\d+\.\d+\.\d+)";
            break;
        case 3:
            pattern = @"(\d+\.\d+\.\d+)";
            break;
        case 2:
            pattern = @"(\d+\.\d+)";
            break;
        default:
            throw new ArgumentOutOfRangeException(nameof(componentsRequired), "Valid values: 4, 3, 2");
        }

    var regex = new Regex(pattern);
    var match = regex.Match(input);
    return match.Success ? match.Value : null;
} 
```

# javascript - 按下控制键时在 IScroll 上选择文本？

> ID：13860943
> 
> 赞同：1
> 
> 时间：2012-12-13T13:33:25.210
> 
> 标签：javascript, jquery, html, iscroll

我在我的网站上使用 IScroll。

它的工作非常好。但是，我无法用鼠标光标选择页面中的任何文本。

`Ctrl`按住 Control [ ] 键时，我想用鼠标光标在 IScroll 中选择文本。

有没有可能？如果可能，请给我代码。

# android - 在Android应用程序中强制关闭时如何在运行时获取日志

> ID：13860967
> 
> 赞同：4
> 
> 时间：2012-12-13T13:35:03.180
> 
> 标签：android

在 Android 应用程序中强制关闭时如何在运行时获取日志。我想获取日志并邮寄。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-12-13T14:05:17.967

这里有一些代码来收集应用程序内部的日志：

```
 private int MAX_LOG_MESSAGE_LENGTH = 100000;
    private String[] mFilterSpecs;
    private String mFormat;
    private String mBuffer;

private class CollectLogTask extends AsyncTask<ArrayList<String>, Void, StringBuilder> {
    @Override
    protected void onPreExecute() {

    }

    @Override
    protected StringBuilder doInBackground(ArrayList<String>... params) {
        final StringBuilder log = new StringBuilder();
        try {
            ArrayList<String> commandLine = new ArrayList<String>();
            commandLine.add("logcat");//$NON-NLS-1$
            commandLine.add("-d");//$NON-NLS-1$
            ArrayList<String> arguments = ((params != null) && (params.length > 0)) ? params[0] : null;
            if (null != arguments) {
                commandLine.addAll(arguments);
            }

            Process process = Runtime.getRuntime().exec(commandLine.toArray(new String[0]));
            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(process.getInputStream()));

            String line;
            while ((line = bufferedReader.readLine()) != null) {
                log.append(line);
                log.append(LINE_SEPARATOR);
            }
        } catch (IOException e) {
            Log.e(TAG, "CollectLogTask.doInBackground failed", e);//$NON-NLS-1$
        }

        return log;
    }

    @Override
    protected void onPostExecute(final StringBuilder log) {
        if (null != log) {
            // truncate if necessary
            int keepOffset = Math.max(log.length() - MAX_LOG_MESSAGE_LENGTH, 0);
            if (keepOffset > 0) {
                log.delete(0, keepOffset);
            }

            if (mAdditonalInfo != null) {
                log.insert(0, LINE_SEPARATOR);
                log.insert(0, mAdditonalInfo);
            }
                          Log.d("printLog",log.toString());

        }
    }
} 
```

现在像这样调用这个异步类。

```
 ArrayList<String> list = new ArrayList<String>();

    if (mFormat != null) {
        list.add("-v");
        list.add(mFormat);
    }

    if (mBuffer != null) {
        list.add("-b");
        list.add(mBuffer);
    }

    if (mFilterSpecs != null) {
        for (String filterSpec : mFilterSpecs) {
            list.add(filterSpec);
        }
    }

    new CollectLogTask().execute(list); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-12-13T14:10:23.460

使用[ACRA](http://acra.ch/)或相关库来捕获生产应用程序的崩溃并处理这些报告。默认情况下，ACRA 会将材料记录到 Google Docs 电子表格中，但您可以将其替换为其他内容。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T13:38:44.363

`adb logcat`当设备在 USB 调试中连接时

或者

从 gplay安装[aLogCat](https://play.google.com/store/apps/details?id=org.jtb.alogcat&hl=fr)。

# c# - 如何可视化blockingcollection

> ID：13860969
> 
> 赞同：0
> 
> 时间：2012-12-13T13:35:09.087
> 
> 标签：c#, multithreading, user-interface

我想我现在的逻辑有些问题。

我使用阻塞集合对其他 PC 进行线程安全调用。一般来说，它看起来像这样：

```
public class MyClass
{
  private BlockingCollection<workUnit> workUnits = new BlockingCollection<workUnit>();

  public void EnQueue(workUnit item)
  {
    workUnits.Add(item);
  }

  private void DeQueue()
  {
    while (!stopFlag)
    {
      workUnit item = workUnits.Take();
      DoLongRunningDBStuff(workUnit);
    }
  }
} 
```

现在我想将其可视化给用户。

用户应该看到

1.  项目在队列中
2.  项目处理已开始
3.  处理结果（主要是通过/失败/异常）

现在我有些头疼。

我正在考虑执行以下操作：

有一个网格来向用户显示项目。

1.  如果 item 已入队，则将其添加到 workunits 并另外添加到绑定到 datagrid 的列表中
2.  如果项目已出列（已使用），则更新网格列表中的项目。

令人头疼的是，如何使这个线程安全，以及需要哪些部分是线程安全的。

如果我把一些需要时间的东西放在 workUnit.Add 后面，我认为这是可能的，那么数据就会混合在一起。

这样的事情可行吗？

1.  如果项目已入队，则将其添加到工作单元和 UI 的附加 BlockingCollection
2.  如果项目已出列，请尝试 2​​.BlockingCollection 并将其删除，更新状态并再次将其附加到第二个列表。

我需要在 1 和 2 附近加锁吗？如果是这样，如果等待Take，它不会完全阻止添加吗？

是否有一个简单的解决方案或方法来可视化，发生了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-14T09:06:07.307

我会尝试这样做：

```
public class MyClass
{
  private BlockingCollection<workUnit> workUnits = new BlockingCollection<workUnit>();

  public void EnQueue(workUnit item)
  {
    workUnits.Add(item);
  }

  private void DeQueue()
  {
    while (!stopFlag)
    {
      workUnit item = workUnits.Take();
      item.SetState("Processing Started");
      try
      {
          DoLongRunningDBStuff(workUnit);
          item.SetState("Processing Successful");
      }
      catch
      {
          item.SetState("Processing Failed");
      }
    }
  }
} 
```

在此示例中，我将`workItem.SetState(...)`触发一个*事件*，该事件将更新特定项目的 UI。但是，由于事件是在非 UI 线程中引发的，因此*事件*的处理程序（我假设显示网格的表单）需要将更新发布到 UI 线程的上下文中（例如，如果您正在使用 WinForms，您将调用显示数据的控件的[Invoke](http://msdn.microsoft.com/en-us/library/zyzhdc6b.aspx)方法）。

在另一个（首选）建议中，我将执行以下操作（如果您可以在 .NET 4.0 及更高版本中使用[TPL ）：](http://msdn.microsoft.com/en-us/library/dd460717.aspx)

```
public class MyClass
{
  public Task EnQueue(workUnit item)
  {
    // Schedule the work on the thread pool. 
    // If you need limited concurrency here, there are schedulers to enable this.
    return Task.Run(() => DoLongRunningDBStuff(item));
  }
} 
```

如果您使用 .NET 4.5，您将能够使用[await](http://msdn.microsoft.com/en-us/library/vstudio/hh156528.aspx)功能，该功能会在 UI 线程的上下文中自动同步任务的延续。例如，在调用方（假设它是在 UI 线程上启动的），您只需执行以下操作：

```
private async void btnAddItem_Click(object sender, EventArgs e)
{
    var item = new workUnit();

    // TODO: Add item on UI here

    try
    {
        await myClass.EnQueue(item);

        // TODO: Update UI with success result here (no context synchronisation is needed here it is already in the UI context)
    }
    catch
    {
        // TODO: Update UI with error result here (no context synchronisation is needed here it is already in the UI context)
    }
} 
```

在这两个示例中，您甚至不需要任何锁定，您只需将更新发布到正确的上下文（在最后一个甚至没有明确需要的示例中，编译器会为您处理）

# jquery - 如何使用变量来简写这个 jquery 代码？

> ID：13860971
> 
> 赞同：0
> 
> 时间：2012-12-13T13:35:23.233
> 
> 标签：jquery, shorthand

我正在尝试使用变量或其他一些 jQuery 技术找到一个解决方案，这将使我能够完全缩短以下代码。

例如，我如何能够将“ptn_”设置为变量/常量并让 jquery 选择数字？

或者，从长远来看，我是否可以只使用几个简单的变量来使事情变得更整洁、更容易？

假设我想添加更多项目，我是否可以简单地添加 HTML 代码，让 jQuery 代码从 CSS 中提取图像并在单击特定 ID 时显示它？

我有点困惑如何解决这个问题，是的，谷歌是你的朋友，不，我在任何地方都没有找到真正的解决方案：P 我希望有人能阐明如何改变这一点。我不指望为我做的工作，只是某种形式的解决方案。

凌乱的jQuery：

```
.four 
```

是容器

```
.headercolor 
```

是容器内的标题颜色类。

```
.patternwrap 
```

单击#ptn_X ID 时将显示模式的主体包裹的div。

这是将更改包含 div 的整个容器的函数。

```
 $(function(){  
$('.button-preview').on('click', function() {
    $('.mainbody').css('background', 'rgba(0,0,0,0.4)');
    $('.four, .headercolor').css('color', '#fff');
}) 
```

以下是模式。

```
$('#ptn_1').on('click', function() {
    $('.patternwrap').css('background-image', 'url(images/img/ptn_00001.png)');
})
$('#ptn_2').on('click', function() {
    $('.patternwrap').css('background-image', 'url(images/img/ptn_00002.png)');
})
$('#ptn_3').on('click', function() {
    $('.patternwrap').css('background-image', 'url(images/img/ptn_00003.png)');
})
$('#ptn_4').on('click', function() {
    $('.patternwrap').css('background-image', 'url(images/img/ptn_00004.png)');
})
}); 
```

单击时的 HTML 按钮将根据 ID 显示 jquery 选择器：

```
<div class="button-preview" id="ptn_1">Preview</div>
<!-- Div container displaying the pattern PREVIEW -->
<div class="pattern" id="ptn_00001"></div> 
```

CSS：

```
#ptn_00001 {background:url(../images/cfpatterns/ptn_00001.png)}
#ptn_00002 {background:url(../images/cfpatterns/ptn_00002.png)}
#ptn_00003 {background:url(../images/cfpatterns/ptn_00003.png)}
#ptn_00004 {background:url(../images/cfpatterns/ptn_00004.png)} 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T14:05:47.327

您可以使用以下方法缩短 jquery 代码：

```
$('#ptn_1, #ptn_2, #ptn_3, #ptn_4').on('click', function() {
    var i = this.id.substr(-1);
    $('.patternwrap').css('background-image', 'url(images/img/ptn_0000'+ i +'.png)');
}); 
```

当您单击按钮时，将创建 var 'i' 并获取单击按钮 id 的最后一个字符的值。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-12-13T13:41:12.497

```
var i = 0;
$('#ptn_1, #ptn_2, #ptn_3, #ptn_4').on('click', function() {
    $('.patternwrap').css('background-image', 'url(images/img/ptn_0000' + (i++) + '.png)');
}); 
```

或者如果上述方法不起作用：

```
for (var i = 1; i < 5; i++) {
    $('#ptn_' + i).on('click', function() {
        $('.patternwrap').css('background-image', 'url(images/img/ptn_0000' + i+ '.png)');
    });

}; 
```

我会这样做的另一种方法是使用类而不是 ID 并使用该`.each`函数。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-12-13T13:42:41.350

您可以只创建一个处理您想要执行的操作的函数。像这样的东西：

```
function change_image(id){
  $('.' + id).css('background-image', 'url(images/img/'+ id +'.png)');
} 
```

至于点击处理程序。您可以拥有一个容器，然后从该容器中选择子项：

```
$('#container div').on('click', function(){
   var id = $(this).attr('id');
   change_image(id);
}); 
```

当你在编码并且你发现自己在重复一些东西时，停下来试着找到一些你可以封装在一个函数中的模式。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-12-13T13:45:20.827

一个简单的解决方案将是

*   添加通用事件处理程序
*   调用`setBackgroung(id)`带有 id 参数的通用函数
*   让从传递的 id`setBackgroung`计算 **图像名称**和**div 名称**

# c# - 从 SQL Server 中特定数据库的所有表中删除所有行

> ID：13860974
> 
> 赞同：0
> 
> 时间：2012-12-13T13:35:29.160
> 
> 标签：c#, sql, sql-server, sql-server-2008

> **可能重复：**
> [如何从 SQL Server 数据库中的所有表中删除所有行？](https://stackoverflow.com/questions/1899846/how-to-delete-all-rows-from-all-tables-in-a-sql-server-database)

我想从具有 10 个其他数据库的 sql 服务器中的特定数据库的所有表中删除所有行。

我用这个查询找到了这篇文章，但不确定它是如何工作的

```
EXEC sp_MSForEachTable 'ALTER TABLE ? NOCHECK CONSTRAINT ALL'
GO
EXEC sp_MSForEachTable 'DELETE FROM ?'
GO
EXEC sp_MSForEachTable 'ALTER TABLE ? CHECK CONSTRAINT ALL'
GO 
```

我的 SQL Server 名称 ServerBanta 和数据库名称是 DingDong2010。

摘自[如何从 SQL Server 数据库中的所有表中删除所有行？](https://stackoverflow.com/questions/1899846/how-to-delete-all-rows-from-all-tables-in-a-sql-server-database)

# python - Python 观察者/可观察库

> ID：13860976
> 
> 赞同：1
> 
> 时间：2012-12-13T13:35:31.103
> 
> 标签：python, observer-pattern

> **可能重复：**
> [Python 观察者模式：示例、提示？](https://stackoverflow.com/questions/1904351/python-observer-pattern-examples-tips)

是否有在 Python 中实现观察者/可观察（gof）模式的特定库？我会用它来更新我的模型中的 wxPython 视图。编写我自己的并不难，但我想知道是否有特定于 Python 的东西。

# linux - gpio_request 如何在 Linux 上将 GPIO 编号处理为虚拟内存地址？

> ID：13860984
> 
> 赞同：3
> 
> 时间：2012-12-13T13:35:50.427
> 
> 标签：linux, memory-address, gpio

有个问题是gpio_request需要一个GPIO号，但是在内核中它需要一个地址来处理gpio，Linux是如何实现的呢？

始终在芯片规范中，例如 MSM8x60 或任何 SOC 芯片规范，都有一个内存映射显示哪个内存区域用于 GPIO。但是在内核驱动中，我们使用gpio number来访问gpio。

我的问题是：1，芯片规格的内存映射中的内存地址是物理地址吗？2、在内核中，它使用虚拟地址，内核如何将一个gpio号转换为虚拟地址？

谢谢！

亲切的问候比尔王

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-11T14:52:07.473

通常，在嵌入式系统上，存在整个地址的地址映射，该地址是虚拟的。

当使用gpio端口号时，相关的GPIO驱动之类的东西可以将gpio端口号转换为虚拟地址，MMU会定位到物理地址。

# c# - 打印多个属性

> ID：13860985
> 
> 赞同：0
> 
> 时间：2012-12-13T13:35:52.470
> 
> 标签：c#, sql, arrays, file, io

我有这个程序，我需要打印出多种商品（vare）的属性。我遇到的问题是它只能多次打印出单个项目的属性。我尝试将属性放入二维数组中，但它仍然打印出相同的属性。我的输出文件是一个 .txt 文件。我想要的是程序打印出商品清单，每个商品都有各自的属性。（有 4 个不同的项目和 6 个不同的属性）。

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Text;
using System.Data;
using System.Data.SqlClient;
using System.IO;

namespace Opgave_4._1
{
  class Program
{

        static void Main()
 {
    string connString;
    connString = "Data Source=(local);Initial Catalog=Occhi che guardano;Integrated Security=SSPI";

    string sqlstring = "SELECT * FROM Vare ORDER BY Vare.Varenavn";

    Console.WriteLine(sqlstring);

    SqlConnection conn = new SqlConnection(connString);
    SqlCommand cmd = new SqlCommand(sqlstring, conn);
    conn.Open();
    SqlDataReader Reader = cmd.ExecuteReader();

    string att1;
    decimal att2;
    int att3;
    string att4;
    int att5;
    string att6;
    string[,] vareliste = new string[10, 10];
    StreamWriter Stream = null;
    String UdFil = "C:\\Users\\Thomas\\Desktop\\text.txt";
    Stream = new StreamWriter(UdFil);
    try
    { 
        while (Reader.Read())
        {
            if (Reader.IsDBNull(0))
                att1 = "hej";
            else
                att1 = Reader.GetString(0);
            if (Reader.IsDBNull(1))
                att2 = 0.0006000M;
            else
                att2 = Reader.GetDecimal(1);
            if (Reader.IsDBNull(2))
                att3 = 12;
            else
                att3 = Reader.GetInt32(2);
            if (Reader.IsDBNull(3))
                att4 = "hej";
            else
                att4 = Reader.GetString(3);
            if (Reader.IsDBNull(4))
                att5 = 14;
            else
                att5 = Reader.GetInt32(4);
            if (Reader.IsDBNull(5))
                att6 = "hejsa";
            else
                att6 = Reader.GetString(5);

            Stream.WriteLine(att1 + " " + att2 + " " + att3 + " " + att4 + " " + att5 + " " + att6);

            try
            {

            }
            catch (Exception e)
            {
                Console.WriteLine("Fejl i sti  {0}", e.ToString());
                Console.ReadLine();
            }
            finally
            {
                if (Stream != null)
                    Stream.Close();
            }

        }

    }

    catch (System.Data.SqlClient.SqlException e)
    {
        Console.WriteLine(e.Message);
    }
    finally
    {
        Reader.Close(); // luk ResultSet
        conn.Close(); // luk connection igen
    } 
```

}

```
 }
} 
```

这是打印输出（已编辑（删除 finally 子句后））：

1234 1200,0000 5飞行员1111 raiban
1234 1200,0000 5飞行员1111 raiban
1234 1200,0000 5飞行员1111 raiban
4321 110,0000 6 Femme 1111 Hindberg
4321 110,0000 6 Femme 1111 Hindberg
4321 110,0000 6 Femme 1111 Hindberg
3241 500 ,0000 2 Pilot-etui 3333 Raiban
3241 500,0000 2 Pilot-etui 3333 Raiban
3241 500,0000 2 Pilot-etui 3333 Raiban
1423 250,0000 30 飞溅 4444 Lensway
1423

（如果我在 for 循环中使用小于 3 的整数，由于某种原因它不会打印任何内容）

表中数据为

价格 = 价格。贮藏 = 储存。Antal = 数量。Gruppe = 集团。Mærke = 品牌

```
+---------+----------+-----------------+------------+---------------+-----------+
| Vare_id | Varepris | VareLager_antal |  Varenavn  | Varegruppe_nr | Varemærke |
+---------+----------+-----------------+------------+---------------+-----------+
|    1234 | 1200     |               5 | Aviator    |          1111 | Raiban    |
|    1423 | 250      |              30 | Splash     |          4444 | Lensway   |
|    3241 | 500      |               2 | Pilot-etui |          3333 | Raiban    |
|    4321 | 110      |               6 | Femme      |          1111 | Hindberg  |
+---------+----------+-----------------+------------+---------------+-----------+ 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-13T13:53:35.963

为每次迭代创建一个新`StreamWriter`的意味着您每次都覆盖您的文件。你只会在这里得到最后一条记录。

每次迭代读取相同的字段四次将每次返回相同的内容。记录集仅在您调用时移动`Reader.Read()`

您应该尝试使用`using`语句来控制资源的清理。例如

```
using (SqlConnection conn = new SqlConnection(connString)) {
    using (StreamWriter s = new StreamWriter(UdFil)) {
        while (Reader.Read()) {
           ....
        }
    }
} 
```

这将适当地关闭`Connection`和`StreamWriter`。

# rendering - 基于深度图像的渲染

> ID：13860986
> 
> 赞同：3
> 
> 时间：2012-12-13T13:35:53.407
> 
> 标签：rendering

我必须实现深度图像基础渲染。给定一个 2D 图像和一个深度图，该算法将生成一个虚拟视图——如果将相机放置在不同的位置，场景会是什么样子。我写了这个函数，V是二维视图像素的矩阵，D是深度图的像素和相机移位参数。Z=1.1-D./255；是规范化。我尝试遵循以下指令：对于深度图中的每个像素，计算由深度产生的差异，对于源 2D 图像中的每个像素，在虚拟视图中为其找到一个新位置：旧位置 + 差异特定像素。功能不好用，怎么回事？

```
function[virtualView]=renderViews(V,D,camerashift)
Z=1.1-D./255;
[M,N]=size(Z);
for m=1:M
for n=1:N
d=camerashift/Z(m,n);
shift=round(abs(d));
V2(m,n)=V(m+shift,n);
end
end
imshow(V2) 
```

# maven - 如何将 jrebel 集成到远程 jboss 测试的 arquillian 测试中？

> ID：13860987
> 
> 赞同：1
> 
> 时间：2012-12-13T13:35:59.900
> 
> 标签：maven, jboss, jboss-arquillian, jrebel

测试 java[持久性](http://arquillian.org/guides/testing_java_persistence/#assumptions)，想在*arquillian*测试中集成*jrebel 。*我读过一些关于*arquillian jrebel* [extension](https://github.com/arquillian/arquillian-extension-jrebel)的内容，但无法很好地配置它（maven 依赖错误）。

 **现在我只是在*pom.xml*上使用*jrebel*插件远程运行*Jboss*：

 **```
<plugin>
            <groupId>org.zeroturnaround</groupId>
            <artifactId>jrebel-maven-plugin</artifactId>
            <executions>
                <execution>
                    <id>generate-rebel-xml</id>
                    <phase>process-resources</phase>
                    <goals>
                        <goal>generate</goal>
                    </goals>
                </execution>
            </executions>
</plugin> 
```

以上够吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-13T22:11:50.717

maven 插件的作用是生成[rebel.xml](http://manuals.zeroturnaround.com/jrebel-reference-manual/app.html#app-3.1)配置文件。需要映射已部署应用程序之外的资源。JVM 本身应该以**-javaagent**参数启动（参见[手册](http://manuals.zeroturnaround.com/jrebel-reference-manual/server.html#server-4.6.1)）。对于 Arquillian，有一个社区贡献的[扩展](http://blog.itcrowd.pl/2012/04/arquillian-meets-jrebel.html)，但我不确定它实际上是如何工作的。****

# wordpress - 如何在 wp admin 中按发布元名称排序？

> ID：13860990
> 
> 赞同：1
> 
> 时间：2012-12-13T13:36:26.277
> 
> 标签：wordpress

我正在尝试按我为帖子添加的帖子元名称进行排序。发布元是“_merchant_id”，我知道如何按 merchan_id 排序，但我不知道如何按商家名称排序。

我按商家 ID 排序，如下所示：

```
public function column_orderby( $vars ) {
        if ( isset( $vars['orderby'] ) && is_admin() ) {
            switch ( $vars['orderby'] ) {
case 'merchant':
 $vars = array_merge( $vars, array(
     'meta_key' => '_merchant_id',
     'orderby' => 'meta_value_num'
 ) );

break;
... 
```

商家是另一种帖子类型（“商家”）。如何按商家名称排序？

# jquery - 循环遍历表格以获取下拉值

> ID：13860992
> 
> 赞同：1
> 
> 时间：2012-12-13T13:36:30.413
> 
> 标签：jquery

我有一张看起来像的桌子：

```
<table id="tblFileUpload" cellpadding="2" cellspacing="2" class="styled">
    <tr>
        <td align="left">
            <asp:FileUpload ID="fileUpload1" runat="server" size="50" />
        </td>
        <td align="left">
            <asp:DropDownList ID="ddlRequestType1" runat="server" DataTextField="Value" DataValueField="Key" CssClass="ddl"></asp:DropDownList>
        </td>
        <td align="left">
            <asp:DropDownList ID="ddlStatusType1" runat="server" DataTextField="Value" DataValueField="Key" CssClass ="ddl2">
            </asp:DropDownList>
            <label class="badFileUploadRow">*</label>
        </td>
    </tr>
    <tr>
        <td align="left">
            <asp:FileUpload ID="fileUpload2" runat="server" size="50" />
        </td>
        <td align="left">
            <asp:DropDownList ID="ddlRequestType2" runat="server" DataTextField="Value" DataValueField="Key" CssClass="ddl"></asp:DropDownList>
        </td>
        <td align="left">
            <asp:DropDownList ID="ddlStatusType2" runat="server" DataTextField="Value" DataValueField="Key"></asp:DropDownList>
            <label class="badFileUploadRow">*</label>
        </td>
    </tr> 
```

它继续继续进行另外几行（所有以相同的方式命名）

我应该只能为每个请求选择 1 个状态。我需要检查在更改任何给定状态类型时是否选择了重复的请求类型并禁用该行的选定状态类型。

例如。如果我为 requesttype1 和 requesttype3 都选择了“保存”，然后在 statustype3 中选择了“某些状态”，我需要在 requesttype1 的同一行中禁用“某些状态”。

我现在有以下内容：

```
$(".ddl2").change(function () {
    var id = $(this).attr('id');
    var cssType = $(this).attr('class');
    var pos0 = id.indexOf('ddlStatusType'); // +14;
    var itemNo = id.substr(pos0);
    var seen = {};
    $('#tblFileUpload td')
        .each(function () {
        //find if multiple request types already exist.
        // if (cssType == "ddl") {
            var txt = $('.ddl :selected').text();
            if (seen[txt]) {//there is a duplicate
                //   $(this).remove();
            }
            else
                seen[txt] = true;
            // }
    });
}); 
```

txt 变量返回请求类型的所有选定值的值，而不仅仅是同一行上的值……我被卡住了。请帮忙。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-13T13:38:55.033

> txt 变量返回请求类型的所有选定值的值，而不仅仅是同一行上的值

嗯，当然。这就是`$('.ddl :selected')`匹配项：每个具有`selected`伪类的元素都是具有 class 的元素的后代`ddl`。使用更具体的选择器。

尝试将内部更改`.each()`为：

```
$('#tblFileUpload tr').each(function () {
    var txt = $(this).find('.ddl').val();
    if (seen[txt]) {//there is a duplicate
        //   $(this).remove();
    }
    else seen[txt] = true;
}); 
```

请注意，最好`.val()`在 a 上使用而`<select>`不是自己寻找`<option selected>`。