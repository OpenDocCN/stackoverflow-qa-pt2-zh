# StackOverflow 问答 14587000-14587999

# quickfix - FIX 协议的 OrdID、ClOrdID、OrigClOrdID 是什么关系？

> ID：14587000
> 
> 赞同：13
> 
> 时间：2013-01-29T16:00:54.853
> 
> 标签：quickfix, fix-protocol

我对 FIX 协议很陌生，希望有人可以帮助澄清一些术语。

特别是有人可以解释（可能有一个例子） , 的流程，`NewOrderSingle`以及这些消息中如何使用字段, ,吗？`ExecutionReport``CancelReplaceRequest``ClOrdID``OrdID``OrigClOrdID`

* * *

## 回答 #1

> 赞同：21
> 
> 时间：2013-01-29T16:50:27.287

关于字段用法的快速说明。我的经验是，许多实施 FIX 的人的做法略有不同。所以请注意，虽然我试图解释正确的用法，但您可能会发现实现之间存在差异。当我连接到一个新的代理时，我会得到一个 FIX 规范，其中详细说明了他们如何使用该协议。我必须非常小心，以确保它们偏离了其他实现。

也就是说，我会给你一个你所要求的概要。

有更复杂的订单，但 NewOrderSingle 是最常用的。它允许您为任何资产创建交易。您将需要使用此对象/消息类型创建一个新订单。然后，您将使用方法 sendToTarget() 通过会话发送它。您可以通过 toApp() 方法修改此点之后的消息，假设您的应用程序实现了 quickfix.Application 接口。

经纪人（或与您有联系的任何人）将以执行报告的形式向您发送回复。使用 quickfix 该回复将通过 fromApp() 回调进入您的应用程序。从那里最好的办法是使用 MessageCracker 的破解方法实现从 MessageCracker 类继承的应用程序（或在其他地方实现它），然后它将回调相关的 onMessage() 方法调用。您将需要实现许多 onMessage() 方法（具体取决于您正在做什么以及需要哪些方法），主要的是 onMessage(ExecutionReport msg, SessionID session)。当您收到来自代理的执行报告时，消息破解者将调用此方法。这是对新订单的标准回复。

从那里您可以根据需要处理回复。

有些订单不会像限价订单那样立即成交。它们可以更改。为此，您将需要 CancelReplaceRequest。您的经纪人将为您提供具体如何为他们执行此操作的详细信息（同样存在差异，并非每个人都这样做）。您必须先完成 NewOrderSingle，然后您将使用此 MsgType 来更新它。

ClOrdID 是客户用来识别订单的 ID。它与 NewOrderSingle 一起发送并在 ExecutionReport 中返回。OrdID 标签在 ExecutionReport 消息中，它是经纪人用来识别订单的 ID。OrgClOrdID 通常用于在您进行更新（使用 CancelReplaceRequest）时识别原始订单，它应该包含原始订单的 ClOrdID。有些经纪人只想要原始订单，有些经纪人想要最后一次更新的 ClOrdID，所以第一个 OrigClOrdID 或将是 NewOrderSingle 的 ClOrdID，然后如果同一订单有后续更新，那么它们将是最后一次 CancelReplaceRequest 的 ClOrderID . 一些经纪人想要最后一个 OrderID 而不是 ClOrderID。请注意，CancelReplaceRequest 也需要一个 ClOrdID。

# javascript - 将 VBA 与 Office 2013 应用程序通信

> ID：14587013
> 
> 赞同：1
> 
> 时间：2013-01-29T16:01:31.697
> 
> 标签：javascript, vba, excel, office-2013, apps-for-office

有没有办法在Office 2013 的自定义或任务窗格应用程序中运行的 JavaScript 和 VBA 之间**直接共享数据？**

目前，我正在使用 Office API 绑定来处理这个问题，以观察、读取数据并将数据写入工作表单元格。例子：

```
Office.context.document.bindings.addFromNamedItemAsync("Example!A1:A1", Office.BindingType.Matrix, { id: "readFromCell" }, function (asyncResult) {
    Office.select("bindings#readFromCell").getDataAsync({ coercionType: "matrix" }, function (asyncResult) {
        if (asyncResult.status === Office.AsyncResultStatus.Succeeded) {
            processData(asyncResult.value);
        }
    });
}); 
```

但是，这种方法太慢而且太混乱了。我正在寻找更接近此的东西：

VBA：

```
CommonStorage.setValue("example", "hello") 
```

JavaScript：

```
var example = CommonStorage.getValue("example"); // Returns "hello" 
```

# jquery - 单选按钮 sum 函数的值

> ID：14587014
> 
> 赞同：0
> 
> 时间：2013-01-29T16:01:34.020
> 
> 标签：jquery

我正在尝试对单选按钮的值求和。两行 div 和每行 2 个单选按钮。有关更多详细信息，请参见链接：http: [//jsfiddle.net/HFuey/](http://jsfiddle.net/HFuey/)

JQ，我正在尝试使用：

```
function recalculate() {
    var sum = 0;

    $("input[type=radio]:checked").each(function() {
        sum = parseFloat($(this).val();
    });

    $("#sum").html(sum.toFixed(2));
}

$("input[type=radio]").change(function() {
    recalculate();
}); 
```

有什么办法吗？我也可以使用 href 属性吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:03:06.530

我想你想要

```
sum += parseFloat($(this).val()); 
```

以便它编译（括号）并且值递增（`+=`）。

另请注意，您还必须在小提琴中导入 jQuery，如果您有一组，您将不会真正得到一个总和：一次只能检查一个单选按钮。

所以我想[你想要这个（链接到固定小提琴）](http://jsfiddle.net/dystroy/mA3QD/)。

# c# - 如何检查 mms:// rtsp:// rtp:// anf rtmp:// 链接是否可用和流数据？

> ID：14587015
> 
> 赞同：0
> 
> 时间：2013-01-29T16:01:35.593
> 
> 标签：c#, .net, streaming

我不知道如何检查`mms:// rtsp:// rtp:// rtmp://`链接是否可用和流数据...

任何线索我可以从哪里开始？

我需要类似的东西

```
bool IsMediaURLAlive(string url)
{
    // main code ... 
    return false;
} 
```

有什么线索吗？

# vba - 如何返回一个文件夹中所有文件的文件路径？这是用于 Excel VBA

> ID：14587016
> 
> 赞同：0
> 
> 时间：2013-01-29T16:01:36.050
> 
> 标签：vba, excel, filepath

我有代码可以让我返回单个文件夹中所有文件的文件名。但是，我想修改它以查询文件夹并返回特定文件扩展名的所有***文件路径。***（在这种情况下 .run 文件）

任何帮助，将不胜感激！提前致谢。

```
 Option Explicit 

Sub GetFileNames() 

Dim xRow As Long 
Dim xDirect$, xFname$, InitialFoldr$ 

InitialFoldr$ = "G:\" '<<< Startup folder to begin searching from

       With Application.FileDialog(msoFileDialogFolderPicker) 
         .InitialFileName = Application.DefaultFilePath & "\" 
          .Title = "Please select a folder to list Files from" 
           .InitialFileName = InitialFoldr$ 
             .Show 
              If .SelectedItems.Count <> 0 Then 
                 xDirect$ = .SelectedItems(1) & "\" 
                 xFname$ = Dir(xDirect$, 7) 
                  Do While xFname$ <> "" 
                  ActiveCell.Offset(xRow) = xFname$ 
                  xRow = xRow + 1 
                   xFname$ = Dir 
              Loop 
          End If 
       End With 
   End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:53:16.670

使用`Dir`函数的另一种方法：

```
Sub FilePaths()

Dim FileName As String
Dim FileMask As String
Dim InputFolder As String
Dim PathsArray() As String
Dim OutputRange As Range

InputFolder = "D:\DOCUMENTS\"
FileMask = "*.xls?"
Application.ScreenUpdating = False

FileName = Dir(InputFolder & FileMask)
ReDim PathsArray(0)
ThisWorkbook.ActiveSheet.Range("A1").CurrentRegion.ClearContents

Do While FileName <> ""
    PathsArray(UBound(PathsArray)) = InputFolder & FileName
    ReDim Preserve PathsArray(UBound(PathsArray) + 1)
    FileName = Dir
Loop

ReDim Preserve PathsArray(UBound(PathsArray))

Set OutputRange = ThisWorkbook.Sheets(1).Range("A1:A" & (UBound(PathsArray)))
OutputRange = WorksheetFunction.Transpose(PathsArray)
ThisWorkbook.ActiveSheet.Range("A1").CurrentRegion.Columns.AutoFit

Application.ScreenUpdating = True

MsgBox UBound(PathsArray) & " file(s) listed from folder:" & vbNewLine & InputFolder

End Sub 
```

应定义源路径和文件掩码（**允许使用****通配符）。** `*?`

 **示例文件可用：[https ://www.dropbox.com/s/j55p8otdiw67i7q/FilePaths.xlsm](https://www.dropbox.com/s/j55p8otdiw67i7q/FilePaths.xlsm)**

# facebook - 如何确定用户何时喜欢 Facebook 应用程序？

> ID：14587017
> 
> 赞同：1
> 
> 时间：2013-01-29T16:01:37.630
> 
> 标签：facebook, facebook-graph-api, facebook-like, facebook-fql

我正在开发一个托管在画布上的 facebook 应用程序，在用户喜欢该应用程序之前，他会看到一条消息，上面写着“Like us for bla bla bla”，只有当他喜欢它时，他才能访问该应用程序。

如何通过 API 检查他是否喜欢该应用程序？我需要使用哪个图形对象/方法，还是需要使用 FQL？

# c# - C# Web 浏览器单击文本

> ID：14587019
> 
> 赞同：0
> 
> 时间：2013-01-29T16:01:44.510
> 
> 标签：c#, onclick, click, browser

我想使用网络浏览器方法单击网站上的文本“检查全部”。我不知道该怎么做。这是网站的 HTML 代码：

```
<a onclick="checkAll(document.myform.list)" href="#">Check all</a>
<a onclick="uncheckAll(document.myform.list)" href="#">Uncheck all</a>
<input type="hidden" value="t2ah9m" name="check"> 
```

我点击它的代码：

```
webBrowser1.Document.All.GetElementsByName("check")[0].SetAttribute("Value", "Click"); 
```

但是失败了。。

这是脚本：

```
function checkAll(field)
{   for (i = 0; i < field.length; i++)  field[i].checked = true ;   }

function uncheckAll(field)
{for (i = 0; i < field.length; i++) field[i].checked = false;   } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:08:21.453

您可以使用 jquery 选择所有输入类型`checkbox`

例如：你的表格

```
<form>
<input type="checkbox" name="vehicle" value="Bike">I have a bike<br>
<input type="checkbox" name="vehicle" value="Car">I have a car 
</form> 
```

您的链接

```
<a id="checkAll" href="#">Check all</a>
<a id="uncheckAll" href="#">Uncheck all</a> 
```

你的 javascript

```
$("#checkAll").click(function() {
    $('type').find('checkbox').prop('checked', true);
});

$("#uncheckAll").click(function() {
    $('type').find('checkbox').prop('checked', false);
}); 
```

# c++ - 按值传递期间的隐式转换有效，但按引用传递无效

> ID：14587020
> 
> 赞同：1
> 
> 时间：2013-01-29T16:01:46.400
> 
> 标签：c++, clang++

使用 clang++ 4.1 编译：

```
class A
{
public:
    A(const char *s=0) : _s(s) {}
    const char *_s;
};

void f(A a)
{
    cout << a._s << endl;
}

int main()
{
    f("test");
    return 0;
} 
```

印刷，

```
test 
```

而如果我定义`f`如下，

```
void fA(A &a)
{
    cout << a._s << endl;
} 
```

我得到一个编译错误，

```
clang++ -std=c++11 -stdlib=libc++ -o test test.cpp
test.cpp:14:5: error: no matching function for call to 'f'
    f("9000");
    ^
test.cpp:7:6: note: candidate function not viable: no known conversion from
      'const char [5]' to 'A &' for 1st argument;
void f(A &a)
     ^ 
```

为什么？我不明白为什么做`f`参考会导致问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:19:52.017

试试这个解决方案

```
void f(const A &a)
{
    cout << a._s << endl;
} 
```

“test”是临时对象，不能绑定到非常量引用

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:05:13.863

`f("test");`尝试创建一个临时`A`- `f(A("test"));`，但该临时不能绑定到非常量引用。值传递是可以的，因为理论上会进行复制（实际上，会发生复制省略）。

# wordpress - 插件更新后 Wordpress 不会从上传文件夹中加载所有内容

> ID：14587021
> 
> 赞同：1
> 
> 时间：2013-01-29T16:01:54.697
> 
> 标签：wordpress, general-network-error

我对这个网站有很大的问题[http://www.oktoberfest.it](http://www.oktoberfest.it)

在大规模插件更新（9 次更新）后，此网站返回此错误：

> NetworkError：500 内部服务器错误

在“上传”文件夹中的所有图像和此错误：

> 网络错误：404 未找到

在 wp-includes 文件夹中的 js 文件上。甚至 jQuery 也不会加载。

这是我到目前为止所做的：

*   禁用所有插件
*   通过 FTP 重置插件文件夹
*   手动更新 Wordpress 到 3.5.1
*   重置上传文件夹权限（从 Aruba 控制面板）
*   将上传文件夹权限设置为 777
*   删除所有未使用的插件
*   检查 Aruba 日志文件，发现每次页面加载都会出现“此处不允许选项索引”错误
*   检查 .htaccess 文件，但没关系

插件更新后，wordpress 不会显示任何升级，但它必须是因为我在 v.3.4.2 上运行。

如果我尝试在浏览器上粘贴图片链接，我会收到“内部服务器错误”页面。

如果我尝试编辑帖子，所有图像都被标记为损坏，如果我尝试加载新图像，它会上传它，但无法显示任何预览或图像本身。

如果我尝试启动插件安装或 wordpress 更新，页面卡在下载中，但插件或系统已更新。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T08:56:07.477

好的，我已经解决了！Aruba 告诉我这个错误：

```
/web/htdocs/www.oktoberfest.it/home/wp-content/uploads/.htaccess: Option Indexes not allowed here 
```

我只是从上传文件夹中删除了 .htaccess 文件，一切正常！我不知道这个特定站点发生了什么，因为我所有的其他站点都有这个文件没有问题。

该文件仅包含以下内容：

```
Options -Indexes 
```

像其他网站一样。这是个谜。总之谢谢大家！

# ms-access - 访问报告中带有参数的唯一计算总计

> ID：14587036
> 
> 赞同：1
> 
> 时间：2013-01-29T16:03:02.397
> 
> 标签：ms-access, vba, ms-access-2003, calculated-field

我正在处理一个使用员工的 access 2003 报告，以及他们在一段时间内积累的积分。运行报告时，它会询问参数 StartDate 和 EndDate，然后通过 Supervisor -> Employee -> 每个点生成一个漂亮的报告，并说明原因。

如何在每个员工姓名旁边获得一个总分框来给出每个员工的总分？我考虑过编写一个 SELECT 和 WHERE 语句并将变量添加到 VBA，所以源属性是：

```
=(SUM(SELECT [PointValue] WHERE [EmployeeName] = CurrentEmployee AND & _
      [Date] <= #StartDate# AND [Date] >= #EndDate#)) 
```

提前致谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:30:22.283

最简单的方法是使用分组。如果您为员工字段（列）创建组标题，您可以添加一个文本框并对组标题中的点求和。

![报告分组](../Images/3b5058506cf3fc3de85aa819ac8b92cc.png)

# java - 使用休眠模板的 HQL

> ID：14587038
> 
> 赞同：1
> 
> 时间：2013-01-29T16:03:04.117
> 
> 标签：java, oracle, hibernate

我试图将子查询添加到现有查询并使用休眠模板运行。

```
String query = "from Dispatch where ID='1011' and createdDt > sysdate - (coalesce((select timeout/60 from AppDetails where appId='1071'),10)/1440)";

List<Dispatch> dipatchhibernateTemplate.find(query); 
```

然后我们得到错误为“**二元运算符的右手操作数为空**”。

我试图四处搜索，但找不到任何正确的结果。

如果有人可以帮助我如何使用休眠**标准**进行转换也可以。

有人可以帮忙吗？

# c# - 在代码中从 AD 用户获取终端服务配置文件路径

> ID：14587039
> 
> 赞同：1
> 
> 时间：2013-01-29T16:03:04.397
> 
> 标签：c#, active-directory

我正在尝试使用以下代码片段读取选定 AD 用户的终端服务配置文件路径。

```
...
using System.DirectoryServices;
using System.DirectoryServices.ActiveDirectory;
... 
try 
{
   Debug.WriteLine("Looking for: " + DisplayName);
   DirectoryEntry entry = new DirectoryEntry(strLDAP, strUserName, strPassword);
   DirectorySearcher Searcher = new DirectorySearcher(entry);
   Searcher.Filter = "(displayName="+ DisplayName +")";
   SearchResult result = Searcher.FindOne();     
   DirectoryEntry found = result.GetDirectoryEntry();

   // tell if we found the right user
   Debug.WriteLine(found.Properties["mail"][0].ToString());

   // tell what the current terminal services profile path is
   Debug.WriteLine(found.InvokeGet("TerminalServicesProfilePath").ToString()); 
}
catch (DirectoryServicesComException e)
{
  Debug.WriteLine(e.Message.ToString());
} 
```

可悲的是，当我执行以下操作时出现以下错误`InvokeGet`：

> ... System.Runtime.InteropServices.COMException'发生在 System.DirectoryServices.dll System.Runtime.InteropServices.COMException (0x80020006)：未知名称。（来自 HRESULT 的异常：0x80020006 (DISP_E_UNKNOWNNAME)）

我在这里碰到了..我知道参数`TerminalServicesProfilePath`在`"userParameter"`哈希中的 AD 中。调用它应该得到一些可读的东西。

我究竟做错了什么？

旁注：AD 驻留在 2003 级域上。

# git - 如何将分叉仓库的分支合并到原始仓库的主分支中？

> ID：14587045
> 
> 赞同：28
> 
> 时间：2013-01-29T16:03:17.957
> 
> 标签：git, github, git-merge

GitHub上有一个开源项目。它的原始仓库包含最新的 master 分支。现在有人（不是我）分叉了这个 repo，从主分支创建了一个开发分支，并向开发分支添加了一些东西。我现在想做的是将开发分支合并回主分支。不幸的是，分叉回购的主分支不是最新的。另请注意，我没有拥有两个各自的远程存储库。

目前，我已经使用`git clone`. 如何将分叉仓库的开发分支合并到我本地机器上原始仓库的主分支中（即不在远程服务器上，这是不可能的）？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-01-29T16:20:59.537

使用 GitHub 时，您可以使用[**Pull Request**](https://help.github.com/articles/using-pull-requests)来执行此操作。只需将您的开发分支推送到分叉的远程存储库并按照链接文章中的说明创建拉取请求。然后，原始存储库的所有者可以将您的存储库添加为新的远程存储库，获取您的更改并将您的开发分支合并回主分支。

您的 master 分支通常没有必要完全是最新的——尽管它非常有帮助，尤其是在合并开发分支时。

首先，您应该使`master`分叉存储库中的分支保持最新：

```
$ git remote add upstream ssh://path/to/original/repo
$ git checkout master
$ git fetch upstream # Instead of "fetch" & "merge", "pull" would also work
$ git merge upstream/master 
```

然后`rebase`或者`merge`你的开发分支进入主分支：

```
$ git checkout development
$ git rebase master # OR "git merge master" 
```

如有必要，请解决任何冲突。合并时使用`git commit`完成合并，变基时使用`git commit && git rebase --continue`.

您现在应该能够访问`git push`分叉存储库的来源，并创建拉取请求。或者，如果您被授权这样做，您也可以从您的 fork 直接推送到原始存储库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T17:03:34.393

听起来您已经克隆了两个存储库。我将假设您将它们放在目录`clone1`和`clone2`.

在进行合并之前，您需要将所有变更集放入一个存储库中。所以我们要从你的一个克隆中拉到另一个。如果您从头开始执行此操作，您只需克隆*一个*存储库，然后获取另一个存储库，而不是同时克隆两者。

1.  `cd clone1`
2.  `git checkout master`
3.  `git remote add clone2 ../clone2`（将两个遥控器放入一个仓库）。如果您没有克隆两个存储库，则不必这样做 - 您只需这样做`git remote add otherthing https://<github URI>`
4.  `git fetch``clone2`（从into获取更改`clone1`）。现在您拥有一个包含所有内容的存储库。
5.  `git checkout origin/master`或者，您可以查看当地分支机构。您的偏好。请记住，`origin`这里指的是`clone1`.
6.  `git merge clone2/development`如有必要，请在此时解决冲突。提交结果。
7.  `git checkout -b my-ongoing-development`（命名您刚刚创建的分支，其中包含两个远程分支）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2021-07-15T06:41:59.677

先前的评论已关闭，除了第 6 步应该是

`git pull clone2 development`

参考[另一个远程的Git合并分支](https://stackoverflow.com/questions/12921125/git-merge-branch-of-another-remote)

# sql - postgres 交叉表/转置

> ID：14587056
> 
> 赞同：0
> 
> 时间：2013-01-29T16:03:49.497
> 
> 标签：sql, postgresql, pivot, crosstab, unpivot

我想寻求帮助..我有这张桌子

```
user_id  | Metric_1 | Metric_2 | Metric_3
------------------------------------------
1        | Jan      | 10       | yes
2        | Feb      | 10       | No
3        | Mar      | 20       | No
4        | Apr      | 30       | No
5        | May      | 40       | yes
6        | Jun      | 50       | No
7        | Jul      | 60       | No
8        | Aug      | 70       | yes
9        | Sep      | 80       | No
10       | Oct      | 90       | yes
11       | Nov      | 10       | No
12       | Dec      | 20       | No 
```

我想在查询中得到这个结果，我正在使用 postgres tablefunc 交叉表，但我可以得到这个结果......希望你能帮助我

```
| January | February | March | April | May
 ---------------------------------------------------
| 10      | 10       | 20    |30     |40
| yes     | NO       | No    |yes    |No 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:30:47.363

对于这种类型的转换，您可以*取消*透视然后*旋转*数据。对于 unpivot，您可以使用`UNION ALL`查询，然后应用带有`CASE`表达式的聚合函数来透视数据：

```
select 
  max(case when metric_1 ='Jan' then value end) as Jan,
  max(case when metric_1 ='Feb' then value end) as Feb,
  max(case when metric_1 ='Mar' then value end) as Mar,
  max(case when metric_1 ='Apr' then value end) as Apr,
  max(case when metric_1 ='May' then value end) as May,
  max(case when metric_1 ='Jun' then value end) as Jun,
  max(case when metric_1 ='Jul' then value end) as Jul,
  max(case when metric_1 ='Aug' then value end) as Aug,
  max(case when metric_1 ='Sep' then value end) as Sep,
  max(case when metric_1 ='Oct' then value end) as Oct,
  max(case when metric_1 ='Nov' then value end) as Nov,
  max(case when metric_1 ='Dec' then value end) as "Dec"
from
(
  select user_id, metric_1, cast(metric_2 as varchar(10)) as value, 'Metric2' as col
  from yourtable
  union all
  select user_id, metric_1, metric_3 as value, 'Metric3' as col
  from yourtable
) src
group by col
order by col 
```

请参阅[带有演示的 SQL Fiddle](http://sqlfiddle.com/#!10/61248/3)

结果是：

```
| JAN | FEB | MAR | APR | MAY | JUN | JUL | AUG | SEP | OCT | NOV | DEC |
-------------------------------------------------------------------------
|  10 |  10 |  20 |  30 |  40 |  50 |  60 |  70 |  80 |  90 |  10 |  20 |
| yes |  No |  No |  No | yes |  No |  No | yes |  No | yes |  No |  No | 
```

# objective-c - 可可文本框更新变量

> ID：14587062
> 
> 赞同：0
> 
> 时间：2013-01-29T16:04:05.963
> 
> 标签：objective-c, cocoa, xcode4.5

我有一个带有数字格式化程序的文本字段，它绑定到一个带有 Cocoa 绑定的变量。还有一个步进器，我绑定到同一个变量以增加值，我使用 NSLog 进行测试，效果很好。

我的问题是：每当我在框中输入数字时，除非我按 Enter，否则变量不会更新。NSTextBox 如何知道用户何时完成输入？有没有办法在输入每个数字后动态更新变量？

非常感谢

富有的

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:14:04.717

在 Interface Builder 中打开控件的“Continuous”属性应该会使字段在值更改时触发其绑定。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:09:05.967

首先，您*确定*要立即更新吗？用户的击键之一可能是无效字符（即，不是数字）。NSNumberFormatter 可以提供帮助，但我相信您仍然必须“提交”该条目，然后才能将其验证为正确的数字条目。

其次，您始终可以实现[-textDidChange: NSTextDelegate](http://developer.apple.com/library/mac/documentation/Cocoa/Reference/NSTextDelegate_Protocol/Reference/Reference.html#//apple_ref/occ/intfm/NSTextDelegate/textDidChange%3a)方法。不过，同样的问题与上述相同。可能会触发无效输入。要解决此问题，您可以尝试从字符串输入创建一个 NSNumber，如果您没有获得 NSNumber，请不要费心做出反应，直到您这样做（如果该字段因输入无效而失去焦点，请将其更改回最后一个有效值），但是您正在复制您免费获得的“提交时验证” NSNumberFormatter 行为。

# android - Android：活动生命周期

> ID：14587067
> 
> 赞同：-1
> 
> 时间：2013-01-29T16:04:22.863
> 
> 标签：android, database, android-activity, destroy

[我正在从官方网站（ http://developer.android.com](http://developer.android.com)）学习android编程。我了解大部分生命周期，但我不确定系统何时破坏活动。

据我了解，当某些活动在其中停留更长时间`onStop()`或前台活动需要更多资源时，系统正在破坏活动。那正确吗 ？

从我读到的更新数据库的最有效方法是 in `onStop()`，但假设用户正在向我的“字典”应用程序添加一个单词。所以我需要在列表中收集这些单词然后更新数据库？或者我应该用每个单词（在其他方法中）向 DB 插入行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:53:13.637

据我了解，您永远不会知道 android 何时强制您的应用程序停止。

所以它是这样的

onCreate() // 在这里你可以初始化

这是安全的

onResume() // 这里开启

onPause() // 这里关闭

// 此后不确定

但是如果你确定总是调用 finish() 你可以使用其他的

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:55:35.733

数据必须保存在`onPause()`方法中。否则，系统可能会终止您的进程，恕不另行通知。

# jsp - 在 JSP 中获取今天的日期并将其与 Date 变量进行比较

> ID：14587068
> 
> 赞同：9
> 
> 时间：2013-01-29T16:04:24.873
> 
> 标签：jsp, date, jstl, el

我正在尝试在一个基本示例上比较日期，但无法找到最好的方法。

下面显示了获取今天的日期/时间，然后在 IF 语句中进行比较。我确定我硬编码的格式是错误的，但是当输出格式时，它是默认的格式。所以问题是我如何查看一个日期是否低于另一个日期以及如何将它们格式化为仅日期？

```
<p>
    <c:set var="testme" value="<%=new java.util.Date()%>"/>
    <b><c:out value="${testme}"/></b>
</p>

<c:if test="${testme lt 'Tue Jan 29 16:02:58 GMT 2013'}">
    <p><b><span class="wrap">Test date is less.</span></b></p>
</c:if> 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-29T16:15:09.330

对于初学者，不要混合使用*Scriptlet*和 taglibs/EL。这只是麻烦的秘诀。使用一个或另一个，而不是两者。假设你想继续使用 taglibs/EL，你可以这样做：

```
<p>
    <jsp:useBean id="today" class="java.util.Date" />
    <b><c:out value="${today}"/></b>
</p>

<fmt:setLocale value="en_US" />
<fmt:parseDate var="testdate" value="Tue Jan 29 16:02:58 GMT 2013" pattern="EEE MMM dd HH:mm:ss z yyyy" />
<c:if test="${today.time gt testdate.time}">
    <p><b><span class="wrap">Test date is less than now.</span></b></p>
</c:if> 
```

请注意，我还修复了变量名称和描述中的一些奇怪的反逻辑。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-02-26T11:41:54.717

在 JSTL 中比较两个日期的代码。首先格式化两个日期，然后使用比较

**gt** - 大于

**lt** - 小于

**ge** - 大于等于

**le** - 小于等于

```
<fmt:formatDate var="date_to_comare" value="${date_to_comare_value}" pattern="yyyy-MM-dd HH:mm:ss"/>
<c:set var="today_date" value="<%=new java.util.Date()%>"/>
<fmt:formatDate var="today_formated_date" value="${today}" pattern="yyyy-MM-dd HH:mm:ss"/>  
<c:if test="${date_to_comare lt today_formated_date}">
Write your code here
</c:if> 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-12T22:36:21.217

你可以这样做：

```
<%@ taglib  uri = "<pathToLibraries>/fmt.tld" prefix = "fmt" %>

<%------  Do Something between dates ----------%>
<jsp:useBean id="now" class="java.util.Date"/>

<c:set var = "start" value = "30-07-2019" />
<c:set var = "end" value = "24-09-2019" />

<fmt:parseDate value = "${start}" var = "parsedStartDate" pattern = "dd-MM-yyyy" />
<fmt:parseDate value = "${end}" var = "parsedEndDate" pattern = "dd-MM-yyyy" />

<c:if test="${(parsedStartDate le now) && (parsedEndDate ge now)}">
  <%------  Do Something between dates ----------%>
</c:if> 
```

`ge, le, gt, lt`并且已经讨论了不同的选项等。

# c# - 自然排序问题

> ID：14587070
> 
> 赞同：2
> 
> 时间：2013-01-29T16:04:25.973
> 
> 标签：c#, sorting, icomparer

我一直在尝试使用从[这里](http://zootfroot.blogspot.co.uk/2009/09/natural-sort-compare-with-linq-orderby.html)借来的代码来整理我的应用程序的自定义对象集合。通常排序工作正常，直到我遇到以下字符串

```
D-016.0,
D-016.,
D-016.00,
D-016.000 001,
D-016.000 002,
D-016.000,
D-016.00 003,
D-016.00 002,
D-016\. 001,
D-016\. 002,
D-016.0 001,
D-016.00 001 
```

由于某些非常奇怪的原因，它按顺序返回集合

```
D-016.00,
D-016.000,
D-016.0,
D-016.000 001,
D-016\. 001,
D-016.0 001,
D-016.00 001,
D-016.00 002,
D-016.000 002,
D-016\. 002,
D-016.00 003,
D-016. 
```

我期望看到的集合看起来像 Windows 资源管理器将显示的应该是

```
D-016\. 001,
D-016\. 002,
D-016.,
D-016.000 001,
D-016.000 002,
D-016.000,
D-016.00 001,
D-016.00 002,
D-016.00 003,
D-016.00,
D-016.0 001,
D-016.0, 
```

[根据 Michael Kniskern 发布的C# 中的自然排序顺序](https://stackoverflow.com/questions/248603/natural-sort-order-in-c-sharp/248613#248613)的建议，我尝试实现使用 shlwapi.dll 的答案，这将返回我希望按照上面列出的最后一个集合看到的顺序。然而，这种方法仅适用于 Windows 7，并在 Windows XP 中返回不均匀的集合。

我怀疑列为 D-016.00、D-016.0 和 D-016.000 的文件在解析为 int 时会得到串联的 0 列表，这会导致此错误。但是我无法确切了解如何解决这个问题（对于这些比较器接口来说太新了）。任何人都可以为此提出解决方案吗？

下面是我目前正在使用的代码

```
public class NaturalSorter<T> : IComparer<string>, IDisposable
{
    private readonly bool ascending;
    private Dictionary<string, string[]> table = new Dictionary<string, string[]>();

    public NaturalSorter(bool inAscendingOrder = true)
    {
        ascending = inAscendingOrder;
    }

    #region IComparer Members

    public int Compare(string[] x, string[] y)
    {
        throw new NotImplementedException();
    }

    #endregion

    #region IComparer Members

    int IComparer<string>.Compare(string x, string y)
    {
        if (x == y)
            return 0;

        string[] x1, y1;

        if (!table.TryGetValue(x, out x1))
        {
            x1 = Regex.Split(x.Replace(" ", ""), "([0-9]+)");
            table.Add(x, x1);
        }

        if (!table.TryGetValue(y, out y1))
        {
            y1 = Regex.Split(y.Replace(" ", ""), "([0-9]+)");
            table.Add(y, y1);
        }

        int returnVal = 0;

        for (int i = 0; i < x1.Length && i < y1.Length; i++)
        {
            if (x1[i] != y1[i])
            {
                returnVal = PartCompare(x1[i], y1[i]);
                return ascending ? returnVal : -returnVal;
            }
        }

        if (y1.Length > x1.Length)
        {
            returnVal = 1;
        }
        else if (x1.Length > y1.Length)
        {
            returnVal = -1;
        }
        else
        {
            returnVal = 0;
        }

        return ascending ? returnVal : -returnVal;
    }

    private static int PartCompare(string left, string right)
    {
        int x, y;
        if (!int.TryParse(left, out x))
            return left.CompareTo(right);

        if (!int.TryParse(right, out y))
            return left.CompareTo(right);

        return x.CompareTo(y);
    }

    #endregion

    public void Dispose()
    {
        table.Clear();
        table = null;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:55:45.987

这是我能想到的最好的：

将拆分替换为：

```
if (!table.TryGetValue(x, out x1))
{
    x1 = Regex.Split(x, @"([0-9]+|\.)");
    table.Add(x, x1);
}

if (!table.TryGetValue(y, out y1))
{
    y1 = Regex.Split(y, @"([0-9]+|\.)");
    table.Add(y, y1);
} 
```

并将以下内容添加到顶部 `PartCompare()`

```
private static int PartCompare(string left, string right)
{
     if (left.Length > right.Length) return -1;
     else if (left.Length < right.Length) return 1;

     int x, y;
     ... 
```

这会产生：

```
D-016\. 001,
D-016\. 002,
D-016.000 001,
D-016.000 002,
D-016.000,
D-016.00 001,
D-016.00 002,
D-016.00 003,
D-016.00,
D-016.0 001,
D-016.0,
D-016.,  // The one out-of-order item. 
```

# amazon-ec2 - 来自自定义 EBS 支持的实例的 Instance Store AMI

> ID：14587072
> 
> 赞同：2
> 
> 时间：2013-01-29T16:04:30.943
> 
> 标签：amazon-ec2, amazon-ami, ec2-ami, ec2-api-tools

抱歉，如果这应该从文档中很容易理解，但我没有 - 如果我使用一个容易获得的 Ubuntu EBS-boot AMI 启动 EC2 实例，安装一堆东西并在“/”下移动一些文件"，然后我使用 创建一个 Instance-Store AMI `ec2-bundle-vol`，实际驻留在安装在 "/" 的 EBS 卷上的数据是否会进入 AMI？

考虑到从用户的角度来看，我希望在我的自定义 AMI 的未来启动中在“/”下找到与原始实例中相同的内容。Amazon 拍摄“/”文件夹的快照以创建我的 AMI 也是有意义的（否则，*会*拍摄什么快照？！），即使 AMI 本身是基于实例存储的，而原始实例得到 EBS 的支持。

请帮助我理解这一点。

我指的是：http:
[//docs.aws.amazon.com/AWSEC2/latest/UserGuide/creating-snapshot-s3-linux.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/creating-snapshot-s3-linux.html)
[http://docs.aws.amazon.com/AWSEC2/latest/命令行参考/CLTRG-ami-bundle-vol.html](http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/CLTRG-ami-bundle-vol.html)

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-10-10T09:51:13.620

是的，驻留在根卷上的 EBS 卷上的数据将进入 AMI。

来自 AWS 文档：“默认情况下，AMI 捆绑过程会在 /tmp 目录中创建一个压缩的加密文件集合，这些文件代表您的根卷。” [http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/creating-an-ami-instance-store.html](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/creating-an-ami-instance-store.html)

它当然会排除私钥和 bash 历史记录......除非您使用 --no-filter 选项：[http ://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/CLTRG-ami-bundle-vol .html](http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/CLTRG-ami-bundle-vol.html)

**转换程序：**

它基本上是[创建](http://docs.aws.amazon.com/AWSEC2/latest/UserGuide/creating-an-ami-instance-store.html)需要遵循的实例存储支持的 AMI 的过程。不过，您必须在注册 AMI 时指明兼容的内核。

1.  在要转换的实例上设置 EC2 CLI 工具（如果尚未安装）

2.  获得 X.509 证书和私钥（可以自签名`openssl req -x509 -newkey rsa:2048 -keyout private-key.pem -out cert.pem -days 385 -nodes`：）

3.  连接到要转换的实例

4.  将您的 X.509 证书和私钥移动到 /tmp/`mv private-key.pem cert.pem /tmp/`

5.  创建文件夹 /tmp/out/`mkdir /tmp/out`

6.  创建您的捆绑包：`ec2-bundle-vol -k /tmp/private-key.pem -c /tmp/cert.pem -u <account_id> -r x86_64 -d /mnt/out`有关更多详细信息，请参阅文档[http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/CLTRG-ami-upload-bundle.html](http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/CLTRG-ami-upload-bundle.html)您可能需要挂起块设备映射（例如 -B根=/dev/sda1)

7.  将包上传到 S3 存储桶：`ec2-upload-bundle -b <bucket_name>/<bundle_folder>/<bundle_name> -a <access_key> -s <secret_key> -m /tmp/out/image.manifest.xml --region <aws_region>`

8.  注册 AMI：`ec2-register --kernel <kernel_id> --region <aws_region> --name “&lt;ami_name>" --description “&lt;ami_description>" <bucket_name>/<bundle_folder>/<bundle_name>/image.manifest.xml -O <access_key> -W <secret_key>`有关更多详细信息，请参阅文档：http: [//docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-RegisterImage.html](http://docs.aws.amazon.com/AWSEC2/latest/CommandLineReference/ApiReference-cmd-RegisterImage.html)（请参阅 --root-device-name 和 -b 选项）

The devices mapping and volumes organisation are different between ebs-backed and instance store-backed instances so you need to make sure everything is where the system expects it to be

# python - 使用 matplotlib.pyplot.plot() 绘图时出错

> ID：14587075
> 
> 赞同：1
> 
> 时间：2013-01-29T16:04:36.673
> 
> 标签：python, matplotlib, macports

以下代码给出了我不明白为什么的错误：

```
 import numpy as np
    import matplotlib.pyplot as plt
    a = np.arange(10)
    plt.plot(a)
    [<matplotlib.lines.Line2D at 0x116be8890>]
    plt.show()

    2013-01-29 10:58:18.891 Python[27257:903] *** __NSAutoreleaseNoPool(): Object 0x105b27810 of class NSCFArray autoreleased with no pool in place - just leaking
    2013-01-29 10:58:18.893 Python[27257:903] *** __NSAutoreleaseNoPool(): Object 0x105b37f60 of class __NSFastEnumerationEnumerator autoreleased with no pool in place - just leaking
    2013-01-29 10:58:18.895 Python[27257:903] *** __NSAutoreleaseNoPool(): Object 0x105bee900 of class NSObject autoreleased with no pool in place - just leaking 
```

我有 matplotlib 1.2.0、numpy 1.6.2、python 2.7.3 和 ipython 0.13.1。这些软件包已使用 macports 安装。这是在 Mac OS 10.6.8 上执行的，而我在 10.7.5 上看不到它。

编辑：[这篇文章显示了同样的错误，虽然没有明确找到解决方案](https://stackoverflow.com/questions/14004243/python-matplotlib-nsautoreleasenopool-error-just-leaking)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:52:14.553

我还没有找到解决办法。我的解决方法是安装另一个后端：qt4。这需要做：

```
 sudo port install qt4-mac
    sudo port install py27-qt4 
```

然后通过添加修改（或创建如果没有）文件 ~/.matplotlib/matplotlibrc：

```
 backend : QT4Agg 
```

然后上面的文字没有问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-13T22:33:09.303

我也有这个问题，我的解决方法是添加：

```
plt.ion() 
```

在第一个绘图命令之前。这将打开交互式绘图模式，并使错误消失。

# mysql - 给定 X 的 3 个可能值，执行 WHERE (X = B OR X = C) 还是执行 WHERE X != A 更快？

> ID：14587078
> 
> 赞同：4
> 
> 时间：2013-01-29T16:04:44.277
> 
> 标签：mysql, query-optimization

给定 X (A, B, C) 的 3 个可能值，这样做是否更快：

1.  `WHERE (X = 'B' OR X = 'C')`， 或者
2.  `WHERE X != 'A'`

还是取决于？如果是这样，那么它取决于什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:17:02.030

*   选项1：

    ```
    WHERE (X = 'B' OR X = 'C') 
    ```

    和

    ```
    WHERE X IN ('B', 'C') 
    ```

    是等价的，并且可以在 . 上使用索引`(X)`。

*   选项 2：

    ```
    WHERE X != 'A' 
    ```

    不会在`(X)`. 请参阅 Henrik Grubbström 在 MySQL 文档中的评论，MySQL**[如何优化 WHERE 子句](http://dev.mysql.com/doc/refman/5.5/en/where-optimizations.html)**页面：

> <> 运算符忽略索引：

因此，如果使用索引使查询更快（例如，如果 99% 的表有`X = 'A'`），请使用第一个选项。

*注意：运算符是 SQL 标准不等式运算符`!=`的同义词（在 MySQL 中） 。`<>`*

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:06:51.827

您的第二个操作应该更快，因为它需要较少的逻辑检查。如果它正在扫描一个值，它只需要检查以确保它不是`A`，你的第一个操作需要匹配`B`，然后如果没有匹配，`C`. 关于索引的使用，这取决于您的索引是什么样的以及它是如何被调用的。如果您在列上有一个索引`W, X`并且您只 filter `X`，则该索引将不会被用作索引从左到右工作。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:08:47.313

直接相等 (=) 和不等式 (!=) 需要相同的时间。最好的情况下，您的查询将同时运行，但最坏的情况下，情况 1\. 可能会更慢，因为您正在添加另一个情况以通过`OR`.

当然不知道是否有索引或 X 的值分布会影响性能......

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T16:09:09.170

在我看来，第二项更好，因为它总是只有一个比较；在第一项中，如果要测试的值是“C”或“A”，则您必须进行 2 次比较，第一次（X =“B”）将失败，然后第二次比较给出最终结果。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T16:10:51.267

如果案例 1 使用索引，在我看来，如果 X 上有索引，它应该比案例 2 更快，如果案例 2 不使用索引，在我看来它不会。一般来说。它还取决于值的实际分布：如果显着偏斜，结果将相应变化。

# css - 最后一个字符无法显示在 IE9 的圆形输入字段中

> ID：14587083
> 
> 赞同：0
> 
> 时间：2013-01-29T16:05:00.070
> 
> 标签：css, internet-explorer

有没有人见过这种奇怪的行为？当我在 IE9 中有一个固定宽度、一些填充和圆角的输入字段时，由于某种原因，我在文本框已满时键入的最后一个字符不会显示。它在那里，但 IE 没有将字符串移动到足够的左侧以显示最右边的字符。

这是一个案例来说明我的意思。第一个字段没问题，第二个字段显示当您在字段已填满时继续键入时我解释的行为：

```
<!DOCTYPE html>
<html>
<head>
<title>Text input field</title>
<style type="text/css">
.textItem {
    padding: 2px 8px 2px 2px;
border-radius: 5px;
}
</style>
</head>
<body style="padding: 50px 200px">

<form method="post">
    <input type="text" size="5"/>
    <br/><br/>
    <input class="textItem" style="width: 119px" type="TEXT"/>
</form>
</body>
</html> 
```

有谁知道如何解决这个问题（希望不改变已经定义的 CSS 属性）？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T15:13:44.827

`box-sizing: border-box`通过应用于输入字段解决了问题。我已经相应地调整了宽度。

# android - 如何在 Android 中全局强制屏幕方向？

> ID：14587085
> 
> 赞同：19
> 
> 时间：2013-01-29T16:05:02.617
> 
> 标签：android, android-layout, orientation

有许多应用程序能够强制屏幕旋转。即使应用程序明确希望以另一个方向查看，它们也能正常工作。现在我正在禁用加速度计旋转系统设置并设置我的首选方向。应用程序仍然可以覆盖它。

这是能够覆盖应用程序请求方向的应用程序之一：

[https://play.google.com/store/apps/details?id=nl.fameit.rotate&hl=en](https://play.google.com/store/apps/details?id=nl.fameit.rotate&hl=en)

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-02-13T20:49:59.090

我尝试了 kagronick 的回答，但无法成功。在搞砸了一段时间后，我最终使用系统覆盖窗口让它工作并删除了我发现的 LayoutParams 都是不必要的。这是我的最终解决方案：

```
orientationChanger = new LinearLayout(this);
// Using TYPE_SYSTEM_OVERLAY is crucial to make your window appear on top
// You'll need the permission android.permission.SYSTEM_ALERT_WINDOW
WindowManager.LayoutParams orientationLayout = new WindowManager.LayoutParams(WindowManager.LayoutParams.TYPE_SYSTEM_OVERLAY, 0, PixelFormat.RGBA_8888);
// Use whatever constant you need for your desired rotation
orientationLayout.screenOrientation = ActivityInfo.SCREEN_ORIENTATION_SENSOR;

// Optional: Replace "Context" with "Service" when used in a service
WindowManager wm = (WindowManager) this.getSystemService(Context.WINDOW_SERVICE);
wm.addView(orientationChanger, orientationLayout);
orientationChanger.setVisibility(View.VISIBLE); 
```

您可以在我基于此发布的应用程序中看到我的成功：[Force Dock Rotation](https://play.google.com/store/apps/details?id=uk.co.chrispaton.forcedockrotation)。

* * *

## 回答 #2

> 赞同：15
> 
> 时间：2013-02-01T20:17:31.293

这可以通过创建一个隐藏的系统对话框来完成。它有点像黑客，但它足够疯狂，可以工作。

```
 wm = (WindowManager) content.getSystemService(Service.WINDOW_SERVICE);

    orientationChanger = new LinearLayout(content);
    orientationChanger.setClickable(false);
    orientationChanger.setFocusable(false);
    orientationChanger.setFocusableInTouchMode(false);
    orientationChanger.setLongClickable(false);

    orientationLayout = new WindowManager.LayoutParams(
            LayoutParams.WRAP_CONTENT, LayoutParams.WRAP_CONTENT,
            windowType, WindowManager.LayoutParams.FLAG_NOT_TOUCH_MODAL
                    | WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE,
            PixelFormat.RGBA_8888);

    wm.addView(orientationChanger, orientationLayout);
    orientationChanger.setVisibility(View.GONE);

    orientationLayout.screenOrientation = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;
    wm.updateViewLayout(orientationChanger, orientationLayout);
    orientationChanger.setVisibility(View.VISIBLE); 
```

* * *

## 回答 #3

> 赞同：15
> 
> 时间：2014-11-12T20:06:48.220

顺便说一句，您还可以全局更改屏幕方向，而无需在不受支持的应用程序中强制它。（我知道这个问题是关于覆盖应用程序的偏好，但这仍然是有用的并且主要是相关的信息。）

1.  [授予](http://developer.android.com/guide/topics/manifest/uses-permission-element.html)对AndroidManifest.xml中[系统设置 ( `WRITE_SETTINGS`)的访问权限](http://developer.android.com/reference/android/Manifest.permission.html#WRITE_SETTINGS)

    ```
    <uses-permission android:name="android.permission.WRITE_SETTINGS" /> 
    ```

2.  进口[`Settings`](http://developer.android.com/reference/android/provider/Settings.html)

    ```
    import android.provider.Settings; 
    ```

3.  确保禁用[Android 屏幕自动旋转](http://developer.android.com/reference/android/provider/Settings.System.html#ACCELEROMETER_ROTATION)

    ```
    Settings.System.putInt(
        getContentResolver(),
        Settings.System.ACCELEROMETER_ROTATION,
        0
    ); 
    ```

4.  设置[`USER_ROTATION`](http://developer.android.com/reference/android/provider/Settings.System.html#USER_ROTATION)为所需的设置，它应该是[`ROTATION_`常量](http://developer.android.com/reference/android/view/Surface.html#ROTATION_0)之一。这些值代表设备自然方向的屏幕旋转，可以是横向或纵向。

    ```
    Settings.System.putInt(
        getContentResolver(),
        Settings.System.USER_ROTATION,
        Surface.ROTATION_0 //Or a different ROTATION_ constant
    ); 
    ```

请注意，[`USER_ROTATION`](http://developer.android.com/reference/android/provider/Settings.System.html#USER_ROTATION)即使您的应用未运行或已卸载，更改也会持续存在。如果我没记错的话，用户可以通过手动禁用和启用自动旋转来重置这个值。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2015-04-26T06:28:59.717

## 创建系统视图

创建一个[`View`](http://developer.android.com/reference/android/view/View.html)始终显示在其他应用程序之上的隐形。[`View`](http://developer.android.com/reference/android/view/View.html)s 可以指定他们自己的方向偏好，因此您的视图的方向可以用来覆盖底层视图和应用程序的方向。

### 选项

我知道您可以使用几种不同的视图类型来实现这一点，每种都有自己的缺点。

1.  系统覆盖窗口 ( [`TYPE_SYSTEM_OVERLAY`](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#TYPE_SYSTEM_OVERLAY))

    需要[`SYSTEM_ALERT_WINDOW`](http://developer.android.com/reference/android/Manifest.permission.html#SYSTEM_ALERT_WINDOW)权限。（将以下内容添加到[AndroidManifest.xml](http://developer.android.com/guide/topics/manifest/manifest-intro.html)。）

    ```
    <uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW" /> 
    ```

2.  吐司窗口 ( [`TYPE_TOAST`](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#TYPE_TOAST))

    无需许可，[MIUI V8 除外](http://en.miui.com/thread-327347-1-1.html)。

    不显示在某些窗口类型上，因此它们的方向可能不会受到影响：

    *   来电对话框 ( [`TYPE_PRIORITY_PHONE`](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#TYPE_PRIORITY_PHONE))
    *   [梦想](http://developer.android.com/reference/android/service/dreams/DreamService.html)( `TYPE_DREAM`)
    *   按键保护/锁屏 ( [`TYPE_KEYGUARD_DIALOG`](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#TYPE_KEYGUARD_DIALOG), `TYPE_KEYGUARD_SCRIM`)

### 指示

1.  创建一个[`View`](http://developer.android.com/reference/android/view/View.html).
2.  创建一个[`WindowManager.LayoutParams`](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#TYPE_INPUT_METHOD).
    1.  设置[`type`](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#type)为您在上面选择的值。
    2.  将其归零[`width`](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html#width)并[`height`](http://developer.android.com/reference/android/view/ViewGroup.LayoutParams.html#height)防止重叠时无法运行的应用程序出现问题。（例如，如果窗口位于其顶部，则当您尝试启用辅助功能服务时，Android 不会让您按下“确定”按钮。）
    3.  将其设置为您想要[`screenOrientation`](http://developer.android.com/reference/android/view/WindowManager.LayoutParams.html#screenOrientation)的任何[方向值](http://developer.android.com/reference/android/content/pm/ActivityInfo.html#screenOrientation)。

### 例子

执行

```
public class ScreenOrientationEnforcer {

    private final View view;
    private final WindowManager windows;

    public ScreenOrientationEnforcer(Context context) {
        windows = (WindowManager) context.getSystemService(Context.WINDOW_SERVICE);
        view = new View(context);
    }

    public void start() {
        WindowManager.LayoutParams layout = generateLayout();
        windows.addView(view, layout);
        view.setVisibility(View.VISIBLE);
    }

    public void stop() {
        windows.removeView(view);
    }

    private WindowManager.LayoutParams generateLayout() {
        WindowManager.LayoutParams layoutParams = new WindowManager.LayoutParams();

        //So we don't need a permission or activity
        //Note that this won't work on some devices running MIUI
        layoutParams.type = WindowManager.LayoutParams.TYPE_TOAST;

        //Just in case the window type somehow doesn't enforce this
        layoutParams.flags =
            WindowManager.LayoutParams.FLAG_NOT_FOCUSABLE
            | WindowManager.LayoutParams.FLAG_NOT_TOUCHABLE;

        //Prevents breaking apps that detect overlying windows enabling
        //(eg UBank app, or enabling an accessibility service)
        layoutParams.width = 0;
        layoutParams.height = 0;

        //Try to make it completely invisible
        layoutParams.format = PixelFormat.TRANSPARENT;
        layoutParams.alpha = 0f;

        //The orientation to force
        layoutParams.screenOrientation = ActivityInfo.SCREEN_ORIENTATION_LANDSCAPE;

        return layoutParams;
    }

} 
```

用法

```
ScreenOrientationEnforcer screenOrientationEnforcer
    = new ScreenOrientationEnforcer(context);

//Force screen orientation
screenOrientationEnforcer.start();

//Stop forcing screen orientation
screenOrientationEnforcer.stop(); 
```

## 缺点

*   根据我的经验，如果您的应用程序崩溃或被终止，该视图可能会持续存在。重新启动设备似乎可以解决此问题。

## 参考

*   窗口类型和 z 顺序之间的映射：[`PhoneWindowManager.windowTypeToLayerLw`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/5.0.2_r1/com/android/internal/policy/impl/PhoneWindowManager.java#PhoneWindowManager.windowTypeToLayerLw%28int%29)
*   每种窗口类型所需的权限：[`PhoneWindowManager.checkAddPermission`](http://grepcode.com/file/repository.grepcode.com/java/ext/com.google.android/android/5.0.2_r1/com/android/internal/policy/impl/PhoneWindowManager.java#PhoneWindowManager.checkAddPermission%28android.view.WindowManager.LayoutParams%2Cint%5B%5D%29)

# actionbarsherlock - 无法执行dex：多个dex文件定义了Lcom/actionbarsherlock/R$attr；

> ID：14587087
> 
> 赞同：0
> 
> 时间：2013-01-29T16:05:12.577
> 
> 标签：actionbarsherlock

我在我的应用程序中使用的库中使用 ActionBarLibrary

当我尝试编译时收到此消息

[2013-01-28 16:09:46 - Dex Loader] 无法执行 dex：多个 dex 文件定义 Lcom/actionbarsherlock/R$attr；[2013-01-28 16:09:46 - comfree] 转换为 Dalvik 格式失败：无法执行 dex：多个 dex 文件定义 Lcom/actionbarsherlock/R$attr；

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-07T21:47:03.030

As asked [here](https://stackoverflow.com/questions/14742602/unable-to-execute-dex-multiple-dex-files-define-lcom-actionbarsherlock-rattr), I was facing the exact same error yesterday. I pinpointed the cause of the error to /bin/classes. If I deleted the /classes dir before running the app, the app would compile and run. Of course, when I tried to actually export the app, the /classes dir would come back and along with it the error.

The solution to my problem was to install the latest version of Eclipse. You will then need to install the latest version of the ADT but all the Android versions you have downloaded earlier for the other Eclipse installation will be detected and used for this one as well. When I export or run the app through Eclipse, the /classes folder does not appear now.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-12T17:54:57.163

右键单击项目以转到项目属性>>java构建路径>>选择顺序和导出然后取消选择除android4.0之外的所有内容或您拥有的所有内容然后清理并构建您的项目，现在错误不会再次出现..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-05-20T19:17:19.393

我的问题的解决方案是我删除了我复制粘贴在项目的 lib 文件夹中的 jar 文件。我在构建路径中明确导入了外部 jar

# javascript - Twitter Bootstrap 时间选择器 defaultTime NaN

> ID：14587091
> 
> 赞同：1
> 
> 时间：2013-01-29T16:05:21.377
> 
> 标签：javascript, jquery, twitter-bootstrap, timepicker

我已经读到您可以使用 defaultTime 参数设置预设时间，但是当您尝试使用它时，这给我的只是值微调器中的 NaN 小时/分钟。

这是我的代码：

```
$(document).ready(function()
{
$('.datepicker').datepicker() ;
$('.timepicker').timepicker({
    minuteStep: 5,
    showInputs: false,
    disableFocus: true,
    showMeridian: false,
    defaultTime: '00:00'
});
}) 
```

PS 我希望它是 00:00 因为我将它用作“持续时间”选择器，而不是时间。

我该如何解决？

* * *

[时间选择器： http](http://jdewit.github.com/bootstrap-timepicker/) ://jdewit.github.com/bootstrap-timepicker/

日期选择器：[http ://www.eyecon.ro/bootstrap-datepicker/](http://www.eyecon.ro/bootstrap-datepicker/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:40:42.817

我改用价值：

```
$('.timepicker').timepicker({
    minuteStep: 5,
    showInputs: false,
    disableFocus: true,
    showMeridian: false,
    defaultTime: 'value'
}); 
```

然后它使用输入字段中的值而不是当前时间作为起点，这是 HTML：

```
<div>
    <input class="timepicker" type="text" class="input-small" value="00:00">
    <i class="icon-time"></i>
</div> 
```

我尝试了上面的答案，但它对我不起作用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-02-01T00:49:53.067

我是**jdewit/bootstrap-timepicker**的作者。
它最近得到了一些更新，并且**“价值”**选项已被弃用。

您的初始尝试现在有效。

```
 $('.timepicker').timepicker({
        defaultTime: '00:00'
    }); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:17:31.750

使用以下格式

```
defaultTime:'00:00:00' 
```

编辑：

> 设置初始时间值。将其设置为“当前”会将其设置为当前时间。可用选项 [当前、值或实际时间，例如 01:00]

# php - 从 Symfony 2 包自动加载路由

> ID：14587097
> 
> 赞同：6
> 
> 时间：2013-01-29T16:05:41.080
> 
> 标签：php, symfony

Symfony 2 包有一个很好的特性来自动加载/扩展应用程序配置文件，比如 services.yml。但是，这不适用于路由，因为我必须手动编辑应用程序的 routing.yml 才能从我的 Bundle（控制器或 routing.yml 本身）加载路由数据。

是否可以无缝加载这样的路由配置？

- - 编辑

我最终这样做了，但它很丑陋：

```
<?php

use Symfony\Component\Routing\RouteCollection;

$collection = new RouteCollection();

foreach (glob(__DIR__.'/../../src/Vendor/MySystem/Plugins/*Bundle/Controller/', GLOB_ONLYDIR) as $controller) {
    $controller = str_replace(__DIR__.'/../../src/Vendor/MySystem/Plugins/', '', $controller);
    $collection->addCollection($loader->import("@$controller"));
}

return $collection; 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:48:17.493

我认为你应该照顾“routing.loader”依赖注入标签它让你定义一个类来用你的逻辑定义路由

[http://symfony.com/doc/current/reference/dic_tags.html#routing-loader](http://symfony.com/doc/current/reference/dic_tags.html#routing-loader)

我想你也可以在你的包中定义一个dependencyInjection 扩展。在您的加载方法中，您可以更改容器定义等您的路线..

# xcode - JSON解析和UITableView填充后的“索引1超出范围”错误

> ID：14587098
> 
> 赞同：1
> 
> 时间：2013-01-29T16:05:42.857
> 
> 标签：xcode, json, parsing, uitableview, nsarray

这是我的代码（我需要从远程服务器上的源解析多个 JSON 文件），我需要使用每个解析的 SINGLE 值填充 UITableView：

**单个 JSON 源（简单），位于 h**p://WWW.REMOTESERVERWITHJSONSOURCE.NET/A1：**

```
{
  "id": 0001,
  "main": {
    "main1A": 100,
  },
  "main2": {
    "main2A": 200,
  },
  "url": "http...",
} 
```

**分配并初始化我的数组：**

```
 - (void)viewDidLoad {

        // other stuff

        arrayA = [[NSMutableArray alloc] initWithObjects:@"A1", @"A2", nil]; //each object A1, A2...An is the single JSON source I need to parse
        arrayB = [[NSMutableArray alloc] initWithObjects:@"B1", @"B2", nil];
    } 
```

**解析方法：**

```
- (void)LoadParse {

         main = [[NSMutableArray alloc] init];
         main2 = [[NSMutableArray alloc] init];

        for (int i=0; i < [arrayA count]; i++) {

            NSURL *url = [NSURL URLWithString:
                          [NSString stringWithFormat:
                           @"http://WWW.REMOTESERVERWITHJSONSOURCE.NET/%@",[arrayA objectAtIndex:i]]];

            NSURLRequest *request = [NSURLRequest requestWithURL:url];

            AFJSONRequestOperation *operation = [AFJSONRequestOperation JSONRequestOperationWithRequest:request success:^(NSURLRequest *request, NSHTTPURLResponse *response, id JSON) {

            NSMutableDictionary *arrayMain = [JSON valueForKey:@"main"];
            [main addObject:[arrayMain objectForKey:@"main1A"]];
            NSMutableDictionary *arrayMain2 = [JSON valueForKey:@"main2"];
            [main2 addObject:[arrayMain2 objectForKey:@"main2A"]];

            [table reloadData];
            [table scrollRectToVisible:CGRectMake(0, 0, 1, 1) animated:YES];

            }

            failure:^(NSURLRequest *request, NSHTTPURLResponse *response, NSError *error, id JSON){

            }];

            [operation start];

            }
    } 
```

**UITableView 方法：**

```
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section {
     return [arrayA count];
} 
```

// 其他方法

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath{

    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:@"Cell"];
    if (cell == nil) {
        cell = [[UITableViewCell alloc] initWithStyle:
                UITableViewCellStyleSubtitle reuseIdentifier:@"Cell"];
    }

            cell.textLabel.font = [UIFont systemFontOfSize:12];
            cell.detailTextLabel.font = [UIFont systemFontOfSize:11];

            cell.textLabel.text = [NSString stringWithFormat:@"%@ - %@",[main objectAtIndex:indexPath.row],[main2 objectAtIndex:indexPath.row]]; // here I get error 'NSRangeException', reason: '*** -[__NSArrayM objectAtIndex:]: index 1 beyond bounds [0 .. 0]'

        cell.textLabel.backgroundColor = [UIColor clearColor];
        cell.detailTextLabel.backgroundColor = [UIColor clearColor];
        return cell;
} 
```

**错误**：当我在arrayA中只分配和初始化一个对象时，没关系：UITableView填充一行并获取main1和main2的值；如果我在 arrayA 中分配并初始化多个对象，就像在这个例子中一样，应用程序崩溃并出现错误**信号 SIGABRT**：'NSRangeException'，原因：' *** -[__NSArrayM objectAtIndex:]: index 1 beyond bounds [0 .. 0]' ... 怎么了？请帮我找麻烦，谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:44:21.307

**[添加]**

```
// Implement this for your numberOfRowsInSection
- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section{
    unsigned int mCount  = [main  count];
    unsigned int m2Count = [main2 count];

    return ( (mCount > m2Count) ? mCount : m2Count );
} 
```

**[补充2]**

```
// Implement something like this within your cellForRowAtIndexPath routine
bool mainExist  = ( (indexPath.row < [main count])  ? YES : NO );
bool main2Exist = ( (indexPath.row < [main2 count]) ? YES : NO );

if(YES == mainExist && YES == main2Exist){
cell.textLabel.text = [NSString stringWithFormat:@"%@ - %@",[main objectAtIndex:indexPath.row],[main2 objectAtIndex:indexPath.row]];
}else if(YES == main2Exist){
    cell.textLabel.text = [NSString stringWithFormat:@"___ - %@",[main2 objectAtIndex:indexPath.row]];
}else{ // YES == mainExist
    cell.textLabel.text = [NSString stringWithFormat:@"%@ - ___",[main objectAtIndex:indexPath.row]];
} 
```

看起来（从您的代码中）您正在使用 arrayA 来驱动您的单元格计数例程，但使用 main 和 main2 来填充。您不应该使用 main 和/或 main2 来生成您的细胞计数例程输出。

看起来正在发生的事情是，当您以这种方式初始化时，arrayA 有 2 个元素，但是由于数据，main 和 main2 只填充了 1。因此，当您的单元格计数例程返回 2 时，单元格生成器例程正在寻找 main和 main2 索引 1，当索引仅变为 0 时。

这只是我从您的代码中直接看到的，如果您的代码或数据实际上不同，请告诉我。

# php - 仍在运行脚本的 PHP mssql_query 警告

> ID：14587106
> 
> 赞同：0
> 
> 时间：2013-01-29T16:06:18.993
> 
> 标签：php, sql-server

所以，我正在做很多事情，从一台服务器解析 XML，将内容写入另一台服务器，然后更新 mssql 数据库！整个过程似乎运行顺利，直到我为了好玩而从终端运行脚本！当我从终端运行它时，它会引发一堆警告，例如：

```
PHP Warning:  mssql_query(): message: Incorrect syntax near 's'. (severity 15) in 
/Volumes/Data/Users/username/Desktop/createXML.php on line 375

PHP Warning:  mssql_query(): General SQL Server error: Check messages from the SQL 
Server (severity 15) in /Volumes/Data/Users/username/Desktop/createXML.php on line 375

PHP Warning:  mssql_query(): message: Unclosed quotation mark after the character 
string ';'. (severity 15) in /Volumes/Data/Users/username/Desktop/createXML.php on line 375

PHP Warning:  mssql_query(): General SQL Server error: Check messages from the SQL 
Server (severity 15) in /Volumes/Data/Users/pdwivedi/Desktop/createXML.php on line 375

PHP Warning:  mssql_query(): Query failed in /Volumes/Data/Users/username/Desktop
/createXML.php on line 375 
```

这是第 375 行：

```
$query = mssql_query("UPDATE table_name SET C_ITP_STATUS = '".$ITP_Status."', 
C_ITP_ERRORS = '". $ITP_Error ."' WHERE id = '".$ID."';"); 
```

有趣的是查询执行并且我有一个更新的数据库。但是，当从终端运行时，它仍然会显示这些警告。我想摆脱他们！我必须使用 MS SQL！

曾尝试四处寻找解决方案，但人们几乎不使用 MS SQL，而 mySQL 则要好得多（至少在被广泛使用方面）。有什么帮助吗？

有趣的事情：当我只连接到数据库并在新的 php 脚本中执行此查询时，它工作正常并且没有警告。不知道为什么会这样！

**已解决：** 我不想在字符串中测试我的输入参数（相当蹩脚），因为我对自己所做的事情非常有信心！无论你多么自信（只是大声喊叫），**总是逃避特殊字符！**

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:13:41.647

在我看来，您的输入字符串之一可能包含引号，这会弄乱查询。您的错误也表明了这一点。您应该始终将所有可能的用户输入视为已污染，并养成每次都对其进行清理的习惯，即使您认为不需要这样做。

> 我创建了一个新的 php 脚本并对 3 个参数进行了硬编码，查询运行良好！

这也使我相信变量中某处的引号或特殊字符会弄乱查询。您可能想使用[mysql_real_escape_string()](http://php.net/manual/en/function.mysql-real-escape-string.php)来纠正这个问题。

```
$ITP_Status = mysql_real_escape_string($ITP_Status);
$ITP_Error = mysql_real_escape_string($ITP_Error);
$ID = mysql_real_escape_string($ID);
$query = mssql_query("UPDATE table_name SET C_ITP_STATUS = '".$ITP_Status."', C_ITP_ERRORS = '". $ITP_Error ."' WHERE id = '".$ID."';"); 
```

还应注意，您使用的是旧的 MySQL 函数。新的[MySQLi](http://www.php.net/manual/en/book.mysqli.php)函数是替代品，你应该至少使用它。

你提到了 MS SQL。如果您打算使用它，则不能使用 MySQLi 函数。在这种情况下，建议您使用[PDO](http://php.net/manual/en/book.pdo.php)接口，该接口适用于 MySQL 和 MS SQL。许多人推荐 PDO 而不是 MySQLi，即使您只使用 MySQL。

# c++ - 链接使用不同版本的 gcc 编译的库

> ID：14587110
> 
> 赞同：4
> 
> 时间：2013-01-29T16:06:36.237
> 
> 标签：c++, gcc, compilation, compatibility

我有一个 C++ 软件（Borealis 流引擎），该软件已编译并与 GCC 3.3.6 一起使用（我无法使其与较新版本的 GCC 一起使用，并且不再支持该软件）。

我喜欢扩展它来调用一些复杂的加密库（基于配对的库），这些库肯定是用最新版本的 GCC 编译的。

我的问题是是否有可能做到这一点，即从用旧版本 GCC 编译的代码中调用用新版本 GCC 编译的库？技术上可行吗？潜在的问题是什么？

我希望有人可以帮助阐明这些问题，这样我就可以避免花费数天（甚至数周）编译和学习如何使用这些软件，最终发现它们不能一起工作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:12:15.520

这是。如果不是这样，我们就会遇到严重的问题。编译器的版本与平台的 ABI 无关。

（在 C++ 编译器的情况下，实际上可能会破坏的一件事是名称修改约定的更改，但是，例如，对于 C，即使这种风险也不存在。）

# facebook - 如何在页面上多次显示facebook评论框？

> ID：14587113
> 
> 赞同：1
> 
> 时间：2013-01-29T16:06:42.157
> 
> 标签：facebook, facebook-graph-api, facebook-javascript-sdk, facebook-comments

我有一个面包店网站的页面，在页面上会有一个蛋糕列表。会有一张蛋糕的图片，后面是一个评论框，让人们评论那个特定的蛋糕。每个蛋糕都需要有自己的一组评论，彼此分开。

但除非我弄错了，facebook评论插件链接到页面的url，并且不能多次显示？

有没有办法在每页显示多次，并将其单独链接到每个蛋糕，这样评论就不会混淆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-23T13:50:34.573

除了每个产品的唯一锚标签外，您还可以在查询字符串中添加产品 ID，例如 www.yoursite.com?productID=44

就我而言，我正在动态创建一个显示产品详细信息的 div。还必须使用[FP.XFBML.parse 命令强制 Facebook 脚本显示评论部分](http://developers.facebook.com/docs/reference/javascript/FB.XFBML.parse/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-11T13:35:57.093

> 但除非我弄错了，facebook评论插件链接到页面的url，并且不能多次显示？

它可以显示。虽然它与您的网站网址链接，但您始终有权在您的网址中的三元运算符之后附加自定义字符串。

> 有没有办法在每页显示多次，并将其单独链接到每个蛋糕，这样评论就不会混淆？

这里的诀窍是使 url 独一无二。

这可以通过多种方式完成：

```
1)www.something.com#commentbox1

2)www.something.com?section=commentbox1 
```

我在我当前的网站上使用它，那里有 10 多个评论框：[http ://www.arrowlife.com/](http://www.arrowlife.com/)

# wordpress - WordPress 将画廊计数到帖子中

> ID：14587114
> 
> 赞同：1
> 
> 时间：2013-01-29T16:06:43.607
> 
> 标签：wordpress, gallery

我在帖子中添加了许多画廊。这是我的一篇文章的示例：

```
[gallery ids="47,48,49"]
[gallery ids="49,47,44"]
[gallery ids="419,147,414"] 
```

我想知道是否有办法在我的 single.php 文件中计算和检索我的帖子的不同画廊的数量？谢谢

# php - 如何在 html 页面中显示 php 方法的结果

> ID：14587117
> 
> 赞同：-1
> 
> 时间：2013-01-29T16:06:48.997
> 
> 标签：php, html, mysql, sql

我已经建立了一个竞赛系统，用户提交票，然后随机选择一个获胜，现在我试图找出一种方法来向用户显示他们已经提交的票。每张票都有一个 ID、一个日期和一个发票编号。我想显示用户迄今为止提交的所有发票编号。

这是我在方法页面中的方法。（我已将我的方法组织到一个 php 文件中，然后在需要时调用它们。）

```
function GetSubmittedBallots()
{
    if(!$this->CheckLogin())
    {
        $this->HandleError("Not logged in!");
        return false;
    }

    $user_rec = array();
    if(!$this->GetUserFromEmail($this->UserEmail(),$user_rec))
    {
        return false;
    }
    $qry = "SELECT invoicenumber FROM entries WHERE user_id = '".$user_rec['id_user']."'";
    $result = mysql_query($qry,$this->connection);
    while($row = mysql_fetch_array($result))
                      {
     echo   $row['invoicenumber'];
                      }

} 
```

然后在我希望它回显的html页面上，我只是调用它

```
<?php GetSubmittedBallots(); ?> 
```

可悲的是，这不起作用。所以我的问题是，我将如何在我的 html 页面上显示 $row 数组？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:37:48.857

它会回显“数组”吗？那是因为您正在尝试回显一个数组。

鉴于您只是想访问查询的结果，您应该使用类似`print_r`or的东西。`var_dump`在我看来，该方法应该用记录构建一个多维数组，然后模板逻辑应该循环它们并以一种很好的方式回显这些值。无论是表格还是排列整齐的 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:50:04.000

如果我没记错的话，`$this`关键字表示你在上课？如果是这样，您需要首先初始化该类并尝试`GetSubmittedBallots`在初始化之后调用函数；

```
// assuming that class's name is Users
$users = new Users();
$users->GetSubmittedBallots(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:34:13.237

```
<?php
require("methods.php"); // Include the file which has the "GetSubmittedBallots" function or method, if it's in a separate file

GetSubmittedBallots(); // Run the function / method
?> 
```

如果这不起作用，请让我们知道您收到的任何错误。

# wordpress - WordPress：设置使用帖子图像链接到帖子类别的页面

> ID：14587119
> 
> 赞同：0
> 
> 时间：2013-01-29T16:06:57.190
> 
> 标签：wordpress

我遇到了这个网站：[http](http://www.jfletcherdesign.com) ://www.jfletcherdesign.com 。

我想复制主页如何显示他所有帖子的特色图像，以及当您单击图像时，您会在特定帖子中深入了解。我还想复制您如何使用图像单击“前进”和“下一步”到类别中的相应帖子。

有人可以为我指出设置此功能的正确方向吗？

如果您可以将我指向用于在他的类别页面上实现翻转效果的 jQuery 插件，则可以加分。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T21:32:24.483

该网站基于 WPShower 的[不平衡](http://wpshower.com/themes/imbalance/)主题。这是一个免费主题，因此您可以下载并查看所有源代码。那应该回答你的第一个问题。

要获得作为上一篇和下一篇文章分页的图像，您需要做的就是使用[get_adjacent_post 函数](http://codex.wordpress.org/Function_Reference/get_adjacent_post)。您可以使用类似下面的代码来设置它以链接图像。将其粘贴在 single.php 的底部或您希望分页出现的任何位置。

```
<?php
    $prev_post = get_adjacent_post(true, '', true);
    $next_post = get_adjacent_post(true, '', false);
?>
<?php if ($prev_post) : $prev_post_url = get_permalink($prev_post->ID); ?>
    <a class="previous-post" href="<?php echo $prev_post_url; ?>"><img src="www.site.com/previous-image.png" alt"previous post" /></a>
<?php endif; ?>
<?php if ($next_post) : $next_post_url = get_permalink($next_post->ID); ?>
    <a class="next-post" href="<?php echo $next_post_url; ?>"><img src="www.site.com/next-image.png" alt"next post" /></a>
<?php endif; ?> 
```

现在对于 jQuery 翻转，它非常简单：

```
$(document).ready(function() {
    $('.article').mouseenter(function() {
        $(this).find('.article-over').show();
    });
    $('.article').mouseleave(function() {
        $(this).find('.article-over').hide();
    });
    $('.article').hover(
        function() {
            $(this).find('.preview a img').stop().fadeTo(1000, 0.3);
        },
        function() {
            $(this).find('.preview a img').stop().fadeTo(1000, 1);
        }
    );
}); 
```

它作用于主题生成的以下 HTML 标记：

```
<li class="article li_col1" id="post-1234">

    <div class="preview">
        <a href="http://www.site.com/2013/01/post/"><img width="305" height="380" src="http://www.site.com/image/src.jpg" class="attachment-background wp-post-image" alt="" title="Cool Post"></a>
    </div>

    <div class="article-over">
        <h2><a href="http://www.site.com/2013/01/post/" title="Cool Post">Cool Post</a></h2>
        <div class="the-excerpt">
            <p>Blah blah blah this is a post excerpt...</p>
        </div>
    </div>

</li> 
```

所以基本上当您第一次访问该站点时，对于除第一个项目之外的所有项目，您所看到的只是`.preview`包含类别图像的 div。`.article-over`div 绝对位于 div 之上，但`.preview`具有一种`display:none`您看不到的样式。

当 mouseenter 事件被触发时，`.article-over`div 会通过 显示`show()`，并且里面的图像`.preview`淡出到 0.3 的不透明度，让您可以看到`.preview`div 背后的黑色背景。当鼠标离开时，`.article-over`被隐藏，`.preview`图像逐渐变回完全不透明。

如果您仍然卡住，请告诉我，我会尝试进一步解释。

# haskell - 如何将 Acid-State 的 Template Haskell 集成到你自己的模板 haskell 中

> ID：14587121
> 
> 赞同：1
> 
> 时间：2013-01-29T16:07:01.493
> 
> 标签：haskell

我正在编写一个模板 haskell 库供我自己使用，它会生成函数。我想做的是将这些生成的函数传递给酸态的 makeAcidic TH 函数。

但是，在我的 Q 上下文中简单地传递生成的名称的结果会导致此错误：

不在具体化范围内

如何将我新创建的函数置于 makeAcidic 工作的范围内？

我的代码：

```
gen_render :: Name -> Q [Dec]
gen_render typName =
  do (TyConI d) <- reify typName -- Get all the information on the type
     (type_name, vars, nars, constructors) <- typeInfo (return d) -- extract name and constructors
     x <- mapM func_def constructors
     let funcs = concat x
     let setterNames = [setter | (setter, _) <- funcs]
     acidic <- makeAcidic typName setterNames
     return $ [newFuncs | (_, newFuncs) <- funcs] ++ acidic

     where func_def data_con@(con_name, compontents) 
               = do 
                   x <- mapM genFieldSetandGet compontents
                   return $ concat x
           genFieldSetandGet (Just fieldName, fieldType) = do

                   uVar <- runQ $ varE $ mkName "u"

                   ixInsert <- appsE $ [[| IxSet.insert |], (varE $ mkName "u"), parensE $ appsE [(varE fieldName), (varE $ mkName "db")]]

                   {-instanceD (cxt [])
                     (conT (mkName "DatabaseAccess") `appT` (return fieldType) `appT` conT typName)-}

                   let setterName = (mkName $ "updateDb" ++ (capitalize $ nameBase fieldName))

                   func <- funD setterName $
                               [clause [(varP $ mkName "u"), (varP $ mkName "db")] (normalB $ 
                                   [| modify |] `appE` [| IxSet.insert |] `appE` (varE $ mkName "u") ) []]

                   return [(setterName, func)] 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T19:45:39.527

您只需要确保它们的拼接在 makeAcidic 拼接之前运行。

# c# - 提交表单不返回下一页

> ID：14587122
> 
> 赞同：0
> 
> 时间：2013-01-29T16:07:01.647
> 
> 标签：c#, ajax, asp.net-mvc, json

我在几个不同的 ASP.NET 页面上实现了一个注册过程。这些页面本身可以工作，但是当我单击其中任何一个上的提交时，我会看到一条类似这样的消息

{"成功":true,"异常":null,"InnerException":null,"ReturnVal":3}

`ReturnVal`我收到的是正确的。似乎一旦`AJAX`函数完成，它就会停止并且不会继续错误或成功，它只是显示`JSON`结果。这是一个片段：

```
 <input type="submit" value="Next" id="Package" onclick="return  DoAjaxSubmit(this);"/>
    </div>
</div>
</p> 

<script type="text/javascript">

   function DoAjaxSubmit(btnClicked) {
       var form = $(btnClicked).parents('form');
       $.ajax({
           type: "POST",
           url: form.attr('action'), //'<%=ResolveUrl("~/register/go") %>',
           data: form.serialize(),
           dataType: "json",
           error: function (xhr, status, error) {
           },
           success: function (response) {
                if (response != null) {
                   if (!response.Successful) {
                       alert("Please select the Package");
                       return false;
                   }
                   else {
                           switch (response.ReturnVal) {
                       case 0:
                           window.location.href = "/Register/Free";
                           break;
                       case 1:
                           window.location.href = "/Register/Confirmation";
                           break;
                       case 2:
                           window.location.href = "/Register/AdOptions";
                           break;
                       case 3:
                           window.location.href = "/Register/PrintOptions";
                           break;
                       case 4:
                           window.location.href = "/Register/JobOptions";
                           break;
                       case 5:
                           window.location.href = "/Register/Landing";
                           break;
                       }
                   }
               }
           }
       });
       return false;
   } 
```

控制器：

```
[AcceptVerbs(HttpVerbs.Post)]
    [RestrictedAction(new[] { "user" },null)]
    public JsonResult Package(string[] package)
    {
        var t = new TransactionResult();

        if (!string.IsNullOrEmpty(package[0]))
            {
                //Reset Session values in case of start over
                Session[SessionNames.PRINTOPTIONS] = null;
                Session[SessionNames.JOBOPTIONS] = null;
                Session[SessionNames.ADOPTIONS] = null;
                Session[SessionNames.LANDING] = null;
                Session[SessionNames.QUANTITY] = null;
                Session[SessionNames.PACKAGE1] = package;

                //Determine which options page to navigate to
                t.ReturnVal = 6;
                foreach (var p in package)
                {
                    if (Convert.ToInt32(p) < t.ReturnVal && Convert.ToInt32(p) != 1)     t.ReturnVal = Convert.ToInt32(p);
                }
                if (t.ReturnVal == 6) t.ReturnVal = 1;

                t.Successful = true;  
            }
        return Json(t);
    } 
```

我尝试删除提交按钮上的返回值，添加 return false;，将`JSON`结果的成功属性设置为 false`controller`以检查错误部分是否有效，但它只是做同样的事情（除了它返回 false，但不显示错误消息）。

编辑控制台错误

```
Uncaught ReferenceError: $ is not defined Package:283
    DoAjaxSubmit Package:283
    onclick Package:263
Resource interpreted as Document but transferred with MIME type application/json:   "http://192.168.0.21:82/register/package". 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:10:48.517

一件事不对：

```
switch (response.returnValue) 
```

应该：

```
switch (response.ReturnVal) 
```

您必须在 JS 中使用与 JSON 中相同的属性名称。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:49:01.120

鉴于您收到的错误消息，您似乎还没有注册 jQuery 脚本。在使用之前确保你已经注册了 jQuery：

```
<script src="@Url.Content("~/Scripts/jquery-1.7.1.min.js")" type="text/javascript"></script> 
```

此外，如果您正在使用另一个客户端 javascript 框架，它正在使用`$`您可以使用的功能[`configure jQuery with noConflict`](http://api.jquery.com/jQuery.noConflict/)。

# c# - C# 应用程序更改我的图片大小

> ID：14587126
> 
> 赞同：3
> 
> 时间：2013-01-29T16:07:08.090
> 
> 标签：c#, image, bitmap, resize

我正在开发一个程序，我需要将图像放在另一个图像之上。但是发生的事情是，当我将图片放在背景上时，它会更改为不同的分辨率，我不知道为什么。我试过搞乱位深度和 DPI，但它们都没有任何区别。我的原始图像是 574x574，但是当它放在图片上时，它变成了 768x768。这是我正在使用的代码。任何帮助表示赞赏。

```
Image imgBackground = Image.FromFile(r_strApplicationStartupPath + "\\images\\Backing.png");
Image imgPicture1 = Image.FromFile(r_strApplicationStartupPath + "\\images\\Picure1.png");
Image TempImg = Image.FromFile(r_strApplicationStartupPath + "\\images\\Backing.png");
Graphics grfx = Graphics.FromImage(TempImg);
Bitmap bmpFinal = new Bitmap(1296, 1944, PixelFormat.Format32bppArgb);
grfx = Graphics.FromImage(bmpFinal);
grfx.DrawImage(imgBackground, 0, 0);
grfx.DrawImage(imgPicture1, 659, 1282);
bmpFinal.Save(r_strApplicationStartupPath + "\\images\\" + r_strName + " Composite " + r_intCounter.ToString() + ".png", ImageFormat.Png); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T16:15:51.407

当您在不指定目标矩形的情况下调用 Graphics.DrawImage 时，它​​假定您要保留图像的原始物理尺寸（即英寸而不是像素），因此根据源图像和目标的 DPI 调整图像大小图片。

如果您想确保在不调整 DPI 的情况下以原始像素大小绘制图像，那么您只需要提供整个目标矩形。

```
grfx.DrawImage(imgPicture1, dstRect, srcRect, GraphicsUnit.Pixel); 
```

# mysql - MySQL CREATE DB：FK 的问题

> ID：14587127
> 
> 赞同：1
> 
> 时间：2013-01-29T16:07:23.100
> 
> 标签：mysql, database

这是脚本的一小部分（即该脚本的第一行）：当我尝试执行它时说我：
***错误代码：1005。无法创建表'test.paese'（errno：150）0.062秒***

当我尝试从 MySQL 执行“Forward Engineer”时，它回复了我一些问题：
*如果 MySQL 从 CREATE TABLE 语句中报告错误号 1005，并且错误消息是指**错误 150，则表创建失败，因为外键约束是没有正确形成。***

```
`SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
设置@OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS，FOREIGN_KEY_CHECKS=0；
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='TRADITIONAL';

如果不存在 `test` 则创建 SCHEMA 默认字符集 latin1 COLLATE latin1_swedish_ci ;
使用`测试`;

-------------------------------------------------- -----
-- 表`test`.`SETTORE`
-------------------------------------------------- -----
如果不存在 `test`.`SETTORE` (
  `Comune` CHAR NOT NULL ,
  `superficie` INT(11) NULL ,
  主键（`Comune`））
引擎 = InnoDB；

-------------------------------------------------- -----
-- 表`test`.`PAESE`
-------------------------------------------------- -----
如果不存在 `test`.`PAESE` (
  `Nome-paese` CHAR NOT NULL ,
  `Comune` CHAR NOT NULL ,
  `num_abitanti` INT(11) NULL ,
  `altitudine` INT(11) NULL ,
  `IDpaese` INT(11) NOT NULL ,
  PRIMARY KEY (`Nome-paese`, `Comune`) ,
  索引 `Comune` (`Comune` ASC) ,
  唯一索引 `idPAESE_UNIQUE` (`IDpaese` ASC) ,
  约束`公社`
    外键（`Comune`）
    参考 `test`.`SETTORE` (`Comune`)
    删除设置为空
    更新级联）
引擎 = InnoDB；

-------------------------------------------------- -----
-- 表`test`.`PERIODO`
-------------------------------------------------- -----
如果不存在则创建表`test`.`PERIODO`（
  `Settimana` INT(11) NOT NULL ,
  主键（`Settimana`））
引擎 = InnoDB；

-------------------------------------------------- -----
-- 表 `test`.`TIPO-INIZIATIVA`
-------------------------------------------------- -----
如果不存在 `test`.`TIPO-INIZIATIVA`，则创建表（
  `Nome-tipo-iniziativa` CHAR NOT NULL ,
  主键 (`Nome-tipo-iniziativa`) )
引擎 = InnoDB；

-------------------------------------------------- -----
-- 表`test`.`INIZIATIVA`
-------------------------------------------------- -----
如果不存在 `test`.`INIZIATIVA`，则创建表（
  `Nome-tipo-iniziativa` CHAR NOT NULL ,
  `Settimana` INT(11) NOT NULL ,
  `Nome-paese` CHAR NOT NULL ,
  `Comune` CHAR NOT NULL ,
  `descrizione` VARCHAR(45) ,
  `costo_intero` FLOAT NULL ,
  `costo_ridotto` FLOAT NULL ,
  `orario_apertura` 时间 NULL ,
  `orario_chiusura` 时间 NULL ,
  主键（`Nome-tipo-iniziativa`，`Settimana`，`Nome-paese`，`Comune`），
  INDEX `Nome-paese` (`Nome-paese` ASC) ,
  索引 `Comune` (`Comune` ASC) ,
  索引`Settimana` (`Settimana` ASC) ,
  索引 `Nome-tipo-iniziativa` (`Nome-tipo-iniziativa` ASC) ,
  约束`Nome-paese`
    外键（`Nome-paese`）
    参考 `test`.`PAESE` (`Nome-paese` )
    删除设置为空
    在更新级联时，
  约束`公社`
    外键（`Comune`）
    参考 `test`.`PAESE` (`Comune`)
    删除设置为空
    在更新级联时，
  约束`Settimana`
    外键（`Settimana`）
    参考 `test`.`PERIODO` (`Settimana` )
    删除设置为空
    在更新级联时，
  约束`Nome-tipo-iniziativa`
    外键（`Nome-tipo-iniziativa`）
    参考 `test`.`TIPO-INIZIATIVA` (`Nome-tipo-iniziativa` )
    删除设置为空
    更新级联）
引擎= InnoDB；`

```

因此，DBMS 首先创建表**SETTORE**，然后在执行**CREATE TABLE PAESE**时停止。我在这些行中找不到错误，请帮助我，我非常需要它！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:26:45.627

由于您的参考选项，约束失败。

```
... ON DELETE SET NULL 
```

这是非法的，因为您的列不能是`NULL`.

```
CREATE  TABLE IF NOT EXISTS `test`.`PAESE` (
  `Nome-paese` CHAR NOT NULL ,
  `Comune` CHAR NOT NULL ,  <----------------------------+
  `num_abitanti` INT(11) NULL ,                          |
  `altitudine` INT(11) NULL ,                            |
  `IDpaese` INT(11) NOT NULL ,                           |
  PRIMARY KEY (`Nome-paese`, `Comune`) ,                 |
  INDEX `Comune` (`Comune` ASC) ,                        |
  UNIQUE INDEX `idPAESE_UNIQUE` (`IDpaese` ASC) ,        |
  CONSTRAINT `Comune`                                    |
    FOREIGN KEY (`Comune` )                              |
    REFERENCES `test`.`SETTORE` (`Comune` )              |
    ON DELETE SET NULL  <--------------------------------+
    ON UPDATE CASCADE) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:27:04.223

这是因为列上的约束冲突`Comune`

列`Comune`在 中不可为空`test`。`PAESE`. 你正在让 MySQL 旋转！

`SHOW ENGINE INNODB STATUS;`

```
------------------------
LATEST FOREIGN KEY ERROR
------------------------
130129 21:55:19 Error in foreign key constraint of table test/paese:
FOREIGN KEY (`Comune`)
        REFERENCES `test`.`SETTORE` (`Comune`)
        ON DELETE SET NULL ON UPDATE CASCADE
):
You have defined a SET NULL condition though some of the
columns are defined as NOT NULL.
------------ 
```

# java - Spring正在注入具体类而不是代理

> ID：14587134
> 
> 赞同：4
> 
> 时间：2013-01-29T16:07:45.583
> 
> 标签：java, spring, jpa

我有一个问题，Spring 将 DAO 对象的代理注入到服务中，但是这个服务被注入到控制器中，它是具体的类。这不允许我使用服务范围的事务并分别为每个 DAO 调用启动事务。这是我所期望的。

配置：

Controller 是带有 @Controller 注释和构造函数 DI 的类。

服务：

```
@零件
@Transactional
公共类 UserServiceImpl 实现 UserService { ...}

```

道：

```
@零件
@Transactional
公共类 UserDaoImpl 实现 UserDao {

```

JPA 配置：

```
<bean class="org.springframework.dao.annotation.PersistenceExceptionTranslationPostProcessor"/>

<bean id="entityManagerFactory"
      class="org.springframework.orm.jpa.LocalContainerEntityManagerFactoryBean" >
    <property name="dataSource" ref="dataSource"/>
    <property name="persistenceUnitName" value="xxxPersistenceUnit"/>
    <property name="persistenceXmlLocation" value="classpath:META-INF/persistence.xml"/>
    <property name="jpaVendorAdapter">
        <bean class="org.springframework.orm.jpa.vendor.HibernateJpaVendorAdapter">
        </bean>
    </property>
    <property name="jpaProperties">
        <props>
            <prop key="hibernate.dialect">${hibernate.dialect}</prop>
            <prop key="hibernate.show_sql">${hibernate.show_sql}</prop>
            <prop key="hibernate.format_sql">${hibernate.format_sql}</prop>
            <prop key="hibernate.hbm2ddl.auto">${hibernate.hbm2ddl.auto}</prop>
        </props>
    </property>
</bean>

<bean id="transactionManager" class="org.springframework.orm.jpa.JpaTransactionManager">
    <property name="entityManagerFactory" ref="entityManagerFactory"/>
</bean>

<tx:annotation-driven /> 
```

有人知道为什么会这样吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T20:05:18.467

您很可能是错误[地在 servlet 上下文](https://stackoverflow.com/questions/3652090/difference-between-applicationcontext-and-spring-servlet-xml-in-spring)`UserServiceImpl`中创建的- 请检查 表达式以检查其中是否仅 包含类。`context:component-scan``Controller`

有关组件扫描过滤器的示例，请参阅[@Service 构造两次](https://stackoverflow.com/questions/4333390/service-are-constructed-twice) 。

例如，如果事务管理器 bean 和`<tx:annotation-driven>`在[根 Web 应用程序上下文](https://stackoverflow.com/questions/11708967/what-is-the-difference-between-applicationcontext-and-webapplicationcontext-in-s/11709272#11709272)中声明，那么事务代理将仅为根应用程序上下文中的 bean 创建（来自[Spring 文档](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/beans.html#beans-factory-extension)）：

> BeanPostProcessor 接口的范围是每个容器。这仅在您使用容器层次结构时才相关。如果您在一个容器中定义一个 BeanPostProcessor，它只会在该容器中的 bean 上工作。在一个容器中定义的 Bean 不会由另一个容器中的 BeanPostProcessor 进行后处理，即使两个容器是同一层次结构的一部分。

不太可能将用户服务的事务配置配置为使用另一个事务管理器（或另一个默认传播），但在这种情况下，`TransactionInterceptor` 调用将出现在 DAO 方法的堆栈跟踪中。

如果您了解自己在做什么，那么在 Spring 中使用 DAO 类是绝对可以`@Transactional`的 - 存储库或 DAO 无法打开事务的想法来自黑暗时期，当时您必须创建样板代码来打开事务并且很难管理事务实例（你不能确定事务是如何管理的）。但是当您使用声明式配置时，事情并没有那么糟糕。Spring 提倡约定优于配置的风格，其中大多数方法使用`Propagation.REQUIRED`事务模式。在 Spring`Propagation.REQUIRED`中，当您装饰方法时，默认模式是使用`@Transactional`（此传播被硬编码为`@Transactional`注解声明），这意味着新的逻辑事务被映射到相同的物理事务，因此使用`@Transactional`是无害的。

有关Spring 中事务传播的参考，请参阅[http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/transaction.html#tx-propagation](http://static.springsource.org/spring/docs/3.2.x/spring-framework-reference/html/transaction.html#tx-propagation)

例如，在 Spring Data JPA（我很确定他们知道自己在做什么）中，[存储库实例上的 CRUD 方法默认是事务性的](http://static.springsource.org/spring-data/jpa/docs/1.0.0.M1/reference/html/#transactions)。这在某些情况下可能很有用，该机制与 Hibernate 允许您在`Session` 不声明显式事务的情况下从用于显示的 get() 一些任意对象时相同（当然这并不意味着框架以某种方式设法在没有事务的情况下运行 -在这种情况下是隐含的）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:22:53.473

我在理解您在说什么时遇到了一些麻烦，但您似乎很惊讶每次 DAO 调用都会获得新事务，而不仅仅是服务调用。不幸的是，这正是您通过在 DAO 类上放置“@Transactional”所指定的。你的 DAO 不应该是事务性的，至少如果你遵循通常的模式。如果我对您的理解正确，您应该删除 DAO 类上的 @Transactional 注释。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T18:46:44.930

其他响应者是正确的，因为您不应该将 DAO 注释为`@Transactional`，但要真正了解正在发生的事情，您应该参考[Spring 参考手册中的 Transaction Propagation 部分](http://static.springsource.org/spring/docs/3.1.x/spring-framework-reference/html/transaction.html#tx-propagation)。使用时的默认传播`@Transactional`是`REQUIRES_PROPAGATION`，因此请具体查看。

你的问题不是那么具体，所以我不确定你在寻找什么。

**编辑：**重新阅读您的问题后，您的组件扫描可能存在问题。检查以确保`<tx:annotation-driven />`您在组件扫描服务类的同一应用程序上下文中。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T16:40:34.003

你不应该在你的 DAO 对象中使用那个“@Transactional”注解。您在您的服务中定义它，这将允许您在服务方法中调用的所有 DAO 方法在同一个事务中执行，这似乎正是您想要的，当您说“服务范围的事务”时，对?

此外，如建议的那样，您可能希望在 UserServiceImpl 中将注释从“@Component”更改为“@Service”，在 UserDaoImpl 中更改为“@Repository”。

最好的祝福。

# python - 如何在 Python 中通过 ssh 调用 .ksh 文件作为 Unix 命令的一部分

> ID：14587135
> 
> 赞同：0
> 
> 时间：2013-01-29T16:08:09.753
> 
> 标签：python, unix, ssh, autosys

我想实现以下目标：

给定文件包含一个作业列表，我需要使用 SSH API 在远程服务器中一一执行并存储结果。

当我尝试使用 putty 在远程服务器上直接调用以下命令时，它成功执行，但是当我尝试通过 python SSH 编程执行它时，它说找不到 autosys.ksh。

`autosys.ksh autorep -J JOB_NAME`

有任何想法吗？请帮忙。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:56:18.493

[面料](http://docs.fabfile.org/en/1.5/)是一个不错的选择。从主页，

> Fabric 是一个 Python（2.5 或更高版本）库和命令行工具，用于简化 SSH 在应用程序部署或系统管理任务中的使用。

一个简单的例子，

```
>>> from fabric.api import run, env, cd, settings, hide, show
>>> env.host_string='xxx.xxx.com'
>>> env.user='user'
>>> env.password='password'
>>> run('ls -lart') 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-09-17T20:41:09.777

在阅读您对第一个答案的评论后，您可能希望创建一个 bash 脚本，其中 bash 路径作为解释器行，然后是 autosys 命令。

这将创建一个 bash shell 并从 shell 中的脚本运行命令。

同样，如果您在 shell 中使用 autosys 命令，则最好在运行任何 autosys 命令之前为用户设置 autosys 环境。

# php - 在 PHP 中重新创建多维数组

> ID：14587137
> 
> 赞同：0
> 
> 时间：2013-01-29T16:08:15.523
> 
> 标签：php, arrays, dynamic-arrays

这是非常基本的，但我的问题是：

给定一个数组：

```
$a = array(
0 => array('Rate'=> array('type_id'=>1, 'name' => 'Rate_1', 'type'=>'day','value'=>10)),
1 => array('Rate'=> array('type_id'=>1, 'name' => 'Rate_2', 'type'=>'night','value'=>8)),
2 => array('Rate'=> array('type_id'=>2, 'name' => 'Rate_3', 'type'=>'day','value'=>7)),
3 => array('Rate'=> array('type_id'=>2, 'name' => 'Rate_4', 'type'=>'nigh','value'=>16)),
4 => array('Rate'=> array('type_id'=>3, 'name' => 'Rate_5', 'type'=>'day','value'=>10))
); 
```

改变它的最有效方法是什么，所以我们有类似的东西：

```
$new_array = array(
   [type_id] => array(
      [type] => array(
          [value]
          )
       )
    )
); 
```

换句话说，我想剥离一些数据（我不需要的名称）并重新组织数组的维度。最后我会有一个数组，我可以通过**$new_array['type_id']['type']['value']**访问值。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:17:10.697

不完全确定这是否正是您想要的，但是您可以通过说来访问这些值

`echo $new[TYPE_ID][DAY_OR_NIGHT];`

```
$new = array();

foreach($a AS $b){
    $c = $b['Rate'];
    $new[$c['type_id']][$c['type']] = $c['value'];
} 
```

使用`print_r`on`$new`会给你：

```
Array
(
    [1] => Array
        (
            [day] => 10
            [night] => 8
        )

    [2] => Array
        (
            [day] => 7
            [night] => 16
        )

    [3] => Array
        (
            [day] => 10
        )

) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:27:27.873

从 php 5.3.0 开始，array_reduce() 允许使用数组作为初始值，给定您的初始数组 $a，您可以使用以下代码

```
function my_reducer ($result, $item) {

    $result[$item['Rate']['type_id']][$item['Rate']['type']] = $item['Rate']['value'];

    return $result;
}

$assoc_arr = array_reduce($a, 'my_reducer', array());
var_dump($assoc_arr); 
```

这返回

```
array(3) {   [1]=>   array(2) {
    ["day"]=>
    int(10)
    ["night"]=>
    int(8)   }   [2]=>   array(2) {
    ["day"]=>
    int(7)
    ["nigh"]=>
    int(16)   }   [3]=>   array(1) {
    ["day"]=>
    int(10)   } } 
```

# ruby-on-rails - 按评论排序时的范围主题查询

> ID：14587140
> 
> 赞同：0
> 
> 时间：2013-01-29T16:08:22.130
> 
> 标签：ruby-on-rails

我正在尝试通过最近的评论设置主题索引的顺序。这是有效的：

```
Topic.joins(:comments).order("comments.created_at desc") 
```

但它不止一次列出了主题。

有没有办法将每个主题的显示次数限制为一个？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:02:28.200

好的，发生的事情是这样的：当您加入评论时，您会为每个评论获得一个数据库行，这（如果主题上有多个评论）意味着每个主题记录的多个副本。

要解决此问题，您需要使用分组，以便每个主题只有一个结果。分组依据是您返回的模型的 id ( `topics.id`)。现在，还有更多内容 - 因为每个结果仍然有多个评论，每个结果也有多个 created_at 值，因此（为了按它排序，就像你做的那样）你需要告诉数据库使用哪一个。

这是通过某种聚合函数完成的。我猜你希望最近的评论是决定顺序的评论。如果这是真的，代码将是这样的：

```
Topic.joins(:comments).select('topics.*, max(comments.created_at) as last_comment').group('topics.id').order('last_comment desc') 
```

自定义选择包括您需要的常用数据（关于主题对象的所有信息 - `topics.*`）以及在评论创建日期使用的聚合函数（`max()`，顾名思义，它返回最大的可能值。）。较近的日期较大，因此这将是最近评论的创建日期戳。该结果别名为`last_comment`(using )，因此您可以在调用`as`中引用它。`.order`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T19:37:12.517

我发现解决问题的最优雅的方法是`touch`在评论模型中添加多态关联：

`belongs_to :commentable, :polymorphic => true, touch: true`

如果您不使用多态关联，则可以使用：

`belongs_to :topic, touch: true`

然后，我所要做的就是将主题模型中的默认范围更改为`updated_at`

`default_scope order: 'topics.updated_at DESC'`

添加`touch`到评论意味着每次向主题添加评论时，它都会更新主题中的 updated_at 列。

在我使用的控制器中：

`@topics = Topic.order(sort_column + " " + sort_direction).paginate(:per_page => 20, :page => params[:page])`

`Topic.all`或者其他东西也可以在那里工作。

感谢我的超级朋友 Alain 向我指出了这一点。

# c# - 如何隐藏此继承标签的某些属性？

> ID：14587142
> 
> 赞同：0
> 
> 时间：2013-01-29T16:08:25.673
> 
> 标签：c#, .net, winforms, c#-4.0, inheritance

我有以下代码。如何隐藏`AutoEllipsis`、`Image`、`ImageAlign`、`ImageIndex`、`ImageKey`和`ImageList`属性`TabIndex`？

另外，如何将默认大小设置为 50x50px？

```
public class GradientBox : Label
{
    [DefaultValue(false), Browsable(false), EditorBrowsable(EditorBrowsableState.Never), DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    public override bool AutoSize { get; set; }

    [DefaultValue(false), Browsable(false), EditorBrowsable(EditorBrowsableState.Never), DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    public override string Text { get; set; }

    [DefaultValue(false), Browsable(false), EditorBrowsable(EditorBrowsableState.Never), DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    public override ContentAlignment TextAlign { get; set; }

    // NullRef Exception if use { get; set; }
    [DefaultValue(false), Browsable(false), EditorBrowsable(EditorBrowsableState.Never), DesignerSerializationVisibility(DesignerSerializationVisibility.Hidden)]
    public override Font Font
    {
        get { return base.Font; }
        set { base.Font = value; }
    }

    public override BorderStyle BorderStyle
    {
        get { return BorderStyle.FixedSingle; }
        set { base.BorderStyle = value; }
    }

    protected override void OnPaint(PaintEventArgs e)
    {
        e.Graphics.FillRectangle(new LinearGradientBrush(new Point(0, 0), new Point(0, this.Height), this.ForeColor, this.BackColor), ClientRectangle);
    }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:20:15.827

当您从某些东西继承时，您的新类需要能够表现得好像它是基类型（多态性的一个方面）。这意味着它不能提供比基础*更少*的功能。所以没有办法删除这些属性，否则它不会是`Label`.

您可能要考虑的是“组合”。

```
public class GradientBox : Control
{
    private Label myLabel;
    public GradientBox()
    {
        myLabel = new Label;
        // Set your default values
    }

    public Font Font
    {
        get { return myLabel.Font; }
        set { myLabel.Font = value; }
    }
    // repeat to expose just the properties you want.
 } 
```

# php - Magento 从特定类别中检索孩子

> ID：14587143
> 
> 赞同：0
> 
> 时间：2013-01-29T16:08:26.763
> 
> 标签：php, magento

我在正确的时间关闭我的 li 和 ul 有问题。

使用我们拥有的代码，我们可以在 magento 商店中检索特定类别的所有子项。

现在的问题是我想将所有孩子分成列表。所以我们可以让它们按类别 -> 子类别 -> 子子类别排序。我希望我的结构是；

```
<ul>
    <li>
        <a>Head Child</a>
        <ul>
            <li>
                <a>Sub child</a>
                <ul>
                    <li><a>Sub sub child</a></li>
                    <li><a>Sub sub child</a></li> 
                </ul>
            </li>
        </ul>
    </li>
    <li>
        <a>Head Child</a>
        <ul>
            <li>
                <a>Sub child</a>
                <ul>
                    <li><a>Sub sub child</a></li>
                    <li><a>Sub sub child</a></li> 
                </ul>
            </li>
        </ul>
    </li>
</ul> 
```

我现在得到的输出是

```
<ul>
    <a title="View the products for the " href="#">Head child</a>
    <li class="sub_cat">
        <a title="View the products for the " href="#">Sub child</a>
    </li>
    <li class="sub_cat">
        <a title="View the products for the " href="#">Sub sub child</a>
    </li>
</ul> 
```

这是我们的 php 代码；

```
<?php
$cat = Mage::getModel('catalog/category')->load(9);
$subcats = $cat->getChildren();

foreach(explode(',',$subcats) as $subCatid)
{
    $_category = Mage::getModel('catalog/category')->load($subCatid);
    if($_category->getIsActive()) {
        echo '<ul><a href="'.$_category->getURL().'" title="View the products for the "'.$_category->getName().'" category">'.$_category->getName().'</a>';
        $sub_cat = Mage::getModel('catalog/category')->load($_category->getId());
        $sub_subcats = $sub_cat->getChildren();
        foreach(explode(',',$sub_subcats) as $sub_subCatid)
        {
            $_sub_category = Mage::getModel('catalog/category')->load($sub_subCatid);
            if($_sub_category->getIsActive()) {
                echo '<li class="sub_cat"><a href="'.$_sub_category->getURL().'" title="View the products for the "'.$_sub_category->getName().'" category">'.$_sub_category->getName().'</a>';
                $sub_sub_cat = Mage::getModel('catalog/category')->load($sub_subCatid);
                $sub_sub_subcats = $sub_sub_cat->getChildren();

                foreach(explode(',',$sub_sub_subcats) as $sub_sub_subCatid)
                {
                    $_sub_sub_category = Mage::getModel('catalog/category')->load($sub_sub_subCatid);
                    if($_sub_sub_category->getIsActive()) {
                        echo '<li class="sub_cat"><a href="'.$_sub_sub_category->getURL().'" title="View the products for the "'.$_sub_sub_category->getName().'" category">'.$_sub_sub_category->getName().'</a>';
                    }
                }
            }
        }
        echo '</ul>';
    }
}

?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T09:37:20.507

你应该考虑在这里使用递归函数

```
$cat =  Mage::getModel('catalog/category')->load(9);
$html = '';
$html = getSubCategoriesHTML($cat, $html);

function getSubCategoriesHTML($cat, $html) {

    $html .= '<a href="'.$cat->getURL().'" title="View the products for the "'.$cat->getName().'" category">'.$cat->getName().'</a>';
    $html .= '<ul>';

    $subcats = $cat->getChildren();
    foreach(explode(',',$subcats) as $subCatid) {
        $_category = Mage::getModel('catalog/category')->load($subCatid);
        if($_category->getIsActive()) {
            $html .= '<li>';
            $html .=  getSubCategoriesHTML($_category, $html);
            $html .= '</li>;
        }
    }

    $html .= '</ul>';
    return $html;
} 
```

您可以在帮助程序或类别模型中添加此功能。
我根本没有测试过它，所以它可能无法正常工作。但我希望它可以帮助你。

# java - JPA/Hibernate 不存储 @MapKeyColumn 的值

> ID：14587148
> 
> 赞同：2
> 
> 时间：2013-01-29T16:08:54.193
> 
> 标签：java, hibernate, jpa, map, key

我有一个双向地图映射。读取有效，但 Hibernate 不存储映射键列。当我签入调试器时，一切都设置好了。

INSERT 查询是：

```
insert into rel_custField (field_id, release_id, value, id) values (22, 1, 'fwefwe', 3) 
```

它还应该包含设置`name`列。***我应该如何做到这一点？***

也许问题是地图项实体没有`name`属性？但我从未在 docs/spec 中看到它应该这样做。
如果我选择该解决方案，我将不得不手动设置 name 属性，这似乎不切实际且多余。

```
@SuppressWarnings("serial")
@Entity @Table(name="`release`")
public class Release implements Serializable, IHasTraits {

    @MapKeyColumn(name = "name")
    @OneToMany(mappedBy = "release", cascade = CascadeType.ALL )
    //@JoinColumn(referencedColumnName = "release_id") // Only at one side.
    private Map<String, ReleaseCustomField> customFields = new HashMap();

    ...
} 
```

和

```
@Entity
@Table(name = "rel_custField", uniqueConstraints = {
    @UniqueConstraint(name = "rel_prodcf", columnNames = {"release_id", "field_id"})
})
public class ReleaseCustomField implements Serializable {

    @Id @GeneratedValue( strategy = GenerationType.AUTO )
    private Long id;

    // Make uni-dir?
    @ManyToOne(optional = false)
    @JoinColumn(name = "release_id", nullable = false, updatable = false)
    private Release release;

    ....
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:13:55.357

根据我在这里找到的描述：[http ://en.wikibooks.org/wiki/Java_Persistence/Relationships#Map_Key_Columns_.28JPA_2.0.29](http://en.wikibooks.org/wiki/Java_Persistence/Relationships#Map_Key_Columns_.28JPA_2.0.29)

它不应该是目标实体的属性，而是列名。例如：

```
@MapKeyColumn(name = "id")
@OneToMany(mappedBy = "release", cascade = CascadeType.ALL )
private Map<String, ReleaseCustomField> customFields = new HashMap(); 
```

# servicestack - 注册可覆盖的 ServiceStack 服务

> ID：14587149
> 
> 赞同：1
> 
> 时间：2013-01-29T16:09:00.213
> 
> 标签：servicestack, application-start

我们在用户安装到他们的 Umbraco 网站上的包中使用 ServiceStack。棘手的是用户需要能够添加特定于其实现的其他方法。

我知道传递多个程序集的能力，但问题是我们无法利用 global.asax，我相信 PreApplicationStartMethod 需要编译（因此无法更改）。

谁能想到我们可以拥有一个可覆盖的 AppHost（或覆盖默认值）的方法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:47:59.257

AppHost 需要是Init，即在**Application_Init**事件`new AppHost().Init()`范围内。

 **至于注册服务，除了扫描基础构造函数中的程序集外，您还可以通过覆盖[AppHost.CreateServiceManager()](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack/WebHost.Endpoints/AppHostBase.cs#L34)并返回`ServiceManager`仅配置了您希望支持的服务的配置来覆盖注册的服务。

除此之外，您可以在 your`AppHost.Configure()`或 a中使用 RegisterService 动态注册服务`IPlugin`，例如：

```
appHost.RegisterService<RegistrationService>("/AtRestPath"); 
```**

# c# - 新手：需要读取文件并获取字符的频率

> ID：14587152
> 
> 赞同：-5
> 
> 时间：2013-01-29T16:09:11.587
> 
> 标签：c#

我刚开始学习 C#，遇到了一个我的书都没有告诉我如何解决的问题。

我想读取一个文本文件并将其放入一个字节数组（`BinaryReader`？）中并确定所有字节 [0..255] 的频率。

![申请图片](../Images/80da98eb7218445ac0f7c9e91231b4da.png)

更新：

好吧，这让我得到了想要的结果：

```
 byte[] bar = File.ReadAllBytes("a.txt");
        long[] far = new long[256];

        foreach (byte b in bar)
        {                
            ++far[b];
        } 
```

感谢所有帮助和努力的人，我真的很感激；）

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T16:21:14.050

> 我想读取一个文本文件并将其放入一个字节数组（BinaryReader？）并确定所有字节 [0..255] 的频率。

1.  将文本文件读入字节：[System.IO.File.ReadAllBytes](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)
2.  [使用foreach](http://msdn.microsoft.com/en-us/library/ttw7t8t6%28v=vs.80%29.aspx)循环遍历每个字节
3.  在合适的数据结构中增加一个整数，表示找到的每个字节

奖励积分和陷阱：

1.  处理大型（1GB）文件而不将其完全读入内存（提示：查看 System.IO.Stream 命名空间）
2.  Unicode（提示：并非所有语言每个字符都有 1 个字节。查看 System.Text 命名空间）

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:22:17.053

这可能是最有效的方式

```
int b;
var stats = new int[255];
using (var fs = File.OpenRead(@"file path"))
{
    while(-1 != (b = fs.ReadByte()))
        stats[b]++;
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:18:06.470

尝试这个：

```
byte[] bytes = System.IO.File.ReadAllBytes("file.txt");

        var groups = bytes.GroupBy(x => x);

        foreach (var group in groups)
        {
            Console.WriteLine(string.Format("{0} : {1}", group.Key, group.Count()));
        }

        Console.ReadLine(); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T16:28:37.860

对于挑战，在 LINQ 中：

```
byte[] content = File.ReadAllBytes(myFileName);

var groups = (from character in content 
              group character by character).ToDictionary(g => g.Key, g => (float)g.Count() / content.Length);
float[] stats = (from character in Enumerable.Range(0, 255)
                 select groups[character]).ToArray(); 
```

我在 LINQ 中找不到更简单的方法。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T16:13:58.097

*从文件中读取所有*字节所需要做的就是：

```
byte[] data = File.ReadAllBytes("MyFileName"); 
```

有关详细信息，请参见此处：http: [//msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx](http://msdn.microsoft.com/en-us/library/system.io.file.readallbytes.aspx)

我假设您正在阅读的文本文件是 ASCII 或 ANSI？因为如果不是，您不能只将其读取为字节，因为某些字符可能不是 1 个字节长。

无论如何，在获得字节数据数组后，您可以遍历它以确定每个字节的出现总数：

```
int[] totals = new int[256];

foreach (byte b in data)
{
    ++totals[b];
} 
```

注意：如果任何字节出现超过 2^31 次，这将失败。我猜这不会发生。;)

我不确定您所说的“频率”是什么意思。你能定义它吗？

# php - PHP 我该如何优化呢？许多 if 条件 strpos

> ID：14587153
> 
> 赞同：0
> 
> 时间：2013-01-29T16:09:14.007
> 
> 标签：php, magento, optimization, if-statement

我有以下代码检查某些变量是否包含某些特定单词。

我相信有一种方法可以真正缩短它。我是个菜鸟，所以我不确定如何优化这段代码。任何帮助都会很棒..！

```
<?php
if (in_array(1259, $_product->getCategoryIds()) && (strpos($fabriquant,'word') !== false)) {
    echo "Doh";
} elseif (in_array(1259, $_product->getCategoryIds()) && (strpos($fabriquant,'wurd') !== false)) {
    echo "Bam";
} elseif (in_array(1259, $_product->getCategoryIds()) && (strpos($fabriquant,'ward') !== false)) {
    echo "Yes";
} elseif (in_array(1259, $_product->getCategoryIds()) && (strpos($fabriquant,'wierd') !== false)) {
    echo "No";
}
endif;
?> 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:16:34.540

```
if (in_array(1259, $_product->getCategoryIds())) {
  $words = array(
    'word' => 'Doh',
    'wurd' => 'Bam',
    'ward' => 'Yes',
    'wierd' => 'No',
  );

  foreach ($words as $word => $message) {
    if (false !== strpos($fabriquant, $word)) {
      echo $message;
      break;
    }
  }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:16:00.277

第一个优化可能是嵌套 if 语句：

```
if (in_array(1259, $_product->getCategoryIds()) {
  if(strpos($fabriquant,'wurd') !== false) {
  } elseif ....
} 
```

然后您将测试最可能的条件作为第一个检查，然后是第二个最可能的条件，依此类推......

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:16:08.267

因为所有的 if 块都有一个共同的组件，所以最好将它提取出来并只测试一次。可以单独检查其他独特点。

```
if ( in_array(1259, $_product->getCategoryIds()) )
{
    if ( strpos($fabriquant,'word') !== false ) {
        echo "Doh";
    } elseif ( strpos($fabriquant,'wurd') !== false ) {
        echo "Bam";
    } elseif ( strpos($fabriquant,'ward') !== false ) {
        echo "Yes";
    } elseif ( strpos($fabriquant,'wierd') !== false ) {
        echo "No";
    }
} 
```

# sql - 这个数据库的结构应该是什么？

> ID：14587154
> 
> 赞同：0
> 
> 时间：2013-01-29T16:09:15.047
> 
> 标签：sql, database, ms-access, database-design, relational-database

我想知道我的数据库结构应该是什么以及如何。我很困惑我应该如何工作。

它基本上是针对汽车设计的。

要求： 1) 有许多Assembly。2）在一个特定的装配中有很多零件。3) 在特定零件中可以有材料、工艺、紧固件、工装表。它描述了零件的制造方式和制造方式。4) 材料、工艺、紧固件、工具所有这些都有各自不同的属性。

这是一个显示一些关系的电子表格。

![在此处输入图像描述](../Images/70e81e34e086469de945f08b8b9dfb66.png)

我想知道我的数据库结构应该是什么。

我打算使用 VB.NET 和 Microsoft Access 作为数据库。我应该将我的数据库更改为 SQL 还是其他？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T16:34:49.787

让我们以关系格式重述需求，看看是否有帮助。

*   一辆车包含一个或多个组件。

*   一个程序集包含一个或多个零件。

*   一个程序集可用于一辆或多辆汽车。

*   一个零件包含一种或多种材料。

*   一个部分包含一个或多个进程。

*   一个零件包含一个或多个紧固件。

*   一个零件包含一个或多个工具。

*   一个零件可以在一个或多个装配体中使用。

*   一种材料可以用在一个或多个零件中。

*   一个流程可以在一个且仅一个部分中使用。

*   紧固件可用于一个或多个部分。

*   工具可用于一个或多个零件。

现在，看看能不能画出满足这些约束的实体关系图。

你所拥有的是许多多对多的关系。我会画一个，希望你能弄清楚其余的。

```
Car
--------
Car ID
Owner Name
...

Assembly
--------
Assembly ID
Assembly Name
... 
```

现在，我们知道一辆车有一个或多个组件。我们还知道，一个装配体可以用于不止一辆汽车。

我们需要的是另一个表来将这两个表绑定在一起。

```
 Car_Assembly
 -----------
 Car_Assembly ID
 Car ID
 Assembly ID
 Service Date
 ... 
```

该表使我们能够满足 Cars 和 Assemblies 之间的多对多关系。

从这里，您应该能够找出数据库中的其他多对多关系。

编辑添加：Microsoft Access 是一个关系数据库。还有其他关系数据库，如 MySQL、DB2 和 Oracle。SQL 是用于与关系数据库通信的语言。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:26:19.317

如果不知道所有细节，比如什么材料、工艺等，很难确定什么是最好的，但这里有一个选择：

您将有一个装配表，其中将包含每个装配的 ID 和一个用于跟踪 Parts 表中的 Part_ID 的列。您将拥有一个零件表，其中每个零件都有自己的唯一 ID。仅使用零件信息（如序列号、描述等）创建零件表，并对材料、工艺、工具等执行相同操作。然后您可以创建表将它们链接在一起。因此，您将拥有一个包含 part_id 和 material_id 的表。这样，一个零件可以与许多材料相关联，而不止一个零件可以与同一材料相关联。对于其他关系（零件到流程）、（零件到工具）等也可以这样做。

您不想将装配 ID 存储在零件表中，因为一个零件可能是多个不同装配的一部分。更好的选择是让装配表包含唯一的 ID，可能还有名称和描述信息，然后让另一个表跟踪哪些部件进入装配。

因此，将其分解：（*已编辑以反映多对多关系）

```
Assembly         Parts              Material          Parts_Materials   etc
--------         -----              --------          -------           -----
ID       (PK)    Parts_ID (PK)      Material_ID (PK)  Part_ID
Parts_ID (FK)    Attribute1         Attribute1        Material_ID
                 Attribute2         Attribute2        
                 ...               ... 
```

就 db 而言，您可能会发现 Access 易于使用并且一开始会理解您的想法，但最终会希望转换为 SQL 数据库。

# powershell - 无法在 Powershell 中导入模块

> ID：14587160
> 
> 赞同：4
> 
> 时间：2013-01-29T16:09:41.387
> 
> 标签：powershell

由于此错误，我无法在 Powershell 中导入任何模块：

```
PS C:\Users\Administrator> import-module failoverclusters
The term 'import-module' is not recognized as a cmdlet, function, operable program, or     script file. Verify the term and
 try again.
At line:1 char:14
+ import-module  <<<< failoverclusters 
```

这是全新安装的 Windows Server 2008 Enterprise。我通过服务器管理器将 Powershell 安装为 Windows 功能。我安装 Windows Server 时还没有安装它。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T16:25:06.710

这是因为 Windows 2008 仅附带使用 Snapins 的 PowerShell 1.0。如果您需要模块支持：安装 PowerShell 2.0 或 3.0。链接直到安装程序：

Powershell 2.0：[x64（64 位）](http://www.microsoft.com/en-us/download/details.aspx?id=20430)或[x86（32 位）](http://www.microsoft.com/en-us/download/details.aspx?id=11829)

[PowerShell 3.0](http://www.microsoft.com/en-us/download/details.aspx?id=34595)

要安装 PS 3.0，您至少需要 2008 SP2（并下载 windows **6.0** 64 或 32 位版本）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-21T09:36:45.957

尝试右键单击 PowerShell 图标并选择“导入系统模块”选项。然后运行命令`Set-ExecutionPolicy RemoteSigned`。

# excel - Google 文档中的 if 语句都失败了，无论多么简单

> ID：14587161
> 
> 赞同：1
> 
> 时间：2013-01-29T16:09:45.327
> 
> 标签：excel, if-statement, google-docs

阅读文档后，我相信 Google Docs 应该能够处理以下格式的 if 语句（直接来自文档）：

```
IF(test, then_value, otherwise_value) 
```

因此，作为测试，我尝试以下操作：

```
=IF(2>1, 2, 1) 
```

这显然应该打印`2`，因为二总是大于一。但是，这给我带来了一个错误。所以，我尝试以下方法：

```
=IF(1=1, 1, 1) 
```

这也给了我一个错误。

显然我在这里做错了，除非谷歌在他们的文档中停止支持 if 语句。任何人都可以帮忙吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:13:16.400

谷歌显然已经改变了这一点，而没有改变[正确的文档](https://support.google.com/drive/bin/static.py?hl=en&hlrm=sv&topic=25273&page=table.cs&tab=1240291)。根据文档，在撰写本文时，正确的方法是在我的问题中：

```
=IF(2>1, 2, 1) 
```

但是，如果您开始在 Google Drive 中编写“=IF”，则会出现一个弹出窗口，引导您朝着正确的方向前进，并且似乎他们已将语法更改为：

```
=IF(2>1; 2; 1) 
```

注意使用分号而不是逗号。就是这样。

# asp.net - 使用动态字段编辑电子邮件

> ID：14587162
> 
> 赞同：0
> 
> 时间：2013-01-29T16:10:00.183
> 
> 标签：asp.net, email

我的网站自动向用户发送电子邮件，并且电子邮件文本中有一些动态字段。我的意思是，它会自动提取每个用户的姓名系列和前缀并将其发送给他们。例如：亲爱的前缀姓名家庭：-> 亲爱的约翰史密斯博士：您的帐户处于活动状态。

现在我想将编辑此电子邮件上下文的功能添加到管理部分。问题是某些字段是动态的。我的代码是这样的：

```
 bodyMsg.Append( " Dear "+prefix+name+family+", thank you for accepting our request.Your username is your email and here is your Password :" + password); 
```

如您所见，姓名、家庭、前缀和密码是动态变化的。现在管理员需要编辑电子邮件上下文。他应该从 Rad 编辑器中的控制面板执行此操作。例如，在电子邮件上下文中更改姓名或家庭的位置。我需要的是当管理员使用诸如前缀、名称或家族之类的关键字时，系统会检测到动态字段。以及使用动态字段编辑的电子邮件。有谁能够帮助我？谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:24:25.157

上次我不得不做类似的事情时，我让他们在他们的文本中使用预定义的模板词。

```
"Dear {prefix} {name} {family}, thank you for accepting....". 
```

之后我用值替换了文本中的模板词。

**编辑**

我们使用需要由应用发送的邮件模板来完成这些工作。模板由某人创建并存储在数据库中。他们有文档，其中包含可以在邮件模板中使用的动态字段列表，如下例所示`{ReplaceWithName}`：在我的应用程序中，我将用适当的数据替换这些动态字段：

```
Person person = GetPersonInfo(); //Gets the information of the person
string body = GetBodyFromDatabase(); //Retreives the created mailtemplate
body = body.Replace("{ReplaceWithName}", (person.Firstname + " " + person.Lastname)); //Do this for each dynamic field
mailMessage.Body = body; 
```

这当然会给创建这些模板的用户带来一些责任。

# function - Matlab fminsearch 选项/限制

> ID：14587164
> 
> 赞同：3
> 
> 时间：2013-01-29T16:10:16.687
> 
> 标签：function, matlab, fminsearch

我在 Matlab 中有这个函数，它应该通过改变 inValues 的两个初始设置值来找到 minValuePossible 的最小值。如何将 fmin 搜索功能设置为在尝试查找最小值时不尝试负值？另外，如何设置 fminsearch 函数在尝试找到最小值时执行的不同变化的数量？因为目前它尝试了两个 inValues 的大约 20 种不同组合，然后完成。也许定义它改变每个值的数量？我该怎么做？

```
 function Valueminimiser

            inValues = [50,50];

            minValuePossible = fminsearch(@minimiser, inValues); 

                function result = minimiser(inValues)

                x=inValues(1);
                y=inValues(2);

                RunMode = 2;
                ValueOne = x;
                ValueTwo = y;

                [maxSCRAout] = main(RunMode,ValueOne,ValueTwo);
                result = minValuePossible;

              end

            end 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-02-09T11:07:28.960

> 如何将 fmin 搜索功能设置为在尝试查找最小值时不尝试负值？

在您的 minimiser 函数的开头添加值的约束。如果您遇到此约束，则返回一个巨大的最小化函数值。这将防止 fminsearch 考虑不符合您兴趣的数字：

```
function result = minimiser(inValues)
            if (sum(inValues < 0) > 1) % check if there is any negative number in input variable
                result = hugeValue;    % give a big value to the result
                return;                % return to fminsearch - do not execute the rest of the code
            end

            x=inValues(1);
            y=inValues(2);

            RunMode = 2;
            ValueOne = x;
            ValueTwo = y;

            [maxSCRAout] = main(RunMode,ValueOne,ValueTwo);
            result = minValuePossible; 
```

> 另外，如何设置 fminsearch 函数在尝试找到最小值时执行的不同变化的数量？

您可以使用 optimset 函数定义 fminsearch 的选项。optimset 'MaxFunEvals' 的参数是评估的最大数量 - 请注意，这个 cout 甚至是您约束的值，所以如果您担心准确性，也许按照 @slayton 的建议设置 'TolX' 可能会更好。

```
options = optimset('MaxFunEvals',numberOfVariations);
minValuePossible = fminsearch(@minimiser, inValues,options); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:20:49.097

的[文档`fminsearch`](http://www.mathworks.com/help/matlab/ref/fminsearch.html)没有描述限制要最小化的函数域的方法。

如果要将范围限制为所有非负数，则可以简单地将函数包装在对 的调用中`abs`，具体取决于语法。

```
minValuePossible = fminsearch( @(x)(minimiser( abs(x) ) ), inValues); 
```

如果您担心它会不断收敛到相同的最小值，请尝试各种不同的初始值。

最后，您可以更改`X`和`minValuePossible`使用`TolX`和`TolFun`输入参数的终止容差。这是使用标准参数值语法完成的：`function(...., 'Param', value)`

```
fminsearch( @(x)(minimiser(abs(x))), inValues, 'TolX', x_tolerance); 
```

# jquery - 无法在向下切换框内获得花式框链接

> ID：14587167
> 
> 赞同：0
> 
> 时间：2013-01-29T16:10:29.830
> 
> 标签：jquery, fancybox, stoppropagation

这是我的问题。我编写了一些自定义 jquery 来切换我网站上的登录表单。然后，我添加了一些我在此处找到的代码，如果您单击它来关闭该框。

问题出现了，因为我有一个链接到这个 div 内的一个花式框，它可以切换进/出。因为我`event.stopPropagation();`与点击一起使用，所以它与那个fancybox链接混淆了。完整的代码示例如下。

```
//Login Toggle
    $('a.login').click(function() {
        if ($('.login-box').is(':hidden')){
            $('.login-box').fadeIn('normal');
            $('span.arrow-up').fadeIn('normal');
            $(this).text('Close');
        }
        else{
            $('.login-box').fadeOut('normal');
            $('span.arrow-up').fadeOut('normal');
            $(this).text('Log-In');
        }
    });
    //Close when click off login
    $('html').click(function() {
        $('.login-box').fadeOut('normal');
        $('span.arrow-up').fadeOut('normal');
        $('a.login').text('Log-In');
    });
    //Exclude these divs, so clicking inside them won't close login
    $('.login-box, a.login, span.arrow-up').click(function(event){
        event.stopPropagation();
    });

    //Forgot Password Fancybox
    $("a.fancybox").fancybox({
        maxWidth    : 800,
        maxHeight   : 600,
        fitToView   : false,
        width       : '70%',
        height      : '70%',
        autoSize    : false,
        closeClick  : false,
        openEffect  : 'fade',
        closeEffect : 'fade'
    }); 
```

如果我取出 stopPropagation，一切都按预期工作（fancybox 按钮有效），我只是失去了通过在登录框外部单击来关闭登录框的能力。任何人都可以帮助我用一种更聪明的方式来编写它，而不会破坏fancybox的功能吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:46:56.890

`event.stopPropagation()`正在阻止事件到达由 fancybox 设置的处理程序

您需要允许事件定位`a.fancybox`继续传播

```
$('.login-box, a.login, span.arrow-up').click(function(event){
    if ($(event.target).hasClass('fancybox') == false) {
        event.stopPropagation();
    }
}); 
```

这将允许事件传播任何具有类“fancybox”的元素

* * *

这与您的问题无关，但我建议您添加`event.preventDefault()`或`return false`单击链接处理程序

# node.js - 代理后面的 nodejs 的简单示例

> ID：14587169
> 
> 赞同：4
> 
> 时间：2013-01-29T16:10:31.917
> 
> 标签：node.js, https, proxy

这是一个简单的 nodejs 脚本，用于使用 node 作为 https 客户端与外界交互。如何修改它，以便在像这样的公司代理后面运行它时不会出现“ECONNREFUSED”错误`http://10.10.10.10:8080`？

```
var https = require('https');

var options = {
  hostname: 'encrypted.google.com',
  port: 443,
  path: '/',
  method: 'GET'
};

var req = https.request(options, function(res) {
  console.log("statusCode: ", res.statusCode);
  console.log("headers: ", res.headers);

  res.on('data', function(d) {
    process.stdout.write(d);
  });
});
req.end();

req.on('error', function(e) {
  console.error(e);
}); 
```

- - 更新 - -

我想出了如何使用 npm 'request' 包（[https://github.com/mikeal/request](https://github.com/mikeal/request)）。仍然想知道如何使用 vanilla 节点库来做到这一点。

```
var request = require('request').defaults({proxy:'http://my.proxy.server:8080', agent:false});
request('https://www.google.com', function (error, response, body) {
  if (!error && response.statusCode == 200) {
    console.log(body) // Print the google web page.
  }
}) 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-08-05T21:34:38.970

通常最好在系统级别处理代理 - 将您的操作系统配置为使用代理而不是脚本。但是，这也可能会失败，因为大多数公司代理并没有打开所有端口。

一个通用的解决方案是让服务器（EC2 或 Rackspace 实例）充当您自己的代理，并让它在端口 443 上侦听 ssh。端口 443 在公司防火墙中为 https 开放。

此时，您可以将所有本地网络流量通过隧道传输到服务器，或者通过 ssh 连接到服务器并在那里运行脚本。

如果您要使脚本代理特定，它们将不是非常便携，并且不会在生产环境中强化，因为它们会在代理配置更改时中断。

# java - Jprofiler 配置

> ID：14587170
> 
> 赞同：1
> 
> 时间：2013-01-29T16:10:34.290
> 
> 标签：java, jprofiler

我正在尝试使用独立的 java 1.5 控制台应用程序评估 jProfiler。文档说要添加 -agentpath:[jprofilerti 库的路径]。

什么是 jprofilerti 库？

当我启动它时，我是否将此参数添加到我的控制台应用程序中？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T09:29:27.630

我建议执行

会话->集成向导->新建远程集成

在 JProfiler GUI 中。该向导将告诉您必须添加到 Java 调用的确切 VM 参数。

> 什么是 jprofilerti 库？

它是名为“jprofilerti”的本地库，位于`bin/[platform]`JProfiler 安装目录中。

# visual-c++ - 渲染openni帧需要GLUT吗？

> ID：14587172
> 
> 赞同：0
> 
> 时间：2013-01-29T16:10:44.060
> 
> 标签：visual-c++, opengl, glut, openni

我不能 100% 确定 GLUT 如何呈现来自 OpenNI 的数据。

我知道 GLUT 允许轻松创建一个窗口来包含 OpenGL <-> OpenNI 之间正在执行的操作。

但我想知道我是否必须使用 GLUT。我需要开发的应用程序需要的不仅仅是 GLUT 所提供的，即我需要制作一个 GUI。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:13:58.443

Glut 是一个使设置窗口更容易，最重要的是，便携的工具。它做得更多，比如键盘/鼠标输入和其他各种事情，但通常不建议使用它们。
为了回答你的问题，你可以在没有过剩的情况下做任何你想做的事情，过剩只会让一些事情变得更容易。

# android - 为 Android App 收集评论的编程方式

> ID：14587178
> 
> 赞同：1
> 
> 时间：2013-01-29T16:11:05.400
> 
> 标签：android

我发布了 Android 应用程序，我希望能够以某种程序化方式收集评论。我浏览了网络，似乎找不到任何 Google API 或任何 3rd 方服务。有没有人有任何建议或知道我不知道的事情？

我正在考虑编写某种 HTML 抓取工具来从开发人员控制台中提取它们，但我想在开始那次小冒险之前获得一些反馈。

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:14:30.900

您可以使用非官方的[Android Market API](http://code.google.com/p/android-market-api/)（它仍然是这样调用的）。

它从 Play 商店中抓取内容，所以你可以用它做各种事情：

例如获取描述、应用程序徽标、评论等。

# cordova - jquery移动页面显示以前查看过的数据

> ID：14587180
> 
> 赞同：0
> 
> 时间：2013-01-29T16:11:11.363
> 
> 标签：cordova, jquery-mobile

我正在构建一个 JQM/Phonegap 应用程序并且有一个烦人的问题。

我有一个页面显示来自 websql/sqllite 数据库的数据，只有 2-3 个字段（#view?id=123）。第一次查看此页面时，一切正常（我抓取数据并将值添加到 JQM pagebeforeshow 事件中的字段）。

如果您再次查看该页面以获取不同的记录 (#view?id=234)，则会出现此问题。它显示带有最后看到的数据的页面，然后在大约 1-2 秒后将其更新为当前记录的值。

有什么方法可以阻止此页面缓存（这是问题所在 - 我没有使用任何 JQM 缓存数据属性）还是应该尝试清空 pagehide 事件中的字段？

提前致谢。

讨论的示例代码：

```
$('#view').live('pagebeforeshow', function(event, data) {

    // Clear any interval counter 
    clearInterval(window.viewTimerIntervalID);

    // On page load get passed url vars
    if ($.mobile.pageData && ($.mobile.pageData.caseRef || $.mobile.pageData.id)){
        if ($.mobile.pageData.caseRef) {
            $('input#edit-case-ref').val($.mobile.pageData.caseRef);
        }
        if ($.mobile.pageData.id) {
            $('input#edit-recordId').val($.mobile.pageData.id)
        }
    }

    // Grab record ID from hidden field
    var editId = $('input#edit-recordId').val();

    // form fields
    var caseTypeSelect = $('select#edit-case-type-select'),
        taskTypeSelect = $('select#edit-task-type-select'),
        caseRef = $('input#edit-case-ref'),
        notes = $('textarea#edit-notes'),
        editTimer = $('#edit-time h1'),
        startButton = $('#editStartStopRecording'),
        findCaseRef = $('a#findCaseRef');
    var startButtonTextSpan = $('#editStartStopRecording').prev('span').find('span.ui-btn-text');
    startButton.button('refresh');

    // Empty values of fields
    caseTypeSelect.val([]);
    taskTypeSelect.val([]);
    caseRef.val('');
    notes.val('');
    editTimer.text("0:00:00");

    // Get options for first select
    function getCaseTypes(tx) {
        tx.executeSql('SELECT * FROM CASETYPES', [],
            function(tx,results){
                var len = results.rows.length;

                // Remove any options already appended.
                $('select#edit-case-type-select option').remove();

                // Cache CaseType Select
                var caseTypeSelect = $('select#edit-case-type-select');

                // Append the first empty blank value option
                caseTypeSelect.append('<option value="" data-placeholder="true">Select Case Type</option');

                for (var i=0; i<len; i++){
                    // Append Select with details
                    caseTypeSelect.append('<option value="' + results.rows.item(i).id +'">' + results.rows.item(i).description + '</option>');
                }

                // Refresh the list to add JQM styles etc
                caseTypeSelect.trigger("change");
            },
            errorCB
        );
    }

    // Get options for second select
    function getTaskTypes(tx) {
        tx.executeSql('SELECT * FROM ACTIONTYPES', [],
            function(tx,results){
                var len = results.rows.length;

                // Remove any options already appended.
                $('select#edit-task-type-select option').remove();

                // Cache CaseType Select
                var taskTypeSelect = $('select#edit-task-type-select');

                // Append the first empty blank value option
                taskTypeSelect.append('<option value="" data-placeholder="true">Select Task Type</option');

                for (var i=0; i<len; i++){

                    // Append Select with details
                    taskTypeSelect.append('<option value="' + results.rows.item(i).id +'">' + results.rows.item(i).description + '</option>');
                }

                // Refresh the list to add JQM styles etc
                taskTypeSelect.trigger("change");
            },
            errorCB
        );
    }

    // populate the selects with values from DB
    function getRecording(tx) {
        tx.executeSql('SELECT * FROM RECORDINGS WHERE id=?', [editId],
            function(tx,results){
                var len = results.rows.length;

                for (var i=0; i<len; i++){

                    // Add values to selects
                    caseTypeSelect.val(results.rows.item(i).caseTypeId);
                    taskTypeSelect.val(results.rows.item(i).actionTypeId);

                    // Store this start date as a global var
                    window.editStartDate = results.rows.item(i).startDate;

                    // Add value to inputs
                    caseRef.val(results.rows.item(i).caseRef);

                    // Add notes
                    notes.val(results.rows.item(i).notes);

                    // Refresh the list to add JQM styles etc
                    caseTypeSelect.trigger("change");
                    taskTypeSelect.trigger("change");

                    // Calculate the time if still recording and start timer
                    if (!results.rows.item(i).endDate) {

                        // No end date so still recording....
                        // Need to work out diff between start and now
                        // And increment

                        var start = new Date(results.rows.item(i).startDate);
                        var end = new Date();
                        var dateDiff =  end.getTime() - start.getTime();

                        milliSecs = dateDiff

                        // 1000 milliseconds in a second
                        msSecs = (1000)
                        // Convert to seconds
                        msMins = (msSecs * 60)
                        // Convert to mins
                        msHours = (msMins * 60)
                        // Floor and calc to hours
                        numHours = Math.floor(milliSecs/msHours)
                        // Calc Mins
                        numMins = Math.floor((milliSecs - (numHours * msHours)) / msMins)
                        // Calc secs 
                        numSecs = Math.floor((milliSecs - (numHours * msHours) - (numMins * msMins))/ msSecs)
                        // Add leading zeros
                        if (numSecs < 10){
                          numSecs = "0" + numSecs
                        }
                        if (numMins < 10){
                          numMins = "0" + numMins
                        }

                        // Calc results
                        timeOnLoad = numHours + ":" + numMins + ":" + numSecs;

                        // Add to timer
                        editTimer.text(timeOnLoad);

                        // Start the incrementor and put the incrementor id in a global var (wuldnt work inside a local var for some reason).
                        window.viewTimerIntervalID = setInterval(editCount,1000);

                        // Change the button
                        startButtonTextSpan.text('Pause');
                        startButton.buttonMarkup({theme: 'g'}); //Red
                        startButton.buttonMarkup({icon: 'minus'}); // Swap out for custom icons

                        // Add the stop class
                        startButton.addClass('stop');

                        // Disable all fields as still recording
                        caseTypeSelect.selectmenu('disable');
                        taskTypeSelect.selectmenu('disable');
                        caseRef.textinput('disable');
                        notes.textinput('disable');
                        findCaseRef.addClass('ui-disabled');

                    // Calculate the time if enddate exists
                    } else {

                        // There is an end time - so calc diff and append
                        // Get start and end date, convert to JS date objects and subtract
                        var start = new Date(results.rows.item(i).startDate);
                        var end = new Date(results.rows.item(i).endDate);
                        var dateDiff =  end.getTime() - start.getTime();

                        milliSecs = dateDiff

                        // 1000 milliseconds in a second
                        msSecs = (1000)
                        // Convert to seconds
                        msMins = (msSecs * 60)
                        // Convert to mins
                        msHours = (msMins * 60)
                        // Floor and calc to hours
                        numHours = Math.floor(milliSecs/msHours)
                        // Calc Mins
                        numMins = Math.floor((milliSecs - (numHours * msHours)) / msMins)
                        // Calc secs 
                        numSecs = Math.floor((milliSecs - (numHours * msHours) - (numMins * msMins))/ msSecs)
                        // Add leading zeros
                        if (numSecs < 10){
                          numSecs = "0" + numSecs
                        }
                        if (numMins < 10){
                          numMins = "0" + numMins
                        }

                        // Calc results
                        resultString = numHours + ":" + numMins + ":" + numSecs;

                        // Append data
                        editTimer.text(resultString);

                        // Change the button
                        startButtonTextSpan.text('Resume');
                        startButton.buttonMarkup({theme: 'f'}); //Green
                        startButton.buttonMarkup({icon: 'plus'});

                        // Add the stop class
                        startButton.addClass('resume');

                        // Enable all fields as not recording
                        caseTypeSelect.selectmenu('enable');
                        taskTypeSelect.selectmenu('enable');
                        caseRef.textinput('enable');
                        notes.textinput('enable');
                        findCaseRef.addClass('ui-enabled');

                    }
                }
            },
            errorCB
        );
    }

    // Populate select options from DB
    db.transaction(getCaseTypes, errorCB);
    db.transaction(getTaskTypes, errorCB);

    // Populate the fields with record details
    db.transaction(getRecording, errorCB);
}); 
```

也不确定它是否相关，但我使用的是多页模板（一个html文档中的所有#pages）。再次感谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:56:59.420

您可以尝试禁用缓存：

$.mobile.page.prototype.options.domCache = false;

您可以尝试从 localStorage 中删除特定元素：

localStorage.removeItem(elementHere);

希望能帮助到你。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:36:20.700

您可以清除`pagebeforeshow`事件处理程序中的值。

编辑：

您需要编排 SQL 事务和 JQM 页面更改。

1)`pageChange`从 SQL Tx 处理程序中启动

或者

2) 清除现有值，`pagebeforeshow`然后启动 SQL Tx。在 Tx 成功回调中可用时在屏幕上填充值。`loading`您可以在此等待期间显示动画。

# asp.net-mvc - 好的 WiX 编辑器

> ID：14587181
> 
> 赞同：4
> 
> 时间：2013-01-29T16:11:13.650
> 
> 标签：asp.net-mvc, deployment, wix

我目前正在开发一个使用 WiX 创建 MSI 的项目。过去我在 Sourceforge 上使用过 WiXEdit 来管理包含在 WiX 项目中的文件，因为它比直接操作 XML 稍微容易一些，但它仍然有点笨拙。有谁知道管理 WiX 项目中包含的文件的更好工具或创建 MSI 以部署 MVC 应用程序的更好替代方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T02:08:49.560

您可能需要考虑 IsWiX ( CodePlex )

这是最近的一篇博客文章，其中包含一段 YouTube 视频，展示了如何在 10 分钟内创建存根 Windows 服务、为其创建安装程序并将其签入 TFS SaaS 以进行 CI 构建。

[http://blog.iswix.com/2013/01/iswix-20130134-released.html](http://blog.iswix.com/2013/01/iswix-20130134-released.html)

相同的模式可用于处理 MVC 可能向您抛出的任何问题。（调整 MSBuild 项目以发布到本地文件夹，并使用 IsWiX 将该文件夹中的文件挑选到您的 WXS 中。）

一起进行一个小时的 webex 可能会带来大量的清晰度。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T23:09:22.170

我正在使用带有 Wix 3.7 的 Visual Studio 2012。但您也可以在此处查看[用于 WiX 的对话框设计的 GUI](https://stackoverflow.com/questions/2569707/gui-for-dialog-design-for-wix)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-03-25T18:33:21.270

这是编辑器列表：[http](http://robmensching.com/blog/posts/2007/11/20/WiX-editors) ://robmensching.com/blog/posts/2007/11/20/WiX-editors 。WiX v2.0 编辑器并不有趣，但 WiX v3.0 编辑器仍然很重要。

# sml - 递归计算 int list list 的可能总和

> ID：14587182
> 
> 赞同：1
> 
> 时间：2013-01-29T16:11:17.307
> 
> 标签：sml, smlnj, ml

我正在努力编写代码，它将计算 int list list 的总和。例如，如果我们考虑以下列表

```
[[1],[1,5],[7],[2,3,4]] 
```

我们可以得到不同的可能总和，具体取决于我们每次选择的整数：

```
[11,12,13,15,16,17] 
```

有人可以提供可能的方法（不需要代码）我可以解决它吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:07:25.393

以下是尝试将步骤分解为可读且希望可以理解的部分

```
fun sums xss =
    let
      fun extend xss y = map (fn xs => y :: xs) xss
      fun extend' xss ys = foldl (fn (y, b) => extend xss y @ b) [] ys
      fun extend'' xss = foldl (fn (xs,b) => extend' b xs) [[]] xss
      fun sum xs = foldl op+ 0 xs
    in
      map sum (extend'' xss)
    end

- sums [[1],[1,5],[7],[2,3,4]];
val it = [17,13,16,12,15,11] : int list 
```

显然，大多数函数都可以按照正确的顺序将参数作为对，因此直接提供给 map 和 fold 函数，而不是将它们包装在匿名函数中。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T19:03:58.100

这是我尝试仅使用列表和模式匹配来制作尾递归（有点）版本的算法。它是用 OCaml 而不是 SML 编写的，并且需要内部列表的升序

```
let reverse list = 
    let rec iter list acc :int list = match list with
    [] -> acc
    | x::xs -> iter xs (x::acc)
 in iter list [];;

let listAdd num list = 
  let rec iter num list acc :int list = match list with
     [] -> acc
    | x::xs -> iter num xs ((x + num)::acc)
  in reverse( iter num list []);;   

let listMerge listX listY = 
  let rec iter listX listY acc : int list = match listX with 
     [] -> (reverse acc) @ listY
     | x :: xs -> match listY with 
        [] -> (reverse acc ) @ listX
        | y :: ys -> match ( compare x y ) with
           0  ->  iter xs ys ( x::acc )
          |(-1) ->  iter xs listY ( x::acc )    
          | 1 ->  iter listX ys ( y::acc )
  in iter listX listY [];;  

let listSums listX listY =
 let rec iter listX listY acc = match listX with 
   [] -> acc
   | x :: xs -> iter xs listY ( listMerge acc (listAdd x listY ) )
 in iter listX listY [];;  

let possibleSums shallowList = match shallowList with 
   [] -> []
   | headList :: lists -> 
      let rec iter acc lists  = match lists with 
          [] -> acc
          | headList :: other -> iter ( listSums acc headList ) other  
      in iter headList lists;; 
```

这里 `possibleSums [[1];[1;5];[7];[2;3;4]];;`评估为`int list = [11; 12; 13; 15; 16; 17]`

所以基本上合乎逻辑的步骤是：

*   该`reverse`函数只是在构建结果累加器后恢复顺序的实用程序 - 尾递归优化的常用概念
*   `listAdd`在构建摘要时避免使用 map 实用程序的功能
*   `listMerge`等于 set union的函数将排序列表用作整数集
*   `listSums`将求和映射到两组笛卡尔积的函数
*   将总和映射到所有集合的完整笛卡尔积的最终级别的`posibleSums`函数。

该算法不仅通过TCO避免了递归中的堆栈溢出，而且还为这个计算问题提供了接近最优的解决方案。

[此外，可以通过添加过早的合并排序](http://en.wikipedia.org/wiki/Merge_sort)和从集合中删除重复元素来进一步改进此解决方案，因此内部集合顺序现在无关紧要：

```
let split lst = 
    let rec iter lst partX partY = match lst with
        [] -> partX,partY
        | x::xs -> iter xs partY (x::partX)
    in iter lst [] [];;

let rec mergeSort lst = match lst with 
    [] -> []
    |[x] -> [x]
    | _ -> let partX,partY = split lst in
           listMerge (mergeSort partX) (mergeSort partY);;

let possibleSums shallowList = match shallowList with 
   [] -> []
   | headList :: lists -> 
      let rec iter acc lists  = match lists with 
          [] -> acc
          | headList :: other -> iter ( listSums acc (mergeSort headList) ) other  
      in iter (mergeSort headList) lists;; 
```

您可以通过简单的示例测试其效率。让我们定义用于制作重复列表的重复函数：

```
 let rec repeat elem n = match n with
     0 -> []
    | _ -> elem :: (repeat elem (n - 1));; 
```

在这种情况下，`possibleSums( repeat( repeat 1 30) 30 )`将立即计算正确的单例答案 `int list = [30]`。虽然更直接的解决方案（如 Jesper 的解决方案）将永远做到这一点。

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-01-29T16:20:04.717

我会尝试用递归循环来解决它 - 在伪代码中：

```
sum = 0;

while (i < arrayOfArrays.length ) {
     sumUp(arrayOfArrayElements);
     i ++
 }

 function sumUp() {
     while( j < arrayOfArrayElement.length){
     sum = sum + arrayOfArrayElement[j].val
     j ++

  }

} 
```

因此，您调用一个函数，该函数对数组的每个数组元素求和，并在一个函数内将这些值相加，该函数为该数组数组中的每个元素调用该函数。大声笑

> 1.  创建一个函数，该函数接受一个整数数组并使用 for 或 while 循环添加包含的整数。
> 2.  循环遍历主数组并调用每个包含数组元素的函数来求和，直到没有更多元素为止，您可以通过使用数组的 .length 来实现这一点，该数组应该可以在每种脚本/编程语言中访问

# reporting-services - SSRS call stored procedure using ReportItems! textbox. Maybe custom report code?

> ID：14587193
> 
> 赞同：0
> 
> 时间：2013-01-29T16:11:45.137
> 
> 标签：reporting-services, ssrs-2008

I need to call a stored procedure during my report to insert values into a table. These values are the result of fields from the dataset added. For example, I have a row of values, and the far right column is `"ReportItems!TextBox1.Value + ReportItems!TextBox2.Value ..."` This gives the correct total on the report. Now I need to call a procedure using this value as a parameter.

Using a stored procedure as a dataset, I am unable to reference the `ReportItems`! I am also unable to create additional report parameters (even internal or hidden) which could be a result of a dataset due to the reporting infrastructure we are using.

I know using custom report code, I can call a stored procedure and also reference the `ReportItems`, but I have been unable to find the correct syntax. I am not familiar with VB.net so please be specific. If i could get an example of how to call: `Procedure TEST_INSERT(ReportItems!TextBox1.Value)`, I would be able to figure out how to implement it.

I am using an oracle backend as my data source. Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:33:31.050

If I've understood you correctly, you want to do an database update using a value calculated with an expression in your report. My answer to this would be threefold.

First up: *don't do it!*.

Second: [*seriously, don't do it!!*](https://dba.stackexchange.com/questions/24009/updating-data-from-a-report-any-potential-pitfalls) Reporting services is not meant or well suited for this kind of task, you most likely are looking at an [XY-Problem](https://meta.stackexchange.com/questions/66377/what-is-the-xy-problem).

Third, *if you insist on doing it anyways*, the easiest way I can think of to accomplish that is by using a seperate report to trigger the update, and pass the value you're after into a parameter for that report. In the main report, you set a click action on the cell with the total that calls the report, with the same value into the parameter.

A similar setup which may work as well, is to create a parameter based on the first dataset with that same "sum" expression you mention, and pass that down to another dataset.

However: don't do it! ;-)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T09:22:32.463

I would set up a dataset in the report service that calls an update or insert function in oracle and returns a value/s. This way you can send in the total you need calculate and produce a result telling the user if the update was successful.

There is no special method for doing this just select or enter your procedure name and refresh the fields to update the parameter/s. See [Oracle stored procedure in SSRS](http://www.joellipman.com/articles/microsoft/sql-server/reporting-services/559-returning-oracle-stored-procedure-resultset-in-ssrs.html).

Also using this method you can run the stored procedure in oracle, update the table and display the results.

# node.js - 只用猫鼬填充对象的一部分是否正确？

> ID：14587194
> 
> 赞同：0
> 
> 时间：2013-01-29T16:11:51.653
> 
> 标签：node.js, mongodb, mongoose

我会自己解释。

我们有类似的东西

```
var UserSchema = new Schema({
  issuedOffers: [ UserOfferSchema ]
});

var UserOfferSchema = new Schema({
  offer: { type: ObjectId, ref: 'Offer' },
  issuedAt: Date,
  validatedAt: Date,
  status: Number
}); 
```

尝试使用此查询进行填充时

```
User
    .find({})
    .populate('issuedOffers')
    .exec(function(err, users) {
        console.log(users);
        test.equal(10,10);
        test.done();
    }); 
```

我收到这个错误

```
 MissingSchemaError: Schema hasn't been registered for model "undefined".
 Use mongoose.model(name, schema) 
```

我不知道我做错了什么，或者它只是无法填充。

是的，他们都已经注册了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:38:52.353

您需要两个模式之间的参考。

例如在您的 UserOfferSchema 中：

```
user: { type: mongoose.Schema.Types.ObjectId, ref: 'User' } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:31:56.093

对于那些来到这里的人，我找到了解决方案:)

[https://github.com/LearnBoost/mongoose/blob/7ae5a82352f5239316ceba49fabd5f8337cc30cd/test/model.ref.test.js#L513-549](https://github.com/LearnBoost/mongoose/blob/7ae5a82352f5239316ceba49fabd5f8337cc30cd/test/model.ref.test.js#L513-549)

# java - 如何从 exe java 应用程序中了解 java 参数

> ID：14587196
> 
> 赞同：-1
> 
> 时间：2013-01-29T16:11:52.740
> 
> 标签：java, exe

我有实际上是 java wrapper 可执行文件的可执行 java 应用程序（作为“exe”文件）。有没有办法从exe java应用程序中grep java命令/参数。

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:19:17.490

在经典主函数的情况下，您将在 args 参数中找到命令：

```
public static void main(String[] args) {
  for (String s : args){
     System.out.println(s);
  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:01:36.833

您可以使用 Java Visual VM 连接到 java 进程并检查 VM 上的一些属性，例如系统属性、内存设置等。该工具在 JDK bin/jvisualvm [Visual VM page](http://visualvm.java.net/?Java_VisualVM)中可用。您可能必须尝试从列表中一一连接到可用的虚拟机才能找到您的虚拟机。Eclipse 显示为，但我能够看到它的 JVM 参数和系统属性。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:23:26.727

你的问题不是很清楚，但我试着回答。

如果您将参数从包装 exe 传递到 java 可执行文件，您显然知道哪些参数在 exe 中传递。

如果您需要知道 java 应用程序中传递的参数，那么您可能`main`在这个应用程序中有一个 matod。该方法声明如下：

```
public static void main(String[] args){} 
```

`args`数组正是您所需要的：在这里您可以找到传递给 java 可执行文件的参数。您所要做的就是使用这个数组。

# javascript - phonegap 应用程序未扩展以占用设备大小

> ID：14587200
> 
> 赞同：0
> 
> 时间：2013-01-29T16:12:00.520
> 
> 标签：javascript, android, cordova, phonegap-plugins, phonegap-build

我完成了phonegap应用程序的开发，但是布局有问题，我使用css文件来制作，我的问题是应用程序不采用设备屏幕尺寸，我希望它灵活并且应用程序扩展以采用合适的尺寸. 任何帮助将不胜感激。问候，

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-05T23:08:22.153

使用 PhoneGap，您绝对可以找到设备屏幕尺寸：

```
var widthScreen = window.innerWidth;
var heightScreen = window.innerHeight; 
```

根据您获得的尺寸，您可以放心地假设您正在使用哪种设备，并在设计界面时拥有关键信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-07-19T13:41:06.307

使用百分比，但在某些特定方式中，当您需要以像素为单位的内容时，您可以使用不同的 css 样式文件。例如 `<link rel="stylesheet" type="text/css" media="only screen and (min-device-width : 240px) and (max-device-width : 320px) " href="css/small.css" />`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:01:38.857

听起来您使用的 CSS 会在某处强制设置宽度或高度。不要为元素使用特定的像素大小，而是尝试使用百分比（至少对于宽度）。您可能还想了解响应式网页设计，以帮助为移动设备设计有效的 UI。一个简单的谷歌搜索应该让你继续学习。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-07-20T01:39:22.073

您可以使用 Css3 媒体查询来解决您的问题或

或者你可以使用

```
<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1"> 
```

我希望解决：D

# asp.net - ASP.NET MVC 4 找不到资源错误

> ID：14587201
> 
> 赞同：1
> 
> 时间：2013-01-29T16:12:06.380
> 
> 标签：asp.net, asp.net-mvc-4, server-error

我有一个名为“AuditoriaController”的控制器，在 _Layout.vbhtml 我有一个指向该控制器的操作链接：

```
<li>@Html.ActionLink("Auditoria", "Index", "Auditoria")</li> 
```

当我在视图中单击此链接时，我收到此错误消息：

> “/”应用程序中的服务器错误。
> 
> 无法找到该资源。
> 
> 说明：HTTP 404。您要查找的资源（或其依赖项之一）可能已被删除、名称已更改或暂时不可用。请查看以下 URL 并确保其拼写正确。

请求的 URL：/Auditoria/

版本信息：Microsoft .NET Framework 版本：4.0.30319；ASP.NET 版本：4.0.30319.17929

在 AuditoriaController 我有这个代码：

```
Public Class AuditoriaController
    Inherits System.Web.Mvc.Controller

    '
    ' GET: /Auditoria

    Function Index() As ActionResult
        Return View(AuditoriaDB.GetAllItems())
    End Function
End Class 
```

这是我在 RouteConfig.vb 上的路线

```
Public Shared Sub RegisterRoutes(ByVal routes As RouteCollection)
    routes.IgnoreRoute("{resource}.axd/{*pathInfo}")

    routes.MapRoute( _
        name:="Default", _
        url:="{controller}/{action}/{id}", _
        defaults:=New With {.controller = "EscalaPrevisao", .action = "Index", .id = UrlParameter.Optional} _
    )
End Sub 
```

用其他控制器不会发生这个问题。如果我使用此网址：localhost:4802/Auditoria/Index，则不会发生错误。

谁能帮我？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T04:32:13.277

当控制器类名不是预期的时返回 404。

将“Home”默认类重命名为“Home1”，您将看到完全相同的错误。验证没有错别字......几乎可以保证是这样。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-05-08T06:50:57.447

转至 Web 项目的项目属性页面并选择 Web 选项卡。**在开始操作部分，将其设置为特定页面，但将文本框留空。**

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-07-14T17:29:43.013

尝试在 Global.Asax.cs 的 Application_BeginRequest() 事件中重写 URL

```
 protected void Application_BeginRequest()
    {
        var originalPath = HttpContext.Current.Request.Path.ToLower();
        if (originalPath.Equals("/"))
        {
            Context.RewritePath("Controller/Action");
        }

    } 
```

不是一个理想的解决方案，但它可以作为临时解决方案。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2015-10-30T15:06:02.610

我的控制器的命名空间不正确（来自移动文件）。一旦我修复了命名空间，一切都正常了。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2017-11-03T12:04:26.573

![](../Images/4aa4e5a4d3a23c2050e6253e3a687c87.png)

我单击红色突出显示的复选框，一切正常

# android - Android View，创建自定义组件

> ID：14587206
> 
> 赞同：0
> 
> 时间：2013-01-29T16:12:28.177
> 
> 标签：android, custom-component, inflate, xml-layout

首先，我知道有很多类似的问题，但我可以找到一个完整的答案来做我想做的事。它是关于创建自定义组件的。

问题是，我想为我的 UI 创建一个自定义动画组件。此外，客户希望轻松更改组件的图像，因此我决定使用在代码中动画的 xml 布局。但是我好像搞不定...

我第一次尝试的例子是指示二氧化碳水平的针规。

有 2 个图像：仪表和针，所以我用我的两个 ImageView 创建了一个仪表布局。

```
<?xml version="1.0" encoding="utf-8"?>
<com.erdf.components 
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
<ImageView
    android:id="@+id/gauge"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_centerHorizontal="true"
    android:layout_centerVertical="true"
    android:src="@drawable/jauge" />

<ImageView
    android:id="@+id/needle"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentLeft="true"
    android:layout_alignParentTop="true"
    android:src="@drawable/jauge_needle" /> 
```

然后我创建了关联的类：

```
public class components extends RelativeLayout {

    private ImageView mNeedle;

    private int mValue = 0;

    public components(Context context, AttributeSet attrs, int defStyle) {
        super(context, attrs, defStyle);

        mNeedle = (ImageView)findViewById(R.id.needle);
    }

    public void SetGaugeValue(int value) {
        if(value > 180) {
            value = 180;
        }
        else if(value < -180)
        {
            value = -180;
        }

        RotateAnimation needleDeflection = new RotateAnimation(mValue, value, Animation.RELATIVE_TO_SELF, 0.5f, Animation.RELATIVE_TO_SELF, 0.5f);
        needleDeflection.setDuration(100*(Math.abs(mValue-value))); 
        needleDeflection.setFillAfter(true);

        mNeedle.startAnimation(needleDeflection);

    }
} 
```

最后，我尝试将此组件包含在我的 ActivityView 中

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="match_parent"
    android:layout_height="match_parent" >

    <include
        android:layout_centerHorizontal="true"
        android:layout_centerVertical="true"
        layout="@layout/gauge_layout" />

</RelativeLayout> 
```

这是活动类的代码：

```
public class GaugeActivity extends Activity {

    private components test;

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.view_layout);
    }
} 
```

所以我的第一个问题是：为什么在执行应用程序时我做错了这个异常：

```
 01-29 16:04:28.886: E/AndroidRuntime(1570): FATAL EXCEPTION: main
01-29 16:04:28.886: E/AndroidRuntime(1570): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.gauge/com.example.gauge.GaugeActivity}: android.view.InflateException: Binary XML file line #2: Error inflating class com.erdf.components
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.os.Looper.loop(Looper.java:137)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at java.lang.reflect.Method.invokeNative(Native Method)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at java.lang.reflect.Method.invoke(Method.java:511)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at dalvik.system.NativeStart.main(Native Method)
01-29 16:04:28.886: E/AndroidRuntime(1570): Caused by: android.view.InflateException: Binary XML file line #2: Error inflating class com.erdf.components
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.view.LayoutInflater.createView(LayoutInflater.java:596)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.view.LayoutInflater.createViewFromTag(LayoutInflater.java:687)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.view.LayoutInflater.parseInclude(LayoutInflater.java:807)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.view.LayoutInflater.rInflate(LayoutInflater.java:736)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.view.LayoutInflater.inflate(LayoutInflater.java:489)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.view.LayoutInflater.inflate(LayoutInflater.java:396)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.view.LayoutInflater.inflate(LayoutInflater.java:352)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at com.android.internal.policy.impl.PhoneWindow.setContentView(PhoneWindow.java:270)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.app.Activity.setContentView(Activity.java:1881)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at com.example.gauge.GaugeActivity.onCreate(GaugeActivity.java:24)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.app.Activity.performCreate(Activity.java:5104)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1080)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2144)
01-29 16:04:28.886: E/AndroidRuntime(1570):     ... 11 more
01-29 16:04:28.886: E/AndroidRuntime(1570): Caused by: java.lang.NoSuchMethodException: <init> [class android.content.Context, interface android.util.AttributeSet]
01-29 16:04:28.886: E/AndroidRuntime(1570):     at java.lang.Class.getConstructorOrMethod(Class.java:460)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at java.lang.Class.getConstructor(Class.java:431)
01-29 16:04:28.886: E/AndroidRuntime(1570):     at android.view.LayoutInflater.createView(LayoutInflater.java:561)
01-29 16:04:28.886: E/AndroidRuntime(1570):     ... 23 more 
```

第二个是关于如何使用我的组件。如何在我的成员变量 test 中转换包含的布局，它是与相同包含的布局关联的类的实例？然后我可以简单地使用 setGaugeValue ( ) 函数来为针设置动画。

我希望我足够清楚。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:32:43.333

不需要为“组件”使用自定义的RelativeLayout，它可以只是一个普通的RelativeLayout。

在任何情况下，您都会创建对该特定 RelativeLayout 的引用

```
(components) comp = (components) findViewById(R.id.myComponent)
  //note that you don't have id set up yet in your custom view xml tag 
```

那么你可以使用

```
comp.SetGaugeValue(5); 
```

请注意，类名“组件”应以大写字母开头 - java 实践。

# php - 设计一系列OO类的正确方法

> ID：14587208
> 
> 赞同：0
> 
> 时间：2013-01-29T16:12:29.270
> 
> 标签：php, oop, interface, model

我正在设计一个系统来与几个不同的[LMS](http://en.wikipedia.org/wiki/Learning_management_system)（目前：Moodle、BlackBoard、Canvas）进行交互。目前，我有如下所示的内容：

```
ModelFactory
     |
MoodleModel     -\
BlackboardModel -|-- LMSInterface
CanvasModel     -/ 
```

从我的端点，我正在做

```
$mf = new ModelFactory($app, $ioc); 
```

并`ModelFactory`确定（从`$app`）要加载的模型，创建它，并允许通过调用后端模型`$mf->model->`。

在这些后端模型中的每一个中，我都有类似`get_courses`、`get_categories`、`get_quizzes`等的方法。我现在需要从测验中得到问题。

我最初的想法是在`get_quiz_questions`我的后端模型中添加一个，但这似乎很脏。

有没有“建议”的方式来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:16:44.480

返回什么`get_quizzes`？一个`Quiz`对象？如果是这样，您可以简单地添加`get_questions`到此对象，而不必担心 LMS 对象的层次结构。您的`Quiz`对象将是测验的后端不可知表示。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:44:56.570

认为它应该很大程度上取决于您使用的对象和模型。如果问题 100% 是测验的一部分，而不是模型的数据，那么允许模型返回测验问题会令人困惑。但是，如果测验问题只是模型的第一级 sudobjects - 那么允许模型返回问题是很正常的。

此外，如果例如测验是一些复杂的对象并且可能返回问题并节省一些资源以不构造/发送测验实例。在其他情况下，我同意布赖恩的观点。

而且，如果您的 LMS 接口是某种远程接口 - 那么您需要使其尽可能简单，并保证它只返回整个对象，避免微调用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T20:57:59.263

如果您将 a 添加`get_quiz_questions`到后端模型，那就没问题了。我希望这样的函数（提供一系列测验问题）返回通用对象（可能使用[Adapter 模式](https://en.wikipedia.org/wiki/Adapter_pattern)，或者可能使用[Facade](https://en.wikipedia.org/wiki/Facade_pattern) ，具体取决于设计的其余部分）。

# django - 管理表单上缺少 django-admin 表单域

> ID：14587214
> 
> 赞同：0
> 
> 时间：2013-01-29T16:12:36.210
> 
> 标签：django, django-forms, django-admin

我有一个非常奇怪的问题。我将我的项目从我的开发 PC (manage.py runserver) 部署到我的网络服务器 (apache mod_wsgi)，创建了我的数据库表并登录到 django-admin。

我可以看到我注册到管理员的模型，我可以添加它们。我的两个模型没有应有的所有表单域。缺少 FK 字段的选择框。此字段的标签可用，但字段本身缺失。

JS 错误不是问题，因为当 JS 不活动时，该字段也会丢失。所以我认为该字段尚未呈现。

没有错误消息或任何其他可以帮助我解决问题的东西。

任何人都遇到过同样的问题或关于如何解决这个问题的一些想法？这是我的代码：

```
class Heft(models.Model):
  doi = models.CharField(max_length=255)
  pdf = models.FileField(upload_to=u"pdf")
  cover = models.FileField(upload_to=u"cover")
  xhtml = models.FileField(upload_to=u"xhtml", blank=True, null=True,)
  heftnr = models.CharField(max_length=255, verbose_name=u"Nr.")
  offset = models.IntegerField(default=0)
  ivzende = models.IntegerField()
  ivzstart = models.IntegerField()
  jahrgang = models.CharField(max_length=255, verbose_name=u"Jahrgang")
  pubdatum = models.IntegerField()
  copyname = models.CharField(max_length=255, verbose_name=u"Copyright Name")
  copyyear = models.CharField(max_length=255, verbose_name=u"Copyright Jahr")
  startseite = models.IntegerField()
  erschdatum = models.DateField()
  zeitschrift = models.ForeignKey(u"Zeitschrift", verbose_name="Zeitschrift") # !!!! THIS FIELD IS MISSING AT THE FORM !!!!
  sachgebiete = models.ManyToManyField(u"Sachgebiet")

class HeftAdmin(admin.ModelAdmin):
  inlines = [AbstractHeftInlineAdmin, ]
  actions = None
  save_on_top = True
  list_display = (u"getFullName", u"heftnr",u"jahrgang", u"hasPDF",u"artikelCnt",
                  u"bearbeiten", u"showArtikel", u"splitPDF", u"exportHeft",
                  u"getExportPackage",)
  search_fields = (u"zeitschrift__zsname", u"heftnr", u"jahrgang",)
  filter_horizontal = (u"sachgebiete", )
  list_display_links = (u"getFullName", u"bearbeiten", )

  fieldsets = [
    (u"Allgemeine Informationen", {u"fields": [u"zeitschrift", u"heftnr",
                                               u"jahrgang", u"erschdatum",
                                               u"pubdatum", u"copyname",
                                               u"copyyear", u"sachgebiete",
                                               u"doi", u"cover", u"pdf",
                                               u"xhtml" ]}),
    (u"Herstellungsangaben", {u"fields": [u"ivzstart", u"ivzende",
                                          u"startseite", u"offset", ]}),
  ] 
```

kind regards Martin

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T10:03:46.940

Now I have the solution for this problem (but no explanation).

I killed all the database tables belonging to my project and recreated them ... magic ... everything works fine.

Maybe before some constraints were missing or something like this?

# php - 按时间排序表行 PHP

> ID：14587219
> 
> 赞同：0
> 
> 时间：2013-01-29T16:12:57.107
> 
> 标签：php, mysql

我有以下查询

```
$query = "SELECT * FROM phpvms_schedules ORDER BY deptime + 0 ASC"; 
```

在表中，我调用 $list 变量从上述变量中​​获取数据库结果。然后，我有一个 foreach 语句

```
foreach($list as $flight) 
```

其中一列以 HH:MM 格式回显航班的起飞时间值。

```
<td>'.$flight->deptime.'</td> 
```

本质上，我想按升序排列时间，向上，但我可能错过了一步，因为它没有这样做。它是这样的：

17:30
17:55
17:15
17:45
17:25

我对 $query 将 ASC 更改为 DESC 进行了小检查，但同样的事情发生了，显然是随着时间的下降。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:24:44.920

1.  更改`deptime`为（正确的方式`VARCHAR`）`TIME`
2.  查询喜欢`ORDER BY deptime`或`ORDER BY deptime ASC`

# css - Gif 图像未显示在 Chrome 的 Twitter Bootstrap 模式框中

> ID：14587225
> 
> 赞同：1
> 
> 时间：2013-01-29T16:13:26.950
> 
> 标签：css, twitter-bootstrap

我正在尝试将 gif 图像（加载程序）放入 Twitter Bootstrap 模式框中。它显示在 Firefox 中，但不在 Google Chrome 中。请帮帮我这是我的 HTML

```
<div id="myModal" class="modal hide holiday_box" tabindex="-1" role="dialog" aria-labelledby="myModalLabel" aria-hidden="true" style="left: 50%;width: 580px;height: 170px;margin: -85px 0px 0px -290px;padding: 20px;"> 
```

和 CSS

```
<div style='display:block;margin:25px auto;width:188px;height:60px;background-image: url(images/ajax-loader.gif);'></div> 
```

# printing - 使用打印机名称 Adob e PDF

> ID：14587229
> 
> 赞同：2
> 
> 时间：2013-01-29T16:13:49.257
> 
> 标签：printing

我到处寻找这个解决方案。下面的代码允许我打印到打印机 Adob​​e PDF，但我想要做的是自动将文件名保存为具有通用名称和特定文件夹的屏幕。例如，文件将被保存到`C:\temp\tmpResize.pdf`，我在那里遇到问题。

```
var params = this.getPrintParams();
params.interactive=params.constants.interactionLevel.silent;
params.pageHandling=params.constants.handling.none;
params.fileName =  "/c/temp/tmpResize.pdf";    
params.printerName="Adobe PDF"
this.print(params); 
```

谢谢你的帮助。

# spotify - 将 libspotify 中的音频数据写入文件时出现奇怪的噪音和异常情况

> ID：14587235
> 
> 赞同：2
> 
> 时间：2013-01-29T16:14:24.843
> 
> 标签：spotify, libspotify

目前我们正在一个 win 7 64 位系统中实现 Libspotify。除了播放，一切似乎都很好。我们从回调中获取数据，但即使在保存的音频上使用 audicity，也会充满异常。因此，为了进一步研究，我们采用了 win32 样本 (spshell) 并对其进行了修改，以将音乐数据保存到文件中。同样的问题，绝对是带有这些滴答声的音乐。我敢肯定这里缺少一些简单的东西，但是我不知道可能是什么问题。任何帮助都会很好，因为目前我们的项目处于停滞状态，直到我们能够解决这个问题。

保存的音频可以在这里查看 [http://uploader.crestron.com/download.php?file=8001d80992480280dba365752aeaca81](http://uploader.crestron.com/download.php?file=8001d80992480280dba365752aeaca81)

以下是我为保存文件所做的代码更改（仅用于测试）

```
static FILE *pFile;
int numBytesToWrite=0;
CRITICAL_SECTION m_cs;

int SP_CALLCONV music_delivery(sp_session *s, const sp_audioformat *fmt, const void *frames, int num_frames)
{
    if ( num_frames == 0 )
        return;
    EnterCriticalSection(&m_cs);
    numBytesToWrite = ( num_frames ) * fmt->channels * sizeof(short);
    if (numBytesToWrite > 0 )
        fwrite(frames, sizeof(short), numBytesToWrite, pFile);
    LeaveCriticalSection(&m_cs);
    return num_frames;
}
static void playtrack_test(void)
{

    sp_error err;
    InitializeCriticalSection(&m_cs);
    pFile = fopen ("C:\\zzzspotify.pcm","wb");
    test_start(&playtrack);
    if((err = sp_session_player_load(g_session, stream_track)) != SP_ERROR_OK) {
        test_report(&playtrack, "Unable to load track: %s",  sp_error_message(err));
        return;
    }

    info_report("Streaming '%s' by '%s' this will take a while", sp_track_name(stream_track),
            sp_artist_name(sp_track_artist(stream_track, 0)));
    sp_session_player_play(g_session, 1);
}

void SP_CALLCONV play_token_lost(sp_session *s)
{
    fclose(pFile);
    DeleteCriticalSection(&m_cs);
    stream_track_end = 2;
    notify_main_thread(g_session);
    info_report("Playtoken lost");
}
static int check_streaming_done(void)
{
    if(stream_track_end == 2)
        test_report(&playtrack, "Playtoken lost");
    else if(stream_track_end == 1)
        test_ok(&playtrack);
    else
        return 0;
    fclose(pFile);
    stream_track_end = 0;
    return 1;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T12:01:45.747

看起来这是个问题：

`fwrite(frames, sizeof(short), numBytesToWrite, pFile);`

文档指出，第二个参数是“要写入的每个元素的字节大小” `fwrite`，第三个参数是“元素的数量，每个元素的大小为*size*字节”。

您调用的方式`frwrite`将告诉它写入`numBytesToWrite * sizeof(short)`字节，这将在给定缓冲区的末尾运行。我真的很惊讶它没有崩溃！

我建议将您的`fwrite`电话更改为：

`fwrite(frames, sizeof(char), numBytesToWrite, pFile);`

或者：

```
int numSamplesToWrite = num_frames * fmt->channels;
fwrite(frames, sizeof(short), numSamplesToWrite, pFile); 
```

**编辑：**

在详细查看了您的音频后，我更加确信情况就是如此。这首歌似乎以一半的速度播放（即，正在写入的数据量是原来的 2 倍），并且这些伪像看起来像是缓冲区溢出到随机内存中。

# c - 编译时出错：')' 标记之前的预期表达式

> ID：14587239
> 
> 赞同：1
> 
> 时间：2013-01-29T16:14:42.033
> 
> 标签：c, eclipse, mingw, c-preprocessor

这是我的程序中的条件之一：

```
if(Debug)fprintf(stdout,"Direction dir %d quot %d rem %0.2f %s\n",direction,quotient, remain, cardinal[quotient]); 
```

我已经定义了所有内容并使用过`stdlib.h`，但它一直在返回

```
expected expression before ')' token 
```

我在 ECLIPSE 中使用 minGW 编译器。编译如下：`gcc -O0 -g3 -Wall -c -fmessage-length=0 -o wind_direction.o "..\\wind_direction.c"`

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:25:28.367

可能你有：

```
#define Debug 
```

With 适用于条件编译：

```
#ifdef Debug
...
#endif 
```

但是 if 需要在 () 中使用表达式。使用，例如：

```
#define Debug 1 
```

如果你想打印，`0`如果你不想。（但现在`#if Debug`用于条件编译）

# multithreading - SignalR 等待结果

> ID：14587243
> 
> 赞同：2
> 
> 时间：2013-01-29T16:14:57.623
> 
> 标签：multithreading, web-services, task, signalr, wait

尝试将消息推送到 UI 并接收一些结果以从 Web 服务以同步方式返回。方法代码如下。

```
[OperationContract]
public string DecypherCaptcha(string captcha)
{
    var connection = new HubConnection("http://localhost:51806");
    IHubProxy hub = connection.CreateHubProxy("robo");

    string decaptcha = null;
    hub.On("captchaDecyphered", decyphered =>
    {
        decaptcha = decyphered;
    });

    connection.Start().Wait();
    hub.Invoke<string>("DecypherCaptcha", new object[] { captcha });

    return decaptcha;
} 
```

问题是该方法在从集线器的`captchaDecyphered`. 但是，表达式`{ decaptcha = decyphered; }`在方法退出后从服务器触发正常。
添加`ManualResetEvent`标志并`WaitOne()`因为它并不能解决冻结执行和防止`hub.On("captchaDecyphered"`触发的问题。任何想法如何同步这个？
**UPDATE#1** *小通知。*无法避免使用充当 SignalR 客户端的中间同步 WCF Web 服务，因为非常特定的机器人坐在后面，它们只能通过同步调用 Web 服务来与外部世界交互。基本上在这种情况下，当机器人面对验证码时，它会调用 Web 服务，通过 SignalR 将其传递给 UI 以进行手动识别。
**更新#2**感谢@Ken 的鼓舞人心的建议，通过将连接建立和集线器方法调用封闭到单独的“线程”中，然后等待“ManualResetEvent”，使其工作：

```
new Thread(() =>
{
    connection.Start().Wait();
    hub.Invoke<string>("DecypherCaptcha", new object[] { captcha });
}).Start();
sync.WaitOne(); 
```

以前一直试图从“任务”开始，假设它会隐式地在单独的线程上运行，但没有运气。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T20:09:44.730

您可以让 SignalR 服务器上的hub 方法在调用`DecypherCaptcha`时返回解密的验证码作为 a 。`Task<string>``captchaDecyphered`

您可能希望使用[TaskCompletionSource](http://msdn.microsoft.com/en-us/library/dd449174.aspx)来帮助您创建适当的任务。基本上你可以调用`tcs.SetResult(deciphered)`并返回`tcs.Task`而不是调用`Clients.Caller.captchaDecyphered(deciphered)`.

那么您的客户端代码代码将只是：

```
[OperationContract]
public string DecypherCaptcha(string captcha)
{
    var connection = new HubConnection("http://localhost:51806");
    IHubProxy hub = connection.CreateHubProxy("robo");

    connection.Start().Wait();
    return hub.Invoke<string>("DecypherCaptcha", captcha).Result;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:40:40.640

你有几个选择。

(1) 将对 SignalR 集线器的请求分离到一个单独的线程上，可能使用静态`ThreadPool`类，然后添加所有`ManualResetEvent`内容。这样，当您等待 SignalR 方法返回时，它就不会阻塞。

(2) 使`DecypherCaptcha`方法异步。在我看来，它`DecypherCaptcha()`旨在成为一个 WCF 方法，而该方法又包装了一个 SignalR 方法。`captchaDecyphered`如果是这种情况，暂时忘记这是否是一种明智的方法，当SignalR 方法完成时，您仍然可以在客户端上调用 WCF 方法。但是，如果它不打算成为 WCF 方法，那么您可以`DecypherCaptcha()`（a）返回 a ，并且仅在完成时将其`Task<T>`标记为完成；或 (b) 传入 a作为延续参数，并在完成时调用它。`Task``captchaDecyphered``Func<T>``captchaDecyphered`

通常，使异步编程变得困难的一件事是，除了非常顶层的方法之外，您通常需要使调用异步方法的每个方法本身都是异步的，一直到堆栈的上下，或者通过[异步](http://msdn.microsoft.com/en-us/library/ms228963.aspx)模式（讨厌），或[继续传递](http://blogs.msdn.com/b/ericlippert/archive/2010/10/21/continuation-passing-style-revisited-part-one.aspx)（更好）或通过 Task 对象 + async/await（可能是最好的）。因此，添加单个异步方法通常会导致您的应用程序发生重大变化，一直如此。[这就是 .NET 4.5 中新的 async 和 await 关键字](http://msdn.microsoft.com/en-us/library/vstudio/hh191443.aspx)如此有用的众多原因之一，因为它们有助于在您开始使应用程序异步时封装必要的更改。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-02-17T06:42:09.163

您可以使用通用 Invoke 方法，您可以在其中指定您期望的结果类型。使用该方法，您可以使用 .Result 等待结果。

```
string result = IHubProxy.Invoke<string>("GetString").Result; 
```

# jquery - toggleClass 下拉菜单在 Ipad 上不起作用

> ID：14587244
> 
> 赞同：1
> 
> 时间：2013-01-29T16:14:58.420
> 
> 标签：jquery, ipad, drop-down-menu, toggleclass, touchstart

我正在创建一个脚本，它将在桌面、Ipad 或平板电脑上的导航项下显示下拉菜单。

现在，当我在桌面上测试它时，下拉菜单正在显示，而不是在 Ipad 上。

我尝试添加警报以查看当我点击 Ipad 上的导航项时它们是否显示，它们确实显示了。所以我想知道 Ipad 上的 ToggleClass 是否存在问题？

为什么这段代码在 Ipad 上不起作用？

```
 $('body').on('click touchstart','li.dropdown-control > a',function(event){
   event.preventDefault()
     var nextSibling = $(this).next();
       nextSibling.toggleClass('dropped');  
       $('.dropped').not(nextSibling).removeClass('dropped'); 
  }); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:17:21.033

我是个白痴，剧本很好。是我的平板电脑特定的 CSS 使它无法显示。

# jquery - 验证失败后如何重新触发jquery函数

> ID：14587245
> 
> 赞同：1
> 
> 时间：2013-01-29T16:15:00.927
> 
> 标签：jquery, asp.net-mvc-3, jquery-validate, unobtrusive-validation

我正在使用 asp MVC3 和 MVC Unobtrusive 验证构建一个表单。我注意到我的一些 jquery 函数在验证失败后不再运行。例如，我在文本框上有一个日期选择器，在文本框上有一个电话号码格式掩码，这两者都在第一次通过时完美运行，但如果表单验证失败，它们不会“重新加载”。

所以，我正在寻找一种修改jquery的方法，这样它就会再次运行。这两个功能目前都“准备好文档”，我猜页面在验证失败后不会重新加载，这就是它们不起作用的原因。例如，这里是电话号码掩码：

```
$(document).ready(function () {
    $("#PersonModel_PhoneNumber").mask("(999) 999-9999");
}); 
```

这是添加了东西的日期选择器：

```
 $(document).ready(function () {
        $("#PersonModel_DateofBirth").datepicker
            ({ dateFormat: 'mm/dd/yy',
                changeMonth: true,
                changeYear: true,
                yearRange: '-100y:c+nn',
                maxDate: '-1d',
                onClose: function ageVerification() {
                    var value = document.getElementById('PersonModel_DateofBirth').value;
                    var birthDate = new Date(document.getElementById('PersonModel_DateofBirth').value);
                    var currDate = new Date();
                    var yearDifferential = currDate.getFullYear() - birthDate.getFullYear();

                    var totalMonths = (yearDifferential * 12) + (currDate.getMonth() - birthDate.getMonth());

                    if (value != "") {

                        if (currDate.getDate() < birthDate.getDate()) {
                            totalMonths--;
                        }

                    }
                    else {
                        window.alert("Please enter your date of birth");
                    }

                    var age = parseInt(totalMonths / 12);
                    $("#Age").val(age);

                    if (age < 18) {
                        window.alert("You must be 18 or older to use this application.  ");

                    }
                }
            });

        }); 
```

所以我很确定我需要某种方法来重新触发我设置为 document.ready 的所有 jquery 函数，也许更改为 onclick 或其他东西。请让我知道你的想法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:12:57.073

我找到了答案，那就是添加 onclick 事件。例如，使用日期选择器，我将整个内容放在一个 var 中，然后在 .click 中单独调用它。这是日期选择器：

```
 var verifiedDate = $("#PersonModel_DateofBirth").datepicker
            ({ dateFormat: 'mm/dd/yy',
                changeMonth: true,
                changeYear: true,
                yearRange: '-100y:c+nn',
                maxDate: '-1d',
                onClose: function ageVerification() {
                    var value = $('#PersonModel_DateofBirth').val();
                    var birthDate = new Date($('#PersonModel_DateofBirth').val());
                    var currDate = new Date();
                    var yearDifferential = currDate.getFullYear() - birthDate.getFullYear();

                    var totalMonths = (yearDifferential * 12) + (currDate.getMonth() - birthDate.getMonth());

                    if (value != "") {

                        if (currDate.getDate() < birthDate.getDate()) {
                            totalMonths--;
                        }

                    }
                    else {
                        window.alert("Please enter your date of birth");
                    }

                    var age = parseInt(totalMonths / 12);
                    $("#Age").val(age);

                    if (age < 18) {
                        window.alert("You must be 18 or older to use this application.  Please use " +
                         "the Student Volunteer application, found here: " +
                         "http://www.salkeiz.k12.or.us/qam/student-criminal-history-check-packet-english");

                    }
                }
            });

            $("#PersonModel_DateofBirth").click(function () {
                verifiedDate.datepicker("show");
        }); 
```

# linux - 了解 /boot/config 文件

> ID：14587251
> 
> 赞同：7
> 
> 时间：2013-01-29T16:15:42.070
> 
> 标签：linux, configuration, linux-kernel, kernel

在`/boot/config-$kernel_version`我看到类似的东西：

```
CONFIG_X86_TSC=y
CONFIG_CAN_TSCAN1=m 
```

现在，我认为它`y`代表`yes`，这意味着该选项已设置。但是怎么样`m`？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T16:43:18.577

```
Y = Module is compiled directly in kernel. 
```

注意：一些驱动程序应该在内核功能中一直准备好，没有它们系统就不能像`Unix domain sockets (CONFIG_UNIX)`应该的那样运行`Y`

```
N = Don't compile module in kernel. do nothing. 
```

备注：不管你想要与否，都是你的选择。

```
M = Compile module as loadable module. Kernel will load this module On **Demand**. 
```

注：M 表示可加载模块，不需要一直熬夜，喜欢`Sound Driver`播放音乐时可以加载。它将使您的系统更有效率。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:18:46.080

这意味着它被编译为内核模块。

*   'N' - 表示根本不编译；
*   'Y' - 表示它是在内核二进制文件中编译的；
*   'M' - 表示它被编译为内核模块。

# kml - 使用 KML 向 Google 地球添加线条

> ID：14587254
> 
> 赞同：1
> 
> 时间：2013-01-29T16:15:50.033
> 
> 标签：kml, google-earth

所以，基本上，我试图找出一种方法，我可以使用 KML 在 Google 地球上画线（比如，表示 RC 飞机或其他东西的飞行路径）。不过，这里是踢球者：我想给它一个初始位置，然后检查某处以查看继续画线的位置，画线，然后保持原样。完成后，我可以移动它。

前任：

1.  从谷歌地球中的 A 点开始
2.  检查 //someserver 上的文件 XYZ.kml
3.  XYZ.kml 已更新要绘制的坐标
4.  谷歌地球拉入这些坐标并延长线
5.  重复 2->4 直到完成
6.  从第 3 个人查看完整的飞行路径。

有人对如何做到这一点有任何想法吗？它似乎可以以这种方式改变模型或其他东西的位置，但你必须以第一人称观看。我一直无法弄清楚如何让这个特定的功能正确出现。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T20:28:10.570

你有几种方法可以做到这一点，这里只有 2 种。

1.  通过[networkLink](https://developers.google.com/kml/documentation/kmlreference#networklink)创建[LineString](https://developers.google.com/kml/documentation/kmlreference#linestring)，然后使用[更新](https://developers.google.com/kml/documentation/kmlreference#update)功能更新您的 LineString（即替换为新版本）
2.  创建一个 LineString，然后使用`.getCoordinates().pushLatLngAlt()`它来构建。

编辑：抱歉，正如评论中所指出的，选项 2 用于 GE 插件，而不是独立版本

有关使用选项 #1 的帮助，请参阅[此 SO 问题](https://stackoverflow.com/questions/8496426/issue-using-networklinkcontrol-for-updates-in-ge-plugin)

有关选项 #2 的更多信息，请参阅[此 SO 问题](https://stackoverflow.com/questions/10029057/how-to-remove-a-linestring-which-is-added-part-by-part-to-ge-in-one-go)

# gcc - 获取当前编译的文件名（用CMake）

> ID：14587255
> 
> 赞同：1
> 
> 时间：2013-01-29T16:15:51.330
> 
> 标签：gcc, dependencies, cmake, cross-compiling

我目前正在尝试使用 CMake 交叉编译一个项目。由于 GCC 的 -MF 选项，我想输出每个编译文件的依赖关系。但是这个选项需要一个文件名才能输出。

`SET ( CMAKE_C_FLAGS "-mcpu=${CPU} -march=${CPU_ARCH} -O0 -MMD -MF ${XXXXXX}.d" )`

我正在寻找那个 XXXXXX 变量名，它将给我当前编译文件的名称。或任何其他允许我输出依赖文件的方式。

谢谢 ！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T07:11:46.823

`-MMD -MF file`我认为如果您想使用输入文件名，则不需要，只需`-MD`使用

> -MD
> 
> -MD 等价于 -M -MF 文件，不同之处在于 -E 不是隐含的。驱动程序根据是否给出 -o 选项来确定文件。如果是，驱动程序使用其参数，但后缀为 .d，**否则它采用输入文件的基本名称**并应用 .d 后缀。

# intellij-idea - IntelliJ IDEA 12 AJC 编译器

> ID：14587262
> 
> 赞同：1
> 
> 时间：2013-01-29T16:16:07.833
> 
> 标签：intellij-idea, aspectj

我正在尝试在 IntelliJ IDEA 12.02 社区版中将我的 Java 编译器设置为 AJC，并且一直按照[此处提供](http://www.jetbrains.com/idea/webhelp/using-the-aspectj-compiler-ajc.html)的说明进行操作。

但是我找不到从[这里](http://plugins.intellij.net/plugin?pr=idea&pluginId=4679)下载的插件 Spring-AOP 和插件 AspectJSupport 。当我尝试将它添加到我的插件时，IDEA 12.02 不支持它。

我为 AspectJrt 创建了一个库并重新启动了 IntelliJ，但似乎没有选项可以将我的 Java 编译器更改为 AJC

获取 IDEA 12.02 的 AJC 编译器有什么帮助吗？

# html - 内联块 50% 的元素不会均匀调整大小

> ID：14587263
> 
> 赞同：3
> 
> 时间：2013-01-29T16:16:10.627
> 
> 标签：html, resize, percentage, css

我有 2 个宽度为 50% 的内联块 div。它们都有 2 个按钮，每个按钮的宽度为 140 像素。

我的期望是，由于元素的宽度相等，它们也应该同时调整大小。现在发生的情况是，当包含的 div 变得足够小，以至于四个按钮不再适合它们时，它们会包裹并且 2 个 div 会调整大小，但在它们同样调整大小之前，一个 div 会变小。最好在 jsfiddle 中进行说明。如果您慢慢调整浏览器窗口的大小，您将看到一个 div 在另一个之前调整大小。

[http://jsfiddle.net/dominicm/pcYhL/2/](http://jsfiddle.net/dominicm/pcYhL/2/)

HTML 空白与注释一起被删除，边距和填充都设置为 0。

什么可能导致这种情况以及如何解决？关于如何实现 jsfiddle 中显示的布局的任何其他建议？

这是供参考的代码，以防 jsfiddle 以后不可用。

HTML：

```
<div class="menu">
  <div id="d">
      <input class="delete" type="submit" value="Delete Selected"><input class="collapse" type="button" value="Collapse All">
  </div><!--
  --><div id="p">
      <input class="expand" name="expand" type="button" value="Expand All">
  <input class="update" type="submit" value="Update Selected">
      </div>
</div> 
```

CSS：

```
.menu{
    width:100%;
    height:80px;
    border-radius:7px;
    background-color:#666;
    text-align:center;
    margin:0;
    padding:0;
}
#d{
    width:50%;
    display:inline-block;
    background-color:red;
    margin:0;
    padding:0;
}
#p{
    width:50%;
    display:inline-block;
    background-color:green;
    margin:0;
    padding:0;
}

.delete{
    margin:0;
    padding:0;
    width:140px;
}
.update{
    margin:0;
    padding:0;
    width:140px;
}
.collapse{
    margin:0;
    padding:0;
    width:140px;
}
.expand{
    margin:0;
    padding:0;
    width:140px;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:37:21.007

第二个 div 中的按钮之间仍有空白。

```
 <input class="expand" name="expand" type="button" value="Expand All">
 <input class="update" type="submit" value="Update Selected"> 
```

把它们放在同一条线上，你应该很好。

[http://jsfiddle.net/pcYhL/13/](http://jsfiddle.net/pcYhL/13/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:37:30.430

一个在另一个之前崩溃的原因是由于 HTML 格式的差异。

您在绿色框中有两个内联按钮（没有换行符），在红色框中它们用换行符分隔。以下是我所指的差异：

查看 JSFiddle：http: [//jsfiddle.net/pcYhL/14/](http://jsfiddle.net/pcYhL/14/)

这些按钮没有用换行符或空格分隔：

```
<div id="d">
     <input class="delete" type="submit" value="Delete Selected"><input class="collapse" type="button" value="Collapse All">
</div> 
```

但是这些是...

```
<div id="p">
     <input class="expand" name="expand" type="button" value="Expand All">
     <input class="update" type="submit" value="Update Selected">
</div> 
```

如果您将第二个更改为：

```
<div id="p">
     <input class="expand" name="expand" type="button" value="Expand All"><input class="update" type="submit" value="Update Selected">
</div> 
```

你会注意到它们同时倒塌。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:26:11.330

我不确定我是否 100% 清楚问题是什么。但我认为这应该可以解决您的问题。添加`min-width:140px;`到您的容器中。

```
#d{
    width:50%;
    min-width:140px;
    display:inline-block;
    background-color:red;
    margin:0;
    padding:0;
}
#p{
    width:50%;
    min-width:140px;
    display:inline-block;
    background-color:green;
    margin:0;
    padding:0;
} 
```

[http://jsfiddle.net/pcYhL/6/](http://jsfiddle.net/pcYhL/6/)

如果您希望按钮在容器重新调整大小时重新调整大小，那么您将需要对按钮的宽度使用百分比。

```
.delete{
    margin:0;
    padding:0;
    width:70%;
}
.update{
    margin:0;
    padding:0;
    width:70%;
}
.collapse{
    margin:0;
    padding:0;
    width:70%;
}
.expand{
    margin:0;
    padding:0;
    width:70%;
} 
```

[http://jsfiddle.net/pcYhL/10/](http://jsfiddle.net/pcYhL/10/)

# google-apps-script - 带有 ServerHandler 验证的 FormPanel 提交

> ID：14587268
> 
> 赞同：2
> 
> 时间：2013-01-29T16:16:24.837
> 
> 标签：google-apps-script

我想将一个 ServerHandler 绑定到一个提交按钮，这样我就可以在提交之前验证我的表单。如果验证成功，则执行表单的 POST。如果验证失败（由于字段不完整或不正确），则 POST 将停止，ServerHandler 可以指示不正确的字段。您在 Javascript 中使用 event.preventDefault() 执行的操作，或者在提交的按钮处理程序中返回 false。

```
var app = UIApp.getActiveApplication();
var form = app.createFormPanel();
var panel = app.createVerticalPanel();
// Add form elements to panel such as textboxes, radio buttons, list boxes etc.
...
...

var button = app.createSubmitButton("submit");
button.addClickHandler(app.createServerHandler("validate").addCallbackElement(panel));
panel.add(button);
form.add(panel);
app.add(form);

function validate(e) {
    // Do the validation of the form

    // QUESTION - How do we then disable or allow the POST?
} 
```

所以我目前正在做的事情是有一个验证按钮（普通按钮），如果在服务器处理程序中完成的表单验证是好的，它会变成一个“提交”按钮。然后用户必须再次单击该按钮才能提交表单。一旦验证良好，我必须锁定所有元素以防止它们更改任何字段。必须有一种更好的方法，更类似于上面提到的 Javascript 路由，并在此处引用：[event.preventDefault() vs. return false](https://stackoverflow.com/questions/1357118/event-preventdefault-vs-return-false)

作为参考，如果您将验证 ServerHandler 绑定到提交按钮，它将始终执行 POST。

# python - 使用 xlwt 'get_sheet' 方法访问工作表

> ID：14587271
> 
> 赞同：3
> 
> 时间：2013-01-29T16:16:30.780
> 
> 标签：python, xlrd, xlwt, xlutils

我想访问电子表格的工作表。我已使用 xlutils.copy() 将主工作簿复制到另一个工作簿。但不知道使用 xlwt 模块访问工作表的正确方法。我的示例代码：

```
import xlrd
import xlwt
from xlutils.copy import copy

wb1 = xlrd.open_workbook('workbook1.xls', formatting_info=True)
wb2 = copy(master_wb)

worksheet_name = 'XYZ' (worksheet_name is a iterative parameter)

worksheet = wb2.get_sheet(worksheet_name) 
```

有人可以告诉我使用 xlwt 模块访问工作簿中现有工作表的正确命令行是什么？我知道我们可以使用 'add_sheet' 方法使用 xlwt 模块在现有工作簿中添加工作表。

任何帮助，不胜感激。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T17:52:25.927

您可以`sheets = wb1.sheets()`获取工作表对象的列表，然后调用`.name`每个对象以获取它们的名称。要查找工作表的索引，请使用

```
[s.name for s in sheets].index(sheetname) 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-06-19T16:19:18.873

该`sheets()`方法奇怪地不在`xlwt.Workbook`课堂上，因此使用该方法的其他答案将不起作用 - 只有`xlrd.book`（用于读取 XLS 文件）有一个`sheets()`方法。因为所有的类属性都是私有的，所以你必须这样做：

```
def get_sheet_by_name(book, name):
    """Get a sheet by name from xlwt.Workbook, a strangely missing method.
    Returns None if no sheet with the given name is present.
    """
    # Note, we have to use exceptions for flow control because the
    # xlwt API is broken and gives us no other choice.
    try:
        for idx in itertools.count():
            sheet = book.get_sheet(idx)
            if sheet.name == name:
                return sheet
    except IndexError:
        return None 
```

如果您不需要它为不存在的工作表返回 None ，那么只需删除 try/except 块。如果您想按名称重复访问多个工作表，则将它们放入字典中会更有效，如下所示：

```
sheets = {}
try:
    for idx in itertools.count():
        sheet = book.get_sheet(idx)
        sheets[sheet.name] = sheet
except IndexError:
        pass 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-30T06:53:39.183

好吧，这是我的答案。让我一步一步来。考虑到以前的答案，xlrd 是获取工作表的正确模块。

1.  xlrd.Book 对象由 open_workbook 返回。

    `rb = open_workbook('sampleXLS.xls',formatting_info=True)`

2.  `nsheets`是一个属性整数，它返回工作簿中的工作表总数。

    `numberOfSheets=rb.nsheets`

3.  由于您已将其复制到新工作簿`wb`-> 基本上是为了写东西，wb 来修改excel `wb = copy(rb)`

4.  有两种方法可以获取工作表信息，

    **一个。**如果您只想阅读表格，请使用`sheet=rb.sheet_by_index(sheetNumber)`

    **湾。**如果要编辑工作表，请使用`ws = wb.get_sheet(sheetNumber)`（在此上下文中，对于所问的问题，这是必需的）

您现在知道 excel 工作簿中有多少张工作表以及如何单独获取它们，将它们放在一起，

**示例代码：**

参考：[http ://www.simplistix.co.uk/presentations/python-excel.pdf](http://www.simplistix.co.uk/presentations/python-excel.pdf)

```
from xlrd import open_workbook
from xlutils.copy import copy
from xlwt import Workbook

rb = open_workbook('sampleXLS.xls',formatting_info=True)
numberOfSheets=rb.nsheets
wb = copy(rb)

for each in range(sheetsCount):
    sheet=rb.sheet_by_index(each)
    ws = wb.get_sheet(each)
    ## both prints will give you the same thing
    print sheet.name
    print ws.name 
```

# javascript - 使用 JavaScript 遍历表以获取特定单元格的值

> ID：14587279
> 
> 赞同：3
> 
> 时间：2013-01-29T16:16:50.853
> 
> 标签：javascript

如何使用 JavaScript 遍历表以获取单元格 4 和 5 的值？

这就是我所拥有的：

```
function constructString() {    
    var table=document.getElementById('wcList');

    for(var i=0; i<table.rows.length;i++){

        var row       = getElem(RowId + i);
        var str_wc    = table.rows[i].cells[1].firstChild.value;
        var str_act   = table.rows[i].cells[5].firstChild.value;
        var str_coh   = table.rows[i].cells[6].firstChild.value;
        var str_mconf = table.rows[i].cells[7].firstChild.value;

        var string1 = str_wc + row + str_act + row + str_coh + row + str_mconf + row;

     }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:31:15.040

使用[`innerHTML`](http://www.tizag.com/javascriptT/javascript-innerHTML.php).

尝试这个：

```
function constructString() {   
    var table=document.getElementById('wcList');

    for(var i=0; i<table.rows.length;i++){

        // FIX THIS
        var row = 0;

        var str_wc=(table.rows[i].cells[1].innerHTML);
        var str_act=(table.rows[i].cells[5].innerHTML);
        var str_coh=(table.rows[i].cells[6].innerHTML);
        var str_mconf=(table.rows[i].cells[7].innerHTML);

        var string1=str_wc +row+str_act+row+str_coh+row+str_mconf+row;

        alert(string1);
     }
} 
```

# html - HTML 重叠图像

> ID：14587282
> 
> 赞同：1
> 
> 时间：2013-01-29T16:16:58.750
> 
> 标签：html, image

我必须在网页上放置一个如下所示的圆柱体：

![http://imageshack.us/photo/my-images/33/cylinderl.png/](../Images/118877c72ce1da7cec7b17e1a91ca96f.png)

它由重叠的小图像组成，以在表面上绘制曲线。它们中的每一个都是页面上的位置，具有不同的 img 标签，该标签包含在具有自己的 href 的锚点中。img 的 z-index 属性用于使它们以正确的方式重叠。圆柱体必须是组合的，因为它是动态创建的，正如您从图像中看到的那样，它的面可以有不同的颜色。

我需要做的是让所有面孔都可点击，并且每个面孔都必须指向不同的 URL。

当然，我的问题是圆柱体有曲线。而且我必须确保点击指向正确的 URL，尤其是在曲线附近，它在像素级别上并不精确，但至少可以接受。

我尝试为构成圆柱体的每个图像使用具有单个区域的地图，但当然它不起作用，正如我从规范中看到的那样，在这种情况下，只有 DOM 中第一个声明的地图有效.

我正在考虑通过 Javascript 解决这个问题，但我认为这不是一件容易的事，所以如果有人能给我一些关于我应该尝试什么的建议，我会很高兴。

哦，我不能使用 HTML5 功能来解决这个问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:39:00.887

巧妙地应用旧技术来解决具有挑战性的难题。

我可以为你想出两条前进的道路。一种是在圆柱体顶部放置一个透明（矩形）图像，并使用该`shape="poly"`属性创建一个 HTML 图像映射。对于资源，搜索 HTML 元素`map`和`area`参考，尤其是`shape`属性。网上应该有很多不错的教程。现在这种技术已经不再使用了，但它在 90 年代后期真的很流行。

另一种方法是在 javascript 中使用事件委托，将事件侦听器附加到主容器。在每个图像“像素”上为其所在圆柱体的适当部分应用一个 CSS 类。在您的事件处理程序中，您可以根据单击图像的类执行不同的操作，并且您可以在没有在每个单独的“像素”上附加一个事件的巨大开销。在 JQuery 中，这将类似于：

```
$("#cylinder").on("click", ".green", function() { location.href = "green_url"; }
$("#cylinder").on("click", ".red", function() { location.href = "red url"; } 
```

假设你把`class="green"`绿色像素和`class="red"`红色像素放在一起。（您可以通过象限或其他技术做到这一点；颜色只是一个示例）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:26:12.897

祝你好运 SVG ！[https://developer.mozilla.org/en-US/docs/SVG/Tutorial](https://developer.mozilla.org/en-US/docs/SVG/Tutorial)
使用 html dom 元素几乎不可能做到这一点，您必须使用与 CSS 兼容的所有浏览器来弯曲它。
还有 Canvas，但您将很难处理点击次数。
SVG 的唯一问题是它在 < IE8 中不受支持，在 IE8 中几乎不支持。但是弯曲 DOM 元素也不可用 < IE9。

编辑：
我看到你不能使用 HTML5，所以你唯一的机会是在 GD2 中生成整个图像并尝试映射点。但是你不能使用 HTML5 的原因是什么？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-02T16:13:16.303

您也可以尝试通过`getImageData()`函数使用 javascript / canvas 来实现。这个画布函数将给定点的 rgba 值。使用 alpha 值，您可以检查鼠标是否悬停或单击正确的区域，或者它是否是透明区域并且什么都不会发生。

我也为此目的制作了 jquery 插件。也许它可能会有所帮助。[http://www.cw-internetdienste.de/pixelselection/](http://www.cw-internetdienste.de/pixelselection/)

# excel - 如何验证单元格的一部分？

> ID：14587284
> 
> 赞同：0
> 
> 时间：2013-01-29T16:17:03.117
> 
> 标签：excel, excel-formula, vba

我需要确保一个单元格以一个字符串（目前是两个之一）开头，然后是一个冒号，然后是其他任何内容（不是空白）。

IE：

```
IP Address:1.2.3.4
FQDN:a.b.c.d 
```

所以，我需要确保这些字符串中的任何一个加上“：”都会启动单元格。':' 周围可能有间距。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:34:12.007

我不确定您所说的“确保”是什么意思...

这将检查单元格以查看它是否具有 Excel 函数中的两个起始值之一：

```
=IF(OR(LEFT(A1,5)="FQDN:",LEFT(A1,11)="IP Address:"),TRUE,FALSE) 
```

不过，这并没有考虑到冒号周围的间距。为此，它是正则表达式，我不太擅长。

-- 从 Tushar Mehta 的网站获取代码：[http ://www.tmehta.com/regexp/add_code.htm](http://www.tmehta.com/regexp/add_code.htm)

然后，使用这样的 Excel 函数：

```
=regexpfind(A1,"^FQDN\s*:\s*")
=regexpfind(A1,"^IP Address\s*:\s*") 
```

或者您可以将它们合并成一个公式，如下所示：

```
=regexpfind(A1,"^(FQDN|IP Address)\s*:\s*") 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:40:01.940

如果您的单元格是 A4，请在数据/验证中尝试此操作。自定义公式：

```
=((COUNTIF(A4,"fqdn*")+COUNTIF(A4,"ip address*"))*COUNTIF(A4,"*:*")>0) 
```

注意这不区分大小写。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:57:40.523

这可能是最简单的方法。假设您正在检查单元格 A1 中的值：

```
=IF(ISERR(FIND(":",A1)),"Bad!",IF(FIND(":",A1)<>LEN(A1), "OK", "Bad!")) 
```

首先，此公式检查单元格 A1 是否有冒号。如果没有，那就是坏细胞。如果是，它会检查冒号是否不是最后一个字符。如果是最后一个字符，冒号后面没有文字，所以是坏单元格。如果冒号后面有文字，那就是好单元格。希望这可以帮助！

**- 编辑 -**

要检查冒号是否不是第一个字符，这是公式：

```
=IF(ISERR(FIND(":",A1)),"Bad!",IF(OR(FIND(":",A1)=LEN(A1), FIND(":",A1) = 1), "Bad!", "OK"))"Bad!")) 
```

使用此公式，您必须在冒号之前有一个字符串。但是，如果您只需要检查这两个字符串，最好明确地检查它们。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T17:36:37.687

这是另一种解决方案（假设字符串在 中`A1`）：

```
=IFERROR(IF(AND(SEARCH(":",A1)>1,SEARCH(":",A1)<LEN(TRIM(A1))),"GOOD","BAD"),"BAD") 
```

这将处理：

1.  后跟一个冒号，然后是其他任何内容（**不是空白**）。
2.  ':' 周围可能有**间距。**

共享示例文件（使用不同的选项）：[https ://www.dropbox.com/s/5rxzyzgkg8biffg/StringWithColon.xlsx](https://www.dropbox.com/s/5rxzyzgkg8biffg/StringWithColon.xlsx)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T17:44:55.873

如果您*真的*想确保没有人可以在您正在谈论的单元格中输入任何其他内容，您可以使用自定义数据验证公式。这是一步一步：

1.  突出显示要验证的列的第一个单元格
2.  在功能区上，单击数据，然后在数据工具标题下，单击数据验证。
3.  数据验证窗口应该打开。单击设置选项卡（实际上应该默认选中）
4.  在“允许”下拉菜单中，单击自定义。
5.  在“公式”框中，复制以下公式：

    ```
    =IF(NOT(ISERR(FIND(":",A1))), AND(FIND(":",A1)<>LEN(A1),FIND(":",A1) <> 1), FALSE) 
    ```

用 A1 替换您需要的任何单元格。这与我的其他答案中的公式相同；它只检查是否有文本，然后是冒号，然后是更多文本（按此顺序），而不是特定字符串。要明确检查字符串“IP 地址”和“FQDN”，请在数据验证对话框中替换其他人的公式。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T18:10:16.347

如果您想要 VBA 解决方案，这里有一个函数，您可以将其用作 UDF 或来自 VBA

```
Option Explicit
Option Base 1
Function CorrectColonPlace(StringtoCheck As String, StartStrings As Variant) As Variant
    Dim iPos As Long
    Dim j As Long
    Dim StrStart As String
    '
    ' return 0 if stringtocheck fails, else the position of the colon
    CorrectColonPlace = 0
    On Error GoTo FuncFail
    iPos = InStr(StringtoCheck, ":")
    If iPos > 1 Then
        If iPos < Len(Trim(StringtoCheck)) Then
        '' assume that StartStrings is either a Range or a 2-dimension single-column array
        '' containing the strings to be found at the start of stringtocheck
            If IsObject(StartStrings) Then StartStrings = StartStrings.Value2
            StrStart = Trim(Left(StringtoCheck, iPos - 1))
            For j = 1 To UBound(StartStrings)
                If StrStart = Trim(StartStrings(j, 1)) Then
                    CorrectColonPlace = iPos
                    Exit For
                End If
            Next j
        End If
    End If
FuncFail:
End Function 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2013-02-08T14:22:36.577

因此，作为答案之一给出的正则表达式方法构成了我的解决方案的基础。我从提供的链接复制代码并粘贴到另一个模块。然后，我为 RegExpFind 创建了一个小包装器，它基本上运行匹配并在模式成功与否时返回真或假。

```
Function RegExpTest(FindIn, FindWhat As String, _
        Optional IgnoreCase As Boolean = False)

    Dim n As Long
    Dim resultsArray As Variant     ' Defined as single variant for the benefit of excel 97
    Dim result As Boolean

    ' Don't break on errors.  Easier to check if Err<>0
    On Error Resume Next
    Err.Clear

    result = False
    resultsArray = RegExpFind(FindIn, FindWhat, IgnoreCase)

    ' Check if the returned data is an array before proceeding.
    If IsArray(resultsArray) = True Then
        n = UBound(resultsArray)

        If Err.Number = 0 Then
            If LBound(resultsArray) <= UBound(resultsArray) Then
                result = True
            End If
        End If
    End If

    RegExpTest = result

End Function 
```

现在，我不能直接在自定义验证中使用它，因此，鉴于我的工作表是从元数据动态生成的（没有预先创建任何内容），我最终遵循了[这里](http://www.excelbanter.com/showpost.php?p=203693&postcount=4)给出的第二个建议。

我是如何做到的，是拥有以下 VBA 代码（摘自我必须创建数据验证规则的方法）：

```
Range(Cells(firstIndex, validationFormulaCellRef), Cells(lastIndex, validationFormulaCellRef)).Formula = _
    "=RegExpTest(INDIRECT(""D""&ROW()), ""^(FQDN|IP Address)\s*:\s*([\w\d\.]+)$"", TRUE)"

Dim validationFormula As String
validationFormula = "=" & validationFormulaCellName & firstIndex & "=TRUE"

' Now, setup custom validation to check that the referenced cell's value is True
With fieldRange.Validation
    .Delete
    .add Type:=xlValidateCustom, AlertStyle:=xlValidAlertStop, Operator:=xlBetween, _
     Formula1:=validationFormula
    .IgnoreBlank = False
    .InCellDropdown = False
    .InputTitle = ""
    .ErrorTitle = "Input Error"
    .InputMessage = "This field must start with either 'FQDN' or 'IP Address', plus a colon ':'."
    .ErrorMessage = "This field must start with either 'FQDN' or 'IP Address', plus a colon ':'."
    .ShowInput = True
    .ShowError = True
End With 
```

我将公式（实际工作）粘贴到未使用的单元格（EV [validationFormulaCellName] = 152 [validationFormulaCellRef]，沿行很远，然后设置数据单元格的自定义验证以检查论坛单元格的值是否为 True。firstIndex value 是我要插入的第一行的编号，所以我最终得到了一个看起来像“=EV10=TRUE”的验证公式。我在验证公式中使用 INDIRECT(..) 语法生成单元格引用对于该特定行，因为固定的（即：EV10）单元格引用不会为每一行自动调整（所有都将引用 EV10）。相反，验证公式是固定的（即：=EV10=TRUE）但*会*调整插入时的每一行。我不明白为什么这些行为不同。

将来，将我需要验证的值（FQDN 和 IP 地址）粘贴到我们拥有的存储各种数据位（枚举等）的隐藏工作表中是有意义的。这样，它可以从列表中以编程方式构建，而不是硬编码。

# java - 实例化通过泛型给出类的类的对象

> ID：14587286
> 
> 赞同：8
> 
> 时间：2013-01-29T16:17:07.390
> 
> 标签：java, generics

> **可能重复：**
> [在 Java 中创建泛型类型的实例？](https://stackoverflow.com/questions/75175/create-instance-of-generic-type-in-java)

我有一些代码：

```
public class foo<K> {
    public void bar() {
        K cheese = new K();
        // stuff
    }
} 
```

这不会编译，Intellij 的 linter 告诉我`Type parameter 'K' cannot be instantiated directly`。

我将如何实例化`K`.

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T16:18:39.033

[由于类型擦除](http://docs.oracle.com/javase/tutorial/java/generics/erasure.html)，你不能很好地做到这一点。这样做的标准方法是传递适当的`Class`对象，并使用它来实例化一个新实例。

例如从[这里](http://docs.oracle.com/javase/tutorial/java/generics/restrictions.html)：

```
public static <E> void append(List<E> list, Class<E> cls) throws Exception {
    E elem = cls.newInstance();   // OK
    list.add(elem);
} 
```

# javascript - 从 jquery 对象中获取 HTML 元素的类型

> ID：14587289
> 
> 赞同：12
> 
> 时间：2013-01-29T16:17:11.687
> 
> 标签：javascript, jquery, html, types

> **可能重复：**
> [使用 jQuery 获取元素类型](https://stackoverflow.com/questions/8388470/get-element-type-with-jquery)

序言：我是意大利人，对不起我的英语不好。

从这样的html代码：

```
<input class="myElem" />
<input class="myElem" />
<div class="myElem"></div>
<ul class="myElem"></ul>
<input class="myElem" /> 
```

有没有办法检索 html 对象类型？

就像是：

```
$('.myElem').each(function () {
      var htmlType = $(this).type() //Example
      console.log(htmlType);
});

/* Log:
*    input
*    input
*    div
*    ul
*    input
*/ 
```

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-01-29T16:18:47.403

```
$('.myElem').each(function () {
      var htmlType = $(this).prop('tagName') //Example
      console.log(htmlType);
}); 
```

# php - 我可以依靠 PHP php.ini 精度解决方法来解决浮点问题吗

> ID：14587290
> 
> 赞同：31
> 
> 时间：2013-01-29T16:17:20.563
> 
> 标签：php, floating-point

我在 PHP中找到了一些[浮点问题的解决方法：](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)

php.ini 设置`precision = 14`

```
342349.23 - 341765.07 = 584.15999999992 // floating point problem 
```

php.ini 设置，比方说`precision = 8`

```
342349.23 - 341765.07 = 584.16 // voila! 
```

演示：[http ://codepad.org/r7o086sS](http://codepad.org/r7o086sS)

那有多糟糕？

**1\. 如果我只需要精确的 2 位数计算（钱），我可以依靠这个解决方案吗？**

**2.如果不能，当这个解决方案失败时，你能给我一个明确的例子吗？**

**编辑：3\. 哪个 php.ini.precision 值最适合两位数，金钱计算**

* * *

*   请注意我不能使用整数计算（float*100 = cents），太晚了。
*   我不会处理高于 10^6 的数字
*   我不需要比较数字

# 更新

@Baba 的答案很好，但他在测试中使用了`precision=20`, `precision=6`......所以我仍然不确定它是否会起作用。

请考虑以下内容：

比方说`precision = 8`，我唯一要做的就是加法`+`和减法`-`

`A + B = C`

`A - B = C`

**问题 1：**对于 0..999999.99 之间的数字，精确解决方法是否会失败，其中 A 和 B 是带小数位的数字？如果是这样，请给我一个例子。

简单的测试就可以完成这项工作：

```
// if it fails what if I use 9,10,11 ???
// **how to find when it fails??? **
ini_set('precision', 8); 
for($a=0;$a<999999.99;$a+=0.01) {
  for($b=0;$b<999999.99;$b+=0.01) {
     // mind I don't need to test comparision (round($a-$b,2) == ($a-$b))
     echo ($a + $b).','.($a - $b)." vs ";
     echo round($a + $b, 2).','.round($a - $b, 2)."\n";
  }
} 
```

[但显然`99999999 * 2`工作太大了，所以我不能运行这个测试](http://codepad.viper-7.com/wra15R)

**问题 2：**当精确解决方法失败时如何估计/计算？没有如此疯狂的测试？**有没有数学*的直接答案？**如何计算会不会失败？

*我不需要知道浮点计算是否有效，但是如果您知道精度以及 A 和 B 的范围，则当解决方法失败时

* * *

请注意**，我真的知道**cents 和 bcmath 是最好的解决方案。但是我仍然不确定减法和加法的解决方法是否会失败

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-02-01T22:43:18.873

# 介绍

许多人认为浮点运算是一门深奥的学科。这是相当令人惊讶的，因为浮点在计算机系统中无处不在。大多数小数没有作为二进制分数的精确表示，因此需要进行一些舍入。一个好的开始是[每个计算机科学家都应该知道的关于浮点运算的知识](http://docs.oracle.com/cd/E19957-01/806-3568/ncg_goldberg.html)

## 问题

### 问题 1

> **如果我只需要精确的 2 位数计算**（钱），我可以依靠这个解决方案吗？

### 答案 1

如果您需要**精确的 2 位数字** ，那么答案是**否定**的，即使您是 ，也不能始终使用 php 精度设置来确定**2 位**小数`not going to work on numbers higher than 10^6`。

在计算过程中，如果长度小于 8，可能会增加精度长度

### 问题2

> 如果不能，当这个解决方案失败时，你能给我一个明确的例子吗？

### 答案 2

```
ini_set('precision', 8); // your precision
$a =  5.88 ; // cost of 1kg
$q = 2.49 ;// User buys 2.49 kg
$b = $a * 0.01 ; // 10% Discount only on first kg ;
echo ($a * $q) - $b; 
```

输出

```
14.5824 <---- not precise 2 digits calculations even if precision is 8 
```

### 问题 3

> 哪个 php.ini.precision 值最适合两位数，金钱计算？

### 答案 3

精度和金钱计算是两个不同的东西......使用 PHP 精度作为财务计算或浮点长度的基础并不是一个好主意

## 简单测试

Lest Run some example together using `bcmath`,`number_format`和简单`minus`

**`Base`**

```
$a = 342349.23;
$b = 341765.07; 
```

**`Example A`**

```
ini_set('precision', 20); // set to 20 
echo $a - $b, PHP_EOL;
echo floatval(round($a - $b, 2)), PHP_EOL;
echo number_format($a - $b, 2), PHP_EOL;
echo bcsub($a, $b, 2), PHP_EOL; 
```

输出

```
584.15999999997438863
584.15999999999996817    <----- Round having a party 
584.16
584.15  <-------- here is 15 because precision value is 20 
```

**`Example B`**

```
ini_set('precision', 14); // change to  14 
echo $a - $b, PHP_EOL;
echo floatval(round($a - $b, 2)), PHP_EOL;
echo number_format($a - $b, 2), PHP_EOL;
echo bcsub($a, $b, 2), PHP_EOL; 
```

输出

```
584.15999999997
584.16
584.16
584.16  <-------- at 14 it changed to 16 
```

**`Example C`**

```
ini_set('precision', 6); // change to  6 
echo $a - $b, PHP_EOL;
echo floatval(round($a - $b, 2)), PHP_EOL;
echo number_format($a - $b, 2), PHP_EOL;
echo bcsub($a, $b, 2), PHP_EOL; 
```

输出

```
584.16
584.16
584.16
584.00  <--- at 6 it changed to 00 
```

**`Example D`**

```
ini_set('precision', 3); // change to 3
echo $a - $b, PHP_EOL;
echo floatval(round($a - $b, 2)), PHP_EOL;
echo number_format($a - $b, 2), PHP_EOL;
echo bcsub($a, $b, 2), PHP_EOL; 
```

输出 

```
584
584
584.16   <-------------------------------- They only consistent value 
0.00  <--- at 3 .. everything is gone 
```

## 结论

忘记浮点数，然后计算，`cents`然后除以`100`是否为时已晚，只需简单地使用`number_format`它对我来说看起来一致。

# 更新

> 问题 1：对于 0..999999.99 之间的数字，精确解决方法是否会失败，其中 A 和 B 是带小数位的数字？如果是这样，请给我一个例子

增加的形式是`0`关于您的循环的组合可能性， 我真的认为没有人愿意为您运行这样的测试。`999999.99``0.01``99,999,999``9,999,999,800,000,000`

由于浮点数是具有有限精度的二进制数，因此尝试设置`precision`对确保精度的效果有限这是一个简单的测试：

```
ini_set('precision', 8);

$a = 0.19;
$b = 0.16;
$c = 0.01;
$d = 0.01;
$e = 0.01;
$f = 0.01;
$g = 0.01;

$h = $a + $b + $c + $d + $e + $f + $g;

echo "Total: " , $h , PHP_EOL;

$i = $h-$a;
$i = $i-$b;
$i = $i-$c;
$i = $i-$d;
$i = $i-$e;
$i = $i-$f;
$i = $i-$g;

echo $i , PHP_EOL; 
```

输出

```
Total: 0.4
1.0408341E-17     <--- am sure you would expect 0.00 here ; 
```

尝试

```
echo round($i,2) , PHP_EOL;
echo number_format($i,2) , PHP_EOL; 
```

输出

```
0
0.00    <------ still confirms number_format is most accurate to maintain 2 digit 
```

> 问题 2：当精确解决方法失败时如何估计/计算？没有如此疯狂的测试？有没有数学*的直接答案？如何计算会不会失败？

事实仍然是[浮点数](http://en.wikipedia.org/wiki/Floating_point)有[准确性问题](http://en.wikipedia.org/wiki/Floating_point#Accuracy_problems)，但对于数学解决方案，您可以查看

*   [机器精度和后向误差分析](http://en.wikipedia.org/wiki/Floating_point#Machine_precision_and_backward_error_analysis)
*   [最小化精度问题的影响](http://en.wikipedia.org/wiki/Floating_point#Minimizing_the_effect_of_accuracy_problems)

> 我不需要知道浮点计算是否有效，但是如果您知道精度以及 A 和 B 的范围，当变通方法失败时

![在此处输入图像描述](../Images/fc7ddddaa2626551c7dec3051b7312d3.png)

不知道那句话是什么意思:)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T16:24:43.247

根据文档，[精度指令](http://www.php.net/manual/en/ini.core.php#ini.precision)只是更改将数字转换为字符串时显示的数字：

> **精度** `integer`
> 以浮点数显示的有效位数。

因此，它基本上是[number_format()](http://php.net/number_format)或[money_format()](http://php.net/money_format)的一个非常复杂的替代方案，只是它的格式选项较少，并且可能会受到您可能不知道的其他一些副作用的影响：

```
<?php

$_POST['amount'] = '1234567.89';

$amount = floatval($_POST['amount']);
var_dump($amount);

ini_set('precision', 5);
$amount = floatval($_POST['amount']);
var_dump($amount); 
```

...

```
float(1234567.89)
float(1.2346E+6) 
```

**编辑：**

我坚持：这个设置不会改变 PHP 用数字进行数学计算的方式。从浮点数（甚至不是整数！）转换为字符串*时*，这只是更改格式选项的一种神奇方式。例子：

```
<?php

ini_set('precision', 2);

$amount = 1000;
$price = 98.76;
$total = $amount*$price;

var_dump($amount, $total);

ini_set('precision', 15);
var_dump($amount, $total); 
```

... 印刷：

```
int(1000)
float(9.9E+4)
int(1000)
float(98760) 
```

这说明：

1.  浮点计算不受影响，只有*显示*变化
2.  整数在所有情况下都不受影响

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-29T17:15:24.420

我只是引用[这个](http://floating-point-gui.de/basic/)有趣的网站来解决这个问题。（预计没有声誉:)但应该提到：

> 我能做些什么来避免这个（浮点）问题？
> 
> 这取决于你在做什么样的计算。
> 
> *   如果你真的需要你的结果精确地加起来，尤其是当你处理钱的时候：使用一个特殊的十进制数据类型。
>     
>     
> *   如果您只是不想看到所有这些额外的小数位：只需在显示结果时将结果格式化为固定的小数位数。
>     
>     
> *   如果您没有可用的十进制数据类型，另一种方法是使用整数，例如完全以美分计算货币。但这是更多的工作并且有一些缺点。

该网站还包含一些[PHP的基本技巧](http://floating-point-gui.de/languages/php/)

我会使用整数或`Decimal`为它创建一个特殊类型。

如果您决定使用*bcmath*：**如果将该值传递给 SQL 查询或其他外部程序，请小心。如果他们不知道精度，它可能会导致不必要的副作用。（有什么可能）**

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T16:37:20.460

我相信，如果您只是简单地对您提出的结果进行四舍五入，那么这将为您解决浮点问题，而无需对您的配置进行服务器范围的更改。

```
round(342349.23 - 341765.07, 2) = 584.16 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-02-08T23:35:34.367

如果使用precision=8，如果使用8位数字，则无法确定第8位。这可能会从第 9 位四舍五入减去 1。

例如

```
12345678.1 -> 12345678
12345678.9 -> 12345679 
```

这可能看起来不是那么糟糕，但考虑

```
 (11111111.2 + 11111111.2) + 11111111.4
-> (11111111)                + 11111111.4
-> 22222222.4
-> 22222222 
```

然而，如果您使用精度 = 9，这将是`22222222.8`四舍五入为`22222223`.

如果你只是在做加法和减法，你应该使用至少 2 位左右的精度，而不是避免在这类计算中四舍五入。如果你在做乘法或除法，你可能需要更多。使用必要的最低限度可能会导致到处丢失数字。

因此，要回答您的问题，如果您很幸运并且 php 在计算中使用高精度并且仅以较低的精度存储结果（然后您不会使用该数字继续执行），您可能会侥幸逃脱其他计算），但总的来说，这是一个非常糟糕的主意，因为（至少）计算中的最后一个数字是完全不可靠的。

# c# - 将上下文菜单绑定到视图模型属性

> ID：14587293
> 
> 赞同：2
> 
> 时间：2013-01-29T16:17:33.700
> 
> 标签：c#, wpf, xaml, mvvm

我有一个关联到数据网格中的按钮的上下文菜单。我希望上下文菜单项根据我在视图模型中的字符串列表进行更改。当我单击按钮时，什么都没有显示。

这是我正在使用的 xaml，它位于数据网格中：

```
<Button Grid.Column="1" Content="..."  Click="Button_Click">
        <Button.ContextMenu>
       <ContextMenu ItemsSource="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type UserControl}},Path=DataContext.SelectableDescriptions}">    
         <TextBlock Text="{Binding}"/>
       </ContextMenu>
       </Button.ContextMenu>        
</Button> 
```

这是整个 DataGrid xaml：

```
<DataGrid Grid.Row="1" Grid.ColumnSpan="4" CanUserAddRows="True" AutoGenerateColumns="False" CanUserDeleteRows="True"  ItemsSource="{Binding JobPricings, Mode=TwoWay}" SelectedItem="{Binding SelectedJobPricing, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" >
    <DataGrid.Columns>
        <DataGridTemplateColumn  Header="Description" Width="25*"   >
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="75*"/>
                            <ColumnDefinition Width="25*"/>
                        </Grid.ColumnDefinitions>
                        <TextBox Grid.Column="0" Text="{Binding Description,Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"/>
                        <Button Grid.Column="1" Content="..."  Click="Button_Click">
                            <Button.ContextMenu>
                                <ContextMenu ItemsSource="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type UserControl}},Path=DataContext.SelectableDescriptions}">
                                    <TextBlock Text="{Binding}"/>
                                </ContextMenu>
                            </Button.ContextMenu>
                        </Button>
                    </Grid>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
         </DataGridTemplateColumn>
        <DataGridTextColumn Header="Unit Price" Binding="{Binding UnitPrice, Mode=TwoWay}" Width="25*"/>
        <DataGridTextColumn Header="Unit" Binding="{Binding Unit, Mode=TwoWay}" Width="25*"/>
        <DataGridTemplateColumn  Header="Currency   " Width="25*" >
            <DataGridTemplateColumn.CellTemplate>
                <DataTemplate>
                    <Grid>
                        <ComboBox  SelectedValue="{Binding CurrencyID, Mode=TwoWay}" SelectedValuePath="ID" DisplayMemberPath="Description" ItemsSource="{Binding RelativeSource={RelativeSource Mode=FindAncestor,AncestorType={x:Type UserControl}},Path=DataContext.Currencies}"  ></ComboBox>
                    </Grid>
                </DataTemplate>
            </DataGridTemplateColumn.CellTemplate>
        </DataGridTemplateColumn>
    </DataGrid.Columns>
</DataGrid> 
```

这是我通过视图模型将上下文菜单绑定到的属性：

```
public ObservableCollection<string> SelectableDescriptions
{
    get
    {
        _selectableDescriptions.Add("One");
        _selectableDescriptions.Add("Two");
        return _selectableDescriptions;
    }
    set
    {
        _selectableDescriptions = value;
    }
} 
```

关于为什么我的列表不会出现在上下文菜单中的任何想法？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T21:30:19.913

正如约翰所说，`ContextMenu`它是它自己的独立窗口，与按钮的可视化树分开，因此它不会自动继承按钮的`DataContext`.

但是， ContextMenu 确实有一个指向它所放置的对象的链接（在您的情况下为按钮）：`PlacementTarget`。通过转到菜单的 PlacementTarget，您可以找到该按钮，当您找到该按钮时，您可以找到它的 DataContext。

*因此，在 xaml 中，您可以通过将其自己的 DataContext 绑定到其自己`PlacementTarget.DataContext`*的手动使 ContextMenu 继承 Button 的 DataContext ，并且所有其他绑定（例如 for `ItemsSource`）都可以像平常一样编写：

```
<Button Grid.Column="1" Content="..."  Click="Button_Click">
    <Button.ContextMenu>
        <ContextMenu DataContext="{Binding RelativeSource={RelativeSource Self}, Path=PlacementTarget.DataContext}" 
                     ItemsSource="{Binding Path=SelectableDescriptions}" >    
            <ContextMenu.ItemTemplate>
                <DataTemplate>
                    <TextBlock Text="{Binding Path=SomePropertyOnItem}" />
                </DataTemplate>
            </ContextMenu.ItemTemplate>                            
        </ContextMenu>
    </Button.ContextMenu>        
</Button> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T16:33:23.487

诸如 ContextMenu 和 Popup 之类的东西存在于主视觉树之外，因此不能使用 RelativeSource 走到父对象。在大多数情况下 ElementName 也会中断。根据具体情况，有各种可用的解决方法。我喜欢使用继承的附加属性来传递额外的数据，因为它不涉及更改您的虚拟机，并且在您设置好后保留在 XAML 中。这是一篇用示例解释该技术的博客文章：http: [//blogs.interknowlogy.com/2011/04/26/binding-to-alternate-datacontexts/](http://blogs.interknowlogy.com/2011/04/26/binding-to-alternate-datacontexts/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-06T21:38:33.460

我最终在后面的代码中为 ContextMenu 设置了 ItemsSource（即使我真的不想使用这种方法:)，它奏效了

这是xml

```
<Button Grid.Column="1" Content="..."  Name="ellipseButton" Click="ellipseButton_Click">
    <Button.ContextMenu>
       <ContextMenu >
          <ContextMenu.ItemTemplate>
              <DataTemplate>
                   <TextBlock Text="{Binding}" />
              </DataTemplate>
          </ContextMenu.ItemTemplate>
        </ContextMenu>
     </Button.ContextMenu>
</Button> 
```

这是后面的代码：

```
private void ellipseButton_Click(object sender, RoutedEventArgs e)
{
    var button = sender as Button;
    button.ContextMenu.ItemsSource = JobPricingViewModel.SelectableDescriptions;
    if (button != null) button.ContextMenu.IsEnabled = true;
    var placementTarget = sender as Button;
    if (placementTarget != null) placementTarget.ContextMenu.PlacementTarget = placementTarget;
    var button1 = sender as Button;
    if (button1 != null)
        button1.ContextMenu.Placement = System.Windows.Controls.Primitives.PlacementMode.Bottom;
    var button2 = sender as Button;
    if (button2 != null) button2.ContextMenu.IsOpen = true;
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T16:30:13.613

我认为你必须对你的上下文菜单做这样的事情，注意我的假设是你设置货币的方式是有效的。

```
<ContextMenu>
    <ContextMenu.ItemTemplate>
        <DataTemplate>
            <TextBlock Text="{Binding}"/>
        </DataTemplate>
    </ContextMenu.ItemTemplate>
</ContextMenu> 
```

# sql - count(*) 在三个表上

> ID：14587294
> 
> 赞同：0
> 
> 时间：2013-01-29T16:17:34.480
> 
> 标签：sql

我有三张桌子

```
State(stateid, statename)
District(dict_id,dict_name,stateid)
city(city_id,dict_id,city_name) 
```

我需要计算该州的州名和城市。是否可以在单个查询中获取 Statename、district_count、city_count？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:19:49.960

这应该这样做：

```
SELECT  S.Statename, 
        COUNT(DISTINCT C.dict_id) district_count,
        COUNT(DISTINCT C.city_id) city_count
FROM City C
INNER JOIN District D
    ON C.dict_id = D.dict_id
INNER JOIN State S
    ON S.stateid = D.stateid
GROUP BY S.Statename 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:19:43.353

你需要使用`GROUP BY`. 尝试这样的事情：

```
SELECT S.StateId, S.StateName, COUNT(DISTINCT D.Dict_Id) as DictCount, COUNT(DISTINCT C.City_Id) as CityCount
FROM State S
  LEFT JOIN District D ON S.StateId = D.StateId
  LEFT JOIN City C ON D.Dict_Id = C.Dict_Id
GROUP BT  S.StateId, S.StateName 
```

祝你好运。

# google-chrome - 使用 Chrome 进行 Sencha 触摸测试

> ID：14587295
> 
> 赞同：1
> 
> 时间：2013-01-29T16:17:36.470
> 
> 标签：google-chrome, testing, mobile, sencha-touch

我们经常在 Chrome 中测试 Sencha Touch 应用程序，虽然行为不是问题，但视觉显示是。

我需要使用 Chrome 开发者工具中的哪些**Overrides 设置**来重现 iOS 或 Android 设备的外观？我的重点是字体和渲染。

**编辑：** 这里有两个例子。第一个来自 iOS，第二个来自 Chrome。当然尺寸不同，但除了尺寸之外，你可以看到 chrome 中的那个渲染得不好。

![在此处输入图像描述](../Images/1957c618f30d59802759cdaf23d25ca2.png) ![在此处输入图像描述](../Images/24ccc0e8c4984723b43d8a91c7d25e44.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T15:17:58.797

事实证明，这个问题与 Crome 或 Sencha Touch 无关。导致所有问题的是 Mac OS 的“LCD 字体平滑”。

转到`System Preferances > General > Use LCD font smoothing when available`并禁用它。重新启动 Chrome，一切都会好很多。

# ruby-on-rails - 在 heroku 上托管 rails 网站

> ID：14587300
> 
> 赞同：0
> 
> 时间：2013-01-29T16:17:55.197
> 
> 标签：ruby-on-rails, heroku

试图将我的 rails 站点部署到 heroku。我已确保提交所有内容，在我推送后进行倾斜等。这一切似乎都有效，但是，当我尝试在 heroku 上打开我的网站时出现应用程序错误，即使它在本地工作。

Heroku 日志：

```
2013-01-29T16:08:11+00:00 heroku[web.1]: State changed from starting to crashed
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/inflector/methods.rb:229:in `constantize'
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/inflector/methods.rb:260:in `safe_constantize'
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/core_ext/string/inflections.rb:66:in `safe_constantize'
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal/params_wrapper.rb:152:in `_default_wrap_model'
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal/params_wrapper.rb:169:in `_set_wrapper_defaults'
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/metal/params_wrapper.rb:133:in `inherited'
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/abstract_controller/railties/routes_helpers.rb:7:in block (2 levels) in with' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/actionpack-3.2.11/lib/action_controller/railties/paths.rb:7:in block (2 levels) in with'
2013-01-29T16:08:10+00:00 app[web.1]: from /app/app/controllers/restaurants_controller.rb:1:in `'

2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in require' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in block in require' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in load_dependency' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in require' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:359:in require_or_load' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/inflector/methods.rb:230:in block in constantize' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:55:in block in run_initializers' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:313:in depend_on' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:225:in require_dependency' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:439:in block (2 levels) in eager_load!' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:438:in each' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:438:in block in eager_load!' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/inflector/methods.rb:229:in each' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:436:in each' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in run_initializers' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application.rb:136:in initialize!' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/railtie/configurable.rb:30:in method_missing' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/config/environment.rb:5:in' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/config.ru:3:in require' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/config.ru:3:inblock in ' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:51:in instance_eval' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:51:in initialize' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/config.ru:in new' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/config.ru:in' 
2013-01-29T16:08:13+00:00 heroku[router]: at=error code=H10 desc="App crashed" method=GET path=/ host=team-van.herokuapp.com fwd=18.189.116.76 dyno= queue= wait= connect= service= status=503 bytes= 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:190:in const_missing' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in run' 
2013-01-29T16:08:10+00:00 app[web.1]: Exiting 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:40:in eval' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/builder.rb:40:in parse_file' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/server.rb:200:in app' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands/server.rb:46:in app' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/server.rb:304:in wrapped_app' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/rack-1.4.4/lib/rack/server.rb:254:in start' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands/server.rb:70:in start' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:55:in block in ' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in tap' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/commands.rb:50:in ' 
2013-01-29T16:08:10+00:00 app[web.1]: from script/rails:6:in require' 
2013-01-29T16:08:10+00:00 app[web.1]: from script/rails:6:in' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/engine.rb:436:in eager_load!' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:54:in each' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:190:in each' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/initializable.rb:30:in instance_exec' 
2013-01-29T16:08:11+00:00 heroku[web.1]: Process exited with status 1 
2013-01-29T16:08:10+00:00 app[web.1]: /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/attribute_assignment.rb:88:in block in assign_attributes': unknown attribute: category (ActiveRecord::UnknownAttributeError) 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/attribute_assignment.rb:78:in each' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/attribute_assignment.rb:78:in assign_attributes' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/base.rb:497:in initialize' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/app/models/restaurant.rb:49:in new' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/app/models/restaurant.rb:49:inblock in ' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/csv.rb:1792:in each' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/csv.rb:1208:inblock in foreach' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/csv.rb:1354:in open' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/ruby-1.9.3/lib/ruby/1.9.1/csv.rb:1207:inforeach' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/app/models/restaurant.rb:48:in <top (required)>' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in require' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in block in require' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:236:in load_dependency' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:251:in require' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:359:in require_or_load' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:502:in load_missing_constant' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activesupport-3.2.11/lib/active_support/dependencies.rb:192:in block in const_missing' 
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/railties-3.2.11/lib/rails/application/finisher.rb:53:in `block in 
```

我的模特/餐厅.rb

```
class Restaurant < ActiveRecord::Base

  attr_accessible :activity, :category, :age, :budget, 
    :description, :info_url, :name, :rating, 
    :size, :tag, :time, :tourist, :location

  scope :lunch, where("category = 'l'")
  scope :dinner, where("category = 'd'")

  scope :boston, where("location = 'b'")
  scope :newyork, where("location = 'nyc'")
  scope :sanfran, where("location = 'sf'")

  scope :b1, order("budget asc")
  scope :b2, where("budget <=2").order("budget desc")
  scope :b3, order("budget desc")

  scope :g1, order("size asc")
  scope :g2, where("size <=2").order("size desc")
  scope :g3, order("size desc")

  scope :a1, order("age asc")
  scope :a2, where("age <=2").order("age desc")
  scope :a3, order("age desc")

  scope :l1, order("activity asc")
  scope :l2, where("activity <=2").order("activity desc")
  scope :l3, order("activity desc")

  scope :t1, order("tourist asc")
  scope :t2, where("tourist <=2").order("tourist desc")
  scope :t3, order("tourist desc")

  scope :rate, order("rating desc")

  def self.lsearching(b,g,a,l,t,loc)
    @lrestaurants = eval ("Restaurant." + "lunch." + b + "." + g + "." + a + "." + l + "." + t + "." + loc)
    #@restaurants = Restaurant.rate
  end
  def self.dsearching(b,g,a,l,t, loc)
    @drestaurants = eval ("Restaurant." + "dinner." + b + "." + g + "." + a + "." + l + "." + t + "." + loc)

  end

end

require 'csv'
CSV.foreach('app/assets/nycrestaurant.csv',  "r:ISO-8859-1") do |row|
  record = Restaurant.new(
    :name   => row[0], 
    :category => row[1],
    :description => row[11],
    :info_url => row[3],
    :time => row[4],
    :size => row[5],
    :activity => row[6],
    :budget => row[7],
    :age => row[8],
    :tourist => row[9],
    :rating => row[10],
    :tag => row[11],
    :location => row[12]
  )
  record.save!
end

CSV.foreach('app/assets/bostonrest.csv',  "r:ISO-8859-1") do |row|
  record = Restaurant.new(
    :name   => row[0], 
    :category => row[11],
    :description => row[1],
    :info_url => row[3],
    :time => row[4],
    :size => row[5],
    :activity => row[6],
    :budget => row[7],
    :age => row[8],
    :tourist => row[9],
    :rating => row[10],
    :tag => row[2],
    :location => row[12]
  )
  record.save!
end 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:24:05.980

您需要在 heroku 上运行迁移，在控制台运行：

```
heroku run rake db:migrate 
```

你需要学习阅读日志！看这里：

```
2013-01-29T16:08:10+00:00 app[web.1]:  /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/attribute_assignment.rb:88:in block in assign_attributes': unknown attribute: category (ActiveRecord::UnknownAttributeError)
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/attribute_assignment.rb:78:in each'
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/attribute_assignment.rb:78:in assign_attributes'
2013-01-29T16:08:10+00:00 app[web.1]: from /app/vendor/bundle/ruby/1.9.1/gems/activerecord-3.2.11/lib/active_record/base.rb:497:in initialize'
2013-01-29T16:08:10+00:00 app[web.1]: from /app/app/models/restaurant.rb:49:in new'
2013-01-29T16:08:10+00:00 app[web.1]: from /app/app/models/restaurant.rb:49:inblock 
```

该消息`unknown attribute: category`意味着数据库没有列类别。

最后，在此处发布之前格式化日志消息，我们很感激。

# ruby-on-rails - 创建自定义验证器

> ID：14587305
> 
> 赞同：2
> 
> 时间：2013-01-29T16:18:08.643
> 
> 标签：ruby-on-rails, ruby

我有验证器，它验证表单上的一个字段。带类的字段返回值`ActiveSupport::TimeWithZone`

```
validate :begins_at_not_in_past

def begins_at_not_in_past
    return unless self.state == 'Scheduled'
    if self.begins_at != nil && self.begins_at < (Time.now - 1.hour)
       errors.add(:begins_at, 'Action cannot begin in past')
      false
    end

end 
```

如果验证失败，它会显示我的错误，但是即使表单中的数据无效，它也会在数据库中创建新记录。我在哪里犯错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:28:19.360

你应该有以下行。否则它不会向对象添加错误。所以添加以下带有errors.add的行

```
validate :begins_at_not_in_past

def begins_at_not_in_past
  return unless self.state == 'Scheduled'
  if self.begins_at != nil && self.begins_at < (Time.now - 1.hour)
    errors.add(:begins_at, 'Action cannot begin in past')
    errors[:base] << 'Correct errors'  # Rails 2.3.X errors.add_to_base('msg')
    false
  end
end 
```

在控制器中：#Validation 将仅在您调用有效时运行？方法

```
if obj.valid?
  #do something
else
  flash[:error] = obj.errors.full_messages.join('<br/>')
end 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:35:39.593

在您的模型中，尝试

```
validates :field_name, :begins_at_not_in_past => true 
```

如果你没有从你的验证器中指定一个可接受的返回值，模型可能不会认为它是一个失败的验证。

# java - 使用字符串作为输入的DES算法java代码

> ID：14587311
> 
> 赞同：0
> 
> 时间：2013-01-29T16:18:42.173
> 
> 标签：java, algorithm, des

我正在寻找我想要一个字符串作为输入的 DES 算法的 Java 实现。谁能指导我在哪里找到它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:23:10.947

正如@m0skit0 指出的那样，您需要`inputString.getBytes()`，这里也是一个示例代码链接[http://java-espresso.blogspot.com/2011/09/des-algorithm-code-in-java.html](http://java-espresso.blogspot.com/2011/09/des-algorithm-code-in-java.html)

# python - python - 如何将地图列表转换为python中的集合地图？

> ID：14587317
> 
> 赞同：2
> 
> 时间：2013-01-29T16:18:53.740
> 
> 标签：python, list, map

在 Python 中，我有以下地图列表：

```
[{'CN': 'SC',
  'LB': 'g1k',
  'SM': 'HG1'},
 {'CN': 'SC',
  'LB': 'g2k',
  'SM': 'HG2'},
 {'CN': 'SC',
  'LB': 'g3k',
  'SM': 'HG3'}] 
```

我想获得这样的地图：

```
{ 'CN' : 'SC',
  'LB' : ['g1k', 'g2k', 'g3k'],
  'SM' : ['HG1', 'HG2', 'HG3']
} 
```

最pythonic的方法是什么？谢谢！

ps 此外，我打算将新的数据结构转换为 JSON，以便在网页中显示。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T16:27:24.953

```
>>> list_of_map = [{'CN': 'SC',
...   'LB': 'g1k',
...   'SM': 'HG1'},
...  {'CN': 'SC',
...   'LB': 'g2k',
...   'SM': 'HG2'},
...  {'CN': 'SC',
...   'LB': 'g3k',
...   'SM': 'HG3'}]
>>> from collections import defaultdict
>>> d = defaultdict(set)
>>> for map in list_of_map:
...     for k,v in map.items():
...         d[k].add(v)
... 
>>> d
defaultdict(<type 'set'>, {'LB': set(['g3k', 'g1k', 'g2k']), 'CN': set(['SC']), 'SM': set(['HG2', 'HG3', 'HG1'])}) 
```

这不是您想要的数据结构，但它非常接近，如果您真的需要，很容易改变。（虽然我没有在这里展示它，因为我认为`set`s 是去这里而不是`list`s 的方式）。

要返回列表：

```
>>> back_to_lists = {k:list(v) for k,v in d.items()}
>>> back_to_lists
{'LB': ['g3k', 'g1k', 'g2k'], 'CN': ['SC'], 'SM': ['HG2', 'HG3', 'HG1']} 
```

甚至：

```
>>> back_to_lists = {k:sorted(v) for k,v in d.items()}
>>> back_to_lists
{'LB': ['g1k', 'g2k', 'g3k'], 'CN': ['SC'], 'SM': ['HG1', 'HG2', 'HG3']} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:28:42.183

```
In [21]: nk=[{'CN': 'SC', 'LB': 'g1k', 'SM': 'HG1'},
    ...:  {'CN': 'SC', 'LB': 'g2k', 'SM': 'HG2'},
    ...:  {'CN': 'SC', 'LB': 'g3k', 'SM': 'HG3'}]

In [22]: result={}

In [23]: for x in nk:
    ...:     for k in x:
    ...:         result.setdefault(k,set()).add(x[k])
    ...:         

In [24]: result
Out[24]: 
{'CN': set(['SC']),
 'LB': set(['g3k', 'g1k', 'g2k']),
 'SM': set(['HG2', 'HG3', 'HG1'])} 
```

或者

```
In [60]: nk=[{'CN': 'SC', 'LB': 'g1k', 'SM': 'HG1'},
    ...:  {'CN': 'SC', 'LB': 'g2k', 'SM': 'HG2'},
    ...:  {'CN': 'SC', 'LB': 'g3k', 'SM': 'HG3'}]

In [61]: {z[0][0]:set(z[1]) for z in [zip(*x) for x in zip(*[y.items() for y in [x for x in nk]])]}
Out[61]: 
{'CN': set(['SC']),
 'LB': set(['g3k', 'g1k', 'g2k']),
 'SM': set(['HG2', 'HG3', 'HG1'])} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T16:29:11.357

如果新 dict 值的顺序无关紧要，您可以执行以下操作：

```
In [1]: maps = [{'CN': 'SC',
   ...:   'LB': 'g1k',
   ...:   'SM': 'HG1'},
   ...:  {'CN': 'SC',
   ...:   'LB': 'g2k',
   ...:   'SM': 'HG2'},
   ...:  {'CN': 'SC',
   ...:   'LB': 'g3k',
   ...:  

In [2]: from itertools import chain

In [3]: {k: set(m[k] for m in maps if k in m) for k in chain.from_iterable(maps)}
Out[3]: 
{'CN': set(['SC']),
 'LB': set(['g2k', 'g1k', 'g3k']),
 'SM': set(['HG3', 'HG2', 'HG1'])} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T16:42:49.983

我会选择未包装的，不聪明的，循环的选项..

其中 d 是您的字典列表，而 md 是一个空字典

```
for d in dicts:
 for k in d:
  if k in md:
   md[k].add(d[k])
  else:
   md[k]=set([d[k]]) 
```

# php - 带有可变字符串的 Wordpress 自定义简码函数（新手）

> ID：14587319
> 
> 赞同：0
> 
> 时间：2013-01-29T16:19:03.747
> 
> 标签：php, wordpress, shortcode

我正在尝试创建一个基于 Wordpress 简码的简单函数，该函数将采用定义的数字并将其转换为最终用户的本地货币。我卡住的地方是如何在帖子中搜索短代码，因为定义的数字可能会发生变化。如果有人可以请让我知道如何最好地将数字提取为变量，然后我可以通过汇率函数运行它（效果很好，我已经使用自定义字段存储数据对其进行了测试）。

```
{customShortcode - priceAdditions [400]} 
```

我已经尝试过`explode()`它`[]`，这似乎显示出希望，但我无法弄清楚如何提取它，而且有可能不止一个实例与不同的数字一起使用。我认为`regex`或者`preg_match`可能是要走的路，但我还不太明白。

如果您需要更多信息，请告诉我。提前致谢。

担

编辑-有效的短代码功能-

```
$thePostContent =   get_the_content($post->ID); 
$thePostContent =   str_replace('{customShortcode - price}',thePrice(),$thePostContent); 
```

功能 -

```
function thePrice(){
$pageURL = 'http';
if ($_SERVER["HTTPS"] == "on") {$pageURL .= "s";}
$pageURL .= "://";
if ($_SERVER["SERVER_PORT"] != "80") {
 $pageURL .= $_SERVER["SERVER_NAME"].":".$_SERVER["SERVER_PORT"].$_SERVER["REQUEST_URI"];
} else {
  $pageURL .= $_SERVER["SERVER_NAME"].$_SERVER["REQUEST_URI"];
}
$Exploded_URL = explode("/",$pageURL);
if      ($Exploded_URL[4] == ''){$thePostIsIn   =   217;}
elseif  ($Exploded_URL[4] == 'productA'){$thePostIsIn   =   347;}
elseif  ($Exploded_URL[4] == 'productB'){$thePostIsIn   =   345;}
else    {$thePostIsIn   =   217;}
if      (empty($_COOKIE['userLocate']) || $_COOKIE['userLocate'] == 'US' || ($_COOKIE['userLocate'] != 'EU' && $_COOKIE['userLocate'] != 'AU' && $_COOKIE['userLocate'] != 'GB')){
    $currencyCode   =   'USD';
    $currencyPrefix =   '$';
}
elseif  ($_COOKIE['userLocate'] == 'EU'){
    $currencyCode   =   'EUR';
    $currencyPrefix =   '&euro;';
}
elseif  ($_COOKIE['userLocate'] == 'AU'){
    $currencyCode   =   'AUD';
    $currencyPrefix =   'A$';
}
elseif  ($_COOKIE['userLocate'] == 'GB'){
    $currencyCode   =   'GBP';
    $currencyPrefix =   '&pound;';
}
else {
    $currencyCode   =   'USD';
    $currencyPrefix =   '$';
}

$args=array(
'post_type' =>'page',
'post__in' => array($thePostIsIn)
);
$recent_posts = get_posts($args);
foreach( $recent_posts as $recent ){    

    $mypages        =   get_post( $recent->ID );
    $theBaseRate    =   get_post_meta($recent->ID, "Payment Cost",1);

    if(get_post_meta($recent->ID, "Payment Period",1)){
        $payPeriod  =   get_post_meta($recent->ID, "Payment Period",1);
    }
    else{
        $payPeriod  =   "per month";
    }

    $rssFeedUrl     =   "http://themoneyconverter.com/rss-feed/GBP/rss.xml";
    $rss            =   simplexml_load_file($rssFeedUrl);
    foreach($rss->channel->item as $feedItem){
        $currency   =   explode('/',$feedItem->title);
        if(strpos($currency[0], $currencyCode )!== false){
            $content    =   $feedItem->description;
            $content    =   explode('= ',$content);
            $content    =   substr($content[1],0,7);
            $theCost    =   $theBaseRate * $content;
            $theCost    =   number_format($theCost, 2, '.', '');
        }
    }
}
echo '<p class="rentCost"><span class="rentalCost">'.$currencyPrefix.$theCost.' '.$payPeriod.'</span></p><div class="clear"></div>';
} 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:45:51.547

You should use the built-in [shortcode api](http://codex.wordpress.org/Shortcode_API) from wordpress.

In your `functions.php`

```
function thePrice( $atts ) {

   extract( shortcode_atts( array(
        'price' => 0 //default price
    ), $atts ) );

    //$price is now available and will hold the user entered price 
    //in the example below this would be 400

    /*
     Your conversion code here
     */

}

add_shortcode( 'convert_price', 'thePrice' ); 
```

How to use the shortcode in the editor

`[convert_price price="400"]`

Now you can simply use `the_content()` in your template loop and the shortcodes will be properly rendered.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:45:32.623

I know where you're trying to go with the custom shortcode, but why don't you stick with Wordpress's build-in machinery for shortcodes and let it do the heavy lifting? [The official docs say](http://codex.wordpress.org/Shortcode_API)

> "The API handles all the tricky parsing, eliminating the need for writing a custom regular expression for each shortcode. Helper functions are included for setting and fetching default attributes."

Your code could become:

`[priceAdditions price="400"]`

and with a short little addition to `functions.php`, you could get your data.

# javascript - 使用 HTML5 放大到国家的世界地图

> ID：14587321
> 
> 赞同：3
> 
> 时间：2013-01-29T16:19:10.277
> 
> 标签：javascript, canvas, map, svg, geocoding

我一直在研究 RaphaelJS、D3 和其他“映射”工具（jvectormap 等），但我找不到任何可以通过鼠标点击放大到一个国家的世界地图示例。我想首先看到一张世界地图，然后，当你点击一个国家时，它会放大并只显示那个国家（世界没有显示，你可以随时缩小到世界）。这是一个不好的例子：

[http://htmlpreview.github.com/?https://raw.github.com/escobar5/raphael-pan-zoom/master/examples/complete-map/index.html](http://htmlpreview.github.com/?https://raw.github.com/escobar5/raphael-pan-zoom/master/examples/complete-map/index.html)

你能给我举个例子吗，最好是在 D3、protovis、Raphael 或其他流行的 SVG/CANVAS 类型库中。我将在这些地图中添加大量数据点（基于地理坐标）。

与我需要的最接近的示例是[http://theartofasking.com](http://theartofasking.com)上的 d3 地图，但我正在寻找更多示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-22T14:13:45.653

查看[D3.js 世界地图下的两个示例，它们在单击时放大到每个国家/地区](http://techslides.com/d3-world-maps-tooltips-zooming-and-queue/)。你应该能够扩展它并构建你需要的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-14T15:16:20.110

您可以看到另一个带有放大/缩小功能的 JavaScript 地图示例

[http://www.fla-shop.com/products/html5/world/zoom-world-map/](http://www.fla-shop.com/products/html5/world/zoom-world-map/)

它使用 RaphaelJS。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:09:59.610

不久前，我仅使用 SVG 和 jQuery 构建了类似的东西。我正在为整个地图的宽度和高度设置动画并移动它的位置以伪造缩放效果。它可以完成这项工作，适用于所有浏览器，并且不依赖于学习新的库。

[https://igr-inc.com/iGR_Global_Statistics_Services/](https://igr-inc.com/iGR_Global_Statistics_Services/)

此示例放大了各大洲，但您可以深入了解尽可能多的细节。看看源代码，希望它是不言自明的，但如果你有疑问，请大声喊叫。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2017-07-10T19:12:08.710

这张地图可以用 d3 做你想做的事，放大每个国家并将每个国家分成一级行政区（县/州等）。对于拥有庞大州的美国来说，它更进一步，将每个州划分为县。

[https://github.com/crittercism/critter-world-map](https://github.com/crittercism/critter-world-map)

# python - 连接到mysql的速度极慢

> ID：14587323
> 
> 赞同：2
> 
> 时间：2013-01-29T16:19:18.300
> 
> 标签：python, mysql, python-3.x, sqlalchemy, mysql-connector

我正在使用一个非常简单的连接到本地主机数据库：

```
engine = sqlalchemy.create_engine('mysql+mysqlconnector://usr:pwd@localhost/db')
engine = engine.connect()
data = engine.execute('select * from table') 
```

'table' 有 500 行。然后我在“数据”上运行 cProfiler，在那里我找到了这个：

```
ncalls  tottime  percall  cumtime  percall filename:lineno(function)
54086  127.261    0.002  127.261    0.002 {method 'recv' of '_socket.socket' objects} 
```

这里[http://bugs.python.org/issue3766](http://bugs.python.org/issue3766)似乎将 TCP_NODELAY 设置为 1 可以解决。我的问题是，我在哪里设置这个？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:49:29.243

似乎一切正常。错误报告描述了需要 0.02 秒的 recv 调用，您的调用是该调用的 1/10。这在我看来是完全可以的。需要这么长时间的原因是您拨打了 54086 次电话（每条线路 108 次电话）。我建议您重写查询，以减少调用次数。询问您想要的数据库。

# gwt - 在 GWT 中使用 google 的可视化 api

> ID：14587325
> 
> 赞同：1
> 
> 时间：2013-01-29T16:19:34.827
> 
> 标签：gwt, google-visualization

我想在我的 GWT 项目中使用 Google 的 Visualization javascript API。我正在使用 JSNI 方法，但它不起作用：

```
private native void drawChart() /*-{

  drawChart = function() {

    // Create the data table.
    var data = new $wnd.google.visualization.DataTable();
    $wnd.data.addColumn('string', 'Topping');
    $wnd.data.addColumn('number', 'Slices');
    $wnd.data.addRows([
      ['Mushrooms', 3],
      ['Onions', 1],
      ['Olives', 1],
      ['Zucchini', 1],
      ['Pepperoni', 2]
    ]);

    // Set chart options
    var options = {'title':'How Much Pizza I Ate Last Night',
                   'width':400,
                   'height':300};

    // Instantiate and draw our chart, passing in some options.
    var chart = new $wnd.google.visualization.PieChart($doc.getElementById('chart_div'));
    $wnd.chart.draw(data, options);
  }
  $wnd.google.load('visualization', '1.0', {'packages':['corechart']});
  $wnd.google.setOnLoadCallback(drawChart);
}-*/; 
```

我知道这个 API 有一个 GWT 包装器，但是 javascript Visualization API 包含更多图表类型和更多功能；例如我想`ChartEditor`在我的 GWT 项目中使用：就像[这里](http://code.google.com/apis/ajax/playground/?type=visualization#chart_editor)

有没有人有一个例子或想法让它发挥作用？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:32:39.237

确保你有

`<script type="text/javascript" src="https://www.google.com/jsapi"></script>`

在您的 HTML 和

`google.load('visualization', '1.0', {'packages':['corechart']});`

在某个地方实际加载 api。

也不要在加载之前尝试使用 API。使用此回调：

```
// Set a callback to run when the Google Visualization API is loaded.
google.setOnLoadCallback(drawChart); 
```

# html - 所有的 XTML 1.0 Strict 都作为 HTML5 有效吗？

> ID：14587329
> 
> 赞同：2
> 
> 时间：2013-01-29T16:19:45.957
> 
> 标签：html, validation, xhtml, web-standards

我有一个 XHTML 1.0 Strict 站点。我想换成 HTML5。根据我的阅读，XHTML 几乎可以被认为是 HTML5 的一个子集，即更新 DOCTYPE 和编码标签，它会像 HTML5 一样好。

那正确吗？有什么我应该注意的大问题吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:26:33.503

不，HTML5 不一定是有效的 XML，因此 HTML5 和 XHTML 是不同的。浏览器通常可以容忍偏离 DOCTYPE 中声明的标准的标记。如果您的 XHTML 不使用“X”的任何特性（即可扩展），那么转换可能非常简单。如果您使用了可扩展功能，那么这些部分很可能会被浏览器忽略。另一个标准 XHTML5 正在酝酿之中！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-11-07T02:58:58.207

因为在开发 HTML 5 时考虑了向后兼容性，所以允许使用 HTML 和 XHTML 语法。将 DOCTYPE 更改为`<!DOCTYPE html>`应该就足够了。
如果您的网站作为 XHTML 1.0 Strict 有效并且使用`application/xhtml+xml`媒体类型提供服务，则只需删除 DOCTYPE 即可将其转换为 XHTML 5。

# file-upload - 如何从 dart 中的输入类型文件上传文件？

> ID：14587332
> 
> 赞同：2
> 
> 时间：2013-01-29T16:19:52.110
> 
> 标签：file-upload, dart

经过大量搜索后，我无法在通过 dart 上传时反序列化简单的文本文件。

我知道这可能会引发很多反对票，但是如何在 dart 中上传文件的简单演示会有所帮助吗？

无论是在控制台还是在 dart 的网络应用程序中。我只想上传一个包含一些基本单词的文本文件。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T16:49:24.043

以下简单示例适用于我：

在编辑器中使用以下文件结构：

```
fileuploadtest/
  fileupload.dart
  index.html 
```

**index.html**（注意：这里没有 Dart！）

```
<!DOCTYPE html>

<html>
  <head>
    <title>index</title>
  </head>

  <body>   
    <form enctype="multipart/form-data" action="foo" method="POST">
      <input type="hidden" name="MAX_FILE_SIZE" value="100000" />
        Choose a file to upload: <input name="uploadedfile" type="file" /><br />
      <input type="submit" value="Upload File" />
    </form>   
  </body>
</html> 
```

**文件上传.dart**

这将创建一个静态文件处理程序（为简单起见）始终`index.html`响应任何`GET`请求，以及一个文件上传处理程序响应任何 POST 请求并打印出上传文件的内容（实际上，整个 POST 数据 - 你'必须提取相关位）。

```
import 'dart:io';

void main() {
  var httpServer = new HttpServer();

  // attach handlers:

  var static = new StaticFileHandler();
  httpServer.addRequestHandler(static.matcher, static.handler);

  var fileUploadHandler = new FileUploadHandler();
  httpServer.addRequestHandler(fileUploadHandler.matcher, 
      fileUploadHandler.handler);

  // start listening
  httpServer.listen("127.0.0.1", 8081);
}

class FileUploadHandler {
  bool matcher(req) => req.method == "POST"; // return true if method is POST

  void handler(req,res) {
    req.inputStream.onData = () {
      var data = req.inputStream.read();
      var content = new String.fromCharCodes(data);
      print(content); // print the file content.
    };
  }
}

class StaticFileHandler {
  //  return true for all GET requests.
  bool matcher(req) {
    print("Path: ${req.path}");
    return req.method=="GET"; 
  }

  void handler(req,res) {
    var file = new File("index.html"); // only serve index.html in the same folder
    file.openInputStream().pipe(res.outputStream);
  }
} 
```

启动`fileUpload.dart`并使用浏览器导航到`http://localhost:8081/index.html`

对于名为 的文件`foo.txt`，包含以下内容：

```
foo
bar 
```

这是我得到的整个日志输出（从 Dart 编辑器的控制台发布）

```
------WebKitFormBoundaryw7XBqLKuA7nP1sKc

Content-Disposition: form-data; name="MAX_FILE_SIZE"

100000

------WebKitFormBoundaryw7XBqLKuA7nP1sKc

Content-Disposition: form-data; name="uploadedfile"; filename="foo.txt"

Content-Type: text/plain

foo
bar

------WebKitFormBoundaryw7XBqLKuA7nP1sKc-- 
```

# r - 如何使用 stat="identity" ggplot 躲避条形图？

> ID：14587335
> 
> 赞同：7
> 
> 时间：2013-01-29T16:20:05.417
> 
> 标签：r, ggplot2

我有一个包含两列 A 和 B 的数据框。我想生成一个条形图，其中 A 和 B 中的值并排绘制（躲避）。我四处搜索，从包 ggplot2 中找到了 ggplot。默认是使用频率生成条形图，但有一个选项`stat="identity"`允许选择一个变量来明确设置条形高度。我可以像这样绘制一列：

```
d <- data.frame(A=c(1:10), B=c(11:20))
ggplot(data=d, aes(x=1:length(A), y=A))+geom_bar(stat="identity", position="dodge") 
```

如何并排绘制两列？我可以以不同的方式构建我的数据框：将向量 A 和 B 中的值附加到一列中并创建一个指示变量`ind`，然后使用它来定义组`aes(group=ind)`。这可以在`d`不修改其结构的情况下按原样使用数据框完成吗？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T16:24:12.633

您可以`melt`从`reshape2`包中使用来创建您正在寻找的情节。

```
library(reshape2)
d$ind <- seq_along(d$A)

d.m <- melt(d, id.var='ind')

ggplot(d.m, aes(x=ind, y=value, fill=variable)) + 
  geom_bar(stat='identity', position='dodge') 
```

通常，`ggplot`在单个 data.frame 中提供所有数据时效果最佳。每种几何类型至少有一个 data.frame。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T16:45:30.660

The only *good* way to do this is to rearrange your data to suit the needs of the 'ggplot' function. However, if you want to do it all in line, you can. You'll just have to reshape the data by hand, like so:

```
ggplot(data=data.frame(value=c(d$A, d$B), variable=c(rep("A",10),rep("B",10))), aes(x=c(1:10,1:10), y=value, fill=variable))+geom_bar(stat="identity", position="dodge") 
```

Here, I have created a new data frame out of the old one and assigned the corresponding variable names (this is what the 'reshape2' package does with the 'melt' function). Then, I have manually assigned the x-values to be 1:10 for "A" and 1:10 for "B" to make the bars appear next to each other, rather than all in order from 1:20\. I added a 'fill' argument to change the colors of the bars to represent "A" or "B".

# dojo - 更改主题轮廓颜色

> ID：14587336
> 
> 赞同：0
> 
> 时间：2013-01-29T16:20:05.853
> 
> 标签：dojo, dojox.charting

我使用 Claro 主题创建了一个饼图，并且想将轮廓颜色更改为透明或将其关闭。Claro 的默认背景颜色是浅灰色，我想将其更改为透明。在使用以下代码设置图表主题之前，我能够将背景颜色更改为透明：

```
theme.chart.fill={color: "transparent"};
theme.plotarea.fill={color: "transparent"};
chart.setTheme(theme); 
```

我仍然在图表周围留下浅灰色的边框。关于如何将其更改为透明或将其关闭的任何想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:21:58.623

您必须像这样更改主题的“笔触”颜色：

```
theme.chart.stroke = {color:"transparent"} 
```

在 jsfiddle 中查看[这个演示](http://jsfiddle.net/8hnBp/)

# c - 远程执行shell命令

> ID：14587340
> 
> 赞同：0
> 
> 时间：2013-01-29T16:20:24.203
> 
> 标签：c, linux, sockets

我真的把我的头发拉出来了。我正在尝试为我的 IRC 机器人创建远程 shell 执行，但是，当我使用诸如 "ls" 或 "cd" 之类的命令时，我得到了 ": not found" 的返回，但是，其他命令，例如 mkdir 或回声似乎工作正常。当我对命令进行硬编码时也是如此，我得到的输出与它应该的完全一样。

谁能明白为什么？这是我的代码：

```
 FILE *fp;
            int status;
            char path[1035];
            /* Open the command for reading. */
            fp = popen(ptr1, "r"); // hard code command and it works ????fp = popen("/bin/ls /etc/", "r");
            printf("%s", ptr1);//check received command (debugging)
            if (fp == NULL) {
                printf("Failed to run command\n" ); 
```

出于道德原因删除了一些代码。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:11:27.453

我会从您的错误消息中猜测您传递给 popen 的字符串中有一个虚假的回车符。因此，您实际上是在调用，例如`popen("ls\r", "r");`失败并显示错误消息`ls\r: not found`。当您打印该错误消息时，回车会导致它跳回到行首，看起来像`: not found`

回车是此类奇怪错误的臭名昭著的来源，因为它们不是 shell 的空白，但是当您将它们打印出来时，您实际上看不到它们。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:05:16.643

在您上面的代码中 ptr1 未初始化。假设 ptr1 是您的命令并且在其他地方填充，您是否检查过字符串是否在正确的位置以零结尾？即使使用 printf，一些不可打印的字符也可能位于字符串结尾和零终止之间，因此您有“ls___”。只需对 ptr1 长度进行快速健全性检查即可：

`printf("%s : %lu", ptr1, strlen(ptr1));`

# node.js - 使用节点 js 在本地主机上处理 snmp 陷阱和通知

> ID：14587341
> 
> 赞同：3
> 
> 时间：2013-01-29T16:20:25.840
> 
> 标签：node.js, snmp, snmp-trap

我正在尝试在标准 UDP 162 端口上侦听 snmp 陷阱，然后解析并输出它们。

我查看了节点的 snmpjs 和 snmp-native 插件，它们似乎都主要用于代理的生成。我想做的是监听和解码转发到我的本地主机的陷阱和通知（甚至可能是确认通知）。我知道我可以在 dgram 和 ASN.1BER 上花费相当长的时间，但我更愿意使用已经编写好的 snmp 代码。

```
var dgram = require('dgram');
//var snmp = require('snmpjs');
var snmp = require('snmp-native');

var server = dgram.createSocket("udp4");

server.on("listening", function() {
    var addr = server.address();
    console.log("Server listening "+ addr.address + ":" + addr.port);
});

server.on("message", function (msg, rinfo) {
    console.log("From " + rinfo.address + ":" + rinfo.port);
    console.log("server got: " + msg);
    //console.log("Parse: " + snmp.parseMessage({raw:msg}));
    console.log("Parse: " + snmp.parse(msg));
});

server.bind(162); 
```

两个snmp解析函数都会报错，首先是parseMessage没有定义，snmpjs文档中没有明确如何创建正确的对象[http://wesolows.github.com/node-snmpjs/protocol.html#parseMessage(arg)](http://wesolows.github.com/node-snmpjs/protocol.html#parseMessage(arg)) . 而且我不能使用 snmpjs 代理，因为没有消息事件。

来自 snmp-native 的第二次解析，我得到一个错误，缓冲区不是 int....

```
Error: Buffer 06082b06010603010105 does not appear to be an Integer
at Object.parseInteger (/usr/share/node/node_modules/snmp-native/lib/asn1ber.js:318:15) 
```

任何指针都会很棒，谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-31T19:38:44.230

node-snmpjs 0.0.4 现在包含一个简单的陷阱侦听器，它在陷阱上发出事件。可以很容易地添加 Express 风格的界面来匹配代理的工作。有关示例使用者，请参阅添加此功能的[GitHub 提交。](https://github.com/wesolows/node-snmpjs/commit/7fbc2f876ba29c58e42e52fd8d765f2997cfdd08)需要做更多的工作才能使其适合生产使用。

# dojo - Dojo 跨域 - 访问被拒绝

> ID：14587347
> 
> 赞同：1
> 
> 时间：2013-01-29T16:20:45.243
> 
> 标签：dojo, cross-domain

尝试使用 dojotoolkit 跨域时遇到问题。

我在 apache 中设置了标题，`Access-Control-Allow-Origin`它`Access-Control-Allow-Headers`允许它在除 IE8 和 IE9 之外的所有浏览器中正常工作。我在哪里收到“访问被拒绝”消息。

如

```
Line: 711
Character: 3
Code: 0
Error Message: Access is denied.

URL: http://remote.site.net/includes/dojotoolkit/dojo/_base/xhr.js 
```

任何人都可以对此有所了解吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T14:18:50.673

Internet Explorer 8 和 9[不支持 CORS via`XMLHttpRequest`](http://caniuse.com/#search=cors)，而是通过专有[`XDomainRequest`](http://msdn.microsoft.com/en-us/library/cc288060%28VS.85%29.aspx)的。不幸的是，Dōjō 没有考虑到这一点，并尝试通过 加载跨域资源`XHR`，结果以*Access is denied*错误结束。

幸运的是，Dōjō 提供了强大的[`dojo/request/registry`](http://livedocs.dojotoolkit.org/dojo/request/registry)，允许您修改此行为：

定义用于获取资源的XDomainRequest*提供者：*`XDomainRequest`

```
function xdr(url, options) {
    var def = new Deferred();
    var xdr = new XDomainRequest();
    if (xdr) {
        xdr.onload = function(e) {
            def.resolve(xdr.responseText);
        }
        xdr.open(options.method, url);
        xdr.send();
        return def;
    }
    def.reject(new Error('XDomainRequest not supported.'));
    return def;
} 
```

然后定义`corsProvider`调用`XHR`或`XDR`取决于浏览器：

```
function corsProvider(url, options) {
    if(window.XDomainRequest) {
        return xdr(url, options);
    }
    return xhr(url, options);
} 
```

注册`corsProvider`处理跨域请求：

```
var url = "http://cors-test.appspot.com/test";
var handle = request.register(url, corsProvider); 
```

现在请求跨域资源也应该在 IE 中工作：

```
request.get(url).then(function(response) {
    console.log(response);
}); 
```

看看它的实际效果：http: [//jsfiddle.net/phusick/LZZhs/](http://jsfiddle.net/phusick/LZZhs/)

这适用于道场 1.8+，因为`dojo/request`. 如果你需要同样的`dojo/_base/xhr`东西`dojox.io.xhrPlugins`，但我没有经验。`dojo/aspect`无论如何，为旧的 Dojō 版本实现上述 via 应该非常简单。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T14:14:49.657

IE8 和 IE9 通常不能很好地使用这些东西，除非您开始使用它们单独的 XDomainRequest 对象。你用什么来发起请求？

另请参阅这些涉及大部分内容的其他 SO 问题：

*   [IE8/9 中带有 jQ​​uery 和 XDomainRequest 的 CORS](https://stackoverflow.com/questions/11487216/cors-with-jquery-and-xdomainrequest-in-ie8-9)
*   [IE8/IE9 中的跨域标头](https://stackoverflow.com/questions/9652364/cross-origin-header-in-ie8-ie9)

# .net - 如何从 .NET 应用程序收集探查器数据

> ID：14587351
> 
> 赞同：2
> 
> 时间：2013-01-29T16:20:56.350
> 
> 标签：.net, profiling

我有一个 Windows 服务，它定期将 .NET 控制台应用程序作为外部进程启动。

我想在服务运行时从那些外部启动的进程中收集分析数据 (CPU) 并稍后对其进行分析 - 这可能吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:38:37.153

对的，这是可能的。一种选择是使用[PerfView](http://www.microsoft.com/en-us/download/details.aspx?id=28567)来收集系统跟踪。我假设您控制启动控制台应用程序，因此您可以修改启动以在启动时捕获跟踪。

您可以配置 PerfView 以捕获各种详细信息，以帮助您排除正在发生的事情。如果您尚未将 ETW 添加到您的应用程序中，我建议您[也查看一下](http://blogs.msdn.com/b/vancem/archive/2012/07/09/logging-your-own-etw-events-in-c-system-diagnostics-tracing-eventsource.aspx)，因为它将帮助您放大您的应用程序正在做什么以及需要多长时间。

# extjs - Sencha Touch 2：如何在类定义中引用 self

> ID：14587353
> 
> 赞同：2
> 
> 时间：2013-01-29T16:20:58.687
> 
> 标签：extjs, extjs4, sencha-touch, sencha-touch-2

我正在定义一个类，但在下面的代码中尝试引用自身时遇到了麻烦。您可以看到我正在尝试起诉 push 和 pop 操作，但是 this.self.pop() 例如不是引用该类的正确方法。在类定义中引用它的正确方法是什么？

```
//create the navigation view and add it into the Ext.Viewport
Ext.define('myApp.view.Settings', {
    extend: 'Ext.navigation.View',
    id:'view',
    xtype: 'navigationview',
    config: {
        title: 'Settings',
        iconCls: 'settings',
        //we only give it one item by default, which will be the only item in the 'stack' when it loads
        items: [
            {
                //items can have titles
                title: 'Navigation View',
                padding: 10,

                //inside this first item we are going to add a button
                items: [
                    {
                        xtype: 'button',
                        text: 'Push another view!',
                        handler: function () {
                            //when someone taps this button, it will push another view into stack
                            this.self.push({
                                //this one also has a title
                                title: 'Second View',
                                padding: 10,

                                //once again, this view has one button
                                items: [
                                    {
                                        xtype: 'button',
                                        text: 'Pop this view!',
                                        handler: function () {
                                            //and when you press this button, it will pop the current view (this) out of the stack
                                            this.self.pop();
                                        }
                                    }
                                ]
                            });
                        }
                    }
                ]
            }
        ]
    }
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:39:01.063

在 中使用`this`时`handler`，`this`将指的是按钮，而不是视图。如果要获取`Ext.navigation.View`组件，并使用 push 和 pop 方法，请使用[Ext.getCmp(id)](http://docs.sencha.com/touch/2-0/#!/api/Ext-method-getCmp)：

```
Ext.getCmp('NavView').push(newView); // Instead of this.self.push()
Ext.getCmp('NavView').pop();         // Instead of this.self.pop(); 
```

您的按钮处理程序可能如下所示

```
handler: function() {
    var self = Ext.getCmp('NavView');
    var button = Ext.create('Ext.Button', {
        text: 'Pop View',
        id: 'button2',
        handler: function() {
            self.pop();
        }
    });
    var newView = {
        title: 'New View',
        id: 'NewView',
        items: [button]
    };
    self.push(newView);
} 
```

[查看这个工作示例。](http://www.senchafiddle.com/#UXCdX#T6iL7)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-31T21:37:17.447

您还可以使用该`up`方法查找父容器。

```
this.up('navigationview').push(...); 
```

在这里阅读更多：http: //docs.sencha.com/touch/2-1/#! [/api/Ext.Button-method-up](http://docs.sencha.com/touch/2-1/#!/api/Ext.Button-method-up)。

# wpf - MVVM - 绑定和更新方法

> ID：14587355
> 
> 赞同：2
> 
> 时间：2013-01-29T16:21:02.137
> 
> 标签：wpf, mvvm

我使用 MVVM 结构在 WPF 中编写程序。现在我有一个绑定到文章的可观察集合的数据网格。文章是从连接到 SQL-Server 的 ArticleRepository 加载的。用户可以直接在网格中更改它们，或打开文章的详细视图。

我的问题是：更新 SQL-Server 中数据的最佳方法是什么？我应该更新网格中每个编辑的文章（行），还是其他更好的策略？

感谢您一直以来的帮助。

再见乔吉

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:01:17.827

我发现订阅数据网格的行编辑结束事件允许对数据库进行小的、可管理的更新。我们通过 WCF 服务运行所有内容，有时我们的客户的互联网连接速度很慢，因此微小的更新会让客户满意。我们还将数据网格中的选定项目绑定到视图模型上的对象，然后有一个详细信息表单，用户可以双击该表单以获取比数据网格提供的更多详细信息。这可以确保数据网格和详细信息表单都绑定到相同的更改。我会坚持对数据库进行个别更改，直到您听到网络流量过多或喋喋不休（如果发生这种情况）。扩大到大型提交比缩小规模更容易。

# javascript - 如何在javascript中换行？

> ID：14587356
> 
> 赞同：-3
> 
> 时间：2013-01-29T16:21:03.627
> 
> 标签：javascript

```
var options = { title: 'Dates:  \n' + start_date + ' \n ' + end_date }; 
```

这是行不通的。我怎样才能有这样的输出？

日期：日期
1日期
2

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:23:54.493

1.  javascript没有换行符。
2.  对于 HTML 也是如此。
3.  HTML 具有样式元素和 CSS，它们可能会导致换行，例如`<br>`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:33:34.343

这取决于您要在哪里输出文本。

如果以 html 格式输出，则在渲染时将看不到换行符。

如果输出是一个警告框，那么换行符确实是 \n 。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:22:09.703

```
var options = { title: "Dates:  <br/>" + start_date + " <br/> " + end_date }; 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-01-29T16:37:23.317

我找到了解决这个问题的另一种方法。谢谢大家 ;）

我创建了一个 div 来写我想要的东西。

# iphone - 无法通过 UINavigationcontroller.viewControllers 更改类的属性

> ID：14587357
> 
> 赞同：0
> 
> 时间：2013-01-29T16:21:08.213
> 
> 标签：iphone, ios, objective-c, cocoa-touch, uinavigationcontroller

我正在使用这种方法来尝试获取`UIScrollView`我的一个类中的属性：

```
AppDelegate *delegate = (AppDelegate *)[UIApplication sharedApplication].delegate;
UINavigationController *nav = delegate.frontViewController.navigationController;
for (UIViewController *controller in nav.viewControllers) {
    if ([controller isKindOfClass:[SGInitialViewController class]]) {
        SGInitialViewController *sgInitialController = (SGInitialViewController *)controller;
        SGPlotViewController *plotVC = [sgInitialController.childViewControllers objectAtIndex:0];
        [plotVC.scrollViewMain setUserInteractionEnabled:NO];
    } 
```

该类`SGInitialViewController`当前已*加载*，并且`childViewController` `SGPlotViewController`已*加载*并且*也在屏幕上*。无论我多么努力，我都无法改变它的属性。关于我做错了什么的任何想法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:35:10.720

如果不了解应用程序的整体结构，很难看出问题出在哪里。然而，挖掘所有这些控制器以获取属性并不是一个好的设计。如果可以使用委托，您应该这样做——不过，有时，根据所有这些控制器的设置方式，很难获得正确的引用，因此类可以将自己设置为委托。在这些情况下，最好使用通知。哪个类包含您在问题中的代码应该发布通知，并且应该注册 SGPlotViewController 以接收该通知。

# ios - 指向整数转换的不兼容指针将“NSString *”发送到“BOOL”类型的参数（又名“有符号字符”）

> ID：14587360
> 
> 赞同：-1
> 
> 时间：2013-01-29T16:21:15.900
> 
> 标签：ios, xcode

这是错误：

指向整数转换的不兼容指针将“NSString *”发送到“BOOL”类型的参数（又名“有符号字符”）

我不知道该怎么办。请告诉我我的错误。

```
{

NSString *post =[NSString stringWithFormat:@"username=%@&password=%@",Name.text, Passwort.text];

NSString *hostStr = @"www....de.php";
hostStr = [hostStr stringByAppendingString:post];
NSData *dataURL =  [NSData dataWithContentsOfURL: [ NSURL URLWithString: hostStr ]];
NSString *serverOutput = [[NSString alloc] initWithData:dataURL encoding: NSASCIIStringEncoding];

    BOOL loggedIn = [serverOutput isEqualToString: @"YES"];
    if (loggedIn)
    {
        [_LOGIN setEnabled:@"YES"];
    }
    else
    {
        [_LOGIN setEnabled:@"NO"];
        UIAlertView *alertsuccess = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Benutzername oder Passwort falsch"

                                                              delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:24:38.520

```
_LOGIN.enabled = loggedIn;
if (!loggedIn)
{
    UIAlertView *alertsuccess = [[UIAlertView alloc] ...];
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:27:49.563

> [_LOGIN setEnabled:@"YES"];

应该

> [_LOGIN setEnabled:YES];

您正在使用 NString 来设置我认为是 BOOL 值。这同样适用于您将其设置为 NO 的位。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:24:14.697

这里 ：

```
if (loggedIn)
{
    [_LOGIN setEnabled:@"YES"];
}
else
{
    [_LOGIN setEnabled:@"NO"];
    UIAlertView *alertsuccess = [[UIAlertView alloc] initWithTitle:@"Error" message:@"Benutzername oder Passwort falsch"

                                                          delegate:self cancelButtonTitle:@"OK" otherButtonTitles:nil, nil];
} 
```

从 _LOGIN 对象调用 setEnabled 方法时，不要使用 @"YES" 或 @"NO"。您应该使用 YES OR NO ：

```
[_LOGIN setEnabled:YES]; 
```

setEnbaled 方法需要一个布尔值作为参数，并且当您发送 @"YES" 时向该方法发送一个字符串值，这是不正确的（因为该方法需要布尔值）。

# ruby-on-rails - 使用 Mechanize 定位图像/javascript 链接

> ID：14587361
> 
> 赞同：1
> 
> 时间：2013-01-29T16:21:30.207
> 
> 标签：ruby-on-rails, web-scraping, mechanize

我正在尝试使用 Mechanize 单击没有文本的链接，只有图像。这`href`是一个Javascript函数。这是链接：

```
<a href='javascript:nextButton(this.form)'>
    <img src=./images/next.gif border=0 alt=Next width=20 height=20>
</a> 
```

我正在使用示例代码：

```
agent = Mechanize.new
page = agent.get(url)

next_page = agent.click(page.link_with(:text => /Sign In/)) # Change to?? 
```

但我不知道如何定位没有文字的东西。我猜我可以定位 the`img src`或`alt`text ，这两者都是独一无二的。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:33:37.747

您应该可以`.attributes['href']`在`<a>`.

# safari-extension - safari.application.activeBrowserWindow.activeTab.url 未定义

> ID：14587363
> 
> 赞同：3
> 
> 时间：2013-01-29T16:21:31.000
> 
> 标签：safari-extension

我正在编写一个 Safari 扩展程序，以创建选项卡的副本

这是我迄今为止编写的以下代码

```
safari.application.addEventListener("command", commandHandler, false);

function commandHandler(event) {
    console.log("Command Handler");
    if (event.command = "duplicate") {
        var url = safari.application.activeBrowserWindow.activeTab.url;
        console.log("Url " + url);
        console.log(safari.application.activeBrowserWindow.activeTab);
        safari.application.activeBrowserWindow.openTab().url = url;
    }
} 
```

我的网址是未定义的，我错过了什么。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2014-12-15T16:55:57.947

如上所述，您可能需要更改“扩展网站访问权限”。如果您选择“全部”，则无需担心白名单/黑名单。如果您选择“一些”，则必须将项目添加到白名单，否则您的扩展程序将无法访问当前页面。

如果这似乎不起作用，您可能需要重新启动浏览器才能启动访问设置...我遇到了 HTTPS 页面的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:43:19.000

该问题的解决方案是在扩展编辑器中声明脚本权限，它将获取`URL`所有需要的页面。

# iphone - 某些应用程序如何在其应用程序中以编程方式打开设置应用程序

> ID：14587370
> 
> 赞同：13
> 
> 时间：2013-01-29T16:21:56.033
> 
> 标签：iphone, ios, objective-c, ios6, ios5.1

我知道有很多问题：“如何以编程方式打开设置应用程序？” 答案是“大不”。我知道 Apple 不支持在 iOS 5.0 之后从任何其他应用程序打开设置。

但是有一些像 MapMyFitness 这样的应用程序可以打开设置，并且它们在 App Store 中可用并且已获得 Apple 的批准。如果蓝牙关闭，MapMyFitness 会打开蓝牙设置。我已经在 iOS 6 和 iOS 5.1 中检查了这一点。

我想知道这些应用程序如何能够合法地打开设置并绕过 Apple 安全，因为根据我的信息，没有合法的方法可以做到这一点？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2013-01-29T16:28:19.313

嗯，在 iOS 5.0 上，有`prefs://`URL 方案。

从 iOS 5.1 开始，它被删除了。仍然可以使用私有 API 和混淆来绕过二进制文件的静态分析。例子：

```
void (*openApp)(CFStringRef, Boolean);
void *hndl = dlopen("/System/Library/PrivateFrameworks/SpringBoardServices.framework/SpringBoardServices");
openApp = dlsym(hndl, "SBSLaunchApplicationWithIdentifier");
openApp(CFSTR("com.apple.Preferences"), FALSE); 
```

通过使用字符串（拆分和连接它们等），您最终可以进入 AppStore。但是，它仍然是不允许的。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2013-01-29T16:31:56.927

应用程序无法将设置应用程序打开到特定屏幕。MapMyFitness 之类的应用程序之所以打开首选项，是因为它们要求获得使用蓝牙低功耗的权限。首次使用时请求权限由[CBCentralManager管理。](http://developer.apple.com/library/ios/#documentation/CoreBluetooth/Reference/CBCentralManager_Class/translated_content/CBCentralManager.html)

![在此处输入图像描述](../Images/b946996864e9ce34ce8b57f2b6ea74aa.png)

这也是知道蓝牙是打开还是关闭的类。它将自动显示警报，并带有进入设置以打开蓝牙的选项。

使用定位服务时将显示类似的弹出窗口。

这些弹出窗口由系统框架自动显示。可以使用`purpose`定位服务的属性来自定义消息，这在蓝牙的情况下是不可能的。

没有为此使用私有 API，因此没有理由拒绝该应用程序。

# html - 使用 min-height 时，Firefox 中的提交类型输入错位

> ID：14587372
> 
> 赞同：0
> 
> 时间：2013-01-29T16:21:58.177
> 
> 标签：html, firefox, css, html-rendering

一个简单的页面：

```
<!DOCTYPE html> 
<html>
<head>
    <style type="text/css">
        html, body { height: 100%; width: 100%; margin: 0; padding: 0; }

        #btn, #btn2
        {
            border: solid 5px #FFA354;
            background-color: #FFDB82;
            width: 100px;
        }

        #btn { min-height: 50px; }
        #btn2 { height: 50px; }
    </style>
</head>
<body>
    <form method="post" id="oogaboogabooga">
        <input type="submit" id="btn" value="btn" /><input type="submit" id="btn2" value="btn2" />
    </form>
</body>
</html> 
```

在 Opera 和 Chrome 中按我预期的方式呈现（相邻的两个按钮相同），但 Firefox 18.1 呈现的第一个低于第二个，在大多数情况下差异等于边框大小。如果我设置`display: block`或`float: left`为第一个，顶部的空白空间消失，但​​里面的文本仍然错位，垂直高于它应该的位置。似乎在使用 min-height 时，文本使用底部边距或某种填充来定位，而不管边框大小。

为什么会这样？它是 Firefox 错误、预期功能还是对某些标准的不同解释？是否可以强制 Firefox 在仍在使用时将第一个按钮与第二个按钮呈现相同`min-height`？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:01:18.377

这是一个火狐的错误。您可以在此处跟踪其分辨率：[https ://bugzilla.mozilla.org/show_bug.cgi?id=835873](https://bugzilla.mozilla.org/show_bug.cgi?id=835873)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:30:34.297

更改`verical-align`, from `baseline`to的值`middle`或两者的其他值。

编辑：考虑使用`<button>`标签

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:05:00.120

```
please use this css

     <style type="text/css">
    html, body { height: 100%; width: 100%; margin: 0; padding: 0; }

    #btn, #btn2
    {
        border: solid 5px #FFA354;
        background-color: #FFDB82;
        width: 100px;
        float:left;
        margin:1px;
        height:50px;
        line-height:50px;
    }

</style> 
```

# javascript - 有什么方法可以检查变量是否是真正的 jqXHR？

> ID：14587373
> 
> 赞同：10
> 
> 时间：2013-01-29T16:21:59.533
> 
> 标签：javascript, jquery

正如标题已经提到的，有没有办法检查一个变量是否是一个真正的 jqXHR？

我的意思是（想象的）：

```
var resource = $.get('/resource');

if (resource instanceof jqXHR)
{
    // do something
} 
```

我要解决的实际问题是我正在研究的模态插件。

```
$('#element').modal({
    content : function()
    {
        return $.get('/resource');
    }
}); 
```

而且，`content`变量可以是`string`或`function`。如果是`string`，它将是静态的，如果是`function`，它将在每次打开模态时运行。

但是，我希望允许`content`回调返回`jqXHR`or `string`。使用字符串很简单`if (typeof returned === 'string')`，但是呢`jqXHR`？

我知道我可以简单地检查一下`string`，如果它不是`string`，假设它是`jqXHR`，但我希望我的插件尽可能强大，并且不允许使用意外类型。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T16:28:33.590

我建议只检查它是否是一个承诺对象。这将使您的代码更加健壮，因为如果用户需要执行更复杂的操作，他们可以返回自定义的延迟对象，或者他们可以简单地返回 jqXHR 以获得相同的效果。

```
if ($.type(resource) === "string") {
    doStuff(resource);
} elseif (resource && resource.promise) {
    resource.promise().done(doStuff);
} 
```

# jquery - FancyBox 链接到带有图像的另一个页面

> ID：14587377
> 
> 赞同：0
> 
> 时间：2013-01-29T16:22:33.590
> 
> 标签：jquery, fancybox

我以前从未使用过花哨的盒子，除了打开一个带有图像的新窗口之外，我无法让它做任何事情，我希望它使用“弹性”功能在同一页面中打开，这就是我所写的.. .

```
<head>
<link rel="stylesheet" href="/fancybox/source/jquery.fancybox.css" type="text/css" media="screen" />
        <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4/jquery.min.js"></script>
        <script type="text/javascript" src="/fancybox/source/jquery.fancybox.pack.js"></script>
</head>

<body>
 <div class="grid_5" id="images">
            <a id="single_image" href="htmlandcss/images/1car.gif"><img src="htmlandcss/images/1car.gif" alt=""/></a>
</div>  

</body>
<script type="text/javascript">
        $(document).ready(function() {  

                        $("a#single_image").fancybox({
                            'transitionIn'  :   'elastic',
                            'transitionOut' :   'elastic', 
                            'overlayShow'   :   false
                        });

                    });

    </script> 
```

任何帮助将不胜感激

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:48:11.353

您使用的 jQuery 版本与 Fancybox2 不兼容 - 我收到以下错误：

```
 Uncaught TypeError: Object #<Object> has no method 'prop' 
```

尝试将您的 jQuery 更新到最新版本，或者至少 1.6.4（这[绝对有效](http://jsfiddle.net/VfLsv/5/)）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-24T10:38:06.193

也许这个是你需要的，更简单更短的代码

```
$.fancybox.open([
{
    href : 'http://fancyapps.com/fancybox/demo/1_b.jpg',
    link : 'http://jquery.com/'}
],{
    afterShow: function() {
    $(".fancybox-image").wrap('<a href="' + this.link + '" />')
    },   

    padding : 0   
}); 
```

# jquery - Twitter API 在 WIMP 服务器环境中不起作用

> ID：14587379
> 
> 赞同：0
> 
> 时间：2013-01-29T16:22:37.950
> 
> 标签：jquery, twitter, lamp, wimp

此站点设置在 WIMP 环境中，无法正常工作：

[http://www.xsp.com/](http://www.xsp.com/)

这是在 LAMP 环境中设置的测试站点，并且可以正常工作：

[http://www.bigideaadv.com/xsp_OLD/BACKUP/index2.php](http://www.bigideaadv.com/xsp_OLD/BACKUP/index2.php)

使用 Remy Sharp 的 twitter 插件：[http](http://code.google.com/p/twitterjs/downloads/list) ://code.google.com/p/twitterjs/downloads/list和他的平滑选取框以获得更好的显示：[http ://remysharp.com/2008/09/10/the-silky-平滑选框/](http://remysharp.com/2008/09/10/the-silky-smooth-marquee/)

任何人对为什么这会导致实时站点上的错误有任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T21:26:21.680

感谢雷内的提示。我认为问题出在一些代码格式上。我重新检查了这一切，最终让它顺利运行。

# regex - 如何在包中添加 roxygen @export 所有功能

> ID：14587381
> 
> 赞同：4
> 
> 时间：2013-01-29T16:22:48.877
> 
> 标签：regex, r, roxygen2

我正在接管一个现有的包。在 R 需要显式导出函数之前，该包是用 .Rd 文档编写的。

我的第一步是使用 Rd2roxygen 将文档转换为[roxygen](http://cran.r-project.org/web/packages/Rd2roxygen/)（非常感谢 Yihui 和 Hadley 的这个包！）。

但是现在该包不起作用，因为没有导出功能。我宁愿默认导出所有功能。在这一点上，我的一般方法似乎是确定一个可以为每个函数找到的正则表达式（`##' @return`将是一个很好的目标）并插入 `##' @export`它上面的行，

在伪代码中：

```
for all files in the `R/` directory{
   for each line starting in `##' @return`{ 
      insert `##' @export` in the preceeding line
}} 
```

结果将是替换：

```
##' @return something 
```

和

```
##' @export
##' @return something that varies with each function 
```

获取函数列表并将它们添加到 NAMESPACE 将不起作用，因为如果不在每个函数上方的 roxygen 代码中，`devtools::document("mypackage")`它将覆盖它。`@export`

**问题：**将 @export 添加到包中每个函数的 roxygen 文档中的最有效方法是什么？

一个更好的选择是相应地解析`NAMESPACE`和解析`export`和`method`语句。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:46:54.413

编辑：仅使用导出的函数，并假设它们在 Roxygen 块中`NAMESPACE`的某处没有语句，我们可以对所有ed 函数进行 hacky 解析：`@export``export`

```
NAMESPACE <- readLines("NAMESPACE")
exported_fns <- grep( "^export\\(", NAMESPACE, value=TRUE )
exported_fn_names <- gsub( "export\\((.*)\\)", "\\1", exported_fns )
fn_match_re <- paste("^", exported_fn_names, " ?<- ?", sep="")

for( file in list.files("./R", full.names=TRUE) ) {
  doc <- readLines( file )
  for( i in seq_along(doc) ) {
    if( any( sapply( fn_match_re, function(x) {
      length( grep( x, doc[i] ) ) > 0
      } ) ) ) {
      doc[i] <- paste( "##' @export", doc[i], sep="\n" )
    }
  }
  writeLines( doc, file )
} 
```

# xsd - 如何通过 XSD 防止 XML 中的空元素

> ID：14587385
> 
> 赞同：1
> 
> 时间：2013-01-29T16:23:01.023
> 
> 标签：xsd

我是 xml 模式的新手。无论如何，这是我的问题：

我有以下元素

```
<property name="propA">some-value</property> 
```

我希望我的 XSD 防止出现空元素，例如：

```
<property name="propB" />
<property name="propC"></property> 
```

如何使用我当前的 XSD 实现这一点，如下所示：

```
<xs:complexType name="property">
    <xs:simpleContent>
        <xs:extension base="xs:string">
            <xs:attribute name="name" type="xs:string" use="required" />
        </xs:extension>
    </xs:simpleContent>
</xs:complexType> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:27:18.923

您可以为此构建自己的 simpleType。例如 ：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" elementFormDefault="qualified"> 
    <xs:element name="property" type="property"/>
    <xs:complexType name="property">
        <xs:simpleContent>
            <xs:extension base="nonEmptyString">
                <xs:attribute name="name" type="xs:string" use="required" />
            </xs:extension>
        </xs:simpleContent>
    </xs:complexType>
    <xs:simpleType name="nonEmptyString">
        <xs:restriction base="xs:string">
            <xs:minLength value="1"/>
        </xs:restriction>
    </xs:simpleType>
</xs:schema> 
```

# java - 插入接触优化

> ID：14587386
> 
> 赞同：2
> 
> 时间：2013-01-29T16:23:01.443
> 
> 标签：java, android, contacts

我使用此代码填充我的联系人，但添加单个联系人需要很长时间（大约 400 英里）。我可以以某种方式优化插入吗？出于测试目的，我需要填充大约 5000 个联系人，这可能需要很长时间。

```
public void addContact(ArrayList<String> info){
    byte[] imageToLoad;
    ArrayList<ContentProviderOperation> op_list = new ArrayList<ContentProviderOperation>(); 
    op_list.add(ContentProviderOperation.newInsert(ContactsContract.RawContacts.CONTENT_URI) 
        .withValue(ContactsContract.RawContacts.ACCOUNT_TYPE, null) 
        .withValue(ContactsContract.RawContacts.ACCOUNT_NAME, null) 
        //.withValue(RawContacts.AGGREGATION_MODE, RawContacts.AGGREGATION_MODE_DEFAULT) 
        .build()); 

 // first and last names 
      op_list.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI) 
  .withValueBackReference(Data.RAW_CONTACT_ID, 0) 
        .withValue(Data.MIMETYPE, StructuredName.CONTENT_ITEM_TYPE) 
        .withValue(StructuredName.GIVEN_NAME, info.get(0)) 
        .withValue(StructuredName.FAMILY_NAME, info.get(1)) 
        .build()); 

      op_list.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI) 
              .withValueBackReference(Data.RAW_CONTACT_ID, 0) 
              .withValue(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.Phone.CONTENT_ITEM_TYPE)
              .withValue(ContactsContract.CommonDataKinds.Phone.NUMBER, info.get(2))
              .withValue(ContactsContract.CommonDataKinds.Phone.TYPE, Phone.TYPE_CUSTOM)
              .build());
      op_list.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI) 
              .withValueBackReference(Data.RAW_CONTACT_ID, 0)

      .withValue(ContactsContract.Data.MIMETYPE,ContactsContract.CommonDataKinds.Email.CONTENT_ITEM_TYPE)
      .withValue(ContactsContract.CommonDataKinds.Email.DATA, info.get(3))
      .withValue(ContactsContract.CommonDataKinds.Email.TYPE, "emailType")
      .build());

      switch (info.get(4).charAt(0)) {
    case '1':
        imageToLoad = image1;
        break;
    case '2':
        imageToLoad = image2;
        break;
    case '3':
        imageToLoad = image3;
        break;
    default:
        imageToLoad = null;
        break;
    }

      Log.e("ContactGenerator", info.get(0) + "   "+ info.get(1) + "   " + info.get(2) + "   " +info.get(3) );

      op_list.add(ContentProviderOperation.newInsert(ContactsContract.Data.CONTENT_URI)
      .withValueBackReference(ContactsContract.Data.RAW_CONTACT_ID, 0)
      .withValue(ContactsContract.Data.MIMETYPE, ContactsContract.CommonDataKinds.Photo.CONTENT_ITEM_TYPE)
      .withValue(ContactsContract.CommonDataKinds.Photo.PHOTO, imageToLoad)
      .build());

      info = null;

 try{ 
  ContentProviderResult[] results = getContentResolver().applyBatch(ContactsContract.AUTHORITY, op_list); 
 }catch(Exception e){ 
  e.printStackTrace(); 
 } 
} 
```

# javascript - 如何在网站中运行 TypeScript 编译器

> ID：14587396
> 
> 赞同：6
> 
> 时间：2013-01-29T16:23:34.797
> 
> 标签：javascript, typescript

我想在网站中运行 TypeScript 编译器，以便在 TypeScript 的网站[TypeScript Playground](http://www.typescriptlang.org/Playground/)上构建类似游乐场的东西。

与在服务器端运行 tsc 相反，我想直接在 JS 中运行 compile 它。我在这里查找了任何类似的帖子以及 TypeScript 语言规范中的任何描述，但我找不到任何相关信息。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:09:44.333

typescript 编译器是用 Typescript 编写的，因此您可以将编译器 (typescript.js) 加载到浏览器中。但请记住，它有点重（大约 250 KB）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-05-03T12:55:57.877

有一些关于[TS Compiler API](https://github.com/Microsoft/TypeScript/wiki/Using-the-Compiler-API)的文档 ，还有[typestring](https://github.com/gavinhungry/typestring) - 一个仍然打算在 NodeJS 中使用的包装器，但您可以将其用作起点。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2018-10-25T14:01:36.330

是的，可以在浏览器中使用 TypeScript 编译器而无需任何破解。在这个答案中查看我的示例游乐场和 monaco-editor 演示：[TypeScript Web-Based IDE](https://stackoverflow.com/questions/14283737/typescript-web-based-ide/52991184#52991184)

# gwt - 如何在 GWT 中格式化 NumberCells

> ID：14587397
> 
> 赞同：0
> 
> 时间：2013-01-29T16:23:41.240
> 
> 标签：gwt, gwt-celltable

我有一个包含数字列的单元格表，通过 Eclipse 的 GWT Designer 插件添加。这些相当于`Column<MyObject, Number>(new NumberCell())`

我不知道如何通过 API 指定单元格的格式。整数的默认行为是使用“千位分隔符”，例如 123456 为 123,456。我只想显示普通数字。

我想我可以只使用一个 Text 列，坦率地说，我不确定拥有 Number Column 真正能给我带来什么，因为该列不可编辑（但可能有一天），我必须应用我自己的 Comparator用于排序。

我应该只使用纯文本列，还是有办法在列上指定数字格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:43:17.020

`NumberCell`使用 a`NumberFormat`来格式化数字，如果没有提供则使用[十进制格式。](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/i18n/client/NumberFormat.html#getDecimalFormat%28%29)

您可以提供另一个`NumberFormat`您的选择，如果它仍然不符合您的需求（您想要一个 plain `toString()`），您可以简单地创建自己的 cell 继承`AbstractCell`.

# java - 如何在 MongoDb 中更喜欢读取辅助文件

> ID：14587398
> 
> 赞同：8
> 
> 时间：2013-01-29T16:23:41.333
> 
> 标签：java, mongodb, replication, morphia

在副本集配置中使用 mongodb 时（1 个仲裁器，1 个主节点，2 个从节点）；如何设置对辅助节点执行读取并将主节点仅用于写入的首选项？我将 MongoDb 2.0.4 与 Morphia 一起使用。我看到有一个 slaveOk() 方法，但我不确定它是如何工作的。

吗啡[http://code.google.com/p/morphia/](http://code.google.com/p/morphia/)

**详细信息** 我的 Mongo 设置了以下选项：

```
mongo.slaveOk();
mongo.setWriteConcern(WriteConcern.SAFE);

```

我正在尝试使用以下内容（这可能是答案-btw）：

```
数据存储 ds = getDatastore();
Query<MyEntity> 查询 = ds.find(MyEntity.class).field("entityId").equal(entityId);
query.queryNonPrimary(); // 看起来等同于 ReadPrefererence.secondary()
MyEntity 实体 = query.get();

```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-31T17:11:20.607

经过大量的血汗，正确答案如下：

*   要更喜欢所有读取/查询命中辅助节点，只需设置*slaveOk()*
*   要仅选择使用辅助读取，请不要设置*slaveOk()*并使用*queryNonPrimary()*代替每个查询

在使用副本集时设置适当的写入关注点也是一个好习惯，如下所示：

```
mongo.setWriteConcern(WriteConcern.REPLICAS_SAFE);
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-06-27T09:30:20.360

似乎当前的方法（根据 Java 驱动程序 2.8+）是

```
MongoOptions options = new MongoOptions();
options.setReadPreference(ReadPreference.secondaryPreferred()); 
```

然后

```
mongo = new com.mongodb.Mongo(Arrays.asList(address1, address2), options); 
```

这将使所有连接更喜欢使用辅助节点，但如果辅助节点因某种原因关闭或不可用，则会使用主节点作为备份。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T16:43:08.747

使用“SECONDARY”阅读偏好 [http://www.mongodb.org/display/DOCS/Read+Preferences+and+Tagging+in+The+Java+Driver](http://www.mongodb.org/display/DOCS/Read+Preferences+and+Tagging+in+The+Java+Driver)

“SECONDARY：如果可用，则从辅助节点读取，否则出错。”

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-02-01T06:39:52.033

对于 Java 驱动程序 3.6，方法现在是

```
 MongoClientOptions l_opts =
            MongoClientOptions
            .builder()
            .readPreference( ReadPreference.secondary() )
            .build();

    ServerAddress l_addr = new ServerAddress( "localhost", 27017 );

    try
    (
            MongoClient l_conn = new MongoClient( l_addr, l_opts );
    )
    {
       ... 
```

# c++ - 找到一个或多个多重定义的符号 Qt

> ID：14587403
> 
> 赞同：0
> 
> 时间：2013-01-29T16:23:59.300
> 
> 标签：c++, qt

我得到了这个错误，我根本没有得到。我将其解释为我有不止一次定义不同的东西，但是当我查看我的代码时，我只是看不到它。我上传了错误消息指向的代码：

```
 teamdata.obj:-1: error: LNK2005: "public: int __thiscall teamdata::getTeamnumber(void)" (?getTeamnumber@teamdata@@QAEHXZ) already defined in scouting.obj
 teamdata.obj:-1: error: LNK2005: "public: bool __thiscall teamdata::operator<(class teamdata)" (??Mteamdata@@QAE_NV0@@Z) already defined in scouting.obj
 release\Scouting.exe:-1: error: LNK1169: one or more multiply defined symbols found 
```

链接：teamdata.h [http://pastebin.com/5u0YzK84](http://pastebin.com/5u0YzK84)

teamdata.cpp [http://pastebin.com/GP0zRzpw](http://pastebin.com/GP0zRzpw)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:29:05.120

正如链接器告诉您的那样，您的函数*和 定义*`getTeamnumber()`在`operator <`两个不同的**翻译**单元中： in （我猜那是文件的名称）和 in 。***`scouting.cpp``teamdata.cpp`***

 ***定义是相同还是不同都没有关系（函数模板是这个规则的一个例外，但这不是你的情况，因为你的函数不是模板），只要它们是*多个*.

**单一定义规则**（C++ 标准的第 3 条）规定程序的每个实体只能有一个定义。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:30:54.523

超出链接器正确的标准答案......

我不确定您的项目是否已配置或您的代码是如何布局的……所以请谨慎对待。

将那些方法的定义从类头文件移到类定义文件中......***

# plsql - 'OR' 子句 IF 有条件

> ID：14587406
> 
> 赞同：0
> 
> 时间：2013-01-29T16:24:11.107
> 
> 标签：plsql, oracle11g

我正在尝试在 oracle 中创建一个函数。似乎不可能做这样的事情：

```
IF (VAR1 IS NULL OR LENGTH(TRIM(VAR2))) = 0 THEN
    -- do something;
END IF; 
```

如何在 if 中使用“OR”子句。我想使用 if 在同一行中询问两个可能的条件。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:28:06.490

如果您正确放置括号，则有可能：

```
IF (VAR1 IS NULL OR LENGTH(TRIM(VAR2)) =0) THEN
-- do something;
END IF; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:28:14.550

你只需要让你的括号排成一行。你最后一个正确的括号是在错误的地方。

```
IF (VAR1 IS NULL OR LENGTH(TRIM(VAR2)) = 0) THEN
    -- do something;
END IF; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-30T10:47:22.240

是的，我们可以在 IF 语句的一行中检查多个条件。但是括号应该正确放置。

见语法：

```
IF (VAR1 IS NULL OR LENGTH(TRIM(VAR2)) = 0) THEN
  do something
End if; 
```

# mysql - 返回“操作数应包含 1 列”的 SQL 查询

> ID：14587415
> 
> 赞同：0
> 
> 时间：2013-01-29T16:24:25.867
> 
> 标签：mysql, distinct, mysql-error-1241

我目前正在处理一个查询，该查询将包含一个表中的所有行，但只有另一个表中的有限信息。

我试过使用这个查询：

```
SELECT `t`.`uid`, `t`.`cid`, `t`.`id` FROM `tracking` as `t`
JOIN (SELECT DISTINCT(`p`.`id`, `p`.`firstname`, `p`.`lastname`, `p`.`company`) FROM `publishers` as `p`) as `p`
ON `p`.id = `t`.uid 
```

但是，我收到主题标题中的错误。

谁能看到我在这里做错了什么？

编辑：

**跟踪结构：** id int(11) primary ai、cid int(11)、uid int(11)。

**发布者的结构：** id int(11) primary ai、firstname varcher(60)、lastname varchar(60)、company varchar(100)。

**示例：** 出版商 id 1，名字 NIKOLAJ，姓 JEPSEN，公司 APECHO id 6，名字 ROBERT，姓 SCOTT，公司 FLAPJACK LTD

跟踪 id 1、cid 1、uid 1；id 2，cid 1，uid 6；id 3，cid 3，uid 1

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:29:35.120

肯定没有两个发布者可以共享相同的 id、名字、姓氏和公司！！！

```
SELECT t.uid
     , t.cid
     , t.id 
  FROM tracking t
  JOIN publishers p
    ON p.id = t.uid; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:39:22.257

区别（`p`. `id`, `p`. `firstname`, `p`. `lastname`, `p`. `company`）

是问题所在。去掉括号：

```
SELECT `t`.`uid`, `t`.`cid`, `t`.`id` FROM `tracking` as `t`
JOIN (SELECT DISTINCT `p`.`id`, `p`.`firstname`, `p`.`lastname`, `p`.`company` FROM `publishers` as `p`) as `p`
ON `p`.id = `t`.uid 
```

这应该允许查询工作......但是，如果您必须为此使用 distinct，您的数据结构或查询可能还有其他问题。

# caching - 使用户控件或页面缓存根据缓存字典的内容而变化

> ID：14587418
> 
> 赞同：0
> 
> 时间：2013-01-29T16:24:32.753
> 
> 标签：caching, user-controls, outputcache, cache-control, data-caching

昨天，我花了一些时间考虑缓存。

具体来说，缓存数据。

我正在使用 ASP.NET 4.0，在 VB 中编码。我使用的是 MySQL 数据库，因此不能使用仅限 SQL Server 的 sqlDependency。

对我来说重要的是，所有数据更改都会被执行并且没有用户看到旧数据，因此我必须想出一些东西来监视特定表上的数据库更改。

我想出的是这个......

1：在缓存中创建键/值字典的例程，其中包含最近写入的任何表名和写入时间时间戳，即：

```
tableName    |     timeStamp (Unix)
table2Name   |     timeStamp 
```

2：写入任何数据时调用的常用函数，即所有 INSERT、UPDATE 或 DELETE 命令都是通过向该函数传递两个参数来创建的，`sql`并且`tableChanges`。

在这个函数中，`sql`只是 UPDATE/INSERT 代码，并且`tableChanges`是一个逗号分隔的表名列表，这些表名将受此命令影响。

第 1 点中的表格是在任何修改期间创建的。

3：一个常用的`getData`函数，它接受参数：

```
 cacheName As String      - the cache key name
 slidingTime As Double    - sliding expiry period (converted to minutes within the function)
 dependancy As Object     - standard cache dependancy object
 newSql As String         - the query required to get this data
 Optional tableDependencies As String = "" - a comma separated list of tables which this data is dependant on 
```

4：基于与上述类似的参数将数据对象写入缓存的函数。

现在，函数#3 首先检查缓存是否包含传递给它的键，如果没有，那么它就简单地转到数据库并获取新数据。

如果它确实包含这个键，那么它会做两件事，首先它获取添加这个项目的时间戳，它总是`cacheKey_added`（在添加缓存项目的过程中创建），然后得到这个时间戳，它抓取逗号分隔`tableDependencies`，将其转换为表名列表，循环遍历它们，从`Dictionary`第一个函数中创建的缓存数据中检查相应的表更新时间（使用表名作为键）。

如果任何表更新时间比缓存时间更近，则它会转到数据库并获取新数据，如果不是，则返回缓存数据。

类似地，如果缓存中没有保存任何`Dictionary`表，它会返回缓存数据，因为假设没有进行任何更改，因为此缓存对象仅在对数据库进行更改时创建。

数据总是保持在一个滑动的缓存时间上，通常很短，当然完全不需要缓存的数据可以直接抓取，不需要这个过程。

我没有发布上述任何内容的代码，因为它不一定与我的实际问题相关，但背景很重要。

所以，我的实际问题是：

鉴于上述方法可以很好地确定我的数据库中的任何表何时发生更改（假设 phpMyAdmin 中没有任何更改，但由于只有一个人可以访问它，在我的情况下这很好......我如何应用相同的原则缓存用户控件或页面？

因此，我过去曾使用 `VaryByParam="PARA"`并 `VaryByCustom="CUSTOM_VALUE"`成功缓存过用户控件。按理说这`VaryByCustom`是要走的路……但是我如何可靠地将参数（表名和页面的最后缓存时间）传递给自定义函数来执行此操作……或者，我是在胡说八道吗？！

此外，有没有办法获得缓存写入时间而不必为每个缓存项保存额外的`_added`键？

# php - 在具有特定类的每个元素之后添加 div

> ID：14587421
> 
> 赞同：1
> 
> 时间：2013-01-29T16:24:43.593
> 
> 标签：php, jquery

有没有办法在每个具有特定类的元素之后自动将 div 插入到我的标记中？

例如;

如果我有以下标记

```
<div class="three-col"></div>

<div class="three-col"></div>

<div class="three-col last"></div> 
```

有没有办法添加

```
<div class="after-last"></div> 
```

自动在“最后三列” div 之后？

我正在创建一个 Wordpress 主题，并且创建了一些列短代码，但是当 div 向左浮动时，如果最后一列的内容少于其余列，则在它跳到其下方之后添加的任何内容。

任何建议都会很棒。

谢谢。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T16:25:33.410

是的，试试[`.after`](http://api.jquery.com/after/)方法。

```
$('.three-col.last').after('<div class="after-last"></div>'); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:31:22.020

如果我是你，我没有使用最后一堂课，你可以这样做：

```
<div class="three-col"></div>

<div class="three-col"></div>

<div class="three-col"></div>

$('div.three-col:last').after('<div class="after-last"></div>'); 
```

# jquery - 除孩子外的实时点击？

> ID：14587423
> 
> 赞同：0
> 
> 时间：2013-01-29T16:25:00.753
> 
> 标签：jquery

我有以下 div：

```
<div class="main">
     <button class="quick">sample</button>
</div> 
```

我有这个脚本：

```
 $('.main').live('click', function() { 
```

但是，id 喜欢修改它，因此如果单击其中的按钮`main`，则不会发生任何事情。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:26:13.903

```
$(".main .quick").on('click', function (e) {
    e.stopPropagation();
}); 
```

这将防止事件冒泡到父级。

您还应该使用`.on`代替`.live`（如果可用；否则使用`.delegate`）。

以防万一您确实需要事件委托，您可以这样做：

```
$(document).on('click', ".main .quick", function (e) { 
```

# python - AttributeError：“模块”对象没有属性“参数样式”

> ID：14587427
> 
> 赞同：-1
> 
> 时间：2013-01-29T16:25:14.983
> 
> 标签：python, sqlalchemy, pygtk, py2exe

我正在尝试为我的 pygtk 应用程序制作一个 .exe。我正在使用 pygtk+glade、gtkbuilder、sqlalchemy、sqlsever、pyodbc 连接器...但是当我尝试运行使用 py2exe 创建的 .exe 时，为 py2exe 创建的日志文件有这个错误：

```
\modConfiguracion\main_config.py", line 30, in __init__
  File "sqlalchemy\ext\sqlsoup.pyc", line 546, in __init__
  File "sqlalchemy\schema.pyc", line 2355, in __init__
  File "sqlalchemy\schema.pyc", line 2428, in _bind_to
  File "sqlalchemy\engine\__init__.pyc", line 338, in create_engine
  File "sqlalchemy\engine\strategies.pyc", line 69, in create
  File "sqlalchemy\dialects\mssql\pyodbc.pyc", line 246, in __init__
  File "sqlalchemy\connectors\pyodbc.pyc", line 41, in __init__
  File "sqlalchemy\dialects\mssql\base.pyc", line 1151, in __init__
  File "sqlalchemy\engine\default.pyc", line 129, in __init__
AttributeError: 'module' object has no attribute 'paramstyle' 
```

我的代码的第 30 行是：

```
self.db = sqlalchemy.ext.sqlsoup.SqlSoup('mssql://'+var_globales.user+':'+var_globales.passwd+'@'+var_globales.server+'/'+var_globales.base+'') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T18:51:41.047

我解决了这个问题。我正在重新安装我的每个 pygtk+python+sqlalchemy 环境，在我的应用程序的 py2exe 的 setup.py 中进行更改。多谢...

# backbone.js - 使用backbone.js 拉入一个集合

> ID：14587429
> 
> 赞同：0
> 
> 时间：2013-01-29T16:25:26.690
> 
> 标签：backbone.js, backbone.js-collections

我正在尝试从 url 属性中提取一个集合，但遇到了一些问题。似乎 fetch() 返回成功，但是我无法使用 get() 访问我的集合中的模型。我正在使用 bbb 和 requireJS 来开发我的模块

```
var rooms = new Rooms.Collection(); // calls the rooms module
  rooms.fetch({success: function(){
      console.log(rooms.get(1)); // should output the first model
}); 
```

这是我在房间模块中的收藏代码：

```
Rooms.Collection = Backbone.Collection.extend({
    model: Rooms.Model,
    url: 'http://localhost:8888/projects/meeting-room/app/data/rooms.json'
}); 
```

如果我输出房间，一切都会好起来的。但是当我尝试使用特定型号时，就会出现错误。

```
[{
    "id": 12345,
    "name": "Ford",
    "occupied": false
},
{
    "id": 23458,
    "name": "Chevy",
    "occupied": false
},
{
    "id": 83565,
    "name": "Honda",
    "occupied": false
}] 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:27:35.930

该`collection.get`方法通过 id 查找模型。如果要按位置查找模型，请[`collection.at`](http://backbonejs.org/#Collection-at)改用。

另请注意，javascript 中的数组索引是`0`基于 - 的，因此可以通过以下方式找到第一个模型：

```
var model = collection.at(0); 
```

为方便起见，Backbone 集合还实现了一些[下划线的数组和集合方法](http://backbonejs.org/#Collection-Underscore-Methods)，包括`first`. 这意味着您还可以找到第一个模型：

```
var model = collection.first(); 
```

# postgresql - 在postgresql中选择数组相交的所有行

> ID：14587432
> 
> 赞同：0
> 
> 时间：2013-01-29T16:25:31.533
> 
> 标签：postgresql, rails-postgresql

目前，我正在尝试在 rails 3 应用程序中选择两个数组有一些重叠的所有对象。

我尝试了以下方法：

```
Contact.where("possible_unique_keys && ?" c.possible_unique_keys) 
```

这使：

```
array value must start with "{" or dimension information 
```

所以我尝试将后一条记录转换为 postgresql 数组，如下所示：

```
Contact.where("possible_unique_keys && string_to_array(?)", c.possible_unique_keys) 
```

这使：

```
operator does not exist: character varying[] && text[] 
```

如何将两个数组都转换为可以正确评估 && 的格式？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-31T15:22:48.157

我想我现在已经解决了它，并想出了一种方法来构建从 Ruby 数组到 postgresql 数组的查询（部分归功于[为 rails/postgresql interoperability 编写的](https://github.com/tlconnor/activerecord-postgres-array/blob/master/lib/activerecord-postgres-array/string.rb)这段代码。

给定一个字符串列表 ["bill", "joe", "stu", "katie", "laura"]，我们必须做一些杂技来让 postgresql 识别它们。这是构造请求的解决方案。

```
request = "SELECT * from  Contacts where possible_unique_keys && \'{"
list.each do |key|
    key.gsub("'", "\\'")
    if key == c.possible_unique_keys.last
        request << "\"#{key}\"}\'"
    else
        request << "\"#{key}\", "
    end
 end
 dupes = Contacts.find_by_sql(request) 
```

# javascript - JavaScript 在移动设备上无法正确获取窗口的像素宽度

> ID：14587435
> 
> 赞同：0
> 
> 时间：2013-01-29T16:25:47.803
> 
> 标签：javascript, android, iphone, html, css

我的项目位于以下 URL：

[http://mmhudson.com/test.html](http://mmhudson.com/test.html)

文档中包含的 div 和画布在大多数设备上设置为 480 像素宽，但在移动设备上（我的 iPhone 和 android 手机是我测试过的唯一设备，但我假设它非常通用）他们在文档上是 480 像素，但文档比屏幕上的像素数更宽（如果您还不明白，当您在移动设备上查看我的意思时，您会明白我的意思）。奇怪的是它在计算机上运行得非常好。

我怎样才能解决这个问题？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:33:57.577

使用有效的 DOCTYPE 然后

```
<meta name="viewport" content="width=device-width, initial-scale=1"> 
```

重要的部分是`width=device-width`。

[https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag](https://developer.mozilla.org/en-US/docs/Mobile/Viewport_meta_tag)

# c++ - 重载的调用 模棱两可，如何处理？

> ID：14587436
> 
> 赞同：21
> 
> 时间：2013-01-29T16:25:59.167
> 
> 标签：c++, c++11, initializer-list, ambiguous

我真的不明白这一点，我认为编译器首先执行大括号中的内容，然后将结果提供给最合适的函数。这里看起来它为函数提供了一个初始化列表来处理它......

```
#include <string>
#include <vector>
using namespace std;

void func(vector<string> v) { }

void func(vector<wstring> v) { }

int main() {
  func({"apple", "banana"});
} 
```

错误：

```
<stdin>: In function 'int main()':
<stdin>:11:27: error: call of overloaded 'func(<brace-enclosed initializer list>)' is ambiguous
<stdin>:11:27: note: candidates are:
<stdin>:6:6: note: void func(std::vector<std::basic_string<char> >)
<stdin>:8:6: note: void func(std::vector<std::basic_string<wchar_t> >) 
```

**为什么我的`func(vector<string> v)`重载没有被调用，我可以这样做吗？**

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2013-01-29T17:34:09.233

这个很微妙。

`std::vector`有一个构造函数采用两个范围迭代器。它是一个**模板**构造函数（在 C++11 标准的 23.6.6.2 中定义）：

```
template<typename InputIterator>
vector(InputIterator first, InputIterator last, 
const allocator_type& a = allocator_type()); 
```

`std::vector<wstring>`现在接受 an的构造函数与`initializer_list`函数调用中的隐式转换不匹配，（`const char*`并且`string`是不同的类型）；但是上面的，当然包含在`std::vector<string>`和 中`std::vector<wstring>`，是一个潜在的完美匹配，因为`InputIterator`可以推断为`const char*`。除非使用某种 SFINAE 技术来检查推导的模板参数是否确实满足`InputIterator`向量底层类型的概念，这不是我们的情况，否则这个构造函数是可行的。

但话又说回来，两者`std::vector<string>`都有`std::vector<wstring>`一个可行的构造函数来实现从花括号初始化列表的转换：因此，歧义。

所以问题在于，虽然`"apple"`和`"banana"`不是真正的迭代器（*），但它们最终被视为这样。向函数调用添加一个参数`"joe"`通过消除调用歧义来解决问题，因为这会强制编译器排除基于范围的构造函数并选择**唯一**可行的转换（`initializer_list<wstring>`不可行，因为*无法*`const char*`转换为`wstring`）。

* * *

*实际上，它们是指向 的指针`const char`，因此它们甚至可以被视为*字符*的常量迭代器，但绝对不是字符串的，正如我们的模板构造函数所愿意考虑的那样。

# jquery-ui - Casperjs 和 jquery-ui 选项卡“正在加载...”

> ID：14587437
> 
> 赞同：0
> 
> 时间：2013-01-29T16:25:59.473
> 
> 标签：jquery-ui, casperjs

我正在使用 casperjs 来获取页面上的所有 jquery ui 选项卡并单击每个选项卡。问题是选项卡是动态加载的，并且似乎永远不会从“正在加载...”状态切换。我尝试过使用 casper`wait()`函数甚至`waitWhileSelector(`) 函数，但似乎都不起作用：

```
function getActiveTab () {
    var active_tab = $('#tabs>ul').find('li.ui-tabs-selected').text();
    console.log("Active tab: " + active_tab);
    return active_tab;
}

function clickTabs (tabs) {
    this.each(tabs, function(casper, tab_name, i){
        var child_number = i + 1;
        var tab_selector = "#tabs>ul>li:nth-child(" + child_number + ")>a";
        console.log(tab_selector);
        // this.thenClick(tab_selector).waitWhileSelector('#tabs>ul>li.ui-state-processing', function(){
        this.thenClick(tab_selector, function(){
            var this_tab = this.evaluate(getActiveTab);
        });
    });
} 
```

它似乎适用于第一个选项卡（因为它是在页面加载时加载的），但所有其余选项卡都返回“正在加载”：

```
------ snip passed tests ------
#tabs>ul>li:nth-child(1)>a
#tabs>ul>li:nth-child(2)>a
#tabs>ul>li:nth-child(3)>a
#tabs>ul>li:nth-child(4)>a
#tabs>ul>li:nth-child(5)>a
#tabs>ul>li:nth-child(6)>a
#tabs>ul>li:nth-child(7)>a
#tabs>ul>li:nth-child(8)>a
#tabs>ul>li:nth-child(9)>a
remote message caught: Active tab: Host Allocation
Page Error: TypeError: 'undefined' is not a function (evaluating '$('#disk_pools_table').dataTable')
remote message caught: Active tab: Loadingâ¦
Page Error: TypeError: 'undefined' is not a function (evaluating '$('#vvol_groups_table').dataTable')
remote message caught: Active tab: Loadingâ¦
Page Error: TypeError: 'undefined' is not a function (evaluating '$('#arrayCablesTable').dataTable')
remote message caught: Active tab: Loadingâ¦
remote message caught: Active tab: Loadingâ¦
Page Error: TypeError: 'undefined' is not a function (evaluating '$('#fa_information_table').dataTable')
Page Error: TypeError: 'undefined' is not a function (evaluating '$('#zoning_table').dataTable')
remote message caught: Active tab: Loadingâ¦
Page Error: TypeError: 'undefined' is not a function (evaluating '$('#pool_mismatch_table').dataTable')
remote message caught: Active tab: Loadingâ¦
Page Error: TypeError: 'undefined' is not a function (evaluating '$('#other_information_table').dataTable')
remote message caught: Active tab: Loadingâ¦
Page Error: TypeError: 'undefined' is not a function (evaluating '$('#arrayIPs').dataTable')
remote message caught: Active tab: Loadingâ¦
FAIL 12 tests executed in NaNs, 11 passed, 1 failed. 
```

当我使用 waitWhileSelector 时，它会在第一次单击后超时。大多数选项卡动态加载带有 dataTables 对象的脚本标记，并且似乎永远不会加载表对象或未加载数据表库？我是否必须将该库注入评估方法，或者页面中的标签是否应该将其拉入？

我将不胜感激任何帮助隔离此测试中发生的事情。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T13:23:56.813

需要`.js`在选项中包含数据表的文件`casperjs`：`clientScripts.`

# django - 来自 matplotlib 的 django 网站上的图像

> ID：14587438
> 
> 赞同：0
> 
> 时间：2013-01-29T16:26:01.033
> 
> 标签：django, matplotlib

我希望有一个输入表单，您可以在其中输入服务器名称并最终显示几个从 matpotlib 创建的 png 图像。

我可以创建表单，并编写创建图像文件的脚本。我想知道处理图像的最佳方法是什么。有没有办法可以将生成的 png 文件显示到浏览器但不能将其保存到磁盘？

希望避免在浏览器显示生成的图像后将目录弄乱。我应该在渲染后删除图像吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:36:57.980

```
response = HttpResponse(mimetype="image/png")
img.save(response, "PNG")
return response 
```

# php - 在默认博客页面上发布图像打印

> ID：14587439
> 
> 赞同：0
> 
> 时间：2013-01-29T16:26:10.970
> 
> 标签：php, wordpress, loops, blogs

当我在每篇博客文章中添加带有特色图片或高级服装字段的图片时，这些图片也会出现在我的默认博客页面 (index.php) 上。

所以我的博客有4篇文章。我的默认博客页面显示了 4 篇博客文章，它还显示了为每个博客文章设置的图像。

这是我在标题中显示图像的内容：

```
if (have_posts()) : while (have_posts()) : the_post();

$attachment_id = get_field('banner_image');

if( get_field('banner_image') ):

$image = wp_get_attachment_image_src( $attachment_id, 'banner' );
?><img src="<?php echo $image[0]; ?>" alt="" width ="<?php echo $image[1]?>" height ="<?php echo $image[2]?>" /><?php
        endif;
        endwhile;
        endif;?> 
```

然后在 index.php 中打印我所有博客文章的代码：

```
 if (have_posts()) : while (have_posts()) : the_post(); ?>

            <div class="news-artical">

            <?php the_title('<h1>', '</h1>');
            the_excerpt();
            //var_dump($post);
            ?> <hr>
            </div> <?php

     endwhile; 
```

非常感谢一些帮助。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:55:22.013

好的。标题中的代码循环遍历每个页面上显示的所有帖子。如果您只想在单个帖子页面上显示标题中的图像，则必须将其包装到条件 if ( is_single() ) : 或 if ( is_singular() ) : 如果您还想在单个页面上显示标题图像。

```
if ( is_single() && have_posts()) : while (have_posts()) : the_post();

$attachment_id = get_field('banner_image');

if( get_field('banner_image') ):

$image = wp_get_attachment_image_src( $attachment_id, 'banner' );
?><img src="<?php echo $image[0]; ?>" alt="" width ="<?php echo $image[1]?>" height ="<?php echo $image[2]?>" /><?php
        endif;
        endwhile;
        endif;?> 
```

# ios - PhoneGap 应用程序需要原生 iOS 代码来提供后台服务？

> ID：14587448
> 
> 赞同：3
> 
> 时间：2013-01-29T16:26:39.753
> 
> 标签：ios, cordova, phonegap-plugins

我有一个 PhoneGap 应用程序，它每 5 分钟检查一次您的位置并报告回来等等。当应用程序需要在后台运行时执行此操作。

对于 Android，我已经编写了本机代码，但对于 iOS，这会起作用吗？

我什至不确定如何将本机目标 c 实现到 PhoneGap 中，因为它们是非常不同的编译器等，它会暂停。

任何建议将不胜感激当它回到前面时，它将恢复所有剩余的操作。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:37:53.957

您需要编写一个插件来执行此操作。插件将允许您编写 Objective-C 代码并将其链接回 JS 函数。这里有几个教程：

[来自阿帕奇](http://docs.phonegap.com/en/2.3.0/guide_plugin-development_ios_index.md.html#Developing%20a%20Plugin%20on%20iOS)

[来自 Adob​​e](http://www.adobe.com/devnet/html5/articles/extending-phonegap-with-native-plugins-for-ios.html)

[其他](http://phonegap.pbworks.com/w/page/36753496/How%20to%20Create%20a%20PhoneGap%20Plugin%20for%20iOS)

这也是人们已经创建的插件的大列表：[iOS插件](https://github.com/phonegap/phonegap-plugins/tree/master/iOS)

# eclipse - Arduino Ethernet Shield vs Eclipse（库问题）

> ID：14587451
> 
> 赞同：0
> 
> 时间：2013-01-29T16:26:46.087
> 
> 标签：eclipse, arduino

我尝试使用 Arduino Ethernet [shield](http://www.arduino.cc/en/Main/ArduinoShields)。我用他们的库检查了 Arduino IDE 和嵌入式示例，它们工作正常。

我使用 Eclipse。我将这些库复制到我的项目中，但对于某些库，我通常会遇到特定错误。

编译器无法识别 和 的相等`unsigned char`性`uint8_t`。

因此，当它读取库时，如果函数的操作符应该是`unit8_t`并且它看到，库有一个`unsigned char`，它会给出一个错误。

我可以尝试一一进行，但有更好更通用的解决方案吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:18:21.813

您可能需要添加以下库，它定义了 uint8_t 等。

```
#include <inttypes.h> 
```

或者将其添加到 Eclipse 的路径中。它包含在 Arduino IDE 的核心库路径中。

# azure - Umbraco.config 存储在 Azure 云服务中的什么位置？

> ID：14587452
> 
> 赞同：3
> 
> 时间：2013-01-29T16:26:50.637
> 
> 标签：azure, umbraco

我在 Azure 云服务（不是 Azure 网站）上安装了现有的 Umbraco，虽然 web.config 告诉我应该在 ~/App_Data/umbraco.config 中找到它，但它不存在。

有谁知道这将存储在哪里？它是否有可能写入数据库表？

我需要编辑一些节点，因为我怀疑至少一个节点由不再存在的用户拥有，因此在管理系统中没有可见该级别的节点（JS 错误）。

如果提供任何线索，该站点是使用 Umbraco Azure Accelerator 建立的。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-20T18:45:27.150

值得注意的是，由于使用了[Azure 网站](http://www.windowsazure.com/en-us/home/scenarios/web-sites/)，Umbraco 在最新版本中不需要 Umbraco Accelerator for Azure 。我想知道您正在运行哪个版本的 Umbraco？加速器项目已被弃用并已停止更新，正如您[在此处](http://azureaccelerators.codeplex.com/wikipage/history)看到的缺少最近的更新。[您可以在此处](http://ntotten.com/2012/06/21/update-on-the-windows-azure-accelerators/)阅读更多关于这背后的原因，以及加速器的功能现在如何成为 Azure 核心本身的一部分的信息。

所以 - 假设您的站点是旧站点并且您不能将其重新安装为 Azure 网站，您能否首先通过 /config/umbracoSettings.config 中的以下设置确认您已启用配置？

```
<XmlCacheEnabled>True</XmlCacheEnabled> 
```

如果这是错误的（在所有托管环境中都是最好的，除了实时），那么我们知道 Umbraco 不会使用缓存。您是否还可以检查以下部分是否未在 umbracoSettings.config 中列出任何其他计算机 IP 地址？请注意，这仅在启用属性为 true 时才相关，如下例所示。

```
<distributedCall enabled="true">
    <user>0</user>
    <servers>
        ...
    </servers>
</distributedCall> 
```

接下来，我们需要通过 web.config 文件检查 Umbraco 是否仍然设置为使用位置 /App_Data/umbraco.config。

```
<appSettings>
    <add key="umbracoContentXML" value="~/App_Data/umbraco.config" />
</appSettings> 
```

我们应该考虑 Umbraco 在 Azure 上的工作方式以及它是否会对您的站点产生任何影响。Umbraco 加速器曾经是在 Azure 实例之间同步 umbraco.config 文件所必需的。每个实例运行一个单独的 Umbraco 网站，它们必须有一种可以相互交谈的方式。加速器镜像实例之间的缓存文件。

假设您的代码是默认安装，并且在您之前没有被其他人处理过，那么将您的站点减少到单个实例可能是一个想法。现在看看它是否在重新启动网站后生成缓存。最后，您可以升级站点以查看它是否重新生成缓存。

这些问题通常总是由某种配置问题引起的。我还记得您可以使用[Windows Azure SDK](http://msdn.microsoft.com/en-gb/library/windowsazure/gg433055.aspx)模拟 Azure 部署，您可以使用它来检查缓存的迹象。祝你好运。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-30T16:47:12.233

我不确定 Umbraco 加速器或非网站项目，但我们目前正在 Azure 网站上运行 Umbraco，App_Data\umbraco.config 来来往往，网站无法解释地工作。如果有人有答案，我想找出这背后的原因？？

# asp.net - SSRS 报告查看器：请求失败，HTTP 状态 401

> ID：14587453
> 
> 赞同：2
> 
> 时间：2013-01-29T16:26:54.847
> 
> 标签：asp.net, .net, reporting-services, ssrs-2008, reportviewer

我花了很多时间试图解决这个问题，但没有运气 - 所以我会尝试在这里发布这个问题。

我在同一台服务器上运行 2 个 ASP.NET 网站。这两个网站都在 IIS 7.5 + .NET 4 上运行。这些网站使用 SSRS 报告查看器来显示来自另一台服务器的报告。

我们最近将网站和 RS 都移到了新服务器上（从 RS 2005 切换到 RS 2008 并从 IIS 7.0 切换到 IIS 7.5）。但是，在迁移到新服务器后，其中一个网站无法查看报告服务，因为我们收到以下错误：

```
request failed with HTTP status 401 
```

奇怪的是，报告查看器在两个网站中的配置方式*完全相同*（只是在两者之间复制粘贴）。此外，使用“工作网站”，我们能够查看属于这两个网站的报告 - 而使用另一个网站，我们无法查看任何报告。

在这两种情况下，授权如下所示：

**证书：**

```
[Serializable]
public sealed class ReportServerCreditentials : IReportServerCredentials
{
    public WindowsIdentity ImpersonationUser
    {
        get { return null; }
    }

    public ICredentials NetworkCredentials
    {
        get
        {
            string userName = ConfigurationManager.AppSettings["ReportViewerUser"];
            string password = ConfigurationManager.AppSettings["ReportViewerPassword"];
            string domain = ConfigurationManager.AppSettings["ReportViewerDomain"];

            return new NetworkCredential(userName, password, domain);
        }
    }

    public bool GetFormsCredentials(out Cookie authCookie, out string userName, out string password, out string authority)
    {
        authCookie = null;
        userName = null;
        password = null;
        authority = null;

        return false;
    }
} 
```

**报告查看器使用情况**

```
public partial class ReportServicesViewer : System.Web.UI.Page
{
    protected void Page_Init(object sender, EventArgs e)
    {
        if (!IsPostBack)
        {
            string reportingFolder = ConfigurationManager.AppSettings["ReportingFolder"];

            showReport(string.Format("/{0}/{1}", reportingFolder, Request.QueryString["report"]));
        }
    }

    private void showReport(string reportPath)
    {
        RevReport.ServerReport.ReportServerUrl = new Uri(ConfigurationManager.AppSettings["ReportServer"]);
        RevReport.ServerReport.ReportServerCredentials = new ReportServerCreditentials();
        RevReport.ServerReport.ReportPath = reportPath;
    }
} 
```

在 aspx 中：

```
<rsweb:ReportViewer ID="RevReport" runat="server" Height="100%" Width="100%" Font-Names="Verdana" Font-Size="8pt" ProcessingMode="Remote" ZoomMode="Percent" ZoomPercent="100"></rsweb:ReportViewer> 
```

**其他意见**

有一次，我们尝试使用 Fiddler 监控网站和 RS 之间的流量，但不知何故，这种通信在这种情况下确实有效。

但是，当我稍后尝试此操作时，Fiddler 给出了以下响应：

```
[Fiddler] The socket connection to <servername> failed. <br />ErrorCode: 10061\. <br />No connection could be made because the target machine actively refused it 10.0.0.17:443 
```

我不确定如何准确解释这一点，因为我们没有将 SSL 用于网站 <-> RS 通信。

任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-12-04T20:03:11.780

当我们构建新的 SSRS 服务器时，我遇到了类似的问题。Web 应用程序无法连接到报表服务器。我能够通过执行以下操作来解决问题：

1.  在服务器上启用 Kerberos 身份验证
2.  在服务器上设置 spn（服务器主体名称）
3.  在 Web 应用程序中启用模拟

# windows - 如何停止我的应用程序在任务栏上显示？

> ID：14587456
> 
> 赞同：5
> 
> 时间：2013-01-29T16:27:07.147
> 
> 标签：windows, delphi, winapi, delphi-xe2, vcl

我的应用程序有一个选项供用户仅在系统托盘中运行，而不是在任务栏中运行。当我的应用程序由 Delphi 6 构建时，这工作正常。切换到 Delphi XE2 后，它不再起作用。

我已经搞砸了一些，我在 Windows 7 上运行它，但是在 Windows XP 上运行时我仍然遇到问题。该应用程序正确地从任务栏中隐藏，并显示在系统托盘中。但是当我创建并显示任何其他表单时，该图标会显示在 Windows XP 中。

```
procedure TfrmAppointment.HideWindowFromTaskbar;
var
   TaskbarList: ITaskbarList;
begin
Application.MainFormOnTaskBar := False;

// Windows 7 seems to behave differently.  This seems to fix it.
if (CheckWin32Version(6, 1)) then
    begin
    // We are in Win7, and we requested the tray.
    TaskbarList := CreateComObject(CLSID_TaskbarList) as ITaskbarList;
    TaskbarList.HrInit;
    TaskbarList.DeleteTab(Application.Handle);
    end
else
   begin
   // Previous code from D6 days
   ShowWindow(Application.Handle, SW_HIDE);
   SetWindowLong(Application.Handle, GWL_EXSTYLE, GetWindowLong(Application.Handle, GWL_EXSTYLE) or WS_EX_TOOLWINDOW);
   ShowWindow(Application.Handle, SW_SHOWNOACTIVATE);
   end;
end; 
```

如果用户选择在系统托盘中显示应用程序的选项，则运行该代码。它适用于我测试过的所有 Windows 版本。但是，在 Windows XP 上，当我显示任何子窗体时，应用程序会立即显示在任务栏中。在 Windows 7 中一切正常。

有什么我想念的想法吗？

我应该补充一点，我知道这可能与[Hide the Main Form in a Delphi 2009 Application 的](https://stackoverflow.com/questions/681621/hide-the-main-form-in-a-delphi-2009-application?rq=1)问题相同，但是我已经设置了 MainFormOnTaskBar，因此该答案似乎不适用。

[编辑：] 更具体地说，我在这里添加更多信息。该应用程序有两种模式：在任务栏中显示和在系统托盘中显示。

第一种模式与任何普通应用程序相同。该应用程序仅存在于任务栏中。它最小化到任务栏。它从任务栏恢复。

第二种模式的行为完全相同，但该任务栏图标仅存在于系统托盘中。因此，当用户最小化应用程序时，我截取该消息，获取“Shell_TrayWnd”/“TrayNotifyWnd”的 TRect，并调用 DrawAnimatedRects() 来模拟托盘的最小化。然后我隐藏主窗体。在来自系统托盘的消息中，我反向绘制相同的动画矩形，并使其再次可见。虽然表单可见，但它不会显示在任务栏中。

这在所有 Windows 版本中都可以正常工作。

我遇到的具体问题是，当显示任何其他表单时，Windows XP 正在任务栏中创建应用程序图标。Windows 7 不这样做。因此，如果 Windows XP 用户只使用应用程序主窗体，则不会出现问题，两种查看模式都可以正常工作。如果他们打开另一个窗口，则应用程序图标会出现，并且即使在该窗口关闭后也会保留在那里。Windows 7 不这样做，并且图标保持消失。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T16:36:05.297

你应该设置

```
Application.MainFormOnTaskBar := True; 
```

在您的 .dpr 文件中，然后永远不要修改该设置。

然后，当您想从任务栏中删除主窗体时，您只需编写

```
MainForm.Hide; 
```

当您需要再次隐藏主窗体时，请编写

```
MainForm.Show; 
```

就是这样。

自然地，您会希望显示和隐藏通知区域图标以及隐藏和显示主窗体。

* * *

中的代码`HideWindowFromTaskbar`不是必需的，您应该将其删除。当您的应用程序处于`MainFormOnTaskBar`equals`True`模式时，主窗体是一个未拥有的顶级窗口。因此，只要它可见，它就会出现在任务栏上。因此，您可以简单地将主窗体从任务栏中删除。

应用程序中的其他窗体将拥有顶级窗口。通常，它们将归您的主窗体所有。由于是所有者，它们不会出现在任务栏上。

总的来说，您应该尽量避免摆弄窗口样式。您通常可以使您的应用程序按照您需要的方式运行，而无需这样做。更重要的是，如果您必须调整窗口样式，您必须在`CreateParams`. 这样，当重新创建窗口时，窗口样式将保持不变。但我重申，尽可能避免修改窗口样式。

关键的 MSDN 参考资料是：

*   [窗口功能](http://msdn.microsoft.com/en-us/library/windows/desktop/ms632599.aspx)。
*   [任务栏](http://msdn.microsoft.com/en-us/library/windows/desktop/cc144179.aspx)。

* * *

这是我可以制作的最小程序来证明这一点：

```
program MainFormHiding;

uses
  Forms, StdCtrls;

var
  MainForm, OtherForm: TForm;
  Button: TButton;

type
  TEventHandlerClass = class
    class procedure ToggleMainFormVisible(Sender: TObject);
  end;

class procedure TEventHandlerClass.ToggleMainFormVisible(Sender: TObject);
begin
  MainForm.Visible := not MainForm.Visible;
end;

begin
  Application.MainFormOnTaskbar := True;
  Application.CreateForm(TForm, MainForm);
  OtherForm := TForm.Create(Application);
  MainForm.Caption := 'Main Form';

  OtherForm.Visible := True;
  OtherForm.Caption := 'Other Form';
  Button := TButton.Create(OtherForm);
  Button.Caption := 'Toggle';
  Button.Parent := OtherForm;
  Button.OnClick := TEventHandlerClass.ToggleMainFormVisible;

  Application.Run;
end. 
```

* * *

在评论中，您明确表示您希望能够隐藏任务栏窗口而不隐藏主窗体。在这种情况下，我建议您设置`MainFormOnTaskbar`为`False`. 这意味着这`Application.Handle`将是与任务栏按钮关联的窗口。然后，您可以隐藏该窗口以将其从任务栏中删除。

您现在需要`PopupParent`为任何辅助表单显式设置。如果您希望这些窗口归主窗体所有，那么您可以设置它。

这是针对这种情况调整的示例：

```
program MainFormHiding;

uses
  Forms, StdCtrls, Windows;

var
  MainForm, OtherForm: TForm;
  Button: TButton;

type
  TEventHandlerClass = class
    class procedure ToggleTaskbarButton(Sender: TObject);
  end;

class procedure TEventHandlerClass.ToggleTaskbarButton(Sender: TObject);
begin
  if IsWindowVisible(Application.Handle) then
    ShowWindow(Application.Handle, SW_HIDE)
  else
    ShowWindow(Application.Handle, SW_SHOW);
end;

begin
  Application.MainFormOnTaskbar := False;
  Application.CreateForm(TForm, MainForm);
  OtherForm := TForm.Create(Application);
  OtherForm.PopupParent := MainForm;
  MainForm.Caption := 'Main Form';
  Application.Title := MainForm.Caption;

  OtherForm.Visible := True;
  OtherForm.Caption := 'Other Form';
  Button := TButton.Create(OtherForm);
  Button.Caption := 'Toggle';
  Button.Parent := OtherForm;
  Button.OnClick := TEventHandlerClass.ToggleTaskbarButton;

  Application.Run;
end. 
```

运行此程序并单击切换按钮。现在您将看到主窗体和其他窗体显示。而且任务栏中什么都没有。我包括了切换按钮，以表明您可以在程序运行时在两种操作模式之间切换。无需重新启动它。

这里的关键是使可见表单以外的窗口成为与任务栏关联的窗口。完成此操作后，您可以通过显示和隐藏该窗口再次控制任务栏的存在。在这种情况下，该窗口是应用程序窗口，`Application.Handle`. 因为那是任务栏上的窗口，所以你需要设置它的`Title`属性来控制它的文本。

最后，我再次强调，与任务栏的交互最好通过窗口所有者和可见性来控制。`ITaskbarList`始终使用这些方法而不是扩展窗口样式等来搜索解决方案。

* * *

**更新**

希望关于这个主题的最后一句话。正如您所注意到的，当主窗体被最小化时，上面的代码表现不佳。发生这种情况时，应用程序窗口将再次可见，并再次出现在任务栏中。

在抑制这种行为方面，我不太确定自己。出现这种行为是因为`TApplication.Minimize`当主窗体最小化时显示应用程序句柄的代码。我拥有的最佳解决方案是将主窗体最小化转换为隐藏。

```
procedure WMSysCommand(var Msg: TWMSysCommand); message WM_SYSCOMMAND;

....

procedure TMainForm.WMSysCommand(var Msg: TWMSysCommand);
begin
  if (Msg.CmdType and $FFF0)=SC_MINIMIZE then 
  begin
    Hide;
    exit;
  end;
  inherited;
end; 
```

`OnMinimize`或者另一种方法是通过`TApplication`.

```
class procedure TEventHandlerClass.ApplicationMinimize(Sender: TObject);
begin
  ShowWindow(Application.Handle, SW_HIDE);
end; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T20:43:44.990

大卫的回答是正确的。它有几个小问题，但我用它运行并让一切正常。在我弄清楚这一点时，他发布了他的最后一次更新。我在这里发布了一些额外的代码示例，并接受了他的回答。首先我分配：

```
Application.OnMessage := AppMessage; 
```

然后程序如下：

```
procedure TfrmAppointment.AppMessage(var Msg: TMsg; var Handled: Boolean);
begin
// This first check decides if we are minimizing via the upper right button OR
// The context menu in the upper left hand corner of the window. 
// Minimizing twice restores, so this can be a restore as well.
if ((((Msg.message = WM_NCLBUTTONDOWN) and (Msg.wParam = HTMINBUTTON)) or
     ((Msg.message = WM_SYSCOMMAND) and (Msg.wParam = SC_MINIMIZE))) and
    (Screen.ActiveForm = Self)) then
   begin
   // This function is defined as (bool, bool) where the variables are:
   // Param1: Mimimizing (true), Restoring (false)
   // Param2: Draw animation rectangles for doing this or not
   Handled := MinimizeOrRestore(Self.WindowState <> wsMinimized, True);
   end
else if ((Msg.message = WM_SYSCOMMAND) and 
         (Msg.wParam = SC_RESTORE) and 
         (Screen.ActiveForm = Self)) then
   begin
   // Specifically, restore has been asked for
   Handled := MinimizeOrRestore(False, True); // Minimize with animation
   end
else if ((Msg.message = WM_SYSCOMMAND) and (Msg.wParam = SC_CLOSE)) then
   begin
   // The user just used the system menu to close the application
   ApplicationIsClosing := True; // see below for this
   end
end; 
```

然后在我的 FormCloseQuery 中，检查“ApplicationIsClosing”是否为真。如果它是 FALSE，那么我知道用户点击了 X，我只需最小化调用此处引用的其他函数的应用程序。如果是真的，我允许关闭。

最后，MinimizeOnRestore 获取窗体本身的 TRect，以及系统托盘，然后执行 DrawAnimatedRects。这在 Vista 或更高版本上并不总是有效，但也不会出错。接下来，它隐藏主应用程序窗口或使其可见。除非遇到错误，否则它始终返回 true。然后它返回假。

# javascript - 如何用 foreach/each 替换为相同的类名？

> ID：14587460
> 
> 赞同：3
> 
> 时间：2013-01-29T16:27:20.600
> 
> 标签：javascript, jquery

我必须将纯文本网址转换为`<a href=""></a>`. 我找到了一个有效的 JS 代码。我的问题是我的 HTML 结构需要我修改代码，将当前代码放在 foreach 中。

我的html：

```
<div class="content">Some text with links</div>
<div class="content">Some text with links</div>
<div class="content">Some text with links</div>
<div class="content">Some text with links</div>
<div class="content">Some text with links</div>
<div class="content">Some text with links</div> 
```

JS：

```
$(function()
{
    var re = /(https?:\/\/(([-\w\.]+)+(:\d+)?(\/([\w/_\.]*(\?\S+)?)?)?))/ig;    
    $('.content').html($('.content').html().replace(re, '<a href="$1" title="">$1</a>'));
}); 
```

上面的 JS 可以工作，但会用相同的内容填充所有 div。我试图将此代码放在 foreach 中，但失败了。我糟糕的 JS 知识让我在 SO 上问这个问题。

您能否提供一些有关如何将此代码放入 foreach 循环的线索？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:29:07.050

`.html()`for 检索只选择第*一个*匹配的元素。不过，您可以很容易地做到这一点，因为像这样`.html`的函数可以接受一个函数参数来单独迭代每个选定的元素。

```
$(".content").html(function (_, html) {
   return html.replace(re ...etc...);
}); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-29T16:29:33.433

类似`.html`的函数允许传递函数。`.each`然后在内部完成一个循环，此外，您还获得了传递的当前值：

```
$('.content').html(function(i, current) {
  return current.replace(re, '<a href="$1" title="">$1</a>');
}); 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T16:29:38.967

如果我正确理解了你的问题，你需要遍历每个`.content`div，试试这个：

```
$('.content').each(function() {
    var $content = $(this);
    var re = /(https?:\/\/(([-\w\.]+)+(:\d+)?(\/([\w/_\.]*(\?\S+)?)?)?))/ig;    
    $content.html($content.html().replace(re, '<a href="$1" title="">$1</a>'));
}); 
```

# mysql - MySQL 按当年的月份和日期分组

> ID：14587464
> 
> 赞同：-1
> 
> 时间：2013-01-29T16:27:32.987
> 
> 标签：mysql, group-by

我想知道这是否可能：我有一些数据，其中有一个日期时间字段。现在我想做一个 sql 查询，我可以按月和每个月按天进行分组。像这样的东西：

```
Month   day    COUNT(*)
1       1         200
1       2         300
1       3         500
2       1         600
2       2         0 
```

为什么我需要这个？我需要进行 sql 查询来制作图表 XY 并显示填充此要求：SELECT series,value1,value2 FROM...WHERE...GROUP BY...ORDER BY。

所以我想让每个月都成为一个SERIE，然后每天都是value1，count value 2

希望每个人都能理解我的机器人问题...

最好的问候和 tks 在先进

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:30:11.350

这就是你要找的全部吗？

```
SELECT MONTH(m), DAY(d), COUNT(*)
FROM sparkles
WHERE YEAR(y) = 2013
GROUP BY MONTH(m), DAY(d) 
```

如果您的日期有间隔，您将需要使用日期查找表。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:30:56.980

使用`MONTH()`和`DAYOFMONTH()`函数。

这是文档：[dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html](http://dev.mysql.com/doc/refman/5.5/en/date-and-time-functions.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:32:05.703

尝试这个：

```
SELECT Month, Day, Count(*) FROM yout_table group by Month, Day 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-29T20:50:24.933

首先，您需要一张今年每天都能容纳的表格：

```
CREATE TABLE DaysThisYear
(
    dt datetime not null,
    mm int, dd int,
    primary key (dt)
);
INSERT INTO DaysThisYear (dt,mm,dd)
SELECT ymd,MONTH(ymd),DAY(ymd) FROM
(SELECT IFNULL(ymd + INTERVAL 0 SECOND,'1980-01-01 00:00:00') ymd
FROM (SELECT CONCAT(yy,'-',SUBSTR(mm+100,2),'-',SUBSTR(dd+100,2)) ymd,yy
FROM (SELECT 1 dd UNION SELECT 2 UNION SELECT 3 UNION SELECT  4
UNION SELECT  5 UNION SELECT  6 UNION SELECT  7 UNION SELECT  8
UNION SELECT  9 UNION SELECT 10 UNION SELECT 11 UNION SELECT 12
UNION SELECT 13 UNION SELECT 14 UNION SELECT 15 UNION SELECT 16
UNION SELECT 17 UNION SELECT 18 UNION SELECT 19 UNION SELECT 20
UNION SELECT 21 UNION SELECT 22 UNION SELECT 23 UNION SELECT 24
UNION SELECT 25 UNION SELECT 26 UNION SELECT 27 UNION SELECT 28
UNION SELECT 29 UNION SELECT 30 UNION SELECT 31 UNION SELECT 32) AAA,
(SELECT YEAR(NOW()) yy,mm FROM
(SELECT 1 mm UNION SELECT 2 UNION SELECT 3 UNION SELECT 4 UNION SELECT 5
UNION SELECT 6 UNION SELECT 7 UNION SELECT 8 UNION SELECT 9 UNION
SELECT 10 UNION SELECT 11 UNION SELECT 12) M) BBB) AA) A
WHERE YEAR(ymd) <> 1980
ORDER BY ymd; 
```

要查看今年的每一天都已加载，请运行以下命令：

```
SELECT * FROM DaysThisYear; 
```

现在，如果您有一个包含 DATETIME 列的表，您可以将`DaysThisYear`表连接到它

例如，假设您的表格如下所示：

```
CREATE TABLE mydata
(
    id int not null auto_increment,
    dt DATETIME,
    .
    .
    .
    PRIMARY KEY (id),
    KEY dt (dt)
); 
```

您可以执行以下操作：

```
SELECT A.mm,A.dd,SUM(IF(ISNULL(B.mm),0,1)) mmdd_count
FROM DaysThisYear A LEFT JOIN
(SELECT MONTH(dt) mm,DAY(dy) dd FROM mydata) B
ON A.mm=B.mm AND A.dd=B.dd; 
```

试试看 ！！！

# css - 取决于实体属性值的动态 css 类

> ID：14587467
> 
> 赞同：0
> 
> 时间：2013-01-29T16:27:40.200
> 
> 标签：css, asp.net-mvc, asp.net-mvc-4

我有一个包含 Status 属性的 Orders 模型。根据Status的值，我想设置dom中多个元素的CSS。

```
<span class = "green">ORDERED</span>
<span class = "orange">SHIPPED</span>
<span class = "gray">RECEIVED</span> 
```

我想在 Details 视图中根据 Order.Status 的值设置那些绿色/橙色/灰色类。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T16:31:24.383

您可以编写一个自定义助手，它将根据 Status 值返回正确的 CSS：

```
public static class Htmlextensions
{
    public static string GetStatusCss(this HtmlHelper html, string status)
    {
        if (string.Equals(status, "ORDERED", StringComparison.OrdinalIgnoreCase))
        {
            return "green";
        }
        else if (string.Equals(status, "SHIPPED", StringComparison.OrdinalIgnoreCase))
        {
            return "orange";
        }
        return "gray";
    }
} 
```

然后你可以在视图中调用这个助手来获取正确的 CSS 类：

```
<span class="@Html.GetStatusCss(Model.Status)">
    @Html.DisplayFor(x => x.Status)
</span> 
```

# jquery - asp.net 3.5 webservice 不会返回 JSON

> ID：14587469
> 
> 赞同：0
> 
> 时间：2013-01-29T16:27:48.057
> 
> 标签：jquery, asp.net, web-services, asmx, webmethod

我在网上做了一些搜索，似乎无法弄清楚这一点。如何强制响应只是 JSON？

**网络配置**

```
<httpHandlers>
            <remove path="*.asmx" verb="*" />
            <add path="*.asmx" verb="*" validate="false"
                 type="System.Web.Script.Services.ScriptHandlerFactory, 
                 System.Web.Extensions, Version=3.5.0.0,
                 Culture=neutral, PublicKeyToken=31bf3856ad364e35" />

</httpHandlers> 
```

**阿贾克斯**

```
function get_data() {            
            var objdata = new Object;
            objdata.tool = '1';
            objdata.product = 'Something';
            objdata.details = '9';
            objdata.bogus = 'should not pass validation';
            var server = 'http://crossdomainserver:87';
            var webMethod = '/LogInfo.asmx/LogInfo?';
            var url = server + webMethod + "tool=" + objdata.tool + "&" +
                "product=" + objdata.product + "&" +
                "details=" + objdata.details + "&" +
                "bogus=" + objdata.bogus;
            $('#url').html("<p>" + url + "</p>");

            $.ajax({
                url: url,
                cache: false,
                dataType: "jsonp",
                contentType: "application/json; charset=utf-8",
                success: function (data) {
                    $('#get').html("<p>" + data + "</p>");
                },
                error: function (e) {

                }
            });

            $('#result').html("<p>" + result.statusText + "</p>");
        } 
```

**网络服务**

```
' To allow this Web Service to be called from script, using ASP.NET AJAX, uncomment the following line.
<System.Web.Script.Services.ScriptService()> _
<System.Web.Services.WebService(Namespace:="http://tempuri.org/")> _
<System.Web.Services.WebServiceBinding(ConformsTo:=WsiProfiles.BasicProfile1_1)> _
<ToolboxItem(False)> _
Public Class LogInfo
    Inherits System.Web.Services.WebService

    <WebMethod()> _
    <ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
    Public Function LogInfo() As String
     'do database/error logic here
     Return jsonreturn.ToString
    End Function

    End Class 
```

**回复**

```
<?xml version="1.0" encoding="utf-8"?>
<string xmlns="http://tempuri.org/">{"tool":"1","product":"Something","details":"9","user":"username","systime":"1/29/2013 10:20:50 AM","site":"Somewhere, AZ","team":"000000000","result":"1"}</string> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:33:53.037

JSON 是不可能的，`.asmx`您需要使用`WCF`Web 服务以 json 格式返回数据。

阅读本文了解[使用 WCF 和 .NET Framework 3.5 进行 HTTP 编程](http://msdn.microsoft.com/en-us/magazine/cc135976.aspx)

# c++ - 为什么不将成员变量传递给修改的函数？

> ID：14587472
> 
> 赞同：5
> 
> 时间：2013-01-29T16:27:53.543
> 
> 标签：c++, class

我仍在探索 C++，试图弄清楚它是如何工作的，并遇到了令我困惑的事情。

我有一个只包含 a`list<string>`并具有一些成员函数的类

```
class String_list {
      public:
            String_list(istream&);
            //other functions
            list<string> listing;
}; 
```

我写了我的构造函数来使用非成员函数

```
String_list::String_list(istream& in) { get_strings(in, listing); } 
```

和

```
istream& get_strings(istream& in, list<string> lstring)
{
  if(in) {
       lstring.clear();

       string word;

       while (in >> word) 
               lstring.push_back(word);

       in.clear();
       }
  return in;
 } 
```

问题是，虽然该`get_string`函数似乎可以工作，但它并没有改变`listing`我传递给它的成员变量。

我可以通过更改为 来创建`get_strings`一个带有一个参数的成员函数来使其工作，所以我假设从构造函数传递列表由于某种原因不起作用，或者非成员函数不能更改成员变量，但这些似乎是我的编译器很容易掌握的东西。`(istream& in)``lstring``listing`

我的编译器没有发现代码有任何问题，只是当我运行成员列表始终`.size()`为 0 的可执行文件时。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-01-29T16:29:36.583

您应该通过`lstring`引用传递：

```
istream& get_strings(istream& in, list<string>& lstring) 
```

代码按照编写的方式编译和工作：传递 lstring 的*值*，从而复制它。所有更改都在临时对象上进行，然后在对象被销毁时丢弃。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2013-01-29T16:29:18.487

您正在将成员变量的副本传递给函数。本地副本被修改，而成员变量没有。

更改`get_strings`函数的签名以引用您的列表对象，这将起作用：

```
istream& get_strings(istream& in, list<string>& lstring)
{
   // ...
} 
```

尽管这会破坏封装，但在您的情况下（直接将成员变量暴露给该函数）。更好的方法可能是让`get_strings`函数返回它填充的列表的副本，然后将其分配给初始化列表中的类成员。像这样：

```
list<string> get_strings(istream& in)
{
   list<string> r;
   // ...
   return r;
} 
```

然后你的构造函数：

```
StringList::StringList(istream& in) : listing(get_strings(in))
{
   // ...
} 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-01-29T16:36:15.413

在 C++ 中，您是按值传递，而不是按引用传递，除非您明确地这样做。所以如果你声明你的函数：

```
istream& get_strings(istream& in, list<string> lstring) 
```

then`lstring`是按值传递的，这意味着您没有使用在函数调用中传递的同一个对象。您只需制作此对象的副本，即使您在函数体中修改它，您也只修改此副本。

如果你想修改你传递的对象，你应该通过引用传递它，你可以通过使用来实现`&`：

```
istream& get_strings(istream& in, list<string>& lstring) 
```

# powershell - 路径变量在单个 Powershell 脚本中似乎不一致

> ID：14587482
> 
> 赞同：1
> 
> 时间：2013-01-29T16:28:21.613
> 
> 标签：powershell, path

我正在运行**我**认为是一个相对简单的脚本：

```
$txtPath = "c:\users\xxxxxx\desktop\cgc\tx\" 
$srcfiles = Get-ChildItem $txtPath -filter "*.txt*"

ForEach($txtfile in $srcfiles) { 
        Write-Host $txtfile
        Get-Content $txtfile
} 
```

我得到以下输出：

```
Automatic_Post-Call_Survey_-_BC,_CC.txt
Get-Content : Cannot find path 'C:\users\x46332\desktop\cgc\Automatic_Post-Call_Survey_-_BC,_CC.txt' because it does no
t exist.
At C:\users\x46332\desktop\cgc\testcount2.ps1:34 char:13
+     Get-Content <<<<  $txtfile
    + CategoryInfo          : ObjectNotFound: (C:\users\x46332...ey_-_BC,_CC.txt:String) [Get-Content], ItemNotFoundEx
   ception
    + FullyQualifiedErrorId : PathNotFound,Microsoft.PowerShell.Commands.GetContentCommand 
```

这是`Write-Host $txtfile`紧随其后的输出`Get-Content $txtfile`，`get-content`似乎是我问题的核心。

当我注释掉该`Get-Content`行时，脚本会生成一个文件名列表到控制台。这向我表明，`$txtPath`已正确定义。但是，我添加`Get-Content`了相同的文件/相同的变量，并且由于某种原因，`\tx`路径的一部分从搜索字符串中消失了。我的文件名打印出来了，但是`Get-Content`找不到刚刚打印的文件名的路径。

我怀疑“目录不存在”错误并不是目录不存在。那我应该看什么？我的代码中没有太多空间可以隐藏错误，但我找不到它......想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:00:42.990

Get-Content 需要完整路径，例如：

```
Get-Content $txtFile.FullName 
```

当您指定 时`Get-Content $txtFile`，PowerShell 会尝试将参数 $txtFile 强制转换为所需的参数 Path，为此，它会将 FileInfo 对象强制转换为字符串。这个过程只产生文件的名称。

另一种方法是：

```
$txtFile | Get-Content 
```

# php - CodeIgniter 的 $this->image_lib->resize() 函数是否返回新的图像大小？

> ID：14587485
> 
> 赞同：1
> 
> 时间：2013-01-29T16:28:34.810
> 
> 标签：php, codeigniter, image-processing, codeigniter-2

CodeIgniter 有一个很好的图像处理类。我正在设置将图像调整为最大 200x200 像素，并启用“master_dim”以保持纵横比相同。但是，我看不到在完成后获取图像新大小的方法，以便我可以将其存储在数据库中。它不这样做吗？还是我必须使用 PHP 的 getimagesize() 来做到这一点？

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:42:44.440

`$this->image_lib->resize()`返回`TRUE`或`FALSE`。

调整大小后，您将需要`getimagesize`在新图像上使用以获取其大小。

# windows - 检查文件写入权限时，FILE_ATTRIBUTE_READONLY 和使用访问控制列表有什么关系？

> ID：14587491
> 
> 赞同：1
> 
> 时间：2013-01-29T16:28:48.740
> 
> 标签：windows, winapi, file-io, dos

例如，一方面，我可以检查

*   如果可以通过为用户建立安全标识符来写入文件，
*   设立受托人，
*   获取离散的访问控制列表和
*   然后获取访问掩码
*   最后检查它是否包含 FILE_GENERIC_WRITE 位。

另一方面，我可以

*   调用 GetFileAttributes 和
*   查看返回值是否 == FILE_ATTRIBUTE_READONLY

对于后一种情况，如果设置了此属性，我想这意味着我不必为 ACL 的东西而烦恼。还是我遗漏了其他一些微妙的点？

是不是GetFileAttributes返回DOS信息而访问控制列表功能是较新的windows api？我应该同时检查两者吗？

干杯，

本。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:03:30.790

文件属性与 ACL 无关。

您可以拥有一个您可以拥有完全权限的“只读”文件，以及您根本无权访问的非只读文件。您还可以拥有具有完全访问权限的非只读文件，但由于只读媒体而无法写入。此外，对文件有（写）访问权限的任何人也可以删除只读标志。

查看是否可以写入文件的最佳方法是尝试写入（或至少打开它进行写入）。

# c# - 使用 StreamWriter 写入文件比通过慢速网络复制文件慢得多

> ID：14587494
> 
> 赞同：8
> 
> 时间：2013-01-29T16:28:58.893
> 
> 标签：c#, performance, networking, streamwriter

我有一个程序试图将大量文​​本写入海外远程服务器上的文件，该服务器的网络连接速度很慢。

使用以下代码，其中`outputFileContent`a `StringBuilder`：

```
using (var outfile = new StreamWriter(myRemoteFilePath))
{
    outfile.Write(outputFileContent.ToString());
} 
```

运行需要很长时间（几分钟），而如果我先写入本地文件，然后将其复制到远程位置，则速度要快得多（20-30 秒）：

```
string tempFilePath = Path.GetTempFileName();
using (var outfile = new StreamWriter(tempFilePath))
{
    outfile.Write(outputFileContent.ToString());
}

System.IO.File.Copy(tempFilePath, myRemoteFilePath, true) 
```

知道为什么会这样吗？我唯一的猜测是这与通过网络进行缓冲有关，或者可能是因为流编写器不知道它需要提前多大。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-29T17:41:45.657

如果您使用默认缓冲区大小创建 StreamWriter，则底层 SMB 协议将以不大于 4096 字节的块发出写入请求，这意味着通过网络进行大量往返。您可以将 StreamWriter 的缓冲区大小增加到最大 64k 以减少往返次数：

```
using (var outfile = new StreamWriter(myRemoteFilePath, false, Encoding.ASCII, 0x10000)) 
```

在任何情况下，将缓冲区大小增加到超过 64k 都无济于事，因为底层 SMB 协议不支持超过 64k 的缓冲区长度。请注意，直接文件复制仍然使用 SMB 协议，因此从网络流量的角度来看，除了缓冲区大小之外，操作之间几乎没有区别。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-29T16:34:38.127

我不是安全专家，但在我看来，这与权限问题最相关。

每次您将某些内容写入远程服务器上的磁盘时，都会针对执行该操作的用户检查权限。写的许可，自然而然。

在这种情况下，而不是副本，该控制只被执行。所以它*要*快得多。

事实上，为了证明这一点，您可以尝试通过网络复制多个文件，然后通过网络复制 ZIP 文件（在压缩状态下具有相同数量的内存）。在第二种情况下，它会*快得多*，因为权限控制只执行一次，对于单个 ZIP 文件。

希望这可以帮助。

# java - Javapns 给出 InvalidDeviceTokenFormatException

> ID：14587496
> 
> 赞同：1
> 
> 时间：2013-01-29T16:29:00.437
> 
> 标签：java, ios, push-notification, apple-push-notifications

我正在使用 Java PNS 发送通知。但是，我收到以下错误：

```
javapns.devices.exceptions.InvalidDeviceTokenFormatException: Device Token has a length of [140] and not the required 64 bytes!eror has occusred:Device Token has a length of [140] and not the required 64 bytes!

        at javapns.devices.implementations.basic.BasicDevice.validateTokenFormat(BasicDevice.java:67)
        at javapns.devices.implementations.basic.BasicDevice.<init>(BasicDevice.java:49)
        at javapns.devices.implementations.basic.BasicDevice.<init>(BasicDevice.java:37) 
```

这就是我创建设备列表的方式：

```
List<Device> newList = new ArrayList<Device>();
            Iterator<String> tempItr = v.iterator();
            while (tempItr.hasNext()) {
                String myDeviceToken = (String) (vItr.next());
                try {
                    BasicDevice device = new BasicDevice(myDeviceToken);

                    newList.add(device);

                } catch (Exception e) { // error=2; // notification issue
                    System.out.println("eror has occusred:" + e.getMessage());
                    e.printStackTrace();

                }
            } 
```

为什么它给出无效令牌格式的任何线索：

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:46:40.317

This is wrong :

```
String myDeviceToken = (String) (vItr.next()); 
```

It should be :

```
String myDeviceToken = vItr.next().getToken(); 
```

EDIT : I was assuming that v was `List<Device>`, but you didn't specify the type of v.

# sql - 如何为每一行调用程序？

> ID：14587503
> 
> 赞同：0
> 
> 时间：2013-01-29T16:29:18.423
> 
> 标签：sql, sql-server, sql-server-2008

我有一个 Microsoft SQL Server R2 2008。我有生以来第一次看到它。
我有sql程序：

```
DECLARE @RC int
DECLARE @Id uniqueidentifier
DECLARE @Segment_ID uniqueidentifier
DECLARE @SDate datetime
DECLARE @EDate datetime
DECLARE @withBig bit
DECLARE @withKm bit
DECLARE @withGeo bit
DECLARE @withDescr bit

-- TODO: задайте здесь значения параметров.

EXECUTE @RC = [Request_BusStation] 
   @Id
  ,@Segment_ID
  ,@SDate
  ,@EDate
  ,@withBig
  ,@withKm
  ,@withGeo
  ,@withDescr
GO 
```

我如何理解它只是调用程序而不是本身。但是程序太少了，无法在这里复制。并有一张桌子：

```
 CREATE TABLE [BusStation](
[Id] [uniqueidentifier] NOT NULL,
[Segment_ID] [uniqueidentifier] NOT NULL,
[Dist] [decimal](18, 4) NOT NULL,
[Kod_Spr012] [smallint] NOT NULL,
[Square] [decimal](18, 6) NULL,
[OperationStartDate] [date] NULL,
[BallanceCost] [decimal](18, 6) NULL,
[DepreciatedCost] [decimal](18, 6) NULL,
[ChargesNorm] [decimal](18, 6) NULL,
[DocumentName] [varchar](100) NULL,
[DocumentNum] [varchar](100) NULL,
[DocumentDate] [date] NULL,
[Authority] [varchar](100) NULL,
[Kod_Spr091] [smallint] NOT NULL,
[HasWaysideStop] [bit] NOT NULL,
[HasLanding] [bit] NOT NULL,
[HasSpeedTransitArea] [bit] NOT NULL,
[LenSpeedTransitArea] [decimal](18, 6) NULL,
[YearBuilt] [smallint] NULL,
[YearMajorOverhaul] [smallint] NULL,
[Kod_Spr019] [smallint] NOT NULL,
[TechCond] [varbinary](max) NULL,
[LandCont] [varbinary](max) NULL,
[LandContDate] [date] NULL,
[LandContStartDate] [date] NULL,
[LandContEndDate] [date] NULL,
[Kod_Spr120] [smallint] NULL,
[E_Date_Begin] [datetime] NOT NULL,
[E_Date_End] [datetime] NULL,
[E_Date_Stop] [datetime] NULL, 
```

现在我想为表格的每一行调用这个过程。
这是可能的？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:39:50.567

是的，您可以使用游标选择表中的所有行并迭代调用存储过程。

我建议您在走这条路之前可能会遇到设计问题。如果需要为表中的每一行调用存储过程，您可以编写一个存储过程，它只执行当前 sp 对所有行所做的操作，而不是单行操作。

您没有提供 sp 正在做什么，所以我只能在这里推测。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:39:25.390

正如我在评论中提到的，我知道如何做到这一点的唯一方法是使用`CURSOR`. 这是一些示例代码（当然未经测试）：

```
DECLARE @ID INT
DECLARE @Segment_ID uniqueidentifier

DECLARE @getAccountID CURSOR
SET @BusStationCursor = CURSOR FOR
SELECT Id, Segment_ID --(etc: all the fields you need)
FROM BusStation

OPEN @BusStationCursor
FETCH NEXT    FROM @BusStationCursor INTO @ID, @Segment_ID
WHILE @@FETCH_STATUS = 0
BEGIN

--CALL YOUR SP HERE
PRINT @ID 
PRINT @Segment_ID

FETCH NEXT    FROM @BusStationCursor INTO @ID, @Segment_ID
END
CLOSE @BusStationCursor
DEALLOCATE @BusStationCursor 
```

这也应该有所帮助：

[http://msdn.microsoft.com/en-us/library/ms180169.aspx](http://msdn.microsoft.com/en-us/library/ms180169.aspx)

祝你好运。

# eclipse - Eclipse 上 JUnit 运行配置中 MyBatis 的 log4j

> ID：14587507
> 
> 赞同：0
> 
> 时间：2013-01-29T16:29:29.247
> 
> 标签：eclipse, junit, log4j, mybatis

如何在**Eclipse**上的**JUnit**运行配置中为**MyBatis配置****log4j**？

 ******SO和互联网上有几个这样的问题。但是，大多数建议似乎对我不起作用。

具体来说，以下似乎不起作用：（来自 MyBatis 日志[页面](http://www.mybatis.org/core/logging.html)）

1.  `log4j-1.2.16.jar`在我的 Eclipse 上`Java Build Path Libraries`（在 Maven 依赖项下）。
2.  log4j.properties 在我的`Run Configuration`. 它在 VM 参数下为：`-Dlog4j.configuration=C:\log4j.properties`
3.  我的 log4j.properties 文件包含以下代码。

* * *

```
log4j.rootLogger=ERROR, stdout
log4j.logger.org.mybatis.example.BlogMapper=TRACE
log4j.appender.stdout=org.apache.log4j.ConsoleAppender
log4j.appender.stdout.layout=org.apache.log4j.PatternLayout
log4j.appender.stdout.layout.ConversionPattern=%5p [%t] - %m%n 
```

根据我的理解，如果我可以将 log4j.properties 文件保留在 Eclipse 类路径中，一切都会奏效。但是，我**不确定运行配置 VM 参数是否设置了 classpath**。

## 编辑

如果我强制 MyBatis 使用 log4j，

```
org.apache.ibatis.logging.LogFactory.useLog4JLogging(); 
```

以下是控制台上的输出：

```
log4j:WARN No appenders could be found for logger (org.apache.ibatis.logging.LogFactory).
log4j:WARN Please initialize the log4j system properly.
log4j:WARN See http://logging.apache.org/log4j/1.2/faq.html#noconfig for more info. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-01T01:15:48.620

在 VM 参数下为：-Dlog4j.configuration=file:C:\log4j.properties

观察前缀文件：

-湿婆

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-01T20:26:40.733

得到了答案： http: [//mybatis-user.963551.n3.nabble.com/log4j-for-MyBatis-in-a-JUnit-run-configuration-on-Eclipse-tp4026384p4026393.html](http://mybatis-user.963551.n3.nabble.com/log4j-for-MyBatis-in-a-JUnit-run-configuration-on-Eclipse-tp4026384p4026393.html)

设置类路径的另一种方法如@sivaprasadreddy.k 的回答中所述******

# javascript - 将表从 JSP 转换为 Jquery 数据表

> ID：14587508
> 
> 赞同：0
> 
> 时间：2013-01-29T16:29:29.677
> 
> 标签：javascript, spring, jsp, datatable, jstl

我正在返回一个 JSP，它将根据模型附带的数据生成一个表。我想在加载 JSP 后将表转换为 JQuery 数据表。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:29:58.547

事实上，我认为从一开始就在你的 JSP 中使用 JQuery Datatable 并且在加载 JSP 时不做任何进一步的转换可能更合适。

如果您要考虑这种方法，您的工作将是在您的 Datatables 组件和您的控制器之间创建一个集成模型，我假设它是 Spring MVC，因为 Spring 在您的问题中被标记。

话虽如此，您的路线图将类似于：

1.  创建值对象以在 JSP 视图和 Spring 控制器之间来回移动数据表参数；

2.  创建您的控制器，它将处理数据请求。此控制器必须能够将传入的 HttpRequest 参数转换为值对象。如果您确实在使用 Spring，那么您的 Spring Controller 将使用定制的[WebArgumentResolver](http://static.springsource.org/spring/docs/current/javadoc-api/org/springframework/web/bind/support/WebArgumentResolver.html)来读取请求并返回您的 VO。该控制器必须处理您的请求并检索您可能必须提供的任何响应。哦，别忘了在你的 MVC 配置中解析那个解析器。

3.  最后，您的响应将是 JSON，Datatables 可以理解。

[这是一个很棒的教程](http://bthurley.wordpress.com/2012/07/18/spring-mvc-with-restful-datatables/)，我第一次使用它来实现这种集成。可能会为您填写一些详细信息。

此致。

# abap - 从主程序中隐藏外部子屏幕字段

> ID：14587512
> 
> 赞同：3
> 
> 时间：2013-01-29T16:29:37.563
> 
> 标签：abap, dynpro

有没有办法从主屏幕 PBO 隐藏子屏幕字段？

子屏幕在不同的功能组中定义。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:53:58.713

这是不可能的：从主屏幕的角度来看，子屏幕区域只是一个单独的元素，没有进一步的内部结构，无法详细检查或修改。您必须调整子屏幕程序以通过一些或多或少的通用编程接口接受屏幕修改数据，然后自行执行修改。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-31T06:11:27.010

这是一个*可能的*解决方案：

如果您想从主程序控制子屏幕字段的可见性，您必须`LOOP AT SCREEN`在子屏幕程序的 PBO 中插入 a，正如 vwegert 已经指出的那样。

如果有问题的子屏幕属于标准程序并且您因此无法更改它，您可以从子屏幕的 PBO 模块中找到对子路由/表单的适当调用，您可以在其中插入[隐式增强](http://help.sap.com/saphelp_nw04s/helpdata/en/29/e59441026aae5fe10000000a1550b0/frameset.htm)。在这个增强里面，你可以把你的代码来修改屏幕。（当然，如果它不是标准程序，您可以在 PBO 模块的任何位置进行更改）。

现在，关于控制主程序的可见性：在主程序中，您可以设置一个标志并将其导出到内存中`EXPORT TO MEMORY`。在子屏幕的 PBO 中，您可以使用 读取此标志`IMPORT FROM MEMORY`，并根据值，使用 隐藏或显示该字段`LOOP AT SCREEN`。

# php - PHP Fire and Forget POST 请求

> ID：14587514
> 
> 赞同：19
> 
> 时间：2013-01-29T16:29:39.833
> 
> 标签：php, post, curl, asynchronous, fire-and-forget

我正在尝试在 PHP 中创建一个“一劳永逸”的方法，以便我可以将`POST`数据发送到 Web 服务器而无需等待响应。我读到这可以通过`CURL`在以下代码中使用 like 来实现：

```
$ch = curl_init($url);
curl_setopt($ch, CURLOPT_POST, true);
curl_setopt($ch, CURLOPT_POSTFIELDS, $post_fields);
curl_exec($ch);
curl_close($ch); 
```

但是我不认为它按我预期的那样工作。例如，如果我发送请求的 URL 有错误，它也会导致我的脚本抛出错误。如果它是火灾并忘记，我希望不会发生这种情况。

谁能告诉我我做错了什么或提供替代建议。我在本地使用 Windows，在开发、登台和生产环境中使用 Linux。

**更新**

我在这里找到了一个替代解决方案：http: [//blog.markturansky.com/archives/205](http://blog.markturansky.com/archives/205)

我已将其清理为以下代码：

```
function curl_post_async($url, $params = array())
{
    // create POST string   
    $post_params = array();
    foreach ($params as $key => &$val) 
    {
        $post_params[] = $key . '=' . urlencode($val);
    }
    $post_string = implode('&', $post_params);

    // get URL segments
    $parts = parse_url($url);

    // workout port and open socket
    $port = isset($parts['port']) ? $parts['port'] : 80;
    $fp = fsockopen($parts['host'], $port, $errno, $errstr, 30);

    // create output string
    $output  = "POST " . $parts['path'] . " HTTP/1.1\r\n";
    $output .= "Host: " . $parts['host'] . "\r\n";
    $output .= "Content-Type: application/x-www-form-urlencoded\r\n";
    $output .= "Content-Length: " . strlen($post_string) . "\r\n";
    $output .= "Connection: Close\r\n\r\n";
    $output .= isset($post_string) ? $post_string : '';

    // send output to $url handle
    fwrite($fp, $output);
    fclose($fp);
} 
```

这个似乎对我更有效。

这是一个有效的解决方案吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-02-20T14:42:40.827

是的，如果您不关心来自您正在调用的 URL 的响应，那么使用套接字是可行的方法。这是因为套接字连接可以在发送请求后直接终止而无需等待，而这正是您所追求的 - 即发即弃。

有两个注意事项：

1.  它不再是 cURL 请求，因此值得重命名该函数。:)
2.  绝对值得检查是否可以打开套接字，以防止脚本稍后在如果失败时抱怨：

    ```
    $fp = fsockopen($parts['host'], $port, $errno, $errstr, 30);

    if ( ! $fp)
    {
       return FALSE;
    } 
    ```

值得链接到您现在使用的 fsocket() 脚本的原始来源：
[http ://w-shadow.com/blog/2007/10/16/how-to-run-a-php-script-in -的背景/](http://w-shadow.com/blog/2007/10/16/how-to-run-a-php-script-in-the-background/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2019-10-22T12:50:48.270

这是 diggersworld 代码的清理版本，它还处理其他 HTTP 方法，然后是 POST 并在函数失败时抛出有意义的异常。

```
/**
 * Send a HTTP request, but do not wait for the response
 *
 * @param string $method The HTTP method
 * @param string $url The url (including query string)
 * @param array $params Added to the URL or request body depending on method
 */
public function sendRequest(string $method, string $url, array $params = []): void
{
    $parts = parse_url($url);
    if ($parts === false)
        throw new Exception('Unable to parse URL');
    $host = $parts['host'] ?? null;
    $port = $parts['port'] ?? 80;
    $path = $parts['path'] ?? '/';
    $query = $parts['query'] ?? '';
    parse_str($query, $queryParts);

    if ($host === null)
        throw new Exception('Unknown host');
    $connection = fsockopen($host, $port, $errno, $errstr, 30);
    if ($connection === false)
        throw new Exception('Unable to connect to ' . $host);
    $method = strtoupper($method);

    if (!in_array($method, ['POST', 'PUT', 'PATCH'], true)) {
        $queryParts = $params + $queryParts;
        $params = [];
    }

    // Build request
    $request  = $method . ' ' . $path;
    if ($queryParts) {
        $request .= '?' . http_build_query($queryParts);
    }
    $request .= ' HTTP/1.1' . "\r\n";
    $request .= 'Host: ' . $host . "\r\n";

    $body = http_build_query($params);
    if ($body) {
        $request .= 'Content-Type: application/x-www-form-urlencoded' . "\r\n";
        $request .= 'Content-Length: ' . strlen($body) . "\r\n";
    }
    $request .= 'Connection: Close' . "\r\n\r\n";
    $request .= $body;

    // Send request to server
    fwrite($connection, $request);
    fclose($connection);
} 
```

# ibm-mobilefirst - 使用 Worklight JSONStore

> ID：14587521
> 
> 赞同：0
> 
> 时间：2013-01-29T16:30:16.487
> 
> 标签：ibm-mobilefirst, jsonstore

我对 Worklight 并不陌生，但 JSONStore 是一项新功能，我正在尝试学习如何使用它。我下载了示例应用程序 (module_07_10_Using_JSONStore.zip) 并将其安装在我的开发环境中，运行构建并部署它。

当我在移动浏览器模拟器中预览应用程序（作为 Android）时，运行初始化集合、添加文档的序列，然后尝试按名称查找、查找全部或获取集合中的文档数 - 我做看不到屏幕底部显示输入数据的表格。我在 WL 控制台中看不到任何错误。在 Android 控制台中，我收到错误消息：无法解析目标“android-8”警告：无法写入 jarlist 缓存文件 - 然后它指向模块中 jarlist.cache 的位置。

我没有对代码进行任何更改。我看了看，将其与教育模块内容进行了比较，我没有发现问题。有什么想法吗？线索？感谢您的帮助。谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-30T19:01:06.380

移动浏览器模拟器不支持 JSONStore，它必须在 Android 或 iOS 设备或模拟器上运行，如果您在 Android 模拟器上运行它应该可以正常工作。

# python - 更改列表元素

> ID：14587522
> 
> 赞同：0
> 
> 时间：2013-01-29T16:30:19.113
> 
> 标签：python, list

> **可能重复：**
> [Python 列表索引](https://stackoverflow.com/questions/13058458/python-list-index)

```
result=[range(3)]*2
for i in range(len(result)):
    result[i][2]=4*i
print result 
```

我希望`[[0, 1, 0], [0, 1, 4]]`

为什么我会得到`[[0, 1, 4], [0, 1, 4]]`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:41:40.877

*   列表“结果”是：[[0, 1, 2], [0, 1, 2]]
*   你的迭代是：“for i in range(len(result))”
*   len（结果）是：2
*   范围（2）是：[0,1]

意义：

第一次：结果[0][2]=4*0

第二次：结果[1][2]=4*1

这会给你结果 [[0, 1, 4], [0, 1, 4]]

这就是一步一步做的事情。

如果您在迭代中添加“中断”，您会看到结果是 [[0, 1, 0], [0, 1, 0]]

“结果”列表通过参考起作用。当它被调用时，它指向同一个对象。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:35:12.373

当您这样做时`[range(3)] * 2`，它会创建一个列表，其中包含*对同一*列表的两个引用，因此修改`result[0]`和`result[1]`每个都修改两者。

用于`[range(3) for i in range(2)]`制作一个包含两个不同结果的列表`range(3)`。

# php - PHP - “实例化”和“初始化”有什么区别？

> ID：14587523
> 
> 赞同：8
> 
> 时间：2013-01-29T16:30:20.580
> 
> 标签：php, variables, object

我正在阅读几本关于 PHP 的书籍并开始着手掌握基础知识。我遇到了“实例化”和“初始化”的词。我找不到解释它们的例子。

PHP中的“实例化”和“初始化”有什么区别？他们的意思是什么 ？如何使用它们？使用它们的目的是什么？

如果可能，请提供一个示例。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-29T16:31:57.310

你`instantiate`是一个类的对象。即你创建一个`instance`（因此得名）。在代码中：

```
$obj = new SomeClass(); 
```

你`initialise`是一个变量，这意味着“给它它的初始（因此得名）值”。

```
$var = "someValue"; 
```

事实上，当你`instantiate`，你也经常`initialise`它（在构造函数中）。例如：

```
// this instantiates an object of class 'SomeClass' and 
// initialises it with "somevalue"
$obj = new SomeClass("someValue"); 
```

实例化是一个面向对象的编程术语。初始化用于所有语言。这两个术语当然不限于 PHP。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:36:52.467

1.  实例是您为变量分配内存的地方，但可能会或可能不会在其中放置值。
2.  Initialized 是您分配内存并为其存储初始值的位置。

在阅读 Barts Answer 之后添加，面向对象编程通常指的是分配内存的对象的实例，而变量被称为初始化，这意味着分配的内存并分配了一个值。

所以例如

```
int $intarray=new Array(); // Instance created 
```

尽管

```
int $intarray= new Array({1,2,3}); // instance created and initialised 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T16:52:10.293

当您在任何面向对象的编程语言中定义一个类时，您创建了一个对象的蓝图，但该对象不存在。但是，当您根据定义的类或蓝图创建该对象的副本时，实际上是实例化了一个类。例如：

//定义一个名为Foo的类

```
class Foo {
    public $aMemberVar = 'aMemberVar Member Variable';
    public $aFuncName = 'aMemberFunc';

    function aMemberFunc() {
        print 'Inside `aMemberFunc()`';
    }
} 
```

// 创建一个 Foo 类型的对象 * 实例化 Foo

```
$foo = new Foo; 
```

现在对于初始化，考虑任何变量。当您声明一个变量时，它存在但不包含任何有意义的值。因此，第一次为变量赋值的过程称为初始化。初始化可能在您声明变量时发生，也可能稍后以编程方式进行。

只需声明一个变量：

```
var $newVariable; 
```

初始化上述变量：

```
$newVariable = "This is intialisation"; 
```

声明并初始化一个变量：

```
var $intialisedVar = "This var is declared and intialised"; 
```

只是为了在初始化中添加另一点，请参见上面类中的变量。实例化对象后，这些变量将自动初始化。

希望这可以帮助。

# android - 即使 project.properties 没有 proguard 条目，Eclipse 是否总是在 Android 发布版本上运行 Proguard？

> ID：14587526
> 
> 赞同：0
> 
> 时间：2013-01-29T16:30:22.207
> 
> 标签：android, eclipse, proguard

在调试模式下从 Eclipse 运行或从导出的签名应用程序运行时，我的应用程序运行方式不同。我没有在 project.properties 中指定任何 proguard 配置。我仍然得到一些默认的 proguard 优化和混淆吗？使用 sdk 工具目录中的通用配置导出签名二进制文件时，proguard 是否总是运行？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:34:06.523

没有。您必须启用它。默认情况下未启用。[http://developer.android.com/tools/help/proguard.html](http://developer.android.com/tools/help/proguard.html)

> 要启用 ProGuard 使其作为 Ant 或 Eclipse 构建的一部分运行，请在 /project.properties 文件中设置 proguard.config 属性。路径可以是绝对路径，也可以是相对于项目根目录的路径。

# javascript - 带有服务器端分页+过滤的 kogrid：self.sortedData 不是函数

> ID：14587531
> 
> 赞同：3
> 
> 时间：2013-01-29T16:30:37.857
> 
> 标签：javascript, knockout.js, kogrid

我遇到了淘汰赛和 kogrid 的问题。经过几次测试，我设法在这个小提琴中重现了它：

[http://jsfiddle.net/MVuUp/](http://jsfiddle.net/MVuUp/)

简而言之，我有一个示例 VM ( *ItemsViewModel* )，它应该向 kogrid 提供数据，并带有服务器实现的过滤和分页。vm 公开了一个*gridOptions*对象，其中包含 kogrid 所需的所有数据，以及一个调用刷新函数以从服务器获取数据。在小提琴中，我用一些虚拟的内联数据替换了 ajax 调用以获取真实数据。

现在，在加载页面时，我经常在 kogrid 源代码中收到此错误：

> 错误：TypeError：self.sortedData 不是函数源文件： [http](http://ericmbarnard.github.com/KoGrid/lib/KoGrid.debug.js) ://ericmbarnard.github.com/KoGrid/lib/KoGrid.debug.js行：1473

相反，如果我只是使用名为 dummyData 的可观察数组，而网格只有一个 div，就像在基本的 kogrid 示例（[https://github.com/Knockout-Contrib/KoGrid](https://github.com/Knockout-Contrib/KoGrid)）中一样，则不会出现此错误；所以我想我对图书馆的使用有问题。

这是我的虚拟机的相关部分：

```
function ItemsViewModel() {
    var self = this;
    self.dummyArray = ko.observableArray([{
        name: "Goofy",
        age: 27
    }, {
        name: "Mickey",
        age: 33
    }]);
    self.items = ko.observableArray([]);
    self.filterOptions = {
        filterText: ko.observable(""),
        useExternalFilter: true
    };
    self.pagingOptions = {
        pageSizes: ko.observableArray([5, 10]),
        pageSize: ko.observable(20),
        totalServerItems: ko.observable(0),
        currentPage: ko.observable(1)
    };
    self.gridOptions = {
        data: self.items,
        enablePaging: true,
        multiSelect: false,
        filterOptions: self.filterOptions,
        pagingOptions: self.pagingOptions,
        columnDefs: [{
            field: "id",
            displayName: "ID"
        }, {
            field: "title",
            displayName: "Title"
        }]
    };
    self.refresh();
} 
```

该函数用于获取数据（目前我没有过滤掉）：

```
ItemsViewModel.prototype.refresh = function () {
var params = {
    page: this.pagingOptions.currentPage(),
    pageSize: this.pagingOptions.pageSize(),
    sortBy: "datemodified",
    isSortDesc: true
};
// dummy data (2 pages x 5)
var data = {
    page: 1,
    totalPages: 2,
    totalRecords: 10,
    records: []
};
for (var i = 0; i < 10; i++) {
    data.records.push({
        id: i,
        title: "title " + i
    });
}
ko.utils.arrayPushAll(this.items, data.records);
this.pagingOptions.totalServerItems(data.totalRecords);
} 
```

我的 HTML 只是一个数据绑定设置为的 div

```
koGrid: { data: gridOptions } 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-15T18:30:49.690

在您的 html 中，更改

`<div class="datagrid" data-bind="koGrid: { data: gridOptions }"></div>`

到

`<div class="datagrid" data-bind="koGrid: gridOptions "></div>`

# javascript - 回调函数立即执行

> ID：14587532
> 
> 赞同：0
> 
> 时间：2013-01-29T16:30:46.163
> 
> 标签：javascript

我有一个确认弹出窗口，询问是或否，这是代码：

```
Confirm({
    Title: 'Warning',
    Message: 'Are you sure?',
    Buttons: [{
        text: 'Yes',
        callback: function(){
            RRSubmitRemoveReportRequest($(this));
        },
        highlighted: true
    }, {
        text: 'No)',
        callback: null,
        type: 'no'
    }]
}); 
```

如果如果发送参数 $(this)，我应该使用匿名函数，否则它会立即调用该函数，有人可以解释一下吗？谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:33:51.030

举个例子很容易理解：

```
function foo(i){
    return i*10;
}

var x = foo(1); // execute foo with 1 parameter; 
```

* * *

```
var x = function(){ // creates a callback to the foo function.
    foo(1);
}; 
```

* * *

```
var x = foo; // pointer to foo function and then:
x(1); 
```

* * *

归根结底，回调应该是将来会在某个地方调用的**函数，而不是函数的值。**

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:35:56.807

该`callback`属性需要设置为`function`.

如果你这样做：

```
callback: RRSubmitRemoveReportRequest($(this)) 
```

您正在设置函数`callback`的*返回值*。`RRSubmitRemoveReportRequest`

你需要给它一个函数。 `RRSubmitRemoveReportRequest`是一个函数，`RRSubmitRemoveReportRequest($(this))`是一个函数调用，所以它被运行并使用它的返回值。

当你这样做时：

```
callback: function(){
    RRSubmitRemoveReportRequest($(this));
} 
```

您正在传递一个函数，该函数在调用时将`RRSubmitRemoveReportRequest`正确调用。

# jquery - 创建表单后初始化 jQuery Validate 插件

> ID：14587534
> 
> 赞同：-1
> 
> 时间：2013-01-29T16:30:49.027
> 
> 标签：jquery, jquery-validate

我正在尝试在我的表单上初始化 jquery 验证器，因为它已经填充了来自数据库的数据，而不是在页面加载时。

这是因为在某些情况下，我根本不希望应用验证器。所以对于那些记录，我不调用验证器初始化。

当我填写表格时，我做的第一件事就是调用“resetEditForm”方法：

```
function resetEditForm() {
// REMOVE VALIDATOR
g$("#editESTIPRequestForm").removeData('validator')

// DO SOME MORE FORM RESET THINGS HERE
} 
```

然后我用数据填写所有字段。然后我设置表单显示模式（只读/读/写）：

```
function setFormMode(formStatusType) {
    switch (formStatusType) {
        case "ReadOnly":
            // FORM IS IN READ ONLY MODE
            g$('#tabCenter-Data input:not(.needsIDupdate):not(.hasSelect2), #tabCenter-Data textarea:not(.needsIDupdate):not(.hasSelect2)').attr('disabled', 'disabled');
            g$('#tabCenter-Data .hasSelect2').select2("disable");
            // HIDE "REQUIRED" INDICATORS
            g$('#tabCenter-Data .astric').hide();
            // HIDE ALL BUTTONS
            g$('#tabCenter-Data .button').hide();

            break;
        case "ReadWrite":
            // FORM IS IN READ/WRITE MODE
            g$('#tabCenter-Data input:not(.needsIDupdate):not(.hasSelect2), #tabCenter-Data textarea:not(.needsIDupdate):not(.hasSelect2)').removeAttr('disabled');
            g$('#tabCenter-Data .hasSelect2').select2("enable");
            // MAKE "REQUIRED" INDICATORS VISIBLE
            g$('#tabCenter-Data .astric').show();
            // SHOW ALL BUTTONS
            g$('#tabCenter-Data .button').show();

            setupValidator();
            break;
        default:
            break;
    }
} 
```

这是应该在表单上初始化验证器的函数：

```
function setupValidator() {

    g$("#editESTIPRequestForm").validate({
        ignore: null,
        errorElement: "span",
        rules: {
            detailsStatus: {
                required: true
            },
            detailsJobType: {
                required: true
            },
            detailsMpoRural: {
                required: true
            },
            detailsResponsiblePartyJurisdiction: {
                required: true
            },
            detailsTipID: {
                regexAllowedCharacters: true
            },
            detailsRoute: {
                required: true,
                regexAllowedCharacters: true
            },
            detailsLocationRpt: {
                required: true,
                regexAllowedCharacters: true
            },
            detailsWorkType: {
                required: true
            },
            detailsTransSystem: {
                required: true
            },
            detailsWorkDescriptionRpt: {
                required: true,
                regexAllowedCharacters: true
            },
            detailsTemplate: {
                required: true
            },
            detailsAirQualityConformityRequired: {
                required: true
            },
            detailsEmissionsCO: {
                number: true
            },
            detailsEmissionsCO2: {
                number: true
            },
            detailsEmissionsNox: {
                number: true
            },
            detailsEmissionsVoc: {
                number: true
            },
            detailsEmissionsPM2: {
                number: true
            },
            detailsAuthorComments: {
                regexAllowedCharacters: true
            },
            detailsMdotComments: {
                regexAllowedCharacters: true
            },
            detailsLetIndicator: {
                required: function (element) {
                    return (currentUserRole == "ADMN" || currentUserRole == "MDOT");
                }
            },
            detailsNonLetReason: {
                required: function (element) {
                    var selectedLetIndicatorValue = g$("input:radio[name='detailsLetIndicator']:checked").val();
                    return ((currentUserRole == "ADMN" || currentUserRole == "MDOT") && (selectedLetIndicatorValue == "NonLet"));
                }
            },
            detailsScheduledLetDate: {
                required: function (element) {
                    return (currentUserRole == "ADMN" || currentUserRole == "MDOT");
                }
            }
        },
        onsubmit: false,
        errorClass: "invalid",
        errorPlacement: function (error, element) {
            if (g$(element).hasClass("hasSelect2")) {
                //error.appendTo(g$(element).prev());
                error.insertAfter(g$(element).prev("div"));
            } else if (g$(element).is("input:radio")) {
                var groupName = g$(element).attr("name");
                error.insertAfter(g$("input:radio[name=" + groupName + "]:last + label"));
            } else {
                error.insertAfter(g$(element));
            }
        },
        highlight: function (element, errorClass, validClass) {
            var elementToWorkOn = element;
            if (g$(element).hasClass("hasSelect2")) {
                elementToWorkOn = g$(element).prevAll("div");
            } else if (g$(element).is("input:radio")) {
                var groupName = g$(element).attr("name");
                elementToWorkOn = g$("input:radio[name=" + groupName + "]");
            }

            g$(elementToWorkOn).addClass(errorClass).removeClass(validClass);
        },
        unhighlight: function (element, errorClass, validClass) {
            var elementToWorkOn = element;
            if (g$(element).hasClass("hasSelect2")) {
                elementToWorkOn = g$(element).prevAll("div");
            }

            g$(elementToWorkOn).removeClass(errorClass).addClass(validClass);

            if (this.numberOfInvalids() == 0) {
                g$("#estipFormErrorMessageBox").hide();
            }
        },
        invalidHandler: function (form, validator) {
            g$("#estipFormErrorMessageBox").show();
        }
    });
} 
```

但是，验证规则永远不会应用于表单。

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:40:08.533

我建议您`.validate()`在 a 内进行初始化`document.ready`，但不要使用规则。**然后根据需要**使用[`rules('add')`方法](http://docs.jquery.com/Plugins/Validation/rules#.22add.22rules)加载规则。还用于在创建规则后`rules('add')`立即将规则添加到动态创建的`input`字段中。

[看这个演示。](http://jsfiddle.net/BYWAb/) 单击提交按钮，没有任何反应（没有规则）。然后单击“加载规则”按钮，突然表单验证将在下一个适用事件上激活。

**演示：http:** [//jsfiddle.net/BYWAb/](http://jsfiddle.net/BYWAb/)

```
$(document).ready(function () {

    $('#myform').validate({
        // other options
    });

    //enclose the following block within whatever required to load these rules
    // function setFormMode(formStatusType) { // whatever
    // switch (formStatusType) { // whatever
        ...

        $('.myclass').each(function () {
            $(this).rules('add', {
                required: true,
                minlength: 5
            });
        });

    // end block

}); 
```

# javascript - JSON 对象属性名称必须双引号是在什么标准中正式规定的？

> ID：14587540
> 
> 赞同：2
> 
> 时间：2013-01-29T16:31:08.603
> 
> 标签：javascript, json

在这里检查：

[http://www.json.org/](http://www.json.org/)

和这里：

[http://www.ietf.org/rfc/rfc4627.txt?number=4627](http://www.ietf.org/rfc/rfc4627.txt?number=4627)

我所看到的是名称必须是字符串，而不是它们不能使用单引号。不要误会我的意思，我支持 JSON 的引用名称。它可以防止开发人员使用不是合法的 JS 变量名称的属性名称，并且 JSON 的强大使用经常将传统值放入属性名称中，例如二维数组建模表的地图缩减。

我还认为所有名称都一致地使用一种或另一种引号类型是有意义的，以避免人们在尝试用某种没有方便的 JSON 解析库/本机方法的语言解析 JSON 时可能做出的假设出它的毛孔，但我在这些规格中没有看到任何坚持它必须是双重或单一的。

我在第二个链接中看到的是它们必须是字符串。正如许多 JSON 验证器所认为的那样，它们必须被双引号在哪里确定？还有其他来源吗？如果是这样，谁拥有 JSON 镇？我感觉自己像个迷路的衣衫褴褛的人。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:34:48.963

从您链接到的 RFC 第 4 页：

```
string = quotation-mark *char quotation-mark
...
quotation-mark = %x22      ; " 
```

属性名称必须是字符串，但字符串必须用引号（而不是撇号）分隔。

另请参见json.org[上的字符串图。](http://www.json.org/string.gif)请注意，它以`"`允许`'`作为替代的分支而不是分支开始和结束。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:35:00.613

取自[http://www.json.org](http://www.json.org)网站：

[![](../Images/f33e2dac0ba40f037ae097961b11c65a.png)](https://i.stack.imgur.com/zCGUb.gif)

字符串定义为用双引号括起来的字符序列。

在 RFC 中：

```
string = quotation-mark *char quotation-mark 
```

在哪里

```
quotation-mark = %x22      ; " 
```

# php - 带有 php 和 mysql 查询的简单 Ajax Jquery

> ID：14587543
> 
> 赞同：0
> 
> 时间：2013-01-29T16:31:15.583
> 
> 标签：php, ajax, jquery

我看本教程 [http://tutorialzine.com/2009/09/simple-ajax-website-jquery/](http://tutorialzine.com/2009/09/simple-ajax-website-jquery/) 但我不明白如何使用带有 sql 的 php 文件进行这项工作，echo ""; 等如果有人可以解释，我会尝试一切，但没有出现谢谢:)

```
var default_content = "";

$(document).ready(function () {

    checkURL();
    $('ul li a').click(function (e) {

        checkURL(this.hash);

    });

    //filling in the default content
    default_content = $('#pagesContent').html();

    setInterval("checkURL()", 250);

});

var lasturl = "";

function checkURL(hash) {
    if (!hash) hash = window.location.hash;

    if (hash != lasturl) {
        lasturl = hash;

        // FIX - if we've used the history buttons to return to the homepage,
        // fill the pageContent with the default_content

        if (hash == "")
            $('#pagesContent').html(default_content);

        else
            loadPage(hash);
    }
}

function loadPage(url) {
    url = url.replace('#page', '');

    $('#loading').css('visibility', 'visible');

    $.ajax({
        type: "POST",
        url: "load_page.php",
        data: 'page=' + url,
        dataType: "html",
        success: function (data) {
            if (parseInt(data) != 0) {
                $('#pagesContent').html(data);
                $('#loading').css('visibility', 'hidden');
            }
        }
    });

} 
```

load_page.php

```
<?php
if(!$_POST['page']) die("0");
$page = (int)$_POST['page'];
if(file_exists('pages/page_'.$page.'.php'))
echo file_get_contents('pages/page_'.$page.'.php');
else echo 'There is no such page!';
?> 
```

演示.html

```
< a href="#page1">Page1< /a>
< a href="#page2">Page2< /a>
< a href="#page3">Page3< /a>
< a href="#page4">Page4< /a>
<div id="pageContent">
   //loaded ajax page
</div> 
```

在这种情况下，link > index.html#page1 将加载文件'pages/page_1.php'，但在主 index.html 中只能加载 html 代码，而不是 php 语法。在这种情况下我可以使用 php 命令吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:21:55.247

所以看起来这里的问题是在教程示例中，他们只是使用了一个 HTML 文件。为此，`file_get_contents()`将正常工作。但是，如果您希望您的服务器在将 PHP 代码提供给用户之前对其进行解析，您应该使用[`include()`函数](http://php.net/manual/en/function.include.php).

> [从文档中](http://php.net/manual/en/function.include.php)：
> 
> include 语句**包含并评估**指定的文件。

[file_get_contents()](http://php.net/manual/en/function.file-get-contents.php)函数的行为略有不同：

> **`file_get_contents`**— 将整个文件读入字符串

它只是读取文件的内容，不评估/执行/解释 PHP 代码...

# r - 如何从 R 中的数据框中提取值

> ID：14587546
> 
> 赞同：-4
> 
> 时间：2013-01-29T16:31:21.990
> 
> 标签：r

> **可能重复：**
> [给定一些标准的数据框子集](https://stackoverflow.com/questions/10050811/subsetting-a-data-frame-given-some-criteria)

我有一个具有年龄和相应频率的数据框。它是这样生成的：

```
ages <- sample(15:45,size = 100,replace = TRUE)
> df <- data.frame(table(ages))
> head(df)
  ages Freq
1   15    2
2   16    2
3   17    2
4   18    2
5   19    5
6   20    3 
```

我想创建一个函数，当年龄作为输入时，它会提取相应的频率值。

例如，如果 13 对应的频率为 2，我应该可以输入 13 并得到输出为 2。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T16:32:45.943

```
grab.frequency = function(d, age) {
    d$Freq[d$ages == age]   
} 
```

例如：

```
d = data.frame(ages=41:50, Freq=21:30)
print(grab.frequency(d, 44))
# 24 
```

# javascript - 是否可以将容器链接到其他容器？

> ID：14587549
> 
> 赞同：0
> 
> 时间：2013-01-29T16:31:36.140
> 
> 标签：javascript

我有一组数据。我已经将这些数据放在我的网站上不同属性的不同位置，innerHTML 值占位符的方式等。是否可以将这些值与我可以从中获取数据的数组链接起来？这样当我更改数组中的数据时，它会在网站上自动更改吗？我也试图说明我是如何做到的：

```
var test = Array();
test['place1'] = 'NY';
var myspan = document.createElement('span');
myspan.innerHTML = test['place1']; 
```

在某些情况下， 的值`test['place1']`更改为`'LA'`，同时 的值也`myspan.innerHTML`必须更改。

请只使用本机 JS。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:39:43.617

您在谈论的是 MVVM 解决方案。大多数 MVVM JavaScript 解决方案使用一些表示可观察对象的对象，该对象是对象中的一个字段。当对象中的值发生变化时，可观察对象让框架知道要更新 DOM。它还监听 DOM 的更改事件，并反向更新对象。对于数组，这是一个类似的过程：它监听数组的添加或删除，并相应地更新 UI。

正如@MCL 在下面这篇文章的评论中指出的那样，有一种方法可以观察对象的变化，并且一般地附加到 DOM 上的元素并不太难。但是，有很多好的框架可以让这非常容易，所以这可能是需要考虑的事情。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:44:42.543

这需要手动管理。一个简单的解决方案是这样的：

```
function Place(container, initVal) {
    this.container = container ? container : {};
    this.set(initVal);
}
Place.prototype.place = "";
Place.prototype.get = function() {
    return this.place;
}
Place.prototype.set = function(val) {
    this.place = val;
    this.container.innerHTML = val;
} 
```

* * *

```
var test = {}; // object

test['place1'] = new Place(document.createElement('span'), "NY")

test['place1'].set('New Value'); 
```

这不是一个功能齐全的解决方案，但可以让您了解需要进行的协调。

* * *

如果您只支持现代浏览器，则可以使用 getter/setter 稍微清理一下语法。

将来，您将能够使用`Proxy`，这将使其更加轻松和清洁。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T17:01:19.170

没有本地方法可以将 HTML 元素的属性绑定到数组的值，但您实际上并没有使用数组；您正在使用一个对象，并且在对象上定义特殊功能是一件简单的事情。例如：

首先，定义你的对象：

```
function boundArray(){
    this._bindings = {};
    this.setBinding = function(key,element){
          this._bindings[key] = element;
    };
    this.setValue = function(key,value){
        this[key] = value;
        if(this._bindings[key]){
             this._bindings[key].innerHTML = value;
        }
    }
} 
```

然后在您的代码中使用它：

```
// create a new instance of the boundArray
var test = new boundArray();
// create the HTML element to use, and add it to the DOM
var myspan = document.createElement('span');
document.body.appendChild(myspan);
// bind the HTML element to the required key in the boundArray
test.setBinding('place1',myspan);
// Now every time you set that key on the boundArray (using setValue), it will also change the innerHTML field on the element
test.setValue('place1','NY');
// You can access your information from the boundArray in the usual ways:
var somevar = test.place1;
var anothervar = test['place1']; 
```

# java - Vaadin 7 自定义文本字段

> ID：14587550
> 
> 赞同：2
> 
> 时间：2013-01-29T16:31:43.097
> 
> 标签：java, html, css, user-interface, vaadin

我正在使用`Vaadin 7 rc2`. 也知道，我`Vaadin`完全不熟悉。

我想创建一个自定义`TextField`，它在右侧具有所需的开头`input`，并且在验证失败时突出显示`input`i 而不是显示感叹号：

![在此处输入图像描述](../Images/7159e174a893a1aff597260be344c70b.png)

（我在屏幕截图上有一个选择框，但你明白了......）

我怎么能做到这一点？[Vaadin 7 wiki](https://vaadin.com/wiki/-/wiki/Main/Vaadin+7)有一个自定义小部件教程，但据我所知，这不是我想要的。

任何帮助表示赞赏！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-12T14:16:20.143

我认为解决方案是创建自己的小部件，我可以根据需要对其进行样式设置和显示。

# entity-framework - 将相关实体附加到新实体，而不从数据库中检索

> ID：14587557
> 
> 赞同：1
> 
> 时间：2013-01-29T16:31:59.570
> 
> 标签：entity-framework

我这周刚刚开始使用 Web API，我正在努力解决我认为应该很简单的事情，但还没有找到答案。也许我正在使用错误的术语进行搜索。

对 API 的调用之一通过 GUID。我需要创建一个新实体（使用实体框架）并将其中一个关系设置为这个新传入的 GUID。此 GUID 是数据库中不同实体的 ID。

我正在努力通过关系附加实体而不获取整个实体。

例如，

```
public void DoWork(IList<Guid> userGuids)
{
     Order order = new Order() // This is an entity
     {
         CreateDate = DateTime.Now,
         CreatedBy = "Me",
         Items = (from i in this.Model.Items
                      where i.Id == userGuid
                      select i).ToList<Item>();
     }

     Model.Orders.Add(order);
     Model.SaveAll();
} 
```

在上面，我必须进行数据库调用以将 Item 实体附加到 Order。没有办法解决这个问题吗？当我只需要它们的 ID（无论如何我已经拥有了！）时，检索整个实体对象似乎非常多余！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T18:15:00.097

一种解决方案是此处询问的存根实体：[Create new EF object with foreign key reference without loading whole rereference object](https://stackoverflow.com/questions/8077329/create-new-ef-object-with-foreign-key-reference-without-loading-whole-rereferenc)

链接到引用的源博客：http: [//blogs.msdn.com/b/alexj/archive/2009/06/19/tip-26-how-to-avoid-database-queries-using-stub-entities.aspx](http://blogs.msdn.com/b/alexj/archive/2009/06/19/tip-26-how-to-avoid-database-queries-using-stub-entities.aspx)

从博客中截取 - 适用于您的情况：

```
Category category = new Category { ID = 5};
ctx.AttachTo(“Categories”,category);

Product product = new Product {
 Name = “Bovril”,
 Category = category
};
ctx.AddToProducts(product);
ctx.SaveChanges(); 
```

这样（在示例中）产品被保存而无需加载 Category 对象。

# c# - Visual Studio MVC 模板创建问题

> ID：14587559
> 
> 赞同：3
> 
> 时间：2013-01-29T16:32:17.667
> 
> 标签：c#, visual-studio-2010, asp.net-mvc-4

我正在尝试创建自定义 ASP.NET MVC4 模板。我从 Basic MVC4 模板开始，进行修改，然后使用“导出模板”向导创建模板 zip 文件。现在（几乎）一切都在顺利进行。当我使用模板创建一个新的 MVC 应用程序时，它会按照我想要的方式重新创建我的所有设置，除了一个。出于某种原因，它将我的 Web 应用程序的项目属性更改为具有“当前页面”而不是“特定页面”的开始操作（就像它在原始模板中一样，就像它在我的模板中一样）。此设置位于 Web 选项卡下的项目属性中。这是在我的模板应用程序中设置的内容（在我生成实际的模板 zip 文件之前）：

![正确设置](../Images/84a8b80f6270cbcfc810421ffa013560.png)

当我使用该模板创建一个新项目时，情况如下：

![不正确的设置](../Images/c6cbed69758efecdfeefb826fdee3649.png)

如何修改我的模板以正确设置此设置（或更准确地说，我如何强制它记住我最初设置的内容）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-02T21:19:15.833

编辑：由于对先前提出的解决方案的原始请求和行为的误解而修改了答案。

要设置自定义 MVC 项目模板的启动操作，您需要创建一个带有实现`Microsoft.VisualStudio.TemplateWizard.IWizard`接口的类的 dll。要使用向导 dll，您需要将其复制到 Visual Studio 的探测路径，即 (VS2010 Install Dir)\Common7\IDE、(VS2010 Install Dir)\Common7\IDE\PrivateAssemblies，或 (VS2010 Install Dir) \Common7\IDE\PublicAssemblies。如果您不将编译后的 dll 放在其中一个目录中，则需要对 dll 进行强名称和签名并将其添加到 GAC 并获取 dll 的 publickeytoken 并将其添加到 vstemplate 文件中的 Assembly 元素.

在测试以下代码时，我将 dll 复制到 (VS2010 Install Dir)\Common7\IDE\PrivateAssemblies，因此 dll 没有签名。

向导代码

```
using System.Collections.Generic;
using System.Linq;
using System.Xml;
using EnvDTE;
using Microsoft.VisualStudio.TemplateWizard;

namespace WarrenG.StartAction {
    public class Wizard : IWizard {
        private readonly Dictionary<string, object> data = new Dictionary<string, object>();

        public void RunStarted(object automationObject, Dictionary<string, string> replacementsDictionary,
                               WizardRunKind runKind, object[] customParams) {
            if (replacementsDictionary.ContainsKey("$wizarddata$")) {
                string xml = replacementsDictionary["$wizarddata$"];
                XmlDocument doc = new XmlDocument();
                doc.LoadXml(xml);
                foreach (XmlNode node in doc.ChildNodes) {
                    data.Add(node.Name, node.InnerText);
                }
            }
        }

        public bool ShouldAddProjectItem(string filePath) {
            return true;
        }

        public void RunFinished() {
        }

        public void BeforeOpeningFile(ProjectItem projectItem) {
        }

        public void ProjectItemFinishedGenerating(ProjectItem projectItem) {
        }

        public void ProjectFinishedGenerating(Project project) {
            if (data.ContainsKey("WebApplication.DebugStartAction")) {
                project.Properties.Item("WebApplication.DebugStartAction").Value =
                    data["WebApplication.DebugStartAction"];
            } else {
                project.Properties.Item("WebApplication.DebugStartAction").Value = 1;
            }
        }
    }
} 
```

将向导特定元素添加到自定义 MVC 项目模板的 vstemplate 文件

```
<VSTemplate Version="3.0.0" xmlns="http://schemas.microsoft.com/developer/vstemplate/2005" Type="Project">
  <TemplateContent>
    <!-- various template content -->
  </TemplateContent>
  <!-- add the following -->
  <WizardExtension>
    <Assembly>WarrenG.StartAction, Version=1.0.0.0, Culture=Neutral, PublicKeyToken=null</Assembly>
    <FullClassName>WarrenG.StartAction.Wizard</FullClassName>
  </WizardExtension>
  <WizardData>
    <WebApplication.DebugStartAction>1</WebApplication.DebugStartAction>
  </WizardData>
</VSTemplate> 
```

项目页面上的开始操作似乎是数字 0 到 4，按照它们的显示顺序。值 1 对应于特定页面。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T04:20:50.600

不幸的是，或幸运的是，这取决于你在硬币的一面......

与“启动项目”设置一样，该设置不是项目文件或生成的模板文件的一部分。它存储在“SUO”或解决方案用户选项文件中。模板生成器不包含 SUO。

SUO 文件的一些背景：http: [//msdn.microsoft.com/en-us/library/bb165909 (v=vs.80).aspx](http://msdn.microsoft.com/en-us/library/bb165909(v=vs.80).aspx)

# python - 创建一个 python shell 环境启动器以使用 pyQgis

> ID：14587560
> 
> 赞同：0
> 
> 时间：2013-01-29T16:32:17.483
> 
> 标签：python, shell, windows-xp, cmd, qgis

我正在尝试修改在“ [http://inasafe.linfiniti.com/html/id/developer-docs/platform_windows.html](http://inasafe.linfiniti.com/html/id/developer-docs/platform_windows.html) ”中找到的 shell 启动器，以便我可以使用它直接启动我想要的任何 shell（在我的情况，我想在 Windows 的 Python 27 库文件夹中使用默认的 IDLE gui）。到目前为止，我的更改并没有给我带来可以接受的结果。这是我的启动器版本，我应该在哪里更改它？

```
@echo off
SET PyShell=C:\Programmi\Quantum GIS Lisboa
call "%PyShell%"\apps\Python27\Lib\idlelib\PyShell.pyc
@echo off
SET GDAL_DRIVER_PATH=%PyShell%\bin\gdalplugins\1.9
path %PATH%;%PyShell%\apps\qgis\bin
path %PATH%;%PyShell%\apps\grass\grass-6.4.2\lib
path %PATH%;"%PyShell%\apps\Python27\Scripts\"

set PYTHONPATH=%PYTHONPATH%;%PyShell%\apps\qgis\python;
set PYTHONPATH=%PYTHONPATH%;%PyShell%\apps\Python27\Lib\site-packages
set QGIS_PREFIX_PATH=%PyShell%\apps\qgis

start "Quantum GIS Shell" /B "cmd.exe" %* 
```

我的操作系统是 Windows XP，Python 的版本是 2.7.3，而 Qgis 是 1.8 (Lisboa)。我对 Python 和其他东西很陌生，所以如果有一些错误，请原谅我的大错误（但我很确定有）。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-07T16:17:00.673

最后，解决方案是在我指定将哪个程序用作 shell 的那一行。就我而言，我发现了机器人“Pyshell.pyc”和“idle.pyw”。第二个似乎是指向的权利，因为现在一切正常。因此，我的个人 shell 启动器如下所示：

```
@echo off
SET IDLE=C:\PROGRA~1\QUANTU~1
call "%IDLE%"\apps\Python27\Lib\idlelib\idle.pyw
@echo off
SET GDAL_DRIVER_PATH=%IDLE%\bin\gdalplugins\1.9
path %PATH%;%IDLE%\apps\qgis\bin
path %PATH%;%IDLE%\apps\grass\grass-6.4.2\lib
path %PATH%;"%IDLE%\apps\Python27\Scripts\"

set PYTHONPATH=%PYTHONPATH%;%IDLE%\apps\qgis\python;
set PYTHONPATH=%PYTHONPATH%;%IDLE%\apps\Python27\Lib\site-packages
set QGIS_PREFIX_PATH=%IDLE%\apps\qgis

start "Quantum GIS Shell" /B "cmd.exe" %* 
```

无论如何，这是设置环境变量以使用 PyQGIS 的一种解决方法，因为我很难以“正常”方式设置它们。不幸的是，我没有解决我的问题，因为我在导入“qgis.core”模块时仍然遇到错误，而通过 cmd.exe 使用原始 shell 启动器它可以工作，但它不是一个好的 IDE 虽然......

# c# - 如何在 C# 中使用参数执行命令行参数？

> ID：14587562
> 
> 赞同：2
> 
> 时间：2013-01-29T16:32:20.443
> 
> 标签：c#, asp.net, parameters, command-line-arguments

我正在尝试使用名为 UltraCompare 的第三方比较工具来比较两个文件夹。以下行调用程序并打开两个文件......但这除了打开它们之外什么都不做，而且它不能正常用于*文件夹*。

```
Process.Start("C:\\Program Files\\IDM Computer Solutions\\UltraCompare\\uc.exe", 
textBoxContents1 + " " + textBoxContents2); 
```

我想使用以下命令行调用打开两个文件夹，对它们进行比较，并将结果存储在 output.txt 中：**uc -d -dmf "c:\dir1" "c:\dir2" -o “c:\输出.txt”**

此外，我需要对文件夹使用变量，而不是对路径进行硬编码。

我怎样才能在我的 C# 代码中使用它？

**更新 1：**

我根据您的建议修改了我的代码：

```
var p = new System.Diagnostics.Process();
p.StartInfo.FileName = "C:\\Program Files\\IDM Computer Solutions\\UltraCompare\\uc.exe";
p.StartInfo.Arguments = String.Format("-d -dmf \"{0}\" \"{1}\" -o c:\\output2.txt",
textBoxContents1, textBoxContents2);
p.Start(); 
```

我想知道为什么包含参数的第三行仍然不起作用......

**更新 2：**

我的错。它现在正在工作！只是不显示 UltraCompare 中的文件夹，但它仍在写入和保存输出。多谢你们！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T16:34:23.380

您可以使用

```
yourProcess.StartInfo.Arguments = " ....."; 
```

样本

```
var p = new System.Diagnostics.Process();
p.StartInfo.FileName = "C:\\Program Files\\IDM Computer Solutions\\UltraCompare\\uc.exe";
p.StartInfo.Arguments = String.Format("-d -dmf {0} {1} -o c:\output.txt",textBoxContents1,   textBoxContents2);
p.Start(); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-01-29T16:37:29.190

```
Process.Start(new ProcessStartInfo
{
   FileName = @"C:\Program Files\IDM Computer Solutions\UltraCompare\uc.exe",
   Arguments = String.Format("\"{0}\" \"{1}\"", textBoxContents1, textBoxContents2)
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T16:33:42.870

确保你也为参数使用引号！如果其中任何一个`textBoxContents1`或`textBoxContents2`包含空格，你就完蛋了！

# hibernate - 在 Hibernate 条件查询中省略列

> ID：14587564
> 
> 赞同：0
> 
> 时间：2013-01-29T16:32:23.690
> 
> 标签：hibernate

我有一个对象报告，其中包含许多其他列，一个带有大 XML 的 report_XML 列，每次检索它都很重，我想以某种方式从结果集中省略它。我该怎么做？

我的问题与这些类似，但他们没有完全回答这个问题。我知道 Hibernate Criteria 中的 Projections，但是使用它们的问题是我反过来得到一个带有对象数组的列表，我想要返回一个列表，其中包含为 Criteria 制定的给定类型的对象，只是我明确指出的字段定义省略，这可能吗？

[https://forum.hibernate.org/viewtopic.php?p=2410205](https://forum.hibernate.org/viewtopic.php?p=2410205)

[休眠使用条件从数据库中获取特定列](https://stackoverflow.com/questions/6715946/hibernate-fetch-specific-column-from-database-using-criteria)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:39:39.010

Hibernate 允许懒加载任何属性。但是对于基本属性（例如我们的 XML 属性），需要字节码检测。[这在文档](http://docs.jboss.org/hibernate/orm/4.1/manual/en-US/html_single/#performance-fetching-lazyproperties)中都有描述。

因此，如果您将此属性标记为 laz 并执行查询，则 XML 属性将不会被加载，直到您之后实际访问该惰性属性。

# vbscript - 如何获取完整的用户名？

> ID：14587568
> 
> 赞同：3
> 
> 时间：2013-01-29T16:32:39.277
> 
> 标签：vbscript, visual-foxpro, foxpro

我在 VBS 中有以下代码可以完美运行。它查询 AD 以获取用户全名：

```
Set objSysInfo = CreateObject("ADSystemInfo")
strUser = objSysInfo.UserName
Set objUser = GetObject("LDAP://" & strUser)
strFullName = objUser.Get("displayName")
MsgBox strFullName 
```

我想做同样的瘦，但在 Foxpro 7 中。有人有使用 VFP 7 或 9 的经验吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-30T16:18:28.163

sys(0) 返回机器名称和用户，例如

```
lcMachineUser = sys(0)
lcMachine = LEFT( lcMachineUser, AT( "#", lcMachineUser) -1 )
lcUserName = substr( lcMachineUser, AT( "#", lcMachineUser) +1 ) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-31T14:45:08.873

这将从环境变量中获取用户名。

```
username = GETENV("UserName") 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-01-29T17:23:17.083

好吧，看起来这些东西已经很老了……这是真的！;) 我找到了一个解决方案，但是，这可以帮助某人，某处，某天:)

```
loScript = Createobject("MSScriptcontrol.scriptcontrol.1")
loScript.Language = "VBScript"

TESTVBS = [Set objSysInfo = CreateObject("ADSystemInfo")] + chr(13)+chr(10)+;
          [strUser = objSysInfo.UserName] + chr(13)+chr(10)+;
          [Set objUser = GetObject("LDAP://" & strUser)] + chr(13)+chr(10)+;
          [strFullName = objUser.Get("displayName")] + chr(13)+chr(10)
          *[MsgBox strFullName]

loScript.executestatement(TESTVBS) 
```

这就是您从 Foxpro 代码执行 VBS 的方式...两种不再是技术的技术 :)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-03-01T07:09:26.647

我正在使用这个功能：

```
FUNCTION Get_User()
  LOCAL cUsrBuf, nUsrLen, cUserName
  cUsrBuf = SPACE(20)
  nUsrLen = 20
  DECLARE GetUserName IN advapi32 AS GetUserName STRING @cusrbuf, LONG @nusrlen
  =GetUserName(@cusrbuf, @nusrlen)
  cUserName = LEFT(ALLTRIM(cusrbuf), LEN(ALLTRIM(cusrbuf)) - 1)
 RETURN cUserName
ENDFUNC 
```

我会避免使用 SYS(0)，因为：在独立环境中使用 Visual FoxPro 时，SYS(0) 返回 1

**只有**当机器连接到网络时，SYS(0) 才会返回机器名称、一个空格、一个数字符号 (#)，然后是另一个空格，然后是当前用户的 id（或 Visual FoxPro 所在的安全上下文）在跑）。

# ember.js - Ember-Data FixtureAdapter - 向 HasMany 关联提交新记录会导致数组中的条目消失

> ID：14587572
> 
> 赞同：1
> 
> 时间：2013-01-29T16:32:58.793
> 
> 标签：ember.js

我在 ember-data 中的 FixtureAdapter 遇到问题，我在其中向 HasMany 数组添加了一条新记录，但是当我尝试将其提交到商店时，关联中的所有条目都消失了。

RESTAdapter 似乎不会发生这种情况，但我想知道是否有人可以对这里发生的事情有所了解。

我创建了一个显示问题的 jsfiddle。[http://jsfiddle.net/ianpetzer/jSRLV/](http://jsfiddle.net/ianpetzer/jSRLV/) 如果您选择*客户端链接的设施*，然后创建一个新设施并尝试保存。

ClientFacilitiesController 中的方法负责创建和提交更改。

```
App.ClientsFacilitiesController = Ember.ObjectController.extend({
  create_proposed_facility: function () {
  var newFacility;
  //I have also tried this alternate code that is commented out
  //newFacility = this.store.createRecord(App.Facility);
  //newFacility.set('client', this.get('model'));
  //return this.get('facilities').pushObject(newFacility);        
  newFacility = this.get('facilities').createRecord();
  newFacility.set('client', this);
},
save: function () {
  this.store.commit();
}
}); 
```

我的问题是我是否可以更改我的代码以使其与 FixtureAdapter 一起工作，或者这是否是 FixtureAdapter 的错误。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-24T00:33:41.347

FixtureAdapter 实际上没有对您的 FIXTURES 数组进行任何更改。但有一个公关：[https ://github.com/emberjs/data/pull/728](https://github.com/emberjs/data/pull/728)

# sorting - XSLT 仅显示词汇表索引的唯一值？

> ID：14587573
> 
> 赞同：1
> 
> 时间：2013-01-29T16:33:00.660
> 
> 标签：sorting, xslt, xslt-1.0, xslt-grouping

本词汇表从每个条目的第一个字母中得出索引。我正在尝试解决如何仅显示唯一值。已经研究了前面的兄弟和 position() 但似乎找不到正确的方法。我受限于使用 XSLT 1.0 和属性。

词汇表.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="glossary.xsl"?>
<include>
    <file name="data.xml"/>
</include> 
```

数据.xml

```
<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<glossary>
    <entry term="cantaloupe" definition="A kind of melon"/>
    <entry term="banana" definition="A tropical yellow fruit"/>
    <entry term="apple" definition="A red fruit with seeds"/>
    <entry term="orange" definition="An orange citrus fruit"/>  
    <entry term="Cherry"  definition="A red fruit that grows in clusters "/>
    <entry term="cranberry" definition="A sour berry enjoyed at Thanksgiving"/>
    <entry term="avocado"  definition="A mellow fruit enjoyed in guacamole"/>
</glossary> 
```

词汇表.xsl

```
<?xml version="1.0" encoding="UTF-8"?>
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
    <xsl:output method="html" doctype-system="about:legacy-compat" encoding="UTF-8" indent="yes" />
    <xsl:template match="/">
        <html>
            <head></head>
            <body>
            <!-- Index: how to show unique values? -->
                <xsl:for-each select="document('data.xml')/glossary/entry" >
                    <xsl:sort select="@term" data-type="text" order="ascending" case-order="upper-first"/> 
                    <xsl:variable name="initial" select="substring(@term,1,1)" />
                    <a href="#{$initial}"><xsl:value-of select="$initial" /></a> |  
                </xsl:for-each>
            <!-- Glossary -->   
                <dl>
                    <xsl:for-each select="document('data.xml')/glossary/entry" >
                        <xsl:sort select="@term" data-type="text" order="ascending" case-order="upper-first"/> 
                        <xsl:variable name="initial" select="substring(@term,1,1)" />
                        <!-- Alphabetical header: how to only the first instance of each letter? -->
                        <a name="{$initial}"><h1><xsl:value-of select="$initial" /></h1></a> 
                        <dt><xsl:apply-templates select="@term"/></dt>
                        <dd><xsl:apply-templates select="@definition"/></dd>
                    </xsl:for-each>
                </dl> 
            </body>
        </html>
    </xsl:template>
</xsl:stylesheet> 
```

到目前为止的输出

一个 | 一个 | 乙 | c | C | c | ○ |

苹果
   带种子的红色水果鳄梨 鳄梨酱中

的    醇厚水果 b 香蕉    热带黄色水果 c 哈密瓜    一种甜瓜 C 樱桃    成簇生长的红色水果 c 蔓越莓    感恩节享用的酸浆果 o 橙子    橙子柑橘类水果

* * *

期望的输出

一个 | 乙 | c | ○

一个
苹果
   带种子的红色水果

鳄梨 鳄梨
   酱中的一种醇厚水果

b
香蕉
   A 热带黄色水果

c
哈密瓜
   一种甜瓜

樱桃
   一种成簇生长的红色果实

蔓越莓
   感恩节享用的酸浆果

o
orange
   橙色柑橘类水果

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:14:59.687

这是一个分组问题的示例，在 XSLT 1.0 中，进行分组的既定方法是使用 Muenchian 分组。不幸的是，您的方案需要在此基础上查找小写字符，这在 XSLT 1.0 中有点混乱。

尽管如此，我已经提出了一个解决方案，它如下所示：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" doctype-system="about:legacy-compat" 
              encoding="UTF-8" indent="yes" />

  <xsl:key name="kEntryInitial" match="entry/@term"
           use="translate(substring(., 1, 1), 
             'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 
             'abcdefghijklmnopqrstuvwxyz')"/>

  <xsl:template match="/">
    <html>
      <head></head>
      <body>
        <!-- Jump into the data.xml DOM so that keys work -->
        <xsl:apply-templates select="document('data.xml')/glossary" />
      </body>
    </html>
  </xsl:template>

  <xsl:template match="/glossary">
    <!-- Select terms with distinct initials (case invariant) -->
    <xsl:variable name="termsByDistinctInitial"
                  select="entry/@term[generate-id() = 
                             generate-id(key('kEntryInitial', 
                                            translate(substring(., 1, 1), 
                                            'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 
                                            'abcdefghijklmnopqrstuvwxyz'))[1])]" />

    <!-- Header -->
    <xsl:apply-templates select="$termsByDistinctInitial" mode="header">
      <xsl:sort select="." data-type="text" order="ascending" />
    </xsl:apply-templates>

    <!-- Glossary -->
    <dl>
      <xsl:apply-templates select="$termsByDistinctInitial" mode="main">
        <xsl:sort select="." data-type="text" order="ascending" />
      </xsl:apply-templates>
    </dl>
  </xsl:template>

  <xsl:template match="@term" mode="header">
    <xsl:variable name="initial">
      <xsl:call-template name="ToLower">
        <xsl:with-param name="value" select="substring(., 1, 1)" />
      </xsl:call-template>
    </xsl:variable>

    <a href="#{$initial}">
      <xsl:value-of select="$initial" />
    </a>
    <xsl:if test="position() != last()">
      <xsl:text> |</xsl:text>
    </xsl:if>
  </xsl:template>

  <xsl:template match="@term" mode="main">
    <xsl:variable name="initial">
      <xsl:call-template name="ToLower">
        <xsl:with-param name="value" select="substring(., 1, 1)" />
      </xsl:call-template>
    </xsl:variable>
    <a name="{$initial}">
      <h1>
        <xsl:value-of select="$initial" />
      </h1>
    </a>

    <xsl:apply-templates select="key('kEntryInitial', $initial)/.." />
  </xsl:template>

  <xsl:template match="entry">
    <dt>
      <xsl:apply-templates select="@term"/>
    </dt>
    <dd>
      <xsl:apply-templates select="@definition"/>
    </dd>
  </xsl:template>

  <xsl:template name="ToLower">
    <xsl:param name="value" />
    <xsl:value-of select="translate(substring($value, 1, 1), 
                      'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 
                      'abcdefghijklmnopqrstuvwxyz')"/>
  </xsl:template>
</xsl:stylesheet> 
```

在您的输入 XML 上运行时，这会产生以下结果：

```
<!DOCTYPE html SYSTEM "about:legacy-compat">
<html>
  <head>
    <META http-equiv="Content-Type" content="text/html; charset=utf-8">
  </head>
  <body><a href="#a">a</a> |<a href="#b">b</a> |<a href="#c">c</a> |<a href="#o">o</a>
    <dl><a name="a"><h1>a</h1></a><dt>apple</dt>
      <dd>A red fruit with seeds</dd>
      <dt>avocado</dt>
      <dd>A mellow fruit enjoyed in guacamole</dd><a name="b"><h1>b</h1></a><dt>banana</dt>
      <dd>A tropical yellow fruit</dd><a name="c"><h1>c</h1></a><dt>cantaloupe</dt>
      <dd>A kind of melon</dd>
      <dt>Cherry</dt>
      <dd>A red fruit that grows in clusters </dd>
      <dt>cranberry</dt>
      <dd>A sour berry enjoyed at Thanksgiving</dd><a name="o"><h1>o</h1></a><dt>orange</dt>
      <dd>An orange citrus fruit</dd>
    </dl>
  </body>
</html> 
```

我建议考虑的一件事是使用一个简单的 XSLT 来“准备”你的词汇表和首字母：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes"/>

  <xsl:template match="@* | node()">
    <xsl:copy>
      <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>

  <xsl:template match="entry">
    <xsl:copy>
      <xsl:attribute name="initial">
        <xsl:value-of select="translate(substring(@term, 1, 1),
                                'ABCDEFGHIJKLMNOPQRSTUVWXYZ',
                                'abcdefghijklmnopqrstuvwxyz')"/>
      </xsl:attribute>
      <xsl:apply-templates select="@* | node()" />
    </xsl:copy>
  </xsl:template>
</xsl:stylesheet> 
```

这会产生：

```
<glossary>
  <entry initial="c" term="cantaloupe" definition="A kind of melon" />
  <entry initial="b" term="banana" definition="A tropical yellow fruit" />
  <entry initial="a" term="apple" definition="A red fruit with seeds" />
  <entry initial="o" term="orange" definition="An orange citrus fruit" />
  <entry initial="c" term="Cherry" definition="A red fruit that grows in clusters " />
  <entry initial="c" term="cranberry" definition="A sour berry enjoyed at Thanksgiving" />
  <entry initial="a" term="avocado" definition="A mellow fruit enjoyed in guacamole" />
</glossary> 
```

那么如果你使用这个准备好的版本作为词汇表，主要的 XSLT 可以摆脱所有那些丑陋的`translate()`功能，变得更干净：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="html" doctype-system="about:legacy-compat" 
              encoding="UTF-8" indent="yes" />

  <xsl:key name="kEntryInitial" match="entry/@initial" use="."/>

  <xsl:template match="/">
    <html>
      <head></head>
      <body>
        <!-- Jump into the data.xml DOM so that keys work -->
        <xsl:apply-templates select="document('data2.xml')/glossary" />
      </body>
    </html>
  </xsl:template>

  <xsl:template match="/glossary">
    <!-- Select terms with distinct initials (case invariant) -->
    <xsl:variable name="termsByDistinctInitial"
                  select="entry/@initial[generate-id() = 
                             generate-id(key('kEntryInitial', .)[1])]" />

    <!-- Header -->
    <xsl:apply-templates select="$termsByDistinctInitial" mode="header">
      <xsl:sort select="." data-type="text" order="ascending" />
    </xsl:apply-templates>

    <!-- Glossary -->
    <dl>
      <xsl:apply-templates select="$termsByDistinctInitial" mode="main">
        <xsl:sort select="." data-type="text" order="ascending" />
      </xsl:apply-templates>
    </dl>
  </xsl:template>

  <xsl:template match="@initial" mode="header">
    <a href="#{.}">
      <xsl:value-of select="." />
    </a>
    <xsl:if test="position() != last()">
      <xsl:text> |</xsl:text>
    </xsl:if>
  </xsl:template>

  <xsl:template match="@initial" mode="main">
    <a name="{.}">
      <h1>
        <xsl:value-of select="." />
      </h1>
    </a>

    <xsl:apply-templates select="key('kEntryInitial', .)/.." />
  </xsl:template>

  <xsl:template match="entry">
    <dt>
      <xsl:apply-templates select="@term"/>
    </dt>
    <dd>
      <xsl:apply-templates select="@definition"/>
    </dd>
  </xsl:template>
</xsl:stylesheet> 
```

当然，最终输出与第一个示例相同。如果您的 XSLT 处理器支持该`node-set()`功能，那么也可以在单个 XSLT 中完成这两个处理步骤。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:53:24.180

您需要的技术称为*Muenchian 分组*。首先定义一个*键*，按条目的首字母小写对条目元素进行分组

```
<xsl:key name="entryByInitial" match="entry" use="translate(substring(@term, 1, 1), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')" /> 
```

然后你使用一个技巧`generate-id`来提取与每个键匹配的*第一个*元素

```
<xsl:for-each select="document('data.xml')">
  <!-- iterate over the "groups" to build the top links -->
  <xsl:for-each select="glossary/entry[generate-id() = generate-id(key('entryByInitial', translate(substring(@term, 1, 1), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'))[1])]">
    <xsl:sort select="translate(@term, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')" data-type="text" order="ascending"/>
    <xsl:variable name="initial" select="translate(substring(@term, 1, 1), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')" />
    <!-- insert a leading | before all but the first link -->
    <xsl:if test="position() &gt; 1"> | </xsl:if>
    <a href="#{$initial}"><xsl:value-of select="$initial" /></a>
  </xsl:for-each>

  <!-- iterate over the groups again -->
  <xsl:for-each select="glossary/entry[generate-id() = generate-id(key('entryByInitial', translate(substring(@term, 1, 1), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz'))[1])]">
    <xsl:sort select="translate(@term, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')" data-type="text" order="ascending"/>
    <xsl:variable name="initial" select="translate(substring(@term, 1, 1), 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')" />
    <a name="{$initial}"><h1><xsl:value-of select="$initial" /></h1></a>
    <dl>
      <!-- apply templates for all entries with this key value -->
      <xsl:apply-templates select="key('entryByInitial', $initial)">
        <xsl:sort select="translate(@term, 'ABCDEFGHIJKLMNOPQRSTUVWXYZ', 'abcdefghijklmnopqrstuvwxyz')" data-type="text" order="ascending"/>
      </xsl:apply-templates>
    </dl>
  </xsl:for-each>
</xsl:for-each> 
```

并定义一个单独的模板

```
<xsl:template match="entry">
  <dt><xsl:apply-templates select="@term"/></dt>
  <dd><xsl:apply-templates select="@definition"/></dd>
</xsl:template> 
```

# sql-server - 为什么 BIDS 使用配置文件中的值修改连接管理器？

> ID：14587579
> 
> 赞同：0
> 
> 时间：2013-01-29T16:33:11.820
> 
> 标签：sql-server, ssis

我参与了这个论坛的讨论，关于当你修改 XML 配置文件时 SSIS 是否覆盖包。这篇文章底部的两篇文章彼此不同意，一篇说包确实会被覆盖，另一篇说它们不会。我相信我有答案，但正在寻找其他人对此的想法 - 如果您在设计时修改 xml 包配置并通过 Visual Studio 运行包，则在保存包时，包代码实际上由 SSIS 修改以反映您已更改的配置。但是，如果您通过 DTEXEC 或 SQL Server Agent 运行包，则不会修改包代码

如果我在 Visual Studio 中有一个包，如果我在 XML 配置中修改连接字符串中的服务器名称（将服务器 A 更改为服务器 B），然后运行该包

我期望的行为很好，它将数据写入第二台服务器上的表我不期望的行为是这样的。当我在 Visual Studio 包中拉起连接管理器时，服务器 A 已更改为服务器 B

SSIS 修改了我包中的代码。

这种行为可能非常令人困惑，并且在我正在从事的项目上花费了我很多时间。恕我直言，应该只在运行时覆盖值，而不是在设计时覆盖包！

你对此有什么想法吗？

### 帖子 1 声明它确实覆盖

[ssis xml 配置修改包 xml - 我疯了吗？](https://stackoverflow.com/questions/14516847/ssis-xml-configuration-modifies-package-xml-am-i-crazy/14516991#comment20248653_14516991)

### 帖子 2 声明它不会覆盖

[ssis xml 配置 - 配置覆盖包 - ssis 会在你不告诉它的情况下更改配置吗？](https://stackoverflow.com/questions/14535873/ssis-xml-configurations-configs-overwrite-packages-does-ssis-change-config-w/14545182?iemail=1#14545182)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-31T11:21:03.303

如果您从 Visual Studio 2005 / 2008（对于 SQL 2005 / 2008 / 2008 R2）执行一个包，那么它确实会使用配置的值进行覆盖。

使用项目部署模型的 Visual Studio 2010（用于 SQL 2012）似乎可以避免此问题。

# mysql - JDBC4/MySQL 语法错误：从 mysql 表中检索数据时

> ID：14587583
> 
> 赞同：0
> 
> 时间：2013-01-29T16:33:17.997
> 
> 标签：mysql, jdbc

下面的代码有什么问题吗？

String sql = "SELECT username, password FROM REGCUSTOMERS" + "WHERE username = ? AND password = ?";

我正在尝试从 REGCUSTOMERS 表的用户名和密码列中获取数据。

*日食错误：*

com.mysql.jdbc.exceptions.jdbc4.MySQLSyntaxErrorException：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以获取在 '= 附近使用的正确语法？和密码=？在第 1 行

```
 private boolean isAuthenticated(String userid, String password) {

    // JDBC logic to verify from database.

    try {
        Class.forName(driverName);
        Connection conn = null;
        PreparedStatement st = null;
        String sql = "SELECT username, password FROM REGCUSTOMERS" + "WHERE username = ? AND password = ?";

        conn = DriverManager.getConnection(databaseURL, USERNAME, PASSWORD);

        st = conn.prepareStatement(sql);
        ResultSet rs = st.executeQuery(sql);

        if (rs.getString("username") != userid && rs.getString("password") != password) {

            return false;
        }
        rs.close();
        st.close();
        conn.close();

    } catch (Exception e) {
        e.printStackTrace();
    } 
    return true;

} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:37:03.667

REGCUSTOMERS 和 WHERE 之间没有空格。添加空间，你应该没问题：

```
 String sql = "SELECT username, password FROM REGCUSTOMERS " + "WHERE username = ? AND password = ?"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:37:19.417

这部分：

```
... FROM REGCUSTOMERS" + "WHERE username ... 
```

将产生以下 SQL：

```
FROM REGCUSTOMERSWHERE 
```

那当然是错误的。

`+`那里没有意义，但如果你想要它，你至少在一侧需要一个空间

```
"... FROM REGCUSTOMERS " + "WHERE username ..." 
```

# javascript - 使用 background-size:contain 时获取 div 背景图像的 XY 坐标和高度/宽度

> ID：14587584
> 
> 赞同：1
> 
> 时间：2013-01-29T16:33:21.507
> 
> 标签：javascript, html, css, math

我正在设计一个网页，其中包含主页背景图像的照片。图像必须覆盖尽可能多的可用窗口大小，同时保持正确的纵横比。

为此，我有一个带有以下 CSS 的“容器”div：

```
div.background {
    background-image: url('/Content/Images/Home/main-bg.png');
    background-repeat:no-repeat;
    background-size:contain;
    background-position:center;    
    float:left;
    width:100%;
} 
```

这是完美的工作。

但是，我现在需要在图像的特定位置放置额外的 dom 元素，这些元素也被缩放到与背景图像相同的位置。

我最初认为使用 JQuery 并阅读“background-image-x”、“background-image-y”、“background-image-x”、“background-position-x”和“background-position-y” CSS属性可能会给我定位附加元素所需的信息。

但是，这些并没有返回所需的信息（例如，image-x 和 image-y 都返回“50%”）。

是否有一些不错且简单（ish）的方法来实现我需要的...或者我将不得不求助于使用 Javascript 和数学来手动设置背景图像的位置和大小（从而给我我需要的答案)?

*我讨厌数学。请不要让我使用它:)*

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:46:49.040

您可以通过一些非常简单的比较比率来解决这个问题，即图像宽度与图像高度与容器宽度与容器高度的比较。确定图像是水平缩放还是垂直缩放。

```
img_ratio = img_width / img_height;
container_ratio = $(elm).width() / $(elm).height(); 
```

之后，您可以非常简单地计算出偏移量，因为您可以计算出图像缩放的百分比。并将其应用于相反的测量，并将其与容器进行比较。

```
if(container_ratio > img_ratio){
    //centered x height 100%
        var scale_percent = $(elm).height() / img_height;
        var scaled_width = img_width * scale_percent;
        var x_offset = ($(elm).width() - scaled_width) / 2;
        offset = [x_offset, 0];
}else{
    //centered y width 100%
        var scale_percent = $(elm).width() / img_width;
        var scaled_height = img_height * scale_percent;
        var y_offset = ($(elm).height() - scaled_height) / 2;
        offset = [0, y_offset];
} 
```

我已将其包含在一个示例小提琴中：http: [//jsfiddle.net/y2LE4/](http://jsfiddle.net/y2LE4/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:20:05.877

我希望能有所帮助。

尝试：

```
$(document).ready(function(){

var something = background.offset();

 } 
```

或者

```
$(document).ready(function(){
      var something = $('.background').outerWidth(true);
} 
```

或者只是宽度功能：[http ://api.jquery.com/width/](http://api.jquery.com/width/)

# javascript - 在用户之间来回发送低延迟数据

> ID：14587587
> 
> 赞同：-1
> 
> 时间：2013-01-29T16:33:28.973
> 
> 标签：javascript, android, node.js, cordova, websocket

我可以使用 html5、JavaScript 和服务器在用户之间发送低延迟数据的有效方法是什么？

我没有使用 node.js、web 套接字或其他类似的低延迟软件的经验。它需要得到android和ios中默认浏览器的支持。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:45:15.010

WebSocket API 是目前浏览器原生的最佳（阅读“最低延迟”）解决方案。Socket.IO 之类的库可以帮助您相对轻松地实现 WebSocket 系统。

最终，您可能还需要考虑 WebRTC 数据通道 API。它还处于跨浏览器实现的早期阶段，但是使用 WebRTC，您可以在浏览器之间建立直接的点对点连接，这甚至比需要客户端之间的服务器的 WebSocket API 更好。

* * *

## 回答 #2

> 赞同：-2
> 
> 时间：2013-01-29T17:17:04.463

对于低延迟，您应该使用 Java DatagramSocket 直接向用户发送 UDP 数据包，但您不能从浏览器执行此操作，因此您必须通过服务器。您必须将数据发送到服务器，在服务器上排队，并让接收方的浏览器定期轮询服务器以检查任何数据。

# grails - Grails悲观锁定不起作用（在我的情况下）

> ID：14587588
> 
> 赞同：0
> 
> 时间：2013-01-29T16:33:29.310
> 
> 标签：grails, spring-security, grails-plugin

在 Greach 2.0 中，Burt Beckwith 谈到了**悲观锁定**。

我正在尝试在我的 grails 应用程序中设置悲观锁定，但它不起作用。

我在我的 Config.groovy 中写过：

```
grails.plugins.springsecurity.rejectIfNoRule = true 
```

我的控制器是：

```
class LibreController {
   def index = {
      render 'Forbidden access because there isn\'t rule'
   }
} 
```

并在我的导航器中输入“http：//本地/PruebaSeguridad /libre”，我可以在没有任何身份验证的情况下阅读*“禁止访问，因为没有规则”的消息。*

我不确定我是否理解悲观锁定是如何工作的，或者我做错了什么。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T11:05:52.827

解决了！最初我在*spring-security-core之后安装了**kickstart-with-bootstrap*插件，并且（我想）它破坏了一些东西。我在安装 spring-security-core 插件后重新安装了 kickstart-with-bootstrap，它运行良好。

 *非常感谢您*

# asp-classic - 使用经典 ASP 发送电子邮件以使用受信任的连接交换服务器

> ID：14587593
> 
> 赞同：0
> 
> 时间：2013-01-29T16:33:41.350
> 
> 标签：asp-classic, exchange-server

我有一个现有的经典 ASP 应用程序，它使用 CDO 通过 SMTP 发送邮件。据我所知，这一直适用于交换服务器。一位客户现在告诉我，他们与他们的交换服务器建立了受信任的连接，并且他们不需要通过 SMTP 使用用户名/密码登录的其他应用程序，也就是我的方法是过时的，他们希望我使用受信任的连接。

您将如何使用具有经典 ASP 的 CDO 将邮件发送到具有可信连接的交换服务器？

# c++ - 内存泄漏跟踪

> ID：14587595
> 
> 赞同：0
> 
> 时间：2013-01-29T16:33:43.393
> 
> 标签：c++, new-operator

我已经将我的运营商 new[] 覆盖为

```
void* operator new[](std::size_t sz, const char *file, int line)

{
    void* mem = malloc(sz);

    if(mem == 0){
            printf("Could not allocate the desired memory, the new operator fails\n");
            std::abort();
        }
    printf("Allocation has been done!\n");
    printf("Allocation has been done! In %s, line #%i, %p[%i]\n", file, line, mem, sz);
    return mem;

}
#define DEBUG_NEW2 new[](__FILE__, __LINE__)
#define new[] DEBUG_NEW2 
```

我的程序主要使用这种类型的 new 运算符，这就是我比较关心它的原因。但是，编译器给了我“宏名称 [-Werror] 后缺少空格”的错误消息。我试图玩弄“#define new[] DEBUG_NEW2”。在某些情况下，它可以编译，但我不会被覆盖 new[] 。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:43:24.020

这里的问题是开头的那一行`#define new[]`

您正在尝试创建一个名为 的宏`new[]`。

首先，这是非法的，因为宏名称必须是有效标识符，这意味着它只能包含字母、下划线、数字，并且不能以数字开头。

其次，您试图为关键字赋予新的含义。这是不允许的，这意味着您的程序无效或给出未定义的行为。

无需添加这样的宏来重载运算符 new[]。事实上，你需要做的就是`void* operator new[](size_t)`在想要的范围内声明一个带有签名的函数，它会被自动调用以进行数组分配。

# c++ - 如何比较两个小时并说出哪个更晚或更早？

> ID：14587598
> 
> 赞同：0
> 
> 时间：2013-01-29T16:33:53.253
> 
> 标签：c++, time, compare

如何比较两个小时？我尝试使用下面的代码，但它给了我两次`true`，但它应该给`false`和`true`：

```
#include <iostream>
#include <cstdlib>
#include <cmath>
using namespace std;

bool earlierEqual(int h1, int m1, int s1, int h2, int m2, int s2)
{
    if(h1 <= h2)
    {
        return true;
    }
    else
    {
        if(m1 <= m2)
        {
            return true;
        }
        else
        {
            if(s1 <= s2)
            {
                return true;
            }
            else
                return false;
        }
    }
}

bool laterEqual(int h1, int m1, int s1, int h2, int m2, int s2)
{
    if(h1 >= h2)
    {
        return true;
    }
    else
    {
        if(m1 >= m2)
        {
            return true;
        }
        else
        {
            if(s1 >= s2)
            {
                return true;
            }
            else
                return false;
        }
    }
}

int main()
{
    int h1 = 12, m1 = 4, s1 = 29;
    int h2 = 11, m2 = 12, s2 = 1;

    // false
    cout << earlierEqual(h1, m1, s1, h2, m2, s2) << "\n";
    // true
    cout << laterEqual(h1, m1, s1, h2, m2, s2) << "\n";

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:38:47.060

`else`只有当时间相等时，您的分支才应该被激活。否则，分钟的比较将决定小时`h1`是否*大于*小时`h2`。您应该将代码更改为以下内容：

```
bool earlierEqual(int h1, int m1, int s1, int h2, int m2, int s2)
{
    if (h1 < h2)
    {
        return true;
    }
    else if (h1 == h2)
    {
        if (m1 < m2)
        {
            return true;
        }
        else if (m1 == m2)
        {
            if (s1 < s2)
            {
                return true;
            }
        }
    }

    return false;
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:37:08.097

如果小时数相等，则必须检查分钟数，如果小时数相等，则必须检查秒数。只有当有less条件时，才能立即返回true。同样适用于第二个功能：只有更大的情况下，您才能提前返回。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T16:37:21.373

在进行比较之前，在几秒钟内转换所有内容会更容易。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-01-29T16:50:09.073

我就是这样做的。它更具可读性且不易出错。转换为秒，然后进行比较。

```
#include <iostream>
#include <cstdlib>
#include <cmath>
using namespace std;

bool earlierEqual(int h1, int m1, int s1, int h2, int m2, int s2)
{
    int totalSeconds1 = getTotalSeconds(h1, m1, s1);
    int totalSeconds2 = getTotalSeconds(h2, m2, s2);

    if(totalSeconds1 <= totalSeconds2)
    {
        return true;
    }
    else
    {
        return false;
    }
}

bool laterEqual(int h1, int m1, int s1, int h2, int m2, int s2)
{
    int totalSeconds1 = getTotalSeconds(h1, m1, s1);
    int totalSeconds2 = getTotalSeconds(h2, m2, s2);

    if(totalSeconds1 >= totalSeconds2)
    {
        return true;
    }
    else
    {
        return false;
    }
}

bool getTotalSeconds(int h1, int m1, int s1)
{
   return h1 * 3600 + m1 * 60 + s1;
} 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2013-01-29T17:20:33.467

使用[`std::tie`](http://en.cppreference.com/w/cpp/utility/tuple/tie)：

```
#include <tuple>
bool earlierEqual(int h1, int m1, int s1, int h2, int m2, int s2) {
  return std::tie(h1, m1, s1) <= std::tie(h2, m2, s2);
}
bool laterEqual(int h1, int m1, int s1, int h2, int m2, int s2) {
  return std::tie(h1, m1, s1) >= std::tie(h2, m2, s2);
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-01-29T17:20:54.130

只是一个建议：您可以用一个 32 位整数表示小时+分钟+秒。（小时是 0-24 - 5 位，秒 0-60：6 位分钟 0-60：6 位）

一旦你将两个数字都放在两个整数中，你基本上把逻辑放在这个块中（你需要位掩码来提取小时、分钟、秒）

伪码如下：

```
bool compare(val1,val2) { 

if(h1 < h2) return true; 
if( h1 ==  h2 && m1 < m2 )  return true;
if( h1 == h2 && m1 == m2 && s1 <s2) return true;
return false  ;
} 
```

# javascript - 滑动切换无法正常工作

> ID：14587603
> 
> 赞同：1
> 
> 时间：2013-01-29T16:34:07.923
> 
> 标签：javascript, jquery

我对这段代码有疑问：HTML

```
 <h2>Lorem ipsum</h2>
       <p>Lorem ipsum dolor sit amet consectetuer ridiculus pellentesque Nunc libero Lorem. Auctor vel eget Donec adipiscing urna ullamcorper tincidunt enim auctor Vivamus. Pede wisi semper Praesent Sed non orci elit Integer dis et. Sed eu diam vitae et nibh eu interdum dui Nulla suscipit. Non tristique id elit at tempor Curabitur malesuada.</p>
       <span class="hidden fullArticle">
         <p>Lorem ipsum dolor sit amet consectetuer felis urna consectetuer Vivamus         sapien. Auctor nibh vel Fusce tortor habitant penatibus mattis hendrerit tincidunt Nullam. Et ac laoreet quis porta Sed adipiscing quis Nulla justo nibh. In ut Vestibulum tortor ligula dolor dis platea quis malesuada Nam. Eget leo augue sociis Sed Curabitur turpis    Nulla condimentum tortor magnis. Cursus suscipit faucibus ipsum sed.</p>
       </span>
       <p class="link"><a href="#">Show full article</a></p> 
```

jQuery JavaScript

```
 $(function() {

  /* hide full articles*/

  $(".hidden").hide();
  $("span.hidden").removeClass("hidden");

  /* showing and hiding of full articles */
  $(".link a").click(function(e) {
    e.preventDefault();
    var anchor = $(this);
    var article = $(this).parent().prev("span");
    article.slideToggle(1000, function(){
      if (anchor.text() == "Show full article")
        anchor.text("Hide article");
      else
        anchor.text("Show full article"); 
    });    
  });  

}); 
```

结果应该是，当我单击锚点“显示全文”时，它前面的全篇类的跨度应该是滑动切换，并且锚点中的文本应该更改为“隐藏文章”。

之后，当我单击“隐藏文章”时，它应该再次滑动切换并将文本更改为“显示全文”。

但是出了点问题，它不能正常工作。你能给我一些解决方案吗？感谢您的帮助。还有jsFiddle [http://jsfiddle.net/zYAcB/18/](http://jsfiddle.net/zYAcB/18/)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:45:13.387

It works properly if you just change your `<span>` element to `<div>`

[http://jsfiddle.net/zYAcB/30/](http://jsfiddle.net/zYAcB/30/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:39:51.023

看看 - [http://jsfiddle.net/zYAcB/18/](http://jsfiddle.net/zYAcB/18/)

我编辑了你的 javascript：

```
$(function () {
    /* hide full articles*/

    $(".hidden").hide();

    /* showing and hiding of full articles */
    $(".link a").click(function (e) {
        e.preventDefault();
        var anchor = $(this);
        var article = $(this).parent().prev("div");
        article.slideToggle(1000);
        if (anchor.text() == "Show full article") {
            anchor.text("Hide article");
        } else {
            anchor.text("Show full article");
        }
    });
}); 
```

并取出`.hidden { display: none; }`css中的位。

`<p>`顺便说一句 -在行内元素中包含块级元素在语义上是不正确的，`<span>`所以我将其改为 a `<div>`。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:47:51.470

你的问题是，`span`你`inline`需要一个`block`水平元素`slide`才能工作。您可以将其设置`span`为`display:block`，也可以将其替换为`div`.

# ruby-on-rails - 为什么在生产模式下会出现此错误？

> ID：14587607
> 
> 赞同：1
> 
> 时间：2013-01-29T16:34:28.410
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我刚刚从开发模式切换到生产模式。

但是，现在它总是显示“出了点问题”错误。

我试过了

```
$ rails s -e production 
```

我访问了该页面。然后我得到了这个错误。如何使其在生产模式下正常工作？

```
Processing by TopController#index as HTML
  Rendered layouts/_social.html.erb (0.5ms)
  Rendered top/index.html.erb within layouts/application (276.1ms)
Completed 500 Internal Server Error in 549ms

ActionView::Template::Error (delete.js.coffee isn't precompiled):
    11:     <%= stylesheet_link_tag    "application","http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/smoothness/jquery-ui.css" %> 
```

**配置/环境/production.rb**

```
Sample::Application.configure do
  # Settings specified here will take precedence over those in config/application.rb

  # Code is not reloaded between requests
  config.cache_classes = true

  # Full error reports are disabled and caching is turned on
  config.consider_all_requests_local       = false
  config.action_controller.perform_caching = true

  # Disable Rails's static asset server (Apache or nginx will already do this)
  config.serve_static_assets = false

  # Compress JavaScripts and CSS
  config.assets.compress = true

  # Don't fallback to assets pipeline if a precompiled asset is missed
  config.assets.compile = false

  # Generate digests for assets URLs
  config.assets.digest = true

  # Defaults to nil and saved in location specified by config.assets.prefix
  # config.assets.manifest = YOUR_PATH

  # Specifies the header that your server uses for sending files
   config.action_dispatch.x_sendfile_header = "X-Sendfile" # for apache
  # config.action_dispatch.x_sendfile_header = 'X-Accel-Redirect' # for nginx

  # Force all access to the app over SSL, use Strict-Transport-Security, and use secure cookies.
  # config.force_ssl = true

  # See everything in the log (default is :info)
  # config.log_level = :debug

  # Prepend all log lines with the following tags
  # config.log_tags = [ :subdomain, :uuid ]

  # Use a different logger for distributed setups
  # config.logger = ActiveSupport::TaggedLogging.new(SyslogLogger.new)

  # Use a different cache store in production
  # config.cache_store = :mem_cache_store

  # Enable serving of images, stylesheets, and JavaScripts from an asset server
  # config.action_controller.asset_host = "http://assets.example.com"

  # Precompile additional assets (application.js, application.css, and all non-JS/CSS are already added)
  # config.assets.precompile += %w( search.js )

  # Disable delivery errors, bad email addresses will be ignored
  config.action_mailer.raise_delivery_errors = false

  # Enable threaded mode
  # config.threadsafe!

  # Enable locale fallbacks for I18n (makes lookups for any locale fall back to
  # the I18n.default_locale when a translation can not be found)
  config.i18n.fallbacks = true

  # Send deprecation notices to registered listeners
  config.active_support.deprecation = :notify

  # Log the query plan for queries taking more than this (works
  # with SQLite, MySQL, and PostgreSQL)
  # config.active_record.auto_explain_threshold_in_seconds = 0.5

end 
```

我正在使用 Apache2 + 乘客

**httpd.conf**

```
.....
RailsEnv production
..... 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:36:56.350

在 config/environments/production.rb 中添加这一行

```
 config.assets.precompile += %w( *.css *.erb *.scss *.js *.coffee *.png *.jpg *.ico *.gif) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:54:45.197

[避免使用](https://stackoverflow.com/questions/8821864/config-assets-compile-true-in-rails-production-why-not)

```
config.assets.compile = true #quick dirty way 
```

只需将您未包含在 application.js (application.css) 中的所有资产添加到 production.rb 中

```
 config.assets.precompile += %w(delete.js.coffee) 
```

比再次预编译资产，这个错误将消失（如果 delete.js.coffee 放在 app/assets/javascripts 中）

与任何其他独立资产文件相同。您可以将它们存储在一个文件夹中并将一个文件夹传递到`config.assets.precompile`

# java - 在运行时添加内容

> ID：14587609
> 
> 赞同：0
> 
> 时间：2013-01-29T16:34:35.767
> 
> 标签：java, android

我刚刚开始学习 Android，并且一直在开发一个简单的应用程序，用户可以在其中与计算机进行简单的对话。

我的问题是，如何在运行时以允许用户输入显示在视图上的方式设置 UI？随着输入提示的增加，会显示更多的内容，所以我需要使用滚动条，我相信这可以通过滚动视图布局来处理。

基本上，我想要实现的目标与聊天应用程序在运行时显示内容的方式非常相似。我该怎么做呢？我环顾四周，但无法准确地将自己指向正确的方向。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:38:27.497

有多种方法可以解决这个问题：

1.  使用 a`ListView`甚至 a`ListActivity`并将每条新消息添加为新条目。`ListView`默认情况下是可滚动的。
2.  使用`TextView`with`android:inputType=textMultiLine`来获得一个简单的多行文本视图。
3.  您还可以使用 2\. with a`EditText`来标记对话的一部分，复制它们等等。另请参阅：[从 Android AlertDialog 复制文本？](https://stackoverflow.com/questions/7197939/copy-text-from-alertdialog-in-android/7198401#7198401)

如果我在你那里，我会按这个顺序试一试。我还将创建一个自定义`ListAdapter`并覆盖`getView()`以自定义您想要的消息。这是一个例子（不完全相同，但应该给你一个想法）：[Android Spinner databind using array list](https://stackoverflow.com/questions/6562236/android-spinner-databind-using-array-list/6562433#6562433)

一种想法是使您发送的所有消息都向左对齐，并且所有收到的消息都向左对齐。这样，它看起来就像 iOS 消息传递应用程序。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T17:37:23.737

您可以使用 ScrollView 创建聊天会话。首先，尝试这样的事情：

聊天活动.java：

```
import android.app.Activity;
import android.os.Bundle;
import android.widget.LinearLayout;
import android.widget.TextView;

public class ChatActivity extends Activity{

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.chat);

        LinearLayout layout = (LinearLayout)findViewById(R.id.chatWindow);

        //When you get a new message to display, you can add it at runtime like this:
        TextView message1 = new TextView(this);
        message1.setText("how are you");
        layout.addView(message1);

        //Add another message
        TextView message2 = new TextView(this);
        message1.setText("I'm fine");
        layout.addView(message2);

    }

} 
```

然后创建一个chat.xml 资源：

```
<?xml version="1.0" encoding="utf-8"?>
<ScrollView xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <LinearLayout
        android:id="@+id/chatWindow"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:orientation="vertical" />

</ScrollView> 
```

稍后，您可以使用 AsyncTask 之类的东西在更新聊天时与用户进行更好的交互。AsyncTask 允许您在用户使用 UI 时在后台执行操作。

# mysql - MYSQL 在多个条目上按位或

> ID：14587611
> 
> 赞同：0
> 
> 时间：2013-01-29T16:34:37.513
> 
> 标签：mysql, bit-manipulation

我需要根据所有文章的状态（也是位）更新作业的状态（位）。

例如，我有一份工作，其中有以下文章

```
A: status = 1001
B: status = 1011
C: status = 0010 
```

现在我希望工作状态为 = A OR B OR C = 1011。

有什么方法可以在 MYSQL 中做到这一点，而不必遍历所有文章？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:37:55.343

与许多问题一样，阅读文档是一个简单的案例：[MySQL Bit Functions](http://dev.mysql.com/doc/refman/5.0/en/bit-functions.html)。

但是，让我们在这里直截了当地说一些事情。这些值是位掩码吗？如果是这种情况（我敢肯定），那么`B`等于`A | C`，这有点奇怪。通常，位掩码以下列方式工作......

```
A = 0001
B = 0010
C = 0100
...etc. 
```

通过这种方式，您可以组合值并让位掩码考虑多个选项，因此`A`和`C`( `A | C`) 的组合将是`0101`。

位掩码的全部目的是它们可以在一个固定长度的字符串中表示多个值，因此它们是节省空间的。缺点是它们不会产生人类可读的输出，除非你习惯于看*The Matrix*！

另一方面，我可能会走得很远。

但是，为了让您继续前进，我相信您正在寻找以下`BIT_OR`函数：[MySQL GROUP BY (Aggregate) Functions](http://dev.mysql.com/doc/refman/5.0/en/group-by-functions.html#function_bit-or)`OR`，它计算并返回`expr`.

# sql - 如何重用请求的结果（tSQL）

> ID：14587620
> 
> 赞同：1
> 
> 时间：2013-01-29T16:34:52.927
> 
> 标签：sql, tsql, stored-procedures

我想写一个像下面这样的存储过程

```
allInterestingKeys = SELECT MyKey FROM MyTable WHERE CreatedDate < CAST('2013-01-01' AS date)
DELETE MyTable01 WHERE MyKey IN allInterestingKeys
DELETE MyTable02 WHERE MyKey IN allInterestingKeys 
...
DELETE MyTable10 WHERE MyKey IN allInterestingKeys 
```

理想情况下，我只想运行`SELECT MyKey FROM MyTable WHERE ...`一次以使程序比

```
DELETE MyTable01 WHERE MyKey IN (SELECT MyKey FROM MyTable WHERE CreatedDate < CAST('2013-01-01' AS date))
DELETE MyTable02 WHERE MyKey IN (SELECT MyKey FROM MyTable WHERE CreatedDate < CAST('2013-01-01' AS date))
...
DELETE MyTable10 WHERE MyKey IN (SELECT MyKey FROM MyTable WHERE CreatedDate < CAST('2013-01-01' AS date)) 
```

最好的编码方式是什么？谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:38:13.167

使用临时表！`SELECT INTO`是最简单的，但您也可以提前设计表和`INSERT INTO`临时表

```
SELECT MyKey 
INTO #allInterestingKeys
FROM MyTable 
WHERE CreatedDate < CAST('2013-01-01' AS date) 
```

然后从临时表中选择列表

```
DELETE MyTable01 WHERE MyKey IN (SELECT MyKey FROM #allInterestingKeys) 
```

或者`INNER JOIN`到临时表中删除

```
DELETE t
FROM MyTable01 t
INNER JOIN #allInterestingKeys k
  ON t.MyKey = k.MyKey 
```

# bash - 有哪些 tkdiff 快捷方式？

> ID：14587621
> 
> 赞同：2
> 
> 时间：2013-01-29T16:34:53.377
> 
> 标签：bash, diff, shortcuts

我发现'n' 会带你到下一个差异，'p' 会带你到前一个，'enter' 会带你到最近的一个。还有其他人吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:46:41.170

From the help button:

Keyboard Navigation

When a text widget has the focus, you may use the following shortcut keys:

```
f   First diff
c   Center current diff
l   Last diff
n   Next diff
p   Previous diff
1   Merge Choice 1
2   Merge Choice 2 
```

The cursor, Home, End, PageUp and PageDown keys work as expected, adjusting the view in whichever text window has the focus. Note that if Synchronize Scrollbars is set in Preferences, both windows will scroll at the same time.

# c# - 使用目录填充列表

> ID：14587623
> 
> 赞同：0
> 
> 时间：2013-01-29T16:35:00.973
> 
> 标签：c#

我用这个

```
 if (string.IsNullOrEmpty(pastae)) { MessageBox.Show("Must choose a folder"); }
        else
        {   nombres = Directory.GetFiles(pastae).ToArray();
            listBox1.Items.AddRange(nombres);                
        } 
```

效果很好，但是我需要 listview 的一些属性，并且我已经阅读了 list<> 在这种情况下填充 listview 的效率更高，我尝试了以下代码：

```
 List<string> mclist = new List<string>();
      listview.Items.Clear();
      foreach(string elem in mclist)
      {
      listview.Items.Add(new ListViewItem(elem));
      } 
```

但我怎么做不到这个

```
 list<string> nmfiles = new List<string>();
      nmfiles =  Directory.GetFiles(pastae).ToArray(); 
```

感谢任何方向。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:36:43.427

您不能分配`string[]`给`List<string>`。但是，您可以使用`ToList()`方法将数组转换为列表：

```
List<string> nmfiles =  Directory.GetFiles(pastae).ToList(); 
```

# jquery-selectors - jQuery - 如何在表格行中查找具有特定值的元素

> ID：14587624
> 
> 赞同：0
> 
> 时间：2013-01-29T16:35:05.453
> 
> 标签：jquery-selectors

我有一个具有以下结构的表：

```
<table id="tblBranchCoverage">
    <thead>...</thead>
    <tbody>
        <tr class="coverageRow">
            <td class="countyCovered">
                <label="branchCountyCovered coverageDisplay">Barrow</label>
                                ...
            </td>
            <td>
                ...
            </td>
        </tr>
        <tr class="coverageRow">
            <td class="countyCovered">
                <label="branchCountyCovered coverageDisplay">Cook</label>
                ...
            </td>
            <td>
                ...
            </td>
        </tr>
    </tbody>
</table> 
```

我正在尝试查找具有特定文本标签的**行。**

除了这个（这是行不通的），我想不出任何东西：

```
$("#tblBranchCoverage tbody tr").find('label[text="Barrow"]') 
```

我通过在控制台中测试选择器来验证它不起作用。

这样做的正确方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:44:27.947

尝试包含：

[http://docs.jquery.com/Selectors/contains#text](http://docs.jquery.com/Selectors/contains#text)

那么您应该可以使用父母进行过滤：

[http://docs.jquery.com/API/1.2/Traversing/parents](http://docs.jquery.com/API/1.2/Traversing/parents)

所以它应该是这样的

```
$("label:contains('Barrow')").parents("tr.coverageRow"); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:39:13.620

这应该可以解决问题，它将根据标签文本过滤您的选择

```
$("#tblBranchCoverage tbody tr label").filter(function(){
  return (/Barrow/i).test($(this).text())
}) 
```

或者

```
$("#tblBranchCoverage tbody tr label").filter(function(){
  return $(this).text() == "Barrow";
}) 
```

# php - Limesurvey 资源管理器打开 save browse.php

> ID：14587626
> 
> 赞同：1
> 
> 时间：2013-01-29T16:35:10.943
> 
> 标签：php, survey, limesurvey

我的石灰调查服务器正在做奇怪的事情。在我上传了几张图片并删除了一些之后，资源管理器不再打开了。相反，谷歌浏览器会下载一个包含以下内容的 php 文件。任何人都有同样的问题或知道这个问题更适合的另一个堆栈？

```
<?php

  /** This file is part of KCFinder project
  *
  *      @desc Browser calling script
  *   @package KCFinder
  *   @version 2.51
  *    @author Pavel Tzonkov <pavelc@users.sourceforge.net>
  * @copyright 2010, 2011 KCFinder Project
  *   @license http://www.opensource.org/licenses/gpl-2.0.php GPLv2
  *   @license http://www.opensource.org/licenses/lgpl-2.1.php LGPLv2
  *      @link http://kcfinder.sunhater.com
  */

require "core/autoload.php";
$browser = new browser();
$browser->action();
?> 
```

更大的问题是我只是平台的管理员用户，没有对安装的物理访问权限。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T07:41:49.507

这不是 LimeSurvey 本身的问题。我猜有人更改了您的服务器设置或放置了一个新`.htaccess`文件，导致该特定文件被下载而不是被执行。

您应该联系您的服务器管理员并询问他们最近是否进行了任何更改。

# jsp - 提交表单损坏

> ID：14587629
> 
> 赞同：1
> 
> 时间：2013-01-29T16:35:11.980
> 
> 标签：jsp

嗨，我正在尝试做一个简单的检查是否有会话，如果没有在我的表单上显示其他内容，但是当我单击提交按钮时没有任何反应。

```
<h1>Online banking</h1>
<% 
     String useremai =  (String)session.getAttribute("email");
    if(useremai!=null)
     {%> 

    Welcome Mr(s). <%=useremai%>                

<%

        }
     else 
     {
            %>
    <form action="index_activate.jsp" method="post" name="myform" id="myform" onSubmit="validateBlanks();return false;">
    E-mail  <input class="input" id="email" name="email" type="text" style="width:120px; text-align:center" value=""/><br><br>

    Password <input class="input" id="password" name="password" type="password" style="width:120px; text-align:center" value=""/><br>

    <div id="tip_login_otp" style="position:absolute; visibility:hidden; margin:-35px 0 0 -35px;">
    <img src="images/tip_login_otp.png" />
    </div>      
    <input id="submit" name="submit" type="image" style="margin: 10px 0 0 20px; float:right" src="images/bt_submit.gif" />   

    <% 
    String email = request.getParameter( "email" );
    session.setAttribute( "email", email );

    String password = request.getParameter( "password" );
    session.setAttribute( "password", password);
    %>      

</form> 
```

# database - 压缩表 - Postgresql

> ID：14587630
> 
> 赞同：1
> 
> 时间：2013-01-29T16:35:13.127
> 
> 标签：database, postgresql

我在编写查询时遇到问题，希望有人能够提供一些建议。该数据与钻孔地质有关。From 和 To 字段是钻孔的深度。

表格1：

```
holeID --- | --- From ---|---To---|---FMN---|---Rocktype ---|
MW1------|-------0-------|---10---|-----X-----|--------13-------|
MW1------|-------10-----|---20---|-----X-----|--------122------|
MW1------|-------20-----|---30---|-----Y-----|--------177------|
MW1------|-------30-----|---40---|-----Y-----|--------146------|
MW1------|-------40-----|---50---|-----Z-----|--------145-------|
MW1------|-------50-----|---60---|-----X-----|--------1----------|
MW1------|-------60-----|---70---|-----X-----|--------123-------|
MW1------|-------70-----|---80---|-----X-----|--------121-------|
MW1------|-------80-----|---90---|-----Z-----|--------120-------| 
```

我想浓缩为：

```
holeID --- | --- From ---|---To---|---FMN---|
MW1------|-------0-------|---20---|-----X-----|
MW1------|-------20-----|---40---|-----Y-----|
MW1------|-------40-----|---50---|-----Z-----|
MW1------|-------50-----|---80---|-----X-----|
MW1------|-------80-----|---90---|-----Z-----| 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T18:03:18.250

[SQL小提琴](http://www.sqlfiddle.com/#!12/9ad06/10)

```
select holeid, "from", "to", fmn
from (
    select
        holeid,
        first_value("from") over(partition by p order by "from") as "from",
        first_value("to") over(partition by p order by "to" desc) as "to",
        fmn
    from (
        select
            holeid, "from", "to", fmn,
            count(p or null) over(partition by holeid order by "from") p
        from (
            select
                holeid, "from", "to", fmn,
                lag(fmn, 1, '') over(partition by holeid order by "from") != fmn p
            from table1
        ) s
    ) s
) s
group by 1, 2, 3, 4
order by 1, 2 
```

# c# - Websphere MQ 在 .NET 应用程序中使用 100% CPU

> ID：14587631
> 
> 赞同：0
> 
> 时间：2013-01-29T16:35:16.217
> 
> 标签：c#, .net, websphere, ibm-mq

我有一个 .NET 应用程序，它使用 WebSphere MQ 作为可靠的发布/订阅中间件，在从服务器向客户端发送后续消息队列时遇到问题。服务器使用[此库](http://sourceforge.net/projects/mqttdotnet/)中的 XMSClient 对象，发布一条消息，并在确认交付后检查新消息并发布该消息，直到没有剩余可发布，此时它等待 30 秒并轮询更多要发送的消息。但是，我发现经常发生的情况是，当我有一个消息队列（只有 25 个）时，WebSphere 会突然将 CPU 使用率推到 100%，除非我使用 MQ Explorer 并清除渠道。这可能会导致我的程序出现灾难性问题：有谁知道导致这种情况的原因以及解决它的方法吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-06T04:13:34.567

现在我想我对你的情况有了更好的理解。我相信您正在为您的服务器应用程序使用 XMS.NET 程序集，该程序集将消息发布到使用[此库](http://sourceforge.net/projects/mqttdotnet/)开发的 MQTT 客户端应用程序。在某个阶段，MQTT 的 WebSphere MQ 通道进入高 CPU 利用率。

您提到过 System 和 Java.exe 占用大量 CPU。您可以放心地忽略系统的 CPU 使用率。导致 CPU 使用率高的是 Java.exe。似乎在某些时候 MQTT 通道将进入一个消耗高 CPU 的循环。它可能与您的 MQTT 客户端应用程序不断对话。问题也可能出在您的 MQTT 客户端应用程序上。所以我的建议是通过使用其他一些 MQTT 客户端应用程序来隔离问题，看看是否会出现同样的问题。您可以使用 MQ Explorer 附带的 MQTT 客户端实用程序进行测试。

# python - 使用 Python 处理 GitHub Wiki 存储库

> ID：14587632
> 
> 赞同：8
> 
> 时间：2013-01-29T16:35:14.830
> 
> 标签：python, github, gollum-wiki, dulwich

有没有办法以编程方式（使用库**`PyGithub`**，**`GitPython`**或**`dulwich`**）将任何文件直接加载到`MyRepo.wiki.git`存储库中？当然，使用 Python。

`MyRepo.git`我可以在 的帮助下轻松地将文件直接上传到存储库**`PyGithub`**，但不幸的是，这个库没有 API 或使用`MyRepo.wiki.git`存储库的方法。

这是我如何将文件上传到`MyRepo.git`存储库的方法：

```
github_repo = github_account.get_user().get_repo('MyRepo')

head_ref = gh_repo.get_git_ref("heads/%s" % github_branch)
latest_commit = gh_repo.get_git_commit(head_ref.object.sha)

base_tree = latest_commit.tree

new_tree = gh_repo.create_git_tree(
    [github.InputGitTreeElement(
        path="test.txt",
        mode='100755' if github_executable else '100644',
        type='blob',
        content="test"
    )],
    base_tree)

new_commit = gh_repo.create_git_commit(
    message="test commit message",
    parents=[latest_commit],
    tree=new_tree)

head_ref.edit(sha=new_commit.sha, force=False) 
```

那么，除了存储库，我**怎么**能做**同样的事情呢？****`MyRepo.wiki.git`**如果你能提供一个使用 PyGithub 库的例子——那就太好了。

PS 我可以使用 Gollum API 做到这一点吗？

PPS 没有人`*.wiki.git`使用过任何类型的 python 库吗？我不相信 ：（

PPPS 如果我不够清楚：我不想以任何方式创建本地存储库。我只想即时修改 repo 结构——就像我的示例所做的那样。但是使用 *.wiki.git 存储库。

谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-02-03T15:22:10.920

您无法通过 PyGithub 专门使用的 github Web API 访问 github wiki。但是你可以将你的 GitPython 指向 wiki 的 git URL。之后，您可以像访问任何其他 repo 一样访问此 git repo 中的文件。

**已编辑**

正如您所指出的，您限制自己不要创建 git 存储库的本地克隆，我建议您执行以下操作：

阅读[https://github.com/github/gollum/blob/master/lib/gollum/frontend/app.rb](https://github.com/github/gollum/blob/master/lib/gollum/frontend/app.rb)中的代码，它可能定义了所有外部 HTTP 接口。

不存在一个很好的 Python 包装器。但是当你做一个（部分）比我推荐使用这里提到的 REST 客户端库时：[https ://stackoverflow.com/questions/2176561/which-is-the-best-python-library-to-make-rest -request-like-put-get-delete-pos](https://stackoverflow.com/questions/2176561/which-is-the-best-python-library-to-make-rest-request-like-put-get-delete-pos)

如果您现在认为，您的限制可能会改变：

该[文档](http://packages.python.org/GitPython/0.3.2/tutorial.html)提供了一个很好的教程，涵盖了您需要一点 git 知识的所有内容。它归结为：

```
import git
repo = git.Repo.clone_from("git@github.com:user/project.wiki.git", "some-path")
repo.index.add(["your-new-file"])
repo.index.commit("your message to the world")
repo.remotes.origin.push() 
```

# c# - 寻找算法的解决方案

> ID：14587633
> 
> 赞同：0
> 
> 时间：2013-01-29T16:35:17.060
> 
> 标签：c#, algorithm

我在 c# 中有一个 List<> 包含对象的数量，例如 100。我需要连续选择一些对象而不重复。例如，我选择对象 4，然后随机选择随机数量的连续对象（对象 5 和 6）。当我想选择另一个集合时，它不应该包含对象 4、5 和 6。如果我从 List 中删除这些对象，那么有时我会收到无用的对象 2、3、7、8。换句话说，我需要主列表中的一些子列表，没有重复的对象，并且与主列表的顺序相同。我想知道是否有人帮我解决这个算法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:52:21.443

您可以将对象存储在 Dictionary 中，这样您就可以为每个对象保留额外信息，在您的情况下是一个布尔值，告诉您您的对象是否已被选中，如下所示：

```
//initializing the dictionary, any item has been selecte
Dictionary<object,bool> dic = list.ToDictionary(e => e, e => false); 
```

并且每当您选择一个项目时，您都会将布尔值更改为 true ：

```
dic[selectedObject] = true; 
```

当您尝试从字典中选择一个新项目时，您只需跳过具有`true`值的键/值对。

# ms-access - 访问当月的 2010 查询

> ID：14587634
> 
> 赞同：3
> 
> 时间：2013-01-29T16:35:17.880
> 
> 标签：ms-access, ms-access-2010

我已经建立了一个 Access 数据库来跟踪我们团队的质量保证监视器。我们的团队有几个负责监督团队代表的领导。

我想构建一个查询，它将返回当月指定潜在客户的所有 QA。我有指定潜在客户的标准并且已经让它发挥作用，但是每次我尝试为当月设置标准时，它最终都没有返回任何结果。

搜索谷歌一再建议使用`Month(Now())`，但这也不起作用。

我该如何编写这个查询？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-08-13T06:21:52.930

受@Justin-rentmeester 启发但经过改进以始终返回所需结果的答案：

将以下内容添加到`WHERE`查询的子句中：

```
MyDateField BETWEEN    
DateSerial(Year(Date()),Month(Date()),1) 
AND
DateAdd("s", -1, DateAdd("m", 1, DateSerial(Year(Date()),Month(Date()),1))), DateSerial(Year(Date()),Month(Date()),1) 
```

我建议您使用 SQL 视图来添加此标准。

这种方法也适用于包含时间的日期，以及少于 31 天的月份。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-01-07T07:24:54.647

将此代码放在标准字段上 - 在 Date()-Day(Now()-1) 和 Date() 之间

[![在此处输入图像描述](../Images/e295a73621e01379e473304d6e0262e6.png)](https://i.stack.imgur.com/H7rJI.png)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-01-29T16:39:23.050

**我编辑我的答案！**

假设`workdate`是您的日期字段。

更短的`where clause`可以

```
 where Year(workDate) = Year(Date()) and Month(workDate) = Month(Date()) 
```

这将过滤当月的所有记录。

如果您想进一步过滤截至今天的记录，请添加

```
and workdate <= Date() 
```

如果您没有在表中存储未来的日期记录，则这可能不是必需的。

祝你好运。

* * *

## 回答 #4

> 赞同：-2
> 
> 时间：2015-01-26T19:22:37.280

若要在 Access 的“设计”视图中执行此操作，请选择报告中所需的所有列以及要限制为当前月份的日期列，作为标准放置：介于

```
DateSerial(Year(Date()),Month(Date()),1) 
```

和

```
DateSerial(Year(Date()),Month(Date()),31) 
```

# php - 我的音频文件没有播放

> ID：14587636
> 
> 赞同：0
> 
> 时间：2013-01-29T16:35:21.240
> 
> 标签：php, javascript, jquery, mysqli, jplayer

我这里有一个 jplayer 来播放音频：[AUDIO](http://helios.hud.ac.uk/u0867587/Mobile_app/previewaudio.php?filename=Kalimba.mp3)

问题是它没有播放我拥有的音频文件。我怎样才能让音频播放？

音频文件来自目录`AudioFiles/Kalimba.mp3`。我从数据库中检索目录，然后告诉 jsplayer 播放该目录中的音频。这应该已经播放了音频，但是如果我单击播放按钮，什么也不会发生

jplayer 总结在这里：[http ://www.jplayer.org/latest/quick-start-guide/step-8-audio/](http://www.jplayer.org/latest/quick-start-guide/step-8-audio/)

下面是代码：

```
<!DOCTYPE html> 
<html>

<head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
    <title>Preview Audio</title>
    <link type="text/css" href="jquery/skin/jplayer.blue.monday.css" rel="stylesheet" />
    <script type="text/javascript" src="jquery/jquery-1.7.min.js"></script>   
    <script type="text/javascript" src="jquery/jquery.jplayer.min.js"></script>
</head>

<body>

<?php

$getaudio = 'AudioFiles/' . $_GET['filename'];

$audioquery = "SELECT AudioFile FROM Audio WHERE (AudioFile = ?)";

        if (!$audiostmt = $mysqli->prepare($audioquery)) {
        // Handle errors with prepare operation here
}

// Bind parameter for statement
$audiostmt->bind_param("s", $getaudio);

// Execute the statement
$audiostmt->execute();

            if ($audiostmt->errno) 
            {
                // Handle query error here
            }

$audiostmt->bind_result($dbAudioFile); 

$audiostmt->fetch(); 

$audiostmt->close(); 

?>

    <script type="text/javascript">   
        $(document).ready(function(){
      $("#jquery_jplayer_1").jPlayer({
        ready: function () {
          $(this).jPlayer("setMedia", {
            mp4: "<?php echo $dbAudioFile; ?>"
          });
        },
        swfPath: "/jquery",
        supplied: "mp3"
      });
    }); 
    </script>  
<?php echo "File Path " . $dbAudioFile; ?>
  <div id="jquery_jplayer_1" class="jp-jplayer"></div>
  <div id="jp_container_1" class="jp-audio">
    <div class="jp-type-single">
      <div class="jp-gui jp-interface">
        <ul class="jp-controls">
          <li><a href="javascript:;" class="jp-play" tabindex="1">play</a></li>
          <li><a href="javascript:;" class="jp-pause" tabindex="1">pause</a></li>
          <li><a href="javascript:;" class="jp-stop" tabindex="1">stop</a></li>
          <li><a href="javascript:;" class="jp-mute" tabindex="1" title="mute">mute</a></li>
          <li><a href="javascript:;" class="jp-unmute" tabindex="1" title="unmute">unmute</a></li>
          <li><a href="javascript:;" class="jp-volume-max" tabindex="1" title="max volume">max volume</a></li>
        </ul>
        <div class="jp-progress">
          <div class="jp-seek-bar">
            <div class="jp-play-bar"></div>
          </div>
        </div>
        <div class="jp-volume-bar">
          <div class="jp-volume-bar-value"></div>
        </div>
        <div class="jp-time-holder">
          <div class="jp-current-time"></div>
          <div class="jp-duration"></div>
          <ul class="jp-toggles">
            <li><a href="javascript:;" class="jp-repeat" tabindex="1" title="repeat">repeat</a></li>
            <li><a href="javascript:;" class="jp-repeat-off" tabindex="1" title="repeat off">repeat off</a></li>
          </ul>
        </div>
      </div>
    </div>
  </div>

</body>
</html> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:39:47.167

使用控制台调试它，例如。firebug (ff 插件) 并将结果粘贴到这里

# javascript - 使用 Eclipse 调试 JavaScript

> ID：14587642
> 
> 赞同：9
> 
> 时间：2013-01-29T16:35:47.530
> 
> 标签：javascript, c++, eclipse, debugging, spidermonkey

好的，这是一个问题......好吧，我在其他任何地方都没有看到像这样的问题......

我需要通过 Eclipse (Helios) 调试 javascript 文件...但是，这还不是全部，javascript 文件由运行 (Mozilla) SpiderMonkey 的第三方应用程序 (C/C++) 调用以执行 js 文件。

我需要以某种方式将 Eclipse 连接到该应用程序并获取调试符号。或类似的东西...

有人以前见过这样的东西吗？有什么建议吗？

[编辑]

设想：

该应用程序 (consoleApp.exe) 运行嵌入的 JavaScript 引擎 SpiderMonkey。我需要从 Eclipse IDE 附加应用程序进程并调试 SM 正在运行的当前 javascript 源。

谢！

[谢谢！！！]

对于任何提出想法/评论/想法来回答这个问题的人。我想出了我必须做什么，但是，这将是困难的。我需要要求修改应用程序核心以公开来自 SpiderMonkey 和 JSD 的调试信息。并编写一个 Eclipse 插件（或修改[Pistol](https://code.google.com/p/piston/)，也许）以
符合我想做的。再次感谢大家。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-02-07T10:21:44.730

您可以在“工具”选项下尝试 Firbug 或 Firefox Web 开发人员工具。

## 在 Eclipse 中：

JavaScript 开发工具 (JSDT) - Eclipse.org

[www.eclipse.org/webtools/jsdt/](http://www.eclipse.org/webtools/jsdt/)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-02-08T14:40:41.957

看起来[活塞](https://code.google.com/p/piston/)完全符合您在原始问题中的要求，尽管您不能像在说明中那样直接使用它来调试可执行文件。不幸的是，它看起来也很难设置。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-02-07T07:50:15.520

我对此不太确定，但您可以查看[此](http://www.aptana.com/)内容 或[用于 Java 的 Google Chrome 开发人员工具](http://code.google.com/p/chromedevtools/)允许使用 Chrome 进行调试。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-02-08T08:40:58.237

Eclipse 在调试选项下没有类似于.Net 的“附加到进程”的东西吗？这样，您可以使用 firebug 轻松调试客户端，并且无论何时执行服务器脚本，您的 eclipse 都会像从那里执行一样对其进行调试。

# oracle - 如何区分连接字符串中的服务名称和连接描述符？

> ID：14587650
> 
> 赞同：0
> 
> 时间：2013-01-29T16:36:09.327
> 
> 标签：oracle, connection-string, datasource, odp.net, service-name

希望这对于 Oracle 主机来说应该是一件容易的事。

因此，对于我之前的[问题](https://stackoverflow.com/questions/14566632)，我现在需要能够在 C# 中处理连接字符串，并决定是对“数据源”值（如果它是服务名称）执行 LDAP 查找，还是将其视为它是（连接描述符）。这样做的最好和最*确定*的方法是什么？我不想做空洞的事情，比如检查第一个字符是否是一个左括号。我正在寻找特定的模式/签名来识别“数据源”是服务名称还是连接描述符。

例如（如[在此处](http://www.connectionstrings.com/oracle)获得），使用服务名称，它可能是这样的：

> 数据源=TORCL；用户ID=myUsername；密码=myPassword；

使用连接描述符，它可能是这样的：

> 数据源=(DESCRIPTION=(ADDRESS_LIST=(ADDRESS=(PROTOCOL=TCP)(HOST=MyHost)(PORT=MyPort)))(CONNECT_DATA=(SERVER=DEDICATED)(SERVICE_NAME=MyOracleSID)));User Id=myUsername; 密码=我的密码；

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-01T19:13:41.160

在没有答案的情况下，我设计了自己的解决方案，它并不复杂，并且我假设连接描述符将始终包含“DESCRIPTION”。如果这个假设是正确的，那么解决方案就是正确的。如果没有，请随时提出自己的建议...

```
string dataSource = connectionString.Split(';').Select(x => x.Split('=')).Single(x => x.First() == "Data Source").Last();
bool isConnectDescriptor = dataSource.IndexOf("DESCRIPTION", StringComparison.OrdinalIgnoreCase) >= 0; 
```

# c# - 将层次结构 Linq 解析为 XML

> ID：14587652
> 
> 赞同：1
> 
> 时间：2013-01-29T16:36:14.840
> 
> 标签：c#, linq, xml-parsing

我正在尝试解析这些数据：

```
 <Product>
    <ProductName>Climate Guard</ProductName>
    <Tag>ClimateGuard</Tag>
    <SupportPage>~/Support/ClimateGuard.aspx</SupportPage>
    <ProductPage>~/Products/ClimateGuard.aspx</ProductPage>
    <ProductCategories>
        <ProductCategory>Climate Guard</ProductCategory>
        <PartNumbers>
            <PartNumber Primary="true">CLIMATE GUARD</PartNumber>
            <PartNumber>CLIMATEGUARD LT</PartNumber>
            <PartNumber>CLIMATE GUARD STARTER KIT</PartNumber>
            <PartNumber>SENSOR MODULE</PartNumber>
            <PartNumber>SWCH INP MODULE</PartNumber>
            <PartNumber>TEMP SENSOR</PartNumber>
            <PartNumber>HUMIDITY SENSOR</PartNumber>
            <PartNumber>DOOR CONTACT</PartNumber>
            <PartNumber>MOTION SENSOR</PartNumber>
            <PartNumber>FLOOD DETECTOR</PartNumber>
            <PartNumber>SMOKE DETECTOR</PartNumber>
            <PartNumber>TILT SENSOR</PartNumber>
            <PartNumber>SENSOR CABLE</PartNumber>
            <PartNumber>PWR INP CABLE</PartNumber>
            <PartNumber>100FT 2-WIRE</PartNumber>
            <PartNumber>RJ25 COUPLER</PartNumber>
        </PartNumbers>
    </ProductCategories>
    <Downloads>
        <Download>
            <Version>1.0.27</Version>
            <Url>~/Files/Downloads/ClimateGuard_Firmware_1_0_27.bin</Url>
            <Comment>Firmware</Comment>
        </Download>
        <Download>
            <Version>1.0.6</Version>
            <Url>~/Files/Downloads/ClimateGuard_BuiltInModule_1_0_6.bin</Url>
            <Comment>Built-in Module</Comment>
        </Download>
        <Download>
            <Version>1.0.2</Version>
            <Url>~/Files/Downloads/ClimateGuard_SensorModule_1_0_2.bin</Url>
            <Comment>Sensor Module</Comment>
        </Download>
        <Download>
            <Version>1.0.0</Version>
            <Url>~/Files/Downloads/ClimateGuard_SwitchInputModule_1_0_0.bin</Url>
            <Comment>Switch Input Module</Comment>
        </Download>
    </Downloads>
</Product> 
```

我正在尝试获取零件编号列表，但是，只有第一个出现：

产品类别 Climate Guard 部件号 Climate Guard

我的零件编号代码有什么问题：

```
public List<Products> GetProducts()
{
    XElement myElement = XElement.Load(HttpContext.Current.Server.MapPath("~/App_Data/products.xml"));
    var query = from a in myElement.Elements("Product")
                select new Products
                {
                    ProductName = a.Element("ProductName").Value,
                    Tag = a.Element("Tag").Value,
                    SupportPage = a.Element("SupportPage").Value,
                    ProductPage = a.Element("ProductPage").Value,
                    ProductCategories = from b in a.Elements("ProductCategories")
                                        select new ProductCategories
                                        {
                                            ProductCategory = b.Element("ProductCategory").Value,
                                            //PartNumbers = GetPartNumbers(myElement.Elements("Product").Elements("ProductCategories").Elements("PartNumbers").Elements("PartNumber"))
                                            PartNumbers = from c in b.Elements("PartNumbers")
                                                          select new PartNumbers
                                                          {
                                                               PartNumber = c.Element("PartNumber").Value
                                                          }
                                        },
                    Downloads = from bb in a.Elements("Downloads").Elements("Download")
                                select new Downloads
                                {
                                    Comment = bb.Element("Comment").Value,
                                    Url = bb.Element("Url").Value,
                                    Version = bb.Element("Version").Value
                                },
                };

    return query.ToList();
} 
```

所有类型（ProductName、Tag 等）都是字符串。PartNumbers 是一个 IEnumerable。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:40:13.720

目前`PartNumber`，您没有获取元素值的集合，而是仅获取其父元素的元素，`PartNumbers`其中包含第一`PartNumber`个子元素的值。如果你想要`PartNumbers`类而不是简单的字符串值列表，那么它应该如下所示：

```
public class PartNumbers
{
    // list instead of single value
    public List<string> Numbers { get; set; } 
} 
```

它应该这样解析：

```
PartNumbers = new PartNumbers {
       Numbers = b.Element("PartNumbers").Elements()
                  .Select(c => (string)c).ToList()
       } 
```

顺便说一句，您为什么选择如此奇怪的范围变量名称（`b`用于`ProductCategories`元素、`a`用于产品等）？您也可以使用 simple`List<string>`来存储零件编号（无需为此创建类）：

```
PartNumbers = b.Element("PartNumbers").Elements().Select(c => (string)c).ToList() 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:39:04.953

您可能忘记了 `ToList()`for`ProductCategories`和。`PartNumbers``Downloads`

```
public List<Products> GetProducts()
{
    XElement myElement = XElement.Load(HttpContext.Current.Server.MapPath("~/App_Data/products.xml"));
    var query = from a in myElement.Elements("Product")
                select new Products
                {
                    ProductName = a.Element("ProductName").Value,
                    Tag = a.Element("Tag").Value,
                    SupportPage = a.Element("SupportPage").Value,
                    ProductPage = a.Element("ProductPage").Value,
                    ProductCategories = (from b in a.Elements("ProductCategories")
                                        select new ProductCategories
                                        {
                                            ProductCategory = b.Element("ProductCategory").Value,
                                            //PartNumbers = GetPartNumbers(myElement.Elements("Product").Elements("ProductCategories").Elements("PartNumbers").Elements("PartNumber"))
                                            PartNumbers = (from c in b.Elements("PartNumbers")
                                                          select new PartNumbers
                                                          {
                                                               PartNumber = c.Element("PartNumber").Value
                                                          }).ToList()
                                        }).ToList(),
                    Downloads = (from bb in a.Elements("Downloads").Elements("Download")
                                select new Downloads
                                {
                                    Comment = bb.Element("Comment").Value,
                                    Url = bb.Element("Url").Value,
                                    Version = bb.Element("Version").Value
                                }).ToList(),
                };

    return query.ToList();
} 
```

# php - 普通请求的 CakePHP 表单身份验证和 JSON 的基本身份验证

> ID：14587654
> 
> 赞同：2
> 
> 时间：2013-01-29T16:36:18.353
> 
> 标签：php, cakephp, cakephp-2.2, basic-authentication

我正在尝试构建一个用户可以在浏览器中查看的 Web 应用程序，但也有一个 API 供开发人员与我的应用程序交互。我的问题是如何根据 CakePHP 中的请求类型更改身份验证？

我希望我的应用程序通过表单身份验证提示使用该站点的用户，但是当请求带有“.json”时使用基本身份验证。

我在我的 AppController 中试过这个：

```
class AppController extends Controller {

public $components = array(
    'Session',
    'Auth' => array(
         'loginRedirect' => array(
             'controller' => 'journeys', 
             'action' => 'index'
             ),
        'logoutRedirect' => array(
            'controller' => 'pages', 
            'action' => 'display', 'home'
            )
    ),
    'RequestHandler'
);

public function beforeFilter() {
    if($this->params['ext'] == 'json') {
        $this->Auth->authenticate = array('Basic');
    } else {
        $this->Auth->authenticate = array('Form');
    }
    $this->Auth->allow('display'); 
} 
```

}

我已经检查了 beforeFilter 中的子句是否有效并且它确实有效，但无论我尝试在我的应用程序中访问什么 URL，我似乎都被重定向到我的表单身份验证

我的 UsersController 文件中的登录功能如下所示：

```
if ($this->Auth->login()) {
    return $this->redirect($this->Auth->redirect());
} else {
    $this->Session->setFlash(__('Username or password is incorrect'), 'default', array(), 'auth');
} 
```

我已阅读 CakePHP 网站上的文档，但似乎找不到对我有帮助的示例。任何帮助，将不胜感激。

为更正代码和更多信息而编辑

我继续研究这个问题，我注意到如果我记录以下值：

```
$this->Auth->authenticate 
```

在 beforeFilter 中它说它是基本的，但它仍然将我发送到表单登录。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-10-23T11:30:00.843

文档摘录（参见[http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html](http://book.cakephp.org/2.0/en/core-libraries/components/authentication.html)）：

> 因为基本和摘要身份验证不需要初始 POST 或表单，所以如果仅使用基本/摘要身份验证**器，则不需要在控制器中进行登录操作**。您还可以将 AuthComponent::$sessionKey 设置为 false 以确保 AuthComponent 不会尝试从会话中读取用户信息。

因此，您不需要登录操作。您可以检查用户控制器中的身份验证方法，如果身份验证方法为“基本”，则跳过登录操作。

# javascript - 在 JavaScript 中将纯文本转换为字符串文字

> ID：14587657
> 
> 赞同：0
> 
> 时间：2013-01-29T16:36:24.603
> 
> 标签：javascript

使用 JavaScript，有没有办法将纯文本（带有特殊字符）转换为 JavaScript 字符串文字？

例如，有没有办法将以下文本转换为字符串文字？

```
"Here is some text inside quotes."Here is more text inside quotes: it's not easy to write this as a string literal, so I need to automatically convert it somehow." " 
```

# excel - 如何在excel时间序列中填充缺失的数据

> ID：14587658
> 
> 赞同：0
> 
> 时间：2013-01-29T16:36:25.047
> 
> 标签：excel, matlab, time-series, missing-data

我需要解决这个问题：在 Excel 工作簿中，我报告了 10 个时间序列（每月频率），包含 10 个应该涵盖过去 15 年的标题。不幸的是，并非所有标题都可以涵盖 15 年的时间序列。例如，标题只能到 2003 年；因此，在该标题的列中，前 5 年的值是“不可用”而不是值。一旦我将数据导入Matlab，显然，在标题列中，较短系列出现NaN，没有值。

```
>> Prices = xlsread('PrezziTitoli.xls');

>> whos
Name   Size   Bytes  Class   Attributes    
Prices 182x10 6360   double 
```

我的目标是估计方差 - 协方差矩阵，但是，由于缺乏数据，我无法进行计算。我想在计算方差 - 协方差矩阵之前进行插值，以覆盖 Matlab 中返回 NaN 的值，例如使用“填充”，但在使用时遇到困难。

有一些代码对我有用吗？你能帮助我吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:36:06.470

您是否安装了统计工具箱？在这种情况下，解决方案很简单：

```
>> x = randn(10,4);         // x is a 10x4 matrix of random numbers
>> x(randi(40,10,1)) = NaN; // set some random entries to NaN
>> disp(x)
   -1.1480       NaN   -2.1384    2.9080
    0.1049   -0.8880       NaN    0.8252
    0.7223    0.1001    1.3546    1.3790
    2.5855   -0.5445       NaN   -1.0582
   -0.6669       NaN       NaN       NaN
       NaN   -0.6003    0.1240   -0.2725
   -0.0825    0.4900    1.4367    1.0984
   -1.9330    0.7394   -1.9609   -0.2779
   -0.4390    1.7119   -0.1977    0.7015
   -1.7947   -0.1941   -1.2078   -2.0518
>> nancov(x)                // Compute covariances after removing all NaN rows
    1.2977    0.0520    1.6248    1.3540
    0.0520    0.5359   -0.0967    0.3966
    1.6248   -0.0967    2.2940    1.6071
    1.3540    0.3966    1.6071    1.9358
>> nancov(x, 'pairwise')    // Compute covariances pairwise, ignoring NaNs
    1.9195   -0.5221    1.4491   -0.0424
   -0.5221    0.7325   -0.1240    0.2917
    1.4491   -0.1240    2.1454    0.2279
   -0.0424    0.2917    0.2279    2.1305 
```

如果您没有统计工具箱，我们需要更加努力地思考 - 让我知道！

# ios - Xcode 调试/仪器：查看所有指向对象的指针

> ID：14587666
> 
> 赞同：7
> 
> 时间：2013-01-29T16:36:47.613
> 
> 标签：ios, objective-c, xcode, instruments

我刚开始从事一个相对复杂的项目，并且发现了一个错误。当用户注销时，视图控制器仍然分配在登录视图控制器后面。他们继续响应旋转事件等。我已将控制器设置为`nil`注销时，但它仍在响应，这表明其他一些对象仍有指向它的指针。（此项目已启用 ARC。）

Pre-ARC 我可以[通过覆盖来解决这个问题`retain`](https://stackoverflow.com/a/586738/1445366)：

```
- (id) retain
{
    // Break here to see who is retaining me.
    return [super retain];
} 
```

如何使用 Xcode 调试工具选择一个对象并列出指向它的所有其他对象？有没有比简单地搜索所有代码更好的方法？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2016-10-31T21:27:29.530

从 Xcode 8 开始，您可以使用 Debug Memory Graph：

运行您的应用程序并查看屏幕底部的导航器。您应该看到一组三个相连的圆圈：

[![在此处输入图像描述](../Images/de6a088f276d63544fb97b39cb90e0c2.png)](https://i.stack.imgur.com/UsUlJ.png)

导航到任何位置，以便在内存中分配您的对象，然后点击此图标。它应该会暂停您的应用程序，并且应该会在您的 Xcode 屏幕上弹出一个图表。现在，在屏幕左侧，您可以看到对象列表。找到您想要查看所有指针的对象并单击它。现在它们应该在图表中可见。您可以通过点击分支左端节点上的两个箭头来扩展这些分支。该图应如下所示：

[![在此处输入图像描述](../Images/615269681408d2211ba1b5d1ec5c9daa.png)](https://i.stack.imgur.com/tSzhg.png)

这确实为我节省了几天的工作时间。这是一个非常有用的工具。我希望它也对其他人有所帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:49:22.833

Instruments Heapshot Analysis 工具是我能找到的最好的工具。 [本文提供了较为完整的教程](http://www.friday.com/bbum/2010/10/17/when-is-a-leak-not-a-leak-using-heapshot-analysis-to-find-undesirable-memory-growth/)，但基本步骤是：

1.  选择**产品**->**配置文件**。选择**分配**工具。
2.  在左侧，在重要事件之前/之后按下**标记堆按钮。**就我而言，这是在登录之前、登录之后和注销之后。
3.  在 Heapshot 中搜索您要查找的课程。
4.  按显示三角形查看其内存地址。
5.  按内存地址右侧的箭头以查看其负责的调用者（它出现在最右边的列中。）

如果其他人写了更详尽的解释，或者可以提供任何相关的 lldb 命令，我很乐意将您的答案标记为正确。

# asp.net - 如何使用asp从客户端机器获取逻辑驱动程序

> ID：14587670
> 
> 赞同：0
> 
> 时间：2013-01-29T16:36:58.070
> 
> 标签：asp.net, asp.net-mvc

一位测试人员向我走来，告诉我一个链接正在与来自服务器的逻辑驱动程序创建一个对话，并且期望的行为是它显示来自客户端的驱动程序。

由于 c# 是一种服务器端语言，我只相信我需要使用客户端语言。今天这个应用程序是在 Asp Net MVC 中开发的，所以我去研究了 asp net 中的这样一个功能。

事实证明，我找不到任何相关的东西。我发现 javascript 提供了“FileSystemObject”，我相信我可以做到这一点，但我正在寻找使用 asp 的解决方案。

有什么建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T00:51:05.787

AFAIC，您不能在 C# 中执行此操作。在您的服务器上运行的软件无法访问客户端计算机的文件系统。因此，您*确实*需要一种客户端语言，例如 JavaScript。

因此，我会尝试从 JavaScript 人员那里获取更多信息，但我强烈怀疑，如果可能的话，这方面存在严重的限制。我不希望我访问的每个网站都能够访问我的系统驱动器。这是一个安全风险。

# sql - 基于标识符的 SQL Sum 计数

> ID：14587675
> 
> 赞同：1
> 
> 时间：2013-01-29T16:37:01.803
> 
> 标签：sql, sql-server-2008, sum

假设我有一个包含以下数据的表：

```
Name          TransID    Cost    
---------------------------------------
 Susan          1        10      
 Johnny         2        10      
 Johnny         3        9      
 Dave           4        10 
```

我想找到一种方法来计算每个名称的成本（假设名称是唯一的），以便得到这样的表：

```
Name           Cost    
---------------------------------------
 Susan          10     
 Johnny         19        
 Dave           10 
```

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:38:42.603

这相对简单：您需要在查询中使用[`GROUP BY`子句](http://www.techonthenet.com/sql/group_by.php)：

```
SELECT Name,SUM(Cost)
FROM MyTable
GROUP BY Name 
```

# ios - 如何覆盖 NSUserDefaults？

> ID：14587681
> 
> 赞同：0
> 
> 时间：2013-01-29T16:37:12.743
> 
> 标签：ios, objective-c, datepicker, nsuserdefaults, uilocalnotification

我有 uilocalnotification ，我使用 NSDateComponents 为每个通知设置不同的时间，具体取决于项目应该得到通知的次数。

```
 -(NSArray *)fireDatesForFrequency:(int)freq
    {

        if (freq == 1)
        {

            [components setHour:8];
            [components setMinute:00];

            NSDate *date = [gregorian dateFromComponents:components];

            NSArray *dates =[[NSArray alloc]initWithObjects:date, nil];

            return dates;
        }

        if (freq == 2) {

            [components setHour:8];
            [components setMinute:00];

            NSDate *date1 = [gregorian dateFromComponents:components];

            [components setHour:20];
            [components setMinute:00];

            NSDate *date2 = [gregorian dateFromComponents:components];

            NSArray *dates =[[NSArray alloc]initWithObjects:date1,date2, nil];

            return dates;
        }

        if (freq == 3)
        {

            [components setHour:8];
            [components setMinute:00];

            NSDate *date1 = [gregorian dateFromComponents:components];

            [components setHour:12];
            [components setMinute:00];

            NSDate *date2 = [gregorian dateFromComponents:components];

            [components setHour:16];
            [components setMinute:00];

            NSDate *date3 = [gregorian dateFromComponents:components];

            NSArray *dates =[[NSArray alloc]initWithObjects:date1,date2,date3, nil];

            return dates;

        }

        if (freq == 4)
        {

            [components setHour:8];
            [components setMinute:00];

            NSDate *date1 = [gregorian dateFromComponents:components];

            [components setHour:12];
            [components setMinute:00];

            NSDate *date2 = [gregorian dateFromComponents:components];

            [components setHour:16];
            [components setMinute:00];

            NSDate *date3 = [gregorian dateFromComponents:components];

            [components setHour:20];
            [components setMinute:00];

            NSDate *date4 = [gregorian dateFromComponents:components];

            NSArray *dates =[[NSArray alloc]initWithObjects:date1,date2,date3,date4, nil];

            return dates;

        }

          return nil;

    } 
```

现在我想将这些时间存储在 NSUserDefaults 中，这样如果用户想根据他的需要更改时间，我想将这些时间存储在 NSUserdefaults 中。我想用 userupdatednsuserdefaults 替换默认的 NSuserdefaults ..datepicker 有分段控制，所以当用户从 datepicker 选择时间时，时间应该更新为默认的 nsuserdefaults 。所以如果用户选择第一个分段控制项，则该值应该存储在

```
- (IBAction)didChangeSegmentControl:(UISegmentedControl *)control
{
    NSInteger index = [notificationSessionTab selectedSegmentIndex];

    if (index == 0)
    {
        [userTimePicker reloadInputViews];
        [components setHour:7];;
        [components setMinute:00];

        NSDate *date1 = [gregorian dateFromComponents:components];

        [components setHour:9];
        [components setMinute:00];

        NSDate *date2 = [gregorian dateFromComponents:components];

        //NSArray *dates =[[NSArray alloc]initWithObjects:date1,date2,date3,date4, nil];
        [userTimePicker setDatePickerMode:UIDatePickerModeTime];

        [userTimePicker setMinimumDate:date1];
        [userTimePicker setMaximumDate:date2];
        NSDate *selectedTime =[userTimePicker date];
    }

    if (index == 1)
    {
        [userTimePicker reloadInputViews];

        [components setHour:11];
        [components setMinute:00];

        NSDate *date1 = [gregorian dateFromComponents:components];

        [components setHour:13];
        [components setMinute:00];

        NSDate *date2 = [gregorian dateFromComponents:components];

        //NSArray *dates =[[NSArray alloc]initWithObjects:date1,date2,date3,date4, nil];
        [userTimePicker setDatePickerMode:UIDatePickerModeTime];

        [userTimePicker setMinimumDate:date1];
        [userTimePicker setMaximumDate:date2];
        NSDate *selectedTime =[userTimePicker date];
    }

    if (index == 2)
    {
        [userTimePicker reloadInputViews];

        [components setHour:15];
        [components setMinute:00];

        NSDate *date1 = [gregorian dateFromComponents:components];

        [components setHour:18];
        [components setMinute:00];

        NSDate *date2 = [gregorian dateFromComponents:components];

        //NSArray *dates =[[NSArray alloc]initWithObjects:date1,date2,date3,date4, nil];
        [userTimePicker setDatePickerMode:UIDatePickerModeTime];

        [userTimePicker setMinimumDate:date1];
        [userTimePicker setMaximumDate:date2];
        NSDate *selectedTime =[userTimePicker date];
    }

    if (index == 3)
    {
        [userTimePicker reloadInputViews];

        [components setHour:19];
        [components setMinute:00];

        NSDate *date1 = [gregorian dateFromComponents:components];

        [components setHour:21];
        [components setMinute:00];

        NSDate *date2 = [gregorian dateFromComponents:components];

        //NSArray *dates =[[NSArray alloc]initWithObjects:date1,date2,date3,date4, nil];
        [userTimePicker setDatePickerMode:UIDatePickerModeTime];

        [userTimePicker setMinimumDate:date1];
        [userTimePicker setMaximumDate:date2];
        NSDate *selectedTime =[userTimePicker date];
    }

} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:45:42.560

You can store NSDate in NSUserDefaults without it's overriding. This question discussed more detailed here [What's the optimum way of storing an NSDate in NSUserDefaults?](https://stackoverflow.com/questions/2013850/whats-the-optimum-way-of-storing-an-nsdate-in-nsuserdefaults).

You also can store in NSUserDefault array of dates. So I don't think that overriding standard UserDefaults is good idea, instead you can create Category extension to achieve more abstraction.

# php - php中的/../和../有区别吗？

> ID：14587693
> 
> 赞同：1
> 
> 时间：2013-01-29T16:37:46.257
> 
> 标签：php, directory-structure

我很好奇PHP`../`中`/../`是否相同，所以我尝试了这些：

```
require_once('/../frame/header.php');
require_once('../frame/header.php'); 
```

他们俩都工作了。我只是幸运还是他们真的做同样的事情？为什么？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T16:39:41.853

在您的上下文中，如果它们都有效，则意味着您的脚本位于您可以访问的文件系统的根目录中，或者位于其中的一级。但是它们*并不*相同！ `/../`指的是文件系统根目录（和`..`上一个目录，它刚刚被吃掉并且仍然是根目录），而`../`指的是比当前目录高一个目录。 *任何*以开头`/`的路径都是从文件系统根目录开始的绝对路径。

从文件系统根目录以外的任何地方，它们的功能都不同。

假设您的工作目录是`/var/www/scripts`.

```
require_once('../include.php'); 
```

将包含一个文件`/var/www/include.php`。

但是从同一个位置，如果你这样做了

```
require_once('/../include.php'); 
```

...php 将尝试在文件`/include.php`系统根目录加载文件，它可能不存在。

现在，很多网络主机都会为您提供一个文件系统，其根目录`/`也是网络服务器的*文档根目录*，网络服务器*文档根目录*只是从根目录开始的一个目录级别，例如`/www`. 在这种情况下，`/../`可能会正常工作，但如果您尝试将其移动到具有不同文件系统配置的另一台服务器，请注意。

因此，如果脚本的工作目录是`/www`，幸运的是，这两个将以相同的方式运行：

```
require_once('../include.php');
require_once('/../include.php'); 
```

两者都将在文件`/include.php`系统根目录中包含该文件。

*请注意，这不是特定于 PHP 的，而是文件系统的属性，`..`通常使用...*

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:40:32.183

在任何链接前面带有 / 意味着您来自所在上下文的根目录。如果您已经在根目录或 chroot 监狱中，那么这两个语句是相同的。

# session - Grails 会话属性不会在两个应用程序之间刷新

> ID：14587694
> 
> 赞同：0
> 
> 时间：2013-01-29T16:37:48.107
> 
> 标签：session, grails, cas, jasig

我有两个使用[JASIG CAS Client Plugin](http://grails.org/plugin/cas-client-plugin)的独立 Grails 应用程序。当我的应用程序运行时，不同的用户可以对我的 CAS 服务器进行身份验证（使用客户端插件）。

除了身份验证，我在两个应用程序中都使用 Grails 过滤器进行***授权***。用户可能已通过身份验证，但我想确保只有某些用户才能访问适当的应用程序。

一切正常，除了以下情况：

1.  我使用用户名“jack”成功地对 CAS 服务器进行了身份验证，并且我被授权使用应用程序 A。
2.  我关闭应用程序 A 并退出 CAS。
3.  我使用用户名“jill”成功对 CAS 服务器进行身份验证，但我无权使用应用程序 B，因为会话中的用户名仍然是“jack”

当我的应用程序启动时，我是否需要随时刷新会话？如果是这样，我该怎么做？这是我的过滤器的代码：

```
import edu.yale.its.tp.cas.client.filter.CASFilter

class SecurityFilters {
    def filters = {
        loginCheck(controller: '*', action: '*') {
            before = {

                def username = session?.getAttribute(CASFilter.CAS_FILTER_USER)?.toLowerCase()

                if (username in grailsApplication.config.users) {
                    return true
                } else {
                    render view: '/invalid_user', model: [username: username]
                    return false
                }
            }
        }
    }
} 
```

# c++ - 将指针或对象放入类中？

> ID：14587699
> 
> 赞同：2
> 
> 时间：2013-01-29T16:37:56.903
> 
> 标签：c++, pointers, optimization

假设一个类具有一个具有固定类型的对象的组件。有两种方法可以使组件成为类的属性。一种是使用指针指向该类型的ab对象，另一种是直接使用该对象。使用指针时，我不需要包含组件类型声明的头文件，而只使用前向声明。而且它的扩展性更强。我的问题是：访问和使用它时它的性能如何？现代编译器能否对其进行优化，使其具有与直接使用相同或相似的性能？你决定它的策略是什么？

一个愚蠢的例子

```
// Use pointer.
class A1 { ... };
class A2 { A1* a1; ... };
class A3 { A2* a2; ... };
class A4 { A3* a3; ... };
class A5 { A4* a4; ... };

// Direct use.
class B1 { ... };
class B2 { B1 b1; ... };
class B3 { B2 b2; ... };
class B4 { B3 b3; ... };
class B5 { B4 b4; ... }; 
```

可能会更上一层楼。性能差别大吗？非常感谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:53:08.067

在决定设计时，我通常会忽略性能。是的，当然，您不想以完全不合理的方式存储数据，但设计不应该考虑“如果我执行 X 比执行 Y 访问该对象需要多三个时钟周期吗？” - 它应该考虑“我需要做什么才能使该软件正常工作，可维护”。

正如评论中提到的，引用是另一种解决方案，它避免了指针可能发生的“我的指针指向垃圾”的问题[尽管有可能，有一些“创造力”来提出一个没有引用的场景有效，您不能在不将其设置为有效的情况下创建引用]。

性能：嗯，任何间接对象都需要多读一次内存。因此，如果您要存储一些非常基本的内容，例如整数，则将至少读取一个额外的内存来读取实际的指针/引用内容，以获取正确的对象。但是，对于比一个整数更复杂的对象，无论如何，其他事情往往是大部分时间。编译器肯定会优化，如果你对同一个引用/指针做几件事，它只加载一次指针，所以开销分散在许多对象上。[一旦编译，引用和指针几乎无法区分]。

当有人问到虚拟函数的开销（与指针/引用的开销大致相同）时，我编写了一些测试代码来衡量使用虚拟函数与非虚拟函数的性能。根据记忆，每次调用的差异小于 1 个时钟周期。[因为处理器重叠指令，所以开销有时少于一条指令]。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:54:28.720

让我们关注性能：

1.  指针始终是间接的，需要两个操作，一个获取地址，另一个取消引用地址以获取值。
2.  对象内部的对象由偏移量的编译时计算处理。Asm 代码从整个对象的开头直接有 888[eax] 样式的偏移量。888 将在编译时计算。所以这只是访问这些值的一种操作。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T16:57:01.200

只需存储一个实例而不是指向对象的指针，*除非*您出于某种原因需要指针，例如结构共享或其他自定义所有权语义。它通常会更快，并且会简化您的程序，因为您不需要显式分配/解除分配指针。

（您当然可以使用智能指针来防止显式资源管理，但这会超出您跳过 a 的目的`#include`，因为智能指针会拖入大量模板代码。）

# ruby - 如何使脚本在 ruby 中的“raise”语句之后继续运行？

> ID：14587700
> 
> 赞同：2
> 
> 时间：2013-01-29T16:38:06.920
> 
> 标签：ruby

我正在检查日志文件中是否有任何错误消息。如果在日志文件中发现错误消息，那么我使用 'raise' 语句来报告创建。然而，红宝石在执行“raise”语句后停止运行，即使我使用“rescue”。我希望脚本在“raise”语句之后继续检查下一个日志文件是否有错误，但不确定如何。任何帮助，将不胜感激！

```
 logs_all = s.sudo "egrep -i '#{error_message}' #{log_file}"
        logs_all.each do |hostname, logs|
           unless logs.empty?
            puts line, "Unhappy logs on #{hostname}", line, logs
            happy = false
           end

           begin

            raise "Unhappy logs found! in #{log_file}" unless happy

           rescue raise => error
            puts error.message
           end

        end 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T17:32:38.560

您的救援声明看起来不正确：

```
rescue raise => error 
```

应该：

```
rescue => error 
```

这相当于：

```
rescue StandardError => error 
```

如果你挽救了一个异常并且不重新引发它，ruby 将继续运行。您可以通过以下方式轻松验证这一点：

```
3.times do |i|
  begin
    raise "Raised from iteration #{i}"
  rescue => e
    puts e
  end
end 
```

您将看到打印了三行输出。

不过，作为一般做法，您应该避免抢救异常，除非您打算在运行时做一些事情来纠正问题。拯救而不是重新抛出异常可以隐藏代码中的问题。

更一般地说，请遵循[上面 Sergio 的建议，](https://stackoverflow.com/a/14587724/2004045)不要使用异常作为控制流。

## 延伸阅读

*   [我建议查看此ruby​​ 样式指南](https://github.com/bbatsov/ruby-style-guide#exceptions)的 Exceptions 部分- 它会为您提供一些正确方向的快速指示。
*   另外，[这个关于从不拯救异常的答案](https://stackoverflow.com/a/10048406/2004045)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T16:39:12.223

您正在使用异常作为控制流机制。不。

你想用不愉快的日志做什么？打印它们？到一个文件，也许？这样做，不要引发异常。

# windows - 格式化 csv 文件和 powershell

> ID：14587702
> 
> 赞同：0
> 
> 时间：2013-01-29T16:38:12.217
> 
> 标签：windows, oracle, powershell, csv

好的，所以我们有一个通过 PL/SQL Developer 运行的手动过程来运行查询，然后导出到 csv。

由于我们在 Windows 环境中工作，因此我正在尝试使用 powershell 自动化该过程。

我创建了两个似乎与自动和手动过程完全相同的文件，但它们的工作方式不同，所以我假设我缺少一些隐藏字符，但我找不到它们或弄清楚如何删除它们。

它们工作方式不同的最明显示例是在 excel 中打开它们。手动文件在 excel 中打开，自动将每一列放在它自己的单独列中。自动文件将所有内容放在一列中。

任何人都可以解释一下吗？我希望通过解决这个问题或至少获得一些信息将有助于解决无法正确处理的更大问题。

谢谢。

例如一列 "rownum","year","month","batch","facility","transfer_facility","trans_dt","meter","ticket","trans_product","trans","shipper" “客户”、“供应商”、“经纪人”、“原产地”、“目的地”、“数量”

ex单独的列“”，“ROWNUM”，“RPT_YR”，“RPT_MO”，“BATCH_NBR”，“FACILITY_CD”，“TRANSFER_FACILITY_CD”，“TRANS_DT”，“METER_NBR”，“TKT_NBR”，“TRANS_PRODUCT_CD”，“TRANS_CD”， "SHIPPER_CD","CUSTOMER_NBR","SUPPLIER_NBR","BROKER_CD","ORIGIN_CD","DESTINATION_CD","NET_QTY"

```
$connectionstring = "Data Source=database;User Id=user;Password=password"
$connection = New-Object System.Data.OracleClient.OracleConnection($connectionstring)
$command = New-Object System.Data.OracleClient.OracleCommand($query, $connection)
$connection.Open()
Write-Host -ForegroundColor Black " Opening Oracle Connection"
Start-Sleep -Seconds 2

#Getting data from oracle
Write-Host
Write-Host -ForegroundColor Black "Getting data from Oracle"
$Oracle_data=$command.ExecuteReader()
Start-Sleep -Seconds 2

if ($Oracle_data.read()){
Write-Host -ForegroundColor Green "Connection Success"
while ($Oracle_data.read()) {

#Variables for recordset
$rownum = $Oracle_data.GetDecimal(0)
$rpt_yr = $Oracle_data.GetDecimal(1)
$rpt_mo = $Oracle_data.GetDecimal(2)
$batch_nbr = $Oracle_data.GetString(3)
$facility_cd = $Oracle_data.GetString(4)
$transfer_facility_cd = $Oracle_data.GetString(5)
$trans_dt = $Oracle_data.GetDateTime(6)
$meter_nbr = $Oracle_data.GetString(7)
$tkt_nbr = $Oracle_data.GetString(8)
$trans_product_cd = $Oracle_data.GetString(9)
$trans_cd = $Oracle_data.GetString(10)
$shipper_cd = $Oracle_data.GetString(11)
$customer_nbr = $Oracle_data.GetString(12)
$supplier_nbr = $Oracle_data.GetString(13)
$broker_cd = $Oracle_data.GetString(14)
$origin_cd = $Oracle_data.GetString(15)
$destination_cd = $Oracle_data.GetString(16)
$net_qty = $Oracle_data.GetDecimal(17)

#Define new file
$filename = "Pipeline" #Get-Date -UFormat "%b%Y"
$filename = $filename + ".csv"
$fileLocation = $newdir + "\" + $filename 
$fileExists = Test-Path $fileLocation

    #Create object to hold record
    $obj = new-object psobject -prop @{
        rownum = $rownum
        year = $rpt_yr
        month = $rpt_mo
        batch = $batch_nbr
        facility = $facility_cd
        transfer_facility = $transfer_facility_cd
        trans_dt = $trans_dt
        meter = $meter_nbr
        ticket = $tkt_nbr
        trans_product = $trans_product_cd
        trans = $trans_cd
        shipper = $shipper_cd
        customer = $customer_nbr
        supplier = $supplier_nbr
        broker = $broker_cd
        origin = $origin_cd
        destination = $destination_cd
        quantity = $net_qty
    }
    $records += $obj

}

}else {
Write-Host -ForegroundColor Red " Connection Failed"
}

#Write records to file with headers
$records | Select-Object      rownum,year,month,batch,facility,transfer_facility,trans_dt,meter,ticket,trans_product,trans,shipper,customer,supplier,broker,origin,destination,quantity |
ConvertTo-Csv | 
Select -Skip 1|
Out-File $fileLocation 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T19:21:36.637

为什么要跳过第一行（通常是标题）？另外，请尝试改用 Export-CSV：

```
#Write records to file with headers
$records | Select-Object rownum, year, month, batch, facility, transfer_facility, trans_dt, meter, ticket, trans_product, trans, shipper, customer, supplier, broker, origin, destination, quantity |
Export-Csv $fileLocation -NoTypeInformation 
```

# android - 从另一个类加载 ImageView 源

> ID：14587703
> 
> 赞同：0
> 
> 时间：2013-01-29T16:38:13.447
> 
> 标签：android, class, imageview, extend

抱歉这个问题，但我是 Android 的新手，我想更改调用另一个类的 ImageView 的源，但应用程序关闭。

源代码：

```
public class JugarActivity extends Activity {

@Override
protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.activity_jugar);
    int nivel = 1;

    Niveles crearnivel = new Niveles();
    crearnivel.CrearNivel(nivel);

}

@Override
public boolean onCreateOptionsMenu(Menu menu) {
    // Inflate the menu; this adds items to the action bar if it is present.
    getMenuInflater().inflate(R.menu.activity_jugar, menu);
    return true;
}

} 
```

班上：

```
public class Niveles extends JugarActivity {
ImageView pregunta = (ImageView) findViewById(R.id.imagePregunta);
ImageView respuestaA = (ImageView) findViewById(R.id.imageRespuesta1);
ImageView respuestaB = (ImageView) findViewById(R.id.imageRespuesta2);
ImageView respuestaC = (ImageView) findViewById(R.id.imageRespuesta3);
ImageView respuestaD = (ImageView) findViewById(R.id.imageRespuesta4);

public void CrearNivel(int nivel) {
    if(nivel == 1) {
        pregunta.setImageResource(R.drawable.pregunta1); 
        respuestaA.setImageResource(R.drawable.pregunta1_a); 
        respuestaB.setImageResource(R.drawable.pregunta1_b); 
        respuestaC.setImageResource(R.drawable.pregunta1_c); 
        respuestaD.setImageResource(R.drawable.pregunta1_d); 
    }
}
} 
```

怎么了？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:43:19.367

而不是扩展 Activity 类，您可以创建一个构造函数来传递当前 Activity 上下文以访问非类中的 imageView。将您的课程更改为：

```
public class Niveles {
Activity activity;

public Niveles(Activity activity){
  this.activity=activity;
}

ImageView pregunta = (ImageView)activity.findViewById(R.id.imagePregunta);
ImageView respuestaA = (ImageView)activity. findViewById(R.id.imageRespuesta1);
ImageView respuestaB = (ImageView)activity. findViewById(R.id.imageRespuesta2);
ImageView respuestaC = (ImageView)activity. findViewById(R.id.imageRespuesta3);
ImageView respuestaD = (ImageView)activity. findViewById(R.id.imageRespuesta4);

public void CrearNivel(int nivel) {
    if(nivel == 1) {
        pregunta.setImageResource(R.drawable.pregunta1); 
        respuestaA.setImageResource(R.drawable.pregunta1_a); 
        respuestaB.setImageResource(R.drawable.pregunta1_b); 
        respuestaC.setImageResource(R.drawable.pregunta1_c); 
        respuestaD.setImageResource(R.drawable.pregunta1_d); 
    }
}
} 
```

并将活动上下文传递给 Niveles：

```
Niveles crearnivel = new Niveles(this);
crearnivel.CrearNivel(nivel); 
```

# validation - 如何使用 Google Apps 脚本 Range.setDataValidation

> ID：14587704
> 
> 赞同：1
> 
> 时间：2013-01-29T16:38:16.173
> 
> 标签：validation, google-apps-script, google-sheets

我想限制可以在 Google 电子表格中选择的可能值。这很容易通过 UI 实现，但我想在 Apps 脚本中完成。当我输入以下内容时：

```
var sheet = // get a sheet from somewhere
sheet.getRange(row, column, numRows, numColumns).setDataValidation(dataValidation); 
```

编辑器自动完成“setDataValidation”方法。弹出帮助说它需要一个“DataValidation”类。但是，我找不到此类或此方法的任何文档。

有谁碰巧知道这是否真的受支持？如果是这样，人们如何使用它？

谢谢

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T16:59:19.077

我认为它是一个新功能。您可以通过执行以下操作获得 DataValidation：

```
var r = SpreadsheetApp.openById("...").getActiveRange();
var dv = r.getDataValidation(); 
```

在弹出窗口中，`dv.`您可以看到以下功能：

```
requireValuesInList(String[] values) : DataValidation
requireValuesInRange(Range rangeApi) : DataValidation
setHelpText(String helpText) : DataValidation
setShowDropDown(boolean showDropDown) : DataValidation 
```

然后您需要将验证设置回范围：

```
r.setDataValidation(dv); 
```

# javascript - 使用同一类的 javascript 一次悬停 3 个项目

> ID：14587711
> 
> 赞同：0
> 
> 时间：2013-01-29T16:38:33.877
> 
> 标签：javascript, jquery

> **可能重复：**
> [如何为一次悬停 3 或 4 个元素创建 javascript 函数](https://stackoverflow.com/questions/14579369/how-to-create-javascript-function-for-hovering-3-or-4-element-at-a-time)

我想一次悬停 3 个元素。当我将光标放在其中之一时。它应该悬停在其他两个项目上。我想用 javascript 做到这一点。请看这个：

[http://jsfiddle.net/Taslimkhan/wTcTU/14/](http://jsfiddle.net/Taslimkhan/wTcTU/14/)

我在我的 html 文档中使用了 3 次类。当我将鼠标悬停在第一个框集上时，它会显示所有框悬停。但我需要：当我悬停框 1 时，它应该只显示一个框，当我悬停一个框时，它应该只显示框 1，

当我悬停框 2 时，它应该只显示 B 框，当我悬停 B 框时，它应该只显示框 2，

第三组盒子应该有同样的行为。

我不能两次使用相同的课程。但我想使用相同的课程。一次又一次。但我该怎么做呢？请帮我。

有我用过的代码：

```
$(document).ready(function(){
// box 1
$('.box1').mouseover(function(){
    $('.box1').css('background-color', '#F7FE2E');
    $('.box4').css('background-color', '#F7FE2E');
    $('.hov').css('color', '#0f0');

});
$('.box1').mouseout(function(){
    $('.box1').css('background-color', '#FFF');
    $('.box4').css('background-color', '#FFF');
    $('.hov').css('color', '#fff');

}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:49:35.687

我不确定您要达到的目标。每次只让一个盒子变黄？

这行得通，但我会稍微改变一下标记：

[http://jsfiddle.net/wTcTU/19/](http://jsfiddle.net/wTcTU/19/)

```
$(".box1").mouseenter(function() {
    $(this).parent().next().css("background-color", "yellow");
    $(this).css("background-color", "yellow");
});

$(".box1").mouseleave(function() {
    $(this).parent().next().css("background-color", "white");
    $(this).css("background-color", "white");
});

$(".box4").mouseenter(function() {
     $(this).prev().find(".box1").css("background-color", "yellow");
     $(this).css("background-color", "yellow");
});

$(".box4").mouseleave(function() {
     $(this).prev().find(".box1").css("background-color", "white");
     $(this).css("background-color", "white");
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:51:16.213

这是我的变种：

```
var $boxes = $('.box');
$boxes.hover(function() {
    $boxes.filter('.' + $(this).data('set')).addClass('active');
}, function() {
    $boxes.filter('.' + $(this).data('set')).removeClass('active');
}); 
```

我删除了不必要的代码重复，并利用`data-set`属性来引用需要突出显示的相应框。

我还鼓励您不要使用`.css`方法来设置 HTML 样式。您应该改用 CSS 类来使代码更简洁。

[http://jsfiddle.net/dfsq/wTcTU/21/](http://jsfiddle.net/dfsq/wTcTU/21/)

# tortoisesvn - 如何在 TortoiseSVN 的 bugtraq:message 属性中格式化多个 id？

> ID：14587713
> 
> 赞同：1
> 
> 时间：2013-01-29T16:38:40.937
> 
> 标签：tortoisesvn

当您设置 bugtraq:message 属性时，我想在 tortoiseSVN 提供的文本框中输入一个逗号分隔的问题编号列表。我想格式化附加日志消息中的每个数字。例子：

如果我输入文本框“123,124,125”

我希望阅读附加消息：问题：#123、#124、#125

我想要这种格式的原因是我正在使用的 bugtraq:logregex 正在寻找一个“#”和一个数字。

```
#(\d+)(?:, #(\d+))? 
```

有没有办法使用 bugtraq:message 属性来做到这一点，或者我唯一的选择是将 id 类型设置为任意文本并手动输入“#”？

# javascript - 将 RequireJS 与非 AMD JavaScript 文件一起使用

> ID：14587720
> 
> 赞同：17
> 
> 时间：2013-01-29T16:39:03.533
> 
> 标签：javascript, requirejs, typescript, amd

我正在尝试将大量 JavaScript 页面转换为使用 TypeScript，并使用 RequireJS 来管理模块依赖项。

我遇到的问题是，除了 TypeScript 文件之间的相互依赖关系之外，该页面还依赖于一些与系统其他部分共享但尚未转换为 AMD 的常见 JavaScript 文件。

将非 AMD 脚本放在`<SCRIPT>`Require 标记上方的普通标记中是否非常危险，并假设它们已加载？

如果这是一个坏主意，有什么更好的方法来处理这个问题？我是否需要每个脚本都有 AMD 和非 AMD 版本？或者我是否需要转换所有脚本以便它们可以选择调用`define()`？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-01-30T11:56:12.350

最近版本的 RequireJS 允许您**假装**普通的 JS 文件实际上是 AMD 模块，它们什么都不返回。

我尝试的最新版本 - 2.1.4 - 实际上允许您将纯 JS 文件视为模块。例子：

```
require(
    [
        'path/to/module' // <- AMD module
        ,'path/to/plainjs' // <- actually a plain JS file
    ]
    , function(module, plain){
        // module will be per define in that file.
        // plain will be 'undefined' type
    }
) 
```

您可以自由地将类似模块的引用混合到普通的 JS 文件中。只要它们以正确的顺序加载，它们就会更新它们更新的任何全局变量，你就会得到你想要的。例子：

```
require(['js/underscore'], function(){

    // nesting to insure Underscore, a prereq to BackBone
    // completes loading before backbone starts
    require(
        [
            'path/to/module' // <- AMD module
            ,'js/backbone' // <- actually a plain JS file
        ]
        , function(module){
            // module will be per define in that file.

            window.BackBone // is available for you

        }
    )

}) 
```

请注意，虽然 RequireJS 曾经要求您将“.js”添加到纯 JS 文件的末尾以表明它们是纯 JS，但在上面的示例中，您不使用“.js”这个，无扩展名的模块引用允许要遵循的模块 ID`paths`和`maps`别名，而带有的 ID`.js`被视为文字并且从不翻译。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:04:14.350

您可以手动在脚本标签中包含额外的脚本，但这可能会成为您的团队总是中断的原因（有人忘记添加特定的脚本）。

您可以[从“绝对类型化”中引用 require.d.ts 定义并直接调用](http://www.stevefenton.co.uk/Content/Blog/Date/201302/Blog/Using-RequireJS-and-Jquery-In-TypeScript/)函数`require`而不是`import`语句，这可能会使您的事情更加一致。

# jsp - JSP - 具有相同 URI 的两个 tld 文件 - 容器如何解决冲突？

> ID：14587727
> 
> 赞同：2
> 
> 时间：2013-01-29T16:39:15.003
> 
> 标签：jsp, jsp-tags, taglib, tld

我在下定义了两个`.tld`文件，`WEB-INF`但它们都有相同的`<URI>`说法*"XYZ"*。

我在 JSP 中声明`<%@ taglib prefix="mine" uri="XYZ" %>"`。

容器如何解决关于`tld`读取哪个文件以获取函数类和函数定义的歧义？

**编辑：**我在 Tomcat 7 中运行它并没有抛出异常。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:43:08.513

它将加载在类路径中找到的第一个匹配项。顺序取决于 JVM 和操作系统（本质上是任意的）。你不想依赖它，你应该修复`.tld`URI。

如果这代表了一个现实世界的问题并且 taglib 代码超出了您的控制范围（但这很奇怪，谁会复制现有 taglib 的 URI？您真的拥有另一个 taglib 的域吗？），那么您总是可以重新定义 taglib webapp中的URI`web.xml`如下：

```
<taglib>
    <taglib-uri>http://www.example.com/foo</taglib-uri>
    <taglib-location>/WEB-INF/foo.tld</taglib-location>
</taglib>
<taglib>
    <taglib-uri>http://www.example.com/bar</taglib-uri>
    <taglib-location>/WEB-INF/bar.tld</taglib-location>
</taglib> 
```

# python - 美丽汤中的这个错误是什么意思？

> ID：14587728
> 
> 赞同：2
> 
> 时间：2013-01-29T16:39:15.860
> 
> 标签：python, pyqt, beautifulsoup

我正在使用 PyQt4 和 BeautifulSoup 编写小脚本。基本上你指定 url 而不是脚本应该从网页下载所有图片。

在输出中，当我提供[http://yahoo.com](http://yahoo.com)时，它会下载除一张以外的所有图片：

```
...
Download Complete
Download Complete
File name is wrong 
Traceback (most recent call last):
  File "./picture_downloader.py", line 41, in loadComplete
    self.download_image()
  File "./picture_downloader.py", line 58, in download_image
    print 'File name is wrong ',image['src']
  File "/usr/local/lib/python2.7/dist-packages/beautifulsoup4-4.1.3-py2.7.egg/bs4/element.py", line 879, in __getitem__
    return self.attrs[key]
KeyError: 'src' 
```

[http://stackoverflow.com](http://stackoverflow.com)的输出是：

```
Download Complete
File name is wrong  h
Download Complete 
```

最后，这里是部分代码：

```
# SLOT for loadFinished
def loadComplete(self): 
    self.download_image()

def download_image(self):
    html = unicode(self.frame.toHtml()).encode('utf-8')
    soup = bs(html)

    for image in soup.findAll('img'):
        try:
            file_name = image['src'].split('/')[-1]
            cur_path = os.path.abspath(os.curdir)
            if not os.path.exists(os.path.join(cur_path, 'images/')):
                os.makedirs(os.path.join(cur_path, 'images/'))
            f_path = os.path.join(cur_path, 'images/%s' % file_name)
            urlretrieve(image['src'], f_path)
            print "Download Complete"
        except:
            print 'File name is wrong ',image['src']
    print "No more pictures on the page" 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T16:42:40.583

这意味着该`image`元素没有`"src"`属性，并且您会两次收到相同的错误：一次在`file_name = image['src'].split('/')[-1]`except 块中，然后在之后`'File name is wrong ',image['src']`。

* * *

避免该问题的最简单方法是替换`soup.findAll('img')`为，`soup.findAll('img',{"src":True})`这样它只会找到具有`src`属性的元素。

* * *

如果有两种可能性，请尝试以下操作：

```
for image in soup.findAll('img'):
    v = image.get('src', image.get('dfr-src'))  # get's "src", else "dfr_src"
                                                # if both are missing - None
    if v is None:
        continue  # continue loop with the next image
    # do your stuff 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:47:37.687

好的，这就是正在发生的事情。在您的 try-except 中，您会得到一个`KeyError`from，`file_name = image['src'].split('/')[-1]`因为该对象没有`src`属性。

然后，在您的`except`声明之后，您尝试访问导致错误的相同属性：`print 'File name is wrong ',image['src']`.

检查`img`导致错误的标签并重新评估这些情况的逻辑。

# delphi - 线程安全对象的包装类

> ID：14587732
> 
> 赞同：2
> 
> 时间：2013-01-29T16:39:33.333
> 
> 标签：delphi, concurrency, indy

我最近玩了一个演示INDY10 TCP/IP 服务器基本功能的[开源](https://sourceforge.net/projects/indy10clieservr/?source=directory)项目，偶然发现了 INDY 的内部多任务实现及其与 VCL 组件的交互问题。由于 SO 中有许多关于该主题的不同主题，我决定制作一个简单的客户端-服务器应用程序并测试一些建议的解决方案和方法，至少是我理解正确的那些。下面我想总结和回顾一下之前在 SO 上建议的方法，如果可能的话，请听听您对该主题的专家意见。

> 问题：在基于 indy10 的客户端/服务器应用程序中封装 VCL 以实现线程安全使用。

开发环境描述：Delphi 版本：Delphi® XE2 版本 16.0 INDY 版本 10.5.8.0 OS Windows 7 (32Bit)

如文章中所述（[VCL 线程安全吗？]）（对不起，我没有足够的声誉来发布链接）当希望在多线程（多任务）中使用任何类型的 VCL 组件时应特别小心应用。VCL 不是线程安全的，但可以以线程安全的方式使用！如何和为什么通常取决于手头的应用程序，但可以尝试概括一下并提出某种通用方法来解决这个问题。首先，与INDY10 的情况一样，不需要显式地并行化他的代码，即创建和执行多个线程，以使VCL 暴露于死锁和数据相互依赖关系。

在每个 sclient-server 应用程序中，服务器必须能够同时处理多个请求，因此 INDY10 内部自然地实现了此功能。这意味着 INDY10 类集负责在内部管理程序的线程创建、执行和销毁过程。

我们的代码暴露于 INDY10 内部工作并因此可能发生线程冲突的最明显的地方是 IdTCPServerExecute（TIdTCPServer onExecute 事件）方法。

自然地，INDY10 提供了确保线程安全的程序流的类（包装器），但由于我没有设法获得关于它们的应用和用法的足够解释，我更喜欢定制的方法。

下面我总结了一种方法（建议的技术基于我在 SO [How to use TIdThreadSafe class from Indy10](https://stackoverflow.com/questions/13111880/how-to-use-tidthreadsafe-class-from-indy10)中找到的先前评论）尝试（并且可能成功）处理此问题：

> 我在下面解决的问题是：如何使特定类“MyClass”ThreadSafe？

主要思想是创建一种封装“MyClass”的包装类，并将尝试按照先进先出原则访问它的线程排队。用于同步的底层对象是 [Windows 的关键部分对象。]。

在客户端-服务器应用程序的上下文中，“MyClass”将包含我们服务器的所有线程不安全功能，因此我们将尝试确保这些过程和功能不会由多个工作线程同时执行。这自然意味着我们的代码失去了并行性，但是由于该方法很简单而且看起来很简单，因此在某些情况下这可能是一种有用的方法。

包装类实现：

```
constructor TThreadSafeObject<T>.Create(originalObject: T);
begin
  tsObject := originalObject; // pass it already instantiated instance of MyClass
  tsCriticalSection:= TCriticalSection.Create; // Critical section Object
end;

destructor TThreadSafeObject<T>.Destroy();
begin
  FreeAndNil(tsObject);
  FreeAndNil(tsCriticalSection);
  inherited Destroy;

end;

function TThreadSafeObject<T>.Lock(): T;
begin
  tsCriticalSection.Enter;
  result:=tsObject;

end;

procedure TThreadSafeObject<T>.Unlock();
begin
  tsCriticalSection.Leave;
end;

procedure TThreadSafeObject<T>.FreeOwnership();
begin
  FreeAndNil(tsObject);
  FreeAndNil(tsCriticalSection);
end; 
```

MyClass 定义：

```
MyClass = class

  public
    procedure drawRandomBitmap(abitmap: TBitmap); //Draw Random Lines on TCanvas
    function decToBin(i: LongInt): String; //convert decimal number to Bin. 
    procedure addLineToMemo(aLine: String; MemoFld: TMemo); // output message to TMemo
    function randomColor(): TColor; 
  end; 
```

用法：

由于线程按顺序执行并等待具有关键部分当前所有权的线程完成（tsCriticalSection.Enter; 和 tsCriticalSection.Leave;），因此如果要管理该所有权中继，则需要一个唯一实例是合乎逻辑的**TThreadSafeObject**（可以考虑使用单例模式）。所以包括：

```
tsMyclass:= TThreadSafeObject<MyClass>.Create(MyClass.Create); 
```

在 Form.Create 和

```
tsMyclass.Destroy; 
```

在窗体中。关闭；这里 tsMyclass 是 MyClass 类型的全局变量。

用法：

关于 MyClass 的使用，请尝试以下操作：

```
with tsMyclass.Lock do
try
  addLineToMemo('MemoLine1', Memo1);
  addLineToMemo('MemoLine2', Memo1);
  addLineToMemo('MemoLine3', Memo1);
finally
  // release ownership
  tsMyclass.unlock;
end; 
```

，其中 Memo1 是窗体上 TMemo 组件的一个实例。

有了这个，我们应该确保当 tsMyClass 被锁定时发生的任何事情一次只能由一个线程执行。然而，这种方法的一个明显缺点是，由于我只有一个 tsMyclass 实例，即使一个线程试图在 Canvas 上绘制，而另一个线程正在备忘录上写，第一个线程也必须等待第二个完成，只有这样它才能执行它的工作。

我的问题是：

1.  上述建议的方法是否正确？我是否仍然没有竞争条件，或者我的代码中有一些“漏洞”，可能会发生数据冲突？
2.  一般来说，如何测试他/她的应用程序的线程不安全性？

我想强调的是，上述做法绝不是我自己的做法。它基本上是对[2](https://stackoverflow.com/questions/13111880/how-to-use-tidthreadsafe-class-from-indy10)中找到的解决方案的总结。尽管如此，我还是决定再次发帖，试图对该主题进行某种封闭，或者为建议的解决方案提供一种有效性证明。此外，正如他们所说，重复是所有知识之母。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T18:03:09.017

> 有了这个，我们应该确保当 tsMyClass 被锁定时发生的任何事情一次只能由一个线程执行。然而，这种方法的一个明显缺点是，由于我只有一个 tsMyclass 实例，即使一个线程试图在 Canvas 上绘制，而另一个线程正在备忘录上写，第一个线程将不得不等待第二个完成，只有这样它才能执行它的工作。

我在这里看到了一个大问题：VCL（表单、绘图等）存在于主线程中。即使您阻止并发线程访问，更新也需要在主线程的上下文中完成。这是您需要使用 Synhronize() 的部分，与锁 (Criticalsection) 的最大区别在于同步代码在主线程的上下文中运行。最终结果基本相同，您的线程代码被序列化，您首先失去了使用线程的优势。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:11:42.293

Locking on the whole object can be much too coarse.

Imagine cases where some properties or methods are independent of others. If the lock works on a "global" level, many operations will be blocked needlessly.

From [Reduce lock granularity – Concurrency optimization](http://sourcevirtues.wordpress.com/2011/10/11/reduce-lock-granularity-concurrency/)

> So, how can we reduce lock granularity? With a short answer, by asking for locks as less as possible. The basic idea is to use separate locks to guard multiple independent state variables of a class, instead of having only one lock in class scope.

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T17:16:03.673

首先要做的事情是：您不需要为每个对象实现 LOCK，Delphi 已通过`TMonitor`该类为您完成了该操作：

```
TMonitor.Enter(WhateverObject);
try
  // Your code goes here.
finally TMonitor.Leave(WhateverObject);
end; 
```

只要确保您`WhateverObject`在应用程序关闭时释放，否则您会遇到我在 QC 上打开的错误：http: //qc.embarcadero.com/wc/qcmain.aspx?d= [111795](http://qc.embarcadero.com/wc/qcmain.aspx?d=111795)

其次，使应用程序多线程涉及更多。您不能只在`Enter`/调用之间包装每个`Leave`调用：您的“锁定”需要考虑对象的作用以及访问模式是什么。在 Enter/Leave 中包装调用只是确保在任何时候只有一个线程运行该方法，但竞争条件要复杂得多，并且可能来自对锁定方法的连续调用。即使每个方法都被锁定，并且在任何给定时间只有一个线程调用过这些方法，锁定对象的状态也可能由于其他线程的活动而发生变化。

这种代码在单线程应用程序中会很好，但是在切换到多线程时在方法级别锁定是不够的：

```
if List.IndexOf(Something) = -1 then
  List.Add(Something); 
```

# java - Android - 如何有效地在 TextView 中加载大量文本？

> ID：14587734
> 
> 赞同：14
> 
> 时间：2013-01-29T16:39:37.173
> 
> 标签：java, android, textview, paging, android-view

我正在编写一个读取单个文本文件并将其显示在`TextView`.

我现在正在做的是将整个文件读入 String （使用`BufferedReader`and `StringBuilder`）并将其显示在`TextView`using上`setText(string)`。一个 700KB 的文本文件大约需要 2 到 3 秒才能显示在屏幕上。

但我使用了市场上的其他一些电子书阅读器，它们几乎可以立即显示相同的文本。有谁知道我怎么能做到这一点？

谢谢。

**编辑**：许多人建议使用 ListView，但它不适用于我的特定情况。这是来自我对其中一个答案的回复： ...[ListView] 对我不起作用有几个原因。(1) 为了使 Listview 看起来像一个 TextView，我们必须将文本分解为换行符。如果我加载一个大段落，它与加载 TextView 一样慢。(2) 由于 ListView 仅测量屏幕上的项目，我无法提前知道整个文本的总“页数”或“高度”。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T16:44:08.493

从本质上讲，关键是仅在需要时加载所需的数据。一种方法是将每个段落放入它自己的 TextView 中，该 TextView 放入 ListAdapter 中，该 ListAdapter 包含在 ListView 中。必须设置某种索引，以便每个段落都知道在数据文件中的何处查找。此界面将允许您仅在需要时加载所需的内容。您的列表适配器看起来像这样（此代码不完整，但它至少应该让您知道应该做什么）：

```
class ParagraphAdapter extends ListAdapter{
ArrayList<Integer> mLocations; // Somewhere define this to your locations, I'll leave that for you to figure out
protected View getView(int position,View convertView, ViewGroup parent)
{
  mLocations.get(position); // Read the file starting at this position, until the next value
  String text; // This is the output of the above
  TextView tv=new TextView(context);
  tv.setText(parent.getContext());
}
} 
```

值得注意的是，亚马逊为 Kindle 应用程序使用了分页系统。如果您有该应用程序，您可以在每个页面的底部看到您所在的部分。每个“页面”的长度可能更接近一个句子左右。然后只需获取正确的页面即可，这可以相当快地完成。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:47:47.667

补充@PearsonArtPhoto 所说的话-

我建议您实现某种分页机制，将您的文本分成页面。
您应该做的是根据假设每页 N + M 个字符来拆分文本。
N = 固定字符数。
M = 从 N 到最近的行尾字符的字符数（因此您不会看到最后一行被“剪切”）。
我建议如果您的 android 设备允许您将其保存在“内存中” -
这样做，
并且不要尝试从一页一页的文件中获取它，而是从“内存中”结构中获取 - 这个将提高性能。
一旦您滚动并意识到您需要获取下一页，请从“内存中”结构中获取它。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-07-22T10:08:22.150

您可以将 Jetpack 中的 Android 分页库与自定义 View 或 RecyclerView 一起使用

[https://developer.android.com/topic/libraries/architecture/paging](https://developer.android.com/topic/libraries/architecture/paging)

1.  实现提供数据范围列表的 DataSource 抽象
2.  实现提供真实数据的存储抽象（来自数据库、网络、文件等）
3.  使用 RecyclerView 和 Adapter 展示数据

可以在这里找到显示大文件内容的示例应用程序 [https://github.com/YablokovDmitry/FileView](https://github.com/YablokovDmitry/FileView)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-11-03T19:13:30.790

为此，Lucas Rocha 构建了一个名为 Smoothie 的不错的库。

[http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/](http://lucasr.org/2012/04/05/performance-tips-for-androids-listview/)

在 Android listview 的性能提示的末尾，有一个关于 Smoothie 的解释链接，最后你会在 github 上找到可用的库。

最初描述用于加载图像，该方法也适用于加载文本。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-01-29T18:01:52.093

您必须考虑是否使用了正确的组件。也许阅读行并将它们放入列表视图会更好。

尝试

```
List<String> lines; 
listview.adapter(new ArrayAdapter<String>(...,lines)); 
```

很多时候，你所看到的（外观和感觉）并不像你想象的那样。

# eclipse - 无法停止在 Eclipse 中运行调试

> ID：14587737
> 
> 赞同：0
> 
> 时间：2013-01-29T16:39:40.520
> 
> 标签：eclipse, debugging

我无法在我的 Eclipse 中停止调试过程。我正在尝试运行 atl 转换，但总是以某种方式失败说：`error: resource/..: null`，然后我说，好吧，现在我将调试并查看它挂在哪里，然后我点击调试按钮，现在它卡在 57% 并且永远不会停止, 停止图标甚至被禁用。这是截图。我怎样才能停止调试？或另一个问题，为什么会发生这种情况？

感谢帮助！

![在此处输入图像描述](../Images/33f74f5d1eb88033a04c01103cc584bd.png)

# ravendb - RavenDB 将已使用的 Id 分配给 Document

> ID：14587742
> 
> 赞同：0
> 
> 时间：2013-01-29T16:39:48.150
> 
> 标签：ravendb

我有一个包含 UserAccounts 列表的 excel 文件。我还有一种方法可以导入这些 UserAccounts 并将它们保存到 RavenDB。在 excel 文件中，我存储了 UserAccount 对象 (useraccounts/55) 的 ID。RavenDB 没有分配值，我正在分配它。我的导入效果很好。

然而，

稍后，我尝试使用以下方法通过管理面板保存新的 UserAccount：

```
 [HttpPost]
            public ActionResult Create(UserAccountViewModel input)
            {
               // Validation omitted             

                    var model = new UserAccount()
                    {
                        Email = input.Email,
                        FirstName = input.FirstName,
                        LastName = input.LastName,
                        Phone = input.Phone,
                        Username = input.Username,
                        AuthorizeNetCustomerProfileId = customer.ProfileID,
                        Password = input.Password,

                    };

                    Raven.Store(model);
                    Raven.SaveChanges();
                    return RedirectToAction("Index");
             } 
```

当我打电话

```
Raven.Store(model) 
```

它为新的 UserAccount 对象分配了一个 ID，但它从 1 开始。所以当我第一次尝试这样做时，它会将 UserAccounts/1 分配给我的新 UserAccount。问题是我的导入中已经存在 UserAccounts/1 ，所以当我调用保存更改时，我得到了一个 etag 异常。

当我再次运行该方法时，它会分配 UserAccounts/2 等等？想法？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:45:43.170

The easiest way would be to have a string Id property in your UserAccount class, and assign it a value of "UserAccounts/". That trailing slash is going to ask RavenDB to assign it an ID using an identity-like process, instead of HiLo. Its somewhat slower, but it'll work.

The better way of solving this is by changing the HiLo documents on the server, making them start with the first available range, but thats messier.

# c# - 将一些代码从 c# 转换为 vb.net

> ID：14587747
> 
> 赞同：0
> 
> 时间：2013-01-29T16:40:11.847
> 
> 标签：c#, asp.net, vb.net, gridview, rowdatabound

我正在将一些类从`C#`to转换为`VB.NET`，此行无法正确转换。我尝试了一些在线转换器，但它们似乎不起作用。

```
this.mGrid.RowDataBound += new GridViewRowEventHandler(RowDataBoundHandler); 
```

转换后`VB.NET`不起作用。

```
Me.mGrid.RowDataBound += New GridViewRowEventHandler(RowDataBoundHandler) 
```

以下是我从中得到的两个错误。谁能帮帮我，因为我的大脑现在已经死了。

谢谢，

`Error 4 Delegate 'System.Web.UI.WebControls.GridViewRowEventHandler' requires an 'AddressOf' expression or lambda expression as the only argument to its constructor. C:\My Projects\PMS\App_Code\GridViewHelper.vb 110 62 C:\My Projects\PMS\`

`Error 3 'Public Event RowDataBound(sender As Object, e As System.Web.UI.WebControls.GridViewRowEventArgs)' is an event, and cannot be called directly. Use a 'RaiseEvent' statement to raise an event. C:\My Projects\PMS\App_Code\GridViewHelper.vb 110 9 C:\My Projects\PMS\`

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T16:42:57.233

您不需要在 VB.NET 中以编程方式注册事件处理程序。您可以使用 aspx 标记来声明事件处理程序（`OnRowDataBound = "RowDataBoundHandler"`）或使用[`Handles`子句](http://msdn.microsoft.com/en-us/library/6k46st1y.aspx)。您甚至可以将一个用于多个控件，用逗号分隔它们。

```
Protected Sub GridView1_RowDataBound(sender As Object, e As GridViewRowEventArgs) _
    Handles GridView1.RowDataBound
End Sub 
```

如果您想手动添加它，请使用`AddHandler`：

```
AddHandler Me.GridView1.RowDataBound, AddressOf RowDataBoundHandler 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T16:41:23.490

`AddHandler`如果要手动绑定事件，请尝试使用：

```
AddHandler Me.mGrid.RowDataBound, AddressOf RowDataBoundHandler 
```

或者您可以在 ASPX 标记中绑定事件：

```
<asp:GridView ... RowDataBound="RowDataBoundHandler" runat="server" /> 
```

或者使用 Tim Schmelter 的方法。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-01-29T16:41:34.673

改用它，这是 VB 的做法。VB 使用 AddHandler 来标识事件，AddressOf 指向委托。

```
AddHandler mGrid.RowDataBound, AddressOf RowDataBoundHandler 
```

# android - 如何在 Eclipse 中为 Android 进行新配置？

> ID：14587749
> 
> 赞同：0
> 
> 时间：2013-01-29T16:40:15.030
> 
> 标签：android, eclipse

我遇到了以下问题：当我尝试执行 Android 项目时，出现了选择执行项目方式的对话框。我选择“Android项目”。执行了一些android模拟器，一切都很好。然后我转到首选项并在“启动”选项卡中设置“始终启动先前启动的应用程序”选项。我认为一切都已完成，但是当我再次尝试执行我的项目时，我看到了“创建、管理和运行配置”对话框。除“Android JUnit Test”外，左侧菜单中没有 Android 项目。我该如何解决？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:45:11.153

之前运行的项目必须在 Eclipse 中打开，在从 Run 菜单中选择“Run Last Launched”之前打开该项目。

# webkit - 在没有 GTK 的情况下运行 webkit WebView？

> ID：14587751
> 
> 赞同：4
> 
> 时间：2013-01-29T16:40:29.647
> 
> 标签：webkit, gtk

我可以在没有[GTK](http://en.wikipedia.org/wiki/GTK%2B#GTK.2B_hello_world)循环的情况下运行[webkit.WebView](http://webkitgtk.org/reference/webkitgtk/stable/webkitgtk-webkitwebview.html#webkit-web-view-load-uri)对象吗？我想制作一个简单的基于 webkit 的无头浏览器，而且我在任何地方都不需要 GTK——我什么都不显示。

```
win = gtk.Window() # <------------------------+--- can I not use those?
web = webkit.WebView() #                       |
web.load_uri("http://example.com") #           |
web.connect("load-finished", get_html_source) #|
win.add(web) # <-------------------------------|
#win.show_all() #                              |
gtk.main() # <---------------------------------| 
```

没错，没有`show_all`我什么都不会显示，但我仍然使用 GTK。我想让脚本多线程，GTK在这里有问题（我使用的模块越少对我来说越好）

（我使用 Python，但这不是 Python 特有的问题）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T19:17:57.940

不，那是不可能的。`webkit.WebView`它建立在 GTK 工具包之上，即使您只显示 Web 视图，您仍然需要一个 GTK 窗口来将其放入。

如果您真的不想要 GTK 窗口，那么为什么不在默认浏览器中打开该页面呢？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-02-13T14:13:11.687

对于无头，您也可以使用`gtk_offscreen_window_new()`. 对于`gtk_main()`多线程，请考虑[阅读文章“多线程 GTK 应用程序”](http://blogs.operationaldynamics.com/andrew/software/gnome-desktop/gtk-thread-awareness)。

# php - php base64 编码 imagecreatetruecolor

> ID：14587754
> 
> 赞同：2
> 
> 时间：2013-01-29T16:40:33.597
> 
> 标签：php, base64, encode

我有一个生成图像然后将图像输出为 png 的 php 脚本。

```
$img = imagecreatetruecolor($graphWidth,$graphHeight);
...
*drawing routines*
...
header("Content-type: image/png");
imagepng($img); 
```

我现在需要的是让 php 脚本对图像数据进行 base64 编码并输出该字符串（这样我最终可以将该编码数据传递给一个 java 脚本，该脚本对该图像进行解码并将其添加到生成的 pdf 中）。

我已经尝试过多次使用其他stackoverflow帖子/答案等来让它自己工作，但我对这项技术的了解还不够，无法让它发挥作用。

有人可以帮我吗？

提前致谢，

克里斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T17:21:04.110

这不起作用的原因是因为图像`$img`是资源，而不是实际的 PNG 图像。当您调用时`imagepng()`，它会输出图像。

我要做的是创建一个输出缓冲区，并对其进行 base-64 编码。

```
ob_start();
imagepng($img);
$buffer = ob_get_clean();
ob_end_clean();
echo base64_encode($buffer); 
```

不要忘记更改`Content-Type`标题，因为这不再是`image/png`.

# x86 - x86：为什么在移动到内存地址时未设置进位标志？

> ID：14587756
> 
> 赞同：0
> 
> 时间：2013-01-29T16:40:33.990
> 
> 标签：x86, yasm

我意识到这可能看起来像一个骗局，但我没有发现任何与我的问题很相似的东西。说我有 yasm：

```
segment .data

a  db 0

...

main:

    mov rax, 0xffffffff

    mov [a], rax 
```

为什么在进入 a 时不设置进位标志？只是一个字节！当我清楚地移入它时，它比一个字节大得多。事实上，在 gdb 中，整个数字都存储在 a 中。鉴于它的声明，这怎么可能？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:42:47.447

因为`mov`没有设置标志。没有比这更深层次的原因了。

引用英特尔指令集参考手册：

> **受影响的标志**
> 
> 没有任何。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:45:39.313

The carry bit gets set with mathematical operations only. You might be thinking of the overflow bit, but this also does nothing in this case.

As Stephen rightly says:

`mov` doesn't set flags

# css - 如何为 Apple 风格的 CSS3 关键帧设置动画？

> ID：14587762
> 
> 赞同：1
> 
> 时间：2013-01-29T16:40:55.347
> 
> 标签：css, animation, css-animations

我最近发布了一个关于使用 jQuery构建[这个 Mac 产品浏览器动画的问题。](http://www.apple.com/mac/)这似乎工作正常，但是一些用户进入源代码并发现 Apple 正在使用带有关键帧的 CSS3 动画。我查看了源代码，我正在努力让它工作。如果有人可以偷看，我会很乐意提供帮助。

![苹果页面动画](../Images/86afcf67f7f9be8d9c32cba57add9eb3.png)

请注意，我对底部滑动面板链接**不**感兴趣 - 只有当您最初加载页面时发生的第一个动画。所有的项目都会像弹性一样从看不见的地方反弹到产品浏览器中。代码可在此页面文档中找到：http: [//images.apple.com/global/styles/productbrowser.css](http://images.apple.com/global/styles/productbrowser.css)

特别是第 169-340 行展示了关键帧动画。我将复制一段代码，希望有人能认出它的语法。提前感谢您提供的任何帮助，我真的很感激。

```
/* open browser animation */
.productbrowser.pb-dynamic ul:first-child li                 a { opacity:0; }
.productbrowser.pb-open    ul:first-child li                 a { opacity:1; -webkit-animation-duration:.8s; -moz-animation-duration:.8s; -o-animation-duration:.8s; animation-duration:.8s; }
.productbrowser.pb-open    ul:first-child li:nth-child(1)    a { -webkit-animation-name:open-1; -moz-animation-name:open-1; -o-animation-name:open-1; animation-name:open-1; }
.productbrowser.pb-open    ul:first-child li:nth-child(2)    a { -webkit-animation-name:open-2; -moz-animation-name:open-2; -o-animation-name:open-2; animation-name:open-2; }
.productbrowser.pb-open    ul:first-child li:nth-child(3)    a { -webkit-animation-name:open-3; -moz-animation-name:open-3; -o-animation-name:open-3; animation-name:open-3; }
.productbrowser.pb-open    ul:first-child li:nth-child(4)    a { -webkit-animation-name:open-4; -moz-animation-name:open-4; -o-animation-name:open-4; animation-name:open-4; }
.productbrowser.pb-open    ul:first-child li:nth-child(5)    a { -webkit-animation-name:open-5; -moz-animation-name:open-5; -o-animation-name:open-5; animation-name:open-5; }
.productbrowser.pb-open    ul:first-child li:nth-child(6)    a { -webkit-animation-name:open-6; -moz-animation-name:open-6; -o-animation-name:open-6; animation-name:open-6; }
.productbrowser.pb-open    ul:first-child li:nth-child(7)    a { -webkit-animation-name:open-7; -moz-animation-name:open-7; -o-animation-name:open-7; animation-name:open-7; }
.productbrowser.pb-open    ul:first-child li:nth-child(8)    a { -webkit-animation-name:open-8; -moz-animation-name:open-8; -o-animation-name:open-8; animation-name:open-8; }
.productbrowser.pb-open    ul:first-child li:nth-child(9)    a { -webkit-animation-name:open-8; -moz-animation-name:open-8; -o-animation-name:open-8; animation-name:open-8; }
.productbrowser.pb-opened  ul:first-child li                 a { opacity:1; }

/* keyframes
------------------------*/

/* open browser keyframes */

@-webkit-keyframes open-1 {
    from { opacity:0; -webkit-transform:translate3d( 210px, -145px, 0); }
    25%  { opacity:1; -webkit-transform:translate3d( -15.6px, 4.1px, 0); }
    30%  { opacity:1; -webkit-transform:translate3d( -10.3px, 2.7px, 0); }
    35%  { opacity:1; -webkit-transform:translate3d( 0, 0, 0); }
    40%  { opacity:1; -webkit-transform:translate3d( 4.5px, -1.2px, 0); }
    45%  { opacity:1; -webkit-transform:translate3d( 2.9px, -0.8px, 0); }
    50%  { opacity:1; -webkit-transform:translate3d( 0, 0, 0); }
    55%  { opacity:1; -webkit-transform:translate3d( -1.3px, 0.3px, 0); }
    60%  { opacity:1; -webkit-transform:translate3d( -0.8px, 0.2px, 0); }
    65%  { opacity:1; -webkit-transform:translate3d( 0, 0, 0); }
    70%  { opacity:1; -webkit-transform:translate3d( 0.4px, -0.1px, 0); }
    75%  { opacity:1; -webkit-transform:translate3d( 0.2px, -0.1px, 0); }
    80%  { opacity:1; -webkit-transform:translate3d( 0, 0, 0); }
    85%  { opacity:1; -webkit-transform:translate3d( -0.1px, 0, 0); }
    90%  { opacity:1; -webkit-transform:translate3d( -0.1px, 0, 0); }
    to   { opacity:1; -webkit-transform:translate3d( 0, 0, 0); }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-16T21:15:37.380

这是一个非常简单的 css 语法。你定位一个元素

```
.productbrowser.pb-open    ul:first-child li:nth-child(4)    a {animation-name:open-4; } 
```

在这里，您的目标是一个元素，它是 li 中的第 4 个子元素，它是 ul 中的第一个子元素，它是具有类 productbrowser 和 pb-open 的元素的后代。为这个元素分配动画 open-4（我省略了供应商前缀）。

动画持续时间通常为所有元素给出。

然后动画以百分比分配给定时间，

```
@-webkit-keyframes open-1 {
    from { opacity:0; -webkit-transform:translate3d( 210px, -145px, 0); }
    25%  { opacity:1; -webkit-transform:translate3d( -15.6px, 4.1px, 0); }
    30%  { opacity:1; -webkit-transform:translate3d( -10.3px, 2.7px, 0); }
    35%  { opacity:1; -webkit-transform:translate3d( 0, 0, 0); } 
```

从第一步开始，不透明度设置为 1，然后剩下的步骤只是运动。它实际上是一个二维运动，z 坐标始终为 0

# javascript - 将 RequireJS 与遗留代码一起使用

> ID：14587766
> 
> 赞同：4
> 
> 时间：2013-01-29T16:41:06.953
> 
> 标签：javascript, backbone.js, requirejs, legacy

我正在处理一个非常大的项目，该项目使用：

1.  包含带有脚本标记的 javascript 文件的旧版 JSP 页面
2.  使用其他没有 RequireJS 的 javascript 模块的主干模型和视图

我们现在想开始将 RequireJS 与 jQuery、BackboneJS 和 UnderscoreJS 一起用于我们从现在开始开发的所有内容，但是我们没有资源来重写所有遗留 JSP 页面。我们可能有时间重写我们已经开发的 Backbone 模型和视图。

问题在于，对于我们的遗留代码（上面的 1 和 2），我们将所有 javascript 文件包含在一个巨大的文件中并发送到浏览器。这个巨大的文件必须能够与我们的新 RequireJS 模板共存，但是我怎样才能例如分离巨大文件的某些部分，以便我可以将它们与使用 RequireJS 的模板一起使用？无需重写所有使用这部分文件的页面，也无需重复代码。

谢谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:03:37.607

我不知道我是否完全掌握了手头的问题，但我认为 RequireJS 的`shim`or`map`函数会帮助你。

从巨大的 javascript 文件中提取新模块中所需的部分。然后告诉 RequireJS，你巨大的 javascript 文件是这个使用 shim 的新模块的依赖项。就像是：

```
requirejs.config({
    shim: {
        'new-module': {
            deps: ['huge-javascript-file'],
            exports: 'NewModule'
    }
}); 
```

垫片文档：[http ://requirejs.org/docs/api.html#config-shim](http://requirejs.org/docs/api.html#config-shim)

当只有部分新代码必须使用旧的大文件时，map 函数可能很有用。查看此文档：[http ://requirejs.org/docs/api.html#config-map](http://requirejs.org/docs/api.html#config-map)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:46:17.487

I don't think there is One True Way to achieve this, but I've approached a similar problem by defining module "facades" around the globally scoped code. Let's say your legacy scripts define a global variable called `foo`. You can define a AMD module and export that variable from it:

```
//foo.js
define(function() {
  return window.foo;
});

//bar.js
define(['foo'], function(foo) {
  //do something with foo
}); 
```

This way you only need to write a single-line facade every time you need to use a new piece of the existing, globally defined code, without breaking existing code which expects the same code to be globally defined. Over time you can move and refactor the actual implementation into the module without breaking consumer code.

# dynamics-crm-2011 - 令牌有效期到期时强制用户输入凭据（避免自动登录）ADFS 2.0

> ID：14587767
> 
> 赞同：0
> 
> 时间：2013-01-29T16:41:07.660
> 
> 标签：dynamics-crm-2011, portal, adfs2.0, adfs

我有一个使用 ADFS 作为身份验证模式的 asp.net 应用程序。我对 CRM 和这个网络应用程序有中继方信任。我想在令牌的生命周期到期时强制用户输入凭据，因为现在，当生命周期到期时，我将重定向到 ADFS 并自动登录 Web 应用程序。我想仅针对 Web 应用程序更改此行为，让 CRM 中继方保持原样。我应该更新应用程序的 web.config 中的哪些属性？是否可以通过 PowerShell 控制台修改依赖方信任的任何属性？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-06T19:18:13.503

基本上退出只是删除cookie，所以：

```
FormsAuthentication.SignOut 
```

或者

```
FederatedAuthentication.SessionAuthenticationModule.SignOut 
```

或者

```
FederatedAuthentication.SessionAuthenticationModule.DeleteSessionTokenCookie 
```

将工作。

或者使用实际的方法：

```
var authModule = FederatedAuthentication.WSFederationAuthenticationModule;
        WSFederationAuthenticationModule.FederatedSignOut(new Uri(authModule.Issuer),  new Uri(replyUrl)); 
```

或者使用 FederatedPassiveSignInStatus（应该在您的工具箱中）。将属性 SignOutAction 设置为 FederatedSignOut，控件也会清除您的 STS 会话。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-22T17:14:29.873

In your RP's .config you can set a freshness value to indicate how long the user's credentials should be valid for the STS.

```
<wsFederation requireHttps="true"
                    passiveRedirectEnabled="true"
                    realm="http://localhost/rp"
                    issuer="https://localhost/sts/issue/wsfed"
                    freshness="10"
                    /> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-31T16:20:47.800

恕我直言，当 CRM 和您的应用程序都是同一个 ADFS-Server/STS 的依赖方时，您的要求是不可能的。由于两者都使用相同的服务，您可以获得单点登录。

您针对 ADFS-Server 进行身份验证，因此没有从依赖方注销的概念。您只能从 ADFS-Server 注销，这反过来会对所有依赖方产生影响。

# javascript - 不要在 Prettyphoto 中显示两次照片

> ID：14587769
> 
> 赞同：1
> 
> 时间：2013-01-29T16:41:14.100
> 
> 标签：javascript, jquery, href, prettyphoto

我有一个棘手的问题我无法解决。我`jquery.prettyphoto.js`用来在“灯箱”中显示一组图像。

该集中的第一张照片是“AvatarPhoto”，它在页面上呈现了两次。首先在顶部，单独站立，并且与所有其他照片一起在滑块中。两者都链接到同一个画廊中的同一张图片。

看看这个：http: [//jsfiddle.net/wtZLY/](http://jsfiddle.net/wtZLY/)

好的，我根据halfer的回答解决了这个问题，只是给“allFotos”的第一个链接一个id：

```
 $('#profilePicture').click(function() {
    $('#foto_0').click();
    }); 
```

但我想知道我是否不能使用 prettyphoto API

```
$.prettyPhoto.open() 
```

但看起来我不可能简单地打开`prettyPhoto[gallery1]`页面上的向下。我必须将所有图像和标题作为数组传递，在我的情况下，这将是重复我自己。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T23:48:13.143

您的选择器适用于此属性：

```
data-rel="prettyPhoto[gallery1]" 
```

如果您不打算将第一张图片添加到图库中，请`data-rel`从该图片中删除该属性，它将起作用。

就个人而言，我会为此使用标准标签/ID/类。在您的 JS 中，您也可以使用它：

```
$("#allpictures a").prettyPhoto(); 
```

这将选择作为`allpictures`元素后代的所有链接。

附录：如果您想使用您的个人资料图片打开画廊，那么我建议您将上述内容用于画廊项目，但对个人资料有一个特殊的点击处理程序。为每个图像设置一个`id`，以便个人资料图片可用于确定图库副本。例如，您可以使用`profile_123`and `gallery_123`。

这将允许您在配置文件图像上添加一个单击处理程序，派生`id`图库副本，并在该元素上引发单击事件。

# c# - System.DllNotFoundException：无法加载 DLL。开发机器没有错误，但目标机器有错误

> ID：14587775
> 
> 赞同：8
> 
> 时间：2013-01-29T16:41:30.850
> 
> 标签：c#, windows, dll

我在 Visual Studio 2012 上使用 WPF 构建了一个 C# 应用程序，该应用程序使用 C++ DLL 并以 .NET4.5 为目标。我有两个项目正在运行，一个用于 C# 项目，另一个用于 C++ DLL 项目。我将这两个项目发布到一个文件夹中，该文件夹在同一文件夹中包含一个`.exe`用于 C# 和一个`.dll`用于 C++ 的文件夹。

我在开发它们的机器上运行它们，一切正常。我`.exe`在其他机器上运行它，它抛出了这个异常：

> System.DllNotFoundException：无法加载 DLL

它无法识别同一文件夹中的 DLL。

我尝试了很多东西，但似乎没有任何效果。我遵循了[这篇文章](https://stackoverflow.com/questions/2093485/system-dllnotfoundexception-unable-to-load-dll-on-window-2003)中的解决方案，但没有任何效果。

Dev 和 Target 机器是相同的。在 Dev 中，安装了 Visual Studio 2012，但这是唯一的区别。

## 代码：

### C＃：

```
[DllImport(@"Wireless.dll", EntryPoint = "?cert_exists@certificate@CertFuncs@@SAHHPBD@Z", CallingConvention = CallingConvention.Cdecl)]
    static extern int cert_exists(int store, [MarshalAs(UnmanagedType.LPTStr)]string cert_str); 
```

### C++：

```
static int __declspec(dllexport) cert_exists(int type, LPCSTR cert_str); 
```

* * *

## 更新：

如果我在目标机器上安装 Visual Studio 2012，一切正常。如果我删除它，应用程序会再次崩溃。关于 VS 添加什么可以使应用程序工作的任何想法？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-01-29T17:06:17.980

只是一个猜测：在用户的机器上安装 Microsoft Visual C++ 2012 Redistributable Package。您使用的本机 DLL 可能有其他必须安装的依赖项（尝试[Dependency Walker](http://www.dependencywalker.com/)）。如果本机 DLL 需要例如注册表设置、配置文件等，这些也应该存在。它应该以与您在开发机器上安装它的方式相同的方式分发给用户机器。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2017-01-06T09:34:07.620

这是由于您的项目构建配置是“调试”（右键单击解决方案''-> 属性-> '配置属性-> 您应该看到所有项目配置设置为'调试'）。它需要在您运行 exe 的任何地方安装 Visual Studio（在“调试”模式下构建）。

为了避免这种情况，请将配置更改为“发布”并重建您的项目。

# matrix-multiplication - 优化矩阵乘法

> ID：14587777
> 
> 赞同：0
> 
> 时间：2013-01-29T16:41:34.540
> 
> 标签：matrix-multiplication

鉴于：

*   向量 v1, v2 (nx1)，其中每个向量中的条目在区间 [0,1] 中。v1 和 v2 可以是稀疏的或密集的

*   密集对称矩阵 M (nxn)（实际上是一个逻辑矩阵，其中条目为 0 或 1）

*   密集矩阵 E (nxn) 其中 E(i,j) = 1-E(j,i) 其中 E(i,j) 在区间 ]0,1[ 中。这种类型的矩阵是否有名称，其中 E(i,j) = 1-E(j,i)？

我想计算 s = Sum[(v1 * v2^T) .* M] 其中 .* 是元素乘法运算， Sum 是结果矩阵的所有条目的总和。^T 是转置操作。

给定 s 我想获得 x = Sum[(v1 * v2^T) .* E] / s

是否有任何计算上更有效的方法来执行这些乘法并获得 x？

谢谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:12:21.170

Your `.* M` multiplication is just a selection, so it could be easier to just add up the selected elements like this (in pseudocode, as you give no indication of the language):

```
sum = 0;
for i=1 to n
    for j = i to n
        if M(i,j) then
           sum += v1(i)*v2(j)+v1(j)*v2(i);
        endif
    endfor
 endfor 
```

Instead of doing all 2*n^2 multiplications and n^2 additions you would only perform 2*k additions and k multiplications (where k is the number of nonzero entries of M, which is at most n^2).

For the second operation I see no way to accelerate them, so you have to compute them explicit.

# unicode - 是什么导致 Tuckey 的 UrlRewriteFilter 格式错误的 urlencoded unicode 字符（例如 ö 的 %C3%B6），我该如何避免它？

> ID：14587782
> 
> 赞同：1
> 
> 时间：2013-01-29T16:41:58.260
> 
> 标签：unicode, url-rewriting, special-characters, urlencode, tuckey-urlrewrite-filter

我们正在使用一个简单的 UrlRewriteFilter 规则来永久 (301) 将**不带斜杠的 HTTP 请求重定向到****带有**斜杠的相同 URL 。

在某些情况下，我们的表示层需要带有编码特殊字符的 URL（例如 ö 的 %C3%B6），只要不涉及 UrlRewriteFilter 就可以正常工作。但是当规则生效时，我可以看到编码字符在重定向时格式错误，例如

`www.mydomain.com/asdf%C3%B6asdf/`--> 301 -->`www.mydomain.com/asdf%F6asdf/`

`%F6`不是有效的 unicode 序列（在 urldecode 时以黑色菱形结尾作为问号）。

我们在整个应用程序中使用 UTF-8，它设置在响应标头以及 HTML`<head>`部分中。格式错误的编码发生在 Windows 和 Linux 机器上。重写规则如下所示

```
<rule enabled="true" match-type="regex" >
    <name>Force trailing slash</name>
    <note>...</note>
    <condition type="request-uri" operator="notequal">...>/condition> <!-- some URLs shall not be redirected -->
    <from>(^[^\?]*)(\?.*)?$</from>
    <to type="permanent-redirect" last="true" >$1/$2</to> <!-- adding trailing slash and query string, if present -->
</rule> 
```

我很高兴有任何想法可以解决这个问题。我玩过`decode-using`and`encode`属性，但没有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2017-01-08T10:04:29.413

我有一个类似的问题。我所做的是将 decode 设置为 null ：

```
<urlrewrite decode-using="null"> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T11:40:23.667

我在下面描述的问题似乎与此[错误报告](http://code.google.com/p/urlrewritefilter/issues/detail?id=80)有关，该报告已于 2010 年提交，此后一直未触及。我可能不得不通过使用Java“手动”处理请求来解决这个问题。不过，仍然欢迎其他想法。

# jquery - 从多个表中添加/删除表行并插入到一个表行中

> ID：14587784
> 
> 赞同：0
> 
> 时间：2013-01-29T16:42:05.717
> 
> 标签：jquery, html-table

我在一个普通的 html 页面中有 4 个表。其中三个表包含需要插入到第四个表中的数据。我还需要选择删除第 4 个表中的这些行并将数据放回正确的表中。我有一个例子。从 Table1 中移动一行并将其插入 Table2，然后从 Table2 中删除该行并重新插入 Table1。每个操作都有添加和删除按钮。请参阅下面的 jQuery：

```
$(document).ready(function() {
// Setup the "Move Me" links
$(".rowLink").click(function () {
    // get the row containing this link 
    var row = $(this).closest("tr");

    // find out in which table it resides
    var table = $(this).closest("table");

    // move it
    row.detach();

    if (table.is("#table1")) {
        $("#table2").append(row);
    }

        else {
        $("#table1").append(row);

    }   

});

 });

 $(document).ready(function() {
    $('table a').click(function(e) {
        e.preventDefault();
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:41:17.530

有了像 simon 这样的假设，我想出了这个解决方案......只是表的 id 和其中的行的类具有相同的名称，这应该可以解决它

```
 $(document).ready(function () {
        $(".rowlink").click(function () {
            var row = $(this).closest("tr");
            var table = $(this).closest("table");

            var IDofthetable = table.attr('id');
            var ClassoftheRow = row.attr("class");

            row.detach();

            if (ClassoftheRow==IDofthetable) {  // if it is in the parent table
                $("#tab4").append(row);  //move to table 4
            }
            else {
                $("#"+ClassoftheRow).append(row); //move to parent table
            }
        });
    });

 <table>
        <tr>
            <td>
                <table id="Table1">
                    <tr class="Table1">
                        <td>
                            <input type="submit" value="Move Me 1" name="button" id="buttonTab1_1" class="rowlink" />
                        </td>
                    </tr>
                    <tr class="Table1">
                        <td>
                            <input type="submit" value="Move Me 1" name="button" id="buttonTab1_2" class="rowlink" />
                        </td>
                    </tr>
                    <tr class="Table1">
                        <td>
                            <input type="submit" value="Move Me 1" name="button" id="buttonTab1_3" class="rowlink" />
                        </td>
                    </tr>
                </table>
            </td>
            <td>
                <table id="Table2">
                    <tr class="Table2">
                        <td>
                            <input type="submit" value="Move Me 2" name="button" id="buttonTab2_1" class="rowlink" />
                        </td>
                    </tr>
                    <tr class="Table2">
                        <td>
                            <input type="submit" value="Move Me 2" name="button" id="buttonTab2_2" class="rowlink" />
                        </td>
                    </tr>
                    <tr class="Table2">
                        <td>
                            <input type="submit" value="Move Me 2" name="button" id="buttonTab2_3" class="rowlink" />
                        </td>
                    </tr>
                </table>
            </td>
            <td>
                <table id="Table3">
                    <tr class="Table3">
                        <td>
                            <input type="submit" value="Move Me 3" name="button" id="buttonTab3_1" class="rowlink" />
                        </td>
                    </tr>
                    <tr class="Table3">
                        <td>
                            <input type="submit" value="Move Me 3" name="button" id="buttonTab3_2" class="rowlink" />
                        </td>
                    </tr>
                    <tr class="Table3">
                        <td>
                            <input type="submit" value="Move Me 3" name="button" id="buttonTab3_3" class="rowlink" />
                        </td>
                    </tr>
                </table>
            </td>
        </tr>
        <tr>
            <td>
                <table id="tab4">
                </table>
            </td>
        </tr>
    </table 
```

>

# php - 在 PHP 中解码 json 时遇到问题

> ID：14587786
> 
> 赞同：0
> 
> 时间：2013-01-29T16:42:17.963
> 
> 标签：php, jquery, ajax, json

我正在尝试将一个 3 位整数数组插入 MySQL 数据库（例如“301”、“302”等）。该数组使用 jQuery、Ajax 和 JSON 传递到 PHP 脚本中。这个位（通过'console.log'函数判断）似乎工作正常。当我尝试解码 JSON 字符串时，问题出现在另一端。

我希望数组中的每个单独的项目进入一个单独的列，但目前插入该列的所有内容都是数字“0”。

代码如下：

jQuery：

```
var modules

$('#createbutton').click(function(){
 $('#l3 :checkbox:checked').each(function(i){
  var l3modules = $(this).attr('value');
  modules.push(l3modules);
  });

var modulestransmit = JSON.stringify(modules);
console.log(modulestransmit);

$.ajax({
       url: "newaccount.php",
       type: "POST",
       data: { modules: modulestransmit },
     });
 }); 
```

PHP：

```
 $modules = $_REQUEST['modulestransmit']);
 $insertmodules = json_decode($modules, true);

 if(mysql_query("INSERT INTO level3 (mod1, mod2) VALUES ('$insertmodules[0]', '$insertmodules[1]')")) {
  echo "Successfully inserted";
 }
 else {
  echo "Insertion Failed";
 } 
```

数据库中的结果是：

模式1：0

模组2：0

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:46:06.893

您在请求中使用模块作为参数的名称而不是模块传输，因此将 PHP 的第一行更改为

```
 $modules = $_REQUEST['modules']; 
```

并且您还需要在字符串中的变量名周围加上花括号（在 PHP 中用双引号引用数组时非常重要）。

```
"INSERT INTO level3 (mod1, mod2) VALUES ('{$insertmodules[0]}', '{$insertmodules[1]}')" 
```

那应该这样做。

# php - 身份验证新手

> ID：14587787
> 
> 赞同：0
> 
> 时间：2013-01-29T16:42:25.420
> 
> 标签：php, codeigniter, authentication, ion-auth

我是编程新手，我正在为 Code Igniter 中的一个项目制作登录/通过身份验证系统。我可以通过设置会话来简单地保护页面，然后根据会话是否设置来授予访问权限......在我进入它之前......我看到周围有很多 auth 库......比如 tank auth、ion auth 等等。

我的问题是，为什么有人会使用 Auth 库？如果我的应用程序很简单，这意味着只有一种具有相同权限的用户，我还需要像 Ion Auth 这样的 Auth lib 吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:42:13.317

现有的 Auth 库通常由用户测试，它们的错误和安全漏洞通常会得到纠正，并且代码得到维护。

它的一个自己的实现，不管它的简单性，总是对你所知道的以及你可以做些什么来处理安全性的测试。

有很好的 CI Auth 库，但是如果您要自己使用，请确保尽可能安全，假设每个用户输入都是恶意的......另外，继续看看[这篇](http://net.tutsplus.com/tutorials/php/easy-authentication-with-codeigniter/)文章

# ios - 为ios构建时如何设置标志-ObjC -all_load

> ID：14587796
> 
> 赞同：4
> 
> 时间：2013-01-29T16:42:49.023
> 
> 标签：ios, air, adobe, build-settings

我想像在xcode中设置的那样设置标志“-ObjC -all_load”（在build-settings->其他链接器标志下）

为了让 iOS 应用程序能够与 applicasa iOS 框架一起工作。但是我在 xcode 项目中所做的一切似乎都被空中忽略了

那么如何在空中设置那面旗帜呢？

（注意：它不是 info.plist 配置，它的构建设置配置）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-09-15T10:14:24.353

试试这两个：

1）在xcode中选择您的扩展名.a目标时，转到`other linker flags`并添加-ObjC然后导出您的.a

2）在您的 iOS-Platform.xml 文件中，`linkerOptions`添加

```
<option>-ObjC</option> 
```

# regex - 正则表达式和 POST 在同一连接中

> ID：14587798
> 
> 赞同：3
> 
> 时间：2013-01-29T16:42:50.833
> 
> 标签：regex, login, python-2.7, urllib2

请多多包涵，我是 Python 新手！

我正在尝试登录使用 PHP 的网站。该表单包含两个隐藏字段，一个的值和另一个的名称是在页面加载时生成的。

我下面的代码成功地访问了页面并使用正则表达式设法返回值 - 太棒了！

我遇到的问题是，然后我生成将用于 POST 的查询字符串（这包含之前获得的两个值）并再次打开 url。这会生成全新的令牌/值，而我的原件没有用。

有人可以阐明我如何连接到站点，使用正则表达式获取值，然后在同一个连接中发布所有内容。

我希望我已经说清楚了，如果没有，请告诉我。

在此先感谢您的帮助。

```
import urllib2,urllib,re,cookielib

url='http://www.example.com/index.php'

req = urllib2.Request(url)
req.add_header('User-Agent', 'Mozilla/5.0 (Windows; U; Windows NT 5.1; en-GB; rv:1.9.0.3 Gecko/2008092417 Firefox/3.0.3')
response = urllib2.urlopen(req)
link=response.read()
response.close()
token1=re.compile('<input type="hidden" name="return" value="(.+?)" />').findall(link)
token2=re.compile('<input type="hidden" name="(.+?)" value="1" />').findall(link)
print token1[0]
print token2[0]

username = 'username'
password = 'password'

cj = cookielib.CookieJar()
opener = urllib2.build_opener(urllib2.HTTPCookieProcessor(cj))
login_data = urllib.urlencode({'username' : username, 'password' : password, 'return' : token1[0], token2[0] : '1', 'Submit' : 'Log in', 'option' : 'com_users', 'task' : 'user.login'})
opener.open('http://www.example.com/index.php', login_data)
resp = opener.open('http://www.example.com/index.php') 
```

形式：

```
<form action="/index.php/welcome2" method="post" id="login-form" >
     <fieldset class="userdata">
          <p id="form-login-username">
               <label for="modlgn-username">User Name</label>
               <input id="modlgn-username" type="text" name="username" class="inputbox"  size="18" />
          </p>
          <p id="form-login-password">
               <label for="modlgn-passwd">Password</label>
               <input id="modlgn-passwd" type="password" name="password" class="inputbox" size="18"  />
          </p>
          <p id="form-login-remember">
               <label for="modlgn-remember">Remember Me</label>
               <input id="modlgn-remember" type="checkbox" name="remember" class="inputbox" value="yes"/>
         </p>
         <input type="submit" name="Submit" class="button" value="Log in" />
         <input type="hidden" name="option" value="com_users" />
         <input type="hidden" name="task" value="user.login" />
         <input type="hidden" name="return" value="aW5kZXgucGhwP0l0ZW1pZD0xMjc=" />
         <input type="hidden" name="c813c34837e4e48e8e3268c0a42912a2" value="1" />
    </fieldset>
<ul>
<li>
<a href="/index.php/my-account/my-details?view=reset">
Forgot your password?</a>
</li>
<li>
<a href="/index.php/my-account/my-details?view=remind">
Forgot your username?</a>
</li>
<li>
<a href="/index.php/register">
Create an account</a>
</li>
</ul>
</form> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:33:51.523

当你写...

```
opener.open('http://www.example.com/index.php', login_data)
resp = opener.open('http://www.example.com/index.php') 
```

为什么不只是这个？

```
resp = opener.open('http://www.example.com/index.php', login_data) 
```

我从未使用过这个 Python 库，但我的第一反应是，这会在一个请求中为您提供所有响应文本，您可以使用它获取新令牌，不是吗？

**基于表单更新：**看起来您的问题是您将登录信息发布到`index.php`而不是`index.php/welcome`.

# jquery - 如何检测您何时位于可滚动div的底部？

> ID：14587799
> 
> 赞同：0
> 
> 时间：2013-01-29T16:42:56.387
> 
> 标签：jquery, scroll

当我位于可滚动 div 的底部时，我无法检测到。我有一个绝对定位的 div，该 div 设置为 100% 高度并且是可滚动的。该 div 包含许多文章，一个在另一个之下。

我的目标是检测 div 何时滚动到底部。我正在使用以下代码进行测试，但 scroll.height 的值没有加起来，因为它给了我浏览器窗口的高度而不是可滚动内容的高度。

```
$('#scroll_length').text($('.scroll').scrollTop() + ' -- ' + $('.scroll').innerHeight()); 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:59:05.130

不久前我回答了一个类似的问题，我相信它仍然相关：[使用 jQuery，我如何强制访问者滚动到文本区域的底部以启用提交按钮？](https://stackoverflow.com/questions/5986389/using-jquery-how-do-i-force-a-visitor-to-scroll-to-the-bottom-of-a-textarea-to/5986499#5986499)

```
$('#terms').scroll(function () {
    if ($(this).scrollTop() == $(this)[0].scrollHeight - $(this).height()) {
        $('#register').removeAttr('disabled');
    }
}); 
```

只需给条款一个 id，然后在 html 中将注册按钮设置为禁用。我还做了一个小小提琴来展示它的工作原理：http: [//jsfiddle.net/ETLZ8/](http://jsfiddle.net/ETLZ8/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:04:27.513

除了@Christian Varga 回答...

我知道我没有用代码回答，但我认为提供一个插件来帮助实现你的目标将是对问题的一个很好的补充。

有时问题会成为知识库....

你可能会发现这个插件很有用

[jQuery 航点](http://imakewebthings.com/jquery-waypoints/#about)

# c# - 获取委托的具体返回类型

> ID：14587806
> 
> 赞同：1
> 
> 时间：2013-01-29T16:43:16.060
> 
> 标签：c#, .net-3.5, delegates

如何找到签名为的类型的具体类型`IEnumerable<Func<ITab>>`？

我的构造函数采用上述类型以执行延迟加载。本质上，只在需要时加载选项卡以减少启动时间。但是，每个具体`Tab`实现都由表示选项卡名称的属性修饰。当我遍历我的列表时，我想获取代表的具体类型以获取属性值。

我知道`.GetType().GetMethod("Invoke").ReturnType`，但这又回来了`ITab`。我似乎只能通过调用来找到具体类型`Invoke()`。

在访问与每种具体类型相关的信息时，是否有更好的方法来使用委托实现延迟加载？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:49:27.070

为什么在实际调用返回它的方法之前需要知道 Tab 的类型？当它返回时，您可以使用`GetType()`然后找到属性。如果您的一个函数可以返回不同的实现`ITab`怎么办？尤其是如果从数据库或 xml 等外部资源中挑选合适的资源。需要调用该委托。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:07:42.833

通常，您似乎结合/混淆了两个问题：一个是*关于*您的选项卡的（元）数据，另一个是选项*卡加载*时间的速度优化。*如果您现在*需要元数据，但*稍后*需要选项卡内容，则需要拆分它们。

即不返回`IEnumerable<Func<ITab>>`，返回类似的内容`IEnumerable<ITabInfo>`，其中`ITabInfo`包含 1）您需要立即获得的选项卡信息，以及 2）稍后将调用的委托以加载选项卡的实际内容。

您无法获得“方法*将在未来调用中返回*的类型”。那将相当于一个水晶球（想象一下`return random.Next(2) == 0 ? (ITab)new TabTypeA() : (ITab)new TabTypeB();`）。

# javascript - getAttribute() 错误

> ID：14587811
> 
> 赞同：0
> 
> 时间：2013-01-29T16:43:22.843
> 
> 标签：javascript

我在 Firefox 中收到关于 getAttribute 不是函数的错误。下面是我的代码，标有错误行。

```
 var nodeList = document.getElementsByTagName("input");
    for(item in nodeList){
        try{
        if(nodeList[item].getAttribute("type") == "file"){
            //ERROR HERE///->var id = nodeList[item].getAttribute("id");
            var fileSelector = document.getElementById(id);
            document.getElementById(id).addEventListener("change",function(e){
                if(e){
                    e.preventDefault();
                }

                if (fileSelector.files) {
                    window.file = fileSelector.files[0];
                } else {
                    window.file = fileSelector.value;
                }
                readData();
            });
        }
        }catch(e){}
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:45:28.423

试试这样：

```
 var nodeList = document.getElementsByTagName("input");
 var max = nodeList.length;
    for(var i=0; i<max ; i++){
        try{
        if(nodeList[i].getAttribute("type") == "file"){
            //ERROR HERE///->var id = nodeList[item].getAttribute("id");
            var fileSelector = document.getElementById(id);
            document.getElementById(id).addEventListener("change",function(e){
                if(e){
                    e.preventDefault();
                }

                if (fileSelector.files) {
                    window.file = fileSelector.files[0];
                } else {
                    window.file = fileSelector.value;
                }
                readData();
            });
        }
        }catch(e){}
    } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T16:45:28.943

可能`nodeList[item]`不是节点。使用`for`循环而不是`for..in`：

```
var i, len = nodeList.length;
for(i=0; i<len; i += 1){
    try {
        if(nodeList[i].getAttribute("type") == "file"){
            // ... 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:52:06.070

有关解释，请参见[JSFiddle](http://jsfiddle.net/KuhYX/)

```
for (item in nodeList) 
```

给出`0`,`1`和`2`作为数组索引，这没关系。

但是它提供了更多的属性和`length`，它们不是 DOM 元素并且没有功能。`item``namedItem``getAttribute()`

因此，正如其他人已经建议的那样，使用普通的 for 循环。

# mongodb - 停电后的微云铸造问题

> ID：14587813
> 
> 赞同：1
> 
> 时间：2013-01-29T16:43:29.037
> 
> 标签：mongodb, cloud-foundry

所以我昨晚忘记重新插上我的笔记本电脑，我的笔记本电脑断电，导致我的微型实例没有很好的关机。现在，当我启动微实例时，控制台中的一切看起来都正常，但我无法连接到 monogodb 实例。我认为这可能是因为 mongod.lock 文件被闲置了，所以我去找它并从这里删除它：

```
/var/vcap/store/mongodb/a925311a-2145-4a50-b103-e243da010e7c/data/mongod.lock 
```

然后我不知道如何重新启动服务（有人知道吗？？），所以我只是重新启动了虚拟机。我仍然无法连接。在我移除锁并尝试隧道之前，我会收到此错误：

```
vmc tunnel mongo-xxx
1: none
2: mongorestore
3: mongo
4: mongodump
Which client would you like to start?> 3

Opening tunnel on port 10000... OK
Waiting for local tunnel to become available... OK
MongoDB shell version: 2.2.2
connecting to: localhost:10000/db
Tue Jan 29 09:11:49 DBClientCursor::init call() failed
Tue Jan 29 09:11:49 Error: Error during mongo startup. :: caused by :: 10276 DBClientBase::findN: transport error: localhost:10000 ns: admin.$cmd query: { whatsmyuri: 1 } src/mongo/shell/mongo.js:93
exception: connect failed
'mongo' execution failed; is it in your $PATH? 
```

现在重新启动后，我收到此错误：

```
vmc tunnel mongo-xxx
1: none
2: mongorestore
3: mongo
4: mongodump
Which client would you like to start?> 3

Opening tunnel on port 10000... FAILED
CFoundry::ServiceGatewayError: 503: Unexpected response from service gateway
For more information, see ~/.vmc/crash 
```

关闭错误后修复微实例的正确步骤是什么？

谢谢

编辑：我在 mongodb 日志中发现了另一个错误：

```
Tue Jan 29 16:28:43 [initandlisten] options: { auth: "true", bind_ip: "0.0.0.0", config: "/var/vcap/store/mongodb/a925311a-2145-4a50-b103-e243da010e7c/mongodb.conf", dbpath: "/var/vcap/store/mongodb/a925311a-2145-4a50-b103-e243da010e7c/data", logpath: "/var/vcap/sys/service-log/mongodb/a925311a-2145-4a50-b103-e243da010e7c/mongodb.log", maxConns: 500, nohttpinterface: "true", nojournal: true, noprealloc: "true", port: 25001, quota: "true", quotaFiles: 4, smallfiles: "true" }
**************
Error: journal files are present in journal directory, yet starting without --journal enabled.
It is recommended that you start with journaling enabled so that recovery may occur.
************** 
```

但是查看 monogodb.conf 文件说：

```
# journaling is currently preallocating 4G of space on disk
# we can't do that.
#
#journal    = true 
```

所以我不确定这会奏效。我开始认为我只需要删除服务并重新创建它，但这似乎是一个糟糕的解决方案......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:38:24.960

我现在开始工作了。我相信这是一个组合：

1）在以下位置删除 mongod.lock 文件：`/var/vcap/store/mongodb/a925311a-2145-4a50-b103-e243da010e7c/data/mongod.lock`

2）编辑 /var/vcap/jobs/mongodb_node/config/mongodb_node.yml 并将 mongo_options 更改为：

```
mongod_options:
  "1.8": ""
  "2.0": "--nojournal" 
```

到

```
mongod_options:
  "1.8": ""
  "2.0": "--journal" 
```

我还发现，如果我终止了该`mongodb_node`进程，它会重新启动它自己，然后 mongod 开始运行。

# php - 如何使用 php 正则表达式捕获 XML Dom

> ID：14587816
> 
> 赞同：0
> 
> 时间：2013-01-29T16:43:48.617
> 
> 标签：php, regex, xml, parsing, atom-feed

我在本地获得了一些 XML Atom 文件。`<author>...</author>`在所有这些文件中，我想在 PHP 字符串变量中捕获一些应答器。

所以我这样做了：

```
function parseAtomByBalise($xml,$balise) {
    $arrayStr=array();
    preg_match('#<'.$balise.'>(.*)</'.$balise.'>#',$xml,$arrayStr);

    return $arrayStr;
}
 $fxml=fopen($xml,'r');
    $strXML=fgets($fxml);
    echo '<p>author: <textarea>';
    $authors=parseAtomByBalise($strXML,'author');
    foreach($authors as $author) {
        if($author!=$strXML)
            echo $author.'\n';
    }
    echo '</textarea></p>';
} 
```

文件正在打开，strXML 是好的字符串。我有一些 preg_match 的奇怪行为，这让我觉得这不是好的功能......我得到的应答器比应答器内部的要多`<author></author>`

我应该怎么做 ？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:49:47.523

1.  不要试图重新发明轮子。
2.  `Regex`不适合解析 XML（只是一个[例子](http://www.codinghorror.com/blog/2009/11/parsing-html-the-cthulhu-way.html)，不是绝对的证明，但是......）
3.  使用[简单的 XML](http://php.net/manual/en/book.simplexml.php)`PHP`等内置工具

# java - 将测试用例和结果导入 Rally 时如何避免 504 错误？

> ID：14587818
> 
> 赞同：1
> 
> 时间：2013-01-29T16:43:53.960
> 
> 标签：java, api, rally, timeoutexception

当我将测试用例和结果导入集会时，有时会出现 504 错误。我不希望这种情况发生，因为我创建的 Java 应用程序需要成为自动化流程的一部分。关于如何避免 504 错误有什么建议吗？或者有没有一种方法可以让应用程序在抛出此异常之前至少尝试 3-4 次。我只能想到一个 try/catch 块......

对我来说最糟糕的情况是应用程序将结果添加到测试集，并引发 504 异常。所以我现在有一个测试集，其中包含不完整的结果列表。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T22:28:31.890

我建议打开一个带有[Rally Support](https://rally1.rallydev.com/slm/help.sp?pp=contact)的案例。网关超时可能不是您的集成代码的问题。支持人员拥有可用于查看服务器端对您提出的请求的响应并帮助识别任何瓶颈的工具。这可能是最好通过该渠道处理的对话。

# external - 与 iOS 外部附件的串行通信（无身份验证协处理器）

> ID：14587826
> 
> 赞同：1
> 
> 时间：2013-01-29T16:44:05.897
> 
> 标签：external, serial-communication, mfi, accessory

这是我关于stackoverflow的第一个问题。我们正在 MFi 计划下开发 iOS 外部配件。（使用闪电连接器的串行通信） 但是，我们有一些问题。

背景

1.  我们已经完成了设备设计和非工作模型
2.  作为一家初创公司，MFi 认证被推迟了（终于我们拿到了）
3.  所以，我们在MFi认证之前设计/开发了没有苹果认证协处理器的PCB板。（当然，我们会用经过认证的IC重新设计）
4.  我们有针对潜在客户的目标演示日。我们没有足够的时间用经过认证的 IC 重新设计。

在这种情况下，我们期待其他方式

1.  无论如何，没有经过认证的 IC / 认证过程，我们完成了 iOS 外部配件。
2.  越狱 iphone 4/4S 用于与工作模型进行串行通信（我发现我们无法越狱 iphone5，所以将闪电连接器转换为 30pin）

我需要一些建议，即上述替代方法是否正确且可行。我需要你的帮助 ：）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-03-12T21:48:06.680

在 iOS 与外部配件的通信方式上，30 针和闪电连接器之间存在相当多的差异。如果您已经开发了固件，切换到 30 针可能会带来问题。几周前发布了针对 iPhone 5 的越狱，但我不知道有任何工具可以让您伪造 iOS 的外部附件框架，使您的附件包含身份验证处理器。

理想的解决方案是重新设计您的 PCB 以包括身份验证处理器。无论如何，你都必须这样做，而且它可能不会像在越狱手机上尝试破解 iOS 一样长。

# javascript - 如何在 javascript 或 jquery 中转换图像字符串？

> ID：14587827
> 
> 赞同：0
> 
> 时间：2013-01-29T16:44:07.267
> 
> 标签：javascript, jquery, image, gzip, compression

我有这个“小”问题......

在我的 Web 应用程序中，我从服务器接收到一条使用 jquery 解析的 xml 消息。在 xml 中有一个`<Image>`具有这些属性的元素：**key**和**value**。value 属性是一个字符串，表示使用`gzip`算法（使用`System.IO.Compression`C# 中的类）压缩的图像文件 (.png)。有没有办法解压javascript中的**值**，然后得到对应的解压字符串？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:49:00.480

这看起来像是已经回答的问题的组合。您需要解压缩字符串，然后从字符串转换为图像。在处理此类问题时，最好将其分解成最小的块。这样，如果您找不到确切的问题，您的搜索将产生更适用的结果。

[Gzip 的 JavaScript 实现](https://stackoverflow.com/questions/294297/javascript-implementation-of-gzip)

[Javascript十六进制字符串到图像](https://stackoverflow.com/questions/3010408/javascript-hex-string-to-image)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T16:51:25.933

只是简单的例子

```
<img alt="Embedded Image" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIA..." /> 
```

哪里 iVBORw0KGgoAAAANSUhEUgAAADIA... - 是你的价值..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-01-29T16:49:43.197

我假设图像是 base64 编码的。在这种情况下，您需要`src`使用带有前缀的图像数据来设置图像的属性`data:image/png;base64,`

[嵌入 Base64 图像](https://stackoverflow.com/questions/1207190/embedding-base64-images)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-01-30T09:17:47.550

服务器以 gzip 压缩格式向我发送图像字符串。我尝试了标签，但浏览器似乎没有解压缩图像字符串。图像转换为 base64 格式。现在我再试一次。有没有办法检查字符串是否以正确的方式压缩？

# php - 带有“now() + INTERVAL”的 INSERT 语句在 PDO 中插入 000，并带有命名占位符

> ID：14587834
> 
> 赞同：1
> 
> 时间：2013-01-29T16:44:25.947
> 
> 标签：php, mysql, datetime, insert, pdo

我无法将此`now() + INTERVAL`INSERT 语句转换为带有命名占位符的 PDO 准备语句。

当我使用`'now() + INTERVAL 3 DAY'`or绑定值时`'DATE_ADD(now(), INTERVAL 3 DAY)'`，它会插入 000 而不是正确的日期时间*(0000-00-00 00:00:00)*

*这是我以前使用的：*

```
$qry = "INSERT INTO password_reset(user_id, temp_password, expiry_date) 
VALUES('$member_user_id','$temp_password', now() + INTERVAL 3 DAY)"; 
```

*新的 PDO 声明：*

```
$stmt = $conn->prepare('INSERT INTO password_reset (user_id, temp_password, expiry_date) 
VALUES(:user_id, :temp_password, :expiry_date)');          
$stmt->bindValue(':user_id', $member_user_id); 
$stmt->bindValue(':temp_password', $random_password); 
$stmt->bindValue(':expiry_date', 'now() + INTERVAL 3 DAY');  
$insertResult = $stmt->execute(); 
```

*我也试过这个：*

```
$stmt->bindValue(':expiry_date', 'DATE_ADD(now(), INTERVAL 3 DAY)'); 
```

*几个 SO 帖子中提出的替代方法*

一些 SO 帖子*（包括此[链接](https://stackoverflow.com/a/1576435/1056713)）*建议将 now() 语句放在 VALUES 中而不是绑定它，但这会导致错误消息*“无效的参数号：绑定变量的数量与标记的数量不匹配”*

```
$stmt = $conn->prepare('INSERT INTO password_reset (user_id, temp_password, expiry_date) 
VALUES(:user_id, :temp_password, :now() + INTERVAL 3 DAY)');
$stmt->bindValue(':user_id', $member_user_id); 
$stmt->bindValue(':temp_password', $random_password); 
$insertResult = $stmt->execute(); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:49:39.143

你前面有一个冒号，`:now()`
就是这样。只是一个错字。

您的第二条错误消息清楚地表明您实际上并没有删除冒号，而是删除了其他内容 - 很可能是引号。你需要更加注意写作。并更加注意错误消息，它们非常有用。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T16:51:47.773

从 中删除冒号`:now() + INTERVAL 3 DAY`。

```
$stmt = $conn->prepare('INSERT INTO password_reset (user_id, temp_password, expiry_date) 
VALUES(:user_id, :temp_password, now() + INTERVAL 3 DAY)');
$stmt->bindValue(':user_id', $member_user_id); 
$stmt->bindValue(':temp_password', $random_password); 
$insertResult = $stmt->execute(); 
```

或者，您可以这样做：

```
$stmt = $conn->prepare('
    INSERT INTO
        password_reset (user_id, temp_password, expiry_date) 
    VALUES
        (:user_id, :temp_password, now() + INTERVAL 3 DAY)
');
$insertResult = $stmt->execute(array(
    ":user_id" => $member_user_id,
    ":temp_password" => $random_password)
); 
```

使用准备好的语句时，您应该**将语句视为**插入数据的模板。

如果您有一个具有以下结构的数据库表：

```
user_id           INT
temp_password     VARCHAR(128)
expiry_date       DATE 
```

您的表中有**三列**。**插入这些列的两个值将来自 PHP**，**另一个将由 SQL 求值**。由于 SQL 将在 expiry_date 列上完成所有工作，因此它不需要绑定到 PHP 中的任何内容。

因此，检查`INSERT`语句：

```
INSERT INTO password_reset (user_id, temp_password, expiry_date) VALUES (:user_id, :temp_password, now() + INTERVAL 3 DAY) 
```

子句的每个参数都`VALUES()`需要与子句中声明的列名匹配`INSERT INTO table (columns...)`。

在准备好的语句中，由于我们正在创建一个模板，我们使用它`placeholders`来显示我们将在语句执行时将值插入到语句的位置。占位符可以是`:name`您使用过的版本，也可以只是一个问号`?`。

`PDO::prepare($statement)`告诉 SQL 服务器准备语句。此时，SQL 拥有您的查询模板，并准备好接收该查询中占位符的值。

`PDOStatement::execute($placeholderValues)`执行该准备好的语句的单个实例，用您绑定的值替换占位符`bindParam`,`bindValue`或作为参数传递给`execute()`.

因此，基本上，发送到每个 SQL 服务器的所有内容`execute()`都是插入占位符的值，而不是整个查询字符串。

现在是解释为什么你不能这样做的部分`bindValue(":expiry_date", "now() + INTERVAL 3 DAY")`。

**当值到达 SQL 服务器时，SQL 服务器会清理它们并用它们的值替换相应的占位符。**

当您绑定时`"now() + INTERVAL 3 DAY"`，您实际上是在绑定一个字符串。由于它是一个字符串，它不会作为 SQL 代码执行。

# c# - 下拉列表值到 Int 到数据库 - 捕获了无效的强制转换异常

> ID：14587835
> 
> 赞同：0
> 
> 时间：2013-01-29T16:44:25.857
> 
> 标签：c#, asp.net, sql-server

我有一个下拉列表。在按钮单击事件中，我获取所选值，将其转换为整数并将其保存到数据库中现有行中。我收到以下错误：

“捕获了无效的演员表异常。

SqlParameterCollection 只接受非空的 SqlParameter 类型对象，不接受 SqlCommand 对象。”

* * *

注意：当我使用断点进行调试时，似乎我正在尝试发送一个整数作为参数。在显示所选下拉值的变量内容的小弹出窗口中，我看不到值的引号。

注意：当我直接在 SQL Server 中执行存储过程时，我成功更新了表中的行。

这是页面源的下拉列表：

```
 <select name="ctl00$ContentPlaceHolder1$CustomerDetailsEdit1$ShippingRegionDropDownList" id="ctl00_ContentPlaceHolder1_CustomerDetailsEdit1_ShippingRegionDropDownList" style="width:200px;">
<option value="1">Please Select</option>
<option value="2">U.S. / Canada</option>
<option value="3">Europe</option>
<option selected="selected" value="4">Rest of World</option> 
```

这是获取值并将其转换为整数的按钮单击事件：（这可能是我第三次或第四次尝试转换。我猜转换过程中有问题。我尝试过解析和转换。）

```
 protected void Button2_Click(object sender, EventArgs e)
{
    // Get the current user's ID.
    string customerId = Membership.GetUser(HttpContext.Current.User.Identity.Name).ProviderUserKey.ToString();
    // Get the values from the text box controls        
    int shippingRegionId = Int32.Parse(ShippingRegionDropDownList.SelectedValue);

    try
    {
        // Execute the update command
        bool success = CustomerDetailsAccess.UpdateShippingRegionID(customerId, shippingRegionId);
        // Display status message
        statusLabel.Text = success ? "Shipping Region update successful." : "Try - Shipping Region update failed";
    }
    catch
    {
        // Display error
        statusLabel.Text = "Catch - Shipping Region update failed.";
    }
} 
```

*注意：我在 CATCH 上收到错误消息。

这是创建参数以发送到调用存储过程的其他现有代码的代码。（我不想包含其他代码以节省空间，因为它已经工作了很长时间。但是，如果有人想看到它，我很乐意粘贴它。）

```
 // Update customer details
public static bool UpdateShippingRegionID(string customerId, int shippingRegionId)
{
    // Get a configured DbCommand object
    DbCommand comm = GenericDataAccess.CreateCommand();

    // Set the stored prodcedure name
    comm.CommandText = "UpdateShippingRegionID";

    // Create a new parameter
    DbParameter param = comm.CreateParameter();
    param.ParameterName = "@CustomerID";
    param.Value = customerId;
    param.DbType = DbType.String;
    param.Size = 50;
    comm.Parameters.Add(param);

    // Create a new parameter
    param = comm.CreateParameter();
    param.ParameterName = "@ShippingRegionID";
    param.Value = shippingRegionId;
    param.DbType = DbType.Int32;
    comm.Parameters.Add(comm);

    // Result will represent the number of changed rows
    int result = -1;
    try
    {
        // Execute the stored procedure
        result = GenericDataAccess.ExecuteNonQuery(comm);
    }
    catch
    {
        // Any errors are logged in the GenericDataAccess. It is not done here.
    }
    // Result will be 1 in case of success
    return (result != -1);

} 
```

这是存储过程：

```
 CREATE PROCEDURE UpdateShippingRegionID
    (@CustomerID char(50),
    @ShippingRegionID int)
    AS
    UPDATE CustomerDetails
    SET 
    ShippingRegionID = @ShippingRegionID
    WHERE CustomerID = @CustomerID 
```

注意： ShippingRegionID 列是一个 INT。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T16:49:04.260

那是你的问题

```
comm.Parameters.Add(comm); 
```

# jquery - Disqus 的事件处理程序

> ID：14587838
> 
> 赞同：0
> 
> 时间：2013-01-29T16:44:36.370
> 
> 标签：jquery, disqus

我已经实现了 disqus 并且工作正常。我需要手动保留评论计数。我计划在disquss评论按钮上附加，但没有任何成功。我无法通过 DOM 访问它。

有没有其他方法可以实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-30T04:08:07.230

您可以使用内置回调：

```
function disqus_config() {
    this.callbacks.onNewComment = [function() { doSomething(); }];
} 
```

当然，只需替换`doSomething();`为您自己的脚本即可。

# c# - 在 LINQ-SQL 中进行此查询？

> ID：14587842
> 
> 赞同：0
> 
> 时间：2013-01-29T16:44:45.597
> 
> 标签：c#, asp.net, sql, linq

我有`Employees`,`Groups`和`EmployeeGroupFilters`.

An`Employee`具有`GroupID`与外键的关系。

An`EmployeeGroupFilter`有一个 Employee 和 Group ID。每个员工都可以过滤他们不想在日历中看到的组。

因此，如果`EmployeeGroupFilter`存在，则该员工将看不到该组。

我需要一个查询，它将返回一个`IEnumerable`Group，这将是对员工可见的组。

例如：从当前员工的组过滤器中没有组的组中选择所有组。

现在我可以像这样获得所有员工过滤器：

```
public static IEnumerable<EmployeGroupFilter> GetAllByEmployee(
int employeeID)
{
    KezberPMDBDataContext db = new KezberPMDBDataContext();

    return from p in db.EmployeGroupFilters
           where p.EmployeID == employeeID
           select p;
} 
```

我需要类似的东西：

```
public static IEnumerable<Group> GetAllVisibleEmployeeGroups(
int employeeID)
{
    KezberPMDBDataContext db = new KezberPMDBDataContext();

    return from p in db.Groups
           .......
           select p;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:49:20.267

```
return from p in db.Groups
where !p.EmployeGroupFilters.Any(fil=>fil.EmployeeId == employeeID)
           select p; 
```

# google-maps-api-3 - 如何将 Google Adsense 广告放在使用 Google Maps Api v3 创建的信息窗口中>

> ID：14587845
> 
> 赞同：0
> 
> 时间：2013-01-29T16:44:55.067
> 
> 标签：google-maps-api-3, adsense

我想将 Google Adsense 广告放入 InfoWindow，就像 Google 对他们的 Google Map Page 所做的那样。Google Maps Javascript API v3/Developers Guide/Libraries/Adsense Library 不包含此内容。它通常谈论将 Adsense 广告放在地图顶部 - 效果很好。我想比这更离散一点。这个库还谈到将广告放在单独的 div 中，但它似乎对我不起作用。有什么想法吗？这可以做到吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:51:53.713

这是一个[**旧的 V2 示例**](http://maps.forum.nu/gm_adsense_infoWindow.html)，它可以执行此操作（单击标记）。我没有用V3尝试过，但它应该是相同的原理。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-30T18:18:27.767

很有信心在 InfoWindow 中投放广告会违反 AdSense 服务条款。这将需要预加载广告，这意味着您将加载用户看不到的广告（不允许），或者当用户单击地图上的图标时，您必须使用 JS 加载广告（不允许），并且可能导致每页有 3 个以上的广告（不允许）。

# php - 使用 with 语句时，使用 AR findAll 函数仅返回一个对象

> ID：14587848
> 
> 赞同：4
> 
> 时间：2013-01-29T16:45:06.040
> 
> 标签：php, activerecord, yii

我的 Yii 安装有问题，我试图返回一个相当基本的查询，但我没有得到在线教程说我应该得到的结果。我有 2 个大致如下的模型：

价钱：

```
class Pricing extends CActiveRecord
{
/**
 * Returns the static model of the specified AR class.
 * @param string $className active record class name.
 * @return Pricing the static model class
 */
public static function model($className=__CLASS__)
{
    return parent::model($className);
}

/**
 * @return string the associated database table name
 */
public function tableName()
{
    return 'pricing';
}

/**
* @return string the primary key
*/
public function primaryKey(){
    return 'ID';
}

...

/**
 * @return array relational rules.
 */
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
        'xpricing_routes' => array(self::HAS_MANY, 'PricingRoutes', 'ID_pricing'),
    );
} 
```

和定价路线：

```
class PricingRoutes extends CActiveRecord
{
/**
 * Returns the static model of the specified AR class.
 * @param string $className active record class name.
 * @return PricingRoutes the static model class
 */
public static function model($className=__CLASS__)
{
    return parent::model($className);
}

/**
 * @return string the associated database table name
 */
public function tableName()
{
    return 'pricing_routes';
}

/**
* @return string the primary key
*/
public function primaryKey(){
    return 'ID';
}
...
/**
 * @return array relational rules.
 */
public function relations()
{
    // NOTE: you may need to adjust the relation name and the related
    // class name for the relations automatically generated below.
    return array(
        'xpricing' => array(self::BELONGS_TO, 'Pricing', 'ID_pricing'),
    );
} 
```

然后在控制器中我们有：

```
$criteria = new CDbCriteria;
$criteria->with = array('xpricing_routes'); 
$criteria->together=true;       

$pricing_records = Pricing::model()->findAll($criteria);
$pricing_records_arr = CHtml::listData($pricing_records, 'id', 'name');

echo '<pre>';
print_r($pricing_records);
print_r($pricing_record_arr);
echo '</pre>'; 
```

您可能已经知道，我们有 2 个表，分别称为定价和定价路径。定价路由表有一个名为 ID_pricing 的外键，它指向定价表中的 ID 字段。定价表有一个条目，pricing_routes 表有 4 个条目，它们都在 ID_pricing 字段中具有定价表中一项的主键。所以我们应该得到 4 个结果到我们正在运行的查询中，当我运行 Yii 使用 AR 生成的查询时，这就是我得到的。

我们遇到的问题是 $pricing_records 变量是一个只有一个定价对象的数组。该对象包含我们需要的数据，但不是真正可用的方式。$pricing_records_arr 变量只是一个空数组。我发现的文档似乎表明我们应该获得一组定价对象，每个定价对象也包含来自pricing_routes 表的信息。我们知道，使用 AR 可能不是获取这些数据的最佳方式，但我们有理由让它发挥作用，因此任何关于如何做到这一点的想法都将不胜感激。

编辑：

事实证明，这最终成为对我得到的东西的误解。对这个问题的评论给了我我需要的信息。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-03-15T12:41:57.990

如果你打电话

```
$pricing_records = Pricing::model()->findAll($criteria); 
```

您将仅获得一条活动记录，其中的属性填充了“定价”表中的值。如果你想从属于这个特定“定价”的“pricing_routes”中获取所有记录，你必须调用

```
$pricing_records->xpricing_routes 
```

其中“xpricing_routes”是您在模型中正确定义的关系的名称。如果没有匹配记录，则返回 PricingRoutes 数组或 null。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-15T17:33:58.080

如果你使用 findall 它会返回一个数组，即使只有一条记录

```
 $pricing_records = Pricing::model()->findAll($criteria);
foreach($pricing_records as $var){
$var->xpricing_routes->ID_pricing;//any variable
} 
```

或者如果只有一个字段可以使用

```
 $pricing_records = Pricing::model()->find($criteria);
$pricing_records->xpricing_routes->ID_pricing;//any variable 

```

# makefile - Is it possible to have make treat a missing dependency as up-to-date?

> ID：14587851
> 
> 赞同：0
> 
> 时间：2013-01-29T16:45:21.390
> 
> 标签：makefile

If I have a Makefile as follows

```
server : network.o storage.o logic.o
    ld network.o storage.o logic.o -o server

network.o : network.c netdefs.h
    cc -c -o network.o network.c

storage.o : storage.c defs.h
    cc -c -o storage.o storage.c

logic.o : logic.c defs.h
    cc -c -o logic.o logic.c

.PHONY : promote clean reallyclean

promote : server
    cp server /staging/new_servers

clean : 
    rm -f *.o

reallyclean : clean
    rm -f server 
```

And I do the following sequence of commands

```
make server # builds ther server from source
make clean  # tidies up the .o files
make promote # send the built server to the staging area 
```

make, not unsurprisingly, re-builds the server from scratch, as the .o files are dependencies of server and are missing.

I do want this to happen if the server file itself is not there (there'd be nothing to promote otherwise) but if there is a server and no .o files then I want make to assume that the server is up-to-date and to promote it.

Is this achievable?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:55:18.127

啊，明白了！

使用 .SECONDARY 或 .INTERMEDIATE 标记**所有**我想忽略的中间体，例如添加：

```
.SECONDARY : network.o storage.o logic.o 
```

（我已经尝试过这些，但在我的实际解决方案中，我有一个被忽略的中间体依赖于一个非忽略的中间体，所以 make 仍在重建所谓的被忽略的中间体，因此重建了服务器。）

# java - Android ListView LazyAdapter for Fragment

> ID：14587859
> 
> 赞同：0
> 
> 时间：2013-01-29T16:45:36.007
> 
> 标签：java, android, listview, fragment, listadapter

我扩展了我的平板电脑设计应用程序并使用片段。

主要活动：

```
 public class MainActivity extends Activity {

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);
         FragmentTransaction transaction = getFragmentManager()
         .beginTransaction();
         transaction.add(R.id.fragmentcontainer1, new list());
         transaction.commit();
    }
} 
```

带有 XML 加载器和 LazyAdapter 的列表片段：

```
public class lst extends Fragment {

    String URL = "URL HERE";
    static final String KEY_COUPON = "coupon"; // parent node
    static final String KEY_ID = "id";
    private boolean onCreateRunned = false;
    ArrayList<HashMap<String, String>> list;

    ListView list;
    LazyAdapter adapter;

    @Override
      public View onCreateView(LayoutInflater inflater, ViewGroup container,
              Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.list,
                container, false); 

        list = new ArrayList<HashMap<String, String>>();

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL);
        Document doc = parser.getDomElement(xml);

        NodeList nl = doc.getElementsByTagName(KEY_COUPON);
        for (int i = 0; i < nl.getLength(); i++) {
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            list.add(map);
        }

        list=(ListView) view.findViewById(R.id.list);

        adapter= new LazyAdapter(getActivity(), list);        
        list.setAdapter(adapter);

        return view;

    }   

} 
```

和 LazyAdapter

```
 public class LazyAdapter extends BaseAdapter {
    private Activity activity;
    private ArrayList<HashMap<String, String>> data;
    private static LayoutInflater inflater=null;
    public ImageLoader imageLoader; 

    public LazyAdapter(Context appContext, ArrayList<HashMap<String, String>> d) {
        activity = (Activity) appContext;
        data=d;
        inflater = (LayoutInflater)activity.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        imageLoader=new ImageLoader(activity);
    }

    public int getCount() {
        return data.size();
    }

    public Object getItem(int position) {
        return position;
    }

    public long getItemId(int position) {
        return position;
    }

    public View getView(int position, View convertView, ViewGroup parent) {
        View vi=convertView;
        if(convertView==null)

            vi = inflater.inflate(R.layout.list_row, null);

       // do something here

        return vi;
    }
} 
```

错误是：

```
01-29 16:42:14.775: E/AndroidRuntime(2057): FATAL EXCEPTION: main
01-29 16:42:14.775: E/AndroidRuntime(2057): java.lang.RuntimeException: Unable to start activity ComponentInfo{com.example.newcouponstablet/com.example.newcouponstablet.MainActivity}: android.os.NetworkOnMainThreadException
01-29 16:42:14.775: E/AndroidRuntime(2057):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2180)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2230)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at android.app.ActivityThread.access$600(ActivityThread.java:141)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1234)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at android.os.Handler.dispatchMessage(Handler.java:99)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at android.os.Looper.loop(Looper.java:137)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at android.app.ActivityThread.main(ActivityThread.java:5039)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at java.lang.reflect.Method.invokeNative(Native Method)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at java.lang.reflect.Method.invoke(Method.java:511)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:793)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:560)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at dalvik.system.NativeStart.main(Native Method)
01-29 16:42:14.775: E/AndroidRuntime(2057): Caused by: android.os.NetworkOnMainThreadException
01-29 16:42:14.775: E/AndroidRuntime(2057):     at android.os.StrictMode$AndroidBlockGuardPolicy.onNetwork(StrictMode.java:1117)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at libcore.io.BlockGuardOs.connect(BlockGuardOs.java:84)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at libcore.io.IoBridge.connectErrno(IoBridge.java:127)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at libcore.io.IoBridge.connect(IoBridge.java:112)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:192)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at java.net.PlainSocketImpl.connect(PlainSocketImpl.java:459)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at java.net.Socket.connect(Socket.java:842)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at org.apache.http.conn.scheme.PlainSocketFactory.connectSocket(PlainSocketFactory.java:119)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at org.apache.http.impl.conn.DefaultClientConnectionOperator.openConnection(DefaultClientConnectionOperator.java:144)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at org.apache.http.impl.conn.AbstractPoolEntry.open(AbstractPoolEntry.java:164)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at org.apache.http.impl.conn.AbstractPooledConnAdapter.open(AbstractPooledConnAdapter.java:119)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at org.apache.http.impl.client.DefaultRequestDirector.execute(DefaultRequestDirector.java:360)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:555)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:487)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at org.apache.http.impl.client.AbstractHttpClient.execute(AbstractHttpClient.java:465)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at com.example.newcouponstablet.XMLParser.getXmlFromUrl(XMLParser.java:45)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at com.example.newcouponstablet.list.onCreateView(list.java:46)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at android.app.Fragment.performCreateView(Fragment.java:1695)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:885)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1057)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at android.app.BackStackRecord.run(BackStackRecord.java:682)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at android.app.FragmentManagerImpl.execPendingActions(FragmentManager.java:1435)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at android.app.Activity.performStart(Activity.java:5113)
01-29 16:42:14.775: E/AndroidRuntime(2057):     at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2153) 
```

我希望任何人都可以帮助我理解它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:20:29.333

> 引起：android.os.NetworkOnMainThreadException

=> 当您在主线程本身上制作/实施长时间运行的任务时，就会发生这种情况

为避免这种情况，您可以实现线程（或**AsyncTask**）或在 onCreate() 方法中执行长时间运行的任务之前包含以下行：

```
StrictMode.ThreadPolicy policy = new StrictMode.
ThreadPolicy.Builder().permitAll().build();
StrictMode.setThreadPolicy(policy); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:36:59.943

```
public class lst extends Fragment {

    String URL = "URL HERE";
    static final String KEY_COUPON = "coupon"; // parent node
    static final String KEY_ID = "id";
    private boolean onCreateRunned = false;
    ArrayList<HashMap<String, String>> list;

    ListView list;
    LazyAdapter adapter;

    @Override
      public View onCreateView(LayoutInflater inflater, ViewGroup container,
              Bundle savedInstanceState) {
        View view = inflater.inflate(R.layout.list,
                container, false); 

        list = new ArrayList<HashMap<String, String>>();
        new Thread(new Runnable(){
        public void run() {

        XMLParser parser = new XMLParser();
        String xml = parser.getXmlFromUrl(URL);
        Document doc = parser.getDomElement(xml);

        NodeList nl = doc.getElementsByTagName(KEY_COUPON);
        for (int i = 0; i < nl.getLength(); i++) {
            HashMap<String, String> map = new HashMap<String, String>();
            Element e = (Element) nl.item(i);
            map.put(KEY_ID, parser.getValue(e, KEY_ID));
            list.add(map);
        }

        //Maybe this must activity.runOnUiThread(...     
        list=(ListView) view.findViewById(R.id.list);

        adapter= new LazyAdapter(getActivity(), list);        
        list.setAdapter(adapter);

        }}).start()

        return view;

    }   

} 
```

# python - Python - Blocked thread at os.listdir

> ID：14587860
> 
> 赞同：2
> 
> 时间：2013-01-29T16:45:38.957
> 
> 标签：python, multithreading, block, dbus, gobject

I have a mainloop in my program's main thread (The mainloop is a DBusGMainLoop waiting for a disk I/O event), every time an event handler is called a new thread is dispensed for some file copying. The strange thing happens at this point. Suppose an event is called and **thread 1** is started. **Thread 1** blocks at the line '`return os.listdir(path)`' until a second event happens and consequently a **second thread** starts. Then the **thread 1** will continue working fine but **thread 2** blocks. I've also noticed that if I interrupt the mainloop by Ctrl-C both threads will work but obviously the main thread will stop waiting for events.

Can anyone give any hint for why this happens?

This code runs in my main function:

```
mainloop = gobject.MainLoop()
mainloop.run() 
```

This is where the event handler starts a new thread:

```
agent = CopyingAgent(mount_point)
agent.start() 
```

and this is the method in which the thread **seems** to block or something:

```
def sorted_listdir(self, path):
    return sorted(os.listdir(path)) 
```

# .net - WCF client exception -"Message security verification failed, The signature verification failed" - how can I debug further?

> ID：14587864
> 
> 赞同：0
> 
> 时间：2013-01-29T16:45:45.767
> 
> 标签：.net, wcf, web-services, soap, wss4j

Getting the following exception when my WCF client gets a response calls a Java based Spring Web Services server -

```
System.ServiceModel.Security.MessageSecurityException, System.ServiceModel, Version=3.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089

Message security verification failed.
<StackTrace>
at System.ServiceModel.Security.MessageSecurityProtocol.VerifyIncomingMessage(Message&amp; message, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
at System.ServiceModel.Channels.SecurityChannelFactory`1.SecurityRequestChannel.ProcessReply(Message reply, SecurityProtocolCorrelationState correlationState, TimeSpan timeout)
at System.ServiceModel.Channels.SecurityChannelFactory`1.SecurityRequestChannel.Request(Message message, TimeSpan timeout)
at System.ServiceModel.Channels.TransactionRequestChannelGeneric`1.Request(Message message, TimeSpan timeout)
at System.ServiceModel.Dispatcher.RequestChannelBinder.Request(Message message, TimeSpan timeout)
at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs, TimeSpan timeout)
at System.ServiceModel.Channels.ServiceChannel.Call(String action, Boolean oneway, ProxyOperationRuntime operation, Object[] ins, Object[] outs)
at System.ServiceModel.Channels.ServiceChannelProxy.InvokeService(IMethodCallMessage methodCall, ProxyOperationRuntime operation)
at System.ServiceModel.Channels.ServiceChannelProxy.Invoke(IMessage message)
at System.Runtime.Remoting.Proxies.RealProxy.PrivateInvoke(MessageData&amp; msgData, Int32 type)
at Exxx.Client.xxxService.xxxx.submitx(submitXxxRequest request)
at xxx.Client.ExxxService.exxxsClient.Exxx.Client.ExxxService.exxxs.submitxxx(submitxxxRequest request)
at xxx.Client.ExxxService.exxxsClient.submitxxx(submissionRequest submissionRequest)
at xxx.Client.ClientService.Submitxxx(String xxxId, String username, Int32 batchType)
at xxx.Main.Start()
at ESubmission.Service.SchedulerService.CreateInstance(String assemblyName, Object argsObj)
at ESubmission.Service.SchedulerService.LoadAssembly(BOESubmissionSchedule eSubmissionSchedule)
at ESubmission.Service.SchedulerService.&lt;&gt;c__DisplayClass2.&lt;RunSchedules&gt;b__0()
at System.Threading.ThreadHelper.ThreadStart_Context(Object state)
at System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
at System.Threading.ThreadHelper.ThreadStart()
</StackTrace>
<ExceptionString>System.ServiceModel.Security.MessageSecurityException: Message security verification failed. ---&gt; System.Security.Cryptography.CryptographicException: The signature verification failed.
   at System.IdentityModel.SignedXml.VerifySignature(HashAlgorithm hash, AsymmetricSignatureDeformatter deformatter)
   at System.IdentityModel.SignedXml.StartSignatureVerification(SecurityKey verificationKey)
   at System.ServiceModel.Security.WSSecurityOneDotZeroReceiveSecurityHeader.VerifySignature(SignedXml signedXml, Boolean isPrimarySignature, SecurityHeaderTokenResolver resolver, Object signatureTarget, String id)
   at System.ServiceModel.Security.ReceiveSecurityHeader.ProcessPrimarySignature(SignedXml signedXml, Boolean isFromDecryptedSource)
   at System.ServiceModel.Security.ReceiveSecurityHeader.ExecuteSignatureEncryptionProcessingPass()
   at System.ServiceModel.Security.LaxModeSecurityHeaderElementInferenceEngine.ExecuteProcessingPasses(ReceiveSecurityHeader securityHeader, XmlDictionaryReader reader)
   at System.ServiceModel.Security.ReceiveSecurityHeader.Process(TimeSpan timeout, ChannelBinding channelBinding, ExtendedProtectionPolicy extendedProtectionPolicy)
   at System.ServiceModel.Security.MessageSecurityProtocol.ProcessSecurityHeader(ReceiveSecurityHeader securityHeader, Message&amp; message, SecurityToken requiredSigningToken, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
   at System.ServiceModel.Security.AsymmetricSecurityProtocol.VerifyIncomingMessageCore(Message&amp; message, String actor, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
   at System.ServiceModel.Security.MessageSecurityProtocol.VerifyIncomingMessage(Message&amp; message, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
   --- End of inner exception stack trace ---</ExceptionString> 
```

**The Inner Exception - The signature verification failed.**

```
<InnerException>
<ExceptionType>System.Security.Cryptography.CryptographicException, mscorlib, Version=2.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089</ExceptionType>
<Message>The signature verification failed.</Message>
<StackTrace>
at System.IdentityModel.SignedXml.VerifySignature(HashAlgorithm hash, AsymmetricSignatureDeformatter deformatter)
at System.IdentityModel.SignedXml.StartSignatureVerification(SecurityKey verificationKey)
at System.ServiceModel.Security.WSSecurityOneDotZeroReceiveSecurityHeader.VerifySignature(SignedXml signedXml, Boolean isPrimarySignature, SecurityHeaderTokenResolver resolver, Object signatureTarget, String id)
at System.ServiceModel.Security.ReceiveSecurityHeader.ProcessPrimarySignature(SignedXml signedXml, Boolean isFromDecryptedSource)
at System.ServiceModel.Security.ReceiveSecurityHeader.ExecuteSignatureEncryptionProcessingPass()
at System.ServiceModel.Security.LaxModeSecurityHeaderElementInferenceEngine.ExecuteProcessingPasses(ReceiveSecurityHeader securityHeader, XmlDictionaryReader reader)
at System.ServiceModel.Security.ReceiveSecurityHeader.Process(TimeSpan timeout, ChannelBinding channelBinding, ExtendedProtectionPolicy extendedProtectionPolicy)
at System.ServiceModel.Security.MessageSecurityProtocol.ProcessSecurityHeader(ReceiveSecurityHeader securityHeader, Message&amp; message, SecurityToken requiredSigningToken, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
at System.ServiceModel.Security.AsymmetricSecurityProtocol.VerifyIncomingMessageCore(Message&amp; message, String actor, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
at System.ServiceModel.Security.MessageSecurityProtocol.VerifyIncomingMessage(Message&amp; message, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
</StackTrace>
<ExceptionString>System.Security.Cryptography.CryptographicException: The signature verification failed.
   at System.IdentityModel.SignedXml.VerifySignature(HashAlgorithm hash, AsymmetricSignatureDeformatter deformatter)
   at System.IdentityModel.SignedXml.StartSignatureVerification(SecurityKey verificationKey)
   at System.ServiceModel.Security.WSSecurityOneDotZeroReceiveSecurityHeader.VerifySignature(SignedXml signedXml, Boolean isPrimarySignature, SecurityHeaderTokenResolver resolver, Object signatureTarget, String id)
   at System.ServiceModel.Security.ReceiveSecurityHeader.ProcessPrimarySignature(SignedXml signedXml, Boolean isFromDecryptedSource)
   at System.ServiceModel.Security.ReceiveSecurityHeader.ExecuteSignatureEncryptionProcessingPass()
   at System.ServiceModel.Security.LaxModeSecurityHeaderElementInferenceEngine.ExecuteProcessingPasses(ReceiveSecurityHeader securityHeader, XmlDictionaryReader reader)
   at System.ServiceModel.Security.ReceiveSecurityHeader.Process(TimeSpan timeout, ChannelBinding channelBinding, ExtendedProtectionPolicy extendedProtectionPolicy)
   at System.ServiceModel.Security.MessageSecurityProtocol.ProcessSecurityHeader(ReceiveSecurityHeader securityHeader, Message&amp; message, SecurityToken requiredSigningToken, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
   at System.ServiceModel.Security.AsymmetricSecurityProtocol.VerifyIncomingMessageCore(Message&amp; message, String actor, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)
   at System.ServiceModel.Security.MessageSecurityProtocol.VerifyIncomingMessage(Message&amp; message, TimeSpan timeout, SecurityProtocolCorrelationState[] correlationStates)</ExceptionString> 
```

The Java based server web-service seems to process my request fine but I'm having the above trouble with the response. Note: I have no access to the server side of things - I can request changes and query actions but that's all

**The set-up**

*   WCF .NET 3.5 client web-service
*   Java Spring Web Services 2.1.0 (SOAP protocol implementation) + Apache WSS4J 1.6.7 (WS-Security 1.1 implementation) server
*   The following security binding in config:

```
    [customBinding]
                [binding name="MY_BINDING"]
                    [transactionFlow/]
                    [security defaultAlgorithmSuite="Basic256Rsa15"     authenticationMode="MutualCertificate"
                messageSecurityVersion="WSSecurity10WSTrust13WSSecureConversation13WSSecurityPolicy12BasicSecurityProfile10"
                requireDerivedKeys="false" messageProtectionOrder="SignBeforeEncrypt" 
                allowSerializedSigningTokenOnReply="true" securityHeaderLayout="Lax"
                requireSignatureConfirmation="true"
                enableUnsecuredResponse="true"]
                    [secureConversationBootstrap   authenticationMode="CertificateOverTransport"
                      messageSecurityVersion="WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10"
                        requireDerivedKeys="false" /]
                [/security]
                [textMessageEncoding messageVersion="Soap11WSAddressing10"/]
                [httpsTransport requireClientCertificate="true"/]
       [/binding]
    [/customBinding]

```

*   Binding has been modified in code like so

    ```
    public static CustomBinding GetServiceBinding()
    {
    //Get custom binding reference from app.config
    CustomBinding binding = new CustomBinding(SettingsLookup.WcfCustomBindingName);
    binding.ReceiveTimeout = new TimeSpan(0, 0, 15, 0);
    binding.SendTimeout = new TimeSpan(0, 0, 15, 0);

    // Get the x509ProtectionParams from the security element
    X509SecurityTokenParameters tokenParameters = new X509SecurityTokenParameters();
    tokenParameters.X509ReferenceStyle = X509KeyIdentifierClauseType.IssuerSerial;
    tokenParameters.RequireDerivedKeys = false;
    tokenParameters.InclusionMode = SecurityTokenInclusionMode.AlwaysToRecipient;

    // Reference the asymettric security element            
    AsymmetricSecurityBindingElement securityBindingElement = binding.Elements.Find<AsymmetricSecurityBindingElement>();
    // Set the X509SecurityTokenParameters to point to the one's just configured. This is for symetric encryption, for asymetric this line needs to change
    //securityBindingElement.ProtectionTokenParameters = tokenParameters;
    securityBindingElement.MessageSecurityVersion = MessageSecurityVersion.WSSecurity11WSTrustFebruary2005WSSecureConversationFebruary2005WSSecurityPolicy11BasicSecurityProfile10;
    securityBindingElement.InitiatorTokenParameters = tokenParameters;
    securityBindingElement.LocalClientSettings.DetectReplays = false;                

    securityBindingElement.IncludeTimestamp = true;
    securityBindingElement.LocalClientSettings.TimestampValidityDuration = new TimeSpan(12, 0, 0);

    return binding;
    } 
    ```

    **What I can't seem to do is:**

    1.  Figure out which signature has failed? The stack trace for the inner exception mentions `System.ServiceModel.Security.ReceiveSecurityHeader.ProcessPrimarySignature` so I presumed the Primary Signature was the main envelope body signature? Contradictory to this, however, is the line in the StackTrace `System.ServiceModel.Security.MessageSecurityProtocol.ProcessSecurityHeader`which would lead me to think that it's a header element - but which one?

    2.  Check the signatures in a Console application or something similar using `System.Security.Cryptography.Xml.SignedXml` classes to verify in a separate, isolated environment which of the signatures are returning false for `CheckSignature()` - I have tried this and cant seem to get it to return true for elements in my request from WCF (I've pulled the request from fiddler)

Any and all help appreciated

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-02-07T17:13:48.193

Yaron - you were correct with your comments. Turning off `InclusiveNamespaces` on the server fixed the issue (The vendor turned off Basic Security Profile 1.1 compliance on their side). My .NET client didn't like the InclusiveNamespaces element at all - pity it just couldn't say so!

Many thanks again Yaron

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:05:48.077

Update: as requested by Yaron, request and response messages below -

*Couldn't add this to the body of the question due to size limits*

**REQUEST**

```
<s:Envelope xmlns:s="http://schemas.xmlsoap.org/soap/envelope/" xmlns:a="http://www.w3.org/2005/08/addressing" xmlns:u="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd">
<s:Header>
<a:Action s:mustUnderstand="1" u:Id="_3">http://www.xxxxx.xx/xxxx/v1/submitxxxxRequest</a:Action>
<a:MessageID u:Id="_4">urn:uuid:759216c6-eebf-4a65-b1e9-8dde47bee45c</a:MessageID>
<a:To s:mustUnderstand="1" u:Id="_5">https://wss.xxx.xxx.xxx/exxxx1/</a:To>
<a:From u:Id="_6">
<a:Address>http://example.com/</a:Address>
</a:From>
<o:Security s:mustUnderstand="1" xmlns:o="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd">
<u:Timestamp u:Id="uuid-060792f1-35d1-4d5e-bdcc-c29847a039a7-1">
<u:Created>2013-01-29T15:29:44.185Z</u:Created>
<u:Expires>2013-01-30T03:29:44.185Z</u:Expires>
</u:Timestamp>
<o:BinarySecurityToken>
<!-- Removed-->
</o:BinarySecurityToken>
<e:EncryptedKey Id="_0" xmlns:e="http://www.w3.org/2001/04/xmlenc#">
<e:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5"></e:EncryptionMethod>
<KeyInfo xmlns="http://www.w3.org/2000/09/xmldsig#">
<o:SecurityTokenReference>
<o:KeyIdentifier ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509SubjectKeyIdentifier" EncodingType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-soap-message-security-1.0#Base64Binary">oNEIRj8uPIkIP4+BfAo/CmYDwzk=</o:KeyIdentifier>
</o:SecurityTokenReference>
</KeyInfo>
<e:CipherData>
<e:CipherValue>AUbgDqZQRmameOEExgcK4m+3umf//4xl5kPt+7X84yHvprlZkta0Xp20/cmZLxJjTo8SeCPGjVSh0062+FCXBqsG1JBOcCRB+ulvM2fb0QoALyR8qxa+IyEnWS6XHecf8navZQ2SzsPRke9NZ/1YHaFdImYmediE0BH3/Mtc5KbwPxHgUeK/K/So9L+nJiPgvbLNwCMIdI0Tkcefb+8gPnNE3RK5oCb4sFeWzb6l+KSTtcMSd+3wrzC0iztdryvNuUCizK+P3ElndLM/IGCWY7kXOsbalNE2iv2MvTnW3DN/xNh8/2hg8KDuFATgChMXh9fmqAg94Zqd8Z6gKYBs8A==</e:CipherValue>
</e:CipherData>
<e:ReferenceList>
<e:DataReference URI="#_2"></e:DataReference>
</e:ReferenceList>
</e:EncryptedKey>
<Signature xmlns="http://www.w3.org/2000/09/xmldsig#">
<SignedInfo>
<CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></CanonicalizationMethod>
<SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"></SignatureMethod>
<Reference URI="#_1">
<Transforms>
<Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></Transform>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></DigestMethod>
<DigestValue>ArKSZjaaytFKKWquZw2neYuML9I=</DigestValue>
</Reference>
<Reference URI="#_3">
<Transforms>
<Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></Transform>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></DigestMethod>
<DigestValue>2YgeR5vFw0ICk8r+wiaVYknO4E8=</DigestValue>
</Reference>
<Reference URI="#_4">
<Transforms>
<Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></Transform>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></DigestMethod>
<DigestValue>MCtfgxgeH95HKveKjpMXAbNrDz0=</DigestValue>
</Reference>
<Reference URI="#_5">
<Transforms>
<Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></Transform>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></DigestMethod>
<DigestValue>ynr1icJszUi4OG5vt0usO0419As=</DigestValue>
</Reference>
<Reference URI="#_6">
<Transforms>
<Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></Transform>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></DigestMethod>
<DigestValue>y8jXxE1bLmeg6vJi9iqKczNvEDo=</DigestValue>
</Reference>
<Reference URI="#uuid-060792f1-35d1-4d5e-bdcc-c29847a039a7-1">
<Transforms>
<Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#"></Transform>
</Transforms>
<DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></DigestMethod>
<DigestValue>0t9JLZ1xs/Kg1kNEsLXzFHirlNo=</DigestValue>
</Reference>
</SignedInfo>
<SignatureValue>n6yTehZLf9uI4wR/YMEfecW5IMMtOFHrMlfZhXRz3d9I412s3Z7rqjGz4NEmnJkpRj3vIWDryywk5ms3jmvKfb3L9tpCsZcRN6wDzfBtV0T5cI+dGx1h/wILQpth73U9p1ejAUXLV21eQPxrlDyeeurg6FNJCO9/MZUkNY4uuEMy1kyrbg4MwxK8TQ8JSAOcOQDEwyqtUU1kYWckw8ht4OpKCATiasAsy1l2bNgQOhfZ8YmGJ3g1YEedb4MKh4RozS3UnEB5ryjtHPZRlITCNcu2jTjH5PCdTzWH8RcIFPHFUgLfMHMuDVaLhfaFvqzC8D2bBTlvvrqO6FNY+UcvYg==</SignatureValue>
<KeyInfo>
<o:SecurityTokenReference>
<o:Reference ValueType="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-x509-token-profile-1.0#X509v3" URI="#uuid-b4a8c5b5-0509-4536-b68a-57c396db4496-2"></o:Reference>
</o:SecurityTokenReference>
</KeyInfo>
</Signature>
</o:Security>
</s:Header>
<s:Body u:Id="_1" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">
<e:EncryptedData Id="_2" Type="http://www.w3.org/2001/04/xmlenc#Content" xmlns:e="http://www.w3.org/2001/04/xmlenc#">
<e:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes256-cbc"></e:EncryptionMethod>
<e:CipherData>
<e:CipherValue>njNbaa7uxaB1U1oPZFWQFbedoPmFs8bAmdLMblTeDYtzdTMSsU65gNerLtBfdG24pSlYR7Q2AyN2xbvsO/m7JuJTqcm3hb56UXqJu/p84tf6GvoQYPnkJSnObGC83/Ujkv1zrAENAHdD3YgWNI57DrE7BWi3sXA6juP58uD7annHIy+AJoW7SSSC2SKaXkmmkISB1JHlr9HOXcsa5GUrGRWVLLWFKjBWHq1wHOZNsQW8d89sRLQ7kJyaZH1AWtYzXXq6KwJO3TuVUbuhC3uFDRPAmFd6hg6lXeXGIMuswXKYei/7KazDmXpIfJKEfEMvBKrY2m3+MF5CJvlC6jmabU1w0/Jmz4GWMX0804BnpxkNFdxHVlMgWTdtxPwph25t9n9Hsia+n7FW60FbN9i1+hz5Zl2OGbrpv6T7pQwhhUGuHmGy3PWjOVWp/CLnyS+VAh5Mwk6JLGHODCKpM9HV+sFxP9P+vNExPU0ILGhavOiofw7bgqVl3+eukGYk5GI9+CT8R86b8QMt1+j1cZihECODT8raVYxqK6kJcafdaKh+qQ/gEbCgjnZE9OMpgr43/FBi6tz6TkdoNCCizcD7euGmze432JwI3BRC4xfzc700W1nllIvQiCFqAW8VHqGcru/QB1HC6Om54eu9knZAdeobBMjmjJseZC9M/pKeTLKjAhWoxY6rO5VJR5XL+H6jv1E7Vdnjy/4QRtktdd4gQhksoxIFlmxGrFtMvRbmmMmtCKIiD1g+iCq3v7jJtXiMe64wCPDeuieev7tWYPM3Fb1xzaqWixXkPhuQuTAiwi0Muqi4OFl9Jbskihb5rURi85QgnCBTjDCK7+X9kWxy7O7xm1BwV0xM0QmtP4lTVXQzNUAmQC+174QgOmKMLna3YNw+emphWrI0jeIIj9VNB4Ps5TYhDHYERH4vu3QWrHzHrin+VwnpPPnwSE1vLeeIgGB9DedV5odjsK84kQqWP3GxkRh5WtgHwIWhB9YyZ1eQlDy2l3xjmrwQ3pUtGgbDCJd0N5L0Oe7PNnACDfPJ1MdZw0plIQqMaGITSJMySC86LFdUYPAnnWMSkDynrNwSvOYk90zFPCrxUQ76bbFQju5+DqzODJ94ZcwVWI8qoPhqgx95rirmYQjmUyBJZ+VpAa6v+0e40rBwY7U+Sqe7GzcmxpdKStEQdOZ0FP5lw+CO3NVqr4hnf1s7Usle3zuQhWjvTPLVUTRIiKuEial61wlL8yKER6c3M2YOnLMGchZA6ddKO3kR1WzV2n+/a/Id06ZSuOqu6vvV/alEKRdK6zORutqoQLPfj5F/YiprESSpwkEAzHZuxNHPTXXDgNBhfrcs3TsuusSOtTUNKT93Z1sSsE7bLZVqqaXzQDXzjpBosUtSJrW6MDmY19ux82UJswhOiK2KLUs2+QHENnOUwbSkId0n3ROCKXpT+JM9U5LsswpoiSdFGk9/WUj/ogA2mXA7yGu03Bp7sBldbeZSU+ho9Ix6dpznkYdroa4u84WOSfCH0Kb7X7stBuZ9IgOKml5xr3c8FJVOlUPGyGSMn5J8SYTmsLt9HLLsM8sJiDBvguaQgN8YR6zk/qA/xXK2yGIlfRZIqkfow/vb9hpm5YdByeokyABSml9KcvhjCOGZIkgltW19txFtzPGYX0Dc7F/xteREwRMqO3cuqEE/Ufl3N6pRnR+9NHnJHPqkSexH1h5aHXylaWNQbsdvkQTT9co7Z5dtAAOSe1PsCHUaex0dXMzROG4FFRwjiu2YrNqDMPXItlkHn3ScK4XBoLhyVS8PPnWnGfYvR5iQRXHoZTmEZKqBAOoVaUVRftBWa/j4GW0NKD6GE8N8qtMCvFyALkL7XvIXKwZ+LhDOivVp1phmFxdIpG1KWLhotfPskFzXxeOxPOariFnxV4UEIEbI+Oso1BC8UF2rSWkbIpErPQfygnGEB/RCPlTigIi80MJkEvzL41H8lSJJ9Gng3jvPP8W5sJ/YOE4+QK6MtwS8heQdcPDCcV3m6lKwQ/c0xHtVA/65uLmADS16XINr6uUicnxOodH2lq8Ju08sMCHFjwMK9SnSN96nJ1rcgoH2dCR6S7yWf/wKx9QaFmcXKouwhE3xbgU2UUF2NjM3gbuhkqXZouZL1m9bpP94LUhEnt/IhQ4Q0QdeHLD3iLzfxuq5vdxxbEcfugMHOleMRAHAdEhnG0bk88YbPflwobs0kUFtNO1AttZxokGDnlS1gRuty/m+42d0/58aXtkdQDeWg47XKaLOqfiCobi7C6EqAKJgNKf52uax93HYO3peJd6wG2i1yKbSyXv1VKoAVw9LrmhUMcQVNuehs56DrXO21RGeqehxCk8JIRHaEtcBEYym2reVGm4AHf44UUDmi8b8vUZG1vWw2KulEQ09Q+nYCg4l1FNWk7KsIguUFt7lqa6c4/HY32NaI6Q9LEh3o/BTgDFKT7Icq6s/aiySFk1aS90tsBt9TJ8WnsM3ork5HVCgLYl1bLkDAjb5NEZoLwU5wE2JsIbhTYAkjJZMSznr6Pa5tlD/rzpZ6xF1+CF979Gkic3AKIS1b17TLpZiUcT24b2D2yda0tNxGIxuDbN60TC5C9SL8e/MAqRQ9wRI2sLFOk+ZdxiIo7tFnGNxIlV89iTnbXjy93XI7mq4ifGZwywj56AaSuCWML46ZOsbP9Jpo26n6QbbSQxLZHzMuIGwr26NF4ebXvHnbetwqyu5oY2j9ilfGfjNG4i+c85nhz+8hrrVA/VrRTDLIYcUCh1ax63ZbyTF2TyFI3e5DwNvnh2c8LQ1Ppajjek8SQZOqnWmmzAj9lNtfHQ8+8mmuS642oaGks7PE/ZaKUiKfv0CQTlOhY7QfB6SKX9tmo/jtyI7KD7sETygLAlSVjEiVI0uMn3cXtKSrLSwsKxdBgerLvQHZV4JyMl087oFUgGCNk6v5m7GBMfByys7tftlIXKtGa/GWpRvw4XO355HkZQSBr5L3zTplJZCeyiO42n9q0ow5SEqObrRmIlA11Oei6eRk8IQWmgNlnLHI/++CVKdlm4e4BZx/L8djTRf3S6wBVqVsTTluHLAu9+1whkARjAnGWAxvsYIQYNdjA95coYRFkdkwZJnUv0lRHq7bIRIkg96fVygMheC09RbGHd4vBo5/8wDRQkK0upM+1QhM/Gg/zbdFKRIP5EhYBPqmWhV5RYsV7m78Q2FLHEMnkcVFxYOOSUbTcQ3MmmR9gCgV9KSNVKzlhA1tFXDkF1s5wcC4WDahtxEHeFzYz+l0JmskIxJRSn5mT3+pEG81bvanAPnub2mtoXs7zN8Eb01SPusy1GVkq/AFHjyJNQNuPaWVY1gcM8mFk/Y041Bo3qmS/APp5YTrtm7wiUbmf6EnimwtHZ8z90/VytAVBp8iR22jyN642YiONCmKqLHncSAEUR74aoOSld5qJS/wqzAl8A5DXSYtkbmFJj4z9KBbAoBQ1bsAw7jFdbBsfhTTyWNknLtdkhVtFJueGqL6t+iHxxo376l4DZh+CKbhTAM3Gmqx6mwChJLnJcTh0cZ/pjpCvDjMrvAijrhm9iYkNdx7u/0RKXkod84MZeX39dDbvknL44FiYkhJw3zaNmFzh8bJEFEx0HzhXVPiMCSBDttuJI8VSyOjnA7aUGL46UGUwM+Sku0Xr6/UY0fbray7fhRlMMYUOBg316c79NfRubAWh4LK3uUufwoJGyY2oKKnUGaPC3dosYVZoKn7dHqWc6AvuKknkUo+c6ACPD6qR3FjrV9frHR8kzxpXjpq0E4bzq2vXkEB1/A6NBBLnyqjhu9vKqM59OJhKdujQpz2INQAWer6WFZ0332OMgYj5EKskxLQvb/KcHq4wbfx4l+BBHw5ZTe12606iHbeVJT9yRehAuGWt2b99UqmlahsO4BZ7czSY3KxNoxF6C6BRJqNAPflEFUcWkGXb3PZByZouB4zpht4oUmn2AT+ZVk6vxCFcKgS4S7/VMsD/69bXARMVaVwDXqy40ffVW10ZJOxrvmpoG6nKRLiDfgkdVdxysWusgXO3/3E+vPP5Mn0RnX0bT6pxZMbVvgi81SeOXrkJQ82Gk5G2xw6CnoTft/c3G25bO3O8WbfwNqU8juYmxYttvjZcRUgtssfsogRlVZeEWw7sLG/L2wycsuTsBtuWyBHb1bz7QEYtf2LiYgdtOmcjJvFr6hmaPVcSk437Oirk0iRwbbfox1cmNpC8dODjOe1pcoirPsO22ARDZ019xsf27zPoweduj+pFql57rdr/kEIpW8paQlWyae7FEZPyce9boV5Gf+pE0mq6IHqSpRNhLbkgiJyeVBK3qSiDMtZgVRcTOu9yfH9bkBTOtmL369YP+glnqo4Np1sqrHrEuu3LxrYWxEkzgkPWjF91sKgJ1il6zmpbVUIPDUyBghL+dMUW6rVIwnuWAs0AcRugy3mhgzuZ7hMIjYSWYDjXCn4mmgIqJXuw+oItjiLqs3ypxZGiHsGh3pBK2DOTaNDtd0bhgicZGl0InTt3nOovnq6lZkHGSVTbx9AqAdC/tH4wi+1qnZlSLMCxoJMrtIYScz2WsFNERb8r/k4+9EZOR/tE2QcLPgnhajUEeeEr2f4yBod8ojqTejNp9XdwfXr9rn/UZ7ZP0n0kKKlW9o/oMI/p1acVox5sndxXYtluRFwS+kauCBM6Pvkx94rQ5TGduVDP/3j2yxOV1BmFt1M0gxi7eimTEFJVLZ/B4N9gPd40B5KkipmQtd1Rq58FFcbcdxQC8D+kBD2wPliejvMou6KuopmZ2x8gMF7NAS6KVe/02AFOJSAYz+HgJTL9eXEFlvmF6pGx4vPhTzrN9YRMeYciKVNSAjEkvHGnTIMxU3sGL6LWn357BQRWtgggJPxpG29q1MTh0X0srp5+fKNFgbStZv9duzU15YzFsJ8++flgXnD1K6OGdreQarUCXG0qdoX12+bKN1ZJZfi2j7xVTl2Fpp4YAtjAo1xzQh1ec6g6xZDZOnv3l50EW7Ke9E/v9i6pLQWQwVw6/vugpaWXpb+nzTL9yekznOl+07lgcC1D4JQrn31AAjtasTmGr3bEm7LjTnMV9l9sFayhu9QrfQqHhNrebLuuCSlDteT4q972N76rl04qkBy7JiflFlD5UIKZ5kXsgTyWK54NL9vB06vfOCGbL5B27R0QduZOg1DsD6oJGDfF41YdXCNU+65AjoeKod+qwXxu6vLd6dwmkZaVFeWlJg7JpYPrGkddM9W/MHXFyBNQ3TT1lIqqDjTkY2kkGk0ROvKZF5kRuPdVcXhmffdS8auZq9W2Nvx7X2+u9oqxIqm29GVvRBgsigrqQFlj5rU92XjUhGSBvffCrCpCyp7/IQd/inPveumGNj0o1agD6FgpNSp0v1USNDMo9t6jwf1hmxR0y/bdz6xv/iB34GxXcD2wiJEON/EPQYZz3bqIjaDdyZBZSgGP4jqXfyMbqExr6MAaWCISSHQFVKvLopjPlLSuK87aVrJChr1AxjPz8YI6dbMwSHI9AByS77T0Fh+wj3xDBVdr48xhxQcS11wNIG42lUh1Mw41m81LvsfktbhzAQ6xOe9woa+n2mEvczXUnGZFLALbREa3cWIssJMivj19jonrXIUKcwBR8fp6PtCWHD+T7OpU2sWuo4ezLJRP6zZCrJzccU5rJ3jvB/MDXRywCPj+Rmo2TGttxDsNq5nCESMQdtCempmyzGohkw9orCd3IwnFjyd0pHwHzzIWlaltdhwVrtn2CbfqQ3ZQVIVOHUVZcy6+o3L2PDOxNp/ikQbebBch6B7X6M0BBVX3TJsVE/0GXmleaP5oLTXA940M+wVzvNQdpbMSGbs4tBffY5eJL+/2kL/rMeorHWuhKcMYh6mz6GgGA4/YI6+cWCAbqgVsPhSCdCVOG248ln14w3Mm5pWWVYS0aWbwxyOhDkDXyleYfSeTCX03ovxHokmMZN+M17ogx3V7mXrw1p7YVo5MRiBP575pE3iNcDoKmFBFbu9q32kZvZAdsiuQNnKCrSIP0kYxcRJ4/og/GI+JfZJtbNKgjn4IyPCFsD72uUbGkE4752n1ZgiWFgp61VacHD+OuIU2aLpuyGXHfqtBw5HdVKgtW+KoDkqXZr8hjYsWbATflt9GcvcM2paJKnvL+OrWXHz+TUZod9kkFRKzQQ4LsBQ4KV4cAIFg11JKY3wSrJuT/6rbAG4gQ/uvaJLx39uCguusmnfQ6Rb7+WbGjjh/2TtnatMmJSBFMtY92JJUdn/E7/gExQjoch3Ki/bAN4umO9L8/CfR+SS9yZKas1A16sITMhq0bhSC4rGpo9HfkzSceJT4TOd/BedWGTg5PfvpgeNH0b7kJTYatTDLVUqcy49JdARIuDJ522PhEjx813ArrBj302MsmHgj1E+wtPnhsCGa7cHehxe2rvpwuNhGfvFBhB5mdJNjRyu4sThkfzT0fQ4JMGhdCj4AGRUfE+b+OzuDhKix9HmV/H7R3XPyVyXt3JC8YyUFCD5jth0MEWn94V5fu5EONOBv/vvcB4bQkHtZcRLuW0NgDBOPRZ2bvVyUcM4GbjqXE24nMjQL9WYdQBarZ6yb4aXIWWijflY0JquqmIZUGzSb0w36fII7HQ5JDaH93yMpvvFRTd1rAUY11kZVa/PVvISujU4dJIrXCL2PrMKBcPGZfNim0N27Qv9Iwjw/QXAtgc3bnNiR1IN88uC9Zrsnnf68jxv64XGsFyrwBkpWg74SfmIW53uupi/A9B65B+HImGkUPdxzvTP9wVC9McxeGlZznKswcWgKg0+WAW5FX8bk54ET+Em05qPHSpg23eSpOnIJKyAVzHgol3jSxBdgVZO8woyiYHTVtYYmgq6JUFM6meImVfq3Jj4ejhy3f26VbRa5cn46g6VCRzbbvZUH6GHoEMBWeKvy/Pnkccexsuy/7fq14HvLpYw8GrMLH8fxxdt1EGits5i2vRjVgkNXHPId54CEzU5Z6meyyeEgFpOHj/Zn7BDmeKm1MkvxVFo+p5ELN065OpsIh6zFQTKpKDEMBEmXXhW4Ptn44S7pDUTUsmmaZwjJNoeoAT3YXLQk9racrAaubASkvthb+sNpEDRMZOvAmOagyUWsQy9/j8QghqPia5KiD0qW2dkeT1yWlAVdLqtpRNqU2JSjugf9hwGhZQdEaODfJj4TtaxgxfUEYwGnoaLoAwFDjK5LYu9nfDqrt0FOlyuZOxxwkB9hwYouS9Lhfy3Yzi9xgTKWB4V0t9u1LdpKwBF3GRnFp0OOxqYhN0woFNE0CYWpAtVRx9IoK6DsInu1U5BIq+7dOOzhwn+1wYKcm5KWFtLuZecTmOc2GC0lCJTeaADmuf+4M7ScdR/74R75AyGELY+zZOWlSXNAHmDMlVWn5lXznRZ9Q3/q0azRK5A8H7almVeYADhVKPY50vzFAZu59BIYrUw0d1lQMeWa/OLHk3AwZLOnSzf16FIcpm+ueXypopJbiOe7mAGZqHxh/N+0Fp5lL8Q65r3I3GjJdfU6Bx2E7aYgjq54rYH8hiDNeNYi00hVMxy2+VWTgK9Dfsfc7YzKcXlS00gT+VxFvKlMspCNjHorZdURpwsE5LFK1pylU1WIqD1RHRmZSA+K0GWc5saFZaCc/4/y84N1a2n8EzSPo7jTmRem+AZO+Pl5SaltglZlPGzQedHCeJ41vMNsCf09RIjR3uU+EHlENNN1xOgD/SC/wujTEflil/9h5/9GMiHBRqw3t3qyaycYsulPlqLRO7XK9iUg7p6oymXeYFJZEOUn2GxoKruPfUy6OVGf1qddMpaaswG+mI9BC2lTo5yyCZx17v9oP6k/dpoLO4VUz8Jk7b90G7hWbe6pzeiqcOFVpF7mTmZW67g7VqQiS1J+l/CE7sqQESVn/gMrTUmi+Pwaim16t9E9YjNaH0pAo4UuFsXUPa8+XjsmrN2/Uykys8yw1ny3E3PJHwEN6cxwHJ/xib67QQp4iZ+ZMGeVDWwZeTZokuub0FthEu0Tq/JG9zteGbrvURIq9y1n861hdZ04FIpjU1XqNYVKLKqbEx56NPlcmq9jAievj05jz7UjrLS9KUBt8OffbWf62pqq6DTxXtduz1t1iWKfSvPDMHVYQDuAxeK+aJTo+2QXVFLVLfYjwoMpqTRseMZQQLve6bXQrOH0/sSuixQOOOXAtyVm9lKc919Bo+hDAuEisFfhjlA/a41FE3g4ncH6jk2nUkr6bRraNpo9mY63JckBU0RhJvl1t3yVwBsBu+hpS8AAzBzgabOZuVTy6jOj95/tktN3nFAHxVi1Z+P2L7UGQqe9LCXOeLoU5d23eYAcTM8z4Go2bybwQfar0WZU61bJ8lXoDTNc4Yry0w7XPHMMd/1Wt9hLNDumgCcZxtzvFUI/w/iMGWE031yMnTEiax4M6Hu61+a9FHc0+7wkOvUuVhrPYmu/AJv/PMRycE471fjaY4ozWvjI6RYS/T/M3pqPbfAIQJRxHZWOmnujVWzKgkhSiDgQFZksvT9fjoKfSE7gnDXHk2tnxvbx/MUaUPqJGsttAyv2efXbeqw+qN17k8gBFNdiZW/uKeht1tNOKiGrxKDJVzLGYw88k=</e:CipherValue>
</e:CipherData>
</e:EncryptedData>
</s:Body>
</s:Envelope> 
```

**RESPONSE**

```
<SOAP-ENV:Envelope xmlns:SOAP-ENV="http://schemas.xmlsoap.org/soap/envelope/">
<SOAP-ENV:Header xmlns:wsa="http://www.w3.org/2005/08/addressing">
<wsse:Security xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" SOAP-ENV:mustUnderstand="1">
<xenc:EncryptedKey xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" Id="EK-574D52A06E52AF3EE4135947330291524">
<xenc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#rsa-1_5"></xenc:EncryptionMethod>
<ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<wsse:SecurityTokenReference>
<ds:X509Data>
<ds:X509IssuerSerial>
<ds:X509IssuerName>CN=XXX-Issuing-CA,DC=XXX,DC=net</ds:X509IssuerName>
<ds:X509SerialNumber>79408981557796405248060</ds:X509SerialNumber>
</ds:X509IssuerSerial>
</ds:X509Data>
</wsse:SecurityTokenReference>
</ds:KeyInfo>
<xenc:CipherData>
<xenc:CipherValue>er/9uf5ssREPDuqM+se+BX4rQaOFC73XlCSd+3Sqy/2ifnWA6FMS0lJ30Gnm2n9Ce4DusC3JCxgKSbITCn4ddHMFiy5/532bhh6vIOLEn2mIZwf3XkSNPbit0dIuDXzEV+bbmxW94Vy/hHauSacUzZN0/n4qTEii2pisWUx8OwSUQ7OUyWEZ9DkynZ/WofVCSvGAufYL+exY8XUWFRepm6rWED0k9yNBfbcZ2YKlgmBy3TEB1W7KB+VvSDfxUgTthVvjIosBojXQCPGdP6mONy59/Gxm2BcWzYTr9xzBBTicQGCH780MFmLH/BZby3GPioQyV3+tCdpjjTG4jdoLOA==</xenc:CipherValue>
</xenc:CipherData>
<xenc:ReferenceList>
<xenc:DataReference URI="#ED-59"></xenc:DataReference>
</xenc:ReferenceList>
</xenc:EncryptedKey>
<ds:Signature xmlns:ds="http://www.w3.org/2000/09/xmldsig#" Id="SIG-58">
<ds:SignedInfo>
<ds:CanonicalizationMethod Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
<ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="wsa SOAP-ENV"></ec:InclusiveNamespaces>
</ds:CanonicalizationMethod>
<ds:SignatureMethod Algorithm="http://www.w3.org/2000/09/xmldsig#rsa-sha1"></ds:SignatureMethod>
<ds:Reference URI="#id-52">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
<ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList=""></ec:InclusiveNamespaces>
</ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></ds:DigestMethod>
<ds:DigestValue>GFAtBwpzYjMSEYH7Duk+slEfc4Y=</ds:DigestValue>
</ds:Reference>
<ds:Reference URI="#id-53">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
<ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="SOAP-ENV"></ec:InclusiveNamespaces>
</ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></ds:DigestMethod>
<ds:DigestValue>OrY4HPfi3cAW+vlBPYm2/fT+fjM=</ds:DigestValue>
</ds:Reference>
<ds:Reference URI="#id-54">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
<ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="SOAP-ENV"></ec:InclusiveNamespaces>
</ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></ds:DigestMethod>
<ds:DigestValue>7iU/1JeLjAExQOkZdo9ZIB7b+hs=</ds:DigestValue>
</ds:Reference>
<ds:Reference URI="#id-55">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
<ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="SOAP-ENV"></ec:InclusiveNamespaces>
</ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></ds:DigestMethod>
<ds:DigestValue>wm8HiqQXlaagQyZuYS2i3OqYXGI=</ds:DigestValue>
</ds:Reference>
<ds:Reference URI="#id-56">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
<ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList=""></ec:InclusiveNamespaces>
</ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></ds:DigestMethod>
<ds:DigestValue>IGFJ58avXiQXLEce7T0FG0LRlDs=</ds:DigestValue>
</ds:Reference>
<ds:Reference URI="#id-57">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
<ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="SOAP-ENV"></ec:InclusiveNamespaces>
</ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></ds:DigestMethod>
<ds:DigestValue>w99rafTw8pKc/n1NNUgE6HY8fU4=</ds:DigestValue>
</ds:Reference>
<ds:Reference URI="#TS-51">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
<ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="wsse wsa SOAP-ENV"></ec:InclusiveNamespaces>
</ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></ds:DigestMethod>
<ds:DigestValue>WE4iIBB4g9gWGpwt3vJ/sOI199o=</ds:DigestValue>
</ds:Reference>
<ds:Reference URI="#SC-50">
<ds:Transforms>
<ds:Transform Algorithm="http://www.w3.org/2001/10/xml-exc-c14n#">
<ec:InclusiveNamespaces xmlns:ec="http://www.w3.org/2001/10/xml-exc-c14n#" PrefixList="wsse wsa SOAP-ENV"></ec:InclusiveNamespaces>
</ds:Transform>
</ds:Transforms>
<ds:DigestMethod Algorithm="http://www.w3.org/2000/09/xmldsig#sha1"></ds:DigestMethod>
<ds:DigestValue>nsxvRxURon7NXk0Ts/435VWpYdo=</ds:DigestValue>
</ds:Reference>
</ds:SignedInfo>
<ds:SignatureValue>HrlESvWPyLCnfjSDsUmHq1/ZoMXhJJIyWwWeZhkhb3Y3wjbUsYJOyaEWbL+zdLC+PxC8ioCGTOxdl1iGqbQPUBVGdD6tklLdJart+aFRtuvu9dD9a/hBcR19s9AiN76V89+H/JYLFFJ2ZQ2RBERznHOgNcnjmAcerWzL4pikPpAs8zedk+G7gfWF2oZ+2DKhTWz9gkxVZvcwFG1eP1CeJE9JT3IjwGOYDUAVWRvGnGxK+WjzZXGhvjmqQcUdfycqDAAxISs5/F3WS7lZZBDLRaMlnOKF2rCUdk2Ynxx3N5ypMij/hJ9bR8BIGj20VZPdZmVleFHFFu9LUOG7qqyhTw==</ds:SignatureValue>
<ds:KeyInfo Id="KI-574D52A06E52AF3EE4135947330285222">
<wsse:SecurityTokenReference wsu:Id="STR-574D52A06E52AF3EE4135947330285223">
<ds:X509Data>
<ds:X509IssuerSerial>
<ds:X509IssuerName>CN=Digi-Sign CA Digi-SSL Xp,OU=Terms and Conditions of use: http://www.digi-sign.com/repository,O=Digi-Sign Limited,L=x,ST=x,C=IE</ds:X509IssuerName>
<ds:X509SerialNumber>332400447372114521873343220359135431141</ds:X509SerialNumber>
</ds:X509IssuerSerial>
</ds:X509Data>
</wsse:SecurityTokenReference>
</ds:KeyInfo>
</ds:Signature>
<wsu:Timestamp wsu:Id="TS-51">
<wsu:Created>2013-01-29T15:28:22.852Z</wsu:Created>
<wsu:Expires>2013-01-30T03:28:22.852Z</wsu:Expires>
</wsu:Timestamp>
<wsse11:SignatureConfirmation xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd" Value="n6yTehZLf9uI4wR/YMEfecW5IMMtOFHrMlfZhXRz3d9I412s3Z7rqjGz4NEmnJkpRj3vIWDryywk5ms3jmvKfb3L9tpCsZcRN6wDzfBtV0T5cI+dGx1h/wILQpth73U9p1ejAUXLV21eQPxrlDyeeurg6FNJCO9/MZUkNY4uuEMy1kyrbg4MwxK8TQ8JSAOcOQDEwyqtUU1kYWckw8ht4OpKCATiasAsy1l2bNgQOhfZ8YmGJ3g1YEedb4MKh4RozS3UnEB5ryjtHPZRlITCNcu2jTjH5PCdTzWH8RcIFPHFUgLfMHMuDVaLhfaFvqzC8D2bBTlvvrqO6FNY+UcvYg==" wsu:Id="SC-50"></wsse11:SignatureConfirmation>
</wsse:Security>
<wsa:From xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="id-55">
<wsa:Address>https://wss.xxx.xxxx.xxx/exxxxx1/</wsa:Address>
</wsa:From>
<wsa:To xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" SOAP-ENV:mustUnderstand="1" wsu:Id="id-56">http://www.w3.org/2005/08/addressing/anonymous</wsa:To>
<wsa:Action xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="id-53">http://www.xxxxx.xxx/exxxx/v1/submitxxxFault</wsa:Action>
<wsa:MessageID xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="id-54">urn:uuid:1bb2caaa-8900-4ba8-9bab-6ce7a4c8b5ba</wsa:MessageID>
<wsa:RelatesTo xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="id-57">urn:uuid:759216c6-eebf-4a65-b1e9-8dde47bee45c</wsa:RelatesTo>
</SOAP-ENV:Header>
<SOAP-ENV:Body xmlns:wsu="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-utility-1.0.xsd" wsu:Id="id-52">
<xenc:EncryptedData xmlns:xenc="http://www.w3.org/2001/04/xmlenc#" Id="ED-59" Type="http://www.w3.org/2001/04/xmlenc#Content">
<xenc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes256-cbc"></xenc:EncryptionMethod>
<ds:KeyInfo xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
<wsse:SecurityTokenReference xmlns:wsse="http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-wssecurity-secext-1.0.xsd" xmlns:wsse11="http://docs.oasis-open.org/wss/oasis-wss-wssecurity-secext-1.1.xsd" wsse11:TokenType="http://docs.oasis-open.org/wss/oasis-wss-soap-message-security-1.1#EncryptedKey">
<wsse:Reference URI="#EK-574D52A06E52AF3EE4135947330291524"></wsse:Reference>
</wsse:SecurityTokenReference>
</ds:KeyInfo>
<xenc:CipherData>
<xenc:CipherValue>zlDlBzico4mvxJUWO1ONL2C2RVpOK8Ii3WNInBMO9W7DCHAe+WzjfKxuwpXUC6F+oRcvG+uDKkkJEgcZ9oeezwJQmeN6taJWyCSxCOsmx2parKfiYkfX0HZLmo+/bB+ApgeFJ8xAu4TzckPTFD9RwOnlyh9hgwMa7oXa+P9hhljXOXabGinoa0GHAm+F16CAc/3Q7Utzd7z8XTBMnPVDg+dFXp8vtNTIORDSYYHc68XQmpMRAfQE3U5pypCIUb9GaLW/0gP3n9hAtIubqtVNAa1+i8uI9WNsWF5PfwdKL0sB7RzYX8JRBTqTLYbg6akDuUIBQiCbi0MTMg15uqSGs2PCsS5LUJUGU5XLotavpClonaxkURzJwwFeb8BxrHEQAXe/TrFKrne4lMzn84EegL1ETLw9Swgby1AzLEktvM7xVM509dIVPuhJuwcfJi+fpGjSNWw60VBplR6XGfcGOdjVI+JGCq/OyWrY2bM+hGOhmTErm3R73n2dI3F9NGjwgrf87+IT5gDLwCNoKrBc2R3Ku++035XxXbh9RWNQR74YsPNL93m9W5DxTaBQPSTeL01+zbWN95nyAqKM+47VT6sEaKYCIBHkXUIoqf0X1hJj/nwNNY8WABXKN8Kzd8HalumIEg2woTJXS9yhH+sQlHw4acz4ifTyZQupGBoyBiHcpx9swPGzFNOC9UFsMuQV/UVmhlV+LZmasGf8O/XJa7/nJZzXzGQnEWtMNK+TE8dYDGTAXF41GryHOuc7QoxswF8EreThEEDkrrvJWXOO27VWK8wN7zEo7ev1Lvq5FZk=</xenc:CipherValue>
</xenc:CipherData>
</xenc:EncryptedData>
</SOAP-ENV:Body>
</SOAP-ENV:Envelope> 
```

# html - 如何在 Highcharts 中将数据标签设置为垂直

> ID：14587866
> 
> 赞同：2
> 
> 时间：2013-01-29T16:45:51.347
> 
> 标签：html, xml, highcharts

我想使用 Highcharts 插件和 XML 文件中的数据创建一个图形“堆叠列”。（见[这里](http://mam43.free.fr/)）我的 XML 文件是：

```
<?xml version="1.0" encoding="utf-8"?>
<chart>
<categories>
<item>2000</item>
<item>2001</item>
<item>2002</item>
....    </categories>
<series>
<name>Impots locaux</name>
<data>
<point>231</point>
<point>232</point>
....    </data>
</series>
<series>
<name>Autres impots et taxes</name>
<data>
<point>24</point>
<point>27</point>
<point>37</point>
.....</data>
</series>
<series>
<name>Dotation globale de fonctionnement</name>
<data>
<point>247</point>
<point>254</point>
....</data>
</series>
</chart> 
```

HTML编码是：

```
<!DOCTYPE HTML>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Mazet</title>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
    <script type="text/javascript" src="../js/highcharts.js"></script>
    <script type="text/javascript" src="../js/themes/gray.js"></script>
    <script type="text/javascript">
    $(document).ready(function() {

        var options = {
            chart: {
                renderTo: 'container',
                type: 'column'
            },
            title: {
                text: 'Produits de fonctionnement du Mazet-Saint-Voy'
            },
              subtitle: {
            text: 'Source : <a href="http://alize22.finances.gouv.fr/communes/eneuro/RDep.php?type=BPS&dep=043" target="_blank">Ministère de l\'économie et des finances</a>'
        },
        tooltip: {
            formatter: function () {
                return '' + this.y +  ' €/hab. en ' +  this.x;
            }
        },

        plotOptions: {
            column: {
               /* pointPadding: 0.2,
                borderWidth: 0,*/
                   stacking: 'normal',
                dataLabels: {
                    enabled: true,
                    color: (Highcharts.theme && Highcharts.theme.dataLabelsColor) || 'white'
                }
            }
        },
            xAxis: {
                categories: [],
                   labels: {
                rotation: -45,
                align: 'right',
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            }

            },
            yAxis: {
                title: {
                    text: 'En euros par habitant'
                },
            stackLabels: {
                enabled: true,
                style: {
                    fontWeight: 'bold',
                    color: (Highcharts.theme && Highcharts.theme.textColor) || 'gray'
                }
            }
        },
            series: []
        };

        // Load the data from the XML file 
        $.get('../xml/43130.xml', function(xml) {

            // Split the lines
            var $xml = $(xml);

            // push categories
            $xml.find('categories item').each(function(i, category) {
                options.xAxis.categories.push($(category).text());
            });

            // push series
            $xml.find('series').each(function(i, series) {
                var seriesOptions = {
                    name: $(series).find('name').text(),
                    data: []
                };

                // push data points
                $(series).find('data point').each(function(i, point) {
                    seriesOptions.data.push(
                        parseInt($(point).text())
                    );
                });

                // add it to the options
                options.series.push(seriesOptions);
            });
            var chart = new Highcharts.Chart(options);
        });

    });
    </script>

</head>
<body>

        <div id="container" style="width: 600px; height: 400px; margin: 0 auto"></div>

</body>
</html> 
```

**我的 3 系列数据的“dataLabels”代码在哪里以及如何垂直？**

```
dataLabels: {
                enabled: true,
                rotation: -90,
                color: '#FFFFFF',
                align: 'right',
                x: 4,
                y: 10,
                style: {
                    fontSize: '13px',
                    fontFamily: 'Verdana, sans-serif'
                }
            } 
```

谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T17:06:03.230

您可以设置`rotation`为`90`. [**演示**](http://jsfiddle.net/QBG2W/)

或者您可以使用 css 设置和设置样式`useHTML`。`true`

```
.highcharts-data-labels span {
    width: 7px;
    white-space: normal !Important;
} 
```

那么你的`dataLabels`格式化程序应该是：

```
formatter: function() {
    return this.y.toString().split('').join(' ');
} 
```

这样，您将通过以下方式获得标签。

`9`
`0`
`0`

[**演示**](http://jsfiddle.net/QBG2W/1/)

# android - Android Front Facing Camera - getSupportedVideoSizes

> ID：14587870
> 
> 赞同：1
> 
> 时间：2013-01-29T16:46:13.437
> 
> 标签：android, camera

Hi i am using the getSupportedVideoSizes method to get the supported video sizes which works great. I just need to know how to get it for front facing cameras only. Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-29T20:15:54.597

调用`Camera.open()`时像这样传递前置摄像头的ID`Camera.open( camId )`

要获取前置摄像头的 id，请查看：

```
 public static int getFrontCameraId() {
        CameraInfo ci = new CameraInfo();
        for (int i = 0 ; i < Camera.getNumberOfCameras(); i++) {
            Camera.getCameraInfo(i, ci);
            if (ci.facing == CameraInfo.CAMERA_FACING_FRONT) return i;
        }
        return -1; // No front-facing camera found
    } 
```

拥有正确的相机实例后，您将获得相关的支持的视频大小。

# c++ - MFC Assertion fails after upgrading from VC++ 6 to MSVC 2005

> ID：14587873
> 
> 赞同：1
> 
> 时间：2013-01-29T16:46:19.293
> 
> 标签：c++, mfc

Is it normal to have to update assertions after upgrading the compiler from VC++ 6 to MSVC 2005? I have the following function which works without triggering the assertion in Visual Studio 6 but anything newer it fails.

```
void CMainFrame::OnUpdateGraphValue (CCmdUI* pCmdUI) {

    BOOL bMax;

    CMDIChildWnd *child = MDIGetActive (&bMax);
    if (child)
    {
        if (child->IsKindOf (RUNTIME_CLASS (CGaugeChildFrame)))
        {
            CGaugeView *pView = (CGaugeView *) child->GetActiveView ();
            if (pView->wndActive)
            {
                ASSERT (pView->IsKindOf (RUNTIME_CLASS (CGaugeView)));
                pCmdUI->Enable (TRUE);
                return;
            }
        }
        if (child->IsKindOf (RUNTIME_CLASS (CGarterChildFrame)))
        {
            CGarterView *pView = (CGarterView *) child->GetActiveView ();
            if (pView->wndGraphics)
            {
                ASSERT (pView->IsKindOf (RUNTIME_CLASS (CGarterView)));
                pCmdUI->Enable (TRUE);
                return;
            }
        }
    }

pCmdUI->Enable (FALSE); } 
```

The failure occurs on line `ASSERT (pView->IsKindOf (RUNTIME_CLASS (CGaugeView)));` When I click print preview the type is not `CGaugeView` but `CPreviewView`.

Can someone please shed some light on this for me? Thanks

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:02:05.877

在检查类型兼容之前强制转换为类型是无效的。

所以你需要这样做：

```
 if(child->GetActiveView ()->IsKindOf(RUNTIME_CLASS(CGaugeView)))
   {
        CGaugeView *pView = (CGaugeView *) child->GetActiveView (); 
```

至于为什么这种行为发生了变化，我不知道。也许在你忽略断言之前？也许您没有尝试构建调试？

还是版本 7 中的打印预览架构发生了变化？可能以前的版本没有`pView->wndGraphics`打印预览模式，所以代码路径从来没有被触发过。

但是，由于您没有将代码路径用于任何内容，因此可能只是将其转储。

# matlab - Importing string-like ".txt" data into Matlab as matrix

> ID：14587881
> 
> 赞同：0
> 
> 时间：2013-01-29T16:46:41.977
> 
> 标签：matlab, csv, import, text-files

I have a question regarding the importing of .txt files. The file is in the format below, the problem is that matlab does not seem to recognize the "new line" character indicators following every "$", so matlab just sees the 5th line as a continuous stream of data

Data Matlab sees:

```
01-24-2013 [6:01:53] 
Kp (0070.0000)
Ki  (0200.0000)
Kd (0009.0000)
$,0045,0044,0000.05,0011.53,0005.64,$,0045,0048,0000.04,0011.55,0005.66,$....etc
01-24-2013 [7:01:48] 
```

Data Wordpad sees:

```
01-24-2013 [6:01:53] 
Kp (0070.0000)
Ki  (0200.0000)
Kd (0009.0000)
$,0045,0044,0000.05,0011.53,0005.64,
$,0045,0048,0000.04,0011.55,0005.66,
$, .... 
```

I have no problem importing the format seen by "wordpad (re-saved with)" using "csvread" and skipping column 1, but for the raw .txt file "Data Matlab sees", I cant find a way to tell Matlab how to read. Ideally, I would like to tell Matlab to skip to Row-5, then start reading data and creating a new line in the matrix [nx5] every time it encounters a "$". Is there a way to detect the "$" and reformat the data into a usable matrix form?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:56:41.617

我不知道您是如何设法将这些数据作为一行读取的，但假设您这样做了并且想要拆分它。你可以使用万能[`regexp`](http://www.mathworks.com/help/matlab/ref/regexp.html)的来做到这一点：

```
C = regexp(str, '\$,', 'split'); 
```

然后将字符串转换为数字并将所有内容转换为矩阵：

```
C = cellfun(@str2num, C, 'Uniform', false);
A = vertcat(C{:}); 
```

* * *

关于问题的第二部分：

> 理想情况下，我想告诉 Matlab 跳到第 5 行，然后开始读取数据......

您可以[`textread`](http://www.mathworks.com/help/matlab/ref/textread.html)使用以下`'headerlines'`选项来做到这一点：

```
C = textread('file.txt', '%s', 1, 'headerlines', 4, 'delimiter', '\n')
str = C{1}; 
```

然后使用`regexp`用于拆分字符串的代码`str`。

请注意，这仅在 MATLAB 确实像您描述的那样“看到”第 5 行时才有效。如果没有，您将只获得矩阵中的第一行。

### 例子

```
str = '$,0045,0044,0000.05,0011.53,0005.64,$,0045,0048,0000.04,0011.55,0005.66';
C = cellfun(@str2num, regexp(str, '\$,', 'split'), 'Uniform', false);
A = vertcat(C{:}) 
```

这导致：

```
A =
   45.0000   44.0000    0.0500   11.5300    5.6400
   45.0000   48.0000    0.0400   11.5500    5.6600 
```

# jenkins - How do I add a page to Jenkins?

> ID：14587882
> 
> 赞同：5
> 
> 时间：2013-01-29T16:46:43.793
> 
> 标签：jenkins, hudson

I am looking to write a jenkins plugin that lets me add a new link that links to a new page of my creating. I have determined how to create the new link by extending RootAction and I can get it to link to a static resource in the webapp directory. My problem is many fold though. I think I need to use a jelly page because of the nature of action I want to do on this new page of mine and even if I could do what I wanted to with static web content the link pops me out of the jenkins interface to a page only containing my static web content.

What I need to know is, how do you go about creating a brand new page? I have been scowering the JavaDoc looking for an interface and the internet for more documentation on how to write plugins. But the internet seems to be sadly lacking on information pertaining to Jenkins plugin development.

What I want to do is be able to click my new link and have it take me to my new page, still with all the Jenkins navigation and such, and on this new page I am going to have a form for performing some actions on files.

Any help or pointers to documentation I have not found would be greatly appreciated.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-12-16T17:14:27.610

如您所见，第一步是扩展 RootAction 或 Action，具体取决于您希望页面位于何处：分别是全局或每个项目。

一个简单的 RootAction：

```
package my.package;

@Extension
public class MyNewPage implements hudson.model.RootAction
{

    @Override
    public String getDisplayName()
    {
        return "My Custom Page";
    }

    @Override
    public String getIconFileName()
    {
        return (Jenkins.RESOURCE_PATH + "/images/48x48/terminal.png").replaceFirst("^/", "");
    }

    @Override
    public String getUrlName()
    {
        return "my-url"; // the url path
    }
} 
```

接下来，添加一个关联的果冻文件位于`src/main/resources/my/package/MyNewPage/index.jelly`

```
<?jelly escape-by-default='true'?>
<j:jelly xmlns:j="jelly:core" xmlns:st="jelly:stapler" xmlns:d="jelly:define"
    xmlns:l="/lib/layout" xmlns:t="/lib/hudson" xmlns:f="/lib/form">
    <l:layout norefresh="true">
        <l:header title="My New Page" />
        <l:main-panel>
            <h1>Put content here</h1>
        </l:main-panel>
    </l:layout>
</j:jelly> 
```

有关更多标签，请参阅[jenkins jelly 标签参考](http://reports.jenkins.io/core-taglib/jelly-taglib-ref.html)。请注意，该`l:layout`标签是完全可选的，您根本不必使用 jenkins 标签，而是可以在果冻中转储静态 HTML 内容

然后，这两个文件将用于呈现对[http://localhost:8080/jenkins/my-url 的请求](http://localhost:8080/jenkins/my-url)

或者，对于完全动态的内容，使用jenkins 内置的[订书机库来呈现任意 url。](https://stapler.kohsuke.org/)这是一个打印 url 的愚蠢的小例子：

```
public void doDynamic(StaplerRequest req, StaplerResponse resp) throws IOException
{
    resp.setStatus(418);
    resp.getOutputStream().print("I'm a teapot! You requested this path: " + req.getRestOfPath());
} 
```

只需将该方法或[任何订书机方法](https://stapler.kohsuke.org/reference.html)添加到 MyNewPage（或任何支持它的扩展）。它将响应下的所有网址`http://localhost:8080/jenkins/my-url/*`

我发现的其他一些很好的参考资料：

*   [如何使用新链接和图标扩展 Jenkins 工作页面](https://stackoverflow.com/questions/24589199/how-to-extend-jenkins-job-page-with-new-links-and-icons)
*   [build-failure-analyzer 插件源](https://github.com/jenkinsci/build-failure-analyzer-plugin/)，特别是[CauseManagement.java](https://github.com/jenkinsci/build-failure-analyzer-plugin/blob/master/src/main/java/com/sonyericsson/jenkins/plugins/bfa/CauseManagement.java)

# objective-c - 为什么不总是在一个块中使用weakSelf？

> ID：14587884
> 
> 赞同：7
> 
> 时间：2013-01-29T16:46:47.227
> 
> 标签：objective-c, objective-c-blocks

我明白为什么我们会在一个块中使用weakSelf，只是没有那么多。

我正在将代码库转换为 ARC，它会给出很多带有块的保留周期警告。从我收集的文档中，我需要更改它：

```
[self.selectedAsset addToFavoritesWithCompletion:^(NSError *error) {
    self.selectedAsset.isFavorite = YES;
    [self updateIsFavoriteButton];
}]; 
```

对此：

```
__weak MyViewController* weakSelf = self;
[self.selectedAsset addToFavoritesWithCompletion:^(NSError *error) {
    self.selectedAsset.isFavorite = YES;
    [weakSelf updateIsFavoriteButton];
}]; 
```

使编译器满意并避免保留循环。我的问题是为什么不需要更改线路：

```
self.selectedAsset.isFavorite = YES; 
```

使用弱自我？它不也评估为方法调用吗？为什么编译器不警告这种格式的行？

```
[[self selectedAsset]setIsFavorite:YES]; 
```

编辑：我刚刚更新到 XCode 4.6，现在它会针对这种情况生成编译器警告。有趣的时机:)

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-01-29T19:47:58.523

> 我的问题是为什么不需要更改线路：
> 
> `self.selectedAsset.isFavorite = YES;`使用`weakSelf`？它不也评估为方法调用吗？为什么编译器不警告这种格式的行？
> 
> `[[self selectedAsset]setIsFavorite:YES];`

是的，这正是一个方法调用。它确实引起了对`self`. `weakSelf`如果您希望它不保留，则有必要将其更改为`self`.

编译器警告不会捕获所有内容。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2016-08-08T22:39:05.653

```
__weak MyViewController* weakSelf = self;
[self.selectedAsset addToFavoritesWithCompletion:^(NSError *error) {
    self.selectedAsset.isFavorite = YES;
    [weakSelf updateIsFavoriteButton];
}]; 
```

确实很愚蠢。完成块引用了 self 两次，这将创建一个强引用。它仍然引用 self 一次，这仍然创建一个强引用。如果您也使用强引用，那么弱引用毫无意义。这应该是

```
__weak MyViewController* weakSelf = self;
[self.selectedAsset addToFavoritesWithCompletion:^(NSError *error) {
    weakSelf.selectedAsset.isFavorite = YES;
    [weakSelf updateIsFavoriteButton];
}]; 
```

或更好（因为更安全）

```
__weak typeof (self) weakSelf = self;
[self.selectedAsset addToFavoritesWithCompletion:^(NSError *error) {
    typeof (self) strongSelf = weakSelf;
    strongSelf.selectedAsset.isFavorite = YES;
    [strongSelf updateIsFavoriteButton];
}]; 
```

# java - java命令行参数使jar在两个目录中查找文件？

> ID：14587888
> 
> 赞同：1
> 
> 时间：2013-01-29T16:46:58.640
> 
> 标签：java

我有一个 jar 文件，我没有源代码但想使用它。

jar 文件提示要读取的文件并使用输入文件和它用于数据的许多“帮助”文件的组合生成输出文件。如果从其预期的主目录运行，它工作得非常好，但我正在尝试编写一个脚本，允许从任何地方运行 jar。

问题是，如果我尝试从其主目录以外的任何地方运行 jar 文件，它将无法找到正确生成其数据所需的支持文件。

如果我从其预期的主目录运行该文件，我必须提供输入文件的完整地址，否则它将找不到它。我希望能够只提供相对路径，并且 Java 知道查看调用我的脚本的人所在的任何目录。

有没有一种方法可以让 bash 脚本将命令行参数传递给 Java，以确保该 jar 在尝试时查看两个相关目录（帮助文件的目录和调用脚本的人的当前目录）解析相对文件路径？类似`-classpath`论点的东西？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:16:21.820

使用`--classpath`（或`-cp`），您可以告诉您的 Java 程序应该将依赖类放在哪里。所以，如果你喜欢在你的*文件目录中*

```
$JAVA_HOME/bin/java -cp '.:/path/to/the/original/program' My.class myfile.txt 
```

然后它将缠绕程序，并找到您的文件。

**更新**

如果它不起作用，您可以尝试以其他方式强制加载文件。Javadoc 说：

> 默认情况下，`java.io`包中的类总是根据当前用户目录解析相对路径名。此目录由系统属性命名，`user.dir`通常是调用 Java 虚拟机的目录。

因此，您可以尝试以这种方式*从原始目录*运行程序：

```
$JAVA_HOME/bin/java -Duser.dir=/path/to/the/files/directory My.class myfile.txt 
```

**更新2**：

正如我在评论中所写，您可以尝试`symlinks`. *在原目录中*执行以下命令：

```
ln -s /path/to/the/files/directory datafiles

$JAVA_HOME/bin/java My.class datafiles/myfile.txt 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T16:56:30.473

**对不起 - 忽略。我错过了你问题的第一行。**

* * *

您可以将这两个路径作为参数传递给 jar 文件 - 然后在运行时附加路径位置。有很多方法可以做到这一点，这里有一个：

```
java -DdirectoryA="/somewhere" -DdirectoryB="/elsewhere" -jar program.jar 
```

在你的代码中

```
String pathA = System.getProperty("directoryA"); 
```

# ruby-on-rails - 如何缩小rails erb文件中的javascript部分？

> ID：14587890
> 
> 赞同：5
> 
> 时间：2013-01-29T16:47:13.103
> 
> 标签：ruby-on-rails, ruby

由于控制器变量动态呈现了一些 javascript，因此该应用程序未使用标准资产管道。

我想在将 js 附加/内联到将要从中提供的 html 文件中之前缩小 js。

我已经尝试过`<render :partial => 'javascript.js'>`这是在 erb 中呈现部分的标准方法。

理想情况下，我只能 `<render :partial => Minify.new.minify('javascript.js')>`渲染出 js 的缩小版本

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-01-29T17:55:08.300

您可以尝试使用 uglifier gem ( [http://rubygems.org/gems/uglifier](http://rubygems.org/gems/uglifier) )，我不知道性能如何，但您可以执行以下操作：

```
<script type="text/javascript">
  <%= raw Uglifier.new.compile(render "your_js_in_a_partial.js") %>
<script> 
```

# symfony - Knp Snappy 捆绑包选项

> ID：14587894
> 
> 赞同：9
> 
> 时间：2013-01-29T16:47:35.820
> 
> 标签：symfony, wkhtmltopdf

我正在为我的 Symfony 项目使用[KnpSnappyBundle](https://packagist.org/packages/knplabs/knp-snappy-bundle)，并且我正在尝试在我的配置文件中定义一些选项。但是，如果我设置，例如：

```
knp_snappy:
    pdf:
        enabled:    true
        binary:     /usr/local/bin/wkhtmltopdf
        options:    [ 'no-outline' ] 
```

我收到一个错误： `The option '0' does not exist.`

如何定义捆绑包的选项？

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2013-01-30T10:00:37.353

嗯，我有点傻。YAML 回答：

```
knp_snappy:
    pdf:
        enabled:    true
        binary:     /usr/local/bin/wkhtmltopdf
        options:
            no-outline: true 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-03-29T17:20:01.113

答案是：

```
knp_snappy:
    pdf:
        enabled: true
        binary: /path/to/wkhtmltopdf
        options:
            - { name: 'page-size', value: 'A4' } 
```

# facebook - 为什么我看不到“经过身份验证的推荐”单选按钮

> ID：14587904
> 
> 赞同：1
> 
> 时间：2013-01-29T16:48:02.070
> 
> 标签：facebook

为什么我在应用程序设置的权限页面上看不到“经过身份验证的推荐”单选按钮。

有正常应用： ![正常应用](../Images/504e33c4ca2b73dd83abe4b27b02acbf.png)

这是我的申请 ![在此处输入图像描述](../Images/235a6ec2b072c1635132e68a4f5cb3fa.png)

# postgresql - Postgres：在特定范围内的表中获取下一个空闲 id（不使用序列）

> ID：14587906
> 
> 赞同：5
> 
> 时间：2013-01-29T16:48:08.203
> 
> 标签：postgresql

我有一张桌子`t_user`：

```
CREATE TABLE t_user
(
  c_id bigint NOT NULL,
  c_lastname character varying(255)
) 
```

该表*没有*使用任何序列来生成 ID，而是在 Postgres 之外计算这些（不要问，也不关心这可能导致的问题）。现在我需要知道并填补从 0 到 1000 范围内的一些“漏洞”。

是否可以制定一个 Postgres 查询，为我提供该表中所有未使用的 ID，范围从 0 到 1000？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T17:00:14.333

这是使用 [generate_series](http://www.postgresql.org/docs/current/static/functions-srf.html)和外连接的经典案例：

```
SELECT i FROM t_user RIGHT JOIN generate_series(0,1000) as i ON (c_id=i)
 WHERE c_id is null; 
```

# django - Django反向逆

> ID：14587908
> 
> 赞同：1
> 
> 时间：2013-01-29T16:48:28.067
> 
> 标签：django, unit-testing, django-views, django-urls, django-unittest

Django 有逆向方法`django.core.urlresolvers.reverse()`吗？

我想要一个`f(x)`这样的功能`f(django.core.urlresolvers.reverse('shadowfax')) == 'shadowfax'`。

有人对这是否是为调用的方法编写单元测试的正确方法有什么要说的`.reverse()`吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T17:00:20.107

大概是震惊：

```
django.core.urlresolvers.resolve( "/test" ).url_name 
```

这是使用它的完美方式，甚至在文档中推荐：

[https://docs.djangoproject.com/en/dev/ref/urlresolvers/](https://docs.djangoproject.com/en/dev/ref/urlresolvers/)

# java - 为什么可以在通过 Java 中的方法定义静态字段之前访问它？

> ID：14587910
> 
> 赞同：16
> 
> 时间：2013-01-29T16:48:37.133
> 
> 标签：java

我遇到了一件有趣的事情：

```
static {
    System.out.println(test);     // error cannot reference a field before it is defined
    System.out.println(cheat());  // OK! 
}

private static boolean cheat() {
    return test;
}

private static boolean test = true;

public static void main(String args[]) {} 
```

第一种方法是错误的，您的编译器和 IDE 都会告诉您它是错误的。在第二种情况下，作弊是可以的，但它实际上将字段默认`test`为`false`. 使用 Sun JDK 6。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-01-29T16:54:00.670

这是在[JLS 8.3.2.3](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#jls-8.3.2.3)中定义的。尤其：

> 如果使用发生在 C 的 [...] 静态初始化程序中，则成员的声明需要在使用之前以文本形式出现 [...]。

当您打电话时，`cheat()`您会绕过该规则。这实际上是该部分[示例列表中的](http://docs.oracle.com/javase/specs/jls/se7/html/jls-8.html#d5e10466)第 5 个示例。

请注意，这`cheat()`将在静态初始化程序块中返回 false，因为`test`尚未初始化。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-29T16:55:56.390

因为类加载按以下顺序工作：

*   加载类定义（方法、签名）
*   为静态变量引用（for `test`）分配内存 - 尚未初始化
*   执行`static`初始化程序（用于变量）和`static`块 - 按它们定义的顺序

因此，当您到达`static`块时，您已经准备好方法定义，但没有准备好变量。`cheat()`你实际上是在读取一个未初始化的值。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T17:14:24.280

这是类加载发生的一般步骤。

1.  加载 - 将类加载到内存
2.  验证 - 检查 e 类的二进制表示是否正确
3.  准备 - 为类创建静态字段并将这些字段初始化为其标准默认值。
4.  初始化 - 将为静态字段调用静态初始化器和初始化器

准备好后，您的测试将是假的。然后在您将静态变量分配为真之前，您的静态块将执行。这就是您得到假的原因。

尝试将静态变量设为最终变量。在这种情况下，您将得到真实的结果。这是因为您的编译器本身会将值嵌入字节码中（因为该字段是最终的）作为优化的一部分

# javascript - 在 Android 和 iPhone 的 JS 中的链接标签上触发点击事件

> ID：14587917
> 
> 赞同：6
> 
> 时间：2013-01-29T16:48:55.413
> 
> 标签：javascript, android, iphone, extjs, sencha-touch-2

我正在使用 Sencha Touch (JavaScript & ExtJS) 开发移动 Web 应用程序。我有一个链接标签（只是`<a>`带有 的标签`href`），我需要`click`在其上触发事件。
我发现了`myelement.dom.click();`做这项工作的呼吁，但它不适用于 Android ......有没有某种通用解决方案？

更新

我有一个带有 html 代码的容器：

```
<a href="http://google.com" id="link_to_click" target="_blank">CLICK ME</a> 
```

**我需要仅使用纯JavaScript**和**ExtJS**模拟单击​​此链接。该链接必须在新窗口/标签中打开。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-02-03T03:52:05.903

使用`HTMLEvents`对象`document.createEvent()`来模拟对链接的点击。

```
var link = document.getElementById( 'link_to_click' ),
    event = document.createEvent( 'HTMLEvents' );

event.initEvent( 'click', true, true );
link.dispatchEvent( event ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:23:58.220

//安卓

```
WebView wv = (WebView) findViewById(R.id.webview);
wv.getSettings().setJavaScriptEnabled(true); 
```

//javascript

```
function bindIcons() {

            jQuery("a.icons").bind('mouseover mouseout mousedown mouseup focus blur touchstart touchend', function (e){
              if (typeof console !== "undefined" ) console.log(e);
              if (e.type=='mouseover' || e.type=='focus') 
              {
                jQuery(e.currentTarget).toggleClass('over',true);
              }

              if (e.type=='mousedown' || e.type=='touchstart') 
              {
                jQuery(e.currentTarget).toggleClass('down',true);
              }

              if (e.type=='mouseout' || e.type=='mouseup' || e.type=='touchend' || e.type=='blur') 
              {
                jQuery(e.currentTarget).toggleClass('down',false);
                jQuery(e.currentTarget).toggleClass('over',false);
              }
            });

            if (isAndroid())
               jQuery("a.ifandroid").attr("href","javascript:ifAndroid();");
            else
               jQuery("a.ifandroid").toggleClass('ifandroid',false);

      } 
```

# python - 传递 Python 对象时，Objective-C 中的 Python-C Api 包装器因调用 __getattr__ 而崩溃

> ID：14587919
> 
> 赞同：5
> 
> 时间：2013-01-29T16:48:57.053
> 
> 标签：python, ios, objective-c, c, cpython

我正在用 Objective-C 编写一个轻量级接口，该接口能够执行 python 脚本并在 Objective-C 和 Python 之间来回传递数据。我已经研究了 PyObjC 和 ObjP，但我都不是我想要的（因为我正在为 iOS <= 6.0.1 开发 PyObjC 不会编译对 NSMapTable 的大量使用）。

所以基本上我在 Objective-C 中创建了一个名为“ObjC_Class”的 Python 类型（创意，不是吗？），我希望这个 Python 对象几乎类似于 ObjC 对象。所以我决定重写类的**__getattr __****函数***，这样我就可以访问该类的 ObjC 等价物的任意方法和属性***。****

 *这是代码：

```
static PyObject * ObjC_Class_getattro(ObjC_Class *self, PyObject *name)
{
    NSString *attrName = [NSString stringWithCString:PyString_AsString(name) encoding:NSUTF8StringEncoding];

    NSLog(@"Calling Object: %@", self->object);
    if([self->object respondsToSelector:NSSelectorFromString(attrName)])
    {
        methodName = attrName;
        //PyObject* (*fpFunc)(PyObject*,PyObject*) = ObjC_Class_msg_send;
        PyMethodDef methd = {[attrName UTF8String],ObjC_Class_msg_send,METH_VARARGS,[attrName UTF8String]};
        PyObject* pyName = PyString_FromString(methd.ml_name);
        PyObject* pyfoo = PyCFunction_NewEx(&methd,(PyObject*)self,pyName);
        Py_DECREF(name);

        return pyfoo;
    }
    else
    {
        return name;
    }
} 
```

现在，当我说：

**示例 #1**

```
from ObjC import ObjC_Class
new = ObjC_Class('UIView')
new.backgroundColor("asdf", 42, "some_random_string") # This does not crash 
```

但是当我运行时：

**示例 #2**

```
from ObjC import ObjC_Class
new = ObjC_Class('UIView')
moreStuff = "some_random_string" # or "42" or [1,2,3] or anything else...
new.backgroundColor("asdf", 42, moreStuff) # !!! This does crash 
```

它崩溃说：

```
error: address doesn't contain a section that points to a section in a object file 
```

当我尝试调用不存在的函数时，我看到了这个错误，但我无法想象为什么第一个会起作用，而第二个不会。

下面是 ObjC_Class_msg_send 函数的实现：

```
static PyObject* ObjC_Class_msg_send(PyObject *self, PyObject *args)
{
    NSLog(@"Entering...");
    NSMutableArray *tmp = [[NSMutableArray alloc] init];
    for(int i=0;i<PyTuple_Size(args);i++)
    {
        [tmp addObject:Py_to_ObjC(PyTuple_GetItem(args, i))];
    }
    NSLog(@"Object: %@, Method Name: %@, args: %@", ((ObjC_Class*)self)->object, methodName, tmp);
    methodName = @"";
    return PyString_FromString("Did it actually work!?!?!");
} 
```

当我运行将 python 变量传递给函数的示例时，它在 ObjC_Class_msg_send 甚至被调用之前崩溃（但在 ObjC_Class_getattro 返回其值之后）。

（哦，请原谅草率的代码......在为这个项目分配太多时间之前，我正在努力运行一个简单的概念验证）

我没有提到的事情：我的 ObjC_Class 有一个名为“object”的元素，它的类型为“id”，它存储了对 Python 对象所代表的 Objective-C 对象的引用......

再补充一点：我正在链接 Python 2.6(.3?)，它主要是静态链接的

**更新** 我已经设法通过~~将 fpFunc 定义为静态~~删除 fpFunc 来让它停止崩溃......我什至不知道为什么我把它放在那里（愚蠢的复制+粘贴......）：

```
static PyObject * ObjC_Class_getattro(ObjC_Class *self, PyObject *name)
{
    NSString *attrName = [NSString stringWithCString:PyString_AsString(name) encoding:NSUTF8StringEncoding];

    NSLog(@"Calling Object: %@", self->object);
    if([self->object respondsToSelector:NSSelectorFromString(attrName)])
    {
        methodName = attrName;
        //static PyObject* (*fpFunc)(PyObject*,PyObject*) = ObjC_Class_msg_send; // static now
        PyMethodDef methd = {[attrName UTF8String],ObjC_Class_msg_send,METH_VARARGS,[attrName UTF8String]};
        PyObject* pyName = PyString_FromString(methd.ml_name);
        PyObject* pyfoo = PyCFunction_NewEx(&methd,(PyObject*)self,pyName);
        Py_DECREF(name);

        return pyfoo;
    }
    else
    {
        return name;
    }
} 
```

但是......现在Python抛出错误（当我将python变量作为参数传递时，即：上面的示例＃2）：

```
SystemError: Objects/methodobject.c:120: bad argument to internal function 
```

:(我以前从未见过这个...

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-01-29T18:45:11.293

嗯，这很尴尬......我发现了这个问题（以防其他人遇到同样的问题）。我通过python源跟踪错误并注意到这里抛出了错误：

```
PyObject *
PyCFunction_Call(PyObject *func, PyObject *arg, PyObject *kw)
{
    PyCFunctionObject* f = (PyCFunctionObject*)func;
    PyCFunction meth = PyCFunction_GET_FUNCTION(func);
    PyObject *self = PyCFunction_GET_SELF(func);
    Py_ssize_t size;

    switch (PyCFunction_GET_FLAGS(func) & ~(METH_CLASS | METH_STATIC | METH_COEXIST)) {
    case METH_VARARGS:
        if (kw == NULL || PyDict_Size(kw) == 0)
            return (*meth)(self, arg);
        break;
    case METH_VARARGS | METH_KEYWORDS:
    case METH_OLDARGS | METH_KEYWORDS:
        return (*(PyCFunctionWithKeywords)meth)(self, arg, kw);
    case METH_NOARGS:
        if (kw == NULL || PyDict_Size(kw) == 0) {
            size = PyTuple_GET_SIZE(arg);
            if (size == 0)
                return (*meth)(self, NULL);
            PyErr_Format(PyExc_TypeError,
                "%.200s() takes no arguments (%zd given)",
                f->m_ml->ml_name, size);
            return NULL;
        }
        break;
    case METH_O:
        if (kw == NULL || PyDict_Size(kw) == 0) {
            size = PyTuple_GET_SIZE(arg);
            if (size == 1)
                return (*meth)(self, PyTuple_GET_ITEM(arg, 0));
            PyErr_Format(PyExc_TypeError,
                "%.200s() takes exactly one argument (%zd given)",
                f->m_ml->ml_name, size);
            return NULL;
        }
        break;
    case METH_OLDARGS:
        /* the really old style */
        if (kw == NULL || PyDict_Size(kw) == 0) {
            size = PyTuple_GET_SIZE(arg);
            if (size == 1)
                arg = PyTuple_GET_ITEM(arg, 0);
            else if (size == 0)
                arg = NULL;
            return (*meth)(self, arg);
        }
        break;
    default:
        PyErr_BadInternalCall();
        return NULL;
    }
    PyErr_Format(PyExc_TypeError, "%.200s() takes no keyword arguments",
             f->m_ml->ml_name);
    return NULL;
} 
```

所以我想，“也许我的 PyMethodDef 方法在 Python 看到它时超出了范围（或其他东西）”（如果 Python 对包含变量参数的函数进行不同的处理，而不是对具有 const 参数的函数进行不同的处理导致前者被延迟到管道的某个地方......）。

因此，我将方法从函数中取出并将其声明为静态（这听起来很熟悉……），瞧！它工作得很好。这是更新的代码：

```
static PyMethodDef methd = {"blah",ObjC_Class_msg_send,METH_VARARGS,"blech"};

static PyObject * ObjC_Class_getattro(ObjC_Class *self, PyObject *name)
{
    NSString *attrName = [NSString stringWithCString:PyString_AsString(name) encoding:NSUTF8StringEncoding];

    NSLog(@"Calling Object: %@", self->object);
    if([self->object respondsToSelector:NSSelectorFromString(attrName)])
    {
        methodName = attrName;
        PyObject* pyName = PyString_FromString(methd.ml_name);
        PyObject* pyfoo = PyCFunction_NewEx(&methd,(PyObject*)self,pyName);
        Py_DECREF(name);

        return pyfoo;
    }
    else
    {
        return name;
    }
} 
```

现在，请原谅我，我要去学习“静态”。*

# php - 为什么不能将我的对象实例化为数组 []？

> ID：14587928
> 
> 赞同：1
> 
> 时间：2013-01-29T16:49:26.793
> 
> 标签：php, arrays, class, instantiation

为什么不能将我的对象初始化为数组 []？

这是我的工作：clothing_product.php

```
include('../database.php');

class Clothing_Product {

    public $db;
    public $procode;
    public $probprice;
    public $proprice;
    public $prodes;
    public $propath;
    public $prostatus;
    public $image;

        public function __construct() { 
            $this->db = new MySqlDatabase();
        }

                    public function get_all(){
            return self::get_by_query('SELECT * FROM tblclothing_product;');
        }

        public function get_by_query($sql=""){
            $result_set = $this->db->query($sql);
            $object_array = array();
            while($row = $this->db->fect_array($result_set)){

                $object_array[] = $this->instantiate($row);
                echo var_dump($object_array);
            }
            return $object_array;
        }

        private function instantiate($record){
            //Dynamic control
            $object = new self;
            foreach($record as $attribute=>$value){
                if($object->has_attribute($attribute)){
                    $object->attribute = $value;
                }
            }
            return $object;
        }       

        private function has_attribute($attribute){
            $object_vars = get_object_vars($this);
            return array_key_exists($attribute,$object_vars); 
        }

                    public function add_new($a,$b,$c,$d,$e,$f){
            $this->procode = $a;
            $this->probprice = $b;
            $this->proprice = $c;
            $this->prodes = $d;
            $this->propath = $e;
            $this->prostatus = $f;
            $sql="INSERT INTO `tblclothing_product`(`proCode`,`proBPrice`,`proPrice`,`proDes`,`proPath`,`proStatus`) VALUES(
                                            '" . $a ."',
                                            '" . $b ."',
                                            '" . $c ."',
                                            '" . $d ."',
                                            '" . $e ."',
                                            " . $f ."
                                            )";
            $this->db->query($sql);

        }

        public function image_string($a,$b,$c,$d,$e){

            $this->image='';
            if($a!=""){
                $this->image = $this->image. $a .";";
            }
            if($b!=""){
                $this->image = $this->image. $b .";";
            }
            if($c!=""){
                $this->image = $this->image. $c .";";
            }
            if($d!=""){
                $this->image = $this->image. $d .";";
            }
            if($e!=""){
                $this->image = $this->image. $e;
            }

            return $this->image;
        }

        public function remove_by_id($id){
            $this->db->query('DELETE FROM tblclothing_product WHERE proId={$id};');
        }

        public function get_by_id($id=0){
            $result_array = self::get_by_query('SELECT * FROM tblclothing_product WHERE proId={$id} LIMIT 1;');
            return !empty($result_array) ? array_shift($result_array) : FALSE;
        }

        public function image_exploit_string(){
            $arr = array();
            if($this->image != ""){
                $arr = explode(";",$this->image);
            }

            return $arr;

        }   

    } 
```

我尝试回显上面的脚本 var_dump($object_array) 我的数组，它对每个对象都显示为空。看起来它根本无法启动。

在clothing_view.php 中，它是一个用于查看我的对象数组的脚本，但它显示为空。

```
require_once("../include/function.php");
require_once("../include/database.php");

$buttonname = $_POST["submit"];

$image1 = '';
$image2 = '';
$image3 = '';
$image4 = '';
$image5 = '';
$image1 = $_FILES['image1']['name'];
$image2 = $_FILES["image2"]['name'];
$image3 = $_FILES["image3"]['name'];
$image4 = $_FILES["image4"]['name'];
$image5 = $_FILES["image5"]['name'];

    $obj = new Clothing_Product();
$items =  $obj->get_all();

foreach($items as $item){
    echo "ProId:".$item->procode."<br />";
    echo "ProPath:".$item->propath."<br />";
} 
```

在 database.php 中：

require_once('config.php');

```
class MySqlDatabase
{
    private $connection;
    private $last_query;
    private $magic_quotes_active;
    private $real_escape_string_exist;

        function __construct(){

            $this->open_connection();
            $this->magic_quotes_active = get_magic_quotes_gpc();
            $this->real_escape_string_exist = function_exists("mysql_real_escape_string");

        }

        private function open_connection()
        {

            $this->connection = mysql_connect(DB_SERVER,DB_USER,DB_PASS);
            if (!$this->connection){
                die("Connection failed!". mysql_error());
            }
            else{
                $db_select = mysql_select_db(DB_NAME);
                if(!$db_select){
                    die("Select database failed". mysql_error());
                }
            }

        }

        public function query($sql){

            $this->last_query = $sql;
            $result = mysql_query($sql,$this->connection);

            $this->confirm_query($result);
            return $result;

        }

        public function confirm_query($result){
            if(!$result){
                $output = "Database query failed: " . mysql_error()."<br /><br />";
                $output.= "Last query that fail is:" . $this->last_query;
                die($output);
            }
        }

        private function escape_value($value) {

            if ($this->real_escape_string_exist) {
                if($this->magic_quotes_active) {$value = stripslashes($value);}
                $value = mysql_real_escape_string($value);
            }
            else {
                if (!$this->magic_quotes_active) {$value = addslashes($value);}
            }
            return $value;
        }

        public function fect_array($result){
            return mysql_fetch_array($result);
        }

        public function num_rows($result){
            return mysql_num_rows($result);
        }

        public function last_id(){
            return mysql_insert_id($this->connection);
        }

        public function affected_rows(){
            return mysql_affected_rows($this->connection);
        }

        public function close_connection(){
            if(isset($this->connection)){
                mysql_close($this->connection);
                unset($this->connection);
            }
        }

} 
```

$item-> 有问题吗？它总是返回 null。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:59:16.977

据我所知，`self::get_by_query`永远不会工作，因为它没有被定义为`static`函数。

选择。1-您可以这样定义：`public static function get_by_query`
选择。2-你可以这样称呼它：`$this->get_by_query`

PS：`var_dump`不需要`echo`。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-01-29T17:33:50.210

我认为您的问题是您在`instantiate`函数中设置了对象属性

```
$object->attribute = $value; 
```

而不是可能更有用的

```
$object->{$attribute} = $value; 
```

即使它不能立即解决您的问题，这也可能会让您稍后拉扯头发……

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-29T17:45:01.033

最后，我得到了你想要做的事情。如果你需要 db 结果作为对象（类似 ORM），你可以为此使用另一个类（只是一个建议）。

伪;

```
// Let's call another class as CProduct
class CProduct
{
    public $procode, $probprice,
           $proprice, $prodes,
           $propath, $prostatus,
           $image;

    public function __construct($row) {
        foreach ($row as $key => $val) {
            if ($this->_hasAttr($key)) {
                $this->$key = $val;
            }
        }
    }

    private function _hasAttr($key) {
        return array_key_exists($key, get_class_vars($this));
    }

    // you can also extend your class here
    // and use it anywhere
    public function printCode() {
        print $this->procode;
    }
} 
```

并在您的情况下使用；

```
while ($row = $this->db->fect_array($result_set)) {
    $object_array[] = new CProduct($row);
} 
```

html部分；

```
<p>Product Code: <?php $cp->printCode(); ?></p> 
```

# html - 编辑 Facebook 分享标题和描述

> ID：14587936
> 
> 赞同：0
> 
> 时间：2013-01-29T16:49:41.733
> 
> 标签：html, facebook, share, facebook-sharer

当您在 Facebook 墙上分享特定链接时，如何编辑网站中特定链接的标题和描述？例如，我的网站中有一个链接可以在新选项卡中打开一个 pdf 文件，我将链接复制并粘贴到我的 facebook 墙上，但标题和描述显示了该链接。我知道我们使用`<meta property="og:title" content="title">`和所有其他元属性，但是我们如何在我们网站的特定链接中使用它？例如，喜欢在我的网站中打开 pdf 文件的 facebook 中共享链接？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:59:09.543

去看看这里：

[http://www.daddydesign.com/wordpress/how-to-create-a-custom-facebook-share-button-for-your-iframe-tab/](http://www.daddydesign.com/wordpress/how-to-create-a-custom-facebook-share-button-for-your-iframe-tab/)

希望它会有所帮助！

# asp.net-mvc - MVC 中的存储库

> ID：14587940
> 
> 赞同：0
> 
> 时间：2013-01-29T16:49:52.927
> 
> 标签：asp.net-mvc, model-view-controller, repository-pattern

我有一个 dbml 文件，其中包含已拖出的存储过程。我有一个`EmployeeModel`具有`get`和`set`属性的类。

我有一个接口`IEmployee`和一个`EmployeeRepository`实现方法的存储库。请参考代码。在`GetRoles`我刚刚拥有的存储过程中`SELECT * FROM ROLE`。

在存储库中，如何循环遍历结果集？我可以在 dbml 设计器文件中更改`ISingleResult`为吗？`IMultipleResult`

```
 EmployeeModel.cs:

using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;

namespace MvcWebsite.Models
{
    public class EmployeeModel
    {
        public int RoleId { get; set; }
        public string RoleName { get; set; }
        public string Description { get; set; }
        public string TaskMark { get; set; }
        public int RoleFlag { get; set; }
    }
}

 IEmployee:

  using System;
  using System.Collections.Generic;
  using System.Linq;
  using System.Text;
  using MvcWebsite.Models;

  namespace MvcWebsite.DAL
  {
    public interface IEmployees
    {
        IList<EmployeeModel> ListAll();
        // void Save(EmployeeModel employ);
    }
  }

  EmployeeRepository.cs:

  using System;
  using System.Collections.Generic;
  using System.Linq;
  using System.Web;
  using MvcWebsite.Models;
  using System.Data.Linq;

  namespace MvcWebsite.DAL
  {
    public class EmployeeRepository:IEmployees
    {

        private DataDataContext _dataContext;

        public EmployeeRepository()
        {
            _dataContext = new DataDataContext();
        }

        public IList<EmployeeModel> ListAll()
        {
            //IMultipleResults result =_dataContext.GetRoleDetails();
            //var Emps = result.GetResult(EmployeeModel);
            List<EmployeeModel> emp = _dataContext.GetRoleDetails();
            // foreach (GetRoleDetailsResult role in Emps)
            // {
            // role.Description=Emps.

            // }
            return Emps.ToList();

        }
     }
 } 
```

错误：

> 错误 1 ​​无法将类型“System.Collections.Generic.List”隐式转换为“System.Collections.Generic.IList”。存在显式转换（您是否缺少演员表？） C:\Users\guhananth\documents\visual studio 2010\Projects\MVC_SP\MvcWebsite\DAL\EmployeeRepository.cs 44 19 MvcWebsite

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-02-05T06:39:04.823

通常你会使用：

```
List<EmployeeModel> emp = _dataContext.Employees.ToList(); 
```

您可以在此处阅读有关存储库模式的实体框架实现：http: [//blog.gauffin.org/2013/01/repository-pattern-done-right/](http://blog.gauffin.org/2013/01/repository-pattern-done-right/)

# vb.net - 将数据表中的标识列设置回 0（包含在未链接到数据库的 DS 中）

> ID：14587941
> 
> 赞同：0
> 
> 时间：2013-01-29T16:49:53.197
> 
> 标签：vb.net, datagridview, datatable

我正在使用 VB.Net 和 VS 2012。我有一个包含几个数据表的数据集。其中一个数据表有一个以 1 递增并以种子 0 开头的标识列。用户流程如下所示：

1.  用户打开表单
2.  表单显示datatable1，包括标识列
3.  用户隐藏表单，datatable2被清空处理
4.  用户重新打开表单，重新填充数据表，但标识列现在从之前停止的位置开始

我需要确保每次清除表时，标识列都会从 0 重新开始。我该怎么做？

编辑：这是数据表/数据集的一些背景知识。该数据集有一个包含 4 列的数据表。一个是种子为 0 的列，递增 1。称为 identitycol。数据集没有连接到数据库，这是它的填充方式：

```
 dsVW_BCL_DATA = GlobalVariables.acctInit.BCL_Data(GlobalVariables.intJudgeID, GlobalVariables.AppearanceDate) 'Pull data to a generic created dataset
    ChgltrDataSet.gridsource.Clear() 'clear table in project dataset (chgltrdataset)
    ChgltrDataSet.gridsource_backup.Clear() 'clear backup table in project dataset
    'MUST RESET IDENTITYCOL TO 0 'This is where I feel I should reset the identitycol
    ChgltrDataSet.gridsource.Merge(dsVW_BCL_DATA.Tables(0)) 'Merge existing table gridsource with generic created dataset
    frmFinBatchChrg2.gridFinancial.DataSource = Me.ChgltrDataSet.gridsource 'Set datasource 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-23T00:43:28.767

我知道我回答这个问题为时已晚，但我刚刚用我的项目解决了同样的问题，所以有人可能会觉得它很有用。

此问题与DataSet 中的Identity 机制实现有关。为了正确重置数据表中的标识列，您必须按照特定顺序进行操作。以下代码解决了我的问题：

```
 myDataSet.Clear()
    myDataSet.myDataTable.Columns("ID").AutoIncrementStep = -1
    myDataSet.myDataTable.Columns("ID").AutoIncrementSeed = -1
    myDataSet.myDataTable.Columns("ID").AutoIncrementStep = 1
    myDataSet.myDataTable.Columns("ID").AutoIncrementSeed = 1 

    'Note: "ID" is the column name in the DataTable 
```

如您所见，命令的顺序非常重要。首先，我们将列的 AutoIncrementStep 属性设置为 -1，然后将 AutoIncrementSeed 属性设置为 -1。之后，我们将它们设置回我们想要的位置，但顺序相同。

希望这可以帮助

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-04T09:19:18.373

DBCC CHECKIDENT('', RESEED, 0)

这会从 1 重新播种身份列

# javascript - javascript - 如何在循环中调用闭包

> ID：14587948
> 
> 赞同：0
> 
> 时间：2013-01-29T16:50:08.740
> 
> 标签：javascript, loops, closures

> **可能重复：**
> [在循环中将函数传递给 setTimeout：总是最后一个值？](https://stackoverflow.com/questions/6425062/passing-functions-to-settimeout-in-a-loop-always-the-last-value)

我知道我需要使用闭包来处理问题，但我不确定如何；我有功能，我从服务器获取数据：

```
function loadGraph(chartDataStreams) { //length of chartDataStreams is two

  initCharts(); //init charts area
  for (c in chartDataStreams) {
    var chartData = [];
    alert(c); // says : 0, then 1
    getDataFromServer(chartDataStreams[c].x, chartDataStreams[c].y,function (data) {
       for (d in data.datapoints) {
         var item = { date: new Date(data.datapoints[d].at), value:data.datapoints[d].value };
         chartData.push(item);
        }
      alert(c); // says: 1 then 1
      updateGraphData(chartData); 

    });
  }
} 
```

在此函数中，我需要调用 updateGraphData，它使用 chartData 更新图形数据提供程序。问题是在 chartData 我不仅有实际数据，还有来自上一个循环周期的数据。我认为这是使用闭包的正确位置，但我不确定如何......你有什么想法吗？

//edit: 我错误地将chartData的声明放在了getDataFromServer函数之外，但我还有一个问题：检查编辑后的代码。从第二个警报我想说 0 和 1，而不仅仅是 1,1

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:57:01.303

`chartData`在回调中而不是在外部实例化。

```
function loadGraph(chartDataStreams) {
    initCharts();
    for (c in chartDataStreams) {
        getDataFromServer(chartDataStreams[c].x, chartDataStreams[c].y, function (data) {

            var chartData = []; // RIGHT HERE

            for (d in data.datapoints) {
                var item = {
                    date: new Date(data.datapoints[d].at),
                    value: data.datapoints[d].value
                };
                chartData.push(item);
            }
            updateGraphData(chartData);
        });
    }
 } 
```

这样，每个回调`chartData`在调用时都会获得自己的新数组。

块在 JavaScript 中不创建变量范围，仅创建函数，因此外部函数的`chartData`范围为外部函数，并在每次循环迭代时被覆盖。

它的最后一次覆盖是所有回调在最终调用时使用的内容，因此所有数据最终都在该共享数组中。

# python - 从base64代码保存图片

> ID：14587952
> 
> 赞同：6
> 
> 时间：2013-01-29T16:50:32.340
> 
> 标签：python, django, base64

我想将此图片保存为base64，但是当我尝试这样做时，会出现以下错误：

```
Traceback (most recent call last):
  File "E:\Programs\Python\lib\site-packages\django\core\handlers\base.py", line
 116, in get_response
    response = callback(request, *callback_args, **callback_kwargs)
  File "E:\RSYearWork\ServerRS\Views\TestForAjaxView.py", line 27, in addAjax
    f.write(decodestring(request.POST['UplaodFile']))
  File "E:\Programs\Python\lib\base64.py", line 321, in decodestring
    return binascii.a2b_base64(s)
Error: Incorrect padding 
```

贝斯64：

这是由 base64 JavaScript 和 Filereader 生成的，与上传图像以生成代码时完全相同。我用 Ajax 发送了它。这个base64是自动生成的。

```
data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAACXBIWXMAA
AsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAl
EtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja
9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrI
sAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjA
FAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3A
MDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4oz
kkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAA
OF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXf
f5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41ESc
Y5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4
c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCC
mSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjj
ggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDu
ag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrx
hqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYY
jIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAry
IXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoE
zR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3G
K+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM
1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1g
TXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZ
VxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6Ubo
btEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ
6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1m
z0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rn
tZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6az
pzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60
vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt
6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+
Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHh
VeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5L
iquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCH
cJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQ
qohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7
cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0me
k1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0q
avEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkV
PRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtx
wPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0
x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753
GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca
7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3
YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/
suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/
2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAA
Bdvkl/FRgAAB45JREFUeNrEl0usXlUVx39r7X2+77uP3tsWgQawPKQVauQ1ICZGAolKcNAENAqJiUYmh
pExxmjiACNEnZnoxJGBkOjAhlci4ECDYIhEFA2mLRVKpS320t7b3sf3OGevtRycc3v7AEUcuJOdc3K+v
ff6fWv999prS0Tw/2wZ4ODrr298ERARBAEBTvMFIHj4LoIdQewgYrabdDIiDiAcqCf1qwtvLzAajTly5
AiHDh3iwIEDVFXF5du30zTN+QDvpXn4JyL4bNJ0a+7lq3POUyklJQJzt9KUYVOavcBvRGSPu//xvXj3P
wJExC0R8e3+YPDp6elpHfQHpJQQVURaF0WQwmNTsXLzeDy6eXZ29hvHjh178siRww9aKS+9X4DsZt/NV
fXNubn5PDU1haoiACLr0epiBpKEnlZUVcXs7GzesmXLnXNzc59Kqg/s3bfvhznn9wYgCASbLOyhmZmZO
+fn52knCyKCqnTvGwidF4DAPQBlMBhwxZVXzm69YOsP6qa55rnnnr9PREYpJc4MzXkAAQN3e2R206bdm
+c3o7puOJ1j9Bzs7reUWhh3Qxzm5ua5++57vqyi+emnn/7Klq1bmipXRKduPWsZEcLtwcFgsHtu01xrW
LQzLu9i/J1gWmDtQjU1NeCuu+764vbLt3/ntddeZ+nkEouLiywuLp4NEBGfVNGvzc7Ooiok1VZwIv/1/
hYRUkokbU3MzExz7733fmswGNx26tQpJuOayXjSAjReKF5yT6vvzc1s0pnBNP3cJ+V8WnDvq4mQcqaf+
2St2HnVjt7n7/zc/W8cOjQ4/PZRDi+81Wrg4b/uYa4/e/sVmy/72LYLLmabXIzm1G231qUiCsqGN+R88
XReBIcIJyIID8wML8bCyeP0ds7dUgZ++xsL/3g893IL8Oj+Z2YiuLum4cbLP8oNH/wIRRypFK0UzQnpd
c+sSAJJimhLER6EOWEQxfFiRN0+vXGicXIof37zFV5Z2M/qxXbP8sFTT+TpKjKAhV8nyG2alJFNWGnWi
ESbbFJCQ0lkRLTNBTl1AN2/dghxIgwXJ3AsCu5OmBHmiMHYagiYunL+4/z+8GVe25u58+ZNIrItp8xyv
cJqs4ZIQj0hnkgkFEdV0ZTQ5EgWpBNYuBME7oab4ThOwdwIN9yNaIzleoWE0r9o5tI0lXbZsLQACDtFJ
WlSlutVToxOMpNmERU0EhoZJZNIJM1o6jyQOgBzIhw3wygYhkdpuxlhwdpoleV6FVUlBknydLWzPj56J
ncCmm85FAvn6NoClw5S627LpCgkrzoIRyWhmqDTABG4GE4L4F6waDAzwgpe2jUtvBV0EqSXPoBKzhv5t
20qyvJkhd6wx1yaQ62gJZN6TnJDw0iR0dCNPBaOx3rcCxYFKw1urQeWh8ssT1ZQUQJbN1URpAwQja/RS
wSBRHvuL42X8R5M5WmSGakYahWpGCkVRNNp7rAgimHFMCt4aTArWCmMJkNOjZdbpUV3ZljgtY3x8AwwO
TH++9S2HARCtC4ND1bGqzTJGaQBOVVoslYD0npA0gaAN47XBasLXhdK3TAejxmPh4QHRJzOFV4bzcnJP
4HSbsNh87I3flwGXAjrgwOh3TpNE/SykXOFpoJK9c4ATYM3Rmka6qbGrMEBj2g7ASpMjo/WbLV5DWjzQ
PPm6l8spRf6H9qyW9xJAdr1ZKAWRONE3cA4E72aSEp0AFibiKiNmBRibKRJQcaGTQoyKfjEsLoV4fjA0
sEwf1VU2ky4be/qiUv+Nv7lbTLenVWpROhLoidKX5WBavee6IlQiZJFTh8TEVAiaMKpI5i4UYczdmfiT
h3OJIwSwTicHy+89SzCkdP1wCVLgU1GjzWWX70kTe1MQF8KPZQBSp8WqI/QQ6hQEtDVR3in7QanJpgQT
MKYEIxxapxJBCLwQrOy9JaPHlXBxdcLkrWCESsv6tr3L8qDn1UIDpiAERQRGoKJBG02cBKCSJz2gBEUg
ganCaiBSQQ1UAcUYBTO4yw+5vB86iooBVgVoxHnkI8febEsP5FoDTYENa3bxuGMIhiGMcRYwxh629dov
w3DGMXG+LpboxAowpPN4v6DPv6JwuSskqx0+6MvWp5tTt23WfLV16fZXU04IIQITpCjjX2KjpwzMiFgt
FooOIVodUGQEX5bTi79qiw+IPAnObcojY07CQ5Hfl6//QUq2XN9ntlZE1i04SgYKdr4t1cX7zK5EJ0O2
oTcgnink2fLqaWH6mP3O/ELPfOuA0hEsEunz6oraoIVbOdn8taf3prnb61Eu8XaBTcANuasA7SHMSRgG
M5TZfHgY82JB514OEFz7lVFIoJrzwBYb8eoqSPmr9Hpr99Rbf3q1WnqolacceaN4MxiCAgSwjicvTZce
6Kc+PV+H/0I+F06b+y/AQjgBA0CLEZhgF53bZr+0o266Y4defDhebJWIqQOwQjqCJaiiX02OvqSrf7hF
V/bAzwFLK3X0/J+AIbhKMJKe4pdOoPedKFWN1wg1VV90XmCNMKGx70cXYh634R4GdgLrMpZxfr/AJAQ6
i7JtLKjB8wDM500GmC56/FONeu7AfxrAL03hO3dzqKDAAAAAElFTkSuQmCCNDcwNw== 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T16:55:36.123

您需要删除前导`data:image/png;base64,`. 只有后面的所有内容`,`都是base64数据。

也许是这样的（从你的调用堆栈猜测）：

```
_, b64data = request.POST['UplaodFile'].split(',') # [sic]
f.write(decodestring(b64data)) 
```

* * *

编辑：回答 Krasimir 的评论：

`.split(',')`（在这种情况下）返回一个包含两个字符串的元组，即逗号 ( ) 之前和之后的数据`,`。第一个字符串是`'data:image/png;base64'`. 第二个字符串是 base64 数据。左侧是使用[元组解包](http://en.wikibooks.org/wiki/Python_Programming/Tuples#Packing_and_Unpacking)将这两个字符串分配给名为`_`和的变量`b64data`。`_`只是一个变量，您可以将其重命名为任何有意义的名称。[`_`通常用于元组解包以表示“我不关心这部分”。](https://stackoverflow.com/questions/3802410/is-it-possible-to-unpack-a-tuple-in-python-without-creating-unwanted-variables)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-04-15T15:27:50.953

去掉前面的“data:image/png;base64”，解码并保存为二进制数据。

```
img64 = 'iVBORw0KGgoAAAANSUhEUgAAAC..........' # the full string goes here
dataImg64=img64.decode('base64')      
f = open('button1.png','wb') # write binary        
f.write(dataImg64)   
f.close() # may be omitted` 
```

现在您可以使用图像阅读器在操作系统中打开并查看图像。

# java - 如何使用 Apache commons compress library 从 ZipArchiveInputStream 获取单个文件内容

> ID：14587953
> 
> 赞同：0
> 
> 时间：2013-01-29T16:50:40.797
> 
> 标签：java, zip, apache-commons-compress

我有 org.apache.commons.compress.archivers.zip.ZipArchiveInputStream 对象，我可以从中获取每个 ArchiveEntry 项目并获取单个文件的元数据。但我需要知道将每个文件的内容作为 Blob 获取的方法。

使用 org.apache.commons.compress.archivers.zip.ZipFile 可以完成，但 ZipFile 具有带有物理或临时 File 对象或文件位置的构造函数。我不想为此创建一个临时文件。

即使有办法将 ZipArchiveInputStream 转换为 ZipFile，也可以间接解决问题。

简而言之，我的要求是从 InputStream/Blob 中读取一个 Zip 文件，并将单个文件作为 BLOB 存储在数据库中。

仅供参考：我正在使用 org.apache.commons :: commons-compress :: 1.4.1

任何解决方案/想法/建议都受到高度赞赏。

干杯库姆

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-30T12:47:15.203

也许你可以使用[标准的 java.util.zip.ZipInputStream](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/zip/ZipInputStream.html) - 它有一个 InputStream 的构造函数。您可以使用`getNextEntry()`/`closeEntry()`遍历条目并`read()`获取解压缩数据。

# android - android图像在屏幕上看起来太小，如何缩放以适应屏幕？wrap_content 似乎不起作用

> ID：14587956
> 
> 赞同：2
> 
> 时间：2013-01-29T16:50:53.347
> 
> 标签：android, imageview

android图像在屏幕上看起来太小，如何缩放以适应屏幕？wrap_content 似乎不起作用

```
<RelativeLayout
    android:id="@+id/layout"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent">
<ImageView
    android:layout_alignParentTop="true"
    android:layout_marginTop="100dip"
    android:id="@+id/imageview"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:src="@drawable/splash_screen"/>
<ProgressBar
    android:layout_alignParentBottom="true"
    android:layout_marginBottom="20dip"
    android:id="@+id/progressbar"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"/>
</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T16:56:30.560

将以下属性添加到您的 ImageView 以使其随心所欲地缩放（将填充您的 ImageView 的大小）：

```
android:scaleType="fitXY" 
```

我实际上也会改变你的宽度属性。您的最终 XML 可能如下所示：

```
<ImageView
    android:layout_alignParentTop="true"
    android:layout_marginTop="100dip"
    android:id="@+id/imageview"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:scaleType="fitXY"
    android:src="@drawable/splash_screen"/> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T19:50:40.470

测试后，以下工作：

```
<ImageView
    android:layout_alignParentTop="true"
    android:layout_marginTop="100dip"
    android:id="@+id/imageview"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:scaleType="fitXY"
    android:src="@drawable/splash_screen"/> 
```

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2020-06-26T12:39:19.273

这是你的图像问题，可能是图像包含不必要的放大背景，裁剪图像，删除不必要的背景然后它会解决

# .net - 具有自定义侦听器的企业库外部配置

> ID：14587957
> 
> 赞同：0
> 
> 时间：2013-01-29T16:50:54.730
> 
> 标签：.net, enterprise-library

我们一直在使用 Enterprise Library 3.1 使用我们自己的自定义侦听器将异常记录到外部文件。最近我们需要创建一个使用我们自定义侦听器的类库，但是这个类库将从供应商应用程序中调用，因此我们无法控制供应商配置文件。我使用以下文章使用内置的企业库侦听器记录异常，但是当我尝试使用我们的自定义跟踪侦听器时它不起作用。我没有收到错误，它只是没有创建文件。如果我将自定义侦听器添加到供应商配置侦听器部分，那么一切正常。

我的第一个想法是 ExceptionPolicyFactory 正在加载正确的外部配置文件，但工厂没有从外部配置中的侦听器部分读取“类型”。

在使用自定义侦听器时，任何人都可以帮助我指出如何将“侦听器”部分完全移动到外部配置文件中吗？

[Entlib 和互操作：它有效吗，配置文件在哪里？](https://stackoverflow.com/questions/359354/entlib-and-interop-does-it-work-and-where-does-the-config-file-go) [http://blogs.msdn.com/b/tomholl/archive/2006/04/02/entlib2externalconfig.aspx](http://blogs.msdn.com/b/tomholl/archive/2006/04/02/entlib2externalconfig.aspx) [http://hugoribeiro.blog.com/2009/05/15/no-configuration-enterprise-library/](http://hugoribeiro.blog.com/2009/05/15/no-configuration-enterprise-library/)

基本上这部分需要移动到外部配置文件中。

```
<configuration>
  <configSections>
    <section name="loggingConfiguration" type="Microsoft.Practices.EnterpriseLibrary.Logging.Configuration.LoggingSettings, Microsoft.Practices.EnterpriseLibrary.Logging, Version=3.1.0.0, Culture=neutral, PublicKeyToken=fe5b8e7d42f3f6e1" />
  </configSections>
  <loggingConfiguration name="Logging Application Block" tracingEnabled="false"
      defaultCategory="Error Category" logWarningsWhenNoCategoriesMatch="true">
    <listeners>
      <add fileName="C:\LOGS\Error.log" listenerDataType="Test.Logging.Configuration.TestTraceListenerData, Test.Logging, Version=1.5.0.0, Culture=neutral, PublicKeyToken=fe5b8e7d42f3f6e1"
              traceOutputOptions="None" type="Test.Logging.TraceListeners.TestTraceListener, Test.Logging, Version=1.5.0.0, Culture=neutral, PublicKeyToken=fe5b8e7d42f3f6e1"
              name="Error Log TraceListener" />
    </listeners>
    <formatters>
      <add template="Timestamp: {timestamp}&#xD;&#xA;Application Domain: {appDomain} | Machine: {machine}&#xD;&#xA;Extended Properties: {dictionary({key} - {value}&#xD;&#xA;)}&#xD;&#xA;Message: {message}&#xD;&#xA;Process Name: {processName}&#xD;&#xA;"
              type="Microsoft.Practices.EnterpriseLibrary.Logging.Formatters.TextFormatter, Microsoft.Practices.EnterpriseLibrary.Logging, Version=3.1.0.0, Culture=neutral, PublicKeyToken=fe5b8e7d42f3f6e1"
              name="Error Detail Text Formatter" />
    </formatters>
    <specialSources>
      <errors switchValue="All" name="Logging Errors &amp; Warnings">
        <listeners>
          <add name="Error Log TraceListener" />
        </listeners>
      </errors>
    </specialSources>
  </loggingConfiguration>
</configuration> 
```

好吧，我已经把问题缩小了一点。似乎在我的 ExceptionHandler 类中有一个名为“WriteToLog”的方法，该方法内部是 Logger.Write(LogEntry)。Logger 是 Enterprise logger，如果不创建 LogWriterFactory 将无法工作，并且 LogWriterFactory 需要 ConfigurationSource。

所以现在的问题是......我如何将 ConfigurationSource 或我自己的自定义 Logger 甚至配置文件位置传递给我的 ExceptionHandeler 类？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T18:42:35.797

我在 Log4Net 上遇到过类似的问题，结果证明这与配置无关。相反，应该创建文件的目录没有创建文件的适当权限。检查应在其中创建文件的目录的 NTFS 权限是否具有相应用户的读取、写入和修改权限。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-20T12:51:38.783

在我的记录器对象中，我最终通过使用`GetExecutingAssembly`Location 获取了配置文件。

# visual-studio - 如何在 TFS 源代码控制中包含 TypeScript 生成的 .js 文件？

> ID：14587962
> 
> 赞同：5
> 
> 时间：2013-01-29T16:51:24.703
> 
> 标签：visual-studio, typescript

我不想在构建/运行时构建所有打字稿文件。我只想在保存时构建它们。但是，生成的 .js 文件不会签入到 TFS，这意味着另一个开发人员必须打开并保存新的/修改过的 .ts 文件。有没有办法将生成的 .js 文件包含在 TFS 中？

我使用的是 VS 2010，所以我没有 Web Essentials 2012 扩展。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-05-04T22:13:13.190

我使用的最佳方法是在您的解决方案中创建一个具有预期输出名称的空白 .js 文件，并将其签入 TFS。

# objective-c - 我在 q1 上的 dispatch_async，调用主队列上的 UI 对象，在 q1 上添加回调，崩溃

> ID：14587965
> 
> 赞同：1
> 
> 时间：2013-01-29T16:51:36.263
> 
> 标签：objective-c, multithreading, objective-c-blocks, grand-central-dispatch

听起来令人困惑，但看起来像这样

```
AVPlayer *capturedPlayer = _player;
dispatch_async(_subtitlesQueue, ^{
    // Parse the requested subtitle track and create a subtitle time observer
    subripString = [NSString stringWithContentsOfFile:filePath encoding:NSUTF8StringEncoding error:nil];
    subripEntries = [SubRipParser parse:subripString];
    if (!subripEntries.count)
        return;
    dispatch_async(dispatch_get_main_queue(), ^{
        _subtitlesTimeObserver = [capturedPlayer addPeriodicTimeObserverForInterval:CMTimeMake(1, 5)
                                                                              queue:_subtitlesQueue
                                                                         usingBlock:^(CMTime time){}];
    });
}); 
```

单击按钮时会调用上面的代码。它崩溃了。我是 GCD 和整个队列的新手，所以也许我误解了，但上述工作不应该吗？

如果我将主队列上的调用更改为同步调用，那么它可以工作。崩溃发生在 subtitleQueue 调用 AVPlayer 的 makePeriodicCall （或类似）时。

如果我将周期性时间观察器添加到主队列而不是自定义串行队列，则异步调用也有效。但是，文档说添加到不同的队列应该没问题。

问题2）当我在这里时，我还有一个关于“捕获” AVPlayer 的部分的问题。捕获这样的变量是否足够安全，或者我是否必须使用 __weak 并确保它在块内不为 NULL？我的情况是包含 AVPlayer 的控制器是单例的，因此它存在于应用程序的整个生命周期中。我认为这使得不使用 __weak 修饰符可以。我这样想对吗？

干杯，感谢您的帮助！

编辑：例外是 EXC_BAD_ACCESS 代码 2，所以不应该访问的是。它发生在运行 _subtitlesQueue 的单独线程上。它发生在调用 [AVPlayerPeriodicCaller _effectiveRateChanged]

在 _subtitlesQueue 上调用外部 dispatch_async 之前、在主队列上调用内部 dispatch_async 之前以及在调用 addPeriodicTimeObserver 之前在主队列上的 dispatch_async 内部之前，我还打印了 capturePlayer 和 _subtitlesQueue 的值（指针值）。他们都是一样的。

EDIT2：如果我在 subtitleQueue 上的周期性时间观察者创建周围添加一个同步块，那么一切正常......

```
@synchronized(_subtitlesQueue) {
    _subtitlesTimeObserver = [capturedPlayer addPeriodicTimeObserverForInterval:CMTimeMake(1, 5)
                                                                          queue:_subtitlesQueue
                                                                     usingBlock:subtitleTimeObservedBlock];
} 
```

全部

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-08-29T15:50:58.130

当您将周期性观察者添加到正在播放的 AVPlayer 时，似乎存在[导致 EXC_BAD_ACCESS 的错误](http://openradar.appspot.com/radar?id=5102369608040448)。`-[AVPlayerPeriodicCaller _effectiveRateChanged]`我正在使用的解决方法是：

```
BOOL playing = player.rate > 0.0f;
if (playing)
{
    [player pause];
}

[player addPeriodicTimeObserverForTimeInterval:myTime queue:mySerialQueue usingBlock:myBlock];

if (playing)
{
    [player play];
} 
```

正如您所指出的，另一种解决方法是通过`NULL`而不是串行队列，因为这具有将主线程调度队列中的块排队的效果。

# windows-8 - 在 WinRT 中，实现 INotifyCollectionChanged 不更新 ItemsControl 的集合

> ID：14587966
> 
> 赞同：3
> 
> 时间：2013-01-29T16:51:44.227
> 
> 标签：windows-8, itemssource, inotifycollectionchanged

我正在编写自己的集合类，它也实现了 INotifyCollectionChanged。我在 Windows 8 商店应用程序 (winRT) 中使用它。我编写了一个单元测试，证明修改列表的内容会引发所有正确的事件，这些事件与“正常”可观察集合会引发的事件相同。尽管如此，当我将 ItemsControl 的 ItemsSource 属性（我尝试过 GridView、ListView 甚至普通的 ItemsControl）绑定到集合时，更改集合时它不会影响 UI。

底层集合类型是否必须是 ObservableCollection 才能工作，还是可以编写我自己的集合类？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-06T15:13:25.077

您也可以使用[`ICollectionView`](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.data.icollectionview)具有一些扩展功能的过滤器。如果您想要预制课程，请查看[Code Project 中提供的课程](http://www.codeproject.com/Articles/527686/A-WinRT-CollectionView-class-with-Filtering-and-So)。

特别是，我注意到 UI 订阅了该[`VectorChanged`](http://msdn.microsoft.com/en-us/library/windows/apps/br226053.aspx)事件，因此您应该只执行`IObservableCollection`评论中前面提到的实现。

该`VectorChanged`事件采用 type 的接口`IVectorChangedEventArgs`，我环顾四周时没有发现具体的类。不过创建一个并不难。这是一个可以类似于创建`NotifyPropertyChangedEventArgs`. 它是私有的，因为它只在集合类中使用。

```
private sealed class VectorChangedEventArgs : IVectorChangedEventArgs
{
    public VectorChangedEventArgs(NotifyCollectionChangedAction action, object item, int index)
    {
        switch (action)
        {
            case NotifyCollectionChangedAction.Add:
            CollectionChange = CollectionChange.ItemInserted;
            break;
            case NotifyCollectionChangedAction.Remove:
            CollectionChange = CollectionChange.ItemRemoved;
            break;
            case NotifyCollectionChangedAction.Move:
            case NotifyCollectionChangedAction.Replace:
            CollectionChange = CollectionChange.ItemChanged;
            break;
            case NotifyCollectionChangedAction.Reset:
            CollectionChange = CollectionChange.Reset;
            break;
            default:
            throw new ArgumentOutOfRangeException("action");
        }
        Index = (uint)index;
        Item = item;
    }

    /// <summary>
    /// Gets the affected item.
    /// </summary>
    public object Item { get; private set; }

    /// <summary>
    /// Gets the type of change that occurred in the vector.
    /// </summary>
    public CollectionChange CollectionChange { get; private set; }

    /// <summary>
    /// Gets the position where the change occurred in the vector.
    /// </summary>
    public uint Index { get; private set; }
} 
```

# sql-server - 尝试从 Excel 导入时出现截断错误

> ID：14587967
> 
> 赞同：1
> 
> 时间：2013-01-29T16:51:46.347
> 
> 标签：sql-server, sql-server-2008, excel, import, sql-server-2008-r2

我正在尝试导入您可以在此处下载的 NDC 数据库：[http ://www.fda.gov/drugs/informationondrugs/ucm142438.htm](http://www.fda.gov/drugs/informationondrugs/ucm142438.htm)

当我最初尝试在 zip 文件中导入 excel 时，它抱怨格式，所以我从一个空白的 excel 开始，并将其从 txt 文件导入到 excel 中。

我创建了一个表来将数据导入并将所有列设置为 nvarchar(MAX)。它抱怨的列是 SUBSTANCENAME 列。我查了一下，该列中最长的值大约是 2700 个字符。

我的理解是 nvarchar(MAX) 应该很容易容纳那么多。除了将该列更改为文本字段之外，我不确定该怎么做。这应该适合该列吗？

我尝试将其设置为忽略错误，但据我所知，它什么也没做，至少当我尝试时它似乎永远不会忽略它们。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T19:21:55.380

您如何将数据导入 SQL Server 表？如果我没记错的话，SSIS 使用 Excel 文件的前 5 行或 10 行来确定数据类型和长度。我记得我必须更改注册表以获得更大的样本量 HKEY_LOCAL_MACHINE\SOFTWARE\Wow6432Node\Microsoft\Jet\4.0\Engines\Excel 可以修改 TypeGuessRows 条目以获得更大的样本量。那是假设您使用的是 SSIS - 但如果您使用的是 SQL Server Import，那么它也会做同样的事情。

# ios - 在 iOS 6 中继承 UITabBarController 是否可以接受？

> ID：14587969
> 
> 赞同：1
> 
> 时间：2013-01-29T16:51:47.807
> 
> 标签：ios, cocoa-touch, app-store, uitabbarcontroller

我有一个示例程序，我有兴趣在构建我的主应用程序时模拟它，但是该示例程序做了一些我认为可能不允许的事情。我发现一些论坛帖子表明，如果苹果这样做，它将拒绝应用商店中的应用：

```
@interface MainTabBarController : UITabBarController <XXCustomAccessoryDelegate,UIAccelerometerDelegate> { 
```

我对 iOS 开发比较陌生，对此我不是 100% 确定的。我用谷歌搜索了一下，发现一些信息表明“[不要这样做](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITabBarController_Class/Reference/Reference.html)”，但不是坚定的“你不应该这样做”。

此人子类化的 UI 选项卡栏控制器类具有`IBOutlet`和`IBAction`连接点，这些是应用程序的中心部分，但它不会覆盖绘制代码。如果我想在 Apple 允许它在 App Store 中使用之前重复使用其中的一部分，我是否需要重写或调整代码？还是只是简单地覆盖访问视图并修改Apple不允许的绘画代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-01-29T16:58:06.737

文档在 ios5 和 ios6 之间发生了变化。

ios5：“这个类不用于子类化。”

ios6：“此类通常按原样使用，但在 iOS 6 及更高版本中可能是子类。”

# bash - 如何迭代包含bash中空格的列表

> ID：14587972
> 
> 赞同：6
> 
> 时间：2013-01-29T16:51:54.977
> 
> 标签：bash, loops

你能告诉我如何迭代列表中的项目可以包含空格吗？

```
x=("some word", "other word", "third word")
for word in $x ; do
    echo -e "$word\n"
done 
```

如何强制它输出：

```
some word
other word
third word 
```

代替：

```
some
word
(...)
third
word 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-01-29T17:04:50.193

要正确循环项目，您需要使用`${var[@]}`. 并且您需要引用它以确保带有空格的项目不会被拆分：`"${var[@]}"`。

全部一起：

```
x=("some word" "other word" "third word")
for word in "${x[@]}" ; do
  echo -e "$word\n"
done 
```

或者，更理智（[感谢 Charles Duffy](https://stackoverflow.com/questions/14587972/how-to-iterate-over-list-which-contains-whitespaces-in-bash/14588210#comment48184385_14588210)）`printf`：

```
x=("some word" "other word" "third word")
for word in "${x[@]}" ; do
  printf '%s\n\n' "$word"
done 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:25:31.657

两种可能的解决方案，一种类似于 fedorqui 的解决方案，没有额外的 ','，另一种使用数组索引：

```
x=( 'some word' 'other word' 'third word')

# Use array indexing
let len=${#x[@]}-1
for i in $(seq 0 $len); do
        echo -e "${x[i]}"
done

# Use array expansion
for word in "${x[@]}" ; do
  echo -e "$word"
done 
```

输出：

```
some word
other word
third word
some word
other word
third word 
```

**编辑：修复了**[cravoori](https://stackoverflow.com/users/753731/cravoori)指出的索引解决方案的问题

# android - ExpandableListView 仅在特定按钮上展开？

> ID：14587973
> 
> 赞同：14
> 
> 时间：2013-01-29T16:52:04.203
> 
> 标签：android, listview, button, expandablelistview, expand

好吧，我正在尝试创建一个像 Spotify 一样的 ExpandableListView ......但我不知道如何禁用 LinearLayout 像按钮一样（展开列表）我已经创建了一个应该描述我喜欢的图像. 我希望有可能将单击文本/图像（父级）作为正常交互。单击右侧按钮应该会像在 Spotify 中一样展开列表...

![第一张图片展示了展开动作（现在），第二张展示了展开动作应该如何......](../Images/74154198f503e6f21ede5476c5c759b0.png)

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2014-07-18T15:09:35.063

这是一个有点老的问题，但这个答案可能会对某人有所帮助。

如果要通过单击特定`Button`或其他来展开/折叠组，则必须在 Adapter 类`View`中的方法中获取该 Button 。`getGroupView`然后，在`onClick`您的方法中`Button`，要么转换`parent`为`ExpandableListView`，要么在创建适配器时在构造函数中传递 List 的引用。

我更喜欢第一种方法。这是代码，假设你有一个`TextView`，一个`ImageView`就是箭头。我也添加了更改箭头状态。

```
@Override
public View getGroupView(final int groupPosition, final boolean isExpanded,
        View convertView, final ViewGroup parent) {

    String headerTitle = (String) getGroup(groupPosition);

    if (convertView == null) {
        LayoutInflater infalInflater = (LayoutInflater) context
                .getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = infalInflater.inflate(R.layout.left_drawer_list_group, parent, false);
    }

    TextView listHeaderText = (TextView) convertView
            .findViewById(R.id.left_menu_list_header_text);
    ImageView listHeaderArrow = (ImageView) convertView.findViewById(R.id.left_menu_list_header_arrow);

    listHeaderText.setText(headerTitle);

    //Set the arrow programatically, so we can control it
    int imageResourceId = isExpanded ? android.R.drawable.arrow_up_float : android.R.drawable.arrow_down_float;
    listHeaderArrow.setImageResource(imageResourceId);

    listHeaderArrow.setOnClickListener(new View.OnClickListener() {

        @Override
        public void onClick(View v) {

            if(isExpanded) ((ExpandableListView) parent).collapseGroup(groupPosition);
            else ((ExpandableListView) parent).expandGroup(groupPosition, true);

        }
    });

    return convertView;
} 
```

此外，您想禁用`onGroupClick`侦听器中的展开/折叠。

```
@Override
public boolean onGroupClick(ExpandableListView parent, View v,
        int groupPosition, long id) {

    //Do some other stuff, but you shall not expand or collapse

    return true;
} 
```

还有另一种方法，但相当糟糕，那就是您将整个`Adapter`类复制到您创建`ExpandableListView`和设置的类中`Adapter`。但不要那样做。严重地！;)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-30T14:19:37.287

这是来自 ChannelList 的 onCreate，它扩展了 ListFragment。如果调用 Fragment，它会存储数据并生成一个新的适配器。

```
@Override   
public View onCreateView(LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) 
{                               
    m_ListView = new ExpandableListView(getActivity());
    m_ListView.setId(android.R.id.list);

    m_ListView.setChoiceMode(ListView.CHOICE_MODE_MULTIPLE_MODAL);
    m_ListView.setMultiChoiceModeListener(m_MultiChoiceModeListener);

    m_ChannelListAdapter = new ChannelListAdapter(getActivity(), this);
    m_ListView.setAdapter(m_ChannelListAdapter);
    m_ListView.setGroupIndicator(null);
    m_ListView.setOnGroupClickListener(this);

    return m_ListView;
} 
```

在适配器上，我有 getGroupView 方法，如下所示：

```
public View getGroupView(int i, boolean b, View view, ViewGroup viewGroup) {

    if (view == null) 
    {
        view = inflater.inflate(R.layout.layout_channelwithimage, viewGroup, false);
    }

    TextView textView = (TextView) view.findViewById(R.id.labelwithimage);
    textView.setText(getGroup(i).toString());

    ImageButton imbu = (ImageButton) view.findViewById(R.id.imageButton);
    //imbu.setOnClickListener(this);    
    imbu.setFocusable(false);

    return view;
} 
```

因此，如果我在适配器中注册 ImageButton，它将从适配器调用 onClick。但是在 onClick 中我不知道单击了哪个组...如果我没有在任何侦听器上注册按钮，它将不会从 ChannelList 调用 onGroupClick ...

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-06T00:26:58.467

Not overly elegant solution but it helped me out:

I've preserved the original groupIndicator. I liked the behavior as it was.

On the groupItem layout I simply blocked the space with empty view so that the original groupIndicator was still clickable:

```
<LinearLayout> 
....

<!--just dummy space underneath the default expand_collapse group icon - this way original expand collapse behavior is preserved on the icon-->
<View
        android:layout_width="25dp"
        android:layout_height="match_parent">
</View>

<!-- text view will have actionListener -->
<TextView
        android:id="@+id/category_name"
        android:layout_weight="1"
        android:layout_width="0dp"
        android:layout_height="match_parent"
        .... /> 
.... 
</LinearLayout> 
```

Than sneaked in callBack object while creating ExpandableListAdapter and hooked it onClick on the "category_name" (for both child and group elements)

```
public class ExpandableListAdapter extends BaseExpandableListAdapter {
public interface OnCategoryActionListener {
    boolean onCategorySelected(long categoryId);
}
....

public ExpandableListAdapter(Activity context, Category rootCategory,    
OnCategoryActionListener callBack) {
    this.context = context;
    this.rootCategory = rootCategory;     
    this.callBack = callBack;
}
....
@Override
public View getGroupView(final int groupPosition, boolean isExpanded, View 
convertView, ViewGroup parent) {
    String categoryName = (String) getGroup(groupPosition);
    if (convertView == null) {
        LayoutInflater inflater = (LayoutInflater)   
          context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);
        convertView = inflater.inflate(R.layout.category, null);
    }
    TextView item = (TextView) convertView.findViewById(R.id.category_name);
    item.setTypeface(null, Typeface.BOLD);
    item.setText(categoryName);
    item.setOnClickListener(new OnClickListener() {
        @Override
        public void onClick(View view) {
            callBack.onCategorySelected(getGroupId(groupPosition));
        }
    });
  ..... 
```

All you have to do now is to initialize properly ExpandableListAdapter in master fragment class

```
expListAdapter = new ExpandableListAdapter(getActivity(), this.rootCategory,     
    new OnCategoryActionListener());
expListView = (ExpandableListView) getActivity().findViewById(R.id.categories_list);
expListView.setAdapter(expListAdapter); 
```

# sql - MSSQL 与自身连接

> ID：14587974
> 
> 赞同：0
> 
> 时间：2013-01-29T16:52:04.667
> 
> 标签：sql, sql-server

我有两张桌子：

```
id
1
2
3
4 
```

t1 和 t2

```
id | related_id
1  | 2
1  | 3 
```

其中 t2 是 t1 记录之间的关系表。获得所需输出的最佳方法是什么？

```
t1.id | t1_copy.id
1     | NULL -- want to get this NULL row
1     | 2
1     | 3 
```

简单`JOIN`几乎可以工作，但它并没有给我第一`NULL`行。

```
SELECT t1.id, t1_copy.id FROM t1
LEFT JOIN t2 ON t1.id = t2.id
LEFT JOIN t1 t1_copy ON t1_copy.id = t2.related_id
WHERE t1.id = 1 
```

PS：是的，我确实意识到所需的输出很古怪。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:56:26.203

似乎一个简单的 UNION 应该可以解决问题

```
SELECT
   id, 
   null as copy_id
FROM
   t1 
WHERE
  exists (select * from t2 where t1.id = t2.id)
UNION ALL
SELECT
   t1.id,
   t2.related_id
FROM
   t1 
   INNER JOIN t2
   ON t1.id = t2.id 
```

[SQL小提琴](http://sqlfiddle.com/#!6/85c77/5)

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-29T17:08:35.827

```
SELECT DISTINCT t1.id, t1_copy.id FROM t1
LEFT OUTER JOIN t2 ON t1.id = t2.id
WHERE t1.id = 1 
```

# python - 使用 Pmw 时出现“ImportError：没有名为 tkinter 的模块”

> ID：14587980
> 
> 赞同：6
> 
> 时间：2013-01-29T16:52:12.340
> 
> 标签：python, python-2.7, tkinter, importerror

[这](http://code.activestate.com/recipes/271249-how-to-create-linked-optionmenus-or-other-lists-in/)是我的问题：我正在运行代码例子。我在我的 RaspberryPi 上安装了 Python 2.7 和 3，但我已经检查并仔细检查了，我正在 2.7 中运行代码。我在 2.7 下安装了 Pmw 2.0.0，而不是 3，但是当我尝试运行时，我收到“ImportError: No module named tkinter”错误。我一直在使用 Tkinter，所以它通常可以正常工作，并且我已经进行了搜索以验证我肯定调用的是“Tkinter”，而不是“tkinter”，所以我认为这一定是 Pmw 的问题，哪个回溯似乎也表明了（在我的问题底部完整发布）。我一辈子都找不到 Pmw 正在寻找小写“tkinter”的特定地方，我不知道如何解决这个问题。我不急于切换平台——这是为了工作，所以除非这是无法修复的，我需要坚持使用 Tkinter。哦，我对 Python 还是很陌生，所以我很想知道这是一个简单的问题，这里的人可以很容易地发现。

导入系统；print sys.path 给了我：

```
['/home/pi/Desktop', '/home/pi', '/usr/bin', '/usr/local/lib/python2.7/dist-packages/distribute-0.6.28-py2.7.egg', '/usr/lib/python2.7', '/usr/lib/python2.7/plat-linux2', '/usr/lib/python2.7/lib-tk', '/usr/lib/python2.7/lib-old', '/usr/lib/python2.7/lib-dynload', '/usr/local/lib/python2.7/dist-packages', '/usr/lib/python2.7/dist-packages', '/usr/lib/pymodules/python2.7'] 
```

完整的追溯是：

```
Traceback (most recent call last):
  File "/home/pi/Desktop/LinkedMenusSample.py", line 151, in <module>
    Pmw.initialise(root)
  File "/usr/local/lib/python2.7/dist-packages/Pmw/Pmw_2_0_0/lib/PmwLoader.py", line 131, in __getattr__
    self._initialise()
  File "/usr/local/lib/python2.7/dist-packages/Pmw/Pmw_2_0_0/lib/PmwLoader.py", line 89, in _initialise
    raise ImportError(msg)
ImportError: No module named tkinter 
```

* * *

## 回答 #1

> 赞同：24
> 
> 时间：2013-01-29T17:40:12.027

也许我可以帮助你如何消除错误。

这里有两个想法：

1）您使用 python 2.xx 并安装了 python 3 pwm 模块（Tkinter 从 Python 2 重命名为 tkinter 到 3）

2）您在导入之前执行以下操作，希望对您有所帮助：

```
#import tkinter
#Traceback (most recent call last):
#  File "<pyshell#11>", line 1, in <module>
#    import tkinter
#ImportError: No module named tkinter

import sys, Tkinter
sys.modules['tkinter'] = Tkinter # put the module where python looks first for modules
#import tkinter # now works! 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2015-12-27T14:45:42.920

另一种解决方法如下：

```
try:
    import tkinter
except:
    import Tkinter as tkinter 
```

这样，您将始终拥有可用的模块 tkinter，并且取决于您的程序加载 tkinter 或 Tkinter 的 Python 版本。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-09-21T10:01:22.617

`matplotlib.pyplot`在我的 CentO 中，我遇到了与 (python 2.7+)相同的问题。我通过安装 tkinter 解决了这个问题。`sudo yum install tkinter`. 希望这可以帮到你。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-02-22T19:50:23.847

您导入了错误的模块使用：import Tkinter

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2016-03-25T15:42:59.773

# 在 python 3.4.0 及更高版本上运行的重写脚本

```
def add():
        print ("Enter the two numbers to Add")
        A=int(input("Enter A: "))
        B=int(input("Enter B: "))
        return A + B 

def sub():
        print ("Enter the two numbers to Subtract")
        A=int(input("Enter A: "))
        B=int(input("Enter B: "))
        return A - B

def mul():
        print ("Enter the two numbers to Multiply")
        A=int(input("Enter A: "))
        B=int(input("Enter B: "))
        return A * B

def div():
        print ("Enter the two number to Divide")
        A=float(input("Enter A: "))
        B=float(input("Enter B: "))
        return A / B

print ("1: ADDITION")
print ("2: SUBTRACTION")
print ("3: MULTIPLICATION")
print ("4: DIVISION")
print ("0: QUIT")

while True:

    CHOICE = int(input("ENTER THE CORRESPONDING NUMBER FOR CALCULATION ")) 

    if CHOICE == 1: 
        print ('ADDING TWO NUMBERS:')
        print (add())

    elif CHOICE == 2:
        print ('SUBTRACTING TWO NUMBERS')
        print (sub())

    elif CHOICE == 3:
        print ('MULTIPLYING TWO NUMBERS')
        print (mul())

    elif CHOICE == 4:
        print ("DIVIDEING TWO NUMBERS")
        print (div())

    elif CHOICE == 0:
        exit()
    else:
        print ("The value Enter value from 1-4") 
```

# android - Google Maps API v2 Android 是否支持离线地图？

> ID：14587981
> 
> 赞同：2
> 
> 时间：2013-01-29T16:52:13.807
> 
> 标签：android, api, google-maps, offline

我试图了解我的要求......我在谷歌上搜索没有成功（当然，从官方谷歌开发者网站开始）。

我想要实现的结果与谷歌官方地图应用程序的行为相同，选择“离线提供”地图的一部分并保存选定区域。

有谁知道怎么做（如果可能的话）？你能为我指出正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-01-29T16:55:59.907

目前，Maps V2 API 没有给我们任何控制离线地图的能力。

# ios6 - iOS 6 UIWebView 状态恢复如何工作？

> ID：14587983
> 
> 赞同：6
> 
> 时间：2013-01-29T16:52:26.090
> 
> 标签：ios6, uiwebview, restore, state-restoration

根据[文档](http://developer.apple.com/library/ios/#documentation/uikit/reference/UIWebView_Class/Reference/Reference.html)：

> 在 iOS 6 及更高版本中，如果您为此视图的 restoreIdentifier 属性分配一个值，它会尝试保留其 URL 历史记录、每个页面的缩放和滚动位置以及有关当前正在查看的页面的信息。在恢复过程中，视图会恢复这些值，以便 Web 内容与之前一样显示。

我正在做这一切，但什么都没有发生。即使我手动保存和恢复用户之前查看的 URL，滚动位置也不会恢复。文档是错的吗？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-01-29T16:54:21.647

文档是正确的，但非常不完整。这是正在发生的事情。如果 Web 视图参与状态恢复（我假设您知道这意味着什么 - 一切都必须有`restorationIdentifier`，等等），并且当用户离开应用程序时，如果 Web 视图有请求（不是 HTML 字符串） ，Web 视图将自动恢复，包含与其属性相同的请求`request`，并且其 Back 和 Forward 列表保持不变。因此，您*可以*使用状态恢复机制来恢复 Web 视图的状态，但您必须执行一些额外的操作。这种舞蹈是如此的好奇和晦涩，以至于最初我的印象是 Web 视图的状态无法真正保存和恢复，尽管文档声称它可以。

这里有两个秘密；一旦你了解了它们，你就会明白 web 视图状态恢复：

*   恢复的 Web 视图不会自动加载其请求；这取决于你的代码。

*   在恢复的 Web 视图加载其请求后，其后退列表中的第一项是与用户离开它的状态相同的页面（滚动和缩放）。

了解了这一点，您就可以轻松设计出一种用于恢复 Web 视图状态的策略。第一件事是检测我们正在恢复状态，并提出这样的标志：

```
-(void)decodeRestorableStateWithCoder:(NSCoder *)coder {
    [super decodeRestorableStateWithCoder:coder];
    self->_didDecode = YES;
} 
```

现在我们可以检测（可能在 中`viewDidAppear:`）我们正在恢复状态，并且 Web 视图神奇地包含一个请求，并加载该请求：

```
if (self->_didDecode && wv.request)
    [wv loadRequest:wv.request]; 
```

现在是棘手的部分。视图加载后，我们立即“返回”。这实际上具有恢复用户先前滚动位置的效果（以及从 Back 堆栈顶部删除额外条目）。然后我们降低我们的旗帜，这样我们就不会在其他任何时候做出这个额外的动作：

```
- (void)webViewDidFinishLoad:(UIWebView *)wv {
    if (self->_didDecode && wv.canGoBack)
        [wv goBack];
    self->_didDecode = NO;
} 
```

UIWebView 现在处于用户之前离开应用程序时的状态。我们使用内置的 iOS 6 状态保存和恢复功能保存和恢复了状态。

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-06-26T17:34:45.640

我已经尝试过 Matt 的回答并且效果很好，但是如果历史堆栈中有“转发”页面，它们将被 Web 视图对象中恢复的请求所取代。

更好的方法是调用 webview 对象上的 'reload' 方法，这将恢复两个方向的历史记录以及缩放和内容滚动偏移量。

如果您想要我的方法示例或您自己的 webview 的更多功能，请在此处查看我的 SVWebViewController 的开源分支[。](https://github.com/pellet/SVWebViewController/blob/master/SVWebViewController/SVWebViewController.m)

# ios - dealloc 调用顺序

> ID：14587985
> 
> 赞同：1
> 
> 时间：2013-01-29T16:52:51.000
> 
> 标签：ios, objective-c, cocoa, memory-management

我有自定义的视图层次结构。每个视图都保留其子视图。除了父母之外，没有其他人保留观点。当调用 dealloc for view 时，它调用 [children release]。当我想销毁视图并删除相关资源时，我调用：

```
[mainView release];
[resourceManager deleteRelatedResources]; 
```

大多数时候它运行良好，调用顺序是：

1.  主视图释放；
2.  mainView 的孩子的 dealloc；
3.  mainView 的孙子的 dealloc 等。
4.  删除相关资源

但有时（大约 1% 的时间）我有另一个订单：

1.  主视图释放；
2.  删除相关资源
3.  mainView 的孩子的 dealloc；
4.  mainView 的孙子的 dealloc 等；

我发现[Apple 建议](http://developer.apple.com/library/ios/#documentation/Cocoa/Conceptual/MemoryMgmt/Articles/mmPractical.html#//apple_ref/doc/uid/TP40004447-SW13)不要依赖 dealloc 的资源管理要求。是不是在[儿童释放]之后不能立即调用儿童观点的dealloc？有什么解决方法吗？（我的项目更改资源管理方案太过分了）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-01-29T17:26:38.327

`dealloc`调用顺序不定；`dealloc`如果您的代码在不同类之间的实现中具有顺序依赖性，请考虑该代码已损坏。

当然，有一些变通方法，您可以不遗余力地尝试并保证订单。但是没有一种解决方法是防弹的，你只会把洞挖得更深。

您唯一可以假设的是，在 A 中释放的对象`dealloc`将始终在 A 之后被释放。什么时候？你无法确切知道。

（一个问题是任何对象都可以`retain/autorelease`在任何时候自由地被 d。）

一种可能的快速解决方法是添加无效模式。也就是说，`dealloc`通过在所有具有相关资源管理的类中实现一个方法来将资源管理移出，您可以在其中控制所述方法的调用。

然后，您执行以下操作：

```
[myObject invalidateAllResources]; // traverses object graph, in order, invalidating resources

[myObject release]; // do the normal release-maybe-dealloc dance 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T18:50:20.020

我的猜测是，mainView 的一些子视图由于某种原因（动画或其他用途）被保留在其他地方，因此它们不会立即被释放。

您可以通过在视图的子视图被释放时检查它的 retainCount 来测试它。

# python - 为什么 PatchCollectin 会覆盖可见性？

> ID：14587990
> 
> 赞同：0
> 
> 时间：2013-01-29T16:53:23.010
> 
> 标签：python, collections, matplotlib, patch, visible

我正在使用 matplotlib PatchCollection 来保存一堆 matplotlib.patches.Rectangles。但是我希望它们在第一次绘制时不可见（仅在单击其他内容时才可见）。当我使用 add_artist 将矩形直接绘制到画布上时，这可以正常工作，但我想将其更改为使用 PatchCollection。出于某种原因，当我创建 PatchCollection 并使用 add_collection 添加它时，它们都是可见的。

```
self.plotFigure = Figure()
self.plotAxes = self.plotFigure.add_subplot(111)

self.selectionPatches = []
for node in self.nodeList:
    node.selectionRect = Rectangle((node.posX - node.radius*0.15 , node.posY - node.radius*0.15),
                                    node.radius*0.3,
                                    node.radius*0.3,
                                    linewidth = 0,
                                    facecolor = mpl.colors.ColorConverter.colors['k'],
                                    zorder = z,
                                    visible = False)
    self.selectionPatches.append(node.selectionRect)

self.p3 = PatchCollection(self.selectionPatches, match_original=True)
self.plotAxes.add_collection(self.p3) 
```

如果我遍历 self.selectionPatches 并打印出每个 Rectangle 的 get_visible()，它会返回 false。但是当它们被绘制时，它们是清晰可见的。如果有人可以帮助我了解为什么会发生这种情况，我将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T17:07:21.007

当您创建 a`PatchCollection`时，它会从您提交的对象中提取大量信息（形状、位置、样式（如果您使用`match_original`）），但不会保留补丁对象以供以后参考（因此它会丢弃每个补丁`visible`） . 如果您希望*所有*矩形一起可见/不可见，您可以这样做

```
self.p3 = PatchCollection(self.selectionPatches, 
                          match_original=True, 
                          visible=False) 
```

否则，我认为您必须将它们分组到要一起出现的集合中。

查看[(here)](https://github.com/matplotlib/matplotlib/blob/master/lib/matplotlib/collections.py#L1198)`__init__`的函数以及通过和的其余级联。`PatchCollection``Collection``Artist`

# iphone - 如何将 NSManagedObjectContext 传递给嵌入在 NavigationController 和 tabBarController 中的 ViewController

> ID：14587992
> 
> 赞同：1
> 
> 时间：2013-01-29T16:53:25.117
> 
> 标签：iphone, ios, core-data, uiviewcontroller, nsmanagedobjectcontext

我在设置一个`NSManagedObjectContext`视图控制器时遇到问题 - `LibraryTrackTimeViewController`。我附上一个截图（我希望这不违反这里的规则）以使其更清楚：

[http://imgur.com/qgrH4T2](http://imgur.com/qgrH4T2)

如您所见 - 它嵌入在 a`NavigationController`和 a`tabBarContoller`中。我正在`NSManagedObjectContext`为其他 viewControllers设置`appDelegate`：

```
-(BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
UITabBarController *tabBarController = (UITabBarController *)self.window.rootViewController;

UINavigationController *navigationController = (UINavigationController *)[[tabBarController viewControllers] objectAtIndex:0];

TagLibraryViewController *tagLibraryViewController = (TagLibraryViewController *)[[navigationController viewControllers] objectAtIndex:0];
tagLibraryViewController.managedObjectContext = self.managedObjectContext;

navigationController = (UINavigationController *)[[tabBarController viewControllers] objectAtIndex:1];

LibrariesViewController *librariesViewController = (LibrariesViewController *)[[navigationController viewControllers] objectAtIndex:0];
librariesViewController.managedObjectContext = self.managedObjectContext;

MapViewController *mapViewController = (MapViewController *)[[tabBarController viewControllers] objectAtIndex:2];
mapViewController.managedObjectContext = self.managedObjectContext;

return YES; 
```

}

其他视图控制器很容易通过`managedObjectContext`- 但我无法解决如何将它发送给我的问题，`LibraryTrackTimeViewController`因为它是嵌入式的。你可以给我的任何帮助或建议 - 这太棒了！有没有更好的方法将其发送`objectContexts`到我的视图控制器？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T21:43:57.950

如果您觉得它太复杂，您可以从应用委托公开上下文

```
// AppDelegate.h
@property (nonatomic, strong) NSManagedObjectContext *managedObjectContext; 
```

然后直接从代表那里得到它：

```
#include "AppDelegate.h"

AppDelegate *delegate = (AppDelegate*)
             [[UIApplication sharedApplication] delegate];
self.managedObjectContext = delegate.managedObjectContext; 
```

这不是建议 - 我还建议您将上下文传递给控制器​​。但它是一种完全有效的设计模式，所以如果你觉得它更容易，你可以使用它。

# java - 计算匹配新角度所需的圆形旋转

> ID：14587993
> 
> 赞同：0
> 
> 时间：2013-01-29T16:53:28.093
> 
> 标签：java, geometry

我有一个从 +PI 到 -PI 弧度的数据值。

我需要获得从旧值到新值所需的最小旋转（以弧度为单位），例如：

```
float rotationRequired(float oldValue, float newValue){
      return newValue - oldValue;
} 
```

但简单地减去是行不通的，因为从 -179 度到 +179 度不需要旋转一整圈，只需顺时针旋转 2 度。因为 -PI = +PI 在一个圆圈中在技术上是相同的旋转。此外，这些值可以在任何范围内，即 740 = 360 + 360 + 20，因此只有 20。

我正在考虑将值分解为`sin`值`cos`，然后减去`atan`：

```
double oldY =  Math.sin(oldValue);
double oldX =  Math.cos(oldValue);

double newY =  Math.sin(newValue);
double newX =  Math.cos(newValue);

float delta = (float) Math.atan2( (newY - oldY),(newX - oldX) ); 
```

但是它仍然没有给出正确的结果，有人可以提出另一种方法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:56:24.727

只需进行减法，然后根据需要通过添加或减去 360 将结果限制为 +/-180（`%`操作员可能会在这里提供帮助...）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-29T20:52:51.727

我将角度转换为度数，并使用这种方法来建议需要的最小旋转以及方向：

```
public static int suggestRotation(int o, int n){
    //--convert to +0 to +360 range--
    o = normalize(o);
    n = normalize(n);

    //-- required angle change --
    int d1 = n - o;

    //---other (360 - abs d1 ) angle change in reverse (opp to d1) direction--
    int d2 = d1 == 0 ? 0 : Math.abs(360 - Math.abs(d1))*(d1/Math.abs(d1))*-1;

    //--give whichever has minimum rotation--
    if(Math.abs(d1) < Math.abs(d2)){
        return d1;
    }else {
        return d2;
    }

}

private static int normalize(int i){
    //--find effective angle--
    int d = Math.abs(i) % 360;

    if(i < 0){
    //--return positive equivalent--
        return 360 - d;
    }else {
        return d;
    }
} 
```

# mysql - 按 ORDER BY 对字母后的数字进行排序

> ID：14587995
> 
> 赞同：3
> 
> 时间：2013-01-29T16:53:36.953
> 
> 标签：mysql, sql, database, sql-order-by

您好，我正在尝试通过排序在 mysql 中进行排序

*   特殊字符
*   信件
*   然后数字

似乎mysql排序

*   特殊字符
*   数字
*   然后是字母

见下文

```
select distinct uag_linecode from part order by uag_linecode;

| A-1          |
| A/C          |
| A1S          |  out of place
| ABP          |
| ABS          |
| ACI          |
| ADM          |
| ADR          |
| BAS          | 
```

这就是我要的：

```
A-1 
A/C
ABR
ABS
ACI
ADM
ADR 
A1S correct spot
BAS 
```

如果有人可以帮助我，我将永远感激不尽。

所有行代码的长度始终为 3 个字符。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-29T17:06:01.297

如果它总是第二个字符，这样的东西会起作用——你可以添加到 case 子句来检查第一个和第三个字符......

```
select distinct uag_linecode,
substring(uag_linecode, 2, 1)
from part
order by 
  case 
    when substring(uag_linecode, 2, 1) REGEXP ('^[0-9]') THEN 1 ELSE 0 END , uag_linecode 
```

这是[SQL 小提琴](http://sqlfiddle.com/#!2/09afe/7)。

--EDIT 这似乎也适用于第一个和第三个字符：

```
select distinct uag_linecode,
   substring(uag_linecode, 1, 1),
   substring(uag_linecode, 2, 1),
   substring(uag_linecode, 3, 1)
from part
order by 
   case when substring(uag_linecode, 1, 1) REGEXP ('^[0-9]') THEN 1 ELSE 0 END,
   substring(uag_linecode, 1, 1),
   case when substring(uag_linecode, 2, 1) REGEXP ('^[0-9]') THEN 1 ELSE 0 END,
   substring(uag_linecode, 2, 1),
   case when substring(uag_linecode, 3, 1) REGEXP ('^[0-9]') THEN 1 ELSE 0 END ,    
   substring(uag_linecode, 3, 1) 
```

还有更多[小提琴](http://sqlfiddle.com/#!2/71100/3)。

同样正如@Orbling 正确所说，您将获得更好的性能（特别是如果您有很多记录）来删除REDEXP 并使用> = '0' AND <= '9'。

祝你好运。

# javascript - 自我实例

> ID：14587996
> 
> 赞同：0
> 
> 时间：2013-01-29T16:53:41.497
> 
> 标签：javascript, requirejs

```
// util/model.js

define(['util/class'], function(classCtor) {
    return classCtor.create({
        set: function(key, value) {
            // this doesn't work, because self is pointing to window
            if (value instanceof self) {
                // do Something
            }
        }
    });
}); 
```

这应该是我所有实体的基类。因为我的模块是用 RequireJS 风格编写的，所以我可以使用以下解决方法：

```
if (value instanceof require('util/model')) 
```

这工作正常，但现在我的代码耦合到 ModuleName。有什么建议可以避免这种耦合吗？顺便说一句：我使用来自[Steffen Rusitschka](http://www.ruzee.com/blog/2008/12/javascript-inheritance-via-prototypes-and-closures)的基于原型的助手来构建我的类

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-29T16:57:03.130

你可以只为你的匿名类使用一个变量：

```
define(['util/class'], function(classCtor) {
    var self = classCtor.create({
        set: function(key, value) {
            // self is the class now:
            if (value instanceof self) {
                // do Something
            }
        }
    });
    return self;
}); 
```

# python - 导入networkx——不导入

> ID：14587998
> 
> 赞同：0
> 
> 时间：2013-01-29T16:53:45.697
> 
> 标签：python, graph, networkx

我在雪豹上。我有python 2.6。我通过“easy_install networkx”安装了networkx，然后使用从站点下载的包卸载并重新安装。每次安装都不会让我到任何地方：当我这样做时：“import networkx”我只是得到一个空响应，没有任何反应。有什么线索吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T16:55:33.400

如果什么都没发生，那就意味着它起作用了。如果安装没有成功，就会出现如下错误：

```
>>> import networkx
Traceback (most recent call last):
  File "<stdin>", line 1, in <module>
ImportError: No module named networkx 
```

试试代码：

```
G=networkx.Graph()
G.add_edge(1, 2)
print G.nodes() 
```

你应该看到它有效（打印`[1, 2]`）。

# java - BorderLayout 无法正确显示

> ID：14587999
> 
> 赞同：1
> 
> 时间：2013-01-29T16:53:48.150
> 
> 标签：java, swing, jpanel, border-layout

我想要一个JFrame，在左边和右边有一个边框，颜色为黑色，宽度为withfOfJFrame/10。

现在，我的尝试看起来像这样：

```
JFrame f = new JFrame();
f.setSize(800, 600);
f.setLayout(new BorderLayout());

JPanel leftBorder = new JPanel();
JPanel rightBorder = new JPanel();
leftBorder.setBackground(Color.black);
rightBorder.setBackground(Color.black);
leftBorder.setSize(f.getWidth()/10, f.getHeight());
rightBorder.setSize(f.getWidth()/10, f.getHeight());
JPanel center = new JPanel();
center.setBackground(Color.red);

f.add(leftBorder, BorderLayout.WEST);
f.add(center, BorderLayout.CENTER);
f.add(rightBorder, BorderLayout.EAST);    
f.setVisible(true); 
```

这会在左侧和右侧添加一个黑色边框，但该边框具有固定大小，并且在调整窗口大小时不会重新计算。大小甚至不是 800 的 1/10（JFrame 的开始宽度）。

我究竟做错了什么？还是有更好的方法来做到这一点？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-29T17:22:10.627

[`GridBagLayout`](http://docs.oracle.com/javase/tutorial/uiswing/layout/gridbag.html)您可以使用 a和适当的权重来获得所需的结果：

```
public class Snippet {
    public static void main(String[] args) {
        SwingUtilities.invokeLater(new Runnable() {

            @Override
            public void run() {
                JFrame f = new JFrame();
                f.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);

                JPanel leftBorder = new JPanel();
                JPanel rightBorder = new JPanel();
                leftBorder.setBackground(Color.black);
                rightBorder.setBackground(Color.black);

                JPanel center = new JPanel();
                center.setBackground(Color.red);

                f.setLayout(new GridBagLayout());

                GridBagConstraints gbc = new GridBagConstraints();
                gbc.fill = GridBagConstraints.BOTH;
                gbc.weighty = 1.0;
                gbc.gridy = 0;
                gbc.gridwidth = 1;
                gbc.gridheight = 1;

                gbc.gridx = 0;
                gbc.weightx = 0.1;
                f.add(leftBorder, gbc);

                gbc.gridx = 1;
                gbc.weightx = 0.8;
                f.add(center, gbc);

                gbc.gridx = 2;
                gbc.weightx = 0.1;
                f.add(rightBorder, gbc);

                f.pack();
                f.setVisible(true);
            }
        });
    }
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-01-29T17:19:31.093

A`ComponentListener`适用于此。

附录：`Flank`面板需要`revalidate()`自己明确地响应任何尺寸变化。

![图片](../Images/89aea87a7c8642baf6e53daf18d70656.png)

```
import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.Dimension;
import java.awt.EventQueue;
import java.awt.event.ComponentAdapter;
import java.awt.event.ComponentEvent;
import javax.swing.JFrame;
import javax.swing.JPanel;

/** @see http://stackoverflow.com/a/14588506/230513 */
public class Test {

    private static final int W = 320;
    private static final Center center = new Center();

    private static class Center extends JPanel {

        public Center() {
            setBackground(Color.red);
        }

        @Override
        public Dimension getPreferredSize() {
            return new Dimension(W, 3 * W / 4);
        }
    };

    private static class Flank extends JPanel {

        private Dimension d = new Dimension(W / 10, 0);

        public Flank() {
            setBackground(Color.black);
            Test.center.addComponentListener(new ComponentAdapter() {

                @Override
                public void componentResized(ComponentEvent e) {
                    d = new Dimension(e.getComponent().getWidth() / 10, 0);
                    revalidate();
                }
            });
        }

        @Override
        public Dimension getPreferredSize() {
            return d;
        }
    }

    private void display() {
        JFrame f = new JFrame("Test");
        f.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);

        f.add(new Flank(), BorderLayout.WEST);
        f.add(center, BorderLayout.CENTER);
        f.add(new Flank(), BorderLayout.EAST);

        f.pack();
        f.setLocationRelativeTo(null);
        f.setVisible(true);
    }

    public static void main(String[] args) {
        EventQueue.invokeLater(new Runnable() {

            @Override
            public void run() {
                new Test().display();
            }
        });
    }
} 
```