# StackOverflow 问答 16216000-16216999

# javascript - HighCharts 饼图图例对齐

> ID：16216004
> 
> 赞同：1
> 
> 时间：2013-04-25T13:25:13.177
> 
> 标签：javascript, highcharts

基本上我想做的是在我的legened中使用数据名称和值，但是让它们间隔开，以便数据名称向左对齐，数据值像这样向右对齐；

```
Name1           Val1
Name2           Val2 
```

等目前默认为

```
Name1 Val1
Name2 Val2 
```

我设置的中间只有一个空格，但是如果名称 1 是 10 个字符，名称 2 是 8 个字符，它们会像这样交错；

```
Name1isthis Val1
Name2lookslikethis Val2 
```

任何帮助表示赞赏。这是代码和我的小提琴。[http://jsfiddle.net/hAnCr/1/](http://jsfiddle.net/hAnCr/1/)

```
$("document").ready(
function(){
$('#container').highcharts({
        chart:{type:'pie'},
        credits:{enabled: false},
        colors:[
            '#5485BC', '#AA8C30', '#5C9384', '#981A37', '#FCB319',     '#86A033', '#614931', '#00526F', '#594266', '#cb6828', '#aaaaab', '#a89375'
            ],
        title:{text: null},
         tooltip: {
            pointFormat: '<b>{point.y}%</b>',
            percentageDecimals: 1
        },
        plotOptions: {
            pie: {
                allowPointSelect: true,                 
                cursor: 'pointer',
                showInLegend: true,
                dataLabels: {
                    enabled: false                       
                }                                   
            }
        },
        legend: {
            enabled: true,
            layout: 'vertical',
            align: 'right',
            verticalAlign: 'middle',
            labelFormatter: function() {
                return this.name + ' ' + this.y + '%';
            }
        },
        series: [{
            type: 'pie',
            dataLabels:{

            },
            data: [
                ['Domestic Equity', 38.5],
                ['International Equity', 26.85],
                ['Other', 15.70],
                ['Cash and Equivalents', 10.48],
                ['Fixed Income', 8.48]
            ]
        }]
    });
}); 
```

# c# - Nunit-C#：通过编码运行特定的测试

> ID：16216011
> 
> 赞同：5
> 
> 时间：2013-04-25T13:25:29.163
> 
> 标签：c#, nunit

我正在使用 Selenium 和 C# 进行自动化，我想通过代码调用 NUnit，如下所示：

```
CoreExtensions.Host.InitializeService();
TestPackage testPackage = new TestPackage(@"D:\Automation\bin\Debug\Test.dll");
RemoteTestRunner remoteTestRunner = new RemoteTestRunner();
remoteTestRunner.Load(testPackage);
//TestFilter filter = new NameFilter(new TestName() { Name = "Test1" });
TestResult testResult = remoteTestRunner.Run(
    new NullListener(),
    TestFilter.Empty,
    false,
    LoggingThreshold.Off
); 
```

我可以使用如下的类别过滤器运行测试

```
remoteTestRunner.Run(
    new NullListener(),
    new CategoryFilter("MyCat"),
    false,
    LoggingThreshold.Off
); 
```

但我想执行特定的测试。如何设置套件过滤器？我尝试了以下方法，但它不起作用：

```
TestFilter filter = new NameFilter(new TestName() { Name = "Test1" }); 
TestResult testResult = remoteTestRunner.Run(
    new NullListener(),
    filter,
    false,
    LoggingThreshold.Off
); 
```

如何运行特定测试以及如何通过代码传递参数？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-05-10T09:58:14.540

此示例代码应该让您了解开始循环测试并选择要运行的测试所需执行的操作。我已经使用了几个 0 的数组索引，您应该在其中循环。

它的要点是，您必须先实际加载测试，然后才能开始尝试单独运行它们，因为测试需要具有唯一的 TestId，只有在加载后才会设置。以下代码工作并运行测试框架中第一个 testfixture 中的第一个测试。它还会扫描所有测试名称，以便您根据某些条件显示或运行

```
CoreExtensions.Host.InitializeService();
TestSuiteBuilder builder = new TestSuiteBuilder();
TestPackage testPackage = new TestPackage(@"path.to.dll");
RemoteTestRunner remoteTestRunner = new RemoteTestRunner();
remoteTestRunner.Load(testPackage);
TestSuite suite = builder.Build(testPackage);
TestSuite test = suite.Tests[0] as TestSuite;
var numberOfTests = ((TestFixture)test.Tests[0]).TestCount;

foreach (TestMethod t in ((TestFixture)test.Tests[0]).Tests)
{
    Console.WriteLine(t.TestName.Name);
}

TestName testName = ((TestMethod)((TestFixture)test.Tests[0]).Tests[0]).TestName;
TestFilter filter = new NameFilter(testName);
TestResult result = test.Run(new NullListener(), filter);
ResultSummarizer summ = new ResultSummarizer(result);
Assert.AreEqual(1, summ.ResultCount); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-20T12:41:39.887

这是我的工作代码....

```
 SimpleNameFilter filter = new SimpleNameFilter()

    foreach (DataRow DR in DT.Rows)
    {
    string Test = "FullNameOftheTest";
    filter.Add(Test); 
    }

  CoreExtensions.Host.InitializeService();
  TestPackage testPackage = new TestPackage(@"D:\Test\Test.dll");
  RemoteTestRunner remoteTestRunner = new RemoteTestRunner();
  remoteTestRunner.Load(testPackage);
  TestResult result = remoteTestRunner.Run(new NullListener(), filter, true,          LoggingThreshold.All);
  ResultSummarizer summaryResults = new ResultSummarizer(result); 
```

感谢大家的支持，基肖尔。

# c# - 实体框架创建对应于模型中每个类的单独数据库

> ID：16216014
> 
> 赞同：4
> 
> 时间：2013-04-25T13:25:38.857
> 
> 标签：c#, asp.net, sql-server, asp.net-mvc-4, entity-framework-5

我已经开始在 ASP.NET MVC4 中使用实体框架。

我在我的`Model`文件夹中创建了 3 个类，并为每个模型创建了控制器。

现在，当我运行应用程序时，它已经创建了与每个​​模型类对应的单独数据库。

有什么方法可以只使用一个数据库吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:09:40.797

您是否为每个类创建单独的上下文？

```
public class Employee 
{
    [Key] public int EmpId { get; set; } // < Can I make a suggestion here
                                         // and suggest you use Id rather than
                                         // EmpId?  It looks better referring to 
                                         // employee.Id rather than employee.EmpId
    [Required] public string Fullname { get; set; }
    ...
}

public class AnotherClass
{
    ...
} 
```

然后在上下文中列出所有模型：

```
public MyDbContext : DbContext
{
    public DbSet<Employee> Employees { get; set; }
    public DbSet<AnotherClass> AnotherClasses { get; set; }
} 
```

您可能还想通过在 Context 中使用构造函数来指定连接字符串名称：

```
public MyDbContext() : base("ConnectionString") {  } 
```

重要的是你的所有模型都在同一个上下文中。

**使用上下文**

```
var context = new MyDbContext();
var employees = context.employees.ToList(); // I prefer storing the data as an IList 
```

这告诉 EF 查询数据库并将数据存储在 employees 变量中。

# jquery - 这个 jquery each() 选择选项有什么问题？

> ID：16216015
> 
> 赞同：0
> 
> 时间：2013-04-25T13:25:41.180
> 
> 标签：jquery, each

我有以下功能，

```
function setDropdownValue(dropdownId,selectedValue){
            $('#'+dropdownId+' option').each(function(){
                 if ($(this).val().toLowerCase()==selectedValue.toLowerCase()){
                     //found the option i  was looking for, do what i want
                     $(this).val(selectedValue);
                 }
            });
        } 
```

我正在传递`dropdownId=$('#dp1")`，`selectedValue='Bat'`并且由于某种原因我的 each() 函数没有被执行..我这样打电话`setDropdownValue($("#dp1"),'Bat');`我错过了什么吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:28:17.320

`dropdownId`应该只是一个字符串，你为什么要传递`$('#dp1")`一个 jQuery 对象？

你应该只是通过`'dp1'`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:29:57.520

试试喜欢

```
$('#dp1 option').each(function(){
             if ($(this).val().toLowerCase()==selectedValue.toLowerCase()){
                 //found the option i  was looking for, do what i want
                 $(this).val(selectedValue);
             }
        }); 
```

为什么需要使用 dropdownId ....有时它会导致一些冲突

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:33:30.223

我认为更好的解决方案是将您的函数编写如下，因为这将保持您的小写逻辑

```
function setDropdown(id, value){
   var dropdown = $('#' + id);
   dropdown.find('option').each(function(){
       if($(this).val().toLowerCase() == value.toLowerCase()){
           dropdown.val($(this).val());
           return;
       }
   });
} 
```

我会这样称呼这个函数......

```
setDropdown('myDropdownId', '0000-AABBCC'); 
```

我倾向于认为您应该在选择上设置“val”，而不是在选项本身上。我以前见过这种方法的怪癖。

# google-maps-android-api-2 - Android 谷歌地图 V2 方向

> ID：16216018
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:25:45.027
> 
> 标签：google-maps-android-api-2

我正在尝试获取两个位置之间的行驶方向-

**LatLng(15.244,45.85555) 和 LatLng(78.459,97.4666)。**

我尝试过的代码 -

```
 Polyline line = mMap.addPolyline(new PolylineOptions().
    add(new LatLng(15.244,45.85555),
    new LatLng(78.459,97.4666))
    .width(5).color(Color.RED)); 
```

但这在两点之间画了一条直线。

是否有任何其他方法/方式来获取这两点之间的行车路线。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-13T09:51:01.990

像这样尝试：

创建`GMapV2Direction` 类

```
public class GMapV2Direction {
public final static String MODE_DRIVING = "driving";
public final static String MODE_WALKING = "walking";
public final static String MODE_BICYCLING = "bicycling";

ArrayList<String> str=new ArrayList<String>();

public GMapV2Direction() { }

public Document getDocument(LatLng start, LatLng end, String mode) {
    String url = "http://maps.googleapis.com/maps/api/directions/xml?" 
            + "origin=" + start.latitude + "," + start.longitude  
            + "&destination=" + end.latitude + "," + end.longitude 
            + "&sensor=false&units=metric&"+"mode="+mode;

    System.out.print(url);

    try {
        HttpClient httpClient = new DefaultHttpClient();
        HttpContext localContext = new BasicHttpContext();
        HttpPost httpPost = new HttpPost(url);
        HttpResponse response = httpClient.execute(httpPost, localContext);
        InputStream in = response.getEntity().getContent();
        DocumentBuilder builder = DocumentBuilderFactory.newInstance().newDocumentBuilder();
        Document doc = builder.parse(in);
        return doc;
    } catch (Exception e) {
        e.printStackTrace();
    }
    return null;
}

public String getDurationText (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("duration");
    Node node1 = nl1.item(0);
    NodeList nl2 = node1.getChildNodes();
    Node node2 = nl2.item(getNodeIndex(nl2, "text"));
    Log.i("DurationText", node2.getTextContent());
    return node2.getTextContent();
}

public int getDurationValue (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("duration");
    Node node1 = nl1.item(0);
    NodeList nl2 = node1.getChildNodes();
    Node node2 = nl2.item(getNodeIndex(nl2, "value"));
    Log.i("DurationValue", node2.getTextContent());
    return Integer.parseInt(node2.getTextContent());
}

public String getDistanceText (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("distance");
    Node node1 = nl1.item(0);
    NodeList nl2 = node1.getChildNodes();
    Node node2 = nl2.item(getNodeIndex(nl2, "text"));
    Log.i("DistanceText", node2.getTextContent());
    return node2.getTextContent();
}

public int getDistanceValue (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("distance");
    Node node1 = nl1.item(0);
    NodeList nl2 = node1.getChildNodes();
    Node node2 = nl2.item(getNodeIndex(nl2, "value"));
    Log.i("DistanceValue", node2.getTextContent());
    return Integer.parseInt(node2.getTextContent());
}

public String getStartAddress (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("start_address");
    Node node1 = nl1.item(0);
    Log.i("StartAddress", node1.getTextContent());
    return node1.getTextContent();
}

public String getEndAddress (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("end_address");
    Node node1 = nl1.item(0);
    Log.i("StartAddress", node1.getTextContent());
    return node1.getTextContent();
}

public String getCopyRights (Document doc) {
    NodeList nl1 = doc.getElementsByTagName("copyrights");
    Node node1 = nl1.item(0);
    Log.i("CopyRights", node1.getTextContent());
    return node1.getTextContent();
}

public ArrayList<LatLng> getDirection (Document doc) {
    NodeList nl1, nl2, nl3;
    ArrayList<LatLng> listGeopoints = new ArrayList<LatLng>();
    nl1 = doc.getElementsByTagName("step");
    if (nl1.getLength() > 0) {
        for (int i = 0; i < nl1.getLength(); i++) {
            Node node1 = nl1.item(i);
            nl2 = node1.getChildNodes();

            Node locationNode = nl2.item(getNodeIndex(nl2, "start_location"));
            nl3 = locationNode.getChildNodes();
            Node latNode = nl3.item(getNodeIndex(nl3, "lat"));
            double lat = Double.parseDouble(latNode.getTextContent());
            Node lngNode = nl3.item(getNodeIndex(nl3, "lng"));
            double lng = Double.parseDouble(lngNode.getTextContent());
            listGeopoints.add(new LatLng(lat, lng));

            locationNode = nl2.item(getNodeIndex(nl2, "polyline"));
            nl3 = locationNode.getChildNodes();
            latNode = nl3.item(getNodeIndex(nl3, "points"));
            ArrayList<LatLng> arr = decodePoly(latNode.getTextContent());
            for(int j = 0 ; j < arr.size() ; j++) {
                listGeopoints.add(new LatLng(arr.get(j).latitude, arr.get(j).longitude));
            }

            locationNode = nl2.item(getNodeIndex(nl2, "end_location"));
            nl3 = locationNode.getChildNodes();
            latNode = nl3.item(getNodeIndex(nl3, "lat"));
            lat = Double.parseDouble(latNode.getTextContent());
            lngNode = nl3.item(getNodeIndex(nl3, "lng"));
            lng = Double.parseDouble(lngNode.getTextContent());
            listGeopoints.add(new LatLng(lat, lng));
        }
    }

    return listGeopoints;
}

private int getNodeIndex(NodeList nl, String nodename) {
    for(int i = 0 ; i < nl.getLength() ; i++) {
        if(nl.item(i).getNodeName().equals(nodename))
            return i;
    }
    return -1;
}

private ArrayList<LatLng> decodePoly(String encoded) {
    ArrayList<LatLng> poly = new ArrayList<LatLng>();
    int index = 0, len = encoded.length();
    int lat = 0, lng = 0;
    while (index < len) {
        int b, shift = 0, result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlat = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lat += dlat;
        shift = 0;
        result = 0;
        do {
            b = encoded.charAt(index++) - 63;
            result |= (b & 0x1f) << shift;
            shift += 5;
        } while (b >= 0x20);
        int dlng = ((result & 1) != 0 ? ~(result >> 1) : (result >> 1));
        lng += dlng;

        LatLng position = new LatLng((double) lat / 1E5, (double) lng / 1E5);
        poly.add(position);
    }
    return poly;
} 
```

}

`Activity`用你喜欢的方式定义这个

```
 public final String MODE_DRIVING = "driving";
public final String MODE_WALKING = "walking";
public final String MODE_BICYCLING = "bicycling"; 
```

现在，`AsyncTask`像这样实现：

```
 class AsyncTask1 extends AsyncTask<String, String, Void> {
    String mode_in = "";
    int duration ;
    String distance;

    @Override
    protected void onPreExecute() {
        super.onPreExecute();
        mProgressDialog = new ProgressDialog(Main2.this);
        mProgressDialog.setMessage("Please wait..");
        mProgressDialog.setProgressStyle(ProgressDialog.STYLE_SPINNER);
        mProgressDialog.setCancelable(false);
        mProgressDialog.show();
    }

    @Override
    protected Void doInBackground(String... aurl) {

        try {
            try {

                mode_in = aurl[0];

                Document doc = md.getDocument(fromPosition, toPosition,aurl[0]);

                duration = md.getDurationValue(doc);
                distance = md.getDistanceText(doc);
                String start_address = md.getStartAddress(doc);
                String copy_right = md.getCopyRights(doc);

                    System.out.print(duration + distance + start_address
                            + copy_right);

                    directionPoint = md.getDirection(doc);

                    rectLine = new PolylineOptions().width(2);

            } catch (Exception e) {
                e.printStackTrace();
            }

        } catch (Exception e) {
        }
        return null;
    }

    @Override
    protected void onPostExecute(Void result) {
        mProgressDialog.dismiss();

        if (directionPoint.size() > 0) {
            try {
                for (int i = 0; i < directionPoint.size(); i++) {
                    rectLine.add(directionPoint.get(i));
                }

                if (rbDriving.isChecked()) {
                    mode = MODE_DRIVING;
                    rectLine.color(Color.RED);
                } else if (rbBiCycling.isChecked()) {
                    mode = MODE_BICYCLING;
                    rectLine.color(Color.GREEN);
                } else if (rbWalking.isChecked()) {
                    mode = MODE_WALKING;
                    rectLine.color(Color.BLUE);
                }

                tv_distance_time.setText("Duration: "+duration
                        +" ,Distance: "+distance);

                mMap.addPolyline(rectLine);

            } catch (Exception e) {
                e.printStackTrace();
            }

        } else {
            AlertDialog.Builder builder = new AlertDialog.Builder(
                    getParent());
            builder.setTitle("No route found");
            builder.setMessage("No route found");
            builder.setPositiveButton("OK",
                    new DialogInterface.OnClickListener() {
                        @Override
                        public void onClick(DialogInterface dialog,
                                int which) {
                            dialog.dismiss();
                        }
                    });

            builder.create().show();
        }

    }
} 
```

叫`AsyncTask`像

```
new AsyncTask1().execute(mode); 
```

希望这对你有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T21:25:51.583

使用路线 API。

示例： [http ://maps.googleapis.com/maps/api/directions/json?origin=50.1,19.6&destination=52.666,20.0&sensor=false](http://maps.googleapis.com/maps/api/directions/json?origin=50.1,19.6&destination=52.666,20.0&sensor=false)

您需要使用一堆点进行后台处理、解析和显示折线。

[文档在这里。](https://developers.google.com/maps/documentation/directions/)

# mysql - 在 MySQL 中为 UTF-8 内容添加一列

> ID：16216020
> 
> 赞同：6
> 
> 时间：2013-04-25T13:25:46.657
> 
> 标签：mysql, sql, ddl

任何人都有想法，如何在 MySQL 中添加用于存储 UTF-8 内容的列？

我尝试了以下方法：

```
ALTER TABLE tname ADD COLUMN cname TEXT CHARACTER SET utf8 COLLATE utf8_general_ci IF NOT EXISTS; 
```

这给出了一个错误：

> ERROR 1064 (42000)：您的 SQL 语法有错误；检查与您的 MySQL 服务器版本相对应的手册，以在第 1 行的“如果不存在”附近使用正确的语法

我想添加一个使用 UTF-8 编码的新*列。*

谢谢。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T13:28:40.987

这不是[ALTER TABLE](http://dev.mysql.com/doc/refman/5.6/en/alter-table.html)的有效语法。

这是正确的方法：

```
ALTER TABLE tname ADD COLUMN cname TEXT CHARACTER SET utf8 COLLATE utf8_general_ci; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2018-12-13T10:16:46.527

在为表指定排序规则时，您一直对表很小心。

```
alter table table_name add column column_name text character set utf8 COLLATE utf8_unicode_ci DEFAULT NULL comment 'Comment to the attachment file'; 
```

# cocos2d-iphone - 围绕一个点旋转身体 Box2D Cocos2d

> ID：16216021
> 
> 赞同：1
> 
> 时间：2013-04-25T13:25:47.613
> 
> 标签：cocos2d-iphone, rotation, box2d, point

旋转三角形图像（如雷达探测敌人）时出现问题。

```
b2Body *body;
CCSprite *actor;

if (b->GetType() == b2_kinematicBody && myActor == [loader spriteWithUniqueName:@"radar."]){

        radar = b;
        radarSprite = myActor;
    } 
```

这是一个用 LevelHelper 制作的运动体，我想旋转它。所以我需要它围绕一个静态点旋转，并向后重复运动。由于它是 Body 而不是 Sprite，我不知道如何让它**围绕 top point 旋转**。

我有一个想法，但我不确定。如果我旋转 CCSprite 并将 Body 移动到 sprite.position 会怎样？可能吗？

非常感谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T08:57:15.563

以下是我如何根据他们的精灵更新 box2d 身体的位置和旋转：

```
// Box2d updates.
// We set position of b2Bodies according to their sprites.
_world->Step(delta, 10, 10);
for(b2Body *b = _world->GetBodyList(); b; b=b->GetNext())
{
    if (b->GetUserData() != NULL)
    {
        GameObject *sprite = (GameObject *)b->GetUserData();
        b2Vec2 b2Position = b2Vec2(sprite.position.x/PTM_RATIO,
                                   sprite.position.y/PTM_RATIO);

        float32 b2Angle = -1 * CC_DEGREES_TO_RADIANS(sprite.rotation);
        b->SetTransform(b2Position, b2Angle);
    }
} 
```

# extjs4.1 - 如何以编程方式触发 mousedown 事件？

> ID：16216028
> 
> 赞同：0
> 
> 时间：2013-04-25T13:26:05.290
> 
> 标签：extjs4.1

我有一个表单面板和里面的一些字段。

我正在为显示字段边框的表单注册 mousedown 事件。当其他字段发生 mousedown 时，我将删除现有字段边框并将其应用于发生 mousedown 的当前字段。

对于这个表单，我正在动态添加字段。现在对于新添加的字段，我想显示边框，即，我想以编程方式触发 mousedown 事件。

你能建议我如何实现吗？

问候网址

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T21:32:45.783

最好的办法不是以编程方式触发鼠标按下事件，而是调用鼠标按下事件使用的函数。

# resharper - Resharper 7 中的 Jasmine 和 Requirejs

> ID：16216032
> 
> 赞同：4
> 
> 时间：2013-04-25T13:26:14.473
> 
> 标签：resharper, requirejs, jasmine

我正在尝试在 Visual Studio 2012 中使用 jasmine 和 Resharper 7 运行一些 JavaScript 代码。我在 requirejs 的帮助下遵循 AMD 模式。但是，我还没有设法在 Resharper 测试运行器中运行我的测试。

有没有人设法做类似的事情？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-07-12T19:24:01.003

使用命名的 requireJS 模块

```
define("my/sut", function () {

    var MySut = function () {
        return {
            answer: 42
        };
    };
    return MySut;
}); 
```

并使用 Jasmine 的异步支持初始化 SUT。不要忘记参考！

```
/// <reference path="~/Scripts/require.js"/>
/// <reference path="../code/sut.js" />

describe("requireJS with Jasmine and Resharper", function () {

    it("should be executed", function () {

        // init SUT async
        var sut;
        runs(function () {
            require(['my/sut'], function (MyModel) {
                sut = new MyModel();
            });
        });
        waitsFor(function () {
            return sut;
        }, "The Value should be incremented", 100);

        // run the test
        runs(function () {
            expect(sut.answer).toBe(42);
        });
    });
}); 
```

我希望这适用于更多模块。就我而言，它与 waitsFor '0' ms 一起使用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-09T15:33:49.647

mgsdev 响应的简化版本，将加载代码放在 beforeEach 语句中，这样您就可以编写简短的期望。

模块：

```
define("stringCalculator", function () {
    return {
        calculate: function (string) {
            var result = 0;
            string.split("+").forEach(function(number) {
                result += parseInt(number);
            });
            return result;
        }
    };
}); 
```

测试文件：如果计算器未定义，它将在每次预期之前尝试加载它。

```
/// <reference path="~/Scripts/require.js"/>
/// <reference path="~/code/stringCalculator.js"/>

describe("string calculator", function () {
    var calculator;

    beforeEach(function () {    
        if (!calculator) {
            require(["stringCalculator"], function (stringCalculator) {
                calculator = stringCalculator;
            });

            waitsFor(function () {
                return calculator;
            }, "loading external module", 1000);
        }
    });

    it("should add 1 and 2", function () {
        var result = calculator.calculate("1+2");
        expect(result).toEqual(3);
    });

    it("should add 2 and 2", function () {
        var result = calculator.calculate("2+2");
        expect(result).toEqual(4);
    });

    it("should add 1, 2 and 3", function() {
        var result = calculator.calculate("1+2+3");
        expect(result).toEqual(6);
    });
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-11-10T19:56:27.903

如果您使用 Jasmine 2.0 或更新版本，您可以在代码中支持异步调用。只需将**done**参数传递给**it**单元测试的函数，然后在加载模块时调用**done() ：**

```
describe("add function", function(){
   it("calls renderNew", function(done){
      define("taskRenderer", [], function() {
         return {
            renderNew: function(){}
         };
      });

      require(["taskRenderer"], function(taskRenderer) {
         spyOn(taskRenderer, "renderNew");
         taskRenderer.renderNew();
         expect(taskRenderer.renderNew).toHaveBeenCalled();
         done();
      });
   }
} 
```

这样，在加载模块并且测试不会过早地被标记为完成之前，您实际上不会执行测试。

# jquery - 将当前设备位置保存在 jQuery 中的一个变量中

> ID：16216033
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:26:17.403
> 
> 标签：jquery, geolocation, device

我想将设备当前位置保存到一个变量中。可能吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:29:10.100

您可以使用地理定位 API 来获取当前位置。

[http://mobile.tutsplus.com/tutorials/mobile-web-apps/html5-geolocation/](http://mobile.tutsplus.com/tutorials/mobile-web-apps/html5-geolocation/)

使用我上面提到的 API 将位置保存在变量中：

```
var currentLocation; //this variable will store current location.
     jQuery(window).ready(function(){  
                jQuery("#btnInit").click(initiate_geolocation);  
            });  
            function initiate_geolocation() {  
              //store current location
              currentLocation =  navigator.geolocation.getCurrentPosition(handle_geolocation_query);  
            }  
            function handle_geolocation_query(position){  
                alert('Lat: ' + position.coords.latitude + ' ' +  
                      'Lon: ' + position.coords.longitude);  
            } 
```

# php - 如何将复选框中的值更新到 MySQL

> ID：16216035
> 
> 赞同：-2
> 
> 时间：2013-04-25T13:26:30.070
> 
> 标签：php, mysql

我的表格是 form method="post">

输入类型=“复选框”名称=“脸书”值=“是”>

提交

所以，我想做的是：

a) 如果选中该复选框，我想用 yes 更新相应的字段

b）如果未选中该复选框，我想更新该字段没有

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:30:13.200

使用这种形式：

```
<form method='POST'>
    <input type='checkbox' name='myCheckbox' />
    <input type='submit' name='submit' value='Submit' />
</form> 
```

您可以在服务器端以这种方式处理它：

```
<?php
    $mysqli = new mysqli("localhost", "myUser", "myPassword", "myDb");

    if(isset($_POST['submit'])) {
        $value = $_POST['myCheckbox'] ? 1 : 0;
        $mysqli->query("UPDATE myTable SET myTinyInt = " . $value);
    }
?> 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:29:25.290

`$_POST['chk_ans']`只有在检查时才会返回，

```
if (isset($_POST['chk_ans']))
{

..Update Query here ..

} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:30:37.147

首先，您希望在 sql 中准备好所有东西，一个您希望值进入的表，以及您想要使其工作的过程，您可能需要创建一个插入过程和一个更新过程。然后，您要调用该方法，以便可以将您的值添加到 sql 中。

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2013-04-25T14:38:17.147

Try this:

```
<?php

            // You'll need a connection to db, in my example (mysql connection) this is not included.

            // Check if form has been submitted.
            if($_SERVER['REQUEST_METHOD'] == 'POST') {

                $field = (isset($_POST['facebook']) AND $_POST['facebook'] == 'yes') ? 'yes' : 'no';

                // Your query: In this example for mysql extension
                mysql_query('UPDATE my_table SET field="'.mysql_real_escape_string($field).'"');

            }

        ?> 
```

# c++ - 如何创建指向对象指针数组的指针

> ID：16216037
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:26:37.867
> 
> 标签：c++

我有一个指向 Block 对象的指针的二维数组

```
Block* grid[GRID_COLUMNS][GRID_ROWS];
for (int i=0; i>GRID_COLUMNS; i++)
{
    for (int k=0; k>GRID_ROWS; k++)
    {
        grid[i][k] = NULL;
    }
} 
```

如何创建指向网格的指针？

```
??? // create pointer to grid here

myBlock.ShiftDown(???); // pass pointer to grid to the function 
```

myBlock.ShiftDown 的函数定义。我应该用什么代替??? 使这项工作？

```
void Block::ShiftDown(???)
{
    if (row == GRID_ROWS)
        ???grid[column][row] = this;
    else
        row++;
} 
```

编辑：我在这里要做的是让 Block::ShiftDown 操纵网格。如果有更简单的方法可以做到这一点，那么我想听听。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:30:20.303

有什么问题：

```
void Block::ShiftDown(Block* g[GRID_COLUMNS][GRID_ROWS])
{
    if (row == GRID_ROWS)
        g[column][row] = this;
    else
        row++;
} 
```

并称之为：

```
myBlock.ShiftDown(grid); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:32:19.010

假设您使用的是 C/C++，则数组本身的名称是指向数组第一个元素的指针。因此，在您的情况下，*网格*本身就是指向数组第一行第一列的指针

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:33:24.863

如何创建类型别名：

```
using my_array_type =
    std::array<std::array<std::shared_ptr<Block>, GRID_ROWS>, GRID_COLUMNS>; 
```

现在您可以使用`my_array`来声明类型：

```
my_array_type grid; 
```

当然使用该类型来声明函数参数：

```
void Block::ShiftDown(my_array_type& grid); 
```

* * *

如果你没有 C++11 编译器，所以没有`std::array`也不能`using`用来创建类型别名，那么就有了旧的`typedef`：

```
typedef Block *my_array_type[GRID_COLUMNS][GRID_ROWS]; 
```

# c++ - 将 r 值作为非常量引用传递（VS 警告 C4239）

> ID：16216043
> 
> 赞同：5
> 
> 时间：2013-04-25T13:26:50.263
> 
> 标签：c++, c++11, rvalue-reference, rvalue

我想要做的（使用 C++ lambda）实际上是：

```
std::vector<MyType> GetTheArray () {return something;}

const auto DoSomething = [](std::vector<MyType> & array)
{
     //Some processing that involves either sorting the 'array' or setting temporary flags on the items
};

DoSomething (GetTheArray ()); 
```

这在标准 C++ 中似乎是不允许的，因为右值不能作为非常量引用传递。

我的问题：

1) 有没有办法使用类型转换来做到这一点，或者我必须创建一个临时变量来存储 GetTheArray () 的结果？

2) 有充分的理由在 C++ 中不允许这样做吗？

请注意，从“GetTheArray”返回的“something”是动态构造的数组，而不是存储值。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:02:49.277

从评论看来，您想要的是获取一个向量，对其进行破坏性修改（在无法重置原始状态的意义上），然后在内部使用结果。并且您希望这对左值和右值都有效。

下一个问题是在左值的情况下，保存原始容器的代码在函数调用完成后是否需要它，以及它是否需要向量的原始状态。根据答案，您有不同的解决方案：

*持有左值的调用者在调用后不再使用它*

*（或者，持有左值的调用者需要原始状态）*

这是最简单的情况。然后你的函数应该按值获取容器。如果调用者有一个左值，它`std::move`可以避免复制（它不再关心对象）或可能更昂贵但保持原始容器不变的*复制。*

*如果使用右值*调用函数，则副本将被省略或转换为廉价的隐式移动。

*持有左值的调用者不需要原始状态，但需要容器*

这种情况很困难，您需要为同一个函数（或 lambda）提供两个重载，一个取一个*左值*供该调用者使用，另一个取一个*右值引用*，用于调用者传递一个暂时的。在这两种情况下，绑定都很便宜。虽然这需要更多代码，但您可以根据另一个重载实现一个重载：

```
rtype f(std::vector<Data> & );   // for lvalues
rtype f(std::vector<Data> && v)  // for rvalues
   { return f(v); }              // v is an lvalue here 
```

你正在做 lambdas 的事实可能会使这稍微复杂一些，但希望不会太多。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T13:41:36.433

如果您出于某种原因确实想要修改`something`，您可以随时将临时文件复制到您的 lambda 中。

```
const auto DoSomething = [](std::vector<MyType> array) { /*whatever*/ } 
```

您将 lambda 称为编译器的方式可能能够省略副本。C++11 移动语义对此进行了形式化。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T13:47:19.990

（实际上，@honk 在按值传递方面击败了我。不同的是，我将扩展我的答案以`&&`明确讨论使用）

删除`&`, 并通过值传递它。

您使用的是 lambdas，因此您使用的是 c++11，因此您应该只通过*value*传递它。是的，它会一样快。

C ++ 11 非常善于注意到“复制”临时文件的时间。它将用*move*替换副本。然后它会很快，并且可以说它会更容易阅读。

`&&`因此，即使您可能对等一无所知，但可以`std::move`肯定地说，您应该开始朝着通过值而不是通过引用传递事物的方向发展。它将导致代码更具可读性，并且如果在正确的时间使用它不应该导致速度变慢。

基本上，如果您将临时值（例如函数返回的值）传递给函数会很快，*但前提是您使用的是标准容器，例如`vector`*. 否则，您将需要编写自己的`&&`感知构造函数以利用可能的加速。

**更新：** 如果您决定通过引用强制它，和/或您正在使用自定义容器，那么您可以替换`&`为`&&`. 这将允许您传递非常量引用。这称为*rvalue-reference*。

正如许多其他人所指出的，临时文件将在`DoSomething`返回后立即销毁。请记住这一点。这意味着您将希望在数组返回之前完全使用它的内容。也许您将其打印到屏幕上，或者将其存储在数据库中。或者，您可以将数据复制或移动到另一个对象中并返回。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-04-25T13:31:51.597

`GetTheArray()`您正在处理从您的底线调用的临时返回。这只能绑定到一个 const 引用，然后对象的生命周期将延长到它所绑定的 const 引用的生命周期（因此是“绑定”）。

即使你可以做你想做的事，你的电话`DoSomething`仍然是一个昂贵的无操作。至少你需要`return`从`DoSomething`.

C++ 禁止这样做，因为（自 C++11 起）它具有带有移动语义的右值引用，它可以做很棒的事情，但不能不返回*something*。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T13:29:36.623

如果需要修改`something`数组，则需要返回对它的引用。否则不要通过（非`const`）引用传递它`DoSomething`
不允许它的原因是为了避免您在此处说明的问题。看起来您要修改`something`，但`something`返回的副本`GetTheArray()`将被更改。这没有多大意义，因为此副本将在`DoSomething`退出后立即删除。
你有 3 种方法来解决这个问题。
1.您需要修改`something`然后更改`GetTheArray`以返回参考
2.您需要修改`something`将被丢弃`DoSomething`的副本，然后更改`DoSomething`为按值接受数组。3.此时
不需要`something`修改`DoSomething``const``DoSomething`应使用参考作为参数。

# function - 倒置高斯分布

> ID：16216046
> 
> 赞同：0
> 
> 时间：2013-04-25T13:26:56.560
> 
> 标签：function, distribution, gaussian, normal-distribution

我正在寻找一个高斯倒置函数的函数。所以当 x = 0 时，y 应该是 0。在两边（正和负）函数应该收敛到 1。有人能指出我正确的方向吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:33:28.850

如果您只想要一个函数，只需从 1 中减去高斯分布函数即可。当然，您不会从中得到概率分布函数；任何这样的函数都必须满足`$\int_{-\infty}^{\infty} f(x)\,dx = 1$`。（这是在 TeX 中键入数学的错误 Stack Exchange 站点。）您想要的函数将不可积。

# css - Jqgrid：工具栏过滤器中的多选

> ID：16216050
> 
> 赞同：1
> 
> 时间：2013-04-25T13:27:11.103
> 
> 标签：css, jqgrid, multi-select

我想向我的工具栏过滤器添加多项选择，因为 JQrid 本身不支持它。最好和最简单的方法是重用组合在一起的 ui.multiselect 插件，但是，我无法成功。

我的想法是呈现与 searchoptions 一起出现的内容（我做了简化示例以使其更清晰）：

```
searchoptions:{multiple:true, value:'true:true;false:false', defaultValue:'false'} 
```

然后在给定列上运行多选渲染：

```
$("#gs_Example").multiselect() 
```

但我得到的不是预期的下拉框，而是像那张照片一样丑陋的东西：http: [//i38.tinypic.com/2zgvuh3.jpg](http://i38.tinypic.com/2zgvuh3.jpg)

我不能将多选框架带到前台或其他任何...

```
<div class="ui-multiselect ui-helper-clearfix ui-widget" style="width: 146px;">
<div class="selected">
<div class="actions ui-widget-header ui-helper-clearfix">
<span class="count">1 items selected</span>
<a class="remove-all" href="#">Remove all</a>
</div>
<ul class="selected connected-list" style="height: 1px;">
<li class="ui-helper-hidden-accessible"></li>
<li class="ui-state-default ui-element" title="false" style="">
<span class="ui-helper-hidden"></span>
false
<a class="action" href="#">
<span class="ui-corner-all ui-icon ui-icon-minus"></span>
</a>
</li>
</ul>
</div>
<div class="available">
<div class="actions ui-widget-header ui-helper-clearfix">
<ul class="available connected-list" style="height: 1px;">
</div>
</div> 
```

# c# - 如何从 Gridview-RowDataBound 返回值以在链接中使用它。C＃

> ID：16216057
> 
> 赞同：0
> 
> 时间：2013-04-25T13:27:50.010
> 
> 标签：c#, asp.net, gridview

我试图在单击按钮时删除 Gridview 行。我想将单击的行的 id 保存到变量中。并在超链接中使用此变量。

这是我的 RowDataBound 代码

```
 protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Attributes.Add("onmouseover", "this.style.cursor='Pointer';this.style.backgroundColor='Yellow'");
       e.Row.RowIndex.ToString())); 

        string id = DataBinder.Eval(e.Row.DataItem, "ProductionOrderId").ToString();
    // somthing like
    // return id ;

    }
} 
```

这里是我需要所选行的 id 的超链接

```
<asp:HyperLink  runat="server" NavigateUrl="~/Producter/Delete?id= id" ID="HyperLink1"> Delete</asp:HyperLink> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:35:14.500

首先：在母版页的 head 部分添加对 jQuery 的引用

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.0/jquery.min.js"></script> 
```

其次：将 ProductionOrderId 作为属性添加到数据行（如下所示），这样就可以在客户端通过 jQuery 访问它

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
            {
                e.Row.Attributes.Add("onmouseover", "this.style.cursor='Pointer';this.style.backgroundColor='Yellow'");
                e.Row.RowIndex.ToString();
                string id = DataBinder.Eval(e.Row.DataItem, "ProductionOrderId").ToString();
                //save ProductionOrderId as datarow attribute
                e.Row.Attributes.Add("rowid", id);
            }
} 
```

第三：

在 .aspx 文件的正文中添加以下脚本标记。每次单击一行时，它都会使用要删除的行的 ID 修改您的“删除”链接。为了清楚和完整起见，我还包含了您的链接。

```
<a href='<%=ResolveUrl("~/Producter/Delete?id=" ) %>' ID="HyperLink1">Delete</a>

 <script language="javascript">
    //every time a row is clicked this script will perform the following actions:
        $("tr").click(function () {
            var clicked = $(this);
            //get the row id from the currently cliked row
            var rowid = clicked.attr("rowid");
            //get the value of href attribute from the link with id 'HyperLink1'
            var link = $("#HyperLink1").attr("href");
            //remove any previously appended values
            var linkTokens = link.split("=");
            linkTokens[1] = "";
            link = linkTokens.join("=");
            //append the current row id to the link
            link = link + rowid;
            //set the href attribute of your link to the new value
            $("#HyperLink1").attr("href", link);
        });
    </script> 
```

如果您需要进一步的帮助，请随时告诉我。

免责声明：通常最好使用 cdn 来传递 js 文件，因为它们很可能已经被用户浏览器缓存了。

根据要求，这里是将 jquery library 2.0 放入您的内容文件夹的方法：

1.  备份您的工作解决方案。
2.  用鼠标右键单击 [此链接并选择另存为。](http://code.jquery.com/jquery-2.0.0.min.js)
3.  将其保存到磁盘上的内容文件夹中。
4.  从 Visual Studio 中选择“添加现有项目”
5.  浏览到您的内容文件夹
6.  选择您的 jquery 文件
7.  单击添加。
8.  现在将您的 jquery 文件拖到页面的标题部分。
9.  删除旧标签（链接到 ajax.googleapis.com）

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:13:13.693

修改了 RowDataBound 以将 GridView 记录 ID 保存到客户端：

```
protected void GridView1_RowDataBound(object sender, GridViewRowEventArgs e)
{
    if (e.Row.RowType == DataControlRowType.DataRow)
    {
        e.Row.Attributes.Add("onmouseover", "this.style.cursor='Pointer';this.style.backgroundColor='Yellow'");
       e.Row.RowIndex.ToString())); 

        string id = DataBinder.Eval(e.Row.DataItem, "ProductionOrderId").ToString();

        // store the id at the client side
        e.Row.Attributes.Add("id", id);
    }
} 
```

在您的 javascript 代码中（使用 jQuery）：每当单击 GridView 记录时，这将更改超链接 href 值。

```
<script type="text/javascript">
  $('#<%=GridView1.ClientID %> tr[id]').click(function () {
      idToDelete = $('#<%=GridView1.ClientID %> tr[id]').val();
      $("a.HyperLink1").attr("href", "~/Producter/Delete?id=" + idToDelete);
  });
</script> 
```

虽然我没有测试过代码，但我希望它应该按要求工作。

**编辑：** 您还应该在 head 部分添加对 jQuery.js 文件的引用，如下所示：

```
<script src="js/jquery-1.6.1.min.js" type="text/javascript"></script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:33:19.503

一种更简单的方法是创建一个辅助方法：

```
string getLink(MyObject obj)
{
   return "~/Producter/Delete?id" + obj.ID;
} 
```

在视图中：

```
<asp:HyperLink  runat="server" NavigateUrl="<%# getLink(Container.DataItem) %>" ID="HyperLink1"> Delete</asp:HyperLink> 
```

# java - 将 glassfish 重新安装到之前安装的目录中？

> ID：16216059
> 
> 赞同：0
> 
> 时间：2013-04-25T13:27:54.917
> 
> 标签：java, glassfish

我是 Glassfish 的新手，遇到了一些不知道如何解决的小问题。我从一个目录中卸载了 Glassfish 2.1.1，现在我无法将它安装到同一目录路径中。我使用 unistall.exe 卸载，删除了所有遗留的文件，当我尝试再次安装时，我收到以下消息：

在此目录中检测到现有安装。请在继续之前选择另一个目录或卸载现有安装。如果您选择继续而不卸载以前的安装，安装可能会失败。

我检查了产品注册表，找不到任何 glassfish 的痕迹。任何人都知道可能是什么问题以及如何解决它？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:30:02.477

检查系统变量，有时这些服务器会更改您的系统变量，例如路径等

# ruby-on-rails - 创建一个 ruby -on-rails 模型

> ID：16216061
> 
> 赞同：2
> 
> 时间：2013-04-25T13:27:56.860
> 
> 标签：ruby-on-rails, ibm-midrange, rails-activerecord

我有一个连接到 AS400 DB 的现有模型，我需要创建一个类似的新模型，它连接到一个新文件并提取一个字段（一个电子邮件地址），然后循环 5 次。这应该不难，但是我从来没有在 Ruby 中这样做过，而且我似乎无法让它工作。任何可以为我指明正确方向的帮助将不胜感激！

这是现有的模型：

```
 class Distributor < ActiveRecord::Base

 establish_connection "as400_#{RAILS_ENV}"
set_table_name "DISTJ01"

# TODO: what to return if no distributor?
# Create array of hashed distributor info.
def self.get_distributors_by_state state, preferred_distributor
    d = []
    # see validate_distributor_number below
    # If they have a preferred distributor, pull that one and make it first so it will default to that.
    if !preferred_distributor.blank?
        s = Distributor.find_by_sql ["SELECT CNAM05 cnam05, CUSNP1 cusnp1 FROM DISTJ01 WHERE CUSNP1 = ?", preferred_distributor]
        d << { :name => s[0].cnam05, :id => s[0].cusnp1 }   unless s.blank?
    end

    # If they have an account number, they can choose to purchase direct in addition to choosing a distributor.
    # Per Ron 4/20/11, removed this.
    #d << { :name => "DIRECT PURCHASE", :id => account_number } unless account_number.blank?

    # Get all other available distributors for this state.
    s = Distributor.find_by_sql ["SELECT CNAM05 cnam05, CUSNP1 cusnp1 FROM DISTJ01 WHERE STATEP2 = ? AND CUSNP1 <> ? ORDER BY CNAM05", state.upcase, preferred_distributor]
    unless s.blank?
        s.each do |t|
            d << { :name => t.cnam05, :id => t.cusnp1 }
        end
    end
    d
end

def self.validate_distributor_number distributor_number, user
    # We need to make sure that the distributor number we are assigning
    # is valid. Since it comes from a form post, somebody could pick
    # another number if they wanted. We can't have that. Granted they
    # already had to logon so they are a legit user, but, they still
    # could try to trick us.
    if distributor_number.strip == user.as400_fields[:account_number].strip
        distributor_number
    else

        # If a DSD account chooses to purchase from their preferred distributor, we use the customer number from
        # the sign-on table, not from the distributor.
        if user.as400_fields[:preferred_distributor] == distributor_number and user.as400_fields[:account_type].strip == "DSD"
            user.as400_fields[:account_number]
        else
            d = Distributor.find_by_sql ["SELECT CUSNP1 cusnp1 FROM DISTJ01, SIGNONS " +
                "WHERE DISTJ01.STATEP2 = SIGNONS.BSSTCDW1 AND SIGNONS.USERW1 = ? AND DISTJ01.CUSNP1 = ?", user.login.upcase, distributor_number]
            d[0].cusnp1 unless d.blank?
        end
    end
end

 end 
```

新的连接需要是表 WEBOEL23 并且字段是 EMAL23。这是我到目前为止需要添加的内容：

```
 class Weboel23 < ActiveRecord::Base

establish_connection "as400_#{RAILS_ENV}"
set_table_name "WEBOEL23"

 def self.get_email_by_account email, cono23
    d = []
    if !emal23.blank?
        s = email.find_by_sql ["SELECT ACT223 act223,EMAL23 emal23 FROM WEBOEL23 WHERE ACT223 = ?", CONO23]         
        d << { :name => s[0].act223, :id => s[0].emal23 }   unless s.blank?
      end    
   end
 end 
```

该模型现在看起来更好，但是当我从模型中调用该字段时，它现在在 order.rb 页面上失败了我错过了什么？

```
 weboel23 = Weboel23.first(:conditions => {:cusnp1 => distributor_number}, :select => "EMAL23") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:24:51.250

鲍勃。你离这里大约10英里！

“连接到新文件”是指新表吗？set_table_name "DISTJ01" 似乎设置了表格（通常表格会自动与模型名称相同）。

模型中现有的两种方法似乎无关紧要。

似乎您的新方法应该只访问 emal23 并执行逻辑。（但我根本不是模特大师。）

或者你的意思是它连接到 Distj01 表并写入新的文件/表 weboel23？

## 编

好的，我不是现有的数据库专家，但我认为您可以在命令行创建模型

```
rails generate model 
```

或者，如果您不介意添加更多文件，您可以生成一个完整的 mvc

```
rails generate scaffold 
```

在任何一种情况下，您都会给它一个表名，然后是字段和数据类型

```
rails generate model Weboel23 emal23:string 
```

如果可行，则可以运行 rails 控制台

```
rails console 
```

并查看应用程序以查看其中的内容。

```
irb(main):001:0> Weboel23.all 
```

或者

```
> Weboel23.find(1) 
```

查找 id 为 1 的记录

关于 rails 命令行的信息在这里： http: [//guides.rubyonrails.org/command_line.html#rails-generate](http://guides.rubyonrails.org/command_line.html#rails-generate)

# cordova - 是否可以修复phonegap inappbrowser以横向加载？

> ID：16216062
> 
> 赞同：1
> 
> 时间：2013-04-25T13:27:56.963
> 
> 标签：cordova, orientation, landscape, inappbrowser

我想使用 phonegap inappbrowser 但它应该以横向加载。我的整个应用程序应该以纵向模式运行，因此自动旋转被停用。

我想做的另一件事是停用 inappbrowser 底部的标签栏，只需要一点 X 即可关闭浏览器的全屏视图。有什么办法可以做到这一点？

我知道 android 插件的可能性，但我正在开发的主要设备是 iphone

# .net - 从 .NET sqlcommand 传递到 SQL 的值不正确

> ID：16216065
> 
> 赞同：3
> 
> 时间：2013-04-25T13:28:06.703
> 
> 标签：.net, sql-server, vb.net, stored-procedures, sql-server-2008-r2

为什么当我运行下面的代码时，它应该在表中插入一个值 122387593.6，它是否插入一个值 122387593.59999999？

我跟踪了 .net 进行的调用，可以看到该值作为 122387593.59999999 传递给 SQL，但在调试时参数值返回为 122387593.6？！

我无法弄清楚 .NET 为什么会这样做 - 非常感谢任何帮助。

```
 ---SQL Code

   CREATE TABLE [dbo].[tblNum](
[Num] [numeric](28, 8) NOT NULL
   ) ON [PRIMARY]

   CREATE PROCEDURE spNumInsert (@Num numeric(28,8))
   AS
   BEGIN
   INSERT INTO tblNum VALUES(@Num)
   END
   GO

   --.NET Code

    Dim a = Double.Parse("122387593.6", Globalization.CultureInfo.InvariantCulture)

    Dim con As SqlConnection = New SqlConnection("Server=server;Database=database;Trusted_Connection=True;")
    Dim com As SqlCommand = New SqlCommand("spNumInsert", con)
    com.CommandType = CommandType.StoredProcedure
    com.Parameters.Add(New SqlParameter("@Num", a))

    con.Open()
    com.ExecuteNonQuery()
    con.Close()
    con.Dispose() 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T13:32:04.743

`double`表示 IEEE754。IEEE754*不能表达*每一个值。很可能在 IEEE754`122387593.6` *中不存在*`122387593.59999999`，这是最接近的近似值。

如果您需要与我们肉头人类倾向于同意的“精确”近似值相匹配的值（请注意术语上的矛盾），您应该使用`decimal`，而不是`double`。

需要明确的是：两者`decimal`和`double`都被迫近似 - 你只能做很多事情来将这样一个可能的值范围放入有限的字节中。但是它们的近似*方式是不同的。*`decimal`适用于像钱这样的离散测量；`double`适用于连续测量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T13:31:01.457

不要使用`Double.Parse`. 你需要使用`Decimal`.

您的对象`a`已经是 122387593.59999999 因为这是 122387593.6 必须在浮点标准中表示的方式，这就是 double 的含义。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:35:13.357

问题在于 .NET 中的 double 精度。如果您`a`在此行之后签出变量

```
Dim a = Double.Parse("122387593.6", Globalization.CultureInfo.InvariantCulture) 
```

你会注意到它已经有错误的值。您可以尝试使用`decimal`它更精确。

* * *

## 回答 #4

> 赞同：-3
> 
> 时间：2013-04-25T13:34:54.643

使用功能

```
 ROUND ( numeric_expression , length [ ,function ]  ) 
```

# mysql - 从查询中调用默认图像时为每个用户获取唯一图像

> ID：16216070
> 
> 赞同：0
> 
> 时间：2013-04-25T13:28:24.330
> 
> 标签：mysql, sql

对不起，标题很长。我有一个注册用户列表，有些有个人资料照片，有些没有。问题是如果用户 1 已登录。然后在用户列表中，每个人都具有与用户 1 相同的个人资料图像。

但是如果我从查询中删除我的默认调用者，每个用户都会得到他们自己的图片，但 default.jpg 图像不起作用。我可以删除查询并在页面上使用 if 语句，但我真的想避免这种情况。

```
 function fetch_users($uid){
            $query = $this->link->query( "SELECT user.id, user.username, user.email, 
            userdetails.profile_img,userdetails.firstname,
            userdetails.lastname,userdetails.location,following.follow_id
            FROM user
            LEFT JOIN   userdetails ON user.id = userdetails.user_id
            LEFT JOIN   following ON user.id = following.follow_id
            WHERE       user.id != '{$uid}' ");
            $users = array();
            while(($row = $query->fetch(PDO::FETCH_ASSOC)) !== FALSE) { 
   #The row that mess up things#----->$row['profile_img'] = file_exists("img/{$uid}.jpg") ? "img/{$uid}.jpg" :  "img/default.jpg" ;
            $users[] = $row;
        }   
            return $users;
        } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:19:57.620

你混合了很多东西。在查询中，您从表中获取文件名，但在注释行中，您使用 uid 来构造名称。对于前者使用默认图像，您可以使用

```
SELECT …
  IFNULL(userdetails.profile_img, "img/default.jpg") AS profile_img,
… 
```

这将用`NULL`默认图像的路径替换表中的值。

如果您想从用户 ID 构建图像路径，那么您应该使用结果行中的 ID，而不是当前用户的 ID：

```
while(($row = $query->fetch(PDO::FETCH_ASSOC)) !== FALSE) { 
  $imgpath = "img/" . $row['id'] . ".jpg";
  if (!file_exists($imgpath)) $imgpath = "img/default.jpg";
  $row['profile_img'] = $imgpath;
  $users[] = $row;
} 
```

这将根据用户 ID 创建一个图像路径，如果不存在此类文件，则回退到默认值。

你甚至可以将它们结合起来：

```
SELECT …
  IFNULL(userdetails.profile_img,
         CONCAT("img/", user.id, ".jpg") AS profile_img,
… 
```

```
while(($row = $query->fetch(PDO::FETCH_ASSOC)) !== FALSE) { 
  if (!file_exists($row['profile_img']))
    $row['profile_img'] = "img/default.jpg";
  $users[] = $row;
} 
```

这将使用设置的存储图像路径，否则使用从 uid 构造的路径。然后它将使用以这种方式命名的文件，但如果不存在这样的文件，则使用默认文件。

# python - 测试二维 numpy 数组中的成员资格

> ID：16216078
> 
> 赞同：13
> 
> 时间：2013-04-25T13:28:46.390
> 
> 标签：python, numpy

我有两个相同大小的二维数组

```
a = array([[1,2],[3,4],[5,6]])
b = array([[1,2],[3,4],[7,8]]) 
```

我想知道 a 中 b 的行。

所以输出应该是：

```
array([ True,  True, False], dtype=bool) 
```

不做：

```
array([any(i == a) for i in b]) 
```

因为 a 和 b 很大。

有一个函数可以做到这一点，但仅适用于一维数组：in1d

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T14:03:09.463

我们真正想做的是使用`np.in1d`... 除了`np.in1d`只适用于一维数组。我们的数组是多维的。但是，我们可以*将数组视为**字符串*的一维数组：

```
arr.view(np.dtype((np.void, arr.dtype.itemsize * arr.shape[-1]))) 
```

例如，

```
In [15]: arr = np.array([[1, 2], [2, 3], [1, 3]])

In [16]: arr = arr.view(np.dtype((np.void, arr.dtype.itemsize * arr.shape[-1])))

In [30]: arr.dtype
Out[30]: dtype('V16')

In [31]: arr.shape
Out[31]: (3, 1)

In [37]: arr
Out[37]: 
array([[b'\x01\x00\x00\x00\x00\x00\x00\x00\x02\x00\x00\x00\x00\x00\x00\x00'],
       [b'\x02\x00\x00\x00\x00\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00'],
       [b'\x01\x00\x00\x00\x00\x00\x00\x00\x03\x00\x00\x00\x00\x00\x00\x00']],
      dtype='|V16') 
```

这使得`arr`字符串的每一行。现在只需将其连接到`np.in1d`：

```
import numpy as np

def asvoid(arr):
    """
    Based on http://stackoverflow.com/a/16973510/190597 (Jaime, 2013-06)
    View the array as dtype np.void (bytes). The items along the last axis are
    viewed as one value. This allows comparisons to be performed on the entire row.
    """
    arr = np.ascontiguousarray(arr)
    if np.issubdtype(arr.dtype, np.floating):
        """ Care needs to be taken here since
        np.array([-0.]).view(np.void) != np.array([0.]).view(np.void)
        Adding 0\. converts -0\. to 0.
        """
        arr += 0.
    return arr.view(np.dtype((np.void, arr.dtype.itemsize * arr.shape[-1])))

def inNd(a, b, assume_unique=False):
    a = asvoid(a)
    b = asvoid(b)
    return np.in1d(a, b, assume_unique)

tests = [
    (np.array([[1, 2], [2, 3], [1, 3]]),
     np.array([[2, 2], [3, 3], [4, 4]]),
     np.array([False, False, False])),
    (np.array([[1, 2], [2, 2], [1, 3]]),
     np.array([[2, 2], [3, 3], [4, 4]]),
     np.array([True, False, False])),
    (np.array([[1, 2], [3, 4], [5, 6]]),
     np.array([[1, 2], [3, 4], [7, 8]]),
     np.array([True, True, False])),
    (np.array([[1, 2], [5, 6], [3, 4]]),
     np.array([[1, 2], [5, 6], [7, 8]]),
     np.array([True, True, False])),
    (np.array([[-0.5, 2.5, -2, 100, 2], [5, 6, 7, 8, 9], [3, 4, 5, 6, 7]]),
     np.array([[1.0, 2, 3, 4, 5], [5, 6, 7, 8, 9], [-0.5, 2.5, -2, 100, 2]]),
     np.array([False, True, True]))
]

for a, b, answer in tests:
    result = inNd(b, a)
    try:
        assert np.all(answer == result)
    except AssertionError:
        print('''\
a:
{a}
b:
{b}

answer: {answer}
result: {result}'''.format(**locals()))
        raise
else:
    print('Success!') 
```

产量

```
Success! 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T13:51:31.960

```
In [1]: import numpy as np

In [2]: a = np.array([[1,2],[3,4]])

In [3]: b = np.array([[3,4],[1,2]])

In [5]: a = a[a[:,1].argsort(kind='mergesort')]

In [6]: a = a[a[:,0].argsort(kind='mergesort')]

In [7]: b = b[b[:,1].argsort(kind='mergesort')]

In [8]: b = b[b[:,0].argsort(kind='mergesort')]

In [9]: bInA1 = b[:,0] == a[:,0]

In [10]: bInA2 = b[:,1] == a[:,1]

In [11]: bInA = bInA1*bInA2

In [12]: bInA
Out[12]: array([ True,  True], dtype=bool) 
```

应该这样做......不确定，这是否仍然有效。您需要 do `mergesort`，因为其他方法不稳定。

编辑：

如果您有超过 2 列并且行已经排序，您可以这样做

```
In [24]: bInA = np.array([True,]*a.shape[0])

In [25]: bInA
Out[25]: array([ True,  True], dtype=bool)

In [26]: for k in range(a.shape[1]):
    bInAk = b[:,k] == a[:,k]
    bInA = bInAk*bInA
   ....:     

In [27]: bInA
Out[27]: array([ True,  True], dtype=bool) 
```

还有加速的空间，因为在迭代中，您不必检查整个列，而只需检查 current 所在的`bInA`条目`True`。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-07-20T11:01:37.820

如果你喜欢`a=np.array([[1,2],[3,4],[5,6]])`and `b=np.array([[5,6],[1,2],[7,6]])`，你可以将它们转换成复杂的一维数组：

```
c=a[:,0]+a[:,1]*1j
d=b[:,0]+b[:,1]*1j 
```

我的解释器中的整个内容如下所示：

```
>>> c=a[:,0]+a[:,1]*1j
>>> c
array([ 1.+2.j,  3.+4.j,  5.+6.j])
>>> d=b[:,0]+b[:,1]*1j
>>> d
array([ 5.+6.j,  1.+2.j,  7.+6.j]) 
```

现在您只有一维数组，您可以轻松做到`np.in1d(c,d)`，Python 将为您提供：

```
>>> np.in1d(c,d)
array([ True, False,  True], dtype=bool) 
```

有了这个，你不需要任何循环，至少对于这种数据类型

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T14:16:36.800

numpy 模块实际上可以通过您的数组进行广播，并告诉哪些部分与其他部分相同，如果它们是则返回 true，否则返回 false：

```
import numpy as np
a = np.array(([1,2],[3,4],[5,6])) #converting to a numpy array
b = np.array(([1,2],[3,4],[7,8])) #converting to a numpy array
new_array = a == b #creating a new boolean array from comparing a and b 
```

现在 new_array 看起来像这样：

```
[[ True  True]
 [ True  True]
 [False False]] 
```

但这不是你想要的。因此，您可以转置（翻转 x 和 y）数组，然后将两行与`&`门进行比较。这将创建一个一维数组，仅当行中的两列都为真时才返回真：

```
new_array = new_array.T #transposing
result = new_array[0] & new_array[1] #comparing rows 
```

当你`print result`现在得到你正在寻找的东西时：

```
[ True  True False] 
```

# c++ - qt - 拖放：框架消失

> ID：16216091
> 
> 赞同：0
> 
> 时间：2013-04-25T13:29:22.417
> 
> 标签：c++, qt, user-interface, drag-and-drop, qt-designer

我即将在两个 QGroubBox 之间创建拖放。每个都包含 DragDropFrames，它们是 QFrame 的子类，现在我想从 GroupBox 中释放 DragDropFrame 时遇到问题，它会立即消失

拖放帧：

```
void mousePressEvent(QMouseEvent *ev)
{
    if (ev->button() == Qt::LeftButton)
    {
        offset = ev->pos();
        if(!isReleaseFromParentWidget)
        {
            ReleaseFromParent(ev->pos());
        }
        isMouseDown = true;
    }
};

void mouseReleaseEvent(QMouseEvent *ev)
{
    if (ev->button() == Qt::LeftButton)
    {
        isMouseDown = false;
    }
}

void mouseMoveEvent(QMouseEvent *ev)
{
    if (isMouseDown)
    {
        this->move(mapToParent(ev->pos() - offset));
    }
}

void ReleaseFromParent(QPoint point)
{
    oldParentWidget = parentWidget();
    setParent(parentWidget()->parentWidget());
    isReleaseFromParentWidget = true;
    this->move(mapToParent(offset));
} 
```

当我从 DragDropFrame 而不是其他地方调用构造函数中的 ReleaseFromParent 时，一切正常。但如果拖放操作不在进程中，则每个拖放帧都应该有一个组框作为父级。有人知道我在做什么错吗？研究了很多遍，我认为逻辑是正确的......

实际上，我知道没有完整的拖放功能，首先我想解决移动工作正常的问题。

# javascript - 如何更改我的 JavaScript 游戏在主页上的位置

> ID：16216092
> 
> 赞同：0
> 
> 时间：2013-04-25T13:29:24.810
> 
> 标签：javascript, html, css, positioning

```
<!DOCTYPE html>
<html>
<head>
    <title> Snake! </title>
    <link rel="stylesheet" type="text/css" href="style.css"></link>
    <body>
        <meta charset="UTF-8">
        <title>Snake!</title>
        <div id="game">
            <script src="snake.js" type="text/javascript"></script>
        </div>
    </body>
</head>
</html> 
```

我已经创建了上面的 javascript 游戏，但是它总是出现在页面的左上角。我有一个css页面来设置主页的样式，我需要在html页面和css页面中做什么才能将游戏移动到页面上的不同位置？

**更新：css 页面如下所示：**

```
body{
background-image:url(nokiaphone.jpg);
background-repeat:no-repeat;
background-position: center top;
}

#game{
position:absolute;
left:1000px;
top:150px;
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:33:10.820

“正确”的 HTML 页面

```
<html>
<head>
    <meta charset="UTF-8">
    <title> Snake! </title>
    <link rel="stylesheet" type="text/css" href="style.css"></link>
</head>
<body>
    <div id="nokia">
        <div id="game">
            <script src="snake.js" type="text/javascript"></script>
        </div>
    </div>
</body>
</html> 
```

如果你想把游戏移到手机屏幕上，不妨试试这个：

```
#game
{ 
    width: /*Here the width of your div in pixel ex : "450px;"*/ 
    margin-left: /*Here the distance in pixel from the left border of the image to the phone screen*/ 
    margin-right: /*Here the distance in pixel from the top border of the image to the phone screen*/         position relative;
}

#nokia
{
    margin:0;
    padding:0;
    width:100%;
    background-image:url(nokiaphone.jpg);
    background-repeat:no-repeat;
    background-position: center top;

} 
```

**在您的 javascript 中尝试：（**目前，您没有将画布添加到“游戏”div 中，而是直接添加到正文中，这就是您的游戏不移动的原因）

```
var div = document.getElementById('game');
div.appendChild(canvas); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:32:27.817

你想要它在页面的中心吗？

如果您`div#game`有固定的宽度高度，最简单的解决方案是：

```
#game {
    position:absolute;
    width:500px;
    height:500px;
    top:50%;
    left:50%;
    margin-top:-250px; /*half of the height*/
    margin-left:-250px; /*half of the width*/
} 
```

这是一个[活生生的例子](http://jsfiddle.net/soyuka/4yCwf/)。

完整的代码将是：

```
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <title>Snake!</title>
    <link rel="stylesheet" type="text/css" href="style.css"></link>
</head>
<body>
    <div id="game">
        <script src="snake.js" type="text/javascript"></script>
    </div>
</body>
</html> 
```

然后在你`style.css`以前的css中。

如果你想要更多，这里有一篇关于[以未知为中心](http://css-tricks.com/centering-in-the-unknown/)的好文章。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:34:49.220

您的 HTML 结构非常混乱……`head`和`body`部分被混淆了。试试这个例子，它只会让你的游戏在屏幕上居中：

```
<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Snake!</title>
    <link rel="stylesheet" type="text/css" href="style.css"></link>
    <style type="text/css">
        #game { width: 600px; margin-left: auto; margin-right: auto; }
    </style>
</head>
<body>
    <div id="game">
        <script src="snake.js" type="text/javascript"></script>
    </div>
</body>
</html> 
```

# ember.js - 每隔一段时间重新计算一个 Ember 对象的属性

> ID：16216098
> 
> 赞同：1
> 
> 时间：2013-04-25T13:29:39.357
> 
> 标签：ember.js

目前我有一个非常简单的 Ember 对象，它有两个属性：`startedAt`和`endedAt`.

基于这些属性，我计算了属性`isLive`。哪个与当前时间进行时间比较。

渲染车把模板时，我通过添加一个类来突出显示某些项目`highlight`。

```
<li {{ bindAttr class="event.isLive:highlight" }}>...</li> 
```

我想每 5 秒左右更新一次这个模板，所以我知道`isLive`需要重新计算。我需要怎么做？

```
App.Event = Ember.Object.extend({
  endedAt: null,
  startedAt: null,

  isLive: function() {
    if (!this.get('startedAt') || !this.get('endedAt')) {
      return false;
    }

    var now = moment();

    return (now.diff(moment(this.get('startedAt'))) >= 0 &&
            now.diff(moment(this.get('endedAt'))) < 0);
  }.property('startedAt', 'endedAt')

}); 
```

我为常规的 Ember View 做了类似的事情`{{view App.TimerView}}`。

```
App.TimerView = Ember.View.extend({
  tagName: 'time',
  template: Ember.Handlebars.compile('{{ view.now }}'),

  init: function() {
    this._super();
    this.set('now', moment().format('HH:mm:ss'));
  },

  now: null,

  willInsertElement: function(evt) {
    var self = this;

    var intervalId = setInterval(
      function() {
        self.set('now', moment().format('HH:mm:ss'));
      }, 1000);

    this.set('interval', intervalId);
  },

  willDestroyElement: function(evt) {
    clearInterval(this.get('interval'));
  }

}); 
```

但我似乎无法对常规对象应用相同的逻辑。请有人指出我正确的方向。

我相信我需要根据[这些指南](http://emberjs.com/guides/controllers/)在控制器中执行此操作。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T15:23:25.003

我使用了这里介绍的解决方案：http: [//livsey.org/blog/2013/02/20/tick-tock/](http://livsey.org/blog/2013/02/20/tick-tock/)

不断检查时间的流逝与时间戳。

您按照帖子中的描述创建时钟对象和初始化程序，并创建您的 isLive 属性：

```
.property("startedAt", "endedAt", "clock.minute") }); 
```

使用 clock.minute 将每分钟触发一次更新。如果对时间敏感（或加快开发速度，您可以使用 clock.second 。

# git - 正确 Git 替换整个文件

> ID：16216101
> 
> 赞同：1
> 
> 时间：2013-04-25T13:29:44.287
> 
> 标签：git, diff

我在 git 上提交了一个文件，它有几个更改，但与旧文件并没有完全不同。git 没有挑选出更改，而是进行了一次大删除；整个文件和一个大插入；新文件。这是一个错误，显然有很大的未更改部分，例如文件以许多“使用”语句开头，但都没有更改。

这很烦人，因为这意味着我将失去所有“责备”的历史。

有没有办法让 git 重做差异？我能做些什么来导致这种情况？发生这种情况时，我正在从另一个分支合并。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:39:04.507

Git 不存储差异，它只是为每个提交存储文件树的一个版本。创建的差异`git show`不是存储在 Git 内部数据库中的内容。

`-M`在您的情况下，如果您使用选项，您可以看到文件已被重命名`git diff`

```
 -M[<n>], --find-renames[=<n>]
       Detect renames. If n is specified, it is a threshold on the similarity index (i.e. amount of addition/deletions compared to the file’s size).
       For example, -M90% means git should consider a delete/add pair to be a rename if more than 90% of the file hasn’t changed. 
```

那应该对你有用。

# python - 为从文件中读取的行分配名称

> ID：16216102
> 
> 赞同：2
> 
> 时间：2013-04-25T13:29:51.377
> 
> 标签：python, python-2.7, python-3.x

我正在逐行读取文件（32 行二进制），然后存储在一个名为`regFile[i]`. 现在我必须为`R0`变量中的每一行分配一个名称`regFile[i]= 000000001000000000000`如何分配给我的每一行`regFile[i]`？这是我的一段代码。

```
def regread(filename):

      file = open (filename, 'r')
      regline  = file.readlines()

      reg= regline
      reg= map(lambda s: s.strip(), reg)

      for i in range(0,32):
          regFile[i] = int(reg[i])
              'R'i = regFile[i]
               print 'R' ,i
      file.close() 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:34:45.057

我不明白你为什么要命名一个变量 - 只是索引`regFile`... 以下是编写你所拥有的内容的 Pythonic 方式（`islice`用于确保最多读取 32 行`int(line, 2)`并将从二进制转换为整数）。 ..

```
from itertools import islice

with open('somefile') as fin:
    reg_file = [int(line, 2) for line in islice(fin, 32)]

print reg_file[0], reg_file[31] 
```

正如@mgilson 指出的那样-如果您真的想要，可以将它们放在`dict`：

```
reg_file = {'R{}'.format(idx):int(line, 2) for idx, line in enumerate(islice(fin, 32))} 
```

# java - 显示来自服务器的图像时，列表视图卡住并且动画不流畅

> ID：16216103
> 
> 赞同：0
> 
> 时间：2013-04-25T13:29:53.103
> 
> 标签：java, android

我正在使用 BaseAdapter 在 Listview 中显示图像。

它显示来自 url 的图像，当我滚动时，加载速度会变慢。

所以它很粘，动画不流畅。

你能给出一个解决方案吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:34:38.950

如果是这样，那么从 URL 加载图像可能会变慢，因为它取决于网络，

您可以在后台加载图像，在 UI 部分可以显示带有一些文本的微调器，例如`Loading`

这可能会缓解 UI 冻结部分。

# jquery - 使用 Jquery 和 Asp.net MVC 加载外部 Html

> ID：16216105
> 
> 赞同：0
> 
> 时间：2013-04-25T13:29:54.640
> 
> 标签：jquery, asp.net-mvc

在我的索引视图中，我有这个：

```
<script type="text/javascript" src="~/Scripts/jquery-2.0.0.js"></script>
<script type="text/javascript" src="~/Scripts/Javascript1.js"></script>

<div id="dictionary">
</div>

<div class="letter" id="letter-a">
<a href="#">A</a>
</div> 
```

在我的 Javascrip11.js 中，我有这个：

```
$(document).ready(function () {
 $('#letter-a a').click(function () {
    $('#dictionary').load('HtmlPage1.html');
     alert('Loaded!');
        return false;
    });
}); 
```

在我的 HtmlPage1 我有这个：

```
<div>Definitions for letter A</div> 
```

当我单击锚标记时，我希望 Javascript 加载此 HtmlPage1 并插入到页面的 div 字典中.....我在 Scripts 文件夹和 ViewFolder 中都有 HtmlPage1 ..两者都不起作用....我我收到警报，但没有插入代码片段....

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:36:32.253

您必须创建一个“Ajax 控制器”（或您选择的名称），以便您可以通过 URL 加载页面。

样本：

将“HtmlPage1”放在“View/Ajax”文件夹中。

使用以下操作创建一个名为“AjaxController”的控制器：

```
public class AjaxController
{
     public ActionResult HtmlPage1()
     {
         return View();
     }
} 
```

然后在你的 JavaScript 中调用 URL“Ajax/HtmlPage1”：

```
$('#dictionary').load('/Ajax/HtmlPage1'); 
```

从这里您可以添加更多 ActionResults 以添加不同的结果。:)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:38:14.667

试试这个：

```
$(document).ready(function () {
  $('#letter-a a').on("click", function (e) {
    e.preventDefault();
    $('#dictionary').load('HtmlPage1.html');
    alert('Loaded!');
    return false;
  });
}); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:38:45.857

在 MVC 中加载静态文件时，基本上都是使用绝对路径。将 HtmlPage1.html 文件放在站点的根目录中，一切都应该工作

当然你也可以使用子文件夹（或者一个控制器动作，虽然这听起来很奇怪）：

```
$('#dictionary').load('Views/HtmlPage1.html'); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T13:34:02.767

我认为您需要防止`<a>`标签上的默认行为：

```
$(document).ready(function () {
 $('#letter-a a').click(function (e) {
    e.preventDefault();
    $('#dictionary').load('HtmlPage1.html');
     alert('Loaded!');
        return false;
    });
}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T13:39:08.170

试试这个 ：-

```
$(document).ready(function () {
 $('#letter-a a').click(function () {
     $.get('HtmlPage1.html')
     .success(function(data) {
       alert(data);
         $('#dictionary').html(data);
     });

        return false;
    });
}); 
```

# c# - DispID 必须跨接口唯一？

> ID：16216107
> 
> 赞同：6
> 
> 时间：2013-04-25T13:29:58.980
> 
> 标签：c#, com

我将 COM 与旧的 VB6 应用程序一起使用。

我将代码更改为在接口中使用 DispID，因为它似乎比使用`[ClassInterface(ClassInterfaceType.AutoDual)]`.

但是是否允许从 DispID(1) 开始计数的每个接口，即使一个类使用两个接口？

它以这种方式工作稳定吗？还是我误解了什么？

```
[ComVisible(true)]
[Guid("9E1125A6-...")]
public interface IMyInterface1
{
    [DispId(1)]
    string Name1 { get; }
}

[ComVisible(true)]
[Guid("123425A6-...")]
public interface IMyInterface2
{
    [DispId(1)]
    string Name2 { get; }
}

[ComVisible(true)]
[ClassInterface(ClassInterfaceType.None)]
class MyClass : IMyInterface1, IMyInterface2
{
    public string Name1 { get { return "Name1"; } }
    public string Name2 { get { return "Name2"; } }
} 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T15:12:02.257

> 是否允许从 DispID(1) 计数的每个接口开始，即使一个类使用两个接口？

DISPID 必须仅在接口内是唯一的。最好使用两个接口，每个接口都有自己的（不同的）DISPID 1 属性，即使这两个接口都是由同一个 COM 对象实现的。

但是，由于提到了 VB6，您需要记住，VB6 不喜欢在同一个 COM 对象上实现的 2+ 个调度接口，并且可能只“看到”第一个/主要的。也就是说，问题不是 DISPID 冲突（这根本不是问题），而是 VB6 无法正确处理暴露 2+ 双接口的对象这一事实。发生这种情况的原因在 MSDN 中的[Multiple Dual Interfaces](http://msdn.microsoft.com/en-us/library/36fx03c8%28v=vs.110%29.aspx)中进行了描述：

> 因为只公开了一个 IDispatch 接口，所以只能通过 IDispatch 接口访问您的对象的客户端将无法访问任何其他接口中的方法或属性。

可悲的是，VB6 就是这种情况。与更高级的环境不同，它以“任何其他接口中的方法或属性”无法访问的方式查询接口。但是，分配不同的 DISPID 并无济于事。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T14:07:33.243

每个 COM 对象只有一个 IDispatch 实现，因此如果您希望[IDispatch::Invoke](http://msdn.microsoft.com/library/windows/desktop/ms221479.aspx)等调用成功，则需要每个 COM 对象具有唯一的 DISPID。

编辑：事实上，在仔细考虑之后，这个问题是无关紧要的，正如汉斯在他的评论中指出的那样。因为您将 ClassInterfaceType 定义为 None，这意味着 .NET 只会使第一个接口 IMyInterface1 dispids 可用（默认情况下，但您可以使用[ComDefaultInterfaceAttribute](http://msdn.microsoft.com/en-US/library/system.runtime.interopservices.comdefaultinterfaceattribute.aspx)类属性配置默认接口）。

如果您使用 ClassInterfaceType 作为 AutoDual 或 AutoDispatch，则会自动生成 DISPID，而不会使用手动定义的。

.NET 不会组合或合并接口，因此在这种“.NET 作为 COM 公开”的情况下，dispid 不同的事实并不重要，因为只使用了一组 DISPID（用于默认接口）。请注意，如果您在同一个类上定义了两次相同的 DISPID 集，它将编译得很好，但 regasm 会抱怨并忽略重复的。

这是一个小的 C++ 程序，它证实了这一切：

```
int _tmain(int argc, _TCHAR* argv[])
{
    CoInitialize(NULL);
    IDispatch *pDispatch;
    CoCreateInstance(__uuidof(MyClass), NULL, CLSCTX_ALL, IID_IDispatch, (void**)&pDispatch);
    DISPID dispid;
    LPOLESTR name1 = L"Name1";
    LPOLESTR name2 = L"Name2";
    HRESULT hr;
    hr = pDispatch->GetIDsOfNames(IID_NULL, &name1, 1, 0, &dispid);
    printf("Name1:%i hr=0x%08X\n", dispid, hr);
    hr = pDispatch->GetIDsOfNames(IID_NULL, &name2, 1, 0, &dispid);
    printf("Name2:%i hr=0x%08X\n", dispid, hr);
    pDispatch->Release();
    CoUninitialize();
    return 0;
} 
```

它会输出这个：

```
Name1:1 hr=0x00000000 (S_OK)
Name2:-1 hr=0x80020006 (DISP_E_UNKNOWNNAME) 
```

如果您更改为 AutoDispatch 或 AutoDual，它将输出以下内容（ids 是使用某种算法计算的）：

```
Name1:1610743812 hr=0x00000000
Name2:1610743813 hr=0x00000000 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-15T04:49:53.750

[![在此处输入图像描述](https://i.stack.imgur.com/ErOeA.png)](https://i.stack.imgur.com/ErOeA.png)

**DISPID** 在这里必须是唯一的 8 是 DISPID .I 它重复 .它必须是唯一的

# csv - 使用 D3 和 Crossfilter 生成图形

> ID：16216113
> 
> 赞同：0
> 
> 时间：2013-04-25T13:30:18.047
> 
> 标签：csv, graph, d3.js, crossfilter

我正在使用[JMeter](http://jmeter.apache.org/)在网站上执行负载测试。JMeter 以 CSV 文件的形式生成输出。

我想以图表形式表示这个 CSV 数据。为了生成图表，我的老师建议使用 D3 和 Crossfilter。但我不知道这些工具。

您能帮我了解如何使用 D3 和 Crossfilter 从 CSV 文件创建图形吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:39:40.120

这是[从 CSV 文件创建 D3 图形的教程](http://thecodingtutorials.blogspot.ie/2012/07/using-csv-and-text-files-with-d3.html)。对于更具体的问题，您必须提出更具体的问题。

# c# - 任何人都可以帮助将 C# 框架 4.5 类库迁移到与 XNA 4.0 兼容的框架中吗？

> ID：16216116
> 
> 赞同：0
> 
> 时间：2013-04-25T13:30:26.770
> 
> 标签：c#, oop, xna

我一直在使用基于 的类库`.net 4.5`，在开发过程中不得不将项目的视图移至 XNA。我遇到了视图和模型之间的兼容性错误。有谁知道如何更改`.net`现有项目的版本？创建一个新项目似乎不如在选项中的某处切换开关那么理想。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:57:03.487

我解决了这个问题，只是在属性窗格中将框架切换到 .NET 4.0。我不相信我使用了任何特定于 4.5 的东西。

# functional-programming - 如何缩短此 OCaml 代码？

> ID：16216120
> 
> 赞同：2
> 
> 时间：2013-04-25T13:30:31.953
> 
> 标签：functional-programming, ocaml

我只是想知道如何缩短这些代码，因为我怀疑它太多余了

```
let get ename doc = 
  try Some (StringMap.find ename doc) with Not_found -> None;;

let get_double ename doc = 
  let element = get ename doc in
  match element with
    | None -> None
    | Some (Double v) -> Some v
    | _ -> raise Wrong_bson_type;;

let get_string ename doc = 
  let element = get ename doc in
  match element with
    | None -> None
    | Some (String v) -> Some v
    | _ -> raise Wrong_bson_type;;

let get_doc ename doc = 
  let element = get ename doc in
  match element with
    | None -> None
    | Some (Document v) -> Some v
    | _ -> raise Wrong_bson_type;; 
```

所以，基本上，我有不同类型的值，我把所有这些类型的值放到一个地图中。

上面的代码用于从地图中获取相应类型的值。我所做的是，对于每种类型，我都有一个 get。要获得一种类型的值，我必须看到 a)。是否存在；乙）。是否确实是那种类型，如果不是，则引发异常。

但是如您所见，上面的代码似乎是多余的。每种类型的 get 之间的唯一区别就是类型本身。

如何缩短此代码？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:36:43.713

你可以这样做：

```
let get_generic extract ename doc =
  let element = get ename doc in
  match element with
    | None -> None
    | Some v -> Some (extract v)

let get_double = get_generic (function Double v -> v | _ -> raise Wrong_bson_type)
let get_string = get_generic (function String v -> v | _ -> raise Wrong_bson_type)
let get_doc = get_generic (function Document v -> v | _ -> raise Wrong_bson_type) 
```

编辑：删除多余的`raise Wrong_bson_type`（但它很难看）：

```
let get_generic extract ename doc = try
  let element = get ename doc in
  match element with
    | None -> None
    | Some v -> Some (extract v)
with Match_failure _ -> raise Wrong_bson_type

let get_double = get_generic (fun (Double v) -> v)
let get_string = get_generic (fun (String v) -> v)
let get_doc = get_generic (fun (Document v)-> v) 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:52:46.957

您可以使用 GADT 来做到这一点：

如果您定义这样的类型`expr`：

```
type _ expr =
  | Document: document -> document expr
  | String: string -> string expr
  | Double: float -> float expr 
```

你可以写一个`get`这样的函数：

```
let get : type v. v expr -> v = function
   Document doc -> doc
 | String s -> s
 | Double d -> d 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-09-25T12:56:36.930

使用 GADT：

```
type _ asked = 
 | TDouble : float asked
 | TString : string asked
 | TDocument : document asked

let get : type v. v asked -> string -> doc StringMap.t -> v option = 
  fun asked ename doc ->
  try
    Some (match asked, StringMap.find ename doc with
         | TDouble, Double f -> f
         | TString, String s -> s
         | TDocument, Document d -> d)
  with Not_found -> None

let get_double = get TDouble
let get_string = get TString
let get_document = get TDocument 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-26T06:41:22.943

如果您可以使用这些提取器功能：

```
let extract_double = function
  | Double v -> v
  | _ -> raise Wrong_bson_type

let extract_string = function
  | String v -> v
  | _ -> raise Wrong_bson_type

let extract_doc = function
  | Document v -> v
  | _ -> raise Wrong_bson_type 
```

然后，您可以对高阶函数使用 monadic 样式，这样您就可以保留原始定义`get`：

```
let return x = Some x

let (>>=) mx f = 
  match mx with
    | Some x -> f x
    | None -> None

let get_with exf ename doc =
  (get ename doc) >>= fun v -> 
  return (exf v)

let get_double = get_with extract_double
let get_string = get_with extract_string
let get_doc = get_with extract_doc 
```

减少冗余并将副作用抽象为通用绑定和返回操作。

# jsp - 在 JSP 页面上动态放置 JSP 标签

> ID：16216122
> 
> 赞同：1
> 
> 时间：2013-04-25T13:30:35.743
> 
> 标签：jsp, spring-mvc, jsp-tags

我正在执行 Spring MVC 和 JSP 中的第一步，我正在尝试找出执行以下操作的最佳方法：

我需要根据我的业务逻辑创建一个由一些静态 HTML 和一些出现在页面上的动态小部件组成的动态页面。每个小部件都是一个包含一些内容的 div：一个小部件可能会显示趋势，而另一个小部件可能会显示表格等。我真正需要做的是在运行时决定将哪个小部件放在页面中的特定位置并将其放置那里。换句话说，我需要用 JSP 标记文件或任何其他将提供小部件 HTML 的内容动态替换 JSP 文件中的某个占位符。我可以通过用一些 if 或 switch 语句包装每个占位符来简单地做到这一点，但我想知道是否有更清洁的方法来做到这一点。

谢谢，约西

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-11-26T10:56:20.663

如果您想在 IDE 代码导航支持的情况下立即查看代码中包含的内容，那么列表`<c:when>`就是要走的路。

动态包含（例如`<jsp:include page="${widgetName}" />`）肯定会使代码更短，但也不太容易理解正在发生的事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:55:48.650

JSP 动态包含可能会解决您的问题。请检查一下这个概念。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T15:08:06.357

`JSP`，作为一种服务器端技术，不能参与运行时事件（即用户加载页面后）；一旦呈现的响应（即 HTML）离开服务器并开始访问用户浏览器，`JSP`' 的角色就结束了。如果你想改变内容，你只能通过另一个请求来获得它。

有几种技术可以帮助您从较小的构建块（例如 JSP 包括、Apache Tiles 等）组装 HTML 响应，但根据定义，它们只能在请求时对预先知道的请求参数做出反应。

如果您需要运行时灵活性，您可以：

*   始终构建一个包含所有潜在小部件的“完整”页面并将其返回给所有用户，但使某些元素最初隐藏（通过 CSS），用户对小部件的请求只会使其可见
*   通过 AJAX 从服务器请求 HTML 片段并使用 JavaScript 将它们附加到页面。

# sql - 在子查询中使用当前行值

> ID：16216129
> 
> 赞同：4
> 
> 时间：2013-04-25T13:31:08.273
> 
> 标签：sql

我正在尝试计算 order_Id 在子查询中出现的次数，然后将其显示在每个客户订单的平均值旁边。这是我尝试过的。

```
select person ,AVG(orderTotal) as avgOrdersValue , timesSeen 
from 
    (
select  
Customer_Id as person 
,Order_Id
, SUM(total)as orderTotal 
,(select COUNT(Order_Id) as timesSeen  
from Orders where  Customer_Id=person  group by Order_Id
    )
from Orders group by Customer_Id  Order_Id order by person ) tablealias 
group by person 
```

这是我收到的消息：“ *Msg 207, Level 16, State 1, Line 4 Invalid column name 'person'. Msg 8155, Level 16, State 2, Line 10 No column name is specified for column 4 of 'gg' . 消息 207，级别 16，状态 1，第 1 行无效的列名称“timesSeen”。* ”

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T13:36:37.443

根据您的描述，这可能是您想要的查询：

```
select person, AVG(OrderTotal), COUNT(distinct orderId)
from (select Customer_id as person, Order_id, SUM(total) as OrderTotal
      from Orders
      group by Customer_Id, Order_Id
     ) o
group by person 
```

我说“可能”是因为我希望`OrderId`成为`Orders`表中的唯一键。所以，内部子查询不会做任何事情。也许您的意思类似于`OrderLines`内部查询。

您的查询失败的原因是由于相关性语句：

```
where Customer_Id = person 
```

您打算为此使用来自外部查询（“person”）的值与内部查询（“Customer_Id”）相关联。但是，内部查询不知道`select`外部查询子句中的别名。所以，“人”是未定义的。在进行相关子查询时，您应该*始终*使用表别名。该查询应该更像：

```
(select COUNT(o2.Order_Id) as timesSeen  
 from Orders o2 where  o2.Customer_Id=o.person 
 group by o2.Order_Id
) 
```

假设“o”是外部查询中订单的别名。不需要相关的子查询。您应该只简化查询。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:35:48.267

您不能在子查询中使用结果列的名称。命名您的子查询`Orders`表`o`并执行`WHERE Customer_id = o.Customer_Id`. 最好为这些表中的每一个制作别名，以免它们混淆。

# forms - eZ Publish 5 中的 Symfony 2 形式，CSRF 直觉

> ID：16216134
> 
> 赞同：1
> 
> 时间：2013-04-25T13:31:16.500
> 
> 标签：forms, symfony, ezpublish

我正在做一个 eZ publish 5 项目。这个 CMS 基于 symfony 2。我已经构建了一个没有类的表单，如 tge 页面中所述：[http ://symfony.com/doc/current/book/forms.html#using-a-form-without-a-class](http://symfony.com/doc/current/book/forms.html#using-a-form-without-a-class)

在 eZ 发布 5 文档（[https://confluence.ez.no/display/EZP/Legacy+configuration+injection](https://confluence.ez.no/display/EZP/Legacy+configuration+injection)）上，我读到我需要将 CSRF 意图参数设置为“旧版”。我不知道该怎么做。我尝试在我的 formBuilder 上使用 add 方法：

`$this->createFormBuilder()->add('_token', 'csrf', array('intention'=>'legacy');`

但我收到一个错误“无法加载类型 csrf”。

有人可以帮我吗？

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-30T09:22:21.987

好的，我已经尝试过了。

我的第一个答案实际上是一个问题：如果您不打算执行任何遗留内核代码作为表单的后续操作，我相信您不需要关心意图。

Symfony 和旧版内核之间的意图只需要在旧版内核启动时匹配（在这种情况下，它将检查是否有令牌，以及是否有效）。

如果您需要使用 Legacy Kernel，您可以通过传递自定义表单选项将意图设置为 legacy：

```
$formOptions = array( 'intention' => 'legacy' );
$form = $this->createFormBuilder( null, $formOptions )
    ->add( 'text', 'text' )
    ->getForm(); 
```

[http://symfony.com/doc/current/book/forms.html#csrf-protection](http://symfony.com/doc/current/book/forms.html#csrf-protection)中解释了设置默认意图，但我不建议这样做，除非您打算只依赖旧内核。

# file-upload - 剑道上传 - 更改文件名并取回

> ID：16216135
> 
> 赞同：3
> 
> 时间：2013-04-25T13:31:17.290
> 
> 标签：file-upload, kendo-ui

我在我的 mvc 项目上使用剑道上传。我的用户必须上传文件，我必须用唯一的文件名更改文件名。我更改控制器中的文件名：

```
public ActionResult Dosyayukle(IEnumerable<HttpPostedFileBase> files)
{
    if (files != null)
    {
        foreach (var file in files)
        {
            var fileName = Path.GetFileName(file.FileName);
            var ext = Path.GetExtension(fileName);

            var physicalPath = Path.Combine(Server.MapPath("~/UploadedFiles"), fileName.Replace(ext, "") + Guid.NewGuid() + ext);
            file.SaveAs(physicalPath);
        }
    }

    // Return an empty string to signify success
    return Content("");
} 
```

我需要获取文件名并将此文件名保存到具有唯一名称的 db 中。

在 JS onComplate 事件中，我找不到文件新文件名。

```
this.onComplate = function (e) {

    var dosyaAdi = self.dosyaAdi();
    if (dosyaAdi.match(/rar$/)) {
        alert('rar');
    } else if (dosyaAdi.match(/zip$/)) {
        alert('zip');
    } else {
        alert(dosyaAdi);
    }
}; 
```

如何将新文件名传递给 onComplate 事件处理程序？

或者我该如何以另一种方式做到这一点？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-03-06T13:48:29.267

您可以使用 TempData 存储键值对象，您可以在其中保存文件名和唯一键。您可以在 save 调用中获取相同的临时数据。希望这能解决您的问题。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-05-20T05:55:36.003

我已经为您的问题找到了解决方案。

[http://www.telerik.com/support/kb/aspnet-ajax/editor/giving-the-uploaded-files-unique-names.aspx](http://www.telerik.com/support/kb/aspnet-ajax/editor/giving-the-uploaded-files-unique-names.aspx)

# spring - Spring 事务管理器：回滚不起作用

> ID：16216137
> 
> 赞同：3
> 
> 时间：2013-04-25T13:31:20.817
> 
> 标签：spring, transactions, spring-transactions, transactionmanager

我希望在事务块中执行一些插入查询，如果有任何错误，所有插入都将回滚。

我为此使用`MySQL`数据库和**Spring TransactionManager**。表格类型也是`InnoDB`

[我已经按照此处](http://www.tutorialspoint.com/spring/programmatic_management.htm)提到的步骤完成了配置。

以下是我的代码（目前只有一个查询）

```
TransactionDefinition def = new DefaultTransactionDefinition();
TransactionStatus status = null;

status = transactionManager.getTransaction(def);
jdbcTemplate.execute(sqlInsertQuery);
transactionManager.rollback(status); 
```

**弹簧配置 xml：**

```
<bean id="jdbcTemplate" class="org.springframework.jdbc.core.JdbcTemplate">
    <property name="dataSource">
        <ref bean="dataSource" />
    </property>
</bean>

<bean id="transactionManager"
    class="org.springframework.jdbc.datasource.DataSourceTransactionManager">
    <property name="dataSource" ref="dataSource" />
</bean> 
```

**数据源配置：**

```
<bean id="dataSource" class="org.apache.commons.dbcp.BasicDataSource">
    <property name="driverClassName" value="${jdbc.driverClassName}" />
    <property name="url" value="${jdbc.url}" />
    <property name="username" value="${jdbc.username}" />
    <property name="password" value="${jdbc.password}" />
    <property name="initialSize" value="${jdbc.initialSize}" />
    <property name="maxActive" value="${jdbc.maxActive}" />
    <property name="minIdle" value="${jdbc.minIdle}" />
    <property name="maxIdle" value="${jdbc.maxIdle}" />
    <property name="testOnBorrow" value="${jdbc.testOnBorrow}" />
    <property name="testWhileIdle" value="${jdbc.testWhileIdle}" />
    <property name="testOnReturn" value="${jdbc.testOnReturn}" />
    <property name="validationQuery" value="${jdbc.validationQuery}" />
    <property name="timeBetweenEvictionRunsMillis" value="${jdbc.timeBetweenEvictionRunsMillis}" />
    <!--<property name="removeAbandoned" value="true"/> <property name="removeAbandonedTimeout" 
        value="10"/> <property name="logAbandoned" value="false"/> -->
    <property name="numTestsPerEvictionRun" value="${jdbc.numTestsPerEvictionRun}" />
</bean> 
```

这段代码工作得很好，并且记录被插入。但是回滚不起作用！它执行回滚语句没有任何错误但没有效果。

谁能指导我哪里出错了？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T13:19:05.303

看来问题是您的数据源未设置为关闭自动提交。

```
<property name="defaultAutoCommit" value="false"/> 
```

试试看。我从未在代理之外使用过 TransactionManager，所以我不确定是否有任何其他问题直接像这样使用它，但我建议您查看 AOP 事务或方便的 AOP 代理注释 @Transactional，因为它更常见.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-26T14:33:34.033

**编辑：**

我终于能够通过执行以下操作来解决这个问题：

```
dmlDataSource.setDefaultAutoCommit(false); //set autocommit to false explicitly.
Exception ex = (Exception)transactionTemplate.execute(new TransactionCallback() {
                public Object doInTransaction(TransactionStatus ts) {
                    try {
                        dmlJdbcTemplate.execute(sqlInsertQuery);
                        ts.setRollbackOnly();
                        dmlDataSource.setDefaultAutoCommit(true); // set autocommit back to true    
                        return null;
                    } catch (Exception e) {
                        ts.setRollbackOnly();
                        LOGGER.error(e);
                        dmlDataSource.setDefaultAutoCommit(true); // set autocommit back to true    
                        return e;
                    }
                }
            }); 
```

* * *

我现在没有使用事务管理器。使用 trasactionTemplate 并执行以下操作：

```
Exception ex = (Exception)transactionTemplate.execute(new TransactionCallback() {
                public Object doInTransaction(TransactionStatus ts) {
                    try {
                        dmlJdbcTemplate.execute(sqlInsertQuery);
                        ts.setRollbackOnly();                           
                        return null;
                    } catch (Exception e) {
                        ts.setRollbackOnly();
                        LOGGER.error(e);
                        return e;
                    }
                }
            }); 
```

使用@Moles-JWS 的答案后，我现在可以成功回滚。但我只想在这种方法中处理这个问题，而不是更改数据源的全局配置。

我可以在这里以编程方式进行吗？

# magento - Magento，看看后端用户是否在线？

> ID：16216138
> 
> 赞同：1
> 
> 时间：2013-04-25T13:31:22.113
> 
> 标签：magento, backend

我有一个 Magento 网站。有管理员用户，那就是我和其他用户。如何查看其他用户是否已登录（后端）？

### 编辑

感谢 Sandeep，我现在有了这个：

```
<?php   
    $session = Mage::getSingleton('admin/session');
    $userDetails = Mage::getSingleton('admin/session'); 
     // Get data from the session $userID = 
    $userDetails->getUser()->getUserId(); 
     // Get user ID $userID = 
    $userDetails->getUser()->getEmail();

    // Use the 'admin/session' object to check loggedIn status
    if ( $session->isLoggedIn() ) {
        echo "Ingelogd";
    } else {
        echo "Niet ingelogt";
    }
?> 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-25T13:52:24.923

```
$session = Mage::getSingleton('admin/session');

// Use the 'admin/session' object to check loggedIn status
if ( $session->isLoggedIn() ) {
   echo "logged in";
} else {
   echo "not logged in";
} 
```

# windows - WNetAddConnection2 使用错误的凭据

> ID：16216141
> 
> 赞同：6
> 
> 时间：2013-04-25T13:31:26.697
> 
> 标签：windows, winapi, webdav

我在使用 WNetAddConnection2 时遇到了一个奇怪的问题。首先，我使用正确的服务器名称、用户名和密码连接到 WebDAV 文件夹。连接按预期建立，我可以使用 Windows 资源管理器看到已安装的驱动器。

之后，我调用 WNetCancelConnection2 删除已安装的驱动器。工作正常，它从资源管理器中消失。

现在出现了奇怪的行为。如果我尝试再次连接到服务器，无论我使用什么密码，我都可以使用一个完全错误的密码，然后驱动器再次安装而没有任何问题。似乎Windows缓存了连接。

我发现它只需要一分钟，在那之后尝试连接会出现预期的错误消息。

我的问题是这 60 秒的时间范围是否可以调整，或者我可以做些什么来避免这种行为。

在此先感谢您的帮助。

# ruby-on-rails - 我的一些本地人没有传递给我的部分

> ID：16216146
> 
> 赞同：1
> 
> 时间：2013-04-25T13:31:35.330
> 
> 标签：ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2, partial-views, actionview

我遇到了一个很奇怪的问题。

考虑以下代码片段：

```
<%= render partial: 'my_partial', locals: { a: 1, b: 2, c: 3 } %> 
```

和部分

```
<%= a %>
<%= b %>
<%= c %> 
```

尝试运行它会给我以下错误

```
NameError - undefined local variable or method `a' for #<#<Class:0xb529d244>:0xb4f8c80c>: 
```

如果我删除`<%= a %>`并`<%= b %>`从我的部分 c 中输出，没有任何问题。

对于为什么会发生这种情况的任何帮助，都非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:40:06.523

在 rails 3 中使用以下语法：

```
<%=  render "my_partial", :a => 1, :b => 2, :c => 3 %> 
```

**编辑：** 而是试试这个：

```
<%= render 'my_partial', :locals => {:a => 1, :b => 2, :c => 3 } %> 
```

# linux - 以编程方式更改 Windows 和 Linux 上的睡眠/挂起超时

> ID：16216147
> 
> 赞同：1
> 
> 时间：2013-04-25T13:31:35.943
> 
> 标签：linux, windows, operating-system, sleep, suspend

我正在寻找一种方法来以编程方式更改 Windows (XP) 和 Linux (Debian & Ubuntu) 操作系统上的睡眠/挂起超时，而无需重新启动系统。我花了很多时间寻找解决方案，但还没有找到任何结论性的东西。有人能指出我正确的方向吗？

# taxonomy - SQL 重载 - 奇怪的查询

> ID：16216165
> 
> 赞同：1
> 
> 时间：2013-04-25T12:41:56.940
> 
> 标签：taxonomy, mysql

我的托管人声称以下 SQL 查询使服务器超载并导致其执行缓慢并威胁要禁用我的帐户。我似乎找不到瓶颈 - 任何人都可以帮我检测这一切的来源吗？

1 分钟前在数据库 --> mydb_name 上执行 8 秒。

```
SELECT * FROM tsk_posts 
    LEFT JOIN tsk_term_relationships ON
        (tsk_posts.ID = tsk_term_relationships.object_id) 
    LEFT JOIN tsk_term_taxonomy ON 
        (tsk_term_relationships.term_taxonomy_id = tsk_term_taxonomy.term_taxonomy_id) 
    WHERE 
        tsk_posts.post_status = 'publish' 
    AND 
        tsk_posts.post_type = 'post' 
    AND 
        tsk_term_taxonomy.taxonomy = 'category' 
    AND 
        ( tsk_term_taxonomy.term_id = 4 OR tsk_term_taxonomy.term_id = 103 OR
          tsk_term_taxonomy.term_id = 19 OR tsk_term_taxonomy.term_id = 20 OR 
          tsk_term_taxonomy.term_id = 5 OR tsk_term_taxonomy.term_id = 2 OR 
          tsk_term_taxonomy.term_id = 14 )
    ORDER BY RAND()
    LIMIT 1 
```

非常感谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:39:06.740

"order by rand" 可能是一个相当昂贵的查询。必须生成一个随机数，然后用于访问结果集。

每个表中有多少行？有没有索引？运行解释计划以更好地了解成本在哪里。

# c# - 如何将图像从filepiker复制到应用程序文件夹Windows商店应用程序

> ID：16216168
> 
> 赞同：0
> 
> 时间：2013-04-25T13:32:35.837
> 
> 标签：c#, windows-store-apps

这是文件选择器的代码，
我需要将用户打开的图像复制到应用文件夹。任何人都可以帮助我

```
private async void Button_Click(object sender, RoutedEventArgs e)
    {

        if (Windows.UI.ViewManagement.ApplicationView.Value != Windows.UI.ViewManagement.ApplicationViewState.Snapped ||
             Windows.UI.ViewManagement.ApplicationView.TryUnsnap() == true)
        {
            Windows.Storage.Pickers.FileOpenPicker openPicker = new Windows.Storage.Pickers.FileOpenPicker();
            openPicker.SuggestedStartLocation = Windows.Storage.Pickers.PickerLocationId.PicturesLibrary;
            openPicker.ViewMode = Windows.Storage.Pickers.PickerViewMode.Thumbnail;

            // Filter to include a sample subset of file types.
            openPicker.FileTypeFilter.Clear();
            openPicker.FileTypeFilter.Add(".bmp");
            openPicker.FileTypeFilter.Add(".png");
            openPicker.FileTypeFilter.Add(".jpeg");
            openPicker.FileTypeFilter.Add(".jpg"); 
```

// 打开文件选择器。

```
 Windows.Storage.StorageFile file = await openPicker.PickSingleFileAsync();

            // file is null if user cancels the file picker.
            if (file != null)
            {
                // Open a stream for the selected file.
                Windows.Storage.Streams.IRandomAccessStream fileStream =
                    await file.OpenAsync(Windows.Storage.FileAccessMode.Read); 
```

// 将图像源设置为选定的位图。`

```
 Windows.UI.Xaml.Media.Imaging.BitmapImage bitmapImage =
                    new Windows.UI.Xaml.Media.Imaging.BitmapImage();

                bitmapImage.SetSource(fileStream);
                img.Source = bitmapImage;
                this.DataContext = file;

            }
        }

    } 
```

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T19:31:56.057

使用[StorageFile.CopyAsync](http://msdn.microsoft.com/en-us/library/windows/apps/br227190.aspx)，即 file.CopyAsync。第一个参数是目标 StorageFolder，例如 Windows.Storage.ApplicationData.Current.LocalFolder，如果你想复制到 appdata；否则您需要创建一个文件夹或单独从选择器中获取一个。

例如，您可以让用户使用文件选择器（为文件夹配置）选择一个默认文件夹。请务必将该 StorageFolder 保存在 中，`[Windows.Storage.AccessCache][2]`以保留编程访问以供将来使用。

# android - 我无法在一个应用程序中获取 Android 中的 GCM ID

> ID：16216171
> 
> 赞同：1
> 
> 时间：2013-04-25T13:32:53.810
> 
> 标签：android, push-notification, google-cloud-messaging, public

[已解决，但我仍然想要最后一个问题的答案，问题是我使用大写字母而不是小写字母，我让代码让其他人可以更正错误]

我已经尝试了一些论坛页面并通过stackoverflow搜索了相同的内容，但我没有找到解决方案。

我有 2 个使用推送消息的应用程序，一个应用程序运行良好，但另一个没有，我在 Google 注册了 2 次，所以我得到 2 个不同的 Api 密钥和 2 个不同的发件人 ID，如果我切换发件人 ID，我仍然没有'在不工作的应用程序上获取 ID（但它在运行良好的应用程序上工作），它永远不会触发 onRegistered 函数

我的清单

```
 <permission android:name=""com.sexolia.sexyAsiaticas.permission.C2D_MESSAGE" android:protectionLevel="normal" />
<uses-permission android:name="com.sexolia.sexyAsiaticas.permission.C2D_MESSAGE" />
<uses-permission android:name="com.google.android.c2dm.permission.RECEIVE" />
<uses-permission android:name="android.permission.WRITE_EXTERNAL_STORAGE" />
<uses-permission android:name="android.permission.INTERNET" /> 
```

我的接收器

```
 <receiver android:name="com.google.android.gcm.GCMBroadcastReceiver"
    android:permission="com.google.android.c2dm.permission.SEND" >
        <intent-filter>
            <action android:name="com.google.android.c2dm.intent.RECEIVE" />
            <action android:name="com.google.android.c2dm.intent.REGISTRATION" />
            <category android:name="com.sexolia.sexyasiaticas" />
        </intent-filter>
    </receiver> 
```

我的服务

```
 <service android:name=".GCMIntentService" /> 
```

我的注册功能

```
public void registrarGcm(Context ctx)
{
      String regId = GCMRegistrar.getRegistrationId(ctx);
        if (regId.equals("")) 
        {
            GCMRegistrar.register(ctx, "795463622136"); //Sender ID
        } 
} 
```

构造函数

```
 public GCMIntentService() {
    super("795463622136");
} 
```

另外，我想知道，我如何决定哪个应用程序发送推送消息（是 api 密钥、发件人 ID 还是什么？）？当 1 个用户在 Google 上注册时，不同的应用程序有不同的 GCM id？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:18:16.507

好吧，您最后一个问题的答案是，每个注册 GCM 的应用程序都会收到不同的注册 ID，即使这些应用程序在同一设备上运行也是如此。这意味着根据您用于发送消息的注册 ID，GCM 将知道哪个应用程序发送消息。

顺便说一句，您可以在两个应用程序中使用相同的发件人 ID（又名 Google API 项目 ID）和 API 密钥来注册 GCM 并发送消息。您仍然会为每个应用程序获得不同的注册 ID。

# git - Git for windows - 无法克隆存储库

> ID：16216176
> 
> 赞同：2
> 
> 时间：2013-04-25T13:33:15.443
> 
> 标签：git

当我尝试使用 WINDOWS GIT ( [http://windows.github.com/](http://windows.github.com/) ) 克隆存储库时，它始终卡在 9% 完成。因此，似乎所有 git 特定文件都已下载，但源代码本身并未下载。

我尝试在位于 c:\users\username\.gitconfig 的 .gitconfig 中更新代理设置以包含代理设置：

```
proxy=myproxy:myport 
```

什么可能导致这个问题？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T10:17:30.567

我需要设置一个系统变量

```
name = https_proxy and value = <proxy name>:<port number> 
```

有关更多信息，请参阅接受的 anwser + 评论[让 git 与代理服务器一起工作](https://stackoverflow.com/questions/783811/getting-git-to-work-with-a-proxy-server)

# python - 使用潜在语义分析进行聚类

> ID：16216177
> 
> 赞同：4
> 
> 时间：2013-04-25T13:33:15.560
> 
> 标签：python, nlp, cluster-analysis, lsa

假设我有一个文档语料库并在其上运行 LSA 算法。如何使用应用 SVD 后获得的最终矩阵对出现在我的文档语料库中的所有单词进行语义聚类？维基百科说 LSA 可用于查找术语之间的关系。Python 中是否有任何可用的库可以帮助我完成基于 LSA 对单词进行语义聚类的任务？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-27T07:49:44.877

尝试`gensim`（[http://radimrehurek.com/gensim/index.html](http://radimrehurek.com/gensim/index.html)），只需按照以下说明安装：[http ://radimrehurek.com/gensim/install.html](http://radimrehurek.com/gensim/install.html)

然后这里是一个代码示例：

```
from gensim import corpora, models, similarities

documents = ["Human machine interface for lab abc computer applications",
             "A survey of user opinion of computer system response time",
             "The EPS user interface management system",
             "System and human system engineering testing of EPS",
             "Relation of user perceived response time to error measurement",
             "The generation of random binary unordered trees",
             "The intersection graph of paths in trees",
             "Graph minors IV Widths of trees and well quasi ordering",
             "Graph minors A survey"]

# remove common words and tokenize
stoplist = set('for a of the and to in'.split())
texts = [[word for word in document.lower().split() if word not in stoplist]
         for document in documents]

# remove words that appear only once
all_tokens = sum(texts, [])
tokens_once = set(word for word in set(all_tokens) if all_tokens.count(word) == 1)

texts = [[word for word in text if word not in tokens_once] for text in texts]

dictionary = corpora.Dictionary(texts)
corp = [dictionary.doc2bow(text) for text in texts]

# extract 400 LSI topics; use the default one-pass algorithm
lsi = models.lsimodel.LsiModel(corpus=corp, id2word=dictionary, num_topics=400)

# print the most contributing words (both positively and negatively) for each of the first ten topics
lsi.print_topics(10) 
```

# java - 使用 iText 将“邮票”注释转换/刻录成图像

> ID：16216182
> 
> 赞同：1
> 
> 时间：2013-04-25T13:33:24.900
> 
> 标签：java, pdf, annotations, itext, stamp

我有一个包含各种类型注释的 PDF 文件，其中一种是“邮票”类型。我正在使用[iText](http://itextpdf.com/itext.php)，我需要将此图章转换为相同大小的相同位置的图像，然后删除此图章。

我怎样才能做到这一点？有没有办法读取`PdfName.STAMP`图像？

谢谢，

# jquery - jQuery 循环问题

> ID：16216191
> 
> 赞同：2
> 
> 时间：2013-04-25T13:33:44.073
> 
> 标签：jquery, jquery-cycle

我有以下代码，无论出于何种原因，我的 end 选项似乎不想调用它应该调用的函数。有任何想法吗？

```
$(document).ready(function() {
    $('#weareepic').cycle({ 
        fx:      'fade', 
        speed:    1000, 
        timeout:  1500,
        nowrap: 1,
        end: function() {
            $('#bigshots').fadeout(1500);
        }
    });
}); 
```

非常感谢各位！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:42:17.503

'fadeout' 应该是驼峰式的'fadeOut'。

由于被 jquery 捕获，jquery ajax 调用中的 Javascript 错误可以被隐藏。如果出现问题，我建议使用调试器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:42:34.783

您必须结合使用`end`，`autostop`否则您的`end`回调函数将不会被调用：

```
$(document).ready(function() {
    $('#weareepic').cycle({ 
        fx:      'fade', 
        speed:    1000, 
        timeout:  1500,
        nowrap: 1,
        autostop: true,
        end: function() {
            $('#bigshots').fadeOut(1500);
        }
    });
}); 
```

然后，您可以从结束回调函数重新启动循环。

# c# - 我们可以对所有单元测试类只使用一个 ClassInitialize 吗？

> ID：16216196
> 
> 赞同：3
> 
> 时间：2013-04-25T13:33:55.983
> 
> 标签：c#, sql, unit-testing, visual-studio-2012

我开始了实习，我的工作包括为一些项目设置单元测试。

我已经实现了几十个测试，现在我想创建一个机制，在每次运行之后或之前恢复原始数据库。

我有必要的脚本来创建、填充和删除我的数据库，但我不想在每个测试类中调用这个机制，而是只调用一次。

当我开始一个或所有测试时，是否可以创建一个`ClassIniatialize()`只被调用一次的对象？

**编辑**

我/你需要的只是使用***AssemblyInitialize()***和***AssemblyCleanUp()***并且一切都已解决，;)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T15:53:40.920

我/你需要的只是使用***AssemblyInitialize()***和***AssemblyCleanUp()***并且一切都已解决，;)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:39:42.147

您可以在 上启动事务`TestInitialize`并回滚`TestCleanup`。这种方法将允许您避免在单个测试范围之外进行数据更改。

```
 [TestInitialize()]
  public void Initialize()
  {
     //Init DB Transaction
  }

  [TestCleanup()]
  public void Cleanup()
  {
     //Rollback DB Transaction, database returns to the initial state
  } 
```

您需要有一个先前填充的测试数据库来运行测试。

附带说明一下，应该在集成测试而不是单元测试中测试数据库访问。添加外部依赖项违反单元测试定义。

还要检查在内存中使用[SQLite](http://www.sqlite.org/inmemorydb.html)的可能性，这将更适合于测试生产数据库引擎的数据库访问。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:36:00.453

您可以创建一个基类并使用 ClassInitialize 属性在该基类中装饰一个方法。

之后，您只需要确保您的所有测试类都继承自这个基类。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T13:36:10.633

ClassInitilize 方法将为您拥有的每个测试类调用一次。例如，您可以在基本测试类中只实现一次它，但仍然会为每个测试类调用一次。

# json - 在 Groovy 中解析 Json

> ID：16216202
> 
> 赞同：2
> 
> 时间：2013-04-25T13:34:19.610
> 
> 标签：json, groovy

我有以下 json 字符串：

```
[ { id: '123', name: 'bla bla', type: 'Source', isLeaf: true },
  { id: '3425', name: 'test test', type: 'Reference', isLeaf: false },
  { id: '12678', name: 'tags', type: 'Source', isLeaf: false },
] 
```

我正在尝试使用 JsonSlurper 解析它，但出现错误：

```
groovy.json.JsonException: Lexing failed on line: 1, column: 5, while reading 'i', no possible valid JSON value or punctuation could be recognized. 
```

我如何解析它并访问它`id:'3425'`？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:45:28.570

您的 Json 无效，您需要使用双引号来分隔字符串，并且您还需要在 Json 中的键周围加上引号，如下所示：

```
[ { "id": "123", "name": "bla bla", "type": "Source", "isLeaf": true },
  { "id": "3425", "name": "test test", "type": "Reference", "isLeaf": false },
  { "id": "12678", "name": "tags", "type": "Source", "isLeaf": false },
] 
```

然后你可以这样做：

```
def ids = new groovy.json.JsonSlurper().parseText( json ).id
assert ids[ 1 ] == '3425' 
```

# android - AsyncTask 从很多地方调用了很多

> ID：16216204
> 
> 赞同：1
> 
> 时间：2013-04-25T13:34:35.737
> 
> 标签：android, user-interface, android-asynctask

我正在使用一个简单的 AsyncTask 将网页的源代码作为字符串下载。到目前为止一切正常。

但是，我不想总是对结果字符串做同样的事情，有时我想用它填充 gui，有时我想解析它，有时我想用它作为参数调用更多函数。实际上，我有不止一个活动和不止一个类需要下载页面的源代码。

当然， onPostExecute() 是必须处理我的任务结果的东西，但是由于它将从很多地方调用，并且出于很多不同的原因，我真的很茫然。

我能做些什么？

我真的不想写 20 个 AsyncTasks，它们总是在他们的 doInBackground(...) 中用不同的 onPostExecute 做同样的事情，我也不希望来自 20 个不同类/活动的代码最终在一个 onPostExecute 中结束，我的代码会维护起来如此复杂。

有什么建议吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:56:05.757

我会使用接口来解决它。制作一个异步任务，在 doInBackground 中执行正确的操作，并接受一些参数，以便您知道在 onPostExecute 中要做什么，并将参数和结果传递给 onPostExecute。

**然后使用类似handleSourceCodeString(String source)**的方法创建一个接口；然后为您想要执行的每个操作实现一个类。然后将类放在某个 init 函数中的映射中。

```
Map<String, Class> myActionMap = new HashMap<String,Class>;
myActionMap.put("parse-soruce", ParseSource.class) //(where ParseSource.class implements your interface) 
```

然后在您的 postExecute 中执行以下操作：

```
((MyActionInterface)myActionMap.get(action).newInstance()).handleSourceCodeString(source); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-02-01T18:41:29.830

我发现这个......喜欢这个想法......在我看来，这似乎比使用接口更直接而且更好。

[从 AsyncTask 外部调用 AsyncTask onPostExecute](https://stackoverflow.com/questions/24429855/asynctask-onpostexecute-call-from-outside-the-asynctask)

看第一个答案

# javascript - 如何避免 TypeError：无法设置属性 'onchange' of null

> ID：16216214
> 
> 赞同：0
> 
> 时间：2013-04-25T13:34:51.470
> 
> 标签：javascript

我怎样才能避免这个错误？它有效，但我总是看到这个错误，这里是代码：

```
function Separe(price) {
    nStr = Number(document.getElementById(price).value) * 100
    nStr += '';
    var rgx = /(\d+)(\d{3})/;
    while (rgx.test(nStr)) {
        nStr = nStr.replace(rgx, '$1' + ' ' + '$2');
    }
    return nStr + " Centimes"
}

function Forma(price, dest) {
    var handler = function(e) {
        document.getElementById(dest).innerHTML = Separe(price)
    };
    document.getElementById(price).onchange = handler; //line 50
    document.getElementById(price).onkeyup = handler;
} 
```

和 HTML：

```
<input id="prix" type="number" name="prix" min="1" step="1">
<script>
    Forma("prix", "hhh"); //profil 148
</script>
<h1 id="hhh" >&nbsp;</h1> 
```

我的页面在加载时发出错误：

```
Uncaught TypeError: Cannot set property 'onchange' of null formatter.js:50
Forma formatter.js:50
(anonymous function) profil:148 
```

我这样做是为了避免放`onchange`两次`onkeyup`

变量尚未生成，这是错误的原因，但我该如何避免呢？我什至尝试添加所有变量并将它们初始化为空值，但仍然出现错误！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:55:29.747

完全避免此错误的唯一方法是在查询时将您要求的元素在 DOM 中准备好。

假设你有这个 HTML：

```
<span id="monkey">Hey I'm a monkey</span>
Result for hopeful monkey:<span id="result"></span>
Result for not so hopeful monkey:<span id="noresult"></span> 
```

这个javascript：

```
var hopefulMonkey = document.getElementById("monkey");
document.getElementById("result").innerHTML = hopefulMonkey;

var notSoHopefulMonkey = document.getElementById("noMonkeys");
document.getElementById("noresult").innerHTML = " "+notSoHopefulMonkey; 
```

输出将是：

```
Hey I'm a monkey 
Result for hopeful monkey:[object HTMLSpanElement] 
Result for not so hopeful monkey: null 
```

因此，如果您遇到该错误，您正在尝试访问显然尚不存在或根本不存在的元素。

也就是说，由于您发布的代码在 Chrome 中有效，因此您还有其他问题会导致您的麻烦。你运行的是什么版本？

我解决了你的问题：http: [//jsfiddle.net/EqtQz/](http://jsfiddle.net/EqtQz/)

我也做了一个小提琴来展示我的答案：http: [//jsfiddle.net/vB2Jp/1/](http://jsfiddle.net/vB2Jp/1/)（它有猴子，所以也很有趣！）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-27T13:34:58.320

看来我是代码中的重复函数！页面使用手风琴效果，函数被调用了两次（买入区，卖出区），奇怪的是，即使`id`是不同的，代码也会提示错误；但只有第一个电话有效，第二个电话无效。

在第二个是一个不同的 id：

```
<script>
Forma("hh", "max");
</script> 
```

……

```
<script>
Forma("h", "min");
</script> 
```

我所做的是更改为第二

```
<input .... onkeyup="document.getElementById('h').innerHTML = Separe('min')"  onchange="document.getElementById('h').innerHTML = Separe('min')"/> 
```

它奏效了！现在 Chrome 甚至不会提醒我第一部分（购买）会像我的问题一样调用该函数！

# yii - 使用模型生成器更新现有模型

> ID：16216218
> 
> 赞同：1
> 
> 时间：2013-04-25T13:35:05.147
> 
> 标签：yii

我使用模型生成器生成模型，然后（之后）添加一个新表和新的外键关系。

是否可以使用模型生成器更新现有模型？

还是在添加新表时需要手动编辑代码？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:24:41.260

看看[gii-template-collection](https://github.com/schmunk42/gii-template-collection)和它的**FullModel**模板。

默认情况下，它会为您的模型生成两个类，`BaseModel`并且`Model`. 对我来说，最佳实践是将我的自定义函数、行为、范围等添加到`Model`并`BaseModel`保持不变。

如果您的数据库模式有更改，只需重新生成`BaseModel`该类。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:59:37.607

不，您不能使用 Gii 工具编辑现有模型。您将不得不手动更新模型或生成新模型。

# javascript - 使用 jquery 更改事件时，tab 键未按预期工作

> ID：16216225
> 
> 赞同：2
> 
> 时间：2013-04-25T13:35:30.710
> 
> 标签：javascript, jquery, html

我从 jquery 事件中得到了一些奇怪的结果，尽管我不完全相信这是否是 jquery 问题。我希望一些 jquery 极客可以回答这个问题。

我的 html 页面中有以下代码片段，`second`一旦用户在输入框中输入长度为 9 的字符串，就可以将焦点更改为`first`输入框。这种自动对焦工作顺利。但是当我从输入框中按 Tab 时`first`，它总是跳过`second`输入框并转到下一个 html 元素到`second`输入框。

```
$("input.first").change(function (e){
    var text = $(this).val();
    if (text.length == 9){
        $("input[id='second']").focus();
    }
}); 
```

我尝试将`tabindex`属性放入 html 元素，但它仍然继续其不当行为。但最后，当我将`change`事件更改为`keypress`事件选项卡键时，开始按预期流动。

有没有人可以解释为什么会发生这种情况？感谢您的任何回答。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:48:18.377

您可以手动将选项卡索引添加到控件。我希望它会奏效。

```
$(function() {
  var tabindex = 1;
  $('input').each(function() {
     if (this.type != "hidden") {
       var $input = $(this);
       $input.attr("tabindex", tabindex);
       tabindex++;
     }
  });
}); 
```

# magento - Magento在后端保存时不显示产品

> ID：16216228
> 
> 赞同：0
> 
> 时间：2013-04-25T13:35:40.143
> 
> 标签：magento

我的 Magento 1.5 有一个小问题

产品在前端显示正常，但在后端打开产品并按保存或保存并继续时，前端没有显示任何内容。

我认为这是索引管理的问题。

我能做些什么来不重新索引孔类别或保存产品的孔数据库？

任何帮助表示赞赏。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:28:21.007

您可以将索引的行为更改为不更新每个产品更改，而只能手动进行（即通过 cronjob）

您可以在系统/索引管理的管理区域中更改它。选择产品索引并在下拉列表中选择“更改索引模式”。

# c++ - msvcprtd.lib(MSVCP100D.dll)：致命错误 LNK1112：模块机器类型“X86”与目标机器类型“x64”冲突

> ID：16216229
> 
> 赞同：5
> 
> 时间：2013-04-25T13:35:40.757
> 
> 标签：c++, windows, visual-studio-2010, 64-bit

我创建了一个vs 2010 win 32程序（操作系统：Win 8-64bit）

然后，我尝试通过这样做将这个 win32 程序转换为 x64：

```
 Configuration Manager -> new solution platform (select x64) -> copy settings from win32 
```

vs2010在之前的win32程序的基础上创建了一个新的x64程序。

但是，当我尝试编译和运行 x64 程序时，出现了一个错误：msvcprtd.lib(MSVCP100D.dll)：致命错误 LNK1112：模块机器类型“X86”与目标机器类型“x64”冲突

通过重命名 msvcprtd.lib 的 win32 版本和 x64 版本，我发现程序仍在使用 win32 msvcprtd.lib。

我检查并发现 msvcprtd.lib 在 $(VCInstallDir)lib\amd64 中。而且：

Library Directories -> Inherited values 包含了所有必要的目录（我认为）：

```
$(VCInstallDir)lib\amd64
$(VCInstallDir)atlmfc\lib\amd64
$(WindowsSdkDir)lib\x64 
```

我还检查了程序使用的第 3 方库和 dll 是 x64 版本的。

我的问题是为什么程序还在使用 win32 msvcprtd.lib 以及如何解决这个问题？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2015-10-25T21:29:36.333

In the project Library Directories, be sure you change

`$(VCInstallDir)lib` and `$(VCInstallDir)atlmfc\lib`

to

`$(VCInstallDir)lib\amd64` and `$(VCInstallDir)atlmfc\lib\amd64`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-10-17T11:56:24.740

搜索后，我发现了一个有用的页面[MSDN Info](http://social.msdn.microsoft.com/Forums/en-US/5b11d09d-2eb3-4767-8adc-a0b7398215d9/fatal-error-lnk1112-module-machine-type-x86-conflicts-with-target-machine-type-x64)。*“这是一个已知问题，有时 VC 会从安装的旧版本 VC 中获取某些设置并导致此类问题。”*

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2019-01-10T11:20:18.427

对我来说，它通过添加以下内容起作用：

**C:\Program Files (x86)\Microsoft Visual Studio\2017\Community\VC\Tools\MSVC\14.16.27023\lib\x64**

无论如何，不​​要犹豫，直接从 Visual Studio 安装目录中搜索**msvcprtd.lib**文件。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2018-08-11T06:30:07.540

我遇到了同样的问题。当我们为 X64 平台创建新项目时，它很少出现。

这是解决方案：对于 X64 平台在配置属性中-->

1.包含目录 -> $(VCInstallDir)PlatformSDK\include;$(IncludePath);

2.库目录 -> $(VCInstallDir)PlatformSDK\lib;$(LibraryPath);

# php - 为excell xml清理PHP中的数据

> ID：16216232
> 
> 赞同：0
> 
> 时间：2013-04-25T13:35:45.523
> 
> 标签：php, excel, html-escape-characters

我目前正在使用“excel xml”PHP 库（Marin Crnković，0.9 版）将数据库中的数据写入为 .xls 文件。问题是数据库包含不合法的数据，这会导致 Microsoft Excel 在打开此文件时给我错误。（因为内容有问题，文件打不开）

导致 Excel 显示错误而不是打开文件的不良数据示例：

> !(()&&!| *|* |
> 
> '"()&%1提示(918861)
> 
> '&cat /etc/passwd&'
> 
> '&目录&'
> 
> "&cat /etc/passwd&"
> 
> 电子邮件&n921923=v950402

在将数据插入 Excel 文件之前，是否有推荐的功能来清理数据？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:48:05.427

在将 & 符号用于 Excel 电子表格之前，您可能需要对其进行转义/编码（因为新格式是基于 XML 的）。使用 PHP，您也许可以尝试以下操作：

```
$value = str_replace('&', '&amp;', $value); 
```

# javascript - 允许空值的 Javascript 电子邮件验证

> ID：16216244
> 
> 赞同：1
> 
> 时间：2013-04-25T13:36:11.237
> 
> 标签：javascript, regex, validation, email, null

我有这个提交功能，可以检查电子邮件字段是否具有格式正确的地址。工作正常。但是，我希望该字段允许空值，因为此特定输入是可选的，不是必需的。我知道这应该很简单，我错过了明显的。有人指出我正确的方向......

编辑：这次提供整个表单验证。每次我只是替换电子邮件部分时，它都会破坏其他部分......

```
function validateSMSForm()
{
if (SMSForm.PID_Form.value.length < 4)
{
alert("Please enter a valid Partner ID");
return false;
}
if (SMSForm.area.value.length < 3)
{
alert("Please enter a valid 10-digit cell phone number");
return false;
}
if (SMSForm.prefix.value.length < 3)
{
alert("Please enter a valid 10-digit cell phone number");
return false;
}
if (SMSForm.line.value.length < 4)
{
alert("Please enter a valid 10-digit cell phone number");
return false;
}

<!-- EMAIL VALIDATION HERE
  if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(form.emailaddress.value))  
    {  
    return (true)  
    }  
    alert("Please enter a valid email address")  
    return (false) 

-->
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:41:25.677

首先添加对空/空字符串的检查：

```
if ((!form.emailaddress.value) || (/^\w+([.-]?\w+)@\w+([.-]?\w+)(.\w{2,3})+$/.test(form.emailaddress.value))) {
    //handle valid e-mail
} else {
    //handle invalid e-mail
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:42:36.563

像这样

假设

`<form onsubmit="return validateSMSForm(this)">`

JavaScript：

```
function isEmail(str) {
  return !str || /^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,})+$/.test(str);
}

function validateSMSForm(SMSForm) {
  if (SMSForm.PID_Form.value.length < 4) {
    alert("Please enter a valid Partner ID");
    return false;
  }

  if (SMSForm.area.value.length < 3 ||
      SMSForm.prefix.value.length < 3 || 
      SMSForm.line.value.length < 4) {
    alert("Please enter a valid 10-digit cell phone number");
    return false;
  } 

  if (!isEmail(SMSForm.emailaddress.value)) {
    alert("Please enter a valid email address")  
    return false; // 
  }

  return true; // allow submission
} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:38:07.217

```
var email = form.emailaddress.value;
if (!email){ return true } // this what your looking for?
if (/^\w+([.-]?\w+)@\w+([.-]?\w+)(.\w{2,3})+$/.test(email))
{
    return (true)
}
alert("Please enter a valid email address")
return (false) 
```

# php - MPDF - 大表

> ID：16216247
> 
> 赞同：1
> 
> 时间：2013-04-25T13:36:19.850
> 
> 标签：php, pdf-generation, mpdf

我正在使用 mPDF 生成表，该表大于 1 页（大约 4-8 页）并且有问题，一些行在它们自己的页面上分开。如何将他们加入一张大桌子？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-20T15:37:17.670

我有同样的问题`colspan`。

我只有 2 列，但标题是`colspan = 3`.

当我把它放到`colspan = 2`，问题解决了。

# java - 将 Java 数字转换为 BigDecimal：最好的方法

> ID：16216248
> 
> 赞同：56
> 
> 时间：2013-04-25T13:36:20.183
> 
> 标签：java, numbers, precision, bigdecimal

我正在寻找将数字转换为 BigDecimal 的最佳方法。

这够好吗？

```
Number number;
BigDecimal big = new BigDecimal(number.toString()); 
```

`toString()`我们可以用这种方法失去精度吗？

* * *

## 回答 #1

> 赞同：37
> 
> 时间：2013-04-25T13:39:22.763

这很好，请记住，使用 BigDecimal 的构造函数来声明一个不是 String 类型的值可能会很危险。考虑以下...

```
BigDecimal valDouble = new BigDecimal(0.35);
System.out.println(valDouble); 
```

这不会打印 0.35，它实际上是......

```
0.34999999999999997779553950749686919152736663818359375 
```

我会说你的解决方案可能是最安全的。

* * *

## 回答 #2

> 赞同：21
> 
> 时间：2013-04-25T13:54:35.110

我们可以使用 toString() 方法失去精度吗？

Kind of ... 两者`Float.toString()`且`Double.toString()`仅输出小数分隔符后的位数，这是输出唯一对应于浮点或双精度值所必需的。

要在 david99world 的答案中使用 0.35 示例，请考虑以下代码：

```
BigDecimal bd1 = new BigDecimal(0.35);

Number n = 0.35;
BigDecimal bd2 = new BigDecimal(n.toString());

System.out.println(bd1);
System.out.println(bd2); 
```

一个直观的预期可能是两个 BigDecimal 实例是相同的，但输出显示它们不是：

```
0.34999999999999997779553950749686919152736663818359375
0.35 
```

第一行是双精度的准确值，因为 0.35 不能准确表示。第二行是 0.35，因为不再需要小数位来表示不同的值。例如，该语句`0.34999999999999997779553950749686919152736663818359375 == 0.35`将评估为`true`。

在创建 BigDecimal 时，这实际上并不是精度损失，您的“源”值中已经存在不确定性。问题在于，可能使用例如浮点数或双精度值作为源的离散值不一定会由 BigDecimal 实例中的精确等价物表示。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2019-07-24T08:04:16.353

最好的方法是

```
BigDecimal.valueOf(myDouble); 
```

它在内部是相同的，但它是一个重载函数，也适用于`long`s 并且针对常用`long`的 s 值进行了优化。所以它更标准、更简单、更容易记住。

[资源](https://docs.oracle.com/javase/7/docs/api/java/math/BigDecimal.html#valueOf(double))

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2021-10-20T07:53:26.320

我认为这是将 Number 转换为 BigDecimal 的最佳方法：

```
public static BigDecimal convertToBigDecimal(Number number) {
        if (number instanceof Integer
                || number instanceof Long
                || number instanceof Short
                || number instanceof Byte) {
            return BigDecimal.valueOf(number.longValue());
        }
        return BigDecimal.valueOf(number.doubleValue());
    } 
```

# uml - Visio 2013 上缺少 UML 图表形状

> ID：16216250
> 
> 赞同：65
> 
> 时间：2013-04-25T13:36:29.620
> 
> 标签：uml, visio, office-2013

我已经安装了 Visio 2013 Standard，并且正在尝试创建 UML 图。

我选择了“UML 类”模板，但是当它打开时，“形状”面板是空的。按照建议，我转到“更多形状”菜单，但找不到与 UML 相关的任何内容。

有没有人遇到过这个问题并得到了解决方案？

谢谢

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-09-09T09:27:54.567

软件和数据库通常不在 Visio 的标准版中，只有专业版。

尝试在这里寻找一些可以在标准版中使用的模板

*   [Microsoft Visio 的 UML 2.0 图表和形状下载，](http://www.hanselman.com/blog/UML20DiagramsAndShapeDownloadsForMicrosoftVisio.aspx)实际上指向[www.softwarestencils.com](http://www.softwarestencils.com/uml/index.html)

* * *

## 回答 #2

> 赞同：24
> 
> 时间：2017-08-01T09:19:35.277

我在使用 Visio 2016 时遇到了同样的问题。我有标准许可证。我认为您可以在搜索“UML 序列”模板时选择它，但它会打开一个没有形状的空白画布，这很奇怪。所以你什么都看不到，也不能在侧面的“更多形状”窗口下选择形状。

所以我在Visio的安装目录中搜索了形状。我在目录中找到`C:\Program Files\Microsoft Office\Office16\Visio Content\1033`了几个序列图模板（即：BASIC_UMLSEQUENCE_M.VSTX）。他们正在使用模板`USEQME_M.vssx`。我通过右键单击左侧窗口中的形状并选择“另存为”发现了这一点。我将它们保存在“我的形状”下的“我的文档”中，就像自定义形状一样。我可以在我想要的任何新文档中使用它们。

注意or的模板或模具名称中的大写`M`或。我来自荷兰，所以我正在使用该版本。`U``US Units``Metric Units``M`

一种不太友好的获取形状的方法。但它有效。

* * *

## 回答 #3

> 赞同：16
> 
> 时间：2014-09-03T20:32:50.443

微软正在从使用 Visio 的软件和数据库图表转移，转而使用 Visual Studio。请参阅“建模”项目。组件图、序列图、用例、层图都是建模项目的一部分。虽然我正在试验它（但质疑它的可行性），但您可以从代码生成意义上创建的模型生成代码。

另请参阅这篇文章[Pet Shop 模型](http://blogs.msdn.com/b/jennifer/archive/2010/05/13/visual-studio-2010-how-to-maintain-control-of-your-code-using-layer-diagrams-custom-msbuild-tasks-and-work-item-integration.aspx "PetShop 模型")以及 MSDN 文档：[Modeling the Architectural](http://msdn.microsoft.com/en-us/library/dd490886.aspx)

这是我在 vs2013 Ultimate 中可用的内容 ![宠物店项目](https://i.stack.imgur.com/ifOIj.png)

* * *

## 回答 #4

> 赞同：9
> 
> 时间：2013-04-29T22:42:51.977

Microsoft Visio 2013 Standard Edition does not provide UML shapes, you have to upgrade to Microsoft Visio 2013 Professional.

[Visio 2013 Professional](http://office.microsoft.com/en-us/visio/visio-professional-2013-business-and-diagram-software-FX103791824.aspx)

* * *

## 回答 #5

> 赞同：7
> 
> 时间：2013-04-25T14:01:53.943

CTRL+N-- 打开一个新文档。

Right Edge 找到“更多形状”，然后找到“软件和数据库”，最后找到“软件”。所有 UML 图表都可以在这里找到。

* * *

## 回答 #6

> 赞同：5
> 
> 时间：2014-12-17T07:55:24.647

请查看此知识库文章： http: **[//support.microsoft.com/kb/2259709](http://support.microsoft.com/kb/2259709)** 出现此问题是因为 Visio 2013 使用了 Visio 2010 或早期版本的 Visio 未使用的新 UML 和数据库建模模板。它适用于两者：

“Microsoft Visio Professional 2013”​​和“Microsoft Visio Standard 2013”

因此升级到 Pro 可能也无济于事。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2015-11-23T19:41:39.240

如果您没有找到 Stencils，您可以在您的安装位置找到它们。C:\Program Files\Microsoft Office\Office15\Visio Content\1033 for UML Sequcen Stencies 你可以打开

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2015-11-23T14:15:46.757

如果您没有看到使用模板创建新文档的模板，您可以直接打开模板。在我的情况下，它们位于“C:\Program Files\Microsoft Office\Office15\Visio Content\1049\”最后一个文件夹名称因语言环境而异，我猜。UML 模板名为“DBUML_M.VSTX”

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2013-04-29T22:50:27.503

我认为因为它是标准版的版本。

我不知道你是否在VS中编写代码。但是，如果您这样做了，只需转到 ARCHITECTURE - new Diagram。& 选择你的，& VS 会负责剩下的:)

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2015-09-09T00:03:33.250

如果您正在寻找 UML 序列图，请尝试在搜索框中搜索 UML 序列并添加它们。

*   在搜索框中搜索 UML 序列 -> 选择所有形状并添加到我的形状（用户定义的名称）。

您可以浏览我的形状来访问它们。但是，一旦您搜索，它们将在侧边栏中可用。

# rest - REST API 和客户端在同一台服务器上，需要 API 身份验证吗？

> ID：16216251
> 
> 赞同：3
> 
> 时间：2013-04-25T13:36:29.843
> 
> 标签：rest, symfony, angularjs, fosuserbundle, fosrestbundle

**首先，让我描述一下这个应用程序：**我们正在开发一个基于 Web 的软件，它是某种定制的帮助台应用程序。它需要用户登录（我们使用**FOSUserBundle**）。登录后，用户被重定向到仪表板。从仪表板不再需要重新加载页面，前端是基于 Angularjs 构建的，用户可以在应用程序中的任何地方访问，而无需重新加载页面。您可以说是单页应用程序。

因此，呈现给用户的数据是从 rest api 获取的（我们使用**FOSRestBundle**）。这在这一点上工作得很好。

有某种困境。只有我们的员工才能访问此应用程序（目前）。因此，工作人员需要登录才能访问帮助台。通过angularjs推送到前端的数据是通过api调用的，所以刚刚登录的用户每次请求都需要重新认证，因为休息。

**问题：**由于后端运行在 symfony2 上，让我们在进行 api 调用时尝试获取当前登录用户的用户对象：

```
$this->get('security.context')->getToken()->getUser() 
```

**匿名**返回。代表匿名，或

```
$this->getUser(); 
```

只返回**null**。

因此，使用 rest api 时，经过身份验证的上下文似乎消失了。但是，当我直接调用一个动作而不休息时，我可以获得用户信息。

所以我们需要的是保护我们的 rest api 并在每次 api 调用时获取用户信息。我们不希望第三方人员访问我们的应用程序，只有员工。我不熟悉 OAuth，但用户将被重定向到第三方页面以允许/拒绝访问他的数据？这对我们来说不是一个选择。

根据该信息，您对如何保护 api 和传输用户数据以使 getUser 不返回 null 或 anon 有任何建议或想法。但实际登录的用户？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-26T14:13:27.823

还有另一种方法可以解决您的问题。

这是通过使用**Certificates**。您可以生成证书然后使用 Http 隧道（**https**明显利），服务器将要求提供证书（您必须为此配置 Apache，但这不是一个大挑战）。

有了这个，您必须`CertificateManager`在服务器端添加一个以确保证书有效并知道谁在调用服务（以便能够在每次请求时对用户进行身份验证），`CertificateManager`（或者您将调用它）可能必须在您的过滤器链中进行配置（如 Java 世界中已知的那样），等等

跳，帮助你，Abderrazak

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T22:32:13.697

REST 是无状态的，因此您必须在每个请求中发送某种身份验证/授权。您可以使用 HTTP BASIC AUTH 或 OAuth 之类的东西。

看看[https://github.com/FriendsOfSymfony/FOSOAuthServerBundle](https://github.com/FriendsOfSymfony/FOSOAuthServerBundle)

我正在以完全相同的架构构建我们的应用程序（带有 Symfony2 后端和 AngularJS 前端的 RESTful API。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-04-09T13:56:21.417

另一种方法是复制 api 路由，这样你就有了 OAUTH 保护的 api 路由和 session 保护的 api 路由，它们都指向同一个控制器。该方法在这里解释：[https ://stackoverflow.com/a/22964736/435026](https://stackoverflow.com/a/22964736/435026)

# php - preg_match() 在检查很长的字符串时静默失败

> ID：16216253
> 
> 赞同：1
> 
> 时间：2013-04-25T13:36:31.740
> 
> 标签：php, zend-framework, preg-match

我在我的一个项目中使用 Zend Framework，并且文件 Zend/Uri/Http.php 有一个函数 validateQuery，它使用 preg_match 验证给定的查询。

它工作正常，但我有一个很长的 paypal url 查询字符串，大约 1 500 个字符，并且该`preg_match`函数在此查询中静默失败。

我正在使用 PHP 版本。5.4.7 因此我没有 pcre.backtrack_limit=100000 的限制。

现在我已经修改了 Zendframework 中的文件，不验证任何超过 1000 个字符的查询，但这显然不是正确的解决方案。

根据其中一条评论，我尝试在独立页面中使用另一个非常长的查询与 preg_match 并且我有同样的错误，我将我的测试数据粘贴在下面以供参考。

```
$query = 'search?q=very+long+query+string+example&aq=f&oq=very+long+query+string+example&aqs=chrome.0.57j62l3.5553j0&sourceid=chrome&ie=UTF-8&search?q=very+long+query+string+example&aq=f&oq=very+long+query+string+example&aqs=chrome.0.57j62l3.5553j0&sourceid=chrome&ie=UTF-8&search?q=very+long+query+string+example&aq=f&oq=very+long+query+string+example&aqs=chrome.0.57j62l3.5553j0&sourceid=chrome&ie=UTF-8&search?q=very+long+query+string+example&aq=f&oq=very+long+query+string+example&aqs=chrome.0.57j62l3.5553j0&sourceid=chrome&ie=UTF-8&search?q=very+long+query+string+example&aq=f&oq=very+long+query+string+example&aqs=chrome.0.57j62l3.5553j0&sourceid=chrome&ie=UTF-8&search?q=very+long+query+string+example&aq=f&oq=very+long+query+string+example&aqs=chrome.0.57j62l3.5553j0&sourceid=chrome&ie=UTF-8&search?q=very+long+query+string+example&aq=f&oq=very+long+query+string+example&aqs=chrome.0.57j62l3.5553j0&sourceid=chrome&ie=UTF-8&search?q=very+long+query+string+example&aq=f&oq=very+long+query+string+example&aqs=chrome.0.57j62l3.5553j0&sourceid=chrome&ie=UTF-8';

$pattern = "/^(?:%[[:xdigit:]]{2}|[A-Za-z0-9-_.!~*'()\[\];\/?:@&=+$,])*$/";

echo preg_match( $pattern, $query ); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:42:47.077

> 现在我已经修改了 Zendframework 中的文件，不验证任何超过 1000 个字符的查询，但这显然不是正确的解决方案。

好吧，这对我来说听起来并*不太*错。1000 个字符听起来像是一个合理的限制，允许 URL 输入并拒绝大于该值的所有内容。大型 URL 似乎也利用了验证器，因此我真的会过滤掉它们，直到软件供应商在他们的库中修复了这个缺陷。

在您发现潜在错误或缺陷的情况下，请检查供应商以获取您的支持选项。由于这与验证有关并且具有安全隐患，我很确定供应商会很乐意了解这个问题。

# regex - Match two whole words in Regex

> ID：16216257
> 
> 赞同：0
> 
> 时间：2013-04-25T13:36:36.830
> 
> 标签：regex, visual-studio-2010

I am struggling to find a solution for matching two successive whole words using Regular Expression. I have a text box where the user can type in their search criteria, enclosed by quotations for exact matches. The quotes and space (if any) are then replaced by RegEx expressions. Here is an example:

User enters: "Apple Orange"

Converted to:

```
\bApple\W+(?:\w+\W+){1,6}?Orange\b 
```

Then, my RegEx match would be based on this converted criteria. The instructions are from www.regular-expressions.info/near.html

Maybe I am going about this entirely the wrong way? I am using visual studio. Any help is appreciated.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:46:41.207

如果您在用户使用引号时想要完全匹配，那么您应该删除引号并进行直接字符串比较（相等，不包含）

**更新：**

根据下面的评论，您只需执行与单个单词匹配相同的操作：

一个字：

`\bApple\b`

双字

`\bApple Orange\b`

这个想法是用户输入搜索词并且您完全匹配，因此您不会为该词本身进行模式匹配，只是它的边界（`\b`围绕它）。没有理由触及搜索词本身（Apple 和 Orange 之间的所有你试图做的东西），因为即使两者之间的空间也是他们搜索的一部分......除非你想要让它有点灵活..例如，如果用户输入`"Apple[lots of space here]Orange"`只是将其视为一个空格，那么您可以这样做

`\bApple\s+Orange\b`

..但是你有点偏离了整个“完全匹配”的主题......

旁注：您在评论中说，对于“CrabApple OrangeCrush”，您不希望“Apple Orange”匹配。这就是你使用`\b`边界这个词的原因。但如果是我，IMO 会允许它匹配。或者至少，提供某种选项以这种方式搜索它。

# android - Multiple Android projects with same GIT submodule

> ID：16216261
> 
> 赞同：5
> 
> 时间：2013-04-25T13:36:47.240
> 
> 标签：android, eclipse, git, git-submodules

I recently wanted to adopt `submodules` from `GIT` with my `Android` projects but stumbled into some problems.

**Backstory**

I have multiple projects but many use the same external library (Android library-project), in order to make the GIT cleaner and make the GIT for each project contain all the needed material I though of using GIT sub-modules for the Android library project. This part works fine I got the library included as a sub-module for the projects.

**Issue**

But Android uses these library-projects which basically is a regular project which is added to the project and I can only add the same project once in Eclipse. So if I need to work on more than one project at a time I have to use multiple instances of Eclipse/workspace instead of using Eclipse the regular way.

Is there a way to have only 1 instance of my library project in eclipse and at the same time have all the projects reference to their respective libraries? Or any other suggestions how I should handle this?

Any help is very appreciated

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-03T09:49:19.950

由于以下原因，您**不能**将库项目作为 Eclipse 中的单个实例。

*   使用该库的每个项目都可能引用该库的不同版本。由于您的子模块是特定版本的物理检出（工作目录），因此无法在某个时间点表示存储库的**多个状态。**

解决方法：

1.  为库项目准备一个“服务器”位置。使用`git clone --bare`.
2.  将“服务器”库项目克隆到您的工作区。
3.  为库项目添加前缀以反映使用它的主项目的名称。
4.  对您需要使用该库的每个主要项目重复第 2 步和第 3 步。
5.  每次您在库项目中进行更改时，都会创建一个功能分支。在每个主要项目中，考虑新功能是否有用或阻碍。如果它不适合您显然需要重写您刚刚创建的功能。完成后更新库的版本（不要害羞使用带有[Semantic Versioning](http://semver.org/)的标签）。

# java - What is this design (or anti-) pattern and more importantly is there a better way?

> ID：16216262
> 
> 赞同：2
> 
> 时间：2013-04-25T13:36:47.503
> 
> 标签：java, design-patterns

I'm receiving from a webservice a list of key-value pairs, and have inherited the following code:

```
public String iconValue = null;
... (over 50 class variables assigned in MyObject constructor below)

public MyObject(List<Attribute> attrs) {

    String attrName, attrValue;

    for (Attribute a : attrs) {
        try
        {
            attrName = a.getName();
            attrValue = a.getValue();

            if (attrValue == null || "".equals(attrValue.trim()))
                continue;

            if (ICONS.equals(attrName)) {
                //Do something including assignment
                this.iconValue = attrValue;
            }
            else if (URL.equals(attrName)) 
            {
                //Do something including assignment
            }
            else if (...)  A giant list of over 50 different attributes hardcoded
            {
                //Do something including assignment
            }

            ... 
```

So,except for keeping a hashmap - is there a better way than the above to keep hard coded variables within the class and use this "when-if" pattern.

Also,does this pattern have a name?

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:41:11.040

我能想到的一种方法是使用`ENUM`s 并将作品动态地分派给每个`ENUM`对象，而不是做一个巨大的 if else，尤其是。因为`ENUM`s 可以通过他们的名字来查找。

这就像一个[策略模式](http://en.wikipedia.org/wiki/Strategy_pattern)。

例如：

1.  为每个实例实现`ENUM`一个方法`doJob()`；
2.  使用[`valueOf()`](http://docs.oracle.com/javase/6/docs/api/java/lang/Enum.html#valueOf%28java.lang.Class,%20java.lang.String%29)方法调度作品。

代码示例：

```
public enum Strategies {
    URL {
        @Override
        public void doJob(MyObject mo) {
                // do the work
        }
    },
    ICONS {
        @Override
        public void doJob(MyObject mo) {
                // another work
        }
    };
    public abstract void doJob(MyObject mo);
} 
```

而且在使用的时候，

```
try {
    Strategies.valueOf(attrName).doJob();
} catch (IllegalArgumentException e) {
    // ENUM does not exist, illegal parameter
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:42:59.500

如果你想对每个可能的属性值采取不同的行动，恐怕你最终会得到一些关于那个冗长的东西。虽然有一些改进：

如果您使用的是 Java7 或更高版本，您现在可以使用`switch`带有字符串的语句（[链接](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/switch.html)）

如果不是，您可以创建一个具有静态方法的 Enum，该方法返回您可以打开的 Enum 元素。这并没有提高性能，但它可能有助于提高代码的可读性。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:43:26.190

> 这种模式有名字吗？

没有。

在 Java 7 中，您可以将其表示为：

```
 switch (attrName) {
  case ICONS:
      //Do something including assignment
      break;
  case URL: 
      //Do something including assignment
      break;
  // and so on
  } 
```

... 前提是 ICONS、URL 和其他字符串是编译时常量。

那更简洁，更健壮。它也（可能）更有效，因为切换很可能使用散列来实现。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T13:54:04.627

我不认为它有名字，但你可以称之为“错误地使用多态性”（如果类型安全是一个问题）。这取决于您是否有明确定义的数据合同。您收到的数据是正确的对象，还是只是“随机”数据？

如果它是一个合适的对象，我会创建一个具体的表示并使用像 Dozer 之类的东西（或者如果你不想被机智依赖束缚，使用反射滚动你自己的映射器）在它们之间进行转换。

如果它或多或少是随机数据，我只会使用 Map 或类似的数据结构。

# android - Using actionbar before API Level 11

> ID：16216263
> 
> 赞同：-7
> 
> 时间：2013-04-25T13:36:49.170
> 
> 标签：android, android-actionbar

I'm currently trying to create an `ActionBar` for my Android application. But I need it to work in Android 2.2 and 2.3 too. Is there any way to implement `ActionBar` in Android 2.3/2.2?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:38:55.700

看看[ActionBarSherlock](http://actionbarsherlock.com/)。只需将库添加到您的 Android 项目并用 覆盖`Activity`，`SherlockActivity`这样您就拥有了 Actionbar 的所有可能性。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:37:49.970

您可以将操作栏与[ActionBarSherlock](http://actionbarsherlock.com/)一起使用。它安装简单，可以完成您需要的一切。首先，您可以[从这里](http://actionbarsherlock.com/usage.html)开始阅读。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:37:56.783

[ActionbarSherlock](http://actionbarsherlock.com/)是一个库，它使 ActionBar 的几乎所有功能都可以在 Android 2.1 及更高版本上使用。当您使用原生支持操作栏的 API 级别时，它将自动使用原生操作栏。

# collections - Groovy subcollection

> ID：16216267
> 
> 赞同：0
> 
> 时间：2013-04-25T13:36:58.327
> 
> 标签：collections, groovy

What is the Groovy way to get collection items without items in subcollection. For example:

collection: [1,2,3,4,5,6]

subcollection: [1,5,6]

the result should be: [2,3,4]

EDIT: It looks I'm doing something wrong. This is part of my code:

```
 def report = Report.get(params.report.id)
    def user = User.get(params.user.id)
    List<User> availableUsers = []
    availableUsers = User.findAllByCompany(company))

    List<User> addedUsers = []
    addedUsers = (List<User>) session["addedUsers"] ?: []
    addedUsers << user
    session["addedUsers"] = null
    session["addedUsers"] = addedUsers

    availableUsers = availableUsers - addedUsers 
```

This code is only removing last user in addedUsers list.

**availableUsers: [John, Jack, Jim]**

**addedUsers: [John, Jack]**

**availableUsers - addedUsers: [John, Jim]**

Every time only the last item in addedUsers gets removed. I'm guessing I'm missing something obvious but I cant find it.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:40:54.283

您是否尝试过明显的：

```
result = [ 1, 2, 3, 4, 5, 6 ] - [ 1, 5, 6 ] 
```

因为那是有效的...

### 编辑

在会话中存储域对象将导致对象在休眠事务之间有所不同，最好将 id 存储在会话中并让用户每次都保持新鲜（或者如果需要持久化，则将此功能写入域中），例如：

```
addedUsers = session["addedUsers"].collect { User.get( it.id ) } ?: [] 
```

# javascript - 带有 z-index 和 jquery 的显示内联块

> ID：16216268
> 
> 赞同：0
> 
> 时间：2013-04-25T13:37:03.497
> 
> 标签：javascript, html, css

大家，早安，

我好像有点小问题。我想要一个 div 覆盖另一个 div（即在顶部），但 zIndex 不起作用。我怀疑原因是 display: inline-block 但我需要保留它以便网页正确显示。如何使 div 覆盖另一个？

这是解释问题的jsfiddle：

[http://jsfiddle.net/Yf7zD/](http://jsfiddle.net/Yf7zD/)

或者这里的代码：

```
<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title>Untitled Document</title>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.5.0/jquery.min.js"></script>
<script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.9/jquery-ui.min.js"></script>
<script type="text/javascript" src="javascript/cookies.js"></script>
<style>
#gameTable {
    font-size: 0;
    width: 840px;
    height: 240px;
    margin-top: 20px;
    margin-left: 78px;
    position: relative;
}
.iamdroppable {
    display: inline-block;
    margin: 0;
    padding: 0;
    border: 3px solid #FFF;
}

</style>
</head>

<body style="background-color: black;">
<div id="container" style="position:relative; border: solid 3px red;">
<div id="gameTable"><p>GameTable</p>
</div>
</div>
</body>
<script>
$(document).ready(function(e) {
var myId;
    for(vertical = 0; vertical < 3; vertical++) {
    for(horizontal = 1; horizontal <= 12; horizontal++) { //Outer Numbers
            if(vertical == 0)
            myId = horizontal * 3;
            else if(vertical == 1)
            myId = horizontal * 3 - 1;
            else
            myId = horizontal * 3 - 2;
            $('<div>', {//Normal numbers
                class: 'iamdroppable',
                id: '' + myId,
                width: '62px',
                height: '78px',
            }).appendTo('#gameTable');
    }
    }
    $('<div>', {//Quads
                class: 'iamdroppable',
                id: '1000',
                top: '-100px',
                width: '100px',
                height: '200px',
                zIndex: '1000',
                position: 'absolute',
            }).appendTo('#container');
            });
</script>
</html> 
```

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:43:24.363

```
var div = $('<div>', {//Quads
            class: 'iamdroppable',
            id: '1000',
            top: '-100px',
            width: '100px',
            height: '200px',
            zIndex: '1000',
            position: 'absolute',
        }).appendTo('#container');
        });
$('body').append(div); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:43:41.790

您将 CSS 样式添加为属性，它们都应该在 style 属性中：

```
$(document).ready(function (e) {
         var myId;
         for (vertical = 0; vertical < 3; vertical++) {
             for (horizontal = 1; horizontal <= 12; horizontal++) { //Outer Numbers
                 if (vertical === 0) myId = horizontal * 3;
                 else if (vertical == 1) myId = horizontal * 3 - 1;
                 else myId = horizontal * 3 - 2;
                 $('<div>', { //Normal numbers
                     class: 'iamdroppable',
                     id: '' + myId,
                     style: 'width:62px;height:78px;'
                 }).appendTo('#gameTable');
             }
         }
         $('<div>', { //Quads
             class: 'iamdroppable',
             id: '1000',
             style: 'top:-100px;width:100px;height:200px;z-index:1000;position:absolute;'
         }).appendTo('#container');
     }); 
```

另一方面，你在哪里做这个比较：`if (vertical == 0)`你应该像这样使用三个 === ：`if (vertical === 0)`

# django-rest-framework - How to lock out IP addresses after too many authentication failures?

> ID：16216273
> 
> 赞同：5
> 
> 时间：2013-04-25T13:37:24.623
> 
> 标签：django-rest-framework

Is there a stock way to lock out IP addresses after too many authentication failures? I don't see how the built-in throttling would accomplish this, because throttling only kicks in after authentication and permissions succeed.

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T17:29:27.517

谢谢汤姆。我使用以下代码对身份验证进行了子类化：

```
def authenticate(self, request):

    #
    # first check to see that IP address is not locked out
    # due to too many failed authentication requests.
    #
    auth_failure_key = 'LOGIN_FAILURES_AT_%s' % request.META.get('REMOTE_ADDR')

    auth_failures = cache.get(auth_failure_key) or 0

    # allow up to 3 failures per hour
    if auth_failures >= 3:
        raise exceptions.AuthenticationFailed('Locked out: too many authentication failures')

    try:
        return super(TokenAuthentication, self).authenticate(request)
    except exceptions.AuthenticationFailed as e:

        # update cache
        cache.set(auth_failure_key, auth_failures + 1, 3600)

        raise e 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2013-04-25T14:15:56.613

不是开箱即用，不。您需要继承其中一个身份验证类并在自定义身份验证类中自己实现该行为。

# php - How to show Factories for when specific User has logged in

> ID：16216277
> 
> 赞同：0
> 
> 时间：2013-04-25T13:37:30.007
> 
> 标签：php, mysql, codeigniter, join, tankauth

How do I add an factory to any of my logged in users? I'm using Tank_auth and I made an account 'admin' I also made a table called 'factoryusers'.

I want to add a factory to a specific user using joins.

My table structure:

```
users
-----
id
username
email
...
...

factories
---------
idfactories
factoryname
adress
...
...

factoryusers
------------
idfactoryusers
idusers
idfactories 
```

I tried to join these tables and show the records from the factoryusers table.

My controller function:

```
$data['userbedrijf'] = $this->bedrijven_model->bedrijvenusers();
(translation to english: $data['userfactory'] = $this->factory_model->factoryusers();) 
```

My model:

```
function bedrijvenusers()
{
    $this->db->join('bedrijven', 'bedrijfusers.idbedrijven = bedrijven.idbedrijven');
    $this->db->join('users', 'bedrijfusers.idusers = users.id');
    $result = $this->db->get('bedrijfusers', 1);
    return $result->result();
} 
```

My views:

```
 <h4>Gebruikergegevens:</h4>
        <p class="field"><label class="field">Gebruikersnaam:</label> <?= $this->tank_auth->get_username(); ?></p>
        <p class="field"><label class="field">Emailadres:</label> <?= $user_data->email; ?></p>
        <p class="field"><label class="field">Laatste Login:</label> <?= date ("d-M-Y H:i:s",strtotime($user_data->last_login)); ?></p>
        <p class="field"><label class="field">Account aangemaakt:</label> <?= date ("d-M-Y H:m:s",strtotime($user_data->created)); ?></p>
        <p class="field"><label class="field">Laatst aangepast:</label> <?= date ("d-M-Y H:i:s",strtotime($user_data->modified)); ?></p>
        <p class="field"><label class="field">is admin:</label> <?= $user_data->is_admin; ?></p>
    <hr>
    <h4>Bedrijfsgegevens:</h4>
    <? foreach($userbedrijf as $row){ ?>
        <p class="field"><label class="field">Bedrijf_id:</label> <?= $row->idbedrijven; ?></p>
        <p class="field"><label class="field">Bedrijfsnaam:</label> <?= $row->Bedrijfsnaam; ?></p>
        <p class="field"><label class="field">Adres:</label> <?= $row->Adres; ?></p>
        <p class="field"><label class="field">Postcode:</label> <?= $row->Postcode; ?></p>
        <p class="field"><label class="field">Plaats:</label> <?= $row->Plaats; ?></p>
        <p class="field"><label class="field">Telefoonnummer:</label> <?= $row->Telefoonnummer; ?></p>
        <p class="field"><label class="field">Website:</label> <?= $row->Website; ?></p>
        <p class="field"><label class="field">Email:</label> <?= $row->Email; ?></p>
        <p class="field"><label class="field">Profiel:</label> <?= $row->Profiel; ?></p>
    <?}?> 
```

What's wrong with my joins? it shows me factories. but for each user the factory is the same. even when i have multiple factoryuser rows in my database with different user id's and factory id's

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:53:16.567

The question is not quite clear, but this should get you the factories for the specified user, try it. I kept your original Dutch/English names.

```
function bedrijvenuser($user_id)
{
    $this->db->join('bedrijven', 'bedrijfusers.idbedrijven = bedrijven.idbedrijven', 'left');
    $this->db->join('users', 'bedrijfusers.idusers = users.id');
    return $this->db->get_where('bedrijfusers', array('idusers' => $user_id))->result();
} 
```

# ruby-on-rails - 下载和解压缩 Heroku 和 S3 文件的流程？

> ID：16216279
> 
> 赞同：1
> 
> 时间：2013-04-25T13:37:35.483
> 
> 标签：ruby-on-rails, heroku, amazon-s3, zip

我正在使用 Apple 的 iTunes EPF 数据文件。我每天需要下载、解压缩然后处理 .tbz 文件中的 1-3GB 数据。

我有一个 Rails 应用程序，托管在 Heroku 上，大部分资产存储都在 S3 上处理。

但我遇到的问题是从 Apple 获取 EPF 文件的流程。

我将下载 3 个文件。每个都是 .tbz 文件，大小从 1GB 到大约 20MB 不等。

Heroku 没有办法可靠地存储文件，所以我假设我需要将文件直接下载到 S3？那我会以某种方式在那里解压缩它们吗？

这就是我遇到障碍的地方。我知道如何实际从 Apple 获取文件并传输到 S3，但解压缩它们是我不关注的地方。

由于数据文件可能非常大，因此最大限度地减少通过 S3 的传输对于降低成本至关重要。

是否有服务可以让我将 Apple 文件下载到他们的服务器，解压缩，然后将必要的文件上传到 S3？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:35:36.407

Heroku 的[文件系统是短暂](https://devcenter.heroku.com/articles/dynos#ephemeral-filesystem)的，但您仍然可以写出`/tmp`作为临时暂存空间来下载、解压缩、执行您需要的任何处理、重新打包（如果需要），然后上传到 S3。由于[自动测功机重新启动](https://devcenter.heroku.com/articles/dynos#automatic-dyno-restarts)（或手动重新启动），只需确保您的服务知道如何在中断时优雅地恢复。

# gnuplot - 用 gnuplot 置换 z 轴

> ID：16216287
> 
> 赞同：0
> 
> 时间：2013-04-25T13:37:56.577
> 
> 标签：gnuplot

是否可以用gnuplot将z轴移到x轴的中间？我在[这里](http://matheplanet.com/default3.html?call=viewtopic.php?topic=165642&ref=http://www.google.de/url?sa=t&rct=j&q=3d%2520kurve%2520gnuplot&source=web&cd=2&ved=0CDsQFjAB)找到了一个很棒的 gnuplot 脚本，它几乎完美地满足了我的需求，除了 z 轴应该在 x 轴的中间上升。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:16:09.287

默认情况下，gnuplot 会绘制一个边框并将标签放置在此边框上。

仅在底部绘制边框，即围绕 (x,y)-Plane ：

```
set border 1+2+3+4 
```

或完全禁用它：

设置边框 0

通过 x,y 原点绘制 zaxis，并将 ztics 放在相同的位置：

```
set zzeroaxis lt -1
set ztics axis 
```

如果你愿意，x 和 y 也一样。

# android - Android sqlite idimage can not be null

> ID：16216292
> 
> 赞同：0
> 
> 时间：2013-04-25T13:38:05.690
> 
> 标签：android, sql, database, null

I have a problems when i want to add something in my DB. I get error 19 idimage can not be null, i do not understand why i get this error, i defined that idimage is auto increment.

Thanks for your help

```
import android.content.Context;
import android.database.sqlite.SQLiteDatabase;
import android.database.sqlite.SQLiteOpenHelper;
import android.database.sqlite.SQLiteDatabase.CursorFactory;

public class BaseSqlLite extends SQLiteOpenHelper{

private static final String CREATE_BDD =
    "CREATE  TABLE IF NOT EXISTS `t_image` (`idimage` INTEGER PRIMARY KEY AUTOINCREMET,`name` VARCHAR(20) NOT NULL ,`description` VARCHAR(45) NOT NULL ,`rank` TINYINT NOT NULL ,`date` VARCHAR(45) NOT NULL ,PRIMARY KEY (`idimage`) )";

public BaseSqlLite(Context context, String name, CursorFactory factory, int version) {
    super(context, name, factory, version);
}

@Override
public void onCreate(SQLiteDatabase db) {
    db.execSQL(CREATE_BDD);
}

@Override
public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
    db.execSQL("DROP TABLE  t_image ;");
    onCreate(db);
}
}

        ImagesBDD imagesBdd = new ImagesBDD(context);

        SimpleDateFormat timeStampFormat = new SimpleDateFormat("yyyy-MM-dd-HH.mm.ss");

        String PhotoName = "photo_" + timeStampFormat.format(new Date()) +".jpg" ;
        String descri = myInputText.getText().toString();
        int rank = 1;
        String date = timeStampFormat.format(new Date());

        Image image = new Image(PhotoName,descri,rank,date);

        // Open the BD
        imagesBdd.open();
        // insert of the image
        imagesBdd.insertImage(image); 
```

Hello, thanks for your answer i still have the problems.

There is more information.

I changed my sql request:

```
 "CREATE  TABLE IF NOT EXISTS t_image (idimage INTEGER PRIMARY KEY AUTOINCREMET,name VARCHAR(20) NOT NULL ,description VARCHAR(45) NOT NULL ,rank TINYINT NOT NULL ,date VARCHAR(45) NOT NULL )"; 
```

There is the logcat error:

```
 E/SQLiteDatabase(19708): Error inserting rank=1 date=2013-04-25-15.53.20 description=gun name=photo_2013-04-25-15.53.20.jpg
E/SQLiteDatabase(19708): android.database.sqlite.SQLiteConstraintException: t_image.idimage may not be NULL (code 19) 
```

There is the code for the insertion:

```
 // Insetion d'imahe
public long insertImage(Image image){
    //Création d'un ContentValues 
    ContentValues values = new ContentValues();
    //on lui ajoute une valeur associé à une clé (qui est le nom de la colonne dans laquelle on veut mettre la valeur)
    values.put(COL_NAME, image.getName());
    values.put(COL_DESCRIPTION, image.getDescription());
    values.put(COL_RANK, image.getRank());
    values.put(COL_DATE, image.getDate());
    //on insère l'objet dans la BDD via le ContentValues
    return bdd.insert(TABLE_ImageS, null, values);
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:45:04.337

我认为错误在您的语法中。

```
private static final String CREATE_BDD =
    " CREATE  TABLE IF NOT EXISTS `t_image` (`idimage` INTEGER PRIMARY KEY AUTOINCREMET,`name` VARCHAR(20) NOT NULL ,`description` VARCHAR(45) NOT NULL ,`rank` TINYINT NOT NULL ,`date` VARCHAR(45) NOT NULL ,PRIMARY KEY (`idimage`) )"; 
```

这应该是

```
private static final String CREATE_BDD =
    "CREATE  TABLE IF NOT EXISTS t_image (idimage INTEGER PRIMARY KEY AUTOINCREMET,name VARCHAR(20) NOT NULL ,description VARCHAR(45) NOT NULL ,rank TINYINT NOT NULL ,date VARCHAR(45) NOT NULL ,PRIMARY KEY (idimage) )"; 
```

Quets 不会用于表名和列名。

去尝试一下。

我希望这能帮到您。

# javascript - 一般：Kinetic.js 是否提供特定像素的绘画？

> ID：16216296
> 
> 赞同：0
> 
> 时间：2013-04-25T13:38:11.823
> 
> 标签：javascript, canvas, kineticjs

这是来自具有 Processing/Processing.js 背景的开发人员提出的关于 Kinetic.js 的一般性问题。

使用 Processing.js 时，我通常会在画布上设置特定像素的颜色值。

```
set(x, y, color); 
```

如您所见，非常容易。在我的情况下，对于每个 y 值，x 的任何值都可能具有稍微不同的颜色值（或根本没有）。

当我查看 Kinetic.js 时，我发现一切都是对象，而我能找到的最接近绘制像素的是 1x1 Kinetic.Rect。例如，如果每个 y 值有 1,000 个 Kinetic.Rect 对象，这似乎会很密集。

此外，我不需要每个像素本身都是一个“对象”。不过，我确实喜欢 Kinetic.js 的其他好处，例如分层和更好的过渡和动画控制。

Kinetic.js 是否提供了更直接的像素绘制和操作方法，比如 Processing.js？

谢谢你。

# c++ - c ++：通过指针访问主类的std :: vector的类出错

> ID：16216297
> 
> 赞同：0
> 
> 时间：2013-04-25T13:38:13.203
> 
> 标签：c++, pointers, openframeworks

我正在使用 VS2012 Express、Platform Toolset v100 和 openFrameworks 0.7.4 构建我的 C++ 项目。

我有一个名为的类`NameRect`，这是`.h`文件的一部分：

```
void config(int cx, int cy, int cw, int ch, std::string cname) {
    x = cx;
    y = cy;
    w = cw;
    h = ch;
    name = cname;

    dead = false;
}

void branch(int iterants, std::vector<NameRect> *nrs) {
    for (int i = 0; i < iterants; i++) {
        NameRect nnr;
        nnr.config(x + w, y - iterants * h / 2 + i * h, w, h, "cb");

        children.push_back(nnr);
        nrs->push_back(nnr);
    }
}

void render() {
    if (!dead) {
        ofSetColor(ofRandom(0, 255), ofRandom(0, 255), ofRandom(0, 255), 0);
        ofRect(x, y, w, h);
    }
} 
```

我的代码中有`testApp.cpp`：

```
//--------------------------------------------------------------
void testApp::setup(){
    ofSetWindowShape(800, 600);

    nr.config(0, 300, 50, 10, "cb");
    nrs.push_back(nr);
}

//--------------------------------------------------------------
void testApp::update(){
    if (ofRandom(0, 50) <= 1 && nrs.size() < 100) {
        for (int cnri = 0; cnri < nrs.size(); cnri++) {
            if (ofRandom(0, nrs.size() - cnri) <= 1) {
                nrs[cnri].branch(2, &nrs);
            }
        }
    }
}

//--------------------------------------------------------------
void testApp::draw(){
    for (int di = 0; di < nrs.size(); di++) {
        nrs[di].render();
    }
} 
```

当我实际构建（成功）这个项目并运行它时，它给了我这样一个错误：

![这个错误](https://i.stack.imgur.com/rolZz.png)

我看一下局部变量手表，它显示了如此大的整数值！

![手表](https://i.stack.imgur.com/NeaxU.png)

问题是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:45:47.420

branch() 正在修改作为第二个参数传入的向量数组。

这意味着当您从 testApp::update() 调用 nrs[cnri].branch(2, &nrs) 时，会修改底层数组结构。这将导致不可预测的结果，并且肯定会导致您的访问冲突。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:46:02.527

您的问题 #1 是`nrs[cnri].branch(2, &nrs);`，您可能会在执行操作时`nrs[cnri]`从内部重新分配内存`branch()``push_back()`

你的问题 #2，一旦你开始将你的标题包含到多个 cpp 文件中，你将面临的问题是你定义函数的方式。如果您在标题中定义它们，请放置“内联”，否则您将在多个位置定义相同的函数。

# ssl - iptables DROP SSL 流量 (443)

> ID：16216299
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:38:18.233
> 
> 标签：ssl, https, iptables

我正在尝试使用 iptables 阻止对具有特定参数的 SSL GET 资源的任何请求，即：[https ://domain.com/hello?param=aux](https://domain.com/hello?param=aux)

我已经使用以下命令阻止了到端口 80 的流量（我们假设 iptables 规则列表为空）：

```
iptables -I INPUT -p tcp --dport 80 -m string --string "GET /hello?param=aux" --to 70 --algo bm -j DROP 
```

认为 SSL 版本是非常简单的（至少对于像我这样的非专家来说）：

```
iptables -I INPUT -p tcp --dport 443 -m string --string "GET /hello?param=aux" --to 70 --algo bm -j DROP 
```

但是它不起作用。关于我做错了什么的任何想法？提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:23:26.073

它永远不会起作用，因为到 SSL 站点的所有流量都是加密的，包括请求方法和参数。

# c# - Different CSS-styling for different buttons

> ID：16216300
> 
> 赞同：0
> 
> 时间：2013-04-25T13:38:18.817
> 
> 标签：c#, css, asp.net-mvc

First and foremost; I know that a lot of these CSS-type questions have been closed, so, hopefully I've been able to broaden the question to fit others aswell. Here goes:

I've been handed a project and am doing my best with adding the features my boss wants me to. But when I try to style a button differently from the rest, the changes don't "take".

The css file works as I am able to style other things:

```
<link href="~/Content/Site.css" rel="stylesheet" type="text/css" /> 
```

Button:

```
<input type="submit" value="Print." class="fakeBtn" id="fakeBtn" /> 
```

CSS tries:

```
.fakeBtn
{
    font-size: 0.8em;
    border: 0px;
    background-color: transparent;
    color: #999;
    cursor: hand;
}

input#fakeBtn
{
    font-size: 0.8em;
    border: 0px;
    background-color: transparent;
    color: #999;
    cursor: hand;
} 
```

As you can see I've tried using a class to change the style and also the id approach. None of which works though. I've hardly done any mvc work and this, already existing, project is my first. Is it a logical error? What am I doing wrong?

**EDIT:**

Could any of these be overriding? These are all the css-snippets I could find with "input" in them. How does one know if something overrides something else?

```
input, textarea {
    border: 1px solid #e2e2e2;
    background: #fff;
    color: #333;
    font-size: 1.2em;
    margin: 5px 0 6px 0;
    padding: 5px;
    width: 300px;
}

    input:focus, textarea:focus {
        border: 1px solid #7ac0da;
    }

    input[type="checkbox"] {
        background: transparent;
        border: inherit;
        width: auto;
    }

    input[type="submit"],
    input[type="button"],
    button {
        background-color: #d3dce0;
        border: 1px solid #787878;
        cursor: pointer;
        font-size: 1.2em;
        font-weight: 600;
        padding: 7px;
        margin-right: 8px;
        width: auto;
    }

    td input[type="submit"],
    td input[type="button"],
    td button {
        font-size: 1em;
        padding: 4px;
        margin-right: 4px;
    }

input.input-validation-error {
    border: 1px solid #e80c4d;
}

input[type="checkbox"].input-validation-error {
    border: 0 none;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:41:23.827

CSS看起来不错。

尝试使用 Firebug 来验证应用了哪些样式以及覆盖了哪些样式。

我怀疑您还有其他一些 CSS 规则来设置按钮样式并覆盖您的 CSS。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:47:33.390

如果这是纯 html，那么您的代码看起来不错，很明显您的 css 根本没有被加载和读取，或者它在稍后的某个阶段被覆盖。

您可以尝试应用`important`（如`color: #999 ! important;`），看看是否有任何更改变得可见。如果是这样，您就知道 CSS 属性正在其他地方被覆盖。

另一方面，我看到 Asp.Net 和 MVC 缓存在这里引起了一些问题。您可能想尝试删除站点并从头开始重新发布，看看是否有任何更改。

**更新：**

我相信这可能是你的问题：

```
input, textarea {
    border: 1px solid #e2e2e2;
    background: #fff;
    color: #333;
    font-size: 1.2em;
    margin: 5px 0 6px 0;
    padding: 5px;
    width: 300px;
} 
```

这指定了 type 的样式`input`，所以如果它出现在 之后`.fakeBtn { ...}`，则将应用该样式（当然，除非您已添加`! important;`到某些语句的末尾，在这种情况下，它们只会被其他也包含的语句覆盖`! important;`）。

您最好的解决方案可能是在该部分添加特定的类：`input, textarea { ...}`. 这样，它通常不会覆盖其他输入字段。

# pdf - 更新后使用 Imagemagick 将 PDF 转换为 JPG 真的很慢

> ID：16216301
> 
> 赞同：1
> 
> 时间：2013-04-25T13:38:27.233
> 
> 标签：pdf, imagemagick, centos, jpeg, ghostscript

我有几台使用 Centos 5（64 位）和默认 yum 安装版本的 Ghostscript（v8.70）和 Imagemagick（v6.2.8）设置的服务器，它们工作得非常好，并且非常快速地将 PDF 文件转换为 JPG 预览。

我已经在我的一台服务器上删除了 IM 和 GS，并从源代码安装了最新版本的 Ghostscript(v9.0.7) 和 Imagemagick(v6.8.5)，转换速度从大约 0.5 秒变为 7.5 秒，完全相同的原始版本PDF格式。

我需要能够运行两者的更高版本才能使用inkcov设备来计算出多页pdf（最多200页）中哪些页面是彩色的。

现在我假设这种放缓是由于编译选项造成的，因为我无法相信更高版本的速度要慢得多。我四处寻找，试图找到在编译阶段进行优化的方法（更改为 Q8 而不是 Q16 质量等），但似乎没有什么太大的区别。

谢谢

# php - PHP/MYSQL 过期时删除数据

> ID：16216304
> 
> 赞同：4
> 
> 时间：2013-04-25T13:38:33.360
> 
> 标签：php, mysql

我有一个自定义分类网站，在 mySQL 中有 date_created 和 date_expire。我想制作一个脚本，在广告过期时将其删除。mySQL 表名为：“ads”，具有以下列：“id”“name”“email”“ad_headline”“date_created”“data_expirare”（这是广告到期的日期）

这是我尝试过的：http: [//pastebin.com/gD56BAWY](http://pastebin.com/gD56BAWY)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T13:45:34.403

您想要做的是每天运行一个 cron 作业（`0 0 * * *`）。在这种情况下，您将创建一个 PHP 文件，然后在其中运行以下查询：

```
DELETE FROM ads WHERE data_expirare < NOW(); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T13:42:54.397

```
delete from ads where data_expirare < NOW(); 
```

需要时执行。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-30T03:23:57.160

似乎这应该是自动化的。看看这篇关于 MySQL Event 系统的文章，并用它来删除过期数据： http: [//mrjoelkemp.com/2011/04/mysql-event-to-remove-expired-data/](http://mrjoelkemp.com/2011/04/mysql-event-to-remove-expired-data/) 基本上你可以选择最好的从先前的建议中删除脚本并定期执行。在他的示例中，它每分钟运行一次，但您可以将其设置为更零星的。

这是文档的相关链接：http: [//dev.mysql.com/doc/refman/5.1/en/events.html](http://dev.mysql.com/doc/refman/5.1/en/events.html)

* * *

## 回答 #4

> 赞同：-6
> 
> 时间：2013-04-25T13:45:59.110

你可以使用 CRON 来做

```
delete * from ads where data_expirare > NOW(); 
```

例如每天。

# email - Local SMTP Server

> ID：16216309
> 
> 赞同：2
> 
> 时间：2013-04-25T13:38:50.130
> 
> 标签：email, iis, smtp, iis-7.5

I used IIS5.1 prior with the Virtual SMTP Server to send some internal mail. However, we've been upgraded to IIS7.5 and there is no SMTP Server for some reason Microsoft doesn't have a fit explanation for. Is there a comparable local SMTP Server that I could use (I only need send-only, not a full mail server, if that makes a difference)?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:49:10.047

简而言之，您仍然可以在 IIS7.5 上使用 IIS6 SMTP 服务器，或者您可以使用下面列出的免费 smtp 服务器替代方案。

**IIS6 SMTP**：

[IIS 7 中是否已弃用 SMTP 虚拟服务器？](https://stackoverflow.com/questions/6429747/is-the-smtp-virtual-server-deprecated-in-iis-7)

[http://www.chrislazari.com/2011/04/iis-75-installing-smtp-service-securing.html](http://www.chrislazari.com/2011/04/iis-75-installing-smtp-service-securing.html)

[http://forums.iis.net/p/1157046/1901343.aspx](http://forums.iis.net/p/1157046/1901343.aspx)

流行的替代品：

**邮件启用** [http://www.mailenable.com/standard_edition.asp](http://www.mailenable.com/standard_edition.asp)

**SmarterMail** [http://www.smartertools.com/smartermail/mail-server-software.aspx](http://www.smartertools.com/smartermail/mail-server-software.aspx)

**hMailServer** [http://www.hmailserver.com/](http://www.hmailserver.com/)

搜索更多：[谷歌](https://www.google.com/search?q=windows%20mail%20servers%20free%20smtpo&aq=f&oq=windows%20mail%20servers%20free%20smtpo&aqs=chrome.0.57j0.4930j0&sourceid=chrome&ie=UTF-8#sclient=psy-ab&q=windows%20mail%20servers%20free%20smtp&oq=windows%20mail%20servers%20free%20smtp&gs_l=serp.3..0i22i30.1484.1484.0.1699.1.1.0.0.0.0.75.75.1.1.0...0.0...1c.1.11.psy-ab.NVi3B7vK98k&pbx=1&bav=on.2,or.r_qf.&bvm=bv.45645796,d.eWU&fp=9610ee3d36cde05&biw=1280&bih=939)

# r - 如何绘制堆积点直方图？

> ID：16216312
> 
> 赞同：4
> 
> 时间：2013-04-25T13:38:51.560
> 
> 标签：r, plot, ggplot2

“dotplot”直方图的 ggplot2 等价物是什么？使用堆叠点而不是条形？类似于 R 中的这个解决方案：

[用点而不是条形图绘制直方图](https://stackoverflow.com/questions/1934751/plot-histogram-with-points-instead-of-bars)

可以在ggplot2中做到这一点吗？理想情况下，点显示为堆栈，一条微弱的线显示平滑线“适合”这些点（这将形成直方图形状。）

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-07-17T16:07:50.770

*ggplot2*做 dotplots[链接到手册](https://ggplot2.tidyverse.org/reference/geom_dotplot.html)。

这是一个例子：

```
library(ggplot2)

set.seed(789); x <- data.frame(y = sample(1:20, 100, replace = TRUE))

ggplot(x, aes(y)) + geom_dotplot() 
```

为了使它表现得像一个简单的点图，我们应该这样做：

```
ggplot(x, aes(y)) + geom_dotplot(binwidth=1, method='histodot') 
```

你应该得到这个：

![第一个情节](https://i.stack.imgur.com/V4EnJ.png)

要解决密度问题，您必须添加另一个术语 ，`ylim()`以便您的绘图调用具有以下形式`ggplot() + geom_dotplot() + ylim()`

更具体地说，您将编写`ylim(0, A)`，其中`A`将是计算 1.00 密度所需的堆叠点数。在上面的示例中，您能做的最好的事情就是看到 7.5 个点达到 0.50 密度标记。从那里，您可以推断出 15 个点将达到 1.00。

所以你的新电话看起来像这样：

```
ggplot(x, aes(y)) + geom_dotplot(binwidth=1, method='histodot') + ylim(0, 15) 
```

这会给你这个：

![第二个情节](https://i.stack.imgur.com/Lkw9G.png)

通常，这种眼球估计适用于点图，但当然您可以尝试其他值来微调您的比例。

请注意更改 ylim 值不会影响数据的显示方式，它只会更改 y 轴上的标签。

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2013-04-25T13:54:33.060

正如@joran 指出的那样，我们可以使用 geom_dotplot

```
require(ggplot2)
ggplot(mtcars, aes(x = mpg)) + geom_dotplot() 
```

![在此处输入图像描述](https://i.stack.imgur.com/cXLQS.png)

* * *

**编辑：（** *将有用的评论移到帖子中）*：

标签“计数”具有误导性，因为这实际上是一个密度估计，您可能会建议我们默认将此标签更改为“密度”。dotplot 的 ggplot 实现遵循 Leland Wilkinson 的原始实现，所以如果你想清楚地了解它是如何工作的，请[查看这篇论文](https://www.cs.uic.edu/~wilkinson/Publications/dotplots.pdf)。

使 y 轴实际计数的简单转换，即“观察次数”。[从帮助页面](https://ggplot2.tidyverse.org/reference/geom_dotplot.html)中可以看出：

> 当沿 x 轴分箱并沿 y 轴堆叠时，由于 ggplot2 的技术限制，y 轴上的数字没有意义。您可以隐藏 y 轴，如示例之一，或手动缩放它以匹配点数。

因此，您可以使用此代码隐藏 y 轴：

```
ggplot(mtcars, aes(x = mpg)) + 
  geom_dotplot(binwidth = 1.5) + 
  scale_y_continuous(name = "", breaks = NULL) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/fIWay.png)](https://i.stack.imgur.com/fIWay.png)

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2016-08-12T08:31:26.947

我使用@Waldir Leoncio 的后一种方法介绍了一种精确的方法。

```
library(ggplot2); library(grid)

set.seed(789)
x <- data.frame(y = sample(1:20, 100, replace = TRUE))

g <- ggplot(x, aes(y)) + geom_dotplot(binwidth=0.8)
g  # output to read parameter

### calculation of width and height of panel
grid.ls(view=TRUE, grob=FALSE)
real_width <- convertWidth(unit(1,'npc'), 'inch', TRUE)
real_height <- convertHeight(unit(1,'npc'), 'inch', TRUE)

### calculation of other values
width_coordinate_range <- diff(ggplot_build(g)$panel$ranges[[1]]$x.range)
real_binwidth <- real_width / width_coordinate_range * 0.8  # 0.8 is the argument binwidth
num_balls <- real_height / 1.1 / real_binwidth  # the number of stacked balls. 1.1 is expanding value.
   # num_balls is the value of A

g + ylim(0, num_balls) 
```

[![在此处输入图像描述](https://i.stack.imgur.com/l0ZX6.png)](https://i.stack.imgur.com/l0ZX6.png)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2017-04-03T17:22:30.277

道歉：我没有足够的声誉来“评论”。

我喜欢 cuttlefish44 的“精确方法”，但为了使其工作（使用 ggplot2 [2.2.1]），我必须更改以下行：

```
### calculation of other values
width_coordinate_range <- diff(ggplot_build(g)$panel$ranges[[1]]$x.range) 
```

至

```
### calculation of other values
width_coordinate_range <- diff(ggplot_build(g)$layout$panel_ranges[[1]]$x.range) 
```

# glassfish - Using the context-root from glassfish-web.xml in GlassFish 3

> ID：16216323
> 
> 赞同：5
> 
> 时间：2013-04-25T13:39:21.957
> 
> 标签：glassfish, war, asadmin, contextroot

We recently switched to Glassfish 3.1.2.2 and have several Web-Applications packaged as war files. At times the desired context-root for these applications differs from the filename.

Back when we used Weblogic we achieved this by declaring the context-root in the weblogic.xml like this

```
<context-root>path/to/our/App</context-root> 
```

We noticed that the same Tag exists in the glassfish-web.xml. But no matter what we define there, the server always determines the filename as the context-root.

Now we find the option --contextroot in the asadmin utility that would allow us to overwrite the filename at deploy time, but we'd prefer to do define it directly in the archive itself so that whoever will deploy it in the end won't need to know the desired contex-root.

Is there any way to achieve this?

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-08-21T13:22:46.937

在 GlassFish 3 和 GlassFish 4 中，Web 应用程序的配置是通过`glassfish-web.xml`. 在您的情况下，所需的配置文件如下所示：

```
<!DOCTYPE glassfish-web-app PUBLIC 
    "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN"
    "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app>
    <context-root>/path/to/our/App</context-root>
</glassfish-web-app> 
```

**您可以在Oracle GlassFish Server 应用程序部署指南的****GlassFish Server 部署描述符文件**部分找到更多详细信息。本文档的在线版本可在[http://docs.oracle.com/cd/E18930_01/html/821-2417/](http://docs.oracle.com/cd/E18930_01/html/821-2417/)上找到。

 *** * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-04-25T15:34:59.203

通常这应该`glassfish-web.xml`看起来像这样：

```
<!DOCTYPE glassfish-web-app PUBLIC 
    "-//GlassFish.org//DTD GlassFish Application Server 3.1 Servlet 3.0//EN"
    "http://glassfish.org/dtds/glassfish-web-app_3_0-1.dtd">
<glassfish-web-app>
    <context-root>/path/to/App</context-root>
</glassfish-web-app> 
```

但是在这里，您似乎需要一个`sun-web.xml`为您的任务调用的文件。

这是一个例子：

```
<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sun-web-app PUBLIC 
     "-//Sun Microsystems, Inc.//DTD GlassFish Application Server 3.0 Servlet 3.0//EN"   
     "http://www.sun.com/software/appserver/dtds/sun-web-app_3_0-0.dtd">
<sun-web-app error-url="">
    <context-root>/path/to/our/App</context-root>
</sun-web-app> 
```**

# ios - Switch between two UIWindows

> ID：16216328
> 
> 赞同：5
> 
> 时间：2013-04-25T13:39:28.820
> 
> 标签：ios, push-notification, uiwindow

I am integrating Pushwoosh SDK for Push Notification, which is using `UIWindow` to represent HTML page sent from Pushwoosh portal

```
- (void) showWebView {
    self.richPushWindow.alpha = 0.0f;
    self.richPushWindow.windowLevel = UIWindowLevelStatusBar + 1.0f;
    self.richPushWindow.hidden = NO;
    self.richPushWindow.transform = CGAffineTransformMakeScale(0.01, 0.01);

    [UIView animateWithDuration:0.3 animations:^{
        self.richPushWindow.transform = CGAffineTransformIdentity;
        self.richPushWindow.alpha = 1.0f;
    } completion:^(BOOL finished) {
    }];

}

- (void) showPushPage:(NSString *)pageId {
    NSString *url = [NSString stringWithFormat:kServiceHtmlContentFormatUrl, pageId];
    HtmlWebViewController *vc = [[HtmlWebViewController alloc] initWithURLString:url];
    vc.delegate = self;
    vc.supportedOrientations = supportedOrientations;

    self.richPushWindow.rootViewController = vc;
    [vc view];
} 
```

And on closing on HTML page it calls

```
self.richPushWindow.transform = CGAffineTransformIdentity;
[UIView animateWithDuration:0.3 delay:0 options:UIViewAnimationOptionCurveEaseOut animations:^{
    self.richPushWindow.transform = CGAffineTransformMakeScale(0.01, 0.01);
    self.richPushWindow.alpha = 0.0f;

} completion:^(BOOL finished) {
    AppDelegate * appDelegate = (AppDelegate*)[[UIApplication sharedApplication] delegate];

    self.richPushWindow.hidden = YES;

}]; 
```

Now I want to call my view controller on closing of this HTML page. So I tried to present `myviewcotrlller` in this block completion but not presenting.

Actually here problem is that there are two UIWindows in my app one of app and other used by sdk. Now if i try to present view controller from this html page which is on separate UIWindow so it creates a separate hierarchy and when i close this window also removes my presented viewconroller due to parent-child relationship. And if do not close this window then how to come back to actual flow of app.

I want that new controller should be presented from that new window and after that window should be close and flow of app should not be affected by additional window. Is it possible? If my concept is wrong, Please help if anyone has idea

**Edit:** second uiwindow never be key window, it only becomes visible by setting higher windowlevel and become hidden

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-30T08:39:41.343

问题是，在这个完成块之后richPushWindow 将消失，这实际上意味着您正试图在隐藏窗口上显示视图控制器。

解决方案非常简单。使用主窗口呈现视图控制器。一些伪代码：

将 ViewContoller 中的视图添加到主窗口子视图：

1.  [appDelegate.window addSubview:myViewController.view];

模态：

1.  [appDelegate.window.rootViewController presentModalViewController:myViewController]

使用视图控制器层次结构：

1.  将您的 viewController 推送到主 viewController 堆栈。例如，如果您有导航控制器，只需将其推到那里。

我希望它有帮助！

# ajax - Knockoutjs default loader doesn't show up on first click

> ID：16216334
> 
> 赞同：0
> 
> 时间：2013-04-25T13:39:45.897
> 
> 标签：ajax, knockout.js, loading, loader

I'm using a knockoutjs extension to place a loader on top of an element that is loaded from an ajax request so that a loading gif is show while the request is executing.

The [fiddle](http://fiddle.jshell.net/t3Kqc/7/ "fiddle") is very basic:

*   It loads a list of avatars and shows the loading image while the ajax request is executing.
*   Then, when you click an avatar, it's details are loaded into another placeholder and a loading icon is also shown while the request is executing.

The problem is, the very first time I click on an avatar, the loading icon isn't shown but all subsequential clicks works. What am I missing here?

Thanks!

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:19:20.870

您看到的问题与`with`在同一元素上同时拥有和自定义绑定有关。当值为 null 时，`with`绑定会清除子元素。这将删除您的加载程序（尽管它已经作为`with`绑定使用的“模板”的一部分被复制），但是当您填充`infos`. 将它们放在同一个元素上也意味着绑定会触发两次（一次来自更改`infos`，一次来自更新`isAvatarLoading`.

解决这个问题的简单方法是拆分绑定，例如：

```
<div class="avatar" style="margin-left: 55px;" data-bind="loadingWhen: isAvatarLoading">
    <div data-bind="with: infos">
        <div data-bind="text: firstName"></div>
        <div data-bind="text: lastName"></div>
        <div data-bind="text: age"></div>
        <div data-bind="text: description"></div>
        <div style="margin-left: 55px;" id="" data-bind="with: image">
            <img data-bind="attr: { src: Url }" />
            <div data-bind="text: Description"></div>
        </div>
    </div>
</div> 
```

如果您不想添加其他元素，则可以使用无容器`with`语法，例如：

```
<div class="avatar" style="margin-left: 55px;" data-bind="loadingWhen: isAvatarLoading">
    <!-- ko with: infos -->
        <div data-bind="text: firstName"></div>
        <div data-bind="text: lastName"></div>
        <div data-bind="text: age"></div>
        <div data-bind="text: description"></div>
        <div style="margin-left: 55px;" id="" data-bind="with: image">
            <img data-bind="attr: { src: Url }" />
            <div data-bind="text: Description"></div>
        </div>
    <!-- /ko -->
</div> 
```

示例： http: [//fiddle.jshell.net/rniemeyer/75Lyn/](http://fiddle.jshell.net/rniemeyer/75Lyn/)

# java - 使用 QueryDSL SQL 映射一对多关系

> ID：16216336
> 
> 赞同：6
> 
> 时间：2013-04-25T13:39:54.103
> 
> 标签：java, sql, jdbc, querydsl

假设我有这两个 bean 实体：

```
public class Audit {

   private String code;

    private java.sql.Timestamp creationDate;

    private String creatorId;

    private java.sql.Timestamp deletionDate;

    private String description;

    private String id;

    private String name;

    private String notes;

    private Short status;

    private List<AuditParticipant> participants;
} 
```

和 ：

```
 public class AuditParticipant {

    private String auditId;

    private String department;

    private String id;

    private String name;

    private String notes;

    private String role;

    private String surname;
} 
```

... 哪里`Audit`可以有 1..n `Participants`，我如何使用 QueryDSL SQL 将参与者列表投影到 Audit bean 中（获取属于审计的所有参与者）？

bean 是使用 QueryDSL 代码生成生成的。

谢谢

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-27T08:56:11.800

Querydsl 为这种情况提供结果聚合功能[http://www.querydsl.com/static/querydsl/3.1.1/reference/html/ch03s02.html#d0e1634](http://www.querydsl.com/static/querydsl/3.1.1/reference/html/ch03s02.html#d0e1634)

在这种情况下，它将类似于

```
query.from(audit)
     .innerJoin(participant).on(...)
     .transform(groupBy(audit.id).as(audit, list(participant))); 
```

有关其他 groupBy 选项，请参阅这些示例[https://github.com/mysema/querydsl/blob/master/querydsl-collections/src/test/java/com/mysema/query/collections/GroupByTest.java](https://github.com/mysema/querydsl/blob/master/querydsl-collections/src/test/java/com/mysema/query/collections/GroupByTest.java)

# visual-studio-2012 - How to update TFS workspace after computer name changes?

> ID：16216338
> 
> 赞同：51
> 
> 时间：2013-04-25T13:40:03.643
> 
> 标签：visual-studio-2012, tfs, workspace, tf-cli

I renamed my computer name, and now my TFS workspace is broken in Visual Studio 2012.

When I type:

```
tf workspaces /computer:ABOTONJIC-PC /owner:* /format:detailed 
```

```
Workspace  : ABOTONJIC-PC
Owner      : wrongowner@test.com
Computer   : ABOTONJIC-PC
Comment    :
Collection : netuse.visualstudio.com\DefaultCollection
Permissions: Private
Location   : Local
File Time  : Current 
```

But I need to have :

```
Owner      : realowner@test.com
Computer   : NEW-PC 
```

Then I try:

```
tf workspaces /updateComputerName:ABOTONJIC-PC /collection:netuse.visualstudio.com/DefaultCollection 
```

```
No workspace matching *;wrongowner@test.com on computer NEW-PC found in Team Foundation Server netuse.visualstudio.com/DefaultCollection. 
```

So my question are :

1.  How to update computer name in my workspace?
2.  Why TFS still shows "wrongowner@test.com" in workspace although there is new email registered as "realowner@test.com"?

* * *

## 回答 #1

> 赞同：49
> 
> 时间：2013-12-12T19:01:06.610

我安装了 Sidekicks。它不适用于此问题，但确实如此：

```
C:\Program Files (x86)\Microsoft Visual Studio 9.0\Common7\IDE>tf workspaces /updateComputerName:OldComputerName /s:"https://tfsServerName" 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2013-07-04T14:00:45.143

1.  安装[Team Foundation Sidekicks](http://www.attrice.info/cm/tfs/)。免费。
2.  打开 Workspace Sidekick，单击 Search，然后从列表中选择您的工作区。
3.  单击蓝色计算机图标以*更新工作区计算机名称*，您就完成了。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-04-02T13:39:14.280

我有同样的问题，也是一个 VisualStudio.com 帐户。

我已经尝试了提示告诉我的内容：

![在此处输入图像描述](https://i.stack.imgur.com/KTPeH.png)

像这样：

`tf workspaces /updateComputerName:MyOldComputerName`

但我回来了：

> 每当指定 /updateComputerName 或 /updateUserName 时，都必须指定 /collection 选项。

为了获得我运行的集合名称：

`tf workspaces`

其中列出了我的收藏，我得到了收藏的名称（...myusername.visualstudio.com...）

然后我跑了：

`tf workspaces /collection:http://myusername.visualstudio.com /updateComputerName:MyOldComputerName`

当我得到这个时没有工作：

> TF31002：无法连接到此 Team Foundation Server： [http://myusername.visuals](http://myusername.visuals) tudio.com/defaultcollection。Team Foundation Server 网址： http: [//myusername.visualstudio.com/defaultcollection](http://myusername.visualstudio.com/defaultcollection)。
> 
> 失败的可能原因包括： - Team Foundation Server 的名称、端口号或协议不正确 - Team Foundation Server 处于脱机状态。- 密码已过期或不正确。
> 
> 技术信息（针对管理员）：远程服务器返回错误：(404) Not Found。

然后我注意到我输入`http`而不是`https`，更正，重试并且它有效！

* * *

## 回答 #4

> 赞同：16
> 
> 时间：2015-08-18T12:31:21.473

在

```
C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE> 
```

以管理员身份在 CMD 中运行此命令

```
tf workspaces /collection:https://SERVER_NAME.visualstudio.com/DefaultCollection /updateComputerName:OLD_COMPUTER_NAME 
```

* * *

## 回答 #5

> 赞同：8
> 
> 时间：2018-03-25T03:35:23.983

要使其在 Visual Studio 2017 中工作，请使用以下（新位置）

```
C:\Program Files (x86)\Microsoft Visual Studio\2017\Enterprise\Common7\IDE\CommonExtensions\Microsoft\TeamFoundation\Team Explorer\TF.exe workspaces /collection:https://youraccountnamehere.visualstudio.com /updateComputerName:OLD-COMPUTERNAME 
```

希望这可以节省一些时间！

* * *

## 回答 #6

> 赞同：4
> 
> 时间：2015-09-30T16:12:11.607

看看这个[链接](https://stackoverflow.com/questions/8435135/change-computer-name-for-a-tfs-workspace)

瓦卡诺 说：

这个命令成功了：

```
tf workspaces /updateComputerName:MyOldComputerName 
/s:"http://MyServer:8080/tfs/MyCollection" 
```

它必须从我想将工作区分配到的计算机上运行（这就是它获取新计算机名称的方式。>

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-10-12T09:54:53.367

```
tf workspaces /updateComputerName:REPLCATEOLDCOMPUTERNAMEHERE /collection:REPLACETFSURL 
```

例子：

```
tf workspaces /updateComputerName:DESKTOP-42CLO97 /collection:https://testuserxx.visualstudio.com 
```

VS2017

* * *

## 回答 #8

> 赞同：2
> 
> 时间：2016-12-20T06:05:58.190

打开命令提示符并键入如下所示

> C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE

[![在此处输入图像描述](https://i.stack.imgur.com/eUG8b.png)](https://i.stack.imgur.com/eUG8b.png)

并使用您的凭据键入以下代码

> tf 工作区 /updateComputerName:OldComputerName /s:" [https://tfsServerName](https://tfsServerName) "

在 CMD 提示符下

> C:\Program Files (x86)\Microsoft Visual Studio 14.0\Common7\IDE>tf 工作区 /updateComputerName:OldComputerName/s:" [https://tfsServerName](https://tfsServerName) "

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2018-05-24T06:47:30.240

您可以添加新工作区，然后使用 vs 2017 删除您以前的工作区： [![在此处输入图像描述](https://i.stack.imgur.com/hKEhN.png)](https://i.stack.imgur.com/hKEhN.png)

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2015-06-18T06:45:09.110

打开 Visual Studio 命令提示符并键入以下命令

```
tf workspaces /updateComputerName:oldcomputername  /s:http://tfservername:port#/tfs 
```

例如

```
tf workspaces /updateComputerName:abc-PC  /s:http://mytfsserver:8080/tfs 
```

您可以在运行上述命令之前和之后运行以下命令，这只是为了检查您计算机上的工作区信息。

**请记住：** *在客户端计算机（已重命名）上运行所有这些命令，而不是在安装 TFS 服务器的计算机上。*

如果用户名也被更改，则运行以下命令

```
tf workspaces /updateUserName:oldUserName  /s:http://mytfsserver:8080/tfs 
```

希望它会有所帮助。

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2015-08-02T09:55:07.960

对我有用的是打字

```
tf workspaces /updateComputerName:MyOldComputerName /collection:"anything".visualstudios.com/DefaultCollection/ 
```

# r - split up a matrix in matrices by value of column nodes in R

> ID：16216342
> 
> 赞同：2
> 
> 时间：2013-04-25T13:40:13.650
> 
> 标签：r

I have a matrix like this in R:

```
 [,1]        [,2]        [,3]         [,4]            [,5]   
19992    -33.54971    23.35746    0.0000000    2.107680e+01    19980219
19993    -33.54203    23.40079    0.0000000    2.107696e+01    19980219
19994    -33.53453    23.44445    0.0000000    2.107713e+01    19980219
19995    -33.52719    23.48840    0.0000000    2.107730e+01    19980219
19996    -33.51965    23.53200    0.0000000    2.107746e+01    19980219
19997    -33.51183    23.57565    0.0000000    2.107763e+01    19980219
19998    -33.50446    23.61958    0.0000000    2.107780e+01    19980219
19999    -33.49678    23.66313    0.0000000    2.107796e+01    19980219 
```

Its actually a lot bigger (2.000.000 rows) but I think that this example will do for my question.

I want to extract all rows that have a value between e.g. -33.52... and -33.55... in the first column and create a new matrix of these extracted rows.

The output matrix would than be for example:

```
19992    -33.54971    23.35746    0.0000000    2.107680e+01    19980219
19993    -33.54203    23.40079    0.0000000    2.107696e+01    19980219
19994    -33.53453    23.44445    0.0000000    2.107713e+01    19980219
19995    -33.52719    23.48840    0.0000000    2.107730e+01    19980219 
```

Some tips would be great!

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:49:10.530

假设您的原始矩阵称为`the_matrix`. 要获取第一列中的值在指定范围内的那些行索引，您可以使用

```
ind <- which( the_matrix[, 1] < -33.52 & the_matrix[, 1] > -33.55 ) 
```

要创建仅包含这些行的新矩阵，请使用

```
new_matrix <- the_matrix[ind, ] 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:49:34.577

使用可用于子集的逻辑比较，如下所示：

```
set.seed(1096)
m <- matrix( runif(36,-30,30) , ncol = 6 )
m
            [,1]       [,2]      [,3]       [,4]       [,5]       [,6]
[1,] -10.8645147  12.701539 11.830714  12.027012  13.007876 -27.569211
[2,] -27.7127809 -20.907217 26.667036 -16.142388  20.287297  12.283898
[3,]   8.1607388  13.326040 -8.937501   2.541782   2.705917  18.490514
[4,]  14.0729963   4.522238 13.869731  13.708621 -22.996189  29.276250
[5,]  -0.3717591  18.057403 18.940814   3.430272 -23.460082 -27.296111
[6,] -14.0079398  -7.932984 24.836415 -20.442637  20.630987   8.138304

m[ m[,1] > -15 & m[,1] < -10 , ]
          [,1]      [,2]     [,3]      [,4]     [,5]       [,6]
[1,] -10.86451 12.701539 11.83071  12.02701 13.00788 -27.569211
[2,] -14.00794 -7.932984 24.83641 -20.44264 20.63099   8.138304 
```

我们将条件放在`[`操作符的行位置中（注意`,`上面最后一个命令中的条件之后，我们告诉 R 返回所有列）。

我们将条件添加到使用`&`运算符将​​条件链接在一起的子集中，因此在这种情况下，我们只希望第一列 ( `m[,1]`) 中的值大于 -15`&`小于 -10 的行。

你可能会说

```
m[ (some condition) , c(1,2) ] 
```

if`(some condition)`是一个表达式，R 可以计算为其中一个`TRUE`，否则`FALSE`它将只返回计算结果为 的行`TRUE`。这次我们*只*要求第 1 列和第 2 列（我们也可以说`1:2`）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:51:07.010

使用您的数据，我们可以做这样的事情

```
txt <- 
" -33.54971    23.35746    0.0000000    2.107680e+01    19980219
 -33.54203    23.40079    0.0000000    2.107696e+01    19980219
 -33.53453    23.44445    0.0000000    2.107713e+01    19980219
 -33.52719    23.48840    0.0000000    2.107730e+01    19980219
 -33.51965    23.53200    0.0000000    2.107746e+01    19980219
 -33.51183    23.57565    0.0000000    2.107763e+01    19980219
 -33.50446    23.61958    0.0000000    2.107780e+01    19980219
 -33.49678    23.66313    0.0000000    2.107796e+01    19980219"

mat <- matrix(scan(text = txt), ncol = 5, byrow = TRUE)
cond <- mat[,1] < -33.52 & mat[,1] > -33.55
mat[cond, ]

##         [,1]   [,2] [,3]   [,4]     [,5]
## [1,] -33.550 23.357    0 21.077 19980219
## [2,] -33.542 23.401    0 21.077 19980219
## [3,] -33.535 23.444    0 21.077 19980219
## [4,] -33.527 23.488    0 21.077 19980219 
```

# php - 我需要一个带有 MultipleIterator 的 foreach 吗？

> ID：16216347
> 
> 赞同：0
> 
> 时间：2013-04-25T13:40:26.103
> 
> 标签：php, xpath, foreach, iterator

这是我查找评论并写入文件并正常工作的代码。

```
$comment1 = $xpath->query('//*[comment() = "abc"]');
$comment2 = $xpath->query('//*[comment() = "cde"]');

$commentIterator = new MultipleIterator();
$commentIterator->attachIterator(new IteratorIterator($comment1));
$commentIterator->attachIterator(new IteratorIterator($comment2));

foreach ($commentIterator as $comments) {
    file_put_contents('page1.php', $dom->saveHTML($comments[0]));
    file_put_contents('page2.php', $dom->saveHTML($comments[1]));   
} 
```

问题是即使我`file_put_contents`在 foreach 之外，结果也是正确的。$comments 是循环内的局部变量。我需要foreach吗？

此代码与 foreach 外部的 $comments 一样有效

```
$comment1 = $xpath->query('//*[comment() = "abc"]');
$comment2 = $xpath->query('//*[comment() = "cde"]');

$commentIterator = new MultipleIterator();
$commentIterator->attachIterator(new IteratorIterator($comment1));
$commentIterator->attachIterator(new IteratorIterator($comment2));

foreach ($commentIterator as $comments) {

}

file_put_contents('page1.php', $dom->saveHTML($comments[0]));
file_put_contents('page2.php', $dom->saveHTML($comments[1])); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:47:43.367

如果在您的情况下您删除了`foreach`? 在您当前的示例中，您对其进行迭代，因此如果它找到了至少 1 个孩子，`$comments`则保留它从上一次迭代中填充的最后一个值`foreach`。如果您`foreach`完全删除您的，`$comments`将不再可用。

# java - Java文件路径编码？

> ID：16216351
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:40:29.383
> 
> 标签：java, encoding, path

我制作了一个简单的应用程序，询问用户一个文件夹名称，稍后将在其中复制一些文件。问题是文件夹名称将包含非翻译（希腊语）字符。虽然使用正确的名称创建文件夹并且没有错误，但当我将其 AbsolutePath 存储在字符串中时，希腊字符会变成这样**??????** _22-03-2012。当我尝试使用存储的路径发送复制的文件时出现错误，因为 java 无法正确读取路径！

```
package newOrderAndXCopy;

import java.io.File;
import javax.swing.JOptionPane;
import initiate.*;

public class NewOrder {

private String orderPath = null;

//constructor
public NewOrder() {     

    if(newOrderName()) {

        File nO = new File(orderPath);
        nO.mkdir();

    }       

}

public boolean newOrderName() {
    boolean name = false;
    int counter = 3;
    while(counter > 0) {

        String test = JOptionPane.showInputDialog("Here I ask the user to give the order name with this form -> ΠΑΡΑΛΑΒΗ ΧΧ-ΧΧ-ΧΧΧΧ (π.χ. ΠΑΡΑΛΑΒΗ 12-04-2013):");
        if(!test.matches("ΠΑΡΑΛΑΒΗ \\d{2}-\\d{2}-\\d{4}")) {

            JOptionPane.showMessageDialog(null, "Wrong name!", "Error", JOptionPane.ERROR_MESSAGE);
            counter--;

        }
        else {
                            //replace the space with underscore
            String rep = Config.savesPath + test.replaceAll(" ", "_") + "/";

            File no = new File(rep);
            if(!no.exists()) {
                orderPath = rep;

                --> Config.orderPath = no.getAbsolutePath();  <--
                /*This part is where it gets messy. The folder is created but this value is wrong so I can't use it later!*/
                name = true;
                JOptionPane.showMessageDialog(null, "The order folder was created!!", "Success!", JOptionPane.INFORMATION_MESSAGE);
                break;
            }
            else {
                JOptionPane.showMessageDialog(null, "The order with this name already exists!Pick another Name!", "Error", JOptionPane.ERROR_MESSAGE);
            }

        }

    }
    return name;
}
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:16:24.583

看看[这个答案](https://stackoverflow.com/questions/11414668/java-unicode-to-readable-text-conversion-decoding)。

```
String encoding = "UTF-8";
new PrintWriter(new OutputStreamWriter(new FileOutputStream(file), encoding ))
new BufferedReader(new InputStreamReader(new FileInputStream(file), encoding )) 
```

问题可能在于使用 FileWriter 或省略了编码参数（默认为平台编码）。

要读取文件，您需要在编辑器中正确设置编码。或者在可以指示字符集的地方编写 HTML。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-07-27T02:50:17.483

您的应用需要处理非拉丁字符，因此请确保默认编码支持这一点。

```
System.setProperty("file.encoding", "UTF-8"); 
```

# java - 如何在 java eclipse 中运行 svm light？

> ID：16216353
> 
> 赞同：2
> 
> 时间：2013-04-25T13:40:39.500
> 
> 标签：java, eclipse, svmlight

我已经下载了用于在 Java 中运行 svm 的 JNI_SVM-light-6.01-64bit 版本。我尝试过在线搜索，但没有完全弄清楚使用 eclipse IDE for java 运行库的步骤。我要做的就是知道如何提供输入训练文件来训练模型，并提供测试文件以便我得到相应的结果？使用 Eclipse IDE 进行分步说明会非常有帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-06-15T06:55:09.833

嘿，你检查了测试文件吗？在通过构建路径>添加外部档案导入库后，我现在自己尝试一下。

你可以在这里找到测试文件： [http ://www.mpi-inf.mpg.de/~mtb/svmlight/JNI_SVMLight_Test.java](http://www.mpi-inf.mpg.de/~mtb/svmlight/JNI_SVMLight_Test.java)

在文件中，它创建了一个随机数据集，对其进行训练，计算准确性..所以它基本上为您提供了您需要的标准操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-12-04T16:23:24.703

在 Eclipse 中从 Java 代码运行 SVMLight 的另一种方法是使用[ClearTK](https://code.google.com/p/cleartk/)。这允许以标准化的方式向 SVMLight 以及其他模型（例如 CRF）提供数据并从中获取结果。

# java - Validate arithmetical formula

> ID：16216355
> 
> 赞同：-2
> 
> 时间：2013-04-25T13:40:40.620
> 
> 标签：java, regex

I need validate a formula to calculate the grade of discipline:

All identifiers (A1, A2,A3,...) has been based on tests, homeworks, etc. created by teachers. Below an example of a common formula:

```
( (A1+A2+A3) / 3) * (B2+B3) 
```

On this case, I'm just need validate the formula structure, like:

*   Non closed parenthesis (done);
*   Empty parenthesis groups '()' (done);
*   Duplicated operators like '(A1++A2)';
*   Duplicated distinct operators like '(A1 **-*** A2)';

All identifiers at formula like **A1,A1,** etc has been informed by final user, and doesn't validated.

Sample of valid formula:

```
(((A1+A2+A3)/3)*2) + (((B1+B2+B3)/3)*3) 
```

Sample of invalid formula:

```
+ (((A1+A2+A3)/3)*2) + (((B1+B2+B3)/3) / 3++) 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:59:32.600

regular expressions are [regular grammars](http://en.wikipedia.org/wiki/Chomsky_hierarchy) and you need a context-free grammar to parse this kind of stuff (or validate). otherwise, you only apply heuristics...

# c# - 如何计算 Nullable 的大小 数据类型

> ID：16216362
> 
> 赞同：1
> 
> 时间：2013-04-25T13:41:08.083
> 
> 标签：c#, asp.net, .net, c#-4.0

实际上，我很想知道以下数据类型消耗了多少内存

**诠释？= 内存大小？**

**双倍的？= 内存大小？**

**布尔？= 内存大小？**

谁能给我有关他们的存储或计算其大小的方法的信息

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:44:28.060

答案，我相信，就[在这里](https://stackoverflow.com/questions/1381308/what-is-the-memory-footprint-of-a-nullablet)

基本上，将布尔大小添加到不可为空的大小。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:04:11.697

您可以使用以下代码在运行时获取实际大小。返回的值将与数组的元素对齐方式相同`int?[]`，这与 CLI 的操作码返回的值一致`sizeof`（ECMA-335 Partition I, §8.9.1）。由于可空类型被视为引用类型，因此 C#[`sizeof`](http://msdn.microsoft.com/en-us/library/eahchzkf.aspx)运算符不能用于此目的，即使在不安全的上下文中也是如此。相反，我们使用`TypedReference`2 元素数组来计算相同的信息。

```
public static int SizeOf<T>()
{
    T[] array = new T[2];
    TypedReference elem1 = __makeref(array[0]);
    TypedReference elem2 = __makeref(array[1]);

    unsafe
    {
        byte* address1 = (byte*)*(IntPtr*)(&elem1);
        byte* address2 = (byte*)*(IntPtr*)(&elem2);
        return (int)(address2 - address1);
    }
} 
```

然后，您可以使用以下内容。

```
// This returns 8 on my test, but the runtime is free to change this to
// any value greater than sizeof(int)+sizeof(bool)
int nullableSize = sizeof(int?); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:45:14.887

你想知道例如 a 的内存消耗`int? x`吗？MSDN 说：

> ...公共语言运行时根据您的应用程序正在执行的平台的特征分配存储。在某些情况下，它会将您声明的元素尽可能紧密地打包在一起；在其他情况下，它将它们的内存地址与自然硬件边界对齐。此外，64 位平台上的存储分配与 32 位平台上的不同。
> 
> 相同的考虑适用于复合数据类型的每个成员，例如结构或数组。此外，某些复合类型具有额外的内存要求。例如，数组为数组本身以及每个维度使用额外的内存。在 32 位平台上，此开销目前是 12 字节加上每个维度的 8 字节。在 64 位平台上，要求翻倍。您不能依赖简单地将组件的名义存储分配相加。
> 
> 引用任何基本或复合数据类型的对象除了数据类型中包含的数据外，还使用 ​​4 个字节。

# django - How can you store a rsa key pair in a django model / sqlite db

> ID：16216363
> 
> 赞同：5
> 
> 时间：2013-04-25T13:41:10.727
> 
> 标签：django, sqlite, pycrypto

i am using PyCrypto within Django (Python 2.7, Django 1.5m SQLite), i would like to create a field to store an RSAkey object. How can i do this? Converting to a string and back seems pretty error prone and since random bytes are in there, i would not trust that to be a good approach. I was able to store random keys in a charfield by base-64 encoding it (like this: Random.new().read(16).encode('base64')). But a keypair? I saw in the current dev version of Django, a binary field is incorporated, but we need to stick to 1.5.

Any help would really be appreciated.

Thanks Gerd

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T14:33:45.780

您只需要存储私钥，因为您始终可以从私钥生成公钥。

```
>>> from Crypto.PublicKey import RSA
>>> RSAkey = RSA.generate(1024) 
```

公钥可以导出

```
>>> RSAkey.publickey().exportKey() 
```

要保存私钥，您可能希望使用该`exportKey()`方法将其转换为文本并将其存储在 django-TextField 中：

```
>>> RSAkey.exportKey()
'-----BEGIN RSA PRIVATE KEY-----\nMI...-----END' 
```

将文本转换回 RSA 密钥对象也很容易：

```
>>> RSA.importKey('-----BEGIN RSA PRIVATE KEY--- ....') 
```

为您提供一个 RSAobj，就像我最初生成的一样。

如果您还打算在其他领域使用该功能，您也可以通过创建自己的模型字段类来尝试“艰难的方式”。请参阅[https://docs.djangoproject.com/en/1.5/howto/custom-model-fields/](https://docs.djangoproject.com/en/1.5/howto/custom-model-fields/)

# php - php conditional operator not transient

> ID：16216367
> 
> 赞同：0
> 
> 时间：2013-04-25T13:41:20.157
> 
> 标签：php, conditional-operator

I am having a bit of trouble wrapping my head around this, so I thought I will ask it..

I have this code:

```
$x="string";
var_dump($x==0); //says true
var_dump($x==true); //says true
var_dump(true==0); //says false 
```

What I understand is:

```
In 1, `string` gets converted to number, which becomes `0` so condition is true
In 2, `string` is a value, so condition is true
In 3, `true` is not equal to `0` so condition is false 
```

Individually they all make sense, but in a sequence they just don't! I have heard many people say it is because the conditional operator in PHP is `not transient`. Can someone explain what that means, and how to make sense of this?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:05:58.570

为什么这世界上没有意义？您永远不会更改**x**的值，因此这些语句取决于**x**的原始值，即“字符串”。

您假设**x**在第一个 var_dump 中更改为 0，但事实并非如此。它仅与 0/false 进行比较。此语句将执行您认为正在发生的变量更改：

```
var_dump(($x = 0) == 0); 
```

或者：

```
var_dump(($x = false) == 0); 
```

# jquery-animate - Animate DIV to another DIV position

> ID：16216371
> 
> 赞同：0
> 
> 时间：2013-04-25T13:41:24.763
> 
> 标签：jquery-animate

I can't figure out how to animate my DIV so that it goes to the #slot1 position (and later any slot I choose).

Here is my javascript code and the fiddle

```
$(function (){
  $('#deck').click(function (){
    var slotPos = $('#slot1').position();
    $(this).animate({left: slotPos.left}, 400);
  });

}); 
```

[http://jsbin.com/ejeweb/4/](http://jsbin.com/ejeweb/4/)

Thanks in advance!

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:00:24.237

```
$(#slot1 ).position() 
```

function giving the relative position w.r.t to

```
<div id='head'> 
```

container. So you can try below code. And use accordingly it:

```
 $(function (){
  $('#deck').click(function (){
var slotPos = $('#slot1').position(),
       hand=$("#hand").position(); 
   $("#deck").animate({
   left: 10+hand.left+slotPos.left,
   top:10 + hand.top},
   400);
})
}
); 
```

Let me know if this works for you!

# java - 升序 ID 的树形图

> ID：16216373
> 
> 赞同：0
> 
> 时间：2013-04-25T13:41:26.727
> 
> 标签：java, treemap, linkedhashmap

我有一个程序，我必须从 excel 文件中读取数据并将它们存储在数据库中。我正在使用 LinkedHashmap 将每个单元格作为字符串读取。我的 excel 文件包含上述数据：

> 身份证 姓名 工资
> 
> 5 克里斯汀 2349000
> 
> 6 宝莲娜 1000
> 
> 7 劳拉 12587458
> 
> 8 电喷 34567
> 
> 43 吉姆 45878

当我运行程序时，我成功地得到了我想要的结果。我现在遇到的问题是我想通过升序 ID 将数据存储在我的数据库中。我将如何做到这一点？我知道我必须使用 treeMap 但究竟如何？下面的代码用于将数据存储在数据库中。我正在从 excel 文件的第二行读取数据。

```
private static LinkedHashMap[] parseExcelColumnData(List sheetData) {

        LinkedHashMap[] tousRows = new LinkedHashMap[sheetData.size() - 1];
        for (int rowCounter = 1; rowCounter < sheetData.size(); rowCounter++) {

            List list = (List) sheetData.get(rowCounter);

            LinkedHashMap<String, Integer> tableFields = new LinkedHashMap(list.size());
            String str;
            String[] tousFields = new String[list.size()];
            int i = 0;

            for (int j = 0; j < list.size(); j++) {
                Cell cell = (Cell) list.get(j);
                if (cell != null) {
                    if (cell.getCellType() == Cell.CELL_TYPE_NUMERIC) {
                        tableFields.put(String.valueOf(cell
                                .getNumericCellValue()), cell.getCellType());
                    } else if (cell.getCellType() == Cell.CELL_TYPE_STRING) {
                        tableFields.put(cell.getStringCellValue(), cell
                                .getCellType());
                    } else if (cell.getCellType() == Cell.CELL_TYPE_BOOLEAN) {
                        tableFields.put(String.valueOf(cell
                                .getBooleanCellValue()), cell.getCellType());
                    }
                }

            }
            tousRows[rowCounter - 1] = tableFields;
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:01:14.563

将树图键 (Ids) 存储为整数，而不是字符串；否则它们将按字典顺序而不是数字顺序进行比较。

```
Integer intId = new Integer(stringId); 
```

现在您只需要分配一个`TreeMap<Integer, Object>`（或`TreeMap<Integer, String>`任何取决于您存储的内容），其中键是整数 ID，值是要存储的对象。

```
TreeMap<Integer, Object> treeMap = new TreeMap<Integer, Object>();
treeMap.put(intId, obj); 
```

当需要读出值时，使用`treeMap.values()`，您将获得树图中值的排序集合。

# python - Avoid retrieving object to delete in many to many rel SQLAlchemy

> ID：16216374
> 
> 赞同：4
> 
> 时间：2013-04-25T13:41:28.523
> 
> 标签：python, sqlalchemy, many-to-many

Is there a way to avoid retrieving an object to delete in many-to-many relationship?

```
assign = Table('manytomany', Base.metadata,
    Column('pid', String(...), ForeignKey('parent.pid')),
    Column('cid', String(...), ForeignKey('child.cid'))
)

class Parent():
    ....
    childs = relationship("Child", secondary = assign, backref = 'parent') 
```

I know I can do this:

```
obj = session.query(Table).get(pk_id)
session.delete(obj) 
```

But I would like have only one database access, something like:

```
session.query(Table).filter_by(id = pk_id).delete() 
```

I got an error because of the many-to-many rel:

> 'Cannot delete or update a parent row: a foreign key constraint fails...'

Is it possible? Thx a lot

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-30T18:36:24.823

Using`session.query()`将始终首先从数据库中检索对象的数据。为避免这种情况，您必须直接使用与您的 ORM 对象关联的表对象。

```
session.execute(Parent.__table__.delete().where(Parent.id==pk_id)) 
```

这将向删除父记录的数据库发出单个 DELETE sql 语句。（`Parent.id`是的同义词`Parent.__table__.c.id`）

要解决外键错误，您必须首先删除分配表中的记录。

```
session.execute(assign.delete().where(assign.c.pid==pk_id)) 
```

# asp.net - Add external template to visual studio project

> ID：16216377
> 
> 赞同：0
> 
> 时间：2013-04-25T13:41:39.137
> 
> 标签：asp.net, visual-studio-2010, visual-studio, web-applications, web-project

I create a project in visual studio and I want to add external template on it How can I add it ?

Thanks

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:56:47.330

有关您的项目的模板，请参阅此[MSDN 文章](http://msdn.microsoft.com/en-us/library/vstudio/ms247120%28v=vs.100%29.aspx)。有关项目模板，请参阅此[MSDN 文章](http://msdn.microsoft.com/en-us/library/vstudio/ms247069%28v=vs.100%29.aspx)。对于后面的，你基本上是创建文章中定义的配置文件，压缩它们，然后在以下路径创建模板：

> C:\Users[USERNAME]\Documents\Visual Studio 2010\Templates\ItemTemplates[LANGUAGE]

用您的名称和开发语言（Visual C#、Visual Basic 等）替换括号中的项目。您必须重新启动 Visual Studio 才能看到它。

# c - printf debugging to trace a function

> ID：16216381
> 
> 赞同：0
> 
> 时间：2013-04-25T13:41:55.213
> 
> 标签：c, printf-debugging

I'm trying to port software to a microcontroller (so I can't step through the code with e.g. gdb) and it crashes unpleasantly. To identify the reason for this, I want to insert a `printf()` before every statement, echoing said statement, e.g.

```
void foo(int c) {
    bar();
    for(int i=0; i<c; ++c) {
        baz(i);
    }
    very_long_function(&with, &arguments, \
                       on->several(lines)); 
} 
```

Would become

```
void foo(int c) {
    printf("bar();\n");
    bar();
    printf("for(int i=0; i<c; ++c)\n");
    for(int i=0; i<c; ++c) {
        printf("baz(i)\n");
        baz(i);
    }
    printf("very_long_function(&with, &arguments, \
                       on->several(lines));\n");
    very_long_function(&with, &arguments, \
                       on->several(lines));
} 
```

Is there already some script to do this?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:45:48.400

它仍然需要进行相当多的设置，但您可以通过定义一个打印文件/行的宏并在您的代码中点缀它，从而使追踪崩溃的位置变得不那么痛苦

```
#define FL printf("File %s, line %u\n", __FILE__, __LINE__);

void foo(int c) {
FL    bar();
FL    for(int i=0; i<c; ++c) {
FL        baz(i);
    }
FL    very_long_function(&with, &arguments, \
                       on->several(lines)); 
FL} 
```

# winapi - mciSendString with Visual C++ - Parameters?

> ID：16216386
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:42:04.477
> 
> 标签：winapi, visual-studio-2008, c++-cli

I am not a native C++ programmer, so I need some help with the following:

I got this code working:

```
#pragma comment(lib, "winmm.lib")

LPCWSTR openCDCommand = L"set cdaudio door open";
//comes from Windows.h, needs winmm.lib see header includes
int errCode = mciSendString(openCDCommand, 0, 0, 0); 
```

### Questions:

*   Do I need to work with LPCWSTR? Why didn't I find a System::String example?
*   How should I handle 'string concatination'? I cant simply do L"foo"+L"baar"?
*   Am I on the totally wrong way to play sounds with mciSendString? (actually I really want to use MCI Command and MCI sendString as i did in other projects before)
*   Is there another way to include the external function mciSendString so it can handle handles?

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-01T16:56:34.543

这现在对我有用 - 花了一些时间，但也许将来这会帮助其他人：

```
#include "vcclr.h" // compile with /clr(!)
int Player::mciSendStringHandle(String ^ givenHandle)
{
    pin_ptr<const wchar_t> wch = PtrToStringChars(givenHandle);
    return mciSendString(wch, 0, 0, 0);
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-05-07T14:16:25.733

1.  mciSendString 的签名是

    `MCIERROR mciSendString( LPCTSTR lpszCommand, LPTSTR lpszReturnString, UINT cchReturn, HANDLE hwndCallback);`

因此，关于前 2 个参数，在 unicode 中它将是一个 wchar 指针，在多字节中它将是一个 char 指针。是签名。你无法改变这一点，你不应该担心这一点。

1.  `std::wstring someString( L"Foo" );` `someString.append( L"bar ");`

2.  我会使用核心音频 API、waveOut 或 DirectSound 播放声音。但是，不与`mciSendString()`.

3.  恐怕我不明白这个..你能解释得更好吗？

# c# - c# events execution are thread safe?

> ID：16216400
> 
> 赞同：8
> 
> 时间：2013-04-25T13:42:31.680
> 
> 标签：c#, multithreading, events

I read a lot of event and threads discussion, but all of then focus in "what happen" if I unsuscribe from an event and try to call it later. My question is different...what will happen if I have a process in thread A that fires the event "I finish" in millisecond 1, and also have a process in thread B that fires the event "I finish" in millisecond 2.

Both processes are suscribed to the same method to listen and handle the event. So, C# has to execute the method that handles the event 2 times: 1 time for the event fired in thread A, and 1 time for the event fired from thread B.

What will happen?? Does C# locks the method when the "first event coming from thread A" starts execution of the method that handles the event, and unlock the method when it finish execution, thus allowing other waiting "events" to execute the method content??

Or the event fired from thread A will start execution of the method that handles the event, and 1 millisecond later the event that was fired from thread B will also start execution on the same method wihtout notice that currently the method is being executed by other "process"???

Im asking this, because I want to do some file writing in the method that catch the event, but if the method can be executed simultaneously (depending on when the event is fired), I guess I cannot do it here, since the info on the file will be a mix between 2 processes writing to the same file at the same time (not valid information on the file).

My code looks like this (a little bit long, sorry). please note this will not compile, is just a sample to show what Im doing:

```
 public partial class MainForm : Form
{
    FTPClientManager client = null;

    public MainForm()
    {
        InitializeComponent();
    }

    private void btnConnect_Click(object sender, EventArgs e)
    {
        Connect(this.tbFTPServer.Text.Trim());
        this.lstLog.Items.Add("Connected"); //This lstLog is a list box that will have a list of downloaded files from all threads.
    }

    void Connect(string urlStr)
    {
        try {
            client = new FTPClientManager();
            //subscribe to the event
            client.FileDownloadCompleted += new EventHandler<FileDownloadCompletedEventArgs>(client_FileDownloadCompleted);
        }
        catch (Exception ex)
        {
            MessageBox.Show(ex.Message);
        }
    }

    void client_FileDownloadCompleted(object sender, FileDownloadCompletedEventArgs e)
    {
        this.Invoke(new EventHandler<FileDownloadCompletedEventArgs>(
             client_FileDownloadCompletedHandler), sender, e);
    }

    void client_FileDownloadCompletedHandler(object sender, FileDownloadCompletedEventArgs e)
    {
        string log = string.Format("{0} Instance {5} Download from {1} to {2} is completed. Length: {3} Time: {4}. ",
            DateTime.Now, e.ServerPath, e.LocalFile.FullName, e.LocalFile.Length, e.DownloadTime, e.ftpInstance);

        this.lstLog.Items.Add(log);
    }

    private void btnDownload_Click(object sender, EventArgs e)
    {
        client.DownloadFiles();
    }
}   

public class FTPClientManager {
    FTPDownloadClient[] arrayDownloadClient = new FTPDownloadClient[2];        
    public event EventHandler<FileDownloadCompletedEventArgs> FileDownloadCompleted;

    public void DownloadFiles()
    {
        for (int i = 0; i < 2; i++)
        {
            arrayDownloadClient[i] = new FTPDownloadClient();
            //subscribe to the event. each instance of FTPDownloadClient will suscribe to the same event.
            arrayDownloadClient[i].FileDownloadCompleted += new EventHandler<FileDownloadCompletedEventArgs>(downloadClient_FileDownloadCompleted);
        }

        //download one set of files in thread A
        arrayDownloadClient[0].DownloadFiles(list_of_files_to_download);

        //download another set of files in thread B
        arrayDownloadClient[1].DownloadFiles(another_list_of_files_to_download);
    }

    //In theory, the method downloadClient_FileDownloadCompleted will be executed by any instance of FTPDownloadClient
    //running in either thread A or thread B, whichever finish first downloading a file.
    //My question comes in the execution of this method.
    //Lets say the process in thread A finish downloading and fires the event.
    //Lets say the process in thread B finish downloading 1 millisecond after thread A finish, so it also fires the event.
    //how C# manage the execution of the downloadClient_FileDownloadCompleted??
    //does the event coming from thread A will lock the method downloadClient_FileDownloadCompleted, execute it, and when finish execution unlock the method 
    //and allows the event coming from thread B start locking, processing, unlock ??
    //Or the method will be executed "at the same time" (1 millisecond difference) by each event fired from thread A and thread B??
    void downloadClient_FileDownloadCompleted(object sender, FileDownloadCompletedEventArgs e)
    {
        this.OnFileDownloadCompleted(e);
    }

    protected virtual void OnFileDownloadCompleted(FileDownloadCompletedEventArgs e)
    {
        if (FileDownloadCompleted != null)
        {
            //this will fire the event, so the main form will catch it
            //again, this fire can be triggered from process in thread A or from process in thread B
            FileDownloadCompleted(this, e); 
        }
    }
}

public class FTPDownloadClient {
    public event EventHandler<FileDownloadCompletedEventArgs> 
            FileDownloadCompleted;

    public void DownloadFiles(string [] files_to_download)
    {
        ParameterizedThreadStart threadStart =
                new ParameterizedThreadStart(StartDownloadFiles);
            Thread downloadThread = new Thread(threadStart);
            downloadThread.IsBackground = true;
            downloadThread.Start(new object[] { files_to_donwload });
    }

    //This metod will download all the files in the list passed as parameter.
    //Every file downloaded will raise the event FileDownloadComplete, so a message can be added to the lstlog on the main form
    void StartDownloadFiles(object state)
        {
            var paras = state as object[];

            string [] files = paras[0] as string [];

            foreach (var file in files)
            {
                DownloadOneFile(file);
            }
        }

     void DownloadFile(string onefile)
     {
            //Donwload file done here
            var fileDownloadCompletedEventArgs = new FileDownloadCompletedEventArgs
            {
               LocalFile = new FileInfo(destPath),
               ServerPath = onefile,
               DownloadTime = fileDownloadTime.ElapsedMilliseconds.ToString()
            };

            this.OnFileDownloadCompleted(fileDownloadCompletedEventArgs);
     }

     protected virtual void OnFileDownloadCompleted(FileDownloadCompletedEventArgs e)
        {
            if (FileDownloadCompleted != null)
            {
                //the event is fired when the file being downloaded by this thread is finish.
                //so, thread A will fire this event from its current thread
                //and also thread B will fire the same event from its own thread.
                FileDownloadCompleted(this, e); 
            }
        }
} 
```

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2013-04-25T13:48:41.443

C# 不会为你做任何锁定。如果事件可以由多个线程同时引发，则必须编写代码来处理它（如有必要）。

您可以使用[`lock`语句](http://msdn.microsoft.com/en-gb/library/c5kehkcz%28v=vs.71%29.aspx)来防止多个线程执行它：

```
private void MyEventHandler(object sender, EventArgs e)
{
    lock (lockingObject)
    {
        // Handle event here.
        // Only one thread at a time can reach this code.
    }
} 
```

类中`lockingObject`的字段声明如下：

```
private readonly object lockingObject = new object(); 
```

您还必须小心处理*引发*事件的方法中的线程。

假设您的班级中有一个名为`MyEvent`. 你不应该*这样*做：

```
private void RaiseMyEvent()
{
    if (MyEvent != null)                  // {1}
        MyEvent(this, new EventArgs());   // {2}
} 
```

如果另一个线程可以从 中分离`MyEvent`，那么它可能会在第 {1} 行和第 {2} 行之间分离。如果发生这种情况，第 {2} 行将抛出一个空引用异常，因为`MyEvent`它会突然变为空！

正确的方法是：

```
private void RaiseMyEvent()
{
    var handler = MyEvent;

    if (handler != null) 
        handler (this, new EventArgs()); 
} 
```

现在不会发生空引用异常。

但是，请注意，当使用多个线程时，事件处理程序可能会在线程分离*后被*调用！

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:48:54.550

看起来你想使用锁。它可以防止不同的线程同时执行相同的代码。但是，不建议使用 lock 并且应该在大多数情况下避免使用，但在您的情况下看起来还可以。

[锁定语句](http://msdn.microsoft.com/en-us/library/c5kehkcz%28v=vs.110%29.aspx)

我喜欢微软给你提款的例子

```
int Withdraw(int amount)
    {

        // This condition never is true unless the lock statement 
        // is commented out. 
        if (balance < 0)
        {
            throw new Exception("Negative Balance");
        }

        // Comment out the next line to see the effect of leaving out  
        // the lock keyword. 
        lock (thisLock)
        {
            if (balance >= amount)
            {
                Console.WriteLine("Balance before Withdrawal :  " + balance);
                Console.WriteLine("Amount to Withdraw        : -" + amount);
                balance = balance - amount;
                Console.WriteLine("Balance after Withdrawal  :  " + balance);
                return amount;
            }
            else
            {
                return 0; // transaction rejected
            }
        }
    } 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:02:33.757

看来您已经使您的代码线程安全，因为您`Form.Invoke`在方法中使用`client_FileDownloadCompleted`。

确实，该事件`FTPClientManager.FileDownloadCompleted`可能会同时在不同的线程上触发，但`Form.Invoke`会将每个回调序列化回您的主 UI 线程。因此，在您的代码中，您不需要任何锁定，`Form.Invoke`并且`client_FileDownloadCompletedHandler`将始终在您的 UI 线程上调用。

# eclipse - Set Vaadin default browser as Chrome

> ID：16216402
> 
> 赞同：2
> 
> 时间：2013-04-25T13:42:32.823
> 
> 标签：eclipse, browser, vaadin

How to open the Vaadin project in browsers like chrome, safari rather than Eclipse's default browser, when we run/debug a Vaadin project?

I really need it for my project to avoid creating multiple instance for a class when I again open the Vaadin app in Chrome.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T18:46:47.353

如果要从 eclipse 更改浏览器，则必须在 eclipse 中进入“首选项”->“常规”->“Web 浏览器”。在那里，您可以更改 Eclipse 正在使用的浏览器。

# jquery - jQuery Isotope Combination Filters with BBQ Hash History - 在浏览历史时突出显示过滤器选项

> ID：16216404
> 
> 赞同：1
> 
> 时间：2013-04-25T13:42:34.777
> 
> 标签：jquery, jquery-isotope, jquery-bbq

我有一个使用出色的 Isotope 和 BBQ jQuery 插件的页面。我遵循了[组合过滤器并进行了历史](http://isotope.metafizzy.co/tests/combo-sort-history.html)演示/测试，但无法弄清楚如何在单步浏览页面历史记录时选择过滤器（如常规[哈希历史](http://isotope.metafizzy.co/demos/hash-history.html)演示所示）。

这是我完整的js代码：

```
 // modified Isotope methods for gutters in masonry
$.Isotope.prototype._getMasonryGutterColumns = function() {
    var gutter = this.options.masonry && this.options.masonry.gutterWidth || 0;
        containerWidth = this.element.width();

    this.masonry.columnWidth = this.options.masonry && this.options.masonry.columnWidth ||
                  // or use the size of the first item
                  this.$filteredAtoms.outerWidth(true) ||
                  // if there's no items, use size of container
                  containerWidth;

    this.masonry.columnWidth += gutter;

    this.masonry.cols = Math.floor( ( containerWidth + gutter ) / this.masonry.columnWidth );
    this.masonry.cols = Math.max( this.masonry.cols, 1 );
};

$.Isotope.prototype._masonryReset = function() {
    // layout-specific props
    this.masonry = {};
    // FIXME shouldn't have to call this again
    this._getMasonryGutterColumns();
    var i = this.masonry.cols;
    this.masonry.colYs = [];
    while (i--) {
      this.masonry.colYs.push( 0 );
    }
};

$.Isotope.prototype._masonryResizeChanged = function() {
    var prevSegments = this.masonry.cols;
    // update cols/rows
    this._getMasonryGutterColumns();
    // return if updated cols/rows is not equal to previous
    return ( this.masonry.cols !== prevSegments );
};

$(function(){
    var wait = $(".loading");
    wait.animate({opacity: 0}, 500, 'linear').animate({opacity: 1}, 500, 'linear');

    var $container = $('#container');
    var initialOptions = {
        filter: '*',
        itemSelector : '.item',
        sortBy: 'random',
        layoutMode: 'masonry',
        masonry: {
            columnWidth: 170,
            gutterWidth: 6.6
        }
    };

    $container.imagesLoaded( function(){

        // build a hash for all our options
        var options = {
            // special hash for combination filters
            comboFilters: {}
        };

        var $optionSets = $('#options').find('.option-set'),
            isOptionLinkClicked = false;

        // filter buttons
        $optionSets.find('a').click(function(){
        //$('.filter').on( 'click', 'a', function( event ) {
            event.preventDefault();
            var $this = $(this);
            // don't proceed if already selected
            if ( $this.hasClass('selected') ) {
              return false;
            }

            selectLink( $this );

            var $optionSet = $this.parents('.option-set');
            var group = $optionSet.attr('data-filter-group');
            options.comboFilters[ group ] = $this.attr('data-filter-value');
            $.bbq.pushState( options );
            isOptionLinkClicked = true;
        });

        function selectLink( $link ) {
            $link.parents('.option-set').f

ind('.selected').removeClass('selected');
            $link.addClass('selected')
        }

        var location = window.location;
        var $comboFilterOptionSets = $('.combo-filters .option-set');
        var hashChanged = false;

        function getComboFilterSelector( comboFilters ) {
            // build filter
            var isoFilters = [];
            var filterValue, $link, $optionSet;
            for ( var prop in comboFilters ) {
                filterValue = comboFilters[ prop ];
                isoFilters.push( filterValue );
                // change selected combo filter link
                $optionSet = $comboFilterOptionSets.filter('[data-filter-group="' + prop + '"]');
                $link = $optionSet.find('a[data-filter-value="' + filterValue + '"]');
                //selectLink( $link );
            }
            var selector = isoFilters.join('');
            return selector;
        }

        $( window ).on( 'hashchange', function() {
            //var aniEngine = hashChanged ? 'best-available' : 'none'
            //var isoOptions = $.extend( {}, setupOptions, options );

            if ( location.hash ) {
                $.extend( options, $.deparam.fragment( location.hash, true ) );
            }
            // build options from hash and initial options
            var isoOptions = $.extend( {}, initialOptions, options );

            if ( options.comboFilters ) {
                isoOptions.filter = getComboFilterSelector( options.comboFilters );
            }

            $container.isotope( isoOptions );

            // if option link was not clicked
            // then we'll need to update selected links
            if ( !isOptionLinkClicked ) {
                // iterate over options
                var hrefObj, hrefValue, $selectedLink;
                for ( var key in options ) {
                    hrefObj = {};
                    hrefObj[ key ] = options[ key ];
                    // convert object into parameter string
                    // i.e. { filter: '.inner-transition' } -> 'filter=.inner-transition'
                    hrefValue = $.param( hrefObj );
                    alert(hrefValue);
                    // get matching link
                    $selectedLink = $optionSets.find('a[href="#' + hrefValue + '"]');
                    selectLink( $selectedLink );
                }
            }

            isOptionLinkClicked = false;
            hashChanged = true;
        })

        // trigger hashchange to capture initial hash options
        .trigger( 'hashchange' );
        wait.fadeOut(300);
        $('.item').delay(800).fadeIn(500);

    });
}); 
```

我的问题在这方面：

```
if ( !isOptionLinkClicked ) {
                // iterate over options
                var hrefObj, hrefValue, $selectedLink;
                for ( var key in options ) {
                    hrefObj = {};
                    hrefObj[ key ] = options[ key ];
                    // convert object into parameter string
                    // i.e. { filter: '.inner-transition' } -> 'filter=.inner-transition'
                    hrefValue = $.param( hrefObj );
                    alert(hrefValue);
                    // get matching link
                    $selectedLink = $optionSets.find('a[href="#' + hrefValue + '"]');
                    selectLink( $selectedLink );
                }
            } 
```

# zurb-foundation - Zurb Foundation Switch 控制如何工作

> ID：16216408
> 
> 赞同：5
> 
> 时间：2013-04-25T13:42:39.040
> 
> 标签：zurb-foundation

我最近开始将 Zurb Foundation 4 用于 Asp MVC 网站，但我不太了解开关控制应该如何工作。文档不多说[http://foundation.zurb.com/docs/components/switch.html](http://foundation.zurb.com/docs/components/switch.html)

```
<div class="switch">
  <input id="x" name="switch-x" type="radio" checked>
  <label for="x" onclick="">Off</label>

  <input id="x1" name="switch-x" type="radio">
  <label for="x1" onclick="">On</label>

  <span></span>
</div> 
```

我正在使用这个示例代码，当我点击开关时，html 没有任何变化。我认为“checked”属性会出现在第二个输入上，但事实并非如此。

*   如何检测单击了哪个单选按钮？

当我发布表单时，“switch-x”变量包含值“on”，无论开关在什么位置。

我尝试在标签上添加一个 onclick 事件，但它没有被触发，因为某些东西似乎与标签重叠。

我正在使用基金会的 javascript，页面上没有任何错误。

我肯定错过了一些东西......有什么想法吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-08-28T14:45:45.467

> 当我发布表单时，“switch-x”变量包含值“on”，无论开关在什么位置。

您需要在输入字段中添加一个值以具有 $_POST["switch-x"] 值，如下所示：

```
<div class="switch">
  <input id="x" name="switch-x" type="radio" value="0" checked>
  <label for="x" onclick="">Off</label>

  <input id="x1" name="switch-x" type="radio" value="1">
  <label for="x1" onclick="">On</label>

  <span></span>
</div> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-29T10:31:39.447

> 如何检测单击了哪个单选按钮？

您的`id`每个无线电输入都有一个，因此您可以使用它们：

```
$('input[name=switch-x]:checked').attr('id'); 
```

这会给你一个`x`或`x1`。现在这取决于您将如何使用它。但是，如果您将它作为布尔值传递，我认为您会这样做，那么您可以简单地执行以下操作：

```
var isOn = $('input[name=switch-x]:checked').attr('id') == 'x1'; 
```

或者只是简单地

```
var isOn = $('#x1').is(':checked'); 
```

[在此处查看实际操作](http://jsfiddle.net/KYPh5/)

# typo3 - TYPO3：BE用户只能看到他们创建的记录吗？

> ID：16216410
> 
> 赞同：0
> 
> 时间：2013-04-25T13:42:50.373
> 
> 标签：typo3

是否有可能通过扩展或其他方式使 BE 用户只能看到某些记录类型，前提是这些记录是由他们自己创建的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T17:11:20.010

什么样的记录？

如果对于示例新闻或来自某个扩展的其他记录，最简单的方法是`sysfolder`为每个用户单独创建，以便您可以使用`WEB`>`Access`模块来禁用/启用可见性。如果你想在一页上为不同的用户显示不同的记录，不编写自己的BE模块将是相当困难的。

如果您只有几个 BEuser - 手动执行，否则我建议编写模块。

提示：它看起来`Extbase`比老派 PI-way 更容易创建 BE 模块（我的个人经验）。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T21:57:45.190

为此目的进行了扩展：

[http://typo3.org/extensions/repository/view/maja_becacl](http://typo3.org/extensions/repository/view/maja_becacl)

尽管它的最后一次更新是从 2007 年开始的，所以它可能无法开箱即用。但是您可以将其用作您自己的解决方案的基础。

# c++ - 找不到未处理异常的原因

> ID：16216426
> 
> 赞同：0
> 
> 时间：2013-04-25T13:43:41.897
> 
> 标签：c++, parsing, exception, iostream

我正在为 .obj 文件编写解析器，并且在此代码块的 for 循环中某处引发了未处理的异常，我无法找到它。Visual Studio 错误消息说它位于 ntdll.dll 中。然后代码在 ostream 文件中中断。当我使用断点时，程序在多次迭代之前不会崩溃。

```
//Intitialising index array for that part and returning to the start of the 
vertex defining period
//iCount is the number of indices that are being read in
//Position is the saved position within the .txt file that has been reached
data[k].indices = new triangle[iCount];
data[k].noIndices = iCount;
data[k].verTex = new point3D[iCount];

int a,b,c,d,e,f;

int check = 0;
inFile.seekg(position - 1);

cout << "Icount" << iCount << endl;

//Getting index data
for(int j = 0; j < iCount; j++)
{
    char buff[40];
    inFile.getline(buff, 40);
    int matched = sscanf(buff, "f %d/%d %d/%d %d/%d", &a, &b, &c, &d, &e, &f);

    //Zero align the indices and store the data
    data[k].verTex[j].x = b - 1;
    data[k].verTex[j].y = d - 1;
    data[k].verTex[j].z = f - 1;

    //Zero align the indices and store the data
    data[k].indices[j].a = a - 1;
    data[k].indices[j].b = c - 1;
    data[k].indices[j].c = e - 1;
} 
```

编辑：添加此代码块后，将*失败*写入控制台，直到堆损坏。这是因为 sscanf() 如果在没有断点的情况下运行，则在第一次迭代后返回 -1

```
if(matched != 6)
{
    cout << "fail";
} 
```

# .net - .NET 方法用 Long 类型限定符解析字符串

> ID：16216427
> 
> 赞同：1
> 
> 时间：2013-04-25T13:43:43.160
> 
> 标签：.net, parsing, int64

我从带有长类型限定符的第 3 方软件中得到一个字符串，例如“1L”。我想将其解析为 Int64，但 Int64.TryParse 无法将其识别为 Int64。有没有一种 .NET 方法可以安全地做到这一点？我想避免解析自己...

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:53:25.967

在最简单的情况下，您可以这样做：

```
string sNum = "1L";
int pos = sNum.IndexOf('L');
if (pos == sNum.Length-1)
{
    sNum = sNum.Substring(0, sNum.Length-1);
}
long num = int64.Parse(sNum); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T15:19:54.223

通过浏览，我可以推荐的最好的方法是使用正则表达式来提取或删除非数字字符，然后使用框架进行解析（Convert、Parse 或 TryParse 等）。

我从以下问题之一中偷走了这个，希望它有效：

```
var originalString = "9L";
var result = Convert.ToInt64(Regex.Replace(originalString, "[^0-9]", String.Empty)); 
```

请参阅这些问题以获取一些示例（以及一些，错误，...有趣的替代方法）：

*   [从中间有非数字的字符串中解析一个数字](https://stackoverflow.com/questions/3204673/parse-number-from-string-value-in-c-sharp)
*   [字符串解析，提取数字和字母](https://stackoverflow.com/questions/734937/string-parsing-extracting-numbers-and-letters)

# jquery - Jquery 在 Firefox、IE 和 chrome 中运行 mp4 文件

> ID：16216428
> 
> 赞同：0
> 
> 时间：2013-04-25T13:43:48.987
> 
> 标签：jquery, html, mp4

您好我正在尝试在 IE、chrome 和 Firefox 中播放 mp4 文件。它在 IE 和 chrome 中运行良好，但在 Firefox 中运行良好。我知道 Firefox 不支持 MP4。但要求只是播放 mp4。任何人都可以与我分享 jquery 以使其成为可能。提前致谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:46:49.873

对于 Firefox，我可以告诉你，如果没有 Flash 之类的插件，这是不可能的。

关于 chrome AFIK 仅支持 MP4 的一个子集，您需要检查是否使用了正确的色彩空间。

IE9+ 具有 AFIK 原生支持，您可以在其中包含带有视频 HTML5 标签的简单视频。

您还可以使用[jw-player](http://www.longtailvideo.com/jw-player/)，它结合了两个世界：HTML5 和 Flash。

# javascript - 部分之间的 Ascensor 插件 div

> ID：16216429
> 
> 赞同：0
> 
> 时间：2013-04-25T13:43:49.083
> 
> 标签：javascript, jquery, css

我正在为我的网站使用 ascensor 插件。我有这样的东西

```
 <section>Section 1</section>
 <section>Section 2</section> 
```

我想要做的是在部分之间放置一个 div，但 ascensor 会获取屏幕的高度和宽度，并根据屏幕拉伸部分，这会导致 div 不出现。所以我所做的是创建：

```
 <section>Section 1</section>
 <section class="slicer" style="height:400px !important;">SLICER</section>
 <section>Section 2</section> 
```

它有效，但现在我在部分和切片器之间有空间。关于如何摆脱那个空间的任何想法？

# javascript - jQuery插件，JavaScript语法，级联下拉MVC4后续，多级级联

> ID：16216433
> 
> 赞同：0
> 
> 时间：2013-04-25T13:44:03.480
> 
> 标签：javascript, asp.net-mvc-4

首先，这篇文章[在 MVC 3 Razor 视图中的级联下拉列表](https://stackoverflow.com/questions/4458970/cascading-drop-downs-in-mvc-3-razor-view)非常有帮助。我已经使用了初始语法，并且已经让我的级联下拉菜单工作了。我在控制器中调用的函数中添加了更多参数，以更改列表内容。这是一个不使用“插件”的视图。

```
@model HolterManagementUI.Models.CrudUserViewModel
@{
ViewBag.Title = "Edit";
}
@Scripts.Render("~/bundles/jquery")
<script type="text/javascript">
$(function () {
    $('#SelectedDivisionID').change(function () {
        var selectedDivisionID = $(this).val();
        $.getJSON('@Url.Action("Regions")', { divisionId: selectedDivisionID, isActive: true }, function (regions) {
            var regionsSelect = $('#SelectedRegionID');
            regionsSelect.empty();
            $.each(regions, function (index, region) {
                regionsSelect.append(
                    $('<option/>')
                        .attr('value', region.ID)
                        .text(region.Description)
                );
            });
         var locationsSelect = $('#SelectedLocationID');
         locationsSelect.empty();
        });
    });

    $('#SelectedRegionID').change(function () {
        var selectedRegionID = $(this).val();
        $.getJSON('@Url.Action("Locations")', { regionId: selectedRegionID, isActive: true }, function (locations) {
            var locationsSelect = $('#SelectedLocationID');
            locationsSelect.empty();
            $.each(locations, function (index, location) {
                locationsSelect.append(
                    $('<option/>')
                        .attr('value', location.ID)
                        .text(location.Description)
                );
            });
        });
    });
});
</script>
<h2>Edit User</h2>
@using (Html.BeginForm())
{

<table>
<tr>
    <td>LanID</td>
    <td>
    @Html.HiddenFor(h => h.ID)
    @Html.EditorFor(h => h.LanID)</td>
</tr>
<tr>
    <td>Division</td>
    <td>
    @Html.DropDownListFor(h => h.SelectedDivisionID, new SelectList(Model.Divisions, "ID", "Description", Model.SelectedDivisionID.ToString()))
    </td>
</tr>
<tr>
    <td>Region</td>
    <td>
    @Html.DropDownListFor(h => h.SelectedRegionID,  new SelectList(Model.Regions, "ID", "Description", Model.SelectedRegionID.ToString()))
    </td>
</tr>
<tr>
    <td>Location</td>
    <td>
    @Html.DropDownListFor(h => h.SelectedLocationID,  new SelectList(Model.Locations, "ID", "Description", Model.SelectedLocationID.ToString()))
    </td>
</tr>
<tr>
    <td>Is Active</td>
    <td>@Html.EditorFor(h => h.IsActive)</td>
</tr>
</table>

<div class="buttongroup" align="left" style="margin-top: 50px">
    <input type="submit" name="submitButton" value="Save" />
    <button type="button" onclick="location.href='@Url.Action("List")'">Cancel</button>
</div>
} 
```

我不确定如何做的是如何在重构部分中添加 JavaScript 插件，然后如何修改它以便我可以传递多个参数。我试图将代码添加到我的项目中的一个单独的 JavaScript 文件中并包含它，但是“接线”总是中断。

这是我单独的 JavaScript 文件：

```
/*!
* DropDowns.js
* Script to manage Cascading of dropdowns
* 
* From stackoverflow.com
* https://stackoverflow.com/questions/4458970/cascading-drop-downs-in-mvc-3-razor-view
*/
(function ($) {
$.fn.cascade = function (options) {
    var defaults = {};
    var opts = $.extend(defaults, options);

    return this.each(function () {
        $(this).change(function () {
            var selectedValue = $(this).val();
            var params = {};
            params[opts.paramName] = selectedValue;
            $.getJSON(opts.url, params, function (items) {
                opts.childSelect.empty();
                $.each(items, function (index, item) {
                    opts.childSelect.append(
                        $('<option/>')
                            .attr('value', item.Id)
                            .text(item.Name)
                       );
                    });
                });
            });
        });
    };
})(jQuery); 
```

这是我尝试使用 DropDowns.js 文件的观点：

```
@model HolterManagementUI.Models.CrudUserViewModel
@{
ViewBag.Title = "Create";
}

@Scripts.Render("~/bundles/jquery")
@Scripts.Render("~/scripts/DropDowns.js")

<script type="text/javascript">
$(function () {
    $('#SelectedDivisionID').cascade({
        url: '@Url.Action("Regions")',
        paramName: 'divisionId',
        childSelect: $('#SelectedRegionID')
    });

    $('#SelectedRegionID').cascade({
        url: '@Url.Action("Locations")',
        paramName: 'regionId',
        childSelect: $('#SelectedLocationID')
    });
});
</script>
<h2>Create a User</h2>
@using (Html.BeginForm())
{

<table>
<tr>
    <td>LanID</td>
    <td>
    @Html.HiddenFor(h => h.ID)
    @Html.EditorFor(h => h.LanID)</td>
</tr>
<tr>
    <td>Division</td>
    <td>
    @Html.DropDownListFor(h => h.SelectedDivisionID, new SelectList(Model.Divisions, "ID", "Description"))
    </td>
</tr>
<tr>
    <td>Region</td>
    <td>
    @Html.DropDownListFor(h => h.SelectedRegionID,  Enumerable.Empty<SelectListItem>())
    </td>
</tr>
<tr>
    <td>Location</td>
    <td>
    @Html.DropDownListFor(h => h.SelectedLocationID, Enumerable.Empty<SelectListItem>())
    </td>
</tr>
</table>

<div class="buttongroup" align="left" style="margin-top: 50px">
    <input type="submit" name="submitButton" value="Save" />
    <button type="button" onclick="location.href='@Url.Action("List")'">Cancel</button>
</div>
} 
```

那么，1.如何让插件代码工作？2.如何在插件方法中添加更多参数进行级联？3\. 这值得吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T18:47:55.627

首先，对于您损坏的插件，我认为您正在尝试错误地渲染 dropdown.js 的脚本，因为当我根据您的语法认为它不是您的捆绑包的一部分时，您将其视为捆绑包：

改变：

```
@Scripts.Render("~/scripts/DropDowns.js") 
```

到：

```
<script type="text/javascript" src="@Url.Content("~/Scripts/DropDown.js")"></script> 
```

其次，您的第二个参数似乎是硬编码的，为什么不将它作为您为插件生成的 URL 的一部分传递呢？

```
$('#SelectedDivisionID').cascade({
        url: '@Url.Action("Regions", "Controller", new{isActive = true})',
        paramName: 'divisionId',
        childSelect: $('#SelectedRegionID')
    }); 
```

第三，如果您在多个地方使用此代码，那么是的，绝对不必一遍又一遍地编写您的第一个代码块。这降低了复杂性和故障点，并且应该加快项目中级联下拉菜单的部署。

# c# - `ImmutableSortedSet` 和 fsharp `Set` 有什么区别？

> ID：16216439
> 
> 赞同：10
> 
> 时间：2013-04-25T13:44:20.317
> 
> 标签：c#, .net, data-structures, f#, binary-search-tree

[BCL 引入了一组不可变集合](http://blogs.msdn.com/b/bclteam/archive/2012/12/18/preview-of-immutable-collections-released-on-nuget.aspx)

我想知道`ImmutableSortedSet`和原生 FSharp有什么区别`Set`？似乎两者的性能特征相似。我还看到某处`SortedSet`被实现为红黑树，所以我猜`ImmutableSortedSet`也是这样。

fsharp 的内部实现是什么`map`？是此处声称的[红黑树](http://en.wikibooks.org/wiki/F_Sharp_Programming/Sets_and_Maps#The_Set_Module)还是此处发现的[AVL 树？](http://fdatamining.blogspot.co.uk/2010/08/reading-f-projects-part-ii-f-set.html)

此外，为什么 MSDN 文档没有明确说明图书馆馆藏的实际数据结构是什么？我知道这些是实现细节并且即将改变。我的观点是，如果他们不想将库数据类型绑定到某种类型的众所周知的数据结构，他们至少应该提供所有方法性能特征的摘要，就复杂性而言？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2013-04-25T13:50:33.677

F# Set 和 Map 类型使用 AVL 树实现。

我不知道 MSDN 文档，您必须向 F# 团队询问 :)

无论如何，红黑树和 AVL 树的主要操作具有相同的计算复杂度。在实践中，它们具有不同的性能特征，可能会导致您为特定应用程序选择一种或另一种——红黑树具有更快的插入/删除速度，因为它们不需要对树进行尽可能多的重新平衡，而是检索由于它为插入/删除执行的额外平衡，在 AVL 树中更快。我想这就是为什么为 F# Map 和 Set 实现选择 AVL 树的原因—— Map/Set 通常创建一次（即不修改）然后重复查询。

[https://en.wikipedia.org/wiki/Red%E2%80%93black_tree](https://en.wikipedia.org/wiki/Red%E2%80%93black_tree)

[https://en.wikipedia.org/wiki/AVL_tree](https://en.wikipedia.org/wiki/AVL_tree)

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-12-22T01:03:15.017

> 我想知道 ImmutableSortedSet 和原生 FSharp Set 有什么区别？

它们通常非常相似。主要区别在于 F#`Set`支持快速集理论运算（并、交和差）。

这是一个简单的 F# 程序，用于测量一些常见操作的性能：

```
open System.Collections.Immutable

while true do
  do
    let timer = System.Diagnostics.Stopwatch.StartNew()
    let cmp = LanguagePrimitives.FastGenericComparer<int>
    let mutable s1 = ImmutableSortedSet.Create<int>(cmp)
    let mutable s2 = ImmutableSortedSet.Create<int>(cmp)
    for i in 1..1000000 do
      s1 <- s1.Add i
    for i in 1000000..2000000 do
      s2 <- s2.Add i
    printfn "BCL ImmutableSortedSet: add in %fs" timer.Elapsed.TotalSeconds
    timer.Restart()
    for _ in 1..10 do
      for i in 1..1000000 do
        ignore(s1.Contains i)
    printfn "BCL ImmutableSortedSet: contains in %fs" timer.Elapsed.TotalSeconds
    timer.Restart()
    let s = s1.Union s2
    printfn "BCL ImmutableSortedSet: union in %fs" timer.Elapsed.TotalSeconds

  do
    let timer = System.Diagnostics.Stopwatch.StartNew()
    let mutable s1 = Set.empty
    let mutable s2 = Set.empty
    for i in 1..1000000 do
      s1 <- s1.Add i
    for i in 1000000..2000000 do
      s2 <- s2.Add i
    printfn "F# Set: %fs" timer.Elapsed.TotalSeconds
    timer.Restart()
    for _ in 1..10 do
      for i in 1..1000000 do
        ignore(s1.Contains i)
    printfn "F# Set: contains in %fs" timer.Elapsed.TotalSeconds
    timer.Restart()
    let s = Set.union s1 s2
    printfn "F# Set: union in %fs" timer.Elapsed.TotalSeconds 
```

在我的机器上，我得到：

```
 BCL ImmutableSortedSet  F# Set
add                2.6s          3.0s
contains           2.1s          1.9s
union              1.1s          0.00004s 
```

因此，F#`Set`的构建速度稍慢，搜索速度稍快，但对于集合论并集运算来说要快几个数量级。

> fsharp map的内部实现是什么？是此处声称的红黑树还是此处发现的 AVL 树？

正如您的两个链接所述，F# 使用 AVL 树。

这实际上与上述性能数据有关。AVL 树包含每个分支中子树的最大高度，因此允许重新平衡子树而无需检查整个子树。相比之下，红黑树在每个分支中都包含一位数据，因此重新平衡子树需要遍历整个树，这会逐渐变慢。用外行的话来说，两个相同大小的非重叠集合的并集只需要创建一个包含两个现有树的新分支。请注意，`Union`BCL API 中的 甚至无法表达这一点：它处理的是抽象`IEnumerable`而不是具体的集合。

> 此外，为什么 MSDN 文档没有明确说明图书馆馆藏的实际数据结构是什么？我知道这些是实现细节并且即将改变。我的观点是，如果他们不想将库数据类型绑定到某种类型的众所周知的数据结构，他们至少应该提供所有方法性能特征的摘要，就复杂性而言？

我同意文档中的复杂性会很好。

# android - Android中不同的左滑动面板

> ID：16216440
> 
> 赞同：2
> 
> 时间：2013-04-25T13:44:20.917
> 
> 标签：android, android-layout

我正在尝试从我在互联网上看到的代码创建自己的滑动面板菜单。[我想要这里](http://postimg.org/image/ulbpbkoat/)提供的以下概念。

我尝试查看实现滑动面板菜单的不同库。但是，我看不到他们将面板添加到屏幕的方式，它是覆盖层还是移动整个屏幕的面板。

我想我知道如何制作这种类型的菜单，我只是不知道如何将这样的东西添加到活动中。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:36:24.490

我很久以前就实现了这个，没有任何库。

这可以通过以下方式完成

1.  制作一个布局文件，将滑块附加到活动的标题

将这两个布局相对放置，标题应该在面板的右侧最初面板是不可见的......所以当你点击标题上的按钮时，它会移动并且面板进入......

所以逻辑是整个标题移动（其剩余边距将增加到 50%）和 panel.setvisibility(visible);

50% 我的意思是把它移到屏幕宽度/2 所以就是这样......只有改变边距可以帮助你得到这个

# c# - C# Console.Write 在文本文件中打印出来？

> ID：16216441
> 
> 赞同：0
> 
> 时间：2013-04-25T13:44:21.503
> 
> 标签：c#, console, console-application

我可以制作这样的代码以使用 Console.Write 在文本文件中打印出来吗？

```
 Console.Write(" Enter your ID: ");
 int ID = int.Parse(Console.ReadLine());
 Console.Write(" Enter your Name: ");
 string Name = Console.ReadLine();
 Console.WriteLine(" Thank you! your logged in as" +Name+ +ID); 
```

请帮忙！

提前致谢。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T13:47:14.100

我不知道为什么您需要在特定情况下写入文件，但如果您想`Console.WriteLine`写入文件，您可以使用`Console.SetOut(sw);`

```
Console.WriteLine("Hello World");
FileStream fs = new FileStream("Test.txt", FileMode.Create);
StreamWriter sw = new StreamWriter(fs);
Console.SetOut(sw);
Console.WriteLine("Hello file");
sw.Close(); 
```

# javascript - 如何更改使用功能选择的单选按钮？

> ID：16216446
> 
> 赞同：0
> 
> 时间：2013-04-25T13:44:29.633
> 
> 标签：javascript, function, radio-button, checked

我有一个包含 3 个选项的单选组，默认情况下选择第一个选项。我想在单击另一个项目时选择第二个项目。这就是我所拥有的...

```
function selectSS()
{
    document.getElementById("width").value=16;
    document.getElementById("gauge_1").checked;
} 
```

然后我使用 onClick 调用该函数，宽度的值更改为 16，就像它应该的那样，但是我如何让它选择带有 id gauge_1 的单选按钮？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:45:36.017

您必须**将**其`checked`状态设置为`true`，因此请使用：

```
document.getElementById("gauge_1").checked = true; 
```

在你的代码中，你**得到**它并且什么都不做。

参考：

*   [https://developer.mozilla.org/en-US/docs/HTML/Element/Input#attr-checked](https://developer.mozilla.org/en-US/docs/HTML/Element/Input#attr-checked)

# apache - 在可操作的 Web 实例中查找 Apache 内存泄漏

> ID：16216447
> 
> 赞同：3
> 
> 时间：2013-04-25T13:44:32.003
> 
> 标签：apache, debugging, memory-leaks

我正在运行一个大量使用的 apache 服务器，它承载网页、下载、svn（使用 DAV svn）和一个 Trac 实例（使用 mod_python）。Mod_deflate 用于为用户节省带宽。服务器存在严重的内存问题。通常 24 小时后，它比重新启动后需要多 2 GB 的内存。

我在 trac 系统中安装了垃圾收集器状态监视器，这表明 python（以及 trac）没有内存泄漏。

现在我有点迷失了如何继续找到问题。

任何帮助和建议在哪里寻找以及如何找到内存增加的原因都会有所帮助。LogLevel 设置为调试，但我在日志中没有发现任何有用的信息。

系统使用 Apache 2.2.22 worker-mpm。

目前 apache 每 24 小时重新启动一次作为解决方法。如果我为（例如 500）设置一个值`MaxRequestsPerChild`，它似乎很快就会失去响应（挂起连接？）。

# ektron - Ektron 会员修改密码

> ID：16216450
> 
> 赞同：1
> 
> 时间：2013-04-25T13:44:43.520
> 
> 标签：ektron

爱克创 8.0.1 SP1

我找到了这个解决方案（[Ektron 用户更改密码？](https://stackoverflow.com/questions/912507/ektron-user-change-password)），但它似乎适用于不同版本的 Ektron。

在我的网站上，为他们设置了会员帐户，我正在使用自定义个人资料页面来允许他们更改信息。最后一点是允许他们将密码更改为他们选择的密码。我尝试搜索旧的 Ektron 论坛，但搜索功能似乎已损坏/禁用。

有人有正确的代码吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:04:11.390

我不再寻找特定的 API 调用来更改密码，而是找到了一些我在其他地方使用的代码来获取 UserData，将其更改并保存回来。这很完美，所以我想我会分享。

```
protected void Page_Init(object sender, EventArgs e)
{
    _UserApi = new Ektron.Cms.API.User.User();
    if (_UserApi.UserId > 0)
    {
        _UserData = _UserApi.GetActiveUser(_UserApi.UserId, false);
    }
}

protected void btnSubmit_Click(object sender, EventArgs e)
{

    // put validation code here

    try
    {
        _UserData.Password = txtPassword.Text.Trim();
        _UserApi.UpdateUser(_UserData);
    }
    catch (Exception ex)
    {
        // handle
    }
} 
```

# php - Fineuploader 结合编辑页面

> ID：16216455
> 
> 赞同：0
> 
> 时间：2013-04-25T13:44:54.583
> 
> 标签：php, jquery, html, fine-uploader

我将fineuploader与php结合使用。我用它将图像添加到博客文章中。添加新帖子时，信息将存储在数据库中。每个帖子还有一个编辑页面。在此编辑页面上，属于该帖子的图像应该可以通过 Fineuploader 进行编辑。

有谁知道这是否有一个功能？如果有什么方法可以将现有图像解析到 Fineuploader 中？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:27:22.660

Fine Uploader 不是文件管理器，它是一个跨浏览器的上传库。您可以启用[删除文件功能](http://blog.fineuploader.com/2013/01/delete-uploaded-file-in-33.html)并要求 Fine Uploader 为当前 Fine Uploader 会话期间已上传的文件发送 DELETE 请求。如果您想删除从以前的 Fine Uploader 实例上传的文件，您需要在您的 Web 应用程序中通过对您的服务器进行简单的 ajax 调用来命令删除这些文件来解决此问题。

# java - 对泛型 SparseArray 的引用 应该参数化

> ID：16216456
> 
> 赞同：0
> 
> 时间：2013-04-25T13:44:56.960
> 
> 标签：java, android

我试着用谷歌搜索这个警告，似乎找到了其他警告，但似乎有点不对劲。

> 类型安全：方法 put(int, Object) 属于原始类型 SparseArray。对泛型类型 SparseArray 的引用应该被参数化

有人可以向我解释这个警告吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:46:37.673

`SparseArray`适用于[Java 泛型](http://en.wikipedia.org/wiki/Generics_in_Java)。理想情况下，您应该将其声明为`SparseArray<WhateverYourValueClassIs>`然后存储`WhateverYourValueClassIs`via的实例`put()`。

# c# - My application will not automatically start with windows - what is wrong here?

> ID：16216458
> 
> 赞同：0
> 
> 时间：2013-04-25T13:44:59.850
> 
> 标签：c#, .net, registry, admin, startup

I am using the following code to manage the automatic startup of my application. The application has been set up to require admin privileges, and indeed, does ask for them.

```
RegistryKey rkApp = Registry.CurrentUser.OpenSubKey("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true);
if (checkRunOnStartup.Checked)
{
    rkApp.SetValue("MyApp", Application.ExecutablePath.ToString());
}
else
{
    rkApp.DeleteValue("MyApp", false);
} 
```

This does not work on any system I have tested on, except from my development machine. What am I doing wrong here?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:04:56.230

您可以在 Windows 启动文件夹中创建/删除应用程序的快捷方式，而不是编写 reg 键。Environment.SpecialFolder.Startup 将返回该路径。如果您在 reg 键选项上死心塌地，这里是每个[DotnetThoughts](http://www.dotnetthoughts.net/run-the-application-at-windows-startup/)的代码片段。似乎主要区别在于他放弃了 .ToString()。

```
private void RegisterInStartup(bool isChecked)
{
   RegistryKey registryKey = Registry.CurrentUser.OpenSubKey
        ("SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Run", true);
   if (isChecked)
   {
       registryKey.SetValue("ApplicationName", Application.ExecutablePath);
   }
   else
   {
     registryKey.DeleteValue("ApplicationName");
   }
} 
```

# python - How to replace the line in which I'm currently?

> ID：16216459
> 
> 赞同：2
> 
> 时间：2013-04-25T13:45:01.973
> 
> 标签：python

I have a python code like this:

```
with open('myFile') as f:
        next(f) # skip first line
        for line in f:
            items = line.split(';')
            if len(items) < 2:
                # now I want to replace the line with s.th. that i write 
```

how to replace the line with s.th. that I want to write?

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T13:52:39.863

Use the `fileinput` module's inplace functionality. Refer ***Optional in-place filtering*** section at [fileinput](http://docs.python.org/2/library/fileinput.html). Something like this:

```
import fileinput
import sys
import os

for line_number, line in enumerate(fileinput.input('myFile', inplace=1)):
  if line_number == 0:
    continue
  items = line.split(';')
  if len(items) < 2:
    sys.stdout.write('blah' + os.linesep)
  else:
    sys.stdout.write(line) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:58:30.463

以模式打开文件`r+`，首先读取列表中的内容，然后在截断后将新数据写回文件。

> 'r+' 打开文件进行读写

如果文件很大，最好先将其写入新文件，然后重命名。

```
with open('myFile','r+') as f:
        data=f.readlines()[1:]
        f.truncate(0)          #this will truncate the file
        f.seek(0)             #now file pointer goes to start of the file
        for line in data:     #now write the new data
            items = line.split(';') 
            if len(items) < 2:
                # do something here
            else:
                f.write(line) 
```

# eclipse-plugin - 将码头输出打印到 Eclipse 控制台窗口

> ID：16216461
> 
> 赞同：2
> 
> 时间：2013-04-25T13:45:04.660
> 
> 标签：eclipse-plugin, jetty, embedded-jetty

我正在开发一个 Eclipse 插件，其中包括启动嵌入式码头服务器，即

```
Server jetty = new Server(8080);
WebAppContext webapp = new WebAppContext("webapp", "/webapp");
webapp.setWar("path/to/webapp);
jetty.setHandler(webapp);
jetty.start();
Program.launch("http://localhost:8080/webapp"); 
```

我想在包含我的插件的 Eclipse 的控制台窗口中查看码头的输出。相反，jetty 的输出出现在我正在开发插件的 Eclipse 中。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:06:32.363

查看 Jetty 的 Logging 框架。

首先创建一个[`org.eclipse.jetty.util.log.Logger`](http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/util/log/Logger.html)可以写入您选择的 Eclipse 控制台窗口的自定义。

示例实现：

*   Jetty 本身使用的默认[StrErrLog.java 。](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-util/src/main/java/org/eclipse/jetty/util/log/StdErrLog.java?id=jetty-9.0.2.v20130417)
*   [SLf4jLog.java](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-util/src/main/java/org/eclipse/jetty/util/log/Slf4jLog.java?id=jetty-9.0.2.v20130417)用于在Jetty 中使用 slf4j 日志记录。
*   JavaUtilLog.java用于将 java.util.logging 与 Jetty 一起使用[。](http://git.eclipse.org/c/jetty/org.eclipse.jetty.project.git/tree/jetty-util/src/main/java/org/eclipse/jetty/util/log/JavaUtilLog.java?id=jetty-9.0.2.v20130417)

然后，在您实例化任何 Jetty 类之前，调用[`org.eclipse.jetty.util.log.Log.setLog(Logger log)`](http://download.eclipse.org/jetty/stable-9/apidocs/org/eclipse/jetty/util/log/Log.html#setLog%28org.eclipse.jetty.util.log.Logger%29)以将 Jetty 使用的底层 Logging 框架设置为您的自定义 Logger 实现。

祝你好运

# animation - Move an SVG object along a line or a path

> ID：16216462
> 
> 赞同：4
> 
> 时间：2013-04-25T13:45:05.067
> 
> 标签：animation, d3.js

I'd like to animate an SVG object so that it follows a SVG path that I have built from a line generator in d3.js. Is there any easy way to achieve this? In particular, I'd like to obtain the interpolated coordinates that correspond to my path. From there, it would be easy to perform the animation using tween.js or d3.js itself.

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2014-06-26T18:04:03.313

您也许可以修改此示例：[http ://bl.ocks.org/mbostock/1705868](http://bl.ocks.org/mbostock/1705868)

在这种情况下，使用 SVG 的 getTotalLength 和 getPointAtLength 沿 SVG 路径平移一个圆。您应该能够用任何 SVG 对象替换圆圈。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T13:50:47.833

据我所知，没有办法在 D3 中轻松获得插值 SVG 路径的坐标，即您可能必须自己进行插值。

但是，要沿该路径为 SVG 对象设置动画，您不需要使用 D3。您可以使用 SVG`<animateMotion>`元素来获得原生 SVG 动画——请参见[此处](http://www.carto.net/svg/samples/path_animation.shtml)的示例。

# java - Else can't find the If statement even though there is one

> ID：16216463
> 
> 赞同：0
> 
> 时间：2013-04-25T13:45:08.407
> 
> 标签：java, maze

When I try to compile this code I get an error saying else without if. I believe that I have all of the braces in the right place. I also get other errors to that are in the picture that I have attached but I just believe they are there because of the can't use else without if error.

Problem code:

```
public static boolean goNorth(){
        boolean success;
        if(maze[currCol]currRow - 1] == CLEAR){
            maze[currCol][startRow -1] = PATH;
            currRow--;
            success = goNorth();
                if(!success){
                success = goWest();
                    if(!success){
                    success = goEast();
                        if(!success){
                            maze[currCol][currRow] = VISITED;
                            currRow++;
                            }
                        }
                    }
                    return success;
                } else {
                    return false;
            }
        }

    public static boolean goWest(){
        boolean success;
        if(maze[currCol - 1]currRow] == CLEAR){
            maze[currCol - 1][startRow] = PATH;
            currRow--;
            success = goWest();
                if(!success){
                success = goSouth();
                    if(!success){
                    success = goNorth();
                        if(!success){
                            maze[currCol][currRow] = VISITED;
                            currCol++;
                            }
                        }
                    }
                    return success;
                } else {
                    return false;
            }
        }

        public static boolean goEast(){
        boolean success;
        if(maze[currCol + 1]currRow] == CLEAR){
            maze[currCol + 1][startRow] = PATH;
            currRow--;
            success = goEast();
                if(!success){
                success = goNorth();
                    if(!success){
                    success = goSouth();
                        if(!success){
                            maze[currCol][currRow] = VISITED;
                            currCol--;
                            }
                        }
                    }
                    return success;
                } else {
                    return false;
            }
        }

        public static boolean goSouth(){
        boolean success;
        if(maze[currCol]currRow + 1] == CLEAR){
            maze[currCol][startRow + 1] = PATH;
            currRow--;
            success = goSouth();
                if(!success){
                success = goEast();
                    if(!success){
                    success = goWest();
                        if(!success){
                            maze[currCol][currRow] = VISITED;
                            currRow--;
                            }
                        }
                    }
                    return success;
                } else {
                    return false;
            }
        } 
```

Error:

![screen shot](https://i.stack.imgur.com/cvngF.jpg)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:47:56.790

```
 if(maze[currCol + 1]currRow] == CLEAR){ 
```

那是无效的；您在`currRow`一些地方缺少左括号。

此外，围绕这一点进行了大量重构。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:48:17.370

阅读第*一个*错误。在你理解第一个错误之前，永远不要在第一个错误之后阅读任何错误。

第一个错误是告诉您这一行有语法错误：

```
if(maze[currCol]currRow - 1] == CLEAR){ 
```

（然后您将其复制粘贴四次）。它缺少一个`[`before `currRow`。

# java - what is the best way to pass messages from server to html (GUI)

> ID：16216464
> 
> 赞同：1
> 
> 时间：2013-04-25T13:45:09.933
> 
> 标签：java, html, ajax, jsp, user-feedback

I am using Java and JSP to develop my web application.

There are many situations in which user input cause an exception on server side, in this situation user expects an error message to be shown. There are several ways that I (as a programmer) can handle the transfer of the error message from server to GUI(html) and maybe redirect to other pages and show the message there. One way to go is using session attribute, other can be ajax method calls and showing the response text. There may be other ways that I don't know. Would you tell me what is the most straight forward and standard way (if there is a standard say about this)?

* * *

The problem that made me think about this was when I was trying to show the response of an ajax call in a colorbox, and I failed, it would be appreciated if you give me a hint on this too, how can I pass the response text of an ajax method in other web page.

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:18:20.517

将消息从服​​务器传递到 HTML 的一种方法是用 HTML 编写它们。HTML由服务器生成。

还有其他可能性，例如使用查询参数、cookie、ajax 调用等，但如果您没有特殊要求，您应该在输出 HTML 中编写消息。

*例如，在*服务器实现中，您可以使用请求属性。但这是服务器应用程序内部的通信，而不是 UI 和服务器之间的通信。

这些类型的消息通常应该是 a) 响应 POST 请求，您已重定向到错误页面，错误页面 url 中有相关信息，使页面可缓存或 b) 直接响应 GET 请求中的请求参数，所以相同的参数会导致相同的输出。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:13:02.900

> 一种方法是使用会话属性，其他可以是 ajax

我能想到的第三个选项是 URL 重定向，新 URL 可能包含[参数](http://www.html.net/tutorials/php/lesson10.php)

IE。

> yourdomain.com/page.jsp?name=Joe&error=Empty%20Field

我认为处理这些场景的标准方法是通过 AJAX，正如[这个问题](https://stackoverflow.com/questions/377644/jquery-ajax-error-handling-show-custom-exception-messages)中的 OP 所做的那样。记下 JQuery ajax 方法中的错误部分

# java - 每次使用前注册MBean

> ID：16216465
> 
> 赞同：0
> 
> 时间：2013-04-25T13:45:11.513
> 
> 标签：java, jmx, mbeans

我在启动 tomcat 应用程序时在一个公共类中注册 MBean。尝试在其他类中访问此 bean 以记录一些统计信息。但是 JMX Bean 值不会在 JConsole 中更新。

实例化我尝试过的 MBean

1.  `MBeanImplClass = new MBeanImplClass();`
2.  `MBeanInterface= new MBeanInterface();`

每次使用时都必须注册 MBean 吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:55:46.593

不，但是，您需要确保注册的 bean 和使用新统计信息更新的 bean 是同一个实例。一种方法是将您的 bean 实现为[单例](https://stackoverflow.com/questions/70689/what-is-an-efficient-way-to-implement-a-singleton-pattern-in-java)。

# c# - 如何处理 UI 线程和后台线程之间共享的资源

> ID：16216469
> 
> 赞同：1
> 
> 时间：2013-04-25T13:45:32.037
> 
> 标签：c#, .net, multithreading, user-interface

让我们从一个 UI 线程开始（WPF，WinForms 也可以），UI 线程创建一个后台线程来做一些工作（线程池），完成后后台线程更新 UI（使用调度程序）。UI 线程与后台线程共享资源，需要在后台线程完成其进程时将其处理掉。

实现这一目标的最佳方法是什么，我们是否在后台线程完成工作时从后台线程本身处理资源？如果是这样，我们无法在创建线程后使用来自 UI 线程的资源，因为我们不知道后台线程何时完成，反之亦然。（并且这里没有可用的异步/等待功能）。由于我们在这里处理 UI 线程，因此需要始终保持 GUI 处于活动状态。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:56:31.907

我的偏好是让一个线程“拥有”资源并对其进行管理。如果 UI 线程拥有它，那么它可以将资源“借出”给后台线程，但 UI 线程仍然负责处理它。这样 UI 线程可以使用资源并知道它是否被释放。

如果可能的话，最好让后台工作人员“拥有”资源，以便它可以处理它，但听起来在你的情况下这是不可能的。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:55:33.363

您可以为资源实现一个引用计数器。由于您知道有 2 个线程正在使用该资源，因此使用值 2 启动计数器。

每当线程用完资源时，它必须减少引用计数。当 ref 计数达到 0 时，可以释放资源。由于您使用的是线程，因此您需要将其与锁同步。一些伪代码：

```
int myResourceRefCount = 2;
object syncLockObject = new Object();

void DecreaseRefCountForMyResource() {
    lock(syncLockObject) {
       --myResourceRefCount;
       if(myResourceRefCount == 0)
           DisposeMyResource();
    }
} 
```

# javascript - Remove draggable containment

> ID：16216477
> 
> 赞同：3
> 
> 时间：2013-04-25T13:45:49.650
> 
> 标签：javascript, jquery, draggable, containment

You can add containment dynamically like this:

```
$(this).draggable( "option", "containment", "parent" ); 
```

How do i remove the containment again? Like:

```
$(this).draggable( "option", "containment", "none" ); 
```

except that doesn't work.. I could not find any methods for it in the API documentation

EDIT: I want to be able to drag the item but with no containment. I am using this with checkboxes:

```
 var denne = $(this);
        if ($('#containment').is(':checked')) {
            $(this).draggable( "option", "containment", "parent" );
        }
        $("#containment").each(function(){
            if ($(this).prop('checked')==false){ 
                denne.draggable( "option", "containment", false );
            }
        }); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:56:07.047

取决于你想做什么...

您可以“禁用”该元素，使其不再可拖动。

```
$(this).draggable( "option", "disabled", true ); 
```

或者您可以更改包含边界，以便可以将元素拖动到原始约束之外。

```
$(this).draggable( "option", "containment", "window" ); 
```

或者通过指定确切的边界。

```
$(this).draggable( "option", "containment", [x1, y1, x2, y2] ); 
```

或者正如 Menencia 在评论中提到的那样，您可以尝试将遏制设置为 false

```
$(this).draggable( "option", "containment", false ); 
```

# php - I wrote a code to show the availability of doctors according to the date, but when the field on mysql is empty i have this array error

> ID：16216482
> 
> 赞同：0
> 
> 时间：2013-04-25T13:46:06.520
> 
> 标签：php, arrays

This is the code i'm talking about

```
session_start();

include ('configg.php');

$query = "SELECT Date, Time FROM gp_appointment WHERE Name = '$_POST[doctor]' AND Date = '$_POST[date]'";

$result = mysql_query($query);

  $data = array();

  while($row = mysql_fetch_assoc($result))
  {
     $data[] = $row;

  }

 $colNames = array_keys(reset($data))

 ?>

 <table border="1">
 <tr>
    <?php

       //print the header
       foreach((array)$colNames as $colName)
       {
          echo "<th>$colName</th>";
       }

    ?>
 </tr>

    <?php

       //print the rows
       foreach((array)$data as $row)
       {
          echo "<tr>";
          foreach($colNames as $colName)
          {
             echo "<td>".$row[$colName]."</td>";
          }
          echo "</tr>";
       }

    ?>
 </table>
 <a href="homepage.php">Go back to the homepage</a><br>
 <a href="docname.php">Check another doctor</a><br> 
```

When i chose a date that exist in the databse all works fine, but if a choose a date not-existent i recieve this error:

> Warning: array_keys() expects parameter 1 to be array, boolean given in H:\Project\xampplite\htdocs\example\phptutorial\doctorav.php on line 15

Somebody know what to do?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:49:45.183

检查您是否获取数据而不是仅执行任何操作。或者只是打印消息`No Records Found`。

```
if((!empty($data)){
     // Perform all operation
}
else{
   echo "No records Found";
} 
```

**注意：** [**请不要`mysql_*`在新代码中使用函数**](https://stackoverflow.com/q/12859942/)。它们不再被维护[并被正式弃用](https://wiki.php.net/rfc/mysql_deprecation)。看到[**红框**](https://www.php.net/manual/en/function.mysql-connect.php)了吗？改为了解[*准备好的语句*](https://en.wikipedia.org/wiki/Prepared_statement)，并使用[PDO](http://php.net/pdo)或[MySQLi](http://php.net/mysqli) -[本文](https://php.net/manual/en/mysqlinfo.api.choosing.php)将帮助您决定使用哪个。如果您选择 PDO，[这里有一个很好的教程](http://wiki.hashphp.org/PDO_Tutorial_for_MySQL_Developers)。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T13:48:25.130

在处理它们之前，您需要先检查结果是否为空。

```
if($data){
    $colNames = array_keys(reset($data));
} 
```

您可能还需要在输出中检查这一点，否则 for-each 也会失败:)

# javascript - Getting "null or not an object" error when validating form

> ID：16216483
> 
> 赞同：0
> 
> 时间：2013-04-25T13:46:10.950
> 
> 标签：javascript, forms, validation, null

I'm using this:

```
<script type="text/javascript">
    var emailRule = /^[_\w\-]+(\.[\w\-]+)*(\.[\D]{2,3})$/;

    if (emailRule.test(document.forms[0].email.value))
        window.alert("That was a valid email address");
    else
        window.alert("That was not a valid email address");
</script> 
```

to validate this:

```
<form action="">
    <p>Email: <input type="text" name="email"/>
    <input type="submit" value="Sign up"/></p>
    <br>
</form> 
```

That form is the only form on the page and that input box is the only form element on the page. I get this error:

```
document.forms.0.email is null or not an object 
```

I've also tried changing it to `document.forms[0].elements[0].value` but I get the same type of error.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:47:10.310

因为您在页面呈现时调用它，所以该元素尚不存在。

您需要将该代码包装在一些称为 onsubmit 的验证函数中。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:51:30.747

```
var emailRule = /^[_\w\-]+(\.[\w\-]+)*(\.[\D]{2,3})$/;

window.addEventListener('load', function(){
    var form = document.forms[0];
    form.addEventListener('submit', function(e){
        if (!emailRule.test(form.email.value)){
            window.alert("That was not a valid email address");
            e.preventDefault();
        } else
            window.alert("That was a valid email address");
    });
}); 
```

# php - Removing index.php in Codeigniter 2

> ID：16216484
> 
> 赞同：1
> 
> 时间：2013-04-25T13:46:11.013
> 
> 标签：php, .htaccess, codeigniter, mod-rewrite, codeigniter-2

I'm having some trouble using Codeigniter2. Essentially I want to remove the annoying "index.php" from my url so that:

```
 - http://localhost/ci_intro/index.php/site/home

    Becomes

    - http://localhost/ci_intro/home 
```

I've followed a couple of the links on Stack Overflow already and have found the following two posts:

[Remove index.php From URL - Codeigniter 2](https://stackoverflow.com/questions/5155333/remove-index-php-from-url-codeigniter-2)

And

[Removing index.php from codeigniter-2](https://stackoverflow.com/questions/11016778/removing-index-php-from-codeigniter-2)

However after performing both steps still no joy.

My .htaccess is as follows:

```
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /ci_intro/

    #Removes access to the system folder by users.
    #Additionally this will allow you to create a System.php controller,
    #previously this would not have been possible.
    #'system' can be replaced if you have renamed your system folder.
RewriteCond %{REQUEST_URI} ^system.*
RewriteRule ^(.*)$ /ci_intro/index.php?/$1 [L]

    #When your application folder isn't in the system folder
    #This snippet prevents user access to the application folder
    #Submitted by: Fabdrol
    #Rename 'application' to your applications folder name.
RewriteCond %{REQUEST_URI} ^application.*
RewriteRule ^(.*)$ /ci_intro/index.php?/$1 [L]

    #Checks to see if the user is attempting to access a valid file,
    #such as an image or css document, if this isn't true it sends the
    #request to index.php
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ /ci_intro/index.php?/$1 [L]

</IfModule>

<IfModule !mod_rewrite.c>
    # If we don't have mod_rewrite installed, all 404's
    # can be sent to index.php, and everything works as normal.
    # Submitted by: ElliotHaughin

    ErrorDocument 404 /index.php
</IfModule> 
```

I've ensured that the mod_rewrite module is enable in Apache (I'm using Xampp on Windows) but for some reason it's just not working as i'd expect it to.

I have two views in CodeIgniter2, one called Home and another called About. These two link to each other. The links are as follows:

```
 <a href="home">Home</a><br/>
    <a href="about">About</a> 
```

If I go to the root URL of my project:

```
 http://localhost/ci_intro/ 
```

The index function of the Home page is displayed. That's fine and as expected. However, if I then click either link it redirects to:

```
 http://localhost/ci_intro/home

   or

   http://localhost/ci_intro/about 
```

Which produces a 404\. However if I then type "site" in the URL, the name of my controller, the links take me through to the correctly loaded views:

```
 http://localhost/ci_intro/site/home

    or

    http://localhost/ci_intro/site/about 
```

Is there any known way of bypassing this approach so that the controller,in this case site, is removed from the URL entirely as using site/home or site/about in the links in my view does not appear to work?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:03:59.150

您可能不想这样做（但可能！）。

> ```
> - http://localhost/ci_intro/index.php/site/home
> 
> Becomes
> 
> - http://localhost/ci_intro/home 
> ```

CI 的工作方式`site`是控制器，`home`是您正在调用的控制器中的方法或函数。这使您可以收集相应的功能。

例如，您可以有一个家庭控制器和一个索引方法，例如：

```
class Home extends CI_Controller{

    public function index(){
        echo 'I am the home controller index';
    }
} 
```

带有类似`http://example.com/home`（或`http://example.com/index.php/home`在涉及 .htaccess 之前）的 url 将显示一个带有文本“我是家庭控制器索引”的页面。

然后您可以将其他功能添加到家庭控制器 a'la

```
class Home extends CI_Controller{

    public function index(){
        // http://example.com/home
        echo 'I am the home controller index';
    }

    public function user(){
        // http://example.com/home/user
        echo "I am the user method in the home controller";
    }
} 
```

带有类似 url`http://example.com/home/user`的页面会显示一个带有文本“我是家庭控制器中的用户方法”的页面。

您还可以根据需要创建任意数量的其他控制器：

```
class About extends CI_Controller{

    public function index(){
        // http://example.com/about
        echo 'I am the about page!';
    }
} 
```

`http://example.com/about`将呈现一个带有文本“我是关于页面！”的页面

```
RewriteEngine on
RewriteCond $1 !^(index\.php|images|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

是您需要从 url 中删除 index.php 的所有 .htaccess。它会住在`/ci_into/.htaccess`

如果您真的想使用与站点控制器一起使用的[http://example.com/home](http://example.com/home)，则可以使用[路由](http://ellislab.com/codeigniter/user-guide/general/routing.html)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T21:46:05.520

使用路线：[http ://ellislab.com/codeigniter/user-guide/general/routing.html](http://ellislab.com/codeigniter/user-guide/general/routing.html)

它看起来像这样：

```
$route['home'] = 'site/home';
$route['about'] = 'controllername/about'; 
```

# jquery - jquery将值附加到输入字段

> ID：16216489
> 
> 赞同：0
> 
> 时间：2013-04-25T13:46:32.863
> 
> 标签：jquery, html, css

我正在尝试使用 jquery 将动态添加到我的输入字段值中。但是传递的值不会附加到目标。我的代码如下所示

```
//on click popup modal with a form
    $(document).on('click', '#form', function(e) {
        e.preventDefault();         

        $('<div></div>').load($(this).attr('href')).dialog({
            title: $(this).attr('title'),
            //autoOpen: false,
            modal: true,            
            draggable: true,
            width:900,
            position: ['top',50], 
            close: function(event, ui) 
            { 
                $(this).dialog('destroy').remove()
            } 
        });
//this value should be appended to one of the input field, the value exists on alert but is not getting appended
        $('input#inputPrepend cashback').val( $(this).closest('tr').children('td.cashback').text() );

    }); 
```

> 笔记：

```
//this value is picked up from my Jquery Datatable clicked row
$(this).closest('tr').children('td.cashback').text()
//this input field is getting created inside of modal
$('input#inputPrepend cashback') 
```

**HTML**

```
 <div class="formRow fluid">    
      <span class="grid12">
      <span class="grid2"><label class="form">Cashback</label></span>
      <span class="grid3">
        <div class="input-prepend">
           <span class="add-on">€&lt;/span>
              <input style="width:120px;height:30px; position relative; top:-10px"type="text"  id="inputPrepend cashback" type="text"  readonly="readonly" value="" />
        </div>
    </span>
    </span>            
    </div> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:48:57.247

在您的示例中：

```
$('input#inputPrepend cashback').val( $(this).closest('tr').children('td.cashback').text() ); 
```

`$(this)`指文档，而不是`$('input#inputPrepend cashback')`

您可以改用它：

```
var $input =  $('input#inputPrepend cashback');
$input.val( $input.closest('tr').children('td.cashback').text() ); 
```

# html - 如何在 CSS 2 中调整背景图像的大小以适合我的元素（没有设置宽度）？

> ID：16216493
> 
> 赞同：2
> 
> 时间：2013-04-25T13:46:38.370
> 
> 标签：html, css

我的问题是我必须保持与 IE 8 的兼容，所以没有 CSS3 唯一的答案。

我知道我可以使用 background-image 属性，但我不能使用 background-size 属性，因为它只是 CSS3。

我知道我可以调整图像的大小然后简单地应用它，但是，我不知道元素的确切大小是多少（我不介意将高度设置为“px”值，但我总是使用宽度百分比，即使对于 body 元素 [没有人喜欢水平滚动条！]）。

我必须在这个背景图像上居中一些文本，所以我也尝试只插入一个`<img>`标签，然后将文本放在一个 span 元素中，`position: absolute;`但我怀疑使用`left`and`top`属性来“微观管理”这种定位将证明在所有浏览器、屏幕尺寸和屏幕分辨率中看起来都一样（请纠正我，如果我错了，但这将是一个公共站点，并且每个人都必须看起来相同）。话虽如此，但如果我可以确信无论用户的个人浏览器、屏幕或分辨率选择如何，使用定位看起来都是一样的，我并不反对使用这种方法。

有什么方法可以在不完全依赖 CSS3 的情况下处理这个问题？

我认为没有任何理由发布任何标记或 CSS，但如果它会有所帮助，请告诉我，我会很高兴。

澄清一下：我需要整个图像“适合”元素，我并不真正关心纵横比。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:53:54.883

你可以很简单地做到这一点：

**html:**

```
<div class="holder">
    <img src="http://www.lorempixel.com/400/200/" />
    <div class="text">Testing text</div>
</div> 
```

**CSS：**

```
.holder {position:relative; width:100%; overflow:hidden;} //this has overflow hidden so it treats the image like a background and hides any extra
.holder img {position:absolute; left:0; top:0; width:100%; z-index:1;}
.holder .text {position:relative; z-index:2; text-align:center;} //this is positioned relative so the div grows to the size of the text 
```

[http://jsfiddle.net/UANFm/2/](http://jsfiddle.net/UANFm/2/)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:50:15.017

没有javascript就很难了。

您可以将其添加为普通图像，将位置设置为相对并在所有其他内容下对其进行 z-index，然后将宽度设置为 100%。但这仍然是一种有点骇人听闻的方式，而且我还没有测试过。

**编辑**试试这个：http: [//jsfiddle.net/xTgCY/](http://jsfiddle.net/xTgCY/)

```
<div class="wrapper">
    <img src="http://t2.gstatic.com/images?q=tbn:ANd9GcSaATzueHSd2rQXCWUQXFXc1sFAx3tNXBj-px5bU64D4ji5rmF6cw">
        <div class="content">aihadfuigh iaghdf aoisyhif o[iayhdf oiahdfio sadf</div>
</div>

.wrapper {
    width: 300px;
    position: relative;
}
.wrapper img {
    position: relative;
    z-index: -5;
    width: 100%;
}
.content {
   position: absolute;
   z-index: 0;
   top: 0;
    left: 0;
    width: 100%;
} 
```

# node.js - Assign variable value to a block in jade

> ID：16216497
> 
> 赞同：0
> 
> 时间：2013-04-25T13:46:58.627
> 
> 标签：node.js, variables, block, pug, template-engine

Is it possible to assign the value of a variable to a block? Either it is not possible or I'm doing it wrong.

Example:

```
- var $foo = "bar"

block #{$foo}
    div.a_class Some content 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T09:30:27.090

这是不可能的，因为块是编译时的，而不是运行时的。

# ios - UITableView never calls tableView:shouldShowMenuForRowAtIndexPath: on its delegate

> ID：16216503
> 
> 赞同：2
> 
> 时间：2013-04-25T13:47:19.773
> 
> 标签：ios, objective-c, uimenucontroller, uitableview

I'm creating and displaying an instance of `UITableView`. The delegate (which is actually my subclass of `UITableView`) never receives any of the following selectors:

*   `tableView:shouldShowMenuForRowAtIndexPath:`
*   `tableView:canPerformAction:forRowAtIndexPath:withSender:`
*   `tableView:performAction:forRowAtIndexPath:withSender:`

even though the [documentation](http://developer.apple.com/library/ios/#documentation/uikit/reference/UITableViewDelegate_Protocol/Reference/Reference.html) specifically states, for example, under the discussion of `tableView:shouldShowMenuForRowAtIndexPath:`

> If the user tap-holds a certain row in the table view, this method (if implemented) is invoked first. Return NO if the editing menu shouldn’t be shown—for example, the cell corresponding to the row contains content that shouldn’t be copied or pasted over.

Other tutorials also document this shortcut for displaying the `UIMenuController` in table views. Why isn't this working as documented?

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T13:47:19.773

虽然目前没有记录（我正在提交文档更新，但谁知道何时/是否会发布）， UITableViewDelegate 方法：

*   表视图：shouldShowMenuForRowAtIndexPath：
*   tableView:canPerformAction:forRowAtIndexPath:withSender:
*   tableView:performAction:forRowAtIndexPath:withSender:

仅当您的表视图实例由 UITableViewController 的实例管理时才会调用。独立的表视图**不会调用这些方法。**

如果您的表格视图未连接到表格视图控制器，则您需要在每个表格视图单元格上从长按侦听器手动显示 UIMenuController（以复制标准系统功能）。

# deployment - 网络服务管理

> ID：16216508
> 
> 赞同：1
> 
> 时间：2013-04-25T13:47:27.867
> 
> 标签：deployment, jenkins

我有一些 Web 服务，它们都是一个应用程序的一部分。它们都使用[Jenkins](http://jenkins-ci.org/)构建并存储在文件夹中。为了运行它们，我开始了几个 ssh 会话，做了很多 scp，并运行每个`nohup ./start -Dport=.. &`

没关系，直到它是唯一的应用程序。但现在有五个。每次部署都像地狱一样。

那么，是否有任何软件可以自动执行此操作？我希望它可以通过 ssh 复制一些文件，运行一些 bash 脚本，监控服务活动并通过 web-ui 公开它。可以自己创造一些东西，但我不想重新发明一辆自行车。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T19:46:18.493

[Kwatee](http://kwatee.net)（我是开发人员）是一个免费工具，可以做到这一点。您有一个 web ui 可以在任意数量的服务器上配置和操作部署。您还可以通过 ant/maven 插件或 python shell 命令在连续构建环境中自动化整个过程。

# c - C Pitchshifter 使用 libsamplerate

> ID：16216509
> 
> 赞同：0
> 
> 时间：2013-04-25T13:47:30.767
> 
> 标签：c, signal-processing, libsndfile

第一篇文章，我正在尝试使用 libsamplerate 和 libsndfile 制作一个简单的音高移位器。我通过制作一个简单的采样率转换器然后破解它以最基本的形式实现了这一点，我通过改变比率浮点值来改变音高。pitchshifter 移位 - 在正弦音上听起来非常好 - 如果您将它用于音频，您可以听到声音块之间的间隙 - 特别是如果您将文件调高。我想知道是否有一种方法可以使代码更有效地应对这种情况或某种插值函数或库，我可以毫不费力地实现它们。我对 C 很陌生——以前只通过 PD 处理声音，这是我的第一个项目——据我所知 libsamplerate 不是

谢谢

这是我的代码

```
 #include <stdio.h>
    #include </usr/local/include/sndfile.h>
#include </usr/local/include/samplerate.h>

#define BUFFER_LEN 44100 //defines buffer length

#define MAX_CHANNELS 2 //defines max channels 

int main ()
{
    static float datain [BUFFER_LEN]; //static defines as a global variable

    static float dataout [BUFFER_LEN]; //static defines as a global variable

    SNDFILE *infile, *outfile; //determines file open function + pointers

    /*descriptor*/SF_INFO /*sf_open*/ sfinfo, sfinfo2; 

    int readcount;//used to store data in while ((readcount = sf...

    const char *infilename/*pointer*/ = "/tmp/input.wav"; //const means that it is a value that cannot change 
                                               //after initialisation

    const char *outfilename/*pointer*/ = "/tmp/soundchanged.wav"; //const means that it is a value that cannot change 
                                                       //after initialisation

    SRC_DATA src_data; //struct from libsamplerate library
    //http://www.mega-nerd.com/SRC/api_misc.html#SRC_DATA

    infile = sf_open (infilename/*pointer*/, SFM_READ, &sfinfo); //infile declares a file variable, SFM_READ-reads file
                                                     //sfinfo -function of sfopen

    outfile = sf_open (outfilename/*pointer*/, SFM_WRITE, &sfinfo); //outfile declares a file variable, SFM_WRITE-writes file
                                                        //sfinfo -function of sfopen

    src_data.data_in = datain; //used to pass audio data into the converter

    src_data.input_frames = BUFFER_LEN; //supply the converter with the lengths of the arrays 
                                       //(in frames) pointed to by the data_in  

    src_data.data_out = dataout; //supplies the converter with an array to hold the converter's output

    src_data.output_frames = BUFFER_LEN; //supply the converter with the lengths of the arrays 
                                        //(in frames) pointed to by the data_out 

    /*------->*/src_data.src_ratio = 0.2 /*changing this number changes the pitch of the output file*/; 
    //specifies the conversion ratio defined as the input sample rate 
                           //divided by the output sample rate

    src_simple (&src_data/*reference address of src_data*/, SRC_SINC_BEST_QUALITY, 1);//

    while ((readcount = sf_read_float (infile, datain, BUFFER_LEN)))//while readcount is equal to
        //sf_read_float - function call: infile,datain and BUFFER_LEN 
        //this data is then fed into the converter argument below 

    {
        src_simple (&src_data, SRC_SINC_BEST_QUALITY, 1); //selects converter
        //http://www.mega-nerd.com/SRC/api_misc.html#SRC_DATA

        sf_write_float (outfile, dataout, readcount); 
        //write the data in the array pointed to by ptr to the file
    };

    sf_close (infile);
    sf_close (outfile); // closes infile,outfile
    //The close function closes the file, deallocates 
    //its internal buffers and returns 0 on success or an error value otherwise.

    sf_open ("/tmp/soundchanged.wav", SFM_READ, &sfinfo2/*reference address of sfinfo2*/);

    printf("%d", sfinfo2.samplerate);//outputs samplerate

    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T07:49:38.653

最便宜的时间音高转换器在调高时（在旧的磁带播放器中）的工作方式是简单地复制重新采样的声音块或其部分，以填补空白。稍差的那些在零交叉处将块拼接在一起。这种工作，但远非高质量的声音。

# sql - JPA Query with openJPA only works as 'native' SQL, but it does not when transformed as JPQL or with JPA Criteria

> ID：16216510
> 
> 赞同：0
> 
> 时间：2013-04-25T13:47:32.370
> 
> 标签：sql, jpa, jpql, openjpa, criteria-api

I have a SQL query and the mapping of the classes. Using openJPA, if the query is made as a @NamedNativeQuery it works fine, returning the correspondent class and the expected result. If it is transformed into a JPQL @NamedQuery it always returns a NoResultException for the getSingleResult method. I tried also the JPA Criteria but it is just not working, at least not in all environments. I cannot reproduce the problem locally, it only occurs in the test system. Locally all of the approaches work ok.

I think that it is a configuration problem, but I haven't found anything.

SQL: SELECT * FROM MY_REL_TABLE map WHERE map.TYPE = ?1 AND map.REGION_ID = ?2

JPQL: SELECT m FROM MyRelationClass m WHERE m.type= :type AND m.region = :region

Does anyone have an idea what could be wrong?

IBM openJPA, Websphere 8.0

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:14:13.757

> 我无法在本地重现该问题，它仅发生在测试系统中。

您是否在两种环境中都连接到同一个数据库？如果没有，您的本地数据库是否可能没有正确的数据？

您可以启用 OpenJPA SQL 跟踪以查看 JPQL 正在被翻译成什么：

```
openjpa.Log=SQL=trace 
```

此外，设置以下属性以查看参数值：

```
openjpa.ConnectionFactoryProperties=PrintParameters=true 
```

# elasticsearch - 二级索引 ElasticSearch

> ID：16216515
> 
> 赞同：0
> 
> 时间：2013-04-25T13:47:43.390
> 
> 标签：elasticsearch, indexing

是否可以像这样创建结构索引：

```
localhost:9200/shopname/products/product 
```

其中“shopname/products”是复合索引，“product”是类型？谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T12:49:19.940

不可能创建带有斜杠的索引，因为不会触发正确的 URL 处理程序。

我不认为你在这里真的需要它。您可以在索引上使用前缀，例如`shopname-products/product/1234`，或者只是将 shopname 的相关数据与`shopname/products/1234`.

# c# - 从排列列表中删除重复的“ABD”“BAD”“DAB”

> ID：16216516
> 
> 赞同：4
> 
> 时间：2013-04-25T13:47:45.097
> 
> 标签：c#

我有一个相当大的字符串列表，其中包含重复项，如果我只关心 A、B、C 是否在结果中，而不关心它们的顺序。我寻找了许多其他重复删除解决方案，但它们通常仅适用于精确值（我理解，因为这些元素不是精确的重复，而是更多虚假或多余的结果。）我已经有了列表并且没有创建它，因此更改选择不是一种选择。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T13:53:30.757

只需先对每个项目中的元素进行排序。

```
listOfStrings.Select(s => new string(s.OrderBy(c => c))).Distinct().ToList(); 
```

你明白我的意思 - 对字符进行排序。我会检查一下这个的语法..

# c# - Activator.CreateInstance 和 Convert.ChangeType 的可空问题

> ID：16216522
> 
> 赞同：1
> 
> 时间：2013-04-25T13:48:03.363
> 
> 标签：c#, reflection, type-conversion, nullable, activator

我有一个第三方库，它使用反射设置给定的对象属性，如下所示。（这是简化版）

```
public void Set(object obj, string prop, object value) {
    var propInf = obj.GetType().GetProperty(prop);
    value = Convert.ChangeType(value, propInf.PropertyType);
    propInf.SetValue(obj, value, null);
} 
```

而且我们有一个可以为空的属性的类

```
class Test
{
    public int? X { get; set; }
} 
```

当我编写以下代码时，它说它无法转换`int`为`int?`

```
var t = new Test();
Set(t, "X", 1); 
```

由于 Nullable 没有实现 IConvertible 它是有道理的。然后我决定编写一个返回给定值类型对象的可为空版本的方法。

```
public object MakeNullable(object obj) {
    if(obj == null || !obj.GetType().IsValueType)
        throw new Exception("obj must be value type!");

    return Activator.CreateInstance(
        typeof(Nullable<>).MakeGenericType(obj.GetType()), 
        new[] { obj });
} 
```

我希望如下使用这种方法。

```
var t = new Test();
Set(t, "X", MakeNullable(1)); 
```

但它仍然说它无法转换`int`为`int?`. 当我调试`typeof(Nullable<>).MakeGenericType(obj.GetType())`等于`int?`但`Activator.CreateInstace`返回的`int`值不是`int?`

所以这是我的情况......有什么帮助吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:18:56.307

这应该有效：

```
public static object ChangeType(object value, Type conversionType)
{
   if (conversionType.IsGenericType && conversionType.GetGenericTypeDefinition() == typeof(Nullable<>))
   {
       if (value == null)
           return null;
       var nullableConverter = new NullableConverter(conversionType);
       conversionType = nullableConverter.UnderlyingType;
    }
    return Convert.ChangeType(value, conversionType);
 } 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:13:44.710

试试这个代码...

```
public void Set(object obj, string prop, object value)
      {
          //var propInf = obj.GetType().GetProperty(prop);
          //value = Convert.ChangeType(value, propInf.PropertyType);
          //propInf.SetValue(obj, value, null);
          var property = obj.GetType().GetProperty(prop);
          if (property != null)
          {
              Type t = Nullable.GetUnderlyingType(property.PropertyType)
                           ?? property.PropertyType;

              object safeValue = (value == null) ? null
                                                 : Convert.ChangeType(value, t);

              property.SetValue(obj, safeValue, null);
          }
      } 
```

从这里 [Convert.ChangeType() 在](https://stackoverflow.com/questions/3531318/convert-changetype-fails-on-nullable-types) LukeH的 Nullable Types 上失败

更新：隐藏基本方法。

```
namespace ConsoleApplication2
{
using System;
using System.Collections.Generic;
using System.Linq;

internal class Program
{
    private static void Main(string[] args)
    {
        EnterPoint t = new EnterPoint();
        t.BeginProcess();
    }
}

public class EnterPoint
{
    public void BeginProcess()
    {
        var t = new Test(); //Object

        try
        {
            baseDllMethod m = new baseDllMethod(); //Your DLL
            m.Set(t, "X", 1); //Problem Method, this give you error
        }
        catch (Exception ex)
        {
            Console.WriteLine("ERROR EN DLL METHOD");    
        }

        xyz_D der = new xyz_D(); //Derivated method
        der.Set(t, "X", 1) ; //HIDE BASE METHOD
    }
}

public class baseDllMethod //YOUR DLL HERE
{
    public void Set(object obj, string prop, object value)
    {
        var propInf = obj.GetType().GetProperty(prop);
        value = Convert.ChangeType(value, propInf.PropertyType);
        propInf.SetValue(obj, value, null);
    }
}

public class xyz_D : baseDllMethod //Inherits
{
    public new void Set(object obj, string prop, object value) //Hide base method
    {
        var property = obj.GetType().GetProperty(prop);
        if (property != null)
        {
            Type t = Nullable.GetUnderlyingType(property.PropertyType)
                         ?? property.PropertyType;

            object safeValue = (value == null) ? null
                                               : Convert.ChangeType(value, t);

            property.SetValue(obj, safeValue, null);
        }
    }
}

public class Test //Your Object
{
    public int? X { get; set; }
} 
```

}

# knockout.js - 为什么我的淘汰赛 observable 属性和 boud 输入字段没有更新？

> ID：16216523
> 
> 赞同：0
> 
> 时间：2013-04-25T13:48:03.347
> 
> 标签：knockout.js, knockout-2.0

我有一个具有可观察属性的对象。

```
this.userToAdd = {
        ID: ko.observable(""),
        FirstName: ko.observable(""),
        LastName: ko.observable(""),
        Active: ko.observable(""),
        Email: ko.observable(""),
        Roles: ko.observableArray([])
    }; 
```

单击按钮时，我尝试更新对象

```
$(document).on("click", ".edit", function () {

    var itemToUpdate = ko.dataFor(this);

    if (itemToUpdate.ID !== undefined) {
        //update observable
        vm.userToAdd.ID = itemToUpdate.ID;
        vm.userToAdd.FirstName = itemToUpdate.FirstName;
        vm.userToAdd.LastName = itemToUpdate.LastName;
        vm.userToAdd.Email = itemToUpdate.Email;
        vm.userToAdd.Active = itemToUpdate.Active;
        vm.userToAdd.Roles = itemToUpdate.Roles;
        //update form, and there must be a better way
        $('input[name="ID"]').val(itemToUpdate.ID);
        $('input[name="FirstName"]').val(itemToUpdate.FirstName);
        $('input[name="LastName"]').val(itemToUpdate.LastName);
        $('input[name="Email"]').val(itemToUpdate.Email);
        $('input[name="Active"]').val(itemToUpdate.Active);      
    }
}); 
```

它运行是因为我看到输入字段正在使用我期望的值进行更新，但模型没有更新。我究竟做错了什么？另外，我不得不使用

```
$('input[name="ID"]').val(itemToUpdate.ID); 
```

更新输入字段

```
<input name="ID" type="text" placeholder="ID" data-bind="value: ID, valueUpdate: 'afterkeydown'" /> 
```

因为即使更新了可观察属性，输入字段的值也不会更新。有人可以帮忙吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:53:44.700

该`ko.observable`调用返回一个函数。要设置它的值，您需要使用新值作为参数调用它：

```
vm.userToAdd.ID(itemToUpdate.ID);
vm.userToAdd.FirstName(itemToUpdate.FirstName);
vm.userToAdd.LastName(itemToUpdate.LastName);
vm.userToAdd.Email(itemToUpdate.Email);
vm.userToAdd.Active(itemToUpdate.Active);
vm.userToAdd.Roles(itemToUpdate.Roles); 
```

进一步阅读：[阅读和写作 observables](http://knockoutjs.com/documentation/observables.html)：

> 要将新值**写入**可观察对象，请调用可观察对象并将新值作为参数传递。例如，调用 `myViewModel.personName('Mary')`会将名称值更改为“Mary”。

# java - Behaviour of String.split() when input is empty

> ID：16216524
> 
> 赞同：3
> 
> 时间：2013-04-25T13:48:05.380
> 
> 标签：java, string, split

As the title explains the query

Can somebody please explain the behavior of following two outputs.

```
"".split(",").length 
```

gives output

```
1 
```

where as

```
",".split(",").length 
```

gives output

```
0 
```

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-25T13:50:25.313

在第一种情况下，返回原始字符串，因为没有找到分隔符。

从[API 文档](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split%28java.lang.String,%20int%29)：

> 如果表达式与输入的任何部分都不匹配，则结果数组只有一个元素，即这个字符串。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:56:40.063

[http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String,%20int)](http://docs.oracle.com/javase/6/docs/api/java/lang/String.html#split(java.lang.String,%20int))

尾随的空字符串被丢弃。

尝试：

```
"Foo,".split(",").length // should be 1
",foo".split(",").length // should be 1 
```

# apache - jquery.ajax() POST 在 Nginx/PHP-FPM 上使用 IE10 收到空响应，但在 Apache 上有效

> ID：16216532
> 
> 赞同：3
> 
> 时间：2013-04-25T13:48:23.810
> 
> 标签：apache, jquery, character-encoding, nginx, internet-explorer-10

我使用一个非常简单的`jquery.ajax()`调用从服务器获取一些 HTML 片段：

```
// Init add lines button
$('body').on('click', '.add-lines', function(e) {
    $.ajax({
        type        : 'POST',
        url         : $(this).attr('href')+'?ajax=1&addlines=1',
        data        : $('#quickorder').serialize(),
        success     : function(data,x,y) {
            $('#directorderform').replaceWith(data);
        },
        dataType    : 'html'
    });
    e.preventDefault();
}); 
```

在 PHP 方面，我基本上回显了一个 HTML 字符串。jQuery 版本是 1.8.3。

问题出在**IE10**中：虽然它在运行在 Apache 上的**服务器 A**上运行良好，但在运行在 Nginx + PHP-FPM上的**服务器 B**上失败：如果我`success`在服务器 BI 上调试处理程序，则得到一个`undefined`for `data`. 在 IE 开发人员工具的网络选项卡中，我可以看到完整的响应和所有标题。它可能会影响其他 IE 版本，但我目前只能测试 IE10。

这是两个响应标头：

服务器 A，Apache（工作）：

```
HTTP/1.1 200 OK
Date: Thu, 25 Apr 2013 13:28:08 GMT
Server: Apache
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Vary: Accept-Encoding,User-Agent
Content-Encoding: gzip
Content-Length: 1268
Keep-Alive: timeout=2, max=100
Connection: Keep-Alive
Content-Type: text/html; charset=UTF-8 
```

服务器 B，Nginx + PHP-FPM（失败）：

```
HTTP/1.1 200 OK
Server: nginx/1.1.19
Date: Thu, 25 Apr 2013 13:41:43 GMT
Content-Type: text/html; charset=utf8
Transfer-Encoding: chunked
Connection: keep-alive
Expires: Thu, 19 Nov 1981 08:52:00 GMT
Cache-Control: no-store, no-cache, must-revalidate, post-check=0, pre-check=0
Pragma: no-cache
Content-Encoding: gzip 
```

在这两种情况下，身体部位看起来都一样。

知道什么可能导致这个问题吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T09:16:01.173

还请检查 Content-Type Header，因为 Apache 和 Nginx 发送不同的值：

```
Content-Type: text/html; charset=UTF-8 
```

对比

```
Content-Type: text/html; charset=utf8 
```

更新你的 Nginx 配置，添加这一行：

```
charset UTF-8; 
```

# google-chrome - 铬 | 我的一些网站图片的奇怪问题

> ID：16216535
> 
> 赞同：0
> 
> 时间：2013-04-25T13:48:29.393
> 
> 标签：google-chrome, networking, console

我正在使用 chrome 26.0.1410.64 m

遗憾的是，今天停止提供我正在开发的网站的一些图像。我看到的是 Chrome 控制台，网络选项卡，其中未加载的图像处于状态（失败）并输入“待定”。

请注意，如果我尝试使用它们自己的 URL 打开这些图像，则它们是可用的。

这是控制台的屏幕截图：

![在此处输入图像描述](https://i.stack.imgur.com/ePj97.jpg)

此问题仅适用于 Chrome，不适用于所有图像。

例如，这是使用其中一张图片的标签：

```
<img src="http://www.mysite.dch/wp-content/uploads/Ads/280x100/7047f30d8145b0d8abb47ff5ed07d703.jpg" alt="" title="" width="280" height="100" /> 
```

例如，在上面的链接中，如果我复制图像 url，并将其粘贴到 Chrome 的另一个选项卡中，图像将正常提供，没有错误代码或任何延迟。

此图像也可能有帮助：

![在此处输入图像描述](https://i.stack.imgur.com/a4KjF.jpg)

终于问题解决了。由于 Ad 关键字，我安装了一个插件，可以捕捉我的图像。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:58:34.273

这些链接可能对您有所帮助：[加载资源失败：服务器响应状态为 404（未找到）服务器中的错误](https://stackoverflow.com/questions/15824552/failed-to-load-resource-the-server-responded-with-a-status-of-404-not-found-e)

和

[Chrome下加载资源失败](https://stackoverflow.com/questions/4390134/failed-to-load-resource-under-chrome)

试试看能不能解决

# sql-server - How can I Filter all records where same id's Time differ a few seconds sql server

> ID：16216536
> 
> 赞同：0
> 
> 时间：2013-04-25T13:48:31.517
> 
> 标签：sql-server

This is the select statement to get data between certain dates:

```
SELECT DISTINCT Events.Clock,Events.TagID       
FROM Events
WHERE (DATEDIFF(SECOND, Events.Clock, '2013/04/20') <= 30) AND (DATEDIFF(SECOND,                     Events.Clock, '2013/04/21') >= 30) ORDER BY Events.TagID DESC 
```

This is the results I get from the statement.

```
 | Clock               |  TagID        | 
---------------------------------------------
1    | 2013-04-20 12:39:18 | 4CB0000060032 | 
2    | 2013-04-20 12:39:16 | 4CB0000060032 | 
3    | 2013-04-20 16:53:09 | 4CB0000060032 | 
4    | 2013-04-20 13:22:38 | 4CB00000600EF | 
5    | 2013-04-20 13:22:40 | 4CB00000600EF | 
6    | 2013-04-20 15:20:56 | 4CB00000600D2 | 
7    | 2013-04-20 15:17:31 | 4CB00000600D2 | 
8    | 2013-04-20 15:20:58 | 4CB00000600D2 | 
9    | 2013-04-20 19:33:09 | 4CB00000600D1 | 
10   | 2013-04-20 20:39:16 | 4CB00000600D1 | 
11   | 2013-04-20 11:10:38 | 4CB00000600D1 | 
```

Now I would like to filter the results more because as you can see there are records that the time differ in milliseconds and others in seconds, I would like to get rid of the records with the same TagID and the time that follows a few seconds/milliseconds. Duplicates of a TagID is fine just not where the times are a few seconds/milliseconds apart from another.

Thus record 2, 4, 6, 7 will not be there.

Then the results I would like to get will be the following:

```
 | Clock               |  TagID        | 
-------------------------------------------
1   | 2013-04-20 12:39:18 | 4CB0000060032 | 
2   | 2013-04-20 16:53:09 | 4CB0000060032 | 
3   | 2013-04-20 13:22:40 | 4CB00000600EF |
4   | 2013-04-20 15:20:58 | 4CB00000600D2 | 
5   | 2013-04-20 19:33:09 | 4CB00000600D1 | 
6   | 2013-04-20 20:39:16 | 4CB00000600D1 |
7   | 2013-04-20 11:10:38 | 4CB00000600D1 | 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:32:15.170

创建一个临时表来保存当前查询的结果：

```
CREATE TABLE #Events (
Clock DATETIME,
TagID VARCHAR(20)
) 
```

您当前的查询：

```
INSERT #Events
SELECT DISTINCT Events.Clock,Events.TagID       
FROM Events
WHERE (DATEDIFF(SECOND, Events.Clock, '2013/04/20') <= 30)
 AND (DATEDIFF(SECOND, Events.Clock, '2013/04/21') >= 30)
ORDER BY Events.TagID DESC 
```

然后仅选择在特定时间范围内没有更早日期的行（对于相同的 TagID）的那些行。我在这里以 3000 毫秒为例。

```
SELECT * FROM #Events e1
WHERE NOT EXISTS
(SELECT 1 FROM #Events e2
 WHERE e2.TagID = e1.TagID
   AND e2.Clock < e1.Clock
   AND DATEDIFF(millisecond, e2.Clock, e1.Clock) < 3000) 
```

# asp.net - 如何从字符串输入中获取数据并保存到数据表中

> ID：16216539
> 
> 赞同：0
> 
> 时间：2013-04-25T13:48:36.543
> 
> 标签：asp.net, regex, string, c#-4.0

我想从字符串输入中获取一些数据，例如乘客姓名、基本票价、总票价、佣金、fop。所有这些字段，我都显示在下图中。所有这些字段，我想存储在数据表中。列名是：- 乘客姓名、基本票价、总票价、佣金、fop。

这是我的字符串输入：-

```
string request= @"TST00009 DCA1S211E RH/07FEB F N LD 13FEB13 OD SANSAN SI                     
T-E                                                                             
FXP/R,U                                                                         
3.MACDORMAN/SAM CORBIN (CHD)                                                 
1   SAN BA  272 N 24JUN  825P OK NHXUQCNJ CH     24JUN24JUN 1PC                
2 O LHR BA  273 N 07AUG  325P OK NHXUQCNJ CH     07AUG07AUG 1PC                
 SAN                                                                        
FARE  U USD     492.00                                                          
TX001 X USD   458.00YQAC TX002 X USD     5.50YCAE TX003 X USD    17.20USAP      
TX004 X USD    17.20USAS TX005 X USD     5.00XACO TX006 X USD     7.00XYCR      
TX007 X USD     2.50AYSE TX008 X USD   105.61GBAD TX009 X USD    62.66UBAS      
TX010 X USD     4.50XF                                                          
TOTAL   USD    1177.17                                                          
GRAND TOTAL USD    1177.17                                                      
SAN BA LON M/BT NHXUQCNJ/CH BA SAN M/BT NHXUQCNJ/CH END                         
ROE1.000000 XF SAN4.5                                                          

BT1195364*BA *FM0.00                                                            

40.FE BA ONLY/NONREF/NONEND SEE GGAIRBAGUSA -BG:BA                             
45.FM *M*0.00A                                                                 
46.FP CHECK"; 
```

![在此处输入图像描述](https://i.stack.imgur.com/Db9wi.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:38:34.413

似乎您可以更好地了解有关基本正则表达式的更多信息。
[Regular-Expressions.info](http://regular-expressions.info)是我最喜欢的资源之一。也就是说，希望这是一个有用的开始。

* * *

单独抓住每一件而不是一个单一的表达可能会更干净。像这样的东西：

```
Match m1 = Regex.Match(request, @"FXP/R,U\s+(.+?) \(CHD\)", RegexOptions.Singleline);
string name = m1.Groups[1].Value;

Match m2 = Regex.Match(request, @"FARE  U USD\s+(\d+\.\d{2})");
string fare = m2.Groups[1].Value;

Match m3 = Regex.Match(request, @"GRAND TOTAL USD\s+(\d+\.\d{2})");
string total = m3.Groups[1].Value;

Match m4 = Regex.Match(request, @"45\.FM (\S+)");
string commission = m4.Groups[1].Value;

Match m5 = Regex.Match(request, @"46\.FP (\S+)");
string fop = m5.Groups[1].Value; 
```

如果你真的想要，你可能会设法做到这一点，但它看起来有点凌乱：

```
string pattern = @"FXP/R,U\s+(?<name>.+?) \(CHD\).*FARE  U USD\s+(?<fare>\d+\.\d{2}).*GRAND TOTAL USD\s+(?<total>\d+\.\d{2}).*45\.FM (?<commission>\S+).*46\.FP (?<FOP>\S+)";

Match m = Regex.Match(request, pattern, RegexOptions.Singleline);

Console.WriteLine("Name: {0}", m.Groups["name"]);
Console.WriteLine("Fare: {0}", m.Groups["fare"]);
Console.WriteLine("Total: {0}", m.Groups["total"]);
Console.WriteLine("Commission: {0}", m.Groups["commission"]);
Console.WriteLine("FOP: {0}", m.Groups["FOP"]); 
```

工作示例：http: [//ideone.com/0bHUW9](http://ideone.com/0bHUW9)

您可能需要稍微调整这些模式。它们适用于您给定的示例，但我对它们的匹配方式做了一些假设（例如，它假设“commission”和“FOP”不包含空格）。希望有帮助。

# jquery - 在jqGrid中的setCell之后editRow不起作用

> ID：16216541
> 
> 赞同：2
> 
> 时间：2013-04-25T13:48:38.370
> 
> 标签：jquery, jqgrid

我正在使用 setCell 设置单元格的值，然后启用单元格进行编辑

```
grid.jqGrid('setCell','1','Valid','5');
grid.jqGrid('editRow','1', false); 
```

但结果是我不能再点击单元格了？

![不再可编辑](https://i.stack.imgur.com/FpSfT.jpg)

调用 serCell 后，单元格不再可编辑。

我怎样才能使这个单元格再次可编辑？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:45:01.353

从评论中我找到了解决方案

而是像这样设置列值

`grid.jqGrid('setCell','1','Valid','5');`

你需要这样设置：
`$('#1_Valid').val('5');`

# xslt - 如何打印作为文本一部分的 < 和 > 符号..？

> ID：16216546
> 
> 赞同：4
> 
> 时间：2013-04-25T13:48:48.847
> 
> 标签：xslt, xslt-1.0

我只是想不出一种输出字符串的方法，例如：

```
<xml version="1.0" encoding="UTF-8"> 
```

这是我尝试过的：

```
<xsl:variable name="lessThan" select="&#x3C;"/>
<xsl:variable name="GreaterThan" select="&#x3E;"/>
    <xsl:value-of select="$lessThan"/>
    <xsl:text>xml version="1.0" encoding="UTF-8"</xsl:text>
    <xsl:value-of select="$GreaterThan"/> 
```

但这是我得到的输出：

```
&lt;xml version="1.0" encoding="UTF-8"&gt; 
```

我也尝试过这样的事情：

```
<xsl:text><xml version="1.0" encoding="UTF-8"></xsl:text> 
```

但是编辑器根本不允许我这样做。它会抛出与结束标签匹配的错误

PS：我对xslt不太熟悉，所以即使这个问题听起来很幼稚，也请回复。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T13:53:38.660

尝试这个：

```
 <xsl:text disable-output-escaping="yes">&lt;xml version="1.0" encoding="UTF-8"&gt;</xsl:text> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T14:01:48.093

要使您的测试 xslt 正常工作，您可以使用`disable-output-escaping = "yes"`

更改 xlst：

```
<xsl:variable name="lessThan" select="'&#x3C;'"/>
<xsl:variable name="GreaterThan" select="'&#x3E;'"/>
<xsl:value-of  disable-output-escaping = "yes" select="$lessThan"/>
<xsl:text>xml version="1.0" encoding="UTF-8"</xsl:text>
<xsl:value-of disable-output-escaping = "yes" select="$GreaterThan"/> 
```

更新：只是猜测您尝试生成 xml 声明。

```
 <?xml version="1.0" encoding="utf-8"?> 
```

这应该与`xsl:output`

```
<xsl:output method="xml" encoding="utf-8"/> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T14:09:04.780

您不应该尝试手动生成 XML 声明。它应该由 XSLT 自动生成，只要您将输出方法指定为 XML 并且不指定`omit-xml-declaration="yes"`：

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform">
  <xsl:output method="xml" indent="yes" encoding="utf-8" />

  <xsl:template match="/">
    <root />
  </xsl:template>
</xsl:stylesheet> 
```

在任何输入上运行此 XSLT 时，结果是：

```
<?xml version="1.0" encoding="utf-8"?>
<root /> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-04-21T02:50:02.667

把这个`<xsl:text disable-output-escaping="yes">&lt;</xsl:text>`

# jquery - 动态分配 jQuery 按钮部分失败

> ID：16216556
> 
> 赞同：2
> 
> 时间：2013-04-25T13:49:17.203
> 
> 标签：jquery, jquery-ui

我有一个用户（将要）能够选择模板的布局。根据用户单击的按钮，评估和更新所有匹配的（按类名）按钮。

假设我有四个不同模板的 4 个按钮。每个按钮自然都可以点击。单击的按钮应成为新的激活模板，其他按钮应重置（因为在另一个模板处于活动状态之前）。我以为我已经弄清楚了，但由于某种原因，当我想重新分配一个新按钮时，只有最后一个按钮被一个新按钮替换。其他以前的按钮不是。

JSFiddle 中提供的情况不是一个功能齐全的解决方案，但我很好奇为什么只有最后一个按钮被正确处理。谁能告诉我更多关于这个的事情？

可以找到小提琴：http: [//jsfiddle.net/z3jYC/](http://jsfiddle.net/z3jYC/)。（这是一个工作示例，提供了显示示例的裸代码）。

这是代码：

HTML：

```
<button class="activate-tpl" data-template-name="temp1">activate template</button><br/>
<button class="activate-tpl" data-template-name="temp2">activate template</button><br/>
<button class="activate-tpl" data-template-name="temp3">activate template</button><br/>
<button class="activate-tpl" data-template-name="temp4">activate template</button> 
```

JS

```
$(document).ready(function() { 

    $('button').button();
    var oButton = $('<button class="activate-tpl" data-template-name="">activate template</button>').button();

    $('.activate-tpl').click(function() { 

        var sClicked = $(this).attr('data-template-name');

        $('.activate-tpl').each(function() { 

            if($(this).attr('data-template-name') != sClicked) { 

                var oNewButton = oButton;
                oNewButton.attr('data-template-name', $(this).attr('data-template-name'));
                $(this).replaceWith(oNewButton);
            } else { 

                $(this).replaceWith('You\'ve activated me!');
            }
        });
    });
}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:26:05.557

这是你的新小提琴：http: [//jsfiddle.net/z3jYC/2/](http://jsfiddle.net/z3jYC/2/)

我注意到的几件事：

--我将您更改`.attr("data-template-name");`为`.data("template-name");`
--循环没有重新扫描您更改的模板，因为您正在`activate-tpl`从中删除课程！我在这个类中添加了跨度。--由于动态替换的内容，
我将您的点击事件更改为使用`.on`

```
if(data.data("template-name") != sClicked || !data.is("button")) { 
    var oButton = $('<button class="activate-tpl" data-template-name="' + $(this).data("template-name") + '">activate template</button>').button();

    $(this).replaceWith(oButton);
} else { 
    $(this).replaceWith('<span class="activate-tpl">You\'ve activated me!</span>');
} 
```

我还更改了您分配按钮的方式，似乎效果更好一些。

编辑：我注意到如果没有`template-name`数据，替换按钮会被分配一个空白值。如果这种情况继续下去，则会为多个按钮分配此值，从而导致多个按钮被替换。

将附加文本更改为：

```
data.replaceWith('<span class="activate-tpl" data-template-name="' + sClicked + '">You\'ve activated me!</span>'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:20:40.100

当我单击您提供的 jsfiddle 中的按钮时，我会在单击的位置看到文本“您已激活我”。除一个之外的所有其他按钮都会消失。当我单击剩余的按钮时，它没有任何功能。

所以有些事情可能对你有帮助：

**Q：为什么点击后只能看到一个按钮？**

**答**：您创建了`oButton`外部`$.each`循环。因此，只有一个按钮可以放置在 HTML 中的某处。它不是重复的。因此，当您通过循环时，`$(this).replaceWith(oNewButton);`将创建最后一个按钮。在此之前的任何其他调用均无效。

为避免这种情况，您需要每次都创建一个新按钮。

```
 var oNewButton = $('<button class="activate-tpl" data-template-name="">activate template</button>').button(); 
```

**问：为什么新按钮对点击没有反应？**

**A** : 新按钮是真正的新对象，与旧按钮无关。所以点击事件处理程序*没有*`$('.activate-tpl').click(..)`任何效果，因为新按钮是在点击处理程序注册*后创建的。*

 **为了解决这个问题，我建议保留旧按钮并更改您想要更改的任何内容。当它们被单击并且应该显示模板时，您可以使用隐藏它们`.hide()`。

希望有帮助。;)

**编辑**：这是我认为你想要的一个例子：http: [//jsfiddle.net/pWwgm/](http://jsfiddle.net/pWwgm/)**

# php - 二维数组的使用

> ID：16216562
> 
> 赞同：2
> 
> 时间：2013-04-25T13:49:30.233
> 
> 标签：php, sql

我想从下表中获取所有行时遇到问题`date`。

```
id      name       username    app      sdate    edate   
===    =======     ========    ===      =====    ======  
 1      tanvir      tanvir      1       2012      2012       
 2      Ranvir      Ranvir      1       2011      2013      
 3      john        john        2       2011      2012     
 4      Rakib       Rakib       1       2011      2012 
```

我使用以下 MySQL 查询：

```
$date = mysql_query("select * from `date`");
$date_row = mysql_fetch_array($date); 
```

但它只返回一行。

如何将所有行放入二维数组中？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2013-04-25T13:52:05.017

Well of course it's only returning one row, that's what `mysql_fetch_array` does:

> mysql_fetch_array — Fetch ***a*** result row as an associative array, a numeric array, or both

Now, to build an array of your rows, you just have to iterate over them:

```
$all_rows = array();
while($row = mysql_fetch_assoc($date)) $all_rows[] = $row; 
```

Notice how I use `mysql_fetch_assoc` here. You should NEVER use `mysql_fetch_array` unless you very specifically need both numeric and associative indices.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:36:52.123

尝试这个：

```
$date =  getQueryData("select * from `date`");
function getQueryData($sQuery)
{
    $result = mysql_query($sQuery); 
    $rows = Array();
    while($row = mysql_fetch_array($result, MYSQL_ASSOC))
    {
       $rows[] = $row;
    }
    @mysql_free_result($result);    
    return $rows;
} 
```

# c# - LINQ to Entities 不支持 LINQ 表达式节点类型“Invoke”

> ID：16216564
> 
> 赞同：0
> 
> 时间：2013-04-25T13:49:34.263
> 
> 标签：c#, .net, linq-to-entities, linq-expressions

我在尝试实现过滤表达式来过滤**实体**列表时遇到问题：

> LINQ to Entities 不支持 LINQ 表达式节点类型“Invoke”。

这是代码：

```
public IList<DocumentEntry> GetDocumentEntriesForRateAdjustmentTry2(
    string username, Rate rate, List<RatePeriod> ratePeriods)
{
    var dimensionLibManager = new DimensionLibManager();
    var currentVersionRateGroups = rate.CurrentRateVersion.RateGroups.ToList();

    Expression<Func<DocumentEntry, IList<RateGroup>, int, bool>> dimensionMatchesExpression =
        (documentEntry, rateGroups, dimensionInfoId) =>
        rateGroups.Any(
            rg =>
            rg.Dimension1.All(character => character == '*')
            ||
            documentEntry.DocumentEntryDimensions.Any(
                ded =>
                ded.DimensionInfo.Position == dimensionInfoId
                &&
                dimensionLibManager.GetDimensionSegments(rate.CompanyId, username, dimensionInfoId, ded.Value).Any(
                    seg => ded.Value.Substring(seg.SegmentStart, seg.SegmentLength) == seg.SegmentValue)));
    var dimensionMatches = dimensionMatchesExpression.Compile();

    var documentEntries = this.ObjectSet.Where(de => dimensionMatches(de, currentVersionRateGroups, 1));

    var result = documentEntries.ToList(); // The error happens here.

    return result;
} 
```

我怀疑**dimensionMatchesExpression**不能转换为 SQL，因为它在内部调用另一个库的方法（**dimensionLibManager.GetDimensionSegments**）来根据特定参数过滤文档。

有没有办法（除了使用 LinqKit 或任何额外的扩展库）可以使这项工作？

我想使用表达式作为过滤器的原因是，最终，我想这样做：

```
var documentEntries = this.ObjectSet.Where(de => 
    dimensionMatches(de, currentVersionRateGroups, 1)
    && dimensionMatches(de, currentVersionRateGroups, 2)
    && dimensionMatches(de, currentVersionRateGroups, 3)
    && dimensionMatches(de, currentVersionRateGroups, 4)); 
```

另外，我怎样才能真正调试这种问题？错误信息非常模糊。如何追踪导致错误的确切节点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:11:48.517

我怀疑这是问题所在。

```
var documentEntries = this.ObjectSet.Where(de => dimensionMatches(de, currentVersionRateGroups, 1)); 
```

我认为行号不适用于 Linq2EF。

```
public IList<DocumentEntry> GetDocumentEntriesForRateAdjustmentTry2(
    string username, Rate rate, List<RatePeriod> ratePeriods)
{
    var dimensionLibManager = new DimensionLibManager();
    var currentVersionRateGroups = rate.CurrentRateVersion.RateGroups.ToList();

    Expression<Func<DocumentEntry, int, bool>> dimensionMatchesExpression =
        (documentEntry, rateGroups, dimensionInfoId) =>
        currentVersionRateGroups.Any(
            rg =>
            rg.Dimension1.All(character => character == '*')
            ||
            documentEntry.DocumentEntryDimensions.Any(
                ded =>
                ded.DimensionInfo.Position == dimensionInfoId
                &&
                dimensionLibManager.GetDimensionSegments(rate.CompanyId, username, dimensionInfoId, ded.Value).Any(
                    seg => ded.Value.Substring(seg.SegmentStart, seg.SegmentLength) == seg.SegmentValue)));

    var documentEntries = this.ObjectSet.Where(dimensionMatchesExpression);

    var result = documentEntries.ToList(); // The error happens here.

    return result;
} 
```

虽然我不明白你为什么要使用表达式来做到这一点。您可以将所有内容内联...

几天前刚刚意识到您的问题的解决方案......有点黑客......

```
public Expression<Func<DocumentEntry, int, bool>> CreateWhereClause(stuff);

public IList<DocumentEntry> GetDocumentEntriesForRateAdjustmentTry2(
string username, Rate rate, List<RatePeriod> ratePeriods)

{
    using(var db = new Context())
    {
        IQueryable<DocumentEntry> foo = db.Foos;
        foreach(var i =0; i <4; i++)
        {
            foo = foo.Where(DocumentEntry(i));
        }
    }

} 
```

# android - android：保存活动状态

> ID：16216566
> 
> 赞同：0
> 
> 时间：2013-04-25T13:49:35.327
> 
> 标签：android

我知道这个问题已被问过很多次，但我尝试了很多解决方案都无济于事。啜泣啜泣。

我会尽量保持简单。我正在编写一个使用微调器并编辑文本以获取浮点数的应用程序。所以屏幕 A 有 4 个微调器和 4 个编辑文本。我使用下一步按钮打开屏幕 B

```
onClick(){
    a.putExtras(sendScoreSoFar);
    a.setFlags(Intent.FLAG_ACTIVITY_REORDER_TO_FRONT);
    startActivity(a);
} 
```

屏幕 B 与 3 个微调器和 2 个编辑文本大致相同。我可以在保留用户输入的同时从 A 移动到 B 并返回 A，但是当我再次返回 B 时，B 会被重置。我需要保留输入，以便用户可以来回滑动以检查输入。我可以使用共享首选项，但需要在第一次加载时重置。

我尝试了清单中的各种行：

```
 <activity
        android:name="com.package.Screen2"
        android:label="@string/app_name" 
        android:alwaysRetainTaskState="True"
        android:launchMode="singleInstance">
        >
        <intent-filter>... 
```

这是我创建和保存的实例状态代码。

```
@Override
public void onCreate(Bundle savedInstanceState) {
    // TODO Auto-generated method stub
    setContentView(R.layout.screen2);
    super.onCreate(savedInstanceState);
    setUpVariables();
    if (savedInstanceState != null) {
        int a = savedInstanceState.getInt("weightlostorprev");
        spinner1.setSelection(a);
        int b = savedInstanceState.getInt("metricorimp");
        spinner1.setSelection(b);
        int c = savedInstanceState.getInt("acute");
        spinner1.setSelection(c);

        etBigWeight.setText(savedInstanceState.getString("bigweight"));
        etSmallWeight.setText(savedInstanceState.getString("smallweight"));
    }
    gotBasket = getIntent().getExtras();
    passedResults = gotBasket.getFloatArray("the data");
    passedWeight = passedResults[5];
    Toast c1 = Toast.makeText(Screen2.this, "on create run!  new run = "
            + newRun, Toast.LENGTH_LONG);
    c1.show();
    // question.setText(gotBread);
}

//@Override
public void onSaveInstanceState(Bundle savedInstanceState) {
    super.onSaveInstanceState(savedInstanceState);
    // Save UI state changes to the savedInstanceState.
    // This bundle will be passed to onCreate if the process is
    // killed and restarted.
    int a = spinner1.getSelectedItemPosition();
    savedInstanceState.putInt("weightlostorprev", a);
    int b = spinner2.getSelectedItemPosition();
    savedInstanceState.putInt("metricorimp", b);
    int c = spinner1.getSelectedItemPosition();
    savedInstanceState.putInt("acute", c);

    savedInstanceState.putString("bigweight", etBigWeight.getText()
            .toString());
    savedInstanceState.putString("bigweight", etBigWeight.getText()
            .toString());

}

//@Override
public void onRestoreInstanceState(Bundle savedInstanceState) {
    super.onRestoreInstanceState(savedInstanceState);
    // Restore UI state from the savedInstanceState.
    // This bundle has also been passed to onCreate.
    int a = savedInstanceState.getInt("weightlostorprev");
    spinner1.setSelection(a);
    int b = savedInstanceState.getInt("metricorimp");
    spinner1.setSelection(b);
    int c = savedInstanceState.getInt("acute");
    spinner1.setSelection(c);

    etBigWeight.setText(savedInstanceState.getString("bigweight"));
    etSmallWeight.setText(savedInstanceState.getString("smallweight"));
} 
```

我知道有一个简单的解决方案，但我找不到它。提前致谢。

编辑据我所见，您无法将数据发送到 onResume 所以尽管给出的答案是正确的，但我通过删除所有共享首选项代码解决了问题，删除了对清单的更改： android:alwaysRetainTaskState="True" android:launchMode=" singleInstance"> 而不是试图保留活动，而是照常杀死它（使用后退按钮），只需发送微调器的值并使用 startactivityforresult 编辑捆绑中的文本。所以 screenA 开始 screenB 发送包 a，然后当 screenB 被返回按钮杀死时，它将包 b 发送回 screenA，然后当 screenA 现在启动 screenB 时，它发送包 a 和 b，并且 b 填充了包 b 中的值。可能没有人感兴趣，但我认为我还是提出了解决方案。如果有人愿意，我可以提供代码。
感谢您的回答，伙计们下次会看看您的选择。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:04:38.377

我假设您正在通过完成 B 屏幕的后退按钮返回 A 屏幕。

您可能需要考虑将每个屏幕放入一个片段中，将它们加载到您的活动中并使用片段管理器在片段之间翻转。

以下是与此解决方案相关的资源。

[在片段视图之间切换](https://stackoverflow.com/questions/7793576/switching-between-fragment-view)

[http://www.vogella.com/articles/AndroidFragments/article.html#fragmentspersistence](http://www.vogella.com/articles/AndroidFragments/article.html#fragmentspersistence)

您可以使用片段生命周期回调来处理数据并使用 setRetainInstance() 来“控制是否在重新创建 Activity 时保留片段实例（例如从配置更改中）。”

如果您需要预蜂窝兼容性，请查看支持库以执行此操作。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:06:39.540

您的选择是要么保留数据（例如，使用您已经知道的 SharedPreferences）。或者，您可以创建一个包含您的价值观的服务。两个活动都绑定到服务，并且可以从服务中获取和设置值。Service 将在您的 Activity 转换期间保持活动状态，因此 ActivityA 设置的值将可用于 ActivityB。

保存 Activity 状态只会将状态持久化到相同的 Activity 类型。它在恢复 Activity 或在例如方向更改时保持状态时使用。

# c# - 数据库优先和逆向工程师代码优先不生成edmx？

> ID：16216571
> 
> 赞同：0
> 
> 时间：2013-04-25T13:49:59.273
> 
> 标签：c#, .net, sql-server, asp.net-mvc, entity-framework-5

我已经在 sql server 中创建了一个数据库。之后，我人生中第一次选择使用 Entity Framework。在这里阅读了几篇文章，我首先使用了逆向引擎代码，它从我的数据库中创建了我所有的模型。效果很好，但总是当我试图理解一个问题时，人们会说我没有的 edmx。为什么？首先设计数据库然后使用 EF 的真正最佳方法是什么？例如，我不知道如何在更改基础后更新我的模型。我总是需要再次运行逆向引擎代码优先工具，这弄乱了很多其他的东西。我真的很松散，如果有另一个平等的帖子，我很抱歉。我试图搜索，但不知道要搜索的正确术语。这是我第一次使用 EF5。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:59:53.590

当您拥有 Database First 并希望用作 ADO 数据集时，将使用 EDMX 文件。

# matlab - 如何在不使用 matlab 中的 imnoise 函数的情况下向图像添加脉冲和伽马噪声？

> ID：16216572
> 
> 赞同：0
> 
> 时间：2013-04-25T13:50:00.997
> 
> 标签：matlab, noise

我想知道您是否可以就如何分别向图像添加脉冲和伽马噪声给我一些建议？使用matlab的imnoise函数很简单，但是我不允许使用imnoise，我们的TA说你可以使用rand函数。

我遇到了这段代码，但它似乎不能正常工作（对于脉冲噪声）：

```
 noisyimage=originalimage+255*rand(size(originalimage)); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:15:22.667

这行代码有几个问题：

*   `255*rand()`生成双值数字，而您的图像可能是类型`uint8`左右（检查`class(originalimage)`）。要修复，`randi`例如使用：

    ```
    noisyimage = randi(255, size(originalimage), class(originalimage)); 
    ```

    （使用`intmax(class(originalimage))`完全通用）

*   *您向所有*像素添加最大幅度为 255 的噪声。这可能会溢出您的许多像素（即，分配的值高于 255）。为了避免，使用类似的东西

    ```
    noisyimage = min(255, originalimage + randi(...) ); 
    ```

*   噪声方向仅为*正*。真噪声有时也会*降低*像素值。所以，使用类似的东西

    ```
    noisyimage = max(0, min(255, originalimage + randi(...)-127 ); 
    ```

*   255的最大幅度实际上太大了**；**你可能会破坏你的整个形象，只会得到噪音。尝试几个不同的幅度，`A`，如下所示：

    ```
    noisyimage = max(0, min(255, originalimage + randi(A, ...)-round(A/2) ); 
    ```

*   使用的均匀分布`randi`并不是一个很好的噪声源；你想要一些其他的分布。使用正态分布：

    ```
    uint8(A*randn(...)-round(A/2)) 
    ```

    或伽玛：

    ```
    uint8(A*randg(...)-round(A/2)) 
    ```

    等等

现在，这应该让你开始:)

# django - django 应用程序中的即时搜索

> ID：16216573
> 
> 赞同：-3
> 
> 时间：2013-04-25T13:50:10.973
> 
> 标签：django, django-models, django-forms, django-templates, django-ajax-selects

我在 Windows 中使用 django

我给了一个文本字段来按类别名称搜索，文本框应该给我像谷歌即时这样的名称结果

通过选择名称，它应该给我**同一页面本身**的类别详细信息。

任何机构都可以帮助我。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-30T14:31:13.040

查看[django-ajax-search](https://github.com/side-winder/django-ajax-search) 它应该可以解决您的问题

# single-page-application - Durandal 缓存问题/版本控制策略

> ID：16216574
> 
> 赞同：16
> 
> 时间：2013-04-25T13:50:12.630
> 
> 标签：single-page-application, durandal

对 Durandal js 和 html 文件进行版本控制的好策略是什么？

我注意到，在开发过程中，您的浏览器缓存必须禁用，以便您在每次刷新时接收最新文件。这是开发过程中必须的。

但是，我担心的是，当我使用持续部署策略（每天部署多次）进入生产环境时，用户的浏览器将缓存我的应用程序的旧版本，这可能会导致不可预知的行为。

想到的方法是以某种方式对 js 和 html url 进行版本控制，以便在每个请求中嵌入一个版本号。但我不确定如何在 Durandal 框架内实现这一点。

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-29T14:47:53.927

好的，这是我前进的方向。基本上，requirejs 中内置了一些东西来处理这个问题。

在 main.js 的顶部，在对 requirejs.config 的调用中，我可以设置一个 urlArgs 属性，该属性将附加到 requirejs 对模块的每个调用。

```
requirejs.config({
    paths: {
        'text': 'durandal/amd/text'
    },
    urlArgs: 'v=1.0.0.0'
}); 
```

当我想强制生产用户获取新版本的 requirejs 模块时，我可以增加版本号，这将使浏览器缓存无效。

（在我的项目中，我有一种方法可以将包含我的主 ASP.NET MVC 程序集的程序集的版本号注入到此属性中，但其代码会分散上述示例的简单性）。

希望这对某人有帮助！

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-08-23T18:03:43.487

对于 .NET，将 main-built.js 文件添加为 App_Start/BundleConfig 中的脚本包：

```
 public static void RegisterBundles(BundleCollection bundles)
    {
        //...
        bundles.Add(new ScriptBundle("~/Scripts/main-built").Include(
                "~/App/main-built.js"));
        //...
    } 
```

引用索引页面上的脚本包：

```
 @if (HttpContext.Current.IsDebuggingEnabled)
    {
        <script type="text/javascript" src="~/Scripts/require.js" data-main="App/main"></script>
    }
    else 
    { 
        <!-- Remember to run the weyland optimizer to create the main-built.js -->
        @Scripts.Render("~/Scripts/main-built")
    } 
```

只要您拥有默认的 Web.Release.Config 文件，Visual Studio 就会自动删除调试属性，同时在发布时对您的包进行最小化和版本控制。

# angularjs - 将参数从控制器传递到指令的最佳实践是什么？

> ID：16216577
> 
> 赞同：0
> 
> 时间：2013-04-25T13:50:17.183
> 
> 标签：angularjs, angularjs-directive

我是 AngularJS 的新手

在我的 Angular 应用程序中，我有一个指令和一个控制器。我需要我的控制器发送任何类型的配置选项，包括回调方法。

我的指令是一个元素，它实现了一个按钮来将数据发布到网络服务中。我的愿望是我的控制器为这个“post”方法发送一个 url 并发送一个回调方法，必须在我的指令中的这个“post”之后调用。

最好的方法是如何做到这一点？发送这样的回调方法是一个好习惯吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:57:06.893

我通常在元素的标签中指定参数。例如：

```
<my-directive my-service="someService" my-callback="someCallback" /> 
```

在我的指令中，我使用 $parse 函数来读取/设置这些值：

```
var getService = $parse(attrs.myService),
    setService = getService.assign,
    service = getService(scope); 
```

# php - 如何按“修改日期”对该列表进行排序？

> ID：16216578
> 
> 赞同：0
> 
> 时间：2013-04-25T13:50:21.027
> 
> 标签：php

我一直试图让这个 mp3 播放器按“修改日期”订购歌曲，但似乎无法让它正常工作。有没有办法可以通过“修改日期”输出结果？谁能帮我解决这个问题？

```
 /*  Reads mp3's from a local 
directory, returns array of uri's */            
function grab_local_folder_mp3s( $folder ) {
    $items = array_multisort(

              array_map( 'filemtime', $items ),
              SORT_NUMERIC,
              SORT_DESC,
              $items
              );
    if ( ($lp = strpos($folder, $this->Rooturl)) || preg_match("!^/!", $folder) ) {
        if ( $lp !== false ) {
            $fp = str_replace($this->Rooturl, "", $folder);
            $fp = str_replace("www.", "", $fp);
            $fp = str_replace("http://", "", $fp);
            $fp = str_replace("https://", "", $fp);
        } else {
            $fp = $folder;
        }
        $path = $_SERVER['DOCUMENT_ROOT'] . $fp;
        if ($handle = @opendir($path)) {
            $j=0;
            while (false !== ($file = readdir($handle))) {
                if ( $file != '.' && $file != '..' && filetype($path.'/'.$file) == 'file' && preg_match("!\.mp3$!i", $file) ) {
                    $items[$j++] = $file;
                }
            }
            closedir($handle);
            if ( ($c = count($items)) > 0 ) {
                asort($items);

                if ( $this->folder_order != "asc" ) {
                    $items = array_reverse($items, true);
                }
                $fp = preg_replace( "!/+$!", "", $fp );
                foreach ( $items as $i => $mp3 ) {
                    $items[$i] = "http://" . $_SERVER['HTTP_HOST'] . $fp . "/" . $mp3;
                }
            }
            $this->dbug['str'] .= "\nRead folder - Done, " . $c . "mp3(s) in folder http://" . $_SERVER['HTTP_HOST'] . $fp;
            return $items; //the tracks array
        } else {
            $this->dbug['str'] .= "\nRead folder - Couldn't open local folder, check path/permissions to http://" . $_SERVER['HTTP_HOST'] . $fp;
            return true;
        }
    } else {
        $this->dbug['str'] .= "\nRead folder - Path was remote or unreadable." . $fp;
        return false;
    }
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:10:40.250

除非你有特殊的权力，否则`$items`变量保持未定义：

```
function grab_local_folder_mp3s( $folder ) {
    $items = array_multisort(

              array_map( 'filemtime', $items ),
              SORT_NUMERIC,
              SORT_DESC,
              $items
              ); 
```

这只是你的功能的开始。也许值得考虑如何将代码拆分为多个函数？一个好的说法是：一个函数中有六行。如果它变得更长，请开始考虑如何将代码移出它。试试看，效果很好。

也适用于开发：启用最高级别的错误报告并跟踪错误日志。PHP 会告诉您此类错误，然后您就知道在哪里查找非常快。还要保持 PHP 更新以获得可用的最佳错误消息。

# sql-server - 将存储过程执行计划复制到另一个数据库

> ID：16216583
> 
> 赞同：1
> 
> 时间：2013-04-25T13:50:35.713
> 
> 标签：sql-server, sql-server-2008-r2, sql-execution-plan, parameter-sniffing

**设置：**

使用 SQL Server 2008 R2。

我们有一个间歇性运行很长时间的存储过程。我想测试一个参数嗅探导致查询引擎选择错误计划的理论。

**问题：**

如何将查询的执行计划从一个数据库复制到另一个（测试）数据库？

**笔记：**

我完全意识到这可能不是参数嗅探问题。但是，如果可能的话，我想完成创建测试计划并使用它的动作。因此，请不要让我发布代码和/或表模式，因为此时这无关紧要。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:56:28.773

计划不可移植，它们绑定到对象 ID。您可以使用[planguides](http://technet.microsoft.com/en-us/library/ms190417.aspx)，但它们与数据库严格绑定。您需要做的是对同一数据库的恢复备份进行测试。在恢复的备份上，您可以使用计划指南。但是为了相关性，机器的物理特性应该是相似的（CPU、RAM、磁盘）。

通常，虽然不需要诉诸诸如复制计划之类的恶作剧。看看实际的执行计划，所有的答案都在*那里*。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T13:56:01.897

您是否尝试过使用`OPTIMIZE FOR`子句？有了它，您可以更轻松地调整您的过程，并且不会因为这些数据库的差异而从另一个数据库复制计划不合适的风险（如果复制计划甚至是可能的）。

[http://www.mssqltips.com/sqlservertip/1354/optimize-parameter-driven-queries-with-sql-server-optimize-for-hint/](http://www.mssqltips.com/sqlservertip/1354/optimize-parameter-driven-queries-with-sql-server-optimize-for-hint/)

# c - 使用递增的变量在 c 中粘贴标记

> ID：16216585
> 
> 赞同：0
> 
> 时间：2013-04-25T13:50:49.363
> 
> 标签：c, preprocessor-directive

我有一组数组：`msg1[]` `msg2[]`.... `msgn[]`我需要在`while`循环中使用这些值。作为`msgi[]`. 当我将其定义为`#define MSG(a) msg##a` 并将其放入循环和增量`i`中时，它会将其扩展为`msgi`?

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T13:53:49.933

你不能那样做。相反，您可以创建一个新数组，其中包含指向实际数组的指针：

```
int array1[...];
int array2[...];

int *all_arrays[] = { array1, array2 }; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:14:38.503

无法完成，因为宏在编译时而不是运行时被替换，所以它会被替换一次......

如果大小相同，您可以使用 2D 数组，如果大小不同，则使用数组数组：

```
//once in your code you need to do this:
int array0[];
int array1[];
//...
int arrayX[]; //X should be replaced with a real number...
int **arrayOfArrays = new (int*)[X+1];
arrayOfArrays[0] = array0;
arrayOfArrays[1] = array1;
//...
arrayOfArrays[X] = arrayX;

//now you could use it like that anytime in your code:
int i;
for(i = 0; i < X; ++i)
{
    //Do whatever you want to do, like:
    arrayOfArrays[i][0] = 1234;
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:53:37.040

构建你的c代码，`gcc -E myfile.c` 你会看到原因

这称为预处理器代码。预处理器代码是编译器在编译之前生成的代码。在此代码中，编译器将原始代码中的宏替换为宏的内容。

您的原始代码：

```
for (i=0; i<10; i++) {
    for (j=0; j<10; j++)
        MSG(i)[j] = 3;
} 
```

从原始代码生成的预处理器代码（可以用 看到`gcc -E`）：

```
for (i=0; i<10; i++) {
    for (j=0; j<10; j++)
        msgi[j] = 3;
} 
```

您可以改用二维数组

```
int msg[5][5]; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T13:53:38.163

> 当我将其定义为 #define MSG(a) msg​​##a 并将其放入循环并递增 i 时，它会将其扩展为 msgi？

不，它不会那样工作，因为宏在编译之前被扩展，而不是在编译之后。您将需要一种不同的方法，例如@zakinster 建议的二维数组。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T13:53:55.647

不，不幸的是它不会。C 不支持运行时名称查找。相反，您应该使用以下形式的二维数组：

```
void** msg; 
```

这将允许数组具有不同的大小和类型，尽管您必须转换为数组的任何类型。

# python - pycurl 子进程在一个单独的线程中

> ID：16216586
> 
> 赞同：0
> 
> 时间：2013-04-25T13:50:55.837
> 
> 标签：python, multithreading, queue, subprocess, pycurl

我需要帮助才能从 pycurl 获取输出，我正在尝试在子进程中运行。我试图将此输出放入队列中，然后将该队列拉出到不同的类中。

不幸的是，现在我没有输出=（

```
import threading
import random
import time
import Queue
import urllib2
import sys
import simplejson, pycurl
import sys, signal

queue = Queue.Queue()
keep_running = True
user = "username"
pswd = "pass"

class MyThread(threading.Thread):
    def __init__(self, queue):
        threading.Thread.__init__(self)
        self.queue = queue

    def run(self):
        curl_path = '/usr/bin/curl'
        curl_list = [curl_path]
        args = ('curl', 'https://stream.twitter.com/1/statuses/filter.json?track=java', '-u', 'user:pass')
        for arg in args:
            curl_list.append(arg)
            child = subprocess.Popen(
                         curl_list,
                         shell=False,
                         #stdout=subprocess.PIPE)
                         stderr=subprocess.PIPE)
            try:
                out += child.communicate()
                c_out.write(out)
                self.queue.put(c_out)
                self.queue.task_done()
            except KeyboardInterrupt:
                child.kill()

class Starter():
    def __init__(self):
        self.queue = queue
        t = MyThread(self.queue)
        t.daemon=True
        t.start()
        self.next()

    def next(self):
        while True:
            time.sleep(0.5)
            if not self.queue.empty():
                line = self.queue.get(timeout=0.2)
                print '\n\nIM IN STARTER %s' % line
            else:
                print 'waiting for queue'

def main():  
    try:
        Starter()     
    except KeyboardInterrupt, e:
        print 'Stopping'
        raise

main() 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:20:43.533

您似乎对 subprocess 的参数感到困惑...... args 列表应该是您将用于 curl 的命令的所有不同部分，您目前正在以一种不可行的方式将它们放在一起与子流程一起工作。你的 curl_list 应该看起来更像这样......

```
curl_path = '/usr/bin/curl'
curl_list = [curl_path, 'https://stream.twitter.com/1/statuses/filter.json?track=java', '-u', 'user:pass'] 
```

您目前还使用了不必要的 for ......您不想循环遍历该列表，您只想将其传递给将适当处理它的子进程。而且您还希望 stdout 从中获得结果，因此您还需要在其中包含管道。

IE，整个事情应该是......

```
def run(self):
    curl_path = '/usr/bin/curl'
    curl_list = [curl_path, 'https://stream.twitter.com/1/statuses/filter.json?track=java', '-u', 'user:pass']

    child = subprocess.Popen(curl_list,
                             shell=False,
                             stdout=subprocess.PIPE,
                             stderr=subprocess.PIPE)
    try:
        out += child.communicate()[0]
        c_out.write(out)
        self.queue.put(c_out)
        self.queue.task_done()
        except KeyboardInterrupt:
            child.kill() 
```

可能想再看[一下子流程文档](http://docs.python.org/2/library/subprocess.html)以更好地理解上述更改。我实际上并没有通过解释器运行它，所以它可能并不完美，但它应该让你朝着正确的方向前进......祝你好运！

# sql - 如何检查 SQL Server 2008 脚本在 SQL Server 2005 上是否正常工作

> ID：16216589
> 
> 赞同：0
> 
> 时间：2013-04-25T13:51:05.623
> 
> 标签：sql, sql-server-2008, sql-server-2005

有没有办法（一种工具）来检查 SQL Server 2008 脚本是否可以在 SQL Server 2005 上运行？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:35:36.573

打开SQL Management studio，rt鼠标点击数据库名称，选择属性，选择选项，设置兼容级别。测试。众所周知，当兼容性级别设置为（较低）级别时，功能被禁用并且错误完全符合所选级别。MS有点不愿意提交[http://msdn.microsoft.com/en-gb/library/bb510680.aspx](http://msdn.microsoft.com/en-gb/library/bb510680.aspx)，但实际上我没有发现任何问题。您当然可以安装 2005 构建和批量插入的实例以进行真正彻底的检查。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-04-25T13:54:52.447

您可以将**[SQL Fiddle 用于 SQL Server 2008](http://www.sqlfiddle.com/#!3)**

在**左上角**，您可以`select`看到**RDMS**

# c# - 在第二个cs页面中引用第一个cs页面的功能

> ID：16216591
> 
> 赞同：0
> 
> 时间：2013-04-25T13:51:09.153
> 
> 标签：c#, selenium

我们是否可以在一个cs页面中定义一个函数并在另一个cs页面中引用该函数，以便第二个cs页面中设计的功能与第一个cs页面函数一起执行？

比如..在第一个cs页面

```
Iwebdriver driver;
driver=new firefoxdriver(); 
```

在第 2 个 cs 页面中，我包含了许多基于上述功能的功能，那么如何将其称为第 2 个 cs 页面中的函数，以便代码简洁存在？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:51:55.013

这是一个措辞非常糟糕的问题，但我只能假设您想要实现的基本上是能够在另一个测试中调用一个测试中的函数，或者更确切地说是另一个类中的*一个**类*。

这是基本的 C#。

您的代码应该以一种很容易实现的方式进行拆分。所以这意味着您的*测试*与您的实际逻辑完全分开。

使用页面对象是一种方法：

[http://code.google.com/p/selenium/wiki/PageObjects](http://code.google.com/p/selenium/wiki/PageObjects)

这意味着您有一个类似的页面：

```
public class LoginPage
{
    public HomePage Login(string username, string password)
    {
        // do the login stuff
        // return the home page
    }
}

public class HomePage
{
    // some logic related to what the user can see on the home page.
} 
```

您可以在如下测试中调用它：

```
var loginPage = new LoginPage();
HomePage homePage = loginPage.Login(username, password); 
```

由于它现在是分开的，你可以`LoginPage.Login()`从*任何地方*打电话。

这里的关键是**不要**将所有逻辑捆绑到测试本身中。*如在每个*测试中，不要复制/粘贴登录代码以登录您的网站。像上面一样存储它。测试应该是您采取的步骤，页面对象应该定义**如何**采取这些步骤。这样你就可以实现你的目标。

# ios - 如何限制文本长度以适应动态创建的 UITextField 的宽度

> ID：16216592
> 
> 赞同：2
> 
> 时间：2013-04-25T13:51:10.660
> 
> 标签：ios, objective-c, xcode, ios6, uitextfield

我已经动态创建`UITextFields`了具有不同宽度和字体大小的。我知道如何限制文本的长度`UITextField`，但我只能用固定的字符数来做到这一点。我需要的是动态限制字符数以适应某些`UITextFields`. 我想每次输入新字符时，我都应该使用`CGSize`并获取特定字体大小的文本长度，而不是将其与 UITextField 宽度进行比较，并在超出`UITextField`宽度时限制字符数。不幸的是，我不确定如何启动它。有谁知道任何可以帮助我的代码片段？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:21:27.773

您可以从以下代码开始：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *text = textField.text;
    text = [text stringByReplacingCharactersInRange:range withString:string];
    CGSize textSize = [text sizeWithFont:textField.font];

    return (textSize.width < textField.bounds.size.width) ? YES : NO;
} 
```

* * *

在 ios 7 之后，它将 sizeWithFont 更改为 sizeWithAttributes。

这是更改的代码：

```
- (BOOL)textField:(UITextField *)textField shouldChangeCharactersInRange:(NSRange)range replacementString:(NSString *)string
{
    NSString *text = textField.text;
    text = [text stringByReplacingCharactersInRange:range withString:string];
    CGSize textSize = [text sizeWithAttributes:@{NSFontAttributeName:textField.font}];

    return (textSize.width < textField.bounds.size.width) ? YES : NO;
} 
```

# html - 如何从嵌入式视频中删除控件？

> ID：16216593
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:51:25.363
> 
> 标签：html, embed

从这个嵌入式视频中删除 UI 控件实际上是不可能的吗？
[http://www.w3schools.com/html/tryit.asp?filename=tryhtml_objectmplayer](http://www.w3schools.com/html/tryit.asp?filename=tryhtml_objectmplayer)

```
<param showcontrols="false"> 
<param uiMode="invisible"> 
```

...显示控制=“假”...

不隐藏控件 - 与“显示控件”的自然英文含义相反

编辑：--以下工作和跨浏览器（直到 IE10）...
EDIT2：--但以下似乎也导致 NEVER-ENDING-SENDRESPONSE-STATUS 工作进程（参见[https://stackoverflow.com/questions /16790199/iis7-5-wmv-requests-cause-many-workerprocesses-in-never-ending-sendresponse-stat](https://stackoverflow.com/questions/16790199/iis7-5-wmv-requests-cause-many-workerprocesses-in-never-ending-sendresponse-stat) )

```
<!--[if IE]>
    <object id="MediaPlayer" style="height:100%" classid="CLSID:22D6f312-B0F6-11D0-94AB-0080C74C7E95" standby="Loading Windows Media Player components..." type="application/x-oleobject" codebase="http://activex.microsoft.com/activex/controls/mplayer/en/nsmp2inf.cab#Version=6,4,7,1112">

        <param name="filename" value="3d.wmv" />
        <param name="Showcontrols" value="false" />
        <param name="autoStart" value="True" />
        <param name="wmode" value="transparent" />
    </object>
    <![endif]-->

    <!--[if !IE]><!-->
    <object id="mediaplayer" type="application/x-ms-wmp" data="3d.wmv" width="100%" height="80%">
        <param name="src" value="3d.wmv" valuetype="ref" type="3d.wmv">

        <param name="autoStart" value="1">
        <param name="ShowControls" value="0">
        <param name="Showcontrols" value="false" />
        <param name="autoStart" value="True" />
        <param name="wmode" value="transparent" />
        <param name="ShowDisplay" value="0">
        <param name="ShowStatusBar" value="0">
        <param name="playcount" value="10">
        <param name="autoRewind" value="1">
        <param name="displaysize" value="0">
        <param name="stretchtofit" value="1">
        <param name="enableContextMenu" value="0">
        <param name="uiMode" value="none">
        <embed type="application/x-mplayer2" src="3d.wmv" width="100%" height="100%" autostart="true" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/"></embed>
    </object> 
    <!--<![endif]--> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:08:20.580

以您的 W3Schools 示例代码为例 -

```
<!DOCTYPE html>
<html>
<body>

<object width="100%" height="100%"
type="video/x-ms-asf" url="3d.wmv" data="3d.wmv"
classid="CLSID:6BF52A52-394A-11d3-B153-00C04F79FAA6">
<param name="url" value="3d.wmv">
<param name="filename" value="3d.wmv">
<param name="autostart" value="1">
<param name="uiMode" value="full">
<param name="autosize" value="1">
<param name="playcount" value="1">                              
<embed type="application/x-mplayer2" src="3d.wmv" width="100%" height="100%" autostart="true" showcontrols="true" pluginspage="http://www.microsoft.com/Windows/MediaPlayer/"></embed>
</object>

</body>
</html> 
```

改变

```
<embed... showcontrols="true"... 
```

至

```
<embed... showcontrols="false"... 
```

# c# - 即使我映射了我的路线，仍然会收到 404

> ID：16216606
> 
> 赞同：2
> 
> 时间：2013-04-25T13:52:08.590
> 
> 标签：c#, asp.net, asp.net-mvc

我一直在处理一些关于路线的问题。我已经定义了路线，但我不断收到 404。以下是路线：

```
routes.MapRoute(
    name: "Default",
    url: "{controller}",
    defaults: new { controller = "Login", action = "Login" }
);

routes.MapRoute(
    name: "Home",
    url: "{controller}/{Date}",
    defaults: new { controller = "Home", action = "Home", Date = UrlParameter.Optional }
);

routes.MapRoute(
    name: "Calendar",
    url: "{controller}/{action}",
    defaults: new { controller = "Calendar", action = "Index" }
);

routes.MapRoute(
    name: "Act",
    url: "{controller}",
    defaults: new { controller = "Act", action = "New" }
);

localhost:51081/login works! 
localhost:51081/Home/25.04.2013 works! 
localhost:51081/act doesnt work! 
localhost:51081/calendar/index doesnt work! 
```

这里“登录”和“家庭”有效，但“日历”和“行为”无效。当我将“日历”映射移动到顶部时，“家庭”映射不起作用。你如何映射你的页面？

基本上我不希望动作名称出现在 url ex 上：`http://localhost:51081/Home/Home/25.04.2013.`我想看到它`http://localhost:51081/Home/25.04.2013 or http://localhost:51081/calendar`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:58:51.747

就像@MarcGravell 所说：您只为例外添加特殊规则

在您的情况下，路线日历和主页是相同的。您可以通过将 {controller} 替换为 Home 来更具体地映射您的路线，因为该路线不是那么动态并且实际上是一个例外（它忽略了操作）

```
 routes.MapRoute(
            name: "Home",
            url: "Home/{Date}",
            defaults: new { controller = "Home", action = "Home", Date = UrlParameter.Optional }
        ); 
```

行动与日历相同，因此您不需要两条路线。只需调用 Act/New 而不是仅调用 Act。

对于默认用途：

```
routes.MapRoute(
    name: "Default",
    url: "{controller}/{action}",
    defaults: new { controller = "Login", action = "Login" }
); 
```

并将其放在偏离路线的底部。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T13:57:21.400

```
routes.MapRoute(
            name: "Default",
            url: "{controller}",
            defaults: new { controller = "Login", action = "Login" }
        ); 
```

这定义了一个匹配`/`和的路由`/anything`；会`/`尝试使用`LoginController.Login`，并且`/anything`会尝试使用`anythingController.Login`。请注意，这条路线在任何时候都不允许它执行除`Login`.

如果你把所有这些都扔掉，并使用类似的东西：

```
routes.MapRoute(
         name: "Default",
         url: "{controller}/{action}",
         defaults: new { controller = "Home", action = "Index" }
         ); 
```

那么这将匹配任何`/`,`/anything`和`/anything/anythingelse`.

*   `/`将映射到`HomeController.Index`
*   `/anything`将映射到`anythingController.Index`
*   `/anything/anythingelse`将映射到`anythingController.anythingelse`

希望这能解释映射如何根据默认值工作。

如果您有任何*特定*路由，则应在此一揽子默认设置**之前添加它们。**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T13:55:29.620

请记住，asp.net 路由是按照将它们添加到`MapRoute`表中的顺序进行评估的。

您的“默认”和“行动”路线是相同的，因为它们具有相同的模式。“行动”可能永远不会受到打击。

此外，您的“默认”路线非常通用，大多数请求都会满足它。您应该按照最具体（例如硬编码路线）到最不具体（例如所有占位符）的顺序添加您的路线。

因此，如果我有 foo/bar 的请求，它将落入您的“默认”路由，因为“foo”将被解释为控制器——然后它将寻找可能不存在的“bar”资源. 所以你会得到一个404。

您的“家”和“日历”路线也是相同的模式，所以只有一个会被击中（这将是第一个定义的）。

使您的路线更具体，并从最具体到最不具体的方式定义它们。

祝你好运！

# objective-c - Obj-C 内省：如何避免一直强制转换？

> ID：16216609
> 
> 赞同：1
> 
> 时间：2013-04-25T13:52:10.500
> 
> 标签：objective-c, casting, enumeration, introspection

大家好，我一直在研究 Objective-C 中的一些执行对象自省的枚举例程。特别是，在调整它们的属性和/或调用它们的方法之前，我正在快速枚举`NSSet`并确保其中的对象属于类`BBBallView`（我同意这是一个相当不幸的名称）。

然而，为了让解析器和编译器满意，我最终在每一行都将对象转换为它的类；此外，为了访问其属性，对象的强制转换必须在括号中，否则点符号将不起作用。这会导致代码有些混乱：

```
for (id otherBall in self.gameField.subviews) {
    if ([otherBall isKindOfClass:[BBBallView class]]) {
        if ( !((BBBallView *)otherBall).isEnlarged ) {
            CGRect otherFrame = ((BBBallView *)otherBall).frame;
            /* ... */
        }
    }
} 
```

有没有办法告诉编译器“此时我知道这`otherBall`是 a `BBBallView`，所以不要再告诉我它不响应这些选择器和属性”？这样，一个人可以写：

```
for (id otherBall in self.gameField.subviews) {
    if ([otherBall isKindOfClass:[BBBallView class]]) {
        if ( !otherBall.isEnlarged ) {
            CGRect otherFrame = otherBall.frame;
            /* ... */
        }
    }
} 
```

等等。

我试过`otherBall = (BBBallView *)otherBall`了，但是“默认情况下不能在 ARC 中修改快速枚举变量”。更改枚举变量以`__strong id`修复它，但没有帮助任何后续行给出错误，例如“`isEnlarged`在类型'const __strong id'的对象上找不到属性”，所以我回到第一方。

我什至不确定为什么会发生这种情况：当变量是 type 时，编译器不应该置身事外`id`吗？无论如何，在需要对对象的属性执行多次计算的方法中，整个考验尤其混乱，因为所有这些括号很快就会变得不可读。

有没有办法解决？

提前致谢！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T14:05:47.490

您可以创建具有正确类型的本地临时文件，也可以不使用点表示法。

1.  当地温度

    ```
    for (UIView *view in self.gameField.subviews) {
      if ([view isKindOfClass:[BBBallView class]]) {
        BBBallView *ballView = view;
        if (!ballView.isEnlarged) {
          CGRect otherFrame = ballView.frame;
          /* ... */
        }
      }
    } 
    ```

2.  不要使用点符号

    ```
    for (id otherBall in self.gameField.subviews) {
      if ([otherBall isKindOfClass:[BBBallView class]]) {
        if ( ![otherBall isEnlarged]) {
          CGRect otherFrame = [otherBall frame];
          /* ... */
        }
      }
    } 
    ```

如果我只做几件事，我会很想不使用点符号。如果阅读变得尴尬并且有很多访问权限，那么我会考虑本地临时

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:05:03.723

我认为您正在苦苦挣扎，因为逻辑似乎放错了地方。语言与你对抗是因为你的程序结构，而不是因为语言有缺陷。

子视图的父类型真的合适吗？或者您是否违反了 Liskov 替换原则，将圆形物体塞入方形中？

您还可以问，从外部检查 BBBallView 逻辑的内部是否真的合适？您可以将逻辑移动到适当的类中吗？

# android - 自定义 android DialogFragment

> ID：16216615
> 
> 赞同：3
> 
> 时间：2013-04-25T13:52:26.300
> 
> 标签：android, android-dialogfragment

我是 Android 的初级程序员。现在我在进行了一个小型应用程序开发之后，我有一个 dialogFragment。一切都很好，它也显示了对话框。但是我在配色方案方面遇到了一些困难。我已经更改了布局的背景颜色，但它的标题栏颜色保持不变，白色，标题文本颜色为蓝色，下方有一条蓝线（需要将其更改为绿色）。我怎么能做到这一点？请帮我

这是我的片段代码

```
public class ClientInfofrag extends DialogFragment {

public ClientInfofrag()
{

}

@Override
public View onCreateView(LayoutInflater inflater, ViewGroup container,
        Bundle savedInstanceState) {
     View view = inflater.inflate(R.layout.clientinfolayout, container);
     getDialog().setTitle("Client Info");

     return view;
}
} 
```

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:02:30.147

由于您使用的是该`.setTitle()`方法，因此它仅使用默认设置设置标题，例如白色背景。如果要自定义标题背景颜色，则需要有一个 xml 来执行此操作。此外，对于 DialogFragments，根据我的知识和经验，您应该使用`public Dialog onCreateDialog`而不是`public View onCreateView`. 这样你就返回一个对话框，而不是一个视图，然后你可以调用`.show()`它，它会显示你的对话框。这是一个例子：

```
@Override
public Dialog onCreateDialog(Bundle savedInstanceState) {
    AlertDialog.Builder builder = new AlertDialog.Builder(getActivity());
    LayoutInflater inflater = getActivity().getLayoutInflater();

    Bundle args = getArguments();
    currentName = args.getString(ARG_CURRENT_NAME);

    builder.setView(inflater.inflate(R.layout.name_dialog, null));
    builder.setTitle("Rename Rapper Program");
    builder.setMessage("Enter a new name for " + currentName + ":"); 
    builder.setPositiveButton("Rename", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            newName = (EditText) getDialog().findViewById(R.id.new_name);
            newProgName = newName.getText().toString();
            mRename.renameProgram(currentName, newProgName);
        }
    });
    builder.setNegativeButton("Cancel", new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialog, int which) {
            dismiss();
        }
    });

    return builder.create();
} 
```

这是一个示例对话框 xml，尽管它不是在上面的 DialogFragment 中被夸大的 xml：

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:orientation="vertical"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content">
    <TextView android:drawableLeft="@drawable/login"
        android:layout_width="match_parent"
        android:layout_height="64dp"
        android:background="#FCD116"
        android:text="@string/login"
        android:textSize="36sp"/>
    <EditText android:id="@+id/username"
        android:inputType="textEmailAddress"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="16dp"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="4dp"
        android:layout_marginBottom="4dp"
        android:hint="@string/un"/>
    <EditText android:id="@+id/password"
        android:inputType="textPassword"
        android:layout_width="match_parent"
        android:layout_height="wrap_content"
        android:layout_marginTop="4dp"
        android:layout_marginLeft="4dp"
        android:layout_marginRight="4dp"
        android:layout_marginBottom="16dp"
        android:fontFamily="sans-serif"
        android:hint="@string/pw"/>

</LinearLayout> 
```

这`LinearLayout`是设置要相应放置的其余子项。第一个`TextView`充当我的“标题”栏，然后`EditText`s 是对话框的“主体”。我在 xml 中没有按钮，因为我`onCreateDialog`在上面的其他代码片段中以编程方式设置了这些按钮。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-12T13:16:32.420

如果您禁用默认窗口标题，则上述示例（TronicZomB）可能会起作用：

```
// Remove the title
getDialog().getWindow().requestFeature(Window.FEATURE_NO_TITLE); 
```

尝试一下！

# bash - How to make bash execute a script every time it exits?

> ID：16216623
> 
> 赞同：2
> 
> 时间：2013-04-25T13:52:57.360
> 
> 标签：bash

I want to execute some commands every time I exit from bash, but cannot find a way to do it. There is a ~/.bash_logout file for when you are logging out, but normally we use interactive shell instead of login shell, so this is not very useful for this purpose.

Is there a way to do this? Thanks!

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T13:57:33.423

您可以捕获 EXIT 信号。

```
exit_handler () {
  # code to run on exit
}

trap 'exit_handler' EXIT 
```

* * *

从技术上讲，`trap exit_handler EXIT`也可以。我引用它是为了强调 to 的第一个参数`trap`是一个本质上传递给 的字符串，`eval`而不一定是单个函数名。你可以很容易地写

```
trap 'do_this; do_that; if [[ $PICKY == yes ]]; then one_more_thing; fi' EXIT 
```

而不是将您的代码收集到一个函数中。

# mysql - 在日期时间列中插入值时出错

> ID：16216626
> 
> 赞同：0
> 
> 时间：2013-04-25T13:52:59.467
> 
> 标签：mysql

我正在尝试在表中插入一条记录（来自 java 代码），但我收到“ERROR 1292 (22007)”。时间戳列的类型为“日期时间”以下是我的查询

```
insert into Alert(name,timestamp,location,message) values ("aaa", "2013-04-25 5:47:3PM","XYZ", "bla bla bla"); 
```

错误

```
ERROR 1292 (22007): Incorrect datetime value: "2013-04-25 5:47:3PM" for column 'Timestamp' at row 1 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:56:01.023

`timestamp`将查询中的值更改为`2013-04-24 17:47:03`。列的格式`datetime`必须是`yyyy-MM-dd HH:mm:ss`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T13:56:43.810

您需要使用 24 小时制并摆脱 AM/PM。这将在您尝试插入问题的同时插入：

```
insert into Alert(name,timestamp,location,message)
  values ("aaa", '2013-04-25 17:47:3',"XYZ", "bla bla bla"); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T13:58:15.610

您的日期时间格式错误。尝试：

```
2013-04-25 05:47:03 
```

这是因为`datetime`基于 24 小时格式。

这是有关 MySQL 中日期格式的文档：http: [//dev.mysql.com/doc/refman/5.1/en/datetime.html](http://dev.mysql.com/doc/refman/5.1/en/datetime.html)

# d3.js - d3.js - 将链接大小设置为强制布局

> ID：16216630
> 
> 赞同：2
> 
> 时间：2013-04-25T13:53:07.910
> 
> 标签：d3.js, force-layout

基于 Michael Bostock 的“分子”示例，可在此 url 获得：http: [//bl.ocks.org/mbostock/3037015](http://bl.ocks.org/mbostock/3037015)。

我正在尝试使用多个值设置链接的大小。为此，我禁用了“重力”，在“电荷”中放置了一个重要的负值，并将第一个节点固定在窗口的中心。

```
var force = d3.layout.force()
    .size([width, height])
    .charge(-800)
    .friction(0.45)
    .linkStrength(1)
    .gravity(0)
    .linkDistance(function(d) { 
        return radius(d.target.size * 10);
     }); 
```

我的问题是 ( ![如下图所示](https://i.stack.imgur.com/skZtp.png)) 有时链接的大小是不同的，特别是对于定义了一点价值的链接。

有人知道我的问题的一个好的解决方案吗？

你可以在这里看到我的代码：http: [//jsfiddle.net/awPn3/](http://jsfiddle.net/awPn3/)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:03:11.347

力布局的一个特点是链接的长度是可变的——关键是节点是自动布局的，你不必担心。您可以实施检查以确保距离始终是您想要的距离，但这将非常困难。

`linkDistance`您已经使用的功能是（弱）强制执行此类约束的唯一直接方法。如果这还不够，那么就没有简单的方法可以减轻它。您唯一的选择是在模拟的每个滴答声中执行我上面提到的检查。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-01-25T12:45:41.860

我想当你修改你使用的函数时它已经有点帮助了，同时也考虑了两端对象的大小。让解决方案针对设置两个对象之间的“可见”距离进行优化：例如，沿着 (d.source.size+d.target.size) + desired_distance 的线

# javascript - Can a javascript dropdown in-email like G+ be implemented by anyone, or only Google?

> ID：16216633
> 
> 赞同：2
> 
> 时间：2013-04-25T13:53:17.147
> 
> 标签：javascript, email, gmail, google-plus, html-email

Noticed today this great trinket from Google: in their notification emails upon new G+ followers, the recipient can add someone to a circle directly from a dropdown in the email. (See below).

The HTML for the page clearly shows the related `div` has been attached to the end of the body, suggesting that the div di not 'ship with' the email and then was displayed via in-email javascript.

Is this kind of interactivity available to any engineer / product developer? Is this only something that Google gets to do because they control Gmail services?

* * *

![enter image description here](https://i.stack.imgur.com/CsxKW.png)

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-26T13:26:21.343

您看到的 Google+ 集成特定于 Gmail：

[http://gmailblog.blogspot.com/2012/05/better-google-notification-experience.html](http://gmailblog.blogspot.com/2012/05/better-google-notification-experience.html)

一般来说，出于安全考虑，您将无法在 gmail 或其他网络邮件提供商中运行 javascript。有一些方法可以制作更具交互性的电子邮件，但它们通常是特定于平台的。例如：

*   Gmail 提供[上下文小工具](https://developers.google.com/google-apps/gmail/contextual_gadgets#what_is_a_gmail_contextual_gadget)（由 Xobni 和其他收件箱应用程序使用）
*   Outlook/Hotmail 提供[Active Views](http://blogs.windows.com/windows_live/b/windowslive/archive/2010/12/16/hotmail-introduces-interactive-email-using-active-views.aspx)

# jquery - jQuery Aim Menu selector

> ID：16216634
> 
> 赞同：3
> 
> 时间：2013-04-25T13:53:19.723
> 
> 标签：jquery, drupal, menu

I am actualy trying to implement the jquery aim menu plugin on my page

What I cant handle is that drupal sets the first and secound level of the menu at the exact same classes and i have no idea what i should tell jquery to use as his selector.

I started with something like that about 3 hours ago

```
$("#main-menu").menuAim({
    activate: function(a){
        $(this).children('ul').css('display','block');
    },  // fired on row activation
    deactivate: function(a){
        $(this).children('ul').css('display','none');

    }  // fired on row deactivation
}); 
```

Any idea how to fix that?

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2015-07-30T15:32:07.247

尝试这个：

```
$( "#main-menu" ).addClass( "new_class" );

$(".new_class").menuAim({
    activate: function(a){
        $(this).children('ul').css('display','block');
    },  // fired on row activation
    deactivate: function(a){
        $(this).children('ul').css('display','none');

    }  // fired on row deactivation
}); 
```

这应该确保没有冲突。

# php - 运行脚本后，浏览器挂起。其他浏览器工作

> ID：16216640
> 
> 赞同：0
> 
> 时间：2013-04-25T13:53:29.440
> 
> 标签：php, browser

我写了一个脚本，从数据库中导出数据，然后把它放到 XML 文件中。脚本在具有正确 break 语句的无限 while 循环中工作（任务完成后）。任务需要 10 分钟。当我发出 http 请求以开始工作时，我正在使用的浏览器完全冻结 - 不仅是请求的 URL，而且是整个主机。在使用其他浏览器的同时，我可以浏览包含我的脚本的网页。

我的 PHP 脚本片段：

```
while(true)
{
    if($i === $z)
    {
        break;
    }

    foreach((array)$this->project as $project)
    {
        makeYourJob();
        usleep(1000000);
        $z++;
    }
    usleep(2000000);
} 
```

使用此 jquery 代码调用脚本（我键入包含此代码的 HTML 页面的地址）：

```
 $.get("cron.php"); 
```

我也尝试在 URL 栏中输入 cron.php 并且浏览器也挂断了。为什么运行脚本的浏览器会冻结？如何避免这种情况？

编辑：通过 ajax 或用户发出简单的 get/post 请求不会解决问题。这篇文章不是重复的。这是一个解决方案：

```
exec("wget http://www.domain.com/scrip_name.php > /dev/null &"); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:00:18.727

显然，没有调用中断无限循环的 if 语句。

你能检查 $i 和 $z 的初始化值吗？此外， === 检查 2 个变量是否具有相同的类型和相同的值。我建议您检查 $i 和 $z 变量的类型。

# java - 使用带有“旧”对象引用的 Builder 模式创建新对象

> ID：16216642
> 
> 赞同：8
> 
> 时间：2013-04-25T13:53:30.867
> 
> 标签：java, design-patterns, builder

我正在玩 Builder 模式并被困在如何将新的“属性”添加到新创建的对象中：

```
public class MsProjectTaskData {
  private boolean isAlreadyTransfered;
  private String req;    

   public static class Builder {    
    private boolean isAlreadyTransfered = false;

    public Builder withTransfered(boolean val) {
        isAlreadyTransfered = val; 
        return this;
    }    
    public MsProjectTaskData build() {
        return new MsProjectTaskData(this);
    }
   }

   private MsProjectTaskData(Builder builder) {
     isAlreadyTransfered = builder.isAlreadyTransfered;
   }

  public MsProjectTaskData(String req) {
    this.req = req;
  }
} 
```

我可以像这样使用 Builder 创建一个新对象：

```
MsProjectTaskData data = new MsProjectTaskData.Builder().withTransfered(true).build(); 
```

但是使用这种方法，`req`来自新创建对象的字符串会丢失（当然）。

是否有可能使用新的集合`isAlreadyTransfered`变量和来自“旧”对象**的“旧”`req`字符串创建一个新对象？**

也许我必须将旧对象引用传递给 Builder，但我不知道该怎么做。也许使用 Builder 模式对于这种方法并没有真正的用处？

**编辑：（来自尤金的评论后）**

想想，我明白了：

```
public static class Builder {   
 private boolean isAlreadyTransfered = false;
 private MsProjectTaskData data;

 public Builder(MsProjectTaskData data) {
     this.data = data;
 }

 public Builder withTransfered(boolean val) {
     isAlreadyTransfered = val; 
     data.setAlreadyTransfered(isAlreadyTransfered);
     return this;
 }   
 public MsProjectTaskData build() {
     return data;
 }
} 
```

似乎工作或上面的代码有问题？我可以不加考虑地使用这种方法吗？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2013-04-25T14:02:32.587

使 Builder 构造函数将“旧”对象作为参数，并将您想要的任何内容设置为新对象。

**编辑**

您需要阅读更多关于构建器模式的内容，以便更好地了解它是什么以及您是否*真的*需要它。

一般的想法是当您有*可选*元素时使用构建器模式。Effective Java Item 2 是你最好的朋友。

对于您的类，如果您想从另一个对象构建一个对象并同时使用 Builder 模式，您

1.  在 Builder 构造函数中传递“旧”对象
2.  *从*或*fromOld*创建一个方法等。

那看起来怎么样？我将只提供第一个，你可以自己弄清楚第二个。

```
class MsProjectTaskData {
    private final String firstname;
    private final String lastname;
    private final int age;

    private MsProjectTaskData(Builder builder){
        this.firstname = builder.firstname;
        this.lastname  = builder.lastname;
        this.age       = builder.age;
    }

    public static final class Builder{
        //fields that are REQUIRED must be private final
        private final String firstname;
        private final String lastname;

        //fields that are optional are not final
        private int age;

        public Builder(String firstname, String lastname){
            this.firstname = firstname;
            this.lastname  = lastname;
        }

        public Builder(MsProjectTaskData data){
            this.firstname = data.firstname; 
            this.lastname  = data.lastname;
        }

        public Builder age(int val){
            this.age = val; return this;
        }

        public MsProjectTaskData build(){
            return new MsProjectTaskData(this);
        }
    }

    public String getFirstname() {
         return firstname;
    }

    public String getLastname() {
         return lastname;
    }

    public int getAge() {
         return age;
    }
} 
```

以及如何从另一个对象创建一个对象：

```
 MsProjectTaskData.Builder builder = new MsProjectTaskData.Builder("Bob", "Smith");
   MsProjectTaskData oldObj = builder.age(23).build();
   MsProjectTaskData.Builder newBuilder = new MsProjectTaskData.Builder(oldObj);
   MsProjectTaskData newObj = newBuilder.age(57).build();
   System.out.println(newObj.getFirstname() + " " + newObj.getLastname() + " " + newObj.getAge()); // Bob Smith 57 
```

# sql-server - 修改外键创建分布式数据库

> ID：16216657
> 
> 赞同：0
> 
> 时间：2013-04-25T13:53:55.983
> 
> 标签：sql-server, foreign-keys, distributed-database

我正在分发一个数据库，但我有两个表，其中包含对其他服务器中其他数据库的外键引用。我已经搜索并发现我无法在其他服务器中创建引用另一个数据库中的表的外键。但是，我该如何解决这个问题？创建视图？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:07:18.203

在需要引用“其他服务器”的实例中，引入“其他服务器”作为链接服务器，然后使用 INSTED OF 触发器来验证 FK 约束。

# c# - 如何在 C# 中防止另一个应用程序移动（MS Excel 2010）

> ID：16216660
> 
> 赞同：4
> 
> 时间：2013-04-25T13:54:10.477
> 
> 标签：c#, winapi

我需要我的应用程序来打开 Excel 2010 并将其放置在我的应用程序的特定区域中。我还需要 Excel 不可调整大小、不可移动并消除所有菜单交互（关闭、最大化、最小化）

我已经找到了几乎所有东西的解决方案，除了让它无法移动。我尝试使用 SetWindowPos 并设置 SWP_NOMOVE 标志和其他一些标志，但我根本没有成功。

--规格：我使用的是 WPF C#.NET 4.0 和 MS Excel 2010。

--下面是我自带的方法。除了 SetWindowPos 之外，一切都按预期工作（它根本没有任何效果）

```
public static void StartExcel(string p_processArguments, int p_x, int p_y, int p_height, int p_width,
                                  bool p_startMin = true, bool p_setForeground = true, bool p_useShell = true,
                                  bool p_waitInput = true, bool p_setNewStyles = true, bool p_removeMenu = true)
    {
        //Make sure there is no excel opened (Kill them all -  if any)
        CloseAllExcelProcesses(true);

        //Make the most basic validations and required info.           
        if (!ValidateProcessArgument(p_processArguments))
            throw new Exception("Process' argument is invalid or incorrectly setted. " + p_processArguments);

        ProcessStartInfo psiApp = new ProcessStartInfo("excel", p_processArguments);
        if (p_useShell)
            psiApp.UseShellExecute = true;
        else
            psiApp.UseShellExecute = false;

        if (p_startMin)
            psiApp.WindowStyle = ProcessWindowStyle.Minimized;

        Process pApp = Process.Start(psiApp);
        if (p_waitInput)
            pApp.WaitForInputIdle();

        //Wait for the app to receive the window handle(ID) max limit of 3sec.
        for (int i = 0; i < 25; i++)
        {
            System.Threading.Thread.Sleep(100);
        }

        if (pApp.MainWindowHandle != (IntPtr)0)
        {
            if (p_startMin) //Now restore its state
                Win32Import.ShowWindow(pApp.MainWindowHandle, WindowShowStyle.ShowNormal);

            //Set Foreground
            if (p_setForeground)
                Win32Import.SetForegroundWindow(pApp.MainWindowHandle);

            if (p_setNewStyles)
            {
                //Make it an Overlapped Window (Which has no size border, title bar and etc).
                int style = Win32Import.GetWindowLong(pApp.MainWindowHandle, Win32Import.GWL_STYLE);
                Win32Import.SetWindowLong(pApp.MainWindowHandle, Win32Import.GWL_STYLE, (uint)(style & ~Win32.WindowStyles.WS_OVERLAPPEDWINDOW));

                //NOT WORKING - Apply some flags, to make it unmovable.
                Win32Import.SetWindowPos(pApp.MainWindowHandle, (IntPtr)0, 0, 0, 0, 0, Win32.SWP.NOMOVE);
                Win32Import.UpdateWindow(pApp.MainWindowHandle);
            }

            if (p_removeMenu)
            {                    
                //Get the app original menu.
                IntPtr hMenu = Win32Import.GetSystemMenu(pApp.MainWindowHandle, false);
                //Get the amount of menu the app has.
                int count = Win32Import.GetMenuItemCount(hMenu);

                //Remove all existing main menus.
                for (uint i = 0; i < count; i++)
                    Win32Import.RemoveMenu(hMenu, i, (Win32Import.MF_BYPOSITION | Win32Import.MF_REMOVE));

                //Force a redraw.
                Win32Import.DrawMenuBar(pApp.MainWindowHandle);
            }

            //Move the window to the specified location and size (set new position).                
            Win32Import.MoveWindow(pApp.MainWindowHandle, p_x, p_y, p_width, p_height, true);                
        }
        else
        {
            throw new Exception("StartEmbeddedApp - Couldn't get the embedded app handle.");
        }
    } 
```

我还提出了一些不同的想法，例如拦截 Excel WM_Message（可能通过使用 HWNDSource）。欢迎任何不太复杂的想法来实现这一点！

在此先感谢，路易斯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:38:44.653

I think you are mistaken about the SWP_NOMOVE parameter. That parameter does not mean that the window will not be movable, it just means that the x,y parameters will be ignored during that specific call to the method SetWindowPos. The goal of that flag is to use the function SetWindowPos for changing the size of the target window without changing its position.

[From SetWindowPos in MSDN:](http://msdn.microsoft.com/en-ca/library/windows/desktop/ms633545(v=vs.85).aspx)

**SWP_NOMOVE** 0x0002 Retains the current position (ignores X and Y parameters).

Something that you could try is to create a custom window on your application that handles all messages related to size and position (examples:WM_SIZE, WM_SIZING, WM_WINDOWPOSCHANGED, WM_WINDOWPOSCHANGING, etc) to prevent modifications, then set your excel window as a child window of your custom window.

You could also try [to just remove the title bar](https://stackoverflow.com/questions/2825528/removing-the-title-bar-of-external-application-using-c-sharp)

# jquery - Spring：在 IE 中对 @ResponseBody 参数编码的 Ajax 调用失败

> ID：16216661
> 
> 赞同：5
> 
> 时间：2013-04-25T13:54:11.267
> 
> 标签：jquery, ajax, spring, spring-mvc, encoding

我正在使用 Spring 并尝试在我的控制器中对 @ResponseBody 进行 ajax 调用。

**更新**

好的，我将我被告知的更改添加到我的 ajax 设置中。我的参数“jtSearchParam”在 IE 中仍然存在相同的编码问题。+ 我收到另一个错误，406，响应标头的内容类型错误。

这是我的新代码

控制器：

```
@RequestMapping(method = RequestMethod.POST, consumes="application/json; charset=utf-8", produces="application/json; charset=utf-8")
    public @ResponseBody JSONObject getUsers(@RequestParam int jtStartIndex, @RequestParam int jtPageSize,
            @RequestParam String jtSorting, @RequestParam String jtSearchParam,
            HttpServletRequest request, HttpServletResponse response) throws JSONException{

        Gson gson = new GsonBuilder()
                .setExclusionStrategies(new UserExclusionStrategy())
                .create();

        List<User> users = userService.findUsers(jtStartIndex ,jtPageSize, jtSorting, jtSearchParam);
        Type userListType = new TypeToken<List<User>>() {}.getType();

        String usersJsonString = gson.toJson(users, userListType);
        int totalRecordCount = userDao.getAmountOfRows(jtSearchParam);

        usersJsonString = "{\"Message\":null,\"Result\":\"OK\",\"Records\":" + usersJsonString + ",\"TotalRecordCount\":" + totalRecordCount + "}";

        JSONObject usersJsonObject = new JSONObject(usersJsonString);

        return usersJsonObject;
    } 
```

如您所见，我设置了内容类型，`produces`但这无济于事。如果我调试响应标头，它看起来像这样：（这会导致浏览器出现 406 Not Acceptable）

![响应头](https://i.stack.imgur.com/nAiNQ.jpg)

还有我的新 ajax 设置：

```
...
headers: { 
                 Accept : "application/json; charset=utf-8",
                "Content-Type": "application/json; charset=utf-8"
            },
            contentType: "application/json; charset=utf-8",
            mimeType:"application/json; charset=UTF-8",
            cache:false,
            type: 'POST',
            dataType: 'json'
... 
```

**而且我的参数在 IE 中看起来还是一样的！**

![IE 调试值](https://i.stack.imgur.com/QVgGA.jpg)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-02T06:40:38.137

好的，json内容类型的问题可以这样解决：

使用 ResponseEntity，您可以更改响应标头的内容类型，这样 ajax 可以正确解释 json 对象，并且您不会收到 406 Http 错误。

```
@RequestMapping(method = RequestMethod.POST)
public ResponseEntity<String> getUsers(@RequestParam int jtStartIndex, @RequestParam int jtPageSize,
        @RequestParam String jtSorting, @RequestParam String jtSearchParam,
        HttpServletRequest request, HttpServletResponse response) throws JSONException{

    HttpHeaders responseHeaders = new HttpHeaders();
    responseHeaders.add("Content-Type", "application/json; charset=utf-8");

    Gson gson = new GsonBuilder()
            .setExclusionStrategies(new UserExclusionStrategy())
            .create();

    List<User> users = userService.findUsers(jtStartIndex ,jtPageSize, jtSorting, jtSearchParam);
    Type userListType = new TypeToken<List<User>>() {}.getType();

    String usersJsonString = gson.toJson(users, userListType);
    int totalRecordCount = userDao.getAmountOfRows(jtSearchParam);

    usersJsonString = "{\"Message\":null,\"Result\":\"OK\",\"Records\":" + usersJsonString + ",\"TotalRecordCount\":" + totalRecordCount + "}";

    return new ResponseEntity<String>(usersJsonString, responseHeaders, HttpStatus.OK);
} 
```

编码问题可以这样解决：

IE 不会对您的“ü、ä 等”进行编码。正确，它只会像这样将它添加到您的 URL：“jtSearchParam=wü”，但它实际上应该看起来像这样：“jtSearchParam=w%C3%BC”（如果不是，您将收到编码错误使用 IE 时的服务器端）

因此，无论何时向 URL 添加某些值，请确保`encodeURI`在实际将其添加到 URL 之前对该值使用 JavaScript 方法 示例：

`encodeURI(jtSearchParam)`

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-29T07:16:31.943

我可以发现您在纯文本和 json 之间使用的内容类型存在冲突

```
dataType: 'json'

contentType: "text/html; charset=utf-8" 
```

我建议您将 json 用于 `application/json`标头和内容类型中的所有部分，也可以在 messageConverters 中添加杰克逊罐子，它会为您将 java 对象转换为 json，只是您需要将返回类型更改`@ResponseBody String`为`@ResponseBody User`当 User 是pojo bean 包含属性的 getter 和 setter。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-30T19:07:03.867

**参数编码问题**

我可以想象发生这种情况的两个原因：

1.  由于某种原因，浏览器认为您的页面未以 UTF-8 编码
2.  你没有包括`CharacterEncodingFilter`

解决了 Spring 用户遇到的`CharacterEncodingFilter`大部分编码问题。它必须是`web.xml`.

```
<filter>
    <filter-name>encodingfilter</filter-name>
    <filter-class>org.springframework.web.filter.CharacterEncodingFilter</filter-class>
    <init-param>
        <param-name>encoding</param-name>
        <param-value>UTF-8</param-value>
    </init-param>
    <init-param>
        <param-name>forceEncoding</param-name>
        <param-value>true</param-value>
    </init-param>

</filter>

<filter-mapping>
    <filter-name>encodingfilter</filter-name>
    <url-pattern>/*</url-pattern>
</filter-mapping> 
```

如果您计划使用 GET 请求并使用 Tomcat，请确保`Connector`服务器配置中的元素具有 property `URIEncoding="utf-8"`。其他服务器可能需要也可能不需要类似的设置。

**JSON返回问题**

这就像添加`Jackson Mapper`到类路径和`@ResponseBody`方法的返回类型一样简单。在您的情况下，我建议创建一个`Message`类似于您的 JSON 响应的类。在最简单的情况下，您的方法可能如下所示：

```
 public @ResponseBody Message getUsers(int jtStartIndex, jtPageSize, String jtSorting, String jtSearchParam) {

      List<User> users = userService.findUsers(jtStartIndex ,jtPageSize, jtSorting, jtSearchParam);
      int totalRecordCount = userDao.getAmountOfRows(jtSearchParam);

      Message message = new Message();
      message.setRecords(users);
      message.setTotalRecordCount(totalRecordCount);

      return message;
  } 
```

我故意省略`@RequestParam`了，因为当方法的参数与请求参数同名时，通常不需要。

如果您使用 jQuery，那么响应的实际内容几乎无关紧要`content-type`，只要内容可以成功解析为 JSON。不过，使用`dataType: 'json'`来防止 jQuery 做出错误的猜测。

`content-type`当然，如果您使用`produces`. 如果您不需要它来缩小请求映射的范围，我建议您摆脱它。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-30T19:44:19.223

我会检查以确保它正在调用您的 json 方法，因为可能还有另一种类似的方法正在返回 text/html。

# c# - 名称空间“clr-namespace:ABC”中不存在名称“XYZ”

> ID：16216662
> 
> 赞同：70
> 
> 时间：2013-04-25T13:54:22.197
> 
> 标签：c#, wpf, xaml

我正在努力创建一些标记扩展并开始获得非常奇怪的 VS 行为。我已经在单独的解决方案中提取并指出了问题。问题是 VS 无法在 XAML 中创建 CLR 对象。

这里是：

**看法：**

```
<Window x:Class="WpfApplication4.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:wpfApplication4="clr-namespace:WpfApplication4">
    <Window.Resources>
        <wpfApplication4:Dog x:Key="doggy" />
    </Window.Resources>
    <Grid />
</Window> 
```

**后面的代码：**

```
using System.Windows;

namespace WpfApplication4
{
    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
    }
} 
```

**狗类：**

```
namespace WpfApplication4
{
    public class Dog
    {

    }
} 
```

**App.Xaml（App.Xaml.cs 中没有代码）：**

```
<Application x:Class="WpfApplication4.App"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             StartupUri="MainWindow.xaml">
    <Application.Resources>

    </Application.Resources>
</Application> 
```

![项目设置](https://i.stack.imgur.com/HyMzZ.png)

我得到的例外：

```
Error   1   The name "Dog" does not exist in the namespace "clr-namespace:WpfApplication4". \\hopr1\folders$\vxk\Documents\Visual Studio 2012\Projects\WpfApplication4\MainWindow.xaml  6   9   WpfApplication4 
```

我能够运行解决方案，但设计器因“无效标记”错误而失败任何想法？

**编辑**

我正在运行 VS 2012 Update 2 相同的解决方案在 VS 2012 Update 1 中工作

* * *

## 回答 #1

> 赞同：119
> 
> 时间：2014-03-14T13:49:28.067

对于现在遇到这个问题的任何人，在你做任何其他事情之前......如果你确定你的类/命名空间是正确的并且重建没有解决你的问题：

尝试重新启动 Visual Studio

而已！

这似乎是 Visual Studio 2012 的一个错误（似乎也影响了支持 XAML 开发的所有其他版本）

* * *

更新：如果重新启动 Visual Studio 不起作用，请重新启动整个 PC。

更新：正如@Dunk 评论中提到的，如果重新启动 Visual Studio 不起作用，请尝试删除 .suo 文件

* * *

## 回答 #2

> 赞同：49
> 
> 时间：2013-04-25T14:56:04.800

您的解决方案正在网络共享上运行。.Net（和 Visual Studio）应用程序在网络共享上运行时可能会遇到权限/访问问题。

将您的解决方案复制到本地驱动器（完全信任），您应该没问题。

可以让网络驱动器在完全信任的情况下工作 - 你可以在 StackOverflow 和其他地方找到答案 - 但根据我的经验，当我这样做时，我总是遇到障碍，所以尽量避免它，除非它对手头的问题。

例如，这个问题提供了有关如何执行此操作的说明：

[将 FullTrust 授予 Visual Studio 2012 和 .Net 4.0 的 UNC 共享](https://stackoverflow.com/questions/11936471/give-fulltrust-to-unc-share-for-visual-studio-2012-and-net-4-0)

我只在 VS2010 上试过这个，所以（如链接中所示）你可能会对 2012 年感到更高兴。

* * *

## 回答 #3

> 赞同：32
> 
> 时间：2014-07-22T18:35:18.920

我遇到了同样的问题，但我的文件存储在本地。我的 IValueConverter 与使用它的视图位于不同的程序集中。即使 VS2013 IntelliSense 提出以下建议，它也不起作用：

```
xmlns:conv="clr-namespace:MySharedAssembly.Converters" 
```

在我最后明确添加程序集后，它起作用了：

```
xmlns:conv="clr-namespace:MySharedAssembly.Converters;assembly=MySharedAssembly" 
```

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2015-04-09T16:58:35.297

我坚持这个错误几个小时。程序集和命名空间是正确的，类和引用也是正确的。编译运行正常，只有设计师对我有一些问题。唯一有效的

1.  出于设计目的，从 x64 切换到 x86
2.  运行和调试切换回 x64

我正在使用只有 x64 版本的 3d 派对portable.library。

* * *

## 回答 #5

> 赞同：11
> 
> 时间：2015-12-13T13:09:53.567

# 下载的DLL解决方案

1.  取消阻止 .dll 文件
    *   右键单击它并选择属性
    *   在“常规”选项卡中取消阻止它（见图）
2.  确保 VS 重新验证 XAML（可能通过重新启动它）

[![在此处输入图像描述](https://i.stack.imgur.com/vBjWq.png)](https://i.stack.imgur.com/vBjWq.png)

* * *

## 回答 #6

> 赞同：6
> 
> 时间：2015-11-25T12:58:45.477

它仍然发生在 VS 2015 中。我在 App.xaml 中取出了 SomeConverter：

```
<Application.Resources>
    <!--Value Converters-->
    <local:SomeConverter x:Key="mySomeConverter"/> 
```

**Strg-Shift-B**
把它放回去 - 它工作。

* * *

## 回答 #7

> 赞同：4
> 
> 时间：2016-09-06T10:03:27.013

在尝试广泛的解决方案之前，请尝试以下操作：

我遇到了完全相同的问题，我关闭了导致错误的窗口/窗体，然后运行了项目，

一旦项目成功运行并且没有恢复，错误似乎就消失了。

希望这可以帮助任何寻找快速解决方案的人。

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2014-07-09T10:22:43.453

在本地驱动器上创建指向网络共享的符号链接。

转到命令行并键入 mklink /DC:\LOCALFOLDER \YOURNETWORKPATH

然后从本地文件夹打开项目，所有问题都消失了。现在所有文件仍将在您的网络共享上。:)

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2015-05-29T08:33:23.490

我正在开始一个新项目并遇到此问题。这里列出的所有解决方案都不适合我，包括删除 suo 文件、卸载/重新加载项目、重新启动 VS 等。

对我有用的是，因为这是一个新项目，我还没有建造它。我将 Window.DataContext 元素删除到剪贴板，构建了一次项目（shift-ctrl-b），然后重新添加了该元素并立即运行。

* * *

## 回答 #10

> 赞同：2
> 
> 时间：2017-02-23T15:05:18.393

我在 Visual Studio 2015 中遇到了同样的错误，并通过取消选中“禁用项目代码按钮”来设法让设计器工作。

[![设计器按钮的屏幕截图](https://i.stack.imgur.com/cxPun.png)](https://i.stack.imgur.com/cxPun.png)

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-10-20T06:44:33.050

我在网络共享上也有一个项目，但意外出现了这个错误。我尝试了上面的所有建议，包括将项目复制到本地磁盘、清理、重建和打开和关闭 VS。这些都没有解决问题。

对我有用的只是删除对 viewmodels 文件夹的命名空间引用（xlmns:vm="clr-namespace:Myproj.ViewModel"）。

我将类型添加到我的 xaml (DataTemplate DataType="{x:Type vm:myviewmodel}")。Visual Studio 然后检测到命名空间丢失，我单击提示添加命名空间。

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2014-06-09T15:17:18.550

2008 年、10 年、12 年、13 年这一直困扰着我。

每当发生这种情况时（是的，我正在处理网络共享 - 我无法避免），我关闭 VS，重命名文件夹并重新打开项目。10 次中有 9 次有效。一阵子。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2017-07-22T18:54:38.107

我在项目中有 3 个错误，并专注于有关 ObjectDataProvider 的这个错误。我发现如果由于其他错误而无法构建项目，则无法解决此错误。我还有其他几个事件处理程序的代码已被删除。我还需要删除试图将处理程序链接到控件的代码。然后项目能够构建并看到我试图从 ObjectDataProvider 引用的类是可用的。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2016-01-29T23:44:24.413

有同样的问题。当我意识到有问题的课程被标记为`internal`：

```
internal class MyClass
{
} 
```

将其更改为 后`public`，设计人员能够正确编译 XAML。

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2016-03-29T18:20:02.137

对我有用的是在项目中更改**`MOVE`**为。设计者可能想要项目输出文件夹中的 dll。**我正在使用 vs 2015****`XCOPY`****`Post Build`****`project properties`****`re-build`**

 *** * *

## 回答 #16

> 赞同：0
> 
> 时间：2017-11-20T08:52:21.263

名称空间“clr-namespace:ABC”中不存在名称“XYZ”</p>

解决了！！

检查您要调用的函数/类是否存在于命名空间中

> 正确的例子：

.XAML 文件

```
 <Window x:Class="objectbinding.MainWindow"
           <!--your xmlns:x .......
           namespace1 is the project name-->
           xmlns:m="clr-namespace:namespace1"
            Title="MainWindow" Height="350" Width="525">
    <Grid>
 <StackPanel Orientation="Vertical">
            <StackPanel.Resources>
                <ObjectDataProvider ObjectType="{x:Type m:StringData}"
                                    x:Key="anyname" MethodName="GetStrings"/>

            </StackPanel.Resources> 
```

```
 ItemsSource="{Binding Source={StaticResource Runni}}" />
        </StackPanel>
    </Grid> 
```

//StringData是xaml.cs中的类名，GetString是函数

.XAML.CS 文件

```
 namespace namespace1
    {

        public partial class MainWindow : Window
        {
            public MainWindow()
            {
                InitializeComponent();
            }

        }
// the class StringData is defined in namespace namespace 1
        public class StringData
        {
            ObservableCollection<String> lst = new ObservableCollection<String>();

            public StringData()
            {
                lst.Add("Abhishek");
                lst.Add("Abhijit");
                lst.Add("Kunal");
                lst.Add("Sheo");
            }
            public ObservableCollection<String> GetStrings()
            {
                return lst;
            }
        }
    } 
```

> 错误的例子：

.XAML 文件

```
 <Window x:Class="objectbinding.MainWindow"
              <!--your xmlns:x .......
           namespace1 is the project name-->
           xmlns:m="clr-namespace:namespace1"
            Title="MainWindow" Height="350" Width="525">
    <Grid>
 <StackPanel Orientation="Vertical">
            <StackPanel.Resources>
                <ObjectDataProvider ObjectType="{x:Type m:StringData}"
                                    x:Key="anyname" MethodName="GetStrings"/>

            </StackPanel.Resources> 
```

```
 ItemsSource="{Binding Source={StaticResource Runni}}" />
        </StackPanel>
    </Grid> 
```

.XAML.CS

```
namespace namespace1
{

    public partial class MainWindow : Window
    {
        public MainWindow()
        {
            InitializeComponent();
        }
//The StringData is defined in the class mainWindow not in namespace namespace1
        public class StringData
        {
            ObservableCollection<String> lst = new ObservableCollection<String>();

            public StringData()
            {
                lst.Add("Abhishek");
                lst.Add("Abhijit");
                lst.Add("Kunal");
                lst.Add("Sheo");
            }
            public ObservableCollection<String> GetStrings()
            {
                return lst;
            }
        }
    }

} 
```

* * *

## 回答 #17

> 赞同：0
> 
> 时间：2016-10-14T14:37:41.633

重新启动 Visual Studio 后，我收到一个 IntelliSense 错误，指出我的方向是正确的。

> 因为“Microsoft.VisualStudio.DesignTools.Xaml.LanguageService.Semantics.Metadata.ReflectionTypeNode”是在同一个程序集中实现的，所以必须设置 x:Name 属性而不是 Microsoft.VisualStudio.DesignTools.Xaml.LanguageService.Semantics.Metadata。 ReflectionPropertyNode 属性。

所以我改变了这个：

```
<local:MyView Name="test"/> 
```

对此：

```
<local:MyView x:Name="test"/> 
```

然后它起作用了。那么，这给了我们什么？42 可能的原因？虚幻...

* * *

## 回答 #18

> 赞同：0
> 
> 时间：2017-12-01T11:12:55.490

在我的情况下，这个错误是由于启用了“仅延迟签名”的签名程序集引起的。`sn -Vr *`解决方案是从开发人员控制台（以管理员身份）运行命令。这将注册程序集以进行验证跳过。然后重新启动 Visual Studio。

* * *

## 回答 #19

> 赞同：0
> 
> 时间：2016-11-29T09:51:54.007

在资源字典中声明它对我有用。

```
<Window.Resources>
    <c:IsNullConverter x:Key="IsNullConverter" />
</Window.Resources> 
```

问题似乎是解析器在看到类似 的标记扩展时会自行拉屎`Converter={c:IsNullConverter}}"`，但对 : 很好`Converter={StaticResource IsNullConverter}`。我想也许这就是问题所在。

> 视窗 10，VS 2013

* * *

## 回答 #20

> 赞同：0
> 
> 时间：2015-12-07T11:16:40.463

对于其他任何人来说。

对我有用的是将名称空间别名从**local**更改为其他任何内容。

```
xmlns:local="clr-namespace:ExampleNameSpace.Folder" />

<Grid>
    <StackPanel>
        <local:ReferencedUserControl />
    </StackPanel>
</Grid> 
```

至

```
xmlns:blah="clr-namespace:ExampleNameSpace.Folder" />

<Grid>
    <StackPanel>
        <blah:ReferencedUserControl />
    </StackPanel>
</Grid> 
```

希望这可以帮助！

* * *

## 回答 #21

> 赞同：-2
> 
> 时间：2016-02-20T22:32:32.687

这可能是由于 Release 配置。Designer 需要从 Debug 配置中使用。**

# flash - 闪退的 mediaelement.js 视频不会自动启动

> ID：16216663
> 
> 赞同：3
> 
> 时间：2013-04-25T13:54:23.990
> 
> 标签：flash, mediaelement.js, preload, fallback, autoplay

我使用 mediaelement.js 播放带有 Flash 后备选项的视频。它适用于所有新浏览器。Video 通过显示页面自动启动，例如在 IE9 和 IE10 中。

我的问题：在 IE7 和 IE8 中，它使用后备选项在 Flash 中播放视频。视频只能通过按下播放按钮开始，但没有自动播放。

```
<video id="player2" width="480" height="270" poster="bilder/nnn.jpg" controls="controls" preload="true" autoplay="true">
<source type="video/mp4" src="media/nnn_H264.mp4" />
<source type="video/webm" src="media/nnn_H264.webm" />
<source type="video/ogg" src="media/nnn_H264.ogv" />
<object width="480" height="270" type="application/x-shockwave-flash" data="videoplayer/flashmediaelement.swf">
    <param name="movie" value="videoplayer/flashmediaelement.swf" />
    <param name="flashvars" value="autoplay=true&amp;preload=true&amp;controls=true&amp;poster=../bilder/nnn_video.jpg&amp;file=../media/nnn_H264.mp4" /> 
    <img src="bilder/nnn_video.jpg" width="320" height="240" title="No video playback capabilities" />
</object> 
```

和

```
<script>
var player = new MediaElementPlayer('#player2',/* Options */);
player.play();
</script> 
```

有人有想法吗？谢谢你！

* * *

> > > 在寻找其他问题时，我找到了答案！

```
<script>
$('#player2').mediaelementplayer({
    plugins: ['flash', 'silverlight'],
    success: function(mediaElement, domObject) {
        if (mediaElement.pluginType == 'flash') {
            mediaElement.addEventListener('canplay', function() {
                // Player is ready
                mediaElement.play();
            }, false);
        }
    },
    error: function() {
        alert('Error setting media!');
    }
});
</script> 
```

现在 - 它的工作原理！

感谢 xoreax： [自动播放 MediaElementPlayer](https://stackoverflow.com/questions/5394109/autoplay-mediaelementplayer)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-09-12T11:00:23.660

在 flashvars 中使用**autoplay=true**时，Firefox 中的自动播放对我有用

```
 <object width="940" height="529" type="application/x-shockwave-flash"
        data="flashmediaelement.swf">
    <param name="movie" value="flashmediaelement.swf" />
    <param name="flashvars" value="autoplay=true&controls=true&file=file.mp4" />
</object> 
```

# sql - 如何将varchar转换为日期

> ID：16216670
> 
> 赞同：0
> 
> 时间：2013-04-25T13:54:36.557
> 
> 标签：sql, sql-server, sql-server-2008-r2

我正在使用 SQL Server 2008 R2

我需要将视图中的 varchar(50) 字段转换为日期格式。

我有一个使用以下内容创建字段交付日期的视图：

```
convert(varchar(50),[delvd_dt],110) as [delivered_date] 
```

格式化字段如下所示：2012-03-11 16:24:42.0000000

我需要将结果作为日期，以便我可以检查某个范围内的日期。我更愿意在视图中执行此操作，以便可以使用 SSRS 为报告创建范围。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T13:58:51.683

你试过`cast()`吗？以下为我返回正确的日期：

```
select CAST('2012-03-11 16:24:42.0000000' as DATE) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:01:00.127

也许您可以简单地截断毫秒并使用`CONVERT`：

```
SELECT Convert(datetime, LEFT('2012-03-11 16:24:42.0000000', 19), 102) AS [Date] 
```

[**演示**](http://sqlfiddle.com/#!3/d41d8/12822/0)

这甚至适用于 MS SQL-Server 2005。

[**转换和转换 (Transact-SQL)**](http://msdn.microsoft.com/en-us/library/ms187928.aspx)

* * *

## 回答 #3

> 赞同：-3
> 
> 时间：2013-04-25T14:02:00.990

试试这个[链接](http://www.sql-server-helper.com/tips/date-formats.aspx)网站显示了几个格式选项。

例子：

```
SELECT CONVERT(VARCHAR(10), GETDATE(), 105) 
```

# vaadin - Vaadin - 禁用特定列的列重新排序

> ID：16216671
> 
> 赞同：2
> 
> 时间：2013-04-25T13:54:36.790
> 
> 标签：vaadin, multiple-columns

我正在 Vaadin 7 中做一个项目。

在我的项目中，我需要为 Treetable 中的特定列禁用列重新排序功能？

我真的在寻找像“setColumnReorderIds()”这样的函数。

是否有可能在 Vaadin 7 中做到这一点。

或者我需要用'ColumnReorderListener（）'编写一些代码？

**更新**

此代码是将第一列设置为固定在 TreeTable 中。我想在树表的层次结构列中禁用重新排序。

```
public class CustomTreeTable extends TreeTable {

private static final long serialVersionUID = 1L;
private Object[] visibleColumns;
private KeyMapper<Object> columnIdMap = new KeyMapper<Object>();

@Override
public void paintContent(PaintTarget target) throws PaintException {
    super.paintContent(target);
    paintColumnOrder(target);
}

private void paintColumnOrder(PaintTarget target) throws PaintException {
    visibleColumns = this.getVisibleColumns();
    final String[] colorder = new String[visibleColumns.length];
    int i = 0;
    colorder[i++] = columnIdMap.key("Column 1"); // Logic to keep the first column fixed
    for (Object colId : visibleColumns) {
        if(!colId.equals("Column 1")) {
            colorder[i++] = columnIdMap.key(colId);
        }
    }
    target.addVariable(this, "columnorder", colorder);
}
} 
```

**更新 2**

我尝试了奥斯卡所说的..

此外

```
paintColumnOrder(target). 
```

我打电话

```
paintVisibleColumnOrder(target), 
paintAvailableColumns(target), 
paintVisibleColumns(target). 
```

我只能停止对表头重新排序。但是，身体仍在重新排序。对这个问题有任何猜测吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-05-17T00:06:45.470

在文档中，只有`setColumnReorderingAllowed()`它允许控制**所有**列的重新排序。因此，如果您的情况是要控制特定的情况，那么它在我看来是一种非常自定义的行为，我会使用自己的实现。也是在处理动作本身**之后**`ColumnReorderEvent`生成的，因此我认为实现自己的在这里对我们没有帮助。**`ColumnReorederListener`**

 **我们想要改变的所有实际魔法都发生在`private Table.paintColumnOrder()`调用 from `public Table.paintContent()`，调用 from `public TreeTable.paintContent()`（参见[Table](https://github.com/vaadin/vaadin/blob/master/server/src/com/vaadin/ui/Table.java)和[TreeTable](https://github.com/vaadin/vaadin/blob/master/server/src/com/vaadin/ui/TreeTable.java)的来源）。解决方案是：

1.  延长`TreeTable`
2.  用和`paintContent()`的合并副本覆盖`Table.paintContent()``TreeTable.paintContent()`
3.  `paintColumnOrder()`用您的自定义逻辑替换呼叫。

**更新**

好的，现在我发现它比我在开始时想的更棘手，因为在子类化 TreeTable 之后没有简单的方法来访问大多数必需的字段和方法......此外，列在客户端重新排列，只有更改事件状态发送通知服务器。我不知道如何在不创建自定义 gwt 小部件的情况下处理自定义重新排序:(**

# python - if 语句取决于输入

> ID：16216672
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:54:40.067
> 
> 标签：python, input

我正在尝试创建一种“简单”的方式来询问一个人他们想找到什么形状的区域。然后根据他们的输入找到形状的区域。我正在使用 Python 2.7.3。这是我到目前为止所拥有的：

```
from math import pi
c = ""
r = ""
x = (input("Do you have a [r]ectangle or a [c]ircle? ")) # Answer with r or c
if x == "r":
    l = (int(input("What is the length of your rectangle? ")))
    w = (int(input("What is the width of your rectangle? ")))
    print( l * w )
elif x == "c":
    r = (int(input("What is the radius of your circle? ")))
    print( r ** 2 * pi)
else:
    print("Please enter request in lower case. ") 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T13:58:55.080

```
from math import pi
# use raw input (raw_input()) for the inputs... input() is essentially eval(input())
# this is how i would ask for input for a simple problem like this
x = (raw_input("Do you have a [r]ectangle or a [c]ircle? ")) # Answer with r or c
# use .lower() to allow upper or lowercase
if x.lower() == "r":
    l = (int(raw_input("What is the length of your rectangle? ")))
    w = (int(raw_input("What is the width of your rectangle? ")))
    print( l * w )
elif x.lower() == "c":
    r = (int(raw_input("What is the radius of your circle? ")))
    print( r ** 2 * pi)
else:
    print("You didn't enter r or c.") 
```

# git - 恢复分支更改 git describe 的标记名称

> ID：16216676
> 
> 赞同：1
> 
> 时间：2013-04-25T13:54:53.607
> 
> 标签：git, git-tag, git-revert

我刚刚学会了如何恢复分支。这很好用。问题是，我标记了 master 的提交，并且我计划使用该`git describe`命令来创建基于最新标记的部署。恢复提交会创建一个新的提交，因此该`git describe`命令会输出带有提交修改的标签，如下所示：

前：

```
git describe
1-2-0 
```

恢复“返回”到此提交后：

```
git describe
1-2-0-1ga99ae04 
```

有没有办法克服这个问题？还是我应该以不同的方式获取最新标签？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T16:04:42.973

只是要清楚。你并没有真正恢复“回来”。假设您有以下历史记录。

```
A<--B<--C<--D
            |
        (tag:1-2-0) 
```

现在说你恢复`C`。这就是发生的事情。

```
A<--B<--C<--D<--E
            |
        (tag:1-2-0) 
```

如您所见，您已经在历史上前进了。如果此标签已经发布，那么您可能希望将其视为“修补程序”，并再次将其标记为`1-2-0-1`，或类似的内容。不确定您的版本号方案是什么，因此显然只需在您的流程中添加修补程序即可。

考虑到此更改，修补程序将导致此问题。

```
 (tag:1-2-0-1)
                | 
A<--B<--C<--D<--E
            |
        (tag:1-2-0) 
```

但是，如果您还没有释放或什至将该标签推送到遥控器，并且只想将标签移动到指向`E`，那么您可以通过这两种方式进行操作。容易记住的方法是删除标签并重新创建它。

```
git tag -d 1-2-0
git tag 1-2-0 E 
```

在不删除标签的情况下更改标签的更短、更快但无限友好的方法是使用`update-ref`.

```
git update-ref refs/tags/1-2-0 E 
```

如果您已将标签向上推并希望将其从遥控器中删除，请使用以下语法。

```
git push <remote> :1-2-0 
```

假设来源是您的遥控器。

# c - 在这种情况下 sched_yield 做了什么？

> ID：16216683
> 
> 赞同：2
> 
> 时间：2013-04-25T13:55:16.060
> 
> 标签：c, linux, gcc, x86-64

如果我有一个进程，其所有线程都在不同的内核上运行，那么`sched_yield`在这种情况下会做什么？放弃并立即再次发行？因为我看到的是`sched_yield`不会导致线程调用它，根本等待任何周期，似乎调用甚至没有进入内核。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T13:58:20.733

就linux内核而言，一个核心就是一个CPU，所以`sched_yield`会导致调用线程放弃CPU，但如果线程是队列中唯一的一个，它不会等待任何循环。

因此，**如果**当前核心上没有等待线程，那么在您的情况下**`sched_yield`会立即返回。**

请注意，`sched_yield`它**并非**旨在控制线程如何在多个 CPU 上运行。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T13:58:15.790

手册页说：

> 如果调用线程是当时最高优先级列表中的唯一线程，则在调用 sched_yield() 后它将继续运行。

所以如果没有什么更重要的东西要运行，这个函数基本上什么都不做。

# signal-processing - 用倍频程在时域中绘制卷积

> ID：16216684
> 
> 赞同：2
> 
> 时间：2013-04-25T13:55:18.547
> 
> 标签：signal-processing, octave, convolution

这个绘图但 conv 的结果是一个新长度的向量，因此`t`在绘图中包含`plot(t, z1) %doesn't work!`.

```
t = [-5:.1:10];
unit = @(t) 1.*(t>=0);

h1 = @(t) (3*t + 2).*exp(-3*t).*unit(t);
z1 = conv(unit(t), h1(t));

plot(z1); 
```

我想要一个作为时间函数的卷积信号图。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:28:47.963

您需要添加*shape*参数。这是[规格](http://www.gnu.org/software/octave/doc/interpreter/Products-of-Polynomials.html)：

> — 函数文件：conv (a, b) — 函数文件：conv (a, b, shape) 对两个向量 a 和 b 进行卷积。
> 
> 输出卷积是一个长度等于length (a) + length (b) - 1的向量。当a和b是两个多项式的系数向量时，卷积表示乘积多项式的系数向量。
> 
> 可选的形状参数可能是
> 
> shape = "full" 返回全卷积。（默认） shape = "same" 返回卷积的中心部分，大小与 a 相同。

所以像这样卷积：

```
z1 = conv(unit(t), h1(t), "same"); 
```

您将获得与原版相同的时间单位。

# pattern-matching - 表达式匹配 Ocaml

> ID：16216693
> 
> 赞同：1
> 
> 时间：2013-04-25T13:55:41.670
> 
> 标签：pattern-matching, expression, ocaml, unused-variables

我的问题很简单：如何翻译这段 C 代码：

```
if (x == y + 1)
  // some code
else if (x == y - 1)
  // some code
else if (x == y + 2)
   .... 
```

基本上我正在考虑使用似乎合适的模式匹配。不幸的是，这样的模式不起作用：

```
match x with
| y + 1 -> some code
| y - 1 -> some code
| y + 2 -> some code
| _ -> some code 
```

编译器似乎并不高兴，从我发现的情况来看，像我一样在模式匹配上的表达式是不被容忍的。因此，我尝试将它们放入值中：

```
let v1 = y + 1 in
let v2 = y - 1 in
let v3 = y + 2 in
match x with
| v1 -> some code
| v2 -> some code
| v3 -> some code
| _ -> some code 
```

不幸的是，我收到警告说我的值 v1 v2 和 v3 未使用，并且使用它们的匹配案例也未使用。

如何正确地将表达式与其他表达式匹配？

谢谢

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:07:53.763

实际上，您的 C 代码几乎是有效的 OCaml 代码。

```
if x = y + 1 then
  (* some code *)
else if x = y - 1 then
  (* some code *)
else if x = y + 2 then
   .... 
```

模式匹配不是替代品`if then`，它有完全不同的目的。OCaml 允许您构造类型，例如`type 'a option = None | Some of 'a`应该使用模式匹配来解构这些类型。它不应该用于其他目的。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-05-04T11:13:08.477

如果你坚持使用 a`match`你可以使用

```
match x with
| z when z=y+1 -> ...
| z when z=y-1 -> ... 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:42:36.360

Thomash 是对的，这段代码自然是用`if`OCaml 中的表达式表达的，而不是模式。您的示例不起作用的原因是模式由常量和*新定义的*变量组成。如果一个变量（一个名字）出现在一个模式中，它变成一个新定义的名字，它的值是匹配表达式的对应部分。名称的任何先前定义在匹配中都不相关。

如果您绝对必须使用 a `match`，您可以编写如下：

```
match y - x with
| -1 -> (* some code *)
| 0 -> (* some code *)
| 1 -> (* some code *)
| 2 -> (* some code *)
| _ -> (* some code *) 
```

但我和托马斯在一起，我认为`if`这里的表达会更好。

# sublimetext2 - Sublime Text 2 中的退格选项卡

> ID：16216699
> 
> 赞同：44
> 
> 时间：2013-04-25T13:55:51.983
> 
> 标签：sublimetext2

我有一段代码要向后移动（2 个空格/1 个制表符）。我知道我可以选择整个块并点击选项卡将其向前移动但是我如何将整个块向后移动（向左）？

* * *

## 回答 #1

> 赞同：108
> 
> 时间：2013-04-25T14:46:53.350

有两种选择：

`Shift`+`Tab`

或者

`Ctrl`+ `[`（在 Mac 上这是`⌘</kbd>+ `[`)`

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2016-12-23T12:06:50.647

In Window Os Simple Press

`Shift`+`Tab`

删除崇高文本中的退格选项卡 2。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2021-12-19T14:09:58.710

在**linux**、**windows**

可以用这个命令完成

Sublime Text,Vscode,Elipse,PhpStorm,Atom => **shift+tab**

Python IDLE => **Ctrl + [**

# ios - 在 TabBarController 和 NavigationController 之间添加视图

> ID：16216711
> 
> 赞同：0
> 
> 时间：2013-04-25T13:56:09.663
> 
> 标签：ios, objective-c, uinavigationcontroller, uitabbarcontroller, subview

我有一个标签栏控制器，它的每个视图控制器都是一个导航控制器。我想用黑色透明视图阻止其中一个导航（AlertView 样式）中的一些视图，它应该覆盖顶部的导航栏，而不覆盖底部的标签栏。因此，如果您查看文档（选项卡栏控制器的视图 - 图 2），我想完全涵盖包含的自定义内容导航栏。

我个人不认为有一个简单的解决方案，任何建议将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:11:54.803

如果您想从其中一个 UIViewController 添加 AlertViewStyle，那么您应该尝试以下代码：

```
 //you can replace the UIView with a custom UIView class
    UIView *view = [[UIView alloc] initWithFrame:CGRectMake(0, 0, self.navigationController.view.frame.size.width, self.navigationController.view.frame.size.height)];
    view.backgroundColor = [UIColor grayColor]; // set your desired color
    [self.navigationController.view addSubview:view]; 
```

# sql - 对基本的 SQL 模式表问题感到困惑

> ID：16216713
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:56:12.923
> 
> 标签：sql

如果一个人可以有尽可能多的运动爱好，并且每项运动都可以被尽可能多的人视为一种爱好，那么如何为它创建一个 db 模式表？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:02:51.713

这是简单的多对多关系：

```
CREATE TABLE Person
(
    ID       INTEGER       PRIMARY KEY,
    Name     VARCHAR(50)   NOT NULL
)

CREATE TABLE Sport
(
    ID       INTEGER       PRIMARY KEY,
    Sport    VARCHAR(50)   NOT NULL
)

CREATE TABLE Hobby 
(
    PersonID       INTEGER,
    SportID        INTEGER,
    PRIMARY KEY(PersonID,SportID),
    FOREIGN KEY(PersonID) REFERENCES Person(ID),
    FOREIGN KEY(SportID) REFERENCES Sport(ID),
) 
```

# javascript - 某些 localStorage 项目未显示

> ID：16216715
> 
> 赞同：0
> 
> 时间：2013-04-25T13:56:19.550
> 
> 标签：javascript, jquery, html, json

我在 localStorage 中有 5 个项目，但是，当我尝试输出所有文件时，

只有 2 个项目正在输出，而不是全部。

放入localStorage的JS：

```
$(document).ready(function () {
    $.fn.SaveToCart = function (id, iName, iAlbum, iPrice) {
        var quantity = 0;
        if (localStorage.getItem('Product_' + id) === null) {
            quantity = 1;
        } else {
            var tempItem = JSON.parse(localStorage.getItem('Product_' + id));
            var tempQuantity = parseInt(tempItem['quantity']);
            quantity = tempQuantity + 1;
        }
        var cartItem = {
            'quantity': quantity,
            'name': iName,
            'album': iAlbum,
            'price': iPrice
        }
        localStorage.setItem('Product_' + id, JSON.stringify(cartItem));
    }; 
```

购物车 JS：

```
function ShoppingCart() {

    var output;
    var productName;
    var productAlbum;
    var productQuantity;
    var productPrice;
    var productSubTotal = 0;
    var totalPrice;

    for (var i = 0; i < localStorage.length - 1; i++) {
        var keyName = localStorage.key(i);
        if (keyName.indexOf('Product_') == 0) {
            var product = localStorage.getItem(keyName);

            var product = localStorage.getItem('Product_' + i);

            var result = JSON.parse(product);

            totalPrice = 0;
            productName = result.name
            productAlbum = result.album;
            productQuantity = parseInt(result.quantity);
            productPrice = parseFloat(result.price).toFixed(2);
            productSubTotal = parseInt(productQuantity) * parseFloat(productPrice).toFixed(2);

            outputName = "<div id='cart-table'><table><tr><td><b>NAME: </b>" + productName + "</td></tr></div>";
            outputAlbum = "<tr><td><b>ALBUM: </b>" + productAlbum + "</td></tr>";
            outputQuantity = "<tr><td><b>QUANTITY: </b>" + productQuantity + "</td></tr>";
            outputPrice = "<tr><td><b>PRICE: </b> EUR " + productPrice + "</td></tr>";
            outputSubTotal = "<tr><td><b>SUB-TOTAL: </b> EUR " + productSubTotal + "</td></tr></table><br><br>";

            var TotalOutput = outputName + outputAlbum + outputQuantity + outputPrice + outputSubTotal;

            document.getElementById("Cart-Contents").innerHTML = document.getElementById("Cart-Contents").innerHTML + TotalOutput;
            totalPrice += parseFloat(totalPrice) + parseFloat(productSubTotal);
            productSubTotal = productSubTotal + productSubTotal;
        }
        i++;

    }
    totalPrice = productSubTotal;

    localStorage.setItem("price", totalPrice);

    var outputTotal = "<br><br><h1><table><tr><td><b>TOTAL:</b> EUR " + totalPrice + "</td></tr></table></h1>";
    document.getElementById("total-price").innerHTML = document.getElementById("total-price").innerHTML + outputTotal;

}

function ClearCart() {

    localStorage.clear();
    document.location.reload(true);

}

window.onload = ShoppingCart;

    </script> 
```

HTML：

```
<div id="Cart-Contents"></div>
<div id="total-price"></div> 
```

另外，我还有另一个问题，总价计算不正确。我得到 28.12，总共 14.06 + 16.40。为什么会这样？

给你一个想法：

[http://i.imgur.com/RmftSoU.png](http://i.imgur.com/RmftSoU.png)

[http://i.imgur.com/qO8FQN8.png](http://i.imgur.com/qO8FQN8.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T13:59:49.357

将您的 for 循环更改为：`for (var i = 0; i < localStorage.length; i++){`.

并且不要添加`i++;`到循环主体的末尾。

由于不同的原因，两者都会导致您的循环无法命中所有项目。

# ruby - 使用 Ruby on Rails 从 forecast_io 获取数据

> ID：16216721
> 
> 赞同：0
> 
> 时间：2013-04-25T13:56:33.183
> 
> 标签：ruby, ruby-on-rails-3

我对 Ruby 很陌生，想在学校的一个项目中使用它。我已经完成了博客教程，并且对它的工作原理有了一些了解。

问题：有人可以给我一个关于如何开始从 forecast_io API 获取数据的提示吗？向我的页面获取一些数据的简单请求。我应该从哪里开始？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:06:30.550

[forecast_io](https://github.com/darkskyapp/forecast-ruby) gem 在这里为您提供帮助。首先，您需要一个 API 密钥。[您可以通过在此处](https://developer.forecast.io/register)注册获取 API 密钥。然后[forecast_io github 自述文件](https://github.com/darkskyapp/forecast-ruby)可以帮助您。

```
Forecast::IO.api_key = 'this-is-your-api-key'
forecast = Forecast::IO.forecast(37.8267, -122.423) # params are: latitude, longitude
forecast.currently # gives you the current forecast datapoint
forecast.currently.summary # =>"Mostly Cloudy" 
```

您可以阅读[forecast.io API 文档](https://developer.forecast.io/docs/v2)了解更多详细信息。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:02:49.520

一个好的起点总是[The Ruby Toolbox](https://www.ruby-toolbox.com/)。如果您在那里搜索 forecast.io，它会为您指出一个合适的[gem](https://github.com/darkskyapp/forecast-ruby)。

# highcharts - Highcharts - 隐藏图表无法正确调整大小

> ID：16216722
> 
> 赞同：24
> 
> 时间：2013-04-25T13:56:34.377
> 
> 标签：highcharts, susy-compass

我目前有一个 3 标签页。每个选项卡都是一个`display: hidden`未选中时设置为的 div。在这些选项卡中，我有一个使用 Susy（指南针插件）创建的网格系统。此外，每个标签页都有一组 Highcharts。当我加载页面时，根据 URl 中的哪个选项卡，将加载其中一个选项卡。所有的图表看起来都很好，但是当我切换到不同的选项卡时，一些图表在它们的 div 中不正确。如果我只是重新调整窗口大小，图表会重新计算，然后它们会完美契合。或者，如果我重新加载同一个选项卡，图表也很合适。**当我切换标签时，我可以调用一个函数来调整页面上所有图表的大小吗？**

它看起来像这样： ![它看起来如何](https://i.stack.imgur.com/NtiY6.png)

什么时候应该是这样的： ![它应该是什么样子](https://i.stack.imgur.com/K0XEv.png)

编辑：似乎这不是与 highcharts 直接相关的问题，例如我的谷歌地图如下所示： ![Google 地图的外观](https://i.stack.imgur.com/WbEvt.png)

但是当我调整窗口大小时，它会正确调整： ![调整大小后 Google 地图的外观](https://i.stack.imgur.com/LUnKF.png)

切换选项卡时，我可以通过 JS 中的函数调用使 CSS 刷新/调整我的网格吗？

* * *

## 回答 #1

> 赞同：46
> 
> 时间：2013-04-25T18:01:28.547

对我有用的是：

```
$(window).resize(); 
```

当我加载新标签时。Google Maps API 仍然存在问题，但它与 Highcharts 配合得很好。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2015-06-14T22:58:24.293

当您尝试使用“display: none”开始渲染事物时，您会发现很多问题。虽然 $(window).resize() 可能在许多情况下都有效，但我建议尝试在 display: none 生效之前先渲染您的页面。一个可能的解决方案是设置 opacity: 0 或 visibility: hidden。

display 属性控制元素的渲染方式，例如块（100% 宽度）或内联（适合内容）。当一个元素具有 display: none 时，它​​会覆盖它，最终删除它的有效宽度和高度，直到该元素接收到块类型。

这是一个演示示例：http: [//jsfiddle.net/m2f3scmm/3/](http://jsfiddle.net/m2f3scmm/3/)

```
<div id="log1" style="display: none;">
</div>
<div id="log2" style="visibility: hidden;">
</div>
<div id="log3" style="opacity: 0">
</div> 
```

当您使用“调整大小”技巧时，您假设您正在使用的插件或脚本绑定到窗口的调整大小事件，但情况并非总是如此。触发 window.resize 还可能减慢渲染速度或导致不需要的效果（例如，第一次渲染时 highcharts 的小动画 - 每次更改选项卡时都会出现这种情况）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2014-08-01T15:05:55.520

```
/**
 * Adjust size for hidden charts
 * @param chart highcharts
 */
function adjustGraph(chart) {
    try {
        if (typeof (chart === 'undefined' || chart === null) && this instanceof jQuery) { // if no obj chart and the context is set
            this.find('.chart-container:visible').each(function () { // for only visible charts container in the curent context
                $container = $(this); // context container
                $container.find('div[id^="chart-"]').each(function () { // for only chart
                    $chart = $(this).highcharts(); // cast from JQuery to highcharts obj
                    $chart.setSize($container.width(), $chart.chartHeight, doAnimation = true); // adjust chart size with animation transition
                });
            });
        } else {
            chart.setSize($('.chart-container:visible').width(), chart.chartHeight, doAnimation = true); // if chart is set, adjust
        }
    }
    catch (err) {
        // do nothing
    }
} 
```

# **用法**

```
$(window).resize(function () {
        if (this.resizeTO) clearTimeout(this.resizeTO);
        this.resizeTO = setTimeout(function () {
            // resizeEnd call function with pass context body
            adjustGraph.call($('body'));

        }, 500);
    }); 
```

**对于引导选项卡**

```
$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
            var isChart = $(this).attr('data-chart');
            var target = $(this).attr('href');
            if (isChart) {
                // call functio inside context target
                adjustGraph.call($(target));
            }
        });

  <ul id="tabs" class="nav nav-tabs" data-tabs="tabs">
        <li class="active">
            <a href="#anagrafica" data-toggle="tab"><h5>Anagrafica</h5></a>
        </li>
        <li>
            <a href="#consumi" data-toggle="tab" data-chart="1"><h5>Consumi</h5></a>
        </li>
    </ul> 
```

**在图表上**

```
new Highcharts.Chart({
            chart: {
                renderTo: 'chart-bar',
                defaultSeriesType: 'column',
                zoomType: 'xy',
                backgroundColor: null,
                events: {
                    load: function (event) {
                        adjustGraph(this);
                    }
                }
            }, 
```

**html代码**

```
div class="tab-pane" id="charts">
    <div class="row-fluid">
        <div class="span6 offset3">
            <div id="myCarousel" class="carousel slide">
                <!-- Carousel items -->
                <div class="carousel-inner chart-container">
                    <div class="active item">
                        <h3>Chart 1/h3>
                        <div id="bar-pod-annuale">
                           <div id="chart-bar" style="width:100%;margin: 0 auto"></div>
                        </div>
                    </div>
                    <div class="item">
                        <h3>Char 2</h3>
                        /** chart **/
                    </div>
                    <div class="item">
                        <h3>Char 3</h3>
                        /** chart **/
                    </div>
                </div>
                <!-- Carousel nav -->
                <a class="carousel-control left" href="#myCarousel" data-slide="prev">‹&lt;/a>
                <a class="carousel-control right" href="#myCarousel" data-slide="next">›&lt;/a>
            </div>
        </div>
    </div> 
```

**请参阅 jsfiddle** [http://jsfiddle.net/davide_vallicella/LuxFd/2/](http://jsfiddle.net/davide_vallicella/LuxFd/2/)

# asp.net - asp.net 中的标准表达式中的数据类型不匹配

> ID：16216727
> 
> 赞同：2
> 
> 时间：2013-04-25T13:56:55.753
> 
> 标签：asp.net, vb.net

我正在尝试使用 vb.net 从 ms 访问数据库中删除一行。但是我收到了上述错误。所有字段都是数据库中的文本。

这是我的代码：

```
dim deleteRow() as DataRow

deleteRow = ds.Tables("ccc").Select("Question = '" & QuestionList(x).Text & "'")
deleteRow(0).Delete()
da.Update(ds,"ccc") 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-16T13:19:47.627

Vishal ....您的任何问题（x）。文本值是否包含单引号？单引号将导致您的 select 语句出错。例如

> 如果你的问题是你叫什么名字？您的选择语句将是 Select(Question = 'What's your name>?')

这将在 's 处出错-我也不确定右括号是否会导致错误，如您上面的示例所示

> 选择（问题 = '390）什么是计算机？'）

这可能会在第一个右括号处出错。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-12-16T14:58:54.313

您可以尝试新的代码段

```
Sub DeleteRow()
    Dim cnn As New OleDbConnection("Provider=Microsoft.Jet.OLEDB.4.0;Data            Source=MyDatabase.mdb;User Id=admin;Password=;")
    Dim cmd As New OleDbCommand

    cmd.Connection = cnn
    cmd.CommandType = CommandType.Text
    cmd.CommandText = "DELETE * FROM <your table> WHERE Question='" & QuestionList(x).Text & "'"

    Using cnn
       cnn.open()
       cmd.ExecuteNonQuery()
    End Using
End Sub 
```

# magento - 在 Magento 中使爱尔兰不需要邮政编码

> ID：16216734
> 
> 赞同：1
> 
> 时间：2013-04-25T13:57:09.410
> 
> 标签：magento

我的服务器上安装了 Magento 1.7.0.0。我面临一个关于可选邮政编码国家的问题。我的意思是我想让爱尔兰的邮政编码可选，为此我在管理面板的可选国家列表中选择了爱尔兰（系统 > 配置 > 常规）。但是当我访问结帐页面并选择爱尔兰时，它会从邮政编码字段中删除一个星号，这很好，但是当我点击继续时，它会显示一个警告框（“邮政编码是必需的值”）。为什么？
请帮我！提前致谢...

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-09-26T22:50:02.907

我认为是因为邮政编码输入具有 html 类 required-entry 如果您编辑模板并退出类 js 将不会检查该输入并且不会触发警报。但请记住，仅在爱尔兰使用条件或其他东西来退出这门课。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-10-29T10:34:53.437

# 短期解决方案

将此添加到您的`.document(ready)`. 请注意,等`*`是必需的。`country_id``billing[country_id]`

```
function require_postcode_check(){
    jQuery('select[name*=country_id]').each(function(){
        jQuery(this).closest('form').find('input[name*=postcode]').toggleClass('required-entry', jQuery(this).val() != 'IE');
    });
}
require_postcode_check(); // execute on document ready
jQuery('select[name*=country_id]').on('change', function(){
    require_postcode_check(); // execute on country change
}); 
```

# 长期解决方案

一个长期的解决方案是为每个`<option>`需要邮政编码的类：

```
<option value="UK" class="postcode-required">United Kingdom</option>
<option value="IE" class="">Ireland</option> 
```

然后如果`<select>`改变了，检查是否选择了选项`hasClass('postcode-required')`。

# c# - TableLayoutPanel：删除行

> ID：16216735
> 
> 赞同：3
> 
> 时间：2013-04-25T13:57:10.383
> 
> 标签：c#, winforms, tablelayout, tablelayoutpanel

我有一个 TableLayoutPanel，它在运行时使用文本文件填充了行（从文本文件中获取每一行，并将其放入新行中包含的单元格中）。代码如下所示：

```
public static string UrlList= @"C:\Users\Berisha\Desktop\URLs.txt";
string[] UrlRows = System.IO.File.ReadAllLines(@UrlList);
        private void InitPaths()
    {
        int a = 0;
        int c = 1;
        while (a < UrlRows.Length-1)
        {   
            //new label
            var label = new Label();
            label.Dock = DockStyle.Fill;
            label.AutoSize = false;
            label.Text = UrlRows[a];
            label.TextAlign = System.Drawing.ContentAlignment.MiddleLeft;
            label.Size = new System.Drawing.Size(22, 13);
            label.BackColor = System.Drawing.Color.Transparent;
            TBP.Controls.Add(label, 3, c); //Add to TableLayoutPanel
            a++;
            c++;
        }
    } 
```

虽然我希望能够手动编辑源代码，所以我写了一个方法来删除所有新创建的东西，但似乎卡在这里，因为它不起作用：

```
 private void clearPaths()
    {   
        int c = UrlRows.Length - 1;
        while (c <= UrlRows.Length - 1)
        {
            TBP.RowStyles.RemoveAt(c); //Remove from TableLayoutPanel
            c--;
        }

    } 
```

*//代码停在：TableLayoutPanel.RowStyles.RemoveAt(c);(调试时) //并且错误显示：“对象引用未设置为对象的实例”* **更新：我设法摆脱了错误，我现在的问题，在我说 RemoveAt 之后，似乎什么都没有被删除** 有人知道我能做什么吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-11-19T07:10:19.087

```
tableLayoutPanel1.Controls.Clear();
tableLayoutPanel1.RowCount = 0; 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-10-31T21:47:05.643

我在 Google 上搜索并在 DAYS 中搜索了这个问题的解决方案，但找不到。我终于找到了一个可行的解决方案！

```
tableLayoutPanel.SuspendLayout();

while (tableLayoutPanel.RowCount > 1)
{
    int row = tableLayoutPanel.RowCount - 1;
    for (int i = 0; i < tableLayoutPanel.ColumnCount; i++)
    {
        Control c = tableLayoutPanel.GetControlFromPosition(i, row);
        tableLayoutPanel.Controls.Remove(c);
        c.Dispose();
    }

    tableLayoutPanel.RowStyles.RemoveAt(row);
    tableLayoutPanel.RowCount--;
}

tableLayoutPanel.ResumeLayout(false);
tableLayoutPanel.PerformLayout(); 
```

在我的解决方案中，我不想删除第一行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T14:48:24.593

好的，查看您的第二次编辑，我删除了我的答案并添加了这个新答案。

我真的怀疑这是否有效。您的 while 循环将永远执行。

```
int c = UrlRows.Length - 1;
while (c <= UrlRows.Length - 1) //C will decrement forever and always be less than or equal
{
    TBP.RowStyles.RemoveAt(c); //Remove from TableLayoutPanel
    c--;
} 
```

我不太确定您想在该方法中做什么，如果您打算删除所有内容，那么您最初所做的会起作用。

```
int c = 1;
while (c <= UrlRows.Length - 1) //You now loop through all elements in TBP
{
    TBP.RowStyles.RemoveAt(c); //Remove from TableLayoutPanel
    c++;
} 
```

# powershell - 将 app.config 加载到 AppDomain

> ID：16216736
> 
> 赞同：15
> 
> 时间：2013-04-25T13:57:20.333
> 
> 标签：powershell, appdomain

我无法将 App.Config 文件加载到应用程序域中。

我正在使用

```
[System.AppDomain]::CurrentDomain.SetData("APP_CONFIG_FILE", $config_path) 
```

来自[使用 App.config](https://stackoverflow.com/questions/835862/powershell-calling-net-assembly-that-uses-app-config)但 App.Config 文件仍未加载的 Powershell Calling .NET Assembly。

我也尝试过重置缓存，如[Using CurrentDomain.SetData("APP_CONFIG_FILE") doesn't work in PowerShell ISE](https://stackoverflow.com/questions/13420545/using-currentdomain-setdataapp-config-file-doesnt-work-in-powershell-ise)中所述。

这是我的测试脚本：

```
$configFile = "{ActualPhysicalPath}\App.Config"
gc $configFile

Add-Type -AssemblyName System.Configuration
[Configuration.ConfigurationManager].GetField("s_initState", "NonPublic, Static").SetValue($null, 0)
[Configuration.ConfigurationManager].GetField("s_configSystem", "NonPublic, Static").SetValue($null, $null)
([Configuration.ConfigurationManager].Assembly.GetTypes() | where {$_.FullName -eq "System.Configuration.ClientConfigPaths"})[0].GetField("s_current", "NonPublic, Static").SetValue($null, $null)

[Configuration.ConfigurationManager]::ConnectionStrings[0].Name
[System.AppDomain]::CurrentDomain.SetData("APP_CONFIG_FILE", $null)
[Configuration.ConfigurationManager]::ConnectionStrings[0].Name
[System.AppDomain]::CurrentDomain.SetData("APP_CONFIG_FILE", $configFile)
[Configuration.ConfigurationManager]::ConnectionStrings[0].Name 
```

我总是得到存储在 machine.config 中的连接字符串，而不是那些在 App.config 中的。

如何在应用程序域中加载我的特定 App.Config 文件？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2015-10-22T20:30:46.187

尝试在*GetField*语句之前移动您的*SetData*语句。

 *[在 Windows 10 上使用 PowerShell 5.0，您引用的链接](https://stackoverflow.com/questions/13420545/using-currentdomain-setdataapp-config-file-doesnt-work-in-powershell-ise)提供的指导似乎有效：我能够同时检索*AppSettings*和*ConnectionStrings*。

```
Add-Type -AssemblyName System.Configuration

# Set this to the full path of your App.config
$configPath = "C:\Full\Path\To\App.config"

[System.AppDomain]::CurrentDomain.SetData("APP_CONFIG_FILE", $configPath)
[Configuration.ConfigurationManager].GetField("s_initState", "NonPublic, Static").SetValue($null, 0)
[Configuration.ConfigurationManager].GetField("s_configSystem", "NonPublic, Static").SetValue($null, $null)
([Configuration.ConfigurationManager].Assembly.GetTypes() | where {$_.FullName -eq "System.Configuration.ClientConfigPaths"})[0].GetField("s_current", "NonPublic, Static").SetValue($null, $null)

[System.Configuration.ConfigurationManager]::AppSettings
[System.Configuration.ConfigurationManager]::ConnectionStrings 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-07-12T21:35:37.473

您是否尝试过此处提供的解决方案：[Change default app.config at runtime](https://stackoverflow.com/questions/6150644/change-default-app-config-at-runtime)

它似乎描述了某种缓存，并且需要做更多的工作来确保读取加载的数据。

第一个答案的重要部分是：“存在一个缓存路径的类 ClientConfigPaths。因此，即使在使用 SetData 更改路径后，也不会重新读取它，因为已经存在缓存值。解决方案是删除这些， 也”*

# javascript - 在 Google 地图上添加 DIVS 作为叠加标记

> ID：16216738
> 
> 赞同：0
> 
> 时间：2013-04-25T13:57:22.013
> 
> 标签：javascript, google-maps, google-maps-markers

我想知道是否可以在 Google 地图上添加 div 作为覆盖标记。我已经尝试过了，但它不起作用。

```
var map = new GMap2(document.getElementById("mapview"));
    map.setCenter(new GLatLng(37.4419, -122.1419), 13);
    map.setUIToDefault();

    var myLatlng = new google.maps.LatLng(37.4419, -122.1419);
    var marker = new google.maps.Marker({
          position: myLatlng,
          map: map,
          icon: '<div style="position: absolute; background-color:red; width: 20px; height: 20px;" ></div>',
    });
    marker.setMap(map); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-12-17T20:49:41.033

试试这个。您必须创建自己的自定义 Overlay 类来扩展 google 的 OverlayView，然后您可以随意添加您想要的任何元素。

```
function DivMarker(latlng,  map, value) {
    this.latlng_ = latlng;
    this.value = value;
    /*Do this or nothing will happen:*/
    this.setMap(map);
}

DivMarker.prototype = new google.maps.OverlayView();
DivMarker.prototype.draw = function() {
    var me = this;
    var div = this.div_;
    if (!div) {
        // Create a overlay text DIV
        div = this.div_ = document.createElement('DIV');
        div.style.border = "none";
        div.style.position = "absolute";
        div.style.paddingLeft = "0px";
        div.style.cursor = 'pointer';

        var span = document.createElement("span");
        span.style.color = "#000000";
        span.style.fontWeight = "bolder";
        span.style.fontSize = "1em";
        span.style.paddingLeft = "0px";
        span.style.position = "absolute";
        span.className = "markerOverlay";
        span.appendChild(document.createTextNode(this.value));
        div.appendChild(span);
        google.maps.event.addDomListener(div, "click", function(event) {
        google.maps.event.trigger(me, "click");
    });

    // Then add the overlay to the DOM
    var panes = this.getPanes();
        panes.overlayImage.appendChild(div);
    }

    // Position the overlay 
    var point = this.getProjection().fromLatLngToDivPixel(this.latlng_);
    if (point) {
      div.style.left = point.x + 'px';
      div.style.top = point.y + 'px';
    }
};

DivMarker.prototype.remove = function() {
    // Check if the overlay was on the map and needs to be removed.
    if (this.div_) {    
        this.div_.parentNode.removeChild(this.div_);
        this.div_ = null;
    }
};

DivMarker.prototype.getPosition = function() {
    return this.latlng_;
};

    /* Add the overlay to your map */
var myLatlng = new google.maps.LatLng(44,-73);
var overlay = new DivMarker(myLatlng, map, "I work!"); 
```

# c - 如何一次重命名多个变量名（c/c++）

> ID：16216754
> 
> 赞同：1
> 
> 时间：2013-04-25T13:58:25.533
> 
> 标签：c

是否有任何工具可以让我一次重命名大量变量名。

我有大量变量要放入 ac 结构中，因此我需要添加参数。到结构中包含的每个名称的开头。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:01:02.003

如果您真的想立即执行此操作，请将正则表达式放入您的高级搜索/替换功能中。^(name1|name2|name3)$ 应该可以工作。但不能保证它不会捕获除了变量使用之外的其他东西（特别是变量声明）。如果你想要这样，你将不得不使用像 Clang 的工具这样的东西。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:01:14.053

`sed`，`find`如：

```
find /path/to/project/root -name "*.[ch]" -exec sed -ri 's/original_name/new_name/' {} \; 
```

# sql-server - 如何在 sql server 中查询此报告？

> ID：16216758
> 
> 赞同：-1
> 
> 时间：2013-04-25T13:58:35.097
> 
> 标签：sql-server, sql-server-2008

我有这个表“CashMovementTbl”、“SalesTbl”和“ExpensesTbl”，其中包括这样的数据：

![在此处输入图像描述](https://i.stack.imgur.com/koH6C.jpg)

我想显示我的数据，如下所示：

![在此处输入图像描述](https://i.stack.imgur.com/0jPAl.jpg)

那么如何在 SQL Server 中进行查询以显示这样的数据。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:09:45.150

```
SELECT
   c.CashDate,
   ISNULL(s.BillNo,e.ExpnsType) As Details,
   CASE WHEN c.SaleID IS NOT NULL THNE c.Amount ELSE 0 END AS [In],
   CASE WHEN c.ExpenseID IS NOT NULL THNE c.Amount ELSE 0 END AS [Out] 
FROM CashMovementTbl c
LEFT JOIN SalesTbl s
 ON c.SaleID = s.SalesIS
LEFT JOIN ExpensensTbl e
 ON c.ExpenseID = e.ExpnsID 
```

# java - Jersey 2.0 的依赖注入

> ID：16216759
> 
> 赞同：112
> 
> 时间：2013-04-25T13:58:50.187
> 
> 标签：java, dependency-injection, jersey, jersey-2.0, hk2

在没有任何以前的 Jersey 1.x 知识的情况下从头开始，我很难理解如何在我的 Jersey 2.0 项目中设置依赖注入。

我也知道 HK2 在 Jersey 2.0 中可用，但我似乎找不到有助于 Jersey 2.0 集成的文档。

```
@ManagedBean
@Path("myresource")
public class MyResource {

    @Inject
    MyService myService;

    /**
     * Method handling HTTP GET requests. The returned object will be sent
     * to the client as "text/plain" media type.
     *
     * @return String that will be returned as a text/plain response.
     */
    @GET
    @Produces(MediaType.APPLICATION_JSON)
    @Path("/getit")
    public String getIt() {
        return "Got it {" + myService + "}";
    }
}

@Resource
@ManagedBean
public class MyService {
    void serviceCall() {
        System.out.print("Service calls");
    }
} 
```

pom.xml

```
<properties>
    <jersey.version>2.0-rc1</jersey.version>
    <project.build.sourceEncoding>UTF-8</project.build.sourceEncoding>
</properties>

<dependencyManagement>
    <dependencies>
        <dependency>
            <groupId>org.glassfish.jersey</groupId>
            <artifactId>jersey-bom</artifactId>
            <version>${jersey.version}</version>
            <type>pom</type>
            <scope>import</scope>
        </dependency>
    </dependencies>
</dependencyManagement>

<dependencies>
    <dependency>
        <groupId>org.glassfish.jersey.core</groupId>
        <artifactId>jersey-common</artifactId>
    </dependency>
    <dependency>
        <groupId>org.glassfish.jersey.core</groupId>
        <artifactId>jersey-server</artifactId>
    </dependency>
    <dependency>
        <groupId>org.glassfish.jersey</groupId>
        <artifactId>jax-rs-ri</artifactId>
    </dependency>
</dependencies> 
```

我可以让容器启动并提供我的资源，但是只要我将@Inject 添加到 MyService，框架就会引发异常：

```
SEVERE: Servlet.service() for servlet [com.noip.MyApplication] in context with path [/jaxrs] threw exception [A MultiException has 3 exceptions.  They are:
1\. org.glassfish.hk2.api.UnsatisfiedDependencyException: There was no object available for injection at Injectee(requiredType=MyService,parent=MyResource,qualifiers={}),position=-1,optional=false,self=false,unqualified=null,1039471128)
2\. java.lang.IllegalArgumentException: While attempting to resolve the dependencies of com.noip.MyResource errors were found
3\. java.lang.IllegalStateException: Unable to perform operation: resolve on com.noip.MyResource
] with root cause
org.glassfish.hk2.api.UnsatisfiedDependencyException: There was no object available for injection at Injectee(requiredType=MyService,parent=MyResource,qualifiers={}),position=-1,optional=false,self=false,unqualified=null,1039471128)
    at org.jvnet.hk2.internal.ThreeThirtyResolver.resolve(ThreeThirtyResolver.java:74) 
```

我的入门项目在 GitHub 上可用：[https ://github.com/donaldjarmstrong/jaxrs](https://github.com/donaldjarmstrong/jaxrs)

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2013-06-16T11:59:24.357

您需要`AbstractBinder`在 JAX-RS 应用程序中定义并注册它。binder 指定依赖注入应如何创建您的类。

```
public class MyApplicationBinder extends AbstractBinder {
    @Override
    protected void configure() {
        bind(MyService.class).to(MyService.class);
    }
} 
```

当`@Inject`在类型的参数或字段上检测到时，`MyService.class`它会使用 class 实例化`MyService`。要使用此绑定器，需要向 JAX-RS 应用程序注册。在您的`web.xml`中，定义一个 JAX-RS 应用程序，如下所示：

```
<servlet>
  <servlet-name>MyApplication</servlet-name>
  <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
  <init-param>
    <param-name>javax.ws.rs.Application</param-name>
    <param-value>com.mypackage.MyApplication</param-value>
  </init-param>
  <load-on-startup>1</load-on-startup>
</servlet>
<servlet-mapping>
  <servlet-name>MyApplication</servlet-name>
  <url-pattern>/*</url-pattern>
</servlet-mapping> 
```

实现`MyApplication`类（在上面的 中指定`init-param`）。

```
public class MyApplication extends ResourceConfig {
    public MyApplication() {
        register(new MyApplicationBinder());
        packages(true, "com.mypackage.rest");
    }
} 
```

`MyResource`指定依赖注入的绑定器在类的构造函数中注册，并且我们还使用`packages()`方法调用告诉应用程序在哪里可以找到 REST 资源（在您的情况下为）。

* * *

## 回答 #2

> 赞同：57
> 
> 时间：2015-03-26T10:07:13.580

首先只是回答接受答案中的评论。

> “绑定是做什么的？如果我有一个接口和一个实现怎么办？”

它只是读取`bind( implementation ).to( contract )`。你可以替代链条`.in( scope )`。的默认范围`PerLookup`。所以如果你想要一个单例，你可以

```
bind( implementation ).to( contract ).in( Singleton.class ); 
```

还有一个`RequestScoped`可用的

`bind(Class).to(Class)`此外，您还可以代替`bind(Instance).to(Class)`，这将自动成为单例。

* * *

添加到[接受的答案](https://stackoverflow.com/a/17133081/2587435)

对于那些试图弄清楚如何`AbstractBinder`在您的 web.xml 中注册您的实现（即您没有使用 a `ResourceConfig`）的人，似乎无法通过包扫描发现活页夹，即

```
<servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
<init-param>
    <param-name>jersey.config.server.provider.packages</param-name>
    <param-value>
        your.packages.to.scan
    </param-value>
</init-param> 
```

或者这个

```
<init-param>
    <param-name>jersey.config.server.provider.classnames</param-name>
    <param-value>
        com.foo.YourBinderImpl
    </param-value>
</init-param> 
```

为了让它工作，我必须实现一个[`Feature`](http://docs.oracle.com/javaee/7/api/javax/ws/rs/core/Feature.html)：

```
import javax.ws.rs.core.Feature;
import javax.ws.rs.core.FeatureContext;
import javax.ws.rs.ext.Provider;

@Provider
public class Hk2Feature implements Feature {

    @Override
    public boolean configure(FeatureContext context) {
        context.register(new AppBinder());
        return true;
    }
} 
```

`@Provider`注释应该允许被`Feature`包裹扫描拾取。或者不扫描包，你可以显式`Feature`注册`web.xml`

```
<servlet>
    <servlet-name>Jersey Web Application</servlet-name>
    <servlet-class>org.glassfish.jersey.servlet.ServletContainer</servlet-class>
    <init-param>
        <param-name>jersey.config.server.provider.classnames</param-name>
        <param-value>
            com.foo.Hk2Feature
        </param-value>
    </init-param>
    ...
    <load-on-startup>1</load-on-startup>
</servlet> 
```

* * *

**也可以看看：**

*   [使用 Jersey 进行自定义方法参数注入](https://psamsotha.github.io/jersey/2015/11/01/jersey-method-parameter-injection.html)
*   [如何将对象注入球衣请求上下文？](https://stackoverflow.com/q/27665744/2587435)
*   [如何在 jersey / hk2 应用程序中正确配置 EntityManager？](https://stackoverflow.com/q/28045019/2587435)
*   [请求作用域注入单例](https://psamsotha.github.io/jersey/2015/12/16/request-scope-into-singleton-scope.html)

以及泽西文档中的一般信息

*   [自定义注入和生命周期管理](https://jersey.java.net/documentation/latest/ioc.html)

* * *

## 更新

### 工厂

除了接受答案中的基本绑定之外，您还有工厂，您可以在其中拥有更复杂的创建逻辑，并且还可以访问请求上下文信息。例如

```
public class MyServiceFactory implements Factory<MyService> {
    @Context
    private HttpHeaders headers;

    @Override
    public MyService provide() {
        return new MyService(headers.getHeaderString("X-Header"));
    }

    @Override
    public void dispose(MyService service) { /* noop */ }
}

register(new AbstractBinder() {
    @Override
    public void configure() {
        bindFactory(MyServiceFactory.class).to(MyService.class)
                .in(RequestScoped.class);
    }
}); 
```

然后你可以注入`MyService`你的资源类。

* * *

## 回答 #3

> 赞同：13
> 
> 时间：2015-01-08T19:49:19.903

选定的答案可以追溯到不久前。在自定义 HK2 活页夹中声明每个绑定是不切实际的。我正在使用 Tomcat，我只需要添加一个依赖项。即使它是为 Glassfish 设计的，它也可以完美地融入其他容器。

```
 <dependency>
        <groupId>org.glassfish.jersey.containers.glassfish</groupId>
        <artifactId>jersey-gf-cdi</artifactId>
        <version>${jersey.version}</version>
    </dependency> 
```

确保您的容器也已正确配置（[请参阅文档](http://docs.jboss.org/weld/reference/latest-2.2/en-US/html_single/#_servlet_containers_such_as_tomcat_or_jetty)）。

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2016-10-06T07:51:52.143

晚了，但我希望这对某人有所帮助。

我的 JAX RS 定义如下：

```
@Path("/examplepath")
@RequestScoped //this make the diference
public class ExampleResource { 
```

然后，在我的代码中，我终于可以注入：

```
@Inject
SomeManagedBean bean; 
```

就我而言，这`SomeManagedBean`是一个 ApplicationScoped bean。

希望这对任何人都有帮助。

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2014-06-02T13:52:43.330

Oracle 建议在将 JAX-RS 与 CDI 结合使用时将 @Path 注释添加到要注入的所有类型：http: [//docs.oracle.com/javaee/7/tutorial/jaxrs-advanced004.htm](http://docs.oracle.com/javaee/7/tutorial/jaxrs-advanced004.htm) 虽然这远非完美（例如，您将在启动时收到来自 Jersey 的警告），我决定采用这条路线，这样我就无需在活页夹中维护所有支持的类型。

例子：

```
@Singleton
@Path("singleton-configuration-service")
public class ConfigurationService {
  .. 
}

@Path("my-path")
class MyProvider {
  @Inject ConfigurationService _configuration;

  @GET
  public Object get() {..}
} 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2014-07-03T20:18:36.773

如果你更喜欢使用 Guice 并且不想声明所有绑定，你也可以试试这个适配器：

[guice-bridge-jit-injector](https://github.com/t-tang/guice-bridge-jit-injector)

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2019-01-09T10:26:42.750

对我来说，`AbstractBinder`如果我在我的 Web 应用程序中包含以下依赖项（在 Tomcat 8.5、Jersey 2.27 上运行），它就可以工作：

```
<dependency>
    <groupId>javax.ws.rs</groupId>
    <artifactId>javax.ws.rs-api</artifactId>
    <version>2.1</version>
</dependency>
<dependency>
    <groupId>org.glassfish.jersey.containers</groupId>
    <artifactId>jersey-container-servlet</artifactId>
    <version>${jersey-version}</version>
</dependency>
<dependency>
    <groupId>org.glassfish.jersey.ext.cdi</groupId>
    <artifactId>jersey-cdi1x</artifactId>
    <version>${jersey-version}</version>
</dependency>
<dependency>
    <groupId>org.glassfish.jersey.inject</groupId>
    <artifactId>jersey-hk2</artifactId>
    <version>${jersey-version}</version>
</dependency> 
```

它适用于我的 CDI 1.2 / CDI 2.0（分别使用 Weld 2 / 3）。

* * *

## 回答 #8

> 赞同：0
> 
> 时间：2019-10-28T11:16:16.717

jersey restful 服务所需的依赖关系，Tomcat 是服务器。其中 ${jersey.version} 是 2.29.1

```
 <dependency>
        <groupId>javax.enterprise</groupId>
        <artifactId>cdi-api</artifactId>
        <version>2.0.SP1</version>
        <scope>provided</scope>
    </dependency>
    <dependency>
        <groupId>org.glassfish.jersey.core</groupId>
        <artifactId>jersey-server</artifactId>
        <version>${jersey.version}</version>
    </dependency>
    <dependency>
        <groupId>org.glassfish.jersey.containers</groupId>
        <artifactId>jersey-container-servlet</artifactId>
        <version>${jersey.version}</version>
    </dependency>
    <dependency>
        <groupId>org.glassfish.jersey.inject</groupId>
        <artifactId>jersey-hk2</artifactId>
        <version>${jersey.version}</version>
    </dependency> 
```

基本代码如下：

```
@RequestScoped
@Path("test")
public class RESTEndpoint {

   @GET
   public String getMessage() { 
```

# javascript - 我应该通过 JS 还是 CSS 加载响应式设计

> ID：16216764
> 
> 赞同：0
> 
> 时间：2013-04-25T13:59:06.233
> 
> 标签：javascript, css, responsive-design

我正在寻找一个稍微响应的设计。我很想知道人们在加载响应式设计时的感受，我是否应该加载一个新的 css 文件并使用 JS 来定义屏幕大小。或者我应该在当前的 css 文件中创建媒体查询，然后从那里开始。寻找关于速度的意见和人们的感受是更优化的方法。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:05:41.877

将有关样式的所有内容放在 CSS 文件中是最佳做法。

*   HTML => 结构
*   CSS => 样式
*   JS => 逻辑

您分离关注点越多，您的代码就越容易维护。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:03:36.700

由于 javascript 可能被禁用，您应该仅使用 CSS 来实现响应目的。

如果你真的离不开 javascript（例如在 dom 中移动元素），请确保你有一些用于非 js 启用用户的后备 css。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:15:08.633

事实上，很少有用户会禁用 javascript，除非他们是在紧急情况下（例如，如果他们只有过时的手机，因为他们的新手机没电了）。如果您的网站不适合这些情况，请使用 javascript 而不用担心用户会禁用。

通常，如果文件大小合理，将媒体查询放在一个 css 文件中将是一个不错的选择，因为一个文件比单独的文件发出的请求更少。

另一方面，Javascript 是非常后备的，因为旧的 IE 不支持媒体查询。

您可以参考一些框架，例如[bootstrap](http://twitter.github.io/bootstrap/)。一个实现胜过所有答案。

# c# - 如果对象是在 using 语句中创建的并且没有显式绑定到引用，那么它是否有资格进行垃圾回收？

> ID：16216765
> 
> 赞同：4
> 
> 时间：2013-04-25T13:59:07.793
> 
> 标签：c#, .net, using-statement

我有这个（仅插图）C# 代码：

```
using( new System.IO.MemoryStream() ) {
    System.Threading.Thread.Sleep(1000);
} 
```

请注意，这里 a`MemoryStream`是创建的，并且没有显式绑定到引用。因此，除非由于`using`语句而有一些特殊处理，否则对象没有对它的引用，并且可以在控制离开`using`语句之前甚至在`Sleep()`完成之前收集。

在控制权离开声明之前是否有`MemoryStream`资格收集`using`？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2013-04-25T14:00:16.517

不。

该`using`语句编译为`finally`处理对象的块。

因此，它仍然在范围内，直到块结束。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T14:00:27.023

不它不是。

在幕后，`MemoryStream`已创建了对 的隐藏引用，因此它仍然存在。

# c# - 验证复选框

> ID：16216766
> 
> 赞同：1
> 
> 时间：2013-04-25T13:59:10.243
> 
> 标签：c#, checkbox, validation

我已经在这里查看了十几个以前的答案，但对我没有任何帮助。我需要一个必须选中复选框才能提交的表单。我正在使用 C# 并且对它很陌生，我刚刚发现与文本框一起使用的 RequiredFieldValidator 不适用于复选框，因此我需要另一种方法来执行此操作。

提交时，字段中的数据将发送到 MS SQL 数据库。我有更多的字段，然后是下面显示的字段，但我想我会为这篇文章压缩它并删除除了一个文本框和我需要在提交时验证的复选框之外的所有内容。

我希望它在提交时这样做：

![在此处输入图像描述](https://i.stack.imgur.com/XvtW3.jpg)

```
<form id="form1" runat="server">
    <asp:Label ID="NameLbl" runat="server" Text="Label"></asp:Label><asp:RequiredFieldValidator
        ID="NameRFV" runat="server" ErrorMessage="NameTxtBox"></asp:RequiredFieldValidator>
    <asp:TextBox ID="NameTxtBox" runat="server"></asp:TextBox>
    <br />
    <asp:Label ID="AliveLbl" runat="server" Text="Are you alive?"></asp:Label>
    <asp:CheckBox ID="AliveChkBox" runat="server" />
    <asp:Button ID="Submit" class="btn btn-primary" runat="server" Text="Submit"  OnClick="Submit_Click" />
</form> 
```

我已经阅读了有关使用 CustomValidator 的信息，但我无法使用它正常运行。人们一直说您需要编译/构建代码才能使其工作，而我根本不知道该怎么做。

也会考虑 javascript 选项。如果您知道验证它们的更好方法，我也可以使用 CheckboxList 。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T14:20:49.913

这是解决方案：

后面的代码：

```
using System;

public partial class TestCheckBox : System.Web.UI.Page
{
    protected void Page_Load(object sender, EventArgs e)
    {
        this.Page.ClientScript.RegisterClientScriptBlock(this.GetType(), "AliveScript", "<script>function CheckAlive(){ return document.getElementById('" + this.AliveChkBox.ClientID + "').checked; } </script>");

        this.Submit.OnClientClick = "return CheckAlive();";
    }
    protected void Submit_Click(object sender, EventArgs e)
    {

    }
} 
```

页面：

```
<%@ Page Language="C#" AutoEventWireup="true" CodeFile="TestCheckBox.aspx.cs" Inherits="TestCheckBox" %>

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
<head runat="server">
    <title></title>
</head>
<body>
    <form id="form1" runat="server">
        <asp:Label ID="NameLbl" runat="server" Text="Label"></asp:Label>
        <asp:RequiredFieldValidator ID="NameRFV" runat="server" ErrorMessage="NameTxtBox" ControlToValidate="NameTxtBox"></asp:RequiredFieldValidator>
        <asp:TextBox ID="NameTxtBox" runat="server"></asp:TextBox>
        <br />
        <asp:Label ID="AliveLbl" runat="server" Text="Are you alive?"></asp:Label>
        <asp:CheckBox ID="AliveChkBox" runat="server" />
        <asp:Button ID="Submit" class="btn btn-primary" runat="server" Text="Submit" OnClick="Submit_Click" />
    </form>
</body>
</html> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:08:37.010

在`Submit_Click`函数中，您可以添加检查是否`AliveChkBox.Checked`为`true`. 如果是`false`，您可以显示 a`MessageBox`或类似的东西来通知用户它需要检查，然后简单地`return`从`Submit_Click`这样就不会发生任何事情，直到它被检查。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:34:30.523

if (checkBox1.Checked == true) button1.Enabled = true;

使用与此类似的代码，只需将其设置为未在属性上启用 button1

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T14:14:11.513

你想用

```
if (checkbox1.Checked) 
btn1.enabled

else (checkbox1.disabled)
btn1.disabled
this.errorProvider1.SetError(checkbox1, "Must be checked to continue"); 
```

# c - C 局部变量与函数同名 - 它是如何工作的？

> ID：16216768
> 
> 赞同：25
> 
> 时间：2013-04-25T13:59:13.030
> 
> 标签：c, scope

我教 C 语言给绝对的初学者，我注意到我的一些学生有这样的想法，即在函数中使用相同的名称并在函数中使用局部变量。我认为这很愚蠢，会阻止递归。

这是一个例子：

```
int add2numbers (int a, int b) { /* Tested on Mac OS X with gcc */
    int add2numbers = a + b;
    return add2numbers;
} 
```

我理解它是如何工作的方式是变量在函数的本地范围内，而函数在全局范围内。

那么，问题...

1.  我是否正确理解这一点？
2.  他们是从哪里得到这个想法的？

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-04-25T14:08:04.887

假设函数是全局的并且变量是局部的，您是正确的。这就是您的程序中没有冲突的原因。

现在考虑下面给出的程序，

```
#include<stdio.h>
int x=10;
void x()
{
  printf("\n%d",x);
}

int main()
{

   x();
   return 0; 
} 
```

你会得到一个错误，因为在这个程序中，函数`x()`和变量`x`都是全局的。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2013-04-25T14:05:57.057

帕斯卡:)

Pascal 中的简单函数：

```
function max(num1, num2: integer): integer;
   var
   (* local variable declaration *)
   result: integer;
begin
   if (num1 > num2) then
      result := num1
   else
      result := num2;
   max := result;
end; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:03:23.167

> 1）我是否正确理解这一点？

差不多。

> 2）他们从哪里得到这个想法？？？

对于 SO 来说，这不是一个建设性的问题。

# iphone - 如何在iOS中获取保存的图像文件路径

> ID：16216770
> 
> 赞同：0
> 
> 时间：2013-04-25T13:59:15.983
> 
> 标签：iphone, ios, uiimagepickercontroller, photo-gallery

嗨，我正在开发一个应用程序，其中可以选择从 iOS 照片库中挑选照片。我必须将选定的照片上传到服务器。要上传图像，我使用的是**Kaltura SDK**，所以我处于无法直接发送`UIImage`到服务器的情况。我需要发送保存的图像**文件路径**。

为此，我找到了一个解决方案，即将选定的照片保存在特定的文件路径中，然后我将使用该文件路径。但问题是我不想再次将照片保存在手机内存中，因为这些照片已经存储在特定路径中。

那么有没有其他选项可以在不再次保存的情况下检索保存的图像文件路径？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2013-04-25T14:02:08.307

试试这个：

```
- (void)saveImage: (UIImage*)image
{
    if (image != nil)
    {
        NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                         NSUserDomainMask, YES);
        NSString *documentsDirectory = [paths objectAtIndex:0];
        NSString* path = [documentsDirectory stringByAppendingPathComponent:
                      @"test.png" ];
        NSData* data = UIImagePNGRepresentation(image);
        [data writeToFile:path atomically:YES];
    } 
}

- (UIImage*)loadImage
{
    NSArray *paths = NSSearchPathForDirectoriesInDomains(NSDocumentDirectory,
                                                     NSUserDomainMask, YES);
    NSString *documentsDirectory = [paths objectAtIndex:0];
    NSString* path = [documentsDirectory stringByAppendingPathComponent:
                  @"test.png" ];
    UIImage* image = [UIImage imageWithContentsOfFile:path];
    [self sendAction:path];
    return image;
} 
```

# sql - 将文档映射到不同的实体

> ID：16216771
> 
> 赞同：0
> 
> 时间：2013-04-25T13:59:18.740
> 
> 标签：sql, database, database-design

我在设计数据库时遇到问题。

我有一个表，其中包含具有以下表结构的文档：

```
[Documents]
Id [int] 
FileName [varchar]
FileFormat [varchar]
FileContent [image] 
```

在我的程序中：每个文档都可以是独立的（与实体没有任何关系）或与客户或员工类型的对象有关系（可能即将推出更多）

每个实体在数据库中都有一个 ID。例如，Employee-Table 看起来像：

```
[Employee]
Id [int]
Fk_NameId [int]
Fk_AddressId [int]
Fk_ContactId [int] 
```

我的想法是为实体和文档的连接创建一个表。我想到了类似的东西：

```
[DocumentConnection]
DocumentId [int]
EntityId [int]
Entity [varchar] 
```

DocumentConnection-Table 中的实体列包含关系的表名。

在 Employee 类型的实体示例中，该列将包含“Employee”。然后在我的应用程序中，我通过从数据库中读取实体字符串来为文档构建选择语句。

我不确定这是否是一个好方法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T15:59:17.527

我认为拥有 EmployeeDocument 表、CustomerDocument 表等会是一个更好的设计。

这将允许您使用实体表的外键，这在您提议的设计中是不可能的。在您的设计中，您可以在 entity 和 entityId 列中放置任何内容，并且无法通过与现有实体实际相关的外键关系强制执行。

我可以看到使用您的 DocumentConnection 表的唯一原因是您的应用程序是否需要动态创建新类型的关系。我认为情况并非如此，因为您说过每种类型的实体都有自己的表。

# mysql - MySQL 按列排序 = x，列 asc？

> ID：16216773
> 
> 赞同：2
> 
> 时间：2013-04-25T13:59:27.473
> 
> 标签：mysql

我不会粘贴整个查询。它看起来像这样。

```
SELECT *, MONTH(date_created) as month 
from table 
GROUP BY month ORDER BY month='3', month asc 
```

因为现在是四月，我今年正在查询，所以我预计顺序如下 3、1、2、4。

相反，我得到了 1、2、4、3。

如何更改语句的 ORDER BY 部分以首先按选定月份排序结果，然后按顺序显示一年中的其余月份？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T14:01:01.113

添加`DESC`

```
ORDER BY month = '3' DESC, month asc 
```

`month='3'`是一个返回 1 或 0 的布尔表达式，所以基本上当结果为零时，它会在结果的最后一部分。

或不使用`DESC`，使用`<>`

```
ORDER BY month <> '3', month asc 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:03:36.697

您必须在第一顺序添加`DESC`or ：`ASC`

```
SELECT *, MONTH(date_created) as month 
FROM table 
GROUP BY month ORDER BY month='3' DESC, month ASC 
```

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2013-04-25T14:14:34.693

解决方案是按字段排序

```
SELECT * FROM table
GROUP BY month
ORDER BY FIELD(month, 3,1,2,4) 
```

# scala - Scala View + Stream 组合导致 OutOfMemory 错误。如何用视图替换它？

> ID：16216774
> 
> 赞同：0
> 
> 时间：2013-04-25T13:59:31.793
> 
> 标签：scala

我正在考虑使用惯用的 Scala 解决一个非常简单的问题，即 Eratosthenes 筛子，用于学习目的。

我已经学习了一个 Stream 缓存，因此在确定第 n 个元素时它的性能不是很好，因为它是一个 O(n) 复杂性访问，带有数据的记忆，因此不适合这种情况。

```
 def primes(nums: Stream[Int]): Stream[Int] = {
        Stream.cons(nums.head,
            primes((nums tail) filter (x => x % nums.head != 0)))
    }

    def ints(n: Int): Stream[Int] = {
        Stream.cons(n, ints(n + 1))

    };
    def nthPrime(n: Int): Int = {
        val prim = primes(ints(2)).view take n toList;
        return prim(n - 1);
    }; 
```

整数流是有问题的流。完成素数过滤后，JVM 运行 OutOfMemory。在不使用 Streams 的情况下实现相同功能的正确方法是什么？

基本上从整数的角度来看素数并显示最后一个元素，而不需要记忆？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:03:14.323

I have had similar cases where a stream was a good idea, but I did not need to store it's values. In order to consume the stream without storing it's values I created (what I called) `ThrowAwayIterator`:

```
class ThrowAwayIterator[T](var stream: Stream[T]) extends Iterator[T] {
  def hasNext: Boolean = stream.nonEmpty
  def next(): T = {
    val next = stream.head
    stream = stream.tail
    next
  }
} 
```

Make sure that you do not store a reference to the instance of stream that is passed in.

# python - python中函数调用之间全局变量的值丢失

> ID：16216775
> 
> 赞同：2
> 
> 时间：2013-04-25T13:59:32.077
> 
> 标签：python, python-2.7, list-comprehension

我知道我一定错过了一些基本的东西——只是想确保我得到准确的答案。

我有以下代码。为什么在while is not`CACHE_KEYS`之后仍然是 None ？`load()``CACHE`

```
import bisect
import csv

DB_FILE = "GeoLiteCity-Location.csv"

# ['locId', 'country', 'region', 'city', 'postalCode', 'latitude', 'longitude', 'metroCode', 'areaCode']
CACHE = []
CACHE_KEYS = None

def load():
    R = csv.reader(open(DB_FILE))

    for line in R:
        CACHE.append(line)

    # sort by city
    CACHE.sort(key=lambda x: x[3])

    CACHE_KEYS = [x[3] for x in CACHE]

if __name__ == "__main__":
    load()

    # test
    # print get_geo("Ruther Glen") 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:02:23.570

我认为制作它`global`会起作用。在要编辑的全局范围内定义的任何变量都应`global`在该函数中指定。您的代码只是创建一个局部变量`CACHE_KEYS`并正确存储信息。但是，为了确保它被复制到全局变量中，请`global`在函数中声明该变量。您调用该`append`函数`CACHE`，因此可以正常工作。更改后的代码。

```
import bisect
import csv

DB_FILE = "GeoLiteCity-Location.csv"

# ['locId', 'country', 'region', 'city', 'postalCode', 'latitude', 'longitude', 'metroCode', 'areaCode']
CACHE = []
CACHE_KEYS = None

def load():
    R = csv.reader(open(DB_FILE))

    for line in R:
        CACHE.append(line)

    # sort by city
    CACHE.sort(key=lambda x: x[3])
    global CACHE_KEYS
    CACHE_KEYS = [x[3] for x in CACHE]

if __name__ == "__main__":
    load() 
```

每当您为全局变量赋值时，您都必须将其声明为`global`. 请参阅以下代码片段。

```
listOne = []
def load():
    listOne+=[2]
if __name__=="__main__":
    load() 
```

上面的代码有一个赋值而不是一个`append`调用。这给出了以下错误。

```
UnboundLocalError: local variable 'listOne' referenced before assignment 
```

但是，执行以下代码段。

```
listOne = []
def load():
    listOne.append(2)
if __name__=="__main__":
    load() 
```

给出以下输出。

```
>>> print listOne
[2] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:08:50.973

事情在

```
CACHE_KEYS = [x[3] for x in CACHE] 
```

`CACHE_KEYS`在全局范围内定义。在上面的行中，您为其分配了一个新值，将其带入本地范围，为了在函数中操作变量（并在以后保留它的值），`global`它：

```
def load():
    global CACHE_KEYS
    ...
    CACHE.sort(key=lambda x: x[3])
    CACHE_KEYS = [x[3] for x in CACHE] 
```

# php - $slice 在 php 驱动程序中实现？

> ID：16216777
> 
> 赞同：0
> 
> 时间：2013-04-25T13:59:32.640
> 
> 标签：php, mongodb, push, slice

我的问题是是否可以在 mongodb 中将 '$slice' 与 update() 和 $push 一起使用。

我已经尝试过这个：（有和没有强制转换为（对象）

```
$db->collection->update(
     array('_id' => new MongoId($id)), 

     (object)array( '$push' => 
          array('thumbs' => array(
               '$each' => $items, 
               '$slice' => -5
)))); 
```

但唯一发生的事情是 mongo 将 update() 中的整个第二个数组添加到集合中。所以我得到

```
thumbs: [ { "$each" : ... 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-05T01:00:26.833

您正在运行 MongoDB pre 2.4。

MongoDB 2.4 引入了[$slice](http://docs.mongodb.org/manual/reference/operator/slice/)，之前的[$push](http://docs.mongodb.org/manual/reference/operator/push/)操作符不支持[$each](http://docs.mongodb.org/manual/reference/operator/each/)操作符。

当 MongoDB 遇到像这样的无法识别的运算符时（即在 MongoDB 2.2 中） $push 它会认为它实际上是您想要使用的键并将其视为任何其他数据。

# c# - 在后面的代码中添加 CSS 类到客户端超链接

> ID：16216781
> 
> 赞同：0
> 
> 时间：2013-04-25T13:59:40.740
> 
> 标签：c#, asp.net, html, css, page-lifecycle

我有一个链接列表：

```
<ul>
    <li><a href="#">Aktuel</a></li>
    <li><a href="#">Business</a></li>
    <li><a href="#">Common</a></li>
    <li><a href="#">Extras</a></li>
</ul> 
```

我必须向其中一个链接添加一个 CSS 类。我将不得不使用 C# 在代码隐藏中完成它。结果应该是这样的：

```
....
<li><a href="#" class="active">Business</a></li>
.... 
```

我应该在哪个生命周期事件上做以及如何做？

注意：我无法更改 html 设计。

提前谢谢。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:11:53.180

您可以在 CodeBehind 上注册 ClientScript.RegisterStartupScript，以运行 jQuery 脚本并完成这项工作。

**完整的解决方案，包括 ASP.NET 位：**

```
string jsScript = "$(function () { $(\"a:contains('Aktuel')\").addClass(\"active\"); });";

ClientScript.RegisterStartupScript(typeof(Page), "anythingYouFancy", jsScript, true); 
```

你可以在这里检查它的工作情况（不是 ASP.NET 部分的难点）：

[http://jsfiddle.net/JwkAe/](http://jsfiddle.net/JwkAe/)

# c# - Telerik MVC DatePicker - 禁用所有未来日期

> ID：16216788
> 
> 赞同：1
> 
> 时间：2013-04-25T14:00:04.857
> 
> 标签：c#, telerik, telerik-mvc

我有一个**Telerik MVC DatePicker**：

```
<%: Html.Telerik().DatePickerFor(model => model.Date)
                         .TodayButton()
                         .Max(DateTime.Now)
                         .HtmlAttributes(new { @onkeypress = "return allowNumbersWithDot(event);", @onpaste = "return false;" })
                        %> 
```

通过设置**Max**属性，我只获取当前日期之前的日期，并且所有未来的日期都被隐藏。我是什么，启用当前日期之前的所有日期并禁用所有未来日期。即用户可以看到所有日期，但只能选择到当前日期。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-05-06T20:43:49.490

Max 属性阻止选择和显示设置值之后的所有日期。要解决此问题，请尝试使用客户端事件处理程序格式化 DatePicker，例如：

```
@Html.Telerik().DatePickerFor(model => model.Date).ClientEvents(e => e.OnChange("onChange")) 
```

然后使用以下内容添加您的验证：

```
function onChange(e) {
    var endDate = new Date(); // Your specific date
    if (e.value > endDate) {
        if (e.previousValue === null) {
            $(this).data("tDatePicker").value(null);
        }
        e.preventDefault();
    }
} 
```

有关此技术的更多信息，请访问 Telerik 支持论坛： [http ://www.telerik.com/community/forums/aspnet-mvc/datepicker/datepicker---prevent-future-date-selection.aspx](http://www.telerik.com/community/forums/aspnet-mvc/datepicker/datepicker---prevent-future-date-selection.aspx)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2014-04-29T11:01:56.317

最小日期：使用它来设置用户可以选择的最小日期。

```
<%= Html.Telerik().DatePicker()
                  .Name("DatePicker")
                  .MinDate(new DateTime(1900,1,1)))
%> 
```

最大日期：使用它来设置用户可以选择的最大日期。

```
<%= Html.Telerik().DatePicker()
                  .Name("DatePicker")
                  .MaxDate(new DateTime(2100,1,1)))
%> 
```

祝你好运！

# c - 如何使用 fscanf 读取多行

> ID：16216799
> 
> 赞同：1
> 
> 时间：2013-04-25T14:00:28.157
> 
> 标签：c, scanf

我想读取我的 data.txt 文件，它看起来像并将其存储在一个名为 buffer[i][j] 的数组中

1 1 1 1

2 2 2 2

3 3 3 3

4 4 4 4

我正在编写一个看起来像的代码

```
#include"stdio.h"
#include"stdlib.h"

int main() {

  FILE *fp1;
  int i,j;

  int buffer[4][4]={0};

  fp1 = fopen("exact_enumerated_config_442_cub_mc","r");

  for(i=0;i<4;i++) {
    for(j=0;j<4;j++) {
      fscanf(fp1,"%d", &buffer[i][j]);
    }
    // fscanf(fp1,"\n");
  }
  fclose(fp1);

  for(i=0;i<4;i++) {
    for(j=0;j<4;j++) {
      printf("%d ",buffer[i][j]);
    }
    printf("\n");
  }
} 
```

但我得到了输出......

1 1 2 1

5 1 6 1

17 1 18 1

21 1 22 1

为什么？？？？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T14:08:38.957

*   *始终*检查结果[`fopen()`](http://en.cppreference.com/w/c/io/fopen)以确保文件已打开。
*   *始终*检查结果[`fscanf()`](http://en.cppreference.com/w/c/io/fscanf)以确保它成功并防止可能尚未分配值的后续代码处理变量（它返回已分配的数量）。
*   将前导空格字符添加到格式说明符以跳过空格，包括换行符：`" %d"`.

该代码将处理带有 16 个 s 的单行与`int`带有 4 个 s 的四行相同`int`。如果文件的格式是`int`每行 4 个 s 很重要，则使用读取单行[`fgets()`](http://en.cppreference.com/w/c/io/fgets)，然后使用格式说明符`sscanf()`提取`int`s以确保处理完整的缓冲区：`%n`

```
int ints[4][4] = { { 0 } };
char buffer[1024];
for (int i = 0; i < 4 && fgets(buffer, 1024, fp); i++)
{
    int pos;
    if (sscanf(buffer,
               "%d %d %d %d%n",
               &ints[i][0],
               &ints[i][1],
               &ints[i][2],
               &ints[i][3],
               &pos) != 4 || pos != strlen(buffer) - 1)
    {
        fprintf(stderr, "Invalid format: <%s>\n", buffer);
        exit(1);
    }
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:07:13.520

要获得所需的输出 (1111,2222,...)，请更改：

```
fp1 = fopen("exact_enumerated_config_442_cub_mc","r"); 
```

到：

```
fp1 = fopen("data.txt","r"); 
```

**说明：**使用`fopen`时应写下要读取的文件名。在你的情况下你必须写`data.txt`，而不是`exact_enumerated_config_442_cub_mc`......没有这个名称的文件，而且没有任何数据，如 1 1 1 1, 2 2 2 2, 3 3 3 3, 4 4 4 4...

***有关更多详细信息，请访问：***
[**wikibooks.org/wiki/C_Programming/C_Reference/stdio.h/fopen**](http://en.wikibooks.org/wiki/C_Programming/C_Reference/stdio.h/fopen)

* * *

这是您的“修改”（多余/浪费/额外`{` `}`删除并`data.txt`写入）代码，可为您提供所需的输出：1 1 1 1, 2 2 2 2, 3 3 3 3, 4 4 4 4。它打印名为`buffer`. 代表着...

...**数据已成功复制！从** `"data.txt"` **到** `buffer[4][4]`:

```
#include"stdio.h"
#include"stdlib.h"

int main()
{
    FILE *fp1;
    int i,j;

    int buffer[4][4];

    for ( i = 0; i < 4; i++ )
        for ( j = 0; j < 4; j++ )
            buffer[i][j] = 0;

    fp1 = fopen("data.txt","r");

    for(i=0; i<4; i++)
        for(j=0; j<4; j++)
            fscanf(fp1,"%d", &buffer[i][j]);

    fclose(fp1);

    for(i=0; i<4; i++)
    {
        for(j=0; j<4; j++)
            printf("%d ",buffer[i][j]);
        printf("\n");
    }

return 0;
} 
```

* * *

***附言***

如果`data.txt`将不包含

```
1 1 1 1
2 2 2 2
3 3 3 3
4 4 4 4 
```

但

```
1 1 1    1
2   2   2 2
3       3 3 3
4 444    // the last two elements are absent 
```

程序将正确读取第 1 行、第 2 行和第 3 行，第 4 行的输出将是

```
4 444 0 0 
```

它打印`4`, then `444`, 然后`0`和`0`: 最后两个元素是 '0's 因为`buffer`已经被零初始化，所以所有元素都改变了它们的值，但最后两个仍然是零。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:07:38.140

在字符串格式的开头添加空格应该是`" %d"`为了避免换行问题

```
fscanf(fp1," %d", &buffer[i][j]); 
```

顺便说一句，您可以改用以下代码

```
for(i=0;i<4;i++) {
   fscanf(fp1," %d %d %d %d", &buffer[i][0], &buffer[i][1], &buffer[i][2], &buffer[i][3]);
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T14:26:06.197

你说你想读`data.txt`那你为什么要打开文件`exact_enumerated_config_442_cub_mc`

尝试改变这个

```
fp1 = fopen("exact_enumerated_config_442_cub_mc","r"); 
```

到

```
fp1 = fopen("data.txt","r"); 
```

# database-design - 离线模式下的 NoSQL 数据库和前向兼容性

> ID：16216805
> 
> 赞同：4
> 
> 时间：2013-04-25T14:00:52.197
> 
> 标签：database-design, nosql, couchdb, database-schema, database-replication

在做了一些研究之后，似乎当人们询问 CouchDB 中的模式迁移时，他们很快就被反驳说这个概念与 NoSQL 意识形态不完全兼容。我理解 NoSQL 是如何意味着无模式的，并且感觉违反直觉。然而，我处于这样一种情况，我看不到如何完全避免模式迁移。我在移动设备上使用 NoSQL。这是我的设置和我的需求的主要内容。

1.  每个移动设备都有自己的复制数据库。
2.  移动设备可以离线工作。
3.  移动设备通过云服务器上的数据库进行复制以共享其数据。
4.  尽可能复制数据，以便不同设备上的多个用户可以处理相同的数据。
5.  较新版本的客户端可以决定更改它为特定键存储的值类型（即等效于模式更改）
6.  一旦有可用更新，用户可能不会立即更新应用程序。
7.  未更新的用户应该仍然能够处理与更新的用户相同的数据。

编辑：

1.  该应用程序是 100% 本机代码。

我的问题是，拥有旧版本软件客户端的用户不会期望新数据是字符串而不是 int 本身。因此，不能总是在客户端处理它，因为我们不想强迫用户更新他们的应用程序。

换个角度来解释，我希望拥有两个不同客户端版本的两个用户能够共享和修改相同的数据，这意味着我需要具有向后和向前兼容性。向后兼容性通常会得到解决，但前向兼容性有点问题。我需要一种方法来继续使用我上次修改的启发式来解决冲突，同时拥有一个无法完全解释新模式的版本。

经过一番思考，我可以考虑一种将云数据库拆分为多个源的方法；每个移动设备都推送其修改和一对一数据库，移动设备在其中提取适用于其版本的最新数据。在这两者之间的某个地方，我应该处理与模式迁移的向后和向前兼容性。

有没有办法避免模式迁移，即使在这样的设置中？有没有人看到任何其他更简单或更安全的解决方案？这种系统的局限性是什么？我不觉得我在这里完全走在正确的轨道上。

谢谢，保罗

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T16:45:27.373

如果您可以选择 CouchApps，那么您实际上可以规避不同客户端版本的问题。以防你不熟悉这些：CouchApps 是基于 HTML+CSS+JavaScript 的应用程序，直接由 CouchDB 提供服务。在移动平台上，将它们嵌入 Cordova (Phonegap) 以访问本机功能可能会派上用场。

由于 CouchApp 本质上存储在 CouchDB 数据库中的设计文档中，因此可以像复制普通文档一样复制它们。这使您可以选择在客户端连接到服务器时执行客户端软件的更新（实际上它会在任何复制时自动发生）。

如果您想考虑这个选项，您可能想看看[garden20](http://garden20.com/)、[Mobile Futon](https://play.google.com/store/apps/details?id=com.mainerror.mobilefuton&hl=en)、[kanso](http://kan.so)和[erica](https://github.com/benoitc/erica)。

# sml - 通过将列表保存在 val 中来删除列表 sml 的最后一个元素

> ID：16216806
> 
> 赞同：1
> 
> 时间：2013-04-25T14:00:54.160
> 
> 标签：sml, ml

如何删除*标准 ML*列表中的最后一个元素？我有一个列表定义为：

```
val list = [1, 4, 6, 8, 9] 
```

我想删除最后一个元素并将列表放在`val list`.

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T14:32:36.817

好吧，您有多种方法可以做到这一点。

*   您可以将原始列表拆开，并开始使用元素构建一个新列表，直到到达最后一个元素。

    ```
    fun f [] = ...
      | f [x] = ...
      | f (x::xs) = x :: ... 
    ```

*   或者您可以使用[List.take](http://www.standardml.org/Basis/list.html#SIG:LIST.take:VAL)函数从列表中获取前 i 个元素。显然，您可以使用[List.length](http://www.standardml.org/Basis/list.html#SIG:LIST.length:VAL)函数来计算您不想从列表中取出多少元素。

    ```
    fun h xs = List.take (xs, ...) 
    ```

# blogger - 将旧博客地址永久重定向到博客中的新博客地址

> ID：16216813
> 
> 赞同：10
> 
> 时间：2013-04-25T14:01:02.950
> 
> 标签：blogger

我有一个博客博客，它的自定义域将在一周内到期。因此，我计划创建一个新博客并将自定义域重定向到新博客域。考虑一下，我的旧域名是`old-blog.blogspot.com`，我希望将旧博客的所有链接重定向到我的新地址`new-blog.blogspot.com`。那么，有什么方法可以做到吗？

当我在谷歌上搜索时，我读到了关于使用博客条件语句执行此操作的信息，并且应该为每篇文章执行此操作。但是，在我的博客中，我有 200 多篇文章。无论如何？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2013-04-25T14:56:08.350

你可以尝试使用javascript。

将以下代码放入`<head>`模板中的标记内。

```
<script type='text/javascript'>
  var d='<data:blog.url/>';
  d=d.replace(/.*\/\/[^\/]*/, '');
  location.href = 'http://new-blog.blogspot.com'+d;
</script> 
```

这会将用户重定向到新域以及与旧域中相同的帖子 URL。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2015-04-20T17:58:22.160

我做了很多搜索来寻找如何迁移我的 Blogger 帐户，以便：

1.  旧 URL 上的每篇博文都被重定向到新 URL 上的同一篇博文（例如`http://old-url.blogspot.com/bar`，被重定向到`http://new-url.com/bar`）。
2.  您以不会失去 SEO 排名的方式进行重定向。这意味着 JavaScript 解决方案（例如本文中接受的答案）将不起作用，因为您需要`<link rel="canonical" href="http://new-url.com/bar"/>`在`<head>`.

我没有找到令人满意的答案，所以为了将来帮助其他人，我想我会在这里添加我想出的技巧。您需要 hack 的原因是博客模板使用一些[神秘的 XML 语法](https://support.google.com/blogger/answer/46995?hl=en)，允许基本的变量查找、循环和 if 语句，但据我所知，没有办法进行字符串操作来完成 URL 转换上面的要求#1。要解决此问题，您可以生成一个硬编码的 if 语句列表，检查您关心的每个可能的 URL 并将其重定向到正确的位置。类似于以下内容：

```
<b:if cond='data:blog.canonicalUrl == "http://old-url.blogspot.com/url1"'>
  <link rel="canonical" href="http://new-url.com/url1"/>
  <meta http-equiv="refresh" content="0; url=http://new-url.com/url1"/>
<b:elseif cond='data:blog.canonicalUrl == "http://old-url.blogspot.com/url2"'/>
  <link rel="canonical" href="http://new-url.com/url2"/>
  <meta http-equiv="refresh" content="0; url=http://new-url.com/url2"/>
<b:elseif cond='data:blog.canonicalUrl == "http://old-url.blogspot.com/url3"'/>
  <link rel="canonical" href="http://new-url.com/url3"/>
  <meta http-equiv="refresh" content="0; url=http://new-url.com/url3"/>
<!-- And so on, one if-statement per blog post --> 
```

如果您可以编写基本脚本，则不必手动生成这些 if 语句（可能有数百个）。相反，您可以[将 Blogger 帖子导出](https://support.google.com/blogger/answer/97416?hl=en)到 XML 文件并编写一个简单的脚本来读取该文件中的每个 URL 并生成上面的 if 语句。我写了一篇关于从[Blogger 迁移到 GitHub Pages](http://www.ybrikman.com/writing/2015/04/20/migrating-from-blogger-to-github-pages/)的博客文章，其中解释了所有血腥的细节，并且我用来生成 if 语句的 Ruby 脚本[在 GitHub 上可用](https://github.com/brikis98/yevgeniy-brikman-homepage/blob/gh-pages/_scripts/redirect_urls.rb)。请注意，这是为我的博客定制的一个非常 hacky 的脚本，它实际上是针对博客 XML 导出的 Jekyll 转换运行的，但是您可以使用它作为基础来创建自己的脚本，并避免大量奇怪的博客模板错误消息。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2014-03-08T02:24:40.860

对于可能关闭了 Javascript 的观众（现在很少见，但并非闻所未闻），你可以把

```
<meta content='0;url=http://your-new-url.tld' http-equiv='refresh'/> 
```

反而。

或者两者都做:)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-05-10T11:17:48.583

你必须导入你的博客

单击设置，然后单击其他，然后单击导入博客

接下来保存您的结果下载（XML 文件），然后单击您的新博客，然后单击设置，然后单击其他，然后单击 ekspor 博客，然后上传您的结果下载（XML 文件）完成

# asp.net - WIF SAML 2.0 CTP 身份提供者发起的 SSO

> ID：16216814
> 
> 赞同：0
> 
> 时间：2013-04-25T14:01:06.200
> 
> 标签：asp.net, single-sign-on, wif, saml-2.0

我正在开发 ASP.NET 应用程序的单点登录，我正在尝试决定是使用 WIF SAML 2.0 CTP 还是使用 ADFS 2.0。我已经阅读了 WIF SAML 2.0 CTP 启用身份提供者发起的 SSO 的几个地方，但我在任何地方都找不到任何示例或教程。有谁知道熟悉使用 WIF CTP 执行此操作的方法的好资源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T20:02:25.997

SAML2 CTP 是预发布的，我真的怀疑这是否会成为 RTM。所以我不会使用它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T20:42:59.253

因此，您希望从 ASP.NET 应用程序到 SAML IdP 的 SSO？

听起来您已经发现可以通过将 SAML 堆栈添加到您的应用程序或将 WS-Fed 到 ADFS 然后将 SAML 到 IdP 来直接转到 SAML IdP。

如前所述，SAML CTP 已经在 CTP 中使用了很长时间，而且文档很少。

看看[OpenSSO Fedlet](http://docs.oracle.com/cd/E17842_01/doc.1111/e17847/confignetsp.htm)。

但是，您可能会发现 ADFS 选项更快更容易。

# java - 我的 Lucene 搜索不返回结果

> ID：16216817
> 
> 赞同：2
> 
> 时间：2013-04-25T14:01:12.730
> 
> 标签：java, lucene

我正在学习 Lucene，这是我的第一堂测试课。我正在尝试实现内存搜索并从示例中借用一些代码。但搜索无法返回任何命中。你能帮我吗？谢谢。

```
 package my.test;
    import java.io.IOException;

    import org.apache.lucene.analysis.standard.StandardAnalyzer;
    import org.apache.lucene.analysis.util.CharArraySet;
    import org.apache.lucene.document.Document;
    import org.apache.lucene.document.Field;
    import org.apache.lucene.document.StringField;
    import org.apache.lucene.index.IndexWriter;
    import org.apache.lucene.index.IndexWriterConfig;
    import org.apache.lucene.index.IndexWriterConfig.OpenMode;
    import org.apache.lucene.index.Term;
    import org.apache.lucene.search.BooleanClause;
    import org.apache.lucene.search.BooleanQuery;
    import org.apache.lucene.search.IndexSearcher;
    import org.apache.lucene.search.PrefixQuery;
    import org.apache.lucene.search.ScoreDoc;
    import org.apache.lucene.search.SearcherManager;
    import org.apache.lucene.store.RAMDirectory;
    import org.apache.lucene.util.Version;

    public class TestInMemorySearch {
      public static void main(String[] args) {
        // Construct a RAMDirectory to hold the in-memory representation of the index.
        RAMDirectory idx = new RAMDirectory();

    try {
      // Make an writer to create the index
      IndexWriterConfig iwc = new IndexWriterConfig(Version.LUCENE_42, new StandardAnalyzer(Version.LUCENE_42, CharArraySet.EMPTY_SET));
      iwc.setOpenMode(OpenMode.CREATE_OR_APPEND);
      IndexWriter writer = new IndexWriter(idx, iwc);

      // Add some Document objects containing quotes
      writer.addDocument(createDocument("Theodore Roosevelt man", "It behooves every man to remember that the work of the "
          + "critic, is of altogether secondary importance, and that, " + "in the end, progress is accomplished by the man who does " + "things."));
      writer.addDocument(createDocument("Friedrich Hayek", "The case for individual freedom rests largely on the "
          + "recognition of the inevitable and universal ignorance " + "of all of us concerning a great many of the factors on "
          + "which the achievements of our ends and welfare depend."));
      writer.addDocument(createDocument("Ayn Rand", "There is nothing to take a man's freedom away from "
          + "him, save other men. To be free, a man must be free " + "of his brothers."));
      writer.addDocument(createDocument("Mohandas Gandhi", "Freedom is not worth having if it does not connote " + "freedom to err."));

      // Optimize and close the writer to finish building the index
      writer.close();
      // Build an IndexSearcher using the in-memory index
      SearcherManager mgr = new SearcherManager(idx, null);

      try {
        Document[] hits = search(mgr, "man", 100);
        for (Document doc : hits) {
          String title    = doc.get("title");
          String content  = doc.get("content");
          System.out.println("Found match:[Title]" + title + ", [Content]" + content);
        }

      } catch (IOException e) {
        e.printStackTrace();
      }

    } catch (IOException ioe) {
      // In this example we aren't really doing an I/O, so this
      // exception should never actually be thrown.
      ioe.printStackTrace();
    }
  }

  /**
   * Make a Document object with an un-indexed title field and an indexed
   * content field.
   */
  private static Document createDocument(String title, String content) {
    Document doc = new Document();
    doc.add(new StringField("title", title, Field.Store.YES));
    doc.add(new StringField("content", content, Field.Store.YES));

    return doc;
  }

  private static Document[] search(SearcherManager searchManager, String searchString, int maxResults) throws IOException {
    IndexSearcher searcher = null;
    try {
      // Build the query.
      String[] tokens = searchString.split("\\s+");
      BooleanQuery query = new BooleanQuery();
      for (String token : tokens) {
        query.add(new PrefixQuery(new Term("title", token)), BooleanClause.Occur.MUST);
        query.add(new PrefixQuery(new Term("content", token)), BooleanClause.Occur.MUST);
      }

      searcher = searchManager.acquire();
      ScoreDoc[] scoreDocs = searcher.search(query, maxResults).scoreDocs;
      Document[] documents = new Document[scoreDocs.length];
      for (int i = 0; i < scoreDocs.length; i++) {
        documents[i] = searcher.doc(scoreDocs[i].doc);
      }
      return documents;
    } finally {
      if (searcher != null) {
        searchManager.release(searcher);
      }
    }
  }    
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2013-04-25T15:55:47.373

[StringField](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/document/StringField.html)似乎是一个显而易见的选择，但它不是您想要在这里使用的。你想要[TextField](http://lucene.apache.org/core/4_0_0/core/org/apache/lucene/document/TextField.html)。 `StringField`将字段表示为单个标记，本质上是关键字或标识符。 `TextField`分析和标记字段以进行全文搜索。

`search`在您的方法中修复它就像更改一样简单：

```
doc.add(new StringField("title", title, Field.Store.YES));
doc.add(new StringField("content", content, Field.Store.YES)); 
```

到

```
doc.add(new TextField("title", title, Field.Store.YES));
doc.add(new TextField("content", content, Field.Store.YES)); 
```

# c# - Windows 8 应用程序 - 将数据传递到 MainPage

> ID：16216822
> 
> 赞同：0
> 
> 时间：2013-04-25T14:01:17.927
> 
> 标签：c#, windows, windows-store-apps

我想在我的应用程序中从 MainPage 的子页面传递数据。问题，据我所知，有一个导航到 MainPage 的初始加载屏幕，我想编写一个“如果从子页面导航”块以包含在 OnNavigatedTo 中。

这是我的 MainPage.xaml.cs 代码：

```
 protected override void OnNavigatedTo(NavigationEventArgs args)
    {
        if (base.OnNavigatedFrom(args) = ChildPage)
        {
        //    Code for: If navigated from child page
            ReturnData returnData = args.Parameter as ReturnData;
            this.myNewString = returnData.myString;
        }
        base.OnNavigatedTo(args);
    } 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-26T13:21:53.097

我发现您不能通过将数据传递到 Windows 8 应用程序的另一个页面来返回数据。您不能以传递数据的方式返回数据，即**this.Frame.Navigate(typeof(MainPage), passData);**

对于解决方案，我创建了一个**“已完成”**事件，并从后面的 MainPage C# 代码中调用它。

**MainPage.xaml.cs**：

```
 protected override void OnNavigatedFrom(NavigationEventArgs args)
    {
        if (args.SourcePageType.Equals(typeof(ChildPage)))
            (args.Content as ChildPage).Completed += OnChildPageCompleted;
        base.OnNavigatedFrom(args);
    }

    void OnChildPageCompleted(object sender, ReturnData args)
    {
        // Code to run if returned back to MainPage from ChildPage
        this.myNewString = returnData.myString;
        (sender as ChildPage).Completed -= OnChildPageCompleted;
    } 
```

**返回数据.cs**：

```
namespace MyTestApp
{
    class ReturnData
    {
        public String myString { set; get; }
    }
} 
```

**ChildPage.xaml.cs**：

```
public event EventHandler<ReturnData> Completed; 
```

**ChildPage.xaml.cs**：

```
protected override void OnNavigatedFrom(NavigationEventArgs args)
{
    if (Completed != null)
    {

        // Create ReturnData object
        ReturnData returnData = new ReturnData();

        returnData.myString = newStringChanged;

        // Fire Completed event
        Completed(this, returnData);
    }

    base.OnNavigatedFrom(args);
} 
```

# java - Java从字符串中解析长

> ID：16216824
> 
> 赞同：1
> 
> 时间：2013-04-25T14:01:23.703
> 
> 标签：java, string, parsing

我目前正在尝试解析一些在java中存储为字符串的长值，我遇到的问题是：

```
String test = "fffff8000261e000"
long number = Long.parseLong(test, 16); 
```

这会引发 NumberFormatException：

```
java.lang.NumberFormatException: For input string: "fffff8000261e000" 
```

但是，如果我从字符串中敲掉第一个“f”，它就可以很好地解析它。

我猜这是因为这个数字很大，我通常会在 long 的末尾加上一个“L”来解决这个问题。但是，在从字符串中解析 long 时，我无法找到最好的方法。

任何人都可以提供任何建议吗？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T14:28:22.943

有两种不同的方法可以回答您的问题，具体取决于您真正要寻找的行为类型。

答案 #1：正如其他人所指出的，您的字符串（解释为*正*`long`十六进制整数）对于 Java类型来说太大了。因此，如果您真的需要那么大的（正）整数，那么您将需要使用不同的类型，也许`java.math.BigInteger`，它还有一个带有 a`String`和一个基数的构造函数。

答案 #2：不过，我想知道您的字符串是否代表`long`. 在您的示例中，它将代表一个负数。如果是这种情况，那么 Java 的内置`long`解析器不会处理设置了高位的值（即 16 位字符串的第一个数字大于 7）。

如果您是第 2 种情况，那么这是一种（非常低效）的处理方式：

```
String test = "fffff8000261e000";
long number = new java.math.BigInteger(test, 16).longValue(); 
```

产生价值`-8796053053440`。（如果您的字符串长度超过 16 个十六进制数字，它会默默地丢弃任何更高的位。）

如果效率是一个问题，您可以编写自己的位旋转例程，一次从字符串末尾取出两个十六进制数字，也许构建一个字节数组，然后转换为长整数。一些类似的代码在这里：

[如何将 Java Long 转换为 Cassandra 的字节 []？](https://stackoverflow.com/questions/2641150/how-to-convert-a-java-long-to-byte-for-cassandra)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:13:26.513

您正在解析的数字太大，无法放入 java Long。添加一个`L`不会有帮助。如果 Long 是无符号数据类型，它会适合。

一种解决方法是将字符串分成两部分，然后在将它们加在一起时使用位移：

```
String s= "fffff8000261e000";
long number;
long n1, n2;

if (s.length() < 16) {
    number = Long.parseLong(s, 16);
}
else {
    String s1 = s.substring(0, 1);
    String s2 = s.substring(1, s.length());

    n1=Long.parseLong(s1, 16) << (4 * s2.length());
    n2= Long.parseLong(s2, 16);

    number = (Long.parseLong(s1, 16) << (4 * s2.length())) + Long.parseLong(s2, 16);
    System.out.println( Long.toHexString(n1));
    System.out.println( Long.toHexString(n2));
    System.out.println( Long.toHexString(number));
} 
```

笔记：

如果数字大于 Long.MAX_VALUE，则结果`long`将为负值，但位模式将与输入匹配。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:13:56.557

原始[long](http://docs.oracle.com/javase/tutorial/java/nutsandbolts/datatypes.html)变量可以保存范围从`-9,223,372,036,854,775,808`到 `9,223,372,036,854,775,807`包括在内的值。

计算表明，`fffff8000261e000`hexademical 是`18,446,735,277,656,498,176`十进制，这显然是越界了。相反，十六进制`fffff8000261e000`是`1,152,912,708,553,793,536`十进制，这显然在界限内。

正如这里的每个人都建议的那样，使用[`BigInteger`](http://docs.oracle.com/javase/6/docs/api/java/math/BigInteger.html)来解释这种情况。例如，`BigInteger bi = new BigInteger("fffff8000261e000", 16);`将解决您的问题。此外，`new java.math.BigInteger("fffff8000261e000", 16).toString()`将`18446735277656498176`准确地产生。

# backbone.js - 我的 JavaScript 代码抛出 SyntaxError (Unexpected token <)

> ID：16216829
> 
> 赞同：0
> 
> 时间：2013-04-25T14:01:42.680
> 
> 标签：backbone.js

任何人都可以帮助我找到我们的问题，我的代码发生了什么..

我收到错误消息：

```
Uncaught SyntaxError: Unexpected token < 
```

我的代码在这里：

```
$(function() {

    var userDetails=[
        {firstName:'Lakshmi', lastName:'Narayanan',age:32},
        {firstName:'Harish', lastName:'Manickam',age:28},
        {firstName:'Madan', lastName:'Gopal',age:27}
    ]

    var userModel = Backbone.Model.extend({
        defaults:{
            firstName:"",
            lastName:"",
            age:""
        }
    });

    var userList = Backbone.Collection.extend({
        model:userModel
    });

    var userView = Backbone.View.extend({
        tagName:"tr",
        className:"userList",
        template: $("#listTempalate").html(),
        render:function(){
            var temp = _.template(this.template);
            this.$el.html(temp(this.model.toJSON()));
            return this;
        }
    });

    var usersView = Backbone.View.extend({
        el:"tbody",
        initialize:function(){
            this.collection = new userList(userDetails);
            this.render();
        },
        render:function(){
            var that = this;
            _.each(this.collection.models, function(item){
                that.$el.append(new userView({model:item}).render().el);
            })
        }
    });

    var Router = Backbone.Router.extend({
        routes:{
            '' : 'home'
        }
    });

    var router = new Router();
    router.on('route:home', function(){
        var defaultUser = new usersView();
    })

    Backbone.history.start();

}); 
```

我的 HTML：

```
<!doctype html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=Edge,Chrome=1" />
    <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
    <title>User Manager</title>
    <link href="//netdna.bootstrapcdn.com/twitter-bootstrap/2.3.1/css/bootstrap-combined.min.css" rel="stylesheet">
</head>
<body>
    <div class="container">
        <h1>User Manager</h1>
        <hr>
        <div class="page">
            <table class="table striped">
                <thead>
                    <tr>
                        <th>First Name</th>
                        <th>Last Name</th>
                        <th>Age</th>
                        <th>Edit</th>
                    </tr>
                </thead>
                <tbody id="insertRows">

                </tbody>
            </table>
        </div>
    </div>
    <script id="listTempalate" type="text/template">
        <td><%= firstName %></td>
        <td><%= lastName %></td>
        <td><%= age %></td>
        <td><%= <a hre="#/edit/<%= user.id %>" class="btn">Edit</a></td>
    </script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.4.4/underscore-min.js"></script>
    <script type="text/javascript" src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.0.0/backbone-min.js"></script>
    <script type="text/javascript" src="js/userManager.js"></script>
</body>
</html> 
```

说真的，我无法在这里找到我的问题来解决它。以及任何人建议我在线查找backbone.js的问题..

所以让我继续检查我的代码..

提前致谢..

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:17:52.707

很确定这与您的 HTML 中的这一行有关

```
<td><%= <a hre="#/edit/<%= user.id %>" class="btn">Edit</a></td> 
```

您打开`<%=`然后再次打开它`/edit/<%=`，我认为这是导致问题的原因。即使允许打开它两次，您也没有`%>`在该行中添加一个final。

玩弄它，让我们知道它是怎么回事。

**编辑**

试试这个

```
<td> <a href="#/edit/<%= user.id %>" class="btn">Edit</a></td> 
```

您不需要将整个内容包装在`<%`and`%>`标记中，只需要将您想要输出的部分包装起来。

# android - 列表视图项目可垂直滚动

> ID：16216836
> 
> 赞同：0
> 
> 时间：2013-04-25T14:02:02.403
> 
> 标签：android, listview, scroll

目前我正在使用`ListView`它，它工作正常。但是我有一个`ListView`类似于段落的文本，我只想显示这 2 行文本并使其余文本可滚动，但我遇到一个问题，如果我`TextView`在获得其父 ( ) 的焦点，并且不会让它滚动。`ListView``TextView``ListView`

那么我可以实现这种`TextView`不会干扰滚动属性的可滚动功能`ListView`吗？

谢谢你。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-05-22T14:41:14.750

我能够通过以下方式做到这一点：

进入ListAdapter的getView方法获取该行的TextView对象，并写入

```
textView.setOnTouchListener(new View.OnTouchListener() {
   @Override
   public boolean onTouch(View v, MotionEvent event) {
       v.getParent().getParent().requestDisallowInterceptTouchEvent(true);
       return false ;
   }
}); 
```

当您触摸 TextView 时，控制滚动

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:09:17.670

你想要达到的目标真的是不可能的。操作系统如何知道您正在尝试滚动列表与列表行段落？在实际列表本身可以滚动之前，您基本上需要滚动到列表行段落的底部。这让用户感到困惑，而不是常见的 UX。

我建议您查看[ExpandableListView](http://developer.android.com/reference/android/widget/ExpandableListView.html)。它允许您拥有每一行的折叠版本，在您的情况下，每个列表行只有 2 行文本。当用户点击该行时，它可以扩展为完整的段落形式，并且列表将一直可滚动。您应该可以在网上找到很多教程。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-29T07:17:00.083

没有什么是不可能的，但做事的方式可能很困难。直接这件事不能实现，但间接是可以实现的，是的，我实现了。我是如何实现的有点复杂，但是是的，我会分享我是如何实现的。

在`ListView`我单击时，`Textview`我阻止了 listView 的 Touch 模式，以便它们的 toch 方法不会相互拦截，这可以通过使用 父级 ( )的`requestDisallowInterceptTouchEvent(true);` 此块来完成。`TouchListener``ListView`

现在，当单击时，`TextView`我允许它的触摸侦听器和`setMovementMethod`（），但是对于运动，我创建了一个自定义类，并且类正在关注

```
public class myScrollMethod extends ScrollingMovementMethod {

    @Override
    public void onTakeFocus(TextView widget, Spannable text, int dir) {
        // TODO Auto-generated method stub
        super.onTakeFocus(widget, text, dir);
    }

    @Override
    public boolean onKeyDown(TextView widget, Spannable buffer,
            int keyCode, KeyEvent event) {
        switch (keyCode) {
        case KeyEvent.KEYCODE_DPAD_DOWN:
            for (int i = 0, scrollAmount = getScrollAmount(widget); i < scrollAmount; i++) {
                down(widget, buffer);
            }
            return true;
        case KeyEvent.KEYCODE_DPAD_UP:
            for (int i = 0, scrollAmount = getScrollAmount(widget); i < scrollAmount; i++) {
                up(widget, buffer);
            }
            return true;
        default:
            return super.onKeyDown(widget, buffer, keyCode, event);
        }
    }

    private int getScrollAmount(TextView widget) {
        final int visibleLineCount = (int) ((1f * widget.getHeight()) / widget
                .getLineHeight());
        int scrollAmount = visibleLineCount - 1;
        if (scrollAmount < 1) {
            scrollAmount = 1;
        }
        return scrollAmount;
    }

} 
```

之后，当我单击父项时，我启用父项设置为 true 的 TouchIntercepter 并保持其父项并开始滚动。

通过这种方式，我成功地达到了这个要求

# eclipse - Java EE 6 的 Maven 与 Eclipse 项目方面

> ID：16216838
> 
> 赞同：7
> 
> 时间：2013-04-25T14:02:08.697
> 
> 标签：eclipse, jakarta-ee, maven, facets

我在 Eclipse 中使用这些原型创建了 Maven 项目：

*   ejb-javaee6
*   webapp-javaee6

这些项目是在没有方面的情况下创建的。

**将此类 Maven 项目转换为多面形式是否有意义？**

**哪些方面会有所帮助，哪些方面可能会给 Maven 项目带来麻烦？**

具体来说：以下任何项目方面是否会与 Maven 的责任相冲突？

*   爪哇
*   JavaScript
*   EJB 模块
*   动态网页模块
*   GlassFish 部署描述符文件
*   JavaServer Faces

我的印象是，将 Maven 项目转换为多面形式意味着混合两个世界。因此，我倾向于不启用任何项目方面。

但是在我工作的地方，我们有一些多面形式的 Maven 项目示例，我想知道它是否有（无风险）好处。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2013-04-25T14:19:14.753

Eclipse facets 和 maven 原型是正交的 - 即它们彼此没有影响，或者更确切地说，它们彼此不了解。如果它有助于您使用 eclipse 工作，您可以安全地添加构面。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-30T11:16:27.163

经过一些试验，我认为我有一些可行的方法（除了我无法让 m2e 接受用于 EJB 的 Java 1.7）。

**版本：**

*   日食朱诺 4.2
*   平方米 1.3.1
*   玻璃鱼 3.1.2
*   JDK 1.7.0_17（甲骨文）

**重要使用注意事项：使用下面的设置，***如果您想运行 Maven clean & install*，您应该禁用自动发布到 GlassFish（“从不自动发布”）。对于 Eclipse 中通常的编辑和保存工作，可以启用自动发布并且似乎工作正常。只有在显式启动 Maven 时（在 Eclipse 中）我才遇到问题。

**在 Eclipse 中使用 Maven 设置 EJB 项目**

```
Create Maven projects in Eclipse with these archetypes:
 ejb-javaee6
 ear-javaee6
 webapp-javaee6

webapp-javaee6
--------------
- Convert to faceted form, select GlassFish in Runtimes and enable:
  - Dynamic Web Module
  - GlassFish Deployment Descriptors Files
  - Java
  - JavaScript
  - JavaServer Faces
  Further configuration available...
  - Content directory: src/main/webapp
  - NOT checked: Generate web.xml deployment descriptor
  - JSF Capabilities (all defaults): JSF 2.1 + PrimeFaces selected
    CHECKED: "Include libraries with this application"

ejb-javaee6
-----------
- Convert to faceted form, select GlassFish in Runtimes and enable:
  - EJB Module
  - GlassFish Deployment Descriptors Files
  - Java
  Further configuration available...
  - NOT checked: Generate ejb-jar.xml deployment descriptor

ear-javaee6
-----------
- Convert to faceted form, select GlassFish in Runtimes and enable:
  - EAR
  - GlassFish Deployment Descriptors Files
  Further configuration available...
  - Add EJB and WEB projects as dependencies
  - Content directory: src/main/application (META-INF location used by Maven)
  - NOT checked: Generate application.xml deployment descriptor 
```

# php - 如何使用php将mysql数据库导出到ms访问

> ID：16216839
> 
> 赞同：0
> 
> 时间：2013-04-25T14:02:09.807
> 
> 标签：php, mysql, ms-access

我正在寻找一种使用 php 将 mysql 表导出到 MS Access 文件的方法。服务器是基于 Windows 的，我想将我的 mysql 表中的所有数据导出到 msaccess 文件中。我知道 mysql 到 csv 到 mbd 的转换（使用 phpmyadmin 和 ms 访问 s/w），但是有没有一种简单更好的方法可以将表格转换为访问文件，比如**使用 php**点击鼠标？ *请注意mysql表中有很多记录* 提前感谢您的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:36:46.997

有几种方法可以做到这一点。我可能只是将 Access 直接连接到 MySQL DB，如此[处](http://dev.mysql.com/doc/refman/5.1/en/connector-odbc-examples-tools-with-access.html#connector-odbc-examples-tools-with-access-linked-tables)所述。不过，我假设这不是您的选择。

假设无论出于何种原因您都无法做到这一点，您总是可以编写一个脚本以通过 PHP+SQL 连接到 MySQL 和 MSAccess 数据库。 [此链接](http://phpmaster.com/using-an-access-database-with-php/)包含通过 PHP 连接到 Access DB 的指南。

# java - 如何从独立的 *.java 源文件生成包结构？

> ID：16216844
> 
> 赞同：3
> 
> 时间：2013-04-25T14:02:19.977
> 
> 标签：java, eclipse, structure, packages

我一直在寻找我的问题的答案，但我找不到一些相关信息，所以我在问。我的目录包含数千个带有源代码的 Java 类（*.java 文件）。这些文件中的每一个都包含文件所属包的信息，当然还有它的类名+代码本身。我需要找到 Eclipse IDE（或者可能是另一个 IDE）的一些功能，它能够根据类文件中的信息重建“src”目录下的包，并为我带来一个好的 Java 项目结构，以便恢复包然后它的类可以很容易地导入到一个新的Java项目中。手动创建包的结构需要我（也许）很多天......

为了澄清：

我有：目录，其中包含：1.java、2.java、3.java、n.java ...

我需要：目录，其中将包含：

[src] -> [package_1] -> [1.java, 2.java, etc...] ... [src] -> [package_m] -> [3.java, n.java]

我认为这一定是可能的，因为每个类文件都包含它实际上属于哪个包的信息。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:07:01.583

如果您没有找到更好的解决方案：至少您可以将所有源代码导入 Eclipse 中的一个项目，并让 Eclipse 通过[对每个问题使用快速修复](http://help.eclipse.org/galileo/index.jsp?topic=/org.eclipse.jdt.doc.user/reference/ref-java-editor-quickfix.htm)的方式将每个文件移动到正确的包中。每个错误的包声明您仍然需要按 3 个键，但它可以让您免于摆弄文件和文件夹。

# javascript - 多个年龄计数器（计时器）的问题

> ID：16216849
> 
> 赞同：1
> 
> 时间：2013-04-25T14:02:25.157
> 
> 标签：javascript, jquery

我有一个页面，我想在其中为用户提出的出价提供“年龄计数器”。用户数量会因情况而异，因此需要考虑到这一点。我写了这个：

```
function timer(i) {
          // this selects a 'hh:mm:ss' timestamp
        if ($("#time_0" + i).text() !== "") {
            var now = new Date();
            var date = now.toDateString();
            var tStamp = new Date(date + "," + $("#time_0" + i).text());
            var diff = now - tStamp;
            var mins = Math.floor(diff / (1000 * 60));
            var secs = Math.floor((diff / 1000) % 60);
            if (mins < 10) {
                mins = "0" + mins;
            }
            if (secs < 10) {
                secs = "0" + secs;
            } else if (secs == 60) {
                secs = "00";
            }
            $("#user" + i + "-t").text(mins + ':' + secs);
        }
}

$(document).ready(function() {
                    //
            var ids = [];
            $("td[id^='time_0']").each(function() {
                var i = ($(this).attr("id")).slice(-1);
                ids.push(i);
            });
            for (i in ids) {  // in my example ids = [1,2,3]
                setInterval(function() {timer(i);}, 1000);
            }
}); 
```

计时器本身的功能就像我想要的那样，但仅适用于用户#2（中间用户）。我想如果我遇到这个问题，它可能是列表中第一个或最后一个具有工作计时器的用户，但我得到了用户#1 和#3 的空白单元格。

有人对我如何解决这个问题有任何想法吗？感谢您的时间。

==编辑==

我做了一个简单的[jsfiddle](http://jsfiddle.net/UQZTt/2/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:35:59.067

在您的版本循环中，从未超过第一个引用，即`timer(0)`，因为您使用 调用了函数`timer(i)`，它调用了数组中的第一个键`ids`。当您`setInterval`进入循环时，它将继续循环第一个`setInterval`直到终止。通过将其`i`放入匿名函数中，每个`setInterval`人都会被解雇。

```
$(document).ready(function () {
    var ids = [];
    $("td[id^='time_0']").each(function () {
        var i = $(this).attr("id").slice(-1);
        ids.push(i);
    });

    for (i in ids) {
        (function(i) { // i needs to be stored into a anonymous function otherwise it gets overwritten
            setInterval(function() {
                timer(ids[i]); // calling just timer(i) would use array keys, not the actual values - ids[i] means: "give me the value of the key of i"
            }, 1000)
        })(i);
    }
}); 
```

[对您的小提琴进行了更改](http://jsfiddle.net/UQZTt/3/)

# javascript - 如果 URL 包含给定文本，则停止运行此 Javascript 代码的其余部分

> ID：16216857
> 
> 赞同：2
> 
> 时间：2013-04-25T14:02:38.683
> 
> 标签：javascript

我在 Fluid 应用程序上使用 Greasekit，我希望停用当前加载的 URL 包含的脚本`chutney`。

[在 FluidApp 中]：**窗口 ---> 用户脚本 ---> 模式**

我希望我可以通过设置模式来做到这一点：我已添加`*amazon.co.uk*`，因此该脚本仅在亚马逊英国网站上有效。（这工作得很好，花花公子）但是，此外，URL 包含`chutney`（例如`https://www.amazon.co.uk/private/forum?ie=UTF8&tab=chutney`）我希望它关闭（忽略）脚本。是否有一个布尔类型表达式表示**相反**的意思`*chutney*`？（如果有，那将解决问题！）

# B计划

如果不是，也许我应该尝试修改实际脚本，使其仅在`chutney`页面 URL 栏中不存在的条件下运行。（我可以在代码中做到这一点吗？）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-08-14T21:26:33.257

我不认为我可以在计划 A 方面为您提供太多帮助，但计划 B 只是将所有代码包装在带有条件的 if 语句中`location.href.indexOf("chutney")==-1`。

如果您想使用 A 计划：找到创建模式的规则（`*`算作任意数量的字符等）会有所帮助。

# javascript - IE10 中元标记的window.location 问题

> ID：16216858
> 
> 赞同：0
> 
> 时间：2013-04-25T14:02:39.190
> 
> 标签：javascript, uri, internet-explorer-10, window.location, base-tag

从那时起，我就在我的 JS 脚本中使用了**window.location.href**来访问我网站的另一个页面。但是现在，IE10 这不能正常工作。在以前的 IE 版本中是可以的。

具体的事情是我们`<base href="someURL" target="_blank">`在`<head>`我们的网站中使用。

这曾经适用于我使用的所有浏览器，即使在 IE 旧版本中，但现在我注意到 IE10 不支持这个。相反，IE10 将我的 URI 添加到浏览器中当前页面的 URL。

**除了在window.location.href**中添加页面的完整地址之外，这里还有其他解决方案吗？

谢谢

# java - Java静态定义字典/HashMap

> ID：16216867
> 
> 赞同：1
> 
> 时间：2013-04-25T14:03:09.733
> 
> 标签：java, dictionary, hashmap

我有一块静态数据，我需要将其组织成一个包含哈希映射的数组。具体来说，我想在我的应用程序中有一个包含时区信息的静态对象，如下所示：[https ://gist.github.com/pamelafox/986163](https://gist.github.com/pamelafox/986163)

看到 Python 中的定义看起来多么干净，并且知道如何使用我知道的其他一些语言创建类似的干净定义，我希望在 Java 中有一种更干净的方法，然后`map.put(...)`重复运行。我已经看到了这个问题：[How to give the static value to HashMap?](https://stackoverflow.com/questions/8211784/how-to-give-the-static-value-to-hashmap) 但是想知道是否有更好的方法呢？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:14:25.250

一种解决方案是将数据以您能想到的任何格式存储为普通字符串，然后将字符串表示形式转换为映射（静态、非静态或一次性初始化实例）。

这种方法的一个改进是将数据存储在一个文件中并加载它（可以包含在 .jar 包中，当您使用 jar 时）。该解决方案的优点是可以轻松更新数据。

# javascript - 从 computeDigest(algorithm, value) byte[] 取回字符串表示

> ID：16216868
> 
> 赞同：13
> 
> 时间：2013-04-25T14:03:10.083
> 
> 标签：javascript, google-apps-script, md5, digest

Google App 脚本函数 computeDigest 返回签名的字节数组。如何获得摘要的字符串表示形式？

我已经尝试过 bin2String() 函数。

```
function sign(){     
var signature = Utilities.computeDigest(Utilities.DigestAlgorithm.MD5, "thisisteststring")
Logger.log(bin2String(signature));
}

function bin2String(array) {
  var result = "";
  for (var i = 0; i < array.length; i++) {
    result += String.fromCharCode(parseInt(array[i], 2));
  }
  return result;
} 
```

但它把“”放在日志中

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2013-04-26T01:51:09.363

如果我们`Logger.log(signature);`在调用 to 之后立即放置`computeDigest()`，我们会得到：

```
[8, 30, -43, 124, -101, 114, -37, 10, 78, -13, -102, 51, 65, -24, -83, 81] 
```

正如 javascript 中所表示的，摘要包括正整数和负整数，因此我们不能简单地将它们视为 ascii 字符。然而，MD5 算法应该为我们提供 0x00 到 0xFF (255) 范围内的 8 位值。那么，那些负值只是对高位的误解。把它当作一个标志位。为了更正，我们需要在任何负值上加上 256。

[如何在 JavaScript 中将十进制转换为十六进制？](https://stackoverflow.com/questions/57803/how-to-convert-decimal-to-hex-in-javascript)给我们这个来检索十六进制字符：

```
hexString = yourNumber.toString(16); 
```

综上所述，`sign()`这是您的功能，也[可作为 gist 使用](https://gist.github.com/mogsdad/5464686)：

```
function sign(message){     
  message = message || "thisisteststring";
  var signature = Utilities.computeDigest(
                       Utilities.DigestAlgorithm.MD5,
                       message,
                       Utilities.Charset.US_ASCII);
  Logger.log(signature);
  var signatureStr = '';
    for (i = 0; i < signature.length; i++) {
      var byte = signature[i];
      if (byte < 0)
        byte += 256;
      var byteStr = byte.toString(16);
      // Ensure we have 2 chars in our byte, pad with 0
      if (byteStr.length == 1) byteStr = '0'+byteStr;
      signatureStr += byteStr;
    }   
  Logger.log(signatureStr);
  return signatureStr;
} 
```

以下是日志包含的内容：

```
[13-04-25 21:46:55:787 EDT] [8, 30, -43, 124, -101, 114, -37, 10, 78, -13, -102, 51, 65, -24, -83, 81]
[13-04-25 21:46:55:788 EDT] 081ed57c9b72db0a4ef39a3341e8ad51 
```

让我们看看我们从[这个在线 MD5 哈希生成器中](http://www.miraclesalad.com/webtools/md5.php)得到了什么：

![081ed57c9b72db0a4ef39a3341e8ad51](https://i.stack.imgur.com/qHxTq.png)

我尝试了其他一些字符串，它们始终与在线生成器的结果相匹配。

* * *

## 回答 #2

> 赞同：17
> 
> 时间：2015-01-13T23:33:33.637

以防万一这对其他人有帮助，我整理了 Mogsdad 解决方案的更简洁版本：

```
function md5(str) {
  return Utilities.computeDigest(Utilities.DigestAlgorithm.MD5, str).reduce(function(str,chr){
    chr = (chr < 0 ? chr + 256 : chr).toString(16);
    return str + (chr.length==1?'0':'') + chr;
  },'');
} 
```

* * *

## 回答 #3

> 赞同：7
> 
> 时间：2015-12-05T21:43:01.490

单线：

```
Utilities.computeDigest(Utilities.DigestAlgorithm.MD5, "teststring")
  .map(function(b) {return ("0" + (b < 0 && b + 256 || b).toString(16)).substr(-2)})
  .join("") 
```

* * *

## 回答 #4

> 赞同：5
> 
> 时间：2018-04-10T17:09:09.470

有人说简洁吗？（*/fulldecent 在其他人都已经昏倒之后，带着酒帽，包括吸管来到派对上*）

```
Utilities.computeDigest(Utilities.DigestAlgorithm.MD5, "thisisteststring")
  .map(function(chr){return (chr+256).toString(16).slice(-2)})
  .join('') 
```

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2019-06-18T23:19:19.287

这是将 Byte[] 转换为 String 的简单方法。

在谷歌提供的文档中找到了这个：[https://developers.google.com/apps-script/reference/utilities/utilities#base64Decode(String)](https://developers.google.com/apps-script/reference/utilities/utilities#base64Decode(String))

```
Utilities.newBlob(myByteArray).getDataAsString(); 
```

迟到总比不到好。（并且由于在 Goole 中搜索该主题时，该主题仍然排在首位，这可能对某些人有所帮助）。

* * *

## 回答 #6

> 赞同：-1
> 
> 时间：2013-04-25T14:06:48.480

从这篇[文章](https://stackoverflow.com/a/3195961/205426)：

```
function string2Bin(str) {
  var result = [];
  for (var i = 0; i < str.length; i++) {
    result.push(str.charCodeAt(i).toString(2));
  }
  return result;
} 
```

# java - Java Swing根据带有defaulttablemodel的索引设置行和列的颜色

> ID：16216874
> 
> 赞同：0
> 
> 时间：2013-04-25T14:03:26.257
> 
> 标签：java, swing, jtable, defaulttablemodel

我希望能够做两件事：

1.  根据索引设置行的颜色，所以第一行是红色，第二行是蓝色，第三行是绿色
2.  能够基于某些东西设置列的颜色，无论是索引还是它们的名称等，只要有可能。

我不需要检测选择更改或任何东西。有人可以告诉我该怎么做吗？什么方法会有所帮助等？如果没有阅读标题，这是关于`DefaultTableModel`.`JTables`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T15:48:21.523

> set colors of rows based on index,

[Table Row Rendering](http://tips4java.wordpress.com/2010/01/24/table-row-rendering/) might give you some ideas.

> be able to set color of columns also based on something

You can provide a custom render for any column. Then you can add you logic to color the column based on something. Read the JTable API and follow the link to the Swing tutorial on `How to Use Table` and you will find a section on creating a custom renderer.

# nsmutablearray - NSUserDefault 中的 NSMutableArray

> ID：16216876
> 
> 赞同：0
> 
> 时间：2013-04-25T14:03:35.287
> 
> 标签：nsmutablearray, nsuserdefaults

我的桌子有问题！

我使用解析表视图，但是当我更改视图时，我的表会丢失数据。所以我决定将所有数据保存到nsuserdefault；但是，问题在这里，NSUserDefault 警告我： **“请注意，属性列表中的字典和数组也必须只包含属性值。”**

*注意：itemsToDisplay 是一个 NSMutableArray，包含 parsedItems 的标题、url、数据和摘要。*

好吧，这是我的代码：

```
self.itemsToDisplay = [[[NSUserDefaults standardUserDefaults] arrayForKey:@"items"] mutableCopy];

if (!self.itemsToDisplay) {
    self.itemsToDisplay = [[NSMutableArray alloc] init];
}

self.itemsToDisplay = [[NSMutableArray alloc]init];

self.itemsToDisplay = [parsedItems sortedArrayUsingDescriptors:
                       [NSArray arrayWithObject:[[[NSSortDescriptor alloc] initWithKey:@"date"
                                                                             ascending:NO] autorelease]]];

[[NSUserDefaults standardUserDefaults] setObject:self.itemsToDisplay forKey:@"items"];
[[NSUserDefaults standardUserDefaults] synchronize]; 
```

我想问题是**setObject:self.itemsToDisplay**，但我不知道如何解决。

感谢你们..

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T19:03:18.460

First lets mention that the table cannot lose data because it does not hold any user data. The data is either provided through bindings or through delegation see [NSTableViewDataSource](https://developer.apple.com/library/mac/#documentation/Cocoa/Reference/ApplicationKit/Protocols/NSTableDataSource_Protocol/Reference/Reference.html) in Apples documentation).

Second, the first three assignments to self.itemsToDisplay serve no purpose (unless you have side-effects in the setter) because they are all overridden by the last assignment.

Finally, if this code is already in the delegate then the delegate should be instantiated in your NIB file for the data to survive past a view swap. If your delegate is an object that is instantiated with your view it will also die with it along with all of the data and writing to the user-defaults is a bad idea for what you are trying to achieve. Simply set the delegate to an object whose lifetime is greater than that of both views.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-26T06:48:50.960

```
self.itemsToDisplay = [parsedItems sortedArrayUsingDescriptors:
                       [NSArray arrayWithObject:[[[NSSortDescriptor alloc] initWithKey:@"date"
                                                                             ascending:NO] autorelease]]];

//First lets encode it
NSUserDefaults *userDefault=[NSUserDefaults standardUserDefaults];
NSData *myEncodedObject = [NSKeyedArchiver archivedDataWithRootObject:self.itemsToDisplay];
[userDefault setObject:myEncodedObject forKey:[NSString stringWithFormat:@"sample"]]; 
```

# asp.net-web-api - Azure Worker 角色 Webapi 托管 + 服务总线

> ID：16216877
> 
> 赞同：0
> 
> 时间：2013-04-25T14:03:36.197
> 
> 标签：asp.net-web-api, azureservicebus, azure-servicebusrelay

我希望能够从 azure 服务总线中抽取消息并将它们发送到工作角色的 Webapi 控制器。我看过这篇优秀的（系列）文章[http://pfelix.wordpress.com/2012/03/15/asp-net-web-api-creating-an-host-using-azure-service-bus/](http://pfelix.wordpress.com/2012/03/15/asp-net-web-api-creating-an-host-using-azure-service-bus/)这是非常有趣但似乎使用 WCF 。我宁愿使用较新的 webapi 框架。是否有人已经将 QueueClient 包装为自定义主机的源？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-14T08:11:28.010

您引用的帖子确实使用了较新的 Web API 框架。在内部，它使用 WCF 中继绑定，类似于 Web API 自托管，它也在内部使用 WCF。

代码可在此处获得：[https ://github.com/pmhsfelix/WebApi.Explorations.ServiceBusRelayHost](https://github.com/pmhsfelix/WebApi.Explorations.ServiceBusRelayHost)

希望这可以帮助

佩德罗

# javascript - javascript中下面的冒号有什么用

> ID：16216881
> 
> 赞同：6
> 
> 时间：2013-04-25T14:03:43.497
> 
> 标签：javascript

以下代码块成功执行。我想知道除了使用 for 循环之外，这个标签还有什么用途？

```
<script>

js:
{
   alert("x");  
}

</script> 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:10:32.830

`:`无论如何，我都知道在javascript中有一些用途。

1.  `ternary operator`- 用于评估`if`单行中的语句：

    ```
    var x = "yes" == "yes" ? true : false; 
    ```

    上面这行代码在功能上等价于：

    ```
    if("yes" == "yes"){
        var x = true;
    }
    else{
        var x = false;
    } 
    ```

2.  标记代码块的开头 - 移动到代码块

    ```
    begin:
    for(int i = 0; i < 10; i++){
        break begin;
    } 
    ```

3.  对象文字 - 感谢@Ian 的提醒

    ```
    var someObject= {
        item: 'some value',
        anotherItem: 2 // Can put any type of variable here
    }; 
    ```

    [这种类型的符号在使用JSON](http://www.json.org/)时很常见

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T14:09:59.210

这是一个标签声明。您可以将带标签的语句与`break`and`continue`语句的形式一起使用：

```
outer: for (var i = 0; i < 1000; ++i) {
  for (var j = 0; j < 1000; j++) {
    if (somethingBad())
      break outer;
  }
} 
```

能够从内部嵌套循环到外部迭代级别（很少）有用。我认为我从未在数千行代码中使用过它。在原始问题中发布的示例代码中，标签没有明显的用途。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2013-04-25T14:12:27.090

它在 javascript中称为[标签*^([MDN])*](https://developer.mozilla.org/en/JavaScript/Reference/Statements/label)

```
myPrettyLabel:
{
   alert('testMe');
} 
```

> **提供带有标识符的语句，您可以使用 break 或 continue 语句引用该标识符。**
> 
> *例如，您可以使用标签来标识循环，然后使用 break 或 continue 语句来指示程序是应该中断循环还是继续执行。*

与`goto`一般程序相同

* * *

## 请注意

**避免使用标签**，因为标签在 JavaScript 中不是很常用，因为它们使程序更难阅读和理解。尽可能避免使用标签，并且根据具体情况，更喜欢调用函数或抛出错误。

* * *

参考：[SO - JavaScript 中的冒号 (:) 代表什么？](https://stackoverflow.com/a/7147298/468718)

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2013-04-25T14:07:25.113

这就是您标记标签的方式，这是一种非常糟糕的做法，它可以实现旧的“goto”，这是在顺序执行中简单跳转到代码

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2013-04-25T14:13:22.570

冒号用于添加标签。正如[标签的 MDN 文档](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Statements/label)所解释的：

> 提供带有标识符的语句，您可以使用 break 或 continue 语句引用该标识符。
> 
> 例如，您可以使用标签来标识循环，然后使用 break 或 continue 语句来指示程序是应该中断循环还是继续执行。

MDN 也包含一个代码示例：

```
var i, j;

loop1:
for (i = 0; i < 3; i++) {      //The first for statement is labeled "loop1"
   loop2:
   for (j = 0; j < 3; j++) {   //The second for statement is labeled "loop2"
      if (i == 1 && j == 1) {
         continue loop1;
      } else {
         console.log("i = " + i + ", j = " + j);
      }
   }
}

// Output is:
//   "i = 0, j = 0"
//   "i = 0, j = 1"
//   "i = 0, j = 2"
//   "i = 1, j = 0"
//   "i = 2, j = 0"
//   "i = 2, j = 1"
//   "i = 2, j = 2"
// Notice how it skips both "i = 1, j = 1" and "i = 1, j = 2" 
```

此外，正如文章所述，这种逻辑通常会使您的代码更难理解，因此您最好重组代码以使用其他类型的流控制（函数等）以避免使用标签。

* * *

请注意，此语法可能会令人困惑，因为它也类似于对象语法，例如：

```
{ js: {1}, ... } 
```

# sql - SQL - 更改现有查询的行/列结构

> ID：16216883
> 
> 赞同：0
> 
> 时间：2013-04-25T14:03:46.343
> 
> 标签：sql

我是 Excel VBA 的死忠粉，不得不过渡到一个非常基本的基于 SQL 的软件。我已经设法使现有查询适应我的需求（仍然不确定如何！）但我可以通过一些帮助来进一步调整它:)

查询是：
`PARAMETERS [Date From] DateTime, [Date To] DateTime, [Site Group] Text;

SELECT Contacts.Name, DataProfile.Date, DataProfile.TotalUnits

FROM (Lookup INNER JOIN Groups ON Lookup.Lookup_Id = Groups.Lookup_Id) INNER JOIN (Contacts INNER JOIN (Points INNER JOIN DataProfile ON Points.Id = DataProfile.Point_Id) ON Contacts.Id = Points.Contacts_Id) ON Groups.Link_Id = Contacts.Id

WHERE (((Lookup.Lookup_Name)=[Site Group]) AND ((DataProfile.Date) Between [Date From] And [Date To]) AND ((Points.Type)='Electricity') AND ((DataProfile.Type)=0))

AND Contacts.Group_1=[Client Group]

ORDER BY Contacts.Name, DataProfile.Date;`

这会按站点按天生成每日总计列表，如下所示：

站点.......日期............值
站点 1....01/01/13...444.7
站点 1....02/01/13...861.5
站点1....03/01/13...850.0
等...

是否可以将查询写入输出为：

站点.....01/01/13....02/01/13....03/01/13站点1
....444.7.......861.5....... ..850.0
站点2....111.1.......222.2....333.3
等......

每个站点有一排而不是那么多，这将使我的生活变得容易得多。目前我正在编写 excel 代码以适应数据 - 但它很长而且效率不高。如果我能让 SQL 以这种格式输出，我会像某种办公室之神！！！

欢迎任何帮助/建议/指导:)

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-04-25T19:47:02.283

您正在运行什么版本的 SQL？可以使用 PIVOT 吗？

[http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx](http://msdn.microsoft.com/en-us/library/ms177410(v=sql.105).aspx)

# node.js - Node.js 永远的模块在列表中崩溃

> ID：16216893
> 
> 赞同：1
> 
> 时间：2013-04-25T14:04:19.127
> 
> 标签：node.js

我在 Ubuntu 12.04 上运行节点 v0.10.5，我可以使用 forever 模块启动进程，但是一旦我尝试列出进程，就会永远崩溃，并出现以下错误/堆栈跟踪：

```
/usr/local/lib/node_modules/forever/node_modules/nssocket/node_modules/lazy/lazy.js:211
        for (var i = 0; i < chunk.length; i++) {
                                 ^
TypeError: Cannot read property 'length' of null
    at Function.<anonymous>     (/usr/local/lib/node_modules/forever/node_modules/nssocket/node_modules/lazy/lazy.js:211:38)
    at Lazy.<anonymous> (/usr/local/lib/node_modules/forever/node_modules/nssocket/node_modules/lazy/lazy.js:187:21)
    at Lazy.EventEmitter.emit (events.js:95:17)
    at Socket.<anonymous> (/usr/local/lib/node_modules/forever/node_modules/nssocket/node_modules/lazy/lazy.js:50:22)
    at Socket.EventEmitter.emit (events.js:92:17)
    at emitReadable_ (_stream_readable.js:392:10)
    at emitReadable (_stream_readable.js:388:5)
    at Socket.Readable.read (_stream_readable.js:250:5)
    at Socket.onSocketEnd (net.js:256:10)
    at Socket.EventEmitter.emit (events.js:117:20) 
```

我试过升级它，然后直接重新安装它。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-26T08:38:11.233

它是固定的。我认为很快就会发布。

[https://github.com/nodejitsu/forever/issues/408](https://github.com/nodejitsu/forever/issues/408)

或者您可以手动修补lazy.js

[http://cl.ly/code/2k1I3A2r2v0k](http://cl.ly/code/2k1I3A2r2v0k)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:54:13.883

在 node.js 版本 0.10 上 Forever 仍然被破坏。你现在通过[nvm](https://github.com/creationix/nvm)安装 0.8

# android - Android将引用的android项目添加到主android项目中

> ID：16216894
> 
> 赞同：0
> 
> 时间：2013-04-25T14:04:21.173
> 
> 标签：android, eclipse, eclipse-adt

我想知道以下情况是否可能：

我的工作区中有 2 个项目，其中一个是另一个项目中的引用文件夹（引用的项目是外部 SDK）

现在，我不希望他们坐在两个不同的位置，因为它对 svn 不友好。

是否可以选择将此项目添加到我的项目中？（我无法将其转换为 jar，因为它包含资源）

# javascript - 对 httpstatusready=4 的 Ajax 调用不执行

> ID：16216898
> 
> 赞同：0
> 
> 时间：2013-04-25T14:04:33.533
> 
> 标签：javascript, jquery, ajax

我正在使用 ajax（效果很好）来传递价值。但是当我添加 HTTP 代码时，没有任何动作。使用简单的 HTTP 来显示`div`基于`http.readystatus`. 这是正确的格式吗？如果不是，那是什么？

```
if (colorToCheck == gup("Player1")) {
    document.getElementById('win').innerHTML = player1 + " wins";
    redScore += 1;

    //Browser Support Code
    var xmlhttp;
    if (window.XMLHttpRequest) {
        // code for IE7+, Firefox, Chrome, Opera, Safari
        xmlhttp = new XMLHttpRequest();
    } else {
        // code for IE6, IE5
        xmlhttp = new ActiveXObject("Microsoft.XMLHTTP");
    }
    if (xmlhttp.readyState == 3 && xmlhttp.status == 200) {
        document.getElementById("save").innerHTML = "saving";
    } else if (xmlhttp.readyState == 4 && xmlhttp.status == 200) {
        //ajax call
        var dataString = 'winner=' + player1 + '&player1=' + player1 + '&player2=' + player2 + '&matchNum=' + matchNum;
        $.ajax({
            type: "POST",
            url: "red.php",
            data:dataString,
            cache: false,
            success: function(response) {
                $('.result13').html(response);    
            }
        });
    }
} 
```

任何帮助将不胜感激！提前致谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:21:56.257

[Vanilla JS](http://vanilla-js.com/) AJAX 调用的结构是：

```
var xmlhttp = new XMLHttpRequest();
xmlhttp.open("GET","path/to/file.php"); // or "POST" if needed
xmlhttp.onreadystatechange = function() {
    if( this.readyState == 3) document.getElementById('save').innerHTML = "saving";
    if( this.readyState == 4) {
        if( this.status != 200) alert("ERROR: Server returned "+this.status+" "+this.statusText);
        else {
            // do something
            alert(this.responseText);
        }
    }
};
xmlhttp.send(data); // data is whatever POST data you want. Leave out if using GET. 
```

# java - 使用 JSCH 在远程服务器上获取 MD5 校验和

> ID：16216902
> 
> 赞同：3
> 
> 时间：2013-04-25T14:04:48.463
> 
> 标签：java, md5, sftp, jsch

我正在编写一个应用程序，其要求是将文件从远程 SFTP 服务器传输到本地计算机，反之亦然。在文件传输过程中，我想确保在传输过程中没有数据包丢失和损坏。所以想法是在传输之前对远程文件（驻留在 sftp 服务器中）运行 MD5 校验和，然后开始传输过程. 传输完成后，在本地文件上运行 md5 并比较两个校验和。

我正在使用 JSCH 连接到 sftp 服务器并且代码在 java 中。但我不知道如何在驻留在 SFTP 服务器中的远程文件上运行 md5。我的代码必须在传输之前对远程文件执行 MD5 place.关于如何完成此任务的任何想法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:14:24.070

大多数 Unix 系统都有一个`md5sum`命令。您可以在远程服务器上调用它来检索哈希。

```
$ md5sum /tmp/test
34a27208f62ff3bdae031c9e8a354ac3  /tmp/test 
```

Jsch 网站包含[一个示例](http://www.jcraft.com/jsch/examples/Exec.java.html)，展示了如何在远程服务器上调用命令。这可以很容易地适应运行`md5sum`命令。

# c++ - 让系统调用 `select()` 阻塞，直到套接字读取到某些内容

> ID：16216907
> 
> 赞同：0
> 
> 时间：2013-04-25T14:04:57.020
> 
> 标签：c++, c, sockets, system-calls

在 的手册页中`select(int nfds, fd_set *readfds, fd_set *writefds, fd_set *exceptfds, struct timeval *timeout)`，它说：

```
If timeout is a null pointer, the select blocks indefinitely. 
```

*无限期*是否意味着一个任意长度的时期？

让线程阻塞`select()`直到套接字获取一些数据是好的吗？如果是这样，*timeout 应该是多少？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:06:53.850

“无限期”不是任意的，它是永远的。如果`timeout`指针是`NULL`，那么`select`将永远阻塞，或者直到其中一组中的文件描述符之一“准备好”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:15:00.103

不，“永远”等待不是一个好主意……如果拔下网络电缆，您的应用程序将冻结。您应该设置一个合理的超时时间（可能是几秒钟），以便在数据永远不会到达的情况下安全退出。

# java - 如何使我的自定义相机应用程序成为默认应用程序？

> ID：16216908
> 
> 赞同：1
> 
> 时间：2013-04-25T14:04:58.113
> 
> 标签：java, android

如果我会使用以下代码：

```
Intent takePictureIntent = new Intent(MediaStore.ACTION_IMAGE_CAPTURE);
startActivityForResult(takePictureIntent,1); 
```

它会正确启动默认的 Android 相机应用程序......我已经编写了一个自定义相机应用程序，但是如何让 Android 知道它是一个相机应用程序，并且应该让用户选择使用哪个相机应用程序。

换句话说，如果我使用上面的代码，*我的*应用程序应该启动，而不是默认的 android 应用程序。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:13:22.840

> 但是如何让 Android 知道它是一个相机应用程序，并且应该让用户选择使用哪个相机应用程序。

对那个动作有一个`<intent-filter>`on an ：`<activity>`

```
<intent-filter>
  <action android:name="android.media.action.IMAGE_CAPTURE" />
  <category android:name="android.intent.category.DEFAULT" />
</intent-filter> 
```

下次有人执行您的上述`startActivityForResult()`调用时，您将与支持该`Intent`结构的任何其他内容一起出现在选择器中。

# r - R匿名函数：按值捕获变量

> ID：16216909
> 
> 赞同：6
> 
> 时间：2013-04-25T14:04:57.963
> 
> 标签：r, lambda, anonymous-function

我已经定义了一个匿名函数列表，这些函数使用在外部范围中定义的变量。

```
funclist <- list()
for(i in 1:5)
{
  funclist[[i]] <- function(x) print(i)
}

funclist[[1]]('foo') 
```

输出是：

```
[1] 5 
```

似乎**i**是通过引用捕获的。我希望它被价值捕获，即输出应该是

```
[1] 1 
```

有没有办法告诉 R通过值而不是通过引用来捕获**i ？**

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:21:49.427

当你运行一个`for`循环时，这会在循环运行的环境中创建一个变量，并且在循环中创建的函数也会从这个环境中运行。因此，每当您运行以这种方式创建的使用循环中的索引值的函数时，它们只能访问最终值，并且只要该变量仍然存在（尝试`rm(i)`并尝试让列表中的一个函数变得有趣） .

您需要做的是将索引值绑定到自己环境中的函数。`lapply`会自动为您执行此操作。但是，惰性评估存在一个问题。您要做的也是创建匿名函数之前`force`的评估：`i`

```
funclist <- lapply(1:5, function(i) {force(i); function(x) print(i)})
funclist[[1]]('foo')
[1] 1
funclist[[5]]('foo')
[1] 5 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-04-25T14:21:21.150

我对您想要的内容的阅读是在定义函数时在函数的环境中存储一个值，然后保留该值以进行内部计算。

为此，您需要一个闭包：

```
i <- 3
test <- local({
  i <- i
  function(x) x[i]
})
test(letters[1:5]) # returns 'c'
i <- 5
test(letters[1:5]) # still returns 'c' (i.e. i is local to the test closure) 
```

那是你想要的吗？

# sql - 获取字符串的第一个字母，忽略“the”

> ID：16216911
> 
> 赞同：0
> 
> 时间：2013-04-25T14:04:59.933
> 
> 标签：sql, string, sql-server-2008

我正在尝试获取以某个字母开头的书名列表。但是，我需要忽略标题开头的“the”。例如，当我在寻找以“a”开头的标题时，这个查询应该返回“the alamo”和“american history”。

我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:08:39.673

利用

```
WHERE CASE WHEN SUBSTR(title, 1, 4) = 'the ' THEN SUBSTR(title, 5) ELSE title END LIKE '...' 
```

在您的查询中，或使用模式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:07:47.587

试试这个**查询**

```
select titles
from tablename
where titles like 'a%'
or titles like 'the a%' 
```

**编辑**

```
select titles
from tablename
where REPLACE(titles,'the ','') like 'a%' 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2013-04-25T14:08:38.120

```
... where title like 'a%' or title like 'the a%' 
```

# ios - TabBarController 将隐藏

> ID：16216913
> 
> 赞同：0
> 
> 时间：2013-04-25T14:05:15.237
> 
> 标签：ios, uinavigationcontroller, uikit, uitabbarcontroller

TabBarController 是否有“将隐藏”和“将显示”操作的协议？UITabBarControllerDelegate,UITabBarDelegate 中似乎没有我问这个是因为当我的 TabBarController 在推送时隐藏时我想做一些事情。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:25:09.603

没有这样的通知，但是为了注册事件，您必须以编程方式切换选项卡栏的可见性。

# c# - C#中的列表操作

> ID：16216917
> 
> 赞同：0
> 
> 时间：2013-04-25T14:05:35.110
> 
> 标签：c#, list

我有两个列表

```
ListA ={'a','b','c','d','e'};
ListB ={'a','c','d','f'} 
```

我需要`ListC`from `ListA`and `ListB`，这样`ListC= {'b','e'}`

这可能吗？如何获得`ListC`？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2013-04-25T14:06:31.900

使用`Except`方法：

```
var result = ListA.Except(ListB);
//result: b, e 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:07:11.527

使用[`Enumerable.Except`](http://msdn.microsoft.com/en-us/library/bb300779.aspx)：

```
var ListC = ListA.Except(ListB).ToList(); 
```

您可以将其翻译为：“先给我所有，而不是第二个”

如果你想要相反的：“从第一个给我，也是第二个”使用[`Intersect`](http://msdn.microsoft.com/en-us/library/system.linq.enumerable.intersect.aspx)：

```
var ListC = ListA.Intersect(ListB); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:07:24.327

```
var ListA = new List<char> { 'a', 'b', 'c', 'd', 'e' };
var ListB = new List<char> { 'a', 'c', 'd', 'f' };
var ListC = ListA.Except(ListB).ToList();
// ^^ has 2 items; 'b' and 'c' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T14:07:02.747

```
var listC = listA.Except(listB).ToList(); 
```

# javascript - 如何将网格单元边框扩展到剑道网格的底部？

> ID：16216923
> 
> 赞同：1
> 
> 时间：2013-04-25T14:05:47.717
> 
> 标签：javascript, html, kendo-ui, kendo-grid

即使没有足够的行到达网格区域的底部，是否可以让剑道网格上的单元格边框延伸到网格区域的底部？

# powershell - 激活功能：激活功能时出错 在 siteURl> 找到的程序集的清单定义与程序集引用不匹配

> ID：16216929
> 
> 赞同：2
> 
> 时间：2013-04-25T14:06:07.853
> 
> 标签：powershell, sharepoint-2010

```
Error:
Activate-Feature : Error activating feature …&lt;featurename>……… at …&lt;siteURl>……..The located assembly's manifest definition does not match the assembly reference. (Exception from HRESULT: 0x80131040) 
```

使用 PowerShell 脚本收回和部署 WSP 解决方案时出现问题，WSP 部署成功，但不知何故无法使用事件接收器激活功能我正在启动服务，如下所示：

```
Stop-Service -Name “SPAdminV4”
Start-SPAdminJob
Start-Service -Name SPAdminV4
WaitForSolutionDeploymentJobToFinish $name 
```

*注意：*当我进行全新部署而不是撤回/部署时，我没有发现任何问题。
当我在单独的脚本中收回解决方案并使用新的 powershell 实例进行部署时，我什至可以使用文件

我在调查时发现了以下参考资料： http: [//sisharepoint.wordpress.com/2010/03/26/getting-around-gac-problems-when-you-deploy-sharepoint-solutions-with-powershell/](http://sisharepoint.wordpress.com/2010/03/26/getting-around-gac-problems-when-you-deploy-sharepoint-solutions-with-powershell/) [http:// blogs.msdn.com/b/briangre/archive/2011/02/17/sharepoint-2010-visual-studio-solution-deploy-deployment.aspx](http://blogs.msdn.com/b/briangre/archive/2011/02/17/sharepoint-2010-visual-studio-solution-deploy-deployment.aspx)

请指导我解决此问题

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-26T08:06:18.860

我试图从 Powershell 脚本强制重启 IIS，但这对我没有帮助......所以我找到了一种解决方法，我从当前的 powershell 会话开始了一个新进程，并从那里执行了其余步骤。它解决了这个问题：

Write-Host "Starting new process" Start-Sleep 5 Start-Process powershell.exe -ArgumentList '-NoExit','& S:\powersellscript.ps1' Stop-Process -Id $PID

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T17:05:24.863

我来过这个几次。不幸的是，我没有时间深入研究它，但应用程序池回收似乎为我解决了这个问题。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-01T19:26:28.757

关闭并重新打开 Visual Studio 为我解决了这个问题。

# c# - 进度条不可见

> ID：16216930
> 
> 赞同：0
> 
> 时间：2013-04-25T14:06:07.957
> 
> 标签：c#, progress-bar

`ProgressBar`如果我通过创建一个`ToolBox`并在我的代码中添加以下行：

```
progressBar1.value = 40; 
```

当我的应用程序运行时，我可以查看进度条。

但是，如果我尝试通过我的代码创建一个，我无法查看一个 - 进度条不可见。这是我的代码：

```
ProgressBar progressBar1 = new ProgressBar();
progressBar1.Location = new System.Drawing.Point(168, 180);
progressBar1.Height = 650;
progressBar1.Width = 340;            
progressBar1.Minimum = 20;
progressBar1.Maximum = 100;            
progressBar1.Value = 49;    
progressBar1.Visible = true; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-04-25T14:08:24.930

如果您使用的是 Windows 窗体，则必须将其添加到您的窗体中，如下所示：

```
this.Controls.Add(progressBar1); 
```

如果您使用的是 WPF，那么您必须这样做：

```
this.Children.Add(progressBar1); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:09:41.400

您需要先将进度条添加到您的应用程序窗口。

假设您使用 WPF 在 Window 类中创建 ProgressBar：

```
this.Children.Add(progressBar1); 
```

# jquery - 使用 jquery 在 div > table 内自动水平滚动

> ID：16216931
> 
> 赞同：0
> 
> 时间：2013-04-25T14:06:21.163
> 
> 标签：jquery, html, scroll

div 中有一个表格，一个特定的 th 有一个 id，我们需要从左到右或水平滚动到该 id。

我试过但没有奏效..

```
$('#right-order-panel').scrollTo('+=100px', 800, { axis:'x' });

 $('#right-order-panel').animate({
                scrollLeft: "-=" + 250 + "px"
            });

$('#right-order-panel').scrollLeft(300); 
```

在没有任何外部插件的情况下如何实现这一点？

提前致谢！！！

# mysql - SQL 查询中的奇怪逻辑

> ID：16216932
> 
> 赞同：3
> 
> 时间：2013-04-25T14:06:26.120
> 
> 标签：mysql, sql

我有一个奇怪的案例构建 MySql 查询：

这里是。

1.  我需要根据 first_name 和 last_name 对结果进行排序
2.  我的预期结果是在 ORDER BY 中使用 CONCAT(first_name, last_name)

但我仅限于在 ORDER BY 中不使用 CONCAT。有没有办法可以构建查询

原始 SQL：

```
SELECT CONCAT(first_name, last_name) 
FROM users 
ORDER BY CONCAT(first_name, last_name) 
```

案例：first_name 可以为空

例子

```
名字 姓氏
AB
                     乙
光盘

```

现在我需要排序顺序

```
AB
乙
光盘

```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:10:06.930

尝试这个：

```
SELECT full_name FROM (
    SELECT CONCAT(first_name, last_name) AS full_name FROM users
) AS tmp ORDER BY full_name 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:07:49.860

如果空白是`NULL`，请使用`COALESCE`

```
ORDER BY CONCAT(COALESCE(first_name,''), COALESCE(last_name,'')) 
```

*   [SQLFiddle 演示](http://www.sqlfiddle.com/#!2/bc745/1)
*   [合并（）](http://dev.mysql.com/doc/refman/5.0/en/comparison-operators.html#function_coalesce)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:09:58.883

这个怎么样：

```
order by (case when FirstName is NULL or FirstName = '' then LastName else FirstName end),
         LastName 
```

不太严重，您可以使用`concat_ws()`. . . 就像`concat()`但不同。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T14:15:26.170

在 MySQL 中，您可以按列别名排序：

```
SELECT CONCAT(first_name, last_name) AS full_name 
FROM users ORDER BY full_name 
```

SQLFiddle[在这里](http://sqlfiddle.com/#!2/90819/1)。

# objective-c - 在 Objective-C 中使用输出所需的小数点精确地舍入浮点值

> ID：16216937
> 
> 赞同：0
> 
> 时间：2013-04-25T14:06:37.277
> 
> 标签：objective-c, floating-point, numbers

如何准确地`float value`四舍五入。`1.449567`

输出值应为**小数点浮点值**。

**输出应该是这样的：**

```
for 1 decimal point  **f=1.5**
for 2 decimal point  **f=1.45**
for 3 decimal point  **f=1.450**
for 4 decimal point  **f=1.4496** 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:22:13.653

我建议考虑使用[NSNumberFormatter](https://developer.apple.com/library/mac/#documentation/Cocoa/Conceptual/DataFormatting/Articles/dfNumberFormatting10_4.html#//apple_ref/doc/uid/TP40002368)。

例子：

```
float roundedValue =1.45999f;
NSNumberFormatter *formatter = [[NSNumberFormatter alloc] init];
[formatter setMaximumFractionDigits:1];
[formatter setRoundingMode: NSNumberFormatterRoundDown];

NSString *numberString = [formatter stringFromNumber:[NSNumber numberWithFloat:roundedValue]]; 
```

# oracle - 动态pl/sql语法包proc

> ID：16216938
> 
> 赞同：0
> 
> 时间：2013-04-25T14:06:38.520
> 
> 标签：oracle, plsql

一个简单的动态 pl/sql 插入语句的语法问题。我的代码如下。

```
sql_stmt     VARCHAR2(500);

sql_stmt := 'PKG_COLLECTION.COLLECTION_INS_01(:1,:2,:3,:4,:5,:6)';
execute immediate sql_stmt using 
        IN OUT V_P1, 
        IN OUT V_P2, 
        IN OUT V_P3, 
        IN OUT V_P4, 
        IN OUT V_P5, 
        IN OUT V_P6; 
```

（错误：ORA-00900：无效的 SQL 语句）

实际的语法应该是什么样的？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T14:09:29.010

您只需要更改此部分以使其成为 PL/SQL 而不是 SQL：

```
sql_stmt := 'begin PKG_COLLECTION.COLLECTION_INS_01(:1,:2,:3,:4,:5,:6); end;'; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:52:23.327

由于执行的语句不是动态的，我强烈建议您不要使用*execute immediate*。相反，我会选择一个简单的

```
PKG_COLLECTION.COLLECTION_INS_01(V_P1,V_P2,V_P3,V_P4,V_P5,V_P6); 
```

`PKG_COLLECTION.COLLECTION_INS_01`它实现了同样的事情，但更干净，如果签名发生变化，则会导致无效的过程/包/函数。

# ruby-on-rails - 从多个数组项返回字符串

> ID：16216942
> 
> 赞同：2
> 
> 时间：2013-04-25T14:06:42.590
> 
> 标签：ruby-on-rails, ruby

我有多个数组，其中包含代码字符串项。我需要匹配给定字符串中的代码，然后从匹配的数组中返回一个类名。

如果我告诉你我有什么可能会更好。所以下面是数组，如果给定的字符串与数组中的一个项目匹配，那么下面是我需要返回的字符串。因此，假设我发送了一个“329”字符串，这应该将“ss4”作为字符串返回：

```
['392', '227', '179', '176']
= 'ss1'

['389', '386']
= 'ss2'

['371', '338', '335']
= 'ss3'

['368', '350', '332', '329', '323', '185', '182']
= 'ss4' 
```

我需要知道什么是最好的方法。我可以创建一个辅助方法并为每个代码块创建一个数组，然后检查每个数组以查看是否包含给定的字符串代码，然后返回该字符串，它可以是 ss1 或 ss4。这是一个好主意吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-04-25T14:36:42.067

最有效的方法是生成一个可以超快执行查找的翻译器哈希：

```
CODES = {
  ss1: ['392', '227', '179', '176'],
  ss2: ['389', '386'],
  ss3: ['371', '338', '335'],
  ss4: ['368', '350', '332', '329', '323', '185', '182']
}

translator = CODES.each_with_object({}){|(s, a), m| a.each{|n| m[n] = s.to_s}} 
```

现在您可以简单地执行以下操作：

```
translator['329']
=> "ss4"
translator['389']
=> "ss2" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T14:21:34.293

```
def code_to_string(code)
  if [395].include? code
    "ss1"
  elsif [392, 227, 179, 176].include? code
    "ss2"
  # and so on
end 
```

请注意，代码是整数。要与字符串代码匹配，请使用`%w(392 227 179).include?`而不是数组

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T14:13:45.987

我建议将所有数组加入到多维哈希中，然后进行搜索。

```
a1 = ['395']
a2 = ['392', '227', '179', '176']

h = { a1: a1, a2: a2 }
h.select {|a, v| a if v.include?('392') }.keys.first.to_s 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T14:19:14.890

这是您可以尝试的一种解决方案：

```
CODE_LOOKUP = {
  [395] => 'ss1',
  [392, 227, 179, 176] => 'ss2',
  [389, 386] => 'ss3'
  # etc
}

def lookup_code(code)
  CODE_LOOKUP.each do |codes_to_test, result|
    return result if codes_to_test.include?(code)
  end
end

lookup_code(395)
# => "ss1"

lookup_code(179)
# => "ss2" 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-25T14:24:13.083

```
h = {:ss1 => [395],:ss2 => [392, 227, 179, 176] }
h.key(h.values.find{|x| x.include? "392".to_i})
#=> :ss2 
```

# ios - 触摸时 TableViewCell 图像发生变化

> ID：16216952
> 
> 赞同：1
> 
> 时间：2013-04-25T14:07:18.233
> 
> 标签：ios, cocoa-touch, ios5, uitableview

我有自己的**继承**`TableViewCell`类。在我的单元格**笔尖**文件中，我在我的. （图片没有完全占据整个单元格区域，图片周围有空格） **`UITableViewCell`**`TableViewCell`****

 ****然后，我想实现一个**触摸反馈**功能，当用户触摸单元格中的图像时，该图像将被另一个图像替换。

我试图在`tableView:didSelectRowAtIndexPath:`方法中做到这一点：

```
- (void) tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    //my TableViewCell   
    UITableViewCell *cell = [tableView cellForRowAtIndexPath:indexPath];

    //New image to replace the current one
    UIImage* bg = [CCTheme imageNamed:@"green_btn_bg"];
    UIImageView* bgView = [[UIImageView alloc] initWithImage:bg];

    cell.selectedBackgroundView = bgView;
    ... 
```

但它根本不起作用。那么，我该如何实现这个触摸反馈功能呢？那是当用户手指触摸单元格中的图像时，图像会变为另一个图像。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:09:09.560

在您的自定义类中创建一个`UIImageView`属性，然后从该属性而不是背景属性设置该属性上的图像。`UITableViewCell``IBOutlet``cellForRowAtIndexPath:`

```
cell.yourCustomImageView.image = bgView; 
```

或者将 UIImageView 添加到当前通用的 UITableViewCell 中，如下所示。

与您的当前单元格

```
[cell addSubview:bgView]; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-25T14:13:16.997

*   在`didSelectRowAtIndexPath:`您必须首先更改您的数据模型（表明单元格的状态已更改）。
*   你设置适当的图像 `cellForRowAtIndexPath:`。（即您检查状态是什么并提供正确的图像。）
*   要更新单元格，请调用`reloadRowsAtIndexPaths:`。

**解释**

您不应将单元格的状态存储在单元格的某些视图中。例如，如果不同的图像代表某种选择，则为表格视图提供数据的数组或其他数据结构应跟踪处于此状态的行。

每次必须重新生成单元格时，`cellForRowAtIndexPath`都会调用。（这可能是因为单元格变得可见，或者因为您明确更新了它。）这是检查状态信息并相应地显示单元格的最佳位置。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-25T16:32:30.387

我建议将手势识别器连接到`UIImageView`自定义单元格的 init 方法中：

```
// Add recognizer for tappable image
UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc]
                                         initWithTarget:self action:@selector(imageViewTapped:)];
[tapRecognizer setNumberOfTouchesRequired:1];
[tapRecognizer setDelegate:self];

self.tappableImageView.userInteractionEnabled = YES;
[self.tappableImageView addGestureRecognizer:tapRecognizer]; 
```

然后处理程序：

```
- (void)imageViewTapped:(id)sender {

    NSLog(@"image tapped");
    self.tappableImageView.image = [UIImage imageNamed:@"some_different_image.png"];
} 
```

另外，不要忘记像这样装饰自定义单元格声明：

```
@interface CustomTableViewCell : UITableViewCell <UIGestureRecognizerDelegate> 
```

在该`cellForRowAtIndexPath:`方法中，您需要确保您的 init 方法中的代码被触发以便`tapRecognizer`添加。

祝你好运！

**[编辑]**

根据您使用自定义 XIB 创建单元格的方式，您可能不需要它，但在我的情况下，我需要显式调用一个方法来初始化表格单元格中 UI 的状态。我这样做的`initState`方法是在自定义表格视图单元格上提供一种方法：

```
- (void)initState {

    // Do other things for state of the UI in table cell.

    // Add recognizer for tappable image
    UITapGestureRecognizer *tapRecognizer = [[UITapGestureRecognizer alloc]
                                         initWithTarget:self action:@selector(imageViewTapped:)];
    [tapRecognizer setNumberOfTouchesRequired:1];
    [tapRecognizer setDelegate:self];

    self.tappableImageView.userInteractionEnabled = YES;
    [self.tappableImageView addGestureRecognizer:tapRecognizer];
} 
```

然后，`cellForRowAtIndexPath`我确保`initState`在创建表格单元格后调用它：

```
- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    CustomTableViewCell *cell = (CustomTableViewCell*)[tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {

        UIViewController *temporaryController = [[UIViewController alloc] initWithNibName:@"CustomTableViewCell" bundle:nil];
        // Grab a pointer to the custom cell.
        cell = (CustomTableViewCell *)temporaryController.view;

        [cell initState];
    }

    return cell;

} 
```****

# jsf - JSF h:commandLink JavaScript 错误

> ID：16216954
> 
> 赞同：0
> 
> 时间：2013-04-25T14:07:19.297
> 
> 标签：jsf, jsf-2

我正在使用 JSF 2.0 标记`<h:commandLink>`，并且正在尝试使用`target`as打开一个窗口`_blank`。在目标中，我试图填充从服务器获取的文档。但是在这样做的同时，我在 jsf.js（函数名是`jsfcljs`）中遇到了一个错误`f.submit()`。

声明如下：

```
<h:commandLink id="viewDocument" value="#{template.orderBean.documentBean.documentName}"
               action="#{template.viewCustomDocument}" target="_blank" styleClass="textbold">
    <f:param name="documentId" value="#{template.orderBean.documentBean.documentId}"/>
</h:commandLink> 
```

我得到的错误是

> 对象不支持此属性。

如果我`<h:commandButton>`改用，那么我可以调用服务器并获取文档。

问题原因可能是什么？

# android - 从零可见性开始动画到完整？

> ID：16216957
> 
> 赞同：0
> 
> 时间：2013-04-25T14:07:23.203
> 
> 标签：android, android-animation

我正在使用 startanimation 方法在图像上产生淡入淡出效果。我希望在延迟几秒钟后淡入淡出效果起作用，在此之前我不希望图像可见。我不能使用 setalpha 方法，因为动画采用图像的当前状态。那么我应该在这里做什么？

```
imageView= (ImageView)findViewById(R.id.imgfade);

fadeInAnimation = AnimationUtils.loadAnimation(this, R.anim.fadein);

new Handler().postDelayed(new Runnable() {
     @Override
     public void run() {
        imageView.startAnimation(fadeInAnimation );
     }
}, 8000); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:08:00.880

放在`imageView.setVisibility(View.VISIBLE);`后面`imageView.startAnimation(fadeInAnimation );`

# android - 如何获取对最后一个 backstack 弹出片段的引用？

> ID：16216958
> 
> 赞同：4
> 
> 时间：2013-04-25T14:07:23.467
> 
> 标签：android, android-fragments

我添加、显示和隐藏片段。每次添加/显示片段时，我都会隐藏前一个片段并将事务添加到后台堆栈。

当用户按下后退按钮时，会弹出一个片段，**我想引用它**。

为什么我需要参考？所以当用户继续下一个片段时，我可以隐藏它。

**那么，如何获得对弹出片段的引用？**

EDIT-25-04-2013：

这是解释如何添加新片段的代码，同时隐藏前一个片段。**问题是如何在从后台堆栈弹出最后一个片段后获取对它的引用（使用后退按钮）？**

```
FragmentTransaction fragmentTransaction = getFragmentManager().beginTransaction();
fragmentTransaction.hide(lastFragment);
fragmentTransaction.add(newFragment);
fragmentTransaction.addToBackStack(null);
fragmentTransaction.commit();
lastFragment = newFragment; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2013-05-02T11:34:02.937

我为每个片段使用生成的标签，将标签保存在堆栈中并保留堆栈。这样我就可以掌握每一个片段——特别是最后一个片段。[请参阅此处](https://stackoverflow.com/a/16220860/435605)的代码。

# arrays - 无法在 Matlab 中使用 uigetfile 打开文件

> ID：16216968
> 
> 赞同：0
> 
> 时间：2013-04-25T14:07:46.390
> 
> 标签：arrays, matlab, cell

我正在构建一个代码，让用户打开一些文件。

```
reference = warndlg('Choose the files for analysis.');
uiwait(reference);
filenames2 = uigetfile('./*.txt','MultiSelect', 'on');
if ~iscell(filenames2)
    filenames2 = {filenames2};    % force it to be a cell array of strings
end
numberOfFiles = numel(filenames2);

data = importdata(filenames2{i},delimiterIn,headerlinesIn); 
```

当我运行代码时，出现提示，我按 OK，然后什么也没有发生。代码只是停止，告诉我：

```
Error using importdata (line 137)
Unable to open file.

Error in FreqVSChampB_no_spec (line 119)
data=importdata(filenames2{1},delimiterIn,headerlinesIn); 
```

我只是没有机会选择文件。单元阵列保持为空，如下图所示。

![空元胞数组](https://i.stack.imgur.com/Ec1Ku.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-04-25T14:37:32.007

MATLAB 找不到您选择的文件。您的变量`filenames2`仅包含文件的名称，而不是其完整路径。如果您不提供 的完整路径`importdata`，它将搜索您在 MATLAB 路径上提供的任何文件名，如果找不到，它将如您所见那样出错。

尝试这样的事情 - 为了便于描述，我只是用单选来做，但你可以用多选做类似的事情。

```
[fileName, pathName] = uigetfile('*.txt');
fullNameWithPath = fullfile(pathName, fileName);
importdata(fullNameWithPath) 
```

`fullfile`很有用，因为它在`pathName`和`fileName`(`\`在 Windows 上，`/`在 Unix 上) 之间插入了正确的字符。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-01-07T16:42:10.547

您可以尝试添加

```
pause(0.1); 
```

刚过`uiwait(reference);`

对我来说它有效。事实上，当我们使用 uiwait 和 uigetfile 时，我注意到活动窗口发生了变化。

# tomcat - 在本地模拟平衡器的最佳方法是什么？

> ID：16216974
> 
> 赞同：2
> 
> 时间：2013-04-25T14:07:58.747
> 
> 标签：tomcat, networking, web-applications, load-balancing

环境：

*   所以：窗户
*   应用服务器：2 x Tomcat 7.0.32（均在本地运行）

我的应用程序部署在两个 Tomcat 上，每个 Tomcat 都配置了一个唯一的端口（8081 和 8082）。

我需要一种方法来自动配置新端口（8080）并在两个 tomcat 之间进行负载平衡。

目前我正在使用提供*Eclipse的**TCP/IP Monitor*功能，但这仅允许我手动路由。

 *我需要此配置来重现仅在 Prod Cluster 中发生的错误。我正在考虑使用另一个 Tomcat 作为平衡器，但我不确定这是否是最佳选择。有人有更好的主意吗？

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-25T21:10:17.150

带有上游的 Nginx 应该是您的最佳选择。看[这里](http://wiki.nginx.org/HttpUpstreamModule)。它的配置很简单，您可以使用循环或 ip_hash（对粘性会话有用），无论哪种情况最适合您。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-04-25T16:43:28.260

如果您尝试在 prod 中重现错误，则应尝试在 dev 中重现相同的环境。假设您使用的是 tomcat 6 或更高版本，想到的三个选项是
1\. 负载均衡器
2\. 带有 mod_proxy 的
Apache 前端 3\. 带有 mod_jk 的 Apache 前端*

# android - Admob 插页式时间显示

> ID：16216979
> 
> 赞同：1
> 
> 时间：2013-04-25T14:08:20.747
> 
> 标签：android, admob, interstitial

我在使用 AdMob 插页式广告的游戏中遇到了一个大问题。广告在计时器结束或玩家退出回合时显示。所以在活动结束时。没有连接的时候就好了。活动的变化很快。当有神和快速连接一样。问题是当有一个有价值的连接并且当玩家完成回合时，有很长一段时间（有时广告从未显示）活动不会改变，所以玩家可以继续玩，即使时间很艰难超过。这是我的代码：

```
public void onDismissScreen(Ad arg0) {
    // TODO Auto-generated method stub

}

public void onFailedToReceiveAd(Ad arg0, ErrorCode arg1) {

    Intent data = new Intent();
    data.putExtra("team", team);
    myDB.close();
    data.putExtra("A", A);
    data.putExtra("B", B);
    // data.putExtra("contaDb", this.contDb);
    setResult(1, data);
    finish();

}

public void onLeaveApplication1(Ad arg0) {
    // TODO Auto-generated method stub

}

public void onPresentScreen1(Ad arg0) {
    // TODO Auto-generated method stub

}

public void onReceiveAd(Ad ad) {
    Log.d("OK", "Received ad");
    if (ad == interstitial) {
        if(ad.isReady())
           interstitial.show();
    }

    Intent data = new Intent();
    data.putExtra("team", team);
    myDB.close();

    data.putExtra("A", A);
    data.putExtra("B", B);
    // data.putExtra("contaDb", this.contDb);
    setResult(1, data);
    finish();
}

public void onDismissScreen1(Ad arg0) {
    // TODO Auto-generated method stub

}

public void onLeaveApplication(Ad arg0) {
    // TODO Auto-generated method stub

}

public void onPresentScreen(Ad arg0) {
    // TODO Auto-generated method stub

} 
```

和：

```
public boolean isOnline() {
    ConnectivityManager cm = (ConnectivityManager) this
            .getSystemService(Context.CONNECTIVITY_SERVICE);
    NetworkInfo ni = cm.getActiveNetworkInfo();
    if (ni == null)
        return false;

    return ni.isConnected();
}

public void visualizzaRisultatoActivity() {
    if (isOnline()) {
        interstitial = new InterstitialAd(this, "0976ebb3525a494a");
        // Create ad request
        AdRequest adRequest = new AdRequest();
        // Begin loading your interstitial
        interstitial.loadAd(adRequest);
        // Set Ad Listener to use the callbacks below
        interstitial.setAdListener(this);
    } else {
        Intent data = new Intent();
        data.putExtra("team", team);
        myDB.close();
        data.putExtra("A", A);
        data.putExtra("B", B);
        // data.putExtra("contaDb", this.contDb);
        setResult(1, data);
        finish();
    }

} 
```

VisualizzaRisultatoActivity 在时间结束或玩家取消回合时被调用。提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-04-27T02:05:21.007

最佳做法是在游戏期间预加载您的插页式广告，然后在游戏结束时轮询它是否准备就绪：

```
if(interstitial.isReady()) {
  interstitial.show();
} 
```

`isReady`当您的插页式广告调用时会设置该标志`onReceiveAd`，但您可以等到游戏结束时再显示它。请注意，您可能应该在游戏活动中请求/显示您的插页式广告，而不是您的 VisualizzaRisultatoActivity。插页式广告应与您传递给其构造函数的相同活动一起显示。

# javascript - 使用 jQuery 响应 HTML 元素以更改 DIV 的背景和文本

> ID：16216985
> 
> 赞同：0
> 
> 时间：2013-04-25T14:08:33.340
> 
> 标签：javascript, jquery, html

我有一个元素，它在我运行时返回一个值`true`或。`false``$('#myId').val()`

一旦返回 true 或 false，我希望将`div`其背景颜色更改为绿色表示 true 或红色表示 false。

```
if ($('#myId').val())
{
   code should return a div with text and green background
}
else
{
   code should return a div with text and red background
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-25T14:48:24.123

您必须将字符串转换为布尔值才能正确评估。我在小提琴中有一个按钮来返回值。

[JSFiddle](http://jsfiddle.net/bfelda/rFFGc/)

HTML：

```
<div id="myDiv">
    <input id="myID" value="false"/>
    <input id="myBtn" type="button" value="submit"/>
</div> 
```

查询：

```
$('#myBtn').on('click', function () {
    $('#myDiv').css('background', (($('#myID').val() == "true") ? 'green' : 'red'));
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-25T14:18:30.407

我会说做一个默认的绿色背景类，然后我们一个覆盖类来添加红色背景。您的代码将如下所示：

```
if ($('myId').val())
{
    $('myId').addClass('falseClass');
} else {
    $('myId').removeClass('falseClass');
}; 
```

使用 CSS 添加背景颜色，如下所示：

```
.divClass{
background: green;
}

.divClass.falseClass{
background: red;
} 
```

如果你想添加一个带有一些特定文本的 div（比如任何 'myId' 标记），然后更改颜色，你可以先添加 div。

```
$('<div class="divClass">').appendTo('myId').text('foo')

if ($('myId').val())
{
    $('myId').addClass('falseClass');
} else {
    $('myId').removeClass('falseClass');
}; 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-04-25T14:17:46.693

```
<script type="text/javascript">
if ($('#myId').val()){
    showDiv("green");
}else{
    showDiv("red");
}

function showDiv(color){
    var text = "Hello world";
    return "<div class=\""+color+"\">"+text+"</div>";
}
</script>

<style>
.green{
    background-color:green;
}

.red{
    background-color:red;
}
</style> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2013-04-25T15:24:03.130

这对我最有效：

```
 if ($('#myID').val()) {
       $('#SOMECLASS').text('Some Text').css('background-color', 'green');
  else
       $('#SOMECLASS').text('Some Text').css('background-color', 'red');
  } 
```

# hadoop - 如何过滤hadoop mapreduce中文件的记录值？

> ID：16216986
> 
> 赞同：1
> 
> 时间：2013-04-25T14:08:34.643
> 
> 标签：hadoop, mapreduce

我正在使用 MapReduce 中的一个程序。我有两个文件，我想从 file1 中删除 file2 中存在的一些信息。每行都有一个 ID 作为它的键和一些数字（用逗号分隔）作为它的值。

```
file1:
1    1,2,10
2    2,7,8,5
3    3,9,12 
```

和

```
file2:
1    1
2    2,5
3    3,9 
```

我想要这样的输出：

```
output:    
1    2,10
2    7,8
3    12 
```

我想删除在 file2 中具有相同键的 file1 的值。一种方法是将这两个文件作为输入文件，并在映射步骤中生成：`(ID, line)`. 然后在减少步骤中过滤值。但是，我的文件非常非常大，因此我不能这样做。

或者，如果 file1 是输入文件并且在地图中我打开 file2 并查找该行然后比较值，它会有效吗？但是由于我有一百万个键，并且对于每个键我都必须打开 file1，我认为它会有过多的 I/O。

我能做些什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-25T15:20:03.807

您可以同时输入映射器的 file1 和 file2 。在映射器中，您将源（file1 或 file2）添加到记录中。然后使用辅助排序来确保 file2 中的记录始终排在第一位。因此，reducer 的组合输入如下所示：

```
1    file2,1
1    file1,1,2,10
2    file2,2,5
2    file1,2,7,8,5
3    file2,3,9
3    file1,3,9,12 
```

您可以从这里获取减速器的设计。

# php - FOSUserBundle - 覆盖表单：无法加载类型“user_registration”

> ID：16216995
> 
> 赞同：0
> 
> 时间：2013-04-25T14:08:53.177
> 
> 标签：php, symfony

我在以下位置创建了自己的表单类型`Me\MyBundle\Form\Type\UserFormRegistrationType`：

```
namespace Me\MyBundle\Form\Type;

use FOS\UserBundle\Form\Type\RegistrationFormType as BaseType;
use Symfony\Component\Form\FormBuilderInterface;
use Symfony\Component\OptionsResolver\OptionsResolverInterface;

class UserFormRegistrationType extends BaseType
{
    public function buildForm(FormBuilderInterface $builder, array $options)
    {
        parent::buildForm($builder, $options);

        // all my unique fields
    }

    public function getName()
    {
        return 'user_registration';
    }

    public function setDefaultOptions(OptionsResolverInterface $resolver)
    {
        $resolver->setDefaults(array('data_class' => 'Me\MyBundle\Entity\User'));
    }
} 
```

我的 services.yml 中有以下内容：

```
services:
    me_my.registration.form.type:
        class: Me\MyBundle\Form\Type\UserFormRegistrationType
        arguments: [%fos_user.model.user.class%]
        tags:
            - { name: form.type, alias: user_registration } 
```

并将以下内容添加到我的 config.yml 中：

```
# other config stuff

fos_user:
    # database stuff, general config

    registration:
        form:
            type: user_registration 
```

然而，当我尝试访问我的注册表单/页面时，我得到：

> 无法加载类型“user_registration”

任何暗示我显然错过了什么？这不是防火墙问题。我有一个，但调整我的 security.yml 修复了它。这是一个纯粹的未找到错误。很烦人，因为我相信我是按照文档来的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-11-05T10:39:01.497

你不应该再使用别名了

在您的配置文件中：

前 ： `registration: form: type: user_registration`

新的 ： `registration: form: type: 'CoreBundle\Form\Type\RegistrationFormType'`

在你的 src/CoreBundle/Form/Type/RegistrationFormType.php: getParent() 函数应该是：

```
public function getParent()
{
    return "FOS\UserBundle\Form\Type\RegistrationFormType";
} 
```

不要忘记文件顶部的使用： `use FOS\UserBundle\Form\Type\RegistrationFormType;`

嗨，这里是解释： [https ://stackoverflow.com/a/53048060/7888453](https://stackoverflow.com/a/53048060/7888453)

官方： [https ://github.com/symfony/symfony/blob/3.4/UPGRADE-3.0.md#form](https://github.com/symfony/symfony/blob/3.4/UPGRADE-3.0.md#form)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-29T21:40:04.727

看看这个家伙的问题，然后看看他为自己的问题提供的解决方案。我关闭了他的代码并对其进行了修改以匹配我文件中的名称，并且成功了！

[如何覆盖注册表单 FosUserBundle？](https://stackoverflow.com/questions/31305417/how-to-override-register-form-fosuserbundle)

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2013-04-25T16:23:08.243

文档拒绝提及/提醒该服务需要在 config.yml 中注册。

# facebook-opengraph - og:site_name 被 Facebook 评论插件忽略了吗？

> ID：16216997
> 
> 赞同：2
> 
> 时间：2013-04-25T14:08:57.380
> 
> 标签：facebook-opengraph

我正在使用 Facebook 的评论插件，并且我指向了一个设置了开放图形标签的页面。

当用户使用插件在我的页面上发表评论时，facebook 在墙上的帖子中使用所有 og 标签，除了 og:site_name，它应该出现在链接的标题中，但我的网站的域正在出现.

示例 HTML：

```
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:og="http://ogp.me/ns#"
xmlns:fb="http://www.facebook.com/2008/fbml">
<head>
<title>My Title</title>
<meta property="og:type" content="article" />
<meta property="og:site_name" content="My Site Name" />
<meta property="og:title" content="My Title" />
<meta property="og:url" content="http://www.example.com" />
<meta property="og:image" content="http://www.example.com/some_image.png" />
<meta property="og:description" content="This is a description" />
<meta property="fb:app_id" content="FB_APP_ID" />
</head>
<body>
.....
</body>
</html> 
```

但这是我最终在 Facebook 上看到的：

[例子](http://www.enr-corp.com/PhotoDir/example.png)

请注意标题是“www.example.com”而不是我希望在那里看到的“我的站点名称”。

有人知道为什么OG会忽略我的标签吗？

提前致谢，

德国之声

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-04T18:52:05.310

不是修复，而是可能的原因。

Facebook Bug DB 中有一个未解决的问题：Facebook 上 [的共享链接中出现的站点名称不正确](https://developers.facebook.com/bugs/300209246794269/)

不幸的是，这似乎是一个低优先级的问题。

# r - 在R中随机子集栅格的简单方法

> ID：16216998
> 
> 赞同：4
> 
> 时间：2013-04-25T14:09:03.707
> 
> 标签：r, random, subset, raster

我在 R 工作。我有一个栅格 (raster_entrop)。我想自动生成这个栅格的随机子集。问题是它的范围不是矩形，我希望子集完全包含在范围内。我的解决方案是检查在原始栅格范围内随机选择的“子范围”坐标中是否没有“NaN”（对应于 raster_entrop 范围之外的像素）。

```
ext<-extent(raster_entrop)
repeat{
  rnd.x<-runif(1,ext@xmin, ext@xmax)
  rnd.y<-runif(1,ext@ymin, ext@ymax)

  #Test if the sub extent is completely within the "big extent" 
  test<-is.na(extract(raster_entrop, cbind(rnd.x,rnd.y)))+
  is.na(extract(raster_entrop, cbind(rnd.x,rnd.y+0.02)))+
  is.na(extract(raster_entrop, cbind(rnd.x+(0.02),rnd.y)))+
  is.na(extract(raster_entrop, cbind(rnd.x+(0.02),rnd.y+0.02)))

  if (test==0){
    break
  }
}
ext_sub<-extent(c(rnd.x, rnd.x+0.02,rnd.y,rnd.y+0.02))
raster_entrop_sub <- crop(raster_entrop, ext_sub) 
```

我的问题：有没有更简单的不使用循环的解决方案？