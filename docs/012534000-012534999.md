# StackOverflow 问答 12534000-12534999

# javascript - jqgrid 列选择器宽度

> ID：12534000
> 
> 赞同：1
> 
> 时间：2012-09-21T15:57:16.143
> 
> 标签：javascript, jqgrid, width

我有一个不错的 jqgrid 和 columnchooser。但是当我使用 columnchooser 删除所有列时，我的 JQGrid 表消失了。(width:0) 那么有没有可能有最小宽度和最大宽度？
提前致谢。

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.1/jquery.min.js"></script>
<link href="../../Scripts/plugins/ui.multiselect.css" rel="stylesheet" type="text/css" />
<script src="../../Scripts/jquery-ui-1.8.23.min.js" type="text/javascript"></script>
<script src="../../Scripts/plugins/ui.multiselect.js" type="text/javascript"></script>
<script src="../../Scripts/js/jquery.jqGrid.min.js" type="text/javascript"></script>
<script src="../../Scripts/src/i18n/grid.locale-nl.js" type="text/javascript"></script>
<link href="../../Scripts/css/ui.jqgrid.css" rel="stylesheet" type="text/css" />
<link href="../../Content/Site.css" rel="stylesheet" type="text/css" />
<link href="../../Content/themes/base/jquery-ui.css" rel="stylesheet" type="text/css" />

<table id="list"></table>
<div id="pager"></div>

<script type="text/javascript">
jQuery(document).ready(function () {
    jQuery("#list").jqGrid({
        url: '/Home/GridData/',
        datatype: 'json',
        mtype: 'GET',
        autowidth: true,
        colNames: ['Budgetsleutel', 'Beleidsdomein', 'beleidsitem'],
        colModel: [
      { name: 'budetsleutel', index: 'budetsleutel', width: 40, align: 'left', sortable: true, resizable: true, search: true },
      { name: 'beleiddsdomein', index: 'beleidsdomein', width: 40, align: 'left', sortable: true, resizable: true, search: true },
      { name: 'beleidsitem', index: 'beleidsitem', width: 200, align: 'left', sortable: true, resizable: true, search: true}],
        pager: '#pager',
        pgbuttons: true,
        rowNum: 10,
        rowList: [],
        sortname: 'Id',
        sortorder: "desc",
        gridview: true,
        viewrecords: true,
        height: 100,
        caption: "Toolbar Searching"
    });
    jQuery("#list").jqGrid('navGrid', '#pager');
    jQuery("#list").jqGrid('navButtonAdd', '#pager', {
        caption: "Columns",
        buttonicon: "ui-icon-calculator",
        title: "choose columns",
        jqModel:true,
        onClickButton: function () {
            jQuery("#list").jqGrid('columnChooser');
        }
    });
}); 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-23T10:37:56.913

我在 jqgrid 的 wiki 页面中找到了我的问题的解决方案。
见下面的代码：

```
 onClickButton: function () {
            jQuery("#list").jqGrid('columnChooser', {
                done: function (perm) {
                    if (perm) {
                        this.jqGrid("remapColumns", perm, true);
                        this.jqGrid("setGridWidth", $("#gridwrapper").width());
                    } 
                }
            });
        } 
```

# php - PHP MySql 查询性能与变量声明

> ID：12534006
> 
> 赞同：-1
> 
> 时间：2012-09-21T15:57:41.137
> 
> 标签：php, mysql

好吧 - 这可能是一个愚蠢的问题，但我对完美的渴望正在推动我，所以，如果它是愚蠢和毫无意义的，请告诉我。

我有一个 mysql 查询，我从数据库表中获取行，并且我需要为我收集的所有列提供某种形状或形式的值。查看以下示例代码（这可以使用数组来收集输出 - 基本问题应该是相同的）：

```
$query="SELECT A,B,C,D FROM table1 WHERE 'X'='Y'";
$result=mysql_query($query,$resource);
while($row=mysql_fetch_assoc($result)){
   $var1=$row['A'];   $var2=$row['B'];

   echo '<li class="' . $row['C'] . '" id="' . $row['D'] . '">';
} 
```

我的问题如下：

我只需要 $row['A'] 和 $row['B'] 一次，因为在这种情况下它们对于每一行都是相同的值，但我确实需要它们一次。每行的其他值都不同，我也需要它们，如示例中所示。

在整个循环中连续设置变量是否有问题？还是使用`if(!isset`...更好？还是有其他方法可以做到这一点？还是性能影响如此之小以至于使这个问题变得无关紧要？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:26:41.560

为什么不将变量设置在循环之外。

```
$result=mysql_query($query,$resource);
$result_new = mysql_fetch_assoc($result);
$var1 = $result_new['A']; //considering $result_new['A'] always exists 
$var2=$result_new['B']; //considering $result_new['B'] always exists
while($row=$result_new){ 
echo '<li class="' . $row['C'] . '" id="' . $row['D'] . '">';
} 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:34:38.703

真的不要为此烦恼。除非您循环数百万条记录。

如果您需要更快的速度，请不要在 while 循环中回显：

```
 $result=mysql_query($query,$resource);
    $string ='';
if ($result) {
$row=mysql_fetch_assoc($result);
$string .= '<li class="' . $row['C'] . '" id="' . $row['D'] . '">';
$var1=$row['A'];
$var2=$row['B'];

    while($row=mysql_fetch_assoc($result)){

    $var1=$row['A']; $var2=$row['B'];
    $string .= '<li class="' . $row['C'] . '" id="' . $row['D'] . '">';
    }
   }
    echo $string; 
```

还有两件事。不要使用 mysql_*：不鼓励使用这个扩展！

并且（就像我认为其他人所说的那样）如果 a/b 总是相同的，你应该重新考虑你的数据库结构。

编辑：给你的问题一个真正的答案：我做了一个小测试。设置每个循环的值（1,000 次）需要 0.00027 秒。检查循环内部是否已设置值需要 0.00030 秒。所以每次设置它甚至比检查更快。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T16:52:14.503

1.  在这种情况下对性能的影响是无关紧要的，事实上我会推测`if(isset..)`守卫是否会花费更长的时间——我能想到的唯一一种情况，这个问题很重要的情况是你将（更大的）对象或数组分配给`$var1`和以某种方式强制 php 进行复制，而不是参考

2.  如果它因美学原因而困扰您（我可以联系；）），您可以使用 do - while 循环：

    ```
    //assuming you always get at least one result
    $result=mysql_query($query,$resource);
    $row=mysql_fetch_assoc($result);
    $var1=$row['A'];   $var2=$row['B'];

    do {
      // the loop stuff - stringify or echo the list
    } while ($row=mysql_fetch_assoc($result)) ; 
    ```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T16:54:11.173

你可以用 do-while 表达式来做到这一点

```
$query="SELECT A,B,C,D FROM table1 WHERE 'X'='Y'";
$result=mysql_query($query,$resource);
if($row=mysql_fetch_assoc($result)) {
    $var1=$row['A'];   $var2=$row['B'];
    do {
        echo '<li class="' . $row['C'] . '" id="' . $row['D'] . '">';
    } while($row=mysql_fetch_assoc($result));
} 
```

# java - 播放框架序列化 scribe OAuthService 问题

> ID：12534010
> 
> 赞同：0
> 
> 时间：2012-09-21T15:57:55.477
> 
> 标签：java, serialization, playframework, scribe

我有个问题。我正在构建一个可以使用 oauth-service 的服务来获取一些用户信息。我想在用户身上保留 OAuthService，因为我需要获取数据，直到 accessToken 过期（这与每个提供者不同）..

我使用[play2-morphia-plugin](https://github.com/leodagdag/play2-morphia-plugin)进行数据持久化，使用[Scribe](https://github.com/fernandezpablo85/scribe-java)进行 OAuth ..

这是我的用户类：

```
package models;

import leodagdag.play2morphia.Model;
import com.google.code.morphia.annotations.Entity;
import com.google.code.morphia.annotations.Id;
import org.bson.types.ObjectId;
import org.scribe.oauth.OAuthService;

@Entity
public class User extends Model{
    @Id
    private ObjectId id;
    private List<OAuthService> services;

    //Getters and setters...
} 
```

我可以保存对象。没问题，但是当我尝试加载它时，我收到一个错误，因为它没有默认的空构造函数。

如果你愿意，我可以把代码放在 github 上？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T17:40:59.413

我终于想通了：）

我刚刚做了一个类，用于存储数据。org.scribe.oauth.OAuthService 类不包含任何数据，因此没有理由进行序列化。

```
public class ServiceConnection {

    private Date accessFrom;
    private Class<? extends Api> apiClass;
    private SignatureType signatureType;
    private String apiKey;
    private String secretKey;
    private String callback;
    @Serialized
    private Token requestToken;
    @Serialized
    private Token accessToken;

    // Getter and setters..

} 
```

# java - 在 Eclipse IDE 环境外执行 Eclipse 插件（jdt/ast）

> ID：12534012
> 
> 赞同：3
> 
> 时间：2012-09-21T15:58:01.840
> 
> 标签：java, eclipse, eclipse-jdt

我可以将[Eclipse Java 开发工具](http://www.eclipse.org/jdt/)作为独立进程执行吗？我需要使用 Eclipse JDT 从另一个程序中获取 Java 程序的[AST](http://www.vogella.com/articles/EclipseJDT/article.html)结构，为此，我需要在后台将 eclipse 插件作为独立进程执行。

那可能吗？如果是这样，怎么能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-24T21:02:06.363

Eclipse/jdt 和 eclipse/ast 只不过是一个 jar 文件，因此可以使用它们来构建独立的 java 应用程序。

## 例子

我用谷歌搜索找到[ASTExplorer](http://www.ibm.com/developerworks/opensource/library/os-ast/)作为一个例子，将 eclipse/ast 插件作为一个独立的 java 项目。

该程序针对的是相当旧的 Eclipse（3.0.2），我在这个站点下载了 Mac OS X的[3.0.2 -](http://archive.eclipse.org/eclipse/downloads/drops/R-3.0.2-200503110845/) [http://archive.eclipse.org/eclipse/downloads/drops/R-3.0.2-200503110845 /](http://archive.eclipse.org/eclipse/downloads/drops/R-3.0.2-200503110845/)

1.  您需要在 Preference -> Java -> Classpath variables 中设置 ECLIPSE_HOME 类路径变量![在此处输入图像描述](../Images/7e2a1d53634216ddd3847a5a7a3576aa.png)
2.  .classpath 已经有这些类路径变量，你可以参考这篇文章 - [eclipse 中的 .classpath 内容更新](https://stackoverflow.com/questions/12570286/classpath-contents-update-in-eclipse)。如您所见，它指的是 eclipse/jdt(art) jar 文件。我很确定可以在不下载 3.0.2 版本的情况下更改对 jdt/ast 最新版本的引用。
3.  当我使用 Mac 时，我需要将 swt for PC 替换为 swt for Mac。我可以在 BuildPath/Configure Build path 中做到这一点![在此处输入图像描述](../Images/09977f0ca3bd75691f380d5678184aae.png) ![在此处输入图像描述](../Images/03e7fd87a0ebd51626ac1d1fcee1c4ee.png)
    1.  首先删除 PC swt 参考。
    2.  然后添加正确的 Mac swt 参考。

## 用eclipse indigo/on mac编译示例

设置正确后，eclipse 开始构建项目。您可以使用 Project -> Build Project 菜单。然后，您可以检查应用程序在 Eclipse 中是否正常工作。 ![在此处输入图像描述](../Images/a595f005086e0b7dfd7fce1223e17571.png)

## 生成可执行jar

1.  导出到可执行的 jar 文件。 ![在此处输入图像描述](../Images/d147d51c8af67165fdda310795feb0c1.png) ![在此处输入图像描述](../Images/21a502e806f0b86e4f407a6acaffea9d.png) ![在此处输入图像描述](../Images/ffbe0606ae6ae1fa4cbf944720512fed.png)
2.  你会得到一些警告，但你会有一个 jar 文件。

## 执行生成的jar

仅执行`java -jar ast.jar`在 Mac 上不起作用，我从这篇文章中得到了提示。 [在 Mac 上正确运行基于 SWT 的跨平台 jar](https://stackoverflow.com/questions/3976342/running-swt-based-cross-platform-jar-properly-on-a-mac)

简而言之，您需要运行`java -XstartOnFirstThread -jar ast.jar`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T05:06:27.803

它*必须*是 Eclipses 的 AST 吗？或者任何 AST 代都可以吗？如果它不必是 eclipse，我建议 Habelitz 开源 Java AST Compiler。 [http://www.habelitz.com/](http://www.habelitz.com/) 我自己在一些项目中使用它......

好吧，当然你可以像任何其他进程一样启动 eclipse：[How to create a process in Java](https://stackoverflow.com/questions/2006035/how-to-create-a-process-in-java)

然后问题变成了将信息传递回原始过程，这变得有点混乱。在这种情况下，我建议的方法可能是在 eclipse 中创建一个插件，并让该插件执行您认为需要 AST 的任何操作。您可以使用 eclipse 的命令行选项或共享文件或其他东西来处理消息。

# javascript - javascript 的问题

> ID：12534014
> 
> 赞同：1
> 
> 时间：2012-09-21T15:58:07.443
> 
> 标签：javascript

我正在尝试使用本地存储，并且我有以下代码段，我想知道为什么它不会做任何事情。

```
 var tuotteita = localStorage.getItem("simpleCart_items");
    if(tuotteita != NULL){
    alert(tuotteita);
    } 
```

对我来说看起来不错？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:00:10.243

使用 null 而不是 NULL（小写）

# c# - 如何转换 IEnumerable 进入我的列表 ?

> ID：12534017
> 
> 赞同：1
> 
> 时间：2012-09-21T15:58:21.590
> 
> 标签：c#

我有一个自定义列表，它`MyList`是.`List``.ToList()``.ToMyList()`

如何实现 ToList() 方法？ToList() 的源代码是创建一个新的 List() 并将 IEnumerable 作为参数传入，但我不确定它的作用。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T16:00:42.620

如果您的类是子类`List<T>`，并且您[提供了正确的构造函数](http://msdn.microsoft.com/en-us/library/fkbw11z0.aspx)，您应该能够：

```
MyList<MyType> list = new MyList<MyType>(theEnumerable); 
```

如果您想要一个简单的扩展方法，类似于`Enumerable.ToList`，您可以编写自己的：

```
public static MyList<T> ToMyList<T>(this IEnumerable<T> theEnumerable)
{
    return new MyList<T>(theEnumerable);
} 
```

然后您可以通过以下方式调用它：

```
var list = theEnumerable.ToMyList(); 
```

请注意，`List<T>`一般来说，子类化确实不是一个好主意。如果您需要自定义集合，您应该真正考虑子类化[`Collection<T>`](http://msdn.microsoft.com/en-us/library/ms132397%28v=vs.95%29.aspx)和实现。`IList<T>`如果需要，您仍然可以提供相同的构造函数并使用上述方法填充自定义集合。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:08:35.720

如果您有一个基类并且您能够将列表填充委托给它的构造函数，请执行以下操作：

```
public MyList(IEnumerable<MyType> items) : base(items) { } 
```

否则，这个构造函数应该适用于几乎所有的集合类：

```
public MyList(IEnumerable<MyType> items)
{
    if (items == null)
        throw new ArgumentNullException("items");

    foreach (var item in items)
        Add(item);
} 
```

然后你可以编写一个扩展方法，或者直接调用这个构造函数来从一个序列中填充一个新的列表。

# java - Windows上的无缓冲子进程标准输出

> ID：12534018
> 
> 赞同：10
> 
> 时间：2012-09-21T15:58:22.527
> 
> 标签：java, c, windows

有没有一种简单的方法可以从无缓冲的子进程中读取输出？我正在尝试从 Java 调用 C 程序，但显然它在连接到管道时是 stdout 块缓冲的，并且仅在连接到控制台时是行缓冲的。我无法修改 C 程序。

也许有一种方法可以让程序误以为它已连接到控制台？也适用于 linux 的解决方案的奖励积分。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-04T23:39:40.783

这不是一个很好的解决方案，但运行时库可能不会缓冲串行端口，因此如果您足够绝望，您可以使用空调制解调器仿真器，例如[com0com](https://sourceforge.net/projects/com0com/?source=directory)或其衍生产品。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T16:04:22.127

您是否尝试过使用环境变量 BUF_1_=0？

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-10-13T07:26:14.800

您可以将 c 输出重定向到一个文件，然后使用 java 从另一个线程中拖尾文件

```
org.apache.commons.io.input.Tailer 
```

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T20:29:26.057

好的 -

1) “行缓冲输入”是控制台模式程序的常用习语，可追溯到最初的 Unix 和串行模式 VTxx 终端。

2）您可以读取“原始的、无缓冲的”I/O（一次击键，而不是一次一行），但细节是特定于操作系统的。无论您*需要*在特定操作系统上做什么，几乎*都可以*通过 Java 完成。

3）听起来您希望能够在 Windows 键盘上截获“向上箭头”键或“向下翻页”键。也许是为了玩游戏，或者是为了与控制台模式的用户界面交互。

4) 有几种选择。您可能希望考虑的是用于测试的“机器人”API：

*   [http://www.java-tips.org/java-se-tips/java.awt/how-to-use-robot-class-in-java.html](http://www.java-tips.org/java-se-tips/java.awt/how-to-use-robot-class-in-java.html)

如果这还不够，请详细说明您究竟是如何尝试让 Java 程序与 C 程序交互的（并说明该平台是否确实是 Windows 和 DOS 提示符）。

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-12-03T17:09:23.617

最好的方法是使用线程来读取输出

我要做的是：使用 Callable（Runnable 也可以），在其中我提供来自进程的输入（process.getInputStream ()）和我想要存储输出的输出。对 StdErr 也应该这样做。可以使用任何您喜欢的方式读取结果输出。

```
 public Object call () throws IOException {
        int bytesRead;
        byte[] b = new byte [ this.maxBlockSize ];

        try {
            while ( ( bytesRead = this.input.read ( b ) ) != -1 ) {
                this.output.write ( b, 0, bytesRead );
            }
        } finally {
            if ( this.output != null ) {
                this.output.close ();
            }
        }
        return null;
    } 
```

# sql - 使用存储在字段中的列的名称从不同的表中检索数据

> ID：12534020
> 
> 赞同：2
> 
> 时间：2012-09-21T15:58:33.680
> 
> 标签：sql, sql-server, unpivot

我想知道在 SQL-Server 2008 中是否存在完成以下任务的代码？

表格1：

```
id    column name
-------------------
1     col1
2     col2
3     col3
4     col2 
```

表 2：

```
col1    col2    col3
--------------------
a       b       c 
```

结果表：

```
id    data
--------------------
1     a
2     b
3     c
4     b 
```

在此先感谢，我真的不知道该怎么做。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:07:54.857

您可以使用`UNPIVOT` `table2`来访问列中的数据：

```
select t1.id, t2.value
from table1 t1
left join 
(
  select value, col
  from table2
  unpivot
  (
    value
    for col in (col1, col2, col3)
  ) u
) t2
  on t1.name = t2.col 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/0dd4d/3)

或者您可以使用 a`UNION ALL`访问以下数据`table2`：

```
select t1.id, t2.value
from table1 t1
left join 
(
  select col1 value, 'col1' col
  from table2
  union all
  select col2 value, 'col2' col
  from table2
  union all
  select col3 value, 'col3' col
  from table2
) t2
  on t1.name = t2.col 
```

# 见[SQL Fiddle with Demo](http://sqlfiddle.com/#!3/0dd4d/4)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:05:13.473

如果没有列连接，我看不出你是如何做到的：

```
Table1:
ID
ColumnName

Table2:
Table1ID
Letter

Select table1.id, table2.Letter 
from table1 
inner join table2 on table1.ID = table2.Table1ID 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:09:29.247

您可以使用 case 语句和交叉连接来做到这一点：

```
select t1.id,
       (case when t1.columnname = 'col1' then t2.col1
             when t1.columnname = 'col2' then t2.col2
             when t1.columnname = 'col3' then t2.col3
        end) as data
from table1 t1 cross join
     table2 t2 
```

# c++ - Doxygen 支持 C++11 模板别名（“使用”语法）吗？

> ID：12534024
> 
> 赞同：4
> 
> 时间：2012-09-21T15:58:49.020
> 
> 标签：c++, c++11, doxygen

我正在使用 doxygen 1.7.1 为一些 C++ 11 代码生成文档，它似乎忽略了我的模板别名。

为清楚起见，以下是模板别名的示例：

```
template<class T>
using ResultOf = std::result_of<T>::type; 
```

它也无法选择使用更干净的 new using 语法编写的更多传统 typedef：

```
using PredicateOne = std::function<bool(string)>; // Doxygen doesn't catch this

typedef std::function<bool(string)> PredicateTwo; // but does catch this. 
```

是否有可以正确记录这些别名的设置或更高版本？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T16:06:01.243

[1.8.2 版本](http://www.doxygen.nl/manual/changelog.html)支持`using`关键字的新用法

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:05:48.763

FWIW，我很确定 doxygen 还没有添加对它的支持，但它可能在待办事项列表中，并且越多的人很好地询问开发人员，它就会越早出现。

您拥有的版本 1.7.1 非常旧，无论您使用什么设置，都没有机会。

# regex - htaccess 重定向 - 使用子文件夹作为参数

> ID：12534025
> 
> 赞同：0
> 
> 时间：2012-09-21T15:58:52.077
> 
> 标签：regex, .htaccess, redirect

我一直在为（例如）在线商店制定 htaccess 重定向指令。

产品显示在 product.php 上，传入一个 ID 参数。

我的目标是拥有

`products/someValue/someID`

映射到

`product.php?param1=someValue&param2=someID`

这就是我目前所处的位置。这主要是有效的，但有几件事不是我想要的。我需要它基本上`products/`用正斜杠分隔所有内容，并将它们中的每一个用作参数，无论有多少。此外，尾部斜杠是可选的 - 如果不包括，我的规则会抛出 404。谁能指出我正确的方向？

```
RewriteRule ^products/(.*)/(.*)/.*$ /product.php?param1=$1&param2=$2 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:11:49.990

您当前的正则表达式是贪婪的。量词默认是贪婪的。添加 a`?`会使它们变得不贪婪。或者您可以更改您的正则表达式以匹配除`/`以下任何一个都应该工作的任何内容：

```
RewriteRule ^products/(.*?)/(.*?)(/.*)?$ /product.php?param1=$1&param2=$2
RewriteRule ^products/([^/]*)/([^/]*)(/.*)?$ /product.php?param1=$1&param2=$2 
```

[阅读正则表达式中的贪婪以更好地理解这一点。](http://www.exampledepot.com/egs/java.util.regex/greedy.html)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:11:53.563

尝试将正则表达式更改为非贪婪：

```
RewriteRule ^products/(.*?)/(.*?)/.*$ /product.php?param1=$1&param2=$2 
```

或者：

```
RewriteRule ^products/([^/]+)/([^/]+)/.*$ /product.php?param1=$1&param2=$2 
```

# javascript - 从 JSON 动画谷歌图表

> ID：12534028
> 
> 赞同：3
> 
> 时间：2012-09-21T15:58:58.457
> 
> 标签：javascript, jquery, json, google-visualization

如果图表是由 JSON 数据创建的，则所有有关如何制作动画的示例均未涵盖。他们都使用静态数据。（请参阅[过渡动画](https://developers.google.com/chart/interactive/docs/animation)。）

这是我通过 JSON 获取数据的代码。

```
<script type="text/javascript">
    google.load("visualization", "1", { packages: ["corechart"] });
    google.setOnLoadCallback(drawChart);

    function drawChart() {
        $.post('/Weight/WeightAreaChartData', {}, function (data) {
            var tdata = new google.visualization.arrayToDataTable(data);
            var options = {
                title: 'Weight Lost & Gained This Month',
                hAxis: { title: 'Day of Month', titleTextStyle: { color: '#1E4A08'} },
                vAxis: { title: 'Lbs.', titleTextStyle: { color: '#1E4A08' } },
                chartArea: { left: 50, top: 30, width: "75%" },
                colors: ['#FF8100'],
                animation:{
                    duration: 1000,
                    easing: 'in'
                },
            };

            var chart = new google.visualization.AreaChart(
                document.getElementById('chart_div')
            );

            chart.draw(tdata, options);
        });
    }
</script> 
```

我有一个可以成功重绘图表的按钮。但是，它没有动画。如何使图表具有动画效果？谢谢您的帮助。

```
 $('#myBtn').click(function () {
      drawChart();
 }); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-01-03T22:18:47.543

也许是因为您每次都在创建图表？

尝试做`chart`一个全局变量，然后再试一次

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2013-01-04T05:41:31.433

正如[@FelipeFonseca](https://stackoverflow.com/users/1914514/felipe-fonseca)所逃避的那样，您每次都在覆盖图表`#myBtn is clicked`。尝试这样做：

```
(function (global, undef) {
    google.load("visualization", "1", { packages: ["corechart"] });
    google.setOnLoadCallback(drawChart);

    var options = {
        title: 'Weight Lost & Gained This Month',
        hAxis: { title: 'Day of Month', titleTextStyle: { color: '#1E4A08'} },
        vAxis: { title: 'Lbs.', titleTextStyle: { color: '#1E4A08' } },
        chartArea: { left: 50, top: 30, width: "75%" },
        colors: ['#FF8100'],
        animation:{
            duration: 1000,
            easing: 'in'
        }
    };

    var chart;
    function drawChart() {
        $.post('/Weight/WeightAreaChartData', {}, function (data) {
            var tdata = new google.visualization.arrayToDataTable(data);

            if (!chart) {
                chart = new google.visualization.AreaChart(
                    document.getElementById('chart_div')
                );
            }

            chart.draw(tdata, options);
        });
    }

})(this); 
```

# python - 使用 SciPy 进行径向采样

> ID：12534029
> 
> 赞同：1
> 
> 时间：2012-09-21T15:59:11.070
> 
> 标签：python, image-processing, numpy, scipy

我正在使用`scipy.ndimage`. 给定一个环形物体，我想围绕它的圆周生成一个“轮廓”。轮廓可能类似于环周围各个点的厚度测量值，或者是沿环“厚度”的平均信号。

在我看来，`ndimage.mean`如果我能首先获得一个好的标签图像，我就可以使用。

如果我的戒指是这样的，

```
 A = array([[0, 0, 0, 0, 1, 0, 0, 0, 0, 0],
            [0, 0, 1, 1, 1, 1, 1, 1, 0, 0],
            [0, 0, 1, 1, 1, 1, 1, 1, 0, 0],
            [0, 0, 1, 1, 0, 0, 1, 1, 0, 0],
            [0, 0, 1, 1, 0, 0, 1, 1, 0, 0],
            [0, 0, 1, 1, 0, 0, 1, 1, 0, 0],
            [0, 0, 1, 1, 0, 0, 1, 1, 1, 0],
            [0, 0, 1, 1, 0, 0, 1, 1, 0, 0],
            [0, 0, 1, 1, 1, 1, 1, 1, 0, 0],
            [0, 0, 0, 0, 1, 0, 0, 0, 0, 0]]) 
```

`numpy.mean( A, labels )`我可以通过where `labels`is获得“手段概况” 。

```
array([[0,  0,  0,  0,  2,  0,  0,  0,  0,  0],
       [0,  0,  1,  1,  2,  3,  4,  4,  0,  0],
       [0,  0,  1,  1,  2,  3,  4,  5,  0,  0],
       [0,  0, 16, 16,  0,  0,  5,  5,  0,  0],
       [0,  0, 15, 15,  0,  0,  6,  6,  0,  0],
       [0,  0, 14, 14,  0,  0,  7,  7,  0,  0],
       [0,  0, 13, 13,  0,  0,  8,  8,  8,  0],
       [0,  0, 13, 12,  0,  0,  9,  9,  0,  0],
       [0,  0, 12, 12, 11, 10,  9,  9,  0,  0],
       [0,  0,  0,  0, 11,  0,  0,  0,  0,  0]]) 
```

我敢打赌，有一些插值的东西会被忽略，但这是我自己能想到的。

有没有办法生成我提议的`labels`图像？有没有更好的方法来生成我的个人资料？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:27:32.977

圆（或球体）上的标准概率分布是 Von-Mises Fisher 分布。

Scipy 支持这种分布：[http ://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.vonmises.html](http://docs.scipy.org/doc/scipy/reference/generated/scipy.stats.vonmises.html)

因此，您应该能够使用 fit 函数来查找数据的最大似然参数。

# javascript - 我如何让这个 javascript 在 IE 8+ 中工作？

> ID：12534031
> 
> 赞同：1
> 
> 时间：2012-09-21T15:59:22.103
> 
> 标签：javascript, ruby-on-rails-3, html, internet-explorer, css

我在 Rails 应用程序中有这个 javascript：

```
<script type="text/javascript">

var buttons = document.querySelectorAll('[data-radio-sub-questions]');
for (var i = 0; i < buttons.length; i++){
    buttons[i].addEventListener('click', show_sub_questions, false);
}

function show_sub_questions(e){
    e = e.target   // e.srcElement; was an attempt at making it work in IE
    var hidden_div = document.getElementById(e.dataset.radioSubQuestions)
            // document.getElementById(e.getAttribute('data-radio-sub-questions')); also an attempt at making it work in IE 

    if(e.checked && hidden_div.className == 'hidden_questions_swipe'){
        hidden_div.className = 'revealed_questions_swipe';
    }else if(e.checked && hidden_div.className == 'revealed_questions_swipe'){
        hidden_div.className = 'hidden_questions_swipe';
    }else{
        return;
    }
}
</script> 
```

所以我正在开发一个允许人们在线购买保险的非常大的应用程序，它有很多问题，如果以特定方式回答会显示更多需要回答的问题。

上面选择了我放置数据属性的所有单选按钮，然后为它们分配了点击功能。如果以特定方式回答问题，则 data 属性实际上包含需要显示的 div 的 id。

这是 css：我可以接受在 IE 中不工作的转换，但我还需要知道 min/max/height 属性是否可以在`.revealed_questions_swipe`类中工作。

```
.hidden_questions_swipe{
    height: 1px;
    transition: all .1s ease-in-out;
    -webkit-transition:all .1s ease-in-out;
    -moz-transition:all .1s ease-in-out;
    visibility:hidden;
}

.revealed_questions_swipe{
    height: auto;
    min-height: 42px;
    max-height: auto;
    transition: all .1s ease-in-out;
    -webkit-transition:all .1s ease-in-out;
    -moz-transition:all .1s ease-in-out;
    visibility: visible;
} 
```

我实际上习惯于使用 chrome 应用程序，因此使其符合 IE 缺乏支持对我来说是新的:( 任何帮助将不胜感激。

更新：

所以我现在有（在阅读评论和答案之后）：

```
var buttons;

if(!document.querySelectorAll){
    buttons = get_elements_for_ie("data-radio-sub-questions");
} else{
    buttons = document.querySelectorAll('[data-radio-sub-questions]');
}

for (var i = 0; i < buttons.length; i++){

    if(!buttons[i].addEventListener){
        buttons[i].attachEvent("onclick", show_sub_questions);
    }else {
        buttons[i].addEventListener('click', show_sub_questions, false);
    }
}

function show_sub_questions(e){
    e = e.target || e.srcElement;
    var hidden_div = document.getElementById(e.dataset.radioSubQuestions) || document.getElementById(e.getAttribute('data-radio-sub-questions'));

    if(e.checked && hidden_div.className == 'hidden_questions_swipe'){
        hidden_div.className = 'revealed_questions_swipe';
    }else if(e.checked && hidden_div.className == 'revealed_questions_swipe'){
        hidden_div.className = 'hidden_questions_swipe';
    }else{
        return;
    }
}

function get_elements_for_ie(data_attr){
    var matched_elements = [];
    var all_elements = document.getElementsByTagName("*");

    for(var i = 0; i < all_elements.length; i++){
        if(all_elements[i].getAttribute(data_attr)){
            matched_elements.push(all_elements[i])
        }
    }
    return matched_elements
} 
```

仍然无法在 IE 8 或 9 中运行，并且仍然没有看到任何错误。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:06:34.357

您将需要 shivs/workarounds for `querySelectorAll`and `addEventListener`，以及取消注释您注释掉的代码`e.srcElement`and`dataset`解决方法。换句话说，我推荐 jQuery。:) （虽然如果你真的想要，你当然可以不用它。）

# facebook - Facebook 和 Wordpress 专家？请帮忙！尝试获取 Facebook ID（在 WP-FB AutoConn 登录后）

> ID：12534032
> 
> 赞同：-1
> 
> 时间：2012-09-21T15:59:32.510
> 
> 标签：facebook, wordpress

我正在尝试在 Wordpress 中创建一个页面，该页面将在用户使用 WP-FB AutoConn 插件登录到我们的 Wordpress 站点后显示用户的 Facebook ID（使用他们的 Facebook 凭据登录）。

对于 Facebook 游戏，该网站正在构建以提供社区支持，用户需要知道他们的 Facebook ID（他们经常不知道如何找到，然后必须向他们解释）。

由于他们使用他们的 Facebook 凭据登录 Wordpress 网站，因此我们似乎应该能够拥有一个他们可以访问的页面，该页面将显示他们的 Facebook ID。

我用了：

```
<?php global $current_user;
      get_currentuserinfo();
      echo 'Username (user_login): ' . $current_user->user_login . "\n";
      echo 'User email (user_email): ' . $current_user->user_email . "\n";
      echo 'User first name (user_firstname): ' . $current_user->user_firstname . "\n";
      echo 'User last name (user_lastname): ' . $current_user->user_lastname . "\n";
      echo 'User display name (display_name): ' . $current_user->display_name . "\n";
      echo 'User ID (ID): ' . $current_user->ID . "\n";
?> 
```

...显示 Wordpress 登录信息。最初我认为 user_email 是他们的 facebook ID，前面是 FB_（如：FB_665611340@unknown.com - 这是它在 Wordpress 中“用户”下的显示方式），但这必须是一个随机生成的数字，因为它不是他们的脸书ID。

我不是真正的编码员，但正在努力学习，任何见解都值得赞赏！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-29T05:19:54.077

我的想法是正确的（WP-FB AutoConn 在它存储在 Wordpress 中的电子邮件帐户中使用 facevook ID）。我花了一周的时间研究、测试、获取不适用的代码片段并试图让它们工作（在我来这里询问之前），所以，我很失望地看到这个问题本身得到了否定标记。但现在我有了答案。

对于想要学习的人，这里是解决方案：

变量“$email4”可以是任何你喜欢的。另外，我决定去掉无关的东西（从电子邮件地址），并将结果放入一个名为“$emailStripped”的变量中，这样我就可以使用变量名干净地连接它。

```
<?php $email4 = $current_user->user_email;
$emailStripped = substr($email4, strpos($email4,"<")+3, strrpos($email4, "@")-strpos($email4,"<")-3);
echo 'If you logged in using your Facebook account, your Facebook ID should be:' . "\n" . $emailStripped . "\n";
?> 
```

要在 Wordpress 中使用它，您将需要一个允许 PHP 的插件，或者创建一个包含 PHP 的模板文件，创建您的页面，然后为其选择该模板。

# android - FFmpeg 与 Vitamio

> ID：12534034
> 
> 赞同：4
> 
> 时间：2012-09-21T15:59:39.187
> 
> 标签：android, ffmpeg, vitamio

我正在考虑在 android 的视频上制作应用程序。我知道有 2 个著名的图书馆，`FFMPEG`和`Vitamio`.

我只是想知道我可以使用两个库执行简单的视频功能，例如播放视频、抓取帧、将视频转换为 mp3 吗？他们的优点和缺点是什么？

提前致谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T16:27:32.840

Vitamio is much easier to use. It is just like the default `MediaPlayer` in Android but with some fancy capabilities. At the same time it can't do everything you want. As I understand it just plays video.

FFmpeg is not as simple. It is quite a powerful library that requires some thoughtful native coding in C. I'm sure you can do whatever you need with it, but it will cost you lots of efforts.

So I can recommend you to use either default Android's or Vitamio's `MediaPlayer` for playing video. And implement some specific features with the help of FFmpeg.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2016-01-15T15:16:01.217

老问题，但由于我正在研究这个问题并且我发现了很多过时的信息，我认为无论如何它可能值得一个答案。

**Vitamio 实际上基于 ffmpeg**，这使得“Vitamio vs ffmpeg”问题变得毫无意义：

[什么是 Vitamio，在 Vitamio 网站上](https://www.vitamio.org/en/docs/Basic/2013/0509/4.html)

该`Media Formats`段引用：

> Vitamio 使用 FFmpeg 作为解复用器和主解码器，除了 Android 平台内置的默认媒体格式之外，许多音频和视频编解码器都被打包到 Vitamio 中，下面列出了其中的一些。

“使用”而不是“使用”看起来像一个错字（该网站充满了它们......）。

因此，天平的顶端似乎指向了维他命，因为它很容易使用。然而...

1.  `Vitamio`是 ffmpeg for android 的衍生作品，具有未指定的许可证（在网站上拼写得很清楚，个人可以自由地将库用于自己的应用程序。这部分可能是在 Marcus Wolschon 的回答之后添加的）
2.  `ffmpeg for android`是 ffmpeg 的衍生作品（不仅如此，实际上：它是一个端口），*它是根据 LGPL v3 发布的，*以遵守它的合同条款`ffmpeg`（它确实如此），以病毒的方式向用户传达相同的义务（归属，使用于编译的库的源可用等）
3.  `ffmpeg`（原始作品）是在双重许可下发布的：非常自由的 GPL（在本次讨论中无关紧要）和 LGPL（由 ffmpeg 为 android 选择的那个）

* * *

**以下是我有偏见的个人意见，而不是对事实的陈述**

* * *

这让我认为，**除非销售 Vitamio 的公司与 ffmpeg android 和 ffmpeg 的作者达成某种协议，我们对此一无所知，否则***Vitamio*正在侵犯 ffmpeg for android（因此是 ffmpeg）的版权。

Vitamio 的网站有很多断开的链接、有语法问题的文档以及并非所有受过教育的选择所需的法律信息这一事实并不完全有利于它，如果我不得不在考虑它们之间做出决定的话简介公司或某些人试图靠 ffmpeg 团队的工作为生...

这让我想到以下几点：

*   从实际的角度来看，Vitamio*可能是也可能不是*最好的选择，因为*它应该很容易集成到您的项目中*（我说*应该*，因为我还没有设法做到这一点，而且我有相当多的 android 经验开发人员在我的腰带下......）。条件是到期了，因为该软件基于 ffmpeg for android，*它已经为轻松集成 Android 做出了努力*。

*   从法律的角度来看，情况更加阴暗，选择是：

    1.  假装没看见。Vitamio 背后的公司表示，该产品很好，而且可以免费使用（实际上不止于此：它出售库），所以如果存在许可问题，那就是*他们的问题*：作为开发人员，我们有一个半合法的理由来打扰在某种程度上，我们会像 ffmpeg 背后的人一样被骗（我自己对这整个论点不太相信......）。
    2.  诚实打高尔夫，避开 Vitamio，改用 ffmpeg for android，这*可能*意味着在集成过程中需要做更多的功课，既要复制`MediaPlayer`又要遵守 LGPL 条款，但要保证问心无愧

我还没想好，但我可能会选择“2”

希望这可以帮助

**更新**看起来 Vitamio （至少部分）遵守 LGPL 许可的条款，因为他们正在发布构建其产品所需的源代码：

[GitHub 上 Vitamio 的 ffmpeg](https://github.com/yixia/FFmpeg-Vitamio)

我没有时间了解这是否是遵守原始 ffmpeg 许可证所需的全部内容（我持怀疑态度），以及这如何影响之前的考虑（抱歉）。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2013-01-23T14:14:50.647

您不能在任何项目中使用 Vitamio，因为它没有许可证。如果没有 LICENSE 文件或任何其他提及您被授予的权利，您将被授予使用它的权利。见这里：http: [//vitamio.org/topics/93 ?locale=en](http://vitamio.org/topics/93?locale=en)

# javascript - Javascript push() 方法在 jQuery inArray() 旁边不起作用

> ID：12534041
> 
> 赞同：3
> 
> 时间：2012-09-21T16:00:15.753
> 
> 标签：javascript, jquery, arrays, push

我正在尝试将值添加到一个简单的数组中，但我无法将值推送到数组中。

到目前为止一切顺利，这是我拥有的代码：

```
codeList = [];

jQuery('a').live(
    'click', 
    function()
    {
         var code = jQuery(this).attr('id');
         if( !jQuery.inArray( code, codeList ) ) {
              codeList.push( code );
              // some specific operation in the application
         }   
    }
); 
```

上面的代码不起作用！但是如果我手动传递值：

```
codeList = [];

jQuery('a').live(
    'click', 
    function()
    {
         var code = '123456-001'; // CHANGES HERE
         if( !jQuery.inArray( code, codeList ) ) {
              codeList.push( code );
              // some specific operation in the application
         }   
    }
); 
```

有用！

我不知道这里发生了什么，因为如果我手动进行其他测试，它也可以工作！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T16:07:27.450

试试这个..而不是检查它的索引的布尔检查..它在找不到时返回-1..

```
var codeList = [];

jQuery('a').live(
    'click', 
    function()
    {
         var code = '123456-001'; // CHANGES HERE
         if( jQuery.inArray( code, codeList ) < 0) { // -ve Index means not in Array
              codeList.push( code );
              // some specific operation in the application
         }   
    }
); 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T16:09:25.940

[`jQuery.inArray`](http://api.jquery.com/jQuery.inArray/)`-1`当找不到该值时返回，`.live`在 jQuery 1.7+ 上也不推荐使用，并且您的`var`声明中缺少一条语句`codeList`。这是您的代码的重写：

```
//without `var`, codeList becomes a property of the window object
var codeList = [];

//attach the handler to a closer ancestor preferably
$(document).on('click', 'a', function() {
    //no need for attributes if your ID is valid, use the element's property
    var code = this.id;
    if ($.inArray(code, codeList) === -1) { //not in array
        codeList.push(code);
    }
}); 
```

[**小提琴**](http://jsfiddle.net/ult_combo/VagEv/)

正如我在问题评论中所说，以数字开头的 ID 是非法的，除非您使用的是 HTML5 文档类型。

# jquery - 返回的 xml 无法解析

> ID：12534045
> 
> 赞同：0
> 
> 时间：2012-09-21T16:00:37.440
> 
> 标签：jquery, xml, jsp

我正在对返回一些 xml 的 jsp 页面进行 ajax 调用。一切似乎都很好，当我使用警报显示返回的数据时，一切看起来都很好。但是，当我尝试在我的 jQuery 中解析 xml 时，我做不到。

返回的 xml 如下所示：

```
<?xml version="1.0" encoding="ISO-8859-1"?>
  <locations>
    <location>
      <branch>Branch</branch>
      <branchid>BranchID</branchid>
      <phone>Phone</phone>
      <address>Address</address>
      <phone2>Phone2</phone2>
      </location>
    </locations> 
```

我的 ajax 看起来像这样：

```
$.ajax({
        type: "POST",
        url: "test.jsp",
        data: {zc : $('#zc').val()},
        async: false,            
        success: function(message){
            message = message.trim();                
            $(message).find('location').each(function(){   
                var branch = $(this).find('branch').text();
                alert(branch);
            })

        }
    }) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:13:41.757

请尝试下一个代码：

```
var message = "<?xml version='1.0' encoding='ISO-8859-1'?>"
  +"<locations>"
    +"<location>"
      +"<branch>Branch</branch>"
      +"<branchid>BranchID</branchid>"
      +"<phone>Phone</phone>"
      +"<address>Address</address>"
      +"<phone2>Phone2</phone2>"
      +"</location>"
    +"</locations>";

 $('location', message).each(function(xml){
     console.log( 'branch:' +$(this).find('phone2').text());
     console.log( 'branchid:' +$(this).find('branchid').text());
     console.log( 'phone:' +$(this).find('phone').text());
     console.log( 'address:' +$(this).find('address').text());
 }) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:54:58.530

使用 jQuery.parseXML

```
var xml = "<rss version='2.0'><channel><title>RSS Title</title></channel></rss>",
    xmlDoc = $.parseXML( xml ),
    $xml = $( xmlDoc ),
    $title = $xml.find( "title" ); 
```

供参考：[jQuery parseXML](http://api.jquery.com/jQuery.parseXML/)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:08:45.703

例子是：

```
var xml = "<music><album>Beethoven</album></music>";

var result = $(xml).find("album").text(); 
```

[有关更深入的信息，请阅读教程 Easy XML Consumption using jQuery](http://www.compoc.com/tuts/)

首先获取您的“位置”标签：

`$(message).find('locations').find('location')`

# asp.net-mvc-3 - 扩展方法EntityTypeConfiguration.MapSingleType在哪个命名空间

> ID：12534049
> 
> 赞同：0
> 
> 时间：2012-09-21T16:00:45.503
> 
> 标签：asp.net-mvc-3, entity-framework, entity-framework-4, asp.net-mvc-4

我正在尝试实现以下代码以将数据库映射到 POCO，该 POCO 的属性名称与相应的列略有不同，类名与表名略有不同。

![映射到单一类型](../Images/ff994df02e41be23e7155f035569c037.png)

[这是文章](http://weblogs.asp.net/scottgu/archive/2010/07/23/entity-framework-4-code-first-custom-database-schema-mapping.aspx)

问题是没有称为 MapSingleType 的方法。我有以下两种方法可用：

```
public EntityTypeConfiguration<TEntityType> Map<TDerived>(Action<EntityMappingConfiguration<TDerived>> derivedTypeMapConfigurationAction) where TDerived : class, TEntityType;

public EntityTypeConfiguration<TEntityType> Map(Action<EntityMappingConfiguration<TEntityType>> entityMappingConfigurationAction); 
```

但是，我找不到任何如何使用它们的示例，我希望找到 MapSingleType 方法，因为它非常适合我必须映射的大量列。

我[从这里下载了 CTP4](http://www.microsoft.com/en-us/download/details.aspx?id=8812)

我正在使用 EF 4.0.3

这是我到目前为止的代码：

```
using System;
using System.Collections.Generic;
using System.Linq;
using System.Web;
using System.Data.Entity;
using System.ComponentModel.DataAnnotations;
using PlayingWithEF.DAL.CLS.Classes;
using System.Data.Entity.ModelConfiguration;

namespace PlayingWithEF.DAL.CLS.Context
{

    public class CLSContext : DbContext
    {
        public DbSet<Listing> Listings { get; set; }

        protected override void OnModelCreating(DbModelBuilder modelBuilder)
        {
            modelBuilder.Entity<Listing>().Map(...?)
        }
    }
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:37:16.443

您将不得不单独映射每个属性：

```
modelBuilder.Entity<Listing>()
   .Property(l => l.YourProperty)
   .HasColumnName("PropertyName");

modelBuilder.Entity<Listing>()
   .ToTable("TableName"); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:24:51.030

您不能同时使用 CTP4 和 EF 4.0.3，它们是同一个库的不同版本。

我相信此功能在某个时候已从 beta 中删除，并且不再包含在发布版本中。

# android - 如果我们不需要它，如何销毁 ImageView 中的可绘制对象？

> ID：12534053
> 
> 赞同：5
> 
> 时间：2012-09-21T16:01:08.263
> 
> 标签：android, imageview, destroy

这个问题与[如果我们不需要位图，我们是否必须显式回收它？](https://stackoverflow.com/questions/12533001/do-we-have-to-explicitly-recycle-the-bitmap-if-we-dont-need-it).

有一个 ImageView 有一个 drawable，当用户点击一个按钮时，它会为 ImageView 分配一个新的 drawable。

我们是否要销毁属于ImageView的旧drawable，如何？

```
Drawable oriDrawable = imageView.getDrawable()

// set callback to null
oriDrawable.setCallback(null);

// get the bitmap and recycle it
((BitmapDrawable)oriDrawable).getBitmap().recycle(); 
```

上面的代码正确吗？最好的解决方案是什么？

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-09-21T16:07:53.040

您可以尝试使用类似的东西：

```
Drawable drawable = imageView.getDrawable();
if (drawable instanceof BitmapDrawable) {
    BitmapDrawable bitmapDrawable = (BitmapDrawable) drawable;
    Bitmap bitmap = bitmapDrawable.getBitmap();
    bitmap.recycle();
} 
```

你`imageView`的`ImageView`.

原始答案[在这里](https://stackoverflow.com/a/7009362/1069068)。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T16:20:39.253

这只是一个一般性问题还是您的内存不足？在您真的遇到问题之前，我不会进行此优化。

通常，如果您从不大的可绘制文件夹中加载位图（以兆字节为单位），那么您应该不会真正遇到问题。

首先，您需要确保您正在加载的资产对于您显示它们的位置是最佳的，例如，如果您显示图像的区域大小为 64x64，则将 ImageView 设置为大小为 1024 x 1024 的图像是没有意义的.

打破位图预算通常是由于加载了未知尺寸的图像，或者只是如上所述的图像尺寸错误，频繁交换 ImageView 通常不会给您带来最佳尺寸图像的问题。

Android 培训中有一篇很棒的文章，涵盖了最佳加载位图[http://developer.android.com/training/displaying-bitmaps/load-bitmap.html](http://developer.android.com/training/displaying-bitmaps/load-bitmap.html)

希望有帮助

# php - 去掉号码中的引号

> ID：12534064
> 
> 赞同：0
> 
> 时间：2012-09-21T16:01:58.030
> 
> 标签：php

这真的很简单，但我不知道怎么做，我真的需要一个快速的答案。

所以这是我的输出。

> [[['丹麦语','24'],['企业版','34']]]

我希望它成为

> [[['丹麦语',24],['企业',34]]]

或者只是简单地从数字中删除引号。并保留数字。

谢谢你的帮助。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:07:48.883

```
$str = "[[['Dannish','24'],['Enterprise','34']]] ";
$pattern = "#'(\d+)'#";
echo preg_replace($pattern, "$1", $str); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:05:48.513

如果这只是您正在构建的字符串，您可以将其转换为整数

```
(int)$value; 
```

你是如何构建这个字符串的？你有代码吗？

# salesforce - Visualforce：显示文档文件夹中文档的链接。

> ID：12534067
> 
> 赞同：0
> 
> 时间：2012-09-21T16:02:17.030
> 
> 标签：salesforce, apex-code, visualforce

我正在尝试在自定义 VF 页面上显示指向已上传到“文档”选项卡中的文件夹的 Word 文档的链接。

由于某种原因，这没有按预期工作。该链接未指向该文档。安全也不是问题。我想我在 VF 中做的不对。

这是我的控制器代码：

```
public with sharing class osv_portal_HomePageContoller {
public string strDocUrl;
public osv_portal_HomePageContoller()

{

    try
    {
        List<Document> lstDocument = [Select Name from Document where Name = 'SLA-Technology' limit 1];
        string strOrgId = UserInfo.getOrganizationId();
        strDocUrl = '/servlet/servlet.FileDownload?file='+lstDocument[0].Id;

    }
    catch (Exception e) 
    {
        ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.ERROR, 'Error in getDocumentLogoUrl() ' + e.getMessage()));
        System.debug('Error: ' + e.getMessage());
    }
        System.debug('The URL is ' + strDocUrl);
        ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.INFO, 'The URL returned is ' + strDocUrl));   

    } 
```

}

这是我的 VF 代码：

```
<apex:outputLink value="{!strDocUrl}" id="theLink" styleclass="slabutton">
    <span class="delete">Service Level Agreement</span>
 </apex:outputLink> 
```

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:19:16.377

我相信您的问题是您正在引用`1stDocument[0].Id`但没有拉`Id`入您的查询。此外，作为一项规则，您不应以数字开头变量。

## 尝试将上面的代码更改为：

```
public with sharing class osv_portal_HomePageContoller {
public string strDocUrl;
public osv_portal_HomePageContoller()

{

  try
  {
    List<Document> FirstDocument = [SELECT Id,Name FROM Document WHERE Name = 'SLA-Technology' LIMIT 1];
    string strOrgId = UserInfo.getOrganizationId();
    strDocUrl = '/servlet/servlet.FileDownload?file='+FirstDocument[0].Id;

  }
  catch (Exception e) 
  {
    ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.ERROR, 'Error in getDocumentLogoUrl() ' + e.getMessage()));
    System.debug('Error: ' + e.getMessage());
  }
    System.debug('The URL is ' + strDocUrl);
    ApexPages.addMessage(new ApexPages.Message(ApexPages.Severity.INFO, 'The URL returned is ' + strDocUrl));   

  }
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-08-14T15:37:24.023

尝试改变

> 公共字符串 strDocUrl；

至

> 公共字符串 strDocUrl{get;set;}

# c# - 如何将组框锚定到面板的 3 个侧面，但要尊重它的位置？

> ID：12534068
> 
> 赞同：3
> 
> 时间：2012-09-21T16:02:19.510
> 
> 标签：c#, winforms

我有一个面板，里面有一个组框。我希望组框随着面板大小的调整而增长和缩小。但是，面板有 2 个控件将放置在组合框上方。我希望分组框始终保持在这些控件之下。

因为我希望它自动调整大小，所以我打开了 AutoSize。如果我使用 Dock，它当然会忽略我设置的位置。我似乎无法让主播真正做任何事情。

如何使组框尊重我设置的位置，但展开以向下和向左和向右填充面板？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T16:12:03.827

我看不出有什么问题，如果我理解这个问题，WinForms 设计器完全有能力进行设置。这不工作吗？

```
this.groupBox.Anchor = AnchorStyles.Top |
                       AnchorStyles.Bottom |
                       AnchorStyles.Left |
                       AnchorStyles.Right; 
```

![在此处输入图像描述](../Images/9926ee734e423159f762c04f8f07f741.png)

![在此处输入图像描述](../Images/fb238000d5513119566cd2cd6e5c33fb.png)

![在此处输入图像描述](../Images/a1ae34948ecf29c9a0f81044273f5c1f.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:16:19.353

应该很容易。

*   将 AutoSize 设置为 false
*   根据需要将组框放置在面板内
*   将 groupbox.Dock 设置为 None
*   将 groupbox.Anchor 设置为 Top、Bottom、Left、Right
*   groupbox 现在将跟随面板。如果它是表单上的唯一控件，或者根据您的要求，您可以将 panel.Dock 设置为 Fill

# google-maps - Google Places API REQUEST_DENIED（使用有效的 API 密钥）

> ID：12534071
> 
> 赞同：0
> 
> 时间：2012-09-21T16:02:39.470
> 
> 标签：google-maps, google-places-api

当我尝试使用 API 并模拟不同的位置时，我收到了 REQUEST_DENIED 错误。API 文档中的示例参数有效，但是当我使用不同的经纬度坐标时，它会以 REQUEST_DENIED 的形式反弹。大约一周前它还在工作。请问我能做什么？

php中的代码：

......////

```
 $url = "https://maps.googleapis.com/maps/api/place/search/json?location=".$latitude.",
                  ".$longitude."&radius=100&sensor=false&key=".$key."";

                   // Open the Curl session
                      $session = curl_init($url);

                      // If it's a POST, put the POST data in the body
                      //if ($_POST['path']) {
                          $postvars = '';
                          while ($element = current($_GET)) {
                              $postvars .= urlencode(key($_GET)).'='.urlencode($element).'&';
                              next($_GET);
                          }
                          curl_setopt ($session, CURLOPT_POST, true);
                          curl_setopt ($session, CURLOPT_POSTFIELDS, $postvars);
                      //}

                      // Don't return HTTP headers. Do return the contents of the call
                      curl_setopt($session, CURLOPT_HEADER, false);
                      curl_setopt($session, CURLOPT_RETURNTRANSFER, true);
                      curl_setopt($session, CURLOPT_HTTPAUTH, CURLAUTH_BASIC); 
                      //curl_setopt($session, CURLOPT_USERPWD, $username.':'.urldecode($password));

                      // Make the call
                      $json = curl_exec($session); 
```

# jquery - JQuery验证MVC4如何找出为什么mvc表单无效

> ID：12534072
> 
> 赞同：2
> 
> 时间：2012-09-21T16:02:47.313
> 
> 标签：jquery, asp.net-mvc-4, jquery-validate

我正在为 MVC4 和 JQuery 验证而苦苦挣扎。

我们有相当数量的文本框，旁边有它们的验证消息。

一旦他们在所有这些中输入了有效消息，这些消息就会全部消失。但是当我这样做时：

```
var valid = $('form').valid(); 
```

它总是返回false。从（[如何仅在表单有效时触发 jQuery 函数](https://stackoverflow.com/questions/5052315/how-to-fire-jquery-function-only-if-form-is-valid)）得到这个

我不知道表格还有什么问题。有没有办法获取表单的错误消息？

我已经尝试在 validate() 上连接显示错误，如下所述：

[Jquery 验证 showerrors 显示名称](https://stackoverflow.com/questions/8035081/jquery-validate-showerrors-display-name)

但这永远不会填充任何信息。当我测试时，我把它放在每个输入框的变化上：

```
 if ($('form').valid()) {
      alert('the form is valid');
   }
   else if(!$('form').valid()) {
       alert('the form is NOT valid');                                
   } 
```

但它总是会返回无效。

**编辑**

正要创建在线示例（根据 webdeveloper 的要求）。Chrome 隐藏了我的一些 HTML（使用 jquery 选项卡控件）。所以去 IE 获取源代码并且验证工作。然后在FF中试了一下，效果很好。所以它似乎只在 Chrome 中被破坏。

**编辑 2**

创建了 jsfiddle.net 页面：http: [//jsfiddle.net/qN3Cn/1/](http://jsfiddle.net/qN3Cn/1/)

在 IE 中，表单将返回有效，在 chrome 中则无效。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T16:13:26.763

可能是隐藏字段的错误，您可以在控制台查看所有错误：

```
$('form').validate().errorList 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-24T13:44:17.320

它归结为一个隐藏域（hiddenfor）。我有一个日期被隐藏在回发模型的页面上。Chrome不在美国的时候不喜欢玩的好！我最终不得不把它放在我的 web.config

```
 <system.web>
      <globalization culture="en-GB" uiCulture="en-GB"/> 
```

一旦我的 Thread.CurrentThread.CurrentUICulture 设置正确，事情就会很好地发挥。

# ios - 显示在视图控制器之间持续存在的 iOS 应用程序的计时器

> ID：12534074
> 
> 赞同：6
> 
> 时间：2012-09-21T16:03:02.553
> 
> 标签：ios, objective-c, cocoa-touch, nstimer

我一直在尝试通过使用 让计时器显示在我的应用程序的左下角`NSTimer`，并使“经过的时间”显示`UILabel`在左下角，但它对我没有用。

```
-(void)viewDidLoad
{
    NSTimer *aTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(aTime) userInfo:nil repeats:YES];
}

-(void)aTime
{
    NSLog(@"....Update Function Called....");

    static int i = 1;

    Label.text = [NSString stringWithFormat:@"%d",i];

    i++;
} 
```

计时器实际上可以工作，但我无法通过按钮触发它。我试图让计时器继续，而不是在进入下一个故事板/xib 文件时在 1 处重新启动。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T16:53:55.217

要在按钮按下时实现计时器操作，您需要将其编写为`IBAction`如下方法：

```
- (IBAction) buttonPress
{
    NSTimer *aTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(aTime) userInfo:nil repeats:YES];
} 
```

要存储以前的值，您可以使用[`NSUserDefaults`](http://developer.apple.com/library/ios/#documentation/cocoa/reference/foundation/Classes/NSUserDefaults_Class/Reference/Reference.html)SQLite 数据库。为此，我会建议`NSUserDefaults`.

更改 aTime 方法，如：

```
-(void)aTime
{
    NSUserDefaults *standardUserDefaults = [NSUserDefaults standardUserDefaults];
    id obj = [standardUserDefaults objectForKey:@"TimerValue"];
    int i = 0;

    if(obj != nil)
    {
        i = [obj intValue];
    }

    Label.text = [NSString stringWithFormat:@"%d",i];
    i++;

    [standardUserDefaults setObject:[NSNumber numberWithInt:i] forKey:@"TimerValue"];
    [standardUserDefaults synchronize];
} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T16:48:47.150

我认为问题在于该方法`aTime`在您的视图控制器中，当您进入另一个视图时，该视图控制器被释放并且您不能再执行选择器 aTime 了。

所以我建议你把你的`aTime`方法和`i`一个单例（或任何当你进入另一个视图时不会被释放的对象）设置为你的计时器的目标。

你也应该在你的视图控制器中保留代码，这样当你回到这个视图时你可以正确地更新你的标签。

```
-(void)viewDidLoad
{
    NSTimer *aTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(aTime) userInfo:nil repeats:YES];
}

-(void)aTime
{
    NSLog(@"....Update Function Called....");

    Label.text = [NSString stringWithFormat:@"%d",theSingleton.i];
} 
```

**更好的选择：**

您可以将 i 声明为单例的属性，然后将观察者添加到 i，然后您将按时更新标签。当你想计算时间时调用 -startTimer。

单身人士：

```
 @interface Singleton

  @property (nonatomic,retain) NSNumber *i;

  @end

  @implementation

+(Singleton*)instance
{
    //the singleton code here
}

-(void)startTimer
{
    NSTimer *aTimer = [NSTimer scheduledTimerWithTimeInterval:1 target:self selector:@selector(aTime) userInfo:nil repeats:YES];
}

-(void)aTime
{
    NSInteger temp = [i integerValue];
    temp ++;
    self.i = [NSNumber numberWithInteger:temp];
} 
```

视图控制器：

```
-(void)viewDidLoad
{
    [super viewDidLoad];
    [[Singleton instance] addObserver:self forKeyPath:@"i" options:NSKeyValueObservingOptionNew context:NULL]];
}

- (void)observeValueForKeyPath:(NSString *)keyPath
                  ofObject:(id)object
                    change:(NSDictionary *)change
                   context:(void *)context
{
    NSLog(@"....Update Function Called....");

    Label.text = [NSString stringWithFormat:@"%@",[Singleton instance].i];
} 
```

# jquery - 当博客加载更多图像时，mouseover 和 mouseout 淡入淡出效果停止

> ID：12534080
> 
> 赞同：0
> 
> 时间：2012-09-21T16:03:27.110
> 
> 标签：jquery, jquery-animate, mouseover, opacity, fade

我有一个博客，我在其中使用鼠标悬停和鼠标悬停改变图像不透明度的淡入淡出效果。好吧，问题是我的博客有无限滚动，当它加载更多图像时，它们不会出现效果：S

这是我使用的 jquery：

```
<script type='text/javascript'>
$(document).ready(function(){
    $("#entry img.photo").on({
    mouseover: function() { $(this).fadeTo('slow', .5); },
    mouseout: function() { $(this).fadeTo('slow', 1); }
});
});
</script> 
```

并且有一个博客页面，您可以在 10 到 11 张图片中看到它 -[博客页面](http://somuchweeeed.tumblr.com/tagged/nsfw)- 警告：包含成人内容！

如果有人知道如何解决这个问题，请告诉:)

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:14:17.137

试试这个：

```
$(document).ready(function(){
    $(document).on('mouseover', 'img.photo', function() {
        $(this).fadeTo('slow', .5);
    });

    $(document).on('mouseout', 'img.photo', function() {
        $(this).fadeTo('slow', 1);
    });
}); 
```

# svn - 如何在 SVN 的存储库级别设置“use-commit-times”配置选项以保留文件的修改时间戳

> ID：12534084
> 
> 赞同：4
> 
> 时间：2012-09-21T16:03:59.413
> 
> 标签：svn

是否需要在每个客户端 m/c 配置文件上将“use-commit-times”设置为 yes，或者是否有任何选项可以将其集中在 Subversion 安装目录中？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:47:36.117

Subversion 中没有执行此操作的机制。use-commit-times 是客户端设置，而不是服务器配置。

你有什么样的电脑/网络？是 Windows + Active Directory 吗？如果是这样，您可以使用[组策略首选项](http://www.microsoft.com/en-us/download/details.aspx?id=24449)将标准 SVN 配置推送到每个工作站。在 Windows 的情况下，SVN 客户端配置可以作为文件完成，也可以在注册表中完成。

如果这是 Unix/Linux 环境，您可以使用脚本将标准 SVN 配置文件推送出去。

请记住，既有系统范围的 SVN 配置文件，也有每个用户的 SVN 配置文件。不确定哪一个更适合您的设置。（[有关配置文件的信息](http://svnbook.red-bean.com/en/1.7/svn.advanced.confarea.html)）

在我们的环境中，我们使用组策略将标准 SVN 配置文件部署到所有工程工作站，其中包含一些常见的项目，如默认全局忽略。

# java - Java中KML颜色的十六进制到BGR十六进制转换

> ID：12534085
> 
> 赞同：0
> 
> 时间：2012-09-21T16:04:06.593
> 
> 标签：java, colors, hex, kml, rgb

我正在构建一个实用程序，它在基于网络的地图上放置地标并将它们导出到 KML 以在 Google 地球中使用。问题是我给出的十六进制值是标准 RGB，而 KML 需要 BGR（AABBGGRR，其中 AA 是 alpha，但这在这里不相关）。对于像红色（FF0000）这样的简单颜色，转换很简单：0000FF。但是，我发现像 7DCCFF（就像浅蓝色）这样的东西，简单地反转字符串不会在 Google 地球中产生相同的颜色。我在这里错过了什么明显的东西吗？

提前致谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-12-17T12:24:19.600

我开发了一个简单的 PHP 工具来转换 KML / RGB 颜色，使用这两个 PHP 函数：

```
function rgbToKml($color, $aa="ff"){
$rr = substr($color, 0, 2);
$gg = substr($color, 2, 2);
$bb = substr($color, 4, 2);
return $aa.$bb.$gg.$rr;
}
function kmlToRgb($color){
$rr = substr($color, 6, 2);
$gg = substr($color, 4, 2);
$bb = substr($color, 2, 2);
return $rr.$gg.$bb;
} 
```

在此处查看示例：http: [//netdelight.be/kml/](http://netdelight.be/kml/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:11:10.770

怎么样：

用正则表达式拆分`(?<=\G..)`

```
 String color = "123456";
 String[] list = color.split("(?<=\\G..)");
 for(String s : list) {
     System.out.println(s);
 } 
```

这将为您提供以下输出：

```
12
34
56 
```

现在你只需在`list[0], list[1] and list[2]`

正则表达式`(?<=\G..)`匹配一个空字符串，该字符串具有**最后一个匹配项**( )，其**前**`\G`跟**两个字符**( `..`) ( )**`(?<= )`**

# java - 无法通过 java 中的 String.replaceAll 替换转义字符

> ID：12534086
> 
> 赞同：0
> 
> 时间：2012-09-21T16:04:09.903
> 
> 标签：java, regex

我正在尝试替换`\`使用`String.replaceAll`，但这样做时出现异常。这是我的代码：

```
 String str = "1^\\";
    System.out.println("\nInitial string length: "+str.length()+ " Initial String is:     "+str);
    String temp = str.replaceAll("[&@;^\\]",""); 
```

这是输出：

```
Initial string length: 3 Initial String is: 1^\

Exception in thread "main" java.util.regex.PatternSyntaxException: Unclosed character     class near index 6
 [&@;^\]
  ^
at java.util.regex.Pattern.error(Pattern.java:1713)
at java.util.regex.Pattern.clazz(Pattern.java:2254)
at java.util.regex.Pattern.sequence(Pattern.java:1818)
at java.util.regex.Pattern.expr(Pattern.java:1752)
at java.util.regex.Pattern.compile(Pattern.java:1460)
at java.util.regex.Pattern.<init>(Pattern.java:1133)
at java.util.regex.Pattern.compile(Pattern.java:823)
at java.lang.String.replaceAll(String.java:2190) 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T16:05:36.533

`\\`转义被字符串文字吞噬，因此您作为正则表达式解析的字符串实际上是`[&@;^\]`.

`\]`在正则表达式中转义`]`，所以你有一个未封闭的字符类。

您需要双重转义`\`; 一次用于字符串文字，一次用于正则表达式。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T16:06:34.473

String 和 regex 的转义字符是相同的。这意味着得到

```
\\\\ - in the String
\\ - in the regex
\ - means 
```

# html - css 二级下拉菜单

> ID：12534088
> 
> 赞同：1
> 
> 时间：2012-09-21T16:04:14.083
> 
> 标签：html, css

我是 html/css 的初学者。我创建了一个一级下拉菜单栏。我想从我拥有的 css 中制作第二级。由于我不确定第二级的代码，任何人都可以帮助我使用以下 css 吗？

```
.menu ul{
    margin:0;
    padding:0;
    list-style:none;
}
.menu ul li {
    margin:0;
    height:41px;
    float:left;
    border-right:1px solid #efefef;
}
.menu ul li ul{
    margin:0;
    padding:0;
    list-style:none;
}
.menu ul li ul li {
    margin:0;
    height:41px;
    float:left;
    background:#fff;
    border-right:1px solid #efefef;
}
.menu ul li .dwn{
    float:right;
    top:-32px;
    color:#505050;
    margin-right:10px;
    position:relative;
    cursor:pointer;
}
.menu ul li a{
    padding:9px 28px 8px 28px;
    display:block;
    text-decoration:none;
    color:#303030;
}
.menu ul li a:hover{
    background:url(images/menu_hover_bg.png) repeat-x;
}
.menu ul li .act{
    background:url(images/menu_hover_bg.png) repeat-x;
}
.menu ul li a span{
    width:24px;
    height:24px;
    display:inline-block;
}
#menu li{
    position: relative;
}
#menu li:hover > ul{
    display: block;
}
#menu ul{
    list-style: none;
    margin:0;
    padding:0; 
    display:none;
    position:absolute;
    top:41px;
    z-index:99999;
    background: #f5f5f5;
    background: -moz-linear-gradient(top,  #fcfcfc 0%, #f5f5f5 100%);
    background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#fcfcfc), color-stop(100%,#f5f5f5));
    background: -webkit-linear-gradient(top,  #fcfcfc 0%,#f5f5f5 100%);
    background: -o-linear-gradient(top,  #fcfcfc 0%,#f5f5f5 100%);
    background: -ms-linear-gradient(top,  #fcfcfc 0%,#f5f5f5 100%);
    background: linear-gradient(to bottom,  #fcfcfc 0%,#f5f5f5 100%);
    -moz-border-radius: 2px;
    border-radius: 2px;
    border-left:1px solid #d9d9d9;
    -moz-box-shadow: 2px 2px 2px rgba(0,0,0,0.5);
    -webkit-box-shadow: 2px 2px 2px rgba(0,0,0,0.5);
    box-shadow: 2px 2px 2px rgba(0,0,0,0.5);
}
#menu ul li{
    float: none;
    margin: 0;
    padding: 0;
    width:auto;
    display: block;
}
#menu ul .active{
    background: #fff9dc;
    font-weight:bold;
}
#menu ul a{
    border-bottom:1px solid #f4f4f4;
    height: 23px;
    display: block;
    padding-left:30px;
    white-space: nowrap;
    float: none;
    text-transform: none;
    font-size:14px;
    text-decoration:none;
    color:#303030;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:27:23.800

use this tutorial [http://www.kriesi.at/archives/create-a-multilevel-dropdown-menu-with-css-and-improve-it-via-jquery](http://www.kriesi.at/archives/create-a-multilevel-dropdown-menu-with-css-and-improve-it-via-jquery)

or check this out [http://jsfiddle.net/RdcVk/3/](http://jsfiddle.net/RdcVk/3/)

# c++ - 对象内的向量；遗传算法交叉

> ID：12534090
> 
> 赞同：0
> 
> 时间：2012-09-21T16:04:22.023
> 
> 标签：c++, vector, genetic-algorithm

我正在努力生成将为遗传算法制定“交叉”操作的代码。更清楚地说，我有两个向量“a”和“b”，每个向量都将分为两部分，a 给出“a1”和“a2”，而“b”给出“b1”和“b2”。这些部分将被重新组合，以使 a 变为“b2”，然后变为“a1”，而“b”变为“a2”，然后变为“b1”。

由于我正在使用的库 - [EvolvingObjects](http://eodev.sourceforge.net/eo/doc/html/index.html) - 我需要将“a”和“b”传递给将执行上述操作的类的实例。我在这门课上创建“a1”、“a2”、“b1”和“b2”时遇到了麻烦，我希望有人能告诉我原因。我的代码如下。

```
class Quad : public std::vector<int>
{
    public:
    Quad() : std::vector<int>(4,0) {
    }

}; 

class QuadInit : public eoInit<Quad>
{
    public:

    void operator()( Quad& q ) {
        for( unsigned int i=0, n=4; i<n; ++i) {
            // rng is the random number generator of EO
            q[i] = rng.random(10);
        }
    }
};

class QuadVec : public eoVector<double,Quad>
{};

class eoQuadCross: public eoQuadOp<QuadVec>{
public:
    std::string className() const {return "eoQuadCross";}
    QuadVec a1;
    QuadVec a2;
    QuadVec b1;
    QuadVec b2;

    bool operator() (QuadVec& a, QuadVec& b){

    int cross_position_a = rng.random(a.size()-1);
    int cross_position_b = rng.random(b.size()-1);

    for (int i = 0; i < cross_position_a; i++){
        a1.push_back(a[i]);
    }
    for (int i = cross_position_a; i < a.size(); i++){
        a2.push_back(a[i]);
    }

    for (int i = 0; i < cross_position_b; i++){
        b1.push_back(b[i]);
    }
    for (int i = cross_position_b; i < b.size(); i++){
        b2.push_back(b[i]);
    }

    //Return bool
    return true;
} 
```

# c - XC8 编译器错误“声明中没有标识符”

> ID：12534092
> 
> 赞同：0
> 
> 时间：2012-09-21T16:04:29.463
> 
> 标签：c, pic, microchip, mplab

我最近在工作中接手了一些 C 和固件职责，并且在处理看似基本但找不到答案的问题时遇到了麻烦。我对 C 语言不是很有经验，但我在高级语言方面有多年的经验。

该固件是为 PIC18F4865 编写的，我无法正确编译和编程。它最初是使用 HI-TECH PICC18 编译器在 MPLAB IDE 8 上编写的，但我升级到 MPLAB X IDE 时遇到了问题。

首先，我使用的是相同的 HI-TECH PICC18 编译器，它似乎编程成功，但设备读取不正确。然后我切换到 XC8 编译器并在编译期间开始收到一条我无法绕过的错误消息。

```
C:/_Sable/Firmware_C/lib\eeprom.h:10: error: no identifier in declaration
C:/_Sable/Firmware_C/lib\eeprom.h:10: error: ";" expected 
```

eeprom.h 文件是

```
#ifndef _EEPROM_H_
#define _EEPROM_H_

#define EE_ADDR(member) (offsetof(struct ee_map_s, (member)))

extern unsigned char eeprom_read(unsigned int); // this is line 10
extern void eeprom_write(unsigned int, unsigned char);
extern void ee_read(unsigned char, void *vp, unsigned char);
extern void ee_write(unsigned char, void *vp, unsigned char);

#endif 
```

我在网上看了看，发现这个错误可能发生在以前包含的文件中，我检查了那个文件，一切似乎都很好。我什至重新排列了包含顺序，认为如果是这种情况错误消息会改变，但错误仍然抱怨这一行。

然后我想也许函数声明是无效的，因为没有参数被命名，所以我将第 10 行更改为：

```
extern unsigned char eeprom_read(unsigned int addr) 
```

这并没有改变什么。但是我确实有一种奇怪的感觉，当我再次清理和构建时，它并没有重新编译 eeprom.h。我不知道是否会发生这种情况或如何强制它重新编译。

我不知道修复此问题是否会解决我遇到的固件问题，或者我是否需要返回到 MPLAB IDE 8，但这仍然是我想要修复的问题。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T19:15:01.810

一些头文件正在使用宏来`#define eeprom_read`插入其他内容，可能是空字符串。如果您使用不同的函数名称，`#undef eeprom_read`或执行其他操作以导致标头不再生成该宏，它应该可以工作。

# sql - Django：加入，保留两列之一，然后按此排序

> ID：12534094
> 
> 赞同：2
> 
> 时间：2012-09-21T16:04:39.603
> 
> 标签：sql, django, django-orm

我有两个 Django 模型，大致概括如下：

```
class Thing(Model):
    date_created = DateTimeField()

class ThingDateOverride(Model):
    thing    = ForeignKey(Thing)
    category = ForeignKey(Category)
    override = DateTimeField() 
```

我想要做的是`Things`为给定的 a`Category`按适当的`ThingDateOverride` `override`字段排序的列表，如果不存在这样的覆盖，则为`Thing`'s 。`date_created`

换句话说：

*   对于`Thing`中的每个`QuerySet`，保留其中一个`Thing.date_created`或如果该/对存在`override`适当的。`ThingDateOverride``Thing``Category`

*   `Thing`按生成的时间戳对集合进行排序。

我可以在 SQL 中实现这一点，但我宁愿避免编写可能特定于引擎的代码。我目前正在实现围绕 ORM 的逻辑（在纯 python 中），但我希望数据库来处理这个。

我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:49:27.287

可以吗，该类别存储在`ThingDateOverride`? 如果是，则`Thing`对象没有没有覆盖对象的类别。

我假设每个对象`ThingDateOverride`都存在`Thing`对象（因此将类别分配给每个`Thing`对象）。`override`field 可以为 NULL，然后`date_created`object 将用于对事物进行排序。`override`然后此代码应按是否存在或`date_created`不存在进行排序：

```
Thing.objects.filter(thingdateoverride__category=category).extra(select={'d': 'if(override, override, date_created)'}).order_by('d') 
```

这个想法是使用`extra`并选择`override`字段，如果它存在，或者`date_created`如果不作为另一列，然后按该列排序。

注意：此代码之所以有效，只是因为`override`和`date_created`字段具有不同的名称，因此可以区分它们。否则 MySQL 会返回错误，比如“字段名不明确”，需要添加表名。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T05:56:56.023

如果需要`Thing`，您应该从该模型开始并使用 [反向关系](https://docs.djangoproject.com/en/dev/topics/db/queries/#one-to-one-relationships)：

```
Thing.objects.filter(thingdateoverride__category=category).order_by("thingdateoverride__override", "date_created") 
```

# iphone - iOS 后台录音

> ID：12534095
> 
> 赞同：0
> 
> 时间：2012-09-21T16:04:40.833
> 
> 标签：iphone, audio, background, location, recording

我有一个在后台使用位置服务的应用程序。工作正常。但在某个时候，我想做的是在应用程序处于后台时检查一些音频电平。由于某种原因，它似乎不起作用。在前台运行时，该功能工作正常，但在后台运行时，录音机平均和峰值输入始终为 -120..

这就是我用来做这个把戏的方法（这显然不起作用..）

```
 ....
            [recorder record];
            if (levelTimer == nil) {
                    bgTask = 0;
                    app = [UIApplication sharedApplication];
                    bgTask = [app beginBackgroundTaskWithExpirationHandler:^{
                        [app endBackgroundTask:bgTask];
                    }];
                levelTimer = [NSTimer scheduledTimerWithTimeInterval: 0.02 target: self selector: @selector(levelTimerCallback:) userInfo: nil repeats: YES];
            }
            ... 
```

是的`levelTimerCallback`，即使在后台，每 0.02 秒调用一次，所以我认为`beginBackgroundTaskWithExpirationHandler`工作正常。

有什么想法或一些提示吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T16:02:11.187

目前，在 iOS 设备上在后台录制的唯一支持方式是在应用程序的 plist 中包含 UIBackgroundModes 键的音频，启用适当的音频会话进行录制，并在应用程序进入之前开始录制（或播放）音频背景。

如果应用程序使用 Audio Queues 或 RemoteIO Audio Unit API 进行录制，则缓冲区回调可以丢弃所有音频缓冲区，直到感兴趣的时间，然后计算 PCM 样本表示的能量，以达到所需的时间量需要。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2013-01-23T20:49:01.757

我知道有一个应用程序有背景记录。Beatmaker 2。您需要在beatmaker 2下的设备设置中打开后台运行。在beatmaker中创建音轨并开始录制。他们使用设备上的主页按钮退出应用程序，但它仍在录制。您也可以通过不同的界面获得创意。我这样做是为了将 iPhone 4 的线路输出到 beatmaker 2 的音轨中。您可以录制前台播放的任何内容的音频。（YouTube 视频应用音乐来自您的 iTunes 库。您也可以在录制后编辑波浪。

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T17:39:02.203

我不认为 iPhone 将允许在后台录制。当应用程序进入后台时，只允许少数服务。从逻辑上讲，如果您的应用程序长时间处于后台，它将消耗大量电池以及存储音频的缓冲区，除非您有时间和内存管理这些资源。当您将应用提交到 App Store 时，这也会给您的应用带来问题。

尽管您可以参考此链接以了解可以在后台运行的内容。我希望这可以帮助你以某种方式清除事情。

[iPhone：在后台运行服务](https://stackoverflow.com/questions/5252575/iphone-running-services-in-the-background)

祝你好运！！！

# css - 展开 CSS 中的第一层/表格

> ID：12534097
> 
> 赞同：0
> 
> 时间：2012-09-21T16:04:44.033
> 
> 标签：css, html, css-tables, layer

当我应用我的 CSS 属性时，我希望第一层扩展到整个屏幕。页面的左右有边距。

我想要的与[此](http://www.bbc.co.uk)*类似*。第一层是黑色的。

如何将我的扩展到整个屏幕，然后在剩余部分中组织内容？

这是我刚刚提出的第一层的 CSS：

```
#main{  
    margin-top:0px;
    width: 100%;
    height: 600px;
    background-color: blue;
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:45:07.670

您必须更具体，图层和表格是两个非常不同的东西。此外，您引用的 BBC 网站以及大多数新网站都使用`<div>`标签来组织其 html 而不是表格。如果您可以更具体地使用一些 HTML 示例，您将获得更多帮助。

如果您有一个`<div>`与您发布的 css 具有相似样式的标题，那么有一个内容包装器`<div>`，您可以在其上设置宽度应该做您想要的。

同样，如果您可以更具体，我们可以提供更具体的帮助。

# c# - 如何向 CollectionViewSource 添加新项目？

> ID：12534109
> 
> 赞同：1
> 
> 时间：2012-09-21T16:05:45.190
> 
> 标签：c#

> **可能重复：**
> [如何从 CollectionViewSource 添加或删除项目？](https://stackoverflow.com/questions/11823341/how-to-add-or-remove-an-item-from-a-collectionviewsource)

我有一个绑定到 CollectionViewSource 的数据网格。如何使用代码将 newItem 添加到此源？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:08:38.277

我刚刚阅读了 MSDN[文档](http://msdn.microsoft.com/en-us/library/system.windows.data.collectionview.aspx)。它说

> 您不应在代码中创建此类的对象。要为仅实现 IEnumerable 的集合创建集合视图，请创建一个 CollectionViewSource 对象，将您的集合添加到 Source 属性，然后从 View 属性获取集合视图。

所以，我猜你不应该向 CollectionViewSource 添加任何项目。相反，您应该将项目添加到包装对象。

为什么你仍然需要这样做，你想要达到什么目的？

# python - 使用 DictReader() 时出现 KeyError

> ID：12534110
> 
> 赞同：5
> 
> 时间：2012-09-21T16:05:45.767
> 
> 标签：python, csv

我有一系列 .src 文件，我试图使用 DictReader() 将它们输入到字典中。文件如下所示（只是标题和第一行）：

```
SRC V2.0.. ........Time Id Event T Conf .Northing ..Easting ...Depth Velocity .NN_Err .EE_Err .DD_Err .NE_Err .ND_Err .ED_Err Ns Nu uSt ....uMag Nt tSt ....tMag .MomMag SeiMoment ...Energy ...Es/Ep .SourceRo AspRadius .StaticSD AppStress DyStressD MaxDispla PeakVelPa PeakAccPa PSt
07-30-2010 07:43:56.543 ND     0 e 0.00    152.54    746.45  1686.31     6000   11.76   11.76   11.76    0.00    0.00    0.00 30  0 num    -9.90 30 utm    -3.21   -1.12 2.06e+007 2.22e+000 20.93    6.08e+000 0.00e+000 3.83e+004 1.49e+003 0.00e+000 1.52e-005 1.50e-003 0.00e+000   1 
```

无论如何，以下是我的代码：

```
import csv

Time = {}
Northing = {}
source_file = open(NNSRC, 'rb')
for line in csv.DictReader(source_file, delimiter = '\t'):
    Time = line['........Time'].strip()
    Northing = line['.Northing'].strip()

print Time, Northing 
```

它给了我以下错误：

```
Traceback (most recent call last):
  File "C:\Python26\Lib\site-packages\xy\NNFindStages.py", line 101, in <module>
    Time = line['........Time'].strip()
KeyError: '........Time' 
```

如何在不更改文件本身的情况下解释文件头在文件中格式化的奇怪方式？

任何帮助是极大的赞赏！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T16:15:23.110

您的标题行未使用制表符。

当我在没有标签的情况下重新创建您的数据时，`csv`模块返回的行仅包含一个（*长*）键。如果我用实际的标签重新创建它，那么我得到：

```
>>> source_file = open('out.csv', 'rb')
>>> reader = csv.DictReader(source_file, delimiter = '\t')
>>> line = reader.next()
>>> len(line)
37
>>> line.keys()
['Id', '..Easting', '.NE_Err', 'uSt', 'SeiMoment', 'MaxDispla', 'tSt', 'Ns', 'Nt', 'Nu', '.Northing', '.DD_Err', '...Energy', '....uMag', 'V2.0..', 'DyStressD', 'SRC', 'PeakAccPa', '.SourceRo', '........Time', '.EE_Err', 'T', 'Velocity', 'PeakVelPa', 'AspRadius', '...Depth', 'PSt', '....tMag', '.MomMag', 'AppStress', '...Es/Ep', '.ED_Err', 'Event', '.ND_Err', 'Conf', '.StaticSD', '.NN_Err']
>>> line['........Time']
'ND'
>>> line['.Northing']
'746.45' 
```

请注意，这些值不需要剥离；该模块会为您处理无关的空白。

您可以单独阅读您的标题，清理它，然后使用`csv`模块处理其余数据：

```
source_file = open(NNSRC, 'rb')
header = source_file.readline()
source_file.seek(len(header))  # reset read buffer

headers = [h.strip('.') for h in header.split()]
headers = ['Date'] + headers[2:]  # Replace ['SRC', 'V2.0'] with a Date field instead
for line in csv.DictReader(source_file, fieldnames=headers, delimiter = '\t'):
    # process line 
```

上面的代码分别读取标题行，将其拆分并删除额外的`.`句点，以便您制作更可行的列键，然后`DictReader`通过重置 readline 缓冲区（调用的副作用`.seek()`）设置文件。

# python - scipy.optimize 与矩阵约束

> ID：12534116
> 
> 赞同：0
> 
> 时间：2012-09-21T16:06:07.123
> 
> 标签：python, scipy, mathematical-optimization

我如何讲述`fmin_cobyla`矩阵约束`Ax-b >= 0`？它不会将其作为矢量约束：

```
cons = lambda x: dot(A,x)-b 
```

谢谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T16:29:48.763

由于约束必须返回一个标量值，您可以像这样动态定义标量约束：

```
constraints = []
for i in range(len(A)):
    def f(x, i = i):
        return np.dot(A[i],x)-b[i]
    constraints.append(f) 
```

例如，如果我们稍微修改[docs 中的示例](http://docs.scipy.org/doc/scipy/reference/generated/scipy.optimize.fmin_cobyla.html)，

```
def objective(x):
    return x[0]*x[1]

A = np.array([(1,2),(3,4)])
b = np.array([1,1])
constraints = []
for i in range(len(A)):
    def f(x, i = i):
        return np.dot(A[i],x)-b[i]
    constraints.append(f)

def constr1(x):
    return 1 - (x[0]**2 + x[1]**2)

def constr2(x):
    return x[1]

x = optimize.fmin_cobyla(objective, [0.0, 0.1], constraints+[constr1, constr2],
                         rhoend = 1e-7)
print(x) 
```

产量

```
[-0.6  0.8] 
```

PS。感谢@seberg 指出了一个较早的错误。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:12:30.477

实际上文档说`Constraint functions;`，它只是期望一个函数列表，每个函数只返回一个值。

所以如果你想把这一切合二为一，也许只是修改 的纯 python 代码`fmin_cobyla`，你会发现它在你的函数周围定义了一个包装函数，所以很容易......而且 python 代码真的很短无论如何，只是小包装`scipy.optimize._cobyal.minimize`。

附带说明一下，如果您正在优化的函数像您的约束一样是线性的（或二次的），那么可能有更好的求解器。

# xslt - XSLT - 如果超标签包含特定术语，如何忽略 XML 中的子标签

> ID：12534118
> 
> 赞同：2
> 
> 时间：2012-09-21T16:06:08.897
> 
> 标签：xslt

我正在尝试更改我的 XSLT，以便当我的 XML 中的超级标记包含特定单词时，不选择子标记。

在此示例中，我不希望在`<para>`超级标签`<formalpara>`包含单词“Galaxy”时显示子标签

提前致谢。

我的 XML

```
<formalpara>
Galaxy
<para>
<bridgehead>Galaxy Zoo</bridgehead>
    <sliceXML>Galaxy</sliceXML>
    The human eye is far better at identifying characteristics of galaxies 
    than any computer. So Galaxy Zoo has called for everyday citizens to 
    help in a massive identification project. Well over a hundred thousand 
    people have helped identify newly discovered galaxies. Now you can, too.
</para>
</formalpara> 
```

我的 XSLT

```
<xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" xmlns:sparql-results="http://www.w3.org/2005/sparql-results#" version="1.0">

<xsl:template match="/">
    <xsl:call-template name="results"/>
    <xsl:message>FROM simpleHMHTransform XSLT8</xsl:message>
</xsl:template>

<xsl:template name="results">
    <xsl:for-each select="//formalpara">
        <xsl:call-template name="formalpara"/>
    </xsl:for-each>
    <xsl:for-each select="//para">
        <xsl:call-template name="para"/>
    </xsl:for-each>
</xsl:template>

<xsl:template name="formalpara">
<div id="formalpara">
    <xsl:copy-of select="text()"/>
</div>
</xsl:template>

<xsl:template name="para">
<div id="para">
    <xsl:copy-of select="text()"/>
</div>
</xsl:template> 
```

我当前的输出

```
<?xml version="1.0" encoding="UTF-8"?><div xmlns:sparql-results="http://www.w3.org/2005/sparql-results#" id="formalpara">
Galaxy

</div><div xmlns:sparql-results="http://www.w3.org/2005/sparql-results#" id="para">

    The human eye is far better at identifying characteristics of galaxies 
    than any computer. So Galaxy Zoo has called for everyday citizens to 
    help in a massive identification project. Well over a hundred thousand 
    people have helped identify newly discovered galaxies. Now you can, too.
</div> 
```

我想要的输出

```
<?xml version="1.0" encoding="UTF-8"?><div xmlns:sparql-results="http://www.w3.org/2005/sparql-results#" id="formalpara">
 Galaxy
</div> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:23:11.427

你真的应该做`xsl:apply-templates`而不是调用命名模板。然后，您可以添加此模板：

```
<xsl:template match="formalpara[contains(text(),'Galaxy')]/para"/> 
```

稍后我可以举一个完整的例子。

* * *

完整示例：

**XML 输入**

```
<formalpara>
    Galaxy
    <para>
        <bridgehead>Galaxy Zoo</bridgehead>
        <sliceXML>Galaxy</sliceXML>
        The human eye is far better at identifying characteristics of galaxies 
        than any computer. So Galaxy Zoo has called for everyday citizens to 
        help in a massive identification project. Well over a hundred thousand 
        people have helped identify newly discovered galaxies. Now you can, too.
    </para>
</formalpara> 
```

**XSLT 1.0**

```
<xsl:stylesheet version="1.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"
    xmlns:sparql-results="http://www.w3.org/2005/sparql-results#">
    <xsl:output indent="yes"/>
    <xsl:strip-space elements="*"/>

    <xsl:template match="formalpara">
        <div id="formalpara">
            <xsl:apply-templates/>
        </div>
    </xsl:template>

    <xsl:template match="formalpara[contains(text(),'Galaxy')]/para"/>

    <xsl:template match="para">
        <div id="para">
            <xsl:apply-templates/>
        </div>
    </xsl:template>

</xsl:stylesheet> 
```

**XML 输出**

```
<div xmlns:sparql-results="http://www.w3.org/2005/sparql-results#" id="formalpara">
    Galaxy
    </div> 
```

注意：我还将 更改为`contains()`，`contains(text(),'Galaxy')`因此它只查看作为 . 的直接子级的文本`formalpara`。

# ios - iPhone 5 屏幕适配

> ID：12534119
> 
> 赞同：0
> 
> 时间：2012-09-21T16:06:13.127
> 
> 标签：ios, xcode

我正在使用此代码根据设备（iphone 5 或更少）调整我的故事板：

```
if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
    if(UIScreenOverscanCompensationScale==1136/640){
        //move to your iphone5 storyboard
        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"iphone5 storyboard" bundle:[NSBundle mainBundle]];
    }
    else{
        //move to your iphone4s storyboard
        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
    }} 
```

即使我只是放置，代码也不起作用：

```
UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"iphone5 storyboard" bundle:[NSBundle mainBundle]]; 
```

...它仍然正常加载 iphone。

我把它放在：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{ 
```

在应用程序委托中。这是正确的吗？？在应用程序设置中，我选择了原始的 iphone 故事板

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-23T11:55:50.160

是否`MainStoryboard`仍在目标摘要下指定？我相信这将是应用程序首先出现的地方。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-23T16:35:32.220

我设法以这种方式解决了它：

```
if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone){
    if([[UIDevice currentDevice] userInterfaceIdiom] == UIUserInterfaceIdiomPhone && [UIScreen mainScreen].bounds.size.height == 568.0){
        //move to your iphone5 storyboard
        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"iphone5 storyboard" bundle:[NSBundle mainBundle]];
        UIViewController *vc =[storyboard instantiateInitialViewController];

        // Set root view controller and make windows visible
        self.window.rootViewController = vc;
        [self.window makeKeyAndVisible];
    }
    else{
        //move to your iphone4s storyboard
        UIStoryboard *storyboard = [UIStoryboard storyboardWithName:@"MainStoryboard_iPhone" bundle:[NSBundle mainBundle]];
        UIViewController *vc =[storyboard instantiateInitialViewController];

        // Set root view controller and make windows visible
        self.window.rootViewController = vc;
        [self.window makeKeyAndVisible];
    }} 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:11:53.540

问题是：

```
UIScreenOverscanCompensationScale==1136/640 
```

永远不会是真的。

检查`UIScreenOverscanCompensationScale`正在做什么并返回一个 BOOL。

# facebook - 使用通配符查询 Facebook

> ID：12534122
> 
> 赞同：1
> 
> 时间：2012-09-21T16:06:29.823
> 
> 标签：facebook, facebook-graph-api

可能吗？我已经知道如何进行 AND/OR 查询（http://stackoverflow.com/questions/4674685/facebook-graph-api-search-rules），并且我还希望能够使用通配符。可以在没有 FQL 的情况下仅使用 /search 路径来完成吗？

# java - 从java代码连接到unix机器的连接池机制

> ID：12534126
> 
> 赞同：1
> 
> 时间：2012-09-21T16:06:34.627
> 
> 标签：java, linux, unix, ssh, connection

我知道数据库中的连接池机制使您可以在许多事务之间保持数据库打开，然后仅在最后关闭数据库。我正在使用 sshxcute( [http://code.google.com/p/sshxcute/](http://code.google.com/p/sshxcute/) ) 从 java 代码连接到 unix 机器。但如果我必须从不同的 java 文件执行 unix 命令，则从连接到机器的整个过程都会发生。我想在对这台机器的多次调用之间保持会话打开。如何实现这一点。基本上我想要一些机制，比如连接池，它让我只打开（连接）到 unix 机器一次，并从不同的 java 类或方法执行尽可能多的指令，最后一次关闭到 unix 机器的会话/连接。 .

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:34:26.427

这里有几个想法：
A. 使用对象池。例如，您可以使用[这个](http://commons.apache.org/pool/)。
这将使您拥有一个包含多个 Unix 连接的池。B. 在您的应用程序级别进行某种会话管理，
并拥有一个会话上下文，该上下文将包含对从池中获取的对象的引用。
一旦会话开始 - 您将尝试从池中获取连接。
会话结束后，您会将连接返回到池。

请记住，您的应用程序会话与池中保存的对象之间可能没有 1:1 的比例。
处理此问题的一种可能策略是创建一个初始大小为 X 的池，并在需要时让它增长到大小 Y。

您需要处理的另一个问题可能是进行某种“保持活动”检查以查看您的连接是否
有效 我可以在这里想到的两种策略是：
A. 定期检查连接（比如说 - 使用平）。
B. 如果池中的一个连接断开，则创建一个新连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:33:59.253

我不得不创建这样的池。这并不难。简而言之，我的一般方法是：

1.  创建一个类来管理池。

2.  在该类中，创建一个 Collection 来保存可用的连接。（哦，押韵很好。）可能是 LinkedList，但也可能是 ArrayList 等。创建第二个 Collection 来保存当前正在使用的连接。最初这些集合是空的。

3.  在该类中创建一个可以调用以请求连接的函数。该函数检查池中是否有任何连接。如果是这样，它会选择一个，将其从可用集合中删除，将其添加到已使用的集合中，然后将其返回给调用者。如果没有，它会创建一个新的，将其添加到已使用的集合中，并将其返回给调用者。

4.  创建一个可以调用以释放连接的函数。该函数将集合作为参数，将其从已使用的集合中删除，并将其添加到可用的集合中。（如果它不在 used 集合中，这意味着有人在没有通过池的情况下获得了连接。您可能希望将其添加到可用集合中，或者只是将其关闭并将其丢弃。）

基本上就是这样。当然，还有很多细节需要考虑。喜欢：

是否应该限制最大连接数？如果是这样，您必须计算已发出的连接数，并且如果新请求会使您超过该限制，则抛出异常而不是返回连接。（或者可能返回 null，具体取决于您要如何处理它。）

是否应该限制保留在可用池中的连接数？如果是这样，当释放连接时，不是自动将其添加到可用池中，而是检查池是否已经达到最大大小，如果是，则关闭连接而不是将其返回到池中。

get-connection 函数在返回连接之前测试连接是个好主意。例如，当它位于池中时，连接可能已超时。也许您可以发送一些低成本的消息并确保您得到有效的回复。

使用已用集合的主要原因是您可以观察连接泄漏，即有人请求连接，然后再不返回。我通常不会将连接直接放入已使用的集合中，而是创建一个包装器对象来保存它，该对象还保留它被分配的时间。然后我放入一个用计时器调用的函数，该计时器循环遍历已使用的集合并检查是否有任何东西已经存在了很长时间。根据连接的类型，您可以检查它最后一次实际使用的时间或进行一些其他测试以查看调用者是否真的仍在使用它，或者它是否是连接泄漏。如果您确信可以识别​​连接泄漏，则可以将其关闭或将其返回到可用池中。否则，您至少可以将消息写入日志，并定期检查日志以查看是否存在泄漏问题并进行追踪。如果您不进行任何连接泄漏跟踪，那么使用的集合可能是多余的并且可以被消除。

# ruby-on-rails - 如何在不使用任何额外表的情况下在 ruby on rails 中为用户表实现多对多关系？

> ID：12534127
> 
> 赞同：0
> 
> 时间：2012-09-21T16:06:36.437
> 
> 标签：ruby-on-rails, database-design, model, many-to-many, associations

我是 Ruby on Rails 的新手，但遇到了这个有趣的情况：

我有三个**模型**：

1.  用户
2.  公司
3.  项目

我想通过以下方式关联它们：

1.  **公司**有_many**用户**
2.  **用户**所属**公司**

    **通过USERS**表中的**company_id**列实现

     **`User.Company`或`Company.Users`工作正常。** 

 *** * *

1.  **项目**has_and_belongs_to_many**用户**
2.  **用户**has_and_belongs_to_many**项目**

    通过使用**projetcs_users**表中的**has_and_belongs_to_many**关系实现

     **`Project.Users`或`User.Projects`工作正常。** 

 *** * *

当我希望他们也按以下方式加入时，真正的问题来了：

1.  **公司**属于**所有者** （：通过 => 用户）
2.  **所有者**has_one**公司**

    ---一个**公司**可以有多个**所有者**，但**一个用户**只能拥有**一个公司**。他不能同时拥有多家公司。

    ---用户可能是也可能不是公司的所有者，但始终属于某个公司。---一个用户不能同时属于两家公司。

3.  **项目**has_one **Project_manager** (:through => User)

4.  **Project_manager**属于_to**项目**

    ---一个**项目**只能有一个**Project_manager**，但一个可以是多个项目的项目经理。

我无法弄清楚应该如何在**Models**中定义关系。另外三个**模型的****表**结构应该是什么。

 **我的目标是实现：

1.  公司.所有者

    可以通过以下方式完成：

    `@owner = User.find(Company.owner_id)`

2.  Project.Project_manager

    可以通过以下方式完成：

    `@Project_manager = User.find(Project.project_manager_id)`

但不希望它以这种方式工作！

休息对我来说非常好。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:53:27.167

这应该可以帮助您走上正确的轨道：

```
class User
  # the owner relation
  #
  # user.owned_company 
  # => company
  #
  has_one :owned_company, :class_name => "Company", :foreign_key => "owner_id"

  # the project manager relation
  #
  # user.managed_projects 
  # => [project,...]
  #
  has_many :managed_projects, :class_name => "Project", :foreign_key => "project_manager_id"
end

class Company
  # the owner relation
  #
  # company.owner
  # => user
  #
  belongs_to :owner, :class_name => "User"
end

class Project
  # the project manager relation
  #
  # company.project_manager 
  # => user
  #
  belongs_to :project_manager, :class_name => "User"
end 
```

Rails ActiveRecord 关系有很好的文档记录。请参阅文档[http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html](http://api.rubyonrails.org/classes/ActiveRecord/Associations/ClassMethods.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T20:31:17.397

这是我能够实现的最终输出：

* * *

## **- - -楷模 - - -**

**项目**

```
class Project < ActiveRecord::Base
  attr_accessible  :name

  has_and_belongs_to_many :users
  belongs_to :project_manager, :class_name => "User"

end 
```

**用户**

```
class User < ActiveRecord::Base
  attr_accessible :name, :project_id

  belongs_to :company
  belongs_to :owned_company, :class_name => "Company", :foreign_key => "owner_id"
  has_many :managed_projects, :class_name => "Project", :foreign_key => "project_manager_id"
  has_and_belongs_to_many :projects

end 
```

**公司**

```
class Company < ActiveRecord::Base
  attr_accessible :name

  has_many :users
  has_many :owners, :class_name => "User", :foreign_key => "owner_id"  

end 
```

## **-----表和迁移-----**

**项目**

```
class CreateProjects < ActiveRecord::Migration
  def change
    create_table :projects do |t|
      t.string :name
      t.integer :project_manager_id

      t.timestamps
    end
  end
end 
```

**用户**

```
class CreateUsers < ActiveRecord::Migration
  def change
    create_table :users do |t|
      t.string :name
      t.integer :project_id
      t.integer :owner_id

      t.timestamps
    end
  end
end 
```

**公司**

```
class CreateCompanies < ActiveRecord::Migration
  def change
    create_table :companies do |t|
      t.string :name

      t.timestamps
    end
  end
end 
```

**项目 - 用户 - 连接表**

```
class CreateTableProjectsUsers < ActiveRecord::Migration
  def self.up
    create_table :projects_users,:id => false  do |t|
      t.integer :project_id
      t.integer :user_id
    end
  end

  def self.down
     drop_table :projects_users
  end
end 
```******

# c# - 详细信息视图不使用数据源

> ID：12534130
> 
> 赞同：0
> 
> 时间：2012-09-21T16:06:45.817
> 
> 标签：c#, asp.net, .net, detailsview

我正在尝试使用详细信息视图。

这是我的数据源 ![在此处输入图像描述](../Images/c203a9f30dc92a34ba5051cba6ce8ea7.png)

我是这样传递的。

```
IEnumerable<DataRow> row = Connection.GetDataTable([sql]).AsEnumerable();

this.dvOrderInformation.DataSource = row;
this.dvOrderInformation.DataBind(); 
```

我像这样绑定它。

```
<asp:DetailsView ID="dvOrderInformation" runat="server" Height="50px" Width="100%" AutoGenerateRows="false">
    <HeaderTemplate>
        Order
    </HeaderTemplate>
    <FieldHeaderStyle Width="150px" />
    <Fields>
        <asp:BoundField HeaderText="Order Number:" DataField="OrderID" />
    </Fields>
</asp:DetailsView> 
```

当我尝试这个时，我得到了消息。

```
DataBinding: 'System.Data.DataRow' does not contain a property with the name 'OrderID'. 
```

或者

```
A field or property with the name 'OrderID' was not found on the selected data source. 
```

如果我将它直接绑定到 DataGrid 它工作正常。任何想法我在这里做错了什么。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:27:25.173

You can adjust with

```
this.dvOrderInformation.DataSource = Connection.GetDataTable([sql]);
this.dvOrderInformation.DataBind(); 
```

Nota : it's normal row don't contain column, so he don't find column name

DataField="OrderID" is `DataColumn.Name`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-25T08:26:39.707

找到了解决方案。

```
this.dvOrderInformation.DataSource = Connection.GetDataSet([sql]);
this.dvOrderInformation.DataBind() 
```

关键是我必须使用 DataSet 而不是 DataTable。

# apache-flex - 取消 Flex 双向绑定更改

> ID：12534131
> 
> 赞同：0
> 
> 时间：2012-09-21T16:06:45.733
> 
> 标签：apache-flex, data-binding, binding, flex4

实现“取消”按钮功能的最佳方式是什么（比如对于使用一些共享模型和双向绑定的对话框）？

将对象中的每个字段复制到“还原” obj 中的明显解决方案违背了目的（可能只是在保存时手动设置每个值）。我过去使用过 ObjectUtil.copy/clone，但我不知道包含列表等的更复杂数据类型的所有注意事项。（深拷贝与浅拷贝）

有没有更好的/其他方法？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:39:38.340

我遇到了内置`ObjectUtil.clone()`和`ObjectUtil.copy()`方法的问题。这就是为什么我创建了自己的版本，它使用自省而不是使用 ByteArray。

一种方法将所有属性从一个实例复制到另一个实例：

```
 private static const rw:String = "readwrite";

    public static function copyProperties(source:Object, target:Object):void {
        if (!source || !target) return;

        //copy properties declared in Class definition
        var sourceInfo:XML = describeType(source);
        var propertyLists:Array = [sourceInfo.variable, sourceInfo.accessor];

        for each (var propertyList:XMLList in propertyLists) {
            for each (var property:XML in propertyList) {
                if (property.@access == undefined || property.@access == rw) {
                    var name:String = property.@name;
                    if (target.hasOwnProperty(name)) target[name] = source[name];
                }
            }
        }

        //copy dynamic properties
        for (name in source) 
            if (target.hasOwnProperty(name)) 
                target[name] = source[name];
    } 
```

另一个通过将对象的所有属性复制到新实例来创建对象的完整克隆：

```
 public static function clone(source:Object):* {
        var Clone:Class = getDefinitionByName(getQualifiedClassName(source)) as Class;
        var clone:* = new Clone();
        copyProperties(source, clone);
        return clone;
    } 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:41:58.657

请阅读[AS3 - 克隆对象](https://stackoverflow.com/questions/8461988/as3-clone-an-object)

对于复杂的值对象，最好使用 ByteArray 类进行创建克隆。但请确保您为要克隆的所有类使用 [RemoteClass] 或 registerClassAlias。

# javascript - 分配功能后如何删除onmouseout事件？

> ID：12534133
> 
> 赞同：3
> 
> 时间：2012-09-21T16:06:56.557
> 
> 标签：javascript, svg, d3.js

我有一个问题，我正在为 onmouseout 事件分配一个函数，但是在运行该事件之后，我需要将其删除。非常感谢您的帮助。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T16:15:20.710

这取决于您的代码，如果您使用 d3 执行此操作，那么您可以说

在您的 onmouseout 事件函数中：

```
element.on("mouseout",func);

function func(){
    /*do your stuff*/
    element.on("mouseout",null);
} 
```

如果您通过事件属性绑定事件，`<div onmouseout="..." >`那么您必须重构它。在这种情况下，只需使用 d3`on()`函数来绑定事件。

如果您想将多个处理程序绑定到同一个事件，您可以使用命名空间：通过附加`.name`到事件，您可以更具体地处理它们。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T16:10:59.103

我假设你用[`d3`'s `on`event](https://github.com/mbostock/d3/wiki/Selections#wiki-on)添加了你的事件监听器。他们删除事件的文档是这样的：

> 如果已在选定元素上为相同类型注册了事件侦听器，则在添加新侦听器之前删除现有侦听器。要为同一事件类型注册多个侦听器，该类型后面可以跟一个可选的命名空间，例如“click.foo”和“click.bar”。要删除侦听器，请将 null 作为侦听器传递。

我无法更正您的代码，因为您没有添加任何代码。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:29:06.830

Another way is to use jQuery:

```
$(element).bind("mouseout", myFunction);
$(element).unbind("mouseout"); 
```

[jQuery unbind](http://api.jquery.com/unbind/) [jQuery bind](http://api.jquery.com/bind/)

You can also use an optional namespace in the first parameter like:

```
"mouseout.myNamespace" 
```

With this namespace you can bind/unbind multiple events of the same kind.

Another thing that maybe is interesting to you: [jQuery stopPropagation](http://api.jquery.com/event.stopPropagation/)

# python - Crontab 不执行 Python 脚本？

> ID：12534135
> 
> 赞同：53
> 
> 时间：2012-09-21T16:07:08.297
> 
> 标签：python, cron

我的 python 脚本没有在我的 crontab 下运行。

我把它放在顶部的python脚本中：

```
#!/usr/bin/python 
```

我试过这样做：

```
chmod a+x myscript.py 
```

添加到我的`crontab -e`：

```
SHELL=/bin/bash
PATH=/sbin:/bin:/usr/sbin:/usr/bin
MAILTO=""

* * * * * /home/me/project/myscript.py 
```

我的 /var/log/cron 文件说：

```
Sep 21 11:53:02 163-dhcp /USR/SBIN/CROND[2489]: (me) CMD (/home/me/project/myscript.py) 
```

但是我的脚本没有运行，因为当我检查我的 sql 数据库时，没有任何改变。如果我像这样直接在终端中运行它：

```
python /home/me/project/myscript.py 
```

我得到正确的结果。

这是`myscript.py`：

```
#!/usr/bin/python

import sqlite3

def main():
    con = sqlite3.connect("test.db")

    with con:

        cur = con.cursor()

        cur.execute("CREATE TABLE IF NOT EXISTS testtable(Id INTEGER PRIMARY KEY, Name TEXT)")

        cur.execute("INSERT INTO testtable(Name) VALUES ('BoB')")

        cur.execute("SELECT * FROM testtable")

        print cur.fetchall()    

if __name__ == "__main__":
    main() 
```

根据评论：是的，`/usr/bin/python`存在。我也可以直接使用`/home/me/project/myscript.py`. `/usr/bin/python /home/me/project/myscript.py`作品。所以我不相信这是原因？

* * *

## 回答 #1

> 赞同：51
> 
> 时间：2018-01-26T00:30:08.787

互联网上有很多一半的答案，所以我想我会捕捉到这个以节省其他人一些时间。

首先，cronjob 在告诉您失败的地方方面做得很差。我建议将 stderr 输出发送到这样的日志文件：

# crontab 命令：

```
# m h  dom mon dow   command
* * * * * /path/to/your_file.sh >> out.txt  2>&1 
```

由于这可能是以用户身份运行命令，请检查日志文件的主目录。请注意，此脚本每分钟运行一次，这有利于调试。

下一个问题是您可能有路径问题......因为脚本可能正在尝试从您的主目录执行。此脚本设置当前目录，将其回显到文件，然后运行您的程序。

试试这个 ：

# 脚本文件

```
#!/bin/sh
cd "$(dirname "$0")";
CWD="$(pwd)"
echo $CWD
python your_python_file.py 
```

希望这可以节省其他人一些调试时间！！！

* * *

## 回答 #2

> 赞同：41
> 
> 时间：2012-09-21T17:13:02.843

键入时会发生什么

`/home/me/project/myscript.py`入壳？

`/usr/bin/python`您可以在 crontbb 命令中明确使用吗？

您可以使用您的绝对路径`test.db` 或`cd`正确的目录然后执行您的 python 脚本吗？

这有助于在您的 python 中使用调试语句并记录一些数据。Crontab 的调试可能非常棘手。

* * *

## 回答 #3

> 赞同：17
> 
> 时间：2012-09-21T16:15:36.527

脚本可能无法启动，因为它找不到 python 解释器。Crontab 环境可能与您使用的 shell 环境有很大不同。搜索路径可能有很大不同。此外，您通过显式启动 python 解释器来测试您的脚本，而您希望 crontab 仅启动脚本。我把这一行放在我的 python 脚本的顶部：

> `\#!/bin/env python`

该行将帮助定位解释器，无论它安装在哪个目录中，只要它位于搜索路径中。

* * *

## 回答 #4

> 赞同：11
> 
> 时间：2018-09-10T09:22:21.267

这通常是因为 crontab 使用的 python 与你在 shell 中使用的不同。解决这个问题的最简单方法是：

1.  获取您在 shell 中使用的 python：

`$ which python # it may be "python3" or something else /usr/bin/python`

2.  在 crontab 文件中使用特定的 python：

`* * * * * /usr/bin/python test.py`

还想提一下，`env -i /bin/bash --noprofile --norc`在 shell 中使用可以让您拥有与 crontab 使用的环境相同的环境，这对调试非常有帮助。

* * *

## 回答 #5

> 赞同：9
> 
> 时间：2014-11-26T14:39:27.040

通常，像这样的 crontab 问题是由 PATH 环境变量比普通用户的 PATH 环境更具限制性/不同引起的。由于您的 shell 使用 PATH 环境来查找可执行文件（例如，当您在 shell 提示符下键入“python”时在 /usr/bin 中找到 /usr/bin/python），当 PATH 缺少常见位置时，例如 /usr/ bin 或 /usr/sbin，您的 cron 作业将失败。这咬了我很多次。简单的解决方法是在需要它的任何命令之前，自己在 crontab 文件顶部附近显式设置 PATH。因此，只需像往常一样编辑 crontab 并在顶部附近添加类似这样的内容（如果您的二进制文件不在以下路径之一中，则需要在冒号后添加它）：

```
PATH=/usr/local/bin:/usr/bin:/usr/local/sbin:/usr/sbin 
```

或者，只需在 crontab 中使用二进制文件和脚本的绝对路径。

* * *

## 回答 #6

> 赞同：3
> 
> 时间：2014-12-31T13:18:21.053

我有同样的问题。尽管手动执行的脚本可以正常工作，但在 crontab 中，上面提到的选项根本没有工作。我已经将我的脚本从 /home/user/script_directory/ 移动到 /opt/scripts/ 并且它开始工作了。问题的可能原因应该是对位于主目录中的子文件夹的访问（读取）权限。

* * *

## 回答 #7

> 赞同：3
> 
> 时间：2017-12-14T01:40:14.633

处理此问题的最简单方法是将 python 安装的路径添加到 shell 脚本顶部的 PATH 中。就像是：

```
#!/usr/bin/env bash
export PATH="{path to your python installation}:$PATH"
python {python_file_name}.py 
```

正如@Shargors 所说，您可以通过以下方式对其进行测试

```
env -i /bin/bash --noprofile --norc 
```

* * *

## 回答 #8

> 赞同：3
> 
> 时间：2018-02-20T19:21:59.490

试试这个

```
* * * * * cd <directory_where_python_file_is> && bin/app etc/app_defaults.yaml 
```

cron 存在一些路径问题。因此，当您使用 python 文件移动到目录时，cron 就像魅力一样！

* * *

## 回答 #9

> 赞同：3
> 
> 时间：2018-09-06T21:40:42.733

如果您将 anaconda 用于 python，那么使用的路径将是：

```
/home/username/anaconda3/bin/python test.py 
```

* * *

## 回答 #10

> 赞同：1
> 
> 时间：2013-09-26T15:23:24.630

虽然这里的答案清楚地描述了问题和解决方案，但我想添加另一个对我有帮助的答案。

如果您的 python 脚本正在调用数据库，请确保您可以在 cron 环境中正确连接到数据库（以识别 cron 环境--> [https://askubuntu.com/questions/23009/reasons-why-crontab-不工作](https://askubuntu.com/questions/23009/reasons-why-crontab-does-not-work)）。我有一个可以从 shell 运行的文件，但不是作为 crontab，除非我从 python 脚本中以 root 身份连接到数据库。

* * *

## 回答 #11

> 赞同：1
> 
> 时间：2016-01-25T12:15:24.867

有时我面临同样的问题。无论我按照这里的建议尝试什么，我都可能得不到结果。

所以我开始编写“触发” bash 脚本如下（我们将其命名为 trigger.sh）：

```
#!/bin/bash

/full_path/python_script.py 
```

我正在从 crontab 调用 trigger.sh ，一切都很好。

编辑：当然，不要忘记执行以下操作（赋予执行权）：

```
$chmod +x python_script.py
$chmod +x trigger.sh 
```

* * *

## 回答 #12

> 赞同：0
> 
> 时间：2012-09-21T17:20:16.340

尝试放入您的 crontab：

```
* * * * * python /path/to/your/script.py 
```

而不是

```
* * * * * /path/to/your/script.py 
```

shebang线`#!/usr/bin/env python`也在某些环境中。**env**是一个可执行文件，您必须知道它与“ `$ which env`”一起存在的位置。

* * *

## 回答 #13

> 赞同：0
> 
> 时间：2012-09-21T18:12:04.820

*   cron 用户（脚本失败时）和终端用户（脚本成功时）是否相同？
*   [您可以将作业输出重定向到Cron Job Log - How to Log](https://stackoverflow.com/questions/4811738/cron-job-log-how-to-log)中提到的某个文件吗？. 我们可以看看这是否有帮助。

* * *

## 回答 #14

> 赞同：0
> 
> 时间：2019-09-21T20:43:20.997

我正在研究的项目包括`paramiko lib`，当我从它运行 Check_.py 时`cmdlin`它运行良好，但是当我设置 crontab 时它失败并出现错误`no module name paramiko`。

所以简而言之：
- 安装了两个不同的 python 版本 3.7 和 2.4，所以我曾经`whreris python3`定位 python 路径`/usr/local/bin/python3.7m`，所以用路径替换`python`将解决问题。

### 例子

```
* * * * * cd /home/MKhair/hlthchk/BR/ && /usr/local/bin/python3.7m /home/MKhair/hlthchk/BR/Check_.py
* * * * * cd [ path-to-the-script-dir] && [path-to-python] [path-to-the-script] 
```

* * *

## 回答 #15

> 赞同：0
> 
> 时间：2020-09-18T19:35:01.143

这可能对某人有帮助。我遇到了同样的问题（或至少是类似的问题），帮助我的是通过运行以下命令获取 Python 的路径（注意你想要使用 python、python3 等的版本）：

```
which python3 
```

然后，我在我的 crontab 文件中将 python3 替换为 python3 的完整路径。

# php - 在 PHP 中以数组形式返回 mysqli 查询结果

> ID：12534137
> 
> 赞同：1
> 
> 时间：2012-09-21T16:07:14.413
> 
> 标签：php, mysqli

我已经在互联网上搜索了一段时间，但是由于我是 MySQLi 的新手，我自己无法解决这个问题。到目前为止，这是我的代码。我想将结果作为数组返回。

```
function myFunction($u_id, $mysqli){
   $userinfo = "SELECT email, name, street, placename FROM users WHERE u_id = ? LIMIT 1";
   if($stmt = $mysqli->prepare($userinfo)) {
      $stmt->bind_param('i', $u_id);
      $stmt->execute();
      if(!$stmt->execute()) { 
            echo $stmt->error.' in query: '.$userinfo; 
      } else {
        //this is what i found somewhere on the internet, and it gives me an array with the right keys but empty values.
        $meta = $stmt->result_metadata();
        while ($field = $meta->fetch_field()) { 
            $var = $field->name; 
            $$var = null; 
            $parameters[$var] = &$$var; 
        } 
        return $parameters;
    }
    $stmt->close();
}} 
```

希望有人可以帮助我使此代码正常工作，或帮助我找到替代方法。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:08:36.153

你有没有看过使用`fetch_array`

[http://php.net/manual/en/mysqli-result.fetch-array.php](http://php.net/manual/en/mysqli-result.fetch-array.php)

使用您的代码

```
function myFunction($u_id, $mysqli){
  $userinfo = "SELECT email, name, street, placename FROM users WHERE u_id = ? LIMIT 1";
  if($stmt = $mysqli->prepare($userinfo)) 
  {
    $stmt->bind_param('i', $u_id);
    $stmt->execute();
    if(!$stmt->execute()) 
        { 
            echo $stmt->error.' in query: '.$userinfo; 
        }
    else {
        //this is what i found somewhere on the internet, and it gives me an array with the right keys but empty values.
        $parameters = array();
        while ($row = $stmt->fetch_assoc()) {
          $parameters[] = $row;
        }
        $stmt->close(); 
        return $parameters;
    }
    $stmt->close();
  }
} 
```

# ruby-on-rails - 如何在 Rails 上为新用户设置或分配预定义属性

> ID：12534143
> 
> 赞同：0
> 
> 时间：2012-09-21T16:07:34.417
> 
> 标签：ruby-on-rails, attributes, user-profile

首先，如果这是一个新手问题，我深表歉意。我只能在业余时间编码，所以我经常在每个项目中从头开始重新学习。

我有一个 Class, `Person`，其属性`name`为 ,`birth-date`和`gender`，所以我可以创建一个 24 岁的男性 Michael 和一个 17 岁的女性 Belinda。

但是，还有其他隐藏的预定义属性应该根据年龄和性别自动分配给这些人。它们不是由人在创建时定义的，用户以后也不能编辑。

因此，例如，我们可以有隐藏属性`favorite-book`和`favorite-movie`，它们会`Person`根据 18 岁以下的男性、18-40 岁的男性或 40 岁以上的男性而有所不同；或 18 岁以下的女性、18-40 岁的女性或 40 岁以上的女性。

我该怎么办？我应该在配置文件中创建这些属性`Person`，而不是在界面上显示它们，而是根据输入自动填写它们吗？或者将这些其他属性创建为“类别”之类的东西，并将人员分配给其中一个？请记住，我必须经常在界面中使用此信息，并且人们应该随着年龄的增长自动更改组。

另外，在 Rails 中如何做到这一点？有人告诉我“使用哈希”，但我不清楚这种方法的具体细节。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:19:53.107

我认为您的第一个建议应该可以正常工作“在人员配置文件中创建这些属性，但不在界面上显示它们，而是根据输入自动填写它们”。除非您试图说明这些额外数据是否复杂或庞大，否则将其存储在 Person 模型中应该没问题。这样的实现将如下所示：

```
class Person < ActiveRecord::Base
  after_validation :assign_favorites, :on => :create

  def assign_favorites
    if self.age < 18 && self.sex == 'male'
      self.favorite_book = 'Hunger Games'
    elsif self.age >= 18 && self.sex == 'male'
      ...
    end
  end
end 
```

# performance - 何时使用各种语言编译指示和优化？

> ID：12534145
> 
> 赞同：15
> 
> 时间：2012-09-21T16:07:43.823
> 
> 标签：performance, optimization, haskell, pragma

我对 haskell 有一定的了解，但我总是不确定应该使用什么样的编译指示和优化以及在哪里使用。像

*   比如何时使用`SPECIALIZE`pragma 以及它有什么性能提升。
*   在哪里使用`RULES`。我听说人们正在考虑不触发的特定规则？我们如何检查？
*   什么时候使函数的参数严格，什么时候有帮助？我知道使参数严格会使参数被评估为正常形式，那么为什么我不应该对所有函数参数添加严格性呢？我该如何决定？
*   如何查看和检查我的程序中是否存在空间泄漏？构成空间泄漏的一般模式是什么？
*   如何查看是否存在懒惰过多的问题？我总是可以检查堆分析，但我想知道懒惰伤害的一般原因、例子和模式是什么？

是否有任何关于高级优化（无论是在较高级别还是在非常低级别）的资源，特别是针对 haskell 的？

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-09-21T17:27:15.997

> 比如何时使用`SPECIALIZE`pragma 以及它有什么性能提升。

如果你有一个（类型类）多态函数，你让编译器专门化一个函数，并期望它经常在类的一个或几个实例上被调用。

专业化删除了使用它的字典查找，并且通常可以进一步优化，类成员函数通常可以被内联，并且它们受到严格性分析，两者都可能带来巨大的性能提升。如果唯一可能的优化是消除字典查找，那么收益通常不会很大。

从 GHC-7 开始，给函数一个`{-# INLINABLE #-}`pragma 可能更有用，这使得它的（几乎没有改变，执行一些规范化和去糖）源在接口文件中可用，所以函数可以被专门化，甚至可能内联在呼叫站点。

> 在哪里使用`RULES`。我听说人们正在考虑不触发的特定规则？我们如何检查？

您可以使用`-ddump-rule-firings`命令行选项检查触发了哪些规则。这通常会转储大量已触发的规则，因此您必须搜索一下您自己的规则。

你使用规则

*   当您对特殊类型的函数有更高效的版本时，例如

    ```
    {-# RULES
    "realToFrac/Float->Double"  realToFrac   = float2Double
      #-} 
    ```

*   当某些函数可以替换为特殊参数的更有效版本时，例如

    ```
    {-# RULES
    "^2/Int"        forall x. x ^ (2 :: Int) = let u = x in u*u
    "^3/Int"        forall x. x ^ (3 :: Int) = let u = x in u*u*u
    "^4/Int"        forall x. x ^ (4 :: Int) = let u = x in u*u*u*u
    "^5/Int"        forall x. x ^ (5 :: Int) = let u = x in u*u*u*u*u
    "^2/Integer"    forall x. x ^ (2 :: Integer) = let u = x in u*u
    "^3/Integer"    forall x. x ^ (3 :: Integer) = let u = x in u*u*u
    "^4/Integer"    forall x. x ^ (4 :: Integer) = let u = x in u*u*u*u
    "^5/Integer"    forall x. x ^ (5 :: Integer) = let u = x in u*u*u*u*u
      #-} 
    ```

*   当根据一般规律重写表达式时可能会产生更好优化的代码，例如

    ```
    {-# RULES
    "map/map"  forall f g. (map f) . (map g) = map (f . g)
      #-} 
    ```

后一种风格的广泛使用`RULES`在融合框架中，例如在[`text`](http://hackage.haskell.org/package/text)库中，对于 中的列表函数，使用规则实现[`base`](http://hackage.haskell.org/package/base)了不同类型的融合（融合）。`foldr/build`

> 什么时候使函数的参数严格，什么时候有帮助？我知道使参数严格会使参数被评估为正常形式，那么为什么我不应该对所有函数参数添加严格性呢？我该如何决定？

使参数严格将确保它被评估为*弱头范式*，而不是范式。

您不要使所有参数都严格，因为某些函数的某些参数必须是非严格的才能工作，而如果所有参数都严格，有些函数的效率会降低。

例如，它的第二个参数必须是非严格的，才能在无限列表上工作，更一般地说，每个函数在第二个参数中[必须](https://stackoverflow.com/a/12429690/1011995) 是非严格的，才能在无限列表上工作。在有限列表上，在第二个参数中使用 non-strict 函数可以显着提高效率 ( )。`partition``foldr``foldr (&&) True (False:replicate (10^9) True)`

如果您知道必须先评估该论点，然后才能完成任何有价值的工作，那么您就可以使论点变得严格。在很多情况下，GHC 的严格度分析器可以自己完成，但当然不是全部。

一个非常典型的情况是循环或尾递归中的累加器，其中增加严格性可以防止在途中构建巨大的 thunk。

我不知道在哪里增加严格的硬性规则，对我来说这是一个经验问题，一段时间后你就会知道在哪些地方增加严格可能有帮助，在哪里有害。

根据经验，对小数据（如`Int`）进行评估是有意义的，但也有例外。

> 如何查看和检查我的程序中是否存在空间泄漏？构成空间泄漏的一般模式是什么？

第一步是使用该`+RTS -s`选项（如果该程序已启用 rtsopts 链接）。这显示了总体使用了多少内存，并且您通常可以判断您是否有泄漏。通过使用该选项运行程序可以获得更多信息输出，该`+RTS -hT`选项生成一个可以帮助定位空间泄漏的堆配置文件（此外，该程序需要与启用的 rtsopts 链接）。

如果需要进一步分析，则需要在启用分析的情况下编译程序（`-rtsops -prof -fprof-auto`在较旧的 GHC 中，该`-fprof-auto`选项不可用，该`-prof-auto-all`选项是那里最接近的对应关系）。

然后使用各种分析选项运行它并查看生成的堆配置文件。

空间泄漏的两个最常见原因是

*   太懒惰
*   过于严格

第三位可能是不需要的共享，GHC 几乎没有消除常见的子表达式，但它偶尔会共享长列表，即使在不需要的地方也是如此。

为了找到泄漏的原因，我再次知道没有硬性规定，有时，可以通过在一个地方增加严格性或在另一个地方增加惰性来修复泄漏。

> 如何查看是否存在懒惰过多的问题？我总是可以检查堆分析，但我想知道懒惰伤害的一般原因、例子和模式是什么？

通常，在可以逐步建立结果的情况下需要惰性，而在处理完成之前无法交付任何结果的情况下不需要惰性，例如在左折叠或通常在尾递归函数中。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T18:34:23.177

我建议阅读有关[Pragmas](http://www.haskell.org/ghc/docs/latest/html/users_guide/pragmas.html "GHC 编译指示")和[Rewrite Rules](http://www.haskell.org/ghc/docs/latest/html/users_guide/rewrite-rules.html "GHC 重写规则")的 GHC 文档，因为它们解决了您关于 SPECIALIZE 和 RULES 的许多问题。

简要回答您的问题：

*   SPECIALIZE 用于强制编译器为特定类型构建多态函数的专用版本。优点是在这种情况下应用该函数将不再需要字典。缺点是会增加程序的大小。专业化对于在“内部循环”中调用的函数特别有价值，而对于不经常调用的顶级函数来说，它基本上是无用的。有关与 INLINE 的交互，请参阅[GHC 文档](http://www.haskell.org/ghc/docs/latest/html/users_guide/pragmas.html "GHC 编译指示")。

*   RULES 允许您指定您知道有效但编译器无法自行推断的重写规则。常见的例子是`{-# RULES "mapfusion" forall f g xs. map f (map g xs) = map (f.g) xs #-}`，它告诉 GHC 如何融合`map`。由于对 INLINE 的干扰，让 GHC 使用规则可能会很挑剔。 [7.19.3](http://www.haskell.org/ghc/docs/latest/html/users_guide/rewrite-rules.html "GHC 重写规则")涉及如何避免冲突以及如何强制 GHC 使用规则，即使它通常会避免它。

*   对于尾递归函数中的累加器之类的东西，严格的参数是最重要的。您知道该值最终将被完全计算，并且建立一堆闭包来延迟计算完全违背了目的。每当函数可能应用于必须延迟处理的值（如无限列表）时，自然必须避免强制严格。一般来说，最好的想法是最初只在明显有用的地方（如累加器）强制严格，然后在分析显示需要时添加更多。

*   我的经验是，大多数停止显示的空间泄漏来自非常大的数据结构中的惰性累加器和未评估的惰性值，尽管我确信这是特定于您正在编写的程序类型的。尽可能使用未装箱的数据结构可以解决很多问题。

*   除了惰性导致空间泄漏的情况之外，应该避免的主要情况是在 IO 中。延迟处理资源本质上会增加所需资源的挂钟时间。这可能对缓存性能不利，如果其他人想要独占权使用相同的资源，这显然很糟糕。

# xcode - cellForRowAtIndexPath 文本未显示在单元格中

> ID：12534159
> 
> 赞同：0
> 
> 时间：2012-09-21T16:08:33.763
> 
> 标签：xcode, uitableview

有一个包含三行的表格视图，但 cellForRowAtIndexPath 中的文本未显示在屏幕上。

知道有什么问题吗？

这是代码

AllListsViewController.m

```
#import "AllListsViewController.h"

@interface AllListsViewController ()

@end

@implementation AllListsViewController

- (id)initWithStyle:(UITableViewStyle)style
{
    self = [super initWithStyle:style];
    if (self) {
        // Custom initialization
    }
    return self;
}

- (void)viewDidLoad
{
    [super viewDidLoad];

    // Uncomment the following line to preserve selection between presentations.
    // self.clearsSelectionOnViewWillAppear = NO;

    // Uncomment the following line to display an Edit button in the navigation bar for this view controller.
    // self.navigationItem.rightBarButtonItem = self.editButtonItem;
}

- (void)viewDidUnload
{
    [super viewDidUnload];
    // Release any retained subviews of the main view.
    // e.g. self.myOutlet = nil;
}

- (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
{
    return (interfaceOrientation == UIInterfaceOrientationPortrait);
}

#pragma mark - Table view data source

- (NSInteger)tableView:(UITableView *)tableView numberOfRowsInSection:(NSInteger)section
{
    return 3;
}

- (UITableViewCell *)tableView:(UITableView *)tableView cellForRowAtIndexPath:(NSIndexPath *)indexPath
{
    static NSString *CellIdentifier = @"Cell";
    UITableViewCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier];

    if (cell == nil) {
        cell = [[UITableViewCell alloc]initWithStyle:UITableViewCellStyleDefault reuseIdentifier:CellIdentifier];
    }

    cell.textLabel.text = [NSString stringWithFormat:@"List %d", indexPath.row];
    return cell;
}

/*
// Override to support conditional editing of the table view.
- (BOOL)tableView:(UITableView *)tableView canEditRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the specified item to be editable.
    return YES;
}
*/

/*
// Override to support editing the table view.
- (void)tableView:(UITableView *)tableView commitEditingStyle:(UITableViewCellEditingStyle)editingStyle forRowAtIndexPath:(NSIndexPath *)indexPath
{
    if (editingStyle == UITableViewCellEditingStyleDelete) {
        // Delete the row from the data source
        [tableView deleteRowsAtIndexPaths:@[indexPath] withRowAnimation:UITableViewRowAnimationFade];
    }   
    else if (editingStyle == UITableViewCellEditingStyleInsert) {
        // Create a new instance of the appropriate class, insert it into the array, and add a new row to the table view
    }   
}
*/

/*
// Override to support rearranging the table view.
- (void)tableView:(UITableView *)tableView moveRowAtIndexPath:(NSIndexPath *)fromIndexPath toIndexPath:(NSIndexPath *)toIndexPath
{
}
*/

/*
// Override to support conditional rearranging of the table view.
- (BOOL)tableView:(UITableView *)tableView canMoveRowAtIndexPath:(NSIndexPath *)indexPath
{
    // Return NO if you do not want the item to be re-orderable.
    return YES;
}
*/

#pragma mark - Table view delegate

- (void)tableView:(UITableView *)tableView didSelectRowAtIndexPath:(NSIndexPath *)indexPath
{
    [self performSegueWithIdentifier:@"ShowChecklist" sender:nil];
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T23:17:03.250

有很多事情是你应该做的。第一个符合 UITableViewDelegate 和 UITableViewDataSource 协议（使用`<Protocol_Name_One, Protocol_Name_Two>`语法）。然后你必须调用（在你的`viewDidLoad`方法中）：

```
[theTableView setDelegate:self];
[theTableView setDataSource:self]; 
```

# mysql - Mysql Sum 不同的行

> ID：12534162
> 
> 赞同：2
> 
> 时间：2012-09-21T16:08:36.153
> 
> 标签：mysql, left-join, aggregate-functions

我想对 3 个表中 3 列的值求和

我的**查询**：

```
SELECT sum(s.paid_money+d.paid_money+e.paid_money)
       FROM payment_dates AS dates
       LEFT JOIN supplier_payments AS s 
                ON dates.id = s.payment_date_id
       LEFT JOIN daily_payments AS d 
                ON dates.id = d.payment_date_id
       LEFT JOIN emp_payments AS e 
                ON dates.id = e.payment_date_id; 
```

当我通过以下查询从 3 个表中选择**paid_money时：**

```
 SELECT dates.id, s.paid_money as sup, d.paid_money as daily, e.paid_money as emp  
       FROM payment_dates AS dates  
       LEFT JOIN supplier_payments AS s 
                ON dates.id = s.payment_date_id
       LEFT JOIN daily_payments AS d 
                ON dates.id = d.payment_date_id
       LEFT JOIN emp_payments AS e 
                ON dates.id = e.payment_date_id; 
```

-**输出**
id sup daily emp
'1', NULL, NULL, NULL
'2', '75', '37', NULL
'2', '75', '255', NULL
'2', '669', '37'、NULL
'2'、'669'、'255'、NULL
'3'、'575'、'65'、NULL
'3'、'575'、'909'、NULL
'3'、'575 '，'160'， NULL'3'，'575'，'
60 '，NULL'3'
，'575'，'100'，
NULL'3'，'575'，'624.5'，NULL'3'
， '575'、'70'、NULL
'3'、'423'、'65'、NULL
'3'、'423'、'909'，NULL'3
'，'423'，'160'，NULL'3
'，'423'，'60'，NULL'3
'，'423'，'100'，NULL'3
'，'423' , '624.5', NULL
'3', '423', '70', NULL

*   例如`Id=2 duplicate 4 time`
*   并且 sup 的值为 75 重复两次和 669 重复两次。
*   与`id=3`sup 的`575`重复`7`时间。
*   **我只想总结每个值中的一个**
*   像 sum(75+669+575+423)
    **和最终输出**
*   `Like SUM(SUM(sup)+SUM(daily)+SUM(emp))` **WHERE** dates.pay_date =`'some date'`

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-22T04:07:37.753

你的意思是这样的吗？

```
SELECT dates.id, 
((SELECT SUM(COALESCE(s.paid_money,0)) FROM supplier_payments WHERE s.payment_date_id = dates.id )+
(SELECT SUM(COALESCE(d.paid_money,0)) FROM daily_payments WHERE d.payment_date_id = dates.id ) +
(SELECT SUM(COALESCE(e.paid_money,0)) FROM emp_payments WHERE e.payment_date_id = dates.id )) as total
FROM payment_dates AS dates 
```

如果这不是您的意思，请提供源表中数据的简要示例（即供应商付款daily_payments 和emp_payments）以及预期结果应该是什么。

**更新**

我已经用这样的表结构构建了一个示例数据库：

```
CREATE TABLE `daily_payments` (
 `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
 `paid_money` decimal(12,2) NOT NULL,
 `payment_date_id` int(11) DEFAULT NULL,
 PRIMARY KEY (`id`)
);

CREATE TABLE `emp_payments` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `paid_money` decimal(12,2) DEFAULT NULL,
  `payment_date_id` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`)
);

CREATE TABLE `payment_dates` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `pay_date` date NOT NULL,
  PRIMARY KEY (`id`)
);

CREATE TABLE `supplier_payments` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT,
  `payment_date_id` int(11) DEFAULT NULL,
  `paid_money` decimal(12,2) NOT NULL,
  PRIMARY KEY (`id`)
); 
```

插入一些随机数据后，此查询似乎返回了您想要的输出：

```
SELECT id,
COALESCE((SELECT SUM(`daily_payments`.`paid_money`) FROM `daily_payments` WHERE    `payment_date_id`=`payment_dates`.id),0) + 
COALESCE((SELECT SUM(`emp_payments`.`paid_money`) FROM `emp_payments` WHERE `payment_date_id`=`payment_dates`.id),0) + 
COALESCE((SELECT SUM(`supplier_payments`.`paid_money`) FROM `supplier_payments` WHERE `payment_date_id`=`payment_dates`.id),0) as sum_of_payments
FROM payment_dates WHERE pay_date = '2012-09-23' 
```

COALESCE 功能是为了避免在一个或多个表中找不到记录的情况下出现 NULL 值。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:18:08.080

你是这个意思？

```
SELECT sum(s.paid_money+d.paid_money+e.paid_money)
       FROM payment_dates AS dates
       LEFT JOIN supplier_payments AS s 
                ON dates.id = s.payment_date_id
       LEFT JOIN daily_payments AS d 
                ON dates.id = d.payment_date_id
       LEFT JOIN emp_payments AS e 
                ON dates.id = e.payment_date_id;
       GROUP BY dates.id 
```

# oracle - Oracle - 创建没有并行选项的表

> ID：12534167
> 
> 赞同：6
> 
> 时间：2012-09-21T16:08:53.880
> 
> 标签：oracle, plsql, plsqldeveloper, oracle-sqldeveloper

出于某种原因，当我尝试在一个大表（4000 万〜记录）上进行 CTAS（创建表作为选择）时，我在 v$session **18**活动会话中看到我的 sql 语句。

当我试图提示优化器使用更少的 CPU 时

```
create table table_name parallel (degree 2) as 
       select * from large_table; 
```

我看到 6 个活动会话。

在 3 级时，我看到**8**个活动会话。我尝试了**默认学位**，但它也创建了 18 个会话。

之前在代码中，在执行 CREATE TABLE 语句之前，我在会话中更改了一些属性：

```
alter session set workarea_size_policy = manual;
alter session set hash_area_size = 1048576000; 
```

我想在 1 个会话中创建表，我该怎么做？

谢谢 ！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T18:49:23.237

在 CTAS 语句的 select 子句中使用 [NO_PARALLEL 提示](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements006.htm#sthref607) 。另请参阅[有关并行提示的注释](http://docs.oracle.com/cd/E11882_01/server.112/e26088/sql_elements006.htm#CHDGEGFI)

```
create table t as
select /*+ NO_PARALLEL */ * 
from large_table; 
```

### 调查与测试：

SQL*Plus 版本和 Oracle 数据库版本：

```
SQL*Plus: Release 11.1.0.6.0 - Production on Fri Sep 21 11:56:58 2012

Copyright (c) 1982, 2007, Oracle.  All rights reserved.

Connected to:
Oracle Database 11g Enterprise Edition Release 11.2.0.3.0 - 64bit Production
With the Partitioning, Real Application Clusters, Automatic Storage Management, OLAP,
Data Mining and Real Application Testing options 
```

我使用两个不同的 sqlplus 进程通过不同的服务名称连接到同一个数据库。一份正在运行的 sqlplus 副本将用于执行 CTAS。sqlplus 的另一个副本将用于查询会话数。

在其他任何事情之前获取会话计数和结果的查询：

```
SQL> select service_name, count(*)
  2  from v$session
  3  where username = 'ME'
  4  group by service_name
  5  order by service_name;

SERVICE_NAME                                                       COUNT(*)
---------------------------------------------------------------- ----------
aaaaaa2                                                                   1
aaaaaa3                                                                   1 
```

创建`large_table`：

```
SQL> create table LAO as select * from all_objects;

Table created.

SQL> exec dbms_stats.gather_table_stats(user, 'LAO');

PL/SQL procedure successfully completed.

SQL> create table large_table parallel 4 as
  2  select N.N, LAO.*
  3  from LAO
  4  cross join (select level as N from dual connect by level <= 400) N
  5  /

Table created.

SQL> select to_char(count(*), 'fm999,999,999')
  2  from large_table;

TO_CHAR(COUN
------------
42,695,200 
```

由于`large_table`是用 来创建的`parallel 4`，一个简单的 CTAS 默认为 4 个工作进程，CTAS：

```
create table t as
select * from large_table; 
```

会议：

```
SERVICE_NAME                                                       COUNT(*)
---------------------------------------------------------------- ----------
aaaaaa2                                                                   5
aaaaaa3                                                                   1 
```

现在，`noparallel`表格选项。（创建一个默认情况下没有 DML 并行计划的表，但并行性`large_table`会导致 CTAS 并行运行。）

```
drop table t;
create table t noparallel as
select * from large_table; 
```

会话（SYS$BACKGROUND 在最后一个查询结束时出现，然后一直停留。我相信如果在一定时间内不需要它，它就会死掉。）：

```
SERVICE_NAME                                                       COUNT(*)
---------------------------------------------------------------- ----------
SYS$BACKGROUND                                                            1
aaaaaa2                                                                   5
aaaaaa3                                                                   1 
```

select 子句中的 NO_PARALLEL 提示确实有效：

```
drop table t;
create table t as
select /*+ NO_PARALLEL */ * from large_table; 
```

会议：

```
SERVICE_NAME                                                       COUNT(*)
---------------------------------------------------------------- ----------
SYS$BACKGROUND                                                            1
aaaaaa2                                                                   1
aaaaaa3                                                                   1 
```

最后一个 CTAS，其中创建的表默认使用多个进程，但在 CTAS 期间不会：

```
drop table t;
create table t parallel 4 as
select /*+ NO_PARALLEL */ * from large_table; 
```

会议：

```
SERVICE_NAME                                                       COUNT(*)
---------------------------------------------------------------- ----------
SYS$BACKGROUND                                                            1
aaaaaa2                                                                   1
aaaaaa3                                                                   1 
```

# java - OutOfMemory 使用 JAI 读取图像

> ID：12534169
> 
> 赞同：1
> 
> 时间：2012-09-21T16:08:59.923
> 
> 标签：java, jai

在某些图像上，使用 JAI 时出现 OutOfMemory 异常。似乎 JAI 正在尝试分配一个巨大的字节 []，可能是由于图像中的一些错误。有什么解决方法吗？如果没有，有没有办法事先检测到错误？这是一个例子：

```
URL bad = new URL("http://static4.businessinsider.com/image/505c5461ecad047a3500002b-772-598/share-of-income-to-labor.png");
RenderedOp op = JAI.create("stream", SeekableStream.wrapInputStream(url, true));
op.createInstance(); 
```

引起：java.lang.OutOfMemoryError：com.sun.media.jai.codecimpl.PNGImage.(PNGImageDecoder.java) 处 com.sun.media.jai.codecimpl.PNGImage.readChunk(PNGImageDecoder.java:554) 处的 Java 堆空间:489) 在 com.sun.media.jai.opimage.CodecRIFUtil.create(CodecRIFUtil.java:120) 在 com.sun.com.sun.media.jai.codecimpl.PNGImageDecoder.decodeAsRenderedImage(PNGImageDecoder.java:81)。 media.jai.opimage.PNGRIF.create(PNGRIF.java:56) ... 20 更多

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:22:49.503

您是否因为卡在旧的 JDK 上而使用 JAI？标准的 JDK 1.6 PNG 库没有这个问题，至少对于您提供的示例图像。

例如（在 Clojure 中，但在 JDK 1.6 中仍然使用 Java API）

```
wget http://static4.businessinsider.com/image/505c5461ecad047a3500002b-772-598/share-of-income-to-labor.png
...
2012-09-21 13:14:54 (370 KB/s) - `share-of-income-to-labor.png.1' saved [64754/64754]

user=> (.exists (java.io.File. "share-of-income-to-labor.png"))
true

user=> (javax.imageio.ImageIO/read (java.io.File. "share-of-income-to-labor.png"))
javax.imageio.IIOException: Error reading PNG image data (NO_SOURCE_FILE:0)

user=> (System/getProperty "java.version")
"1.6.0_35" 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:10:58.030

您唯一的选择是捕获错误并报告图像已损坏。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:40:27.173

您可以尝试逐渐增加堆大小。如果错误仍然存​​在，则可能是由于内存泄漏。看到这个。 [http://jadroider.blogspot.com/2012/07/java-how-to-change-jvm-memory-settings.html](http://jadroider.blogspot.com/2012/07/java-how-to-change-jvm-memory-settings.html)

# powershell - 可能停止服务 cmdlet 超时？

> ID：12534170
> 
> 赞同：17
> 
> 时间：2012-09-21T16:09:09.037
> 
> 标签：powershell, windows-services, cmdlet

我们正在使用 stop-service cmdlet 来终止我们机器上的一些服务。大多数情况下它运行良好，但是我们有一两个服务（谁没有？）偶尔表现不佳。

在这种情况下，有问题的服务之一将保持停止状态，并且 cmdlet 一遍又一遍地将其输出到控制台：

```
[08:49:21]WARNING: Waiting for service 'MisbehavingService (MisbehavingService)' to finish 
[08:49:21]stopping...
[08:49:23]WARNING: Waiting for service 'MisbehavingService (MisbehavingService)' to finish 
[08:49:23]stopping... 
[08:49:25]WARNING: Waiting for service 'MisbehavingService (MisbehavingService)' to finish 
[08:49:25]stopping... 
```

最终我们必须在任务管理器中终止服务，然后我们的脚本继续。

有没有办法让 stop-service cmdlet 在某个点之后放弃或超时？我想我们可以事后检查，如果服务仍在运行，请使用 kill-process cmdlet 提供最终结果。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2016-03-08T15:44:33.773

虽然`Stop-Service`没有超时参数，但类`WaitForStatus`上的方法`System.ServiceController`确实有一个带超时参数的重载（[在此处](https://msdn.microsoft.com/en-us/library/35st9aw1.aspx)记录）。幸运的是，这正是`Get-Service`命令返回的对象类型。

这是一个简单的函数，它接受服务名称和超时（以秒为单位）。`$true`如果服务在达到超时之前停止，并且`$false`调用超时（或者如果服务不存在） ，它将返回。

```
function Stop-ServiceWithTimeout ([string] $name, [int] $timeoutSeconds) {
    $timespan = New-Object -TypeName System.Timespan -ArgumentList 0,0,$timeoutSeconds
    $svc = Get-Service -Name $name
    if ($svc -eq $null) { return $false }
    if ($svc.Status -eq [ServiceProcess.ServiceControllerStatus]::Stopped) { return $true }
    $svc.Stop()
    try {
        $svc.WaitForStatus([ServiceProcess.ServiceControllerStatus]::Stopped, $timespan)
    }
    catch [ServiceProcess.TimeoutException] {
        Write-Verbose "Timeout stopping service $($svc.Name)"
        return $false
    }
    return $true
} 
```

* * *

## 回答 #2

> 赞同：7
> 
> 时间：2012-09-21T16:33:09.250

stop-service 没有超时选项，但是如果有依赖的服务，可能需要使用-force。

服务启动时可以定义等待提示（指定超时），但超时由服务控制。任何服务控制请求（启动、停止、暂停、恢复）都会通过服务控制管理器 (SCM) 并尊重每个服务的等待提示。如果超过等待提示，操作将失败并返回错误。

您可以使用 invoke-command 将 Stop-Service 作为作业运行并定期检查。如果尚未完成，您可以使用 Stop-Process 终止该进程并继续。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2017-05-24T18:06:33.743

如果你有 powershell 5.1，你还有：

```
Stop-Service -Name "NameOfService" -NoWait 
```

[https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.management/stop-service](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.management/stop-service)

但是，如果您没有 5.1 版本的 powershell，@JamesQMurphy 的答案看起来也不错。

# c# - CollapsiblePanelExtender 可以从后面的代码扩展吗？

> ID：12534175
> 
> 赞同：0
> 
> 时间：2012-09-21T16:09:34.363
> 
> 标签：c#

我在 gridview 的行中添加了一个复选框，单击该复选框将在该行中展开一个面板。我的 gridview 需要使用分页，所以我在页面更改之前将当前页面的状态保存在会话变量中。当用户单击返回页面时，我正在重新填充复选框，但这不会展开面板。是否可以从后面的代码中扩展面板？

```
<asp:CheckBox runat="server" Text="Order Updated Records" ID="cbUR" Visible='<%# !DBNull.Value.Equals(Eval("AnyBox"))%>' /> 
<asp:CollapsiblePanelExtender ID="cInst" runat="server" TargetControlID="inst" Collapsed="true" AutoExpand="true" AutoCollapse="false" ExpandControlID="cbUR" CollapseControlID="cbUR" />
<asp:Panel ID="Inst" runat="server">
    <asp:TextBox runat="server" ID="txtInst" TextMode="MultiLine" Width="200" />
</asp:panel> 
```

我尝试从代码中添加面板、文本框和面板扩展器，但无法使其正常工作。我在另一篇文章中读到，整个 gridview 需要从代码中加载才能正常工作。

我很想使用类似的东西

```
<asp:CollapsiblePanelExtender ID="cInst" runat="server" TargetControlID="inst" Collapsed='<%#!Convert.ToBoolean(rowItems[index].ToString()) %>' /> 
```

不使用 CollapsiblePanelExtender 并找到不同的方式来显示面板会更好吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:13:11.150

您可以尝试添加公共/受保护的方法：

```
public bool IsCollapsed(object rowId) {
    //get row by ID here and return true if collapsed
    return ....
} 
```

这将为需要展开或折叠的行返回一个值。

并像这样使用它：

```
Collapsed='<%# IsCollapsed(Eval("RowId")) %>' 
```

其中 RowId 是表示项目 ID 的属性。

# ipad - ipad - 防止滚动超过正文内容的末尾？

> ID：12534176
> 
> 赞同：0
> 
> 时间：2012-09-21T16:09:40.843
> 
> 标签：ipad, scroll

在我的 ipad 版本的网站上，如果我向下滚动到页面底部，它会一直滚动到正文的末尾大约是 ipad 屏幕的一半，所以 ipad 屏幕的顶部是我的结尾内容和下半部分是默认的ipad背景（灰色织物风格背景）。

有什么办法可以禁用它吗？

# sql - 使用 count distinct 查找字段中具有 2 个或多个不同值的记录

> ID：12534177
> 
> 赞同：5
> 
> 时间：2012-09-21T16:09:49.540
> 
> 标签：sql, oracle, count, aggregate-functions

我有一个简单的问题：如何在 SQL（确切地说是 Oracle）中使用 Count(Distinct) 来仅返回给定字段中有两个或多个不同值的行。

这通过示例更容易理解：

```
ACCOUNT     SALESMAN
123         Abc
123         Abc

246         Abc
246         Def
246         Def

369         Hij

456         Abc
456         Def 
```

**在此示例中，具有 2 个不同**销售代表的唯一帐户是 246 和 456，因此，我希望查询结果仅显示 2 个或更多销售人员共享的帐户：

```
ACCOUNT     SALESMAN
246         Abc
246         Def
456         Abc
456         Def 
```

谢谢。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T16:12:53.237

使用`having`：

```
select distinct account,salesman 
from MyTable where account in
(
    select account
    from MyTable
    group by account
    having count(distinct salesman) >= 2
)
order by 1,2 
```

这是一个[演示](http://sqlfiddle.com/#!4/a9898/1/0)。

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T16:22:09.553

正如其他答案所示，您需要使用`HAVING`，但不在指定的庄园中使用。使用后需要加入原表`HAVING`

```
SELECT  DISTINCT T.Account, T.SalesMan
FROM    T
        INNER JOIN
        (   SELECT  Account
            FROM    T
            GROUP BY Account
            HAVING COUNT(DISTINCT SalesMan) > 1
        ) Dupes
            ON Dupes.Account = T.Account 
```

**[SQL小提琴](http://sqlfiddle.com/#!4/0e047/5)**

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T16:30:43.200

您可以使用简单的 GROUP BY/HAVING 查询来做到这一点：

```
select account
from t
group by account
having count(distinct salesperson) > 1 
```

这将返回*accounts*，因此结果与您指定的不同。获得销售人员的一种方法是使用 listagg：

```
select account, listagg(salesperson, ',')
from t
group by account
having count(distinct salesperson) > 1 
```

否则，Gareth 的答案会按照您在问题中指定的方式返回结果。

# asp.net - 按下按钮时启动模式弹出扩展器

> ID：12534179
> 
> 赞同：0
> 
> 时间：2012-09-21T16:10:09.840
> 
> 标签：asp.net

我有一个按钮设置来将我的gridviews 导出到word。一切正常，除了我找不到启动/取消我`modalpopupextender`用来表明正在处理的方法。如果我添加它，单击按钮： `btnExportToWord.Attributes.Add("onclick", "StartProgressBarNoValid()")`它不会取消`modalpopupextender`

这是我使用的更新面板和 javascript 函数。

```
 function StartProgressBarNoValid() {
     var myExtender = $find('ProgressBarModalPopupExtender');
     ProgressImg = document.getElementById('MyImage');
     setTimeout("ProgressImg.src = ProgressImg.src", 10);
     myExtender.show();
     return true;
 }

<asp:UpdatePanel ID="UpdatePanel1" runat="server"> 
    <ContentTemplate> 
        <div> 
            <cc1:ModalPopupExtender ID="ProgressBarModalPopupExtender" runat="server"
            backgroundCssClass="ModalBackground" behaviorID="ProgressBarModalPopupExtender" 
            TargetControlID="hiddenField1" PopupControlID="Panel1" />
                <asp:Panel ID="Panel1" runat="server" Style="display: none; background-color: #C0C0C0;"> 
                    <img id="MyImage" src="../Images/Vista_Searching_Bar.gif" alt="" />
                    <div id="processMessage" style="width:200px;" ><br /><br />&nbsp;&nbsp; Loading...<br /><br />
                    </div>
                </asp:Panel> 
                <asp:HiddenField ID="HiddenField1" runat="server" />
        </div> 
    </ContentTemplate> 
</asp:UpdatePanel> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:19:24.270

代码隐藏`ProgressBarModalPopupExtender.Show()` 有什么问题 ？`ProgressBarModalPopupExtender.Hide()`

# android - 服务电话应答

> ID：12534184
> 
> 赞同：0
> 
> 时间：2012-09-21T16:10:32.037
> 
> 标签：android

我在我的应用程序中做了一个android服务，当我的应用程序是服务时，我想检查我的应用程序在后台运行时我的手机是否收到电话，我该怎么做？：

```
public class CallService extends Service {
    @Override
    public IBinder onBind(Intent arg0) {
        // TODO Auto-generated method stub
        return null;
    }
    public void onCreate(){
        super.onCreate();
        Toast.makeText(this, "Service Started", Toast.LENGTH_SHORT).show();
    }
    public void onDestroyed(){
        Toast.makeText(this, "Service Destroyed", Toast.LENGTH_SHORT).show();
        super.onDestroy();
    }
} 
```

提前致谢

# .net - 验证错误模板 - 绑定异常

> ID：12534185
> 
> 赞同：16
> 
> 时间：2012-09-21T16:10:34.907
> 
> 标签：.net, wpf, xaml, exception

我正在使用以下模板进行**验证错误**：

```
<ControlTemplate>
    <Border BorderBrush="Red" BorderThickness="1">
        <Grid>
            <Polygon Points="8,8 8,0 0,0"
                     Stroke="Black"
                     StrokeThickness="1"
                     Fill="Red"
                     HorizontalAlignment="Right"
                     VerticalAlignment="Top"
                     ToolTip="{Binding ElementName=adorner, Path=AdornedElement.(Validation.Errors)[0].ErrorContent}" />
            <AdornedElementPlaceholder x:Name="adorner"/>
        </Grid>
    </Border>
</ControlTemplate> 
```

ToolTip 工作正常，但在离开当前记录后抛出以下异常：

> System.Windows.Data 错误：17：无法从“（Validation.Errors）”（类型“ReadOnlyObservableCollection`1”）获取“Item []”值（类型“ValidationError”）。BindingExpression:Path=AdornedElement.(0)[0].ErrorContent; DataItem='AdornedElementPlaceholder'（名称='装饰者'）；目标元素是 'Polygon' (Name=''); 目标属性是“工具提示”（类型“对象”） ArgumentOutOfRangeException：“System.ArgumentOutOfRangeException：指定的参数超出了有效值的范围。

我尝试了`HasError`财产，但失败了。有人有什么想法吗？

* * *

## 回答 #1

> 赞同：30
> 
> 时间：2012-09-21T17:31:47.133

当没有验证错误时，绑定仍然试图访问 Validation.Errors 返回的 ReadOnlyObservableCollection 中的第一个元素，但是因为它是空的，所以抛出了异常。

绑定系统只是吞下异常，但它仍然烦人且不必要。

而不是像这样绑定：

```
Path=AdornedElement.(Validation.Errors)[0].ErrorContent 
```

..你可以这样做，以避免异常：

```
Path=AdornedElement.(Validation.Errors).CurrentItem.ErrorContent 
```

# jquery - IE7 不会使用 $(data).filter 过滤 AJAX 返回值

> ID：12534189
> 
> 赞同：0
> 
> 时间：2012-09-21T16:11:02.710
> 
> 标签：jquery

我正在使用这段代码：

```
$.get('getdetails.php?gid='+getid, function (data) {

           //query the jq object for the values
           var person = $(data).filter('NAME').html();

// this works fine and shows the content from the getdetails.php page
alert (data);

// this shows nothing

alert(person);

}); 
```

这是 getdetails.php 位

```
echo"<NAME>barry</NAME>"; 
```

这在 chrome、FF 和 IE9 中 100% 有效，但在 IE8 或 7 中完全无效。

请帮忙！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:54:50.747

您返回 XML 而不是 JSON 是否有原因？如果可以切换，则可以使用`JSON.parse`转换为本机对象。如果必须使用 JSON，可以使用`getElementByTagName`.

您可以像查询文档的 DOM 一样查询 XML。查看 w3school 文档以获取更多信息。

也许您应该尝试使用 JSON，因为它消耗的带宽比 XML 少。

# html - 字体在 Photoshop 和网站上看起来不同

> ID：12534197
> 
> 赞同：9
> 
> 时间：2012-09-21T16:11:38.700
> 
> 标签：html, css, fonts, photoshop

简单的问题：为什么这两种字体在 Photoshop 和网站上看起来不同。 ![](../Images/08c23c7ae1533ad4e9c6c4c6af7479fc.png)

在这张图片中 - 第一个文本来自 html 代码，第二个是来自 photoshop 的图像。相同的字体，相同的大小 - 30。但第一个看起来比第二个更“大胆”。为什么？我想拥有与 Photoshop 相同的字体（第二张图片）。

这里的css代码：

```
@font-face {
font-family: "SegoeWP";
src: url("fonts/play/SegoeWP.eot");
src: url("fonts/play/SegoeWP.eot?#iefix")
         format("embedded-opentype"),
     url("fonts/play/SegoeWP.woff") format("woff"),
     url("fonts/play/SegoeWP.ttf") format("truetype"),
     url("fonts/play/SegoeWP.svg#PlayRegular") format("svg");
font-weight: lighter;
}

#strona {
  width: 1120px;
  margin-left: auto;
  margin-right: auto;
}

#Section1 
{
      font-family: "SegoeWP", Tahoma, Arial, sans-serif;
      font-size: 30px; 
}

header, footer, article, section, hgroup, nav, figure {
    display: block;
}

 body {
  font-family: "SegoeWP", Tahoma, Arial, sans-serif;
  background-image:url('background.jpg');
  background-repeat: no-repeat;
  background-position: top center;
  color: #ffffff;

 } 
```

和html代码。

```
 <section id="Section1">  { mywebsite.NET } </section>
  <img src="mojeportfolio.png" /> 
```

有任何想法吗？问候！

更多的

我发现，我在文件夹中有 3 种 SegoeWP 字体。“SegoeWP”、“SegoeWP-Light”、“SegoeWP-Semibold”。“SegoeWP”看起来有点太“粗体”了，但是这个“SegoeWP-Light”是完美的，当我双击它时，它看起来和 Photoshop 中的一样。如何在我的网站上使用它？当我更改这部分 -> url("fonts/play/SegoeWP-Light.*") 时，网站上没有任何变化。怎么了？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-22T12:30:52.750

要获得相同的结果，请尝试使用`font-smoothing: antialiased`, 并减小字体大小，使其与您的 Photoshop 图像匹配。

最大的不同是因为 Adob​​e Photoshop 不会像大多数浏览器那样进行亚像素字体平滑。在您的示例图像中，如果您放大，这很容易看到（请参阅边缘周围的颜色变化）。Windows 有使用额外清晰形式的亚像素字体渲染的历史，这会加剧问题，因为感知的字体粗细可能会发生严重变化。

Smashing Magazine 有一篇关于字体渲染的优秀[文章。](http://www.smashingmagazine.com/2012/04/24/a-closer-look-at-font-rendering/)

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T16:15:47.280

Photoshop 处理字体的方式与 Web 浏览器有很大不同……因为 Photoshop 使用了平滑、内核等功能，因此字体在浏览器中几乎总是看起来不同

* * *

## 回答 #3

> 赞同：-2
> 
> 时间：2012-09-21T16:43:25.733

确保您将 css 添加到正确的位置，有时这可能是问题所在。有关如何减轻字体重量的完整说明，您可以在此处找到：

[http://www.w3schools.com/css/tryit.asp?filename=trycss_font-weight](http://www.w3schools.com/css/tryit.asp?filename=trycss_font-weight)

# xml - 我可以转义 VB.NET 的 XML 文字语法中包含的括号等 XML 字符吗？

> ID：12534205
> 
> 赞同：0
> 
> 时间：2012-09-21T16:12:18.153
> 
> 标签：xml, vb.net, literals, xelement

前段时间，我问了这个问题：

[VB.NET 是否有与 c# 等效的多行字符串声明语法？](https://stackoverflow.com/questions/11954701/does-vb-net-have-a-multi-line-string-declaration-syntax-equivalent-to-c/11954808#11954808)

在这里，我被介绍了 VB.NET 中的 XML 文字。使用这种语法，我能够使用`@`符号模拟 c# 中可用的多行字符串语法。然而，我遇到了一个障碍。似乎将`<`或`>`放入文本中并不能很好地放在 Visual Studio 的肚子里。以这段代码为例：

```
Dim Sql As String = <a><![CDATA[]]>
                        <text instead pointy brackets fails>
                    </a>.Value 
```

我可以以某种方式逃避这些括号或告诉文字不要关心它吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T16:14:58.120

XML 文字仅适用于*XML*数据。您可以使用`&lt;`转义左尖括号，但除非您*真的想要 XML 数据*，否则我建议您根本不要使用 XML 文字。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-04-16T13:56:19.173

您需要将文本放在 CDATA 部分中：

```
Dim Sql As String = <a><![CDATA[
<text instead pointy brackets fails>
]]></a>.Value

Console.WriteLine("===")
Console.WriteLine(Sql)
Console.WriteLine("===") 
```

应该输出：

```
===

<text instead pointy brackets fails>

=== 
```

请注意，CDATA 还将保留文本中的前导空格；这就是为什么我将它们从括号中的文本中删除。

# wordpress - 使用 add_filter 对 wordpress 进行非重复内容更改

> ID：12534207
> 
> 赞同：0
> 
> 时间：2012-09-21T16:12:24.780
> 
> 标签：wordpress, preg-replace

我想在wordpress中自动为pdf链接放置一个pdf图标

```
function my_function($content) {
    $search = '^.pdf">^';
    $replace='.pdf"><img src="domain.com/pdf-icon.jpg" width="64" height="64" alt="pdf download"/>';
    return preg_replace($search,$replace,$content);
}
add_filter('content_save_pre','my_function'); 
```

有效，但如果再次编辑帖子，则会添加另一个图像。如何将其更改为不替换搜索`.pdf`已直接在其后具有 img 标签的位置？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T20:39:19.443

我根本不会使用数据库内容插入来支持 CSS 解决方案：

```
a[href $='.pdf'] { 
   padding-right: 64px;
   background: transparent url(domain.com/pdf-icon.jpg) no-repeat center right;
} 
```

# trim - NumberFormatException 修剪变量

> ID：12534211
> 
> 赞同：0
> 
> 时间：2012-09-21T16:13:09.667
> 
> 标签：trim, numberformatexception

TITLE = Float.parseFloat(dataRecord.get("TITLE"));
字符串修剪 = TITLE.substring(0,40); // 获取前 40 个字符。

“标题”可以是数字和非数字变量。试图将我的字符串“TITLE”修剪为 40 个字符

错误消息是：NumberFormatException（第 4 行）：对于输入字符串：“New Travel 3PC 28”/24“/20”Rolling Expandable Upright Luggage Set”-- 方法调用 Float.parseFloat

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:33:56.177

错误消息说产生的值`dataRecord.get("TITLE")`不是`Float.parseFloat()`方法所期望的数字。实际上，传递给该函数的导致错误的值也已显示为`"New Travel 3PC 28"/24"/20" Rolling Expandable Upright Luggage Set"`. 因此，此错误与修剪字符串无关。您必须检查为什么`"TITLE"`您的记录字段中的值不是您期望的值。

# c# - 如何防止“随机”灰色行显示在我的 DGV 中？

> ID：12534214
> 
> 赞同：0
> 
> 时间：2012-09-21T16:13:46.500
> 
> 标签：c#, winforms, datagridview

我在 DataGridView 中将 AllowUserToAddRows 设置为 false。然而，当我通过方向箭头键导航到最后一行时，顶行会滚动到看不见的地方，底部会出现一个新的灰色行。

我怎样才能防止这种情况？无论我将光标向上、向下、向左或向右移动多远，我都希望我的所有行都可见。

注意：水平浏览单元格不会导致问题 - 我这样做时没有添加灰色列。我希望行/垂直功能与此相同。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:49:52.130

So one approach to this would be do the following:

On the `DataGridView`, set the properties`AllowUserToAddRows` and `AllowUserToDeleteRows` to **false**

Also, set `AutoSizeRowsMode` to **None**

Handle the resize of the `DataGridView` like this:

```
private void dataGridView1_Resize(object sender, EventArgs e)
{
    var rowHeight = (dataGridView1.Height - dataGridView1.ColumnHeadersHeight) / 10;
    for (int i = 0; i < 10; ++i)
    {
        dataGridView1.Rows[i].Height = rowHeight;
    }
} 
```

In my example, the Form1_Load event just adds some rows and then calls the DGV's resize to make everything look right initially, but you could handle this different ways. Something like:

```
private void Form1_Load(object sender, EventArgs e)
{
    for (int i = 0; i < 10; ++i)
    {
        dataGridView1.Rows.Add();
    }
    dataGridView1_Resize(this, EventArgs.Empty);
} 
```

# iphone - 我在哪里可以获得更多关于 Cocos2d 的培训

> ID：12534215
> 
> 赞同：0
> 
> 时间：2012-09-21T16:14:04.877
> 
> 标签：iphone, cocos2d-iphone

我是 Cocos2d 的新手，已经开始制作一个简单的纸牌游戏。我遵循了 Cocos2d-iphone 主网站上的简单 3 部分教程，但它并没有涵盖我需要的所有内容。虽然它涵盖了大量的信息，但仍然有很多东西被遗漏了。例如，我必须查看其他项目的源代码才能知道我必须为卡片创建一个 NSMutableArray 图像，然后制作 2 面对象（正面和背面），然后使用一个非常特殊的“洗牌”程序。虽然这很棒，但我仍然坚持游戏的下一阶段，即：

*   与桌子周围的玩家打牌 *所有 3 名 AI 玩家面朝下，但主要玩家面朝上 *以特定模式处理，像您将它们握在手中一样散开

我查看了几个在线可用的旧（3 年）项目，但它们只是有点帮助。一些项目有一个HUD层，而另一些则没有。有些项目甚至不使用 Cocos2d 框架，但有些项目使用了。

无论如何，我真的很想继续前进并继续工作，但我的知识水平并不是继续下去所需要的。如果有人可以提供一些指导，我将不胜感激。坐在我的手上，一夜又一夜地用谷歌搜索让我发疯。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:23:21.183

如果你是 Cocos2d 新手，或者想开始 cocos2d 游戏开发..

试试[Raywenderlich](http://www.raywenderlich.com/tutorials)的一些教程。他为初学者和中级者提供了一些很好的教程。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:16:25.863

这是一个很棒的网站，里面有一本很棒的书。我用它自学了 Cocos2D。

[http://www.learn-cocos2d.com](http://www.learn-cocos2d.com)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:15:09.590

没有什么比 youtube 更好的了。输入`cocos2d tutorials` ，也许会学到一些新东西！

# java - 编译java时找不到包

> ID：12534216
> 
> 赞同：0
> 
> 时间：2012-09-21T16:14:07.200
> 
> 标签：java

我正在尝试将我的 java 文件编译为类。它是一个更大程序的插件，当从源代码运行时，它在 eclipse 中运行良好。

我在 Linux 中工作，在 shell 中输入以下内容`javac MyPlugin.java`

这只是部分输出：

```
MyPlugin.java:11: package javolution.util does not exist
import javolution.util.FastList;
                      ^
MyPlugin.java:12: package javolution.util does not exist
import javolution.util.FastMap;
                      ^
MyPlugin.java:14: package org.apache.log4j does not exist
import org.apache.log4j.Logger;
                       ^
MyPlugin.java:15: package org.jwebsocket.api does not exist
import org.jwebsocket.api.PluginConfiguration;
                         ^ 
```

我的假设是其余的错误是由于无法达到导入而引起的。

我是否需要在原始命令中添加一些内容才能包含这些导入？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:20:03.637

您缺少以下项目的 jar：

[http://javolution.org/](http://javolution.org/)

[http://logging.apache.org/log4j/1.2/](http://logging.apache.org/log4j/1.2/)

[http://jwebsocket.org/](http://jwebsocket.org/)

您可以下载缺少的 JAR 并将它们包含在您的编译类路径中。

或者，您可以让[maven](http://maven.apache.org/)管理应用程序的下载和编译。

**更新：将所有外部 jar 集中在一个位置**

要将所有外部库放在一个地方，您可以使用以下命令在 Eclipse 中创建一个可运行的 JAR：

```
Export...->Java->Runnable JAR File 
```

输入`your_temp_jar.jar`并点击

```
Copy required libraries into a sub-folder next to the generated JAR 
```

单击`Finish`所有必需的 jar 后，将位于名为`your_temp_jar_lib`.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:17:21.617

您应该在类路径中指定包含以下类的 jar 文件。

```
javolution.util.FastList
javolution.util.FastMap
org.apache.log4j.Logger
org.jwebsocket.api.PluginConfiguration 
```

您可以使用`-cp`指定 jar 的类路径。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:17:46.933

在命令行键入 javac 不是构建 Java 代码的可行或可扩展的方式。虽然您可以使用 -cp to javac 将所需的依赖项添加到此编译中，但学习 ant 或 maven 会更好。

# statistics - 使用 BigQuery 结合 WHERE 子句查找具有标准差结果的异常值

> ID：12534218
> 
> 赞同：2
> 
> 时间：2012-09-21T16:14:11.397
> 
> 标签：statistics, google-bigquery, standard-deviation

标准偏差分析可能是查找异常值的有用方法。有没有办法合并这个查询的结果（找到远离平均值的第四个标准偏差的值）......

```
SELECT (AVG(weight_pounds) + STDDEV(weight_pounds) * 4) as high FROM [publicdata:samples.natality]; 
```

结果 = 12.721342001626912

...进入另一个查询，该查询生成有关哪些州和日期的大多数婴儿出生时体重与平均值相差 4 个标准差的信息？

```
SELECT state, year, month ,COUNT(*) AS outlier_count
 FROM [publicdata:samples.natality]
WHERE
  (weight_pounds > 12.721342001626912)
AND
  (state != '' AND state IS NOT NULL)
GROUP BY state, year, month 
ORDER BY outlier_count DESC; 
```

结果：

```
Row  state   year    month   outlier_count    
1    MD  1990    12  22   
2    NY  1989    10  17   
3    CA  1991    9   14 
```

本质上，将它组合成一个查询会很棒。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T17:12:16.803

您可以为此滥用 JOIN （因此性能会受到影响）：

```
SELECT n.state, n.year, n.month ,COUNT(*) AS outlier_count
FROM (
  SELECT state, year, month, weight_pounds, 1 as key 
  FROM [publicdata:samples.natality]) as n
JOIN (
  SELECT (AVG(weight_pounds) + STDDEV(weight_pounds) * 4) as giant_baby, 
          1 as key 
  FROM [publicdata:samples.natality]) as o
ON n.key = o.key
WHERE
  (n.weight_pounds > o.giant_baby)
AND
  (n.state != '' AND n.state IS NOT NULL)
GROUP BY n.state, n.year, n.month 
ORDER BY outlier_count DESC; 
```

# r - R，绘图，多个绘图图形中的字体大小变化

> ID：12534219
> 
> 赞同：2
> 
> 时间：2012-09-21T16:14:12.003
> 
> 标签：r, plot, resolution, font-size

我正在为出版物创建图表，并希望它们具有相同的字体大小。

当我创建具有**多个 plots**的图形时，即使我没有更改分辨率或参数，**字体大小也会减小。**我根据最终适合的地块数量增加了图形大小，并确保单个和多个地块图形的边距相等。`tiff()``pointsize`

下面是一个示例代码（字体大小在 1x1 和 2x1 图形之间是一致的，但对于 3x2 图形会减小）：

```
tiff("1x1.tif", width=3,height=2.5,units="in",res=600,pointsize=8,
compression="lzw",restoreConsole=T)
par(mfrow=c(1,1),mar=c(4,4,.5,.5)+0.1)
plot(x=rnorm(10),y=rnorm(10))
dev.off()

tiff("2x1.tif", height=2.5*2,width=3,units="in",res=600,pointsize=8,
compression="lzw",restoreConsole=T)
par(mfrow=c(2,1),mar=c(2,4,2.5,0.5)+0.1)
plot(x=rnorm(10),y=rnorm(10),xaxt="n",xlab="")
par(mar=c(4,4,0.5,0.5)+0.1)
plot(x=rnorm(10),y=rnorm(10))
dev.off()

tiff("3x2.tif", height=2.5*3,width=3*2,units="in",res=600,pointsize=8,
compression="lzw",restoreConsole=T)
par(mfrow=c(3,2),mar=c(.5,4,4,0.5)+0.1)
plot(x=rnorm(10),y=rnorm(10),xaxt="n",xlab="")
par(mar=c(.5,2,4,2.5)+0.1)
plot(x=rnorm(10),y=rnorm(10),xaxt="n",xlab="",yaxt="n",ylab="")
par(mar=c(2.5,4,2,0.5)+0.1)
plot(x=rnorm(10),y=rnorm(10),xaxt="n",xlab="")
par(mar=c(2.5,2,2,2.5)+0.1)
plot(x=rnorm(10),y=rnorm(10),xaxt="n",xlab="",yaxt="n",ylab="")
par(mar=c(4.5,4,0,0.5)+0.1)
plot(x=rnorm(10),y=rnorm(10))
par(mar=c(4.5,2,0,2.5)+0.1)
plot(x=rnorm(10),y=rnorm(10),yaxt="n",ylab="")
dev.off() 
```

为什么会这样？

PS：我没有使用`ggplot2`或者`lattice`因为我在“实际”数字上使用了我自己的错误栏功能（我现在不记得为什么但我尝试使用 ggplot2 错误栏并没有得到我想要的）。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-09-21T16:20:34.690

控制绘图中对象（包括文本）的整体相对大小的参数称为`cex`。当您使用许多面板时，默认情况下它会减小，但可以通过手动将其设置为 来覆盖它`1`。

```
par(mfrow=c(3,2), mar=c(.5,4,4,0.5)+0.1, cex=1) 
```

### 题外话

看起来您应该使用`oma`(outer margin) 而不是在调用`par(mar=...)`之间调用`plot`. 我觉得它非常有用，但似乎几乎没有人知道它。同时`ann=FALSE`关闭所有注释，`las=1`将轴刻度标签水平旋转。

```
par(mfrow=c(3,2), oma=c(4.5, 4, 4, 2.5), mar=rep(.1, 4), cex=1, las=1)
plot(x=rnorm(10), y=rnorm(10), ann=FALSE, xaxt="n")
plot(x=rnorm(10), y=rnorm(10), ann=FALSE, xaxt="n", yaxt="n")
plot(x=rnorm(10), y=rnorm(10), ann=FALSE, xaxt="n")
plot(x=rnorm(10), y=rnorm(10), ann=FALSE, xaxt="n", yaxt="n")
plot(x=rnorm(10), y=rnorm(10), ann=FALSE)
plot(x=rnorm(10), y=rnorm(10), ann=FALSE, yaxt="n")
title("My plot", outer=TRUE)
mtext("X-axis label", 1, 3, outer=TRUE)
mtext("Y-axis label", 2, 3, outer=TRUE, las=0) 
```

![在此处输入图像描述](../Images/715f2340e924a48dc9730856616762e8.png)

# ruby - 是否可以将外部文件中字符串的特定部分定义为变量？

> ID：12534220
> 
> 赞同：0
> 
> 时间：2012-09-21T16:14:12.800
> 
> 标签：ruby, xpath

> **可能重复：**
> [在 Ruby 中，您可以对从文件中读取的数据执行字符串插值吗？](https://stackoverflow.com/questions/346380/in-ruby-can-you-perform-string-interpolation-on-data-read-from-a-file)

我需要遍历一些“li”元素：

```
for i in 1..5
  Xpaths.getPath("location","elements")      
end 
```

然后，所有的 xpath 都在一个外部文件中，所以这样的 'elements' 变量的值如下：

```
{ 
"location":
  {
  "elements"      :"//ul[@id='locations']/li[#{i}]/a"                                                           
  }
} 
```

elements 变量被读取为字符串，并且 [#{i}] 不会被替换为 [1] 等值。有没有办法将外部文件中字符串的特定部分定义为变量？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:28:46.040

If I understand your question correctly, you have some external data file in JSON format, whose structure has certain fields as XPath strings on which you would like to perform Ruby string interpolation.

The short answer is that yes, you can do this directly using, say [Kernel#eval](http://www.ruby-doc.org/core-1.9.3/Kernel.html#method-i-eval). There are also other options such as using [erb](http://ruby-doc.org/stdlib-1.9.3/libdoc/erb/rdoc/ERB.html). A solution using the simple "eval" route might look like this:

```
xpaths = JSON.load(File.read('my-xpaths.json'))
(1..5).each do |i|
  xpath = eval(xpaths['location']['elements'].to_json)
  # => "//ul[@id='locations']/li[1]/a"
end 
```

Of course, using "eval" is fraught with peril since you are essentially executing code from another source, so there are many precautions you must take to ensure safety. A better approach might involve doing a simple regular expression replacement so that you can constrain the interpolation on the XPath item:

```
xpaths['location']['elements'] # => "//ul[@id='locations']/li[__INDEX__]/a"
xpath = xpaths['location']['elements'].gsub(/__INDEX__/, i.to_s)
# => "//ul[@id='locations']/li[1]/a" 
```

See also this related question: [In Ruby, can you perform string interpolation on data read from a file?](https://stackoverflow.com/questions/346380/in-ruby-can-you-perform-string-interpolation-on-data-read-from-a-file)

# python - 从 python 套接字服务器获得一些响应

> ID：12534227
> 
> 赞同：2
> 
> 时间：2012-09-21T16:14:41.707
> 
> 标签：python

我刚刚开始学习 python，我想知道如何让客户端在服务器上执行一个函数并获得一些响应

这是我的服务器代码

```
import socket

serversocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
serversocket.bind(('localhost', 8089)) 
serversocket.listen(5)

while True:
    connection, address = serversocket.accept()
    buf = connection.recv(64)
    if len(buf)> 0:
        print(buf)
        break

input('press enter') 
```

这是客户端代码

```
import socket

clientsocket = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
clientsocket.connect(('localhost', 8089)) 
data = 'lorem ipsum'
clientsocket.send(data.encode())
input('press enter') 
```

这就是功能

```
def addme(x,y):
    return x + y

print (addme(6,4)) 
```

假设我`addme()`在服务器上有该功能，是否可以从客户端调用它并将响应显示给客户端？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:17:57.543

您必须向它发送某种消息，告诉服务器执行此操作。例如，您可以向它发送一个字符串“ADDME”，当服务器接收到它时，它会存储 addme() 的结果并将其发送回客户端，然后打印它。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T16:22:41.893

如果您只是想调用函数，您应该查看 XMLRPC。简单易行，这是 python 文档中的示例。

```
# Server code
import xmlrpclib
from SimpleXMLRPCServer import SimpleXMLRPCServer

def is_even(n):
    return n%2 == 0

server = SimpleXMLRPCServer(("localhost", 8000))
print "Listening on port 8000..."
server.register_function(is_even, "is_even")
server.serve_forever()

# Client code
import xmlrpclib

proxy = xmlrpclib.ServerProxy("http://localhost:8000/")
print "3 is even: %s" % str(proxy.is_even(3))
print "100 is even: %s" % str(proxy.is_even(100)) 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T16:18:29.007

您需要设置自己的通信协议。发明一个命令，当您发送它时，使服务器执行某些功能。

要通过套接字发送数据（类似于类似文件的对象），您需要将其**序列化**（编码）为一组字节，并在另一端接收到这些字节后，对它们进行**反序列**化（解码）。

将函数的返回值编码为 JSON，以防它是字典，`str`以防它是整数，或者发明您自己的二进制协议，或者，如果您希望能够通过“线路”发送几乎任何类型的 Python 对象，然后[腌制](http://docs.python.org/library/pickle.html)返回值。将编码（腌制）的返回值发送给客户端。然后它必须解码（unpickle）它。

在任何情况下，您都必须使用自己的命令集来实现自己的协议，而每个命令可能都有参数。您必须找到一种方法将命令与其参数分开，并且必须（in）验证您收到的命令。

**对于学习网络通信，你的任务很棒。为了实现一个生产软件，你必须有一个外观和坚如磐石的消息库**，如`xmlrpclib`其他人指出的那样。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T16:20:53.267

听起来您正在尝试实现 RPC。有关现有库的讨论，请参见此处：[在 Python 中执行 RPC 的当前选择是什么？](https://stackoverflow.com/questions/1879971/what-is-the-current-choice-for-doing-rpc-in-python)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T16:39:36.403

我就是这样做的

***服务器.py***

```
from xmlrpc.server import SimpleXMLRPCServer

def addme(x,y):
    return x + y

server = SimpleXMLRPCServer(("localhost", 8000))
print("Listening on port 8000...")
server.register_function(addme, "addme")
server.serve_forever()

input('press enter') 
```

***客户端.py***

```
import xmlrpc.client

proxy = xmlrpc.client.ServerProxy("http://localhost:8000/")
print("the sum: %s" % str(proxy.addme(6,4)))

input('press enter') 
```

# jquery - CSS3 动画填充模式 polyfill

> ID：12534228
> 
> 赞同：14
> 
> 时间：2012-09-21T16:14:46.157
> 
> 标签：jquery, animation, css, modernizr, polyfills

# 前言

让我们假设 a`div`是动画 from `opacity:0;`to`opacity:1;`并且我想`opacity:1;`在动画结束后保留​​。

就是`animation-fill-mode:forwards;`这样。

```
@keyframes myAnimation {
    from { opacity:0; }
    to { opacity:1; }
}
div {
    opacity:0;
    animation-name:myAnimation;
    animation-delay:1s;
    animation-duration:2s;
    animation-fill-mode:forwards;
}​
<div>just a test</div>​ 
```

**[在 jsFiddle 上运行它](http://jsfiddle.net/gionaf/TBUd5/)**

*   注意 1：我没有在此处包含供应商前缀以简化
*   注意2：这只是一个例子，请不要回复“只使用jQuery的fadeIn函数”等。

* * *

# 有些事情要知道

在[这个答案](https://stackoverflow.com/questions/9131026/how-to-keep-styles-after-animation)中，我读到`animation-fill-mode`Chrome 16+、Safari 4+、Firefox 5+ 支持。

但Chrome 1+ 和 Opera 也`animation`单独[支持。](http://css3.bradshawenterprises.com/support/)因此，即使不支持[Modernizr](http://modernizr.com)的一般测试也可能返回正面。`fill-mode`

为了达到目标`animation-fill-mode`，我在 Modernizr 上添加了一个新测试：

```
Modernizr.addTest('animation-fill-mode',function(){
    return Modernizr.testAllProps('animationFillMode');
}); 
```

现在我有一个`.no-animation-fill-mode`针对 CSS 和`Modernizr.animationFillMode`JavaScript 的课程。

我还从[CSS3 动画规范](http://www.w3.org/TR/css3-animations/#animations)中读到：

> 文档样式表中指定的动画将在文档加载时开始

* * *

# 最后，问题

可以在动画结束的*确切秒数*处运行一个简单的 jQuery 函数吗

```
$(document).ready(function(){
    if(!Modernizr.animation){
        $('div').delay(1000).fadeIn(2000);
    }else if(!Modernizr.animationFillMode){
        $('div').delay(3000).show();
    }
}); 
```

在 CSS 中：

```
.no-animation-fill-mode div {
    animation-iteration-count:1;
}
/* or just animation:myAnimation 2s 1s 1; for everyone */ 
```

或者是否有任何已知的 polyfill*特定*于`animation-fill-mode`？

* * *

另外，如果我使用速记语法会发生什么

```
animation:myAnimation 2s 1s forwards; 
```

`animation`在支持但不支持的浏览器上`animation-fill-mode`？

非常感谢！

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-25T23:21:16.260

如果是我，我会尝试选择更简单的选择 - 如果可能的话。我会降级我的实现，以便我只使用普遍接受的东西。后来，当该功能得到更广泛的支持时，我会考虑实现它。我很少考虑使用`This is an experimental technology`在文档页面上广播的功能 - 但也许我应该被归类为无聊:)

`animation-fill-mode:forwards`在您的示例中，您可以通过最初定义元素的结束状态并使用链接动画*（如果需要在操作之前延迟）*来获得相同的结果：

```
@keyframes waitandhide {
  from { opacity:0; }
  to { opacity:0; }
}
@keyframes show {
  from { opacity:0; }
  to { opacity:1; }
}
div {
  opacity:1;
  animation: waitandhide 2s 0s, show 2s 2s;
}
<div>just a test</div>​ 
```

[http://jsfiddle.net/RMJ8s/1/](http://jsfiddle.net/RMJ8s/1/)

现在，较慢的浏览器可能会在再次隐藏它们之前闪现您的初始元素状态。但根据我的经验，我只在非常旧的机器和需要渲染大量 css 的页面上看到过这种情况。

显然，上面的内容确实使您的 css 更加膨胀*（因为您必须复制样式）*，并且在处理复杂的动画时会更加复杂。然而：

1.  它应该适用于几乎任何动画情况。
2.  它将避免对 JavaScript 的需要*（除了 $().fadeIn 后备）*。
3.  它适用于所有支持 css 动画的浏览器。
4.  您不会冒 JS 和 CSS 不同步的风险。

关于使用短格式，如果您想尽可能广泛地兼容浏览器，最好不要这样做。然而，如我上面的例子所示，我选择使用短格式，因为它们更清晰，我可以理解不想一直写*（或读）*冗长的版本。出于这个原因，我建议使用 less 来生成你的 CSS：

[http://lesscss.org/](http://lesscss.org/)

[http://radiatingstar.com/css-keyframes-animations-with-less](http://radiatingstar.com/css-keyframes-animations-with-less)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-23T16:30:16.767

我不知道任何 polyfill... 但我想说您确实应该使用自己的自定义 Modernizr 测试，并且对于不支持动画填充模式的浏览器，您应该使用该`animationEnd`事件来触发您的回调并设置不透明度为 1（或删除一个类）。

请参阅：[CSS3 过渡事件](https://stackoverflow.com/questions/2794148/css3-transition-events)

至于速记符号，IE <10 不支持 animation-fill-mode 属性，我很确定它会破坏整个声明。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-04-26T21:59:55.923

仅供参考，这就是我现在如何实施 pebbl 的答案（这是一个非常聪明的答案）。我只需要[Modernizr](http://modernizr.com/)的 css-animation 检测。

假设我想滑动和淡化这个 div：

```
<div class="target">Some stuff</div> 
```

首先，我写下动画~~带有供应商前缀~~

```
@keyframes byebye {
    0% { height:100px; opacity:1; }
    100% { opacity:0; height:0; }
} 
```

然后是一个新班级

```
.target-animation {
    height:0; opacity:0; // same as "100%" state
    animation:byebye 750ms 1;
} 
```

转移到 javascript：

```
// $('.whatever').on('click',function(){ ...

if(Modernizr.cssanimations)
    // css animations are supported!
    $('.target').addClass('target-animation');
else
    // i hate you IE
    $('.target').animate({height:0,opacity:0},750); 
```

## [演示](http://jsfiddle.net/gionaf/2T7s8/)

如果您需要多次触发动画，只需使用 javascript 删除类，如下[所述](https://stackoverflow.com/questions/5023514/how-do-i-normalize-css3-transition-functions-across-browsers)：

```
// if(Modernizr.cssanimations) ...

$('target').addClass('target-animation').on('webkitAnimationEnd oAnimationEnd oanimationend animationend msAnimationEnd',function(){
    $(this).removeClass('target-animation')
    // don't forget to  .hide()  if needed
});

// ... else 
```

# mysql - 使用 ODBC 的 VB6 程序在 Win7 64 下无法运行

> ID：12534237
> 
> 赞同：3
> 
> 时间：2012-09-21T16:15:26.340
> 
> 标签：mysql, windows-7, vb6, odbc

我有一个使用 MySQL 4.07 数据库的旧 VB6 程序。它是在我的 Win XP 64 位机器上开发的。它在我的 Win XP 64 机器上运行良好，在我的 Win7 64 位机器上运行良好。但是当我们的一位用户尝试在他们的 Win7 64 机器上运行它时，它失败了

```
 "Run-time error '-2147467259 (80004005)': [Microsoft][ODBC Driver Manager] Data source name not found and no default driver specified". 
```

奇怪的是他们已经安装了 ODBC 驱动程序并将它们放在 SysWOW64 和 system32 中。

以下代码在 Form_Load 中执行，并且很可能发生错误（请注意，32 位驱动程序适用于 NT Server 2.5，而 64 位驱动程序是较新的版本。）：

```
 If IsHost64Bit() = True Then
        mstrConnString = "driver=MySQL ODBC 3.51 Driver;server=mysqleng;database=engprogs;port=3306;UID=user;PWD=########"
    Else
        mstrConnString = "driver=MySQL;server=mysqleng;database=engprogs;port=3306;UID=user;PWD=########"
    End If

    Set ADOCn = New ADODB.Connection
    ADOCn.ConnectionString = mstrConnString
    ADOCn.Open mstrConnString 
```

我检查了 SysWOW64 中 odbcad32.exe 的属性，并且驱动程序选项卡在用户机器上显示 MySQL ODBC 3.51！

任何想法将不胜感激。

谢谢，鲍勃

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T14:17:49.423

与 Mark Kram 的讨论让我尝试在 Win7 64 位计算机上安装 VB6。在安装过程中，我忽略了兼容性警告。据我所知，它已安装并运行良好。因此，我能够单步执行代码并发现“IsHost64Bit()”在 Win7 64 中无法正常工作！“IsHost64Bit()”例程表明 64 位计算机是 32 位的！因此，它从 32 位加载“mstrConnString”。这就是程序启动时失败的原因。

“IsHost64Bit()”要求：

```
Private Declare Function GetProcAddress Lib "kernel32" _
(ByVal hModule As Long, ByVal lpProcName As String) As Long

Private Declare Function GetModuleHandle Lib "kernel32" _
Alias "GetModuleHandleA" (ByVal lpModuleName As String) As Long

Private Declare Function GetCurrentProcess Lib "kernel32" () As Long

Private Declare Function IsWow64Process Lib "kernel32" _
(ByVal hProc As Long, ByRef bWow64Process As Boolean) As Long 
```

“IsHost64Bit()”例程：

```
Public Function IsHost64Bit() As Boolean
Dim handle As Long
Dim is64Bit As Boolean

' Assume initially that this is not a WOW64 process
is64Bit = False

' Then try to prove that wrong by attempting to load the
' IsWow64Process function dynamically
handle = GetProcAddress(GetModuleHandle("kernel32"), "IsWow64Process")

' The function exists, so call it
If handle <> 0 Then
    IsWow64Process GetCurrentProcess(), is64Bit
End If

' Return the value
IsHost64Bit = is64Bit
End Function 
```

我将“IsHost64Bit()”替换为：

```
Dim wmi, prc
Dim prcOS As String

Set wmi = GetObject("winmgmts:\\")
For Each prc In wmi.execQuery("SELECT * FROM Win32_Processor")
  Debug.Print prc.Name, "Bit Sizes - ADDR:"; prc.AddressWidth, "DATA:"; prc.DataWidth
  prcOS = Str(prc.DataWidth)
Next 
```

Form_Load 例程现在正确检查 64 位，如下所示：

```
If prcOS = " 64" Then
    mstrConnString = "driver=MySQL ODBC 3.51 Driver;server=mysqleng;database=engprogs;port=3306;UID=user;PWD=########"
Else
    mstrConnString = "driver=MySQL;server=mysqleng;database=engprogs;port=3306;UID=user;PWD=########"
End If

Set ADOCn = New ADODB.Connection
ADOCn.ConnectionString = mstrConnString
ADOCn.Open mstrConnString 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-03T17:39:03.940

一、下载MySQL ODBC连接器（当前版本）

删除以前的 MySQL ODBC 连接器

使用所有选项安装新版本

这对我有用

32 位版本也可以在 64 位机器上运行。

# javascript - 从另一个对象更新 JavaScript 对象属性

> ID：12534238
> 
> 赞同：43
> 
> 时间：2012-09-21T16:15:26.900
> 
> 标签：javascript, object, properties, key

我想更新一个看起来像这样的对象：

```
currentObject = {
    someValue : "value",
    myObject : {
        attribute1 : "foo",
        attribute2 : "bar"
    }
}; 
```

..使用包含一些更改的对象，即：

```
updateObject = {
    myObject : {
        attribute2 : "hello world"
    }
}; 
```

最后，我想更新 currentObject 以便：

```
currentObject.myObject.attribute2 == "hello world" 
```

这也应该适用于其他对象。作为一种解决方案，我考虑过迭代对象并以某种方式处理命名空间。但我想知道使用 jQuery 或原型之类的库是否有一个简单的解决方案来解决这个问题。

* * *

## 回答 #1

> 赞同：23
> 
> 时间：2014-02-27T14:27:11.513

我建议使用 underscore.js（或者更好的 lo-dash）[extend](http://underscorejs.org/#extend)：

> ## _.extend（目的地，*来源）
> 
> 将源对象中的所有属性复制到目标对象，然后返回目标对象。***它是有序的，因此最后一个源将覆盖先前参数中的同名属性***。
> 
> ```
> _.extend({name: 'moe'}, {age: 50});
> => {name: 'moe', age: 50} 
> ```

* * *

## 回答 #2

> 赞同：12
> 
> 时间：2012-09-21T16:23:31.880

```
function update(obj/*, …*/) {
    for (var i=1; i<arguments.length; i++) {
        for (var prop in arguments[i]) {
            var val = arguments[i][prop];
            if (typeof val == "object") // this also applies to arrays or null!
                update(obj[prop], val);
            else
                obj[prop] = val;
        }
    }
    return obj;
} 
```

应该做的伎俩：`update(currentObject, updateObject)`。您可能想要添加一些类型检查，例如`Object(obj) === obj`仅使用真实对象扩展真实对象，对数组或`hasOwnProperty`测试使用正确的循环。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2016-03-16T02:08:19.467

这是一个`Object.keys`递归示例：

```
// execute object update function
update(currentObject, updateObject)

// instantiate object update function
function update (targetObject, obj) {
  Object.keys(obj).forEach(function (key) {

    // delete property if set to undefined or null
    if ( undefined === obj[key] || null === obj[key] ) {
      delete targetObject[key]
    }

    // property value is object, so recurse
    else if ( 
        'object' === typeof obj[key] 
        && !Array.isArray(obj[key]) 
    ) {

      // target property not object, overwrite with empty object
      if ( 
        !('object' === typeof targetObject[key] 
        && !Array.isArray(targetObject[key])) 
      ) {
        targetObject[key] = {}
      }

      // recurse
      update(targetObject[key], obj[key])
    }

    // set target property to update property
    else {
      targetObject[key] = obj[key]
    }
  })
} 
```

[JSFiddle 演示](https://jsfiddle.net/BloodyKnuckles/ouezexnf/)（打开控制台）。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T16:45:55.767

一个简单的实现看起来像这样。

```
function copyInto(target /*, source1, sourcen */) {
    if (!target || typeof target !== "object")
        target = {};

    if (arguments.length < 2)
        return target;

    for (var len = arguments.length - 1; len > 0; len--)
        cloneObject(arguments[len-1], arguments[len]);

    return target;
} 
```

* * *

```
function cloneObject(target, source) {
    if (!source || !target || typeof source !== "object" || typeof target !== "object")
        throw new TypeError("Invalid argument");

    for (var p in source)
        if (source.hasOwnProperty(p))
            if (source[p] && typeof source[p] === "object")
                if (target[p] && typeof target[p] === "object")
                    cloneObject(target[p], source[p]);
                else
                    target[p] = source[p];
            else 
                target[p] = source[p];
} 
```

这假定不应克隆任何继承的属性。它也不检查诸如 DOM 对象或盒装原语之类的东西。

我们需要反向迭代参数，以便从右到左完成复制。

然后我们创建一个单独的`cloneObject`函数来处理嵌套对象的递归复制，这种方式不会干扰原始对象参数的从右到左的复制。

它还确保初始目标是一个普通对象。

`cloneObject`如果将非对象传递给该函数，则该函数将引发错误。

# mongodb - 为什么每 100 个文档就会丢失一些值？

> ID：12534240
> 
> 赞同：4
> 
> 时间：2012-09-21T16:15:30.913
> 
> 标签：mongodb, mapreduce

我试图理解 map/reduce 的行为。

这是地图功能：

```
function() {
  var klass = this.error_class;
  emit('klass', { model : klass, count : 1 });
} 
```

和减少功能：

```
function(key, values) {
  var results = { count : 0, klass: { foo: 'bar' } };
  values.forEach(function(value) {
    results.count += value.count;
    results.klass[value.model] = 0;
    printjson(results);
  });
  return results;
} 
```

然后我运行它：

```
{
  "count" : 85,
  "klass" : {
    "foo" : "bar",
    "Twitter::Error::BadRequest" : 0
  }
}
{
  "count" : 86,
  "klass" : {
    "foo" : "bar",
    "Twitter::Error::BadRequest" : 0,
    "Stream:DirectMessage" : 0
  }
} 
```

在这一点上，一切都很好，但是每 100 个文档产生读锁：

```
{
  "count" : 100,
  "klass" : {
    "foo" : "bar",
    "Twitter::Error::BadRequest" : 0,
    "Stream:DirectMessage" : 0
  }
}
{ "count" : 100, "klass" : { "foo" : "bar", "undefined" : 0 } } 
```

我保留了我的密钥`foo`，我的`count`属性不断增加。问题是其他一切都变成了`undefined`.

那么为什么在我的`count`属性仍然很好的情况下丢失了对象的动态键呢？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:29:46.437

A thing to remember about your reduce function is that the values passed to it are either the output of your map function, or the return value of previous calls to reduce.

This is key - it means mapping / reducing of parts of the data can be farmed off to different machines (eg different shards of a mongo cluster) and then reduce used again to reassemble the data. It also means that mongo doesn't have to first map every value, keeping all the results in memory and then reduce them all: it can map and reduce in chunks, re-reducing where necessary.

In other words the following must be true:

```
reduce(k,[A,B,C]) == reduce(k, [A,  reduce(k,[A,B])) 
```

Your reduce function's output doesn't have a `model` property so if it gets used in a re-reduce those undefined values will crop up.

You either need to have your reduce function return something similar in format to what your map function emits so that you can process the two without distinction(usually the easiest) or else handle re-reduced values differently.

# javascript - 隐藏后照片切换不显示

> ID：12534243
> 
> 赞同：0
> 
> 时间：2012-09-21T16:15:38.260
> 
> 标签：javascript, jquery, html, css

我希望在网页上切换照片/标题。
用户点击，照片出现，然后是标题。
用户再次点击，标题消失，然后照片消失。
用户点击，照片出现，然后是标题。

第三次单击时，照片迅速出现（不动画）。这是我的代码。
(jQuery-1.8.1.min.js)

```
 $(document).ready(function() {
      $('#photo').width(0).height(0).css('opacity',0);
      $('#caption').hide();
      $('#box').toggle(
       function() {
       $('#photo').stop().show().animate(
         {
           width: '400px',
           height: '300px',
           opacity: 1
         }, 500, function() {
           $('#caption').stop().fadeIn(500);
         }); //end animate
      },
      function() {
        $('#caption').stop().hide(function() {
          $('#photo').stop().fadeOut(500);
        });
       }       
     ); // end toggle
   }); 
```

有什么建议么？
需要更多代码？

**更新**
为了让图像在每次切换时都进行动画处理，然后图像必须进行动画处理。

**EDIT2**
更新了 JSFIDDLE
**编辑：**
出现了另一个问题，这次是动画。
jsFiddle工作正常，但与实际图像[一起](http://jsfiddle.net/Nykxm/10/)使用时，它在第一个周期后不会动画。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:23:00.250

**编辑 3：**更新代码在一个周期后工作：http: [//jsfiddle.net/kLEFy/17/](http://jsfiddle.net/kLEFy/17/)

```
$(document).ready(function() {
    $('#photo').width(0).height(0).css('opacity', 0);
    $('#caption').hide();
    $('body').toggle(
        function() {
            $('#photo').stop().show().animate({
                width: '400px',
                height: '300px',
                opacity: 1
            }, 1000, function() {
                $('#caption').stop().fadeIn(1000);
            }); //end animate
        }, 
        function() {
            $('#caption').stop().hide(function(){
                $('#photo').stop().fadeOut();
                $('#photo').width(0).height(0).css('opacity', 0);
            });
        }
    );
});​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:47:39.897

我试图坚持使用您的原始代码（我刚刚在照片的停止和动画调用之间添加了 .show() ），但我看不出有什么问题。它似乎有效，[请参见此处的 jsFiddle](http://jsfiddle.net/quant/64t55/)。

**更新：**我根据海报的要求更改了“隐藏”功能，还更新了 jsFiddle 代码以反映这一点。

```
$(document).ready(function() {
    $('#photo').width(0).height(0).css('opacity', 0);
    $('#caption').hide();
    $('button').toggle(
        function() {
            console.log("show");
            $('#photo').stop().show().animate({
                width: '400px',
                height: '300px',
                opacity: 1
            }, 100, function() {
                $('#caption').stop().fadeIn(1000);
            }); //end animate
        }, 
        function() {
            console.log("hide");
            $('#caption').stop().hide(function(){
                $('#photo').stop().animate({
                    width: '0px',
                    height: '0px',
                    opacity: 0
                }, 100);
            });
        }
    );
}); 
```

# javascript - 如果 URL 包含字符串然后运行 jQuery 函数？

> ID：12534245
> 
> 赞同：4
> 
> 时间：2012-09-21T16:15:40.707
> 
> 标签：javascript, jquery

如果我的 url 包含单词“test”，则在我的网站 id 上运行 jQuery 函数

我要做的就是如果我的 url 包含“rest”字符串，然后为页面上的元素添加边距？

我添加了一个 jSfiddle 来尝试展示我到目前为止所做的事情。

```
$(document).ready(function(){         
    // How can I check to see if my url contains the word 'TEST' then run the below function?
    $('.block-widget').css('margin-top, 252px')     
}); 
```

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T16:17:09.483

用于`window.location`获取当前位置 url..

然后，您可以根据条件应用 margin top 属性。

```
$(document).ready(function(){         
     var pathname = window.location.pathname;
     if(pathname.indexOf('text') > -1){
        $('.block-widget').css('margin-top, 252px');
     }     
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T16:18:31.757

```
$(document).ready(function(){         
   if (document.url.match(/test/g)){
     $('.block-widget').css('margin-top, 252px')     
  }
}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:19:15.243

查看此链接，其中包含您需要了解的有关 URL 的详细信息。

[https://developer.mozilla.org/en-US/docs/DOM/window.location](https://developer.mozilla.org/en-US/docs/DOM/window.location)

```
$(document).ready(function(){         
    if (window.location.href.indexOf('rest') >= 0) {
      $('.block-widget').css('margin-top, 252px')     
    }
}); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T16:19:24.130

获取路径名：

`var pathname = window.location.pathname;`

然后检查它是否包含“TEST”。

`if (pathname.toLowerCase().indexOf("test") >= 0)`

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T16:19:47.273

尝试这个

```
$(document).ready(function(){         
    var patt=/test/g;
    if(patt.test(window.location.pathname)){
    $('.block-widget').css('margin-top, 252px')  
  }   

}); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-05-26T12:43:09.677

**name*='keyword'**选择器是 true 选项。

```
<input name="man-news">
<input name="milkman">
<input name="letterman2">
<input name="newmilk">

<script>
$( "input[name*='man']" ).val( "has man in it!" );
</script> 
```

资源：[https ://api.jquery.com/attribute-contains-selector/](https://api.jquery.com/attribute-contains-selector/)

# sql - 使用 desc 后的 SQL Server 逆序

> ID：12534248
> 
> 赞同：23
> 
> 时间：2012-09-21T16:15:47.463
> 
> 标签：sql, sql-server

我想在使用 desc 后反转 SQL Server 中结果的顺序。例如：

```
SELECT TOP 3 * FROM table ORDER BY id DESC 
```

返回结果：

```
505
504
503 
```

但随后我想将结果翻转为如下所示：

```
503
504
505 
```

我试过了

```
SELECT * FROM (SELECT TOP 3 * FROM table ORDER BY id DESC) ORDER BY id ASC 
```

但这没有用。我该如何解决？

* * *

## 回答 #1

> 赞同：27
> 
> 时间：2012-09-21T16:18:56.480

只要您为子查询设置别名，这应该可以工作。

```
SELECT q.* 
    FROM (SELECT TOP 3 * 
              FROM table 
              ORDER BY id DESC) q
    ORDER BY q.id ASC 
```

* * *

## 回答 #2

> 赞同：6
> 
> 时间：2012-09-21T16:20:40.663

我想你忘记了子选择别名

```
SELECT * 
FROM (
    SELECT TOP 3 * 
    FROM table 
    ORDER BY id DESC
) s
ORDER BY id ASC 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T16:19:05.580

`SELECT * FROM (SELECT TOP 3 * FROM table ORDER BY id DESC) As AliasName ORDER BY id ASC`

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T16:19:25.340

```
;WITH cte
AS
(
   SELECT *, ROW_NUMBER() OVER(ORDER BY id DESC) rank
   FROM table
)
SELECT * 
FROM cte
WHERE rank <= 3 
ORDER BY id ASC 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T16:19:10.830

```
SELECT * FROM (SELECT TOP 3 * FROM table ORDER BY id DESC) AS r ORDER BY r.id ASC 
```

我想到了。我需要制作一个临时表并使用 AS 命名。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-07-08T04:24:17.713

```
SELECT *
FROM (
    SELECT *
    FROM table
    ORDER BY ID DESC
) TMP
ORDER BY TMP.ID ASC 
```

# android - 我可以使用 sharedPreferences 文件中的项目填充 AlertDialog 吗？

> ID：12534258
> 
> 赞同：1
> 
> 时间：2012-09-21T16:16:40.523
> 
> 标签：android, sharedpreferences, android-alertdialog

我已经设置了 SharedPreferences，如下所示：

```
Editor editor = getSharedPreferences("FileName", MODE_PRIVATE).edit();
        editor.clear();
        editor.putString("chicago", "Chicago, IL");
        editor.putString("london", "London, UK");
            editor.putString("sanjose", "San Jose, CA");
            editor.putString("washington", "Dulles, VA");
        editor.commit(); 
```

目前我正在从数组中填充 AlertDialog，并且我想使用 SharedPreferences 文件，以便最终可以动态添加项目等。

我现在用来填充的代码是：

```
private void openServerDialog() {
        new AlertDialog.Builder(this)   
        .setTitle(R.string.server_title)
        .setItems(R.array.serverchoice, 
                new DialogInterface.OnClickListener() {
            public void onClick(DialogInterface dialoginterface,
                    int i) {
                setServer(i);   
            }
        })
        .show();
    } 
```

所以我只想停止使用数组“serverchoice”，而是使用 SharedPreferences 文件中的字符串。

提前致谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:23:57.283

您可以使用 SharedPreferences 对象的 getString() 方法从共享首选项中检索字符串。请参阅[SharedPreferences 的文档](https://developer.android.com/reference/android/content/SharedPreferences.html)。

**编辑：** 在 OP 发表评论后调整答案。

```
private void openServerDialog() {
    SharedPreferences sharedPrefs = getSharedPreferences("FileName", MODE_PRIVATE);
    Map<String, ?> sharedPrefsMap = sharedPrefs.getAll();
    ArrayList<String> stringArrayList = sharedPrefsMap.values();
    CharSequence[] prefsCharSequence = stringArrayList.toArray(new CharSequence[stringArrayList.size()]);

    new AlertDialog.Builder(this)   
    .setTitle(R.string.server_title)
    .setItems(prefsCharSequence, 
    new DialogInterface.OnClickListener() {
        public void onClick(DialogInterface dialoginterface,
            int i) {
            setServer(i);   
        }
    })
    .show();
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:25:02.320

```
Use getAll() method in SharedPreferences to get all the keys. And get all the keys and values and display in dialog.

SharedPreferences prefs = getSharedPreferences("FileName", MODE_PRIVATE);
    Map<String, ?> map = prefs.getAll();
    Set<String> keys = map.keySet();
    for(String key : keys) {
        Log.d(TAG, "key : " + key);
            Log.d(TAG, "value : " + map.get(key));
    } 
```

# frameworks - System.ArgumentException：modelEntityContainerName 参数包含无效字符

> ID：12534260
> 
> 赞同：6
> 
> 时间：2012-09-21T16:16:50.400
> 
> 标签：frameworks, entity, reverse

我尝试将 Entity Frameworks Power Tools Reverse Engineer Code First 用于 SQLServer 数据库并收到以下错误：

> System.ArgumentException：modelEntityContainerName 参数“testContext”包含无效字符。
>     在 System.Data.Entity.Design.EntityModelSchemaGenerator..ctor(EntityContainer storeEntityContainer, String namespaceName, String modelEntityContainerName)
>     在 Microsoft.DbContextPackage.Handlers.ReverseEngineerCodeFirstHandler.ReverseEngineerCodeFirst（项目项目）

我可以做些什么来继续或避免此错误或解决它。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-30T17:32:04.017

我有同样的问题。我的数据库被命名为 sots-version-005，并且代码没有转义这个名称。答案是重命名数据库，希望您处于一个容易做到的开发环境中。

我使用 SQL Management Studio，右键单击数据库，并将其重命名为“sots5”，删除除字母数字以外的所有字符。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-01-14T16:24:37.123

我目前正在使用 VS 2013 和实体框架版本 6.1.2 并遇到相同的错误。

我在实体框架 codeplex 网站上找到了 ErikEJ 的这篇文章：http: [//entityframework.codeplex.com/workitem/898#CommentContainer9](http://entityframework.codeplex.com/workitem/898#CommentContainer9)

“@Greg - 此问题未在 Power Tools 中修复，但已在 6.1 版工具（数据库中的代码优先）中修复（仅使用 SQL Compact 测试）”

因此，目前 PowerTools 不能用于此。然而，实体框架 6 本身支持这一点。只需按照此视频中描述的工作流程：http: [//msdn.microsoft.com/en-us/data/jj200620](http://msdn.microsoft.com/en-us/data/jj200620)

您将实体数据模型项添加到项目中，然后选择“数据库中的代码优先”。

请注意，生成的类与 Power Tools 创建的类略有不同。Power Tools 仅在配置数据库时使用 Fluent API。另一方面，EF 向导默认使用数据注释，仅在必要时使用 Fluent API。但是，也可以更改模板文件以便仅使用 Fluent API。

# wordpress - 从没有评论的帖子中删除 Wordpress“评论已关闭”消息，可能吗？

> ID：12534264
> 
> 赞同：0
> 
> 时间：2012-09-21T16:17:06.623
> 
> 标签：wordpress, comments, action, hook

Wordpress`comment_form_comments_closed`钩子会在评论关闭时触发，即使它们从未对帖子打开，因此，“评论已关闭”消息将在每个评论被禁用的帖子后显示。如果从未为帖子启用评论，有没有办法删除该消息？应该可以有一个没有评论的帖子和一个不显示此消息的评论表单。另一方面，包含已关闭评论的帖子应显示该消息。

```
function my_comments_closed() {
        if ( ! is_page() AND post_type_supports( get_post_type(), 'comments' ) ) : ?>
            <p class="nocomments"><?php _e( 'Comments are closed', 'mytheme' ); ?></p>
        <?php endif;
    }
    add_action( 'comment_form_comments_closed', 'my_comments_closed' ); 
```

# css - 将鼠标悬停在字体大小和背景大小上

> ID：12534269
> 
> 赞同：0
> 
> 时间：2012-09-21T16:17:28.870
> 
> 标签：css, css-transitions

我正在尝试`Hover Off effect`使用 CSS 实现一个不错的效果。[这里](http://css-tricks.com/different-transitions-for-hover-on-hover-off/)有一个很好的例子，但我不能用属性`background-size`和`font-size`.

效果只是在鼠标悬停时放大图像和文本，并在悬停时恢复原始状态，但以一种干净的方式（使用-webkit-transition）。此代码失败：

```
.nice a {
    background:  url(../my_image.png) no-repeat;
    background-size: 40px 37px;
    font-size: 12px;

    /* HOVER OFF */
    -webkit-transition: background-size 2s;
    -webkit-transition: font-size 2s;
}

.nice a:hover{
    background: url(../my_image.png) no-repeat ;
    background-size: 43px 39px;
    font-size: 13px;

    /* HOVER ON */
    -webkit-transition: background-size 2s;
    -webkit-transition: font-size 2s;
} 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:22:07.253

您可以使用`transform:scale(value);`

[测试一下](http://jsfiddle.net/gionaf/GkRhM/)

```
.nice a {
    font-size: 12px;
    display:block;
    -webkit-transition:all 2s ease;
    -webkit-transform-origin:top left;
}

.nice a:hover {
    -webkit-transform:scale(1.3);
}​ 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T20:14:11.440

**我认为**问题在于您提供的代码没有足够的“步骤”或“关键帧”来让动画顺利运行。

请参阅此演示：[http](http://dabblet.com/gist/3763579) ://dabblet.com/gist/3763579 。*使用您的属性的框[右侧的一个]，时钟有 2 秒的时间来为一两个像素设置动画，因此在工件跳转*到下一个像素之前会有明显的延迟。与动画回到原处相同，因此过渡不流畅。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-22T09:24:12.210

这是工作[演示](http://jsfiddle.net/kongaraju/xUsDU/4/)

和教程以了解更多有关[背景的信息](http://www.css3.info/preview/background-size/)

这是使用变换的另一种方法。

```
.nice a { -webkit-transition: font-size .2s ease-in-out; }
.nice a:hover { -webkit-transform: scale(1.1); } 
```

关键帧的例子（缺点不是一直悬停，它不会停留）。

```
@-webkit-keyframes  scalar{
    from{
         background-size: 40px 37px;
    font-size: 22px;
}
to{
    background-size: 103px 79px;
    font-size: 32px;
}
}

.nice2 a{
    background:  skyblue;
    background-image:url("http://lorempixel.com/300/200/abstract");
   background-repeat:no-repeat;
    background-size: 40px 37px;
    font-size: 22px;
    color:white;
}
.nice2 a:hover{
    -webkit-animation: scalar 1s;
}
​ 
```

[更新了带有关键帧](http://jsfiddle.net/kongaraju/xUsDU/5/)的演示

我们已经看到了三种方法来做到这一点。让我们决定哪个最适合它。

1.  **过渡**，使外观光滑美观。
2.  **在内容增长时模糊的**变换。****
***   **导致高端但...的**关键帧******

 ****选择是你的！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T16:21:59.230

我的错，这有效：

```
/* HOVER OFF */
-webkit-transition-property: background-size, font-size;
o-transition-property: background-size, font-size;
-moz-transition-property: background-size, font-size;
transition-property: background-size, font-size;

-webkit-transition-duration: 0.5s;
-o-transition-duration: 0.5s;
-moz-transition-duration: 0.5s;
transition-duration: 0.5s; 
```****

# reporting-services - 使用 SSRS 数据驱动订阅作为数据驱动计划

> ID：12534270
> 
> 赞同：0
> 
> 时间：2012-09-21T16:17:29.273
> 
> 标签：reporting-services, ssrs-2008

我想要一个数据驱动的“时间表”，这意味着每个报告都有其独特的时间（存储在每分钟填充的表格中）。

```
For example: (not all fields included)

To                 Parameter     Format    NextRunDate         ReportStatus
bob[at]email.com   SalesRegion1  Email     1/1/2012 9:00:00   'Unprocessed'
joe[at]email.com   SalesRegion2  Email     1/1/2012 9:05:00   'Unprocessed'
sara[at]email.com  SalesRegion1  Email     1/1/2012 8:55:00   'Processed' 
```

如果时间当前是 2012 年 1 月 1 日 9:01:00，我的数据驱动订阅“where 语句”将类似于...

```
where NextRunDate < GETDATE() -- in the past
   and ReportStatus = 'Unprocessed' -- <--here is my problem 
```

此查询每分钟运行一次。它应该只为 bob[at]email.com 提取报告...

我的问题在这里：我需要添加逻辑，在发送报告后切换报告状态和“已处理”......否则它每次都会运行每个报告......

想法？其他让这个工作的方法？

*运行 SQL Server 2k8 企业版*

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-20T03:47:05.360

如果报告以类似的周期运行（如您的代码中每分钟或每五分钟），您可以使用 BETWEEN 和 DATEADD 减去分钟数（无论如何），以获取您上次运行报告到现在的时间。

{WHERE NextRunDate BETWEEN DATEADD(mi, -5, GETDATE()) AND GETDATE()}

我希望这会有所帮助。

# perl - 用 sed/perl 替换特殊字符时出错

> ID：12534271
> 
> 赞同：1
> 
> 时间：2012-09-21T16:17:29.740
> 
> 标签：perl, shell, unix, sed, nawk

我正在尝试使用 sed/perl 替换一些我遇到错误的特殊字符。

在下面的命令中，我试图替换 SEARCHFIELDAPP、OLD_STRING、NEW_STRING 等的值；

```
Server1> SERVER_COMMAND="perl -F'\|' -i -lape  'if (\$F[0] eq \"SEARCHFIELDAPP\" && \$F[1] eq \"SEARCHFIELDDB\" && \$F[6] eq \"SEARCHFIELDUNM\" )  { s/\|OLD_STRING\|/\|NEW_STRING\|/g; s/\|LAST_UPDATE_DT/\|CURR_UPDATE_DT/g }' " 
```

上面的命令在控制台打印时如下图所示。

```
Server1> echo $SERVER_COMMAND
perl -F'\|' -i -lape 'if ($F[0] eq "SEARCHFIELDAPP" && $F[1] eq "SEARCHFIELDDB" && $F[6] eq "SEARCHFIELDUNM" ) { s/\|OLD_STRING\|/\|NEW_STRING\|/g; s/\|LAST_UPDATE_DT/\|CURR_UPDATE_DT/g }' 
```

在上面的命令字符串中，我试图替换几个字符串：

```
Server1> echo $SERVER_COMMAND | sed -e "s|SEARCHFIELDAPP|ALLOWSERVICE|;s|SEARCHFIELDDB|DataDup|;s|SEARCHFIELDUNM|mogga|;s|OLD_STRING|mogga_dev_$%^|;s|NEW_STRING|mogga&*%^$|;s|LAST_UPDATE_DT|09-21-2012:11:09:41|;s|CURR_UPDATE_DT|09-21-2012:11:18:17|;" 
```

当我这样做时，我得到如下所示的输出：

```
perl -F'\|' -i -lape 'if ($F[0] eq "ALLOWSERVICE" && $F[1] eq "DataDup" && $F[6] eq "mogga" ) { s/\|mogga_dev_$%^\|/\|moggaNEW_STRING*%^$\|/g; s/\|09-21-2012:11:09:41/\|09-21-2012:11:18:17/g }' 
```

这里的问题是替换 **s|NEW_STRING|mogga&*%^$|;** . 我期待**NEW_STRING**被**mogga&*%^$** 取代，但它正在被**moggaNEW_STRING*%^$**取代。

这里**&** 被解释为**NEW_STRING**。当我逃避**&**时，它工作正常。但是我从我在子脚本中动态使用的父脚本中获取了这个字符串。我正在寻找某种方法来成功替换字符串，而不会转义任何字符。转义将使我用我想避免的转义字符修改传入的字符串。

我通过使用 perl one liner 进行替换来尝试相同的方法。但在这里我也面临着特殊字符的类似问题。

```
Server1> echo $SERVER_COMMAND |  perl -p -i -e 's|SEARCHFIELDAPP|ALLOWSERVICE|;s|SEARCHFIELDDB|DataDup|;s|SEARCHFIELDUNM|mogga|;s|OLD_STRING|mogga_dev_$%^|;s|NEW_STRING|mogga&*%^|;s|LAST_UPDATE_DT|09-21-2012:11:09:41|;s|CURR_UPDATE_DT|09-21-2012:11:18:17|;' 
```

下面是替换后的样子：

```
perl -F'\|' -i -lape 'if ($F[0] eq "ALLOWSERVICE" && $F[1] eq "DataDup" && $F[6] eq "mogga" ) { s/\|mogga_dev_0^\|/\|mogga&*%^\|/g; s/\|09-21-2012:11:09:41/\|09-21-2012:11:18:17/g }' 
```

我看到字符串**OLD_STRING**应该被替换为字符串**mogga_dev_$%^**被替换为**mogga_dev_0^**。这里**$%**正在转换为**0**

在这种情况下，我也可以通过转义有问题的字符来获得期望。

除了转义特殊字符之外，您能否告诉我如何避免这种解释？

谢谢

* * *

在威廉的输入之后，我能够在没有错误的情况下实现以下目标：

```
perl -F'\|' -i -lape 'if ($F[0] eq "ALLOWSERVICE" && $F[1] eq "DataDup" && $F[6] eq "mogga" ) { s/\|mogga_dev_!$%^\|/\|mogga!&*%^$@*&^%\|/g; s/\|09-21-2012:11:09:41/\|09-21-2012:11:18:17/g }' 
```

但是当我在一个文件上执行这个替换时。我没有在文件中看到字符串**mogga_dev_!$%^**没有被**mogga!& *%^$@* &^%**替换。

由于特殊字符没有转义，我认为没有发生替换。但我不想使用转义来转义特殊字符。你能帮我用其他方法用文件中的特殊字符替换字符串吗？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:29:51.157

在 perl 中，避免任何插值的简单方法是`'`用作分隔符。例如。

```
perl -pe "s'OLD_STRING'mogga_dev_\$%^'" 
```

在这种情况下，我们必须转义`$`以将字符串`mogga_dev_$%^`转换为 perl，但也许这可以帮助您。我不清楚您要避免向哪些字符串添加转义字符，如果您在 string`mogga_dev_$%^`中有字符串`NEW_STRING`，您可以这样做：

```
perl -pe "s'"$OLD_STRING"'"$NEW_STRING"'" 
```

# c# - DataGridView DataSource 未使用 SelectAll 复选框方法更新

> ID：12534274
> 
> 赞同：0
> 
> 时间：2012-09-21T16:17:48.320
> 
> 标签：c#, asp.net, datagridview

我有以下代码在`CheckedChanged`复选框事件上运行。

```
/// <summary>
/// Determine whether to select all order records
/// </summary>
/// <param name="sender">determine sender object</param>
/// <param name="e">event args</param>
private void CbSelectAll_CheckedChanged(object sender, EventArgs e)
{
    if (this.dgvOrderLines.Rows.Count != 0)
    {
        bool value = this.CbSelectAll.Checked;

        for (int i = 0; i < this.dgvOrderLines.RowCount; i++)
        {
            this.dgvOrderLines[0, i].Value = value;
        }

        if (value)
        {
            this.btnFailed.Enabled = true;
            this.BtnDownload.Enabled = true;
        }
        else
        {
            this.btnFailed.Enabled = false;
            this.BtnDownload.Enabled = false;
        }
    }
} 
```

问题是这似乎并没有真正更新下划线`DataSource`。它循环通过的复选框列在视觉上更新得很好。

因此，当我执行以下操作时，在用户按下按钮后，选中的行在复选框列中仍然有一个 false 值。

```
Order[] orderlines = ((SortableBindingList<Order>)this.dgvOrderLines.DataSource).Where(x => x.Include == true).ToArray(); 
```

关于我要去哪里错的任何想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T08:32:58.467

所以事实证明，上述方法工作得很好。

周末后回到它，我发现奇怪的是，在我们处理我们想要的东西之前调用了该方法，而不是之后。

这是过早为新数据重置 gui 的情况。

# r - 更改单列名称（并通过函数指向它）

> ID：12534277
> 
> 赞同：0
> 
> 时间：2012-09-21T16:17:57.713
> 
> 标签：r

编码：

```
A <- matrix(NA, nrow = 10, ncol = 3)
colnames(A) <- paste('trial', 1:3) 
```

让我想用不同的东西来命名第三列`trial 3`：我该怎么办？

现在没事了：

```
library(vars)
data(Canada)
var.2c <- VAR(Canada, p = 2, type = "const")
pred <- predict(var.2c, n.ahead = 8, ci = 0.95) 
```

如果我想查看 的第一个值`pred`，根据`predict`这里返回的方法，我必须输入

```
> pred$fcst$e[1]
[1] 962.6557 
```

您可以看到我必须指定时间序列名称`e`才能获得我想要的值。如果将上面的代码插入到函数中，则无法在`pred$fcst$e[1]`不指定时间序列名称的情况下调用，因此无法将另一个时间序列数据帧传递给我们的自定义函数。

示例：假设`X`为时间序列数据框。然后

```
pred.var <- function(X) {
   var.2c <- VAR(X, p = 2, type = 'const')
   pred <- predict(var.2c, n.ahead = 8, ci = .95)
   # return(pred$fcst$...) # Here lies the issue, because function must know X column name
} 
```

正如您从上面的示例中看到的那样，函数`pred.var`必须知道`X`它必须返回预测的列的名称，但除非从`X`.

任何想法？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:49:35.110

您可以通过`$e`或访问列表的元素`[["e"]]`，在第二个中，您可以使用任何字符变量。所以这两件事给出了相同的值。

```
pred$fcst$e[1]
pred$fcst[[ colnames(Canada)[1] ]][1] 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:41:17.827

那个怎么样？

```
colnames(A) <- c("trial1","trial2","something-different")

head(A)
     trial1 trial2 something-different
[1,]     NA     NA                  NA
[2,]     NA     NA                  NA
[3,]     NA     NA                  NA
[4,]     NA     NA                  NA
[5,]     NA     NA                  NA
[6,]     NA     NA                  NA 
```

当然，“不同的东西”只是任何名称。

# django - 查找用户名

> ID：12534278
> 
> 赞同：0
> 
> 时间：2012-09-21T16:18:04.747
> 
> 标签：django

我正在为每个用户创建一个页面，如何在我的 django 用户模型中查找用户名

```
views.py
    def user_page(request,user):
    user = User.objects.filter(user =user.username)
    return render_to_response('user_page.html',"user":user,context_instance=RequestContext(request)) 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:19:58.373

```
def user_page(request,username):
    user = User.objects.filter(username=username)
    return render_to_response('user_page.html',{"user":user},context_instance=RequestContext(request)) 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:23:05.230

```
from django.contrib.auth.models import User
from django.shortcuts import get_object_or_404

def user_page(request, username):
    user = get_object_or_404(User, username=username)

    return render_to_response('user_page.html',{"user":user},context_instance=RequestContext(request)) 
```

# android - 一行中带有图标、选项卡和菜单按钮的操作栏

> ID：12534285
> 
> 赞同：1
> 
> 时间：2012-09-21T16:18:44.033
> 
> 标签：android, actionbarsherlock

我想`ActionBar`在一行中使用 Icon、Tabs 和 MenuButton 创建，但是通过使用下一个代码，我得到了两行，就像在 PrintScreen 上一样：

**爪哇：**

```
viewPager = (ViewPager) findViewById(R.id.pager);
bar = getSupportActionBar();
bar.setIcon(R.drawable.ic_map);
bar.setDisplayShowHomeEnabled(false);
bar.setDisplayShowTitleEnabled(false);
bar.setNavigationMode(ActionBar.NAVIGATION_MODE_TABS);

TabsAdapter tabsAdapter = new TabsAdapter(this, viewPager);
tabsAdapter.addTab(bar.newTab().setText("A"), ClientTemplates.class, null);
tabsAdapter.addTab(bar.newTab().setText("B"), ClientWalletsCards.class, null);
tabsAdapter.addTab(bar.newTab().setText("C"), ClientReports.class, null); 
```

**XML:**

```
<LinearLayout
    xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:orientation="vertical">

<android.support.v4.view.ViewPager
        android:id="@+id/pager"
        android:layout_width="match_parent"
        android:layout_height="0dp"
        android:layout_weight="1"
        android:paddingRight="1px"
        android:paddingLeft="1px"/> 
```

为了只获得 1 行，我必须在代码中进行哪些更改？

![](../Images/351b332a9643ec22a6ee29e971adf205.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:21:05.720

AFAIK，你无法控制这一点。Android（或者，在这种情况下，ActionBarSherlock）会将操作栏选项卡放置在它想要的位置，甚至在需要时将它们从选项卡转换为下拉列表。

但是，如果您使用`android:uiOptions="splitActionBarWhenNarrow"`，则可以将溢出菜单按钮线放在屏幕底部。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-22T07:20:15.580

Actionbar CustomView 是实现你想要的效果的好方法，自己做一些标签，像这样：

```
<?xml version="1.0" encoding="utf-8"?>
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="wrap_content"
    android:layout_height="match_parent"
    android:layout_gravity="right">

    <RelativeLayout 
        android:layout_width="wrap_content"
        android:layout_height="wrap_content">
        <RelativeLayout 
            android:id="@+id/tabone"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_marginLeft="@dimen/actionbar_margin">
            <ImageView
                android:contentDescription="@string/tabone_discription"
                android:id="@+id/mainpage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/account_dark"
                android:layout_centerInParent="true"
                />
        </RelativeLayout>

        <ImageView 
            android:contentDescription="@string/divider_discription"
            android:id="@+id/divider1"
            android:background="@drawable/list_divider_holo_light"
            android:layout_height="match_parent"
            android:layout_marginTop="@dimen/divider_margin_top_bottom"
            android:layout_marginBottom="@dimen/divider_margin_top_bottom"
            android:layout_toRightOf="@id/tabone"
            android:layout_marginLeft="@dimen/actionbar_margin"
            android:layout_width="@dimen/divider_width"/>

        <RelativeLayout 
            android:id="@+id/tabtwo"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_toRightOf="@id/divider1"
            android:layout_marginLeft="@dimen/actionbar_margin">
            <ImageView 
                android:contentDescription="@string/tabtwo_discription"
                android:id="@+id/atpage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/at_dark"
                android:layout_centerInParent="true"
                />
        </RelativeLayout>

        <ImageView 
            android:contentDescription="@string/divider_discription"
            android:id="@+id/divider2"
            android:background="@drawable/list_divider_holo_light"
            android:layout_height="match_parent"
            android:layout_marginTop="@dimen/divider_margin_top_bottom"
            android:layout_marginBottom="@dimen/divider_margin_top_bottom"
            android:layout_marginLeft="@dimen/actionbar_margin"
            android:layout_toRightOf="@id/tabtwo"
            android:layout_width="@dimen/divider_width"/>

        <RelativeLayout 
            android:id="@+id/tabthree"
            android:layout_width="wrap_content"
            android:layout_height="match_parent"
            android:layout_toRightOf="@id/divider2"
            android:layout_marginLeft="@dimen/actionbar_margin">
            <ImageView 
                android:contentDescription="@string/tabthree_discription"
                android:id="@+id/replaypage"
                android:layout_width="wrap_content"
                android:layout_height="wrap_content"
                android:background="@drawable/comment_dark"
                android:layout_centerInParent="true"
                />
        </RelativeLayout>

        <View 
            android:layout_height="0dp"
            android:layout_width="0dp"
            android:layout_toRightOf="@id/tabthree"
            android:layout_marginLeft="12dp"/>

    </RelativeLayout>

    <ImageView 
        android:contentDescription="@string/actionbar_line"
        android:layout_height="3dp"
        android:layout_width="0dp"
        android:id="@+id/actionbarline"
        android:background="@drawable/ab_solid_custom_blue_inverse_holo"
        />

</RelativeLayout> 
```

然后，在您的活动 java 文件中：

```
mActionBar.setDisplayShowCustomEnabled(true);
mActionBar.setCustomView(R.layout.ab_customview); 
```

我没有使用标签，但结果看起来我在操作栏的同一行上有三个标签:)

# c# - SharePoint WebPart 自定义设置 - 最佳实践

> ID：12534286
> 
> 赞同：0
> 
> 时间：2012-09-21T16:18:44.357
> 
> 标签：c#, sharepoint-2010

我试图确定创建具有自定义属性的 SharePoint WebPart 的最佳做法是什么。我将详细介绍背景，因为我可能以完全错误的方式这样做。

我拿了一张 DevExpress 图表，上面有很多设置。然后我决定公开其中的一些设置，并最终得到一个看起来像这样的 WebPart：

```
public class MyWebPart : WebPart
{
   public DataTable { get; set; }
   public String ConnectionString { get; set; }
   public String Query { get; set; }

   public override void DataBind() 
   {
      UpdateMyTable(ConnectionString, Query);
      this.chartControl.DataSource = this.DataTable;
   }
} 
```

我需要在此 Web 部件上添加一个完整的负载更多设置，一些是字符串的单个项目，以及对应于系列的其他项目（例如绑定值、图表类型）。因此，我将设置从 WebPart 中移出，最终得到了更类似于以下内容的内容：

```
public class MyWebPart : WebPart
{
   public DataTable { get; set; }
   public ChartSettings { get; set; }

   public override void DataBind() 
   {
      UpdateMyTable(ConnectionString, Query);
      this.chartControl.DataSource = this.DataTable;
   }
}

public ChartSettings
{
    public List<SeriesSettings> Series { get; set; }
} 
```

我使我的设置类可序列化，并在我的 Web 部件的属性上添加了一个 Personalizable 属性。这可以通过网络正常工作。

如果我尝试在 SharePoint 设计器中打开页面，但它会抱怨它无法从其字符串表示中创建 ChartSettings（和 DataTable）。我了解到这是因为设置公开为字符串。显然DataTable我可以抑制序列化。

我的问题最终是，我是否遵循正确的方法，将设置转移到课程中？或者我应该将所有设置保留在我的 webpart 上（将大量系列设置保存在不同的数组中会很麻烦），还是有完全不同的方法？如果您可以向我指出任何支持您的建议的参考资料（例如 MSDN），那将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:31:53.870

我个人的经验（有些人可能不同意）是让 WebPart 尽可能的薄。WebParts 在以下方面似乎很尴尬：配置、错误处理和日志记录、跟踪等。我发现将我的大部分开发工作放到 localhost:8080 上的 WS (WebService/WCF) 中要容易得多。webpart 中的代码很简单：调用 WS 并让它完成所有工作。Webpart 中的配置现在很简单，因为 localhost 总是很容易找到。WS/WCF 的开发工具非常强大。WS/WCF 中的配置、调试、错误处理、日志记录、跟踪都简单得多。更好的是，我制作了一个简单的夹具（Winform/Webform）来调用/测试我的 WS 层。使用这种架构，您可以将代码放在开发工具最强大的地方。它类似于 MVC 模式背后的基本原理。

# clojure - 为什么这个以 println 开头的匿名函数会导致 NullPointerException？

> ID：12534287
> 
> 赞同：6
> 
> 时间：2012-09-21T16:18:46.717
> 
> 标签：clojure

我正在学习`pmap`并编写以下函数：

```
(pmap #((println "hello from " (-> (Thread/currentThread) .getName)) 
         (+ %1 %2)) 
   [1 1 1] [-1 -1 -1]) 
```

运行时，结果是`NullPointerException`

```
(hello from  clojure-agent-send-off-pool-4
hello from  clojure-agent-send-off-pool-3
hello from  clojure-agent-send-off-pool-5
NullPointerException   user/eval55/fn--56 (NO_SOURCE_FILE:11) 
```

为什么会这样？我已经理解并观察到 ​​a 的主体`fn`是一个隐含的`do`。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T16:21:39.417

匿名`fn`文字`#()`没有隐含的`do`.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T19:35:47.183

您有`println`2 个括号，因此对结果进行了`println`评估。 `println`总是返回 nil，因此返回 NullPointerException。

尝试从以下内容中删除多余的括号`#()`：

```
 (pmap #(println "hello from " 
         (-> (Thread/currentThread) .getName) 
         (+ %1 %2)) 
          [1 1 1] [-1 -1 -1] ) 
```

编辑：

然后，您将需要`do`其他评论中提到的内容，例如：

```
(pmap #(do (println "hello from " 
     (-> (Thread/currentThread) .getName)) 
     (+ %1 %2)) 
      [1 1 1] [-1 -1 -1] ) 
```

`do`阅读器宏中必需的原因`#()`不是函数不包含隐式`do`，而是与宏扩展的方式有关。基本上，该宏采用单一形式，因此需要显式`do`.

# php - 将上传文件脚本转换为上传网址

> ID：12534288
> 
> 赞同：0
> 
> 时间：2012-09-21T16:18:53.767
> 
> 标签：php

我有上传脚本，它以通常的方式完成上传工作，比如从计算机浏览文件并上传，但我想将现有脚本转换为从 url 上传。例如，如果我粘贴视频文件的直接链接 url，它应该上传到我的服务器。我可以使用 php 复制方法和 feof 来完成这项工作，但我想使用我现有的脚本，因为其他一些数据与我尝试使用上述两种方法的上传脚本有关，但它不起作用。

将此代码转换为接受远程 url 上传

```
 <form enctype="multipart/form-data" id="form1" method="post" action="">

    <p><label>Upload videos</label>     
    <input type="file" name="video">
            <span>Only mp4 is accepted</span>   
                    <input type="submit" value="Submit" class="button"></p> 
```

```
 if (!eregi(".mp4$",$_FILES['video']['name'])) {

                 die("Unavailable mp4 format");
    }

    $uri = save_file($_FILES['video'],array('mp4'));        

    function save_file($file) {
 $allowed_ext = array('mp4');

 $ext = $file['name'];

if (in_array($ext, $allowed_ext)) {
die('Sorry, the file type is incorrect:'.$file['name']);
}
$fname = date("H_i",time()).'_'.get_rand(3);
$dir = date("Ym",time());
$folder = 'uploads/userfiles/'.$dir;
 $uri = $folder.'/'.$fname.'.'.$ext;
if (!is_dir($folder))
mkdir($folder, 0777);
if (copy($file['tmp_name'],$uri))
return $uri;
else {
return false;}}
?> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:21:38.617

如果你得到一个 URL，你就没有得到一个文件上传，所以你不能只使用文件上传脚本并希望它能够工作。只需使用该`copy()`功能从 URL 获取文件并将其保存到您的服务器。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:23:35.423

您应该使用“http_get”从另一台服务器**下载文件。**

```
$response = http_get($url); 
```

# r - 需要帮助在 R 中格式化日期

> ID：12534297
> 
> 赞同：1
> 
> 时间：2012-09-21T16:19:23.820
> 
> 标签：r, ggplot2

我正在尝试按日期获取活动计数的简单条形字符；但是，当我将数据导入 R 时，它要么跳过某些记录，要么没有正确转换日期格式。

这是我正在使用的脚本：

```
ua <- read.table('report_users_activities_byrole 2.txt',sep='|',header=T)
qplot(date, 
      data=ua, 
      geom="bar", 
      weight=count, 
      ylab="User Count", 
      fill=factor(un_region)) + 
    opts(axis.text.x =theme_text(angle=45, size=5)) 
```

还有我的约会

```
 head(ua)

        date                 role                                         name   un_region                un_subregion               us_state count
1  2012-06-21   ENTREPRENEUR         Australia                                    Oceania     Australia and New Zealand                             2
2  2012-06-21   ENTREPRENEUR         Belgium                                      Europe      Western Europe                                        1
3  2012-06-21   ENTREPRENEUR         Bosnia and Herzegovina                       Europe      Southern Europe                                       1 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:52:17.047

我怀疑你需要类似的东西

```
 ua[,"Date"] <- as.Date(ua[,"Date"]) 
```

将从读取文件中获得的日期的文本表示形式转换为实际的日期类型。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:58:24.667

不确定您的代码有什么问题，但这样的事情应该可以工作（这是[http://had.co.nz/ggplot2/scale_date.html](http://had.co.nz/ggplot2/scale_date.html)示例的一个版本）

```
df = data.frame(date=sample(seq(Sys.Date(), len=100, by="1 day"),size=100,replace=TRUE))
qplot(x=date,data=df,geom="bar") 
```

`df`是一个 data.frame，其中某些日期比其他日期出现得更频繁（即 sample() 函数）。不确定为什么要在 qplot() 调用中使用“权重”参数。还要确保您的日期变量是正确的日期（不是字符串），即

```
str(df$date) 
```

除此以外

```
 qplot(x=factor(date),data=df,geom="bar") 
```

应该也可以。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T17:59:24.287

看起来我的数据提取存在一些编码问题。我使用谷歌细化来清理导入，然后 `ua <- read.csv("~/Desktop/R Working/report_users_activities_byrole.csv")`它工作了

# ruby - 我应该将 EM::Synchrony::Multi 或 EM::Synchrony::FiberIterator 与 Goliath 一起使用吗？

> ID：12534300
> 
> 赞同：0
> 
> 时间：2012-09-21T16:19:24.507
> 
> 标签：ruby, redis, eventmachine, goliath

也许这是错误的方法，但我正在[尝试将 Goliath 中的](https://github.com/postrank-labs/goliath/wiki/Asynchronous-Processing) [em-hiredis](https://github.com/igrigorik/em-synchrony/blob/master/lib/em-synchrony/em-hiredis.rb)放置和查找与`EM::Synchrony::Multi`or并行化`EM::Synchrony::FiberIterator`。但是，我似乎无法访问[在 config 中初始化的](https://github.com/postrank-labs/goliath/wiki/Configuration)基本值。我不断收到`method_missing`错误。

这是我正在尝试做的基本淡化版本：

```
/lib/config/try.rb

config['redisUri'] = 'redis://localhost:6379/0'
config['redis_db'] ||= EM::Hiredis.connect
config['user_agent'] = "MyCrawler Mozilla/5.0 Compat etc." 
```

这是基本的歌利亚设置

```
/try.rb

require "goliath"
require "em-hiredis"
require "em-synchrony/fiber_iterator"
require "em-synchrony/em-hiredis"
require "em-synchrony/em-multi"

class Try < Goliath::API
  use Goliath::Rack::Params
  use Goliath::Rack::DefaultMimeType

  def response(env)
    case env['REQUEST_PATH']
    when "/start" then
      start_crawl()
      body = "STARTING"
      [200, {}, body]
    end 
  end 

  def start_crawl
    urls = ["http://www.example.com/",
      "http://www.example.com/photos/",
      "http://www.example.com/video/",
    ]

    EM::Synchrony::FiberIterator.new(urls, 3).each do |url|
      p "#{user_agent}"
      redis_db.sadd 'test_queue', url
    end

    # multi = EM::Synchrony::Multi.new
    # urls.each_with_index do |url, index|
    #  p "#{user_agent}"
    #  multi.add index, redis_db.sadd('test_queue', url)
    # end
  end
end 
```

但是，我不断收到错误，因为 Goliath 不知道在配置中初始化了什么`user_agent`或`redis_db`哪些被初始化。

```
[936:INFO] 2012-09-21 23:47:10 :: Starting server on 0.0.0.0:9000 in development mode. Watch out for stones.
/Users/ewu/.rvm/gems/ruby-1.9.3-p194@crawler/gems/goliath-1.0.0/lib/goliath/api.rb:143:in `method_missing': undefined local variable or method `user_agent' for #<Try:0x007ff5a431c4e0 @opts={}> (NameError)
from ./lib/try.rb:27:in `block in start_crawl'
from /Users/ewu/.rvm/gems/ruby-1.9.3-p194@crawler/gems/em-synchrony-1.0.2/lib/em-synchrony/fiber_iterator.rb:10:in `call'
from /Users/ewu/.rvm/gems/ruby-1.9.3-p194@crawler/gems/em-synchrony-1.0.2/lib/em-synchrony/fiber_iterator.rb:10:in `block (2 levels) in each'
...
...
... 
```

理想情况下，我可以开始`FiberIterator`工作，因为我还有其他条件要检查：

```
EM::Synchrony::FiberIterator.new(urls, 3).each do |new_url}
  is_member = redis_db.sismember('crawled_urls', new_url)
  is_member += redis_db.sismember('queued_urls', new_url)
  if is_member == 0
    redis_db.lpush 'crawl_queue', new_url
    redis_db.sadd 'queued_urls', new_url
  end
end 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T01:44:54.360

我不认为您的配置文件正在加载。try.rb 的名称需要与 config 目录下的 robojin.rb 文件的名称相匹配。

# java - java包名为什么要小写？

> ID：12534302
> 
> 赞同：71
> 
> 时间：2012-09-21T16:19:36.243
> 
> 标签：java, package, programming-languages, naming-conventions

其实这完全是理论上的问题。但有趣的是为什么 java 规范不允许在包中使用大写字母并导致写如下内容：

```
com.mycompany.projname.core.remotefilesystemsynchronization.* 
```

代替

```
com.myCompanyName.projName.core.remoteFileSystemSynchronization.* 
```

* * *

## 回答 #1

> 赞同：111
> 
> 时间：2012-09-21T16:20:45.527

直接来自[Oracle 文档](http://docs.oracle.com/javase/tutorial/java/package/namingpkgs.html)

> 包名全部小写，以避免与类名或接口名冲突。

* * *

## 回答 #2

> 赞同：39
> 
> 时间：2012-09-21T16:22:16.167

> 但有趣的是为什么 java 规范不允许在包中使用大写字母并导致写如下内容：

该规范*允许*它很好。使用全小写只是*惯例。*

正如 gtgaxiola 所说，这确实避免了与类型名称的冲突......在 .NET 命名约定*中确实*会发生这种情况，导致建议您[不要将类命名为与其 namespace 相同的名称](http://blogs.msdn.com/b/ericlippert/archive/2010/03/09/do-not-name-a-class-the-same-as-its-namespace-part-one.aspx)。当然，使用 camelCase 包可以完全避免冲突。

我怀疑现实是在创建包命名约定时没有彻底考虑它。就我个人而言，我很少发现它是一个问题——如果我最终看到一个包含“remotefilesystemsynchronization”元素的包，那么大写并不是我关心的主要问题:)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2016-12-26T14:40:25.233

它只是另一种约定——有人可能会问为什么类名总是必须以大写开头，或者方法名以小写开头，然后是驼峰式。Java**不会**强迫您使用这种方式。只是一组带下划线的规则有助于作为 Java 开发人员的庞大社区为大多数遵循约定的人编写易于理解的代码。

没有明确的理由可以这样分配。这正是当时大多数程序员在编写约定时感觉*良好*并且在实践中所使用的。但是是的，在编写约定之前肯定会有指导方针。我并不是说它是一个异想天开的作品。制定指南以便仅通过查看各种元素，我们就应该能够判断它的类、方法或包 - 并且通过遵循约定，它现在已经实现了很长时间。

# ruby-on-rails - 为什么我的控制器重定向到显示？

> ID：12534303
> 
> 赞同：1
> 
> 时间：2012-09-21T16:19:37.263
> 
> 标签：ruby-on-rails, ruby, ruby-on-rails-3

在我的 rake 路线中，我得到：

```
project_todos GET    /project_todos(.:format)                   project_todos#index
                            POST   /project_todos(.:format)                   project_todos#create
           new_project_todo GET    /project_todos/new(.:format)               project_todos#new
          edit_project_todo GET    /project_todos/:id/edit(.:format)          project_todos#edit
               project_todo GET    /project_todos/:id(.:format)               project_todos#show
                            PUT    /project_todos/:id(.:format)               project_todos#update
                            DELETE /project_todos/:id(.:format)               project_todos#destroy
project_todos_toggle_status POST   /project_todos/toggle_status(.:format)     project_todos#toggle_status 
```

从：

```
resources :project_todos

  post "project_todos/toggle_status" 
```

我的观点中有一条线，如下所示：

```
<%= link_to 'Toggle Project', project_todos_toggle_status_path(id: todo.id), method: "post" %> 
```

这会产生一个如下所示的链接：

`http://localhost:3000/project_todos/toggle_status?id=1`

并导致以下错误： ![在此处输入图像描述](../Images/b6081f4038e1c1136db42ed4ac4fc537.png)

这很奇怪，因为它进入了 show 操作，我不明白它为什么或如何设置 id = toggle_status.

关于如何完成这项工作的任何想法？我过去使用 static_pages 控制器做过非常相似的事情，这会有什么不同吗？

**更新：**

开发日志：

```
Started GET "/project_todos/1/toggle_status" for 127.0.0.1 at 2012-09-21 12:08:09 -0500

ActionController::RoutingError (No route matches [GET] "/project_todos/1/toggle_status"):
  actionpack (3.2.8) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/show_exceptions.rb:56:in `call'
  railties (3.2.8) lib/rails/rack/logger.rb:26:in `call_app'
  railties (3.2.8) lib/rails/rack/logger.rb:16:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/request_id.rb:22:in `call'
  rack (1.4.1) lib/rack/methodoverride.rb:21:in `call'
  rack (1.4.1) lib/rack/runtime.rb:17:in `call'
  activesupport (3.2.8) lib/active_support/cache/strategy/local_cache.rb:72:in `call'
  rack (1.4.1) lib/rack/lock.rb:15:in `call'
  actionpack (3.2.8) lib/action_dispatch/middleware/static.rb:62:in `call'
  railties (3.2.8) lib/rails/engine.rb:479:in `call'
  railties (3.2.8) lib/rails/application.rb:223:in `call'
  rack (1.4.1) lib/rack/content_length.rb:14:in `call'
  railties (3.2.8) lib/rails/rack/log_tailer.rb:17:in `call'
  rack (1.4.1) lib/rack/handler/webrick.rb:59:in `service'
  /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:138:in `service'
  /usr/local/lib/ruby/1.9.1/webrick/httpserver.rb:94:in `run'
  /usr/local/lib/ruby/1.9.1/webrick/server.rb:191:in `block in start_thread'

  Rendered /usr/local/lib/ruby/gems/1.9.1/gems/actionpack-3.2.8/lib/action_dispatch/middleware/templates/rescues/routing_error.erb within rescues/layout (0.5ms) 
```

路线.rb

```
resources :project_todos do
    member do
      post :toggle_status
    end
  end 
```

查看代码：

```
 <% @todos.each do |todo| %>
    <li class="todo_item todo"><%= todo.title %></li>
    <%= todo.id%>
    <%= link_to 'Toggle Project', toggle_status_project_todo_path(todo), method: "post" %>
<% end %> 
```

应用程序.js

```
//= require jquery
//= require jquery_ujs
//= require tinymce-jquery
//= require tinymce
//= require_tree . 
```

**更新#2**

像这样的错误是否会导致此问题：

![在此处输入图像描述](../Images/62737a55c253bf1135bb0abf9b05886c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:42:02.197

我相信您正在尝试为单个资源 ProjectTodo “切换状态”，对吗？在 Rails 3 中描述这条路线的更常见的方式如下：

```
resources :project_todos do
  member do
    post :toggle_status
  end
end 
```

这会在您的路线文件中产生确定性顺序：

```
toggle_status_project_todo POST   /project_todos/:id/toggle_status(.:format) project_todos#toggle_status
             project_todos GET    /project_todos(.:format)                   project_todos#index
                           POST   /project_todos(.:format)                   project_todos#create
          new_project_todo GET    /project_todos/new(.:format)               project_todos#new
         edit_project_todo GET    /project_todos/:id/edit(.:format)          project_todos#edit
              project_todo GET    /project_todos/:id(.:format)               project_todos#show
                           PUT    /project_todos/:id(.:format)               project_todos#update
                           DELETE /project_todos/:id(.:format)               project_todos#destroy 
```

允许您在视图中编写：

```
<%= link_to 'Toggle Project', toggle_status_project_todo_path(@todo), method: "post" %> 
```

这将发布到“http://localhost:3000/project_todos/1/toggle_status”

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:27:31.930

Try moving your `project_todos` line above the `resources: project_todos` line in your routes.rb

Then the custom route will be found before the id version.

# mysql - LEFT JOIN（或类似的）在单列表中获取每行是否在其他表中

> ID：12534305
> 
> 赞同：0
> 
> 时间：2012-09-21T16:19:39.870
> 
> 标签：mysql, join, left-join

这是情况。我有两组数据。一个是我的系统使用的所有“票证”条目的列表——每个 ID 至少一个，但可能更多。我还有一个单独的列表，其中仅列出了已知硬件问题的 ID，它是 ID 的一个相对较小（但很重要）的子集。我已将此列表放入一个超级简单的表 B 中，它实际上是一个只有这些 ID 的单列。

我需要一个连接这两个表的 MySQL 查询，所以我从表 A 中获取所有条目，每个条目都添加了另一个字段，该字段是一个简单的布尔值：表 B 中是否存在相同的 ID。

所以是这样的：

```
SELECT * FROM `table_A` A
LEFT JOIN `table_B` B ON A.id=B.id 
```

如果 B 是一个双列表，并且第二列（称为它`down`）只是`true`在每一行中，那么我可以检查 if `down`are `true`or `null`。

但由于 B 只有一列，因此实际上没有将数据添加到结果中。

是否有任何简单的方法（在我的数据库中没有这个完全不必要的列）来执行此“连接”操作，它会简单地注意 A 中给定条目的 ID 是否也存在于 B 中？

（将另一个向上或向下的字段添加到 A 也相当低效，因为单个 ID 通常有很多行，并且大多数 ID 无论如何都不会向下）

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:28:32.570

```
select 
    A.*, 
    case when B.ID is null then 0 else 1 end as myBoolean
from `table_A` A
    left join `table_B` B on A.ID = B.ID 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T16:24:30.550

如果 id 存在于 table_B 中，则下面的示例“down”将不为空

```
SELECT * , B.id as `down` FROM `table_A` A
LEFT JOIN `table_B` B ON A.id=B.id 
```

# ruby - ExecJS 上下文中的 Jade

> ID：12534308
> 
> 赞同：0
> 
> 时间：2012-09-21T16:19:55.587
> 
> 标签：ruby, pug, execjs

很简单，我无法在 execjs 中运行从[jade-lang](https://github.com/visionmedia/jade)文件编译的jade.js。

如果我在 html 文件中包含jade.js

```
jade.compile 
```

返回一个函数。

当我执行以下操作时：

```
require 'execjs'

source  = <<-src
  var window = {};
  #{open('jade.js').read}
  var jade = window.jade;
src
context = ExecJS.compile source
context.eval "jade.compile"
 => nil 
```

eval 返回 nil。

知道我哪里出错了吗？我搜索了堆栈溢出，甚至发现了一些与我相同的方式执行此操作的 gem，但是当我在我的系统上执行时，它不起作用。我尝试使用 therubyracer 和 node 作为我的 execjs 运行时。

谢谢你的帮助！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:27:11.873

似乎当 execjs 的返回是一个函数时，它返回 nil。所以：

```
context.eval "jade.compile.toString()"
=> "function....." 
```

同样

```
context.eval "jade.compile(#{template.to_json}).toString()"
=> "function...." 
```

和

```
context.eval "jade.compile(#{template.to_json})()"
=> "some html" 
```

这是有道理的，因为[execjs/external_runtime.rb](https://github.com/sstephenson/execjs/blob/master/lib/execjs/external_runtime.rb)的 extract_result 方法（撰写本文时的第 62 行）使用 JSON.decode，它不会解码函数。只是对象的衍生物。

# ios - 无法安装 TestFlight 访问配置文件 (iOS)

> ID：12534310
> 
> 赞同：8
> 
> 时间：2012-09-21T16:20:00.113
> 
> 标签：ios, ios6, testflight

自从升级到 iOS 6 后，我一直无法安装“TestFlight Access”配置文件，而我运行 6.0 的客户也遇到了同样的问题。我已经用谷歌搜索了这个问题，但我没有找到任何结果。

错误消息就在您输入设备密码后显示：

“配置文件安装失败发生网络错误”

我已验证我有良好的网络连接，并且错误发生在多个物理位置（不同的服务提供商和互联网访问）

提前致谢！

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-21T16:40:04.773

我在构建时遇到了同样的问题，我们的一位测试人员找到了这个解决方案：

“建议人们去设置>常规>配置文件并删除他们的配置文件，然后清除cookie /缓存，重新启动手机，它应该可以工作”

确保同时删除 TestFlight WebClip 配置文件。

希望这可以帮助！

瑞安

# git - 推送后恢复合并

> ID：12534312
> 
> 赞同：107
> 
> 时间：2012-09-21T16:20:10.100
> 
> 标签：git, git-revert

我执行的步骤：

我有两个分支 branch1 和 branch2，

```
$git branch --Initial state
$branch1

$git checkout branch2
$git pull origin branch1 --Step1 
```

我解决了冲突并做了

```
$git commit -m "Merge resolved" 
```

然后

```
$git checkout branch1
$git merge branch2
$git push origin branch1 
```

现在我意识到，在第 1 步时，自动合并删除了一些代码并推送了更改代码，现在我想回到我的初始状态以恢复任何更改。寻求一些即时帮助？

* * *

## 回答 #1

> 赞同：124
> 
> 时间：2012-09-23T17:28:04.770

[您可以按照官方指南](http://www.kernel.org/pub/software/scm/git/docs/howto/revert-a-faulty-merge.txt)恢复合并，但这会使 Git 错误地认为合并的提交仍在目标分支上。

基本上你必须：

```
git revert -m 1 (Commit id of the merge commit) 
```

* * *

## 回答 #2

> 赞同：48
> 
> 时间：2012-09-21T16:33:19.883

尝试使用`git reflog <branch>`找出合并之前您的分支在哪里并`git reset --hard <commit number>`恢复旧版本。

Reflog 将向您显示分支的旧状态，因此您可以将其返回到您喜欢的任何更改集。

**使用 git reset 时确保您在正确的分支中**

要更改远程存储库历史记录，您可以这样做`git push -f`，但不建议这样做，因为有人可能已经下载了由您推送的更改。

* * *

## 回答 #3

> 赞同：19
> 
> 时间：2018-12-07T11:03:41.670

第一个选项是使用`git revert`.

```
git revert -m 1 [sha-commit-before-merge] 
```

将`git revert`还原更改，但将保留历史记录。因此，您将无法继续在同一个分支中工作，因为您无法再看到合并分支与您的功能分支之间的实际差异。也可以使用以下方式删除历史记录。当且仅当您是目前唯一将更改推送到分支的人时，请非常小心地执行此操作。

```
git reset --hard [sha-commit-before-merge]
git push [origin] [branch] --force 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2020-06-24T18:46:04.923

就我而言，我将我的分支（例如：my-branch）与另一个功能分支（feature-branch）合并，但不是 master。所以我的分支历史是这样的：

```
my-branch (before merge)

---master----m1----m2----m3---m4 
```

`feature-branch`在将它与另一个在 master 之上提交的合并后`f1, f2`，它变成了这样：

```
my-branch (after merge)

---master----m1----m2----f1----f2----m3---m4----mergecommit 
```

这可能是因为在我的分支上工作时，我在 2 次提交后从 master 进行了合并，或者 2 个分支之一可能没有与 master 保持同步。因此，在这种情况下`git revert -m 1`，它不起作用，因为它在两者之间留下了那些`f1`和`f2`提交。

解决方案很简单，适用于正常情况下，我们没有中间提交：

```
git rebase -i HEAD~6 
```

根据您想要更改的过去提交的数量，而不是 6 使用适当的数字。现在 Vim 编辑器已打开，只需将不需要的提交标记为`drop`相同并使用`:wq` 验证日志退出：

```
git log --oneline 
```

力推

```
git push -f 
```

现在远程分支应该处于以前的状态。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2021-12-07T17:19:37.173

正如另一个答案中提到的，在`git revert`合并时执行 a 的主要问题是 git 仍然认为所有以前的提交都已合并（它只更改代码）。如果您稍后尝试合并该分支，您会发现之前的提交丢失了。

更好的方法（显然是在与您的团队协商后，以免他们继续在有问题的分支上工作）是`git reset`更早的提交。它不必是硬重置，因为它只涉及如何处理您当前的工作更改，因此这部分取决于您。

如果您想在重置之前先在那里进行更改，您还可以从先前的提交创建一个临时分支。在这种情况下，您将重置为临时分支上的提交。

如果不从上游拉动，您将无法推动，但显然您不想拉动您试图恢复的更改。因此，您需要执行强制推送（如果在此期间推送了任何更改，则需要强制推送以停止）。

旁注：作为 VS Code 和 Git Graph 的粉丝，我发现通过右键单击本地分支标记名称并选择“Push Branch...”，选择 Force 或 Force With Lease，即可轻松执行强制推送，然后离开选中设置上游框。

# vim - VIM：设置列表！作为 .vimrc 中的切换

> ID：12534313
> 
> 赞同：12
> 
> 时间：2012-09-21T16:20:16.043
> 
> 标签：vim

在我的 .vimrc 文件中是否有任何方法可以将命令`set list!`与键绑定一起使用，`F3`因此它的功能类似于 paste toggle `set pastetoggle=<F2>`。

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-21T16:26:12.410

你可以把它放在你的`.vimrc`文件中：

```
" F3: Toggle list (display unprintable characters).
nnoremap <F3> :set list!<CR> 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-01-20T05:22:58.160

我找到了关于如何`set number`在 vim 中切换的答案，[https://stackoverflow.com/a/762633/1086911](https://stackoverflow.com/a/762633/1086911)

所以可以通过将以下行放入`vimrc`文件中来尝试相同的方式

```
map <F3> :set list! list? <CR> 
```

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T19:32:40.950

这是正常模式、视觉+选择模式和操作符挂起模式的映射（例如，在键入之后`d`）：

```
noremap <F3> :set list!<CR> 
```

功能键（vs. `<Leader>`）的好处是它们也可以在插入模式下映射：

```
inoremap <F3> <C-o>:set list!<CR> 
```

为了完整起见，您还可以为命令行模式创建地图：

```
cnoremap <F3> <C-c>:set list!<CR> 
```

阅读有关各种映射模式的更多信息，请访问`:help map-modes`

# .net - System.Diagnostics.Process.Start() 在 Windows CE 上返回 FileNotFound 异常

> ID：12534318
> 
> 赞同：0
> 
> 时间：2012-09-21T16:20:36.627
> 
> 标签：.net, vb.net, compact-framework, windows-ce

我有一个 Visual Basic .NET 应用程序在运行 Windows CE 6.5 的 Symbol 手持扫描仪上针对 .NET Compact Framework 2.0 运行。从 Windows 窗体 VB 应用程序中，我试图在用户单击按钮时启动具有给定 URL 的 IE 窗口。

```
Private Sub btnViewUpdateSite_Click(ByVal sender As System.Object, ByVal e As System.EventArgs) Handles btnViewUpdateSite.Click

    Process.Start("iesample.exe", "http://getupdate.localdomain.com")

End Sub 
```

当我从设备上的应用程序中单击按钮时，我在“启动”过程的代码行上收到 FileNotFoundException。

我不明白的是 - 当程序因错误而停止时，我可以在 Visual Studio 的 Watch 窗口中单击，复制并粘贴代码，然后让浏览器启动该页面。我错过了一些简单的东西吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:39:36.250

Windows CE 没有任何“工作目录”的概念，因此您必须为任何文件提供完全限定的路径。试试这个：

```
Process.Start(@"\Windows\iesample.exe", "http://getupdate.localdomain.com") 
```

# javascript - JQuery/JSON：无法获取 JSON？

> ID：12534325
> 
> 赞同：0
> 
> 时间：2012-09-21T16:21:07.123
> 
> 标签：javascript, jquery, json

为什么当它格式正确时我不能得到这个 JSON？

```
jQuery.getJSON("http://sandbox.buscape.com/service/findProductList/564771466d477a4458664d3d/?keyword=drive&format=json", function(result){

        alert('ok');

    }); 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T16:23:28.183

因为它来自不同的域。您必须使用 JSONP，幸运的是您使用的 API 支持它（通过设置*回调*参数）：

```
$.ajax({
    dataType : 'jsonp',
    url : 'http://sandbox.buscape.com/service/findProductList/564771466d477a4458664d3d/?keyword=drive&format=json&callback=?',
    success : function(data) {
        console.log(data);
    }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:25:58.147

几乎可以肯定，文件中的重音字符会导致问题。例如，í 出现在 中`"Sistema Operacional Compatível"`。如果编码不正确，它将被视为无效的 UTF-8 字符。确保编码正确，或手动编码为 UTF-8。

# go - 为什么 Go 数据库库中只有两种查询类型？

> ID：12534326
> 
> 赞同：0
> 
> 时间：2012-09-21T16:21:15.930
> 
> 标签：go

据我所知，Go`database/sql`接口库只期望返回两种类型的结果——[一行](http://golang.org/pkg/database/sql/#DB.QueryRow)或一[组行](http://golang.org/pkg/database/sql/#DB.Query)。但是，至少还有一种结果类型 - 单列。

```
DB.column('SELECT COUNT(*) FROM `user` WHERE `banned` IS NOT NULL') 
```

有什么办法可以解决这个问题 - 还是我只需要获取一行然后`COUNT(*)`从中访问？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:37:58.967

作为记录，SQL Server 存储过程（同时）返回以下所有内容：

*   整数返回码
*   零个或多个包含文本和两个整数代码的消息（通常是警告或错误）
*   零个或多个命名的类型化标量输出参数
*   零个或多个“行集”，每个行集都是零个或多个行的有序列表。

在行集中，所有行都具有相同数量（一个或多个）的命名、类型化列。行集中的列名不必是不同的。

SQL Server 不识别任何特殊情况，例如具有单行或单列的单个行集；或单个输出参数。

其他数据库系统略有不同。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T16:26:04.077

是的，您获取一列行，但这有那么难吗？

```
var count int
row := db.QueryRow("SELECT COUNT(*) FROM `user` WHERE `banned` IS NOT NULL")
err := row.Scan(&count) 
```

请注意，如果您发现它过于冗长（您可以删除 row 变量），这可能会被压缩。

我认为其他语言（例如 JDBC）中的其他类似系统也不提供本机这种快捷方式。

我发现处理一个我可以记住和浏览的 API 比处理一个包含我可能愿意用来删除代码中的一行的所有实用程序的 API 更容易。

# jquery - jQuery位置改变粘性标题

> ID：12534327
> 
> 赞同：8
> 
> 时间：2012-09-21T16:21:20.307
> 
> 标签：jquery, scroll, position, absolute

下面是一个模拟在 iOS 设备上看到的 Sticky header 效果的小脚本。

```
$('.scrolllist').scroll(function(){
        $(this).find('ul').each(function(){
            if($(this).position().top <= 0){
                $(this).addClass('abs').find('strong').removeClass('mov');

                if($(this).position().top <= ($(this).height() * -1)){
                    $(this).removeClass('abs');
                    $(this).find('strong').addClass('mov');            
                }
                else {
                    $(this).addClass('abs');
                    $(this).find('strong').removeClass('mov');   
                }
            }
            else {
                $(this).removeClass('abs').find('strong').removeClass('mov');
            }
        });
    }); 
```

它通过将每个元素的状态从`postion:absolute, top:0`to更改为`position:absolute, bottom:0;`同时更改包含`<ul>`from `position:relative`to 来更改每个元素的位置`position:static`

示例：http: [//jsfiddle.net/dMJqj/80/](http://jsfiddle.net/dMJqj/80/)

有什么办法可以让它稍微平滑一点。它在 Chrome 和 Firefox 上看起来有点生涩，有时可能需要几分之一秒的时间才能触发，这很明显，因为粘性标题似乎闪烁。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-04T16:07:57.393

我想你看到的抽搐是 jQuery 和 JavaScript 中的性能问题的结果

这些文章包含一些关于优化脚本性能的技巧：

*   [你的 jQuery：现在 Suck 减少了 67%](http://24ways.org/2011/your-jquery-now-with-less-suck)
*   [jQuery 的 5 个性能调优技巧](http://jonraasch.com/blog/5-performance-tuning-tricks-for-jquery)

此外 - 更重要的是，当列表的每次触发事件时，该类似乎`abs`会被重复添加和删除`scroll``position.top < 0`

它本身不会导致视觉抽搐，但确实会导致少量内存不必要地被烧毁。

同样如上所述，您的 HTML 无效。

看到这个小提琴应用了一些优化技术，有效的 HTML 和一些不必要的类操作的删除：

[http://jsfiddle.net/DW4pP/](http://jsfiddle.net/DW4pP/)

# google-chrome-devtools - Chrome 开发工具错误？

> ID：12534330
> 
> 赞同：0
> 
> 时间：2012-09-21T16:21:35.477
> 
> 标签：google-chrome-devtools

当我在 Chrome 开发工具中[使用 JQuery 文件上传](http://blueimp.github.com/jQuery-File-Upload/)网络面板上传多个文件时，对两个不同的请求显示相同的响应（网络面板中的标头数据也不同）：

![Chrome 网络面板](../Images/653a37fa4125e086226e42860ecd2fed.png) 但是真实数据还可以。Firefox Firebug 显示真实响应。

这是一个已知的错误吗？

ps Chrome 版本为：21.0.1180.89 m

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-21T16:26:25.780

可能，我有类似的东西，但通常当我打开和关闭控制台时它可以工作

# asp.net-mvc - MVC 4 中的表属性无法识别

> ID：12534331
> 
> 赞同：2
> 
> 时间：2012-09-21T16:21:35.523
> 
> 标签：asp.net-mvc, entity-framework, asp.net-mvc-4

我有一个如下模型：

```
[Table("forms", Schema = "mySchema")]
public class forms
{
  [Key]
  public int ID { get; set; }
  public string field1 { get; set; }
  public string field2 { get; set; }
} 
```

这在 MVC 3 中有效，但是在 MVC 4 中无法识别属性表。我包含 System.ComponentModel.DataAnnotations 命名空间，引用的 dll 以及 EntityFramework.dll。EF 的版本在 MVC 3 和 4 之间发生了变化。如果我引用 MVC 3 EF dll，则可以识别表，但不能识别 Schema。使用 table 属性的原因是我可以指定架构。我错过了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:53:41.647

根据 msdn，[TableAttribute](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.schema.tableattribute.aspx)支持架构属性。

也许使用：

```
[Table(Name = "forms", Schema = "mySchema")] 
```

# ios - 链接器命令失败，退出代码 1 xcode4.5

> ID：12534334
> 
> 赞同：3
> 
> 时间：2012-09-21T16:21:40.843
> 
> 标签：ios, xcode, debugging

我昨天更新了我的 iphone4s 和 xcode 到最新的。由于我的应用程序使用硬件通信，因此我正在尝试在手机上调试我的应用程序。我正在使用 Redpark 的第三方库（该公司提供 Dock 到 RS232 线。）在编译时，它给出了一个错误

```
ld: file is universal (2 slices) but does not contain a(n) armv7s slice:/Users/...../libRscMgrUniv.a for architecture armv7s
clang: error: linker command failed with exit code 1 (use -v to see invocation) 
```

除了等待 Redpark 更新那里的库外，有谁知道如何解决这个问题？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-09-21T16:29:59.263

您可以通过将（评估为现在的）值替换为显式值来简单地禁用`armv7s`构建设置中的编译。`$VALID_ARCHITECTURES``armv7 armv7s``armv7`

因此，您的应用程序只会构建`armv7`而不是构建`armv7s`，因此不会针对新 iPhone5 进行完全优化，但它仍然可以在 iPhone 4 和 5 上运行（iPhone 5 的`armv7s`处理器可以执行`armv7`应用程序，只是没有优化带有`armv7s`处理器专用指令）

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T16:32:13.437

我又进行了一次搜索，发现两种解决方案对我有用。 [Dafna](https://stackoverflow.com/questions/12402092/file-is-universal-3-slices-but-does-not-contain-an-armv7s-slice-error-for-st) 1\. 转到目标设置 -> 构建设置 -> 仅构建活动架构 -> 更改为 NO。2.仍然在Build Settings -> Valid Architecture -> delete armv7s。

他们都为我工作。如果你有同样的问题，一定要先试试这个。

# unit-testing - Groovy HTTPBuilder 模拟客户端

> ID：12534335
> 
> 赞同：4
> 
> 时间：2012-09-21T16:21:53.177
> 
> 标签：unit-testing, grails, groovy, httpbuilder

[这个问题与这个问题](https://stackoverflow.com/questions/9101084/groovy-httpbuilder-mocking-the-response)密切相关。不同之处在于我想遵循模拟客户端的推荐方法。因此，我定义了以下 HTTPBuilder：

```
protected readUrl() {
    def http = new HTTPBuilder("http://example.com")
    def status = http.request(Method.GET, ContentType.JSON) {req ->
        response.success = {resp, json ->
            result = json.toString()
            new Success<String>(result)
        }
        response.'401' = {resp ->
            final String errMsg = "Not Authorized"
            new Failed(Failable.Fail.ACCESS_DENIED, errMsg)
        }
        response.failure = {resp ->
            final String errMsg = "General failure ${resp.statusLine}"
            new Failed(Failable.Fail.UNKNOWN, errMsg)
        }
    }
} 
```

我想做的是找到一种方法来单元测试这个代码块。我想模拟响应，所以如果可能的话，我可以专门设置响应代码。有人可以告诉我一种方法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T15:14:31.017

这是我的首选解决方案：

```
class MockHTTPBuilder{
    MockHTTPBuilder(string){}
    MockHTTPBuilder(){}
    def pleaseFail = false
    def mockData = []
    def request(a, b, c){
        if(pleaseFail) [status:'500',data: mockData ?: "It failed :("]
        else [status:'200',data: mockData ?: "Yay :)"]
    }
} 
```

以下是一些示例用法： http: [//groovyconsole.appspot.com/script/760001](http://groovyconsole.appspot.com/script/760001)

或者，您可以对实际的 httpClient 实例进行元编程并使其行为符合预期（在测试期间强制失败或通过），但这有点复杂。

# javascript - 是否推荐使用中介模式？

> ID：12534338
> 
> 赞同：16
> 
> 时间：2012-09-21T16:21:59.400
> 
> 标签：javascript, design-patterns, mediator

我目前正在阅读[http://addyosmani.com/resources/essentialjsdesignpatterns/book/#mediatorpatternjavascript](http://addyosmani.com/resources/essentialjsdesignpatterns/book/#mediatorpatternjavascript)

我将中介者模式理解为某种设置发布和订阅功能的对象。

通常我正在设置已经提供`subscribe()`方法`publish()`的对象。具体对象扩展了这个基础对象，因此`subscribe()`总是`publish()`注册为原型属性。

据我了解，中介者模式用于将发布订阅方法添加到对象。

**这种做法有什么好处？提供具有发布和订阅功能的基础对象不是比在构造时设置中介器更好的做法吗？**

还是我对中介模式的理解有误？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-09-21T16:38:06.770

正如我前段时间从类似帖子中学到的：

*   中介者模式提供了一个标准的 API 供模块使用。

    让我们举个例子：

    您的应用程序的数千个模块严重依赖 jQuery 的`$.post`. 如果突然间，您的公司遇到许可问题并决定迁移到例如 MooTools 或 YUI，您会查找所有使用的代码`$.post`并将其替换为类似的代码`MooTools.post`吗？

    中介者模式通过规范化 API 解决了这个危机。模块所知道的是，您的中介有一个发布功能，无论使用什么库，它都可以进行 AJAX 发布。

    ```
    //module only sees MyMediator.post and only knows that it does an AJAX post
    //How it's implemented and what library is used is not the module's concern

    jQuery.post   -> MyMediator.post -> module
    MooTools.post -> MyMediator.post -> module
    YUI.post      -> MyMediator.post -> module 
    ```

*   中介充当模块间通信的“中间人”。

    新手 JS 开发中的一个问题是模块是相互依赖的。那是什么时候：

    ```
    MyClassA.something = MyClassB.method();
    MyClassB.something = MyClassA.method(); 
    ```

    但是，如果出现问题`MyClassB`并且开发人员将其从构建中删除怎么办。您是否会查找并删除该用途中的所有代码`MyClassA`，以`MyClassB`使其不会因缺少而中断`MyClassB`？

    中介者模式`publish`和`subscribe`模式通过使模块订阅事件而不是直接与其他模块交互来解决这个问题。中介充当事件发布时触发的回调/订阅的集合。

    这种“匿名”订阅导致*部分*松耦合。模块仍然需要知道要监听哪些模块或至少要监听一组事件，但它们的连接方式不会导致任何一个被取出时损坏。他们所知道的是他们订阅了该事件并将在该事件发生时执行 - 无论是谁触发它，它是否触发，或者触发器是否存在。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2013-11-18T19:38:03.693

您可以在不使用事件 (pub/sub) 的情况下实现中介。在复杂/复杂的流程中，调试或推理纯事件驱动的代码可能具有挑战性。

有关如何在没有 pub/sub 的情况下创建调解器的示例，您可以查看我的项目 jQueryMediator： [https ://github.com/jasonmcaffee/jQueryMediator](https://github.com/jasonmcaffee/jQueryMediator)

# php - 使用 PHP 重定向到移动网站

> ID：12534342
> 
> 赞同：0
> 
> 时间：2012-09-21T16:22:17.310
> 
> 标签：php, html, redirect, mobile

我用[它](http://detectmobilebrowsers.mobi/)来生成这段代码：

```
<?php
    require_once('mobile_device_detect.php');
    mobile_device_detect(true,false,true,true, true,true,true,'http://m.mydomain.com',false);
?> 
```

但唯一的方向是“复制并粘贴此代码”。嗯..复制粘贴在哪里？我需要创建一个新的 php 文件吗？这是`index.php`吗？如果我已经有`index.html`文件怎么办？

编辑：我知道我`mobile_device_detect.php`把`mydomain.com`. 我的问题是把上面的 php 代码放在哪里。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T16:32:19.207

将其复制并粘贴到您想要检测其设备的访问者的基于 PHP 的页面的开头。如果您的服务器将 HTML 文件解析为我怀疑的 PHP，那么也将其添加到您的 HTML 文件中。如果您只是在构建网站，那么是的，您需要在 PHP 引擎解析的文件中使用它，例如：“.php”。如果您将其粘贴到 HTML 页面中并且未由服务器解析，您将看到与输出相同的代码，它不会执行任何操作。为了让它工作，你需要它在 PHP 文件中。如果你的脚本写得很好并且结构很好，你可能只需要将它包含在一个地方。这完全取决于您的网站的结构。

- - - 更新 - - -

为什么你不应该使用这个类？它有一个不是完全免费的特殊许可证。相反，您可以使用这个简单的类：[https ://github.com/serbanghita/Mobile-Detect](https://github.com/serbanghita/Mobile-Detect)

1.  下载**Mobile_Detect.php**
2.  在您希望检查设备的 PHP 页面的顶部包含该文件：

    ```
    // Include the mobile device detect class
    include 'Mobile_Detect.php';
    // Init the class
    $detect = new Mobile_Detect();
    // And here is the magic - checking if the user comes with a mobile device
    if ($detect->isMobile()) {
        // Detects any mobile device.
        // Redirecting
        header("Location: http://your_redirected_url.com"); exit;
    } 
    ```

3.  为使用 html 扩展创建重写规则。如果您仍想使用 '.html' 作为扩展名，只需创建重写规则，将您的 .php 重写为 .html。或者说创建 your_page_name.php 并在那里添加 PHP 代码。在同一 DIR 中创建 .htaccess 文件并添加以下行：

    ```
    RewriteEngine On
    RewriteBase /

    RewriteRule ^your_page_name.html/?$ your_page_name.php [L] 
    ```

保存，关闭！现在您应该可以使用带有 .html 扩展名的 php 页面了。现在要访问您的页面，只需输入：[http://yourdomain.com/your_page_name.html](http://yourdomain.com/your_page_name.html)就这么 简单！ *建议：*如果我是你，我会在 Web 服务器的配置文件中添加重写规则。它将更快，更安全。但这是另一个教训。如果您决定使用此方法，只需搜索堆栈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:30:16.477

您应该`mobile_device_detect.php`从该站点购买脚本，或者使用一种名为“付费”的免费方法，使用推文选项。转到下载页面，您将在那里看到它们。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T16:23:34.290

将代码复制并粘贴到您想要的任何位置。只需确保在任何需要它的页面上定义了该功能。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T16:55:37.057

好的，如果这对某人有帮助，以下是对我有用的详细信息：

仅使用以下内容创建一个 index.php 文件：

```
<?php

require_once('mobile_device_detect.php');
$mobile = mobile_device_detect();

// redirect all mobiles to mobile site and all other browsers to desktop site
if($mobile==true){
  header('Location:http://m.yourdomain.com/');
}else{
  header('Location:http://yourdomain.com/index.html');
}
exit;

?> 
```

将 mobile_device_detect.php 文件放到站点的根目录中。

然后，将此行添加到您的 .htaccess 文件中：

```
DirectoryIndex index.php index.html 
```

# java - 创建前端和后端相同应用程序的推荐方法是什么？

> ID：12534345
> 
> 赞同：0
> 
> 时间：2012-09-21T16:22:35.033
> 
> 标签：java

我需要编写一个前端和后端具有不同模板的应用程序。我应该在同一个项目的不同包中使用 fe 和 bo 制作一个项目，还是让核心应用程序成为 Web 服务，并使 fe 和 bo 成为两个使用 Web 服务的独立网站。将是一个单层应用程序并且是 JavaEE

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:25:24.190

您应该将核心逻辑保留为 Web 服务，然后创建两个消费者，一个用于前端，另一个用于后端应用程序；这允许您仅将更改保存在一个地方。

# wordpress - 我可以将 JQuery 设置为在 Wordpress 中没有 noConflict 选项的情况下工作吗？

> ID：12534349
> 
> 赞同：0
> 
> 时间：2012-09-21T16:22:45.493
> 
> 标签：wordpress

我绝对不会为我的 WP 安装使用另一个库，并且我正在加载许多依赖于使用 $.js 的外部 js 文件。所以我需要在没有非冲突模式的情况下加载 jQuery。

我见过3种不同的方式：

a) 注销当前的 Jquery 脚本并注册我的脚本，（最后一行没有 .noConflict() 调用）

b）使用此代码（但我不能在那里添加我所有的 js 文件）

```
(function($) { 
  $(function() {
    // more code using $ as alias to jQuery
  });
 })(jQuery); 
```

c) 只是分配

```
$ = jQuery 
```

我不确定利弊是什么（我猜 b 方法仅适用于内联代码，不适用于添加我自己的期望 $ 可用的基于 jquery 的 js 文件）

请指教！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:33:10.830

a) 确保您的“自己的”版本与 wordpress 兼容。

c）确保在包含其他 jquery 库（期望的库`$`）之前执行此语句。

a和c）我不会为管理员做这个

# android - 动态文本字段 - Android

> ID：12534354
> 
> 赞同：0
> 
> 时间：2012-09-21T16:23:00.883
> 
> 标签：android, xml, mobile

我正在尝试创建一个动态文本字段，该字段将在单个活动期间采用多个用户输入字段，在 java 文件中进行计算，然后在文本字段中的 SAME 活动中显示结果值。

有没有办法做到这一点？我刚刚发现我无法动态编辑 strings.xml，那么我可以使用任何结构来让我不断更改值吗？

谢谢大家。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:27:45.500

这将非常简单：

```
String yourTextValue = "text";
TextView myTextView = (TextView) findViewById(R.id.textView1);
myTextView.setText(yourTextValue); 
```

每次您想更改 TextView 的值时，只需使用您的 String 值（无论它可能是什么）调用 setText()。

# java - 如何有条件地锁定 Java？

> ID：12534364
> 
> 赞同：3
> 
> 时间：2012-09-21T16:23:46.380
> 
> 标签：java, locking, synchronized

我一直在利用 Java 的`synchronized`块来使我的部分代码线程安全。我正在将一个数据结构移植到通常可以使用`synchronized`块的 java，但我并不总是知道如何以典型的 Java 方式使用它们。

以下是一种场景的示例：

```
myMethod (Bool useLock)
    {
    if (useLock)
        {
        //locks the following section of code until unlocked.
        lockObject.lock();
        }

     //do more stuff....

    if (useLock)
        {
        //unlocks exclusive control of code.
        lockObject.unlock();
        }
     } 
```

**我如何在 Java 中做同样的事情？在这段代码中，有时我想锁定，有时我不想，但我想对它聪明一点，不必编写相同代码的两个版本。`synchronized`除了使用块之外，还有其他锁定 Java 的方法吗？**

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T16:34:14.303

您可以使用 Lock 对象，特别是[**ReentrantLock**](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html)应该做的工作。[http://docs.oracle.com/javase/tutorial/essential/concurrency/newlocks.html](http://docs.oracle.com/javase/tutorial/essential/concurrency/newlocks.html)

或者您仍然可以使用`synchronized`块来解决问题。您问题中的代码将如下所示：

```
myMethod (Bool useLock) {
    if (useLock) {
        synchronized (this) {
           criticalSection();
        }
    } else {
        criticalSection();
    }
}

criticalSection() {
   //do more stuff....
} 
```

或者如果你想保证类的不同实例之间的互斥，你应该使用其他监视器对象而不是`this`. 例如`TheClassName.class`该类的实例或其他显式定义的静态变量。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-07-30T19:23:40.540

已经发布了一些好的答案，但我想添加另一个对我有用的解决方案：

我开始：

```
...
synchronized(<lockobject>) {
 <huge section of code with lots of variables>
}
... 
```

将其更改为：

```
...
synchronized(<condition> ? <lockobject> : new Object()) {
 <huge section of code with lots of variables>
}
... 
```

基本上，如果条件为真，它使用 lockobject 上的同步来执行代码，但如果条件为假，它使用“new Object()”，这基本上让它在没有任何同步的情况下运行。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T16:39:04.223

我猜[ReentrantLock](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/ReentrantLock.html)可以在你的场景中使用

```
final Lock lock = new ReentrantLock(); 
```

示例代码片段

```
class X {
private final ReentrantLock lock = new ReentrantLock();
 // ...

 public void m() { 
   lock.lock();  // block until condition holds
   try {
   // ... method body
   } finally {
   lock.unlock()
    }
  }
 } 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T16:26:21.033

您可以使用 Unsafe 来 monitorEnter 和 monitorExit 但恕我直言，这是一个坏主意。

如果不需要锁，JVM 无论如何都会将它们优化掉。`synchronized`如果只有一个线程获取它，则非常有效。（例如与 Lock 不同）

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-09-21T16:28:53.317

> 除了使用同步块之外，还有其他锁定 Java 的方法吗？

是的 - [java.util.concurrent.locks](http://docs.oracle.com/javase/6/docs/api/java/util/concurrent/locks/package-summary.html)，`ReentrantLock`尤其是类，但正如彼得所说，如果你能摆脱只使用`synchronized`它可能会更有效（并且更容易维护，特别是如果你作为一部分工作一个团队）。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-09-21T16:40:37.387

您可以使用 Java[锁定](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Lock.html)对象和[条件](http://docs.oracle.com/javase/1.5.0/docs/api/java/util/concurrent/locks/Condition.html)对象。`Condition`class' java docs 也提供了一个很好的`isFull`例子`isEmpty`。

在您的情况下，我想您可以利用条件对象使代码更具可读性/可理解性。像这样的东西：

```
 final Lock lock = new ReentrantLock();
 final Condition useLock  = lock.newCondition(); 
```

并酌情使用条件。

# glassfish - 此类不支持 SAAJ 1.3

> ID：12534365
> 
> 赞同：0
> 
> 时间：2012-09-21T16:23:49.480
> 
> 标签：glassfish, jax-ws, weblogic-10.x, liferay-6, java-6

在尝试从 Glassfish 的 portlet 调用 web 服务到 weblogic 上远程托管的 web 服务时，我们收到此错误：

```
Caused by: java.lang.UnsupportedOperationException: This class does not support SAAJ 1.3
    at   weblogic.webservice.core.soap.SOAPHeaderImpl.addHeaderElement(SOAPHeaderImpl.java:178) 
```

我将 WebLogic 中的 webservicesclient.jar 添加到 portlet WAR 文件中。

处理这个问题的最佳方法是什么？

编辑：添加 webservicesclient.jar 是错误的做法。我删除了jar文件并解决了问题。根本问题也通过重新启动得到解决。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-24T18:20:52.670

回答了我自己的问题。请参阅问题中的编辑：

编辑：添加 webservicesclient.jar 是错误的做法。我删除了jar文件并解决了问题。根本问题也通过重新启动得到解决。

# c++ - Qt QProcess::finished() 信号没有这样的插槽

> ID：12534367
> 
> 赞同：6
> 
> 时间：2012-09-21T16:23:59.280
> 
> 标签：c++, qt

我正在尝试从我在 Linux 中运行的 Qt 应用程序运行命令行程序 gphoto2，并读取它输出到标准输出和标准错误的结果。此概念验证程序中的 GUI 是一个按钮和一个标签，用于显示标准错误和标准输出的输出。

我无法将 QtProcess::Finished 信号连接到正确的插槽。我从头文件、连接语句和函数中的 Finished() 信号文档中复制了参数列表。函数名称以 MainWindow:: 类标识符为前缀。我已经没有什么可以尝试的了，我希望 StackOverflow 中的某个人能够指出问题所在。

```
The Header file:
#ifndef MAINWINDOW_H
#define MAINWINDOW_H

#include <QMainWindow>
#include <QString>
#include <QProcess>
#include <QObject>

namespace Ui {
class MainWindow;
}

class MainWindow : public QMainWindow
{
    Q_OBJECT

public:
    explicit MainWindow(QWidget *parent = 0);
    ~MainWindow();
    void reply2();

private slots:
    void on_pushButton_clicked();
    void on_cameraControlExit(int exitCode, QProcess::ExitStatus exitStatus);

private:
    Ui::MainWindow *ui;
    QProcess* cameraControl;

};

#endif // MAINWINDOW_H 
```

mainwindow.cpp 文件

```
#include "mainwindow.h"
#include "ui_mainwindow.h"
#include <QProcess>
#include <QShortcut>
#include <QDebug>

MainWindow::MainWindow(QWidget *parent) :
    QMainWindow(parent),
    ui(new Ui::MainWindow)
{
    ui->setupUi(this);
     cameraControl = new QProcess(this);

}

MainWindow::~MainWindow()
{
    delete ui;
    cameraControl->close();
    delete cameraControl;
}

void MainWindow::on_pushButton_clicked()
{
    // connect the camera control finished signal to the slot that will read the exit code and
    // place the std output string from the process into a label on the form
    connect(cameraControl, SIGNAL(finished(int , QProcess::ExitStatus )),
            this, SLOT(MainWindow::on_cameraControlExit(int exitCode, QProcess::ExitStatus exitStatus)));

    // Disable the ui button do we don't get double presses
    ui->pushButton->setDisabled(true);

    // setup the gphoto2 arguments list
    QStringList args;      
    args.append("--capture-image-and-download");

    // start the camera control
    cameraControl->start("gphoto2",args);

//    // wait for the process to finish or 30 seconds whichever comes first
    cameraControl->waitForFinished(30000);

}

void MainWindow::on_cameraControlExit(int exitCode, QProcess::ExitStatus exitStatus)
{
    qDebug() << cameraControl->errorString();
    qDebug() << cameraControl->readAllStandardError();
    qDebug() << cameraControl->readAllStandardOutput();

    ui->pushButton->setEnabled(true);

} 
```

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2017-08-11T18:24:44.790

或使用 C++14（现代编译器）

```
QObject::connect(cameraControl, qOverload<int, QProcess::ExitStatus >(&QProcess::finished), this, &MainWindow::on_cameraControlExit); 
```

或者在[Qt5 约定](https://wiki.qt.io/New_Signal_Slot_Syntax)中：

```
QObject::connect(cameraControl, static_cast<void(QProcess::*)(int, QProcess::ExitStatus)>(&QProcess::finished), this, &MainWindow::on_cameraControlExit); 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-09-21T16:29:51.680

我相信以下方法会起作用：

```
连接（cameraControl，SIGNAL（完成（int，QProcess::ExitStatus）），这个，SLOT（on_cameraControlExit（int，QProcess::ExitStatus）））；

```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2015-10-29T21:44:22.333

我遇到过同样的问题。我认为这是因为完成的信号函数被 2 个签名重载并且编译器无法推断类型：

```
void finished(int exitCode); 
void finished(int exitCode, QProcess::ExitStatus exitStatus); 
```

这是我的快速而肮脏的解决方法：

1）打开qprocess.h

2）评论“较短”的签名：

```
//  void finished(int exitCode); 
```

3）然后将完成信号与您的 lambda 插槽连接：

```
 QObject::connect(&process, &QProcess::finished, [=](int exitCode, QProcess::ExitStatus exitStatus){
       qDebug() << "finished. Exit code: " + exitCode ;
    }); 
```

# php - 用户评分更新、重新计算

> ID：12534369
> 
> 赞同：0
> 
> 时间：2012-09-21T16:24:06.310
> 
> 标签：php, mysql

我有一个包含字段 id、投票（针对每个用户）、评分的表格。

任务：根据对他和其他人的投票计算用户评分。也就是我每次更新字段投票需要重新计算字段评分。

这意味着有些人可以排在第三位。投票给他，他将获得第二名，反之亦然 - 从 2 到 3。（在评级领域）

如何解决这个问题呢？每次更新字段以计算用户对 php 的评分并在 mysql 中进行大量更新查询是非常昂贵的。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:58:08.653

嗯，这取决于很多因素

1.  您是否有一个呈指数级增长的大型系统？
2.  您是否需要历史报告的投票数据？
3.  用户投票时需要注册吗？
4.  该系统会在整个系统生命周期中仅用于一种投票类型，还是会针对不同主题进行更多投票？

如果所有答案都为“**否**” ，那么您当前的更新方法将可以正常工作。无论如何，只要确保您应用最佳编码和 MySQL 表实践即可。

假设您的大部分或全部答案都是**“是”**，那么我将建议以下内容：

*   每次进行投票时，都会将`INSERT`记录记录到您的表格中
*   使用`INSERT`，添加时间戳，如果不可能，则添加用户 ID，然后可能是 IP 地址/位置
*   从 vote_subject 表中分配一个主题 ID 作为外键。在此表中存储投票的主题和日期
*   现在您可以创建一个`SELECT`可以计算选票并计算评分的语句。投票计数列表顶部的人将在`SELECT`. 此外，您可以过滤每个主题、每天、每个用户，并且您还应该能够根据所需的结果确定音量。

当然，所有这些都取决于您的系统将来如何扩展。这可能有点矫枉过正，但值得考虑。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:05:14.147

如果您想在没有评级列的情况下通过选择获得评级，那么这就是方法。但是从性能的角度来看，我不能保证这将是您的最佳选择。它的工作方式是，如果两个用户的票数相同，他们将获得相同的评分，然后它将跳过下一个不同评分所需的数字：

```
set @rating:=0;
set @count:=1;

select id,
case when @votes<>votes then @rating:=@rating+@count
else @rating end as rating,
case when @votes=votes then @count:=@count+1
else @count:=1 end as count,
@votes:=votes as votes
from t1
order by votes desc 
```

[sqlfiddle](http://sqlfiddle.com/#!2/7c2f8/1)

这为您提供了一个可以忽略的额外列，或者您可以将此选择包装到子查询中并具有：

```
select t2.id,t2.votes,t2.rating from (
select id,
case when @votes<>votes then @rating:=@rating+@count
else @rating end as rating,
case when @votes=votes then @count:=@count+1
else @count:=1 end as count,
@votes:=votes as votes
from t1
order by votes desc) as t2 
```

但是[sqlfiddle](http://sqlfiddle.com/#!2/a7470/18)奇怪地给出了不一致的结果，所以你必须做一些测试。如果有人知道为什么会这样，我会很想知道原因。

如果您只想获得一个用户的评分，那么执行子查询选项并在`where`后面使用 a`from`应该会给您想要的结果。[sqlfiddle](http://sqlfiddle.com/#!2/7c2f8/5) - 但同样，结果不一致，运行它几次，有时它给出的评级为 10，其他时间为 30。我认为在你的数据库中进行测试以查看会发生什么将是最好的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:37:22.337

我建议在查询数据时这样做。它会简单得多。按票数降序排列。

也许在查询数据时创建一个视图并使用该视图。

你可以尝试这样的事情：

```
SET @rank := 0

select id, count(*) as votes, @rank := @rank + 1
from users
group by id
order by votes desc 
```

或者

```
SET @rank := 0

select id, votes, @rank := @rank + 1
from users
order by votes desc 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T16:45:52.920

不使用字段 id、votes 和 rating，而是将表更改为具有字段 id、rating_sum 和 rating_count。每次你有一个新的评级时，你都会像这样查询数据库：

```
 "UPDATE `ratings` SET `rating_count` = `rating_count` + 1, `rating_sum` = `rating_sum`+ $user_rating WHERE `id` = $id" 
```

现在评分只是平均值 -> rating_sum / rating_count。不需要有一个带有评级的字段。

此外，为了防止用户多次评分，您可以创建一个名为 rating_users 的表，该表将有两个外键 users.id 和 rating.id。主键将是（users.id，ratings.id）。因此，每次用户首先尝试评分时，您都会检查此表。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T16:46:31.203

是的，聚合很昂贵。您可以每五分钟左右更新一次排名表并从那里查询。您现在可能已经进行的查询是这样的：

```
select id, count(*) as votes
from users
group by id
order by votes desc 
```

# windows-8 - 是否可以在 WinRT XAML 应用程序中混合 Direct3D 内容？

> ID：12534371
> 
> 赞同：0
> 
> 时间：2012-09-21T16:24:09.927
> 
> 标签：windows-8, direct3d, winrt-xaml

我的 XAML 应用程序可以使用一些 3d 元素。是否可以在 WinRT XAML 应用程序中混合 Direct3D 内容？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:12:12.207

是的，这实际上很容易做到。请参阅[SurfaceImageSource 类](http://msdn.microsoft.com/en-us/library/windows/apps/windows.ui.xaml.media.imaging.surfaceimagesource.aspx)。这提供了一个可以像任何其他表面一样绘制的 DirectX 表面。有关这方面的更多详细信息，请参阅[此文档](http://msdn.microsoft.com/en-us/library/windows/apps/hh825871.aspx)。

# java - 如何从 *.properties 和 build.xml 文件导入？

> ID：12534373
> 
> 赞同：1
> 
> 时间：2012-09-21T16:24:16.427
> 
> 标签：java, xml, eclipse, import

我有一个项目，它只包含 *.jars 和 prop.properties 和 build.xml 文件。

我在eclipse中尝试过导入方式，但是没有用？

如何将这样的项目导入 Eclipse？

我很欣赏你的回答！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:31:06.443

通常 build.xml 文件包含在 ant 构建项目中。eclipse有能力运行一个ant项目。尝试右键单击 build.xml 并作为 ant 运行。

# jquery - jQuery ui选项卡：选择事件后执行代码

> ID：12534377
> 
> 赞同：1
> 
> 时间：2012-09-21T16:24:20.487
> 
> 标签：jquery, select, user-interface, tabs

我目前正在为使用 jQuery 和 jQuery ui 的产品开发 Web 界面。在我们的产品中，我们在顶部有一个标签条。最后一个选项卡是“新选项卡”选项卡，当用户单击它时，它会为用户创建一个新选项卡（它的工作方式与大多数现代浏览器中的选项卡式浏览非常相似）。目前，我正在“新选项卡”选项卡上捕获选择事件，并且在回调函数中，我正在做所有工作来创建一个新选项卡并显示它。我遇到的最初问题是未选择新选项卡（即使我告诉 jQuery ui 选项卡选择它）。发生的事情是 jQuery ui 选项卡确实选择了我创建的新选项卡。但是，一旦我的回调完成执行，jQuery ui 就会继续并重新选择“新选项卡”选项卡。换句话说，执行流程是：

1.  用户点击“新标签”标签
2.  一些 jQuery ui 代码执行
3.  jQuery ui 调用我的回调函数
4.  我的回调函数创建一个新选项卡
5.  我的回调函数选择了那个新标签
6.  jQuery ui 执行更多代码，将选择效果应用于“新选项卡”选项卡

我目前正在通过将我的回调函数放在 setTimeout 调用中来解决这个问题。这是有效的，因为它会导致我的回调函数在所有 jQuery ui 代码执行后被调用。

我的问题是：有没有办法在没有 setTimeout 的情况下实现我想要做的事情？

我觉得使用 setTimeout 来控制执行流程是 hacky 并且可能会导致问题。我一直在寻找一个选定的事件，但无济于事。

这是我的代码：

```
$tabs.tabs("option", "select", function(event, ui){
    if( ui.panel.id === tab_id_prefix + "plus-tab"){
        setTimeout( function(){
            tab_set_obj.newTab({}).setTabPage({
                page:       initial_page,
                context:    initial_context,
                title:      initial_title,
                select:     true
            });
        }, 0);
    }
}); 
```

编辑：我可以选择正确的选项卡。问题是时间问题之一。我的代码当前的结构方式要求我在 jQuery UI 完成所有工作后选择我想要的选项卡。我目前正在通过使用 setTimeout 来做到这一点，但想知道是否有更好的方法。

谢谢

# macos - 如何将终端脚本设置为在 Mac OS X Snow Leopard 上启动时运行？

> ID：12534379
> 
> 赞同：11
> 
> 时间：2012-09-21T16:24:34.957
> 
> 标签：macos, terminal, startup

您好，我使用的是 Mac OS X 10.6.8。如何设置一些简单的终端命令以在启动时运行，就像我打开终端并将这些命令放入自己一样？我基本上需要在启动时启动一些服务器守护进程。我在终端中用于手动启动它们的命令看起来像`sudo ruby myrubyserverscript_control.rb start`. 如果这是非常明显的或者已经在这里以某种我不知道足以识别的方式回答了一百万次，我提前道歉。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-09-21T21:38:57.730

这里有两个不同的东西：

1.  您想在系统启动（引导）后运行脚本，或者
2.  当您登录时

**要在启动时运行脚本**，您应该将一个 XML 配置文件放入 /Library/LaunchDaemons （并且该`launchd`进程将在启动时运行脚本）

**登录后运行脚本**- 请参阅：[https ://stackoverflow.com/a/6445525/632407](https://stackoverflow.com/a/6445525/632407)

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-09-21T16:28:53.607

Open System Preferences and go to the Users and Groups / Login Items tab. You can add a scipt with the `+` button or drag it to the list of items. Usually scripts end in .command that are used in this context but they are just bash scripts. I suppose you could use any script that is executable and has the correct `#!` line.

# c++ - 用于在 LLVM 中编写通行证的更高级别工具

> ID：12534380
> 
> 赞同：2
> 
> 时间：2012-09-21T16:24:38.887
> 
> 标签：c++, c, llvm

通常如果你想修改 LLVM IR，你需要写一个 pass。但是，如果更高级别的工具可以为您提供帮助，有时自己编写通行证是一种矫枉过正的做法。

例如，有人可能希望在程序中记录每个`load`和`store`。为此，他需要注入执行日志记录的代码。现在如果有更高级别的工具，它可以提供回调给我们写我们想要的东西。因此，在这种情况下，例如，它可以为我们提供我们可以填充`OnLoad`的`OnStore`函数来告诉工具在每次加载和存储时要做什么。这种工具存在吗？

所以基本上我想要类似于动态二进制工具工具提供的东西，但它适用于 LLVM，用于编译时代码注入。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-30T00:53:56.817

我认为你应该考虑使用 PIN 而不是 LLVM 来处理这些事情：[http ://www.pintool.org/](http://www.pintool.org/)

PIN 使您能够在多个粒度级别插入检测/分析代码：指令、基本块、功能、跟踪甚至共享库的加载/卸载。这可能是一种更实用的方式，因为您不需要编译应用程序 - 因此您可以分析例如不是开源的程序。

有适用于 windows 和 linux 的 PIN 版本。

PS：另一个似乎有用的工具： http: [//eces.colorado.edu/~blomsted/llvmpin/llvmpin.html](http://eces.colorado.edu/~blomsted/llvmpin/llvmpin.html)

# python - 提取列表值的一些感兴趣的部分

> ID：12534384
> 
> 赞同：1
> 
> 时间：2012-09-21T16:24:55.497
> 
> 标签：python, list, python-2.7

从这个列表

```
List = ['/asd/dfg/ert.py','/wer/cde/xcv.img'] 
```

明白啦

```
List = ['ert.py','xcv.img'] 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T16:28:38.220

There's a low-level `split`-based approach:

```
>>> a = ['/asd/dfg/ert.py','/wer/cde/xcv.img']
>>> b = [elem.split("/")[-1] for elem in a]
>>> b
['ert.py', 'xcv.img'] 
```

Or a higher-level, more descriptive approach, which is probably more robust:

```
>>> import os
>>> b = [os.path.basename(filename) for filename in a]
>>> b
['ert.py', 'xcv.img'] 
```

Of course this assumes that I've guessed right about what you wanted; your example is somewhat underspecified.

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T16:31:02.343

```
$List = array('/asd/dfg/ert.py','/wer/cde/xcv.img');
$pattern = "#/.*/#";
foreach ($List AS $key => $str)
  $List[$key] = preg_replace($pattern, '', $str);

print_r($List); 
```

# java - 调用外部加载的java类

> ID：12534387
> 
> 赞同：0
> 
> 时间：2012-09-21T16:25:07.373
> 
> 标签：java

我将一个外部 java 类加载到我的项目中，该类用于向客户端发送语音（我称之为 sender.java），所以我想调用该类或使用按钮从我的项目的主框架运行它。我怎样才能做到这一点？假设按钮变量名称是“开始广播”？请帮忙。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:30:23.470

您需要实例化此类（假设您没有使用静态方法），然后在其上调用方法。例如

```
MyObject obj = new MyObject();
obj.myMethod(); 
```

您可能需要将其导入您的命名空间，例如

```
import com.yourpackage.MyObject;
... 
```

然后是上面的。

# python - 正则表达式帮助 - python - 从 css 中提取所有图像 url

> ID：12534388
> 
> 赞同：2
> 
> 时间：2012-09-21T16:25:08.637
> 
> 标签：python, regex, python-2.7

我正在尝试从 css 文件中提取所有图像（.jpg、.png、.gif）uri。

示例 CSS

```
.blockpricecont{width:660px;height:75px;background:url('../images/postBack.jpg') 
repeat-x;/*background:url('../images/tabdata.jpg') repeat-x;*/border: 1px solid #B7B7B7; 
```

使用正则表达式 -

```
 images = re.compile("(?:\()(?:'|\")?(.*\.jpg('?))", flags=re.IGNORECASE) 
```

问题是，其中很少有带有注释代码的 css 类 (/* ---- */)，并且这些注释包含 .jpg 参考。我为上述正则表达式得到的输出是

```
output
 ["../images/postBack.jpg') repeat-x;/*background:url('../images/tabdata.jpg'"]

expected output:
 ["../images/postBack.jpg"] 
```

我希望我的正则表达式在 .jpg 的第一场比赛中停止，但它会一直持续到行尾。

提前致谢。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T16:28:26.040

```
print re.findall('url\(([^)]+)\)',target_text) 
```

我认为这应该有效

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T16:33:19.547

最简单的方法是在匹配之前消除注释：

```
css = re.sub(r'(?s)/\*.*\*/', '', css) 
```

但是，我同意 Matthew 的观点，即使用专用解析器会更好。这是[tinycss](http://packages.python.org/tinycss)的示例：

```
import tinycss

def urls_from_css(css):
    parser = tinycss.make_parser()
    for r in parser.parse_stylesheet(css).rules:
        for d in r.declarations:
            for tok in d.value:
                if tok.type == 'URI':
                    yield tok.value

for url in urls_from_css(css):
    print url 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T16:46:48.523

也许，这样，首先用 re.sub 去除评论，然后 re.findall 好东西。

```
example_css = """.blockpricecont{width:660px;height:75px;background:url('../images/postBack.jpg') 
repeat-x;/*background:url('../images/tabdata.jpg') repeat-x;*/border: 1px solid #B7B7B7;"""

import re

css_comments_removed = re.sub(r'\/\*.*?\*\/', '', example_css)

pattern = re.compile(r"(\'.*?\.[a-z]{3}\')")
matches = pattern.findall(css_comments_removed)
for i in matches:
    print(i) 
```

印刷

```
'../images/postBack.jpg' 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T16:26:40.727

这可能更适合css解析器。我没用过，但是我以前看过推荐的[这个](http://cssutils.googlecode.com/svn/trunk/docs/html/docs/parse.html#cssparser)。

# javascript - 帆布用途 | 实际例子

> ID：12534389
> 
> 赞同：-1
> 
> 时间：2012-09-21T16:25:12.427
> 
> 标签：javascript, canvas

我试图了解人们使用画布做什么？

我在我在 Definitive JavaScript 中读到的职位发布中看到了它，但我不太明白它的用途。

我知道您可以绘制 2d 或 3d（通常是 2d）对象，但为什么不使用 Gimp 或 Photoshop 并上传图像。

是不是这样您就可以根据...用户特定的数据创建动态图像？

什么是一个实际的例子，或者可能是一个专业的画布实现的链接（Definite JavaScript 展示了基础的东西，比如画圈）。

[MDN 教程](https://developer.mozilla.org/en-US/docs/Canvas_tutorial)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T16:30:32.497

我使用画布绘制图形，如果浏览器不支持，它会退回到请求 PHP 生成的图像`<canvas>`。将处理从服务器委托给客户端总是一个好主意，因为这样可以减少服务器的负载。换句话说，与其说服务器“这是东西”，不如说是“这是数据和显示它的指令”。

我见过的另一个用途是在鼠标悬停时突出显示图像地图的区域。

`<canvas>`它是 HTML5 游戏开发的核心，因为它用于绘制整个游戏视口。没有它，就没有游戏。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:29:55.993

> 是不是这样您就可以根据...用户特定的数据创建动态图像？

是的

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T19:04:21.460

我们使用 <canvas> 为我们的电子商务商店中的服装构建交互式设计编辑器 — [http://printio.ru/tees/new](http://printio.ru/tees/new)

直到最近，我们提供的那种交互性只能通过 Flash 实现。

即使在后端，我们也使用 Node.js 和基于 <canvas> 的图像处理+生成从在线编辑器中获取数据并创建稍后在[商店](http://printio.ru/store)中使用的设计。这些画布生成的设计最终被打印在 T 恤、马克杯、帽子、包等上。

我认为这是一个非常实际的例子:)

这一切都是通过[Fabric.js 画布库](http://fabricjs.com)（也是我们开发的）完成的。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2014-10-01T21:57:01.877

`<canvas>`用于更好的性能。`<canvas>`比 jpeg 或其他任何东西都更快、更动态。示例： http: [//www.profistart.com/internetseiten.html](http://www.profistart.com/internetseiten.html)这里`<canvas>`用于背景。

# asp.net-mvc-3 - Asp.net MVC - 将数据发布到控制器

> ID：12534391
> 
> 赞同：0
> 
> 时间：2012-09-21T16:25:17.320
> 
> 标签：asp.net-mvc-3

我正在开发一个示例 mvc 项目，在该项目中我试图将数据发布到控制器。我已经发布了示例（见下文），但如果我将 [HttpPost] 添加到方法中，我会收到“404”错误。

看法：

```
<% using (Html.BeginForm()) { %>
    <%= Html.Telerik().NumericTextBox()
                .Name("NumericTextBox")
                .Spinners(false)
                .EmptyMessage("ID")
    %>
    <input type="submit" value="Submit" />
<% } %> 
```

控制器：

```
[HttpPost]
public ActionResult GetDetails(int id)
{
    return View();
}

**I also tried,**
[HttpPost]
public ActionResult GetDetails(FormCollection collection)
{
    return View();
} 
```

路线：

```
routes.MapRoute(
    "Default", // Route name
    "{controller}/{action}/{id}", // URL with parameters
    new { controller = "Customer", action = "GetDetails", id = UrlParameter.Optional } // Parameter defaults
); 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:36:08.043

您希望*名称*与控制器上的参数相匹配，所以我相信它[应该是这样的](http://www.telerik.com/help/aspnet-mvc/telerik-ui-components-numerictextbox-introduction.html)：

```
Html.Telerik().NumericTextBox()
            .Name("id") 
```

笔记：

1.  尽管您在路由参数上指定了 UrlParameter.Optional `id`，但它并不是真正的可选，除非您在控制器操作中将其设为可空（即`int? id`）。
2.  通常，对于不会更改服务器上任何内容的 HTTP 请求，您应该使用 GET 而不是 POST，这里似乎就是这种情况。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:36:06.403

您应该使用第二种方法，但不要`FormsCollection`使用：

`GetDetails(int NumericTextBox)`

参数必须与输入框同名。

# php - uri 重定向与域更改

> ID：12534394
> 
> 赞同：0
> 
> 时间：2012-09-21T16:25:29.080
> 
> 标签：php, apache, .htaccess, redirect, apache2

我不是最擅长的，但我必须做一个重定向

```
domain1.tld/subfolder/seo/based/uri 
```

我需要重定向到

```
subd.domain2.tld/seo/based/uri 
```

那可能吗？

**编辑：**

忘了提，这些都是动态请求。喜欢：

```
domain1.tld/forums/forum/2-network-announcements/topic-name-with-id 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:30:17.703

这可以在 .htaccess 或 PHP 中完成，但我发现在 PHP 中更容易。

为此，第一个 URL 的 PHP 文件应包含：

```
<?php
    header("Location: http://subd.domain2.tld/seo/based/uri");
?> 
```

更多信息在这里： http: [//php.net/manual/en/function.header.php](http://php.net/manual/en/function.header.php)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T21:58:59.280

在 htaccess 文件或 domain1.tld 的虚拟主机中，添加：

```
RewriteEngine On
RewriteCond %{HTTP_HOST} ^(www\.)?domain1.tld$ [NC]
RewriteRule ^/?subfolder/(.*) http://subd.domain2.tld/$1 [L,R=301] 
```

如果 2 个主机具有不同的文档根，您也可以使用 mod_alias：

```
Redirect 301 /subfolder http://subd.domain2.tld 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:38:00.663

从 .htaccess 重定向是立即的。这意味着，如果您从 .htaccess 重定向，则不会在 domain1.tld/subfolder/seo/based/uri 处运行任何代码。如果这是您想要的，那么将这些行添加到您的 .htaccess 中：

```
RewriteEngine On
RewriteRule ^domain1.tld/subfolder/(.*)$ subd.domain2.tld/$1 
```

如果您确实想在 domain1.tld/subfolder/seo/based/uri 上运行一些代码，请阅读@tomtheman5 的答案，因为这将更接近您想要的。

# ios - 如何在 iOS 中流式传输电影并稍后从文件系统播放？

> ID：12534395
> 
> 赞同：5
> 
> 时间：2012-09-21T16:25:31.427
> 
> 标签：ios

我有一个应用程序，该应用程序当前附带了它可以播放的所有视频。这不能很好地扩展，除非您想播放所有电影，否则会浪费磁盘空间。由于您必须重新下载所有电影，因此升级应用程序也不太理想。

我想做的是即时下载电影，在下载时播放，然后如果下载成功，将其保存到文件系统，以便下次他们想观看时，它会从本地文件流式传输。

我可以对视频做任何需要的事情，但目前我将它作为来自 Amazon S3 的 .mp4 文件提供，具有视频/mp4 的 mimetype，所以我的问题的前半部分工作正常：电影下载，一旦 MPMovieViewController 认为下载“足够”，它就会开始播放它。

有没有办法利用该视频文件的缓存，以便我可以保存它并控制它在文件系统上的驻留时间？这似乎是最简单的方法。

我的目标是 iOS 5+6，但如果唯一可用的解决方案需要 iOS 6，我也会考虑。谢谢！

**更新：**使用 AFNetworking，我想我现在已经完成了一半。我正在从服务器下载视频文件，并监听下载进度。一旦我看到 25% 的视频已下载，我开始使用 MPMoviePlayerController 播放本地文件。

我现在遇到的主要问题是播放似乎搞砸了。一切正常，下载了 25%，开始播放……下载继续正常……然后文件完全下载完毕，不久后视频冻结。屏幕播放计时器仍指示播放正在进行，我没有看到任何“播放完成”类型的通知，但视频被冻结。我基于这种行为的猜测是，视频播放的初始缓冲区可能已用完，并且现在没有检测到磁盘上有更多视频可用？

有什么方法可以与 MPMoviePlayerController 交互，让它知道定期刷新它正在播放的缓冲区吗？或者其他方式来处理这种情况？

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-29T02:45:21.573

**更新：确保从@TomHamming 看到更新的答案。**

我还没有找到一个确凿的答案，但目前我相信答案是：你不能可靠地做到这一点。至少不是没有很多看起来太像黑客的工作。我向 Apple 提交了功能请求，因为通过对 MPMoviePlayerController 进行一些调整，这似乎是可能的。

我将回顾我尝试或考虑的各种事情，以及我遇到的结果。

*   **将 MPMoviePlayerController 传递给您的电影文件的 URL，它允许它流式传输，然后将文件从保存到的缓存中拉出到您的本地 Documents 文件夹中。**从 iOS 6 起将无法正常工作。我向 Apple 提交了功能请求，但就目前而言，您无法获得他们正在下载的文件 AFAIK。

*   **开始使用 NSURLConnection（或类似 AFNetwork）下载电影文件，然后当“相当数量”下载到设备时，将文件 URL 传递给 MPMoviePlayerController 并让它从磁盘流式传输。**有点作品，但不是很好。三个问题：

    *   真的很难知道什么时候开始播放文件。我还没有弄清楚Apple使用的算法，所以我总是谨慎行事，等待25％下载后再玩。

    *   MPMoviePlayerController 接口不提供电影正在流式传输的感觉，就像 Apple 通过网络进行计算时一样。在用户看来，文件已完全下载，但实际上并非如此。

    *   最重要的是，MPMoviePlayerController 似乎无法很好地播放未完全下载的文件。一旦文件完成下载，或者播放器赶上了下载量，我就遇到了播放问题，并且从未找到处理这些情况的优雅方法。

*   **与上面相同的过程，但使用 AVFoundation 类来更精细地控制播放过程，并避免上述关于播放停止等问题。**可能有效，但我想要 MPMoviePlayerController 的所有功能。自己重新实现 MPMoviePlayerController 只是为了获得这一功能似乎是在浪费时间。

*   **与上面 #1 相同的过程，但在您的应用程序中运行一个小型 Web 服务器来处理将视频从磁盘流式传输到 MPMoviePlayerController**，希望流式传输能够像直接从外部网络流式传输文件时那样正常工作服务器。工作，但结果仍然是零星的，性能似乎受到影响。我用[CocoaHTTP](https://github.com/robbiehanson/CocoaHTTPServer)做了我的测试。我决定反对这种方法，因为它感觉就像一个可怕的黑客攻击。

*   **运行轻量级 HTTP 代理，从而在下载的电影文件数据从 Internet 流式传输到您的 MPMoviePlayerController 时对其进行拦截。**不确定这是否有效。我还不能对此进行测试，因为我还没有找到一个用 Objective-C 编写的轻量级 HTTP 代理，并且此时不想实现一个只是为了尝试这个实验。这似乎是所有这些黑客中最容易实现的——如果您不必编写代理！

在这一点上，我决定采用不那么骇人听闻但也不那么用户友好的路线，即完全下载文件，然后将其传递给 MPMoviePlayerController，直到出现更好的解决方案。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2018-04-04T17:00:49.760

从 iOS 10 开始，您可以使用[`AVAssetDownloadTask`](https://developer.apple.com/documentation/avfoundation/avassetdownloadtask?language=objc). 请参阅[此 WWDC 2016 会议](https://developer.apple.com/videos/play/wwdc2016/504)和[此文档](https://developer.apple.com/documentation/avfoundation/media_assets_playback_and_editing/using_avfoundation_to_play_and_persist_http_live_streams?language=objc)。

或者，如果您的电影没有经过 DRM 处理，您可以使用[AVAssetResourceLoaderDelegate](https://developer.apple.com/documentation/avfoundation/avassetresourceloaderdelegate?language=objc)来执行此操作，这可以有效地让您提供`AVPlayer`任意字节流。请参阅[此演练](https://jaredsinclair.com/2016/09/03/implementing-avassetresourceload.html)。

# bash - grep / awk - 基于多列丢弃行

> ID：12534402
> 
> 赞同：1
> 
> 时间：2012-09-21T16:26:14.023
> 
> 标签：bash, awk, grep

我想根据多列中的匹配项丢弃行。对于第 1 列中的所有匹配项，请检查相应的第 2 列。仅当第 2 列的所有条目都相同时，才丢弃所有行。如果第 2 列中的一个条目不同，则保留所有行。

例子：

丢弃前 3 行，因为 Bob 的每个第 2 列条目都是相同的。但是，请保留其余 4 行，因为第 2 列中至少有一个条目与 Jan 不同：

```
Bob Blue
Bob Blue
Bob Blue
Jan Red
Jan Red
Jan Green
Jan Red 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-22T06:13:41.307

这是使用`GNU awk`. 像这样运行：

```
awk -f script.awk file.txt{,} 
```

内容`script.awk`：

```
FNR==NR {
    array[$0]++
    next
}

{
    counter = 0
    for (i in array) {
        split(i, holder, FS)
        if (holder[1] == $1) {
            counter++
        }
    }
    if (counter >= 2) {
        print
    }
} 
```

结果：

```
Jan Red
Jan Red
Jan Green
Jan Red 
```

或者，这是单线：

```
awk 'FNR==NR { array[$0]++; next } { counter = 0; for (i in array) { split(i, holder, FS); if (holder[1] == $1) counter++ } if (counter >= 2) print } ' file.txt{,} 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-22T11:35:54.950

这可能对您有用（尽管它是 GNU sed）：

```
sed ':a;$!N;/^\(\S*\s\).*\n\1/{s/\n/\x01/;ba};h;x;s/\n.*//;s/^/\x01/;/^\(\x01[^\x01]\+\)\(\1\)\+$/{x;D};s/.//;s/\x01/\n/gp;x;D' file 
```

解释：

*   `:a`循环标记
*   `$!N`除非它是最后一行，否则将换行符和下一行附加到模式空间 (PS)
*   `/^\S*\s).*\n\1/{s/\n/\x01/;ba}`将以相同键开头的所有行组成一行，用十六进制代码替换换行符`01`
*   `h`将当前 PS 存储在保持空间 (HS) 中
*   `x`用 HS 切换 PS
*   `s/\n.*//`删除附加的最后一行（这不匹配）
*   `s/^/\x01/`在 HS 的开头添加一个十六进制代码`01`（这是一个用于匹配目的的虚构换行符。
*   `/^\(\x01[^\x01]\+\)\(\1\)\+$/{x;D}`对于那些相同的行，即没有例外，用 PS 切换 HS 并删除这些行并开始下一次迭代。
*   `s/.//;s/\x01/\n/gp;x;D'`那些确实有异常的行，删除`01`添加到前面的添加的十六进制代码，用换行符替换所有其他此类代码并打印这些行。然后用 PS 切换 HS 并删除到第一个换行符并开始下一次迭代。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-24T10:48:21.537

三个简单的步骤：

```
sort -u temp | nawk '{a[$1]++}END{for(i in a)print i,a[i]}' > temp_file
nawk 'FNR==NR{a[$1]=$2;next}{if(($1 in a) && a[$1]>1)print $0}' temp_file your_file
rm -rf tempfile 
```

您可以将这些步骤合并到一个 shell 脚本中，然后执行它

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T17:03:46.720

如果您的输入位于名为“test.txt”的文本文件中，您可以运行它：

```
cat test.txt | grep ^`cat test.txt | sort -u | awk 'BEGIN{split("", aux, "");ok="";} {if ($1 in aux){if (length(ok) > 0){ok=ok"\|"$1;}else{ok=$1;}}aux[$1]="";} END{print ok;}' -` 
```

可以一步步执行来理解命令，也可以问我（AWK部分有点复杂）。

这样，输出为：

```
Jan Red
Jan Red
Jan Green
Jan Red 
```

编辑：我忘了将反斜杠添加到“|” grep 的 OR ;-)

* * *

## 回答 #5

> 赞同：-1
> 
> 时间：2012-09-21T17:35:53.567

```
KEY_STRINGS="`sort file | uniq | awk '{print$1}' | uniq -d`" 
awk -vkeys="$KEY_STRINGS" '{if(keys~/$1/)print$0}' file 
```

我相信这个脚本会更容易理解。

# google-chrome-extension - Chrome 扩展 HTML 链接不会直接指向该网站

> ID：12534408
> 
> 赞同：0
> 
> 时间：2012-09-21T16:26:32.597
> 
> 标签：google-chrome-extension

我正在制作一个新的扩展，按钮会弹出一个下拉菜单，并且我有 HTML 代码

```
 <html>
 <a href="http://www.google.com/">Google</a>
 </html> 
```

这段代码应该指向谷歌，不是吗？我知道它可以工作，因为谷歌出现在弹出窗口中，但是当我点击它时它什么也没做。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T19:00:06.747

使用带有 : target="_blank" 的锚标记

# javascript - iOS 6 javascript 间歇性问题与 object.defineProperty

> ID：12534409
> 
> 赞同：7
> 
> 时间：2012-09-21T16:26:34.607
> 
> 标签：javascript, ios6

在访问使用较新的 Object.defineProperty 语法定义属性的对象上的属性时，是否有其他人注意到新的 iOS 6 javascript 引擎中出现间歇性错误/问题？

[https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/Object/defineProperty)

我看到javascript会失败的情况，说明未定义不是对象方法上的函数，这些对象方法作为以这种方式定义的对象的属性访问。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-23T13:53:07.277

如果您还没有解决这个问题，请确保所述属性是可枚举的（并且如果需要可配置）...

```
Object.defineProperty(obj, "key", {
  enumerable: true,
  configurable: true
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T17:45:21.010

根据[Kangax 的 ES5 表](http://kangax.github.com/es5-compat-table/)，“在 WebKit 的某些版本中，Object.defineProperty 不适用于 DOM 对象。” 我假设这就是您所指的。这是页面底部的注释#2。希望这可以帮助！

# three.js - 从 Blender 导入模型的镜面高光？

> ID：12534412
> 
> 赞同：2
> 
> 时间：2012-09-21T16:26:44.247
> 
> 标签：three.js

我在 Blender 中用 2 种不同颜色的材料制作了 Dice，并使用 Blender 导出器将其导出。在我的 three.js 代码中，我使用 JSONLoader 获取网格并使用 new THREE.MeshFaceMaterial(); 作为材料。

这可以很好地加载模型，两种不同颜色的材料正确显示。但我的问题是，我希望骰子在表面上有高光。这甚至可以通过导出的 Blender 模型实现吗？

当我使用 THREE.MeshPhongMaterial() 作为球体的材质时，我设法获得了一个带有镜面高光的球体，但是该球体不是从 Blender 导入的，据我所知，加载时我无法应用 Phong 材质Mesh with JSONLoader，还是有什么窍门？请记住：我在骰子上有两种不同颜色的材料，我从 Blender 导入 JSON 文件。骰子本身是红色的，但点应该是黑色的。所以我不是在说立方体的每一侧都有不同的颜色，而是立方体每一侧都有两种不同的颜色。你能帮助我吗？

这是代码片段：

```
loader.load("models/dice.js", function(geometry){
    var material = new THREE.MeshFaceMaterial();
    material.specular = 0xffffff;
    material.shininess = 10000000000;
    dice=new THREE.Mesh(geometry, material);
    dice.position.set(0,-400,5);
    dice.scale.set(75, 75, 75);
    dice.overdraw = true;
    dice.name="dice";
    navscene.add(dice);
}); 
```

如果有帮助，我可以从这两种材质中创建纹理并将它们应用到 Blender 中，以便 JSONLoader 加载纹理而不是材质，但我也无法实现镜面高光。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-22T12:15:46.933

Thx West，您为我指明了正确的方向。问题是，Blender 的标准材质类型是 Lambert。在 Blender 中，这种 Lambert 材质会产生所需的镜面高光，但一旦导入到三个，效果就消失了。我不知道这是错误还是期望的行为。

解决方法是将 Blender 中的材质类型设置为 Phong 材质。这即使在导入后也有效。我的猜测是，THREE.MeshFaceMaterial 是一个数组，其中包含所有加载的材质，无论它们是 Lambert、phong 还是其他材质。甚至可以混合这些材料类型。所以在我看来，THREE.MeshFaceMaterial 似乎根本不是一种“独立”的材质类型。如果我错了，请纠正我。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:59:03.917

如果您的网格几何体有一个`materials`数组，您可以在加载几何体后随时更改数组元素：

```
geometry.materials[ i ] = new THREE.MeshPhongMaterial( ... ); 
```

然后，您将网格的材质保留为`MeshFaceMaterial`：

```
mesh = new THREE.mesh( geometry, new THREE.MeshFaceMaterial() ); 
```

您使用的导出器脚本可能会根据您的设置默认设置`geometry.materials`为材质。`Lambert`看看脚本源代码，看看你能不能弄清楚。

# c# - 如何在 ASP.NET c# 中执行多个 ClientScript.RegisterStartupScript？

> ID：12534417
> 
> 赞同：2
> 
> 时间：2012-09-21T16:27:00.337
> 
> 标签：c#, asp.net, response.write, registerstartupscript, clientscript

我正在开发一个gridview，您可以在其中通过一个按钮下载多个文件。

这是我的网格视图：

```
<asp:GridView ID="grdvHistorialMensajes" runat="server" AllowPaging="True" 
                    AutoGenerateColumns="False" CellPadding="4" AllowSorting="true"
                    EmptyDataText="No Hay Mensajes Enviados" ForeColor="#333333" 
                    GridLines="None" CellSpacing="1" 
                    onpageindexchanging="grdvHistorialMensajes_PageIndexChanging" 
                    onrowcommand="grdvHistorialMensajes_RowCommand" 
                    onsorting="grdvHistorialMensajes_Sorting">
                    <AlternatingRowStyle BackColor="White" ForeColor="#284775" />

                    <Columns>
                        <asp:BoundField DataField="CorreoCliente" HeaderText="Correo Del Cliente" SortExpression="CorreoCliente" />
                        <asp:BoundField DataField="CorreosAdicionales" HeaderText="Correos Adicionales" SortExpression="CorreosAdicionales" />
                        <asp:BoundField DataField="Tema" HeaderText="Tema" SortExpression="Tema" />
                        <asp:BoundField DataField="Mensaje" HeaderText="Mensaje" SortExpression="Mensaje" />

                        <asp:TemplateField HeaderText="Fecha" SortExpression="Fecha">
                            <ItemTemplate>
                                <%# DataBinder.Eval(Container.DataItem, "Fecha", "{0:dd/MM/yyyy}")%>
                            </ItemTemplate>

                            <EditItemTemplate>
                                <asp:TextBox ID="tbxFecha" runat="server" Text='<%#Bind("Fecha","{0:dd/MM/yyyy}") %>' ValidationGroup="gpEdicionAgenda">
                                </asp:TextBox>
                            </EditItemTemplate>
                        </asp:TemplateField>

                        <asp:BoundField DataField="Hora" HeaderText="Hora" SortExpression="Hora" />
                        <asp:BoundField DataField="Archivos" HeaderText="Archivos" SortExpression="Archivos" />

                        <asp:TemplateField>
                            <ItemTemplate>
                                <asp:ImageButton ID="imgBtnDescargarArchivos" runat="server" 
                                    CommandArgument='<%# Eval("IdMensaje")%>' CommandName="Descargar" Height="16px" 
                                    ImageUrl="~/img/activar.png" ToolTip="Descargar" Width="16px" />
                            </ItemTemplate>
                        </asp:TemplateField>

                        <asp:TemplateField>
                            <ItemTemplate>
                                <asp:ImageButton ID="imgBtnVerMas" runat="server" 
                                    CommandArgument='<%# Eval("IdMensaje")%>' CommandName="VerMas" Height="16px" 
                                    ImageUrl="~/img/search.png" ToolTip="Ver Mas" Width="16px" />
                            </ItemTemplate>
                        </asp:TemplateField>
                    </Columns>

                    <EditRowStyle BackColor="#999999" />
                    <FooterStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                    <HeaderStyle BackColor="#5D7B9D" Font-Bold="True" ForeColor="White" />
                    <PagerStyle BackColor="#284775" ForeColor="White" HorizontalAlign="Center" />
                    <RowStyle BackColor="#F7F6F3" ForeColor="#333333" HorizontalAlign="Center" />
                    <SelectedRowStyle BackColor="#E2DED6" Font-Bold="True" ForeColor="#333333" />
                    <SortedAscendingCellStyle BackColor="#E9E7E2" />
                    <SortedAscendingHeaderStyle BackColor="#506C8C" />
                    <SortedDescendingCellStyle BackColor="#FFFDF8" />
                    <SortedDescendingHeaderStyle BackColor="#6F8DAE" />
                </asp:GridView> 
```

每当我单击“Descargar”RowCommand 时，我最初使用的是：

```
if (e.CommandName == "Descargar")
            {
                DataTable dt = ConexionBD.GetInstanciaConexionBD().GetArchivosPorMensaje(Convert.ToInt32(e.CommandArgument));

                foreach (DataRow dr in dt.Rows)
                {
                    string strArchivo = dr["Nombre"].ToString();
                    string strExtension = Path.GetExtension(strArchivo).ToLower();
                    Response.Write("<script>window.open('/Archivos/" + strArchivo + "');</script>");
                }
            } 
```

当我单击时，如果该行有 1 个 pdf、1 个 jpg 和 1 个 doc，它会在不同的窗口中同时打开 pdf 和 jpg，然后会下载 doc。这正是我想要的。但是，我注意到每当打开一个新页面时（在 pdf 和 jpg 的情况下），页面中的所有字体都会改变。所以我想找到一个解决方案，然后我尝试了这个：

```
if (e.CommandName == "Descargar")
            {
                DataTable dt = ConexionBD.GetInstanciaConexionBD().GetArchivosPorMensaje(Convert.ToInt32(e.CommandArgument));

                foreach (DataRow dr in dt.Rows)
                {
                    string strArchivo = dr["Nombre"].ToString();
                    string strExtension = Path.GetExtension(strArchivo).ToLower();
                    ClientScript.RegisterStartupScript(this.GetType(), "myFileOpenScript", "<script>window.open('/Archivos/" + strArchivo + "');</script>");
                }
            } 
```

当我打开一个 pdf 文件时，这次没有更改字体，但是，它只会打开/下载第一个出现 int dt.Rows[0] 的文件（dt.Rows[1] on 不会打开）。我想一个 Response.Write 可以部署多次，但是，一个 ClientScript.RegisterStartupScript 可能只能执行一次。

我可以使用另一种方法来不更改页面的字母字体并单击一下即可打开多个文件吗？

或者我怎么能多次执行 ClientScript.RegisterStartupScript？

提前致谢

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-09-21T16:34:12.643

一些额外的信息信息会有所帮助。您不限于多次使用 RegisterStatupScript，但您不能多次注册相同的类型/键组合（这是一项功能，而不是限制）。

如果您需要注册不同的脚本，请使用唯一键。如果您只是进行回发，重新注册启动脚本将/应该工作。

[http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.aspx](http://msdn.microsoft.com/en-us/library/system.web.ui.clientscriptmanager.aspx)

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T16:41:13.283

```
ClientScript.RegisterStartupScript(this.GetType(),
    "myFileOpenScript",
    "<script>window.open('/Archivos/" + strArchivo + "');</script>"); 
```

这里的脚本键是`myFileOpenScript`.

> 客户端脚本由其密钥和类型唯一标识。具有相同键和类型的脚本被认为是重复的。页面中只能注册一个具有给定类型和密钥对的脚本。尝试注册已注册的脚本不会创建该脚本的副本。 [http://msdn.microsoft.com/en-us/library/asz8zsxy.aspx](http://msdn.microsoft.com/en-us/library/asz8zsxy.aspx)

您可以使用`Guid.NewGuid()`每次生成不同的密钥。你可能想使用

```
RegisterStartupScript(Type, String, String, Boolean) 
```

反而。最后一个参数（布尔值）告诉它`script`为你创建标签，所以脚本参数可以只包含你的代码而不用担心标签。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2018-05-25T20:57:59.507

由于杰米托雷斯的回答缺乏一个例子

这是对的

```
ScriptManager.RegisterStartupScript(Page, GetType(), "setDatePickerStartDate", "javascript:setDatePickerStartDate('" + s_capstoneStartDate + "'); ", true);
ScriptManager.RegisterStartupScript(Page, GetType(), "setDatePickerEndDate", "javascript:setDatePickerEndDate('" + s_capstoneEndDate + "'); ", true); 
```

这是错误的，因为两者的第三个参数相同

```
 ScriptManager.RegisterStartupScript(Page, GetType(), "Javascript", "javascript:setDatePickerStartDate('" + s_StartDate + "'); ", true);
 ScriptManager.RegisterStartupScript(Page, GetType(), "Javascript", "javascript:setDatePickerEndDate('" + s_EndDate + "'); ", true); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T16:42:19.617

避免`Response.Write`在这样的事件处理程序中使用是正确的：它在`Render`页面生命周期阶段之前执行，因此在 HTML 页面的顶部输出。

您可以使用 a`StringBuilder`在`foreach DataRow`循环中构建脚本，然后注册一次。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-06-11T15:30:30.370

我知道我参加聚会有点晚了，但我需要完成同样的事情。知道@JaimeTorres 提供了必须有一个唯一键的知识，我只是制作了一个静态方法，您可以在其中传递页面和消息，并且该方法创建一个具有基本 Do.... 的任意“键”。循环并不断检查密钥，直到我们找到第一个尚未使用的密钥。然后它使用它来显示消息。对于我的目的来说工作得很好，如果他们找到这个答案，也许其他人可以利用它！

```
 /// <summary>
    /// Shows a basic MessageBox on the passed in page
    /// </summary>
    /// <param name="page">The Page object to show the message on</param>
    /// <param name="message">The message to show</param>
    /// <returns></returns>
    public static ShowMessageBox(Page page, string message)
    {
        Type cstype = page.GetType();

        // Get a ClientScriptManager reference from the Page class.
        ClientScriptManager cs = page.ClientScript;

        // Find the first unregistered script number
        int ScriptNumber = 0;
        bool ScriptRegistered = false;
        do
        {
            ScriptNumber++;
            ScriptRegistered = cs.IsStartupScriptRegistered(cstype, "PopupScript" + ScriptNumber);
        } while (ScriptRegistered == true);

        //Execute the new script number that we found
        cs.RegisterStartupScript(cstype, "PopupScript" + ScriptNumber, "alert('" + message + "');", true);
    } 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2019-01-14T09:41:41.347

我通常使用这种方法来显示警报，我可以在需要时调用它。

```
public class BasePage : System.Web.UI.Page {
        public void ShowNotif(string sMessage) {
            ScriptManager.RegisterStartupScript(Page, GetType(), Guid.NewGuid().ToString(), "alert('" + sMessage.Replace("'", "\'") + "'); ", true);
        }
} 
```

这意味着我可以多次运行 Javascript 代码。

用法：每个 Webform 类，像这样扩展 BasePage：

```
public partial class FinanceHostToHost : BasePage{ //Not extend System.Web.UI.Page
....
} 
```

函数调用：

```
 ShowNotif("Hello");
            ShowNotif("World");
            ShowNotif("Any message");
            ShowNotif("Message again"); 
```

# terminal - What is the code to start and close tomcat 7 on terminal mac?

> ID：12534419
> 
> 赞同：2
> 
> 时间：2012-09-21T16:27:08.370
> 
> 标签：terminal, tomcat7

I am very new to using the terminal and using tomcat. I had already installed tomcat yesterday and it was working, however today when I turn on my computer again, it is not working, I am assuming I need to start it up again , but I don't know how.

Can somebody explain to me or write the code to start it up please?

Thanks in advance!

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T17:57:02.387

这行得通！使所有 Tomcat 的 bin shell 脚本对 apache-tomcat-7.0.30/bin 下的文件可执行

代码是：

```
chmod a+x *.sh 
```

之后使用脚本从 tomcat/bin 运行：

```
./startup.sh 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T16:32:57.397

[这](https://web.archive.org/web/20120830040341/http://www.togotutor.com/tomcat/tomcat-control.php)是控制 Tomcat的`catalina.sh`shell 脚本的说明。

> Tomcat 控制脚本位于 Tomcat 主目录（安装了 Tomcat 的位置）内的 bin 目录下。对于 Unix 或 Unix 风格的操作系统，需要执行扩展名为“.sh”的脚本

`catalina.sh`提供了很多选项/控件，但`startup.sh`可以用来简单地启动它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-11-22T14:50:53.280

Under some circumstances the startup scripts do not execute because the execute permission has not been set. If this is the case you can change the execute permission to the scripts by typing the following:

```
cd ../bin

chmod 750 *.sh 
```

This signifies read, write, and execute permissions for the owner, read and execute permissions for the group, and no permissions for others.

# macos - Why does Grunt not add itself to the shell?

> ID：12534424
> 
> 赞同：38
> 
> 时间：2012-09-21T16:27:31.303
> 
> 标签：macos, gruntjs

I have a problem installing grunt. All the documentation, and blog post tutorials, say that running:

```
npm install -g grunt 
```

will then allow you to run grunt commands from the terminal.

I have a situation where grunt appears to install with no errors, but typing the command grunt in the terminal still gives:

```
-bash: grunt: command not found 
```

What could I be doing wrong? And where could I find grunt to add it to my BASH profile manually?

* * *

## 回答 #1

> 赞同：107
> 
> 时间：2013-02-28T19:34:57.503

由于 Grunt 版本 0.4（在 1 或 2 周前发布），您需要全局安装 grunt 命令行工具（如果需要，请`sudo`在命令之前使用）：

```
npm install -g grunt-cli 
```

然后在您的项目位置安装最新的**grunt**版本：

```
npm install grunt --save-dev 
```

Option`--save-dev`会将`npm`配置保存在您的**package.json**文件中，这样可以更轻松地安装或重新安装依赖项（仅使用`npm install`）。

* * *

## 回答 #2

> 赞同：13
> 
> 时间：2012-09-21T21:39:37.460

尝试使用详细标志运行安装：

```
npm install -g grunt --verbose 
```

您可以看到它的安装位置（例如 /usr/local/share/npm/bin/grunt）。然后检查你的路径：

```
echo $PATH 
```

如果路径不包含安装 bin 位置，请修改 bash 配置文件中的路径以包含 bin 目录的位置，然后在新终端中再次尝试 grunt。

**更新**：Grunt 0.4 改变了安装过程。对于 0.4 安装，请参阅下面 asgoth 的回答。

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2013-02-28T15:59:44.060

似乎`grunt`在当前版本`0.4.0`中没有安装 bin 命令。最后一个`0.3.x`版本是`0.3.17`，它支持 bin 命令。要从命令行运行 grunt，您需要安装 grunt 命令行 grunt-cli：

```
npm install -g grunt-cli --verbose 
```

* * *

## 回答 #4

> 赞同：6
> 
> 时间：2015-06-22T05:51:49.777

我已经*使用 Homebrew 安装了节点*，这是我的解决方案：

*   set config for -g (GLOBAL) install directory directory: **npm config set prefix /Users/YOURNAME/.node/**

*   确保编辑 PATH: **sudo nano ~/.profile**

*   添加到路径：**export PATH="/Users/YOURNAME/.node/bin:"$PATH**

*   然后更新源：**source ~/.profile**

*遵循这些步骤将允许将使用npm install -g somePKG 安装*的任何软件包放置在正确的位置，而不管您当前的工作目录如何。并且通过正确更新您的 $PATH 命令行功能将起作用。

信息基于：修复 npm 权限 - bit.ly/1CmIyqx

# php - php sql multiple queries. Is it a big deal?

> ID：12534431
> 
> 赞同：0
> 
> 时间：2012-09-21T16:28:14.033
> 
> 标签：php, sql, cart

I have a cart class, where I store the product ids. The user can open the cart through a button that opens the cart in a popup, so the cart content has to be loaded in every page.

I can store only the ids of the products because of the size limits, but I want to show the product names to the final user, so for each element I need to make a query and get the product data from the database.

Is there any major drawback by doing this? Or are there better solutions?

PS: I could get the id of all the products in the cart, and then do one single query that gets the data of any needed product. I’d rather avoid this since I would need to rewrite parts of the class, so is there any actual difference with the previous solution?

PPS: The total number of sql queries shouldn’t be too high in any case. Of course I wouldn’t mind, but I strongly doubt any user will purchase hundreds of different products at one time.

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T20:15:40.013

我只想从你的问题中强调一句话：

> 所以对于每个元素，我需要进行查询并从数据库中获取产品数据。

那是你的问题。你不需要这样做。您可以使用单个查询来查询您的数据库，并询问 ID 列表中的所有产品。

SQL 语言的一个有用部分是`IN(....)`子句。

```
$ids = [123, 884, 7848, 2882, 3232]; // let's say that is your input
$idList = implode(',', array_map('intval', $ids));
$sql = sprintf(
    "SELECT field1, field2, field3 FROM products WHERE products.ID IN(%s)",
    $idList
); 
```

这是对产品 ID 列表的单个查询。当您从数据库中获取数据时，您会动态创建一个内存数据库（也称为*Hashtable*），以便您可以根据 ID “获取”数据：

```
foreach($ids as $id)
{
    $concreteProduct = $rows[$id];
    ...
} 
```

您也知道它`array`，只是由从数据库返回的 ID 值作为键。由于 ID 是唯一的，因此仅适用于^(tm)。

希望这会有所帮助。有些人可能称之为过早优化，但是，您应该了解这个概念，因为这可以在许多情况下使用。

# magento - Magento product custom options to be positioned below the price

> ID：12534432
> 
> 赞同：2
> 
> 时间：2012-09-21T16:28:21.350
> 
> 标签：magento, block, option, product

I would like my Magento product custom options to be positioned below the price. I tried moving the blocks in catalog.xml file but nothing worked. I did flush all cache every time.

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-06-06T12:11:33.537

这可以在管理员的管理产品部分中完成。在design下，设置“Display Product Options In”>“Product Info Column”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-23T00:33:24.820

这个函数可以在

```
/app/design/frontend/your_package/your_theme/template/catalog/product/view.phtml 
```

或者，如果它不存在，请查看

```
/app/design/frontend/your_package/default/template/catalog/product/view.phtml 
```

如果文件不存在，则通过从复制创建它

```
/app/design/frontend/base/default/template/catalog/product/view.phtml 
```

或者，如果您使用的是企业版，则来自：

```
/app/design/frontend/enterprise/default/template/catalog/product/view.phtml 
```

切记不要碰任何东西`/app/design/frontend/enterprise/default/ `The code responsible for showing prices is:``

 `````
<?php echo $this->getChildHtml('tierprices') ?> 
```

You have to move the code responsible for showing the options, that looks like this:` 

```
<?php if (!$this->hasOptions()):?>
    <div class="add-to-box">
        <?php if($_product->isSaleable()): ?>
            <?php echo $this->getChildHtml('addtocart') ?>
        <?php endif; ?>
        <?php echo $this->getChildHtml('addto') ?>
    </div>
<?php else:?>
    <?php if ($_product->isSaleable() && $this->hasOptions() && $this->getChildChildHtml('container1') ):?>
        <div class="options-container-small">
            <?php echo $this->getChildChildHtml('container1', '', true, true) ?>
        </div>
    <?php else: ?>
        <?php echo $this->getChildHtml('addto') ?>
    <?php endif;?>
<?php endif; ?> 
```

directly below the code that's responsible for prices. Remember that the code above is an example, it may look different in your template, so don't copy-paste it.` 

`Anyway, the file responsible for showing prices is usually /app/design/frontend/your_package/your_theme/template/catalog/product/view/tierprices.phtml`（与往常一样的后备），但你不应该在你的情况下修改它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T23:07:50.853

修改模板或在您的主题中覆盖它！

/app/design/frontend/base/default/template/catalog/product/view.phtml

```
This is where the price is :

<?php echo $this->getTierPriceHtml() ?>

This means customer options showing between this if (){}

<?php if (!$this->hasOptions()):?> 
```

因此，您可以在模板文件中随意移动它们！或者您可以使用 CSS 设置它们的样式以将它们放在自定义位置！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T18:31:15.367

您可以通过编辑模板 (.phtml) 文件来更改它们：app/design/frontend/{default}/{default}/catalog/product/view.phtml

# excel - Excel: Formula Returning from conditional

> ID：12534437
> 
> 赞同：0
> 
> 时间：2012-09-21T16:28:40.580
> 
> 标签：excel, excel-formula

How to return formula of other cell (column L) if choose item in column A. Example: if answer, then return =I5 & " " & J5 if foo, then return '=I7 & " " & J7 & " " & K7 & " x " & L7

I want to return the formula instead of the result. ![enter image description here](../Images/5bcf1c2e1eb5301b1e5da36fae6b413c.png)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:09:13.150

将此功能放在公共模块中

```
Function GetFormula(rng As Range) As Variant
    GetFormula = rng.Formula
End Function 
```

我想这就是你想要的。您希望如何返回该公式有几个选项，例如 R1C1 样式。

**编辑**

哦，我想我得到了你想要的更多。好的，将您在蓝色表格中的公式应用到 F 列中您想要的任何单元格，您可以调用该`Indirect`函数。

因此，例如，如果您想将公式`'=I7 & " " & J7 & " " & K7 & " x " & L7`应用于您的列 F 然后调用`=INDIRECT(I7 & " " & J7 & " " & K7 & " x " & L7)`. 在您的列`I`中不要包含`=`符号。它会让它更容易一些。

您可以使用 Vlookup 通过使用参考表（蓝色表）中 A 列中的查找项来查找应应用的位置。返回列中的公式`I`。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:57:31.907

您可以通过嵌套公式来实现这一点。

把这个放在E5

```
=IF(A5 = "answer", A5 & " " & B5 & " " & D5, 
 IF(A5 = "bar", A5 & " " & B5 & " " & C5, 
 IF(A5 = "foo", A5 & " " & B5,
 "No If Formula Here yet"))) 
```

我从前两种格式开始为您准备公式。

# html - Write text within a path or polygon in SVG or Raphael.js

> ID：12534442
> 
> 赞同：3
> 
> 时间：2012-09-21T16:28:57.247
> 
> 标签：html, svg, geometry, raphael

I am using Raphael.js to create polygons, (or actually closed paths) over an image. I want to put text inside the polygons. Is there any way to create a text element and then adjust its size and position so that the whole thing will be within the bounds of a polygon?

Are there at least any algorithms that can give me good guesses that I could manually adjust?

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T23:51:36.910

好的，我在一天的过程中对此进行了一些思考，终于有机会将一些演示代码放在一起。它在很多方面都*明显不完美*，但可能是一个很好的起点，并且似乎与我的大多数随机生成的多边形一起工作得很好。

**第 1 部分：在多边形上居中文本**。使用边界框被证明非常不令人满意，所以我没有设计一种技术来平均给定路径中的所有点`container`：

```
 //  Determine the *weighted* center of this figure
            var segments = Raphael.parsePathString( container.attr( 'path' ) );
            var count = 0, sum_x = 0, sum_y = 0;
            for ( var i = 0; i < segments.length; i++ )
            {
                if ( segments[i][0] == 'L' || segments[i][0] == 'M' )
                {
                    count++;
                    sum_x += segments[i][1];
                    sum_y += segments[i][2];
                }
            }

            var cx = sum_x / count, cy = sum_y / count; 
```

**第 2 部分：碰撞检测**。我需要一种机制来检查给定对象是否在当前形状内。由于懒惰，我只是在创建画布之前扩展了 Raphael 元素对象。

```
 Raphael.el.isObjectInside = function( obj )
        {
            var box = obj.getBBox();
            return this.isPointInside( box.x, box.y ) 
                        &&
                    this.isPointInside( box.x2, box.y )
                        &&
                    this.isPointInside( box.x, box.y2 )
                        &&
                    this.isPointInside( box.x2, box.y2 );
        } 
```

**第 3 部分：迭代调整大小**。基本上，我们使用上面生成的坐标并将它们应用于生成的标签文本。我们每次迭代都会减少一次规模，直到我们低于某个阈值，此时我的代码会简单地放弃（你的代码可能不应该）：

```
 var s = 1.0;
            if ( ibox.width >= cbox.width * 0.7 )
            {
                s = ( cbox.width * 0.7 ) / ibox.width;
            }

            while ( s > 0.1 )
            {
                insert.attr( { transform: [ "S", s, s, ibox.x + ibox.width / 2, ibox.y + ibox.height / 2, "T", 
                if ( container.isObjectInside( insert ) )
                    return;
                s *= 0.65;
            }

            console.log("Warning: NOT a clean fit" ); 
```

对于我扔给它的大多数纯随机多边形，结果看起来都很好。我确信它的计算量远远超过它需要的量。我的代码在[这里](http://voidblossom.com/tests/polygonDodger.php)上演——只需单击多边形即可生成一个新的。

快乐编码。

# tree - 如何更改 ANTLR 布尔优先级？

> ID：12534447
> 
> 赞同：1
> 
> 时间：2012-09-21T16:29:21.193
> 
> 标签：tree, boolean, antlr, operator-precedence

我有以下可以正常工作的鹿茸 g 文件：

```
grammar BoolTest;

LEFT_PAREN : '(' ;
RIGHT_PAREN : ')' ;
AND : 'AND';
OR : 'OR';
WHITESPACE  :   ( ' '
        | '\t'
        | '\r'
        | '\n'
        ) {$channel=HIDDEN;}
    ;    
WORD :  (~( ' ' | '\t' | '\r' | '\n' | '(' | ')' ))*;

expression : and_expression;
and_expression : or_expression (AND^ or_expression)*;
or_expression : atom (OR^ atom)*;
atom : WORD | LEFT_PAREN! expression RIGHT_PAREN!; 
```

问题是我需要 AND 具有比 OR 更高的优先级。所以我修改了最后四行如下：

```
expression : or_expression;
or_expression : and_expression (OR^ and_expression)*;
and_expression : atom (AND^ atom)*;
atom : WORD | LEFT_PAREN! expression RIGHT_PAREN!; 
```

但由于某种原因，它不能正常工作。以及以下表达式：

```
a AND b OR c 
```

生成以下树，它完全缺少 OR 分支：

![在此处输入图像描述](../Images/a93ee51690bcb8f16bd93337c798fde4.png)

我究竟做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:35:11.473

发现了这个bug，实际上是我使用ANTLRWorks IDE的问题。当您运行调试模式并要求您输入文本时，下拉列表之一会显示 Start Rule:。它被设置为“and_expression”。将其更改为“表达式”后，程序运行正常，我得到以下树：

![在此处输入图像描述](../Images/c6e99776bd99abf2cbf9d4917559bc3e.png)

# ssms - 如何连接到 LocalDb

> ID：12534454
> 
> 赞同：79
> 
> 时间：2012-09-21T16:29:51.890
> 
> 标签：ssms, localdb

我使用 SqlLocalDb.msi 包安装了 LocalDb，我可以使用服务器名称使用 SSMS 连接到它`(LocalDb)\v11.0`。到现在为止还挺好。问题是当我尝试通过 .NET 4.5 应用程序连接到它时出现错误

> 服务器未找到或无法访问。

我从连接字符串开始`Data Source=(LocalDb)\v11.0`，然后添加了许多无济于事的东西（集成安全 true/sspi、附加数据库、使用实例等）

* * *

## 回答 #1

> 赞同：95
> 
> 时间：2014-06-12T13:15:59.907

我完全无法使用包括 MSSMA、sqlcmd 等在内的任何工具连接到 localdb。你会认为 Microsoft 会记录这一点，但我在 MSDN 上一无所获。我有v12并尝试过`(localdb)\v12.0`，但没有奏效。发出命令`sqllocaldb i MSSQLLocalDB`显示本地实例正在运行，但无法连接到它。

```
c:\> sqllocaldb i MSSQLLocalDB
Name:               MSSQLLocalDB
Version:            12.0.2000.8
Shared name:
Owner:              CWOLF-PC\cwolf
Auto-create:        Yes
State:              Running
Last start time:    6/12/2014 8:34:11 AM
Instance pipe name: np:\\.\pipe\LOCALDB#C86052DD\tsql\query
c:\>
c:\> sqlcmd -L

Servers:
    ;UID:Login ID=?;PWD:Password=?;Trusted_Connection:Use Integrated Security=?;
*APP:AppName=?;*WSID:WorkStation ID=?; 
```

**我终于想通了！！** 连接字符串是`(localdb)\MSSQLLocalDB`，例如：

```
$ sqlcmd -S \(localdb\)\\MSSQLLocalDB
1> select 'hello!'
2> go

------
hello!

(1 rows affected) 
```

* * *

## 回答 #2

> 赞同：87
> 
> 时间：2014-05-14T15:22:58.190

使用`(localdb)\MSSQLLocalDB`. 这是用于应用程序的 LocalDB 实例，独立于 Visual Studio 版本。

* * *

忽略我原来的答案：“使用 SQL Server 2014 Express LocalDB，使用`(localdb)\ProjectsV12`. 这在 Visual Studio 2013 和 SQL Server 2014 Management Studio 中都有效。” 虽然 ProjectsV12 确实会为您提供 LocalDB 实例，但它是[错误](https://stackoverflow.com/q/27197359/145173)的，旨在供[SQL Server Data Tools 使用](https://stackoverflow.com/q/43211082/145173)。

* * *

## 回答 #3

> 赞同：39
> 
> 时间：2012-09-21T17:02:53.480

我认为您遇到了与本文中讨论的相同的[问题](https://stackoverflow.com/questions/12463228/unable-to-connect-to-localdb-in-vs2012-a-network-related-or-instance-specific/12463683#12463683)。你忘了逃避你的`\`角色。

* * *

## 回答 #4

> 赞同：28
> 
> 时间：2019-03-12T21:20:17.203

`(localdb)\MSSQLLocalDB`与_`Windows Auth`

* * *

## 回答 #5

> 赞同：2
> 
> 时间：2014-03-06T14:37:19.523

我能够使用“(LocalDb)\Projects”从 SSMS 进行连接。这也是它在 VS2012 中出现的方式。

* * *

## 回答 #6

> 赞同：2
> 
> 时间：2019-08-03T15:00:19.963

```
 <add name="Default" connectionString="Data Source=(LocalDb)\MSSqlLocalDB; Initial Catalog=CRM_Default_v1; Integrated Security=True"
      providerName="System.Data.SqlClient"/> 
```

> 您在 Visual Studio 中的 web.config 文件 connectiionString 或转到查看 > SQL Server 对象查看器 > 添加 Sql Server> 在此处添加您的服务器

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2016-06-19T21:32:59.940

您可以使用 MSSMS 连接到 LocalDB。仅输入 SERVER NAME: **(localdb)\v11.0**并通过 Windows 身份验证保留它，它会连接到您的 LocalDB 服务器并向您显示其中的数据库。

* * *

## 回答 #8

> 赞同：1
> 
> 时间：2018-10-10T17:45:31.743

**你的连接字符串应该像**`

```
Data Source=(localdb)\ProjectsV13;Initial Catalog=master;Integrated Security=True;Connect Timeout=30;Encrypt=False;TrustServerCertificate=False;ApplicationIntent=ReadWrite;MultiSubnetFailover=False 
```

* * *

## 回答 #9

> 赞同：1
> 
> 时间：2020-04-22T17:06:49.537

假设：SqlConnection connectionObj = new SqlConnection()

对于：connectionObj.ConnectionString -> 使用服务器名称：**(localdb)\\MSSQLLocalDB**。

**注意：双反斜杠**

对于：App.config -> 使用服务器名称：**(localdb)\MSSQLLocalDB**

**注意：单反斜杠**

* * *

## 回答 #10

> 赞同：0
> 
> 时间：2020-08-04T04:30:15.693

可以通过浏览从 SQL Server 管理工作室找到数据库 - 在连接到数据库屏幕中

[在此处输入图像描述](https://i.stack.imgur.com/4cY8P.png)

还要确保在安装过程中安装了本地数据库：

[在此处输入图像描述](https://i.stack.imgur.com/1vpbk.png)

* * *

## 回答 #11

> 赞同：0
> 
> 时间：2022-01-17T19:07:13.673

要从 Microsoft SQL Server Management Studio 或 VS2019 及更高版本连接到 LocalDB，请使用服务器名称作为`(LocalDB)\MSSQLLocalDB`Windows 身份验证

# javascript - 如果 ruby on rails 中的 text_field 为空，如何禁用提交按钮？

> ID：12534457
> 
> 赞同：4
> 
> 时间：2012-09-21T16:30:02.317
> 
> 标签：javascript, jquery, ruby-on-rails

我是 ROR 的新手。我只想知道如果 text_field 为空，是否可以禁用提交标签按钮。？？

谢谢

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-09-21T16:32:32.457

你可以像这样用jquery来做，

**[现场演示](http://jsbin.com/utasar/1/edit)**

```
if($('#text_field').val() ==  "") 
   $('#submitButtonId').attr('disabled', true);

$('#text_field').keyup(function(){
    if($('#text_field').val() !=  "") 
         $('#submitButtonId').attr('disabled', false);    
    else
         $('#submitButtonId').attr('disabled', true);   
}); 
```

对于最新版本的 jQuery，您可能需要使用[prop()](http://api.jquery.com/prop/)而不是 attr() 来设置元素的 disabled 属性。

```
if($('#text_field').val() ==  "") 
   $('#submitButtonId').prop('disabled', true); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:33:24.320

通常它是通过验证完成的，因此按钮保持活动状态，但表单出现验证错误并且不保存。在您的模型中，您将添加：

```
validates_presence_of :some_field, :some_other_field 
```

如果你想这样做，你会使用javascript来完成它。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:32:45.837

您可以为此使用 jQuery

```
$(function(){

     var val = $('#text_field').val();
     if(val == ''){
        $('input[type=submit]').attr('disabled', true)
     }
}); 
```

检查[小提琴](http://jsfiddle.net/sushanth009/G6BJN/)

# c# - 标头出现在浏览器中，但在响应对象中缺失

> ID：12534459
> 
> 赞同：1
> 
> 时间：2012-09-21T16:30:15.520
> 
> 标签：c#, .net, http-headers, response

我有一个在 IIS 7.5 上运行的 .NET 应用程序，并返回了以下响应标头，如 Chrome 的网络页面所示：

```
HTTP/1.1 200 OK
Cache-Control: private
Content-Type: text/html; charset=utf-8
Content-Encoding: gzip
Vary: Accept-Encoding
Server: Microsoft-IIS/7.5
X-AspNetMvc-Version: 3.0
X-AspNet-Version: 4.0.30319
X-Powered-By: ASP.NET
Date: Fri, 21 Sep 2012 16:11:55 GMT
Content-Length: 840 
```

在 C# 代码中，我尝试读取这些响应标头，但唯一检索到`HttpContext.Response.Headers`的是以下两个：

*   服务器：Microsoft-IIS/7.5
*   X-AspNetMvc-版本：3.0

不用说，两者都`HttpContext.Response.Headers.AllKeys.Length`返回`HttpContext.Response.Headers.Keys.Count`2。

由于在生产环境中，应用程序必须读取一个额外的响应头，一个动态的，我需要能够拦截所有这些头。

一个解决方案将不胜感激。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:06:15.220

# ruby-on-rails - update_attributes() 不适用于嵌套属性和回形针？

> ID：12534462
> 
> 赞同：4
> 
> 时间：2012-09-21T16:30:21.093
> 
> 标签：ruby-on-rails, paperclip, nested-attributes, update-attributes

我的模型描述了段落和图像，其中每个段落都有多个图像。对于图像处理，我使用回形针。对于批量分配，我将图像用作段落的nested_attributes。相关代码：

模型/段落.rb

```
class Paragraph < ActiveRecord::Base
  has_many :images, :dependent => :destroy
  attr_accessible :text, :images_attributes, :images
  attr_accessor :text
  accepts_nested_attributes_for :images, :allow_destroy => true, :reject_if => proc { |attributes| attributes['photo'].blank? }
end 
```

模型/图像.rb

```
class Image < ActiveRecord::Base
  belongs_to :paragraph
  has_attached_file :photo, :styles => { :original => '250*250>' }
  attr_accessible :caption, :photo
  attr_accessor :caption
end 
```

paragraph.text 和 image.caption 是临时属性（不在数据库中）。如果我在控制器或 rails 控制台中更新一个段落（假设 id=1 的图像确实属于第一段），则以下内容会按预期更新paragraph.text，但根本不更新image.caption：

```
Paragraph.first.update_attributes({"text" => "foo", "images_attributes"=>{"0"=>{"caption"=>"bar", "id"=>"1"}}}) 
```

但是在不使用回形针的类似设置（嵌套临时属性）中，它可以按预期工作，例如对于页面有多个段落的页面：

```
Page.first.update_attributes({"paragraphs_attributes"=>{"0"=>{"text"=>"test", "id"=>"1"}}}) 
```

这会按预期使用临时文本属性更新页面和嵌套段落的值，这让我猜测，这可能是回形针问题......

任何帮助表示赞赏！谢谢！！！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-18T01:24:07.207

鉴于`images_attributes`_

```
{"0"=>{"caption"=>"bar", "id"=>"1"}} 
```

我相信缺少密钥会导致由于调用选项而`photo`被拒绝。将在未提供时为is ，因此被拒绝。`Paragraph``reject_if``accepts_nested_attributes_for``attributes['photo']``nil``nil.blank?``true`

# .net - SyncLock 是可重复的吗？

> ID：12534467
> 
> 赞同：2
> 
> 时间：2012-09-21T16:30:38.650
> 
> 标签：.net, vb.net, multithreading, synclock

我在一个管理自动刷新某些对象的类中有以下代码，它还允许您手动刷新。我想让它成为线程安全的。

```
Public Function ForceRefresh() As Foo
  DoRefresh()
  ResetTimer()
  Return Me.CurrentFoo
End Function

Private Sub DoRefresh()
  Me._currentFoo = Me._retriever.GetTheFoo()
End Sub 
```

我很想使用`Synclock`这两种方法：

*   `ForceRefresh`：所以我们不会让多个消费者线程同时尝试强制刷新和重置计时器
*   `DoRefresh``GetTheFoo()`: 所以如果我们已经在尝试检索一个，我们就不会尝试。我正在使用`System.Threading.Timer`which 可能会回调任何`ThreadPool`线程，因此仅使用标志可能不合适（但也许仍然有必要？）

... 像这样：

```
Private _syncRoot As New Object

Public Function ForceRefresh() As Foo
  Synclock _syncRoot
    'Snip ...
  End Synclock
End Function

Private Sub DoRefresh()
  Synclock _syncRoot
    'Snip ...
  End Synclock
End Sub 
```

但是后来我最终在调用时尝试了`Synclock`两次`_syncRoot`......`ForceRefresh`现在如果`Synclock`是可重入的，那么嵌套这些将不是问题。[MSDN](http://msdn.microsoft.com/en-us/library/3a86s51t%28v=vs.100%29.aspx)文档页面似乎暗示是这种情况，但没有明确说明。

注意：我会自己尝试一下，但我在 StackOverflow 上没有看到任何关于此的内容，并认为这是一个有用的问题需要回答。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T17:18:05.463

SyncLock 语句在后台使用 Monitor.Enter()。MSDN 库说：

> 同一个线程在没有阻塞的情况下多次调用 Enter 是合法的

这意味着它是可重入的。顺便说一句，很容易检查。

# python - 如何将乌龟移动到画布边缘？

> ID：12534473
> 
> 赞同：1
> 
> 时间：2012-09-21T16:31:10.110
> 
> 标签：python, turtle-graphics

有没有办法让光标（乌龟）移动到画布的右、左、下和上边缘？

[有人建议](https://stackoverflow.com/a/10315510/939986)使用`turtle.setx()`with argument`0`来移动到最左边的位置。但是当我这样做时，乌龟被移动到默认位置*（到中心）*。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:38:31.247

使用`window_width()`和`window_height()`函数来确定窗口的大小：

这会将海龟移动到最右边：

```
import turtle as tt

def main():
    tt.reset()
    print(tt.window_width(), tt.window_height())
    tt.setx(tt.window_width()//2)

if __name__ == '__main__':
    main()
    tt.mainloop() 
```

# coffeescript - 使用zombie.js 测试模态对话框

> ID：12534474
> 
> 赞同：0
> 
> 时间：2012-09-21T16:31:13.643
> 
> 标签：coffeescript, pug, zombie.js

我在模态对话框中有一些输入字段，就像这样（那是玉）：

```
 .modal-body
            .control-group
                label.required(for="event-planner-email")= Email
                .input
                    input#event-planner-email(name="email", type='text')

            .control-group
                label.required(for="event-planner-name")= Name
                .input
                    input#event-planner-name(name="name", type='text') 
```

我希望能够在测试中填写它们。我尝试按下打开模式的链接并使用zombie.js浏览器对象填充字段，coffee中的代码如下：

```
 browser.clickLink 'a#open-planner', () ->
                browser
                    .fill('event-planner-email', someEmail)
                    .fill('event-planner-name', someName)
                    .pressButton 'Create', () ->
                         do done 
```

但我收到一条错误消息：“没有匹配‘事件策划者电子邮件’的输入”。如果有人知道如何做到这一点，将不胜感激。谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:29:48.970

Maybe the modal has not come into view yet by the time your call back is firing. If there is a transition happening to show the modal, you'll have to wait for that transition to complete.

Maybe try adding a `setTimeout` in your call back of the `clickLink`:

```
browser.clickLink 'a#open-planner', ->
    fillForm = ->
        browser
            .fill('event-planner-email', someEmail)
            .fill('event-planner-name', someName)
            .pressButton 'Create', ->
                 do done

    setTimeout fillForm, 1000 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:34:19.303

来自[Bootstrap 文档](http://twitter.github.com/bootstrap/javascript.html#modals)

您需要在模态加载后运行您的僵尸代码，因此您应该使用“显示”事件

```
$('#myModal').on('shown', function () {
  // zombie
}) 
```

我不知道如何在咖啡中表达这一点

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T17:53:55.490

谢谢大家，原来我只是没有为输入元素使用正确的css选择器，所以而不是

```
 .fill('event-planner-email', someEmail) 
```

应该

```
 .fill('input#event-planner-email', someEmail) 
```

因为在上面的翡翠片段中，'event-planner-email' 是输入元素的 id。想删除我的问题，以免我进一步暴露我的愚蠢，但显然为时已晚。

# ruby-on-rails-3 - 将 OS X 更新到 10.7.5，现在我无法连接到本地 PostgreSQL 数据库

> ID：12534477
> 
> 赞同：0
> 
> 时间：2012-09-21T16:31:24.117
> 
> 标签：ruby-on-rails-3, macos, postgresql, osx-lion, homebrew

我正在 Mac OS X Lion 上开发几个 Rails 3.2 应用程序。昨晚，我从 10.7.4 更新到 10.7.5，今天早上我发现我不再能够连接到我的开发 Postgresql 数据库（而我的生产环境工作得很好，使用相同的代码库）。我在本地开发的所有使用 PostgreSQL 的应用程序都是这种情况。

每次尝试连接时都会收到错误消息：

```
PG::Error: could not connect to server: No such file or directory
Is the server running locally and accepting
connections on Unix domain socket "/tmp/.s.PGSQL.5432"? 
```

我已经阅读了其他一些关于类似问题的 SO 帖子，但其中大多数建议`PATH`更改`~/.bash_profile`. 但是，当我运行时`which psql`（如其他帖子中所建议的那样），`/usr/local/bin/psql`它会返回，这是正确的（根据其他帖子）。

我很犹豫是否要再次卸载并重新安装 PostgreSQL（甚至通过 Homebrew），因为我不想为我的所有应用程序弄乱我现有的 PostgreSQL 数据库。（也许这不是一个潜在的问题——我没有足够的信心说。）

我已经`pg`多次卸载并重新安装了 gem，关闭并重新打开了我的 shell 会话，重新启动了我的机器（及其所有组合），但都无济于事。

我可以从这里去哪里？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-04-10T12:19:16.733

您的问题是 PostgreSQL 没有运行。首先，我强烈建议在升级操作系统之前备份 PostgreSQL 数据库，因为有时事情进展不顺利。如果你有一个垃圾场，如果事情往南走，你有更多的选择。我同意在新操作系统上重新编译会对您现有的数据库提出一些问题。

首先要做的当然是尝试正常启动 PostgreSQL。也许它只是缺少一个启动脚本。就像是`sudo -u postgres pg_ctl -D /path/to/postgresql/data/dir`

如果这不起作用，您需要查看错误消息并尝试解决该问题。希望它可以正常工作。如果它不起作用，请将您的数据目录复制到运行旧版本的系统中。尝试从那里倾倒它。获得副本后（重要的是，首先备份文件！）您可能会查看是否可以让 pg_upgrade 工作。如果失败，请尝试（通过自制软件）编译您之前运行的相同主要版本。

如果失败，请聘请专家。

# android - Android 2.3.3 软件包（我在下载什么？）

> ID：12534479
> 
> 赞同：2
> 
> 时间：2012-09-21T16:31:43.577
> 
> 标签：android

嗨，谁能告诉我 SDK 管理器中 android 2.3.3 的所有其他软件包是什么？SDK 平台、示例 SDK 和 google API 在所有 SDK 中始终是必需的。但是其余的软件包是什么（Intel Atom、Real3D、Droid4、摩托罗拉等）。我也应该下载它们吗？

据我所知，它们看起来像是适用于不同手机或其他东西的兼容性包。有谁知道/想分享这方面的完整故事，*特别是为什么 2.3.3 有这么多包而其余的 SDK 没有*？所有回应表示赞赏。

PS：我知道这不是一个编程问题，不应该在这里问，但是很多为Android编程的人都去这里，所以我不妨问一次。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:52:05.083

**-**提到 Real3D、Droid4、Motorola 等这些软件包，直接指向**包含将公开这些手机提供的功能的 API。**

**-** 现在正如您提到的那样，该`SDK`版本`2.3.3`具有所有这些其他软件包没有的软件包，**因为这些是针对已** **安装并在其上运行的**`SDK 2.3.3`版本的设备，您将看到**其他软件包中不存在的**具有和，**因为我上面提到的同样的原因......****`SDK version 3.2``XOOM2ME``XOOM2`**

# c - 请推荐一个好的D-Bus教程（Linux C GTK+）

> ID：12534480
> 
> 赞同：-1
> 
> 时间：2012-09-21T16:31:44.287
> 
> 标签：c, linux, gtk, dbus

是的，我已经进行了搜索，但只发现了部分有效的东西。这似乎是一个真正的迷宫。例如：

*   他们为什么还要使用`g_main_loop_run()`？当GTK+程序已经进入主循环时，真的有必要`gtk_main()`吗？
*   `dbus_bus_request_name()`调用, `dbus_message_new_signal()`, `dbus_bus_add_match()`, ...等函数时，路径、接口名称和信号名称应如何显示`dbus_message_is_signal()`？
*   之后应该如何在文件中正确设置名称`/etc/dbus-1/system.conf`以允许程序使用 D-Bus 接口？令人惊讶的是，我发现的所有教程都完全忘记提及您需要编辑它。
*   如何异步捕获消息？应该以某种方式在单独的线程中完成吗？

请推荐任何可以帮助学习如何使用它的好的 GTK+ D-Bus 示例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:37:35.430

`gtk_main`正在调用 `g_main_loop_run()`，您应该查看文件[gtk/gtkmain.c](http://www.koders.com/c/fidEE9B81D3E82CDF39831A62B7D535EA7494A7A898.aspx)以找出答案。

谷歌搜索`dbug_bus_request_name`给出了几个例子，特别是[dbus-example.c](http://www.matthew.ath.cx/projects.git/dbus-example.c)

你应该阅读一个很好的[gtk 教程](http://zetcode.com/tutorials/gtktutorial/)来了解信号和槽在 Gtk 上下文中的含义。

谷歌搜索`d-bus tutorial`给出了[这个 dbus 教程](http://dbus.freedesktop.org/doc/dbus-tutorial.html)

最后，一个好主意是找到并研究相关自由软件的源代码。GtkApplication 示例正在调用 dbus 代码。

# javascript - 移动 javascript div 隐藏

> ID：12534486
> 
> 赞同：0
> 
> 时间：2012-09-21T16:32:02.947
> 
> 标签：javascript, mobile

如果您在移动设备上，我正在尝试使用此脚本隐藏 div，但它对我不起作用。我的javascript有问题吗？

```
<script type="text/javascript">
<!--
if (screen.width <= 640) {
document.getElementById('div2').style.display="block";
document.getElementById('div1').style.display="none";
}
//-->
</script> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:44:11.550

`<!--`您应该在代码的开头添加注释。

但是做你想做的最好的方法是媒体查询：

```
<link rel="stylesheet" media="only screen and (max-device-width: 640px)" href="small-device.css" /> 
```

这样，您可以`small-device.css`为您的网站的移动版本设置具有特定样式的文件。

看看这个教程：http: [//mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website /](http://mobile.smashingmagazine.com/2010/07/19/how-to-use-css3-media-queries-to-create-a-mobile-version-of-your-website/)

# fedex - 连接 FedEx 网络服务和 SaaS 的正确方法

> ID：12534488
> 
> 赞同：0
> 
> 时间：2012-09-21T16:32:16.160
> 
> 标签：fedex

从我目前了解到的情况来看，FedEx 要求每个客户注册[FedEx Web 服务](http://www.fedex.com/us/developer/)，这是非常特定于开发人员的，对某些客户来说不是很明显。

我很好奇是否有更好的方法将 FedEx 服务与假设的 SaaS 产品连接起来？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T17:19:28.033

您需要成为 FedEx 认证开发人员。这是一个非常耗时的过程。当您请求 Web 服务凭据时，他们会询问有关内部/外部开发的非常具体的问题。根据这些问题，您应该能够与适当的部门取得联系。

# asp.net - VB。NET ASPX：查找控件触发器并动态调用它

> ID：12534489
> 
> 赞同：0
> 
> 时间：2012-09-21T16:32:17.000
> 
> 标签：asp.net, vb.net, visual-studio-2010

我正在寻找一种知道控件名称的方法来提升它们或调用背后的进程事件/代码。我在 VS2010 中使用 VB .NET

我有一个 aspx 页面，面板中有一个复选框，每个复选框都有自己的触发器。我有保存选中复选框列表的代码。我有将选中状态恢复到这些复选框的代码，但我需要对复选框 checkchanged 事件执行关联代码。

```
' Read db to get saved list of checkboxes '
For each result from db
    Dim cb As CheckBox
    cb = 'a function that finds and returns the control'
    ' Now that I have the control, 
    ' how can I find and execute it's checkedchanged code? 
```

控制返回函数正在工作，因为在测试中，我可以处理 cb.checked = true，并且 cb 被选中，但这不会引发事件/触发代码。

关联的checkedchanged子示例：

```
Protected Sub cb_use_rc3_CheckedChanged(ByVal sender As Object, ByVal e As EventArgs) Handles cb_use_rc3.CheckedChanged
Protected Sub cb_use_casestatus_CheckedChanged(sender As Object, e As EventArgs) Handles cb_use_casestatus.CheckedChanged 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-22T18:53:51.610

```
For Each grd_Row As GridViewRow In gvPersonalInventario.Rows
  Dim cb As New Web.UI.WebControls.CheckBox
  cb = grd_Row.FindControl("CheckBox2")
  If cb.Checked = True Then
    label1.text = grd_Row.Cells(0).Text
  End If
Next 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:24:27.610

好的，我正在假设您的复选框每个都有一个单独的 ID，并且不是由任何类型的绑定控件生成的。

虽然可以确定哪个处理程序连接到哪个对象的哪个事件（或者我理解），但对于这种有限的情况，它可能比它的价值更麻烦。

最简单但最丑陋的方法是：

1.  遵循 Schmelter 先生的建议，将业务逻辑隔离在有意义的命名方法中。从每个事件处理程序调用它们，而不是将所有逻辑放在事件处理程序中。
2.  由于您拥有控件，因此您可以确定其 ID。使用`Select Case`带有控件 ID 的语句来确定要调用 #1 中的哪些方法。

# coffeescript - CoffeeScript 事件未触发

> ID：12534492
> 
> 赞同：0
> 
> 时间：2012-09-21T16:32:32.830
> 
> 标签：coffeescript, ruby-on-rails-3.2

我不知道该看什么。我有一个 Rails 3.2.8 应用程序，并且我有一个页面，除了一个之外，我所有的 Coffeescripts 都在其中触发。

我的控制器叫做“apps”，我的 Coffeescript 文件是 app.js.coffee。这是一个没有触发的调用：

```
$("#products_id").change ->
  alert "hello" 
```

我视图中的项目呈现如下：

```
<select id="products_id" class="select required" name="products[id]">
  <option value=""></option>
  <option value="1368">015-0761</option>
  <option value="1752">030-237</option>
</select> 
```

我正在使用 Firefox 和 Firebug 进行调试。我已经验证了 apps.js 脚本确实加载了我的更改。当我选择不同的东西时，我在选择框上没有任何活动。

我还在 apps.js.coffee 文件中移动了调用，并且我正在使用 TextMate 查看不可见字符以确保我没有任何错误的空格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:38:00.833

嗬！呈现页面时该元素不存在，稍后会显示。因此，我需要将调用更改为：

```
$("#products_id").live "change", ->
  alert "hello" 
```

这样可行！

# c# - WebMatrix C# AppState（变量？）在带有字符串变量的 if 条件下始终评估为 false

> ID：12534495
> 
> 赞同：0
> 
> 时间：2012-09-21T16:32:48.770
> 
> 标签：c#, if-statement, conditional-statements, webmatrix

> **可能重复：**
> [是否有一个全局变量（跨网页）我可以在 C# WebMatrix 中使用，它确实有效？](https://stackoverflow.com/questions/12537228/is-there-a-global-variable-across-web-pages-i-can-use-in-c-sharp-webmatrix-th)

我有一个相当奇怪的（对我来说）问题。我已经测试并尝试了很多事情，并将问题追溯到一个简单的事实。

当我尝试将 AppState["uniqueName"] 与字符串值进行比较时，它总是评估为 false。这里有几个片段，所以你可以看到我有什么：

在第一页：

```
AppState["gAdmitsMembership"] = AdmitsMembership; 
```

在第二页：

```
if(AppState["gAdmitsMembership"]=="true"){checkBoxes[0]="checked='checked'";}else{checkBoxes[0]="";} 
```

正如您可能会说的那样，重点是在提交表单后保持选中复选框（随后将数据以另一种形式备份以进行可能的编辑）

现在，正如我所说，我已经测试了很多东西，这就是我所做的。

我将 AppState["gAdmitsMembership"] 的值直接绘制到文本输入字段（在第二页中），以便查看正在测试的实际值是什么。它确实是“真”，但它仍然总是等同于假（我通过操纵“其他”发生的事情来确定另一个测试。

为什么这不符合 if 条件？

需要注意的是，在代码中，该值“真”不是布尔值，这一点很重要。它始终是字符串“true”。我必须这样做，因为当我尝试时：

```
if(AppState["gAdmitsMembership"]==true){checkBoxes[0]="checked='checked'";}else{checkBoxes[0]="";} 
```

（同样的事情只有布尔真）

我收到一条错误消息，提示“== 无法与对象或布尔值进行比较”或类似的东西。

出于这个原因，比较的字符串值必须保持为“true”，以便在将其添加到数据库时将其作为必要的布尔值 true 转换为数据库。

无论如何，任何能让我度过难关的帮助都会很快被接受并受到肯定。谢谢！

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2012-09-22T09:02:07.727

您用于在第一页上为 AppState 变量赋值的语法不正确。

尝试

```
App.gAdmitsMembership = AdmitsMembership; 
```

如上一个线程所述：[Webmatrix 2：存储静态值](https://stackoverflow.com/questions/12263892/webmatrix-2-storing-static-values)。

# java - 执行程序服务问题与提交和 ShutdownNow 与 RunnableException

> ID：12534496
> 
> 赞同：3
> 
> 时间：2012-09-21T16:32:49.003
> 
> 标签：java, executorservice

这个问题与[从shutdownNow（）返回的列表无法转换为提交的Runnable有关](https://stackoverflow.com/questions/12493449/listrunnable-returned-from-shutdownnow-can-not-be-converted-to-submitted-run)

**问题定义**

我想从中获取运行时异常`Runnable`，我只能使用`submit() call which returns me Future<?>`.

如果我使用`Submit`我会放松`execute`. 因为我将不再能够使用`shutdownNow()`来跟踪未启动的线程。

这是真的吗

**如果我想从我的任务中捕获可运行异常，我将永远无法使用 shutdownnow 来找出未启动的任务。**

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:35:12.560

您可以`execute()`通过使用 FutureTask 的自定义子类（它是一个 Runnable）与 Future 一起使用。对于大多数 Executor，调用`submit()`只是将 Runnable/Callable 与 FutureTask 封装在底层。在 FutureTask 的自定义子类中，保留对底层 Runnable/Callable 的引用并公开返回它的方法。那么，当你调用时`shutdownNow()`，返回的 Runnables 应该是你自定义的 FutureTask 的实例。（令人烦恼的是，您需要将 FutureTask 子类化才能获得底层任务，但这就是它的方式）。

# python - 在代理示例中理解 defer.DeferredQueue()

> ID：12534498
> 
> 赞同：2
> 
> 时间：2012-09-21T16:32:58.330
> 
> 标签：python, twisted

我正在尝试使用位于[此处](http://musta.sh/2012-03-04/twisted-tcp-proxy.html)的 Twisted 来理解一个简单的 python 代理示例。代理实例化一个服务器类，而后者又实例化一个客户端类。defer.DeferredQueue() 用于将数据从客户端类传递到服务器类。

我现在试图了解 defer.DeferredQueue() 在这个例子中是如何工作的。例如这句话的意义是什么：

```
self.srv_queue.get().addCallback(self.clientDataReceived) 
```

它是类似的

```
self.cli_queue.get().addCallback(self.serverDataReceived) 
```

陈述。

当`self.cli_queue.put(False`) 或被 `self.cli_queue = None`执行时会发生什么？

现在只是试图与 Twisted 交手，所以事情似乎相当令人生畏。对事物如何连接的一个小解释将使掌握这一点变得更加容易。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T08:00:01.910

根据[文档](http://twistedmatrix.com/documents/current/api/twisted.internet.defer.DeferredQueue.html)，DeferredQueue 有一个`put`将对象添加到队列的普通方法和一个 deferred`get`方法。

该`get`方法返回一个 Deferred 对象。您向对象添加一个`callback`方法（例如`serverDataReceived`）。每当队列中有可用的对象时，Deferred 对象就会调用该`callback`方法。**该对象将作为参数传递给方法**。如果队列为空或 serverDataReceived 方法尚未完成执行，您的程序仍会继续执行下一条语句。当队列中有新对象可用时，`callback`无论程序的执行点如何，都会调用该方法。

换句话说，它是一个异步流，与同步流模型相反，在同步流模型中，您可能有一个 BlockingQueue，即您的程序将等待队列中的下一个可用对象继续执行。

在您的示例程序`self.cli_queue.put(False)`中，将 False 对象添加到队列中。这是一种标志，告诉 ProxyClient 线程不会再有数据添加到队列中。这样它就应该断开远程连接。你可以参考这部分代码：

```
def serverDataReceived(self, chunk):
        if chunk is False:
            self.cli_queue = None
            log.msg("Client: disconnecting from peer")
            self.factory.continueTrying = False
            self.transport.loseConnection() 
```

设置 cli_queue = None 只是为了在连接关闭后丢弃队列。

# ios - iOS Storyboard 切换到 AppDelegate 上没有 segue 的视图

> ID：12534500
> 
> 赞同：0
> 
> 时间：2012-09-21T16:33:00.323
> 
> 标签：ios, uiviewcontroller, storyboard, presentmodalviewcontroller

我有一个一次性协议视图，仅在用户第一次启动应用程序时才会显示。

我使用故事板 IOS 5.1，我的 rootview 是一个导航视图控制器。我的协议视图与导航控制器无关我只想显示一个 modalview 弹出然后关闭视图： ![在此处输入图像描述](../Images/8da294de0d302f022ce07af383c1e7aa.png)

我使用以下代码，但它没有做任何事情应用程序只是继续并启动我放置标志的导航视图控制器，是的应用程序进入 if 语句。：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
       if(login==ok){
       UIStoryboard *storyboard = [UIApplication sharedApplication].delegate.window.rootViewController.storyboard;
        UIViewController *loginController = [storyboard instantiateViewControllerWithIdentifier:@"AgreementViewController"];
        [self.window.rootViewController presentModalViewController:loginController animated:YES];
        }
return YES;

} 
```

如何切换与情节提要无关的视图控制器并将其关闭？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-01T10:19:04.100

在上周末我一直在开发的应用程序中，我遇到了类似的情况。我想第一次展示一个单独的故事板以进行引导设置。我的代码看起来和你的几乎一样，当我调试它时它给了我一个警告。这是因为我试图展示我的一次性 ViewController 的 rootViewController 在应用程序中此时不可见。

因此，我决定将我的一次性视图控制器设置为 rootViewController，而不是“在”rootViewController 上显示我的一次性视图控制器。在您的情况下，它将类似于：

```
- (BOOL)application:(UIApplication *)application didFinishLaunchingWithOptions:(NSDictionary *)launchOptions
{
    if(login == ok) {
        UIStoryboard *storyboard = [UIApplication sharedApplication].delegate.window.rootViewController.storyboard;
        UIViewController *loginController = [storyboard instantiateViewControllerWithIdentifier:@"AgreementViewController"];
        [self.window setRootViewController:loginController];
    }

    return YES;
} 
```

要关闭它，您可能会从一次性视图控制器添加一个 segue 到您的第一个视图控制器，或者您可以使用与您问题中的代码类似的代码。

另一种方法是在您的第一个“正常”视图的 viewDidAppear 中而不是在 AppDelegate 中进行检查和视图切换。

希望这将为您指明正确的方向。

# sql - 在 Execute 语句中调用用户定义的标量函数

> ID：12534507
> 
> 赞同：0
> 
> 时间：2012-09-21T16:33:21.897
> 
> 标签：sql, sql-server

> **可能重复：**
> [在 TSQL 中强制转换整数并连接到 varchar](https://stackoverflow.com/questions/4936180/cast-integer-and-concatenate-to-varchar-in-tsql)

我创建了两个标量函数，每个函数都返回`uniqueidentifer`类型。我需要在执行语句中调用这些过程，但我似乎语法错误。

```
Exec spModifyProductPropertyValue 
     @PAVID, 
     fnGetPropertyIDbyLabel(@Label7, @USPID, 0, 1), 
     @ProductID, 
     @Value7, 
     fnGetPINID(@7PIN), 
     0, 
     @counter out 
```

我注意到的是，当我单独调用该函数然后传递使用上述调用中上一个调用的输出时，就像这样

```
Declare
      @PropertyID as uniqueidentifier = null

Select @PropertyID = fnGetPropertyIDbyLabel(@Label7, @USPID, 0, 1)

Exec spModifyProductPropertyValue 
         @PAVID, 
         @PropertyID, 
         @ProductID, 
         @Value7, 
         fnGetPINID(@7PIN), 
         0, 
         @counter out 
```

编译器并没有太多抱怨。这种方法的问题是我最终创建了这么多临时变量（几乎 50 个），这是我想尽量避免的。我将不胜感激任何帮助，以使这个正确请。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:44:31.823

的语法`UDF`是

```
expression... function_name(value_1, value_2, ... value_n)... 
```

因此，您只能传递值，而不是表达式。

因为使用函数是一个表达式，在另一个函数的调用中

```
 Exec spModifyProductPropertyValue 
     @PAVID, 
     dbo.fnGetPropertyIDbyLabel(@Label7, @USPID, 0, 1) as GetPropertyID,  --Expression
     (..) 
```

不可能。

所以，是的，你必须创建变量。但如果所有都是 int，也许你可以创建一个并在每次使用函数时使用它。或者修改你的函数，让它只做两个函数做的事情。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-09-21T16:45:55.173

您需要所有者前缀：

```
Exec spModifyProductPropertyValue 
     @PAVID, 
     dbo.fnGetPropertyIDbyLabel(@Label7, @USPID, 0, 1) as GetPropertyID, 
     @ProductID, 
     @Value7, 
     dbo.fnGetPINID(@7PIN) as GetPINID, 
     0, 
     @counter out 
```

Awnser 在这里：[选择中的 SQL 用户定义函数](https://stackoverflow.com/questions/363838/sql-user-defined-function-within-select)

# javascript - 我的网页 div 没有正确设置动态宽度

> ID：12534511
> 
> 赞同：0
> 
> 时间：2012-09-21T16:33:36.163
> 
> 标签：javascript, jquery, css

我有 2 个工具栏，屏幕两侧各 1 个，以及一个主要内容区域。我不希望它不得不横向滚动，因为这很可悲，所以我试图弄清楚是否有人可以帮助我设置它。

我目前的尝试是：

```
 $("#main").css("width", window.outerWidth - $("#t1").width() - $("#t2").width()); 
```

问题在于，由于利润，它仍然太大。而不是我做宽度，我应该做outerWidth，类似于我做窗口的方式，还是有一个jquery命令可以做到这一点？

谢谢

这是一个基本的小提琴：它的设置不同，但想法就在那里。我只是不确定如何去做。 [http://jsfiddle.net/fallenreaper/DfZx7/](http://jsfiddle.net/fallenreaper/DfZx7/)

在对我的小提琴进行越来越深入的修补后，我相当确定我在我给出的示例中已经弄清楚了。 *derp* Standby 当我查看是否可以将相同的东西应用到我的代码时。

该示例不适用于我的代码，但主要和属性的边框都设置为 2px 左右。减去 8 个像素即可解决。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:42:30.280

你不需要 JavaScript 来避免滚动条。这是一个布局宽度，两个固定宽度的列和一个流动的列。

这是您的布局的“骨架”以响应方式：

```
<div id="window">
    <div id="column-sx"></div>
    <div id="main"></div>
    <div id="column-dx"></div>
</div>​ 
```

CSS：

```
#window {
    width:100%;
    overflow:hidden;
}
#column-sx {
    width:54px;
    float:left;
}
#column-dx {
    width: 140px;
    float:right;
}
#main {
    width:100%;
    float:left;
    margin-right:-194px; /* left + right col width */
}
#main > * {
    margin-right:194px; /* left + right col width */
} 
```

这样它就永远不会“中断”，也不会导致水平滚动条。

无论如何，您可能想`min-width`为#main 内容设置一个，并为内容添加另一个容器，而不是使用`> *`

用你修改过的代码[检查这个小提琴](http://jsfiddle.net/gionaf/JM3gg/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:40:11.133

在我的脑海中，我认为outerWidth会起作用。如果没有，您可以通过`.style`属性找到边距值 - 但这并不理想。

如果您动态设置宽度并且您真的讨厌水平滚动，您应该注意的一件事是调整窗口大小。您也可以将上述函数放入函数中，`$().resize()`以确保宽度始终在窗口内，并用 css 对其进行补充，`min-width`这样它就不会太小。

# c# - .NET MVC3：创建虚拟文件 URL 并重定向到控制器

> ID：12534512
> 
> 赞同：0
> 
> 时间：2012-09-21T16:33:43.197
> 
> 标签：c#, asp.net-mvc-3, asp.net-mvc-routing

假设我有一个 MVC3 网站，其 URL 如下： [http:](http://www.anything.com/) **//www.anything.com/feed.xml**

诀窍是，文件**feed.xml**并不真正存在，它将由控制器在运行时动态生成。这样，它将对人们透明。知道如何将控制器绑定到虚拟 URL 吗？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-22T12:28:31.187

这是你需要的吗？

```
routes.MapRoute("", "feed.xml", new { controller = "Feed", action = "Index" }); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:52:49.570

创建自定义路线并`File result`从操作中返回。看看这个链接：

*   [回归基础：动态图像生成、ASP.NET 控制器、路由、IHttpHandlers 和 runAllManagedModulesForAllRequests](http://www.hanselman.com/blog/BackToBasicsDynamicImageGenerationASPNETControllersRoutingIHttpHandlersAndRunAllManagedModulesForAllRequests.aspx) （在您的情况下不需要自定义`RouteHandler`）
*   [ASP.NET MVC上传下载文件](http://www.mikesdotnetting.com/Article/125/ASP.NET-MVC-Uploading-and-Downloading-Files)（如何返回文件）

# java - Java 的 MEF (.NET) 类似物

> ID：12534513
> 
> 赞同：4
> 
> 时间：2012-09-21T16:33:43.753
> 
> 标签：java, dependency-injection, mef

我非常习惯在 .NET 中使用 MEF 的这种简洁语法

```
[Export(typeof(ISomething))]
public class Something : ISomething {
} 
```

Java中的注解有什么类比吗？（和相应的框架）。任何依赖注入容器都可以很好地兼容？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:46:57.493

Java 中有几个可用的 IoC 容器。我想到的两个是带有[IoC Container的](http://static.springsource.org/spring/docs/3.0.7.RELEASE/reference/beans.html#beans-annotation-config)[Spring](http://www.springsource.org)和[Google Guice](http://code.google.com/p/google-guice/wiki/Injections)。

我主要使用[Spring IoC](http://static.springsource.org/spring/docs/3.0.7.RELEASE/reference/beans.html#beans-annotation-config)并发现它非常好用。

[这](http://www.vogella.com/articles/SpringDependencyInjection/article.html)是另一个关于 Spring IoC 的好教程。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T17:53:06.723

从我能找到**的到现在**，我可以使用带有注释的[Google Guice 。](http://code.google.com/p/google-guice/)在那里（在[GG](http://code.google.com/p/google-guice/)中）他们指定接口的默认实现者，而不是执行实现的导出（如在 MEF 中）。例如

```
@ImplementedBy(Something.class) 
public interface ISomething {
    ...
}

public class Something implements ISomething {
    ...
} 
```

构造函数参数注入等也可以从文档中获得。

# symfony - Symfony2/Doctrine：仅加载相关实体的子集

> ID：12534514
> 
> 赞同：3
> 
> 时间：2012-09-21T16:33:46.423
> 
> 标签：symfony, doctrine-orm, entity

Symfony2 应用程序有一个`Job`实体，它有一个`tasks`属性，一个实体的集合`Task`。

`Job->getTasks()`用于迭代给定作业的任务集合。`Task`封装在属性中的实体`tasks`由 Doctrine 延迟加载。我猜他们是在`getTasks()`被调用的时候加载的。

删除额外的细节后，`Job`实体看起来像这样：

```
<?php

class Job
{        
    /**
     * @var \Doctrine\Common\Collections\Collection
     * @ORM\OneToMany(targetEntity="Example\Bundle\Entity\Task\Task", mappedBy="job")
     */
    private $tasks;

    public function __construct()
    {
        $this->tasks = new \Doctrine\Common\Collections\ArrayCollection();
    }

    /**
     * @return Doctrine\Common\Collections\Collection 
     */
    public function getTasks()
    {        
        return $this->tasks;
    }
} 
```

我经常只需要访问所有任务的一个子集（可能是 1000 个任务中的 10 个）来完成一项工作，目前通过迭代`getTasks()`并挑选出具有相关 ID 的任务来实现。

对于大型任务集合（数千、数万），从数据库加载任务集合可能需要很长时间。

我想减少访问任务子集所需的时间。我可以通过使用自定义实体存储库`Task`按 id 和作业检索实体来做到这一点。

我想知道 Symfony2 和/或 Doctrine2 的内置功能是否已经存在用于执行此操作。

我的想法是，具有相关实体集合的实体是一种常见情况（例如博客文章和评论），并且在实体级别可能存在一些与分页相关的概念，用于仅检索相关实体的子集。

是否有我需要的内置 Symfony2 功能？

**更新1：**

理想情况下，我希望能够在`Job->getTasks()`知道它将仅返回我以某种方式指定的任务子集时仍然能够迭代。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T17:07:28.353

我认为您正在寻找[Extra Lazy Association](http://docs.doctrine-project.org/projects/doctrine-orm/en/latest/tutorials/extra-lazy-associations.html)。

# git - 使用git在终端中编码错误的字符

> ID：12534517
> 
> 赞同：2
> 
> 时间：2012-09-21T16:34:05.787
> 
> 标签：git, encoding, ubuntu-12.04

每当我尝试使用“git diff”命令查看文件更改时，它都会向我显示特殊字符的问题，例如重音字符，但如果我看到带有“cat”的文件，它会显示一切正常。我正在使用 Ubuntu 12.04 LTS。

前任：

```
WHERE  `T<C3><A9>cnico` IS NOT NULL 
```

我尝试将这些行放在 .gitconfig 中，关闭终端 e 再次打开，但仍然无法正常工作。

```
[i18n]
    logoutputencoding = utf8
    commitencoding = utf8 
```

有人有其他建议吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:41:10.070

确保您的 git 版本。

对于[Ubuntu12.0.4（精确），包搜索 git](http://packages.ubuntu.com/precise/devel/git-core)表示：

```
git-core (1:1.7.9.5-1) 
```

i18n 问题已在 git1.7.10+ 中得到解决（参见“ [git、msysgit、accents、utf-8、最终答案](https://stackoverflow.com/questions/5854967/git-msysgit-accents-utf-8-the-definitive-answers/5855213#5855213)”）。

# c# - 如何在netsuite的文件柜中搜索文件？

> ID：12534519
> 
> 赞同：0
> 
> 时间：2012-09-21T16:34:11.853
> 
> 标签：c#

我是网络套件的新手。我需要在 File Cabinate 中搜索一个文件，为此我认为我需要调用 getSelectValue 方法。任何人都可以帮助我如何在 C# 中调用方法（应该是参数）吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:40:46.403

您可以使用此代码

```
var myFilterByList = new GetSelectFilterByFieldValueList(new
GetSelectFilterByFieldValue[]{new GetSelectFilterByFieldValue(null,"entity","10")});//Adujst parameters

    var getSelectValueFieldDescription = new GetSelectValueFieldDescription(yourEntity,
null, "itemList", "item", null, null, myFilterByList); //Adjust parameters

var result = GetSelectValue(getSelectValueFieldDescription,1); 
```

链接：[http ://www.celigo.com/ns/downloads/suiteTalk/samples/net/svcMgr/docs/HTML/html/ea4e3442-6fcd-b2eb-4b41-153689a06735.htm](http://www.celigo.com/ns/downloads/suiteTalk/samples/net/svcMgr/docs/HTML/html/ea4e3442-6fcd-b2eb-4b41-153689a06735.htm)

```
public virtual GetSelectValueResult GetSelectValue(
    GetSelectValueFieldDescription fieldDescription,
    int pageIndex
) 
```

# .htaccess - 无法使用 .htaccess 删除 index.php

> ID：12534523
> 
> 赞同：0
> 
> 时间：2012-09-21T16:34:25.600
> 
> 标签：.htaccess, codeigniter

我已经安装了 codeigniter，当我访问 localhost/aplication/index.php 时，我想从 url 中删除 index.php。我已经从 httpd.conf 中设置了取消注释 mod_rewrite.so 这是我的 .htaccess 文件：

```
RewriteEngine On
RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ index.php/$1 [L] 
```

当我从 localhost/aplication/index.php/data/users/12 访问 url 但不使用此 url localhost/aplication/data/users/12 时，它会成功。

我怎样才能解决这个问题？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:55:53.153

尝试关注这个关于[codeignitor pretty urls](http://www.fahdmurtaza.com/myblog/2008/08/22/codeigniter-clean-urls-apache-mod-rewrite-removing-indexphp-from-url-in-codeigniter-application.html)的页面。你的规则看起来是正确的，但我对正则表达式很糟糕。

需要研究的一些事情是使用 phpinfo(); 检查 mod_rewrite 是否可用。该链接中的第三步还讨论了使用 a2enmod 启用 mod_rewrite。并确保重新启动 Apache。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:50:50.100

检查你的配置文件应该有一行说：

```
$config['index_page'] = 'index.php'; 
```

您可以将此变量设置为 '' 或者您可以完全注释掉这一行，无论哪种方式，它都是从您的 codeigniter url 中删除 index.php 过程的一部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-22T10:17:13.653

这是删除 index.php 的方法：

根目录下的.htaccess 文件：

```
RewriteBase /
RewriteEngine on
RewriteCond $1 !^(index\.php|images|js|css|robots\.txt)
RewriteRule ^(.*)$ index.php/$1 [L] 
```

用于管理一些静态页面，例如：example.com/about、example.com/contact、example.com/terms 等

必须配置路由文件并编辑：

```
//the controller that will be when it is exampl.com
$route['default_controller'] = 'YOUR_MAIN_CONTROLLER_NAME_HERE';
//I creted this for pages that are created dynamically or for displaying error when I want
$route['404_override'] = 'friendlyPages'; 
```

# javascript - 如何使用 .js.erb 文件以编程方式获取目录中包含的文件名列表？

> ID：12534530
> 
> 赞同：0
> 
> 时间：2012-09-21T16:34:38.473
> 
> 标签：javascript, ruby-on-rails, ruby, ruby-on-rails-3, erb

我们使用的是 Rails 3.0，我有一个 js.erb 文件，其中包含我们的徽标图像的硬编码路径，但这意味着一旦部署应用程序，我们就无法轻松地向应用程序添加更多徽标。理想情况下，我们希望找到目录中每个图像的名称，这样用户就可以在文件夹中添加一些图像来添加更多徽标。

我尝试了这段代码[http://pragprog.com/wikis/wiki/InstantGratification-2/version/21](http://pragprog.com/wikis/wiki/InstantGratification-2/version/21)归结为使用 ruby​​ 将列表发送到 html.erb。但是，由于这是一个 js.erb 并且位于我们的 app/assets/javascripts 文件夹中，我不知道如何将 ruby​​ 变量从控制器获取到 js.erb。

我还简单地尝试在 js.erb 中导入 System.IO 以访问一些文件 API。没用，我不太习惯使用 erb 文件。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:18:32.527

你是对的，js.erb 文件不会像普通的 html.erb 操作视图那样直接访问控制器的方法。您可以直接在 js.erb 中嵌入文件列表逻辑，因为您可以引用 Ruby 核心库，例如，此代码段会将 app/assets/images 目录中的文件名称作为 JavaScript 数组输出：

```
var files = [
<% Dir.entries("#{Rails.root}/app/assets/images").each do |file_name| %>
  '<%= file_name %>',
<% end %>
]; 
```

或者您可以在辅助类中实现辅助方法，例如

```
module ApplicationHelper
  def image_files
    Dir.entries("#{Rails.root}/app/assets/images")
  end
end 
```

然后你必须将它包含在你的 js.erb 中，如下所示：

```
<% environment.context_class.instance_eval { include ApplicationHelper } %>
var files = [
<% image_files.each do |file_name| %>
  '<%= file_name %>',
<% end %>
]; 
```

# java - 如何将arrayList的元素传递给可变参数函数

> ID：12534531
> 
> 赞同：22
> 
> 时间：2012-09-21T16:34:46.987
> 
> 标签：java, collections, andengine, variadic-functions

我有一个充满元素的arrayList。我想将该数组列表的元素作为参数传递给可变参数函数。

我的功能

```
public SequenceEntityModifier(final IEntityModifier... pEntityModifiers) 
```

我的数组列表

```
ArrayList<IEntityModifier> arr = new ArrayList<IEntityModifier>();
arr.add(new MoveXModifier(1, 50, 120));
arr.add(new MoveXModifier(1, 120, 50)); 
```

我想将它传递给函数，就好像我会单独传递它们一样。

```
new SequenceEntityModifier( /* elements of arr here */ ); 
```

这样的事情可能吗？

提前致谢。

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2012-09-21T16:38:30.180

做就是了：

```
new SequenceEntityModifier(arr.toArray(new IEntityModifier[arr.size()])); 
```

这会将 复制`ArrayList`到给定的数组并返回它。所有 vararg 函数也可以将数组作为参数，因此：

```
public void doSomething(Object... objs) 
```

所有的合法电话是：

```
doSomething(); // Empty array
doSomething(obj1); // One element
doSomething(obj1, obj2); // Two elements
doSomething(new Object[] { obj1, obj2 }); // Two elements, but passed as array 
```

**一个警告：**

涉及原始数组的 Vararg 调用不会像您期望的那样工作。例如：

```
public static void doSomething(Object... objs) {
    for (Object obj : objs) {
        System.out.println(obj);
    }
}

public static void main(String[] args) {
    int[] intArray = {1, 2, 3};
    doSomething(intArray);
} 
```

人们可能希望这会在不同的行上打印`1`,`2`和, 。`3`相反，它会打印类似的东西`[I@1242719c`（an 的默认`toString`结果`int[]`）。这是因为它最终创建了一个`Object[]`带有一个元素的元素，即我们的`int[]`，例如：

```
// Basically what the code above was doing
Object[] objs = new Object[] { intArray }; 
```

`double[]`,`char[]`和其他原始数组类型也是如此。请注意，这可以通过将类型更改为`intArray`来解决`Integer[]`。如果您正在使用现有数组，这可能并不简单，因为您无法将 an`int[]`直接转换为 an `Integer[]`（请参阅[这个问题](https://stackoverflow.com/questions/880581/)，我特别喜欢[Apache Commons Lang](http://commons.apache.org/proper/commons-lang/)[`ArrayUtils.toObject`](http://commons.apache.org/proper/commons-lang/javadocs/api-3.1/org/apache/commons/lang3/ArrayUtils.html#toObject(int[]))的方法）。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T16:38:34.427

该构造`IEntityModifier...`是语法糖`IEntityModifier[]`

请参阅[相应的 JLS 部分](http://docs.oracle.com/javase/specs/jls/se5.0/html/classes.html#8.4.1)（*8.4.1 形式参数*）

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-21T16:52:02.783

我总是创建一个需要 的重载`Iterable< ? extends IEntityModifier >`，并使用 将可变参数版本转发到这个版本`Arrays.asList()`，这很便宜。

# silverlight - 在 windows phone 7 中更新用户界面

> ID：12534532
> 
> 赞同：0
> 
> 时间：2012-09-21T16:35:05.490
> 
> 标签：silverlight, windows-phone-7

在后台工作的方法中，我有两条重要的线：

```
createPopup();
MessageBox.Show(sth);
more lines
more lines 
```

createPopup() 只是创建一个弹出窗口，添加一个网格作为子项并显示弹出窗口。我的问题是，为什么首先显示messageBox，然后显示Popup，它出现在此方法中的所有行完成之后？我怎样才能让这个弹出窗口在这个方法中的所有行都完成之前显示？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:30:16.747

所有 UI 更改通常都会排队并立即显示在屏幕上。这不包括 MessageBox。因此它会立即显示并阻止执行，直到用户单击确定。因此，即使您的 popUP 第一次执行，它也只会在 MessageBox 之后显示在 UI 中。

对于您的问题，请尝试将您的 MessageBox.Show(something) 放在单独的线程中。

```
createPopup();
Dispatcher.BeginInvoke(() =>
   {
       MessageBox.Show("some message");
   });
more lines
more lines 
```

试试看。我不确定它是否能解决您的问题，因为我不知道 createPopUp() 方法中的代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T22:15:26.377

创建弹出窗口，直到 Layout 事件才真正在屏幕上绘制它。如果要确保在显示弹出窗口之前已绘制弹出窗口，请将事件处理程序附加到弹出窗口的 LayoutUpdated 事件并从该事件处理程序中显示消息框。确保也分离事件处理程序，否则您将看到多个消息框。

```
public InitPage()
{
   Popup popup = new Popup();
   popup.LayoutUpdated += popup_LayoutUpdated;
   LayoutRoot.Controls.Add(popup);
}

void popup_LayoutUpdated(object sender, object e)
{
     popup_LayoutUpdated -= popup_LayoutUpdated;
     MessageBox.Show("hello");
} 
```

# javascript - 在 html 中为移动测验应用程序预加载 50 个问题的最佳方式是什么？

> ID：12534536
> 
> 赞同：2
> 
> 时间：2012-09-21T16:35:15.100
> 
> 标签：javascript, html, jquery, cordova

在 html 中为移动测验应用程序预加载 50 个测验类型问题的最简单和最简单的方法是什么？

如果用户失去 wifi 和互联网访问权限，我希望他们能够在重新获得 wifi/3-4g 访问权限时按下提交按钮。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:42:47.533

我会通过将问题作为 Javascript 对象包含在网页中来预加载问题。

```
var questions = [
  {"q": "Why did the Chicken cross the road"},
  {a: [
        "It was bored",
         "It was following the goat."
      ]
  }
} 
```

您可以使用 AJAX 提交答案。如果出错，请使用[localstorage](http://www.html5rocks.com/en/features/storage)保存答案。使用每隔几秒钟`.setTimeout()`唤醒一次，看看提交是否有效。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:06:07.790

可能更简单的方法是将所有问题放在页面上（在 html 中），然后当您的用户浏览它们时，您可以根据需要隐藏和显示它们。当用户提交时，如果失败，可以放置一个等待图标，并通过 setTimeout 继续尝试。正如杰里米指出的那样，如果窗口关闭，您还可以将答案存储在本地存储中。

对你来说最好的答案真的取决于你的整体架构，但你不必使用 javascript 或 json 来加载所有问题，具体取决于你的技术水平。

一个简单的模型（不完全功能）：

[http://jsfiddle.net/lucuma/naMg5/](http://jsfiddle.net/lucuma/naMg5/)

# asp.net - 验证摘要未显示在消息框中

> ID：12534537
> 
> 赞同：0
> 
> 时间：2012-09-21T16:35:19.227
> 
> 标签：asp.net

我知道问题是什么，我只是不知道为什么或如何解决它。基本上我有两个默认禁用的RequiredFieldValidators。当用户单击按钮时，会检查它们是否应该启用。

```
HCAmountValidator.Enabled = HealthCareReimbursementChkBox.Checked; <-- enables req validator
DCAmountValidator.Enabled = DependentCareReimbursementChkBox.Checked; <-- enables req validator

Page.Validate(); 
if (!Page.IsValid)
    return; 
```

在最后一段代码中，它检查验证，然后返回，但我得到的只是错误文本和屏幕底部的摘要。不会弹出消息框。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-21T20:24:27.423

我清除了我的网络浏览器缓存，它又开始工作了。

# regex - 用 Notepad++ 替换前导空格

> ID：12534538
> 
> 赞同：3
> 
> 时间：2012-09-21T16:35:19.337
> 
> 标签：regex, notepad++

我想使用 Notepad++ 用相同数量的给定字符替换一行中的所有前导空格。例如，我想改变：

```
zero
 one
  two
   three 
```

进入：

```
zero
@one
@@two
@@@three 
```

我没有成功地让这个工作。我确实找到[了 Regex 来替换 notepad++ 中的 html 空白和前导空白](https://stackoverflow.com/questions/4683021/regex-to-replace-html-whitespace-and-leading-whitespace-in-notepad)，但无法获得我想要的结果。

记事本++可以做到这一点吗？我宁愿不必编写代码来执行此操作...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T16:44:21.943

正如蒂姆的回答所表明的那样，这不能在单个搜索/替换中完成，但是这里是您可以使用多个替换相当快速地完成相同任务的方法：

寻找：`^( *)[ ]`

用。。。来代替：`\1@`

现在只需向“全部替换”按钮发送垃圾邮件，直到它指示没有要替换的匹配项。这将在每次点击时替换每行开头的一个空格，因此它需要与最缩进的行相同的点击次数。

确保选择“正则表达式”作为搜索模式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:39:55.453

您需要可变长度的后向断言来在单个正则表达式中执行此操作，而 Notepad++ 不支持这些。

作为记录，在 EditPadPro 中您可以搜索`(?<=^ *)\s`并替换为`@`.

# php - While/For 循环混合输出确切数量的礼物

> ID：12534540
> 
> 赞同：0
> 
> 时间：2012-09-21T16:35:21.743
> 
> 标签：php, loops, for-loop, while-loop, modulus

所以我正在尝试为约会网站处理礼物。您可以拥有的最大礼物是 9，并且必须返回 9 个礼物跨度，无论是对于拥有 9 个礼物的用户，所有 9 个都是从数据库返回的，还是从数据库返回 4 个，其余 5 个从 for 循环返回，或者0 来自 db 和所有 9 来自 for 循环。查询 mysql 数据库，while 循环输出用户拥有的礼物，而 for 循环负责确保返回总共 9 个礼物跨度，具体取决于 while 循环的输出（目前不能正确包装）：

```
$i=0;
while($row = $user_gifts->fetch(PDO::FETCH_ASSOC)){
    $i++;   
    $gift_name = $row["gift_name"];

    if ($i%3==1) {
      $gifts_show .= '<div>';
    }
    $gifts_show .= '<span>'.$gift_name.'</span>';   
}

    if($i<1){ //0 gifts from db, all 9 no gifts
       $i=0;
       for ($i = $i; $i < 9; $i++) {
            if ($i%3==1) $gifts_show .= '<div>';    
                $gifts_show .= '<span>No Gift.</span>';
            if ($i%3==0) $gifts_show .= '</div>';
       }
    } else { //1+ gifts from db, mix gifts with no gifts until 9 are reached
       for ($i = $i; $i < 9; $i++) {
                $gifts_show .= '<span>No Gift.</span>';
            if ($i%3==0) $gifts_show .= '</div>';
       }
    } 
```

每 3 个礼物应该被包裹在一个 div 中。所以用 3 个 div 包裹的 9 个礼物的输出应该是这样的：

```
<div>
  <span>DB Gift 1</span> 
  <span>DB Gift 2</span> 
  <span>DB Gift 3</span> 
</div>
<div>
  <span>DB Gift 4</span> 
  <span>No Gift</span> 
  <span>No Gift</span> 
</div>
<div>
  <span>No Gift</span> 
  <span>No Gift</span> 
  <span>No Gift</span> 
</div> 
```

知道如何在 div 中正确输出和包装每 3 个跨度 3 次，而不管从数据库输出了多少礼物？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:55:23.247

这都是关于简单的数组操作。

假设我有以下数组：

```
$array = array(
    'DB Gift 1',
    'DB Gift 2',
    'DB Gift 3',
    'DB Gift 4'
); 
```

...但我想展示 9 个元素。所以首先我用“空”元素填充它：

```
$array = array_pad($array, 9, 'No Gift'); 
```

...并且我想以 3 个块的 3 个块显示它。所以我将它分成 3 个块：

```
$array = array_chunk($array, 3); 
```

...现在这只是一个简单的例子，将它们连接在一起。所以首先我加入所有的内部元素：

```
foreach ($array as &$block) {
    $block = '<span>'.implode('</span><span>', $block).'</span>';
} 
```

...然后我加入外部元素：

```
$result = '<div>'.implode('</div><div>', $array).'</div>'; 
```

任务完成。

[看到它工作](http://codepad.viper-7.com/EIOA2x)

# c# - 禁用 TFS 结帐唠叨

> ID：12534541
> 
> 赞同：2
> 
> 时间：2012-09-21T16:35:22.963
> 
> 标签：c#, tfs, visual-studio-2012

有什么方法可以让 TFS 从解决方案资源管理器菜单中执行结帐而不问我一堆愚蠢的问题？我只想点击“检查以进行编辑”并让它检查所有默认设置的文件。取而代之的是一个非常烦人的对话，其中包含我不关心的一堆选项。有任何想法吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T16:38:50.933

工具>>选项>>源代码管理>>环境

有一个选项“在菜单中显示静默签出命令”

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:38:32.117

是的。

在工具/选项下选择源代码管理。

在环境选项下，有一个“签入项目”组。

您应该能够选择“自动签出”进行编辑和保存。

这应该会自动签出文件。

# asp.net - 基于 URL 路径的 IIS 7 URL 重定向

> ID：12534543
> 
> 赞同：2
> 
> 时间：2012-09-21T16:35:58.373
> 
> 标签：asp.net, wcf, iis, iis-7, url-rewriting

我有一个托管在 ASP.NET 4 环境（Windows 7 上的 IIS 7.5）中的 WCF Web 服务，我想使用 URL 重写/重定向。我需要这样做的原因是因为我无法更改某些移动设备代码来仅插入参数。

这是我想要的网址：

> [http://server.test.com/VirtualDirectory/theOrganization/RequestService.svc/REST/GetIssueTypes](http://server.test.com/VirtualDirectory/theOrganization/RequestService.svc/REST/GetIssueTypes)

真实网址是：

> [http://server.test.com/VirtualDirectory/RequestService.svc/REST/GetIssueTypes?organization=theOrganization](http://server.test.com/VirtualDirectory/RequestService.svc/REST/GetIssueTypes?organization=theOrganization)

请注意我要如何删除 theOrganization 并将其附加到查询字符串以进行重定向。

```
<rule name="test" stopProcessing="true">
    <match url="(.+\.?)/(.+)/RequestService.svc/(.+)" />
    <action type="Redirect" url="{R:1}/RequestService.svc/{R:3}?organization={R:2}"
    redirectType="Permanent" />
</rule> 
```

我知道写规则有点奇怪。认为我的正则表达式可以正确匹配。我在 IIS 管理器的 URL 重写测试器中运行表达式，它似乎与我想要的匹配。另外，我确实安装了 IIS URL Rewrite，并且我制定了一个简单的规则并且它有效。

但是，当我使用浏览器尝试它时，它无法重定向并导致 404。我希望 IIS 重写专家能够介入，因为我还很陌生。

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-01T22:05:08.623

我在具有 iis 7.5 和 url rewrite 2.0 的测试服务器上测试了您的规则，并且该规则正在运行，但是您的正则表达式匹配您想要的 url 和真实的 url。

所以你最终得到一个双重重定向

我想你想要你的模式是这样的

> (.+.?)/VirtualDirectory/(.+)/RequestService.svc/(.+)

希望这可以帮助。

# vim - 重新映射结束键 - $ 不足

> ID：12534545
> 
> 赞同：0
> 
> 时间：2012-09-21T16:36:03.847
> 
> 标签：vim

我试图停止使用箭头键在 VIM 中导航，这样我就不必将手从主行移开。我遇到的问题是找到等效的结束键。我用它一吨去到一条线的尽头。我仍然可以使用它，但我必须将我的手从主行移开，这使得这种调整毫无意义。$ 将光标移动到行中的最后一个字符，而不是行中的最后一个字符之后，这是我想要它去的地方。为什么我要在该行的最后一个字符之前插入？

如何将 End Key 的功能（可在插入和可视模式下使用）重新映射到其他内容？

谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T17:30:45.910

看起来你正在做`$i`的是错误的方法。

`$`是到达行尾的正确命令，但`i`用于在当前字符**之前进入插入模式。**您应该使用在当前字符**之后**`a`进入插入模式。

 **因此，您似乎被阻止了，因为您不知道哪个与IMO`a`一样基本。`i`

`$a`会解决你眼前的问题。

但是还有更多，你知道你可以`I`在行首使用进入插入模式吗？*我们可以使用什么命令在行尾*进入插入模式？

`A`没错，正如@dusan 评论的那样，在行尾进入插入模式的正确命令是简单的。

你不需要重新映射任何东西。您需要的是第二次（第一次？）注入`$ vimtutor`.**

# sitecore - 如何在 Sitecore 中重命名安全组？

> ID：12534548
> 
> 赞同：2
> 
> 时间：2012-09-21T16:36:10.387
> 
> 标签：sitecore, sitecore6

我所在的部门最近更名了。但是，在 Sitecore 中，我有一些名称包含旧部门名称的组。我找不到任何方法来重命名这些组以使用新的部门名称。角色管理器中没有编辑或重命名选项。

有没有办法在创建组后重命名组？或者是重新创建该组及其**所有权限**的唯一选择（完成任务）？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T20:40:59.117

Sitecore 以明文形式存储项目的权限，并且除了名称之外，它们不会与角色相关联，因此如果您重命名在项目上使用过的角色，那么当您重命名它时，作者将不再拥有任何权利。如果您尚未使用该角色，那么您可以按照@Bryan 的建议在 aspnet_Roles 表中更改它。

还有一种方法。您可以创建一个新角色并为其命名您想要的名称，然后将原始角色添加到其中。这样，作者将获得相同的权限，但拥有新角色。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2016-08-12T17:38:08.067

我相信上面帖子中的问题和答案涉及 Sitecore 6。

对于可能偶然发现这篇文章的人：我们通过更新数据库成功地重命名了 Sitecore 7.2 中的角色，没有任何问题。

以下是需要使用新 RoleName 更新的表：

**- aspnet_roles** : 更新新的 RoleName

**- RolesInRoles**：更新 MemberRoleName 和 TargetRoleName

希望这对某人有帮助！

* * *

## 回答 #3

> 赞同：-1
> 
> 时间：2012-09-21T17:45:14.417

如果您使用的是开箱即​​用的角色提供程序，那只是标准的 ASP.NET 角色。[这里](https://stackoverflow.com/questions/281891/how-do-you-rename-a-role-using-membership-in-net)有一些关于这个的讨论。

如果你想冒险，你可以在你的 Core DB 中编辑角色名，表名是 aspnet_Roles。不知道这会产生什么影响。但是，嘿，我喜欢冒险。让我们知道它是如何工作的。:)

# matlab - 生成delyed soundtrck - matlab

> ID：12534549
> 
> 赞同：0
> 
> 时间：2012-09-21T16:36:12.690
> 
> 标签：matlab, wav

我正在尝试编写一个函数，该函数将 .avi 文件作为输入并返回相同的视频，但音轨有延迟。我正在使用`ffmpeg`，但遇到了问题。这是功能：

```
function Delyed = Dely_Movie_Soundtrack(filename,delayed)  
 Wav_File_Name = strrep(filename, '.avi', '.wav'); %the output file  
 wav = ['ffmpeg -i',' ',filename,' ','-vn -acodec copy',' ',Wav_File_Name]; %the command  
 system(wav); %executes the commant  
 [signal, Fs] = wavread('Will.wav');  
 size(signal)  
end 
```

我收到以下错误

```
Data compression format (Format #85) is not supported. 
```

我在网上读到了它，但我没有找到有用的（有效的）链接。
任何帮助将非常感激。
谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-24T05:37:39.147

解决方案是专门指示程序以“原始”状态进行编码，否则它只是给出名称 .wav，但实际上它仍然是 mp3。这是命令：

```
 wav = ['ffmpeg -i',' ',filename,' ','-vn -coder:a raw',' ',Wav_File_Name]; 
```

谢谢

# android - 读取所有联系人数据

> ID：12534551
> 
> 赞同：8
> 
> 时间：2012-09-21T16:36:19.687
> 
> 标签：android, contacts, contactscontract

我使用的是 Android 2.3.3，API 级别 10。我想读取所有联系人和与他们关联的数据，因此，例如所有电子邮件地址、电话号码、自定义字段……我这样尝试：

```
Uri contactUri = ContactsContract.Contacts.CONTENT_URI;
Cursor contacts = managedQuery(contactUri, null, null, null, null );

contacts.moveToFirst();

do {
    for(int i=0;i<contacts.getColumnCount();i++)
    {
         System.out.println(contacts.getColumnName(i) + ": " + contacts.getString(i));
    }

    System.out.println("============\n\n");

} while (contacts.moveToNext());

contacts.close(); 
```

但是，这只给了我以下字段：

```
times_contacted: 0
contact_status: null
custom_ringtone: null
has_phone_number: 1
phonetic_name: null
phonetic_name_style: 0
contact_status_label: null
lookup: [removed]
contact_status_icon: null
last_time_contacted: 0
display_name: [removed]
sort_key_alt: [removed]
in_visible_group: 1
_id: 101
starred: 0
sort_key: [removed]
display_name_alt: [removed]
contact_presence: null
display_name_source: 40
contact_status_res_package: null
contact_chat_capability: null
contact_status_ts: null
photo_id: null
send_to_voicemail: 0 
```

电话号码、电子邮件地址……在哪里？感谢您的任何提示！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-09-21T16:54:27.883

请参阅 Contact Contract API 示例

[http://www.higherpass.com/Android/Tutorials/Working-With-Android-Contacts/](http://www.higherpass.com/Android/Tutorials/Working-With-Android-Contacts/)

```
ContentResolver cr = getContentResolver();
    Cursor cur = cr.query(ContactsContract.Contacts.CONTENT_URI,
            null, null, null, null);
    if (cur.getCount() > 0) {
    while (cur.moveToNext()) {
        String id = cur.getString(
                    cur.getColumnIndex(ContactsContract.Contacts._ID));
    String name = cur.getString(
                    cur.getColumnIndex(ContactsContract.Contacts.DISPLAY_NAME));
    if (Integer.parseInt(cur.getString(cur.getColumnIndex(ContactsContract.Contacts.HAS_PHONE_NUMBER))) > 0) {
        //Query phone here.  Covered next
        }
        }
}
} 
```

看看这个例子

[http://code.google.com/p/android-contacts-contract-example/](http://code.google.com/p/android-contacts-contract-example/)

# jquery - 如果 Animation X 已经在运行，则不要为 X 设置动画（在 keyup 内）

> ID：12534552
> 
> 赞同：3
> 
> 时间：2012-09-21T16:36:25.750
> 
> 标签：jquery, jquery-animate, keyup

如果 msg.d 开始从 'true' 返回 'false' 直到有足够的时间让动画停止，它当前的编写方式会导致 hide 一次又一次地触发。

有没有isHiding之类的？

提前致谢！

```
if(msg.d == "true") {
    if(!$("#addContactEmailError").is(":visible")) {
         $("#addContactEmailError").show('bounce');
    }
    $("#addContactSubmitButton").attr("disabled", true);
}
else {
    if($("#addContactEmailError").is(":visible")) {
         $("#addContactEmailError").hide('slide', { direction: "up" });
    }
    $("#addContactSubmitButton").attr("disabled", false);
} 
```

**编辑 1**

这一切都在一个 keyup 处理程序中。

**编辑 2**

使用动画仅在完成时触发动画。如果 msg.d 更改，但现在不正确的动画尚未完成，则不会触发正确的动画。

**蹩脚的解决方案**

我使用全局布尔值来跟踪状态。我讨厌那样做。尽可能提供赏金以获得更好的解决方案。谢谢大家！

**取消赏金**

对不起，伙计们，没有意识到我必须和自己的代表一起购买。:(

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-16T01:15:59.843

如果你想要`stop`一个动画，中间动画，并让它从那个`stop`ped css 状态移动到另一个，使用 ，最重要的是，`stop(true, false)`.

底线：`stop(true,false)`“神奇地”停止动画在其轨道上，但认为 css 设置为任何停止动画的 css 参数，因此您可以从该点继续，而无需尝试猜测或弄清楚您应该如何从`stop`ped制作动画观点。

换句话说，如果你设置了 css through `animate`，但你`stop`ped 它，动画元素将保持在任何 css 状态`stop`，但在`stop`ped 动画中输入的 css 设置将是当前 css 设置，直到更改。

这是关键。您不必猜测`stop`离开 css 状态的位置。您可以继续返回，就好像您的动画完全完成一样。

这是这个概念基础的演示：http: [//jsfiddle.net/dYYZP/65/](http://jsfiddle.net/dYYZP/65/)

* * *

从这里撕掉基础动画：[Jquery 分层动画从下面滑出](https://stackoverflow.com/questions/6638034/jquery-layered-animation-slide-out-from-under)

* * *

**后记**

由于`animate`、`absolute`定位 、 和 中`relative`的定位`offset`很容易`stop(true,false)`，我很少使用任何内置动画。他们太笨重了，不知道你真正需要什么。它们非常适合最基本的动画，但如果你想让你的页面闪耀，上面的那些概念（我可能会很容易添加），需要加以利用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:52:16.930

如上建议使用 ":animated" 选择器

```
if(msg.d == "true") {
    var contact = $("#addContactEmailError");

    if(!contact.is(":visible") && !contact.is(":animated")) {
         contact.show('bounce');
    }
    $("#addContactSubmitButton").attr("disabled", true);
}
else {
    if(contact.is(":visible") && !contact.is(":animated")) {
         contact.hide('slide', { direction: "up" });
    }
    $("#addContactSubmitButton").attr("disabled", false);
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T17:02:20.327

也许你应该使用`.stop().hide(`and ，`.stop.show(`无论你在哪里使用`hide`and `show`。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T16:40:06.987

您可以使用动画选择器检查它当前是否正在动画。

[http://api.jquery.com/animated-selector/](http://api.jquery.com/animated-selector/)

# heroku - 在php中上传heroku文件

> ID：12534554
> 
> 赞同：-1
> 
> 时间：2012-09-21T16:36:38.357
> 
> 标签：heroku

很长一段时间以来，我一直在想用 heroku 服务器在 facebook 上制作一个应用程序。实际上我的应用程序通过 php 动态生成图像。但是heroku不允许我生成图像。有人可以解释一下如何解决它或推荐任何其他免费服务器，如heroku吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:39:45.003

我真的不知道你的问题是什么，因为你没有发布任何细节或代码示例，但我敢打赌你的问题是 Heroku 有一个只读文件系统。如果您希望您的应用程序能够创建/存储/操作文件，您应该使用外部存储。我使用 Amazon S3 和 Heroku 来为我的 Rails 应用程序存储图像，效果很好。谷歌“Heroku s3”，你应该会找到丰富的信息。

有关文件系统限制的更多信息：[https ://devcenter.heroku.com/articles/read-only-filesystem](https://devcenter.heroku.com/articles/read-only-filesystem)

# haskell - 如何将派生的 Eq 用于 Data.Unique？

> ID：12534555
> 
> 赞同：1
> 
> 时间：2012-09-21T16:36:41.463
> 
> 标签：haskell

[Hugs 的 Data.Unique 页面](http://cvs.haskell.org/Hugs/pages/libraries/base/Data-Unique.html "Data.Unique 的拥抱页面")似乎表明 Unique 派生 Eq，但我显然不明白。例如，为什么我不能这样做？

```
Prelude> let a = Data.Unique.newUnique
Prelude> a == a 
```

另外，我知道您可以将 Uniques 散列成整数，但 Hugs 说“两个 Uniques 可能散列到相同的值，尽管实际上这不太可能”。有谁知道可能性有多大？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T16:46:58.683

生成`Unique`值需要`IO`，所以你的比较失败，因为类型`a`是`IO Unique`，不是`Unique`。`newUnique >>= \u -> return (u == u)`应该按预期工作。

至于碰撞的可能性有多大，请注意它会产生`Int`，而不是`Integer`。因此，如果没有别的，只有有限数量的可能`Int`值，所以如果哈希值是完全随机的，那么发现冲突将只是[生日“悖论”](http://en.wikipedia.org/wiki/Birthday_problem)。在实践中，它的可能性可能会稍高一些，但可能不会很大。

# c# - C#中的内存问题

> ID：12534557
> 
> 赞同：0
> 
> 时间：2012-09-21T16:36:58.527
> 
> 标签：c#, memory

我想在屏幕上绘制一个加载圆（.gif），而应用程序正在加载一些大的东西。但是我不能以我想要的速度跑圈，因为我有记忆问题。有谁知道如何解决这些问题（在 75 毫秒而不是 1000 毫秒）？以及如何在完成后删除圆圈（它不再消失）。

编辑：当窗口大小改变时执行加载函数。

```
 public Main()
    {
        InitializeComponent();
        StartUp();
        WindowState = FormWindowState.Maximized;
    }

    bool onrun;
    bool done;
    System.Threading.Timer timer;
    GifImage Circle;
    Point center;

    void StartUp()
    {
        onrun = true;
        done = false;
        timer = new System.Threading.Timer(new System.Threading.TimerCallback(Animate));
        timer.Change(0, 500);
    }

    void Animate(object sender)
    {
        if (onrun == true)
        {
            Circle = new GifImage("circleAnim.gif");
            Circle.ReverseAtEnd = false;
            int width = Screen.PrimaryScreen.Bounds.Width;
            int height = Screen.PrimaryScreen.Bounds.Height;
            center = new Point((width / 2) - 150, (height / 2) - 150);
            onrun = false;
        }
        else if (done == true)
        {
            timer.Dispose();
        }

        Image i = Circle.GetNextFrame();
        System.Drawing.Graphics GraphicsObject = Graphics.FromHwnd(IntPtr.Zero);
        try
        {
            GraphicsObject.DrawImage(i, center);
            i.Dispose();
            GraphicsObject.Dispose();
        }
        catch { }
    }

    private void Load(object sender, EventArgs e)
    {
        int hduizend = 100000;

        for (int i = 1; i <= 100000000; i++)
        {
            hduizend /= 2;
            hduizend *= 2;
        }

        done = true;
    } 
```

EDIT2（错误）：“试图读取或写入受保护的内存。这通常表明其他内存已损坏”。

gif图像本身也不是问题：

```
public class GifImage
{
private Image gifImage;
private FrameDimension dimension;
private int frameCount;
private int currentFrame = -1;
private bool reverse;
private int step = 1;

public GifImage(string path)
{
    gifImage = Image.FromFile(path); 
    dimension = new FrameDimension(gifImage.FrameDimensionsList[0]); 
    frameCount = gifImage.GetFrameCount(dimension); 
}

public bool ReverseAtEnd 
{
    get { return reverse; }
    set { reverse = value; }
}

public Image GetNextFrame()
{

    currentFrame += step;

    if (currentFrame >= frameCount || currentFrame < 1)
    {
        if (reverse)
        {
            step *= -1;
            currentFrame += step; 
        }
        else
            currentFrame = 0;
    }
    return GetFrame(currentFrame);
}

public Image GetFrame(int index)
{
    gifImage.SelectActiveFrame(dimension, index); 
    return (Image)gifImage.Clone(); 
} 
```

}

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:24:07.930

将 gif 分配给 PictureBox，并在需要时仅显示 Picturebox。它将处理动画。您只需要注意何时需要显示并定位它。

```
private PictureBox pictureBox = new PictureBox();
Image animatedPicture = Image.FromFile(path);

...
int width = Screen.PrimaryScreen.Bounds. 
int height = Screen.PrimaryScreen.Bounds.Height;
center = new Point((width / 2) - 150, (height / 2) - 150);
pictureBox.Location = center;
pictureBox.Visible = true; 
```

# ruby-on-rails - 从 Index.html.erb 上的按钮更新字段

> ID：12534558
> 
> 赞同：1
> 
> 时间：2012-09-21T16:37:06.830
> 
> 标签：ruby-on-rails, ruby

我有一个`meeting_times`用字段命名的表：

```
meeting_date_time
user_id 
```

我想`user_id`通过单击索引页面上的按钮来更新会议时间的列。

页面设置如下：

```
October 30, 2012
   08:00 [Reserve button]
   09:00 [Reserve button] 
```

我努力了：

```
<%= button_to "Reserve", meeting_time_path(meeting_by_timestamp(timestamp), :user_id => current_user_id), :method => :put %> 
```

它的轨道就像它的工作原理一样，但数据库没有得到更新。

*   `meeting_by_timestamp(timestamp)`是一个帮助方法，它做它所说的。
*   `current_user_id`是`user_id`登录的人的。

如何设置`button_to`以更新数据库？有没有更好的方法然后使用`button_to`？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:59:57.320

我会在你的控制器中创建一个名为 的单独方法`reserve`，创建一个需要 1 个参数的路由，会议然后使用`reserve_meeting_time_path(meeting)`. `current_user`无论如何都可以在控制器中访问，这样您就可以确保`current_user`仅为自己保留会议。

在你的 routes.rb

```
resources :meeting_times do
  member do
     put 'reserve'
  end
end 
```

在您的控制器中：

```
def reserve
  @meeting_time = MeetingTime.find(params[:id])
  @meeting_time.update_attributes(:user_id => current_user.id)
  # or however you want to handle it here
end 
```

在您看来：

```
<%= button_to "Reserve", reserve_meeting_time_path(meeting_by_timestamp(timestamp)), :method => :put %> 
```

# java - UndoManager 的观察

> ID：12534559
> 
> 赞同：2
> 
> 时间：2012-09-21T16:37:10.670
> 
> 标签：java, listener, observer-pattern

我在我的 Swing 应用程序中使用[UndoManager 。](http://docs.oracle.com/javase/6/docs/api/javax/swing/undo/UndoManager.html)如果在 UndoManager 上调用`undo()`、或其他方法`redo()`，`addEdit()`则最终必须启用或禁用 Undo 和 Redo 按钮。

我找不到对这些方法调用做出反应的方法。似乎没有为此目的实现观察者或监听者模式。

并且每次调用 UndoManager 方法时都更新 Undo 和 Redo 按钮的 enabled 属性……这不是最佳实践吗？！

**一个例子：**

*   Edit > insert -- 向 UndoManager 添加一个 Edit
*   Edit > cut -- 向 UndoManager 添加一个 Edit

在这两种情况下，都必须启用撤消按钮（如果尚未启用）。我需要一种方法来应对*UndoManager 中的所有这些变化*！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:47:48.793

您可以将侦听器添加到撤消和重做按钮。UndoManager 不知道您使用什么 Swing 组件来撤消或重做。

这是一个显示撤消按钮的按钮侦听器的[片段。](http://www.java2s.com/Code/Java/Swing-JFC/TheuseofUndoManager.htm)

```
// Add a listener to the undo button. It attempts to call undo() on the
// UndoManager, then enables/disables the undo/redo buttons as
// appropriate.
undoButton.addActionListener(new ActionListener() {
  public void actionPerformed(ActionEvent ev) {
    try {
      manager.undo();
    } catch (CannotUndoException ex) {
      ex.printStackTrace();
    } finally {
      updateButtons();
    }
  }
});

  // Method to set the text and state of the undo/redo buttons.
  protected void updateButtons() {
    undoButton.setText(manager.getUndoPresentationName());
    redoButton.setText(manager.getRedoPresentationName());
    undoButton.getParent().validate();
    undoButton.setEnabled(manager.canUndo());
    redoButton.setEnabled(manager.canRedo());
  } 
```

# php - 替换单引号以正确搜索数据库的最佳方法？

> ID：12534561
> 
> 赞同：2
> 
> 时间：2012-09-21T16:37:27.610
> 
> 标签：php, sql, database, web-applications, validation

我正在开发一个应用程序，在该应用程序中通过多个不同的条件搜索用户。可用条件之一是按名称搜索。名称存储在数据库中，去除了 HTML 字符，例如。a ' 存储为`&#39;`. 这样做的问题是，如果用户通过输入常规英文名称的名称进行搜索，它会在数据库中查找英文名称而不是 HTML 剥离的名称。我曾尝试使用 htmlspecialchars `($string, ENT_QUOTES)`，但由于某种原因，它并不总是正确地替换单引号。谁能想到为什么会发生这种情况，或推荐更好的方法？谢谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:40:37.400

您不需要替换单引号。您需要做的就是使用其中一个**[`PDO`](http://php.net/manual/en/book.pdo.php)**或`MySQLi`扩展名。PDO 示例，

```
$stmt = $pdo->prepare('SELECT * FROM tableName WHERE name = :name');

$stmt->execute(array(':name' => $name));
foreach ($stmt as $row) 
{
    // do something with $row
} 
```

这样，即使值有单引号，它也允许您进行搜索。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:40:12.083

尝试使用它`html_entity_decode($string)`而不是`htmlspecialchars($string, ENT_QUOTES);`

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:45:44.407

两个都很好，但你也可以试试这个......

```
 function change_text($in, $out, $text){

$input = array($in);
$change = array($out) ;
$result = @str_replace ($input ,$change, $text);
return $result;
}

$change_text = change_text("'", '',$text); 
```

希望它会有所帮助

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T16:52:04.660

在您的查询中，将您的 '（引号）替换为 ''。第一个引用将在此引用之后的字符上签名，将按原样使用。

下面的示例代码：

```
mysql> select * from activities where activity='aku''kamu';
+----+----------+---------+
| id | activity | user_id |
+----+----------+---------+
|  1 | aku'kamu |       3 |
+----+----------+---------+
1 row in set (0.00 sec)

mysql> update activities set activity='aku''kamu' where id=2
Query OK, 1 row affected (0.06 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select * from activities where activity='aku''kamu';
+----+----------+---------+
| id | activity | user_id |
+----+----------+---------+
|  1 | aku'kamu |       3 |
|  2 | aku'kamu |       3 |
+----+----------+---------+
2 rows in set (0.00 sec)

mysql> 
```

# servicestack - ServiceStack.ServiceHost.Feature 不包含 Remove 的定义

> ID：12534564
> 
> 赞同：1
> 
> 时间：2012-09-21T16:37:49.247
> 
> 标签：servicestack

我已经引用了 ServiceStack.dll ver-3.9.4

在 AppHost.cs 中包含代码

设置配置（新端点主机配置 {

EnableFeatures = Feature.All.Remove(Feature.Html),

});

我收到以下错误，无法编译

“ServiceStack.ServiceHost.Feature”不包含“Remove”的定义，并且找不到接受“ServiceStack.ServiceHost.Feature”类型的第一个参数的扩展方法“Remove”（您是否缺少 using 指令或程序集引用?)

尝试包括许多指令，但我仍然无法通过这个

使用 Funq；

使用 ServiceStack.WebHost.Endpoints；

使用 ServiceStack.ServiceHost；

使用 ServiceStack.WebHost.Endpoints.Support；

使用 ServiceStack.Common.Support；

使用 ServiceStack.Common.Extensions；

使用 ServiceStack.Common.Utils；

使用 ServiceStack.Common.Web；

使用 ServiceStack.Logging.Support.Logging；

使用 ServiceStack.CacheAccess；

使用 ServiceStack.CacheAccess.Providers；

使用 ServiceStack.OrmLite；

使用 ServiceStack.WebHost；

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T21:41:56.033

[Enum.Remove](https://github.com/ServiceStack/ServiceStack/blob/master/src/ServiceStack.Common/EnumExtensions.cs#L92)是`ServiceStack.Common`.

您应该考虑使用 ReSharper 来消除此问题，因为它会自动解析命名空间引用。

# c# - 异步获取和设置

> ID：12534566
> 
> 赞同：6
> 
> 时间：2012-09-21T16:37:58.383
> 
> 标签：c#, asynchronous, properties

是否可以使用`async` `get`和`set`方法创建属性？

如果是，如何？如果不是，
我应该如何正确调用异步方法？`get``set`

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T16:41:01.773

不。从 C# 5 规范的第 10.15 节：

> 带有 async 修饰符的方法（第 10.6 节）或匿名函数（第 7.15 节）称为异步函数。通常，术语 async 用于描述具有 async 修饰符的任何类型的函数。

所以只有方法、lambda 表达式和匿名方法可以使用`async`修饰符。

就个人而言，我认为无论如何拥有这样的财产有点奇怪，特别是因为该财产必须返回`Task<T>`而不是`T`. 一个属性通常应该“感觉”非常轻巧——这并不适合异步。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T16:39:29.900

不，您可以创建*看起来*像属性（`async Task<T> getFoo()`和`async Task setFoo(T item)`）的方法，但它们本身不是属性。

# powershell - 在 Powershell 中从左到右抓取文件中每行的前 10 个字符

> ID：12534569
> 
> 赞同：5
> 
> 时间：2012-09-21T16:38:01.993
> 
> 标签：powershell

我想从 $line 中取出前 x 个字符并将它们移动到一个变量中。

我该怎么做呢？

这是我现有的代码

```
$data = get-content "C:\TestFile.txt"
foreach($line in $data)
{
   if($line.length -gt 250){**get first x amount of characters into variable Y**}
} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T16:42:57.107

像这样：

```
$data = get-content "TestFile.txt"
$amount = 10;
$y= @()
foreach($line in $data)
{
   if ( $line.length -gt 250){ $y += $line.substring(0,$amount) } 
} 
```

# c++ - 如何从 int 转换为 long long int*？

> ID：12534571
> 
> 赞同：-1
> 
> 时间：2012-09-21T16:38:15.817
> 
> 标签：c++, casting

我试过这个：

```
request.DeviceID = (long long int *)&(DeviceID);
request.ProdReqID = (long long int *)&(ProdReqID); 
```

但是当我这样做时：

```
cout << "DEVICE ID: " << request.DeviceID << " " << request.ProdReqID << " " << endl;
cout << "DEVICE ID: " << &request.DeviceID << " " << &request.ProdReqID << " " << endl; 
```

我得到：

> 设备 ID：0xfffa9bf0 0xfffa9bf4 设备 ID：0xfffa9bd4 0xfffa9bd8

我真的不知道这是否有效。我希望看到实际数字的打印...

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:41:38.353

如果`DeviceID`and `ProdReqID`is `int`, and `request.DeviceID`and `request.ProdReqID`is `long long int`, 那么做：

```
request.DeviceID = (long long int)DeviceID;
request.ProdReqID = (long long int)ProdReqID; 
```

使用演员甚至：

```
request.DeviceID = DeviceID;
request.ProdReqID = ProdReqID; 
```

使用类型提升。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:44:57.737

你没有说这些类型实际上是什么，但假设`int DeviceID`和`long long int Request::DeviceID`（正如原始标题所暗示的，在它被改变之前），转换是隐式发生的：

```
request.DeviceID = DeviceID; 
```

但是，从您的代码中可以看出它`request.DeviceID`是一个指针。这几乎肯定不是你想要的，但如果是，那么它需要一个正确类型的值来指向，例如

```
long long int DeviceIDValue = DeviceID;
request.DeviceID = &DeviceIDValue; 
```

您可以通过取消引用指针来访问该值：

```
cout << "DEVICE ID: " << *request.DeviceID << " " << *request.ProdReqID << " " << endl; 
```

代码中的狡猾转换只是绕过类型检查并创建指向错误类型的无效指针。如果（如您所愿）您使用 C++ 风格的演员表而不是完全邪恶的 C 风格演员表，那么您必须编写`reinterpret_cast`，这应该敲响一个非常响亮的警钟——这种转换是无效的。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T19:34:55.487

我通过将 DeviceID 和 ProdReqID 参数从`int`to更改为`LONG64`然后执行以下操作来解决此问题：

```
request.DeviceID = &(DeviceID);
request.ProdReqID = &(ProdReqID); 
```

# php - 如何在不重新加载页面的情况下使用 Jquery 淡入/淡出？

> ID：12534577
> 
> 赞同：0
> 
> 时间：2012-09-21T16:38:23.460
> 
> 标签：php, jquery, ajax

我需要创建一个带有音频播放器的网站，该播放器在用户浏览网站时播放。同时，内容部分需要在此过程中淡出并重新出现。因此，在不重新加载页面的情况下引入另一段 HTML。我的问题是，我怎样才能让所有这些都正确运行，同时在不同页面上运行不同的 Jquery 插件？

本质上，我需要网站像这样运行，但在角落里有一个连续的音频播放器或其他东西。 [http://www.chalicerecording.com/](http://www.chalicerecording.com/)

如果您注意到，页面永远不会重新加载，并且实际文件的名称不会显示在浏览器顶部。这给了我一个想法，那就是它使用 PHP 作为页面。

所以有了这个想法，我最终找到了这个。 [http://www.youtube.com/watch?v=ytKc0QsVRY4](http://www.youtube.com/watch?v=ytKc0QsVRY4)

我遇到的问题是我似乎无法找到一种方法来在每个单独的 PHP 页面上运行单独的 Jquery 插件而不重新加载整个页面。我希望这是足够的信息供你们使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:43:20.380

您将需要使用 ajax 调用来执行此操作
[jQuery.ajax](http://api.jquery.com/jQuery.ajax/)
[jQuery.post](http://api.jquery.com/jQuery.post/)
[jQuery.get](http://api.jquery.com/jQuery.get/)

你还需要使用 jQuery [fadeIn](http://api.jquery.com/fadeIn/) , jQuery [fadeOut](http://api.jquery.com/fadeOut/)

# javascript - 将 WebSocket 移入工作线程的原因

> ID：12534583
> 
> 赞同：4
> 
> 时间：2012-09-21T16:38:32.243
> 
> 标签：javascript, html, websocket, dom-events, web-worker

我正在使用 WebSockets 运行一些测试。

对于测试，我使用了基于 Alchemy-Websockets .NET 的服务器。

Web 应用程序打开几个窗口，用于监控不同的服务和系统。

我对服务器必须向客户端发送大量事件以反映实时更新的高负载情况特别感兴趣。我希望 GUI 能够完全响应，并在实时用户体验中以网格和图表的形式呈现数据。

我在主窗口线程中创建了 WebSocket，并且在每条传入消息中，我向网格用于显示的数组 (SlickGrid) 添加了一个条目。为了使 GUI 正常工作，我添加了一个 20 毫秒的 setInterval 来渲染网格更新，一切正常，非常快。

问题是将 WebSocket 移动到工作线程是可取的还是推荐的。阅读有关工作线程的信息，我在用例中看到了在线程中处理 I/O 的建议。

我认为这只有在阻塞时才有意义。

据我所知，WebSocket 是异步的，不会阻塞。我在某处读到它是由浏览器在内部线程中实现的，这是有道理的。

我考虑将 WebSocket 移动到工作人员中，允许工作人员在将其移动到主窗口之前缓冲或聚合一些数据，如果事件发生率较高，我会看到以下方法：

1.  主窗口线程定期（每 20 毫秒左右）轮询工作人员并获取所需的数据。
2.  工作人员定期发送更大的数据块。
3.  每次 web 套接字接收数据时，将其发送到主线程 - 但我认为它会引入相同的固有问题。（这是我开始测试的地方，我在工作线程中创建了一个无限循环，并且在每一步我都向主线程发送了一条消息，GUI 冻结，这是有道理的）。

将 WebSocket 留在主线程上也不理想。在来自服务器的高负载的情况下，GUI 不会优先考虑 WebSocket 传入消息事件。

在工作线程中收集数据，似乎我可能会错过高负载期间的实时更新，因为工作线程正在缓冲。

工作线程的另一个问题似乎是数据重复，这可以通过更新的可传输对象来解决，但不确定它在所有浏览器上的支持程度如何。

为什么不在主窗口上托管 WebSocket？

那么最佳实践是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2014-12-23T10:27:50.570

将 WebSocket 迁移到 Worker 的原因只有两个。

*   JSON.parse 是阻塞操作，在大数据的情况下会导致 FPS 丢失。从 worker 克隆数据会增加约 1% 的开销，但 99% 的解析是在后台线程中完成的。
*   使用 SharedWorker 只与服务器保持一个连接。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-04-14T14:13:53.513

DOM 操作和可能在画布上绘图也会影响 websocket 包。我在 localhost 上测量了大约 0.2 毫秒的平均延迟，但使用相同的线程我会定期出现 4-9 毫秒的峰值。如果我不更新频繁的 DOM 或将 websocket 移动到工作人员，它们就会消失。Chrome 受到的影响最大，目前从这个角度来看，Firefox 更好。对于在线游戏，这可能意味着某种滞后或口吃。对我来说，它只是在一定程度上影响了 TCP 延迟测试。我需要将消息发送频率从 1 毫秒提高到 100 毫秒才能获得干净的图表。

# html - 在 SQL 存储过程中将 HTML 发送到打印机

> ID：12534586
> 
> 赞同：1
> 
> 时间：2012-09-21T16:38:38.497
> 
> 标签：html, sql-server, stored-procedures, printing

我有一个使用 sp_send_dbmail 生成 HTML 电子邮件并将其发送给客户的存储过程。我收到了一份打印副本的请求，我没有存档的电子邮件地址，以便他们可以邮寄。我的任务是用电子邮件地址替换我的交换服务器上的邮箱，该邮箱设置为将邮件转发到 MailRoom 中复印机的传真端口。它可以工作，但是非常麻烦，并且由于传真传输而受到各种延迟。

似乎由于我的 SQL 服务器在域上，我应该能够从存储过程将输出直接路由到安装在其上的任何打印机，但我无法找到任何方法将 HTML 从存储过程发送到打印机程序。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:55:45.067

存储过程非常适合处理数据，但在与数据库外部的系统资源交互时它们非常有限。即使写入文件也可能很尴尬，更不用说打印了。

我认为您应该重新考虑您的设计并开发一个外部脚本或程序来执行此操作，可能作为 Windows 服务实现。该程序可以调用存储过程来获取 HTML，然后根据需要通过电子邮件发送或打印。

进一步的增强是只从存储过程中获取数据，并让程序将其格式化为 HTML 或任何其他格式，可能使用某种模板库和/或 XSLT。如果您需要支持多种输出格式（“重要客户 X 希望输出看起来有点不同”），根据业务规则具有不同的格式（“我们需要添加此免责声明，但仅适用于出口订单”）或提供多种语言的输出。

# javascript - 通过 javascript 使用 Sitecore 发布表单

> ID：12534587
> 
> 赞同：1
> 
> 时间：2012-09-21T16:38:42.923
> 
> 标签：javascript, asp.net, post, sitecore

我目前正在使用 Sitecore，我正在尝试创建一个 POST 操作，以使用表单收集的信息将信息发布到支付网站。知道 Sitecore 会从 html 中去除标签，这有点让人头疼。经过一番搜索后，我发现我可以使用 javascript 创建一个动态表单并发送这将是我的问题的答案，遗憾的是我是一个 javscript 新手，虽然我能够破译 javacript，但我无法发布。

任何输入或基本信息的链接将不胜感激。

这是我的表单代码的样子：

```
<fieldset id="PayForm" > <br>
<!--Store Settings-->
<input type="Hidden" name="ps_store_id" value="******" />
<input type="Hidden" name="hpp_key" value="*******" />
<input type="Hidden" name="charge_total" value="40.00" />
<!--Item Details-->
<input type="hidden" value="1" name="quantity1" />
<input type="hidden" value="Public Speaking" name="description1" />
<select name="id1">
<option>Select Date...</option>
<option value="Sep22PubSp"> Sept-22
</option>
<option value="Sep29PubSp"> Sept-29
</option>
<option value="Nov19PubSp"> Nov- 19
</option>
</select>
<br />
<input type="hidden" value="40" name="price1" />
<!--Student Details-->
First Name<input type="text" name="ship_first_name" value="First Name" />  Last Name  <input type="text" name="ship_last_name" value="Last Name" /> <br />
Student ID#: <input type="text" name="cust_id" value="Student ID" /><br />
Email<input type="text" name="email" value="Email" /> <br />
CCID<input type="text" name="note" value="CCID" /><br />
</fieldset> 
```

这是我的 Javascript 的样子

```
<script type="text/javascript">// <![CDATA[
function post_to_url() {

    // The rest of this code assumes you are not using a library.
    // It can be made less wordy if you use one.
    var form = document.createElement("form");
    form.setAttribute("method", "post");
    form.setAttribute("action", "******WEBSITE HERE*******");
    form.setAttribute("target", "tfl");

    var fieldset = document.getElementById("PayForm");
    var copy = fieldset.cloneNode(true);

    var description1 = document.getElementById("type_description1_form");
    var ship_first_name = document.getElementById("type_ship_first_name_form");
var ship_last_name = document.getElementById("type_ship_last_name_form");
var cust_id = document.getElementById("cust_id");
var email = document.getElementById("type_email_form");
var note = document.getElementById("type_note_form");

    var description1Input = document.createElement("input");
    description1Input.setAttribute("name", "type_description1");
    description1Input.setAttribute("value", description1.options[description1.selectedIndex].value);

    var ship_first_nameInput = document.createElement("input");
    destinInput.setAttribute("name", "type_ship_first_name");
    destinInput.setAttribute("value", ship_first_name.options[ship_first_name.selectedIndex].value);

    var ship_last_nameInput = document.createElement("input");
    ship_last_nameInput.setAttribute("name", "type_ship_last_name");
    ship_last_nameInput.setAttribute("value", ship_last_name.options[ship_last_name.selectedIndex].value);

    var cust_idInput = document.createElement("input");
    cust_idInput.setAttribute("name", "type_cust_id");
    cust_idInput.setAttribute("value", cust_id.options[cust_id.selectedIndex].value);

    var emailInput = document.createElement("input");
    emailInput.setAttribute("name", "type_email");
    emailInput.setAttribute("value", email.options[email.selectedIndex].value);

    var noteInput = document.createElement("input");
    noteInput.setAttribute("name", "type_note");
    noteInput.setAttribute("value", note.options[note.selectedIndex].value);

    form.appendChild(copy);
    form.appendChild(originInput);
    form.appendChild(destinInput);

    document.body.appendChild(form);
    form.submit();
};
// ]]></script> 
```

感谢您的时间！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T16:59:08.393

您的问题不是 Sitecore 剥离表单标签。您的问题是您正在使用 ASP.Net 网络表单，这需要对表单进行特殊考虑。这是因为您已经有一个表单标签，属性 runat="server" 用于显示站点核心的组件。

也就是说，您编写的 javascript 将永远无法在 sitecore 的环境中运行。您根本不能在 ASP.Net 网络表单中嵌套 html 表单。

有关修改 ASP.net 模板以支持表单提交的基础知识，请参阅这篇文章： [http](http://www.sitepoint.com/net-form-processing-basics/) ://www.sitepoint.com/net-form-processing-basics/ 或者，您可以按照您期望的方式创建表单（再次，没有javascript）作为纯html，并将其包含在IFrame中的sitecore组件模板（.ascx控件）中。

# ember.js - 使用 Ember + Handlebars 处理动态嵌套视图

> ID：12534592
> 
> 赞同：1
> 
> 时间：2012-09-21T16:39:08.703
> 
> 标签：ember.js, handlebars.js

我正在使用 Ember.js 1.0 预发布版和 Handlebars 1.0.0 并希望表示对帖子的评论列表。

我的评论对象是这样的：

```
// COMMENT ITEM
HaBlog.Comment = Em.Object.extend({
 user:null,
 text:null,
 created: moment().subtract('years', 100),
 createdAgo: function(){
     return (this.get('created').fromNow());
 }.property('created'),
 rating:null,
 replies:[] 
```

});

这是我的视图模板：

```
 <div id="postComments" class="span10">
        <h1>Comments</h1>
        {{#each comments}}
        <div class="comment">
            <small>
                <span class="commentDate">
                    {{createdAgo}}
                </span>
            </small>
                <span class="commentText">
                    {{text}}
                </span>
        </div>
        {{#each comments.replies}}
        <div class="comment">
            <small>
                <span class="commentDate">
                    {{createdAgo}}
                </span>
            </small>
                <span class="commentText">
                    {{text}}
                </span>
        </div>
        {{/each}}
    </div> 
```

我的问题是每个评论可以有多个回复，这些回复是他们自己的评论，所以他们可以有更多的回复。

我检查了 Ember.js 和 Handlebars 中的嵌套视图，但似乎没有找到任何方法让它以递归方式遍历所有回复，以“树”方式显示所有评论......

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-27T02:53:55.907

根据您的问题，我无法准确理解评论与回复的内容，但我认为您仍然应该能够根据我在下面的建议解决这个问题。

您要做的是使用`Ember.CollectionView`并定义一个视图类，您将`itemViewClass`在集合视图上将其用作。所以你`itemViewClass`会是这样的`CommentView`，并且有一个像这样的模板：

```
Comment Text: {{text}}
Replies: {{view Ember.CollectionView content=replies itemViewClass=HaBlog.CommentView}} 
```

这是处理递归问题的唯一方法，正如您所说，仅使用 Handlebars 无法真正处理递归问题。

# android - 如何在 ListView 中连续放置一些文本视图？安卓

> ID：12534594
> 
> 赞同：0
> 
> 时间：2012-09-21T16:39:28.310
> 
> 标签：android, android-layout, android-listview, android-linearlayout, android-relativelayout

我有一个 ListActivity，其中有一些按日期时间排序的项目。我有 3 个文本视图。这是我所做的：

![布局](../Images/ac6b931a92ca3f5fae8b762c97953409.png)

这是布局的代码：

```
 <?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:id="@+id/relativeLayout1"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="vertical" >

    <TextView
        android:id="@+id/bpSysHolder"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"    
        android:text="TextView" >
    </TextView>

    <TextView
        android:id="@+id/bpDiaHolder"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" >
    </TextView>

    <TextView
        android:id="@+id/bpDtHolder"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:text="TextView" >
    </TextView>

</LinearLayout> 
```

为了从我的列表活动中调用它们，我使用：

```
 String[] from = new String[] { BpDAO.bp_SYS, BpDAO.bp_DIA, BpDAO.bp_DT };
    int[] target = new int[] { R.id.bpSysHolder, R.id.bpDiaHolder,
            R.id.bpDtHolder };
    dbAdapter = new SimpleCursorAdapter(this, R.layout.history_bp, bpList,
            from, target);
    setListAdapter(dbAdapter); 
```

现在是这样的：

```
---120952012-09-20 15:05      ---
---145902012-09-20 10:44      ---
---145952012-09-20 10:42      ---
             ...
---14595 2012-09-20 10:42     ---
--------------------------------- 
```

如何在它们之间留出空间以及行上下的一些小空间以便更容易触摸？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:48:13.930

您也可以在相同的布局中执行此操作。

```
 Change android:orientation="vertical" > to android:orientation="horizontal" 
```

并根据您的要求为文本视图定义使用属性“Android:layout_weight”。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:48:26.147

在线性布局上使用它以将所有内容放在一行中

```
android:orientation="horizontal" 
```

在图片上，您已经在操作栏上有一个标题，如果您想要在列表中，您可以在列表中添加标题

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T16:48:33.510

您将方向设置为垂直：

```
android:orientation="vertical" 
```

删除它，你应该得到 textview horizzontal

# matlab - 将matlab线图分成两条不相连的相同颜色的线

> ID：12534598
> 
> 赞同：0
> 
> 时间：2012-09-21T16:39:37.983
> 
> 标签：matlab, plot, 2d

嗨，我有以下代码输出下图。但是我想删除连接绿线上两条曲线的绿色水平线。我怎样才能做到这一点并保持相同的颜色？谢谢

```
Y = xlsread('hanimaadhoo_sun_path.xls','hanimaadhoo'); % 

azimuth_march_equinox = Y(1:17,1);
 altitude_march_equinox = Y(1:17,2);

 azimuth_september_equinox = Y(1:17,3);
altitude_september_equinox =Y(1:17,4);

azimuth_winter_solstice = Y(1:17,5);
altitude_winter_solstice = Y(1:17,6);

 azimuth_summer_solstice = Y(1:17,7);
altitude_summer_solstice = Y(1:17,8);

figure;
   plot(azimuth_summer_solstice,altitude_summer_solstice,azimuth_winter_solstice,altitude_winter_solstice,...
azimuth_march_equinox,altitude_march_equinox,azimuth_september_equinox,altitude_september_equinox,'LineWidth',2); 
```

![在此处输入图像描述](../Images/c412de0d77c44561f0a53d6181e622e5.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:43:53.157

您应该将它们绘制为 2 个单独的图。此外，您应该明确定义颜色：

```
 plot(azimuth_summer_solstice,altitude_summer_solstice,...    azimuth_march_equinox,altitude_march_equinox,azimuth_september_equinox,altitude_september_equinox,'LineWidth',2);
  % Now plot winter in 2 parts!
  n = .... %Something
  plot(azimuth_winter_solstice(1:n), altitude_winter_solstice(1:n),'g','LineWidth',2);
  plot(azimuth_winter_solstice(n+1:end), altitude_winter_solstice(n+1:end),'g','LineWidth',2); 
```

运行前务必填写正确`n`。

# sql - 不考虑时间比较日期（MSSQL）

> ID：12534604
> 
> 赞同：3
> 
> 时间：2012-09-21T16:39:56.717
> 
> 标签：sql, stored-procedures

我使用这个 Store 过程从特殊日期返回数据。我的 QueueDate 类型是 datetime ，但是当我想在 Where 子句中使用 = 时它返回 0 ，我希望所有字段都在一天内独立于字段时间。

```
ALTER PROCEDURE [dbo].[SP_GET_QUEUESINFO_BY_DATE]
AS
BEGIN
declare @date2 datetime
set @date2= '2012-09-21'
select COUNT(QueueID) ,
sum(case when QueueNumIn != 0 THEN 1 else 0 end) as 'InQueue',
sum(case when QueueNumOut != 0 THEN 1 else 0 end) as  'OutQueue'
from Queue where QueueDate >= @date2 -- QueueDate = @date2
END 
```

![在此处输入图像描述](../Images/5e5547cd0805536c5e8156eb56d80a37.png)

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T16:42:49.977

您可以`CAST`将列名称从更改`DATETIME`为`DATE`（*版本 2008+ 之前*）。尝试，

```
ALTER PROCEDURE [dbo].[SP_GET_QUEUESINFO_BY_DATE]
AS
BEGIN
declare @date2 datetime
set @date2= '2012-09-21'
select COUNT(QueueID) ,
       sum(case when QueueNumIn != 0 THEN 1 else 0 end) as 'InQueue',
       sum(case when QueueNumOut != 0 THEN 1 else 0 end) as  'OutQueue'
from Queue 
where CAST(QueueDate as DATE) >= @date2 -- QueueDate = @date2
END 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T16:56:56.900

SQL Server，对吗？

要仅比较`DateTime`值的日期部分和您使用的 SQL Server 2008 或更高版本，您可以如前所述强制转换/转换为`Date`数据类型。这样的事情应该做你：

```
select *
from foo
where convert(date,foo.someDateTimeColumn) = '2012-10-27' 
```

对于**任何**版本的 SQL Server，以下将起作用：

```
select *
from foo
where convert(datetime,convert(varchar,foo.someDateTimeColumn,112),112) = '2012-10-27' 
```

上面使用 112 样式将日期时间值转换为紧凑形式的 ISO 8601 日期字符串 'yyyymmdd'，然后将其转换回日期时间值。

或者，对于任何版本的 SQL Server，您可以针对某个时间段进行测试：

```
declare
  @dtNow datetime
set @dtNow = current_timestamp

declare
  @TodayStartOfDay datetime ,
  @TodayEndOfDay   datetime
set @TodayStartOfDay = convert(datetime,convert(varchar,@dtNow,112),112)
set @TodayEndOfDay   = dateadd(ms,-3,datetime(day,1,@dtFrom))

...

select *
from foo
where foo.someDateTimeColumn between @TodayStartOfDay and @TodayEndOfDay 
```

这种方法的优点是您的 DateTime 列上的任何索引都可以被查询优化器使用。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:45:57.030

```
WHERE DATEDIFF(DAY,@date2, QueueDate)=0 
```

# entity-framework-4 - 禁用延迟加载时导航属性返回 null

> ID：12534605
> 
> 赞同：4
> 
> 时间：2012-09-21T16:40:02.770
> 
> 标签：entity-framework-4, lazy-loading

*简而言之：*

如果代码访问导航属性并且请求的数据未加载到内存中并且延迟加载被禁用，是否有办法使 EF 抛出异常？

*有点长：*

我正在使用 Entity Framework 4（模型优先）并禁用了延迟加载。之前，如果我运行类似下面的代码，代码会运行良好但速度很慢，因为每次调用 customer.Orders 都会执行一个新的 SQL 查询：

```
int totalValue = 0;
foreach(var customer in efContext.Customers)
    foreach (var order in customer.Orders)
        totalValue += order.Value; 
```

我想完全禁用延迟加载，以防止在我正在处理的代码库中引入此类代码。我想要发生的是，当代码执行 customer.Orders 时，应该抛出一个异常，说明“实体未加载。延迟加载已关闭。”。但相反，订单列表只是空的，因为订单尚未加载。

我觉得这种行为也可能有问题，只是方式与延迟加载不同。负责检查每个客户是否有联系人的开发人员可以编写如下内容：

```
if (customer.Contact != null) 
    throw new BlablablaException("Customer lacks contact"); 
```

但是禁用延迟加载后，customer.Contact 将始终为空，开发人员可能会认为他的代码可以正常工作。当然，他应该正确地完成他的工作并测试两种情况（联系存在，联系不存在），但如果抛出异常会更清楚。

在我看来，如果我尝试访问不可用的数据而只是返回一个空列表，Entity Framework 不会引发异常，这似乎很奇怪。

这种行为有解释吗？当调用导航属性并且数据不可用时，有没有办法让 EF 抛出异常？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T18:01:20.160

您可以测试每个条目以确保它已加载。

如果是集合：

```
model.Entry(customer).Collection(c => c.Customers).IsLoaded 
```

如果它不是一个集合：

```
model.Entry(customer).Reference(c => c.Customer).IsLoaded 
```

但是，我认为如果您只是在迭代之前急切地加载集合会更好，以保证集合已加载，而不是担心集合是否已加载：

```
foreach(var customer in efContext.Customers.Include(c => c.Orders)) 
```

# .net - 将样式设置为根 Control 元素的静态资源

> ID：12534611
> 
> 赞同：1
> 
> 时间：2012-09-21T16:40:18.993
> 
> 标签：.net, wpf, silverlight, xaml

我正在尝试将`Control`XAML 中根元素的样式设置`StaticResource`为 external 中定义的样式`ResourceDictionary`，但是我收到错误消息：

`The resource "MyControlStyle" could not be resolved.`

```
<UserControl
    ...
    >

    <UserControl.Resources>
        <ResourceDictionary Source="..\Styles\MyStyles.xaml" />
    </UserControl.Resources>

    <UserControl.Style>
        <StaticResource ResourceKey="MyControlStyle"/>
   </UserControl.Style>

</UserControl> 
```

除了在使用我的控件的 XAML 文件中设置样式之外，如何实现呢？我希望能够从内部设置样式，`UserControl`以便我可以在设计器中看到样式的效果`UserControl`。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:25:51.937

您正在尝试从用户控件的属性（在本例中为 Style）引用在控件内部定义的 ResourceDictionary。资源作为气泡工作，如果控件需要资源，则在其容器的资源中搜索，如果找不到，则在容器资源的父级中搜索，如果找不到，则在其父级中搜索....直到应用程序资源，如果在系统资源中找不到。

如果要将资源应用于用户控件，则应将其放在应用程序资源中（在 App.xaml 文件中）。试试这个。

# javascript - JScrollPane 插件 - 折叠时重新初始化

> ID：12534623
> 
> 赞同：0
> 
> 时间：2012-09-21T16:41:29.497
> 
> 标签：javascript, jquery, wordpress, accordion, jscrollpane

我试图让 JScrollPane 在展开/折叠我的手风琴时重新初始化[here](http://igcstonedev.hingeweb.com/)。您可以通过单击其中一个父项（Stone Tiles、Stone Sinks、Stone Wall Clading 等）来演示手风琴。

现在我使用以下 JQuery 将其设置为单击事件...

```
var pane = $('.menuwrap')
pane.jScrollPane();
var api = pane.data('jsp');
var i = 1;

$("ul#widget-collapscat-5-top > li.collapsing").click(function() {
    $(this).delay(3000);
    api.reinitialise();
}); 
```

当您第二次单击父级时，它似乎有效，但不是第一次。我不知道为什么，但我尝试编辑手风琴的 JS，以便在折叠完成时添加此功能（而不是尝试执行此单击解决方法）。折叠 JS 可以在[这里](http://pasteit.com/18828)查看。

我试图在这里为 reinitialize 函数添加 JS，但我认为我没有正确地做某事。

你能指出我正确的方向吗？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:57:50.920

也许您可以更改函数以通过这种方式在每个单击操作结束时`addExpandCollapse`调用该函数：`reinitialise`

```
function addExpandCollapse(id, expandSym, collapseSym, accordion) {
  jQuery('#' + id + ' .expand').live('click', function() {
    if (accordion==1) {
      var theDiv = jQuery(this).parent().parent().find('span.collapse').parent().find('div');
      jQuery(theDiv).hide('normal');
      jQuery(this).parent().parent().find('span.collapse').removeClass('collapse').addClass('expand');
        createCookie(theDiv.attr('id'), 0, 7);
    }
    jQuery('#' + id + ' .expand .sym').html(expandSym);
    expandCat(this, expandSym, collapseSym);

    api.reinitialise(); // HERE

    return false;
  });
  jQuery('#' + id + ' .collapse').live('click', function() {
    collapseCat(this, expandSym, collapseSym);

    api.reinitialise(); // and HERE

    return false;
  });
} 
```

并且为了更安全，请确保`var api = pane.data('jsp');`在文件中的任何位置上面的代码之前都有该行。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:59:38.357

`api.reinitialise()`工作正常。发生的事情是当您单击时它会更新大小，而此时元素尚未展开。您可能会注意到，如果您再次展开、折叠和展开同一部分，则不会发生任何事情。但是，如果您展开一个然后单击另一个，则 ScrollPane 将调整为第一个展开元素的大小。

你可以用事件解决这个问题：`$(this).trigger('colapseComplete')`崩溃结束时的地方。然后你可以使用：

```
//Listening to the colapseComplete event we triggered above
$("#widget-collapscat-5-top > li.collapsing").on('colapseComplete', function() {
  api.reinitialise();
}); 
```

# ios - NSPredicate 查询不包含特定字符串

> ID：12534629
> 
> 赞同：45
> 
> 时间：2012-09-21T16:42:11.473
> 
> 标签：ios, core-data, nspredicate

为这个寻找高低，但找不到我的答案。我正在寻找不等于指定字符串的所有记录的核心数据。例如，所有不等于当前会话 ID 的记录。我试过这些无济于事：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"listingID != %@", [sitListingID objectAtIndex:i]];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%@ NOT CONTAINS[cd] %@",@"listingID", [sitListingID objectAtIndex:i]];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"%@ NOT CONTAINS %@",@"listingID", [sitListingID objectAtIndex:i]];

NSPredicate *predicate = [NSPredicate predicateWithFormat:@"listingID NOT like %@", [sitListingID objectAtIndex:i]]; 
```

没有任何效果。HEEEEELP !!! -------------------------------------------------- --- 更多代码

```
NSFetchRequest *request = [[NSFetchRequest alloc] init];
    NSEntityDescription *entity = [NSEntityDescription entityForName:@"ListingRecord" inManagedObjectContext:context];
    [request setEntity:entity];
    NSPredicate *predicate = [NSPredicate predicateWithFormat:@"sessionID <> %@", uniqueSessionListings];
    [request setPredicate:predicate];
    NSError *error = nil;
    NSMutableArray *mutableFetchResults = [[context executeFetchRequest:request error:&error] mutableCopy]; 
```

* * *

## 回答 #1

> 赞同：121
> 
> 时间：2012-09-21T17:32:59.770

你的第一个谓词

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"listingID != %@", sessionID]; 
```

`listingID`应该努力查找属性不等于的所有记录`sessionID`（前提是`listingID`并且`sessionID`具有相同的类型）。

如果两者都是字符串，并且您想要查找`listingID` *不包含*该字符串`sessionID`作为子字符串的所有记录，那么此谓词应该有效：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"NOT (listingID CONTAINS %@)", sessionID]; 
```

如果字符串比较应该不区分大小写和变音符号，请使用“CONTAINS[cd]”。

*注意*：您可以将属性名称指定为参数，但您必须使用`%K`而不是`%@`格式：

```
NSPredicate *predicate = [NSPredicate predicateWithFormat:@"NOT (%K CONTAINS %@)", @"listingID", sessionID]; 
```

# content-management-system - 对可移动类型 5 CMS 中的输入字段进行排序

> ID：12534631
> 
> 赞同：2
> 
> 时间：2012-09-21T16:42:16.637
> 
> 标签：content-management-system, movabletype

我的 CMS 目前是 Movable Type 5.04。随附的屏幕截图是我如何检查 MT CMS 的撰写屏幕。

![撰写屏幕](../Images/735409d0d6ec7f9795ca8246829305db.png)

它按以下顺序出现在新条目创建页面中。

```
- 位置 5
- 职位描述 5
- 生物 5
- 职位名称 5

```

我想将顺序更改为以下。

```
- 职位名称 5
- 位置 5
- 职位描述 5
- 生物 5

```

有什么办法吗？我已经签入了`cfg_entry.tmpl`文件，上面的条目字段不存在，因为有自定义字段。你能帮我像上面那样对它们进行排序吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T13:31:54.443

字段的顺序存储在“permission_entry_prefs”字段中的权限表中。（并且该页面有一个匹配字段）

blog_id 为 0 的行是用户默认值，每个博客的原始数据将覆盖此博客的默认值。

而且格式很简单：逗号分隔列表。你应该在那里找到类似“标题、文本、标签、资产”的东西。只需根据自己的喜好重新排序即可。

如果用户将打开和关闭字段，我不确定原始订单是否会返回。如果是这样，那么一个简单的插件可以以更永久的方式解决它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-22T13:01:54.243

我记得通过按所需顺序重新创建自定义字段来做到这一点（MT 以特定顺序从数据库中提取它们，按 ID IIRC 排序）。如果您有现有数据，则需要删除字段*定义*（而不是数据），然后按照您希望仅更改其数字 ID（而不是其他任何内容）的顺序重新创建它们。

我现在正在旅行并且很忙，所以无法深入了解细节。但是请研究如何在数据库中定义 CF 以及如何简单地按 ID 重新排序它们。

# c# - 为什么我不能在 lambda 表达式上使用 yield return

> ID：12534634
> 
> 赞同：1
> 
> 时间：2012-09-21T16:42:39.350
> 
> 标签：c#, lambda, yield-return

> **可能重复：**
> [在 C# 中，为什么匿名方法不能包含 yield 语句？](https://stackoverflow.com/questions/1217729/in-c-why-cant-an-anonymous-method-contain-a-yield-statement)

我有这个代码：

```
Func<IEnumerable<int>> allNumbers = ()=> new []{1,2,3};
foreach (var number in allNumbers())
  Console.WriteLine(number); 
```

但我想（并且有道理）做这样的事情：

```
int i = 0;
Func<IEnumerable<int>> allNumbers = () => {yield return ++i;};
foreach (var number in allNumbers())
   Console.WriteLine(number); 
```

我得到这个编译错误：“yield 语句不能在匿名方法或 lambda 表达式中使用”

那么为什么我不能在 c# lambda 表达式中使用 yield 返回（懒惰的东西）？

# windows-8 - ASHWID 是否能保证唯一标识设备？

> ID：12534641
> 
> 赞同：9
> 
> 时间：2012-09-21T16:42:54.523
> 
> 标签：windows-8, microsoft-metro, uniqueidentifier

我们希望在 Windows 8 Metro 应用程序中使用唯一的设备标识符，建议使用 ASHWID，记录在此：

[http://msdn.microsoft.com/en-us/library/windows/apps/jj553431.aspx](http://msdn.microsoft.com/en-us/library/windows/apps/jj553431.aspx)

我正在努力看看如何才能保证这是独一无二的。该格式包括每个硬件组件两个字节，其中最唯一可识别的是 MAC 地址和硬盘序列号。但是这些值只有两个字节似乎还不够。

如果使用的字节不是最低有效数字（最右边，人类读取它们），那么生产线上相邻的两台相同的笔记本电脑可能具有相同的 ASHWID。MAC 和驱动器序列可能是相邻的。

所以，我想我的问题的症结在于，必须生产多少台设备具有相同的 CPU 类型和内存配置，然后才可能出现重复。[似乎和生日悖论](http://en.wikipedia.org/wiki/Birthday_problem)一样的问题，所以我找到了一个计算器并插入了数字:)

使用一个 MAC 地址和一个硬盘，每个硬盘都有两个字节的标识符，您有大约 40 亿个排列。一旦你只分配了 6,000 个，你有两个相同的大约是 50/50。

（请访问[http://jeff.aaron.ca/cgi-bin/birthday](http://jeff.aaron.ca/cgi-bin/birthday)并插入“6563”和“4294967296”进行实际计算）。

所以这看起来真的不是很独特。我对这个标识符持怀疑态度是对的，还是我错过了一些真正重要的东西？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2014-02-10T19:56:28.937

不，ASHWID 不能保证唯一标识设备。在工作中，我已经看到了几十次每天的碰撞，其中一个月是我们的容忍度。

此外，同一设备的 ASHWID 可能会经常更改——因为 Windows 8 通常会在可能添加坞站、USB 拇指驱动器或插入式蓝牙适配器的笔记本电脑上运行。ASHWID 的最佳用途是验证用户是否仅将您的应用安装到了有限数量的设备上，您可以通过解析 ASHWID 并有选择地将其与该用户之前看到的 ASHWID 进行比较来做到这一点。

至于唯一的硬件标识符，我建议使用包含多个组件的字符串的 MD5 摘要，其中 ASHWID 的某些组件可以发挥作用。

您可能会随机生成一个大数字（64 位以上）并将其存储（例如在注册表中）。当然，如果您希望在哈希中包含其他内容，则用户的登录名/ID 对于该用户应该是唯一的。如果用户克隆操作系统安装或在驱动器故障后更换 HD，您还需要考虑您想要做什么。

回到 Windows 桌面世界，我使用了 MachineGuid 注册表项和启动设备的序列号，但我正在努力在 Windows 应用商店应用程序中访问该信息。如果您有权访问，MachineGuid 位于 中`HKLM\SOFTWARE\Microsoft\Cryptography`，MS 保证它是唯一的。引导设备的序列号`::GetVolumeInformationW(::SHGetFolderPathW(~),~)`将是唯一的，但只有 32 位。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-09T20:48:13.087

来自文章：

> ASHWID 通过表示几个单独的硬件特性，在应用程序/包和设备之间提供了强大的绑定。为了保护用户隐私，ASHWID 因应用程序而异。除非底层硬件发生变化，否则来自同一应用程序的两次调用将产生相同的 ASHWID。但是，如果设备的硬件配置文件发生变化，例如当用户拔出 USB 蓝牙适配器时，ASHWID 也会发生变化。后端云服务可以验证 ASHWID 并将其与之前报告的值进行比较。尽管 ASHWID 有所不同，但可以对其进行解析以检测差异是否仅仅是由于微小的变化（例如向系统添加内存）造成的。对差异的容忍程度取决于后端云服务的实施。

ASHWID 由 9 个组件组成：

1.  处理器的 CPU ID
2.  内存大小
3.  磁盘设备的序列号
4.  网络适​​配器（NIC MAC 地址 - 第一个实例）
5.  音频适配器
6.  坞站
7.  蓝牙地址
8.  移动宽带设备 ID
9.  BIOS

CPU ID 仅对处理器型号唯一，但 NIC MAC 地址应该是唯一的。话虽如此，MAC 地址可以被克隆，USB NIC 可以从一个设备移动到另一个设备。所以，虽然我猜两个设备有*可能具有相同的 ASHWID，但这种可能性***很小**。使用此 ID 最具挑战性的是硬件可以更改。由服务决定他们允许更改 ASHWID 的哪些部分以及不允许更改哪些部分（可接受的差异）。[文章](http://msdn.microsoft.com/en-us/library/windows/apps/jj553431.aspx)本身提供了这方面的指导。

# ios - 使用 Flurry Analytics for iOS 设置“标签”

> ID：12534642
> 
> 赞同：2
> 
> 时间：2012-09-21T16:42:55.467
> 
> 标签：ios, flurry

我正在开发一个 iOS 应用程序，并使用 Flurry Analytics 来跟踪分析。在应用程序中，用户可以选择所属的组。有没有办法用标签标记分析，以便我可以在 Flurry 中为每个组分开分析？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-24T12:28:50.343

您可以使用 Flurry 中的 Segments 功能根据年龄、性别、位置、自定义事件、日期范围等跟踪用户组。在您的特定情况下，您可以在用户做出选择时记录事件，并将该事件分配给一个独特的段。每个细分的分析可以在开发人员仪表板上独立跟踪。如果您需要任何进一步的帮助，请写信至 support@flurry.com。（免责声明：我在 Flurry 工作）

# excel - Excel VLOOKUP #REF 错误

> ID：12534644
> 
> 赞同：1
> 
> 时间：2012-09-21T16:42:58.417
> 
> 标签：excel, reference, ref, worksheet, vlookup

我正在尝试创建一个综合的运动计划和训练日历。这部分是为了在一张纸上根据用户在另一张纸上识别的比赛和日期来确定比赛发生的周数。我已经确认我的 VLOOKUP 没有引用不存在的列，并且单元格样式对于适用的列是通用的。

这是公式：

```
=VLOOKUP(Periods!A6,Races!$F$2:$F$20,2,FALSE) 
```

![公式工作表的图像](../Images/b0d7304a0dc4e4312d4349294f53833f.png) ![目标工作表的图像](../Images/01bc8573263f2cf66c4876a0044b7652.png)

查找值是第一张图像上的训练周，用于识别目标工作表上的比赛。该表上的每一行都有不同的训练周。我试图在公式表上显示 D 列（和 F），以显示比赛的优先级，如果有计划在适用的一周进行。

任何帮助表示赞赏。

谢谢！

麦克风

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-09-21T16:52:37.757

`,2,`此处的 vlookup表示`=VLOOKUP(Periods!A6,Races!$F$2:$F$20,2,FALSE)`如果在 F 列中找到匹配项，则转到 F2:F20 列的右侧，但是，您需要指定 F2:G20 才能在 vlookup 公式中使用。（它仍然不会给你你期望的结果）

你有两个选择，

选项 1：重新组织您的目标工作表，使您的查找值在左侧，因此您可以使用 vlookup 将列拉到它的右侧

选项 2，使用不同类型的公式，例如匹配 + 索引组合。（未经测试，但示例如下）

```
=Index(Races!$B$2:$B$20,match(Periods!A6,Races!$F$2:$F$20,0)) 
```

# objective-c - armv7s 可执行文件大小增加

> ID：12534651
> 
> 赞同：1
> 
> 时间：2012-09-21T16:43:25.973
> 
> 标签：objective-c, ios, xcode, armv7

使用 XCode4.5 和 armv7+armv7s 架构，可执行文件大小从 3MB 增加到 7MB。仅使用 armv7 重建，二进制大小回到 3MB。

有没有人看到同样的增长？这是预期的结果吗？

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T16:46:35.900

你以前建造一个拱门，现在你正在建造两个拱门；这意味着生成了大约两倍的代码，因此二进制大小增加 2 倍不足为奇。

# c++ - 为什么我在汇编中嵌套的 for 循环会导致无限循环

> ID：12534652
> 
> 赞同：-1
> 
> 时间：2012-09-21T16:43:28.357
> 
> 标签：c++, visual-c++, assembly, x86, inline-assembly

我的程序是用 C++ 编写的，其中嵌入了一些 x86 汇编语言。我有 2 个必须经过的汇编语言嵌套 for 循环。然而，当我编译我的程序时，我得到了一个无限循环。C++ 中的等效程序如下所示：

```
#include<iostream>
using namespace std;
int main()
{
    int a[4] = {3,6,4,7};

    for(int k = 0 ; k < 4;k++)
    {
        for(int l = 0 ; l < a[k];l++)
        {
            cout<<'*';
        }
        cout<<endl;
    }

    system("pause");
    return 0;
}

 /*

  *** 
  ******
  ****
  *******
  Press any key to continue . . .
  */ 
```

这是同样的事情，但通过混合组装完成。

```
#include<iostream>
using namespace std;
void output(); //function for making an '*'
void makeSpace(); //function for making a space

int main()
{
    int a[4]={3,6,4,7};

    int counter = 0; //counter that will be used for first forloop
    int counter2 = 0; // counter to be used for second forloop

_asm{

    mov ebx,0 // this is to move from element 0,1,2,3,4, through the array
    mov ecx,0 // ecx will get the data from the array, only to be used as a
              // counter in forloop2 though.

     for1:

    cmp counter,4 //begins for firloop

    je starts 
    mov ecx,[a+ebx] // move the 0th element from array to ecx
    add ebx,4// ebx = ebx+4, I'm doing this to advance the array position (int)
    inc counter// increment counter by one

      for2:
    cmp counter2,ecx //begin forloop2, 
    je starts2
    call output
    inc counter2 //increment counter2 by one

    jmp for2 
      starts2:

    call makeSpace
    jmp for1
      starts:
}

    return 0;
}

void output()
{
    cout<<'*';
    }

void makeSpace()
{
    cout<<endl;
} 
```

为什么这会导致无限循环？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:51:34.243

您至少需要解决两件事：

*   当您`output()`只调用以下寄存器时，保证不会被丢弃：

    *   `edi`, `esi`,`ebx`和`ebp`

    特别是，您正在使用`ecx`，该功能被允许丢弃。

*   您永远不会重置`counter2`为 0，因此内部循环不等同于您的 C 代码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:52:53.310

我相信这里的答案是，在调用函数`Output`和`MakeSpace`. 标准函数头不保证代码中使用的`ecx`or`ebx`寄存器的任何内容。`asm`

# php - wordpress 中某个类别中每个其他帖子的不同布局

> ID：12534655
> 
> 赞同：1
> 
> 时间：2012-09-21T16:43:58.200
> 
> 标签：php, wordpress

我正在一个 wordpress 网站上工作，我需要一个类别中的所有其他帖子都有不同的布局。

意思是，第一篇文章左边有图片，右边有文字。下一篇文章左边有文字，右边有图片。下一篇文章（第 3 篇文章）将回到左边的图像，右边的文字，依此类推。

忽略编码，因为它只是一个快速的，但这里有一个 jfiddle，可以直观地显示我想要的效果。[http://jsfiddle.net/U4amd/](http://jsfiddle.net/U4amd/)

我已经想出了如何以一种方式布局“偶数”帖子并以不同方式布局“奇数”帖子，但使用了两个循环来完成它。但是这行不通，因为随后会显示所有偶数帖子，然后显示所有奇数帖子。这是我目前拥有的代码：

`

```
 <?php while(have_posts()) : ?>
        <?php
            $postcount++;
            if( ($postcount % 2) == 0 ) : // skip 'even' posts
                $wp_query->next_post();
            else :
        ?>
        <?php the_post(); ?>

    <div class="product clearfix color-box">

        <div class="vendor pRight fleft">
            <?php $color = get_post_meta($post->ID, 'color', true) ?>
            <div class="color-box-expand pad-inside" style="background-color:<?php echo $color; ?>">
                <?php the_post_thumbnail('bones-thumb-vb'); ?>
            </div>
        </div>
        <div class="vendor-images fleft">
            <?php $slide01 = get_post_meta($post->ID, 'slide01', true) ?>
            <img src="<?php echo $slide01 ?>">  
            <?php the_content() ?>
        </div>

    </div>

    <?php endif; ?>
    <?php endwhile; ?>

    <?php $postcount = 0; rewind_posts(); ?>

        <?php while(have_posts()) : ?>
        <?php
            $postcount++;
            if( ($postcount % 2) != 0 ) : // skip 'odd' posts
                $wp_query->next_post();
            else :
            ?>
        <?php the_post(); ?>

    <div class="product clearfix color-box">

        <div class="vendor-images fleft">
            <?php $slide01 = get_post_meta($post->ID, 'slide01', true) ?>
            <img src="<?php echo $slide01 ?>">  
            <?php the_content() ?>
        </div>

        <div class="vendor pLeft fleft">
            <?php $color = get_post_meta($post->ID, 'color', true) ?>
            <div class="color-box-expand pad-inside" style="background-color:<?php echo $color; ?>">
                <?php the_post_thumbnail('bones-thumb-vb'); ?>
            </div>
        </div>

        <?php endif; ?>
        <?php endwhile; ?>
    </div>
</div>` 
```

任何帮助都将不胜感激。我是 php/Wordpress 的新手，所以还在搞清楚一切。如果我需要澄清任何事情，请告诉我。谢谢！

* * *

@Crowjonah——把这个放在这里是因为我在评论中超过了字符限制——我可能没有做对，但现在在萤​​火虫中查看代码时，没有分配 .even 类。这是我基于上述内容的代码。

```
<?php $postcount=0;
            while(have_posts()) :        
                $postcount++;
                if( ($postcount % 2) == 0 ) $post_class = ' even';
                else $post_class = ' odd'; ?>
                <div class="product clearfix color-box">                    
                    <div class="vendor pRight <?php echo $post_class; ?>">
                        <?php the_post(); ?>
                        <?php $color = get_post_meta($post->ID, 'color', true) ?>
                        <div class="color-box-expand pad-inside" style="background-color:<?php echo $color; ?>">
                            <?php the_post_thumbnail('bones-thumb-vb'); ?>
                        </div>
                    </div>
                    <div class="vendor-images post <?php echo $post_class; ?>">
                        <?php $slide01 = get_post_meta($post->ID, 'slide01', true) ?>
                        <img src="<?php echo $slide01 ?>">  
                        <?php the_content() ?>
                    </div>
                </div>

        <?php $postcount++;
            endwhile; ?> 
```

非常感谢你的帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:56:27.650

您可以在两个循环中使用相同的增量和检测，但将其合并到一个循环中，为您的后包装器分配相应的`even`或类：`odd`

```
<?php 
    $postcount=1;
    while(have_posts()) :        
        if( ($postcount % 2) == 0 ) $post_class = ' even';
        else $post_class = ' odd'; ?>
        <div class="post <?php echo $post_class; ?>">            
            <?php the_post(); ?>
        </div>
<?php 
        $postcount++;
    endwhile; 
?> 
```

使用 CSS，您可以分配

```
div.post.even img {
   float: left; /* etc etc */
}
div.post.odd img {
   float: right; /* etc etc */
} 
```

# java - 仅当 JUnit 测试方法失败时，如何使用 SLF4J 在 Java 中记录语句？

> ID：12534657
> 
> 赞同：2
> 
> 时间：2012-09-21T16:44:03.360
> 
> 标签：java, logging, junit

考虑 JUnit 类中的 JUnit 方法。它有一些测试和一些 logger.info/debug 语句或其他什么。也许您没有登录 Junit 方法，但我这样做了，它为我节省了很多麻烦，因为它可以快速了解某些测试失败的原因。

如果方法结束，我想“擦除”那些日志语句，可能使用 SLF4J

一个简单的实现方法是

```
logger.tick(); 
```

告诉 logger 标记进一步的日志语句。

```
logger.tack(); 
```

擦除所有日志语句直到刻度标志。问题是您无法擦除 Eclipse 控制台上的内容；)。

既然我正在使用连续 JUnit 测试，这将使我的生活更加快乐。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:49:00.197

我不会对在单元测试中记录日志感到自觉，但我想大多数人已经对单元测试框架中内置的日志记录工具做得很好。但是，如果你想实现这一点，你需要在一个变量中捕获日志（有些人可能会建议 a `StringBuilder`），然后在测试结束时根据一些死人的开关转储它们（所以如果开关没有击中最后一幕单元测试的目的是转储保留的日志）。

一个示例可能如下所示：

```
public abstract class LoggedTest extends TestCase {
  protected boolean displayLog;
  protected StringBuilder log;

  public void tick() {
    displayLog = true;
  }

  public void tack() {
    displayLog = false;
  }

  public void log(String msg) {
    log.append(message);
  }

  protected void setUp() {
    displayLog = false;
    log = new StringBuilder();
  }

  protected void tearDown() {
    if(displayLog) {
      System.err.println(log);
    }
  }
} 
```

# java - 无法从 java 进程中使用 taskkill.exe

> ID：12534659
> 
> 赞同：2
> 
> 时间：2012-09-21T16:44:18.417
> 
> 标签：java, windows, taskkill

我需要从我的集成测试中杀死 Windows（WindowsXP 32 位）上的外部进程。我以为我只是使用'taskkill.exe'，但我似乎无法让它工作。基本上，每次我从java启动一个'taskkill.exe'进程时，它都会返回退出值-1073741515，没有任何东西打印到std错误/输出。

为了重现这个问题，我编写了这个简单的应用程序：

```
public static void main(String[] args) throws Exception {
    ProcessBuilder builder = new ProcessBuilder();
    //In my real code, I kill process by its pid. However below also shows the problem:
    builder.command("taskkill.exe", "/?");
    builder.redirectErrorStream(true);
    Process p = builder.start();
    BufferedReader r = new BufferedReader(new InputStreamReader(p.getInputStream()));
    String line = r.readLine();
    System.out.println("out:");
    while(line != null) {
        System.out.println(line);
        line = r.readLine();
    }
    System.out.println(p.waitFor());
} 
```

更多数据点：

*   -1073741515 显然意味着“应用程序未能正确初始化”。不过对我不是很有帮助；）
*   我尝试了很多 taskkill.exe 参数的组合；我试过在命令前加上'cmd'、'/c'。症状完全一样
*   我尝试执行位于 windows\system32 下的其他 windows 程序，我也得到 -10737 ...
*   执行诸如“dir”或“echo”之类的东西可以正常工作。

关于可能是什么问题的任何提示？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:19:40.037

您是否尝试过以不同的用户身份执行您的应用程序？如果您在 Windows 中使用普通批处理文件运行您的应用程序，请右键单击并选择`Run as administrator`并查看结果。您运行的帐户可能没有足够的权限来执行本机应用程序。

# python - python中原始套接字的bind（）函数中的第二个字段

> ID：12534666
> 
> 赞同：1
> 
> 时间：2012-09-21T16:44:58.557
> 
> 标签：python, sockets

我正在用 python 实现一个原始套接字程序，我遇到了`bind()`可以将我的套接字绑定到接口的地方。据我了解，此函数的第一个字段是我希望绑定到的接口。 **第二个领域是什么？**这是 Ethertype（例如 IP4）吗？在 Python 参考文档中找到的[原始套接字示例](http://docs.python.org/py3k/library/socket.html#example)中，代码如下所示：

```
# create a raw socket and bind it to the public interface
s = socket.socket(socket.AF_INET, socket.SOCK_RAW, socket.IPPROTO_IP)
s.bind((HOST, 0)) 
```

为什么第二个字段为零？在其他[示例](http://nullege.com/codes/search/socket.AF_PACKET)中，我看到这经常设置为 0x0800（或十进制的 2048），这让我相信这可能会将套接字设置为 IP4 协议。我也看到这个设置为 9999。也许我在这里遗漏/误解了一些东西。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:53:52.360

第二个字段表示您要绑定的端口号。但是，将其设置为 0，将使操作系统为您选择一个从 1024 到 65535 的可用端口。

然后，您可以获得 选择的端口`sock.getsockname()[1]`。

此外，将第一个字段（主机）设置为`0.0.0.0`或`''`将允许接受来自任何 IPv4 地址的连接。

* * *

编辑：正如@highlycaffeinated 所指出的，以上是正确的，因为`socket.AF_INET`选择了地址族。但是，如果选择了[socket.AF_INET6](http://docs.python.org/library/socket.html#socket.AF_INET6)，则格式将为`(host, port, flowinfo, scopeid)`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:53:57.117

该值取决于您使用的地址系列。就像你展示的`AF_INET`那样，它的端口号。从[文档](http://docs.python.org/library/socket.html)：

> 套接字地址表示如下： 单个字符串用于 AF_UNIX 地址族。AF_INET 地址族使用一对 (host, port)，其中 host 是一个字符串，表示 Internet 域表示法中的主机名，如“daring.cwi.nl”或 IPv4 地址，如“100.50.200.5”，端口为一个整数。对于AF_INET6地址族，使用四元组（host、port、flowinfo、scopeid），其中flowinfo和scopeid分别代表C语言struct sockaddr_in6中的sin6_flowinfo和sin6_scope_id成员。对于socket模块方法，flowinfo和scopeid可以省略，只是为了向后兼容性。但是请注意，省略 scopeid 可能会导致在处理作用域 IPv6 地址时出现问题。目前不支持其他地址族。

# dataset - 来自主数据集的 Jasper Report (iReport) 饼图数据集

> ID：12534669
> 
> 赞同：1
> 
> 时间：2012-09-21T16:45:23.927
> 
> 标签：dataset, jasper-reports, ireport

我想在 Jasper iReport 中为每组使用一个饼图，但我不知道如何为每组创建一个数据集。

假设我有一个如下表：

```
Table users
---------
category - user - status 
```

然后我有以下SQL

```
select * from users order by category 
```

我的显示器有一个简单的类别组带，其中详细显示了每个用户及其状态。理想情况下，我会让每个类别组标题显示一个饼图，其中包含该组中所有不同的状态及其计数。我不知道如何在 iReport 中执行此操作。

如果我提前知道所有类别，我可以使用以下内容为每个类别创建一个数据集：

```
select status, count(user) from user where category = <current category> group by status 
```

我正在尝试使用`JRMapCollectionDataSource`重置每个组并使用变量从组中的行中提取数据来执行此操作，但我对整个重置组和增量范例不是很熟悉。

有什么帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-24T10:37:14.943

您无需按照以下步骤进行编程即可解决此问题：

1.  ***按类别***字段和***用户***字段对数据进行排序（通过*iReport*添加排序或在查询中添加*ORDER BY*子句以防处理*jdbc 数据源*）；
2.  添加两组：第一组 - 用于***类别***字段，第二组 - 用于***用户***字段（通过*iReport*）。**注意**：不一定要在查询中添加*GROUP BY*子句；
3.  将*饼图*组件添加到***类别***字段的*组标题*带；
**   为此*pieChart*设置***评估***时间和***评估***组属性。*

 **这是演示如何构建*饼图*的工作示例。在此示例中，我使用*csv*文件作为数据源。

该图表显示了每个*类别的**用户*数量。我使用变量***usersCount***来计算每个组中的*用户*，但可以使用内置变量。******`$V{userGroup_COUNT}`******

 **这是我的*jrxml*文件：

```
<?xml version="1.0" encoding="UTF-8"?>
<jasperReport ...>
    <field name="category" class="java.lang.Integer"/>
    <field name="user" class="java.lang.String"/>
    <field name="status" class="java.lang.String"/>
    <sortField name="category"/>
    <sortField name="user"/>
    <variable name="usersCount" class="java.lang.Integer" resetType="Group" resetGroup="userGroup" calculation="Count">
        <variableExpression><![CDATA[$F{user}]]></variableExpression>
        <initialValueExpression><![CDATA[0]]></initialValueExpression>
    </variable>
    <group name="categoryGroup">
        <groupExpression><![CDATA[$F{category}]]></groupExpression>
        <groupHeader>
            <band height="135">
                <pieChart>
                    <chart evaluationTime="Group" evaluationGroup="categoryGroup">
                        <reportElement x="158" y="0" width="200" height="135"/>
                        <chartTitle/>
                        <chartSubtitle/>
                        <chartLegend/>
                    </chart>
                    <pieDataset>
                        <dataset resetType="Group" resetGroup="categoryGroup" incrementType="Group" incrementGroup="userGroup"/>
                        <keyExpression><![CDATA[$F{user}]]></keyExpression>
                        <valueExpression><![CDATA[$V{usersCount}]]></valueExpression>
                        <labelExpression><![CDATA[String.valueOf($V{usersCount})]]></labelExpression>
                    </pieDataset>
                    <piePlot>
                        <plot/>
                        <itemLabel/>
                    </piePlot>
                </pieChart>
                <textField>
                    <reportElement x="0" y="0" width="100" height="20"/>
                    <textElement/>
                    <textFieldExpression><![CDATA["Category: " + $F{category}]]></textFieldExpression>
                </textField>
            </band>
        </groupHeader>
    </group>
    <group name="userGroup">
        <groupExpression><![CDATA[$F{user}]]></groupExpression>
    </group>
    <title>
        <band height="79" splitType="Stretch"/>
    </title>
</jasperReport> 
```

这是我的*csv*文件（数据文件 -*数据源*）：

```
category,user,status
1,user1,WORK
1,user1,HOLIDAY
1,user2,SICK
2,user1,WORK
2,user2,WORK
2,user2,HOLIDAY
2,user3,HOLIDAY
2,user4,SICK
3,user1,HOLIDAY
3,user3,HOLIDAY
3,user5,HOLIDAY
4,user1,WORK
4,user1,HOLIDAY
4,user2,SICK
4,user2,WORK
4,user2,SICK
4,user3,HOLIDAY
4,user4,HOLIDAY
4,user5,HOLIDAY 
```

结果将是（通过*iReport*预览）：

![结果](../Images/2e42d1e9e79d5ccdb9aeb1b0e040f001.png)****

# machine-learning - 精度或召回率高？

> ID：12534672
> 
> 赞同：1
> 
> 时间：2012-09-21T16:45:45.607
> 
> 标签：machine-learning, classification, document-classification, precision-recall

假设我正在使用“A”和“B”两种方法评估一些文本分类研究项目。使用方法“A”时，精度提高了 x%，而使用“B”时，召回率提高了 x%。我怎样才能说 A 或 B 方法更好？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T17:11:17.153

这取决于你的目标。如果您需要前几个返回的类是正确的，那么您应该追求精确度，如果您想专注于返回所有相关的类，那么请尝试增加召回率。

如果精度和召回率对您来说都很重要，那么一个常用的衡量标准是[F1 分数](https://en.wikipedia.org/wiki/F1_Score)，它将精度和召回率组合成一个衡量标准。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:15:27.873

我完全同意@Sicco 写的。

另外，我建议您观看[此视频](https://class.coursera.org/ml-2012-002/lecture/preview/69)，它来自 Coursera 的机器学习课程。来自视频：在某些情况下，您可以通过更改阈值来控制精度和召回率。如果您不确定什么对您更重要，请坚持 F1。

# twitter-bootstrap - 折叠时搜索表单的 Twitter Boostrap 响应式导航栏问题

> ID：12534680
> 
> 赞同：1
> 
> 时间：2012-09-21T16:46:08.897
> 
> 标签：twitter-bootstrap, responsive-design

当屏幕较小时，我正在使用引导响应导航栏折叠导航栏中的链接。不过，我想在折叠区域之外保留一个按钮和一个搜索框。这是我的代码：

```
<div class="navbar navbar-inverse navbar-fixed-top">
        <div class="navbar-inner">
            <div class="container-fluid">                    
                <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </a>

               <a class="brand" href="/">site name</a>

                <div class="nav-collapse">
                    <ul class="nav">
                        <li><a href="#">Home</a></li>
                        <li><a href="#">Other</a></li>    
                    </ul>
                </div>

                <form action="#" class="navbar-search pull-left">
                    <input name="search" class = "search-query" />
                </form>

                <div class="btn-group pull-right">
                    <button class="btn btn-primary">Log In</button>
                </div>
            </div>
        </div>      
    </div> 
```

这在普通屏幕上看起来不错，但是一旦链接崩溃，按钮和搜索框就会被强制在下方，使导航的高度加倍。

如果我将搜索框移到导航折叠链接的左侧，它可以正常工作，但我需要先显示链接。

任何想法如何实现这一目标？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-24T17:37:51.513

没有测试很难说，但您可以尝试向`white-space: nowrap`容器添加样式。

```
<div class="container-fluid nowrap"> 
```

CSS：

```
.nowrap { white-space: nowrap; } 
```

*编辑*：
做了一些测试，我相信这模仿了你正在寻找的行为：

```
<div class="navbar navbar-inverse navbar-fixed-top">
    <div class="navbar-inner">
        <div class="container-fluid">                    
            <a class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </a>

           <a class="brand" href="/">site name</a>

           <div class="btn-group pull-right">
                <button class="btn btn-primary">Log In</button>
            </div>
            <div class="pull-left">
           <form action="#" class="navbar-search pull-right">
                <input name="search" class = "search-query" />
            </form>

            <div class="nav-collapse pull-right">
                <ul class="nav">
                    <li><a href="#">Home</a></li>
                    <li><a href="#">Other</a></li>    
                </ul>
            </div>
            </div>
        </div>
    </div>      
</div> 
```

CSS：

```
@media (max-width: 979px) {
    .navbar .btn-navbar { float: left !important; }
    .navbar-search { float: left; }
} 
```

基本上，只需将链接和搜索栏浮动到**右侧并将它们包装在一个****向左**浮动的 div 中（以模拟屏幕宽度 > 979px 上的当前行为）。
然后，在窗口缩小时将链接和搜索栏浮动到**左侧**以避免换行。

它仍然会在非常小的屏幕宽度上中断，这仅仅是因为搜索栏太宽而无法容纳其余内容。您可以通过相应地覆盖其宽度来防止这种情况。
例如：

```
.search-query { width: 150px !important } 
```

# google-earth-plugin - 谷歌地球插件多地标

> ID：12534681
> 
> 赞同：2
> 
> 时间：2012-09-21T16:46:12.907
> 
> 标签：google-earth-plugin

我正在使用[Google Earth 插件](https://developers.google.com/earth/)来同时显示多个多边形（圆圈），我该怎么做？，我有一个带有 lat or`geoDataSplit[0]`和 lng or的列表框`geoDataSplit[1]`，想要通过这个列表框 latlngs，将它们传递给polyplacemark，存储所有圆圈可能在一个数组中，或者你会建议什么并显示所有圆圈，下面的代码打印所有圆圈，但一个一个而不是同时打印所有圆圈：

```
var setOfPlacemarks = [];
function createCircle(centerLat, centerLng, radius) {

    function make2Circle(centerLat, centerLng, radius) {

        var ring = ge.createLinearRing('');
        var steps = 25;
        var pi2 = Math.PI * 2;
        for (var i = 0; i < steps; i++) {
            var lat = parseFloat(centerLat) + radius * Math.cos(i / steps * pi2);
            var lng = centerLng + radius * Math.sin(i / steps * pi2);
            ring.getCoordinates().pushLatLngAlt(lat, lng, 0);

        }
        return ring;
    }

    var polygonPlacemark = ge.createPlacemark('');
    polygonPlacemark.setGeometry(ge.createPolygon(''));
    var outer = ge.createLinearRing('');

    var dlist = document.getElementById('salesList');
        for (var i = 0; i < dlist.options.length; i++) {

            var geoData = dlist.options[i].text;
            geoDataSplit = geoData.split(",");
            polygonPlacemark.getGeometry().setOuterBoundary(make2Circle(parseFloat(geoDataSplit[0]), parseFloat(geoDataSplit[1]), .00001*parseInt(geoDataSplit[2])/5));
            polygonPlacemark.setName(geoDataSplit[2]);

            ge.getFeatures().appendChild(polygonPlacemark);
            setOfPlacemarks.push(polygonPlacemark);
        }
        printAllPlacemarks();
}

function printAllPlacemarks() {

    var kmlObjectList = ge.getFeatures().getChildNodes();
    alert(kmlObjectList);
    for (var i = 0; i < setOfPlacemarks.length; i++) {
        alert(setOfPlacemarks[i]);
        ge.getFeatures().appendChild(setOfPlacemarks[i]);
    }
} 
```

# iphone - 从 ics 电子邮件附件中取消 iPhone 日历事件

> ID：12534687
> 
> 赞同：2
> 
> 时间：2012-09-21T16:46:39.050
> 
> 标签：iphone, icalendar

我正在创建一封正文中包含 VCalendar 事件的电子邮件。这在我的 iPhone 4 (IOS v5.1.1 9B206) 的电子邮件中显示为 ics 附件。
我可以通过单击“添加到日历”按钮打开此附件并将事件添加到我的 iPhone 日历中。

现在，我正试图以同样的方式取消事件。

我正在生成与原始事件相同的 UID（基于事件的日期和时间），将 Method 设置为 CANCEL，将 Status 设置为 CANCELED（推荐），但是，虽然我可以在电子邮件中看到 ics 附件，但我无法在我的 iPhone 上打开附件。

正在发送的 ics：

```
BEGIN:VCALENDAR
VERSION:2.0
PRODID:-//mycompany.com//test
METHOD:CANCEL
BEGIN:VEVENT
CLASS:PRIVATE
UID:20120924T090000
DTSTAMP:20120923T151052
DTSTART:20120924T090000
DTEND:20120924T130000
LOCATION:Normal
DESCRIPTION:Always a description
STATUS:CANCELLED
SUMMARY:Cancelling
ORGANIZER;CN="Test":mailto:donotreply@test.com
ATTENDEE;CN="Mr Smith":mailto:mr.smith@test.com
PRIORITY:5
SEQUENCE:2
END:VEVENT
END:VCALENDAR 
```

**更新：**

这实际上适用于我的第一代 iPad（IOS 5.1.1 9B206），所以我现在认为这是因为我的 iPhone 没有我的交换日历。

**更新 2：**

通过重新输入电子邮件服务器的名称，我最终设法让我的 Exchange 日历同步到我的 iPhone，这重新验证/刷新了详细信息，现在我的所有 Outlook 约会同步。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-28T15:38:27.813

只要一切设置正确，从 ics 电子邮件附件在 iPhone 上添加和取消约会都可以工作。

您可以将约会添加到任何日历（我将它们添加到我的本地日历）。

您不能从本地日历取消约会，我需要将我的 Exchange 日历同步到我的 iPhone 以允许我取消我添加的事件。

# javascript - Jquery 自动完成有限搜索结果 (JSON)

> ID：12534689
> 
> 赞同：1
> 
> 时间：2012-09-21T16:46:46.780
> 
> 标签：javascript, jquery, autocomplete

我正在使用带有 Jquery Auto-Complete 的 FoxyComplete 插件来进行简单的搜索。一切都已设置好并且运行良好，但我发现搜索结果非常有限。

我对我的所有数据都使用了一个大的 JSON 文件，我遇到的问题是在以下情况下：假设我的 JSON 文件具有以下描述：

```
{
"title": "Brand new black car"
}, 
```

如果用户搜索“ `black car`”，他或她将得到完美的结果，并且搜索很棒。但是，如果用户搜索“ `car new`”，即使两个关键字都在我的 JSON 文件中，也不会出现任何内容。

任何帮助都会很棒。我翻阅了 Jquery AutoComplete 文档，也找不到解决方案。我的 Jquery 自动完成 js 如下：

```
;
(function ($) {

  $.fn.extend({
    autocomplete: function (urlOrData, options) {
      var isUrl = typeof urlOrData == "string";
      options = $.extend({}, $.Autocompleter.defaults, {
        url: isUrl ? urlOrData : null,
        data: isUrl ? null : urlOrData,
        delay: isUrl ? $.Autocompleter.defaults.delay : 10,
        max: options && !options.scroll ? 10 : 150
      }, options);

      // if highlight is set to false, replace it with a do-nothing function
      options.highlight = options.highlight || function (value) {
        return value;
      };

      // if the formatMatch option is not specified, then use formatItem for backwards compatibility
      options.formatMatch = options.formatMatch || options.formatItem;

      return this.each(function () {
        new $.Autocompleter(this, options);
      });
    },
    result: function (handler) {
      return this.bind("result", handler);
    },
    search: function (handler) {
      return this.trigger("search", [handler]);
    },
    flushCache: function () {
      return this.trigger("flushCache");
    },
    setOptions: function (options) {
      return this.trigger("setOptions", [options]);
    },
    unautocomplete: function () {
      return this.trigger("unautocomplete");
    }
  });

  $.Autocompleter = function (input, options) {

    var KEY = {
      UP: 38,
      DOWN: 40,
      DEL: 46,
      TAB: 9,
      RETURN: 13,
      ESC: 27,
      COMMA: 188,
      PAGEUP: 33,
      PAGEDOWN: 34,
      BACKSPACE: 8
    };

    // Create $ object for input element
    var $input = $(input).attr("autocomplete", "off").addClass(options.inputClass);

    var timeout;
    var previousValue = "";
    var cache = $.Autocompleter.Cache(options);
    var hasFocus = 0;
    var lastKeyPressCode;
    var config = {
      mouseDownOnSelect: false
    };
    var select = $.Autocompleter.Select(options, input, selectCurrent, config);

    var blockSubmit;

    // prevent form submit in opera when selecting with return key
    $.browser.opera && $(input.form).bind("submit.autocomplete", function () {
      if (blockSubmit) {
        blockSubmit = false;
        return false;
      }
    });

    // only opera doesn't trigger keydown multiple times while pressed, others don't work with keypress at all
    $input.bind(($.browser.opera ? "keypress" : "keydown") + ".autocomplete", function (event) {
      // a keypress means the input has focus
      // avoids issue where input had focus before the autocomplete was applied
      hasFocus = 1;
      // track last key pressed
      lastKeyPressCode = event.keyCode;
      switch (event.keyCode) {

      case KEY.UP:
        event.preventDefault();
        if (select.visible()) {
          select.prev();
        } else {
          onChange(0, true);
        }
        break;

      case KEY.DOWN:
        event.preventDefault();
        if (select.visible()) {
          select.next();
        } else {
          onChange(0, true);
        }
        break;

      case KEY.PAGEUP:
        event.preventDefault();
        if (select.visible()) {
          select.pageUp();
        } else {
          onChange(0, true);
        }
        break;

      case KEY.PAGEDOWN:
        event.preventDefault();
        if (select.visible()) {
          select.pageDown();
        } else {
          onChange(0, true);
        }
        break;

        // matches also semicolon
      case options.multiple && $.trim(options.multipleSeparator) == "," && KEY.COMMA:
      case KEY.TAB:
      case KEY.RETURN:
        if (selectCurrent()) {
          // stop default to prevent a form submit, Opera needs special handling
          event.preventDefault();
          blockSubmit = true;
          return false;
        }
        break;

      case KEY.ESC:
        select.hide();
        break;

      default:
        clearTimeout(timeout);
        timeout = setTimeout(onChange, options.delay);
        break;
      }
    }).focus(function () {
      // track whether the field has focus, we shouldn't process any
      // results if the field no longer has focus
      hasFocus++;
    }).blur(function () {
      hasFocus = 0;
      if (!config.mouseDownOnSelect) {
        hideResults();
      }
    }).click(function () {
      // show select when clicking in a focused field
      if (hasFocus++ > 1 && !select.visible()) {
        onChange(0, true);
      }
    }).bind("search", function () {
      // TODO why not just specifying both arguments?
      var fn = (arguments.length > 1) ? arguments[1] : null;

      function findValueCallback(q, data) {
        var result;
        if (data && data.length) {
          for (var i = 0; i < data.length; i++) {
            if (data[i].result.toLowerCase() == q.toLowerCase()) {
              result = data[i];
              break;
            }
          }
        }
        if (typeof fn == "function") fn(result);
        else $input.trigger("result", result && [result.data, result.value]);
      }
      $.each(trimWords($input.val()), function (i, value) {
        request(value, findValueCallback, findValueCallback);
      });
    }).bind("flushCache", function () {
      cache.flush();
    }).bind("setOptions", function () {
      $.extend(options, arguments[1]);
      // if we've updated the data, repopulate
      if ("data" in arguments[1]) cache.populate();
    }).bind("unautocomplete", function () {
      select.unbind();
      $input.unbind();
      $(input.form).unbind(".autocomplete");
    });

    function selectCurrent() {
      var selected = select.selected();
      if (!selected) return false;

      var v = selected.result;
      previousValue = v;

      if (options.multiple) {
        var words = trimWords($input.val());
        if (words.length > 1) {
          var seperator = options.multipleSeparator.length;
          var cursorAt = $(input).selection().start;
          var wordAt, progress = 0;
          $.each(words, function (i, word) {
            progress += word.length;
            if (cursorAt <= progress) {
              wordAt = i;
              return false;
            }
            progress += seperator;
          });
          words[wordAt] = v;
          // TODO this should set the cursor to the right position, but it gets overriden somewhere
          //$.Autocompleter.Selection(input, progress + seperator, progress + seperator);
          v = words.join(options.multipleSeparator);
        }
        v += options.multipleSeparator;
      }

      $input.val(v);
      hideResultsNow();
      $input.trigger("result", [selected.data, selected.value]);
      return true;
    }

    function onChange(crap, skipPrevCheck) {
      if (lastKeyPressCode == KEY.DEL) {
        select.hide();
        return;
      }

      var currentValue = $input.val();

      if (!skipPrevCheck && currentValue == previousValue) return;

      previousValue = currentValue;

      currentValue = lastWord(currentValue);
      if (currentValue.length >= options.minChars) {
        $input.addClass(options.loadingClass);
        if (!options.matchCase) currentValue = currentValue.toLowerCase();
        request(currentValue, receiveData, hideResultsNow);
      } else {
        stopLoading();
        select.hide();
      }
    };

    function trimWords(value) {
      if (!value) return [""];
      if (!options.multiple) return [$.trim(value)];
      return $.map(value.split(options.multipleSeparator), function (word) {
        return $.trim(value).length ? $.trim(word) : null;
      });
    }

    function lastWord(value) {
      if (!options.multiple) return value;
      var words = trimWords(value);
      if (words.length == 1) return words[0];
      var cursorAt = $(input).selection().start;
      if (cursorAt == value.length) {
        words = trimWords(value)
      } else {
        words = trimWords(value.replace(value.substring(cursorAt), ""));
      }
      return words[words.length - 1];
    }

    // fills in the input box w/the first match (assumed to be the best match)
    // q: the term entered
    // sValue: the first matching result
    function autoFill(q, sValue) {
      // autofill in the complete box w/the first match as long as the user hasn't entered in more data
      // if the last user key pressed was backspace, don't autofill
      if (options.autoFill && (lastWord($input.val()).toLowerCase() == q.toLowerCase()) && lastKeyPressCode != KEY.BACKSPACE) {
        // fill in the value (keep the case the user has typed)
        $input.val($input.val() + sValue.substring(lastWord(previousValue).length));
        // select the portion of the value not typed by the user (so the next character will erase)
        $(input).selection(previousValue.length, previousValue.length + sValue.length);
      }
    };

    function hideResults() {
      clearTimeout(timeout);
      timeout = setTimeout(hideResultsNow, 200);
    };

    function hideResultsNow() {
      var wasVisible = select.visible();
      select.hide();
      clearTimeout(timeout);
      stopLoading();
      if (options.mustMatch) {
        // call search and run callback
        $input.search(

        function (result) {
          // if no value found, clear the input box
          if (!result) {
            if (options.multiple) {
              var words = trimWords($input.val()).slice(0, - 1);
              $input.val(words.join(options.multipleSeparator) + (words.length ? options.multipleSeparator : ""));
            } else {
              $input.val("");
              $input.trigger("result", null);
            }
          }
        });
      }
    };

    function receiveData(q, data) {
      if (data && data.length && hasFocus) {
        stopLoading();
        select.display(data, q);
        autoFill(q, data[0].value);
        select.show();
      } else {
        hideResultsNow();
      }
    };

    function request(term, success, failure) {
      if (!options.matchCase) term = term.toLowerCase();
      var data = cache.load(term);
      // recieve the cached data
      if (data && data.length) {
        success(term, data);
        // if an AJAX url has been supplied, try loading the data now
      } else if ((typeof options.url == "string") && (options.url.length > 0)) {

        var extraParams = {
          timestamp: +new Date()
        };
        $.each(options.extraParams, function (key, param) {
          extraParams[key] = typeof param == "function" ? param() : param;
        });

        $.ajax({
          // try to leverage ajaxQueue plugin to abort previous requests
          mode: "abort",
          // limit abortion to this input
          port: "autocomplete" + input.name,
          dataType: options.dataType,
          url: options.url,
          data: $.extend({
            q: lastWord(term),
            limit: options.max
          }, extraParams),
          success: function (data) {
            var parsed = options.parse && options.parse(data) || parse(data);
            cache.add(term, parsed);
            success(term, parsed);
          }
        });
      } else {
        // if we have a failure, we need to empty the list -- this prevents the the [TAB] key from selecting the last successful match
        select.emptyList();
        failure(term);
      }
    };

    function parse(data) {
      var parsed = [];
      var rows = data.split("\n");
      for (var i = 0; i < rows.length; i++) {
        var row = $.trim(rows[i]);
        if (row) {
          row = row.split("|");
          parsed[parsed.length] = {
            data: row,
            value: row[0],
            result: options.formatResult && options.formatResult(row, row[0]) || row[0]
          };
        }
      }
      return parsed;
    };

    function stopLoading() {
      $input.removeClass(options.loadingClass);
    };

  };

  $.Autocompleter.defaults = {
    inputClass: "ac_input",
    resultsClass: "ac_results",
    loadingClass: "ac_loading",
    minChars: 1,
    delay: 400,
    matchCase: false,
    matchSubset: true,
    matchContains: false,
    cacheLength: 10,
    max: 100,
    mustMatch: false,
    extraParams: {},
    selectFirst: true,
    formatItem: function (row) {
      return row[0];
    },
    formatMatch: null,
    autoFill: false,
    width: 0,
    multiple: false,
    multipleSeparator: ", ",
    highlight: function (value, term) {
      return value.replace(new RegExp("(?![^&;]+;)(?!<[^<>]*)(" + term.replace(/([\^\$\(\)\[\]\{\}\*\.\+\?\|\\])/gi, "\\$1") + ")(?![^<>]*>)(?![^&;]+;)", "gi"), "<strong>$1</strong>");
    },
    scroll: true,
    scrollHeight: 180
  };

  $.Autocompleter.Cache = function (options) {

    var data = {};
    var length = 0;

    function matchSubset(s, sub) {
      if (!options.matchCase) s = s.toLowerCase();
      var i = s.indexOf(sub);
      if (options.matchContains == "word") {
        i = s.toLowerCase().search("\\b" + sub.toLowerCase());
      }
      if (i == -1) return false;
      return i == 0 || options.matchContains;
    };

    function add(q, value) {
      if (length > options.cacheLength) {
        flush();
      }
      if (!data[q]) {
        length++;
      }
      data[q] = value;
    }

    function populate() {
      if (!options.data) return false;
      // track the matches
      var stMatchSets = {},
      nullData = 0;

      // no url was specified, we need to adjust the cache length to make sure it fits the local data store
      if (!options.url) options.cacheLength = 1;

      // track all options for minChars = 0
      stMatchSets[""] = [];

      // loop through the array and create a lookup structure
      for (var i = 0, ol = options.data.length; i < ol; i++) {
        var rawValue = options.data[i];
        // if rawValue is a string, make an array otherwise just reference the array
        rawValue = (typeof rawValue == "string") ? [rawValue] : rawValue;

        var value = options.formatMatch(rawValue, i + 1, options.data.length);
        if (value === false) continue;

        var firstChar = value.charAt(0).toLowerCase();
        // if no lookup array for this character exists, look it up now
        if (!stMatchSets[firstChar]) stMatchSets[firstChar] = [];

        // if the match is a string
        var row = {
          value: value,
          data: rawValue,
          result: options.formatResult && options.formatResult(rawValue) || value
        };

        // push the current match into the set list
        stMatchSets[firstChar].push(row);

        // keep track of minChars zero items
        if (nullData++ < options.max) {
          stMatchSets[""].push(row);
        }
      };

      // add the data items to the cache
      $.each(stMatchSets, function (i, value) {
        // increase the cache size
        options.cacheLength++;
        // add to the cache
        add(i, value);
      });
    }

    // populate any existing data
    setTimeout(populate, 25);

    function flush() {
      data = {};
      length = 0;
    }

    return {
      flush: flush,
      add: add,
      populate: populate,
      load: function (q) {
        if (!options.cacheLength || !length) return null;
        /* 
         * if dealing w/local data and matchContains than we must make sure
         * to loop through all the data collections looking for matches
         */
        if (!options.url && options.matchContains) {
          // track all matches
          var csub = [];
          // loop through all the data grids for matches
          for (var k in data) {
            // don't search through the stMatchSets[""] (minChars: 0) cache
            // this prevents duplicates
            if (k.length > 0) {
              var c = data[k];
              $.each(c, function (i, x) {
                // if we've got a match, add it to the array
                if (matchSubset(x.value, q)) {
                  csub.push(x);
                }
              });
            }
          }
          return csub;
        } else
        // if the exact item exists, use it
        if (data[q]) {
          return data[q];
        } else if (options.matchSubset) {
          for (var i = q.length - 1; i >= options.minChars; i--) {
            var c = data[q.substr(0, i)];
            if (c) {
              var csub = [];
              $.each(c, function (i, x) {
                if (matchSubset(x.value, q)) {
                  csub[csub.length] = x;
                }
              });
              return csub;
            }
          }
        }
        return null;
      }
    };
  };

  $.Autocompleter.Select = function (options, input, select, config) {
    var CLASSES = {
      ACTIVE: "ac_over"
    };

    var listItems,
    active = -1,
      data,
      term = "",
      needsInit = true,
      element,
      list;

    // Create results
    function init() {
      if (!needsInit) return;
      element = $("<div/>").hide().addClass(options.resultsClass).css("position", "absolute")
      //.attr('id', 'benjamin')
      .appendTo(document.body);

      list = $("<ul/>").appendTo(element).mouseover(function (event) {
        if (target(event).nodeName && target(event).nodeName.toUpperCase() == 'LI') {
          active = $("li", list).removeClass(CLASSES.ACTIVE).index(target(event));
          $(target(event)).addClass(CLASSES.ACTIVE);
        }
      }).click(function (event) {
        $(target(event)).addClass(CLASSES.ACTIVE);
        select();
        // TODO provide option to avoid setting focus again after selection? useful for cleanup-on-focus
        input.focus();
        return false;
      }).mousedown(function () {
        config.mouseDownOnSelect = true;
      }).mouseup(function () {
        config.mouseDownOnSelect = false;
      });

      if (options.width > 0) element.css("width", options.width);

      needsInit = false;
    }

    function target(event) {
      var element = event.target;
      while (element && element.tagName != "LI")
      element = element.parentNode;
      // more fun with IE, sometimes event.target is empty, just ignore it then
      if (!element) return [];
      return element;
    }

    function moveSelect(step) {
      listItems.slice(active, active + 1).removeClass(CLASSES.ACTIVE);
      movePosition(step);
      var activeItem = listItems.slice(active, active + 1).addClass(CLASSES.ACTIVE);
      if (options.scroll) {
        var offset = 0;
        listItems.slice(0, active).each(function () {
          offset += this.offsetHeight;
        });
        if ((offset + activeItem[0].offsetHeight - list.scrollTop()) > list[0].clientHeight) {
          list.scrollTop(offset + activeItem[0].offsetHeight - list.innerHeight());
        } else if (offset < list.scrollTop()) {
          list.scrollTop(offset);
        }
      }
    };

    function movePosition(step) {
      active += step;
      if (active < 0) {
        active = listItems.size() - 1;
      } else if (active >= listItems.size()) {
        active = 0;
      }
    }

    function limitNumberOfItems(available) {
      return options.max && options.max < available ? options.max : available;
    }

    function fillList() {
      list.empty();
      var max = limitNumberOfItems(data.length);
      for (var i = 0; i < max; i++) {
        if (!data[i]) continue;
        var formatted = options.formatItem(data[i].data, i + 1, max, data[i].value, term);
        if (formatted === false) continue;
        var li = $("<li/>").html(options.highlight(formatted, term)).addClass(i % 2 == 0 ? "ac_even" : "ac_odd").appendTo(list)[0];
        $.data(li, "ac_data", data[i]);
      }
      listItems = list.find("li");
      if (options.selectFirst) {
        listItems.slice(0, 1).addClass(CLASSES.ACTIVE);
        active = 0;
      }
      // apply bgiframe if available
      if ($.fn.bgiframe) list.bgiframe();
    }

    return {
      display: function (d, q) {
        init();
        data = d;
        term = q;
        fillList();
      },
      next: function () {
        moveSelect(1);
      },
      prev: function () {
        moveSelect(-1);
      },
      pageUp: function () {
        if (active != 0 && active - 8 < 0) {
          moveSelect(-active);
        } else {
          moveSelect(-8);
        }
      },
      pageDown: function () {
        if (active != listItems.size() - 1 && active + 8 > listItems.size()) {
          moveSelect(listItems.size() - 1 - active);
        } else {
          moveSelect(8);
        }
      },
      hide: function () {
        element && element.hide();
        listItems && listItems.removeClass(CLASSES.ACTIVE);
        active = -1;
      },
      visible: function () {
        return element && element.is(":visible");
      },
      current: function () {
        return this.visible() && (listItems.filter("." + CLASSES.ACTIVE)[0] || options.selectFirst && listItems[0]);
      },
      show: function () {
        var offset = $(input).offset();
        element.css({
          width: typeof options.width == "string" || options.width > 0 ? options.width : $(input).width(),
          top: offset.top + input.offsetHeight,
          left: offset.left
        }).show();
        if (options.scroll) {
          list.scrollTop(0);
          list.css({
            maxHeight: options.scrollHeight,
            overflow: 'auto'
          });

          if ($.browser.msie && typeof document.body.style.maxHeight === "undefined") {
            var listHeight = 0;
            listItems.each(function () {
              listHeight += this.offsetHeight;
            });
            var scrollbarsVisible = listHeight > options.scrollHeight;
            list.css('height', scrollbarsVisible ? options.scrollHeight : listHeight);
            if (!scrollbarsVisible) {
              // IE doesn't recalculate width when scrollbar disappears
              listItems.width(list.width() - parseInt(listItems.css("padding-left")) - parseInt(listItems.css("padding-right")));
            }
          }

        }
      },
      selected: function () {
        var selected = listItems && listItems.filter("." + CLASSES.ACTIVE).removeClass(CLASSES.ACTIVE);
        return selected && selected.length && $.data(selected[0], "ac_data");
      },
      emptyList: function () {
        list && list.empty();
      },
      unbind: function () {
        element && element.remove();
      }
    };
  };

  $.fn.selection = function (start, end) {
    if (start !== undefined) {
      return this.each(function () {
        if (this.createTextRange) {
          var selRange = this.createTextRange();
          if (end === undefined || start == end) {
            selRange.move("character", start);
            selRange.select();
          } else {
            selRange.collapse(true);
            selRange.moveStart("character", start);
            selRange.moveEnd("character", end);
            selRange.select();
          }
        } else if (this.setSelectionRange) {
          this.setSelectionRange(start, end);
        } else if (this.selectionStart) {
          this.selectionStart = start;
          this.selectionEnd = end;
        }
      });
    }
    var field = this[0];
    if (field.createTextRange) {
      var range = document.selection.createRange(),
        orig = field.value,
        teststring = "<->",
        textLength = range.text.length;
      range.text = teststring;
      var caretAt = field.value.indexOf(teststring);
      field.value = orig;
      this.selection(caretAt, caretAt + textLength);
      return {
        start: caretAt,
        end: caretAt + textLength
      }
    } else if (field.selectionStart !== undefined) {
      return {
        start: field.selectionStart,
        end: field.selectionEnd
      }
    }
  };

})(jQuery); 
```

# jquery - MooTools 中的 jQuery stop()

> ID：12534691
> 
> 赞同：1
> 
> 时间：2012-09-21T16:46:53.983
> 
> 标签：jquery, jquery-animate, mootools, porting

我有兴趣将一个项目从 jquery 移植到 mootools 来学习这个库。

一切都已完成，但我遗漏了一行，这让我的项目的行为有点出乎意料。这是行：

```
slideInfo.stop(true, true); 
```

在 jQuery 中，此行停止元素当前正在运行的动画，第一个参数指示也删除排队的动画，第二个参数指示立即完成当前动画。

我一直在研究 MooTools 文档，但我找不到移植这种行为的方法。是否有任何具有 MooTools 经验的人能够为我指明正确的方向？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:29:24.617

Look into MooTools FX class. This handle a lot of the animation components [http://mootools.net/docs/core/Fx/Fx](http://mootools.net/docs/core/Fx/Fx) I think cancel() is what you may need

# visual-studio - 如何阻止 Visual Studio 单击打开文件？

> ID：12534694
> 
> 赞同：326
> 
> 时间：2012-09-21T16:47:01.830
> 
> 标签：visual-studio

在我的 Visual Studio 2012 解决方案资源管理器中，当我单击一个文件名时，它会打开它。这与 Visual Studio 2010 不同（需要双击）。有没有办法让双击“查看文件”命令？

* * *

## 回答 #1

> 赞同：585
> 
> 时间：2012-09-21T16:59:48.113

这称为预览选项卡功能。要更改该行为，请访问：

工具 -> 选项 -> 环境 -> 选项卡和窗口

然后查找“预览选项卡”部分，并取消选中其中的选项：

![选项窗口 > 环境选项 > 选项卡和 Windows 子选项 > 预览选项卡部分](../Images/32de666bf48a087e6894368defcf7498.png)

* * *

## 回答 #2

> 赞同：159
> 
> 时间：2013-08-28T15:21:52.640

# 选项 1：在解决方案资源管理器中使用图标

您可以使用“预览所选项目”按钮在解决方案资源管理器中启用或禁用该功能。

![在此处输入图像描述](../Images/a39b1a5418657602e19c4f548fe7ef92.png)

图标`Tab`右对齐。

# 选项 2：使用选项窗口

您可以通过进入`Tools > Options`然后启用或禁用该功能`Environment > Tabs and Windows`。

[![在此处输入图像描述](../Images/2310a13fb09f8d306955af800c5bd2fb.png)](https://i.stack.imgur.com/V3Y3v.png)

* * *

## 回答 #3

> 赞同：26
> 
> 时间：2016-02-07T17:19:07.720

VS 2015 中缺少橡胶靴答案中提到的**预览选项卡**文本中的单击打开文件。神秘的是，搜索“单击”仍然会显示**环境 > 选项卡和 Windows**选项。

因此对于 VS2015 和 VS2017，请单击 Vinicius 答案中的按钮，或取消选中下面屏幕截图中显示的**在解决方案资源管理器中预览选定文件框。**

[![在此处输入图像描述](../Images/3125747e5edacab0fe1ab868c3d6be54.png)](https://i.stack.imgur.com/5vh8L.png)

* * *

## 回答 #4

> 赞同：15
> 
> 时间：2016-03-16T22:06:10.160

在 Visual Studio 12/13 中，最简单的方法是在快速搜索中键入“单击”，然后选择选项卡和窗口。

并在选项卡和 Windows 对话框中，取消选中“在解决方案资源管理器中预览选定的文件”

[![在此处输入图像描述](../Images/5618880c78210dee84c73e10b74c93ef.png)](https://i.stack.imgur.com/OPIfh.png)

[![](../Images/bbd321bd534667d48fe0fa3e0645af5e.png)](https://i.stack.imgur.com/wTa6g.png)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2016-03-11T13:49:44.357

快捷方式`Ctrl+Alt+Home`。

如果您在刚刚打开的文档中按下它，它将永久打开。

项目->右键单击->打开方式->源代码（文本）编辑器->按设置为默认按钮

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2019-08-20T17:17:16.047

它不再存在于**VS2019**中。您可以通过解决方案资源管理器中的“预览选定项目”启用/禁用它。

[![单击以预览源](../Images/773e9c254cc9d71999e7cfdba93f12a0.png)](https://i.stack.imgur.com/ZUZKC.png) [![Visual Studio 2019 编辑器设置](../Images/235fcd3ec16902bcae0e11f5a0424797.png)](https://i.stack.imgur.com/AUCOU.png)

# android - HttpClient 连接到 Https 服务器

> ID：12534697
> 
> 赞同：1
> 
> 时间：2012-09-21T16:47:20.640
> 
> 标签：android, https

通过跳过 SSL 证书连接到 https 服务器时（我的意思是允许所有主机）。登录到这样的 https 服务器后，我们是否需要每次都登录才能触发 get 或 post 请求。

我正在android中尝试这个。任何好的指针都会有所帮助。

使用 httpclient 登录到 https 服务器（通过允许全部跳过 SSL）在登录后触发简单的 Get 请求。

对于这个简单的场景，是否有任何示例代码库。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:01:06.933

首先，您必须将代码放在异步任务中，因为网络调用不在主线程上运行。

然后你可以像这样使用它：

```
private RegistrationInfo AsyncRegisterDevice(
                AndroidDeviceInfo deviceInfo, NetworkIdentification networkId, long NMEC) {
            RegistrationInfo reqResp = new Objects().new RegistrationInfo();

            try {

                JSONStringer deviceRegistration = new JSONStringer().object()
                        .key("DeviceInfo").object().key("androidId")
                        .value(deviceInfo.androidId).key("imei")
                        .value(deviceInfo.imei).key("mac")
                        .value(deviceInfo.mac).key("brand")
                        .value(deviceInfo.brand).key("product")
                        .value(deviceInfo.product).key("model")
                        .value(deviceInfo.model).key("manufacturer")
                        .value(deviceInfo.manufacturer).key("device")
                        .value(deviceInfo.device).key("serial")
                        .value(deviceInfo.serial).key("carrierNumber")
                        .value(deviceInfo.carrierNumber).endObject()
                        .key("UserIdentification").object().key("userName")
                        .value(networkId.username).key("password")
                        .value(networkId.password).endObject()
                        .key("nmec").value(NMEC).endObject();

                HttpPost request = new HttpPost(hostProtocol + "://"
                        + hostAddress + "/Services/Register.svc/Register");
                request.setHeader("Accept", "application/json");
                request.setHeader("Content-Type", "application/json");

                StringEntity requestEntity = new StringEntity(
                        deviceRegistration.toString());

                request.setEntity(requestEntity);

                DefaultHttpClient httpClient = (DefaultHttpClient) CSRHttpClient
                        .getNewHttpClient();

                String message = new String();
                HttpEntity responseEntity = null;

                try {
                    HttpResponse httpResponse = httpClient.execute(request);
                    responseEntity = httpResponse.getEntity();
                } catch (Exception ex) {
                    message = ex.getMessage();
                    android.util.Log.e("CSR", message);
                    return new Objects().new RegistrationInfo();
                }

                if (responseEntity == null)
                    return reqResp;

                char[] buffer = new char[(int) responseEntity
                        .getContentLength()];
                InputStream stream = responseEntity.getContent();
                InputStreamReader reader = new InputStreamReader(stream);
                reader.read(buffer);
                stream.close();

                JSONObject jsonRegInfo = new JSONObject(new String(buffer));

                long androidId = jsonRegInfo.getLong("androidRegistrationId");
                long userId = jsonRegInfo.getLong("userRegistrationId");
                String token = jsonRegInfo.get("registrationToken").toString();

                reqResp.androidRegistrationId = androidId;
                reqResp.registrationToken = token;
                reqResp.userRegistrationId = userId;

            } catch (JSONException jsonEx) {
                String message = jsonEx.getMessage();
            }

            catch (NullPointerException n) {
                String message = n.getMessage();
            } catch (Exception ex) {
                String message = ex.getMessage();
            }
            return reqResp;
        }
    } 
```

此代码向 WCF Web 服务发出 JSon 请求并获得 JSon 响应，该响应最终被解析为特定对象，然后返回。

```
public class CSRHttpClient {

    public static HttpClient getNewHttpClient()
    {
        try
        {
            KeyStore trustStore = KeyStore.getInstance(KeyStore.getDefaultType());
            trustStore.load(null, null);

            SSLSocketFactory sf = new CSRSSLSocketFactory(trustStore);
            sf.setHostnameVerifier(SSLSocketFactory.ALLOW_ALL_HOSTNAME_VERIFIER);

            HttpParams params = new BasicHttpParams();
            HttpProtocolParams.setVersion(params, HttpVersion.HTTP_1_1);
            HttpProtocolParams.setContentCharset(params, HTTP.UTF_8);

            SchemeRegistry registry = new SchemeRegistry();
            registry.register(new Scheme("http", PlainSocketFactory.getSocketFactory(), 80));
            registry.register(new Scheme("https", sf, 443));

            ClientConnectionManager ccm = new ThreadSafeClientConnManager(params, registry);

            return new DefaultHttpClient(ccm, params);
        } catch (Exception ex)
        {
            return new DefaultHttpClient();
        }

    }

} 
```

此类仅用于实例化自定义套接字工厂，它允许接受所有有效和无效的服务器证书。不建议在敏感信息服务/传输上采用此类做法，因为接受所有证书为有效证书允许中间人攻击，就像其他一些漏洞一样。

希望这对您有所帮助。

祝你好运。

# objective-c - UIPickerView 在滚动之前不会重新加载

> ID：12534698
> 
> 赞同：0
> 
> 时间：2012-09-21T16:47:25.060
> 
> 标签：objective-c, ios

当我更改我的picker1时，它应该重新加载我的picker2，但只有在我滚动它时才会发生。我能做些什么？谢谢！

```
 @implementation ViewController

    @synthesize picker1, array1, arrayApple, arraySamsung, picker2, array2;

    - (void)viewDidLoad
    {
        [super viewDidLoad];

        array1 = [[NSMutableArray alloc] initWithObjects:@"Apple", @"Samsung",nil];
        arrayApple = [[NSMutableArray alloc] initWithObjects: @"iPhone 5", @"iPad", @"iPod Touch", @"MacBook Pro", nil];
        arraySamsung = [[NSMutableArray alloc] initWithObjects: @"Galaxy Tab", @"Galaxy S3", @"Galaxy S", @"Galaxy 5", nil];

        self.array2 = self.arrayApple;

        [picker1 reloadAllComponents];
        [picker2 reloadAllComponents];

        // Do any additional setup after loading the view, typically from a nib.
    }

    - (void)viewDidUnload
    {
        [super viewDidUnload];
        // Release any retained subviews of the main view.
    }

    //Picker View Methods

    - (void)pickerView:(UIPickerView *)pickerView didSelectRow:(NSInteger)row inComponent:(NSInteger)component {
        //NSLog(@"Selected Index: %@. Index of selected color: %i", [array1 objectAtIndex:row], row);

        if(pickerView == self.picker1) {
            if(row == 1) {
                [self.array2 removeAllObjects];
                self.array2 = self.arraySamsung;
                [picker2 reloadAllComponents];
                NSLog(@"%@", picker2);
            }
        }

    }

    - (NSInteger)numberOfComponentsInPickerView:(UIPickerView *)pickerView{
        return 1;
    }
    - (NSInteger)pickerView:(UIPickerView *)pickerView numberOfRowsInComponent:(NSInteger)component {

        if (pickerView == self.picker1) {
            return [array1 count];
        } else {
            return [array2 count];
        }

        return 0;
    }

    - (NSString *)pickerView:(UIPickerView *)pickerView titleForRow:(NSInteger)row forComponent:(NSInteger)component {

        if (pickerView == self.picker1) {
            return [self.array1 objectAtIndex:row];
        } else {
            return [self.array2 objectAtIndex:row];
        }

    }

    - (BOOL)shouldAutorotateToInterfaceOrientation:(UIInterfaceOrientation)interfaceOrientation
    {
        return (interfaceOrientation != UIInterfaceOrientationPortraitUpsideDown);
    } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:23:59.737

**尝试这个**

```
if(row == 1) {
    self.array2 = self.arraySamsung;
} else {
    self.array2 = self.arrayApple;
}
    [picker2 reloadAllComponents];
    NSLog(@"%@", picker2); 
```

# windows - 为什么 npm 不尊重用户/全局 npmignore？

> ID：12534699
> 
> 赞同：7
> 
> 时间：2012-09-21T16:47:33.360
> 
> 标签：windows, npm

我的编辑器生成工作区文件和备份文件夹，这些文件对我编写的软件的用户不感兴趣。为了避免在每个项目中列出我的编辑器特定的忽略，我试图告诉 npm 在用户或全局级别忽略它们。

不幸的是，我没有运气这样做。在我的项目文件夹中运行`npm pack`，即使我先清除 npm 缓存，也包括工作区文件和**两兆字节**的备份文件。（对于一个只有*10 KB*代码的项目！）我尝试了`ignore`配置设置，一个 per-user`.npmignore`和一个 global `npmignore`，都没有效果。

这是我的输出`npm config ls -l`，剪断到相关部分：

```
; userconfig C:\Users\benblank\.npmrc
ignore = "__history *.epp"

; builtin config undefined
prefix = "C:\\Users\\benblank\\AppData\\Roaming\\npm"

; default values
globalignorefile = "C:\\Users\\benblank\\AppData\\Roaming\\npm\\etc\\npmignore"
userignorefile = "C:\\Users\\benblank\\.npmignore" 
```

`C:\Users\benblank\.npmignore`以及and的（相同）内容`C:\Users\benblank\AppData\Roaming\npm\etc\npmignore`：

```
__history
*.epp 
```

我究竟做错了什么？我正在运行 Windows 7、node@0.8.9 和 npm@1.1.61。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2016-12-28T04:07:47.070

npm 有一些与文件相关的主要[未解决问题。](https://github.com/npm/npm/issues?q=is%3Aissue%20is%3Aopen%20.npmignore)`npmignore`

值得庆幸的是，还有一个更好的选择！它是 package.json[文件](https://docs.npmjs.com/files/package.json#files)属性。

这是我的[delivr](https://github.com/sholladay/delivr/blob/d6feeb7a9d9e86d19b317077929989e41feb874f/package.json#L27)项目中的一个示例。

```
"files": [
  "lib",
  "index.js"
] 
```

为什么更好？

1.  内部机制使这种机制更加可靠。
2.  它是白名单而不是黑名单。通常，假设您使用`lib`文件夹（或类似文件夹），您想要*包含*的文件/目录比您想要*排除*的文件/目录少，所以它更简洁。
3.  它是[干燥](https://en.wikipedia.org/wiki/Don't_repeat_yourself)的。如果`.npmignore`文件存在，`npm`则不会咨询`.gitignore`忽略模式，这通常需要重叠和重复的信息。白名单不存在此问题。
4.  repo 中少了一个文件。`package.json`已经是定义您的包的清单，并且此配置存在于其中具有很大的意义。

# c# - 需要一些异步调用的单例类

> ID：12534705
> 
> 赞同：16
> 
> 时间：2012-09-21T16:47:47.137
> 
> 标签：c#, asynchronous

我有一个单例类，它加载了一些关于其构造的数据。问题是加载这些数据需要调用`async`方法，但构造函数不能`async`。

换句话说，我的班级具有以下结构：

```
public class Singleton
{
   private static Singleton instance;

   private Singleton() 
   {
       LoadData();
   }

   public static Singleton Instance
   {
      get 
      {
         if (instance == null)
         {
            instance = new Singleton();
         }
         return instance;
       }
    }
} 
```

`LoadData()`是一个`async`调用很多`async`函数以及初始化的函数。我怎样才能`LoadData()`正确调用，以便一切都正确初始化？

* * *

## 回答 #1

> 赞同：25
> 
> 时间：2015-11-22T12:32:41.930

***如果我们只让类的内部机制为我们工作，那么线程安全、异步单例***的解决方案实际上非常简单`Task`！

那么，如何`Task`工作？假设您有一个a 的*实例*，`Task<T>`而您`await`只使用了一次。现在任务被执行，`T`产生一个值并返回给你。如果您再次`await`使用*相同*的任务*实例*怎么办？在这种情况下，任务只是以完全同步的方式立即返回先前生成的值。

如果您*同时*从多个线程（通常会出现竞争条件）`await`执行相同的任务实例怎么办？好吧，第一个（因为会有*一个*首先到达那里）将执行任务代码，而其他人将等待处理结果。然后当结果产生时，所有的' 将同时完成（实际上）并返回值。**`await`**

 **所以`async`线程安全的单例的解决方案实际上非常简单：

```
public class Singleton
{
    private static readonly Task<Singleton> _getInstanceTask = CreateSingleton();

    public static Task<Singleton> Instance
    {
        get { return _getInstanceTask; }
    }

    private Singleton(SomeData someData)
    {
        SomeData = someData;
    }

    public SomeData SomeData { get; private set; }

    private static async Task<Singleton> CreateSingleton()
    {
        SomeData someData = await LoadData();
        return new Singleton(someData);
    }
} 
```

现在您可以通过这种方式访问​​单例：

```
Singleton mySingleton = await Singleton.Instance; 
```

或者

```
Singleton mySingleton = Singleton.Instance.Result; 
```

或者

```
SomeData mySingletonData = (await Singleton.Instance).SomeData; 
```

或者

```
SomeData mySingletonData = Singleton.Instance.Result.SomeData; 
```

在这里阅读更多：[异步单例初始化](http://www.laserbrain.se/post/2015/11/22/async-singleton-initialization.aspx)

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-09-21T16:52:20.787

> 问题是加载这些数据需要调用异步方法，但是构造函数不能是异步的。

虽然不能使构造函数本身异步，但*可以*从构造函数中调用异步方法。你只是不会立即得到结果。

如果异步方法返回`Task`or `Task<T>`，一旦异步操作完成，您始终可以在任务上使用延续来在类中设置数据，或者只是阻塞结果，具体取决于您的场景中最有意义的内容。在不了解构造此对象的要求的情况下，很难知道在这种情况下什么是合适的。

* * *

编辑：

考虑到上面列出的目标，一种选择是更改您的`Singleton`声明，以便检索 的`Instance`方法是一种方法，而不是属性。这将允许您使其异步：

```
public class Singleton
{
   private static Singleton instance;

   private Singleton() 
   {
          // Don't load the data here - will be called separately
   }

   public static async Task<Singleton> GetInstance()
   {
         if (instance == null)
         {
            instance = new Singleton();
            await instance.LoadData();
         }

         return instance;
    }
} 
```

这将允许您`await`在调用中使用以实际检索实例。这样做的好处是它确实非常清楚地表明您正在调用异步操作，并且您将正确处理结果，因为结果将像任何其他异步方法一样返回。

但是请注意，这不是线程安全的（尽管原来的也不是），所以如果您要从多个线程中使用这个 Singleton，您可能需要重新考虑整体设计。

另一种选择是让您的`Singleton`类不会自动加载数据。改为使从类中检索数据的方法是异步的。这提供了一些真正的优势，因为使用可能更加标准，并且您可以更轻松地支持来自多个线程的调用（因为您可以控制数据加载过程），而不是通过制作类实例的异步访问。

* * *

## 回答 #3

> 赞同：9
> 
> 时间：2012-09-21T17:25:47.053

您可以为此使用[异步延迟初始化](http://nitoprograms.blogspot.com/2012/08/asynchronous-lazy-initialization.html)：

```
public class Singleton
{
  private static readonly AsyncLazy<Singleton> instance =
      new AsyncLazy<Singleton>(CreateAndLoadData);

  private Singleton() 
  {
  }

  // This method could also be an async lambda passed to the AsyncLazy constructor.
  private static async Task<Singleton> CreateAndLoadData()
  {
    var ret = new Singleton();
    await ret.LoadDataAsync();
    return ret;
  }

  public static AsyncLazy<Singleton> Instance
  {
    get { return instance; }
  }
} 
```

然后你可以像这样使用它：

```
Singleton singleton = await Singleton.Instance; 
```

使用的一个好处`AsyncLazy<T>`是它是线程安全的。但是，请注意，它始终在线程池线程上执行其委托。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T17:41:44.733

好吧，你想要异步初始化一个单例并没有多大意义。如果您只是想在初始化中调用一个返回 Task 的方法，您可以简单地执行以下操作：

```
var task = MyAsyncMethod();
task.Wait();
return task.Result; 
```

无需制作方法`async`。

但是，如果您想要将单例值作为任务，则可以这样使用 Lazy：

```
Lazy<Task<int>> l = new Lazy<Task<int>>(async () => { int i = await calculateNumber(); return i; }); 
```

此外，`Lazy<T>`是实现“单例”的首选方法。单例类很难正确（或很难*保持*正确）......**

# assembly - 了解汇编语言中的跳转 (TASM)

> ID：12534719
> 
> 赞同：0
> 
> 时间：2012-09-21T16:48:46.353
> 
> 标签：assembly, tasm

所以我很难理解跳跃的实际工作原理，

让我举个例子，如果DX的值> 5，我想要循环L1并跳转到L2，所以我这样做了，但是代码如何知道L2中必须读取多少行代码？

```
MOV DX,0
    MOV CX,10
L1:
    ADD DX,30H
    MOV AH,02H
    INT 21H
    SUB DX,30H
    ADD DX,1        
    CMP DX,5
    JA L2

LOOP L1 
```

如果我想执行多个操作，即 A、B、C，在跳转到 L2 之后，如何在第三次操作后终止 L2？

```
L2:
   A
   B
   C
   ;Go back into the Loop L1 , How can i terminate L2 here ? 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:55:03.017

我的 80x86 汇编内存有点旧（20 年），但我想如果你不修改 CX，你可以从 L2 调用 LOOP L1：代码。

如果您处于 LOOP 的末尾（因为 LOOP 递减 CX），如果您的 JA 到 L2 是在第 10 次完成的，它将不会返回到 L1。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T16:56:34.837

CPU 将读取并执行每条指令，一次一条。除非遇到修改流程的指令（例如您的跳转指令），否则控制流程将是线性的。

如果你想改变流程但又回到原来的位置，你必须使用`CALL`指令而不是跳转，然后在 CPU 执行`RET`指令时返回。

但是，如果您想转到示例的 L1 标签，您可以`JMP L1`在 L2 的末尾添加一条指令。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T17:04:52.423

我不知道这种语言的细节，但所有的汇编语言基本上都是一样的：

*   如果 L2 代码是一个函数，即如果您想在执行完 L2 后返回调用 L2 的函数（调用者函数），您希望使用 CALL 到达 L2 的第一条指令。L2 中的最后一条指令将是返回。

*   相反，如果在 L2 之后您总是想回到 L1 的开头，那么您必须使用无条件跳转到 L2 代码末尾的标签 L1。

通常，在大多数汇编语言中，您只需 JUMP 或 CALL 到标签：如果您使用的 JUMP 或 CALL 指令依赖于相对偏移量而不是绝对地址，汇编程序会为您计算出多少正或负行偏移量。如果该偏移量太大，汇编器将在汇编时生成错误消息。

# asp.net - web.config 和 machine.config 之间的区别？

> ID：12534723
> 
> 赞同：14
> 
> 时间：2012-09-21T16:48:54.340
> 
> 标签：asp.net, iis

`web.config`和 和有什么不一样`machine.config`？

我读过：-

> web.config 文件指定特定 Web 应用程序的配置设置，位于应用程序的根目录中；machine.config 文件指定 Web 服务器上所有网站的配置设置，位于 $WINDOWSDIR$\Microsoft.Net\Framework\Version\Config 中。

有什么我遗漏的或任何其他技术方面的吗？我想更多地了解这两个文件。

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-21T16:57:52.017

每个 CLR 版本都有一个`machine.config`文件以及一个附加`web.config`文件，我将其称为“机器级 web.config 文件”。

此外，正如您所注意到的，每个 Web 应用程序还有一个`web.config`文件。Web 应用程序中的目录也可以包含`web.config`文件。

现在，关键是配置文件相互继承。这意味着，Web 应用程序将读取`machine.config`文件和机器级`web.config`文件（针对其给定的框架版本）中定义的设置，以及它自己的`web.config`文件。

在 中定义事物的一个常见用例是`machine.config`在服务器上的许多应用程序之间共享值，例如连接字符串或 SMTP 服务器设置等。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-09-21T16:57:26.180

这些是一些最重要的细节；尽管实际上，`machine.config`它超越了 ASP.NET 本身的简单配置。`machine.config`您应该查看另一个文件，该文件（我认为）与;位于同一位置 那是 'root' `web.config`，它介于`machine.config`特定于站点的`web.config`文件之间，当然，它是特定于 ASP.NET 的。

您在 IIS 管理控制台中的服务器级别更改的某些设置是在根目录中执行的`web.config`。

请注意，此层次结构是每个 .NET 版本的；（2.0有一个；4.0有自己的）

另一个注意事项：您可以`web.config`在站点根目录和/或子应用程序中拥有子文件，从而进一步修改“基础”。

最后，一个警告：并非所有设置都可以在子级 web.config 文件中覆盖。可以（有些是默认情况下）在此处描述的层次结构的任何级别锁定某些设置。

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2013-12-24T07:09:56.400

让我澄清一下：- 在 ASP.NET 中，有一个配置文件层次结构，而 machine.config 文件位于根目录，这意味着 machine.config 文件包含应用于您创建的每个 Web 应用程序的配置设置。它存在于 Windows/Microsoft .NET/Framework/[version]/config 你会在相同的物理路径中找到一个 web.config 文件（我给它命名为 A）。这个 web.config 文件继承了 machine.config 的配置设置。现在你有你的应用程序文件夹，你有 web.config（在根级别）。此 web.config（我将其命名为 B）从 A 继承配置设置。如果您在应用程序文件夹的子目录中有 web.config，则子目录 web.config 从 B 继承配置设置，这就是梯子下降的方式

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-09-21T17:01:04.337

这`machine.config`是您系统上的终极主配置文件，具有许多默认设置。当您使用按级联顺序完成的 web.config 文件时，您实际上是在用新设置覆盖这些设置。

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2020-10-05T12:12:36.073

**机器配置**

*   这会在您安装 Visual Studio 时自动安装。网。
*   这也称为机器级配置文件。
*   一台服务器上只存在一个 machine.config 文件。
*   此文件位于配置层次结构中的最高级别。

**网络配置**

*   这是在您创建 ASP.Net Web 应用程序项目时自动创建的。
*   这也称为应用程序级配置文件。
*   此文件从 machine.config 继承设置

# jquery - jQuery 插件模板可链接性与每个就绪

> ID：12534724
> 
> 赞同：0
> 
> 时间：2012-09-21T16:48:56.497
> 
> 标签：jquery, jquery-plugins, each, ready, chainability

我正在编写一个 jQuery 插件，并且我只想将该插件附加到**选定的元素，只有**当它存在时，**没有**任何点击或其他事件。

这个插件有其他链式函数，我想在这个插件附加到那个元素时调用这个函数。

我想**将该元素作为对象传递**给链式函数。

但是我收到此错误消息，并且该插件当然不起作用！无论我使用`each`还是`ready`在该插件中，我都会收到相同的错误

```
return this.each(function() {...}

return this.ready(function() {...) 
```

> 类型错误：$this.function_1 不是函数

我该如何做对？

jQuery,

```
$(document).ready(function(){

        $('.box').selection();

    });

    (function($){

        $.fn.extend({ 

            selection: function(options) {

                var defaults = {
                    element:    "selection"
                }

                var options =  $.extend(defaults, options);
                var o = options;

                // Must declare a this variable outside the core if you have other children functions inside this plugin.
                var $this = this;

                return this.each(function() {

                    // Set the object.
                    var object = $(this);
                    //alert(object.html());

                    // Attach the functions.
                    $this.function_1(object);
                    $this.function_2(object);

                });

                // function_1
                $this.function_1 = function(object)
                {
                    alert('function 1');

                }

                // function_2
                $this.function_2 = function(object)
                {
                    alert('function 2');
                }

            }
        });

    })(jQuery); 
```

html,

```
<div class="box">

    <ul class="selection">
        <li>1</li>
        <li>2</li>
        <li>3</li>
    </ul>

</div> 
```

在[jsfiddle](http://jsfiddle.net/SwDwU/1/)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:03:45.800

您`return`在声明函数之前调用。将函数声明移到调用上方`return`，它就可以工作了。

# c# - linq to sql OnValidate() 异常未被用户代码处理

> ID：12534725
> 
> 赞同：0
> 
> 时间：2012-09-21T16:48:59.193
> 
> 标签：c#, linq-to-sql, exception-handling

```
public partial class TeamworkSurvey
{
    partial void OnValidate(System.Data.Linq.ChangeAction action)
    {
        if (true)
            throw new ArgumentException("No matter what you enter is invalid");
    }
} 
```

很简单。当此方法返回时，它会抛出“ArgumentException 未被用户代码处理”。我应该怎么办？

# python - 谷歌应用引擎 GQL 查询键

> ID：12534728
> 
> 赞同：0
> 
> 时间：2012-09-21T16:49:03.993
> 
> 标签：python, database, google-app-engine, gql

我真的不明白这是`key.from_path()`做什么的。

如果你能解释得更好更简洁，那么[这里](https://developers.google.com/appengine/docs/python/datastore/keyclass)。

另外，这个`parent`参数让我很感兴趣。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:57:18.653

数据存储中的每个项目都有一个密钥。

```
k = Key.from_path('User', 'Boris', 'Address', 9876) 
```

您可以创建该键，然后使用它来检索数据存储中具有该键的对象，也可以使用该键将对象保存到数据存储中以供以后检索。

address_k 是此操作后的键。

```
address_k = db.Key.from_path('Employee', 'asalieri', 'Address', 1)
address = db.get(address_k) 
```

然后第二行获取具有该键的数据存储对象。

Parent 只是说这个对象是另一个对象的子对象。因此，当您设置父级时，它也成为键的一部分。

```
address = Address(parent=employee) 
```

您可以有多个地址对象，所有地址对象都具有相同的父级员工。您的员工可能有很多家！阅读：[https ://developers.google.com/appengine/docs/python/datastore/entities#Ancestor_Paths](https://developers.google.com/appengine/docs/python/datastore/entities#Ancestor_Paths)

# migration - open laszlo 中 getMCRef().attachAudio() 的等价物是什么？

> ID：12534729
> 
> 赞同：1
> 
> 时间：2012-09-21T16:49:05.937
> 
> 标签：migration, openlaszlo, lzx

我想知道 openlaszlo 4.9 中 getMCRef().attachAudio() 的等价物。早些时候，我使用此方法将音频输入获取到视图以根据音频进行置换。但在最近的版本中，我尝试将它附加到精灵上，但它不起作用。有任何想法吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-25T19:03:10.267

此代码片段应该可以帮助您入门，它向您展示了如何在 OpenLaszlo 4.9.0 中从 OpenLaszlo SWF8、SWF9 和 SWF10 运行时访问 Flash 麦克风和相机对象：

```
<class name="mediamanager">

  <when property="$as3"><!-- SWF9, SWF10 -->

    <passthrough>
      import flash.media.*;
    </passthrough>

    <!---
    Gets a reference to the camera.

    @returns object: reference to the camera object.
    -->
    <method name="getMicrophone">
      return flash.media.Microphone.getMicrophone();
    </method>

    <method name="getNumMics">
      return flash.media.Microphone.names.length;
    </method>   

    <method name="getMicNames">
      return flash.media.Microphone.names;
    </method>           

  </when>

  <when property="$as2"><!-- SWF8 -->

    <!---
    Gets a reference to the camera.

    @returns object: reference to the camera object.
    -->
    <method name="getMicrophone">
      return Microphone.get();
    </method>

   <method name="getNumMics">
     return Microphone.names.length;
   </method>        

   <method name="getMicNames">
      return Microphone.names;
   </method>        

</when> 
```

<when property="$as3"><!-- SWF9, SWF10 -->

```
<passthrough>
  import flash.media.*;
</passthrough>

<!---
Gets a reference to the camera.

@returns object: reference to the camera object.
-->
<method name="getCamera">
  return flash.media.Camera.getCamera();
</method>

<method name="getNumCams">
  return flash.media.Camera.names.length;
</method>   

<method name="getCamNames">
  return flash.media.Camera.names;
</method> 
```

</当>

<当属性="$as2">

```
 <!---
 Gets a reference to the camera.

 @returns object: reference to the camera object.
 -->
<method name="getCamera">
  return Camera.get();
</method>

<method name="getNumCams">
  return Camera.names.length;
</method>

<method name="getCamNames">
  return Camera.names;
</method> 
```

</当>

</class>

有关其属性和方法的完整详细信息，请参阅 Flash Microphone 和 Camera 对象的 Flash 文档。此外，这不是在 OpenLaszlo 中访问麦克风和摄像头的官方方式，但我使用了它们，因为并非所有属性都可从 OpenLaszlo 摄像头和麦克风 API 获得，如果您想使用官方 API，请参阅官方类文档：

[http://www.openlaszlo.org/lps4.9/docs/reference/](http://www.openlaszlo.org/lps4.9/docs/reference/) - “音频视频”文件夹

# cmake - 运行纳米 | 带有cmake execute_process的grep命令？

> ID：12534730
> 
> 赞同：0
> 
> 时间：2012-09-21T16:49:09.613
> 
> 标签：cmake, command

> **可能重复：**
> [处理器功能的 CMake 测试](https://stackoverflow.com/questions/8994255/cmake-test-for-processor-feature)

我尝试使用 cmake execute_process 运行以下命令：

```
nm /home/cquiros/GOBLET/tools/3rdParty/shapelib/libshp.a | grep 'DBFReorderFields' 
```

但我总是命令找不到。这是代码：

```
SET (CMD "nm")
SET (CMDA "${SHAPELIB_LIBRARY} | grep 'DBFReorderFields'")

execute_process(COMMAND ${CMD} ${CMDA} RESULT_VARIABLE rv) 
```

${SHAPELIB_LIBRARY} = /home/cquiros/GOBLET/tools/3rdParty/shapelib/libshp.a 。结果应为空或“000000000000358d T DBFReorderFields”

知道如何使它工作吗？

# java - 显式注入标记为 @Component 的 bean

> ID：12534732
> 
> 赞同：3
> 
> 时间：2012-09-21T16:49:22.020
> 
> 标签：java, spring

因此，出于某种原因，我们项目的一半 bean 用 @Component 标记并注入到其他用 @Autowired 注解标记为 @Component 的对象中，而另一半用 appliciationContext.xml bean 声明和带有 ref beans 值的属性显式连接。

问题是，在那些 xml bean 声明中，我可以注入标记为 @Component 的对象之一吗？如果是这样，它的 bean 引用名称是什么？

例如;

有些类是这样注释的；

```
@Component
public class BeanAImpl{ ... } 
```

然后在 applicationContext.xml 中，其他类被显式连接，因为它们没有注释；

```
<bean id="beanB" class="com.myapp.BeanBImpl"></bean> 
```

我可以在 applicationContext.xml 中注入两种“类型”的 bean 吗？

```
<bean id="beanUser" class="com.myapp.BeanUserImpl">
    <property name="beanA">HOW_TO_GET_REF_TO_BEANA?</property>
    <property name="beanB"><ref bean="beanB"/></property>
</bean> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:08:35.390

`@Component`类型的默认名称`BeanAImpl`是`beanAImpl`，您可以在 XML 中使用它，就像手动声明的 bean 一样（还要注意`<property>`允许更短的语法）：

```
<property name="beanA" ref = "beanAImpl" /> 
```

或者，您可以将名称显式设置为`@Component("beanA")`.

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:23:43.927

这是春天的说法：

当一个组件作为扫描过程的一部分被自动检测到时，它的 bean 名称将由该扫描器已知的 BeanNameGenerator 策略生成。如果您不想依赖默认的 bean 命名策略，您可以提供自定义 bean 命名策略。首先，实现 BeanNameGenerator 接口，并确保包含一个默认的无参数构造函数。然后，在配置扫描器时提供完全限定的类名：

```
 <context:component-scan base-package="org.example"
                         name-generator="org.example.MyNameGenerator" /> 
```

默认实现只是以 loer 大小写开头的类名。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:54:02.337

而不是`@Component`，我认为您想使用`@Resource(name="your_id_here")`，然后您可以`<ref>`像使用 beanB 一样使用它。试一试。

来源：[http ://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s11.html#beans-resource-annotation](http://static.springsource.org/spring/docs/3.0.0.M3/reference/html/ch04s11.html#beans-resource-annotation)

# iphone - 将 Xcode 项目发送给某人时，随机编译错误？（版本 4.4 至 4.3）

> ID：12534733
> 
> 赞同：0
> 
> 时间：2012-09-21T16:49:23.063
> 
> 标签：iphone, objective-c, xcode

所以我确保没有引用，并且我的所有文件（iPad 应用程序）都在文件夹中。我压缩文件夹并将其发送给某人。当他们尝试运行时，他们会收到有关未定义方法的编译器错误。

前错误：

```
Property 'window' requires method 'window' to be defined - use @synthesize, @dynamic or provide a    method implementation in this class implementation

Property 'window' requires method 'setWindow:' to be defined - use @synthesize, @dynamic or provide a method implementation in this class implementation 
```

此外，该项目是在 Xcode 4.4 中创建和编写的，在那里运行良好，但正在发送到 Xcode 4.3 并使用 Xcode 4.3 打开。问题是不同的 Xcode 版本吗？如果不是，这还能是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-28T01:21:35.983

对于任何想知道的人，这纯粹是 Xcode 的版本问题。

从 4.3 开始，显然不再需要这些合成。

# iphone - 从 iOS 发布到 Facebook 时间线在第一次尝试时会提供 HTTP 400

> ID：12534736
> 
> 赞同：0
> 
> 时间：2012-09-21T16:49:39.517
> 
> 标签：iphone, ios, facebook

我正在按照 facebook SDK 上的教程进行操作：

[使用 ios SDK 登录 facebook](https://developers.facebook.com/docs/howtos/login-with-facebook-using-ios-sdk/ "使用 ios SDK 登录 facebook")

[发布到提要](https://developers.facebook.com/docs/howtos/publish-to-feed-ios-sdk/ "发布到提要")

一切似乎都正常，除了在测试我的应用程序时，我第一次尝试在 Facebook 墙上发帖时收到 HTTP 错误 400（或错误代码 5）。如果我在应用程序中再次按下“发布”按钮，第二次，一切似乎都正常。第一次尝试，用户被发送到 facebook 应用程序进行身份验证，然后切换回应用程序，然后给我 HTTP 400。第二次尝试，没有应用程序切换，消息按预期发布到 facebook 墙上.

我试图弄清楚为什么我的应用在第一次尝试时不会发布到墙上/时间线上。我的代码与教程中的代码相同。

编辑：

忘了提一下，我使用一个按钮来进行身份验证和发布到墙上 - 这是 IBAction 中的代码：

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];
    // The user has initiated a login, so call the openSession method
    // and show the login UX if necessary.
    [appDelegate openSessionWithAllowLoginUI:YES];

    [FBRequestConnection startWithGraphPath:@"me/feed" parameters:postParams HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection,id result,NSError *error)
    {

        NSString *alertText;

        if (error) {
             alertText = [NSString stringWithFormat:
                          @"error: domain = %@, code = %d", error.domain, error.code];
         } else {
             /*alertText = [NSString stringWithFormat:
                          @"Posted action, id: %@", [result objectForKey:@"id"]];*/
             alertText = @"Posted!";
         }
         // Show the result in an alert
        [[[UIAlertView alloc] initWithTitle:@"Facebook" message:alertText delegate:self cancelButtonTitle:@"OK!" otherButtonTitles:nil] show];
    }]; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T22:13:07.493

我用 mkral 的有用评论解决了这个问题 - 代码更改如下：

```
AppDelegate *appDelegate = [[UIApplication sharedApplication] delegate];

    if (FBSession.activeSession.isOpen) { //session is open so can post right away

        [FBRequestConnection startWithGraphPath:@"me/feed" parameters:postParams HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection,id result,NSError *error)
         {

             NSString *alertText;

             if (error) {
                 alertText = [NSString stringWithFormat:
                              @"error: domain = %@, code = %d", error.domain, error.code];
             } else {
                 alertText = @"Posted!";
             }
             // Show the result in an alert
             [[[UIAlertView alloc] initWithTitle:@"Facebook" message:alertText delegate:self cancelButtonTitle:@"OK!" otherButtonTitles:nil] show];
         }];

    }
    else //session isn't open so authenticate first, then can post when back to app through notification
    {
        NSLog(@"Facebook Active Session not open");
        // The user has initiated a login, so call the openSession method
        // and show the login UX if necessary.
        [appDelegate openSessionWithAllowLoginUI:YES];
    } 
```

所以我首先检查是否有一个活动会话 - 如果有我可以发布到墙上/时间轴，如果没有，我打开一个会话。然后我注册了一个通知（在 viewDidLoad 中），让我知道是否有会话更改（在这种情况下，如果会话打开了），然后它会在经过身份验证后发布到墙上。

```
- (void)viewDidLoad
{
    [super viewDidLoad];        

//register for the session change notification you defined in the app delegate (for example when session changes to logged in)
    [[NSNotificationCenter defaultCenter]
     addObserver:self
     selector:@selector(sessionStateChanged:)
     name:FBSessionStateChangedNotification
     object:nil];

}

- (void)sessionStateChanged:(NSNotification*)notification {
    if (FBSession.activeSession.isOpen) {

        [FBRequestConnection startWithGraphPath:@"me/feed" parameters:postParams HTTPMethod:@"POST" completionHandler:^(FBRequestConnection *connection,id result,NSError *error)
         {

             NSString *alertText;

             if (error) {
                 alertText = [NSString stringWithFormat:
                              @"error: domain = %@, code = %d", error.domain, error.code];
             } else {
                 alertText = @"Posted!";
             }
             // Show the result in an alert
             [[[UIAlertView alloc] initWithTitle:@"Facebook" message:alertText delegate:self cancelButtonTitle:@"OK!" otherButtonTitles:nil] show];
         }];

    }
} 
```

# jquery - 如何在 MVC 中绑定 HandsonTables

> ID：12534741
> 
> 赞同：2
> 
> 时间：2012-09-21T16:50:12.313
> 
> 标签：jquery, ajax, asp.net-mvc, handsontable

我正在使用 MVC4 开发一个 Web 应用程序。我在 UI 中有 HandsOnTable。我尝试使用 json 绑定数据，但不能。并且不告诉显示错误。这是代码片段

```
$.ajax({
            url: "/Customer/GetSpreadSheetGrid",
            type: "GET",
            dataType: "json",
            data: { customerId: customerID }
        })
            .success(function (result) {
    var vSpreadSheet = document.getElementById("SpreadSheetgrid");
        $("#SpreadSheetgrid").handsontable("loadData", result);
    })
    .fail(function (r, o) {
        alert("Failed : " + r.responseText);
    });
    } 
```

这是我的控制器方法

```
public JsonResult GetSpreadSheetGrid(int customerId)
    {
IEnumerable<tblCustomerSpreadsheetInfo> resResult = null;
// Calling SP
resResult = _customer.GetCustomerCustomInfoByCustomerID(customerId);
return Json(resResult, JsonRequestBehavior.AllowGet);
    } 
```

这段代码有什么错误。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-09T13:13:26.977

```
<div id="dataTable" class="dataTable"></div>    
$("#dataTable").handsontable({
       rows: 6,
       cols: 8,
       contextMenu: true,
       colHeaders: true
    });
    var url = "/Home/GridData";
    $.get(url, null, function (data) {
    $("#dataTable").handsontable("loadData", data);
    strong text}); 
```

这是 HomeController 中的方法

```
public JsonResult GridData()
        {
            var jsonData = new[]
                         {
                             new[] {"1", "4", "Is this a good question?"},
                             new[] {"2", "5", "Yes."},
                             new[] {"3", "6", "It is!"}
                        };

            return Json(jsonData, JsonRequestBehavior.AllowGet);
        } 
```

我用这段代码实现了将控制器方法绑定到掌上电脑。但我真的很难获取数据并将其作为 string[][] 传递给控制器​​方法。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-09T09:23:42.200

如下修改你的jquery ajax（在成功和失败函数中保留一个调试器。使用IE和Visual Studio调试它。如果有错误，你可以看到错误。

```
$.ajax({
        url: "/Customer/GetSpreadSheetGrid",
        type: "GET",
        data: { customerId: customerID },
        contentType: "application/json; charset=utf-8",
        success: function (_results) {
             debugger;
            var vSpreadSheet = document.getElementById("SpreadSheetgrid");
            $("#SpreadSheetgrid").handsontable("loadData", result);
        },
        error: function (_results, status) {
            debugger;
        }
    }); 
```

# c - 我需要在 C 中添加字符串字符。A + B 必须 = C。字面意思

> ID：12534744
> 
> 赞同：0
> 
> 时间：2012-09-21T16:50:31.250
> 
> 标签：c, computer-science

我正在编写一个今晚午夜到期的程序，我完全被卡住了。该程序是用 C 编写的，并以 SOS 的形式从用户那里获取输入，其中 S = 字符串，O = 运算符（IE '+'、'-'、'*'、'/'）。书中的输入输出示例如下：

输入> abc+aab

输出：abc + aab => bce

这是字面上的，而不是可变的。就像，a + a 必须 = b。

执行此操作的代码是什么？我将发布到目前为止的代码，但它所做的只是获取输入并将其划分为每个部分。

```
#include <stdio.h>
#include <string.h>

int main() {
  system("clear");
  char in[20], s1[10], s2[10], o[2], ans[15];

  while(1) {
    printf("\nInput> ");
    scanf("%s", in);
    if (in[0] == 'q' && in[1] == 'u' && in[2] == 'i' && in[3] == 't') {
      system("clear");
      return 0;
    }
    int i, hold, breakNum;
    for (i = 0; i < 20; i++) {
      if (in[i] == '+' || in[i] == '-' || in[i] == '/' || in[i] == '*') {
        hold = i;
      }
      if (in[i] == '\0') {
        breakNum = i;
      }
    }
    int j;
    for (j = 0; j < hold; j++) {
      s1[j] = in[j];
    }
    s1[hold] = '\0';
    o[0] = in[hold];
    o[1] = '\0';
    int k;
    int l = 0;
    for (k = (hold + 1); k < breakNum; k++) {
      s2[l] = in[k];
      l++;
    }
    s2[breakNum] = '\0';
    printf("%s %s %s =>\n", s1, o, s2);
  }
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:56:12.437

由于这是家庭作业，让我们专注于如何解决这个问题，而不是提供一堆我怀疑你的导师会皱眉的代码。

首先，不要在`main()`函数内部做所有事情。将其分解为较小的功能，每个功能都完成部分任务。

其次，将任务分解为其组件并写出伪代码：

```
while ( 1 )
{
    // read input "abc + def"
    // convert input into tokens "abc", "+", "def"
    // evaluate tokens 1 and 3 as operands ("abc" -> 123, "def" -> 456)
    // perform the operation indicated by token 2
    // format the result as a series of characters (579 -> "egi")
} 
```

最后，编写每个函数。当然，如果您在途中遇到障碍，请务必回来询问您的具体问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:38:47.363

根据您的示例，“a”的行为类似于 1，“b”的行为类似于 2，依此类推。鉴于此，您可以像这样对单个字符执行算术：

```
// Map character from first string to an integer.
int c1 = s1[j] - 'a' + 1;

// Map character from second string to an integer.
int c2 = s2[j] - 'a' + 1;

// Perform operation.
int result = c1 + c2;

// Map result to a character.
char c = result - 1 + 'a'; 
```

您必须添加一些内容：

*   您必须将它放在一个循环中，以便为字符串中的每个字符执行此操作。
*   您必须根据输入中指定的运算符来改变操作。
*   你必须对每个结果做一些事情，可能会打印出来。
*   你必须对超出字母表的结果做一些事情，比如“y+y”、“ab”或“a/b”。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T18:56:21.927

如果我们从您的示例答案中假设这`a`将是 1 的表示，那么您可以找到所有其他值的表示值并`a`从中减去 的值表示。

```
 for (i = 0; i < str_len; i++) {
      int s1Int = (int)s1[i];
      int s2Int = (int)s1[i];
      int addAmount = 1 + abs((int)'a' - s2Int);
      output[i] = (char)(s1Int + addAmount)
 } 
```

**脚步**

1) 对于 s1 或 s2 的长度

2) 检索第一个字符的十进制值

3) 检索第二个字符的十进制值

`a`4) 求字母(97)与第二个char + 1 <--的区别，假设`a`是1的表示

5) 将差异添加到 s1 字符并将十进制表示转换回字符。

**示例 1：**

如果 S1 字符是`a`，S2 字符是`b`：

`s1Int = 97`

`s2Int = 98`

`addAmount = abs((int)'a' - s2Int)) = 1 + abs(97 - 98) = 2`

`output = s1Int + addAmount = 97 + 2 = 99 = c`

**示例 2：**

如果 S1 字符是`c`，S2 字符是`a`：

`s1Int = 99`

`s2Int = 97`

`addAmount = abs((int)'a' - s2Int)) = 1 + abs(97 - 97) = 1`

`output = s1Int + addAmount = 99 + 1 = 100 = d`

# sql - 用于获取最新行的 sql 查询 - 针对 Vertica DB 进行了优化

> ID：12534746
> 
> 赞同：0
> 
> 时间：2012-09-21T16:50:35.777
> 
> 标签：sql, vertica

我这里有一张表，里面有数百万个条目。该表存储事件，每个事件都有一个时间戳。给定一些 WHERE 子句参数，我想要最近的事件。

这是我们想出的：

```
SELECT * 
FROM eventTable 
WHERE timestamp_date >= '2012-07-16' AND 
      eventType = 1  AND someOtherField = 'value' 
ORDER BY timestamp DESC 
LIMIT 1; 
```

目前，这需要很长时间才能返回。有没有办法改变 SQL 以更快地给我我们想要的东西？此外，是否有针对此类事情的预测策略？

谢谢何塞

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T20:32:26.867

本质上，您希望根据 order by 子句中的时间戳列优化您的至少一个预测。如果你正确地进行预测，这应该很快。

编辑：只是一个澄清说明。我并不是要暗示时间戳列应该是 order by 子句中的唯一字段。此外，正如下面的评论中所提到的，在这种情况下，在数据库设计器上运行特定于查询并不是一件坏事。我相信有一个选项可以优化速度。由于您正在执行“选择 *”，因此输出可能应该作为超级和伙伴投影。

# android - 如何将文本水平放置在 LinearLayout 的中心？

> ID：12534747
> 
> 赞同：0
> 
> 时间：2012-09-21T16:50:37.667
> 
> 标签：android, xml

如何将文本水平放置在 LinearLayout 的中心？我必须使用 layout_margin 吗？

```
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
>
<TextView  
    android:layout_width="wrap_content" 
    android:layout_height="wrap_content"
    android:text="Hello"
    android:layout_gravity="center_horizontal" // this does not work
/>
</LinearLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:51:39.293

你必须使用 `gravity`而不是`layout_gravity`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T16:55:49.787

将此属性添加到您的线性布局。

```
 <LinearLayout>
          android:gravity="center_horizontal"
    </LinearLayout> 
```

否则更改`TextView`如下：

```
<TextView  
android:layout_width="fill_parent" 
android:layout_height="wrap_content"
android:text="Hello"
android:gravity="center_horizontal"
/> 
```

# xslt - 如何调用模板来编辑 tei 样式表

> ID：12534748
> 
> 赞同：1
> 
> 时间：2012-09-21T16:50:42.720
> 
> 标签：xslt, stylesheet, epub

我正在尝试在正文部分之后自动制作带有名称列表的 epub。为了做到这一点，我正在更改 tei 样式表。首先，我尝试将此代码插入“to.xsl”文件中的“profiles/default/epub”文件夹中：

```
 <xsl:template match="tei:body">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
    <xsl:element name="back" namespace="http://www.tei-c.org/ns/1.0">
      <xsl:element name="div" namespace="http://www.tei-c.org/ns/1.0">
        <xsl:for-each select="//tei:rs[@type='luogo']">
          <xsl:element name="p" namespace="http://www.tei-c.org/ns/1.0">
            <xsl:value-of select="."/>
          </xsl:element>
        </xsl:for-each>
      </xsl:element>
    </xsl:element>
  </xsl:template> 
```

在这种情况下，输出会在正文部分之前显示名称列表。然后我找到了你可以[在这里](http://www.tei-c.org/release/doc/tei-xsl-common2/slides/teihtml-slides3.html)看到的“bodyHook”模板，但是它不起作用（或者我不明白如何使用它）。我试着写这样的东西：

```
 <xsl:param name="indiceNomi"> 
    <back>
    <div>
      <xsl:for-each select="//tei:rs[@type='luogo']">
        <p>

          <xsl:value-of select="."/>
        </p>
      </xsl:for-each>
    </div>
  </back>
  </xsl:param>

  <xsl:template match="tei:body">
    <xsl:copy>
      <xsl:apply-templates select="@*|node()"/>
    </xsl:copy>
  <xsl:call-template name="bodyHook"/>
   <xsl:with-param name="creaIndice" select="$indiceNomi"/>
  </xsl:template> 
```

但这是不正确的（似乎 xsl:with-param 不能在 xsl:template 中，即使我看到了一些这样的例子）。那么，如果这是我的输入文件，我必须编写什么样的代码？

```
<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet type="text/xsl" href="file:/C:/Users/User/Desktop/prova2.xsl"?>
<TEI xmlns="http://www.tei-c.org/ns/1.0">
    <teiHeader><fileDesc>
        <titleStmt>
            <title>AA</title>
        </titleStmt>
        <publicationStmt><p><!-- supply publication information --></p></publicationStmt>
        <sourceDesc>
            <bibl>AA</bibl>
        </sourceDesc>
    </fileDesc><profileDesc>
        <langUsage>
            <language ident="ita">AA</language>
            <language ident="lat">AA</language>
        </langUsage>
    </profileDesc></teiHeader>
    <text>
        <body>
            <div type="book" n="3" xml:id="L3">
                <head>AA
                </head>
                <div type="capitolo" n="1" xml:id="L3-01">
                    <head>AA</head>
                    <p>AA
                        <pb n="200"/>textt<rs type="luogo">Genova</rs>texttex ttexttexttexttexttexttexttexttext<rs type="luogo">London</rs>exttextte<rs type="luogo">Paris</rs>
                        texttexttexttexttexttexttexttexttext<rs type="luogo">Tokyo</rs>xttexttexttexttexttexttexttext<rs type="luogo">New York</rs>
                        <rs type="luogo">Dublin</rs><rs type="luogo">Moscow</rs><rs type="luogo">Cairo</rs>texttexttexttexttexttexttexttexttexttexttexttexttexttexttext</p>
                </div>
            </div>
        </body>
    </text>
</TEI> 
```

在此先感谢，这将有助于我得到一些答案。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-01-19T20:38:21.260

我认为您对如何自定义 TEI XSLT 行为有些误解。您不应该修改预定义文件。[本页](http://www.tei-c.org/release/doc/tei-xsl-common/customize.html)顶部给出了一个简单的解释。基本上，这个想法是您将创建自己的 XSLT 文件来导入该`tei.xsl`文件，并将您自己的模板添加到您自己的 XSLT 文件中以自定义行为。例如，要定义要在该`<body>`部分末尾插入的模板，您可以在 XSLT 文件中添加如下内容：

```
<xsl:template name="bodyEndHook">
  <back>
    <div>
      <xsl:for-each select="//tei:rs[@type='luogo']">
        <p>

          <xsl:value-of select="."/>
        </p>
      </xsl:for-each>
    </div>
  </back>
</xsl:template> 
```

据推测，TEI 转换会在`<body>`. 的默认行为`bodyEndHook`是什么都不做，但您可以通过添加自己的模板来覆盖该默认行为。

# git - GIT 中的用户/存储库层次结构

> ID：12534751
> 
> 赞同：2
> 
> 时间：2012-09-21T16:51:01.517
> 
> 标签：git, version-control, dvcs, hierarchical

是的，我知道我知道嘿嘿。分布式版本控制系统没有中央存储库，任何人都可以获取任何存储库的版本，因为这不是集中式 VCS。然而在办公室的现实生活中，老板们往往想成为一切的主人，所以我来这里看看是否有人对我的情况有好的方法。

在我的办公室，我们已经开始使用 GIT，我们有这样的东西：

```
<SERVER>
---->../apache/htdcos/All_Proyects [Bare repository]
-------->/Proyect_A [Repository]~~~ Developer 1 [Git Repo], Developer 2 [Git Repo]
-------->/Proyect_B [Repository]~~~ Developer 3 [Git Repo], Developer 4 [Git Repo]
-------->/Proyect_123 [Repository]~~~ Developer 5 [Git Repo], Developer 6 [Git Repo] 
```

这个想法是每个项目都有自己的 GIT 存储库，并且在 All_Projects 文件夹中它可以有一个裸存储库，然后是“主存储库”，因此所有项目都推送到它；该裸存储库将类似于 master 存储库的主人（这真的是首先是一个好方法？？？）

使用这种方法，我有一些疑问......

我怎样才能拥有用户/存储库的层次结构？因此，例如，开发人员 5 不能从/向 Proyect_A 推送/拉取/提交，但他可以对他自己的 Proyect_123 执行此操作？

我可以有一个像这样的层次结构系统吗？：开发人员推送到 Boss 存储库，Boss 推送到项目存储库，服务器自动（可能是 cron）从每个项目存储库拉到主存储库的裸主。（开发人员不能直接推送到裸存储库）。

我怎么能做这样的事情？谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-22T08:20:55.047

父 repo 引用的 repos 正是**[子模块](http://git-scm.com/book/en/Git-Tools-Submodules)**的原因。

**[如果您已将Gitolite](https://github.com/sitaramc/gitolite)**添加到您的主 Git 存储库服务器（参见[安装页面](http://sitaramc.github.com/gitolite/install.html)），则用户和项目的保护是可能的。
它是一个小的 Perl 脚本集合，它将拦截任何 Git 命令，并将根据配置文件验证所述命令，该配置文件指定哪个用户可以在哪个 repo 上执行什么操作。

# php - PHP：提取字符串变量的某些部分

> ID：12534754
> 
> 赞同：0
> 
> 时间：2012-09-21T16:51:24.147
> 
> 标签：php, explode

我有一个看起来像这样的变量：

```
$var1 = "33081PA-5112"; 
```

有时它变成：

```
$var1 = "33083";
$var1 = "33081PA-1132";
$var1 = "31183";
$var1 = "13081PA-2132"; 
```

我如何确定它何时具有 PA-，所以当它确实时，我想将 PA- 之后的数值放入其他变量中。

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T16:53:57.477

使用 strpos()：

```
if(strpos($var,'PA-') !== false) // code to run if the string has a PA- 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T16:54:43.690

干得好：

```
<?php
    $var1 = "13081PA-2132";
    $pos = strpos( $var1, 'PA-');
    echo $pos . "\n";

    if( $pos > -1 )
    {
        $newVal = substr($var1, $pos+3 );

        echo $newVal;
    }
?> 
```

输出：

```
5
2132 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T17:02:14.350

这会给你你想要的。

```
$var1 = "33081PA-1132";
preg_match('/^([0-9]*)PA-/',$var1,$match);
$var1_cut = $match[1];
preg_match('/PA-([0-9]*)/',$var1,$match);
$var2 = $match[1];

//Outputs
print_r($var1);     //33081PA-1132
print_r($var1_cut); //33081
print_r($var2);     //1132 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T16:54:09.627

你可以做一个`regex`匹配：

```
preg_match("{PA-(\d+)}",$var,$array);
echo $array[1][0]; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T16:55:25.980

```
<?php

$var1 = "33083";
$var1 = "33081PA-1132";

if(strstr($var1, 'PA') !== false){ // If it has the PA
    $parts = explode('PA-', $var1); // Split by dash

    echo $parts[0]; // Left part
    echo '<br />';
    echo $parts[1]; // Right part
}else{
    echo $var1; // It has not PA
}

?> 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T16:55:27.713

```
if(trim(str_replace(range(0,9),'', $var1)) == 'PA-') { 
  //do stuff
} 
```

# php - PHP错误：未定义的偏移量：10

> ID：12534759
> 
> 赞同：0
> 
> 时间：2012-09-21T16:51:52.717
> 
> 标签：php, arrays, forms, debugging, loops

我编写了一个程序，它根据用户的输入创建一个谜题。有一个 html 表单可以接受用户的话并将它们发布到 php 程序中。然后 php 程序创建拼图并打印出来。

[这里](http://bit.ly/RFjlVF)有一个现场演示。你可以输入你自己的话。

它看起来不错，但是当我在本地服务器上运行它并打开 php 错误提示时，我看到错误消息说`Undefined offset: 10 at line 147 and 148`. 错误是从`if ($board[$curr_row][$curr_col] == '.'`...开始的php代码行生成的。您可以使用Ctrl+F查找代码。我不明白我怎么能得到 10，`$curr_col`或者`$curr_row`因为循环应该在它们达到 9 后停止。

请帮助我了解循环达到 10 后如何运行，非常感谢！

该程序的压缩版本在[这里](http://www.mediafire.com/download.php?8kwxngfiv29d0vm)。

这是php的代码：

```
<html>
    <body>
        <?php

        /* word Find
         Generates a word search puzzle based on a word list entered by user.
         User can also specify the size of the puzzle and print out
         an answer key if desired
         */
        //If there is no data from the form, prompt the user to go back
        if (!filter_has_var(INPUT_POST, "puzzle_name")) {
            print <<<MUL_LINE
    <!DOCTYPE html>
<html >
    <head>
        <title>Oops!</title>
    </head>

    <body>
        <p>This page should not be called directly, please visit 
        the <a href="./form.html">puzzle form</a> to continue.</p>
    </body>
</html>

MUL_LINE;
        } else {
            $boardData = array("name" => filter_input(INPUT_POST, "puzzle_name"), "width" => filter_input(INPUT_POST, "grid_width"), "height" => filter_input(INPUT_POST, "grid_height"));

            if (parseList() == TRUE) {//parse the word list in textarea to an array of words
                //keep trying to fill the board untill a valid puzzle is made
                do {
                    clearBoard();
                    //reset the board
                    $pass = fillBoard();
                } while($pass == FALSE);
                printBoard();
                //if the board if successfully filled, print the puzzle
            }
        }//end word list exists if

        //parse the word list in textarea to an array of words
        function parseList() {
            //get word list, creates array of words from it
            //or return false if impossible

            global $word, $wordList, $boardData;

            $wordList = filter_input(INPUT_POST, "wordList");
            $itWorked = TRUE;

            //convert word list entirely to upper case
            $wordList = strtoupper($wordList);

            //split word list into array
            $word = explode("\n", $wordList);
            //an array of words

            foreach ($word as $key => $currentWord) {
                //trim all the beginning and trailer spaces
                $currentWord = rtrim(ltrim($currentWord));

                //stop if any words are too long to fit in puzzle
                if ((strlen($currentWord) > $boardData["width"]) && (strlen($currentWord) > $boardData["height"])) {
                    print "$currentWord is too long for puzzle";
                    $itWorked = FALSE;
                }//end if
                $word[$key] = $currentWord;
            }//end foreach
            return $itWorked;
        }//end parseList

        //reset the board by filling each cell with "."
        function clearBoard() {
            //initialize board with a . in each cell
            global $board, $boardData;

            for ($row = 0; $row < $boardData["height"]; $row++) {
                for ($col = 0; $col < $boardData["width"]; $col++) {
                    $board[$row][$col] = ".";
                }//end col for loop
            }//end row for loop
        }//end clearBoard

        //fill the board
        function fillBoard() {
            global $word;
            $pass = FALSE;
            //control the loop of filling words, false will stop the loop
            //control the loop, if all the words are filled, the counter will be as equal to the number
            //of elements in array $words, thus the loop stops successfully
            $counter = 0;

            do {

                $pass = fillWord($word[$counter]);
                //if a word is filled, $pass is set to true
                $counter++;

            }
            //if a word can't be filled, pass==FALSE and loop stops
            //or if all words are through, loop stops
            while($pass==TRUE && $counter<count($word));

            //return TRUE if all filled successfully, FALSE if not
            if ($pass == TRUE && $counter == count($word)) {
                return TRUE;
            } else {
                return FALSE;
            }
        }

        //function used to fill  a single word
        function fillWord($single_word) {
            global $board, $boardData;
            //the direction of how the word will be filled, 50% chance to be H, and 50% chance to be V
            $dir = (rand(0, 1) == 0 ? "H" : "V");
            //H(horizontal) means fill the word from left to right
            //V(vertical) means fill the word from up to down
            //loop control. if a letter is not filled, $pass is set to false and loop stops
            $pass = TRUE;
            //loop control. if all letters are filled successfully, loop stops too.
            $counter = 0;

            //decide the cell to fill the first word. the cell is located at $board[$curr_row][$curr_col]
            if ($dir == "H") {//if the word will be fileld from left to right
                $curr_row = rand(0, $boardData["height"] - 1);
                //pick up a random row of the 10 rows ( rand(0,9) )
                $curr_col = rand(0, ($boardData["width"] - ( strlen($single_word - 1)) - 1));
                //pick up a random column of fillable columns
                //if the word is "banana" and the board's width
                //is 10, the starting column can only be rand(0, 4)
            } else if ($dir == "V") {//if the word will be fileld from up to down
                $curr_row = rand(0, ($boardData["height"] - ( strlen($single_word - 1)) - 1));
                $curr_col = rand(0, $boardData["width"] - 1);
            } else {
                print "invalid direction";
            }

            //the loop that keeps trying to fill letters of the word
            while ($pass && ($counter < strlen($single_word))) {//while the $pass is true AND there are still letters

                //to fill, keep the loop going

                //the next line and the line after generate the msg "Undefined offset: 10",
                //$curr_row and $curr_col should never be 10 because the loop should be stopped
                //if the last letter of the word is filled
                if ($board[$curr_row][$curr_col] == '.' || //if the cell is not filled, reset fillboard() to "."
                $board[$curr_row][$curr_col] == substr($single_word, $counter, 1))//or it has already been filled with the same letter
                {
                    $board[$curr_row][$curr_col] = substr($single_word, $counter, 1);
                    // write/fill the letter in the cell
                    $counter++;
                    if ($dir == "H") {
                        $curr_col++;
                        //next column, move to the next right cell
                    } else if ($dir == "V") {
                        $curr_row++;
                        //next row, move to the next lower cell
                    } else {
                        print "\nHuge direction error!";
                    }

                } else {
                    $pass = FALSE;
                    // failed to fill a letter, stop the loop
                }
            }
            //if all the letters are filled successfully, the single word is filled successfully
            //return true, let $fillBoard go filling next single word
            if ($pass && ($counter == strlen($single_word))) {
                /* for debug purpose
                 print "<hr />";print "<p>TRUE</p>";print "<hr />";
                 print $single_word;
                 print $curr_row . "," . $curr_col . "<br />";
                 print "<hr />";*/

                return TRUE;
            } else {
                //failed to fill the word, reset the board and start all over again
                return FALSE;
            }

        }//end function fillWord

        //print the successful filled puzzle
        function printBoard() {
            global $board;
            print <<<MULLINE
    <style type="text/css">
    table, td{
        border: 1px solid black;
    }

    </style>
MULLINE;
            print '<table >';
            foreach ($board as $row) {
                print '<tr>';
                foreach ($row as $cell) {
                    print '<td>';
                    print $cell;
                    print '</td>';

                }
                print("<br />");
                print '</tr>';
            }
            print "</table>";
        }
        ?>
    </body>
</html> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:10:37.370

我不认为下面的代码片段是正确的。

```
strlen($single_word - 1) 
```

位于以下行：

```
$curr_col = rand(0, ($boardData["width"] - ( strlen($single_word - 1)) - 1)); 
```

和

```
$curr_row = rand(0, ($boardData["height"] - ( strlen($single_word - 1)) - 1)); 
```

它会将单词转换为整数。从那个数字中减去一个。然后将其转换回字符串并获取长度。所以你对长度有一个垃圾值。

# jquery - 循环遍历 next() 表的所有 td

> ID：12534760
> 
> 赞同：0
> 
> 时间：2012-09-21T16:51:54.900
> 
> 标签：jquery

我想循环遍历单击 $this 按钮的下一个表的每个 td

```
<input type="button" class='btn'>   
<table><tr><td></td></tr>......</table>   

<input type="button" class='btn'>   
<table><tr><td></td></tr>......</table>   

<input type="button" class='btn'>   
<table><tr><td></td></tr>......</table>   

<script type="text/javascript" src="jquery.js"></script>   
<script type="text/javascript">
    $()ready(function(){   
       $(".btn").click(function(){
          //loop through each td of next table??????
       });
    });
</script> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T16:53:41.940

尝试这个，

**[现场演示](http://jsbin.com/umodum/1/edit)**

```
 $(document).ready(function(){   
       $(".btn").click(function(){
          //loop through each td of next table??????
           $(this).next().find('td').each(function(){
            });
       });
 }); 
```

# facebook-graph-api - Facebook javascript sdk 在页面上作为页面发布

> ID：12534761
> 
> 赞同：2
> 
> 时间：2012-09-21T16:51:56.977
> 
> 标签：facebook-graph-api, facebook-javascript-sdk

是否可以通过 FB.api 在页面上发布页面？我知道如何以页面管理员的身份发布，但要以页面的形式发布，我们必须使用页面访问令牌。但我不知道如何使用页面访问令牌调用 FB.api。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2017-04-17T08:33:44.647

试试这个：

```
FB.login(function(response) {
                FB.api('/me/accounts', function(apiresponse) {
                    var data = apiresponse['data'];
                    var ids = new Array();
                    for (var i = 0; i < data.length; i++) {
                        ids[i] = data[i].id;
                    }
                    console.log(ids);
                });

            }, { scope: 'manage_pages,publish_pages' }); 
```

# javascript - 谷歌分析实时将整个 /search 目录排除在外

> ID：12534763
> 
> 赞同：1
> 
> 时间：2012-09-21T16:52:01.317
> 
> 标签：javascript, google-analytics

我有一个 /search 目录。那里的所有页面都使用 url 重写 index.php 页面。期待 color.php 页面，它是一种“搜索登录页面”。

在 index.php 页面中，我将搜索词放在 trackpage 中，如下所示：

```
gaq.push(['_trackPageview', '/search/index.php?q={$search_form.query}']); 
```

那在一个聪明的模板中，所以 search_form.query 被实际查询替换。

在 color.php 页面——以及整个站点的其余部分，我写下了这个：

```
_gaq.push(['_trackPageview']); 
```

用户在网站上点击的每一页都会实时显示在谷歌分析中。期望 /search 子目录中的页面。为什么？怎么了？

这些页面被跟踪，因为我可以在内容报告中看到它们，并且我通过 q 参数进行了谷歌跟踪站点搜索。所有这些都显示在所有其他报告中。它只是没有出现在实时报告中。

有人可以帮我吗？为什么会这样？

# arrays - Pascal 会自动“修剪”作为函数输入参数的数组吗？

> ID：12534769
> 
> 赞同：0
> 
> 时间：2012-09-21T16:52:14.533
> 
> 标签：arrays, function, parameters, pascal

我正在研究 Pascal-to-C 端口，两种语言在处理字符串方面的不同方式已成为一个令人沮丧的问题。

如果我声明一个`A`大小为 Pascal 的字符数组`x`并将其作为输入参数传递给一个函数，该函数的输入参数定义为大小为 xz 的字符数组 B，其中 z 是一个正整数，那么一旦 Pascal 在函数内部，它会做什么? 数组 A 是否被截断而 B 在函数内部被视为大小为 xz？

原始源代码的编写方式似乎表明它是这样工作的，但我对 Pascal 不熟悉。

我不能发布代码，因为它是专有的，我也不太了解 Pascal 语法。但是，这将是以下内容：

```
type1 string[22]
type2 string[10]

//Function definition
function(type2 in)
    //Do stuff to the array
    print(in)

//Function call
type2 temp = "This is a string of 20"
function(inputString) 
```

可能存在语法错误

```
(* Types *)
type24 = packed array[1..24] of char;
type40 = packed array[1..40] of char;

(* Variable declaration *)
line : type40;

(* Function prototype *)
foo(var contents : type24) : boolean;

(* Function call *)
if ( foo(line) )
begin
end 
```

# facebook - facebook状态帖子的正确html代码

> ID：12534774
> 
> 赞同：1
> 
> 时间：2012-09-21T16:52:23.347
> 
> 标签：facebook, facebook-graph-api

我想按这样的顺序对我的网站进行编码，所以如果有人将我的网站的 URL 粘贴到他们的 Facebook 状态更新或他们的个人资料页面中，这篇文章将正确显示，旁边有一张图片，从网站解析的文本。

例如，我发布了一个截图。**左边**的是我的网站。**右边**的是一些随机的网站。看到他们包含了一张图片，一个文本段落，一个标题等等......

![在此处输入图像描述](../Images/5ec62ee7436ab36e1f12c9a829ea6b7d.png)

是否有任何我应该遵循的特殊准则或规则，或者它超出了我的能力范围。另外，我什至可以想到一个用于谷歌搜索的搜索词，所以我把它贴在这里（甚至不知道在 FB apis 上搜索什么）。

谢谢你们！

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T16:55:42.253

查看 Facebook 文档。您需要在`<head>` [https://developers.facebook.com/docs/opengraphprotocol/中包含 Open Graph 标签](https://developers.facebook.com/docs/opengraphprotocol/)

**从文档：**

```
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:og="http://ogp.me/ns#"
      xmlns:fb="https://www.facebook.com/2008/fbml">
<head>
  <title>The Rock (1996)</title>
     <!-- the bold title on Facebook -->
  <meta property="og:title" content="The Rock"/>
  <meta property="og:type" content="movie"/>
     <!-- the url under the title on Facebook -->
  <meta property="og:url" content="http://www.imdb.com/title/tt0117500/"/>
     <!-- the image to the left of text on Facebook -->
  <meta property="og:image" content="http://ia.media-imdb.com/rock.jpg"/>
  <meta property="og:site_name" content="IMDb"/>
  <meta property="fb:admins" content="USER_ID"/>
     <!-- the description under description and title on Facebook -->
  <meta property="og:description"
      content="A group of U.S. Marines, under command of
               a renegade general, take over Alcatraz and
               threaten San Francisco Bay with biological
               weapons."/>
  ...
</head> 
```

# c - 从 C 中的用户输入重复循环

> ID：12534778
> 
> 赞同：0
> 
> 时间：2012-09-21T16:52:38.910
> 
> 标签：c, gcc

```
#include <stdio.h>

int main()
{
        char n='Y';
        fflush(stdin);
        while(n=='Y')
        {
                printf("Add Next Y/N: ");
                n=getc(stdin);
        }
        printf("n = %c",n);
} 
```

此循环在第一次迭代后结束，无需从键盘输入。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:54:25.763

`fflush`与输出流相关联。不要叫它`stdin`。

那是因为在您输入之后`Y`，输入流中仍然有一个换行符，该换行符作为下一个输入传递给`getc`. 所以现在，循环的条件现在失败并退出循环。

只需`getchar()`在 getc() 之后添加 a 即可使用换行符。

请注意，`getchar()`与 相同`getc(stdin,ch)`。

```
#include <stdio.h>

int main()
{
        char n='Y';

        while(n=='Y')
        {
                printf("Add Next Y/N: ");
                n=getc(stdin);
                getchar();
        }
        printf("n = %c",n);
} 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T17:21:13.640

在我的系统上，getc() 似乎直到我按下返回键才返回。这意味着“Y”后面总是跟着“\n”。因此，为了继续循环，我必须在 while 中添加一个条件：

```
#include <stdio.h>
#include <ctype.h>
int main()
{
   char n = 'Y';
   while ( toupper(n) == 'Y' || n == '\n'  )
   {
      if ( n != '\n' )
      {
         printf("Add Next Y/N: ");
      }
      n = getc(stdin);
   }
} 
```

fgets() 似乎效果更好：

```
#include <stdio.h>
#include <ctype.h>
int main()
{
   char input[100] = { "Y" };
   while ( toupper(input[0]) == 'Y' )
   {
      printf("Add Next Y/N: ");
      fgets(input,sizeof(input),stdin);
   }
} 
```

编辑下面的评论：scanf() 也有回车问题。最好先使用 fgets()，然后再使用 sscanf()。由于您正在执行额外的 getchar()，我认为您可以摆脱对 '\n' 的检查。试试这个：

```
#include <stdio.h>
#include <ctype.h>

struct item {
      char name[100];
      int avg;
      double cost;
};

int main()
{

   FILE *fp = fopen("getc.txt","w");
   struct item e;
   char line[200];
   char next = 'Y';
   while(toupper(next) == 'Y') 
   { 
      printf("Model name, Average, Price: "); 
      fgets(line,sizeof(line),stdin);
      sscanf(line,"%s %d %f",e.name,&e.avg,&e.cost); 
      fwrite(&e,sizeof(e),1,fp); 
      printf("Add Next (Y/N): "); 
      next = getc(stdin);
      getchar(); // to get rid of the carriage return
   }
   fclose(fp);
} 
```

没有 sscanf() 的另一种方法：

```
#include <stdio.h>
#include <string.h>
#include <stdlib.h>
#include <ctype.h>

struct item {
      char name[100];
      int avg;
      double cost;
};
int main() 
{
   struct item e;
   char line[200];
   char next = 'Y';
   while(toupper(next) == 'Y') 
   { 
      printf("Model name ");
      fgets(line,sizeof(line),stdin);
      line[ strlen(line) - 1 ] = '\0'; // get rid of '\n'
      strcpy(e.name,line);
      printf("\nAverage "); 
      fgets(line,sizeof(line),stdin);
      e.avg = atoi(line);
      printf("\nPrice "); 
      fgets(line,sizeof(line),stdin);
      e.cost = atof(line);
      printf("you input %s %d %f\n",e.name,e.avg,e.cost);
      printf("Add Next (Y/N): "); 
      next = getc(stdin);
      getchar(); // get rid of carriage return
   }
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T17:26:48.910

问题是，当您从用户（来自键盘的标准输入）获得输入时，您获得的不仅仅是一个`Y`字符，而是两个字符：`Y\n`.

您必须使用`\n`或存储一个 char 数组并将其从您的输入中删除，或者类似的东西。这是一个快速的单行修复程序，它不会真正改变您的代码：

```
n=getc(stdin); 
getchar(); //consume the newline 
```

# html - min-height:100% 不会像我想要的那样工作

> ID：12534787
> 
> 赞同：2
> 
> 时间：2012-09-21T16:53:27.257
> 
> 标签：html, height, css

我有一个容器 div，包含 3 个 div、一个侧边栏、一个内容和一个标题，而里面的所有元素都按应有的方式呈现（如果这可能会影响我的问题，它们被定位为“相对”）、侧边栏和内容根据我的需要渲染`min-height: 100%`，包含它们的 div 不会适应这 3 个元素，就像`overflow: visible`我不希望内容溢出，我希望整个页面滚动并且 div 适应内容大小.. .

我试图把我的代码放在这里：http: [//jsfiddle.net/vhZV6/](http://jsfiddle.net/vhZV6/)

我还剪掉了一些根本不应该影响的图形 tweeks……这也是我的问题的一个屏幕：

![http://imageshack.us/photo/my-images/217/problemrt.jpg/](../Images/31bc231d0cd527542afaf20fa87897f8.png)

在这个问题上我不需要旧的浏览器集成（如 IE 5/6）。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:07:21.020

我会试试这个。一旦任何高度元素被弄乱，就不再设置“高度：自动”。

```
min-height:100% !important;
height:auto !important; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:15:10.413

这是一个非常简单的问题：你的内部 div 是浮动的。解决方案非常简单，只需将以下内容添加到您的 css 中（当您有浮动 div 时，这是最好的解决方案）：

```
.container:before { 
    content:".";
    display:block;
    height:0;
    clear:both;
    visibility:hidden; 
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T17:20:21.227

尝试添加`overflow:auto;`到您的`.container`div。

# python - Python 中的内存使用：memory_profiler 和 guppy 有什么区别？

> ID：12534794
> 
> 赞同：6
> 
> 时间：2012-09-21T16:53:46.460
> 
> 标签：python, memory-profiling

我对特定 python 脚本的内存使用情况感到非常困惑。我想我真的不知道如何描述使用情况，尽管有几个 SO Questions/ [Answers的](https://stackoverflow.com/a/552810/717357)[建议](https://stackoverflow.com/questions/110259/python-memory-profiler)。

我的问题是：**和有****什么区别？为什么一个告诉我我正在使用大量内存，而另一个告诉我我没有？`memory_profiler``guppy.hpy`**

我正在使用`pysam`一个用于访问生物信息学 SAM/BAM 文件的库。在将 SAM（ASCII）转换为 BAM（二进制）并在其间操作文件时，我的主脚本很快就会耗尽内存。

我创建了一个小测试示例来了解在每个步骤中分配了多少内存。

```
# test_pysam.py: 

import pysam
#from guppy import hpy

TESTFILENAME = ('/projectnb/scv/yannpaul/MAR_CEJ082/' +
                'test.sam')
#H = hpy()

@profile # for memory_profiler
def samopen(filename):
#    H.setrelheap()
    samf = pysam.Samfile(filename)
#    print H.heap()
    pass

if __name__ == "__main__":
    samopen(TESTFILENAME) 
```

使用 memory_profiler ( `python -m memory_profiler test_pysam.py`) 监控内存使用情况会产生以下输出：

```
Filename: test_pysam.py

Line #    Mem usage    Increment   Line Contents
================================================
    10                             @profile # for memory_profiler
    11                             def samopen(filename):
    12     10.48 MB      0.00 MB   #    print H.setrelheap()
    13    539.51 MB    529.03 MB       samf = pysam.Samfile(filename)
    14                             #    print H.heap()
    15    539.51 MB      0.00 MB       pass 
```

然后注释掉`@profile`装饰器并取消注释`guppy`相关行，我得到以下输出（`python test_pysam.py`）：

```
Partition of a set of 3 objects. Total size = 624 bytes.
 Index  Count   %     Size   % Cumulative  % Kind (class / dict of class)
     0      1  33      448  72       448  72 types.FrameType
     1      1  33       88  14       536  86 __builtin__.weakref
     2      1  33       88  14       624 100 csamtools.Samfile 
```

第 13 行的总大小在一种情况下为 529.03 MB，在另一种情况下为 624 字节。这里到底发生了什么？'test.sam' 是一个约 52MB 的 SAM（还是 ASCII 格式）文件。深入研究 对我来说有点棘手`pysam`，因为它是与`samtools`. 不管 a`Samfile`实际上是什么，我认为我应该能够了解分配了多少内存来创建它。我应该使用什么程序来正确分析更大、更复杂的 python 程序的每个步骤的内存使用情况？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-09-21T17:36:44.370

> memory_profiler 和 guppy.hpy 有什么区别？

您了解堆的内部视图和操作系统的程序外部视图之间的区别吗？（例如，当 Python 解释器调用`free`1MB 时，由于多种原因，它不会立即（甚至可能永远不会）将 1MB 的页面返回给操作系统。）如果你这样做了，那么答案很简单：memory_profiler 是向操作系统询问您的内存使用情况；guppy 正在内部从堆结构中找出它。

除此之外，memory_profiler 有一个 guppy 没有的特性——自动检测你的函数以在每一行代码之后打印报告；它在其他方面更简单，更容易但不太灵活。如果你知道你想做某件事而 memory_profiler 似乎没有做，它可能做不到；与孔雀鱼，也许它可以，所以研究文档和源代码。

> 为什么一个告诉我我正在使用大量内存，而另一个告诉我我没有？

很难确定，但这里有一些猜测；答案很可能是多个的组合：

也许 samtools 使用 mmap 将足够小的文件完全映射到内存中。这会增加文件大小的页面使用量，但根本不会增加堆使用量。

也许 samtools 或 pysam 会创建很多快速释放的临时对象。您可能有很多碎片（每个页面上只有几个实时 PyObjects），或者您的系统的 malloc 可能已经决定它应该在其空闲列表中保留大量节点，因为您一直在分配，或者它可能没有返回页面到操作系统，或者操作系统的虚拟机可能没有回收返回的页面。确切的原因几乎总是无法猜测；最简单的做法是假设释放的内存永远不会返回。

> 我应该使用什么程序来正确分析更大、更复杂的 python 程序的每个步骤的内存使用情况？

If you're asking about memory usage from the OS point of view, memory_profiler is doing exactly what you want. While major digging into pysam may be difficult, it should be trivial to wrap a few of the functions with the `@profile` decorator. Then you'll know which C functions are responsible for memory; if you want to dig any deeper, you obviously have to profile at the C level (unless there's information in the samtools docs or from the samtools community).

# android - 从 Widget 到 Main Activity 的 BroadcastReceiver

> ID：12534795
> 
> 赞同：0
> 
> 时间：2012-09-21T16:53:49.393
> 
> 标签：android, android-activity, widget, broadcastreceiver

我有问题。我有一个小部件，一个小部件有一个按钮（开始录制），如果我按下该按钮，我希望我的主要活动中的按钮也被按下。我已经看到一些应用程序具有该功能。我一直在尝试不同的方式在 main MainActivity 中声明 WidgetProvider 或以相同的方式声明 BroadcastReceiver ，但是我得到了 Java access not allowed 异常......

是否可以在我的 MainActivity 中接收小部件上的按钮按下？也许使用服务？

这个想法是它通过服务将数据从小部件传递到活动。所以

**活动 <-> 服务 <-> 小部件**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T19:14:48.663

如果您按下小部件中的按钮，则表示您的 Activity 处于暂停状态。因此，在按下按钮时，只需在首选项中设置一个标志，并在您恢复活动时读取该标志。

# php - Using mcrypt_create_iv on PHP IIS

> ID：12534802
> 
> 赞同：0
> 
> 时间：2012-09-21T16:53:58.057
> 
> 标签：php, iis, mcrypt, pbkdf2

I'm trying to set up password salting on our website, and found the PBKDF2 functions at [https://defuse.ca/php-pbkdf2.htm](https://defuse.ca/php-pbkdf2.htm)
When I try it, I get:

> Fatal error: mcrypt_create_iv(): Could not gather sufficient random data in include\PBKDF2.php on line 23

I'm not sure if I need to do anything to make this work. It's running on IIS7.5

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2016-10-07T18:31:25.563

For those who are still facing error:

> Fatal Error: Call to undefined function mcrypt_create_iv()

Please check the phpversion and correspondingly make sure to go to `php.ini` file and add the line or uncomment:

```
extension=php_mcrypt.dll 
```

I was able to get solution from here [http://tech.domainstack.in/how-to-enable-mcrypt-on-the-server/](http://tech.domainstack.in/how-to-enable-mcrypt-on-the-server/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-26T13:29:41.927

I was using PHP 5.3.6, which apparently has a bug with mcrypt_create_iv().
Switched to the latest version 5.4.7 and it started working.

# php - SQL棘手的顺序

> ID：12534808
> 
> 赞同：3
> 
> 时间：2012-09-21T16:54:21.470
> 
> 标签：php, mysql, sql, sql-order-by

我正在尝试订购退回的套装，但我很难让它正确订购。

我正在选择字段，每个字段都有一个`date_updated`和一个`date_added`。添加该字段时，该字段为`date_updated`空，直到有更新，然后分配当前日期。

我需要通过将最近的条目放在底部，将最旧的条目放在顶部来排序我的列表。所以如果添加一个项目，它应该直接到底部。有没有办法将所有日期字段连接在一起，然后按最旧到最新排序，忽略更新或添加？

这可能听起来有点令人困惑，但我已经尝试了很多组合`ORDER BY date_added DESC, date_updated ASC`，以及类似的东西，但它并没有做我需要它做的事情。我得到最上面的部分`date_added`，然后在下面是一个单独的订购`date_updated`...

任何输入在这里都会非常有帮助......

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T16:57:47.613

尝试

```
order by coalesce(date_updated, date_added) 
```

[合并文档](http://dev.mysql.com/doc/refman/5.6/en/comparison-operators.html#function_coalesce)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:00:55.480

你可以试试[CASE](http://dev.mysql.com/doc/refman/5.0/en/case.html)语句

```
SELECT 
    firstname, 
    lastname, 
    date_added, 
    date_updated, 
    CASE date_updated IS NULL 
        THEN date_added 
        ELSE date_updated 
    END CASE AS order_date  
FROM mytable 
ORDER BY order_date DESC 
```

它的作用是检查是否`date_updated`为空，然后将 的值放入新列`date_added`。如果没有，它会将`date_updated`. 新列被调用`order_date`并用于排序。

您还可以在 ORDER BY 子句中添加 CASE 语句，但这可能会减慢您的查询速度，因为它必须在索引上与在构造数据时进行连接。虽然不是决定性的，但我发现如果在 SELECT 与 ORDER BY 中使用 CASE，性能会略有提升。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:57:47.650

`CASE`在`Order By`子句中使用。

```
ORDER BY CASE WHEN date_updated IS NULL
              THEN 0 
              ELSE 1
          END DESC, date_added DESC 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T16:58:19.443

```
Order by IsNull(DateUpdated,DateAdded) 
```

将是一种方式

# jquery - 如何使用 jQuery 将 div 设置为可见？

> ID：12534811
> 
> 赞同：0
> 
> 时间：2012-09-21T16:54:25.903
> 
> 标签：jquery

我有一个 div 作为页面的一部分，呈现如下：

```
<div id="productdiv" style="visibility:hidden;"> 
```

在某个事件中，我希望这个 div 变得可见。

以下不起作用：

```
$("#productdiv").show(); 
```

什么会起作用？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T16:56:08.710

使用`display:none;`代替`visibility:hidden;`

**例子**

替换这个：

```
<div id="productdiv" style="visibility:hidden;"> 
```

和

```
<div id="productdiv" style="display:none;"> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T16:57:18.347

你应该尝试这样的事情

```
$("#productdiv").css("visibility","visible"); 
```

或使用它为**所有匹配**的元素设置多个**CSS**属性：

 **```
 $("#productdiv").css({"visibility":"visible","font-size":"50px"}); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:56:41.690

show 方法适用于 display 属性，而不适用于 visibility 属性。使用，`.css('visibility', 'visible')`...

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-09-21T16:57:12.483

该`show`函数设置`display`css 属性。改为使用`$("#productdiv").css("visibility", "visible");`。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T16:58:22.590

```
$('div#productdiv:hidden').show(); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T17:15:28.543

```
$('.asdf').click(function(){
    $("#productDiv").css('visibility','visible');
}); 
```**

# python - 如何插入 3D 坐标

> ID：12534813
> 
> 赞同：2
> 
> 时间：2012-09-21T16:54:26.350
> 
> 标签：python, r, 3d, interpolation, splines

我有 x,y,z 格式的数据点。它们形成一个封闭流形的点云。如何使用 R-Project 或 Python 对它们进行插值？（如多项式样条）

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:20:09.170

这取决于最初代表的点。仅仅有一个点数组通常不足以从中导出原始流形。你需要知道哪些点是在一起的。

最常见的低级边界表示（“brep”）是一堆三角形。例如，这就是 OpenGL 和 Directx 获得的输入。我编写了一个 Python[软件](http://rsmith.home.xs4all.nl/software/index.html#stl2pov)，可以将[STL](http://en.wikipedia.org/wiki/STL_%28file_format%29)格式的三角形网格转换为例如 PDF 图像。也许您可以根据自己的目的进行调整。插值三角形通常不是必需的，而是微不足道的。在两个原始点的中间创建三个新点。这三个点形成一个内三角形，表面的其余部分形成三个三角形。所以有了这个，你已经把一个三角形变成了四个三角形。

如果这些点是样条曲面面片的控制点（如[NURBS](http://en.wikipedia.org/wiki/NURBS)或[Bézier 曲面](http://en.wikipedia.org/wiki/B%C3%A9zier_surface)），则您必须知道哪些点一起形成面片。由于这些是参数曲面，一旦知道了控制点，就可以确定曲面上的所有点。下面是贝塞尔曲面的函数。参数 u 和 v 是表面的参数坐标。它们沿着补丁的两个相邻边缘从 0 运行到 1。控制点是 k_ij。

![贝塞尔补丁公式](../Images/f171c6150f284dc56e20f30cb0794e77.png)

B函数是每个控制点的权重函数；

![权重函数](../Images/4238e14fd30cac2e23cc74b0f2ce9e3d.png)

假设您想通过 10x10 点的网格来近似贝塞尔曲面。为此，您必须在 10 步中评估 u 和 v 从 0 到 1的函数**p**`numpy.linspace` （生成这些步骤很容易用 来完成）。

对于每个 (u,v) 对，**p**返回一个 3D 点。

如果要可视化这些点，可以使用matplotlib 中的[mplot3d](http://matplotlib.org/mpl_toolkits/mplot3d/tutorial.html)。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:22:00.060

“紧凑流形”是指低维函数，如嵌入 3d 中的轨迹或表面？对于 R 中的表面问题，您有多种选择，具体取决于您想要的“参数”或“非参数”。可以在估计平均值 f(x,y) 的框架内应用各种回归样条曲线，如果这些值“紧密”间隔，您可能会得到一个相对准确和简单的汇总估计。有几种非参数方法，例如在包“locfit”、“akima”和“mgcv”中找到。（我不太确定如何统计估计 3 空间中的 1 维流形。）

编辑：但如果我确实想查看 3D 分布并了解它是参数曲线还是轨迹，我会使用 package:rgl 并将其绘制在可旋转的 3D 框架中。

如果您改为尝试形成凸包（插值这个词可能是错误的选择），那么我知道有 2-d 解决方案，并且怀疑搜索也会找到 3-d 解决方案。构建正确的搜索策略将取决于到目前为止 2 条评论所反映的具体情况。我推测，如果您想使用回归工作来创建边界，则可以尝试将第 1 和第 99 百分位数等较低和较高阶的统计数据建模为 (x,y) 的函数。Roger Koenker 的分位数回归包 'rq' 得到了很好的支持。

# java - 嵌套的 findViewById

> ID：12534815
> 
> 赞同：0
> 
> 时间：2012-09-21T16:54:32.953
> 
> 标签：java, android, android-layout, android-xml, findviewbyid

我在访问 LinearLayout 内的相对布局内的 TextView 时遇到这个问题

假设我在文件 row.xml 中有这些视图

```
<LinearLayout>
    <TextView android:id="@+id/title" />
    <RelativeLayout android:id="@+id/a_parent">
        <TextView android:id="@+id/a">
    </RelativeLayout>
    <RelativeLayout android:id="@+id/b_parent">
        <TextView android:id="@+id/b">
    </RelativeLayout>
</LinearLayout> 
```

现在我想从一个活动中更改 TextViews 的值

```
LayoutInflater li=(LayoutInflater)getSystemService(Context.LAYOUT_INFLATER_SERVICE);
LinearLayout temp=(LinearLayout) li.inflate(R.layout.row, null);
((TextView)temp.findViewById(R.id.title)).setText("This is title");
RelativeLayout rl=(RelativeLayout)temp.findViewById(R.id.a_parent);
((TextView)rl.findViewById(R.id.a)).setText("an this is the content of a"); 
```

我可以成功设置id为'title'的TextView，但是在接近最后一行时出现错误。它说错误是由 android.content.res.Resources$NotFoundException: String resource ID #0x1 引起的

谁能告诉我出了什么问题，如何修复它，以及为什么代码不能按我预期的那样工作？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:03:47.760

您的异常是字符串的 ResourcesNotFoundException。您是否使用设置 TextView 的值`getString`？如果是这样，您确定该字符串存在于您的 strings.xml 文件中吗？如果没有，您是否可能会使用`R.string.name`而不是引用您的一种观点`R.id.name`？看起来您修改了要发布的代码，如果您准确地发布了您在原始代码中所做的事情以及完整的堆栈跟踪，可能会更容易提供帮助。

有时会出现资源问题，因为 R 文件没有与新代码保持同步。我也会尝试重建/清理你的项目，看看是否有帮助。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:15:19.577

当您尝试在 Textview 中设置整数值时，通常会出现此错误，如下所示：

```
 textview.setText(1); 
```

在这种情况下，android 将认为整数值作为字符串资源 id 并检查字符串 strings.xml 并抛出 Resources$NotFoundException。请检查您的代码。如果没有发布您必要的代码和 logcat 输出。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-09-21T16:59:55.757

```
 LinearLayout temp=(LinearLayout) li.inflate(R.layout.row.... 
```

在您的 XML 文件中，LinearLayout 没有声明“android:id”属性。

# android - 如何强制 Eclipse 将 xml 布局和样式显示为文本？

> ID：12534818
> 
> 赞同：4
> 
> 时间：2012-09-21T16:54:48.250
> 
> 标签：android, xml, eclipse, adt, android-xml

我最近使用 ADT 20.0.3 升级到 Eclipse 4.2 (Juno)。

如果我从旧项目中查看布局或样式，Eclipse 只会向我显示其适当的基于控件的编辑器。我想编辑语法高亮的 xml 文本。我看不到将插件的编辑器切换到此模式的方法，尽管它会回退到它的布局，并且无法提供所见即所得的显示。

任何帮助将不胜感激。

**编辑**： 这个问题原来是我[最近在主题化 Eclipse 4.2 冒险](http://hoogli.com/blogs/android/index.html#Light_on_Dark_Eclipse_4.2_%28Juno%29_Themes)的副作用。使用**Dark Juno**主题，编辑器底部用于在文本和所见即所得视图之间切换的按钮完全消失（不仅仅是错误的颜色，零屏幕区域）。切换回默认主题可以解决问题。

为了 Da​​rk Juno 作者的利益，我注意到 Eclipse 在命令行上输出了这个（我的省略号）：

```
~$ eclipse
Failed to find defStyle: listViewStyle
...
Failed to find defStyle: textViewStyle
...
Failed to find defStyle: buttonStyle
... 
```

***编辑 2***：事实证明这是 Dark Juno 的一个已知问题： [https ://github.com/eclipse-color-theme/eclipse-ui-themes/issues/11](https://github.com/eclipse-color-theme/eclipse-ui-themes/issues/11)

有谁知道在不使用我看不到的按钮的情况下切换到文本的方法？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:10:47.537

使用 Alt+PgDn 在内部选项卡之间切换。

但我们需要黑暗朱诺的永久解决方案。希望尽快出补丁。

直到那时使用 Alt+PgDn。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-11-09T09:38:10.643

如果您在 Mac OS X 上使用 Eclipse，您可以使用以下组合键 ⌥⇟ 在子选项卡之间切换。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T16:57:18.880

您可以简单地选择显示原始代码的选项卡，而不是底部栏中的控件：

![在此处输入图像描述](../Images/0ffe7b3b9e39199fc0b85f84ad29b84e.png)

单击strings.xml 将打开语法高亮编辑器，您可以对所有XMl 文件执行此操作。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-09-21T17:00:03.120

![XML 编辑器](../Images/1a32f99fc3277bcdd2b8a3a0dccce4a0.png)像这样，使用 XML 编辑器或文本编辑器，如果您更喜欢的话。

希望能帮助到你

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2014-11-02T12:30:28.143

它似乎仍然没有修复。在 OS X 上，快捷方式是 Fn + Option + Up/Down（在 Windows 上有效 Alt + PageUp/PageDown）

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2015-02-01T16:45:31.460

要修复 Dark Juno 的错误，删除该行：

```
swt-tab-renderer: url(bundleclass://org.eclipse.e4.ui.workbench.renderers.swt/org.eclipse.e4.ui.workbench.renderers.swt.CTabRendering); 
```

来自“<strong>com.github.eclipsecolortheme.themes/themes/css/juno.css”中的**CTabFolder**元素。

参考： [https ://github.com/rogerdudler/eclipse-ui-themes/issues/11#issuecomment-11439747](https://github.com/rogerdudler/eclipse-ui-themes/issues/11#issuecomment-11439747)

# c++ - “const arguments and non-cost return statement”可能吗？

> ID：12534825
> 
> 赞同：-1
> 
> 时间：2012-09-21T16:55:13.350
> 
> 标签：c++, constants

下面的函数定义是否合法？

```
T& GetMax(const T& t1, const T& t2)
{
    if (t1 > t2)
    {
        return t2;
    }
    // else 
    return t2;
} 
```

它写道：“在返回语句中，编译器会抱怨 t1 或 t2 不能转换为非常量。” 我在这个网站上读到它：http: [//www.codeproject.com/Articles/257589/An-Idiots-Guide-to-Cplusplus-Templates-Part-1](http://www.codeproject.com/Articles/257589/An-Idiots-Guide-to-Cplusplus-Templates-Part-1)

这是否意味着它是非法的，如果不是还有什么？你能提供使用它的例子吗？你能给我一些明确的解释吗？提前致谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T16:58:37.393

定义很好。该函数可以返回对其他变量的引用，而不是`t1`or `t2`。`t1`如果您尝试返回或，编译器只会抱怨`t2`。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T16:58:29.317

为什么它应该是非法的？您的函数可以使用一些全局状态来返回，但禁止返回其参数。

```
int& foo(const int& a, const int& b)
{
    static int c = a + b;
    return c;
} 
```

**添加**

你不能返回你的论点之一，因为它会违反`const`约束。你可以

*   按值从函数返回
*   使用非常量参数类型

如果可以在您的情况下返回非常量，则可以编写

```
foo(5, 4) = 3; 
```

这没有任何意义。

您也不能返回对在函数内部创建的一些临时自动变量的引用，因为它会在函数完成时被销毁。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T17:33:02.750

这是**非法**的，**编译器会给出错误信息**。

原因是函数返回 a`const`与其对返回值的定义相反；即因为返回值没有被定义为`const`. 但是，有问题的不是签名；问题出在 return 语句中，这就是编译器在 return 语句中给出错误的原因。

如果您以这种方式更改它：

```
const T& GetMax(const T& t1, const T& t2)
{
    if (t1 > t2)
    {
        return t2;
    }
    // else 
    return t2;
} 
```

the code will be compiled with no errors. However, if outside of this function somewhere else you do:

```
GetMax(x,y) = 0; 
```

the compiler would fail at this line because you are assigning value to a const (= the return value of the function).

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-09-21T16:58:27.553

返回引用是合法的，但不建议返回，因为引用通常是局部变量。您通常会返回一个指向您已“新建”的对象的指针，但随后调用者将不得不删除该项目。如果您必须使用您的格式，则必须创建一个输入的本地克隆并返回它。

# php - 在 php 验证 .csv 文件中，最后一列永远不会为空，除了最后一行。如何检查换行符

> ID：12534827
> 
> 赞同：0
> 
> 时间：2012-09-21T16:55:13.573
> 
> 标签：php, validation, csv

你好我有这个问题。

我有一个要验证的 .csv，所有变量都不能为空。

如果我的 .csv 是

```
A;ABC;
A;A;
A;A;
A;A; 
```

读取这个文件的 php 看起来像：

```
$fd = fopen("uploads/".$nombreArchivo,"r");
        while (!feof($fd)){
                $lineTexto++;
                $reg = fgets($fd);
                $arreglo = explode(";", $reg);
                if(count($arreglo)==3){
                    if(!$arreglo[2]){
                        $_SESSION["info"]=$_SESSION["info"]."The cell 3 of the line $lineTexto can not be null<br/>";
                    }
                }
                else{
                    $_SESSION["info"]=$_SESSION["info"]."Número de líneas incorrectos en la linea $lineTexto<br/>";
                }
            } 
```

结果是

**第 4 行的单元格 3 不能为空**

那么所有其他有换行符但它们为空的行呢？

谢谢你的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:09:50.747

它们不是空的 .. 问题是它们包含空白空间，您可以通过使用来解决这个问题`trim`

```
 if (count($arreglo) == 3) {
        $arreglo[2] = trim($arreglo[2]);
        if (! $arreglo[2]) {
            echo "The cell 3 of the line $lineTexto can not be null<br/>";
        }
    } else {
        echo "Número de líneas incorrectos en la linea $lineTexto<br/>";
    } 
```

示例输出

```
The cell 3 of the line 1 can not be null
The cell 3 of the line 2 can not be null
The cell 3 of the line 3 can not be null
The cell 3 of the line 4 can not be null 
```

# c# - 如何在 ASP.NET MVC 2 应用程序中进行复杂的模型验证？

> ID：12534828
> 
> 赞同：0
> 
> 时间：2012-09-21T16:55:20.890
> 
> 标签：c#, asp.net-mvc, validation, asp.net-mvc-2

一段时间以来，我一直在努力重构我如何进行模型验证。我的应用程序都是 ASP.NET MVC 2（.Net 3.5 框架）。我已经阅读了这个主题的相关问题，它们与我所问的并不完全相同。

目前，对于页面验证，我通常坚持使用 if/else 语句的大杂烩。问题是，如果字段 A 是某个值，有时会验证字段 B，但字段 A 也有自己的验证。在某些情况下，有一些角色会发挥作用，这也可能取决于用户的角色（即不验证具有角色 x 的用户无法修改的字段）。

我的问题归结为：

1）如何以更易于阅读的方式处理验证？我已经查看了 DataAnnotations，但它们还不够。数据注释处理字段值的验证，因为可能需要完成的验证取决于字段的值和对象上其他属性的值。

2) 如何将验证框架与 ASP.NET MVC 2 集成？

我现在真正讨厌我如何进行验证的事情是，当我添加一个模型错误时，我正在硬编码该属性的密钥。这很糟糕。不过，我不确定如何获取所述属性的密钥，以使其与 html 助手创建的 html 字段匹配。

例如，在我看来，我正在使用编辑器模板来显示我的客户对象的字段。

```
 <%= Html.EditorFor(m => m.CustomerInfo) %> 
```

生成的部分 html 为 FirstName 创建了字段：

```
<input id="CustomerInfo_FirstName" name="CustomerInfo.FirstName" style="width:330px;" type="text" value="John" /> 
```

为了让框架仍然使用必要的 CSS 突出显示该字段，我强制执行此验证，如下所示：

```
//Ignore that this can be done with DataAnnotations. This is just a simple example.   
if (String.IsnullOrEmpty(customerInfo.FirstName) )
{
    ModelState.AddModelError("CustomerInfo.FirstName",
    "First Name is required.");
} 
```

这是我认为的主要问题。我没有很好的方法来知道页面上字段的名称。它似乎采取的模式

```
 <objectname>.<propertyname> 
```

，但我真的想要更可靠的东西。

要获取对象名称，我想我可以将它从 ModelBindingContext 类中拉出来，但我不确定如何从控制器内部获取它的实例。对于属性名称，我可以使用某种 lambda，它将属性名称作为字符串返回。

总而言之，我正在寻找： 1) 某种允许复杂验证的验证框架 2) 某种方法来识别要在 ModelState.AddModelError 方法中使用的密钥，以便 MVC 的错误样式仍然有效。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:03:58.580

你真的在寻找[FluentValidation](http://fluentvalidation.codeplex.com/)

但是，我不确定它是否支持 MVC2。它确实支持 MVC3 和 MVC4。

来自其网站的示例代码：

```
public class CustomerValidator: AbstractValidator<Customer> {
  public CustomerValidator() {
    RuleFor(customer => customer.Surname).NotEmpty();
    RuleFor(customer => customer.Forename).NotEmpty().WithMessage("Please specify a first name");
    RuleFor(customer => customer.Company).NotNull();
    RuleFor(customer => customer.Discount).NotEqual(0).When(customer => customer.HasDiscount);
    RuleFor(customer => customer.Address).Length(20, 250);
    RuleFor(customer => customer.Postcode).Must(BeAValidPostcode).WithMessage("Please specify a valid postcode");
  }

  private bool BeAValidPostcode(string postcode) {
    // custom postcode validating logic goes here
  }
} 
```

# objective-c - GCD - dispatch_barrier_async - 等待完成

> ID：12534832
> 
> 赞同：2
> 
> 时间：2012-09-21T16:55:36.267
> 
> 标签：objective-c, grand-central-dispatch

我有这个代码

```
-(void) Method {

    // WAIT_CODE

    dispatch_async(myQueue,^{ CODE 1});
    dispatch_async(myQueue,^{ CODE 2});  
    dispatch_barrier_async(myQueue,^{
        // SOME CODE
        dispatch_async(dispatch_get_main_queue(), ^{GUI UPDATE }
    });
} 
```

问题是，当我再次调用此方法并且尚未执行某些代码时，我需要等待 WAIT_CODE 才能继续（但 GUI 必须保持活动状态）......我该怎么做？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:32:36.973

选项 1) 添加第二个串行队列是否有意义，以便 -method 中的代码仅在没有其他对该方法的调用正在执行时运行？

例如，在调用者中，您将拥有：

```
mySerialQueue = dispatch_queue_create("com.myapp.my-serial-queue", DISPATCH_QUEUE_SERIAL);
dispatch_async(mySerialQueue, [self method]); 
```

选项 2）使 myQueue 串行而不是并发（我假设它是并发的，因为 dispatch_barrier_async() 仅适用于您拥有的并发队列）。

```
myQueue = dispatch_queue_create("com.myapp.myqueue", DISPATCH_QUEUE_SERIAL);    
dispatch_async(myQueue,^{ CODE 1});
dispatch_async(myQueue,^{ CODE 2});  
dispatch_async(myQueue,^{
   SOME CODE
   dispatch_async(myQueue,^{
      WAIT_CODE
      dispatch_async(dispatch_get_main_queue(), ^{GUI UPDATE }
   });
}); 
```

选项 3) 重新排序代码以在 SOME_CODE 之后添加 WAIT_CODE

```
dispatch_async(myQueue,^{ CODE 1});
dispatch_async(myQueue,^{ CODE 2});  
dispatch_barrier_async(myQueue,^{
    SOME CODE  // this code must block
    WAIT_CODE  // this code must block
    dispatch_async(dispatch_get_main_queue(), ^{ GUI UPDATE }
}); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-22T05:33:11.373

您还可以使用信号量进行同步。这是您的代码的结构方式。

```
-(void) Method 
{

  // Declared dispatch_semaphore_t _synch;
  // in init: _synch = dispatch_semaphore_create(1);
  // in dealloc: dispatch_release(_synch);
  //
  // Initialized with 1 so first call goes through.
  // Subsequent calls are serialized and must wait on a signal.
  //
  dispatch_time_t blockingSleepSecondsIfNotDone = 0.01;
  while (!dispatch_semaphore_wait(wait, DISPATCH_TIME_NOW))
      usleep(USEC_PER_SEC * blockingSleepSecondsIfNotDone);

  WAIT_CODE

  dispatch_async(myQueue,^{ CODE 1});
  dispatch_async(myQueue,^{ CODE 2});  
  dispatch_barrier_async(myQueue,^{
    SOME CODE
    dispatch_semaphore_signal(_synch);
    dispatch_async(dispatch_get_main_queue(), ^{GUI UPDATE }
  });
} 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T21:24:22.917

你想做什么？

为什么你必须等待？

如果再次调用此函数时队列仍在执行，则那些“新”块将入队，直到块运行`SOME CODE`后才会执行。`SOME CODE`我假设`myQueue`是一个并发队列。屏障调用将等待所有先前排队的块在运行之前执行。此外，它将是队列上唯一运行的块，直到它完成，然后队列将恢复并发执行块。

# php - PHP 多行字符串与 PHP

> ID：12534836
> 
> 赞同：44
> 
> 时间：2012-09-21T16:55:47.227
> 
> 标签：php, html, multiline

我需要回显很多 PHP 和 HTML。

我已经尝试了明显的，但它不起作用：

```
<?php echo '
<?php if ( has_post_thumbnail() ) {   ?>
      <div class="gridly-image"><a href="<?php the_permalink() ?>"><?php the_post_thumbnail('summary-image', array('class' => 'overlay', 'title'=> the_title('Read Article ',' now',false) ));?></a>
      </div>
      <?php }  ?>

      <div class="date">
      <span class="day">
        <?php the_time('d') ?></span>
      <div class="holder">
        <span class="month">
          <?php the_time('M') ?></span>
        <span class="year">
          <?php the_time('Y') ?></span>
      </div>
    </div>
    <?php }  ?>';
?> 
```

我该怎么做？

* * *

## 回答 #1

> 赞同：53
> 
> 时间：2012-09-21T16:59:57.427

您不需要输出`php`标签：

```
<?php 
    if ( has_post_thumbnail() ) 
    {
        echo '<div class="gridly-image"><a href="'. the_permalink() .'">'. the_post_thumbnail('summary-image', array('class' => 'overlay', 'title'=> the_title('Read Article ',' now',false) )) .'</a></div>';
    }

    echo '<div class="date">
              <span class="day">'. the_time('d') .'</span>
              <div class="holder">
                <span class="month">'. the_time('M') .'</span>
                <span class="year">'. the_time('Y') .'</span>
              </div>
          </div>';
?> 
```

* * *

## 回答 #2

> 赞同：51
> 
> 时间：2012-09-21T16:58:30.393

您不能在这样的字符串中运行 PHP 代码。它只是行不通。同样，当您“退出” PHP 代码 ( `?>`) 时，PHP 块之外的任何文本都被视为输出，因此不需要该`echo`语句。

如果您确实需要使用一大段 PHP 代码进行多行输出，请考虑使用[HEREDOC](http://php.net/heredoc)：

```
<?php

$var = 'Howdy';

echo <<<EOL
This is output
And this is a new line
blah blah blah and this following $var will actually say Howdy as well

and now the output ends
EOL; 
```

* * *

## 回答 #3

> 赞同：22
> 
> 时间：2012-09-21T17:02:04.880

使用 Heredocs 输出包含变量的多行字符串。语法是...

```
$string = <<<HEREDOC
   string stuff here
HEREDOC; 
```

“HEREDOC”部分就像引号一样，可以是任何你想要的。结束标记必须是它所在行的唯一内容，即前后没有空格，并且必须以冒号结尾。有关更多信息[，请查看手册](http://www.php.net/manual/en/language.types.string.php#language.types.string.syntax.heredoc)。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2017-02-13T09:46:22.163

## 使用冒号表示法

另一种选择是使用`if`带有冒号 ( `:`) 和 a 的`endif`而不是括号：

```
<?php if ( has_post_thumbnail() ): ?>
    <div class="gridly-image">
        <a href="<?php the_permalink(); ?>">
        <?php the_post_thumbnail('summary-image', array('class' => 'overlay', 'title'=> the_title('Read Article ',' now',false) )); ?>
        </a>
    </div>
<?php endif; ?>

<div class="date">
    <span class="day"><?php the_time('d'); ?></span>
    <div class="holder">
        <span class="month"><?php the_time('M'); ?></span>
        <span class="year"><?php the_time('Y'); ?></span>
    </div>
</div> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T16:59:58.303

代码中的内部单引号集正在杀死字符串。每当您点击单引号时，它都会结束字符串并继续处理。你会想要这样的东西：

```
$thisstring = 'this string is long \' in needs escaped single quotes or nothing will run'; 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-09-21T17:11:19.210

使用`show_source();`PHP的功能。*[在show_source](http://www.php.net/manual/en/function.show-source.php)*中查看更多详细信息。我想这是一个更好的方法。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-09-21T17:03:18.803

为此，您必须删除`'`字符串中的所有字符或使用转义字符。喜欢：

```
<?php
    echo '<?php
              echo \'hello world\';
          ?>';
?> 
```

# ios - iphone 应用程序永远不会在设备上运行

> ID：12534841
> 
> 赞同：0
> 
> 时间：2012-09-21T16:55:57.593
> 
> 标签：ios, xcode, cordova, ios4

我在旧 iPhone 3G 上进行测试，我刚刚将它更新到 4.2.1，它在我的苹果配置文件中作为测​​试设备。iTunes 认为它​​很好，但我尝试安装该应用程序，但它从未在设备上运行。XCode 说没有问题，但是当我尝试从临时存档安装时，它说 iphone 不兼容。我将目标上的构建设置设置为 iOS 部署目标 4.0 和 SDK 5.1。我也在使用 Phonegap 2.0.0

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:22:32.360

iPhone 3G 具有 armv6 架构，请检查构建是否支持该架构。

# algorithm - 《破解编码面试（第四版）》：4.7 子树检查

> ID：12534842
> 
> 赞同：0
> 
> 时间：2012-09-21T16:56:04.053
> 
> 标签：algorithm, binary-tree, subtree

> 您有两棵非常大的树：T1，有数百万个节点，T2，有数百个节点。创建一个算法来确定 T2 是否是 T1 的子树

作者给出了一个蛮力搜索的解决方案，就是一个节点一个节点比较。以下是代码：

```
boolean containsTree(TreeNode t1, TreeNode t2) {
    if (t2 == null) return true;
    else return subTree(t1, t2);
}

boolean subTree(TreeNode r1, TreeNode r2) {
    if(r1 == null)
        return false;
    if(r1.data = r2.data){
        if(matchTreee(r1, r2)) return true;
    }
    return ( subTree(r1.left, r2) || subTree(r1.right, r2) );
}

boolean matchTree(TreeNode r1, TreeNode r2){
    if (r2 == null && r1 == null)
        return true;
    if (r1 == null || r2 == null)
        return false; //big tree empty & subtree still not found
    if (r1.data != r2.data)
        return false;
    return (matchTree(r1.left, r2.left) && matchTree(r1.right, r2.right));
} 
```

在上面的代码中，我不同意函数的基本情况`matchTree`

```
if (r2 == null && r1 == null)
    return true;
if (r1 == null || r2 == null)
    return false; // big tree empty & subtree still not found 
```

根据我的理解，基本情况应该是：

```
 if(r2 == null) return true; //if r2 is null, r2 must match r1 
no matter r1 is null or not
    if(r1 == null) return false; //r1 == null means big tree empty 
and we already know r2 != null, so r2 must not match r1. 
```

大家可以帮我验证一下吗？

谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:32:29.987

在我看来，这本书的作者与`T2 is a subtree of T1`你的定义不同。

例如，考虑下面的树（疯狂的绘画技能）：

![树木](../Images/0117ab3c4b14d217572ed32a5a8c9762.png)

作者的代码认为 T3 是 T1 的子树，但不是 T2。您认为 T2 和 T3 都是 T1 的子树。

也就是说，我认为您的基本案例对于“子树”的“自然”定义更有意义。

C# 测试代码（`data`类型为`int`）：

```
var t1 = new TreeNode() { data = 0,
    left = new TreeNode() { data = 1,
        left = new TreeNode() { data = 2 },
        right = new TreeNode() { data = 3, 
            right = new TreeNode() { data = 4 } } } };

var t2 = new TreeNode() { data = 1,
    left = new TreeNode() { data = 2 },
    right = new TreeNode() { data = 3 } };

var t3 = new TreeNode() { data = 1,
    left = new TreeNode() { data = 2 },
    right = new TreeNode() { data = 3,
        right = new TreeNode() { data = 4 } } }; 
```

# c# - 创建值嵌套泛型类型并将其分配给变量

> ID：12534844
> 
> 赞同：0
> 
> 时间：2012-09-21T16:56:11.753
> 
> 标签：c#, generics, nested, nested-generics

在这里我创建了类型的变量约会`Pair<Pair <int, int>, String>`我想创建一个这种类型的值并将其分配给约会。

有人可以帮我吗？我是 C# 和编程的新手。

```
Pair< Pair<int, int>, String> appointment = new Pair<Pair<int,int>,String>; 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:02:12.543

假设`Pair`有一个带有两个参数的构造函数

```
Pair<Pair<int,int>,string> appointment = new Pair<Pair<int,int>,string>(
    new Pair<int,int>(x, y),
    "hello"
); 
```

或更简洁

```
var appointment = new Pair<Pair<int,int>,string>(
    new Pair<int,int>(x, y),
    "hello"
); 
```

或使用对象初始化器（假设`Pair`有两个名为`Arg1`and的属性`Arg2`）

```
var appointment = new Pair<Pair<int,int>,string> {
    Arg1 = new Pair<int,int> { Arg1 = x, Arg2 = y),
    Arg2 = "hello"
}; 
```

或者如果你想创建一个空的`Pair`

```
var appointment = new Pair<Pair<int,int>,string>(); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:11:59.053

假设 Pair 类具有以下带有公共设置器的公共属性：

```
public Pair<T, T> Nested { get; set; }

public string Name { get; set ; } 
```

那么你也可以这样做：

```
var appoinment = new Pair<Pair<int,int>,string>
{
     Nested = new Pair<int,int>(1, 2),   
     Name = "Eric"
}; 
```

# java - 为什么 Maven 需要相同版本的不同依赖项？

> ID：12534849
> 
> 赞同：1
> 
> 时间：2012-09-21T16:56:29.037
> 
> 标签：java, maven, jersey

我是一名在 Java 方面有相当丰富经验的学生，但对 Maven 完全陌生。

我试图用 jersey-server 和 jersey-client 实现一个 RESTful 服务提供者和客户端。两者都依赖 jersey-json，利用 POJO 和 JSON 之间的自动转换。它们都依赖于我自己实现的服务模型，POJO 定义所在的位置。

但是，该代码对我不起作用。我花了好几个小时在 Internet 上到处寻找解决方案。原来失败的原因是我不小心将 jersey-server 和 jersey-client 的版本指定为 1.14，而 jersey-json 为 1.9.1。

服务器一开始不工作，但在某个时候突然开始工作。（我不知道这是怎么发生的。）在我将 jersey-json 版本更改为 1.14 之前，客户端从未工作过。

为什么我需要为这些不同的依赖项使用相同的版本？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:01:14.793

因为一个依赖于另一个，否则存在兼容性问题。这就是依赖管理的全部内容。运行`mvn dependency:tree`以查看这些库之间的确切关系。

在这种情况下，Jersey 库似乎都作为“捆绑包”一起发布 - 您需要一起使用这些捆绑包中的版本。见：http: [//jersey.java.net/nonav/documentation/latest/chapter_deps.html](http://jersey.java.net/nonav/documentation/latest/chapter_deps.html)

请注意，这是 Jersey 库的属性，而不是 Maven。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:01:11.093

通常，来自同一发行版的不同 jar 会一起测试并给出相同的版本号。

如果您尝试混合不同的版本，它可能会起作用，也可能不会，因为它不是预期或测试的组合。

# javascript - jquery仅在选择某些选项时才启用选择

> ID：12534853
> 
> 赞同：-1
> 
> 时间：2012-09-21T16:56:45.247
> 
> 标签：javascript, jquery, html

我有这个以 1 选择禁用和 4 个选项开头的表单我需要一个执行此操作的 jquery：

如果 OPTION #1 **（单击时）**检查是否选择了其他选项并重置（删除值并取消选中框）

如果选项#2 **（点击时）**激活选择菜单并检查是否选择了其他选项并重置（擦除值并取消选中框）

如果 OPTION #3 **（单击时）**检查是否选择了其他选项并重置（删除值并取消选中框）

如果 OPTION #4 **(on keyup)** ACTIVATE 选择菜单 RESET 和 DISABLE 其他选项

```
<!DOCTYPE html>
<html>
<script type="text/javascript">
    $(document).ready(function()
        {   

        }); 
</script>               
<body>
<select name="menus" id="menus" style="width:500px; height:200px" size="3"  disabled="disabled">
<option value="">Test#1</option>
<option value="">Test#2</option>
</select>
<div>
Option #1 <input name="op1" type="checkbox" value="">
</div>
<div>
Option #2 <input name="op2" type="checkbox" value="">
</div>
<div>
Option #3 <input name="op3" type="checkbox" value="">
</div>
<div>
Option #4 <input name="" type="text">
</div>
</body>
</html> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:16:48.060

**更新小提琴：http:** [//jsfiddle.net/zZSJb/3/](http://jsfiddle.net/zZSJb/3/)

* * *

像这样的东西：http: [//jsfiddle.net/zZSJb/](http://jsfiddle.net/zZSJb/)

```
$('#op1, #op3').click(function() {
    $('input[type="checkbox"]').removeAttr('checked');
    $(this).attr('checked', true);
});

$('#op2').click(function() {
    $('#menus').removeAttr('disabled');
    $('input[type="checkbox"]').removeAttr('checked');    
    $(this).attr('checked', true);
});

$('#txt').keyup(function() {
    $('#menus').removeAttr('disabled');
    $('input[type="checkbox"]').removeAttr('checked').attr('disabled', true);
}); 
```

您可能需要根据您的确切需求对其进行微调（我无法完全弄清楚！）。

# sql - 如何在非英语系统上引用 NT AUTHORITY\Authenticated Users？

> ID：12534855
> 
> 赞同：3
> 
> 时间：2012-09-21T16:56:53.547
> 
> 标签：sql, sql-server, windows

我有一个脚本可以授予数据库中程序集的权限，但是执行失败，因为 NT AUTHORITY\Authenticated Users 不存在。

这是一个非英语系统。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T18:34:48.893

您可以结合小鲍比和大卫的答案：

在英文系统上，获取所需帐户的 SID：

```
 select suser_sid('NT AUTHORITY\authenticated users') 
```

在代码中使用此 sid 获取本地名称：

```
 select suser_sname(0x01010000000000050B000000) 
```

在这两者之间，您可以获取名称并构建动态 SQL 以授予您想要的权限。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T18:27:44.363

您需要使用适当[的知名安全标识符](http://support.microsoft.com/kb/243330)。在您的情况下，它是：

```
SID: S-1-5-11
Name: Authenticated Users 
```

# html - 在 Rails 的 label_tag 中包含表单元素

> ID：12534857
> 
> 赞同：2
> 
> 时间：2012-09-21T16:57:05.307
> 
> 标签：html, css, ruby-on-rails, ruby-on-rails-3, ruby-on-rails-3.2

我想将我的文本字段和其他表单元素包含在标签标记中：

```
<label for="answer">Give it to me: <input type="text" id="answer" name="answer"/></label> 
```

这样我可以有以下CSS：

```
label {
   white-space: nowrap;
} 
```

然后标签和表单元素永远不会分成不同的行。我知道我可以用 a 包围整个标签和表单元素`<span>`并在其上使用`white-space: nowrap;`，但我喜欢有一个涵盖所有内容的标签。至少有时。

问题是如何在 Rails 中使用他们的`label_tag`表单助手来做到这一点。我应该只在 label_tag 调用中包含其他表单元素吗？

```
<%= label_tag 'answer', "Give it to me: #{text_field_tag 'answer', @prev_answer, placeholder: 'Enter answer', class: 'special'}" %> 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:31:38.847

您可以使用`label_tag`. 像这样的东西：

```
<%= label_tag 'answer' do %>
  Give it to me: <%= text_field_tag 'answer', @prev_answer %>
<% end %> 
```

更多信息：
[http ://openmonkey.com/blog/2010/03/30/rails-label-helpers-with-blocks/](http://openmonkey.com/blog/2010/03/30/rails-label-helpers-with-blocks/)
[将块传递给rails3中的标签助手](https://stackoverflow.com/questions/6088348/passing-block-to-label-helper-in-rails3)

# iphone - 浏览器大小 html css

> ID：12534858
> 
> 赞同：1
> 
> 时间：2012-09-21T16:57:08.460
> 
> 标签：iphone, html, css, resize

我一直在使用以下css代码：

```
#MainBox
{   width: 488px;
    height: 181px;
    position: absolute;
    left: 50%;
    top: 236px; 
    margin-left: -244px; //this being half the width
} 
```

确保页面上的项目居中。问题是，当在 iphone 上查看此内容时（我假设在其他智能手机上类似），页面的左侧被切掉了！有谁知道我如何解决这个问题并使一切适应？

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T16:59:18.193

您正在使用该 CSS 将元素向左移动 244 像素，而 iphone 屏幕非常小，导致它被切断。尝试这个：

```
#MainBox{
    width: 488px;
    height: 181px;
    margin: 236px auto 0 auto;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:00:33.517

上面将 div 居中的技术有点过时了。使用边距：自动，宽度为固定值（您已经拥有），并使父位置：相对。

# c# - gZipBuffer 压缩从 C# 转换为 F#

> ID：12534866
> 
> 赞同：2
> 
> 时间：2012-09-21T16:57:36.880
> 
> 标签：c#, f#

我尝试学习 F#，此时我尝试将一个简单的 C# 函数转换为 F#，在某些方面我停留在 example `var compressedData = new byte[memoryStream.Length];`< C# here the full c# function

```
public static string CompressString(string text)
{
    byte[] buffer = Encoding.UTF8.GetBytes(text);
    var memoryStream = new MemoryStream();
    using (var gZipStream = new GZipStream(memoryStream, CompressionMode.Compress, true))
    {
        gZipStream.Write(buffer, 0, buffer.Length);
    }

    memoryStream.Position = 0;

    var compressedData = new byte[memoryStream.Length];
    memoryStream.Read(compressedData, 0, compressedData.Length);

    var gZipBuffer = new byte[compressedData.Length + 4];
    Buffer.BlockCopy(compressedData, 0, gZipBuffer, 4, compressedData.Length);
    Buffer.BlockCopy(BitConverter.GetBytes(buffer.Length), 0, gZipBuffer, 0, 4);
    return Convert.ToBase64String(gZipBuffer);
} 
```

这里是我的一半翻译版本

```
let compress(text:string)=
    let buffer = Encoding.UTF8.GetBytes(text)
    use memoryStream = new MemoryStream()
    let gZipStream = new GZipStream(memoryStream, CompressionMode.Compress, true)
    gZipStream.Write(buffer, 0, buffer.Length)
    memoryStream.Position <- Convert.ToInt64(0)
    let compressedData = Array.init memoryStream.Length(fun i -> byte) //< Here i stuck
    memoryStream.Read(compressedData, 0, compressedData.Length)
    use gZipBuffer = (compressedData.Length + 4) 
```

最近三天我在谷歌上搜索以解决我的问题，但我没有找到任何解决方案。我希望这里有人可以帮助我:) 非常感谢你提前

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:54:40.817

**编辑：**修复了翻译，因此它可以编译（现在应该可以工作了）。

```
open System
open System.IO
open System.IO.Compression
open System.Text

let compressString (text : string) =
    let buffer = Encoding.UTF8.GetBytes text
    using (new MemoryStream ()) <| fun memoryStream ->
        using (new GZipStream(memoryStream, CompressionMode.Compress, true)) <| fun gzipStream ->
            gzipStream.Write (buffer, 0, Array.length buffer)

        memoryStream.Position <- 0L

        let compressedData = Array.zeroCreate (int memoryStream.Length)

        let numBytesRead = memoryStream.Read (compressedData, 0, compressedData.Length)
        if numBytesRead = compressedData.Length then
            let gzipBuffer = Array.zeroCreate (compressedData.Length + 4)
            Buffer.BlockCopy (compressedData, 0, gzipBuffer, 4, compressedData.Length)
            Buffer.BlockCopy (BitConverter.GetBytes buffer.Length, 0, gzipBuffer, 0, 4)
            Convert.ToBase64String gzipBuffer
        else
            failwithf "Tried to read %i bytes but was only able to read %i."
                compressedData.Length numBytesRead 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:44:13.517

你正在寻找[`Array.zeroCreate`](http://msdn.microsoft.com/en-us/library/ee340488.aspx).

```
let compressedData = Array.zeroCreate (int memoryStream.Length) 
```

# git - 分叉一个项目时，你如何获取最新的？

> ID：12534867
> 
> 赞同：1
> 
> 时间：2012-09-21T16:57:39.193
> 
> 标签：git, github

在 github 上，如果我 fork 一个项目，如何从我 fork 的原始项目中提取最新的？

我实际上是在创建分叉项目的副本，我假设这是一个手动过程，每次分叉项目发生变化时我都必须这样做，对吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:01:38.710

我将以[Symfony 2 存储库](http://github.com/symfony/symfony)为例。
假设你已经分叉了它：

```
git remote add upstream git://github.com/symfony/symfony.git
git fetch upstream
git merge upstream/master 
```

# flash - AS2 - 同时播放多种声音

> ID：12534868
> 
> 赞同：1
> 
> 时间：2012-09-21T16:57:45.397
> 
> 标签：flash, actionscript-2, flash-cs4

我正在开发一个小 Flash 游戏，但我在同时播放不同的声音时遇到了麻烦。

例如，当玩家通过塔时，会发出锣声；当玩家跳跃时，会播放跳跃声音。这两个动作可以同时发生，如果是这种情况，两个声音应该一起播放（重叠）。

这些声音声明如下：

```
s_jumping = new Sound();  
s_jumping.attachSound("s_jump");  
s_noise2 = new Sound();  
s_noise2.attachSound("s_gong"); 
```

然后（在需要时）用简单的`s_jumping.start(0,1);`or调用它们`s_noise2.start(0,1);`。
在我的代码中，我从未调用过 a`s_jumping.stop()`或`s_noise2.stop()`.

这些声音单独播放时效果很好，但当一起播放时，它就不起作用了。当第二个声音响起时，第一个声音停止。

我认为使用`new Sound()`不同的变量名意味着这些声音将单独存在。相反，它就像一种声音覆盖了另一种声音。

我究竟做错了什么？

（注意：我并不想在这里播放大量声音。在我的测试中，最多同时有 3 个声音。）

**更新：**经过进一步测试，如果我删除我拥有的一个背景声音，这些声音会正常播放。所以我似乎达到了某种极限。奇怪的是，目前我最多同时播放 3 或 4 个声音。从我读到的至少8个声音应该没问题！
（注意：使用 Flash CS4、actionscript 2，并为 Flash Player 8 导出。）

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-26T09:11:10.550

好的，看来问题是由于停止功能使用不当引起的。

显然，`s_jumping.stop();`将停止**所有声音**，而不仅仅是“s_jumping”声音。

要只停止一种声音，您必须将其标识符（在“export for ActionScript”下的声音属性中声明）作为参数传递：

`s_jumping.stop('s_jump');`

我不太了解这里的逻辑，但至少它现在按预期工作。^^

# .net - ldap 身份验证的 dn 语法错误

> ID：12534875
> 
> 赞同：0
> 
> 时间：2012-09-21T16:58:00.427
> 
> 标签：.net, authentication, ldap, dn

我在编写可以执行 LDAP 身份验证的模块时遇到困难。

当我在浏览器中输入以下行并按 Enter 键时，Windows 联系人应用程序将向我显示来自服务器的记录，因此我知道这是连接到的正确位置：

> ldap://directory.abc.edu/uid=asmith,ou=People,o=abc.edu

但是当我想在代码中使用相同的东西时，我收到**“无效的 dn 语法”**错误消息。

这是我的代码：

```
public void LDAPResult()
        {           
            using (DirectoryEntry root = new DirectoryEntry(string.Format(@"LDAP://directory.abc.edu/uid=asmith,ou=People,o=abc.edu")))
            {
                using (DirectorySearcher searcher = new DirectorySearcher(root))
                {
                    //This following line give me the error
                    **SearchResultCollection results = searcher.FindAll();**

//The rest is not actually important, I never get there to see if it works properly.
                    StringBuilder summary = new StringBuilder();
                    foreach (SearchResult result in results)
                    {
                        foreach (string propName in result.Properties.PropertyNames)
                        {
                            foreach (string s in result.Properties[propName])
                            {
                                summary.Append(" " + propName + ": " + s + "\r\n");
                            }
                        }
                        summary.Append("\r\n");
                    }
                    Console.WriteLine(summary);
                }
            }            
        } 
```

对此的任何帮助都非常感谢。谢谢，

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T19:35:44.927

我不确定您要连接到哪个 LDAP 目录，但您的 DN 看起来不太正确。

尤其是“o=abc.edu”部分。在 Active Directory（我最熟悉的目录）中，DN 最终会变成 uid=asmith,ou=People,dc=abc,dc=edu。请注意，abc 和 edu 是明显不同的部分。由于您使用的是 O 而不是 DC，我猜该目录不是 AD，但域名的部分可能仍使用两个 o 表示。o=abc,o=edu 也许？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T19:22:33.167

你应该看看这里

[使用 DirectoryServices 从 C# 连接到 LDAP](https://stackoverflow.com/questions/1437250/connecting-to-ldap-from-c-sharp-using-directoryservices)

和这里

[.Net 中的 LDAP 目录条目 - 不适用于 OU=Users](https://stackoverflow.com/questions/1405011/ldap-directory-entry-in-net-not-working-with-ou-users)

特别是对于“new DirectoryEntry(...)”的用法:)

# sql - 使用 WITH RECURSIVE 查找所有复合类型组件类型

> ID：12534876
> 
> 赞同：0
> 
> 时间：2012-09-21T16:58:07.747
> 
> 标签：sql, postgresql, recursive-cte

给定`typname`复合类型，如何*递归*`oids`查找所有组件类型的类型？

 *例子：

```
CREATE TYPE t_station AS (x INT,
                          y INT,
                          label VARCHAR);

CREATE TYPE t_address AS (city VARCHAR,
                          street VARCHAR,
                          no INT,
                          stations t_station[]);

CREATE TYPE t_employee AS (name VARCHAR,
                           age INT,
                           coins INT[],
                           notes VARCHAR,
                           address t_address); 
```

我可以得到`oids`成员的类型`t_employee`：

```
SELECT
   t.typname, t.oid, a.attname, a.atttypid
FROM
   pg_attribute a INNER JOIN pg_type t ON a.attrelid = t.typrelid
   AND t.typname = 't_employee' 
```

但我需要递归，我想这可以使用`WITH RECURSIVE`：

```
WITH RECURSIVE allattrs(typname, oid, attname, atttypid) AS (
  select t.typname, t.oid, a.attname, a.atttypid from pg_attribute a inner join pg_type t on a.attrelid = t.typrelid and t.typname = 't_employee'
  union all
  select z.* from
  (select t.typname, t.oid, a.attname, a.atttypid from pg_attribute a inner join pg_type t on a.attrelid = t.typrelid) z,
  allattrs y where y.atttypid = z.oid
)
SELECT * FROM allattrs limit 100
; 
```

但这并没有找到`t_station`复合类型的内部数组。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T21:34:55.040

数组类型打破了您所遵循的简单链。如果是数组类型，您必须解析`pg_type.typelem`才能获得基本类型。

```
WITH RECURSIVE cte(typname, type_oid, attname, atttypid, typelem) AS (
   SELECT t.typname, t.oid, a.attname, a.atttypid, t.typelem
   FROM   pg_type t
   LEFT   JOIN pg_attribute a ON  a.attrelid = t.typrelid
                              AND a.attnum > 0
                              AND NOT a.attisdropped
   WHERE  t.typrelid = 't_employee'::regclass

   UNION ALL
   SELECT t.typname, t.oid
         ,COALESCE(a.attname, t.typelem::regtype::text)
         ,COALESCE(a.atttypid, t.typelem), t.typelem
   FROM   cte c
   JOIN   pg_type t ON t.oid = c.atttypid AND (t.typtype = 'c' OR t.typelem > 0)
   LEFT   JOIN pg_attribute a ON  a.attrelid = t.typrelid
                              AND a.attnum > 0
                              AND NOT a.attisdropped
   )
SELECT typname, type_oid, attname, atttypid
FROM   cte
WHERE  typelem = 0  -- filter out rows for array types 
```

如果要在结果中包含数组类型的额外行，请删除最后的 WHERE 条件 ..

此 JOIN 条件仅遵循复合类型或数组：

```
AND (t.typtype = 'c' OR t.typelem > 0) 
```

我还添加了排除系统列和死列的条件：

```
AND a.attnum > 0
AND NOT a.attisdropped 
```

[手册中有关目录表的详细信息。](http://www.postgresql.org/docs/current/interactive/catalogs.html)*

# php - 用户登录后，js文件包含php

> ID：12534886
> 
> 赞同：0
> 
> 时间：2012-09-21T16:58:35.683
> 
> 标签：php, javascript

> **可能重复：**
> [在 javascript (.js) 文件中包含 PHP](https://stackoverflow.com/questions/3241422/include-php-inside-javascript-js-file)

我一直在寻找一段时间，我似乎可以找到任何有效的答案来解决我的问题。

我目前有一个 header.js 文件（这是我的头文件），里面有一个单词“login”，它将链接到 login.php 供用户登录。现在用户成功登录我的网站后，我将如何将 header.js 文件中的“登录”一词更改为其他内容？（例如，您好“用户名”，以便用户知道他们已登录）如何在 js 文件中使用 php，甚至在 js 中调用 php 文件？有没有更好的方法可以实现这一目标？

在此先感谢您的时间。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:25:09.427

将其命名为 header.php 或 header.js.php 现在在 header.js.php 中

```
<?php
session_start();
?>
<script type='text/javascript' language='Javascript'>
<?php
 if($_SESSION['loggedIn']){
?>
    document.write('Hello <?=$VrUserName?>');
<?php
} else{
?>
 document.write('<a href="/login.php">login</a>');
<?php
}
?>
</script> 
```

另一种方式（这将允许 header.js 被浏览器缓存，因为 .php 文件没有被缓存）将登录文本作为 header.js 中的 js 变量在包含的文件中分配这个变量在 php 生成的 js 代码中（如上所述）在 header.js 之前。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T18:00:39.550

你也可以通过 Ajax 来实现：

```
var linkName;
$.ajax({
    url: "check_login.php",
    dataType: "json",
    success: function(json){
        if(json.data != '')
            linkName = "Welcome!";
        else
            linkName = "<a href='#'>Login</a>";
    }
}); 
```

在 check_login.php 文件中，您可以检查用户是否已登录，并通过回显 json_encode($results) 将结果作为 json 编码数组返回；

您还可以返回用户的用户名并将其附加到您的链接名称中。

```
var linkName = "Welcome!"+json.data.username; 
```

**响应：（** “你能给我看一些 check_login.php 文件的代码吗？”）

是的，您想展示文件的特定方面吗？此文件中的逻辑取决于您如何设置用户登录状态，如果您使用会话，它可能如下所示：

```
<?php
$user = Array();
if(isset($_SESSION['logged_in']))
{
    $user['logged'] = 'true';
    $user['name'] = 'James';
}

echo json_encode($user);
?> 
```

# c++ - C++ 数组大小不同的结果

> ID：12534890
> 
> 赞同：0
> 
> 时间：2012-09-21T16:58:52.453
> 
> 标签：c++, arrays, size

> **可能重复：**
> [C 编程语言中数组的大小？](https://stackoverflow.com/questions/1975128/sizeof-an-array-in-the-c-programming-language)

```
 #include "stdafx.h"
    #include <string>
    #include <iostream>

    using namespace std;

    string a[] = {"some", "text"};

    void test(string a[])
    {
        int size_of_a = sizeof(a) /sizeof(a[0]);
        cout << size_of_a; 
    }
    int _tmain(int argc, _TCHAR* argv[])
    {
        test(a); //gives 0
        int size_of_a = sizeof(a) /sizeof(a[0]);
        cout << size_of_a; //gives 2
        return 0;
    } 
```

正如您在评论中看到的那样 test(a) 给出了 0 而不是我所期望的 2 。有人可以解释为什么以及如何纠正它吗？谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:04:41.097

当您将数组传递给函数时，它会衰减为指向数组第一个元素的指针，因此在您的`test(string a[])`函数中

```
sizeof(a); 
```

实际上返回指针的大小而不是数组的大小。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:12:03.073

为了防止数组变为指针，您可以将对数组的*引用*传递给函数。但这会导致函数形式参数和实际参数的数组类型必须一致（包括它们的大小）。因此，您需要使用`template`使您的函数与任意大小的数组一起工作：

```
template <int N>
void foo(const string (&a)[N])
{
    int size_of_a = sizeof(a) /sizeof(a[0]);
    cout << size_of_a; 
} 
```

# php - 在两个单独的表查询之间切换 PHP MySQL

> ID：12534893
> 
> 赞同：1
> 
> 时间：2012-09-21T16:59:17.107
> 
> 标签：php, mysql, switch-statement

我正在尝试将“新闻提要”合并到我的网站中，从两个不同的表中提取信息（使用两个单独的查询）。一个提要提取当前故事“$newsfeed”，另一个提取历史故事“$historyfeed”。**两个表需要保持分开**。我试图将这些查询以随机顺序放置一组或几行。例如，我想列出 5 个故事，其中历史和新闻是随机选择的。

顺序可能是：*历史、新闻、历史、历史、历史*

下次访问可能会产生：*新闻、新闻、新、历史、新闻*

这部分似乎工作正常......

但是，我一直无法移动到查询中的下一行。因此产生了五个完全相同的新闻故事，而不是移动到查询的下一行。请参见下面的示例代码：

```
//DB connection established earlier
$newsfeed = mysql_query("SELECT * FROM newsfeed WHERE story_type='business'"); //News Story Query
$row_newsfeed = mysql_fetch_assoc($newsfeed);

$historyfeed = mysql_query("SELECT * FROM newsfeed WHERE story_type='business'"); //History Story Query
$row_historyfeed = mysql_fetch_assoc($historyfeed);

$storycount = 0;
while ($storycount < 5) {

$storytype = rand(1,2); //randomly select next story type

switch ($storytype){
    case: "1" //if next story is a new story
            storybubble($row_newsfeed); //function to echo newsfeed content
            $storycount++;
    break;
    case: "2" //if next story is a history story
            storybubble($row_historyfeed); //function to echo historyfeed content
            $storycount++;
    break;
    default:
            echo "Error";
} //switch statement
} //story count while statement 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:01:19.930

您在顶部创建变量，并将故事加载到`$historyfeed`and `$newsfeed`; 但是您在循环中继续使用相同的变量。这应该会更好一些：

```
case: "1" //if next story is a new story
        $row_newsfeed = mysql_fetch_assoc($newsfeed);
        storybubble($row_newsfeed); //function to echo newsfeed content
        $storycount++;
break;
case: "2" //if next story is a history story
        $row_historyfeed = mysql_fetch_assoc($historyfeed);
        storybubble($row_historyfeed); //function to echo historyfeed content
        $storycount++; 
```

它在需要时填充变量，而不是在代码的开头。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:07:02.873

mysql_fetch_assoc() 返回一行结果。

如果要返回下一行，则需要再次调用 mysql_fetch_assoc()。

因此，您可以将对 storybubble 的调用更改为：

```
storybubble(mysql_fetch_assoc($row_newsfeed)); 
```

但是，您最好构建一个行数组，然后从中提取。

```
$newsfeed = array();
$historyfeed = array();
while($row = mysql_fetch_assoc($newsfeed)) {
 $newsfeed[] = $row;
}

while($row = mysql_fetch_assoc($historyfeed)) {
 $historyfeed[] = $row;
}

...

switch($storytype) {
 case 1:
storybubble(array_shift($newsfeed));
break;
}

... 
```

# android - 如何使用 Viewpager 实现 ListViews？

> ID：12534897
> 
> 赞同：3
> 
> 时间：2012-09-21T16:59:27.833
> 
> 标签：android, android-layout, listview, nullpointerexception, android-viewpager

我是android开发的菜鸟，我试图在viewpager中显示一个listview。但是，当我尝试运行应用程序时，它在 onCreate 期间由于空指针异常而崩溃。此行导致异常：

```
listView.setAdapter(new UserItemAdapter(MyPagerActivity.this, R.layout.listitem, tweets)); 
```

[我在这里](http://code.google.com/p/viewpagerexample/)使用了教程，所以我不明白为什么我会遇到这个问题。我是否正确实例化了列表视图？任何帮助是极大的赞赏。

```
public class MyPagerActivity extends Activity {

///////////////////////
ArrayList<Tweet> tweets;
ProgressDialog dialog;
Handler handler; 
ImageLoader tango;

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.mypagermain);

    MyPagerAdapter adapter = new MyPagerAdapter();
    ViewPager myPager = (ViewPager) findViewById(R.id.myfivepanelpager);
    myPager.setAdapter(adapter);
    myPager.setCurrentItem(0);

    //////////////////////
    tango = new ImageLoader(MyPagerActivity.this); 
    tweets = new ArrayList<Tweet>();

    try {           
        JSONObject jArray = JSONfunctions.getJSONfromURL("http://search.twitter.com/search.json?q=gold%20silver%20news&rpp=15");
        JSONArray parsedTwitter = jArray.getJSONArray("results");       
        if(parsedTwitter.equals("") ){
            Toast.makeText(MyPagerActivity.this, "No twitter news", Toast.LENGTH_LONG).show();
        }else{
            for (int i = 0; i < parsedTwitter.length(); i++) {
            JSONObject parsedspecific = parsedTwitter.getJSONObject(i);             
        if (i == 0){                
            String from_user = parsedspecific.getString("from_user");
            String text = parsedspecific.getString("text"); 
            String profile_image_url = parsedspecific.getString("profile_image_url");  
            Tweet tweet0 = new Tweet(from_user, text, profile_image_url );
            tweets.add(tweet0);                 
            }

              }//<--for close
            }//<--else close

    } catch (Exception e) {
        Log.e("log_tag", "Error parsing data "+ e.toString());
    }

    ListView listView = (ListView) findViewById(R.id.ListViewId);  
    listView.setAdapter(new UserItemAdapter(MyPagerActivity.this, R.layout.listitem, tweets));

}

private class MyPagerAdapter extends PagerAdapter {

    public int getCount() {
        return 5;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;
        switch (position) {
        case 0:
            resId = R.layout.news;
            break;
        case 1:
            resId = R.layout.coinshows;
            break;
        case 2:
            resId = R.layout.twitterlist;
            break;
        case 3:
            resId = R.layout.videos;
            break;
    //  case 4:
    //      resId = R.layout.farright;
    //      break;
        }

        View view = inflater.inflate(resId, null);

        ((ViewPager) collection).addView(view, 0);

        return view;
    }

} 
```

XML 导致 null：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="match_parent"
android:layout_height="match_parent"
android:orientation="vertical" >

<ListView
    android:id="@+id/ListViewId"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />

</LinearLayout> 
```

MyPagerMain XML：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:orientation="vertical"
android:id="@+id/tab2"
android:layout_width="fill_parent"
android:layout_height="fill_parent">
<android.support.v4.view.ViewPager
android:layout_width="match_parent" 
android:layout_height="match_parent" 
android:id="@+id/myfivepanelpager"
android:background="#234567"/>
</LinearLayout> 
```

根据丹尼斯德鲁的回答编辑（仍然导致空指针）

```
private class MyPagerAdapter extends PagerAdapter {

    public int getCount() {
        return 5;
    }

    public Object instantiateItem(View collection, int position) {

        LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

        int resId = 0;
        switch (position) {
        case 0:
            resId = R.layout.news;
            View view0 = inflater.inflate(resId, null);
            WebView newsfeed = (WebView) findViewById(R.id.webViewnews);
            ((ViewPager) collection).addView(view0, 0);
            return view0;

        case 1:
            resId = R.layout.coinshows;
            View view1 = inflater.inflate(resId, null);
            WebView coinshows = (WebView) findViewById(R.id.webViewcoinshows);
            ((ViewPager) collection).addView(view1, 0);
            return view1;

        case 2:
            resId = R.layout.twitterlist;
            View view2 = inflater.inflate(resId, null);
            LinearLayout layout=(LinearLayout)view2.findViewById(R.id.LLtwitter);
            ListView listView = (ListView) findViewById(R.id.ListViewId);  
            listView.setAdapter(new UserItemAdapter(MyPagerActivity.this, R.layout.listitem, tweets));
            ((ViewPager) collection).addView(view2, 0);
            return view2;
            //break;
        case 3:
            resId = R.layout.videos;
            View view3 = inflater.inflate(resId, null);             
            WebView youtube = (WebView) findViewById(R.id.webViewyoutube);
            ((ViewPager) collection).addView(view3, 0);
            return view3;

        }
        return resId;

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:17:49.387

发生的事情是您的 findViewById 在 ListView 上返回 null，因为它位于 ViewPager 内。在当前项目的视图膨胀后，您必须在 PagerAdapter 的 instantiateItem 中初始化 ListView。在此处查看我对类似问题的回答：[ViewPager findViewById](https://stackoverflow.com/questions/7968573/android-viewpager-findviewbyid-not-working-always-returning-null/8099690#8099690)

编辑：更新以澄清示例代码

public Object instantiateItem(View collection, int position) {

```
 LayoutInflater inflater = (LayoutInflater) collection.getContext().getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    int resId = 0;
    switch (position) {
    case 0:
        resId = R.layout.news;
        View view0 = inflater.inflate(resId, null);
        WebView newsfeed = (WebView) findViewById(R.id.webViewnews);
        ((ViewPager) collection).addView(view0, 0);
        return view0;

    case 1:
        resId = R.layout.coinshows;
        View view1 = inflater.inflate(resId, null);
        WebView coinshows = (WebView) findViewById(R.id.webViewcoinshows);
        ((ViewPager) collection).addView(view1, 0);
        return view1;

    case 2:
        resId = R.layout.twitterlist;
        View view2 = inflater.inflate(resId, null);
        LinearLayout layout=(LinearLayout)view2.findViewById(R.id.LLtwitter);

        //Pay close attention to this modification
        //Rather than this --> ListView listView = (ListView) findViewById(R.id.ListViewId);  

        //Do this
        ListView listView = (ListView)view2.findViewById(R.id.ListViewId);
        listView.setAdapter(new UserItemAdapter(MyPagerActivity.this, R.layout.listitem, tweets));
        ((ViewPager) collection).addView(view2, 0);
        return view2;
        //break;
    case 3:
        resId = R.layout.videos;
        View view3 = inflater.inflate(resId, null);             
        WebView youtube = (WebView) findViewById(R.id.webViewyoutube);
        ((ViewPager) collection).addView(view3, 0);
        return view3;

    }
    return resId;

} 
```

将您的 instantiateItem 方法想象成一个 sub-onCreate，在某种意义上，您必须在每个单独的寻呼机项目中膨胀的视图上调用 findViewById，而不是仅调用 findViewById 来执行 findViewById (view.findViewById)。希望这可以帮助。

# erlang - 在 Erlang 中将列表拆分为相等大小的块

> ID：12534898
> 
> 赞同：10
> 
> 时间：2012-09-21T16:59:30.800
> 
> 标签：erlang

我想拆分：

```
[1,2,3,4,5,6,7,8] 
```

进入：

```
[[1,2],[3,4],[5,6],[7,8]] 
```

它通常适用于：

```
[ lists:sublist(List, X, 2) || X <- lists:seq(1,length(List),2) ] . 
```

但是这种方式真的很慢。10000 个元素在我的上网本上花费了惊人的 2.5 秒。我还写了一个非常快的递归函数，但我只是感兴趣：这个列表理解是否也可以用不同的方式编写，以便更快？

* * *

## 回答 #1

> 赞同：19
> 
> 时间：2012-09-21T21:29:02.243

试试这个：

```
part(List) ->
        part(List, []).
part([], Acc) ->
        lists:reverse(Acc);
part([H], Acc) ->
        lists:reverse([[H]|Acc]);
part([H1,H2|T], Acc) ->
        part(T, [[H1,H2]|Acc]). 
```

在 erlang-shell 中测试（我已经在 module 中声明了这个函数`part`）：

```
2> part:part([1,2,3,4,5,6,7,8]).
[[1,2],[3,4],[5,6],[7,8]]
3> 
3> timer:tc(part, part, [lists:seq(1,10000)]).
{774,
 [[1,2],
  [3,4],
  [5,6],
  [7,8],
  "\t\n","\v\f",
  [13,14],
  [15,16],
  [17,18],
  [19,20],
  [21,22],
  [23,24],
  [25,26],
  [27,28],
  [29,30],
  [31,32],
  "!\"","#$","%&","'(",")*","+,","-.","/0","12","34",
  [...]|...]} 
```

**仅 774 微秒（约 0.8 毫秒）**

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-09-21T18:53:37.370

这里有两个灵活的快速解决方案。一个易于阅读，但仅比您提出的解决方案快一点。另一个相当快，但读起来有点神秘。请注意，我提出的两种算法都适用于任何列表，而不仅仅是数字有序列表。

这是“易于阅读”的一个。呼叫`n_length_chunks(List,Chunksize)`。例如，要获取 2 长的块列表，请调用`n_length_chunks(List,2)`. 这适用于任何大小的块，即，您可以调用`n_length_chunks(List,4)`获取`[[1,2,3,4],[5,6,7,8],...]`

```
n_length_chunks([],_) -> [];
n_length_chunks(List,Len) when Len > length(List) ->
    [List];
n_length_chunks(List,Len) ->
    {Head,Tail} = lists:split(Len,List),
    [Head | n_length_chunks(Tail,Len)]. 
```

*更快*的是这里，但肯定更难阅读，并且以相同的方式调用：（`n_length_chunks_fast(List,2)`与上面的相比，我对此做了一个更改，因为它用`undefined`if 长度填充列表的末尾列表的 不能被所需的块长度完全整除。

```
n_length_chunks_fast(List,Len) ->
  LeaderLength = case length(List) rem Len of
      0 -> 0;
      N -> Len - N
  end,
  Leader = lists:duplicate(LeaderLength,undefined),
  n_length_chunks_fast(Leader ++ lists:reverse(List),[],0,Len).

n_length_chunks_fast([],Acc,_,_) -> Acc;
n_length_chunks_fast([H|T],Acc,Pos,Max) when Pos==Max ->
    n_length_chunks_fast(T,[[H] | Acc],1,Max);
n_length_chunks_fast([H|T],[HAcc | TAcc],Pos,Max) ->
    n_length_chunks_fast(T,[[H | HAcc] | TAcc],Pos+1,Max);
n_length_chunks_fast([H|T],[],Pos,Max) ->
    n_length_chunks_fast(T,[[H]],Pos+1,Max). 
```

在我的（非常旧的）笔记本电脑上测试：

*   您提出的解决方案大约需要 3 秒。
*   我的慢但可读的速度稍快，大约需要 1.5 秒（仍然很慢）
*   我的快速版本大约需要 5 毫秒。
*   为了完整起见，Isac 的解决方案在我的同一台机器上花费了大约 180 毫秒。

编辑：哇，我需要先阅读完整的问题。哦，好吧，如果有帮助，我会留在这里供后代使用。据我所知，使用列表推导并不是一个好方法。您的原始版本很慢，因为每次迭代都`sublist`需要遍历列表才能到达每个连续`X`的 ，导致复杂度低于 O(N^2)。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-09-22T00:32:54.397

或折叠：

```
 lists:foldr(fun(E, []) -> [[E]]; 
                 (E, [H|RAcc]) when length(H) < 2 -> [[E|H]|RAcc] ;
                 (E, [H|RAcc]) -> [[E],H|RAcc]
              end, [], List). 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2013-02-21T17:22:42.330

我想提交一个由@Tilman 提出的稍微复杂但更灵活（而且大多更快）的解决方案

```
split_list(List, Max) ->
    element(1, lists:foldl(fun
        (E, {[Buff|Acc], C}) when C < Max ->
            {[[E|Buff]|Acc], C+1};
        (E, {[Buff|Acc], _}) ->
            {[[E],Buff|Acc], 1};
        (E, {[], _}) ->
            {[[E]], 1}
    end, {[], 0}, List)). 
```

所以功能部分可以实现为

```
part(List) ->
     RevList = split_list(List, 2),
     lists:foldl(fun(E, Acc) ->
         [lists:reverse(E)|Acc]
     end, [], RevList). 
```

**更新** 如果您想保留订单，我添加了反向，但正如我所见，它增加的处理时间不超过 20%。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-09-21T17:43:24.180

你可以这样做：

```
1> {List1, List2} = lists:partition(fun(X) -> (X rem 2) == 1 end, List).
{[1,3,5|...],[2,4,6|...]}
2> lists:zipwith(fun(X, Y) -> [X, Y] end, List1, List2).
[[1,2],[3,4],[5,6]|...] 
```

这需要大约 73 毫秒，我的计算机上有 10000 个元素列表。原始解决方案大约需要 900 毫秒。

但无论如何我都会使用递归函数。

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2013-05-01T21:44:53.057

这是一个更通用的答案，适用于任何子列表大小。

```
1> lists:foreach(fun(N) -> io:format("~2.10.0B -> ~w~n",[N, test:partition([1,2,3,4,5,6,7,8,9,10],N)]    ) end, [1,2,3,4,5,6,7,8,9,10]).
01 -> [[1],[2],[3],[4],[5],[6],[7],[8],[9],[10]]
02 -> [[1,2],[3,4],[5,6],[7,8],[9,10]]
03 -> [[1,2,3],[4,5,6],[7,8,9],[10]]
04 -> [[1,2,3,4],[5,6,7,8],[10,9]]
05 -> [[1,2,3,4,5],[6,7,8,9,10]]
06 -> [[1,2,3,4,5,6],[10,9,8,7]]
07 -> [[1,2,3,4,5,6,7],[10,9,8]]
08 -> [[1,2,3,4,5,6,7,8],[10,9]]
09 -> [[1,2,3,4,5,6,7,8,9],[10]]
10 -> [[1,2,3,4,5,6,7,8,9,10]] 
```

实现这一点的代码存储在一个名为的文件中`test.erl`：

```
-module(test).
-compile(export_all).

partition(List, N) ->
    partition(List, 1, N, []).

partition([], _C, _N, Acc) ->
    lists:reverse(Acc) ;

partition([H|T], 1, N, Acc) ->
    partition(T, 2, N, [[H]|Acc]) ;

partition([H|T], C, N, [HAcc|TAcc]) when C < N ->
    partition(T, C+1, N, [[H|HAcc]|TAcc]) ;

partition([H|T], C, N, [HAcc|TAcc]) when C == N ->
    partition(T, 1, N, [lists:reverse([H|HAcc])|TAcc]) ;

partition(L, C, N, Acc) when C > N ->
    partition(L, 1, N, Acc). 
```

对于 C > N 的特殊情况，它可能更优雅。请注意，C 是当前正在构造的子列表的大小。开始时为 1。然后递增，直到达到分区大小 N。

我们还可以使用 @chops 代码的修改版本让最后一个列表包含剩余的项目，即使它的大小 < N ：

```
-module(n_length_chunks_fast).

-export([n_length_chunks_fast/2]).

n_length_chunks_fast(List,Len) ->
    SkipLength = case length(List) rem Len of
        0 -> 0;
        N -> Len - N
    end,
    n_length_chunks_fast(lists:reverse(List),[],SkipLength,Len).

n_length_chunks_fast([],Acc,_Pos,_Max) -> Acc;

n_length_chunks_fast([H|T],Acc,Pos,Max) when Pos==Max ->
    n_length_chunks_fast(T,[[H] | Acc],1,Max);

n_length_chunks_fast([H|T],[HAcc | TAcc],Pos,Max) ->
    n_length_chunks_fast(T,[[H | HAcc] | TAcc],Pos+1,Max);

n_length_chunks_fast([H|T],[],Pos,Max) ->
    n_length_chunks_fast(T,[[H]],Pos+1,Max). 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2014-01-07T15:19:17.210

我正在寻找一个分区函数，它可以将大列表拆分为少量工人。使用 lkuty `partition`，您可能会发现一名工人的工作量几乎是其他所有工人的两倍。如果这不是您想要的，这里是一个子列表长度最多相差 1 的版本。

使用[PropE](http://proper.softlab.ntua.gr/)进行测试。

```
%% @doc Split List into sub-lists so sub-lists lengths differ most by 1.
%% Does not preserve order.
-spec split_many(pos_integer(), [T]) -> [[T]] when T :: term().
split_many(N, List) ->
    PieceLen = length(List) div N,
    lists:reverse(split_many(PieceLen, N, List, [])).

-spec split_many(pos_integer(), pos_integer(), [T], [[T]]) ->
    [[T]] when T :: term().
split_many(PieceLen, N, List, Acc) when length(Acc) < N ->
    {Head, Tail} = lists:split(PieceLen, List),
    split_many(PieceLen, N, Tail, [Head|Acc]);

split_many(_PieceLen, _N, List, Acc) ->
    % Add an Elem to each list in Acc
    {Appendable, LeaveAlone} = lists:split(length(List), Acc),
    Appended = [[Elem|XS] || {Elem, XS} <- lists:zip(List, Appendable)],
    lists:append(Appended, LeaveAlone). 
```

测试：

```
split_many_test_() ->
    [
     ?_assertEqual([[1,2]], elibs_lists:split_many(1, [1,2])),
     ?_assertEqual([[1], [2]], elibs_lists:split_many(2, [1,2])),
     ?_assertEqual([[1], [3,2]], elibs_lists:split_many(2, [1,2,3])),
     ?_assertEqual([[1], [2], [4,3]], elibs_lists:split_many(3, [1,2,3,4])),
     ?_assertEqual([[1,2], [5,3,4]], elibs_lists:split_many(2, [1,2,3,4,5])),
     ?_assert(proper:quickcheck(split_many_proper1())),
     ?_assert(proper:quickcheck(split_many_proper2()))
    ].

%% @doc Verify all elements are preserved, number of groups is correct,
%% all groups have same number of elements (+-1)
split_many_proper1() ->
    ?FORALL({List, Groups},
            {list(), pos_integer()},
            begin
                Split = elibs_lists:split_many(Groups, List),

                % Lengths of sub-lists
                Lengths = lists:usort(lists:map(fun erlang:length/1, Split)),

                length(Split) =:= Groups andalso
                lists:sort(lists:append(Split)) == lists:sort(List) andalso
                length(Lengths) =< 2 andalso
                case Lengths of
                    [Min, Max] -> Max == Min + 1;
                    [_] -> true
                end
            end
           ).

%% @doc If number of groups is divisable by number of elements, ordering must
%% stay the same
split_many_proper2() ->
    ?FORALL({Groups, List},
            ?LET({A, B},
                 {integer(1, 20), integer(1, 10)},
                 {A, vector(A*B, term())}),
            List =:= lists:append(elibs_lists:split_many(Groups, List))
           ). 
```

* * *

## 回答 #8

> 赞同：-1
> 
> 时间：2013-08-15T14:26:02.120

我稍微改变了@JLarky 的实现以删除保护表达式，这应该会稍微快一些：

```
split_list(List, Max) ->
    element(1, lists:foldl(fun
        (E, {[Buff|Acc], 1}) ->
            {[[E],Buff|Acc], Max};
        (E, {[Buff|Acc], C}) ->
            {[[E|Buff]|Acc], C-1};
        (E, {[], _}) ->
            {[[E]], Max}
    end, {[], Max}, List)). 
```

# ruby-on-rails - Rails 路由：仍然对如何通过不同请求传递查询参数感到困惑

> ID：12534900
> 
> 赞同：0
> 
> 时间：2012-09-21T16:59:36.707
> 
> 标签：ruby-on-rails, ruby-on-rails-3, routing, routes

在搜索页面上，我通过表单向索引操作提交查询：

```
= form_tag reports_path, method: 'get' do
  = text_field_tag :query, params[:query] 
```

我成功地将它从`reports#index`视图传递到`#show`视图：

```
= link_to params[:query] ? query_report_path(report.id, params[:query]) : report do 
```

由于这条路线，这是可能的：

```
 resources :reports do
    get ':query', to: 'reports#show', on: :member, as: :query 
```

但我正在尝试从视图中将相同的查询返回到#index`link`操作`reports#show`：

```
= link_to 'Back', reports_path, query: @query 
```

但它失败了：`:query`= *nil*。

也试过：

```
= link_to 'Back', reports_path(query: @query, class: 'btn btn-small') 
```

这根本不起作用......

路由语法让我绊倒了......再次！什么是正确的语法？有一个更好的方法吗？为什么这不会触发**与** 初始触发相同`reports#index`的参数？`:query``form_tag`

谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:24:25.650

我认为你的第二次尝试很接近，但你的括号是错误的。尝试将 HTML 选项哈希`class: 'btn btn-small'`作为第三个参数`link_to`而不是作为`reports_path`.

# javascript - 为什么这条 jquery .css 行在 2 个函数中不起作用？

> ID：12534902
> 
> 赞同：0
> 
> 时间：2012-09-21T16:59:37.940
> 
> 标签：javascript, jquery

这个简单的 jquery .css 语句没有在两个函数中激活，我做错了吗？

javascript:

```
function updateAllCSS(element, property, value) {

    function updateThemeCreatorCSS(element, property, value) {
        $(element).css(property, value)
    }
    updateThemeCreatorCSS(element, property, value)
}
}

updateAllCSS('h1', 'backgroundColor', '#f00') 
```

HTML：

```
<h1>Test header</h1> 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T17:04:06.960

这应该有效：

```
function updateAllCSS(element, property, value) {
    function updateThemeCreatorCSS(element, property, value) {
        $(element).css(property, value)
    }
    updateThemeCreatorCSS(element, property, value);
}

updateAllCSS('h1', 'background-color', '#f00'); 
```

有一个额外`}`的，传递给的参数`updateAllCSS`需要有`'`引号`'`。

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-09-21T17:04:09.973

你有一个额外的`}`，你应该引用你的参数。

**[jsFiddle 示例](http://jsfiddle.net/j08691/pnA55/1)**

```
function updateAllCSS(element, property, value) {
    function updateThemeCreatorCSS(element, property, value) {
        $(element).css(property, value)
    }
    updateThemeCreatorCSS(element, property, value);
}
updateAllCSS('h1', 'backgroundColor', '#f00');​ 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-09-21T17:03:46.537

不知道为什么你有那个嵌套函数。这是它的工作原理：

[http://jsfiddle.net/cbbdW/](http://jsfiddle.net/cbbdW/)

# java - 一旦我关闭swing java程序中的几个窗口之一，程序执行就会停止

> ID：12534905
> 
> 赞同：0
> 
> 时间：2012-09-21T16:59:53.390
> 
> 标签：java, swing, user-interface, awt

我在我的 Java swing 程序中打开了 2 个窗口。如果我关闭一个窗口，程序将停止执行。有什么办法不停止执行并与另一个窗口一起玩吗？请用示例代码解释，因为我是摇摆新手。我尝试在网络上搜索，但我认为我缺少合适的关键字。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T17:03:30.620

您可能正在将新窗口的关闭操作设置为`EXIT_ON_CLOSE`. 查找代码中发生这种情况的地方：

```
JFrame frame = ... ;
// ...
frame.setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE); 
```

并替换`EXIT_ON_CLOSE`为`DISPOSE_ON_CLOSE`除您*希望*在关闭时退出应用程序的窗口之外的所有窗口。

另请查看您可以在javadocs`ON_CLOSE`中传递的其他值。[`setDefaultCloseOperation`](http://docs.oracle.com/javase/6/docs/api/javax/swing/JFrame.html#setDefaultCloseOperation%28int%29)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T17:04:01.617

对于您认为*不是*主窗口的对话框，您应确保默认关闭操作不会导致应用程序退出：

```
window.setDefaultCloseOperation(JFrame.DO_NOTHING_ON_CLOSE); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T17:02:38.987

您可能正在扩展 JFrame，因此当您关闭主窗口时它会关闭。

请粘贴一些代码以获得进一步的帮助。

# d3.js - d3 图形后鼠标事件停止工作，缩放加载

> ID：12534911
> 
> 赞同：1
> 
> 时间：2012-09-21T17:00:10.770
> 
> 标签：d3.js, canvas, coffeescript, backbone-events, spine.js

在我的页面上，我使用 Spine 的控制器事件定义了一些事件。使用 jQuery 的委托将它们分配给选择器，并且它们工作正常：

```
events:
  'click #zoom a': 'zoom'
  'mouseenter #zoom a': -> $("#yZoom_help").show()
  'mouseleave #zoom a': -> $("#yZoom_help").delay(1600).fadeOut 1600 
```

在稍后的某个时间点异步地，我用 d3 设置了一些东西。具体来说，我正在画布、一堆轴等上设置缩放行为。

```
@x_scale = d3.scale.linear() 
  .domain([@lcData.start, @lcData.end])
  .range([0, @width])    
@y_scale = d3.scale.linear()
  .domain([@lcData.ymin, @lcData.ymax])
  .range([@h_graph, 0])

@zoom_graph = d3.behavior.zoom()
  .x(@x_scale)
  .scaleExtent([1, @max_zoom])
  .on("zoom", @graph_zoom)

@canvas = d3.select("#graph_canvas")   
  .attr("width", @width)
  .attr("height", @h_graph)
  .call(@zoom_graph)
  .node().getContext("2d")     

# ... some other things left out 
```

问题是，在我完成这个 d3 设置之后，非 d3 元素上的鼠标事件停止工作。他们根本不工作。这些元素具有最高的 z-index，并且不会被任何画布或 svg 元素遮挡，但它们会停止检测任何鼠标事件。

d3 应该只在画布上激活鼠标事件，对吧？是否有一些 d3 魔法正在接管整个页面上的鼠标？例如，d3 将这个 div 插入正文中：

![魔术d3 div？](../Images/1f0825b3d8822bc4b9c36d6b0ea9db4d.png)

**编辑：如果您想了解我的意思，请转到此链接：**

[http://korhal.andrewmao.net:9294/#/sources/APH10154043](http://korhal.andrewmao.net:9294/#/sources/APH10154043)

左上角有一个小图标，当您悬停时会改变颜色。这是带有鼠标事件的那个；它应该显示一条消息。页面加载后，它将停止工作。如果你想看到它工作，只需重新加载页面并在调试器中禁用 JSONP 调用，这会阻止设置 d3 的函数执行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-26T17:49:33.867

这里发生的事情实际上与d3无关。在加载我的 Spine 应用程序期间，我似乎无意中调用`@render`了两次，当附加视图时，所有元素都从它们的事件中解脱出来。

可以通过调用来完成重新绑定，但在这种情况下，最好修复多余的`@delegateEvents(@events)`调用。`@refreshElements``@render`

与主干相关的问题：[为什么替换 html 的主干事件不起作用？](https://stackoverflow.com/q/9384366/586086)

# javascript - 使用 Firebug 将断点放入 Javascript 文件

> ID：12534912
> 
> 赞同：0
> 
> 时间：2012-09-21T17:00:12.723
> 
> 标签：javascript, twitter-bootstrap, firebug

我正在调试一个没有下拉的 Twitter Bootstrap 下拉菜单 (http://twitter.github.com/bootstrap/javascript.html)。

我假设 Javascript 没有运行，但想检查一下。我最初的想法是使用 Firebug 在 bootstrap.js 中放置一个断点。但是，我看不到在哪里执行此操作。如果我单击脚本选项卡，我只会看到一个显示 javascript.html 的屏幕，它看起来与 HTML 源代码完全相同。

有什么建议么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-09-21T17:07:03.667

In the script tab, where you see 'javascript.html', click on it (click on javascript.html) and firebug will give you a popup list of all scripts the page is using. The one you want to debug will likely be found inside the assets folder there.

![enter image description here](../Images/7ebc0c5a5a42f88df76e1f7b62f2f1c1.png)

# java - 如何使Java使用多核线程？

> ID：12534915
> 
> 赞同：3
> 
> 时间：2012-09-21T17:00:34.750
> 
> 标签：java, multithreading

这与出现在的问题类似：[如何确保 Java 线程在不同的内核上运行](https://stackoverflow.com/questions/1896065/how-to-ensure-java-threads-run-on-different-cores)。但是，Java 在这方面可能已经取得了很大进展，而且我在那个问题中找不到我正在寻找的答案。

我刚写完一个多线程程序。该程序产生了几个线程，但它似乎并没有使用超过一个内核。该程序更快（我*正在*并行化一些使其更快的东西），但它肯定不会使用所有可用的内核，通过运行“top”来判断。

有任何想法吗？这是预期的行为吗？

一般代码结构如下：

```
 for (some values in i)
   {
        start a thread of instantiated as MyThread(i)
        (this thread uses heavily ConcurrentHashMap and arrays and basic arithmetic, no IO)
        add the thread to a list T
   }

   foreach (thread in T)
   {
        do thread.join()
   } 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T17:05:10.047

如果它几乎是一个 CPU 的 100%，这可能意味着你真的拥有

*   一个核心线程正在完成所有工作，而其他核心线程并没有做太多。
*   您锁定的一种资源，只有一个线程有机会运行。

如果您使用大约一个 CPU，这可能意味着这就是您的 CPU 的所有工作，因为您正在等待诸如 IO（网络和/或磁盘）之类的东西

我建议您查看 VisualVM 中线程的状态。它将帮助您确定哪些线程正在运行，并为您提供理想的行为模式。我还建议您使用 CPU 分析器来帮助找到瓶颈。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:17:36.247

我想我在[Katherine Sierra 的 SCJP 书中](https://rads.stackoverflow.com/amzn/click/com/0071591060)读到JVM 要求底层操作系统为每个 Java 线程创建一个新的操作系统线程。

因此，由底层操作系统决定如何在可用 CPU 之间平衡 Java（和任何其他类型的）线程。

# jquery - DataTables删除一行而不刷新页面

> ID：12534919
> 
> 赞同：1
> 
> 时间：2012-09-21T17:00:59.023
> 
> 标签：jquery, jquery-plugins, datatable

我正在使用此代码初始化数据表，并在单击删除链接后 - 一切正常，但我正在使用刷新页面，所以我尝试使用 DataTable 函数直接删除行，但根本无法让它工作......这是当前代码（有效的代码，但会刷新整个页面）：

```
<script type="text/javascript">
$(document).ready(function() {
    $('#publishers').dataTable( {
        "iDisplayLength": 50,
    "sPaginationType": "full_numbers",
     "bStateSave": true
} );
} );

function DeletePublisher(publisherid) {
jConfirm('Are you sure you want to delete this publisher?', 'Delete publisher', function(r) { if (r)
$.ajax({
  type: "GET",
  url: 'includes/publishers/delete-publisher.php?publisherid=' + publisherid,
  data: '',
  success: function(response){
    $.jGrowl('Publisher deleted');
     window.location.reload();
  }
});
});
}
</script> 
```

而在身体...

```
 ...A LOT OF UNINTERESTING COLUMNS, AND THE ONE WITH ACTION:
<td class="action-th">
           <ul class="button-table-head">
                        <li><div class="button-head edit-icon"><a href="#" class="sweet-tooltip" data-text-tooltip="Edit" data-style-tooltip="tooltip-mini-slick"><span>Edit</span></a></div></li>
                        <li><div class="button-head delete-icon"><a href="#" class="sweet-tooltip" data-text-tooltip="Delete" data-style-tooltip="tooltip-mini-slick" onclick="DeletePublisher('<?php echo $publisher_id; ?>')"><span>Delete</span></a></div></li>
                    </ul>
                </td> 
```

我尝试使用此代码，但它不起作用：

```
function DeletePublisher(publisherid) {
jConfirm('Are you sure you want to delete this publisher?', 'Delete publisher',function(r) { if (r)
$('#publishers tbody').on( 'click', 'tr', function () {
    var tr = this;
$.ajax({
  type: "POST", //or GET
  url: 'includes/publishers/delete-publisher.php?publisherid=' + publisherid,
  data: '',
  success: function(response){
    t.fnDeleteRow( tr );
    $.jGrowl('Publisher deleted');
}
} );
});
});
} 
```

任何想法为什么 - 我对 JS、JQuery 完全是菜鸟......

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T17:05:51.907

如果您传递对单击元素的引用，您可以轻松地做到这一点：

```
onclick="DeletePublisher(this,'<?php echo $publisher_id; ?>')" 
```

然后在你的函数中：

```
function DeletePublisher(element,publisherid) {
...
 success: function(response){
    $(element).parents('tr').remove()
    $.jGrowl('Publisher deleted');

  }
 ...
} 
```

`window.location.reload();`...然后根本不打电话

# php - MySQL UTF-8 字符插入问题

> ID：12534930
> 
> 赞同：1
> 
> 时间：2012-09-21T17:01:41.543
> 
> 标签：php, mysql, encoding, character-encoding

我正在从 facebook 获取一些字符串，但我不知道字符串中的 whitch 编码。在插入数据库表之前，我需要将此字符串转换为 utf8。收到此错误消息。![错误截图](../Images/4e9a6b27564a5f70a3e401c841e3b149.png)

这是我的php代码。

```
$email = (isset($this->_userinfo['email']) ? $this->_userinfo['email'] : '');
$fname = $this->_userinfo['first_name'];
$lname = $this->_userinfo['last_name'];
$name  = $this->_userinfo['name'];

$sql = 'INSERT INTO users '
     . '(fbid, fbuid, fullname, userlevel, email, name, sirname) '
     . 'VALUES("'
     . $this->_fbid . '","'
     . $fbuid . '","'
     . $name . '","' 
     . $userlevel . '","' 
     . $email . '","' 
     . $fname . '","' 
     . $lname . '")'; 
```

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:02:31.373

你试过这个代码吗？

```
 mysql_query('set names utf8'); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:04:24.030

看看[utf8_encode](http://php.net/manual/en/function.utf8-encode.php)来为你做这件事。请记住，这仅在您的数据实际上是 UTF-8 编码时才有效。不幸的是，没有办法只查看字符串并查看它使用的编码。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-09-21T17:08:46.243

你可能想看看这个问题：

[检测编码并使一切变为 UTF-8](https://stackoverflow.com/questions/910793/detect-encoding-and-make-everything-utf-8)

尤其是[塞巴斯蒂安·格里诺利的第二个答案](https://stackoverflow.com/users/290221/sebastian-grignoli)

他编写了一个类（并提供了指向它的链接），它将正确地将 Windows 扩展 ASCII 编码为 UTF8，并在必要时更正 UTF8。

当你在 UTF8 领域时，一个非常方便的工具:)

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2015-01-23T06:47:22.803

[在此处输入链接描述](http://php.net/manual/en/function.mysql-set-charset.php)

> 对我来说，以下代码工作：

$mysqli = mysqli_connect( ... ); mysqli_query($mysqli, 'SET NAMES "utf8" COLLATE "utf8_general_ci"' );

要不就：

mysqli_set_charset($mysqli, 'utf8');

问候，祝你好运！

# .net - GC.Collect() + GC.WaitForPendingFinalizers() 会不会回收所有可回收的内存？

> ID：12534935
> 
> 赞同：6
> 
> 时间：2012-09-21T17:02:18.547
> 
> 标签：.net, garbage-collection

我试图通过在析构函数中使用 console.WriteLine() 来确保某个类的实例被释放，但输出永远不会出现。

我仔细搜索了任何挥之不去的参考资料以及事件订阅，但没有找到。只是为了我自己的理智，在我继续搜索之前，有人可以确认一下：

```
GC.Collect();
GC.WaitForPendingFinalizers(); 
```

无论物体有多小，都会强制完全回收吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-09-21T17:07:59.703

一般来说，这应该清理大多数东西。

但是，如果你的终结器中有代码，你[可能需要调用`GC.Collect()`两次](https://stackoverflow.com/q/3829928/65358)，因为第一次会导致终结器执行，但是直到终结器完成后才能清理实际内存，这意味着后续调用会抓住物体。

# c++ - 括号运算符应用于整数

> ID：12534937
> 
> 赞同：0
> 
> 时间：2012-09-21T17:02:29.897
> 
> 标签：c++, brackets

> **可能重复：**
> [在 C 数组中，为什么这是真的？a[5] == 5[a]](https://stackoverflow.com/questions/381542/in-c-arrays-why-is-this-true-a5-5a)

我遇到了一段以这种方式索引到字符串文字的代码：

```
#include <iostream>
using namespace std;

int main()
{
    cout << 1["52"] << endl;
    cout << 0["52"] << endl;
} 
```

我尝试搜索，但您可以想象搜索词会带来不相关的主题。谁能解释这是如何工作的？

我意识到它可能适用于任何指针，所以我也对此进行了测试：

```
#include <iostream>
using namespace std;

int main()
{
    int a[2]; a[0] = 22; a[1] = 600; 

    cout << 1[a] << endl;
    cout << 0[a] << endl;
} 
```

# c++ - 类的静态对象？

> ID：12534943
> 
> 赞同：0
> 
> 时间：2012-09-21T17:03:14.927
> 
> 标签：c++

我实际上并不知道您是否可以声明一个类，然后在同一类的多个对象中使用它的静态实例。进一步来说：

```
class State {
    public:
        State();
        static CustomNumberDist normal_dist;
    private:
        int id;   
}; 
```

所以每个 State 实例都应该包含相同的 CustomNumberDist 实例。我编译但我想知道它是否有效，否则我以后可能会遇到问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T17:10:36.657

您给出的声明（头文件，即.h）是完全有效的。

但是在定义（.cpp 文件）中，您需要

```
State::CustomNumberDist normal_dist; 
```

当您进入链接阶段时，静态对象将需要内存。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:06:20.067

这是无效的。它应该是这样的：

```
class X
{
public:
      int normalValue = 5; //NSDMI
      static int i;
};

int X::i = 0; 
```

`i`需要在记忆中占有一席之地。在不涉及具体对象的内存中。

更多信息可以在这里找到：

[静态数据成员初始化](https://stackoverflow.com/questions/11300652/static-data-member-initialization)

# java - 如果 POM 中只有父版本怎么办？

> ID：12534949
> 
> 赞同：0
> 
> 时间：2012-09-21T17:03:43.437
> 
> 标签：java, maven, dependency-management, pom.xml

检查各种 POM，我发现有时它们仅在部分中有`<version>`标签。`<parent>`有时他们在主要部分中有以下代码`<version>${parent.version}</version>`以及父版本中的版本。

在这些不同的情况下将使用哪个版本值？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-09-21T17:06:17.773

在这两种情况下，来自父级的版本。

[有关隐式版本继承信息，请参阅“POM 简介”。](http://maven.apache.org/guides/introduction/introduction-to-the-pom.html#The_Solution)

[有关继承的其他内容的更多信息，请参阅此文档。](http://maven.apache.org/pom.html#Inheritance)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:06:48.690

它将从父版本“继承”版本，并执行许多其他配置。`groupId`and也可以来自`dependencies`父级。

# visual-studio-2010 - 尝试将 IntelliJ IDEA 11.1.3 差异工具用作 Visual Studio 2010 的合并/差异工具时出错

> ID：12534962
> 
> 赞同：1
> 
> 时间：2012-09-21T17:04:10.077
> 
> 标签：visual-studio-2010, intellij-idea, ankhsvn

使用[http://www.jetbrains.com/idea/webhelp/working-with-intellij-idea-features-from-command-line.html](http://www.jetbrains.com/idea/webhelp/working-with-intellij-idea-features-from-command-line.html)上的 IntelliJ 指令从命令行运行 IntelliJ IDEA diff 工具，我有尝试使用以下外部合并工具命令（工具 -> 选项 -> 源代码控制 -> 颠覆用户工具）配置 Visual Studio 2010 + AnkhSVN：

```
"<IntelliJ IDEA Home>\bin\idea.exe" diff $(Theirs) $(Mine) 
```

但是当我去编辑一个合并冲突时（在解决方案资源管理器中右键文件->编辑冲突），idea.exe报如下错误：

> 显示差异时出错：com/intellij/openapi/fileEditor/impl/FileEditorProviderManagerImpl.getProviders 的 @NotNull 参数的参数 0 不能为空

任何想法出了什么问题？这是一个 IDEA 错误吗？或者也许`$(Theirs)`并不是`$(Mine)`我认为的宏（我希望它们扩展到完整的文件路径）。

# r - R：指数协方差矩阵

> ID：12534964
> 
> 赞同：0
> 
> 时间：2012-09-21T17:04:13.983
> 
> 标签：r, matrix, covariance, exponential

我想计算一个协方差矩阵，其中矩阵分量是通过指数移动平均值（即`S(t)=a*Y(t)+(1-a)*S(t-1)`）获得的。

在我看来`mewma`应该这样做，但是当我为 60,400 矩阵调用函数时，我得到一个“订阅越界错误”。

我相信它来自这条线：

```
ucl <- h4[m1[l], m2[a[2] - 1]] 
```

可以`mewma`为 dim 大于 9 的矩阵调用该函数吗？

否则有替代包吗？

我已关注： [https ://stats.stackexchange.com/questions/19328/how-to-compute-an-exponentially-weighted-covariance-matrix-function-in-r](https://stats.stackexchange.com/questions/19328/how-to-compute-an-exponentially-weighted-covariance-matrix-function-in-r)

# python - 测试无效表单的 Django.contrib.messages 内容

> ID：12534967
> 
> 赞同：0
> 
> 时间：2012-09-21T17:04:23.343
> 
> 标签：python, django, django-forms, django-contrib

我正在尝试在使用 Django 处理 ModelForms 时测试消息的内容。我有以下视图（假设有一个`Thing`带有必填`name`字段的模型）：

```
@login_required
def update(request, thing_id):
    thing = Thing.objects.get(id=thing_id)  # assume this works

    if request.method == "POST":
        form = ThingModelForm(request.POST, instance=thing)
        if form.is_valid():
            form.save()
            messages.success(request, "Success!")
            return redirect("/wherever")
        else:
            messages.error(request, "Oops!")
    else:
        form = ThingModelForm(instance=thing)

    args = ("myapp/update.html", {"form": form})
    kwargs = {"context_instance": RequestContext(request)}
    return render_to_response(*args, **kwargs) 
```

现在，我有两个单元测试。第一个测试有效数据，而第二个测试无效数据。（请注意，客户端登录发生在 期间`setUp`）：

```
def test_update_account(self):
    url = reverse('update', args=[1])  # assume that's a valid id
    resp = self.client.post(url, {"name": "foo"})
    self.assertEqual(resp.status_code, 302)

    m = resp.cookies.get('messages', '')
    self.assertTrue("Success!" in m.output()) 
```

现在来测试无效数据：

```
def test_update_account_failure(self):
    url = reverse('update', args=[1])  # assume that's a valid id
    resp = self.client.post(url, {"name": ""})  # name is required
    self.assertEqual(resp.status_code, 200)

    # This works:
    self.assertTrue("Oops!" in resp.content)

    # This fails:
    m = resp.cookies.get('messages', '')
    self.assertTrue("Oops!" in m.output()) 
```

为什么通过 cookie 访问消息内容在一种情况下有效，但在另一种情况下会失败？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T18:00:30.030

您可以检查两件事：

1.  当您创建请求时`self.client.post(url, {"name": ""})`，此处返回的 Thing 实例：`thing = Thing.objects.get(id=thing_id)`如果不是，它将不会到达您设置错误消息的代码行：`messages.error(request, "Oops!")`因为 Thing.objects.get 将抛出[错误](https://docs.djangoproject.com/en/dev/topics/db/queries/#retrieving-a-single-object-with-get)。

> 如果没有与查询匹配的结果，get() 将引发 DoesNotExist 异常。

1.  如果第一件事确实返回了一个 Thing 实例，您可以`redirect("/wherever")`在设置错误消息后检查重定向返回是否`messages.error(request, "Oops!")`确实改变了任何内容。

# iphone - 核心文本的 iOS 6 自定义字体问题

> ID：12534969
> 
> 赞同：1
> 
> 时间：2012-09-21T17:04:26.167
> 
> 标签：iphone, ios, ios6, core-text

**背景：**

我有一个使用一组自定义字体的文字处理应用程序；我的字体集中有四种字体：Regular、Italic、Bold 和 Bold Italic。它们是 True Type：Open Type 格式。这在 iOS 5.0 和 5.1 的商店中运行了几个月。

注意：我正在使用 CoreText 并进行所有我自己的文本处理和渲染。

**问题：**

升级到 iOS 6 后，我注意到所有斜体文本现在都是粗斜体，并且任何粗斜体文本现在都“未定义”（对我来说，默认为另一种字体）。

我曾希望这只是一个 Xcode 问题/更改，但它也出现在我发布的构建中。

**我试过的：**

*   我仔细检查了所有传递给 CTFontCreateWithFontDescriptor 的参数在版本之间是否相同。

*   查看了 iOS 6.0 和 Xcode 4.5 发行说明并查看了开发论坛。

*   删除并重新添加字体到项目

任何帮助或可能的调查地点将不胜感激！

# c# - 将 Windows 注册表导入文件结构

> ID：12534981
> 
> 赞同：1
> 
> 时间：2012-09-21T17:05:37.337
> 
> 标签：c#, registry, filenames, file-structure

我需要比我更聪明的人的帮助来解决这个难题。

我有一个注册表分支，我想将其转换为文件结构。用户对文件结构进行更改，主要是因为 luser 更容易操作文件。然后我可以将这些更改写回注册表。（我意识到这里的风险，请不要告诉我这样做是“坏的”，我知道。此代码用于个人项目，不用于任何生产模型！）

到目前为止，我的代码效果很好：

![良好的注册表值](../Images/3e51645c20310d8a8f60dee930df1a49.png) 这很好地转化为： ![良好的探索者价值观](../Images/fa32279393ca88a3f87cec3b8d6d31ae.png)

但是，由于注册表不是文件结构，我们可以有“坏”键，例如：

![坏钥匙](../Images/f8068766ed19eca782ca272293139ba6.png)

这会在目录 ...\Branch2\SubBranch1\Apple 中生成一个名为 Banana 的文件。明显地。我想过用一些东西替换'\'，但是什么？

以“。”结尾的键或值也存在问题。该文件将没有句点。

有没有人有解决方案（或建议）来获得预期的结果？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-07-17T13:54:41.490

您需要处理几个字符 /:?"<>| 如果键值包含此字符之一，那么您不能将文件命名为与键值相同的名称我建议您使用 XML 结构它非常易于维护和操作

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-09-21T17:20:32.020

一个简单的字符替换映射应该可以满足您的需求。

反斜杠可能是阿拉伯问号：؟ 和斜线可能是希腊大写字母 omega 与 dasia 和 prosgegrammeni：ᾩ</p>

当然，您必须选择合法文件系统字符以及在真实注册表项中存在的可能性几乎为零的字符。但是 unicode“字母”非常大。应该问题不大。尾随期间可以以相同的方式处理。

`charmap.exe`是你的朋友

# android - Android GCM onMessage

> ID：12534983
> 
> 赞同：2
> 
> 时间：2012-09-21T17:05:47.823
> 
> 标签：android, push-notification, google-cloud-messaging

我尝试在我的项目中实现 GCM，但在 onMessage 函数中存在问题。根据示例，我写道：

```
@Override
protected void onMessage(Context arg0, Intent arg1) {
// TODO Auto-generated method stub
Log.d("GCM", "RECIEVED A MESSAGE: " + arg1.getStringExtra("message"));
// other part of the code goes here...
} 
```

好吧，我得到了这个 getStringExtra 的错误 - 似乎这个意图不包含它。我确实收到了 onMessage 事件，这是肯定的。我只是在尝试获取实际消息时遇到错误。我的服务器收到：

```
{"multicast_id":7888157947681629492,"success":1,"failure":0,"canonical_ids":0,"results":[{"message_id":"0:1348246306435688%196553bef9fd7ecd"}]} 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-09-21T17:22:26.813

GCM 约定是：您在发送时作为“data.foo”提供的值将作为名为“foo”的额外意图传递。您是否将“data.message”放入服务器上的 POST 数据块中？

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T17:11:59.797

如果您正在接收 tne 广播 onMessage() 检查您的服务器端代码，您没有将您的消息分配给服务器中的这个“消息”变量。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-12-26T11:03:09.087

请试试这个。

```
String message = intent.getExtras().getString("message"); 
```

# c++ - C 中 C++ 集合容器的等价物

> ID：12534984
> 
> 赞同：2
> 
> 时间：2012-09-21T17:05:50.070
> 
> 标签：c++, c, set, containers

我需要将一些 C++ 代码转换为 C，但我在 STL 容器方面遇到了一些问题。在原始 C++ 代码中，set 容器被用作`set< pair<int, int>, sortMapped> mySet;`其中 sortMapped 是一个自定义比较器，以通过映射值而不是键值“排序”条目。当然，基本的插入、删除和迭代器也包含在原始 C++ 代码中。

所以我的问题是，有没有人知道这种“始终排序”容器的 C 等价物，我也可以在其中编写自己的比较器？谢谢你。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-09-21T17:07:53.453

There is no such container within the C language. C does not have nice things like STL and so I think you will just have to write it yourself.

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-09-21T17:23:35.527

你有几个选择

1.  为二叉树编写代码。
2.  为 B 树编写代码。
3.  为哈希表编写代码。
4.  想想用 C 语言编写可能更简单的问题的另一种解决方案。

...而且我可能错过了其他一些数据结构——但这取决于相关数据的性质和用途。

**编辑**

你总是可以谷歌我上面提到的数据结构来获取代码示例。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2018-06-20T14:35:28.550

> 有谁知道这种“始终排序”容器的 C 等价物，我也可以在其中编写自己的比较器？

最简单的，它是一个数组，`qsort()`每次更改后使用排序。`qsort()`您可以编写自己的比较器。

使用`bsearch()`，您可以为其添加功能`std::set`。

从排序后的数组中查找项目真的很便宜。但是插入是相当昂贵的操作。因此，这不是所有时间关键型应用程序的解决方案。

# mysql - 如何使用两个有条件的表来选择查询

> ID：12534987
> 
> 赞同：-1
> 
> 时间：2012-09-21T17:06:06.107
> 
> 标签：mysql, sql

我有 2 个表，Student_Record 的表 A 和 Student_Subject 的表 B 由 Student_ID 字段链接。

```
Table A (Student_Record)
Student_ID | Name  | School_Year
1          | Jane  | 2010-2011
2          | Amy   | 2010-2011
3          | Dave  | 2011-2012
4          | Roger | 2010-2011 
```

```
Table B (Student_Subject)
Student_ID | Subject | Grade
1          | Math    | Passed
1          | Physics | Passed
1          | History | Passed
2          | Math    | Failed
2          | Physics | Passed
2          | History | Passed
3          | Math    | Passed
3          | Physics | Passed
3          | History | Passed
4          | Math    | Passed
4          | Physics | Passed
4          | History | Passed 
```

根据上面的示例表，我想选择 2010-2011 年入学并通过所有科目的学生。

结果应该返回**Jane**和**Roger**，因为他们通过了所有 3 门科目并在 2010-2011 年入学，而**Amy和****Dave**的学年是 2011-2012年数学不及格。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:09:04.490

```
select sr.Student_ID, sr.Name
from Student_Record sr
left outer join Student_Subject ss on sr.Student_ID = ss.Student_ID 
    and ss.Grade = 'Failed'
where ss.Student_ID is null
    and sr.School_Year = '2010-2011' 
```

[SQL 小提琴示例](http://sqlfiddle.com/#!2/6b0e3/2)

# php - PDO 绑定参数号无效

> ID：12534993
> 
> 赞同：0
> 
> 时间：2012-09-21T17:06:21.803
> 
> 标签：php, pdo

因此，使用 PHP 的 PDO 时出现以下错误：

```
SQLSTATE[HY093]: Invalid parameter number: parameter was not defined 
```

现在，据我了解，此错误*仅*在查询中使用参数时发生，但从未正确绑定。例如，错别字使这成为一个常见错误。

问题是……我似乎找不到问题！我已经多次检查每个参数，但找不到任何差异。其他原因会导致此问题吗？我只是在滚动需要第二双眼睛才能看到的明显错字吗？任何帮助将不胜感激！请注意`execute()`，如果这对您很重要，则错误发生在 上。

```
$sth = $dbh->prepare("
    INSERT INTO administrators
    (
        org_id,
        admin_email,
        passwd,
        passwd_salt,
        announcements,
        logo,
        design,
        content,
        layout,
        services,
        contributions_edit,
        contributions_report,
        contributions_enable,
        pledges,
        calendar,
        event,
        survey,
        email,
        caller,
        bulletin,
        prayer,
        email_newsletter,
        member_add,
        member_edit,
        passwd_reset,
        spotlight,
        profile_status,
        groups,
        attendance,
        sermons,
        church_info,
        mail_merge,
        file_upload,
        admin_name,
        administrators,
        newsletter,
        outreach,
        charts,
        streaming
    )
    VALUES
    (
        :org_id,
        :admin_email,
        :passwd,
        :passwd_salt,
        :announcements,
        :logo,
        :design,
        :content,
        :layout,
        :services,
        :contributions_edit,
        :contributions_report,
        :contributions_enable,
        :pledges,
        :calendar,
        :event,
        :survey,
        :email,
        :caller,
        :bulletin,
        :prayer,
        :email_newsletter,
        :member_add,
        :member_edit,
        :passwd_reset,
        :spotlight,
        :profile_status,
        :groups,
        :attendance,
        :sermons,
        :church_info,
        :mail_merge,
        :file_upload,
        :admin_name,
        :administrators,
        :newsletter,
        :outreach,
        :charts,
        :streaming
    )
    ");
$sth->bindParam(':org_id,', $org_id);
$sth->bindParam(':admin_email', $admin_email);
$sth->bindParam(':passwd', $passwd);
$sth->bindParam(':passwd_salt', $passwd_salt);
$sth->bindParam(':announcements', $announcements);
$sth->bindParam(':logo', $logo);
$sth->bindParam(':design', $design);
$sth->bindParam(':content', $content);
$sth->bindParam(':layout', $layout);
$sth->bindParam(':services', $services);
$sth->bindParam(':contributions_edit', $contributions_edit);
$sth->bindParam(':contributions_report', $contributions_report);
$sth->bindParam(':contributions_enable', $contributions_enable);
$sth->bindParam(':pledges', $pledges);
$sth->bindParam(':calendar', $calendar);
$sth->bindParam(':event', $event);
$sth->bindParam(':survey', $survey);
$sth->bindParam(':email', $email);
$sth->bindParam(':caller', $caller);
$sth->bindParam(':bulletin', $bulletin);
$sth->bindParam(':prayer', $prayer);
$sth->bindParam(':email_newsletter', $email_newsletter);
$sth->bindParam(':member_add', $member_add);
$sth->bindParam(':member_edit', $member_edit);
$sth->bindParam(':passwd_reset', $passwd_reset);
$sth->bindParam(':spotlight', $spotlight);
$sth->bindParam(':profile_status', $profile_status);
$sth->bindParam(':groups', $groups);
$sth->bindParam(':attendance', $attendance);
$sth->bindParam(':sermons', $sermons);
$sth->bindParam(':church_info', $church_info);
$sth->bindParam(':mail_merge', $mail_merge);
$sth->bindParam(':file_upload', $file_upload);
$sth->bindParam(':admin_name', $admin_name);
$sth->bindParam(':administrators', $administrators);
$sth->bindParam(':newsletter', $newsletter);
$sth->bindParam(':outreach', $outreach);
$sth->bindParam(':charts', $charts);
$sth->bindParam(':streaming', $streaming);
$sth->execute(); 
```

非常感谢！

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-09-21T17:13:06.987

```
$sth->bindParam(':org_id,', $org_id);
                        ^
                        |
                        |_____________ This , is intentional? i guess not.

$sth->bindParam(':admin_email', $admin_email);
$sth->bindParam(':passwd', $passwd);
$sth->bindParam(':passwd_salt', $passwd_salt);
$sth->bindParam(':announcements', $announcements);
$sth->bindParam(':logo', $logo);
$sth->bindParam(':design', $design);
$sth->bindParam(':content', $content);
$sth->bindParam(':layout', $layout);
$sth->bindParam(':services', $services);
$sth->bindParam(':contributions_edit', $contributions_edit);
$sth->bindParam(':contributions_report', $contributions_report);
$sth->bindParam(':contributions_enable', $contributions_enable);
$sth->bindParam(':pledges', $pledges);
$sth->bindParam(':calendar', $calendar);
$sth->bindParam(':event', $event);
$sth->bindParam(':survey', $survey);
$sth->bindParam(':email', $email);
$sth->bindParam(':caller', $caller);
$sth->bindParam(':bulletin', $bulletin);
$sth->bindParam(':prayer', $prayer);
$sth->bindParam(':email_newsletter', $email_newsletter);
$sth->bindParam(':member_add', $member_add);
$sth->bindParam(':member_edit', $member_edit);
$sth->bindParam(':passwd_reset', $passwd_reset);
$sth->bindParam(':spotlight', $spotlight);
$sth->bindParam(':profile_status', $profile_status);
$sth->bindParam(':groups', $groups);
$sth->bindParam(':attendance', $attendance);
$sth->bindParam(':sermons', $sermons);
$sth->bindParam(':church_info', $church_info);
$sth->bindParam(':mail_merge', $mail_merge);
$sth->bindParam(':file_upload', $file_upload);
$sth->bindParam(':admin_name', $admin_name);
$sth->bindParam(':administrators', $administrators);
$sth->bindParam(':newsletter', $newsletter);
$sth->bindParam(':outreach', $outreach);
$sth->bindParam(':charts', $charts);
$sth->bindParam(':streaming', $streaming);
$sth->execute(); 
```

# java - Running Multiple Spring Projects with different Spring Versions on Eclipse

> ID：12534994
> 
> 赞同：1
> 
> 时间：2012-09-21T17:06:22.793
> 
> 标签：java, spring, tomcat

```
Configuration problem: You cannot use a spring-security-2.0.xsd or spring-security-3.0.xsd schema with Spring Security 3.1\. Please update your schema declarations to the 3.1 schema.
Offending resource: class path resource [authentication-context.xml] 
```

In my Eclipse workspace are a set of Mavenised Spring projects on Spring verion 3.0.6.. It's a fairly large, complicated application, about a year old, with a parent pom and 6/7 sub-poms for different components. I'll title it Project A for now. Project A has two webapps within it, a public based website and a backoffice administration area.

Recently a seperate application was built for Project A to interact with via REST calls. However this new application, Project B runs on Spring 3.1.1\. This is in the same Eclipse workspace.

Project A's customer website and Project B ran fine on the same tomcat, there were no confused dependencies.

But now that development has started on Project A's backoffice interacting with Project B, there is a conflict, in the Spring security versions when Tomcat is launched.

Current solutions we've attempted have failed, but we haven't tried updating the

*   Spring version in Project A (fairly sure things will break and not sure it's worth the time retesting) and
*   downgrading Spring in Project B seems like a horrible precedent to set.

Anyone have any experience with this?

Any help is appreciated :-)

# python - 如何在 Python 中忽略或传递 xpath xml IndexError

> ID：12534995
> 
> 赞同：1
> 
> 时间：2012-09-21T17:06:22.800
> 
> 标签：python, xml, lxml

如何在`IndexError`不使用`try`&`except`我提取的每个值的情况下强制 python 忽略？

我的 XML 有多个需要提取的值。有些记录在根 [0] 处没有值 /，因此我必须为要提取的每个节点手动使用`try`& 。`except IndexError:`

这是我的代码：

```
try:
    a = etree.XPath('/Data/a/b/nodeA/text()')(root)[0]  
except IndexError:  
    a = ''
try:
    b = etree.XPath('/Data/a/b/x/y/nodeB/text()')(root)[0]  
except IndexError:  
    b = ''
try:
    c = etree.XPath('/Data/a/b/d/nodeB/text()')(root)[0]  
except IndexError:  
    c = '' 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-09-21T17:07:56.077

在尝试检索第一个匹配项*之前*测试返回值：

```
a = etree.XPath('/Data/a/b/nodeA/text()')(root)
if a:
   # do something with a[0] 
```

或者，设置`a`为空字符串或单行的第一个值：

```
a = etree.XPath('/Data/a/b/nodeA/text()')(root)
a = a[0] if a else '' 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-09-21T17:44:35.177

当我使用 xpath 查询时，我尝试使用循环而不是索引。这样，如果查询没有找到任何东西，嵌套在循环中的代码永远不会运行，并且您不必索引，因为循环值在每次迭代中都绑定到本地名称。允许一个例子。

```
for a, b, c in zip(
    etree.XPath('/Data/a/b/nodeA/text()')
    etree.XPath('/Data/a/b/x/y/nodeB/text()')
    etree.XPath('/Data/a/b/d/nodeB/text()')):

    print a, b, c 
```

# php - 根据角色或能力限制对 Wordpress 页面的访问

> ID：12534998
> 
> 赞同：1
> 
> 时间：2012-09-21T17:06:41.703
> 
> 标签：php, wordpress, role, restrict, capability

**如何**根据用户的[角色或能力](http://codex.wordpress.org/Roles_and_Capabilities)限制对特定 Wordpress 页面的访问？我知道有各种插件可以实现这一点，我在谷歌搜索时发现了一些非常陈旧的解决方案。

我相信现在是时候拥有一个有效的最新解决方案了。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-09-21T18:08:39.503

正如我在回答[你最近的一个问题后](https://stackoverflow.com/questions/12464220/custom-taxonomy-setting-access-based-on-role-or-capability)试图在评论中解释的那样，以及在[你的链接文档底部的](http://codex.wordpress.org/Roles_and_Capabilities#Resources)**开发资源**部分中引用的那样，是（据我所知）最灵活和最全面的方法给定[用户级别](http://codex.wordpress.org/User_Levels)的替换（2.0）和弃用（3.0）测试用户能力。`current_user_can`

无论您是允许*还是*限制访问以查看页面或进行特定更改，与 Wordpress 已经定义的与角色相关联的功能相结合是有意义的。当您使用任何类型的*角色范围*、*能力编辑*或*超级管理员*插件或功能时，尤其如此。它也不受单个或多站点安装中的应用程序的阻碍，并涵盖了所有可能的用户。

当您测试当前用户是否可以执行此操作时，与哪些功能与某些角色或用户级别相关联相比，这些功能发生变化的可能性要小得多。

您需要了解的所有内容都[在 docs 中得到了](http://codex.wordpress.org/Function_Reference/current_user_can)`current_user_can`很好的解释，并且通常遵循以下逻辑：

```
if ( current_user_can('do_something_pertaining_to_the_below') ) {
    echo 'You are a user who can do the above thing, so do the below thing';
    /* the thing */
} 
```

反过来：

```
if ( !current_user_can('some_fancy_capability') ) {
    echo 'No can do';
    return;
}
else { /* the similarly fancy, restricted thing */ } 
```

综上所述，如果有人听说过一种更先进、更智能的方法，我全都听好了！