# StackOverflow 问答 13068000-13068999

# sql - 用临时表中的不同值更新每一行

> ID：13068001
> 
> 赞同：0
> 
> 时间：2012-10-25T11:53:53.747
> 
> 标签：sql, sql-server, tsql

我有一列需要使用临时表中的代码进行更新。临时表中有 +/- 5 个代码。表中的每一行都必须使用临时表中的值之一进行更新。

```
Example
id  code
1   200
2   400
3   600
4   9000
5   800
6   200
7   400
8   600
9   9000
10  800 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:22:15.340

要获取行集，您需要试试这个

```
declare @cnt int

select @cnt = count(*) from codes

select M.id, C.Code
from
(
    select
        T.id, (row_number() over (order by id) - 1) % @cnt + 1 as RowNum
    from T as T
) as M
    left outer join
    (select Code, row_number() over (order by Code) as RowNum from codes as T) as C
        on C.RowNum = M.RowNum 
```

[http://sqlfiddle.com/#!3/cbd84/1](http://sqlfiddle.com/#!3/cbd84/1)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:16:47.350

## SQL Server 解决方案

此查询将按顺序从`temp`表中获取值，并以循环方式更新示例表中的代码，并`temp`在需要时重复这些值。

```
update e
set code = t.code
from example e
join temp t on t.id = (e.id -1) % (select count(*) from temp) + 1 
```

如果两个表中的 id 不是连续的，那么您可以`row_number()`先使用它们，例如

```
update e
set code = t.code
from (select *,rn=row_number() over (order by id) from example) e
join (select *,rn=row_number() over (order by id) from temp) t
  on t.rn = (e.rn -1) % (select count(*) from temp) + 1 
```

相同的技术（mod，row-number）可以在其他 RDBMS 中使用，但语法会有所不同。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:25:57.000

另一种方法：假设您要更新的表称为示例。一个简单的 Oracle 合并将是。

```
Merge INTO Example Using Temp_Table ON Example.Id = Temp_Table.Id
When Matched Then
UPDATE Example
SET Example.code = Temp_Table.code
From Example
Inner Join
Temp_Table
ON
Example.Id = Temp_Table.Id
When Not Matched Then
Insert Into Example 
Select * From Temp_Table 
```

# nhibernate - 不理解这个错误

> ID：13068003
> 
> 赞同：0
> 
> 时间：2012-10-25T11:54:08.227
> 
> 标签：nhibernate, nhibernate-mapping

鉴于下面的代码和映射，为什么会出现此错误？

# 测试失败的错误

```
 [Test]
    public void Cascade_Can_Persist_Hero_Without_Epic()
    {
        _epic = new Epic("illiad");
        var hero = new GreekHero("ted");
        hero.SetEpic(_epic);
        _session.SaveOrUpdate(_epic);
        _session.Flush();
        _session.Evict(_epic);
        Assert.That(_epic.IsPersistent());
        Assert.That(hero.IsPersistent());

        var found = _session.Get<GreekHero>(hero.Id);
        found.Look();

        Assert.That(found, Is.EqualTo(hero));
    }

NHibernate: select next_hi from hibernate_unique_key
NHibernate: update hibernate_unique_key set next_hi = @p0 where next_hi = @p1;@p0 = 6 [Type: Int32 (0)], @p1 = 5 [Type: Int32 (0)]
NHibernate: select next_hi from hibernate_unique_key
NHibernate: update hibernate_unique_key set next_hi = @p0 where next_hi = @p1;@p0 = 7 [Type: Int32 (0)], @p1 = 6 [Type: Int32 (0)]
NHibernate: 
    INSERT INTO Epic (EpicName, EpicId) 
    VALUES (@p0, @p1);
        @p0 = 'illiad' [Type: String (0)], 
        @p1 = 163840 [Type: Int32 (0)]
NHibernate: 
    INSERT INTO GreekHero (HeroName, EpicId, GreekHeroId) 
    VALUES (@p0, @p1, @p2);
        @p0 = 'ted' [Type: String (0)], 
        @p1 = 163840 [Type: Int32 (0)], 
        @p2 = 196608 [Type: Int32 (0)]
Test 'Core.Data.Tests.NHibernate.Bootstraps.MappingTests.CollectionMappingConstraintTests.Cascade_Can_Persist_Hero_Without_Epic' failed:
    NHibernate.Exceptions.GenericADOException : could not insert: 
    [Core.TestingSupport.GreekGods.Domain.GreekHero#196608][SQL: INSERT INTO GreekHero (HeroName, EpicId, GreekHeroId) VALUES (?, ?, ?)]
  ----> System.Data.SqlServerCe.SqlCeException : 
  A foreign key value cannot be inserted because a corresponding primary key value does not exist. [ Foreign key constraint name = FK253126F517FE25F6 ] 
```

# 对象模型（父）

```
public class Epic : Entity
{
    ...

    [UsedImplicitly] // NHib uses this
    public Epic() {
        _greekHeroes = new HashedSet<GreekHero>();
    }

    /// <summary>
    /// The backing store for order items. NHib will set this when loaded from the db.
    /// </summary>
    private readonly Iesi.Collections.Generic.ISet<GreekHero> _greekHeroes;

    /// <summary>
    /// An enumeration of greek heros for public consumption.
    /// </summary>
    public virtual IEnumerable<GreekHero> GreekHeroes { get { return _greekHeroes; } }

    public virtual bool AddItem(GreekHero newItem)
    {
        if (!ReferenceEquals(newItem, null) && _greekHeroes.Add(newItem))
        {
            newItem.SetEpic(this);
            return true;
        }
        return false;
    }

    public virtual bool RemoveItem(GreekHero itemToRemove)
    {
        if (!ReferenceEquals(itemToRemove, null) && _greekHeroes.Remove(itemToRemove))
        {
            itemToRemove.SetEpic(null);
            return true;
        }
        return false;
    }
} 
```

# 对象模型（子）

```
public class GreekHero : Entity
{
    ...

    #endregion

    #region Epic (a Greek Hero may be associated with an Epic)

    /// <summary>
    /// The Epic associated with this Greek Hero.
    /// </summary>
    public virtual Epic Epic { get; protected set; }

    /// <summary>
    /// This enforces referential integrity in the object model between this <see cref="GreekHero"/>
    /// and the <see cref="Domain.Epic.GreekHeroes"/>.
    /// </summary>
    /// <param name="epic">The new epic associated with this hero.</param>
    /// <remarks><seealso cref="Domain.Epic.AddItem"/> and <seealso cref="Domain.Epic.RemoveItem"/></remarks>
    public virtual void SetEpic(Epic epic)
    {
        var prevEpic = Epic;
        if (epic == prevEpic) return;

        Epic = epic;

        if (!ReferenceEquals(prevEpic, null))
            prevEpic.RemoveItem(this);

        if (!ReferenceEquals(epic, null))
            epic.AddItem(this);
    }

    #endregion
} 
```

# HBM 映射（父）

```
<id name="Id">
  <column name="EpicId" />
  <generator class="hilo" />
</id>

<natural-id>
  <property name="EpicName" length="30" />
</natural-id>

<set name="GreekHeroes"
     cascade="all-delete-orphan"
     inverse="true"
     access="field.camelcase-underscore">
  <key column="GreekHeroId" />
  <one-to-many class="GreekHero"/>
</set> 
```

# HBM 映射（儿童）

```
<id name="Id">
  <column name="GreekHeroId" />
  <generator class="hilo" />
</id>

<natural-id>
  <property name="HeroName" length="30" />
</natural-id>

<many-to-one name="Epic" column="EpicId" /> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:40:13.407

<set> 中的 <key> 元素表示子表中要存储*父键的列。*在您的情况下，它应该是“EpicId”，因为这是您在 <many-to-one> 中声明的内容。

# wordpress - Wordpress 浮动/粘性框

> ID：13068010
> 
> 赞同：1
> 
> 时间：2012-10-25T11:54:43.063
> 
> 标签：wordpress

我试了又试，但我找不到一些在页面上为我提供浮动/粘性框的插件。就像那些粘在左侧并浮动的粘性社交图标/书签。我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:24:31.623

你可以在没有插件的情况下做到这一点。只需在要粘的元素上使用 position:fixed 即可。

```
your-element {position:fixed; top:10px; left:100px;} 
```

# python - NumPy 中的高效 3x3 和 2x2 行列式

> ID：13068011
> 
> 赞同：1
> 
> 时间：2012-10-25T11:54:53.740
> 
> 标签：python, numpy, linear-algebra

我有一个大的 numpy 数组，形状`arr`为两个或三个。数组可以被认为是在和维度中被块在一起的矩阵块。我希望采用这些矩阵中的每一个的行列式：`(N, D, M, D)``D``(D,D)``N``M``(D,D)`

```
out = np.empty((N,M))
for i in xrange(N):
    for j in xrange(M):
        out[i,j] = np.linalg.det(arr[i,:,j,:]) 
```

唯一的问题是它`np.linalg.det`不会对小矩阵进行特殊处理，每个块的完整 BLAS 调用和 LU 分解也是如此。事实上，在我最近的 Core i7 系统上，一个 2 x 2 矩阵`np.linalg.det`需要大约 40us。我有哪些方法可以提高这个片段的性能？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T16:20:35.640

`numpy`为了阐明 duffymo 的观点，您可以使用矢量化操作轻松利用自己的函数利用块结构。这是否会给您带来加速可能取决于 M 和 N 的大小：

```
>>> a = numpy.arange(2 * 2 * 2 * 2).reshape(2, 2, 2, 2)
>>> a[:,0,:,0] * a[:,1,:,1] - a[:,1,:,0] * a[:,0,:,1]
array([[-4, -4],
       [-4, -4]])
>>> a = numpy.arange(2 * 3 * 2 * 3).reshape(2, 3, 2, 3)
>>> a[:,0,:,0] * a[:,1,:,1] * a[:,2,:,2] + \
    a[:,0,:,1] * a[:,1,:,2] * a[:,2,:,0] + \
    a[:,0,:,2] * a[:,1,:,0] * a[:,2,:,1] - \
    a[:,0,:,0] * a[:,1,:,2] * a[:,2,:,1] - \
    a[:,0,:,1] * a[:,1,:,0] * a[:,2,:,2] - \
    a[:,0,:,2] * a[:,1,:,1] * a[:,2,:,0]
array([[0, 0],
       [0, 0]]) 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:57:06.447

您不需要 LU 分解来计算 2x2 或 3x3 矩阵的行列式。公式是众所周知的。为什么不编写自己的函数并调用它们呢？

# jquery - 为什么这个 $.isFunction 返回 false？

> ID：13068012
> 
> 赞同：0
> 
> 时间：2012-10-25T11:54:54.383
> 
> 标签：jquery

我创建了一个 jquery 函数，但如果函数名在字符串中，$.isFunction 似乎总是返回 false。

```
(function( $ ) {
    $.myTest = function() {
       return true;
    }
})( jQuery );

alert($.isFunction('$.myTest')); 
```

小提琴：[这里](http://jsfiddle.net/JqCzH/)。

注意：如果我删除引号（例如`alert($.isFunction($.myTest));`，它可以工作，但我的函数在字符串中。

# 编辑

这个函数名在一个字符串中，因为我创建了一个插件来从 dom 元素中的参数创建 ajax。例如 ：

```
 data-route="xxx.php"
        data-lock=".buttonsToLock"
        data-output="#outputContainer"
        data-callback-after="$.myTest" 
```

但我无法检查是否`data-callback-after`是现有功能。

任何的想法？

谢谢

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T11:56:13.567

您应该始终将对象传递给[`$.isFunction()`](http://api.jquery.com/jQuery.isFunction/)方法：

```
alert($.isFunction($.myTest)); 
```

否则，您将始终收到`false`，因为默认情况下*string 不是函数*。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:10:57.107

函数将被存储，`window`所以你可以尝试这样的事情：

```
$.isFunction(window['myTest']); 
```

但是，由于您使用的是“命名空间”，因此您需要这样做：

```
$.isFunction(window['$']['myTest']); 
```

或者您可以使用此功能：

```
function isFunctionByName(functionName, context) {
  var namespaces = functionName.split(".");
  var func = namespaces.pop();
  for(var i = 0; i < namespaces.length; i++) {
    context = context[namespaces[i]];
  }
  return $.isFunction(context[func]);
}

alert(isFunctionByName("$.myTest", window)); 
```

[http://jsfiddle.net/JqCzH/2/](http://jsfiddle.net/JqCzH/2/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T12:09:50.660

看起来你试图动态调用函数/回调。

您应该考虑以下方法。

```
 (function( $ ) {
        window.myTest = function() {
           return true;
        }
    })( jQuery );

var data-route="xxx.php",
    data-lock=".buttonsToLock",
    data-output="#outputContainer",
    data-callback-after="myTest";

    // To run the function 
    window[data-callback-after]();

    // To test the function
    $.isFunction(window[data-callback-after]); 
```

# asp.net - 如何使用queryString将值从一个asp页面传递到另一个asp页面？

> ID：13068019
> 
> 赞同：4
> 
> 时间：2012-10-25T11:55:21.263
> 
> 标签：asp.net, c#-4.0, query-string, request.querystring, querystringparameter

如何使用queryString将值从一个asp.net页面传递到另一个asp.net网页。这意味着**test1.aspx和test2.aspx**是两个网页。

在 test1.aspx 中，我有字符串值，

```
string abc="stackoverflow"; 
```

如果我这样使用

**Request.Redirect("test2.aspx?numbers=" + abc);** .它不会工作。如果我这样使用，我无法在 test2.aspx 页面中获得 abc 值。

```
how to get this abc values into the test2.aspx? 
```

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T11:57:19.747

代替

```
Request.Redirect("test2.aspx?numbers=" + abc); 
```

采用

```
Response.Redirect("test2.aspx?numbers=" + abc); 
```

要在页面中接收 QueryString 值，`test2.aspx`您可以使用

```
Request.QueryString["numbers"]; 
```

# excel - 是否可以将 Sqlite 数据库嵌入到 excel 2007 文件（zip 存档）中

> ID：13068022
> 
> 赞同：4
> 
> 时间：2012-10-25T11:55:33.420
> 
> 标签：excel, sqlite, odbc

我正在开发一个需要数据库后端的 excel 应用程序。我的偏好是使用 SQLite 3 并使最终用户尽可能无缝和可移植。

最近我了解到 Excel 2007 文件只是一个带有 xlsm 扩展名的 zip 存档。我的问题是，我可以将我的后端 SQLite 3 数据库存储在 Zip 存档中并使用 ODBC 与数据库进行交互。如果是这样，任何人都可以向我指出一些背景信息、文章和实现这一目标的指导。这种方法是否有任何缺点或我应该知道的更好的选择。

感谢您的输入。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-11-02T13:44:35.903

一些笔记。到目前为止，没有人抱怨文件打不开。请注意，在运行 ADO 代码之前保存 Excel 文件。

非常隐蔽：

```
ThisWorkbook.Worksheets("Courses").Visible = xlVeryHidden
ThisWorkbook.Worksheets("System").Visible = xlVeryHidden 
```

一段代码：

```
 Const gCN = "Provider=Microsoft.ACE.OLEDB.12.0;Data Source=" 
```

<...>

```
Set rs = CreateObject("ADODB.Recordset")
Set cn = CreateObject("ADODB.Connection")
Set fs = CreateObject("Scripting.FileSystemObject")

scn = gCN & ThisWorkbook.FullName _
& ";Extended Properties=""Excel 8.0;HDR=Yes;"";"

cn.Open scn

''If they do not have an ID, they do not exist.

sSQL = "SELECT ID,FirstName,LastName, " _
& "CourseName,AdditionalText,Format(ExpiryDate,'dd/mm/yyyy') As ExpiryDate " _
& "FROM [Applicants$] WHERE DateCancelled Is Null AND ID Is Not Null " _
& "AND (FirstName Is Null OR LastName Is Null Or CourseName Is Null " _
& "Or ExpiryDate Is Null) " & sWhere

rs.Open sSQL, cn 
```

参考：

[Excel ADO](http://support.microsoft.com/kb/257819)
[连接字符串](http://www.connectionstrings.com/)

Jet 可用的大多数方法都可以与 Excel 一起使用

[基础 Microsoft Jet SQL for Access 2000](http://msdn.microsoft.com/en-us/library/aa140011%28office.10%29.aspx)
[中级 Microsoft Jet SQL for Access 2000](http://msdn.microsoft.com/en-us/library/aa140015%28office.10%29.aspx)
[高级 Microsoft Jet SQL for Access 2000](http://msdn.microsoft.com/en-us/library/aa139977%28office.10%29.aspx)

**编辑重新评论**

我没有发现泄漏特别严重，但我没有运行很多迭代，这是一台相当不错的机器。

下面的代码使用 DAO，它不会导致内存泄漏。

```
'Reference: Microsoft Office 12.0 Access Database Engine Object Library
Dim ws As DAO.Workspace
Dim db As DAO.Database
Dim rs As DAO.Recordset
Dim sDb As String
Dim sSQL As String

sDb = ActiveWorkbook.FullName

Set ws = DBEngine.Workspaces(0)
Set db = ws.OpenDatabase(sDb, False, True, "Excel 8.0;HDR=Yes;")

sSQL = "SELECT * FROM [Sheet1$];"
Set rs = db.OpenRecordset(sSQL)

Do While Not rs.EOF
    For i = 0 To rs.Fields.Count - 1
        Debug.Print rs.Fields(i)
    Next

    rs.MoveNext
Loop

rs.Close
db.Close
ws.Close

 'Release objects from memory.
Set rs = Nothing
Set db = Nothing
Set ws = Nothing 
```

致谢：[http ://www.ozgrid.com/forum/showthread.php?t=37398](http://www.ozgrid.com/forum/showthread.php?t=37398)

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2013-07-05T21:06:53.923

这是一个替代方案。

1) 在打开时（VBA 中的事件）从 Excel .xlsm、sqlite 和 dbFile 中解压缩。

2）处理你......

3）在保存（VBA 中的事件）书时，然后在 Excel .xlsm 中附加 Excel .xlsm、sqlite、dbFile。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-31T10:03:22.927

Excel 每次保存文件时都会重写文件，因此您自己添加的文件将被删除。此外，没有 SQLite 驱动程序可以访问 zip 存档中的数据库文件。

当您的应用程序检测到数据库文件丢失时，您必须将数据库文件与 Excel 文件一起提供，或者使用 SQL 命令列表重新创建数据库。
这仍然需要在用户的机器上安装一些 SQLite (ODBC) 驱动程序。

如 Remou 所述，将数据存储在 Excel 文件中的最无缝和可移植的方式是将其存储在 Excel 工作表中。但是，ADO 驱动程序可能会拒绝打开已经在 Excel 中打开的文件，因此您必须使用 Excel 函数来访问数据。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-11-06T09:52:52.800

尝试使用[http://code.google.com/p/pyinex/](http://code.google.com/p/pyinex/) 这将 Python 解释器嵌入 Excel

# c++ - 小加权 DAG 实际实践中最快的 min-cut（max-flow）算法

> ID：13068029
> 
> 赞同：6
> 
> 时间：2012-10-25T11:55:46.567
> 
> 标签：c++, directed-acyclic-graphs, max-flow

我想很快解决很多小型 DAGS（8-12 个节点，20-60 个边）上的最小切割问题。看起来最好的解决方案是解决最大流量并从中推断出一个削减。有相当多的最大流算法可以进行理论和经验时序比较，但是这些都假设有趣的是随着图表越来越大的性能。人们还经常提到，使用的复杂数据结构的设置时间可能非常长。那么给定一个仔细、优化的实现（可能在 C++ 中），哪种算法在小图上初始化和运行速度最快？（我天真的假设是 Edmonds-Karp 在数据结构方面可能很简单，因此会击败更复杂的算法，但这只是一个猜测。）

# ruby-on-rails - 如何在rails视图中编码对象？

> ID：13068032
> 
> 赞同：0
> 
> 时间：2012-10-25T11:55:55.147
> 
> 标签：ruby-on-rails, ruby, encoding

我有这样的控制器：

```
def accumulators

    @pre_accums = Accumulator.all
    @accums = Kaminari.paginate_array(@pre_accums).page(params[:page]).per(20)
  end 
```

和这样的看法

```
-if @accums.present?
  -@accums.each do |a|
    = a.model
    = a.get_accum_price(a.id)
    %br
= paginate @accums 
```

现在看起来像这样：

```
Áýðåí ïðîôè 35ç (535151) 300A 187x127x220 ðóñ.òîíê.êëåìû 47.0 
Áýðåí ïðîôè 44ç (544107) 390A 207x175x190 45.0 
```

但在 db 中我有奇怪的数据编码）它的编码是 iso-8859-15（到 db 表），我必须将它转换为 ti cp1251。但如何做到这一点仅适用于 `= a.model`

?

所以像“ISO-8859-15:CP1251”这样编码

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:34:09.493

语法和过程取决于您使用的数据库。这是一个用例，您可以只更改 MySQL 的当前数据库的字符集：

```
ALTER TABLE table_name CHARACTER SET "ISO-8859-15:CP1251"; 
```

这个用例是当您实现相同的目标但采取不同的步骤时。在 postgresql 中（你可以在 mysql 中做同样的事情），你必须对当前数据库进行转储，删除它，创建一个具有所需编码的新数据库并从转储中导入数据：

```
pg_dump database_name > outfile
DROP DATABASE database_name
CREATE DATABASE database_name ENCODING 'LATIN1';
psql database_name < infile 
```

# php - 从 ID 确定正确对象类型的最佳算法

> ID：13068034
> 
> 赞同：0
> 
> 时间：2012-10-25T11:56:02.787
> 
> 标签：php, mysql, algorithm

假设我有一个对象、人员和建筑物的数据库。

个人 ID 的一个示例是 PRS001。

建筑物 ID 的一个示例是 BUL001。

Persons 是一个包含所有人员的表；Buildings 是一张包含所有建筑物的桌子。对象包含所有人员和所有建筑物。

现在，如果我从 Object 中提取所有数据，我怎么知道它是人还是建筑物？

我可以做这样的事情：

```
if(start_of_string_is(BUL))
    then it's a building
else if(start_of_string_is(PRS))
    then it's a person 
```

但是，难道没有更简洁、更性感的方式来实现这一结果吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:05:41.327

你在这里制造了一个基本的设计缺陷。A`person`不是a ，并且a**不是****a**。`building``building`**`person`**

 **在面向对象的世界中，这些将是不同类型的对象，并且要根据对象的类型检查对象的实例，您将使用[InstanceOf](http://php.net/manual/en/internals2.opcodes.instanceof.php)。

此外，您正在使用密钥来获取有关记录的信息。这不是钥匙应该如何工作的方式。键唯一标识一条记录，没有任何意义。

更糟糕的是，您已经有 2 张桌子。那么为什么不从persons 表实例化一个person 对象，从buildings 表实例化一个建筑对象。[PDO 可以](http://php.net/manual/en/pdostatement.fetchobject.php)在获取时自动实例化这些对象。

例子：

```
$person = $statement->fetchObject ( 'person' ); 
```

从persons表中获取一行时。

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T13:24:56.707

Goobri 先生，您告诉我该字符串将始终以 3 个字符开头，那么您可以执行以下操作：

```
// Sample:

$ids = array('BUL001', 'PRS001');

foreach($ids as $id) {
    switch (substr($id, 0, 3)) {
    case 'BUL':
        // it's a building
        break;
    case 'PRS':
        // it's a person
        break;
    default:
        // invalid
        break;
    }
} 
```**

# visual-studio - 自动将程序集版本设置为 false

> ID：13068035
> 
> 赞同：1
> 
> 时间：2012-10-25T11:56:05.353
> 
> 标签：visual-studio, nuget, .net-assembly

我的 .net 项目中的引用必须将其“特定版本”属性设置为 false。我使用 nuget 来引用外部 dll，出于某种原因，该属性会以随机方式不断重置为 true。

有没有办法防止这种情况？如果没有，当我打开我的解决方案时，我将如何创建一个 powershell 脚本来将此属性设置为 false ？

# c# - 自定义 ValidationMessageFor 和错误类型

> ID：13068037
> 
> 赞同：0
> 
> 时间：2012-10-25T11:56:10.000
> 
> 标签：c#, validation, custom-attributes

有什么方法可以使用 ModelState 和模型进行验证，以确定错误的类型？

例子：

[必需的]

我想制作一个自定义 ValidationMessageFor，并在其中确定错误是 [Required] 还是其他类型的错误。

我正在使用 DataAnnotations 和 CodeFirst。

有是从开始实现的代码：

```
public static MvcHtmlString MyValidationMessageFor<TModel, TProperty>(this HtmlHelper<TModel> helper, Expression<Func<TModel, TProperty>> expression)
{
    var Validacao = "";       
    if (helper.ViewData.ModelState[((MemberExpression)expression.Body).Member.Name] != null)
    {   
        foreach (var erros in helper.ViewData.ModelState[((MemberExpression)expression.Body).Member.Name].Errors)
        {
            Validacao = Validacao + " *";
        }
    }            
    return MvcHtmlString.Create(Validacao);
} 
```

tks

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:04:00.647

任何验证属性都有[ErrorMessage](http://msdn.microsoft.com/en-us/library/system.componentmodel.dataannotations.validationattribute.errormessage.aspx)属性，您可以使用它直接在属性中指定错误消息。例子：

```
[Required(ErrorMessage = "required error")]
[MaxLength(10, ErrorMessage = "max length error")] 
```

# jenkins - 在 jenkins 上发布 Buildnotes

> ID：13068039
> 
> 赞同：0
> 
> 时间：2012-10-25T11:56:11.543
> 
> 标签：jenkins

我想在 Jenkins 上发布我的 uildnotes，它是一个 html 文件。我该如何做到这一点？

例如，我有一个文件 4.9.0.12_buildNotes.html，我想在我的 jenkins 页面上显示这个文件的内容我该怎么做

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:55:24.790

您可以简单地将其存储为构建工件。请参阅作业配置页面上的“归档工件”。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-29T11:22:19.943

如果您的笔记很简短，您可能需要使用[Groovy Postbuild Plugin](https://wiki.jenkins-ci.org/display/JENKINS/Groovy+Postbuild+Plugin)

查看示例 1。它将文本直接放在构建页面上。

# python - Python SyntaxError：'return' 外部函数

> ID：13068043
> 
> 赞同：13
> 
> 时间：2012-10-25T11:56:18.203
> 
> 标签：python

编译器显示：

```
File "temp.py", line 56
    return result
SyntaxError: 'return' outside function 
```

我哪里错了？

```
class Complex (object):
    def __init__(self, realPart, imagPart):
        self.realPart = realPart
        self.imagPart = imagPart            

    def __str__(self):
        if type(self.realPart) == int and type(self.imagPart) == int:
            if self.imagPart >=0:
                return '%d+%di'%(self.realPart, self.imagPart)
            elif self.imagPart <0:
                return '%d%di'%(self.realPart, self.imagPart)   
    else:
        if self.imagPart >=0:
                return '%f+%fi'%(self.realPart, self.imagPart)
            elif self.imagPart <0:
                return '%f%fi'%(self.realPart, self.imagPart)

        def __div__(self, other):
            r1 = self.realPart
            i1 = self.imagPart
            r2 = other.realPart
            i2 = other.imagPart
            resultR = float(float(r1*r2+i1*i2)/float(r2*r2+i2*i2))
            resultI = float(float(r2*i1-r1*i2)/float(r2*r2+i2*i2))
            result = Complex(resultR, resultI)
            return result

c1 = Complex(2,3)
c2 = Complex(1,4)
print c1/c2 
```

那这个呢？

```
class Complex (object):
    def __init__(self, realPart, imagPart):
        self.realPart = realPart
        self.imagPart = imagPart            

    def __str__(self):
        if type(self.realPart) == int and type(self.imagPart) == int:
            if self.imagPart >=0:
                return '%d+%di'%(self.realPart, self.imagPart)
            elif self.imagPart <0:
                return '%d%di'%(self.realPart, self.imagPart)
        else:
            if self.imagPart >=0:
                return '%f+%fi'%(self.realPart, self.imagPart)
            elif self.imagPart <0:
                return '%f%fi'%(self.realPart, self.imagPart)

    def __div__(self, other):
        r1 = self.realPart
        i1 = self.imagPart
        r2 = other.realPart
        i2 = other.imagPart
        resultR = float(float(r1*r2+i1*i2)/float(r2*r2+i2*i2))
        resultI = float(float(r2*i1-r1*i2)/float(r2*r2+i2*i2))
        result = Complex(resultR, resultI)
        return result

c1 = Complex(2,3)
c2 = Complex(1,4)
print c1/c2 
```

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-25T11:58:24.513

我会检查我的缩进，它看起来不对劲。您是否可能混合使用制表符和空格？PEP8 [（Python 样式指南）](http://www.python.org/dev/peps/pep-0008/)建议[仅使用 4 个空格](http://www.python.org/dev/peps/pep-0008/#tabs-or-spaces)。与其他语言不同，whitepace 在 Python 中有很大的不同，所以一致性很重要。

上面还提出以下建议：

> 当使用 -t 选项调用 Python 命令行解释器时，它会发出有关非法混合制表符和空格的代码的警告。使用 -tt 时，这些警告会变成错误。强烈推荐这些选项！

特别是，您的 2nd`else`似乎已关闭（可能应该缩进），而且这种方法`def __div__(self, other):`也是（我认为应该与您的其他`def`s 处于同一水平 - 即，移出“而不是缩进”）。

混合制表符/空白很容易出现问题，因为这两个字符都是“不可见的”。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T12:00:44.283

确保您`__div__`的声明与您的级别相同`__str__`（现在，它在 内声明`__str_`）。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T11:59:52.437

通过我的复制和粘贴，这行的所有内容：

```
else:
if self.imagPart >=0:
        return '%f+%fi'%(self.realPart, self.imagPart)
elif self.imagPart <0: # Everything under here.. 
```

到这一行：

```
 resultI = float(float(r2*i1-r1*i2)/float(r2*r2+i2*i2))
result = Complex(resultR, resultI)
return result # Needs to be unindented. 
```

有错误的缩进。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2017-11-19T13:38:52.473

好吧，我是 python 世界的新手。我学到的是 return 语句应该是这样的。

示例一：-

```
def split_train_test(data, test_ratio):
    shuffled_indices = np.random.permutation(len(data))
    test_set_size = int(len(data) * test_ratio)
    test_indices = shuffled_indices[:test_set_size]
    train_indices = shuffled_indices[test_set_size:]
    return data.iloc[train_indices],data.iloc[test_indices] 
```

示例二：-

```
def load_housing_data(housing_path=HOUSING_PATH):
    csv_path = os.path.join(housing_path, "housing.csv")
    return pd.read_csv(csv_path) 
```

我在这里回答：- [https://stackoverflow.com/a/47377418/2298357](https://stackoverflow.com/a/47377418/2298357)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2019-06-21T23:20:08.570

```
def functiont(x,y z,k):
    """some function
    """
    if xxxx:
        return True
    else
        return False 
```

根据上面的代码，您可以看到该`return`语句在函数 def 内缩进，因此在这种情况下不会出现错误。但是，如果返回缩进如下，您将收到 python 错误 - **SyntaxError :'return' outside function 。**

```
def functiont(x,y z,k):
    """some function
    """
if xxxx:
    return True
else
    return False 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2020-01-18T03:47:56.820

> 使用好的编辑器

安装以下可以正确格式化文件的编辑器之一

*   PyCharm 社区版， [https: //www.jetbrains.com/pycharm/](https://www.jetbrains.com/pycharm/)
*   Visual Studio 代码，[https://code.visualstudio.com/](https://code.visualstudio.com/)

> 格式化文档

例如：在 Visual Studio 代码中，打开文件 > 右键单击​​ > 格式化文档

> 查找并解决问题

编辑器格式化代码后，您将看到如下所示的内容

**错误的代码**

```
def func1():
    print ("I am in func1")
    return ""               # <----------- this is ok, its inside function func1

def func2():
    print ("I am in func2")
return ""                   # <-----CASE 1------ SyntaxError: 'return' outside function 'func2'

print ("I am outside of all functions")
return ""                   # <-----CASE 2------ SyntaxError: 'return' outside of all functions 
```

注意 - 在案例 1 和案例 2 中，发生错误是因为“return”不在任何函数内，而是在所有函数之外。

**好代码**

```
def func1():
    print ("I am in func1")
    return ""           # <----------- this is ok, its inside function func1

def func2():
    print ("I am in func2")
    return ""           # <-----CASE 1-- Fixed, added SPACE or TAB, now 'return' is inside function

print ("I am outside of all functions")
                        # <-----CASE 2-- Fixed, 'return' is removed, no return is required here 
```

这是一个非常常见的问题，当你在 python 中编写代码时，你可能会遇到一个空白。

希望有帮助。

# android - 通过检查Android应用的smali代码识别泄露的隐私信息

> ID：13068044
> 
> 赞同：0
> 
> 时间：2012-10-25T11:56:19.293
> 
> 标签：android, security, reverse-engineering, smali

我试图通过检查 Android 应用程序的 smali 代码来检测私人信息的泄漏。到目前为止，我的策略是.. 搜索将个人信息（例如 IMEI、电话号码）替换为变量的代码，然后跟踪该变量直到它被发送到 Internet 或不再使用的地方。

有什么好的工具可以做到这一点吗？

我试过了

*   apkinspector (http://code.google.com/p/apkinspector/)
*   androguard (http://code.google.com/p/androguard/)
*   androwarn (https://github.com/maaaaz/androwarn)

，但这些都不可能做我想做的事。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:08:41.673

解压缩 classes.dex，使用 dex2jar 并使用 jd-gui 进行检查，如果 jd-gui 不崩溃，它会更简单

您还可以搜索获取某些信息所需的函数调用，例如 imei[如何在 android 中以编程方式获取设备的 IMEI/ESN？](https://stackoverflow.com/questions/1972381/how-to-programmatically-get-the-devices-imei-esn-in-android)

# eclipse - 无法在 macOS 上启动 tomcat7 调试模式

> ID：13068046
> 
> 赞同：2
> 
> 时间：2012-10-25T11:56:24.270
> 
> 标签：eclipse, macos, debugging, tomcat

这是一个摘要：

**目标**：调试动态 Web 应用程序
**环境**：MacOS 10.6.8 / Eclipse Helios 20110218-0911 / Tomcat 7
**错误**：无法连接到远程 VM。拒绝连接。

故事线：

对此事进行了一些研究，我发现可能的问题是我需要以调试模式启动tomcat7，这通常作用于端口8000。我使用的命令`./catalina.sh jpda start`不起作用（它启动tomcat但是不启动调试模式）。所以我尝试了其他的方法，比如将这个变量添加到系统中：

```
declare -x CATALINA_HOME="/Library/Tomcat" 
declare -x JPDA_ADDRESS="8000"
declare -x JPDA_TRANSPORT="dt_socket" 
```

问题不断发生。

这是命令的返回： .`/catalina.sh jpda start`

```
Using CATALINA_BASE:   /Library/Tomcat
Using CATALINA_HOME:   /Library/Tomcat 
Using CATALINA_TMPDIR: /Library/Tomcat/temp 
Using JRE_HOME:        /System/Library/Frameworks/JavaVM.framework/Versions/CurrentJDK/Home 
Using CLASSPATH:       /Library/Tomcat/bin/bootstrap.jar:/Library/Tomcat/bin/tomcat-juli.jar 
```

谁能帮忙？

先感谢您。

# php - 回声背景图像

> ID：13068051
> 
> 赞同：0
> 
> 时间：2012-10-25T11:56:35.180
> 
> 标签：php, echo

我正在尝试在 a 中回显背景图像`.phtml`以发送电子邮件。

但是我在引用时遇到了麻烦。图像未显示。

```
<?php echo '
    Plataforma <a href="http://xxxx.com/">http://xxxx.com/</a>
    <br>
    <div style="width:220px; height:30px; background-color:black; background-repeat: no-repeat; background-image:url("http://www.inova-ria.pt/images/UebeImg/Thumb/Img_153_363_T.jpg")"></div>
'
?> 
```

IDE 验证此代码是否正确，但图像未显示在发送的电子邮件中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T11:58:48.723

```
<?php echo '
    Plataforma <a $href="http://xxxx.com/">http://xxxx.com/</a>
    <br>
    <div $style="width:220px; height:30px; background-color:black; background-repeat: no-repeat; background-image:url(\"http://www.inova-ria.pt/images/UebeImg/Thumb/Img_153_363_T.jpg\")"></div>
    '
?> 
```

style 属性的值用双引号括起来，所以里面的任何双引号都必须转义。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T11:59:03.830

你需要改变这个：

```
background-image:url("http://www.inova-ria.pt/images/UebeImg/Thumb/Img_153_363_T.jpg") 
```

到：

```
background-image:url('http://www.inova-ria.pt/images/UebeImg/Thumb/Img_153_363_T.jpg') 
```

双引号在错误的地方切断了你的 DOM，导致它被误读。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T11:58:33.457

您的 CSS 无效。更改此行：

```
background-image:url("http://www.inova-ria.pt/images/UebeImg/Thumb/Img_153_363_T.jpg") 
```

像这样阅读：

```
background-image:url('http://www.inova-ria.pt/images/UebeImg/Thumb/Img_153_363_T.jpg') 
```

因为它在 style="" 属性中，所以 background-image 行中的 " 符号表示样式属性的结束，而不是图像的路径。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T11:59:36.367

尝试使用单转义引号，例如在图像的 URL 中：

```
<?php echo '
    Plataforma <a href="http://xxxx.com/">http://xxxx.com/</a>
    <br>
    <div style="width:220px; height:30px; background-color:black; background-repeat: no-repeat; background-image:url(\'http://www.inova-ria.pt/images/UebeImg/Thumb/Img_153_363_T.jpg\')"></div>
'
?> 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T13:17:35.910

其他答案都没有解决这个问题（gmail、hotmail）。这将起作用

```
<?php echo '
    Plataforma <a href="http://xxxx.com/">http://xxxx.com/</a>
    <br>
    <div style="width:220px; height:30px; background-color:black;">
        <img src="http://www.inova-ria.pt/images/UebeImg/Thumb/Img_153_363_T.jpg">
    </div>
    '; ?> 
```

# image - Titanium：相机使应用程序崩溃

> ID：13068052
> 
> 赞同：2
> 
> 时间：2012-10-25T11:56:35.627
> 
> 标签：image, crash, camera, titanium, store

我正在使用 Titanium sdk 的 openCamera 函数来捕获图像并将其存储到 sdcard。

```
function captureImage() {
        var capturedImg;  
        Titanium.Media.showCamera({ 
            success : function(event) {                 
                /* Holds the captured image */
                capturedImg = event.media;

                /* Condition to check the selected media */
                if (event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {
                        var window1 = Project.AddDocumentSaveView.init(capturedImg, docImgModel);
                        window1.oldWindow = win;
                        Project.UI.Common.CommonViews.addWindowToTabGroup(window1);
                        activityInd.hide();

             }
            },
            cancel : function() {

            },
            error : function(error) {
                /* called when there's an error */
                var a = Titanium.UI.createAlertDialog({
                    titleid : Project.StringConstant.IMP_DOCS_CAMERA
                });

                if (error.code == Titanium.Media.NO_CAMERA) {
                    a.setMessage(Project.StringConstant.IMP_DOCS_ERROR_WITH_CAMERA);
                } else {
                    a.setMessage(Project.StringConstant.UNEXPECTED_ERROR + error.message);
                }

                a.show();
        }
        });
    } 
```

它在iphone甚至三星galaxy s2中都能正常工作。但是在一个设备上，摩托罗拉里程碑设备，当捕获后接受图片时，应用程序崩溃。

这是连接设备时的日志：[相机崩溃日志](http://pastebin.com/rPdwcvk4)

我尝试了很多次，但找不到问题。我认为这是一些内存问题，但我不确定。

有人可以调查一下并帮助我找出问题所在。

任何帮助/建议将不胜感激。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-31T03:00:31.580

此块中的所有内容都应在相机关闭后完成

```
if (event.mediaType == Ti.Media.MEDIA_TYPE_PHOTO) {
} 
```

相机是内存密集型的，您正在打开新窗口并做很多其他事情......不好。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-12-22T19:54:45.333

这是 Titanium 上的老化问题 ( [TIMOB-12848](https://jira.appcelerator.org/browse/TIMOB-12848)

在某些设备上，原生相机应用程序（Titanium 使用 Intent 调用它）会导致 Android 破坏我们的应用程序。当它尝试重新启动它时，不会恢复先前的状态，因此不会调用意图回调。

我找到了一个简单的解决方法来最小化这个问题，但没有解决它。它只是以某种方式“掩盖”它。

解决方法在上一个链接中讨论，完整的示例代码在[这里](https://gist.github.com/xcash/e0e363e04999ba9c8ad2)

# grails - 引用控制器中的 hasMany 属性

> ID：13068053
> 
> 赞同：3
> 
> 时间：2012-10-25T11:56:40.587
> 
> 标签：grails

我的用户有一个名为 watchlist 的 hasMany 属性，其中包含一定数量的股票代码，我想在网页上显示该监视列表。

```
static scaffold = User

def index() { 
    def stocks = StockSymbol.list(sort: "volume", order: "desc")
    def a = User.get(1)
    for(stock in a.watchlist)
    {
        println stock.name
        println stock.volume
        println stock.price

    }
    return [stocks: stocks]
} 
```

到目前为止，这会将信息打印到控制台。无论如何我可以存储该信息并像使用股票对象一样返回吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:09:28.787

您可以将`user`实例传递给视图 ( `index.gsp`)：

```
return [stocks: stocks, user: a] 
```

并打印您想要的所有信息：

```
<body>
    .
    .
    .
    <p>Watchlist of user ${user}</p>
    <ul>
    <g:each var="stock" in="${user.watchlist}">
        <li>${stock.name} | ${stock.volume} | ${stock.price}</li>             
    </g:each>
    </ul>
    .
    .
    .
</body> 
```

或者，您可以像这样传递监视列表：

```
return [stocks: stocks, watchlist: a.watchlist] 
```

顺便说一句 - 你可以省略`return`Groovy 中的声明。

# python - 如何将设置传递给 rq 任务？

> ID：13068056
> 
> 赞同：4
> 
> 时间：2012-10-25T11:56:57.803
> 
> 标签：python

我想知道将设置从 RQ 工作人员传递到任务功能的最佳方法是什么？

我想将我的所有设置保留在应用程序之外的文本文件中，然后在工作人员启动时读取它，然后将这些值用于执行实际任务。

现在我正在使用 os.environ。

谢谢！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2018-05-30T05:17:16.497

从“自定义工作者类”部分的[文档](http://python-rq.org/docs/workers/)中可以看出，这样做的方法是编写一个自定义工作者类。这是我一直在使用的一种模式，它将`ConfigParser`文件中的一个部分加载到名为的虚拟 python 模块中`config`：

```
import configparser
import rq.worker
import sys
import types

class ConfigurableWorker(rq.worker.Worker):
    """An RQ Worker class which loads configuration from config.ini"""

    def work(self, *args, **kwargs):
        """Perform RQ work"""

        # Store some configuration on a virtual module
        sys.modules['config'] = types.ModuleType('config')
        import config
        config_reader = configparser.ConfigParser()
        config_reader.read('config.ini')
        for key, value in config_reader['rq'].items():
            setattr(config, key, value)

        # Do work
        super().work(*args, **kwargs) 
```

然后从工作职能：

```
def my_bunch_of_work():
    import config
    con = db_connection(url=config.my_db_connection) 
```

可以使用参数来运行带有客户工作人员类的 rq 工作人员`--worker-class`。

```
$ rq worker --worker-class my.prog.ConfigurableWorker 
```

在该方法中进行某种连接池设置可能会很好`ConfigurableWorker.work`，但我不确定它的安全性，但我不太了解 RQ worker fork 模型`os.fork()`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-02-02T06:51:30.943

尝试使用该`os`模块。

```
#IN WORKER
import os
os.environ['TOKEN'] = 'xxx'

# IN JOB
#Open child processes via os.system(), popen() or fork() and execv()

someVariable = os.environ['TOKEN'] 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:12:02.217

假设您正在学习 python-rq，您可能想在此处阅读此页面并[在](http://python-rq.org/docs/workers/)[此处](http://python-rq.org/docs/)阅读配置文件。

# javascript - 主干集合，countBy 错误

> ID：13068063
> 
> 赞同：4
> 
> 时间：2012-10-25T11:57:24.073
> 
> 标签：javascript, arrays, collections, methods, underscore.js

我有一个集合，我想通过计算其属性中的相同值来进行分组。所以我执行这个：

```
_.countBy(T.collection,function(model){
    return model.get('text')
}) 
```

其中属性是一个字符串。该字符串可以包含字母 (Az)、':' 和 '_'（[下划线](http://underscorejs.org)）。它没有空格。

但是代码抛出

> 无法调用未定义的方法“get”。

我也试过

```
T.collection.countBy(function(model){
    return model.get('text')
}) 
```

但它抛出

> 对象 [对象对象] 没有方法“countBy”

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T16:57:51.663

[`countBy`](http://underscorejs.org/#countBy)不是[混合到集合中的下划线方法](http://backbonejs.org/#Collection-Underscore-Methods)之一，因此，正如您所见，这不起作用：

```
T.collection.countBy(function(model){ return model.get('text') }); 
```

并且集合不是数组，所以这也不起作用：

```
_.countBy(T.collection,function(model){ return model.get('text') }); 
```

当你这样做时`model`，它不会是集合中的模型，它将是`T.collection`对象属性的值之一；例如，这个：

```
_({where: 'is', pancakes: 'house?'}).countBy(function(x) { console.log(x); return 0 });​​​ 
```

会给你`is`和`house?`在控制台。

然而，[`T.collection.models`](http://backbonejs.org/#Collection-models)是一个数组，一个模型数组。这意味着这应该有效：

```
_.countBy(T.collection.models, function(model) { return model.get('text') }); 
```

我建议将其添加为您的收藏中的一种方法，这样外人就不必弄乱收藏的`models`属性。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:10:48.367

我可以提出两个建议：

1：集合“模型”中的某处未定义。因此，当您执行 model.get('text') 时，它会引发错误，因为您无法在未定义的变量上触发方法。也许你的功能应该是：

```
_.countBy(T.collection,function(model){
    return model ? model.get('text') : ''; // or maybe a null, depending on what you want
}); 
```

2：调试使用firebug的控制台检查模型的值是什么

```
_.countBy(T.collection,function(model){
    console.log('model', model);
    return model ? model.get('text') : '';
}); 
```

希望这可以帮助

# c# - 如何在 .NET 中叠加图像

> ID：13068065
> 
> 赞同：9
> 
> 时间：2012-10-25T11:57:42.240
> 
> 标签：c#

我有一个 .png 图像，我希望覆盖在基础图像上。

我的叠加图像仅包含一条红色斜线。我需要将红线覆盖在基本图像上，其坐标与覆盖图像中的坐标相同。

问题是我没有坐标位置。

我需要用 C# 以编程方式找到它。叠加图像将始终是透明的或白色背景。从覆盖图像中查找线坐标的代码是什么？

* * *

## 回答 #1

> 赞同：17
> 
> 时间：2012-10-25T13:46:32.763

您可以创建新图像，先渲染背景图像，然后在其上渲染叠加图像。由于叠加层具有 alpha 通道，并且线条放置在应有的位置（我的意思是线条的顶部和左侧有不透明的空间），因此您不需要坐标。插图代码：

```
Image imageBackground = Image.FromFile("bitmap1.png");
Image imageOverlay = Image.FromFile("bitmap2.png");

Image img = new Bitmap(imageBackground.Width, imageBackground.Height);
using (Graphics gr = Graphics.FromImage(img))
{
    gr.DrawImage(imageBackground, new Point(0, 0));
    gr.DrawImage(imageOverlay, new Point(0, 0));
}
img.Save("output.png", ImageFormat.Png); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:31:23.647

如果您使用的是 WPF，如果它是一条简单的线，为什么不使用覆盖[路径而不是图像？](http://msdn.microsoft.com/en-us/library/system.windows.shapes.path.aspx)这将允许它缩放到任何大小，并具有操纵其尺寸的方法。

如果您使用的是 Winforms，则可以利用一些[类似的图形绘制功能](http://www.dotnettutorials.com/tutorials/graphics/winforms-drawing-cs.aspx)。获取图像的尺寸应该很容易，假设您使用的是 PictureBox，以下属性就足够了：

```
myPictureBox.Top
myPictureBox.Bottom
myPictureBox.Left
myPictureBox.Right 
```

同样，对于 WPF 图像：

```
myImage.Margin 
```

# android-layout - NoClassDefFoundError ActionBarSherlock

> ID：13068066
> 
> 赞同：2
> 
> 时间：2012-10-25T11:57:54.813
> 
> 标签：android-layout, actionbarsherlock, noclassdeffounderror

我收到一些用户关于我的新应用程序崩溃的报告。

```
java.lang.NoClassDefFoundError: com.actionbarsherlock.R$layout
at com.actionbarsherlock.internal.ActionBarSherlockCompat.generateLayout(ActionBarSherlockCompat.java:1039)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.installDecor(ActionBarSherlockCompat.java:919)
at com.actionbarsherlock.internal.ActionBarSherlockCompat.setContentView(ActionBarSherlockCompat.java:853)
at com.actionbarsherlock.app.SherlockActivity.setContentView(SherlockActivity.java:218)
at com.androidProjects.personal.GAAClubFinderActivity.onCreate(GAAClubFinderActivity.java:58)
at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1069)
at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2751)
at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2803)
at android.app.ActivityThread.access$2300(ActivityThread.java:135)
at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2136)
at android.os.Handler.dispatchMessage(Handler.java:99)
at android.os.Looper.loop(Looper.java:144)
at android.app.ActivityThread.main(ActivityThread.java:4937)
at java.lang.reflect.Method.invokeNative(Native Method)
at java.lang.reflect.Method.invoke(Method.java:521)
at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:858)
at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:616)
at dalvik.system.NativeStart.main(Native Method) 
```

我不知道是什么原因造成的，因为相同的版本在我使用 Android 4.0.4 的手机上运行良好。

ABS 和旧版本的 Android 操作系统是否存在一些问题？

我已将我的最低版本和目标版本标记如下：

```
<uses-sdk android:targetSdkVersion="15" android:minSdkVersion="7"/> 
```

任何帮助将不胜感激。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-25T09:41:29.663

旧的 Android SDK 版本不存在 ActionBar。见这里：http: [//developer.android.com/guide/topics/ui/actionbar.html](http://developer.android.com/guide/topics/ui/actionbar.html)

因此，当您使用 ActionBar 时，您无法在 Android 爱好者然后 3.0 中运行您的应用程序。

MinSdk 版本不会在编译时检查使用情况，因为您可以通过编程方式创建 if/switch 并为不同的平台调用不同的代码。

# php - 使用 PHP 获取外部网站的 cookie

> ID：13068067
> 
> 赞同：3
> 
> 时间：2012-10-25T11:58:06.407
> 
> 标签：php, javascript, cookies

我正在尝试将网站的所有 cookie 放入 PHP 中的数组中。该脚本的目标是输入一个网站 url 并让脚本检查设置了哪些 cookie。

我试过像这样使用[HTTP_Request](http://pear.php.net/package/HTTP_Request/)：

```
$req = new HTTP_Request($url);
$req->setMethod(HTTP_REQUEST_METHOD_GET);
$req->sendRequest();
$cookies = $req->getResponseCookies(); 
```

但这只是返回服务器端设置的 cookie（如会话 ID）。我还想接收使用 javascript 设置的 cookie，例如 Google Analytics cookie。

我知道这是可能的，因为网站： http: [//www.cookie-checker.com/](http://www.cookie-checker.com/)能够这样做。为了确保“cookie-checker”网站真正解析 javascript 设置的 cookie 而不仅仅是解析已知的 javascript 源 url，我扫描了一个测试网站，该网站编写了一个虚拟 javascript cookie。他们成功地检测到了这个 cookie（包括名称、值和到期日期）。

任何帮助将不胜感激！

提前致谢。

巴里

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:03:24.643

网站无法访问其他网站设置的 cookie。

浏览器（必须）确保这不会发生。

您提到的网站所做的是向服务器发出请求并解析（也是 javascript）其内容。

您需要做的是确保您的脚本解析所有 javascript 并跟踪使用它设置的 cookie。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:01:17.157

Google Analytics cookie 由 javasvascript 设置，而不是在 http 请求的响应中。HTTP_Request 不可能，PHP 不可能……

你需要一个 javascript 解释器来获取 cookie，或者一些无头浏览器（也许是 Zombie.js？）

# url - 如何为单个动态页面设置唯一的 URL？

> ID：13068070
> 
> 赞同：0
> 
> 时间：2012-10-25T11:58:12.520
> 
> 标签：url, iis, coldfusion, url-rewriting

我认为我的问题可能措辞不正确，但这是我想要做的（出于 SEO 目的）。

我有一个页面，其中给出了一个品牌的标志和描述，例如沃尔沃。我想将同一页面用作所有制造商的模板，但只需更改几个字以相应地为每个制造商定制它。因此，在 URL 中，我将制造商的变量传递给它，例如“www.example.com/cars.cfm?manufacturer=BMW”，它将显示一个提供有关 BMW 信息的页面。

问题是对于每个制造商，信息仍然在地址栏中显示为同一页面“cars.cfm”，但我真的希望它转到“www.example.com/manufacturers/volvo.cfm”之类的 URL因此它显示为该品牌的唯一页面。但与此同时，我不想为每个制造商创建单独的 CFM（或 php/asp）页面。

有没有聪明的方法来做到这一点？我想这与 URL 重写有关，但不确定。我正在使用 IIS 7.5。

* * *

为不同的汽车制造商创建大量子文件夹将非常乏味。我的网站还将包括其他类型的制造商，用于不同的产品，而不仅仅是汽车。我想 URL 重写是最好的，但我的想法是为每个制造商提供不同的“页面”，以便改进 SEO。

基本上....

```
www.example.com/manufacturers/audi.cfm 
www.example.com/manufacturers/bmw.cfm 
www.example.com/manufactueres/volkswagen.cfm 
```

但我真的希望每个页面上的数据都来自一个数据库，该数据库包含每个制造商的唯一数据，例如徽标图像和历史描述。

这是我的意思的一个例子：

```
http://www.fivestarautocentre.co.uk <-- go to bottom of that page and you can see links to various manufacturers 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:56:55.397

建立在其他人所说的基础上，首先创建您的`www.example.com/cars.cfm?manufacturer=BMW`页面并使其正常工作。

假设您在 IIS 上，您将`web.config`在根文件夹中创建一个文件（如果它不存在）。

```
<?xml version="1.0" encoding="UTF-8"?>
<configuration>
<system.webServer>

    <rewrite>
        <rules>
            <rule name="Cars-Rewrite">
                <match url="manufacturer/(\w+)" />
                <action type="Rewrite" url="/cars.cfm?manufacturer={R:1}" />
            </rule>
        </rules>
    </rewrite>

</system.webServer> 
```

我的正则表达式可能已关闭，但也许其他人可以插入正确的正则表达式。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:50:16.890

您当然可以按照其他人的建议通过 URL 重写来处理这个问题，但我认为我会采取不同的方法。特别是出于 SEO 目的。SEO 的最佳解决方案将是每个品牌的实际 URL。考虑到这一点，相应地创建您的网站。不要使用通用的 www.example.com/cars.cfm 页面，使用 www.example.com/bmw、www.example.com/volvo 等。您仍然可以在每个文件夹下都有一个 ColdFusion 页面无非包括来自其他位置的通用 ColdFusion 模板（或调用 cfc）。由于每个文件夹都有自己独特的存根文件，因此您可以在调用通用 ColdFusion 模板时传递相应的车辆制造商。例如，在 www.example.com/bmw 页面下：

```
<cfset manufacturer = "bmw" />
<cfinclude template="/mytemplates/genericpage.cfm" /> 
```

然后您的 genericpage.cfm 使用分配的变量来显示适当的文本和图形。您甚至可以通过解析 URL 并在包含和执行模板时从中获取制造商来绕过必须在每个文件夹下设置特定变量。我相信该`cgi.script_name`变量将包含执行此操作所需的路径。

# java - 获取 GWT 面板的内部 DIV 元素和 id

> ID：13068073
> 
> 赞同：1
> 
> 时间：2012-10-25T11:58:25.497
> 
> 标签：java, javascript, gwt, jsni

我有一个应用程序有这个 JSNI 需要传递一个容器 id，我在其中传递一个 DIV id：

**HTML：**

```
<div class='example-waveform' id='example4'></div> 
```

**爪哇：**

```
initWave("example4");

public native void initWave(String __id)/*-{
    var instance = this;
    var data = $wnd.data = [];
    var waveform = $wnd._waveform = new $wnd.Waveform({
        container: $doc.getElementById(__id),
        interpolate: false
    });
}-*/; 
```

这很好用，但是我需要使用 GWT 容器而不仅仅是 HTML div。

我试过：

```
HTMLPanel container = new HTMLPanel("Test");
container.getElement().setId("someid");

String id = container.getElement().getId();
initWave(id); 
```

但是 Javascript 函数不能接受我传递给它的元素 id（我正在使用第三方 JS 库，所以我无法调试这个）所以我只是假设我只需要传递一个 DIV id，但是DIV 没问题，但我需要一个 GWT 小部件，我可以像 GWT UI 中的显示/隐藏/等那样操作它。

在这种情况下，有没有办法获取 GWT 面板（HTMLPanel 或 VerticalPanel）的 DIV 元素和 id，以便我可以将其传递给我的 JSNI 函数。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T16:48:33.057

一定是与您调用方法的顺序或使用第 3 方库有关的一些错误。此代码在 GWT 2.4.0 中运行良好。：

```
final HTMLPanel container = new HTMLPanel("Test");
container.getElement().setId("someid");

container.addAttachHandler(new Handler() {

    @Override
    public void onAttachOrDetach(AttachEvent event) {
        initWave(container.getElement().getId());
    }});

RootPanel.get().add(container); 
```

initWave 是：

```
public native void initWave(String __id)/*-{
    var x = $doc.getElementById(__id);
    alert(x.innerHTML);
}-*/; 
```

适用于 SimplePanel 和 HTMLPanel！

# android - Android 布局和命名空间

> ID：13068074
> 
> 赞同：1
> 
> 时间：2012-10-25T11:58:27.620
> 
> 标签：android, android-layout

我对进入布局目录的文件的所有“种类（活动、片段、视图）”有点困惑。下面的代码膨胀一个可扩展的列表工作。

**活动：**

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_test);
} 
```

**活动测试.xml**

```
<?xml version="1.0" encoding="utf-8"?>

<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">
    <TextView
            android:layout_width="wrap_content"
            android:layout_height="wrap_content"
            android:text="@string/title" />

    <FrameLayout
            android:layout_width="match_parent"
            android:layout_height="wrap_content"

        <fragment
                android:id="@+id/my_fragment"
                android:name="com.xx.MyFragment"
                android:layout_width="match_parent"
                android:layout_height="match_parent" />
    </FrameLayout>

</LinearLayout> 
```

**我的片段**

```
@Override
    public View onCreateView(LayoutInflater inflater, ViewGroup container,
                             Bundle savedInstanceState) {
        return inflater.inflate(R.layout.fragment_test, null);
} 
```

**片段测试.xml**

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
              android:layout_width="fill_parent"
              android:layout_height="fill_parent">
    <ExpandableListView xmlns:android="http://schemas.android.com/apk/res/android"
                    android:id="@+id/my_exp_list"
                    android:layout_width="fill_parent"
                    android:layout_height="fill_parent">

    </ExpandableListView>
</LinearLayout> 
```

所以，我在主要活动中膨胀了activity_test.xml，它调用了MyFragment并使用了fragment_test.xml。如果我删除 周围的线性布局`ExpandableListView`，它就不起作用。我见过一些代码片段只包含视图元素。那么，什么是经验法则或概念。什么时候应该在片段中使用布局，什么时候可以只使用 View 元素。

一个相关的问题：是否可以为布局文件设置某种命名空间。布局文件夹中有很多文件会令人困惑。是否可以有子目录？（在一个方向/屏幕配置内）

## 编辑：

回答Timmmm的问题。我改成 `return inflater.inflate(R.layout.fragment_test, container, false);` 并没有真正影响结果。

例外是

```
java.lang.NullPointerException
        at com.xx.MyFragment.onActivityCreated(MyFragment.java:45)
        at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:848)
        at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1035)
        at android.app.FragmentManagerImpl.moveToState(FragmentManager.java:1017)
        at android.app.FragmentManagerImpl.dispatchActivityCreated(FragmentManager.java:1802)
        at android.app.Activity.performCreate(Activity.java:5011)
        at android.app.Instrumentation.callActivityOnCreate(Instrumentation.java:1079)
        at android.app.ActivityThread.performLaunchActivity(ActivityThread.java:2023)
        at android.app.ActivityThread.handleLaunchActivity(ActivityThread.java:2084)
        at android.app.ActivityThread.access$600(ActivityThread.java:130)
        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:1195)
        at android.os.Handler.dispatchMessage(Handler.java:99)
        at android.os.Looper.loop(Looper.java:137)
        at android.app.ActivityThread.main(ActivityThread.java:4745)
        at java.lang.reflect.Method.invokeNative(Native Method)
        at java.lang.reflect.Method.invoke(Method.java:511)
        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:786)
        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:553)
        at dalvik.system.NativeStart.main(Native Method) 
```

我发现，如果我不使用封闭的线性布局，它就找不到视图。

ExpandableListView eview =(ExpandableListView)getView().findViewById(R.id.my_exp_list);

eview 为空，但是当我将它包含在 LinearLayout 中时，一切正常。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:31:21.887

它应该适用于任何视图，如果没有比“它不起作用”更好的错误，很难知道哪里出了问题。一种可能性是`LayoutParams`未设置，因为您应该使用此行：

```
return inflater.inflate(R.layout.fragment_test, container, false); 
```

也可能它*正在*工作，但您没有在列表视图中放置任何内容？

其他注意事项：

1.  你不需要重复`xmlns:`
2.  使用`match_parent`而不是`fill_content`. 它们是相同的，但谷歌更改了名称以更清晰。

关于命名空间，我完全同意你的看法。我通常在我的布局前加上前缀，因此它们被命名为、`activity_foo.xml`等。更糟糕的问题是所有视图 ID 都在同一个命名空间中！能够这样做会很好，因为当您键入时它会让人感到困惑，并且自动完成会显示每个布局中的每个 ID。`fragment_foo.xml``view_bar.xml``R.id.activity_foo.ok_button``R.id.`

除了命名您的 ID 之类的东西之外，没有其他办法，`id="@+id/activity_foo_ok_button"`但我认为这太乏味和冗长了。

# scala - Scala：模式匹配 Seq[Nothing]

> ID：13068080
> 
> 赞同：5
> 
> 时间：2012-10-25T11:58:53.363
> 
> 标签：scala

我正在尝试匹配 a `Seq`contains的情况`Nothing`。

```
models.Tasks.myTasks(idUser.toInt) match {
  case tasks => tasks.map {
    task => /* code here */
  }
  case _ => "" //matches Seq(models.Tasks)
} 
```

`Seq[Nothing]`在模式匹配中如何表示？

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-25T12:10:23.920

与空序列匹配如下所示：

```
val x: Seq[Nothing] = Vector()

x match { 
  case Seq() => println("empty sequence") 
} 
```

编辑：请注意，这比`case Nil`因为`Nil`只是 的子类`List`，而不是一般的子类更`Seq`通用。`Nil`奇怪的是，如果类型被显式注释为，编译器可以进行匹配`Seq`，但如果类型是 的任何非子`List`类，它会报错`Seq`。因此，您可以这样做：

```
(Vector(): Seq[Int]) match { case Nil => "match" case _ => "no" } 
```

但不是这个（因编译时错误而失败）：

```
Vector() match { case Nil => "match" case _ => "no" } 
```

* * *

## 回答 #2

> 赞同：10
> 
> 时间：2012-10-25T12:01:11.320

假设我理解你的意思正确，一个不包含任何内容的序列是空的，即`Nil`：

```
case Nil => //do thing for empty seq 
```

即使您正在处理`Seq`s，这也有效，而不是`Lists`：

```
scala> Seq()
res0: Seq[Nothing] = List()

scala> Seq() == Nil
res1: Boolean = true 
```

更多 REPL 输出表明这与 的其他子类完全兼容`Seq`：

```
scala> Nil
res3: scala.collection.immutable.Nil.type = List()

scala> val x: Seq[Int] = Vector()
x: Seq[Int] = Vector()

scala> x == Nil
res4: Boolean = true

scala> x match { case Nil => "it's nil" }
res5: java.lang.String = it's nil

scala> val x: Seq[Int] = Vector(1)
x: Seq[Int] = Vector(1)

scala> x match { case Nil => "it's nil"; case _ => "it's not nil" }
res6: java.lang.String = it's not nil 
```

从上面的输出可以看出，`Nil`是一个完全属于它的类型。这个[问题](https://stackoverflow.com/q/5981850/586748)有一些有趣的事情要说。

但是@dhg 是正确的，如果您手动创建特定的子类型（例如向量），则匹配不起作用：

```
scala> val x = Vector()
x: scala.collection.immutable.Vector[Nothing] = Vector()

scala> x match { case Nil => "yes"} 
<console>:9: error: pattern type is incompatible with expected type;
 found   : object Nil
 required: scala.collection.immutable.Vector[Nothing]
              x match { case Nil => "yes"} 
```

话虽如此，我不知道为什么您需要经常强制您的对象被称为特定的具体子类。

# vba - 如何在宏编程中获取当前目录名？

> ID：13068090
> 
> 赞同：2
> 
> 时间：2012-10-25T11:59:23.500
> 
> 标签：vba, excel

我需要知道如何在宏编程中获取当前目录变量。我在桌面上保存一个文件，如下所示：C:\Users\deadlock\Desktop\data.html。是否可以用当前直接变量替换 C:\Users\deadlock\Desktop\ ？

这是我的一小段代码：

```
 ActiveWorkbook.ShowPivotChartActiveFields = True
With ActiveWorkbook.PublishObjects.Add(xlSourceSheet, _
    "C:\Users\deadlock\Desktop\data.htm", "Sheet1", "", xlHtmlStatic, "data_9438", "")
    .Publish (True)
    .AutoRepublish = False 
```

任何代码片段都将受到高度赞赏。

提前致谢..

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:03:45.260

当前目录可通过 VBA`curdir()`和当前工作簿的目录通过`ActiveWorkbook.Path`.

编辑;

```
Dim current As String
current = CurDir$()
'// root dirs have a \ others do not; normalize
If Right$(current, 1) <> "\" Then current = current & "\"

With ActiveWorkbook.PublishObjects.Add(xlSourceSheet, _
    current & "data.htm", "Sheet1", "", xlHtmlStatic, "data_9438", "")
    .Publish (True)
    .... 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:05:47.757

> 是否可以用当前的直接变量替换 C:\Users\deadlock\Desktop\ ？

这是你正在尝试的吗？

```
Option Explicit

Sub Sample()
    Dim strPath As String
    Dim Myar As Variant

    strPath = "C:\Users\deadlock\Desktop\data.htm"

    Myar = Split(strPath, "\")

    '~~> This would give you something like
    '~~> C:\Users\Siddharth Rout\Documents\data.htm
    Debug.Print CurDir & "\" & Myar(UBound(Myar))
End Sub 
```

# javascript - “javascript:;” 使用 gwt 小部件时的工具提示

> ID：13068091
> 
> 赞同：0
> 
> 时间：2012-10-25T11:59:23.630
> 
> 标签：javascript, gwt

我正在使用 gwt UlTabBar (com.google.gwt.user.client.ui.UlTabBar)。当鼠标悬停在此标签栏上时，浏览器左下角会出现一个带有“javascript:;”的小工具提示 标签出现。有什么方法可以禁用此工具提示吗？（看起来不太好）谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:16:36.397

我在这里阅读字里行间，但是：

*   您正在使用 Chrome，您看到的是链接的目标
*   TabBar 默认不使用链接，因此这意味着您将这些链接放在选项卡中
*   `javascript:;`由不[`Anchor`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Anchor.html)带*href*或[`Hyperlink`](http://google-web-toolkit.googlecode.com/svn/javadoc/latest/com/google/gwt/user/client/ui/Hyperlink.html)不带*目标历史记号*的生成。

在任何情况下，没有目标的链接根据定义不是*链接*。如果您有其他意思，请不要使用链接。

# visual-studio-2010 - VSTO 2010 Outlook 加载项在安装时显示错误消息

> ID：13068092
> 
> 赞同：2
> 
> 时间：2012-10-25T11:59:25.853
> 
> 标签：visual-studio-2010, outlook, vsto, office-2007

我有一个从 Click-Once 部署的 VSTO 2010 Office 2007 Outlook 加载项。它适用于我的开发机器和标准用户机器，但在另一台机器上失败。首次安装时，该插件未出现在 Outlook 中。然后我在控制面板中删除了该加载项并删除了“outcmd.dat”文件。当我尝试安装新插件时，它会显示一条错误消息：

> “Microsoft.VisualStudio.Tools.Applications.Deployment.AddInAlreadyInstalledException：无法安装自定义项，因为当前安装了另一个版本并且无法从该位置升级。要安装此版本的自定义项，请先使用添加或删除程序卸载此程序: WG 插件。然后从以下位置安装新的自定义：file:///C:/WG25.10.2012/WG plugin-php.vsto
> at
> Microsoft.VisualStudio.Tools.Applications.Deployment.ClickOnceAddInDeploymentManager.VerifySolutionCodebaseIsUnchanged(Uri uri, Microsoft.VisualStudio.Tools.Applications.Deployment.ClickOnceAddInDeploymentManager.InstallAddIn() 处的 String subscriptionId, Boolean previousInstalled)"

有谁知道可能是什么原因造成的？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-06-10T14:13:32.787

试试这个链接，你有一个命令可以在这个页面运行，只要运行它就会解决问题。命令：“rundll32 dfshim CleanOnlineAppCache”

或试试这个链接

[如何从我的计算机上完全卸载 ClickOnce 应用程序？](https://stackoverflow.com/questions/10896223/completely-uninstall-a-clickonce-application-from-my-computer)

# jquery - elFinder 和 asp.net - 无法连接到后端

> ID：13068094
> 
> 赞同：0
> 
> 时间：2012-10-25T11:59:28.637
> 
> 标签：jquery, asp.net-mvc, jquery-ui, asp.net-mvc-4

我正在按照作者的安装程序进行操作，但仍然无法正常工作。我正在使用 asp.net mvc 4 和 Visual Studio 2010。

我添加了引用并将必要的配置添加到根 web.config 中。

这是我的根 web.config 文件

```
 <configSections>
    <!-- For more information on Entity Framework configuration, visit http://go.microsoft.com/fwlink/?LinkID=237468 -->
    <section name="entityFramework" type="System.Data.Entity.Internal.ConfigFile.EntityFrameworkSection, EntityFramework, Version=4.4.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" requirePermission="false" />
    <section name="elFinder" type="elFinder.Connector.Config.AppConnectorConfig, elFinder.Connector" requirePermission="false" />
  </configSections>
  <elFinder apiVersion="2.0"
    localFSRootDirectoryPath="C:\SVN\DataExport\Wellman\Wellman\Upload"
    localFSThumbsDirectoryPath="C:\SVN\DataExport\Wellman\Wellman\Upload\.thumbs"
    rootDirectoryName="Root"
    uploadMaxSize="20M"
    defaultVolumeName="LocalFileSystem"
    baseUrl="http://localhost:57014/upload/"
    baseThumbsUrl="http://localhost:57014/upload/.thumbs/">
    duplicateFilePattern="Copy of {0}"
    duplicateDirectoryPattern="Copy of {0}"
    thumbsSize="48,48"
  </elFinder> 
```

添加了 global.asax

```
public class MvcApplication : System.Web.HttpApplication
{
    protected void Application_Start()
    {
        AreaRegistration.RegisterAllAreas();
        //ControllerBuilder.Current.DefaultNamespaces.Add("Wellman.Controllers");

        FilterConfig.RegisterGlobalFilters(GlobalFilters.Filters);
        RouteConfig.RegisterRoutes(RouteTable.Routes);
        BundleConfig.RegisterBundles(BundleTable.Bundles);

        // register IoC
        var builder = new ContainerBuilder();
        // add other registrations...
        // add elFinder connector registration
        builder.RegisterElFinderConnector();
        // create container
        IContainer _container = builder.Build();
        // need also to set container in elFinder module
        _container.SetAsElFinderResolver();
    } 
```

和 routeconfig.cs

```
 public static void RegisterRoutes(RouteCollection routes)
    {
        routes.IgnoreRoute("{resource}.axd/{*pathInfo}");
        routes.IgnoreRoute("elfinder.connector");

        routes.MapHttpRoute(
            name: "DefaultApi",
            routeTemplate: "api/{controller}/{id}",
            defaults: new { id = RouteParameter.Optional }
        );

        routes.MapRoute(
            name: "LogOff",
            url: "logout/{id}",
            defaults: new { controller = "Account", action = "LogOff", id = UrlParameter.Optional }
        );

        routes.MapRoute(
            name: "Default",
            url: "{controller}/{action}/{id}",
            defaults: new { controller = "Dashboard", action = "Index", id = UrlParameter.Optional }
        );

    } 
```

那么我做错了什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-05-13T12:46:51.047

可能为时已晚，但请尝试修复“>”位置：

```
<elFinder apiVersion="2.0"
    localFSRootDirectoryPath="c:\users"
    localFSThumbsDirectoryPath="c:\users\.thumbs"
    rootDirectoryName="Root"
    uploadMaxSize="20M"
    defaultVolumeName="LocalFileSystem"
    baseUrl="http://localhost:55470/data/"
    baseThumbsUrl="http://localhost:55470/data/.thumbs/"
    duplicateFilePattern="Copy of {0}"
    duplicateDirectoryPattern="Copy of {0}"
    thumbsSize="48,48">
</elFinder> 
```

# php - mysql_fetch_assoc() 期望参数 1 是资源。特定行

> ID：13068099
> 
> 赞同：0
> 
> 时间：2012-10-25T11:59:48.853
> 
> 标签：php, mysql

我是新来的，对 PHP 很陌生。我已经做了一些寻找解决问题的方法，但我发现的所有案例都不像我的。

我正在尝试将数据库值输入到 HTML 下拉框中，但我需要数据库中非常具体的行。

Atm 我的代码如下所示：

```
$query ="SELECT Email FROM circle WHERE Circle_num=$circle_num";
    $query_get = mysql_query($query,$conn);
    if(!$query_get) {
  die("Unable to execute query $query" );
  }

    echo "<select name='circle_users'>";
    while ($temp = mysql_fetch_assoc($query_get)) {
        echo "<option value='".$temp['Email']."'>";
        $temp_email = $temp['Email'];
        $temp_query = "SELECT firstname, lastname FROM user WHERE email=$temp_email";
        if(!$temp_query) {
            die("Unable to execute query $temp_query");
            }
        $get_temp_query = mysql_query($temp_query,$conn);
        $temp2 = mysql_fetch_assoc($get_temp_query);
        echo $temp2['fistname']." ".$temp2['lastname']."</option>";
        }
    } 
```

很抱歉变量名不好。我有点急于完成这个。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:01:33.407

```
$temp_query = "SELECT firstname, lastname FROM user WHERE email=$temp_email";
if(!$temp_query) {
    die("Unable to execute query $temp_query");
}
$get_temp_query = mysql_query($temp_query,$conn); 
```

您在此处测试查询*字符串*，而不是 mysql_query 的结果。
而且查询似乎失败了=> $get_temp_query 是错误的=>`expects parameter 1 to be resource, boolean given`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:02:17.433

我认为

```
$temp_query = "SELECT firstname, lastname FROM user WHERE email=$temp_email"; 
```

应该是

```
$temp_query = "SELECT firstname, lastname FROM user WHERE email='$temp_email'"; 
```

您从 fetch_assoc 得到的错误表明您的查询没有成功执行。

# iphone - UIGestureRecognizer - 永远不会调用重置

> ID：13068102
> 
> 赞同：0
> 
> 时间：2012-10-25T11:59:57.280
> 
> 标签：iphone, objective-c, ios

我正在创建自定义手势识别器。问题是从不调用重置方法，所以我无法重置识别器的状态。结果它只第一次工作

```
@implementation TouchGestureRecognizer {

    UIGestureRecognizerState mState;
}

-(UIGestureRecognizerState) state {
    return mState;
}

-(void) touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event {
    if( [touches count] == 1 ) {
        mState = UIGestureRecognizerStateBegan;
    }
}

- (void)touchesMoved:(NSSet *)touches withEvent:(UIEvent *)event {
    if( [touches count] == 1 ) {
        mState = UIGestureRecognizerStateChanged;
    }
}

- (void)reset {
    mState = UIGestureRecognizerStatePossible;
}

- (void)touchesEnded:(NSSet *)touches withEvent:(UIEvent *)event {
    mState = UIGestureRecognizerStateRecognized;
}

@end 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:12:59.237

该文档指出：

> 在手势识别器状态设置为 UIGestureRecognizerStateEnded 或 UIGestureRecognizerStateRecognized 后，运行时调用此方法。

看来这就是你正在做的事情`touchesEnded:`。在此方法中放置一个断点并从那里获取它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2014-05-14T12:25:17.310

你必须把它写在你的 .h 文件中。

```
#import <UIKit/UIGestureRecognizerSubclass.h> 
```

# javascript - 表中的 Javascript 在 IE 中给出错误“此内容无法在框架中显示”

> ID：13068105
> 
> 赞同：0
> 
> 时间：2012-10-25T12:00:05.873
> 
> 标签：javascript, internet-explorer

我正在使用 Wordpress，并且在帖子中有一个简单的 HTML 表格。我使用 javascript 使所有行都可点击到 URL。某些客户端使用 Internet Explorer 报告错误，“此内容无法在框架中显示”。我需要两件事：

1.  在新选项卡中打开的链接（当前在同一窗口中打开）
2.  要删除此错误（即使下面的内容也给出了错误）。

有任何想法吗？提前致谢

```
<table class="mytable">
<tbody>
<tr>
<th>Title</th>
<th>Author</th>
<th>Publisher</th>
<th>ISBN</th>
</tr>
<tr onclick="document.location = 'http://amazon.com/dp/1234567890';">
<td><strong><em>Book A</em></strong></td>
<td>rrr</td>
<td>hhh</td>
<td>123414</td>
</tr>
<tr class="alt" onclick="document.location = 'http://amazon.com/s?index=books&amp;field-author=fred';">
<td><strong><em>Book B</em></strong></td>
<td>VVV</td>
<td>AAA</td>
<td>n/a</td>
</tr>
</tbody>
</table> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T16:46:29.417

可以使用锚点来做到这一点，但是每行中的每一列都需要一个锚点，我猜你不适合那个！

我似乎无法复制您遇到的错误，我猜您使用的是不同版本的 IE。

使用 TR onclick 事件似乎是最简单的方法。

由于您希望链接在新窗口或选项卡中打开（它实际上不在您的控制范围内，因为它取决于客户端浏览器的配置方式），您可以使用 window.open() 而不是像现在一样更改 window.location 。

```
<script type="text/javascript">
function navigate(url) {
  window.open(url);
}
</script> 
```

将这些内容添加到页面的头部。

```
<tr onclick="navigate('where.you/want-to-go');"> 
```

你将能够像那样使用它。我不知道这是否会触发任何弹出窗口阻止程序类型的东西，但对于我的测试，它打开了一个新选项卡。

window.open 函数可以采用一些额外的参数来尝试强制新选项卡或窗口等，但不知道有多少浏览器以及它的工作情况。

# makefile - Makefile 模式的使用

> ID：13068106
> 
> 赞同：1
> 
> 时间：2012-10-25T12:00:12.890
> 
> 标签：makefile

我正在尝试编写一个相对简单的 Makefile，但我不确定如何使用模式最好地压缩规则。我尝试使用`%`，但遇到了困难。这是扩展形式的 Makefile：

```
all : ./115/combine_m115.root ./116/combine_m116.root ... ./180/combine_m180.root

./115/combine_m115.root : ./115/comb.root
    bash make_ASCLS.sh -l 115 comb.root

./116/combine_m116.root : ./116/comb.root
    bash make_ASCLS.sh -l 116 comb.root
...
./180/combine_m180.root : ./180/comb.root
    bash make_ASCLS.sh -l 180 comb.root 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T15:09:31.943

不幸的是，我们在 Make 中没有一个干净的方法来做到这一点。这个任务结合了一些 Make 做得不好的事情。

Make 不能很好地处理通配符（或者根本不能处理正则表达式），所以像这样的结构是`./%/combine_m%.root : ./%/comb.root`行不通的。我认为我们能得到的最接近的是[罐头食谱](http://www.gnu.org/software/make/manual/make.html#Canned-Recipes)：

```
define apply_script
./$(1)/combine_m$(1).root : ./$(1)/comb.root
    bash make_ASCLS.sh -l $(1) comb.root
endef

$(eval $(call apply_script,115))
$(eval $(call apply_script,116))
...
$(eval $(call apply_script,180)) 
```

我们可以把事情浓缩成这样：

```
NUMBERS := 115 116 # ...180

TARGS := $(foreach n, $(NUMBERS), ./$(n)/combine_m$(n).root)

all : $(TARGS)

...

$(foreach n, $(NUMBERS), $(eval $(call apply_script,$(n)))) 
```

还有一种方法来生成`NUMBERS`，但它是一个更丑陋的 hack。

# java - 在 Jcombo Box 上添加项目

> ID：13068107
> 
> 赞同：-2
> 
> 时间：2012-10-25T12:00:15.683
> 
> 标签：java, swing, events, awt, jcombobox

> **可能重复：**
> [为java中的组合框分配键](https://stackoverflow.com/questions/12870859/assign-keys-for-combo-box-in-java)

我`JComboBox`在 Swing 应用程序中使用控件。我必须添加员工代码和他的姓名，`JComboBox`但我只想显示员工姓名而不是代码。
但是当我选择员工姓名时，它应该返回相应的员工代码。什么是最好和最简单的解决方案。我正在使用以下代码添加项目`JComboBox`

```
 try       
   {   
     JComboBox jc1= new JComboBox();
     jc1.addItem("X");
     jc1.addItem("Y");
     jc1.addItem("Z");  

    }

   public void itemStateChanged(ItemEvent ie)
   {
      String code=(String)jc1.getSelectedItem();
       //while items being selected it should return the emp code of the given emp name 
        //eg if user selects X it should return the emp code corresponding to X. 

    } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:05:46.563

您必须添加 Employee 对象（带有两个成员），而不是将代码添加到 JComboBox。然后您必须创建一个自定义 ListCellRenderer（扩展 DefaultListCellRenderer）来呈现员工姓名。

看看[Oracle 的教程](http://docs.oracle.com/javase/tutorial/uiswing/components/combobox.html#renderer)。

# ios - 将核心数据添加到我的项目时无法添加 sql 文件

> ID：13068108
> 
> 赞同：6
> 
> 时间：2012-10-25T12:00:16.623
> 
> 标签：ios, sqlite, core-data

我一直在尝试将 Core Data 添加到我现有的 iOS 项目中。我没有现有的 sql 数据库，但我创建了一个数据模型。我遵循以下教程：[http ://wiresareobsolete.com/wordpress/2009/12/adding-core-data-existing-iphone-projects/](http://wiresareobsolete.com/wordpress/2009/12/adding-core-data-existing-iphone-projects/)

它在以下代码中产生错误：

```
(NSPersistentStoreCoordinator *) persistentStoreCoordinator{
if (persistentStoreCoordinator != nil){
    return persistentStoreCoordinator;
}
NSURL *storeUrl = [NSURL fileURLWithPath: [[self applicationDocumentDirectory]
           stringByAppendingPathComponent: @"MyPOC.sqlite"]];
NSError *error = nil;
persistentStoreCoordinator = [[NSPersistentStoreCoordinator alloc]
                              initWithManagedObjectModel:[self managedObjectModel]];
if (![persistentStoreCoordinator addPersistentStoreWithType:NSSQLiteStoreType configuration:nil URL:storeUrl options:nil error:&error]){
    NSLog(@"Unresolved error OH NO %@, %@", error, [error userInfo]);
}
return persistentStoreCoordinator;
} 
```

我收到以下错误：

```
2012-10-25 13:52:29.156 MyPOC[1994:11603] Unresolved error OH NO Error
Domain=NSCocoaErrorDomain Code=512 "The operation couldn’t be completed. 
(Cocoa error 512.)" UserInfo=0x8246240 {reason=Failed to create file; code = 2}, 
{reason = "Failed to create file; code = 2";} 
```

我真的不知道它为什么会崩溃以及如何解决它。如果需要更多信息来帮助，请告诉我。

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2013-11-03T13:45:18.200

我遵循几乎相同的教程并收到相同的错误消息。我想出了问题所在。

在我的情况下，无法创建该文件，因为 storeURL 路径不正确并指向一个不存在的文件夹。

在我的辅助方法 [self applicationDocumentDirectory] ​​（您在问题中没有提供）中，我输入了示例代码，就像在教程中一样：

```
- (NSString *) applicationDocumentsDirectory
{
    return [NSSearchPathForDirectoriesInDomains(NSDocumentationDirectory, NSUserDomainMask, YES) lastObject];
} 
```

它产生了 URL`file:///Users/xxxxxx/Library/Application%20Support/iPhone%20Simulator/7.0.3/Applications/A6FDD8DB-475B-4C9B-B995-28CCE068DF82/`**库/文档**`/`

那里有一个愚蠢的代码完成拼写错误，会生成无效路径。你能看见它吗？

> 它是 NSSearchPathDirectory 输入参数的枚举 NSDocumentationDirectory，它应该是 NSDocumentDirectory。

正确的代码和网址是：

```
- (NSString *) applicationDocumentsDirectory
{
    return [NSSearchPathForDirectoriesInDomains(NSDocumentDirectory, NSUserDomainMask, YES) lastObject;
} 
```

网址：`file:///Users/xxxxxx/Library/Application%20Support/iPhone%20Simulator/7.0.3/Applications/A6FDD8DB-475B-4C9B-B995-28CCE068DF82/`**文档**`/`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-20T09:51:40.330

关闭这个问题。我开始了一个新的核心数据项目并导入了我的其他代码并且它有效。从来没有让它在其他项目中工作。可能忘记了什么但没有找到什么

# ember.js - Ember 数据夹具和视图绑定。这些是错误吗？

> ID：13068110
> 
> 赞同：0
> 
> 时间：2012-10-25T12:00:19.323
> 
> 标签：ember.js

我正在尝试实现一个待办事项列表，它由一个待办事项视图组成，其中包含一个包含多个条目视图的嵌套条目视图。每个条目都可以被删除，因此可以从容器视图中删除。

当连接到我的 Rails 应用程序时，这*几乎*可以工作。当单击删除按钮（或在控制台中触发 App.ToDoEntry.find(x).deleteRecord()）时，实例设置为 isDirty=true，但该条目在视图中仍然可见。

为了尝试测试正在发生的事情，我使用 Fixtures 制作了一个单独的 jsfiddle，以查看是否可以使其独立工作，这样做我想我可能还偶然发现了 Ember 数据中的fixture 错误。

首先，这是我一直在开发的 Rails + Ember 应用程序：

**导轨**

```
class ToDo < ActiveRecord::Base
  has_many :to_do_entries, dependent: :destroy  
  attr_accessible :is_deleted, :is_staging, :is_template, :title
  validates_presence_of :title
end

class ToDoSerializer < ActiveModel::Serializer
  attributes :id,
             :title

  has_many :to_do_entries, embed: :objects
end

class ToDoEntry < ActiveRecord::Base  
  belongs_to :to_do
  attr_accessible :completed_at, :is_deleted, :priority, :title
  validates_presence_of :to_do, :title
end

class ToDoEntrySerializer < ActiveModel::Serializer
  attributes :id,
             :to_do_id,
             :title,
             :priority
end 
```

**余烬**

```
/*---------------*/
/* Application   */
/*---------------*/

PLURAL_MAPPINGS = {"to_do_entry": "to_do_entries"};

App = Em.Application.create({
  rootElement: '#content',
  store: DS.Store.create({
    adapter:  DS.RESTAdapter.create({ plurals: PLURAL_MAPPINGS }),
    revision: 4
  })
});

/*---------------*/
/* Controllers   */
/*---------------*/

App.TodoController = Ember.ObjectController.extend({
  destroy: function() {
    this.transaction = App.store.transaction();
    this.transaction.add(this.get('content'));
    if (window.confirm("Are you sure you want to delete?")) { 
      this.get('content').deleteRecord();
      this.transaction.commit();
      App.router.transitionTo('todo');
    }
    else{
      this.transaction.rollback();
      this.transaction = null;
    }
  }
});

App.Todo_entriesController = Ember.ArrayController.extend();

App.Todo_entryController = Ember.ObjectController.extend({
  destroy: function() {
    this.transaction = App.store.transaction();
    this.transaction.add(this.get('content'));
    if (window.confirm("Are you sure you want to delete?")) { 
      this.get('content').deleteRecord();
      this.transaction.commit();
      App.router.transitionTo('todo');
    }
    else{
      this.transaction.rollback();
      this.transaction = null;
    }
  }
});

/*--------*/
/* Models */
/*--------*/

App.ToDo = DS.Model.extend({
  title: DS.attr('string'),
  group: DS.belongsTo('App.Group'),
  to_do_entries: DS.hasMany('App.ToDoEntry', { embedded: true })
});

App.ToDoEntry = DS.Model.extend({
  title: DS.attr('string'),
  to_do_id: DS.attr('number'),
  priority: DS.attr('number'),
  todo: DS.belongsTo('App.ToDo')
});

/*-------*/
/* Views */
/*-------*/ 

App.TodoView = Ember.View.extend({
  templateName: 'app/templates/todo'
});

App.Todo_entriesView = Ember.View.extend({
  templateName: 'app/templates/todo_entries'
});

App.Todo_entryView = Ember.View.extend({
  templateName: 'app/templates/todo_entry',
  destroyEntry: function() {
    console.log('Todo_entryView - destroyEntry');
    this.get('controller').destroy();
  },
  init: function(){
    this._super();
    this.set(
      'controller',
      App.Todo_entryController.create({ content: this.get('content') })
    );
  }  
});  

/*-----------*/
/* Templates */
/*-----------*/ 

todo.hbs

<article>
  <h1>{{title}}</h1>  
  <div class="widget_links">
    <a {{action destroy target="view"}}>Delete</a>
  </div>
  {{outlet}}
</article>

todo_entries.hbs

{{#if isLoading}}
  <p>Loading...</p>
{{else}}
  <ul class="list">
  {{collection contentBinding="content" itemViewClass="App.Todo_entryView"}}
  </ul>
{{/if}}

todo_entry.hbs

<li>
{{#if isLoading}}
  Loading...
{{else}}
  {{view.content.id}}) {{view.content.title}} Priority: {{view.content.priority}}
  <a {{action destroyEntry href="true" target="view"}}>Delete</a>
{{/if}}
</li>

/*--------*/
/* Router */
/*--------*/

App.Router = Ember.Router.extend({
  enableLogging: true,
  location: 'hash',
  root: Ember.Route.extend({
    index: Ember.Route.extend({
      route: '/',
      connectOutlets: function(router) {
        var todo = App.ToDo.find(21);
        router.get('applicationController').connectOutlet('todo', todo);
        var todoController = router.get('todoController');
        todoController.connectOutlet('todo_entries', todoController.get("to_do_entries"));
      }
    })
  })
}); 

App.initialize(); 
```

如上所述，这非常接近工作，但令人沮丧的是似乎并没有从视图中删除条目。我在这里做一些明显的错误，还是这是一个错误？

**固定装置的错误？**

其次，我使用固定装置制作了一个可以正常工作的版本。但是，除非请求 App.ToDo.find()（即 findAll），否则似乎不会加载夹具数据。

这里有两个例子：

**单做，失败删除。**

[http://jsfiddle.net/danielrosewarne/vDGhe/1/](http://jsfiddle.net/danielrosewarne/vDGhe/1/)

第一个加载一个要做的事情，以及它的相关条目。当您单击“删除”时，您会正确收到警告，并且会使对象无效。但是，该条目仍保留在视图中。

*请注意，如果您使用控制台查看，您会看到 isDirty 状态设置为 true。*

**多个待办事项，一切正常**

[http://jsfiddle.net/danielrosewarne/LeLyy/1/](http://jsfiddle.net/danielrosewarne/LeLyy/1/)

第二个列出了索引视图中的所有待办事项记录，从而预先加载了看起来的数据。当您单击 to do 以查看其条目时，删除将按您的预期进行。（顺便说一句，如果您只是在示例 1 中的控制台中执行 App.ToDo.find()，这也有效。）

这对我来说就像是 Ember 数据中的一个错误，我是对的还是我做错了什么？

谢谢，

担

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-12-22T01:38:55.173

transaction.commit() 是异步的，但您会立即转换到路由中的另一个状态。在事务完成之前，视图正在更新。我相信这是问题所在，或者至少是一个问题。当涉及到异步操作时，Ember 非常棘手。尝试这个：

```
App.Todo_entryController = Ember.ObjectController.extend({
  destroy: function() {
    this.transaction = App.store.transaction();
    this.transaction.add(this.get('content'));
    if (window.confirm("Are you sure you want to delete?")) { 
      this.get('content').deleteRecord();
      this.get('content').one('didDelete', function() {
        App.router.transitionTo('todo');
      });
      this.transaction.commit();
    }
    else{
      this.transaction.rollback();
      this.transaction.delete();
    }
  }
}); 
```

此外，整个功能应该在路由器中，而不是控制器中，因为它会更改状态。当您将状态更改粘贴在路由器中时，您正在掩埋状态更改。

干杯。

# c# - 我可以在 Web 用户控件中使用父（网页）属性吗？

> ID：13068116
> 
> 赞同：0
> 
> 时间：2012-10-25T12:00:50.867
> 
> 标签：c#, asp.net, .net

如何在 Web 用户控件中使用父（网页）属性？

还有一个问题：- 我如何访问 web 用户控件中的共享类（即 App_Code 文件夹中的类）属性。

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:06:02.603

您可以`this.Page`在 asp.net 用户控件中使用来引用页面，它总是会为您提供添加该控件的页面。

您可以直接在任何用户控件中访问 App_code 文件夹中声明的任何公共类，而不会出现问题。请注意命名空间，如果您在访问类时遇到问题，请确保编译您的项目。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:09:36.027

您可以，但我不确定这将是一种干净/完整的 OOP 方法，如何设置公共属性或从页面调用用户控件的公共方法，将您需要在控件中使用的值传递给它？

这是因为托管控件的页面应该是通用的，并且是包含控件的页面，而不是相反。

如果这不适合您，那么您可以获取控件的 Page 属性并将其转换为页面的类，然后您将能够访问其属性，但这将使您的控件特定而不是通用，并且它仅在控件托管在该确切类型/类的页面中。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:11:28.177

您必须将该属性标记为公共。

```
var myVar = ((ParentPageClass)this.Page).YourProperty; 
```

要访问共享类，您必须指定该类的命名空间：

```
YourProject.SomeNamespace.YourClass 
```

或在 .ascx.cs 文件中包含命名空间

```
using YourProject.SomeNamespace; 
```

将参数从父页面传递给用户控件是一种更简洁的方法。

# java - 从 JSP 页面返回图像不起作用？

> ID：13068119
> 
> 赞同：1
> 
> 时间：2012-10-25T12:00:59.807
> 
> 标签：java, jsp, servlets, weblogic11g

我正在使用[这种方法](http://www.java2s.com/Tutorial/Java/0360__JSP/ReturnanImageFromJSPPage.htm)

```
<IMG SRC="basic.jsp"> 
```

为了在 img 标签中显示图像，此方法在 tomcat 中工作正常，但在 weblogic 服务器中，它给出以下错误：

```
 The image “view-source:https://10.189.65.201:7003/UploadImg/getImage.jsp” cannot be displayed because it contains errors. 
```

我知道如果我使用带有 doGet() 方法的 Servlet 而不是 JSP psge 它会正常工作，但为什么它不能以这种方式工作，是否有任何设置问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:15:52.613

JSP 文件之外的任何空白`<% ... %>`也将被打印并发送到 HTTP 响应。

所以如果你有例如

```
<% ... %>
<% ... %>
<% ... %> 
```

然后有效地 2 个换行符也将被发送到响应。这会破坏图像的二进制格式。

您基本上需要将其替换为

```
<% ... %><% 
   ... %><% 
   ... %> 
```

以防止将这些换行符打印到响应中（并确保没有尾随换行符）。

或者，更好的是，只使用一个 servlet。JSP 旨在生成基于文本的内容（如 HTML），而不是基于二进制的内容（如图像）。使用正确的工具完成工作。

# android - Android 视图不显示

> ID：13068121
> 
> 赞同：0
> 
> 时间：2012-10-25T12:01:04.387
> 
> 标签：android, view, imageview, android-relativelayout

我的应用程序中有这个布局，问题是，`ImageView`它的 ID`overlay`没有显示在其他布局上，当我使用 Android SDK Hierarchy 查看器工具检查布局时，`ImageView`高度为 0，位于底部布局。我错过了什么？或者是什么原因？

谢谢。

**注意：**`Button`当我在相同条件下用 a 替换该视图时，不会出现此问题。但它与`View`, 或一起出现`ImageView`。

**编辑：**我使用提到`ImageView`使整个视图有点偏红，我将它用作一个`ListView`项目。

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_toLeftOf="@+id/image" />

    <ImageView
        android:id="@id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"/>

    <ImageView
        android:id="@+id/overlay"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="#77ff0000" />

</RelativeLayout> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T05:29:08.280

这就是我在您的 xml 中看到的（带有虚拟文本和图像）

![在此处输入图像描述](../Images/586b6d64af6fe39e27e07afd4a8cb912.png)

1.) 这是你想要的吗？如果你没有看到这个，我会感到惊讶

2.）如果这形成了您的单个列表项 xml，那么在您的主列表 xml 中确保您将其作为参数

```
android:layout_width="fill_parent"
android:layout_height="wrap_content" 
```

或者您可能看不到该项目的边缘（文本和图像，您可能只看到红色覆盖，或者文本和图像可能重叠）

**编辑：**

如果这是您想要的 - 以便列表项现在形成一个类似状态的列表项，那么

![在此处输入图像描述](../Images/91643f94cf29929969ae7bcfef045e9b.png)

将您的代码修改为

```
 <RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent" >

    <ImageView
        android:id="@+id/image"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentRight="true"
        android:src="@drawable/panda" />

    <TextView
        android:id="@+id/label"
        android:layout_width="wrap_content"
        android:layout_height="wrap_content"
        android:layout_alignParentLeft="true"
        android:layout_alignParentTop="true"
        android:text="Stack Overflow"
        android:textColor="#ffffff" />

    <ImageView
        android:id="@+id/overlay"
        android:layout_width="fill_parent"
        android:layout_height="wrap_content"
        android:layout_alignBottom="@+id/image"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true"
        android:background="#77ff0000" />

</RelativeLayout> 
```

在运行时将图像和文本更改为您想要的

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:15:20.410

```
<TextView
    android:id="@+id/label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@+id/image" />

<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"/>

<ImageView
    android:id="@+id/overlay"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:background="#77ff0000" /> 
```

在 imageview 中，您不能将所有对齐类型一起分配 [1].top 与右或左 [2].bottom 与右或左。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:11:18.943

我想你需要做的是`android:layout_alignParentCenter="true"` 而不是

```
android:layout_alignParentBottom="true"
        android:layout_alignParentLeft="true"
        android:layout_alignParentRight="true"
        android:layout_alignParentTop="true" 
```

@注意：一切都在 View 下，它是父类，无论是 Button 还是 ImageView

* * *

## 回答 #4

> 赞同：-1
> 
> 时间：2012-10-25T12:15:04.307

imageView 的高度为 0，因为您没有设置任何源。修复这些错误你可以试试这个：

```
<RelativeLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="fill_parent" >
<ImageView
    android:id="@+id/image"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_alignParentRight="true"/>

<TextView
    android:id="@+id/label"
    android:layout_width="wrap_content"
    android:layout_height="wrap_content"
    android:layout_toLeftOf="@+id/image" />

<ImageView
    android:id="@+id/overlay"
    android:layout_width="fill_parent"
    android:layout_height="fill_parent"
    android:layout_alignParentBottom="true"
    android:layout_alignParentLeft="true"
    android:layout_alignParentRight="true"
    android:layout_alignParentTop="true"
    android:background="#77ff0000" /> 
```

# iphone - 如何在objective-c中将方法设置为类方法的参数

> ID：13068122
> 
> 赞同：5
> 
> 时间：2012-10-25T12:01:03.690
> 
> 标签：iphone, ios, class, methods

我在编写一个有方法有参数的类方法时遇到问题。

该函数在“SystemClass.m/h”类中

```
//JSON CALL
+(void)callLink:(NSString*)url toFunction:(SEL)method withVars:(NSMutableArray*)arguments {
    if([self checkConnection])
    {
        dispatch_async(dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0), ^{
            NSData *datas = [NSData dataWithContentsOfURL:[NSURL URLWithString:url]];
            [arguments addObject:datas];
            [self performSelectorOnMainThread:@selector(method:) withObject:arguments waitUntilDone:YES];
        });
    }else{
        [self alertThis:@"There is no connection" with:nil];
    }
} 
```

该函数的作用是调用 JSON url，并将数据提供给 Method

我这样使用它：

```
[SystemClass callLink:@"http://www.mywebsite.com/call.php" toFunction:@selector(fetchedInfo:) withVars:nil]; 
```

但它像这样崩溃：

> 由于未捕获的异常“NSInvalidArgumentException”而终止应用程序，原因：“+ [SystemClass 方法：]：无法识别的选择器发送到类 0x92d50”

你能帮帮我吗？无论如何，我正在尝试找到解决方案！

谢谢，亚历克斯

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T12:06:35.097

在您的 callLink 方法中，您已经给出了一个选择器作为参数（它是称为“方法”的参数）。此外，您还需要添加一个参数，因为“方法”参数应该从实现此方法的对象中调用（在您给我们的示例中，应用程序将尝试从 SystemClass 调用名为“方法”的方法，当您称呼 ：

```
[self performSelectorOnMainThread:method withObject:arguments waitUntilDone:YES]; 
```

这里 self 是 SystemClass 并且 SystemClass 中似乎不存在这样的方法，这就是它崩溃的原因）。因此，在参数中添加一个目标（一个 id 对象）：

```
+(void)callLink:(NSString*)url forTarget:(id) target toFunction:(SEL)method withVars:(NSMutableArray*)arguments; 
```

因此，对于以下行，您应该只提供选择器并在目标对象上调用此选择器：

```
[target performSelectorOnMainThread:method withObject:arguments waitUntilDone:YES]; 
```

并不是 ：

```
[self performSelectorOnMainThread:@selector(method:) withObject:arguments waitUntilDone:YES]; 
```

**改进 ：**

在调用选择器之前，您应该检查目标是否响应选择器做类似的事情（它会防止您的应用程序崩溃）。而不是这样做：

```
[target performSelectorOnMainThread:method withObject:arguments waitUntilDone:YES]; 
```

做这个 ：

```
if([target respondsToSelector:method])
{
  [target performSelectorOnMainThread:method withObject:arguments waitUntilDone:YES];
}
else
{
  //The target do not respond to method so you can inform the user, or call a NSLog()...
} 
```

# scala - Play 2.0 - Scala - 如何为任何 JDBC 驱动程序添加依赖项

> ID：13068123
> 
> 赞同：1
> 
> 时间：2012-10-25T12:01:06.400
> 
> 标签：scala, playframework, playframework-2.0

有人可以告诉我如何将 MSSQL 驱动程序依赖添加到 Play 2 应用程序吗？

我有这个设置工作......

```
db.default.driver=com.microsoft.sqlserver.jdbc.SQLServerDriver
db.default.url="jdbc:sqlserver://127.0.0.1:1433;databaseName=test;user=test;password=test;" 
```

编辑：我知道在文件 project/Build.scala 中必须是这样的语句：

```
val appDependencies = Seq(
"" % "" % ""
) 
```

但我不知道必须如何填充这些字符串，我想知道能够添加任何依赖类型。

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T14:25:53.067

不幸的是，似乎没有包含 MSSQL JDBC 驱动程序的存储库。

在这种情况下，正确、最可靠的解决方案是将 .jars 放在`lib`文件夹中，这就是 SBT 所说的“非托管依赖文件夹”。由于这个驱动程序没有一个中心位置，我也将这个 jar 与 VCS 中的项目的其余部分一起提交。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T14:43:59.410

你不需要写任何东西`project/Build.scala`

1.  下载并保存微软的驱动程序（可能[`sqljdbc4.jar`](http://www.microsoft.com/en-us/download/details.aspx?displaylang=en&id=11774)）在`lib`文件夹中（如果你还没有的话）。
2.  `application.conf`在（使用 Azure 为我工作的示例）中配置连接

    ```
    db.default.driver=com.microsoft.sqlserver.jdbc.SQLServerDriver
    db.default.url="jdbc:sqlserver://sOm3s3rVeR.database.windows.net:1433;database=your-db;encrypt=false;hostNameInCertificate=*.database.windows.net;loginTimeout=30"
    db.default.user="account@sOm3s3rVeR"
    db.default.password="YOURpass123"

    # don't forget to uncomment that line: 
    ebean.default="models.*" 
    ```

就这样。无论如何，我记得我在使用 Ebean 2.7.3（Play 2.0.4 中的默认设置）时遇到了一些问题，所以我选择了 2.7.5。现在它起作用了。

# sql-server - 我正在尝试批量插入 CSV

> ID：13068125
> 
> 赞同：2
> 
> 时间：2012-10-25T12:01:11.583
> 
> 标签：sql-server, csv, bulkinsert

我从客户端获取 CSV，我需要将该文件导入数据库。我经历了无数次迭代，部分解决方案测试无穷大。当我需要完整的解决方案时，我的问题就来了。

CSV 有 14 个字段，tempdb 数据库有 15 个字段（最后一个是标识列）。数据到达时没有身份，我需要根据数据库设计的行唯一编号。

我已经掩盖了显示的测试数据，但它可以模拟数据。

```
T2012-DAT;09-01-2012;09-01-2012;1;910,91;12;TST;4,55;200,2;6;;;;7,5
T2012-DAT;10-01-2012;10-01-2012;1;910,91;12;TST;4,55;200,2;6;;;;7,5
T2012-DAT;11-01-2012;11-01-2012;1;910,91;12;TST;4,55;200,2;6;;;;7,5
T2012-DAT;12-01-2012;12-01-2012;1;910,91;12;TST;4,55;200,2;6;;;;7,5
T2012-DAT;13-01-2012;13-01-2012;1;910,91;12;TST;4,55;200,2;6;;;;7
T2012-DAT;16-01-2012;16-01-2012;1;910,91;12;TST;4,55;200,2;6;;;;7,5
```

我在 tempdb 中创建的临时表。您会注意到它有 15 个字段，最后一个是所需的身份。

```
创建表预算导入（
    sBudgetName varchar(20) COLLATE Danish_Norwegian_CI_AS  
    , dStartDate varchar(12) COLLATE Danish_Norwegian_CI_AS  
    , dEndDate varchar(12) COLLATE Danish_Norwegian_CI_AS   
    , prCode 整数   
    , decTotal varchar(20) COLLATE Danish_Norwegian_CI_AS
    , sRefTimeTypeID varchar(10) COLLATE Danish_Norwegian_CI_AS  
    , sRefEmployeeID varchar(10) COLLATE Danish_Norwegian_CI_AS  
    , decHours varchar(20) COLLATE Danish_Norwegian_CI_AS  
    , decRate varchar(20) COLLATE Danish_Norwegian_CI_AS
    , sDepartmentID varchar(10) COLLATE Danish_Norwegian_CI_AS NULL  
    , sCentre varchar(10) 整理丹麦语_挪威语_CI_AS NULL  
    , 目的 varchar(10) COLLATE Danish_Norwegian_CI_AS NULL  
    , sProjectID varchar(10) COLLATE Danish_Norwegian_CI_AS NULL  
    , decNormHours varchar(20) COLLATE Danish_Norwegian_CI_AS  
    --, iRowNumber int identity(500000,1)  
)
```

去

```
-- 通过 csv 导入数据
 批量插入 BudgetImport
 FROM 'D:\budgetposter.csv'
 和
 (
    场终结者 = ';'
    , 行终止符 = '\r\n'
    , 代码页 = '1252'
 )
```

当我包含身份时，我收到此错误：

```
消息 4866，第 16 层，状态 1，第 3 行
批量加载失败。数据文件中第 1 行第 15 列的列太长。请验证是否正确指定了字段终止符和行终止符。
```

如果我排除它，错误将变为：

```
消息 4866，第 16 层，状态 1，第 3 行
批量加载失败。数据文件中第 1 行第 14 列的列太长。验证是否正确指定了字段终止符和行终止符。
```

如果我改变`rowterminator = '\n'` **它，它会通过**，但我错过了身份。

如果我包括身份，则错误变为：

```
消息 4864，第 16 层，状态 1，第 3 行
第 1 行第 15 列 (iRowNumber) 的批量加载数据转换错误（指定代码页的类型不匹配或无效字符）。
```

当我测试时，我排除了`INSERT INTO dbo."the-real-datatable"`并且只是`SELECT FROM BudgetImport`单独做。因此，我避免在真实数据表中插入另外 16000 行。

如果您注意并了解匈牙利符号，您会注意到我使用的是 varchars，即使 datatime 或 decimal 可能是正确的形式。经过大约 4-6 小时的测试和无尽的头痛和撕裂的头发后，我正在这样做。Varchar 是 KISS 解决方案，我`CONVERT()`稍后再做。

我的整个问题围绕行中的最后一个字段解决。- 我尝试添加 1 和 2 ；在 decNormHours 之后，我尝试添加空值（；；或；1；或；n；）。- 我尝试过使用 formatfile.xml - 再次没有蛋糕。没有格式文件比使用它更成功。- 我尝试将英国数字符号更改为 . = 使用 DK 表示法更成功。- 我已经尝试了我能想出的每一个技巧，但无济于事。

是的，CSV 中没有身份字段，没关系。`identity(500000,1)`您只需使用我在表创建中描述的默认自动。哦，500000 是我现在达到的大约行 ID，它会随着时间的推移而增加。

拜托，接下来我需要做什么才能做到这一点？

编辑：
使用格式文件

```
$lt;? xml 版本=“1.0”？$gt;
$lt;BCPFORMAT xmlns="http://schemas.microsoft.com/sqlserver/2004/bulkload/format" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"$gt;
 $lt;记录$gt;
  FIELD ID="1" xsi:type="NCharTerm" TERMINATOR=";" COLLATION="SQL_Latin1_General_CP1_CI_AS"/
  FIELD ID="2" xsi:type="CharFixed" LENGTH="9" COLLATION="SQL_Latin1_General_CP1_CI_AS"/
  FIELD ID="3" xsi:type="CharFixed" LENGTH="9" COLLATION="SQL_Latin1_General_CP1_CI_AS"/
  FIELD ID="4" xsi:type="NCharTerm" TERMINATOR=";"/
  FIELD ID="5" xsi:type="NCharTerm" TERMINATOR=";"/
  FIELD ID="6" xsi:type="NCharTerm" TERMINATOR=";" MAX_LENGTH="20" COLLATION="SQL_Latin1_General_CP1_CI_AS"/
  FIELD ID="7" xsi:type="NCharTerm" TERMINATOR=";" MAX_LENGTH="20" COLLATION="SQL_Latin1_General_CP1_CI_AS"/
  FIELD ID="8" xsi:type="NCharTerm" TERMINATOR=";"/
  FIELD ID="9" xsi:type="NCharTerm" TERMINATOR=";"/
  FIELD ID="10" xsi:type="NCharTerm" TERMINATOR=";" MAX_LENGTH="20" COLLATION="SQL_Latin1_General_CP1_CI_AS"/
  FIELD ID="11" xsi:type="NCharTerm" TERMINATOR=";" MAX_LENGTH="50" COLLATION="SQL_Latin1_General_CP1_CI_AS"/
  FIELD ID="12" xsi:type="NCharTerm" TERMINATOR=";" MAX_LENGTH="50" COLLATION="SQL_Latin1_General_CP1_CI_AS"/
  FIELD ID="13" xsi:type="NCharTerm" TERMINATOR=";" MAX_LENGTH="20" COLLATION="SQL_Latin1_General_CP1_CI_AS"/
  FIELD ID="14" xsi:type="NCharTerm" TERMINATOR=";"/
 /记录
 排
  COLUMN SOURCE="1" NAME="sBudgetName" xsi:type="SQLNVARCHAR" LENGTH="20" /
  COLUMN SOURCE="2" NAME="dStartDate" xsi:type="SQLDATETIME"/
  COLUMN SOURCE="3" NAME="dEndDate" xsi:type="SQLDATETIME"/
  COLUMN SOURCE="4" NAME="prCode" xsi:type="SQLSMALLINT"/
  COLUMN SOURCE="5" NAME="decTotal" xsi:type="SQLDECIMAL"/
  COLUMN SOURCE="6" NAME="sRefTimeTypeID" xsi:type="SQLNVARCHAR" LENGTH="10"/
  COLUMN SOURCE="7" NAME="sRefEmployeeID" xsi:type="SQLNVARCHAR" LENGTH="10"/
  COLUMN SOURCE="8" NAME="decHours" xsi:type="SQLDECIMAL"/
  COLUMN SOURCE="9" NAME="decRate" xsi:type="SQLDECIMAL"/
  COLUMN SOURCE="10" NAME="sDepartmentID" xsi:type="SQLNVARCHAR" LENGTH="10"/
  COLUMN SOURCE="11" NAME="中心" xsi:type="SQLNVARCHAR" LENGTH="10"/
  COLUMN SOURCE="12" NAME="Purpose" xsi:type="SQLNVARCHAR" LENGTH="10"/
  COLUMN SOURCE="13" NAME="sRefProjectID" xsi:type="SQLNVARCHAR" LENGTH="10"/
  COLUMN SOURCE="14" NAME="decNormHours" xsi:type="SQLDECIMAL"/
/排

```

让我回到正确的第一个领域。因此，从争取最终的细节正确开始，我最终会努力让它首先工作/做任何事情。错误：

```
消息 4863，第 16 层，状态 1，第 3 行
第 1 行第 1 列 (sBudgetName) 的批量加载数据转换错误（截断）。

```

注意：嗯似乎 SO 不喜欢 xml。多么奇怪。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:09:57.390

这比解决方案更像是一种解决方法，但是由于您面临列数问题，为什么不在之后添加索引列？

你可以做这样的事情：

*   将您的 CSV 导入具有相同列数的临时表

然后，

```
ALTER TABLE BudgetImport
    ADD Id  INTEGER
GO

WITH Cte
AS
(
    SELECT *
    , ROW_NUMBER() OVER(ORDER BY [**column of your choice**] DESC) AS RowNumber
    FROM BudgetImport
)
UPDATE Cte
SET Id = RowNumber
GO

ALTER TABLE BudgetImport
ALTER COLUMN Id INTEGER NOT NULL 
GO

ALTER TABLE BudgetImport
ADD PRIMARY KEY (Id)
GO 
```

# javascript - Dojo 1.6.1 dijit 表单 onSubmit 事件取消其他

> ID：13068126
> 
> 赞同：0
> 
> 时间：2012-10-25T12:01:14.157
> 
> 标签：javascript, dojo, submit, dom-events

我有一个 Dojo 1.6.1 (dijit) 表单，其中包含提交事件的连接。表单将使用 AJAX 提交。问题是，当我`dojo.stopEvent`在提交事件上使用它时，它会停止触发`onChange`其他输入（dijit）的事件。

换句话说：在提交事件发生后，我明确地停止它并使用 AJAX 发送数据。之后，`onChange`输入的事件不能通过更改输入值或以编程方式调用来触发`dijit.byId('someDijit').onChange()`。

任何想法这是什么原因？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T07:19:33.917

对不起，我的错。该函数被正确调用，但是在该函数中执行的另一个函数`onChange`没有触发。

编辑：

错误是一个同名的函数（与内部要调用的函数`onChange`），稍后在脚本中介绍。

# php - 在另一个字段上处理验证器后设置一个字段

> ID：13068131
> 
> 赞同：0
> 
> 时间：2012-10-25T12:01:21.490
> 
> 标签：php, symfony-1.4, validation

在我的模型中，**Song**与**Type**相关联。类型可以是 Youtube、Soundcloud、Deezer 等。

当`link`我的验证器验证了该值后，我想将 style_id 值设置为正确的类型。

最好的方法是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T09:29:00.863

我认为最好的方法是执行两次检查：

*   第一次：使用验证器，所以你知道它是这些视频提供者之一，然后返回视频链接（不是 id）
*   第二次：重新定义，`setLink()`所以它需要链接，提取 id 并保存 the`link`和 the`style_id`

怎么做。

创建一个自定义库，例如`lib/videoProvider.class.php`. 这是一种原型类，用于从视频提供商验证和检索 id。当然，它需要改进。

```
class videoProvider
{
  private $url;
  private $providers = array('youtube','deezer','soundcloud');
  private $youtubePattern = '%^# Match any youtube URL
      (?:https?://)?  # Optional scheme. Either http or https
      (?:www\.)?      # Optional www subdomain
      (?:             # Group host alternatives
        youtu\.be/    # Either youtu.be,
      | youtube\.com  # or youtube.com
        (?:           # Group path alternatives
          /embed/     # Either /embed/
        | /v/         # or /v/
        | /watch\?v=  # or /watch\?v=
        )             # End path alternatives.
      )               # End host alternatives.
      ([\w-]{10,12})  # Allow 10-12 for 11 char youtube id.
      $%x';
  private $deezerPattern = '/\d+/';
  private $soundcloudPattern = '[\w-]+/[\w-]+$';

  public function __construct($url)
  {
    $this->url = $url;
  }

  /**
   * @return true / false
   */
  private function checkYoutube()
  {
    return preg_match($this->youtubePattern, $this->url) ? true : false;
  }

  /**
   * @return true / false
   */
  private function checkDeezer()
  {
     // A Deezer URL has this format : http://www.deezer.com/track/61340079

     return preg_match($this->deezerPattern, $this->url) ? true : false;
  }

  /**
   * @return true / false
   */
  private function checkSoundcloud()
  {
     // A Soundcloud URL has this format : http://soundcloud.com/[A-Z Artist]/[A-Z Title]

     return preg_match($this->soundcloudPattern, $this->url) ? true : false;
  }

  /**
   * @return true / false
   */
  public function isValid()
  {
    // check all video provider as you do in your validator
    // so it will return true if it find one, otherwise false

    foreach ($this->providers as $provider)
    {
      $function = 'check'.ucfirst($provider);

      if (true === $this->$function())
      {
        return true;
      }
    }

    return false;
  }

  /**
   * @return string
   */
  public function getId()
  {
    if ($this->checkYoutube() && preg_match($this->youtubePattern, $this->url, $matches))
    {
      return $matches[1];
    }

    if ($this->checkDeezer() && preg_match($this->deezerPattern, $this->url, $matches))
    {
      return $matches[1];
    }

    if ($this->checkSoundcloud() && preg_match($this->deezerPattern, $this->url, $matches))
    {
      return $matches[1];
    }
  }

  /**
   * @return string
   */
  public function getProvider()
  {
    if ($this->checkYoutube())
    {
      return 'youtube';
    }

    if ($this->checkDeezer())
    {
      return 'deezer';
    }

    if ($this->checkSoundcloud())
    {
      return 'soundcloud';
    }
  }
} 
```

然后在`doClean`你的验证器中，你只需要调用这个类，就像这样：

```
$videoProvider = new videoProvider($url);
if (false === $videoProvider->isValid())
{
  throw new sfValidatorError($this, 'invalid', array('value' => $url));
}

return $url; 
```

最后，`setLink`Song.class.php 中的现在应该是：

```
public function setLink($value)
{
  // only perform this tweak if the value is a http link
  if (preg_match('/^http/i', $value))
  {
    $videoProvider = new videoProvider($value);

    // define url id
    parent::_set('link', $videoProvider->getId());

    // define type id
    $provider = $videoProvider->getProvider();
    $type     = Doctrine_Core::getTable('Type')->findOneByName($provider);

    parent::_set('type_id', $type->getId());
  }
} 
```

这是必须测试和改进的初稿（测试 getId() 是否返回 id 而不是 false，对于 getProvider 等也是如此……）

# javascript - Instragram 网络意图允许收藏和评论

> ID：13068133
> 
> 赞同：3
> 
> 时间：2012-10-25T12:01:34.410
> 
> 标签：javascript, instagram

类似于 twitter 如何让您在此处回复和转发[https://dev.twitter.com/docs/intents](https://dev.twitter.com/docs/intents)

有没有办法在 instragram 上评论和收藏图片？

我基本上想要一个允许两者的链接或ajax方法。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-11-26T17:16:17.860

看看[文档](http://instagram.com/developer)。

目前看来，API 公开的唯一方法是通过请求检索数据，不幸的是，没有像 twitter 意图这样的“基于 Web”的方法。

# text - 使用 .bat 向文本文件中添加一行代码

> ID：13068134
> 
> 赞同：0
> 
> 时间：2012-10-25T12:01:40.633
> 
> 标签：text, batch-file

我是批处理文件的新手，但一直在寻找一种将一行文本添加到文本文件的方法

测试文件称为 test.txt，我需要的只是批处理文件，以便在文件顶部添加一行文本让我们说“欢迎”而不用过度纠正文件

```
how would i achieve this? 
```

目前我有一个空白的 install.bat，test.txt 文件中没有文本

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:12:44.713

您可以在新文件中写入“欢迎”，将“test.txt”的内容附加到该新文件中，然后将新文件重命名为“test.txt”。

```
@echo off
echo Welcome > new.txt
echo. >> new.txt
type test.txt >> new.txt
copy /y new.txt test.txt
del new.txt 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:54:23.640

我是 Linux 用户，但过去我不得不处理 Windows 命令行解释器的限制。我仍然这样做，偶尔。无论如何，这是我的贡献：

```
@echo off
rem AddToTop - Add line to top of file
if [%2] == [] goto help
set file=%1
set line=%2 %3 %4 %5 %6 %7 %8 %9
if exist %file% (
echo %line%>%file%.tmp
type %file%>>%file%.tmp
del %file%
rename %file%.tmp %file%
) else (
echo File "%file%" not found.
)
goto end
:help
echo Syntax: addtotop.bat file line
:end 
```

希望能帮助到你。这就是我能用这个糟糕的 CMD.EXE 做的一切...... ;-)

# r - 在小提琴图上准确显示 stat_summary

> ID：13068135
> 
> 赞同：1
> 
> 时间：2012-10-25T12:01:46.260
> 
> 标签：r, ggplot2, data-visualization

我刚开始在 R 上使用 ggplot2 并且有一个小提琴情节问题。

我有一个可以在这里访问的数据集：[data](https://github.com/bgurcay/GJT-/blob/master/data.csv)。

数据来自对估算的研究。感兴趣的变量是 question.no（问题）、条件、estimate.no（tr.est1 或 tr.est2）和估计。

下面的代码使绘图看起来几乎与我希望它看起来至少对于一个问题一样，但 stat_summary() 生成的中间点显示在“小提琴”之间。

```
 v.data<-read.csv("data.csv")

 # loop through each question number
 d_ply(v.data, c("question.no"), function(d.plot){
 q.no <- v.data$question.no

 plot.q <- ggplot(d.plot,aes(condition, estimate, fill=estimate.no)) + 
   geom_violin() + 
   stat_summary(fun.y="median", geom="point") + 
   scale_y_continuous('Change Scores') + 
   scale_x_discrete("Conditions")

ggsave(filename=paste(q.no,".png",sep=""))

}) 
```

**我的问题：**如何使中间点正确显示在“小提琴”上而不是在它们之间？

我在这个网站上搜索了之前在 ggplot2 上提出的问题，并查看了 ggplot2 文档以及其他 R 论坛，但未能找到任何相关内容。

我将不胜感激有关如何解决它的任何意见和建议。此外，如果我提出的问题已经在其他地方得到解答，我也会很感激这些主题的链接。提前谢谢了。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:04:36.857

`stat_summary`仅限于确定 x 轴的变量。传达您想要的信息的一种方法是`condition`在您的调用中替换为`aes`with `interaction(condition, estimate.no)`。

![在此处输入图像描述](../Images/b9cce42046481ab36d2ecfa6192262d6.png)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-04-17T05:41:16.523

[Plotluck](https://github.com/stefan-schroedl/plotluck)是一个基于*ggplot2*的库，旨在根据 1-3 个变量的特征自动选择绘图类型。对于您的数据集，该命令`plotluck(v.data, condition, estimate, question.no)`生成以下图：

![在此处输入图像描述](../Images/c7a437c341f5fab3720d0f634bb819bc.png)

请注意，库选择以对数方式缩放 y。您可以使用 覆盖此行为，`plotluck(v.data,condition,estimate,question.no,opts=plotluck.options(trans.log.thresh=1E20))`但显示效果不佳，并且中点看起来都在零线上。

# javascript - 使用 javascript 或 jQuery 选择组中的 1 个时禁用组中的复选框

> ID：13068138
> 
> 赞同：0
> 
> 时间：2012-10-25T12:01:56.523
> 
> 标签：javascript, jquery, html

我有一个按优先级编号分组的复选框列表，我想要一种方式，用户可以从不同的优先级组中选择多个，但每个优先级组只能选择一个

```
<input type='checkbox' value='1' name='priority[]'  />first choice in priority 1 group<br>
<input type='checkbox' value='2' name='priority[]'  /> second choice in priority 1 group <br>
<input type='checkbox' value='3' name='priority[]'  /> third choice in priority 1 group <br>
<input type='checkbox' value='4' name='priority[]'  /> first choice in priority 2 group <br>
<input type='checkbox' value='5' name='priority[]'  /> second choice in priority 2 group <br>
<input type='checkbox' value='6' name='priority[]'  /> third choice in priority 2 group <br> 
```

因此，在上面的示例中，用户可以选择 1 和 5，因为它们在不同的优先级组中，而不是 1 和 2，因为它们在相同的优先级组中

所以我一直在考虑使用 javascript 在选中一个复选框时禁用组中的其他复选框，例如，如果我选择 1，则禁用 2 和 3，但不会禁用 4、5 或 6

我一直在查看 jQuery 的库中是否有任何内容但看不到任何内容，我想知道是否可以使用 id 或 tabindex 将复选框分组在一起，然后以这种方式禁用但到目前为止还没有运气复选框是从数据库表动态生成，因此我可以在需要时对它们进行排序或在它们周围添加 div 有人可以帮忙吗？

干杯

麦克风

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:09:18.833

**1.**这个怎么样：

```
$('.check').change(function() {
    var group = $(this).data('priority');
    $('.check[data-priority="' + group + '"]').not(this).prop('disabled', this.checked);
})​; 
```

演示[http://jsfiddle.net/dfsq/Qvhxp/1/](http://jsfiddle.net/dfsq/Qvhxp/1/)

**2.** 你最好使用单选按钮而不是复选框（如果需要，应用 -webkit-appearance、-moz-appearance）。

# android - 带有下拉微调器的多列列表

> ID：13068140
> 
> 赞同：0
> 
> 时间：2012-10-25T12:02:09.067
> 
> 标签：android

我有一个多列列表，我还希望其中一列包含一个下拉微调器。

我的 main.xml 是：-

```
<!-- main.xml -->
<ListView xmlns:android="http://schemas.android.com/apk/res/android"
     android:id="@+id/SCHEDULE" android:layout_width="wrap_content" android:layout_height="wrap_content">
</ListView> 
```

我的行 xml 是

```
<LinearLayout
     xmlns:android="http://schemas.android.com/apk/res/android"
     android:paddingTop="4dip"
     android:paddingBottom="6dip"
     android:layout_width="fill_parent"
     android:layout_height="wrap_content"
     android:orientation="horizontal">

     <TextView android:id="@+id/LEVEL_CELL"
         android:layout_width="50dip"
         android:layout_height="wrap_content"/>    

     <TextView android:id="@+id/ACTION_CELL"
         android:layout_width="50dip"
         android:layout_height="wrap_content"/>

<Spinner
    android:id="@+id/fromTables"
    android:layout_width="fill_parent"
    android:layout_height="wrap_content" />   

</LinearLayout> 
```

这是我的逻辑： - super.onCreate(savedInstanceState); 设置内容视图（R.layout.row）；

```
 fromTablesSpinner = (Spinner) findViewById(R.id.fromTables);

    setContentView(R.layout.main);

    ListView list = (ListView) findViewById(R.id.SCHEDULE);

    ArrayList<String> tables = new ArrayList<String>();

    tables.add("MARA");
    tables.add("MARC");
    tables.add("MARD");

    ArrayList<HashMap<String, String>> mylist = new ArrayList<HashMap<String, String>>();
    HashMap<String, String> map = new HashMap<String, String>();
    map.put("level", "1");
    map.put("action", "INNER JOIN");
    map.put("tables", "MARA");
    map.put("tables", "MARC");
    mylist.add(map);
    map = new HashMap<String, String>();
    map.put("level", "2");
    map.put("action", "OUTER JOIN");
    map.put("tables", "MARA");
    map.put("tables", "MARC");
    mylist.add(map);

    SimpleAdapter mSchedule = new SimpleAdapter(this, mylist, R.layout.row,
            new String[] { "level", "action" }, new int[] {
                    R.id.LEVEL_CELL, R.id.ACTION_CELL });

    list.setAdapter(mSchedule);
} 
```

SimpleAdapter 的使用不允许我绑定到微调器视图。

任何帮助深表感谢。

谢谢

马丁

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:57:39.017

您正在同时尝试两件复杂的事情。按着这些次序：

1) 学习构建一个自定义适配器，在单个列表中显示多种类型的视图。这将帮助您在列表中显示微调器。

链接：[http ://www.ezzylearning.com/tutorial.aspx?tid=](http://www.ezzylearning.com/tutorial.aspx?tid=1763429) [1763429 Android ListView，每行有不同的布局](https://stackoverflow.com/questions/4777272/android-listview-with-different-layout-for-each-row)

2）学会处理不同的视图和听众。

链接：[带有 TextView 和 Button 的 Listview。点击按钮的 RowId](https://stackoverflow.com/questions/8385469/listview-with-textview-and-button-rowid-of-the-clicked-button) (btnButtonOFF.setOnClickListener(new ItemClickListener(cur.getInt(idRow)));)

3) 像您使用的那样使用多个 ListView。

# bison - 用简单的计算器语法解决冲突转移/减少

> ID：13068143
> 
> 赞同：0
> 
> 时间：2012-10-25T12:02:29.820
> 
> 标签：bison, yacc

您好，我刚刚开始在 bison/yacc 中进行一些解析。现在我的第一个程序已经失败了。什么地方出了错？我使用的示例来自： [教程的原始来源](http://epaperpress.com/lexandyacc/pry1.html)

```
%{
    #include <stdio.h>
    int yylex(void);
    void yyerror(char *);
%}

%token INTEGER

%%

program:
        program expr '\n'         { printf("%d\n", $2); }
        | 
        ;

expr:
        INTEGER                   { $$ = $1; }
        | expr '+' expr           { $$ = $1 + $3; }
        | expr '-' expr           { $$ = $1 - $3; }
        ;

%%

void yyerror(char *s) {
    fprintf(stderr, "%s\n", s);
}

int main(void) {
    yyparse();
    return 0;
} 
```

使用版本 2.4.1 的野牛我收到此错误：

```
conflicts: 4 shift/reduce 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:20:39.883

试试看：

```
expr:
    INTEGER                   { $$ = $1; }
    | expr '+' INTEGER           { $$ = $1 + $3; }
    | expr '-' INTEGER           { $$ = $1 - $3; } 
```

bison/yacc 不喜欢右递归。如果输入是`1+2+3`，当解析器到达时，`1+2+`它不能决定减少`1+2`到`expr`或移动另一个标记以减少`2+3`到`expr`。通过`INTEGER`在右边指定，它可以决定一看到`1+2`离开`expr + 3`就减少，然后再减少。

您还可以通过指定`+`和`-`保持关联来解决该问题，从而给予减少`1+2`过度转移新令牌的更高优先级。在序言中添加该行：

```
%left '+' '-' 
```

希望能帮助到你。

# c++ - 将多个图像从 Qt 应用程序拖到 MS Word

> ID：13068144
> 
> 赞同：3
> 
> 时间：2012-10-25T12:02:32.953
> 
> 标签：c++, qt, drag-and-drop, ms-word

我想将多个图像而不是一个图像放入 QMimeData 以放入 MS Word。

该接口不支持这一点（多次调用 setImageData() 相互覆盖）。

这可以用 QMimeData 完成吗？也许与 HTML？但是你把图像放在哪里呢？还是我必须使用本机 Windows API 来执行此操作？

谢谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-21T20:30:06.160

如果您创建一个 QWebView 并仅将您的图像加载到页面中，则该图像将可以在整个桌面上拖动。

# gradle - 使用 Gradle 编译时如何克服“包 com.sun.xml.internal.xxx 不存在”？

> ID：13068146
> 
> 赞同：22
> 
> 时间：2012-10-25T12:02:42.313
> 
> 标签：gradle

我想编译使用一些 Java 已弃用的“sun”包的 Java 代码，并且 Gradle 编译任务失败并出现此错误

```
error: package com.sun.xml.internal.ws.developer does not exist 
```

我正在使用 Hotspot JDK，我可以在那里看到这个包（所以它实际上存在 - 在 rt.jar 文件中）我还尝试将 rt.jar 本身添加到 Gradle 依赖项中：

```
compile files( 'C:/Program Files/Java/jdk1.7.0_05/jre/lib/rt.jar') 
```

但没有效果

这是我的 gradle -v 输出：

```
------------------------------------------------------------
Gradle 1.2
------------------------------------------------------------

Gradle build time: Streda, 2012, september 12 10:46:02 UTC
Groovy: 1.8.6
Ant: Apache Ant(TM) version 1.8.4 compiled on May 22 2012
Ivy: 2.2.0
JVM: 1.7.0_05 (Oracle Corporation 23.1-b03)
OS: Windows 7 6.1 amd64 
```

我还尝试将 jaxws-rt.jar 添加到类路径 - 也没有效果

我真的很感激任何帮助

谢谢

* * *

## 回答 #1

> 赞同：16
> 
> 时间：2012-10-25T12:43:30.203

Oracle 的意图是在编译时无法访问这些类。

请参阅[对此 javac 错误报告](http://bugs.sun.com/bugdatabase/view_bug.do;jsessionid=1711ee4eae3ff10565fc7a212018?bug_id=6778491)的响应。

有关可能的解决方案，请参阅[将内部 sun 类与 javac 一起使用](https://stackoverflow.com/questions/4065401/using-internal-sun-classes-with-javac)。开关应该可以解决这个`javac -XDignore.symbol.file`问题 - 但我是一个 gradle newb，并且不知道如何将它提供给[gradle 的 JavaCompile](http://www.gradle.org/docs/current/dsl/org.gradle.api.tasks.compile.JavaCompile.html#org.gradle.api.tasks.compile.JavaCompile:options)。我最好的猜测是

```
 apply plugin: 'java' 
  compileJava.options.useAnt = true 
  compileJava.options.compilerArgs << "-XDignore.symbol.file" 
```

顺便说一句，ct.sym（在链接中提到）似乎是一个 jar 文件，它作为类存根列出了所有可访问的类。

# java - 删除转义字符

> ID：13068151
> 
> 赞同：0
> 
> 时间：2012-10-25T12:03:02.437
> 
> 标签：java, regex, algorithm, oop, jakarta-ee

我尝试了以下逻辑来转义字符串中的特殊字符，并从转义字符串中删除转义字符。

```
public static void main(String a[])
{
    String keyword = "otterbox 3500 series { { waterproof case \\(clear) phones";
    System.out.println("INut keyword is   "+keyword);
    StringBuilder sb = new StringBuilder();
     // * and ? is not included as they are wild card
    for (int i = 0; i < keyword.length(); i++){
        char c = keyword.charAt(i);
        if (c == '\\' || c == '!' || c == '(' || c == ')' || c == '&' ||
                c == ':'  || c == '^' || c == '[' || c == ']' ||
                c == '-'  || c == '{' || c == '}' || 
                c == '~'){
            sb.append('\\');
        }
        sb.append(c);
    }
    keyword=sb.toString();

    System.out.println("Escaped keyword is    "+keyword);

    if(keyword.contains("\\")){
        int l=0;
        int l2=0;
        for (int i = 0; i < keyword.length(); i++){         
            char c = keyword.charAt(i);
            if(c=='\\')l++;
            if (c == '!' || c == '(' || c == ')' || c == '&' ||
                    c == ':'  || c == '^' || c == '[' || c == ']' || c=='-'||
                    c == '{'  || c == '}' || c == '~' || c=='(' || c== ')'){
                keyword = keyword.replaceAll("\\\\\\"+c, ""+c);
                l2++;               
            }
        }       

        if(l==1) keyword= keyword.replaceAll("\\\\", "");
        if(l>1 && l2==1) keyword = keyword.replaceFirst("\\\\", "");
    }

    System.out.println("Final    "+keyword);

} 
```

我希望最终的关键字是 otterbox 3500 series { { 防水壳 \（透明）手机，因为我想在我的字符串中使用 \。但输出为“最终 otterbox 3500 系列 { { 防水壳 \ \ (clear) 手机”。我在这里想念什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:17:44.620

正则表达式呢？

```
String keyword = "e!s { { wat(erpr)o}o^f ca]se \\c(lear) pho][nes &: hee-l~o";
String escaped = keyword.replaceAll("([{}()\\[\\]\\\\!&:^~-])", "\\\\$1");
String unescaped = escaped.replaceAll("\\\\([{}()\\[\\]\\\\!&:^~-])", "$1");
System.out.println(keyword);
System.out.println(escaped);
System.out.println(unescaped); 
```

印刷：

```
e!s { { wat(erpr)o}o^f ca]se \c(lear) pho][nes &: hee-l~o
e\!s \{ \{ wat\(erpr\)o\}o\^f ca\]se \\c\(lear\) pho\]\[nes \&\: hee\-l\~o
e!s { { wat(erpr)o}o^f ca]se \c(lear) pho][nes &: hee-l~o 
```

# makefile - Makefile 中的 Grep 退出代码

> ID：13068152
> 
> 赞同：9
> 
> 时间：2012-10-25T12:03:04.887
> 
> 标签：makefile, grep, exit-code

我想在 Makefile 中检查 grep 搜索的结果。与[此解决方案](https://stackoverflow.com/questions/1876890/how-to-conditionalize-a-makefile-based-upon-grep-results)相反，我不希望使用 shell 命令。另外，当 grep 找不到字符串时，我不希望 Makefile 引发错误（退出代码 1 被视为错误）。

以下尝试忽略错误并检查退出代码：

```
all:
    -grep term log* 
    echo $$?
    @case "$$?" in \
      0)\
    echo "found";; \
    *) \
    echo "not found";;\
    esac; 
```

不幸的是，退出代码始终为 0。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T13:11:57.517

a 中一系列动作的单独行`makefile`通常在单独的子 shell 中执行。要编码你所追求的，然后：

```
all:
    if grep term log*; \
    then echo found; \
    else echo not found; \
    fi 
```

那是一个命令；它直接测试退出状态`grep`。注意分号的自由使用；这是必要的，因为它在传递到外壳时都会变平。还要注意，`-`不需要；该语句作为一个整体以状态 0 退出，因为其中一个`echo`命令已执行并成功，这就是从子 shell 返回的状态。但是这个把戏还有另一部分。IIRC，脚本被调用，`/bin/sh -e`因此脚本在 shell 命令的第一个错误（非零）状态下退出 - 除了显式条件，例如`if`.

如果您想显式捕获状态`grep`（如果只是为了确保它正确完成），那么：

```
all:
    -grep term log*; \
    status=$$?; echo $$status; \
    if [ $$status = 0 ]; \
    then echo found; \
    else echo not found; \
    fi 
```

您可能需要`-`这次，因为`grep`它不是作为 shell 条件的一部分执行的，并且非零退出状态可能会触发`-e`处理。我不建议玩弄这个。

您可能会注意到您可以`cd`在一个动作中执行命令，并且因为每个动作都是单独执行的，所以您必须重复执行。

```
install:  ${PROG}
    cd ${INSTBIN}; ${RM_F} ${PROG}
    ${CP} ${PROG} ${INSTBIN}
    cd ${INSTBIN}; ${CHOWN} ${OWNER}:${GROUP} ${PROG}; ${CHMOD} ${PERMS} ${PROG} 
```

是的，你可以用不同的方式来做——我是在证明一个观点，而不是提倡一种安装程序的风格。

# objective-c - @[] 在目标 c 中代表什么？

> ID：13068155
> 
> 赞同：1
> 
> 时间：2012-10-25T12:03:26.257
> 
> 标签：objective-c, ios

我在以下上下文中遇到了 @[]

```
self.searches = [@[] mutableCopy]; 
```

它是什么？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:05:20.860

```
self.searches = [[NSArray array] mutableCopy]; 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T12:04:55.230

这是一个数组文字。换句话说：`[NSArray arrayWithObjects:nil]`简而言之。您可以像这样在其中添加对象

```
NSArray *array = @[@"one", @"two"]; 
```

# java - 测试（Oracle）数据库的性能/连接速度

> ID：13068156
> 
> 赞同：3
> 
> 时间：2012-10-25T12:03:31.440
> 
> 标签：java, database, hibernate, oracle11g

我有两个测试环境。我的应用程序在第二个应用程序中表现最差。我怀疑这是因为第一个系统使用的数据库运行在更好的硬件上（更多的 CPU，更快的连接）。我想以某种方式验证我的主张。有什么工具可以帮助我吗？如果它有帮助，我正在使用 Oracle 11g，我的应用程序正在使用 Hibernate 连接到数据库。

请注意，我对分析我的模式不感兴趣。我想比较两台不同机器上相同数据库（即模式+数据）的速度。

如果您有兴趣，为什么我怀疑数据库是问题所在：我在这两个环境的测试期间分析了我的应用程序。在第二个测试环境中，负责连接数据库的方法（即 org.apache.tomcat.dbcp.dbcp.DelegatingPreparedStatement.executeQuery()）使用了更多的 CPU 时间。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:32:32.013

**回答这个问题：**我相信您会使用 JMeter 来分析这两种环境，并从您运行的测试中获取全面的数据。VisualVM 也会有所帮助，但这取决于您需要的数据类型，以及您需要如何呈现（或分析）它。

但至于一般的问题，两个数据库上的数据是*完全*一样的吗？因为如果不是这种情况，则存在一些可能性 - 您的事务可能取决于被另一个进程锁定的数据（因此，您需要查看您的事务和它们使用的事务隔离）。

# javascript - 在 tablesorter.js 中添加下拉列表

> ID：13068157
> 
> 赞同：-1
> 
> 时间：2012-10-25T12:03:34.250
> 
> 标签：javascript, jquery, html

我想要 html 表中的过滤和排序选项。我试过'tablesorter.js'，

我可以使用这个模块对表格字段进行排序。但我无法添加带有表格字段的下拉列表和过滤框。

任何人都可以帮助我？？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:12:28.613

尝试使用[这个。](http://tablesorter.com/docs/#Demo)

这是较短的 HTML 表格。

**或者**

[( **DEMO** )](http://jsfiddle.net/Yke6M/36/)简称使用下拉列表

```
$('table').tablesorter();

$('select').change(function(){
    var column = parseInt($(this).val(), 10),
        direction = 1, // 0 = descending, 1 = ascending
        sort = [[ column, direction ]];
    if (column >= 0) {
        $('table').trigger("sorton", [sort]);
    }
}); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-11-01T00:44:23.030

您可以通过将 class="filter-select" 添加到 .

```
<thead><th>Col 1></th><th class="filter-select">Col2</th></thead> 
```

或者您可以为该列添加过滤器功能：

```
filter_functions : {

    // Add select menu to 3rd column (column numbers are zero-based).
    // Set the column value to true, and/or add "filter-select" class name to header
    2 : true,
} 
```

# asp.net - 无法从客户端访问 IIS 上的 asp.net Web

> ID：13068166
> 
> 赞同：0
> 
> 时间：2012-10-25T12:04:01.193
> 
> 标签：asp.net, iis-7.5

我正在尝试访问位于我网络上另一台服务器上的 asp.net 2.0 站点。当我在服务器上运行测试站点时，它可以工作：TomsServer:81

但是，当我从同一网络上另一台机器上的浏览器运行同一测试站点时，访问同一测试站点的 url 是什么？我尝试了 TomsServer/test，但它返回 404 找不到文件或目录。如何访问此测试站点？

![在此处输入图像描述](../Images/c4ba8df21e750983a0e67c87ffc78112.png)

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:07:10.193

检查 IIS 是否在该站点上设置了适当的主机标头并使用该主机名，或者它是否接受所有主机名

# joomla - Joomla 组件安装警告 JInstaller: :Install: 找不到 Joomla XML 安装文件

> ID：13068167
> 
> 赞同：1
> 
> 时间：2012-10-25T12:04:07.230
> 
> 标签：joomla, virtuemart, joomla3.0

我正在使用最新的 Joomla 版本 3.0.1，并尝试安装 VirtueMart。当我这样做时，我收到警告：

`"JInstaller: :Install: Cannot find Joomla XML setup file"`

我正在使用 Wamp Server，所以问题可能出在服务器配置中，因为所有设置都是默认设置。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T13:24:16.343

Virtuemart 还不支持 Joomla 3.0。存在的 XML 文件使用了`<install>`xml 文件中的标记，该标记在 Joomla 1.5 结束时已被贬值（尽管在 2.5 中仍然有效），但是该功能现在已从 Joomla 3.0 中删除，因此找不到有效的功能。由于 Joomla 3.0 中的组件正在进行大量更改。从旧视图开始。我建议使用 Joomla 2.5，因为它比 3.0.1 稳定得多！

请注意，如果您真的想通过并编辑 xml 文件需要`<install>`更改`<extension>`为以及更改 JModel、Controller 和 View。（由于即将对平台中的 MVC 实现进行更改，JModel、JView 和 JController 被重新用作新接口的名称。）所以现在，请改用 JModelLegacy、JViewLegacy 和 JControllerLegacy。

# c# - 模型中需要这两个字段中的一个

> ID：13068170
> 
> 赞同：1
> 
> 时间：2012-10-25T12:04:24.830
> 
> 标签：c#, asp.net, asp.net-mvc, asp.net-mvc-4

我有一种情况，我想在模型中只需要两个字段中的一个。

```
 public int AutoId { get; set; }
    public virtual Auto Auto { get; set; }

    [StringLength(17, MinimumLength = 17)]
    [NotMapped]
    public String VIN { get; set; } 
```

如果有人输入了 vin，它会在 AutoID 上的控制器中进行转换。如何强制控制器进行这样的工作？

```
 public ActionResult Create(Ogloszenie ogloszenie) {
        information.AutoId = 1;         
        if (ModelState.IsValid)
        {
        ...
        }.. 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-29T16:36:02.923

您可以实现一个自定义验证属性，该属性将检查任一必填字段的存在。

更多关于自定义验证属性：[如何为 MVC 创建自定义验证属性](https://stackoverflow.com/questions/2383669/how-to-create-custom-validation-attribute-for-mvc)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:30:57.820

尝试使用这种方法：

控制器：

```
public ActionResult Index()
{
    return View(new ExampleModel());
}

[HttpPost]
public ActionResult Index(ExampleModel model)
{
    if (model.AutoId == 0 && String.IsNullOrEmpty(model.VIN))
        ModelState.AddModelError("OneOfTwoFieldsShouldBeFilled", "One of two fields should be filled");
    if (model.AutoId != 0 && !String.IsNullOrEmpty(model.VIN))
        ModelState.AddModelError("OneOfTwoFieldsShouldBeFilled", "One of two fields should be filled");
    if (ModelState.IsValid)
    {
        return null;
    }
    return View();
} 
```

看法：

```
@using(Html.BeginForm(null,null,FormMethod.Post))
{
    @Html.ValidationMessage("OneOfTwoFieldsShouldBeFilled")

    @Html.TextBoxFor(model=>model.AutoId)

    @Html.TextBoxFor(model=>model.VIN)
    <input type="submit" value="go" />
} 
```

# javascript - Jquery 浏览器后退按钮 - 保留设置

> ID：13068176
> 
> 赞同：0
> 
> 时间：2012-10-25T12:04:43.470
> 
> 标签：javascript, jquery, html

这个问题是基于我之前在 [stackoverflow](https://stackoverflow.com/questions/13007293/dropdown-box-setup)上的问题，我想根据语言选择更改href链接。

多亏了这里的帮助，它现在做了它应该做的事情。

```
(function ($) {

$(function(){
var select = $('#language-selection');

var options = select.children('#other-languages');
select.attr('style', '-moz-user-select:none;-webkit-user-select:none;');
options.css({
display:'none'
});

select.click(function() {
if(options.css('display') == 'none') {
/* options.css({display:'block'}); */
options.slideToggle('fast');
} else {
/* options.css({display:'none'}); */
options.slideToggle('fast');
}
});

});

})(jQuery);

    var current = "English"
$("[data-lang]").on("click", function() {
    var lang = $(this).data("lang");

    $(".clickButton").prop("href", function(i, href) {
        return href.replace(current, lang);
    });

$('#language-selection > #current-language > img').attr('src' , $(this).find('img').attr("src"));

$('#language-selection > #current-language > img').attr('alt' , lang);
$('#language-selection > #current-language > img').attr('title' , lang);

$("#language-selection > #current-language").contents().each(function() {
    if(this.nodeType == 3)

             this.nodeValue = this.nodeValue.replace(current, lang);

});

current = lang;

}); 
```

我的问题是：当点击一个因语言选择而改变的链接并单击浏览器后退按钮时，它当然会返回到默认语言设置。

有没有一种简单的方法可以“保存”语言设置，使其不会切换回默认设置？

谢谢你。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:06:27.150

我的解决方案是在用户更改值时将其存储在 localStorage 中：

```
var lang = $(this).data("lang");
localStorage['lang'] = lang; 
```

当你加载一个页面时，你可以做

```
var lang = localStorage['lang'] || defaultLanguage; 
```

因此，您不必在 URL 中传递所选语言，它会保存在用户的计算机上。

顺便说一句，为了与各种 i18N 工具兼容，我更喜欢使用[规范化的语言代码](http://en.wikipedia.org/wiki/List_of_ISO_639-1_codes)，即“en”而不是“English”。

# php - Codeigniter 分页链接不起作用

> ID：13068179
> 
> 赞同：0
> 
> 时间：2012-10-25T12:04:58.137
> 
> 标签：php, codeigniter, hyperlink, controller, pagination

stackoverflow上有这么多分页问题，​​但我用codeigniter看不到它，所以就这样吧。

我们需要看看这些图片 ![在此处输入图像描述](../Images/c4fad5cfcba0c46a22fe4ccf4ec429b1.png)

和这里

![在此处输入图像描述](../Images/d5ca132ebbcf1b8289b996af13b54aae.png)

和这里

![在此处输入图像描述](../Images/a2df2d8465df264f00b2b5b73d4ff084.png)

我的桌子上有十条记录，链接失效了，这里是`controller/index`

```
$query = $this->m_kategorimaterial->get();  
    $config['base_url'] =  base_url().'index.php/c_kategorimaterial/index/';
    $config['total_rows'] = $query->num_rows();
    $config['per_page'] = 5; 
    $this->pagination->initialize($config);
    $data['rows'] = $query->result();
    $data['title'] = 'QB Kategori Material';
    $this->load->view('menu',$data);
    $this->load->view('v/vkategorimaterial'); 
```

这是模型

```
 $this->db->order_by('Kode_Kategori_Material_Jasa','DESC');
    $query = $this->db->get('ms_kategori_material');
    return $query; 
```

为什么链接不起作用？我该如何解决？谢谢stackoverflow

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:36:03.470

您在哪里调用数据收集查询中的偏移量？您需要为查询提供偏移量，以便它知道要获取哪些记录。

您还必须将 total_rows 更改为第二个查询，该查询查询整个表的总记录，因为您的新查询只返回一页的足够记录。

模型：

```
$this->db->order_by('Kode_Kategori_Material_Jasa','DESC');
$query = $this->db->get('ms_kategori_material', $limit, $offset);
return $query;

function getRecordCount() {

$query=$this->db->get('ms_kategori_material');
$result = $query->num_rows();
return $result;
} 
```

控制器：

```
$config['base_url'] =  base_url().'index.php/c_kategorimaterial/index/';
$config['total_rows'] = $query->num_rows();
$config['per_page'] = 5; 
$this->pagination->initialize($config);
$query = $this->m_kategorimaterial->get($config['per_page'],$this->uri->segment(3));
$data['rows'] = $this->m_kategorimaterial->getRecordCount();
$data['title'] = 'QB Kategori Material';
$this->load->view('menu',$data);
$this->load->view('v/vkategorimaterial'); 
```

似乎你可以对这里发生的事情做一个小小的解释。要进行分页 CI（或任何应用程序）至少需要 3 个变量。

限制 - 我应该每页显示多少条记录，因此我的查询返回多少条记录。

偏移量 - 查询从哪里开始请求记录，对于 CI，这是 uri 段的来源，它部分由限制控制，因此如果您有 8 作为限制（每页），则每个查询都会将偏移量增加 8。所以第 1 页在数据库中查询从开头开始的前 8 条记录，第二页从第 9 条记录开始的前 8 条记录，依此类推。

总记录 - 这是整个表中查询的总匹配记录。这就是应用程序如何确定总共有多少页以及是否需要第二页。此查询没有限制或偏移，因为您想要所有匹配的记录而不是部分返回。

数据的实际分页由数据库查询执行。CI 只是告诉数据库它需要哪些记录。

希望这有助于澄清事情。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:17:51.063

尝试设置

```
$config['uri_segment'] = 3; 
```

这是您需要的完整信息 > [http://codeigniter.com/user_guide/libraries/pagination.html](http://codeigniter.com/user_guide/libraries/pagination.html)

# java - Java/反射 - 哪里出错了？

> ID：13068181
> 
> 赞同：4
> 
> 时间：2012-10-25T12:05:03.410
> 
> 标签：java, reflection

我在这个网站上找到了一些关于 java/reflection 的帖子。但是还是有些看不懂。谁能告诉我代码中的错误在哪里？（需要打印“HELLO！”）

输出：

```
java.lang.NoSuchMethodException: Caller.foo() 
```

这是我的`Main.java`：

```
import java.lang.reflect.*;

class Main {

    public static void main(String[] args) {
        Caller cal = new Caller();
        Method met;
        try {
            met = cal.getClass().getMethod("foo", new Class[]{});
            met.invoke(cal);
        } catch (Exception e) {
            System.out.println(e.toString());
        }
    }
}

class Caller {
    void foo() {
        System.out.println("HELLO!");
    }
} 
```

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T12:07:06.140

[`getMethod()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getMethod%28java.lang.String,%20java.lang.Class...%29)只找到`public`方法。`Caller#foo()`要么将方法的访问修饰符更改为`public`，要么[`getDeclaredMethod()`](http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html#getDeclaredMethod%28java.lang.String,%20java.lang.Class...%29)改用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:17:09.773

```
import java.lang.reflect.*;

public static void main(String[] args) {
    public static void main(String[] args) {
        try {
            Class c = Class.forName("Caller"); 
            Object obj = c.newInstance();
            Method m = c.getMethod("foo");
            m.invoke(obj);
        } catch (Exception e) {
            System.out.println(e.toString());
        }           
    }
}

public class Caller {
    public void foo() {
        System.out.println("HELLO!");
    }
} 
```

# objective-c - 为什么我在 Xcode 的设备菜单中没有任何配置文件？如何解决这个问题？

> ID：13068184
> 
> 赞同：0
> 
> 时间：2012-10-25T12:05:10.760
> 
> 标签：objective-c, ios, xcode, ios6, provisioning-profile

我正在学习iOS开发和应用程序提交过程。在尝试归档我的应用程序之前，我只在 iOS 6 模拟器上对其进行了测试和调试，现在我想在真实设备上部署这个应用程序。在此期间，我遇到了一些问题。

那么，我必须执行哪些步骤才能成功归档我的应用程序并获取它`.app`的`.ipa`文件。如何设置配置文件并解决代码签名错误？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:07:03.483

您需要访问位于[http://developer.apple.com](http://developer.apple.com)的供应门户并在那里为您的应用程序生成供应配置文件。

如果您尚未支付开发者许可费，您将无法在真实设备上安装您的应用程序。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:13:03.840

您将需要获得开发人员和/或分发证书，包括他们各自的私钥。您还需要一个团队配置文件，或专门为应用程序制作的配置文件。您可以通过[http://developer.apple.com](http://developer.apple.com)上的配置门户自己制作所有这些， 或者如果您正在为拥有开发者计划许可证的其他人工作，他们可能会为您提供所有这些。

供应配置文件描述了实施证书和供应配置文件所需采取的所有步骤，以便您可以构建和部署/分发您的应用程序。

# mysql - MYSQL - 检测具有三列共同的行

> ID：13068185
> 
> 赞同：2
> 
> 时间：2012-10-25T12:05:12.780
> 
> 标签：mysql, rows, detect, matching, divide

我正在编写一个小脚本，它将订单信息从较新的数据库（用于在线订单）传输到一个过时的自定义数据库，其中包含 20 多年的信息，并且它只接受制表符分隔的输入（非常痛苦）和无法处理多商品 SKU（即每个 SKU 都是一件商品）。

我创建了一个表（未显示），将多项目 SKU 与过时系统的单个 SKU 相关联 - 您可以在下面的第 2 行到第 4 行中看到最初的三个项目（在线称为“pcclean”）一个订单行分成三行（CL31、CL15 和 CL13 - 旧系统的 SKU）。

但是，在生成此表时，我无法将价格分成三份。价格变化太频繁，无法依赖储值。

我想要做的是检测 Channel、Order 和 Code 何时相同，并将这些行中的“Total”除以符合该条件的行数。

所以第 2-4 行不会显示“12.45”，它们会分别显示“4.15”。

```
Channel                 Order   QTY  SKU    Total    Code
Amazon Seller Central   1518    1    PX5    7.29     PX5
Amazon Seller Central   1519    1    CL31   12.45    pcclean
Amazon Seller Central   1519    1    CL15   12.45    pcclean
Amazon Seller Central   1519    1    CL13   12.45    pcclean
Amazon Seller Central   1520    1    MS516  25       MS516
Amazon Seller Central   1521    1    PX10   4.49     PX10
Amazon Seller Central   1522    1    CL31   12.45    pcclean
Amazon Seller Central   1522    1    CL15   12.45    pcclean
Amazon Seller Central   1522    1    CL13   12.45    pcclean
Amazon Seller Central   1523    1    PX40   12.94    PX40
Amazon Seller Central   1524    1    PX12   12.49    PX12
Amazon Seller Central   1525    1    AD254  14.05    AD36
Amazon Seller Central   1526    1    MS516  25       MS516
Amazon Seller Central   1527    1    CL31   12.45    pcclean
Amazon Seller Central   1527    1    CL15   12.45    pcclean
Amazon Seller Central   1527    1    CL13   12.45    pcclean
Amazon Seller Central   1528    1    PX13   27.54    px13
Amazon Seller Central   1529    1    PX28   18.02    PX28
Amazon Seller Central   1530    1    PX28   18.02    PX28
Amazon Seller Central   1531    1    PX40   12.94    PX40
Amazon Seller Central   1532    1    PX33   29.98    px33
Amazon Seller Central   1533    1    PX47   12.44    PX47
Amazon Seller Central   1534    6    PX1    64.44    1PX1
Amazon Seller Central   1534    1    PX40   18.43    px40px35
Amazon Seller Central   1534    1    PX35   18.43    px40px35
eBay                    104     1    MS516  16       150282363749 
```

有任何想法吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:42:09.423

```
SELECT *,total/cnt.val FROM `mytable` 
LEFT JOIN (SELECT `Channel`,`Order`,`Code`,COUNT(*) AS val 
           FROM `mytable` GROUP BY `Channel`,`Order`,`Code`) AS cnt 
USING (`Channel`,`Order`,`Code`); 
```

这里的例子：[http ://www.sqlfiddle.com/#!2/cdd16/28](http://www.sqlfiddle.com/#!2/cdd16/28)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:23:37.653

您可以通过将表连接回自身来在单个查询中执行此操作：

```
SELECT  O.Channel,
        O.Order,
        O.Qty,
        O.SKU,
        O.Code,
        O.Total,
        ROUND(O.Total/GroupedOrders.OrderCount, 3) AS OriginalPrice

FROM    Orders AS O
INNER JOIN
            (SELECT Channel, `Order`, Code, COUNT(`Order`) AS OrderCount FROM Orders GROUP BY Channel, `Order`, Code) AS GroupedOrders 
                ON O.Channel = GroupedOrders.Channel AND O.Order = GroupedOrders.Order AND O.Code = GroupedOrders.Code 
```

这会将表格连接到其自身的分组版本中，并将总数除以分组的行数。

这是实际的查询：[http ://www.sqlfiddle.com/#!2/30b35/3](http://www.sqlfiddle.com/#!2/30b35/3)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:35:17.527

您可以使用基于您指定的三列返回相同行数的子查询：

```
SELECT
  orders.Channel,
  orders.Order,
  orders.Code,
  orders.Total/
    (SELECT count(*)
     FROM
       orders orders_1
     WHERE
       orders_1.Channel = orders.Channel
       AND orders_1.Order = orders.Order
       AND orders_1.Code = orders.Code
     GROUP BY
       orders_1.Channel, orders_1.Order, orders_1.Code) As Total
FROM
  orders 
```

当然，您可以在 select 子句中添加您想要的任何列。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T12:14:47.570

首先检测具有相同列的行：

```
select Channel, Order, Code, Total, count(*) from mytable
group by Channel, Order, Code
having count(*) > 1 
```

这将显示您拥有多行且通道、订单和代码相同的所有行。`Total`然后您可以`count(*)`计算单行的价格。

# asp.net-mvc-3 - 分页在我的 Telerik Grid 中不起作用

> ID：13068194
> 
> 赞同：1
> 
> 时间：2012-10-25T12:05:55.107
> 
> 标签：asp.net-mvc-3, telerik-mvc

我目前正在研究一个存在分页问题的网格。网格填充到其中包含 15 个项目。这是最大页面大小，但是，超出此范围不会添加页面。我不完全确定为什么它不添加页面。下面是我的代码。

看法

```
var gridPageSize = EngineContext.Current.Resolve<Nop.Core.Domain.Common.AdminAreaSettings>().GridPageSize;
    <table class="adminContent">
        <tr>
            <td>
                @(Html.Telerik().Grid<CategoryModel.CategoryUnitsModel>()
                    .Name("categoryunits-grid")
                    .DataKeys(keys =>
                    {
                        keys.Add(x => x.Id);
                        keys.Add(x => x.CategoryId);
                        keys.Add(x => x.UnitId);
                    })
                    .DataBinding(dataBinding =>
                    {
                        dataBinding.Ajax()
                            .Select("CategoryUnitsList", "Category", new { categoryId = Model.Id })
                            .Insert("CategoryUnitsInsert", "Category", new { categoryId = Model.Id })
                            .Update("CategoryUnitsInsert", "Category", new { categoryId = Model.Id })
                            .Delete("CategoryUnitsDelete", "Category", new { categoryId = Model.Id });
                    })
                    .Columns(columns =>
                    {
                        columns.Bound(x => x.UnitId)
                            .Visible(false);
                        columns.Bound(x => x.UnitText);
                        columns.Command(commands =>
                        {
                            commands.Edit();
                            commands.Delete();
                        })
                        .Width(100);
                    })
                    .ToolBar(commands => commands.Insert())
                    .Pageable(settings => settings.PageSize(gridPageSize).Position(GridPagerPosition.Both))
                    .ClientEvents(events => events.OnRowDataBound("onRowDataBound"))
                    .ClientEvents(events => events.OnEdit("onEdit"))
                    .EnableCustomBinding(true))

                <script type="text/javascript">
                    function onRowDataBound(e) {
                        $(e.row).find('a.t-grid-edit').remove(); //remove Delete button
                    }

                    function onEdit(e) {
                        $.getJSON('@Url.Action("LoadAvailableUnits", "Category")', { categoryId: $("#Id").val() }, function (data) {
                            var ddl = $("#UnitText").data("tDropDownList");
                            if (data.length > 0) {
                                ddl.dataBind(data);
                                ddl.reload();
                            }
                            else {
                                $('a[class="t-button t-grid-cancel"]').click();
                                alert("There are no Units left to select from");
                            }
                        });
                    }
                </script>
            </td>
        </tr>
    </table> 
```

EditorTemplates\CategoryUnit

```
@using Telerik.Web.Mvc.UI;
@Html.Telerik().DropDownList().Name("UnitText") 
```

模型（CategoryModel.CategoryUnitsModel）

```
public partial class CategoryUnitsModel : BaseNopEntityModel
    {
        public int CategoryId { get; set; }
        public int UnitId { get; set; }
        [NopResourceDisplayName("Admin.Catalog.Categories.Units.Fields.UnitText")]
        [UIHint("CategoryUnit")]
        public string UnitText { get; set; }
    } 
```

控制器

```
[HttpPost, GridAction(EnableCustomBinding = true)]
    public ActionResult CategoryUnitsList(GridCommand command, int categoryId)
    {
        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))
            return AccessDeniedView();

        var categoryUnits = _unitsService.GetCategoryUnits(categoryId, command.Page - 1, command.PageSize);
        var categoryUnitsModel = PrepareCategoryUnitsModel(categoryUnits);

        var model = new GridModel<CategoryModel.CategoryUnitsModel>
        {
            Data = categoryUnitsModel,
            Total = categoryUnitsModel.Count
        };

        return new JsonResult
        {
            Data = model
        };
    }

    public JsonResult LoadAvailableUnits(int categoryId)
    {
        var categoryUnits = _unitsService.GetAvailableUnits(categoryId);
        var categoryUnitsModel = PrepareAvailableUnitsInModel(categoryUnits);
        var returnData = new SelectList(categoryUnitsModel, "UnitId", "UnitText");
        return Json(returnData, JsonRequestBehavior.AllowGet);
    }

    [GridAction(EnableCustomBinding = true)]
    public ActionResult CategoryUnitsInsert(GridCommand command, CategoryModel.CategoryUnitsModel model)
    {
        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))
            return AccessDeniedView();

        var searchForEntry = _unitsService.GetCategoryUnitByCategoryIdAndUnitId(model.CategoryId, Int32.Parse(model.UnitText));
        if (searchForEntry != null)
        {
            return CategoryUnitsList(command, model.CategoryId);
        }

        var categoryUnit = new CategoryUnits
        {
            UnitId = Int32.Parse(model.UnitText),
            CategoryId = model.CategoryId
        };

        _unitsService.InsertCategoryUnit(categoryUnit);

        return CategoryUnitsList(command, model.CategoryId);
    }

    [GridAction(EnableCustomBinding = true)]
    public ActionResult CategoryUnitsDelete(GridCommand command, CategoryModel.CategoryUnitsModel model, int id)
    {
        if (!_permissionService.Authorize(StandardPermissionProvider.ManageCatalog))
            return AccessDeniedView();

        var categoryId = model.CategoryId;
        _unitsService.DeleteCategoryUnit(model.CategoryId, id);

        return CategoryUnitsList(command, categoryId);
    } 
```

任何帮助将非常感激。谢谢大家。

最诚挚的问候，查德·约翰逊

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:28:03.787

没关系，我想通了这个问题。在我的控制器中，当我在绑定网格时设置总计时，我使用的是已绑定到模型的数据计数，而不是我的实体带回的总计数。

# c# - 如何更新ajax请求中的状态标签

> ID：13068200
> 
> 赞同：1
> 
> 时间：2012-10-25T12:06:07.493
> 
> 标签：c#, asp.net, html, ajax, webforms

我有这个代码：

```
<div style="padding: 0px 12px 12px 12px;">
    <asp:UpdatePanel runat="server" ID="Panel">
        <ContentTemplate>
            <asp:Button ID="btnGenerate" CssClass="button" Style="float: right" runat="server"
                Text="Go" OnClick="btnGenerate_Click" />
        </ContentTemplate>
    </asp:UpdatePanel>
</div>
<div>
    <asp:UpdateProgress runat="server" ID="PageUpdateProgress">
        <ProgressTemplate>
            <img src="ajax-loader.gif" />
            <asp:Label ID="lblStatus" runat="server" Text="Working..." CssClass="label" />
        </ProgressTemplate>
    </asp:UpdateProgress>
</div> 
```

当我单击按钮时，动画 gif 会显示......这很棒，但是这个过程需要一分钟，我想向用户展示（只要代码不复杂）正在发生的事情。

所以我在图片旁边放了一个标签，在我尝试做的时候在后面的代码中：

```
lblStatus.Text = "Doing xyz"; 
```

它给出了某种命名空间问题。有什么想法可以实现吗？

更新：错误是“找不到类型或命名空间'lblStatus'”。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-26T13:18:13.053

你不能用 .net 更新面板来做到这一点，至少我不相信这很容易。虽然你可以用 2 个单独的 AJAX 调用来做到这一点..

此示例使用 JQuery 进行 AJAX，代码隐藏在 vb.net 中。

本质上，您需要做的是进行第一次调用以开始漫长的过程，然后反复进行第二次调用，使用第二种方法来获取长期的状态。

AJAX

这是您对漫长过程的主要要求。如果需要，您需要将数据传递给该方法。注意有一个processName。这应该是一个随机字符串，以确保您仅获得此进程的状态。其他用户将有不同的随机 processName，因此您不会混淆状态。

```
 var processName = function GenerateProcessName() {

        var str = "";
        var alhpabet = "abcdefghijklmnopqrstuvwxyz";
        for (i = 1; i < 20; i++) {
            str += alhpabet.charAt(Math.floor(Math.random() * alhpabet.length + 1));
        }
        return str;
    }

    function StartMainProcess(){
    $j.ajax({
            type: "POST",
            url: "/MyWebservice.asmx/MyMainWorker",
            data: "{'processName' : '" + processName + "','someOtherData':'fooBar'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {
                if (msg.d) {                        
                    // do a final timerPoll - process checker will clear everything else
                    TimerPoll();
                }
            }
        });
        TimerPoll();
     } 
```

您的第二次 AJAX 调用将使用另一种方法来获取进度。这将通过计时器方法每 XXX 次调用一次。

这是 TimerPoll 函数；在这种情况下，它将每 3 秒触发一次

```
function TimerPoll() {
        timer = setTimeout("GetProgress()", 3000)
    } 
```

最后，GetProgress() 函数用于获取进度。我们必须传入上面使用的相同 processName，才能获取此用户调用的进程

```
function GetProgress() {
        // make the ajax call
        $j.ajax({
            type: "POST",
            url: "/MyWebService.asmx/MyMainWorkerProgress",
            data: "{'processName' : '" + processName + "'}",
            contentType: "application/json; charset=utf-8",
            dataType: "json",
            success: function (msg) {

                // Evaulate result..
                var process = msg.d

                if (process.processComplete) {
                    // destroy the timer to stop polling for progress
                    clearTimeout(timer);

            // Do your final message to the user here.                      

                } else {

                   // show the messages you have to the user.
                   // these will be in msg.d.messages

                    // poll timer for another trip
                    TimerPoll();
                }
        });

    } 
```

现在，在后端，您将拥有几个与 AJAX 通信的 Web 方法。您还需要一个共享/静态对象来保存所有进度信息，以及您想要传回给用户的任何内容。

在我的例子中，我创建了一个类，它的属性填充并在每次调用 MyMainWorkerProcess 时传回。这看起来有点像这样。

```
 Public Class ProcessData
        Public Property processComplete As Boolean
        Public Property messages As List(Of String) = New List(Of String)
    End Class 
```

我也有一个使用这个类的共享属性，它看起来像......（这个共享属性能够保存多个用户的多个进程进度 - 因此是字典。字典的键将是进程名称。所有进度数据将属于 ProcessData 类

```
Private Shared processProgress As Dictionary(Of String, ProcessData) = New Dictionary(Of String, ProcessData) 
```

我的主要工作函数看起来有点像这样。请注意，我们首先确保没有另一个 processProgress 具有相同的

```
<WebMethod()> _
<ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
Public Function MyMainWorker(ByVal processName as string, ByVal SomeOtherData as string) as Boolean

        '' Create progress object - GUI outputs process to user
        '' If the same process name already exists - destroy it
        If (FileMaker.processProgress.ContainsKey(processName)) Then
            FileMaker.processProgress.Remove(processName)
        End If

        '' now create a new process
        dim processD as ProcessData = new ProcessData() with {.processComplete = false}

        '' Start doing your long process.

        '' While it's running and after whatever steps you choose you can add messages into the processData which will be output to the user when they call for the updates
         processD.messages.Add("I just started the process")

         processD.messages.Add("I just did step 1 of 20")

         processD.messages.Add("I just did step 2 of 20 etc etc")

         '' Once done, return true so that the AJAX call to this method knows we're done..
        return true

End Function 
```

现在剩下的就是调用 progress 方法了。所有要做的就是返回与我们之前设置的 processName 相同的字典 processData 。

```
<WebMethod()> _
    <ScriptMethod(ResponseFormat:=ResponseFormat.Json)> _
    Public Function MyMainWorkerProgress(ByVal processName As String) As ProcessData

        Dim serializer As New JavaScriptSerializer()

        If (FileMaker.processProgress.ContainsKey(processName)) Then
            Return processProgress.Item(processName)
        Else
            Return New ProcessData()
        End If

    End Function 
```

瞧..

所以回顾一下..

1.  创建 2 个 Web 方法 - 一个用于执行漫长的过程，一个用于返回它的进度
2.  对这些 Web 方法创建 2 个单独的调用。第一个是给主要工作人员，第二个是重复 xx 秒，给一个将提供进度的工作人员
3.  以您认为合适的方式将您的消息输出给用户...

免责声明......我之前没有在这里提供这么长时间的答案......它可能不符合人们习惯看到的格式。抱歉，如果这一切看起来有点混乱 :) 我已经从正在运行的项目中复制了大部分代码，所以它应该可以工作.. 虽然如果有一些拼写错误，请不要开枪 :)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:10:46.290

如果你想动态改变使用下面的代码，

创建如下函数

```
function ChangeUpdateProgress(message)
{  
  document.getElementById('lblStatus').innerText=message;
} 
```

调用`OnClick`事件函数

```
<asp:LinkButton ID="btnUpdate" runat="server"Text="Update" OnClientClick="ChangeUpdateProgress('Please wait Updating....')" OnClick="btnUpdate_Click"></asp:LinkButton>

<asp:LinkButton ID="btnAdd" runat="server" OnClientClick="ChangeUpdateProgress('Please wait Adding....')" OnClick="btnAdd_Click"></asp:LinkButton> 
```

希望这可以帮助..

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:23:58.043

要显示状态，您需要 2 个不同的 AJAX 调用，一个是当前和主要的调用，它实际上完成了工作，另一个只是检查当前状态返回一个非常简单的消息。

```
//Changes the HTML like this
<asp:UpdateProgress runat="server" ID="PageUpdateProgress">
    <ProgressTemplate>
        <span id="currentStatu"></span> <img src="ajax-loader.gif" />
    </ProgressTemplate>
</asp:UpdateProgress>

//Javascript
setInterval(jQuery.get(page.aspx?status=1, function () { $("#currentStatu").text(data); } ), 500); // every 0.5 second. 
```

棘手的部分是如何从服务器端获取当前状态。如果您可以将其保留在 Session 中，这将是最简单的方法，当 Request["status"] == "1" 只是将此 Session 作为文本返回，一切都完成了。

另一方面，您还可以查询您的数据库以获取当前状态。

我希望它有所帮助。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T12:12:48.757

代码会很复杂，因为您不能直接执行此操作。

ASP.NET AJAX 请求的体系结构是在请求完成之前它不会返回任何内容。这为您提供了一些不同的选择，包括：-

1）将操作拆分为多个加载，自动重新部分发布以执行下一个并更新标签

2）在服务的单独进程中运行操作（例如使用EXE）并在计时器上执行定期部分回发以与服务器上的EXE通信并获取当前状态并更新标签

3）在 iframe 的页面中运行任务并使用 Response.Write 更新 iframe 并关闭缓冲（或至少在每次状态更新后刷新）

# php - 通过 HTTP_RAW_POST_DATA 将 PNG 文件上传到 nginx 服务器会导致图像损坏

> ID：13068201
> 
> 赞同：2
> 
> 时间：2012-10-25T12:06:14.143
> 
> 标签：php, post, file-upload, nginx, png

我正在尝试通过在[Postman](https://chrome.google.com/webstore/detail/postman-rest-client/fdmmgilgnpjigdojojpjoooidkmcomcm)的帮助下将原始 PNG 图像数据发布到服务器来调试此问题。这是一个屏幕截图，可能有助于理解这个问题：

![在此处输入图像描述](../Images/4a754c85dfcb3df2f47d1af33c024565.png)

在服务器上，我收到的文件如下：

```
$png = $GLOBALS["HTTP_RAW_POST_DATA"]; 
```

然后我将数据写入一个新文件：

```
$fh = fopen($myFile, 'w') or die("can't open file");
fwrite($fh, $png);
fclose($fh); 
```

该文件已正确保存，但它现在具有不同的文件大小，417KB 而不是原始文件的大小 279KB。

当然，现在我不能进行任何图像操作，因为没有一个函数（例如`getimagesize`which returns `bool(false)`）将文件识别为有效图像。

我已经将此过程调试到问题必须在文件操作中的某个地方，但我不明白为什么文件不会导致与原始文件完全相同的文件类型和大小，当我唯一的事情我正在使用相同的原始数据。

更新：

我现在将原始文件的编码与上传的文件进行了比较，前者采用 ISO-8859-1 且显示正确，后者采用 UTF-8 且文件大小增加了约 138kB。

现在我已经实现了将服务器上的文件转换为 ISO-8859-1。

```
fwrite($fh, iconv("UTF-8", "ISO-8859-1", $png)); 
```

生成的文件现在确实具有相同的输出文件大小 (279kB)，但仍无法识别为 PNG 图像，某些信息似乎仍然丢失。

更新（1）：

我已经能够进一步检查问题并发现原始文件比生成的文件大 4 个字节，因此生成的 PNG 似乎已损坏。

![显示两种不同文件大小的终端屏幕截图](../Images/a95958ba58d4411da501fcd5a64381e7.png)

更新（2）：

我现在可以保存文件并将其作为有效的 PNG 打开。以下代码似乎正确保存了图像：

```
$input          = fopen("php://input","r+");
$destination    = fopen($myFile, 'w+');

stream_copy_to_stream($input, $destination);

fclose($input);
fclose($destination); 
```

但是，当尝试使用该`imagecreatefrompng`功能打开文件时，出现 500 错误。我现在正试图弄清楚这是否是 PHP 中的内存问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:23:49.697

问题可能是您通过将“二进制”数据复制到文本字段来测试 POST 的方式。

如果您将相同的数据粘贴到文本编辑器中，则使用 png 扩展名保存时也不会获得有效的图像文件。

尝试使用文件字段构建一个简单的表单来测试您的上传

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:10:49.270

我使用 nginx 进行上传并且没有遇到问题，但是我使用标准的 PHP 上传文件的方式：[http://www.php.net/manual/en/features.file-upload.post-method。 php](http://www.php.net/manual/en/features.file-upload.post-method.php)

我建议尝试一下。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T15:26:45.717

尝试使用： < ?php $postdata = file_get_contents("php://input"); ?> 获取原始数据。我有时使用它来获取从蛋糕上的 ajax 帖子发送的数据。

# java - SSLHandshakeException：收到致命警报：handshake_failure

> ID：13068210
> 
> 赞同：0
> 
> 时间：2012-10-25T12:06:41.403
> 
> 标签：java, ssl

我们在尝试连接服务器时收到此 java SSL 错误。在运行应用程序时，我们收到此错误，然后我们必须重新启动应用程序以使其再次可用。有人可以帮忙吗？

```
at java.lang.Thread.run(Thread.java:662)
Caused by: com.sun.xml.internal.ws.wsdl.parser.InaccessibleWSDLException: 2 counts of InaccessibleWSDLException.
javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure
javax.net.ssl.SSLHandshakeException: Received fatal alert: handshake_failure
at com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.tryWithMex(RuntimeWSDLParser.java:161)
at com.sun.xml.internal.ws.wsdl.parser.RuntimeWSDLParser.parse(RuntimeWSDLParser.java:133)
at com.sun.xml.internal.ws.client.WSServiceDelegate.parseWSDL(WSServiceDelegate.java:254)
at com.sun.xml.internal.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:217)
at com.sun.xml.internal.ws.client.WSServiceDelegate.<init>(WSServiceDelegate.java:165)
at com.sun.xml.internal.ws.spi.ProviderImpl.createServiceDelegate(ProviderImpl.java:93)
at javax.xml.ws.Service.<init>(Service.java:56) 
```

* * *

## 回答 #1

> 赞同：-1
> 
> 时间：2013-09-20T14:30:36.900

当我遇到类似的问题时，从[这里接了过来。](https://stackoverflow.com/questions/9498260/received-fatal-alert-handshake-failure)

> 当您尝试连接的服务器没有来自授权 CA 的有效证书时，通常会引发 javax.net.ssl.SSLHandshakeException 异常。
> 
> 简而言之，您尝试连接的服务器很可能使用自签名证书，您必须在 Java 代码中适应这一点。这涉及创建自定义 KeyStore 等。

我所做的只是向服务器提供密钥库和密钥库密码（在系统属性中设置）并且异常消失了。

```
javax.net.ssl.keyStore=../keystore/keystoreFile.jks
javax.net.ssl.keyStorePassword=yourPassword
javax.net.ssl.trustStore=../keystore/keystoreFile.jks
javax.net.ssl.trustStorePassword=yourPassword
javax.net.debug=true 
```

您可以使用 keytool 生成密钥库（它在 jdk/bin/keytool 中）

```
keytool -genkey -alias myKeyStore -keyalg RSA -keystore /home/aniket/keystore/keystoreFile.jks 
```

# r - 将希腊字母添加到 R 中的轴刻度标签

> ID：13068217
> 
> 赞同：7
> 
> 时间：2012-10-25T12:07:05.980
> 
> 标签：r

我有我的轴刻度：

```
axis(4,at=c(1.6526,1.9720,2.6009,3.3403),las=1) 
```

现在我想给它们贴上标签。文本应该是这样的：

```
labels=c("alpha=0.1","alpha=0.05","alpha=0.01","alpha=.001") 
```

但我希望 alpha 看起来像希腊字符。谢谢！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T12:32:03.240

您可以使用`expression`而无需使用`paste`

```
axis(4,at=c(0.75,1.75),labels=c(expression(alpha==0.1),expression(alpha==0.2)),las=1) 
```

* * *

## 回答 #2

> 赞同：5
> 
> 时间：2012-10-25T12:46:15.470

如果有几个标签，手工制作这些是可以的，但是很乏味而且不是自动化的。有一些方法可以将单个表达式组合成一个表达式“向量”，我们可以自动构建单个表达式。这是一种方法，我忘记了是否有其他方法，或者即使这是规范的方法（以前在 StackOverflow [包括我！] 上已经询问并回答了一般问题，但我无法在非常快速的搜索中找到它）。

```
op <- par(mar = c(5,4,4,6) + 0.1)
plot(1:10)
axis(1)
labs <- lapply(alpha, function(x) bquote(alpha == .(x)))
axis(4, at = seq(1, by = 2, length = 5),
     labels = do.call(expression, labs), las = 1)
par(op) 
```

哪个生产

![在此处输入图像描述](../Images/13a06402dde1d5288f2773c05832f4da.png)

我分开了展览的舞台。第一个是

```
> labs <- lapply(alpha, function(x) bquote(alpha == .(x)))
> labs
[[1]]
alpha == 0.1

[[2]]
alpha == 0.05

[[3]]
alpha == 0.01

[[4]]
alpha == 0.005

[[5]]
alpha == 0.001 
```

它产生一个调用列表。

第二步是将这些组合成一个表达式，我用`do.call()`

```
> do.call(expression, labs)
expression(alpha == 0.1, alpha == 0.05, alpha == 0.01, alpha == 
    0.005, alpha == 0.001) 
```

你当然可以结合这些：

```
labs <- do.call(expression, lapply(alpha, function(x) bquote(alpha == .(x))))
axis(4, at = seq(1, by = 2, length = 5),
     labels = labs, las = 1) 
```

# c - 保留 malloc 创建的内存块

> ID：13068219
> 
> 赞同：0
> 
> 时间：2012-10-25T12:07:16.860
> 
> 标签：c, memory, malloc, free, memory-corruption

我有一个问题要问，这是在阅读静态变量的概念时发生的。如果我在一个函数中创建一个分配的内存块，使用`malloc`，然后函数返回到`main`，而没有使用`free()`分配的内存，那么该内存块是否容易在程序过程中发生变化？我的意思是，在我离开函数之后，内存块可能会被另一个进程覆盖，而我想以我的方式使用它和/或编辑它，或者它是否被类似的东西“锁定”，直到我免费吗？在我释放之前，是否可以将该块视为没有数据？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:18:33.213

一旦您`malloc`编辑了一定数量的字节，除非您明确说明，否则`free`它将在您的程序的整个生命周期中一直存在。

无论您在哪个函数中执行了，只要您有一个指向ed 内存`malloc`的有效指针，该内存将是活跃的，您可以在程序中的任何地方使用。`malloc`

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:05:51.797

C 标准指定了一个称为已**分配的***存储持续时间*（在 C99 6.2.4 对象的存储持续时间中）。分配存储的生命周期是从分配（使用 malloc、calloc、realloc）到释放（使用 free 或 realloc）。所以，是的，从函数返回不会使分配的存储无效（与局部变量等**自动存储不同）。**您可以期望它仍然被分配。只要您有指向此类存储的有效指针，您就可以读取和写入它。

 ***** * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T13:47:12.323

当使用 malloc 分配内存时，只要您的程序正在运行并且只要您不释放此内存块，它就会一直分配给您的程序。所以这个内存块不能被另一个进程修改或覆盖。

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T14:18:16.013

通常，分配的内存块不能被另一个进程覆盖，因为这两个进程驻留在两个不同的虚拟地址空间中，除非您以某种方式与另一个进程共享内存[块](https://stackoverflow.com/questions/11583281/sharing-memory-between-two-processes)。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T12:40:24.000

好的，所以我想您是在问在这种情况下会发生什么...

```
#include <stdlib.h>

void myfunc( void )
{
    static void* p = malloc(BLOCK_SIZE);
    // perhaps the rest of this function uses the pointer to the allocated mem...
}

int main( int argc, char** argv )
{
    myfunc();
    // the rest of the program goes here...
} 
```

...并询问“程序的其余部分”代码是否可以写入由`myfunc()`.

堆仍然会分配内存，因为它不知道只有其中的代码`myfunc()`持有指向内存块的指针。但它也不会“锁定”它（即保护它不被写入——C 语言本身没有这样的概念。）

由于堆仍然认为内存块已分配，因此使用后续的代码`malloc()`不会获得指向您已分配的块内的块的指针。并且外面的任何代码都`myfunc()`不会知道指针的值`p`。因此，任何后续代码最终写入块的唯一方法是“意外”通过某种方式获得一个指向恰好位于块内存中的位置的指针（可能是由于某种代码错误），然后写入它。****

# distributed-computing - 拜占庭将军

> ID：13068223
> 
> 赞同：3
> 
> 时间：2012-10-25T12:07:53.663
> 
> 标签：distributed-computing, distributed-transactions

所以我正在阅读 Lamport 关于拜占庭将军的论文，他证明对于 T 恶意将军，您需要 2T+1 个将军在一个小组中阅读共识。但是我不明白如何。如果有 T 个恶意节点组成东西，你只需要 T+1 票就可以超过它们。为什么不是这样？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:22:55.743

维基百科上有[一个关于此的部分](http://en.wikipedia.org/wiki/Byzantine_fault_tolerance#Early_solutions)：

> 一种解决方案考虑了可能伪造消息的场景，但只要叛国将军的数量不等于或超过三分之一，它就会是拜占庭容错的。**处理三分之一或更多叛徒的不可能最终归结为证明如果指挥官叛徒，则无法解决 1 指挥官 + 2 中尉的问题。**原因是，如果我们有三个指挥官，A，B，C，A是叛徒：当A告诉B攻击，C撤退，B和C互相发送消息，转发A的消息，B都没有C 也无法确定谁是叛徒，因为不一定是 A——其他指挥官可能伪造了据称来自 A 的消息。可以证明，如果 n 是将军的总数，t 是将军的总数叛徒在那个 n 中，那么只有当 n 大于或等于 3t + 1 时才有解决方案

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2019-04-09T17:02:48.400

> 你只需要 T+1 票就可以超过他们。为什么不是这样？

如果所有忠诚的将军都给出相同的答案，这是有道理的，但对于 BGP 系统来说并非如此，每个诚实的元素都可以给你不同的答案。

BGP 适用于每个元素看到不同信息的系统。示例：冗余雷达。它不适用于元素被镜像的系统（例如冗余 HD）。

**例子：**

*   **将军：** A、B、C；
*   **叛徒：** C；
*   **A**说“*攻击*”；
*   **B**说“*退*”；
*   **C对****A**说“*进攻*” ，对“ **B** ”说“*退*”；
******   **结果：** **A**认为已经达成协议，将单独出击；*****

# javascript - 使用 jQuery 解析文本

> ID：13068225
> 
> 赞同：3
> 
> 时间：2012-10-25T12:08:10.847
> 
> 标签：javascript, jquery, parsing, text

我正在尝试用 jQuery 解析一个文本字符串并从中创建一个变量。字符串如下：

```
Publications Deadlines:   armadllo 
```

我试图让所有内容都超过“出版截止日期：”，所以它包括任何名称，无论它有多长或多少字。

我通过 jQuery .text() 函数获取文本，如下所示：

```
$('.label_im_getting').text() 
```

我觉得这可能是一个我无法组合的简单解决方案。传统的 JS 也可以，如果它比 JQ 更高效！

* * *

## 回答 #1

> 赞同：8
> 
> 时间：2012-10-25T12:09:22.533

试试这个，

**[现场演示](http://jsfiddle.net/cHU86/2/)**

**第一部分**

```
str = $.trim($('.label_im_getting').text().split(':')[0]); 
```

**第二部分**

```
str = $.trim($('.label_im_getting').text().split(':')[1]); 
```

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T12:13:58.913

```
var string = input.split(':') // splits in two halfs based on the position of ':'
string = input[1] // take the second half
string = string.replace(/ /g, ''); // removes all the spaces. 
```

# c# - C#.NET 更改文本框的文本

> ID：13068226
> 
> 赞同：0
> 
> 时间：2012-10-25T12:08:12.337
> 
> 标签：c#, .net, events, textbox, event-handling

我们如何从 form1.cs 中的另一个类调用 form1 类事件？

```
public partial class form1 : form
{
// an event to change the text of a textbox
}

public class A
{
sendtext()
{
//text to be sent to the texbox
// the text is created as a output of a thread
} 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:30:42.950

`A`您应该在课堂上创建一个事件并从`form1`.

```
class A
{
   public event Action<string> TextReady;

   private OnTextReady(string text)
   {
      var ev = TextReady;
      if(ev!=null) ev(text);        
   }
}

class Form1
{
   private _a = new A();
   public Form1()
   {
      _a.TextReady+= (text)=> textBox.Text = text;
   }
} 
```

您可能会偶然发现跨线程限制，但这是另一个问题，如果您愿意，请写评论。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:40:26.823

您始终可以直接更改文本。

```
public partial class form1 : form
{
    public string TextboxText 
    {
        get { return txtBox.Text; }
        set { txtBox.Text = value; }
    }
} 
```

然后做：

```
form1.TextboxText = "My new text"; 
```

# python - 如何使用 python 读取微秒精度的 mysql 日期时间字段

> ID：13068227
> 
> 赞同：2
> 
> 时间：2012-10-25T12:08:11.983
> 
> 标签：python, mysql, mysql-python

我正在使用 python 的 MySQLdb 从支持微秒精度日期时间列的 MySQL 5.6.7 db 中获取行。当我用 MySQLdb 读取一行时，时间字段为“无”。有没有办法用python读取这样的时间字段？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-09-17T21:42:57.670

不幸的是，MySQLdb 版本 1.2.4b4 和 1.2.4c1 都没有解决这个问题。但是，如果您将邮件列表的补丁应用到 times.py 文件，它就可以工作：

*   到函数[DateTime_or_None](http://sourceforge.net/p/mysql-python/bugs/325/#6c55)
*   到函数[TimeDelta_or_None 和 Time_or_None](http://sourceforge.net/p/mysql-python/bugs/325/#3365)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-11-08T23:16:06.977

MySQLdb-1.2.4（下周发布）和当前的候选版本支持 MySQL-5.5 和更新版本，应该可以解决您的问题。请从 PyPi 尝试 1.2.4c1 (pip install MySQL-python)

# c# - WP7 在手机被阻止时使用 NavigationUri 提醒问题

> ID：13068228
> 
> 赞同：0
> 
> 时间：2012-10-25T12:08:14.773
> 
> 标签：c#, windows-phone-7, windows-phone-7.1

在参数中`Reminder`使用设置路径创建时`NavigationUri`会出现这样的问题：当手机被阻止（在锁定屏幕下）并显示提醒时，无法使用点击标题或提醒消息的内容导航到应用程序。

是否有可能解决此类问题，还是提醒和锁定屏幕的通常行为？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:13:31.210

这是 Windows Phone 7 的正常行为，用户需要解锁手机才能与通知交互。你对此无能为力。

这种行为有几个明显的原因。想象一下，用户在锁屏上输入了一个密码。拿起电话的人可以通过点击通知绕过密码。或者即使没有代码，当显示通知时，如果手机在我的口袋里，我可能会不由自主地触发一些东西。

# jquery - 如何让滚动热点显示

> ID：13068232
> 
> 赞同：0
> 
> 时间：2012-10-25T12:08:29.937
> 
> 标签：jquery, smooth-scrolling

我正在尝试实现这里看到的自动滚动功能[http://www.smoothdivscroll.com/#quickdemo](http://www.smoothdivscroll.com/#quickdemo)

在我的测试站点[http://hardis.synology.me/portalen/main.php?id=2](http://hardis.synology.me/portalen/main.php?id=2)

但是我被卡住了，不明白问题可能是什么，这是我的代码：

```
<div  id="makeMeScrollable" class="main" >
            <?php
                $sql26 = "SELECT * FROM MCI ORDER BY Id_kund DESC";  // WHERE Id_kund desc Matningstyp ='$Matningstyp' AND/OR Affarsomrade ='$Affarsomrade' AND/OR Byra ='$Byra'
                $result26 = mysql_query($sql26) or die (mysql_error());  
                while ($row26 = mysql_fetch_array($result26)) 
                { 
                if($row26["Kampanj"] <= 20){
                    $star = 1;
                }
                    elseif($row26["Kampanj"] <= 30){
                        $star = 2;
                    }
                    elseif($row26["Kampanj"] <= 40){
                        $star = 3;
                    }
                    elseif($row26["Kampanj"] <= 50){
                        $star = 4;
                    }
                    else{
                        $star = 5;
                    }   $classname = ($first == $row26['Id']) ? 'focused' : 'normal';
                        echo "<div style=\"margin:5px 10px;\" data-produktkategori='{$row26[Produktkategori]}' data-id='{$row26[Id]}' class='abc $classname'><a class='infoXXXYYY' href='http://hardis.synology.me/portalen/main.php?id=2&scroll=".$row26[Id]."'><img src=\"foretag/Effectris/Presentationer/{$test}/".$row26["Matningsnamn"]."/enheter/1.png\" wIdth=\"150\" height=\"120\" style=\"position: relative;\">
                                <div style=\"background:black;opacity:0.6;width:150px;height:50px;position: absolute; bottom: 0; left: 0;\"></div>
                                <img src=\"img/stars/STARS2/3/$star.png\" style=\"position: absolute;  bottom: 35px; left: 3px;width:70px;z-index:1111;\"> <H6 style=\"font-size:11px;color:white;position: absolute;bottom: 20px; left: 5px;z-index:3311;\">".date("M,Y", strtotime($row26['Datum_formatning']))."</H6>
                                <H6 style=\"font-size:11px;color:white;position: absolute;bottom: 5px; left: 5px;z-index:3311;\">".$row26['Kampanjnamn']."</H6> 
                                <div class='mask'>
                                        <h2 style=\"text-transform: uppercase;color: WHITE;width:120px;text-align: LEFT;position: relative;font-size: 15px;border-bottom: 1px solid rgba(0, 0, 0, 0.3);background: transparent;margin: 0px 10px;padding: 5px;\">".$row26["Matningsnamn"]."</h2>
                                        <p>Kanal: <b>".$row26['Kanal']."</b></p>
                                        <p>Intentionsförflyttning: <br \><b>".$row26['Nyfikenhet']." enheter</b> </p>

                                </div></a>
                            </div>";
                        } ;
                    ?>
                </div>
    <script type="text/javascript">
$(document).ready(function () {
    $("#makeMeScrollable").smoothDivScroll({
        mousewheelScrolling: "allDirections",
        manualContinuousScrolling: true,
        autoScrollingMode: "onStart"
    });
}); 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T09:23:20.493

嗯，这很容易......我忘了链接到 smoothscrolldiv.css......现在一切都很好:)

# ant - 如何同时使用 Cobertura 进行单元测试和 JaCoCo 进行集成测试？

> ID：13068236
> 
> 赞同：3
> 
> 时间：2012-10-25T12:08:53.880
> 
> 标签：ant, sonarqube, cobertura, jacoco

我正在将 Sonar 3.2 与 Ant 一起使用。我读过应该可以使用 Cobertura 进行单元测试分析和 JaCoCo 进行集成测试分析。但是，我还没有找到关于如何使用 Ant 执行此操作的明确指南。我已将代码覆盖引擎设置为 Cobertura，如下所示：

```
<property name="sonar.core.codeCoveragePlugin" value="cobertura" /> 
```

完成 Cobertura 分析后，我可以将其“重置”为 JaCoCo 吗？然后它会是这样的：

```
<property name="sonar.core.codeCoveragePlugin" value="cobertura" />
<property name="sonar.cobertura.reportPath" value=...
<property name="sonar.core.codeCoveragePlugin" value="jacoco" />
<property name="sonar.jacoco.itReportPath" value=... 
```

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-06T12:07:37.240

我有一个想法可能对您有所帮助：Sonar 有一个干净的 RESTful 界面，例如可以通过 Firebug 看到该界面。当您更改此项目设置（配置 > 常规设置 > 代码覆盖率）时，查看 HTTP 通信并了解如何通过 HTTP 配置此属性。希望它不像火箭科学。然后，您可以根据需要从 ant 脚本中动态设置它，例如将几行长的 Groovy 脚本写入`<script lang="groovy">`标签或根据需要。

# wpf - 小写并附加来自 WPF 中资源的文本

> ID：13068237
> 
> 赞同：1
> 
> 时间：2012-10-25T12:09:02.640
> 
> 标签：wpf, xaml, resources, controltemplate, lowercase

我想使用 Label 或 TextBlock 来显示一个小写字母并附加我从资源中获得的“：”字符串。例如这样的：

```
<Label Content="{x:Static Localization:Captions.Login}" /> 
```

其中 Captions.Login 是字符串“Login”，我认为输出应该是：“login:”。我为标签添加了一个模板，它附加了“：”，但我无法在这个模板中小写我的字符串：

```
 <ControlTemplate x:Key="LabelControlTemplate" TargetType="{x:Type Label}">
    <Border BorderBrush="{TemplateBinding BorderBrush}" BorderThickness="{TemplateBinding BorderThickness}" Background="{TemplateBinding Background}" Padding="{TemplateBinding Padding}" SnapsToDevicePixels="True">
        <TextBlock>
            <Run Text="{TemplateBinding Content}"/>
            <Run Text=":"/>
        </TextBlock>
    </Border>
    <ControlTemplate.Triggers>
        <Trigger Property="IsEnabled" Value="False">
            <Setter Property="Foreground" Value="{DynamicResource {x:Static SystemColors.GrayTextBrushKey}}"/>
        </Trigger>
    </ControlTemplate.Triggers>
  </ControlTemplate> 
```

在没有 Controltemplate 的情况下使用 xaml 行，我可以获得相同的结果：

```
<Label Content="{x:Static Localization:Captions.Login}" ContentStringFormat="{}{0}:" /> 
```

所以最后，我的问题是如何在这种情况下引入小写功能（注意我不想使用 TextBox 和重新样式来实现这一点）

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:12:18.130

使用绑定和转换器怎么样？

```
<Label Content="{Binding Source="{x:Static Localization:Captions.Login}", Path=., Converter="{StaticResource MyToLowerWithDotConverter}"/> 
```

类似的东西？我没有IDE atm，所以我不知道绑定是否正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:13:53.270

使用转换器将您的字符串转换为小写。

```
public class LowerCaseConverter : IValueConverter
{
    public object Convert(object value, Type targetType, object parameter, CultureInfo culture)
    {
        return ((string)value).ToLowerInvariant();
    }

    public object ConvertBack(object value, Type targetType, object parameter, CultureInfo culture)
    {
        // unnecessary
        throw new NotImplementedException();
    }
} 
```

# java - PS Old Gen 已满，我的应用程序变慢了

> ID：13068240
> 
> 赞同：2
> 
> 时间：2012-10-25T12:09:07.383
> 
> 标签：java, groovy, 64-bit, tomcat6, java-opts

在中等用户负载期间，我的 Tomcat 应用程序速度非常慢，我不得不重新启动 Tomcat 以允许用户工作。

系统规格如下：

*   Centos 5.4 64 位 8GB RAM
*   雄猫 6
*   一个 Bonita BPM webapp - 它利用了许多 Groovy 调用/脚本

系统只运行 Tomcat，没有 DB 或其他任何东西。

当应用程序变得非常缓慢时，[此处](http://i49.tinypic.com/1572iar.png)会显示 java 内存的快照。

您有什么想法可以帮助我微调 java 内存参数以帮助系统工作吗？Tomcat 中的当前内存操作如下：

```
MEMORY_OPTS="-Xshare:auto -Xms3072m -Xmx6144m -XX:MaxPermSize=1536m"` 
```

我应该使用`-XX: UseCompressedOops`或任何其他参数来防止这种内存耗尽吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:14:00.597

我建议您对应用程序进行内存分析器，以查看保留了多少内存以及在哪里产生了垃圾。对于大多数 Web 应用程序来说，GC 并不是什么大问题，但是如果垃圾数量达到过多的水平并且没有太多可用内存，它可能会显着降低系统速度。

# c# - 时间：2019-05-10 标签：c#visual studio sql lite

> ID：13068244
> 
> 赞同：1
> 
> 时间：2012-10-25T12:09:22.950
> 
> 标签：c#, sql, load

我和我的朋友目前正在一个程序中使用 sql lite 数据库。当他编译项目时，数据库加载没有任何问题。但是当我尝试编译项目（工作正常）并加载数据库时，出现以下错误：

> System.BadImageFormatException 未处理 HResult=-2147024885 Message=Die Datei oder Assembly "System.Data.SQLite, Version=1.0.66.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139" oder eine Abhängigkeit davon wurde nicht gefunden。Es wurde versucht, eine Datei mit einem falschen Format zu laden。Source=PrisonArchitectSavegameEditor FileName=System.Data.SQLite, Version=1.0.66.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139 FusionLog==== Zusstandsinformationen vor Bindung === LOG: Benutzer = TIETZE\tietze111 LOG: DisplayName = System.Data。 SQLite，版本=1.0.66.0，文化=中性，PublicKeyToken=db937bc2d44ff139（完全指定）日志：Appbase = file:///D:/Dropbox/C#/WIP/PrisonArchitectSavegameEditor/PrisonArchitectSavegameEditor/bin/Release/ 日志：Ursprünglicher PrivatePath = 空

# Aufruf von Assembly：PrisonArchitectSavegameEditor，版本=2.2.1.0，文化=中性，PublicKeyToken=null。

> LOG: Diese Bindung startet im default-Load-Kontext。LOG: Die Anwendungskonfigurationsdatei wird verwendet: D:\Dropbox\C#\WIP\PrisonArchitectSavegameEditor\PrisonArchitectSavegameEditor\bin\Release\PrisonArchitectSavegameEditor.vshost.exe.Config LOG: Die Hostkonfigurationsdatei wird verwendet: LOG: Die Computerkonfigurationsdatei von C:\Windows\Microsoft。 NET\Framework64\v4.0.30319\config\machine.config wird verwendet。LOG: Verweis nach der Richtlinie: System.Data.SQLite, Version=1.0.66.0, Culture=neutral, PublicKeyToken=db937bc2d44ff139 LOG: Download von neuem URL file:///D:/Dropbox/C#/WIP/PrisonArchitectSavegameEditor/PrisonArchitectSavegameEditor/ bin/Release/System.Data.SQLite.DLL。ERR: Das Setup der Assembly konnte nicht abgeschlossen werden (hr = 0x8007000b)。Die Suche wurde bedet。

堆栈跟踪：

> ```
>  bei PrisonArchitectSavegameEditor.Form1.LoadDatabase()
>    bei PrisonArchitectSavegameEditor.Form1.tabControlSaveGameActions_SelectedIndexChanged(Object sender, EventArgs e) in d:\Dropbox\C#\WIP\PrisonArchitectSavegameEditor\PrisonArchitectSavegameEditor\Form1.cs:Zeile 652.
>    bei System.Windows.Forms.TabControl.OnSelectedIndexChanged(EventArgs e)
>    bei System.Windows.Forms.TabControl.WmSelChange()
>    bei System.Windows.Forms.TabControl.WndProc(Message& m)
>    bei System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
>    bei System.Windows.Forms.UnsafeNativeMethods.SendMessage(HandleRef hWnd, Int32 msg, IntPtr wParam, IntPtr lParam)
>    bei System.Windows.Forms.Control.SendMessage(Int32 msg, IntPtr wparam, IntPtr lparam)
>    bei System.Windows.Forms.Control.WmNotify(Message& m)
>    bei System.Windows.Forms.Control.WndProc(Message& m)
>    bei System.Windows.Forms.Form.WndProc(Message& m)
>    bei System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
>    bei System.Windows.Forms.UnsafeNativeMethods.CallWindowProc(IntPtr wndProc, IntPtr hWnd, Int32 msg, IntPtr wParam, IntPtr lParam)
>    bei System.Windows.Forms.NativeWindow.DefWndProc(Message& m)
>    bei System.Windows.Forms.Control.WmMouseDown(Message& m, MouseButtons button, Int32 clicks)
>    bei System.Windows.Forms.Control.WndProc(Message& m)
>    bei System.Windows.Forms.TabControl.WndProc(Message& m)
>    bei System.Windows.Forms.NativeWindow.DebuggableCallback(IntPtr hWnd, Int32 msg, IntPtr wparam, IntPtr lparam)
>    bei System.Windows.Forms.UnsafeNativeMethods.DispatchMessageW(MSG& msg)
>    bei System.Windows.Forms.Application.ComponentManager.System.Windows.Forms.UnsafeNativeMethods.IMsoComponentManager.FPushMessageLoop(IntPtr dwComponentID, Int32 reason, Int32 pvLoopData)
>    bei System.Windows.Forms.Application.ThreadContext.RunMessageLoopInner(Int32 reason, ApplicationContext context)
>    bei System.Windows.Forms.Application.ThreadContext.RunMessageLoop(Int32 reason, ApplicationContext context)
>    bei PrisonArchitectSavegameEditor.Program.Main() in d:\Dropbox\C#\WIP\PrisonArchitectSavegameEditor\PrisonArchitectSavegameEditor\Program.cs:Zeile 20.
>    bei System.AppDomain._nExecuteAssembly(RuntimeAssembly assembly, String[] args)
>    bei Microsoft.VisualStudio.HostingProcess.HostProc.RunUsersAssembly()
>    bei System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
>    bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state, Boolean preserveSyncCtx)
>    bei System.Threading.ExecutionContext.Run(ExecutionContext executionContext, ContextCallback callback, Object state)
>    bei System.Threading.ThreadHelper.ThreadStart() 
> ```

内部异常：

当我启动他编译的exe时也会出现错误。调用函数而不是函数本身时也会出现错误： ![错误](../Images/0cfca841caafc1367249c44c69f9108c.png)

先感谢您！

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:13:50.110

您可能只需要为 SQLLite 安装提供程序：

[http://sqlite.phxsoftware.com/](http://sqlite.phxsoftware.com/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2017-08-09T06:54:09.253

尝试更改 Visual Studio**处理器架构**

# serial-port - 分析 COM1 活动的应用程序

> ID：13068245
> 
> 赞同：0
> 
> 时间：2012-10-25T12:09:23.170
> 
> 标签：serial-port

我们公司运行的一款旧软件可以管理 RFID 卡的进出以打开门。

我们想要创建一个应用程序来识别谁刚刚接触了特定的地方（我们有那个 id）并获取他们的第一个名字，在屏幕上说“Hi [NAME]”。

正如我所提到的，该软件已经很老了，而且没有 API。它通过串行端口 (COM1) 与 RFID 硬件通信。

我想知道获取所需数据的最佳方法是否是以某种方式拦截 COM1 流量并提取/查找我想要的数据。

这听起来像是最好的方法吗？它会起作用，还是不可能从正在传输的数据中获取名称和数字？

干杯，安德烈

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T17:30:10.143

您能否将软件配置为使用 COM1 以外的端口，或者配置硬件使其物理串行端口分配给不同的 COM 端口？

如果是这样，请查看[com0com](http://com0com.sourceforge.net/)。它是一个 Windows 驱动程序，可在您的 PC 上创建两个 COM 端口，它们之间有一个虚拟 NULL 调制解调器。一侧输入的数据从另一侧输出。

以下是您将如何进行设置：

*   连接到物理 COM 端口 (COMx) 的 RFID 阅读器
*   您的程序将 COMx 桥接到 COMy 并嗅探流量
*   com0com 将 COMy（对于您的程序）链接到虚拟 COM1（对于旧版软件）
*   旧版软件

您需要编写一个程序来在 COMx 和 COMy 之间传递数据，同时监视它以获取您正在寻找的信息。让它简单而健壮，因为如果它出现故障，您的读者将停止工作。

# 更简单的解决方案

如果您只需要监视通信的一侧，请创建一条电缆，将 COM1 的 GND 和 RX 引脚连接到另一个 COM 端口。现在您的程序可以监控对话的那一侧，而不会干扰旧版软件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T17:19:21.137

好吧，一般来说，您可以查看 RS232 信号，如果您想这样做的话。这很棘手，因为您需要“嗅探”信号，这意味着购买或制造允许原始信号通过的装备，然后为您提供一种连接它们的方法。而且，您需要将发送和接收信号发送到两个串行端口（在 RX 线上）。然后你可能想要一些“嗅探”软件，让你可以按时间顺序查看你得到的东西（理想情况下，带有时间戳）。一些可爱的协议也将使用调制解调器线路，因此您可能还需要监视它们。

或者，尝试搜索“免费串行端口监视器”或“串行嗅探器”。

祝你好运！

# c# - 在 linq 中使用类型

> ID：13068251
> 
> 赞同：0
> 
> 时间：2012-10-25T12:09:46.297
> 
> 标签：c#, .net, linq

我有大量的课程。从这个列表中我得到一个指定的类型

```
Type aType = Type.GetType(...); 
```

现在我想在 linq 语句中使用这种类型，例如：

```
var aResult = from obj in scope.Extent<aType>() select obj; 
```

这似乎是不可能的，因为 Extent 不接受 Type。

现在有什么办法（使用.net 4.5）来调用该语句吗？

我想做的就是说使用类型作为类。不要调用该类，仅使用 linq 从范围中获取此类型的所有对象。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:18:41.563

您不能将 的实例`Type`用作泛型类型参数 - 无论如何不能在编译时使用。

如果您想要特定类型的对象，您可以这样做

```
var aResult = from obj in scope where obj.GetType() == aType select obj; 
```

请注意，这需要*精确的*类型匹配，而不是任何类型的“可以分配给”关系。

另请注意，这只会为您提供一系列`object`s - 再次没有编译时方法将事物转换为`Type`.

# api - 所有地方的 UniqueVisitor 和/或 totalCheckins？（四方API）

> ID：13068256
> 
> 赞同：1
> 
> 时间：2012-10-25T12:09:57.733
> 
> 标签：api, foursquare

有没有办法在指定的时间范围内为我不管理的场所获取*uniqueVisitors*和/或*totalCheckins值？*

我想获得过去 30 天内某个地方的访客和/或签到人数，但据我所知，这些统计数据仅供场地经理使用。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T19:43:17.890

你是对的，这些统计数据仅供场地管理者使用。

# python - 多处理 scikit-learn

> ID：13068257
> 
> 赞同：10
> 
> 时间：2012-10-25T12:10:03.300
> 
> 标签：python, multithreading, numpy, machine-learning, scikit-learn

`load_file`我让linearsvc使用我试图让它在多处理器环境中工作的方法来对抗训练集和测试集。

我怎样才能进行多处理工作`LinearSVC().fit()` `LinearSVC().predict()`？我还不太熟悉 scikit-learn 的数据类型。

我也在考虑将样本拆分为多个数组，但我不熟悉 numpy 数组和 scikit-learn 数据结构。

这样做会更容易放入 multiprocessing.pool() 中，这样，将样本分成块，训练它们并稍后组合训练集，它会工作吗？

编辑：这是我的场景：

可以说，我们在训练样本集中有 100 万个文件，当我们想在多个处理器上分配 Tfidfvectorizer 的处理时，我们必须拆分这些样本（对于我的情况，它只有两个类别，所以假设每个样本要训练 500000 个） . 我的服务器有 24 个 48 GB 的内核，所以我想将每个主题分成 1000000 / 24 个块并在它们上处理 Tfidfvectorizer。就像我会对测试样本集以及 SVC.fit() 和决定() 做的那样。是否有意义？

谢谢。

PS：请不要关闭这个。

* * *

## 回答 #1

> 赞同：13
> 
> 时间：2012-10-26T07:36:25.260

我认为对这种数据使用 SGDClassifier 而不是 LinearSVC 会是一个好主意，因为它要快得多。对于矢量化，我建议您查看[散列转换器 PR](https://github.com/scikit-learn/scikit-learn/pull/909)。

对于多处理：您可以跨核心分配数据集，执行`partial_fit`，获取权重向量，对其进行平均，将它们分配给估计器，再次进行部分拟合。

进行平行梯度下降是一个活跃的研究领域，因此那里没有现成的解决方案。

顺便说一句，您的数据有多少类？对于每个班级，将（自动）训练一个单独的班级。`n_jobs`如果您的类几乎与核心一样多，那么通过在 SGDClassifier 中指定，每个核心只做一个类可能会更好、更容易。

* * *

## 回答 #2

> 赞同：11
> 
> 时间：2012-10-26T09:24:50.537

对于线性模型（`LinearSVC`, `SGDClassifier`, `Perceptron`...），您可以对数据进行分块，在每个块上训练独立模型并通过将和作为属性`SGDClasifier`的平均值插入其中来构建聚合线性模型（例如 ） 。的方法, ,计算相同的函数（使用具有阈值的点积和 One vs All 多类支持进行线性预测），因此用于保存平均系数的特定模型类并不重要。`coef_``intercept_``predict``LinearSVC``SGDClassifier``Perceptron``intercept_`

然而，如前所述，棘手的一点是并行化特征提取，而当前的 scikit-learn（0.12 版）并没有提供任何方法来轻松做到这一点。

**编辑**：scikit-learn 0.13+ 现在有一个无状态的散列矢量化器。

# html - 为图像添加边框

> ID：13068259
> 
> 赞同：-2
> 
> 时间：2012-10-25T12:10:14.417
> 
> 标签：html, css

请看我的这个小提琴：

jsfiddle.net/jWKdK/

并帮助我为图像添加边框。

问候

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:12:07.990

img 之前不应该有点 -

```
#header img {
   padding:1px;
   border:1px solid #021a40;
   background-color:#ff0;
} 
```

[**演示**](http://jsfiddle.net/jWKdK/2/)

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:11:57.633

这样做：[我的小提琴](http://jsfiddle.net/v413hav/jWKdK/1/)

CSS

```
#header img {
   padding:1px;
   border:1px solid #021a40;
   background-color:#ff0;
} 
```

使用`.img`意味着您的目标`.img`是父`#header`级，但没有这样`.img`的类，因此请选择属性

或者，如果您想使用`.img`而不是给`.img`您的 img 标签上课：[我的小提琴](http://jsfiddle.net/v413hav/jWKdK/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T12:12:08.583

在你的风格中删除点`.img`

更改`#header .img {`为`#header img {`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T12:12:31.343

那不是`.img`应该的`#header img`

[演示](http://jsfiddle.net/jWKdK/3/)

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T12:21:12.997

```
#header img {
   padding:1px;
   border:1px solid #021a40;
   background-color:#ff0;
} 
```

使用 #header img 因为 img 是标签选择器而不是类您可以在此链接[http://www.w3schools.com/cssref/css_selectors.asp上使用选择器的参考](http://www.w3schools.com/cssref/css_selectors.asp)

# android - 关于绑定列表到listView的咨询

> ID：13068260
> 
> 赞同：0
> 
> 时间：2012-10-25T12:10:14.970
> 
> 标签：android

我从我的 WebService 获取数组。

我懂了：

```
WS w=new WS();
 w.WebServiceCallExampleGetArray(); 
```

返回这个：`List<Category>`

我有列表视图 `ListView list;`

如何将**w.WebServiceCallExampleGetArray()**绑定 到 **listView**

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-04-06T19:32:31.083

我编写了一个通用类来将列表视图绑定到可能对您有用的列表。你可以根据需要扩展这个想法。首先，我假设您接受我的建议并使用 ORM。这意味着您的数据库查询最终会转换为 T 类的可枚举数组。

例如，假设您有一个来自 PointClass 的项目列表和一个名为 (mylistView) 的 ListView，并且您希望使用以下行样式将此类绑定到列表视图（有趣的部分是 tag="Bind={}"）：

listrowitems.xml：

```
<?xml version="1.0" encoding="utf-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="wrap_content"
android:orientation="vertical" >

<TextView
    android:id="@+id/itemName"
    android:layout_width="fill_parent"
    android:layout_height="25dip"
    android:tag="Bind={Name}" />

<LinearLayout
    android:layout_width="fill_parent"
    android:layout_height="wrap_content"
    android:orientation="horizontal" >

    <TextView
        android:id="@+id/itemPoint"
        android:layout_width="wrap_content"
        android:gravity="right"
        android:tag="Bind={Point}" />

    <TextView
        android:id="@+id/itemScale"
        android:layout_width="wrap_content"
        android:gravity="right"
        android:tag="Bind={UnitScale}" />
</LinearLayout>

</LinearLayout> 
```

使用 ListViewAdapter 类（代码在下面），这只是两行代码：

```
listadapter = new ListViewAdapter(ActivityDailyRecord.this,items,R.layout.listrowitems);
mylistView.setAdapter(listadapter); 
```

有趣的部分是**tag="Bind={FieldName}"** ...它遍历整个 listrowitems 布局并使用反射设置字段值。你应该小心xml文件标签中的字段名。

```
public class ListViewAdapter extends BaseAdapter {
private List<?> items;
private Context context = null;
private int rowLayoutResId;

public interface RowChildClickCallBack {
    public void OnClick(int position, View v);
}

private HashMap<Integer, RowChildClickCallBack> eventMappers = null;

/**
 * 
 */
public ListViewAdapter(Context context, List<?> items, int rowLayourId,
        HashMap<Integer, RowChildClickCallBack> eventMappers) {
    this.items = items;
    this.context = context;
    this.rowLayoutResId = rowLayourId;
    this.eventMappers = eventMappers;
    // items.get(0).getClass().getName()
}

public ListViewAdapter(Context context, List<?> items, int rowLayourId) {
    this.items = items;
    this.context = context;
    this.rowLayoutResId = rowLayourId;
    this.eventMappers = null;
    // items.get(0).getClass().getName()
}

public void setItems(List<?> items) {
    this.items = items;
}

public void rebind(List<?> items) {

}

@Override
public int getCount() {
    return items.size();
}

@Override
public Object getItem(int position) {
    return (Object) items.get(position);
}

@Override
public long getItemId(int position) {
    // TODO Auto-generated method stub
    return 0;
}

@Override
public View getView(int position, View convertView, ViewGroup parent) {
    LayoutInflater inflater = (LayoutInflater) context
            .getSystemService(Context.LAYOUT_INFLATER_SERVICE);

    View gridView;

    if (convertView == null) {
        gridView = new View(context);

        gridView = inflater.inflate(rowLayoutResId, null);
    } else {
        gridView = (View) convertView;
        // Log.e("ListViewAdapter",String.valueOf(position));
    }

    ViewGroup vg = (ViewGroup) gridView;
    // Log.e("ListViewAdapter",String.valueOf(position));
    traverseControls(vg, position);

    return gridView;
}

private boolean hasBindValue(String tagStr) {
    // // *Bind={sth}*
    Pattern pBindMathcher = Pattern.compile(".*Bind=\\{(\\w+)\\}.*");
    Matcher mBind = pBindMathcher.matcher(tagStr);
    return mBind.matches();
}

private String getBindValue(String tagStr) {
    // // Bind={sth},Style={fontName:{}}
    Pattern pBindMathcher = Pattern.compile(".*Bind=\\{(\\w+)\\}.*");
    Matcher mBind = pBindMathcher.matcher(tagStr);

    String bind = "";
    if (mBind.matches()) {
        bind = mBind.group(1);
    }
    return bind;
}

private View traverseControls(ViewGroup v, int position) {
    View invalid = null;
    for (int i = 0; i < v.getChildCount(); i++) {
        View child = v.getChildAt(i);
        if (child.getTag() != null) {
            if (hasBindValue(child.getTag().toString())) {

                String fName = getBindValue(child.getTag().toString());

                try {
                    Field f = items.get(position).getClass()
                            .getField(fName);
                    // //////////// Set Text if it has bindings
                    // ////////////
                    if (child instanceof EditText) {
                        EditText e = (EditText) child;
                        e.setText(String.valueOf(f.get(items.get(position))));

                    } else if (child instanceof TextView) {
                        TextView e = (TextView) child;
                        e.setText(String.valueOf(f.get(items.get(position))));
                    }

                } catch (Exception ex) {
                }
            }
        } else if (child instanceof ViewGroup) {
            invalid = traverseControls((ViewGroup) child, position); // Recursive
            // call.
            if (invalid != null) {
                break;
            }
        }
        if (eventMappers != null) {
            if (eventMappers.containsKey(child.getId())) {
                final View vw = child;
                final int resID = child.getId();
                final int pos = position;
                child.setOnClickListener(new OnClickListener() {
                    @Override
                    public void onClick(View arg0) {
                        eventMappers.get(resID).OnClick(pos, vw);
                    }
                });
            }
        }
    }
    return invalid;
}
} 
```

另请注意，我还没有测试过它的性能，所以在使用大量行时要小心。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:17:54.310

您可以扩展[ArrayAdapter](http://developer.android.com/reference/android/widget/ArrayAdapter.html)并覆盖[getView()](http://developer.android.com/reference/android/widget/ArrayAdapter.html#getView%28int,%20android.view.View,%20android.view.ViewGroup%29)。[像这样](http://www.youtube.com/watch?v=wDBM6wVEO70)的一些更深入的 ListView 教程似乎也很有帮助。

# java - JSON 到 JSON 转换器

> ID：13068267
> 
> 赞同：33
> 
> 时间：2012-10-25T12:10:36.467
> 
> 标签：java, json, xslt, jackson

我有一个场景。

所需的输入和输出是 JSON。

```
// Input
{
  "OldObject": {
    "Time": 1351160457922,
    "Name": "OName",
    "quantity": 100,
    "price": 10
  }
}

// Output
{
  "NewObject": {
    "Time": 1351160457922,
    "Title": "OName",
    "quantity": 100
  }
} 
```

我需要一些转换代码或者最好是 xslt 类型的语言来将 json 从一种格式转换为另一种格式。该转换器还需要快速，因为转换将在运行中完成。

**编辑**
我没有收到 INPUT 对象的定义，它可能会在运行时更改。但如果需要，我可以将类用于 OUTPUT 对象。我曾尝试以**json -> xml -> xslt -> xml -> json**的方式执行此操作，但此时每秒接收大约 1000 个对象，此过程可能会产生开销。
我也不能使用 JavaScript，因为 myApp 是简单**的基于 Windows 的 Java 应用程序**，使用 JavaScript 可能会导致开销。

* * *

## 回答 #1

> 赞同：34
> 
> 时间：2013-07-01T20:34:15.407

试试[颠簸](https://github.com/bazaarvoice/jolt)。它是一个用 Java 编写的 JSON 到 JSON 转换库。它是在将大量 JSON 从 ElasticSearch“后端”转换为前端 api 的项目中创建的。

对于您在问题中列出的 JSON 转换，Jolt “shift”规范将是：

```
// Jolt "shift" spec
{
    "OldObject": {
        "Time": "NewObject.Time",   
        "Name": "NewObject.Title", // if the input has "OldObject.Name", copy it's value
                                   // to "NewObject.Title
        "quantity": "NewObject.quantity"
    }
} 
```

* * *

## 回答 #2

> 赞同：14
> 
> 时间：2012-10-25T12:20:28.690

您可以使用[JSON patch](http://jsonpatch.com/)进行此转换。

[jsonpatch-js](https://github.com/bruth/jsonpatch-js)示例：

```
var transformations = [
  { move: '/OldObject', to: '/NewObject' },
  { remove: '/NewObject/price' },
  { move: '/NewObject/Name', to: '/NewObject/Title' }
];

var oldObject = { "OldObject": { "Time": 1351160457922, "Name": "OName", "quantity": 100, "price": 10 } };

jsonpatch.apply(oldObject, transformations); 
```

我没有测试提供的，但应该像那样工作。

JSON补丁有[Java实现](http://jsonpatch.com/#java)：

* * *

## 回答 #3

> 赞同：6
> 
> 时间：2012-11-06T20:43:34.797

您可以使用 ZORBA 和 JsonIQ [http://www.jsoniq.org/](http://www.jsoniq.org/) 但是，它是一个本地库，它带有一个包装器，因此您可以在 java 中使用它。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2019-11-20T18:21:34.843

你可以试试[jmom](https://github.com/antonsjava/jmom)一个小的 java 库

```
String jsonstring = "...";
JsonValue json = JsonParser.parse(jsonstring);
Jmom jmom = Jmom.instance()
            .copy("/OldObject", "/NewObject", true)
            .remove("/NewObject/price")
            .copy("/NewObject/Name", "/NewObject/Title", true);
jmom.apply(json);
jsonstring = json.toCompactString(); 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2015-01-05T13:01:49.177

Javascript JSON 转换器： [https ://raw.githubusercontent.com/udhayasoftware/codebase/master/standalone/javascript/TransformJSON.js](https://raw.githubusercontent.com/udhayasoftware/codebase/master/standalone/javascript/TransformJSON.js)

我们可以将 JSON 数组转换为 JSON 对象，反之亦然。唯一的事情是我们在定义 xPath 时需要小心。

```
//Transforming JSON array to JSON object:
 var inputObj = [{Name:"Senyora"},{Name:"Clinton"}]
 sourceXpath = "[].Name";
 targetXpath = "Marriage.Couples[].NewName";
 // Output = {Marriage:{Couples:[{NewName:"Senyora"},{NewName:"Clinton"}]}}

 //Transforming JSON object to JSON array:
 var inputObj = {Marriage:{Couples:[{NewName:"Senyora"},{NewName:"Clinton"}]}}
 sourceXpath = "Marriage.Couples[].NewName";
 targetXpath = "[].Name";
 // Output = [{Name:"Senyora"},{Name:"Clinton"}] 
```

```
/*

 Author: Udhayamoorthy
 Email: udhayaraagam@gmail.com"

 */

//Code start

function prepareGroup(inputObj, flatted, sourceXpath) {
    sourceXpath = sourceXpath.replace(/\[]/g, ".[0-9]*");
    var reg = new RegExp(sourceXpath, "g")
    var strVal = JSON.stringify(flatted).match(reg);
    var groupVal = {};
    if (strVal != null)
        strVal.forEach(function (data) {
            if (flatted[data] != undefined) {
                groupVal[data] = flatted[data];
            } else {
                data = data.replace(/"/g, "");
                groupVal[data] = getValue(inputObj, data);
            }
        })
    return groupVal;
}

function processGrouped(obj, targetXpath) {
    var flatOutput = {};
    var keys = Object.keys(obj);
    targetXpath = targetXpath.replace(/\[]./g, "[0-9]");
    for (var i = 0; i < keys.length; i++) {
        var key = keys[i];
        var changed = key.match(/(^[0-9]*\.|\W[0-9]*\.)/g);
        if (changed) {
            changed = JSON.stringify(changed).replace(/\"\./g, "\"");
        }
        var arrapos = '';
        try {
            arrapos = JSON.parse(changed);
        }
        catch (e) {
            arrapos = changed;
        }
        var temp = targetXpath;
        if (arrapos != null) {
            arrapos.forEach(function (pos) {
                pos = "." + pos;
                temp = temp.replace("[0-9]", pos)
            })
        }
        //tinkering - started
        if (temp.charAt(0) == ".") {
            temp = temp.substring(1, temp.length);
        }
        //tinkering - end
        flatOutput[temp] = obj[key];
    }
    return unflatten(flatOutput);
}

function merge(a, b) {
    for (var key in b)
        if (b.hasOwnProperty(key)) {
            var src = a[key];
            var dest = b[key];
            if (typeof src === 'object' && typeof dest === 'object') {
                merge(src, dest);
            } else {
                a[key] = b[key];
            }
        }
    return a;
};

function getValue(localObj, xpath) {
    //var localObj = JSON.parse(JSON.stringify(obj));
    var xpathArr = xpath.split('.');
    xpathArr.forEach(function (path) {
        localObj = localObj[path];
    })
    return localObj;
}

function unflatten(target, opts) {
    var opts = opts || {}
        , delimiter = opts.delimiter || '.'
        , result = {}

    if (Object.prototype.toString.call(target) !== '[object Object]') {
        return target
    }

    function getkey(key) {
        var parsedKey = parseInt(key)
        return (isNaN(parsedKey) ? key : parsedKey)
    };

    Object.keys(target).forEach(function (key) {
        var split = key.split(delimiter)
            , firstNibble
            , secondNibble
            , recipient = result

        firstNibble = getkey(split.shift())
        secondNibble = getkey(split[0])

        while (secondNibble !== undefined) {
            if (recipient[firstNibble] === undefined) {
                recipient[firstNibble] = ((typeof secondNibble === 'number') ? [] : {})
            }

            recipient = recipient[firstNibble]
            if (split.length > 0) {
                firstNibble = getkey(split.shift())
                secondNibble = getkey(split[0])
            }
        }

        // unflatten again for 'messy objects'
        recipient[firstNibble] = unflatten(target[key])
    });

    //Array Check
    var keys = Object.keys(result);
    if (keys.length > 0 && keys[0] === "0") {
        var output = [];
        keys.forEach(function (key) {
            output.push(result[key])
        });
        return output;
    }
    return result
};

function flatten(target, opts) {
    var output = {}
        , opts = opts || {}
        , delimiter = opts.delimiter || '.'

    function getkey(key, prev) {
        return prev ? prev + delimiter + key : key
    };

    function step(object, prev) {
        Object.keys(object).forEach(function (key) {
            var isarray = opts.safe && Array.isArray(object[key])
                , type = Object.prototype.toString.call(object[key])
                , isobject = (type === "[object Object]" || type === "[object Array]")

            if (!isarray && isobject) {
                return step(object[key]
                    , getkey(key, prev)
                )
            }

            output[getkey(key, prev)] = object[key]
        });
        if (Object.keys(object) == "") {
            if (object instanceof Array) {
                output[prev] = [];
            } else {
                output[prev] = {};
            }
        }
    };
    step(target)
    return output
};

function isChildAttribute(map, flatted, mapArray) {
    var parent = map.sourceXpath;
    for (var j = 0; j < mapArray.length; j++) {
        var child = mapArray[j].sourceXpath;
        if (child.indexOf(parent) != -1 && parent.length < child.length) {
            if (child.indexOf(parent + ".") != -1 || child.indexOf(parent + "[]") != -1) {
                var temp = child;
                temp = temp.replace(/\[]/g, ".0");
                if (flatted[temp] != undefined) {
                    return false;
                }
            }
        }
    }
    return true;
}

function transformJSON(inputObj, mapArray) {
    var flatted = flatten(inputObj);
    var finalout = {};
    if (mapArray.length > 0 && (mapArray[0].targetXpath).charAt(0) == "[")
        finalout = [];
    mapArray.forEach(function (map) {
        if (isChildAttribute(map, flatted, mapArray)) {
            var grouped = prepareGroup(inputObj, flatted, map.sourceXpath);
            var output = processGrouped(grouped, map.targetXpath);
            finalout = merge(finalout, output);  // merge two json objects
        }
    });
    return finalout;
}

//Code end

//How to use (See below) ??

var inputObj = {
    a: {
        b: [
            {
                Name: "Tommy",
                Location: [
                    {Place: "Sydney"},
                    {Place: "Washington"}
                ],
                Info: {age: 23}
            },
            {
                Name: "Sara",
                Location: [
                    {Place: "New York"},
                    {Place: "New Jercy"}
                ],
                Info: {age: 34}
            },
            {
                Name: "John",
                Location: [
                    {Place: "Chicago"},
                    {Place: "Detroit"}
                ],
                Info: {age: 78}
            }
        ],
        d: {
            e: {
                f: {
                    g: {
                        h: "I Love India"
                    }
                }
            }
        }
    }
};

var mapArray = [];     // collect source and target xpath s
var obj = {};
obj.sourceXpath = "a.b[].Name"; // Name is string
obj.targetXpath = "x[].NewName"; // expecting NewName as string
mapArray.push(obj);

//obj = {};
//obj.sourceXpath = "a.b[].Location"; // Location is an array
//obj.targetXpath = "x[].NewName"; // INVALID MAPPING - NewName already mapped
//mapArray.push(obj);

obj = {};
obj.sourceXpath = "a.b[].Location"; // Location is an array
obj.targetXpath = "x[].NewLocation"; // Location data copied to NewLocation array(Place will be present in array elements)
mapArray.push(obj);

obj = {};
obj.sourceXpath = "a.b[].Location[].Place"; // Location is an array
obj.targetXpath = "x[].NewLocation[].NewPlace"; // NewPlace will be created parallel to existing Place.
mapArray.push(obj);

obj = {};
obj.sourceXpath = "a.d.e.f.g.h"; // Transforming attributes at different level
obj.targetXpath = "T.H";
mapArray.push(obj);

var finalout = transformJSON(inputObj, mapArray);
console.log("See line#204 for more about how to use?");
console.log("Transformed JSON = " + JSON.stringify(finalout));
```

注意：JSON 不能在数组的不同维度之间转换。sourceXpath 中“[]”的计数应等于 targetXpath 中“[]”的计数，反之亦然。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2015-10-18T18:26:40.763

您可以尝试 Java 库[Silencio](https://github.com/damianszczepanik/silencio)，它允许您将 JSON 文件的每个节点转换为新值。您可以决定应该转换哪些节点以及如何转换。

* * *

## 回答 #7

> 赞同：1
> 
> 时间：2018-02-22T13:58:39.540

另一种选择是使用 Logz.io [Sawmill](https://github.com/logzio/sawmill)库。您定义一个管道并执行它。以你为例：

```
{
  steps: [
    {
      rename {
         config {
            from: "OldObject"
            to: "NewObject"
         }
      }
    }

    {
      removeField {
        config {
          path: "NewObject.price"
        }
      }
    }

    {
      rename {
        config {
          from: "NewObject.Name"
          to: "NewObject.Title"
        }
      }
    }
  ]
} 
```

# android - 用于不同屏幕尺寸和密度组合的可绘制文件夹

> ID：13068273
> 
> 赞同：4
> 
> 时间：2012-10-25T12:10:56.913
> 
> 标签：android, drawable

什么是可绘制文件夹

1.  低密度，中屏

2.  低密度，大屏幕

3.  低密度，超大屏幕

4.  中密度，小屏幕

5.  中密度，大屏幕

6.  中密度，超大屏幕

    和平板电脑？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T12:20:17.777

低密度，中屏

```
drawable-ldpi 
```

低密度，大屏幕

```
drawable-large-ldpi 
```

低密度，超大屏幕

```
drawable-xlarge-ldpi 
```

中密度，小屏幕

```
drawable-small-mdpi 
```

中密度，大屏幕

```
drawable-large-mdpi 
```

中密度，超大屏幕

```
drawable-xlarge-mdpi 
```

有 14 个可绘制/布局检查[这个](https://stackoverflow.com/questions/5558534/do-i-need-14-different-layouts-to-support-all-android-devices)问题

# iphone - 在视口中设置 width=device-width 会破坏布局

> ID：13068276
> 
> 赞同：1
> 
> 时间：2012-10-25T12:11:16.323
> 
> 标签：iphone, html, ios, css, mobile

我有一个布局，它应该使用`@media`CSS 中的查询根据设备的宽度进行缩放：

```
@media only screen and (max-width: 510px) {
    ....
} 
```

虽然似乎确实应用了样式，但一旦视口设置为“width=device-width”，设计就会有效地中断。可能是因为它太窄了，这很奇怪，因为 CSS 应该按比例缩小所有内容。

检查下面的屏幕

![在此处输入图像描述](../Images/bda80b342dcbe7ec7813716e354da6bb.png)

快速编辑：似乎以某种方式在 Android 4.1 上工作。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:17:04.357

这只是iPhone上的问题吗？这可能是因为手机视网膜显示屏的双像素大小，尝试添加`initial-scale=1.0; maximum-scale=1.0`到视口内容。

# objective-c - 如何在单击按钮时创建 UITabController

> ID：13068295
> 
> 赞同：0
> 
> 时间：2012-10-25T12:12:19.830
> 
> 标签：objective-c, xcode, uitabcontroller

我正在开发应用程序。它有正常的 3 个视图。在第三个视图中，我有一个表格视图。如果我选择任何行，我想要一个包含**UITabController**的视图。我创建了一个简单的 UITabController 应用程序，但无法执行此操作。这个怎么做 ？

提前致谢

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:27:52.433

您通常希望 a`UITabBar`成为您的应用程序***的***导航，而不是稍后在一个视图中显示它。

但是如果你想这样做，你应该像 Mundi 所说的那样，`UITabBarViewController`在你选择你的`UITableViewCell`.

我不知道您的确切用例，但如果您使用 a`UITableView`我会`UINavigationController`在您点击 one 时使用 a 推送新视图`UITableViewCell`。那么`UISegmentedControl`在`UINavigationBar`. 这看起来像[这样](http://blog.episode-2.com/wp-content/uploads/2009/01/uisegmentedcontrol-3.jpg)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:18:49.800

恕我直言，您的问题可能构思不当。

标签栏控制器**控制视图控制器**，视图控制器 反过来控制视图。您关于视图包含控制器控制器的建议根本没有意义。

也许您在表格视图中选择一行时真正想要的是呈现一个新的视图控制器，然后使（现有的）标签栏**可见**。

# python - 在集群中使用 Celery 进行任务管理是个好主意吗？

> ID：13068300
> 
> 赞同：1
> 
> 时间：2012-10-25T12:12:32.007
> 
> 标签：python, cloud, celery, distributed-computing

我将使用 Celery 来管理集群中的任务。将有一台主服务器和一些工作服务器。Master 将任务发送到工作服务器（任意数量）并获取结果。任务状态应该是可追踪的。后端是 RabbitMQ。在这种情况下使用芹菜是个好主意吗？还是有更好的解决方案？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:23:02.600

恕我直言，这是一个非常好的主意。我以这种方式在 Amazon EC2 中使用过几次，每次都很棒。

最大的优势之一是它可以处理工作服务器的故障，因此基础架构的动态特性不是问题，您仍然可以完成工作。

很抱歉，这个答案如此简短，但我相信它回答了 OP 的问题。没有更多的了。芹菜很棒，能胜任，有很好的文档。随它去吧:)

# php - 从数组中删除重复项，然后删除空值，然后重组

> ID：13068303
> 
> 赞同：6
> 
> 时间：2012-10-25T12:12:43.547
> 
> 标签：php, arrays

我有一个数组（sizeofarray = 5）

```
$city[0] = 'Newyork'
$city[1] = 'Paris'
$city[2] = 'Paris'
$city[3] = 'Newyork'
$city[4] = 'Amsterdam'
(sizeofarray = 5) 
```

我使用 array_unique() 来删除欺骗并得到了这个：

```
$city[0] = 'Newyork'
$city[1] = 'Paris'
$city[4] = 'Amsterdam'
(sizeofarray = 3) 
```

但现在我想要这个：

```
$city[0] = 'Newyork'
$city[1] = 'Paris'
$city[2] = 'Amsterdam'
(sizeofarray = 3) 
```

有什么功能可以实现吗？

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T12:13:50.797

[`array_filter`](http://php.net/array_filter)通过以下方式运行数组后使用`array_unique`：

```
$city = array_filter($city); 
```

从[文档](http://php.net/array_filter)中：

> 如果没有提供回调，所有输入等于`FALSE`（请参阅转换为布尔值）的条目将被删除。

但是，如果您的数组元素之一等于 ，则您可能会遇到错误，[`"0"`因为当转换为布尔值时，其值为`false`](http://php.net/manual/language.types.boolean.php#language.types.boolean.casting)。在这种情况下，您必须使用自定义回调函数。

* * *

在您的问题中，似乎只有数组索引是乱序的，并且您的数组中没有实际的空字符串元素。尝试在重置索引[`array_values`](http://php.net/array_values)之后运行数组：`array_unique`

```
$city = array_unique($city); 
$city = array_values($city); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:22:03.367

除了 Tim Cooper 的回复，用于`array_values()`重新索引数组：

```
$city = array_unique($city);
$city = array_filter($city);
$city = array_values($city); 
```

并确保相同的城市具有相同的名称，因为`'New York' != 'Newyork'`. 否则，您将需要额外的过滤。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:19:52.357

试试这样：

```
$city=array_values(array_unique($city)); 
```

# java - 在 open gl es 中连接轮廓渲染

> ID：13068309
> 
> 赞同：3
> 
> 时间：2012-10-25T12:12:54.343
> 
> 标签：java, android, opengl-es

我正在尝试使用 Java 和 Open GL es 为 android 平台创建我的第一个*2d 游戏。*现在我的问题是我的游戏需要一个水元素，我决定这样做，让水由带有轮廓的小圆圈组成，这样它们看起来就像卡通水滴，但是当两个或更多这样的小水滴出现时彼此（并相交一点）我想让它们的轮廓连接起来，从而形成一个更大的下降。所以我的问题是，这是否可能（动态连接的轮廓），如果可以的话，有人可以告诉我怎么做或将我链接到教程或其他东西吗？

这是我用油漆画的一张小图，以说明我想要实现的目标：

![在此处输入图像描述](../Images/5885e2dd595a1f8be2d22cc837852d1f.png)

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T14:41:17.313

假设您的设备支持它，您可能可以使用模板缓冲区执行此操作。

圆圈的内部将写入模板缓冲区。圆圈的外部只会写入模板缓冲区为零的位置。

您可能也可以使用着色器和颜色缓冲区/FBO 以相同的方式（或类似方式）执行此操作。

# javascript - 似乎无法将 js 变量添加到 parent.href.location

> ID：13068313
> 
> 赞同：0
> 
> 时间：2012-10-25T12:13:14.013
> 
> 标签：javascript, jquery, location

亲爱的stackoverflowers，

我想在下面的 js 行中添加一个变量：

```
 setTimeout("parent.location.href = 'http://www.url.com/lists.php?listid=';",2000); 
```

我该怎么做呢？我似乎无法得到 ' 的权利。

```
 setTimeout("parent.location.href = 'http://www.url.com/lists.php?listid=' + variable;",2000); 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T12:14:17.840

将函数处理程序传递给`setTimeout()`. 此外，它可以轻松解决您放置引号的问题：

```
setTimeout(function() {
    parent.location.href = "http://www.url.com/lists.php?listid=" + variable;
}, 2000); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:15:52.077

使用函数重定向如下....

```
function Redirect(val)
{
  parent.location.href = 'http://www.url.com/lists.php?listid='+val;
}

 setTimeout(" Redirect('"+variable+"')",2000); 
```

# ibm-midrange - 为什么显示文件上不显示输出字段？

> ID：13068314
> 
> 赞同：0
> 
> 时间：2012-10-25T12:13:13.763
> 
> 标签：ibm-midrange

我正在研究一个显示一堆东西的显示字段（显然，他们总是这样做）。最近我遇到了一个很奇怪的场景。我以一种记录格式添加了一个字符输出字段，但是当将此记录格式写入屏幕时，该字段无法显示。我在调试模式下检查过。该值已在 EXFMT 语句之前分配给该字段，但它永远不会显示。我已将其移至记录格式的其他位置，但问题仍然存在。我还尝试将其移动到显示在同一屏幕上的另一种记录格式，这一次它可以工作。出现这种情况可能出了什么问题？

```
 R XT99901                SFLCTL(XT99902)
                               SFLSIZ(0011)
                               SFLPAG(0005)
                               SFLDSP
                               SFLDSPCTL
02                             SFLCLR
03                             SFLEND
                               BLINK
                               LOCK
                               PUTOVR
                               OVERLAY
                               CA05
    .
    .
    .
                           4  2'Status'     
        S1STUS     15A  O  4 14COLOR(RED) 
```

字段 S1STUS 是有问题的字段。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:25:52.403

当您使用[PUTOVR](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/rzakc/rzakcmstdfputov.htm)时，您需要在要更改的每个输出字段上指定[OVRDTA 。](http://publib.boulder.ibm.com/infocenter/iseries/v5r4/topic/rzakc/rzakcmstdfovdta.htm)将 OVRDTA 关键字添加到 S1STUS 并查看是否有帮助。

# networking - IM 应用程序如何让用户在不同 LAN 之间传输文件

> ID：13068316
> 
> 赞同：1
> 
> 时间：2012-10-25T12:13:22.800
> 
> 标签：networking, tcp, connection, lan

我正在开发一个与网络相关的程序，并且存在客户端必须连接到局域网内的服务器的情况。

据我所知，在建立 TCP 连接时，服务器正在侦听的端口必须可供客户端访问。如果服务器位于 LAN 内，则端口访问会被路由器阻止。我知道的一种解决方案是使用 UPnP 在路由器上执行端口映射。但是，在某些情况下，路由器不支持 UPnP，是否有其他解决方案？

我想到了 IM 应用程序。许多 IM 应用程序具有用户可以相互发送文件的功能，无论网络环境如何，只要您可以访问 Internet。我不认为公共服务器用作两者之间的文件数据交换器，连接必须是直接连接。他们实际上如何使客户端连接到“隐藏”服务器？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:15:29.567

如果 uPnP 或开放端口不能在一端或另一端完成，那么剩下的唯一选择似乎是通过中间的服务器传递它

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:27:26.313

通常，此类程序会尝试一系列步骤：

1.  A直接连接到B
2.  B 直接连接到 A
3.  A 尝试连接到防火墙 (uPnP) 转发端口到 B
4.  B 尝试连接到防火墙 (uPnP) 转发端口到 A
5.  A 和 B 都连接到中央服务器并通过该服务器交换数据

最后一步显然是最不受欢迎的，因为提供商必须有足够的资源来管理所有同时传输。速率限制很常见。

由于 IM 无论如何都有中央管理，因此协调这一切并不难。

# batch-file - uTorrent 运行程序问题

> ID：13068321
> 
> 赞同：0
> 
> 时间：2012-10-25T12:13:47.120
> 
> 标签：batch-file, winrar, utorrent

嗨，当下载准备好时，我在尝试从 uTorrent 运行寡妇批处理脚本时遇到问题。

该脚本非常基本，只会解压缩文件夹中的任何 rarfiles 并创建一些日志文件。当我在 cmd 中运行该脚本时，该脚本运行良好，但是当 uTorrent 运行该脚本时，除了 unrar 行之外，一切正常。这意味着创建了所有日志文件，因此我知道我的参数是正确的。

```
:: BEGIN TORRENT_DONE.BAT 
:: 
:: In uTorrent 'Run Program' 
:: enter data like: 
:: H:\TORRENT_DONE.BAT "%D" "%N" :: 
:: INCLUDE QUOTE MARKS :: 

@ECHO OFF 
SET JOBDIR=%~1 
SET JOBNAME=%~2 
CD/D "%JOBDIR%" 
>JOB_"%JOBNAME%".LOG ECHO.%JOBNAME% 
>>JOB_"%JOBNAME%".LOG ECHO. 
IF EXIST *.RAR GOTO :UNPACK_RAR 
GOTO :NO_UNPACK 

:UNPACK_RAR
>>JOB_"%JOBNAME%".LOG ECHO.FOUND RAR FILES 
unrar x *.rar >>JOB_"%JOBNAME%".LOG 
GOTO :DONE 

:NO_UNPACK 
>>JOB_"%JOBNAME%".LOG ECHO.NO FILES FOUND TO UNPACK 
>>JOB_"%JOBNAME%".LOG DIR/B 

:DONE 
>>JOB_"%JOBNAME%".LOG ECHO.Im Done!
::
:: END TORRENT_DONE.BAT 
```

可能是什么问题，可能是 uTorrents 没有正确的权限来运行 winrar 或类似的东西？

另外，我的路径是在环境变量中设置的，所以这不是这里的问题。

感谢您在此问题上提供的任何帮助。最好的问候埃米尔

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:18:16.837

这不是真正的编程问题，因此您的问题可能会被转移。

如果是权限问题，您是否尝试以管理员权限运行 Utorrent？

# android - 使用 FFmpeg 将 Android 屏幕捕获为视频文件

> ID：13068327
> 
> 赞同：0
> 
> 时间：2012-10-25T12:13:57.683
> 
> 标签：android, ffmpeg, framebuffer

我正在尝试通过以下命令使用 FFmpeg 将 Android 设备的屏幕捕获为视频文件：

```
/data/local/ffmpeg -y -vcodec rawvideo -f rawvideo -pix_fmt rgb32 -s 320x480 -i /dev/graphics/fb0 /sdcard/output2.avi 2> /sdcard/out.txt 
```

这将创建一个带有单个（不清楚）框架的文件并停止。

```
ffmpeg version 0.11.1 Copyright (c) 2000-2012 the FFmpeg developers
  built on Sep 20 2012 13:28:38 with gcc 4.6.x-google 20120106 (prerelease)
  configuration: --arch=arm --cpu=cortex-a8 --target-os=linux --enable-runtime-cpudetect --prefix=/data/data/org.witness.sscvideoproto --enable-pic --disable-shared --enable-static --cross-prefix=/opt/android-ndk/toolchains/arm-linux-androideabi-4.6/prebuilt/linux-x86/bin/arm-linux-androideabi- --sysroot=/opt/android-ndk/platforms/android-3/arch-arm --extra-cflags='-I../x264 -mfloat-abi=softfp -mfpu=neon' --extra-ldflags=-L../x264 --enable-version3 --enable-gpl --disable-doc --enable-yasm --enable-decoders --enable-encoders --enable-muxers --enable-demuxers --enable-parsers --enable-protocols --enable-filters --enable-avresample --enable-libfreetype --disable-indevs --enable-indev=lavfi --disable-outdevs --enable-hwaccels --enable-ffmpeg --disable-ffplay --disable-ffprobe --disable-ffserver --disable-network --enable-libx264 --enable-zlib
  libavutil      51\. 54.100 / 51\. 54.100
  libavcodec     54\. 23.100 / 54\. 23.100
  libavformat    54\.  6.100 / 54\.  6.100
  libavdevice    54\.  0.100 / 54\.  0.100
  libavfilter     2\. 77.100 /  2\. 77.100
  libswscale      2\.  1.100 /  2\.  1.100
  libswresample   0\. 15.100 /  0\. 15.100
  libpostproc    52\.  0.100 / 52\.  0.100
[rawvideo @ 0xee5540] Estimating duration from bitrate, this may be inaccurate
Input #0, rawvideo, from '/dev/graphics/fb0':
  Duration: N/A, start: 0.000000, bitrate: N/A
    Stream #0:0: Video: rawvideo (BGRA / 0x41524742), bgra, 320x480, 25 tbr, 25 tbn, 25 tbc
[buffer @ 0xef16e0] w:320 h:480 pixfmt:bgra tb:1/25 sar:0/1 sws_param:flags=2
[buffersink @ 0xef1950] No opaque field provided
[format @ 0xef1a70] auto-inserting filter 'auto-inserted scaler 0' between the filter 'src' and the filter 'format'
[scale @ 0xef2c10] w:320 h:480 fmt:bgra sar:0/1 -> w:320 h:480 fmt:yuv420p sar:0/1 flags:0x4
Output #0, avi, to '/sdcard/output2.avi':
  Metadata:
    ISFT            : Lavf54.6.100
    Stream #0:0: Video: mpeg4 (FMP4 / 0x34504D46), yuv420p, 320x480, q=2-31, 200 kb/s, 25 tbn, 25 tbc
Stream mapping:
  Stream #0:0 -> #0:0 (rawvideo -> mpeg4)
Press [q] to stop, [?] for help
frame=    5 fps=0.0 q=5.4 Lsize=     199kB time=00:00:00.20 bitrate=8156.6kbits/s    
video:193kB audio:0kB global headers:0kB muxing overhead 2.929166% 
```

知道我在做什么错吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:21:46.427

[http://www.mail-archive.com/android-porting@googlegroups.com/msg17709.html](http://www.mail-archive.com/android-porting@googlegroups.com/msg17709.html)

`adb shell ioctl -rl 28 /dev/graphics/fb0 17920`

最后 4 个字节是 bits_per_pixel

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-03-06T05:12:12.890

-i /dev/graphics/fb0 只读取 fb0 一次，所以你只能得到一个帧。ffmpeg 不会一直读取 fb0 。使用命令行，您将无法获得此功能。

# sql-server - 在选择查询的存储过程中需要帮助

> ID：13068329
> 
> 赞同：0
> 
> 时间：2012-10-25T12:14:01.833
> 
> 标签：sql-server

我正在尝试根据名字和姓氏获取数据。我有两个彼此的数据库副本，除了一个数据库中的一些额外数据。下面是相同的存储过程。问题是我希望获取数据的第一部分（即，如果我搜索 ar，它应该显示以 ar 开头的名称，如 arron，而不是在中间，如 Sharon）。查询在一个数据库上运行良好，而在另一个数据库上运行良好。

```
 ALTER PROCEDURE [dbo].[SEARCH]
(
@firstName nvarchar(50),
@lastName nvarchar(50),
@state nvarchar(50),
@county nvarchar(50),
@searchspan nvarchar(5)
)
AS

BEGIN 
declare @queryString nvarchar(max)
declare @countyId nvarchar(50)
SET QUOTED_IDENTIFIER OFF 

Create table #temp1(
county nvarchar(50) NULL,
ID nvarchar(50) NULL,
name nvarchar(200) NULL,
state nvarchar(50) NULL,
FirstName nvarchar(50) NULL,
LastName nvarchar(50) NULL,
county nvarchar(50) NULL,
)
set @queryString = 'insert into #temp1 select  distinct a.Source as county, a.ID as ID, a.FirstName +'' ''+ a.LastName as name, ''' +
 @state +''' as state,a.FirstName,a.LastName,b.county, from Person a, CountySite b where 1=1 and a.Source=b.sourcecounty '

 if(@searchspan<>'')
 BEGIN
 set @queryString = @queryString  = 1'
 END
  EXECUTE  sp_executesql  @queryString
  set @queryString ='select county, ID, name, state,col_FirstName,col_LastName,col_county, from #temp1 where 1=1 '
 if(@firstName <> '')
BEGIN 
 set @queryString = @queryString+ ' and UPPER(col_FirstName) like ''' +@firstName +'%'''
END
if(@lastName <> '')
BEGIN 
 set @queryString = @queryString + ' and UPPER(col_LastName) like ''' +@lastName +'%'''
drop table #temp1
END 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:19:37.050

您是否有探查器，以便您可以看到正在第二个数据库上执行的查询？只是为了确保它是一样的。只是为了微笑，您可能想尝试在数据库上删除并重新执行 SP。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:48:17.747

TSQL 不区分大小写，不需要使用 UPPER

还将您的查询更改为

```
set @queryString = @queryString + ' and col_LastName like @lastName +'%' 
```

试试这个

```
SET @queryString = @queryString + ' AND col_LastName  LIKE '''+@lastName +'%''' 
```

# html - 前一个块下方的 CSS 布局块

> ID：13068334
> 
> 赞同：1
> 
> 时间：2012-10-25T12:14:18.363
> 
> 标签：html, css

如何在第一块下面制作第三块？

现在第三块低于第二块。

演示[http://jsfiddle.net/SdR6e/1/](http://jsfiddle.net/SdR6e/1/)

HTML

```
<!DOCTYPE html>
<html>
    <body>
        <div style="width: 400px;">
            <div class="semiblock" style="height: 200px;">
                First
            </div>
            <div class="semiblock" style="height: 100px;">
                Second
            </div>
            <div class="semiblock" style="height: 200px;">
                Third
            </div>
            <div class="semiblock" style="height: 200px;">
                Fourth
            </div>
        </div>
    </body>
</html>​ 
```

CSS

```
 .semiblock {
        border: 1px solid black;
        float: left;
        margin: 0;
        width: 198px;
    }​ 
```

我需要这个：

![在此处输入图像描述](../Images/62592449daabf4f2b01eb75436588d63.png)

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:17:26.633

尝试`clear:both`像这样插入： **[DEMO](http://jsfiddle.net/SdR6e/7/)**

HTML

```
<!DOCTYPE html>
<html>
    <body>
        <div style="width: 400px;">
            <div class="semiblock" style="height: 200px;">
                First
            </div>
            <div class="semiblock" style="height: 100px;">
                Second
            </div>
            <div class="clear">
            </div>
            <div class="semiblock" style="height: 200px;">
                Third
            </div>

            <div class="semiblock" style="height: 200px;">
                Fourth
            </div>
        </div>
    </body>
</html>​ 
```

CSS：

```
 .semiblock {
            border: 1px solid black;
            float: left;
            margin: 0;
            width: 198px;
}
.clear {
    clear:both;
} 
```

​</p>

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:28:32.737

“Alessandro Minoccheri”的方法很好（+1），

但是您还想在第三个块中添加“clear：left”值：

```
<!DOCTYPE html>
<html>
    <body>
        <div style="width: 400px;">
            <div class="semiblock" style="height: 200px;">
                First
            </div>
            <div class="semiblock" style="height: 100px;">
                Second
            </div>
            <div class="semiblock" style="height:200px;clear:left;">
                Third
            </div>
            <div class="semiblock" style="height: 200px;">
                Fourth
            </div>
        </div>
    </body>
</html> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:40:01.627

请使用下面的 HTML .. 并使用相同的 CSS 或者我已经更新了你给定的小提琴。请使用以下网址进行检查。

[http://jsfiddle.net/SdR6e/11/](http://jsfiddle.net/SdR6e/11/)

```
 <div style="width: 400px;">
        <div class="semiblock" style="height: 200px;">
            First
        </div>
        <div class="semiblock" style="height: 100px;">
            Second
        </div><div style='clear:both;'></div>
        <div class="semiblock" style="height: 200px;">
            Third
        </div>
        <div class="semiblock" style="height: 200px;">
            Fourth
        </div>
    </div> 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T12:17:06.010

这是解决方案：http: [//jsfiddle.net/SdR6e/2/](http://jsfiddle.net/SdR6e/2/)

`clear:both;`当您希望下一个元素位于另一个元素下方时使用。

如果您将其与多个块一起使用，则将其写入一个类并将类添加到目标元素。

```
.clearall{
  clear:both;
} 
```

# mongodb - 使用 Java 从原始查询中获取 MongoDB 结果

> ID：13068338
> 
> 赞同：0
> 
> 时间：2012-10-25T12:14:29.957
> 
> 标签：mongodb

我试图了解 MongoDB 与传统 RDBMS 相比有多快。为此，我使用 Java 尝试通过定义一个 MongoDB 函数来获取传统 SQL 连接的结果，该函数将在嵌入另一个对象后返回一个对象：

```
s_with_user = function(rows){
  var result=[]
  db.subscriptions.find().limit(rows).forEach( function(s) { 
    s.user= db.users.find({id: s.user_id});
    result.push( s );
  });
  return result;
} 
```

然后，我使用：

```
DB db = new Mongo("localhost", 27017).getDB("test");
Object result = db.eval("s_with_user(1000)"); 
```

测量最后一条语句所用的时间，我确信 MongoDB 正在运行命令并评估我想要的数据。但是，`result`对象始终是`null`。

如何以可以检查结果的方式执行此操作？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:02:02.917

首先，Stennie 关于 eval() 不是在 MongoDB 中进行连接的正确方法是正确的。

但是，要尝试回答您的问题，它将以这种方式工作：

```
   字符串 f = "函数（行）{ ... }";
   DB db = new Mongo("localhost", 27017).getDB("test");
   对象结果 = db.eval( f, 1000 );

```

此外，您的“加入”功能需要一个小的更正：它应该使用`findOne`而不是`find`：

```
   s.user = db.users.findOne({id: s.user_id});   

```

# java - java调用方法不输出任何内容

> ID：13068344
> 
> 赞同：0
> 
> 时间：2012-10-25T12:14:43.967
> 
> 标签：java, list

我有一个方法，它需要一个 IP，接收数据并将其存储在一个列表中。在方法结束时，它返回此列表。但是，当调用此方法时，列表为空。我认为这是一个非常简单的解决方法，而且我很愚蠢，但是有人能指出我哪里出错了，所以我不再这样做了吗？

```
public List<String> receiveDataFromOperator(){
    List<String> dataRec = new ArrayList<String>();

    try
    {

        System.out.println("Client Program");

        //Hard coded IP Address
        String ip = "146.176.226.147";

        //Hard coded port
        int port = 500;
        // Connect to the server
        Socket sock = new Socket(ip, port);

        // Create the incoming stream to read messages from
        DataInputStream network = new DataInputStream(sock.getInputStream());

        // Display our address
        System.out.println("Address: " + sock.getInetAddress());
        String line;

        // Loop until the connection closes, reading from the network
        while ((line = network.readUTF()) != null)
        {
            dataRec.add(line);

        }

        sock.close();
    }
    catch (IOException ioe)
    {

        //Test output for the arraylist size
        System.out.println(dataRec.size());

        for(int i = 0; i<dataRec.size(); i++){
            System.out.println("Line " + i + dataRec.get(i) + "\n");

        }

    }// End of catch

    return dataRec;

}//End of method 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:18:44.697

如果服务器正在使用它写入*二进制*数据，`DataOutputStream.writeUTF()`它应该可以工作。

如果您从服务器发送*文本*`BufferedReader.readLine()`，您需要使用.

顺便说一句：当你得到一个 IOException 时，你通常不应该忽略它并假装它没有发生，尤其是。当程序未按预期运行时。

# javascript - 强制函数覆盖其他操作

> ID：13068350
> 
> 赞同：0
> 
> 时间：2012-10-25T12:15:04.557
> 
> 标签：javascript, jquery, html, contenteditable

我试图让一些`contenteditable`元素工作。显然，仅使用一个简单的 HTML5 属性就非常容易，但我希望能够使用该属性切换元素的数量并切换属性本身。例如，我的起始元素是 this `<article class="column contentEditable">`，然后使用 class of`contentEditable`来切换`contenteditable`属性。但是因为我根据用户选择的内容复制了这个元素多次 - 我需要将`.focus()`操作作为函数运行，然后在`articles`添加更多内容时调用该函数。跟我到现在？希望如此。

这是我到目前为止的 jQuery（记住另一个函数将类设置`contentEditable`为具有属性`contenteditable`）

```
// content edittable
function makeEditable(action){  
$('.contentEditable').focus(function(){
    $(this).addClass('active');
    $(this).prepend('<div class="toolbar" contenteditable="false">TEST</div>');
});
$('.contentEditable').blur(function(){
    $(this).removeClass('active');
    $(this).remove('.toolbar');
    alert('test');
});
} 
```

在某种程度上，这完美地工作，但是因为`article`之前发出此 DOM 调用时可能已经存在，这意味着它运行了两次或更多次（取决于我在选择中更改选项的次数。如何地球我可以让每个项目只运行一次的功能，即不堆栈。

希望这一切都有意义，很难解释。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:53:43.690

这是一个简单的例子，`process`在它上面有一个类只运行一次，每次`.focus`运行它都会删除`process`该类。真的很简单，休息后新鲜的眼睛会有所帮助。谢谢。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:32:17.037

我认为这里发生的事情是，每次用户选择要编辑的元素时，您都在调用 makeEditable 函数（如果我理解您的工作流程正确的话）。如果发生这种情况，您每次都添加一个新的焦点和模糊事件，这将导致事件多次触发。

我推荐的是这样的：

```
function addElement(containerElement) {
    // containerElement is a string with the jQuery selector of the parent element
    var el = $('<article class="column contentEditable"></article>').appendTo(containerElement);
    el.focus(function(){
        $(this).addClass('active');
        $(this).prepend('<div class="toolbar" contenteditable="false">TEST</div>');
    });
    el.blur(function(){
        $(this).removeClass('active');
        $(this).remove('.toolbar');
        alert('test');
    });
}

function toggleEditable(el) { 
    // here el is a string with the jQuery selector of the element
    $(el).toggleClass('contentEditable');
} 
```

# internet-explorer - SVG 字体因浏览器而异

> ID：13068352
> 
> 赞同：1
> 
> 时间：2012-10-25T12:15:14.513
> 
> 标签：internet-explorer, google-chrome, fonts, svg, adobe-illustrator

希望只是一个快速的问题 - 我朋友的徽标是 SVG 图像，它在 Chrome 中看起来很完美 - （使用 Futura/Helvetica 字体），但在 IE 中（可能还有其他浏览器？）字体（和字距调整）完全不同。如果需要，我可以提供图片。

有没有办法可以保存阻止浏览器篡改字体？保持它在 Illustrator/Chrome 中的外观？我宁愿将其保留为 SVG，也不愿将其转换为 PNG 或其他任何东西。

我有一种感觉这是一个转贴（虽然我找不到答案） - 对不起！

提前致谢 ：）

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:22:17.920

将文本转换为路径将在文件中存储每个字母的确切几何形状，但代价是使文件更大一些。这是一篇关于如何做到这一点的文章：http: [//help.adobe.com/en_US/illustrator/cs/using/WS714a382cdf7d304e7e07d0100196cbc5f-63d0a.html#WS18156339-458C-45e1-8CD0-DD7931678BBE](http://help.adobe.com/en_US/illustrator/cs/using/WS714a382cdf7d304e7e07d0100196cbc5f-63d0a.html#WS18156339-458C-45e1-8CD0-DD7931678BBE)

# r - 如何计算数组中的值

> ID：13068355
> 
> 赞同：0
> 
> 时间：2012-10-25T12:15:24.277
> 
> 标签：r, count

如何计算多集中的值？我有一个数据集，我想为频率表编写一个函数。所以我现在在我的数据中存在哪些异常。数据是一个数组，如下所示：

```
 GSM288217   GSM288219 GSM288221
ch1_500001   NA          NA        NA       
ch1_1500001  "Imbalance" "Balance" "Balance"
ch1_2500001  "Imbalance" "Balance" "Balance"
ch1_3500001  "Imbalance" "LOH"     "Balance"
ch1_4500001  "Imbalance" "LOH"     "Balance"
ch1_5500001  "Imbalance" "LOH"     "Balance"
ch1_6500001  "Imbalance" "LOH"     "Balance"
ch1_7500001  "Imbalance" "LOH"     "Balance"
ch1_8500001  "Imbalance" "LOH"     "Balance"
ch1_9500001  "Imbalance" "LOH"     "Balance"
ch1_10500001 "Imbalance" "LOH"     "Balance"
ch1_11500001 "Imbalance" "LOH"     "Balance"
ch1_12500001 "Imbalance" "LOH"     "Balance"
ch1_13500001 "Imbalance" "LOH"     "Balance"
ch1_14500001 "Imbalance" "LOH"     "Balance"
ch1_15500001 "Imbalance" "LOH"     "Balance"
ch1_16500001 "Imbalance" "LOH"     "Balance"
ch1_17500001 "Imbalance" "LOH"     "Balance"
ch1_18500001 "Imbalance" "LOH"     "Balance"
ch1_19500001 "Imbalance" "LOH"     "Balance" 
```

现在我希望该函数检查每行数据中存在多少某种异常。我开始：

```
detection<- function(abnormality) {
  freqcount<-rep(0,nrow(abnormality))
  if(assayDataElement(abnormality, 1)=="LOH")#TRUE & FALSE?? Need frequency
    {freqcount<-freqcount+1
     }          
  return(freqcount)

} 
```

因此，每次数据行中存在 LOH 时，它都应该给出该行中存在的 LOH 数量。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:25:29.697

我猜你需要

```
length(which(assayDataElement(abnormality, 1)=="LOH")) 
```

或单独为每一行：

```
count <- function(x,what) length(which(x==what));
apply(assayDataElement(abnormality, 1),1,count,"LOH"); 
```

# iphone - 如何使用准确的框架和展示位置 ID 启动 revmob 横幅广告？

> ID：13068356
> 
> 赞同：2
> 
> 时间：2012-10-25T12:15:27.417
> 
> 标签：iphone, ios, xcode, ipad, revmob

我尝试使用 RevMob 的建议代码来显示具有特定展示位置 ID 的横幅广告，但没有成功，尝试了以下代码：

```
RevMobAds *revmob = [RevMobAds revMobAds];
        RevMobBanner *banner = [revmob bannerWithPlacementId:@"ID_FROM_REV_MOB"];
        [banner showAd]; 
```

甚至尝试添加以下语句

```
if (IS_iPad) {
        banner.frame =  CGRectMake(0, 958, 768, 66);
    } else if (IS_WIDESCREEN){
        banner.frame = CGRectMake(0, 518, 320, 50);
    } else {
        banner.frame = CGRectMake(0, 430, 320, 50);
    } 
```

但没有成功，我能够展示横幅广告的唯一方法是：

```
[RevMobAds showBannerAdWithFrame:CGRectMake(0, 958, 768, 66) withDelegate:self]; 
```

但是添加展示位置 ID 并没有帮助。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T15:32:53.847

我认为您需要改为使用 RevMobBannwerView 来执行以下操作：

```
RevMobAds *revmob = [RevMobAds revMobAds];
        RevMobBannerView *revBannerView = [revmob bannerViewWithPlacementId:@"ID_FROM_REV_MOB"];
        if (IS_iPad) {
            revBannerView.frame =  CGRectMake(0, 958, 768, 66);
        } else if (IS_WIDESCREEN){
            revBannerView.frame = CGRectMake(0, 518, 320, 50);
        } else {
            revBannerView.frame = CGRectMake(0, 430, 320, 50);
        }
        [revBannerView loadAd];
        [self.view addSubview:revBannerView];
        [self.view bringSubviewToFront:revBannerView]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2013-06-10T14:06:20.080

当我在我的项目中添加它（RevMob 5.9 版）时。我这样做：

```
[RevMobAds startSessionWithAppID:@"my id"];
RevMobBannerView *ad = [[RevMobAds session] bannerView]; // you must retain this object
[ad loadWithSuccessHandler:^(RevMobBannerView *banner) {
    banner.frame = CGRectMake(0, 381, 320, 50);
    [self.window.rootViewController.view addSubview:banner];
    NSLog(@"Ad loaded");
} andLoadFailHandler:^(RevMobBannerView *banner, NSError *error) {
    NSLog(@"Ad error: %@",error);
} onClickHandler:^(RevMobBannerView *banner) {
    NSLog(@"Ad clicked");
}]; 
```

# c# - 检查元素是否有属性

> ID：13068358
> 
> 赞同：0
> 
> 时间：2012-10-25T12:15:32.647
> 
> 标签：c#, generics, reflection

我正在尝试创建扩展方法来检查特定对象是否具有特定属性。

我找到了使用以下语法检查它的示例：

```
private static bool IsMemberTested(MemberInfo member)
{
foreach (object attribute in member.GetCustomAttributes(true))
    {
        if (attribute is IsTestedAttribute)
        {
           return true;
        }
    }
return false;
} 
```

现在我正在尝试执行以下操作：

```
 public static bool HasAttribute<T>(this T instance, Type attribute)
    {
        return typeof(T).GetCustomAttributes(true).Any(x => x is attribute);
    } 
```

但是我收到消息“缺少类型或命名空间‘属性’......”

我做错了什么并且与给定的示例不同/我怎样才能做到这一点？

编辑：

感谢您的提示，我现在已经设法做到了：

```
 public static bool HasAttribute<T>(this T instance, Type attribute)
    {
        return typeof(T).GetCustomAttributes(attribute, true).Any();
    } 
```

检查属性是这样的：

```
var cc = new CustomClass();
var nullable = cc.HasAttribute(typeof(NullableAttribute)); 
```

谢谢你们的帮助。现在我有另一个问题。假设我想用属性装饰类的属性，字符串类型的属性，并想稍后检查该属性是否具有属性。由于这仅适用于类型，因此我无法将其应用于属性级别。房产检查有什么解决办法吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:20:58.537

您不能将`Type`变量用作`is`运算符的参数。此外，没有必要`Any`自己过滤这个，因为`GetCustomAttributes`它会为你做一个超载。

我已经为类似的功能编写了这个扩展方法（我的是将应用到类的单个属性返回）：

```
 internal static AttributeType GetSingleAttribute<AttributeType>(this Type type) where AttributeType : Attribute
    {
        var a = type.GetCustomAttributes(typeof(AttributeType), true);
        return (AttributeType)a.SingleOrDefault();
    } 
```

您可以修改它以返回一个布尔值`a != null`，而不是获取您要查找的内容。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:41:46.943

我已经就如何检查简单类型的属性属性提出了解决方案：

```
 public static bool HasPropertyAttribute<T>(this T instance, string propertyName, Type attribute)
    {
        return Attribute.GetCustomAttributes(typeof(T).GetProperty(propertyName), attribute, true).Any();
    } 
```

调用是这样的：

```
var cc = new CustomClass();
cc.HasPropertyAttribute("Name", typeof(NullableAttribute)); 
```

# sql - 如何使用触发器刷新物化视图？

> ID：13068366
> 
> 赞同：3
> 
> 时间：2012-10-25T12:15:49.190
> 
> 标签：sql, oracle, triggers, oracle10g, materialized-views

```
create or replace TRIGGER REFRESH_REST_VIEW
 AFTER
  INSERT OR UPDATE
 ON tbl_contract
BEGIN
    execute DBMS_MVIEW.REFRESH('REST_VIEW');
END REFRESH_REST_VIEW;
commit; 
```

这是我用来刷新物化视图的 sql 触发器。但它说..

```
Warning: execution completed with warning
TRIGGER REFRESH_REST_VIEW Compiled. 
```

PS：当表的数据（由物化视图使用）进行任何DML操作时，将执行触发器。

我已经用谷歌搜索了足够多的帖子，很多帖子说这是可能的，但我不知道该怎么做。我尝试使用常规触发器语法，但它不起作用。

> **更新：**

现在我正在尝试对过程和触发器进行相同的操作..

```
create or replace
PROCEDURE Rfresh_mate_views AS
  BEGIN
   DBMS_MVIEW.REFRESH('REST_VIEW');
  END Rfresh_mate_views;

create or replace trigger refresh_company_mview
after insert or update ON BCD.BCD_COMPANY
begin
RFRESH_MATE_VIEWS(); 
end refresh_company_mview; 
```

全部已成功编译，但在表中更新时显示：

```
ORA-04092: cannot COMMIT in a trigger
ORA-06512: at "SYS.DBMS_SNAPSHOT", line 2449
ORA-06512: at "SYS.DBMS_SNAPSHOT", line 2429
ORA-06512: at "BCD.RFRESH_MATE_VIEWS", line 3
ORA-06512: at "BCD.REFRESH_COMPANY_MVIEW", line 2
ORA-04088: error during execution of trigger 'BCD.REFRESH_COMPANY_MVIEW' 
```

* * *

## 回答 #1

> 赞同：14
> 
> 时间：2012-10-25T14:03:41.867

在触发器中刷新物化视图没有意义。

您可以通过删除单词来解决语法错误`EXECUTE`

```
create or replace TRIGGER REFRESH_REST_VIEW
 AFTER
  INSERT OR UPDATE
 ON tbl_contract
BEGIN
    DBMS_MVIEW.REFRESH('REST_VIEW');
END REFRESH_REST_VIEW; 
```

这将导致触发器编译。但是，当您尝试执行 an`INSERT`或 an `UPDATE`against 时`tbl_contract`，您现在将收到一个运行时错误，您不允许在触发器中提交，因为刷新物化视图会执行隐式提交，并且您无法在触发器内提交。

```
SQL> create table foo( col1 number );

Table created.

SQL> create materialized view mv_foo
  2  as
  3  select *
  4    from foo;

Materialized view created.

SQL> create trigger trg_foo
  2    after insert or update on foo
  3  begin
  4    dbms_mview.refresh( 'MV_FOO' );
  5  end;
  6  /

Trigger created.

SQL> insert into foo values( 1 );
insert into foo values( 1 )
            *
ERROR at line 1:
ORA-04092: cannot COMMIT in a trigger
ORA-06512: at "SYS.DBMS_SNAPSHOT", line 2760
ORA-06512: at "SYS.DBMS_SNAPSHOT", line 2740
ORA-06512: at "SCOTT.TRG_FOO", line 2
ORA-04088: error during execution of trigger 'SCOTT.TRG_FOO' 
```

您可能会尝试通过消除事务完整性并在自治事务中进行刷新来解决该问题。这将消除 ORA-04092 错误，但随后物化视图将不会包含作为首先触发触发器的事务的一部分插入或更新的未提交数据，这违背了刷新物化视图的整个目的。

正确的方法是首先不使用触发器。正确的方法是定义物化视图以在提交时刷新自身-- `REFRESH FAST ON COMMIT`。由于您收到无法`ON COMMIT`在物化视图上设置属性的错误，因此您需要查看数据仓库指南中列出的[快速刷新限制，](http://docs.oracle.com/cd/B19306_01/server.102/b14223/basicmv.htm#sthref534)并确保您的物化视图应该是可快速刷新的。然后，您可以使用[dbms_mview.explain_mview 过程](http://www.orafaq.com/node/831)来告诉您为什么物化视图不符合在提交时增量刷新的条件。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-04-01T09:25:38.713

其他选项请参考以下链接

[http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:352126355153](http://asktom.oracle.com/pls/apex/f?p=100:11:0::::P11_QUESTION_ID:352126355153)

# soapui - 如何控制soapUI testrunner中的日志级别？

> ID：13068369
> 
> 赞同：7
> 
> 时间：2012-10-25T12:16:01.617
> 
> 标签：soapui

我正在使用 testrunner.bat 运行soapUI 测试。一切都很好，只是它的日志级别是 DEBUG 并且我的测试运行过于冗长。请有人指导我如何设置日志级别？

# c# - 调用 Javascript OnChange 事件

> ID：13068371
> 
> 赞同：1
> 
> 时间：2012-10-25T12:16:03.997
> 
> 标签：c#, onchange, invoke, mshtml

我有一段时间第一次被困住了。这些天来，我使用 HtmlAgilityPack 来获取 Web 抓取信息，但对于动态数据，我必须首先使用浏览器控件。我在 IE 和 Visual Studios Webbrowser 控件上未能触发 OnChange Javascript 代码，所以我必须寻求帮助。

链接在这里： [http ://www.abetterstay.com/propertydetail.aspx?cin=10/30/2012&cout=11/01/2012&c=1989](http://www.abetterstay.com/propertydetail.aspx?cin=10/30/2012&cout=11/01/2012&c=1989)

我需要触发：`onchange="OnSelectRoomChange(this);"`

```
<select name="ctl00$ContentPlaceHolderHeader$Booking1$selectBedrooms" id="ctl00_ContentPlaceHolderHeader_Booking1_selectBedrooms" class="select_bedrooms" onchange="OnSelectRoomChange(this);">
    <option selected="selected" value="5238">1 bedroom/2 bathroom gulf front view</option>
    <option value="5239">2 bedroom/2 bathroom gulf front view</option>
    <option value="5240">3 bedroom/3 bathroom gulf front view</option>
</select> 
```

有人请告诉我需要做什么..我所有的尝试都失败了。我可以更改选定的值，但当然不会触发。

这是一个失败...

```
HTMLWindow2 iHtmlWindow2 = (HTMLWindow2)doc.Script;
iHtmlWindow2.execScript("OnSelectRoomChange(this);", "javascript"); 
```

# javascript - 检索 You Tube 页面信息的代码

> ID：13068374
> 
> 赞同：0
> 
> 时间：2012-10-25T12:16:25.463
> 
> 标签：javascript, youtube-api

我正在开展一个旨在改进 You Tube 视频分类的项目，这是基于一篇研究论文。最初我需要收集 You Tube 数据集，其中包括视频的评论、标签、描述、视频的喜欢、标题。有现成的数据集可用，但我想使用 You Tube API 来完成。谁能告诉我如何从示例代码开始，而且我对要使用的编码平台感到困惑。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-26T13:13:07.257

你可以试试这个示例应用程序：

[http://gdata.youtube.com/demo/index.html](http://gdata.youtube.com/demo/index.html)

有 Java、Javascript、.Net、PHP、Python、Objective-C 的客户端库。

[https://developers.google.com/youtube/code](https://developers.google.com/youtube/code)

# php - 通过多个条件查找表中的重复记录

> ID：13068375
> 
> 赞同：5
> 
> 时间：2012-10-25T12:16:25.557
> 
> 标签：php, mysql

```
+-------------------------+
| SKU  |  UPC  |   NAME   | INVID
+-------------------------+
| 001  |  111  |   NAME1  |  1
| 001  |  null |   NAME2  |  2
| 0-1  |  111  |   NAME3  |  3
| -01  |  111  |   NAME4  |  4
| 002  |  222  |   NAME5  |  5
| 002  |  null |   NAME6  |  6
| 003  |  333  |   NAME7  |  7
+-------------------------+ 
```

我想通过两个标准在这个表中找到重复的记录。首先是SKU，其次是UPC。在这种情况下，重复记录是 [1,2,3,4] 和 [5,6]。行 [1,2] 是重复的，因为 sku 编号匹配。行 [1,3,4] 是重复的，因为 UPC 编号匹配。第一个重复组应如下所示：

**第 1 组***

```
+-------------------------+
| 001  |  111  |   NAME1  |  1
| 001  |  null |   NAME2  |  2
| 0-1  |  111  |   NAME3  |  3
| -01  |  111  |   NAME4  |  4
+-------------------------+ 
```

第二个重复组应如下所示：

**组2***

```
+-------------------------+
| 002  |  222  |   NAME5  |  5
| 002  |  null |   NAME6  |  6
+-------------------------+ 
```

如何使用 mysql 查询找到这些组？如果我发现重复记录，我会在表中设置任何重复记录的 grouID* *** *。

我试过了，但没有显示所有重复项。

```
select sku, upc
from inv
WHERE sku is not null 
GROUP BY sku, upc HAVING count(sku)  > 1 OR count(upc)  > 1 
```

这是 SQL 模式：

[http://sqlfiddle.com/#!2/4d760/2](http://sqlfiddle.com/#!2/4d760/2)

此查询返回空结果。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:29:24.783

这是一个将重复条目显示为单个结果的查询：

```
select distinct i1.*
  from inv i1, inv i2
  WHERE i1.sku is not null AND 
    (i1.sku = i2.sku OR i1.upc = i2.upc) AND i1.idinv != i2.idinv
  ORDER BY idinv 
```

这是实现将表与自身连接并寻找不同的匹配。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:18:57.740

如果您有 2 个查询执行您想要的操作并返回相同的列，您可以使用 UNION 使它们显示为一个结果集。

这可能包括重复重复（出现在两个重复查询中的记录）

编辑：或使用子查询

```
select * from inv where upc in (select upc from inv group by upc having count(upc) > 1) 
union
select * from inv where sku in (select sku from inv group by sku having count(sku) > 1); 
```

（我现在必须回去工作，但希望这会让你走上解决问题的道路）

# javascript - Javascript：JavaScript 中的 BitAnd 函数

> ID：13068381
> 
> 赞同：0
> 
> 时间：2012-10-25T12:16:40.970
> 
> 标签：javascript

我想知道我们在 javascript 中是否有 BitAnd 操作？我们有吗？就像在 oracle 中一样。我试图在 google 中查找，但找不到。请建议我们是否有更好的功能。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:19:24.570

是的，有这样一个运营商：`&`。

```
var c = a & b; 
```

有关更多信息，请查看[有关位运算符的相应 MDN 文章](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Operators/Bitwise_Operators)。

# nlp - 使用 NLTK python 的因果句提取

> ID：13068386
> 
> 赞同：9
> 
> 时间：2012-10-25T12:17:08.800
> 
> 标签：nlp, nltk

我正在从水上事故报告中提取因果语句。我在这里使用 NLTK 作为工具。我通过采用 20 个因果句子结构手动创建了我的 regExp 语法 [参见下面的示例]。构造的语法是类型

```
grammar = r'''Cause: {<DT|IN|JJ>?<NN.*|PRP|EX><VBD><NN.*|PRP|VBD>?<.*>+<VBD|VBN>?<.*>+}''' 
```

现在语法在测试集上有 100% 的召回率（我建立了自己的玩具数据集，有 50 个因果句子和 50 个非因果句子），但精度很低。我想问一下：

1.  如何训练 NLTK 自动构建正则表达式语法以提取特定类型的句子。
2.  有没有人尝试过提取因果句子。示例因果句是：

    *   村里的卫生条件很差，因此她有健康问题。

    *   她村里的水不干净，因此她患上了寄生虫。

    *   由于村里的卫生条件差，她有健康问题。我只想从大文本中提取上述类型的句子。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T23:49:39.593

与本书的作者进行了简短的讨论：“Python Text Processing with NLTK 2.0 Cookbook”，Mr.Jacob Perkins。他说，“句子的通用语法非常困难。我想看看你是否能找到常见的标签模式并使用它们。但你基本上是通过正则表达式匹配进行分类。解析通常用于在一个句子, 或产生一个句子的深度解析树, 但你只是想识别/提取句子, 这就是为什么我认为分类是一种更好的方法. 当你尝试这个时, 考虑将标记的单词作为特征, 因为语法可能很重要。” 接受他的建议，我查看了我的因果句子，我发现这些句子有类似的词

```
consequently
as a result
Therefore
as a consequence
For this reason
For all these reasons
Thus
because
since
because of
on account of
due to
for the reason
so, that 
```

这些词确实在一个句子中连接了因果关系。使用这些连接器现在很容易提取因果句子。详细报告可以在 arxiv 上找到：[https ://arxiv.org/pdf/1507.02447.pdf](https://arxiv.org/pdf/1507.02447.pdf)

# android - 编辑名称的文本

> ID：13068389
> 
> 赞同：1
> 
> 时间：2012-10-25T12:17:12.640
> 
> 标签：android

我有一个经过编辑的文本，将名称作为用户输入。我需要限制除点（。）之外的所有特殊字符。这该怎么做？请参阅下面的代码

```
EditText Name= new EditText(this);
Name.setLayoutParams(new TableRow.LayoutParams(dp(220),dp(40)));
Name.setHorizontallyScrolling(true);        
Name.setTextSize(TypedValue.COMPLEX_UNIT_DIP, 15);
Name.setInputType(InputType.TYPE_TEXT_VARIATION_PERSON_NAME);
Name.setTypeface(Typeface.DEFAULT);
Name.setFilters(new InputFilter[]{new InputFilter.AllCaps()}); 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:23:44.387

在此处使用[inputType](http://developer.android.com/reference/android/widget/TextView.html#attr_android%3ainputType)是文档的链接，请参阅它

```
inputType="textPersonName" 
```

[http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType](http://developer.android.com/reference/android/widget/TextView.html#attr_android:inputType) 使用

```
NameEdt.setRawInputType(InputType.TYPE_TEXT_VARIATION_PERSON_NAME); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:28:49.610

试试这个

```
EditText editText = (EditText)findViewById(R.id.editText);
        InputFilter[] filters = new InputFilter[1];
        filters[0] = new InputFilter(){
            public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
                if (end > start) {

                    char[] acceptedChars = new char[]{'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 
                            'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
                            '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '.'};

                    for (int index = start; index < end; index++) {                                         
                        if (!new String(acceptedChars).contains(String.valueOf(source.charAt(index)))) { 
                            return ""; 
                        }               
                    }
                }
                return null;
            }

        };
        editText.setFilters(filters); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T12:25:59.187

```
InputFilter[] filters = new InputFilter[1];
    filters[0] = new InputFilter(){
        @Override
        public CharSequence filter(CharSequence source, int start, int end, Spanned dest, int dstart, int dend) {
            if (end > start) {

                char[] acceptedChars = new char[]{'a','b'};

                for (int index = start; index < end; index++) {                                         
                    if (!new String(acceptedChars).contains(String.valueOf(source.charAt(index)))) { 
                        return ""; 
                    }               
                }
            }
            return null;
        }

    };
    Name.setFilters(filters); 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T12:29:24.323

NumberKeyListener PwdkeyListener = new NumberKeyListener() {

```
public int getInputType() {
return InputType.TYPE_MASK_VARIATION;
}

    @Override
    protected char[] getAcceptedChars() {
    return new char[] { 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'i', 'j', 'k', 'l', 'm', 'n', 'o', 'p', 'q', 'r', 's', 't', 'u', 'v', 'w', 'x', 'y', 'z', 
                    'A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z',
                    '0', '1', '2', '3', '4', '5', '6', '7', '8', '9', '@', '_', '#', '$', '%', '&', '*', '-', '+', '(', ')', '!', '"', '\'', ':', 
                    ';', '/', '?', ',', '~', '`', '|', '\\', '^', '<', '>', '{', '}', '[', ']', '=', '£', '¥', '€', '¢', '•','©' };
    }
};

edtObj.setKeyListener(PwdkeyListener); 
```

有关更多信息，请参阅此[Android - 希望将某些字符限制为编辑文本](https://stackoverflow.com/questions/7926896/android-want-to-restrict-some-charaters-to-the-edittext)

# install4j - 安装屏幕上的“控制台”输出？

> ID：13068395
> 
> 赞同：1
> 
> 时间：2012-10-25T12:17:28.287
> 
> 标签：install4j

目前我们使用安装屏幕来显示安装进度和当前正在运行的操作（例如“安装步骤 4”）。

作为附加信息，我们想提供用户信息，之前发生的事情，例如：

安装步骤 1 - 好的

安装步骤 2 - 好的

安装步骤 3 - 好的

为此，我们需要在进度条下方的安装屏幕上使用某种控制台（例如文本字段/区域）。有机会这样做吗？

谢谢！坦率

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T13:16:19.687

目前这并不容易。您可以扩展`com.install4j.runtime.beans.screens.InstallationScreen`和覆盖该方法`protected void addScreenContent(JPanel panel, GridBagConstraints gc)`以添加更多视觉元素。

* * *

**更新：**

正如弗兰克指出的那样，您可以只使用可自定义的表单屏幕并向其添加“进度显示”组件。在“激活后脚本”属性中，您必须通过调用自动切换到下一个屏幕

context.goForward(1, true, true);

# html - 关于网页中可扩展的固定元素

> ID：13068397
> 
> 赞同：0
> 
> 时间：2012-10-25T12:17:33.863
> 
> 标签：html, css, layout, css-position

我试图为 CMS（ocPortal/vanilla）定制一个主题，我希望边栏与标题一起固定。修复它并不是一项艰巨的工作，但问题是最终用户可以将小部件添加到可能超出屏幕高度的侧边栏。然后固定属性将变得无用。

是否有解决此问题的方法，因为我无法解决任何问题。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:26:01.973

这个问题有多种解决方案，看到你没有给出一个例子，我会假设这些小部件可以动态添加和删除（意味着在页面加载后的任何时间）。假设这一点，我有两种可能的解决方案可供您尝试。

**解决方案 1：**

尝试在选项卡式/剧透类型容器中制作每个小部件，这样当最终用户在那个时间点不需要它们时它们会变小

**解决方案 2：**

正如*Rick Calder*提到的，您还可以使用 CSS 规则`overflow-y: scroll;`，这样当侧边栏的内容变得大于高度时，会出现一个滚动条，允许用户滚动浏览您的小部件。

您也可以将这些解决方案组合在一起，以启用大量小部件，具体取决于您的个人喜好。

我希望这有帮助！

**笔记 ：**

*对html javascript 剧透*的简单搜索将为您提供许多剧透示例。

# javascript - 将动态变量传递给javascript

> ID：13068398
> 
> 赞同：1
> 
> 时间：2012-10-25T12:17:35.563
> 
> 标签：javascript, asp.net, gridview

我有一个gridview，其一列具有值文件名，并且该列显示为按钮或链接按钮，我可以使用任何东西。现在我想将此按钮的文本传递给 javascript 函数，然后在 javascript 函数中我将该值传递给 window.open()。我该怎么做下面是我的代码

```
<Columns>
    <asp:BoundField HeaderText="CNAID" ItemStyle-Width="10%" DataField="CNAID" SortExpression="CNAID"/>
    <asp:BoundField HeaderText="CDRID" ItemStyle-Width="10%" DataField="CDRID" SortExpression="CDRID"/>
    <asp:BoundField HeaderText="CNATypeID" ItemStyle-Width="10%" DataField="CNATypeID" SortExpression="CNATypeID"/>
    <asp:TemplateField HeaderText="FileName" SortExpression="FileName">
<ItemTemplate>
    <asp:Button name ="abc" ID="lnkname" runat="server" Text='<%#Eval("FileName") %>' CommandArgument='<%#Eval("FileName") %>'
    onClientclick = "javascript:return myFunction();" >
</asp:Button> 
```

我的javascript函数是

```
function myFunction() {
    window.open("http://www.w3schools.com");
    return false;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:20:38.973

```
onClientclick = "javascript:return myFunction(pass_variable);"

 function myFunction(receive_variable) {
      window.open("http://www.w3schools.com/"+receive_variable);
      return false;
 } 
```

**您可以像这样将变量传递给javascript函数。**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:20:57.490

应该很容易做到

```
onClientclick = "javascript:return myFunction(Eval("FileName"));" >

function myFunction(link) {
    window.open(link);
            return false;
} 
```

# clearcase - 复制 ClearCase 元素及其历史

> ID：13068404
> 
> 赞同：1
> 
> 时间：2012-10-25T12:17:54.653
> 
> 标签：clearcase

是否可以复制具有合并/版本/标签和其他元数据的完整历史记录的 clearcase 元素？我已经尝试过`clearfsimport`，但它只复制一个版本而不是完整的元素历史。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:33:33.027

clearsimport 不会复制历史记录，只会在 VOB 中导入和创建*一个*版本。

保存所有内容通常在 VOB 级别（如“[移动 VOB](http://publib.boulder.ibm.com/infocenter/cchelp/v7r1m2/index.jsp?topic=/com.ibm.rational.clearcase.cc_admin.doc/topics/c_mvvob.htm) ”）。
将一个元素从一个 vob 移动到另一个称为[relocate](http://publib.boulder.ibm.com/infocenter/cchelp/v7r0m0/index.jsp?topic=/com.ibm.rational.clearcase.cc_ref.doc/topics/ct_relocate.htm)。

但*复制*并不存在。*最简单的方法是在分支中管理该元素，这允许您在处理相同*元素
时将更改与主分支隔离开来。

 ** * *

注意：[Brian Cowan](https://stackoverflow.com/users/4223401/brian-cowan)[在评论中](https://stackoverflow.com/questions/13068404/copy-clearcase-element-with-its-history/13069789?noredirect=1#comment105687058_13069789)添加：

> 重定位`-update`会将元素从一个位置克隆到另一个位置，而不会将它们从源 VOB 中删除。
> 如果源 VOB 和目标 VOB 都用于相同的审计构建中，我不建议这样做，因为它会混淆构建审计*

# ruby-on-rails - 乘客：Ruby (Rack) 应用程序无法启动

> ID：13068413
> 
> 赞同：0
> 
> 时间：2012-10-25T12:18:20.420
> 
> 标签：ruby-on-rails, apache, passenger, linode

我正在尝试在带有 ArchLinux 的 Linode VPS 上部署我的 Ruby on Rails 应用程序，并且我使用 Apache 作为 Web 服务器。

这是乘客错误：

```
Error message: No such file or directory - config.ru
Exception class: Errno::ENOENT
Application root: /srv/http 
```

这是回溯：

```
[ pid=14560 thr=76553200 file=utils.rb:176 time=2012-10-25 13:28:10.796 ]: *** Exception Errno::ENOENT in PhusionPassenger::Rack::ApplicationSpawner (No such file or directory - config.ru) (process 14560, thread #<Thread:0x92037e0>):
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/utils.rb:675:in `lstat'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/utils.rb:675:in `lower_privilege'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/utils.rb:198:in `prepare_app_process'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb:156:in `block in initialize_server'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/utils.rb:563:in `report_app_init_status'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb:154:in `initialize_server'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:204:in `start_synchronously'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:180:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/rack/application_spawner.rb:129:in `start'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:253:in `block (2 levels) in spawn_rack_application'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb:132:in `lookup_or_add'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:246:in `block in spawn_rack_application'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb:82:in `block in synchronize'
    from <internal:prelude>:10:in `synchronize'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server_collection.rb:79:in `synchronize'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:244:in `spawn_rack_application'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:137:in `spawn_application'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/spawn_manager.rb:275:in `handle_spawn_application'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:357:in `server_main_loop'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/lib/phusion_passenger/abstract_server.rb:206:in `start_synchronously'
    from /usr/local/rvm/gems/ruby-1.9.3-p194/gems/passenger-3.0.17/helper-scripts/passenger-spawn-server:99:in `<main>' 
```

这是我的 /etc/httpd/conf/extra/httpd-vhosts.conf

```
NameVirtualHost *:80

<VirtualHost *:80>
    ServerAdmin info@stanosas.it
    DocumentRoot /srv/http
    ServerName stanosas.it
    ErrorLog "/var/log/httpd/stanosas.it-error_log"
    CustomLog "/var/log/httpd/stanosas.it-access_log" common
    <Directory /srv/http>
        Allow from all
    </Directory>

    RackBaseURI /copisteria
    <Directory /srv/http/copy>
        Options -MultiViews
    </Directory>
</VirtualHost> 
```

按照官方乘客指南（4.3。部署到子 URI）我创建了一个符号链接到我的应用程序：

```
$ ls -la /srv/http
total 197580
drwxr-xr-x 7 root root 4096 Oct 25 13:07 .
drwxr-xr-x 4 root root 4096 Jul 7 14:23 ..
drwxrwxr-x 4 mylinode root 4096 Oct 1 18:40 copisteria
lrwxrwxrwx 1 root root 35 Oct 25 13:07 copy -> /srv/http/copisteria/current/public
-rw-r--r-- 1 root root 972 Aug 8 18:48 index.html 
```

我认为问题在于那个`Application Root`，应该是`/srv/http/copisteria/current`。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T15:57:49.113

/srv/http/copisteria 应该是 /srv/http/copisteria/current/public 的符号链接。在您当前的情况下，/srv/http/copisteria 是一个目录。

# c# - 抓取TreeView选中节点的位置

> ID：13068419
> 
> 赞同：2
> 
> 时间：2012-10-25T12:18:35.447
> 
> 标签：c#, winforms, treeview

这是一个理论问题，所以没有代码（抱歉）。当用户选择特定节点时，我想捕捉 TreeView 控件的选定节点的位置（X 和 Y 值）。我浏览了智能感知，但没有像“位置”或“位置”这样的标签。如何做到这一点？实际上我正在尝试在所选节点旁边添加动态按钮和文本框，所以我需要节点的位置。

请帮忙。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T12:53:43.867

我通过使用`TreeView.SelectedNode.Bounds.X`（对于 X 位置）和`TreeView.SelectedNode.Bounds.Y`（对于 Y 位置）解决了这个问题，并将这些动态控件保留在面板中。

```
 int DistanceFromNode = 250;
  MyPanel.SetBounds(MyTreeview.SelectedNode.Bounds.X + DistanceFromNode,
        MyTreeview.SelectedNode.Bounds.Y, MyPanel.Width, MyPanel.Height); 
```

任何其他解决此问题的方法都是受欢迎的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:28:30.103

当用户滚动树视图时，该位置会发生变化，IMO 而不是在选定节点的位置绘制，最好在 DrawNode 事件中自定义树节点的外观。

在这种情况下，您可以检查是否选择了节点，然后绘制其他按钮，这样您的按钮将与树视图的其余部分一起滚动。

这是示例：

[http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.drawnode.aspx](http://msdn.microsoft.com/en-us/library/system.windows.forms.treeview.drawnode.aspx)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-02-04T10:49:53.987

我试图在 TreeView 控件的 SelectedNode 旁边显示一个对话框。我解决了这个问题，如下所示：

```
int x = myTreeView.SelectedNode.Bounds.X + myTreeView.SelectedNode.Bounds.Width;  
int y = myTreeView.SelectedNode.Bounds.Y + myTreeView.SelectedNode.Bounds.Height;  
Point point = new Point(x,y);   
Point absPoint = myTreeView.PointToScreen(point);

MyDialog dialog = new MyDialog();
dialog.StartPosition = FormStartPosition.Manual;
dialog.Location = absPoint;
dialog.show() 
```

此代码显示一个对话框，位于所选树节点的 Right_Bottom 侧的位置。

通过杰夫

# caching - 关于 weblogic 11g 中 InitialContext 和副本感知存根缓存的问题

> ID：13068421
> 
> 赞同：5
> 
> 时间：2012-10-25T12:18:43.707
> 
> 标签：caching, ejb, weblogic, initial-context

我们有一个集群并部署了一些无状态的 ejb 会话 bean。目前我们只在客户端代码中缓存了InitialContext对象，我有几个问题：

1.  在当前情况下，如果我们调用lookup() 来获取一个replica-aware stub，哪个服务器将返回stub 对象，我们获取InitialContext 的同一台服务器，或者每次调用lookup 方法时它都会负载均衡到其他服务器?
2.  我们应该只缓存存根吗？它是线程安全的吗？如果是，存根如何处理来自客户端线程的并发请求？并行还是顺序？
3.  还有一个问题，当我们调用 new InitialContext() 时，如果服务器不可达，需要很长时间才能返回超时异常，这种情况如何设置超时？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-30T15:29:24.660

最好的了解方法是编写一个小测试客户端。

您可以使用它的 toString() 方法检查您的存根来自哪个服务器，该方法应该打印一种 URL（至少在 WebLogic 10 上是这样）。您可能会对结果感到惊讶。

# c# - 如何使用 c# 从数据桶中获取所有文档？

> ID：13068424
> 
> 赞同：4
> 
> 时间：2012-10-25T12:18:45.397
> 
> 标签：c#, nosql, couchbase

如何从数据桶中获取所有文档？

我已经尝试了一个样本，但我只能得到一个特定的文件。这是我的代码：

```
CouchbaseClient oclient;

oclient= new CouchbaseClient("vwspace", "");// data bucket name

var results = oclient.Get("205");// document id 
```

如何获取所有文件？

```
var results = oclient.? //what should i use here to get all documents 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T14:03:06.793

使用 Couchbase Server 2.0，您将使用视图来获取所有文档。您的视图如下所示：

```
function (doc, meta) {
   emit(null, null);
} 
```

此视图将使您能够访问所有 id（id 始终包含在非缩减视图查询结果中）。

有关 .NET 中的视图和查询视图的更多信息，请参阅[http://blog.couchbase.com/strongly-typed-views-net-client-library](http://blog.couchbase.com/strongly-typed-views-net-client-library)。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-02-10T15:32:52.357

You'll need to create a couchbase view that emits document id ( meta.id ).

Or use existing view that emits every record.

Then

```
http://HOST:8092/YOURBUCKETNAME/_design/YOURDESIGNDOCNAME/_view/YOURVIEWNAME?reduce=false&limit=10 
```

You'll get result like the following

```
{"total_rows":1321085,"rows":[
{"id":"key1","key": ... ,"value": ... },
{"id":"key2","key": ... ,"value": ... },
{"id":"key3","key": ... ,"value": ... },
...
]
} 
```

The "id" field contains document key.

You'll need to paginate over the results. [http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-querying-pagination.html](http://www.couchbase.com/docs/couchbase-manual-2.0/couchbase-views-writing-querying-pagination.html)

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:40:49.693

您无法获取所有文件。创建一个“常量”原子整数值，`counter`如下所示：

```
CouchbaseClient oclient;

oclient= new CouchbaseClient("vwspace", "");// data bucket name

ulong results = (ulong)oSourceBucket.Get("MYCOUNTER");// counter (integer incremental value) 
```

当您将文档添加到存储桶时，请不要使用一些 documentId 添加它们（我想您会获得该表单 SQL 数据库或其他东西），而是使用`counter`以下方式制作它们：

```
results = oSourceBucket.Increment("MYCOUNTER", results, 1);// counter (integer incremental value)

oSourceBucket.Store(StoreMode.Add, "MYITEM." + results.toString(), myNewObjectToStore); 
```

现在您可以`for`对所有项目使用循环`oSourceBucket.Get(...)`直到`MYCOUNTER`值。我不确定新版本的 Couchbase 2.0 是否会有模式获取，但当前的稳定版本（我认为是 1.8.1）只允许获取精确的密钥。

请记住，这是 KEY-VALUE 存储，而不是 SQL :)

在 Couchbase 中也有`MultiGet`，但在 .NET 客户端的最后一个稳定版本中它不存在，但它在引擎盖下使用，就像带有多个-s的`for...`循环一样。`Get`

# jquery - Twitter bootstrap 和动态 dom 元素

> ID：13068428
> 
> 赞同：2
> 
> 时间：2012-10-25T12:18:57.897
> 
> 标签：jquery, events, tooltip

我正在使用 Twitter Bootstrap 创建[tooltips](http://twitter.github.com/bootstrap/javascript.html#tooltips)。目前，我在以下位置初始化工具提示`$(document).ready()`：

```
$(document).ready(function() {
    $('[data-toggle="tooltip"]').tooltip();
}); 
```

`tooltip()`这会为每个具有该元素的元素调用（它初始化侦听器） `data-toggle`。

问题是，如果我有动态 DOM 元素（使用 Ajax），`tooltip()`则不会对它们调用。我想到了如下解决方案：

```
$(document).ready(function() {
    $('body').on('ready', '[data-toggle="tooltip"]', function() {
        $(this).tooltip();
    });
}); 
```

但这不起作用..

有任何想法吗..？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T12:21:23.420

一旦您的 ajax 方法返回（并且新元素已被注入），只需重新初始化插件：

```
$.ajax({
    url: 'foo.html',
    type: 'post',
    data: { foo: "bar"},
    success: function (html) {

        $("#foo").html(html);
        $('[data-toggle="tooltip"]').tooltip();
    }
}); 
```

# iphone - 通过 iPhone 应用访问 Siri

> ID：13068429
> 
> 赞同：1
> 
> 时间：2012-10-25T12:18:59.030
> 
> 标签：iphone, objective-c, ios, siri

我正在制作一个应用程序，我想在其中实现 Siri/语音识别的概念。我已经尝试过[了，](http://www.politepix.com/openears/)但没有得到确切的输出，它没有正确识别这个词。任何人都知道如何将语音转换为文本？如何访问 Siri 功能。如果有人知道这个实现，请告诉我。

谢谢大家。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T13:30:04.963

您不能直接访问 Siri 界面，但有一个很好的技巧来处理 Siri 命令。您可以实现`UITextField`和捕获将由 Siri 写入的文本，这样您就可以让您的应用程序执行语音命令。

您可以在此处找到有关该主题的更多说明： [Siri 技巧](http://www.tuaw.com/2011/11/23/in-which-i-use-siri-to-create-in-app-third-party-commands-while/?a_dgi=aolshare_twitter)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T12:54:48.850

您无法访问 Siri 功能，Apple 没有为 Siri 提供公共 API :-S 。

我见过的最好的 API 是 openears 和[Dragon Mobile SDK](http://www.nuance.com/for-developers/dragon-mobile-sdk/index.htm)。

# zend-framework - 在 Magento 中获取真实的表名

> ID：13068436
> 
> 赞同：14
> 
> 时间：2012-10-25T12:19:13.403
> 
> 标签：zend-framework, magento

如何动态获取magento表名？

我试过 ：

`Mage::getSingleton('core/resource')->getConnection('core_read')->getTableName('catalog/product')`

返回`catalog/product`，什么时候应该返回`catalog_product`。如何获取`<table></table>`config.xml 中标签中定义的真实表名？

* * *

## 回答 #1

> 赞同：36
> 
> 时间：2012-10-25T12:30:25.927

改用：

```
echo Mage::getSingleton('core/resource')->getTableName('catalog/product'); 
```

输出`catalog_product_entity`

# c# - 更改字符串中单词的位置

> ID：13068442
> 
> 赞同：5
> 
> 时间：2012-10-25T12:19:38.520
> 
> 标签：c#, .net-3.5

我有一个字符串可以说，

```
string temp1 = "25 10 2012" 
```

但我想要这个，

```
"2012 10 25" 
```

最好的方法是什么。格式永远是这样的。

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T12:21:36.790

看来是约会了 您可以使用 DateTime.ParseExact 将字符串解析为 DateTime，[然后](http://msdn.microsoft.com/en-us/library/system.datetime.parseexact.aspx)使用 .ToString 返回格式化结果。

```
DateTime dt = DateTime.ParseExact(temp1, "dd MM yyyy", CultureInfo.InvariantCulture);
Console.Write(dt.ToString("yyyy MM dd")); 
```

*您可以稍后在代码中使用该 DateTime 对象，并应用不同的格式（如果需要）*

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:22:47.300

试试这个拆分字符串和反向数组，这将适用于任何长度的字符串......

```
string[] myArray = temp1.Split(' ');
 Array.Reverse( myArray );
string reverse =string.Join(" ", myArray ); 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T12:21:14.743

您可以使用 Split 命令然后重新组合子字符串：

```
String[] subStrs = temp1.Split( ' ' );
String   final   = subStrs[2] + " " + subStrs[1] + " " + subStrs[0]; 
```

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T12:22:03.910

所以你想拆分单词并改变顺序，你可以使用LINQ：

```
var words = temp1.Split(' ');
String newWord = string.Join(" ", words.Reverse()); 
```

或者如果您不想交换所有单词，而只想交换第一个和最后一个单词：

```
String first = words.Last();
String last = words.First();
String newWord = first + " " 
                 + string.Join(" ", words.Skip(1).Take(words.Length - 2)) 
                 + " " + last; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T12:21:46.700

您可以使用 RegEx 或拆分字符串并以相反的顺序重新加入。

```
string s = "2012 10 25";
string[] tokens = s.Split(' ');
Array.Reverse(tokens);
string final = string.Join(" ", tokens); 
```

* * *

## 回答 #6

> 赞同：0
> 
> 时间：2012-10-25T12:22:46.903

如果您的字符串始终有 10 个字符（带空格），您可以执行以下操作：

```
string str = "26 10 2012"
str = str.Substring(6, 4) + " " + str.Substring(3, 2) + " " + str.Substring(0, 2) 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2021-12-08T09:59:06.433

你可以使用 string.split(" ").reverse().join(" ")。

您可以使用拆分，此功能会将您的字符串拆分为空白数组作为条件，然后反转数组并根据空白重新加入

```
let string="25 10 2012";
let output=string.split(" ").reverse().join(" ");

console.log(output)
```

# c# - 校长在一次请求后迷路了

> ID：13068447
> 
> 赞同：1
> 
> 时间：2012-10-25T12:20:05.507
> 
> 标签：c#, asp.net-mvc, security, userprincipal

我`AffiliateLogin`在控制器中具有设置`Principal`.
该行`principal.User = user;`实际上是存储主体的行。但是在我重定向到另一个控制器并测试我的`AuthorizeWithRolesAttribute`属性之后，主体被重置。
这是登录后一秒，可以看到红色箭头：

![在此处输入图像描述](../Images/88c6e1e8d94958cc2fe947ba6d9ee5b0.png)

这是存储它的函数。
我究竟做错了什么？
谢谢

```
public JsonResult AffiliateLogin(string email, string password)
        {
            if (ModelState.IsValid)
            {
                Affiliate user = api.GetUserByCredencials<Affiliate>(email, password);
                if (user != null)
                {

                     IIdentity identity = new UserIdentity(true,user.Email);
                    UserPrincipal principal = new UserPrincipal(identity, new string[] {"Affiliate"});
                    principal.User = user;

                    HttpContext.User = principal;
                    return Json("Login success");
                }
            }
            return Json("Fail To Login");
        } 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:24:54.730

主体属性在 Web 请求之间将无法生存。您必须在重定向后的下一个请求中再次设置它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-12-22T12:07:51.193

如果您正在做自定义身份验证/表单身份验证，您应该调用

```
 FormsAuthentication.SetAuthCookie 
```

来自浏览器的下一个带有该 cookie 的 http，Asp.net 将处理 cookie 并设置当前的声明主体。所以你可以检查

```
var principal = ClaimsPrincipal.Current;  //normally this reverts to Thread.CurrentPrincipal, 
```

这是一个了解更多信息的好地方 [http://msdn.microsoft.com/en-us/library/system.security.claims.claimsprincipal.current](http://msdn.microsoft.com/en-us/library/system.security.claims.claimsprincipal.current)

# perl - 文本文件中的短语搜索

> ID：13068450
> 
> 赞同：-2
> 
> 时间：2012-10-25T12:20:15.430
> 
> 标签：perl, search, text, phrases

给定一个像“我正在搜索文本”这样的短语和一个包含单词列表的文本文件。

我必须找到文本文件中是否存在单词的每个组合。

例如，我必须搜索出现“我”、“我是”、“我正在搜索”、“我正在搜索”、“正在搜索”等。

我更喜欢用 perl 编写它，我需要一个运行速度更快的最佳解决方案。

示例文本文件：

```
I \n
am searching \n
Text \n
searching for \n 
searching for a \n
for searching       ---> my program should not match this 
etc 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:53:10.083

下面的代码打印出您想要匹配的所有 sub_phrases。

```
$phrase = 'I am searching for a text';
$\ = "\n";

@words = ();
print "Indices:";
while( $phrase =~ /\b\w+\b/g ) {
    push @words, {word => $&, begin => $-[0], end => $+[0]};
}

$num_words = $#words + 1;
print 'there are ', $num_words, ' words';

for( $i=0; $i<$num_words; $i++ ) {
    for( $j=$i; $j<$num_words; $j++ ) {
        ($start,$finish) = ($words[$i]->{begin}, $words[$j]->{end});
        $sub_phrase = substr $phrase, $start, $finish-$start;
        print "$i-$j: $sub_phrase";
    }
} 
```

一些解释：

1.  $\ 只是为了让“打印”更容易
2.  $phrase - 使用您的示例
3.  @words 是对记录的引用数组
4.  每条记录都是单词本身的哈希，索引到单词的开头和结尾
5.  我有一个正则表达式，我正在迭代。我正在寻找单词边界、1 个或多个单词字符和单词边界。
6.  $+ 和 $- 是最后一个 RE 匹配索引的特殊变量
7.  $& 是最后一个 RE 匹配的特殊变量
8.  然后我有一个嵌套循环：$i，外部循环变量是第一个单词。$j 是最后一句话。这涵盖了所有的组合。
9.  我正在计算 $sub_phrase 从第一个单词的开头到最后一个单词的结尾。

为了完成您的练习，您希望将所有 sub_phrase 保存到一个数组中（而不是 'print' 执行 'push' 到 @permutations）。然后遍历您的文本文件，并为每一行尝试匹配每个排列。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T15:10:35.103

您可以构造一个适用于所有这些情况的表达式。下面，我将展示如何在 Perl 中*构建*一个（尽管您可以将产品用于您的目的）。

```
use List::Util qw<reduce>;

our ( $a, $b );

my $regex       
    = "\n^\n( "
    . join( "\n| "
    , @{( reduce { 
            my $r = ref( $a ) ? $a : [ "$a " ];
            my $s = $r->[0];
            [ "$b (?> [ ] $s)?", @$r ] 
        } 
        reverse split ' ', 'I am searching for a text'
        )}
    )
    . "\n)\n\\s*\n\$"
    ;
say join( "\n# ", split "\n", $regex );

# ^
# ( I (?> [ ] am (?> [ ] searching (?> [ ] for (?> [ ] a (?> [ ] text )?)?)?)?)?
# | am (?> [ ] searching (?> [ ] for (?> [ ] a (?> [ ] text )?)?)?)?
# | searching (?> [ ] for (?> [ ] a (?> [ ] text )?)?)?
# | for (?> [ ] a (?> [ ] text )?)?
# | a (?> [ ] text )?
# | text 
# )
# \s*
# $

map { say foreach m/$regex/xo } <DATA>; 
```

*   我已经添加了锚点，因为您指出它应该与整行匹配。
*   完成的正则表达式中有空格，但它`/x`用来忽略它们。这就是为什么我们用 指定空间`[ ]`。
*   分组表示法`(?>...)`是 non-capturing 的一种变体`(?:...)`，但失败的速度要快得多。请参阅[http://perldoc.perl.org/perlre.html#(%3f%3epattern)](http://perldoc.perl.org/perlre.html#%28%3f%3epattern%29)
*   看[**`List::Util::reduce`**](http://search.cpan.org/perldoc?List%3a%3aUtil#reduce)

# php - 在 Magento 中获取自定义类别属性的值

> ID：13068457
> 
> 赞同：4
> 
> 时间：2012-10-25T12:20:37.863
> 
> 标签：php, magento, magento-1.5

我使用以下代码在我的 Magento 安装中添加了一个自定义类别属性：

```
<?php
//  initialize magento environment for 'default' store
    require_once 'app/Mage.php';
    Mage::app('default');

    echo "initialising";
    echo runAdd();
    echo "finishing";

function runAdd()
{
    $setup = new Mage_Eav_Model_Entity_Setup('core_setup');
    // below code will add text attribute
    $setup->addAttribute('catalog_category', 'test_field', array(
        'group'         => 'General',
        'input'         => 'text',
        'type'          => 'varchar',
        'label'         => 'a new text field',
        'backend'       => '',
        'visible'       => 1,
        'required'      => 0,
        'user_defined'  => 1,
        'global'        => Mage_Catalog_Model_Resource_Eav_Attribute::SCOPE_GLOBAL,
    ));
} 
```

实际上，我很难检索我在后端设置的值。我尝试了以下所有变体：

```
$_category = Mage::getModel('catalog/category')->load(1000);               
$data = $_category->getData();        
$atts= $_category->getAttributes();
var_dump($data );
var_dump($atts); 
```

等等，但我被卡住了。

有谁知道我将如何检索这些数据？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:57:29.533

您不应该在独立脚本中更新数据库，但您必须使用升级脚本......

如果你有，你就不必手动实例化安装程序，也不会实例化一个坏的：你必须使用`Mage_Catalog_Model_Resource_Setup`（或`Mage_Catalog_Model_Resource_Eav_Mysql4_Setup`取决于你的magento版本），因为 Mage_Catalog 使用在 config.xml 中配置的自定义 Setup 类：

```
<resources>
    <catalog_setup>
        <setup>
            <module>Mage_Catalog</module>
            <class>Mage_Catalog_Model_Resource_Setup</class>
        </setup>
    </catalog_setup>
</resources> 
```

我建议您在模块 config.xml 中对此进行调整，并使用安装/升级脚本正确修改您的数据库。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-26T05:34:21.720

你可以写下一行可能对你有帮助

```
$_category = Mage::getModel('catalog/category')->load(1000)->getData('test_field'); 
```

# c++ - 链表的插入函数

> ID：13068468
> 
> 赞同：-4
> 
> 时间：2012-10-25T12:21:07.813
> 
> 标签：c++, function, linked-list

```
struct Node {
    float  item;
    Node * next;
    Node * previous;
}; 
```

我正在尝试`insert`为此双链表编写一个函数，该函数将浮点数据插入到使用标题的列表上的位置 pos`bool insert (int pos, float data);`如果插入成功，该函数应返回 true，否则返回 false

但是我正在尝试复制我在网上看到的东西，但我没有成功，有人可以给我看一个示例代码，也许可以理解或了解如何做到这一点吗？

这是我到目前为止得到的。如果插入成功，该函数应返回 true，否则返回 false。但我不认为我接近这个权利

```
 bool insert ( int pos, float data)
{
    if(pos< 1||pos> 1) throw...
        if (pos ==1)
        {
            ListNode* node=new Listnode;
            node-> data=item;
            node-> next-head;
            if(head!=NULL)
                head->prev=node;
            node-> prev=NULL;
            head=node;
            ++count;
        } 
```

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:45:25.827

像这样让你开始

```
struct Node {
    float  item;
    Node * next;
    Node * previous;
};

class DoublyLinkedList
{
public:
    DoublyLinkedList();
    bool insert(int pos, float data);
private:
    Node* head;
    int count;
};

bool DoublyLinkedList::insert(int pos, float data)
{
    ...
} 
```

但我认为在你完成这个之前，你需要学习很多关于 C++ 的知识。也许最好在网上看一个完整的例子。

# javascript - 如何检查文件名是否包含 JavaScript 中的子字符串？

> ID：13068471
> 
> 赞同：0
> 
> 时间：2012-10-25T12:21:13.060
> 
> 标签：javascript, string, filenames

我在硬盘上有一个文件夹，其中包含名为

1.  myfileone_163637
2.  myfiletwo_14153535
3.  myfilethree_3739284

文件名末尾的数字是随机的。

如果存在名称中包含“myfilethree”的文件，如何使用 JavaScript 检查？

先感谢您。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:23:29.843

如果你有文件名，你可以使用类似的东西：

```
if(theFileName.indexOf('myfilethree') > -1)
{
    do your magic here because "myfilethree" is present in the name!
} 
```

但是，我不知道有什么方法可以在 javascript 中读取目录索引。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:27:34.090

这有两个部分：获取目录中的文件列表，然后在它们中搜索子字符串。我将从第二部分开始，因为那是最简单的。只需使用`indexOf`来检查所需的字符串。如果 的结果`indexOf`不等于 -1，则匹配：

```
if (filename.indexOf("myfilex") != -1) {
    // whatever you want to do
} 
```

至于实际检索文件列表，您将需要使用 Windows Script Host 和 JScript。有关详细信息，请参阅[此问题](https://stackoverflow.com/q/5721119/196307)。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:33:36.960

```
var str = 'myfilethree';
if (str.toLowerCase().indexOf("myfilethree") >= 0)
{
    alert('File Found');
} 
```

**尝试这个：**

# python - sqlalchemy 编码 - 从其他应用程序访问表

> ID：13068479
> 
> 赞同：0
> 
> 时间：2012-10-25T12:22:00.557
> 
> 标签：python, mysql, encoding, sqlalchemy

我正在使用*SQLAlchemy*从 utf-8 编码文件中读取一些数据并将它们放入 MySQL 数据库。只要我使用 sqlalchemy 访问数据，一切正常 - 在这种情况下编码是完全正确的。

我的问题是我需要从另一个不是用 python 编写的应用程序访问相同的数据。在这种情况下，编码无法正常工作。当我通过 mysql 客户端查看它时，它也是不正确的。

谁能帮我找出解决方案？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T00:18:56.903

您必须验证您的配置是否满足以下条件：

*   您的 MySQL 数据库配置为对表和列使用**UTF-8**。
*   **所有**客户端连接都配置为使用**UTF-8**。对于[SQLAlchemy](http://docs.sqlalchemy.org/en/rel_0_7/dialects/mysql.html?highlight=tables#unicode)，这可以通过以下方式实现：

    ```
    # set client encoding to utf8; all strings come back as unicode
    create_engine('mysql+mysqldb:///mydb?charset=utf8') 
    ```

*   您用于*SQLAlchemy*列`Unicode`的类型，而**不是**. ***`String`***

 ***如果满足上述条件，并且再次确保所有客户端连接都配置为使用**UTF-8**字符集，并且所有客户端都将 UTF-8 字节字符串解码为它们所在语言的任何内部 Unicode 表示形式实现的用途（如果配置正确，驱动程序/连接器应该自动处理这个问题）你不应该有任何问题。***

# ruby-on-rails - Rails：在“生成”命令中传递 has_many 或 belongs_to 属性

> ID：13068487
> 
> 赞同：4
> 
> 时间：2012-10-25T12:22:31.793
> 
> 标签：ruby-on-rails, ruby-on-rails-3

我正在尝试制作脚手架，但想将 has_many 属性传递给生成命令，如下所示：

```
rails generate scaffold grade name:string {has_many :sections} 
```

这会生成损坏的模型：

```
class Grade < ActiveRecord::Base
  attr_accessible :, :name, :{has_many
end 
```

而不是我需要的：

```
class Grade < ActiveRecord::Base
  attr_accessible :name
  has_many :sections
end 
```

如何将关系属性传递给生成命令？

* * *

## 回答 #1

> 赞同：11
> 
> 时间：2012-10-25T13:08:10.033

目前，您可以使用脚手架做的唯一事情是在您想要的模型中添加一个引用 belongs_to

```
rails generate model Sections name:string grade:references 
```

有一些方法可以生成关系，但它不是 Rails 标准的脚手架。有很多选择可以做到这一点：

[Ubiquo_Scaffold](http://blog.ubiquo.me/now-on-edge-easier-relations-in-scaffold-gene)

# asp.net-mvc - 如何在带有区域的 asp.net mvc 中配置路由

> ID：13068488
> 
> 赞同：0
> 
> 时间：2012-10-25T12:22:37.590
> 
> 标签：asp.net-mvc, asp.net-mvc-3, asp.net-mvc-routing

我正在研究 asp.net mvc 3。我的项目中有三个领域，例如，

```
MyProject/Areas/Blogs
MyProject/Areas/Forums
MyProject/Areas/Groups 
```

这三个中，博客视图是启动视图。为此，我将 globla.ascx 设置为

```
routes.MapRoute(
                "Default", // Route name
                "{controller}/{action}/{id}", // URL with parameters
                new { controller = "Blog", action = "Blog", id = UrlParameter.Optional }
            ); 
```

在 BlogAreaRegistration.cs 中，

```
context.MapRoute(
                "Blogarea_Default",
                "{controller}/{action}/{id}",
                new { controller = "Blog", action = "Blog", id = UrlParameter.Optional }
            ); 
```

在 ForumAreaRegistration.cs 中，

```
context.MapRoute(
                null,
                "Forums/{action}/{id}",
                new {controller="Forums", action = "Forum", id = UrlParameter.Optional }
            ); 
```

在 GroupsAreaRegisration.cs 中，

```
 context.MapRoute(
        "Groups_default",
        "Groups/{controller}/{action}/{id}",
        new { controller = "Groups", action = "Group", id = UrlParameter.Optional }
    ); 
```

这里的论坛和博客可以按我的意愿工作，但组不工作它总是显示**404 找不到资源页面**，所以如果我在此过程中犯了任何错误，请指导我。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:25:58.640

尝试改变

```
 context.MapRoute(
        "Groups_default",
        "Groups/{controller}/{action}/{id}",
        new { controller = "Groups", action = "Group", id = UrlParameter.Optional }
    ); 
```

为了：

```
 context.MapRoute(
        "Groups_default",
        "Groups/{action}/{id}",
        new { controller = "Groups", action = "Group", id = UrlParameter.Optional }
    ); 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:26:34.240

您应该从您的代码块中删除`Groups/`或删除 - 然后它应该可以工作。我会删除，所以代码将是：`{controller}/``GroupsAreaRegisration.cs``{controller}/`

```
context.MapRoute(
    "Groups_default",
    "Groups/{action}/{id}",
    new { controller = "Groups", action = "Group", id = UrlParameter.Optional }
); 
```

同样在`BlogAreaRegistration.cs`我会替换`{controller}`为`Blog`，否则你可能会得到非常意想不到的结果。这里的完整代码将是

```
context.MapRoute(
    "Blogarea_Default",
    "Blog/{action}/{id}",
    new { controller = "Blog", action = "Blog", id = UrlParameter.Optional }
); 
```

# android - 在 Android 中将图表导出为图像

> ID：13068495
> 
> 赞同：3
> 
> 时间：2012-10-25T12:23:01.743
> 
> 标签：android, image, charts, export, save

我被困在这将近一个月了。我的 android 代码中有一个使用“afreechart”的完美图表，但是，该库似乎还不支持将图表导出为图像（因为它基于“jfreechart”，而这个可以完成工作）。

我试图获取图表的视图，将其转换为画布并使用位图库的压缩功能进行保存，但是每次我尝试这样做时，我都会得到一个全黑的图像。我尝试了同样的方法，它适用于我的代码的其他视图（简单视图，如线性布局和相对布局）。

之后，我尝试创建一个例程来制作图表活动的屏幕截图并在此之后关闭该活动。但是我找不到通过代码来做到这一点的方法，我得到的最接近的是monkeyrunner。

所以我放弃了这个想法并试图寻找其他库，例如'kichart'，'achartengine'等，但它们似乎都没有完成这项工作，我吓坏了，我认为导出图表图像不会那么难......有什么想法吗？

当我为布局设置背景颜色时，返回的图像是一个带有背景颜色的完整矩形，所以它得到的是布局，而不是图表。

我的代码：

```
package com.kichart;

import java.io.File;
import java.io.FileOutputStream;

import android.app.Activity;
import android.content.Context;
import android.graphics.Canvas;
import android.graphics.Bitmap;
import android.graphics.Color;
import android.os.Bundle;
import android.util.Log;
import android.view.View;
import android.widget.LinearLayout;

public class Main extends Activity {

    LinearLayout ll;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        float[] values = new float[] { 2.0f,1.5f, 2.5f, 1.0f , 3.0f };
        String[] verlabels = new String[] { "great", "ok", "bad" };
        String[] horlabels = new String[] { "today", "tomorrow", "next week", "next month" };
        GraphView graphView = new GraphView(this, values, "GraphViewDemo",horlabels, verlabels, GraphView.BAR);

        ll = new LinearLayout(this);
        ll.addView(graphView);

        Draw2d d = new Draw2d(this);
        setContentView(d);

        //setContentView(graphView);
    }

    public class Draw2d extends View {

        public Draw2d(Context context) {
            super(context);
            setDrawingCacheEnabled(true);
        }

        @Override
        protected void onDraw(Canvas c) {
            ll.setBackgroundColor(Color.WHITE);
            ll.measure(MeasureSpec.getSize(ll.getWidth()), MeasureSpec.getSize(ll.getHeight()));
            ll.layout(400, 400, 400, 400);
            ll.draw(c);

            try {
                getDrawingCache().compress(Bitmap.CompressFormat.PNG, 100, new FileOutputStream(new File("/mnt/sdcard/graph2.png")));
            } catch (Exception e) {
                Log.e("Error--------->", e.toString());
            }
            super.onDraw(c);
        }

    }

} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:33:51.513

您可以通过执行以下操作从视图中获取图像位图：

```
 Bitmap bitmap;
    chart.setDrawingCacheEnabled(true);
    bitmap = Bitmap.createBitmap(chart.getDrawingCache());
    chart.setDrawingCacheEnabled(false); 
```

如果您无法在图表上调用 getDrawingCache，请尝试将其放置在像 RelativeLayout 或类似的布局中。并在布局上调用它。

之后，您可以将其保存为图像..

如果图像仍然是黑色的，您需要确保在获取位图之前创建图表。

希望对你有帮助

# api - 构建移动网站的最佳实践

> ID：13068497
> 
> 赞同：0
> 
> 时间：2012-10-25T12:23:07.060
> 
> 标签：api, rest, web-applications, mobile, scaling

我即将开始构建一个动态的移动站点，它使用大量必须来自数据库的动态内容。

我已经为 IOS 和 Android 应用程序用来与信息交互的站点编写了一个 REST API。

我的问题是建立这个网站的绝对最佳实践是什么，它是：

**1-使移动类成为现有站点功能的扩展**

（我在这里看到的缺点是移动站点将依赖于主站点库，这意味着主站点上的任何不良热量也会影响移动站点）

**2- 使移动网站成为一个完全独立的网站，独立运行**

（我在这里看到的缺点是对主站点库的任何更改都需要在这里反映，所以本质上我们几乎要编写两次代码）

**3- 使移动站点从 REST API 运行并独立运行**

（我在这里看到的缺点只是增加了对信息的 HTTP 请求数量，而不是直接与服务器通信）

每个都可以正常运行，那里不会有任何问题，编码真的不是太难，但如果我让它独立，我需要从主站点重新创建很多功能并调整它们以适应移动站点这并不理想。

期待您的评论！谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-01T14:47:24.960

我会选择第三点，但这需要很好的架构师。

我们将在该 API 之后优先考虑独立应用程序，我们也可以进行 2 路通信，服务器上更改的任何内容都将与客户端协调以进行更新。

另外我还建议使用 Bootstrap 框架，它是一个很棒的框架，并且具有响应式和自适应设计

# c# - 需要帮助将自定义类添加到应用程序设置

> ID：13068500
> 
> 赞同：0
> 
> 时间：2012-10-25T12:23:20.663
> 
> 标签：c#, winforms, settings

我正在尝试使用内置的应用程序设置将用户上下文（即当前登录的用户）存储到我的 Winform 应用程序。但是，当我右键单击我的项目，单击属性，然后单击浏览类型时，我的项目中的类不是一个选项。我的解决方案中有两个其他项目，并且这些项目中的类可用。谁能告诉我为什么我的项目中的类不能添加到应用程序属性中？我想我可以创建另一个项目来管理用户上下文，但是我们的安全性非常简单，我不想这样做。另外，我知道我可以使用依赖注入来传递用户上下文对象，但是，同样，这是一个非常简单的安全模型，只需要知道哪个用户登录，以便正确记录交易和审计跟踪。提前致谢。

顺便说一句，我刚刚创建了一个新项目并确保我的项目依赖于它。然后，我检查了我添加到其中的类是否是应用程序设置中的可用类型，而它们不是。因为我的其他项目中的类可以存储为应用程序属性，所以我必须缺少一些简单的东西。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:09:40.763

我认为您必须创建另一个项目来存储自定义类。通过执行以下步骤，我能够完成我想做的事情：

1) 创建另一个项目 2) 将我的用户安全类移动到该项目 3) 从我的项目中添加对新用户安全项目的引用 4) 清理我的项目 5) 重建我的项目 6) 打开应用程序设置 7) 单击浏览并选择从我的用户安全项目中输入

# sql-server - Sql server Zip-Up 结果？

> ID：13068502
> 
> 赞同：2
> 
> 时间：2012-10-25T12:23:27.077
> 
> 标签：sql-server

我创建了这个[sql DEMO](https://data.stackexchange.com/stackoverflow/query/edit/83198)：

我有 #tbl1 ：

```
___cola__
  1
  2
  3
  4 
```

和 #tbl2 ：

```
_colb_
  a
  b
  c
  d 
```

我要这个 ：

```
_colb____|__cola____
  a           1
  b           2
  c           3
  d           4 
```

我找到了解决方案（恕我直言）

```
SELECT table1.cola, table2.colb FROM
(SELECT cola, ROW_NUMBER() OVER (ORDER BY cola) AS rn1 FROM #tbl1) table1,
(SELECT colb, ROW_NUMBER() OVER (ORDER BY colb) AS rn2 FROM #tbl2) table2
WHERE table1.rn1 = table2.rn2 
```

对于知识，我**还能**怎么做？

我从：

`SELECT cola , s.f FROM #tbl1 cross apply(select colb as f from #tbl2) s`

但是右边的部分有问题。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T12:30:29.580

这是一个替代方案：

```
SELECT cola, colb
FROM (
  SELECT a.cola, b.colb,
         rna=row_number() over (partition by colb
                                order by cola),
         rnb=row_number() over (partition by cola
                                order by colb)
  FROM #tbl1 a
  CROSS JOIN #tbl2 b
  ) X
WHERE rna=rnb; 
```

还有一个：

```
;WITH
 a1 AS (SELECT cola, ROW_NUMBER() OVER (ORDER BY cola) AS rn1 FROM #tbl1),
 a2 AS (SELECT colb, ROW_NUMBER() OVER (ORDER BY colb) AS rn2 FROM #tbl2)
SELECT a1.cola, a2.colb
FROM a1
JOIN a2 on a1.rn1=a2.rn2; 
```

但老实说，第二个只是重新排列查询的部分 - 执行计划与您的完全一样。它有效，并且是此类`zip-up`查询的最有效计划。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:37:25.923

```
;with CTE1 as (select col1,row_number() over (order by (select 0)) as rn from #tbl1)
,with CTE2 as (select col1,row_number() over (order by (select 0)) as rn from #tbl2)

select c1.col1,c2.col1 from CTE1 c1 inner join CTE2 c2
on c1.rn=c2.rn 
```

# c++ - 分数元类减法方法不编译

> ID：13068507
> 
> 赞同：1
> 
> 时间：2012-10-25T12:23:39.400
> 
> 标签：c++, metaprogramming

我正在尝试编写`struct Fraction`在编译时执行基本操作的代码。请注意，这没有任何实际用途 - 我只是作为练习。

我从这个开始：

```
namespace internal
{
    // Euclid algorithm
    template <int A, int B>
    struct gcd
    {
        static int const value = gcd<B, A % B>::value;
    };

    // Specialization to terminate recursion
    template <int A>
    struct gcd<A, 0>
    {
        static int const value = A;
    };
}

template <int Numerator, int Denominator>
struct Fraction
{
    // Numerator and denominator simplified
    static int const numerator = Numerator / internal::gcd<Numerator, Denominator>::value;
    static int const denominator = Denominator / internal::gcd<Numerator, Denominator>::value;

    // Add another fraction
    template <class Other> struct add
    {
        typedef Fraction<
            Numerator * Other::denominator + Other::numerator * Denominator,
            Denominator * Other::denominator
        > type;
    };
}; 
```

这编译并工作：`Fraction<1,2>::add< Fraction<1,3> >::type`将是`Fraction<5,6>`. 现在我尝试加减法：

```
template <class Other>
struct sub
{
    typedef typename Fraction<Numerator, Denominator>::add<
        Fraction<-Other::numerator, Other::denominator>
    >::type type;
}; 
```

但我得到一个我不明白的编译器错误：

```
Error: "typename Fraction<Numerator, Denominator>::add" uses "template<int Numerator, int Denominator> template <class Other> struct Fraction::add" which is not a type 
```

有人可以向我解释编译器在说什么，为什么不允许我做我想做的事吗？顺便说一句，我正在使用`g++ 4.4.6`。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T12:25:44.713

使用模板关键字。

```
template <class Other>
struct sub
{
    typedef typename Fraction<Numerator, Denominator>::template add<
        Fraction<-Other::numerator, -Other::denominator>
    >::type type;
}; 
```

[http://liveworkspace.org/code/26f6314be690d14d1fc2df4755ad99f6](http://liveworkspace.org/code/26f6314be690d14d1fc2df4755ad99f6)

阅读这篇[文章我必须在哪里以及为什么要放置“模板”和“类型名”关键字？](https://stackoverflow.com/questions/610245/where-and-why-do-i-have-to-put-the-template-and-typename-keywords)以获得更好的解释。

# eclipse - Eclipse 4.2 发布透视图问题

> ID：13068508
> 
> 赞同：1
> 
> 时间：2012-10-25T12:23:43.587
> 
> 标签：eclipse, user-interface

我已经下载了最新的 Eclipse 平台 4.2.1 并面临为不同视角配置视图的问题。

我无法为不同的透视图独立配置视图，在配置了一些透视图并切换到另一个透视图后，我可以看到我的更改已应用于所有透视图。这对我来说是不可取的。有没有办法使用旧的“独立”风格的视角配置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:52:19.277

您可能遇到的是 Eclipse 4.2 (Juno) 中的一个新“特性”，即能够将视图拖出透视图。这个新的视图“区域”不管是什么透视图都会出现，所以你看到的是你已经把视图放在那里了，现在它们出现在所有的透视图中，看起来好像所有的透视图都被改变了。

他们（Eclipse 平台 UI 团队）正在对视图的拖放进行一些改进，据说这将使执行此操作变得更加困难，从而减少用户的困惑。请参阅[https://bugs.eclipse.org/bugs/show_bug.cgi?id=367920](https://bugs.eclipse.org/bugs/show_bug.cgi?id=367920)和[https://bugs.eclipse.org/bugs/show_bug.cgi?id=349867](https://bugs.eclipse.org/bugs/show_bug.cgi?id=349867)

# java - “Java 是可移植的”是什么意思？

> ID：13068510
> 
> 赞同：13
> 
> 时间：2012-10-25T12:23:44.823
> 
> 标签：java, portability

我对 Java 的可移植性感到困惑。如果 Java 语言是可移植的，为什么`enum`在 J2ME 中是未知的？

在 C++ 中，使用哪个平台或库并不重要。“C++ 语言”不会在所有平台上发生变化。

我的目的是开发一个 Java 库，它只使用原始类型，如`int`、`String`或`Array`（类似于 的库`Genetic algorithms`）。我想在移动和桌面应用程序中使用这个库。但似乎`enum`和其他一些关键字并非在所有平台上都存在。

所以我想我误解了“Java 可移植性”的含义。这意味着什么？

* * *

## 回答 #1

> 赞同：20
> 
> 时间：2012-10-25T12:26:34.823

Java 有三种风格：移动版 ME、桌面版 SE 和企业版 EE。

“Java 是可移植的”是指 SE 版本。这意味着您可以在任何具有兼容 JVM 的硬件上运行 Java*字节码。*

这并不意味着 ME 与 SE 相同，即与 EE 相同。EE 有 EJB，但 SE 和 ME 没有。这并没有降低它们的便携性。

> C++ 语言不会在所有平台上发生变化。

这种说法并不完全正确。微软向他们的 C++ 中添加了无法在其他地方运行的扩展。

只要您远离特定于平台的扩展，ANSI C++ 可能意味着可移植*源代码。*这并不意味着可移植的字节码；您可能需要重新编译和重新链接。

你想在手机上运行遗传算法吗？我知道移动设备已经变得非常强大，但我被教育认为 GA 将成为服务器端功能。移动设备对我来说更像是视图。

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T12:41:05.490

每个硬件架构都有自己独特的指令集（添加 ax、bx...），当您构建 C++ 代码时，编译器会将其转换为特定于您正在处理的系统/架构的机器代码。所以你必须为不同的架构定制和构建你的代码才能在它们上工作。

但是在java中发生的是，当你构建它时，它被编译成字节码（而不是机器码）。Java 虚拟机 (JVM) 将字节码解释为您运行程序的特定架构可以理解的指令。每个主要架构和操作系统都有 JVM，因此您在 Windows 上编写的代码将被解释并在 MAC-OS 或 linux 上运行，而无需您进行任何源代码级别的修改。这就是 Java 具有可移植性的原因，这就是***Write Once Run Everywhere***座右铭的来源

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-25T12:27:50.430

Java 被称为“可移植语言”，因为 Java 代码可以在所有主要平台上执行。更重要的是，一旦您将 Java 源代码编译为“字节码”.class，这些文件无需修改即可在任何支持 Java 的平台上使用，这与许多其他需要为每个平台编译“机器代码”的语言不同，例如，用于 32 位和 64 位环境的单独“.exe”。

“可移植”的另一个含义，主要用于 Windows 环境，意味着 Java 运行时环境可以从文件系统中的任意位置运行，并且不需要“安装”，即将重要信息存储在Windows 注册表。对于大多数 Java 应用程序也是如此，并且使它们能够从不同的驱动器号运行，例如通过任何计算机上的 USB 闪存驱动器等外部存储设备，而无需先安装应用程序。

* * *

## 回答 #4

> 赞同：4
> 
> 时间：2016-05-31T09:10:59.053

Java 提供了三种不同类型的可移植性：

**源代码可移植性**：无论底层 CPU、操作系统或 Java 编译器如何，给定的 Java 程序都应该产生相同的结果。

**CPU 架构可移植性**：当前的 Java 编译器为尚不存在的 CPU 生成目标代码（称为字节码）。对于打算运行 Java 程序的每个真实 CPU，Java 解释器或虚拟机“执行”J 代码。这个不存在的 CPU 允许相同的目标代码在任何存在 Java 解释器的 CPU 上运行。

**OS/GUI 可移植性：** Java 通过提供一组库函数（包含在 Java 提供的库中，如 awt、util 和 lang）来解决这个问题，这些库函数与想象的 OS 和想象的 GUI 对话。就像 JVM 提供一个虚拟 CPU 一样，Java 库提供一个虚拟 OS/GUI。每个 Java 实现都提供了实现这个虚拟 OS/GUI 的库。使用这些库提供所需操作系统和 GUI 功能的 Java 程序相当容易移植。

看到这个[链接](http://www.javaworld.com/article/2076944/java-s-three-types-of-portability.html)

* * *

## 回答 #5

> 赞同：3
> 
> 时间：2012-10-25T12:52:00.227

虽然 C 和 C++ 语言的语法和语义是标准化的，但要编写一个真正的跨平台应用程序非常困难，除非您将自己限制在非常基本的应用程序中。

这有许多高级和低级原因 - 从[字节序](http://en.wikipedia.org/wiki/Endianness)到如何与底层操作系统交互（例如打开窗口）。

此外，C/C++ 源代码只能被认为是可移植的，而不是编译的结果——生成的可执行代码和库不可移植，系统架构（例如不同的 CPU）和操作系统之间存在重大差异。

Java 是解决这两个问题的相当成功的尝试：

1.  Java 不会将代码编译为汇编，而是将代码编译为更抽象的“字节码”——一种由虚拟机 (JVM) “解释”或“动态重新编译”为汇编的伪汇编语言。这种转换通常相当有效，因为字节码主要是一种低级语言。某些版本的 ARM 处理器甚至可以本地执行字节码。因此，一旦编译了 java 应用程序，结果就可以在“任何”架构上运行（前提是该机器可以使用 JVM）

2.  Java 捆绑了一个非常大的运行时库，它不仅提供了最常见数据结构的广泛实现（在 JVM 中以针对特定架构最有效的方式实现），还提供了“硬件和软件抽象层”——你可以在编码时以标准方式与系统交互，将其转换为适当的体系结构和操作系统调用是 JVM 的工作。例如，Java 提供了 Swing 框架，它允许您以独立于系统的方式创建 GUI - 即，您打开一个窗口，这在 Windows 中被转换为 Win32/MFC 调用，在 Linux 中被转换为 XWin 调用

也就是说，java有不同的“类型”：

1.  JavaSE 是最常见的
2.  JavaME 是一个精简版，具有有限的库，没有实现 Java5.0 语言更改
3.  企业级 JavaEE，与 JavaSE 相同，但运行时更大
4.  Android Java，主要与 JavaSE 兼容，但具有特定于 android 手机的附加功能

但是，您应该知道 Java 体系结构的设计允许互操作性，特别是允许混合为不同版本甚至不同“类型”构建的库

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-25T12:26:40.390

这意味着您在一台机器上编写的 java 程序将在任何其他机器上运行，只要该机器具有 JVM。

参考这个[链接](https://stackoverflow.com/q/3925947/1034737)。

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2012-10-25T12:32:15.523

可移植性是指在不同机器上运行程序的能力。在不同的机器上运行给定的程序可能需要不同的工作量（例如，不做任何工作、重新编译或对源代码进行小的更改）。当人们将 Java 应用程序和小程序称为可移植的时，通常是指应用程序和小程序运行在不同类型的机器上而没有任何更改（例如重新编译或调整源代码）。

# mysql - 按不同列排序

> ID：13068513
> 
> 赞同：0
> 
> 时间：2012-10-25T12:23:52.023
> 
> 标签：mysql, sql, postgresql, sqlite

我有这个数据，在一个表中`categories`

```
id | name | post_count
 1 | A    | 10
 2 | B    | 15
 3 | C    | 8
 4 | D    | 14
 5 | E    | 1
 6 | F    | 20 
```

我想按 获取前 4 个类别，`post_count`并按 对它们进行排序`name`。

如果我做

```
SELECT * FROM categories ORDER BY post_count DESC LIMIT 4 
```

我将按顺序获取类别：`F, B, D, A`，而我想要`A, B, D, F`

这可以通过单个 SQL 查询实现吗？我怎样才能做到这一点？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:25:49.650

您可以使用子查询：

```
SELECT * FROM (SELECT * FROM 
               categories ORDER BY 
               post_count DESC LIMIT 4) AS A
ORDER BY name 
```

## [看到这个 SQLFiddle](http://sqlfiddle.com/#!2/c482c/1)

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T12:27:18.120

```
select * from (

SELECT * FROM categories ORDER BY post_count DESC LIMIT 4)a
order by name 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T12:26:51.173

```
select *
from (
    select *
    from categories
    order by post_count desc
    limit 4
) s
order by name 
```

# google-chrome - 使用位图的视频在 chrome 中不起作用 - EaselJS

> ID：13068516
> 
> 赞同：2
> 
> 时间：2012-10-25T12:23:58.880
> 
> 标签：google-chrome, video, bitmap, easeljs

我将easelJS用于HTML5项目
问题是我已经放置了一个视频元素，
当我尝试将其添加到EaselJS阶段时，该元素正在加载和播放良好

```
var v = document.getElementById('StartingVideo');
                var vBmp = new _.Bitmap(v);
                stage.addChild(vBmp);
                v.play() 
```

它在 ie9 中运行良好，并且可以播放视频，但不能在 chrome 中播放。
在 chrome 中，视频元素中的实际视频播放正常，但在`canvas`

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-12-29T20:29:42.893

下面的代码对我有用：

```
 var video =  document.getElementById("sourcevid");
        var bitmap =  new createjs.Bitmap (video);
        stage.addChild (bitmap); 
```

我目前唯一坚持的是视频高度/宽度的动态变化

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-02T11:40:45.203

我最终在画布上放置了一个视频叠加层。

# asp.net - Unicode 映射...ASP.NET

> ID：13068517
> 
> 赞同：0
> 
> 时间：2012-10-25T12:24:02.027
> 
> 标签：asp.net, web, c#-2.0, globalization

问候，

我一直在开发在 asp.net 中使用全球化的网站（嗯，实际上它不是全球化）:)

我想做的是我想以多种语言显示我的网站（固定-：英语、Gurmuki 和 Shahmukhi（印度语言））。

为了在屏幕上显示这些标记，我已经完成了映射..例如

Char Unicode Shahmukhi-Char Unicode garmukhi-char Unicode 一个 65 个字符的 unicode shahmukhi 的 Shahmukhi 的 unicode 字符 garmukhi garmukhi

我已经使用 jQuery 创建了一个演示，并为每个字符替换进行了上述映射。在 ASP.net c# 中是否有另一种更好的方法来做到这一点。如果您对我提供的信息感到不舒服，请告诉我。

重要的是，我不想使用谷歌翻译或其他第三方等已经制作的组件。我愿意自己开发..只需要这样做的方式。

感谢你并致以真诚的问候。

# c# - 如果窗口的所有者是通过 WindowInteropHelper 设置的，如何获取窗口的所有者？

> ID：13068518
> 
> 赞同：2
> 
> 时间：2012-10-25T12:24:05.240
> 
> 标签：c#, wpf

我有通过 WindowInteropHelper 设置其所有者的父窗口。在这种情况下，Parent.Owner 等于 null。有没有办法获得拥有窗口的表单句柄？

我需要这个用于对话窗口。当我尝试将关闭的对话框窗口设置为所有者时，我得到了异常。因此，我想将对话框的所有者设置为另一个对话框的所有者。但它是 WinForm 和 DialogWindow.Owner 等于 null。

WinForm（通过WindowInteropHelper-> WPF父对话框（关闭）-> WPF子对话框

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T13:03:50.123

要获取拥有特定 WPF 窗口的 WinForms 表单的句柄，您可以使用以下代码：

```
IntPtr ownerFormHandle = new WindowInteropHelper(wpfWindow).Owner 
```

要获取拥有特定窗口（WinFroms 或 WPF）的任何窗口（WinFroms 或 WPF）的句柄，您可以使用以下代码：

```
IntPtr ownerHandle = WinAPI.GetWindow(handle, WinAPI.GW_OWNER);
//...
public static class WinAPI {
    public const uint GW_OWNER = 4;
    [System.Runtime.InteropServices.DllImport("User32.dll")]
    public static extern IntPtr GetWindow(IntPtr hWnd, uint uCmd);
} 
```

# asp.net - 从 html 页面到 .aspx 页面的 URL 重定向

> ID：13068519
> 
> 赞同：1
> 
> 时间：2012-10-25T12:24:20.150
> 
> 标签：asp.net, html, iis, web, isapi-redirect

我有一个要求，我必须在我的旧网页中使用 url 重定向（基本上它是一个完整的静态 html 页面）。

我的要求是每次都重定向用户，从静态 html 页面到 .aspx 页面

即，如果发现我的早期页面位于

```
http://web.vatsag.com/app/en/downloadsite.htm 
```

然后我必须重定向到以下页面（.aspx）

```
http://web.vatsag.com/app/newdownloadsite.aspx 
```

我浏览了以下链接，主要讨论重定向 wrt ASP.NET

[http://www.codeproject.com/Articles/2538/URL-Rewriting-with-ASP-NET](http://www.codeproject.com/Articles/2538/URL-Rewriting-with-ASP-NET)

然而，

由于页面是html。我假设默认情况下不由 ASP.NET ISAPI 过滤器处理

任何人都可以使用下面指定的任何替代方法帮助我实现同样的目标吗？

1.  可以在 IIS 端完成的任何特定设置

2.  使用 Meta Refresh 以编程方式实现重定向（尽管我听说这种方法非常不鼓励）

提前致谢

增值税

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:27:01.577

在头标签之间，放上这段代码。

```
<head>       
    <meta http-equiv="refresh" content="2;URL='http://web.vatsag.com/app/newdownloadsite.aspx'" />    
  </head> 
```

这将在 2 秒后重定向到[http://web.vatsag.com/app/newdownloadsite.aspx](http://web.vatsag.com/app/newdownloadsite.aspx)

内容 = 刷新的秒数 URL = 重定向到的 URL 路径 不鼓励元刷新的原因是垃圾邮件发送者使用它们将用户从具有大量关键字的 shell 站点重定向到非合法站点。因此，搜索引擎将使用该元刷新的网站列入垃圾邮件发送者的黑名单。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:27:12.220

[此处](http://www.webworkshop.net/auto-redirecting_methods.html)描述了这样做的不同选项。您基本上可以添加一个元标记以在一秒钟后刷新页面到 aspx 页面或使用 javascript。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T12:35:31.007

您可以使用[ISAPI 重写](http://www.helicontech.com/download-isapi_rewrite3.htm)并让 IIS 服务器重定向您的 .html 页面。使用以下规则：

```
RewriteRule ^app/en/downloadsite.htm$ /app/newdownloadsite.aspx [NC,R=301,L] 
```

# java - playframework：如何重定向到控制器操作方法中的后调用

> ID：13068523
> 
> 赞同：1
> 
> 时间：2012-10-25T12:24:40.743
> 
> 标签：java, playframework-2.0

我有一些路线定义为：

```
Post /login  controllers.MyController.someMethod() 
```

在里面`someMethod`我用来`DynamicForm`从发布请求中提取参数。

在浏览器或任何使用 Post 方法的客户端上都可以正常工作。

但是，如果我需要在某个操作方法（比如说`someAnotherMethod`）中调用这个 url 并且还想传递一些参数，我该如何实现呢？我的意思是：

```
public static Result someAnotherMethod() {
// want to put some data in post request body and
return redirect(routes.MyController.someMethod().url()); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T14:14:20.943

### 1\. 带参数（这不是重定向！）

您可以`Result`从其他方法返回而无需重定向：

```
public static Result someMethod(){
    DynamicForm dynamicForm = form().bindFromRequest();
    return otherMethod(dynamicForm);
}

public static Result otherMethod(DynamicForm dataFromPrevRequest) {
    String someField = dataFromPrevRequest.get("some_field");
    Logger.info("field from request is: " + someField);
    return ok("Other method's Result");
} 
```

### 2\. 带缓存（可能是这些解决方案中 POST 数据的最佳替换）

您还可以将来自传入请求的数据存储到数据库，甚至“更便宜”到[缓存](http://www.playframework.org/documentation/2.0.4/JavaCache)，然后以其他方法获取它：

```
public static Result someMethod(){
    DynamicForm dynamicForm = form().bindFromRequest();

    Cache.set("df.from.original.request", dynamicForm, 60);
    return redirect(routes.Application.otherMethod());
}

public static Result otherMethod() {
    DynamicForm previousData = (DynamicForm) Cache.get("df.from.original.request");

    if (previousData == null) {
        return badRequest("No data received from previous request...");
    }

    // Use the data somehow...
    String someData = previousData.get("someField");

    // Clear cache entry, by setting null for 0 seconds
    Cache.set("df.from.original.request", null, 0);

    return ok("Previous field value was " + someData);
} 
```

### 3\. 作为普通的 GET

最后，您可以只创建带有所需参数的方法并将它们传递给第一个方法（接收请求）。

```
public static Result someMethod(){
    DynamicForm df = form().bindFromRequest();

    return redirect(routes.Application.otherMethod(df.get("action"), df.get("id")));
}

public static Result otherMethod(String action, Long id) {
    return ok("The ID for " + action +" action was" + id);
} 
```

# python - 更新列表的元素

> ID：13068526
> 
> 赞同：1
> 
> 时间：2012-10-25T12:24:56.783
> 
> 标签：python, list, updating

为什么在 for 循环中不更新元素？这让我

```
met_dir = r'D:\09052012\run\fout'
out_dir = r'D:\inpassingstest\test_cmd'

for c_dir in [met_dir,out_dir]:
    if c_dir[-1:] != '\\':
       c_dir += '\\'
       print c_dir
print met_dir

>>>D:\09052012\run\fout\
>>>D:\inpassingstest\test_cmd\
>>>D:\09052012\run\fout 
```

当我使用索引来寻址元素时也会发生同样的情况。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:29:27.693

字符串是不可变的对象，也就是说，您不能更改它，而是创建新的字符串。这意味着当您附加到字符串时，原始内容保持不变。对此的简单解决方案是列表推导，以创建新字符串的新列表：

```
>>> [c_dir + "\\" if not c_dir.endswith("\\") else c_dir for c_dir in (met_dir, out_dir)]
['D:\\09052012\\run\\fout\\', 'D:\\inpassingstest\\test_cmd\\'] 
```

哪一个可以轻松解压缩成值：

```
met_dir, out_dir = [...] 
```

请注意，我使用`str.endswith()`它是一种很好的检查方式。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:28:12.000

字符串在 Python 中是不可变的。`c_dir += '\\'`创建一个`\\`附加的新字符串，但不替换原始字符串。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T12:28:55.447

`strings`在 Python 中是不可变的，你不能像那样改变它们的内容。在这一行中会发生什么：

```
c_dir += '\\' 
```

局部变量`c_dir`被替换为新字符串（`\\`附加）。当您离开循环迭代时，这个新字符串会丢失。

# c++ - 构造函数抛出异常时子对象的销毁顺序

> ID：13068531
> 
> 赞同：1
> 
> 时间：2012-10-25T12:25:10.867
> 
> 标签：c++, exception-handling

这个问题的灵感来自[Using an object after it's destructor is called](https://stackoverflow.com/questions/13067765/using-an-object-after-its-destructor-is-called)

让我们考虑以下代码

```
class B 
  {
  public:
    B() { cout << "Constructor B() " << endl; }
    ~B() { cout << "Destructor ~B() " << endl; }
  };

class A {
public:
  B ob;
  A()
      try
      { 
      throw 4;
      }
    catch(...)
      {
      cout << "Catch in A()\n";
      }

  A(int)
    {
    try
      {
      throw 4;
      }
    catch(...)
      {
      cout << "Catch in A(int)\n";
      }
    }
  };

int main()
  {
  try
  {
      A f;
  }
  catch (...)
  {
      cout << "Catch in main()\n\n";
  }
  A g(1);
  } 
```

它的输出是

```
Constructor B() 
Destructor ~B() 
Catch in A()
Catch in main()

Constructor B() 
Catch in A(int)
Destructor ~B() 
```

与 相比`A(int)`，构造函数`A()`具有初始化列表 try/catch 语法。为什么这对子对象销毁的顺序有影响？为什么抛出的异常`A()`传播到`main()`？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:31:57.403

> 为什么这对子对象销毁的顺序有影响？

当在 A(int) 中捕获时 - 所有子对象都处于活动状态，您可以使用它们。此外，在 catch 之后，您可以继续对象构造，并“返回”给用户正确构造的对象。

当在 A() 中捕获时 - 所有已构建的子对象都被破坏。而且你不知道哪些子对象是被构造的，哪些不是——至少在当前的 ISO C++ 语法中是这样。

> 为什么 A() 中抛出的异常会传播到 main()？

检查[GotW #66](http://www.gotw.ca/gotw/066.htm)：

> 如果处理程序主体包含语句“throw;” 那么 catch 块显然会重新抛出 A::A() 或 B::B() 发出的任何异常。不太明显但在标准中明确说明的是，如果 catch 块没有抛出（重新抛出原始异常，或者抛出新的异常），并且控制到达构造函数或析构函数的 catch 块的末尾，那么原始异常会自动重新抛出。
> 
> 想想这意味着什么：构造函数或析构函数-try-block 的处理程序代码必须通过发出一些异常来完成。没有别的办法。语言并不关心发出的是什么异常——它可以是原始异常，也可以是其他翻译的异常——但必须有异常！不可能防止基类或成员子对象构造函数引发的任何异常导致某些异常泄漏到其包含的构造函数之外。
> 
> 简而言之，它意味着：
> 
> 如果任何基础或成员子对象的构造失败，则整个对象的构造必须失败。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:31:01.577

不同的是在结尾处：

```
A()
try
{ 
  throw 4;
}
catch(...)
{
  cout << "Catch in A()\n";
} 
```

异常被隐式地重新抛出并且没有对象`A`被构造，而在：

```
A(int) {
try
{ 
  throw 4;
}
catch(...)
{
  cout << "Catch in A(int)\n";
}
} 
```

你吞下异常并且`A`完全构造了一个实例。

析构函数仅在完全构造的对象上运行，即构造函数成功完成的对象，不会引发异常。

编辑：根据子对象的破坏，`catch`第一种情况是在子对象被破坏*后运行。*这与成员初始化语法一致，表明它应该是实际发生的：

```
A()
try : ob() // default construct
{ 
  throw 4;
}
catch(...)
{
  // here ob is already destructed
  cout << "Catch in A()\n";
} 
```

（相当于第一种情况。）

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T12:32:02.123

> 为什么这对子对象销毁的顺序有影响？

*通常*，在 的函数 catch 子句中`A()`，您不会知道哪些成员已成功构造，因为异常可能来自它们的构造函数之一。因此，为了消除怀疑，它们首先被摧毁。基本上，函数 try/catch 是在数据成员构造的“外部”。

> 为什么 A() 中抛出的异常会传播到 main()？

函数catch子句不能使构造函数成功（因为如果它的成员没有构造成功，那么对象本身也没有构造成功）。因此，如果您不从中抛出其他东西，那么将重新抛出原始异常。这就是它的定义方式，您不能使用函数尝试子句来忽略问题。您可以在函数中使用常规的 try/catch 来忽略问题，然后由您决定问题是否阻止了正确构造对象。

# php - 这是否可以声明一个可以存储超过 512 个字符的 php 变量

> ID：13068532
> 
> 赞同：1
> 
> 时间：2012-10-25T12:25:25.017
> 
> 标签：php

场景看起来像这样

```
$data=$_REQUEST['data'];
echo $data
the url is www.mysite.com/service.php?data=
 and the possible value for the key will be `100005772653,0|102795882836,0|100005772653,0|102795882836,0|100005772653,0|102795882836,0|100005772653,0|102795882836,0|100005772653,0|102795882836,0|100005772653,0|102795882836,0|100005772653,0|102795882836,0|100005772653,0|102795882836,0|100005772653,0|102795882836,0|100005772653,0|102795882836,0|100005772653,0|102795882836,0|100005772653,0|102795882836,0|100005772653,0|102795882836,0|100005772653,0|102795882836,0|100005772653,0|102795882836,0|100005772653,0|102795882836,0` 
```

我正在编写一个简单的插入查询。当数据字段的长度超过 512 个字符时，代码将失败。所以这种情况促使我发布这样一个具有极限值的问题。

如果我回显**$data**它只显示一个空（空数据）。如果给定的数据较少，则将其插入。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T12:27:26.877

谁说 PHP 只能存储 512 个字符？你做错了什么，你可以存储你想存储在变量中的任何数量的数据..

正如 Alvin Wong 分享的一个[链接](http://php.net/manual/en/language.types.string.php)，它说 PHP`string`可以大到 2GB

测试用例，尝试运行这个

```
<?php
   $string = 'Blah blah';
   for($i=1; $i<=10000; $i++) {
    $string .= 'Blah blah';
   }
   echo $string;
?> 
```

# php - MongoDB，在集合之间使用 Mongodb ObjectID

> ID：13068533
> 
> 赞同：4
> 
> 时间：2012-10-25T12:25:26.710
> 
> 标签：php, mongodb

使用 PHP 和 MongoDB，我在同一个数据库中有一个名为 users 的集合和另一个名为 forms 的集合。

我使用 Mongodb ObjectID 作为表单集合中文档的用户标识符，将用户 ObjectId 保存为每个表单文档上的 uid。

我将在表单集合中创建 uid 字段的索引，但我的问题是我应该如何保存用户 Objectid？

截至目前，我将其保存为普通字符串，如（简化）

```
$collection->insert( array('formName'=>'The name','uid'=>'CURRENT_USERS_ObjectId_AS_string') ); 
```

在这种情况下，这似乎是逻辑还是最佳实践，可以为 uid 创建一个 Mongodb ObjectID，例如

```
$collection->insert( array('formName'=>'The name','uid'=> new MongoId('CURRENT_USERS_ObjectId_AS_string')) ); 
```

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T13:47:47.563

使用[手动参考](http://docs.mongodb.org/manual/applications/database-references/#manual-references)非常好 - 甚至推荐。仅在[DbRefs](http://docs.mongodb.org/manual/applications/database-references/#dbref)提供特定好处时才使用它们 - 例如允许自动取消引用（mongo 脚本或 php 代码可以自动知道 foo 指向集合 x，id y [in database z]）。

## 不同的类型是一个糟糕的设计

但是避免类型杂耍。

在一个集合中拥有实际上是外键的东西，并且它与它所指向的集合的类型不同，这是一个**糟糕**的设计。一般来说，类型杂耍是从开发中消除的东西，而不是引入。

## 想想数据库

像这样在数据库上运行的代码应该可以工作：

```
form = db.forms.findOne();
user = db.users.findOne({_id: form.user_id}); 
```

用户集合 _id 字段的类型无关紧要。使用问题中的架构，此代码变为：

```
form = db.forms.findOne();
user = db.users.findOne({_id: new MongoId(form.user_id)}); 
```

就其本身而言，这并不是一个巨大的差异，但这意味着您必须考虑/记住转换这些引用，并且如果/当创建使用不同类型的集合时，就会出现问题 - 它会引入不一致。

考虑以下：

```
> school = db.schools.insert({_id: 123, name: "my school"});
> userId = new ObjectId();
> db.users.insert({_id: userId, name: "Me"});
> db.forms.insert({user_id: userId, school_id: 123}); 
```

假设学校 id 是一个唯一的代码。如果它不可能改变 - 用作 _id 字段是合适的，也是一个好主意。现在，学校 id 和用户 id 是不同的类型：

```
> db.forms.findOne();
{
"_id" : ObjectId("508940370392baf87e68e31d"),
"user_id" : ObjectId("5089401c0392baf87e68e31b"),
"school_id" : 123
} 
```

如果它们按原样存储，则仍然可能完全不了解查询中的这些不同类型：

```
form = db.forms.findOne();
school = db.schools.findOne({_id: form.school_id});
user = db.users.findOne({_id: form.user_id}); 
```

如果使用*不同*的类型，这意味着有必要考虑“使用这个集合我需要将字符串转换为 ObjectId，但我不能使用这个**”**。

这是一个本可以避免的问题，但相反 - 它被引入了。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T12:39:17.527

现在我对 PHP 不熟悉，但是您建议的架构设计很好。我在我的 c# 实现中使用了类似的结构。这里要清楚的是我的架构设计示例

```
Account Class

public  ObjectId Id{get;set;}
public   string  Email {get;set}
public   string  Password{get;set;}

User Class

 public ObjectId Id{get;set;} 
 public string  AccountId {get;set}//refers to the ID in the account. 
```

现在，如果我想查询任何用户的帐户，我可以简单地使用用户类中的 accountId 来查询它。

MongoDb 将此引用技术称为手动引用，这也是它在这里推荐的链接[http://docs.mongodb.org/manual/applications/database-references/](http://docs.mongodb.org/manual/applications/database-references/)

# c# - 当我从 xml 文件中检索时，不会保留换行符。我用过cdata

> ID：13068539
> 
> 赞同：2
> 
> 时间：2012-10-25T12:25:47.620
> 
> 标签：c#, xml, mstest

我是使用 mstest 框架编写单元测试用例的新手，我被困在从 xml 文件中检索换行符作为预期值的输入。下面是一段测试方法

```
public void ExtractNewLineTest()

{
    MathLibraray target = new MathLibraray(); // TODO: Initialize to an appropriate value
    string expected = TestContext.DataRow["ExpectedValue"].ToString(); => I am retrieving the value from the xml file.
    string actual;
    actual = target.ExtractNewLine();
    Assert.AreEqual(expected, actual);
} 
```

下面是xml内容

```
<ExtractNewLineTest>
      <ExpectedValue><![CDATA[select distinct\tCDBREGNO,\r\n\tMOLWEIGHT,\r\n\tMDLNUMBER\r\nfrom Mol]]></ExpectedValue>
 </ExtractNewLineTest> 
```

当我从 xml 检索数据到预期值时，我得到低于字符串

```
ExpectedValue = “select distinct\\tCDBREGNO,\\r\\n\\tMOLWEIGHT,\\r\\n\\tMDLNUMBER\\r\\nfrom Mol”; 
```

如果我们看到上面的值，就会为 \n 和 \r 添加额外的斜线。请让我知道，我如何断言这个值。谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:29:47.180

您的 XML 文件不包含换行符。它包含一个反斜杠，后跟一个`t`,`r`或`n`。该组合是忠实地从 XML 文件中读取的，然后调试器在向您显示它时会转义反斜杠。

如果您想对从 XML 读取的值应用“C# 字符串转义”规则，您可以这样做，但您应该知道您确实*需*要这样做。一个简单的方法是：

```
expectedValue = expectedValue.Replace("\\t", "\t")
                             .Replace("\\n", "\n")
                             .Replace("\\r", "\r")
                             .Replace("\\\\", "\\"); 
```

在某些情况下，这会做错事——例如，如果你有一个*真正的*反斜杠，后跟一个`t`. 不过，这对您来说可能已经足够了。如果没有，您将不得不编写一个“正确的”替换，它从一开始就读取字符串并处理各种情况。

# three.js - 三个js从js文件中加载模型的纹理/材质

> ID：13068543
> 
> 赞同：1
> 
> 时间：2012-10-25T12:25:55.857
> 
> 标签：three.js, blender

> **可能重复：**
> [Three.js 无法加载纹理](https://stackoverflow.com/questions/12857910/three-js-not-possible-to-load-textures)

就 ThreeJs 和搅拌机而言，我是一个初学者，所以这似乎是一个愚蠢的问题。我正在尝试使用 JSONLoader 加载模型。我使用了threejs blender导出并将collada模型导出到js。但是我无法直接从文件中获取材料。

经过检查，我发现 js 文件中缺少图像文件的属性，即“mapDiffuse”属性不存在。那是错误吗。如果有的话有什么建议吗？还是有其他加载材料的方法？

PS 这是我下载的 collada 模型，因此提供了纹理图像，尽管 blendor 导出没有注意到它。

我的模型 js 文件的一部分

{

```
"metadata" :
{
    "formatVersion" : 3.1,
    "generatedBy"   : "Blender 2.64 Exporter",
    "vertices"      : 1172,
    "faces"         : 2209,
    "normals"       : 736,
    "colors"        : 0,
    "uvs"           : [1722],
    "materials"     : 1,
    "morphTargets"  : 0,
    "bones"         : 0
},

"scale" : 1.000000,

"materials" : [ {
    "DbgColor" : 15658734,
    "DbgIndex" : 0,
    "DbgName" : "material_2_81_0",
    "blending" : "NormalBlending",
    "colorAmbient" : [0.6400000190734865, 0.6400000190734865, 0.6400000190734865],
    "colorDiffuse" : [0.6400000190734865, 0.6400000190734865, 0.6400000190734865],
    "colorSpecular" : [0.5, 0.5, 0.5],
    "depthTest" : true,
    "depthWrite" : true,
    "shading" : "Lambert",
    "specularCoef" : 50,
    "transparency" : 1.0,
    "transparent" : false,
    "vertexColors" : false
},
.
.
.
.
.

"vertices" : [1159.45,531.608,-1808.68,......]
"morphTargets" : [],
"normals" : [-0.101077,0,-0.994873,......]
"colors" : [],
"uvs" : [[0,0,1,0,0,1,....]
"faces" : [42,0,1,2,0,0,1,2,0,1,2,42,0...]

"bones" : [],

"skinIndices" : [],

"skinWeights" : [],

"animation" : {}
} 
```

谢谢你

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:55:45.887

我将向您指出我不久前回答的**[这个问题，这几乎是完全重复的。](https://stackoverflow.com/questions/12857910/three-js-not-possible-to-load-textures/12867247#12867247)**我不确定是否可以仅使用文件加载您的材料。我幸运的唯一方法是从我的代码中手动加载纹理，然后应用它们。只需使用导出器导出您的几何图形和 UV 映射，无需担心导出纹理。只需将它们收集起来，如果您在本地运行，请确保您使用的是服务器，否则您**将不会**能够从磁盘加载图像。此时，加载模型并应用纹理是非常简单的代码。为了将来参考，您还应该发布用于加载模型的代码。您需要利用给定函数的参数来传递回调，以便在完全加载之前不要尝试渲染任何内容。

```
var tex, mat, mesh;

$(window).load(function () {
    /** Load mesh from JSON, position, scale, add texture and add to scene */
    tex = THREE.ImageUtils.loadTexture('../img/texture.jpg', null, function () {
            mat = new THREE.MeshPhongMaterial({ map: tex });
            loader.load('model.js', function (geo) {
                mesh = new THREE.Mesh(geo, mat);
                mesh.position.set(0, 0, 0);
                mesh.scale.set(20, 20, 20);
                // etc, etc
                scene.add(mesh);
            });
        });
}); 
```

# python - pandas：在没有副本的分层索引上切片

> ID：13068551
> 
> 赞同：3
> 
> 时间：2012-10-25T12:26:14.217
> 
> 标签：python, pandas, data-analysis

我想在分层索引的特定级别修改某些行的 DataFrame 条目。这是一个典型的例子：

```
>>> index = pd.MultiIndex.from_arrays([['a','a', 'b', 'b'], [1,2,1,2]], 
...                                   names=['first', 'second'])
>>> data = pd.DataFrame(np.random.rand(len(index)), index=index, columns=['A'])
>>> print data
                     A
first second          
a     1       0.587781
      2       0.560407
b     1       0.492996
      2       0.267799 
```

我想将行设置为`second==2`0（例如）。我尝试使用`DataFrame.xs`方法，但它返回一个副本而不是一个视图：

```
>>> selected = data.xs(2, level='second')
>>> print selected
              A
first          
a      0.560407
b      0.267799

>>> selected['A']=0
>>> print data

                    A
first second          
a     1       0.587781
      2       0.560407
b     1       0.492996
      2       0.267799 
```

最后的分配没有影响`data`（它`selected`当然改变了值）。

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:49:13.240

在最新版本的 pandas`help(data.xs)`中展示了如何查看数据。

它可以通过使用来完成`xs arg copy=False`。

# css - 强制正确的最大宽度

> ID：13068556
> 
> 赞同：1
> 
> 时间：2012-10-25T12:26:25.577
> 
> 标签：css

我有以下情况：

```
<div style="max-width:300px;overflow-y:auto;overflow-x:scroll">
    <a href="#" style="display:block">sometext 1</a>
    ...
    <a ...>...</a>
</div> 
```

这是一个简化版本，我知道阅读长代码是多么无聊:) 现在我需要让 div 正确使用 tne max-width 属性。我不需要跨浏览器解决方案 - 只有最新的浏览器可以支持它。

问题：

如果 A 元素的内容中有空格 - 它将在空格之后被包装。所以在这种情况下，“sometext”将在一行中，“1”在另一行中：并且不应该换行直到 300px；

如果我将“max-width:300px”添加到 A 元素 - “1”不会被包裹，但是填充被忽略并且数字“1”在通过萤火虫查看时仍然看起来超出范围。

我不知道我是否设法正确解释了这一点，但我希望我做到了。

如果您不理解问题：

我需要使用上面的结构制作一个“弹出菜单”元素，以便它可以自动扩展，但只能到 300x200 像素。达到极限。

谢谢你的想法

**更新**

看起来 Opera 在这项任务上表现不错，但 Firefox 却没有。这是一个例子：

[http://jsfiddle.net/QGYwD/](http://jsfiddle.net/QGYwD/)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:48:10.513

如果您不希望任何文本`a`换行，请给它们一个`white-space:nowrap`.

[http://jsfiddle.net/QGYwD/1/](http://jsfiddle.net/QGYwD/1/)

# java - 初始化未知大小的多维/锯齿形字符串数组

> ID：13068565
> 
> 赞同：0
> 
> 时间：2012-10-25T12:27:10.230
> 
> 标签：java, multidimensional-array

```
public class BusInformation {

String BusRoute[][] = new String[4][];

BusRoute[0] = new String[] {"a" , "b", "c"};

BusRoute[1] = new String[] {"a" , "b"};
} 
```

我知道第一个参数中有多少 BusRoutes。第二个参数大小是可变的，取决于路线。我怎样才能以这种方式初始化它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:28:21.873

你应该能够像这样编码它......

```
public class BusInformation {
    String busRoute[][] = new String[4][0];

    public BusInformation(){
        busRoute[0] = new String[] {"a" , "b", "c"};
        busRoute[1] = new String[] {"a" , "b"};
    }
} 
```

它与您的代码相同，但喜欢为第二维指定初始大小`0`，很明显它没有任何初始大小。我还将数组的加载包装到类构造函数中。

二维数组只是一个普通的一维数组，其中每个项目都是任意长度的数组。即使您将 2D 数组设置为初始大小，例如`new String[4][5]`，也不会产生任何影响 - 您仍然可以将更小或更大的数组分配给基本数组的每个项目，就像您已经在做的那样。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:33:29.190

如果大小在初始化时是可变的并且未知，那么数组可能不是这里的最佳选择。我有两个建议，一个使用数组`Lists`或使用 Guava 的[Multimap](http://docs.guava-libraries.googlecode.com/git-history/release/javadoc/com/google/common/collect/Multimap.html)

如果您真的想/需要继续使用二维数组，请按上述方式对其进行初始化（使用第一组元素或作为空数组），当您需要添加值时，使用[Arrays.copyOf](http://docs.oracle.com/javase/6/docs/api/java/util/Arrays.html#copyOf%28T%5B%5D,%20int%29)创建一个具有新大小的数组副本以允许添加新元素。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:36:04.853

如果您询问的是硬连线初始化，您的代码可以更简洁地编写如下：

```
public class BusInformation {
    String BusRoute[][] = new String[][]{
        {"a" , "b", "c"},
        {"a" , "b"},
        null,
        null
    };
} 
```

但请注意，构造函数的方法可以执行多少初始化是有硬性限制的。（这与方法的字节码必须适合 64k 字节有关。）

If you are asking about initializing the array from (say) stuff read from a file, then it is basically a matter of working out how big the arrays need to be, creating them, and filling in their values. (For instance, you might read the data into a list-of-lists and then convert to the 2-D array form.

# asp.net - 选择 Edit on row 排序后返回错误的行

> ID：13068568
> 
> 赞同：0
> 
> 时间：2012-10-25T12:27:11.890
> 
> 标签：asp.net

我目前正在设置我的 GridView AllowSorting = true。排序工作正常，但是当我在排序后单击特定行的编辑按钮时，会返回错误的行。它在排序之前编辑先前位于当前行位置的行。

这是我在排序事件中的代码。

```
string sortExpression = e.SortExpression;
            string direction = string.Empty;
            if (SortDirection == SortDirection.Ascending)
            {
                SortDirection = SortDirection.Descending;
                direction = " DESC";
            }
            else
            {
                SortDirection = SortDirection.Ascending;
                direction = " ASC";
            }

            DataTable table = Session["WebUserDT"] as DataTable;

            table.DefaultView.Sort = sortExpression + direction;
            grdWebUser.DataSource = table;
            grdWebUser.DataBind(); 
```

知道如何解决这个问题吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-07-26T15:09:53.683

您应该在 WiewState 和 rowEditing 函数中获取 dataTabe，您应该将其设置为 gridview 数据源并绑定 gridview，它将得到解决

# jquery - 是否有不需要 html-anchor 的灯箱脚本

> ID：13068570
> 
> 赞同：2
> 
> 时间：2012-10-25T12:27:14.167
> 
> 标签：jquery, jquery-ui, lightbox, javascript

我正在寻找一个库或脚本来在灯箱中打开单个图像。到目前为止，我发现的所有库都需要一个 html-anchor 作为图像的父标签和一个缩略图。

```
<a href="image.jpg" class="popout"><img src="thmumbnail.jpg"></a> 
```

我没有任何缩略图，因为我直接从在线存储位置以“网络友好”的分辨率/大小加载/嵌入图片。所以我想做的是这样的：

```
<img class="popout" src="www.photobucket.com/myimage.jpg" height="300" width="500"> 
```

而高度/宽度也将在 css 中指定。我想这样做的一个原因是，我已经写了大约 100 张图片的文章。所以我不想将它们全部嵌入锚点......

回到这个问题：是否有一个库或脚本可以让我这样做？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T13:02:25.797

从这里获取一个新`lightbox.js`文件：[Lightbox 2 插件](http://lokeshdhakar.com/projects/lightbox2/)在任何编辑器中
打开： 找到以下编写的代码： `lightbox.js`

```
Lightbox.prototype.enable = function() {
  var _this = this;
  return $('body').on('click', 'a[rel^=lightbox], area[rel^=lightbox]', function(e) {
    _this.start($(e.currentTarget));
    return false;
  });
}; 
```

在其中用以下代码替换第三行：

```
return $('body').on('click', 'img[rel^=lightbox], area[rel^=lightbox]', function(e) { 
```

现在在里面`lightbox.js`搜索这个词`href`并将其替换为`src`. `href`为该文件中的所有内容执行此`.js`操作。
将此`.js`文件包含在您的项目中。
图片的 HTML 代码将变为：

```
<img class="popout" 
     src="www.photobucket.com/myimage.jpg" 
     rel="lightbox[plants]" 
     title="Say something about this image"> 
```

基本上我们正在改变的是

*   添加`rel`属性：
    如果两个或多个图像包含相同`rel`的属性，它们将显示为图像集。
*   添加标题属性：
    它只会在灯箱上显示您的图像信息。

**更新：**
如果您的缩略图 src 与您的实际图像 src 不同，那么您可以向`<image>`as添加一个属性`value`：

```
<img class="popout" 
     src="thumbnail path" 
     value="actual image path"
     rel="lightbox[plants]" 
     title="Say something about this image"> 
```

但是要再次添加它，您必须将`href`关键字从更改`lightbox.js`为`value`。
然后你们都完成了。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T13:00:28.827

您几乎可以使用任何能够**手动**调用它**的类似灯箱的脚本**。示例（使用[fancybox](http://fancyapps.com/fancybox/)）：http: [//jsfiddle.net/eXaGn/](http://jsfiddle.net/eXaGn/)

 **就像 fancbybox 一样：

```
$("img").click(function() {    
    $.fancybox.open(this.src);    
    return false;    
});​ 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T12:57:04.070

您可以使用彩盒：[http ://www.jacklmoore.com/colorbox](http://www.jacklmoore.com/colorbox)

然后您的代码可能如下所示：

```
$(".popout").on("click", showImage);
function showImage(e)
{
    $.colorbox({href:$(e.currentTarget).attr("src")});
} 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T13:00:28.700

我需要类似的功能并决定使用 SimpalModal

[http://www.ericmmartin.com/projects/simplemodal/](http://www.ericmmartin.com/projects/simplemodal/)

我喜欢你可以传入一个 html 字符串，它会从中生成模态，我可以以编程方式生成模态，不需要嵌入内容或标签来触发模态**

# php - 如何在一定时间后使表格不可提交？

> ID：13068571
> 
> 赞同：-4
> 
> 时间：2012-10-25T12:27:15.243
> 
> 标签：php, mysql, forms, mysqli

基本上我所拥有的是某种形式，这是：

```
<?php

require 'inc/conn.php'; 

$sql="INSERT INTO objednavky ( kdo, kdy, m1, mm1, m2, mm2, m3, mm3 )
VALUES
('$_POST[tkdo]','$_POST[thed]','$_POST[obb1]','$_POST[tmm1]',
'$_POST[obb2]','$_POST[tmm2]','$_POST[obb3]','$_POST[tmm3]')";

if (!mysql_query($sql,$con))
{
  die('Error: ' . mysql_error());
}

header('Location: http://www.juxcore.com/x/vita/protected.php');

mysql_close($con); 
```

我需要使表格不可提交，以防例如星期四，而您可以提交的最后时刻是星期三晚上 18 点。感谢帮助

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:40:33.000

看来您的问题实际上是 HTML/Javascript 问题，而不是 PHP/SQL。

因为乍一看我会说用 Javascript 更改 HTML，这样他们就无法提交表单。

```
document.getElementById("myform").action = ""; 
```

...会阻止提交。有很多方法，包括切换`form`到 a `div`：

```
document.getElementById("myform").setAttribute("type","div"); 
```

或者，从显示中删除提交按钮，以便他们无法单击它：

```
document.getElementById("mysubmit").style.display="none"; 
```

编辑：哦，我完全忘记了明显的方法，使用表单验证。这样他们就不能停在 URL 上，直到星期三之后仍然以 HTML 提交

```
<form ... onsubmit="return validateForm()"> 
```

只需编写javascript函数`validateForm`（类似于下面的php）返回false即可取消提交。我不喜欢提供 w3school 链接，但这是一个很好的干净示例：[http ://www.w3schools.com/js/js_form_validation.asp](http://www.w3schools.com/js/js_form_validation.asp)

无论如何，还有很多方法。只需在正确的日子做任何一个，使用 javascript`new Date().getDay()`并`new Date().getHours()`确定何时。

（这也是更改元素属性的两种主要方法的示例）。

我想这不会阻止他们直接从地址行提交，如果您需要编辑 PHP，请使用该`Date()`对象：

```
$day = Date("w");
if ( $day == 4 || $day == 5 ) {
    $time = Date("G");
    if ( $day != 5 || $time < 18 ) {
        if (!mysql_query($sql,$con)) die('Error: ' . mysql_error());
    }
} 
```

我建议两者都做，一种 HTML/Javascript 方式，使用服务器内置的相同控件来控制它。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:44:20.457

您可以将一些 JS 附加到您的视图中，以使表单不可提交。

我的想法是：

```
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
    <?php if($currentDay < $dontSubmitFormDay):?>
         $('#myForm').submit(function(){
              return false;
         });
    <?php endif;?>
});
</script> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:47:15.990

您需要获取当天星期三下午 6 点的[**时间戳**](http://www.php.net/manual/en/datetime.gettimestamp.php)然后每次用户提交表单时，获取该确切时间的[**时间戳**](http://php.net/manual/en/function.time.php)并进行比较：

如果（时间现在

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T12:57:36.770

首先不要回复客户端（浏览器）时钟。如果最终用户愿意，这可能会被捏造。而是使用 PHP 创建一个会话，并将日期/时间标记为可以提交表单的最后日期/时间。收到该表格后，使用服务器日期/时间（最终用户无法伪造的日期/时间）进行检查。

通过这种方式，您可以绝对确定不会阻碍不启用表单提交的更多安全性。

但是，您可以使用 Javascript 来使用户体验更好，但不要回复客户端的日期/时间以保护您的数据库。

# jquery - jquery addClass 和 cookie

> ID：13068585
> 
> 赞同：0
> 
> 时间：2012-10-25T12:28:04.927
> 
> 标签：jquery, cookies, addclass

当我单击另一个页面时，我很难弄清楚如何将 jquery addClass 函数保留在链接上。我读过我可以用 cookie 来做，但我不是 javascript 开发人员，我不能自己编写代码。

我在这里有这个页面：

[http://www.nationallighting.ie/testbed/index.php/products](http://www.nationallighting.ie/testbed/index.php/products)

当我单击左侧边栏上的一个类别时，内容会滚动到该类别并突出显示链接。但是，当我单击该类别中的单个产品时，我会转到另一个页面，即单个产品页面，并且左侧边栏上的链接不再突出显示，即：

[http://www.nationallighting.ie/testbed/index.php/products-single/bmywz220](http://www.nationallighting.ie/testbed/index.php/products-single/bmywz220)

当我点击单个产品页面时，如何仍然保持链接突出显示？

这是我很长的 jquery 脚本（同样，我不是 javascript 开发人员，所以我尽我所能......）

```
 // Products hover and active state
$(function(){
$(".sidebar-products ul li a").click(function(){
$(this).addClass('active');
$('a.active').not(this).removeClass('active');
});
});
$(function(){
$("a.outdoor").click(function(){
$('.sidebar-products ul li a.outdoor').addClass('active');
$('a.active').not('.sidebar-products ul li a.outdoor').removeClass('active');
});
});
$(function(){
$("a.wall").click(function(){
$('.sidebar-products ul li a.wall').addClass('active');
$('a.active').not('.sidebar-products ul li a.wall').removeClass('active');
});
});
$(function(){
$("a.bathroom").click(function(){
$('.sidebar-products ul li a.bathroom').addClass('active');
$('a.active').not('.sidebar-products ul li a.bathroom').removeClass('active');
});
});
$(function(){
$("a.centre").click(function(){
$('.sidebar-products ul li a.centre').addClass('active');
$('a.active').not('.sidebar-products ul li a.centre').removeClass('active');
});
});
$(function(){
$("a.pendents").click(function(){
$('.sidebar-products ul li a.pendents').addClass('active');
$('a.active').not('.sidebar-products ul li a.pendents').removeClass('active');
});
});
$(function(){
$("a.crystal").click(function(){
$('.sidebar-products ul li a.crystal').addClass('active');
$('a.active').not('.sidebar-products ul li a.crystal').removeClass('active');
});
});
$(function(){
$("a.table").click(function(){
$('.sidebar-products ul li a.table').addClass('active');
$('a.active').not('.sidebar-products ul li a.table').removeClass('active');
});
});
$(function(){
$("a.spots").click(function(){
$('.sidebar-products ul li a.spots').addClass('active');
$('a.active').not('.sidebar-products ul li a.spots').removeClass('active');
});
});
$(function(){
$(".sidebar-about ul li a").click(function(){
$(this).addClass('active');
$('a.active').not(this).removeClass('active');
});
}); 
```

任何帮助都非常感谢，谢谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:04:17.347

将这段代码插入到您的点击事件中

```
$.cookie("category", 'categoryname'); 
```

这将在您每次单击菜单项时设置 cookie，之后您就可以将活动的 css 类分配给适当的项目。我注意到你所有的链接都已经指定了类，所以如果你选择为你的 cookie 使用相同的名称，你就可以做这样的事情

```
$(document).ready(function() {
    $('a.'+$.cookie("category")).addClass('activeclass')
} 
```

这应该可以解决您的问题。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:33:52.940

您不一定需要 cookie 来完成此操作，有一些选项可供选择。

1.  根据您的要求，添加一个指示当前类别的 cookie。例如，您可以使用[这个](https://github.com/carhartl/jquery-cookie)jQuery 插件轻松更改 cookie。但是现在您可能会产生额外的问题，因为您必须在正确的时刻（可能在您加载产品页面时）删除此 cookie。
2.  如果您的产品只能分配到一个类别，则您知道该类别，并且您可以在创建 HTML 时轻松添加此类（您将在服务器端执行此操作）。
3.  您可以将查询字符串添加到您的 URL (?category=MYCATEGORY)，并基于此将类添加到您的菜单项（可能在服务器端和客户端）。

# android - 如何在 Android 中实现具有缩放功能的 GridView

> ID：13068588
> 
> 赞同：0
> 
> 时间：2012-10-25T12:28:14.427
> 
> 标签：android, gridview, zooming, scale

我试图实现 GridView，但我对具有缩放功能的 GridView 有一些特殊要求。

在我的 GridView 中，我显示图像和文本。

我用 CustomAdapter 填充 GridView。

在这里我显示我的 GridView 图像。

![在此处输入图像描述](../Images/550c94e167faaa756e168ef31141aa96.png)

在Android中可以吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:40:47.037

画廊班

```
 public class Gallery extends Activity implements OnClickListener{
     /** Called when the activity is first created. */
GridView grid_main;
Intent i;
@Override
public void onCreate(Bundle savedInstanceState){
    super.onCreate(savedInstanceState);
    setContentView(R.layout.gridgallery);

    GridView gridview = (GridView) findViewById(R.id.gridview);
    gridview.setAdapter(new ImageAdapter(this));
   }
public class ImageAdapter extends BaseAdapter {
    private Context mContext;

    public ImageAdapter(Context c) {
        mContext = c;
    }

    public int getCount() {
        return mThumbIds.length;
    }

    public Object getItem(int position) {
        return null;
    }

    public long getItemId(int position) {
        return 0;
    }

    // create a new ImageView for each item referenced by the Adapter
    public View getView(final int position, View convertView, ViewGroup parent) {
        final ImageView imageView;
        if (convertView == null) {  // if it's not recycled, initialize some attributes
            imageView = new ImageView(mContext);
            imageView.setLayoutParams(new GridView.LayoutParams(100, 100));
            imageView.setScaleType(ImageView.ScaleType.CENTER_CROP);
            imageView.setPadding(8, 8, 8, 8);
            /**/
            imageView.setOnClickListener(new View.OnClickListener()
            {   
              public void onClick(View v) 
              {
                  for(int j=0;j<=mThumbIds.length;j++)
                  if(position==j)
                  {   
                      System.out.println(" image click");
                      i = new Intent("com.university.uob.ZoomImage");
                      i.putExtra("imageid", mThumbIds[j]);
                      startActivity(i);
                  }

                    }});

        } else {
            imageView = (ImageView) convertView;
        }
        imageView.setImageResource(mThumbIds[position]);

        return imageView;
    }

    // references to our images
    private Integer[] mThumbIds = {
            R.drawable.u1, R.drawable.u2,
            R.drawable.u3, R.drawable.u4,
            R.drawable.u5, R.drawable.u6,
            R.drawable.u7, R.drawable.u8,
            R.drawable.u9
    };
}
   @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        // TODO Auto-generated method stub
        super.onKeyDown(keyCode, event);
        switch(keyCode)
        {
        case KeyEvent.KEYCODE_BACK:

            finish();
            break;  
        }
        return super.onKeyDown(keyCode, event);
    }
public void onClick(View a) {
    //System.out.println("========a id====="+a.getId());
    // TODO Auto-generated method stub      
}
} 
```

缩放图像类

```
 public class ZoomImage extends Activity{

@Override
public void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    setContentView(R.layout.imagezoom);
    Bundle b = getIntent().getExtras();
    int imgid =  (Integer) b.get("imageid");
    System.out.println("======imagid======="+imgid);

    ImageView iv = (ImageView) findViewById(R.id.imageView1);
    iv.setImageResource(imgid);
}

   @Override
    public boolean onKeyDown(int keyCode, KeyEvent event) {
        // TODO Auto-generated method stub
        super.onKeyDown(keyCode, event);
        switch(keyCode)
        {
        case KeyEvent.KEYCODE_BACK:
             finish();
             break; 
        }
        return super.onKeyDown(keyCode, event);
    }
   } 
```

图像缩放布局

```
 <LinearLayout 
    android:orientation="vertical"
    android:id="@+id/linearLayout1" 
    android:layout_width="fill_parent" 
    android:layout_height="fill_parent" 
    xmlns:android="http://schemas.android.com/apk/res/android">
    <ImageView
     android:id="@+id/imageView1" 
     android:layout_width="fill_parent" 
     android:layout_height="fill_parent" 
     xmlns:android="http://schemas.android.com/apk/res/android"></ImageView>
   </LinearLayout> 
```

显示图像。OnClick 在图像视图的新活动中显示它。我不确定这是否是您要找的。希望能帮助到你。

# osx-mountain-lion - 如何将堆栈大小设置为无限 OS X 10.8？

> ID：13068591
> 
> 赞同：1
> 
> 时间：2012-10-25T12:28:26.163
> 
> 标签：osx-mountain-lion, stack-size

我不知道我是否做错了什么，但是当我输入

`$limit stacksize unlimited`

进入 Mountain Lion 上的一个终端，我得到：

`-bash: limit: command not found`

所以我尝试：

`sudo ulimit -s unlimited`

这也行不通。你能告诉我我应该用什么来在终端中获得无限的堆栈大小吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-25T11:41:45.407

我现在意识到，对于 limit 命令，我需要使用 tcsh shell。

# java - 不能在单个 xsd 元素上使用 jaxb 绑定

> ID：13068593
> 
> 赞同：3
> 
> 时间：2012-10-25T12:28:32.123
> 
> 标签：java, jaxb, xjc, jaxb2-maven-plugin

我正在使用 jaxb 从 xsd 文件生成 java 源代码。

我希望能够指定在每个元素的基础上生成源的包，但是每当我生成源时，我都会收到以下错误：

```
[ERROR] ****/src/main/xjb/common.xjb[8,24]
com.sun.istack.SAXParseException2: compiler was unable to honor this schemaBinding customization. It is attached to a wrong place, or its inconsistent with other bindings. 
```

我的绑定文件 common.xjb 试图将名称（属性值）'api'的元素放在包'com.myxml.common.api'中：

```
<jxb:bindings version="1.0" xmlns:jxb="http://java.sun.com/xml/ns/jaxb" xmlns:xs="http://www.w3.org/2001/XMLSchema">

    <jxb:bindings schemaLocation="../xsd/common/common.xsd" node="/xs:schema">

        <jxb:bindings node="//xs:element[@name='api']">
            <jxb:schemaBindings>
                <jxb:package name="com.myxml.common.api" />
            </jxb:schemaBindings>
        </jxb:bindings>

    </jxb:bindings>

</jxb:bindings> 
```

我的 xsd 文件 common.xsd 是：

```
<xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" version="1.1" xml:lang="en">

    <xs:element name='api'>
        <xs:complexType>
            <xs:simpleContent>
                <xs:extension base="xs:string" />
            </xs:simpleContent>
        </xs:complexType>
    </xs:element>

</xs:schema> 
```

我正在使用以下 Maven 插件来让一切顺利进行：

```
<plugin>
    <groupId>org.codehaus.mojo</groupId>
    <artifactId>jaxb2-maven-plugin</artifactId>
    <version>1.5</version>

    <executions>
        <execution>
            <id>schema00-generate</id>
            <phase>generate-sources</phase>
            <goals>
                <goal>xjc</goal>
            </goals>
            <configuration>
                <schemaFiles>common/common.xsd</schemaFiles>
                <bindingFiles>common.xjb</bindingFiles>
                <bindingDirectory>${project.basedir}/src/main/xjb</bindingDirectory>
            </configuration>
        </execution>
    </executions>
</plugin> 
```

为什么我会收到此错误，我该如何解决？我知道在这个阶段我没有使用任何其他绑定。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-11-24T15:18:14.133

来自同一命名空间的元素不能映射到不同的包，因此不能为顶层以外的任何东西定义包

# expressionengine - ExpressionEngine - 访问 404 页面时的通知电子邮件？

> ID：13068595
> 
> 赞同：4
> 
> 时间：2012-10-25T12:28:32.623
> 
> 标签：expressionengine

根据模板管理器的点击数，我的网站获得了相当多的 404 次点击。我似乎无法找到这些点击的来源，无论是一个旧的死链接还是几个，等等。

我希望从我的 404 模板中自动向我发送一封电子邮件，其中至少包含细分数据。在 EE 中执行此操作的最佳方法是什么？

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T12:35:49.377

最简单的方法是使用允许您从模板中发送电子邮件的插件。这里有两个工作：

1.  “email_from_template” - [http://rog.ee/email_from_template](http://rog.ee/email_from_template)
2.  “发送电子邮件” - [http://devot-ee.com/add-ons/send-email](http://devot-ee.com/add-ons/send-email)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T13:31:06.767

在这里抛出另一个选项......

在 404 模板上启用 PHP 并包含一些 PHP。就像是

```
mail ( toaddress , subject , message ); 
```

随心所欲地涂上黄油。您可以提取所请求的 url 之类的内容并将其包含在电子邮件中。

```
<?php
  $url = 'http'.(empty($_SERVER['HTTPS'])?'':'s').'://'.$_SERVER['SERVER_NAME'].$_SERVER['REQUEST_URI'];
  mail('me@myemail.com','404 on website','Hit 404 page on site for URL:  '.$url);
?> 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:40:17.620

有一个适合此要求的免费插件：[Encaf 404 Email](http://devot-ee.com/add-ons/encaf-404-email)。

# javascript - 通过链接数

> ID：13068596
> 
> 赞同：1
> 
> 时间：2012-10-25T12:28:34.980
> 
> 标签：javascript, jquery

我有一个 html.twig 文件

```
{% set num= 1%}
{% for idea in ideas %}

    <div class="add">
        <a href="#"> Comentar </a>|<a href="#" rel="like{{num}}"> Tomado </a>|<a href="#">Valorar</a>
    </div>
</div>
{% set num= num +1 %}
{% endfor %} 
```

所以取决于我喜欢的想法的数量，像这样

```
<a rel="like1" href="#"> Tomado </a>
<a rel="like2" href="#"> Tomado </a>
<a rel="like3" href="#"> Tomado </a> 
```

如果我想在 jquery 中单击，但是我如何指示链接数，num 变量的值

```
 $("a[rel='like']").click(function(){
            alert($("a[rel='like']").text());
    }); 
```

任何想法！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:32:22.677

为此，您可以试用这个 jquery 选择器[jQuery('[attribute^="value"]')](http://api.jquery.com/attribute-starts-with-selector/)

像这样编码

```
 $("a[rel^='like']").click(function(){
            alert($(this).attr("rel"));
    }); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:35:36.733

我将假设您想要该`rel`属性的值。如果这是真的，你应该试试这个：http: [//jsfiddle.net/kakashi/Uqqpr/](http://jsfiddle.net/kakashi/Uqqpr/)

我的解决方案使用`attr`方法来获取`rel`属性的值。

**更新** 看起来你想要包含在 rel 属性中的数字，即当它是“like1”时你想要“1”，当它是“like2”时想要“2”，等等。如果是这样，这个解决方案将这样做：

[http://jsfiddle.net/kakashi/Uqqpr/1/](http://jsfiddle.net/kakashi/Uqqpr/1/)

**更新 2 - 考虑多个数字“喜欢”**

[http://jsfiddle.net/kakashi/Uqqpr/2/](http://jsfiddle.net/kakashi/Uqqpr/2/) 这个版本使用正则表达式来捕捉末尾的数字。

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T12:31:06.397

您可以[`startsWith`](http://api.jquery.com/attribute-starts-with-selector/)像这样使用选择器：

```
$("a[rel^='like']").click(function(){
    var theNumber = this.rel.replace(/[^0-9]/g, ''); 
}); 
```

很有可能，您甚至不需要从 rel 属性中解析出数字（另外，您确实应该为此使用数据属性）：

```
$("a[rel^='like']").click(function(){
    var theNumber = $(this).index(); 
}); 
```

`data`使用属性的示例：

```
<a href="#" data-num="{{num}}">

$("a[rel^='like']").click(function(){
    var theNumber = $(this).data("num"); 
}); 
```

[**演示。**](http://jsfiddle.net/karim79/3FVwY/)

# json - 如何使用backbone.js 获取json

> ID：13068597
> 
> 赞同：1
> 
> 时间：2012-10-25T12:28:34.223
> 
> 标签：json, backbone.js

我正在尝试使用backbones.js fetch 从推特搜索中获取json

我下面的代码有人可以告诉我哪里出错了吗？

```
(function($){

  var Item = Backbone.Model.extend();

  var List = Backbone.Collection.extend({
    model: Item,
    url:"http://search.twitter.com/search.json?q=blue%20angels&rpp=5&include_entities=true&result_type=mixed"
  });    

  var ListView = Backbone.View.extend({    
    el: $('#test'),
    events: {
      'click button#add': 'getPost'
    },
    initialize: function(){
      _.bindAll(this, 'render', 'getPost');
      this.collection = new List();
      this.render(); 
    },
    render: function(){
      var self = this;      
      $(this.el).append("<button id='add'>get</button>");
    },
    getPost: function(){
      console.log(this.collection.fetch());
    }

  });

  // **listView instance**: Instantiate main app view.
  var listView = new ListView();      
})(jQuery);​ 
```

我刚刚开始使用骨干网，我只想控制台记录 json

你可以在这里看到我的例子。jsfiddle.net/YnJ9q/2/

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T13:18:48.110

上面有两个问题：

首先，您需要向 fetch 方法添加一个成功/失败回调，以便您将获取的 JSON 记录到控制台。

```
getPost: function(){
    var that = this;
    this.collection.fetch(
    {
        success: function () {
             console.log(that.collection.toJSON());
        },
        error: function() {
             console.log('Failed to fetch!');
        }
   });
} 
```

另一个问题是“同源策略”的问题。您可以通过查看[此链接](https://stackoverflow.com/questions/8660648/backbone-get-json-data-from-api)了解如何解决该问题。

**更新：** 我修改了您的代码并包含了更新的`sync`方法。现在可以了！[看看这里！](http://jsfiddle.net/BHrmC/)

基本上，更新你`collection`的包括`parse`和`sync`方法如下：

```
var List = Backbone.Collection.extend({
    model: Item,

    url: "http://search.twitter.com/search.json?q=blue%20angels&rpp=5&include_entities=true&result_type=mixed",

    parse: function(response) {
        return response.results;
    },

    sync: function(method, model, options) {
        var that = this;
        var params = _.extend({
            type: 'GET',
            dataType: 'jsonp',
            url: that.url,
            processData: false
        }, options);

        return $.ajax(params);
    }
}); 
```

# actionscript-3 - AS3 富文本编辑器

> ID：13068602
> 
> 赞同：2
> 
> 时间：2012-10-25T12:28:45.700
> 
> 标签：actionscript-3, flash, ckeditor

是否有任何可用的富文本编辑器可以生成“AS3 兼容”代码？我想将此添加到网络管理员，用户可以在其中设置文本的字体大小和颜色，它应该生成与 as3 兼容的代码，例如：

```
<p><font size="12" color="#000000">Welcome to</font> <font size="30" color="#ffffff">My Website</font></p> 
```

我使用了 CKEditor，但它生成如下：

```
<p><span style="font-size:12px; color:#000000">Welcome to</span></p> 
```

我用 txt.htmlText 在我的文本字段中分配这个值。

如果没有任何这样的文本编辑器可用，有没有办法在 as3 文本字段中呈现上述“跨度样式”？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T14:34:55.030

虽然你说你一直在使用CKEditor，但似乎你没有正确配置它。检查此示例： http: [//nightly.ckeditor.com/latest/ckeditor/_samples/output_for_flash.html](http://nightly.ckeditor.com/latest/ckeditor/_samples/output_for_flash.html)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:53:57.783

由于现在 CSS 是常见的做法，我想很难找到一个会吐出旧样式 html 的编辑器。Flash 仅支持少数 html 标签。因此，您可能希望使用 CKEditor 输出，剥离样式部分，搜索 Flash 支持的标签并将其注入 html。

[编辑] 我在[这里找到了一些相关的东西](http://www.actionscript.org/forums/showthread.php3?t=221626)

# php - 在浏览器中开发类似桌面的 Web 应用程序的框架

> ID：13068604
> 
> 赞同：0
> 
> 时间：2012-10-25T12:28:48.380
> 
> 标签：php, javascript, jquery, html, extjs

我想在浏览器中开发类似桌面的应用程序。

我见过 KendoUI、Twitter Bootstrap 和 Sencha ExtJs。有没有更好/更灵活/免费的基于html5/jquery的类桌面框架？

提前致谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:53:45.150

您即将跳入 MVC 库的海洋。Backbone、Agility、Spine、Batman、Angular、Ember……你最好在谷歌上搜索所有这些，阅读它们，选择正确的，然后再询问。

# linux-kernel - 内存不足内核崩溃

> ID：13068607
> 
> 赞同：1
> 
> 时间：2012-10-25T12:28:56.197
> 
> 标签：linux-kernel, out-of-memory

我的系统面临与内存不足 (OOM) 错误相关的问题。在这种情况下，Linux 的 oom kill 实用程序会使用特定算法杀死一个进程（称为“坏进程”）以释放空间。我想在这种情况发生之前打印内存，处理统计信息。

mm/oom_kill.c 包含函数 out_of_memory()。我想在这个函数继续杀死“坏进程”之前打印我的统计数据。为此，我编写了以下 bash 脚本

```
#!/bin/bash
# Script to print process related info

echo "Vmstat " > OOM_memresults
vmstat >> OOM_memresults
echo >> OOM_memresults
echo "SLABINFO" >> OOM_memresults
cat /proc/slabinfo >> OOM_memresults 
echo >> OOM_memresults
echo "Status of process getting killed" >> OOM_memresults
cat /proc/$1/status >> OOM_memresults 
```

现在我面临的问题是找到一种从内核代码调用这个脚本的方法。

我不能使用 system("scriptname") 因为系统函数在 linux 内核中不可用，我们也不能使用 exec 及其变体。

任何想法如何从内核代码中调用此脚本或任何其他方式我可以随时从内核代码中打印进程、内存相关信息。“当前”函数提供有关当前正在运行的进程及其 task_struct 的信息，但很难从中提取任何有用的信息。

# magento - Magento Enterprise 权限角色和过渡电子邮件

> ID：13068608
> 
> 赞同：1
> 
> 时间：2012-10-25T12:28:59.300
> 
> 标签：magento, acl

我正在开发一个 magento Enterprise 网站，客户希望使用 Z Scopes 和 Resoucrs 创建一个新用户。

范围选择了“事务性电子邮件”，但是当具有 Z 范围的用户登录时，他们看不到添加按钮。

我已经解决了这个问题

如果用户组的资源设置为 ALL，则可以添加事务性电子邮件。

但是，如果我们修改资源（但要包括事务性电子邮件），那么用户会得到“拒绝访问”

这发生在什么地方？我将如何阻止这种情况发生（不修改 CORE）

干杯。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:38:17.463

事务性邮件没有范围定义。它们基本上可以在任何商店使用。因此，范围有限的用户无法编辑任何交易电子邮件或创建新电子邮件，因为这可能会影响所有商店并且可能是无意的。

# python - 递归中非类型的解析器错误

> ID：13068617
> 
> 赞同：0
> 
> 时间：2012-10-25T12:29:27.170
> 
> 标签：python, string, parsing

所以前几天，SOCommunity 帮我做了一个解析器。即：

```
def MyList(self):
    class _MyList(list):
        def __init__(self, parent):
            self.parent = parent
            list.__init__(self)
    top = current = _MyList(None)
    ntab_old = 0
    for line in self.raw_data:
        ntab = line.count('\t')
        if(ntab_old > ntab):
            for _ in range(ntab_old-ntab):
                current = current.parent
        elif(ntab_old<ntab):
            current.append(_MyList(current))
            current = current[-1]
        current.append(line.strip('\t').strip('|'))
        ntab_old =ntab
    return top 
```

像这样解析数据：

```
 |[nothing detected] www.neopets.com/
        |status: (referer=http://www.google.com)saved 55189 bytes /fetch_d4cd213a56276ca726ddd437a1e75f1024ab7799
        |file: fetch_d4cd213a56276ca726ddd437a1e75f1024ab7799: 55189 bytes
        |file: decoding_367af53b4963986ecdeb9c09ce1a405b5b1ecd91: 68 bytes
        |[nothing detected] (script) images.neopets.com/js/common.js?v=6
            |status: (referer=http://www.google.com)saved 1523 bytes /fetch_8eeadcc08d4cb48c02dedf18648510b75190d1d7failure: [Errno 13] Permission denied: '/tmp/tmpsha1_8d7fb3ff1ef087c7ea2bf044dee294735a76ed4b.js'
            |file: fetch_8eeadcc08d4cb48c02dedf18648510b75190d1d7: 1523 bytes 
```

这应该返回包含每个子部分的嵌套列表。但是，不知从何而来，我收到了这些错误：

```
 current.append(line.strip('\t').strip('|'))
AttributeError: 'NoneType' object has no attribute 'append' 
```

任何帮助，将不胜感激

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:38:14.390

```
current.append(...)
AttributeError: 'NoneType' object has no attribute 'append' 
```

是说在某些时候`current`是`None`。

那么如何`current`设置`None`呢？我的猜测是它可能发生在这里：

```
 for _ in range(ntab_old-ntab):
            current = current.parent 
```

如果 current 经常被设置为其父级，它最终将被设置为，`None`因为在顶层，`_MyList`被实例化`None`为父级：

```
top = current = _MyList(None) 
```

* * *

这段代码也可能有问题：

```
 elif(ntab_old<ntab):
        current.append(_MyList(current))
        current = current[-1] 
```

如果`ntab`是 3，并且`ntab_old`是 1，那么可能需要移动两级“缩进”，但代码只创建一个嵌套的`_MyList`.

你可能会认为你的缩进级别永远不会跳两级。但这可能很难用你的眼睛来判断，尤其是在数据很长的情况下。数据可能不像我们想象的那么规律。

此外，如果`'\t'`在 的右侧有一个杂散点`|`，那么它会影响`ntab`计数，即使它可能不应该影响缩进级别。

# c - scanf() 中的倒置参数

> ID：13068619
> 
> 赞同：14
> 
> 时间：2012-10-25T12:29:33.793
> 
> 标签：c, gcc, compiler-errors

我正在（快速）编写一些代码，并意外地反转了以下参数`scanf()`：

```
char i[] = "ABC1\t";
scanf(i, "%s"); 
```

编译`gcc -Werror -Wall -Wextra`并不会抱怨这一点。显然，这段代码不起作用，但为什么 gcc 没有通知我我倒置了参数？它不能检测到`i`不是格式字符串，或者第二个参数不是可存储类型吗？

**编辑**
感谢大家的洞察力，看起来我找到了答案，`-Wformat`旗帜上有一个扭曲，使这个“可捕获”（发布在下面以供参考）

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-25T12:47:15.787

哈！我找到了。`-Wformat=2`用旗帜击中 gcc抓住了它。

发布信息以供他人参考：

这是[我找到的标志列表](http://gcc.gnu.org/onlinedocs/gcc-4.1.2/gcc/Warning-Options.html)

`-Wformat Check calls to printf and scanf, etc., to make sure that the arguments supplied have types appropriate to the format string specified...`

我曾假设其中`-Wall`有`-Wformat`，它确实如此，但关于我刚刚发现的真正重要的部分：

`-Wformat is included in -Wall. For more control over some aspects of format checking, the options -Wformat-y2k, -Wno-format-extra-args, -Wno-format-zero-length, -Wformat-nonliteral, -Wformat-security, and -Wformat=2 are available, but are not included in -Wall.`

* * *

## 回答 #2

> 赞同：8
> 
> 时间：2012-10-25T12:37:49.727

我想它不应该。

```
int scanf ( const char * format, ... ); 
```

`i`通常转换为 a `const char*`，所有其余参数都只是“省略号”，无法在编译时检查。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T12:40:39.563

scanf (man scanf) 的手动输入给出了原型：

```
int scanf(const char *format, ...); 
```

char[] 只是 char * 的一种特殊类型，因此满足第一个参数。次要参数是在运行时评估的（如果我记得的话），所以这里的编译器甚至不考虑它们。从编译器的角度来看，这是对给定原型的函数的良好调用。

此外，编译器从不检查您是否尝试写入无效位置。关于 C 的伟大（或可怕）的事情是它可以让你或多或少地做你想做的事，即使你想要的是一个坏主意。

# javascript - 如何将 DOM 节点数据集中的所有数字转换为 JavaScript 数字

> ID：13068620
> 
> 赞同：2
> 
> 时间：2012-10-25T12:29:33.420
> 
> 标签：javascript

我使用该`data`属性将字符串和数字存储在 DOM 节点中，并使用 JavaScript 读取它们。不幸的是，所有值`dataset`都保存为字符串。那么什么是将它们转换为数字但保留字符串的最佳方法。

html:

```
<input data-minvalue="10" data-startcolor="#00ee00"/> 
```

预期结果：

```
{
  minvalue: 10,
  startcolor:'#00ee00'
} 
```

**编辑：**

*   它必须与 int 和 float 一起使用
*   不应转换“12_test”
*   应该转换'.3'

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:51:51.967

在值之前加上`+`，这会将其转换为本地数字并保留类似 的内容`12_test`，而`parseFloat`不会。如果结果`isNaN`，则改为安全字符串。

```
function kittenBaloon(str) {
    var num = +str;

    if(isNaN(num)) {
        return str;
    } else {
        return num;
    }
}

console.log(kittenBaloon('12_test'));
console.log(kittenBaloon('.3'));
console.log(kittenBaloon('#00ee00')); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:54:38.393

使用该`Number`函数解析数值。如果它不是数字，你会得到一个`NaN`.

```
var dataset = el.dataset;
var data = {};
Object.keys(dataset).forEach(function (key) {
  var num = Number(dataset[key]);
  data[key] = isNaN(num) ? dataset[key] : num;
}) 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T12:40:14.593

如果解析属性和检查[`isFinite`](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/isFinite)还不够，您将不得不通过正则表达式测试是否要将其解析为数字：

```
var obj = {};
for (var i=0; i<node.attributes.length; i++) {
    var attr = node.attributes.length;
    if (attr.name.substr(0, 5) == "data-")
        obj[attr.name.substr(5)] = /^[+-]?(\d*\.)?\d+(e[+-]?\d+)?$/i.test(attr.value)
          ? parseFloat(attr.value)
          : attr.value;
    }
} 
```

此正则表达式以[EcmaScript §9.3.1中的](http://es5.github.com/#x9.3.1)*数字字符串语法*为导向；但是它例如不允许空格。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T12:35:24.113

您将使用 parseInt() 方法。

从 html 中提取 data-minvalue 的 attr 值后，您会将其传递给 parseInt() 并将其用作对象中的值。

假设使用jquery

```
var obj = {};
var strNum = $('selector').attr('data-minvalue);
var intNum = parseInt(strNum);
obj.minvalue = intNum; 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T12:54:28.523

```
var string1 = "#456456";
var string2 = "546.789";

var filterString = function (string) {
    var temp = string;
        regex1 = /\./;
        regex2 = /\D/g;

    temp = temp.replace(regex1, '');

    if (!regex2.test(temp)) {
        return parseFloat(string);

    }

    return string;

}

string1 = filterString(string1);
string2 = filterString(string2);

console.log(typeof string1); //returns string
console.log(typeof string2); //returns number 
```

# c# - Foreach 迭代空

> ID：13068621
> 
> 赞同：3
> 
> 时间：2012-10-25T12:29:36.680
> 
> 标签：c#, linq, sharepoint, linq-to-xml

我正在使用 LINQ 过滤从 Sharepoint WSS3 的`listService.GetListItems()`方法返回的 XmlNode。

这是它返回的 XML：http: [//pastebin.com/mqHcserY](http://pastebin.com/mqHcserY)

我观察到最后一行与其他行不同，它不包含以下属性。

```
ows_ContentType
ows_LinkFilenameNoMenu
ows_LinkFilename
ows_BaseName 
ows__EditMenuTableStart 
```

因此，考虑到这一点，我使用 LINQ 过滤结果：

```
XmlNode items = listService.GetListItems(listName, string.Empty, query, viewFields, string.Empty, queryOptions, g.ToString());

// Namespace for z: prefix
XNamespace xns = "#RowsetSchema";

XElement root;
using (XmlReader xr = new XmlNodeReader(items)) { root = XElement.Load(xr); }

// This query returns XElements that are Folder types
IEnumerable<XElement> result = from child in root.Descendants(xns + "row")
                               where child.Attribute("ows_ContentType").Value != null && child.Attribute("ows_ContentType").Value == "Folder"
                               select child;

foreach (XElement xml in result)
{
    //Exception when attempts to loop final XElement
} 
```

但是，当我遍历结果时，我得到一个`NullReferenceException`. 在 Foreach 循环中，它会愉快地遍历每个对象，直到到达最后一个对象，然后它会抛出异常。

最后一个对象与其他行不同（我通过消除过程知道这一点，我看到每隔一行都循环过去）并且应该从我的结果中过滤掉，因为它没有“ows_ContentType”属性。

我将 LINQ 更改为`where child.Attribute("ows_ContentType").Value != null && child.Attribute("ows_ContentType").Value == "Folder"`尝试过滤任何包含空值的内容，但结果相同。我查看了一些[示例](http://code.msdn.microsoft.com/LINQ-Restriction-Operators-b15d29ca#WhereSimple3)，并且似乎具有正确的语法。

有人可以解释是什么导致最后一个 XElement 返回 null 吗？我真的不明白为什么它会向`<IEnumerable<XElement> result`集合中添加一个空实例。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:34:38.677

调用不存在的属性的值将导致空引用，因为节点根本不存在。

```
child.Attribute("ows_ContentType").Value 
```

通过调用缺失元素的值引发异常。

改用这个：

```
child.Attribute("ows_ContentType") != null 
```

实施的：

```
IEnumerable<XElement> result = from child in root.Descendants(xns + "row")
                           where child.Attribute("ows_ContentType") != null && child.Attribute("ows_ContentType").Value == "Folder"
                           select child; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:33:28.323

您需要检查元素是否为 null 而不是元素的值。

```
child.Attribute("ows_ContentType") != null && child.Attribute("ows_ContentType").Value == "Folder" 
```

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T13:39:02.913

请注意，LINQ2XML 只允许您使用`(string)someXElement`，`(string)someXAttribute`如果 XElement 或 XAttribute 为 null，或者 XElement 或 XAttribute 的值（如果存在），则它会给出 null。这意味着您的代码可以缩短使用

```
IEnumerable<XElement> result = from child in root.Descendants(xns + "row")
                               where (string)child.Attribute("ows_ContentType") == "Folder"
                               select child; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T12:34:14.737

最后一个节点不包含“ows_ContentType”属性，但您的 where 子句正在查找该*缺失*属性的值。

可能你需要

```
where child.Attribute("ows_ContentType") != null 
&& child.Attribute("ows_ContentType").Value == "Folder" 
```

# groovy - groovy.json.JsonBuilder 在 Eclipse/STS 中抛出 MissingMethodException 但不是来自 groovysh

> ID：13068623
> 
> 赞同：1
> 
> 时间：2012-10-25T12:29:39.110
> 
> 标签：groovy

当我尝试从 Eclipse/STS 运行以下代码时，出现以下异常：

```
Caught: groovy.lang.MissingMethodException: No signature of method: 
    groovy.json.JsonBuilder.message() is applicable for argument types:
    (ie.makalu.scripts.TestJsonBuilder$_run_closure1) values: 
    [ie.makalu.scripts.TestJsonBuilder$_run_closure1@d05c13] 
```

但是当我从外壳运行它时，它工作正常。谁能建议为什么会这样？

我已经使用 STS 版本 2.9.2 在 Groovy 1.8.6 和 Groovy 2.0 中尝试过这个

```
package ie.makalu.scripts

import groovy.json.JsonBuilder

def json = new JsonBuilder()

json.message {
header {
    from('mrhaki')  // parenthesis are optional
    to 'Groovy Users', 'Java Users'
}
body "Check out Groovy's gr8 JSON support."
} 

println json.toString() 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-03-20T02:11:05.153

我建议不要使用 Eclipse STS——在我看来，太多人经常遇到问题。相反，我会安装标准的 Eclipse 或用于 Java 开发的 Eclipse（来自 eclipse 社区的任何东西，但不是专门的 STS 东西）并在顶部安装 Groovy（如果你需要 Grails）插件。它工作得更好，您可以自由安装任何在 STS 版本下可能无法运行的附加插件。

另外我建议尝试 IntelliJ，它与 Groovy（和 Grails）有很好的集成。

# javascript - JS 小书签问题：代码在控制台中工作，在小书签中失败

> ID：13068629
> 
> 赞同：2
> 
> 时间：2012-10-25T12:30:05.623
> 
> 标签：javascript, wordpress, bookmarklet

使用 JS 小书签在 Wordpress 编辑帖子屏幕中设置自定义字段。当我将以下代码复制/粘贴到控制台（最新的 Chrome 稳定版）时，以下代码运行良好：

```
document.getElementById('metakeyselect').value = "foo";
document.getElementById('metavalue').value = "bar";
document.getElementById('meta-add-submit').click(); 
```

工作顺利；我将其粘贴到控制台中，并在帖子中添加了一个新的自定义 var（我已经在 WP 中将“foo”作为 var 名称）。

在书签形式中，相同的代码如下所示：

```
javascript:document.getElementById('metakeyselect').value = "foo";document.getElementById('metavalue').value = "bar";document.getElementById('meta-add-submit').click(); 
```

它失败了：当我单击它时，名称和值框已填写，但没有提交任何内容。控制台显示以下错误：

```
Uncaught TypeError: Cannot call method 'click' of null 
```

知道为什么吗？相同的代码，相同的浏览器，相同的页面。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2019-05-28T15:59:32.467

我遇到了类似的问题，并且很确定这也是导致您的代码中断的原因。我最小的例子是这个网站上的以下代码（应该适用于整个 stackoverflow.com 域）：

```
document.getElementsByName("q")[0].value="foo"; 
```

这应该将“foo”写入搜索字段（没有 id，但它是唯一名为“q”的元素）。Web 控制台和小书签都会按预期设置值，但小书签也会在短暂延迟后将页面更改为空标题和仅包含单词“foo”的正文。假设这不是仅适用于我的随机错误，那么在您的示例中引发异常的原因是小书签设置了值“foo”，然后设置了“bar”，但将网页的内容更改为“foo” ，然后在您的最后一行终止之前使用“bar”。

不幸的是，我不知道这种行为的原因（我发现这个问题正在寻找确切的信息），但这最有可能导致您的示例中的 TypeError 。

当在 Greasemonkey 脚本中使用相同的代码（例如，作为您使用 Greasemonkey 添加的按钮的 onclick 脚本）时，可能运行相同的代码没有任何问题。

[编辑：] 显然，如果小书签的计算结果不是`undefined`，则网站的内部 html 将替换为该值的字符串表示形式。为确保小书签的计算结果为`undefined`，您只需`undefined`在任何条件块之外键入作为最后一行。不幸的是，这意味着我对 OP 错误的假设不太可能是正确的，但至少未来的访问者仍然可能会发现这些信息很有用。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2020-10-30T17:25:07.097

看起来您在控制台中使用的代码可以正常工作。

似乎将控制台代码转换为书签的方法可能会导致错误。

基本的**IIFE 构造**，即立即调用函数表达式，如下所示：

```
javascript:(function () {
    /*code here*/
})(); 
```

因此，应该工作的代码可能是这样的。

```
javascript:(function () {
    document.getElementById('metakeyselect').value = "foo";
    document.getElementById('metavalue').value = "bar";
    document.getElementById('meta-add-submit').click();
})(); 
```

它解决了你的问题吗？

# symfony - 为什么 Symfony 2.1 中的页面执行时间比 2.0 慢得多

> ID：13068630
> 
> 赞同：10
> 
> 时间：2012-10-25T12:30:08.380
> 
> 标签：symfony, symfony-2.1

我已经从 2.0 更新到 2.1 在`app_dev.php`同一页面上使用探查器进行测试时，我得到了两个非常不同的结果：

Symfony 2.0

*   执行时间：799ms
*   使用的内存：6144 kb

![在此处输入图像描述](../Images/0e9a36d03ba939f129a67025103bddb1.png)

Symfony 2.1

*   执行时间：2070ms
*   使用的内存：18.5 MB

![在此处输入图像描述](../Images/d586087787547e0a59bd707b02dfa129.png)

它发生在所有页面上，加载时间慢 1-2 秒，内存使用率非常高。我还清除了缓存并至少重新加载了两次页面。

两个页面的设置都是一样的：

*   PHP版本：5.3.6
*   Xdebug：禁用
*   PHP加速：启用
*   XCache：启用
*   APC：禁用
*   E加速器：禁用

我在这里遗漏了什么或者为什么会这样？

# sql - 获取日期高于 MM/DD/YYYY 格式的特定日期的行

> ID：13068632
> 
> 赞同：1
> 
> 时间：2012-10-25T12:30:13.090
> 
> 标签：sql, database, oracle, sqldatatypes

很抱歉问了一个非常业余的问题，但我才刚刚开始学习甲骨文。

我需要根据 MM/DD/YYYY 格式的日期列提取行，​​但我无法制定正确的查询。我也使用了 to_date 函数，但没有乐趣。

我需要从 XDATE 高于 10/21/2011 (MM/DD/YYYY) 的 XTABLE 中提取行

```
select * from XTABLE where XDATE >= '10/21/2011' 
```

不起作用，也不起作用

```
select * from XTABLE where to_date(XDATE,'MM/DD/YYYY') > to_date('28/10/2011','MM/DD/YYYY') 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:36:05.557

DATE 类型的列不以 MM/DD/YYYY 格式存储：它只是根据您当前的 NLS 设置呈现。

您的查询应该是：

```
select * from XTABLE where XDATE >= date '2011-10-21' 
```

有关日期和其他“日期时间”文字的信息，请参阅[http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements003.htm#BABGIGCJ](http://docs.oracle.com/cd/B19306_01/server.102/b14200/sql_elements003.htm#BABGIGCJ)。

# php - 如何访问第二个数组中的元素

> ID：13068634
> 
> 赞同：0
> 
> 时间：2012-10-25T12:30:22.753
> 
> 标签：php, arrays

嗨，我遇到了一个非常愚蠢的问题，我知道该怎么做，但我无法让它工作。在此示例中，如何获取第二个数组中的元素，我想要 url 元素：

```
var_dump($friend['picture']);

array(1) {
   ["data"]=> array(2) {
       ["url"]=> string(78) "A URL" 
       ["is_silhouette"]=> bool(false) 
   } 
} 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:31:42.130

[您可以在文档](http://php.net/manual/language.types.array.php#example-86)中看到一个示例。在您的特定情况下，您可以使用以下代码访问该元素：

```
$friend['picture']['data']['url'] 
```

# file-upload - Dojo 表单上传不显示文本框

> ID：13068635
> 
> 赞同：0
> 
> 时间：2012-10-25T12:30:23.207
> 
> 标签：file-upload, dojo

```
<input name="uploadedFile" type="file" id="uploader"  
   data-dojo-type="dojox/form/Uploader" 
   data-dojo-props="style:'height: 26px; width: 75px; '"  label="Browse"  /> 
```

上面的代码只显示标签和浏览按钮，而不是文本框。如何分别显示标签文本框和浏览按钮。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:36:41.893

在此处查看测试：http: [//download.dojotoolkit.org/release-1.8.1/dojo-release-1.8.1/dojox/form/tests/test_Uploader.html](http://download.dojotoolkit.org/release-1.8.1/dojo-release-1.8.1/dojox/form/tests/test_Uploader.html)

`showInput:'before'`在 data-dojo-props 中指定选项。

```
<form method="post" action="UploadFile.php" id="myForm2" enctype="multipart/form-data" >
     <fieldset>
        <legend>Inline Browse Button Form Post Test</legend>
        <div data-dojo-type="dojox.form.Uploader" id="uploader2" data-dojo-props="name:'uploadedfile',showInput:'before',isDebug:true">Browse</div>
        <input type="text" name="album" value="Summer Vacation" />
        <input type="text" name="year" value="2011" />
        <input type="button" id="remBtn2" label="Clear" dojoType="dijit.form.Button" />
        <input type="submit" label="Submit" dojoType="dijit.form.Button" />
        <div id="files2" dojoType="dojox.form.uploader.FileList" uploaderId="uploader2"></div>
    </fieldset>
</form> 
```

# batch-file - 使用特定的 goto 命令启动批处理

> ID：13068643
> 
> 赞同：1
> 
> 时间：2012-10-25T12:30:54.473
> 
> 标签：batch-file, goto, process.start

我想知道是否可以在另一个批次的特定 goto 函数中启动一个薄批次？

因此，不仅要启动另一个批处理文件，还要让“母”批处理在“子”批处理中选择一个特定的 goto 选项？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:45:46.393

只需拥有父/母批处理文件并将参数传递给子批处理文件。

**妈妈.bat**

```
@ECHO OFF
ECHO Here we go
CALL child.bat 3
PAUSE 
```

**儿童.bat**

```
@ECHO OFF

IF "%1"=="1" Goto 1
IF "%1"=="2" Goto 2 
IF "%1"=="3" Goto 3

EXIT

:1

 ECHO 1!
 PAUSE
 EXIT

:2

 ECHO 2!
 PAUSE
 EXIT

:3

 ECHO 3!
 PAUSE
 EXIT 
```

这个例子应该回显**3！**因为母批处理文件将参数**3**传递给子批处理文件。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:46:44.213

是的，但这是一个黑客。

通常，您会在调用的批处理文件的帮助下完成此操作。

**主文件**

```
call second.bat :theFunction 
```

**第二个.bat*

```
goto %1

...
:theFunction 
```

该 hack 使用了一个功能错误，您只需要与 second.bat 中相同的标签。它只有在你启动 second.bat 时才有效`call`

**主文件**

```
call :theFunction
echo back in main
exit /b

:theFunction
second.bat 
echo back in the func in main, this line will never reached
exit /b This line will also never reached 
```

当 second.bat 返回时，会返回到`call`main.bat之后的那一行

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-26T07:14:50.690

`1.bat`

```
call 2.bat /c goto :this
call 2.bat /c call :that 
```

.

`2.bat`

```
if "%1"=="/c" shift & shift & %2 %3
goto :eof

:this
echo This!
goto :eof

:that
echo That!
goto :eof 
```

**编辑：**我原来的帖子最接近正确。但我已经纠正了我的错误。

我双移以将 %1 和 %2 移到左侧，将任何其他变量传递到 %1 和 %2 位置。然后我执行 %2 和 %3 因为移位的效果在该行完成执行/解释之前不会生效。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T13:35:50.250

在您调用的批处理文件中，将其放在顶部

```
if not %1=="" goto :%1 
```

在您用来调用它的批处理文件中

```
call b.bat labelname 
```

显然，这取决于您尝试做什么，但基本功能有效。

# java - Java：类转换异常

> ID：13068650
> 
> 赞同：2
> 
> 时间：2012-10-25T12:31:21.927
> 
> 标签：java, casting

我目前有一个项目，在那里我犯了一个错误，我无法弄清楚为什么它给了我这个错误。

我的结构：

```
Class: Variable (commands.lib.Variable);
Class: ImageLoader extends Variable (commands.lib.Variable); 
```

然后我将一个变量转换为 ImageLoader：

```
// There is a variable made with: Variable v = new ImageLoader();
public static Variable(commands.lib.Variable) getVariable(String value){...}
ImageLoader t = (ImageLoader)getVariable(ab[2]); 
```

但这给了我一个错误：

```
Exception in thread "main" java.lang.ClassCastException: commands.lib.Variable cannot be cast to commands.variable.ImageLoader 
```

所以当然我用谷歌搜索了**ClassCastException**，这篇文章来自结果：[Java 中“ClassCastException”的解释](https://stackoverflow.com/questions/907360/can-someone-explain-classcastexception-in-java)

这里有人解释：

```
Animal a = new Dog();
Dog d = (Dog) a; // no problem, the type animal can be casted to a dog, because its a dog
Cat c = (Dog) a; // raises class cast exception, you cant cast a dog to a cat 
```

所以对于我的代码，它看起来像这样：

```
Variable a = new ImageLoader();
ImageLoader b = (ImageLoader) a; // This should work, but will throw a ClassCastException
Array c = (Array) a; // This should throw a error 
```

所以我有点不知所措。我希望有人能帮助我，并修复错误。

问候，

罗宾

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:54:26.870

在java中，您可以将超类转换为子类。我以前做过。问题是没有制作 ImageLoader。我以为它是在哪里制作的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:40:26.310

编辑：答案实际上并没有回答问题，但没有删除，因为下面的评论有助于理解基本概念。

我一直对此感到困惑

但见

这个说法

```
Variable v = new ImageLoader(); 
```

您正在存储一个对象，`ImageLoader(Subclass)`这`Variable(SuperClass)`很好

但是这个说法

```
ImageLoader t = (ImageLoader)getVariable(ab[2]); 
```

您正在转换`Variable(superclass)`为`ImageLoader(SubClass)` This is not allowed in java，因此出现错误

# visual-studio-2012 - Visual Studio 2012 JavaScript Intellisense 参考组恢复为隐式 (Windows)

> ID：13068651
> 
> 赞同：6
> 
> 时间：2012-10-25T12:31:23.113
> 
> 标签：visual-studio-2012, intellisense, javascript-intellisense

我已经设置了我的 IDE，以根据 _references.js ( [http://blog.craigtp.co.uk/post/Javascript-jQuery-Intellisense-in-Visual-Studio-2012.aspx](http://blog.craigtp.co.uk/post/Javascript-jQuery-Intellisense-in-Visual-Studio-2012.aspx) ) 中设置的引用显示 JS Intellisense。为此，您必须将 JavaScript IntelliSense 参考组设置为“隐式（Web）”，我已经这样做了。有一段时间，它工作得很好。

但是，经过一些看似随机的时间（可能是数小时或数天，但通常不会超过一天左右），我的 JS IntelliSense 停止工作。当我返回参考组设置时，我发现参考组已恢复为“隐式（Windows）”。

还有其他人有这个问题吗？可能是什么原因造成的，或者这是 VS2012 中的错误（这是已发布的版本）？

谢谢！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2013-01-18T16:55:46.410

不知道为什么它会改变你，但我发现如果你手动添加对 ~/scripts/references.js 的引用，这个技巧在设置为 Windows 时仍然有效

# lambda - Lambda 使用 g++ 4.7 变慢 - 使用 g++ 4.6 更快

> ID：13068658
> 
> 赞同：6
> 
> 时间：2012-10-25T12:31:48.303
> 
> 标签：lambda, g++, performance-testing

我使用的是 g++ 4.7，因为它是 g++ 的最新版本之一，它是第一个真正支持`c++11`.

出于测试目的，我正在考虑取自[此处](https://stackoverflow.com/questions/8611756/why-c-lambda-is-slower-than-ordinary-function-when-called-multiple-times)的代码。

[你可以在这里找到完整的源代码。](http://pastebin.com/33pR9nSf)

我将此源命名为 lambda.cpp 并使用以下命令对其进行编译：

```
g++-4.6 -std=c++0x lambda.cpp -o lambda46

g++-4.7 -std=c++11 lambda.cpp -o lambda47 
```

在 lambda 性能方面，lambda47 可执行文件比 lambda46 慢约半秒，令人惊讶的是迭代器部分通常比 lambda46 快。

我也尝试过使用

```
g++-4.7 -std=c++0x lambda.cpp -o lambda47-0x 
```

但基本上 g++-4.6 总是生成比 g++-4.7 更快的代码。

这是一种常见的行为还是一个错误？

有一个编译器可以用 C++11 表现更好吗？

* * *

g++-4.7 它已被编译

> 配置：../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.7.2-4precise1' --with-bugurl=file:///usr/share/doc/gcc-4.7/README。错误 --enable-languages=c,c++,go,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.7 --enable-shared --enable-linker-build-id -- with-system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.7 --libdir=/ usr/lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable -plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host= x86_64-linux-gnu --target=x86_64-linux-gnu

g++-4.6 与

> 配置：../src/configure -v --with-pkgversion='Ubuntu/Linaro 4.6.3-1ubuntu5' --with-bugurl=file:///usr/share/doc/gcc-4.6/README。错误 --enable-languages=c,c++,fortran,objc,obj-c++ --prefix=/usr --program-suffix=-4.6 --enable-shared --enable-linker-build-id --with- system-zlib --libexecdir=/usr/lib --without-included-gettext --enable-threads=posix --with-gxx-include-dir=/usr/include/c++/4.6 --libdir=/usr/ lib --enable-nls --with-sysroot=/ --enable-clocale=gnu --enable-libstdcxx-debug --enable-libstdcxx-time=yes --enable-gnu-unique-object --enable-plugin --enable-objc-gc --disable-werror --with-arch-32=i686 --with-tune=generic --enable-checking=release --build=x86_64-linux-gnu --host=x86_64- linux-gnu --target=x86_64-linux-gnu

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-04T16:48:35.967

就我而言，g++ 4.6 和 4.7 的 lambda 版本都更快（并且 g++ 4.7 产生的代码比 4.6 更快）。与您的唯一区别是我使用的是 32 位版本的编译器。

但是如果我用 -O3 编译你的代码，迭代器会快大约 2 秒。

# java - 从端口读取时出现问题，InputStream 挂起

> ID：13068660
> 
> 赞同：3
> 
> 时间：2012-10-25T12:31:48.430
> 
> 标签：java, inputstream

我正在尝试编写一个程序来侦听它正在运行的机器上的端口 4444 并记录所有传入数据。

到目前为止，这是我的代码。

```
import java.io.*;
import java.net.*;

public class Foo {
URL url;
URLConnection connection;
InputStreamReader stream;
BufferedReader in;
String inputLine;
int test = 0;

public Foo()
{
    Connect();
}

public static void main(String[] args)
{
    Foo bridge = new Foo();
    System.out.println("made the class");
    for(;;)
    {
        System.out.println("in the loop");
        try 
        {
            System.out.println("making the try");
            if((bridge.inputLine = bridge.in.readLine()) != null)
            {
                System.out.println("reading the line");
                System.out.println(bridge.inputLine);
            }
        }
        /*catch(NullPointerException n)
        {
            System.out.println(bridge.test);
            bridge.test++;
        }*/
        catch(Exception e)
        {
            System.out.println("MAIN" + e);
        }
    }
}

public int Connect()
{       
    try 
    {
        System.out.println("starting the constructor");
        URL url = new URL("http", "192.168.0.104", 4444, "");
        System.out.println("url ready");
        URLConnection connection = url.openConnection();
        System.out.println("connection ready");
        //connection.setReadTimeout(5000);
        connection.setDoInput(true);
        InputStreamReader stream = new InputStreamReader(connection.getInputStream());
        System.out.println("stream ready");
        BufferedReader in = new BufferedReader(stream);
        //BufferedReader in = new BufferedReader(new InputStreamReader(url.openStream()));
        System.out.println("bufferReader ready");

        return 0;
    }
    catch(Exception e)
    {
        System.out.println("CON" + e);
    }
    return 1;
}
} 
```

当我运行它时，我得到它作为输出。

```
D:\temp_104\foo>java -cp . foo
starting the constructor
url ready
connection ready 
```

每次它尝试创建输入流时都会挂起。我已经用超级终端对其进行了测试，服务器正在输出消息并且可以连接到端口 4444。我正在运行 java 1.5.0_15 并且无法更新。

谁能看到我做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:38:45.763

您正在使用 BufferedReader 读取行。服务器是否在每条消息的末尾写换行符？

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-07T12:00:53.533

我发现问题是范围。缓冲的阅读器在函数中被初始化得很好，但一旦回到主中，它就为空。

# java - 如何序列化和反序列化休眠对象？

> ID：13068663
> 
> 赞同：0
> 
> 时间：2012-10-25T12:31:54.897
> 
> 标签：java, mysql, hibernate

我想对休眠对象进行序列化和反序列化。谁能告诉我如何实现这一目标？

谢谢

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:36:09.163

你可以使用`SerializationHelper`hibernate 提供的实用程序，克隆会为你完成工作。但如果您想另存为新实体，请确保您重置 id 和 version 属性。

[文档](http://docs.jboss.org/hibernate/orm/3.3/api/org/hibernate/util/SerializationHelper.html)

我用它来获得实体对象当前状态的快照的一个典型要求，请参阅我在[帖子中的回答](https://stackoverflow.com/questions/11529237/hibernate-entity-change-revision-history/11537710#11537710)

**例子：**

```
 Entity object=SerializationHelper.clone(<Entity Object>); 
```

此方法将通过首先序列化然后反序列化来创建克隆（新对象）。

# c# - 在 DataView 中排除空值

> ID：13068664
> 
> 赞同：1
> 
> 时间：2012-10-25T12:31:54.673
> 
> 标签：c#, filter, filtering, dataview

在我的列中`DataTable`是空值。当我在这个表上创建一个`DataView`时，我想过滤掉空值。我该怎么做呢？

我的代码是这样工作的：

```
//get the cities and a view on the data
DataTable dtPlaatsen = client.getCities();
DataView dvPlaatsen = dtPlaatsen.DefaultView;

// filter and sort the view
dvPlaatsen.RowFilter= "Isnull(Plaatsnaam,'Null Column') <> 'Null Column'"; 
dvPlaatsen.Sort = "Plaatsnaam";

//attach the view as datasource
ddlCities.DataSource = dvPlaatsen;
ddlCities.DataTextField = "Plaatsnaam"; //the field to display to the user
ddlCities.DataValueField = "PlaatsId"; //the field which is send

ddlCities.DataBind();

ddlCities.SelectedIndex = 50; 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:49:19.403

在排序之前尝试这样的事情，但无论你想做什么过滤器，使用 dataview 行过滤器

```
 dvPlaatsen.RowFilter = "Plaatsnaam <> null" 
```

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T12:43:13.330

尝试以下

```
Isnull(Plaatsnaam, 'Null Column') != 'Null Column' 
```

[我刚刚修改了此处](https://stackoverflow.com/questions/5168112/c-sharp-dataview-rowfilter-null-value-for-datetime-column?rq=1)相关线程中已接受的答案。当然，如果它有效，您应该感谢[Michael Kjörling](https://stackoverflow.com/users/486504/michael-kjorling)的帮助。

# ios - iOS 反向地理编码和地方的流派

> ID：13068667
> 
> 赞同：-1
> 
> 时间：2012-10-25T12:32:03.123
> 
> 标签：ios

我使用过 iOS 反向地理编码，但我的问题是是否有可能发现我已经使用反向地理编码检查了餐厅或银行。我知道反向地理编码给出了街道名称和其他内容，但它是否准确地说明了它是什么类型的地方？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:52:21.940

不，反向地理编码可能会告诉您它是什么*类型*的位置，例如“街道”、“海洋”、“内陆水域”等。但是为了从该位置获得更多语义，您需要查询其他服务，例如foursquare之类的。

# javascript - 带有 WebSocket 的 TypeScript

> ID：13068669
> 
> 赞同：8
> 
> 时间：2012-10-25T12:32:03.797
> 
> 标签：javascript, html, websocket, visual-studio-2012, typescript

我有一个在 webapp 中应用了 JavaScript 和 websocket 的 webapp，

现在，我想尝试将我的 webapp 移动到类型安全的 typescript，

问题是，当我声明和初始化 websocket 时，打字稿（在 Visual Studio 2012 中）生成错误：“属性 'WebSocket' 不存在于类型 'Window' 的值上”

但是在 JavaScript 中，websocket 正在运行并且没有错误，

这是代码：

```
var Socket = window.WebSocket || window.MozWebSocket; 
```

在 JavaScript 中没关系，但在打字稿中它产生了错误，

我该如何解决这个问题？或者 Visual Studio 2012 中有没有办法忽略错误，以便可以构建打字稿？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-11-20T20:09:40.197

尝试访问这样的属性：

```
var Socket = window['WebSocket'] || window['MozWebSocket']; 
```

使用字符串索引器绕过编译时验证并允许动态操作。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:03:59.023

我已经更新了我的答案以跟上新版本 TypeScript 的变化......

如果 MozWebSocket 与 WebSocket 相同 - 您可以通过以下方式解决问题：

```
declare var MozWebSocket: {
    prototype: WebSocket;
    new (url: string): WebSocket;
    new (url: string, prototcol: string): WebSocket;
    new (url: string, prototcol: string[]): WebSocket;
    OPEN: number;
    CLOSING: number;
    CONNECTING: number;
    CLOSED: number;
}

var Socket: typeof WebSocket = WebSocket || MozWebSocket;

var socket = new WebSocket('url'); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-05-28T18:58:24.277

您可以扩展窗口定义（称之为“window.extend.d.ts”）：

```
interface Window {
     WebSocket: any;
     MozWebSocket: any;
} 
```

适用于 TypeScript 0.8.3.0

# knockout.js - 淘汰赛js中多选的自定义绑定

> ID：13068675
> 
> 赞同：6
> 
> 时间：2012-10-25T12:32:24.953
> 
> 标签：knockout.js

我正在尝试在淘汰赛中创建自定义绑定以将其用作多选字段。例如：我想为发票报告设计选择屏幕。在这个选择屏幕上，我想使用“发票类型”字段来允许用户只提供他们感兴趣的发票类型。如果我在这个字段中使用标准文本框，用户将只能提供一种发票类型. 我希望他们能够提供不止一种类型的选择。我的想法是准备一个绑定，例如：

```
// html
<input data-bind="multiple: { data: optionsArray }" />
...
// view  model
optionsArray = ko.observableArray(); 
```

我可以在其中提供字段“optionsArray”，该字段将保存用户的多项选择（在我的情况下，这将是多种发票类型）。如果涉及到 UI，我认为它可能看起来像这样：元素旁边有一个按钮，具有多个绑定。单击它后，会出现对话框窗口，所有的“optionsArray”元素都显示在那里并且可以更改，可以添加或删除新元素。

我不知道如何实现这一点，因为我在对话框中显示所有 optionsArray 元素的方式失败了，它们可以被编辑为 observables 并且所有更改都反映在 viewModel.optionsArray 中。这甚至可能吗？

您在构建自定义绑定方面有任何经验并帮助我吗？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T13:00:37.267

你不需要为此创建`custom binding`。您可以`selectedOptions`在此处使用绑定是文档的链接：http: [//knockoutjs.com/documentation/selectedOptions-binding.html](http://knockoutjs.com/documentation/selectedOptions-binding.html)。

向您的视图模型添加`optionsArray`和`selectedTypes`可观察的数组：

```
self.optionsArray = ko.observableArray();
self.selectedTypes = ko.observableArray(); 
```

并绑定到`multiselect`：

```
<select data-bind="options: optionsArray, selectedOptions: selectedTypes" size="5" multiple="true"></select> 
```

这是带有对话框并添加新选项的工作示例：http: [//jsfiddle.net/vyshniakov/nZtZd/](http://jsfiddle.net/vyshniakov/nZtZd/)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:20:02.290

```
ko.bindingHandlers.multiple = {
    init: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
         $(element).change(function () {
             var actualValueArray = $(this).val().split(",");
             valueAccessor(actualValueArray);
         });
    },
    update: function(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
        var valueArray = valueAccessor();
        var valueArrayUnwrapped = ko.utils.unwrapObservable(value); 
        // Join all invoice numbers using comma
        $(element).val(valueArrayUnwrapped.join(", "))
    }
}; 
```

# objective-c - 分组TableView中UITableViewCell的访问角半径

> ID：13068680
> 
> 赞同：2
> 
> 时间：2012-10-25T12:32:40.687
> 
> 标签：objective-c, uiview, uitableview, cornerradius

Apple 似乎将 iOS6 中的角半径更改为大约 7（之前为 10）。

我的 UITableView 后面有一个视图，它需要与 UITableViewCell 具有相同的角半径。我的应用程序还支持以前的 iOS 版本，因此我必须将视图的角半径调整为当前 UITableview 所具有的半径。有没有办法访问单元格的角半径？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-10-06T05:56:02.293

@bllubbor **- 你可以通过这种方法，希望它能解决你的答案，因为它对我有用..**

```
@interface BackgroundView : UIView
    @end

    @implementation BackgroundView

    + (Class)layerClass
    {
        return [CAShapeLayer class];
    }
    @end 
```

**稍后在 cellForRowAtIndexPath 你做这样的事情： -**

```
 static NSString *CellIdentifier = @"CustomCell";
    CustomCell *cell = [tableView dequeueReusableCellWithIdentifier:CellIdentifier forIndexPath:indexPath];

    CGRect frame = cell.backgroundView.frame;
    cell.backgroundView = [[BackgroundView alloc] initWithFrame:frame];

    CGFloat corner = 20.0f;
    UIBezierPath *path = [UIBezierPath bezierPathWithRoundedRect:cell.backgroundView.bounds byRoundingCorners:UIRectCornerAllCorners cornerRadii:CGSizeMake(corner, corner)];
    CAShapeLayer  *shapeLayer = (CAShapeLayer *)cell.backgroundView.layer;
    shapeLayer.path = path.CGPath;
    shapeLayer.fillColor = cell.textLabel.backgroundColor.CGColor;
    shapeLayer.strokeColor = [UIColor lightGrayColor].CGColor;
    shapeLayer.lineWidth = 1.0f;

    return cell; 
```

# css - 只有一个滚动条工作

> ID：13068681
> 
> 赞同：0
> 
> 时间：2012-10-25T12:32:47.340
> 
> 标签：css, horizontal-scrolling

我有一张固定高度和宽度的桌子。我已经提到高度为 200 像素，宽度为 100%（在另一个 600 像素宽度的 div 内）现在我在运行时添加了一个新列，因此需要增加宽度，所以我想放一个滚动条。我正在做以下事情来实现这一点

```
$('.showDateTime').show();
$('.showDateTime').css("width", "300px");
$('#TransactionErrorsTableData').css("overflow-x", "scroll"); 
```

问题是水平滚动条出现但被禁用。垂直滚动条工作正常。我已将我的 div“TransactionErrorsTableData”的溢出设置为自动

关于如何启用水平滚动条的任何想法？

PS我有点坚持，所以如果问题不清楚，请原谅，如果需要任何细节，请发表评论。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:39:01.847

看到您只发布了一个片段并且没有发布任何示例，我无法准确地了解您的确切问题，但我会试一试。

如果使用 CSS 规则`overflow-x: scroll`或`overflow-y: scroll`，它会强制大多数浏览器显示滚动条，这是设计使然，这样如果内容放大，容器外的内容不会被强制移动。

滚动条**没有**被禁用，它只是因为没有足够的内容来实际滚动而处于非活动状态，我猜这是因为您已将`.showDateTime`' 的宽度设置为特定数量，该数量位于`TransactionErrorsTableData`div 内部。

我希望这有帮助！

**笔记 ：**

由于没有给出足够的细节，这个答案都是假设的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:23:01.620

试试看，但最好是一个 jsfiddler：

```
$('#TransactionErrorsTableData').css("overflow-x", "auto"); 
```

# c# - 带有命令筛选器的 Visual Studio 扩展中的随机崩溃

> ID：13068683
> 
> 赞同：3
> 
> 时间：2012-10-25T12:32:49.440
> 
> 标签：c#, .net, visual-studio-2012, visual-studio-extensions, vs-extensibility

我正在尝试创建一个 Visual Studio 扩展，它可以在文本编辑器中记录按键并重播它们。

我有一个`IVsTextViewCreationListener`调用`AddCommandFilter()`来向正在创建的任何新文本编辑器添加命令过滤器：

```
public class VsTextViewCreationListener : IVsTextViewCreationListener
{
    public void VsTextViewCreated(IVsTextView textViewAdapter)
    {
        var filter = new MyCommandFilter();

        IOleCommandTarget next;
        if (ErrorHandler.Succeeded(textViewAdapter.AddCommandFilter(filter, out next)))
            filter.Next = next;
    }
} 
```

命令过滤器如下所示：

```
public class MyCommandFilter : IOleCommandTarget
{
    public IOleCommandTarget Next { get; set; }

    public int Exec(ref Guid pguidCmdGroup, uint nCmdID, uint nCmdexecopt, IntPtr pvaIn, IntPtr pvaOut)
    {
        if (nCmdID == (uint)VSConstants.VSStd2KCmdID.TYPECHAR)
        {
            // Save values of pguidCmdGroup, nCmdID, nCmdexecopt and GetTypedChar(pvaIn)
            // ...
        }

        return Next.Exec(ref pguidCmdGroup, nCmdID, nCmdexecopt, pvaIn, pvaOut);
    }

    public int QueryStatus(ref Guid pguidCmdGroup, uint cCmds, OLECMD[] prgCmds, IntPtr pCmdText)
    {
        return Next.QueryStatus(ref pguidCmdGroup, cCmds, prgCmds, pCmdText);
    }

    public void Playback()
    {
        // Resend the values
        var pvaIn = Marshal.AllocCoTaskMem(4);
        Marshal.GetNativeVariantForObject((ushort)savedChar, pvaIn);
        Next.Exec(ref pguidCmdGroup, nCmdID, nCmdexecopt, pvaIn, IntPtr.Zero);
    }

    private static char GetTypedChar(IntPtr pvaIn)
    {
        return (char)(ushort)Marshal.GetObjectForNativeVariant(pvaIn);
    }
} 
```

（我已经剪掉了将值保存在列表中的代码部分）

它的工作原理是它捕获并重放按键，但是在经常（并非总是）重放它之后，Visual Studio 崩溃，并且崩溃发生在本机代码中，所以我没有太多关于错误的数据。

我以前从未写过任何 VS 扩展，而且我所做的肯定是粗略的……

（我可能应该释放分配的内存`AllocCoTaskMem()`- 我已经尝试过了，但它仍然崩溃，我认为此时不释放它不会有坏处）。

将不胜感激任何想法。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T01:58:30.597

从[MSDN 论坛](http://social.msdn.microsoft.com/Forums/en-US/vsx/thread/9d1b51a8-6fe4-4c8e-b739-4dc76bd5843a/)得到答案：

VARIANT 的正确大小是 16 字节，而不是 4：

```
Marshal.AllocCoTaskMem(16); 
```

# wcf - 如何在不使用任何证书的情况下在 wcf 中使用 wsHttpBinding

> ID：13068687
> 
> 赞同：4
> 
> 时间：2012-10-25T12:33:16.283
> 
> 标签：wcf, wshttpbinding

我想在 wcf 服务中使用 wsHttpBinding，出于安全问题，证书需要 wsHttpBinding，但我想在没有安全性的情况下使用 wsHttpBinding，这适用吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:44:04.693

我不知道你为什么要使用 wsHttpBinding 而不是 basicHttpBinding，但也许[BasicHttpBinding 和 WsHttpBinding 之间的区别](http://www.codeproject.com/Articles/36396/Difference-between-BasicHttpBinding-and-WsHttpBind)以及[使用 wsHttpBinding 和 Windows 身份验证](http://msdn.microsoft.com/en-us/library/ff650619.aspx)对你有用。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:39:40.380

是的，您可以将`Message`安全性与`Windows`身份验证一起使用：

```
<security mode="Message">
     <message clientCredentialType="Windows" />
</security> 
```

# android-layout - 我们可以在不使用 TABLELAYOUT 的情况下将布局分成两个水平部分吗

> ID：13068702
> 
> 赞同：0
> 
> 时间：2012-10-25T12:33:45.093
> 
> 标签：android-layout

我想将屏幕分成两个水平半部分，左侧显示 TEXTVIEW，右侧显示 EDITTEXT。我总共有 8 行。此外，每个文本视图中的文本大小各不相同。我可以通过使用 android:weight 等任何属性来做到这一点吗？我知道我可以通过使用 tableLayout 但创建许多影响性能的子布局来实现这一点。所以伙计们请提出任何其他替代方案来实现这一目标。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:13:16.590

是的，您可以将两列和 8 行保持行高作为包装内容，您能否展示一个布局图以更好地理解并找到替代方案

# iphone - 如何获取 iOS 的代码覆盖率数据？

> ID：13068705
> 
> 赞同：2
> 
> 时间：2012-10-25T12:33:55.083
> 
> 标签：iphone, xcode

我想查看 iOS 项目的代码覆盖率数据。

显然它曾经可以使用 gcov 但使用 Xcode 4.5 不会产生任何 gcda 文件。

您是否知道有关如何使用最新的 Xcode 4.5.1 获取此类数据的任何教程或解决方案？

谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:55:11.987

在单元测试目标中设置以下标志：

`Generate Test Coverage Files`和`Instrument Program Flow`

到`yes`.

据我记得，如果单元测试通过，只会有覆盖文件。
您将在`.../Derived Data/Your App/Intermediates/Your App.build/Objects-normal/i386`

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:40:08.817

在我们的定期伦敦 iOS 开发者小组会议上，我参加了关于 Xcode 中代码覆盖率的精彩演讲。

您可以[从 Lanyrd](http://lanyrd.com/2012/lidg44/sytpc/)获得幻灯片。

如果我没记错的话，使用更新的 Xcode 实际上更容易。

# java - 如何正确检查数据库中是否存在行？

> ID：13068706
> 
> 赞同：2
> 
> 时间：2012-10-25T12:33:58.740
> 
> 标签：java, hibernate, criteria

我的 DAO 方法之一包含以下方法：

```
@Override
public boolean isAvailable(String code) {
    Criteria criteria = getSession().createCriteria(MyEntity.class);
    cr.add(Restrictions.eq("code", code).ignoreCase());
    cr.setProjection(Projections.rowCount());
    Long rowCount = (Long) cr.uniqueResult();
    return (rowCount > 0) ? true : false;
} 
```

在最后一行抛出以下异常：

```
org.hibernate.exception.DataException: could not execute query
at org.hibernate.exception.SQLStateConverter.convert(SQLStateConverter.java:102)
at org.hibernate.exception.JDBCExceptionHelper.convert(JDBCExceptionHelper.java:66)
at org.hibernate.loader.Loader.doList(Loader.java:2452)
at org.hibernate.loader.Loader.listIgnoreQueryCache(Loader.java:2192)
at org.hibernate.loader.Loader.list(Loader.java:2187)
at org.hibernate.loader.criteria.CriteriaLoader.list(CriteriaLoader.java:119)
at org.hibernate.impl.SessionImpl.list(SessionImpl.java:1706)
at org.hibernate.impl.CriteriaImpl.list(CriteriaImpl.java:347)
at org.hibernate.impl.CriteriaImpl.uniqueResult(CriteriaImpl.java:369) 
```

`code`是此表中的主键。Hibernate 正在控制台中生成其选择命令。当我在数据库的 SQL 控制台中检查此选择命令时，它会返回正确的值。那么我做错了什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:56:50.017

看看[这个其他问题](https://stackoverflow.com/questions/1372317/how-do-we-count-rows-using-hibernate)。该方法`uniqueResult`至少返回一个`Number`，然后试试这个：

```
long rowCount = ((Number)cr.uniqueResult()).longValue();
return (rowCount > 0) ? true : false; 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-01-13T01:14:03.823

我的问题的解决方案非常棘手。`code`上面我的方法中的参数是解决方案的关键。一开始我在 Hibernate 实体类中有与此参数对应的列，定义为具有 5 个符号长度的 varchar。与此同时，我不得不将其长度更改为只有 2 个标志。但我调用的方法仍然是 5 个符号字符串长度。这就是我的错误发生的原因。我再次将 varchar 的长度更改为 5 个标志，此时一切都很好。

# java - 如何使用所需的 HashMap 声明自定义 jsp 标记 ?

> ID：13068707
> 
> 赞同：2
> 
> 时间：2012-10-25T12:34:01.800
> 
> 标签：java, jsp, hashmap, jsp-tags, custom-tag

在我的课堂上，我需要一个 HashMap。如何在 tld 中声明这个？

```
 <attribute>
        <name>map</name>
        <required>true</required>
        <rtexprvalue>true</rtexprvalue>
        <type>java.util.HashMap</type>        
    </attribute> 
```

**更新：** 上面的代码有效。但是我想指定HashMap的类型

怎么：

```
HashMap<?,?> 
```

我想要的：

```
HashMap<String, String> 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-11-23T18:32:35.170

我找到了解决方案：

```
 <type><![CDATA[java.util.HashMap<java.lang.String, java.lang.String>]]</type> 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:43:42.543

我认为您不能在标签上指定类型。您可以使用自定义 el 函数来做到这一点：

```
<?xml version="1.0" encoding="UTF-8" ?>
<taglib xmlns="http://java.sun.com/xml/ns/j2ee" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xsi:schemaLocation="http://java.sun.com/xml/ns/j2ee web-jsptaglibrary_2_0.xsd"
    version="2.0">
    <tlib-version>1.0</tlib-version>
    <short-name>shortname</short-name>
    <uri>http://some/uri</uri>
    <function>
        <name>testMethod</name>
        <function-class>
            somePackage.TestFunction
        </function-class>
        <function-signature>
            java.lang.String testMethod( java.util.HashMap)
        </function-signature>
    </function>
</taglib> 
```

对应类：

```
public class TestFunction {

public static String testMethod(HashMap<?, ?> map) {
    return map.toString();
}
} 
```

# windows - Windows XP 上的兼容性和性能 Visual Studio 2012

> ID：13068712
> 
> 赞同：3
> 
> 时间：2012-10-25T12:34:06.640
> 
> 标签：windows, visual-studio-2010, visual-studio, windows-xp, visual-studio-2012

我需要在 Windows XP 系统上安装 Visual Studio 2012。我已经在那台机器上安装了 Visual Studio 2010（框架 4）。是否有任何兼容性或性能问题？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:37:10.407

你不能，它与 WinXP 不兼容：http: [//www.microsoft.com/visualstudio/eng/products/compatibility](http://www.microsoft.com/visualstudio/eng/products/compatibility)

# c# - 将数据适配器和网格视图分离到一个类文件中

> ID：13068713
> 
> 赞同：0
> 
> 时间：2012-10-25T12:34:07.333
> 
> 标签：c#, datagridview, dataadapter

我正在尝试将我的代码分成类文件。但是我遇到的问题是如何访问类文件`dataGridviewLogging`中包含`Form1`的内容？

```
public void getLogging(String sql)
{
    SqlDataAdapter dataadapter = new SqlDataAdapter(sql, mycon);       
    DataSet ds = new DataSet();

    try
    {
        dataadapter.Fill(ds, "LOG_MESSAGE");
        dataGridViewLogging.DataSource = ds;
        dataGridViewLogging.DataMember = "LOG_MESSAGE";
    }
    catch (Exception f)
    {
        Console.WriteLine(f.ToString());
        MessageBox.Show("FAILURE:" + f.ToString());
        return;
    }
} 
```

我一直在想一种方法可以做到这一点？想法？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:47:10.203

你可以做一些像层架构......演示，业务逻辑和数据访问。

创建一个将字符串作为命令文本的方法或函数，指定您的命令类型（SP 或内联命令）

使用它来获取 DataSet 或 DataTable 作为返回对象。

```
Public DataTable GetDataTableFromDB(String CommandText,
                                    SqlCommandType type,
                                    SqlParameter [] param)
{
    DataTable temp=somthing;
    /* your logic */
    return DataTable;
} 
```

将此用作类文件并在您的 form1 类或 form1.cs 中获取您的数据集（如果您是 c#bee）

玩得开心，毕竟代码很有趣！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:37:27.543

由于您的方法已命名`getLogging`，因此您希望返回可用作数据源的数据。因此，与其在此处设置数据源，不如将其设置在可以访问数据绑定控件的位置。

例如（在 Form1 中）：

```
dataGridViewLogging.DataSource = getLogging(
          DateTime.Today.AddMonths(-6)
        , DateTime.Today);  // don't pass the sql directly, use parameters instead 
```

在你的课堂上：

```
public DataSet getLogging(DateTime logFrom, DateTime logTo)
{
    DataSet ds = new DataSet();
    const string sql = "SELECT Columns FROM dbo.Table WHERE LoggedAt BETWEEN @LoggedFrom AND @LoggedTo ... ODRER BY ...";
    using (var mycon = new SqlConnection(connectionString))
    using (var da = new SqlDataAdapter(sql, mycon))
    {
        da.SelectCommand.Parameters.AddWithValue("@LoggedFrom", logFrom);
        da.SelectCommand.Parameters.AddWithValue("@LoggedTo", logFrom);
        try
        {
            da.Fill(ds);
        } catch (Exception f)
        {
            // log here
            throw;
        }
    }
    return ds;
} 
```

# jquery - 刷新时随机淡入淡出列表

> ID：13068716
> 
> 赞同：0
> 
> 时间：2012-10-25T12:34:16.037
> 
> 标签：jquery

HTML

```
<ul id="content">
    <li>first</li>
    <li>second</li>
    <li>third</li>
    <li>fourth</li>
    <li>fifth</li>
    <li>sixth</li>
</ul> 
```

jQuery

```
function InOut( elem )
{
 elem.delay('1')
     .fadeIn('3000')
     .delay('5000')
     .fadeOut(
               function(){
                   if(elem.next().length > 0)
                   {InOut( elem.next() );}
                   else
                   {InOut( elem.siblings(':first'));}

                 }
             );
}

$(function(){
$('#content li').hide();
InOut( $('#content li:first') );

}); 
```

这是 gaby 的作品，下面是他的小提琴

这是小提琴[http://jsfiddle.net/gaby/S5Cjm/1/](http://jsfiddle.net/gaby/S5Cjm/1/)

只是想知道如何随机列表和刷新，所以这意味着一切都是随机的

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:43:17.630

只需添加以下内容即可随机化列表。这样做的好处是列表每次都会以相同的顺序淡入淡出，并且每个项目将至少循环一次，因为淡入淡出函数不是随机的，而是列表本身。

```
$(function(){
    // randomize the list
    var list = $("#content"),
        items = $("#content > li"),
        len = items.length;

    while(len--){
        var ran = Math.floor(Math.random()*len);
        list.append(items[ran]);
    }

    // hide it and do the fades.
    $('#content li').hide();
    InOut( $('#content li:first') );

}); 
```

**[现场演示](http://jsfiddle.net/S5Cjm/1182/)**

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:43:10.237

你可以这样做：http: [//jsfiddle.net/S5Cjm/1180/](http://jsfiddle.net/S5Cjm/1180/)

```
function InOut( elem )
{
 elem.delay()
     .fadeIn()
     .delay()
     .fadeOut( 
               function(){                    
                   InOut($(jQuery("li").get().sort(function(){ 
                      return Math.round(Math.random())-0.5
                    }).slice(0,1)))                         
                 }
             );
}

$(function(){
$('#content li').hide();
InOut( $('#content li:first') );

}); 
```

​</p>

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:43:26.853

```
function InOut( elem )
{
 elem.delay()
     .fadeIn()
     .delay()
     .fadeOut( 
               function(){ 
                   if(elem.siblings().length > 0)
                   {InOut( $(elem.siblings('*')[Math.floor(Math.random() * elem.siblings().length)]));}
                   else
                   {InOut( elem.siblings(':first'));}

                 }
             );
}

$(function(){
$('#content li').hide();
InOut( $('#content li:first') );

}); 
```

使用 Math.random() 可以解决您的问题。有关示例，请参见上面的代码。

希望这可以帮助！

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T12:46:49.377

我更新了你的小提琴：

[http://jsfiddle.net/S5Cjm/1179/](http://jsfiddle.net/S5Cjm/1179/)

JS

```
function InOut( elem )
{
    var ran = Math.floor((Math.random()*6)+1);
 elem.delay().fadeIn().delay().fadeOut(function(){ 
     InOut(elem.parent().find('li:nth-child('+ran+')'));
 });
}

$(function(){
$('#content li').hide();
InOut( $('#content li:first') );

}); 
```

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-04-08T05:14:27.570

```
(function() {
    $('p').show();
    var lis = $('li').hide();

    $('a').click(function() {
        var i = 0;
        (function displayImages() {
            lis.eq(i++).fadeIn(200, displayImages);
        })();
    });

})(); 
```

# android - 执行 setContentView 时出现 NullPointerException

> ID：13068722
> 
> 赞同：0
> 
> 时间：2012-10-25T12:34:36.460
> 
> 标签：android, view, android-mapview

这是我拥有的课程，并给了我错误：

```
public class ShowCarMapChild extends MapActivity {

private MapView mapView;
private Car car;
private String tag;

@Override
protected void onCreate(Bundle icicle) {
    // TODO Auto-generated method stub
    super.onCreate(icicle);
    Log.d("hemendik pasetan da?", "bai!!");
    setContentView(R.layout.car_map_view);
}

public void setCar(Car car){
    this.car = car;
}

public void setTag (String tag){
    this.tag = tag;
}

public String getTag (){
    return tag;
}

public View getMapView(Context context){
    Log.d("getMapView", "pass");
    setContentView(R.layout.car_map_view);
    LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
    View view = infalInflater.inflate(R.layout.car_map_view, null);
    setMap(view,context);
    return view;
}

public void setMap(View view, Context context){
    mapView = (MapView) view.findViewById(R.id.mapShowCarLocation);
    MapController mc = mapView.getController();
    mc.animateTo(car.getLocation());
    mc.setZoom(15);
    PinpointItem point = new PinpointItem(car.getLocation(), car, context);
    Drawable d = getResources().getDrawable(R.drawable.pinpoint);
    CustomPinpointOverlay overlay = new CustomPinpointOverlay(d);
    overlay.insertPinpoint(point);
    mapView.getOverlays().add(overlay);
}
@Override
protected boolean isRouteDisplayed() {
    // TODO Auto-generated method stub
    return false;
} 
```

}

布局：car_map_view.xml

```
<?xml version="1.0" encoding="UTF-8"?>
<LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
android:layout_width="fill_parent"
android:layout_height="150dip"
android:orientation="vertical" >

    <com.google.android.maps.MapView
        android:id="@+id/mapShowCarLocation"
        android:layout_width="fill_parent"
        android:layout_height="fill_parent"
        android:clickable="true"
        android:apiKey="0UFOPeLgKxoW8VGjdzV5QN6N53N7733i1kTFI3g"
        android:enabled="true" />
</LinearLayout> 
```

正如我在标题中所说的错误是在我执行 setContentView 时。我还必须说，我正在尝试使用此类作为子类放入可扩展列表中。如果需要其余代码，也请告诉我。

这是我调用getMapView()方法的地方。来自 BaseExpandableListAdapter

```
 public class ShowCarExpandListAdapter extends BaseExpandableListAdapter {

 ....

 public View getChildView(int groupPosition, int childPosition, boolean isLastChild, View view,
        ViewGroup parent) {
    // TODO Auto-generated method stub

    if (view == null){
        if (groupPosition == 0){
            Log.d("getChildView", "pass");
            ShowCarMapChild mapChild = (ShowCarMapChild) getChild(groupPosition, childPosition);
            view = mapChild.getMapView(context);
            //LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
            //ShowCarMapChild mapChild = (ShowCarMapChild) getChild(groupPosition, childPosition);
            //view = infalInflater.inflate(R.layout.car_map_view, null);
            //MapView mv = mapChild.getMap(view, context);
            //mv.setTag(mapChild.getTag());

        }else{
            Log.d("getChildView", "pass from else");
            LayoutInflater infalInflater = (LayoutInflater) context.getSystemService(context.LAYOUT_INFLATER_SERVICE);
            ShowCarExpandChild child = (ShowCarExpandChild) getChild(groupPosition, childPosition);
            view = infalInflater.inflate(R.layout.car_child, null);
            TextView tv = (TextView) view.findViewById(R.id.tvChild);
            tv.setText(child.getName());
            tv.setTag(child.getTag());
        }           
    }
    return view;
}

  ..... 
```

# jquery - 将 div 附加到动态创建的 div 中

> ID：13068727
> 
> 赞同：1
> 
> 时间：2012-10-25T12:35:21.537
> 
> 标签：jquery

我有以下代码（从 CSS-Tricks 提取）并想在其中添加另一个 div（模态窗口），但我似乎无法让它工作。stock-modal div 已经存在于 DOM 中，但目前是隐藏的，因为我只希望它在 #overlay div 存在时出现；

```
$('.stock-check').on('click', function () {

    var docHeight = $(document).height();

    $('body').append('<div id="overlay" />');
    $('#overlay').height(docHeight).css({
        'opacity': 0.7,
        'position': 'absolute',
        'top': 0,
        'left': 0,
        'background-color': 'black',
        'width': '100%',
        'z-index': 10000
    });

    $('<div class="stock-modal" />').appendTo('#overlay').show();

}); 
```

当它运行时，它会在覆盖 div 中插入一个空的 stock-modal div，而不是 DOM 中存在的那个。我究竟做错了什么？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:38:40.660

不要创建新的 div。通过先选择它来附加现有的。

```
$(".stock-modal").appendTo('#overlay').show(); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:38:51.313

您应该更改为，首先选择现有的`.stock-modal`div 和 appendTo`#overlay`

```
$('.stock-modal').appendTo('#overlay').show(); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:47:22.437

检查覆盖 div 是否已经存在，然后只添加模态，否则创建覆盖并添加模态。

```
$('.stock-check').on('click', function () {

 var docHeight = $(document).height();

if($('#overlay').length > 0)
{
  $('<div class="stock-modal" />').appendTo('#overlay').show();
}
else
{
 $('body').append('<div id="overlay" />');
 $('#overlay').height(docHeight).css({
    'opacity': 0.7,
    'position': 'absolute',
    'top': 0,
    'left': 0,
    'background-color': 'black',
    'width': '100%',
    'z-index': 10000
 });

 $('<div class="stock-modal" />').appendTo('#overlay').show();
}

}); 
```

# regex - Bash 脚本：sed/awk/regex 匹配 IP 地址并替换

> ID：13068730
> 
> 赞同：2
> 
> 时间：2012-10-25T12:35:33.510
> 
> 标签：regex, replace, sed, awk

我在 bash 脚本中有一个字符串，其中包含一行日志条目，例如：

```
Oct 24 12:37:45 10.224.0.2/10.224.0.2 14671: Oct 24 2012 12:37:44.583 BST: %SEC_LOGIN-4-LOGIN_FAILED: Login failed [user: root] [Source: 10.224.0.58] [localport: 22] [Reason: Login Authentication Failed] at 12:37:44 BST Wed Oct 24 2012 
```

澄清; 那里列出的第一个 IP “10.224.0.2”是提交此日志条目的机器，登录尝试失败。有人试图从日志条目中第二个 IP 地址“10.224.0.58”的计算机登录，但失败了。

我希望将第一次出现的 IP 地址“10.224.0.2”替换为该机器的主机名，正如您目前看到的那样，它是“IPADDRESS/IPADDRESS”，两次拥有相同的信息是没有用的。所以在这里，我想`grep`（或类似地）输出第一个 IP，然后将其传递给类似`host`命令以获取反向主机并在日志输出中替换它。

我想对第二个 IP“10.224.0.58”重复此操作。我想找到这个 IP 并将其替换为主机名。

但是，不仅仅是这两个特定的 IP 地址，任何 IP 地址。所以我想搜索 1 到 3 之间的 4 个整数，用 3 个句号分隔。

正则表达式是前进的方向，还是使问题复杂化？

非常感谢。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T12:47:57.563

用主机名替换固定 IP 地址：

```
$ cat log | sed -r 's/10\.224\.0\.2/example.com/g' 
```

用主机名替换所有 IP 地址：

```
$ cat log | sed -r 's/[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}/example.com/g' 
```

如果你想调用一个外部程序，使用 Perl 很容易做到（只需`host`用你的查找工具替换）：

```
$ cat log | perl -pe 's/(\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})/`host \1`/ge' 
```

希望这足以让您入门。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:04:48.807

有多种方法可以找到 IP 地址，这里有一种。只需将 "printf '<<<%s>>>' " 替换为 "host" 或此 GNU awk 脚本中的任何命令名称：

```
$ cat tst.awk
{
    subIp = gensub(/\/.*$/,"","",$4)
    srcIp = gensub(/.*\[Source: ([^]]+)\].*/,"\\1","")

    "printf '<<<%s>>>' " subIp | getline subName
    "printf '<<<%s>>>' " srcIp | getline srcName

    gsub(subIp,subName)
    gsub(srcIp,srcName)

    print
}
$
$ gawk -f tst.awk file
Oct 24 12:37:45 <<<10.224.0.2>>>/<<<10.224.0.2>>> 14671: Oct 24 2012 12:37:44.583 BST: %SEC_LOGIN-4-LOGIN_FAILED: Login failed [user: root] [Source: <<<10.224.0.58>>>] [localport: 22] [Reason: Login Authentication Failed] at 12:37:44 BST Wed Oct 24 2012 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-07-04T11:11:28.693

一起用谷歌搜索了这一行命令。但无法将创建的 IP 地址传递给 ssh 命令：

```
sed -n 's/\([0-9]\{1,3\}\.\)\{3\}[0-9]\{1,3\}/\nip&\n/gp' test | grep ip | sed 's/ip//' |   sort | uniq 
```

“测试”是 sed 命令正在搜索模式的文件

# configuration - 如何在不同的机器上运行 OpenERP 6.1 Web

> ID：13068731
> 
> 赞同：3
> 
> 时间：2012-10-25T12:35:33.347
> 
> 标签：configuration, client-server, openerp, tcp-ip, erp

我如何在与 OpenERP 服务器不同的机器上运行 OpenERP Web 6.1？

在 6.0 中这很简单，有 2 个配置文件和 2 个服务器（服务器和“Web 客户端”），它们通过 TCP/IP 进行通信。

我不确定如何为 6.1 设置类似的东西。

我无法找到有关此主题的有用文档。他们仍然通过 TCP/IP 进行通信吗？如何配置“Web 客户端”以使用不同的服务器机器？我想了解这里的新概念。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-26T08:28:15.487

## tl;博士回答

它仅用于调试，但您可以。使用[openerp-web](https://bazaar.launchpad.net/~openerp/openerp-web/6.1/files)`openerp-web`项目中包含的启动脚本，您可以从源代码安装它。它没有单独的安装程序，因为它不适用于生产。您可以传递参数来设置要连接的远程 OpenERP 服务器，例如,等。使用来查看选项。`--server-host``--server-port``--help`

## 长答案

OpenERP 6.1[带来了一系列架构更改](http://www.openerp.com/es/node/1106)，允许：

*   由于改进的无状态性，并行运行许多 OpenERP 服务器进程。这使得分布式部署变得轻而易举，并提供负载平衡/故障转移/高可用性功能。它还允许 OpenERP 从多处理器/多核硬件中受益。
*   将 Web 界面部署为常规 OpenERP 模块，使您不必部署和维护两个单独的服务器进程。当它嵌入运行时，Web 客户端还可以直接 Python 调用服务器 API，避免不必要的 RPC 编组，从而获得额外的性能提升。

此[演示文稿](http://www.slideshare.net/openobject/openerp-61-framework-changes)中更详细地解释了此更改及其背后的所有技术原因。

[使用openerp-web](https://bazaar.launchpad.net/~openerp/openerp-web/6.1/files)`openerp-web`项目中提供的脚本的 Web 客户端仍然可以使用独立模式，但它用于调试目的而不是生产。它默认以单线程模式运行（参见启动参数），以便序列化所有 RPC 调用并使调试更容易。除了较慢之外，此模式还会破坏所有具有 Web 部件的模块，除非所有常规 OpenERP 插件也被复制到 Web 进程中。即便如此，有些还是会被破坏，因为它们可能仍然部分依赖于嵌入式模式。`--multi-thread``--addons-path`

现在，如果您只是在寻找分布式部署模型，请停止寻找：只需运行多个 OpenERP（服务器）进程和完整的堆栈。看看上面提到的演示文稿，开始使用 Gunicorn、WSGI 等。

注意：由于这些严重的限制及其相对无用（相对于维护成本），Web 客户端的独立模式已在 OpenERP 7.0 中完全删除[（请参阅启动板上的 rev, 3200） 。](https://bazaar.launchpad.net/~openerp/openerp-web/trunk/revision/3200)

# c# - WPF Prism 在模块中加载 XML

> ID：13068734
> 
> 赞同：3
> 
> 时间：2012-10-25T12:35:37.107
> 
> 标签：c#, wpf, module, prism

我正在试验 prism 以及它为创建分为模块的应用程序带来的可能性。在我的一个模块中，我想从 XML 文件加载数据，但无法使其正常工作

```
Uri uri = new Uri(resourceFile, UriKind.RelativeOrAbsolute);
StreamResourceInfo info = Application.GetResourceStream(uri); 
```

将在我的模块项目的“数据”文件夹中查找文件。相反，如果我将带有 XMl 文件的“Data”文件夹放在 Shell 项目中，则文件会成功加载。

我想念什么？

编辑：resourceFile 的值：“Data/file.xml”

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T09:48:20.740

终于让它工作了：

`Uri uri = new Uri("MainModule1;component/" + resourceFile, UriKind.Relative);`

实际上我之前确实尝试过，但一定是犯了一个错误。

# nhibernate - 无论如何，NHibernate 消息都会发送到控制台

> ID：13068736
> 
> 赞同：2
> 
> 时间：2012-10-25T12:35:45.097
> 
> 标签：nhibernate, fluent-nhibernate, log4net

我有一个使用 Fluent NHibernate 的控制台应用程序。我已将其配置为使用 log4net 登录到各个地方。而且效果很好。我可以看到我想看到的 SQL，并且可以将日志输出发送到各种 appender。问题是我无法抑制 log4net sql 输出到控制台。

额外的控制台输出不受我的 log4net 配置设置的控制。无论我是否关闭所有附加程序，它都会出现。

有什么建议么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:46:17.820

您是否在 app.config 的 nhibernate 部分中将此属性设置为**true ？**

```
<property name="show_sql">true</property> 
```

如果是这样，请将其设置为 false。

### 编辑

这是来自 nhibernate 源代码的示例代码：

```
log.Debug(logMessage);
if (LogToStdout)
{
    Console.Out.WriteLine("NHibernate: " + statement);
} 
```

在上面的代码`LogToStdout`中是直接链接到`show_sql`配置属性的。如果您将此设置为 true，则不会阻止它写入控制台。关于您的评论，您无法通过 log4net 进行控制。您只能`log.Debug(logMessage)`通过 log4net 控制您在做什么。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2014-04-30T11:59:29.463

要禁用任何日志，请输入以下代码：

```
< add key="nhibernate-logger" value="" /> 
```

进入您的 appSettings 部分。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-05-21T17:37:40.380

NHibernate 日志对我帮助不大，我会在需要时打开它们...我将这些设置添加到我的 app.config 的 log4net 部分：

```
 <logger name="NHibernate">
      <level value="OFF" />
    </logger>

    <logger name="NHibernate.SQL">
      <level value="OFF" />
    </logger> 
```

# google-maps - Google Fusion 地图在 IE9 中不可见

> ID：13068741
> 
> 赞同：2
> 
> 时间：2012-10-25T12:35:56.327
> 
> 标签：google-maps, internet-explorer-9

我刚刚使用加密 ID 而不是数字 ID 制作了我的第一个 Google Fusion 地图。看起来应该如此——但仅限于 Chrome 和 FireFox。

[http://www.kaasogmulvad.dk/unv/a4/aa2009.htm](http://www.kaasogmulvad.dk/unv/a4/aa2009.htm)

当我尝试在 IE9 中打开它时，地图区域是灰色的。只有传说看起来不错。

我使用此地图的代码作为模板开始： [https](https://google-developers.appspot.com/fusiontables/docs/samples/fusiontableslayer_example_4b8296dfe1f18ec9a830c4329e2cfafe.frame) ://google-developers.appspot.com/fusiontables/docs/samples/fusiontableslayer_example_4b8296dfe1f18ec9a830c4329e2cfafe.frame 此地图在 IE9 中运行良好。所以我想知道我的问题是什么？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:41:19.787

你的页面对我来说很好。也许与您的浏览器有关。

![即9](../Images/082e3e5df9096525e32cfe15268170c6.png)

# php - 重定向到其他站点时发送数据

> ID：13068748
> 
> 赞同：0
> 
> 时间：2012-10-25T12:36:21.610
> 
> 标签：php, session

我在magento工作。我通过单击按钮重定向到另一个网站。由于 magento 使用自己的会话并检查站点 ID 或其他内容，以便不与其他站点共享会话数据。那么，如果我想从一个维护其会话的站点共享数据，那么合适的方式是什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:29:48.930

您必须将会话 ID（或数据本身）合并到 url 中（有点不安全），或者制作一个在多个域上有效的 cookie。您可以通过对会话 id 进行编码并检查请求者 ip 来降低会话劫持的风险，但在使用非 ssl 连接时仍然存在小风险。

# iphone - 您的 Apple ID 已被禁用 [环境：沙盒]

> ID：13068752
> 
> 赞同：7
> 
> 时间：2012-10-25T12:36:48.820
> 
> 标签：iphone, ipad, testing, app-store, in-app-purchase

我正在使用 iTunes 测试帐户测试我的应用程序内购买。

我运行游戏并登录沙盒测试帐户。当尝试在应用程序中购买东西时，一个消息框会提示我确认您的应用程序内购买信息。

然后我点击“购买”，它会询问我沙盒帐户的 Apple ID 密码。当我输入密码时，它会提示我以下消息...

您的 Apple ID 已被禁用。[环境：沙盒]

我用几个测试帐户测试了相同的结果。任何人都可以提供一些帮助吗？

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T22:08:06.460

如果您使用沙盒 IAP 测试帐户登录真实的 iTunes Store 或设置应用程序，您的沙盒帐户将被禁用。

我现在找不到确切的文档 URL，但我确定我已经阅读过了。

这是来自文档的警告消息：

重要提示：请勿在“设置”应用程序中使用您的测试帐户登录。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T21:59:00.363

这可能是由于尚未同意新的 iOS 付费应用协议。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2013-12-15T23:32:50.893

在使用测试用户帐户之前，您需要确保在 App Store 应用中退出您的真实帐户。

# sql - 在此查询中使用 SQL IN 的替代方法

> ID：13068753
> 
> 赞同：2
> 
> 时间：2012-10-25T12:36:48.370
> 
> 标签：sql, database, oracle

我有一个包含逗号分隔值的字符串 = value1, value2, value3 .......

我想执行以下操作：

```
SELECT col FROM table WHERE col IN :values 
```

如果值的条目少于 1000 个，这可以正常工作。当值有超过 1000 个条目时，它会出错。IN 的使用有限制。

有没有其他方法可以执行此查询？

编辑：它是 Oracle 的商业智能发布者应用程序。客户/用户可以使用下面的任何数据库。

我无法控制数据库。所以我无法创建临时表或存储过程。我所能做的就是从 UI 屏幕中选择多个值（它形成逗号分隔的字符串）并在 SQL 查询中使用它。取决于生成的报告。

*   不能将 EXISTS 与静态字符串值一起使用。
*   无法使用存储过程或临时表。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:39:45.420

最大的性能需要一些精心制作。我建议建立一个内存临时表来保存你的值，每一个都在一行中，然后将你的真实表加入到这个临时表中。这将使您的查询显着更快，并且作为额外的好处，临时表中的行数不受限制（或者更确切地说，仅受内存限制）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T20:27:35.320

如果您*无法*创建全局临时表，则可以将分隔列表转换为使用`sys.dbms_debug_vc2coll()`并加入此集合的行。

```
SELECT t.col 
FROM table t
JOIN TABLE(SELECT column_value 
             FROM sys.dbms_debug_vc2coll(:values)) c on t.col = c.column_value; 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:40:42.530

您可以将值插入临时表，然后进行连接：

```
SELECT col from table t1 JOIN #temp t2 WHERE table.col = t2.col; 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T12:42:02.370

创建一个存储过程来为您完成这项工作，如下所示：

```
Create PROCEDURE [dbo].[spGetData] 
    -- Add the parameters for the stored procedure here
    @ids nvarchar(MAX)
AS
BEGIN
    -- SET NOCOUNT ON added to prevent extra result sets from
    -- interfering with SELECT statements.
    SET NOCOUNT ON;

CREATE TABLE #TempTable(col int)
while len(@ids) > 0
begin
  insert into #TempTable values (left(@ids, charindex(',', @ids+',')-1))
  set @ids = stuff(@ids, 1, charindex(',', @ids+','), '')
end
    -- Insert statements for procedure here
    select col from table where col in (select col from #TempTable)
END 
```

来源来自我的博客：[http ://alisissa.wordpress.com/2012/10/24/pass-a-comma-separated-list-to-a-stored-procedure/](http://alisissa.wordpress.com/2012/10/24/pass-a-comma-separated-list-to-a-stored-procedure/)

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T12:43:49.157

多年来，我们一直使用以下函数来拆分传递给存储过程的 CSV 字符串。（抱歉，如果它不是最现代、最优雅或最有效的方式，但它对我们的目的很有效）

```
CREATE FUNCTION [dbo].[fn_Split](@text varchar(8000), @delimiter varchar(20) = ' ')
RETURNS @Strings TABLE
(    
  position int IDENTITY,
  value varchar(8000)   
)
AS
BEGIN
DECLARE @index int 
SET @index = -1 
SET @text = LTRIM(RTRIM(@text))
WHILE (LEN(@text) > 0) 
  BEGIN  
    SET @index = CHARINDEX(@delimiter , @text)  
    IF (@index = 0) AND (LEN(@text) > 0)  
      BEGIN   
        INSERT INTO @Strings VALUES (@text)
          BREAK  
      END  

    IF (@index > 1)  
      BEGIN   
        INSERT INTO @Strings VALUES (LEFT(@text, @index - 1))   
        SET @text = RIGHT(@text, (LEN(@text) - @index))  
      END  
    ELSE 
      SET @text = RIGHT(@text, (LEN(@text) - @index)) 
    END
  RETURN
END 
```

在使用它是：

```
select value from dbo.fn_Split('string1,string2,string3',',') 
```

（哦，这是一个 MS SQL Server 数据库顺便说一句）

# php - Facebook 上的应用程序权限在浏览器和应用程序之间有所不同

> ID：13068754
> 
> 赞同：0
> 
> 时间：2012-10-25T12:36:58.120
> 
> 标签：php, facebook-graph-api

我正在开发一个带有 Facebook 登录的 iOS/Android 应用程序。该应用程序登录正确地要求基本和扩展权限（电子邮件、代表发帖）。但是，在尝试通过 PC 上的浏览​​器（safari 或 Chrome）授权应用程序时，Facebook 只要求基本的用户信息权限。

我正在关注本教程[https://developers.facebook.com/docs/howtos/login/server-side-login/](https://developers.facebook.com/docs/howtos/login/server-side-login/)一切正常，除了 Facebook 要求的权限不同。

关于如何使其在浏览器上正常工作的任何建议？

# php - 仅替换特定字符之间 和 在 PHP 中

> ID：13068755
> 
> 赞同：2
> 
> 时间：2012-10-25T12:37:06.833
> 
> 标签：php, regex, replace, tags

我有类似的东西`<code> <1> <2> </code>`，我想得到这个：`<code> &lt;1&gt; &lt;2&gt; </code>`但我只想在`<code></code>`标签内应用它，而不是在其他任何地方。

我已经有了这个：

```
$txt = $this->input->post('field');
$patterns = array(
    "other stuff to find", "/<code>.*(<).*<\/code>/m"
);
$replacements = array(
    "other stuff to replace", "&lt;"
);

$records = preg_replace($patterns,$replacements, $txt); 
```

它成功替换了字符，但删除了包围的`<code></code>`标签

任何帮助将不胜感激！谢谢

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T14:34:02.913

其他可能性，使用回调函数：

```
<?php
$test = "<code> <1> <2></code> some other text <code> other code <1> <2></code>";
$text = preg_replace_callback("#<code>(.*?)</code>#s",'replaceInCode',$test);
echo htmlspecialchars($test."<br />".$text);

function replaceInCode($row){
    $replace = array('<' => '&lt','>' => '&gt');
    $text=str_replace(array_keys($replace),array_values($replace),$row[1]);
    return "<code>$text</code>";
} 
```

没有第二个功能就不容易（甚至不确定是否可能），因为块内可以有多个 < 符号。

在这里阅读更多：http: [//php.net/preg_replace_callback](http://php.net/preg_replace_callback)

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:59:50.593

您可以使用正则表达式来完成，但不能一次性完成。我建议您单独处理其他替代品。下面的代码将处理 <code> 部分中的伪标签：

```
$source = '<code> <1> <2> </code>';

if ( preg_match_all( '%<code>(.*?<.*?)</code>%s', $source, $code_sections ) ) {

    $modified_code_sections = preg_replace( '/<([^<]+)>/', "&lt;$1&gt;", $code_sections[1] );
    array_walk( $modified_code_sections, function ( &$content ) { $content = "<code>$content</code>"; } );
    $source_modified = str_replace( $code_sections[0], $modified_code_sections, $source );

}

echo $source_modified; 
```

# c++ - 读取文本文件 C++

> ID：13068758
> 
> 赞同：0
> 
> 时间：2012-10-25T12:37:17.887
> 
> 标签：c++, class, text-files, istream

我是 C++ 的新手，我正在尝试编写一个代码来读取文本文件的整数并将每个整数逐行保存在不同的变量中。我在语法和如何安排代码方面遇到问题。基本上，文本文件每行包含 4 个整数，这些值将被读取到类行星的坐标和 id，如下所示。我知道代码 beloe 不完整，但这是我第一次使用 c++ 编程并且需要帮助。请你不需要用行星或任何东西来解释这一点。我只需要一个大致的了解

```
#include <iostream>
#include <fstream>

using namespace std;

class planet{
    public :
    float x_coordinates;
    float y_coordinates;
    float z_coordinates;
    int id;
};

planet*generate_planet(istream &fin)
{
    planet *x= new planet;
    fin >> x->id >> x->x_coordinates >> x->y_coordinates >> x->z_coordinates;

    return (x);
}
void report_planet( planet &p)
{

 cout<<"planet "<<p.id<<" has coordinates (" << p.x_coordinates<<","<<       p.y_coordinates<<","<< p.z_coordinates<<")"<<endl;
}
int main()
{
planet p;
planet *x;
ifstream fin("route.txt");
generate_planet(fin);
report_planet(*x);

  return 0;
} 
```

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:44:47.550

您的代码中有一些错误。

请注意，在这一行中： `fin>>x->id>>x->x_coordinates>>x->y_coordinates>>x->y_coordinates;`您写入两次 to`x->y_coordinate`而不是`x->z_coordinate`.

此外，您的`void report_planet(planet &p)`函数接收`planet &`作为参数，但您传递它`fin`是时间`ofstream`

另一件事是您正在尝试读取文件，而不是写入文件，因此使用`ofstream`是错误的，您应该`ifstream`改用。

你的代码甚至可以编译吗？

祝你好运。

# c# - 如何最好地确定新应用程序的系统要求？

> ID：13068759
> 
> 赞同：1
> 
> 时间：2012-10-25T12:37:17.060
> 
> 标签：c#, windows, performance, hardware

> **可能重复：**
> [如何指定您的软件需要的硬件？](https://stackoverflow.com/questions/170939/how-to-specify-the-hardware-your-software-needs)

您如何确定用户 PC 的系统要求以便他们安装和运行您的软件？

我知道的很明显，比如 Windows、.NET Framework [版本号]。但是你如何想出正确的 RAM、处理器和所有这些？

这只是您在调试应用程序时观察到的事情吗？您是否只是检查资源监视器并查看您的应用程序使用了多少磁盘使用量，或者它占用了多少内存？

是否有任何工具，或者您是否建议我使用工具来帮助确定我的应用程序的系统要求？

我已经搜索过这个，但我找不到太多信息。

*更重要的是，Windows 体验指数呢？我在商店里看到一些盒子应用程序说你需要一个 Windows Exp。N 的索引，但是是否有工具可以确定我的应用程序运行所需的索引？*

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:42:27.023

在您开始进行压力测试和负载测试、使用或仔细模拟生产量和数据多样性之前，您并没有真正为大规模部署做好准备的高质量构建。

当您这样做时，该测试的经验（测量，如有必要，投影）将为您的客户提供 RAM、CPU 和类似要求。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:43:11.613

当然，资源监视器是查看它消耗多少 CPU 和内存的好方法。但这一切都取决于您正在制作的应用程序，以及作为开发人员您所知道的 aprox。引擎盖下需要多少功率。

如果你只是在开发使用标准原生控件的标准 WinForms / VCL 应用程序，你真的不应该太担心 - 256 MB RAM 和 1 GHz 处理器就足够了，这通常是我倾向于放在我的 sysreq 页面上的.

对于重度 3D 游戏，你可能应该开始更多地研究它，我不能告诉你你是怎么做的。

如果您真的想要精确的赫兹和字节，您可以使用虚拟机并更改规格并查看您的应用程序的行为方式。

# python - 使用 numpy 数组和共享内存并行化 python 循环

> ID：13068760
> 
> 赞同：24
> 
> 时间：2012-10-25T12:37:24.550
> 
> 标签：python, numpy, parallel-processing, multiprocessing, shared-memory

我知道有关此主题的几个问题和答案，但尚未找到此特定问题的令人满意的答案：

在通过 numpy/scipy 函数操作 numpy 数组的 python 循环中进行简单的共享内存并行化的最简单方法是什么？

我不是在寻找最有效的方法，我只是想要一些简单的实现，当循环不并行运行时不需要大量重写。就像 OpenMP 在低级语言中实现一样。

我在这方面看到的最佳答案是[this one](https://stackoverflow.com/a/5550156/1580351)，但这是一种相当笨拙的方式，需要将循环表达为一个接受单个参数的函数，几行共享数组转换 crud，似乎需要从 调用并行函数`__main__`，从交互式提示（我花了很多时间）似乎不能很好地工作。

凭借 Python 的所有简单性，这真的是并行化循环的最佳方式吗？真的吗？这对于以 OpenMP 方式进行并行化来说是微不足道的。

我煞费苦心地阅读了多处理模块的不透明文档，却发现它是如此通用，以至于它似乎适用于除了简单的循环并行化之外的所有东西。我对设置管理器、代理、管道等不感兴趣。我只有一个简单的循环，完全并行，任务之间没有任何通信。使用 MPI 来并行化这样一个简单的情况似乎有点过头了，更不用说在这种情况下内存效率低下。

我还没有时间了解用于 Python 的众多不同的共享内存并行包，但想知道是否有人在这方面有更多经验并且可以向我展示一种更简单的方法。请不要建议使用 Cython 之类的串行优化技术（我已经使用它），或使用 BLAS 之类的并行 numpy/scipy 函数（我的情况更通用，更并行）。

* * *

## 回答 #1

> 赞同：18
> 
> 时间：2012-10-26T19:52:48.513

使用 Cython 并行支持：

```
# asd.pyx
from cython.parallel cimport prange

import numpy as np

def foo():
    cdef int i, j, n

    x = np.zeros((200, 2000), float)

    n = x.shape[0]
    for i in prange(n, nogil=True):
        with gil:
            for j in range(100):
                x[i,:] = np.cos(x[i,:])

    return x 
```

在 2 核机器上：

```
$ cython asd.pyx
$ gcc -fPIC -fopenmp -shared -o asd.so asd.c -I/usr/include/python2.7
$ export OMP_NUM_THREADS=1
$ time python -c 'import asd; asd.foo()'
real    0m1.548s
user    0m1.442s
sys 0m0.061s

$ export OMP_NUM_THREADS=2
$ time python -c 'import asd; asd.foo()'
real    0m0.602s
user    0m0.826s
sys 0m0.075s 
```

这可以并行运行，因为`np.cos`（与其他 ufunc 一样）释放了 GIL。

如果您想以交互方式使用它：

```
# asd.pyxbdl
def make_ext(modname, pyxfilename):
    from distutils.extension import Extension
    return Extension(name=modname,
                     sources=[pyxfilename],
                     extra_link_args=['-fopenmp'],
                     extra_compile_args=['-fopenmp']) 
```

和（删除`asd.so`和`asd.c`第一）：

```
>>> import pyximport
>>> pyximport.install(reload_support=True)
>>> import asd
>>> q1 = asd.foo()
# Go to an editor and change asd.pyx
>>> reload(asd)
>>> q2 = asd.foo() 
```

所以是的，在某些情况下，您可以仅使用线程进行并行化。OpenMP 只是一个花哨的线程包装器，因此这里只需要 Cython 以实现更简单的语法。如果没有 Cython，您可以使用该`threading`模块 --- 与多处理类似（并且可能更健壮），但您不需要做任何特殊的事情来将数组声明为共享内存。

然而，并不是所有的操作都会释放 GIL，所以 YMMV 用于性能。

```
*** 
```

从其他 Stackoverflow 答案中提取的另一个可能有用的链接 --- 多处理的另一个接口：[http ://packages.python.org/joblib/parallel.html](http://packages.python.org/joblib/parallel.html)

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T13:03:36.150

使用映射操作（在这种情况下`multiprocessing.Pool.map()`）或多或少是在单台机器上并行化循环的规范方法。除非并且直到内置`map()`被并行化。

可以在[此处](http://www.scipy.org/topical-software.html#parallel-and-distributed-programming)找到不同可能性的概述。

您可以将openmp[与 python](http://www.euroscipy.org/talk/6857)（或者更确切地说 cython）一起使用，但它看起来并不容易。

IIRC，如果只运行多处理的东西`__main__`是必要的，因为它与 Windows 兼容。由于 windows 缺少`fork()`，它会启动一个新的 python 解释器，并且必须在其中导入代码。

**编辑**

Numpy 可以并行化一些操作，例如`dot()`，`vdot()`以及`innerproduct()`，当配置了一个良好的多线程 BLAS 库（例如[OpenBLAS）时](http://www.tacc.utexas.edu/tacc-projects/gotoblas2)。（另见[这个问题](https://stackoverflow.com/questions/5260068/multithreaded-blas-in-python-numpy)。）

由于 numpy 数组操作主要是按元素进行的，因此似乎*可以*将它们并行化。但这将涉及为 python 对象设置共享内存段，或者将数组分成几部分并将它们提供给不同的进程，这与所做的没什么不同`multiprocessing.Pool`。无论采用何种方法，管理所有这些都会产生内存和处理开销。必须进行广泛的测试，以查看对于哪些大小的数组，这实际上值得付出努力。这些测试的结果可能会因硬件架构、操作系统和 RAM 数量而有很大差异。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2017-01-22T11:34:52.600

[ParallelRegression](https://github.com/rcbellamy/ParallelRegression)中mathDict( ) 类的[.map( )](https://parallel-regression.readthedocs.io/en/latest/ParallelRegression.html#ParallelRegression.mathDict.map)方法完全符合您在两行代码中寻找的功能，这在交互式提示下应该很容易。它使用真正的多处理，因此并行运行的函数是可腌制的要求是不可避免的，但这确实提供了一种简单的方法来循环来自多个进程的共享内存中的矩阵。

假设您有一个可腌制的功能：

```
def sum_row( matrix, row ):
    return( sum( matrix[row,:] ) ) 
```

然后你只需要创建一个代表它的 mathDict( ) 对象，并使用 mathDict( ).map( )：

```
matrix = np.array( [i for i in range( 24 )] ).reshape( (6, 4) )

RA, MD = mathDictMaker.fromMatrix( matrix, integer=True )
res = MD.map( [(i,) for i in range( 6 )], sum_row, ordered=True )

print( res )
# [6, 22, 38, 54, 70, 86] 
```

文档（上面的链接）解释了如何将位置参数和关键字参数的组合传递给您的函数，包括矩阵本身在任何位置或作为关键字参数。这应该使您能够使用您已经编写的几乎任何功能而无需修改它。

# android - PhoneGap：拍摄人像照片时应用程序崩溃

> ID：13068764
> 
> 赞同：4
> 
> 时间：2012-10-25T12:37:36.183
> 
> 标签：android, cordova, jquery-mobile

我正在使用 jQuery Mobile 和 PhoneGap 创建一个应用程序，该应用程序允许用户拍照、在屏幕上查看它，然后将其上传到最终将其发布到网站上的服务器应用程序。

如果我在横向模式下拍摄照片效果很好，但是当我拍摄纵向照片时应用程序会崩溃。正如您从下面的代码片段中看到的那样，我正在使用正确的Orientation 参数来尝试在拍摄照片后对其进行定向。如果没有这个参数，应用程序不会崩溃，但是照片在显示时的方向是错误的。

现在我正在索尼 XPERIA 安卓手机上测试这个。

这是负责这项工作的代码。

```
function onPhotoFail(message) {
    alert('Failed because: ' + message);
}

function onPhotoSuccess(imageURI) {             
    var $image = $("img#upload-image");
$image.attr("src", imageURI);
}

function capturePhoto() {
navigator.camera.getPicture(onPhotoSuccess, onPhotoFail, { quality: 50, destinationType: Camera.DestinationType.FILE_URI , correctOrientation: true });     
} 
```

这是堆栈跟踪：

```
E/AndroidRuntime(31760): FATAL EXCEPTION: main
E/AndroidRuntime(31760): java.lang.OutOfMemoryError: bitmap size exceeds VM budget
E/AndroidRuntime(31760):        at android.graphics.Bitmap.nativeCreate(Native Method)
E/AndroidRuntime(31760):        at android.graphics.Bitmap.createBitmap(Bitmap.java:477)
E/AndroidRuntime(31760):        at android.graphics.Bitmap.createBitmap(Bitmap.java:444)
E/AndroidRuntime(31760):        at org.apache.cordova.CameraLauncher.getRotatedBitmap(CameraLauncher.java:483)
E/AndroidRuntime(31760):        at org.apache.cordova.CameraLauncher.onActivityResult(CameraLauncher.java:326)
E/AndroidRuntime(31760):        at org.apache.cordova.DroidGap.onActivityResult(DroidGap.java:823)
E/AndroidRuntime(31760):        at android.app.Activity.dispatchActivityResult(Activity.java:3908)
E/AndroidRuntime(31760):        at android.app.ActivityThread.deliverResults(ActivityThread.java:2549)
E/AndroidRuntime(31760):        at android.app.ActivityThread.handleSendResult(ActivityThread.java:2595)
E/AndroidRuntime(31760):        at android.app.ActivityThread.access$2000(ActivityThread.java:121)
E/AndroidRuntime(31760):        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:973)
E/AndroidRuntime(31760):        at android.os.Handler.dispatchMessage(Handler.java:99)
E/AndroidRuntime(31760):        at android.os.Looper.loop(Looper.java:130)
E/AndroidRuntime(31760):        at android.app.ActivityThread.main(ActivityThread.java:3701)
E/AndroidRuntime(31760):        at java.lang.reflect.Method.invokeNative(Native Method)
E/AndroidRuntime(31760):        at java.lang.reflect.Method.invoke(Method.java:507)
E/AndroidRuntime(31760):        at com.android.internal.os.ZygoteInit$MethodAndArgsCaller.run(ZygoteInit.java:866)
E/AndroidRuntime(31760):        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:624)
E/AndroidRuntime(31760):        at dalvik.system.NativeStart.main(Native Method) 
```

我已经做了一些搜索，我没有看到有人遇到这个确切的问题。任何帮助表示赞赏

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T13:25:07.470

我必须查看您的堆栈跟踪才能确定，但​​这可能是 OutOfMemoryException。Android 处理图像处理非常糟糕。它基本上需要将整个图像加载到每个像素为 4 字节的内存中，这对于许多现代手机摄像头来说意味着高达 40 兆字节。

我现在唯一的建议是尝试将质量切换到 100。我知道这听起来违反直觉，但它可以避免在后台进行尽可能多的处理。

您可以阅读我的博客文章，讨论相机的一些问题：

[http://simonmacdonald.blogspot.ca/2012/07/change-to-camera-code-in-phonegap-190.html](http://simonmacdonald.blogspot.ca/2012/07/change-to-camera-code-in-phonegap-190.html)

另外，如果我可以看到堆栈跟踪，那将有所帮助。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-06-17T13:19:51.477

这个线程可能有点旧，但问题仍然存在。我一直在更深入地研究 phonegap 插件代码，并注意到问题在于，正如 Simon 所说，Android 类不处理图像操作-> 通过 Bitmapfactory.decodeStream 方法加载大位图。但是，如果您不需要调整图像大小（从图库中获取图像时 -> 您可以稍后在服务器端进行）并且您想要保持 100 质量并且您不需要使用正确的方向选项和您的目的地类型是 FILE_URI.. 简单地说，您只需要将图像 URI 上传到某处，例如，然后您需要包含 3 个选项：targetWidth 设置为 -1，targetHeight 设置为 -1，correctOrientation 设置为 false：

```
 navigator.camera.getPicture(cameraSuccess, cameraError, { quality: 100, targetWidth: -1, 
                    targetHeight: -1, correctOrientation: false,
                    destinationType: navigator.camera.DestinationType.FILE_URI,
                    sourceType: navigator.camera.PictureSourceType.SAVEDPHOTOALBUM}); 
```

您可以在[插件代码](https://github.com/apache/cordova-android/blob/master/framework/src/org/apache/cordova/CameraLauncher.java)中找到相关信息（第 394 行评论，cordova 2.8.0）。不知道为什么它不在文档中；）

# c# - 发布后出现奇怪的禁止访问错误

> ID：13068766
> 
> 赞同：0
> 
> 时间：2012-10-25T12:37:55.403
> 
> 标签：c#, asp.net, winforms, authentication, web-config

我得到：

![在此处输入图像描述](../Images/57a86431e28dffa5854d57100a846204.png)

在我将我的网站发布到 IIS 服务器之后，在我使用正确的凭据按下登录按钮之后。它在我的本地机器上运行良好，应该将我转移到`ControlPanel.aspx`页面。

登录按钮代码：

```
 protected void BtnSubmitClick(object sender, EventArgs e)
    {
        using (var db = new DbContext())
        {
            if (db.Users.Any(x => x.Username == txtUserName.Text && x.Password == txtPassword.Text))
            {
                FormsAuthentication.RedirectFromLoginPage(txtUserName.Text, true);
            }
            else
            {
                ClientScript.RegisterStartupScript(GetType(), "myalert", "alert('* invalid credentials, please try again');", true);
            }
        }
    } 
```

我认为这可能与 web.config 有关：

```
<?xml version="1.0" encoding="utf-8"?>
<!--
  For more information on how to configure your ASP.NET application, please visit
  http://go.microsoft.com/fwlink/?LinkId=169433
  -->
<configuration>
  <location path="Default.aspx">
    <system.web>
      <authorization>
        <allow users="?" />
      </authorization>
    </system.web>
  </location>
  <location path="Login.aspx">
    <system.web>
      <authorization>
        <allow users="?" />
      </authorization>
    </system.web>
  </location>
  <location path="Styles">
    <system.web>
      <authorization>
        <allow users="?" />
      </authorization>
    </system.web>
  </location>
  <location path="ControlPanel.aspx">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <location path="Options.aspx">
    <system.web>
      <authorization>
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  <system.web>
    <authorization>
      <deny users="?" />
    </authorization>
    <authentication mode="Forms">
      <forms loginUrl="Login.aspx" defaultUrl="ControlPanel.aspx" />
    </authentication>
    <compilation debug="true" targetFramework="4.0">
      <assemblies>
        <add assembly="System.Data.Entity, Version=4.0.0.0, Culture=neutral, PublicKeyToken=b77a5c561934e089" />
      </assemblies>
    </compilation>
    <customErrors mode="Off"></customErrors>
  </system.web>
  <connectionStrings>
    <add name="DbContext" connectionString="metadata=res://*/db.csdl|res://*/db.ssdl|res://*/db.msl;provider=System.Data.SqlClient;provider connection string=&quot;data source=192.168.***\SQLEXPRESS;initial catalog=Portal;persist security info=True;user id=sa;password=****;multipleactiveresultsets=True;App=EntityFramework&quot;" providerName="System.Data.EntityClient" />
  </connectionStrings>
</configuration> 
```

# c# - Google 协议缓冲区 - 从 C# 客户端向 Java 服务器发送消息

> ID：13068767
> 
> 赞同：1
> 
> 时间：2012-10-25T12:37:57.947
> 
> 标签：c#, java, stream, network-programming, protocol-buffers

客户端发送一个 1481 字节的数组。服务器可以毫无问题地读取所有 1481 字节的消息，但是通过从接收到的二进制数组中解析给定的消息，我得到了这个**异常**：

`com.google.protobuf.InvalidProtocolBufferException: Protocol message contained an invalid tag (zero).`

二进制数据是一样的。我检查了我是否使用了正确版本的 proto 文件。我有点不知所措。任何帮助表示赞赏。

**代码**

`byte [] data= IOUtils.toByteArray(br1, "ASCII"); System.out.println("SIZE:" + data.length);
AddressBook adb1 = AddressBook.parseFrom(data); System.out.println("Server: Addressbook:" + adb1.getPersonCount()); System.out.println("Server: Addressbook:" + adb1.getPerson(0).getName());`

**问题：**

我需要找到一种方法来正确解析从读取的 1481 字节数组中接收到的地址簿消息。

谢谢。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-31T20:00:11.927

这就是问题：

```
br1 = new InputStreamReader(s.getInputStream()); 
```

这是试图将不透明的二进制数据视为*text*。它不是文本，而是二进制数据。因此，当您将其`Reader`转换为字节数组时，您会丢失大量原始数据 - 难怪它是无效的协议缓冲区。

只需使用：

```
AddressBook adb1 = AddressBook.parseFrom(s.getInputStream()); 
```

并避免有损文本转换。当然，这是假设您在 C# 方面没有遇到同样的问题。

如果你*必须*通过文本，你应该在两边都使用 base64 编码。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-11-06T19:14:07.363

现在它起作用了，我通过[序列化](https://stackoverflow.com/questions/13165690/serializing-and-sending-a-protocol-buffers-message/13190701#13190701)和[发送](https://stackoverflow.com/questions/13186848/streamcorruptedexception-invalid-stream-header-when-reading-objectinputstream)协议缓冲区消息犯了同样的错误

# jquery - Jquery datepicker - 输入字段中的不同日/周/月顺序？

> ID：13068770
> 
> 赞同：1
> 
> 时间：2012-10-25T12:38:05.833
> 
> 标签：jquery, html, input, datepicker

我的文档中有一个日期选择器，一旦您单击一天，它就会将日期输入到它所附加的输入字段中。我的问题是我想更改显示该日期的顺序。例如，此刻它读取

2012 年 11 月 21 日（月/日/年）

当我选择 2012 年 11 月 21 日时，我需要它来显示

2012/11/21 (年年/月/日)

有可能改变吗？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:40:48.900

是的，它是您设置日期选择器时的选项之一 在这里查看选项：

[http://jqueryui.com/datepicker/#date-formats](http://jqueryui.com/datepicker/#date-formats)

我相信您想要的选项如下：

```
dateFormat: "yy/mm/dd" 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:42:17.400

是的，这是可能的，你可以在这里找到它：http: [//jqueryui.com/datepicker/#date-formats](http://jqueryui.com/datepicker/#date-formats)

# java - GWT MVP：连接演示者、活动、展示和地点的点

> ID：13068772
> 
> 赞同：1
> 
> 时间：2012-10-25T12:38:09.587
> 
> 标签：java, gwt, mvp, gwt-activities, gwt-places

我正在尝试设计我的第一个超级简单的 GWT 应用程序，该应用程序利用了 GWT 的大多数主要 API 功能。我想我已经完成了大约 70 - 80% 的路，但是在翻阅了 GWT 文档、无数文章并在 SO 上发布了许多其他与 GWT 相关的问题之后，我仍然很难理解最后 20 - 30% 需要完全放置这个应用程序。

我已经调用了这个第一个测试应用程序`ClickItToWinIt`，我希望它看起来像这样：

![在此处输入图像描述](../Images/5fb802094bf5738b34db5f6209906889.png)

当用户单击“Win”按钮时，`win-pic.png`左侧的图像框中会弹出一张图片（“”）。当用户点击“Lose”按钮时，`lose-pic.png`同框会弹出一张图片（“”）。用户可以在按钮之间来回点击，以显示不同的图片。这将是一个单页应用程序，在我的机器上本地托管，并且只需要包含 1 个主页、1 个模块/入口点等。

**请注意**，对于这样一个简单的应用程序，下面提出的打包/类结构肯定是矫枉过正的`ClickItToWinIt`。然而，不久之后，我想用 GWT 继续做更大更好的事情，所以在我开始使用更复杂的 UI 处理更大的应用程序之前，了解正确的 GWT 编码对我来说很重要。

此外，以下提议的结构基于 Google 似乎孜孜不倦地鼓励的 3 个 GWT 原则：

*   表现; 客户端速度
*   安全
*   关注点分离（MVP 等）以便于测试

最后一项：通常，在我的 PHP webdev 日子里，我在一些站点中使用“主题/皮肤”的概念，方法是使用不同的 CSS 文件部署站点，该文件只是将不同的样式规则应用于相同的 DOM 元素。因此，我可能有一个“ `normal-styles.css`”文件使网站看起来“正常”，但也有一个“ `facebook-styles.css`”文件为网站提供 Facebook 的外观（颜色、字体等）等。我会喜欢在这里完成同样的事情，并提出一个`net.bfodder.c2w.client.views.themes`包含子类的包`AbstractTheme`。这些子类将在构建时以某种方式注入/烘焙到视图/演示器中，并为我提供一种使用不同主题或皮肤部署应用程序的方法。*`ClientBundle``CssResource`是正确的）GWT*似乎*在 GWT POJO 中具有对象化 CSS 样式。我的子类会以某种方式与我的所有s`AbstractTheme`绑定`CssResource`并定义样式。`Widget`*

 *所以这是建议的`src/main/java`结构`ClickItToWinIt`（我正在使用 Google-Eclipse 插件在 Eclipse 3.7 Indigo 中开发）：

```
ClickItToWinIt/
    src/main/java/
        net.bfodder.c2w
            net.bfodder.c2w.client
                MainModule (implements EntryPoint)
                AppController
                ClientFactory
                net.bfodder.c2w.client.views
                    net.bfodder.c2w.client.views.ui
                        WinButton (extends Composite implements ClickHandler; hasA TextButton)
                        LoseButton (extends Composite implements ClickHandler; hasA TextButton)
                        ImageViewer (extends Composite; hasAn Image)
                    net.bfodder.c2w.client.views.containers
                        MainContainer
                        ButtonContainer
                        ImageContainer
                    net.bfodder.c2w.client.views.displays
                        WinActivity (extends AbstractActivity implements AcceptOneWidget)
                        LoseActivity (extends AbstractActivity implements AcceptOneWidget)
                    net.bfodder.c2w.client.views.themes
                        AbstractTheme
                        NormalTheme
                        FacebookTheme --> I really dont't care about FB, just using as an example of a well-known theme/skin
                net.bfodder.c2w.client.presenters
                    IPresenter
                    ButtonPresenter (extends AbstractActivity implements IPresenter)
                    ImagePresenter (extends AbstractActivity implements IPresenter)
                net.bfodder.c2w.client.history
                    InitialPlace (corresponds to http://localhost/clickittowinit)
                    WinPlace (corresponds to http://localhost/clickittowinit/#winning)
                    LosePlace (corresponds to http://localhost/clickittowinit/#losing)
                net.bfodder.c2w.client.events
                    EventBus impl and GwtEvent impls
            net.bfodder.c2w.server
                Not worried about server-side for now; I think I "get" that much! 
```

这`AppController`适用于不属于任何特定`IPresenter`子类的任何奇怪的应用程序级业务逻辑。这`MainModule`是一切开始的地方（DI，开始初步`Activity`等）。按钮放在里面`ButtonContainer`，按钮放在`ImageViewer`里面，`ImageContainer`两个内部容器都放在里面`MainContainer`（我*假设*是在里面创建的`MainModule`）。至于这些 UI 组件的布局和样式，就像我说的，这取决于注入/配置`AbstractTheme`在其规则集中定义的任何内容。

我使用[这里](https://developers.google.com/web-toolkit/doc/latest/DevGuideMvpActivitiesAndPlaces#ClientFactory)`ClientFactory`推荐的方便访问应用程序的 GWT 管道的主要部分。

至于 MVP “东西”，这就是我的想法：

```
public class WinActivity extends AbstractActivity {
    private final ClientFactory clientFactory;
    private final WinPlace place;

    public WinActivity(ClientFactory clientFactory, WinPlace place) {
        this.clientFactory = clientFactory;
        this.place = place;
    }

    @Override
    public void start(AcceptsOneWidget panel, EventBus eventBus) {
        ImagePresenter presenter = clientFactory.getImagePresenter();

        // Inject the presenter with any stateful data here
        // presenter.setImage(getWinImageUri());

        presenter.go(panel);
    }
} 
```

### 问题！

就像我在上面所说的，我*相信*我快到了，我只是很难弥合某些事情上的差距。所以我问：

1.  如何连接我的`AbstractTheme`子类以使用`CssResource`，`ClientBundle`以便我的应用程序被注入/配置正确的主题，并且客户端浏览器下载正确的 CSS 文件（`normal-style.css`或`facebook-style.css`）？
2.  有人可以正确解释`IPresenter`（来自经典 MVP）`AbstractActivity`、“显示区域”（`AcceptsOneWidget`）和`Place`s 之间的关系吗？这里是否存在 1 对 1 对 1 对 1 的关系，或者 GWT 的意图是让每个`AbstractActivity`或其他一组比率具有多个显示区域？
3.  如何连接`WinPlace`GWT 的 History API？因此，如果用户单击`WinButton`、`LoseButton`、`WinButton`，如何将其保存在浏览器历史记录中，以便他们可以点击前进/后退浏览器按钮并一遍又一遍地重新创建这种使用模式？
4.  当`WinButton`被点击时，它会在事件总线上放置一个点击事件。我在哪里以及如何将处理程序/侦听器连接到 EventBus，它将知道：(a) 更改 中的图像`ImageViewer`，以及 (b) 将此状态更改存储在 History API 中？
5.  我`AppController`从[这篇文章](http://howtogwt.blogspot.com/2010/02/event-handling-and-event-propagation.html)中得到了这个想法，不幸的是，它从未提供任何代码片段来说明它的`AppController`实际外观。任何人（熟悉`AppController`GWT 模式的人）都可以对它的外观有所了解吗？也许它是一个`IPresenter`没有特定`Activity`或视图组件的子类？
6.  总的来说，我**知道**这类“ *amidoinitrite？* ”式的问题在 SO 上是不鼓励的，但我必须问任何在战斗中穿的 GWT 退伍军人：我在这里是不是离基地太远了，或者我或多或少遵循 GWT 最佳实践？有什么建议么？

我不想在这里问这样一个“超级问题”，但我宁愿这样做，也不愿用 6 个中等问题把 SO 弄得一团糟，然后一遍又一遍地重复同样的问题设置。另外，通过一个好的代码示例，可能可以一口气回答所有 6 个问题，所以我在这里抓住了机会。

提前致谢。*

# objective-c - 顶部检测触摸的透明 UIView

> ID：13068773
> 
> 赞同：3
> 
> 时间：2012-10-25T12:38:11.233
> 
> 标签：objective-c, ios, touch, uigesturerecognizer, transparent

我有一个使用 UISplitViewController 构建的 iPad 项目：

*   根视图控制器
*   细节视图控制器

他们都在自己的类中使用手势识别器检测触摸。

我想**在所有类的顶部创建一个透明的 UIView**以仅检测对角滑动（从左下角到右上角）。

因此，当检测到滑动时，我将启动一个函数，**否则**不会附加任何内容，并且应该在低级视图上传递触摸。

我尝试了这两种解决方案：

*   在这个顶部透明视图上添加一个 GestureRecognizer 但这将隐藏对较低层次视图的所有触摸。（启用 userInteraction：当然是）；

另一种解决方案是使 init 像这样

```
-(id)initWithFrame:(CGRect)frame
{
   self = [super initWithFrame:frame];
  if (self) {
    // Initialization code
    [self setBackgroundColor:[UIColor colorWithWhite:1 alpha:0.01]];
    [self setUserInteractionEnabled:NO];
 }

 return self; 
```

}

并尝试检测滑动

```
 - (void)touchesBegan:(NSSet *)touches withEvent:(UIEvent *)event 
```

但是此时所有的触摸都没有被检测到。

任何人有一个很好的解决方案？

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:50:16.403

我不会像你提到的那样创建一个透明的 UIView。我将在视图中添加一个`UISwipeGestureRecognizer`，`UISplitViewController`这已经是包含所有子视图的视图。您可以访问`app`委托中的视图：

```
 UISplitViewController *splitViewController = (UISplitViewController *)self.window.rootViewController;

 // attach the swipe gesture to the view that embeds the rootView and the detailView
 UISwipeGestureRecognizer* swipeGesture = [[UISwipeGestureRecognizer alloc] initWithTarget:splitViewController.view action:@selector(swipeUpdated:)]; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:48:28.743

你不能在`UISplitViewController`视图中添加一个手势识别器吗？

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T13:27:58.130

You should look into `Container Controllers`. You can make your own `SplitViewController` and make a third view on top of the controller that detects the swipe. Custom container controllers are pretty straight forward and gives you a lot of flexibility.

# android - SQlite 数据库以编程方式在 Android 中转换为 Excel 文件格式

> ID：13068774
> 
> 赞同：6
> 
> 时间：2012-10-25T12:38:12.223
> 
> 标签：android, sqlite, file-conversion

我正在开发以 SQlite 作为数据库的 android 应用程序。我想以编程方式将我的 android 应用程序数据库导出为 excel 文件格式，以便普通人可以轻松读取他们的数据库。如果可能的话，请给我提示或不帮助我转换任何其他文件格式，如文本文件或其他。感谢投票...

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T12:39:45.047

Excel 读取 CSV，因此这将是您最简单的选择。看看opencsv

[http://opencsv.sourceforge.net](http://opencsv.sourceforge.net)

它包含了你需要的几乎所有东西。该过程变得如此简单：

1.  读取您希望从 Sqlite 导出的数据。
2.  将结果写入 csv 文件（记住将其命名为 *something***.csv**，以便 excel 知道它是一个 csv 文件）

就是这样：）

**编辑**：根据您在下面的评论，我建议您看看这个线程

[如何在 Android 项目中使用外部 JAR？](https://stackoverflow.com/questions/1334802/how-can-i-use-external-jars-in-an-android-project)

**编辑 gradle 依赖项**

将**compile 'com.opencsv:opencsv:4.1'**添加到 app gradle。而已。无需添加罐子。

参考： http: *//opencsv.sourceforge.net/dependency-info.html*

# asp.net - 使用循环读取 SOAP 结果

> ID：13068777
> 
> 赞同：0
> 
> 时间：2012-10-25T12:38:19.507
> 
> 标签：asp.net, web-services, soap

我在 C# Web 应用程序中构建了一个 Web 服务。我将对象列表作为 Web 服务结果返回。我需要知道如何在循环中一一阅读该项目列表。

```
<?xml version="1.0" encoding="utf-8"?>  
<soap:Envelope xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">  
  <soap:Body>  
    <checkAvailabilityResponse xmlns="http://tempuri.org/">  
      <checkAvailabilityResult>  
        <Shedule>  
          <Sid>int</Sid>  
          <Fid>int</Fid>  
          <FromLocation>string</FromLocation>  
          <FromTime>dateTime</FromTime>  
          <ToLocation>string</ToLocation>  
          <ToTime>dateTime</ToTime>  
          <PriceSeatA>double</PriceSeatA>  
          <PriceSeatB>double</PriceSeatB>  
          <PriceSeatC>double</PriceSeatC>  
        </Shedule>  
        <Shedule>  
          <Sid>int</Sid>  
          <Fid>int</Fid>  
          <FromLocation>string</FromLocation>  
          <FromTime>dateTime</FromTime>  
          <ToLocation>string</ToLocation>  
          <ToTime>dateTime</ToTime>  
          <PriceSeatA>double</PriceSeatA>  
          <PriceSeatB>double</PriceSeatB>  
          <PriceSeatC>double</PriceSeatC>  
        </Shedule>  
      </checkAvailabilityResult>  
    </checkAvailabilityResponse>  
  </soap:Body>  
</soap:Envelope> 
```

这是我尝试的方式：

```
SriLankanWebService.Service1SoapClient air1 = new AgentPortal.SriLankanWebService.Service1SoapClient();  
                List<Shedule> air1Response = (List<Shedule>)air1.checkAvailability(drpFrom.SelectedValue.ToString(), drpTo.SelectedValue.ToString(), DateTime.Parse(txtDepartOn.Text)); 
```

当我尝试时，它说：

```
Error   1   Cannot implicitly convert type 'AgentPortal.SriLankanWebService.Shedule[]' to 'System.Collections.Generic.List<AgentPortal.Shedule>'    D:\DCBSD\AgentPortal\AgentPortal\Home.aspx.cs   32  46  AgentPortal 
```

我需要循环使用它。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:56:50.293

请从上述代码的最后一行更新您的代码：

```
List<Shedule> air1Response = (List<Shedule>)air1.checkAvailability(drpFrom.SelectedValue.ToString(), drpTo.SelectedValue.ToString(), DateTime.Parse(txtDepartOn.Text));
```

到

```
AgentPortal.SriLankanWebService.Shedule[] = air1.checkAvailability(drpFrom.SelectedValue.ToString(), drpTo.SelectedValue.ToString(), DateTime.Parse(txtDepartOn.Text));
```

这将解决问题。

# css - 如何使 twitter-bootstrap 导航栏没有颜色

> ID：13068778
> 
> 赞同：5
> 
> 时间：2012-10-25T12:38:25.260
> 
> 标签：css, twitter-bootstrap, less

我正在尝试在我的应用程序中重现类似 basecamp 导航栏的效果。

交易是导航栏将具有与正文背景颜色相同的颜色，并且没有边框或任何东西，这让人感觉“都是一样的”......

有人知道这样做的好方法吗？PS：我正在使用这些`.less`文件，所以我可以轻松地编辑变量。

提前致谢

* * *

编辑：我忘了说，但我也想要引导程序的固定顶部和响应性行为。我也已经在我的应用程序中使用了 tw bootstrap，所以，我真的很想使用它。

* * *

## 回答 #1

> 赞同：12
> 
> 时间：2012-10-25T12:45:05.077

咳咳，这很容易用纯 CSS 完成，你甚至不需要 Bootstrap，也不需要它的 CSS 类

HTML：

```
 <ul class="navigation">
      <li><a href="#">Home</a></li>
      <li><a href="#">Link</a></li>
      <li><a href="#">Link</a></li>
    </ul> 
```

CSS：

```
​.navigation li {
    display: inline;
    padding-left: 5px;
    padding-right: 5px;
} 
```

当然，您仍然需要设置链接样式以删除文本装饰等。

**编辑：**

```
.navbar-inner {
  background: none !important; 
  border: 0 !important;
  box-shadow: none !important;
  -webkit-box-shadow: none !important;
}

.navbar-inverse .nav .active > a {
  background: 0 !important; 
  color: #333 !important;
  box-shadow: none !important;
  -webkit-box-shadow: none !important;
}

.navbar-inverse .nav > li > a {
  color: #333 !important;
  text-shadow: none !important;
}

.navbar-inverse .nav > li > a:hover {
  color: #333 !important;
} 
```

演示：[http ://codepen.io/anon/pen/vJsfz](http://codepen.io/anon/pen/vJsfz)

我刚刚用 CSS 做了一些简单的“重置”行来删除所有颜色、边框和阴影（至少对于 Webkit 浏览器）。也许您必须对其进行更多修改。​</p>

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2014-02-09T09:19:41.113

```
/*  clear bootstrap header colors */
.navbar-default {
    background-color: white;
    border-color: white;
} 
```

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2014-12-19T05:25:05.277

也许我不明白一些东西，但刚刚处理了这个，似乎最简单的事情就是在 alpha 通道中用完全透明的颜色覆盖默认的导航栏颜色......

```
.navbar-default {
    background: rgba(255, 255, 255, 0);
} 
```

如果使用 rgba，前三个数字代表红色、绿色、蓝色，范围为 0-255，最后一个是 alpha 通道，0 表示完全透明，1 表示完全不透明。

如果您的背景恰好是白色，将其设置为白色也可以，但这样您的背景是什么并不重要。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2020-12-07T23:14:46.367

Bootstrap（v5 beta，但也适用于一些以前的版本）将用`!important`标签标记某些样式类。这将在应用 css 时覆盖标准特异性规则。如果您在 Chrome 中导航到您的页面并使用开发工具突出显示您想要更改的元素，您可以看到正在应用的样式。在 的情况下`navbar`，Bootstrap 使用`.bg-light`. 在开发工具中，您可以看到`.bg-light`样式如下：

```
.bg-light {
    background-color: #f8f9fa!important;
} 
```

为了覆盖该`!important`属性末尾的标签，您需要`!important`在本地 css 文件中包含您自己的标签。不要对现有类进行此更改，`.bg-light`因为它可能会破坏代码中的其他 Bootstrap 元素。相反，我处理此问题的方式是`id`在我的 HTML 中为该元素分配一个，然后设置一个自定义 css 属性以使用和`!important`标记覆盖它。例如：
HTML

```
<nav class="navbar navbar-expand-lg navbar-light bg-light" id="navbar"> 
```

CSS

```
#navbar {
    background-color: transparent!important;
} 
```

# sharepoint - 快速搜索具有子术语的特定托管元数据术语

> ID：13068779
> 
> 赞同：1
> 
> 时间：2012-10-25T12:38:26.123
> 
> 标签：sharepoint, search

我试图从 SharePoint 形成一个搜索特定托管元数据术语的查询，包括任何子术语。我发现这个链接[http://msdn.microsoft.com/en-us/library/ff625182](http://msdn.microsoft.com/en-us/library/ff625182)对我有一点帮助，在测试之后我能够通过在我的查询字符串中使用 owsTaxIdMetadataAllTagsInfo 来查询我的术语，GUID 为我正在寻找的术语。

但是，这仅在我使用前导 0 时才有效，即仅搜索没有子术语的特定术语。

如果我省略了前导 0，则使用我在查询字符串中提供的 GUID 搜索该术语的子术语，我没有得到任何结果？？？

例如

`http://myFASTsearch/Pages/advsearch-results.aspx?k=owstaxidmetadataalltagsinfo:01a2acafe-0306-490d-8aa4-80a7bc0b4a13` 这给了我结果

`http://myFASTsearch/Pages/advsearch-results.aspx?k=owstaxidmetadataalltagsinfo:1a2acafe-0306-490d-8aa4-80a7bc0b4a13` 这给了我没有结果。

我错过了什么

谢谢，

克雷格。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-30T08:52:46.003

查看您提供的页面，您应该使用 r 参数吗？

`http://contoso/searchcenter/pages/results.aspx?k=turtle&r=owstaxIdMetadataAllTagsInfo=#52263385-1fc3-4323-8d6b-50c8f6c3c45d:"reference materials"`

由于那篇文章可能有错误，也试试这个（注意“围绕r参数）：

`http://contoso/searchcenter/pages/results.aspx?k=turtle&r="owstaxIdMetadataAllTagsInfo"=#52263385-1fc3-4323-8d6b-50c8f6c3c45d:"reference materials"`

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2013-05-05T01:41:40.467

owstaxIdMetadataAllTagsInfo 不支持与子项一起使用。您必须使用 owstaxIdYourMMColumn:"column value"

其中 YourMMColumn 是您在列表或库中使用的列名。关于它的博客在这里[http://www.spsdemo.com/blog/Lists/Posts/Post.aspx?ID=378](http://www.spsdemo.com/blog/Lists/Posts/Post.aspx?ID=378)

# javascript - JavaScript 开始和停止计时

> ID：13068780
> 
> 赞同：0
> 
> 时间：2012-10-25T12:38:31.643
> 
> 标签：javascript

我对 JavaScript 计时有一些问题..基本上我希望它在失去焦点时开始计时，当它回到焦点时，计时将停止并显示。

```
var start,end,isTimerOn=0;
window.addEventListener('blur', function() { //when user get out of the screen
/*Start Time when user goes out of focus*/
start = new Date().getTime();
});
window.addEventListener('focus', function() { //when user focus on the screen
if (isTimerOn==1)
{
    end = new Date().getTime();
    var time = end - start; //time will be in ms. eg: 1 sec will be 1000

    /*Convert to seconds*/
    var y=Math.round(time/1000);

    start=0; //reset
    isTimerOn=0; //reset
    alert('Execution time: ' + y  + 'secs'); //this will print the time how long the user has been away

}
}); 
```

现在 isTimerOn 变量是一个标志，将在以下情况下设置：

```
function ProcessThisSearch(form)
{
    //alert("OI!"); //test is js is working.
    var test=form.search.value;
    //alert(test); //test if value can be retrieved
    if (test)
    {
        isTimerOn=1;
        window.open('http://www.'+test+'.com');
    }

} 
```

此函数 ProcessThisSearch(form) 将在以下 HTML 表单中调用：

```
<form align=right action="mainheader.jsp" method="POST"><input type="text" name="search"><input type="submit" value="Open Website" onClick="ProcessThisSearch(this.form)"></form> 
```

我相信问题出在 isTimerOn 变量上。因为我已经测试了两个事件监听器并且它正在工作。只有当我添加 isTimerOn 变量时，它似乎不起作用。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T13:05:36.713

您的 HTML 代码将设置 isTimerOn=true，仅在表单提交时。可能这不是你想要的。

提交表单还会将当前页面更改为 mainheader.jsp 并通过 ProcessThisSearch 函数加载另一个页面。

可能的修复方法是：

`<button onClick="ProcessThisSearch(this.form)">Open Website</button>`

或者

`<form align=right action="mainheader.jsp" method="POST"><input type="text" name="search"><input type="submit" value="Open Website" onClick="ProcessThisSearch(this.form);return false;"></form>`

# jquery - DropKick 选择图像

> ID：13068781
> 
> 赞同：6
> 
> 时间：2012-10-25T12:38:34.107
> 
> 标签：jquery, html-select, jquery-dropkick

我想创建一个包含图像而不是文本的下拉列表，并且我希望选择标签是完全可定制的。

可以使用 DropKick 在下拉列表中使用图像而不是文本吗？

我尝试修改以使用图像，但我希望能够在其他 dropkick 元素的同一页面上将其用于文本。

在代码中：

我改变

```
optionTemplate = '<li class="{{ current }}"><a data-dk-dropdown-value="{{ value }}">{{ text }}</a></li>', 
```

至

```
optionTemplate = '<li class="{{ current }}"><img src="images//{{ value }}.png" /></li>', 
```

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2013-05-25T16:16:44.717

这是使用 HTML5 的更好解决方案`data attributes`。必须将文件中编写的代码修改`jquery.dropkick-1.0.0.js`如下（行号仅适用于`v1.0.0`）：

```
// Line 39 -- Add "<img>"
// HTML template for the dropdowns
dropdownTemplate = [
  '<div class="dk_container" id="dk_container_{{ id }}" tabindex="{{ tabindex }}">',
    '<a class="dk_toggle">',
      '<span class="dk_label">{{ label }}<img src="{{ icon }}"/></span>', /* << */
    '</a>',
    '<div class="dk_options">',
      '<ul class="dk_options_inner">',
      '</ul>',
    '</div>',
  '</div>'
].join(''),

// Line 51 -- Add "<img>" (string broken down here for readability)
// HTML template for dropdown options
optionTemplate = '<li class="{{ current }}">' +
                 '<a data-dk-dropdown-value="{{ value }}">{{ text }}' +
                 '<img src="{{ icon }}"/></a></li>'; /* << */ 
```

此外，将以下行添加到插件的选项中

```
 // Line 98 -- add "data.icon"
  // Don't do anything if we've already setup dropkick on this element
  if (data.id) {
    return $select;
  } else {
    data.settings  = settings;
    data.tabindex  = tabindex;
    data.id        = id;
    data.$original = $original;
    data.$select   = $select;
    data.value     = _notBlank($select.val()) || _notBlank($original.attr('value'));
    data.label     = $original.text();
    data.options   = $options;

    /* Add this attribute */
    data.icon      = $original.data('icon'); /* << */
  } 
```

在`_build`函数中的以下行之前，

```
// Line 318
if (view.options && view.options.length) { 
```

添加以下行：

```
// Line 317\. To be placed after other "template = template.replace" statements
template = template.replace('{{ icon }}', view.icon); 
```

最后，在循环内部之后

```
// Line 321
var // ...
  oTemplate = optionTemplate
; 
```

添加以下行

```
// To be placed after other "oTemplate = oTemplate.replace" statements
oTemplate = oTemplate.replace('{{ icon }}', view.icon); 
```

这可能不是最佳编码实践（monkeypatching），因为`icon`未设置数据属性时代码可能会中断。

我建议您添加一些代码来检查`icon`数据属性值的值，并创建两个模板：一个用于选项，另一个用于默认下拉列表。然后可以选择要使用的模板。函数也是如此`_build`，与monkeypatching 一样，它取决于`view.icon`值（是否已定义）。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T14:15:37.543

我找到了一个临时解决方案，我不知道它是否是最好的，但它现在有效：

DropKick 将选项标签替换为 li 标签，其中包含一个带有属性“data-dk-dropdown-value”的标签。所以，使用javascript我用“img”元素替换“a”值，img的src属性是选项的值（如果从“data-dk-dropdown-value”属性中获取）。

这是一个例子：

```
channel = document.getElementById('dk_container_channels-menu').getElementsByTagName('div')[0].getElementsByTagName('ul')[0].getElementsByTagName('li').getElementsByTagName('a')[0].innerHTML = "<img src=\"images/channels/" + channel + ".png\">"; 
```

如果您找到更好或更快的解决方案，请告诉我。

（注意：DropKick 必须在替换元素**之前初始化）**

# openstreetmap - 在 Linux 上渲染的 Mapnik 运行时无法加载插件库

> ID：13068782
> 
> 赞同：0
> 
> 时间：2012-10-25T12:38:37.323
> 
> 标签：openstreetmap, mapnik

我正在尝试运行 mod_tiles 渲染但我遇到插件
问题：加载插件库时出现问题：/usr/local/lib/mapnik/input/sqlite.input（dlopen 失败 - 插件可能具有不满意的依赖关系或不兼容的 ABI）
加载问题插件库：/usr/local/lib/mapnik/input/raster.input（dlopen 失败 - 插件可能具有不满足的依赖关系或不兼容的 ABI）
加载插件库时出现问题：/usr/local/lib/mapnik/input/shape.input （dlopen 失败 - 插件可能具有不满意的依赖关系或不兼容的 ABI）

我使用 Ubuntu 10.04 LTS 64 位机器，mapnik-2.0.0。

提前致谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-28T12:42:32.017

好的，问题出在mapnik版本上。
再次安装 Mapnik 与 las mod_tiles 版本，它可以工作。
谢谢！

# java - 在java中创建临时文件夹

> ID：13068789
> 
> 赞同：6
> 
> 时间：2012-10-25T12:38:50.567
> 
> 标签：java, macos

我需要创建一个临时文件夹，我可以在其中放置一些临时文件进行处理。我不确定在执行我的应用程序 jar 的文件夹中是否具有读/写访问权限。

1.  最好在系统的临时目录中创建临时文件夹吗？
2.  当我使用`File tempFolder = File.createTempFile("fooo","");`Where is the folder created 时？当我 cd 进入我的 mac 中的临时文件夹时，我无法看到名为 fooo 的文件夹。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T12:45:57.893

您几乎完成了创建临时文件夹，请参见：

```
import java.io.File;
import java.io.IOException;

public class TempFolder {
    public static void main(String[] args) throws IOException {
        File file = File.createTempFile("my_prefix", "");
        System.out.println(file.getAbsolutePath() + " isFile: " + file.isFile() + " isDir:" + file.isDirectory());
        file.delete();
        file.mkdir();
        System.out.println(file.getAbsolutePath() + " isFile: " + file.isFile() + " isDir:" + file.isDirectory());
    }
} 
```

首先 createTempFile 将为您创建一个真实的文件，只需将其删除并使用相同的名称创建一个目录。

我也用 osx。我的结果是：

```
/var/folders/aQ/aQLNlFLOF28xewK2A7i0X++++TM/-Tmp-/my_prefix8720723534029791962 isFile: true isDir:false
/var/folders/aQ/aQLNlFLOF28xewK2A7i0X++++TM/-Tmp-/my_prefix8720723534029791962 isFile: false isDir:true 
```

* * *

## 回答 #2

> 赞同：3
> 
> 时间：2012-10-25T12:41:00.327

你应该使用[`File.createTempFile()`](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#createTempFile%28java.lang.String,%20java.lang.String%29).

创建它的位置取决于您的环境。如果您有兴趣，请尝试打印出此类文件的完整路径。

在我的 Mac (10.8.2) 上，系统 Java 刚刚在“/var/folders/qj/v2cqt0t91h1b4rzj1s0pc_780000gp/T/”中创建了一个文件。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T12:42:27.413

当您调用`File tempFolder = File.createTempFile("fooo","")`它时，它将返回一个 File 对象。然后你可以打电话

```
tempFolder.getAbsolutePath(); 
```

链接[在这里](http://docs.oracle.com/javase/7/docs/api/java/io/File.html#getAbsolutePath%28%29)

这将为您提供位置。我猜我会说它在 /tmp/ 中，你可以从 Finder 中进入

*   选择转到文件夹
*   从 Go 菜单类型 /tmp/

这会将您带到隐藏的文件夹。

我知道在 Windows 中，您可以在 Windows 资源管理器地址栏中键入 %temp% 以将您带到临时目录。我不确定 OSX 上是否有类似的东西

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T12:44:45.827

尝试打印出 tempFolder.getAbsolutePath()。它应该为您提供创建此文件夹的路径。

# java - 使用 EclipseLink MOXy 解组时忽略 DTD

> ID：13068791
> 
> 赞同：6
> 
> 时间：2012-10-25T12:38:52.480
> 
> 标签：java, jaxb, eclipselink, moxy, spring-oxm

当尝试使用 EclipseLink MOXy 将一些 XML 解组为 POJO 时，我得到了一个`FileNotFoundException`它正在寻找文档的 DTD 作为相对路径的位置。

```
Exception in thread "main" org.springframework.oxm.UnmarshallingFailureException: JAXB unmarshalling exception; nested exception is javax.xml.bind.UnmarshalException
 - with linked exception:
[java.io.FileNotFoundException: C:\Users\deejay\Documents\workspace-sts-3.0.0.RELEASE\moxy-test\ieee_idams_exchange.dtd (The system cannot find the file specified)]
    at org.springframework.oxm.jaxb.Jaxb2Marshaller.convertJaxbException(Jaxb2Marshaller.java:761)
    at org.springframework.oxm.jaxb.Jaxb2Marshaller.unmarshal(Jaxb2Marshaller.java:682)
    at org.springframework.oxm.jaxb.Jaxb2Marshaller.unmarshal(Jaxb2Marshaller.java:665)
    at com.mendeley.services.utility.EclipseLinkMarshaller.load(EclipseLinkMarshaller.java:29)
    at com.mendeley.MoxyTest.main(MoxyTest.java:31) 
```

我按照[这个例子](http://wiki.eclipse.org/EclipseLink/Examples/MOXy/Spring/JAXBMetadata)提供了“外部化元数据” ，所以我不知道为什么它甚至需要一个 DTD。如果我能让它忽略 DTD，或者不尝试解决它，那就太好了。

* * *

## 回答 #1

> 赞同：9
> 
> 时间：2012-10-25T13:27:46.667

You could unmarshal from an `XMLStreamReader` that has DTD support disabled:

```
import javax.xml.bind.*;
import javax.xml.stream.*;
import javax.xml.transform.stream.StreamSource;

public class Demo {

    public static void main(String[] args) throws Exception {
        JAXBContext jc = JAXBContext.newInstance(Customer.class);

        XMLInputFactory xif = XMLInputFactory.newFactory();
        xif.setProperty(XMLInputFactory.SUPPORT_DTD, false);
        XMLStreamReader xsr = xif.createXMLStreamReader(new StreamSource("input.xml"));

        Unmarshaller unmarshaller = jc.createUnmarshaller();
        Customer customer = (Customer) unmarshaller.unmarshal(xsr);
    }

} 
```

**Extra**

If you want to write the DTD declaration you could do the following:

```
 XMLOutputFactory xof = XMLOutputFactory.newFactory();
    XMLStreamWriter xsw = xof.createXMLStreamWriter(System.out);
    xsw.writeDTD("<!DOCTYPE HTML PUBLIC \"-//W3C//DTD HTML 4.01 Transitional//EN\" \"http://www.w3.org/TR/html4/loose.dtd\">");

    Marshaller marshaller = jc.createMarshaller();
    marshaller.setProperty(Marshaller.JAXB_FRAGMENT, true);
    marshaller.marshal(html, xsw);
    xsw.close(); 
```

# sql - 从另一个选择查询中的 2 个表进行 2 个 SQL 选择查询

> ID：13068793
> 
> 赞同：0
> 
> 时间：2012-10-25T12:38:53.293
> 
> 标签：sql, select, merge

我有 2 个 SQL 表：`"episode"`并且`"topic"`，每个主题和剧集都有一个视频（一集包含多个主题，但对我的问题并不重要）。他们有自己的领域，但也有`"title", "date", "video_url"`共同点`"count"`（计数是观看视频的次数）。

我想根据计数字段仅使用一个查询进行前 5 位选择。

所以我需要合并查询：

```
select title, date, video_url, count from episode order by count desc 
```

和“来自主题”的相同查询。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:40:37.603

```
 select top 5 *
 from
 (
      select title, date, video_url, count from episode
      union all
      select title, date, video_url, count from topic
 ) as A
 order by count desc 
```

您可以添加类型名称以找出它是剧集还是主题。您也可以将`top`5 添加到子查询中，以便服务器知道他不需要获取所有记录

```
 select top 5 *
 from
 (
      select top 5 title, date, video_url, count, 'episode' as type_name from episode order by count desc
      union all
      select top 5 title, date, video_url, count, 'topic' as type_name from topic order by count desc
 ) as A
 order by count desc 
```

# asp.net - 面板中的面包屑尾迹文本换行问题，asp.net

> ID：13068801
> 
> 赞同：1
> 
> 时间：2012-10-25T12:39:34.570
> 
> 标签：asp.net, css, web-applications

在我的菜单中，我使用链接按钮和标签在面板中动态创建面包屑路径。不管我做什么，我都无法让它正确包装。

1.  面板：Wrap=True，Width=400px，ScrollBars=None
2.  LinkBut​​ton: style="white-space: nowrap"
3.  标签：text=">"，所以没有空格
4.  margin-left: 5px 用于面板和面板内

将 LinkBut​​ton 样式的空白设置为“nowrap”，面板不会自动换行文本。

```
Home > Chevy > Trucks > Silverado > Engineering Department > Fuel System 
```

将 LinkBut​​ton 样式的空白设置为“正常”，它会换行，但不是我需要的。

```
Home > Chevy > Trucks > Silverado >
 Engineering 
Department >
Fuel
System 
```

这就是我要找的：

```
Home > Chevy > Trucks > Silverado >
Engineering Department > Fuel System 
```

这是我在选择菜单项时创建链接的代码隐藏。

```
 Private Sub CreateLink(name As String, id As Integer)
    Dim link As LinkButton
    Dim lbl As Label

    link = New LinkButton
    link.Text = name
    link.SkinID = id
    link.Style.Add("white-space", "nowrap")
    AddHandler link.Click, AddressOf Links_Click
    BreadCrumbPanel.Controls.Add(link)

    lbl = New Label
    lbl.Text = ">"
    BreadCrumbPanel.Controls.Add(lbl)
 End Sub 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:30:53.610

好吧，我最终将面板宽度设置为 100% 而不是固定的，现在结果如下所示。这两种结果都符合我的需要。

结果 A

```
Home > Chevy > Trucks > Silverado > 
Engineering Department > Fuel System 
```

结果 B

```
Home > Chevy > Cars > Volt > Sales 
Department > Information 
```

# c# - 如何将“ddd”日期时间格式更改为数字视图

> ID：13068803
> 
> 赞同：5
> 
> 时间：2012-10-25T12:39:39.973
> 
> 标签：c#

当我单击一个按钮时，我想让该代码向我显示我的电脑时钟上的当前日期时间......我用列出的代码做到了。但这是我的问题，我怎样才能让“ddd”（一周中的某一天）以数字显示，而不是用文字显示，我的意思是：00-sunday 01-monday 等等......

这是我的按钮代码：

```
private void SetClock_Click(object sender, EventArgs e)
        {
            SetClock.Click += new EventHandler(SetClock_Click);
            {
                DateTime time = DateTime.Now;
                string format = "yy-MM-dd-ddd-hh-mm-ss"; 
                txtSend.Text = time.ToString(format);

            }
        } 
```

我必须添加什么才能做到这一点。谢谢

* * *

## 回答 #1

> 赞同：4
> 
> 时间：2012-10-25T12:46:05.920

```
txtSend.Text = string.Format("{0:yy-MM-dd}-{1:00}-{0:hh-mm-ss}", time, (int)time.DayOfWeek); 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T12:44:50.063

不需要格式，您可以`DayOfWeek`转换为`int`：

```
var dayAsInt = (int)DateTime.Now.DayOfWeek; 
```

查看[自定义日期和时间格式字符串](http://msdn.microsoft.com/en-us/library/8kb3ddd4.aspx)页面，似乎没有格式字符串：-(

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T12:45:13.573

以下应该做到这一点：

```
txtSend.Text =
    time.ToString("yy-MM-dd-") +
    ((int)time.DayOfWeek).ToString("00") +
    time.ToString("-hh-mm-ss"); 
```

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T12:45:23.653

您可以使用它来获取星期几的数字

```
int dayofweek = (int)DateTime.Now.DayOfWeek; 
```

# javascript - 如何从地址栏执行 JavaScript 代码？

> ID：13068806
> 
> 赞同：-1
> 
> 时间：2012-10-25T12:39:43.750
> 
> 标签：javascript, drop-down-menu

我试图制作一个 JavaScript 代码并从地址字段栏中运行它，但没有任何反应。你能帮帮我吗？这是我的代码：

```
<script language="javascript">
var number = document.getElementById('MT_CASE_EXTRA_MT_CAT_SEQ_NUM');
selectItemByValue(number, 24);
</script> 
```

我有一个带有选项的下拉列表的网页，我想从地址栏运行脚本来设置这些下拉列表中的值，然后将此脚本添加到书签栏，让我的生活更轻松。

我如何将该代码转换为 JavaScript 书签？

非常感谢。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:10:43.243

我假设 selectItemByValue 已经定义，可能在页面上已经加载的 js 脚本中的某个地方。

然后对于小书签，使用
`javascript:var number = document.getElementById('MT_CASE_EXTRA_MT_CAT_SEQ_NUM');selectItemByValue(number, 24);`
（忽略换行。它是单行。）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:17:05.483

如果你想从位置/网址栏运行它：

好吧，现在许多浏览器都禁用了它，因为一些用户在一些社交网站帖子上掉进陷阱帖子，比如“复制粘贴此代码到地址栏和一些魔术会发生”。

要解决这个问题，（至少在 Firefox 上）您可以使用“工具->Web 开发人员->Web 控制台（ctrl+shift+k）”来运行该脚本。
此外，没有 about:config 条目用于覆盖。
同样，其他浏览器也可能有类似的解决方案。

# wpf - 如何在模块 wpf 中使用控件

> ID：13068807
> 
> 赞同：0
> 
> 时间：2012-10-25T12:39:53.917
> 
> 标签：wpf, vb.net, module

我想添加组合框项目并使用模块中的任何其他控件，但是当我尝试在那里使用我的组合框时，无法识别。在Window Form Application中没有问题，但是在WPF应用程序中我现在不知道该怎么做？

在 WinForm App 我在 Module.vb 中做类似的事情

```
 Sub FillComboBox()

        Dim SQLStr As String = "use testowa Select COLUMN_NAME FROM INFORMATION_SCHEMA.COLUMNS WHERE (TABLE_NAME = 'Import')"
        Dim Reader As SqlDataReader
        Dim cmd As New SqlCommand(SQLStr, myConnection)

        Form2.ComboBox7.Items.Add("None")
        Form2.ComboBox3.Items.Add("None")

        Reader = cmd.ExecuteReader()

        While Reader.Read()
            Form2.ComboBox1.Items.Add(Reader.Item("COLUMN_NAME"))
            Form2.ComboBox2.Items.Add(Reader.Item("COLUMN_NAME"))
            Form2.ComboBox4.Items.Add(Reader.Item("COLUMN_NAME"))
            Form2.ComboBox5.Items.Add(Reader.Item("COLUMN_NAME"))
            Form2.ComboBox6.Items.Add(Reader.Item("COLUMN_NAME"))
            Form2.ComboBox7.Items.Add(Reader.Item("COLUMN_NAME"))
            Form2.ComboBox3.Items.Add(Reader.Item("COLUMN_NAME"))
        End While

        Reader.Close()

    End Sub 
```

现在我需要在 WPF 应用程序中做同样的事情。

请帮忙，这些是我在 WPF 中的第一步 :)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:21:43.833

*   从您的 SQL 中填充一个集合（例如字符串列表）
*   将此集合设置为您的组合框的 ItemsSource

就这样

ps：请阅读一些关于 wpf 中绑定的内容。不要尝试使用 wpf 编写您的 winform 样式。

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-25T13:31:47.487

下面是一个简单的示例来向您展示该模式：

XAML：

```
<Window x:Class="EmptyWPF.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        Title="MainWindow" MinWidth="200">
    <Grid>
        <ComboBox ItemsSource="{Binding myList}" />  
    </Grid>
</Window> 
```

主窗口.cs：

```
public partial class MainWindow : Window
{
    private List<string> _mylist;
    public List<string> myList
    {
        get
        {
            return _mylist;
        }
        set
        {
            _mylist = value;
        }
    }

    public MainWindow()
    {
        InitializeComponent();
        _mylist = new List<string>() { "Item1", "Item2", "Item3" };
        DataContext = this;
    }
} 
```

如果您需要在应用程序运行时更改集合，并且希望组合框对更改做出反应，请使用 ObservableCollection 而不是 List。

如果您从未接触过 WPF，一个很好的起点是 www.wpftutorial.net

# c++ - Eclipse 调试：“最终序列中的错误 - 无法执行 MI 命令”

> ID：13068810
> 
> 赞同：5
> 
> 时间：2012-10-25T12:39:59.487
> 
> 标签：c++, eclipse, gdb

我在win7上运行Eclipse。我想制作可以在 Windows 或 linux 上运行的控制台应用程序。我按照[此处](http://www.tanzilli.com/foxg20_eclipse_windows_c)关于如何设置编译器的指南进行操作

我正在尝试编译并运行一个简单的 hello world 程序。它编译得很好，但是当我尝试调试时，我收到以下错误：

```
'launching test' has encountered a problem.

Error in final launch sequence. 
```

单击详细信息会显示以下信息。

```
Error in final launch sequence
Failed to execute MI command:
-exec-run
Error message from debugger back end:
Don't know how to run.  Try "help target".
Don't know how to run.  Try "help target". 
```

我的 gdb 调试器路径是`C:\codesourcery\bin\arm-none-eabi-gdb.exe`

我不完全确定如何进行。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2014-01-24T06:06:41.793

如果您正在创建 Windows 控制台，那么我认为您需要在 c:\minGW 或任何您拥有 Windows 7 gcc 工具链的地方找到 gdb。

要更改 Eclipse Kepler 上的调试器，请转到：Run->Debug Configurations。选择调试器选项卡并在“GDB 调试器：”字段中，输入 Windows gdb.exe 文件的路径（如果您使用的是 minGW，则为 c:\MinGW\bin\gdb.exe）

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-11-06T17:28:04.797

我意识到这是一个老问题，但希望它会对某人有所帮助。在我的例子中，只有一个内存地址（没有与之关联的文件名）设置了一个断点。不知道我是如何陷入这种情况的……一旦我删除了断点，我就可以使用调试器启动我的程序。注意，我使用的是 Eclipse Luna CDT (SR2)

# java - 日期的正则表达式省略了月份部分的一个字符

> ID：13068823
> 
> 赞同：4
> 
> 时间：2012-10-25T12:40:35.383
> 
> 标签：java, regex, date, regex-group

这很奇怪，因为它是非常简单的`dd/mm`格式正则表达式。结果应该是：`"Group 1: 14; Group 2: 12"`但它是`"Group 1: 14; Group 2: 1"`。

第二组只捕获了第一个字符，但省略了第二个字符（示例中为“2”）。

```
String sDay = "(?:0?[1-9]|[12][0-9]|3[01])";
String sMonth = "(?:0?[1-9]|1[0-2])";
String sDot = "[\\.]";
String sSlash = "[/]";
String sMinus = "[\\-]";
String sSeparators = (sDot + "|" + sSlash + "|" + sMinus);

Pattern reDayMonth =
    Pattern.compile("(" + sDay + ")" + "(?:" + sSeparators + ")" + "(" + sMonth+ ")");

String s = "14/12";
Matcher reMatcher = reDayMonth.matcher(s);
boolean found = reMatcher.find();

System.out.println("Group 1: " + reMatcher.group(1) + "; Group 2: " + reMatcher.group(2)); 
```

我不明白为什么。请你帮助我好吗？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:48:51.130

在您的月份正则表达式中，您首先允许单个数字匹配，因此它会匹配（然后停止）。尝试移动所需的两位数月份以先检查，*然后再*检查一位数：

```
(?:0?[1-9]|1[0-2]) 
```

应该变成：

```
(?:1[0-2]|0?[1-9]) 
```

**更新** （推理）
模式中以 开头的相同模式有效但在模式中无效的`0?`原因是因为您指定了必须遵循该模式的字符 - 因此，处理 的整个模式。但是，在该模式中，没有指定要遵循的字符；因此，它会在找到第一个匹配项时停止，该匹配项在原始模式中是单个数字。`day``month``day``day``month`

如果您要反转输入格式（即，而不是`dd/mm`您使用`mm/dd`）并简单地交换`sDay`并`sMonth`在编译的正则表达式中，您实际上会注意到`month`将正确匹配两个数字并且`day`会失败！

解决问题的一种方法是首先匹配两个字符的规则，*然后*匹配可选的单字符，就像我的回答所暗示的那样。另一种方法是假设/要求您的输入日期单独在一行上（即日期从行首开始，到行尾结束，没有其他文本）。如果这是真的，您可以使用正则表达式`^`和`$`字符分别匹配行的开头和结尾：

```
Pattern.compile("^(" + sDay + ")" + "(?:" + sSeparators + ")" + "(" + sMonth+ ")$"); 
```

这样做，它将完全评估每个模式以找到完全匹配，在这种情况下，您应该始终匹配正确的月/日。

**站点注释**（建议，但不是针对特定答案）
根据@MarkoTopolnik 的有用评论/建议，您不需要在每个组周围使用非捕获组（月+天），特别是因为您立即将它们包装在捕获组使非捕获组无用。因此，上述模式可以简单地变成：

```
1[0-2]|0?[1-9] 
```

# python - Python中控制台上已存在对象的重新加载方法

> ID：13068826
> 
> 赞同：0
> 
> 时间：2012-10-25T12:40:38.930
> 
> 标签：python, console, reload

在 Python 控制台（Eclipse、Pydev）中，我执行了一些数据加载。之后我更改了对象方法的一些源代码，并希望在数据对象中包含新功能。数据加载很慢，所以我不想重新启动整个脚本。

有没有一种神奇的方法可以用我在源代码中编辑的新实现来更新对象方法？

[如何在 Python 中重新加载类对象方法的代码？](https://stackoverflow.com/questions/4670586/how-to-reload-the-code-of-a-method-of-class-object-in-python)说我不能以标准方式做到这一点。

那么你能想出一些方法来模拟那个功能吗？也许重新加载类定义，然后通过检查它们`__dict__`或类似来重新创建所有数据对象？理想情况下，这将尽可能自动和舒适。我需要考虑什么？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:26:04.817

不幸的是，Python 不能直接替换现有的对象实例。但是， `IPython`将此功能实现为扩展。您可以将 IPython 用作 Python 控制台，或者只是为您的开发环境重新实现此功能。

请参阅[Autoreload of modules in IPython](https://stackoverflow.com/questions/1907993/autoreload-of-modules-in-ipython)和[ipython docs](http://ipython.org/ipython-doc/dev/config/extensions/autoreload.html)。

# c# - 识别 silverlight url 的内容类型

> ID：13068827
> 
> 赞同：0
> 
> 时间：2012-10-25T12:40:39.833
> 
> 标签：c#, silverlight

以下 url 输入到我的 c# 代码中：

```
“https://xxxx/sss/ddd/dd/ui/resity/I/Rme/StartPage.html?app.component=/SCT/an/root.uiccwoc&rootWindow=X&redirectUrl=/sp/public/byd/runtime”；
```

它会下载一个 silverlight 应用程序并运行它。我需要确定它何时开始下载 xap 文件。

任何人都可以建议代码示例。

# css - CSS浮动带边框

> ID：13068828
> 
> 赞同：0
> 
> 时间：2012-10-25T12:40:41.670
> 
> 标签：css, css-float

我有一个 div，我想要一个边框和背景颜色，但容器已经折叠，因为所有东西都是浮动的。

这可以在[http://jsfiddle.net/5DNFs/看到](http://jsfiddle.net/5DNFs/)

如何获得`<div class="due-total">`边框和背景颜色？

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:44:17.150

清除你的花车：[我的小提琴](http://jsfiddle.net/v413hav/5DNFs/6/)

注意：只是更改了边框颜色以便您可以看到，您可以将其更改为您想要的任何颜色

HTML

```
<div class="invoice-totals">   
    <div class="total">
        <div class="label">TOTAL</div>
        <div class="value">133.00</div>
    </div>

    <div class="paid-total">
        <div class="label">Payments</div>
        <div class="value">0.00</div>
         <div style="clear: both;"></div>
    </div>

    <div class="due-total">
        <div class="label">AMOUNT DUE</div>
        <div class="value">133.00</div>
         <div style="clear: both;"></div>
    </div>
</div> 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:44:08.207

这里是...

只需添加`display:inline-block`到您的 div

[http://jsfiddle.net/5DNFs/5/](http://jsfiddle.net/5DNFs/5/)

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T12:44:27.830

您可以将 div 添加为到期总数的子项，示例如下：

```
.invoice-totals .due-total > div {
    border: 1px solid #DDD;
    background-color: #CCC;
    padding: 5px;   
}​ 
```

选择：

```
.invoice-totals .due-total {
    float: left;
    border: 1px solid #DDD;
    background-color: #CCC;
    padding: 5px;   
}​ 
```

[http://jsfiddle.net/5DNFs/3/](http://jsfiddle.net/5DNFs/3/)

[http://jsfiddle.net/5DNFs/9/](http://jsfiddle.net/5DNFs/9/)

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T12:45:54.827

尝试为每个浮动容器添加溢出：

```
overflow: auto 
```

这解决了崩溃的问题。在我看来，你的花车造型也有问题。清除浮动也将有所帮助。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T12:52:37.617

您需要强制使用[新的格式化上下文](https://stackoverflow.com/questions/6196725/how-does-the-css-block-formatting-context-work/6199172#6199172)或[使用非浮动元素来清除浮动（AKA. clearfix）](http://lists.w3.org/Archives/Public/www-style/2002Aug/0134.html)。

但看起来您无论如何都应该使用表格来存储这些数据。

# android - Android Listview 查找特定项目并默认选择

> ID：13068830
> 
> 赞同：0
> 
> 时间：2012-10-25T12:40:41.423
> 
> 标签：android, android-listview

我想在列表中找到一个特定的项目并默认选择它。如果我能找到职位，我可以打电话`ListView.setItemSelected(position, true)`

我正在使用 SimpleCursorAdapter 来显示类别列表，这可以动态更改，因此我不能只找到索引和硬代码。

如何在*不*使用 OnClickListener 的情况下通过 String 找到列表项的位置？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:51:09.283

如果没有看到您的代码，很难说什么最适合您的实现，但也许像这样的实现

```
SimpleCursorAdapter myAdapter;
...
//search here
int count = myAdapter.getCount();
for(int i=0; i < count; i++){
    if("desired string".equals(myAdapter.getItem()){
        listView.setItemSelected(i, true);
    }
} 
```

# iphone - 在iphone中单击按钮时的图像旋转

> ID：13068834
> 
> 赞同：-1
> 
> 时间：2012-10-25T12:40:56.807
> 
> 标签：iphone, objective-c

> **可能重复：**
> [如何将 UIImage 旋转 90 度？](https://stackoverflow.com/questions/1315251/how-to-rotate-a-uiimage-90-degrees)
> [如何在 iPhone 中以编程方式将图像旋转 90 度？](https://stackoverflow.com/questions/5581241/how-to-programmatically-rotate-image-by-90-degrees-in-iphone)

我想在单击按钮时旋转我的图像视图。图像视图必须在左、右、上、下位置旋转。我是 iphone 开发的新手，所以我不熟悉很多方法，请帮助我。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T13:12:34.663

```
-(IBAction)onClick:(id)sender {
  static int numRot = 0;
  yourImageView.transform = CGAffineTransformMakeRotation(M_PI_2 * numRot);
  ++numRot;
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:11:01.253

您应该使用**Transform 功能**。
例如 -

```
myImageView.transform = CGAffineTransformMakeRotation(3.14159265); 
```

# java - 如何通过坐标检查路线

> ID：13068840
> 
> 赞同：0
> 
> 时间：2012-10-25T12:41:14.960
> 
> 标签：java, algorithm, polygon

我有一个问题：我有两个坐标（起点和终点位置）和一个多边形。我想检查这条路线是（1）从多边形的外部到内部，（2）从内部到外部，（3）仅在内部，还是（4）仅在外部。

我真的很感激任何帮助。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:51:44.523

你很幸运！Java 包含一个`Polygon`具有方法的类[`contains(double x, double y)`](http://docs.oracle.com/javase/7/docs/api/java/awt/Polygon.html#contains%28double,%20double%29)。用它！

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:51:17.760

请参阅此页面： http: [//www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html](http://www.ecse.rpi.edu/Homepages/wrf/Research/Short_Notes/pnpoly.html)

此功能是从那里获取的。

它基于观察到，如果在 y 轴上投影时，测试点的 x 值低于多边形边缘的奇数，则测试点位于多边形内。适用于凸多边形和凹多边形。

```
int pnpoly(int nvert, float *vertx, float *verty, float testx, float testy)
{
  int i, j, c = 0;
  for (i = 0, j = nvert-1; i < nvert; j = i++) {
    if ( ((verty[i]>testy) != (verty[j]>testy)) &&
     (testx < (vertx[j]-vertx[i]) * (testy-verty[i]) / (verty[j]-verty[i]) + vertx[i]) )
       c = !c;
  }
  return c;
} 
```

# c# - 悬停在 Windows 窗体绘图中无法正常工作

> ID：13068844
> 
> 赞同：0
> 
> 时间：2012-10-25T12:41:26.183
> 
> 标签：c#, winforms, gdi

这是我的代码，

```
 private bool isMouseOverPin(int x, int y, Pin pin)
    {
        int left, top, right, bottom,size;

        size=5;

        left = pin.theRectangle.Left-size;
        right = pin.theRectangle.Right + size;
        top = pin.theRectangle.Top - size;
        bottom = pin.theRectangle.Bottom + size;

        if (x >= left && y >= top && x <= right && y <= bottom)
        {
            return true;
        }
        else
        {
            return false;
        }
    }

    private void pinHover()
    {
        for (int i = 0; i < pins.Count; i++)
        {
            if (isMouseOverPin(Cursor.Position.X, Cursor.Position.Y, pins[i]) == true)
            {
                using (Graphics gr=canvas.CreateGraphics())
                {
                   gr.DrawRectangle(10,10,10,10);
                }
            }
        }
    }

    private void canvas_MouseMove(object sender, MouseEventArgs e)
    {
        pinHover();
    } 
```

我想当有人将鼠标放在一个大头针上时，它会绘制一个矩形，大头针大小为 5，我无法理解为什么它不能正常工作。帮助请

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T13:24:32.490

我怀疑您的引脚位置是相对于画布而不是相对于屏幕的。

您应该将 e.Location 从 MouseEventArgs 传递给 pinHover，或者您可以使用`PointToClient`

例如

```
 List<Int32> DrawPinRects;

    private void initBuffer()
    {
        DrawPinRects = new List<Int32>();
    }

    private void pinHover(Point Position)
    {
        DrawPinRects.Clear();
        for (int i = 0; i < pins.Count; i++)
        {
            if (isMouseOverPin(Position.X, Position.Y, pins[i]) == true)
            {
                DrawPinRects.Add(i);
            }
        }
    }

    private void panel1_MouseMove(object sender, MouseEventArgs e)
    {
        pinHover(e.Location);
    }

    private void panel1_Paint(object sender, PaintEventArgs e)
    {
        foreach(Int32 index in DrawPinRects)
        {
            Int32 y = panel1.VerticalScroll.Value + 10;
            e.Graphics.DrawRectangle(Pens.Black, 10, y, 10, 10);
        }
    } 
```

还有这个：

```
 int left, top, right, bottom,size;

    size=5;

    left = pin.theRectangle.Left-size;
    right = pin.theRectangle.Right + size;
    top = pin.theRectangle.Top - size;
    bottom = pin.theRectangle.Bottom + size;

    if (x >= left && y >= top && x <= right && y <= bottom) 
```

可以简化为

```
 int size = 5;

    Rectangle TestRect = pin.theRectangle;
    TestRect.Inflate(size,size);

    if (TestRect.Contains(x,y)) 
```

这将做同样的事情。

# javascript - FF 中的 Javascript 错误

> ID：13068850
> 
> 赞同：0
> 
> 时间：2012-10-25T12:41:43.400
> 
> 标签：javascript

我正在尝试执行 javascript 并抛出此错误：

```
Timestamp: 10/25/2012 2:23:13 PM
Error: SyntaxError: syntax error
Source File: http://www.facebook.com/dia.makoetskiy
Line: 1
Source Code:
<!DOCTYPE html> 
```

它指向这一行..虽然它不是文档中的第 1 行。

```
<script src="http://www.facebook.com/dia.makoetskiy" onload="logged()" onerror="notlogged()"></script> 
```

火狐有什么问题？

Chrome 说我有语法错误：

```
<!DOCTYPE html> 
```

为什么是错误..？为什么孔页在 Firefox 上崩溃但在 chrome/ 上没问题

我认为第一行的错误来自 facebook.. 但我该如何防止这种情况？它从该页面检索文档，并且该文档破坏了 javascript 外部链接语法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:43:10.533

`http://www.facebook.com/dia.makoetskiy`是 HTML 文档，而不是 JavaScript 程序。

`<!DOCTYPE html>`是该资源的第一行，而不是包含该`<script>`元素的文档。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-26T17:21:27.250

Facebook 不会为不存在的页面返回 404 响应，例如 `http://www.facebook.com/some-super-bogus-username`

[http://redbot.org/?uri=http%3A%2F%2Fwww.facebook.com%2Fsome-super-bogus-username](http://redbot.org/?uri=http%3A%2F%2Fwww.facebook.com%2Fsome-super-bogus-username)

它只是报告回来`HTTP/1.1 302 Found`

除了用 javascript 进行这样的检查之外，也不理想。[在 PHP 中测试 404 的 URL 的简单方法？](https://stackoverflow.com/questions/408405/easy-way-to-test-a-url-for-404-in-php)

# android - android为什么setbackgroundresource不能显示背景图片

> ID：13068853
> 
> 赞同：1
> 
> 时间：2012-10-25T12:41:59.080
> 
> 标签：android

我使用 setbackgroundresource 设置 LinearLayout 的背景，但它不能显示在活动中。

```
public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);

        setContentView(R.layout.main);       
        sp = getSharedPreferences("config", MODE_PRIVATE);
        bgpic = sp.getInt("bgpic", 3);
        ll_main = (LinearLayout) findViewById(R.id.ll_main);
        Log.i(TAG, "图片"+imageIds[bgpic]);
        Log.i(TAG, "图片"+R.drawable.bg2);
        ll_main.setBackgroundResource(imageIds[bgpic]);
        ll_main.setBackgroundDrawable(new BitmapDrawable()); 
```

以上是部分代码。

# java - 通过 Facebook 成功登录后如何获取用户详细信息

> ID：13068866
> 
> 赞同：2
> 
> 时间：2012-10-25T12:42:27.587
> 
> 标签：java, android, facebook

我试过这个：当isSessionValid getDetails直接其他facebook.authorize然后getDetails在onActivityResult

```
public class MainActivity extends Activity {

    Facebook facebook = new Facebook("xxxxxxxxxxxxxxxx");
    AsyncFacebookRunner mAsyncRunner = new AsyncFacebookRunner(facebook);
    private SharedPreferences mPrefs;

    @Override
    public void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.main);

        mPrefs = getPreferences(MODE_PRIVATE);
        String access_token = mPrefs.getString("access_token", null);
        long expires = mPrefs.getLong("access_expires", 0);
        if (access_token != null) {
            facebook.setAccessToken(access_token);
        }
        if (expires != 0) {
            facebook.setAccessExpires(expires);
        }

        if (!facebook.isSessionValid()) {

            facebook.authorize(this, new String[] {}, new DialogListener() {
                @Override
                public void onComplete(Bundle values) {
                    SharedPreferences.Editor editor = mPrefs.edit();
                    editor.putString("access_token", facebook.getAccessToken());
                    editor.putLong("access_expires",
                            facebook.getAccessExpires());
                    editor.commit();
                }

                @Override
                public void onFacebookError(FacebookError error) {
                }

                @Override
                public void onError(DialogError e) {
                }

                @Override
                public void onCancel() {
                }
            });
        }else{

            try {
                JSONObject json = Util.parseJson(facebook.request("me"));
                String facebookID = json.getString("id");
                String firstName = json.getString("first_name");
                String lastName = json.getString("last_name");
                String email = json.getString("email");
                String gender = json.getString("gender");
            } catch (Exception e) {

            }
        }
    }

    @Override
    public void onActivityResult(int requestCode, int resultCode, Intent data) {
        super.onActivityResult(requestCode, resultCode, data);

        facebook.authorizeCallback(requestCode, resultCode, data);
        try {
            JSONObject json = Util.parseJson(facebook.request("me"));
            String facebookID = json.getString("id");
            String firstName = json.getString("first_name");
            String lastName = json.getString("last_name");
            String email = json.getString("email");
            String gender = json.getString("gender");

        } catch (Exception e) {

        }
    }

    public void onResume() {
        super.onResume();
        facebook.extendAccessTokenIfNeeded(this, null);
    }
} 
```

当我在我的系统上安装了 facebook 应用程序时，这可以正常工作。但是如果没有安装，我会得到一个 Web 视图来输入 facebook 凭据，并且在 logcat 中显示登录成功，但是没有调用 getDetails 块。

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T12:54:11.767

在**`initFacebook()`**功能中，您可以登录并执行您的功能，这里我正在获取用户的朋友信息。

```
private void initFacebook() 
{
    try
    {
        if (APP_ID == null) 
        {
            Util.showAlert(this,"Warning","Facebook Applicaton ID must be "+ "specified before running this example: see Example.java");
        }

        mFacebook = new Facebook();
        mAsyncRunner = new AsyncFacebookRunner(mFacebook);
        mFacebook.authorize(FacebookList.this, APP_ID, new String[] {"email", "read_stream", "user_hometown", "user_location","friends_about_me", "friends_hometown", "friends_location","user_relationships", "friends_relationship_details","friends_birthday", "friends_education_history","friends_website" }, new DialogListener()
        {
            public void onComplete(Bundle values) 
            {
                getHTTPConnection();
            }

            public void onFacebookError(FacebookError error) 
            {
                Log.i("public void onFacebookError(FacebookError error)....","....");
            }

            public void onError(DialogError e) 
            {
                Log.i("public void onError(DialogError e)....", "....");
                CustomConfirmOkDialog dialog = new CustomConfirmOkDialog(FacebookList.this, R.style.CustomDialogTheme, Utils.FACEBOOK_CONNECTION_ERROR);
                dialog.show();
            }

            public void onCancel() 
            {
                Log.i("public void onCancel()....", "....");
            }
        });

        SessionStore.restore(mFacebook, this);
        SessionEvents.addAuthListener(new SampleAuthListener());
        SessionEvents.addLogoutListener(new SampleLogoutListener());
    }
    catch (Exception e) 
    {
        e.printStackTrace();
    }
} 
```

在这里**`getHTTPConnection()`**，继续连接和发送字段，我们需要关于用户的朋友，因为在这里我们可以看到传递的字段是`fields=id,first_name,last_name,location,picture`朋友的。在这里，您可以根据应用程序的要求更改此字段。

```
private void getHTTPConnection() 
{
    try
    {
        mAccessToken = mFacebook.getAccessToken();
        HttpClient httpclient = new DefaultHttpClient();
        String result = null;
        HttpGet httpget = new HttpGet("https://graph.facebook.com/me/friends?access_token="+ mAccessToken + "&fields=id,first_name,last_name,location,picture");
        HttpResponse response;
        response = httpclient.execute(httpget);
        HttpEntity entity = response.getEntity();
        if (entity != null) 
        {
            result = EntityUtils.toString(entity);
            parseJSON(result);
        }
    }
    catch (Exception e) 
    {
        e.printStackTrace();
    }
} 
```

现在成功连接**facebook**后，我们正在获取`JSON`数据并进一步解析它。

```
private void parseJSON(String data1) throws Exception,NullPointerException, JSONException 
{
    try 
    {
        JSONObject jObj = new JSONObject(data1);
        JSONArray jObjArr = jObj.optJSONArray("data");
        int lon = jObjArr.length();

        for (int i = 0; i < lon; i++) 
        {
            JSONObject tmp = jObjArr.optJSONObject(i);

            String temp_image =  tmp.getString("picture");                          String temp_fname = tmp.getString("first_name");

            String temp_lname = tmp.getString("last_name");

            String temp_loc = null;

            JSONObject loc = tmp.getJSONObject("location");
            temp_loc = loc.getString("name");

        }
    } 
    catch (Exception e) 
    {
        Log.i("Exception1 is Here>> ", e.toString());
        e.printStackTrace();
    }
} 
```

假设您已经在应用程序中添加了一个**facebook****`initFacebook()`** jar，并且为了继续执行此代码，您可以调用您的`onCreate()`活动

# c# - C# 格式化字符串，在带有空格的目录周围加上双引号

> ID：13068869
> 
> 赞同：0
> 
> 时间：2012-10-25T12:42:48.097
> 
> 标签：c#, process

我正在尝试使用 String.Format 创建以下字符串

2MSFX.exe "C:\Users\Avidan\Documents\Visual Studio 2010\Projects\DefferedRenderer\DummyGame\DummyGameContent\Shaders\Clear.fx" "C:\Users\Avidan\Documents\Visual Studio 2010\Projects\DefferedRenderer\DummyGame \DummyGameContent\Shaders\Clear.mxfb"

所以我正在尝试使用String.Format，但由于某种原因我无法理解它：|

代码是（最后 2 个参数是 String.Empty）：

```
 String outputFile = Path.Combine(destDir, Path.ChangeExtension(Path.GetFileName(fxFile), "mgxf"));
 String command = String.Format("\"{0}\" \"{1}\" \"{2}\" \"{3}\"",  Path.GetFullPath(fxFile),  Path.GetFullPath(outputFile), DX11Support, DebugSupport);

                var proc = new Process
                {
                    StartInfo = new ProcessStartInfo
                    {
                        FileName = MGFXApp,
                        Arguments = command,
                        UseShellExecute = false,
                        RedirectStandardOutput = true,
                        CreateNoWindow = true
                    }
                }; 
```

但这似乎给了我 \"C:\Users\Avidan\Documents\Visual Studio 2010\Projects\DefferedRenderer\DummyGame\DummyGameContent\Shaders\ClearGBuffer.fx\" \"C:\Users\Avidan\Documents\Visual Studio 2010\Projects\DefferedRenderer\DummyGame\DummyGameContent\Shaders\MGFX\ClearGBuffer.mgxf\"\"\"\"\"

如果我使用逐字字符串，我将无法创建我想要的字符串。

有任何想法吗？谢谢。

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2012-10-25T12:48:27.753

**更新**

你应该使用`String.Concat()`.

```
String.Concat("\"", Path.GetFullPath(fxFile), "\" " , Path.GetFullPath(outputFile), "\" " DX11Support,"\" " ,DebugSupport, "\"") 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:52:45.513

对于像这样的简单情况，我认为没有必要，但您可以创建一个扩展方法来自动在字符串周围加上引号。

```
public static class StringExtensions
{
    public static string Quotify(this string s)
    {
        return string.Format("\"{0}\"", s);
    }
} 
```

然后您的命令格式如下所示：

```
String command = String.Join(" ",
    Path.GetFullPath(fxFile).Quotify(),
    Path.GetFullPath(outputFile).Quotify(),
    DX11Support.Quotify(), DebugSupport.Quotify()); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:51:39.990

您需要使用 @ 文字的组合来避免'\' squirlyness，并使用 ""'s 来制作 "'s

这个例子对我有用：

```
string s = @"""C:\Test Dir\file.fx"" ""C:\Test Dir\SubDir\input.dat""";
Console.WriteLine(s); 
```

控制台输出如下所示：

```
"C:\Test Dir\file.fx" "C:\Test Dir\SubDir\input.dat" 
```

只要记住两个引号组成一个单引号，所以字符串开头和结尾的三引号是开始字符串定义的引号，然后是双引号来做引号。可能是最令人困惑的字符串格式之一，但这就是它的工作原理。

# eclipse - 为 Eclipse 配置多个 Checkstyle 检查

> ID：13068877
> 
> 赞同：1
> 
> 时间：2012-10-25T12:43:09.927
> 
> 标签：eclipse, checkstyle

有谁知道在 Eclipse 中同时实现多个 checkstyle 配置的方法？

所以，要清楚 - 我们已经安装并配置了 checkstyle 插件。我们已经实施了标准检查（远程，在公司层面）。我们想添加到已配置的检查中。不幸的是，当前的检查是不可编辑的。有没有办法实现第二个配置？

据我所知，您似乎一次只能实现一个配置。希望，我错了。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-26T14:55:27.847

你可以这样做。转到`Window → Preferences → Checkstyle`添加您自己的 Checkstyle 配置。

接下来，`right-click your Eclipse project → Properties → Checkstyle`。在`Main`选项卡上，取消选中`Use Simple Configuration`并单击`Add`以添加新的 Checkstyle 配置。确保`File Set`对两种配置都使用相同的配置。

现在所有文件都使用两种配置的规则进行检查。

（我假设“checkstyle 插件”是 eclipse-cs。）

# javascript - Javascript反向排序

> ID：13068878
> 
> 赞同：1
> 
> 时间：2012-10-25T12:43:10.943
> 
> 标签：javascript

当所有要排序的数据都相等时，我在 javascript 反向方法上遇到问题。

这是我的代码：

```
var ascAgt = false;
        function sortTableAgt() {
            var tbl = document.getElementById("mytable").tBodies[0];
            var store = [];
            for (var i = 0, len = tbl.rows.length; i < len; i++) {
                var row = tbl.rows[i];
                var rowdatedata = row.cells[1].innerHTML;
                store.push([rowdatedata, row]);
            }
            if (ascAgt) {
                store.sort();
                ascAgt = false;
            } else {
                store.sort();
                store.reverse();
                ascAgt = true;
            }
            for (var i = 0, len = store.length; i < len; i++) {
                var idno = i + 1;
                store[i][1].cells[0].innerHTML = idno.toString();
                tbl.appendChild(store[i][1]);
            } store = null;
        } 
```

样本数据：

```
ID  Name    Date
1   XXXXX   2012/10/05
2   XXXXX   2012/03/16
3   XXXXX   2012/05/18
4   XXXXX   2012/05/18 
```

当我对名称部分进行排序时，我想要的是什么都不会发生，因为名称是相等的，但是当涉及到 reverse 方法时，它只会反转给定的数据。我在这里错过了什么吗？先感谢您....

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T14:41:09.100

所以，你想要的是按第二列排序，如果值相等，也按第三列排序。正确的？

该`sort()`函数还需要一个回调。你必须使用它。

```
var ascAgt = false;

function sortTableAgt() {
  var table = document.getElementById("mytable").tBodies[0],
      rows = table.rows,
      len = rows.length,
      i = 0,
      store = [],
      order = ascAgt ? 1 : -1;

  for (i = 0; i < len; i++) {
    store.push(rows[i]);
  }

  store.sort(function(a, b) {
    if (a.cells[1].innerHTML == b.cells[1].innerHTML) {

      // If 2nd cell are equal, sort by 3rd cell
      // Compare them as date (timestamp)
      var dateA = new Date(a.cells[2].innerHTML).getTime(),
          dateB = new Date(b.cells[2].innerHTML).getTime();

      if (dateA == dateB) {
        return 0;
      } else if (dateA < dateB) {
        return -1 * order;
      } else {
        return 1 * order;
      }

    } else if (a.cells[1].innerHTML < b.cells[1].innerHTML) {
      return -1 * order;
    } else {
      return 1 * order;
    }
  });

  for (i = 0; i < len; i++) {
    store[i].cells[0].innerHTML = (i+1).toString();
    table.appendChild(store[i]);
  }
} 
```

您还可以在 JSBin 中查看 tis 演示：http: [//jsbin.com/welcome/39336/edit](http://jsbin.com/welcome/39336/edit)

# python - Python C API，新对象的高引用计数

> ID：13068886
> 
> 赞同：6
> 
> 时间：2012-10-25T12:43:24.687
> 
> 标签：python, automatic-ref-counting, python-c-api

我只是想了解在使用 Python C API 时如何处理引用计数。

我想在 C++ 中调用 Python 函数，如下所示：

```
PyObject* script;
PyObject* scriptRun;
PyObject* scriptResult;

// import module
script = PyImport_ImportModule("pythonScript");
// get function objects
scriptRun = PyObject_GetAttrString(script, "run");
// call function without/empty arguments
scriptResult = PyObject_CallFunctionObjArgs(scriptRun, NULL);

if (scriptResult == NULL)
    cout << "scriptResult  = null" << endl;
else
    cout << "scriptResult  != null" << endl;

cout << "print reference count: " << scriptResult->ob_refcnt << endl; 
```

pythonScript.py 中的 Python 代码非常简单：

```
def run():
    return 1 
```

“PyObject_CallFunctionObjArgs”的文档说你得到一个新的引用作为返回值。所以我希望“scriptResult”的引用计数为 1。但是输出是：

```
scriptResult  != null
print reference count: 72 
```

此外，如果我在不减少引用计数的情况下循环执行此操作，我预计会发生内存泄漏。然而，这似乎不会发生。

有人可以帮我理解吗？

亲切的问候！

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T13:10:57.987

令人困惑的是，小整数（还有`True`, `False`, `None`, 单字符串等）是*内嵌*的（[“is”运算符对整数的行为异常](https://stackoverflow.com/questions/306313/python-is-operator-behaves-unexpectedly-with-integers)），这意味着无论在程序中使用或获取它们的任何位置，运行时都会尝试使用相同的对象实例：

```
>>> 1 is 1
True
>>> 1 + 1 is 2
True
>>> 1000 + 1 is 1001
False 
```

这意味着当您编写 时`return 1`，您将返回一个已经存在的`int`对象实例，其中（如您所见）相当多的引用计数。因为相同的实例在其他地方使用，未能取消引用它不会导致内存泄漏。

如果您将脚本更改为`return 1001`or`return object()`然后您将看到初始引用计数为 1 和内存泄漏。

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T13:35:53.443

ecatmur 是对的，数字和字符串在 Python 中是实习的，所以你可以尝试使用一个简单的`object()`对象。

一个简单的演示[`gc`](http://docs.python.org/library/gc.html)：

```
import gc

def run():
    return 1

s = run()
print len(gc.get_referrers(s))  # prints a rather big number, 41 in my case

obj = object()
print len(gc.get_referrers(obj))  # prints 1

lst = [obj]
print len(gc.get_referrers(obj))  # prints 2

lst = []
print len(gc.get_referrers(obj))  # prints 1 again 
```

* * *

多一点：当 CPython 创建一个新对象时，它会调用一个 C 宏[`_Py_NewReference`](http://hg.python.org/cpython/file/e7706bdaaa0d/Include/object.h#l562)来将引用计数初始化为 1。然后使用`Py_INCREF(op)`and`Py_DECREF(op)`来增加和减少引用计数。

# java - Arrays.sort 不填充数组，覆盖数组中已经存在的值

> ID：13068888
> 
> 赞同：0
> 
> 时间：2012-10-25T12:43:28.643
> 
> 标签：java

我需要生成一个`int[] randomNumbers`没有重复的随机数数组。为此，我创建了一个包含所有可以进入的值的数组`randomNumbers`，然后使用随机数生成器从列表中选择一个，检查它是否已经在 中`randomNumbers`，如果不是，则将其放入`randomNumbers`。

（我想要 1 和 max 之间的数字，而不是 0 和 max-1）

为了能够使用 Arrays.sort(int[])，需要对列表进行排序。因此，我使用第三个数组，其值与`randomNumbers`called相同`sortedNumbers`，并在每次迭代时对其进行排序：

```
public int[] uniqueRandom(int max, int numRequired) {
    if (max < numRequired) {
        numRequired = max;
    }
    int[] randomNumbers = new int[numRequired];
    int[] sortedNumbers = new int[numRequired];
    int[] sequentialNumbers = new int[max];
    for (int i = 1; i < max; i++) {
        sequentialNumbers[i] = i;
            System.out.println(sequentialNumbers[i]);
    }

    int p = 0;
    while (p < numRequired) {
        int j = r.nextInt(max) + 1;
        System.out.println("J:" + j);
        if (Arrays.binarySearch(sortedNumbers, j) >= 0) {
            System.out.println("Number Found:" + Arrays.binarySearch(randomNumbers,  j));
        } else {
            randomNumbers[p] = j;
            sortedNumbers[p] = j;
            Arrays.sort(sortedNumbers);
            for (int i = 0; i < randomNumbers.length; i++) {
                System.out.println("rNum[" + i + "]:" + randomNumbers[i]);
            }
            System.out.println("\n");
            for (int i = 0; i < randomNumbers.length; i++) {
                System.out.println("sNum[" + i + "]:" + sortedNumbers[i]);
            }
            p++;
        }

    }

    return randomNumbers;
} 
```

我的问题是我得到一个`sortedNumbers`覆盖值的输出。对于 uniqueRandom(5, 5)，输出为：

```
J:2
rNum[0]:2
rNum[1]:0
rNum[2]:0
rNum[3]:0
rNum[4]:0

sNum[0]:0
sNum[1]:0
sNum[2]:0
sNum[3]:0
sNum[4]:2

J:2 // 2 already in the list, try again

J:2

J:4
rNum[0]:2
rNum[1]:4
rNum[2]:0
rNum[3]:0
rNum[4]:0

sNum[0]:0
sNum[1]:0
sNum[2]:0
sNum[3]:2
sNum[4]:4

J:5
rNum[0]:2
rNum[1]:4
rNum[2]:5
rNum[3]:0
rNum[4]:0

sNum[0]:0
sNum[1]:0
sNum[2]:2
sNum[3]:4
sNum[4]:5

J:2

J:3
rNum[0]:2
rNum[1]:4
rNum[2]:5
rNum[3]:3
rNum[4]:0

sNum[0]:0  // Should be:
sNum[1]:0  // 2
sNum[2]:2  // 3
sNum[3]:3  // 4
sNum[4]:5  // 5

J:4
rNum[0]:2
rNum[1]:4
rNum[2]:5
rNum[3]:3
rNum[4]:4

sNum[0]:0
sNum[1]:0
sNum[2]:2
sNum[3]:3
sNum[4]:4 
```

所以你可以看到问题。我正在使用 java 1.7，但不知道为什么要这样做！

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:53:56.787

您正在使用相同的索引将新数字放入两个数组中。您的 rNum 数组是从上到下填充的，但排序后的数组不是：每次排序时，新值在数组中向下移动，并且零总是在顶部。我认为您可以通过始终将新数字放在排序数组的第一个位置来解决它：

```
sortedNumbers[0] = j; 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:55:55.397

为了解决您的问题，我会使用一个集合，以确保我们获得独特的结果。

下面的 snipest 将生成具有所需数量的唯一整数的数组。

```
Set<Integer> uniqueNumbers = new HashSet<Integer>();
Random r = new Random();
while(uniqueNumbers.size() < numRequired) {
    uniqueNumbers.add(r.nextInt(maxRandom) + 1);
} 
return uniqueNumbers.toArray(new Integer[0]); 
```

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T12:59:19.543

当你输入 J=5

sortedNUM[] 是

```
sNum[0]:0
sNum[1]:0
sNum[2]:2
sNum[3]:4
sNum[4]:5 
```

接下来当你输入 J=3 (你的 p=3) 之后

```
sortedNumbers[p] = j; 
```

你的 sNUM[3] 是 4 被 3 替换，因此在排序后它变成

```
sNum[0]:0  // Should be:
sNum[1]:0  // 2
sNum[2]:2  // 3
sNum[3]:3  // 4
sNum[4]:5  // 5 
```

通知 4 不存在

我建议您将数组初始化为 -1 或 0 并在数组的开头添加变量，例如

```
sortedNumbers[0]=j; 
```

在 Arrays.sort(); 之后 第一个位置将始终为空以添加更多数字

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T13:11:23.647

虽然它没有回答这个问题，但这里有一个替代方案，`O(n)`并且工作得很好，前提`max`是不是很大。

```
public static void main(String[] args) {
    System.out.println(Arrays.toString(uniqueRandom(20, 10)));
}

public static int[] uniqueRandom(int max, int numRequired) {
    int[] possible = new int[max];
    int[] ret = new int[numRequired];
    for (int i = 0; i < max; i++)
        possible[i] = i + 1;
    Random r = new Random();
    int numLeft = max;
    for (int i = 0; i < numRequired; i++) {
        int idx = r.nextInt(numLeft);
        ret[i] = possible[idx];
        if (idx < --numLeft)
            possible[idx] = possible[numLeft];
    }
    return ret;
} 
```

印刷

```
[4, 10, 12, 19, 8, 3, 15, 1, 14, 7] 
```

我想说的是，也许你可以让它更简单。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2012-10-25T13:18:10.497

您的代码存在一些问题：

*   因为您仅在数组中尚不存在新数字 j 时才增加 p ，因此，再加上您首先对 sortedArray 进行排序这一事实导致该值有时实际上被放置在现有值之上（由于种类）

*   我不明白sequentialNumbers数组的用途是什么......

这是一个应该有效的示例：

```
private static Random r = new Random();

public static void main(String[] args) {
    System.out.println(Arrays.toString(uniqueRandom(10, 10)));
}

public static int[] uniqueRandom(int max, int numRequired) {
    if (max < numRequired) {
        numRequired = max;
    }
    int[] randomNumbers = new int[numRequired];
    int[] sortedNumbers = new int[numRequired];
    Arrays.sort(sortedNumbers);

    int p = 0;

    while (p < numRequired) {
        int j = r.nextInt(max) + 1;         
        if(Arrays.binarySearch(sortedNumbers, j)<0) {
            randomNumbers[p] = j;
            System.arraycopy(randomNumbers, 0, sortedNumbers, 0, randomNumbers.length);
            Arrays.sort(sortedNumbers);
            p++;
        }           
    }

    return randomNumbers;
} 
```

# ios - 故事板是否可以通过单元测试很好地扩展？

> ID：13068890
> 
> 赞同：2
> 
> 时间：2012-10-25T12:43:33.000
> 
> 标签：ios, cocoa, testing, tdd, storyboard

我正在认真看待一个带有 Storyboards 的新 iOS 项目，虽然它看起来很有吸引力，但我担心它会如何影响我的单元测试。

通常我会加载我的 nib 并执行一些集成/功能/单元测试的混合。然而，对于故事板，所有内容都在一个文件中，我担心在每个测试的设置和拆卸过程中加载和卸载整个内容的成本。

对于那些在大型项目中有 TDD 经验和 Storyboard 的人。在使用故事板时，您是否注意到任何与测试相关的缺点？

我关心性能并保持我的单元测试快速。也许还有其他我还没有注意到的问题。我更愿意听到外面的第一手故事。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-25T12:53:50.873

虽然在 Interface Builder 中故事板作为一个大文档呈现，但在运行时它们不会作为一个整体加载。`ibtool`将故事板编译为 storyboardc 文件包，包含每个视图控制器的 nib 文件以及包含视图控制器标识符和 nib 文件名之间的映射的 plist 文件。

因此，从情节提要中实例化视图控制器与情节提要与单个 xib 文件没有太大区别。在这两种情况下，运行时都只是实例化了 nib。

# c# - 无法访问其他项目中的公共类，但相同的命名空间

> ID：13068891
> 
> 赞同：3
> 
> 时间：2012-10-25T12:43:35.443
> 
> 标签：c#

我的解决方案中有两个项目，每个项目都有一个包含公共类的 CS 文件。由于这两个类都在同一个命名空间中，我希望它们能够互相看到。事实并非如此。请参阅下面的设置。

Woof1 项目，文件 File.CS

```
namespace MyNameSpace
{
  public class Foo
  {
    // Doesn't compile
    Faa f;
  }
} 
```

Woof2 项目，文件 File.CS

```
namespace MyNameSpace
{
  public class Faa
  {
    // Doesn't compile
    Foo f;
  }
} 
```

注意，两个类都存储在同名**但**不同目录的文件中（即不同的文件）。

1.  为什么我编译不出来？
2.  我能做些什么（除了将类移动到同一个项目）。

*（我只找到了关于这个主题的[讨论](https://stackoverflow.com/questions/7040123/namespace-not-available-in-other-project)，但最后这不是我的问题。）*

* * *

## 回答 #1

> 赞同：6
> 
> 时间：2012-10-25T13:36:45.003

1.  确保按预期设置引用。每个项目都需要参考其他项目。
2.  确保在项目中的**所有**类`public`上设置限定符。
***   确保为项目中的**所有**枚举设置`public`限定符。**

 ****此外，最好将您`enum`的 s 和其他辅助定义移动到一个公共项目并将它们存储在那里。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T12:47:12.793

您需要从项目 Woof2 添加对项目 Woof1 的引用。

此外，尝试相互引用两者并不是一个好主意，因为您引入了循环依赖，使构建成为一场噩梦。如果你摔倒了，你需要这样做，你应该考虑将公共代码分解到一个单独的（第三个）项目中。

* * *

## 回答 #3

> 赞同：2
> 
> 时间：2012-10-25T12:49:07.427

在 Woof1 中，您需要包含对 Woof2 的引用。另外需要注意的是命名空间是区分大小写的，所以两个命名空间都应该是MyNameSpace。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T12:50:29.537

您需要从项目 Woof2 添加对 Woof1 的项目引用。请参考[此](http://msdn.microsoft.com/en-us/library/f3st0d45%28v=vs.100%29.aspx)链接以获取更多信息。

* * *

## 回答 #5

> 赞同：0
> 
> 时间：2013-12-31T06:55:04.923

我确实发生在我身上。如果 dll 不是正确的构建，它可能会出现。在我的情况下，我使用工具栏中的发布选项。所以请确保选择了调试选项****

# php - 地理位置：获取纬度和经度与距离

> ID：13068894
> 
> 赞同：2
> 
> 时间：2012-10-25T12:43:46.460
> 
> 标签：php, geolocation, distance, latitude-longitude

> **可能重复：**
> [SQL：确定一个坐标是否在另一个坐标的半径内](https://stackoverflow.com/questions/1896213/sql-determine-if-one-coordinate-is-in-radius-of-another)

我有一个关于 PHP 地理定位的问题。

我有纬度和经度值。你知道我怎样才能从远处获得新的价值观吗？

我的意思是，我希望所有商店都在周围 1 或 2 英里范围内，例如，从某个位置。我的数据库包含具有纬度和经度值的商店，我希望所有商店都在附近。

你明白我的意思吗？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:46:03.657

您*可能*可以使用 Google Maps API - 例如。[谷歌地图地理编码 API](https://developers.google.com/maps/documentation/geocoding/)。查看他们的文档，其中包含丰富的信息。

# android - 旋转木马：改变圆环的角度

> ID：13068896
> 
> 赞同：2
> 
> 时间：2012-10-25T12:43:58.237
> 
> 标签：android

我想利用这个[项目](http://www.codeproject.com/Articles/146145/Android-3D-Carousel)。

并改变环的角度和图标的角度得到这样的东西：

![在此处输入图像描述](../Images/3409b3504b3f5f042635e582c3658ecf.png)

但我不知道怎么做。可能吗？

# actionscript-3 - 基于鼠标点击搜索

> ID：13068901
> 
> 赞同：0
> 
> 时间：2012-10-25T12:44:18.390
> 
> 标签：actionscript-3, osmf

我正在尝试修改 Strobe 媒体播放，以根据鼠标点击按钮而不是控制栏来搜索视频。每次点击都应该让我提前“n”秒，它应该清除缓冲区并自动插入正确的片段。

为此，我有一个基于单击按钮时触发的功能，但我无法搜索。我收到一个错误：`cannot access a property or method of a null object reference`

有人可以告诉我这里出了什么问题：

```
 override protected function onMouseClick(event:MouseEvent):void
    {

        httpStreamSource.seek(9);
//          mediaPlayer.seek(55);

        showRight = !showRight;
        if(showRight)
            setFace(down);
        else
            setFace(up);
    } 
```

提前致谢！

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:48:16.007

对于提前寻找 n 秒，您应该将当前时间添加 n 秒并将其提供给 seek 方法。

对于您的空对象错误，您必须确保该对象存在：

> TypeError：错误 #1009：无法访问空对象引用的属性或方法。在 org.osmf.player.chrome.widgets::JumpButton/_seekVideo()[I:\OSMF\player\StrobeMed‌​iaPlayback\src\org \osmf\player\chrome\widgets\JumpButton.as:49]

在第 49 行，您只有一个对象： mediaPlayer - 如果它存在，请在使用前添加测试：

```
private function _seekVideo( seekTo : Number ):void 
{ 
    if (mediaPlayer && mediaPlayer.canSeekTo(seekTo * mediaPlayer.duration))
    {
        mediaPlayer.seek( seekTo * mediaPlayer.duration );//line49 
    }
} 
```

这将防止 TypeError 您应该调查为什么在您单击它时 mediaPlayer 对象不可用。

最好的祝福

# c++ - 在 C++ 中创建一个独立于父级的子线程

> ID：13068913
> 
> 赞同：0
> 
> 时间：2012-10-25T12:45:00.933
> 
> 标签：c++, visual-c++, dll, process

我在一个 C++ DLL 模块中工作，我需要为每 X 分钟独立执行一项任务。我试图为任务创建一个线程，但创建线程的主程序也将继续等待子线程完成。

有人可以帮我如何创建一个独立于主程序的单独进程（如果可能，请提供示例代码）并执行任务？该进程应该接受一个函数并每隔 X 分钟运行一次函数中存在的代码。

**编辑**：

```
void test(void *param)
{
    cout << "In thread function" << endl;
    Sleep(1000); // sleep for 1 second
    cout << "Thread function ends" << endl;
    _endthread();
}

int main()
{
    HANDLE hThread;
    cout << "Starting thread" << endl;
    cout << (hThread = (HANDLE)_beginthread(test,0,NULL));
    WaitForSingleObject( hThread, INFINITE );
    cout << "Main ends" << endl;
    return 0;
} 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T14:37:15.363

`WaitForSingleObject()`将阻塞 main 直到线程完成。如果你想从线程函数定期运行一些东西，`test()`你需要在那里放置一个循环。最好在某些条件下触发`main()`退出时结束线程函数。`WaitForSingleObject()`在您想退出该`main()`方法之前，您不应该调用。因此，您将拥有`test()`异步运行的方法。

```
bool endThread = false;
void test(void *param)
{
    cout << "In thread function" << endl;
    while(!endThread)
    {
        Sleep(1000); // sleep for 1 second
    }

    cout << "Thread function ends" << endl;
    _endthread();
}

int main()
{
    HANDLE hThread;
    cout << "Starting thread" << endl;
    cout << (hThread = (HANDLE)_beginthread(test,0,NULL));

    // Do any other stuff without waiting for the thread to end
    // ...

    endThread = true;
    WaitForSingleObject( hThread, INFINITE );
    cout << "Main ends" << endl;
    return 0;
} 
```

请注意，您可能需要`endThread`使用互斥锁或类似方法正确同步对变量的访问，示例应该只显示原理。

**更新：**

如果您想`main()`在线程结束之前退出，则根本无法使用线程。

正如我在第一条评论中提到的那样，您需要创建一个独立的子进程。查找`fork()`和`exec()`函数来执行此操作（这些可能还有特定的 WinAPI 方法，我不知道）。

# c++ - getter 方法的推荐签名是什么？

> ID：13068916
> 
> 赞同：0
> 
> 时间：2012-10-25T12:45:14.000
> 
> 标签：c++

假设需要实现 getter/setter（我也尽量避免使用它们，因为它们通常表明设计不佳）。以下两个变体中哪个变体更好，每个变体的含义是什么？

可能性（1）：

```
class Foo;
class Bar
{
public:
    const Foo& getFoo() const {return foo_;}
private:
    Foo foo_;
}; 
```

或 (2)：

```
class Foo;
class Bar
{
public:
    void getFoo(Foo& foo) const {foo = foo_}
private:
    Foo foo_;
}; 
```

就个人而言，我总是使用第一个变体，因为我发现它更直观。在第二个变体中，您必须在调用 getFoo 之前构造 Foo 对象，该对象将保存 getFoo 的结果，然后将 getFoo 引用传递给该对象。这个变体对我来说有违直觉，但有些人更喜欢 secodn 变体。出于什么原因，第二个变体可能优于第一个变体？

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T13:00:38.993

输出论据应被视为刑事犯罪。它更难使用，但尤其难以维护，因为它在代码中不可见。如果分配了某些东西，那就很清楚了。如果在对象上调用一个方法，那么它可能会修改它。但是如果它只是传递给一个函数，普通的维护程序员不会怀疑它被修改了。另外，大多数情况下，它需要额外的行来声明一个临时变量来接受该值。

这种东西主要是那些停留在C89，不知怎么学了C++语法的人写的。但是对于 C++ 11 的 C++ 复制省略和移动语义，我认为没有任何正当理由值得让代码更难阅读。

Of course if you are returning a member, you can return const reference to it. If the value is computed, just return by value and copy elision will take care of it most of the time.

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:54:37.490

在一般情况下，第一个变体当然是优选的。由于返回值优化 (RVO)，它的效率不低于秒，因为返回的对象没有被复制并且没有性能开销。

如果您需要对传递的对象进行一些初步设置或使用一些部分副本，则第二种变体可能更可取。但这当然不再是微不足道的 getter，而是一些具有不同语义的不同功能。

使用第二个变体的另一个可能原因 - 当传递的对象不能由持有类直接创建时，例如它的创建被某个工厂封装，并且您不想让您的类依赖于这个工厂。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T13:00:08.553

```
const Foo& getFoo() const {return foo_;} 
```

# java - 让价值脱离循环

> ID：13068921
> 
> 赞同：1
> 
> 时间：2012-10-25T12:45:25.130
> 
> 标签：java, android

我正在尝试修改以下代码以满足我的简单应用程序需求。由于我是初学者，因此对于专业人士来说，有时很难得到一些明显的东西。我想得到 sum += p.price; 退出循环，因为当我第二次单击按钮时，结果会加倍。我知道 : 是条件运算符，但无法理解该语句的含义（产品 p：boxAdapter.getBox()）。可能如果有人会解释或转移到do..虽然它会很容易理解。

```
public void showResult(View v) {

    String result = "Items in the basket: ";
    String sum_text = "For the sum: ";

    for (Product p : boxAdapter.getBox()) {

        if (p.box) {
            result += "\n" + p.name + "   " + p.price;
        }

        sum += p.price;

    }

    Toast.makeText(this, result, Toast.LENGTH_LONG).show();
    Toast.makeText(this, sum_text + sum, Toast.LENGTH_LONG).show();
} 
```

对不起，打扰了简单的问题。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:52:43.383

```
for (Product p : boxAdapter.getBox()) 
```

这个循环会遍历Product类型的boxAdapter.getBox()集合，将每个实例存入p，转换成简单的for循环，改成这样：

```
for(int i=0; i<boxAdapter.getBox().size(); i++)
{
    Product p=boxAdapter.getBox().get(i);
} 
```

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T12:51:08.647

`for (Product p : boxAdapter.getBox())`意味着您遍历结果中的每个 Product 对象`boxAdapter.getBox()`。

例如，如果`boxAdapter.getBox()`返回一个包含 2 个 Product 对象的列表，您的循环将执行 2 次，第一次`p`是列表中的第一项，第二次是列表中的第二项。

# django - django 包含具有 ManyToMany 字段的模型，但它们不适用于查询

> ID：13068926
> 
> 赞同：0
> 
> 时间：2012-10-25T12:45:30.983
> 
> 标签：django, django-orm

我有一个包含两个 ManyToMany 字段的模型，并且我已成功创建包含这些字段的条目。当我创建一个查询集时，这里的数据不包括在内。我怎样才能访问这些数据？

查询集代码：

```
example_list = Example.objects.values_list().order_by('-date_submitted') 
```

模型.py

```
class Example(models.Model):
    example_id = models.ForeignKey(User)
    date_submitted = models.DateTimeField()
    title = models.CharField(max_length=70)
    description = models.TextField()
    file = models.FileField(upload_to='files')
    photo = models.FileField(upload_to='design_photos')
    materials = models.ManyToManyField('Materials')
    tags = models.ManyToManyField('Tags') 
```

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:47:25.163

我已经通过使用过滤器方法解决了这个问题，如下：

```
example_list = Example.objects.filter(tags__tag__contains='jewellery').order_by('-date_submitted')[:10] 
```

# sql-server - 通过 xml 导出同步 SQL Server 数据

> ID：13068930
> 
> 赞同：-1
> 
> 时间：2012-10-25T12:45:44.447
> 
> 标签：sql-server, ado.net, sql-server-2000, data-synchronization

我需要某人在以下方面的专业知识：

我正在为需要在它和他们的 .NET 1.1 WinForms 应用程序之间同步 30 多个表的客户端构建一个面向 Web 的系统。为了我们双方的理智，为了尽量减少我们之间的互动，我建议使用 XML，就像这样

```
SELECT *
FROM table1
FOR XML AUTO, XMLDATA 
```

需要注意的是，我需要主键在源数据库和目标数据库之间保持相同。有没有一种优雅的方式来导入 XML？每次有数据同步时，我不想编写丑陋的 SQL 来删除和重新创建表和关系。有没有办法通过 ADO.NET 或 Entity Framework 3 告诉数据库“看，这是您的数据，请使用它而不是您当前拥有的数据”？

这是导出的 XML 的示例：

```
<taxGroup>
   <Schema name="Schema29" xmlns="urn:schemas-microsoft-com:xml-data" xmlns:dt="urn:schemas-microsoft-com:datatypes">
      <ElementType name="taxGroup" content="empty" model="closed">
         <AttributeType name="taxGroupId" dt:type="i8"/>
         <AttributeType name="regionId" dt:type="i8"/>
         <AttributeType name="description" dt:type="string"/>
         <AttributeType name="percentage" dt:type="number"/>
         <AttributeType name="exportNumber" dt:type="string"/>
         <attribute type="taxGroupId"/>
         <attribute type="regionId"/>
         <attribute type="description"/>
         <attribute type="percentage"/>
         <attribute type="exportNumber"/>
      </ElementType>
   </Schema>
   <taxGroup xmlns="x-schema:#Schema29" taxGroupId="38000001" regionId="1482000001" description="VAT" percentage="0.1400" exportNumber=""/>
   <taxGroup xmlns="x-schema:#Schema29" taxGroupId="38000002" regionId="1482000001" description="VAT2" percentage="0.1700" exportNumber=""/>
</taxGroup> 
```

注意：这两个数据库不能互相访问。传输是通过 Secure HTTPRequest 进行的。

更新 2：Winforms 应用程序使用 SQL2000，这使得使用同步框架变得不可能，显然......

更新 3：让我们认为我不得不以这种方式做事。.NET 应用程序部署在各种第 3 方站点，每个站点都有单独的数据库副本并连接到 Web 应用程序的单独实例。它是一个经销商包，用于所有意图和目的：一个实体店面组件和一个在线商店组件。一些第三方拒绝从 SQL2000 升级。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-11-02T10:29:15.387

好的，所以我把这个问题交给了我们的 MD，他是前世的系统架构师。他建议我将 XML 导入到具有相同结构的单独保存数据库中。在添加数据之前，我禁用约束检查并清空暂存中的所有表：

```
EXEC sp_msforeachtable "ALTER TABLE ? NOCHECK CONSTRAINT all";
EXEC sp_msforeachtable "DELETE FROM ? ";
EXEC sp_msforeachtable "ALTER TABLE ? WITH CHECK CHECK CONSTRAINT all"; 
```

然后，我通过将 XML 读入 ADO.NET 数据集并将每一行写入数据库中的相应表，将 XML 导入到暂存数据库中。我可以采取很多自由，因为源表具有完全相同的架构，而且导出的 XML 的架构就在标题中，所以一切都很简单。

然后我在首先触发的目标数据库上执行一个自定义存储过程

```
EXEC sp_msforeachtable "ALTER TABLE ? NOCHECK CONSTRAINT all"; 
```

然后从我的目标表中删除所有内容。我不能简单地运行 [EXEC sp_msforeachtable "ALTER TABLE ? NOCHECK CONSTRAINT all"] 因为目标数据库中有额外的表也会受到影响。

然后我简单地做一个

```
SELECT INTO 
```

从暂存中的每个表到目标中的副本。最后，我跑

```
EXEC sp_msforeachtable "ALTER TABLE ? NOCHECK CONSTRAINT all"; 
```

确保每个约束都恢复原状。

# c# - 如何通过mvc3中的多个局部视图发布数据

> ID：13068934
> 
> 赞同：0
> 
> 时间：2012-10-25T12:45:55.867
> 
> 标签：c#, asp.net-mvc, asp.net-mvc-3, jquery

**看法：**

```
@model 
@using (Html.BeginForm("action", "Controller"))
{
   @html.action("action1","controller1") //use model1
   @html.action("action2","controller2") //use model2
   @html.action("action3","controller3") //use model3
   <button type="submit">submit</button>
} 
```

**父模型**

```
{
  public model model1{get; set;} 

  public model model2{get; set;} 

  public model model3{get; set;} 
} 
```

**控制器**

```
[httppost]
 public ActionResult Submit(parentmodel abc)
    {

    } 
```

所以我的问题是，当我发布数据时 parentmodel 返回为 null 但是当我尝试为

```
[httppost]
public ActionResult Submit(model1 abc)
{
} 
```

我在 model1 中得到了表单值。我的做法对吗？应该怎么做才能在父模型中获取表单值？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T14:02:00.023

首先总是在顶部提到你的模型。

`@model MyMVCModels`

`@Html.TextBoxFor(m => m.Model1.Name)`

这是美丽的地方，当您在文本框或控件中进行设置时，模型 1 的值必须合适。

此外，您的模型的结构可能也不正确。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:14:49.287

从您的问题中很难说出您要尝试做什么，但是如果我理解正确，您想同时将表单值传递给三个单独的部分吗？

如果是这种情况，我建议您跳过表单回发，并在单击提交按钮时进行三个 ajax 调用来加载部分。

# jmeter - JMeter - 在 Beanshell 监听器中访问 TransactionController

> ID：13068937
> 
> 赞同：0
> 
> 时间：2012-10-25T12:46:03.307
> 
> 标签：jmeter

我在我的测试计划中创建了一个 BeanShell Listener 元素，我用它来收集每个 HttpRequest 的 SampleResult 数据并发送到第三方软件。目前我的计划中有四个 HttpRequest：

1.  获取 - 点击登录页面
2.  发布 - 提交数据到登录页面
3.  获取 - 点击页面以设置会话
4.  获取 - 点击“主页”

第 2 步和第 3 步是相关的并按顺序运行，因此从报告的角度来看基本上是“第一步”。我已经围绕这两个元素创建了一个 TransactionController，但我的 Listener 脚本似乎只能从这两个元素中的第二个检索结果数据。本质上，我希望我的脚本能够获得这两个报告步骤所花费的总时间。

有什么想法吗？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T20:45:28.573

我无法重现您的场景（使用 JMeter 2.8）。这是我的测试计划的样子：

```
Thread Group
  HTTP Request 1
  Transaction Controller
    HTTP Request 2
    HTTP Request 3
  HTTP Request 4
  Beanshell Listener 
```

我的 Beanshell Listener 有 row
`log.info(sampleResult.toString() + " - " + sampleResult.getLatency());`。

它记录（省略了日志信息）：

```
HTTP Request 1 - 143
HTTP Request 2 - 84
HTTP Request 3 - 83
Transaction Controller - 167
HTTP Request 4 - 93 
```

看起来有效

# kinect - 在 Kinect 中检测 Nao 机器人

> ID：13068945
> 
> 赞同：3
> 
> 时间：2012-10-25T12:46:22.120
> 
> 标签：kinect, nao-robot

我不确定这是否已经尝试过，但我正在尝试使用[Kinect并检测](http://en.wikipedia.org/wiki/Kinect)[Nao 机器人](http://en.wikipedia.org/wiki/Nao_%28robot%29)做出的手势。

我制作了一个 Kinect 应用程序，[一个基于手势的图片查看器](http://youtu.be/v8SumS-I1qo)，它可以很好地检测到人类（显然可以！）我想尝试的是（我很懒），看看我是否可以使用一些（比如语音）命令来告诉 Nao 做一个向右滑动的手势，让我的应用程序识别那个手势。Nao 可以轻松识别我的命令并做一些手势。然而问题是，当我将 Nao 放在 Kinect 传感器前面时，Kinect 不会跟踪它。

我想知道的是，Kinect 的人体运动跟踪背后是否有一些基础知识，当机器人而不是人类放在它面前时，这些基础知识基本上会失败？

PS：我让 Nao 与传感器保持正确的距离。我还检查了整个机器人是否在传感器的视野中。

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2013-02-19T13:55:56.513

NAO机器人的比例和人类不一样，而且它的体型也不是人类的（太矮了）。由于这些原因，经典的骨骼检测不会将 NAO 检测为人类。

为此，您应该进行当前骨架检测，而不是更改阈值和常量。可悲的是，我没有听说这种算法是开源的......

让我知道...

# android - 识别图像视图上的双击

> ID：13068947
> 
> 赞同：1
> 
> 时间：2012-10-25T12:46:29.880
> 
> 标签：android, layout, gesture-recognition

> **可能重复：**
> [如何在 imageview 的 onclick 上实现双击？](https://stackoverflow.com/questions/6715915/how-to-implement-doubletap-on-imageviews-onclick)

在我的应用程序中，我有一个具有三个图像视图的相对布局。

在活动中，我实现了**simplegesturelistener**以使滑动生效。因此，我也必须重写 onDoubleTap 方法。

我的问题是我想使用双击事件从发生双击的图像视图中**缩小**图像（需要识别布局上的三个图像视图之一）。

在当前情况下有没有办法实现这一点？

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T12:53:11.060

你可以参考下面的代码

```
 gestureDetector = new GestureDetector(new MyGestureDetector());
        gestureListener = new View.OnTouchListener() {
            public boolean onTouch(View v, MotionEvent event) {
                if (gestureDetector.onTouchEvent(event)) {
                    return true;
                }
                return false;
            }
        }; 
```

在这里，我使用了 Gesture 的滑动功能，并且我在布局中也有 webview，滑动应该可以工作。所以 webview 的滚动和滑动都应该工作我在下面添加了方法。主要是这个方法重要添加**dispatchTouchEvent**

```
@Override
public boolean onTouchEvent(MotionEvent event) {

    return (gestureDetector.onTouchEvent(event) || super
            .onTouchEvent(event));
}

@Override
public boolean dispatchTouchEvent(MotionEvent e) {
    super.dispatchTouchEvent(e);
    return gestureDetector.onTouchEvent(e);
} 
```

# java - 将 NullPointerException 视为单元测试失败：这是一种好习惯吗？

> ID：13068954
> 
> 赞同：5
> 
> 时间：2012-10-25T12:46:55.863
> 
> 标签：java, unit-testing, junit, tdd, testng

假设您有一个包含这些行的单元测试

```
assertNotNull(someVal);
assertNotEmpty(someVal); 
```

这显然检查 someVal 不是 null 并且填充了一些东西。

问题是，第一行是否必要，它是否为测试添加了任何内容？我们不应该只有第二行吗，如果它为空，它将抛出一个空指针异常，该异常仍然表明单元测试失败（但不是断言失败）。

在这种简单的情况下，最佳实践是什么？

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-25T12:50:30.530

您不应该将 NPE 视为测试失败。您实际上应该断言它不为空并提供错误消息，

`assertNotNull(someVal, "Some descriptive message saying why value should not be null");`

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T12:53:02.043

这取决于。假设您正在测试函数 myFunc。如果 myFunc 在非异常情况下返回 null，我认为检查结果是否为非 null 和正确值是合理的，因为它可以使您的测试更清晰。

如果 null 是一个例外情况，那么检查它类似于在测试中捕获 RuntimeException。只会使您的测试混乱并掩盖您的意图。

* * *

## 回答 #3

> 赞同：3
> 
> 时间：2012-10-25T12:54:21.983

JUnit 中的失败和错误是有区别的。失败是预期的（使用`assertXXX()`or显式测试`fail()`），错误是非预期的，通常是异常。请参阅[JUnit 中的失败和错误有什么区别？](https://stackoverflow.com/questions/3425995/whats-the-difference-between-failure-and-error-in-junit).

如果你打电话

```
assertNotNull(someVal); 
```

那么你是说这个值不应该为空，而你正在专门测试它。如果您让 NullPointerException 发生，那么解释错误的人将不知道被测代码是否正确，或者您只是没有考虑所有情况。

这是一个意图问题。正如其他人指出的那样，添加解释消息也是一个好主意。

* * *

## 回答 #4

> 赞同：2
> 
> 时间：2012-10-25T13:18:34.577

我不是`assertNot()`'s 的忠实拥护者，更普遍地测试 SUT 可能发生的意外事情，更不用说在每个测试中除了正常的 Assert 之外测试它们。

IMO 你应该只测试你的对象的名义状态。如果*在某些情况下*为空*是*正常的，那么创建一个专用的测试方法来检查它在那种情况下确实为空。为您的测试选择一个能透露意图的名称，例如. 对空值或任何其他值执行相同操作。`someVal`*`someValShouldBeNullWhen...()`*

 *通过查看测试异常消息，您可以看到 SUT 发生了意外的事情，而不是通过尝试提前预测这些意外的事情并为它们使用 assertNots 来填充您的测试。*

# apache - Apache 和 RewriteRule

> ID：13068960
> 
> 赞同：0
> 
> 时间：2012-10-25T12:47:22.233
> 
> 标签：apache, mod-rewrite

我有一个域名网址，`myDomain.com`

在这个域下，我有带有应用程序的 Tomcat`/app/`

此外，我有`mod_jk`在 Tomcat 之前处理的 apache。

要打开我的应用程序，我必须去`myDomain.com/app/{something}`。

如何创建自动重定向或重写，以便将打开的所有内容都`myDomain.com/app/{something}`自动重定向到`myDomain.com/{something}`？

我想切断`/app/`网址。

我可以：

```
Redirect /app/ / 
```

但下一个问题是`/`我想要推送的所有内容`/app/`，所以我有：

```
RewriteRule ^/$ /app/ [P]
RewriteRule ^/([A-Za-z0-9\_]+)$ /app/$1 [P] 
```

但是当我像上面那样使用时`Redirect`，`RewriteRule`我有一个循环并且它不起作用。

# google-cloud-messaging - 如何使用 android gcm 向所有注册用户发送消息？

> ID：13068967
> 
> 赞同：4
> 
> 时间：2012-10-25T12:48:01.643
> 
> 标签：google-cloud-messaging

我正在使用 android gcm 为我的用户制作推送通知。一切都很好。要发送通知，我需要用户注册 ID 来识别他。有用。现在我的问题是我有数百个用户，我想通知他们所有关于某些更新的信息。

有没有办法向所有用户发送通知？我真的必须通过他们的注册ID来推送他们吗？

在服务器端，我正在使用 PHP 和 CURL，因为它在此处的许多示例中都显示...

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-30T10:59:39.460

无法通过单个帖子向所有用户广播。

您需要以最多 1000 个 ID 的块发送每个 ID。因此，如果您有 2500 个 ID，则需要将其分成 3 个帖子。1-1000、1001-2000、2001-2500。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2015-07-08T14:22:29.743

如果您想使用新的 GCM 主题，您可以创建一个“所有用户”主题，并让应用在启动时订阅该主题。然后一个主题帖子可以发给所有用户（我认为限制是一百万，但你可能应该检查一下）。

# graph - 使用鼠标绘制自动机的最佳方法是什么？

> ID：13068977
> 
> 赞同：2
> 
> 时间：2012-10-25T12:48:32.373
> 
> 标签：graph, drawing, finite-automata

我需要一种有效的方法来绘制一些有限自动机，我尝试使用单词形状，但它非常累人。我正在寻找另一种仅通过鼠标绘图来做到这一点的方法（而不是像[jgraph](http://www.jgraph.com/)或[graphviz](http://graphviz.org/)这样的 java 现存的）。

**编辑 ：**

由于没有人回答我，经过一些测试，我认为绘制简单自动机的最佳方法是使用 power point。

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-29T21:36:48.660

如果您想要 Windows 的替代品，那么著名的就是[xfig](http://xfig.org/)。还有[IPE](http://ipe7.sourceforge.net/)。铁杆自动机使用[gastex](http://www.lsv.ens-cachan.fr/~gastin/gastex/)。

# javascript - JavaScript 代码不工作 IE8

> ID：13068979
> 
> 赞同：1
> 
> 时间：2012-10-25T12:48:38.793
> 
> 标签：javascript

我正在尝试使我们单击以使用 JavaScript 更改网站语言的链接工作。这是HTML代码：

```
'<form action="" method="post" name="currlang">'.
    '<input type="hidden" name="languageval" value="'.$session->value("language").'"/>'.
    '<a onclick="langa(this, \'en\');" class="langs'.($session->value("language")=='en'?" active":"").'" id="en"></a>'.
    '<a onclick="langa(this, \'it\');" class="langs'.($session->value("language")=='it'?" active":"").'" id="it"></a>'.
    '<a onclick="langa(this, \'pl\');" class="langs'.($session->value("language")=='pl'?" active":"").'" id="pl"></a>'.
'</form>'. 
```

这里是javascript：

```
function langa(obj, valu) {
    document.getElementsByName("languageval")[1].value=valu;
    document.getElementsByName('currlang')[1].submit();
} 
```

该脚本在新浏览器（Firefoxe、Opera、Chrome、IE9）上运行良好，但在 IE8 上测试时出现错误：

> “'document.getElementsByName(...).1' 为空或不是对象”。

经过一些研究，我发现`getElementsByName()`IE8 及更高版本不支持，也许解决方案是使用 jQuery，这就是我需要帮助的地方。我怎样才能使用 jQuery 或不使用它？

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:55:14.373

您可以尝试使用`ID`or`class`来实现相同的目的，而不是`name`.

例子：

```
<div id="foo">This is id of foo</div>
<div class="choo">This is class of choo</div> 
```

然后，如果您使用`ID`然后使用：

```
document.getElementById('foo'); 
```

并`class`使用：

```
document.getElementsByClassName('choo'); 
```

我希望这有帮助！

* * *

## 回答 #2

> 赞同：-1
> 
> 时间：2012-10-25T12:52:59.893

为此，您希望将名称切换为 Id。

```
<script type="text/javascript" language="javascript">
   function langa (obj, valu){
      $("#languageval").val(valu);
      $("#currlang").submit();
   }
</script> 
```

# 将使用该 Id 提取元素，而 val() 是元素值的获取/设置。

编辑：将类型和语言标签添加到

# wpf - 其他 DataGridTemplateColumn 的 WPF DataGrid 元素名称

> ID：13068980
> 
> 赞同：0
> 
> 时间：2012-10-25T12:48:46.460
> 
> 标签：wpf, wpfdatagrid

我有两个 Datagrid 模板列。1) 第一列是一个组合框 2) 第二列带有扩展的 IntergerUpDown 控件

我需要根据 Combox 框 SelectedItem 值设置 IntegerUpDown 最大值。

请帮助我如何做到这一点。下面的示例 xaml。

```
<Grid><DataGrid ItemsSource="{Binding List1}" Name="x1">
            <DataGrid.Columns>
                <DataGridTemplateColumn Header="ColorTemplate">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <ComboBox  ItemsSource="{Binding DataContext.List2, RelativeSource={RelativeSource Mode=FindAncestor, AncestorType={x:Type DataGrid}}}" 
                                      DisplayMemberPath="Name"  SelectedValue="{Binding ColourId}" SelectedValuePath="Id" Tag="{Binding Id}"
                                       HorizontalAlignment="Stretch" x:Name="discussTemplate" VerticalAlignment="Stretch"
                                         />
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
                <DataGridTemplateColumn Header="UPDown" Width="Auto">
                    <DataGridTemplateColumn.CellTemplate>
                        <DataTemplate>
                            <extToolkit:IntegerUpDown AllowSpin="True" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Width="Auto" Minimum="0"
                                                  x:Name="updown"
                                                  Maximum="{Binding ???}" >

                            </extToolkit:IntegerUpDown>
                        </DataTemplate>
                    </DataGridTemplateColumn.CellTemplate>
                </DataGridTemplateColumn>
            </DataGrid.Columns>
        </DataGrid>
    </Grid> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:17:37.310

只需绑定到您的 itemsrow 的值？因此，如果 ColourID 是由组合框设置的 itemsrow 的属性。您可以将您的最大值绑定到 ColourID

```
<extToolkit:IntegerUpDown AllowSpin="True" HorizontalAlignment="Stretch" VerticalAlignment="Stretch" Width="Auto" Minimum="0"
                          Maximum="{Binding ColourId}" >
</extToolkit:IntegerUpDown> 
```

# javascript - 正则表达式模式中的 concat 变量

> ID：13068981
> 
> 赞同：4
> 
> 时间：2012-10-25T12:48:48.237
> 
> 标签：javascript, regex

我使用这个正则表达式

```
str = "asd34rgr888gfd98";
var p = str.match(/\d{2}/);
alert(p[0]); 
```

但是我不明白如何使用变量作为量词，就是这样写的：

```
 var number = 2;
 var p = str.match(/\d{number}/); 
```

PS我看到这个页面[JavaScript regex pattern concatenate with variable](https://stackoverflow.com/questions/2712878/javascript-regex-pattern-concatenate-with-variable) 但不理解如何使用这些帖子中的示例，就我而言。

* * *

## 回答 #1

> 赞同：10
> 
> 时间：2012-10-25T13:02:39.423

您需要将正则表达式构建为字符串并将其传递给[`RegExp`构造函数](https://developer.mozilla.org/en-US/docs/JavaScript/Reference/Global_Objects/RegExp)：

```
var regexString = '\\d{' + number + '}';
var regex = new RegExp(regexString);
var p = str.match(regex); 
```

请注意，当通过字符串构建正则表达式时，您需要添加一些额外的转义字符来转义字符串以及正则表达式。

* * *

## 回答 #2

> 赞同：4
> 
> 时间：2012-10-25T13:02:19.320

```
var number = "2"
var p = new RegExp("\\d{" + number + "}"); 
```

* * *

## 回答 #3

> 赞同：4
> 
> 时间：2012-10-25T13:02:55.853

这应该有效：

```
var str = "asd34rgr888gfd98";
number = 3;
p = str.match(new RegExp('\\d{' + number + '}'));

alert(p[0]); 
```

# ml - 标准 ML 中的函数声明 `fxy` 和 `f (x, y)` 有什么区别？

> ID：13068982
> 
> 赞同：3
> 
> 时间：2012-10-25T12:48:47.290
> 
> 标签：ml

在标准 ML 中，以下声明有什么区别（我省略了以 开头的定义`=`）：

```
fun f x y; 
```

和

```
fun f (x, y); 
```

据我了解，第一个需要两个参数，而第二个需要一个元组。如果是这样，那么使用一个与另一个的（实际）含义是什么？可以争论哪种风格是最好的吗？假设，实际上*不需要*将元组作为一个整体使用，即只有`x`和`y`分别是相关的。

* * *

## 回答 #1

> 赞同：5
> 
> 时间：2012-10-27T18:39:01.013

是的，正如您所说，第一个采用“两个参数”，而第二个采用一个元组参数。但是，要了解真正发生的事情，您必须了解*currying*。在 ML 中，每个“函数”都只接受一个参数（不多也不少）。

在第二种情况下，这很容易理解，它接受一个参数，它是一个元组，它对元组中的东西做一些事情，并返回一个结果。在第一种情况下，您定义了一个接受一个参数的函数，然后返回一个接受另一个参数的函数，然后返回结果。

比如说，这是一个接受两个`int`s 并返回一个 s的函数`int`。查看这两个函数的类型是有启发性的：第二个函数的类型是`(int * int) -> int`，即从元组到 int 的函数。第一个函数的类型是`int -> int -> int`，因为`->`它是右结合的，所以可以解析为`int -> (int -> int)`。所以你可以看到，它接受一个 int 并返回一个函数。语法`fun f x y = ...`是更详细的语法糖`val f = fn x => fn y => ...`。当您应用此函数时，例如`f 3 4`，函数应用程序是左关联的，因此实际上是`(f 3) 4`，因此您可以看到它是如何工作的：`f`接受一个`int`，返回一个然后应用于另一个 int 的函数。这就是柯里化的要点。ML 的语法只是让它变得透明。

curried 版本（第一个版本）允许您执行*部分应用程序*。这意味着，尽管您的函数在概念上需要两个参数，但您不必给它那么多参数。所以`f 3 4`我们上面的 （即`(f 3) 4`），如果我们只取`f 3`，而不是将其应用于`4`，只需将其保留并将其存储在变量或其他东西中怎么办？通过“给函数提供比它想要的更少的参数”，我们自动得到一个接受剩余参数的函数。例如，我们可以这样做`map (f 3) someList`，它会为列表中`f 3 x`的每个计算一个列表`x`，而无需我们编写一些复杂的语法。

在标准 ML 中，库函数大多采用非柯里化形式；而在 OCaml 和 Haskell 中，它们主要是咖喱形式。（请参阅[这个问题](https://stackoverflow.com/questions/10666913/why-prefer-currying-to-tuple-arguments-in-ocaml)。）但是，作为高阶函数（如 map 和 fold）的 SML 库函数倾向于将它们的函数参数放在单独的（curried）参数中。

# python - 在另一个类中调用一个类的方法

> ID：13068983
> 
> 赞同：2
> 
> 时间：2012-10-25T12:48:48.893
> 
> 标签：python, selenium

我正在尝试调用`test_check_footer_visible`另一个`.py`文件。

`origin.py`有：

```
class FooterSection(unittest.TestCase):
    """
    """
    browser  = None
    site_url = None

    def setUp(self):
        self.browser.open(self.site_url)
        self.browser.window_maximize()

        # make footer section
        self._footer = FooterPage(self.browser)

    def test_check_footer_visible(self):
        #press the page down
        self.browser.key_down_native("34")
        self.browser.key_down_native("34")
        self.browser.key_down_native("34")
        print "Page down"
        time.sleep (10) 
```

现在`dest.py`我需要打电话`test_check_footer_visible()`。我怎么做？

`dest.py`具有以下格式：

```
class TestPageErrorSection(unittest.TestCase):
    """
    """
    browser  = None
    site_url = None

    def setUp(self):
        global SITE_URL, BROWSER

        if not BROWSER:
            BROWSER = self.browser

        if not SITE_URL:
            SITE_URL = self.site_url

        BROWSER.open(SITE_URL)
        BROWSER.window_maximize()
        print 'page not found 404 error'
        self._pageerror_section = ErrorSection(BROWSER)

    def _primary_navigation(self):
        # I want to call test_check_footer_visible here. 
```

我尝试了[从另一个类调用类方法中的所有内容](https://stackoverflow.com/questions/3856413/call-class-method-from-another-class)

* * *

## 回答 #1

> 赞同：1
> 
> 时间：2012-10-25T12:52:56.353

你不能（不做一些非常阴暗的事情——见@glglgl的评论）——至少在不改变你的代码的情况下不能。你不能这样做的原因是因为`test_check_footer_visible`会断言传入的第一个元素是类的一个实例`FooterSection`（它不是——它是 的一个实例`TestPageErrorSection`）。您（至少）有几个用于重构的选项。

1）直接`TestPageErrorSection`继承`FooterSection`并使用该函数（例如`self.test_check_footer_visible()` *，根据类名，这对我来说似乎不是一个很好的选择*

2) 做`test_check_footer_visible()`一个正则函数。然后可以从任一类调用它。

3）创建一个第3类（例如`SectionBase`），穿上`test_check_footer_visible`那个类，让你的其他2个类继承它。

# .htaccess - 复杂的 .hatccess 规则转换为 web.config

> ID：13068986
> 
> 赞同：1
> 
> 时间：2012-10-25T12:48:54.950
> 
> 标签：.htaccess, iis-7

我有以下已使用多年的 .haccess 规则，但是我需要将它们转换为在 web.config 文件中工作。

有人知道从哪里开始吗？

```
#Set the mapfiles for the category and product pages 
RewriteMap mapfile1 txt:maps/map_categories.txt 
RewriteMap mapfile2 txt:maps/map_products.txt 
RewriteMap lower int:tolower 

#FIX the trailing slash 
RewriteRule ^([^.?]+[^.?/])$ $1/ [R=301,L] 

#Define the rules for the CATEGORY pages 
RewriteCond %{URL} ^(?!/(cms|cms/.*)$)
RewriteCond %{URL} ^(?!/(vadmin|vadmin/.*)$)
RewriteCond %{URL} ^(?!/(bathroom-blog|bathroom-blog/.*)$) 
RewriteRule ^(?:[^/]+/)?([^/.]+)/?$ product_list.asp?catid=${mapfile1:${lower:$1}}&%{QUERY_STRING} [NC,L]

#Define the rules for the PRODUCT pages 
RewriteCond %{URL} ^(?!/(cms|cms/.*)$)
RewriteCond %{URL} ^(?!/(vadmin|vadmin/.*)$)
RewriteCond %{URL} ^(?!/(bathroom-blog|bathroom-blog/.*)$)  
#RewriteCond %{REQUEST_FILENAME}.asp -d 
#RewriteCond %{REQUEST_FILENAME}.asp -f
RewriteRule ^.+/.+/([^/.]+)/$ product_detail.asp?prodID=${mapfile2:${lower:$1}}&%{QUERY_STRING} [NC,L] 
```

非常感谢任何帮助！

干杯，克里斯。

* * *

## 回答 #1

> 赞同：2
> 
> 时间：2012-10-26T09:18:25.600

我对 .NET`web.config`文件了解不多。我最后一次使用它们是四年前。`.htaccess`因此，我首先逐步解释您的文件的作用。我关注的是做了**什么**而不是**怎么**做，也就是说，我不解释很多表达方式，比如`^([^.?]+`，看起来像在咒骂的漫画人物。

**这是一个很长的答案，所以给自己喝杯咖啡。**

让我们从前三行开始。

```
RewriteMap mapfile1 txt:maps/map_categories.txt 
RewriteMap mapfile2 txt:maps/map_products.txt 
RewriteMap lower int:tolower 
```

您的文件或主机配置中是否有`RewriteEngine on`某个位置？`.htaccess`

`RewriteMap`设置您可以在以下规则中使用的映射，如下所示`${mapfile1:argument}`：您应该有两个文件`map_categories.txt`并`map_products.txt`在您的`maps`子目录中。我可以想象您的应用程序会更新这些文本文件。第三个映射将大写字母转换为小写字母。

* * *

```
#FIX the trailing slash 
RewriteRule ^([^.?]+[^.?/])$ $1/ [R=301,L] 
```

评论是真的。假设您有`http://example.com/product`，这将被*重定向*( `HTTP 301 Moved Permanently`) 到`http://example.com/product/`.

* * *

```
#Define the rules for the CATEGORY pages 
RewriteCond %{URL} ^(?!/(cms|cms/.*)$)
RewriteCond %{URL} ^(?!/(vadmin|vadmin/.*)$)
RewriteCond %{URL} ^(?!/(bathroom-blog|bathroom-blog/.*)$) 
RewriteRule ^(?:[^/]+/)?([^/.]+)/?$ product_list.asp?catid=${mapfile1:${lower:$1}}&%{QUERY_STRING} [NC,L] 
```

如果您的 url 与这些完全一样：`http://example.com/cms`, `http://example.com/cms/`, `http://example.com/cms/any_path`, 以及 for `vadmin`or `bathroom-blog`instead of ，则使用相应的类别 ID`cms`调用。`product_list.asp`这些规则使用映射`map_categories.txt`将名称映射到 ID，并且还允许大小写混合，即使映射仅包含小写名称。

**摘要**：类别 id 的`http://example.com/cms/some_category`调用。`product_list.asp``some_category`

* * *

```
#Define the rules for the PRODUCT pages 
RewriteCond %{URL} ^(?!/(cms|cms/.*)$)
RewriteCond %{URL} ^(?!/(vadmin|vadmin/.*)$)
RewriteCond %{URL} ^(?!/(bathroom-blog|bathroom-blog/.*)$)  
#RewriteCond %{REQUEST_FILENAME}.asp -d 
#RewriteCond %{REQUEST_FILENAME}.asp -f
RewriteRule ^.+/.+/([^/.]+)/$ product_detail.asp?prodID=${mapfile2:${lower:$1}}&%{QUERY_STRING} [NC,L] 
```

这真的很奇怪。这三个`RewriteCond`条件与上面的前三个完全相同。如果这确实有效，那么您的前任使用了一些 URL 重写黑魔法，例如通过在成功重写（没有重定向）后利用该规则，重新读取规则并再次将其应用于现在重写的 URL。要了解有关此的更多信息，我需要访问您的系统。

我已经知道**我没有看到所有**:`RewriteEngine on`以及映射文件。

* * *

URL 重写是众所周知的主题之一，如果不进行一些实验就很难做到这一点。难怪在 Stack Overflow 上很难立即获得工作帮助。问题是几乎总是需要访问所涉及的系统，因为如果不研究实时系统就不可能给出答案。

正如 Apache 本身所说：[http](http://shib.ametsoc.org/manual/misc/rewriteguide.html#page-header) ://shib.ametsoc.org/manual/misc/rewriteguide.html#page-header ：

> Apache 模块`mod_rewrite`是一个杀手级模块，即它是一个非常复杂的模块，它提供了一种强大的方式来进行 URL 操作。有了它，您几乎可以进行您梦寐以求的所有类型的 URL 操作。你必须付出的代价是接受复杂性，因为`mod_rewrite`它的主要缺点是初学者不容易理解和使用。甚至 Apache 专家有时也会发现`mod_rewrite`可以提供帮助的新方面。
> 
> 换句话说：`mod_rewrite`你要么*第一次射自己的脚，*然后再也不使用它，要么因为它的力量而在你的余生中爱它。

重点是我的。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-31T11:09:17.777

经过一个小时左右的谷歌搜索，我发现 IIS7 通过其 rewriteMaps 函数支持映射文件。以下两个网页为我提供了所需的解决方案，并且我创建了一个单独的“rewritemaps.config”文件来存储 ID-> URL 映射。

[http://www.iis.net/learn/extensions/url-rewrite-module/using-rewrite-maps-in-url-rewrite-module](http://www.iis.net/learn/extensions/url-rewrite-module/using-rewrite-maps-in-url-rewrite-module)

[http://blogs.iis.net/ruslany/archive/2010/05/19/storing-url-rewrite-mappings-in-a-separate-file.aspx](http://blogs.iis.net/ruslany/archive/2010/05/19/storing-url-rewrite-mappings-in-a-separate-file.aspx)

任何希望将 .htaccess 地图文件配置转换为 web.config 的人，这两个页面都可以帮助您。

# javascript - JQuery 选择器不起作用

> ID：13068989
> 
> 赞同：2
> 
> 时间：2012-10-25T12:49:08.360
> 
> 标签：javascript, jquery, html, jquery-selectors

我的页面上有以下输入：

```
<input type="text" name="r1" /> 
```

我正在尝试使用 JQuery 选择它`$("[name='r1']")`，并且由于某种原因它返回`null`. 好的，好的，标题具有误导性，因为是我做错了；你能告诉我什么吗？

**编辑：**

`$('input[name="r1"]')`也不行。另外，很抱歉错字。

* * *

## 回答 #1

> 赞同：7
> 
> 时间：2012-10-25T12:50:20.047

## 最后编辑

## [工作演示](http://jsfiddle.net/hkLES/)

html代码

```
<input type="text" name="r1" />​ 
```

jQuery代码

```
$(document).ready(function() {
   alert($('input[name="r1"]').length);
});​ 
```

* * *

**旧更新**

你在这里有拼写错误你试图找到`r2`不存在的元素只是更新代码`$("[name='r1']")`

或者

找到正确的方法你应该做如下

`$("input[name='r2']")`而`$("[name='r2']")`不仅仅是

**编辑**

根据您编辑的问题，您应该在此处查看示例：[**属性等于选择器 [name="value"]**](http://api.jquery.com/attribute-equals-selector/)

**编辑**

为了正确检查你可以这样做

```
$(document).ready(function() {
   alert($('input[name="r1"]').length);
}); 
```

* * *

## 回答 #2

> 赞同：2
> 
> 时间：2012-10-25T12:53:14.093

刚刚做了一个快速测试：

```
<input type="text" name="r1" />​ 
```

使用以下 Javascript

```
$('input[name=r1]').click(function(e){
  alert('found');
});​ 
```

它工作得很好！

* * *

## 回答 #3

> 赞同：1
> 
> 时间：2012-10-25T12:51:50.813

你没有告诉 jQuery 你在寻找什么元素，那就是你`input`

尝试这样做

`$('input[name=r1]')`

* * *

## 回答 #4

> 赞同：1
> 
> 时间：2012-10-25T12:52:08.353

我认为选择器是错误的。应该是`r1`相对的`r2`。

[jsFiddle](http://jsfiddle.net/TheJoeFletch/r4LdA/)

```
$("[name=r1]") 
```

* * *

## 回答 #5

> 赞同：1
> 
> 时间：2012-10-25T12:54:34.867

您需要包含属性过滤器的 html 标记。

```
$("input[name='r2']"); 
```

有关属性选择器的更多信息，请参阅[此](http://api.jquery.com/category/selectors/)链接。

* * *

## 回答 #6

> 赞同：1
> 
> 时间：2012-10-25T12:57:13.337

它将明确地工作：

```
$("*[name='r1']") 
```

* * *

## 回答 #7

> 赞同：0
> 
> 时间：2016-02-16T08:03:21.443

您可以同时使用`$("[name='r1']")`和`$('input[name="r1"]')`在这种情况下

`$("[name='r1']")`如果您想选择任何属性名为“ **name** ”等于“ **r1** ”的元素，请使用

`$('input[name="r1"]')`如果您只想选择属性为“ **name** ”等于“ **r1** ”的**输入**元素，请使用

 ****[此处](http://jascripts.blogspot.com/2015/12/how-to-use-jquery-attribute-filters.html)列出了更多 JQuery 属性填充器示例****

# c++ - 什么时候使用模板显式实例化？

> ID：13068993
> 
> 赞同：20
> 
> 时间：2012-10-25T12:49:18.097
> 
> 标签：c++, templates, explicit-instantiation

我刚刚阅读了有关模板显式实例化的内容：

`template struct MyStruct<long>;`

它被描述为“非常罕见”，那么它在什么情况下会有用呢？

* * *

## 回答 #1

> 赞同：15
> 
> 时间：2012-10-25T13:10:20.830

用例之一是对最终用户隐藏定义。

**tpl.h**：

```
template<typename T>
void func(); // Declaration 
```

**tpl.cpp**：

```
template<typename T>
void func()
{
    // Definition
}

template void func<int>(); // explicit instantiation for int
template void func<double>();  // explicit instantiation for double 
```

**主文件**

```
#include "tpl.h"
int main()
{
    func<double>(); // OK
    func<int>(); // OK
    // func<char>(); - Linking ERROR
} 
```

* * *

## 回答 #2

> 赞同：9
> 
> 时间：2012-10-25T15:34:17.053

显式实例化旨在优化模板库的使用，以编译的二进制形式而不是源代码形式提供一些（最常用的）模板实例。这将减少最终用户应用程序的编译和链接时间。例如`std::basic_string<char>`，并且`std::basic_string<wchar_t>`可以在 STL 分发中显式实例化，避免在每个翻译单元中对其实例化进行工作。

当您想要封装模板实现并且希望此模板仅用于众所周知的类型集时，显式实例化也很有用。在这种情况下，您只能将模板函数（自由或成员）的声明放在头文件 ( `.h/.hpp`) 中，并在翻译单元 ( `.cpp`) 中定义它们。

**例子：**

```
 // numeric_vector.h
 //////////////////////////////////////////////////
 template <typename T> class numeric_vector
 {
    ...
    void sort();
 };

 // numeric_vector.cpp
 //////////////////////////////////////////////////
 // We know that it shall be used with doubles and ints only,
 // so we explicitly instantiate it for doubles and ints
 template class numeric_vector<int>;
 template class numeric_vector<double>;

 // Note that you could instantiate only specific
 // members you need (functions and static data), not entire class:
 template void numeric_vector<float>::sort();

 template <typename T> void numeric_vector<T>::sort()
 {
   // Implementation
   ...
 } 
```

当您需要来自模板的实例化类型但在某些不会触发实例化本身的语法构造中（例如[`__declspec(uuid)`Visual Studio 中的某些特定于](https://stackoverflow.com/a/11989239/1599260)编译器的元功能）时，显式实例化也很有用。

请注意与可用于实现封装的另一种技术的区别——显式特化。对于显式特化，您必须为每种要特化的类型提供特定的定义。使用显式实例化，您有单个模板定义。

考虑具有显式特化的相同示例：

**例子：**

```
 // numeric_vector.h
 //////////////////////////////////////////////////
 template <typename T> class numeric_vector
 {
    ...
    void sort();
 };

 template <> class numeric_vector<int>
 {
    ...
    void sort();
 };

 template <> class numeric_vector<double>
 {
    ...
    void sort();
 };

 // Specializing separate members is also allowed
 template <> void numeric_vector<float>::sort();

 // numeric_vector.cpp    
 //////////////////////////////////////////////////
 void numeric_vector<int>::sort()
 {
   // Implementation for int
   ...
 }

 void numeric_vector<double>::sort()
 {
   // Implementation for double
   ...
 }

 void numeric_vector<float>::sort()
 {
   // Implementation for float       
   ...
 } 
```

* * *

## 回答 #3

> 赞同：5
> 
> 时间：2012-10-25T12:59:12.153

具有显式特化允许您隐藏实现，如您所知，使用模板通常是不可能的。

我在处理几何的库中只见过一次这种技术，他们会提供自己的矢量类。

所以你可以使用

```
lib::Vector<MyShape> 
```

具有提供的一些基本功能`lib::Vector`和基本实现，如果您将其与他们的类一起使用（一些，不是全部）

```
lib::Vector<lib::Polygon> 
```

您将使用显式专业化。您将无法访问该实现，但我敢打赌，那里的幕后正在进行一些核心优化。

* * *

## 回答 #4

> 赞同：0
> 
> 时间：2012-10-25T12:59:15.443

如果您真的不喜欢在头文件中定义模板函数，您可以在单独的源文件中定义函数，并使用显式模板实例化来实例化您使用的所有版本。然后，您只需要在头文件中进行前向声明，而不是完整的定义。

# java - 在 hadoop mapreduce 中的 compareTo 期间更改键中的值

> ID：13068995
> 
> 赞同：0
> 
> 时间：2012-10-25T12:49:22.707
> 
> 标签：java, hadoop, mapreduce

有没有办法在使用自定义键的 mapreduce 作业的 compareTo 期间更改实例变量的值？（我有一些问题，因为它使用两种方法读取和写入数据 = readFields(DataInput in) 和 write(DataOutput out) ，并且它仅在第一次将对象写入框架，我无法修改它的其余部分过程）

我有此代码用于我的自定义键的 compareTo

```
 @Override
    public int compareTo(MultipleText m1) {
        for(Writable one : m1.getChiavi().keySet())
        {
            if(this.chiavi.keySet().contains(one))
            {
                if(this.chiavi.get(one).equals(m1.getChiavi().get(one)))
                    if(!strutturaTab.equals(m1.getStrutturaTab()))
                    {
//                      if(this.chiavi.size()>m1.getChiavi().size())
//                          m1.setChiaviComplete(this.chiavi);
//                      else if(this.chiavi.size()<m1.getChiavi().size())
//                          this.setChiaviComplete(m1.getChiavi());
                        return 0;
                    }
                return 1;
            }
            return 2;
        }
        return -1;
    } 
```

注释行是不起作用的行

当它进入减少阶段时，方法 getChiaviComplete() 返回 null ，这是我初始化并写入（使用 write(DataOutput out) 方法）实例变量（chiaviComplete）时的值

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2013-08-26T07:27:36.273

在比较过程中您不能更改 Key，因为正在比较的记录只是记录的副本。更改对象不会更改记录。

# html - 将文本放在底部，但让它留在文档流中

> ID：13068997
> 
> 赞同：0
> 
> 时间：2012-10-25T12:49:32.300
> 
> 标签：html, css, position

我有以下问题：有一个图像向左浮动，右侧有一个边距。在它旁边，有一个包含标题和文本的 div（我不知道两者的任何高度值，因为它将被动态插入）。

标题必须与顶部对齐，文本与底部对齐。我以为文字绝对定位就够了，但是如果图片的高度小于标题+文字的高度，文字就会流入标题中......

我还没有找到任何解决方案来将文本放置在底部，但让它留在文档流中。

我不允许使用任何表格元素（另一方面，允许使用 display: table 等，但我还没有找到任何解决方案）

```
<<<HTML
<div>
    <h4>A headline, that isn't involved</h4>
    <div class="clearfix">
        <div> <!-- float left, margin-right -->
            <img>
        </div>
        <div> <!-- float left -->
            <h5>The headline aligning to the top</h5>
            <p>
                Some text aligning to the bottom
            </p>
        </div>
    </div>
</div>
HTML 
```

请帮助我，我只是想不出任何解决方案！

![在此处输入图像描述](../Images/6466ab914d5690eea43733f9c4733961.png)

/编辑：

图像和文本/标题容器的高度都可能不同，因此没有固定高度。到目前为止我得到的是（假设文本不会超过 4 行（但这不是最好的方法）。下一个问题是：Firefox 将 .box 的边距底部添加到底部：0; 文本（如：底部：-35px；但显示为底部：0；...... Chrome 确实以正确的方式解释）：

```
<style>
    .box {
      width: 488px;
      float: left;
      margin-bottom: 33px;
      margin-right: 22px;
      padding-top: 5px;
    }

    .table {
      display: table;
    }

    .box.wide .box-content {
      display: table-row;
    }
    .box.wide .box-content > div {
      display: table-cell;
      position: relative;
      width: 233px;
    }
    .box.wide .box-content > div:first-child {
      margin-right: 22px;
    }

    .box.wide .box-content div h5 {
      padding-bottom: 88px;
    }
    .box.wide .box-content div p {
      position: absolute;
      bottom: 0px;
    }

</style>

<div class="box wide width-488">
  <div>
    <h4>Überschrift</h4>
    <div class="table">
      <div class="box-content">
          <div>
              <img alt="" height="401" width="233" src="res/dummy/233-130.jpg">
          </div>

          <div>
              <h5>Überschrift  Lorem ipsum dolor sit amet, con sectetuer adipiscing eliÜberschrift  Lorem ipsum dolor sit amet, con sectetuer adipiscing elit</h5>
              <p>
                Lorem ipsum dolor sit amet, con sectetuer adipiscing elit. Aenean commodo ligula eget dolor. Lor em ipsum dolor amet.
                <a href="#">mehr</a>
              </p>
          </div>
      </div>
    </div>
  </div>
</div> 
```

* * *

## 回答 #1

> 赞同：0
> 
> 时间：2012-10-25T13:03:59.007

尝试`display: inline-block;`在浮动元素和要对齐到底部的文本元素上使用。

然后将属性`vertical-align: bottom;`放在要对齐底部的文本元素上。

* * *

## 回答 #2

> 赞同：0
> 
> 时间：2012-10-25T13:45:26.440

这是一个解决方案，使用 display: table，相对和绝对定位：

```
<div>
    <h4>A headline, that isn't involved</h4>
    <div style="display:table;">
        <div style="display:table-row;">
            <div style="display:table-cell;padding-right: 20px;">
                <img style="display:block" src="http://baconmockup.com/300/200">
            </div>
            <div style="display:table-cell;background:green;position:relative;vertical-align:top;">
                <p style="">Some text aligning to the top</p>
                <p style="position:absolute;bottom:0;">Some text aligning to the bottom</p>
            </div>
        </div>
    </div>
</div>​ 
```

它不依赖任何固定的高度，自动适应图像的高度。

jsfiddle.net/EUvXh/

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2012-10-25T13:21:55.067

我假设您可以将右列设为固定高度，因为左列和右列在您的图像示例中是相同的。

为了您的方便，我做了一个 jsfiddle：http: [//jsfiddle.net/hLPXM/](http://jsfiddle.net/hLPXM/)

或者，这是我根据您的原始代码所做的：

```
<h4>A headline, that isn't involved</h4>
<div class="clearfix">
    <div class="left"> <!-- float left, margin-right -->
        <img src="http://placehold.it/150x350" alt="placeholder" />
    </div>
    <div class="right"> <!-- float left -->
        <h5>The headline aligning to the top</h5>

        <div class="bottom-text">
            <p>
                Some text aligning to the bottom
            </p>
        </div><!-- .bottom-text -->
    </div>
</div> 
```

注意我在要对齐底部的`.bottom-text`周围添加了一个类。`<p>`

这是 div 正确浮动的 CSS 等。请注意`position:relative;`：

```
.left {float:left; margin-right:20px;}
.right {float:left; background:#eeddff; /*background to see div*/}

.left, .right {height:350px; position:relative;} 
```

更重要的是从基线开始的文本：

```
.bottom-text {
    position:absolute;
    bottom:0;
} 
```

​</p>

​</p>

# extjs4 - 在表单渲染后设置 AfterLabelTextTpl

> ID：13068999
> 
> 赞同：2
> 
> 时间：2012-10-25T12:49:40.910
> 
> 标签：extjs4, extjs

我有一个带有动态字段的表单。在表单的 afterrender 事件中，我想设置 afterLabelTextTpl 属性。我可以设置此属性，但在我的表单中看不到它的变化。我怎样才能做到这一点？

片段：

```
listeners: {
    beforerender: function () {
        var fields = me.getForm().getFields();
        Ext.each(fields.items, function (f, idx) {
            f.afterLabelTextTpl = requiredTpl;

            console.log(f.afterLabelTextTpl);
        }); //eo Ext.each
    }
} 
```

**编辑：**
我正在寻找**beforerender**方法

* * *

## 回答 #1

> 赞同：3
> 
> 时间：2013-04-18T20:37:49.873

尝试

```
f.labelEl.dom.innerHTML = "LABEL:<span style='color:red;font-weight:bold' data-qtip='Required'>*</span>"; 
```

* * *

## 回答 #2

> 赞同：1
> 
> 时间：2012-10-27T00:09:43.647

在组件已经渲染后，您不能使用此属性。initRenderTpl（使用标签模板）方法仅在组件尚未呈现时运行。一旦渲染它就不会再次运行。

您将需要直接更新 DOM。

* * *

## 回答 #3

> 赞同：0
> 
> 时间：2014-01-23T15:47:25.973

我会在你的表格中推荐这样的东西：

```
setRequired: function(field, index) {
    field.afterLabelTextTpl = requiredTpl;
},

initComponent: function(arguments) {
    var me = this;

    this.on('beforeadd', function(me, field){
        var fields;

        if (field.isXType('fieldset')) {
            fields = field.query('field');
            Ext.each(fields, me.setRequired);
        } else {
            me.setRequired(field);
        }
    });

    // rest of logic
    me.callParent(arguments);
}, 
```